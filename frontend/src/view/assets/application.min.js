/* ==========================================================================
   Emm JS - nightly build 25-11-2025
   ========================================================================== */

/* License
   ========================================================================== */

/**
 * EMM License to be added
 *
 **/



/* Libraries
   ========================================================================== */

/**
 * jQuery JavaScript Library v3.5.1
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * (c) 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Licensed under MIT (http://jquery.org/license)
 *
 * http://jquery.com
 **/

/**
 * Lo-Dash 4.17.21 (Custom Build)
 *
 * Build: `lodash -o ./dist/lodash.compat.js`
 *
 * Based on Underscore.js 1.8.3
 * Licensed under MIT (http://underscorejs.org/LICENSE)
 * (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 *
 * (c) 2012-2013 The Dojo Foundation http://dojofoundation.org/
 * Licensed under MIT (http://lodash.com/license)
 *
 * https://lodash.com/
 **/

/**
 * moment.js 2.30.1
 *
 * (c) Tim Wood, Iskren Chernev, Moment.js contributors
 * Licensed under MIT
 *
 * https://momentjs.com/
 **/

/**
 * jQuery Plugins
 *
 * jquery-i18n v1.1.1
 * Licensed under MIT
 * (c) 2010 Dave Perrett
 * https://github.com/recurser/jquery-i18n
 *
 * jquery-migrate v3.3.2
 * Licensed under MIT
 * (c) 2005, 2013 jQuery Foundation, Inc. and other contributors
 * https://github.com/jquery/jquery-migrate
 *
 * jquery-mousewheel v3.1.9
 * Licensed under MIT
 * (c) 2013 Brandon Aaron
 * http://brandon.aaron.sh
 *
 * jquery-inputmask v3.1.63
 * Licensed under MIT (http://www.opensource.org/licenses/mit-license.php)
 * (c) 2010 - 2015 Robin Herbots
 * http://github.com/RobinHerbots/jquery.inputmask
 *
 * jquery-dirty v0.8.3
 * Licensed under MIT (http://www.opensource.org/licenses/mit-license.php)
 * (c) 2016 Simon Taite
 * https://github.com/simon-reynolds/jquery.dirty
 *
 * jquery Endless Scroll
 * Dual licensed under the MIT and GPL licenses
 * (c) 2008-2012 Fred Wu
 * https://github.com/fredwu/jquery-endless-scroll
 **/

/**
 * jQuery UI v1.14.1
 *
 * widget.js, position.js, data.js, disable-selection.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js, focusable.js, form-reset-mixin.js, jquery-patch.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/draggable.js, widgets/droppable.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/resizable.js, widgets/selectable.js, widgets/selectmenu.js, widgets/slider.js, widgets/sortable.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js
 *
 * (c) OpenJS Foundation and other contributors
 * Licensed under MIT
 *
 * http://jqueryui.com
 **/

/**
 * Ace Editor
 *
 * Distributed under the BSD license:

 * Copyright (c) 2010, Ajax.org B.V.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of Ajax.org B.V. nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * http://ace.c9.io/
 **/

/**
 * iFrame Resizer v4.3.2
 *
 * (c) 2014 David J. Bradshaw - dave@bradshaw.net
 * Licensed under MIT
 *
 * https://davidjbradshaw.github.io/iframe-resizer/
 **/

/**
 * Toastr (modified version)
 *
 * (c) 2012-2014 John Papa and Hans Fjällemark
 * Licensed under MIT
 *
 * https://github.com/CodeSeven/toastr
 **/

/**
 * perfect-scrollbar v1.5.3
 *
 * Copyright 2021 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 *
 * https://github.com/mdbootstrap/perfect-scrollbar
 **/

/**
 * AGGrid (Community) v33.1.0
 *
 * (c) 2015-2024 AG GRID LTD
 * Licensed under MIT
 *
 * https://github.com/ag-grid/ag-grid
 **/

/**
 * Bootstrap v5.3.3
 *
 * (c) 2011-2024 The Bootstrap Authors
 * Licensed under MIT
 *
 * https://getbootstrap.com/
 **/

/**
 * ChartJS v4.4.7
 *
 * (c) 2014-2024 Chart.js Contributors
 * Licensed under MIT
 *
 * https://github.com/chartjs/Chart.js
 **/

/**
 * ChartJS Plugins
 *
 * chartjs-adapter-date-fns v3.0.0
 * Licensed under MIT
 * (c) 2019 Chart.js Contributors
 * https://github.com/chartjs/chartjs-adapter-date-fns
 *
 * chartjs-plugin-datalabels v2.2.0
 * Licensed under MIT
 * (c) 2017-2021 chartjs-plugin-datalabels contributors
 * https://github.com/chartjs/chartjs-plugin-datalabels
 *
 * chartjs-plugin-zoom v2.2.0
 * Licensed under MIT
 * (c) 2013-2021 chartjs-plugin-zoom contributors
 * https://github.com/chartjs/chartjs-plugin-zoom
 **/

/**
 * hammer.js v4.4.7
 *
 * (c) 2011-2014 by Jorik Tangelder (Eight Media)
 * Licensed under MIT
 *
 * https://github.com/hammerjs/hammer.js
 **/

/**
 * Select2 v4.1.0-rc.0
 *
 * (c) 2012-2017 Kevin Brown, Igor Vaynberg, and Select2 contributors
 * Licensed under MIT
 *
 * https://github.com/select2/select2
 **/

/**
 * Select2 To Tree v1.1.1.
 *
 * (c) 2017 clivezhg
 * Licensed under MIT
 *
 * https://github.com/clivezhg/select2-to-tree
 **/

/**
 * spectrum-colorpicker v1.8.1
 *
 * (c) Brian Grinstead
 * Licensed under MIT
 *
 * https://www.npmjs.com/package/spectrum-colorpicker
 **/

/**
 * marked v15.0.12
 *
 * (c) 2011-2025, Christopher Jeffrey
 * Licensed under MIT
 *
 * https://github.com/markedjs/marked
 **/
var EndlessScroll;!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var i=[],n=Object.getPrototypeOf,o=i.slice,r=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},s=i.push,a=i.indexOf,l={},c=l.toString,d=l.hasOwnProperty,u=d.toString,h=u.call(Object),p={},g=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},f=function(e){return null!=e&&e===e.window},m=e.document,v={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,i){var n,o,r=(i=i||m).createElement("script");if(r.text=e,t)for(n in v)(o=t[n]||t.getAttribute&&t.getAttribute(n))&&r.setAttribute(n,o);i.head.appendChild(r).parentNode.removeChild(r)}function y(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var w="3.5.1",C=function(e,t){return new C.fn.init(e,t)};function _(e){var t=!!e&&"length"in e&&e.length,i=y(e);return!g(e)&&!f(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}C.fn=C.prototype={jquery:w,constructor:C,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=C.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return C.each(this,e)},map:function(e){return this.pushStack(C.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(C.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:i.sort,splice:i.splice},C.extend=C.fn.extend=function(){var e,t,i,n,o,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||g(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)n=e[t],"__proto__"!==t&&s!==n&&(c&&n&&(C.isPlainObject(n)||(o=Array.isArray(n)))?(i=s[t],r=o&&!Array.isArray(i)?[]:o||C.isPlainObject(i)?i:{},o=!1,s[t]=C.extend(c,r,n)):void 0!==n&&(s[t]=n));return s},C.extend({expando:"jQuery"+(w+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==c.call(e))&&(!(t=n(e))||"function"==typeof(i=d.call(t,"constructor")&&t.constructor)&&u.call(i)===h)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){b(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,n=0;if(_(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},makeArray:function(e,t){var i=t||[];return null!=e&&(_(Object(e))?C.merge(i,"string"==typeof e?[e]:e):s.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:a.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,o=e.length;n<i;n++)e[o++]=t[n];return e.length=o,e},grep:function(e,t,i){for(var n=[],o=0,r=e.length,s=!i;o<r;o++)!t(e[o],o)!==s&&n.push(e[o]);return n},map:function(e,t,i){var n,o,s=0,a=[];if(_(e))for(n=e.length;s<n;s++)null!=(o=t(e[s],s,i))&&a.push(o);else for(s in e)null!=(o=t(e[s],s,i))&&a.push(o);return r(a)},guid:1,support:p}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=i[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});var S=function(e){var t,i,n,o,r,s,a,l,c,d,u,h,p,g,f,m,v,b,y,w="sizzle"+1*new Date,C=e.document,_=0,S=0,x=le(),A=le(),E=le(),T=le(),k=function(e,t){return e===t&&(u=!0),0},D={}.hasOwnProperty,M=[],P=M.pop,R=M.push,I=M.push,O=M.slice,N=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",$="(?:\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",G="\\["+F+"*("+$+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+$+"))|)"+F+"*\\]",B=":("+$+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+G+")*)|.*)\\)|)",H=new RegExp(F+"+","g"),z=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),W=new RegExp("^"+F+"*,"+F+"*"),V=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),j=new RegExp(F+"|>"),U=new RegExp(B),Y=new RegExp("^"+$+"$"),q={ID:new RegExp("^#("+$+")"),CLASS:new RegExp("^\\.("+$+")"),TAG:new RegExp("^("+$+"|[*])"),ATTR:new RegExp("^"+G),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},K=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\([^\\r\\n\\f])","g"),ie=function(e,t){var i="0x"+e.slice(1)-65536;return t||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){h()},se=we(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{I.apply(M=O.call(C.childNodes),C.childNodes),M[C.childNodes.length].nodeType}catch(e){I={apply:M.length?function(e,t){R.apply(e,O.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function ae(e,t,n,o){var r,a,c,d,u,g,v,b=t&&t.ownerDocument,C=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==C&&9!==C&&11!==C)return n;if(!o&&(h(t),t=t||p,f)){if(11!==C&&(u=Q.exec(e)))if(r=u[1]){if(9===C){if(!(c=t.getElementById(r)))return n;if(c.id===r)return n.push(c),n}else if(b&&(c=b.getElementById(r))&&y(t,c)&&c.id===r)return n.push(c),n}else{if(u[2])return I.apply(n,t.getElementsByTagName(e)),n;if((r=u[3])&&i.getElementsByClassName&&t.getElementsByClassName)return I.apply(n,t.getElementsByClassName(r)),n}if(i.qsa&&!T[e+" "]&&(!m||!m.test(e))&&(1!==C||"object"!==t.nodeName.toLowerCase())){if(v=e,b=t,1===C&&(j.test(e)||V.test(e))){for((b=ee.test(e)&&ve(t.parentNode)||t)===t&&i.scope||((d=t.getAttribute("id"))?d=d.replace(ne,oe):t.setAttribute("id",d=w)),a=(g=s(e)).length;a--;)g[a]=(d?"#"+d:":scope")+" "+ye(g[a]);v=g.join(",")}try{return I.apply(n,b.querySelectorAll(v)),n}catch(t){T(e,!0)}finally{d===w&&t.removeAttribute("id")}}}return l(e.replace(z,"$1"),t,n,o)}function le(){var e=[];return function t(i,o){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=o}}function ce(e){return e[w]=!0,e}function de(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var i=e.split("|"),o=i.length;o--;)n.attrHandle[i[o]]=t}function he(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ge(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function fe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&se(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return ce(function(t){return t=+t,ce(function(i,n){for(var o,r=e([],i.length,t),s=r.length;s--;)i[o=r[s]]&&(i[o]=!(n[o]=i[o]))})})}function ve(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in i=ae.support={},r=ae.isXML=function(e){var t=e.namespaceURI,i=(e.ownerDocument||e).documentElement;return!K.test(t||i&&i.nodeName||"HTML")},h=ae.setDocument=function(e){var t,o,s=e?e.ownerDocument||e:C;return s!=p&&9===s.nodeType&&s.documentElement?(g=(p=s).documentElement,f=!r(p),C!=p&&(o=p.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",re,!1):o.attachEvent&&o.attachEvent("onunload",re)),i.scope=de(function(e){return g.appendChild(e).appendChild(p.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),i.attributes=de(function(e){return e.className="i",!e.getAttribute("className")}),i.getElementsByTagName=de(function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length}),i.getElementsByClassName=J.test(p.getElementsByClassName),i.getById=de(function(e){return g.appendChild(e).id=w,!p.getElementsByName||!p.getElementsByName(w).length}),i.getById?(n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&f){var i=t.getElementById(e);return i?[i]:[]}}):(n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&f){var i,n,o,r=t.getElementById(e);if(r){if((i=r.getAttributeNode("id"))&&i.value===e)return[r];for(o=t.getElementsByName(e),n=0;r=o[n++];)if((i=r.getAttributeNode("id"))&&i.value===e)return[r]}return[]}}),n.find.TAG=i.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;i=r[o++];)1===i.nodeType&&n.push(i);return n}return r},n.find.CLASS=i.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&f)return t.getElementsByClassName(e)},v=[],m=[],(i.qsa=J.test(p.querySelectorAll))&&(de(function(e){var t;g.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+F+"*(?:value|"+L+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),(t=p.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\["+F+"*name"+F+"*="+F+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")}),de(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+F+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),g.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(i.matchesSelector=J.test(b=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.oMatchesSelector||g.msMatchesSelector))&&de(function(e){i.disconnectedMatch=b.call(e,"*"),b.call(e,"[s!='']:x"),v.push("!=",B)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=J.test(g.compareDocumentPosition),y=t||J.test(g.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return u=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e==p||e.ownerDocument==C&&y(C,e)?-1:t==p||t.ownerDocument==C&&y(C,t)?1:d?N(d,e)-N(d,t):0:4&n?-1:1)}:function(e,t){if(e===t)return u=!0,0;var i,n=0,o=e.parentNode,r=t.parentNode,s=[e],a=[t];if(!o||!r)return e==p?-1:t==p?1:o?-1:r?1:d?N(d,e)-N(d,t):0;if(o===r)return he(e,t);for(i=e;i=i.parentNode;)s.unshift(i);for(i=t;i=i.parentNode;)a.unshift(i);for(;s[n]===a[n];)n++;return n?he(s[n],a[n]):s[n]==C?-1:a[n]==C?1:0},p):p},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if(h(e),i.matchesSelector&&f&&!T[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var n=b.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){T(t,!0)}return ae(t,p,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!=p&&h(e),y(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!=p&&h(e);var o=n.attrHandle[t.toLowerCase()],r=o&&D.call(n.attrHandle,t.toLowerCase())?o(e,t,!f):void 0;return void 0!==r?r:i.attributes||!f?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},ae.escape=function(e){return(e+"").replace(ne,oe)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],o=0,r=0;if(u=!i.detectDuplicates,d=!i.sortStable&&e.slice(0),e.sort(k),u){for(;t=e[r++];)t===e[r]&&(o=n.push(r));for(;o--;)e.splice(n[o],1)}return d=null,e},o=ae.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=o(t);return i},n=ae.selectors={cacheLength:50,createPseudo:ce,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&U.test(i)&&(t=s(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&x(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(n){var o=ae.attr(n,e);return null==o?"!="===t:!t||(o+="","="===t?o===i:"!="===t?o!==i:"^="===t?i&&0===o.indexOf(i):"*="===t?i&&o.indexOf(i)>-1:"$="===t?i&&o.slice(-i.length)===i:"~="===t?(" "+o.replace(H," ")+" ").indexOf(i)>-1:"|="===t&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,o){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,i,l){var c,d,u,h,p,g,f=r!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),b=!l&&!a,y=!1;if(m){if(r){for(;f;){for(h=t;h=h[f];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;g=f="only"===e&&!g&&"nextSibling"}return!0}if(g=[s?m.firstChild:m.lastChild],s&&b){for(y=(p=(c=(d=(u=(h=m)[w]||(h[w]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]||[])[0]===_&&c[1])&&c[2],h=p&&m.childNodes[p];h=++p&&h&&h[f]||(y=p=0)||g.pop();)if(1===h.nodeType&&++y&&h===t){d[e]=[_,p,y];break}}else if(b&&(y=p=(c=(d=(u=(h=t)[w]||(h[w]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]||[])[0]===_&&c[1]),!1===y)for(;(h=++p&&h&&h[f]||(y=p=0)||g.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++y||(b&&((d=(u=h[w]||(h[w]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]=[_,y]),h!==t)););return(y-=o)===n||y%n===0&&y/n>=0}}},PSEUDO:function(e,t){var i,o=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return o[w]?o(t):o.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?ce(function(e,i){for(var n,r=o(e,t),s=r.length;s--;)e[n=N(e,r[s])]=!(i[n]=r[s])}):function(e){return o(e,0,i)}):o}},pseudos:{not:ce(function(e){var t=[],i=[],n=a(e.replace(z,"$1"));return n[w]?ce(function(e,t,i,o){for(var r,s=n(e,null,o,[]),a=e.length;a--;)(r=s[a])&&(e[a]=!(t[a]=r))}):function(e,o,r){return t[0]=e,n(t,null,r,i),t[0]=null,!i.pop()}}),has:ce(function(e){return function(t){return ae(e,t).length>0}}),contains:ce(function(e){return e=e.replace(te,ie),function(t){return(t.textContent||o(t)).indexOf(e)>-1}}),lang:ce(function(e){return Y.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,ie).toLowerCase(),function(t){var i;do{if(i=f?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===g},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:fe(!1),disabled:fe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me(function(){return[0]}),last:me(function(e,t){return[t-1]}),eq:me(function(e,t,i){return[i<0?i+t:i]}),even:me(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:me(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:me(function(e,t,i){for(var n=i<0?i+t:i>t?t:i;--n>=0;)e.push(n);return e}),gt:me(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}},n.pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=ge(t);function be(){}function ye(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function we(e,t,i){var n=t.dir,o=t.next,r=o||n,s=i&&"parentNode"===r,a=S++;return t.first?function(t,i,o){for(;t=t[n];)if(1===t.nodeType||s)return e(t,i,o);return!1}:function(t,i,l){var c,d,u,h=[_,a];if(l){for(;t=t[n];)if((1===t.nodeType||s)&&e(t,i,l))return!0}else for(;t=t[n];)if(1===t.nodeType||s)if(d=(u=t[w]||(t[w]={}))[t.uniqueID]||(u[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[n]||t;else{if((c=d[r])&&c[0]===_&&c[1]===a)return h[2]=c[2];if(d[r]=h,h[2]=e(t,i,l))return!0}return!1}}function Ce(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function _e(e,t,i,n,o){for(var r,s=[],a=0,l=e.length,c=null!=t;a<l;a++)(r=e[a])&&(i&&!i(r,n,o)||(s.push(r),c&&t.push(a)));return s}function Se(e,t,i,n,o,r){return n&&!n[w]&&(n=Se(n)),o&&!o[w]&&(o=Se(o,r)),ce(function(r,s,a,l){var c,d,u,h=[],p=[],g=s.length,f=r||function(e,t,i){for(var n=0,o=t.length;n<o;n++)ae(e,t[n],i);return i}(t||"*",a.nodeType?[a]:a,[]),m=!e||!r&&t?f:_e(f,h,e,a,l),v=i?o||(r?e:g||n)?[]:s:m;if(i&&i(m,v,a,l),n)for(c=_e(v,p),n(c,[],a,l),d=c.length;d--;)(u=c[d])&&(v[p[d]]=!(m[p[d]]=u));if(r){if(o||e){if(o){for(c=[],d=v.length;d--;)(u=v[d])&&c.push(m[d]=u);o(null,v=[],c,l)}for(d=v.length;d--;)(u=v[d])&&(c=o?N(r,u):h[d])>-1&&(r[c]=!(s[c]=u))}}else v=_e(v===s?v.splice(g,v.length):v),o?o(null,s,v,l):I.apply(s,v)})}function xe(e){for(var t,i,o,r=e.length,s=n.relative[e[0].type],a=s||n.relative[" "],l=s?1:0,d=we(function(e){return e===t},a,!0),u=we(function(e){return N(t,e)>-1},a,!0),h=[function(e,i,n){var o=!s&&(n||i!==c)||((t=i).nodeType?d(e,i,n):u(e,i,n));return t=null,o}];l<r;l++)if(i=n.relative[e[l].type])h=[we(Ce(h),i)];else{if((i=n.filter[e[l].type].apply(null,e[l].matches))[w]){for(o=++l;o<r&&!n.relative[e[o].type];o++);return Se(l>1&&Ce(h),l>1&&ye(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),i,l<o&&xe(e.slice(l,o)),o<r&&xe(e=e.slice(o)),o<r&&ye(e))}h.push(i)}return Ce(h)}return be.prototype=n.filters=n.pseudos,n.setFilters=new be,s=ae.tokenize=function(e,t){var i,o,r,s,a,l,c,d=A[e+" "];if(d)return t?0:d.slice(0);for(a=e,l=[],c=n.preFilter;a;){for(s in i&&!(o=W.exec(a))||(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),i=!1,(o=V.exec(a))&&(i=o.shift(),r.push({value:i,type:o[0].replace(z," ")}),a=a.slice(i.length)),n.filter)!(o=q[s].exec(a))||c[s]&&!(o=c[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),a=a.slice(i.length));if(!i)break}return t?a.length:a?ae.error(e):A(e,l).slice(0)},a=ae.compile=function(e,t){var i,o=[],r=[],a=E[e+" "];if(!a){for(t||(t=s(e)),i=t.length;i--;)(a=xe(t[i]))[w]?o.push(a):r.push(a);a=E(e,function(e,t){var i=t.length>0,o=e.length>0,r=function(r,s,a,l,d){var u,g,m,v=0,b="0",y=r&&[],w=[],C=c,S=r||o&&n.find.TAG("*",d),x=_+=null==C?1:Math.random()||.1,A=S.length;for(d&&(c=s==p||s||d);b!==A&&null!=(u=S[b]);b++){if(o&&u){for(g=0,s||u.ownerDocument==p||(h(u),a=!f);m=e[g++];)if(m(u,s||p,a)){l.push(u);break}d&&(_=x)}i&&((u=!m&&u)&&v--,r&&y.push(u))}if(v+=b,i&&b!==v){for(g=0;m=t[g++];)m(y,w,s,a);if(r){if(v>0)for(;b--;)y[b]||w[b]||(w[b]=P.call(l));w=_e(w)}I.apply(l,w),d&&!r&&w.length>0&&v+t.length>1&&ae.uniqueSort(l)}return d&&(_=x,c=C),y};return i?ce(r):r}(r,o)),a.selector=e}return a},l=ae.select=function(e,t,i,o){var r,l,c,d,u,h="function"==typeof e&&e,p=!o&&s(e=h.selector||e);if(i=i||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&f&&n.relative[l[1].type]){if(!(t=(n.find.ID(c.matches[0].replace(te,ie),t)||[])[0]))return i;h&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(r=q.needsContext.test(e)?0:l.length;r--&&(c=l[r],!n.relative[d=c.type]);)if((u=n.find[d])&&(o=u(c.matches[0].replace(te,ie),ee.test(l[0].type)&&ve(t.parentNode)||t))){if(l.splice(r,1),!(e=o.length&&ye(l)))return I.apply(i,o),i;break}}return(h||a(e,p))(o,t,!f,i,!t||ee.test(e)&&ve(t.parentNode)||t),i},i.sortStable=w.split("").sort(k).join("")===w,i.detectDuplicates=!!u,h(),i.sortDetached=de(function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))}),de(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ue("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),i.attributes&&de(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ue("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),de(function(e){return null==e.getAttribute("disabled")})||ue(L,function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),ae}(e);C.find=S,C.expr=S.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=S.uniqueSort,C.text=S.getText,C.isXMLDoc=S.isXML,C.contains=S.contains,C.escapeSelector=S.escape;var x=function(e,t,i){for(var n=[],o=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&C(e).is(i))break;n.push(e)}return n},A=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},E=C.expr.match.needsContext;function T(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var k=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,t,i){return g(t)?C.grep(e,function(e,n){return!!t.call(e,n,e)!==i}):t.nodeType?C.grep(e,function(e){return e===t!==i}):"string"!=typeof t?C.grep(e,function(e){return a.call(t,e)>-1!==i}):C.filter(t,e,i)}C.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?C.find.matchesSelector(n,e)?[n]:[]:C.find.matches(e,C.grep(t,function(e){return 1===e.nodeType}))},C.fn.extend({find:function(e){var t,i,n=this.length,o=this;if("string"!=typeof e)return this.pushStack(C(e).filter(function(){for(t=0;t<n;t++)if(C.contains(o[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)C.find(e,o[t],i);return n>1?C.uniqueSort(i):i},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&E.test(e)?C(e):e||[],!1).length}});var M,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(e,t,i){var n,o;if(!e)return this;if(i=i||M,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:P.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof C?t[0]:t,C.merge(this,C.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:m,!0)),k.test(n[1])&&C.isPlainObject(t))for(n in t)g(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(o=m.getElementById(n[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==i.ready?i.ready(e):e(C):C.makeArray(e,this)}).prototype=C.fn,M=C(m);var R=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}C.fn.extend({has:function(e){var t=C(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(C.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,o=this.length,r=[],s="string"!=typeof e&&C(e);if(!E.test(e))for(;n<o;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&C.find.matchesSelector(i,e))){r.push(i);break}return this.pushStack(r.length>1?C.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?a.call(C(e),this[0]):a.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),C.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x(e,"parentNode")},parentsUntil:function(e,t,i){return x(e,"parentNode",i)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return x(e,"nextSibling")},prevAll:function(e){return x(e,"previousSibling")},nextUntil:function(e,t,i){return x(e,"nextSibling",i)},prevUntil:function(e,t,i){return x(e,"previousSibling",i)},siblings:function(e){return A((e.parentNode||{}).firstChild,e)},children:function(e){return A(e.firstChild)},contents:function(e){return null!=e.contentDocument&&n(e.contentDocument)?e.contentDocument:(T(e,"template")&&(e=e.content||e),C.merge([],e.childNodes))}},function(e,t){C.fn[e]=function(i,n){var o=C.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=C.filter(n,o)),this.length>1&&(I[e]||C.uniqueSort(o),R.test(e)&&o.reverse()),this.pushStack(o)}});var N=/[^\x20\t\r\n\f]+/g;function L(e){return e}function F(e){throw e}function $(e,t,i,n){var o;try{e&&g(o=e.promise)?o.call(e).done(t).fail(i):e&&g(o=e.then)?o.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}C.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return C.each(e.match(N)||[],function(e,i){t[i]=!0}),t}(e):C.extend({},e);var t,i,n,o,r=[],s=[],a=-1,l=function(){for(o=o||e.once,n=t=!0;s.length;a=-1)for(i=s.shift();++a<r.length;)!1===r[a].apply(i[0],i[1])&&e.stopOnFalse&&(a=r.length,i=!1);e.memory||(i=!1),t=!1,o&&(r=i?[]:"")},c={add:function(){return r&&(i&&!t&&(a=r.length-1,s.push(i)),function t(i){C.each(i,function(i,n){g(n)?e.unique&&c.has(n)||r.push(n):n&&n.length&&"string"!==y(n)&&t(n)})}(arguments),i&&!t&&l()),this},remove:function(){return C.each(arguments,function(e,t){for(var i;(i=C.inArray(t,r,i))>-1;)r.splice(i,1),i<=a&&a--}),this},has:function(e){return e?C.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=s=[],r=i="",this},disabled:function(){return!r},lock:function(){return o=s=[],i||t||(r=i=""),this},locked:function(){return!!o},fireWith:function(e,i){return o||(i=[e,(i=i||[]).slice?i.slice():i],s.push(i),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},C.extend({Deferred:function(t){var i=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return C.Deferred(function(t){C.each(i,function(i,n){var o=g(e[n[4]])&&e[n[4]];r[n[1]](function(){var e=o&&o.apply(this,arguments);e&&g(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[n[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(t,n,o){var r=0;function s(t,i,n,o){return function(){var a=this,l=arguments,c=function(){var e,c;if(!(t<r)){if((e=n.apply(a,l))===i.promise())throw new TypeError("Thenable self-resolution");c=e&&("object"==typeof e||"function"==typeof e)&&e.then,g(c)?o?c.call(e,s(r,i,L,o),s(r,i,F,o)):(r++,c.call(e,s(r,i,L,o),s(r,i,F,o),s(r,i,L,i.notifyWith))):(n!==L&&(a=void 0,l=[e]),(o||i.resolveWith)(a,l))}},d=o?c:function(){try{c()}catch(e){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(e,d.stackTrace),t+1>=r&&(n!==F&&(a=void 0,l=[e]),i.rejectWith(a,l))}};t?d():(C.Deferred.getStackHook&&(d.stackTrace=C.Deferred.getStackHook()),e.setTimeout(d))}}return C.Deferred(function(e){i[0][3].add(s(0,e,g(o)?o:L,e.notifyWith)),i[1][3].add(s(0,e,g(t)?t:L)),i[2][3].add(s(0,e,g(n)?n:F))}).promise()},promise:function(e){return null!=e?C.extend(e,o):o}},r={};return C.each(i,function(e,t){var s=t[2],a=t[5];o[t[1]]=s.add,a&&s.add(function(){n=a},i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock),s.add(t[3].fire),r[t[0]]=function(){return r[t[0]+"With"](this===r?void 0:this,arguments),this},r[t[0]+"With"]=s.fireWith}),o.promise(r),t&&t.call(r,r),r},when:function(e){var t=arguments.length,i=t,n=Array(i),r=o.call(arguments),s=C.Deferred(),a=function(e){return function(i){n[e]=this,r[e]=arguments.length>1?o.call(arguments):i,--t||s.resolveWith(n,r)}};if(t<=1&&($(e,s.done(a(i)).resolve,s.reject,!t),"pending"===s.state()||g(r[i]&&r[i].then)))return s.then();for(;i--;)$(r[i],a(i),s.reject);return s.promise()}});var G=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&G.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},C.readyException=function(t){e.setTimeout(function(){throw t})};var B=C.Deferred();function H(){m.removeEventListener("DOMContentLoaded",H),e.removeEventListener("load",H),C.ready()}C.fn.ready=function(e){return B.then(e).catch(function(e){C.readyException(e)}),this},C.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--C.readyWait:C.isReady)||(C.isReady=!0,!0!==e&&--C.readyWait>0||B.resolveWith(m,[C]))}}),C.ready.then=B.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?e.setTimeout(C.ready):(m.addEventListener("DOMContentLoaded",H),e.addEventListener("load",H));var z=function(e,t,i,n,o,r,s){var a=0,l=e.length,c=null==i;if("object"===y(i))for(a in o=!0,i)z(e,t,a,i[a],!0,r,s);else if(void 0!==n&&(o=!0,g(n)||(s=!0),c&&(s?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(C(e),i)})),t))for(;a<l;a++)t(e[a],i,s?n:n.call(e[a],a,t(e[a],i)));return o?e:c?t.call(e):l?t(e[0],i):r},W=/^-ms-/,V=/-([a-z])/g;function j(e,t){return t.toUpperCase()}function U(e){return e.replace(W,"ms-").replace(V,j)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function q(){this.expando=C.expando+q.uid++}q.uid=1,q.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,o=this.cache(e);if("string"==typeof t)o[U(t)]=i;else for(n in t)o[U(n)]=t[n];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][U(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(U):(t=U(t))in n?[t]:t.match(N)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||C.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!C.isEmptyObject(t)}};var K=new q,X=new q,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function Q(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Z.test(e)?JSON.parse(e):e)}(i)}catch(e){}X.set(e,t,i)}else i=void 0;return i}C.extend({hasData:function(e){return X.hasData(e)||K.hasData(e)},data:function(e,t,i){return X.access(e,t,i)},removeData:function(e,t){X.remove(e,t)},_data:function(e,t,i){return K.access(e,t,i)},_removeData:function(e,t){K.remove(e,t)}}),C.fn.extend({data:function(e,t){var i,n,o,r=this[0],s=r&&r.attributes;if(void 0===e){if(this.length&&(o=X.get(r),1===r.nodeType&&!K.get(r,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&0===(n=s[i].name).indexOf("data-")&&(n=U(n.slice(5)),Q(r,n,o[n]));K.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){X.set(this,e)}):z(this,function(t){var i;if(r&&void 0===t)return void 0!==(i=X.get(r,e))||void 0!==(i=Q(r,e))?i:void 0;this.each(function(){X.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){X.remove(this,e)})}}),C.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=K.get(e,t),i&&(!n||Array.isArray(i)?n=K.access(e,t,C.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=C.queue(e,t),n=i.length,o=i.shift(),r=C._queueHooks(e,t);"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete r.stop,o.call(e,function(){C.dequeue(e,t)},r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return K.get(e,i)||K.access(e,i,{empty:C.Callbacks("once memory").add(function(){K.remove(e,[t+"queue",i])})})}}),C.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?C.queue(this[0],e):void 0===t?this:this.each(function(){var i=C.queue(this,e,t);C._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&C.dequeue(this,e)})},dequeue:function(e){return this.each(function(){C.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,o=C.Deferred(),r=this,s=this.length,a=function(){--n||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(i=K.get(r[s],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),o.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],ne=m.documentElement,oe=function(e){return C.contains(e.ownerDocument,e)},re={composed:!0};ne.getRootNode&&(oe=function(e){return C.contains(e.ownerDocument,e)||e.getRootNode(re)===e.ownerDocument});var se=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===C.css(e,"display")};function ae(e,t,i,n){var o,r,s=20,a=n?function(){return n.cur()}:function(){return C.css(e,t,"")},l=a(),c=i&&i[3]||(C.cssNumber[t]?"":"px"),d=e.nodeType&&(C.cssNumber[t]||"px"!==c&&+l)&&te.exec(C.css(e,t));if(d&&d[3]!==c){for(l/=2,c=c||d[3],d=+l||1;s--;)C.style(e,t,d+c),(1-r)*(1-(r=a()/l||.5))<=0&&(s=0),d/=r;d*=2,C.style(e,t,d+c),i=i||[]}return i&&(d=+d||+l||0,o=i[1]?d+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=d,n.end=o)),o}var le={};function ce(e){var t,i=e.ownerDocument,n=e.nodeName,o=le[n];return o||(t=i.body.appendChild(i.createElement(n)),o=C.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),le[n]=o,o)}function de(e,t){for(var i,n,o=[],r=0,s=e.length;r<s;r++)(n=e[r]).style&&(i=n.style.display,t?("none"===i&&(o[r]=K.get(n,"display")||null,o[r]||(n.style.display="")),""===n.style.display&&se(n)&&(o[r]=ce(n))):"none"!==i&&(o[r]="none",K.set(n,"display",i)));for(r=0;r<s;r++)null!=o[r]&&(e[r].style.display=o[r]);return e}C.fn.extend({show:function(){return de(this,!0)},hide:function(){return de(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){se(this)?C(this).show():C(this).hide()})}});var ue,he,pe=/^(?:checkbox|radio)$/i,ge=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,fe=/^$|^module$|\/(?:java|ecma)script/i;ue=m.createDocumentFragment().appendChild(m.createElement("div")),(he=m.createElement("input")).setAttribute("type","radio"),he.setAttribute("checked","checked"),he.setAttribute("name","t"),ue.appendChild(he),p.checkClone=ue.cloneNode(!0).cloneNode(!0).lastChild.checked,ue.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!ue.cloneNode(!0).lastChild.defaultValue,ue.innerHTML="<option></option>",p.option=!!ue.lastChild;var me={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&T(e,t)?C.merge([e],i):i}function be(e,t){for(var i=0,n=e.length;i<n;i++)K.set(e[i],"globalEval",!t||K.get(t[i],"globalEval"))}me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td,p.option||(me.optgroup=me.option=[1,"<select multiple='multiple'>","</select>"]);var ye=/<|&#?\w+;/;function we(e,t,i,n,o){for(var r,s,a,l,c,d,u=t.createDocumentFragment(),h=[],p=0,g=e.length;p<g;p++)if((r=e[p])||0===r)if("object"===y(r))C.merge(h,r.nodeType?[r]:r);else if(ye.test(r)){for(s=s||u.appendChild(t.createElement("div")),a=(ge.exec(r)||["",""])[1].toLowerCase(),l=me[a]||me._default,s.innerHTML=l[1]+C.htmlPrefilter(r)+l[2],d=l[0];d--;)s=s.lastChild;C.merge(h,s.childNodes),(s=u.firstChild).textContent=""}else h.push(t.createTextNode(r));for(u.textContent="",p=0;r=h[p++];)if(n&&C.inArray(r,n)>-1)o&&o.push(r);else if(c=oe(r),s=ve(u.appendChild(r),"script"),c&&be(s),i)for(d=0;r=s[d++];)fe.test(r.type||"")&&i.push(r);return u}var Ce=/^key/,_e=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Se=/^([^.]*)(?:\.(.+)|)/;function xe(){return!0}function Ae(){return!1}function Ee(e,t){return e===function(){try{return m.activeElement}catch(e){}}()==("focus"===t)}function Te(e,t,i,n,o,r){var s,a;if("object"==typeof t){for(a in"string"!=typeof i&&(n=n||i,i=void 0),t)Te(e,a,i,n,t[a],r);return e}if(null==n&&null==o?(o=i,n=i=void 0):null==o&&("string"==typeof i?(o=n,n=void 0):(o=n,n=i,i=void 0)),!1===o)o=Ae;else if(!o)return e;return 1===r&&(s=o,o=function(e){return C().off(e),s.apply(this,arguments)},o.guid=s.guid||(s.guid=C.guid++)),e.each(function(){C.event.add(this,t,o,n,i)})}function ke(e,t,i){i?(K.set(e,t,!1),C.event.add(e,t,{namespace:!1,handler:function(e){var n,r,s=K.get(this,t);if(1&e.isTrigger&&this[t]){if(s.length)(C.event.special[t]||{}).delegateType&&e.stopPropagation();else if(s=o.call(arguments),K.set(this,t,s),n=i(this,t),this[t](),s!==(r=K.get(this,t))||n?K.set(this,t,!1):r={},s!==r)return e.stopImmediatePropagation(),e.preventDefault(),r.value}else s.length&&(K.set(this,t,{value:C.event.trigger(C.extend(s[0],C.Event.prototype),s.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===K.get(e,t)&&C.event.add(e,t,xe)}C.event={global:{},add:function(e,t,i,n,o){var r,s,a,l,c,d,u,h,p,g,f,m=K.get(e);if(Y(e))for(i.handler&&(i=(r=i).handler,o=r.selector),o&&C.find.matchesSelector(ne,o),i.guid||(i.guid=C.guid++),(l=m.events)||(l=m.events=Object.create(null)),(s=m.handle)||(s=m.handle=function(t){return void 0!==C&&C.event.triggered!==t.type?C.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(N)||[""]).length;c--;)p=f=(a=Se.exec(t[c])||[])[1],g=(a[2]||"").split(".").sort(),p&&(u=C.event.special[p]||{},p=(o?u.delegateType:u.bindType)||p,u=C.event.special[p]||{},d=C.extend({type:p,origType:f,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&C.expr.match.needsContext.test(o),namespace:g.join(".")},r),(h=l[p])||((h=l[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,n,g,s)||e.addEventListener&&e.addEventListener(p,s)),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),o?h.splice(h.delegateCount++,0,d):h.push(d),C.event.global[p]=!0)},remove:function(e,t,i,n,o){var r,s,a,l,c,d,u,h,p,g,f,m=K.hasData(e)&&K.get(e);if(m&&(l=m.events)){for(c=(t=(t||"").match(N)||[""]).length;c--;)if(p=f=(a=Se.exec(t[c])||[])[1],g=(a[2]||"").split(".").sort(),p){for(u=C.event.special[p]||{},h=l[p=(n?u.delegateType:u.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=h.length;r--;)d=h[r],!o&&f!==d.origType||i&&i.guid!==d.guid||a&&!a.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(h.splice(r,1),d.selector&&h.delegateCount--,u.remove&&u.remove.call(e,d));s&&!h.length&&(u.teardown&&!1!==u.teardown.call(e,g,m.handle)||C.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)C.event.remove(e,p+t[c],i,n,!0);C.isEmptyObject(l)&&K.remove(e,"handle events")}},dispatch:function(e){var t,i,n,o,r,s,a=new Array(arguments.length),l=C.event.fix(e),c=(K.get(this,"events")||Object.create(null))[l.type]||[],d=C.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,l)){for(s=C.event.handlers.call(this,l,c),t=0;(o=s[t++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,i=0;(r=o.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==r.namespace&&!l.rnamespace.test(r.namespace)||(l.handleObj=r,l.data=r.data,void 0!==(n=((C.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,a))&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,l),l.result}},handlers:function(e,t){var i,n,o,r,s,a=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(r=[],s={},i=0;i<l;i++)void 0===s[o=(n=t[i]).selector+" "]&&(s[o]=n.needsContext?C(o,this).index(c)>-1:C.find(o,this,null,[c]).length),s[o]&&r.push(n);r.length&&a.push({elem:c,handlers:r})}return c=this,l<t.length&&a.push({elem:c,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(C.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[C.expando]?e:new C.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&T(t,"input")&&ke(t,"click",xe),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&T(t,"input")&&ke(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&T(t,"input")&&K.get(t,"click")||T(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},C.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},C.Event=function(e,t){if(!(this instanceof C.Event))return new C.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?xe:Ae,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:Ae,isPropagationStopped:Ae,isImmediatePropagationStopped:Ae,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ce.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&_e.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},function(e,t){C.event.special[e]={setup:function(){return ke(this,e,Ee),!1},trigger:function(){return ke(this,e),!0},delegateType:t}}),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){C.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=e.relatedTarget,o=e.handleObj;return n&&(n===this||C.contains(this,n))||(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),C.fn.extend({on:function(e,t,i,n){return Te(this,e,t,i,n)},one:function(e,t,i,n){return Te(this,e,t,i,n,1)},off:function(e,t,i){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,C(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=Ae),this.each(function(){C.event.remove(this,e,i,t)})}});var De=/<script|<style|<link/i,Me=/checked\s*(?:[^=]|=\s*.checked.)/i,Pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Re(e,t){return T(e,"table")&&T(11!==t.nodeType?t:t.firstChild,"tr")&&C(e).children("tbody")[0]||e}function Ie(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Oe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ne(e,t){var i,n,o,r,s,a;if(1===t.nodeType){if(K.hasData(e)&&(a=K.get(e).events))for(o in K.remove(t,"handle events"),a)for(i=0,n=a[o].length;i<n;i++)C.event.add(t,o,a[o][i]);X.hasData(e)&&(r=X.access(e),s=C.extend({},r),X.set(t,s))}}function Le(e,t){var i=t.nodeName.toLowerCase();"input"===i&&pe.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function Fe(e,t,i,n){t=r(t);var o,s,a,l,c,d,u=0,h=e.length,f=h-1,m=t[0],v=g(m);if(v||h>1&&"string"==typeof m&&!p.checkClone&&Me.test(m))return e.each(function(o){var r=e.eq(o);v&&(t[0]=m.call(this,o,r.html())),Fe(r,t,i,n)});if(h&&(s=(o=we(t,e[0].ownerDocument,!1,e,n)).firstChild,1===o.childNodes.length&&(o=s),s||n)){for(l=(a=C.map(ve(o,"script"),Ie)).length;u<h;u++)c=o,u!==f&&(c=C.clone(c,!0,!0),l&&C.merge(a,ve(c,"script"))),i.call(e[u],c,u);if(l)for(d=a[a.length-1].ownerDocument,C.map(a,Oe),u=0;u<l;u++)c=a[u],fe.test(c.type||"")&&!K.access(c,"globalEval")&&C.contains(d,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?C._evalUrl&&!c.noModule&&C._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},d):b(c.textContent.replace(Pe,""),c,d))}return e}function $e(e,t,i){for(var n,o=t?C.filter(t,e):e,r=0;null!=(n=o[r]);r++)i||1!==n.nodeType||C.cleanData(ve(n)),n.parentNode&&(i&&oe(n)&&be(ve(n,"script")),n.parentNode.removeChild(n));return e}C.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var n,o,r,s,a=e.cloneNode(!0),l=oe(e);if(!(p.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||C.isXMLDoc(e)))for(s=ve(a),n=0,o=(r=ve(e)).length;n<o;n++)Le(r[n],s[n]);if(t)if(i)for(r=r||ve(e),s=s||ve(a),n=0,o=r.length;n<o;n++)Ne(r[n],s[n]);else Ne(e,a);return(s=ve(a,"script")).length>0&&be(s,!l&&ve(e,"script")),a},cleanData:function(e){for(var t,i,n,o=C.event.special,r=0;void 0!==(i=e[r]);r++)if(Y(i)){if(t=i[K.expando]){if(t.events)for(n in t.events)o[n]?C.event.remove(i,n):C.removeEvent(i,n,t.handle);i[K.expando]=void 0}i[X.expando]&&(i[X.expando]=void 0)}}}),C.fn.extend({detach:function(e){return $e(this,e,!0)},remove:function(e){return $e(this,e)},text:function(e){return z(this,function(e){return void 0===e?C.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Fe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Re(this,e).appendChild(e)})},prepend:function(){return Fe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Re(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Fe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Fe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(C.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return C.clone(this,e,t)})},html:function(e){return z(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!De.test(e)&&!me[(ge.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(C.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Fe(this,arguments,function(t){var i=this.parentNode;C.inArray(this,e)<0&&(C.cleanData(ve(this)),i&&i.replaceChild(t,this))},e)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){C.fn[e]=function(e){for(var i,n=[],o=C(e),r=o.length-1,a=0;a<=r;a++)i=a===r?this:this.clone(!0),C(o[a])[t](i),s.apply(n,i.get());return this.pushStack(n)}});var Ge=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Be=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},He=function(e,t,i){var n,o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];for(o in n=i.call(e),t)e.style[o]=r[o];return n},ze=new RegExp(ie.join("|"),"i");function We(e,t,i){var n,o,r,s,a=e.style;return(i=i||Be(e))&&(""!==(s=i.getPropertyValue(t)||i[t])||oe(e)||(s=C.style(e,t)),!p.pixelBoxStyles()&&Ge.test(s)&&ze.test(t)&&(n=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=o,a.maxWidth=r)),void 0!==s?s+"":s}function Ve(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(d){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ne.appendChild(c).appendChild(d);var t=e.getComputedStyle(d);n="1%"!==t.top,l=12===i(t.marginLeft),d.style.right="60%",s=36===i(t.right),o=36===i(t.width),d.style.position="absolute",r=12===i(d.offsetWidth/3),ne.removeChild(c),d=null}}function i(e){return Math.round(parseFloat(e))}var n,o,r,s,a,l,c=m.createElement("div"),d=m.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===d.style.backgroundClip,C.extend(p,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),r},reliableTrDimensions:function(){var t,i,n,o;return null==a&&(t=m.createElement("table"),i=m.createElement("tr"),n=m.createElement("div"),t.style.cssText="position:absolute;left:-11111px",i.style.height="1px",n.style.height="9px",ne.appendChild(t).appendChild(i).appendChild(n),o=e.getComputedStyle(i),a=parseInt(o.height)>3,ne.removeChild(t)),a}}))}();var je=["Webkit","Moz","ms"],Ue=m.createElement("div").style,Ye={};function qe(e){var t=C.cssProps[e]||Ye[e];return t||(e in Ue?e:Ye[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=je.length;i--;)if((e=je[i]+t)in Ue)return e}(e)||e)}var Ke=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ze={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"};function Qe(e,t,i){var n=te.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function et(e,t,i,n,o,r){var s="width"===t?1:0,a=0,l=0;if(i===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(l+=C.css(e,i+ie[s],!0,o)),n?("content"===i&&(l-=C.css(e,"padding"+ie[s],!0,o)),"margin"!==i&&(l-=C.css(e,"border"+ie[s]+"Width",!0,o))):(l+=C.css(e,"padding"+ie[s],!0,o),"padding"!==i?l+=C.css(e,"border"+ie[s]+"Width",!0,o):a+=C.css(e,"border"+ie[s]+"Width",!0,o));return!n&&r>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-r-l-a-.5))||0),l}function tt(e,t,i){var n=Be(e),o=(!p.boxSizingReliable()||i)&&"border-box"===C.css(e,"boxSizing",!1,n),r=o,s=We(e,t,n),a="offset"+t[0].toUpperCase()+t.slice(1);if(Ge.test(s)){if(!i)return s;s="auto"}return(!p.boxSizingReliable()&&o||!p.reliableTrDimensions()&&T(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===C.css(e,"display",!1,n))&&e.getClientRects().length&&(o="border-box"===C.css(e,"boxSizing",!1,n),(r=a in e)&&(s=e[a])),(s=parseFloat(s)||0)+et(e,t,i||(o?"border":"content"),r,n,s)+"px"}function it(e,t,i,n,o){return new it.prototype.init(e,t,i,n,o)}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=We(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,s,a=U(t),l=Xe.test(t),c=e.style;if(l||(t=qe(a)),s=C.cssHooks[t]||C.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(o=s.get(e,!1,n))?o:c[t];"string"===(r=typeof i)&&(o=te.exec(i))&&o[1]&&(i=ae(e,t,o),r="number"),null!=i&&i==i&&("number"!==r||l||(i+=o&&o[3]||(C.cssNumber[a]?"":"px")),p.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,n))||(l?c.setProperty(t,i):c[t]=i))}},css:function(e,t,i,n){var o,r,s,a=U(t);return Xe.test(t)||(t=qe(a)),(s=C.cssHooks[t]||C.cssHooks[a])&&"get"in s&&(o=s.get(e,!0,i)),void 0===o&&(o=We(e,t,n)),"normal"===o&&t in Je&&(o=Je[t]),""===i||i?(r=parseFloat(o),!0===i||isFinite(r)?r||0:o):o}}),C.each(["height","width"],function(e,t){C.cssHooks[t]={get:function(e,i,n){if(i)return!Ke.test(C.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,t,n):He(e,Ze,function(){return tt(e,t,n)})},set:function(e,i,n){var o,r=Be(e),s=!p.scrollboxSize()&&"absolute"===r.position,a=(s||n)&&"border-box"===C.css(e,"boxSizing",!1,r),l=n?et(e,t,n,a,r):0;return a&&s&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(r[t])-et(e,t,"border",!1,r)-.5)),l&&(o=te.exec(i))&&"px"!==(o[3]||"px")&&(e.style[t]=i,i=C.css(e,t)),Qe(0,i,l)}}}),C.cssHooks.marginLeft=Ve(p.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-He(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),C.each({margin:"",padding:"",border:"Width"},function(e,t){C.cssHooks[e+t]={expand:function(i){for(var n=0,o={},r="string"==typeof i?i.split(" "):[i];n<4;n++)o[e+ie[n]+t]=r[n]||r[n-2]||r[0];return o}},"margin"!==e&&(C.cssHooks[e+t].set=Qe)}),C.fn.extend({css:function(e,t){return z(this,function(e,t,i){var n,o,r={},s=0;if(Array.isArray(t)){for(n=Be(e),o=t.length;s<o;s++)r[t[s]]=C.css(e,t[s],!1,n);return r}return void 0!==i?C.style(e,t,i):C.css(e,t)},e,t,arguments.length>1)}}),C.Tween=it,it.prototype={constructor:it,init:function(e,t,i,n,o,r){this.elem=e,this.prop=i,this.easing=o||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(C.cssNumber[i]?"":"px")},cur:function(){var e=it.propHooks[this.prop];return e&&e.get?e.get(this):it.propHooks._default.get(this)},run:function(e){var t,i=it.propHooks[this.prop];return this.options.duration?this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):it.propHooks._default.set(this),this}},it.prototype.init.prototype=it.prototype,it.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=C.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||!C.cssHooks[e.prop]&&null==e.elem.style[qe(e.prop)]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}},it.propHooks.scrollTop=it.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},C.fx=it.prototype.init,C.fx.step={};var nt,ot,rt=/^(?:toggle|show|hide)$/,st=/queueHooks$/;function at(){ot&&(!1===m.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(at):e.setTimeout(at,C.fx.interval),C.fx.tick())}function lt(){return e.setTimeout(function(){nt=void 0}),nt=Date.now()}function ct(e,t){var i,n=0,o={height:e};for(t=t?1:0;n<4;n+=2-t)o["margin"+(i=ie[n])]=o["padding"+i]=e;return t&&(o.opacity=o.width=e),o}function dt(e,t,i){for(var n,o=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),r=0,s=o.length;r<s;r++)if(n=o[r].call(i,t,e))return n}function ut(e,t,i){var n,o,r=0,s=ut.prefilters.length,a=C.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=nt||lt(),i=Math.max(0,c.startTime+c.duration-t),n=1-(i/c.duration||0),r=0,s=c.tweens.length;r<s;r++)c.tweens[r].run(n);return a.notifyWith(e,[c,n,i]),n<1&&s?i:(s||a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:C.extend({},t),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},i),originalProperties:t,originalOptions:i,startTime:nt||lt(),duration:i.duration,tweens:[],createTween:function(t,i){var n=C.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)c.tweens[i].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),d=c.props;for(!function(e,t){var i,n,o,r,s;for(i in e)if(o=t[n=U(i)],r=e[i],Array.isArray(r)&&(o=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),(s=C.cssHooks[n])&&"expand"in s)for(i in r=s.expand(r),delete e[n],r)i in e||(e[i]=r[i],t[i]=o);else t[n]=o}(d,c.opts.specialEasing);r<s;r++)if(n=ut.prefilters[r].call(c,e,d,c.opts))return g(n.stop)&&(C._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return C.map(d,dt,c),g(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),C.fx.timer(C.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}C.Animation=C.extend(ut,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return ae(i.elem,e,te.exec(t),i),i}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(N);for(var i,n=0,o=e.length;n<o;n++)i=e[n],ut.tweeners[i]=ut.tweeners[i]||[],ut.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,o,r,s,a,l,c,d,u="width"in t||"height"in t,h=this,p={},g=e.style,f=e.nodeType&&se(e),m=K.get(e,"fxshow");for(n in i.queue||(null==(s=C._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,h.always(function(){h.always(function(){s.unqueued--,C.queue(e,"fx").length||s.empty.fire()})})),t)if(o=t[n],rt.test(o)){if(delete t[n],r=r||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!m||void 0===m[n])continue;f=!0}p[n]=m&&m[n]||C.style(e,n)}if((l=!C.isEmptyObject(t))||!C.isEmptyObject(p))for(n in u&&1===e.nodeType&&(i.overflow=[g.overflow,g.overflowX,g.overflowY],null==(c=m&&m.display)&&(c=K.get(e,"display")),"none"===(d=C.css(e,"display"))&&(c?d=c:(de([e],!0),c=e.style.display||c,d=C.css(e,"display"),de([e]))),("inline"===d||"inline-block"===d&&null!=c)&&"none"===C.css(e,"float")&&(l||(h.done(function(){g.display=c}),null==c&&(d=g.display,c="none"===d?"":d)),g.display="inline-block")),i.overflow&&(g.overflow="hidden",h.always(function(){g.overflow=i.overflow[0],g.overflowX=i.overflow[1],g.overflowY=i.overflow[2]})),l=!1,p)l||(m?"hidden"in m&&(f=m.hidden):m=K.access(e,"fxshow",{display:c}),r&&(m.hidden=!f),f&&de([e],!0),h.done(function(){for(n in f||de([e]),K.remove(e,"fxshow"),p)C.style(e,n,p[n])})),l=dt(f?m[n]:0,n,h),n in m||(m[n]=l.start,f&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),C.speed=function(e,t,i){var n=e&&"object"==typeof e?C.extend({},e):{complete:i||!i&&t||g(e)&&e,duration:e,easing:i&&t||t&&!g(t)&&t};return C.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in C.fx.speeds?n.duration=C.fx.speeds[n.duration]:n.duration=C.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){g(n.old)&&n.old.call(this),n.queue&&C.dequeue(this,n.queue)},n},C.fn.extend({fadeTo:function(e,t,i,n){return this.filter(se).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=C.isEmptyObject(e),r=C.speed(t,i,n),s=function(){var t=ut(this,C.extend({},e),r);(o||K.get(this,"finish"))&&t.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",r=C.timers,s=K.get(this);if(o)s[o]&&s[o].stop&&n(s[o]);else for(o in s)s[o]&&s[o].stop&&st.test(o)&&n(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(i),t=!1,r.splice(o,1));!t&&i||C.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=K.get(this),n=i[e+"queue"],o=i[e+"queueHooks"],r=C.timers,s=n?n.length:0;for(i.finish=!0,C.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<s;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),C.each(["toggle","show","hide"],function(e,t){var i=C.fn[t];C.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ct(t,!0),e,n,o)}}),C.each({slideDown:ct("show"),slideUp:ct("hide"),slideToggle:ct("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){C.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),C.timers=[],C.fx.tick=function(){var e,t=0,i=C.timers;for(nt=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||C.fx.stop(),nt=void 0},C.fx.timer=function(e){C.timers.push(e),C.fx.start()},C.fx.interval=13,C.fx.start=function(){ot||(ot=!0,at())},C.fx.stop=function(){ot=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(t,i){return t=C.fx&&C.fx.speeds[t]||t,i=i||"fx",this.queue(i,function(i,n){var o=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(o)}})},function(){var e=m.createElement("input"),t=m.createElement("select").appendChild(m.createElement("option"));e.type="checkbox",p.checkOn=""!==e.value,p.optSelected=t.selected,(e=m.createElement("input")).value="t",e.type="radio",p.radioValue="t"===e.value}();var ht,pt=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return z(this,C.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){C.removeAttr(this,e)})}}),C.extend({attr:function(e,t,i){var n,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?C.prop(e,t,i):(1===r&&C.isXMLDoc(e)||(o=C.attrHooks[t.toLowerCase()]||(C.expr.match.bool.test(t)?ht:void 0)),void 0!==i?null===i?void C.removeAttr(e,t):o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:(e.setAttribute(t,i+""),i):o&&"get"in o&&null!==(n=o.get(e,t))?n:null==(n=C.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&"radio"===t&&T(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,o=t&&t.match(N);if(o&&1===e.nodeType)for(;i=o[n++];)e.removeAttribute(i)}}),ht={set:function(e,t,i){return!1===t?C.removeAttr(e,i):e.setAttribute(i,i),i}},C.each(C.expr.match.bool.source.match(/\w+/g),function(e,t){var i=pt[t]||C.find.attr;pt[t]=function(e,t,n){var o,r,s=t.toLowerCase();return n||(r=pt[s],pt[s]=o,o=null!=i(e,t,n)?s:null,pt[s]=r),o}});var gt=/^(?:input|select|textarea|button)$/i,ft=/^(?:a|area)$/i;function mt(e){return(e.match(N)||[]).join(" ")}function vt(e){return e.getAttribute&&e.getAttribute("class")||""}function bt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(N)||[]}C.fn.extend({prop:function(e,t){return z(this,C.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[C.propFix[e]||e]})}}),C.extend({prop:function(e,t,i){var n,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&C.isXMLDoc(e)||(t=C.propFix[t]||t,o=C.propHooks[t]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:e[t]=i:o&&"get"in o&&null!==(n=o.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");return t?parseInt(t,10):gt.test(e.nodeName)||ft.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(C.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),C.fn.extend({addClass:function(e){var t,i,n,o,r,s,a,l=0;if(g(e))return this.each(function(t){C(this).addClass(e.call(this,t,vt(this)))});if((t=bt(e)).length)for(;i=this[l++];)if(o=vt(i),n=1===i.nodeType&&" "+mt(o)+" "){for(s=0;r=t[s++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");o!==(a=mt(n))&&i.setAttribute("class",a)}return this},removeClass:function(e){var t,i,n,o,r,s,a,l=0;if(g(e))return this.each(function(t){C(this).removeClass(e.call(this,t,vt(this)))});if(!arguments.length)return this.attr("class","");if((t=bt(e)).length)for(;i=this[l++];)if(o=vt(i),n=1===i.nodeType&&" "+mt(o)+" "){for(s=0;r=t[s++];)for(;n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");o!==(a=mt(n))&&i.setAttribute("class",a)}return this},toggleClass:function(e,t){var i=typeof e,n="string"===i||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):g(e)?this.each(function(i){C(this).toggleClass(e.call(this,i,vt(this),t),t)}):this.each(function(){var t,o,r,s;if(n)for(o=0,r=C(this),s=bt(e);t=s[o++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==i||((t=vt(this))&&K.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":K.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+mt(vt(i))+" ").indexOf(t)>-1)return!0;return!1}});var yt=/\r/g;C.fn.extend({val:function(e){var t,i,n,o=this[0];return arguments.length?(n=g(e),this.each(function(i){var o;1===this.nodeType&&(null==(o=n?e.call(this,i,C(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=C.map(o,function(e){return null==e?"":e+""})),(t=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))})):o?(t=C.valHooks[o.type]||C.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(o,"value"))?i:"string"==typeof(i=o.value)?i.replace(yt,""):null==i?"":i:void 0}}),C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return null!=t?t:mt(C.text(e))}},select:{get:function(e){var t,i,n,o=e.options,r=e.selectedIndex,s="select-one"===e.type,a=s?null:[],l=s?r+1:o.length;for(n=r<0?l:s?r:0;n<l;n++)if(((i=o[n]).selected||n===r)&&!i.disabled&&(!i.parentNode.disabled||!T(i.parentNode,"optgroup"))){if(t=C(i).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var i,n,o=e.options,r=C.makeArray(t),s=o.length;s--;)((n=o[s]).selected=C.inArray(C.valHooks.option.get(n),r)>-1)&&(i=!0);return i||(e.selectedIndex=-1),r}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=C.inArray(C(e).val(),t)>-1}},p.checkOn||(C.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),p.focusin="onfocusin"in e;var wt=/^(?:focusinfocus|focusoutblur)$/,Ct=function(e){e.stopPropagation()};C.extend(C.event,{trigger:function(t,i,n,o){var r,s,a,l,c,u,h,p,v=[n||m],b=d.call(t,"type")?t.type:t,y=d.call(t,"namespace")?t.namespace.split("."):[];if(s=p=a=n=n||m,3!==n.nodeType&&8!==n.nodeType&&!wt.test(b+C.event.triggered)&&(b.indexOf(".")>-1&&(y=b.split("."),b=y.shift(),y.sort()),c=b.indexOf(":")<0&&"on"+b,(t=t[C.expando]?t:new C.Event(b,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=y.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:C.makeArray(i,[t]),h=C.event.special[b]||{},o||!h.trigger||!1!==h.trigger.apply(n,i))){if(!o&&!h.noBubble&&!f(n)){for(l=h.delegateType||b,wt.test(l+b)||(s=s.parentNode);s;s=s.parentNode)v.push(s),a=s;a===(n.ownerDocument||m)&&v.push(a.defaultView||a.parentWindow||e)}for(r=0;(s=v[r++])&&!t.isPropagationStopped();)p=s,t.type=r>1?l:h.bindType||b,(u=(K.get(s,"events")||Object.create(null))[t.type]&&K.get(s,"handle"))&&u.apply(s,i),(u=c&&s[c])&&u.apply&&Y(s)&&(t.result=u.apply(s,i),!1===t.result&&t.preventDefault());return t.type=b,o||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(v.pop(),i)||!Y(n)||c&&g(n[b])&&!f(n)&&((a=n[c])&&(n[c]=null),C.event.triggered=b,t.isPropagationStopped()&&p.addEventListener(b,Ct),n[b](),t.isPropagationStopped()&&p.removeEventListener(b,Ct),C.event.triggered=void 0,a&&(n[c]=a)),t.result}},simulate:function(e,t,i){var n=C.extend(new C.Event,i,{type:e,isSimulated:!0});C.event.trigger(n,null,t)}}),C.fn.extend({trigger:function(e,t){return this.each(function(){C.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return C.event.trigger(e,t,i,!0)}}),p.focusin||C.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){C.event.simulate(t,e.target,C.event.fix(e))};C.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,o=K.access(n,t);o||n.addEventListener(e,i,!0),K.access(n,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,o=K.access(n,t)-1;o?K.access(n,t,o):(n.removeEventListener(e,i,!0),K.remove(n,t))}}});var _t=e.location,St={guid:Date.now()},xt=/\?/;C.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||C.error("Invalid XML: "+t),i};var At=/\[\]$/,Et=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function Dt(e,t,i,n){var o;if(Array.isArray(t))C.each(t,function(t,o){i||At.test(e)?n(e,o):Dt(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,i,n)});else if(i||"object"!==y(t))n(e,t);else for(o in t)Dt(e+"["+o+"]",t[o],i,n)}C.param=function(e,t){var i,n=[],o=function(e,t){var i=g(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,function(){o(this.name,this.value)});else for(i in e)Dt(i,e[i],t,o);return n.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&kt.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var i=C(this).val();return null==i?null:Array.isArray(i)?C.map(i,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:i.replace(Et,"\r\n")}}).get()}});var Mt=/%20/g,Pt=/#.*$/,Rt=/([?&])_=[^&]*/,It=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ot=/^(?:GET|HEAD)$/,Nt=/^\/\//,Lt={},Ft={},$t="*/".concat("*"),Gt=m.createElement("a");function Bt(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,o=0,r=t.toLowerCase().match(N)||[];if(g(i))for(;n=r[o++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Ht(e,t,i,n){var o={},r=e===Ft;function s(a){var l;return o[a]=!0,C.each(e[a]||[],function(e,a){var c=a(t,i,n);return"string"!=typeof c||r||o[c]?r?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)}),l}return s(t.dataTypes[0])||!o["*"]&&s("*")}function zt(e,t){var i,n,o=C.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((o[i]?e:n||(n={}))[i]=t[i]);return n&&C.extend(!0,e,n),e}Gt.href=_t.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_t.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,C.ajaxSettings),t):zt(C.ajaxSettings,e)},ajaxPrefilter:Bt(Lt),ajaxTransport:Bt(Ft),ajax:function(t,i){"object"==typeof t&&(i=t,t=void 0),i=i||{};var n,o,r,s,a,l,c,d,u,h,p=C.ajaxSetup({},i),g=p.context||p,f=p.context&&(g.nodeType||g.jquery)?C(g):C.event,v=C.Deferred(),b=C.Callbacks("once memory"),y=p.statusCode||{},w={},_={},S="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=It.exec(r);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?r:null},setRequestHeader:function(e,t){return null==c&&(e=_[e.toLowerCase()]=_[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)x.always(e[x.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||S;return n&&n.abort(t),A(0,t),this}};if(v.promise(x),p.url=((t||p.url||_t.href)+"").replace(Nt,_t.protocol+"//"),p.type=i.method||i.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(N)||[""],null==p.crossDomain){l=m.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Gt.protocol+"//"+Gt.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=C.param(p.data,p.traditional)),Ht(Lt,p,i,x),c)return x;for(u in(d=C.event&&p.global)&&0===C.active++&&C.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ot.test(p.type),o=p.url.replace(Pt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Mt,"+")):(h=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(xt.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Rt,"$1"),h=(xt.test(o)?"&":"?")+"_="+St.guid+++h),p.url=o+h),p.ifModified&&(C.lastModified[o]&&x.setRequestHeader("If-Modified-Since",C.lastModified[o]),C.etag[o]&&x.setRequestHeader("If-None-Match",C.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||i.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+$t+"; q=0.01":""):p.accepts["*"]),p.headers)x.setRequestHeader(u,p.headers[u]);if(p.beforeSend&&(!1===p.beforeSend.call(g,x,p)||c))return x.abort();if(S="abort",b.add(p.complete),x.done(p.success),x.fail(p.error),n=Ht(Ft,p,i,x)){if(x.readyState=1,d&&f.trigger("ajaxSend",[x,p]),c)return x;p.async&&p.timeout>0&&(a=e.setTimeout(function(){x.abort("timeout")},p.timeout));try{c=!1,n.send(w,A)}catch(e){if(c)throw e;A(-1,e)}}else A(-1,"No Transport");function A(t,i,s,l){var u,h,m,w,_,S=i;c||(c=!0,a&&e.clearTimeout(a),n=void 0,r=l||"",x.readyState=t>0?4:0,u=t>=200&&t<300||304===t,s&&(w=function(e,t,i){for(var n,o,r,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(o in a)if(a[o]&&a[o].test(n)){l.unshift(o);break}if(l[0]in i)r=l[0];else{for(o in i){if(!l[0]||e.converters[o+" "+l[0]]){r=o;break}s||(s=o)}r=r||s}if(r)return r!==l[0]&&l.unshift(r),i[r]}(p,x,s)),!u&&C.inArray("script",p.dataTypes)>-1&&(p.converters["text script"]=function(){}),w=function(e,t,i,n){var o,r,s,a,l,c={},d=e.dataTypes.slice();if(d[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(r=d.shift();r;)if(e.responseFields[r]&&(i[e.responseFields[r]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=d.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(o in c)if((a=o.split(" "))[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[o]:!0!==c[o]&&(r=a[0],d.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}(p,w,x,u),u?(p.ifModified&&((_=x.getResponseHeader("Last-Modified"))&&(C.lastModified[o]=_),(_=x.getResponseHeader("etag"))&&(C.etag[o]=_)),204===t||"HEAD"===p.type?S="nocontent":304===t?S="notmodified":(S=w.state,h=w.data,u=!(m=w.error))):(m=S,!t&&S||(S="error",t<0&&(t=0))),x.status=t,x.statusText=(i||S)+"",u?v.resolveWith(g,[h,S,x]):v.rejectWith(g,[x,S,m]),x.statusCode(y),y=void 0,d&&f.trigger(u?"ajaxSuccess":"ajaxError",[x,p,u?h:m]),b.fireWith(g,[x,S]),d&&(f.trigger("ajaxComplete",[x,p]),--C.active||C.event.trigger("ajaxStop")))}return x},getJSON:function(e,t,i){return C.get(e,t,i,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],function(e,t){C[t]=function(e,i,n,o){return g(i)&&(o=o||n,n=i,i=void 0),C.ajax(C.extend({url:e,type:t,dataType:o,data:i,success:n},C.isPlainObject(e)&&e))}}),C.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),C._evalUrl=function(e,t,i){return C.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){C.globalEval(e,t,i)}})},C.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=C(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return g(e)?this.each(function(t){C(this).wrapInner(e.call(this,t))}):this.each(function(){var t=C(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=g(e);return this.each(function(i){C(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}}),C.expr.pseudos.hidden=function(e){return!C.expr.pseudos.visible(e)},C.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Wt={0:200,1223:204},Vt=C.ajaxSettings.xhr();p.cors=!!Vt&&"withCredentials"in Vt,p.ajax=Vt=!!Vt,C.ajaxTransport(function(t){var i,n;if(p.cors||Vt&&!t.crossDomain)return{send:function(o,r){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)a.setRequestHeader(s,o[s]);i=function(e){return function(){i&&(i=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(Wt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),n=a.onerror=a.ontimeout=i("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout(function(){i&&n()})},i=i("abort");try{a.send(t.hasContent&&t.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}}),C.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),C.ajaxTransport("script",function(e){var t,i;if(e.crossDomain||e.scriptAttrs)return{send:function(n,o){t=C("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&o("error"===e.type?404:200,e.type)}),m.head.appendChild(t[0])},abort:function(){i&&i()}}});var jt,Ut=[],Yt=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ut.pop()||C.expando+"_"+St.guid++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",function(t,i,n){var o,r,s,a=!1!==t.jsonp&&(Yt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Yt,"$1"+o):!1!==t.jsonp&&(t.url+=(xt.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return s||C.error(o+" was not called"),s[0]},t.dataTypes[0]="json",r=e[o],e[o]=function(){s=arguments},n.always(function(){void 0===r?C(e).removeProp(o):e[o]=r,t[o]&&(t.jsonpCallback=i.jsonpCallback,Ut.push(o)),s&&g(r)&&r(s[0]),s=r=void 0}),"script"}),p.createHTMLDocument=((jt=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===jt.childNodes.length),C.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(p.createHTMLDocument?((n=(t=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,t.head.appendChild(n)):t=m),r=!i&&[],(o=k.exec(e))?[t.createElement(o[1])]:(o=we([e],t,r),r&&r.length&&C(r).remove(),C.merge([],o.childNodes)));var n,o,r},C.fn.load=function(e,t,i){var n,o,r,s=this,a=e.indexOf(" ");return a>-1&&(n=mt(e.slice(a)),e=e.slice(0,a)),g(t)?(i=t,t=void 0):t&&"object"==typeof t&&(o="POST"),s.length>0&&C.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){r=arguments,s.html(n?C("<div>").append(C.parseHTML(e)).find(n):e)}).always(i&&function(e,t){s.each(function(){i.apply(this,r||[e.responseText,t,e])})}),this},C.expr.pseudos.animated=function(e){return C.grep(C.timers,function(t){return e===t.elem}).length},C.offset={setOffset:function(e,t,i){var n,o,r,s,a,l,c=C.css(e,"position"),d=C(e),u={};"static"===c&&(e.style.position="relative"),a=d.offset(),r=C.css(e,"top"),l=C.css(e,"left"),("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1?(s=(n=d.position()).top,o=n.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),g(t)&&(t=t.call(e,i,C.extend({},a))),null!=t.top&&(u.top=t.top-a.top+s),null!=t.left&&(u.left=t.left-a.left+o),"using"in t?t.using.call(e,u):("number"==typeof u.top&&(u.top+="px"),"number"==typeof u.left&&(u.left+="px"),d.css(u))}},C.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){C.offset.setOffset(this,e,t)});var t,i,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],o={top:0,left:0};if("fixed"===C.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===C.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((o=C(e).offset()).top+=C.css(e,"borderTopWidth",!0),o.left+=C.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-C.css(n,"marginTop",!0),left:t.left-o.left-C.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===C.css(e,"position");)e=e.offsetParent;return e||ne})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;C.fn[e]=function(n){return z(this,function(e,n,o){var r;if(f(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===o)return r?r[t]:e[n];r?r.scrollTo(i?r.pageXOffset:o,i?o:r.pageYOffset):e[n]=o},e,n,arguments.length)}}),C.each(["top","left"],function(e,t){C.cssHooks[t]=Ve(p.pixelPosition,function(e,i){if(i)return i=We(e,t),Ge.test(i)?C(e).position()[t]+"px":i})}),C.each({Height:"height",Width:"width"},function(e,t){C.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){C.fn[n]=function(o,r){var s=arguments.length&&(i||"boolean"!=typeof o),a=i||(!0===o||!0===r?"margin":"border");return z(this,function(t,i,o){var r;return f(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===o?C.css(t,i,a):C.style(t,i,o,a)},t,s?o:void 0,s)}})}),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){C.fn[t]=function(e){return this.on(t,e)}}),C.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){C.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}});var qt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;C.proxy=function(e,t){var i,n,r;if("string"==typeof t&&(i=e[t],t=e,e=i),g(e))return n=o.call(arguments,2),r=function(){return e.apply(t||this,n.concat(o.call(arguments)))},r.guid=e.guid=e.guid||C.guid++,r},C.holdReady=function(e){e?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=T,C.isFunction=g,C.isWindow=f,C.camelCase=U,C.type=y,C.now=Date.now,C.isNumeric=function(e){var t=C.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},C.trim=function(e){return null==e?"":(e+"").replace(qt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return C});var Kt=e.jQuery,Xt=e.$;return C.noConflict=function(t){return e.$===C&&(e.$=Xt),t&&e.jQuery===C&&(e.jQuery=Kt),C},void 0===t&&(e.jQuery=e.$=C),C}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";e.ui=e.ui||{};e.ui.version="1.14.1";var t,i=0,n=Array.prototype.hasOwnProperty,o=Array.prototype.slice;e.cleanData=(t=e.cleanData,function(i){var n,o,r;for(r=0;null!=(o=i[r]);r++)(n=e._data(o,"events"))&&n.remove&&e(o).triggerHandler("remove");t(i)}),e.widget=function(t,i,n){var o,r,s,a={},l=t.split(".")[0];if("__proto__"===(t=t.split(".")[1])||"constructor"===t)return e.error("Invalid widget name: "+t);var c=l+"-"+t;return n||(n=i,i=e.Widget),Array.isArray(n)&&(n=e.extend.apply(null,[{}].concat(n))),e.expr.pseudos[c.toLowerCase()]=function(t){return!!e.data(t,c)},e[l]=e[l]||{},o=e[l][t],r=e[l][t]=function(e,t){if(!this||!this._createWidget)return new r(e,t);arguments.length&&this._createWidget(e,t)},e.extend(r,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(s=new i).options=e.widget.extend({},s.options),e.each(n,function(e,t){a[e]="function"==typeof t?function(){function n(){return i.prototype[e].apply(this,arguments)}function o(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,r=this._superApply;return this._super=n,this._superApply=o,e=t.apply(this,arguments),this._super=i,this._superApply=r,e}}():t}),r.prototype=e.widget.extend(s,{widgetEventPrefix:o&&s.widgetEventPrefix||t},a,{constructor:r,namespace:l,widgetName:t,widgetFullName:c}),o?(e.each(o._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete o._childConstructors):i._childConstructors.push(r),e.widget.bridge(t,r),r},e.widget.extend=function(t){for(var i,r,s=o.call(arguments,1),a=0,l=s.length;a<l;a++)for(i in s[a])r=s[a][i],n.call(s[a],i)&&void 0!==r&&(e.isPlainObject(r)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],r):e.widget.extend({},r):t[i]=r);return t},e.widget.bridge=function(t,i){var n=i.prototype.widgetFullName||t;e.fn[t]=function(r){var s="string"==typeof r,a=o.call(arguments,1),l=this;return s?this.length||"instance"!==r?this.each(function(){var i,o=e.data(this,n);return"instance"===r?(l=o,!1):o?"function"!=typeof o[r]||"_"===r.charAt(0)?e.error("no such method '"+r+"' for "+t+" widget instance"):(i=o[r].apply(o,a))!==o&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")}):l=void 0:(a.length&&(r=e.widget.extend.apply(null,[r].concat(a))),this.each(function(){var t=e.data(this,n);t?(t.option(r||{}),t._init&&t._init()):e.data(this,n,new i(r,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,i){t._removeClass(i,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,o,r,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},n=t.split("."),t=n.shift(),n.length){for(o=s[t]=e.widget.extend({},this.options[t]),r=0;r<n.length-1;r++)o[n[r]]=o[n[r]]||{},o=o[n[r]];if(t=n.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var i,n,o;for(i in t)o=this.classesElementLookup[i],t[i]!==this.options.classes[i]&&o&&o.length&&(n=e(o.get()),this._removeClass(o,i),n.addClass(this._classes({element:n,keys:i,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var i=[],n=this;function o(){var i=[];t.element.each(function(t,o){e.map(n.classesElementLookup,function(e){return e}).some(function(e){return e.is(o)})||i.push(o)}),n._on(e(i),{remove:"_untrackClassesElement"})}function r(r,s){var a,l;for(l=0;l<r.length;l++)a=n.classesElementLookup[r[l]]||e(),t.add?(o(),a=e(e.uniqueSort(a.get().concat(t.element.get())))):a=e(a.not(t.element).get()),n.classesElementLookup[r[l]]=a,i.push(r[l]),s&&t.classes[r[l]]&&i.push(t.classes[r[l]])}return(t=e.extend({element:this.element,classes:this.options.classes||{}},t)).keys&&r(t.keys.match(/\S+/g)||[],!0),t.extra&&r(t.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(t){var i=this;e.each(i.classesElementLookup,function(n,o){-1!==e.inArray(t.target,o)&&(i.classesElementLookup[n]=e(o.not(t.target).get()))}),this._off(e(t.target))},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,n){n="boolean"==typeof n?n:i;var o="string"==typeof e||null===e,r={extra:o?t:i,keys:o?e:t,element:o?this.element:e,add:n};return r.element.toggleClass(this._classes(r),n),this},_on:function(t,i,n){var o,r=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,function(n,s){function a(){if(t||!0!==r.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?r[s]:s).apply(r,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,d=l[2];d?o.on(c,d,a):i.on(c,a)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var i=this;return setTimeout(function(){return("string"==typeof e?i[e]:e).apply(i,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,i,n){var o,r,s=this.options[t];if(n=n||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!("function"==typeof s&&!1===s.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,o,r){var s;"string"==typeof o&&(o={effect:o});var a=o?!0===o||"number"==typeof o?i:o.effect||i:t;"number"==typeof(o=o||{})?o={duration:o}:!0===o&&(o={}),s=!e.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),s&&e.effects&&e.effects.effect[a]?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,r):n.queue(function(i){e(this)[t](),r&&r.call(n[0]),i()})}});e.widget;!function(){var t,i=Math.max,n=Math.abs,o=/left|center|right/,r=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,c=e.fn.position;function d(e,t,i){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?i/100:1)]}function u(t,i){return parseInt(e.css(t,i),10)||0}function h(e){return null!=e&&e===e.window}e.position={scrollbarWidth:function(){if(void 0!==t)return t;var i,n,o=e("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>"),r=o.children()[0];return e("body").append(o),i=r.offsetWidth,o.css("overflow","scroll"),i===(n=r.offsetWidth)&&(n=o[0].clientWidth),o.remove(),t=i-n},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=h(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:o,offset:!n&&!o?e(t).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);var l,p,g,f,m,v,b,y,w="string"==typeof(t=e.extend({},t)).of?e(document).find(t.of):e(t.of),C=e.position.getWithinInfo(t.within),_=e.position.getScrollInfo(C),S=(t.collision||"flip").split(" "),x={};return v=9===(y=(b=w)[0]).nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:h(y)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:y.preventDefault?{width:0,height:0,offset:{top:y.pageY,left:y.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()},w[0].preventDefault&&(t.at="left top"),p=v.width,g=v.height,f=v.offset,m=e.extend({},f),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=o.test(n[0])?n.concat(["center"]):r.test(n[0])?["center"].concat(n):["center","center"]),n[0]=o.test(n[0])?n[0]:"center",n[1]=r.test(n[1])?n[1]:"center",e=s.exec(n[0]),i=s.exec(n[1]),x[this]=[e?e[0]:0,i?i[0]:0],t[this]=[a.exec(n[0])[0],a.exec(n[1])[0]]}),1===S.length&&(S[1]=S[0]),"right"===t.at[0]?m.left+=p:"center"===t.at[0]&&(m.left+=p/2),"bottom"===t.at[1]?m.top+=g:"center"===t.at[1]&&(m.top+=g/2),l=d(x.at,p,g),m.left+=l[0],m.top+=l[1],this.each(function(){var o,r,s=e(this),a=s.outerWidth(),c=s.outerHeight(),h=u(this,"marginLeft"),v=u(this,"marginTop"),b=a+h+u(this,"marginRight")+_.width,y=c+v+u(this,"marginBottom")+_.height,A=e.extend({},m),E=d(x.my,s.outerWidth(),s.outerHeight());"right"===t.my[0]?A.left-=a:"center"===t.my[0]&&(A.left-=a/2),"bottom"===t.my[1]?A.top-=c:"center"===t.my[1]&&(A.top-=c/2),A.left+=E[0],A.top+=E[1],o={marginLeft:h,marginTop:v},e.each(["left","top"],function(i,n){e.ui.position[S[i]]&&e.ui.position[S[i]][n](A,{targetWidth:p,targetHeight:g,elemWidth:a,elemHeight:c,collisionPosition:o,collisionWidth:b,collisionHeight:y,offset:[l[0]+E[0],l[1]+E[1]],my:t.my,at:t.at,within:C,elem:s})}),t.using&&(r=function(e){var o=f.left-A.left,r=o+p-a,l=f.top-A.top,d=l+g-c,u={target:{element:w,left:f.left,top:f.top,width:p,height:g},element:{element:s,left:A.left,top:A.top,width:a,height:c},horizontal:r<0?"left":o>0?"right":"center",vertical:d<0?"top":l>0?"bottom":"middle"};p<a&&n(o+r)<p&&(u.horizontal="center"),g<c&&n(l+d)<g&&(u.vertical="middle"),i(n(o),n(r))>i(n(l),n(d))?u.important="horizontal":u.important="vertical",t.using.call(this,e,u)}),s.offset(e.extend(A,{using:r}))})},e.ui.position={fit:{left:function(e,t){var n,o=t.within,r=o.isWindow?o.scrollLeft:o.offset.left,s=o.width,a=e.left-t.collisionPosition.marginLeft,l=r-a,c=a+t.collisionWidth-s-r;t.collisionWidth>s?l>0&&c<=0?(n=e.left+l+t.collisionWidth-s-r,e.left+=l-n):e.left=c>0&&l<=0?r:l>c?r+s-t.collisionWidth:r:l>0?e.left+=l:c>0?e.left-=c:e.left=i(e.left-a,e.left)},top:function(e,t){var n,o=t.within,r=o.isWindow?o.scrollTop:o.offset.top,s=t.within.height,a=e.top-t.collisionPosition.marginTop,l=r-a,c=a+t.collisionHeight-s-r;t.collisionHeight>s?l>0&&c<=0?(n=e.top+l+t.collisionHeight-s-r,e.top+=l-n):e.top=c>0&&l<=0?r:l>c?r+s-t.collisionHeight:r:l>0?e.top+=l:c>0?e.top-=c:e.top=i(e.top-a,e.top)}},flip:{left:function(e,t){var i,o,r=t.within,s=r.offset.left+r.scrollLeft,a=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=e.left-t.collisionPosition.marginLeft,d=c-l,u=c+t.collisionWidth-a-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,g=-2*t.offset[0];d<0?((i=e.left+h+p+g+t.collisionWidth-a-s)<0||i<n(d))&&(e.left+=h+p+g):u>0&&((o=e.left-t.collisionPosition.marginLeft+h+p+g-l)>0||n(o)<u)&&(e.left+=h+p+g)},top:function(e,t){var i,o,r=t.within,s=r.offset.top+r.scrollTop,a=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=e.top-t.collisionPosition.marginTop,d=c-l,u=c+t.collisionHeight-a-l,h="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,g=-2*t.offset[1];d<0?((o=e.top+h+p+g+t.collisionHeight-a-s)<0||o<n(d))&&(e.top+=h+p+g):u>0&&((i=e.top-t.collisionPosition.marginTop+h+p+g-l)>0||n(i)<u)&&(e.top+=h+p+g)}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}();e.ui.position,e.extend(e.expr.pseudos,{data:e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}})}),e.fn.extend({disableSelection:(r="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(r+".ui-disableSelection",function(e){e.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}});var r,s,a=e,l={},c=l.toString,d=/^([\-+])=\s*(\d+\.?\d*)/,u=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),e[4]?(parseInt(e[4],16)/255).toFixed(2):1]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),e[4]?(parseInt(e[4]+e[4],16)/255).toFixed(2):1]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],h=a.Color=function(e,t,i,n){return new a.Color.fn.parse(e,t,i,n)},p={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},g={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},f=a.each;function m(e){return null==e?e+"":"object"==typeof e?l[c.call(e)]||"object":typeof e}function v(e,t,i){var n=g[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),n.mod?(e+n.mod)%n.mod:Math.min(n.max,Math.max(0,e)))}function b(e){var t=h(),i=t._rgba=[];return e=e.toLowerCase(),f(u,function(n,o){var r,s=o.re.exec(e),a=s&&o.parse(s),l=o.space||"rgba";if(a)return r=t[l](a),t[p[l].cache]=r[p[l].cache],i=t._rgba=r._rgba,!1}),i.length?("0,0,0,0"===i.join()&&a.extend(i,s.transparent),t):s[e]}function y(e,t,i){return 6*(i=(i+1)%1)<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}f(p,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),a.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()}),h.fn=a.extend(h.prototype,{parse:function(e,t,i,n){if(void 0===e)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=a(e).css(t),t=void 0);var o=this,r=m(e),l=this._rgba=[];return void 0!==t&&(e=[e,t,i,n],r="array"),"string"===r?this.parse(b(e)||s._default):"array"===r?(f(p.rgba.props,function(t,i){l[i.idx]=v(e[i.idx],i)}),this):"object"===r?(f(p,e instanceof h?function(t,i){e[i.cache]&&(o[i.cache]=e[i.cache].slice())}:function(t,i){var n=i.cache;f(i.props,function(t,r){if(!o[n]&&i.to){if("alpha"===t||null==e[t])return;o[n]=i.to(o._rgba)}o[n][r.idx]=v(e[t],r,!0)}),o[n]&&a.inArray(null,o[n].slice(0,3))<0&&(null==o[n][3]&&(o[n][3]=1),i.from&&(o._rgba=i.from(o[n])))}),this):void 0},is:function(e){var t=h(e),i=!0,n=this;return f(p,function(e,o){var r,s=t[o.cache];return s&&(r=n[o.cache]||o.to&&o.to(n._rgba)||[],f(o.props,function(e,t){if(null!=s[t.idx])return i=s[t.idx]===r[t.idx]})),i}),i},_space:function(){var e=[],t=this;return f(p,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var i=h(e),n=i._space(),o=p[n],r=0===this.alpha()?h("transparent"):this,s=r[o.cache]||o.to(r._rgba),a=s.slice();return i=i[o.cache],f(o.props,function(e,n){var o=n.idx,r=s[o],l=i[o],c=g[n.type]||{};null!==l&&(null===r?a[o]=l:(c.mod&&(l-r>c.mod/2?r+=c.mod:r-l>c.mod/2&&(r-=c.mod)),a[o]=v((l-r)*t+r,n)))}),this[n](a)},blend:function(e){if(1===this._rgba[3])return this;var t=this._rgba.slice(),i=t.pop(),n=h(e)._rgba;return h(a.map(t,function(e,t){return(1-i)*n[t]+i*e}))},toRgbaString:function(){var e="rgba(",t=a.map(this._rgba,function(e,t){return null!=e?e:t>2?1:0});return 1===t[3]&&(t.pop(),e="rgb("),e+t.join(", ")+")"},toHslaString:function(){var e="hsla(",t=a.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e});return 1===t[3]&&(t.pop(),e="hsl("),e+t.join(", ")+")"},toHexString:function(e){var t=this._rgba.slice(),i=t.pop();return e&&t.push(~~(255*i)),"#"+a.map(t,function(e){return("0"+(e||0).toString(16)).substr(-2)}).join("")},toString:function(){return this.toRgbaString()}}),h.fn.parse.prototype=h.fn,p.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,o=e[1]/255,r=e[2]/255,s=e[3],a=Math.max(n,o,r),l=Math.min(n,o,r),c=a-l,d=a+l,u=.5*d;return t=l===a?0:n===a?60*(o-r)/c+360:o===a?60*(r-n)/c+120:60*(n-o)/c+240,i=0===c?0:u<=.5?c/d:c/(2-d),[Math.round(t)%360,i,u,null==s?1:s]},p.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],o=e[3],r=n<=.5?n*(1+i):n+i-n*i,s=2*n-r;return[Math.round(255*y(s,r,t+1/3)),Math.round(255*y(s,r,t)),Math.round(255*y(s,r,t-1/3)),o]},f(p,function(e,t){var i=t.props,n=t.cache,o=t.to,r=t.from;h.fn[e]=function(e){if(o&&!this[n]&&(this[n]=o(this._rgba)),void 0===e)return this[n].slice();var t,s=m(e),a="array"===s||"object"===s?e:arguments,l=this[n].slice();return f(i,function(e,t){var i=a["object"===s?e:t.idx];null==i&&(i=l[t.idx]),l[t.idx]=v(i,t)}),r?((t=h(r(l)))[n]=l,t):h(l)},f(i,function(t,i){h.fn[t]||(h.fn[t]=function(n){var o,r,s,a,l=m(n);return r=(o=this[a="alpha"===t?this._hsla?"hsla":"rgba":e]())[i.idx],"undefined"===l?r:("function"===l&&(l=m(n=n.call(this,r))),null==n&&i.empty?this:("string"===l&&(s=d.exec(n))&&(n=r+parseFloat(s[2])*("+"===s[1]?1:-1)),o[i.idx]=n,this[a](o)))})})}),h.hook=function(e){var t=e.split(" ");f(t,function(e,t){a.cssHooks[t]={set:function(e,i){var n;"transparent"===i||"string"===m(i)&&!(n=b(i))||(i=(i=h(n||i)).toRgbaString()),e.style[t]=i}},a.fx.step[t]=function(e){e.colorInit||(e.start=h(e.elem,t),e.end=h(e.end),e.colorInit=!0),a.cssHooks[t].set(e.elem,e.start.transition(e.end,e.pos))}})},h.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),a.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},s=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};var w,C="ui-effects-",_="ui-effects-style",S="ui-effects-animated";e.effects={effect:{}},function(){var t=["add","remove","toggle"],i={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function n(e){return e.replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}function o(e){var t,i,o=e.ownerDocument.defaultView.getComputedStyle(e),r={};for(i=o.length;i--;)"string"==typeof o[t=o[i]]&&(r[n(t)]=o[t]);return r}e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(a.style(e.elem,i,e.end),e.setAttr=!0)}}),e.effects.animateClass=function(n,r,s,a){var l=e.speed(r,s,a);return this.queue(function(){var r,s=e(this),a=s.attr("class")||"",c=l.children?s.find("*").addBack():s;c=c.map(function(){return{el:e(this),start:o(this)}}),(r=function(){e.each(t,function(e,t){n[t]&&s[t+"Class"](n[t])})})(),c=c.map(function(){return this.end=o(this.el[0]),this.diff=function(t,n){var o,r,s={};for(o in n)r=n[o],t[o]!==r&&(i[o]||!e.fx.step[o]&&isNaN(parseFloat(r))||(s[o]=r));return s}(this.start,this.end),this}),s.attr("class",a),c=c.map(function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,c.get()).done(function(){r(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(s[0])})})},e.fn.extend({addClass:function(t){return function(i,n,o,r){return n?e.effects.animateClass.call(this,{add:i},n,o,r):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,o,r){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,o,r):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,n,o,r,s){return"boolean"==typeof n||void 0===n?o?e.effects.animateClass.call(this,n?{add:i}:{remove:i},o,r,s):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},n,o,r)}}(e.fn.toggleClass),switchClass:function(t,i,n,o,r){return e.effects.animateClass.call(this,{add:i,remove:t},n,o,r)}})}(),function(){function t(t,i,n,o){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),"function"==typeof i&&(o=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(o=n,n=i,i={}),"function"==typeof n&&(o=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=o||i.complete,t}function i(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||("string"==typeof t&&!e.effects.effect[t]||("function"==typeof t||"object"==typeof t&&!t.effect))}function n(e,t){var i=t.outerWidth(),n=t.outerHeight(),o=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(e)||["",0,i,n,0];return{top:parseFloat(o[1])||0,right:"auto"===o[2]?i:parseFloat(o[2]),bottom:"auto"===o[3]?n:parseFloat(o[3]),left:parseFloat(o[4])||0}}e.expr&&e.expr.pseudos&&e.expr.pseudos.animated&&(e.expr.pseudos.animated=function(t){return function(i){return!!e(i).data(S)||t(i)}}(e.expr.pseudos.animated)),!0===e.uiBackCompat&&e.extend(e.effects,{save:function(e,t){for(var i=0,n=t.length;i<n;i++)null!==t[i]&&e.data(C+t[i],e[0].style[t[i]])},restore:function(e,t){for(var i,n=0,o=t.length;n<o;n++)null!==t[n]&&(i=e.data(C+t[n]),e.css(t[n],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(e){r=document.body}return t.wrap(n),(t[0]===r||e.contains(t[0],r))&&e(r).trigger("focus"),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(o),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).trigger("focus")),t}}),e.extend(e.effects,{version:"1.14.1",define:function(t,i,n){return n||(n=i,i="effect"),e.effects.effect[t]=n,e.effects.effect[t].mode=i,n},scaledDimensions:function(e,t,i){if(0===t)return{height:0,width:0,outerHeight:0,outerWidth:0};var n="horizontal"!==i?(t||100)/100:1,o="vertical"!==i?(t||100)/100:1;return{height:e.height()*o,width:e.width()*n,outerHeight:e.outerHeight()*o,outerWidth:e.outerWidth()*n}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(e,t,i){var n=e.queue();t>1&&n.splice.apply(n,[1,0].concat(n.splice(t,i))),e.dequeue()},saveStyle:function(e){e.data(_,e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data(_)||"",e.removeData(_)},mode:function(e,t){var i=e.is(":hidden");return"toggle"===t&&(t=i?"show":"hide"),(i?"hide"===t:"show"===t)&&(t="none"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createPlaceholder:function(t){var i,n=t.css("position"),o=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(n)&&(n="absolute",i=e("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(C+"placeholder",i)),t.css({position:n,left:o.left,top:o.top}),i},removePlaceholder:function(e){var t=C+"placeholder",i=e.data(t);i&&(i.remove(),e.removeData(t))},cleanUp:function(t){e.effects.restoreStyle(t),e.effects.removePlaceholder(t)},setTransition:function(t,i,n,o){return o=o||{},e.each(i,function(e,i){var r=t.cssUnit(i);r[0]>0&&(o[i]=r[0]*n+r[1])}),o}}),e.fn.extend({effect:function(){var i=t.apply(this,arguments),n=e.effects.effect[i.effect],o=n.mode,r=i.queue,s=r||"fx",a=i.complete,l=i.mode,c=[],d=function(t){var i=e(this),n=e.effects.mode(i,l)||o;i.data(S,!0),c.push(n),o&&("show"===n||n===o&&"hide"===n)&&i.show(),o&&"none"===n||e.effects.saveStyle(i),"function"==typeof t&&t()};if(e.fx.off||!n)return l?this[l](i.duration,a):this.each(function(){a&&a.call(this)});function u(t){var r=e(this);function s(){"function"==typeof a&&a.call(r[0]),"function"==typeof t&&t()}i.mode=c.shift(),!0!==e.uiBackCompat||o?"none"===i.mode?(r[l](),s()):n.call(r[0],i,function(){r.removeData(S),e.effects.cleanUp(r),"hide"===i.mode&&r.hide(),s()}):(r.is(":hidden")?"hide"===l:"show"===l)?(r[l](),s()):n.call(r[0],i,s)}return!1===r?this.each(d).each(u):this.queue(s,d).queue(s,u)},show:function(e){return function(n){if(i(n))return e.apply(this,arguments);var o=t.apply(this,arguments);return o.mode="show",this.effect.call(this,o)}}(e.fn.show),hide:function(e){return function(n){if(i(n))return e.apply(this,arguments);var o=t.apply(this,arguments);return o.mode="hide",this.effect.call(this,o)}}(e.fn.hide),toggle:function(e){return function(n){if(i(n)||"boolean"==typeof n)return e.apply(this,arguments);var o=t.apply(this,arguments);return o.mode="toggle",this.effect.call(this,o)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n},cssClip:function(e){return e?this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)"):n(this.css("clip"),this)},transfer:function(t,i){var n=e(this),o=e(t.to),r="fixed"===o.css("position"),s=e("body"),a=r?s.scrollTop():0,l=r?s.scrollLeft():0,c=o.offset(),d={top:c.top-a,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},u=n.offset(),h=e("<div class='ui-effects-transfer'></div>");h.appendTo("body").addClass(t.className).css({top:u.top-a,left:u.left-l,height:n.innerHeight(),width:n.innerWidth(),position:r?"fixed":"absolute"}).animate(d,t.duration,t.easing,function(){h.remove(),"function"==typeof i&&i()})}}),e.fx.step.clip=function(t){t.clipInit||(t.start=e(t.elem).cssClip(),"string"==typeof t.end&&(t.end=n(t.end,t.elem)),t.clipInit=!0),e(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}}(),w={},e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){w[t]=function(t){return Math.pow(t,e+2)}}),e.extend(w,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(w,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?i(2*e)/2:1-i(-2*e+2)/2}});e.effects,e.effects.define("blind","hide",function(t,i){var n={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},o=e(this),r=t.direction||"up",s=o.cssClip(),a={clip:e.extend({},s)},l=e.effects.createPlaceholder(o);a.clip[n[r][0]]=a.clip[n[r][1]],"show"===t.mode&&(o.cssClip(a.clip),l&&l.css(e.effects.clipToBox(a)),a.clip=s),l&&l.animate(e.effects.clipToBox(a),t.duration,t.easing),o.animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:i})}),e.effects.define("bounce",function(t,i){var n,o,r,s=e(this),a=t.mode,l="hide"===a,c="show"===a,d=t.direction||"up",u=t.distance,h=t.times||5,p=2*h+(c||l?1:0),g=t.duration/p,f=t.easing,m="up"===d||"down"===d?"top":"left",v="up"===d||"left"===d,b=0,y=s.queue().length;for(e.effects.createPlaceholder(s),r=s.css(m),u||(u=s["top"===m?"outerHeight":"outerWidth"]()/3),c&&((o={opacity:1})[m]=r,s.css("opacity",0).css(m,v?2*-u:2*u).animate(o,g,f)),l&&(u/=Math.pow(2,h-1)),(o={})[m]=r;b<h;b++)(n={})[m]=(v?"-=":"+=")+u,s.animate(n,g,f).animate(o,g,f),u=l?2*u:u/2;l&&((n={opacity:0})[m]=(v?"-=":"+=")+u,s.animate(n,g,f)),s.queue(i),e.effects.unshift(s,y,p+1)}),e.effects.define("clip","hide",function(t,i){var n,o={},r=e(this),s=t.direction||"vertical",a="both"===s,l=a||"horizontal"===s,c=a||"vertical"===s;n=r.cssClip(),o.clip={top:c?(n.bottom-n.top)/2:n.top,right:l?(n.right-n.left)/2:n.right,bottom:c?(n.bottom-n.top)/2:n.bottom,left:l?(n.right-n.left)/2:n.left},e.effects.createPlaceholder(r),"show"===t.mode&&(r.cssClip(o.clip),o.clip=n),r.animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:i})}),e.effects.define("drop","hide",function(t,i){var n,o=e(this),r="show"===t.mode,s=t.direction||"left",a="up"===s||"down"===s?"top":"left",l="up"===s||"left"===s?"-=":"+=",c="+="===l?"-=":"+=",d={opacity:0};e.effects.createPlaceholder(o),n=t.distance||o["top"===a?"outerHeight":"outerWidth"](!0)/2,d[a]=l+n,r&&(o.css(d),d[a]=c+n,d.opacity=1),o.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:i})}),e.effects.define("explode","hide",function(t,i){var n,o,r,s,a,l,c=t.pieces?Math.round(Math.sqrt(t.pieces)):3,d=c,u=e(this),h="show"===t.mode,p=u.show().css("visibility","hidden").offset(),g=Math.ceil(u.outerWidth()/d),f=Math.ceil(u.outerHeight()/c),m=[];function v(){m.push(this),m.length===c*d&&(u.css({visibility:"visible"}),e(m).remove(),i())}for(n=0;n<c;n++)for(s=p.top+n*f,l=n-(c-1)/2,o=0;o<d;o++)r=p.left+o*g,a=o-(d-1)/2,u.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*g,top:-n*f}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g,height:f,left:r+(h?a*g:0),top:s+(h?l*f:0),opacity:h?0:1}).animate({left:r+(h?0:a*g),top:s+(h?0:l*f),opacity:h?1:0},t.duration||500,t.easing,v)}),e.effects.define("fade","toggle",function(t,i){var n="show"===t.mode;e(this).css("opacity",n?0:1).animate({opacity:n?1:0},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}),e.effects.define("fold","hide",function(t,i){var n=e(this),o=t.mode,r="show"===o,s="hide"===o,a=t.size||15,l=/([0-9]+)%/.exec(a),c=!!t.horizFirst?["right","bottom"]:["bottom","right"],d=t.duration/2,u=e.effects.createPlaceholder(n),h=n.cssClip(),p={clip:e.extend({},h)},g={clip:e.extend({},h)},f=[h[c[0]],h[c[1]]],m=n.queue().length;l&&(a=parseInt(l[1],10)/100*f[s?0:1]),p.clip[c[0]]=a,g.clip[c[0]]=a,g.clip[c[1]]=0,r&&(n.cssClip(g.clip),u&&u.css(e.effects.clipToBox(g)),g.clip=h),n.queue(function(i){u&&u.animate(e.effects.clipToBox(p),d,t.easing).animate(e.effects.clipToBox(g),d,t.easing),i()}).animate(p,d,t.easing).animate(g,d,t.easing).queue(i),e.effects.unshift(n,m,4)}),e.effects.define("highlight","show",function(t,i){var n=e(this),o={backgroundColor:n.css("backgroundColor")};"hide"===t.mode&&(o.opacity=0),e.effects.saveStyle(n),n.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:i})}),e.effects.define("size",function(t,i){var n,o,r,s=e(this),a=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],d=t.mode,u="effect"!==d,h=t.scale||"both",p=t.origin||["middle","center"],g=s.css("position"),f=s.position(),m=e.effects.scaledDimensions(s),v=t.from||m,b=t.to||e.effects.scaledDimensions(s,0);e.effects.createPlaceholder(s),"show"===d&&(r=v,v=b,b=r),o={from:{y:v.height/m.height,x:v.width/m.width},to:{y:b.height/m.height,x:b.width/m.width}},"box"!==h&&"both"!==h||(o.from.y!==o.to.y&&(v=e.effects.setTransition(s,l,o.from.y,v),b=e.effects.setTransition(s,l,o.to.y,b)),o.from.x!==o.to.x&&(v=e.effects.setTransition(s,c,o.from.x,v),b=e.effects.setTransition(s,c,o.to.x,b))),"content"!==h&&"both"!==h||o.from.y!==o.to.y&&(v=e.effects.setTransition(s,a,o.from.y,v),b=e.effects.setTransition(s,a,o.to.y,b)),p&&(n=e.effects.getBaseline(p,m),v.top=(m.outerHeight-v.outerHeight)*n.y+f.top,v.left=(m.outerWidth-v.outerWidth)*n.x+f.left,b.top=(m.outerHeight-b.outerHeight)*n.y+f.top,b.left=(m.outerWidth-b.outerWidth)*n.x+f.left),delete v.outerHeight,delete v.outerWidth,s.css(v),"content"!==h&&"both"!==h||(l=l.concat(["marginTop","marginBottom"]).concat(a),c=c.concat(["marginLeft","marginRight"]),s.find("*[width]").each(function(){var i=e(this),n=e.effects.scaledDimensions(i),r={height:n.height*o.from.y,width:n.width*o.from.x,outerHeight:n.outerHeight*o.from.y,outerWidth:n.outerWidth*o.from.x},s={height:n.height*o.to.y,width:n.width*o.to.x,outerHeight:n.height*o.to.y,outerWidth:n.width*o.to.x};o.from.y!==o.to.y&&(r=e.effects.setTransition(i,l,o.from.y,r),s=e.effects.setTransition(i,l,o.to.y,s)),o.from.x!==o.to.x&&(r=e.effects.setTransition(i,c,o.from.x,r),s=e.effects.setTransition(i,c,o.to.x,s)),u&&e.effects.saveStyle(i),i.css(r),i.animate(s,t.duration,t.easing,function(){u&&e.effects.restoreStyle(i)})})),s.animate(b,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){var t=s.offset();0===b.opacity&&s.css("opacity",v.opacity),u||(s.css("position","static"===g?"relative":g).offset(t),e.effects.saveStyle(s)),i()}})}),e.effects.define("scale",function(t,i){var n=e(this),o=t.mode,r=parseInt(t.percent,10)||(0===parseInt(t.percent,10)||"effect"!==o?0:100),s=e.extend(!0,{from:e.effects.scaledDimensions(n),to:e.effects.scaledDimensions(n,r,t.direction||"both"),origin:t.origin||["middle","center"]},t);t.fade&&(s.from.opacity=1,s.to.opacity=0),e.effects.effect.size.call(this,s,i)}),e.effects.define("puff","hide",function(t,i){var n=e.extend(!0,{},t,{fade:!0,percent:parseInt(t.percent,10)||150});e.effects.effect.scale.call(this,n,i)}),e.effects.define("pulsate","show",function(t,i){var n=e(this),o=t.mode,r="show"===o,s=r||"hide"===o,a=2*(t.times||5)+(s?1:0),l=t.duration/a,c=0,d=1,u=n.queue().length;for(!r&&n.is(":visible")||(n.css("opacity",0).show(),c=1);d<a;d++)n.animate({opacity:c},l,t.easing),c=1-c;n.animate({opacity:c},l,t.easing),n.queue(i),e.effects.unshift(n,u,a+1)}),e.effects.define("shake",function(t,i){var n=1,o=e(this),r=t.direction||"left",s=t.distance||20,a=t.times||3,l=2*a+1,c=Math.round(t.duration/l),d="up"===r||"down"===r?"top":"left",u="up"===r||"left"===r,h={},p={},g={},f=o.queue().length;for(e.effects.createPlaceholder(o),h[d]=(u?"-=":"+=")+s,p[d]=(u?"+=":"-=")+2*s,g[d]=(u?"-=":"+=")+2*s,o.animate(h,c,t.easing);n<a;n++)o.animate(p,c,t.easing).animate(g,c,t.easing);o.animate(p,c,t.easing).animate(h,c/2,t.easing).queue(i),e.effects.unshift(o,f,l+1)}),e.effects.define("slide","show",function(t,i){var n,o,r=e(this),s={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},a=t.mode,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l,u=t.distance||r["top"===c?"outerHeight":"outerWidth"](!0),h={};e.effects.createPlaceholder(r),n=r.cssClip(),o=r.position()[c],h[c]=(d?-1:1)*u+o,h.clip=r.cssClip(),h.clip[s[l][1]]=h.clip[s[l][0]],"show"===a&&(r.cssClip(h.clip),r.css(c,h[c]),h.clip=n,h[c]=o),r.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:i})});!0===e.uiBackCompat&&e.effects.define("transfer",function(t,i){e(this).transfer(t,i)});e.ui.focusable=function(t,i){var n,o,r,s,a,l=t.nodeName.toLowerCase();return"area"===l?(o=(n=t.parentNode).name,!(!t.href||!o||"map"!==n.nodeName.toLowerCase())&&((r=e("img[usemap='#"+o+"']")).length>0&&r.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(l)?(s=!t.disabled)&&(a=e(t).closest("fieldset")[0])&&(s=!a.disabled):s="a"===l&&t.href||i,s&&e(t).is(":visible")&&"visible"===e(t).css("visibility"))},e.extend(e.expr.pseudos,{focusable:function(t){return e.ui.focusable(t,null!=e.attr(t,"tabindex"))}});e.ui.focusable,e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout(function(){var i=t.data("ui-form-reset-instances");e.each(i,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=e(this.element.prop("form")),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};e.escapeSelector||(e.escapeSelector=function(e){return CSS.escape(e+"")}),e.fn.even&&e.fn.odd||e.fn.extend({even:function(){return this.filter(function(e){return e%2==0})},odd:function(){return this.filter(function(e){return e%2==1})}});var x;e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},e.fn.labels=function(){var e,t,i,n,o;return this.length?this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(n=this.eq(0).parents("label"),(i=this.attr("id"))&&(o=(e=this.eq(0).parents().last()).add(e.length?e.siblings():this.siblings()),t="label[for='"+CSS.escape(i)+"']",n=n.add(o.find(t).addBack(t))),this.pushStack(n)):this.pushStack([])},e.fn.scrollParent=function(t){var i=this.css("position"),n="absolute"===i,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=e(this);return(!n||"static"!==t.css("position"))&&o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&r.length?r:e(this[0].ownerDocument||document)},e.extend(e.expr.pseudos,{tabbable:function(t){var i=e.attr(t,"tabindex"),n=null!=i;return(!n||i>=0)&&e.ui.focusable(t,n)}}),e.fn.extend({uniqueId:(x=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++x)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.widget("ui.accordion",{version:"1.14.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:function(e){return e.find("> li > :first-child").add(e.find("> :not(li)").filter(function(e){return e%2==0}))},heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t,i,n=this.options.icons;n&&(t=e("<span>"),this._addClass(t,"ui-accordion-header-icon","ui-icon "+n.header),t.prependTo(this.headers),i=this.active.children(".ui-accordion-header-icon"),this._removeClass(i,n.header)._addClass(i,null,n.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){"active"!==e?("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||!1!==this.options.active||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons())):this._activate(t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,o=this.headers.index(t.target),r=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:r=this.headers[(o+1)%n];break;case i.LEFT:case i.UP:r=this.headers[(o-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:r=this.headers[0];break;case i.END:r=this.headers[n-1]}r&&(e(t.target).attr("tabIndex",-1),e(r).attr("tabIndex",0),e(r).trigger("focus"),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().trigger("focus")},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=e()):!1===t.active?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;"function"==typeof this.options.header?this.headers=this.options.header(this.element):this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,i=this.options,n=i.heightStyle,o=this.element.parent();this.active=this._findActive(i.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var t=e(this),i=t.uniqueId().attr("id"),n=t.next(),o=n.uniqueId().attr("id");t.attr("aria-controls",o),n.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===n?(t=o.height(),this.element.siblings(":visible").each(function(){var i=e(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===n&&(t=0,this.headers.next().each(function(){var i=e(this).is(":visible");i||e(this).show(),t=Math.max(t,e(this).css("height","").height()),i||e(this).hide()}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i,n,o=this.options,r=this.active,s=e(t.currentTarget),a=s[0]===r[0],l=a&&o.collapsible,c=l?e():s.next(),d=r.next(),u={oldHeader:r,oldPanel:d,newHeader:l?e():s,newPanel:c};t.preventDefault(),a&&!o.collapsible||!1===this._trigger("beforeActivate",t,u)||(o.active=!l&&this.headers.index(s),this.active=a?e():s,this._toggle(u),this._removeClass(r,"ui-accordion-header-active","ui-state-active"),o.icons&&(i=r.children(".ui-accordion-header-icon"),this._removeClass(i,null,o.icons.activeHeader)._addClass(i,null,o.icons.header)),a||(this._removeClass(s,"ui-accordion-header-collapsed")._addClass(s,"ui-accordion-header-active","ui-state-active"),o.icons&&(n=s.children(".ui-accordion-header-icon"),this._removeClass(n,null,o.icons.header)._addClass(n,null,o.icons.activeHeader)),this._addClass(s.next(),"ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-hidden":"true"}),n.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&n.length?n.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===parseInt(e(this).attr("tabIndex"),10)}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,i){var n,o,r,s=this,a=0,l=e.css("box-sizing"),c=e.length&&(!t.length||e.index()<t.index()),d=this.options.animate||{},u=c&&d.down||d,h=function(){s._toggleComplete(i)};return"number"==typeof u&&(r=u),"string"==typeof u&&(o=u),o=o||u.easing||d.easing,r=r||u.duration||d.duration,t.length?e.length?(n=e.show().outerHeight(),t.animate(this.hideProps,{duration:r,easing:o,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(this.showProps,{duration:r,easing:o,complete:h,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?"content-box"===l&&(a+=i.now):"content"!==s.options.heightStyle&&(i.now=Math.round(n-t.outerHeight()-a),a=0)}})):t.animate(this.hideProps,r,o,h):e.animate(this.showProps,r,o,h)},_toggleComplete:function(e){var t=e.oldPanel,i=t.prev();this._removeClass(t,"ui-accordion-content-active"),this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed"),this._trigger("activate",null,e)}}),e.widget("ui.menu",{version:"1.14.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.lastMousePosition={x:null,y:null},this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault(),this._activateItem(e)},"click .ui-menu-item":function(t){var i=e(t.target),n=e(this.document[0].activeElement);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&n.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this._menuItems().first();t||this.focus(e,i)},blur:function(t){this._delay(function(){!e.contains(this.element[0],this.document[0].activeElement)&&this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e,!0),this.mouseHandled=!1}})},_activateItem:function(t){if(!this.previousFilter&&(t.clientX!==this.lastMousePosition.x||t.clientY!==this.lastMousePosition.y)){this.lastMousePosition={x:t.clientX,y:t.clientY};var i=e(t.target).closest(".ui-menu-item"),n=e(t.currentTarget);i[0]===n[0]&&(n.is(".ui-state-active")||(this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,n)))}},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each(function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var i,n,o,r,s=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=!1,n=this.previousFilter||"",r=!1,o=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),o===n?r=!0:o=n+o,i=this._filterMenuItems(o),(i=r&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(o=String.fromCharCode(t.keyCode),i=this._filterMenuItems(o)),i.length?(this.focus(t,i),this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}s&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i,n,o,r=this,s=this.options.icons.submenu,a=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),i=a.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.prev(),n=e("<span>").data("ui-menu-submenu-caret",!0);r._addClass(n,"ui-menu-icon","ui-icon "+s),i.attr("aria-haspopup","true").prepend(n),t.attr("aria-labelledby",i.attr("id"))}),this._addClass(i,"ui-menu","ui-widget ui-widget-content ui-front"),(t=a.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var t=e(this);r._isDivider(t)&&r._addClass(t,"ui-menu-divider","ui-widget-content")}),o=(n=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(n,"ui-menu-item")._addClass(o,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var i,n,o;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),o=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(o,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,o,r,s,a;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-i-n,r=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=t.outerHeight(),o<0?this.activeMenu.scrollTop(r+o):o+a>s&&this.activeMenu.scrollTop(r+o-s+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this._removeClass(n.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=n},i?0:this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this._menuItems(this.active.children(".ui-menu")).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_menuItems:function(e){return(e||this.element).find(this.options.items).filter(".ui-menu-item")},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").last():this.active[e+"All"](".ui-menu-item").first()),n&&n.length&&this.active||(n=this._menuItems(this.activeMenu)[t]()),this.focus(i,n)},nextPage:function(t){var i,n,o;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.innerHeight(),0===e.fn.jquery.indexOf("3.2.")&&(o+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.nextAll(".ui-menu-item").each(function(){return(i=e(this)).offset().top-n-o<0}),this.focus(t,i)):this.focus(t,this._menuItems(this.activeMenu)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var i,n,o;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.innerHeight(),0===e.fn.jquery.indexOf("3.2.")&&(o+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.prevAll(".ui-menu-item").each(function(){return(i=e(this)).offset().top-n+o>0}),this.focus(t,i)):this.focus(t,this._menuItems(this.activeMenu).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return n.test(String.prototype.trim.call(e(this).children(".ui-menu-item-wrapper").text()))})}});e.widget("ui.autocomplete",{version:"1.14.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var t,i,n,o=this.element[0].nodeName.toLowerCase(),r="textarea"===o,s="input"===o;this.isMultiLine=r||!s&&"true"===this.element.prop("contentEditable"),this.valueMethod=this.element[r||s?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,n=!0,void(i=!0);t=!1,n=!1,i=!1;var r=e.ui.keyCode;switch(o.keyCode){case r.PAGE_UP:t=!0,this._move("previousPage",o);break;case r.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case r.UP:t=!0,this._keyEvent("previous",o);break;case r.DOWN:t=!0,this._keyEvent("next",o);break;case r.ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case r.TAB:this.menu.active&&this.menu.select(o);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(o),o.preventDefault());break;default:i=!0,this._searchTimeout(o)}},keypress:function(n){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||n.preventDefault());if(!i){var o=e.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:this._move("previousPage",n);break;case o.PAGE_DOWN:this._move("nextPage",n);break;case o.UP:this._keyEvent("previous",n);break;case o.DOWN:this._keyEvent("next",n)}}},input:function(e){if(n)return n=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault()},menufocus:function(t,i){var n,o;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});o=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:o})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(o.value),(n=i.item.attr("aria-label")||o.value)&&String.prototype.trim.call(n).length&&(clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(e("<div>").text(n))},100))},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.trigger("focus"),this.previous=n),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var i=this.menu.element[0];return t.target===this.element[0]||t.target===i||e.contains(i,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;Array.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,o){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),n=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;t&&(!t||i||n)||(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=++this.requestIndex;return function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}.bind(this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<div>").text(i.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(e("<div>").text(i))},100))}});e.ui.autocomplete;var A=/ui-corner-([a-z]){2,6}/g;e.widget("ui.controlgroup",{version:"1.14.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var t=this,i=[];e.each(this.options.items,function(n,o){var r,s={};if(o)return"controlgroupLabel"===n?((r=t.element.find(o)).each(function(){var t=e(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),t._addClass(r,null,"ui-widget ui-widget-content ui-state-default"),void(i=i.concat(r.get()))):void(e.fn[n]&&(s=t["_"+n+"Options"]?t["_"+n+"Options"]("middle"):{classes:{}},t.element.find(o).each(function(){var o=e(this),r=o[n]("instance"),a=e.widget.extend({},s);if("button"!==n||!o.parent(".ui-spinner").length){r||(r=o[n]()[n]("instance")),r&&(a.classes=t._resolveClassesValues(a.classes,r)),o[n](a);var l=o[n]("widget");e.data(l[0],"ui-controlgroup-data",r||o[n]("instance")),i.push(l[0])}})))}),this.childWidgets=e(e.uniqueSort(i)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var i=e(this).data("ui-controlgroup-data");i&&i[t]&&i[t]()})},_updateCornerClass:function(e,t){var i=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(e,null,i)},_buildSimpleOptions:function(e,t){var i="vertical"===this.options.direction,n={classes:{}};return n.classes[t]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[e],n},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(t,i){var n={};return e.each(t,function(e){var o=i.options.classes[e]||"";o=String.prototype.trim.call(o.replace(A,"")),n[e]=(o+" "+t[e]).replace(/\s+/g," ")}),n},_setOption:function(e,t){"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"!==e?this.refresh():this._callChildMethod(t?"disable":"enable")},refresh:function(){var t,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),t=this.childWidgets,this.options.onlyVisible&&(t=t.filter(":visible")),t.length&&(e.each(["first","last"],function(e,n){var o=t[n]().data("ui-controlgroup-data");if(o&&i["_"+o.widgetName+"Options"]){var r=i["_"+o.widgetName+"Options"](1===t.length?"only":n);r.classes=i._resolveClassesValues(r.classes,o),o.element[o.widgetName](r)}else i._updateCornerClass(t[n](),n)}),this._callChildMethod("refresh"))}});e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.14.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,i,n,o=this._super()||{};return this._readType(),i=this.element.labels(),this.label=e(i[i.length-1]),this.label.length||e.error("No label found for checkboxradio widget"),this.originalLabel="",(n=this.label.contents().not(this.element[0])).length&&(this.originalLabel+=n.clone().wrapAll("<div></div>").parent().html()),this.originalLabel&&(o.label=this.originalLabel),null!=(t=this.element[0].disabled)&&(o.disabled=t),o},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,i="input[name='"+CSS.escape(t)+"']";return t?(this.form.length?e(this.form[0].elements).filter(i):e(i).filter(function(){return 0===e(e(this).prop("form")).length})).not(this.element):e([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each(function(){var t=e(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,t){if("label"!==e||t){if(this._super(e,t),"disabled"===e)return this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t);this.refresh()}},_updateIcon:function(t){var i="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=e("<span>"),this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(i+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):i+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",i),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),this.iconSpace&&(e=e.not(this.iconSpace[0])),e.remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),t!==this.options.disabled&&this._setOptions({disabled:t})}}]);e.ui.checkboxradio;e.widget("ui.button",{version:"1.14.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),null!=(e=this.element[0].disabled)&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===e.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,i){var n="iconPosition"!==t,o=n?this.options.iconPosition:i,r="top"===o||"bottom"===o;this.icon?n&&this._removeClass(this.icon,null,this.options.icon):(this.icon=e("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),n&&this._addClass(this.icon,null,i),this._attachIcon(o),r?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(o))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=void 0===e.showLabel?this.options.showLabel:e.showLabel,i=void 0===e.icon?this.options.icon:e.icon;t||i||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),this.element[0].disabled=t,t&&this.element.trigger("blur"))},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),!0===e.uiBackCompat&&(e.widget("ui.button",e.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){"text"!==e?("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",t)}}),e.fn.button=function(t){return function(i){var n="string"==typeof i,o=Array.prototype.slice.call(arguments,1),r=this;return n?this.length||"instance"!==i?this.each(function(){var t,n=e(this).attr("type"),s="checkbox"!==n&&"radio"!==n?"button":"checkboxradio",a=e.data(this,"ui-"+s);return"instance"===i?(r=a,!1):a?"function"!=typeof a[i]||"_"===i.charAt(0)?e.error("no such method '"+i+"' for button widget instance"):(t=a[i].apply(a,o))!==a&&void 0!==t?(r=t&&t.jquery?r.pushStack(t.get()):t,!1):void 0:e.error("cannot call methods on button prior to initialization; attempted to call method '"+i+"'")}):r=void 0:(o.length&&(i=e.widget.extend.apply(null,[i].concat(o))),this.each(function(){var n=e(this).attr("type"),o="checkbox"!==n&&"radio"!==n?"button":"checkboxradio",r=e.data(this,"ui-"+o);if(r)r.option(i||{}),r._init&&r._init();else{if("button"===o)return void t.call(e(this),i);e(this).checkboxradio(e.extend({icon:!1},i))}})),r}}(e.fn.button),e.fn.buttonset=function(){return e.ui.controlgroup||e.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))});var E;e.ui.button;function T(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",selectMonthLabel:"Select month",selectYearLabel:"Select year"},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,onUpdateDatepicker:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=k(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function k(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",i,function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",i,D)}function D(){e.datepicker._isDisabledDatepicker(E.inline?E.dpDiv.parent()[0]:E.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function M(t,i){for(var n in e.extend(t,i),i)null==i[n]&&(t[n]=i[n]);return t}e.extend(e.ui,{datepicker:{version:"1.14.1"}}),e.extend(T.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return M(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var n,o,r;o="div"===(n=t.nodeName.toLowerCase())||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(r=this._newInst(e(t),o)).settings=e.extend({},i||{}),"input"===n?this._connectDatepicker(t,r):o&&this._inlineDatepicker(t,r)},_newInst:function(t,i){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?k(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]),i.trigger=e([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var n,o,r,s=this._get(i,"appendText"),a=this._get(i,"isRTL");i.append&&i.append.remove(),s&&(i.append=e("<span>").addClass(this._appendClass).text(s),t[a?"before":"after"](i.append)),t.off("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),"focus"!==(n=this._get(i,"showOn"))&&"both"!==n||t.on("focus",this._showDatepicker),"button"!==n&&"both"!==n||(o=this._get(i,"buttonText"),r=this._get(i,"buttonImage"),this._get(i,"buttonImageOnly")?i.trigger=e("<img>").addClass(this._triggerClass).attr({src:r,alt:o,title:o}):(i.trigger=e("<button type='button'>").addClass(this._triggerClass),r?i.trigger.html(e("<img>").attr({src:r,alt:o,title:o})):i.trigger.text(o)),t[a?"before":"after"](i.trigger),i.trigger.on("click",function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,o,r=new Date(2009,11,20),s=this._get(e,"dateFormat");s.match(/[DM]/)&&(t=function(e){for(i=0,n=0,o=0;o<e.length;o++)e[o].length>i&&(i=e[o].length,n=o);return n},r.setMonth(t(this._get(e,s.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(t(this._get(e,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),e.input.attr("size",this._formatDate(e,r).length)}},_inlineDatepicker:function(t,i){var n=e(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,n,o,r){var s,a,l,c,d,u=this._dialogInst;return u||(this.uuid+=1,s="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),e("body").append(this._dialogInput),(u=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},e.data(this._dialogInput[0],"datepicker",u)),M(u.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(u,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(a=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[a/2-100+c,l/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),u.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",u),this},_destroyDatepicker:function(t){var i,n=e(t),o=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(o.append.remove(),o.trigger.remove(),n.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||n.removeClass(this.markerClassName).empty(),e.datepicker._hideDatepicker(),E===o&&(E=null,this._curInst=null))},_enableDatepicker:function(t){var i,n,o=e(t),r=e.data(t,"datepicker");o.hasClass(this.markerClassName)&&("input"===(i=t.nodeName.toLowerCase())?(t.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||((n=o.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,n,o=e(t),r=e.data(t,"datepicker");o.hasClass(this.markerClassName)&&("input"===(i=t.nodeName.toLowerCase())?(t.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||((n=o.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,n){var o,r,s,a,l=this._getInst(t);if(2===arguments.length&&"string"==typeof i)return"defaults"===i?e.extend({},e.datepicker._defaults):l?"all"===i?e.extend({},l.settings):this._get(l,i):null;o=i||{},"string"==typeof i&&((o={})[i]=n),l&&(this._curInst===l&&this._hideDatepicker(),r=this._getDateDatepicker(t,!0),s=this._getMinMaxDate(l,"min"),a=this._getMinMaxDate(l,"max"),M(l.settings,o),null!==s&&void 0!==o.dateFormat&&void 0===o.minDate&&(l.settings.minDate=this._formatDate(l,s)),null!==a&&void 0!==o.dateFormat&&void 0===o.maxDate&&(l.settings.maxDate=this._formatDate(l,a)),"disabled"in o&&(o.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,r),this._updateAlternate(l),this._updateDatepicker(l))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,n,o,r=e.datepicker._getInst(t.target),s=!0,a=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),s=!1;break;case 13:return(o=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",r.dpDiv))[0]&&e.datepicker._selectDay(t.target,r.selectedMonth,r.selectedYear,o[0]),(i=e.datepicker._get(r,"onSelect"))?(n=e.datepicker._formatDate(r),i.apply(r.input?r.input[0]:null,[n,r])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(r,"stepBigMonths"):-e.datepicker._get(r,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(r,"stepBigMonths"):+e.datepicker._get(r,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),s=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),s=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?1:-1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(r,"stepBigMonths"):-e.datepicker._get(r,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),s=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?-1:1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(r,"stepBigMonths"):+e.datepicker._get(r,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),s=t.ctrlKey||t.metaKey;break;default:s=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):s=!1;s&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,n,o=e.datepicker._getInst(t.target);if(e.datepicker._get(o,"constrainInput"))return i=e.datepicker._possibleChars(e.datepicker._get(o,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||n<" "||!i||i.indexOf(n)>-1},_doKeyUp:function(t){var i=e.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{e.datepicker.parseDate(e.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,e.datepicker._getFormatConfig(i))&&(e.datepicker._setDateFromField(i),e.datepicker._updateAlternate(i),e.datepicker._updateDatepicker(i))}catch(e){}return!0},_showDatepicker:function(t){var i,n,o,r,s,a,l;("input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)||(i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),!1!==(o=(n=e.datepicker._get(i,"beforeShow"))?n.apply(t,[t,i]):{})&&(M(i.settings,o),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),r=!1,e(t).parents().each(function(){return!(r|="fixed"===e(this).css("position"))}),s={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),s=e.datepicker._checkOffset(i,s,r),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":r?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),i.inline||(a=e.datepicker._get(i,"showAnim"),l=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",function(e){for(var t,i;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[a]?i.dpDiv.show(a,e.datepicker._get(i,"showOptions"),l):i.dpDiv[a||"show"](a?l:null),e.datepicker._shouldFocusInput(i)&&i.input.trigger("focus"),e.datepicker._curInst=i)))},_updateDatepicker:function(t){this.maxRows=4,E=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,n=this._getNumberOfMonths(t),o=n[1],r=t.dpDiv.find("."+this._dayOverClass+" a"),s=e.datepicker._get(t,"onUpdateDatepicker");r.length>0&&D.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&t.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",17*o+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year").first().replaceWith(t.yearshtml),i=t.yearshtml=null},0)),s&&s.apply(t.input?t.input[0]:null,[t])},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")},_checkOffset:function(t,i,n){var o=t.dpDiv.outerWidth(),r=t.dpDiv.outerHeight(),s=t.input?t.input.outerWidth():0,a=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?o-s:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+a?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+o>l&&l>o?Math.abs(i.left+o-l):0),i.top-=Math.min(i.top,i.top+r>c&&c>r?Math.abs(r+a):0),i},_findPos:function(t){for(var i,n=this._getInst(t),o=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.pseudos.hidden(t));)t=t[o?"previousSibling":"nextSibling"];return[(i=e(t).offset()).left,i.top]},_hideDatepicker:function(t){var i,n,o,r,s=this._curInst;!s||t&&s!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(s,"showAnim"),n=this._get(s,"duration"),o=function(){e.datepicker._tidyDialog(s)},e.effects&&e.effects.effect[i]?s.dpDiv.hide(i,e.datepicker._get(s,"showOptions"),n,o):s.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,o),i||o(),this._datepickerShowing=!1,(r=this._get(s,"onClose"))&&r.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),n=e.datepicker._getInst(i[0]);(i[0].id===e.datepicker._mainDivId||0!==i.parents("#"+e.datepicker._mainDivId).length||i.hasClass(e.datepicker.markerClassName)||i.closest("."+e.datepicker._triggerClass).length||!e.datepicker._datepickerShowing||e.datepicker._inDialog&&e.blockUI)&&(!i.hasClass(e.datepicker.markerClassName)||e.datepicker._curInst===n)||e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var o=e(t),r=this._getInst(o[0]);this._isDisabledDatepicker(o[0])||(this._adjustInstDate(r,i,n),this._updateDatepicker(r))},_gotoToday:function(t){var i,n=e(t),o=this._getInst(n[0]);this._get(o,"gotoCurrent")&&o.currentDay?(o.selectedDay=o.currentDay,o.drawMonth=o.selectedMonth=o.currentMonth,o.drawYear=o.selectedYear=o.currentYear):(i=new Date,o.selectedDay=i.getDate(),o.drawMonth=o.selectedMonth=i.getMonth(),o.drawYear=o.selectedYear=i.getFullYear()),this._notifyChange(o),this._adjustDate(n)},_selectMonthYear:function(t,i,n){var o=e(t),r=this._getInst(o[0]);r["selected"+("M"===n?"Month":"Year")]=r["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(o)},_selectDay:function(t,i,n,o){var r,s=e(t);e(o).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||((r=this._getInst(s[0])).selectedDay=r.currentDay=parseInt(e("a",o).attr("data-date")),r.selectedMonth=r.currentMonth=i,r.selectedYear=r.currentYear=n,this._selectDate(t,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,o=e(t),r=this._getInst(o[0]);i=null!=i?i:this._formatDate(r),r.input&&r.input.val(i),this._updateAlternate(r),(n=this._get(r,"onSelect"))?n.apply(r.input?r.input[0]:null,[i,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var i,n,o,r=this._get(t,"altField");r&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),o=this.formatDate(i,n,this._getFormatConfig(t)),e(document).find(r).val(o))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,n){if(null==t||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?i.toString():i+""))return null;var o,r,s,a,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),u=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,h=(n?n.dayNames:null)||this._defaults.dayNames,p=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,g=(n?n.monthNames:null)||this._defaults.monthNames,f=-1,m=-1,v=-1,b=-1,y=!1,w=function(e){var i=o+1<t.length&&t.charAt(o+1)===e;return i&&o++,i},C=function(e){var t=w(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,o=new RegExp("^\\d{"+("y"===e?n:1)+","+n+"}"),r=i.substring(l).match(o);if(!r)throw"Missing number at position "+l;return l+=r[0].length,parseInt(r[0],10)},_=function(t,n,o){var r=-1,s=e.map(w(t)?o:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(s,function(e,t){var n=t[1];if(i.substr(l,n.length).toLowerCase()===n.toLowerCase())return r=t[0],l+=n.length,!1}),-1!==r)return r+1;throw"Unknown name at position "+l},S=function(){if(i.charAt(l)!==t.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;o<t.length;o++)if(y)"'"!==t.charAt(o)||w("'")?S():y=!1;else switch(t.charAt(o)){case"d":v=C("d");break;case"D":_("D",u,h);break;case"o":b=C("o");break;case"m":m=C("m");break;case"M":m=_("M",p,g);break;case"y":f=C("y");break;case"@":f=(a=new Date(C("@"))).getFullYear(),m=a.getMonth()+1,v=a.getDate();break;case"!":f=(a=new Date((C("!")-this._ticksTo1970)/1e4)).getFullYear(),m=a.getMonth()+1,v=a.getDate();break;case"'":w("'")?S():y=!0;break;default:S()}if(l<i.length&&(s=i.substr(l),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(-1===f?f=(new Date).getFullYear():f<100&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(f<=d?0:-100)),b>-1)for(m=1,v=b;;){if(v<=(r=this._getDaysInMonth(f,m-1)))break;m++,v-=r}if((a=this._daylightSavingAdjust(new Date(f,m-1,v))).getFullYear()!==f||a.getMonth()+1!==m||a.getDate()!==v)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var n,o=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,r=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=n+1<e.length&&e.charAt(n+1)===t;return i&&n++,i},c=function(e,t,i){var n=""+t;if(l(e))for(;n.length<i;)n="0"+n;return n},d=function(e,t,i,n){return l(e)?n[t]:i[t]},u="",h=!1;if(t)for(n=0;n<e.length;n++)if(h)"'"!==e.charAt(n)||l("'")?u+=e.charAt(n):h=!1;else switch(e.charAt(n)){case"d":u+=c("d",t.getDate(),2);break;case"D":u+=d("D",t.getDay(),o,r);break;case"o":u+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=c("m",t.getMonth()+1,2);break;case"M":u+=d("M",t.getMonth(),s,a);break;case"y":u+=l("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":h=!0;break;default:u+=e.charAt(n)}return u},_possibleChars:function(e){var t,i="",n=!1,o=function(i){var n=t+1<e.length&&e.charAt(t+1)===i;return n&&t++,n};for(t=0;t<e.length;t++)if(n)"'"!==e.charAt(t)||o("'")?i+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":o("'")?i+="'":n=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,o=this._getDefaultDate(e),r=o,s=this._getFormatConfig(e);try{r=this.parseDate(i,n,s)||o}catch(e){n=t?"":n}e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),e.currentDay=n?r.getDate():0,e.currentMonth=n?r.getMonth():0,e.currentYear=n?r.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var o=null==i||""===i?n:"string"==typeof i?function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(e){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,o=n.getFullYear(),r=n.getMonth(),s=n.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(i);l;){switch(l[2]||"d"){case"d":case"D":s+=parseInt(l[1],10);break;case"w":case"W":s+=7*parseInt(l[1],10);break;case"m":case"M":r+=parseInt(l[1],10),s=Math.min(s,e.datepicker._getDaysInMonth(o,r));break;case"y":case"Y":o+=parseInt(l[1],10),s=Math.min(s,e.datepicker._getDaysInMonth(o,r))}l=a.exec(i)}return new Date(o,r,s)}(i):"number"==typeof i?isNaN(i)?n:function(e){var t=new Date;return t.setDate(t.getDate()+e),t}(i):new Date(i.getTime());return(o=o&&"Invalid Date"===o.toString()?n:o)&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,o=e.selectedMonth,r=e.selectedYear,s=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=s.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=s.getMonth(),e.drawYear=e.selectedYear=e.currentYear=s.getFullYear(),o===e.selectedMonth&&r===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){return e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var i,n,o,r,s,a,l,c,d,u,h,p,g,f,m,v,b,y,w,C,_,S,x,A,E,T,k,D,M,P,R,I,O,N,L,F,$,G,B,H=new Date,z=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),W=this._get(t,"isRTL"),V=this._get(t,"showButtonPanel"),j=this._get(t,"hideIfNoPrevNext"),U=this._get(t,"navigationAsDateFormat"),Y=this._getNumberOfMonths(t),q=this._get(t,"showCurrentAtPos"),K=this._get(t,"stepMonths"),X=1!==Y[0]||1!==Y[1],Z=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(t,"min"),Q=this._getMinMaxDate(t,"max"),ee=t.drawMonth-q,te=t.drawYear;if(ee<0&&(ee+=12,te--),Q)for(i=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-Y[0]*Y[1]+1,Q.getDate())),i=J&&i<J?J:i;this._daylightSavingAdjust(new Date(te,ee,1))>i;)--ee<0&&(ee=11,te--);for(t.drawMonth=ee,t.drawYear=te,n=this._get(t,"prevText"),n=U?this.formatDate(n,this._daylightSavingAdjust(new Date(te,ee-K,1)),this._getFormatConfig(t)):n,o=this._canAdjustMonth(t,-1,te,ee)?e("<a>").attr({class:"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:n}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(W?"e":"w")).text(n))[0].outerHTML:j?"":e("<a>").attr({class:"ui-datepicker-prev ui-corner-all ui-state-disabled",title:n}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(W?"e":"w")).text(n))[0].outerHTML,r=this._get(t,"nextText"),r=U?this.formatDate(r,this._daylightSavingAdjust(new Date(te,ee+K,1)),this._getFormatConfig(t)):r,s=this._canAdjustMonth(t,1,te,ee)?e("<a>").attr({class:"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:r}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(W?"w":"e")).text(r))[0].outerHTML:j?"":e("<a>").attr({class:"ui-datepicker-next ui-corner-all ui-state-disabled",title:r}).append(e("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+(W?"w":"e")).text(r))[0].outerHTML,a=this._get(t,"currentText"),l=this._get(t,"gotoCurrent")&&t.currentDay?Z:z,a=U?this.formatDate(a,l,this._getFormatConfig(t)):a,c="",t.inline||(c=e("<button>").attr({type:"button",class:"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide","data-event":"click"}).text(this._get(t,"closeText"))[0].outerHTML),d="",V&&(d=e("<div class='ui-datepicker-buttonpane ui-widget-content'>").append(W?c:"").append(this._isInRange(t,l)?e("<button>").attr({type:"button",class:"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(a):"").append(W?"":c)[0].outerHTML),u=parseInt(this._get(t,"firstDay"),10),u=isNaN(u)?0:u,h=this._get(t,"showWeek"),p=this._get(t,"dayNames"),g=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),v=this._get(t,"beforeShowDay"),b=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),w=this._getDefaultDate(t),C="",S=0;S<Y[0];S++){for(x="",this.maxRows=4,A=0;A<Y[1];A++){if(E=this._daylightSavingAdjust(new Date(te,ee,t.selectedDay)),T=" ui-corner-all",k="",X){if(k+="<div class='ui-datepicker-group",Y[1]>1)switch(A){case 0:k+=" ui-datepicker-group-first",T=" ui-corner-"+(W?"right":"left");break;case Y[1]-1:k+=" ui-datepicker-group-last",T=" ui-corner-"+(W?"left":"right");break;default:k+=" ui-datepicker-group-middle",T=""}k+="'>"}for(k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===S?W?s:o:"")+(/all|right/.test(T)&&0===S?W?o:s:"")+this._generateMonthYearHeader(t,ee,te,J,Q,S>0||A>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",D=h?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",_=0;_<7;_++)D+="<th scope='col'"+((_+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+p[M=(_+u)%7]+"'>"+g[M]+"</span></th>";for(k+=D+"</tr></thead><tbody>",P=this._getDaysInMonth(te,ee),te===t.selectedYear&&ee===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,P)),R=(this._getFirstDayOfMonth(te,ee)-u+7)%7,I=Math.ceil((R+P)/7),O=X&&this.maxRows>I?this.maxRows:I,this.maxRows=O,N=this._daylightSavingAdjust(new Date(te,ee,1-R)),L=0;L<O;L++){for(k+="<tr>",F=h?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(N)+"</td>":"",_=0;_<7;_++)$=v?v.apply(t.input?t.input[0]:null,[N]):[!0,""],B=(G=N.getMonth()!==ee)&&!y||!$[0]||J&&N<J||Q&&N>Q,F+="<td class='"+((_+u+6)%7>=5?" ui-datepicker-week-end":"")+(G?" ui-datepicker-other-month":"")+(N.getTime()===E.getTime()&&ee===t.selectedMonth&&t._keyEvent||w.getTime()===N.getTime()&&w.getTime()===E.getTime()?" "+this._dayOverClass:"")+(B?" "+this._unselectableClass+" ui-state-disabled":"")+(G&&!b?"":" "+$[1]+(N.getTime()===Z.getTime()?" "+this._currentClass:"")+(N.getTime()===z.getTime()?" ui-datepicker-today":""))+"'"+(G&&!b||!$[2]?"":" title='"+$[2].replace(/'/g,"&#39;")+"'")+(B?"":" data-handler='selectDay' data-event='click' data-month='"+N.getMonth()+"' data-year='"+N.getFullYear()+"'")+">"+(G&&!b?"&#xa0;":B?"<span class='ui-state-default'>"+N.getDate()+"</span>":"<a class='ui-state-default"+(N.getTime()===z.getTime()?" ui-state-highlight":"")+(N.getTime()===Z.getTime()?" ui-state-active":"")+(G?" ui-priority-secondary":"")+"' href='#' aria-current='"+(N.getTime()===Z.getTime()?"true":"false")+"' data-date='"+N.getDate()+"'>"+N.getDate()+"</a>")+"</td>",N.setDate(N.getDate()+1),N=this._daylightSavingAdjust(N);k+=F+"</tr>"}++ee>11&&(ee=0,te++),x+=k+="</tbody></table>"+(X?"</div>"+(Y[0]>0&&A===Y[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}C+=x}return C+=d,t._keyEvent=!1,C},_generateMonthYearHeader:function(e,t,i,n,o,r,s,a){var l,c,d,u,h,p,g,f,m=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),b=this._get(e,"showMonthAfterYear"),y=this._get(e,"selectMonthLabel"),w=this._get(e,"selectYearLabel"),C="<div class='ui-datepicker-title'>",_="";if(r||!m)_+="<span class='ui-datepicker-month'>"+s[t]+"</span>";else{for(l=n&&n.getFullYear()===i,c=o&&o.getFullYear()===i,_+="<select class='ui-datepicker-month' aria-label='"+y+"' data-handler='selectMonth' data-event='change'>",d=0;d<12;d++)(!l||d>=n.getMonth())&&(!c||d<=o.getMonth())&&(_+="<option value='"+d+"'"+(d===t?" selected='selected'":"")+">"+a[d]+"</option>");_+="</select>"}if(b||(C+=_+(!r&&m&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",r||!v)C+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},g=p(u[0]),f=Math.max(g,p(u[1]||"")),g=n?Math.max(g,n.getFullYear()):g,f=o?Math.min(f,o.getFullYear()):f,e.yearshtml+="<select class='ui-datepicker-year' aria-label='"+w+"' data-handler='selectYear' data-event='change'>";g<=f;g++)e.yearshtml+="<option value='"+g+"'"+(g===i?" selected='selected'":"")+">"+g+"</option>";e.yearshtml+="</select>",C+=e.yearshtml,e.yearshtml=null}return C+=this._get(e,"yearSuffix"),b&&(C+=(!r&&m&&v?"":"&#xa0;")+_),C+="</div>"},_adjustInstDate:function(e,t,i){var n=e.selectedYear+("Y"===i?t:0),o=e.selectedMonth+("M"===i?t:0),r=Math.min(e.selectedDay,this._getDaysInMonth(n,o))+("D"===i?t:0),s=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,o,r)));e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),o=i&&t<i?i:t;return n&&o>n?n:o},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var o=this._getNumberOfMonths(e),r=this._daylightSavingAdjust(new Date(i,n+(t<0?t:o[0]*o[1]),1));return t<0&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(e,r)},_isInRange:function(e,t){var i,n,o=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),s=null,a=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),s=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(s+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!o||t.getTime()>=o.getTime())&&(!r||t.getTime()<=r.getTime())&&(!s||t.getFullYear()>=s)&&(!a||t.getFullYear()<=a)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var o=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),o,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).on("mousedown",e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new T,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.14.1";e.datepicker;var P=!1;e(document).on("mouseup",function(){P=!1});e.widget("ui.mouse",{version:"1.14.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!P){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,n=1===t.which,o="string"==typeof this.options.cancel&&e(t.target).closest(this.options.cancel).length;return!(n&&!o&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),P=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved&&!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e);return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,P=!1,t.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.ui.plugin={add:function(t,i,n){var o,r=e.ui[t].prototype;for(o in n)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([i,n[o]])},call:function(e,t,i,n){var o,r=e.plugins[t];if(r&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)e.options[r[o][0]]&&r[o][1].apply(e.element,i)}};e.widget("ui.draggable",e.ui.mouse,{version:"1.14.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0].activeElement;e(t.target).closest(i).length||e(i).trigger("blur")},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||"function"==typeof this.options.revert&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",t)&&i._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var i=this.options,n="function"==typeof i.helper,o=n?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),Array.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options,r=this.document[0];this.relativeContainer=null,o.containment?"window"!==o.containment?"document"!==o.containment?o.containment.constructor!==Array?("parent"===o.containment&&(o.containment=this.helper[0].parentNode),(n=(i=e(o.containment))[0])&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i)):this.containment=o.containment:this.containment=[0,0,e(r).width()-this.helperProportions.width-this.margins.left,(e(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,o,r,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,n){var o=e.extend({},i,{item:n.element});n.sortables=[],e(n.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i,n){var o=e.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,e.each(n.sortables,function(){var e=this;e.isOver?(e.isOver=0,n.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,o))})},drag:function(t,i,n){e.each(n.sortables,function(){var o=!1,r=this;r.positionAbs=n.positionAbs,r.helperProportions=n.helperProportions,r.offset.click=n.offset.click,r._intersectsWith(r.containerCache)&&(o=!0,e.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&e.contains(r.element[0],this.element[0])&&(o=!1),o})),o?(r.isOver||(r.isOver=1,n._parent=i.helper.parent(),r.currentItem=i.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return i.helper[0]},t.target=r.currentItem[0],r._mouseCapture(t,!0),r._mouseStart(t,!0,!0),r.offset.click.top=n.offset.click.top,r.offset.click.left=n.offset.click.left,r.offset.parent.left-=n.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=n.offset.parent.top-r.offset.parent.top,n._trigger("toSortable",t),n.dropped=r.element,e.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,r.fromOutside=n),r.currentItem&&(r._mouseDrag(t),i.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",t,r._uiHash(r)),r._mouseStop(t,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(t),i.position=n._generatePosition(t,!0),n._trigger("fromSortable",t),n.dropped=!1,e.each(n.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,n){var o=e("body"),r=n.options;o.css("cursor")&&(r._cursor=o.css("cursor")),o.css("cursor",r.cursor)},stop:function(t,i,n){var o=n.options;o._cursor&&e("body").css("cursor",o._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,n){var o=e(i.helper),r=n.options;o.css("opacity")&&(r._opacity=o.css("opacity")),o.css("opacity",r.opacity)},stop:function(t,i,n){var o=n.options;o._opacity&&e(i.helper).css("opacity",o._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,n){var o=n.options,r=!1,s=n.scrollParentNotHidden[0],a=n.document[0];s!==a&&"HTML"!==s.tagName?(o.axis&&"x"===o.axis||(n.overflowOffset.top+s.offsetHeight-t.pageY<o.scrollSensitivity?s.scrollTop=r=s.scrollTop+o.scrollSpeed:t.pageY-n.overflowOffset.top<o.scrollSensitivity&&(s.scrollTop=r=s.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(n.overflowOffset.left+s.offsetWidth-t.pageX<o.scrollSensitivity?s.scrollLeft=r=s.scrollLeft+o.scrollSpeed:t.pageX-n.overflowOffset.left<o.scrollSensitivity&&(s.scrollLeft=r=s.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(t.pageY-e(a).scrollTop()<o.scrollSensitivity?r=e(a).scrollTop(e(a).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<o.scrollSensitivity&&(r=e(a).scrollTop(e(a).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(t.pageX-e(a).scrollLeft()<o.scrollSensitivity?r=e(a).scrollLeft(e(a).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<o.scrollSensitivity&&(r=e(a).scrollLeft(e(a).scrollLeft()+o.scrollSpeed)))),!1!==r&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,n){var o=n.options;n.snapElements=[],e(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var t=e(this),i=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,n){var o,r,s,a,l,c,d,u,h,p,g=n.options,f=g.snapTolerance,m=i.offset.left,v=m+n.helperProportions.width,b=i.offset.top,y=b+n.helperProportions.height;for(h=n.snapElements.length-1;h>=0;h--)c=(l=n.snapElements[h].left-n.margins.left)+n.snapElements[h].width,u=(d=n.snapElements[h].top-n.margins.top)+n.snapElements[h].height,v<l-f||m>c+f||y<d-f||b>u+f||!e.contains(n.snapElements[h].item.ownerDocument,n.snapElements[h].item)?(n.snapElements[h].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=!1):("inner"!==g.snapMode&&(o=Math.abs(d-y)<=f,r=Math.abs(u-b)<=f,s=Math.abs(l-v)<=f,a=Math.abs(c-m)<=f,o&&(i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),p=o||r||s||a,"outer"!==g.snapMode&&(o=Math.abs(d-b)<=f,r=Math.abs(u-y)<=f,s=Math.abs(l-m)<=f,a=Math.abs(c-v)<=f,o&&(i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[h].snapping&&(o||r||s||a||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=o||r||s||a||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,n){var o,r=n.options,s=e.makeArray(e(r.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});s.length&&(o=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each(function(t){e(this).css("zIndex",o+t)}),this.css("zIndex",o+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,n){var o=e(i.helper),r=n.options;o.css("zIndex")&&(r._zIndex=o.css("zIndex")),o.css("zIndex",r.zIndex)},stop:function(t,i,n){var o=n.options;o._zIndex&&e(i.helper).css("zIndex",o._zIndex)}});e.ui.draggable;e.widget("ui.resizable",e.ui.mouse,{version:"1.14.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,i){var n,o=!1,r=e(t).css("overflow");if("hidden"===r)return!1;if("scroll"===r)return!0;if(t[n=i&&"left"===i?"scrollLeft":"scrollTop"]>0)return!0;try{t[n]=1,o=t[n]>0,t[n]=0}catch(e){}return o},_create:function(){var t,i=this.options,n=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper'></div>").css({overflow:"hidden",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this._proportionallyResize()),this._setupHandles(),i.autoHide&&e(this.element).on("mouseenter",function(){i.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())}).on("mouseleave",function(){i.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy(),this._addedHandles.remove();var t,i=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable")};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!t}},_setupHandles:function(){var t,i,n,o,r,s=this.options,a=this;if(this.handles=s.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this._addedHandles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)o="ui-resizable-"+(t=String.prototype.trim.call(n[i])),r=e("<div>"),this._addClass(r,"ui-resizable-handle "+o),r.css({zIndex:s.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.children(this.handles[t]).length||(this.element.append(r),this._addedHandles=this._addedHandles.add(r));this._renderAxis=function(t){var i,n,o,r;for(i in t=t||this.element,this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=e(this.handles[i],this.element),r=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(o,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){a.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=r&&r[1]?r[1]:"se")}),s.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(t){var i,n,o=!1;for(i in this.handles)((n=e(this.handles[i])[0])===t.target||e.contains(n,t.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(t){var i,n,o,r,s=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),s.containment&&(i+=e(s.containment).scrollLeft()||0,n+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this._helper||(r=this._calculateAdjustedElementDimensions(a)),this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width,height:r.height},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:r.width,height:r.height},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,n,o=this.originalMousePosition,r=this.axis,s=t.pageX-o.left||0,a=t.pageY-o.top||0,l=this._change[r];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[t,s,a]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var i,n,o,r,s,a,l,c=this.options,d=this;return this._helper&&(o=(n=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&this._hasScroll(i[0],"left")?0:d.sizeDiff.height,r=n?0:d.sizeDiff.width,s={width:d.helper.width()-r,height:d.helper.height()-o},a=parseFloat(d.element.css("left"))+(d.position.left-d.originalPosition.left)||null,l=parseFloat(d.element.css("top"))+(d.position.top-d.originalPosition.top)||null,c.animate||this.element.css(e.extend(s,{top:l,left:a})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.helper.css(e),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px",this.helper.width(e.width)),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px",this.helper.height(e.height)),e},_updateVirtualBoundaries:function(e){var t,i,n,o,r,s=this.options;r={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,n=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),n>r.minHeight&&(r.minHeight=n),i<r.maxWidth&&(r.maxWidth=i),o<r.maxHeight&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,s=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);return r&&(e.width=t.minWidth),s&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),r&&c&&(e.left=a-t.minWidth),n&&c&&(e.left=a-t.maxWidth),s&&d&&(e.top=l-t.minHeight),o&&d&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],n=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],o=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)i[t]=parseFloat(n[t])||0,i[t]+=parseFloat(o[t])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_calculateAdjustedElementDimensions:function(e){var t,i,n,o=e.get(0);return"content-box"!==e.css("box-sizing")||!this._hasScroll(o)&&!this._hasScroll(o,"left")?{height:parseFloat(e.css("height")),width:parseFloat(e.css("width"))}:(t=parseFloat(o.style.width),i=parseFloat(o.style.height),n=this._getPaddingPlusBorderDimensions(e),t=isNaN(t)?this._getElementTheoreticalSize(e,n,"width"):t,{height:i=isNaN(i)?this._getElementTheoreticalSize(e,n,"height"):i,width:t})},_getElementTheoreticalSize:function(e,t,i){return Math.max(0,Math.ceil(e.get(0)["offset"+i[0].toUpperCase()+i.slice(1)]-t[i]-.5))||0},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div></div>").css({overflow:"hidden"}),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),n=i.options,o=i._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),s=r&&i._hasScroll(o[0],"left")?0:i.sizeDiff.height,a=r?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-s},c=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,d=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,d&&c?{top:d,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};o&&o.length&&e(o[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,n,o,r,s,a,l=e(this).resizable("instance"),c=l.options,d=l.element,u=c.containment,h=u instanceof e?u.get(0):/parent/.test(u)?d.parent().get(0):u;h&&(l.containerElement=e(h),/document/.test(u)||u===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){i[e]=l._num(t.css("padding"+n))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},n=l.containerOffset,o=l.containerSize.height,r=l.containerSize.width,s=l._hasScroll(h,"left")?h.scrollWidth:r,a=l._hasScroll(h)?h.scrollHeight:o,l.parentData={element:h,left:n.left,top:n.top,width:s,height:a}))},resize:function(t){var i,n,o,r,s=e(this).resizable("instance"),a=s.options,l=s.containerOffset,c=s.position,d=s._aspectRatio||t.shiftKey,u={top:0,left:0},h=s.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(u=l),c.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-u.left),d&&(s.size.height=s.size.width/s.aspectRatio,p=!1),s.position.left=a.helper?l.left:0),c.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),d&&(s.size.width=s.size.height*s.aspectRatio,p=!1),s.position.top=s._helper?l.top:0),o=s.containerElement.get(0)===s.element.parent().get(0),r=/relative|absolute/.test(s.containerElement.css("position")),o&&r?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),i=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-u.left:s.offset.left-l.left)),n=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-u.top:s.offset.top-l.top)),i+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-i,d&&(s.size.height=s.size.width/s.aspectRatio,p=!1)),n+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-n,d&&(s.size.width=s.size.height*s.aspectRatio,p=!1)),p||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,n=t.containerOffset,o=t.containerPosition,r=t.containerElement,s=e(t.helper),a=s.offset(),l=s.outerWidth()-t.sizeDiff.width,c=s.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(r.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(r.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each(function(){var i=e(this),n=t._calculateAdjustedElementDimensions(i);i.data("ui-resizable-alsoresize",{width:n.width,height:n.height,left:parseFloat(i.css("left")),top:parseFloat(i.css("top"))})})},resize:function(t,i){var n=e(this).resizable("instance"),o=n.options,r=n.originalSize,s=n.originalPosition,a={height:n.size.height-r.height||0,width:n.size.width-r.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0};e(o.alsoResize).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),o={},r=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(e,t){var i=(n[t]||0)+(a[t]||0);i&&i>=0&&(o[t]=i||null)}),t.css(o)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!0===e.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),n=i.options,o=i.size,r=i.originalSize,s=i.originalPosition,a=i.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,c=l[0]||1,d=l[1]||1,u=Math.round((o.width-r.width)/c)*c,h=Math.round((o.height-r.height)/d)*d,p=r.width+u,g=r.height+h,f=n.maxWidth&&n.maxWidth<p,m=n.maxHeight&&n.maxHeight<g,v=n.minWidth&&n.minWidth>p,b=n.minHeight&&n.minHeight>g;n.grid=l,v&&(p+=c),b&&(g+=d),f&&(p-=c),m&&(g-=d),/^(se|s|e)$/.test(a)?(i.size.width=p,i.size.height=g):/^(ne)$/.test(a)?(i.size.width=p,i.size.height=g,i.position.top=s.top-h):/^(sw)$/.test(a)?(i.size.width=p,i.size.height=g,i.position.left=s.left-u):((g-d<=0||p-c<=0)&&(t=i._getPaddingPlusBorderDimensions(this)),g-d>0?(i.size.height=g,i.position.top=s.top-h):(g=d-t.height,i.size.height=g,i.position.top=s.top+r.height-g),p-c>0?(i.size.width=p,i.position.left=s.left-u):(p=c-t.width,i.size.width=p,i.position.left=s.left+r.width-p))}});e.ui.resizable;e.widget("ui.dialog",{version:"1.14.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;i<0&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,uiDialogTitleHeadingLevel:0,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||e(this.document[0].activeElement).trigger("blur"),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var n=!1,o=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),r=Math.max.apply(null,o);return r>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",r+1),n=!0),n&&!i&&this._trigger("focus",t),n},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).trigger("focus")},_restoreTabbableFocus:function(){var t=this.document[0].activeElement;this.uiDialog[0]===t||e.contains(this.uiDialog[0],t)||this._focusTabbable()},_keepFocus:function(e){e.preventDefault(),this._restoreTabbableFocus()},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog","aria-modal":this.options.modal?"true":null}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),n=i.first(),o=i.last();t.target!==o[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){o.trigger("focus")}),t.preventDefault()):(this._delay(function(){n.trigger("focus")}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}});var i=Number.isInteger(this.options.uiDialogTitleHeadingLevel)&&this.options.uiDialogTitleHeadingLevel>0&&this.options.uiDialogTitleHeadingLevel<=6?"h"+this.options.uiDialogTitleHeadingLevel:"span";t=e("<"+i+">").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||Array.isArray(i)&&!i.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(e.each(i,function(i,n){var o,r;n="function"==typeof n?{click:n,text:i}:n,n=e.extend({type:"button"},n),o=n.click,r={icon:n.icon,iconPosition:n.iconPosition,showLabel:n.showLabel,icons:n.icons,text:n.text},delete n.click,delete n.icon,delete n.iconPosition,delete n.showLabel,delete n.icons,"boolean"==typeof n.text&&delete n.text,e("<button></button>",n).button(r).appendTo(t.uiButtonSet).on("click",function(){o.apply(t.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var t=this,i=this.options;function n(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,o){t._addClass(e(this),"ui-dialog-dragging"),t._blockFrames(),t._trigger("dragStart",i,n(o))},drag:function(e,i){t._trigger("drag",e,n(i))},stop:function(o,r){var s=r.offset.left-t.document.scrollLeft(),a=r.offset.top-t.document.scrollTop();i.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(a>=0?"+":"")+a,of:t.window},t._removeClass(e(this),"ui-dialog-dragging"),t._unblockFrames(),t._trigger("dragStop",o,n(r))}})},_makeResizable:function(){var t=this,i=this.options,n=i.resizable,o=this.uiDialog.css("position"),r="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";function s(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:r,start:function(i,n){t._addClass(e(this),"ui-dialog-resizing"),t._blockFrames(),t._trigger("resizeStart",i,s(n))},resize:function(e,i){t._trigger("resize",e,s(i))},stop:function(n,o){var r=t.uiDialog.offset(),a=r.left-t.document.scrollLeft(),l=r.top-t.document.scrollTop();i.height=t.uiDialog.height(),i.width=t.uiDialog.width(),i.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(l>=0?"+":"")+l,of:t.window},t._removeClass(e(this),"ui-dialog-resizing"),t._unblockFrames(),t._trigger("resizeStop",n,s(o))}}).css("position",o)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);-1!==i&&t.splice(i,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,n=!1,o={};e.each(t,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(n=!0),e in i.resizableRelatedOptions&&(o[e]=t)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,i){var n,o,r=this.uiDialog;"disabled"!==t&&(this._super(t,i),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&((n=r.is(":data(ui-draggable)"))&&!i&&r.draggable("destroy"),!n&&i&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((o=r.is(":data(ui-resizable)"))&&!i&&r.resizable("destroy"),o&&"string"==typeof i&&r.resizable("option","handles",i),o||!1===i||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")),"modal"===t&&r.attr("aria-modal",i?"true":null))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this.document.on("focusin.ui-dialog",function(e){if(!t){var i=this._trackingInstances()[0];i._allowInteraction(e)||(e.preventDefault(),i._focusTabbable())}}.bind(this)),this.overlay=e("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):(this.document.off("focusin.ui-dialog"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!0===e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}});e.ui.dialog;e.widget("ui.droppable",{version:"1.14.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept="function"==typeof i?i:function(e){return e.is(i)},this.proportions=function(){if(!arguments.length)return e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});e=arguments[0]},this._addToManager(t.scope),t.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,i){if("accept"===t)this.accept="function"==typeof i?i:function(e){return e.is(i)};else if("scope"===t){var n=e.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current,o=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=e(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===n.options.scope&&i.accept.call(i.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t))return o=!0,!1}),!o&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",t,this.ui(n)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),e.ui.intersect=function(){function e(e,t,i){return e>=t&&e<t+i}return function(t,i,n,o){if(!i.offset)return!1;var r=(t.positionAbs||t.position.absolute).left+t.margins.left,s=(t.positionAbs||t.position.absolute).top+t.margins.top,a=r+t.helperProportions.width,l=s+t.helperProportions.height,c=i.offset.left,d=i.offset.top,u=c+i.proportions().width,h=d+i.proportions().height;switch(n){case"fit":return c<=r&&a<=u&&d<=s&&l<=h;case"intersect":return c<r+t.helperProportions.width/2&&a-t.helperProportions.width/2<u&&d<s+t.helperProportions.height/2&&l-t.helperProportions.height/2<h;case"pointer":return e(o.pageY,d,i.proportions().height)&&e(o.pageX,c,i.proportions().width);case"touch":return(s>=d&&s<=h||l>=d&&l<=h||s<d&&l>h)&&(r>=c&&r<=u||a>=c&&a<=u||r<c&&a>u);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var n,o,r=e.ui.ddmanager.droppables[t.options.scope]||[],s=i?i.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<r.length;n++)if(!(r[n].options.disabled||t&&!r[n].accept.call(r[n].element[0],t.currentItem||t.element))){for(o=0;o<a.length;o++)if(a[o]===r[n].element[0]){r[n].proportions().height=0;continue e}r[n].visible="none"!==r[n].element.css("display"),r[n].visible&&("mousedown"===s&&r[n]._activate.call(r[n],i),r[n].offset=r[n].element.offset(),r[n].proportions({width:r[n].element[0].offsetWidth,height:r[n].element[0].offsetHeight}))}},drop:function(t,i){var n=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,i)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,o,r,s=e.ui.intersect(t,this,this.options.tolerance,i),a=!s&&this.isover?"isout":s&&!this.isover?"isover":null;a&&(this.options.greedy&&(o=this.options.scope,(r=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===o})).length&&((n=e(r[0]).droppable("instance")).greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},!0===e.uiBackCompat&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});e.ui.droppable,e.widget("ui.progressbar",{version:"1.14.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=e("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(e){if(void 0===e)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=!1===e,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(i.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectable",e.ui.mouse,{version:"1.14.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t.elementPos=e(t.element[0]).offset(),t.selectees=e(t.options.filter,t.element[0]),t._addClass(t.selectees,"ui-selectee"),t.selectees.each(function(){var i=e(this),n=i.offset(),o=this.getBoundingClientRect(),r={left:n.left-t.elementPos.left,top:n.top-t.elementPos.top};e.data(this,"selectable-item",{element:this,$element:i,left:r.left,top:r.top,right:r.left+o.width,bottom:r.top+o.height,startselected:!1,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=e("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY],this.elementPos=e(this.element[0]).offset(),this.options.disabled||(this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(i._removeClass(n.$element,"ui-selected"),n.selected=!1,i._addClass(n.$element,"ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().addBack().each(function(){var n,o=e.data(this,"selectable-item");if(o)return n=!t.metaKey&&!t.ctrlKey||!o.$element.hasClass("ui-selected"),i._removeClass(o.$element,n?"ui-unselecting":"ui-selected")._addClass(o.$element,n?"ui-selecting":"ui-unselecting"),o.unselecting=!n,o.selecting=n,o.selected=n,n?i._trigger("selecting",t,{selecting:o.element}):i._trigger("unselecting",t,{unselecting:o.element}),!1}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,n=this,o=this.options,r=this.opos[0],s=this.opos[1],a=t.pageX,l=t.pageY;return r>a&&(i=a,a=r,r=i),s>l&&(i=l,l=s,s=i),this.helper.css({left:r,top:s,width:a-r,height:l-s}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),c=!1,d={};i&&i.element!==n.element[0]&&(d.left=i.left+n.elementPos.left,d.right=i.right+n.elementPos.left,d.top=i.top+n.elementPos.top,d.bottom=i.bottom+n.elementPos.top,"touch"===o.tolerance?c=!(d.left>a||d.right<r||d.top>l||d.bottom<s):"fit"===o.tolerance&&(c=d.left>r&&d.right<a&&d.top>s&&d.bottom<l),c?(i.selected&&(n._removeClass(i.$element,"ui-selected"),i.selected=!1),i.unselecting&&(n._removeClass(i.$element,"ui-unselecting"),i.unselecting=!1),i.selecting||(n._addClass(i.$element,"ui-selecting"),i.selecting=!0,n._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(n._removeClass(i.$element,"ui-selecting"),i.selecting=!1,n._addClass(i.$element,"ui-selected"),i.selected=!0):(n._removeClass(i.$element,"ui-selecting"),i.selecting=!1,i.startselected&&(n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(n._removeClass(i.$element,"ui-selected"),i.selected=!1,n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");i._removeClass(n.$element,"ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");i._removeClass(n.$element,"ui-selecting")._addClass(n.$element,"ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.selectmenu",[e.ui.formResetMixin,{version:"1.14.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=e()},_drawButton:function(){var t,i=this,n=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(e){this.button.trigger("focus"),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),t=e("<span>").appendTo(this.button),this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(n).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){i._rendered||i._refreshMenu()})},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(e,i){e.preventDefault(),t._select(i.item.data("ui-selectmenu-item"),e)},focus:function(e,i){var n=i.item.data("ui-selectmenu-item");null!=t.focusIndex&&n.index!==t.focusIndex&&(t._trigger("focus",e,{item:n}),t.isOpen||t._select(n,e)),t.focusIndex=n.index,t.button.attr("aria-activedescendant",t.menuItems.eq(n.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var e,t=this.element.find("option");this.menu.empty(),this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,t.length&&(e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e)))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var i=e("<span>");return this._setText(i,t.label),this._addClass(i,"ui-selectmenu-text"),i},_renderMenu:function(t,i){var n=this,o="";e.each(i,function(i,r){var s;r.optgroup!==o&&(s=e("<li>",{text:r.optgroup}),n._addClass(s,"ui-selectmenu-optgroup","ui-menu-divider"+(r.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),s.appendTo(t),o=r.optgroup),n._renderItemData(t,r)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var n=e("<li>"),o=e("<div>",{title:i.element.attr("title")});return i.disabled&&this._addClass(n,null,"ui-state-disabled"),i.hidden?n.prop("hidden",!0):this._setText(o,i.label),n.append(o).appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var i,n,o=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex).parent("li"):(i=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),o+=":not(.ui-state-disabled)"),(n="first"===e||"last"===e?i["first"===e?"prevAll":"nextAll"](o).eq(-1):i[e+"All"](o).eq(0)).length&&this.menuInstance.focus(t,n)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&((e=window.getSelection()).removeAllRanges(),e.addRange(this.range))},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+CSS.escape(this.ids.button)).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e=window.getSelection();e.rangeCount&&(this.range=e.getRangeAt(0))},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var i=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),i=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),i=!1}i&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex).parent("li");t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(e)),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==i&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){if("icons"===e){var i=this.button.find("span.ui-icon");this._removeClass(i,null,this.options.icons.button)._addClass(i,null,t.button)}this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"width"===e&&this._resizeButton()},_setOptionDisabled:function(e){this._super(e),this.menuInstance.option("disabled",e),this.button.attr("aria-disabled",e),this._toggleClass(this.button,null,"ui-state-disabled",e),this.element.prop("disabled",e),e?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;!1!==e?(null===e&&(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)):this.button.css("width","")},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()))},_getCreateOptions:function(){var e=this._super();return e.disabled=this.element.prop("disabled"),e},_parseOptions:function(t){var i=this,n=[];t.each(function(t,o){n.push(i._parseOption(e(o),t))}),this.items=n},_parseOption:function(e,t){var i=e.parent("optgroup");return{element:e,index:t,value:e.val(),label:e.text(),hidden:i.prop("hidden")||e.prop("hidden"),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||e.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),e.widget("ui.slider",e.ui.mouse,{version:"1.14.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,o=this.element.find(".ui-slider-handle"),r=[];for(i=n.values&&n.values.length||1,o.length>i&&(o.slice(i).remove(),o=o.slice(0,i)),t=o.length;t<i;t++)r.push("<span tabindex='0'></span>");this.handles=o.add(e(r.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:Array.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=e("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var i,n,o,r,s,a,l,c=this,d=this.options;return!d.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-c.values(t));(o>i||o===i&&(t===c._lastChangedValue||c.values(t)===d.min))&&(o=i,r=e(this),s=t)}),!1!==this._start(t,s)&&(this._mouseSliding=!0,this._handleIndex=s,this._addClass(r,null,"ui-state-active"),r.trigger("focus"),a=r.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-a.left-r.width()/2,top:t.pageY-a.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,s,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,o,r;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(n=i/t)>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),o=this._valueMax()-this._valueMin(),r=this._valueMin()+n*o,this._trimAlignValue(r)},_uiHash:function(e,t,i){var n={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==t?t:this.values(e),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,i){var n,o=this.value(),r=this.values();this._hasMultipleValues()&&(n=this.values(t?0:1),o=this.values(t),2===this.options.values.length&&!0===this.options.range&&(i=0===t?Math.min(n,i):Math.max(n,i)),r[t]=i),i!==o&&!1!==this._trigger("slide",e,this._uiHash(t,i,r))&&(this._hasMultipleValues()?this.values(t,i):this.value(i))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,t){var i,n,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(t),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!Array.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(i=this.options.values,n=arguments[0],o=0;o<i.length;o+=1)i[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,t){var i,n=0;switch("range"===e&&!0===this.options.range&&("min"===t?(this.options.value=this._values(0),this.options.values=null):"max"===t&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),Array.isArray(this.options.values)&&(n=this.options.values.length),this._super(e,t),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(t),this.handles.css("horizontal"===t?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=n-1;i>=0;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this._hasMultipleValues()){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step;(e=Math.round((e-t)/i)*i+t)>this.options.max&&(e-=i),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,i,n,o,r,s=this.options.range,a=this.options,l=this,c=!this._animateOff&&a.animate,d={};this._hasMultipleValues()?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,d["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](d,a.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:a.animate}))),t=i}):(n=this.value(),o=this._valueMin(),r=this._valueMax(),i=r!==o?(n-o)/(r-o)*100:0,d["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](d,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:100-i+"%"},a.animate),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:100-i+"%"},a.animate))},_handleEvents:{keydown:function(t){var i,n,o,r=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(e(t.target),null,"ui-state-active"),!1===this._start(t,r)))return}switch(o=this.options.step,i=n=this._hasMultipleValues()?this.values(r):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-o)}this._slide(t,r,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),this._removeClass(e(t.target),null,"ui-state-active"))}}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.14.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&e<t+i},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),e.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var n=null,o=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")===r)return n=e(this),!1}),e.data(t.target,r.widgetName+"-item")===r&&(n=e(t.target)),!!n&&(!(this.options.handle&&!i&&(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(o=!0)}),!o))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,i,n){var o,r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.appendTo=e("parent"!==s.appendTo?s.appendTo:this.currentItem.parent()),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.scrollParent=this.placeholder.scrollParent(),e.extend(this.offset,{parent:this._getParentOffset()}),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this._storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset()),this.position=this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute"),this._mouseDrag(t),!0},_scroll:function(e){var t=this.options,i=!1;return this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<t.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+t.scrollSpeed:e.pageY-this.overflowOffset.top<t.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-t.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<t.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+t.scrollSpeed:e.pageX-this.overflowOffset.left<t.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-t.scrollSpeed)):(e.pageY-this.document.scrollTop()<t.scrollSensitivity?i=this.document.scrollTop(this.document.scrollTop()-t.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<t.scrollSensitivity&&(i=this.document.scrollTop(this.document.scrollTop()+t.scrollSpeed)),e.pageX-this.document.scrollLeft()<t.scrollSensitivity?i=this.document.scrollLeft(this.document.scrollLeft()-t.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<t.scrollSensitivity&&(i=this.document.scrollLeft(this.document.scrollLeft()+t.scrollSpeed))),i},_mouseDrag:function(t){var i,n,o,r,s=this.options;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),s.scroll&&!1!==this._scroll(t)&&(this._refreshItemPositions(!0),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()},i=this.items.length-1;i>=0;i--)if(o=(n=this.items[i]).item[0],(r=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(o===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===o||e.contains(this.placeholder[0],o)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],o))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,o=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,r=e.left,s=r+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,d=this.offset.click.left,u="x"===this.options.axis||n+c>a&&n+c<l,h="y"===this.options.axis||t+d>r&&t+d<s,p=u&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:r<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t,i,n="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),o="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);return!(!n||!o)&&(t=this.dragDirection.vertical,i=this.dragDirection.horizontal,this.floating?"right"===i||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this.dragDirection.vertical,o=this.dragDirection.horizontal;return this.floating&&o?"right"===o&&i||"left"===o&&!i:n&&("down"===n&&t||"up"===n&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,n,o,r,s=[],a=[],l=this._connectWith();if(l&&t)for(i=l.length-1;i>=0;i--)for(n=(o=e(l[i],this.document[0])).length-1;n>=0;n--)(r=e.data(o[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&a.push(["function"==typeof r.options.items?r.options.items.call(r.element):e(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);function c(){s.push(this)}for(a.push(["function"==typeof this.options.items?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(c);return e(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,o,r,s,a,l,c,d=this.items,u=[["function"==typeof this.options.items?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(i=h.length-1;i>=0;i--)for(n=(o=e(h[i],this.document[0])).length-1;n>=0;n--)(r=e.data(o[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&(u.push(["function"==typeof r.options.items?r.options.items.call(r.element[0],t,{item:this.currentItem}):e(r.options.items,r.element),r]),this.containers.push(r));for(i=u.length-1;i>=0;i--)for(s=u[i][1],n=0,c=(a=u[i][0]).length;n<c;n++)(l=e(a[n])).data(this.widgetName+"-item",s),d.push({item:l,instance:s,width:0,height:0,left:0,top:0})},_refreshItemPositions:function(t){var i,n,o,r;for(i=this.items.length-1;i>=0;i--)n=this.items[i],this.currentContainer&&n.instance!==this.currentContainer&&n.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=o.outerWidth(),n.height=o.outerHeight()),r=o.offset(),n.left=r.left,n.top=r.top)},refreshPositions:function(e){var t,i;if(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),this._refreshItemPositions(e),this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(t=this.containers.length-1;t>=0;t--)i=this.containers[t].element.offset(),this.containers[t].containerCache.left=i.left,this.containers[t].containerCache.top=i.top,this.containers[t].containerCache.width=this.containers[t].element.outerWidth(),this.containers[t].containerCache.height=this.containers[t].element.outerHeight();return this},_createPlaceholder:function(t){var i,n,o=(t=t||this).options;o.placeholder&&o.placeholder.constructor!==String||(i=o.placeholder,n=t.currentItem[0].nodeName.toLowerCase(),o.placeholder={element:function(){var o=e("<"+n+">",t.document[0]);return t._addClass(o,"ui-sortable-placeholder",i||t.currentItem[0].className)._removeClass(o,"ui-sortable-helper"),"tbody"===n?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(o)):"tr"===n?t._createTrPlaceholder(t.currentItem,o):"img"===n&&o.attr("src",t.currentItem.attr("src")),i||o.css("visibility","hidden"),o},update:function(e,r){i&&!o.forcePlaceholderSize||(r.height()&&(!o.forcePlaceholderSize||"tbody"!==n&&"tr"!==n)||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(o.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),o.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var n=this;t.children().each(function(){e("<td>&#160;</td>",n.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){var i,n,o,r,s,a,l,c,d,u,h=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(h&&e.contains(this.containers[i].element[0],h.element[0]))continue;h=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(o=1e4,r=null,s=(d=h.floating||this._isFloating(this.currentItem))?"left":"top",a=d?"width":"height",u=d?"pageX":"pageY",n=this.items.length-1;n>=0;n--)e.contains(this.containers[p].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[s],c=!1,t[u]-l>this.items[n][a]/2&&(c=!0),Math.abs(t[u]-l)<o&&(o=Math.abs(t[u]-l),r=this.items[n],this.direction=c?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,n="function"==typeof i.helper?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||this.appendTo[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!i.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!i.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"function"==typeof e&&(e=e.call(this)),"string"==typeof e&&(e=e.split(" ")),Array.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this.offsetParent[0]===this.document[0].body&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),"document"!==o.containment&&"window"!==o.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(t=e(o.containment)[0],i=e(o.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*n}},_generatePosition:function(t){var i,n,o=this.options,r=t.pageX,s=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1],s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,n=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-o.grid[0]:n+o.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function o(e,t,i){return function(n){i._trigger(e,n,t._uiHash(t))}}for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||n.push(o("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(o("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this._storedStylesheet&&(this._storedStylesheet.remove(),this._storedStylesheet=null),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}});function R(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.14.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t=this._super(),i=this.element;return e.each(["min","max","step"],function(e,n){var o=i.attr(n);null!=o&&o.length&&(t[n]=o)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e)},mousewheel:function(e,t){var i=this.document[0].activeElement;if(this.element[0]===i&&t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){var i;i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),function(){this.element[0]===this.document[0].activeElement||(this.element.trigger("focus"),this.previous=i)}.call(this),!1!==this._start(t)&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:i})||(this._value(i),this.counter++)},_increment:function(e){var t=this.options.incremental;return t?"function"==typeof t?t(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return i=e-(t=null!==n.min?n.min:0),e=t+(i=Math.round(i/n.step)*n.step),e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&e<n.min?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){var i,n,o;if("culture"===e||"numberFormat"===e)return i=this._parse(this.element.val()),this.options[e]=t,void this.element.val(this._format(i));"max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(n=this.buttons.first().find(".ui-icon"),this._removeClass(n,null,this.options.icons.up),this._addClass(n,null,t.up),o=this.buttons.last().find(".ui-icon"),this._removeClass(o,null,this.options.icons.down),this._addClass(o,null,t.down)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!e),this.element.prop("disabled",!!e),this.buttons.button(e?"disable":"enable")},_setOptions:R(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null!==e&&e===this._adjustValue(e)},_value:function(e,t){var i;""!==e&&null!==(i=this._parse(e))&&(t||(i=this._adjustValue(i)),e=this._format(i)),this.element.val(e),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:R(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:R(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:R(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:R(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());R(this._value).call(this,e)},widget:function(){return this.uiSpinner}}),!0===e.uiBackCompat&&e.widget("ui.spinner",e.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}});var I;e.ui.spinner;e.widget("ui.tabs",{version:"1.14.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(I=/#.*$/,function(e){var t,i;t=e.href.replace(I,""),i=location.href.replace(I,"");try{t=decodeURIComponent(t)}catch(e){}try{i=decodeURIComponent(i)}catch(e){}return e.hash.length>1&&t===i}),_create:function(){var t=this,i=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,i.collapsible),this._processTabs(),i.active=this._initialActive(),Array.isArray(i.disabled)&&(i.disabled=e.uniqueSort(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(i.active):this.active=e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,n=decodeURIComponent(location.hash.substring(1));return null===t&&(n&&this.tabs.each(function(i,o){if(e(o).attr("aria-controls")===n)return t=i,!1}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==t&&-1!==t||(t=!!this.tabs.length&&0)),!1!==t&&-1===(t=this.tabs.index(this.tabs.eq(t)))&&(t=!i&&0),!i&&!1===t&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),o=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:o=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,o),t.ctrlKey||t.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){var n=this.tabs.length-1;function o(){return t>n&&(t=0),t<0&&(t=n),t}for(;-1!==e.inArray(o(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).trigger("focus"),e},_setOption:function(e,t){"active"!==e?(this._super(e,t),"collapsible"===e&&(this._toggleClass("ui-tabs-collapsible",null,t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t)):this._activate(t)},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,i=this.tabs,n=this.anchors,o=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).attr({tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=e(),this.anchors.each(function(i,n){var o,r,s,a=e(n).uniqueId().attr("id"),l=e(n).closest("li"),c=l.attr("aria-controls");t._isLocal(n)?(s=(o=decodeURIComponent(n.hash)).substring(1),r=t.element.find("#"+CSS.escape(s))):(o="#"+(s=l.attr("aria-controls")||e({}).uniqueId()[0].id),(r=t.element.find(o)).length||(r=t._createPanel(s)).insertAfter(t.panels[i-1]||t.tablist),r.attr("aria-live","polite")),r.length&&(t.panels=t.panels.add(r)),c&&l.data("ui-tabs-aria-controls",c),l.attr({"aria-controls":s,"aria-labelledby":a}),r.attr("aria-labelledby",a)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),i&&(this._off(i.not(this.tabs)),this._off(n.not(this.anchors)),this._off(o.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(t){var i,n,o;for(Array.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1),o=0;n=this.tabs[o];o++)i=e(n),!0===t||-1!==e.inArray(o,t)?(i.attr("aria-disabled","true"),this._addClass(i,null,"ui-state-disabled")):(i.removeAttr("aria-disabled"),this._removeClass(i,null,"ui-state-disabled"));this.options.disabled=t,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===t)},_setupEvents:function(t){var i={};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,o=e(t.currentTarget).closest("li"),r=o[0]===n[0],s=r&&i.collapsible,a=s?e():this._getPanelForTab(o),l=n.length?this._getPanelForTab(n):e(),c={oldTab:n,oldPanel:l,newTab:s?e():o,newPanel:a};t.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||r&&!i.collapsible||!1===this._trigger("beforeActivate",t,c)||(i.active=!s&&this.tabs.index(o),this.active=r?e():o,this.xhr&&this.xhr.abort(),l.length||a.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(o),t),this._toggle(t,c))},_toggle:function(t,i){var n=this,o=i.newPanel,r=i.oldPanel;function s(){n.running=!1,n._trigger("activate",t,i)}function a(){n._addClass(i.newTab.closest("li"),"ui-tabs-active","ui-state-active"),o.length&&n.options.show?n._show(o,n.options.show,s):(o.show(),s())}this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){n._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),a()}):(this._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),r.hide(),a()),r.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+CSS.escape(e)+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;!1!==i&&(void 0===t?i=!1:(t=this._getIndex(t),i=Array.isArray(i)?e.map(i,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,i){return i!==t?i:null})),this._setOptionDisabled(i))},disable:function(t){var i=this.options.disabled;if(!0!==i){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=Array.isArray(i)?e.merge([t],i).sort():[t]}this._setOptionDisabled(i)}},load:function(t,i){t=this._getIndex(t);var n=this,o=this.tabs.eq(t),r=o.find(".ui-tabs-anchor"),s=this._getPanelForTab(o),a={tab:o,panel:s},l=function(e,t){"abort"===t&&n.panels.stop(!1,!0),n._removeClass(o,"ui-tabs-loading"),s.removeAttr("aria-busy"),e===n.xhr&&delete n.xhr};this._isLocal(r[0])||(this.xhr=e.ajax(this._ajaxSettings(r,i,a)),"canceled"!==this.xhr.statusText&&(this._addClass(o,"ui-tabs-loading"),s.attr("aria-busy","true"),this.xhr.done(function(e,t,o){s.html(e),n._trigger("load",i,a),l(o,t)}).fail(function(e,t){l(e,t)})))},_ajaxSettings:function(t,i,n){var o=this;return{url:t.attr("href"),beforeSend:function(t,r){return o._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:r},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find("#"+CSS.escape(i))}}),!0===e.uiBackCompat&&e.widget("ui.tabs",e.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}});e.ui.tabs;e.widget("ui.tooltip",{version:"1.14.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=e(this).attr("title");return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(e,t){var i=(e.attr("aria-describedby")||"").split(/\s+/);i.push(t),e.data("ui-tooltip-id",t).attr("aria-describedby",String.prototype.trim.call(i.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),o=e.inArray(i,n);-1!==o&&n.splice(o,1),t.removeData("ui-tooltip-id"),(n=String.prototype.trim.call(n.join(" ")))?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=e([])},_setOption:function(t,i){var n=this;this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){n._updateContent(t.element)})},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var t=this;e.each(this.tooltips,function(i,n){var o=e.Event("blur");o.target=o.currentTarget=n.element[0],t.close(o,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=e(this);if(t.is("[title]"))return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}),this.disabledTitles=e([])},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each(function(){var t,n=e(this);n.data("ui-tooltip-open")&&((t=e.Event("blur")).target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._registerCloseHandlers(t,n),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,o=this,r=t?t.type:null;if("string"==typeof n||n.nodeType||n.jquery)return this._open(t,e,n);(i=n.call(e[0],function(i){e.data("ui-tooltip-open")&&(t&&(t.type=r),o._open(t,e,i))}))&&this._open(t,e,i)},_open:function(t,i,n){var o,r,s,a,l=e.extend({},this.options.position);function c(e){l.of=e,r.is(":hidden")||r.position(l)}n&&((o=this._find(i))?o.tooltip.find(".ui-tooltip-content").html(n):(i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),o=this._tooltip(i),r=o.tooltip,this._addDescribedBy(i,r.attr("id")),r.find(".ui-tooltip-content").html(n),this.liveRegion.children().hide(),(a=e("<div>").html(r.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),a.removeAttr("id").find("[id]").removeAttr("id"),a.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:c}),c(t)):r.position(e.extend({of:i},this.options.position)),r.hide(),this._show(r,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(s=this.delayedShow=setInterval(function(){r.is(":visible")&&(c(l.of),clearInterval(s))},13)),this._trigger("open",t,{tooltip:r})))},_registerCloseHandlers:function(t,i){var n={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=i[0],this.close(n,!0)}}};i[0]!==this.element[0]&&(n.remove=function(){var e=this._find(i);e&&this._removeTooltip(e.tooltip)}),t&&"mouseover"!==t.type||(n.mouseleave="close"),t&&"focusin"!==t.type||(n.focusout="close"),this._on(!0,i,n)},close:function(t){var i,n=this,o=e(t?t.currentTarget:this.element),r=this._find(o);r?(i=r.tooltip,r.closing||(clearInterval(this.delayedShow),o.data("ui-tooltip-title")&&!o.attr("title")&&o.attr("title",o.data("ui-tooltip-title")),this._removeDescribedBy(o),r.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){n._removeTooltip(e(this))}),o.removeData("ui-tooltip-open"),this._off(o,"mouseleave focusout keyup"),o[0]!==this.element[0]&&this._off(o,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]}),r.closing=!0,this._trigger("close",t,{tooltip:i}),r.hiding||(r.closing=!1))):o.removeData("ui-tooltip-open")},_tooltip:function(t){var i=e("<div>").attr("role","tooltip"),n=e("<div>").appendTo(i),o=i.uniqueId().attr("id");return this._addClass(n,"ui-tooltip-content"),this._addClass(i,"ui-tooltip","ui-widget ui-widget-content"),i.appendTo(this._appendTo(t)),this.tooltips[o]={element:t,tooltip:i}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){clearInterval(this.delayedShow),e.remove(),delete this.tooltips[e.attr("id")]},_appendTo:function(e){var t=e.closest(".ui-front, dialog");return t.length||(t=this.document[0].body),t},_destroy:function(){var t=this;e.each(this.tooltips,function(i,n){var o=e.Event("blur"),r=n.element;o.target=o.currentTarget=r[0],t.close(o,!0),e("#"+i).remove(),r.data("ui-tooltip-title")&&(r.attr("title")||r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),!0===e.uiBackCompat&&e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);return this.options.tooltipClass&&e.tooltip.addClass(this.options.tooltipClass),e}});e.ui.tooltip}),function(){var e,t="Expected a function",i="__lodash_hash_undefined__",n="__lodash_placeholder__",o=16,r=32,s=64,a=128,l=256,c=1/0,d=9007199254740991,u=NaN,h=4294967295,p=[["ary",a],["bind",1],["bindKey",2],["curry",8],["curryRight",o],["flip",512],["partial",r],["partialRight",s],["rearg",l]],g="[object Arguments]",f="[object Array]",m="[object Boolean]",v="[object Date]",b="[object Error]",y="[object Function]",w="[object GeneratorFunction]",C="[object Map]",_="[object Number]",S="[object Object]",x="[object Promise]",A="[object RegExp]",E="[object Set]",T="[object String]",k="[object Symbol]",D="[object WeakMap]",M="[object ArrayBuffer]",P="[object DataView]",R="[object Float32Array]",I="[object Float64Array]",O="[object Int8Array]",N="[object Int16Array]",L="[object Int32Array]",F="[object Uint8Array]",$="[object Uint8ClampedArray]",G="[object Uint16Array]",B="[object Uint32Array]",H=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,V=/&(?:amp|lt|gt|quot|#39);/g,j=/[&<>"']/g,U=RegExp(V.source),Y=RegExp(j.source),q=/<%-([\s\S]+?)%>/g,K=/<%([\s\S]+?)%>/g,X=/<%=([\s\S]+?)%>/g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,Q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ee=/[\\^$.*+?()[\]{}|]/g,te=RegExp(ee.source),ie=/^\s+/,ne=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,re=/\{\n\/\* \[wrapped with (.+)\] \*/,se=/,? & /,ae=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,le=/[()=,{}\[\]\/\s]/,ce=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ue=/\w*$/,he=/^[-+]0x[0-9a-f]+$/i,pe=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,fe=/^0o[0-7]+$/i,me=/^(?:0|[1-9]\d*)$/,ve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,be=/($^)/,ye=/['\n\r\u2028\u2029\\]/g,we="\\ud800-\\udfff",Ce="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",_e="\\u2700-\\u27bf",Se="a-z\\xdf-\\xf6\\xf8-\\xff",xe="A-Z\\xc0-\\xd6\\xd8-\\xde",Ae="\\ufe0e\\ufe0f",Ee="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Te="['’]",ke="["+we+"]",De="["+Ee+"]",Me="["+Ce+"]",Pe="\\d+",Re="["+_e+"]",Ie="["+Se+"]",Oe="[^"+we+Ee+Pe+_e+Se+xe+"]",Ne="\\ud83c[\\udffb-\\udfff]",Le="[^"+we+"]",Fe="(?:\\ud83c[\\udde6-\\uddff]){2}",$e="[\\ud800-\\udbff][\\udc00-\\udfff]",Ge="["+xe+"]",Be="\\u200d",He="(?:"+Ie+"|"+Oe+")",ze="(?:"+Ge+"|"+Oe+")",We="(?:['’](?:d|ll|m|re|s|t|ve))?",Ve="(?:['’](?:D|LL|M|RE|S|T|VE))?",je="(?:"+Me+"|"+Ne+")"+"?",Ue="["+Ae+"]?",Ye=Ue+je+("(?:"+Be+"(?:"+[Le,Fe,$e].join("|")+")"+Ue+je+")*"),qe="(?:"+[Re,Fe,$e].join("|")+")"+Ye,Ke="(?:"+[Le+Me+"?",Me,Fe,$e,ke].join("|")+")",Xe=RegExp(Te,"g"),Ze=RegExp(Me,"g"),Je=RegExp(Ne+"(?="+Ne+")|"+Ke+Ye,"g"),Qe=RegExp([Ge+"?"+Ie+"+"+We+"(?="+[De,Ge,"$"].join("|")+")",ze+"+"+Ve+"(?="+[De,Ge+He,"$"].join("|")+")",Ge+"?"+He+"+"+We,Ge+"+"+Ve,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pe,qe].join("|"),"g"),et=RegExp("["+Be+we+Ce+Ae+"]"),tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,it=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],nt=-1,ot={};ot[R]=ot[I]=ot[O]=ot[N]=ot[L]=ot[F]=ot[$]=ot[G]=ot[B]=!0,ot[g]=ot[f]=ot[M]=ot[m]=ot[P]=ot[v]=ot[b]=ot[y]=ot[C]=ot[_]=ot[S]=ot[A]=ot[E]=ot[T]=ot[D]=!1;var rt={};rt[g]=rt[f]=rt[M]=rt[P]=rt[m]=rt[v]=rt[R]=rt[I]=rt[O]=rt[N]=rt[L]=rt[C]=rt[_]=rt[S]=rt[A]=rt[E]=rt[T]=rt[k]=rt[F]=rt[$]=rt[G]=rt[B]=!0,rt[b]=rt[y]=rt[D]=!1;var st={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,lt=parseInt,ct="object"==typeof global&&global&&global.Object===Object&&global,dt="object"==typeof self&&self&&self.Object===Object&&self,ut=ct||dt||Function("return this")(),ht="object"==typeof exports&&exports&&!exports.nodeType&&exports,pt=ht&&"object"==typeof module&&module&&!module.nodeType&&module,gt=pt&&pt.exports===ht,ft=gt&&ct.process,mt=function(){try{var e=pt&&pt.require&&pt.require("util").types;return e||ft&&ft.binding&&ft.binding("util")}catch(e){}}(),vt=mt&&mt.isArrayBuffer,bt=mt&&mt.isDate,yt=mt&&mt.isMap,wt=mt&&mt.isRegExp,Ct=mt&&mt.isSet,_t=mt&&mt.isTypedArray;function St(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function xt(e,t,i,n){for(var o=-1,r=null==e?0:e.length;++o<r;){var s=e[o];t(n,s,i(s),e)}return n}function At(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e}function Et(e,t){for(var i=null==e?0:e.length;i--&&!1!==t(e[i],i,e););return e}function Tt(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(!t(e[i],i,e))return!1;return!0}function kt(e,t){for(var i=-1,n=null==e?0:e.length,o=0,r=[];++i<n;){var s=e[i];t(s,i,e)&&(r[o++]=s)}return r}function Dt(e,t){return!!(null==e?0:e.length)&&Gt(e,t,0)>-1}function Mt(e,t,i){for(var n=-1,o=null==e?0:e.length;++n<o;)if(i(t,e[n]))return!0;return!1}function Pt(e,t){for(var i=-1,n=null==e?0:e.length,o=Array(n);++i<n;)o[i]=t(e[i],i,e);return o}function Rt(e,t){for(var i=-1,n=t.length,o=e.length;++i<n;)e[o+i]=t[i];return e}function It(e,t,i,n){var o=-1,r=null==e?0:e.length;for(n&&r&&(i=e[++o]);++o<r;)i=t(i,e[o],o,e);return i}function Ot(e,t,i,n){var o=null==e?0:e.length;for(n&&o&&(i=e[--o]);o--;)i=t(i,e[o],o,e);return i}function Nt(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}var Lt=Wt("length");function Ft(e,t,i){var n;return i(e,function(e,i,o){if(t(e,i,o))return n=i,!1}),n}function $t(e,t,i,n){for(var o=e.length,r=i+(n?1:-1);n?r--:++r<o;)if(t(e[r],r,e))return r;return-1}function Gt(e,t,i){return t==t?function(e,t,i){var n=i-1,o=e.length;for(;++n<o;)if(e[n]===t)return n;return-1}(e,t,i):$t(e,Ht,i)}function Bt(e,t,i,n){for(var o=i-1,r=e.length;++o<r;)if(n(e[o],t))return o;return-1}function Ht(e){return e!=e}function zt(e,t){var i=null==e?0:e.length;return i?Ut(e,t)/i:u}function Wt(t){return function(i){return null==i?e:i[t]}}function Vt(t){return function(i){return null==t?e:t[i]}}function jt(e,t,i,n,o){return o(e,function(e,o,r){i=n?(n=!1,e):t(i,e,o,r)}),i}function Ut(t,i){for(var n,o=-1,r=t.length;++o<r;){var s=i(t[o]);s!==e&&(n=n===e?s:n+s)}return n}function Yt(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}function qt(e){return e?e.slice(0,ui(e)+1).replace(ie,""):e}function Kt(e){return function(t){return e(t)}}function Xt(e,t){return Pt(t,function(t){return e[t]})}function Zt(e,t){return e.has(t)}function Jt(e,t){for(var i=-1,n=e.length;++i<n&&Gt(t,e[i],0)>-1;);return i}function Qt(e,t){for(var i=e.length;i--&&Gt(t,e[i],0)>-1;);return i}var ei=Vt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),ti=Vt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ii(e){return"\\"+st[e]}function ni(e){return et.test(e)}function oi(e){var t=-1,i=Array(e.size);return e.forEach(function(e,n){i[++t]=[n,e]}),i}function ri(e,t){return function(i){return e(t(i))}}function si(e,t){for(var i=-1,o=e.length,r=0,s=[];++i<o;){var a=e[i];a!==t&&a!==n||(e[i]=n,s[r++]=i)}return s}function ai(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}function li(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=[e,e]}),i}function ci(e){return ni(e)?function(e){var t=Je.lastIndex=0;for(;Je.test(e);)++t;return t}(e):Lt(e)}function di(e){return ni(e)?function(e){return e.match(Je)||[]}(e):function(e){return e.split("")}(e)}function ui(e){for(var t=e.length;t--&&ne.test(e.charAt(t)););return t}var hi=Vt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var pi=function ne(we){var Ce,_e=(we=null==we?ut:pi.defaults(ut.Object(),we,pi.pick(ut,it))).Array,Se=we.Date,xe=we.Error,Ae=we.Function,Ee=we.Math,Te=we.Object,ke=we.RegExp,De=we.String,Me=we.TypeError,Pe=_e.prototype,Re=Ae.prototype,Ie=Te.prototype,Oe=we["__core-js_shared__"],Ne=Re.toString,Le=Ie.hasOwnProperty,Fe=0,$e=(Ce=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||""))?"Symbol(src)_1."+Ce:"",Ge=Ie.toString,Be=Ne.call(Te),He=ut._,ze=ke("^"+Ne.call(Le).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=gt?we.Buffer:e,Ve=we.Symbol,je=we.Uint8Array,Ue=We?We.allocUnsafe:e,Ye=ri(Te.getPrototypeOf,Te),qe=Te.create,Ke=Ie.propertyIsEnumerable,Je=Pe.splice,et=Ve?Ve.isConcatSpreadable:e,st=Ve?Ve.iterator:e,ct=Ve?Ve.toStringTag:e,dt=function(){try{var e=pr(Te,"defineProperty");return e({},"",{}),e}catch(e){}}(),ht=we.clearTimeout!==ut.clearTimeout&&we.clearTimeout,pt=Se&&Se.now!==ut.Date.now&&Se.now,ft=we.setTimeout!==ut.setTimeout&&we.setTimeout,mt=Ee.ceil,Lt=Ee.floor,Vt=Te.getOwnPropertySymbols,gi=We?We.isBuffer:e,fi=we.isFinite,mi=Pe.join,vi=ri(Te.keys,Te),bi=Ee.max,yi=Ee.min,wi=Se.now,Ci=we.parseInt,_i=Ee.random,Si=Pe.reverse,xi=pr(we,"DataView"),Ai=pr(we,"Map"),Ei=pr(we,"Promise"),Ti=pr(we,"Set"),ki=pr(we,"WeakMap"),Di=pr(Te,"create"),Mi=ki&&new ki,Pi={},Ri=Gr(xi),Ii=Gr(Ai),Oi=Gr(Ei),Ni=Gr(Ti),Li=Gr(ki),Fi=Ve?Ve.prototype:e,$i=Fi?Fi.valueOf:e,Gi=Fi?Fi.toString:e;function Bi(e){if(ia(e)&&!js(e)&&!(e instanceof Vi)){if(e instanceof Wi)return e;if(Le.call(e,"__wrapped__"))return Br(e)}return new Wi(e)}var Hi=function(){function t(){}return function(i){if(!ta(i))return{};if(qe)return qe(i);t.prototype=i;var n=new t;return t.prototype=e,n}}();function zi(){}function Wi(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=e}function Vi(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=h,this.__views__=[]}function ji(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Ui(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Yi(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function qi(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Yi;++t<i;)this.add(e[t])}function Ki(e){var t=this.__data__=new Ui(e);this.size=t.size}function Xi(e,t){var i=js(e),n=!i&&Vs(e),o=!i&&!n&&Ks(e),r=!i&&!n&&!o&&da(e),s=i||n||o||r,a=s?Yt(e.length,De):[],l=a.length;for(var c in e)!t&&!Le.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||wr(c,l))||a.push(c);return a}function Zi(t){var i=t.length;return i?t[Kn(0,i-1)]:e}function Ji(e,t){return Lr(Po(e),ln(t,0,e.length))}function Qi(e){return Lr(Po(e))}function en(t,i,n){(n!==e&&!Hs(t[i],n)||n===e&&!(i in t))&&sn(t,i,n)}function tn(t,i,n){var o=t[i];Le.call(t,i)&&Hs(o,n)&&(n!==e||i in t)||sn(t,i,n)}function nn(e,t){for(var i=e.length;i--;)if(Hs(e[i][0],t))return i;return-1}function on(e,t,i,n){return pn(e,function(e,o,r){t(n,e,i(e),r)}),n}function rn(e,t){return e&&Ro(t,Ra(t),e)}function sn(e,t,i){"__proto__"==t&&dt?dt(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function an(t,i){for(var n=-1,o=i.length,r=_e(o),s=null==t;++n<o;)r[n]=s?e:Ta(t,i[n]);return r}function ln(t,i,n){return t==t&&(n!==e&&(t=t<=n?t:n),i!==e&&(t=t>=i?t:i)),t}function cn(t,i,n,o,r,s){var a,l=1&i,c=2&i,d=4&i;if(n&&(a=r?n(t,o,r,s):n(t)),a!==e)return a;if(!ta(t))return t;var u=js(t);if(u){if(a=function(e){var t=e.length,i=new e.constructor(t);t&&"string"==typeof e[0]&&Le.call(e,"index")&&(i.index=e.index,i.input=e.input);return i}(t),!l)return Po(t,a)}else{var h=mr(t),p=h==y||h==w;if(Ks(t))return Ao(t,l);if(h==S||h==g||p&&!r){if(a=c||p?{}:br(t),!l)return c?function(e,t){return Ro(e,fr(e),t)}(t,function(e,t){return e&&Ro(t,Ia(t),e)}(a,t)):function(e,t){return Ro(e,gr(e),t)}(t,rn(a,t))}else{if(!rt[h])return r?t:{};a=function(e,t,i){var n=e.constructor;switch(t){case M:return Eo(e);case m:case v:return new n(+e);case P:return function(e,t){var i=t?Eo(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}(e,i);case R:case I:case O:case N:case L:case F:case $:case G:case B:return To(e,i);case C:return new n;case _:case T:return new n(e);case A:return function(e){var t=new e.constructor(e.source,ue.exec(e));return t.lastIndex=e.lastIndex,t}(e);case E:return new n;case k:return o=e,$i?Te($i.call(o)):{}}var o}(t,h,l)}}s||(s=new Ki);var f=s.get(t);if(f)return f;s.set(t,a),aa(t)?t.forEach(function(e){a.add(cn(e,i,n,e,t,s))}):na(t)&&t.forEach(function(e,o){a.set(o,cn(e,i,n,o,t,s))});var b=u?e:(d?c?sr:rr:c?Ia:Ra)(t);return At(b||t,function(e,o){b&&(e=t[o=e]),tn(a,o,cn(e,i,n,o,t,s))}),a}function dn(t,i,n){var o=n.length;if(null==t)return!o;for(t=Te(t);o--;){var r=n[o],s=i[r],a=t[r];if(a===e&&!(r in t)||!s(a))return!1}return!0}function un(i,n,o){if("function"!=typeof i)throw new Me(t);return Rr(function(){i.apply(e,o)},n)}function hn(e,t,i,n){var o=-1,r=Dt,s=!0,a=e.length,l=[],c=t.length;if(!a)return l;i&&(t=Pt(t,Kt(i))),n?(r=Mt,s=!1):t.length>=200&&(r=Zt,s=!1,t=new qi(t));e:for(;++o<a;){var d=e[o],u=null==i?d:i(d);if(d=n||0!==d?d:0,s&&u==u){for(var h=c;h--;)if(t[h]===u)continue e;l.push(d)}else r(t,u,n)||l.push(d)}return l}Bi.templateSettings={escape:q,evaluate:K,interpolate:X,variable:"",imports:{_:Bi}},Bi.prototype=zi.prototype,Bi.prototype.constructor=Bi,Wi.prototype=Hi(zi.prototype),Wi.prototype.constructor=Wi,Vi.prototype=Hi(zi.prototype),Vi.prototype.constructor=Vi,ji.prototype.clear=function(){this.__data__=Di?Di(null):{},this.size=0},ji.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ji.prototype.get=function(t){var n=this.__data__;if(Di){var o=n[t];return o===i?e:o}return Le.call(n,t)?n[t]:e},ji.prototype.has=function(t){var i=this.__data__;return Di?i[t]!==e:Le.call(i,t)},ji.prototype.set=function(t,n){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=Di&&n===e?i:n,this},Ui.prototype.clear=function(){this.__data__=[],this.size=0},Ui.prototype.delete=function(e){var t=this.__data__,i=nn(t,e);return!(i<0)&&(i==t.length-1?t.pop():Je.call(t,i,1),--this.size,!0)},Ui.prototype.get=function(t){var i=this.__data__,n=nn(i,t);return n<0?e:i[n][1]},Ui.prototype.has=function(e){return nn(this.__data__,e)>-1},Ui.prototype.set=function(e,t){var i=this.__data__,n=nn(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this},Yi.prototype.clear=function(){this.size=0,this.__data__={hash:new ji,map:new(Ai||Ui),string:new ji}},Yi.prototype.delete=function(e){var t=ur(this,e).delete(e);return this.size-=t?1:0,t},Yi.prototype.get=function(e){return ur(this,e).get(e)},Yi.prototype.has=function(e){return ur(this,e).has(e)},Yi.prototype.set=function(e,t){var i=ur(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this},qi.prototype.add=qi.prototype.push=function(e){return this.__data__.set(e,i),this},qi.prototype.has=function(e){return this.__data__.has(e)},Ki.prototype.clear=function(){this.__data__=new Ui,this.size=0},Ki.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},Ki.prototype.get=function(e){return this.__data__.get(e)},Ki.prototype.has=function(e){return this.__data__.has(e)},Ki.prototype.set=function(e,t){var i=this.__data__;if(i instanceof Ui){var n=i.__data__;if(!Ai||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Yi(n)}return i.set(e,t),this.size=i.size,this};var pn=No(Cn),gn=No(_n,!0);function fn(e,t){var i=!0;return pn(e,function(e,n,o){return i=!!t(e,n,o)}),i}function mn(t,i,n){for(var o=-1,r=t.length;++o<r;){var s=t[o],a=i(s);if(null!=a&&(l===e?a==a&&!ca(a):n(a,l)))var l=a,c=s}return c}function vn(e,t){var i=[];return pn(e,function(e,n,o){t(e,n,o)&&i.push(e)}),i}function bn(e,t,i,n,o){var r=-1,s=e.length;for(i||(i=yr),o||(o=[]);++r<s;){var a=e[r];t>0&&i(a)?t>1?bn(a,t-1,i,n,o):Rt(o,a):n||(o[o.length]=a)}return o}var yn=Lo(),wn=Lo(!0);function Cn(e,t){return e&&yn(e,t,Ra)}function _n(e,t){return e&&wn(e,t,Ra)}function Sn(e,t){return kt(t,function(t){return Js(e[t])})}function xn(t,i){for(var n=0,o=(i=Co(i,t)).length;null!=t&&n<o;)t=t[$r(i[n++])];return n&&n==o?t:e}function An(e,t,i){var n=t(e);return js(e)?n:Rt(n,i(e))}function En(t){return null==t?t===e?"[object Undefined]":"[object Null]":ct&&ct in Te(t)?function(t){var i=Le.call(t,ct),n=t[ct];try{t[ct]=e;var o=!0}catch(e){}var r=Ge.call(t);o&&(i?t[ct]=n:delete t[ct]);return r}(t):function(e){return Ge.call(e)}(t)}function Tn(e,t){return e>t}function kn(e,t){return null!=e&&Le.call(e,t)}function Dn(e,t){return null!=e&&t in Te(e)}function Mn(t,i,n){for(var o=n?Mt:Dt,r=t[0].length,s=t.length,a=s,l=_e(s),c=1/0,d=[];a--;){var u=t[a];a&&i&&(u=Pt(u,Kt(i))),c=yi(u.length,c),l[a]=!n&&(i||r>=120&&u.length>=120)?new qi(a&&u):e}u=t[0];var h=-1,p=l[0];e:for(;++h<r&&d.length<c;){var g=u[h],f=i?i(g):g;if(g=n||0!==g?g:0,!(p?Zt(p,f):o(d,f,n))){for(a=s;--a;){var m=l[a];if(!(m?Zt(m,f):o(t[a],f,n)))continue e}p&&p.push(f),d.push(g)}}return d}function Pn(t,i,n){var o=null==(t=Dr(t,i=Co(i,t)))?t:t[$r(Zr(i))];return null==o?e:St(o,t,n)}function Rn(e){return ia(e)&&En(e)==g}function In(t,i,n,o,r){return t===i||(null==t||null==i||!ia(t)&&!ia(i)?t!=t&&i!=i:function(t,i,n,o,r,s){var a=js(t),l=js(i),c=a?f:mr(t),d=l?f:mr(i),u=(c=c==g?S:c)==S,h=(d=d==g?S:d)==S,p=c==d;if(p&&Ks(t)){if(!Ks(i))return!1;a=!0,u=!1}if(p&&!u)return s||(s=new Ki),a||da(t)?nr(t,i,n,o,r,s):function(e,t,i,n,o,r,s){switch(i){case P:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case M:return!(e.byteLength!=t.byteLength||!r(new je(e),new je(t)));case m:case v:case _:return Hs(+e,+t);case b:return e.name==t.name&&e.message==t.message;case A:case T:return e==t+"";case C:var a=oi;case E:var l=1&n;if(a||(a=ai),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;n|=2,s.set(e,t);var d=nr(a(e),a(t),n,o,r,s);return s.delete(e),d;case k:if($i)return $i.call(e)==$i.call(t)}return!1}(t,i,c,n,o,r,s);if(!(1&n)){var y=u&&Le.call(t,"__wrapped__"),w=h&&Le.call(i,"__wrapped__");if(y||w){var x=y?t.value():t,D=w?i.value():i;return s||(s=new Ki),r(x,D,n,o,s)}}if(!p)return!1;return s||(s=new Ki),function(t,i,n,o,r,s){var a=1&n,l=rr(t),c=l.length,d=rr(i),u=d.length;if(c!=u&&!a)return!1;var h=c;for(;h--;){var p=l[h];if(!(a?p in i:Le.call(i,p)))return!1}var g=s.get(t),f=s.get(i);if(g&&f)return g==i&&f==t;var m=!0;s.set(t,i),s.set(i,t);var v=a;for(;++h<c;){var b=t[p=l[h]],y=i[p];if(o)var w=a?o(y,b,p,i,t,s):o(b,y,p,t,i,s);if(!(w===e?b===y||r(b,y,n,o,s):w)){m=!1;break}v||(v="constructor"==p)}if(m&&!v){var C=t.constructor,_=i.constructor;C==_||!("constructor"in t)||!("constructor"in i)||"function"==typeof C&&C instanceof C&&"function"==typeof _&&_ instanceof _||(m=!1)}return s.delete(t),s.delete(i),m}(t,i,n,o,r,s)}(t,i,n,o,In,r))}function On(t,i,n,o){var r=n.length,s=r,a=!o;if(null==t)return!s;for(t=Te(t);r--;){var l=n[r];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++r<s;){var c=(l=n[r])[0],d=t[c],u=l[1];if(a&&l[2]){if(d===e&&!(c in t))return!1}else{var h=new Ki;if(o)var p=o(d,u,c,t,i,h);if(!(p===e?In(u,d,3,o,h):p))return!1}}return!0}function Nn(e){return!(!ta(e)||(t=e,$e&&$e in t))&&(Js(e)?ze:ge).test(Gr(e));var t}function Ln(e){return"function"==typeof e?e:null==e?ol:"object"==typeof e?js(e)?zn(e[0],e[1]):Hn(e):pl(e)}function Fn(e){if(!Ar(e))return vi(e);var t=[];for(var i in Te(e))Le.call(e,i)&&"constructor"!=i&&t.push(i);return t}function $n(e){if(!ta(e))return function(e){var t=[];if(null!=e)for(var i in Te(e))t.push(i);return t}(e);var t=Ar(e),i=[];for(var n in e)("constructor"!=n||!t&&Le.call(e,n))&&i.push(n);return i}function Gn(e,t){return e<t}function Bn(e,t){var i=-1,n=Ys(e)?_e(e.length):[];return pn(e,function(e,o,r){n[++i]=t(e,o,r)}),n}function Hn(e){var t=hr(e);return 1==t.length&&t[0][2]?Tr(t[0][0],t[0][1]):function(i){return i===e||On(i,e,t)}}function zn(t,i){return _r(t)&&Er(i)?Tr($r(t),i):function(n){var o=Ta(n,t);return o===e&&o===i?ka(n,t):In(i,o,3)}}function Wn(t,i,n,o,r){t!==i&&yn(i,function(s,a){if(r||(r=new Ki),ta(s))!function(t,i,n,o,r,s,a){var l=Mr(t,n),c=Mr(i,n),d=a.get(c);if(d)return void en(t,n,d);var u=s?s(l,c,n+"",t,i,a):e,h=u===e;if(h){var p=js(c),g=!p&&Ks(c),f=!p&&!g&&da(c);u=c,p||g||f?js(l)?u=l:qs(l)?u=Po(l):g?(h=!1,u=Ao(c,!0)):f?(h=!1,u=To(c,!0)):u=[]:ra(c)||Vs(c)?(u=l,Vs(l)?u=ba(l):ta(l)&&!Js(l)||(u=br(c))):h=!1}h&&(a.set(c,u),r(u,c,o,s,a),a.delete(c));en(t,n,u)}(t,i,a,n,Wn,o,r);else{var l=o?o(Mr(t,a),s,a+"",t,i,r):e;l===e&&(l=s),en(t,a,l)}},Ia)}function Vn(t,i){var n=t.length;if(n)return wr(i+=i<0?n:0,n)?t[i]:e}function jn(e,t,i){t=t.length?Pt(t,function(e){return js(e)?function(t){return xn(t,1===e.length?e[0]:e)}:e}):[ol];var n=-1;t=Pt(t,Kt(dr()));var o=Bn(e,function(e,i,o){var r=Pt(t,function(t){return t(e)});return{criteria:r,index:++n,value:e}});return function(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].value;return e}(o,function(e,t){return function(e,t,i){var n=-1,o=e.criteria,r=t.criteria,s=o.length,a=i.length;for(;++n<s;){var l=ko(o[n],r[n]);if(l)return n>=a?l:l*("desc"==i[n]?-1:1)}return e.index-t.index}(e,t,i)})}function Un(e,t,i){for(var n=-1,o=t.length,r={};++n<o;){var s=t[n],a=xn(e,s);i(a,s)&&eo(r,Co(s,e),a)}return r}function Yn(e,t,i,n){var o=n?Bt:Gt,r=-1,s=t.length,a=e;for(e===t&&(t=Po(t)),i&&(a=Pt(e,Kt(i)));++r<s;)for(var l=0,c=t[r],d=i?i(c):c;(l=o(a,d,l,n))>-1;)a!==e&&Je.call(a,l,1),Je.call(e,l,1);return e}function qn(e,t){for(var i=e?t.length:0,n=i-1;i--;){var o=t[i];if(i==n||o!==r){var r=o;wr(o)?Je.call(e,o,1):po(e,o)}}return e}function Kn(e,t){return e+Lt(_i()*(t-e+1))}function Xn(e,t){var i="";if(!e||t<1||t>d)return i;do{t%2&&(i+=e),(t=Lt(t/2))&&(e+=e)}while(t);return i}function Zn(e,t){return Ir(kr(e,t,ol),e+"")}function Jn(e){return Zi(Ha(e))}function Qn(e,t){var i=Ha(e);return Lr(i,ln(t,0,i.length))}function eo(t,i,n,o){if(!ta(t))return t;for(var r=-1,s=(i=Co(i,t)).length,a=s-1,l=t;null!=l&&++r<s;){var c=$r(i[r]),d=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(r!=a){var u=l[c];(d=o?o(u,c,l):e)===e&&(d=ta(u)?u:wr(i[r+1])?[]:{})}tn(l,c,d),l=l[c]}return t}var to=Mi?function(e,t){return Mi.set(e,t),e}:ol,io=dt?function(e,t){return dt(e,"toString",{configurable:!0,enumerable:!1,value:tl(t),writable:!0})}:ol;function no(e){return Lr(Ha(e))}function oo(e,t,i){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(i=i>o?o:i)<0&&(i+=o),o=t>i?0:i-t>>>0,t>>>=0;for(var r=_e(o);++n<o;)r[n]=e[n+t];return r}function ro(e,t){var i;return pn(e,function(e,n,o){return!(i=t(e,n,o))}),!!i}function so(e,t,i){var n=0,o=null==e?n:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;n<o;){var r=n+o>>>1,s=e[r];null!==s&&!ca(s)&&(i?s<=t:s<t)?n=r+1:o=r}return o}return ao(e,t,ol,i)}function ao(t,i,n,o){var r=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(i=n(i))!=i,l=null===i,c=ca(i),d=i===e;r<s;){var u=Lt((r+s)/2),h=n(t[u]),p=h!==e,g=null===h,f=h==h,m=ca(h);if(a)var v=o||f;else v=d?f&&(o||p):l?f&&p&&(o||!g):c?f&&p&&!g&&(o||!m):!g&&!m&&(o?h<=i:h<i);v?r=u+1:s=u}return yi(s,4294967294)}function lo(e,t){for(var i=-1,n=e.length,o=0,r=[];++i<n;){var s=e[i],a=t?t(s):s;if(!i||!Hs(a,l)){var l=a;r[o++]=0===s?0:s}}return r}function co(e){return"number"==typeof e?e:ca(e)?u:+e}function uo(e){if("string"==typeof e)return e;if(js(e))return Pt(e,uo)+"";if(ca(e))return Gi?Gi.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ho(e,t,i){var n=-1,o=Dt,r=e.length,s=!0,a=[],l=a;if(i)s=!1,o=Mt;else if(r>=200){var c=t?null:Zo(e);if(c)return ai(c);s=!1,o=Zt,l=new qi}else l=t?[]:a;e:for(;++n<r;){var d=e[n],u=t?t(d):d;if(d=i||0!==d?d:0,s&&u==u){for(var h=l.length;h--;)if(l[h]===u)continue e;t&&l.push(u),a.push(d)}else o(l,u,i)||(l!==a&&l.push(u),a.push(d))}return a}function po(e,t){return null==(e=Dr(e,t=Co(t,e)))||delete e[$r(Zr(t))]}function go(e,t,i,n){return eo(e,t,i(xn(e,t)),n)}function fo(e,t,i,n){for(var o=e.length,r=n?o:-1;(n?r--:++r<o)&&t(e[r],r,e););return i?oo(e,n?0:r,n?r+1:o):oo(e,n?r+1:0,n?o:r)}function mo(e,t){var i=e;return i instanceof Vi&&(i=i.value()),It(t,function(e,t){return t.func.apply(t.thisArg,Rt([e],t.args))},i)}function vo(e,t,i){var n=e.length;if(n<2)return n?ho(e[0]):[];for(var o=-1,r=_e(n);++o<n;)for(var s=e[o],a=-1;++a<n;)a!=o&&(r[o]=hn(r[o]||s,e[a],t,i));return ho(bn(r,1),t,i)}function bo(t,i,n){for(var o=-1,r=t.length,s=i.length,a={};++o<r;){var l=o<s?i[o]:e;n(a,t[o],l)}return a}function yo(e){return qs(e)?e:[]}function wo(e){return"function"==typeof e?e:ol}function Co(e,t){return js(e)?e:_r(e,t)?[e]:Fr(ya(e))}var _o=Zn;function So(t,i,n){var o=t.length;return n=n===e?o:n,!i&&n>=o?t:oo(t,i,n)}var xo=ht||function(e){return ut.clearTimeout(e)};function Ao(e,t){if(t)return e.slice();var i=e.length,n=Ue?Ue(i):new e.constructor(i);return e.copy(n),n}function Eo(e){var t=new e.constructor(e.byteLength);return new je(t).set(new je(e)),t}function To(e,t){var i=t?Eo(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function ko(t,i){if(t!==i){var n=t!==e,o=null===t,r=t==t,s=ca(t),a=i!==e,l=null===i,c=i==i,d=ca(i);if(!l&&!d&&!s&&t>i||s&&a&&c&&!l&&!d||o&&a&&c||!n&&c||!r)return 1;if(!o&&!s&&!d&&t<i||d&&n&&r&&!o&&!s||l&&n&&r||!a&&r||!c)return-1}return 0}function Do(e,t,i,n){for(var o=-1,r=e.length,s=i.length,a=-1,l=t.length,c=bi(r-s,0),d=_e(l+c),u=!n;++a<l;)d[a]=t[a];for(;++o<s;)(u||o<r)&&(d[i[o]]=e[o]);for(;c--;)d[a++]=e[o++];return d}function Mo(e,t,i,n){for(var o=-1,r=e.length,s=-1,a=i.length,l=-1,c=t.length,d=bi(r-a,0),u=_e(d+c),h=!n;++o<d;)u[o]=e[o];for(var p=o;++l<c;)u[p+l]=t[l];for(;++s<a;)(h||o<r)&&(u[p+i[s]]=e[o++]);return u}function Po(e,t){var i=-1,n=e.length;for(t||(t=_e(n));++i<n;)t[i]=e[i];return t}function Ro(t,i,n,o){var r=!n;n||(n={});for(var s=-1,a=i.length;++s<a;){var l=i[s],c=o?o(n[l],t[l],l,n,t):e;c===e&&(c=t[l]),r?sn(n,l,c):tn(n,l,c)}return n}function Io(e,t){return function(i,n){var o=js(i)?xt:on,r=t?t():{};return o(i,e,dr(n,2),r)}}function Oo(t){return Zn(function(i,n){var o=-1,r=n.length,s=r>1?n[r-1]:e,a=r>2?n[2]:e;for(s=t.length>3&&"function"==typeof s?(r--,s):e,a&&Cr(n[0],n[1],a)&&(s=r<3?e:s,r=1),i=Te(i);++o<r;){var l=n[o];l&&t(i,l,o,s)}return i})}function No(e,t){return function(i,n){if(null==i)return i;if(!Ys(i))return e(i,n);for(var o=i.length,r=t?o:-1,s=Te(i);(t?r--:++r<o)&&!1!==n(s[r],r,s););return i}}function Lo(e){return function(t,i,n){for(var o=-1,r=Te(t),s=n(t),a=s.length;a--;){var l=s[e?a:++o];if(!1===i(r[l],l,r))break}return t}}function Fo(t){return function(i){var n=ni(i=ya(i))?di(i):e,o=n?n[0]:i.charAt(0),r=n?So(n,1).join(""):i.slice(1);return o[t]()+r}}function $o(e){return function(t){return It(Ja(Va(t).replace(Xe,"")),e,"")}}function Go(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=Hi(e.prototype),n=e.apply(i,t);return ta(n)?n:i}}function Bo(t){return function(i,n,o){var r=Te(i);if(!Ys(i)){var s=dr(n,3);i=Ra(i),n=function(e){return s(r[e],e,r)}}var a=t(i,n,o);return a>-1?r[s?i[a]:a]:e}}function Ho(i){return or(function(n){var o=n.length,r=o,s=Wi.prototype.thru;for(i&&n.reverse();r--;){var a=n[r];if("function"!=typeof a)throw new Me(t);if(s&&!l&&"wrapper"==lr(a))var l=new Wi([],!0)}for(r=l?r:o;++r<o;){var c=lr(a=n[r]),d="wrapper"==c?ar(a):e;l=d&&Sr(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?l[lr(d[0])].apply(l,d[3]):1==a.length&&Sr(a)?l[c]():l.thru(a)}return function(){var e=arguments,t=e[0];if(l&&1==e.length&&js(t))return l.plant(t).value();for(var i=0,r=o?n[i].apply(this,e):t;++i<o;)r=n[i].call(this,r);return r}})}function zo(t,i,n,o,r,s,l,c,d,u){var h=i&a,p=1&i,g=2&i,f=24&i,m=512&i,v=g?e:Go(t);return function a(){for(var b=arguments.length,y=_e(b),w=b;w--;)y[w]=arguments[w];if(f)var C=cr(a),_=function(e,t){for(var i=e.length,n=0;i--;)e[i]===t&&++n;return n}(y,C);if(o&&(y=Do(y,o,r,f)),s&&(y=Mo(y,s,l,f)),b-=_,f&&b<u){var S=si(y,C);return Ko(t,i,zo,a.placeholder,n,y,S,c,d,u-b)}var x=p?n:this,A=g?x[t]:t;return b=y.length,c?y=function(t,i){var n=t.length,o=yi(i.length,n),r=Po(t);for(;o--;){var s=i[o];t[o]=wr(s,n)?r[s]:e}return t}(y,c):m&&b>1&&y.reverse(),h&&d<b&&(y.length=d),this&&this!==ut&&this instanceof a&&(A=v||Go(A)),A.apply(x,y)}}function Wo(e,t){return function(i,n){return function(e,t,i,n){return Cn(e,function(e,o,r){t(n,i(e),o,r)}),n}(i,e,t(n),{})}}function Vo(t,i){return function(n,o){var r;if(n===e&&o===e)return i;if(n!==e&&(r=n),o!==e){if(r===e)return o;"string"==typeof n||"string"==typeof o?(n=uo(n),o=uo(o)):(n=co(n),o=co(o)),r=t(n,o)}return r}}function jo(e){return or(function(t){return t=Pt(t,Kt(dr())),Zn(function(i){var n=this;return e(t,function(e){return St(e,n,i)})})})}function Uo(t,i){var n=(i=i===e?" ":uo(i)).length;if(n<2)return n?Xn(i,t):i;var o=Xn(i,mt(t/ci(i)));return ni(i)?So(di(o),0,t).join(""):o.slice(0,t)}function Yo(t){return function(i,n,o){return o&&"number"!=typeof o&&Cr(i,n,o)&&(n=o=e),i=ga(i),n===e?(n=i,i=0):n=ga(n),function(e,t,i,n){for(var o=-1,r=bi(mt((t-e)/(i||1)),0),s=_e(r);r--;)s[n?r:++o]=e,e+=i;return s}(i,n,o=o===e?i<n?1:-1:ga(o),t)}}function qo(e){return function(t,i){return"string"==typeof t&&"string"==typeof i||(t=va(t),i=va(i)),e(t,i)}}function Ko(t,i,n,o,a,l,c,d,u,h){var p=8&i;i|=p?r:s,4&(i&=~(p?s:r))||(i&=-4);var g=[t,i,a,p?l:e,p?c:e,p?e:l,p?e:c,d,u,h],f=n.apply(e,g);return Sr(t)&&Pr(f,g),f.placeholder=o,Or(f,t,i)}function Xo(e){var t=Ee[e];return function(e,i){if(e=va(e),(i=null==i?0:yi(fa(i),292))&&fi(e)){var n=(ya(e)+"e").split("e");return+((n=(ya(t(n[0]+"e"+(+n[1]+i)))+"e").split("e"))[0]+"e"+(+n[1]-i))}return t(e)}}var Zo=Ti&&1/ai(new Ti([,-0]))[1]==c?function(e){return new Ti(e)}:cl;function Jo(e){return function(t){var i=mr(t);return i==C?oi(t):i==E?li(t):function(e,t){return Pt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Qo(i,c,d,u,h,p,g,f){var m=2&c;if(!m&&"function"!=typeof i)throw new Me(t);var v=u?u.length:0;if(v||(c&=-97,u=h=e),g=g===e?g:bi(fa(g),0),f=f===e?f:fa(f),v-=h?h.length:0,c&s){var b=u,y=h;u=h=e}var w=m?e:ar(i),C=[i,c,d,u,h,b,y,p,g,f];if(w&&function(e,t){var i=e[1],o=t[1],r=i|o,s=r<131,c=o==a&&8==i||o==a&&i==l&&e[7].length<=t[8]||384==o&&t[7].length<=t[8]&&8==i;if(!s&&!c)return e;1&o&&(e[2]=t[2],r|=1&i?0:4);var d=t[3];if(d){var u=e[3];e[3]=u?Do(u,d,t[4]):d,e[4]=u?si(e[3],n):t[4]}(d=t[5])&&(u=e[5],e[5]=u?Mo(u,d,t[6]):d,e[6]=u?si(e[5],n):t[6]);(d=t[7])&&(e[7]=d);o&a&&(e[8]=null==e[8]?t[8]:yi(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=r}(C,w),i=C[0],c=C[1],d=C[2],u=C[3],h=C[4],!(f=C[9]=C[9]===e?m?0:i.length:bi(C[9]-v,0))&&24&c&&(c&=-25),c&&1!=c)_=8==c||c==o?function(t,i,n){var o=Go(t);return function r(){for(var s=arguments.length,a=_e(s),l=s,c=cr(r);l--;)a[l]=arguments[l];var d=s<3&&a[0]!==c&&a[s-1]!==c?[]:si(a,c);return(s-=d.length)<n?Ko(t,i,zo,r.placeholder,e,a,d,e,e,n-s):St(this&&this!==ut&&this instanceof r?o:t,this,a)}}(i,c,f):c!=r&&33!=c||h.length?zo.apply(e,C):function(e,t,i,n){var o=1&t,r=Go(e);return function t(){for(var s=-1,a=arguments.length,l=-1,c=n.length,d=_e(c+a),u=this&&this!==ut&&this instanceof t?r:e;++l<c;)d[l]=n[l];for(;a--;)d[l++]=arguments[++s];return St(u,o?i:this,d)}}(i,c,d,u);else var _=function(e,t,i){var n=1&t,o=Go(e);return function t(){return(this&&this!==ut&&this instanceof t?o:e).apply(n?i:this,arguments)}}(i,c,d);return Or((w?to:Pr)(_,C),i,c)}function er(t,i,n,o){return t===e||Hs(t,Ie[n])&&!Le.call(o,n)?i:t}function tr(t,i,n,o,r,s){return ta(t)&&ta(i)&&(s.set(i,t),Wn(t,i,e,tr,s),s.delete(i)),t}function ir(t){return ra(t)?e:t}function nr(t,i,n,o,r,s){var a=1&n,l=t.length,c=i.length;if(l!=c&&!(a&&c>l))return!1;var d=s.get(t),u=s.get(i);if(d&&u)return d==i&&u==t;var h=-1,p=!0,g=2&n?new qi:e;for(s.set(t,i),s.set(i,t);++h<l;){var f=t[h],m=i[h];if(o)var v=a?o(m,f,h,i,t,s):o(f,m,h,t,i,s);if(v!==e){if(v)continue;p=!1;break}if(g){if(!Nt(i,function(e,t){if(!Zt(g,t)&&(f===e||r(f,e,n,o,s)))return g.push(t)})){p=!1;break}}else if(f!==m&&!r(f,m,n,o,s)){p=!1;break}}return s.delete(t),s.delete(i),p}function or(t){return Ir(kr(t,e,Ur),t+"")}function rr(e){return An(e,Ra,gr)}function sr(e){return An(e,Ia,fr)}var ar=Mi?function(e){return Mi.get(e)}:cl;function lr(e){for(var t=e.name+"",i=Pi[t],n=Le.call(Pi,t)?i.length:0;n--;){var o=i[n],r=o.func;if(null==r||r==e)return o.name}return t}function cr(e){return(Le.call(Bi,"placeholder")?Bi:e).placeholder}function dr(){var e=Bi.iteratee||rl;return e=e===rl?Ln:e,arguments.length?e(arguments[0],arguments[1]):e}function ur(e,t){var i,n,o=e.__data__;return("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?o["string"==typeof t?"string":"hash"]:o.map}function hr(e){for(var t=Ra(e),i=t.length;i--;){var n=t[i],o=e[n];t[i]=[n,o,Er(o)]}return t}function pr(t,i){var n=function(t,i){return null==t?e:t[i]}(t,i);return Nn(n)?n:e}var gr=Vt?function(e){return null==e?[]:(e=Te(e),kt(Vt(e),function(t){return Ke.call(e,t)}))}:ml,fr=Vt?function(e){for(var t=[];e;)Rt(t,gr(e)),e=Ye(e);return t}:ml,mr=En;function vr(e,t,i){for(var n=-1,o=(t=Co(t,e)).length,r=!1;++n<o;){var s=$r(t[n]);if(!(r=null!=e&&i(e,s)))break;e=e[s]}return r||++n!=o?r:!!(o=null==e?0:e.length)&&ea(o)&&wr(s,o)&&(js(e)||Vs(e))}function br(e){return"function"!=typeof e.constructor||Ar(e)?{}:Hi(Ye(e))}function yr(e){return js(e)||Vs(e)||!!(et&&e&&e[et])}function wr(e,t){var i=typeof e;return!!(t=null==t?d:t)&&("number"==i||"symbol"!=i&&me.test(e))&&e>-1&&e%1==0&&e<t}function Cr(e,t,i){if(!ta(i))return!1;var n=typeof t;return!!("number"==n?Ys(i)&&wr(t,i.length):"string"==n&&t in i)&&Hs(i[t],e)}function _r(e,t){if(js(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!ca(e))||(J.test(e)||!Z.test(e)||null!=t&&e in Te(t))}function Sr(e){var t=lr(e),i=Bi[t];if("function"!=typeof i||!(t in Vi.prototype))return!1;if(e===i)return!0;var n=ar(i);return!!n&&e===n[0]}(xi&&mr(new xi(new ArrayBuffer(1)))!=P||Ai&&mr(new Ai)!=C||Ei&&mr(Ei.resolve())!=x||Ti&&mr(new Ti)!=E||ki&&mr(new ki)!=D)&&(mr=function(t){var i=En(t),n=i==S?t.constructor:e,o=n?Gr(n):"";if(o)switch(o){case Ri:return P;case Ii:return C;case Oi:return x;case Ni:return E;case Li:return D}return i});var xr=Oe?Js:vl;function Ar(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ie)}function Er(e){return e==e&&!ta(e)}function Tr(t,i){return function(n){return null!=n&&(n[t]===i&&(i!==e||t in Te(n)))}}function kr(t,i,n){return i=bi(i===e?t.length-1:i,0),function(){for(var e=arguments,o=-1,r=bi(e.length-i,0),s=_e(r);++o<r;)s[o]=e[i+o];o=-1;for(var a=_e(i+1);++o<i;)a[o]=e[o];return a[i]=n(s),St(t,this,a)}}function Dr(e,t){return t.length<2?e:xn(e,oo(t,0,-1))}function Mr(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Pr=Nr(to),Rr=ft||function(e,t){return ut.setTimeout(e,t)},Ir=Nr(io);function Or(e,t,i){var n=t+"";return Ir(e,function(e,t){var i=t.length;if(!i)return e;var n=i-1;return t[n]=(i>1?"& ":"")+t[n],t=t.join(i>2?", ":" "),e.replace(oe,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return At(p,function(i){var n="_."+i[0];t&i[1]&&!Dt(e,n)&&e.push(n)}),e.sort()}(function(e){var t=e.match(re);return t?t[1].split(se):[]}(n),i)))}function Nr(t){var i=0,n=0;return function(){var o=wi(),r=16-(o-n);if(n=o,r>0){if(++i>=800)return arguments[0]}else i=0;return t.apply(e,arguments)}}function Lr(t,i){var n=-1,o=t.length,r=o-1;for(i=i===e?o:i;++n<i;){var s=Kn(n,r),a=t[s];t[s]=t[n],t[n]=a}return t.length=i,t}var Fr=function(e){var t=Ns(e,function(e){return 500===i.size&&i.clear(),e}),i=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Q,function(e,i,n,o){t.push(n?o.replace(ce,"$1"):i||e)}),t});function $r(e){if("string"==typeof e||ca(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Gr(e){if(null!=e){try{return Ne.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Br(e){if(e instanceof Vi)return e.clone();var t=new Wi(e.__wrapped__,e.__chain__);return t.__actions__=Po(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Hr=Zn(function(e,t){return qs(e)?hn(e,bn(t,1,qs,!0)):[]}),zr=Zn(function(t,i){var n=Zr(i);return qs(n)&&(n=e),qs(t)?hn(t,bn(i,1,qs,!0),dr(n,2)):[]}),Wr=Zn(function(t,i){var n=Zr(i);return qs(n)&&(n=e),qs(t)?hn(t,bn(i,1,qs,!0),e,n):[]});function Vr(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var o=null==i?0:fa(i);return o<0&&(o=bi(n+o,0)),$t(e,dr(t,3),o)}function jr(t,i,n){var o=null==t?0:t.length;if(!o)return-1;var r=o-1;return n!==e&&(r=fa(n),r=n<0?bi(o+r,0):yi(r,o-1)),$t(t,dr(i,3),r,!0)}function Ur(e){return(null==e?0:e.length)?bn(e,1):[]}function Yr(t){return t&&t.length?t[0]:e}var qr=Zn(function(e){var t=Pt(e,yo);return t.length&&t[0]===e[0]?Mn(t):[]}),Kr=Zn(function(t){var i=Zr(t),n=Pt(t,yo);return i===Zr(n)?i=e:n.pop(),n.length&&n[0]===t[0]?Mn(n,dr(i,2)):[]}),Xr=Zn(function(t){var i=Zr(t),n=Pt(t,yo);return(i="function"==typeof i?i:e)&&n.pop(),n.length&&n[0]===t[0]?Mn(n,e,i):[]});function Zr(t){var i=null==t?0:t.length;return i?t[i-1]:e}var Jr=Zn(Qr);function Qr(e,t){return e&&e.length&&t&&t.length?Yn(e,t):e}var es=or(function(e,t){var i=null==e?0:e.length,n=an(e,t);return qn(e,Pt(t,function(e){return wr(e,i)?+e:e}).sort(ko)),n});function ts(e){return null==e?e:Si.call(e)}var is=Zn(function(e){return ho(bn(e,1,qs,!0))}),ns=Zn(function(t){var i=Zr(t);return qs(i)&&(i=e),ho(bn(t,1,qs,!0),dr(i,2))}),os=Zn(function(t){var i=Zr(t);return i="function"==typeof i?i:e,ho(bn(t,1,qs,!0),e,i)});function rs(e){if(!e||!e.length)return[];var t=0;return e=kt(e,function(e){if(qs(e))return t=bi(e.length,t),!0}),Yt(t,function(t){return Pt(e,Wt(t))})}function ss(t,i){if(!t||!t.length)return[];var n=rs(t);return null==i?n:Pt(n,function(t){return St(i,e,t)})}var as=Zn(function(e,t){return qs(e)?hn(e,t):[]}),ls=Zn(function(e){return vo(kt(e,qs))}),cs=Zn(function(t){var i=Zr(t);return qs(i)&&(i=e),vo(kt(t,qs),dr(i,2))}),ds=Zn(function(t){var i=Zr(t);return i="function"==typeof i?i:e,vo(kt(t,qs),e,i)}),us=Zn(rs);var hs=Zn(function(t){var i=t.length,n=i>1?t[i-1]:e;return n="function"==typeof n?(t.pop(),n):e,ss(t,n)});function ps(e){var t=Bi(e);return t.__chain__=!0,t}function gs(e,t){return t(e)}var fs=or(function(t){var i=t.length,n=i?t[0]:0,o=this.__wrapped__,r=function(e){return an(e,t)};return!(i>1||this.__actions__.length)&&o instanceof Vi&&wr(n)?((o=o.slice(n,+n+(i?1:0))).__actions__.push({func:gs,args:[r],thisArg:e}),new Wi(o,this.__chain__).thru(function(t){return i&&!t.length&&t.push(e),t})):this.thru(r)});var ms=Io(function(e,t,i){Le.call(e,i)?++e[i]:sn(e,i,1)});var vs=Bo(Vr),bs=Bo(jr);function ys(e,t){return(js(e)?At:pn)(e,dr(t,3))}function ws(e,t){return(js(e)?Et:gn)(e,dr(t,3))}var Cs=Io(function(e,t,i){Le.call(e,i)?e[i].push(t):sn(e,i,[t])});var _s=Zn(function(e,t,i){var n=-1,o="function"==typeof t,r=Ys(e)?_e(e.length):[];return pn(e,function(e){r[++n]=o?St(t,e,i):Pn(e,t,i)}),r}),Ss=Io(function(e,t,i){sn(e,i,t)});function xs(e,t){return(js(e)?Pt:Bn)(e,dr(t,3))}var As=Io(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]});var Es=Zn(function(e,t){if(null==e)return[];var i=t.length;return i>1&&Cr(e,t[0],t[1])?t=[]:i>2&&Cr(t[0],t[1],t[2])&&(t=[t[0]]),jn(e,bn(t,1),[])}),Ts=pt||function(){return ut.Date.now()};function ks(t,i,n){return i=n?e:i,i=t&&null==i?t.length:i,Qo(t,a,e,e,e,e,i)}function Ds(i,n){var o;if("function"!=typeof n)throw new Me(t);return i=fa(i),function(){return--i>0&&(o=n.apply(this,arguments)),i<=1&&(n=e),o}}var Ms=Zn(function(e,t,i){var n=1;if(i.length){var o=si(i,cr(Ms));n|=r}return Qo(e,n,t,i,o)}),Ps=Zn(function(e,t,i){var n=3;if(i.length){var o=si(i,cr(Ps));n|=r}return Qo(t,n,e,i,o)});function Rs(i,n,o){var r,s,a,l,c,d,u=0,h=!1,p=!1,g=!0;if("function"!=typeof i)throw new Me(t);function f(t){var n=r,o=s;return r=s=e,u=t,l=i.apply(o,n)}function m(t){var i=t-d;return d===e||i>=n||i<0||p&&t-u>=a}function v(){var e=Ts();if(m(e))return b(e);c=Rr(v,function(e){var t=n-(e-d);return p?yi(t,a-(e-u)):t}(e))}function b(t){return c=e,g&&r?f(t):(r=s=e,l)}function y(){var t=Ts(),i=m(t);if(r=arguments,s=this,d=t,i){if(c===e)return function(e){return u=e,c=Rr(v,n),h?f(e):l}(d);if(p)return xo(c),c=Rr(v,n),f(d)}return c===e&&(c=Rr(v,n)),l}return n=va(n)||0,ta(o)&&(h=!!o.leading,a=(p="maxWait"in o)?bi(va(o.maxWait)||0,n):a,g="trailing"in o?!!o.trailing:g),y.cancel=function(){c!==e&&xo(c),u=0,r=d=s=c=e},y.flush=function(){return c===e?l:b(Ts())},y}var Is=Zn(function(e,t){return un(e,1,t)}),Os=Zn(function(e,t,i){return un(e,va(t)||0,i)});function Ns(e,i){if("function"!=typeof e||null!=i&&"function"!=typeof i)throw new Me(t);var n=function(){var t=arguments,o=i?i.apply(this,t):t[0],r=n.cache;if(r.has(o))return r.get(o);var s=e.apply(this,t);return n.cache=r.set(o,s)||r,s};return n.cache=new(Ns.Cache||Yi),n}function Ls(e){if("function"!=typeof e)throw new Me(t);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ns.Cache=Yi;var Fs=_o(function(e,t){var i=(t=1==t.length&&js(t[0])?Pt(t[0],Kt(dr())):Pt(bn(t,1),Kt(dr()))).length;return Zn(function(n){for(var o=-1,r=yi(n.length,i);++o<r;)n[o]=t[o].call(this,n[o]);return St(e,this,n)})}),$s=Zn(function(t,i){var n=si(i,cr($s));return Qo(t,r,e,i,n)}),Gs=Zn(function(t,i){var n=si(i,cr(Gs));return Qo(t,s,e,i,n)}),Bs=or(function(t,i){return Qo(t,l,e,e,e,i)});function Hs(e,t){return e===t||e!=e&&t!=t}var zs=qo(Tn),Ws=qo(function(e,t){return e>=t}),Vs=Rn(function(){return arguments}())?Rn:function(e){return ia(e)&&Le.call(e,"callee")&&!Ke.call(e,"callee")},js=_e.isArray,Us=vt?Kt(vt):function(e){return ia(e)&&En(e)==M};function Ys(e){return null!=e&&ea(e.length)&&!Js(e)}function qs(e){return ia(e)&&Ys(e)}var Ks=gi||vl,Xs=bt?Kt(bt):function(e){return ia(e)&&En(e)==v};function Zs(e){if(!ia(e))return!1;var t=En(e);return t==b||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ra(e)}function Js(e){if(!ta(e))return!1;var t=En(e);return t==y||t==w||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Qs(e){return"number"==typeof e&&e==fa(e)}function ea(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function ta(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ia(e){return null!=e&&"object"==typeof e}var na=yt?Kt(yt):function(e){return ia(e)&&mr(e)==C};function oa(e){return"number"==typeof e||ia(e)&&En(e)==_}function ra(e){if(!ia(e)||En(e)!=S)return!1;var t=Ye(e);if(null===t)return!0;var i=Le.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&Ne.call(i)==Be}var sa=wt?Kt(wt):function(e){return ia(e)&&En(e)==A};var aa=Ct?Kt(Ct):function(e){return ia(e)&&mr(e)==E};function la(e){return"string"==typeof e||!js(e)&&ia(e)&&En(e)==T}function ca(e){return"symbol"==typeof e||ia(e)&&En(e)==k}var da=_t?Kt(_t):function(e){return ia(e)&&ea(e.length)&&!!ot[En(e)]};var ua=qo(Gn),ha=qo(function(e,t){return e<=t});function pa(e){if(!e)return[];if(Ys(e))return la(e)?di(e):Po(e);if(st&&e[st])return function(e){for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i}(e[st]());var t=mr(e);return(t==C?oi:t==E?ai:Ha)(e)}function ga(e){return e?(e=va(e))===c||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function fa(e){var t=ga(e),i=t%1;return t==t?i?t-i:t:0}function ma(e){return e?ln(fa(e),0,h):0}function va(e){if("number"==typeof e)return e;if(ca(e))return u;if(ta(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ta(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=qt(e);var i=pe.test(e);return i||fe.test(e)?lt(e.slice(2),i?2:8):he.test(e)?u:+e}function ba(e){return Ro(e,Ia(e))}function ya(e){return null==e?"":uo(e)}var wa=Oo(function(e,t){if(Ar(t)||Ys(t))Ro(t,Ra(t),e);else for(var i in t)Le.call(t,i)&&tn(e,i,t[i])}),Ca=Oo(function(e,t){Ro(t,Ia(t),e)}),_a=Oo(function(e,t,i,n){Ro(t,Ia(t),e,n)}),Sa=Oo(function(e,t,i,n){Ro(t,Ra(t),e,n)}),xa=or(an);var Aa=Zn(function(t,i){t=Te(t);var n=-1,o=i.length,r=o>2?i[2]:e;for(r&&Cr(i[0],i[1],r)&&(o=1);++n<o;)for(var s=i[n],a=Ia(s),l=-1,c=a.length;++l<c;){var d=a[l],u=t[d];(u===e||Hs(u,Ie[d])&&!Le.call(t,d))&&(t[d]=s[d])}return t}),Ea=Zn(function(t){return t.push(e,tr),St(Na,e,t)});function Ta(t,i,n){var o=null==t?e:xn(t,i);return o===e?n:o}function ka(e,t){return null!=e&&vr(e,t,Dn)}var Da=Wo(function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=Ge.call(t)),e[t]=i},tl(ol)),Ma=Wo(function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=Ge.call(t)),Le.call(e,t)?e[t].push(i):e[t]=[i]},dr),Pa=Zn(Pn);function Ra(e){return Ys(e)?Xi(e):Fn(e)}function Ia(e){return Ys(e)?Xi(e,!0):$n(e)}var Oa=Oo(function(e,t,i){Wn(e,t,i)}),Na=Oo(function(e,t,i,n){Wn(e,t,i,n)}),La=or(function(e,t){var i={};if(null==e)return i;var n=!1;t=Pt(t,function(t){return t=Co(t,e),n||(n=t.length>1),t}),Ro(e,sr(e),i),n&&(i=cn(i,7,ir));for(var o=t.length;o--;)po(i,t[o]);return i});var Fa=or(function(e,t){return null==e?{}:function(e,t){return Un(e,t,function(t,i){return ka(e,i)})}(e,t)});function $a(e,t){if(null==e)return{};var i=Pt(sr(e),function(e){return[e]});return t=dr(t),Un(e,i,function(e,i){return t(e,i[0])})}var Ga=Jo(Ra),Ba=Jo(Ia);function Ha(e){return null==e?[]:Xt(e,Ra(e))}var za=$o(function(e,t,i){return t=t.toLowerCase(),e+(i?Wa(t):t)});function Wa(e){return Za(ya(e).toLowerCase())}function Va(e){return(e=ya(e))&&e.replace(ve,ei).replace(Ze,"")}var ja=$o(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),Ua=$o(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),Ya=Fo("toLowerCase");var qa=$o(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()});var Ka=$o(function(e,t,i){return e+(i?" ":"")+Za(t)});var Xa=$o(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}),Za=Fo("toUpperCase");function Ja(t,i,n){return t=ya(t),(i=n?e:i)===e?function(e){return tt.test(e)}(t)?function(e){return e.match(Qe)||[]}(t):function(e){return e.match(ae)||[]}(t):t.match(i)||[]}var Qa=Zn(function(t,i){try{return St(t,e,i)}catch(e){return Zs(e)?e:new xe(e)}}),el=or(function(e,t){return At(t,function(t){t=$r(t),sn(e,t,Ms(e[t],e))}),e});function tl(e){return function(){return e}}var il=Ho(),nl=Ho(!0);function ol(e){return e}function rl(e){return Ln("function"==typeof e?e:cn(e,1))}var sl=Zn(function(e,t){return function(i){return Pn(i,e,t)}}),al=Zn(function(e,t){return function(i){return Pn(e,i,t)}});function ll(e,t,i){var n=Ra(t),o=Sn(t,n);null!=i||ta(t)&&(o.length||!n.length)||(i=t,t=e,e=this,o=Sn(t,Ra(t)));var r=!(ta(i)&&"chain"in i&&!i.chain),s=Js(e);return At(o,function(i){var n=t[i];e[i]=n,s&&(e.prototype[i]=function(){var t=this.__chain__;if(r||t){var i=e(this.__wrapped__);return(i.__actions__=Po(this.__actions__)).push({func:n,args:arguments,thisArg:e}),i.__chain__=t,i}return n.apply(e,Rt([this.value()],arguments))})}),e}function cl(){}var dl=jo(Pt),ul=jo(Tt),hl=jo(Nt);function pl(e){return _r(e)?Wt($r(e)):function(e){return function(t){return xn(t,e)}}(e)}var gl=Yo(),fl=Yo(!0);function ml(){return[]}function vl(){return!1}var bl=Vo(function(e,t){return e+t},0),yl=Xo("ceil"),wl=Vo(function(e,t){return e/t},1),Cl=Xo("floor");var _l,Sl=Vo(function(e,t){return e*t},1),xl=Xo("round"),Al=Vo(function(e,t){return e-t},0);return Bi.after=function(e,i){if("function"!=typeof i)throw new Me(t);return e=fa(e),function(){if(--e<1)return i.apply(this,arguments)}},Bi.ary=ks,Bi.assign=wa,Bi.assignIn=Ca,Bi.assignInWith=_a,Bi.assignWith=Sa,Bi.at=xa,Bi.before=Ds,Bi.bind=Ms,Bi.bindAll=el,Bi.bindKey=Ps,Bi.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return js(e)?e:[e]},Bi.chain=ps,Bi.chunk=function(t,i,n){i=(n?Cr(t,i,n):i===e)?1:bi(fa(i),0);var o=null==t?0:t.length;if(!o||i<1)return[];for(var r=0,s=0,a=_e(mt(o/i));r<o;)a[s++]=oo(t,r,r+=i);return a},Bi.compact=function(e){for(var t=-1,i=null==e?0:e.length,n=0,o=[];++t<i;){var r=e[t];r&&(o[n++]=r)}return o},Bi.concat=function(){var e=arguments.length;if(!e)return[];for(var t=_e(e-1),i=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Rt(js(i)?Po(i):[i],bn(t,1))},Bi.cond=function(e){var i=null==e?0:e.length,n=dr();return e=i?Pt(e,function(e){if("function"!=typeof e[1])throw new Me(t);return[n(e[0]),e[1]]}):[],Zn(function(t){for(var n=-1;++n<i;){var o=e[n];if(St(o[0],this,t))return St(o[1],this,t)}})},Bi.conforms=function(e){return function(e){var t=Ra(e);return function(i){return dn(i,e,t)}}(cn(e,1))},Bi.constant=tl,Bi.countBy=ms,Bi.create=function(e,t){var i=Hi(e);return null==t?i:rn(i,t)},Bi.curry=function t(i,n,o){var r=Qo(i,8,e,e,e,e,e,n=o?e:n);return r.placeholder=t.placeholder,r},Bi.curryRight=function t(i,n,r){var s=Qo(i,o,e,e,e,e,e,n=r?e:n);return s.placeholder=t.placeholder,s},Bi.debounce=Rs,Bi.defaults=Aa,Bi.defaultsDeep=Ea,Bi.defer=Is,Bi.delay=Os,Bi.difference=Hr,Bi.differenceBy=zr,Bi.differenceWith=Wr,Bi.drop=function(t,i,n){var o=null==t?0:t.length;return o?oo(t,(i=n||i===e?1:fa(i))<0?0:i,o):[]},Bi.dropRight=function(t,i,n){var o=null==t?0:t.length;return o?oo(t,0,(i=o-(i=n||i===e?1:fa(i)))<0?0:i):[]},Bi.dropRightWhile=function(e,t){return e&&e.length?fo(e,dr(t,3),!0,!0):[]},Bi.dropWhile=function(e,t){return e&&e.length?fo(e,dr(t,3),!0):[]},Bi.fill=function(t,i,n,o){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Cr(t,i,n)&&(n=0,o=r),function(t,i,n,o){var r=t.length;for((n=fa(n))<0&&(n=-n>r?0:r+n),(o=o===e||o>r?r:fa(o))<0&&(o+=r),o=n>o?0:ma(o);n<o;)t[n++]=i;return t}(t,i,n,o)):[]},Bi.filter=function(e,t){return(js(e)?kt:vn)(e,dr(t,3))},Bi.flatMap=function(e,t){return bn(xs(e,t),1)},Bi.flatMapDeep=function(e,t){return bn(xs(e,t),c)},Bi.flatMapDepth=function(t,i,n){return n=n===e?1:fa(n),bn(xs(t,i),n)},Bi.flatten=Ur,Bi.flattenDeep=function(e){return(null==e?0:e.length)?bn(e,c):[]},Bi.flattenDepth=function(t,i){return(null==t?0:t.length)?bn(t,i=i===e?1:fa(i)):[]},Bi.flip=function(e){return Qo(e,512)},Bi.flow=il,Bi.flowRight=nl,Bi.fromPairs=function(e){for(var t=-1,i=null==e?0:e.length,n={};++t<i;){var o=e[t];n[o[0]]=o[1]}return n},Bi.functions=function(e){return null==e?[]:Sn(e,Ra(e))},Bi.functionsIn=function(e){return null==e?[]:Sn(e,Ia(e))},Bi.groupBy=Cs,Bi.initial=function(e){return(null==e?0:e.length)?oo(e,0,-1):[]},Bi.intersection=qr,Bi.intersectionBy=Kr,Bi.intersectionWith=Xr,Bi.invert=Da,Bi.invertBy=Ma,Bi.invokeMap=_s,Bi.iteratee=rl,Bi.keyBy=Ss,Bi.keys=Ra,Bi.keysIn=Ia,Bi.map=xs,Bi.mapKeys=function(e,t){var i={};return t=dr(t,3),Cn(e,function(e,n,o){sn(i,t(e,n,o),e)}),i},Bi.mapValues=function(e,t){var i={};return t=dr(t,3),Cn(e,function(e,n,o){sn(i,n,t(e,n,o))}),i},Bi.matches=function(e){return Hn(cn(e,1))},Bi.matchesProperty=function(e,t){return zn(e,cn(t,1))},Bi.memoize=Ns,Bi.merge=Oa,Bi.mergeWith=Na,Bi.method=sl,Bi.methodOf=al,Bi.mixin=ll,Bi.negate=Ls,Bi.nthArg=function(e){return e=fa(e),Zn(function(t){return Vn(t,e)})},Bi.omit=La,Bi.omitBy=function(e,t){return $a(e,Ls(dr(t)))},Bi.once=function(e){return Ds(2,e)},Bi.orderBy=function(t,i,n,o){return null==t?[]:(js(i)||(i=null==i?[]:[i]),js(n=o?e:n)||(n=null==n?[]:[n]),jn(t,i,n))},Bi.over=dl,Bi.overArgs=Fs,Bi.overEvery=ul,Bi.overSome=hl,Bi.partial=$s,Bi.partialRight=Gs,Bi.partition=As,Bi.pick=Fa,Bi.pickBy=$a,Bi.property=pl,Bi.propertyOf=function(t){return function(i){return null==t?e:xn(t,i)}},Bi.pull=Jr,Bi.pullAll=Qr,Bi.pullAllBy=function(e,t,i){return e&&e.length&&t&&t.length?Yn(e,t,dr(i,2)):e},Bi.pullAllWith=function(t,i,n){return t&&t.length&&i&&i.length?Yn(t,i,e,n):t},Bi.pullAt=es,Bi.range=gl,Bi.rangeRight=fl,Bi.rearg=Bs,Bi.reject=function(e,t){return(js(e)?kt:vn)(e,Ls(dr(t,3)))},Bi.remove=function(e,t){var i=[];if(!e||!e.length)return i;var n=-1,o=[],r=e.length;for(t=dr(t,3);++n<r;){var s=e[n];t(s,n,e)&&(i.push(s),o.push(n))}return qn(e,o),i},Bi.rest=function(i,n){if("function"!=typeof i)throw new Me(t);return Zn(i,n=n===e?n:fa(n))},Bi.reverse=ts,Bi.sampleSize=function(t,i,n){return i=(n?Cr(t,i,n):i===e)?1:fa(i),(js(t)?Ji:Qn)(t,i)},Bi.set=function(e,t,i){return null==e?e:eo(e,t,i)},Bi.setWith=function(t,i,n,o){return o="function"==typeof o?o:e,null==t?t:eo(t,i,n,o)},Bi.shuffle=function(e){return(js(e)?Qi:no)(e)},Bi.slice=function(t,i,n){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&Cr(t,i,n)?(i=0,n=o):(i=null==i?0:fa(i),n=n===e?o:fa(n)),oo(t,i,n)):[]},Bi.sortBy=Es,Bi.sortedUniq=function(e){return e&&e.length?lo(e):[]},Bi.sortedUniqBy=function(e,t){return e&&e.length?lo(e,dr(t,2)):[]},Bi.split=function(t,i,n){return n&&"number"!=typeof n&&Cr(t,i,n)&&(i=n=e),(n=n===e?h:n>>>0)?(t=ya(t))&&("string"==typeof i||null!=i&&!sa(i))&&!(i=uo(i))&&ni(t)?So(di(t),0,n):t.split(i,n):[]},Bi.spread=function(e,i){if("function"!=typeof e)throw new Me(t);return i=null==i?0:bi(fa(i),0),Zn(function(t){var n=t[i],o=So(t,0,i);return n&&Rt(o,n),St(e,this,o)})},Bi.tail=function(e){var t=null==e?0:e.length;return t?oo(e,1,t):[]},Bi.take=function(t,i,n){return t&&t.length?oo(t,0,(i=n||i===e?1:fa(i))<0?0:i):[]},Bi.takeRight=function(t,i,n){var o=null==t?0:t.length;return o?oo(t,(i=o-(i=n||i===e?1:fa(i)))<0?0:i,o):[]},Bi.takeRightWhile=function(e,t){return e&&e.length?fo(e,dr(t,3),!1,!0):[]},Bi.takeWhile=function(e,t){return e&&e.length?fo(e,dr(t,3)):[]},Bi.tap=function(e,t){return t(e),e},Bi.throttle=function(e,i,n){var o=!0,r=!0;if("function"!=typeof e)throw new Me(t);return ta(n)&&(o="leading"in n?!!n.leading:o,r="trailing"in n?!!n.trailing:r),Rs(e,i,{leading:o,maxWait:i,trailing:r})},Bi.thru=gs,Bi.toArray=pa,Bi.toPairs=Ga,Bi.toPairsIn=Ba,Bi.toPath=function(e){return js(e)?Pt(e,$r):ca(e)?[e]:Po(Fr(ya(e)))},Bi.toPlainObject=ba,Bi.transform=function(e,t,i){var n=js(e),o=n||Ks(e)||da(e);if(t=dr(t,4),null==i){var r=e&&e.constructor;i=o?n?new r:[]:ta(e)&&Js(r)?Hi(Ye(e)):{}}return(o?At:Cn)(e,function(e,n,o){return t(i,e,n,o)}),i},Bi.unary=function(e){return ks(e,1)},Bi.union=is,Bi.unionBy=ns,Bi.unionWith=os,Bi.uniq=function(e){return e&&e.length?ho(e):[]},Bi.uniqBy=function(e,t){return e&&e.length?ho(e,dr(t,2)):[]},Bi.uniqWith=function(t,i){return i="function"==typeof i?i:e,t&&t.length?ho(t,e,i):[]},Bi.unset=function(e,t){return null==e||po(e,t)},Bi.unzip=rs,Bi.unzipWith=ss,Bi.update=function(e,t,i){return null==e?e:go(e,t,wo(i))},Bi.updateWith=function(t,i,n,o){return o="function"==typeof o?o:e,null==t?t:go(t,i,wo(n),o)},Bi.values=Ha,Bi.valuesIn=function(e){return null==e?[]:Xt(e,Ia(e))},Bi.without=as,Bi.words=Ja,Bi.wrap=function(e,t){return $s(wo(t),e)},Bi.xor=ls,Bi.xorBy=cs,Bi.xorWith=ds,Bi.zip=us,Bi.zipObject=function(e,t){return bo(e||[],t||[],tn)},Bi.zipObjectDeep=function(e,t){return bo(e||[],t||[],eo)},Bi.zipWith=hs,Bi.entries=Ga,Bi.entriesIn=Ba,Bi.extend=Ca,Bi.extendWith=_a,ll(Bi,Bi),Bi.add=bl,Bi.attempt=Qa,Bi.camelCase=za,Bi.capitalize=Wa,Bi.ceil=yl,Bi.clamp=function(t,i,n){return n===e&&(n=i,i=e),n!==e&&(n=(n=va(n))==n?n:0),i!==e&&(i=(i=va(i))==i?i:0),ln(va(t),i,n)},Bi.clone=function(e){return cn(e,4)},Bi.cloneDeep=function(e){return cn(e,5)},Bi.cloneDeepWith=function(t,i){return cn(t,5,i="function"==typeof i?i:e)},Bi.cloneWith=function(t,i){return cn(t,4,i="function"==typeof i?i:e)},Bi.conformsTo=function(e,t){return null==t||dn(e,t,Ra(t))},Bi.deburr=Va,Bi.defaultTo=function(e,t){return null==e||e!=e?t:e},Bi.divide=wl,Bi.endsWith=function(t,i,n){t=ya(t),i=uo(i);var o=t.length,r=n=n===e?o:ln(fa(n),0,o);return(n-=i.length)>=0&&t.slice(n,r)==i},Bi.eq=Hs,Bi.escape=function(e){return(e=ya(e))&&Y.test(e)?e.replace(j,ti):e},Bi.escapeRegExp=function(e){return(e=ya(e))&&te.test(e)?e.replace(ee,"\\$&"):e},Bi.every=function(t,i,n){var o=js(t)?Tt:fn;return n&&Cr(t,i,n)&&(i=e),o(t,dr(i,3))},Bi.find=vs,Bi.findIndex=Vr,Bi.findKey=function(e,t){return Ft(e,dr(t,3),Cn)},Bi.findLast=bs,Bi.findLastIndex=jr,Bi.findLastKey=function(e,t){return Ft(e,dr(t,3),_n)},Bi.floor=Cl,Bi.forEach=ys,Bi.forEachRight=ws,Bi.forIn=function(e,t){return null==e?e:yn(e,dr(t,3),Ia)},Bi.forInRight=function(e,t){return null==e?e:wn(e,dr(t,3),Ia)},Bi.forOwn=function(e,t){return e&&Cn(e,dr(t,3))},Bi.forOwnRight=function(e,t){return e&&_n(e,dr(t,3))},Bi.get=Ta,Bi.gt=zs,Bi.gte=Ws,Bi.has=function(e,t){return null!=e&&vr(e,t,kn)},Bi.hasIn=ka,Bi.head=Yr,Bi.identity=ol,Bi.includes=function(e,t,i,n){e=Ys(e)?e:Ha(e),i=i&&!n?fa(i):0;var o=e.length;return i<0&&(i=bi(o+i,0)),la(e)?i<=o&&e.indexOf(t,i)>-1:!!o&&Gt(e,t,i)>-1},Bi.indexOf=function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var o=null==i?0:fa(i);return o<0&&(o=bi(n+o,0)),Gt(e,t,o)},Bi.inRange=function(t,i,n){return i=ga(i),n===e?(n=i,i=0):n=ga(n),function(e,t,i){return e>=yi(t,i)&&e<bi(t,i)}(t=va(t),i,n)},Bi.invoke=Pa,Bi.isArguments=Vs,Bi.isArray=js,Bi.isArrayBuffer=Us,Bi.isArrayLike=Ys,Bi.isArrayLikeObject=qs,Bi.isBoolean=function(e){return!0===e||!1===e||ia(e)&&En(e)==m},Bi.isBuffer=Ks,Bi.isDate=Xs,Bi.isElement=function(e){return ia(e)&&1===e.nodeType&&!ra(e)},Bi.isEmpty=function(e){if(null==e)return!0;if(Ys(e)&&(js(e)||"string"==typeof e||"function"==typeof e.splice||Ks(e)||da(e)||Vs(e)))return!e.length;var t=mr(e);if(t==C||t==E)return!e.size;if(Ar(e))return!Fn(e).length;for(var i in e)if(Le.call(e,i))return!1;return!0},Bi.isEqual=function(e,t){return In(e,t)},Bi.isEqualWith=function(t,i,n){var o=(n="function"==typeof n?n:e)?n(t,i):e;return o===e?In(t,i,e,n):!!o},Bi.isError=Zs,Bi.isFinite=function(e){return"number"==typeof e&&fi(e)},Bi.isFunction=Js,Bi.isInteger=Qs,Bi.isLength=ea,Bi.isMap=na,Bi.isMatch=function(e,t){return e===t||On(e,t,hr(t))},Bi.isMatchWith=function(t,i,n){return n="function"==typeof n?n:e,On(t,i,hr(i),n)},Bi.isNaN=function(e){return oa(e)&&e!=+e},Bi.isNative=function(e){if(xr(e))throw new xe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nn(e)},Bi.isNil=function(e){return null==e},Bi.isNull=function(e){return null===e},Bi.isNumber=oa,Bi.isObject=ta,Bi.isObjectLike=ia,Bi.isPlainObject=ra,Bi.isRegExp=sa,Bi.isSafeInteger=function(e){return Qs(e)&&e>=-9007199254740991&&e<=d},Bi.isSet=aa,Bi.isString=la,Bi.isSymbol=ca,Bi.isTypedArray=da,Bi.isUndefined=function(t){return t===e},Bi.isWeakMap=function(e){return ia(e)&&mr(e)==D},Bi.isWeakSet=function(e){return ia(e)&&"[object WeakSet]"==En(e)},Bi.join=function(e,t){return null==e?"":mi.call(e,t)},Bi.kebabCase=ja,Bi.last=Zr,Bi.lastIndexOf=function(t,i,n){var o=null==t?0:t.length;if(!o)return-1;var r=o;return n!==e&&(r=(r=fa(n))<0?bi(o+r,0):yi(r,o-1)),i==i?function(e,t,i){for(var n=i+1;n--;)if(e[n]===t)return n;return n}(t,i,r):$t(t,Ht,r,!0)},Bi.lowerCase=Ua,Bi.lowerFirst=Ya,Bi.lt=ua,Bi.lte=ha,Bi.max=function(t){return t&&t.length?mn(t,ol,Tn):e},Bi.maxBy=function(t,i){return t&&t.length?mn(t,dr(i,2),Tn):e},Bi.mean=function(e){return zt(e,ol)},Bi.meanBy=function(e,t){return zt(e,dr(t,2))},Bi.min=function(t){return t&&t.length?mn(t,ol,Gn):e},Bi.minBy=function(t,i){return t&&t.length?mn(t,dr(i,2),Gn):e},Bi.stubArray=ml,Bi.stubFalse=vl,Bi.stubObject=function(){return{}},Bi.stubString=function(){return""},Bi.stubTrue=function(){return!0},Bi.multiply=Sl,Bi.nth=function(t,i){return t&&t.length?Vn(t,fa(i)):e},Bi.noConflict=function(){return ut._===this&&(ut._=He),this},Bi.noop=cl,Bi.now=Ts,Bi.pad=function(e,t,i){e=ya(e);var n=(t=fa(t))?ci(e):0;if(!t||n>=t)return e;var o=(t-n)/2;return Uo(Lt(o),i)+e+Uo(mt(o),i)},Bi.padEnd=function(e,t,i){e=ya(e);var n=(t=fa(t))?ci(e):0;return t&&n<t?e+Uo(t-n,i):e},Bi.padStart=function(e,t,i){e=ya(e);var n=(t=fa(t))?ci(e):0;return t&&n<t?Uo(t-n,i)+e:e},Bi.parseInt=function(e,t,i){return i||null==t?t=0:t&&(t=+t),Ci(ya(e).replace(ie,""),t||0)},Bi.random=function(t,i,n){if(n&&"boolean"!=typeof n&&Cr(t,i,n)&&(i=n=e),n===e&&("boolean"==typeof i?(n=i,i=e):"boolean"==typeof t&&(n=t,t=e)),t===e&&i===e?(t=0,i=1):(t=ga(t),i===e?(i=t,t=0):i=ga(i)),t>i){var o=t;t=i,i=o}if(n||t%1||i%1){var r=_i();return yi(t+r*(i-t+at("1e-"+((r+"").length-1))),i)}return Kn(t,i)},Bi.reduce=function(e,t,i){var n=js(e)?It:jt,o=arguments.length<3;return n(e,dr(t,4),i,o,pn)},Bi.reduceRight=function(e,t,i){var n=js(e)?Ot:jt,o=arguments.length<3;return n(e,dr(t,4),i,o,gn)},Bi.repeat=function(t,i,n){return i=(n?Cr(t,i,n):i===e)?1:fa(i),Xn(ya(t),i)},Bi.replace=function(){var e=arguments,t=ya(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Bi.result=function(t,i,n){var o=-1,r=(i=Co(i,t)).length;for(r||(r=1,t=e);++o<r;){var s=null==t?e:t[$r(i[o])];s===e&&(o=r,s=n),t=Js(s)?s.call(t):s}return t},Bi.round=xl,Bi.runInContext=ne,Bi.sample=function(e){return(js(e)?Zi:Jn)(e)},Bi.size=function(e){if(null==e)return 0;if(Ys(e))return la(e)?ci(e):e.length;var t=mr(e);return t==C||t==E?e.size:Fn(e).length},Bi.snakeCase=qa,Bi.some=function(t,i,n){var o=js(t)?Nt:ro;return n&&Cr(t,i,n)&&(i=e),o(t,dr(i,3))},Bi.sortedIndex=function(e,t){return so(e,t)},Bi.sortedIndexBy=function(e,t,i){return ao(e,t,dr(i,2))},Bi.sortedIndexOf=function(e,t){var i=null==e?0:e.length;if(i){var n=so(e,t);if(n<i&&Hs(e[n],t))return n}return-1},Bi.sortedLastIndex=function(e,t){return so(e,t,!0)},Bi.sortedLastIndexBy=function(e,t,i){return ao(e,t,dr(i,2),!0)},Bi.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var i=so(e,t,!0)-1;if(Hs(e[i],t))return i}return-1},Bi.startCase=Ka,Bi.startsWith=function(e,t,i){return e=ya(e),i=null==i?0:ln(fa(i),0,e.length),t=uo(t),e.slice(i,i+t.length)==t},Bi.subtract=Al,Bi.sum=function(e){return e&&e.length?Ut(e,ol):0},Bi.sumBy=function(e,t){return e&&e.length?Ut(e,dr(t,2)):0},Bi.template=function(t,i,n){var o=Bi.templateSettings;n&&Cr(t,i,n)&&(i=e),t=ya(t),i=_a({},i,o,er);var r,s,a=_a({},i.imports,o.imports,er),l=Ra(a),c=Xt(a,l),d=0,u=i.interpolate||be,h="__p += '",p=ke((i.escape||be).source+"|"+u.source+"|"+(u===X?de:be).source+"|"+(i.evaluate||be).source+"|$","g"),g="//# sourceURL="+(Le.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++nt+"]")+"\n";t.replace(p,function(e,i,n,o,a,l){return n||(n=o),h+=t.slice(d,l).replace(ye,ii),i&&(r=!0,h+="' +\n__e("+i+") +\n'"),a&&(s=!0,h+="';\n"+a+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),d=l+e.length,e}),h+="';\n";var f=Le.call(i,"variable")&&i.variable;if(f){if(le.test(f))throw new xe("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(s?h.replace(H,""):h).replace(z,"$1").replace(W,"$1;"),h="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Qa(function(){return Ae(l,g+"return "+h).apply(e,c)});if(m.source=h,Zs(m))throw m;return m},Bi.times=function(e,t){if((e=fa(e))<1||e>d)return[];var i=h,n=yi(e,h);t=dr(t),e-=h;for(var o=Yt(n,t);++i<e;)t(i);return o},Bi.toFinite=ga,Bi.toInteger=fa,Bi.toLength=ma,Bi.toLower=function(e){return ya(e).toLowerCase()},Bi.toNumber=va,Bi.toSafeInteger=function(e){return e?ln(fa(e),-9007199254740991,d):0===e?e:0},Bi.toString=ya,Bi.toUpper=function(e){return ya(e).toUpperCase()},Bi.trim=function(t,i,n){if((t=ya(t))&&(n||i===e))return qt(t);if(!t||!(i=uo(i)))return t;var o=di(t),r=di(i);return So(o,Jt(o,r),Qt(o,r)+1).join("")},Bi.trimEnd=function(t,i,n){if((t=ya(t))&&(n||i===e))return t.slice(0,ui(t)+1);if(!t||!(i=uo(i)))return t;var o=di(t);return So(o,0,Qt(o,di(i))+1).join("")},Bi.trimStart=function(t,i,n){if((t=ya(t))&&(n||i===e))return t.replace(ie,"");if(!t||!(i=uo(i)))return t;var o=di(t);return So(o,Jt(o,di(i))).join("")},Bi.truncate=function(t,i){var n=30,o="...";if(ta(i)){var r="separator"in i?i.separator:r;n="length"in i?fa(i.length):n,o="omission"in i?uo(i.omission):o}var s=(t=ya(t)).length;if(ni(t)){var a=di(t);s=a.length}if(n>=s)return t;var l=n-ci(o);if(l<1)return o;var c=a?So(a,0,l).join(""):t.slice(0,l);if(r===e)return c+o;if(a&&(l+=c.length-l),sa(r)){if(t.slice(l).search(r)){var d,u=c;for(r.global||(r=ke(r.source,ya(ue.exec(r))+"g")),r.lastIndex=0;d=r.exec(u);)var h=d.index;c=c.slice(0,h===e?l:h)}}else if(t.indexOf(uo(r),l)!=l){var p=c.lastIndexOf(r);p>-1&&(c=c.slice(0,p))}return c+o},Bi.unescape=function(e){return(e=ya(e))&&U.test(e)?e.replace(V,hi):e},Bi.uniqueId=function(e){var t=++Fe;return ya(e)+t},Bi.upperCase=Xa,Bi.upperFirst=Za,Bi.each=ys,Bi.eachRight=ws,Bi.first=Yr,ll(Bi,(_l={},Cn(Bi,function(e,t){Le.call(Bi.prototype,t)||(_l[t]=e)}),_l),{chain:!1}),Bi.VERSION="4.17.21",At(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Bi[e].placeholder=Bi}),At(["drop","take"],function(t,i){Vi.prototype[t]=function(n){n=n===e?1:bi(fa(n),0);var o=this.__filtered__&&!i?new Vi(this):this.clone();return o.__filtered__?o.__takeCount__=yi(n,o.__takeCount__):o.__views__.push({size:yi(n,h),type:t+(o.__dir__<0?"Right":"")}),o},Vi.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),At(["filter","map","takeWhile"],function(e,t){var i=t+1,n=1==i||3==i;Vi.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:dr(e,3),type:i}),t.__filtered__=t.__filtered__||n,t}}),At(["head","last"],function(e,t){var i="take"+(t?"Right":"");Vi.prototype[e]=function(){return this[i](1).value()[0]}}),At(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");Vi.prototype[e]=function(){return this.__filtered__?new Vi(this):this[i](1)}}),Vi.prototype.compact=function(){return this.filter(ol)},Vi.prototype.find=function(e){return this.filter(e).head()},Vi.prototype.findLast=function(e){return this.reverse().find(e)},Vi.prototype.invokeMap=Zn(function(e,t){return"function"==typeof e?new Vi(this):this.map(function(i){return Pn(i,e,t)})}),Vi.prototype.reject=function(e){return this.filter(Ls(dr(e)))},Vi.prototype.slice=function(t,i){t=fa(t);var n=this;return n.__filtered__&&(t>0||i<0)?new Vi(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),i!==e&&(n=(i=fa(i))<0?n.dropRight(-i):n.take(i-t)),n)},Vi.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Vi.prototype.toArray=function(){return this.take(h)},Cn(Vi.prototype,function(t,i){var n=/^(?:filter|find|map|reject)|While$/.test(i),o=/^(?:head|last)$/.test(i),r=Bi[o?"take"+("last"==i?"Right":""):i],s=o||/^find/.test(i);r&&(Bi.prototype[i]=function(){var i=this.__wrapped__,a=o?[1]:arguments,l=i instanceof Vi,c=a[0],d=l||js(i),u=function(e){var t=r.apply(Bi,Rt([e],a));return o&&h?t[0]:t};d&&n&&"function"==typeof c&&1!=c.length&&(l=d=!1);var h=this.__chain__,p=!!this.__actions__.length,g=s&&!h,f=l&&!p;if(!s&&d){i=f?i:new Vi(this);var m=t.apply(i,a);return m.__actions__.push({func:gs,args:[u],thisArg:e}),new Wi(m,h)}return g&&f?t.apply(this,a):(m=this.thru(u),g?o?m.value()[0]:m.value():m)})}),At(["pop","push","shift","sort","splice","unshift"],function(e){var t=Pe[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Bi.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var o=this.value();return t.apply(js(o)?o:[],e)}return this[i](function(i){return t.apply(js(i)?i:[],e)})}}),Cn(Vi.prototype,function(e,t){var i=Bi[t];if(i){var n=i.name+"";Le.call(Pi,n)||(Pi[n]=[]),Pi[n].push({name:t,func:i})}}),Pi[zo(e,2).name]=[{name:"wrapper",func:e}],Vi.prototype.clone=function(){var e=new Vi(this.__wrapped__);return e.__actions__=Po(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Po(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Po(this.__views__),e},Vi.prototype.reverse=function(){if(this.__filtered__){var e=new Vi(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Vi.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,i=js(e),n=t<0,o=i?e.length:0,r=function(e,t,i){var n=-1,o=i.length;for(;++n<o;){var r=i[n],s=r.size;switch(r.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=yi(t,e+s);break;case"takeRight":e=bi(e,t-s)}}return{start:e,end:t}}(0,o,this.__views__),s=r.start,a=r.end,l=a-s,c=n?a:s-1,d=this.__iteratees__,u=d.length,h=0,p=yi(l,this.__takeCount__);if(!i||!n&&o==l&&p==l)return mo(e,this.__actions__);var g=[];e:for(;l--&&h<p;){for(var f=-1,m=e[c+=t];++f<u;){var v=d[f],b=v.iteratee,y=v.type,w=b(m);if(2==y)m=w;else if(!w){if(1==y)continue e;break e}}g[h++]=m}return g},Bi.prototype.at=fs,Bi.prototype.chain=function(){return ps(this)},Bi.prototype.commit=function(){return new Wi(this.value(),this.__chain__)},Bi.prototype.next=function(){this.__values__===e&&(this.__values__=pa(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?e:this.__values__[this.__index__++]}},Bi.prototype.plant=function(t){for(var i,n=this;n instanceof zi;){var o=Br(n);o.__index__=0,o.__values__=e,i?r.__wrapped__=o:i=o;var r=o;n=n.__wrapped__}return r.__wrapped__=t,i},Bi.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Vi){var i=t;return this.__actions__.length&&(i=new Vi(this)),(i=i.reverse()).__actions__.push({func:gs,args:[ts],thisArg:e}),new Wi(i,this.__chain__)}return this.thru(ts)},Bi.prototype.toJSON=Bi.prototype.valueOf=Bi.prototype.value=function(){return mo(this.__wrapped__,this.__actions__)},Bi.prototype.first=Bi.prototype.head,st&&(Bi.prototype[st]=function(){return this}),Bi}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ut._=pi,define(function(){return pi})):pt?((pt.exports=pi)._=pi,ht._=pi):ut._=pi}.call(this),function(e){var t=Array.prototype.slice,i={dict:null,load:function(t){null!==this.dict?e.extend(this.dict,t):this.dict=t},_:function(e){return dict=this.dict,dict&&dict.hasOwnProperty(e)&&(e=dict[e]),args=t.call(arguments),args[0]=e,this.printf.apply(this,args)},printf:function(i,n){return arguments.length<2?i:(n=e.isArray(n)?n:t.call(arguments,1),i.replace(/([^%]|^)%(?:(\d+)\$)?s/g,function(e,t,i){return i?t+n[parseInt(i)-1]:t+n.shift()}).replace(/%%s/g,"%s"))}};e.fn._t=function(t,n){return e(this).html(i._.apply(i,arguments))},e.i18n=i}(jQuery),function(e,t){"object"==typeof exports&&typeof module<"u"?module.exports=t():"function"==typeof define&&define.amd?define("marked",t):e.marked=t()}(typeof globalThis<"u"?globalThis:typeof self<"u"?self:this,function(){var e,t={},i=t,n={exports:t},o=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,l={};function c(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}((e,t)=>{for(var i in t)o(e,i,{get:t[i],enumerable:!0})})(l,{Hooks:()=>ve,Lexer:()=>pe,Marked:()=>be,Parser:()=>me,Renderer:()=>ge,TextRenderer:()=>fe,Tokenizer:()=>he,defaults:()=>d,getDefaults:()=>c,lexer:()=>ke,marked:()=>we,options:()=>Ce,parse:()=>Ee,parseInline:()=>Ae,parser:()=>Te,setOptions:()=>_e,use:()=>Se,walkTokens:()=>xe}),n.exports=(e=l,((e,t,i,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of s(t))!a.call(e,l)&&l!==i&&o(e,l,{get:()=>t[l],enumerable:!(n=r(t,l))||n.enumerable});return e})(o({},"__esModule",{value:!0}),e));var d={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function u(e){d=e}var h={exec:()=>null};function p(e,t=""){let i="string"==typeof e?e:e.source,n={replace:(e,t)=>{let o="string"==typeof t?t:t.source;return o=o.replace(g.caret,"$1"),i=i.replace(e,o),n},getRegex:()=>new RegExp(i,t)};return n}var g={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},f=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,m=/(?:[*+-]|\d{1,9}[.)])/,v=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,b=p(v).replace(/bull/g,m).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),y=p(v).replace(/bull/g,m).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),w=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,C=/(?!\s*\])(?:\\.|[^\[\]\\])+/,_=p(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",C).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),S=p(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,m).getRegex(),x="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",A=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,E=p("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",A).replace("tag",x).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),T=p(w).replace("hr",f).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",x).getRegex(),k={blockquote:p(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",T).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:_,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:f,html:E,lheading:b,list:S,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:T,table:h,text:/^[^\n]+/},D=p("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",f).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",x).getRegex(),M={...k,lheading:y,table:D,paragraph:p(w).replace("hr",f).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",D).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",x).getRegex()},P={...k,html:p("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",A).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:h,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:p(w).replace("hr",f).replace("heading"," *#{1,6} *[^\n]").replace("lheading",b).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},R=/^( {2,}|\\)\n(?!\s*$)/,I=/[\p{P}\p{S}]/u,O=/[\s\p{P}\p{S}]/u,N=/[^\s\p{P}\p{S}]/u,L=p(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,O).getRegex(),F=/(?!~)[\p{P}\p{S}]/u,$=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,G=p($,"u").replace(/punct/g,I).getRegex(),B=p($,"u").replace(/punct/g,F).getRegex(),H="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",z=p(H,"gu").replace(/notPunctSpace/g,N).replace(/punctSpace/g,O).replace(/punct/g,I).getRegex(),W=p(H,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,F).getRegex(),V=p("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,N).replace(/punctSpace/g,O).replace(/punct/g,I).getRegex(),j=p(/\\(punct)/,"gu").replace(/punct/g,I).getRegex(),U=p(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Y=p(A).replace("(?:--\x3e|$)","--\x3e").getRegex(),q=p("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Y).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),K=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,X=p(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",K).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Z=p(/^!?\[(label)\]\[(ref)\]/).replace("label",K).replace("ref",C).getRegex(),J=p(/^!?\[(ref)\](?:\[\])?/).replace("ref",C).getRegex(),Q={_backpedal:h,anyPunctuation:j,autolink:U,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,br:R,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:h,emStrongLDelim:G,emStrongRDelimAst:z,emStrongRDelimUnd:V,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:X,nolink:J,punctuation:L,reflink:Z,reflinkSearch:p("reflink|nolink(?!\\()","g").replace("reflink",Z).replace("nolink",J).getRegex(),tag:q,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:h},ee={...Q,link:p(/^!?\[(label)\]\((.*?)\)/).replace("label",K).getRegex(),reflink:p(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",K).getRegex()},te={...Q,emStrongRDelimAst:W,emStrongLDelim:B,url:p(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ie={...te,br:p(R).replace("{2,}","*").getRegex(),text:p(te.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ne={normal:k,gfm:M,pedantic:P},oe={normal:Q,gfm:te,breaks:ie,pedantic:ee},re={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},se=e=>re[e];function ae(e,t){if(t){if(g.escapeTest.test(e))return e.replace(g.escapeReplace,se)}else if(g.escapeTestNoEncode.test(e))return e.replace(g.escapeReplaceNoEncode,se);return e}function le(e){try{e=encodeURI(e).replace(g.percentDecode,"%")}catch{return null}return e}function ce(e,t){let i=e.replace(g.findPipe,(e,t,i)=>{let n=!1,o=t;for(;--o>=0&&"\\"===i[o];)n=!n;return n?"|":" |"}).split(g.splitPipe),n=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(g.slashPipe,"|");return i}function de(e,t,i){let n=e.length;if(0===n)return"";let o=0;for(;o<n;){let r=e.charAt(n-o-1);if(r!==t||i){if(r===t||!i)break;o++}else o++}return e.slice(0,n-o)}function ue(e,t,i,n,o){let r=t.href,s=t.title||null,a=e[1].replace(o.other.outputLinkReplace,"$1");n.state.inLink=!0;let l={type:"!"===e[0].charAt(0)?"image":"link",raw:i,href:r,title:s,text:a,tokens:n.inlineTokens(a)};return n.state.inLink=!1,l}var he=class{options;rules;lexer;constructor(e){this.options=e||d}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:de(e,"\n")}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let e=t[0],i=function(e,t,i){let n=e.match(i.other.indentCodeCompensation);if(null===n)return t;let o=n[1];return t.split("\n").map(e=>{let t=e.match(i.other.beginningSpace);if(null===t)return e;let[n]=t;return n.length>=o.length?e.slice(o.length):e}).join("\n")}(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let t=de(e,"#");(this.options.pedantic||!t||this.rules.other.endingSpaceChar.test(t))&&(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:de(t[0],"\n")}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let e=de(t[0],"\n").split("\n"),i="",n="",o=[];for(;e.length>0;){let t,r=!1,s=[];for(t=0;t<e.length;t++)if(this.rules.other.blockquoteStart.test(e[t]))s.push(e[t]),r=!0;else{if(r)break;s.push(e[t])}e=e.slice(t);let a=s.join("\n"),l=a.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}\n${a}`:a,n=n?`${n}\n${l}`:l;let c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,o,!0),this.lexer.state.top=c,0===e.length)break;let d=o.at(-1);if("code"===d?.type)break;if("blockquote"===d?.type){let t=d,r=t.raw+"\n"+e.join("\n"),s=this.blockquote(r);o[o.length-1]=s,i=i.substring(0,i.length-t.raw.length)+s.raw,n=n.substring(0,n.length-t.text.length)+s.text;break}if("list"===d?.type){let t=d,r=t.raw+"\n"+e.join("\n"),s=this.list(r);o[o.length-1]=s,i=i.substring(0,i.length-d.raw.length)+s.raw,n=n.substring(0,n.length-t.raw.length)+s.raw,e=r.substring(o.at(-1).raw.length).split("\n");continue}}return{type:"blockquote",raw:i,tokens:o,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim(),n=i.length>1,o={type:"list",raw:"",ordered:n,start:n?+i.slice(0,-1):"",loose:!1,items:[]};i=n?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=n?i:"[*+-]");let r=this.rules.other.listItemRegex(i),s=!1;for(;e;){let i=!1,n="",a="";if(!(t=r.exec(e))||this.rules.block.hr.test(e))break;n=t[0],e=e.substring(n.length);let l=t[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,e=>" ".repeat(3*e.length)),c=e.split("\n",1)[0],d=!l.trim(),u=0;if(this.options.pedantic?(u=2,a=l.trimStart()):d?u=t[1].length+1:(u=t[2].search(this.rules.other.nonSpaceChar),u=u>4?1:u,a=l.slice(u),u+=t[1].length),d&&this.rules.other.blankLine.test(c)&&(n+=c+"\n",e=e.substring(c.length+1),i=!0),!i){let t=this.rules.other.nextBulletRegex(u),i=this.rules.other.hrRegex(u),o=this.rules.other.fencesBeginRegex(u),r=this.rules.other.headingBeginRegex(u),s=this.rules.other.htmlBeginRegex(u);for(;e;){let h,p=e.split("\n",1)[0];if(c=p,this.options.pedantic?(c=c.replace(this.rules.other.listReplaceNesting,"  "),h=c):h=c.replace(this.rules.other.tabCharGlobal,"    "),o.test(c)||r.test(c)||s.test(c)||t.test(c)||i.test(c))break;if(h.search(this.rules.other.nonSpaceChar)>=u||!c.trim())a+="\n"+h.slice(u);else{if(d||l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||o.test(l)||r.test(l)||i.test(l))break;a+="\n"+c}!d&&!c.trim()&&(d=!0),n+=p+"\n",e=e.substring(p.length+1),l=h.slice(u)}}o.loose||(s?o.loose=!0:this.rules.other.doubleBlankLine.test(n)&&(s=!0));let h,p=null;this.options.gfm&&(p=this.rules.other.listIsTask.exec(a),p&&(h="[ ] "!==p[0],a=a.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:n,task:!!p,checked:h,loose:!1,text:a,tokens:[]}),o.raw+=n}let a=o.items.at(-1);if(!a)return;a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd(),o.raw=o.raw.trimEnd();for(let e=0;e<o.items.length;e++)if(this.lexer.state.top=!1,o.items[e].tokens=this.lexer.blockTokens(o.items[e].text,[]),!o.loose){let t=o.items[e].tokens.filter(e=>"space"===e.type),i=t.length>0&&t.some(e=>this.rules.other.anyLine.test(e.raw));o.loose=i}if(o.loose)for(let e=0;e<o.items.length;e++)o.items[e].loose=!0;return o}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:i,title:n}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let i=ce(t[1]),n=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],r={type:"table",raw:t[0],header:[],align:[],rows:[]};if(i.length===n.length){for(let e of n)this.rules.other.tableAlignRight.test(e)?r.align.push("right"):this.rules.other.tableAlignCenter.test(e)?r.align.push("center"):this.rules.other.tableAlignLeft.test(e)?r.align.push("left"):r.align.push(null);for(let e=0;e<i.length;e++)r.header.push({text:i[e],tokens:this.lexer.inline(i[e]),header:!0,align:r.align[e]});for(let e of o)r.rows.push(ce(e,r.header.length).map((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:r.align[t]})));return r}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let t=de(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{let e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let i=0;for(let n=0;n<e.length;n++)if("\\"===e[n])n++;else if(e[n]===t[0])i++;else if(e[n]===t[1]&&(i--,i<0))return n;return i>0?-2:-1}(t[2],"()");if(-2===e)return;if(e>-1){let i=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,i).trim(),t[3]=""}}let i=t[2],n="";if(this.options.pedantic){let e=this.rules.other.pedanticHrefTitle.exec(i);e&&(i=e[1],n=e[3])}else n=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(i=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?i.slice(1):i.slice(1,-1)),ue(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let e=t[(i[2]||i[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!e){let e=i[0].charAt(0);return{type:"text",raw:e,text:e}}return ue(i,e,i[0],this.lexer,this.rules)}}emStrong(e,t,i=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(!(!n||n[3]&&i.match(this.rules.other.unicodeAlphaNumeric))&&(!n[1]&&!n[2]||!i||this.rules.inline.punctuation.exec(i))){let i,o,r=[...n[0]].length-1,s=r,a=0,l="*"===n[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+r);null!=(n=l.exec(t));){if(i=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!i)continue;if(o=[...i].length,n[3]||n[4]){s+=o;continue}if((n[5]||n[6])&&r%3&&!((r+o)%3)){a+=o;continue}if(s-=o,s>0)continue;o=Math.min(o,o+s+a);let t=[...n[0]][0].length,l=e.slice(0,r+n.index+t+o);if(Math.min(r,o)%2){let e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}let c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(e),n=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return i&&n&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let e,i;return"@"===t[2]?(e=t[1],i="mailto:"+e):(e=t[1],i=e),{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,i;if("@"===t[2])e=t[0],i="mailto:"+e;else{let n;do{n=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(n!==t[0]);e=t[0],i="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},pe=class e{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||d,this.options.tokenizer=this.options.tokenizer||new he,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:g,block:ne.normal,inline:oe.normal};this.options.pedantic?(t.block=ne.pedantic,t.inline=oe.pedantic):this.options.gfm&&(t.block=ne.gfm,this.options.breaks?t.inline=oe.breaks:t.inline=oe.gfm),this.tokenizer.rules=t}static get rules(){return{block:ne,inline:oe}}static lex(t,i){return new e(i).lex(t)}static lexInline(t,i){return new e(i).inlineTokens(t)}lex(e){e=e.replace(g.carriageReturn,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],i=!1){for(this.options.pedantic&&(e=e.replace(g.tabCharGlobal,"    ").replace(g.spaceLine,""));e;){let n;if(this.options.extensions?.block?.some(i=>!!(n=i.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))continue;if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length);let i=t.at(-1);1===n.raw.length&&void 0!==i?i.raw+="\n":t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length);let i=t.at(-1);"paragraph"===i?.type||"text"===i?.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue.at(-1).src=i.text):t.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length);let i=t.at(-1);"paragraph"===i?.type||"text"===i?.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.raw,this.inlineQueue.at(-1).src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),t.push(n);continue}let o=e;if(this.options.extensions?.startBlock){let t,i=1/0,n=e.slice(1);this.options.extensions.startBlock.forEach(e=>{t=e.call({lexer:this},n),"number"==typeof t&&t>=0&&(i=Math.min(i,t))}),i<1/0&&i>=0&&(o=e.substring(0,i+1))}if(this.state.top&&(n=this.tokenizer.paragraph(o))){let r=t.at(-1);i&&"paragraph"===r?.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=r.text):t.push(n),i=o.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length);let i=t.at(-1);"text"===i?.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):t.push(n);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let i=e,n=null;if(this.tokens.links){let e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(n=this.tokenizer.rules.inline.reflinkSearch.exec(i));)e.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(n=this.tokenizer.rules.inline.anyPunctuation.exec(i));)i=i.slice(0,n.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(n=this.tokenizer.rules.inline.blockSkip.exec(i));)i=i.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let o=!1,r="";for(;e;){let n;if(o||(r=""),o=!1,this.options.extensions?.inline?.some(i=>!!(n=i.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))continue;if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length);let i=t.at(-1);"text"===n.type&&"text"===i?.type?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(n=this.tokenizer.emStrong(e,i,r)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.autolink(e)){e=e.substring(n.raw.length),t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),t.push(n);continue}let s=e;if(this.options.extensions?.startInline){let t,i=1/0,n=e.slice(1);this.options.extensions.startInline.forEach(e=>{t=e.call({lexer:this},n),"number"==typeof t&&t>=0&&(i=Math.min(i,t))}),i<1/0&&i>=0&&(s=e.substring(0,i+1))}if(n=this.tokenizer.inlineText(s)){e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(r=n.raw.slice(-1)),o=!0;let i=t.at(-1);"text"===i?.type?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return t}},ge=class{options;parser;constructor(e){this.options=e||d}space(e){return""}code({text:e,lang:t,escaped:i}){let n=(t||"").match(g.notSpaceStart)?.[0],o=e.replace(g.endingNewline,"")+"\n";return n?'<pre><code class="language-'+ae(n)+'">'+(i?o:ae(o,!0))+"</code></pre>\n":"<pre><code>"+(i?o:ae(o,!0))+"</code></pre>\n"}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){let t=e.ordered,i=e.start,n="";for(let t=0;t<e.items.length;t++){let i=e.items[t];n+=this.listitem(i)}let o=t?"ol":"ul";return"<"+o+(t&&1!==i?' start="'+i+'"':"")+">\n"+n+"</"+o+">\n"}listitem(e){let t="";if(e.task){let i=this.checkbox({checked:!!e.checked});e.loose?"paragraph"===e.tokens[0]?.type?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=i+" "+ae(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",i="";for(let t=0;t<e.header.length;t++)i+=this.tablecell(e.header[t]);t+=this.tablerow({text:i});let n="";for(let t=0;t<e.rows.length;t++){let o=e.rows[t];i="";for(let e=0;e<o.length;e++)i+=this.tablecell(o[e]);n+=this.tablerow({text:i})}return n&&(n=`<tbody>${n}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+n+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){let t=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+t+`</${i}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${ae(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:i}){let n=this.parser.parseInline(i),o=le(e);if(null===o)return n;let r='<a href="'+(e=o)+'"';return t&&(r+=' title="'+ae(t)+'"'),r+=">"+n+"</a>",r}image({href:e,title:t,text:i,tokens:n}){n&&(i=this.parser.parseInline(n,this.parser.textRenderer));let o=le(e);if(null===o)return ae(i);let r=`<img src="${e=o}" alt="${i}"`;return t&&(r+=` title="${ae(t)}"`),r+=">",r}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:ae(e.text)}},fe=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},me=class e{options;renderer;textRenderer;constructor(e){this.options=e||d,this.options.renderer=this.options.renderer||new ge,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new fe}static parse(t,i){return new e(i).parse(t)}static parseInline(t,i){return new e(i).parseInline(t)}parse(e,t=!0){let i="";for(let n=0;n<e.length;n++){let o=e[n];if(this.options.extensions?.renderers?.[o.type]){let e=o,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){i+=t||"";continue}}let r=o;switch(r.type){case"space":i+=this.renderer.space(r);continue;case"hr":i+=this.renderer.hr(r);continue;case"heading":i+=this.renderer.heading(r);continue;case"code":i+=this.renderer.code(r);continue;case"table":i+=this.renderer.table(r);continue;case"blockquote":i+=this.renderer.blockquote(r);continue;case"list":i+=this.renderer.list(r);continue;case"html":i+=this.renderer.html(r);continue;case"paragraph":i+=this.renderer.paragraph(r);continue;case"text":{let o=r,s=this.renderer.text(o);for(;n+1<e.length&&"text"===e[n+1].type;)o=e[++n],s+="\n"+this.renderer.text(o);i+=t?this.renderer.paragraph({type:"paragraph",raw:s,text:s,tokens:[{type:"text",raw:s,text:s,escaped:!0}]}):s;continue}default:{let e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return i}parseInline(e,t=this.renderer){let i="";for(let n=0;n<e.length;n++){let o=e[n];if(this.options.extensions?.renderers?.[o.type]){let e=this.options.extensions.renderers[o.type].call({parser:this},o);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){i+=e||"";continue}}let r=o;switch(r.type){case"escape":case"text":i+=t.text(r);break;case"html":i+=t.html(r);break;case"link":i+=t.link(r);break;case"image":i+=t.image(r);break;case"strong":i+=t.strong(r);break;case"em":i+=t.em(r);break;case"codespan":i+=t.codespan(r);break;case"br":i+=t.br(r);break;case"del":i+=t.del(r);break;default:{let e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return i}},ve=class{options;block;constructor(e){this.options=e||d}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?pe.lex:pe.lexInline}provideParser(){return this.block?me.parse:me.parseInline}},be=class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=me;Renderer=ge;TextRenderer=fe;Lexer=pe;Tokenizer=he;Hooks=ve;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(let n of e)switch(i=i.concat(t.call(this,n)),n.type){case"table":{let e=n;for(let n of e.header)i=i.concat(this.walkTokens(n.tokens,t));for(let n of e.rows)for(let e of n)i=i.concat(this.walkTokens(e.tokens,t));break}case"list":{let e=n;i=i.concat(this.walkTokens(e.items,t));break}default:{let e=n;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach(n=>{let o=e[n].flat(1/0);i=i.concat(this.walkTokens(o,t))}):e.tokens&&(i=i.concat(this.walkTokens(e.tokens,t)))}}return i}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(e=>{let i={...e};if(i.async=this.defaults.async||i.async||!1,e.extensions&&(e.extensions.forEach(e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){let i=t.renderers[e.name];t.renderers[e.name]=i?function(...t){let n=e.renderer.apply(this,t);return!1===n&&(n=i.apply(this,t)),n}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");let i=t[e.level];i?i.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)}),i.extensions=t),e.renderer){let t=this.defaults.renderer||new ge(this.defaults);for(let i in e.renderer){if(!(i in t))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let n=i,o=e.renderer[n],r=t[n];t[n]=(...e)=>{let i=o.apply(t,e);return!1===i&&(i=r.apply(t,e)),i||""}}i.renderer=t}if(e.tokenizer){let t=this.defaults.tokenizer||new he(this.defaults);for(let i in e.tokenizer){if(!(i in t))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let n=i,o=e.tokenizer[n],r=t[n];t[n]=(...e)=>{let i=o.apply(t,e);return!1===i&&(i=r.apply(t,e)),i}}i.tokenizer=t}if(e.hooks){let t=this.defaults.hooks||new ve;for(let i in e.hooks){if(!(i in t))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let n=i,o=e.hooks[n],r=t[n];ve.passThroughHooks.has(i)?t[n]=e=>{if(this.defaults.async)return Promise.resolve(o.call(t,e)).then(e=>r.call(t,e));let i=o.call(t,e);return r.call(t,i)}:t[n]=(...e)=>{let i=o.apply(t,e);return!1===i&&(i=r.apply(t,e)),i}}i.hooks=t}if(e.walkTokens){let t=this.defaults.walkTokens,n=e.walkTokens;i.walkTokens=function(e){let i=[];return i.push(n.call(this,e)),t&&(i=i.concat(t.call(this,e))),i}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return pe.lex(e,t??this.defaults)}parser(e,t){return me.parse(e,t??this.defaults)}parseMarkdown(e){return(t,i)=>{let n={...i},o={...this.defaults,...n},r=this.onError(!!o.silent,!!o.async);if(!0===this.defaults.async&&!1===n.async)return r(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||null===t)return r(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return r(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=e);let s=o.hooks?o.hooks.provideLexer():e?pe.lex:pe.lexInline,a=o.hooks?o.hooks.provideParser():e?me.parse:me.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(t):t).then(e=>s(e,o)).then(e=>o.hooks?o.hooks.processAllTokens(e):e).then(e=>o.walkTokens?Promise.all(this.walkTokens(e,o.walkTokens)).then(()=>e):e).then(e=>a(e,o)).then(e=>o.hooks?o.hooks.postprocess(e):e).catch(r);try{o.hooks&&(t=o.hooks.preprocess(t));let e=s(t,o);o.hooks&&(e=o.hooks.processAllTokens(e)),o.walkTokens&&this.walkTokens(e,o.walkTokens);let i=a(e,o);return o.hooks&&(i=o.hooks.postprocess(i)),i}catch(e){return r(e)}}}onError(e,t){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",e){let e="<p>An error occurred:</p><pre>"+ae(i.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(i);throw i}}},ye=new be;function we(e,t){return ye.parse(e,t)}we.options=we.setOptions=function(e){return ye.setOptions(e),we.defaults=ye.defaults,u(we.defaults),we},we.getDefaults=c,we.defaults=d,we.use=function(...e){return ye.use(...e),we.defaults=ye.defaults,u(we.defaults),we},we.walkTokens=function(e,t){return ye.walkTokens(e,t)},we.parseInline=ye.parseInline,we.Parser=me,we.parser=me.parse,we.Renderer=ge,we.TextRenderer=fe,we.Lexer=pe,we.lexer=pe.lex,we.Tokenizer=he,we.Hooks=ve,we.parse=we;var Ce=we.options,_e=we.setOptions,Se=we.use,xe=we.walkTokens,Ae=we.parseInline,Ee=we,Te=me.parse,ke=pe.lex;return i!=t&&(n.exports=t),n.exports}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery")):e(jQuery)}(function(e,t){"use strict";var i={beforeShow:d,move:d,change:d,show:d,hide:d,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},n=[],o=!!/msie/i.exec(window.navigator.userAgent),r=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div").style;return t.cssText="background-color:rgba(0,0,0,.5)",e(t.backgroundColor,"rgba")||e(t.backgroundColor,"hsla")}(),s=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),a=function(){var e="";if(o)for(var t=1;t<=6;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function l(t,i,n,o){for(var s=[],a=0;a<t.length;a++){var l=t[a];if(l){var c=tinycolor(l),d=c.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";d+=tinycolor.equals(i,l)?" sp-thumb-active":"";var u=c.toString(o.preferredFormat||"rgb"),h=r?"background-color:"+c.toRgbString():"filter:"+c.toFilter();s.push('<span title="'+u+'" data-color="'+c.toRgbString()+'" class="'+d+'"><span class="sp-thumb-inner" style="'+h+';"></span></span>')}else{s.push(e("<div />").append(e('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",o.noColorSelectedText)).html())}}return"<div class='sp-cf "+n+"'>"+s.join("")+"</div>"}function c(c,d){var f,m,v,b,y=function(t,n){var o=e.extend({},i,t);return o.callbacks={move:h(o.move,n),change:h(o.change,n),show:h(o.show,n),hide:h(o.hide,n),beforeShow:h(o.beforeShow,n)},o}(d,c),w=y.flat,C=y.showSelectionPalette,_=y.localStorageKey,S=y.theme,x=y.callbacks,A=(f=We,m=10,function(){var e=this,t=arguments,i=function(){b=null,f.apply(e,t)};v&&clearTimeout(b),!v&&b||(b=setTimeout(i,m))}),E=!1,T=!1,k=0,D=0,M=0,P=0,R=0,I=0,O=0,N=0,L=0,F=0,$=1,G=[],B=[],H={},z=y.selectionPalette.slice(0),W=y.maxSelectionSize,V="sp-dragging",j=null,U=c.ownerDocument,Y=(U.body,e(c)),q=!1,K=e(a,U).addClass(S),X=K.find(".sp-picker-container"),Z=K.find(".sp-color"),J=K.find(".sp-dragger"),Q=K.find(".sp-hue"),ee=K.find(".sp-slider"),te=K.find(".sp-alpha-inner"),ie=K.find(".sp-alpha"),ne=K.find(".sp-alpha-handle"),oe=K.find(".sp-input"),re=K.find(".sp-palette"),se=K.find(".sp-initial"),ae=K.find(".sp-cancel"),le=K.find(".sp-clear"),ce=K.find(".sp-choose"),de=K.find(".sp-palette-toggle"),ue=Y.is("input"),he=ue&&"color"===Y.attr("type")&&g(),pe=ue&&!w,ge=pe?e(s).addClass(S).addClass(y.className).addClass(y.replacerClassName):e([]),fe=pe?ge:Y,me=ge.find(".sp-preview-inner"),ve=y.color||ue&&Y.val(),be=!1,ye=y.preferredFormat,we=!y.showButtons||y.clickoutFiresChange,Ce=!ve,_e=y.allowEmpty&&!he;function Se(){if(y.showPaletteOnly&&(y.showPalette=!0),de.text(y.showPaletteOnly?y.togglePaletteMoreText:y.togglePaletteLessText),y.palette){G=y.palette.slice(0),B=e.isArray(G[0])?G:[G],H={};for(var t=0;t<B.length;t++)for(var i=0;i<B[t].length;i++){var n=tinycolor(B[t][i]).toRgbString();H[n]=!0}}K.toggleClass("sp-flat",w),K.toggleClass("sp-input-disabled",!y.showInput),K.toggleClass("sp-alpha-enabled",y.showAlpha),K.toggleClass("sp-clear-enabled",_e),K.toggleClass("sp-buttons-disabled",!y.showButtons),K.toggleClass("sp-palette-buttons-disabled",!y.togglePaletteOnly),K.toggleClass("sp-palette-disabled",!y.showPalette),K.toggleClass("sp-palette-only",y.showPaletteOnly),K.toggleClass("sp-initial-disabled",!y.showInitial),K.addClass(y.className).addClass(y.containerClassName),We()}function xe(){if(_&&window.localStorage){try{var t=window.localStorage[_].split(",#");t.length>1&&(delete window.localStorage[_],e.each(t,function(e,t){Ae(t)}))}catch(e){}try{z=window.localStorage[_].split(";")}catch(e){}}}function Ae(t){if(C){var i=tinycolor(t).toRgbString();if(!H[i]&&-1===e.inArray(i,z))for(z.push(i);z.length>W;)z.shift();if(_&&window.localStorage)try{window.localStorage[_]=z.join(";")}catch(e){}}}function Ee(){var t=$e(),i=e.map(B,function(e,i){return l(e,t,"sp-palette-row sp-palette-row-"+i,y)});xe(),z&&i.push(l(function(){var e=[];if(y.showPalette)for(var t=0;t<z.length;t++){var i=tinycolor(z[t]).toRgbString();H[i]||e.push(z[t])}return e.reverse().slice(0,y.maxSelectionSize)}(),t,"sp-palette-row sp-palette-row-selection",y)),re.html(i.join(""))}function Te(){if(y.showInitial){var e=be,t=$e();se.html(l([e,t],t,"sp-palette-row-initial",y))}}function ke(){(D<=0||k<=0||P<=0)&&We(),T=!0,K.addClass(V),j=null,Y.trigger("dragstart.spectrum",[$e()])}function De(){T=!1,K.removeClass(V),Y.trigger("dragstop.spectrum",[$e()])}function Me(){var e=oe.val();if(null!==e&&""!==e||!_e){var t=tinycolor(e);t.isValid()?(Fe(t),Ge(),ze()):oe.addClass("sp-validation-error")}else Fe(null),Ge(),ze()}function Pe(){E?Ne():Re()}function Re(){var t=e.Event("beforeShow.spectrum");E?We():(Y.trigger(t,[$e()]),!1===x.beforeShow($e())||t.isDefaultPrevented()||(!function(){for(var e=0;e<n.length;e++)n[e]&&n[e].hide()}(),E=!0,e(U).on("keydown.spectrum",Ie),e(U).on("click.spectrum",Oe),e(window).on("resize.spectrum",A),ge.addClass("sp-active"),K.removeClass("sp-hidden"),We(),Be(),be=$e(),Te(),x.show(be),Y.trigger("show.spectrum",[be])))}function Ie(e){27===e.keyCode&&Ne()}function Oe(e){2!=e.button&&(T||(we?ze(!0):Le(),Ne()))}function Ne(){E&&!w&&(E=!1,e(U).off("keydown.spectrum",Ie),e(U).off("click.spectrum",Oe),e(window).off("resize.spectrum",A),ge.removeClass("sp-active"),K.addClass("sp-hidden"),x.hide($e()),Y.trigger("hide.spectrum",[$e()]))}function Le(){Fe(be,!0),ze(!0)}function Fe(e,t){var i,n;tinycolor.equals(e,$e())?Be():(!e&&_e?Ce=!0:(Ce=!1,n=(i=tinycolor(e)).toHsv(),N=n.h%360/360,L=n.s,F=n.v,$=n.a),Be(),i&&i.isValid()&&!t&&(ye=y.preferredFormat||i.getFormat()))}function $e(e){return e=e||{},_e&&Ce?null:tinycolor.fromRatio({h:N,s:L,v:F,a:Math.round(1e3*$)/1e3},{format:e.format||ye})}function Ge(){Be(),x.move($e()),Y.trigger("move.spectrum",[$e()])}function Be(){oe.removeClass("sp-validation-error"),He();var e=tinycolor.fromRatio({h:N,s:1,v:1});Z.css("background-color",e.toHexString());var t=ye;$<1&&(0!==$||"name"!==t)&&("hex"!==t&&"hex3"!==t&&"hex6"!==t&&"name"!==t||(t="rgb"));var i=$e({format:t}),n="";if(me.removeClass("sp-clear-display"),me.css("background-color","transparent"),!i&&_e)me.addClass("sp-clear-display");else{var s=i.toHexString(),a=i.toRgbString();if(r||1===i.alpha?me.css("background-color",a):(me.css("background-color","transparent"),me.css("filter",i.toFilter())),y.showAlpha){var l=i.toRgb();l.a=0;var c=tinycolor(l).toRgbString(),d="linear-gradient(left, "+c+", "+s+")";o?te.css("filter",tinycolor(c).toFilter({gradientType:1},s)):(te.css("background","-webkit-"+d),te.css("background","-moz-"+d),te.css("background","-ms-"+d),te.css("background","linear-gradient(to right, "+c+", "+s+")"))}n=i.toString(t)}y.showInput&&oe.val(n),y.showPalette&&Ee(),Te()}function He(){var e=L,t=F;if(_e&&Ce)ne.hide(),ee.hide(),J.hide();else{ne.show(),ee.show(),J.show();var i=e*k,n=D-t*D;i=Math.max(-M,Math.min(k-M,i-M)),n=Math.max(-M,Math.min(D-M,n-M)),J.css({top:n+"px",left:i+"px"});var o=$*R;ne.css({left:o-I/2+"px"});var r=N*P;ee.css({top:r-O+"px"})}}function ze(e){var t=$e(),i="",n=!tinycolor.equals(t,be);t&&(i=t.toString(ye),Ae(t)),ue&&Y.val(i),e&&n&&(x.change(t),Y.trigger("change",[t]))}function We(){E&&(k=Z.width(),D=Z.height(),M=J.height(),Q.width(),P=Q.height(),O=ee.height(),R=ie.width(),I=ne.width(),w||(K.css("position","absolute"),y.offset?K.offset(y.offset):K.offset(function(t,i){var n=0,o=t.outerWidth(),r=t.outerHeight(),s=i.outerHeight(),a=t[0].ownerDocument,l=a.documentElement,c=l.clientWidth+e(a).scrollLeft(),d=l.clientHeight+e(a).scrollTop(),u=i.offset(),h=u.left,p=u.top;return p+=s,h-=Math.min(h,h+o>c&&c>o?Math.abs(h+o-c):0),{top:p-=Math.min(p,p+r>d&&d>r?Math.abs(r+s-n):n),bottom:u.bottom,left:h,right:u.right,width:u.width,height:u.height}}(K,fe))),He(),y.showPalette&&Ee(),Y.trigger("reflow.spectrum"))}function Ve(){Ne(),q=!0,Y.attr("disabled",!0),fe.addClass("sp-disabled")}!function(){if(o&&K.find("*:not(input)").attr("unselectable","on"),Se(),pe&&Y.after(ge).hide(),_e||le.hide(),w)Y.after(K).hide();else{var t="parent"===y.appendTo?Y.parent():e(y.appendTo);1!==t.length&&(t=e("body")),t.append(K)}function i(t){return t.data&&t.data.ignore?(Fe(e(t.target).closest(".sp-thumb-el").data("color")),Ge()):(Fe(e(t.target).closest(".sp-thumb-el").data("color")),Ge(),y.hideAfterPaletteSelect?(ze(!0),Ne()):ze()),!1}xe(),fe.on("click.spectrum touchstart.spectrum",function(t){q||Pe(),t.stopPropagation(),e(t.target).is("input")||t.preventDefault()}),(Y.is(":disabled")||!0===y.disabled)&&Ve(),K.click(u),oe.change(Me),oe.on("paste",function(){setTimeout(Me,1)}),oe.keydown(function(e){13==e.keyCode&&Me()}),ae.text(y.cancelText),ae.on("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),Le(),Ne()}),le.attr("title",y.clearText),le.on("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),Ce=!0,Ge(),w&&ze(!0)}),ce.text(y.chooseText),ce.on("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),o&&oe.is(":focus")&&oe.trigger("change"),oe.hasClass("sp-validation-error")||(ze(!0),Ne())}),de.text(y.showPaletteOnly?y.togglePaletteMoreText:y.togglePaletteLessText),de.on("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),y.showPaletteOnly=!y.showPaletteOnly,y.showPaletteOnly||w||K.css("left","-="+(X.outerWidth(!0)+5)),Se()}),p(ie,function(e,t,i){$=e/R,Ce=!1,i.shiftKey&&($=Math.round(10*$)/10),Ge()},ke,De),p(Q,function(e,t){N=parseFloat(t/P),Ce=!1,y.showAlpha||($=1),Ge()},ke,De),p(Z,function(e,t,i){if(i.shiftKey){if(!j){var n=L*k,o=D-F*D,r=Math.abs(e-n)>Math.abs(t-o);j=r?"x":"y"}}else j=null;var s=!j||"y"===j;(!j||"x"===j)&&(L=parseFloat(e/k)),s&&(F=parseFloat((D-t)/D)),Ce=!1,y.showAlpha||($=1),Ge()},ke,De),ve?(Fe(ve),Be(),ye=y.preferredFormat||tinycolor(ve).format,Ae(ve)):Be(),w&&Re();var n=o?"mousedown.spectrum":"click.spectrum touchstart.spectrum";re.on(n,".sp-thumb-el",i),se.on(n,".sp-thumb-el:nth-child(1)",{ignore:!0},i)}();var je={show:Re,hide:Ne,toggle:Pe,reflow:We,option:function(i,n){return i===t?e.extend({},y):n===t?y[i]:(y[i]=n,"preferredFormat"===i&&(ye=y.preferredFormat),void Se())},enable:function(){q=!1,Y.attr("disabled",!1),fe.removeClass("sp-disabled")},disable:Ve,offset:function(e){y.offset=e,We()},set:function(e){Fe(e),ze()},get:$e,destroy:function(){Y.show(),fe.off("click.spectrum touchstart.spectrum"),K.remove(),ge.remove(),n[je.id]=null},container:K};return je.id=n.push(je)-1,je}function d(){}function u(e){e.stopPropagation()}function h(e,t){var i=Array.prototype.slice,n=i.call(arguments,2);return function(){return e.apply(t,n.concat(i.call(arguments)))}}function p(t,i,n,r){i=i||function(){},n=n||function(){},r=r||function(){};var s=document,a=!1,l={},c=0,d=0,u="ontouchstart"in window,h={};function p(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function g(e){if(a){if(o&&s.documentMode<9&&!e.button)return f();var n=e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0],r=n&&n.pageX||e.pageX,h=n&&n.pageY||e.pageY,g=Math.max(0,Math.min(r-l.left,d)),m=Math.max(0,Math.min(h-l.top,c));u&&p(e),i.apply(t,[g,m,e])}}function f(){a&&(e(s).off(h),e(s.body).removeClass("sp-dragging"),setTimeout(function(){r.apply(t,arguments)},0)),a=!1}h.selectstart=p,h.dragstart=p,h["touchmove mousemove"]=g,h["touchend mouseup"]=f,e(t).on("touchstart mousedown",function(i){(i.which?3==i.which:2==i.button)||a||!1!==n.apply(t,arguments)&&(a=!0,c=e(t).height(),d=e(t).width(),l=e(t).offset(),e(s).on(h),e(s.body).addClass("sp-dragging"),g(i),p(i))})}function g(){return e.fn.spectrum.inputTypeColorSupport()}var f="spectrum.id";e.fn.spectrum=function(t,i){if("string"==typeof t){var o=this,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=n[e(this).data(f)];if(i){var s=i[t];if(!s)throw new Error("Spectrum: no such method: '"+t+"'");"get"==t?o=i.get():"container"==t?o=i.container:"option"==t?o=i.option.apply(i,r):"destroy"==t?(i.destroy(),e(this).removeData(f)):s.apply(i,r)}}),o}return this.spectrum("destroy").each(function(){var i=c(this,e.extend({},e(this).data(),t));e(this).data(f,i.id)})},e.fn.spectrum.load=!0,e.fn.spectrum.loadOpts={},e.fn.spectrum.draggable=p,e.fn.spectrum.defaults=i,e.fn.spectrum.inputTypeColorSupport=function t(){if(void 0===t._cachedResult){var i=e("<input type='color'/>")[0];t._cachedResult="color"===i.type&&""!==i.value}return t._cachedResult},e.spectrum={},e.spectrum.localization={},e.spectrum.palettes={},e.fn.spectrum.processNativeColorInputs=function(){var t=e("input[type=color]");t.length&&!g()&&t.spectrum({preferredFormat:"hex6"})},function(){var e=/^[\s,#]+/,t=/\s+$/,i=0,n=Math,o=n.round,r=n.min,s=n.max,a=n.random,l=function(a,c){if(c=c||{},(a=a||"")instanceof l)return a;if(!(this instanceof l))return new l(a,c);var d=function(i){var o={r:0,g:0,b:0},a=1,l=!1,c=!1;"string"==typeof i&&(i=function(i){i=i.replace(e,"").replace(t,"").toLowerCase();var n,o=!1;if(E[i])i=E[i],o=!0;else if("transparent"==i)return{r:0,g:0,b:0,a:0,format:"name"};if(n=$.rgb.exec(i))return{r:n[1],g:n[2],b:n[3]};if(n=$.rgba.exec(i))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=$.hsl.exec(i))return{h:n[1],s:n[2],l:n[3]};if(n=$.hsla.exec(i))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=$.hsv.exec(i))return{h:n[1],s:n[2],v:n[3]};if(n=$.hsva.exec(i))return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=$.hex8.exec(i))return{a:O(n[1]),r:P(n[2]),g:P(n[3]),b:P(n[4]),format:o?"name":"hex8"};if(n=$.hex6.exec(i))return{r:P(n[1]),g:P(n[2]),b:P(n[3]),format:o?"name":"hex"};if(n=$.hex3.exec(i))return{r:P(n[1]+""+n[1]),g:P(n[2]+""+n[2]),b:P(n[3]+""+n[3]),format:o?"name":"hex"};return!1}(i));"object"==typeof i&&(i.hasOwnProperty("r")&&i.hasOwnProperty("g")&&i.hasOwnProperty("b")?(d=i.r,u=i.g,h=i.b,o={r:255*D(d,255),g:255*D(u,255),b:255*D(h,255)},l=!0,c="%"===String(i.r).substr(-1)?"prgb":"rgb"):i.hasOwnProperty("h")&&i.hasOwnProperty("s")&&i.hasOwnProperty("v")?(i.s=I(i.s),i.v=I(i.v),o=function(e,t,i){e=6*D(e,360),t=D(t,100),i=D(i,100);var o=n.floor(e),r=e-o,s=i*(1-t),a=i*(1-r*t),l=i*(1-(1-r)*t),c=o%6,d=[i,a,s,s,l,i][c],u=[l,i,i,a,s,s][c],h=[s,s,l,i,i,a][c];return{r:255*d,g:255*u,b:255*h}}(i.h,i.s,i.v),l=!0,c="hsv"):i.hasOwnProperty("h")&&i.hasOwnProperty("s")&&i.hasOwnProperty("l")&&(i.s=I(i.s),i.l=I(i.l),o=function(e,t,i){var n,o,r;function s(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}if(e=D(e,360),t=D(t,100),i=D(i,100),0===t)n=o=r=i;else{var a=i<.5?i*(1+t):i+t-i*t,l=2*i-a;n=s(l,a,e+1/3),o=s(l,a,e),r=s(l,a,e-1/3)}return{r:255*n,g:255*o,b:255*r}}(i.h,i.s,i.l),l=!0,c="hsl"),i.hasOwnProperty("a")&&(a=i.a));var d,u,h;return a=k(a),{ok:l,format:i.format||c,r:r(255,s(o.r,0)),g:r(255,s(o.g,0)),b:r(255,s(o.b,0)),a:a}}(a);this._originalInput=a,this._r=d.r,this._g=d.g,this._b=d.b,this._a=d.a,this._roundA=o(1e3*this._a)/1e3,this._format=c.format||d.format,this._gradientType=c.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b)),this._ok=d.ok,this._tc_id=i++};function c(e,t,i){e=D(e,255),t=D(t,255),i=D(i,255);var n,o,a=s(e,t,i),l=r(e,t,i),c=(a+l)/2;if(a==l)n=o=0;else{var d=a-l;switch(o=c>.5?d/(2-a-l):d/(a+l),a){case e:n=(t-i)/d+(t<i?6:0);break;case t:n=(i-e)/d+2;break;case i:n=(e-t)/d+4}n/=6}return{h:n,s:o,l:c}}function d(e,t,i){e=D(e,255),t=D(t,255),i=D(i,255);var n,o,a=s(e,t,i),l=r(e,t,i),c=a,d=a-l;if(o=0===a?0:d/a,a==l)n=0;else{switch(a){case e:n=(t-i)/d+(t<i?6:0);break;case t:n=(i-e)/d+2;break;case i:n=(e-t)/d+4}n/=6}return{h:n,s:o,v:c}}function u(e,t,i,n){var r=[R(o(e).toString(16)),R(o(t).toString(16)),R(o(i).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function h(e,t,i,n){var r;return[R((r=n,Math.round(255*parseFloat(r)).toString(16))),R(o(e).toString(16)),R(o(t).toString(16)),R(o(i).toString(16))].join("")}function p(e,t){t=0===t?0:t||10;var i=l(e).toHsl();return i.s-=t/100,i.s=M(i.s),l(i)}function g(e,t){t=0===t?0:t||10;var i=l(e).toHsl();return i.s+=t/100,i.s=M(i.s),l(i)}function f(e){return l(e).desaturate(100)}function m(e,t){t=0===t?0:t||10;var i=l(e).toHsl();return i.l+=t/100,i.l=M(i.l),l(i)}function v(e,t){t=0===t?0:t||10;var i=l(e).toRgb();return i.r=s(0,r(255,i.r-o(-t/100*255))),i.g=s(0,r(255,i.g-o(-t/100*255))),i.b=s(0,r(255,i.b-o(-t/100*255))),l(i)}function b(e,t){t=0===t?0:t||10;var i=l(e).toHsl();return i.l-=t/100,i.l=M(i.l),l(i)}function y(e,t){var i=l(e).toHsl(),n=(o(i.h)+t)%360;return i.h=n<0?360+n:n,l(i)}function w(e){var t=l(e).toHsl();return t.h=(t.h+180)%360,l(t)}function C(e){var t=l(e).toHsl(),i=t.h;return[l(e),l({h:(i+120)%360,s:t.s,l:t.l}),l({h:(i+240)%360,s:t.s,l:t.l})]}function _(e){var t=l(e).toHsl(),i=t.h;return[l(e),l({h:(i+90)%360,s:t.s,l:t.l}),l({h:(i+180)%360,s:t.s,l:t.l}),l({h:(i+270)%360,s:t.s,l:t.l})]}function S(e){var t=l(e).toHsl(),i=t.h;return[l(e),l({h:(i+72)%360,s:t.s,l:t.l}),l({h:(i+216)%360,s:t.s,l:t.l})]}function x(e,t,i){t=t||6,i=i||30;var n=l(e).toHsl(),o=360/i,r=[l(e)];for(n.h=(n.h-(o*t>>1)+720)%360;--t;)n.h=(n.h+o)%360,r.push(l(n));return r}function A(e,t){t=t||6;for(var i=l(e).toHsv(),n=i.h,o=i.s,r=i.v,s=[],a=1/t;t--;)s.push(l({h:n,s:o,v:r})),r=(r+a)%1;return s}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},setAlpha:function(e){return this._a=k(e),this._roundA=o(1e3*this._a)/1e3,this},toHsv:function(){var e=d(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=d(this._r,this._g,this._b),t=o(360*e.h),i=o(100*e.s),n=o(100*e.v);return 1==this._a?"hsv("+t+", "+i+"%, "+n+"%)":"hsva("+t+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=c(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=c(this._r,this._g,this._b),t=o(360*e.h),i=o(100*e.s),n=o(100*e.l);return 1==this._a?"hsl("+t+", "+i+"%, "+n+"%)":"hsla("+t+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return u(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return h(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(100*D(this._r,255))+"%",g:o(100*D(this._g,255))+"%",b:o(100*D(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+o(100*D(this._r,255))+"%, "+o(100*D(this._g,255))+"%, "+o(100*D(this._b,255))+"%)":"rgba("+o(100*D(this._r,255))+"%, "+o(100*D(this._g,255))+"%, "+o(100*D(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(T[u(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+h(this._r,this._g,this._b,this._a),i=t,n=this._gradientType?"GradientType = 1, ":"";e&&(i=l(e).toHex8String());return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+i+")"},toString:function(e){var t=!!e;e=e||this._format;var i=!1,n=this._a<1&&this._a>=0;return t||!n||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"name"!==e?("rgb"===e&&(i=this.toRgbString()),"prgb"===e&&(i=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(i=this.toHexString()),"hex3"===e&&(i=this.toHexString(!0)),"hex8"===e&&(i=this.toHex8String()),"name"===e&&(i=this.toName()),"hsl"===e&&(i=this.toHslString()),"hsv"===e&&(i=this.toHsvString()),i||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(e,t){var i=e.apply(null,[this].concat([].slice.call(t)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(v,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(f,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(x,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(A,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(C,arguments)},tetrad:function(){return this._applyCombination(_,arguments)}},l.fromRatio=function(e,t){if("object"==typeof e){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]="a"===n?e[n]:I(e[n]));e=i}return l(e,t)},l.equals=function(e,t){return!(!e||!t)&&l(e).toRgbString()==l(t).toRgbString()},l.random=function(){return l.fromRatio({r:a(),g:a(),b:a()})},l.mix=function(e,t,i){i=0===i?0:i||50;var n,o=l(e).toRgb(),r=l(t).toRgb(),s=i/100,a=2*s-1,c=r.a-o.a,d=1-(n=((n=a*c==-1?a:(a+c)/(1+a*c))+1)/2),u={r:r.r*n+o.r*d,g:r.g*n+o.g*d,b:r.b*n+o.b*d,a:r.a*s+o.a*(1-s)};return l(u)},l.readability=function(e,t){var i=l(e),n=l(t),o=i.toRgb(),r=n.toRgb(),s=i.getBrightness(),a=n.getBrightness(),c=Math.max(o.r,r.r)-Math.min(o.r,r.r)+Math.max(o.g,r.g)-Math.min(o.g,r.g)+Math.max(o.b,r.b)-Math.min(o.b,r.b);return{brightness:Math.abs(s-a),color:c}},l.isReadable=function(e,t){var i=l.readability(e,t);return i.brightness>125&&i.color>500},l.mostReadable=function(e,t){for(var i=null,n=0,o=!1,r=0;r<t.length;r++){var s=l.readability(e,t[r]),a=s.brightness>125&&s.color>500,c=s.brightness/125*3+s.color/500;(a&&!o||a&&o&&c>n||!a&&!o&&c>n)&&(o=a,n=c,i=l(t[r]))}return i};var E=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=l.hexNames=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[e[i]]=i);return t}(E);function k(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function D(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var i=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=r(t,s(0,parseFloat(e))),i&&(e=parseInt(e*t,10)/100),n.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function M(e){return r(1,s(0,e))}function P(e){return parseInt(e,16)}function R(e){return 1==e.length?"0"+e:""+e}function I(e){return e<=1&&(e=100*e+"%"),e}function O(e){return P(e)/255}var N,L,F,$=(L="[\\s|\\(]+("+(N="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",F="[\\s|\\(]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",{rgb:new RegExp("rgb"+L),rgba:new RegExp("rgba"+F),hsl:new RegExp("hsl"+L),hsla:new RegExp("hsla"+F),hsv:new RegExp("hsv"+L),hsva:new RegExp("hsva"+F),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=l}(),e(function(){e.fn.spectrum.load&&e.fn.spectrum.processNativeColorInputs()})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var t=e.fn.select2.amd;return function(){var e,i,n;t&&t.requirejs||(t?i=t:t={},function(t){var o,r,s,a,l={},c={},d={},u={},h=Object.prototype.hasOwnProperty,p=[].slice,g=/\.js$/;function f(e,t){return h.call(e,t)}function m(e,t){var i,n,o,r,s,a,l,c,u,h,p,f=t&&t.split("/"),m=d.map,v=m&&m["*"]||{};if(e){for(s=(e=e.split("/")).length-1,d.nodeIdCompat&&g.test(e[s])&&(e[s]=e[s].replace(g,"")),"."===e[0].charAt(0)&&f&&(e=f.slice(0,f.length-1).concat(e)),u=0;u<e.length;u++)if("."===(p=e[u]))e.splice(u,1),u-=1;else if(".."===p){if(0===u||1===u&&".."===e[2]||".."===e[u-1])continue;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}if((f||v)&&m){for(u=(i=e.split("/")).length;u>0;u-=1){if(n=i.slice(0,u).join("/"),f)for(h=f.length;h>0;h-=1)if((o=m[f.slice(0,h).join("/")])&&(o=o[n])){r=o,a=u;break}if(r)break;!l&&v&&v[n]&&(l=v[n],c=u)}!r&&l&&(r=l,a=c),r&&(i.splice(0,a,r),e=i.join("/"))}return e}function v(e,i){return function(){var n=p.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),r.apply(t,n.concat([e,i]))}}function b(e){return function(t){l[e]=t}}function y(e){if(f(c,e)){var i=c[e];delete c[e],u[e]=!0,o.apply(t,i)}if(!f(l,e)&&!f(u,e))throw new Error("No "+e);return l[e]}function w(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function C(e){return e?w(e):[]}function _(e){return function(){return d&&d.config&&d.config[e]||{}}}s=function(e,t){var i,n,o=w(e),r=o[0],s=t[1];return e=o[1],r&&(i=y(r=m(r,s))),r?e=i&&i.normalize?i.normalize(e,(n=s,function(e){return m(e,n)})):m(e,s):(r=(o=w(e=m(e,s)))[0],e=o[1],r&&(i=y(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:i}},a={require:function(e){return v(e)},exports:function(e){var t=l[e];return void 0!==t?t:l[e]={}},module:function(e){return{id:e,uri:"",exports:l[e],config:_(e)}}},o=function(e,i,n,o){var r,d,h,p,g,m,w,_=[],S=typeof n;if(m=C(o=o||e),"undefined"===S||"function"===S){for(i=!i.length&&n.length?["require","exports","module"]:i,g=0;g<i.length;g+=1)if("require"===(d=(p=s(i[g],m)).f))_[g]=a.require(e);else if("exports"===d)_[g]=a.exports(e),w=!0;else if("module"===d)r=_[g]=a.module(e);else if(f(l,d)||f(c,d)||f(u,d))_[g]=y(d);else{if(!p.p)throw new Error(e+" missing "+d);p.p.load(p.n,v(o,!0),b(d),{}),_[g]=l[d]}h=n?n.apply(l[e],_):void 0,e&&(r&&r.exports!==t&&r.exports!==l[e]?l[e]=r.exports:h===t&&w||(l[e]=h))}else e&&(l[e]=n)},e=i=r=function(e,i,n,l,c){if("string"==typeof e)return a[e]?a[e](i):y(s(e,C(i)).f);if(!e.splice){if((d=e).deps&&r(d.deps,d.callback),!i)return;i.splice?(e=i,i=n,n=null):e=t}return i=i||function(){},"function"==typeof n&&(n=l,l=c),l?o(t,e,i,n):setTimeout(function(){o(t,e,i,n)},4),r},r.config=function(e){return r(e)},e._defined=l,(n=function(e,t,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(i=t,t=[]),f(l,e)||f(c,e)||(c[e]=[e,t,i])}).amd={jQuery:!0}}(),t.requirejs=e,t.require=i,t.define=n)}(),t.define("almond",function(){}),t.define("jquery",[],function(){var t=e||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),t.define("select2/utils",["jquery"],function(e){var t={};function i(e){var t=e.prototype,i=[];for(var n in t){"function"==typeof t[n]&&("constructor"!==n&&i.push(n))}return i}t.Extend=function(e,t){var i={}.hasOwnProperty;function n(){this.constructor=e}for(var o in t)i.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},t.Decorate=function(e,t){var n=i(t),o=i(e);function r(){var i=Array.prototype.unshift,n=t.prototype.constructor.length,o=e.prototype.constructor;n>0&&(i.call(arguments,e.prototype.constructor),o=t.prototype.constructor),o.apply(this,arguments)}t.displayName=e.displayName,r.prototype=new function(){this.constructor=r};for(var s=0;s<o.length;s++){var a=o[s];r.prototype[a]=e.prototype[a]}for(var l=function(e){var i=function(){};e in r.prototype&&(i=r.prototype[e]);var n=t.prototype[e];return function(){return Array.prototype.unshift.call(arguments,i),n.apply(this,arguments)}},c=0;c<n.length;c++){var d=n[c];r.prototype[d]=l(d)}return r};var n=function(){this.listeners={}};n.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},n.prototype.trigger=function(e){var t=Array.prototype.slice,i=t.call(arguments,1);this.listeners=this.listeners||{},null==i&&(i=[]),0===i.length&&i.push({}),i[0]._type=e,e in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},n.prototype.invoke=function(e,t){for(var i=0,n=e.length;i<n;i++)e[i].apply(this,t)},t.Observable=n,t.generateChars=function(e){for(var t="",i=0;i<e;i++){t+=Math.floor(36*Math.random()).toString(36)}return t},t.bind=function(e,t){return function(){e.apply(t,arguments)}},t._convertData=function(e){for(var t in e){var i=t.split("-"),n=e;if(1!==i.length){for(var o=0;o<i.length;o++){var r=i[o];(r=r.substring(0,1).toLowerCase()+r.substring(1))in n||(n[r]={}),o==i.length-1&&(n[r]=e[t]),n=n[r]}delete e[t]}}return e},t.hasScroll=function(t,i){var n=e(i),o=i.style.overflowX,r=i.style.overflowY;return(o!==r||"hidden"!==r&&"visible"!==r)&&("scroll"===o||"scroll"===r||(n.innerHeight()<i.scrollHeight||n.innerWidth()<i.scrollWidth))},t.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},t.__cache={};var o=0;return t.GetUniqueElementId=function(e){var i=e.getAttribute("data-select2-id");return null!=i||(i=e.id?"select2-data-"+e.id:"select2-data-"+(++o).toString()+"-"+t.generateChars(4),e.setAttribute("data-select2-id",i)),i},t.StoreData=function(e,i,n){var o=t.GetUniqueElementId(e);t.__cache[o]||(t.__cache[o]={}),t.__cache[o][i]=n},t.GetData=function(i,n){var o=t.GetUniqueElementId(i);return n?t.__cache[o]&&null!=t.__cache[o][n]?t.__cache[o][n]:e(i).data(n):t.__cache[o]},t.RemoveData=function(e){var i=t.GetUniqueElementId(e);null!=t.__cache[i]&&delete t.__cache[i],e.removeAttribute("data-select2-id")},t.copyNonInternalCssClasses=function(e,t){var i=e.getAttribute("class").trim().split(/\s+/);i=i.filter(function(e){return 0===e.indexOf("select2-")});var n=t.getAttribute("class").trim().split(/\s+/);n=n.filter(function(e){return 0!==e.indexOf("select2-")});var o=i.concat(n);e.setAttribute("class",o.join(" "))},t}),t.define("select2/results",["jquery","./utils"],function(e,t){function i(e,t,n){this.$element=e,this.data=n,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=e('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(t){var i=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=e('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),o=this.options.get("translations").get(t.message);n.append(i(o(t.args))),n[0].className+=" select2-results__message",this.$results.append(n)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var i=0;i<e.results.length;i++){var n=e.results[i],o=this.option(n);t.push(o)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},i.prototype.position=function(e,t){t.find(".select2-results").append(e)},i.prototype.sort=function(e){return this.options.get("sorter")(e)},i.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option--selectable"),t=e.filter(".select2-results__option--selected");t.length>0?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},i.prototype.setClasses=function(){var i=this;this.data.current(function(n){var o=n.map(function(e){return e.id.toString()});i.$results.find(".select2-results__option--selectable").each(function(){var i=e(this),n=t.GetData(this,"data"),r=""+n.id;null!=n.element&&n.element.selected||null==n.element&&o.indexOf(r)>-1?(this.classList.add("select2-results__option--selected"),i.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),i.attr("aria-selected","false"))})})},i.prototype.showLoading=function(e){this.hideLoading();var t={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},i=this.option(t);i.className+=" loading-results",this.$results.prepend(i)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(i){var n=document.createElement("li");n.classList.add("select2-results__option"),n.classList.add("select2-results__option--selectable");var o={role:"option"},r=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var s in(null!=i.element&&r.call(i.element,":disabled")||null==i.element&&i.disabled)&&(o["aria-disabled"]="true",n.classList.remove("select2-results__option--selectable"),n.classList.add("select2-results__option--disabled")),null==i.id&&n.classList.remove("select2-results__option--selectable"),null!=i._resultId&&(n.id=i._resultId),i.title&&(n.title=i.title),i.children&&(o.role="group",o["aria-label"]=i.text,n.classList.remove("select2-results__option--selectable"),n.classList.add("select2-results__option--group")),o){var a=o[s];n.setAttribute(s,a)}if(i.children){var l=e(n),c=document.createElement("strong");c.className="select2-results__group",this.template(i,c);for(var d=[],u=0;u<i.children.length;u++){var h=i.children[u],p=this.option(h);d.push(p)}var g=e("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});g.append(d),l.append(c),l.append(g)}else this.template(i,n);return t.StoreData(n,"data",i),n},i.prototype.bind=function(i,n){var o=this,r=i.id+"-results";this.$results.attr("id",r),i.on("results:all",function(e){o.clear(),o.append(e.data),i.isOpen()&&(o.setClasses(),o.highlightFirstItem())}),i.on("results:append",function(e){o.append(e.data),i.isOpen()&&o.setClasses()}),i.on("query",function(e){o.hideMessages(),o.showLoading(e)}),i.on("select",function(){i.isOpen()&&(o.setClasses(),o.options.get("scrollAfterSelect")&&o.highlightFirstItem())}),i.on("unselect",function(){i.isOpen()&&(o.setClasses(),o.options.get("scrollAfterSelect")&&o.highlightFirstItem())}),i.on("open",function(){o.$results.attr("aria-expanded","true"),o.$results.attr("aria-hidden","false"),o.setClasses(),o.ensureHighlightVisible()}),i.on("close",function(){o.$results.attr("aria-expanded","false"),o.$results.attr("aria-hidden","true"),o.$results.removeAttr("aria-activedescendant")}),i.on("results:toggle",function(){var e=o.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),i.on("results:select",function(){var e=o.getHighlightedResults();if(0!==e.length){var i=t.GetData(e[0],"data");e.hasClass("select2-results__option--selected")?o.trigger("close",{}):o.trigger("select",{data:i})}}),i.on("results:previous",function(){var e=o.getHighlightedResults(),t=o.$results.find(".select2-results__option--selectable"),i=t.index(e);if(!(i<=0)){var n=i-1;0===e.length&&(n=0);var r=t.eq(n);r.trigger("mouseenter");var s=o.$results.offset().top,a=r.offset().top,l=o.$results.scrollTop()+(a-s);0===n?o.$results.scrollTop(0):a-s<0&&o.$results.scrollTop(l)}}),i.on("results:next",function(){var e=o.getHighlightedResults(),t=o.$results.find(".select2-results__option--selectable"),i=t.index(e)+1;if(!(i>=t.length)){var n=t.eq(i);n.trigger("mouseenter");var r=o.$results.offset().top+o.$results.outerHeight(!1),s=n.offset().top+n.outerHeight(!1),a=o.$results.scrollTop()+s-r;0===i?o.$results.scrollTop(0):s>r&&o.$results.scrollTop(a)}}),i.on("results:focus",function(e){e.element[0].classList.add("select2-results__option--highlighted"),e.element[0].setAttribute("aria-selected","true")}),i.on("results:message",function(e){o.displayMessage(e)}),e.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=o.$results.scrollTop(),i=o.$results.get(0).scrollHeight-t+e.deltaY,n=e.deltaY>0&&t-e.deltaY<=0,r=e.deltaY<0&&i<=o.$results.height();n?(o.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):r&&(o.$results.scrollTop(o.$results.get(0).scrollHeight-o.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option--selectable",function(i){var n=e(this),r=t.GetData(this,"data");n.hasClass("select2-results__option--selected")?o.options.get("multiple")?o.trigger("unselect",{originalEvent:i,data:r}):o.trigger("close",{}):o.trigger("select",{originalEvent:i,data:r})}),this.$results.on("mouseenter",".select2-results__option--selectable",function(i){var n=t.GetData(this,"data");o.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false"),o.trigger("results:focus",{data:n,element:e(this)})})},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find(".select2-results__option--selectable").index(e),i=this.$results.offset().top,n=e.offset().top,o=this.$results.scrollTop()+(n-i),r=n-i;o-=2*e.outerHeight(!1),t<=2?this.$results.scrollTop(0):(r>this.$results.outerHeight()||r<0)&&this.$results.scrollTop(o)}},i.prototype.template=function(t,i){var n=this.options.get("templateResult"),o=this.options.get("escapeMarkup"),r=n(t,i);null==r?i.style.display="none":"string"==typeof r?i.innerHTML=o(r):e(i).append(r)},i}),t.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(e,t,i){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var i=e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=t.GetData(this.$element[0],"old-tabindex")?this._tabindex=t.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),i.attr("title",this.$element.attr("title")),i.attr("tabindex",this._tabindex),i.attr("aria-disabled","false"),this.$selection=i,i},n.prototype.bind=function(e,t){var n=this,o=e.id+"-results";this.container=e,this.$selection.on("focus",function(e){n.trigger("focus",e)}),this.$selection.on("blur",function(e){n._handleBlur(e)}),this.$selection.on("keydown",function(e){n.trigger("keypress",e),e.which===i.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){n.update(e.data)}),e.on("open",function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",o),n._attachCloseHandler(e)}),e.on("close",function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.trigger("focus"),n._detachCloseHandler(e)}),e.on("enable",function(){n.$selection.attr("tabindex",n._tabindex),n.$selection.attr("aria-disabled","false")}),e.on("disable",function(){n.$selection.attr("tabindex","-1"),n.$selection.attr("aria-disabled","true")})},n.prototype._handleBlur=function(t){var i=this;window.setTimeout(function(){document.activeElement==i.$selection[0]||e.contains(i.$selection[0],document.activeElement)||i.trigger("blur",t)},1)},n.prototype._attachCloseHandler=function(i){e(document.body).on("mousedown.select2."+i.id,function(i){var n=e(i.target).closest(".select2");e(".select2.select2-container--open").each(function(){this!=n[0]&&t.GetData(this,"element").select2("close")})})},n.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},n.prototype.position=function(e,t){t.find(".selection").append(e)},n.prototype.destroy=function(){this._detachCloseHandler(this.container)},n.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},n.prototype.isEnabled=function(){return!this.isDisabled()},n.prototype.isDisabled=function(){return this.options.get("disabled")},n}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,i,n){function o(){o.__super__.constructor.apply(this,arguments)}return i.Extend(o,t),o.prototype.render=function(){var e=o.__super__.render.call(this);return e[0].classList.add("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},o.prototype.bind=function(e,t){var i=this;o.__super__.bind.apply(this,arguments);var n=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",n),this.$selection.attr("aria-controls",n),this.$selection.on("mousedown",function(e){1===e.which&&i.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),e.on("focus",function(t){e.isOpen()||i.$selection.trigger("focus")})},o.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},o.prototype.display=function(e,t){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(e,t))},o.prototype.selectionContainer=function(){return e("<span></span>")},o.prototype.update=function(e){if(0!==e.length){var t=e[0],i=this.$selection.find(".select2-selection__rendered"),n=this.display(t,i);i.empty().append(n);var o=t.title||t.text;o?i.attr("title",o):i.removeAttr("title")}else this.clear()},o}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(e,t,i){function n(e,t){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,t),n.prototype.render=function(){var e=n.__super__.render.call(this);return e[0].classList.add("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},n.prototype.bind=function(t,o){var r=this;n.__super__.bind.apply(this,arguments);var s=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",s),this.$selection.on("click",function(e){r.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(t){if(!r.isDisabled()){var n=e(this).parent(),o=i.GetData(n[0],"data");r.trigger("unselect",{originalEvent:t,data:o})}}),this.$selection.on("keydown",".select2-selection__choice__remove",function(e){r.isDisabled()||e.stopPropagation()})},n.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},n.prototype.display=function(e,t){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(e,t))},n.prototype.selectionContainer=function(){return e('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;</span></button><span class="select2-selection__choice__display"></span></li>')},n.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],n=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",o=0;o<e.length;o++){var r=e[o],s=this.selectionContainer(),a=this.display(r,s),l=n+i.generateChars(4)+"-";r.id?l+=r.id:l+=i.generateChars(4),s.find(".select2-selection__choice__display").append(a).attr("id",l);var c=r.title||r.text;c&&s.attr("title",c);var d=this.options.get("translations").get("removeItem"),u=s.find(".select2-selection__choice__remove");u.attr("title",d()),u.attr("aria-label",d()),u.attr("aria-describedby",l),i.StoreData(s[0],"data",r),t.push(s)}this.$selection.find(".select2-selection__rendered").append(t)}},n}),t.define("select2/selection/placeholder",[],function(){function e(e,t,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),e.call(this,t,i)}return e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.createPlaceholder=function(e,t){var i=this.selectionContainer();i.html(this.display(t)),i[0].classList.add("select2-selection__placeholder"),i[0].classList.remove("select2-selection__choice");var n=t.title||t.text||i.text();return this.$selection.find(".select2-selection__rendered").attr("title",n),i},e.prototype.update=function(e,t){var i=1==t.length&&t[0].id!=this.placeholder.id;if(t.length>1||i)return e.call(this,t);this.clear();var n=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(n)},e}),t.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(e,t,i){function n(){}return n.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){n._handleClear(e)}),t.on("keypress",function(e){n._handleKeyboardClear(e,t)})},n.prototype._handleClear=function(e,t){if(!this.isDisabled()){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();var o=i.GetData(n[0],"data"),r=this.$element.val();this.$element.val(this.placeholder.id);var s={data:o};if(this.trigger("clear",s),s.prevented)this.$element.val(r);else{for(var a=0;a<o.length;a++)if(s={data:o[a]},this.trigger("unselect",s),s.prevented)return void this.$element.val(r);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},n.prototype._handleKeyboardClear=function(e,i,n){n.isOpen()||i.which!=t.DELETE&&i.which!=t.BACKSPACE||this._handleClear(i)},n.prototype.update=function(t,n){if(t.call(this,n),this.$selection.find(".select2-selection__clear").remove(),this.$selection[0].classList.remove("select2-selection--clearable"),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var o=this.$selection.find(".select2-selection__rendered").attr("id"),r=this.options.get("translations").get("removeAllItems"),s=e('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;</span></button>');s.attr("title",r()),s.attr("aria-label",r()),s.attr("aria-describedby",o),i.StoreData(s[0],"data",n),this.$selection.prepend(s),this.$selection[0].classList.add("select2-selection--clearable")}},n}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(e,t,i){function n(e,t,i){e.call(this,t,i)}return n.prototype.render=function(t){var i=this.options.get("translations").get("search"),n=e('<span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" ></textarea></span>');this.$searchContainer=n,this.$search=n.find("textarea"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",i());var o=t.call(this);return this._transferTabIndex(),o.append(this.$searchContainer),o},n.prototype.bind=function(e,n,o){var r=this,s=n.id+"-results",a=n.id+"-container";e.call(this,n,o),r.$search.attr("aria-describedby",a),n.on("open",function(){r.$search.attr("aria-controls",s),r.$search.trigger("focus")}),n.on("close",function(){r.$search.val(""),r.resizeSearch(),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")}),n.on("enable",function(){r.$search.prop("disabled",!1),r._transferTabIndex()}),n.on("disable",function(){r.$search.prop("disabled",!0)}),n.on("focus",function(e){r.$search.trigger("focus")}),n.on("results:focus",function(e){e.data._resultId?r.$search.attr("aria-activedescendant",e.data._resultId):r.$search.removeAttr("aria-activedescendant")}),this.$selection.on("focusin",".select2-search--inline",function(e){r.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){r._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){if(e.stopPropagation(),r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented(),e.which===i.BACKSPACE&&""===r.$search.val()){var n=r.$selection.find(".select2-selection__choice").last();if(n.length>0){var o=t.GetData(n[0],"data");r.searchRemoveChoice(o),e.preventDefault()}}}),this.$selection.on("click",".select2-search--inline",function(e){r.$search.val()&&e.stopPropagation()});var l=document.documentMode,c=l&&l<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){c?r.$selection.off("input.search input.searchcheck"):r.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(c&&"input"===e.type)r.$selection.off("input.search input.searchcheck");else{var t=e.which;t!=i.SHIFT&&t!=i.CTRL&&t!=i.ALT&&t!=i.TAB&&r.handleSearch(e)}})},n.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},n.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},n.prototype.update=function(e,t){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.resizeSearch(),i&&this.$search.trigger("focus")},n.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},n.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},n.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="100%";""===this.$search.attr("placeholder")&&(e=.75*(this.$search.val().length+1)+"em");this.$search.css("width",e)},n}),t.define("select2/selection/selectionCss",["../utils"],function(e){function t(){}return t.prototype.render=function(t){var i=t.call(this),n=this.options.get("selectionCssClass")||"";return-1!==n.indexOf(":all:")&&(n=n.replace(":all:",""),e.copyNonInternalCssClasses(i[0],this.$element[0])),i.addClass(n),i},t}),t.define("select2/selection/eventRelay",["jquery"],function(e){function t(){}return t.prototype.bind=function(t,i,n){var o=this,r=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],s=["opening","closing","selecting","unselecting","clearing"];t.call(this,i,n),i.on("*",function(t,i){if(-1!==r.indexOf(t)){i=i||{};var n=e.Event("select2:"+t,{params:i});o.$element.trigger(n),-1!==s.indexOf(t)&&(i.prevented=n.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(e,t){function i(e){this.dict=e||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(e){return this.dict[e]},i.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},i._cache={},i.loadPath=function(e){if(!(e in i._cache)){var n=t(e);i._cache[e]=n}return new i(i._cache[e])},i}),t.define("select2/diacritics",[],function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Œ":"OE","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","œ":"oe","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ώ":"ω","ς":"σ","’":"'"}}),t.define("select2/data/base",["../utils"],function(e){function t(e,i){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(e,t){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,i){var n=t.id+"-result-";return n+=e.generateChars(4),null!=i.id?n+="-"+i.id.toString():n+="-"+e.generateChars(4),n},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(e,t,i){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,e),n.prototype.current=function(e){var t=this;e(Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),function(e){return t.item(i(e))}))},n.prototype.select=function(e){var t=this;if(e.selected=!0,null!=e.element&&"option"===e.element.tagName.toLowerCase())return e.element.selected=!0,void this.$element.trigger("input").trigger("change");if(this.$element.prop("multiple"))this.current(function(i){var n=[];(e=[e]).push.apply(e,i);for(var o=0;o<e.length;o++){var r=e[o].id;-1===n.indexOf(r)&&n.push(r)}t.$element.val(n),t.$element.trigger("input").trigger("change")});else{var i=e.id;this.$element.val(i),this.$element.trigger("input").trigger("change")}},n.prototype.unselect=function(e){var t=this;if(this.$element.prop("multiple")){if(e.selected=!1,null!=e.element&&"option"===e.element.tagName.toLowerCase())return e.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current(function(i){for(var n=[],o=0;o<i.length;o++){var r=i[o].id;r!==e.id&&-1===n.indexOf(r)&&n.push(r)}t.$element.val(n),t.$element.trigger("input").trigger("change")})}},n.prototype.bind=function(e,t){var i=this;this.container=e,e.on("select",function(e){i.select(e.data)}),e.on("unselect",function(e){i.unselect(e.data)})},n.prototype.destroy=function(){this.$element.find("*").each(function(){t.RemoveData(this)})},n.prototype.query=function(e,t){var n=[],o=this;this.$element.children().each(function(){if("option"===this.tagName.toLowerCase()||"optgroup"===this.tagName.toLowerCase()){var t=i(this),r=o.item(t),s=o.matches(e,r);null!==s&&n.push(s)}}),t({results:n})},n.prototype.addOptions=function(e){this.$element.append(e)},n.prototype.option=function(e){var n;e.children?(n=document.createElement("optgroup")).label=e.text:void 0!==(n=document.createElement("option")).textContent?n.textContent=e.text:n.innerText=e.text,void 0!==e.id&&(n.value=e.id),e.disabled&&(n.disabled=!0),e.selected&&(n.selected=!0),e.title&&(n.title=e.title);var o=this._normalizeItem(e);return o.element=n,t.StoreData(n,"data",o),i(n)},n.prototype.item=function(e){var n={};if(null!=(n=t.GetData(e[0],"data")))return n;var o=e[0];if("option"===o.tagName.toLowerCase())n={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if("optgroup"===o.tagName.toLowerCase()){n={text:e.prop("label"),children:[],title:e.prop("title")};for(var r=e.children("option"),s=[],a=0;a<r.length;a++){var l=i(r[a]),c=this.item(l);s.push(c)}n.children=s}return(n=this._normalizeItem(n)).element=e[0],t.StoreData(e[0],"data",n),n},n.prototype._normalizeItem=function(e){e!==Object(e)&&(e={id:e,text:e});return null!=(e=i.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),i.extend({},{selected:!1,disabled:!1},e)},n.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},n}),t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,i){function n(e,t){this._dataToConvert=t.get("data")||[],n.__super__.constructor.call(this,e,t)}return t.Extend(n,e),n.prototype.bind=function(e,t){n.__super__.bind.call(this,e,t),this.addOptions(this.convertToOptions(this._dataToConvert))},n.prototype.select=function(e){var t=this.$element.find("option").filter(function(t,i){return i.value==e.id.toString()});0===t.length&&(t=this.option(e),this.addOptions(t)),n.__super__.select.call(this,e)},n.prototype.convertToOptions=function(e){var t=this,n=this.$element.find("option"),o=n.map(function(){return t.item(i(this)).id}).get(),r=[];function s(e){return function(){return i(this).val()==e.id}}for(var a=0;a<e.length;a++){var l=this._normalizeItem(e[a]);if(o.indexOf(l.id)>=0){var c=n.filter(s(l)),d=this.item(c),u=i.extend(!0,{},l,d),h=this.option(u);c.replaceWith(h)}else{var p=this.option(l);if(l.children){var g=this.convertToOptions(l.children);p.append(g)}r.push(p)}}return r},n}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,i){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,e,t)}return t.Extend(n,e),n.prototype._applyDefaults=function(e){var t={data:function(e){return i.extend({},e,{q:e.term})},transport:function(e,t,n){var o=i.ajax(e);return o.then(t),o.fail(n),o}};return i.extend({},t,e,!0)},n.prototype.processResults=function(e){return e},n.prototype.query=function(e,t){var n=this;null!=this._request&&("function"==typeof this._request.abort&&this._request.abort(),this._request=null);var o=i.extend({type:"GET"},this.ajaxOptions);function r(){var i=o.transport(o,function(i){var o=n.processResults(i,e);n.options.get("debug")&&window.console&&console.error&&(o&&o.results&&Array.isArray(o.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),t(o)},function(){(!("status"in i)||0!==i.status&&"0"!==i.status)&&n.trigger("results:message",{message:"errorLoading"})});n._request=i}"function"==typeof o.url&&(o.url=o.url.call(this.$element,e)),"function"==typeof o.data&&(o.data=o.data.call(this.$element,e)),this.ajaxOptions.delay&&null!=e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(r,this.ajaxOptions.delay)):r()},n}),t.define("select2/data/tags",["jquery"],function(e){function t(e,t,i){var n=i.get("tags"),o=i.get("createTag");void 0!==o&&(this.createTag=o);var r=i.get("insertTag");if(void 0!==r&&(this.insertTag=r),e.call(this,t,i),Array.isArray(n))for(var s=0;s<n.length;s++){var a=n[s],l=this._normalizeItem(a),c=this.option(l);this.$element.append(c)}}return t.prototype.query=function(e,t,i){var n=this;this._removeOldTags(),null!=t.term&&null==t.page?e.call(this,t,function e(o,r){for(var s=o.results,a=0;a<s.length;a++){var l=s[a],c=null!=l.children&&!e({results:l.children},!0);if((l.text||"").toUpperCase()===(t.term||"").toUpperCase()||c)return!r&&(o.data=s,void i(o))}if(r)return!0;var d=n.createTag(t);if(null!=d){var u=n.option(d);u.attr("data-select2-tag","true"),n.addOptions([u]),n.insertTag(s,d)}o.results=s,i(o)}):e.call(this,t,i)},t.prototype.createTag=function(e,t){if(null==t.term)return null;var i=t.term.trim();return""===i?null:{id:i,text:i}},t.prototype.insertTag=function(e,t,i){t.unshift(i)},t.prototype._removeOldTags=function(t){this.$element.find("option[data-select2-tag]").each(function(){this.selected||e(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(e){function t(e,t,i){var n=i.get("tokenizer");void 0!==n&&(this.tokenizer=n),e.call(this,t,i)}return t.prototype.bind=function(e,t,i){e.call(this,t,i),this.$search=t.dropdown.$search||t.selection.$search||i.find(".select2-search__field")},t.prototype.query=function(t,i,n){var o=this;i.term=i.term||"";var r=this.tokenizer(i,this.options,function(t){var i=o._normalizeItem(t);if(!o.$element.find("option").filter(function(){return e(this).val()===i.id}).length){var n=o.option(i);n.attr("data-select2-tag",!0),o._removeOldTags(),o.addOptions([n])}!function(e){o.trigger("select",{data:e})}(i)});r.term!==i.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.trigger("focus")),i.term=r.term),t.call(this,i,n)},t.prototype.tokenizer=function(t,i,n,o){for(var r=n.get("tokenSeparators")||[],s=i.term,a=0,l=this.createTag||function(e){return{id:e.term,text:e.term}};a<s.length;){var c=s[a];if(-1!==r.indexOf(c)){var d=s.substr(0,a),u=l(e.extend({},i,{term:d}));null!=u?(o(u),s=s.substr(a+1)||"",a=0):a++}else a++}return{term:s}},t}),t.define("select2/data/minimumInputLength",[],function(){function e(e,t,i){this.minimumInputLength=i.get("minimumInputLength"),e.call(this,t,i)}return e.prototype.query=function(e,t,i){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,i)},e}),t.define("select2/data/maximumInputLength",[],function(){function e(e,t,i){this.maximumInputLength=i.get("maximumInputLength"),e.call(this,t,i)}return e.prototype.query=function(e,t,i){t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,i)},e}),t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,i){this.maximumSelectionLength=i.get("maximumSelectionLength"),e.call(this,t,i)}return e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("select",function(){n._checkIfMaximumSelected()})},e.prototype.query=function(e,t,i){var n=this;this._checkIfMaximumSelected(function(){e.call(n,t,i)})},e.prototype._checkIfMaximumSelected=function(e,t){var i=this;this.current(function(e){var n=null!=e?e.length:0;i.maximumSelectionLength>0&&n>=i.maximumSelectionLength?i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):t&&t()})},e}),t.define("select2/dropdown",["jquery","./utils"],function(e,t){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},i.prototype.bind=function(){},i.prototype.position=function(e,t){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),t.define("select2/dropdown/search",["jquery"],function(e){function t(){}return t.prototype.render=function(t){var i=t.call(this),n=this.options.get("translations").get("search"),o=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=o,this.$search=o.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",n()),i.prepend(o),i},t.prototype.bind=function(t,i,n){var o=this,r=i.id+"-results";t.call(this,i,n),this.$search.on("keydown",function(e){o.trigger("keypress",e),o._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(t){e(this).off("keyup")}),this.$search.on("keyup input",function(e){o.handleSearch(e)}),i.on("open",function(){o.$search.attr("tabindex",0),o.$search.attr("aria-controls",r),o.$search.trigger("focus"),window.setTimeout(function(){o.$search.trigger("focus")},0)}),i.on("close",function(){o.$search.attr("tabindex",-1),o.$search.removeAttr("aria-controls"),o.$search.removeAttr("aria-activedescendant"),o.$search.val(""),o.$search.trigger("blur")}),i.on("focus",function(){i.isOpen()||o.$search.trigger("focus")}),i.on("results:all",function(e){null!=e.query.term&&""!==e.query.term||(o.showSearch(e)?o.$searchContainer[0].classList.remove("select2-search--hide"):o.$searchContainer[0].classList.add("select2-search--hide"))}),i.on("results:focus",function(e){e.data._resultId?o.$search.attr("aria-activedescendant",e.data._resultId):o.$search.removeAttr("aria-activedescendant")})},t.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},t.prototype.showSearch=function(e,t){return!0},t}),t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),e.call(this,t,i,n)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var i=t.slice(0),n=t.length-1;n>=0;n--){var o=t[n];this.placeholder.id===o.id&&i.splice(n,1)}return i},e}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(e){function t(e,t,i,n){this.lastParams={},e.call(this,t,i,n),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},t.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("query",function(e){n.lastParams=e,n.loading=!0}),t.on("query:append",function(e){n.lastParams=e,n.loading=!0}),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},t.prototype.loadMoreIfNeeded=function(){var t=e.contains(document.documentElement,this.$loadingMore[0]);!this.loading&&t&&(this.$results.offset().top+this.$results.outerHeight(!1)+50>=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)&&this.loadMore())},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),i=this.options.get("translations").get("loadingMore");return t.html(i(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(e,t){function i(t,i,n){this.$dropdownParent=e(n.get("dropdownParent")||document.body),t.call(this,i,n)}return i.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("open",function(){n._showDropdown(),n._attachPositioningHandler(t),n._bindContainerResultHandlers(t)}),t.on("close",function(){n._hideDropdown(),n._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},i.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},i.prototype.position=function(e,t,i){t.attr("class",i.attr("class")),t[0].classList.remove("select2"),t[0].classList.add("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=i},i.prototype.render=function(t){var i=e("<span></span>"),n=t.call(this);return i.append(n),this.$dropdownContainer=i,i},i.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},i.prototype._bindContainerResultHandlers=function(e,t){if(!this._containerResultsHandlersBound){var i=this;t.on("results:all",function(){i._positionDropdown(),i._resizeDropdown()}),t.on("results:append",function(){i._positionDropdown(),i._resizeDropdown()}),t.on("results:message",function(){i._positionDropdown(),i._resizeDropdown()}),t.on("select",function(){i._positionDropdown(),i._resizeDropdown()}),t.on("unselect",function(){i._positionDropdown(),i._resizeDropdown()}),this._containerResultsHandlersBound=!0}},i.prototype._attachPositioningHandler=function(i,n){var o=this,r="scroll.select2."+n.id,s="resize.select2."+n.id,a="orientationchange.select2."+n.id,l=this.$container.parents().filter(t.hasScroll);l.each(function(){t.StoreData(this,"select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})}),l.on(r,function(i){var n=t.GetData(this,"select2-scroll-position");e(this).scrollTop(n.y)}),e(window).on(r+" "+s+" "+a,function(e){o._positionDropdown(),o._resizeDropdown()})},i.prototype._detachPositioningHandler=function(i,n){var o="scroll.select2."+n.id,r="resize.select2."+n.id,s="orientationchange.select2."+n.id;this.$container.parents().filter(t.hasScroll).off(o),e(window).off(o+" "+r+" "+s)},i.prototype._positionDropdown=function(){var t=e(window),i=this.$dropdown[0].classList.contains("select2-dropdown--above"),n=this.$dropdown[0].classList.contains("select2-dropdown--below"),o=null,r=this.$container.offset();r.bottom=r.top+this.$container.outerHeight(!1);var s={height:this.$container.outerHeight(!1)};s.top=r.top,s.bottom=r.top+s.height;var a=this.$dropdown.outerHeight(!1),l=t.scrollTop(),c=t.scrollTop()+t.height(),d=l<r.top-a,u=c>r.bottom+a,h={left:r.left,top:s.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var g={top:0,left:0};(e.contains(document.body,p[0])||p[0].isConnected)&&(g=p.offset()),h.top-=g.top,h.left-=g.left,i||n||(o="below"),u||!d||i?!d&&u&&i&&(o="below"):o="above",("above"==o||i&&"below"!==o)&&(h.top=s.top-g.top-a),null!=o&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+o),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+o)),this.$dropdownContainer.css(h)},i.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},i.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},i}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(t){for(var i=0,n=0;n<t.length;n++){var o=t[n];o.children?i+=e(o.children):i++}return i}function t(e,t,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,i,n)}return t.prototype.showSearch=function(t,i){return!(e(i.data.results)<this.minimumResultsForSearch)&&t.call(this,i)},t}),t.define("select2/dropdown/selectOnClose",["../utils"],function(e){function t(){}return t.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("close",function(e){n._handleSelectOnClose(e)})},t.prototype._handleSelectOnClose=function(t,i){if(i&&null!=i.originalSelect2Event){var n=i.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var o=this.getHighlightedResults();if(!(o.length<1)){var r=e.GetData(o[0],"data");null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})}},t}),t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("select",function(e){n._selectTriggered(e)}),t.on("unselect",function(e){n._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var i=t.originalEvent;i&&(i.ctrlKey||i.metaKey)||this.trigger("close",{originalEvent:i,originalSelect2Event:t})},e}),t.define("select2/dropdown/dropdownCss",["../utils"],function(e){function t(){}return t.prototype.render=function(t){var i=t.call(this),n=this.options.get("dropdownCssClass")||"";return-1!==n.indexOf(":all:")&&(n=n.replace(":all:",""),e.copyNonInternalCssClasses(i[0],this.$element[0])),i.addClass(n),i},t}),t.define("select2/dropdown/tagsSearchHighlight",["../utils"],function(e){function t(){}return t.prototype.highlightFirstItem=function(t){var i=this.$results.find(".select2-results__option--selectable:not(.select2-results__option--selected)");if(i.length>0){var n=i.first(),o=e.GetData(n[0],"data").element;if(o&&o.getAttribute&&"true"===o.getAttribute("data-select2-tag"))return void n.trigger("mouseenter")}t.call(this)},t}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,i="Please delete "+t+" character";return 1!=t&&(i+="s"),i},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}}),t.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p,g,f,m,v,b,y,w,C,_,S,x,A,E,T,k,D,M){function P(){this.reset()}return P.prototype.apply=function(d){if(null==(d=e.extend(!0,{},this.defaults,d)).dataAdapter&&(null!=d.ajax?d.dataAdapter=g:null!=d.data?d.dataAdapter=p:d.dataAdapter=h,d.minimumInputLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,v)),d.maximumInputLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,b)),d.maximumSelectionLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,y)),d.tags&&(d.dataAdapter=c.Decorate(d.dataAdapter,f)),null==d.tokenSeparators&&null==d.tokenizer||(d.dataAdapter=c.Decorate(d.dataAdapter,m))),null==d.resultsAdapter&&(d.resultsAdapter=t,null!=d.ajax&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,S)),null!=d.placeholder&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,_)),d.selectOnClose&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,E)),d.tags&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,D))),null==d.dropdownAdapter){if(d.multiple)d.dropdownAdapter=w;else{var u=c.Decorate(w,C);d.dropdownAdapter=u}0!==d.minimumResultsForSearch&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,A)),d.closeOnSelect&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,T)),null!=d.dropdownCssClass&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,k)),d.dropdownAdapter=c.Decorate(d.dropdownAdapter,x)}null==d.selectionAdapter&&(d.multiple?d.selectionAdapter=n:d.selectionAdapter=i,null!=d.placeholder&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,o)),d.allowClear&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,r)),d.multiple&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,s)),null!=d.selectionCssClass&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,a)),d.selectionAdapter=c.Decorate(d.selectionAdapter,l)),d.language=this._resolveLanguage(d.language),d.language.push("en");for(var M=[],P=0;P<d.language.length;P++){var R=d.language[P];-1===M.indexOf(R)&&M.push(R)}return d.language=M,d.translations=this._processTranslations(d.language,d.debug),d},P.prototype.reset=function(){function t(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return u[e]||e})}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:{},matcher:function i(n,o){if(null==n.term||""===n.term.trim())return o;if(o.children&&o.children.length>0){for(var r=e.extend(!0,{},o),s=o.children.length-1;s>=0;s--){null==i(n,o.children[s])&&r.children.splice(s,1)}return r.children.length>0?r:i(n,r)}var a=t(o.text).toUpperCase(),l=t(n.term).toUpperCase();return a.indexOf(l)>-1?o:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},P.prototype.applyFromElement=function(e,t){var i=e.language,n=this.defaults.language,o=t.prop("lang"),r=t.closest("[lang]").prop("lang"),s=Array.prototype.concat.call(this._resolveLanguage(o),this._resolveLanguage(i),this._resolveLanguage(n),this._resolveLanguage(r));return e.language=s,e},P.prototype._resolveLanguage=function(t){if(!t)return[];if(e.isEmptyObject(t))return[];if(e.isPlainObject(t))return[t];var i;i=Array.isArray(t)?t:[t];for(var n=[],o=0;o<i.length;o++)if(n.push(i[o]),"string"==typeof i[o]&&i[o].indexOf("-")>0){var r=i[o].split("-")[0];n.push(r)}return n},P.prototype._processTranslations=function(t,i){for(var n=new d,o=0;o<t.length;o++){var r=new d,s=t[o];if("string"==typeof s)try{r=d.loadPath(s)}catch(e){try{s=this.defaults.amdLanguageBase+s,r=d.loadPath(s)}catch(e){i&&window.console&&console.warn&&console.warn('Select2: The language file for "'+s+'" could not be automatically loaded. A fallback will be used instead.')}}else r=e.isPlainObject(s)?new d(s):s;n.extend(r)}return n},P.prototype.set=function(t,i){var n={};n[e.camelCase(t)]=i;var o=c._convertData(n);e.extend(!0,this.defaults,o)},new P}),t.define("select2/options",["jquery","./defaults","./utils"],function(e,t,i){function n(e,i){this.options=e,null!=i&&this.fromElement(i),null!=i&&(this.options=t.applyFromElement(this.options,i)),this.options=t.apply(this.options)}return n.prototype.fromElement=function(t){var n=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.autocomplete&&t.prop("autocomplete")&&(this.options.autocomplete=t.prop("autocomplete")),null==this.options.dir&&(t.prop("dir")?this.options.dir=t.prop("dir"):t.closest("[dir]").prop("dir")?this.options.dir=t.closest("[dir]").prop("dir"):this.options.dir="ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),i.GetData(t[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),i.StoreData(t[0],"data",i.GetData(t[0],"select2Tags")),i.StoreData(t[0],"tags",!0)),i.GetData(t[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",i.GetData(t[0],"ajaxUrl")),i.StoreData(t[0],"ajax-Url",i.GetData(t[0],"ajaxUrl")));var o={};function r(e,t){return t.toUpperCase()}for(var s=0;s<t[0].attributes.length;s++){var a=t[0].attributes[s].name,l="data-";if(a.substr(0,5)==l){var c=a.substring(5),d=i.GetData(t[0],c);o[c.replace(/-([a-z])/g,r)]=d}}e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset&&(o=e.extend(!0,{},t[0].dataset,o));var u=e.extend(!0,{},i.GetData(t[0]),o);for(var h in u=i._convertData(u))n.indexOf(h)>-1||(e.isPlainObject(this.options[h])?e.extend(this.options[h],u[h]):this.options[h]=u[h]);return this},n.prototype.get=function(e){return this.options[e]},n.prototype.set=function(e,t){this.options[e]=t},n}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(e,t,i,n){var o=function(e,n){null!=i.GetData(e[0],"select2")&&i.GetData(e[0],"select2").destroy(),this.$element=e,this.id=this._generateId(e),n=n||{},this.options=new t(n,e),o.__super__.constructor.call(this);var r=e.attr("tabindex")||0;i.StoreData(e[0],"old-tabindex",r),e.attr("tabindex","-1");var s=this.options.get("dataAdapter");this.dataAdapter=new s(e,this.options);var a=this.render();this._placeContainer(a);var l=this.options.get("selectionAdapter");this.selection=new l(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,a);var c=this.options.get("dropdownAdapter");this.dropdown=new c(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,a);var d=this.options.get("resultsAdapter");this.results=new d(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var u=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){u.trigger("selection:update",{data:e})}),e[0].classList.add("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),i.StoreData(e[0],"select2",this),e.data("select2",this)};return i.Extend(o,i.Observable),o.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+i.generateChars(2):i.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},o.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},o.prototype._resolveWidth=function(e,t){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var n=this._resolveWidth(e,"style");return null!=n?n:this._resolveWidth(e,"element")}if("element"==t){var o=e.outerWidth(!1);return o<=0?"auto":o+"px"}if("style"==t){var r=e.attr("style");if("string"!=typeof r)return null;for(var s=r.split(";"),a=0,l=s.length;a<l;a+=1){var c=s[a].replace(/\s/g,"").match(i);if(null!==c&&c.length>=1)return c[1]}return null}return"computedstyle"==t?window.getComputedStyle(e[0]).width:t},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",function(){e.dataAdapter.current(function(t){e.trigger("selection:update",{data:t})})}),this.$element.on("focus.select2",function(t){e.trigger("focus",t)}),this._syncA=i.bind(this._syncAttributes,this),this._syncS=i.bind(this._syncSubtree,this),this._observer=new window.MutationObserver(function(t){e._syncA(),e._syncS(t)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},o.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",function(t,i){e.trigger(t,i)})},o.prototype._registerSelectionEvents=function(){var e=this,t=["toggle","focus"];this.selection.on("toggle",function(){e.toggleDropdown()}),this.selection.on("focus",function(t){e.focus(t)}),this.selection.on("*",function(i,n){-1===t.indexOf(i)&&e.trigger(i,n)})},o.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",function(t,i){e.trigger(t,i)})},o.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",function(t,i){e.trigger(t,i)})},o.prototype._registerEvents=function(){var e=this;this.on("open",function(){e.$container[0].classList.add("select2-container--open")}),this.on("close",function(){e.$container[0].classList.remove("select2-container--open")}),this.on("enable",function(){e.$container[0].classList.remove("select2-container--disabled")}),this.on("disable",function(){e.$container[0].classList.add("select2-container--disabled")}),this.on("blur",function(){e.$container[0].classList.remove("select2-container--focus")}),this.on("query",function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,function(i){e.trigger("results:all",{data:i,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(i){e.trigger("results:append",{data:i,query:t})})}),this.on("keypress",function(t){var i=t.which;e.isOpen()?i===n.ESC||i===n.UP&&t.altKey?(e.close(t),t.preventDefault()):i===n.ENTER||i===n.TAB?(e.trigger("results:select",{}),t.preventDefault()):i===n.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):i===n.UP?(e.trigger("results:previous",{}),t.preventDefault()):i===n.DOWN&&(e.trigger("results:next",{}),t.preventDefault()):(i===n.ENTER||i===n.SPACE||i===n.DOWN&&t.altKey)&&(e.open(),t.preventDefault())})},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},o.prototype._isChangeMutation=function(e){var t=this;if(e.addedNodes&&e.addedNodes.length>0)for(var i=0;i<e.addedNodes.length;i++){if(e.addedNodes[i].selected)return!0}else{if(e.removedNodes&&e.removedNodes.length>0)return!0;if(Array.isArray(e))return e.some(function(e){return t._isChangeMutation(e)})}return!1},o.prototype._syncSubtree=function(e){var t=this._isChangeMutation(e),i=this;t&&this.dataAdapter.current(function(e){i.trigger("selection:update",{data:e})})},o.prototype.trigger=function(e,t){var i=o.__super__.trigger,n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===t&&(t={}),e in n){var r=n[e],s={prevented:!1,name:e,args:t};if(i.call(this,r,s),s.prevented)return void(t.prevented=!0)}i.call(this,e,t)},o.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},o.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},o.prototype.close=function(e){this.isOpen()&&this.trigger("close",{originalEvent:e})},o.prototype.isEnabled=function(){return!this.isDisabled()},o.prototype.isDisabled=function(){return this.options.get("disabled")},o.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},o.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},o.prototype.focus=function(e){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},o.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=e&&0!==e.length||(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},o.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var e=[];return this.dataAdapter.current(function(t){e=t}),e},o.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var t=e[0];Array.isArray(t)&&(t=t.map(function(e){return e.toString()})),this.$element.val(t).trigger("input").trigger("change")},o.prototype.destroy=function(){i.RemoveData(this.$container[0]),this.$container.remove(),this._observer.disconnect(),this._observer=null,this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",i.GetData(this.$element[0],"old-tabindex")),this.$element[0].classList.remove("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),i.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),i.StoreData(t[0],"element",this.$element),t},o}),t.define("jquery-mousewheel",["jquery"],function(e){return e}),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(e,t,i,n,o){if(null==e.fn.select2){var r=["open","close","destroy"];e.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var n=e.extend(!0,{},t);new i(e(this),n)}),this;if("string"==typeof t){var n,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=o.GetData(this,"select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),n=e[t].apply(e,s)}),r.indexOf(t)>-1?this:n}throw new Error("Invalid arguments for Select2: "+t)}}return null==e.fn.select2.defaults&&(e.fn.select2.defaults=n),i}),{define:t.define,require:t.require}}(),i=t.require("jquery.select2");return e.fn.select2.amd=t,i}),function(e){e.fn.select2ToTree=function(t){var o=e.extend({},t);o.treeData&&function(t,n){function o(e,t){for(var i=e,n=0;n<t.length;n++){var o=t[n];if(!i[o])return"MISSING";i=i[o]}return i}function r(s,a,l){var c,d;t.labelFld&&t.labelFld.split(".").length>1&&(c=t.labelFld.split(".")),t.valFld&&t.valFld.split(".").length>1&&(d=t.valFld.split("."));for(var u=0;u<s.length;u++){var h=s[u]||{},p=e("<option></option>");c?p.text(o(h,c)):p.text(h[t.labelFld||"text"]),d?p.val(o(h,d)):p.val(h[t.valFld||"id"]),h[t.selFld||"selected"]&&"true"===String(h[t.selFld||"selected"])&&p.prop("selected",h[t.selFld||"selected"]),""===p.val()&&(p.prop("disabled",!0),p.val(i())),p.addClass("l"+a),l&&p.attr("data-pup",l),n.append(p);var g=h[t.incFld||"inc"];g&&g.length>0&&(p.addClass("non-leaf"),r(g,a+1,p.val()))}}r(t.dataArr,1,""),t.dftVal&&n.val(t.dftVal)}(o.treeData,this),o._templateResult=o.templateResult,o.templateResult=function(t,i){var n=t.text;"function"==typeof o._templateResult&&(n=o._templateResult(t,i));var r=e("<span class='item-label'></span>").append(n);if(t.element){var s=t.element;if(i.setAttribute("data-val",s.value),s.className&&(i.className+=" "+s.className),s.getAttribute("data-pup")&&i.setAttribute("data-pup",s.getAttribute("data-pup")),e(i).hasClass("non-leaf"))return e.merge(e('<span class="expand-collapse" onmouseup="expColMouseupHandler(event);"></span>'),r)}return r},window.expColMouseupHandler=function(t){var i;i=t.target||t.srcElement,e(i.parentNode).toggleClass("opened"),n(i.parentNode),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1};var r=this.select2(o);function s(t){var i=r.data("select2");e(this).val().trim().length>0?i.$dropdown.addClass("searching-result"):i.$dropdown.removeClass("searching-result")}return r.on("select2:open",function(e){var t=r.data("select2");t.$dropdown.addClass("s2-to-tree"),t.$dropdown.removeClass("searching-result");var i=t.$dropdown.find(".select2-search__field").add(t.$container.find(".select2-search__field"));i.off("input",s),i.on("input",s)}),r};var t=1;function i(){return"autoUniqueVal_"+t++}function n(t){var i=t,o=e(t).parent(".select2-results__options"),r=!0;do{var s=(e(i).attr("data-pup")||"").replace(/'/g,"\\'");if(i=null,s){var a=o.find(".select2-results__option[data-val='"+s+"']");if(a.length>0){if(!a.eq(0).hasClass("opened")){e(t).removeClass("showme"),r=!1;break}i=a[0]}}}while(i);r&&e(t).addClass("showme");var l=(e(t).attr("data-val")||"").replace(/'/g,"\\'");o.find(".select2-results__option[data-pup='"+l+"']").each(function(){n(this)})}}(jQuery),EndlessScroll=function(){var e;function t(t,i){var n=this;this.options=$.extend({},e,i),this.firing=!0,this.fired=!1,this.fireSequence=0,this.didScroll=!1,this.isScrollable=!0,this.target=t,this.targetId="",this.content="",this.innerWrap=$(".endless_scroll_inner_wrap",this.target),this.options.data&&(this.options.content=this.options.data),$(t).scroll(function(){return n.didScroll=!0,n.target=t,n.targetId=$(n.target).attr("id")})}return t.name="EndlessScroll",e={bottomPixels:50,fireOnce:!0,fireDelay:150,loader:"Loading...",content:"",insertAfter:"div:last",intervalFrequency:250,resetCounter:function(){return!1},callback:function(){return!0},ceaseFire:function(){return!1}},t.prototype.run=function(){var e=this;return setInterval(function(){if(e.shouldTryFiring()){if(e.didScroll=!1,e.ceaseFireWhenNecessary())return;if(e.shouldBeFiring())return e.resetFireSequenceWhenNecessary(),e.acknowledgeFiring(),e.insertLoader(),e.hasContent()&&(e.showContent(),e.fireCallback(),e.delayFireingWhenNecessary()),e.removeLoader()}},this.options.intervalFrequency)},t.prototype.shouldTryFiring=function(){return this.didScroll&&!0===this.firing},t.prototype.ceaseFireWhenNecessary=function(){return!!this.options.ceaseFire.apply(this.target,[this.fireSequence])&&(this.firing=!1,!0)},t.prototype.wrapContainer=function(){if(0===this.innerWrap.length)return this.innerWrap=$(this.target).wrapInner('<div class="endless_scroll_inner_wrap" />').find(".endless_scroll_inner_wrap")},t.prototype.isScrollableOrNot=function(){return this.target===document||this.target===window?this.isScrollable=$(document).height()-$(window).height()<=$(window).scrollTop()+this.options.bottomPixels:(this.wrapContainer(),this.isScrollable=this.innerWrap.length>0&&this.innerWrap.height()-$(this.target).height()<=$(this.target).scrollTop()+this.options.bottomPixels)},t.prototype.shouldBeFiring=function(){return this.isScrollableOrNot(),this.isScrollable&&(!1===this.options.fireOnce||!0===this.options.fireOnce&&!0!==this.fired)},t.prototype.resetFireSequenceWhenNecessary=function(){if(!0===this.options.resetCounter.apply(this.target))return this.fireSequence=0},t.prototype.acknowledgeFiring=function(){return this.fired=!0,this.fireSequence++},t.prototype.insertLoader=function(){return $(this.options.insertAfter).after('<div class="endless_scroll_loader_'+this.targetId+' endless_scroll_loader">'+this.options.loader+"</div>")},t.prototype.removeLoader=function(){return $(".endless_scroll_loader_"+this.targetId).fadeOut(function(){return $(this).remove()})},t.prototype.hasContent=function(){return"function"==typeof this.options.content?this.content=this.options.content.apply(this.target,[this.fireSequence]):this.content=this.options.content,!1!==this.content},t.prototype.showContent=function(){return $(this.options.insertAfter).after('<div id="endless_scroll_content">'+this.content+"</div>"),$("#endless_scroll_content").hide().fadeIn(250,function(){return $(this).removeAttr("id")})},t.prototype.fireCallback=function(){return this.options.callback.apply(this.target,[this.fireSequence])},t.prototype.delayFireingWhenNecessary=function(){var e=this;return this.options.fireDelay>0?($("body").after('<div id="endless_scroll_marker"></div>'),$("#endless_scroll_marker").fadeTo(this.options.fireDelay,1,function(){return $("#endless_scroll_marker").remove(),e.fired=!1})):this.fired=!1},t}(),jQuery.fn.endlessScroll=function(e){return new EndlessScroll(this,e).run()},function(e){var t=[],i="dirty",n="clean",o="dirtyInitialValue",r="isDirty",s=function(e){var i;return t.forEach(function(t){t.id===e&&(i=t)}),i};var a=function(e){e.form.find("input, select, textarea").on("change.dirty click.dirty keyup.dirty keydown.dirty blur.dirty",function(t){e.checkValues(t)}),e.form.on("dirty",function(){e.options.onDirty()}),e.form.on("clean",function(){e.options.onClean()})},l=function(i,o){this.form=i,this.isDirty=!1,this.options=o,this.history=[n,n],this.id=e(i).attr("id"),t.push(this)};l.prototype={init:function(){this.saveInitialValues(),this.setEvents()},statuses:{dirty:i,clean:n,dataInitialValue:o,dataIsDirty:r},isRadioOrCheckbox:function(t){return e(t).is(":radio, :checkbox")},isFileInput:function(t){return e(t).is(":file")},saveInitialValues:function(){var t=this;this.form.find("input, select, textarea").each(function(i,n){var r=t.isRadioOrCheckbox(n),s=t.isFileInput(n);if(r){var a=e(n).is(":checked")?"checked":"unchecked";e(n).data(o,a)}else s?e(n).data(o,JSON.stringify(n.files)):e(n).data(o,e(n).val()||"")})},refreshEvents:function(){!function(e){e.form.find("input, select, textarea").off("change.dirty click.dirty keyup.dirty keydown.dirty blur.dirty"),e.form.off("dirty"),e.form.off("clean")}(this),a(this)},showDirtyFields:function(){return this.form.find("input, select, textarea").filter(function(t,i){return e(i).data(r)})},setEvents:function(){!function(t){t.form.on("submit",function(){t.submitting=!0}),t.options.preventLeaving&&e(window).on("beforeunload",function(e){if(t.isDirty&&!t.submitting)return e.preventDefault(),t.options.leavingMessage})}(this),a(this)},isFieldDirty:function(e){var t=e.data(o);null==t&&(t="");var i=e.val();null==i&&(i="");var n=/^(true|false)$/i;return n.test(t)&&n.test(i)?!new RegExp("^"+t+"$","i").test(i):i!==t},isFileInputDirty:function(e){var t=e.data(o),i=e[0];return JSON.stringify(i.files)!==t},isCheckboxDirty:function(e){return e.data(o)!==(e.is(":checked")?"checked":"unchecked")},checkValues:function(t){var i=this,n=!1;this.form.find("input, select, textarea").each(function(t,o){var s,a=i.isRadioOrCheckbox(o),l=i.isFileInput(o),c=e(o);s=a?i.isCheckboxDirty(c):l?i.isFileInputDirty(c):i.isFieldDirty(c),c.data(r,s),n|=s}),n?i.setDirty():i.setClean()},setDirty:function(){this.isDirty=!0,this.history[0]=this.history[1],this.history[1]=i,(this.options.fireEventsOnEachChange||this.wasJustClean())&&this.form.trigger("dirty")},setClean:function(){this.isDirty=!1,this.history[0]=this.history[1],this.history[1]=n,(this.options.fireEventsOnEachChange||this.wasJustDirty())&&this.form.trigger("clean")},wasJustDirty:function(){return this.history[0]===i},wasJustClean:function(){return this.history[0]===n},setAsClean:function(){this.saveInitialValues(),this.setClean()},setAsDirty:function(){this.saveInitialValues(),this.setDirty()},resetForm:function(){var t=this;this.form.find("input, select, textarea").each(function(i,n){var r=e(n),s=t.isRadioOrCheckbox(n),a=t.isFileInput(n);if(s){var l="checked"===r.data(o);r.prop("checked",l)}if(a)n.value="",e(n).data(o,JSON.stringify(n.files));else{var c=r.data(o);r.val(c)}}),this.checkValues()}},e.fn.dirty=function(i){if("string"!=typeof i)return this.each(function(t,n){i=e.extend({},e.fn.dirty.defaults,i),new l(e(n),i).init()});var n=s(e(this).attr("id"));if(!n)return null;if(!/^(isDirty|isClean|refreshEvents|resetForm|setAsClean|setAsDirty|showDirtyFields|destroy)$/i.test(i))return n[i].apply(n,Array.prototype.slice.call(arguments,1));switch(i.toLowerCase()){case"isclean":return!n.isDirty;case"isdirty":return n.isDirty;case"refreshevents":return n.refreshEvents();case"resetform":return n.resetForm();case"setasclean":return n.setAsClean();case"setasdirty":return n.setAsDirty();case"showdirtyfields":return n.showDirtyFields();case"destroy":return function(e){t=t.filter(function(t){return t!==e}),e.isDirty=!1}(n)}},e.fn.dirty.singleton=s,e.fn.dirty.defaults={preventLeaving:!1,leavingMessage:"There are unsaved changes on this page which will be discarded if you continue.",onDirty:e.noop,onClean:e.noop,fireEventsOnEachChange:!1},e.fn.dirty.extend=function(t){e.extend(l.prototype,t)},e.fn.dirty.constructor=l,e.fn.dirty.prototype=l.prototype}(jQuery),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).bootstrap=t()}(this,function(){"use strict";const e=new Map,t={set(t,i,n){e.has(t)||e.set(t,new Map);const o=e.get(t);o.has(i)||0===o.size?o.set(i,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(o.keys())[0]}.`)},get:(t,i)=>e.has(t)&&e.get(t).get(i)||null,remove(t,i){if(!e.has(t))return;const n=e.get(t);n.delete(i),0===n.size&&e.delete(t)}},i="transitionend",n=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),e),o=e=>null==e?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),r=e=>{e.dispatchEvent(new Event(i))},s=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),a=e=>s(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(n(e)):null,l=e=>{if(!s(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),i=e.closest("details:not([open])");if(!i)return t;if(i!==e){const t=e.closest("summary");if(t&&t.parentNode!==i)return!1;if(null===t)return!1}return t},c=e=>!e||e.nodeType!==Node.ELEMENT_NODE||(!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled"))),d=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?d(e.parentNode):null},u=()=>{},h=e=>{e.offsetHeight},p=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,g=[],f=()=>"rtl"===document.documentElement.dir,m=e=>{var t;t=()=>{const t=p();if(t){const i=e.NAME,n=t.fn[i];t.fn[i]=e.jQueryInterface,t.fn[i].Constructor=e,t.fn[i].noConflict=()=>(t.fn[i]=n,e.jQueryInterface)}},"loading"===document.readyState?(g.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of g)e()}),g.push(t)):t()},v=(e,t=[],i=e)=>"function"==typeof e?e(...t):i,b=(e,t,n=!0)=>{if(!n)return void v(e);const o=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:i}=window.getComputedStyle(e);const n=Number.parseFloat(t),o=Number.parseFloat(i);return n||o?(t=t.split(",")[0],i=i.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(i))):0})(t)+5;let s=!1;const a=({target:n})=>{n===t&&(s=!0,t.removeEventListener(i,a),v(e))};t.addEventListener(i,a),setTimeout(()=>{s||r(t)},o)},y=(e,t,i,n)=>{const o=e.length;let r=e.indexOf(t);return-1===r?!i&&n?e[o-1]:e[0]:(r+=i?1:-1,n&&(r=(r+o)%o),e[Math.max(0,Math.min(r,o-1))])},w=/[^.]*(?=\..*)\.|.*/,C=/\..*/,_=/::\d+$/,S={};let x=1;const A={mouseenter:"mouseover",mouseleave:"mouseout"},E=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function T(e,t){return t&&`${t}::${x++}`||e.uidEvent||x++}function k(e){const t=T(e);return e.uidEvent=t,S[t]=S[t]||{},S[t]}function D(e,t,i=null){return Object.values(e).find(e=>e.callable===t&&e.delegationSelector===i)}function M(e,t,i){const n="string"==typeof t,o=n?i:t||i;let r=O(e);return E.has(r)||(r=e),[n,o,r]}function P(e,t,i,n,o){if("string"!=typeof t||!e)return;let[r,s,a]=M(t,i,n);if(t in A){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};s=e(s)}const l=k(e),c=l[a]||(l[a]={}),d=D(c,s,r?i:null);if(d)return void(d.oneOff=d.oneOff&&o);const u=T(s,t.replace(w,"")),h=r?function(e,t,i){return function n(o){const r=e.querySelectorAll(t);for(let{target:s}=o;s&&s!==this;s=s.parentNode)for(const a of r)if(a===s)return L(o,{delegateTarget:s}),n.oneOff&&N.off(e,o.type,t,i),i.apply(s,[o])}}(e,i,s):function(e,t){return function i(n){return L(n,{delegateTarget:e}),i.oneOff&&N.off(e,n.type,t),t.apply(e,[n])}}(e,s);h.delegationSelector=r?i:null,h.callable=s,h.oneOff=o,h.uidEvent=u,c[u]=h,e.addEventListener(a,h,r)}function R(e,t,i,n,o){const r=D(t[i],n,o);r&&(e.removeEventListener(i,r,Boolean(o)),delete t[i][r.uidEvent])}function I(e,t,i,n){const o=t[i]||{};for(const[r,s]of Object.entries(o))r.includes(n)&&R(e,t,i,s.callable,s.delegationSelector)}function O(e){return e=e.replace(C,""),A[e]||e}const N={on(e,t,i,n){P(e,t,i,n,!1)},one(e,t,i,n){P(e,t,i,n,!0)},off(e,t,i,n){if("string"!=typeof t||!e)return;const[o,r,s]=M(t,i,n),a=s!==t,l=k(e),c=l[s]||{},d=t.startsWith(".");if(void 0===r){if(d)for(const i of Object.keys(l))I(e,l,i,t.slice(1));for(const[i,n]of Object.entries(c)){const o=i.replace(_,"");a&&!t.includes(o)||R(e,l,s,n.callable,n.delegationSelector)}}else{if(!Object.keys(c).length)return;R(e,l,s,r,o?i:null)}},trigger(e,t,i){if("string"!=typeof t||!e)return null;const n=p();let o=null,r=!0,s=!0,a=!1;t!==O(t)&&n&&(o=n.Event(t,i),n(e).trigger(o),r=!o.isPropagationStopped(),s=!o.isImmediatePropagationStopped(),a=o.isDefaultPrevented());const l=L(new Event(t,{bubbles:r,cancelable:!0}),i);return a&&l.preventDefault(),s&&e.dispatchEvent(l),l.defaultPrevented&&o&&o.preventDefault(),l}};function L(e,t={}){for(const[i,n]of Object.entries(t))try{e[i]=n}catch(t){Object.defineProperty(e,i,{configurable:!0,get:()=>n})}return e}function F(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function $(e){return e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const G={setDataAttribute(e,t,i){e.setAttribute(`data-bs-${$(t)}`,i)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${$(t)}`)},getDataAttributes(e){if(!e)return{};const t={},i=Object.keys(e.dataset).filter(e=>e.startsWith("bs")&&!e.startsWith("bsConfig"));for(const n of i){let i=n.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),t[i]=F(e.dataset[n])}return t},getDataAttribute:(e,t)=>F(e.getAttribute(`data-bs-${$(t)}`))};class B{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const i=s(t)?G.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof i?i:{},...s(t)?G.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[i,n]of Object.entries(t)){const t=e[i],r=s(t)?"element":o(t);if(!new RegExp(n).test(r))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${r}" but expected type "${n}".`)}}}class H extends B{constructor(e,i){super(),(e=a(e))&&(this._element=e,this._config=this._getConfig(i),t.set(this._element,this.constructor.DATA_KEY,this))}dispose(){t.remove(this._element,this.constructor.DATA_KEY),N.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,i=!0){b(e,t,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return t.get(a(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const z=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let i=e.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),t=i&&"#"!==i?i.trim():null}return t?t.split(",").map(e=>n(e)).join(","):null},W={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter(e=>e.matches(t)),parents(e,t){const i=[];let n=e.parentNode.closest(t);for(;n;)i.push(n),n=n.parentNode.closest(t);return i},prev(e,t){let i=e.previousElementSibling;for(;i;){if(i.matches(t))return[i];i=i.previousElementSibling}return[]},next(e,t){let i=e.nextElementSibling;for(;i;){if(i.matches(t))return[i];i=i.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(e=>!c(e)&&l(e))},getSelectorFromElement(e){const t=z(e);return t&&W.findOne(t)?t:null},getElementFromSelector(e){const t=z(e);return t?W.findOne(t):null},getMultipleElementsFromSelector(e){const t=z(e);return t?W.find(t):[]}},V=(e,t="hide")=>{const i=`click.dismiss${e.EVENT_KEY}`,n=e.NAME;N.on(document,i,`[data-bs-dismiss="${n}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),c(this))return;const o=W.getElementFromSelector(this)||this.closest(`.${n}`);e.getOrCreateInstance(o)[t]()})},j=".bs.alert",U=`close${j}`,Y=`closed${j}`;class q extends H{static get NAME(){return"alert"}close(){if(N.trigger(this._element,U).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),N.trigger(this._element,Y),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=q.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}V(q,"close"),m(q);const K='[data-bs-toggle="button"]';class X extends H{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each(function(){const t=X.getOrCreateInstance(this);"toggle"===e&&t[e]()})}}N.on(document,"click.bs.button.data-api",K,e=>{e.preventDefault();const t=e.target.closest(K);X.getOrCreateInstance(t).toggle()}),m(X);const Z=".bs.swipe",J=`touchstart${Z}`,Q=`touchmove${Z}`,ee=`touchend${Z}`,te=`pointerdown${Z}`,ie=`pointerup${Z}`,ne={endCallback:null,leftCallback:null,rightCallback:null},oe={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class re extends B{constructor(e,t){super(),this._element=e,e&&re.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return ne}static get DefaultType(){return oe}static get NAME(){return"swipe"}dispose(){N.off(this._element,Z)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),v(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&v(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(N.on(this._element,te,e=>this._start(e)),N.on(this._element,ie,e=>this._end(e)),this._element.classList.add("pointer-event")):(N.on(this._element,J,e=>this._start(e)),N.on(this._element,Q,e=>this._move(e)),N.on(this._element,ee,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const se=".bs.carousel",ae=".data-api",le="ArrowLeft",ce="ArrowRight",de="next",ue="prev",he="left",pe="right",ge=`slide${se}`,fe=`slid${se}`,me=`keydown${se}`,ve=`mouseenter${se}`,be=`mouseleave${se}`,ye=`dragstart${se}`,we=`load${se}${ae}`,Ce=`click${se}${ae}`,_e="carousel",Se="active",xe=".active",Ae=".carousel-item",Ee=xe+Ae,Te={[le]:pe,[ce]:he},ke={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},De={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Me extends H{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=W.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===_e&&this.cycle()}static get Default(){return ke}static get DefaultType(){return De}static get NAME(){return"carousel"}next(){this._slide(de)}nextWhenVisible(){!document.hidden&&l(this._element)&&this.next()}prev(){this._slide(ue)}pause(){this._isSliding&&r(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?N.one(this._element,fe,()=>this.cycle()):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void N.one(this._element,fe,()=>this.to(e));const i=this._getItemIndex(this._getActive());if(i===e)return;const n=e>i?de:ue;this._slide(n,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&N.on(this._element,me,e=>this._keydown(e)),"hover"===this._config.pause&&(N.on(this._element,ve,()=>this.pause()),N.on(this._element,be,()=>this._maybeEnableCycle())),this._config.touch&&re.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const e of W.find(".carousel-item img",this._element))N.on(e,ye,e=>e.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(he)),rightCallback:()=>this._slide(this._directionToOrder(pe)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new re(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=Te[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=W.findOne(xe,this._indicatorsElement);t.classList.remove(Se),t.removeAttribute("aria-current");const i=W.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(Se),i.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const i=this._getActive(),n=e===de,o=t||y(this._getItems(),i,n,this._config.wrap);if(o===i)return;const r=this._getItemIndex(o),s=t=>N.trigger(this._element,t,{relatedTarget:o,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:r});if(s(ge).defaultPrevented)return;if(!i||!o)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(r),this._activeElement=o;const l=n?"carousel-item-start":"carousel-item-end",c=n?"carousel-item-next":"carousel-item-prev";o.classList.add(c),h(o),i.classList.add(l),o.classList.add(l);this._queueCallback(()=>{o.classList.remove(l,c),o.classList.add(Se),i.classList.remove(Se,c,l),this._isSliding=!1,s(fe)},i,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return W.findOne(Ee,this._element)}_getItems(){return W.find(Ae,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return f()?e===he?ue:de:e===he?de:ue}_orderToDirection(e){return f()?e===ue?he:pe:e===ue?pe:he}static jQueryInterface(e){return this.each(function(){const t=Me.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}else t.to(e)})}}N.on(document,Ce,"[data-bs-slide], [data-bs-slide-to]",function(e){const t=W.getElementFromSelector(this);if(!t||!t.classList.contains(_e))return;e.preventDefault();const i=Me.getOrCreateInstance(t),n=this.getAttribute("data-bs-slide-to");return n?(i.to(n),void i._maybeEnableCycle()):"next"===G.getDataAttribute(this,"slide")?(i.next(),void i._maybeEnableCycle()):(i.prev(),void i._maybeEnableCycle())}),N.on(window,we,()=>{const e=W.find('[data-bs-ride="carousel"]');for(const t of e)Me.getOrCreateInstance(t)}),m(Me);const Pe=".bs.collapse",Re=`show${Pe}`,Ie=`shown${Pe}`,Oe=`hide${Pe}`,Ne=`hidden${Pe}`,Le=`click${Pe}.data-api`,Fe="show",$e="collapse",Ge="collapsing",Be=`:scope .${$e} .${$e}`,He='[data-bs-toggle="collapse"]',ze={parent:null,toggle:!0},We={parent:"(null|element)",toggle:"boolean"};class Ve extends H{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const i=W.find(He);for(const e of i){const t=W.getSelectorFromElement(e),i=W.find(t).filter(e=>e===this._element);null!==t&&i.length&&this._triggerArray.push(e)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ze}static get DefaultType(){return We}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(e=>e!==this._element).map(e=>Ve.getOrCreateInstance(e,{toggle:!1}))),e.length&&e[0]._isTransitioning)return;if(N.trigger(this._element,Re).defaultPrevented)return;for(const t of e)t.hide();const t=this._getDimension();this._element.classList.remove($e),this._element.classList.add(Ge),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=`scroll${t[0].toUpperCase()+t.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Ge),this._element.classList.add($e,Fe),this._element.style[t]="",N.trigger(this._element,Ie)},this._element,!0),this._element.style[t]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(N.trigger(this._element,Oe).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,h(this._element),this._element.classList.add(Ge),this._element.classList.remove($e,Fe);for(const e of this._triggerArray){const t=W.getElementFromSelector(e);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0;this._element.style[e]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Ge),this._element.classList.add($e),N.trigger(this._element,Ne)},this._element,!0)}_isShown(e=this._element){return e.classList.contains(Fe)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=a(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(He);for(const t of e){const e=W.getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=W.find(Be,this._config.parent);return W.find(e,this._config.parent).filter(e=>!t.includes(e))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const i of e)i.classList.toggle("collapsed",!t),i.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const i=Ve.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e]()}})}}N.on(document,Le,He,function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const e of W.getMultipleElementsFromSelector(this))Ve.getOrCreateInstance(e,{toggle:!1}).toggle()}),m(Ve);var je="top",Ue="bottom",Ye="right",qe="left",Ke="auto",Xe=[je,Ue,Ye,qe],Ze="start",Je="end",Qe="clippingParents",et="viewport",tt="popper",it="reference",nt=Xe.reduce(function(e,t){return e.concat([t+"-"+Ze,t+"-"+Je])},[]),ot=[].concat(Xe,[Ke]).reduce(function(e,t){return e.concat([t,t+"-"+Ze,t+"-"+Je])},[]),rt="beforeRead",st="read",at="afterRead",lt="beforeMain",ct="main",dt="afterMain",ut="beforeWrite",ht="write",pt="afterWrite",gt=[rt,st,at,lt,ct,dt,ut,ht,pt];function ft(e){return e?(e.nodeName||"").toLowerCase():null}function mt(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function vt(e){return e instanceof mt(e).Element||e instanceof Element}function bt(e){return e instanceof mt(e).HTMLElement||e instanceof HTMLElement}function yt(e){return"undefined"!=typeof ShadowRoot&&(e instanceof mt(e).ShadowRoot||e instanceof ShadowRoot)}const wt={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},n=t.attributes[e]||{},o=t.elements[e];bt(o)&&ft(o)&&(Object.assign(o.style,i),Object.keys(n).forEach(function(e){var t=n[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(e){var n=t.elements[e],o=t.attributes[e]||{},r=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:i[e]).reduce(function(e,t){return e[t]="",e},{});bt(n)&&ft(n)&&(Object.assign(n.style,r),Object.keys(o).forEach(function(e){n.removeAttribute(e)}))})}},requires:["computeStyles"]};function Ct(e){return e.split("-")[0]}var _t=Math.max,St=Math.min,xt=Math.round;function At(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Et(){return!/^((?!chrome|android).)*safari/i.test(At())}function Tt(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var n=e.getBoundingClientRect(),o=1,r=1;t&&bt(e)&&(o=e.offsetWidth>0&&xt(n.width)/e.offsetWidth||1,r=e.offsetHeight>0&&xt(n.height)/e.offsetHeight||1);var s=(vt(e)?mt(e):window).visualViewport,a=!Et()&&i,l=(n.left+(a&&s?s.offsetLeft:0))/o,c=(n.top+(a&&s?s.offsetTop:0))/r,d=n.width/o,u=n.height/r;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l,x:l,y:c}}function kt(e){var t=Tt(e),i=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:n}}function Dt(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&yt(i)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Mt(e){return mt(e).getComputedStyle(e)}function Pt(e){return["table","td","th"].indexOf(ft(e))>=0}function Rt(e){return((vt(e)?e.ownerDocument:e.document)||window.document).documentElement}function It(e){return"html"===ft(e)?e:e.assignedSlot||e.parentNode||(yt(e)?e.host:null)||Rt(e)}function Ot(e){return bt(e)&&"fixed"!==Mt(e).position?e.offsetParent:null}function Nt(e){for(var t=mt(e),i=Ot(e);i&&Pt(i)&&"static"===Mt(i).position;)i=Ot(i);return i&&("html"===ft(i)||"body"===ft(i)&&"static"===Mt(i).position)?t:i||function(e){var t=/firefox/i.test(At());if(/Trident/i.test(At())&&bt(e)&&"fixed"===Mt(e).position)return null;var i=It(e);for(yt(i)&&(i=i.host);bt(i)&&["html","body"].indexOf(ft(i))<0;){var n=Mt(i);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||t&&"filter"===n.willChange||t&&n.filter&&"none"!==n.filter)return i;i=i.parentNode}return null}(e)||t}function Lt(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ft(e,t,i){return _t(e,St(t,i))}function $t(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Gt(e,t){return t.reduce(function(t,i){return t[i]=e,t},{})}const Bt={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,i=e.state,n=e.name,o=e.options,r=i.elements.arrow,s=i.modifiersData.popperOffsets,a=Ct(i.placement),l=Lt(a),c=[qe,Ye].indexOf(a)>=0?"height":"width";if(r&&s){var d=function(e,t){return $t("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Gt(e,Xe))}(o.padding,i),u=kt(r),h="y"===l?je:qe,p="y"===l?Ue:Ye,g=i.rects.reference[c]+i.rects.reference[l]-s[l]-i.rects.popper[c],f=s[l]-i.rects.reference[l],m=Nt(r),v=m?"y"===l?m.clientHeight||0:m.clientWidth||0:0,b=g/2-f/2,y=d[h],w=v-u[c]-d[p],C=v/2-u[c]/2+b,_=Ft(y,C,w),S=l;i.modifiersData[n]=((t={})[S]=_,t.centerOffset=_-C,t)}},effect:function(e){var t=e.state,i=e.options.element,n=void 0===i?"[data-popper-arrow]":i;null!=n&&("string"!=typeof n||(n=t.elements.popper.querySelector(n)))&&Dt(t.elements.popper,n)&&(t.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ht(e){return e.split("-")[1]}var zt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Wt(e){var t,i=e.popper,n=e.popperRect,o=e.placement,r=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,u=e.isFixed,h=s.x,p=void 0===h?0:h,g=s.y,f=void 0===g?0:g,m="function"==typeof d?d({x:p,y:f}):{x:p,y:f};p=m.x,f=m.y;var v=s.hasOwnProperty("x"),b=s.hasOwnProperty("y"),y=qe,w=je,C=window;if(c){var _=Nt(i),S="clientHeight",x="clientWidth";if(_===mt(i)&&"static"!==Mt(_=Rt(i)).position&&"absolute"===a&&(S="scrollHeight",x="scrollWidth"),o===je||(o===qe||o===Ye)&&r===Je)w=Ue,f-=(u&&_===C&&C.visualViewport?C.visualViewport.height:_[S])-n.height,f*=l?1:-1;if(o===qe||(o===je||o===Ue)&&r===Je)y=Ye,p-=(u&&_===C&&C.visualViewport?C.visualViewport.width:_[x])-n.width,p*=l?1:-1}var A,E=Object.assign({position:a},c&&zt),T=!0===d?function(e,t){var i=e.x,n=e.y,o=t.devicePixelRatio||1;return{x:xt(i*o)/o||0,y:xt(n*o)/o||0}}({x:p,y:f},mt(i)):{x:p,y:f};return p=T.x,f=T.y,l?Object.assign({},E,((A={})[w]=b?"0":"",A[y]=v?"0":"",A.transform=(C.devicePixelRatio||1)<=1?"translate("+p+"px, "+f+"px)":"translate3d("+p+"px, "+f+"px, 0)",A)):Object.assign({},E,((t={})[w]=b?f+"px":"",t[y]=v?p+"px":"",t.transform="",t))}const Vt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,i=e.options,n=i.gpuAcceleration,o=void 0===n||n,r=i.adaptive,s=void 0===r||r,a=i.roundOffsets,l=void 0===a||a,c={placement:Ct(t.placement),variation:Ht(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Wt(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Wt(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var jt={passive:!0};const Ut={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,i=e.instance,n=e.options,o=n.scroll,r=void 0===o||o,s=n.resize,a=void 0===s||s,l=mt(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&c.forEach(function(e){e.addEventListener("scroll",i.update,jt)}),a&&l.addEventListener("resize",i.update,jt),function(){r&&c.forEach(function(e){e.removeEventListener("scroll",i.update,jt)}),a&&l.removeEventListener("resize",i.update,jt)}},data:{}};var Yt={left:"right",right:"left",bottom:"top",top:"bottom"};function qt(e){return e.replace(/left|right|bottom|top/g,function(e){return Yt[e]})}var Kt={start:"end",end:"start"};function Xt(e){return e.replace(/start|end/g,function(e){return Kt[e]})}function Zt(e){var t=mt(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Jt(e){return Tt(Rt(e)).left+Zt(e).scrollLeft}function Qt(e){var t=Mt(e),i=t.overflow,n=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+o+n)}function ei(e){return["html","body","#document"].indexOf(ft(e))>=0?e.ownerDocument.body:bt(e)&&Qt(e)?e:ei(It(e))}function ti(e,t){var i;void 0===t&&(t=[]);var n=ei(e),o=n===(null==(i=e.ownerDocument)?void 0:i.body),r=mt(n),s=o?[r].concat(r.visualViewport||[],Qt(n)?n:[]):n,a=t.concat(s);return o?a:a.concat(ti(It(s)))}function ii(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ni(e,t,i){return t===et?ii(function(e,t){var i=mt(e),n=Rt(e),o=i.visualViewport,r=n.clientWidth,s=n.clientHeight,a=0,l=0;if(o){r=o.width,s=o.height;var c=Et();(c||!c&&"fixed"===t)&&(a=o.offsetLeft,l=o.offsetTop)}return{width:r,height:s,x:a+Jt(e),y:l}}(e,i)):vt(t)?function(e,t){var i=Tt(e,!1,"fixed"===t);return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}(t,i):ii(function(e){var t,i=Rt(e),n=Zt(e),o=null==(t=e.ownerDocument)?void 0:t.body,r=_t(i.scrollWidth,i.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),s=_t(i.scrollHeight,i.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-n.scrollLeft+Jt(e),l=-n.scrollTop;return"rtl"===Mt(o||i).direction&&(a+=_t(i.clientWidth,o?o.clientWidth:0)-r),{width:r,height:s,x:a,y:l}}(Rt(e)))}function oi(e,t,i,n){var o="clippingParents"===t?function(e){var t=ti(It(e)),i=["absolute","fixed"].indexOf(Mt(e).position)>=0&&bt(e)?Nt(e):e;return vt(i)?t.filter(function(e){return vt(e)&&Dt(e,i)&&"body"!==ft(e)}):[]}(e):[].concat(t),r=[].concat(o,[i]),s=r[0],a=r.reduce(function(t,i){var o=ni(e,i,n);return t.top=_t(o.top,t.top),t.right=St(o.right,t.right),t.bottom=St(o.bottom,t.bottom),t.left=_t(o.left,t.left),t},ni(e,s,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function ri(e){var t,i=e.reference,n=e.element,o=e.placement,r=o?Ct(o):null,s=o?Ht(o):null,a=i.x+i.width/2-n.width/2,l=i.y+i.height/2-n.height/2;switch(r){case je:t={x:a,y:i.y-n.height};break;case Ue:t={x:a,y:i.y+i.height};break;case Ye:t={x:i.x+i.width,y:l};break;case qe:t={x:i.x-n.width,y:l};break;default:t={x:i.x,y:i.y}}var c=r?Lt(r):null;if(null!=c){var d="y"===c?"height":"width";switch(s){case Ze:t[c]=t[c]-(i[d]/2-n[d]/2);break;case Je:t[c]=t[c]+(i[d]/2-n[d]/2)}}return t}function si(e,t){void 0===t&&(t={});var i=t,n=i.placement,o=void 0===n?e.placement:n,r=i.strategy,s=void 0===r?e.strategy:r,a=i.boundary,l=void 0===a?Qe:a,c=i.rootBoundary,d=void 0===c?et:c,u=i.elementContext,h=void 0===u?tt:u,p=i.altBoundary,g=void 0!==p&&p,f=i.padding,m=void 0===f?0:f,v=$t("number"!=typeof m?m:Gt(m,Xe)),b=h===tt?it:tt,y=e.rects.popper,w=e.elements[g?b:h],C=oi(vt(w)?w:w.contextElement||Rt(e.elements.popper),l,d,s),_=Tt(e.elements.reference),S=ri({reference:_,element:y,strategy:"absolute",placement:o}),x=ii(Object.assign({},y,S)),A=h===tt?x:_,E={top:C.top-A.top+v.top,bottom:A.bottom-C.bottom+v.bottom,left:C.left-A.left+v.left,right:A.right-C.right+v.right},T=e.modifiersData.offset;if(h===tt&&T){var k=T[o];Object.keys(E).forEach(function(e){var t=[Ye,Ue].indexOf(e)>=0?1:-1,i=[je,Ue].indexOf(e)>=0?"y":"x";E[e]+=k[i]*t})}return E}function ai(e,t){void 0===t&&(t={});var i=t,n=i.placement,o=i.boundary,r=i.rootBoundary,s=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,c=void 0===l?ot:l,d=Ht(n),u=d?a?nt:nt.filter(function(e){return Ht(e)===d}):Xe,h=u.filter(function(e){return c.indexOf(e)>=0});0===h.length&&(h=u);var p=h.reduce(function(t,i){return t[i]=si(e,{placement:i,boundary:o,rootBoundary:r,padding:s})[Ct(i)],t},{});return Object.keys(p).sort(function(e,t){return p[e]-p[t]})}const li={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var o=i.mainAxis,r=void 0===o||o,s=i.altAxis,a=void 0===s||s,l=i.fallbackPlacements,c=i.padding,d=i.boundary,u=i.rootBoundary,h=i.altBoundary,p=i.flipVariations,g=void 0===p||p,f=i.allowedAutoPlacements,m=t.options.placement,v=Ct(m),b=l||(v===m||!g?[qt(m)]:function(e){if(Ct(e)===Ke)return[];var t=qt(e);return[Xt(e),t,Xt(t)]}(m)),y=[m].concat(b).reduce(function(e,i){return e.concat(Ct(i)===Ke?ai(t,{placement:i,boundary:d,rootBoundary:u,padding:c,flipVariations:g,allowedAutoPlacements:f}):i)},[]),w=t.rects.reference,C=t.rects.popper,_=new Map,S=!0,x=y[0],A=0;A<y.length;A++){var E=y[A],T=Ct(E),k=Ht(E)===Ze,D=[je,Ue].indexOf(T)>=0,M=D?"width":"height",P=si(t,{placement:E,boundary:d,rootBoundary:u,altBoundary:h,padding:c}),R=D?k?Ye:qe:k?Ue:je;w[M]>C[M]&&(R=qt(R));var I=qt(R),O=[];if(r&&O.push(P[T]<=0),a&&O.push(P[R]<=0,P[I]<=0),O.every(function(e){return e})){x=E,S=!1;break}_.set(E,O)}if(S)for(var N=function(e){var t=y.find(function(t){var i=_.get(t);if(i)return i.slice(0,e).every(function(e){return e})});if(t)return x=t,"break"},L=g?3:1;L>0;L--){if("break"===N(L))break}t.placement!==x&&(t.modifiersData[n]._skip=!0,t.placement=x,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ci(e,t,i){return void 0===i&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function di(e){return[je,Ye,Ue,qe].some(function(t){return e[t]>=0})}const ui={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,i=e.name,n=t.rects.reference,o=t.rects.popper,r=t.modifiersData.preventOverflow,s=si(t,{elementContext:"reference"}),a=si(t,{altBoundary:!0}),l=ci(s,n),c=ci(a,o,r),d=di(l),u=di(c);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}};const hi={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,i=e.options,n=e.name,o=i.offset,r=void 0===o?[0,0]:o,s=ot.reduce(function(e,i){return e[i]=function(e,t,i){var n=Ct(e),o=[qe,je].indexOf(n)>=0?-1:1,r="function"==typeof i?i(Object.assign({},t,{placement:e})):i,s=r[0],a=r[1];return s=s||0,a=(a||0)*o,[qe,Ye].indexOf(n)>=0?{x:a,y:s}:{x:s,y:a}}(i,t.rects,r),e},{}),a=s[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=s}};const pi={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,i=e.name;t.modifiersData[i]=ri({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};const gi={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,n=e.name,o=i.mainAxis,r=void 0===o||o,s=i.altAxis,a=void 0!==s&&s,l=i.boundary,c=i.rootBoundary,d=i.altBoundary,u=i.padding,h=i.tether,p=void 0===h||h,g=i.tetherOffset,f=void 0===g?0:g,m=si(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),v=Ct(t.placement),b=Ht(t.placement),y=!b,w=Lt(v),C="x"===w?"y":"x",_=t.modifiersData.popperOffsets,S=t.rects.reference,x=t.rects.popper,A="function"==typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,E="number"==typeof A?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,k={x:0,y:0};if(_){if(r){var D,M="y"===w?je:qe,P="y"===w?Ue:Ye,R="y"===w?"height":"width",I=_[w],O=I+m[M],N=I-m[P],L=p?-x[R]/2:0,F=b===Ze?S[R]:x[R],$=b===Ze?-x[R]:-S[R],G=t.elements.arrow,B=p&&G?kt(G):{width:0,height:0},H=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},z=H[M],W=H[P],V=Ft(0,S[R],B[R]),j=y?S[R]/2-L-V-z-E.mainAxis:F-V-z-E.mainAxis,U=y?-S[R]/2+L+V+W+E.mainAxis:$+V+W+E.mainAxis,Y=t.elements.arrow&&Nt(t.elements.arrow),q=Y?"y"===w?Y.clientTop||0:Y.clientLeft||0:0,K=null!=(D=null==T?void 0:T[w])?D:0,X=I+U-K,Z=Ft(p?St(O,I+j-K-q):O,I,p?_t(N,X):N);_[w]=Z,k[w]=Z-I}if(a){var J,Q="x"===w?je:qe,ee="x"===w?Ue:Ye,te=_[C],ie="y"===C?"height":"width",ne=te+m[Q],oe=te-m[ee],re=-1!==[je,qe].indexOf(v),se=null!=(J=null==T?void 0:T[C])?J:0,ae=re?ne:te-S[ie]-x[ie]-se+E.altAxis,le=re?te+S[ie]+x[ie]-se-E.altAxis:oe,ce=p&&re?function(e,t,i){var n=Ft(e,t,i);return n>i?i:n}(ae,te,le):Ft(p?ae:ne,te,p?le:oe);_[C]=ce,k[C]=ce-te}t.modifiersData[n]=k}},requiresIfExists:["offset"]};function fi(e,t,i){void 0===i&&(i=!1);var n,o,r=bt(t),s=bt(t)&&function(e){var t=e.getBoundingClientRect(),i=xt(t.width)/e.offsetWidth||1,n=xt(t.height)/e.offsetHeight||1;return 1!==i||1!==n}(t),a=Rt(t),l=Tt(e,s,i),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(r||!r&&!i)&&(("body"!==ft(t)||Qt(a))&&(c=(n=t)!==mt(n)&&bt(n)?{scrollLeft:(o=n).scrollLeft,scrollTop:o.scrollTop}:Zt(n)),bt(t)?((d=Tt(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):a&&(d.x=Jt(a))),{x:l.left+c.scrollLeft-d.x,y:l.top+c.scrollTop-d.y,width:l.width,height:l.height}}function mi(e){var t=new Map,i=new Set,n=[];function o(e){i.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!i.has(e)){var n=t.get(e);n&&o(n)}}),n.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){i.has(e.name)||o(e)}),n}var vi={placement:"bottom",modifiers:[],strategy:"absolute"};function bi(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function yi(e){void 0===e&&(e={});var t=e,i=t.defaultModifiers,n=void 0===i?[]:i,o=t.defaultOptions,r=void 0===o?vi:o;return function(e,t,i){void 0===i&&(i=r);var o,s,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},vi,r),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,d={state:a,setOptions:function(i){var o="function"==typeof i?i(a.options):i;u(),a.options=Object.assign({},r,a.options,o),a.scrollParents={reference:vt(e)?ti(e):e.contextElement?ti(e.contextElement):[],popper:ti(t)};var s,c,h=function(e){var t=mi(e);return gt.reduce(function(e,i){return e.concat(t.filter(function(e){return e.phase===i}))},[])}((s=[].concat(n,a.options.modifiers),c=s.reduce(function(e,t){var i=e[t.name];return e[t.name]=i?Object.assign({},i,t,{options:Object.assign({},i.options,t.options),data:Object.assign({},i.data,t.data)}):t,e},{}),Object.keys(c).map(function(e){return c[e]})));return a.orderedModifiers=h.filter(function(e){return e.enabled}),a.orderedModifiers.forEach(function(e){var t=e.name,i=e.options,n=void 0===i?{}:i,o=e.effect;if("function"==typeof o){var r=o({state:a,name:t,instance:d,options:n}),s=function(){};l.push(r||s)}}),d.update()},forceUpdate:function(){if(!c){var e=a.elements,t=e.reference,i=e.popper;if(bi(t,i)){a.rects={reference:fi(t,Nt(i),"fixed"===a.options.strategy),popper:kt(i)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach(function(e){return a.modifiersData[e.name]=Object.assign({},e.data)});for(var n=0;n<a.orderedModifiers.length;n++)if(!0!==a.reset){var o=a.orderedModifiers[n],r=o.fn,s=o.options,l=void 0===s?{}:s,u=o.name;"function"==typeof r&&(a=r({state:a,options:l,name:u,instance:d})||a)}else a.reset=!1,n=-1}}},update:(o=function(){return new Promise(function(e){d.forceUpdate(),e(a)})},function(){return s||(s=new Promise(function(e){Promise.resolve().then(function(){s=void 0,e(o())})})),s}),destroy:function(){u(),c=!0}};if(!bi(e,t))return d;function u(){l.forEach(function(e){return e()}),l=[]}return d.setOptions(i).then(function(e){!c&&i.onFirstUpdate&&i.onFirstUpdate(e)}),d}}var wi=yi(),Ci=yi({defaultModifiers:[Ut,pi,Vt,wt]}),_i=yi({defaultModifiers:[Ut,pi,Vt,wt,hi,li,gi,Bt,ui]});const Si=Object.freeze(Object.defineProperty({__proto__:null,afterMain:dt,afterRead:at,afterWrite:pt,applyStyles:wt,arrow:Bt,auto:Ke,basePlacements:Xe,beforeMain:lt,beforeRead:rt,beforeWrite:ut,bottom:Ue,clippingParents:Qe,computeStyles:Vt,createPopper:_i,createPopperBase:wi,createPopperLite:Ci,detectOverflow:si,end:Je,eventListeners:Ut,flip:li,hide:ui,left:qe,main:ct,modifierPhases:gt,offset:hi,placements:ot,popper:tt,popperGenerator:yi,popperOffsets:pi,preventOverflow:gi,read:st,reference:it,right:Ye,start:Ze,top:je,variationPlacements:nt,viewport:et,write:ht},Symbol.toStringTag,{value:"Module"})),xi="dropdown",Ai=".bs.dropdown",Ei=".data-api",Ti="ArrowUp",ki="ArrowDown",Di=`hide${Ai}`,Mi=`hidden${Ai}`,Pi=`show${Ai}`,Ri=`shown${Ai}`,Ii=`click${Ai}${Ei}`,Oi=`keydown${Ai}${Ei}`,Ni=`keyup${Ai}${Ei}`,Li="show",Fi='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',$i=`${Fi}.${Li}`,Gi=".dropdown-menu",Bi=f()?"top-end":"top-start",Hi=f()?"top-start":"top-end",zi=f()?"bottom-end":"bottom-start",Wi=f()?"bottom-start":"bottom-end",Vi=f()?"left-start":"right-start",ji=f()?"right-start":"left-start",Ui={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Yi={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class qi extends H{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=W.next(this._element,Gi)[0]||W.prev(this._element,Gi)[0]||W.findOne(Gi,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ui}static get DefaultType(){return Yi}static get NAME(){return xi}toggle(){return this._isShown()?this.hide():this.show()}show(){if(c(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!N.trigger(this._element,Pi,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const e of[].concat(...document.body.children))N.on(e,"mouseover",u);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Li),this._element.classList.add(Li),N.trigger(this._element,Ri,e)}}hide(){if(c(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!N.trigger(this._element,Di,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))N.off(e,"mouseover",u);this._popper&&this._popper.destroy(),this._menu.classList.remove(Li),this._element.classList.remove(Li),this._element.setAttribute("aria-expanded","false"),G.removeDataAttribute(this._menu,"popper"),N.trigger(this._element,Mi,e)}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!s(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError(`${xi.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(void 0===Si)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=this._parent:s(this._config.reference)?e=a(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=_i(e,this._menu,t)}_isShown(){return this._menu.classList.contains(Li)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return Vi;if(e.classList.contains("dropstart"))return ji;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Hi:Bi:t?Wi:zi}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(G.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...v(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:t}){const i=W.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(e=>l(e));i.length&&y(i,t,e===ki,!i.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=qi.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=W.find($i);for(const i of t){const t=qi.getInstance(i);if(!t||!1===t._config.autoClose)continue;const n=e.composedPath(),o=n.includes(t._menu);if(n.includes(t._element)||"inside"===t._config.autoClose&&!o||"outside"===t._config.autoClose&&o)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const r={relatedTarget:t._element};"click"===e.type&&(r.clickEvent=e),t._completeHide(r)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),i="Escape"===e.key,n=[Ti,ki].includes(e.key);if(!n&&!i)return;if(t&&!i)return;e.preventDefault();const o=this.matches(Fi)?this:W.prev(this,Fi)[0]||W.next(this,Fi)[0]||W.findOne(Fi,e.delegateTarget.parentNode),r=qi.getOrCreateInstance(o);if(n)return e.stopPropagation(),r.show(),void r._selectMenuItem(e);r._isShown()&&(e.stopPropagation(),r.hide(),o.focus())}}N.on(document,Oi,Fi,qi.dataApiKeydownHandler),N.on(document,Oi,Gi,qi.dataApiKeydownHandler),N.on(document,Ii,qi.clearMenus),N.on(document,Ni,qi.clearMenus),N.on(document,Ii,Fi,function(e){e.preventDefault(),qi.getOrCreateInstance(this).toggle()}),m(qi);const Ki="backdrop",Xi="show",Zi=`mousedown.bs.${Ki}`,Ji={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Qi={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class en extends B{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Ji}static get DefaultType(){return Qi}static get NAME(){return Ki}show(e){if(!this._config.isVisible)return void v(e);this._append();const t=this._getElement();this._config.isAnimated&&h(t),t.classList.add(Xi),this._emulateAnimation(()=>{v(e)})}hide(e){this._config.isVisible?(this._getElement().classList.remove(Xi),this._emulateAnimation(()=>{this.dispose(),v(e)})):v(e)}dispose(){this._isAppended&&(N.off(this._element,Zi),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=a(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),N.on(e,Zi,()=>{v(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){b(e,this._getElement(),this._config.isAnimated)}}const tn=".bs.focustrap",nn=`focusin${tn}`,on=`keydown.tab${tn}`,rn="backward",sn={autofocus:!0,trapElement:null},an={autofocus:"boolean",trapElement:"element"};class ln extends B{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return sn}static get DefaultType(){return an}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),N.off(document,tn),N.on(document,nn,e=>this._handleFocusin(e)),N.on(document,on,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,N.off(document,tn))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const i=W.focusableChildren(t);0===i.length?t.focus():this._lastTabNavDirection===rn?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?rn:"forward")}}const cn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",dn=".sticky-top",un="padding-right",hn="margin-right";class pn{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,un,t=>t+e),this._setElementAttributes(cn,un,t=>t+e),this._setElementAttributes(dn,hn,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,un),this._resetElementAttributes(cn,un),this._resetElementAttributes(dn,hn)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,i){const n=this.getWidth();this._applyManipulationCallback(e,e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+n)return;this._saveInitialAttribute(e,t);const o=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,`${i(Number.parseFloat(o))}px`)})}_saveInitialAttribute(e,t){const i=e.style.getPropertyValue(t);i&&G.setDataAttribute(e,t,i)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,e=>{const i=G.getDataAttribute(e,t);null!==i?(G.removeDataAttribute(e,t),e.style.setProperty(t,i)):e.style.removeProperty(t)})}_applyManipulationCallback(e,t){if(s(e))t(e);else for(const i of W.find(e,this._element))t(i)}}const gn=".bs.modal",fn=`hide${gn}`,mn=`hidePrevented${gn}`,vn=`hidden${gn}`,bn=`show${gn}`,yn=`shown${gn}`,wn=`resize${gn}`,Cn=`click.dismiss${gn}`,_n=`mousedown.dismiss${gn}`,Sn=`keydown.dismiss${gn}`,xn=`click${gn}.data-api`,An="modal-open",En="show",Tn="modal-static",kn={backdrop:!0,focus:!0,keyboard:!0},Dn={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Mn extends H{constructor(e,t){super(e,t),this._dialog=W.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new pn,this._addEventListeners()}static get Default(){return kn}static get DefaultType(){return Dn}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||this._isTransitioning)return;N.trigger(this._element,bn,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(An),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){if(!this._isShown||this._isTransitioning)return;N.trigger(this._element,fn).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(En),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){N.off(window,gn),N.off(this._dialog,gn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new en({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ln({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=W.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),h(this._element),this._element.classList.add(En);this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,N.trigger(this._element,yn,{relatedTarget:e})},this._dialog,this._isAnimated())}_addEventListeners(){N.on(this._element,Sn,e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),N.on(window,wn,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),N.on(this._element,_n,e=>{N.one(this._element,Cn,t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(An),this._resetAdjustments(),this._scrollBar.reset(),N.trigger(this._element,vn)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(N.trigger(this._element,mn).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(Tn)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Tn),this._queueCallback(()=>{this._element.classList.remove(Tn),this._queueCallback(()=>{this._element.style.overflowY=t},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),i=t>0;if(i&&!e){const e=f()?"paddingLeft":"paddingRight";this._element.style[e]=`${t}px`}if(!i&&e){const e=f()?"paddingRight":"paddingLeft";this._element.style[e]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const i=Mn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e](t)}})}}N.on(document,xn,'[data-bs-toggle="modal"]',function(e){const t=W.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),N.one(t,bn,e=>{e.defaultPrevented||N.one(t,vn,()=>{l(this)&&this.focus()})});const i=W.findOne(".modal.show");i&&Mn.getInstance(i).hide();Mn.getOrCreateInstance(t).toggle(this)}),V(Mn),m(Mn);const Pn=".bs.offcanvas",Rn=".data-api",In=`load${Pn}${Rn}`,On="show",Nn="showing",Ln="hiding",Fn=".offcanvas.show",$n=`show${Pn}`,Gn=`shown${Pn}`,Bn=`hide${Pn}`,Hn=`hidePrevented${Pn}`,zn=`hidden${Pn}`,Wn=`resize${Pn}`,Vn=`click${Pn}${Rn}`,jn=`keydown.dismiss${Pn}`,Un={backdrop:!0,keyboard:!0,scroll:!1},Yn={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class qn extends H{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Un}static get DefaultType(){return Yn}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown)return;if(N.trigger(this._element,$n,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||(new pn).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Nn);this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(On),this._element.classList.remove(Nn),N.trigger(this._element,Gn,{relatedTarget:e})},this._element,!0)}hide(){if(!this._isShown)return;if(N.trigger(this._element,Bn).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ln),this._backdrop.hide();this._queueCallback(()=>{this._element.classList.remove(On,Ln),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new pn).reset(),N.trigger(this._element,zn)},this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new en({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():N.trigger(this._element,Hn)}:null})}_initializeFocusTrap(){return new ln({trapElement:this._element})}_addEventListeners(){N.on(this._element,jn,e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():N.trigger(this._element,Hn))})}static jQueryInterface(e){return this.each(function(){const t=qn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}N.on(document,Vn,'[data-bs-toggle="offcanvas"]',function(e){const t=W.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),c(this))return;N.one(t,zn,()=>{l(this)&&this.focus()});const i=W.findOne(Fn);i&&i!==t&&qn.getInstance(i).hide();qn.getOrCreateInstance(t).toggle(this)}),N.on(window,In,()=>{for(const e of W.find(Fn))qn.getOrCreateInstance(e).show()}),N.on(window,Wn,()=>{for(const e of W.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&qn.getOrCreateInstance(e).hide()}),V(qn),m(qn);const Kn={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Xn=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Zn=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Jn=(e,t)=>{const i=e.nodeName.toLowerCase();return t.includes(i)?!Xn.has(i)||Boolean(Zn.test(e.nodeValue)):t.filter(e=>e instanceof RegExp).some(e=>e.test(i))};const Qn={allowList:Kn,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},eo={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},to={entry:"(string|element|function|null)",selector:"(string|element)"};class io extends B{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Qn}static get DefaultType(){return eo}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[t,i]of Object.entries(this._config.content))this._setContent(e,i,t);const t=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&t.classList.add(...i.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,i]of Object.entries(e))super._typeCheckConfig({selector:t,entry:i},to)}_setContent(e,t,i){const n=W.findOne(i,e);n&&((t=this._resolvePossibleFunction(t))?s(t)?this._putElementInTemplate(a(t),n):this._config.html?n.innerHTML=this._maybeSanitize(t):n.textContent=t:n.remove())}_maybeSanitize(e){return this._config.sanitize?function(e,t,i){if(!e.length)return e;if(i&&"function"==typeof i)return i(e);const n=(new window.DOMParser).parseFromString(e,"text/html"),o=[].concat(...n.body.querySelectorAll("*"));for(const e of o){const i=e.nodeName.toLowerCase();if(!Object.keys(t).includes(i)){e.remove();continue}const n=[].concat(...e.attributes),o=[].concat(t["*"]||[],t[i]||[]);for(const t of n)Jn(t,o)||e.removeAttribute(t.nodeName)}return n.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return v(e,[this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const no=new Set(["sanitize","allowList","sanitizeFn"]),oo="fade",ro="show",so=".tooltip-inner",ao=".modal",lo="hide.bs.modal",co="hover",uo="focus",ho={AUTO:"auto",TOP:"top",RIGHT:f()?"left":"right",BOTTOM:"bottom",LEFT:f()?"right":"left"},po={allowList:Kn,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},go={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class fo extends H{constructor(e,t){if(void 0===Si)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return po}static get DefaultType(){return go}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),N.off(this._element.closest(ao),lo,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=N.trigger(this._element,this.constructor.eventName("show")),t=(d(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:n}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(n.append(i),N.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(i),i.classList.add(ro),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))N.on(e,"mouseover",u);this._queueCallback(()=>{N.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(!this._isShown())return;if(N.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented)return;if(this._getTipElement().classList.remove(ro),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))N.off(e,"mouseover",u);this._activeTrigger.click=!1,this._activeTrigger[uo]=!1,this._activeTrigger[co]=!1,this._isHovered=null;this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),N.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(oo,ro),t.classList.add(`bs-${this.constructor.NAME}-auto`);const i=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return t.setAttribute("id",i),this._isAnimated()&&t.classList.add(oo),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new io({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[so]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(oo)}_isShown(){return this.tip&&this.tip.classList.contains(ro)}_createPopper(e){const t=v(this._config.placement,[this,e,this._element]),i=ho[t.toUpperCase()];return _i(this._element,e,this._getPopperConfig(i))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return v(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,...v(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)N.on(this._element,this.constructor.eventName("click"),this._config.selector,e=>{this._initializeOnDelegatedTarget(e).toggle()});else if("manual"!==t){const e=t===co?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),i=t===co?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");N.on(this._element,e,this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?uo:co]=!0,t._enter()}),N.on(this._element,i,this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?uo:co]=t._element.contains(e.relatedTarget),t._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},N.on(this._element.closest(ao),lo,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=G.getDataAttributes(this._element);for(const e of Object.keys(t))no.has(e)&&delete t[e];return e={...t,..."object"==typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:a(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,i]of Object.entries(this._config))this.constructor.Default[t]!==i&&(e[t]=i);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=fo.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}m(fo);const mo=".popover-header",vo=".popover-body",bo={...fo.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},yo={...fo.DefaultType,content:"(null|string|element|function)"};class wo extends fo{static get Default(){return bo}static get DefaultType(){return yo}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[mo]:this._getTitle(),[vo]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=wo.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}m(wo);const Co=".bs.scrollspy",_o=`activate${Co}`,So=`click${Co}`,xo=`load${Co}.data-api`,Ao="active",Eo="[href]",To=".nav-link",ko=`${To}, .nav-item > ${To}, .list-group-item`,Do={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Mo={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Po extends H{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Do}static get DefaultType(){return Mo}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=a(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map(e=>Number.parseFloat(e))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(N.off(this._config.target,So),N.on(this._config.target,So,Eo,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const i=this._rootElement||window,n=t.offsetTop-this._element.offsetTop;if(i.scrollTo)return void i.scrollTo({top:n,behavior:"smooth"});i.scrollTop=n}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),e)}_observerCallback(e){const t=e=>this._targetLinks.get(`#${e.target.id}`),i=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(t(e))},n=(this._rootElement||document.documentElement).scrollTop,o=n>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=n;for(const r of e){if(!r.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(r));continue}const e=r.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&e){if(i(r),!n)return}else o||e||i(r)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=W.find(Eo,this._config.target);for(const t of e){if(!t.hash||c(t))continue;const e=W.findOne(decodeURI(t.hash),this._element);l(e)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,e))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Ao),this._activateParents(e),N.trigger(this._element,_o,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))W.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(Ao);else for(const t of W.parents(e,".nav, .list-group"))for(const e of W.prev(t,ko))e.classList.add(Ao)}_clearActiveClass(e){e.classList.remove(Ao);const t=W.find(`${Eo}.${Ao}`,e);for(const e of t)e.classList.remove(Ao)}static jQueryInterface(e){return this.each(function(){const t=Po.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}})}}N.on(window,xo,()=>{for(const e of W.find('[data-bs-spy="scroll"]'))Po.getOrCreateInstance(e)}),m(Po);const Ro=".bs.tab",Io=`hide${Ro}`,Oo=`hidden${Ro}`,No=`show${Ro}`,Lo=`shown${Ro}`,Fo=`click${Ro}`,$o=`keydown${Ro}`,Go=`load${Ro}`,Bo="ArrowLeft",Ho="ArrowRight",zo="ArrowUp",Wo="ArrowDown",Vo="Home",jo="End",Uo="active",Yo="fade",qo="show",Ko=".dropdown-toggle",Xo=`:not(${Ko})`,Zo='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Jo=`${`.nav-link${Xo}, .list-group-item${Xo}, [role="tab"]${Xo}`}, ${Zo}`,Qo=`.${Uo}[data-bs-toggle="tab"], .${Uo}[data-bs-toggle="pill"], .${Uo}[data-bs-toggle="list"]`;class er extends H{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),N.on(this._element,$o,e=>this._keydown(e)))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),i=t?N.trigger(t,Io,{relatedTarget:e}):null;N.trigger(e,No,{relatedTarget:t}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){if(!e)return;e.classList.add(Uo),this._activate(W.getElementFromSelector(e));this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),N.trigger(e,Lo,{relatedTarget:t})):e.classList.add(qo)},e,e.classList.contains(Yo))}_deactivate(e,t){if(!e)return;e.classList.remove(Uo),e.blur(),this._deactivate(W.getElementFromSelector(e));this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),N.trigger(e,Oo,{relatedTarget:t})):e.classList.remove(qo)},e,e.classList.contains(Yo))}_keydown(e){if(![Bo,Ho,zo,Wo,Vo,jo].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(e=>!c(e));let i;if([Vo,jo].includes(e.key))i=t[e.key===Vo?0:t.length-1];else{const n=[Ho,Wo].includes(e.key);i=y(t,e.target,n,!0)}i&&(i.focus({preventScroll:!0}),er.getOrCreateInstance(i).show())}_getChildren(){return W.find(Jo,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const e of t)this._setInitialAttributesOnChild(e)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",t),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=W.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const i=this._getOuterElement(e);if(!i.classList.contains("dropdown"))return;const n=(e,n)=>{const o=W.findOne(e,i);o&&o.classList.toggle(n,t)};n(Ko,Uo),n(".dropdown-menu",qo),i.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,i){e.hasAttribute(t)||e.setAttribute(t,i)}_elemIsActive(e){return e.classList.contains(Uo)}_getInnerElement(e){return e.matches(Jo)?e:W.findOne(Jo,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each(function(){const t=er.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}})}}N.on(document,Fo,Zo,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),c(this)||er.getOrCreateInstance(this).show()}),N.on(window,Go,()=>{for(const e of W.find(Qo))er.getOrCreateInstance(e)}),m(er);const tr=".bs.toast",ir=`mouseover${tr}`,nr=`mouseout${tr}`,or=`focusin${tr}`,rr=`focusout${tr}`,sr=`hide${tr}`,ar=`hidden${tr}`,lr=`show${tr}`,cr=`shown${tr}`,dr="hide",ur="show",hr="showing",pr={animation:"boolean",autohide:"boolean",delay:"number"},gr={animation:!0,autohide:!0,delay:5e3};class fr extends H{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return gr}static get DefaultType(){return pr}static get NAME(){return"toast"}show(){if(N.trigger(this._element,lr).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");this._element.classList.remove(dr),h(this._element),this._element.classList.add(ur,hr),this._queueCallback(()=>{this._element.classList.remove(hr),N.trigger(this._element,cr),this._maybeScheduleHide()},this._element,this._config.animation)}hide(){if(!this.isShown())return;if(N.trigger(this._element,sr).defaultPrevented)return;this._element.classList.add(hr),this._queueCallback(()=>{this._element.classList.add(dr),this._element.classList.remove(hr,ur),N.trigger(this._element,ar)},this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ur),super.dispose()}isShown(){return this._element.classList.contains(ur)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){N.on(this._element,ir,e=>this._onInteraction(e,!0)),N.on(this._element,nr,e=>this._onInteraction(e,!1)),N.on(this._element,or,e=>this._onInteraction(e,!0)),N.on(this._element,rr,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=fr.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}})}}V(fr),m(fr);return{Alert:q,Button:X,Carousel:Me,Collapse:Ve,Dropdown:qi,Modal:Mn,Offcanvas:qn,Popover:wo,ScrollSpy:Po,Tab:er,Toast:fr,Tooltip:fo}}),function(e,t,i,n){"use strict";var o,r=["","webkit","Moz","MS","ms","o"],s=t.createElement("div"),a=Math.round,l=Math.abs,c=Date.now;function d(e,t,i){return setTimeout(v(e,i),t)}function u(e,t,i){return!!Array.isArray(e)&&(h(e,i[t],i),!0)}function h(e,t,i){var o;if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==n)for(o=0;o<e.length;)t.call(i,e[o],o,e),o++;else for(o in e)e.hasOwnProperty(o)&&t.call(i,e[o],o,e)}function p(t,i,n){var o="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=e.console&&(e.console.warn||e.console.log);return r&&r.call(e.console,o,n),t.apply(this,arguments)}}o="function"!=typeof Object.assign?function(e){if(e===n||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(o!==n&&null!==o)for(var r in o)o.hasOwnProperty(r)&&(t[r]=o[r])}return t}:Object.assign;var g=p(function(e,t,i){for(var o=Object.keys(t),r=0;r<o.length;)(!i||i&&e[o[r]]===n)&&(e[o[r]]=t[o[r]]),r++;return e},"extend","Use `assign`."),f=p(function(e,t){return g(e,t,!0)},"merge","Use `assign`.");function m(e,t,i){var n,r=t.prototype;(n=e.prototype=Object.create(r)).constructor=e,n._super=r,i&&o(n,i)}function v(e,t){return function(){return e.apply(t,arguments)}}function b(e,t){return"function"==typeof e?e.apply(t&&t[0]||n,t):e}function y(e,t){return e===n?t:e}function w(e,t,i){h(x(t),function(t){e.addEventListener(t,i,!1)})}function C(e,t,i){h(x(t),function(t){e.removeEventListener(t,i,!1)})}function _(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function S(e,t){return e.indexOf(t)>-1}function x(e){return e.trim().split(/\s+/g)}function A(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);for(var n=0;n<e.length;){if(i&&e[n][i]==t||!i&&e[n]===t)return n;n++}return-1}function E(e){return Array.prototype.slice.call(e,0)}function T(e,t,i){for(var n=[],o=[],r=0;r<e.length;){var s=t?e[r][t]:e[r];A(o,s)<0&&n.push(e[r]),o[r]=s,r++}return i&&(n=t?n.sort(function(e,i){return e[t]>i[t]}):n.sort()),n}function k(e,t){for(var i,o,s=t[0].toUpperCase()+t.slice(1),a=0;a<r.length;){if((o=(i=r[a])?i+s:t)in e)return o;a++}return n}var D=1;function M(t){var i=t.ownerDocument||t;return i.defaultView||i.parentWindow||e}var P="ontouchstart"in e,R=k(e,"PointerEvent")!==n,I=P&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),O="touch",N="mouse",L=24,F=["x","y"],$=["clientX","clientY"];function G(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){b(e.options.enable,[e])&&i.handler(t)},this.init()}function B(e,t,i){var o=i.pointers.length,r=i.changedPointers.length,s=1&t&&o-r===0,a=12&t&&o-r===0;i.isFirst=!!s,i.isFinal=!!a,s&&(e.session={}),i.eventType=t,function(e,t){var i=e.session,o=t.pointers,r=o.length;i.firstInput||(i.firstInput=H(t));r>1&&!i.firstMultiple?i.firstMultiple=H(t):1===r&&(i.firstMultiple=!1);var s=i.firstInput,a=i.firstMultiple,d=a?a.center:s.center,u=t.center=z(o);t.timeStamp=c(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=U(d,u),t.distance=j(d,u),function(e,t){var i=t.center,n=e.offsetDelta||{},o=e.prevDelta||{},r=e.prevInput||{};1!==t.eventType&&4!==r.eventType||(o=e.prevDelta={x:r.deltaX||0,y:r.deltaY||0},n=e.offsetDelta={x:i.x,y:i.y});t.deltaX=o.x+(i.x-n.x),t.deltaY=o.y+(i.y-n.y)}(i,t),t.offsetDirection=V(t.deltaX,t.deltaY);var h=W(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=h.x,t.overallVelocityY=h.y,t.overallVelocity=l(h.x)>l(h.y)?h.x:h.y,t.scale=a?(p=a.pointers,g=o,j(g[0],g[1],$)/j(p[0],p[1],$)):1,t.rotation=a?function(e,t){return U(t[1],t[0],$)+U(e[1],e[0],$)}(a.pointers,o):0,t.maxPointers=i.prevInput?t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers:t.pointers.length,function(e,t){var i,o,r,s,a=e.lastInterval||t,c=t.timeStamp-a.timeStamp;if(8!=t.eventType&&(c>25||a.velocity===n)){var d=t.deltaX-a.deltaX,u=t.deltaY-a.deltaY,h=W(c,d,u);o=h.x,r=h.y,i=l(h.x)>l(h.y)?h.x:h.y,s=V(d,u),e.lastInterval=t}else i=a.velocity,o=a.velocityX,r=a.velocityY,s=a.direction;t.velocity=i,t.velocityX=o,t.velocityY=r,t.direction=s}(i,t);var p,g;var f=e.element;_(t.srcEvent.target,f)&&(f=t.srcEvent.target);t.target=f}(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function H(e){for(var t=[],i=0;i<e.pointers.length;)t[i]={clientX:a(e.pointers[i].clientX),clientY:a(e.pointers[i].clientY)},i++;return{timeStamp:c(),pointers:t,center:z(t),deltaX:e.deltaX,deltaY:e.deltaY}}function z(e){var t=e.length;if(1===t)return{x:a(e[0].clientX),y:a(e[0].clientY)};for(var i=0,n=0,o=0;o<t;)i+=e[o].clientX,n+=e[o].clientY,o++;return{x:a(i/t),y:a(n/t)}}function W(e,t,i){return{x:t/e||0,y:i/e||0}}function V(e,t){return e===t?1:l(e)>=l(t)?e<0?2:4:t<0?8:16}function j(e,t,i){i||(i=F);var n=t[i[0]]-e[i[0]],o=t[i[1]]-e[i[1]];return Math.sqrt(n*n+o*o)}function U(e,t,i){i||(i=F);var n=t[i[0]]-e[i[0]],o=t[i[1]]-e[i[1]];return 180*Math.atan2(o,n)/Math.PI}G.prototype={handler:function(){},init:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(M(this.element),this.evWin,this.domHandler)}};var Y={mousedown:1,mousemove:2,mouseup:4},q="mousedown",K="mousemove mouseup";function X(){this.evEl=q,this.evWin=K,this.pressed=!1,G.apply(this,arguments)}m(X,G,{handler:function(e){var t=Y[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:N,srcEvent:e}))}});var Z={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},J={2:O,3:"pen",4:N,5:"kinect"},Q="pointerdown",ee="pointermove pointerup pointercancel";function te(){this.evEl=Q,this.evWin=ee,G.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(Q="MSPointerDown",ee="MSPointerMove MSPointerUp MSPointerCancel"),m(te,G,{handler:function(e){var t=this.store,i=!1,n=e.type.toLowerCase().replace("ms",""),o=Z[n],r=J[e.pointerType]||e.pointerType,s=r==O,a=A(t,e.pointerId,"pointerId");1&o&&(0===e.button||s)?a<0&&(t.push(e),a=t.length-1):12&o&&(i=!0),a<0||(t[a]=e,this.callback(this.manager,o,{pointers:t,changedPointers:[e],pointerType:r,srcEvent:e}),i&&t.splice(a,1))}});var ie={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ne(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,G.apply(this,arguments)}function oe(e,t){var i=E(e.touches),n=E(e.changedTouches);return 12&t&&(i=T(i.concat(n),"identifier",!0)),[i,n]}m(ne,G,{handler:function(e){var t=ie[e.type];if(1===t&&(this.started=!0),this.started){var i=oe.call(this,e,t);12&t&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:O,srcEvent:e})}}});var re={touchstart:1,touchmove:2,touchend:4,touchcancel:8},se="touchstart touchmove touchend touchcancel";function ae(){this.evTarget=se,this.targetIds={},G.apply(this,arguments)}function le(e,t){var i=E(e.touches),n=this.targetIds;if(3&t&&1===i.length)return n[i[0].identifier]=!0,[i,i];var o,r,s=E(e.changedTouches),a=[],l=this.target;if(r=i.filter(function(e){return _(e.target,l)}),1===t)for(o=0;o<r.length;)n[r[o].identifier]=!0,o++;for(o=0;o<s.length;)n[s[o].identifier]&&a.push(s[o]),12&t&&delete n[s[o].identifier],o++;return a.length?[T(r.concat(a),"identifier",!0),a]:void 0}m(ae,G,{handler:function(e){var t=re[e.type],i=le.call(this,e,t);i&&this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:O,srcEvent:e})}});function ce(){G.apply(this,arguments);var e=v(this.handler,this);this.touch=new ae(this.manager,e),this.mouse=new X(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function de(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,ue.call(this,t)):12&e&&ue.call(this,t)}function ue(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var e=n.indexOf(i);e>-1&&n.splice(e,1)},2500)}}function he(e){for(var t=e.srcEvent.clientX,i=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var o=this.lastTouches[n],r=Math.abs(t-o.x),s=Math.abs(i-o.y);if(r<=25&&s<=25)return!0}return!1}m(ce,G,{handler:function(e,t,i){var n=i.pointerType==O,o=i.pointerType==N;if(!(o&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)de.call(this,t,i);else if(o&&he.call(this,i))return;this.callback(e,t,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var pe=k(s.style,"touchAction"),ge=pe!==n,fe="compute",me="auto",ve="manipulation",be="none",ye="pan-x",we="pan-y",Ce=function(){if(!ge)return!1;var t={},i=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!i||e.CSS.supports("touch-action",n)}),t}();function _e(e,t){this.manager=e,this.set(t)}_e.prototype={set:function(e){e==fe&&(e=this.compute()),ge&&this.manager.element.style&&Ce[e]&&(this.manager.element.style[pe]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return h(this.manager.recognizers,function(t){b(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(e){if(S(e,be))return be;var t=S(e,ye),i=S(e,we);if(t&&i)return be;if(t||i)return t?ye:we;if(S(e,ve))return ve;return me}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,i=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var n=this.actions,o=S(n,be)&&!Ce[be],r=S(n,we)&&!Ce[we],s=S(n,ye)&&!Ce[ye];if(o){var a=1===e.pointers.length,l=e.distance<2,c=e.deltaTime<250;if(a&&l&&c)return}if(!s||!r)return o||r&&6&i||s&&i&L?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Se=32;function xe(e){this.options=o({},this.defaults,e||{}),this.id=D++,this.manager=null,this.options.enable=y(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Ae(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function Ee(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function Te(e,t){var i=t.manager;return i?i.get(e):e}function ke(){xe.apply(this,arguments)}function De(){ke.apply(this,arguments),this.pX=null,this.pY=null}function Me(){ke.apply(this,arguments)}function Pe(){xe.apply(this,arguments),this._timer=null,this._input=null}function Re(){ke.apply(this,arguments)}function Ie(){ke.apply(this,arguments)}function Oe(){xe.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ne(e,t){return(t=t||{}).recognizers=y(t.recognizers,Ne.defaults.preset),new Le(e,t)}xe.prototype={defaults:{},set:function(e){return o(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(u(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Te(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return u(e,"dropRecognizeWith",this)||(e=Te(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(u(e,"requireFailure",this))return this;var t=this.requireFail;return-1===A(t,e=Te(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(u(e,"dropRequireFailure",this))return this;e=Te(e,this);var t=A(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,i=this.state;function n(i){t.manager.emit(i,e)}i<8&&n(t.options.event+Ae(i)),n(t.options.event),e.additionalEvent&&n(e.additionalEvent),i>=8&&n(t.options.event+Ae(i))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Se},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=o({},e);if(!b(this.options.enable,[this,t]))return this.reset(),void(this.state=Se);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},m(ke,xe,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,n=6&t,o=this.attrTest(e);return n&&(8&i||!o)?16|t:n||o?4&i?8|t:2&t?4|t:2:Se}}),m(De,ke,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push(we),e&L&&t.push(ye),t},directionTest:function(e){var t=this.options,i=!0,n=e.distance,o=e.direction,r=e.deltaX,s=e.deltaY;return o&t.direction||(6&t.direction?(o=0===r?1:r<0?2:4,i=r!=this.pX,n=Math.abs(e.deltaX)):(o=0===s?1:s<0?8:16,i=s!=this.pY,n=Math.abs(e.deltaY))),e.direction=o,i&&n>t.threshold&&o&t.direction},attrTest:function(e){return ke.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Ee(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),m(Me,ke,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[be]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),m(Pe,xe,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[me]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,n=e.distance<t.threshold,o=e.deltaTime>t.time;if(this._input=e,!n||!i||12&e.eventType&&!o)this.reset();else if(1&e.eventType)this.reset(),this._timer=d(function(){this.state=8,this.tryEmit()},t.time,this);else if(4&e.eventType)return 8;return Se},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}}),m(Re,ke,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[be]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),m(Ie,ke,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return De.prototype.getTouchAction.call(this)},attrTest:function(e){var t,i=this.options.direction;return 30&i?t=e.overallVelocity:6&i?t=e.overallVelocityX:i&L&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&l(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=Ee(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),m(Oe,xe,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ve]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,n=e.distance<t.threshold,o=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(n&&o&&i){if(4!=e.eventType)return this.failTimeout();var r=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||j(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,s&&r?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=d(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return Se},failTimeout:function(){return this._timer=d(function(){this.state=Se},this.options.interval,this),Se},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ne.VERSION="2.0.7",Ne.defaults={domEvents:!1,touchAction:fe,enable:!0,inputTarget:null,inputClass:null,preset:[[Re,{enable:!1}],[Me,{enable:!1},["rotate"]],[Ie,{direction:6}],[De,{direction:6},["swipe"]],[Oe],[Oe,{event:"doubletap",taps:2},["tap"]],[Pe]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Le(e,t){var i;this.options=o({},Ne.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((i=this).options.inputClass||(R?te:I?ae:P?ce:X))(i,B),this.touchAction=new _e(this,this.options.touchAction),Fe(this,!0),h(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function Fe(e,t){var i,n=e.element;n.style&&(h(e.options.cssProps,function(o,r){i=k(n.style,r),t?(e.oldCssProps[i]=n.style[i],n.style[i]=o):n.style[i]=e.oldCssProps[i]||""}),t||(e.oldCssProps={}))}Le.prototype={set:function(e){return o(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var i;this.touchAction.preventDefaults(e);var n=this.recognizers,o=t.curRecognizer;(!o||o&&8&o.state)&&(o=t.curRecognizer=null);for(var r=0;r<n.length;)i=n[r],2===t.stopped||o&&i!=o&&!i.canRecognizeWith(o)?i.reset():i.recognize(e),!o&&14&i.state&&(o=t.curRecognizer=i),r++}},get:function(e){if(e instanceof xe)return e;for(var t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(u(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(u(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,i=A(t,e);-1!==i&&(t.splice(i,1),this.touchAction.update())}return this},on:function(e,t){if(e!==n&&t!==n){var i=this.handlers;return h(x(e),function(e){i[e]=i[e]||[],i[e].push(t)}),this}},off:function(e,t){if(e!==n){var i=this.handlers;return h(x(e),function(e){t?i[e]&&i[e].splice(A(i[e],t),1):delete i[e]}),this}},emit:function(e,i){this.options.domEvents&&function(e,i){var n=t.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=i,i.target.dispatchEvent(n)}(e,i);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){i.type=e,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<n.length;)n[o](i),o++}},destroy:function(){this.element&&Fe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},o(Ne,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Se,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:L,DIRECTION_ALL:30,Manager:Le,Input:G,TouchAction:_e,TouchInput:ae,MouseInput:X,PointerEventInput:te,TouchMouseInput:ce,SingleTouchInput:ne,Recognizer:xe,AttrRecognizer:ke,Tap:Oe,Pan:De,Swipe:Ie,Pinch:Me,Rotate:Re,Press:Pe,on:w,off:C,each:h,merge:f,extend:g,assign:o,inherit:m,bindFn:v,prefixed:k}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=Ne,"function"==typeof define&&define.amd?define(function(){return Ne}):"undefined"!=typeof module&&module.exports?module.exports=Ne:e.Hammer=Ne}(window,document),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Chart=t()}(this,function(){"use strict";var e=Object.freeze({__proto__:null,get Colors(){return Ir},get Decimation(){return Lr},get Filler(){return Qr},get Legend(){return ns},get SubTitle(){return as},get Title(){return rs},get Tooltip(){return _s}});function t(){}const i=(()=>{let e=0;return()=>e++})();function n(e){return null==e}function o(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function r(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e){return("number"==typeof e||e instanceof Number)&&isFinite(+e)}function a(e,t){return s(e)?e:t}function l(e,t){return void 0===e?t:e}const c=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/t,d=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function u(e,t,i){if(e&&"function"==typeof e.call)return e.apply(i,t)}function h(e,t,i,n){let s,a,l;if(o(e))if(a=e.length,n)for(s=a-1;s>=0;s--)t.call(i,e[s],s);else for(s=0;s<a;s++)t.call(i,e[s],s);else if(r(e))for(l=Object.keys(e),a=l.length,s=0;s<a;s++)t.call(i,e[l[s]],l[s])}function p(e,t){let i,n,o,r;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(o=e[i],r=t[i],o.datasetIndex!==r.datasetIndex||o.index!==r.index)return!1;return!0}function g(e){if(o(e))return e.map(g);if(r(e)){const t=Object.create(null),i=Object.keys(e),n=i.length;let o=0;for(;o<n;++o)t[i[o]]=g(e[i[o]]);return t}return e}function f(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function m(e,t,i,n){if(!f(e))return;const o=t[e],s=i[e];r(o)&&r(s)?v(o,s,n):t[e]=g(s)}function v(e,t,i){const n=o(t)?t:[t],s=n.length;if(!r(e))return e;const a=(i=i||{}).merger||m;let l;for(let t=0;t<s;++t){if(l=n[t],!r(l))continue;const o=Object.keys(l);for(let t=0,n=o.length;t<n;++t)a(o[t],e,l,i)}return e}function b(e,t){return v(e,t,{merger:y})}function y(e,t,i){if(!f(e))return;const n=t[e],o=i[e];r(n)&&r(o)?b(n,o):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=g(o))}const w={"":e=>e,x:e=>e.x,y:e=>e.y};function C(e){const t=e.split("."),i=[];let n="";for(const e of t)n+=e,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function _(e,t){const i=w[t]||(w[t]=function(e){const t=C(e);return e=>{for(const i of t){if(""===i)break;e=e&&e[i]}return e}}(t));return i(e)}function S(e){return e.charAt(0).toUpperCase()+e.slice(1)}const x=e=>void 0!==e,A=e=>"function"==typeof e,E=(e,t)=>{if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0};function T(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}const k=Math.PI,D=2*k,M=D+k,P=Number.POSITIVE_INFINITY,R=k/180,I=k/2,O=k/4,N=2*k/3,L=Math.log10,F=Math.sign;function $(e,t,i){return Math.abs(e-t)<i}function G(e){const t=Math.round(e);e=$(e,t,e/1e3)?t:e;const i=Math.pow(10,Math.floor(L(e))),n=e/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function B(e){const t=[],i=Math.sqrt(e);let n;for(n=1;n<i;n++)e%n==0&&(t.push(n),t.push(e/n));return i===(0|i)&&t.push(i),t.sort((e,t)=>e-t).pop(),t}function H(e){return!isNaN(parseFloat(e))&&isFinite(e)}function z(e,t){const i=Math.round(e);return i-t<=e&&i+t>=e}function W(e,t,i){let n,o,r;for(n=0,o=e.length;n<o;n++)r=e[n][i],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function V(e){return e*(k/180)}function j(e){return e*(180/k)}function U(e){if(!s(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function Y(e,t){const i=t.x-e.x,n=t.y-e.y,o=Math.sqrt(i*i+n*n);let r=Math.atan2(n,i);return r<-.5*k&&(r+=D),{angle:r,distance:o}}function q(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function K(e,t){return(e-t+M)%D-k}function X(e){return(e%D+D)%D}function Z(e,t,i,n){const o=X(e),r=X(t),s=X(i),a=X(r-o),l=X(s-o),c=X(o-r),d=X(o-s);return o===r||o===s||n&&r===s||a>l&&c<d}function J(e,t,i){return Math.max(t,Math.min(i,e))}function Q(e){return J(e,-32768,32767)}function ee(e,t,i,n=1e-6){return e>=Math.min(t,i)-n&&e<=Math.max(t,i)+n}function te(e,t,i){i=i||(i=>e[i]<t);let n,o=e.length-1,r=0;for(;o-r>1;)n=r+o>>1,i(n)?r=n:o=n;return{lo:r,hi:o}}const ie=(e,t,i,n)=>te(e,i,n?n=>{const o=e[n][t];return o<i||o===i&&e[n+1][t]===i}:n=>e[n][t]<i),ne=(e,t,i)=>te(e,i,n=>e[n][t]>=i);function oe(e,t,i){let n=0,o=e.length;for(;n<o&&e[n]<t;)n++;for(;o>n&&e[o-1]>i;)o--;return n>0||o<e.length?e.slice(n,o):e}const re=["push","pop","shift","splice","unshift"];function se(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),re.forEach(t=>{const i="_onData"+S(t),n=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(...t){const o=n.apply(this,t);return e._chartjs.listeners.forEach(e=>{"function"==typeof e[i]&&e[i](...t)}),o}})}))}function ae(e,t){const i=e._chartjs;if(!i)return;const n=i.listeners,o=n.indexOf(t);-1!==o&&n.splice(o,1),n.length>0||(re.forEach(t=>{delete e[t]}),delete e._chartjs)}function le(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const ce="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function de(e,t){let i=[],n=!1;return function(...o){i=o,n||(n=!0,ce.call(window,()=>{n=!1,e.apply(t,i)}))}}function ue(e,t){let i;return function(...n){return t?(clearTimeout(i),i=setTimeout(e,t,n)):e.apply(this,n),t}}const he=e=>"start"===e?"left":"end"===e?"right":"center",pe=(e,t,i)=>"start"===e?t:"end"===e?i:(t+i)/2,ge=(e,t,i,n)=>e===(n?"left":"right")?i:"center"===e?(t+i)/2:t;function fe(e,t,i){const n=t.length;let o=0,r=n;if(e._sorted){const{iScale:s,_parsed:a}=e,l=s.axis,{min:c,max:d,minDefined:u,maxDefined:h}=s.getUserBounds();u&&(o=J(Math.min(ie(a,l,c).lo,i?n:ie(t,l,s.getPixelForValue(c)).lo),0,n-1)),r=h?J(Math.max(ie(a,s.axis,d,!0).hi+1,i?0:ie(t,l,s.getPixelForValue(d),!0).hi+1),o,n)-o:n-o}return{start:o,count:r}}function me(e){const{xScale:t,yScale:i,_scaleRanges:n}=e,o={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!n)return e._scaleRanges=o,!0;const r=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,o),r}var ve=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,n){const o=t.listeners[n],r=t.duration;o.forEach(n=>n({chart:e,initial:t.initial,numSteps:r,currentStep:Math.min(i-t.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=ce.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,n)=>{if(!i.running||!i.items.length)return;const o=i.items;let r,s=o.length-1,a=!1;for(;s>=0;--s)r=o[s],r._active?(r._total>i.duration&&(i.duration=r._total),r.tick(e),a=!0):(o[s]=o[o.length-1],o.pop());a&&(n.draw(),this._notify(n,i,e,"progress")),o.length||(i.running=!1,this._notify(n,i,e,"complete"),i.initial=!1),t+=o.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}};function be(e){return e+.5|0}const ye=(e,t,i)=>Math.max(Math.min(e,i),t);function we(e){return ye(be(2.55*e),0,255)}function Ce(e){return ye(be(255*e),0,255)}function _e(e){return ye(be(e/2.55)/100,0,1)}function Se(e){return ye(be(100*e),0,100)}const xe={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ae=[..."0123456789ABCDEF"],Ee=e=>Ae[15&e],Te=e=>Ae[(240&e)>>4]+Ae[15&e],ke=e=>(240&e)>>4==(15&e);const De=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Me(e,t,i){const n=t*Math.min(i,1-i),o=(t,o=(t+e/30)%12)=>i-n*Math.max(Math.min(o-3,9-o,1),-1);return[o(0),o(8),o(4)]}function Pe(e,t,i){const n=(n,o=(n+e/60)%6)=>i-i*t*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function Re(e,t,i){const n=Me(e,1,.5);let o;for(t+i>1&&(o=1/(t+i),t*=o,i*=o),o=0;o<3;o++)n[o]*=1-t-i,n[o]+=t;return n}function Ie(e){const t=e.r/255,i=e.g/255,n=e.b/255,o=Math.max(t,i,n),r=Math.min(t,i,n),s=(o+r)/2;let a,l,c;return o!==r&&(c=o-r,l=s>.5?c/(2-o-r):c/(o+r),a=function(e,t,i,n,o){return e===o?(t-i)/n+(t<i?6:0):t===o?(i-e)/n+2:(e-t)/n+4}(t,i,n,c,o),a=60*a+.5),[0|a,l||0,s]}function Oe(e,t,i,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,n)).map(Ce)}function Ne(e,t,i){return Oe(Me,e,t,i)}function Le(e){return(e%360+360)%360}const Fe={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},$e={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Ge;const Be=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,He=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,ze=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function We(e,t,i){if(e){let n=Ie(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*i,0===t?360:1)),n=Ne(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function Ve(e,t){return e?Object.assign(t||{},e):e}function je(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Ce(e[3]))):(t=Ve(e,{r:0,g:0,b:0,a:1})).a=Ce(t.a),t}function Ue(e){return"r"===e.charAt(0)?function(e){const t=Be.exec(e);let i,n,o,r=255;if(t){if(t[7]!==i){const e=+t[7];r=t[8]?we(e):ye(255*e,0,255)}return i=+t[1],n=+t[3],o=+t[5],i=255&(t[2]?we(i):ye(i,0,255)),n=255&(t[4]?we(n):ye(n,0,255)),o=255&(t[6]?we(o):ye(o,0,255)),{r:i,g:n,b:o,a:r}}}(e):function(e){const t=De.exec(e);let i,n=255;if(!t)return;t[5]!==i&&(n=t[6]?we(+t[5]):Ce(+t[5]));const o=Le(+t[2]),r=+t[3]/100,s=+t[4]/100;return i="hwb"===t[1]?function(e,t,i){return Oe(Re,e,t,i)}(o,r,s):"hsv"===t[1]?function(e,t,i){return Oe(Pe,e,t,i)}(o,r,s):Ne(o,r,s),{r:i[0],g:i[1],b:i[2],a:n}}(e)}class Ye{constructor(e){if(e instanceof Ye)return e;const t=typeof e;let i;var n,o,r;"object"===t?i=je(e):"string"===t&&(r=(n=e).length,"#"===n[0]&&(4===r||5===r?o={r:255&17*xe[n[1]],g:255&17*xe[n[2]],b:255&17*xe[n[3]],a:5===r?17*xe[n[4]]:255}:7!==r&&9!==r||(o={r:xe[n[1]]<<4|xe[n[2]],g:xe[n[3]]<<4|xe[n[4]],b:xe[n[5]]<<4|xe[n[6]],a:9===r?xe[n[7]]<<4|xe[n[8]]:255})),i=o||function(e){Ge||(Ge=function(){const e={},t=Object.keys($e),i=Object.keys(Fe);let n,o,r,s,a;for(n=0;n<t.length;n++){for(s=a=t[n],o=0;o<i.length;o++)r=i[o],a=a.replace(r,Fe[r]);r=parseInt($e[s],16),e[a]=[r>>16&255,r>>8&255,255&r]}return e}(),Ge.transparent=[0,0,0,0]);const t=Ge[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}(e)||Ue(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Ve(this._rgb);return e&&(e.a=_e(e.a)),e}set rgb(e){this._rgb=je(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${_e(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`):void 0;var e}hexString(){return this._valid?function(e){var t=(e=>ke(e.r)&&ke(e.g)&&ke(e.b)&&ke(e.a))(e)?Ee:Te;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Ie(e),i=t[0],n=Se(t[1]),o=Se(t[2]);return e.a<255?`hsla(${i}, ${n}%, ${o}%, ${_e(e.a)})`:`hsl(${i}, ${n}%, ${o}%)`}(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,n=e.rgb;let o;const r=t===o?.5:t,s=2*r-1,a=i.a-n.a,l=((s*a==-1?s:(s+a)/(1+s*a))+1)/2;o=1-l,i.r=255&l*i.r+o*n.r+.5,i.g=255&l*i.g+o*n.g+.5,i.b=255&l*i.b+o*n.b+.5,i.a=r*i.a+(1-r)*n.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,i){const n=ze(_e(e.r)),o=ze(_e(e.g)),r=ze(_e(e.b));return{r:Ce(He(n+i*(ze(_e(t.r))-n))),g:Ce(He(o+i*(ze(_e(t.g))-o))),b:Ce(He(r+i*(ze(_e(t.b))-r))),a:e.a+i*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Ye(this.rgb)}alpha(e){return this._rgb.a=Ce(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=be(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return We(this._rgb,2,e),this}darken(e){return We(this._rgb,2,-e),this}saturate(e){return We(this._rgb,1,e),this}desaturate(e){return We(this._rgb,1,-e),this}rotate(e){return function(e,t){var i=Ie(e);i[0]=Le(i[0]+t),i=Ne(i),e.r=i[0],e.g=i[1],e.b=i[2]}(this._rgb,e),this}}function qe(e){if(e&&"object"==typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Ke(e){return qe(e)?e:new Ye(e)}function Xe(e){return qe(e)?e:new Ye(e).saturate(.5).darken(.1).hexString()}const Ze=["x","y","borderWidth","radius","tension"],Je=["color","borderColor","backgroundColor"],Qe=new Map;function et(e,t,i){return function(e,t){t=t||{};const i=e+JSON.stringify(t);let n=Qe.get(i);return n||(n=new Intl.NumberFormat(e,t),Qe.set(i,n)),n}(t,i).format(e)}const tt={values:e=>o(e)?e:""+e,numeric(e,t,i){if(0===e)return"0";const n=this.chart.options.locale;let o,r=e;if(i.length>1){const t=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(t<1e-4||t>1e15)&&(o="scientific"),r=function(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e)),i}(e,i)}const s=L(Math.abs(r)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:o,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),et(e,n,l)},logarithmic(e,t,i){if(0===e)return"0";const n=i[t].significand||e/Math.pow(10,Math.floor(L(e)));return[1,2,3,5,10,15].includes(n)||t>.8*i.length?tt.numeric.call(this,e,t,i):""}};var it={formatters:tt};const nt=Object.create(null),ot=Object.create(null);function rt(e,t){if(!t)return e;const i=t.split(".");for(let t=0,n=i.length;t<n;++t){const n=i[t];e=e[n]||(e[n]=Object.create(null))}return e}function st(e,t,i){return"string"==typeof t?v(rt(e,t),i):v(rt(e,""),t)}var at=new class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Xe(t.backgroundColor),this.hoverBorderColor=(e,t)=>Xe(t.borderColor),this.hoverColor=(e,t)=>Xe(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return st(this,e,t)}get(e){return rt(this,e)}describe(e,t){return st(ot,e,t)}override(e,t){return st(nt,e,t)}route(e,t,i,n){const o=rt(this,e),s=rt(this,i),a="_"+t;Object.defineProperties(o,{[a]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=s[n];return r(e)?Object.assign({},t,e):l(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach(e=>e(this))}}({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Je},numbers:{type:"number",properties:Ze}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:it.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function lt(){return"undefined"!=typeof window&&"undefined"!=typeof document}function ct(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function dt(e,t,i){let n;return"string"==typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[i])):n=e,n}const ut=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function ht(e,t){return ut(e).getPropertyValue(t)}const pt=["top","right","bottom","left"];function gt(e,t,i){const n={};i=i?"-"+i:"";for(let o=0;o<4;o++){const r=pt[o];n[r]=parseFloat(e[t+"-"+r+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function ft(e,t){if("native"in e)return e;const{canvas:i,currentDevicePixelRatio:n}=t,o=ut(i),r="border-box"===o.boxSizing,s=gt(o,"padding"),a=gt(o,"border","width"),{x:l,y:c,box:d}=function(e,t){const i=e.touches,n=i&&i.length?i[0]:e,{offsetX:o,offsetY:r}=n;let s,a,l=!1;if(((e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot))(o,r,e.target))s=o,a=r;else{const e=t.getBoundingClientRect();s=n.clientX-e.left,a=n.clientY-e.top,l=!0}return{x:s,y:a,box:l}}(e,i),u=s.left+(d&&a.left),h=s.top+(d&&a.top);let{width:p,height:g}=t;return r&&(p-=s.width+a.width,g-=s.height+a.height),{x:Math.round((l-u)/p*i.width/n),y:Math.round((c-h)/g*i.height/n)}}const mt=e=>Math.round(10*e)/10;function vt(e,t,i,n){const o=ut(e),r=gt(o,"margin"),s=dt(o.maxWidth,e,"clientWidth")||P,a=dt(o.maxHeight,e,"clientHeight")||P,l=function(e,t,i){let n,o;if(void 0===t||void 0===i){const r=e&&ct(e);if(r){const e=r.getBoundingClientRect(),s=ut(r),a=gt(s,"border","width"),l=gt(s,"padding");t=e.width-l.width-a.width,i=e.height-l.height-a.height,n=dt(s.maxWidth,r,"clientWidth"),o=dt(s.maxHeight,r,"clientHeight")}else t=e.clientWidth,i=e.clientHeight}return{width:t,height:i,maxWidth:n||P,maxHeight:o||P}}(e,t,i);let{width:c,height:d}=l;if("content-box"===o.boxSizing){const e=gt(o,"border","width"),t=gt(o,"padding");c-=t.width+e.width,d-=t.height+e.height}return c=Math.max(0,c-r.width),d=Math.max(0,n?c/n:d-r.height),c=mt(Math.min(c,s,l.maxWidth)),d=mt(Math.min(d,a,l.maxHeight)),c&&!d&&(d=mt(c/2)),(void 0!==t||void 0!==i)&&n&&l.height&&d>l.height&&(d=l.height,c=mt(Math.floor(d*n))),{width:c,height:d}}function bt(e,t,i){const n=t||1,o=Math.floor(e.height*n),r=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const s=e.canvas;return s.style&&(i||!s.style.height&&!s.style.width)&&(s.style.height=`${e.height}px`,s.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==n||s.height!==o||s.width!==r)&&(e.currentDevicePixelRatio=n,s.height=o,s.width=r,e.ctx.setTransform(n,0,0,n,0,0),!0)}const yt=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};lt()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(e){}return e}();function wt(e,t){const i=ht(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Ct(e){return!e||n(e.size)||n(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function _t(e,t,i,n,o){let r=t[o];return r||(r=t[o]=e.measureText(o).width,i.push(o)),r>n&&(n=r),n}function St(e,t,i,n){let r=(n=n||{}).data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(r=n.data={},s=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let a=0;const l=i.length;let c,d,u,h,p;for(c=0;c<l;c++)if(h=i[c],null==h||o(h)){if(o(h))for(d=0,u=h.length;d<u;d++)p=h[d],null==p||o(p)||(a=_t(e,r,s,a,p))}else a=_t(e,r,s,a,h);e.restore();const g=s.length/2;if(g>i.length){for(c=0;c<g;c++)delete r[s[c]];s.splice(0,g)}return a}function xt(e,t,i){const n=e.currentDevicePixelRatio,o=0!==i?Math.max(i/2,.5):0;return Math.round((t-o)*n)/n+o}function At(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Et(e,t,i,n){Tt(e,t,i,n,null)}function Tt(e,t,i,n,o){let r,s,a,l,c,d,u,h;const p=t.pointStyle,g=t.rotation,f=t.radius;let m=(g||0)*R;if(p&&"object"==typeof p&&(r=p.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return e.save(),e.translate(i,n),e.rotate(m),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void e.restore();if(!(isNaN(f)||f<=0)){switch(e.beginPath(),p){default:o?e.ellipse(i,n,o/2,f,0,0,D):e.arc(i,n,f,0,D),e.closePath();break;case"triangle":d=o?o/2:f,e.moveTo(i+Math.sin(m)*d,n-Math.cos(m)*f),m+=N,e.lineTo(i+Math.sin(m)*d,n-Math.cos(m)*f),m+=N,e.lineTo(i+Math.sin(m)*d,n-Math.cos(m)*f),e.closePath();break;case"rectRounded":c=.516*f,l=f-c,s=Math.cos(m+O)*l,u=Math.cos(m+O)*(o?o/2-c:l),a=Math.sin(m+O)*l,h=Math.sin(m+O)*(o?o/2-c:l),e.arc(i-u,n-a,c,m-k,m-I),e.arc(i+h,n-s,c,m-I,m),e.arc(i+u,n+a,c,m,m+I),e.arc(i-h,n+s,c,m+I,m+k),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*f,d=o?o/2:l,e.rect(i-d,n-l,2*d,2*l);break}m+=O;case"rectRot":u=Math.cos(m)*(o?o/2:f),s=Math.cos(m)*f,a=Math.sin(m)*f,h=Math.sin(m)*(o?o/2:f),e.moveTo(i-u,n-a),e.lineTo(i+h,n-s),e.lineTo(i+u,n+a),e.lineTo(i-h,n+s),e.closePath();break;case"crossRot":m+=O;case"cross":u=Math.cos(m)*(o?o/2:f),s=Math.cos(m)*f,a=Math.sin(m)*f,h=Math.sin(m)*(o?o/2:f),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+h,n-s),e.lineTo(i-h,n+s);break;case"star":u=Math.cos(m)*(o?o/2:f),s=Math.cos(m)*f,a=Math.sin(m)*f,h=Math.sin(m)*(o?o/2:f),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+h,n-s),e.lineTo(i-h,n+s),m+=O,u=Math.cos(m)*(o?o/2:f),s=Math.cos(m)*f,a=Math.sin(m)*f,h=Math.sin(m)*(o?o/2:f),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+h,n-s),e.lineTo(i-h,n+s);break;case"line":s=o?o/2:Math.cos(m)*f,a=Math.sin(m)*f,e.moveTo(i-s,n-a),e.lineTo(i+s,n+a);break;case"dash":e.moveTo(i,n),e.lineTo(i+Math.cos(m)*(o?o/2:f),n+Math.sin(m)*f);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function kt(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function Dt(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Mt(e){e.restore()}function Pt(e,t,i,n,o){if(!t)return e.lineTo(i.x,i.y);if("middle"===o){const n=(t.x+i.x)/2;e.lineTo(n,t.y),e.lineTo(n,i.y)}else"after"===o!=!!n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function Rt(e,t,i,n){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function It(e,t,i,n,o){if(o.strikethrough||o.underline){const r=e.measureText(n),s=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=i-r.actualBoundingBoxAscent,c=i+r.actualBoundingBoxDescent,d=o.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=o.decorationWidth||2,e.moveTo(s,d),e.lineTo(a,d),e.stroke()}}function Ot(e,t){const i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function Nt(e,t,i,r,s,a={}){const l=o(t)?t:[t],c=a.strokeWidth>0&&""!==a.strokeColor;let d,u;for(e.save(),e.font=s.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),n(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,a),d=0;d<l.length;++d)u=l[d],a.backdrop&&Ot(e,a.backdrop),c&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),n(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(u,i,r,a.maxWidth)),e.fillText(u,i,r,a.maxWidth),It(e,i,r,u,a),r+=Number(s.lineHeight);e.restore()}function Lt(e,t){const{x:i,y:n,w:o,h:r,radius:s}=t;e.arc(i+s.topLeft,n+s.topLeft,s.topLeft,1.5*k,k,!0),e.lineTo(i,n+r-s.bottomLeft),e.arc(i+s.bottomLeft,n+r-s.bottomLeft,s.bottomLeft,k,I,!0),e.lineTo(i+o-s.bottomRight,n+r),e.arc(i+o-s.bottomRight,n+r-s.bottomRight,s.bottomRight,I,0,!0),e.lineTo(i+o,n+s.topRight),e.arc(i+o-s.topRight,n+s.topRight,s.topRight,0,-I,!0),e.lineTo(i+s.topLeft,n)}function Ft(e,t=[""],i,n,o=()=>e[0]){const r=i||e;void 0===n&&(n=qt("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:o,override:i=>Ft([i,...e],t,r,n)};return new Proxy(s,{deleteProperty:(t,i)=>(delete t[i],delete t._keys,delete e[0][i],!0),get:(i,n)=>zt(i,n,()=>function(e,t,i,n){let o;for(const r of t)if(o=qt(Bt(r,e),i),void 0!==o)return Ht(e,o)?Ut(i,n,e,o):o}(n,t,e,i)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Kt(e).includes(t),ownKeys:e=>Kt(e),set(e,t,i){const n=e._storage||(e._storage=o());return e[t]=n[t]=i,delete e._keys,!0}})}function $t(e,t,i,n){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:Gt(e,n),setContext:t=>$t(e,t,i,n),override:o=>$t(e.override(o),t,i,n)};return new Proxy(s,{deleteProperty:(t,i)=>(delete t[i],delete e[i],!0),get:(e,t,i)=>zt(e,t,()=>function(e,t,i){const{_proxy:n,_context:s,_subProxy:a,_descriptors:l}=e;let c=n[t];return A(c)&&l.isScriptable(t)&&(c=function(e,t,i,n){const{_proxy:o,_context:r,_subProxy:s,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,s||n);return a.delete(e),Ht(e,l)&&(l=Ut(o._scopes,o,e,l)),l}(t,c,e,i)),o(c)&&c.length&&(c=function(e,t,i,n){const{_proxy:o,_context:s,_subProxy:a,_descriptors:l}=i;if(void 0!==s.index&&n(e))return t[s.index%t.length];if(r(t[0])){const i=t,n=o._scopes.filter(e=>e!==i);t=[];for(const r of i){const i=Ut(n,o,e,r);t.push($t(i,s,a&&a[e],l))}}return t}(t,c,e,l.isIndexable)),Ht(t,c)&&(c=$t(c,s,a&&a[t],l)),c}(e,t,i)),getOwnPropertyDescriptor:(t,i)=>t._descriptors.allKeys?Reflect.has(e,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,i),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,i)=>Reflect.has(e,i),ownKeys:()=>Reflect.ownKeys(e),set:(t,i,n)=>(e[i]=n,delete t[i],!0)})}function Gt(e,t={scriptable:!0,indexable:!0}){const{_scriptable:i=t.scriptable,_indexable:n=t.indexable,_allKeys:o=t.allKeys}=e;return{allKeys:o,scriptable:i,indexable:n,isScriptable:A(i)?i:()=>i,isIndexable:A(n)?n:()=>n}}const Bt=(e,t)=>e?e+S(t):t,Ht=(e,t)=>r(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function zt(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const n=i();return e[t]=n,n}function Wt(e,t,i){return A(e)?e(t,i):e}const Vt=(e,t)=>!0===e?t:"string"==typeof e?_(t,e):void 0;function jt(e,t,i,n,o){for(const r of t){const t=Vt(i,r);if(t){e.add(t);const r=Wt(t._fallback,i,o);if(void 0!==r&&r!==i&&r!==n)return r}else if(!1===t&&void 0!==n&&i!==n)return null}return!1}function Ut(e,t,i,n){const s=t._rootScopes,a=Wt(t._fallback,i,n),l=[...e,...s],c=new Set;c.add(n);let d=Yt(c,l,i,a||i,n);return null!==d&&(void 0===a||a===i||(d=Yt(c,l,a,d,n),null!==d))&&Ft(Array.from(c),[""],s,a,()=>function(e,t,i){const n=e._getTarget();t in n||(n[t]={});const s=n[t];return o(s)&&r(i)?i:s||{}}(t,i,n))}function Yt(e,t,i,n,o){for(;i;)i=jt(e,t,i,n,o);return i}function qt(e,t){for(const i of t){if(!i)continue;const t=i[e];if(void 0!==t)return t}}function Kt(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const i of e)for(const e of Object.keys(i).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function Xt(e,t,i,n){const{iScale:o}=e,{key:r="r"}=this._parsing,s=new Array(n);let a,l,c,d;for(a=0,l=n;a<l;++a)c=a+i,d=t[c],s[a]={r:o.parse(_(d,r),c)};return s}const Zt=Number.EPSILON||1e-14,Jt=(e,t)=>t<e.length&&!e[t].skip&&e[t],Qt=e=>"x"===e?"y":"x";function ei(e,t,i,n){const o=e.skip?t:e,r=t,s=i.skip?t:i,a=q(r,o),l=q(s,r);let c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=n*c,h=n*d;return{previous:{x:r.x-u*(s.x-o.x),y:r.y-u*(s.y-o.y)},next:{x:r.x+h*(s.x-o.x),y:r.y+h*(s.y-o.y)}}}function ti(e,t="x"){const i=Qt(t),n=e.length,o=Array(n).fill(0),r=Array(n);let s,a,l,c=Jt(e,0);for(s=0;s<n;++s)if(a=l,l=c,c=Jt(e,s+1),l){if(c){const e=c[t]-l[t];o[s]=0!==e?(c[i]-l[i])/e:0}r[s]=a?c?F(o[s-1])!==F(o[s])?0:(o[s-1]+o[s])/2:o[s-1]:o[s]}!function(e,t,i){const n=e.length;let o,r,s,a,l,c=Jt(e,0);for(let d=0;d<n-1;++d)l=c,c=Jt(e,d+1),l&&c&&($(t[d],0,Zt)?i[d]=i[d+1]=0:(o=i[d]/t[d],r=i[d+1]/t[d],a=Math.pow(o,2)+Math.pow(r,2),a<=9||(s=3/Math.sqrt(a),i[d]=o*s*t[d],i[d+1]=r*s*t[d])))}(e,o,r),function(e,t,i="x"){const n=Qt(i),o=e.length;let r,s,a,l=Jt(e,0);for(let c=0;c<o;++c){if(s=a,a=l,l=Jt(e,c+1),!a)continue;const o=a[i],d=a[n];s&&(r=(o-s[i])/3,a[`cp1${i}`]=o-r,a[`cp1${n}`]=d-r*t[c]),l&&(r=(l[i]-o)/3,a[`cp2${i}`]=o+r,a[`cp2${n}`]=d+r*t[c])}}(e,r,t)}function ii(e,t,i){return Math.max(Math.min(e,i),t)}function ni(e,t,i,n,o){let r,s,a,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)ti(e,o);else{let i=n?e[e.length-1]:e[0];for(r=0,s=e.length;r<s;++r)a=e[r],l=ei(i,a,e[Math.min(r+1,s-(n?0:1))%s],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,i=a}t.capBezierPoints&&function(e,t){let i,n,o,r,s,a=kt(e[0],t);for(i=0,n=e.length;i<n;++i)s=r,r=a,a=i<n-1&&kt(e[i+1],t),r&&(o=e[i],s&&(o.cp1x=ii(o.cp1x,t.left,t.right),o.cp1y=ii(o.cp1y,t.top,t.bottom)),a&&(o.cp2x=ii(o.cp2x,t.left,t.right),o.cp2y=ii(o.cp2y,t.top,t.bottom)))}(e,i)}const oi=e=>0===e||1===e,ri=(e,t,i)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*D/i),si=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*D/i)+1,ai={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*I),easeOutSine:e=>Math.sin(e*I),easeInOutSine:e=>-.5*(Math.cos(k*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>oi(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>oi(e)?e:ri(e,.075,.3),easeOutElastic:e=>oi(e)?e:si(e,.075,.3),easeInOutElastic(e){const t=.1125;return oi(e)?e:e<.5?.5*ri(2*e,t,.45):.5+.5*si(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-ai.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,i=2.75;return e<1/i?t*e*e:e<2/i?t*(e-=1.5/i)*e+.75:e<2.5/i?t*(e-=2.25/i)*e+.9375:t*(e-=2.625/i)*e+.984375},easeInOutBounce:e=>e<.5?.5*ai.easeInBounce(2*e):.5*ai.easeOutBounce(2*e-1)+.5};function li(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function ci(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:"middle"===n?i<.5?e.y:t.y:"after"===n?i<1?e.y:t.y:i>0?t.y:e.y}}function di(e,t,i,n){const o={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},s=li(e,o,i),a=li(o,r,i),l=li(r,t,i),c=li(s,a,i),d=li(a,l,i);return li(c,d,i)}const ui=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,hi=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function pi(e,t){const i=(""+e).match(ui);if(!i||"normal"===i[1])return 1.2*t;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100}return t*e}const gi=e=>+e||0;function fi(e,t){const i={},n=r(t),o=n?Object.keys(t):t,s=r(e)?n?i=>l(e[i],e[t[i]]):t=>e[t]:()=>e;for(const e of o)i[e]=gi(s(e));return i}function mi(e){return fi(e,{top:"y",right:"x",bottom:"y",left:"x"})}function vi(e){return fi(e,["topLeft","topRight","bottomLeft","bottomRight"])}function bi(e){const t=mi(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function yi(e,t){e=e||{},t=t||at.font;let i=l(e.size,t.size);"string"==typeof i&&(i=parseInt(i,10));let n=l(e.style,t.style);n&&!(""+n).match(hi)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const o={family:l(e.family,t.family),lineHeight:pi(l(e.lineHeight,t.lineHeight),i),size:i,style:n,weight:l(e.weight,t.weight),string:""};return o.string=Ct(o),o}function wi(e,t,i,n){let r,s,a,l=!0;for(r=0,s=e.length;r<s;++r)if(a=e[r],void 0!==a&&(void 0!==t&&"function"==typeof a&&(a=a(t),l=!1),void 0!==i&&o(a)&&(a=a[i%a.length],l=!1),void 0!==a))return n&&!l&&(n.cacheable=!1),a}function Ci(e,t,i){const{min:n,max:o}=e,r=d(t,(o-n)/2),s=(e,t)=>i&&0===e?0:e+t;return{min:s(n,-Math.abs(r)),max:s(o,r)}}function _i(e,t){return Object.assign(Object.create(e),t)}function Si(e,t,i){return e?function(e,t){return{x:i=>e+e+t-i,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,i):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function xi(e,t){let i,n;"ltr"!==t&&"rtl"!==t||(i=e.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=n)}function Ai(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Ei(e){return"angle"===e?{between:Z,compare:K,normalize:X}:{between:ee,compare:(e,t)=>e-t,normalize:e=>e}}function Ti({start:e,end:t,count:i,loop:n,style:o}){return{start:e%i,end:t%i,loop:n&&(t-e+1)%i==0,style:o}}function ki(e,t,i){if(!i)return[e];const{property:n,start:o,end:r}=i,s=t.length,{compare:a,between:l,normalize:c}=Ei(n),{start:d,end:u,loop:h,style:p}=function(e,t,i){const{property:n,start:o,end:r}=i,{between:s,normalize:a}=Ei(n),l=t.length;let c,d,{start:u,end:h,loop:p}=e;if(p){for(u+=l,h+=l,c=0,d=l;c<d&&s(a(t[u%l][n]),o,r);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:p,style:e.style}}(e,t,i),g=[];let f,m,v,b=!1,y=null;const w=()=>b||l(o,v,f)&&0!==a(o,v),C=()=>!b||0===a(r,f)||l(r,v,f);for(let e=d,i=d;e<=u;++e)m=t[e%s],m.skip||(f=c(m[n]),f!==v&&(b=l(f,o,r),null===y&&w()&&(y=0===a(f,o)?e:i),null!==y&&C()&&(g.push(Ti({start:y,end:e,loop:h,count:s,style:p})),y=null),i=e,v=f));return null!==y&&g.push(Ti({start:y,end:u,loop:h,count:s,style:p})),g}function Di(e,t){const i=[],n=e.segments;for(let o=0;o<n.length;o++){const r=ki(n[o],e.points,t);r.length&&i.push(...r)}return i}function Mi(e,t){const i=e.points,n=e.options.spanGaps,o=i.length;if(!o)return[];const r=!!e._loop,{start:s,end:a}=function(e,t,i,n){let o=0,r=t-1;if(i&&!n)for(;o<t&&!e[o].skip;)o++;for(;o<t&&e[o].skip;)o++;for(o%=t,i&&(r+=o);r>o&&e[r%t].skip;)r--;return r%=t,{start:o,end:r}}(i,o,r,n);return Pi(e,!0===n?[{start:s,end:a,loop:r}]:function(e,t,i,n){const o=e.length,r=[];let s,a=t,l=e[t];for(s=t+1;s<=i;++s){const i=e[s%o];i.skip||i.stop?l.skip||(n=!1,r.push({start:t%o,end:(s-1)%o,loop:n}),t=a=i.stop?s:null):(a=s,l.skip&&(t=s)),l=i}return null!==a&&r.push({start:t%o,end:a%o,loop:n}),r}(i,s,a<s?a+o:a,!!e._fullLoop&&0===s&&a===o-1),i,t)}function Pi(e,t,i,n){return n&&n.setContext&&i?function(e,t,i,n){const o=e._chart.getContext(),r=Ri(e.options),{_datasetIndex:s,options:{spanGaps:a}}=e,l=i.length,c=[];let d=r,u=t[0].start,h=u;function p(e,t,n,o){const r=a?-1:1;if(e!==t){for(e+=l;i[e%l].skip;)e-=r;for(;i[t%l].skip;)t+=r;e%l!=t%l&&(c.push({start:e%l,end:t%l,loop:n,style:o}),d=o,u=t%l)}}for(const e of t){u=a?u:e.start;let t,r=i[u%l];for(h=u+1;h<=e.end;h++){const a=i[h%l];t=Ri(n.setContext(_i(o,{type:"segment",p0:r,p1:a,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),Ii(t,d)&&p(u,h-1,e.loop,d),r=a,d=t}u<h-1&&p(u,h-1,e.loop,d)}return c}(e,t,i,n):t}function Ri(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Ii(e,t){if(!t)return!1;const i=[],n=function(e,t){return qe(t)?(i.includes(t)||i.push(t),i.indexOf(t)):t};return JSON.stringify(e,n)!==JSON.stringify(t,n)}var Oi=Object.freeze({__proto__:null,HALF_PI:I,INFINITY:P,PI:k,PITAU:M,QUARTER_PI:O,RAD_PER_DEG:R,TAU:D,TWO_THIRDS_PI:N,_addGrace:Ci,_alignPixel:xt,_alignStartEnd:pe,_angleBetween:Z,_angleDiff:K,_arrayUnique:le,_attachContext:$t,_bezierCurveTo:Rt,_bezierInterpolation:di,_boundSegment:ki,_boundSegments:Di,_capitalize:S,_computeSegments:Mi,_createResolver:Ft,_decimalPlaces:U,_deprecated:function(e,t,i,n){void 0!==t&&console.warn(e+': "'+i+'" is deprecated. Please use "'+n+'" instead')},_descriptors:Gt,_elementsEqual:p,_factorize:B,_filterBetween:oe,_getParentNode:ct,_getStartAndCountOfVisiblePoints:fe,_int16Range:Q,_isBetween:ee,_isClickEvent:T,_isDomSupported:lt,_isPointInArea:kt,_limitValue:J,_longestText:St,_lookup:te,_lookupByKey:ie,_measureText:_t,_merger:m,_mergerIf:y,_normalizeAngle:X,_parseObjectDataRadialScale:Xt,_pointInLine:li,_readValueToProps:fi,_rlookupByKey:ne,_scaleRangesChanged:me,_setMinAndMaxByKey:W,_splitKey:C,_steppedInterpolation:ci,_steppedLineTo:Pt,_textX:ge,_toLeftRightCenter:he,_updateBezierControlPoints:ni,addRoundedRectPath:Lt,almostEquals:$,almostWhole:z,callback:u,clearCanvas:At,clipArea:Dt,clone:g,color:Ke,createContext:_i,debounce:ue,defined:x,distanceBetweenPoints:q,drawPoint:Et,drawPointLegend:Tt,each:h,easingEffects:ai,finiteOrDefault:a,fontString:function(e,t,i){return t+" "+e+"px "+i},formatNumber:et,getAngleFromPoint:Y,getHoverColor:Xe,getMaximumSize:vt,getRelativePosition:ft,getRtlAdapter:Si,getStyle:ht,isArray:o,isFinite:s,isFunction:A,isNullOrUndef:n,isNumber:H,isObject:r,isPatternOrGradient:qe,listenArrayEvents:se,log10:L,merge:v,mergeIf:b,niceNum:G,noop:t,overrideTextDirection:xi,readUsedSize:wt,renderText:Nt,requestAnimFrame:ce,resolve:wi,resolveObjectKey:_,restoreTextDirection:Ai,retinaScale:bt,setsEqual:E,sign:F,splineCurve:ei,splineCurveMonotone:ti,supportsEventListenerOptions:yt,throttled:de,toDegrees:j,toDimension:d,toFont:yi,toFontString:Ct,toLineHeight:pi,toPadding:bi,toPercentage:c,toRadians:V,toTRBL:mi,toTRBLCorners:vi,uid:i,unclipArea:Mt,unlistenArrayEvents:ae,valueOrDefault:l});function Ni(e,t,i,n){const{controller:o,data:r,_sorted:s}=e,a=o._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&s&&r.length){const e=a._reversePixels?ne:ie;if(!n)return e(r,t,i);if(o._sharedOptions){const n=r[0],o="function"==typeof n.getRange&&n.getRange(t);if(o){const n=e(r,t,i-o),s=e(r,t,i+o);return{lo:n.lo,hi:s.hi}}}}return{lo:0,hi:r.length-1}}function Li(e,t,i,n,o){const r=e.getSortedVisibleDatasetMetas(),s=i[t];for(let e=0,i=r.length;e<i;++e){const{index:i,data:a}=r[e],{lo:l,hi:c}=Ni(r[e],t,s,o);for(let e=l;e<=c;++e){const t=a[e];t.skip||n(t,i,e)}}}function Fi(e,t,i,n,o){const r=[];return o||e.isPointInArea(t)?(Li(e,i,t,function(i,s,a){(o||kt(i,e.chartArea,0))&&i.inRange(t.x,t.y,n)&&r.push({element:i,datasetIndex:s,index:a})},!0),r):r}function $i(e,t,i,n,o,r){return r||e.isPointInArea(t)?"r"!==i||n?function(e,t,i,n,o,r){let s=[];const a=function(e){const t=-1!==e.indexOf("x"),i=-1!==e.indexOf("y");return function(e,n){const o=t?Math.abs(e.x-n.x):0,r=i?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}(i);let l=Number.POSITIVE_INFINITY;return Li(e,i,t,function(i,c,d){const u=i.inRange(t.x,t.y,o);if(n&&!u)return;const h=i.getCenterPoint(o);if(!r&&!e.isPointInArea(h)&&!u)return;const p=a(t,h);p<l?(s=[{element:i,datasetIndex:c,index:d}],l=p):p===l&&s.push({element:i,datasetIndex:c,index:d})}),s}(e,t,i,n,o,r):function(e,t,i,n){let o=[];return Li(e,i,t,function(e,i,r){const{startAngle:s,endAngle:a}=e.getProps(["startAngle","endAngle"],n),{angle:l}=Y(e,{x:t.x,y:t.y});Z(l,s,a)&&o.push({element:e,datasetIndex:i,index:r})}),o}(e,t,i,o):[]}function Gi(e,t,i,n,o){const r=[],s="x"===i?"inXRange":"inYRange";let a=!1;return Li(e,i,t,(e,n,l)=>{e[s]&&e[s](t[i],o)&&(r.push({element:e,datasetIndex:n,index:l}),a=a||e.inRange(t.x,t.y,o))}),n&&!a?[]:r}var Bi={evaluateInteractionItems:Li,modes:{index(e,t,i,n){const o=ft(t,e),r=i.axis||"x",s=i.includeInvisible||!1,a=i.intersect?Fi(e,o,r,n,s):$i(e,o,r,!1,n,s),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=a[0].index,i=e.data[t];i&&!i.skip&&l.push({element:i,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,i,n){const o=ft(t,e),r=i.axis||"xy",s=i.includeInvisible||!1;let a=i.intersect?Fi(e,o,r,n,s):$i(e,o,r,!1,n,s);if(a.length>0){const t=a[0].datasetIndex,i=e.getDatasetMeta(t).data;a=[];for(let e=0;e<i.length;++e)a.push({element:i[e],datasetIndex:t,index:e})}return a},point:(e,t,i,n)=>Fi(e,ft(t,e),i.axis||"xy",n,i.includeInvisible||!1),nearest(e,t,i,n){const o=ft(t,e),r=i.axis||"xy",s=i.includeInvisible||!1;return $i(e,o,r,i.intersect,n,s)},x:(e,t,i,n)=>Gi(e,ft(t,e),"x",i.intersect,n),y:(e,t,i,n)=>Gi(e,ft(t,e),"y",i.intersect,n)}};const Hi=["left","top","right","bottom"];function zi(e,t){return e.filter(e=>e.pos===t)}function Wi(e,t){return e.filter(e=>-1===Hi.indexOf(e.pos)&&e.box.axis===t)}function Vi(e,t){return e.sort((e,i)=>{const n=t?i:e,o=t?e:i;return n.weight===o.weight?n.index-o.index:n.weight-o.weight})}function ji(e,t,i,n){return Math.max(e[i],t[i])+Math.max(e[n],t[n])}function Ui(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Yi(e,t,i,n){const{pos:o,box:s}=i,a=e.maxPadding;if(!r(o)){i.size&&(e[o]-=i.size);const t=n[i.stack]||{size:0,count:1};t.size=Math.max(t.size,i.horizontal?s.height:s.width),i.size=t.size/t.count,e[o]+=i.size}s.getPadding&&Ui(a,s.getPadding());const l=Math.max(0,t.outerWidth-ji(a,e,"left","right")),c=Math.max(0,t.outerHeight-ji(a,e,"top","bottom")),d=l!==e.w,u=c!==e.h;return e.w=l,e.h=c,i.horizontal?{same:d,other:u}:{same:u,other:d}}function qi(e,t){const i=t.maxPadding;return function(e){const n={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{n[e]=Math.max(t[e],i[e])}),n}(e?["left","right"]:["top","bottom"])}function Ki(e,t,i,n){const o=[];let r,s,a,l,c,d;for(r=0,s=e.length,c=0;r<s;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,qi(a.horizontal,t));const{same:s,other:u}=Yi(t,i,a,n);c|=s&&o.length,d=d||u,l.fullSize||o.push(a)}return c&&Ki(o,t,i,n)||d}function Xi(e,t,i,n,o){e.top=i,e.left=t,e.right=t+n,e.bottom=i+o,e.width=n,e.height=o}function Zi(e,t,i,n){const o=i.padding;let{x:r,y:s}=t;for(const a of e){const e=a.box,l=n[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const n=t.w*c,r=l.size||e.height;x(l.start)&&(s=l.start),e.fullSize?Xi(e,o.left,s,i.outerWidth-o.right-o.left,r):Xi(e,t.left+l.placed,s,n,r),l.start=s,l.placed+=n,s=e.bottom}else{const n=t.h*c,s=l.size||e.width;x(l.start)&&(r=l.start),e.fullSize?Xi(e,r,o.top,s,i.outerHeight-o.bottom-o.top):Xi(e,r,t.top+l.placed,s,n),l.start=r,l.placed+=n,r=e.right}}t.x=r,t.y=s}var Ji={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const i=e.boxes?e.boxes.indexOf(t):-1;-1!==i&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,n){if(!e)return;const o=bi(e.options.layout.padding),r=Math.max(t-o.width,0),s=Math.max(i-o.height,0),a=function(e){const t=function(e){const t=[];let i,n,o,r,s,a;for(i=0,n=(e||[]).length;i<n;++i)o=e[i],({position:r,options:{stack:s,stackWeight:a=1}}=o),t.push({index:i,box:o,pos:r,horizontal:o.isHorizontal(),weight:o.weight,stack:s&&r+s,stackWeight:a});return t}(e),i=Vi(t.filter(e=>e.box.fullSize),!0),n=Vi(zi(t,"left"),!0),o=Vi(zi(t,"right")),r=Vi(zi(t,"top"),!0),s=Vi(zi(t,"bottom")),a=Wi(t,"x"),l=Wi(t,"y");return{fullSize:i,leftAndTop:n.concat(r),rightAndBottom:o.concat(l).concat(s).concat(a),chartArea:zi(t,"chartArea"),vertical:n.concat(o).concat(l),horizontal:r.concat(s).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;h(e.boxes,e=>{"function"==typeof e.beforeLayout&&e.beforeLayout()});const d=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:i,padding:o,availableWidth:r,availableHeight:s,vBoxMaxWidth:r/2/d,hBoxMaxHeight:s/2}),p=Object.assign({},o);Ui(p,bi(n));const g=Object.assign({maxPadding:p,w:r,h:s,x:o.left,y:o.top},o),f=function(e,t){const i=function(e){const t={};for(const i of e){const{stack:e,pos:n,stackWeight:o}=i;if(!e||!Hi.includes(n))continue;const r=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}(e),{vBoxMaxWidth:n,hBoxMaxHeight:o}=t;let r,s,a;for(r=0,s=e.length;r<s;++r){a=e[r];const{fullSize:s}=a.box,l=i[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*n:s&&t.availableWidth,a.height=o):(a.width=n,a.height=c?c*o:s&&t.availableHeight)}return i}(l.concat(c),u);Ki(a.fullSize,g,u,f),Ki(l,g,u,f),Ki(c,g,u,f)&&Ki(l,g,u,f),function(e){const t=e.maxPadding;function i(i){const n=Math.max(t[i]-e[i],0);return e[i]+=n,n}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}(g),Zi(a.leftAndTop,g,u,f),g.x+=g.w,g.y+=g.h,Zi(a.rightAndBottom,g,u,f),e.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},h(a.chartArea,t=>{const i=t.box;Object.assign(i,e.chartArea),i.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class Qi{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,n){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):i)}}isAttached(e){return!0}updateConfig(e){}}class en extends Qi{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const tn="$chartjs",nn={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},on=e=>null===e||""===e,rn=!!yt&&{passive:!0};function sn(e,t,i){e&&e.canvas&&e.canvas.removeEventListener(t,i,rn)}function an(e,t){for(const i of e)if(i===t||i.contains(t))return!0}function ln(e,t,i){const n=e.canvas,o=new MutationObserver(e=>{let t=!1;for(const i of e)t=t||an(i.addedNodes,n),t=t&&!an(i.removedNodes,n);t&&i()});return o.observe(document,{childList:!0,subtree:!0}),o}function cn(e,t,i){const n=e.canvas,o=new MutationObserver(e=>{let t=!1;for(const i of e)t=t||an(i.removedNodes,n),t=t&&!an(i.addedNodes,n);t&&i()});return o.observe(document,{childList:!0,subtree:!0}),o}const dn=new Map;let un=0;function hn(){const e=window.devicePixelRatio;e!==un&&(un=e,dn.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function pn(e,t,i){const n=e.canvas,o=n&&ct(n);if(!o)return;const r=de((e,t)=>{const n=o.clientWidth;i(e,t),n<o.clientWidth&&i()},window),s=new ResizeObserver(e=>{const t=e[0],i=t.contentRect.width,n=t.contentRect.height;0===i&&0===n||r(i,n)});return s.observe(o),function(e,t){dn.size||window.addEventListener("resize",hn),dn.set(e,t)}(e,r),s}function gn(e,t,i){i&&i.disconnect(),"resize"===t&&function(e){dn.delete(e),dn.size||window.removeEventListener("resize",hn)}(e)}function fn(e,t,i){const n=e.canvas,o=de(t=>{null!==e.ctx&&i(function(e,t){const i=nn[e.type]||e.type,{x:n,y:o}=ft(e,t);return{type:i,chart:t,native:e,x:void 0!==n?n:null,y:void 0!==o?o:null}}(t,e))},e);return function(e,t,i){e&&e.addEventListener(t,i,rn)}(n,t,o),o}class mn extends Qi{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(function(e,t){const i=e.style,n=e.getAttribute("height"),o=e.getAttribute("width");if(e[tn]={initial:{height:n,width:o,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",on(o)){const t=wt(e,"width");void 0!==t&&(e.width=t)}if(on(n))if(""===e.style.height)e.height=e.width/(t||2);else{const t=wt(e,"height");void 0!==t&&(e.height=t)}}(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[tn])return!1;const i=t[tn].initial;["height","width"].forEach(e=>{const o=i[e];n(o)?t.removeAttribute(e):t.setAttribute(e,o)});const o=i.style||{};return Object.keys(o).forEach(e=>{t.style[e]=o[e]}),t.width=t.width,delete t[tn],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),o={attach:ln,detach:cn,resize:pn}[t]||fn;n[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),n=i[t];n&&(({attach:gn,detach:gn,resize:gn}[t]||sn)(e,t,n),i[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,n){return vt(e,t,i,n)}isAttached(e){const t=e&&ct(e);return!(!t||!t.isConnected)}}function vn(e){return!lt()||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?en:mn}var bn=Object.freeze({__proto__:null,BasePlatform:Qi,BasicPlatform:en,DomPlatform:mn,_detectPlatform:vn});const yn="transparent",wn={boolean:(e,t,i)=>i>.5?t:e,color(e,t,i){const n=Ke(e||yn),o=n.valid&&Ke(t||yn);return o&&o.valid?o.mix(n,i).hexString():t},number:(e,t,i)=>e+(t-e)*i};class Cn{constructor(e,t,i,n){const o=t[i];n=wi([e.to,n,o,e.from]);const r=wi([e.from,o,n]);this._active=!0,this._fn=e.fn||wn[e.type||typeof r],this._easing=ai[e.easing]||ai.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=r,this._to=n,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const n=this._target[this._prop],o=i-this._start,r=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=wi([e.to,t,n,e.from]),this._from=wi([e.from,n,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,n=this._prop,o=this._from,r=this._loop,s=this._to;let a;if(this._active=o!==s&&(r||t<i),!this._active)return this._target[n]=s,void this._notify(!0);t<0?this._target[n]=o:(a=t/i%2,a=r&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[n]=this._fn(o,s,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let e=0;e<i.length;e++)i[e][t]()}}class _n{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!r(e))return;const t=Object.keys(at.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const s=e[n];if(!r(s))return;const a={};for(const e of t)a[e]=s[e];(o(s.properties)&&s.properties||[n]).forEach(e=>{e!==n&&i.has(e)||i.set(e,a)})})}_animateOptions(e,t){const i=t.options,n=function(e,t){if(!t)return;let i=e.options;if(i)return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i;e.options=t}(e,i);if(!n)return[];const o=this._createAnimations(n,i);return i.$shared&&function(e,t){const i=[],n=Object.keys(t);for(let t=0;t<n.length;t++){const o=e[n[t]];o&&o.active()&&i.push(o.wait())}return Promise.all(i)}(e.options.$animations,i).then(()=>{e.options=i},()=>{}),o}_createAnimations(e,t){const i=this._properties,n=[],o=e.$animations||(e.$animations={}),r=Object.keys(t),s=Date.now();let a;for(a=r.length-1;a>=0;--a){const l=r[a];if("$"===l.charAt(0))continue;if("options"===l){n.push(...this._animateOptions(e,t));continue}const c=t[l];let d=o[l];const u=i.get(l);if(d){if(u&&d.active()){d.update(u,c,s);continue}d.cancel()}u&&u.duration?(o[l]=d=new Cn(u,e,l,c),n.push(d)):e[l]=c}return n}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const i=this._createAnimations(e,t);return i.length?(ve.add(this._chart,i),!0):void 0}}function Sn(e,t){const i=e&&e.options||{},n=i.reverse,o=void 0===i.min?t:0,r=void 0===i.max?t:0;return{start:n?r:o,end:n?o:r}}function xn(e,t){const i=[],n=e._getSortedDatasetMetas(t);let o,r;for(o=0,r=n.length;o<r;++o)i.push(n[o].index);return i}function An(e,t,i,n={}){const o=e.keys,r="single"===n.mode;let a,l,c,d;if(null===t)return;let u=!1;for(a=0,l=o.length;a<l;++a){if(c=+o[a],c===i){if(u=!0,n.all)continue;break}d=e.values[c],s(d)&&(r||0===t||F(t)===F(d))&&(t+=d)}return u||n.all?t:0}function En(e,t){const i=e&&e.options.stacked;return i||void 0===i&&void 0!==t.stack}function Tn(e,t,i){const n=e[t]||(e[t]={});return n[i]||(n[i]={})}function kn(e,t,i,n){for(const o of t.getMatchingVisibleMetas(n).reverse()){const t=e[o.index];if(i&&t>0||!i&&t<0)return o.index}return null}function Dn(e,t){const{chart:i,_cachedMeta:n}=e,o=i._stacks||(i._stacks={}),{iScale:r,vScale:s,index:a}=n,l=r.axis,c=s.axis,d=function(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}(r,s,n),u=t.length;let h;for(let e=0;e<u;++e){const i=t[e],{[l]:r,[c]:u}=i;h=(i._stacks||(i._stacks={}))[c]=Tn(o,d,r),h[a]=u,h._top=kn(h,s,!0,n.type),h._bottom=kn(h,s,!1,n.type),(h._visualValues||(h._visualValues={}))[a]=u}}function Mn(e,t){const i=e.scales;return Object.keys(i).filter(e=>i[e].axis===t).shift()}function Pn(e,t){const i=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[n]||void 0===t[n][i])return;delete t[n][i],void 0!==t[n]._visualValues&&void 0!==t[n]._visualValues[i]&&delete t[n]._visualValues[i]}}}const Rn=e=>"reset"===e||"none"===e,In=(e,t)=>t?e:Object.assign({},e);class On{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=En(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Pn(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),n=(e,t,i,n)=>"x"===e?t:"r"===e?n:i,o=t.xAxisID=l(i.xAxisID,Mn(e,"x")),r=t.yAxisID=l(i.yAxisID,Mn(e,"y")),s=t.rAxisID=l(i.rAxisID,Mn(e,"r")),a=t.indexAxis,c=t.iAxisID=n(a,o,r,s),d=t.vAxisID=n(a,r,o,s);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(r),t.rScale=this.getScaleForId(s),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&ae(this._data,this),e._stacked&&Pn(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(r(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:i,vScale:n}=t,o="x"===i.axis?"x":"y",r="x"===n.axis?"x":"y",s=Object.keys(e),a=new Array(s.length);let l,c,d;for(l=0,c=s.length;l<c;++l)d=s[l],a[l]={[o]:d,[r]:e[d]};return a}(t,e)}else if(i!==t){if(i){ae(i,this);const e=this._cachedMeta;Pn(e),e._parsed=[]}t&&Object.isExtensible(t)&&se(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const o=t._stacked;t._stacked=En(t.vScale,t),t.stack!==i.stack&&(n=!0,Pn(t),t.stack=i.stack),this._resyncElements(e),(n||o!==t._stacked)&&(Dn(this,t._parsed),t._stacked=En(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:n}=this,{iScale:s,_stacked:a}=i,l=s.axis;let c,d,u,h=0===e&&t===n.length||i._sorted,p=e>0&&i._parsed[e-1];if(!1===this._parsing)i._parsed=n,i._sorted=!0,u=n;else{u=o(n[e])?this.parseArrayData(i,n,e,t):r(n[e])?this.parseObjectData(i,n,e,t):this.parsePrimitiveData(i,n,e,t);const s=()=>null===d[l]||p&&d[l]<p[l];for(c=0;c<t;++c)i._parsed[c+e]=d=u[c],h&&(s()&&(h=!1),p=d);i._sorted=h}a&&Dn(this,u)}parsePrimitiveData(e,t,i,n){const{iScale:o,vScale:r}=e,s=o.axis,a=r.axis,l=o.getLabels(),c=o===r,d=new Array(n);let u,h,p;for(u=0,h=n;u<h;++u)p=u+i,d[u]={[s]:c||o.parse(l[p],p),[a]:r.parse(t[p],p)};return d}parseArrayData(e,t,i,n){const{xScale:o,yScale:r}=e,s=new Array(n);let a,l,c,d;for(a=0,l=n;a<l;++a)c=a+i,d=t[c],s[a]={x:o.parse(d[0],c),y:r.parse(d[1],c)};return s}parseObjectData(e,t,i,n){const{xScale:o,yScale:r}=e,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l=new Array(n);let c,d,u,h;for(c=0,d=n;c<d;++c)u=c+i,h=t[u],l[c]={x:o.parse(_(h,s),u),y:r.parse(_(h,a),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const n=this.chart,o=this._cachedMeta,r=t[e.axis];return An({keys:xn(n,!0),values:t._stacks[e.axis]._visualValues},r,o.index,{mode:i})}updateRangeFromParsed(e,t,i,n){const o=i[t.axis];let r=null===o?NaN:o;const s=n&&i._stacks[t.axis];n&&s&&(n.values=s,r=An(n,o,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,t){const i=this._cachedMeta,n=i._parsed,o=i._sorted&&e===i.iScale,r=n.length,a=this._getOtherScale(e),l=((e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:xn(i,!0),values:null})(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:u}=function(e){const{min:t,max:i,minDefined:n,maxDefined:o}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:o?i:Number.POSITIVE_INFINITY}}(a);let h,p;function g(){p=n[h];const t=p[a.axis];return!s(p[e.axis])||d>t||u<t}for(h=0;h<r&&(g()||(this.updateRangeFromParsed(c,e,p,l),!o));++h);if(o)for(h=r-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(c,e,p,l);break}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let n,o,r;for(n=0,o=t.length;n<o;++n)r=t[n][e.axis],s(r)&&i.push(r);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,n=t.vScale,o=this.getParsed(e);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,i,n,o;return r(e)?(t=e.top,i=e.right,n=e.bottom,o=e.left):t=i=n=o=e,{top:t,right:i,bottom:n,left:o,disabled:!1===e}}(l(this.options.clip,function(e,t,i){if(!1===i)return!1;const n=Sn(e,i),o=Sn(t,i);return{top:o.end,right:n.end,bottom:o.start,left:n.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,n=i.data||[],o=t.chartArea,r=[],s=this._drawStart||0,a=this._drawCount||n.length-s,l=this.options.drawActiveElementsOnTop;let c;for(i.dataset&&i.dataset.draw(e,o,s,a),c=s;c<s+a;++c){const t=n[c];t.hidden||(t.active&&l?r.push(t):t.draw(e,o))}for(c=0;c<r.length;++c)r[c].draw(e,o)}getStyle(e,t){const i=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const n=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];o=t.$context||(t.$context=function(e,t,i){return _i(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),o.parsed=this.getParsed(e),o.raw=n.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=function(e,t){return _i(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=n,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=i,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const n="active"===t,o=this._cachedDataOpts,r=e+"-"+t,s=o[r],a=this.enableOptionSharing&&x(i);if(s)return In(s,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=n?[`${e}Hover`,"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(at.elements[e]),p=l.resolveNamedOptions(u,h,()=>this.getContext(i,n,t),d);return p.$shared&&(p.$shared=a,o[r]=Object.freeze(In(p,a))),p}_resolveAnimations(e,t,i){const n=this.chart,o=this._cachedDataOpts,r=`animation-${t}`,s=o[r];if(s)return s;let a;if(!1!==n.options.animation){const n=this.chart.config,o=n.datasetAnimationScopeKeys(this._type,t),r=n.getOptionScopes(this.getDataset(),o);a=n.createResolver(r,this.getContext(e,i,t))}const l=new _n(n,a&&a.animations);return a&&a._cacheable&&(o[r]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Rn(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),n=this._sharedOptions,o=this.getSharedOptions(i),r=this.includeOptions(t,o)||o!==n;return this.updateSharedOptions(o,t,i),{sharedOptions:o,includeOptions:r}}updateElement(e,t,i,n){Rn(n)?Object.assign(e,i):this._resolveAnimations(t,n).update(e,i)}updateSharedOptions(e,t,i){e&&!Rn(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,n){e.active=n;const o=this.getStyle(t,n);this._resolveAnimations(t,i,n).update(e,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[e,t,i]of this._syncList)this[e](t,i);this._syncList=[];const n=i.length,o=t.length,r=Math.min(o,n);r&&this.parse(0,r),o>n?this._insertElements(n,o-n,e):o<n&&this._removeElements(o,n-o)}_insertElements(e,t,i=!0){const n=this._cachedMeta,o=n.data,r=e+t;let s;const a=e=>{for(e.length+=t,s=e.length-1;s>=r;s--)e[s]=e[s-t]};for(a(o),s=e;s<r;++s)o[s]=new this.dataElementType;this._parsing&&a(n._parsed),this.parse(e,t),i&&this.updateElements(o,e,t,"reset")}updateElements(e,t,i,n){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(e,t);i._stacked&&Pn(i,n)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,n]=e;this[t](i,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class Nn{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return H(this.x)&&H(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const n={};return e.forEach(e=>{n[e]=i[e]&&i[e].active()?i[e]._to:this[e]}),n}}function Ln(e,t){const i=e.options.ticks,o=function(e){const t=e.options.offset,i=e._tickSize(),n=e._length/i+(t?0:1),o=e._maxLength/i;return Math.floor(Math.min(n,o))}(e),r=Math.min(i.maxTicksLimit||o,o),s=i.major.enabled?function(e){const t=[];let i,n;for(i=0,n=e.length;i<n;i++)e[i].major&&t.push(i);return t}(t):[],a=s.length,l=s[0],c=s[a-1],d=[];if(a>r)return function(e,t,i,n){let o,r=0,s=i[0];for(n=Math.ceil(n),o=0;o<e.length;o++)o===s&&(t.push(e[o]),r++,s=i[r*n])}(t,d,s,a/r),d;const u=function(e,t,i){const n=function(e){const t=e.length;let i,n;if(t<2)return!1;for(n=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==n)return!1;return n}(e),o=t.length/i;if(!n)return Math.max(o,1);const r=B(n);for(let e=0,t=r.length-1;e<t;e++){const t=r[e];if(t>o)return t}return Math.max(o,1)}(s,t,r);if(a>0){let e,i;const o=a>1?Math.round((c-l)/(a-1)):null;for(Fn(t,d,u,n(o)?0:l-o,l),e=0,i=a-1;e<i;e++)Fn(t,d,u,s[e],s[e+1]);return Fn(t,d,u,c,n(o)?t.length:c+o),d}return Fn(t,d,u),d}function Fn(e,t,i,n,o){const r=l(n,0),s=Math.min(l(o,e.length),e.length);let a,c,d,u=0;for(i=Math.ceil(i),o&&(a=o-n,i=a/Math.floor(a/i)),d=r;d<0;)u++,d=Math.round(r+u*i);for(c=Math.max(r,0);c<s;c++)c===d&&(t.push(e[c]),u++,d=Math.round(r+u*i))}const $n=(e,t,i)=>"top"===t||"left"===t?e[t]+i:e[t]-i,Gn=(e,t)=>Math.min(t||e,e);function Bn(e,t){const i=[],n=e.length/t,o=e.length;let r=0;for(;r<o;r+=n)i.push(e[Math.floor(r)]);return i}function Hn(e,t,i){const n=e.ticks.length,o=Math.min(t,n-1),r=e._startPixel,s=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(o);if(!(i&&(l=1===n?Math.max(c-r,s-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(o-1))/2,c+=o<t?l:-l,c<r-a||c>s+a)))return c}function zn(e){return e.drawTicks?e.tickLength:0}function Wn(e,t){if(!e.display)return 0;const i=yi(e.font,t),n=bi(e.padding);return(o(e.text)?e.text.length:1)*i.lineHeight+n.height}function Vn(e,t,i){let n=he(e);return(i&&"right"!==t||!i&&"right"===t)&&(n=(e=>"left"===e?"right":"right"===e?"left":e)(n)),n}class jn extends Nn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:n}=this;return e=a(e,Number.POSITIVE_INFINITY),t=a(t,Number.NEGATIVE_INFINITY),i=a(i,Number.POSITIVE_INFINITY),n=a(n,Number.NEGATIVE_INFINITY),{min:a(e,i),max:a(t,n),minDefined:s(e),maxDefined:s(t)}}getMinMax(e){let t,{min:i,max:n,minDefined:o,maxDefined:r}=this.getUserBounds();if(o&&r)return{min:i,max:n};const s=this.getMatchingVisibleMetas();for(let a=0,l=s.length;a<l;++a)t=s[a].controller.getMinMax(this,e),o||(i=Math.min(i,t.min)),r||(n=Math.max(n,t.max));return i=r&&i>n?n:i,n=o&&i>n?i:n,{min:a(i,a(n,i)),max:a(n,a(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){u(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:n,grace:o,ticks:r}=this.options,s=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Ci(this,o,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=s<this.ticks.length;this._convertTicksToLabels(a?Bn(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||"auto"===r.source)&&(this.ticks=Ln(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,i=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,i=!i),this._startPixel=e,this._endPixel=t,this._reversePixels=i,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){u(this.options.afterUpdate,[this])}beforeSetDimensions(){u(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){u(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),u(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){u(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,n,o;for(i=0,n=e.length;i<n;i++)o=e[i],o.label=u(t.callback,[o.value,i,e],this)}afterTickToLabelConversion(){u(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){u(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=Gn(this.ticks.length,e.ticks.maxTicksLimit),n=t.minRotation||0,o=t.maxRotation;let r,s,a,l=n;if(!this._isVisible()||!t.display||n>=o||i<=1||!this.isHorizontal())return void(this.labelRotation=n);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=J(this.chart.width-d,0,this.maxWidth);r=e.offset?this.maxWidth/i:h/(i-1),d+6>r&&(r=h/(i-(e.offset?.5:1)),s=this.maxHeight-zn(e.grid)-t.padding-Wn(e.title,this.chart.options.font),a=Math.sqrt(d*d+u*u),l=j(Math.min(Math.asin(J((c.highest.height+6)/r,-1,1)),Math.asin(J(s/a,-1,1))-Math.asin(J(u/a,-1,1)))),l=Math.max(n,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){u(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){u(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:n,grid:o}}=this,r=this._isVisible(),s=this.isHorizontal();if(r){const r=Wn(n,t.options.font);if(s?(e.width=this.maxWidth,e.height=zn(o)+r):(e.height=this.maxHeight,e.width=zn(o)+r),i.display&&this.ticks.length){const{first:t,last:n,widest:o,highest:r}=this._getLabelSizes(),a=2*i.padding,l=V(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(s){const t=i.mirror?0:d*o.width+c*r.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=i.mirror?0:c*o.width+d*r.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,n,d,c)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,n){const{ticks:{align:o,padding:r},position:s}=this.options,a=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;a?l?(d=n*e.width,u=i*t.height):(d=i*e.height,u=n*t.width):"start"===o?u=t.width:"end"===o?d=e.width:"inner"!==o&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-s+r)*this.width/(this.width-s),0),this.paddingRight=Math.max((u-c+r)*this.width/(this.width-c),0)}else{let i=t.height/2,n=e.height/2;"start"===o?(i=0,n=e.height):"end"===o&&(i=t.height,n=0),this.paddingTop=i+r,this.paddingBottom=n+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){u(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,i=e.length;t<i;t++)n(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=Bn(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:r,_longestTextCache:s}=this,a=[],l=[],c=Math.floor(t/Gn(t,i));let d,u,p,g,f,m,v,b,y,w,C,_=0,S=0;for(d=0;d<t;d+=c){if(g=e[d].label,f=this._resolveTickFontOptions(d),r.font=m=f.string,v=s[m]=s[m]||{data:{},gc:[]},b=f.lineHeight,y=w=0,n(g)||o(g)){if(o(g))for(u=0,p=g.length;u<p;++u)C=g[u],n(C)||o(C)||(y=_t(r,v.data,v.gc,y,C),w+=b)}else y=_t(r,v.data,v.gc,y,g),w=b;a.push(y),l.push(w),_=Math.max(y,_),S=Math.max(w,S)}!function(e,t){h(e,e=>{const i=e.gc,n=i.length/2;let o;if(n>t){for(o=0;o<n;++o)delete e.data[i[o]];i.splice(0,n)}})}(s,t);const x=a.indexOf(_),A=l.indexOf(S),E=e=>({width:a[e]||0,height:l[e]||0});return{first:E(0),last:E(t-1),widest:E(x),highest:E(A),widths:a,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Q(this._alignToPixels?xt(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=function(e,t,i){return _i(e,{tick:i,index:t,type:"tick"})}(this.getContext(),e,i))}return this.$context||(this.$context=_i(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=V(this.labelRotation),i=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),o=this._getLabelSizes(),r=e.autoSkipPadding||0,s=o?o.widest.width+r:0,a=o?o.highest.height+r:0;return this.isHorizontal()?a*i>s*n?s/i:a/n:a*n<s*i?a/i:s/n}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,n=this.options,{grid:o,position:s,border:a}=n,c=o.offset,d=this.isHorizontal(),u=this.ticks.length+(c?1:0),h=zn(o),p=[],g=a.setContext(this.getContext()),f=g.display?g.width:0,m=f/2,v=function(e){return xt(i,e,f)};let b,y,w,C,_,S,x,A,E,T,k,D;if("top"===s)b=v(this.bottom),S=this.bottom-h,A=b-m,T=v(e.top)+m,D=e.bottom;else if("bottom"===s)b=v(this.top),T=e.top,D=v(e.bottom)-m,S=b+m,A=this.top+h;else if("left"===s)b=v(this.right),_=this.right-h,x=b-m,E=v(e.left)+m,k=e.right;else if("right"===s)b=v(this.left),E=e.left,k=v(e.right)-m,_=b+m,x=this.left+h;else if("x"===t){if("center"===s)b=v((e.top+e.bottom)/2+.5);else if(r(s)){const e=Object.keys(s)[0],t=s[e];b=v(this.chart.scales[e].getPixelForValue(t))}T=e.top,D=e.bottom,S=b+m,A=S+h}else if("y"===t){if("center"===s)b=v((e.left+e.right)/2);else if(r(s)){const e=Object.keys(s)[0],t=s[e];b=v(this.chart.scales[e].getPixelForValue(t))}_=b-m,x=_-h,E=e.left,k=e.right}const M=l(n.ticks.maxTicksLimit,u),P=Math.max(1,Math.ceil(u/M));for(y=0;y<u;y+=P){const e=this.getContext(y),t=o.setContext(e),n=a.setContext(e),r=t.lineWidth,s=t.color,l=n.dash||[],u=n.dashOffset,h=t.tickWidth,g=t.tickColor,f=t.tickBorderDash||[],m=t.tickBorderDashOffset;w=Hn(this,y,c),void 0!==w&&(C=xt(i,w,r),d?_=x=E=k=C:S=A=T=D=C,p.push({tx1:_,ty1:S,tx2:x,ty2:A,x1:E,y1:T,x2:k,y2:D,width:r,color:s,borderDash:l,borderDashOffset:u,tickWidth:h,tickColor:g,tickBorderDash:f,tickBorderDashOffset:m}))}return this._ticksLength=u,this._borderValue=b,p}_computeLabelItems(e){const t=this.axis,i=this.options,{position:n,ticks:s}=i,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=s,p=zn(i.grid),g=p+u,f=h?-u:g,m=-V(this.labelRotation),v=[];let b,y,w,C,_,S,x,A,E,T,k,D,M="middle";if("top"===n)S=this.bottom-f,x=this._getXAxisLabelAlignment();else if("bottom"===n)S=this.top+f,x=this._getXAxisLabelAlignment();else if("left"===n){const e=this._getYAxisLabelAlignment(p);x=e.textAlign,_=e.x}else if("right"===n){const e=this._getYAxisLabelAlignment(p);x=e.textAlign,_=e.x}else if("x"===t){if("center"===n)S=(e.top+e.bottom)/2+g;else if(r(n)){const e=Object.keys(n)[0],t=n[e];S=this.chart.scales[e].getPixelForValue(t)+g}x=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===n)_=(e.left+e.right)/2-g;else if(r(n)){const e=Object.keys(n)[0],t=n[e];_=this.chart.scales[e].getPixelForValue(t)}x=this._getYAxisLabelAlignment(p).textAlign}"y"===t&&("start"===c?M="top":"end"===c&&(M="bottom"));const P=this._getLabelSizes();for(b=0,y=l.length;b<y;++b){w=l[b],C=w.label;const e=s.setContext(this.getContext(b));A=this.getPixelForTick(b)+s.labelOffset,E=this._resolveTickFontOptions(b),T=E.lineHeight,k=o(C)?C.length:1;const t=k/2,i=e.color,r=e.textStrokeColor,c=e.textStrokeWidth;let u,p=x;if(a?(_=A,"inner"===x&&(p=b===y-1?this.options.reverse?"left":"right":0===b?this.options.reverse?"right":"left":"center"),D="top"===n?"near"===d||0!==m?-k*T+T/2:"center"===d?-P.highest.height/2-t*T+T:-P.highest.height+T/2:"near"===d||0!==m?T/2:"center"===d?P.highest.height/2-t*T:P.highest.height-k*T,h&&(D*=-1),0===m||e.showLabelBackdrop||(_+=T/2*Math.sin(m))):(S=A,D=(1-k)*T/2),e.showLabelBackdrop){const t=bi(e.backdropPadding),i=P.heights[b],n=P.widths[b];let o=D-t.top,r=0-t.left;switch(M){case"middle":o-=i/2;break;case"bottom":o-=i}switch(x){case"center":r-=n/2;break;case"right":r-=n;break;case"inner":b===y-1?r-=n:b>0&&(r-=n/2)}u={left:r,top:o,width:n+t.width,height:i+t.height,color:e.backdropColor}}v.push({label:C,font:E,textOffset:D,options:{rotation:m,color:i,strokeColor:r,strokeWidth:c,textAlign:p,textBaseline:M,translation:[_,S],backdrop:u}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-V(this.labelRotation))return"top"===e?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align?i="right":"inner"===t.align&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:n,padding:o}}=this.options,r=e+o,s=this._getLabelSizes().widest.width;let a,l;return"left"===t?n?(l=this.right+o,"near"===i?a="left":"center"===i?(a="center",l+=s/2):(a="right",l+=s)):(l=this.right-r,"near"===i?a="right":"center"===i?(a="center",l-=s/2):(a="left",l=this.left)):"right"===t?n?(l=this.left+o,"near"===i?a="right":"center"===i?(a="center",l-=s/2):(a="left",l-=s)):(l=this.left+r,"near"===i?a="left":"center"===i?(a="center",l+=s/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:n,width:o,height:r}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,n,o,r),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(t=>t.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,r;const s=(e,t,n)=>{n.width&&n.color&&(i.save(),i.lineWidth=n.width,i.strokeStyle=n.color,i.setLineDash(n.borderDash||[]),i.lineDashOffset=n.borderDashOffset,i.beginPath(),i.moveTo(e.x,e.y),i.lineTo(t.x,t.y),i.stroke(),i.restore())};if(t.display)for(o=0,r=n.length;o<r;++o){const e=n[o];t.drawOnChartArea&&s({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&s({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:n}}=this,o=i.setContext(this.getContext()),r=i.display?o.width:0;if(!r)return;const s=n.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=xt(e,this.left,r)-r/2,c=xt(e,this.right,s)+s/2,d=u=a):(d=xt(e,this.top,r)-r/2,u=xt(e,this.bottom,s)+s/2,l=c=a),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(l,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,i=this._computeLabelArea();i&&Dt(t,i);const n=this.getLabelItems(e);for(const e of n){const i=e.options,n=e.font;Nt(t,e.label,0,e.textOffset,n,i)}i&&Mt(t)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:n}}=this;if(!i.display)return;const s=yi(i.font),a=bi(i.padding),l=i.align;let c=s.lineHeight/2;"bottom"===t||"center"===t||r(t)?(c+=a.bottom,o(i.text)&&(c+=s.lineHeight*(i.text.length-1))):c+=a.top;const{titleX:d,titleY:u,maxWidth:h,rotation:p}=function(e,t,i,n){const{top:o,left:s,bottom:a,right:l,chart:c}=e,{chartArea:d,scales:u}=c;let h,p,g,f=0;const m=a-o,v=l-s;if(e.isHorizontal()){if(p=pe(n,s,l),r(i)){const e=Object.keys(i)[0],n=i[e];g=u[e].getPixelForValue(n)+m-t}else g="center"===i?(d.bottom+d.top)/2+m-t:$n(e,i,t);h=l-s}else{if(r(i)){const e=Object.keys(i)[0],n=i[e];p=u[e].getPixelForValue(n)-v+t}else p="center"===i?(d.left+d.right)/2-v+t:$n(e,i,t);g=pe(n,a,o),f="left"===i?-I:I}return{titleX:p,titleY:g,maxWidth:h,rotation:f}}(this,c,t,l);Nt(e,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:p,textAlign:Vn(l,t,n),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=l(e.grid&&e.grid.z,-1),n=l(e.border&&e.border.z,0);return this._isVisible()&&this.draw===jn.prototype.draw?[{z:i,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let o,r;for(o=0,r=t.length;o<r;++o){const r=t[o];r[i]!==this.id||e&&r.type!==e||n.push(r)}return n}_resolveTickFontOptions(e){return yi(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Un{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;(function(e){return"id"in e&&"defaults"in e})(t)&&(i=this.register(t));const n=this.items,o=e.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in n||(n[o]=e,function(e,t,i){const n=v(Object.create(null),[i?at.get(i):{},at.get(t),e.defaults]);at.set(t,n),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(i=>{const n=i.split("."),o=n.pop(),r=[e].concat(n).join("."),s=t[i].split("."),a=s.pop(),l=s.join(".");at.route(r,o,l,a)})}(t,e.defaultRoutes),e.descriptors&&at.describe(t,e.descriptors)}(e,r,i),this.override&&at.override(e.id,e.overrides)),r}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,n=this.scope;i in t&&delete t[i],n&&i in at[n]&&(delete at[n][i],this.override&&delete nt[i])}}var Yn=new class{constructor(){this.controllers=new Un(On,"datasets",!0),this.elements=new Un(Nn,"elements"),this.plugins=new Un(Object,"plugins"),this.scales=new Un(jn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(t=>{const n=i||this._getRegistryForType(t);i||n.isForType(t)||n===this.plugins&&t.id?this._exec(e,n,t):h(t,t=>{const n=i||this._getRegistryForType(t);this._exec(e,n,t)})})}_exec(e,t,i){const n=S(e);u(i["before"+n],[],i),t[e](i),u(i["after"+n],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const n=t.get(e);if(void 0===n)throw new Error('"'+e+'" is not a registered '+i+".");return n}};class qn{constructor(){this._init=[]}notify(e,t,i,n){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=n?this._descriptors(e).filter(n):this._descriptors(e),r=this._notify(o,e,t,i);return"afterDestroy"===t&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),r}_notify(e,t,i,n){n=n||{};for(const o of e){const e=o.plugin;if(!1===u(e[i],[t,n,o.options],e)&&n.cancelable)return!1}return!0}invalidate(){n(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,n=l(i.options&&i.options.plugins,{}),o=function(e){const t={},i=[],n=Object.keys(Yn.plugins.items);for(let e=0;e<n.length;e++)i.push(Yn.getPlugin(n[e]));const o=e.plugins||[];for(let e=0;e<o.length;e++){const n=o[e];-1===i.indexOf(n)&&(i.push(n),t[n.id]=!0)}return{plugins:i,localIds:t}}(i);return!1!==n||t?function(e,{plugins:t,localIds:i},n,o){const r=[],s=e.getContext();for(const a of t){const t=a.id,l=Kn(n[t],o);null!==l&&r.push({plugin:a,options:Xn(e.config,{plugin:a,local:i[t]},l,s)})}return r}(e,o,n,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,n=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(n(t,i),e,"stop"),this._notify(n(i,t),e,"start")}}function Kn(e,t){return t||!1!==e?!0===e?{}:e:null}function Xn(e,{plugin:t,local:i},n,o){const r=e.pluginScopeKeys(t),s=e.getOptionScopes(n,r);return i&&t.defaults&&s.push(t.defaults),e.createResolver(s,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Zn(e,t){const i=at.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function Jn(e){if("x"===e||"y"===e||"r"===e)return e}function Qn(e,...t){if(Jn(e))return e;for(const n of t){const t=n.axis||("top"===(i=n.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||e.length>1&&Jn(e[0].toLowerCase());if(t)return t}var i;throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function eo(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function to(e){const t=e.options||(e.options={});t.plugins=l(t.plugins,{}),t.scales=function(e,t){const i=nt[e.type]||{scales:{}},n=t.scales||{},o=Zn(e.type,t),s=Object.create(null);return Object.keys(n).forEach(t=>{const a=n[t];if(!r(a))return console.error(`Invalid scale configuration for scale: ${t}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const l=Qn(t,a,function(e,t){if(t.data&&t.data.datasets){const i=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(i.length)return eo(e,"x",i[0])||eo(e,"y",i[0])}return{}}(t,e),at.scales[a.type]),c=function(e,t){return e===t?"_index_":"_value_"}(l,o),d=i.scales||{};s[t]=b(Object.create(null),[{axis:l},a,d[l],d[c]])}),e.data.datasets.forEach(i=>{const o=i.type||e.type,r=i.indexAxis||Zn(o,t),a=(nt[o]||{}).scales||{};Object.keys(a).forEach(e=>{const t=function(e,t){let i=e;return"_index_"===e?i=t:"_value_"===e&&(i="x"===t?"y":"x"),i}(e,r),o=i[t+"AxisID"]||t;s[o]=s[o]||Object.create(null),b(s[o],[{axis:t},n[o],a[e]])})}),Object.keys(s).forEach(e=>{const t=s[e];b(t,[at.scales[t.type],at.scale])}),s}(e,t)}function io(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const no=new Map,oo=new Set;function ro(e,t){let i=no.get(e);return i||(i=t(),no.set(e,i),oo.add(i)),i}const so=(e,t,i)=>{const n=_(t,i);void 0!==n&&e.add(n)};class ao{constructor(e){this._config=function(e){return(e=e||{}).data=io(e.data),to(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=io(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),to(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return ro(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return ro(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return ro(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return ro(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let n=i.get(e);return n&&!t||(n=new Map,i.set(e,n)),n}getOptionScopes(e,t,i){const{options:n,type:o}=this,r=this._cachedScopes(e,i),s=r.get(t);if(s)return s;const a=new Set;t.forEach(t=>{e&&(a.add(e),t.forEach(t=>so(a,e,t))),t.forEach(e=>so(a,n,e)),t.forEach(e=>so(a,nt[o]||{},e)),t.forEach(e=>so(a,at,e)),t.forEach(e=>so(a,ot,e))});const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),oo.has(t)&&r.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,nt[t]||{},at.datasets[t]||{},{type:t},at,ot]}resolveNamedOptions(e,t,i,n=[""]){const r={$shared:!0},{resolver:s,subPrefixes:a}=lo(this._resolverCache,e,n);let l=s;(function(e,t){const{isScriptable:i,isIndexable:n}=Gt(e);for(const r of t){const t=i(r),s=n(r),a=(s||t)&&e[r];if(t&&(A(a)||co(a))||s&&o(a))return!0}return!1})(s,t)&&(r.$shared=!1,l=$t(s,i=A(i)?i():i,this.createResolver(e,i,a)));for(const e of t)r[e]=l[e];return r}createResolver(e,t,i=[""],n){const{resolver:o}=lo(this._resolverCache,e,i);return r(t)?$t(o,t,void 0,n):o}}function lo(e,t,i){let n=e.get(t);n||(n=new Map,e.set(t,n));const o=i.join();let r=n.get(o);return r||(r={resolver:Ft(t,i),subPrefixes:i.filter(e=>!e.toLowerCase().includes("hover"))},n.set(o,r)),r}const co=e=>r(e)&&Object.getOwnPropertyNames(e).some(t=>A(e[t])),uo=["top","bottom","left","right","chartArea"];function ho(e,t){return"top"===e||"bottom"===e||-1===uo.indexOf(e)&&"x"===t}function po(e,t){return function(i,n){return i[e]===n[e]?i[t]-n[t]:i[e]-n[e]}}function go(e){const t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),u(i&&i.onComplete,[e],t)}function fo(e){const t=e.chart,i=t.options.animation;u(i&&i.onProgress,[e],t)}function mo(e){return lt()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const vo={},bo=e=>{const t=mo(e);return Object.values(vo).filter(e=>e.canvas===t).pop()};function yo(e,t,i){const n=Object.keys(e);for(const o of n){const n=+o;if(n>=t){const r=e[o];delete e[o],(i>0||n>t)&&(e[n+i]=r)}}}function wo(e,t,i){return e.options.clip?e[i]:t[i]}class Co{static defaults=at;static instances=vo;static overrides=nt;static registry=Yn;static version="4.4.7";static getChart=bo;static register(...e){Yn.add(...e),_o()}static unregister(...e){Yn.remove(...e),_o()}constructor(e,t){const n=this.config=new ao(t),o=mo(e),r=bo(o);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||vn(o)),this.platform.updateConfig(n);const a=this.platform.acquireContext(o,s.aspectRatio),l=a&&a.canvas,c=l&&l.height,d=l&&l.width;this.id=i(),this.ctx=a,this.canvas=l,this.width=d,this.height=c,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new qn,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ue(e=>this.update(e),s.resizeDelay||0),this._dataChanges=[],vo[this.id]=this,a&&l?(ve.listen(this,"complete",go),ve.listen(this,"progress",fo),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:o,_aspectRatio:r}=this;return n(e)?t&&r?r:o?i/o:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Yn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():bt(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return At(this.canvas,this.ctx),this}stop(){return ve.stop(this),this}resize(e,t){ve.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,n=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(n,e,t,o),s=i.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,bt(this,s,!0)&&(this.notifyPlugins("resize",{size:r}),u(i.onResize,[this,r],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){h(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,n=Object.keys(i).reduce((e,t)=>(e[t]=!1,e),{});let o=[];t&&(o=o.concat(Object.keys(t).map(e=>{const i=t[e],n=Qn(e,i),o="r"===n,r="x"===n;return{options:i,dposition:o?"chartArea":r?"bottom":"left",dtype:o?"radialLinear":r?"category":"linear"}}))),h(o,t=>{const o=t.options,r=o.id,s=Qn(r,o),a=l(o.type,t.dtype);void 0!==o.position&&ho(o.position,s)===ho(t.dposition)||(o.position=t.dposition),n[r]=!0;let c=null;r in i&&i[r].type===a?c=i[r]:(c=new(Yn.getScale(a))({id:r,type:a,ctx:this.ctx,chart:this}),i[c.id]=c),c.init(o,e)}),h(n,(e,t)=>{e||delete i[t]}),h(i,e=>{Ji.configure(this,e,e.options),Ji.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((e,t)=>e.index-t.index),i>t){for(let e=t;e<i;++e)this._destroyDatasetMeta(e);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(po("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,i)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=t.length;i<n;i++){const n=t[i];let o=this.getDatasetMeta(i);const r=n.type||this.config.type;if(o.type&&o.type!==r&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=r,o.indexAxis=n.indexAxis||Zn(r,this.options),o.order=n.order||0,o.index=i,o.label=""+n.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const t=Yn.getController(r),{datasetElementType:n,dataElementType:s}=at.datasets[r];Object.assign(t,{dataElementType:Yn.getElement(s),datasetElementType:n&&Yn.getElement(n)}),o.controller=new t(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){h(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let e=0,t=this.data.datasets.length;e<t;e++){const{controller:t}=this.getDatasetMeta(e),i=!n&&-1===o.indexOf(t);t.buildOrUpdateElements(i),r=Math.max(+t.getMaxOverflow(),r)}r=this._minPadding=i.layout.autoPadding?r:0,this._updateLayout(r),n||h(o,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(po("z","_idx"));const{_active:s,_lastEvent:a}=this;a?this._eventHandler(a,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){h(this.scales,e=>{Ji.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);E(t,i)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:o}of t)yo(e,n,"_removeElements"===i?-o:o)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),n=i(0);for(let e=1;e<t;e++)if(!E(n,i(e)))return;return Array.from(n).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Ji.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],h(this.boxes,e=>{i&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,A(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),n={meta:i,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(i.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(ve.has(this)?this.attached&&!ve.running(this)&&ve.start(this):(this.draw(),go({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let n,o;for(n=0,o=t.length;n<o;++n){const o=t[n];e&&!o.visible||i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i=e._clip,n=!i.disabled,o=function(e,t){const{xScale:i,yScale:n}=e;return i&&n?{left:wo(i,t,"left"),right:wo(i,t,"right"),top:wo(n,t,"top"),bottom:wo(n,t,"bottom")}:t}(e,this.chartArea),r={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",r)&&(n&&Dt(t,{left:!1===i.left?0:o.left-i.left,right:!1===i.right?this.width:o.right+i.right,top:!1===i.top?0:o.top-i.top,bottom:!1===i.bottom?this.height:o.bottom+i.bottom}),e.controller.draw(),n&&Mt(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return kt(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,n){const o=Bi.modes[t];return"function"==typeof o?o(this,e,i,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let n=i.filter(e=>e&&e._dataset===t).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=_i(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return"boolean"==typeof i.hidden?!i.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const n=i?"show":"hide",o=this.getDatasetMeta(e),r=o.controller._resolveAnimations(void 0,n);x(t)?(o.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),r.update(o,{visible:i}),this.update(t=>t.datasetIndex===e?n:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),ve.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),At(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete vo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(i,n)=>{t.addEventListener(this,i,n),e[i]=n},n=(e,t,i)=>{e.offsetX=t,e.offsetY=i,this._eventHandler(e)};h(this.options.events,e=>i(e,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(i,n)=>{t.addEventListener(this,i,n),e[i]=n},n=(i,n)=>{e[i]&&(t.removeEventListener(this,i,n),delete e[i])},o=(e,t)=>{this.canvas&&this.resize(e,t)};let r;const s=()=>{n("attach",s),this.attached=!0,this.resize(),i("resize",o),i("detach",r)};r=()=>{this.attached=!1,n("resize",o),this._stop(),this._resize(0,0),i("attach",s)},t.isAttached(this.canvas)?s():r()}unbindEvents(){h(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},h(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const n=i?"set":"remove";let o,r,s,a;for("dataset"===t&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+n+"DatasetHoverStyle"]()),s=0,a=e.length;s<a;++s){r=e[s];const t=r&&this.getDatasetMeta(r.datasetIndex).controller;t&&t[n+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:e,index:t})=>{const i=this.getDatasetMeta(e);if(!i)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:i.data[t],index:t}});!p(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,i){const n=this.options.hover,o=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),r=o(t,e),s=i?e:o(e,t);r.length&&this.updateHoverStyle(r,n.mode,!1),s.length&&n.mode&&this.updateHoverStyle(s,n.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",i,n))return;const o=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(o||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:n=[],options:o}=this,r=t,s=this._getActiveElements(e,n,i,r),a=T(e),l=function(e,t,i,n){return i&&"mouseout"!==e.type?n?t:e:null}(e,this._lastEvent,i,a);i&&(this._lastEvent=null,u(o.onHover,[e,s,this],this),a&&u(o.onClick,[e,s,this],this));const c=!p(s,n);return(c||t)&&(this._active=s,this._updateHoverStyles(s,n,t)),this._lastEvent=l,c}_getActiveElements(e,t,i,n){if("mouseout"===e.type)return[];if(!i)return t;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,n)}}function _o(){return h(Co.instances,e=>e._plugins.invalidate())}function So(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class xo{static override(e){Object.assign(xo.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return So()}parse(){return So()}format(){return So()}add(){return So()}diff(){return So()}startOf(){return So()}endOf(){return So()}}var Ao={_date:xo};function Eo(e){const t=e.iScale,i=function(e,t){if(!e._cache.$bar){const i=e.getMatchingVisibleMetas(t);let n=[];for(let t=0,o=i.length;t<o;t++)n=n.concat(i[t].controller.getAllParsedValues(e));e._cache.$bar=le(n.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let n,o,r,s,a=t._length;const l=()=>{32767!==r&&-32768!==r&&(x(s)&&(a=Math.min(a,Math.abs(r-s)||a)),s=r)};for(n=0,o=i.length;n<o;++n)r=t.getPixelForValue(i[n]),l();for(s=void 0,n=0,o=t.ticks.length;n<o;++n)r=t.getPixelForTick(n),l();return a}function To(e,t,i,n){return o(e)?function(e,t,i,n){const o=i.parse(e[0],n),r=i.parse(e[1],n),s=Math.min(o,r),a=Math.max(o,r);let l=s,c=a;Math.abs(s)>Math.abs(a)&&(l=a,c=s),t[i.axis]=c,t._custom={barStart:l,barEnd:c,start:o,end:r,min:s,max:a}}(e,t,i,n):t[i.axis]=i.parse(e,n),t}function ko(e,t,i,n){const o=e.iScale,r=e.vScale,s=o.getLabels(),a=o===r,l=[];let c,d,u,h;for(c=i,d=i+n;c<d;++c)h=t[c],u={},u[o.axis]=a||o.parse(s[c],c),l.push(To(h,u,r,c));return l}function Do(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Mo(e,t,i,n){let o=t.borderSkipped;const r={};if(!o)return void(e.borderSkipped=r);if(!0===o)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:a,reverse:l,top:c,bottom:d}=function(e){let t,i,n,o,r;return e.horizontal?(t=e.base>e.x,i="left",n="right"):(t=e.base<e.y,i="bottom",n="top"),t?(o="end",r="start"):(o="start",r="end"),{start:i,end:n,reverse:t,top:o,bottom:r}}(e);"middle"===o&&i&&(e.enableBorderRadius=!0,(i._top||0)===n?o=c:(i._bottom||0)===n?o=d:(r[Po(d,s,a,l)]=!0,o=c)),r[Po(o,s,a,l)]=!0,e.borderSkipped=r}function Po(e,t,i,n){var o,r,s;return n?(s=i,e=Ro(e=(o=e)===(r=t)?s:o===s?r:o,i,t)):e=Ro(e,t,i),e}function Ro(e,t,i){return"start"===e?t:"end"===e?i:e}function Io(e,{inflateAmount:t},i){e.inflateAmount="auto"===t?1===i?.33:0:t}class Oo extends On{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:n}}=e.legend.options;return t.labels.map((t,o)=>{const r=e.getDatasetMeta(0).controller.getStyle(o);return{text:t,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,fontColor:n,lineWidth:r.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,n=this._cachedMeta;if(!1===this._parsing)n._parsed=i;else{let o,s,a=e=>+i[e];if(r(i[e])){const{key:e="value"}=this._parsing;a=t=>+_(i[t],e)}for(o=e,s=e+t;o<s;++o)n._parsed[o]=a(o)}}_getRotation(){return V(this.options.rotation-90)}_getCircumference(){return V(this.options.circumference)}_getRotationExtents(){let e=D,t=-D;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const n=this.chart.getDatasetMeta(i).controller,o=n._getRotation(),r=n._getCircumference();e=Math.min(e,o),t=Math.max(t,o+r)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,n=this._cachedMeta,o=n.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,s=Math.max((Math.min(i.width,i.height)-r)/2,0),a=Math.min(c(this.options.cutout,s),1),l=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:f,offsetY:m}=function(e,t,i){let n=1,o=1,r=0,s=0;if(t<D){const a=e,l=a+t,c=Math.cos(a),d=Math.sin(a),u=Math.cos(l),h=Math.sin(l),p=(e,t,n)=>Z(e,a,l,!0)?1:Math.max(t,t*i,n,n*i),g=(e,t,n)=>Z(e,a,l,!0)?-1:Math.min(t,t*i,n,n*i),f=p(0,c,u),m=p(I,d,h),v=g(k,c,u),b=g(k+I,d,h);n=(f-v)/2,o=(m-b)/2,r=-(f+v)/2,s=-(m+b)/2}return{ratioX:n,ratioY:o,offsetX:r,offsetY:s}}(h,u,a),v=(i.width-r)/p,b=(i.height-r)/g,y=Math.max(Math.min(v,b)/2,0),w=d(this.options.radius,y),C=(w-Math.max(w*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=f*w,this.offsetY=m*w,n.total=this.calculateTotal(),this.outerRadius=w-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*l,0),this.updateElements(o,0,o.length,e)}_circumference(e,t){const i=this.options,n=this._cachedMeta,o=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||null===n._parsed[e]||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*o/D)}updateElements(e,t,i,n){const o="reset"===n,r=this.chart,s=r.chartArea,a=r.options.animation,l=(s.left+s.right)/2,c=(s.top+s.bottom)/2,d=o&&a.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:p,includeOptions:g}=this._getSharedOptions(t,n);let f,m=this._getRotation();for(f=0;f<t;++f)m+=this._circumference(f,o);for(f=t;f<t+i;++f){const t=this._circumference(f,o),i=e[f],r={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:h,innerRadius:u};g&&(r.options=p||this.resolveDataElementOptions(f,i.active?"active":n)),m+=t,this.updateElement(i,f,r,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i,n=0;for(i=0;i<t.length;i++){const o=e._parsed[i];null===o||isNaN(o)||!this.chart.getDataVisibility(i)||t[i].hidden||(n+=Math.abs(o))}return n}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?D*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,n=i.data.labels||[],o=et(t._parsed[e],i.options.locale);return{label:n[e]||"",value:o}}getMaxBorderWidth(e){let t=0;const i=this.chart;let n,o,r,s,a;if(!e)for(n=0,o=i.data.datasets.length;n<o;++n)if(i.isDatasetVisible(n)){r=i.getDatasetMeta(n),e=r.data,s=r.controller;break}if(!e)return 0;for(n=0,o=e.length;n<o;++n)a=s.resolveDataElementOptions(n),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,n=e.length;i<n;++i){const e=this.resolveDataElementOptions(i);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(l(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class No extends On{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:n}}=e.legend.options;return t.labels.map((t,o)=>{const r=e.getDatasetMeta(0).controller.getStyle(o);return{text:t,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,fontColor:n,lineWidth:r.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,n=i.data.labels||[],o=et(t._parsed[e].r,i.options.locale);return{label:n[e]||"",value:o}}parseObjectData(e,t,i,n){return Xt.bind(this)(e,t,i,n)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,i)=>{const n=this.getParsed(i).r;!isNaN(n)&&this.chart.getDataVisibility(i)&&(n<t.min&&(t.min=n),n>t.max&&(t.max=n))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,n=Math.min(t.right-t.left,t.bottom-t.top),o=Math.max(n/2,0),r=(o-Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=o-r*this.index,this.innerRadius=this.outerRadius-r}updateElements(e,t,i,n){const o="reset"===n,r=this.chart,s=r.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,d=a.getIndexAngle(0)-.5*k;let u,h=d;const p=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,n,p);for(u=t;u<t+i;u++){const t=e[u];let i=h,g=h+this._computeAngle(u,n,p),f=r.getDataVisibility(u)?a.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=g,o&&(s.animateScale&&(f=0),s.animateRotate&&(i=g=d));const m={x:l,y:c,innerRadius:0,outerRadius:f,startAngle:i,endAngle:g,options:this.resolveDataElementOptions(u,t.active?"active":n)};this.updateElement(t,u,m,n)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?V(this.resolveDataElementOptions(e,t).angle||i):0}}var Lo=Object.freeze({__proto__:null,BarController:class extends On{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,i,n){return ko(e,t,i,n)}parseArrayData(e,t,i,n){return ko(e,t,i,n)}parseObjectData(e,t,i,n){const{iScale:o,vScale:r}=e,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l="x"===o.axis?s:a,c="x"===r.axis?s:a,d=[];let u,h,p,g;for(u=i,h=i+n;u<h;++u)g=t[u],p={},p[o.axis]=o.parse(_(g,l),u),d.push(To(_(g,c),p,r,u));return d}updateRangeFromParsed(e,t,i,n){super.updateRangeFromParsed(e,t,i,n);const o=i._custom;o&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:n}=t,o=this.getParsed(e),r=o._custom,s=Do(r)?"["+r.start+", "+r.end+"]":""+n.getLabelForValue(o[n.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,o){const r="reset"===o,{index:s,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),d=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,o);for(let p=t;p<t+i;p++){const t=this.getParsed(p),i=r||n(t[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),g=this._calculateBarIndexPixels(p,d),f=(t._stacks||{})[a.axis],m={horizontal:c,base:i.base,enableBorderRadius:!f||Do(t._custom)||s===f._top||s===f._bottom,x:c?i.head:g.center,y:c?g.center:i.head,height:c?g.size:Math.abs(i.size),width:c?Math.abs(i.size):g.size};h&&(m.options=u||this.resolveDataElementOptions(p,e[p].active?"active":o));const v=m.options||e[p].options;Mo(m,v,f,s),Io(m,v,d.ratio),this.updateElement(e[p],p,m,o)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,o=i.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),r=i.options.stacked,s=[],a=this._cachedMeta.controller.getParsed(t),l=a&&a[i.axis],c=e=>{const t=e._parsed.find(e=>e[i.axis]===l),o=t&&t[e.vScale.axis];if(n(o)||isNaN(o))return!0};for(const i of o)if((void 0===t||!c(i))&&((!1===r||-1===s.indexOf(i.stack)||void 0===r&&void 0===i.stack)&&s.push(i.stack),i.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,i){const n=this._getStacks(e,i),o=void 0!==t?n.indexOf(t):-1;return-1===o?n.length-1:o}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,n=[];let o,r;for(o=0,r=t.data.length;o<r;++o)n.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const s=e.barThickness;return{min:s||Eo(t),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:s?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:o},options:{base:r,minBarLength:s}}=this,a=r||0,l=this.getParsed(e),c=l._custom,d=Do(c);let u,h,p=l[t.axis],g=0,f=i?this.applyStack(t,l,i):p;f!==p&&(g=f-p,f=p),d&&(p=c.barStart,f=c.barEnd-c.barStart,0!==p&&F(p)!==F(c.barEnd)&&(g=0),g+=p);const m=n(r)||d?g:r;let v=t.getPixelForValue(m);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(g+f):v,h=u-v,Math.abs(h)<s){h=function(e,t,i){return 0!==e?F(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}(h,t,a)*s,p===a&&(v-=h/2);const e=t.getPixelForDecimal(0),n=t.getPixelForDecimal(1),r=Math.min(e,n),c=Math.max(e,n);v=Math.max(Math.min(v,c),r),u=v+h,i&&!d&&(l._stacks[t.axis]._visualValues[o]=t.getValueForPixel(u)-t.getValueForPixel(v))}if(v===t.getPixelForValue(a)){const e=F(h)*t.getLineWidthForValue(a)/2;v+=e,h-=e}return{size:h,base:v,head:u,center:u+h/2}}_calculateBarIndexPixels(e,t){const i=t.scale,o=this.options,r=o.skipNull,s=l(o.maxBarThickness,1/0);let a,c;if(t.grouped){const i=r?this._getStackCount(e):t.stackCount,l="flex"===o.barThickness?function(e,t,i,n){const o=t.pixels,r=o[e];let s=e>0?o[e-1]:null,a=e<o.length-1?o[e+1]:null;const l=i.categoryPercentage;null===s&&(s=r-(null===a?t.end-t.start:a-r)),null===a&&(a=r+r-s);const c=r-(r-Math.min(s,a))/2*l;return{chunk:Math.abs(a-s)/2*l/n,ratio:i.barPercentage,start:c}}(e,t,o,i):function(e,t,i,o){const r=i.barThickness;let s,a;return n(r)?(s=t.min*i.categoryPercentage,a=i.barPercentage):(s=r*o,a=1),{chunk:s/o,ratio:a,start:t.pixels[e]-s/2}}(e,t,o,i),d=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);a=l.start+l.chunk*d+l.chunk/2,c=Math.min(s,l.chunk*l.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),c=Math.min(s,t.min*t.ratio);return{base:a-c/2,head:a+c/2,center:a,size:c}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,n=i.length;let o=0;for(;o<n;++o)null===this.getParsed(o)[t.axis]||i[o].hidden||i[o].draw(this._ctx)}},BubbleController:class extends On{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,n){const o=super.parsePrimitiveData(e,t,i,n);for(let e=0;e<o.length;e++)o[e]._custom=this.resolveDataElementOptions(e+i).radius;return o}parseArrayData(e,t,i,n){const o=super.parseArrayData(e,t,i,n);for(let e=0;e<o.length;e++){const n=t[i+e];o[e]._custom=l(n[2],this.resolveDataElementOptions(e+i).radius)}return o}parseObjectData(e,t,i,n){const o=super.parseObjectData(e,t,i,n);for(let e=0;e<o.length;e++){const n=t[i+e];o[e]._custom=l(n&&n.r&&+n.r,this.resolveDataElementOptions(e+i).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:o}=t,r=this.getParsed(e),s=n.getLabelForValue(r.x),a=o.getLabelForValue(r.y),l=r._custom;return{label:i[e]||"",value:"("+s+", "+a+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,n){const o="reset"===n,{iScale:r,vScale:s}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(t,n),c=r.axis,d=s.axis;for(let u=t;u<t+i;u++){const t=e[u],i=!o&&this.getParsed(u),h={},p=h[c]=o?r.getPixelForDecimal(.5):r.getPixelForValue(i[c]),g=h[d]=o?s.getBasePixel():s.getPixelForValue(i[d]);h.skip=isNaN(p)||isNaN(g),l&&(h.options=a||this.resolveDataElementOptions(u,t.active?"active":n),o&&(h.options.radius=0)),this.updateElement(t,u,h,n)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let n=super.resolveDataElementOptions(e,t);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const o=n.radius;return"active"!==t&&(n.radius=0),n.radius+=l(i&&i._custom,o),n}},DoughnutController:Oo,LineController:class extends On{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:n=[],_dataset:o}=t,r=this.chart._animationsDisabled;let{start:s,count:a}=fe(t,n,r);this._drawStart=s,this._drawCount=a,me(t)&&(s=0,a=n.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=n;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:l},e),this.updateElements(n,s,a,e)}updateElements(e,t,i,o){const r="reset"===o,{iScale:s,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,o),h=s.axis,p=a.axis,{spanGaps:g,segment:f}=this.options,m=H(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||"none"===o,b=t+i,y=e.length;let w=t>0&&this.getParsed(t-1);for(let i=0;i<y;++i){const g=e[i],y=v?g:{};if(i<t||i>=b){y.skip=!0;continue}const C=this.getParsed(i),_=n(C[p]),S=y[h]=s.getPixelForValue(C[h],i),x=y[p]=r||_?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,C,l):C[p],i);y.skip=isNaN(S)||isNaN(x)||_,y.stop=i>0&&Math.abs(C[h]-w[h])>m,f&&(y.parsed=C,y.raw=c.data[i]),u&&(y.options=d||this.resolveDataElementOptions(i,g.active?"active":o)),v||this.updateElement(g,i,y,o),w=C}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return i;const o=n[0].size(this.resolveDataElementOptions(0)),r=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,o,r)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}},PieController:class extends Oo{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:No,RadarController:class extends On{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,n){return Xt.bind(this)(e,t,i,n)}update(e){const t=this._cachedMeta,i=t.dataset,n=t.data||[],o=t.iScale.getLabels();if(i.points=n,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const r={_loop:!0,_fullLoop:o.length===n.length,options:t};this.updateElement(i,void 0,r,e)}this.updateElements(n,0,n.length,e)}updateElements(e,t,i,n){const o=this._cachedMeta.rScale,r="reset"===n;for(let s=t;s<t+i;s++){const t=e[s],i=this.resolveDataElementOptions(s,t.active?"active":n),a=o.getPointPositionForValue(s,this.getParsed(s).r),l=r?o.xCenter:a.x,c=r?o.yCenter:a.y,d={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:i};this.updateElement(t,s,d,n)}}},ScatterController:class extends On{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:o}=t,r=this.getParsed(e),s=n.getLabelForValue(r.x),a=o.getLabelForValue(r.y);return{label:i[e]||"",value:"("+s+", "+a+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,n=this.chart._animationsDisabled;let{start:o,count:r}=fe(t,i,n);if(this._drawStart=o,this._drawCount=r,me(t)&&(o=0,r=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:r}=t;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!r._decimated,o.points=i;const s=this.resolveDatasetElementOptions(e);s.segment=this.options.segment,this.updateElement(o,void 0,{animated:!n,options:s},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,o,r,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,o){const r="reset"===o,{iScale:s,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,d=this.resolveDataElementOptions(t,o),u=this.getSharedOptions(d),h=this.includeOptions(o,u),p=s.axis,g=a.axis,{spanGaps:f,segment:m}=this.options,v=H(f)?f:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||"none"===o;let y=t>0&&this.getParsed(t-1);for(let d=t;d<t+i;++d){const t=e[d],i=this.getParsed(d),f=b?t:{},w=n(i[g]),C=f[p]=s.getPixelForValue(i[p],d),_=f[g]=r||w?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,i,l):i[g],d);f.skip=isNaN(C)||isNaN(_)||w,f.stop=d>0&&Math.abs(i[p]-y[p])>v,m&&(f.parsed=i,f.raw=c.data[d]),h&&(f.options=u||this.resolveDataElementOptions(d,t.active?"active":o)),b||this.updateElement(t,d,f,o),y=i}this.updateSharedOptions(u,o,d)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}const i=e.dataset,n=i.options&&i.options.borderWidth||0;if(!t.length)return n;const o=t[0].size(this.resolveDataElementOptions(0)),r=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(n,o,r)/2}}});function Fo(e,t,i,n){return{x:i+e*Math.cos(t),y:n+e*Math.sin(t)}}function $o(e,t,i,n,o,r){const{x:s,y:a,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+n+i-c,0),h=d>0?d+n+i+c:0;let p=0;const g=o-l;if(n){const e=((d>0?d-n:0)+(u>0?u-n:0))/2;p=(g-(0!==e?g*e/(e+n):g))/2}const f=(g-Math.max(.001,g*u-i/k)/u)/2,m=l+f+p,v=o-f-p,{outerStart:b,outerEnd:y,innerStart:w,innerEnd:C}=function(e,t,i,n){const o=fi(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),r=(i-t)/2,s=Math.min(r,n*t/2),a=e=>{const t=(i-Math.min(r,e))*n/2;return J(e,0,Math.min(r,t))};return{outerStart:a(o.outerStart),outerEnd:a(o.outerEnd),innerStart:J(o.innerStart,0,s),innerEnd:J(o.innerEnd,0,s)}}(t,h,u,v-m),_=u-b,S=u-y,x=m+b/_,A=v-y/S,E=h+w,T=h+C,D=m+w/E,M=v-C/T;if(e.beginPath(),r){const t=(x+A)/2;if(e.arc(s,a,u,x,t),e.arc(s,a,u,t,A),y>0){const t=Fo(S,A,s,a);e.arc(t.x,t.y,y,A,v+I)}const i=Fo(T,v,s,a);if(e.lineTo(i.x,i.y),C>0){const t=Fo(T,M,s,a);e.arc(t.x,t.y,C,v+I,M+Math.PI)}const n=(v-C/h+(m+w/h))/2;if(e.arc(s,a,h,v-C/h,n,!0),e.arc(s,a,h,n,m+w/h,!0),w>0){const t=Fo(E,D,s,a);e.arc(t.x,t.y,w,D+Math.PI,m-I)}const o=Fo(_,m,s,a);if(e.lineTo(o.x,o.y),b>0){const t=Fo(_,x,s,a);e.arc(t.x,t.y,b,m-I,x)}}else{e.moveTo(s,a);const t=Math.cos(x)*u+s,i=Math.sin(x)*u+a;e.lineTo(t,i);const n=Math.cos(A)*u+s,o=Math.sin(A)*u+a;e.lineTo(n,o)}e.closePath()}function Go(e,t,i=t){e.lineCap=l(i.borderCapStyle,t.borderCapStyle),e.setLineDash(l(i.borderDash,t.borderDash)),e.lineDashOffset=l(i.borderDashOffset,t.borderDashOffset),e.lineJoin=l(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=l(i.borderWidth,t.borderWidth),e.strokeStyle=l(i.borderColor,t.borderColor)}function Bo(e,t,i){e.lineTo(i.x,i.y)}function Ho(e,t,i={}){const n=e.length,{start:o=0,end:r=n-1}=i,{start:s,end:a}=t,l=Math.max(o,s),c=Math.min(r,a),d=o<s&&r<s||o>a&&r>a;return{count:n,start:l,loop:t.loop,ilen:c<l&&!d?n+c-l:c-l}}function zo(e,t,i,n){const{points:o,options:r}=t,{count:s,start:a,loop:l,ilen:c}=Ho(o,i,n),d=function(e){return e.stepped?Pt:e.tension||"monotone"===e.cubicInterpolationMode?Rt:Bo}(r);let u,h,p,{move:g=!0,reverse:f}=n||{};for(u=0;u<=c;++u)h=o[(a+(f?c-u:u))%s],h.skip||(g?(e.moveTo(h.x,h.y),g=!1):d(e,p,h,f,r.stepped),p=h);return l&&(h=o[(a+(f?c:0))%s],d(e,p,h,f,r.stepped)),!!l}function Wo(e,t,i,n){const o=t.points,{count:r,start:s,ilen:a}=Ho(o,i,n),{move:l=!0,reverse:c}=n||{};let d,u,h,p,g,f,m=0,v=0;const b=e=>(s+(c?a-e:e))%r,y=()=>{p!==g&&(e.lineTo(m,g),e.lineTo(m,p),e.lineTo(m,f))};for(l&&(u=o[b(0)],e.moveTo(u.x,u.y)),d=0;d<=a;++d){if(u=o[b(d)],u.skip)continue;const t=u.x,i=u.y,n=0|t;n===h?(i<p?p=i:i>g&&(g=i),m=(v*m+t)/++v):(y(),e.lineTo(t,i),h=n,v=0,p=g=i),f=i}y()}function Vo(e){const t=e.options,i=t.borderDash&&t.borderDash.length;return e._decimated||e._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||i?zo:Wo}const jo="function"==typeof Path2D;class Uo extends Nn{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){const n=i.spanGaps?this._loop:this._fullLoop;ni(this._points,i,e,n,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Mi(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,n=e[t],o=this.points,r=Di(this,{property:t,start:n,end:n});if(!r.length)return;const s=[],a=function(e){return e.stepped?ci:e.tension||"monotone"===e.cubicInterpolationMode?di:li}(i);let l,c;for(l=0,c=r.length;l<c;++l){const{start:c,end:d}=r[l],u=o[c],h=o[d];if(u===h){s.push(u);continue}const p=a(u,h,Math.abs((n-u[t])/(h[t]-u[t])),i.stepped);p[t]=e[t],s.push(p)}return 1===s.length?s[0]:s}pathSegment(e,t,i){return Vo(this)(e,this,t,i)}path(e,t,i){const n=this.segments,o=Vo(this);let r=this._loop;t=t||0,i=i||this.points.length-t;for(const s of n)r&=o(e,this,s,{start:t,end:t+i-1});return!!r}draw(e,t,i,n){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),function(e,t,i,n){jo&&!t.options.segment?function(e,t,i,n){let o=t._path;o||(o=t._path=new Path2D,t.path(o,i,n)&&o.closePath()),Go(e,t.options),e.stroke(o)}(e,t,i,n):function(e,t,i,n){const{segments:o,options:r}=t,s=Vo(t);for(const a of o)Go(e,r,a.style),e.beginPath(),s(e,t,a,{start:i,end:i+n-1})&&e.closePath(),e.stroke()}(e,t,i,n)}(e,this,i,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Yo(e,t,i,n){const o=e.options,{[i]:r}=e.getProps([i],n);return Math.abs(t-r)<o.radius+o.hitRadius}function qo(e,t){const{x:i,y:n,base:o,width:r,height:s}=e.getProps(["x","y","base","width","height"],t);let a,l,c,d,u;return e.horizontal?(u=s/2,a=Math.min(i,o),l=Math.max(i,o),c=n-u,d=n+u):(u=r/2,a=i-u,l=i+u,c=Math.min(n,o),d=Math.max(n,o)),{left:a,top:c,right:l,bottom:d}}function Ko(e,t,i,n){return e?0:J(t,i,n)}function Xo(e){const t=qo(e),i=t.right-t.left,n=t.bottom-t.top,o=function(e,t,i){const n=e.options.borderWidth,o=e.borderSkipped,r=mi(n);return{t:Ko(o.top,r.top,0,i),r:Ko(o.right,r.right,0,t),b:Ko(o.bottom,r.bottom,0,i),l:Ko(o.left,r.left,0,t)}}(e,i/2,n/2),s=function(e,t,i){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),o=e.options.borderRadius,s=vi(o),a=Math.min(t,i),l=e.borderSkipped,c=n||r(o);return{topLeft:Ko(!c||l.top||l.left,s.topLeft,0,a),topRight:Ko(!c||l.top||l.right,s.topRight,0,a),bottomLeft:Ko(!c||l.bottom||l.left,s.bottomLeft,0,a),bottomRight:Ko(!c||l.bottom||l.right,s.bottomRight,0,a)}}(e,i/2,n/2);return{outer:{x:t.left,y:t.top,w:i,h:n,radius:s},inner:{x:t.left+o.l,y:t.top+o.t,w:i-o.l-o.r,h:n-o.t-o.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,s.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(o.b,o.r))}}}}function Zo(e,t,i,n){const o=null===t,r=null===i,s=e&&!(o&&r)&&qo(e,n);return s&&(o||ee(t,s.left,s.right))&&(r||ee(i,s.top,s.bottom))}function Jo(e,t){e.rect(t.x,t.y,t.w,t.h)}function Qo(e,t,i={}){const n=e.x!==i.x?-t:0,o=e.y!==i.y?-t:0,r=(e.x+e.w!==i.x+i.w?t:0)-n,s=(e.y+e.h!==i.y+i.h?t:0)-o;return{x:e.x+n,y:e.y+o,w:e.w+r,h:e.h+s,radius:e.radius}}var er=Object.freeze({__proto__:null,ArcElement:class extends Nn{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const n=this.getProps(["x","y"],i),{angle:o,distance:r}=Y(n,{x:e,y:t}),{startAngle:s,endAngle:a,innerRadius:c,outerRadius:d,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=(this.options.spacing+this.options.borderWidth)/2,p=l(u,a-s),g=Z(o,s,a)&&s!==a,f=p>=D||g,m=ee(r,c+h,d+h);return f&&m}getCenterPoint(e){const{x:t,y:i,startAngle:n,endAngle:o,innerRadius:r,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:l}=this.options,c=(n+o)/2,d=(r+s+l+a)/2;return{x:t+Math.cos(c)*d,y:i+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,n=(t.offset||0)/4,o=(t.spacing||0)/2,r=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=i>D?Math.floor(i/D):0,0===i||this.innerRadius<0||this.outerRadius<0)return;e.save();const s=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(s)*n,Math.sin(s)*n);const a=n*(1-Math.sin(Math.min(k,i||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,i,n,o){const{fullCircles:r,startAngle:s,circumference:a}=t;let l=t.endAngle;if(r){$o(e,t,i,n,l,o);for(let t=0;t<r;++t)e.fill();isNaN(a)||(l=s+(a%D||D))}$o(e,t,i,n,l,o),e.fill()}(e,this,a,o,r),function(e,t,i,n,o){const{fullCircles:r,startAngle:s,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=h,p?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let g=t.endAngle;if(r){$o(e,t,i,n,g,o);for(let t=0;t<r;++t)e.stroke();isNaN(a)||(g=s+(a%D||D))}p&&function(e,t,i){const{startAngle:n,pixelMargin:o,x:r,y:s,outerRadius:a,innerRadius:l}=t;let c=o/a;e.beginPath(),e.arc(r,s,a,n-c,i+c),l>o?(c=o/l,e.arc(r,s,l,i+c,n-c,!0)):e.arc(r,s,o,i+I,n-I),e.closePath(),e.clip()}(e,t,g),r||($o(e,t,i,n,g,o),e.stroke())}(e,this,a,o,r),e.restore()}},BarElement:class extends Nn{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:n}}=this,{inner:o,outer:r}=Xo(this),s=(a=r.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?Lt:Jo;var a;e.save(),r.w===o.w&&r.h===o.h||(e.beginPath(),s(e,Qo(r,t,o)),e.clip(),s(e,Qo(o,-t,r)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),s(e,Qo(o,t)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,t,i){return Zo(this,e,t,i)}inXRange(e,t){return Zo(this,e,null,t)}inYRange(e,t){return Zo(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:n,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(t+n)/2:t,y:o?i:(i+n)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}},LineElement:Uo,PointElement:class extends Nn{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const n=this.options,{x:o,y:r}=this.getProps(["x","y"],i);return Math.pow(e-o,2)+Math.pow(t-r,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,t){return Yo(this,e,"x",t)}inYRange(e,t){return Yo(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){let t=(e=e||this.options||{}).radius||0;return t=Math.max(t,t&&e.hoverRadius||0),2*(t+(t&&e.borderWidth||0))}draw(e,t){const i=this.options;this.skip||i.radius<.1||!kt(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,Et(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}});function tr(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}function ir(e,t,{horizontal:i,minRotation:n}){const o=V(n),r=(i?Math.sin(o):Math.cos(o))||.001,s=.75*t*(""+e).length;return Math.min(t/r,s)}class nr extends jn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return n(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:n,max:o}=this;const r=e=>n=t?n:e,s=e=>o=i?o:e;if(e){const e=F(n),t=F(o);e<0&&t<0?s(0):e>0&&t>0&&r(0)}if(n===o){let t=0===o?1:Math.abs(.05*o);s(o+t),e||r(n-t)}this.min=n,this.max=o}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:i,stepSize:n}=e;return n?(t=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),i=i||11),i&&(t=Math.min(i,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const o=function(e,t){const i=[],{bounds:o,step:r,min:s,max:a,precision:l,count:c,maxTicks:d,maxDigits:u,includeBounds:h}=e,p=r||1,g=d-1,{min:f,max:m}=t,v=!n(s),b=!n(a),y=!n(c),w=(m-f)/(u+1);let C,_,S,x,A=G((m-f)/g/p)*p;if(A<1e-14&&!v&&!b)return[{value:f},{value:m}];x=Math.ceil(m/A)-Math.floor(f/A),x>g&&(A=G(x*A/g/p)*p),n(l)||(C=Math.pow(10,l),A=Math.ceil(A*C)/C),"ticks"===o?(_=Math.floor(f/A)*A,S=Math.ceil(m/A)*A):(_=f,S=m),v&&b&&r&&z((a-s)/r,A/1e3)?(x=Math.round(Math.min((a-s)/A,d)),A=(a-s)/x,_=s,S=a):y?(_=v?s:_,S=b?a:S,x=c-1,A=(S-_)/x):(x=(S-_)/A,x=$(x,Math.round(x),A/1e3)?Math.round(x):Math.ceil(x));const E=Math.max(U(A),U(_));C=Math.pow(10,n(l)?E:l),_=Math.round(_*C)/C,S=Math.round(S*C)/C;let T=0;for(v&&(h&&_!==s?(i.push({value:s}),_<s&&T++,$(Math.round((_+T*A)*C)/C,s,ir(s,w,e))&&T++):_<s&&T++);T<x;++T){const e=Math.round((_+T*A)*C)/C;if(b&&e>a)break;i.push({value:e})}return b&&h&&S!==a?i.length&&$(i[i.length-1].value,a,ir(a,w,e))?i[i.length-1].value=a:i.push({value:a}):b&&S!==a||i.push({value:S}),i}({maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&W(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const n=(i-t)/Math.max(e.length-1,1)/2;t-=n,i+=n}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return et(e,this.chart.options.locale,this.options.ticks.format)}}class or extends nr{static id="linear";static defaults={ticks:{callback:it.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=s(e)?e:0,this.max=s(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=V(this.options.ticks.minRotation),n=(e?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/n))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const rr=e=>Math.floor(L(e)),sr=(e,t)=>Math.pow(10,rr(e)+t);function ar(e){return 1===e/Math.pow(10,rr(e))}function lr(e,t,i){const n=Math.pow(10,i),o=Math.floor(e/n);return Math.ceil(t/n)-o}class cr extends jn{static id="logarithmic";static defaults={ticks:{callback:it.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=nr.prototype.parse.apply(this,[e,t]);if(0!==i)return s(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=s(e)?Math.max(0,e):null,this.max=s(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!s(this._userMin)&&(this.min=e===sr(this.min,0)?sr(this.min,-1):sr(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,n=this.max;const o=t=>i=e?i:t,r=e=>n=t?n:e;i===n&&(i<=0?(o(1),r(10)):(o(sr(i,-1)),r(sr(n,1)))),i<=0&&o(sr(n,-1)),n<=0&&r(sr(i,1)),this.min=i,this.max=n}buildTicks(){const e=this.options,t=function(e,{min:t,max:i}){t=a(e.min,t);const n=[],o=rr(t);let r=function(e,t){let i=rr(t-e);for(;lr(e,t,i)>10;)i++;for(;lr(e,t,i)<10;)i--;return Math.min(i,rr(e))}(t,i),s=r<0?Math.pow(10,Math.abs(r)):1;const l=Math.pow(10,r),c=o>r?Math.pow(10,o):0,d=Math.round((t-c)*s)/s,u=Math.floor((t-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,r)),p=a(e.min,Math.round((c+u+h*Math.pow(10,r))*s)/s);for(;p<i;)n.push({value:p,major:ar(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,s=r>=0?1:s),p=Math.round((c+u+h*Math.pow(10,r))*s)/s;const g=a(e.max,p);return n.push({value:g,major:ar(g),significand:h}),n}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&W(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":et(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=L(e),this._valueRange=L(this.max)-L(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(L(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function dr(e){const t=e.ticks;if(t.display&&e.display){const e=bi(t.backdropPadding);return l(t.font&&t.font.size,at.font.size)+e.height}return 0}function ur(e,t,i,n,o){return e===n||e===o?{start:t-i/2,end:t+i/2}:e<n||e>o?{start:t-i,end:t}:{start:t,end:t+i}}function hr(e,t,i,n,o){const r=Math.abs(Math.sin(i)),s=Math.abs(Math.cos(i));let a=0,l=0;n.start<t.l?(a=(t.l-n.start)/r,e.l=Math.min(e.l,t.l-a)):n.end>t.r&&(a=(n.end-t.r)/r,e.r=Math.max(e.r,t.r+a)),o.start<t.t?(l=(t.t-o.start)/s,e.t=Math.min(e.t,t.t-l)):o.end>t.b&&(l=(o.end-t.b)/s,e.b=Math.max(e.b,t.b+l))}function pr(e,t,i){const n=e.drawingArea,{extra:o,additionalAngle:r,padding:s,size:a}=i,l=e.getPointPosition(t,n+o+s,r),c=Math.round(j(X(l.angle+I))),d=function(e,t,i){return 90===i||270===i?e-=t/2:(i>270||i<90)&&(e-=t),e}(l.y,a.h,c),u=function(e){return 0===e||180===e?"center":e<180?"left":"right"}(c),h=function(e,t,i){return"right"===i?e-=t:"center"===i&&(e-=t/2),e}(l.x,a.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:h,top:d,right:h+a.w,bottom:d+a.h}}function gr(e,t){if(!t)return!0;const{left:i,top:n,right:o,bottom:r}=e;return!(kt({x:i,y:n},t)||kt({x:i,y:r},t)||kt({x:o,y:n},t)||kt({x:o,y:r},t))}function fr(e,t,i){const{left:o,top:r,right:s,bottom:a}=i,{backdropColor:l}=t;if(!n(l)){const i=vi(t.borderRadius),n=bi(t.backdropPadding);e.fillStyle=l;const c=o-n.left,d=r-n.top,u=s-o+n.width,h=a-r+n.height;Object.values(i).some(e=>0!==e)?(e.beginPath(),Lt(e,{x:c,y:d,w:u,h:h,radius:i}),e.fill()):e.fillRect(c,d,u,h)}}function mr(e,t,i,n){const{ctx:o}=e;if(i)o.arc(e.xCenter,e.yCenter,t,0,D);else{let i=e.getPointPosition(0,t);o.moveTo(i.x,i.y);for(let r=1;r<n;r++)i=e.getPointPosition(r,t),o.lineTo(i.x,i.y)}}class vr extends nr{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:it.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=bi(dr(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=s(e)&&!isNaN(e)?e:0,this.max=s(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/dr(this.options))}generateTickLabels(e){nr.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const i=u(this.options.pointLabels.callback,[e,t],this);return i||0===i?i:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?function(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),n=[],r=[],s=e._pointLabels.length,a=e.options.pointLabels,l=a.centerPointLabels?k/s:0;for(let h=0;h<s;h++){const s=a.setContext(e.getPointLabelContext(h));r[h]=s.padding;const p=e.getPointPosition(h,e.drawingArea+r[h],l),g=yi(s.font),f=(c=e.ctx,d=g,u=o(u=e._pointLabels[h])?u:[u],{w:St(c,d.string,u),h:u.length*d.lineHeight});n[h]=f;const m=X(e.getIndexAngle(h)+l),v=Math.round(j(m));hr(i,t,m,ur(v,p.x,f.w,0,180),ur(v,p.y,f.h,90,270))}var c,d,u;e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=function(e,t,i){const n=[],o=e._pointLabels.length,r=e.options,{centerPointLabels:s,display:a}=r.pointLabels,l={extra:dr(r)/2,additionalAngle:s?k/o:0};let c;for(let r=0;r<o;r++){l.padding=i[r],l.size=t[r];const o=pr(e,r,l);n.push(o),"auto"===a&&(o.visible=gr(o,c),o.visible&&(c=o))}return n}(e,n,r)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,n){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,n))}getIndexAngle(e){return X(e*(D/(this._pointLabels.length||1))+V(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(n(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(n(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return function(e,t,i){return _i(e,{label:i,index:t,type:"pointLabel"})}(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const n=this.getIndexAngle(e)-I+i;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter,angle:n}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:n,bottom:o}=this._pointLabelItems[e];return{left:t,top:i,right:n,bottom:o}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),mr(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:n,border:o}=t,r=this._pointLabels.length;let s,a,l;if(t.pointLabels.display&&function(e,t){const{ctx:i,options:{pointLabels:n}}=e;for(let o=t-1;o>=0;o--){const t=e._pointLabelItems[o];if(!t.visible)continue;const r=n.setContext(e.getPointLabelContext(o));fr(i,r,t);const s=yi(r.font),{x:a,y:l,textAlign:c}=t;Nt(i,e._pointLabels[o],a,l+s.lineHeight/2,s,{color:r.color,textAlign:c,textBaseline:"middle"})}}(this,r),n.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){a=this.getDistanceFromCenterForValue(e.value);const i=this.getContext(t),s=n.setContext(i),l=o.setContext(i);!function(e,t,i,n,o){const r=e.ctx,s=t.circular,{color:a,lineWidth:l}=t;!s&&!n||!a||!l||i<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(o.dash||[]),r.lineDashOffset=o.dashOffset,r.beginPath(),mr(e,i,s,n),r.closePath(),r.stroke(),r.restore())}(this,s,a,r,l)}}),i.display){for(e.save(),s=r-1;s>=0;s--){const n=i.setContext(this.getPointLabelContext(s)),{color:o,lineWidth:r}=n;r&&o&&(e.lineWidth=r,e.strokeStyle=o,e.setLineDash(n.borderDash),e.lineDashOffset=n.borderDashOffset,a=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(s,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const n=this.getIndexAngle(0);let o,r;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(n),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((n,s)=>{if(0===s&&this.min>=0&&!t.reverse)return;const a=i.setContext(this.getContext(s)),l=yi(a.font);if(o=this.getDistanceFromCenterForValue(this.ticks[s].value),a.showLabelBackdrop){e.font=l.string,r=e.measureText(n.label).width,e.fillStyle=a.backdropColor;const t=bi(a.backdropPadding);e.fillRect(-r/2-t.left,-o-l.size/2-t.top,r+t.width,l.size+t.height)}Nt(e,n.label,0,-o,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})}),e.restore()}drawTitle(){}}const br={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},yr=Object.keys(br);function wr(e,t){return e-t}function Cr(e,t){if(n(t))return null;const i=e._adapter,{parser:o,round:r,isoWeekday:a}=e._parseOpts;let l=t;return"function"==typeof o&&(l=o(l)),s(l)||(l="string"==typeof o?i.parse(l,o):i.parse(l)),null===l?null:(r&&(l="week"!==r||!H(a)&&!0!==a?i.startOf(l,r):i.startOf(l,"isoWeek",a)),+l)}function _r(e,t,i,n){const o=yr.length;for(let r=yr.indexOf(e);r<o-1;++r){const e=br[yr[r]],o=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((i-t)/(o*e.size))<=n)return yr[r]}return yr[o-1]}function Sr(e,t,i){if(i){if(i.length){const{lo:n,hi:o}=te(i,t);e[i[n]>=t?i[n]:i[o]]=!0}}else e[t]=!0}function xr(e,t,i){const n=[],o={},r=t.length;let s,a;for(s=0;s<r;++s)a=t[s],o[a]=s,n.push({value:a,major:!1});return 0!==r&&i?function(e,t,i,n){const o=e._adapter,r=+o.startOf(t[0].value,n),s=t[t.length-1].value;let a,l;for(a=r;a<=s;a=+o.add(a,1,n))l=i[a],l>=0&&(t[l].major=!0);return t}(e,n,o,i):n}class Ar extends jn{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),n=this._adapter=new Ao._date(e.adapters.date);n.init(t),b(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Cr(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:n,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(e){r||isNaN(e.min)||(n=Math.min(n,e.min)),a||isNaN(e.max)||(o=Math.max(o,e.max))}r&&a||(l(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||l(this.getMinMax(!1))),n=s(n)&&!isNaN(n)?n:+t.startOf(Date.now(),i),o=s(o)&&!isNaN(o)?o:+t.endOf(Date.now(),i)+1,this.min=Math.min(n,o-1),this.max=Math.max(n+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,n="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const o=this.min,r=oe(n,o,this.max);return this._unit=t.unit||(i.autoSkip?_r(t.minUnit,this.min,this.max,this._getLabelCapacity(o)):function(e,t,i,n,o){for(let r=yr.length-1;r>=yr.indexOf(i);r--){const i=yr[r];if(br[i].common&&e._adapter.diff(o,n,i)>=t-1)return i}return yr[i?yr.indexOf(i):0]}(this,r.length,t.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(e){for(let t=yr.indexOf(e)+1,i=yr.length;t<i;++t)if(br[yr[t]].common)return yr[t]}(this._unit):void 0,this.initOffsets(n),e.reverse&&r.reverse(),xr(this,r,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t,i,n=0,o=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),n=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,i=this.getDecimalForValue(e[e.length-1]),o=1===e.length?i:(i-this.getDecimalForValue(e[e.length-2]))/2);const r=e.length<3?.5:.25;n=J(n,0,r),o=J(o,0,r),this._offsets={start:n,end:o,factor:1/(n+1+o)}}_generate(){const e=this._adapter,t=this.min,i=this.max,n=this.options,o=n.time,r=o.unit||_r(o.minUnit,t,i,this._getLabelCapacity(t)),s=l(n.ticks.stepSize,1),a="week"===r&&o.isoWeekday,c=H(a)||!0===a,d={};let u,h,p=t;if(c&&(p=+e.startOf(p,"isoWeek",a)),p=+e.startOf(p,c?"day":r),e.diff(i,t,r)>1e5*s)throw new Error(t+" and "+i+" are too far apart with stepSize of "+s+" "+r);const g="data"===n.ticks.source&&this.getDataTimestamps();for(u=p,h=0;u<i;u=+e.add(u,s,r),h++)Sr(d,u,g);return u!==i&&"ticks"!==n.bounds&&1!==h||Sr(d,u,g),Object.keys(d).sort(wr).map(e=>+e)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,n=this._unit,o=t||i[n];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,n){const o=this.options,r=o.ticks.callback;if(r)return u(r,[e,t,i],this);const s=o.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&s[a],d=l&&s[l],h=i[t],p=l&&d&&h&&h.major;return this._adapter.format(e,n||(p?d:c))}generateTickLabels(e){let t,i,n;for(t=0,i=e.length;t<i;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,n=V(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(n),r=Math.sin(n),s=this._resolveTickFontOptions(0).size;return{w:i*o+s*r,h:i*r+s*o}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,n=i[t.unit]||i.millisecond,o=this._tickFormatFunction(e,0,xr(this,[e],this._majorUnit),n),r=this._getLabelSize(o),s=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return s>0?s:1}getDataTimestamps(){let e,t,i=this._cache.data||[];if(i.length)return i;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(e=0,t=n.length;e<t;++e)i=i.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const n=this.getLabels();for(t=0,i=n.length;t<i;++t)e.push(Cr(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return le(e.sort(wr))}}function Er(e,t,i){let n,o,r,s,a=0,l=e.length-1;i?(t>=e[a].pos&&t<=e[l].pos&&({lo:a,hi:l}=ie(e,"pos",t)),({pos:n,time:r}=e[a]),({pos:o,time:s}=e[l])):(t>=e[a].time&&t<=e[l].time&&({lo:a,hi:l}=ie(e,"time",t)),({time:n,pos:r}=e[a]),({time:o,pos:s}=e[l]));const c=o-n;return c?r+(s-r)*(t-n)/c:r}var Tr=Object.freeze({__proto__:null,CategoryScale:class extends jn{static id="category";static defaults={ticks:{callback:tr}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:i,label:n}of t)e[i]===n&&e.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(n(e))return null;const i=this.getLabels();return((e,t)=>null===e?null:J(Math.round(e),0,t))(t=isFinite(t)&&i[t]===e?t:function(e,t,i,n){const o=e.indexOf(t);return-1===o?((e,t,i,n)=>("string"==typeof t?(i=e.push(t)-1,n.unshift({index:i,label:t})):isNaN(t)&&(i=null),i))(e,t,i,n):o!==e.lastIndexOf(t)?i:o}(i,e,l(t,e),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(i=0),t||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,n=[];let o=this.getLabels();o=0===e&&t===o.length-1?o:o.slice(e,t+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let i=e;i<=t;i++)n.push({value:i});return n}getLabelForValue(e){return tr.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:or,LogarithmicScale:cr,RadialLinearScale:vr,TimeScale:Ar,TimeSeriesScale:class extends Ar{static id="timeseries";static defaults=Ar.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Er(t,this.min),this._tableRange=Er(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,n=[],o=[];let r,s,a,l,c;for(r=0,s=e.length;r<s;++r)l=e[r],l>=t&&l<=i&&n.push(l);if(n.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(r=0,s=n.length;r<s;++r)c=n[r+1],a=n[r-1],l=n[r],Math.round((c+a)/2)!==l&&o.push({time:l,pos:r/(s-1)});return o}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return i.includes(e)&&i.length||i.splice(0,0,e),i.includes(t)&&1!==i.length||i.push(t),i.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return e=t.length&&i.length?this.normalize(t.concat(i)):t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Er(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Er(this._table,i*this._tableRange+this._minPos,!0)}}});const kr=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Dr=kr.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function Mr(e){return kr[e%kr.length]}function Pr(e){return Dr[e%Dr.length]}function Rr(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}var Ir={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,i){if(!i.enabled)return;const{data:{datasets:n},options:o}=e.config,{elements:r}=o,s=Rr(n)||(a=o)&&(a.borderColor||a.backgroundColor)||r&&Rr(r)||"rgba(0,0,0,0.1)"!==at.borderColor||"rgba(0,0,0,0.1)"!==at.backgroundColor;var a;if(!i.forceOverride&&s)return;const l=function(e){let t=0;return(i,n)=>{const o=e.getDatasetMeta(n).controller;o instanceof Oo?t=function(e,t){return e.backgroundColor=e.data.map(()=>Mr(t++)),t}(i,t):o instanceof No?t=function(e,t){return e.backgroundColor=e.data.map(()=>Pr(t++)),t}(i,t):o&&(t=function(e,t){return e.borderColor=Mr(t),e.backgroundColor=Pr(t),++t}(i,t))}}(e);n.forEach(l)}};function Or(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Nr(e){e.data.datasets.forEach(e=>{Or(e)})}var Lr={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,i)=>{if(!i.enabled)return void Nr(e);const o=e.width;e.data.datasets.forEach((t,r)=>{const{_data:s,indexAxis:a}=t,l=e.getDatasetMeta(r),c=s||t.data;if("y"===wi([a,e.options.indexAxis]))return;if(!l.controller.supportsDecimation)return;const d=e.scales[l.xAxisID];if("linear"!==d.type&&"time"!==d.type)return;if(e.options.parsing)return;let u,{start:h,count:p}=function(e,t){const i=t.length;let n,o=0;const{iScale:r}=e,{min:s,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(o=J(ie(t,r.axis,s).lo,0,i-1)),n=c?J(ie(t,r.axis,a).hi+1,o,i)-o:i-o,{start:o,count:n}}(l,c);if(p<=(i.threshold||4*o))Or(t);else{switch(n(s)&&(t._data=c,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),i.algorithm){case"lttb":u=function(e,t,i,n,o){const r=o.samples||n;if(r>=i)return e.slice(t,t+i);const s=[],a=(i-2)/(r-2);let l=0;const c=t+i-1;let d,u,h,p,g,f=t;for(s[l++]=e[f],d=0;d<r-2;d++){let n,o=0,r=0;const c=Math.floor((d+1)*a)+1+t,m=Math.min(Math.floor((d+2)*a)+1,i)+t,v=m-c;for(n=c;n<m;n++)o+=e[n].x,r+=e[n].y;o/=v,r/=v;const b=Math.floor(d*a)+1+t,y=Math.min(Math.floor((d+1)*a)+1,i)+t,{x:w,y:C}=e[f];for(h=p=-1,n=b;n<y;n++)p=.5*Math.abs((w-o)*(e[n].y-C)-(w-e[n].x)*(r-C)),p>h&&(h=p,u=e[n],g=n);s[l++]=u,f=g}return s[l++]=e[c],s}(c,h,p,o,i);break;case"min-max":u=function(e,t,i,o){let r,s,a,l,c,d,u,h,p,g,f=0,m=0;const v=[],b=t+i-1,y=e[t].x,w=e[b].x-y;for(r=t;r<t+i;++r){s=e[r],a=(s.x-y)/w*o,l=s.y;const t=0|a;if(t===c)l<p?(p=l,d=r):l>g&&(g=l,u=r),f=(m*f+s.x)/++m;else{const i=r-1;if(!n(d)&&!n(u)){const t=Math.min(d,u),n=Math.max(d,u);t!==h&&t!==i&&v.push({...e[t],x:f}),n!==h&&n!==i&&v.push({...e[n],x:f})}r>0&&i!==h&&v.push(e[i]),v.push(s),c=t,m=0,p=g=l,d=u=h=r}}return v}(c,h,p,o);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}t._decimated=u}})},destroy(e){Nr(e)}};function Fr(e,t,i,n){if(n)return;let o=t[e],r=i[e];return"angle"===e&&(o=X(o),r=X(r)),{property:e,start:o,end:r}}function $r(e,t,i){for(;t>e;t--){const e=i[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function Gr(e,t,i,n){return e&&t?n(e[i],t[i]):e?e[i]:t?t[i]:0}function Br(e,t){let i=[],n=!1;return o(e)?(n=!0,i=e):i=function(e,t){const{x:i=null,y:n=null}=e||{},o=t.points,r=[];return t.segments.forEach(({start:e,end:t})=>{t=$r(e,t,o);const s=o[e],a=o[t];null!==n?(r.push({x:s.x,y:n}),r.push({x:a.x,y:n})):null!==i&&(r.push({x:i,y:s.y}),r.push({x:i,y:a.y}))}),r}(e,t),i.length?new Uo({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function Hr(e){return e&&!1!==e.fill}function zr(e,t,i){let n=e[t].fill;const o=[t];let r;if(!i)return n;for(;!1!==n&&-1===o.indexOf(n);){if(!s(n))return n;if(r=e[n],!r)return!1;if(r.visible)return n;o.push(n),n=r.fill}return!1}function Wr(e,t,i){const n=function(e){const t=e.options,i=t.fill;let n=l(i&&i.target,i);return void 0===n&&(n=!!t.backgroundColor),!1!==n&&null!==n&&(!0===n?"origin":n)}(e);if(r(n))return!isNaN(n.value)&&n;let o=parseFloat(n);return s(o)&&Math.floor(o)===o?function(e,t,i,n){return"-"!==e&&"+"!==e||(i=t+i),!(i===t||i<0||i>=n)&&i}(n[0],t,o,i):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Vr(e,t,i){const n=[];for(let o=0;o<i.length;o++){const r=i[o],{first:s,last:a,point:l}=jr(r,t,"x");if(!(!l||s&&a))if(s)n.unshift(l);else if(e.push(l),!a)break}e.push(...n)}function jr(e,t,i){const n=e.interpolate(t,i);if(!n)return{};const o=n[i],r=e.segments,s=e.points;let a=!1,l=!1;for(let e=0;e<r.length;e++){const t=r[e],n=s[t.start][i],c=s[t.end][i];if(ee(o,n,c)){a=o===n,l=o===c;break}}return{first:a,last:l,point:n}}class Ur{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:n,y:o,radius:r}=this;return t=t||{start:0,end:D},e.arc(n,o,r,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:n}=this,o=e.angle;return{x:t+Math.cos(o)*n,y:i+Math.sin(o)*n,angle:o}}}function Yr(e){const{chart:t,fill:i,line:n}=e;if(s(i))return function(e,t){const i=e.getDatasetMeta(t);return i&&e.isDatasetVisible(t)?i.dataset:null}(t,i);if("stack"===i)return function(e){const{scale:t,index:i,line:n}=e,o=[],r=n.segments,s=n.points,a=function(e,t){const i=[],n=e.getMatchingVisibleMetas("line");for(let e=0;e<n.length;e++){const o=n[e];if(o.index===t)break;o.hidden||i.unshift(o.dataset)}return i}(t,i);a.push(Br({x:null,y:t.bottom},n));for(let e=0;e<r.length;e++){const t=r[e];for(let e=t.start;e<=t.end;e++)Vr(o,s[e],a)}return new Uo({points:o,options:{}})}(e);if("shape"===i)return!0;const o=function(e){return(e.scale||{}).getPointPositionForValue?function(e){const{scale:t,fill:i}=e,n=t.options,o=t.getLabels().length,s=n.reverse?t.max:t.min,a=function(e,t,i){let n;return n="start"===e?i:"end"===e?t.options.reverse?t.min:t.max:r(e)?e.value:t.getBaseValue(),n}(i,t,s),l=[];if(n.grid.circular){const e=t.getPointPositionForValue(0,s);return new Ur({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(a)})}for(let e=0;e<o;++e)l.push(t.getPointPositionForValue(e,a));return l}(e):function(e){const{scale:t={},fill:i}=e,n=function(e,t){let i=null;return"start"===e?i=t.bottom:"end"===e?i=t.top:r(e)?i=t.getPixelForValue(e.value):t.getBasePixel&&(i=t.getBasePixel()),i}(i,t);if(s(n)){const e=t.isHorizontal();return{x:e?n:null,y:e?null:n}}return null}(e)}(e);return o instanceof Ur?o:Br(o,n)}function qr(e,t,i){const n=Yr(t),{line:o,scale:r,axis:s}=t,a=o.options,l=a.fill,c=a.backgroundColor,{above:d=c,below:u=c}=l||{};n&&o.points.length&&(Dt(e,i),function(e,t){const{line:i,target:n,above:o,below:r,area:s,scale:a}=t,l=i._loop?"angle":t.axis;e.save(),"x"===l&&r!==o&&(Kr(e,n,s.top),Xr(e,{line:i,target:n,color:o,scale:a,property:l}),e.restore(),e.save(),Kr(e,n,s.bottom)),Xr(e,{line:i,target:n,color:r,scale:a,property:l}),e.restore()}(e,{line:o,target:n,above:d,below:u,area:i,scale:r,axis:s}),Mt(e))}function Kr(e,t,i){const{segments:n,points:o}=t;let r=!0,s=!1;e.beginPath();for(const a of n){const{start:n,end:l}=a,c=o[n],d=o[$r(n,l,o)];r?(e.moveTo(c.x,c.y),r=!1):(e.lineTo(c.x,i),e.lineTo(c.x,c.y)),s=!!t.pathSegment(e,a,{move:s}),s?e.closePath():e.lineTo(d.x,i)}e.lineTo(t.first().x,i),e.closePath(),e.clip()}function Xr(e,t){const{line:i,target:n,property:o,color:r,scale:s}=t,a=function(e,t,i){const n=e.segments,o=e.points,r=t.points,s=[];for(const e of n){let{start:n,end:a}=e;a=$r(n,a,o);const l=Fr(i,o[n],o[a],e.loop);if(!t.segments){s.push({source:e,target:l,start:o[n],end:o[a]});continue}const c=Di(t,l);for(const t of c){const n=Fr(i,r[t.start],r[t.end],t.loop),a=ki(e,o,n);for(const e of a)s.push({source:e,target:t,start:{[i]:Gr(l,n,"start",Math.max)},end:{[i]:Gr(l,n,"end",Math.min)}})}}return s}(i,n,o);for(const{source:t,target:l,start:c,end:d}of a){const{style:{backgroundColor:a=r}={}}=t,u=!0!==n;e.save(),e.fillStyle=a,Zr(e,s,u&&Fr(o,c,d)),e.beginPath();const h=!!i.pathSegment(e,t);let p;if(u){h?e.closePath():Jr(e,n,d,o);const t=!!n.pathSegment(e,l,{move:h,reverse:!0});p=h&&t,p||Jr(e,n,c,o)}e.closePath(),e.fill(p?"evenodd":"nonzero"),e.restore()}}function Zr(e,t,i){const{top:n,bottom:o}=t.chart.chartArea,{property:r,start:s,end:a}=i||{};"x"===r&&(e.beginPath(),e.rect(s,n,a-s,o-n),e.clip())}function Jr(e,t,i,n){const o=t.interpolate(i,n);o&&e.lineTo(o.x,o.y)}var Qr={id:"filler",afterDatasetsUpdate(e,t,i){const n=(e.data.datasets||[]).length,o=[];let r,s,a,l;for(s=0;s<n;++s)r=e.getDatasetMeta(s),a=r.dataset,l=null,a&&a.options&&a instanceof Uo&&(l={visible:e.isDatasetVisible(s),index:s,fill:Wr(a,s,n),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,o.push(l);for(s=0;s<n;++s)l=o[s],l&&!1!==l.fill&&(l.fill=zr(o,s,i.propagate))},beforeDraw(e,t,i){const n="beforeDraw"===i.drawTime,o=e.getSortedVisibleDatasetMetas(),r=e.chartArea;for(let t=o.length-1;t>=0;--t){const i=o[t].$filler;i&&(i.line.updateControlPoints(r,i.axis),n&&i.fill&&qr(e.ctx,i,r))}},beforeDatasetsDraw(e,t,i){if("beforeDatasetsDraw"!==i.drawTime)return;const n=e.getSortedVisibleDatasetMetas();for(let t=n.length-1;t>=0;--t){const i=n[t].$filler;Hr(i)&&qr(e.ctx,i,e.chartArea)}},beforeDatasetDraw(e,t,i){const n=t.meta.$filler;Hr(n)&&"beforeDatasetDraw"===i.drawTime&&qr(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const es=(e,t)=>{let{boxHeight:i=t,boxWidth:n=t}=e;return e.usePointStyle&&(i=Math.min(i,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(t,i)}};class ts extends Nn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=u(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,i)=>e.sort(t,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const i=e.labels,n=yi(i.font),o=n.size,r=this._computeTitleHeight(),{boxWidth:s,itemHeight:a}=es(i,o);let l,c;t.font=n.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(r,o,s,a)+10):(c=this.maxHeight,l=this._fitCols(r,n,s,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,n){const{ctx:o,maxWidth:r,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=n+s;let d=e;o.textAlign="left",o.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach((e,p)=>{const g=i+t/2+o.measureText(e.text).width;(0===p||l[l.length-1]+g+2*s>r)&&(d+=c,l[l.length-(p>0?0:1)]=0,h+=c,u++),a[p]={left:0,top:h,row:u,width:g,height:n},l[l.length-1]+=g+s}),d}_fitCols(e,t,i,n){const{ctx:o,maxHeight:r,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=r-e;let d=s,u=0,h=0,p=0,g=0;return this.legendItems.forEach((e,r)=>{const{itemWidth:f,itemHeight:m}=function(e,t,i,n,o){const r=function(e,t,i,n){let o=e.text;return o&&"string"!=typeof o&&(o=o.reduce((e,t)=>e.length>t.length?e:t)),t+i.size/2+n.measureText(o).width}(n,e,t,i),s=function(e,t,i){let n=e;return"string"!=typeof t.text&&(n=is(t,i)),n}(o,n,t.lineHeight);return{itemWidth:r,itemHeight:s}}(i,t,o,e,n);r>0&&h+m+2*s>c&&(d+=u+s,l.push({width:u,height:h}),p+=u+s,g++,u=h=0),a[r]={left:p,top:h,col:g,width:f,height:m},u=Math.max(u,f),h+=m+s}),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:n},rtl:o}}=this,r=Si(o,this.left,this.width);if(this.isHorizontal()){let o=0,s=pe(i,this.left+n,this.right-this.lineWidths[o]);for(const a of t)o!==a.row&&(o=a.row,s=pe(i,this.left+n,this.right-this.lineWidths[o])),a.top+=this.top+e+n,a.left=r.leftForLtr(r.x(s),a.width),s+=a.width+n}else{let o=0,s=pe(i,this.top+e+n,this.bottom-this.columnSizes[o].height);for(const a of t)a.col!==o&&(o=a.col,s=pe(i,this.top+e+n,this.bottom-this.columnSizes[o].height)),a.top=s,a.left+=this.left+n,a.left=r.leftForLtr(r.x(a.left),a.width),s+=a.height+n}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Dt(e,this),this._draw(),Mt(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:n}=this,{align:o,labels:r}=e,s=at.color,a=Si(e.rtl,this.left,this.width),c=yi(r.font),{padding:d}=r,u=c.size,h=u/2;let p;this.drawTitle(),n.textAlign=a.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=c.string;const{boxWidth:g,boxHeight:f,itemHeight:m}=es(r,u),v=this.isHorizontal(),b=this._computeTitleHeight();p=v?{x:pe(o,this.left+d,this.right-i[0]),y:this.top+d+b,line:0}:{x:this.left+d,y:pe(o,this.top+b+d,this.bottom-t[0].height),line:0},xi(this.ctx,e.textDirection);const y=m+d;this.legendItems.forEach((w,C)=>{n.strokeStyle=w.fontColor,n.fillStyle=w.fontColor;const _=n.measureText(w.text).width,S=a.textAlign(w.textAlign||(w.textAlign=r.textAlign)),x=g+h+_;let A=p.x,E=p.y;if(a.setWidth(this.width),v?C>0&&A+x+d>this.right&&(E=p.y+=y,p.line++,A=p.x=pe(o,this.left+d,this.right-i[p.line])):C>0&&E+y>this.bottom&&(A=p.x=A+t[p.line].width+d,p.line++,E=p.y=pe(o,this.top+b+d,this.bottom-t[p.line].height)),function(e,t,i){if(isNaN(g)||g<=0||isNaN(f)||f<0)return;n.save();const o=l(i.lineWidth,1);if(n.fillStyle=l(i.fillStyle,s),n.lineCap=l(i.lineCap,"butt"),n.lineDashOffset=l(i.lineDashOffset,0),n.lineJoin=l(i.lineJoin,"miter"),n.lineWidth=o,n.strokeStyle=l(i.strokeStyle,s),n.setLineDash(l(i.lineDash,[])),r.usePointStyle){const s={radius:f*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:o},l=a.xPlus(e,g/2);Tt(n,s,l,t+h,r.pointStyleWidth&&g)}else{const r=t+Math.max((u-f)/2,0),s=a.leftForLtr(e,g),l=vi(i.borderRadius);n.beginPath(),Object.values(l).some(e=>0!==e)?Lt(n,{x:s,y:r,w:g,h:f,radius:l}):n.rect(s,r,g,f),n.fill(),0!==o&&n.stroke()}n.restore()}(a.x(A),E,w),A=ge(S,A+g+h,v?A+x:this.right,e.rtl),function(e,t,i){Nt(n,i.text,e,t+m/2,c,{strikethrough:i.hidden,textAlign:a.textAlign(i.textAlign)})}(a.x(A),E,w),v)p.x+=x+d;else if("string"!=typeof w.text){const e=c.lineHeight;p.y+=is(w,e)+d}else p.y+=y}),Ai(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=yi(t.font),n=bi(t.padding);if(!t.display)return;const o=Si(e.rtl,this.left,this.width),r=this.ctx,s=t.position,a=i.size/2,l=n.top+a;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=pe(e.align,d,this.right-u);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+pe(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=pe(s,d,d+u);r.textAlign=o.textAlign(he(s)),r.textBaseline="middle",r.strokeStyle=t.color,r.fillStyle=t.color,r.font=i.string,Nt(r,t.text,h,c,i)}_computeTitleHeight(){const e=this.options.title,t=yi(e.font),i=bi(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,n,o;if(ee(e,this.left,this.right)&&ee(t,this.top,this.bottom))for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(n=o[i],ee(e,n.left,n.left+n.width)&&ee(t,n.top,n.top+n.height))return this.legendItems[i];return null}handleEvent(e){const t=this.options;if(!function(e,t){return!("mousemove"!==e&&"mouseout"!==e||!t.onHover&&!t.onLeave)||!(!t.onClick||"click"!==e&&"mouseup"!==e)}(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,s=(o=i,null!==(n=r)&&null!==o&&n.datasetIndex===o.datasetIndex&&n.index===o.index);r&&!s&&u(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&u(t.onHover,[e,i,this],this)}else i&&u(t.onClick,[e,i,this],this);var n,o}}function is(e,t){return t*(e.text?e.text.length:0)}var ns={id:"legend",_element:ts,start(e,t,i){const n=e.legend=new ts({ctx:e.ctx,options:i,chart:e});Ji.configure(e,n,i),Ji.addBox(e,n)},stop(e){Ji.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){const n=e.legend;Ji.configure(e,n,i),n.options=i},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){const n=t.datasetIndex,o=i.chart;o.isDatasetVisible(n)?(o.hide(n),t.hidden=!0):(o.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:o,color:r,useBorderRadius:s,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(i?0:void 0),c=bi(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:r,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:o||l.textAlign,borderRadius:s&&(a||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class os extends Nn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const n=o(i.text)?i.text.length:1;this._padding=bi(i.padding);const r=n*yi(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:i,bottom:n,right:o,options:r}=this,s=r.align;let a,l,c,d=0;return this.isHorizontal()?(l=pe(s,i,o),c=t+e,a=o-i):("left"===r.position?(l=i+e,c=pe(s,n,t),d=-.5*k):(l=o-e,c=pe(s,t,n),d=.5*k),a=n-t),{titleX:l,titleY:c,maxWidth:a,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=yi(t.font),n=i.lineHeight/2+this._padding.top,{titleX:o,titleY:r,maxWidth:s,rotation:a}=this._drawArgs(n);Nt(e,t.text,0,0,i,{color:t.color,maxWidth:s,rotation:a,textAlign:he(t.align),textBaseline:"middle",translation:[o,r]})}}var rs={id:"title",_element:os,start(e,t,i){!function(e,t){const i=new os({ctx:e.ctx,options:t,chart:e});Ji.configure(e,i,t),Ji.addBox(e,i),e.titleBlock=i}(e,i)},stop(e){const t=e.titleBlock;Ji.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){const n=e.titleBlock;Ji.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ss=new WeakMap;var as={id:"subtitle",start(e,t,i){const n=new os({ctx:e.ctx,options:i,chart:e});Ji.configure(e,n,i),Ji.addBox(e,n),ss.set(e,n)},stop(e){Ji.removeBox(e,ss.get(e)),ss.delete(e)},beforeUpdate(e,t,i){const n=ss.get(e);Ji.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ls={average(e){if(!e.length)return!1;let t,i,n=new Set,o=0,r=0;for(t=0,i=e.length;t<i;++t){const i=e[t].element;if(i&&i.hasValue()){const e=i.tooltipPosition();n.add(e.x),o+=e.y,++r}}return 0!==r&&0!==n.size&&{x:[...n].reduce((e,t)=>e+t)/n.size,y:o/r}},nearest(e,t){if(!e.length)return!1;let i,n,o,r=t.x,s=t.y,a=Number.POSITIVE_INFINITY;for(i=0,n=e.length;i<n;++i){const n=e[i].element;if(n&&n.hasValue()){const e=q(t,n.getCenterPoint());e<a&&(a=e,o=n)}}if(o){const e=o.tooltipPosition();r=e.x,s=e.y}return{x:r,y:s}}};function cs(e,t){return t&&(o(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ds(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function us(e,t){const{element:i,datasetIndex:n,index:o}=t,r=e.getDatasetMeta(n).controller,{label:s,value:a}=r.getLabelAndValue(o);return{chart:e,label:s,parsed:r.getParsed(o),raw:e.data.datasets[n].data[o],formattedValue:a,dataset:r.getDataset(),dataIndex:o,datasetIndex:n,element:i}}function hs(e,t){const i=e.chart.ctx,{body:n,footer:o,title:r}=e,{boxWidth:s,boxHeight:a}=t,l=yi(t.bodyFont),c=yi(t.titleFont),d=yi(t.footerFont),u=r.length,p=o.length,g=n.length,f=bi(t.padding);let m=f.height,v=0,b=n.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);b+=e.beforeBody.length+e.afterBody.length,u&&(m+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),b&&(m+=g*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(b-g)*l.lineHeight+(b-1)*t.bodySpacing),p&&(m+=t.footerMarginTop+p*d.lineHeight+(p-1)*t.footerSpacing);let y=0;const w=function(e){v=Math.max(v,i.measureText(e).width+y)};return i.save(),i.font=c.string,h(e.title,w),i.font=l.string,h(e.beforeBody.concat(e.afterBody),w),y=t.displayColors?s+2+t.boxPadding:0,h(n,e=>{h(e.before,w),h(e.lines,w),h(e.after,w)}),y=0,i.font=d.string,h(e.footer,w),i.restore(),v+=f.width,{width:v,height:m}}function ps(e,t,i,n){const{x:o,width:r}=i,{width:s,chartArea:{left:a,right:l}}=e;let c="center";return"center"===n?c=o<=(a+l)/2?"left":"right":o<=r/2?c="left":o>=s-r/2&&(c="right"),function(e,t,i,n){const{x:o,width:r}=n,s=i.caretSize+i.caretPadding;return"left"===e&&o+r+s>t.width||"right"===e&&o-r-s<0||void 0}(c,e,t,i)&&(c="center"),c}function gs(e,t,i){const n=i.yAlign||t.yAlign||function(e,t){const{y:i,height:n}=t;return i<n/2?"top":i>e.height-n/2?"bottom":"center"}(e,i);return{xAlign:i.xAlign||t.xAlign||ps(e,t,i,n),yAlign:n}}function fs(e,t,i,n){const{caretSize:o,caretPadding:r,cornerRadius:s}=e,{xAlign:a,yAlign:l}=i,c=o+r,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:p}=vi(s);let g=function(e,t){let{x:i,width:n}=e;return"right"===t?i-=n:"center"===t&&(i-=n/2),i}(t,a);const f=function(e,t,i){let{y:n,height:o}=e;return"top"===t?n+=i:n-="bottom"===t?o+i:o/2,n}(t,l,c);return"center"===l?"left"===a?g+=c:"right"===a&&(g-=c):"left"===a?g-=Math.max(d,h)+o:"right"===a&&(g+=Math.max(u,p)+o),{x:J(g,0,n.width-t.width),y:J(f,0,n.height-t.height)}}function ms(e,t,i){const n=bi(i.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-n.right:e.x+n.left}function vs(e){return cs([],ds(e))}function bs(e,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}const ys={beforeTitle:t,title(e){if(e.length>0){const t=e[0],i=t.chart.data.labels,n=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return i[t.dataIndex]}return""},afterTitle:t,beforeBody:t,beforeLabel:t,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const i=e.formattedValue;return n(i)||(t+=i),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:t,afterBody:t,beforeFooter:t,footer:t,afterFooter:t};function ws(e,t,i,n){const o=e[t].call(i,n);return void 0===o?ys[t].call(i,n):o}class Cs extends Nn{static positioners=ls;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&t.options.animation&&i.animations,o=new _n(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=_i(this.chart.getContext(),{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"}))}getTitle(e,t){const{callbacks:i}=t,n=ws(i,"beforeTitle",this,e),o=ws(i,"title",this,e),r=ws(i,"afterTitle",this,e);let s=[];return s=cs(s,ds(n)),s=cs(s,ds(o)),s=cs(s,ds(r)),s}getBeforeBody(e,t){return vs(ws(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,n=[];return h(e,e=>{const t={before:[],lines:[],after:[]},o=bs(i,e);cs(t.before,ds(ws(o,"beforeLabel",this,e))),cs(t.lines,ws(o,"label",this,e)),cs(t.after,ds(ws(o,"afterLabel",this,e))),n.push(t)}),n}getAfterBody(e,t){return vs(ws(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,n=ws(i,"beforeFooter",this,e),o=ws(i,"footer",this,e),r=ws(i,"afterFooter",this,e);let s=[];return s=cs(s,ds(n)),s=cs(s,ds(o)),s=cs(s,ds(r)),s}_createItems(e){const t=this._active,i=this.chart.data,n=[],o=[],r=[];let s,a,l=[];for(s=0,a=t.length;s<a;++s)l.push(us(this.chart,t[s]));return e.filter&&(l=l.filter((t,n,o)=>e.filter(t,n,o,i))),e.itemSort&&(l=l.sort((t,n)=>e.itemSort(t,n,i))),h(l,t=>{const i=bs(e.callbacks,t);n.push(ws(i,"labelColor",this,t)),o.push(ws(i,"labelPointStyle",this,t)),r.push(ws(i,"labelTextColor",this,t))}),this.labelColors=n,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=l,l}update(e,t){const i=this.options.setContext(this.getContext()),n=this._active;let o,r=[];if(n.length){const e=ls[i.position].call(this,n,this._eventPosition);r=this._createItems(i),this.title=this.getTitle(r,i),this.beforeBody=this.getBeforeBody(r,i),this.body=this.getBody(r,i),this.afterBody=this.getAfterBody(r,i),this.footer=this.getFooter(r,i);const t=this._size=hs(this,i),s=Object.assign({},e,t),a=gs(this.chart,i,s),l=fs(i,s,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,o={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,n){const o=this.getCaretPosition(e,i,n);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(e,t,i){const{xAlign:n,yAlign:o}=this,{caretSize:r,cornerRadius:s}=i,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:d}=vi(s),{x:u,y:h}=e,{width:p,height:g}=t;let f,m,v,b,y,w;return"center"===o?(y=h+g/2,"left"===n?(f=u,m=f-r,b=y+r,w=y-r):(f=u+p,m=f+r,b=y-r,w=y+r),v=f):(m="left"===n?u+Math.max(a,c)+r:"right"===n?u+p-Math.max(l,d)-r:this.caretX,"top"===o?(b=h,y=b-r,f=m-r,v=m+r):(b=h+g,y=b+r,f=m+r,v=m-r),w=b),{x1:f,x2:m,x3:v,y1:b,y2:y,y3:w}}drawTitle(e,t,i){const n=this.title,o=n.length;let r,s,a;if(o){const l=Si(i.rtl,this.x,this.width);for(e.x=ms(this,i.titleAlign,i),t.textAlign=l.textAlign(i.titleAlign),t.textBaseline="middle",r=yi(i.titleFont),s=i.titleSpacing,t.fillStyle=i.titleColor,t.font=r.string,a=0;a<o;++a)t.fillText(n[a],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+s,a+1===o&&(e.y+=i.titleMarginBottom-s)}}_drawColorBox(e,t,i,n,o){const s=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=o,d=yi(o.bodyFont),u=ms(this,"left",o),h=n.x(u),p=l<d.lineHeight?(d.lineHeight-l)/2:0,g=t.y+p;if(o.usePointStyle){const t={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},i=n.leftForLtr(h,c)+c/2,r=g+l/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Et(e,t,i,r),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,Et(e,t,i,r)}else{e.lineWidth=r(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=n.leftForLtr(h,c),i=n.leftForLtr(n.xPlus(h,1),c-2),a=vi(s.borderRadius);Object.values(a).some(e=>0!==e)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Lt(e,{x:t,y:g,w:c,h:l,radius:a}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),Lt(e,{x:i,y:g+1,w:c-2,h:l-2,radius:a}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(t,g,c,l),e.strokeRect(t,g,c,l),e.fillStyle=s.backgroundColor,e.fillRect(i,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:n}=this,{bodySpacing:o,bodyAlign:r,displayColors:s,boxHeight:a,boxWidth:l,boxPadding:c}=i,d=yi(i.bodyFont);let u=d.lineHeight,p=0;const g=Si(i.rtl,this.x,this.width),f=function(i){t.fillText(i,g.x(e.x+p),e.y+u/2),e.y+=u+o},m=g.textAlign(r);let v,b,y,w,C,_,S;for(t.textAlign=r,t.textBaseline="middle",t.font=d.string,e.x=ms(this,m,i),t.fillStyle=i.bodyColor,h(this.beforeBody,f),p=s&&"right"!==m?"center"===r?l/2+c:l+2+c:0,w=0,_=n.length;w<_;++w){for(v=n[w],b=this.labelTextColors[w],t.fillStyle=b,h(v.before,f),y=v.lines,s&&y.length&&(this._drawColorBox(t,e,w,g,i),u=Math.max(d.lineHeight,a)),C=0,S=y.length;C<S;++C)f(y[C]),u=d.lineHeight;h(v.after,f)}p=0,u=d.lineHeight,h(this.afterBody,f),e.y-=o}drawFooter(e,t,i){const n=this.footer,o=n.length;let r,s;if(o){const a=Si(i.rtl,this.x,this.width);for(e.x=ms(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=a.textAlign(i.footerAlign),t.textBaseline="middle",r=yi(i.footerFont),t.fillStyle=i.footerColor,t.font=r.string,s=0;s<o;++s)t.fillText(n[s],a.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+i.footerSpacing}}drawBackground(e,t,i,n){const{xAlign:o,yAlign:r}=this,{x:s,y:a}=e,{width:l,height:c}=i,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:p}=vi(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(s+d,a),"top"===r&&this.drawCaret(e,t,i,n),t.lineTo(s+l-u,a),t.quadraticCurveTo(s+l,a,s+l,a+u),"center"===r&&"right"===o&&this.drawCaret(e,t,i,n),t.lineTo(s+l,a+c-p),t.quadraticCurveTo(s+l,a+c,s+l-p,a+c),"bottom"===r&&this.drawCaret(e,t,i,n),t.lineTo(s+h,a+c),t.quadraticCurveTo(s,a+c,s,a+c-h),"center"===r&&"left"===o&&this.drawCaret(e,t,i,n),t.lineTo(s,a+d),t.quadraticCurveTo(s,a,s+d,a),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,n=i&&i.x,o=i&&i.y;if(n||o){const i=ls[e.position].call(this,this._active,this._eventPosition);if(!i)return;const r=this._size=hs(this,e),s=Object.assign({},i,this._size),a=gs(t,e,s),l=fs(e,s,a,t);n._to===l.x&&o._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=r.width,this.height=r.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const r=bi(t.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&s&&(e.save(),e.globalAlpha=i,this.drawBackground(o,e,n,t),xi(e,t.textDirection),o.y+=r.top,this.drawTitle(o,e,t),this.drawBody(o,e,t),this.drawFooter(o,e,t),Ai(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,n=e.map(({datasetIndex:e,index:t})=>{const i=this.chart.getDatasetMeta(e);if(!i)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:i.data[t],index:t}}),o=!p(i,n),r=this._positionChanged(n,t);(o||r)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,o=this._active||[],r=this._getActiveElements(e,o,t,i),s=this._positionChanged(r,e),a=t||!p(r,o)||s;return a&&(this._active=r,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,i,n){const o=this.options;if("mouseout"===e.type)return[];if(!n)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const r=this.chart.getElementsAtEventForMode(e,o.mode,o,i);return o.reverse&&r.reverse(),r}_positionChanged(e,t){const{caretX:i,caretY:n,options:o}=this,r=ls[o.position].call(this,e,t);return!1!==r&&(i!==r.x||n!==r.y)}}var _s={id:"tooltip",_element:Cs,positioners:ls,afterInit(e,t,i){i&&(e.tooltip=new Cs({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const i={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){const i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ys},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};return Co.register(Lo,Tr,er,e),Co.helpers={...Oi},Co._adapters=Ao,Co.Animation=Cn,Co.Animations=_n,Co.animator=ve,Co.controllers=Yn.controllers.items,Co.DatasetController=On,Co.Element=Nn,Co.elements=er,Co.Interaction=Bi,Co.layouts=Ji,Co.platforms=bn,Co.Scale=jn,Co.Ticks=it,Object.assign(Co,Lo,Tr,er,e,bn),Co.Chart=Co,"undefined"!=typeof window&&(window.Chart=Co),Co}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Chart)}(this,function(e){"use strict";function t(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function i(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function n(e){i(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function o(e,o){i(2,arguments);var r=n(e),s=t(o);return isNaN(s)?new Date(NaN):s?(r.setDate(r.getDate()+s),r):r}function r(e,o){i(2,arguments);var r=n(e),s=t(o);if(isNaN(s))return new Date(NaN);if(!s)return r;var a=r.getDate(),l=new Date(r.getTime());return l.setMonth(r.getMonth()+s+1,0),a>=l.getDate()?l:(r.setFullYear(l.getFullYear(),l.getMonth(),a),r)}function s(e,o){i(2,arguments);var r=n(e).getTime(),s=t(o);return new Date(r+s)}function a(e,o){i(1,arguments);var r=o||{},s=r.locale,a=s&&s.options&&s.options.weekStartsOn,l=null==a?0:t(a),c=null==r.weekStartsOn?l:t(r.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=n(e),u=d.getDay(),h=(u<c?7:0)+u-c;return d.setDate(d.getDate()-h),d.setHours(0,0,0,0),d}function l(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function c(e){i(1,arguments);var t=n(e);return t.setHours(0,0,0,0),t}function d(e,t){i(2,arguments);var o=n(e),r=n(t),s=o.getTime()-r.getTime();return s<0?-1:s>0?1:s}function u(e){i(1,arguments);var t=n(e);return!isNaN(t)}function h(e,t){var i=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return i<0?-1:i>0?1:i}function p(e,t){i(2,arguments);var o=n(e),r=n(t),s=h(o,r),a=Math.abs(function(e,t){i(2,arguments);var n=c(e),o=c(t),r=n.getTime()-l(n),s=o.getTime()-l(o);return Math.round((r-s)/864e5)}(o,r));o.setDate(o.getDate()-s*a);var d=s*(a-(h(o,r)===-s));return 0===d?0:d}function g(e,t){i(2,arguments);var o=n(e),r=n(t);return o.getTime()-r.getTime()}function f(e){i(1,arguments);var t=n(e);return t.setHours(23,59,59,999),t}function m(e){i(1,arguments);var t=n(e),o=t.getMonth();return t.setFullYear(t.getFullYear(),o+1,0),t.setHours(23,59,59,999),t}function v(e,t){i(2,arguments);var o,r=n(e),s=n(t),a=d(r,s),l=Math.abs(function(e,t){i(2,arguments);var o=n(e),r=n(t);return 12*(o.getFullYear()-r.getFullYear())+(o.getMonth()-r.getMonth())}(r,s));if(l<1)o=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*l);var c=d(r,s)===-a;(function(e){i(1,arguments);var t=n(e);return f(t).getTime()===m(t).getTime()})(n(e))&&1===l&&1===d(e,s)&&(c=!1),o=a*(l-c)}return 0===o?0:o}function b(e,t){i(2,arguments);var o=n(e),r=n(t),s=d(o,r),a=Math.abs(function(e,t){i(2,arguments);var o=n(e),r=n(t);return o.getFullYear()-r.getFullYear()}(o,r));o.setFullYear("1584"),r.setFullYear("1584");var l=s*(a-(d(o,r)===-s));return 0===l?0:l}var y={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function w(e){return function(t){var i=t||{},n=i.width?String(i.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var C={date:w({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:w({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:w({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},_={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function S(e){return function(t,i){var n,o=i||{};if("formatting"===(o.context?String(o.context):"standalone")&&e.formattingValues){var r=e.defaultFormattingWidth||e.defaultWidth,s=o.width?String(o.width):r;n=e.formattingValues[s]||e.formattingValues[r]}else{var a=e.defaultWidth,l=o.width?String(o.width):e.defaultWidth;n=e.values[l]||e.values[a]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function x(e){return function(t,i){var n=String(t),o=i||{},r=o.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=n.match(s);if(!a)return null;var l,c=a[0],d=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth];return l="[object Array]"===Object.prototype.toString.call(d)?function(e,t){for(var i=0;i<e.length;i++)if(t(e[i]))return i}(d,function(e){return e.test(c)}):function(e,t){for(var i in e)if(e.hasOwnProperty(i)&&t(e[i]))return i}(d,function(e){return e.test(c)}),l=e.valueCallback?e.valueCallback(l):l,{value:l=o.valueCallback?o.valueCallback(l):l,rest:n.slice(c.length)}}}var A={code:"en-US",formatDistance:function(e,t,i){var n;return i=i||{},n="string"==typeof y[e]?y[e]:1===t?y[e].one:y[e].other.replace("{{count}}",t),i.addSuffix?i.comparison>0?"in "+n:n+" ago":n},formatLong:C,formatRelative:function(e,t,i,n){return _[e]},localize:{ordinalNumber:function(e,t){var i=Number(e),n=i%100;if(n>20||n<10)switch(n%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},era:S({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:S({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:S({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:S({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:S({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function(e){return function(t,i){var n=String(t),o=i||{},r=n.match(e.matchPattern);if(!r)return null;var s=r[0],a=n.match(e.parsePattern);if(!a)return null;var l=e.valueCallback?e.valueCallback(a[0]):a[0];return{value:l=o.valueCallback?o.valueCallback(l):l,rest:n.slice(s.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:x({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:x({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:x({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:x({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:x({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function E(e,n){return i(2,arguments),s(e,-t(n))}function T(e,t){for(var i=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return i+n}var k={y:function(e,t){var i=e.getUTCFullYear(),n=i>0?i:1-i;return T("yy"===t?n%100:n,t.length)},M:function(e,t){var i=e.getUTCMonth();return"M"===t?String(i+1):T(i+1,2)},d:function(e,t){return T(e.getUTCDate(),t.length)},a:function(e,t){var i=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];default:return"am"===i?"a.m.":"p.m."}},h:function(e,t){return T(e.getUTCHours()%12||12,t.length)},H:function(e,t){return T(e.getUTCHours(),t.length)},m:function(e,t){return T(e.getUTCMinutes(),t.length)},s:function(e,t){return T(e.getUTCSeconds(),t.length)},S:function(e,t){var i=t.length,n=e.getUTCMilliseconds();return T(Math.floor(n*Math.pow(10,i-3)),t.length)}};function D(e){i(1,arguments);var t=n(e),o=t.getUTCDay(),r=(o<1?7:0)+o-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function M(e){i(1,arguments);var t=n(e),o=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(o+1,0,4),r.setUTCHours(0,0,0,0);var s=D(r),a=new Date(0);a.setUTCFullYear(o,0,4),a.setUTCHours(0,0,0,0);var l=D(a);return t.getTime()>=s.getTime()?o+1:t.getTime()>=l.getTime()?o:o-1}function P(e){i(1,arguments);var t=n(e),o=D(t).getTime()-function(e){i(1,arguments);var t=M(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),D(n)}(t).getTime();return Math.round(o/6048e5)+1}function R(e,o){i(1,arguments);var r=o||{},s=r.locale,a=s&&s.options&&s.options.weekStartsOn,l=null==a?0:t(a),c=null==r.weekStartsOn?l:t(r.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=n(e),u=d.getUTCDay(),h=(u<c?7:0)+u-c;return d.setUTCDate(d.getUTCDate()-h),d.setUTCHours(0,0,0,0),d}function I(e,o){i(1,arguments);var r=n(e,o),s=r.getUTCFullYear(),a=o||{},l=a.locale,c=l&&l.options&&l.options.firstWeekContainsDate,d=null==c?1:t(c),u=null==a.firstWeekContainsDate?d:t(a.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var h=new Date(0);h.setUTCFullYear(s+1,0,u),h.setUTCHours(0,0,0,0);var p=R(h,o),g=new Date(0);g.setUTCFullYear(s,0,u),g.setUTCHours(0,0,0,0);var f=R(g,o);return r.getTime()>=p.getTime()?s+1:r.getTime()>=f.getTime()?s:s-1}function O(e,o){i(1,arguments);var r=n(e),s=R(r,o).getTime()-function(e,n){i(1,arguments);var o=n||{},r=o.locale,s=r&&r.options&&r.options.firstWeekContainsDate,a=null==s?1:t(s),l=null==o.firstWeekContainsDate?a:t(o.firstWeekContainsDate),c=I(e,n),d=new Date(0);return d.setUTCFullYear(c,0,l),d.setUTCHours(0,0,0,0),R(d,n)}(r,o).getTime();return Math.round(s/6048e5)+1}var N="midnight",L="noon",F="morning",$="afternoon",G="evening",B="night",H={G:function(e,t,i){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"});case"GGGGG":return i.era(n,{width:"narrow"});default:return i.era(n,{width:"wide"})}},y:function(e,t,i){if("yo"===t){var n=e.getUTCFullYear(),o=n>0?n:1-n;return i.ordinalNumber(o,{unit:"year"})}return k.y(e,t)},Y:function(e,t,i,n){var o=I(e,n),r=o>0?o:1-o;return"YY"===t?T(r%100,2):"Yo"===t?i.ordinalNumber(r,{unit:"year"}):T(r,t.length)},R:function(e,t){return T(M(e),t.length)},u:function(e,t){return T(e.getUTCFullYear(),t.length)},Q:function(e,t,i){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return T(n,2);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});default:return i.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,i){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return T(n,2);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});default:return i.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,i){var n=e.getUTCMonth();switch(t){case"M":case"MM":return k.M(e,t);case"Mo":return i.ordinalNumber(n+1,{unit:"month"});case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});default:return i.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,i){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return T(n+1,2);case"Lo":return i.ordinalNumber(n+1,{unit:"month"});case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});default:return i.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,i,n){var o=O(e,n);return"wo"===t?i.ordinalNumber(o,{unit:"week"}):T(o,t.length)},I:function(e,t,i){var n=P(e);return"Io"===t?i.ordinalNumber(n,{unit:"week"}):T(n,t.length)},d:function(e,t,i){return"do"===t?i.ordinalNumber(e.getUTCDate(),{unit:"date"}):k.d(e,t)},D:function(e,t,o){var r=function(e){i(1,arguments);var t=n(e),o=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=o-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?o.ordinalNumber(r,{unit:"dayOfYear"}):T(r,t.length)},E:function(e,t,i){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,i,n){var o=e.getUTCDay(),r=(o-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return T(r,2);case"eo":return i.ordinalNumber(r,{unit:"day"});case"eee":return i.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(o,{width:"short",context:"formatting"});default:return i.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,i,n){var o=e.getUTCDay(),r=(o-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return T(r,t.length);case"co":return i.ordinalNumber(r,{unit:"day"});case"ccc":return i.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(o,{width:"narrow",context:"standalone"});case"cccccc":return i.day(o,{width:"short",context:"standalone"});default:return i.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,i){var n=e.getUTCDay(),o=0===n?7:n;switch(t){case"i":return String(o);case"ii":return T(o,t.length);case"io":return i.ordinalNumber(o,{unit:"day"});case"iii":return i.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(n,{width:"short",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,i){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,i){var n,o=e.getUTCHours();switch(n=12===o?L:0===o?N:o/12>=1?"pm":"am",t){case"b":case"bb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,i){var n,o=e.getUTCHours();switch(n=o>=17?G:o>=12?$:o>=4?F:B,t){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,i){if("ho"===t){var n=e.getUTCHours()%12;return 0===n&&(n=12),i.ordinalNumber(n,{unit:"hour"})}return k.h(e,t)},H:function(e,t,i){return"Ho"===t?i.ordinalNumber(e.getUTCHours(),{unit:"hour"}):k.H(e,t)},K:function(e,t,i){var n=e.getUTCHours()%12;return"Ko"===t?i.ordinalNumber(n,{unit:"hour"}):T(n,t.length)},k:function(e,t,i){var n=e.getUTCHours();return 0===n&&(n=24),"ko"===t?i.ordinalNumber(n,{unit:"hour"}):T(n,t.length)},m:function(e,t,i){return"mo"===t?i.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):k.m(e,t)},s:function(e,t,i){return"so"===t?i.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):k.s(e,t)},S:function(e,t){return k.S(e,t)},X:function(e,t,i,n){var o=(n._originalDate||e).getTimezoneOffset();if(0===o)return"Z";switch(t){case"X":return W(o);case"XXXX":case"XX":return V(o);default:return V(o,":")}},x:function(e,t,i,n){var o=(n._originalDate||e).getTimezoneOffset();switch(t){case"x":return W(o);case"xxxx":case"xx":return V(o);default:return V(o,":")}},O:function(e,t,i,n){var o=(n._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+z(o,":");default:return"GMT"+V(o,":")}},z:function(e,t,i,n){var o=(n._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+z(o,":");default:return"GMT"+V(o,":")}},t:function(e,t,i,n){var o=n._originalDate||e;return T(Math.floor(o.getTime()/1e3),t.length)},T:function(e,t,i,n){return T((n._originalDate||e).getTime(),t.length)}};function z(e,t){var i=e>0?"-":"+",n=Math.abs(e),o=Math.floor(n/60),r=n%60;if(0===r)return i+String(o);var s=t||"";return i+String(o)+s+T(r,2)}function W(e,t){return e%60==0?(e>0?"-":"+")+T(Math.abs(e)/60,2):V(e,t)}function V(e,t){var i=t||"",n=e>0?"-":"+",o=Math.abs(e);return n+T(Math.floor(o/60),2)+i+T(o%60,2)}var j=H;function U(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function Y(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}var q={p:Y,P:function(e,t){var i,n=e.match(/(P+)(p+)?/),o=n[1],r=n[2];if(!r)return U(e,t);switch(o){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",U(o,t)).replace("{{time}}",Y(r,t))}},K=q,X=["D","DD"],Z=["YY","YYYY"];function J(e){return-1!==X.indexOf(e)}function Q(e){return-1!==Z.indexOf(e)}function ee(e,t,i){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(i,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(i,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(i,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(i,"`; see: https://git.io/fxCyr"))}var te=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ne=/^'([^]*?)'?$/,oe=/''/g,re=/[a-zA-Z]/;function se(e,o,r){i(2,arguments);var s=String(o),a=r||{},c=a.locale||A,d=c.options&&c.options.firstWeekContainsDate,h=null==d?1:t(d),p=null==a.firstWeekContainsDate?h:t(a.firstWeekContainsDate);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=c.options&&c.options.weekStartsOn,f=null==g?0:t(g),m=null==a.weekStartsOn?f:t(a.weekStartsOn);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!c.localize)throw new RangeError("locale must contain localize property");if(!c.formatLong)throw new RangeError("locale must contain formatLong property");var v=n(e);if(!u(v))throw new RangeError("Invalid time value");var b=E(v,l(v)),y={firstWeekContainsDate:p,weekStartsOn:m,locale:c,_originalDate:v};return s.match(ie).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,K[t])(e,c.formatLong,y):e}).join("").match(te).map(function(t){if("''"===t)return"'";var i=t[0];if("'"===i)return t.match(ne)[1].replace(oe,"'");var n=j[i];if(n)return!a.useAdditionalWeekYearTokens&&Q(t)&&ee(t,o,e),!a.useAdditionalDayOfYearTokens&&J(t)&&ee(t,o,e),n(b,t,c.localize,y);if(i.match(re))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return t}).join("")}function ae(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var i in t=t||{})t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function le(e,o,r){i(2,arguments);var s=r||{},a=s.locale,l=a&&a.options&&a.options.weekStartsOn,c=null==l?0:t(l),d=null==s.weekStartsOn?c:t(s.weekStartsOn);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=n(e),h=t(o),p=((h%7+7)%7<d?7:0)+h-u.getUTCDay();return u.setUTCDate(u.getUTCDate()+p),u}var ce=/^(1[0-2]|0?\d)/,de=/^(3[0-1]|[0-2]?\d)/,ue=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,he=/^(5[0-3]|[0-4]?\d)/,pe=/^(2[0-3]|[0-1]?\d)/,ge=/^(2[0-4]|[0-1]?\d)/,fe=/^(1[0-1]|0?\d)/,me=/^(1[0-2]|0?\d)/,ve=/^[0-5]?\d/,be=/^[0-5]?\d/,ye=/^\d/,we=/^\d{1,2}/,Ce=/^\d{1,3}/,_e=/^\d{1,4}/,Se=/^-?\d+/,xe=/^-?\d/,Ae=/^-?\d{1,2}/,Ee=/^-?\d{1,3}/,Te=/^-?\d{1,4}/,ke=/^([+-])(\d{2})(\d{2})?|Z/,De=/^([+-])(\d{2})(\d{2})|Z/,Me=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,Pe=/^([+-])(\d{2}):(\d{2})|Z/,Re=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Ie(e,t,i){var n=t.match(e);if(!n)return null;var o=parseInt(n[0],10);return{value:i?i(o):o,rest:t.slice(n[0].length)}}function Oe(e,t){var i=t.match(e);return i?"Z"===i[0]?{value:0,rest:t.slice(1)}:{value:("+"===i[1]?1:-1)*(36e5*(i[2]?parseInt(i[2],10):0)+6e4*(i[3]?parseInt(i[3],10):0)+1e3*(i[5]?parseInt(i[5],10):0)),rest:t.slice(i[0].length)}:null}function Ne(e,t){return Ie(Se,e,t)}function Le(e,t,i){switch(e){case 1:return Ie(ye,t,i);case 2:return Ie(we,t,i);case 3:return Ie(Ce,t,i);case 4:return Ie(_e,t,i);default:return Ie(new RegExp("^\\d{1,"+e+"}"),t,i)}}function Fe(e,t,i){switch(e){case 1:return Ie(xe,t,i);case 2:return Ie(Ae,t,i);case 3:return Ie(Ee,t,i);case 4:return Ie(Te,t,i);default:return Ie(new RegExp("^-?\\d{1,"+e+"}"),t,i)}}function $e(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Ge(e,t){var i,n=t>0,o=n?t:1-t;if(o<=50)i=e||100;else{var r=o+50;i=e+100*Math.floor(r/100)-(e>=r%100?100:0)}return n?i:1-i}var Be=[31,28,31,30,31,30,31,31,30,31,30,31],He=[31,29,31,30,31,30,31,31,30,31,30,31];function ze(e){return e%400==0||e%4==0&&e%100!=0}var We={G:{priority:140,parse:function(e,t,i,n){switch(t){case"G":case"GG":case"GGG":return i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"});case"GGGGG":return i.era(e,{width:"narrow"});default:return i.era(e,{width:"wide"})||i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"})}},set:function(e,t,i,n){return t.era=i,e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(e,t,i,n){var o=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return Le(4,e,o);case"yo":return i.ordinalNumber(e,{unit:"year",valueCallback:o});default:return Le(t.length,e,o)}},validate:function(e,t,i){return t.isTwoDigitYear||t.year>0},set:function(e,t,i,n){var o=e.getUTCFullYear();if(i.isTwoDigitYear){var r=Ge(i.year,o);return e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}var s="era"in t&&1!==t.era?1-i.year:i.year;return e.setUTCFullYear(s,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(e,t,i,n){var o=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return Le(4,e,o);case"Yo":return i.ordinalNumber(e,{unit:"year",valueCallback:o});default:return Le(t.length,e,o)}},validate:function(e,t,i){return t.isTwoDigitYear||t.year>0},set:function(e,t,i,n){var o=I(e,n);if(i.isTwoDigitYear){var r=Ge(i.year,o);return e.setUTCFullYear(r,0,n.firstWeekContainsDate),e.setUTCHours(0,0,0,0),R(e,n)}var s="era"in t&&1!==t.era?1-i.year:i.year;return e.setUTCFullYear(s,0,n.firstWeekContainsDate),e.setUTCHours(0,0,0,0),R(e,n)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(e,t,i,n){return Fe("R"===t?4:t.length,e)},set:function(e,t,i,n){var o=new Date(0);return o.setUTCFullYear(i,0,4),o.setUTCHours(0,0,0,0),D(o)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(e,t,i,n){return Fe("u"===t?4:t.length,e)},set:function(e,t,i,n){return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(e,t,i,n){switch(t){case"Q":case"QQ":return Le(t.length,e);case"Qo":return i.ordinalNumber(e,{unit:"quarter"});case"QQQ":return i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(e,{width:"narrow",context:"formatting"});default:return i.quarter(e,{width:"wide",context:"formatting"})||i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,i){return t>=1&&t<=4},set:function(e,t,i,n){return e.setUTCMonth(3*(i-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(e,t,i,n){switch(t){case"q":case"qq":return Le(t.length,e);case"qo":return i.ordinalNumber(e,{unit:"quarter"});case"qqq":return i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(e,{width:"narrow",context:"standalone"});default:return i.quarter(e,{width:"wide",context:"standalone"})||i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,i){return t>=1&&t<=4},set:function(e,t,i,n){return e.setUTCMonth(3*(i-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(e,t,i,n){var o=function(e){return e-1};switch(t){case"M":return Ie(ce,e,o);case"MM":return Le(2,e,o);case"Mo":return i.ordinalNumber(e,{unit:"month",valueCallback:o});case"MMM":return i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(e,{width:"narrow",context:"formatting"});default:return i.month(e,{width:"wide",context:"formatting"})||i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,i){return t>=0&&t<=11},set:function(e,t,i,n){return e.setUTCMonth(i,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(e,t,i,n){var o=function(e){return e-1};switch(t){case"L":return Ie(ce,e,o);case"LL":return Le(2,e,o);case"Lo":return i.ordinalNumber(e,{unit:"month",valueCallback:o});case"LLL":return i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(e,{width:"narrow",context:"standalone"});default:return i.month(e,{width:"wide",context:"standalone"})||i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,i){return t>=0&&t<=11},set:function(e,t,i,n){return e.setUTCMonth(i,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(e,t,i,n){switch(t){case"w":return Ie(he,e);case"wo":return i.ordinalNumber(e,{unit:"week"});default:return Le(t.length,e)}},validate:function(e,t,i){return t>=1&&t<=53},set:function(e,o,r,s){return R(function(e,o,r){i(2,arguments);var s=n(e),a=t(o),l=O(s,r)-a;return s.setUTCDate(s.getUTCDate()-7*l),s}(e,r,s),s)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(e,t,i,n){switch(t){case"I":return Ie(he,e);case"Io":return i.ordinalNumber(e,{unit:"week"});default:return Le(t.length,e)}},validate:function(e,t,i){return t>=1&&t<=53},set:function(e,o,r,s){return D(function(e,o){i(2,arguments);var r=n(e),s=t(o),a=P(r)-s;return r.setUTCDate(r.getUTCDate()-7*a),r}(e,r,s),s)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(e,t,i,n){switch(t){case"d":return Ie(de,e);case"do":return i.ordinalNumber(e,{unit:"date"});default:return Le(t.length,e)}},validate:function(e,t,i){var n=ze(e.getUTCFullYear()),o=e.getUTCMonth();return n?t>=1&&t<=He[o]:t>=1&&t<=Be[o]},set:function(e,t,i,n){return e.setUTCDate(i),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(e,t,i,n){switch(t){case"D":case"DD":return Ie(ue,e);case"Do":return i.ordinalNumber(e,{unit:"date"});default:return Le(t.length,e)}},validate:function(e,t,i){return ze(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365},set:function(e,t,i,n){return e.setUTCMonth(0,i),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(e,t,i,n){switch(t){case"E":case"EE":case"EEE":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,i){return t>=0&&t<=6},set:function(e,t,i,n){return(e=le(e,i,n)).setUTCHours(0,0,0,0),e},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(e,t,i,n){var o=function(e){var t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return Le(t.length,e,o);case"eo":return i.ordinalNumber(e,{unit:"day",valueCallback:o});case"eee":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeeee":return i.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,i){return t>=0&&t<=6},set:function(e,t,i,n){return(e=le(e,i,n)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(e,t,i,n){var o=function(e){var t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return Le(t.length,e,o);case"co":return i.ordinalNumber(e,{unit:"day",valueCallback:o});case"ccc":return i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"ccccc":return i.day(e,{width:"narrow",context:"standalone"});case"cccccc":return i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});default:return i.day(e,{width:"wide",context:"standalone"})||i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,i){return t>=0&&t<=6},set:function(e,t,i,n){return(e=le(e,i,n)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(e,t,i,n){var o=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return Le(t.length,e);case"io":return i.ordinalNumber(e,{unit:"day"});case"iii":return i.day(e,{width:"abbreviated",context:"formatting",valueCallback:o})||i.day(e,{width:"short",context:"formatting",valueCallback:o})||i.day(e,{width:"narrow",context:"formatting",valueCallback:o});case"iiiii":return i.day(e,{width:"narrow",context:"formatting",valueCallback:o});case"iiiiii":return i.day(e,{width:"short",context:"formatting",valueCallback:o})||i.day(e,{width:"narrow",context:"formatting",valueCallback:o});default:return i.day(e,{width:"wide",context:"formatting",valueCallback:o})||i.day(e,{width:"abbreviated",context:"formatting",valueCallback:o})||i.day(e,{width:"short",context:"formatting",valueCallback:o})||i.day(e,{width:"narrow",context:"formatting",valueCallback:o})}},validate:function(e,t,i){return t>=1&&t<=7},set:function(e,o,r,s){return e=function(e,o){i(2,arguments);var r=t(o);r%7==0&&(r-=7);var s=n(e),a=((r%7+7)%7<1?7:0)+r-s.getUTCDay();return s.setUTCDate(s.getUTCDate()+a),s}(e,r,s),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(e,t,i,n){switch(t){case"a":case"aa":case"aaa":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(e,{width:"narrow",context:"formatting"});default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,i,n){return e.setUTCHours($e(i),0,0,0),e},incompatibleTokens:["b","B","H","K","k","t","T"]},b:{priority:80,parse:function(e,t,i,n){switch(t){case"b":case"bb":case"bbb":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(e,{width:"narrow",context:"formatting"});default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,i,n){return e.setUTCHours($e(i),0,0,0),e},incompatibleTokens:["a","B","H","K","k","t","T"]},B:{priority:80,parse:function(e,t,i,n){switch(t){case"B":case"BB":case"BBB":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(e,{width:"narrow",context:"formatting"});default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,i,n){return e.setUTCHours($e(i),0,0,0),e},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(e,t,i,n){switch(t){case"h":return Ie(me,e);case"ho":return i.ordinalNumber(e,{unit:"hour"});default:return Le(t.length,e)}},validate:function(e,t,i){return t>=1&&t<=12},set:function(e,t,i,n){var o=e.getUTCHours()>=12;return o&&i<12?e.setUTCHours(i+12,0,0,0):o||12!==i?e.setUTCHours(i,0,0,0):e.setUTCHours(0,0,0,0),e},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(e,t,i,n){switch(t){case"H":return Ie(pe,e);case"Ho":return i.ordinalNumber(e,{unit:"hour"});default:return Le(t.length,e)}},validate:function(e,t,i){return t>=0&&t<=23},set:function(e,t,i,n){return e.setUTCHours(i,0,0,0),e},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(e,t,i,n){switch(t){case"K":return Ie(fe,e);case"Ko":return i.ordinalNumber(e,{unit:"hour"});default:return Le(t.length,e)}},validate:function(e,t,i){return t>=0&&t<=11},set:function(e,t,i,n){return e.getUTCHours()>=12&&i<12?e.setUTCHours(i+12,0,0,0):e.setUTCHours(i,0,0,0),e},incompatibleTokens:["a","b","h","H","k","t","T"]},k:{priority:70,parse:function(e,t,i,n){switch(t){case"k":return Ie(ge,e);case"ko":return i.ordinalNumber(e,{unit:"hour"});default:return Le(t.length,e)}},validate:function(e,t,i){return t>=1&&t<=24},set:function(e,t,i,n){var o=i<=24?i%24:i;return e.setUTCHours(o,0,0,0),e},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(e,t,i,n){switch(t){case"m":return Ie(ve,e);case"mo":return i.ordinalNumber(e,{unit:"minute"});default:return Le(t.length,e)}},validate:function(e,t,i){return t>=0&&t<=59},set:function(e,t,i,n){return e.setUTCMinutes(i,0,0),e},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(e,t,i,n){switch(t){case"s":return Ie(be,e);case"so":return i.ordinalNumber(e,{unit:"second"});default:return Le(t.length,e)}},validate:function(e,t,i){return t>=0&&t<=59},set:function(e,t,i,n){return e.setUTCSeconds(i,0),e},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(e,t,i,n){return Le(t.length,e,function(e){return Math.floor(e*Math.pow(10,3-t.length))})},set:function(e,t,i,n){return e.setUTCMilliseconds(i),e},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(e,t,i,n){switch(t){case"X":return Oe(ke,e);case"XX":return Oe(De,e);case"XXXX":return Oe(Me,e);case"XXXXX":return Oe(Re,e);default:return Oe(Pe,e)}},set:function(e,t,i,n){return t.timestampIsSet?e:new Date(e.getTime()-i)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(e,t,i,n){switch(t){case"x":return Oe(ke,e);case"xx":return Oe(De,e);case"xxxx":return Oe(Me,e);case"xxxxx":return Oe(Re,e);default:return Oe(Pe,e)}},set:function(e,t,i,n){return t.timestampIsSet?e:new Date(e.getTime()-i)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(e,t,i,n){return Ne(e)},set:function(e,t,i,n){return[new Date(1e3*i),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(e,t,i,n){return Ne(e)},set:function(e,t,i,n){return[new Date(i),{timestampIsSet:!0}]},incompatibleTokens:"*"}},Ve=We,je=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ue=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ye=/^'([^]*?)'?$/,qe=/''/g,Ke=/\S/,Xe=/[a-zA-Z]/;function Ze(e,t){if(t.timestampIsSet)return e;var i=new Date(0);return i.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),i.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),i}function Je(e){return e.match(Ye)[1].replace(qe,"'")}var Qe=36e5,et=6e4,tt={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},it=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,nt=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ot=/^([+-])(\d{2})(?::?(\d{2}))?$/;function rt(e,n){i(1,arguments);var o=n||{},r=null==o.additionalDigits?2:t(o.additionalDigits);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var s,a=function(e){var t,i={},n=e.split(tt.dateTimeDelimiter);if(n.length>2)return i;/:/.test(n[0])?(i.date=null,t=n[0]):(i.date=n[0],t=n[1],tt.timeZoneDelimiter.test(i.date)&&(i.date=e.split(tt.timeZoneDelimiter)[0],t=e.substr(i.date.length,e.length)));if(t){var o=tt.timezone.exec(t);o?(i.time=t.replace(o[1],""),i.timezone=o[1]):i.time=t}return i}(e);if(a.date){var l=function(e,t){var i=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(i);if(!n)return{year:null};var o=n[1]&&parseInt(n[1]),r=n[2]&&parseInt(n[2]);return{year:null==r?o:100*r,restDateString:e.slice((n[1]||n[2]).length)}}(a.date,r);s=function(e,t){if(null===t)return null;var i=e.match(it);if(!i)return null;var n=!!i[4],o=st(i[1]),r=st(i[2])-1,s=st(i[3]),a=st(i[4]),l=st(i[5])-1;if(n)return function(e,t,i){return t>=1&&t<=53&&i>=0&&i<=6}(0,a,l)?function(e,t,i){var n=new Date(0);n.setUTCFullYear(e,0,4);var o=n.getUTCDay()||7,r=7*(t-1)+i+1-o;return n.setUTCDate(n.getUTCDate()+r),n}(t,a,l):new Date(NaN);var c=new Date(0);return function(e,t,i){return t>=0&&t<=11&&i>=1&&i<=(lt[t]||(ct(e)?29:28))}(t,r,s)&&function(e,t){return t>=1&&t<=(ct(e)?366:365)}(t,o)?(c.setUTCFullYear(t,r,Math.max(o,s)),c):new Date(NaN)}(l.restDateString,l.year)}if(isNaN(s)||!s)return new Date(NaN);var c,d=s.getTime(),u=0;if(a.time&&(u=function(e){var t=e.match(nt);if(!t)return null;var i=at(t[1]),n=at(t[2]),o=at(t[3]);if(!function(e,t,i){if(24===e)return 0===t&&0===i;return i>=0&&i<60&&t>=0&&t<60&&e>=0&&e<25}(i,n,o))return NaN;return i*Qe+n*et+1e3*o}(a.time),isNaN(u)||null===u))return new Date(NaN);if(!a.timezone){var h=new Date(d+u),p=new Date(0);return p.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),p.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),p}return c=function(e){if("Z"===e)return 0;var t=e.match(ot);if(!t)return 0;var i="+"===t[1]?-1:1,n=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,o))return NaN;return i*(n*Qe+o*et)}(a.timezone),isNaN(c)?new Date(NaN):new Date(d+u+c)}function st(e){return e?parseInt(e):1}function at(e){return e&&parseFloat(e.replace(",","."))||0}var lt=[31,null,31,30,31,30,31,31,30,31,30,31];function ct(e){return e%400==0||e%4==0&&e%100}const dt={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};e._adapters._date.override({_id:"date-fns",formats:function(){return dt},parse:function(e,o){if(null==e)return null;const r=typeof e;return"number"===r||e instanceof Date?e=n(e):"string"===r&&(e="string"==typeof o?function(e,o,r,s){i(3,arguments);var a=String(e),c=String(o),d=s||{},u=d.locale||A;if(!u.match)throw new RangeError("locale must contain match property");var h=u.options&&u.options.firstWeekContainsDate,p=null==h?1:t(h),g=null==d.firstWeekContainsDate?p:t(d.firstWeekContainsDate);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=u.options&&u.options.weekStartsOn,m=null==f?0:t(f),v=null==d.weekStartsOn?m:t(d.weekStartsOn);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===c)return""===a?n(r):new Date(NaN);var b,y={firstWeekContainsDate:g,weekStartsOn:v,locale:u},w=[{priority:10,subPriority:-1,set:Ze,index:0}],C=c.match(Ue).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,K[t])(e,u.formatLong,y):e}).join("").match(je),_=[];for(b=0;b<C.length;b++){var S=C[b];!d.useAdditionalWeekYearTokens&&Q(S)&&ee(S,c,e),!d.useAdditionalDayOfYearTokens&&J(S)&&ee(S,c,e);var x=S[0],T=Ve[x];if(T){var k=T.incompatibleTokens;if(Array.isArray(k)){for(var D=void 0,M=0;M<_.length;M++){var P=_[M].token;if(-1!==k.indexOf(P)||P===x){D=_[M];break}}if(D)throw new RangeError("The format string mustn't contain `".concat(D.fullToken,"` and `").concat(S,"` at the same time"))}else if("*"===T.incompatibleTokens&&_.length)throw new RangeError("The format string mustn't contain `".concat(S,"` and any other token at the same time"));_.push({token:x,fullToken:S});var R=T.parse(a,S,u.match,y);if(!R)return new Date(NaN);w.push({priority:T.priority,subPriority:T.subPriority||0,set:T.set,validate:T.validate,value:R.value,index:w.length}),a=R.rest}else{if(x.match(Xe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");if("''"===S?S="'":"'"===x&&(S=Je(S)),0!==a.indexOf(S))return new Date(NaN);a=a.slice(S.length)}}if(a.length>0&&Ke.test(a))return new Date(NaN);var I=w.map(function(e){return e.priority}).sort(function(e,t){return t-e}).filter(function(e,t,i){return i.indexOf(e)===t}).map(function(e){return w.filter(function(t){return t.priority===e}).sort(function(e,t){return t.subPriority-e.subPriority})}).map(function(e){return e[0]}),O=n(r);if(isNaN(O))return new Date(NaN);var N=E(O,l(O)),L={};for(b=0;b<I.length;b++){var F=I[b];if(F.validate&&!F.validate(N,F.value,y))return new Date(NaN);var $=F.set(N,L,F.value,y);$[0]?(N=$[0],ae(L,$[1])):N=$}return N}(e,o,new Date,this.options):rt(e,this.options)),u(e)?e.getTime():null},format:function(e,t){return se(e,t,this.options)},add:function(e,n,a){switch(a){case"millisecond":return s(e,n);case"second":return function(e,n){return i(2,arguments),s(e,1e3*t(n))}(e,n);case"minute":return function(e,n){return i(2,arguments),s(e,6e4*t(n))}(e,n);case"hour":return function(e,n){return i(2,arguments),s(e,36e5*t(n))}(e,n);case"day":return o(e,n);case"week":return function(e,n){return i(2,arguments),o(e,7*t(n))}(e,n);case"month":return r(e,n);case"quarter":return function(e,n){return i(2,arguments),r(e,3*t(n))}(e,n);case"year":return function(e,n){return i(2,arguments),r(e,12*t(n))}(e,n);default:return e}},diff:function(e,t,n){switch(n){case"millisecond":return g(e,t);case"second":return function(e,t){i(2,arguments);var n=g(e,t)/1e3;return n>0?Math.floor(n):Math.ceil(n)}(e,t);case"minute":return function(e,t){i(2,arguments);var n=g(e,t)/6e4;return n>0?Math.floor(n):Math.ceil(n)}(e,t);case"hour":return function(e,t){i(2,arguments);var n=g(e,t)/36e5;return n>0?Math.floor(n):Math.ceil(n)}(e,t);case"day":return p(e,t);case"week":return function(e,t){i(2,arguments);var n=p(e,t)/7;return n>0?Math.floor(n):Math.ceil(n)}(e,t);case"month":return v(e,t);case"quarter":return function(e,t){i(2,arguments);var n=v(e,t)/3;return n>0?Math.floor(n):Math.ceil(n)}(e,t);case"year":return b(e,t);default:return 0}},startOf:function(e,t,o){switch(t){case"second":return function(e){i(1,arguments);var t=n(e);return t.setMilliseconds(0),t}(e);case"minute":return function(e){i(1,arguments);var t=n(e);return t.setSeconds(0,0),t}(e);case"hour":return function(e){i(1,arguments);var t=n(e);return t.setMinutes(0,0,0),t}(e);case"day":return c(e);case"week":return a(e);case"isoWeek":return a(e,{weekStartsOn:+o});case"month":return function(e){i(1,arguments);var t=n(e);return t.setDate(1),t.setHours(0,0,0,0),t}(e);case"quarter":return function(e){i(1,arguments);var t=n(e),o=t.getMonth(),r=o-o%3;return t.setMonth(r,1),t.setHours(0,0,0,0),t}(e);case"year":return function(e){i(1,arguments);var t=n(e),o=new Date(0);return o.setFullYear(t.getFullYear(),0,1),o.setHours(0,0,0,0),o}(e);default:return e}},endOf:function(e,o){switch(o){case"second":return function(e){i(1,arguments);var t=n(e);return t.setMilliseconds(999),t}(e);case"minute":return function(e){i(1,arguments);var t=n(e);return t.setSeconds(59,999),t}(e);case"hour":return function(e){i(1,arguments);var t=n(e);return t.setMinutes(59,59,999),t}(e);case"day":return f(e);case"week":return function(e,o){i(1,arguments);var r=o||{},s=r.locale,a=s&&s.options&&s.options.weekStartsOn,l=null==a?0:t(a),c=null==r.weekStartsOn?l:t(r.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=n(e),u=d.getDay(),h=6+(u<c?-7:0)-(u-c);return d.setDate(d.getDate()+h),d.setHours(23,59,59,999),d}(e);case"month":return m(e);case"quarter":return function(e){i(1,arguments);var t=n(e),o=t.getMonth(),r=o-o%3+3;return t.setMonth(r,0),t.setHours(23,59,59,999),t}(e);case"year":return function(e){i(1,arguments);var t=n(e),o=t.getFullYear();return t.setFullYear(o+1,0,0),t.setHours(23,59,59,999),t}(e);default:return e}}})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("chart.js"),require("hammerjs"),require("chart.js/helpers")):"function"==typeof define&&define.amd?define(["chart.js","hammerjs","chart.js/helpers"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).ChartZoom=t(e.Chart,e.Hammer,e.Chart.helpers)}(this,function(e,t,i){"use strict";const n=e=>e&&e.enabled&&e.modifierKey,o=(e,t)=>e&&t[e+"Key"],r=(e,t)=>e&&!t[e+"Key"];function s(e,t,i){return void 0===e||("string"==typeof e?-1!==e.indexOf(t):"function"==typeof e&&-1!==e({chart:i}).indexOf(t))}function a(e,t){return"function"==typeof e&&(e=e({chart:t})),"string"==typeof e?{x:-1!==e.indexOf("x"),y:-1!==e.indexOf("y")}:{x:!1,y:!1}}function l(e,t,n){const{mode:o="xy",scaleMode:r,overScaleMode:s}=e||{},l=function({x:e,y:t},i){const n=i.scales,o=Object.keys(n);for(let i=0;i<o.length;i++){const r=n[o[i]];if(t>=r.top&&t<=r.bottom&&e>=r.left&&e<=r.right)return r}return null}(t,n),c=a(o,n),d=a(r,n);if(s){const e=a(s,n);for(const t of["x","y"])e[t]&&(d[t]=c[t],c[t]=!1)}if(l&&d[l.axis])return[l];const u=[];return i.each(n.scales,function(e){c[e.axis]&&u.push(e)}),u}const c=new WeakMap;function d(e){let t=c.get(e);return t||(t={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{},dragging:!1,panning:!1},c.set(e,t)),t}function u(e,t,i,n){const o=Math.max(0,Math.min(1,(e-t)/i||0));return{min:n*o,max:n*(1-o)}}function h(e,t){const i=e.isHorizontal()?t.x:t.y;return e.getValueForPixel(i)}function p(e,t,i){const n=e.max-e.min,o=n*(t-1);return u(h(e,i),e.min,n,o)}function g(e,t,n,o,r){let s=n[o];if("original"===s){const n=e.originalScaleLimits[t.id][o];s=i.valueOrDefault(n.options,n.scale)}return i.valueOrDefault(s,r)}function f(e,{min:t,max:n},o,r=!1){const s=d(e.chart),{options:a}=e,l=function(e,t){return t&&(t[e.id]||t[e.axis])||{}}(e,o),{minRange:c=0}=l,u=g(s,e,l,"min",-1/0),h=g(s,e,l,"max",1/0);if("pan"===r&&(t<u||n>h))return!0;const p=e.max-e.min,f=r?Math.max(n-t,c):p;if(r&&f===c&&p<=c)return!0;const m=function(e,{min:t,max:n,minLimit:o,maxLimit:r},s){const a=(e-n+t)/2;t-=a,n+=a;const l=s.min.options??s.min.scale,c=s.max.options??s.max.scale,d=e/1e6;return i.almostEquals(t,l,d)&&(t=l),i.almostEquals(n,c,d)&&(n=c),t<o?(t=o,n=Math.min(o+e,r)):n>r&&(n=r,t=Math.max(r-e,o)),{min:t,max:n}}(f,{min:t,max:n,minLimit:u,maxLimit:h},s.originalScaleLimits[e.id]);return a.min=m.min,a.max=m.max,s.updatedScaleLimits[e.id]=m,e.parse(m.min)!==e.min||e.parse(m.max)!==e.max}const m=e=>0===e||isNaN(e)?0:e<0?Math.min(Math.round(e),-1):Math.max(Math.round(e),1);const v={second:500,minute:3e4,hour:18e5,day:432e5,week:3024e5,month:1296e6,quarter:5184e6,year:157248e5};function b(e,t,i,n=!1){const{min:o,max:r,options:s}=e,a=s.time&&s.time.round,l=v[a]||0,c=e.getValueForPixel(e.getPixelForValue(o+l)-t),d=e.getValueForPixel(e.getPixelForValue(r+l)-t);return!(!isNaN(c)&&!isNaN(d))||f(e,{min:c,max:d},i,!!n&&"pan")}function y(e,t,i){return b(e,t,i,!0)}const w={category:function(e,t,i,n){const o=p(e,t,i);return e.min===e.max&&t<1&&function(e){const t=e.getLabels().length-1;e.min>0&&(e.min-=1),e.max<t&&(e.max+=1)}(e),f(e,{min:e.min+m(o.min),max:e.max-m(o.max)},n,!0)},default:function(e,t,i,n){const o=p(e,t,i);return f(e,{min:e.min+o.min,max:e.max-o.max},n,!0)},logarithmic:function(e,t,i,n){const o=function(e,t,i){const n=h(e,i);if(void 0===n)return{min:e.min,max:e.max};const o=Math.log10(e.min),r=Math.log10(e.max),s=r-o,a=u(Math.log10(n),o,s,s*(t-1));return{min:Math.pow(10,o+a.min),max:Math.pow(10,r-a.max)}}(e,t,i);return f(e,o,n,!0)}},C={default:function(e,t,i,n){f(e,function(e,t,i){const n=e.getValueForPixel(t),o=e.getValueForPixel(i);return{min:Math.min(n,o),max:Math.max(n,o)}}(e,t,i),n,!0)}},_={category:function(e,t,i){const n=e.getLabels().length-1;let{min:o,max:r}=e;const s=Math.max(r-o,1),a=Math.round(function(e){return e.isHorizontal()?e.width:e.height}(e)/Math.max(s,10)),l=Math.round(Math.abs(t/a));let c;return t<-a?(r=Math.min(r+l,n),o=1===s?r:r-s,c=r===n):t>a&&(o=Math.max(0,o-l),r=1===s?o:o+s,c=0===o),f(e,{min:o,max:r},i)||c},default:b,logarithmic:y,timeseries:y};function S(e,t){i.each(e,(i,n)=>{t[n]||delete e[n]})}function x(e,t){const{scales:n}=e,{originalScaleLimits:o,updatedScaleLimits:r}=t;return i.each(n,function(e){(function(e,t,i){const{id:n,options:{min:o,max:r}}=e;if(!t[n]||!i[n])return!0;const s=i[n];return s.min!==o||s.max!==r})(e,o,r)&&(o[e.id]={min:{scale:e.min,options:e.options.min},max:{scale:e.max,options:e.options.max}})}),S(o,n),S(r,n),o}function A(e,t,n,o){const r=w[e.type]||w.default;i.callback(r,[e,t,n,o])}function E(e,t,n,o){const r=C[e.type]||C.default;i.callback(r,[e,t,n,o])}function T(e){const t=e.chartArea;return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function k(e,t,n="none",o="api"){const{x:r=1,y:s=1,focalPoint:a=T(e)}="number"==typeof t?{x:t,y:t}:t,c=d(e),{options:{limits:u,zoom:h}}=c;x(e,c);const p=1!==r,g=1!==s,f=l(h,a,e);i.each(f||e.scales,function(e){e.isHorizontal()&&p?A(e,r,a,u):!e.isHorizontal()&&g&&A(e,s,a,u)}),e.update(n),i.callback(h.onZoom,[{chart:e,trigger:o}])}function D(e,t,n,o="none",r="api"){const a=d(e),{options:{limits:l,zoom:c}}=a,{mode:u="xy"}=c;x(e,a);const h=s(u,"x",e),p=s(u,"y",e);i.each(e.scales,function(e){e.isHorizontal()&&h?E(e,t.x,n.x,l):!e.isHorizontal()&&p&&E(e,t.y,n.y,l)}),e.update(o),i.callback(c.onZoom,[{chart:e,trigger:r}])}function M(e){const t=d(e);let n=1,o=1;return i.each(e.scales,function(e){const r=function(e,t){const n=e.originalScaleLimits[t];if(!n)return;const{min:o,max:r}=n;return i.valueOrDefault(r.options,r.scale)-i.valueOrDefault(o.options,o.scale)}(t,e.id);if(r){const t=Math.round(r/(e.max-e.min)*100)/100;n=Math.min(n,t),o=Math.max(o,t)}}),n<1?n:o}function P(e,t,n,o){const{panDelta:r}=o,s=r[e.id]||0;i.sign(s)===i.sign(t)&&(t+=s);const a=_[e.type]||_.default;i.callback(a,[e,t,n])?r[e.id]=0:r[e.id]=t}function R(e,t,n,o="none"){const{x:r=0,y:s=0}="number"==typeof t?{x:t,y:t}:t,a=d(e),{options:{pan:l,limits:c}}=a,{onPan:u}=l||{};x(e,a);const h=0!==r,p=0!==s;i.each(n||e.scales,function(e){e.isHorizontal()&&h?P(e,r,c,a):!e.isHorizontal()&&p&&P(e,s,c,a)}),e.update(o),i.callback(u,[{chart:e}])}function I(e){const t=d(e);x(e,t);const i={};for(const n of Object.keys(e.scales)){const{min:e,max:o}=t.originalScaleLimits[n]||{min:{},max:{}};i[n]={min:e.scale,max:o.scale}}return i}function O(e){const t=d(e);return t.panning||t.dragging}const N=(e,t,i)=>Math.min(i,Math.max(t,e));function L(e,t){const{handlers:i}=d(e),n=i[t];n&&n.target&&(n.target.removeEventListener(t,n),delete i[t])}function F(e,t,i,n){const{handlers:o,options:r}=d(e),s=o[i];if(s&&s.target===t)return;L(e,i),o[i]=t=>n(e,t,r),o[i].target=t;const a="wheel"!==i&&void 0;t.addEventListener(i,o[i],{passive:a})}function $(e,t){const i=d(e);i.dragStart&&(i.dragging=!0,i.dragEnd=t,e.update("none"))}function G(e,t){const i=d(e);i.dragStart&&"Escape"===t.key&&(L(e,"keydown"),i.dragging=!1,i.dragStart=i.dragEnd=null,e.update("none"))}function B(e,t){if(e.target!==t.canvas){const i=t.canvas.getBoundingClientRect();return{x:e.clientX-i.left,y:e.clientY-i.top}}return i.getRelativePosition(e,t)}function H(e,t,n){const{onZoomStart:o,onZoomRejected:r}=n;if(o){const n=B(t,e);if(!1===i.callback(o,[{chart:e,event:t,point:n}]))return i.callback(r,[{chart:e,event:t}]),!1}}function z(e,t){if(e.legend){const n=i.getRelativePosition(t,e);if(i._isPointInArea(n,e.legend))return}const s=d(e),{pan:a,zoom:l={}}=s.options;if(0!==t.button||o(n(a),t)||r(n(l.drag),t))return i.callback(l.onZoomRejected,[{chart:e,event:t}]);!1!==H(e,t,l)&&(s.dragStart=t,F(e,e.canvas.ownerDocument,"mousemove",$),F(e,window.document,"keydown",G))}function W(e,t,i,{min:n,max:o,prop:r}){e[n]=N(Math.min(i.begin[r],i.end[r]),t[n],t[o]),e[o]=N(Math.max(i.begin[r],i.end[r]),t[n],t[o])}function V(e,t,i){const n={begin:B(t.dragStart,e),end:B(t.dragEnd,e)};if(i){!function({begin:e,end:t},i){let n=t.x-e.x,o=t.y-e.y;const r=Math.abs(n/o);r>i?n=Math.sign(n)*Math.abs(o*i):r<i&&(o=Math.sign(o)*Math.abs(n/i)),t.x=e.x+n,t.y=e.y+o}(n,e.chartArea.width/e.chartArea.height)}return n}function j(e,t,i,n){const o=s(t,"x",e),r=s(t,"y",e),{top:a,left:l,right:c,bottom:d,width:u,height:h}=e.chartArea,p={top:a,left:l,right:c,bottom:d},g=V(e,i,n&&o&&r);o&&W(p,e.chartArea,g,{min:"left",max:"right",prop:"x"}),r&&W(p,e.chartArea,g,{min:"top",max:"bottom",prop:"y"});const f=p.right-p.left,m=p.bottom-p.top;return{...p,width:f,height:m,zoomX:o&&f?1+(u-f)/u:1,zoomY:r&&m?1+(h-m)/h:1}}function U(e,t){const n=d(e);if(!n.dragStart)return;L(e,"mousemove");const{mode:o,onZoomComplete:r,drag:{threshold:a=0,maintainAspectRatio:l}}=n.options.zoom,c=j(e,o,{dragStart:n.dragStart,dragEnd:t},l),u=s(o,"x",e)?c.width:0,h=s(o,"y",e)?c.height:0,p=Math.sqrt(u*u+h*h);if(n.dragStart=n.dragEnd=null,p<=a)return n.dragging=!1,void e.update("none");D(e,{x:c.left,y:c.top},{x:c.right,y:c.bottom},"zoom","drag"),n.dragging=!1,n.filterNextClick=!0,i.callback(r,[{chart:e}])}function Y(e,t){const{handlers:{onZoomComplete:o},options:{zoom:s}}=d(e);if(!function(e,t,o){if(r(n(o.wheel),t))i.callback(o.onZoomRejected,[{chart:e,event:t}]);else if(!1!==H(e,t,o)&&(t.cancelable&&t.preventDefault(),void 0!==t.deltaY))return!0}(e,t,s))return;const a=t.target.getBoundingClientRect(),l=s.wheel.speed,c=t.deltaY>=0?2-1/(1-l):1+l;k(e,{x:c,y:c,focalPoint:{x:t.clientX-a.left,y:t.clientY-a.top}},"zoom","wheel"),i.callback(o,[{chart:e}])}function q(e,t,n,o){n&&(d(e).handlers[t]=function(e,t){let i;return function(){return clearTimeout(i),i=setTimeout(e,t),t}}(()=>i.callback(n,[{chart:e}]),o))}function K(e,t){return function(s,a){const{pan:l,zoom:c={}}=t.options;if(!l||!l.enabled)return!1;const d=a&&a.srcEvent;return!d||(!(!t.panning&&"mouse"===a.pointerType&&(r(n(l),d)||o(n(c.drag),d)))||(i.callback(l.onPanRejected,[{chart:e,event:a}]),!1))}}function X(e,t,i){if(t.scale){const{center:n,pointers:o}=i,r=1/t.scale*i.scale,a=i.target.getBoundingClientRect(),l=function(e,t){const i=Math.abs(e.clientX-t.clientX),n=Math.abs(e.clientY-t.clientY),o=i/n;let r,s;return o>.3&&o<1.7?r=s=!0:i>n?r=!0:s=!0,{x:r,y:s}}(o[0],o[1]),c=t.options.zoom.mode;k(e,{x:l.x&&s(c,"x",e)?r:1,y:l.y&&s(c,"y",e)?r:1,focalPoint:{x:n.x-a.left,y:n.y-a.top}},"zoom","pinch"),t.scale=i.scale}}function Z(e,t,i){const n=t.delta;n&&(t.panning=!0,R(e,{x:i.deltaX-n.x,y:i.deltaY-n.y},t.panScales),t.delta={x:i.deltaX,y:i.deltaY})}const J=new WeakMap;function Q(e,n){const o=d(e),r=e.canvas,{pan:s,zoom:a}=n,c=new t.Manager(r);a&&a.pinch.enabled&&(c.add(new t.Pinch),c.on("pinchstart",t=>function(e,t,n){if(t.options.zoom.pinch.enabled){const o=i.getRelativePosition(n,e);!1===i.callback(t.options.zoom.onZoomStart,[{chart:e,event:n,point:o}])?(t.scale=null,i.callback(t.options.zoom.onZoomRejected,[{chart:e,event:n}])):t.scale=1}}(e,o,t)),c.on("pinch",t=>X(e,o,t)),c.on("pinchend",t=>function(e,t,n){t.scale&&(X(e,t,n),t.scale=null,i.callback(t.options.zoom.onZoomComplete,[{chart:e}]))}(e,o,t))),s&&s.enabled&&(c.add(new t.Pan({threshold:s.threshold,enable:K(e,o)})),c.on("panstart",t=>function(e,t,n){const{enabled:o,onPanStart:r,onPanRejected:s}=t.options.pan;if(!o)return;const a=n.target.getBoundingClientRect(),c={x:n.center.x-a.left,y:n.center.y-a.top};if(!1===i.callback(r,[{chart:e,event:n,point:c}]))return i.callback(s,[{chart:e,event:n}]);t.panScales=l(t.options.pan,c,e),t.delta={x:0,y:0},Z(e,t,n)}(e,o,t)),c.on("panmove",t=>Z(e,o,t)),c.on("panend",()=>function(e,t){t.delta=null,t.panning&&(t.panning=!1,t.filterNextClick=!0,i.callback(t.options.pan.onPanComplete,[{chart:e}]))}(e,o))),J.set(e,c)}function ee(e){const t=J.get(e);t&&(t.remove("pinchstart"),t.remove("pinch"),t.remove("pinchend"),t.remove("panstart"),t.remove("pan"),t.remove("panend"),t.destroy(),J.delete(e))}function te(e,t,i){const n=i.zoom.drag,{dragStart:o,dragEnd:r}=d(e);if(n.drawTime!==t||!r)return;const{left:s,top:a,width:l,height:c}=j(e,i.zoom.mode,{dragStart:o,dragEnd:r},n.maintainAspectRatio),u=e.ctx;u.save(),u.beginPath(),u.fillStyle=n.backgroundColor||"rgba(225,225,225,0.3)",u.fillRect(s,a,l,c),n.borderWidth>0&&(u.lineWidth=n.borderWidth,u.strokeStyle=n.borderColor||"rgba(225,225,225)",u.strokeRect(s,a,l,c)),u.restore()}var ie={id:"zoom",version:"2.2.0",defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(e,n,o){d(e).options=o,Object.prototype.hasOwnProperty.call(o.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(o.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(o.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),t&&Q(e,o),e.pan=(t,i,n)=>R(e,t,i,n),e.zoom=(t,i)=>k(e,t,i),e.zoomRect=(t,i,n)=>D(e,t,i,n),e.zoomScale=(t,n,o)=>function(e,t,n,o="none",r="api"){const s=d(e);x(e,s),f(e.scales[t],n,void 0,!0),e.update(o),i.callback(s.options.zoom?.onZoom,[{chart:e,trigger:r}])}(e,t,n,o),e.resetZoom=t=>function(e,t="default"){const n=d(e),o=x(e,n);i.each(e.scales,function(e){const t=e.options;o[e.id]?(t.min=o[e.id].min.options,t.max=o[e.id].max.options):(delete t.min,delete t.max),delete n.updatedScaleLimits[e.id]}),e.update(t),i.callback(n.options.zoom.onZoomComplete,[{chart:e}])}(e,t),e.getZoomLevel=()=>M(e),e.getInitialScaleBounds=()=>I(e),e.getZoomedScaleBounds=()=>function(e){const t=d(e),i={};for(const n of Object.keys(e.scales))i[n]=t.updatedScaleLimits[n];return i}(e),e.isZoomedOrPanned=()=>function(e){const t=I(e);for(const i of Object.keys(e.scales)){const{min:n,max:o}=t[i];if(void 0!==n&&e.scales[i].min!==n)return!0;if(void 0!==o&&e.scales[i].max!==o)return!0}return!1}(e),e.isZoomingOrPanning=()=>O(e)},beforeEvent(e,{event:t}){if(O(e))return!1;if("click"===t.type||"mouseup"===t.type){const t=d(e);if(t.filterNextClick)return t.filterNextClick=!1,!1}},beforeUpdate:function(e,t,i){const n=d(e),o=n.options;n.options=i,function(e,t){const{pan:i,zoom:n}=e,{pan:o,zoom:r}=t;return n?.zoom?.pinch?.enabled!==r?.zoom?.pinch?.enabled||i?.enabled!==o?.enabled||i?.threshold!==o?.threshold}(o,i)&&(ee(e),Q(e,i)),function(e,t){const i=e.canvas,{wheel:n,drag:o,onZoomComplete:r}=t.zoom;n.enabled?(F(e,i,"wheel",Y),q(e,"onZoomComplete",r,250)):L(e,"wheel"),o.enabled?(F(e,i,"mousedown",z),F(e,i.ownerDocument,"mouseup",U)):(L(e,"mousedown"),L(e,"mousemove"),L(e,"mouseup"),L(e,"keydown"))}(e,i)},beforeDatasetsDraw(e,t,i){te(e,"beforeDatasetsDraw",i)},afterDatasetsDraw(e,t,i){te(e,"afterDatasetsDraw",i)},beforeDraw(e,t,i){te(e,"beforeDraw",i)},afterDraw(e,t,i){te(e,"afterDraw",i)},stop:function(e){!function(e){L(e,"mousedown"),L(e,"mousemove"),L(e,"mouseup"),L(e,"wheel"),L(e,"click"),L(e,"keydown")}(e),t&&ee(e),function(e){c.delete(e)}(e)},panFunctions:_,zoomFunctions:w,zoomRectFunctions:C};return e.Chart.register(ie),ie}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("chart.js/helpers"),require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js/helpers","chart.js"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).ChartDataLabels=t(e.Chart.helpers,e.Chart)}(this,function(e,t){"use strict";var i=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1}(),n=function(t){var i,n=[];for(t=[].concat(t);t.length;)"string"==typeof(i=t.pop())?n.unshift.apply(n,i.split("\n")):Array.isArray(i)?t.push.apply(t,i):e.isNullOrUndef(t)||n.unshift(""+i);return n},o=function(e,t,i){var n,o=[].concat(t),r=o.length,s=e.font,a=0;for(e.font=i.string,n=0;n<r;++n)a=Math.max(e.measureText(o[n]).width,a);return e.font=s,{height:r*i.lineHeight,width:a}},r=function(e,t,i){return Math.max(e,Math.min(t,i))},s=function(e,t){var i,n,o,r,s=e.slice(),a=[];for(i=0,o=t.length;i<o;++i)r=t[i],-1===(n=s.indexOf(r))?a.push([r,1]):s.splice(n,1);for(i=0,o=s.length;i<o;++i)a.push([s[i],-1]);return a};function a(e,t){var i=t.x,n=t.y;if(null===i)return{x:0,y:-1};if(null===n)return{x:1,y:0};var o=e.x-i,r=e.y-n,s=Math.sqrt(o*o+r*r);return{x:s?o/s:0,y:s?r/s:-1}}function l(e,t,i){var n=0;return e<i.left?n|=1:e>i.right&&(n|=2),t<i.top?n|=8:t>i.bottom&&(n|=4),n}function c(e,t){var i,n,o=t.anchor,r=e;return t.clamp&&(r=function(e,t){for(var i,n,o,r=e.x0,s=e.y0,a=e.x1,c=e.y1,d=l(r,s,t),u=l(a,c,t);d|u&&!(d&u);)8&(i=d||u)?(n=r+(a-r)*(t.top-s)/(c-s),o=t.top):4&i?(n=r+(a-r)*(t.bottom-s)/(c-s),o=t.bottom):2&i?(o=s+(c-s)*(t.right-r)/(a-r),n=t.right):1&i&&(o=s+(c-s)*(t.left-r)/(a-r),n=t.left),i===d?d=l(r=n,s=o,t):u=l(a=n,c=o,t);return{x0:r,x1:a,y0:s,y1:c}}(r,t.area)),"start"===o?(i=r.x0,n=r.y0):"end"===o?(i=r.x1,n=r.y1):(i=(r.x0+r.x1)/2,n=(r.y0+r.y1)/2),function(e,t,i,n,o){switch(o){case"center":i=n=0;break;case"bottom":i=0,n=1;break;case"right":i=1,n=0;break;case"left":i=-1,n=0;break;case"top":i=0,n=-1;break;case"start":i=-i,n=-n;break;case"end":break;default:o*=Math.PI/180,i=Math.cos(o),n=Math.sin(o)}return{x:e,y:t,vx:i,vy:n}}(i,n,e.vx,e.vy,t.align)}var d=function(e,t){var i=(e.startAngle+e.endAngle)/2,n=Math.cos(i),o=Math.sin(i),r=e.innerRadius,s=e.outerRadius;return c({x0:e.x+n*r,y0:e.y+o*r,x1:e.x+n*s,y1:e.y+o*s,vx:n,vy:o},t)},u=function(e,t){var i=a(e,t.origin),n=i.x*e.options.radius,o=i.y*e.options.radius;return c({x0:e.x-n,y0:e.y-o,x1:e.x+n,y1:e.y+o,vx:i.x,vy:i.y},t)},h=function(e,t){var i=a(e,t.origin),n=e.x,o=e.y,r=0,s=0;return e.horizontal?(n=Math.min(e.x,e.base),r=Math.abs(e.base-e.x)):(o=Math.min(e.y,e.base),s=Math.abs(e.base-e.y)),c({x0:n,y0:o+s,x1:n+r,y1:o,vx:i.x,vy:i.y},t)},p=function(e,t){var i=a(e,t.origin);return c({x0:e.x,y0:e.y,x1:e.x+(e.width||0),y1:e.y+(e.height||0),vx:i.x,vy:i.y},t)},g=function(e){return Math.round(e*i)/i};function f(e,t){var i=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!i)return null;if(void 0!==i.xCenter&&void 0!==i.yCenter)return{x:i.xCenter,y:i.yCenter};var n=i.getBasePixel();return e.horizontal?{x:n,y:null}:{x:null,y:n}}function m(e,t,i){var n=i.backgroundColor,o=i.borderColor,r=i.borderWidth;(n||o&&r)&&(e.beginPath(),function(e,t,i,n,o,r){var s=Math.PI/2;if(r){var a=Math.min(r,o/2,n/2),l=t+a,c=i+a,d=t+n-a,u=i+o-a;e.moveTo(t,c),l<d&&c<u?(e.arc(l,c,a,-Math.PI,-s),e.arc(d,c,a,-s,0),e.arc(d,u,a,0,s),e.arc(l,u,a,s,Math.PI)):l<d?(e.moveTo(l,i),e.arc(d,c,a,-s,s),e.arc(l,c,a,s,Math.PI+s)):c<u?(e.arc(l,c,a,-Math.PI,0),e.arc(l,u,a,0,Math.PI)):e.arc(l,c,a,-Math.PI,Math.PI),e.closePath(),e.moveTo(t,i)}else e.rect(t,i,n,o)}(e,g(t.x)+r/2,g(t.y)+r/2,g(t.w)-r,g(t.h)-r,i.borderRadius),e.closePath(),n&&(e.fillStyle=n,e.fill()),o&&r&&(e.strokeStyle=o,e.lineWidth=r,e.lineJoin="miter",e.stroke()))}function v(e,t,i){var n=e.shadowBlur,o=i.stroked,r=g(i.x),s=g(i.y),a=g(i.w);o&&e.strokeText(t,r,s,a),i.filled&&(n&&o&&(e.shadowBlur=0),e.fillText(t,r,s,a),n&&o&&(e.shadowBlur=n))}var b=function(e,t,i,n){var o=this;o._config=e,o._index=n,o._model=null,o._rects=null,o._ctx=t,o._el=i};e.merge(b.prototype,{_modelize:function(i,n,r,s){var a,l=this,c=l._index,g=e.toFont(e.resolve([r.font,{}],s,c)),m=e.resolve([r.color,t.defaults.color],s,c);return{align:e.resolve([r.align,"center"],s,c),anchor:e.resolve([r.anchor,"center"],s,c),area:s.chart.chartArea,backgroundColor:e.resolve([r.backgroundColor,null],s,c),borderColor:e.resolve([r.borderColor,null],s,c),borderRadius:e.resolve([r.borderRadius,0],s,c),borderWidth:e.resolve([r.borderWidth,0],s,c),clamp:e.resolve([r.clamp,!1],s,c),clip:e.resolve([r.clip,!1],s,c),color:m,display:i,font:g,lines:n,offset:e.resolve([r.offset,4],s,c),opacity:e.resolve([r.opacity,1],s,c),origin:f(l._el,s),padding:e.toPadding(e.resolve([r.padding,4],s,c)),positioner:(a=l._el,a instanceof t.ArcElement?d:a instanceof t.PointElement?u:a instanceof t.BarElement?h:p),rotation:e.resolve([r.rotation,0],s,c)*(Math.PI/180),size:o(l._ctx,n,g),textAlign:e.resolve([r.textAlign,"start"],s,c),textShadowBlur:e.resolve([r.textShadowBlur,0],s,c),textShadowColor:e.resolve([r.textShadowColor,m],s,c),textStrokeColor:e.resolve([r.textStrokeColor,m],s,c),textStrokeWidth:e.resolve([r.textStrokeWidth,0],s,c)}},update:function(t){var i,o,r,s=this,a=null,l=null,c=s._index,d=s._config,u=e.resolve([d.display,!0],t,c);u&&(i=t.dataset.data[c],o=e.valueOrDefault(e.callback(d.formatter,[i,t]),i),(r=e.isNullOrUndef(o)?[]:n(o)).length&&(l=function(e){var t=e.borderWidth||0,i=e.padding,n=e.size.height,o=e.size.width,r=-o/2,s=-n/2;return{frame:{x:r-i.left-t,y:s-i.top-t,w:o+i.width+2*t,h:n+i.height+2*t},text:{x:r,y:s,w:o,h:n}}}(a=s._modelize(u,r,d,t)))),s._model=a,s._rects=l},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,t){var i,n=e.ctx,o=this._model,s=this._rects;this.visible()&&(n.save(),o.clip&&(i=o.area,n.beginPath(),n.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),n.clip()),n.globalAlpha=r(0,o.opacity,1),n.translate(g(t.x),g(t.y)),n.rotate(o.rotation),m(n,s.frame,o),function(e,t,i,n){var o,r=n.textAlign,s=n.color,a=!!s,l=n.font,c=t.length,d=n.textStrokeColor,u=n.textStrokeWidth,h=d&&u;if(c&&(a||h))for(i=function(e,t,i){var n=i.lineHeight,o=e.w,r=e.x;return"center"===t?r+=o/2:"end"!==t&&"right"!==t||(r+=o),{h:n,w:o,x:r,y:e.y+n/2}}(i,r,l),e.font=l.string,e.textAlign=r,e.textBaseline="middle",e.shadowBlur=n.textShadowBlur,e.shadowColor=n.textShadowColor,a&&(e.fillStyle=s),h&&(e.lineJoin="round",e.lineWidth=u,e.strokeStyle=d),o=0,c=t.length;o<c;++o)v(e,t[o],{stroked:h,filled:a,w:i.w,x:i.x,y:i.y+i.h*o})}(n,o.lines,s.text,o),n.restore())}});var y=Number.MIN_SAFE_INTEGER||-9007199254740991,w=Number.MAX_SAFE_INTEGER||9007199254740991;function C(e,t,i){var n=Math.cos(i),o=Math.sin(i),r=t.x,s=t.y;return{x:r+n*(e.x-r)-o*(e.y-s),y:s+o*(e.x-r)+n*(e.y-s)}}function _(e,t){var i,n,o,r,s,a=w,l=y,c=t.origin;for(i=0;i<e.length;++i)o=(n=e[i]).x-c.x,r=n.y-c.y,s=t.vx*o+t.vy*r,a=Math.min(a,s),l=Math.max(l,s);return{min:a,max:l}}function S(e,t){var i=t.x-e.x,n=t.y-e.y,o=Math.sqrt(i*i+n*n);return{vx:(t.x-e.x)/o,vy:(t.y-e.y)/o,origin:e,ln:o}}var x=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function A(e,t,i){var n=t.positioner(e,t),o=n.vx,r=n.vy;if(!o&&!r)return{x:n.x,y:n.y};var s=i.w,a=i.h,l=t.rotation,c=Math.abs(s/2*Math.cos(l))+Math.abs(a/2*Math.sin(l)),d=Math.abs(s/2*Math.sin(l))+Math.abs(a/2*Math.cos(l)),u=1/Math.max(Math.abs(o),Math.abs(r));return c*=o*u,d*=r*u,c+=t.offset*o,d+=t.offset*r,{x:n.x+c,y:n.y+d}}e.merge(x.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,t,i){this._rotation=i,this._rect={x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}},contains:function(e){var t=this,i=t._rect;return!((e=C(e,t.center(),-t._rotation)).x<i.x-1||e.y<i.y-1||e.x>i.x+i.w+2||e.y>i.y+i.h+2)},intersects:function(e){var t,i,n,o=this._points(),r=e._points(),s=[S(o[0],o[1]),S(o[0],o[3])];for(this._rotation!==e._rotation&&s.push(S(r[0],r[1]),S(r[0],r[3])),t=0;t<s.length;++t)if(i=_(o,s[t]),n=_(r,s[t]),i.max<n.min||n.max<i.min)return!1;return!0},_points:function(){var e=this,t=e._rect,i=e._rotation,n=e.center();return[C({x:t.x,y:t.y},n,i),C({x:t.x+t.w,y:t.y},n,i),C({x:t.x+t.w,y:t.y+t.h},n,i),C({x:t.x,y:t.y+t.h},n,i)]}});var E={prepare:function(e){var t,i,n,o,r,s=[];for(t=0,n=e.length;t<n;++t)for(i=0,o=e[t].length;i<o;++i)r=e[t][i],s.push(r),r.$layout={_box:new x,_hidable:!1,_visible:!0,_set:t,_idx:r._index};return s.sort(function(e,t){var i=e.$layout,n=t.$layout;return i._idx===n._idx?n._set-i._set:n._idx-i._idx}),this.update(s),s},update:function(e){var t,i,n,o,r,s=!1;for(t=0,i=e.length;t<i;++t)o=(n=e[t]).model(),(r=n.$layout)._hidable=o&&"auto"===o.display,r._visible=n.visible(),s|=r._hidable;s&&function(e){var t,i,n,o,r,s,a;for(t=0,i=e.length;t<i;++t)(o=(n=e[t]).$layout)._visible&&(a=new Proxy(n._el,{get:(e,t)=>e.getProps([t],!0)[t]}),r=n.geometry(),s=A(a,n.model(),r),o._box.update(s,r,n.rotation()));(function(e,t){var i,n,o,r;for(i=e.length-1;i>=0;--i)for(o=e[i].$layout,n=i-1;n>=0&&o._visible;--n)(r=e[n].$layout)._visible&&o._box.intersects(r._box)&&t(o,r)})(e,function(e,t){var i=e._hidable,n=t._hidable;i&&n||n?t._visible=!1:i&&(e._visible=!1)})}(e)},lookup:function(e,t){var i,n;for(i=e.length-1;i>=0;--i)if((n=e[i].$layout)&&n._visible&&n._box.contains(t))return e[i];return null},draw:function(e,t){var i,n,o,r,s,a;for(i=0,n=t.length;i<n;++i)(r=(o=t[i]).$layout)._visible&&(s=o.geometry(),a=A(o._el,o.model(),s),r._box.update(a,s,o.rotation()),o.draw(e,a))}},T="$datalabels",k="$default";function D(t,i,n,o){if(i){var r,s=n.$context,a=n.$groups;i[a._set]&&(r=i[a._set][a._key])&&!0===e.callback(r,[s,o])&&(t[T]._dirty=!0,n.update(s))}}function M(e,t){var i,n,o=e[T],r=o._listeners;if(r.enter||r.leave){if("mousemove"===t.type)n=E.lookup(o._labels,t);else if("mouseout"!==t.type)return;i=o._hovered,o._hovered=n,function(e,t,i,n,o){var r,s;(i||n)&&(i?n?i!==n&&(s=r=!0):s=!0:r=!0,s&&D(e,t.leave,i,o),r&&D(e,t.enter,n,o))}(e,r,i,n,t)}}return{id:"datalabels",defaults:{align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(t){if(e.isNullOrUndef(t))return null;var i,n,o,r=t;if(e.isObject(t))if(e.isNullOrUndef(t.label))if(e.isNullOrUndef(t.r))for(r="",o=0,n=(i=Object.keys(t)).length;o<n;++o)r+=(0!==o?", ":"")+i[o]+": "+t[i[o]];else r=t.r;else r=t.label;return""+r},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},beforeInit:function(e){e[T]={_actives:[]}},beforeUpdate:function(e){var t=e[T];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(t,i,n){var o,r,s,a,l,c,d,u,h=i.index,p=t[T],g=p._datasets[h]=[],f=t.isDatasetVisible(h),m=t.data.datasets[h],v=function(t,i){var n,o,r,s=t.datalabels,a=[];return!1===s?null:(!0===s&&(s={}),i=e.merge({},[i,s]),o=i.labels||{},r=Object.keys(o),delete i.labels,r.length?r.forEach(function(t){o[t]&&a.push(e.merge({},[i,o[t],{_key:t}]))}):a.push(i),n=a.reduce(function(t,i){return e.each(i.listeners||{},function(e,n){t[n]=t[n]||{},t[n][i._key||k]=e}),delete i.listeners,t},{}),{labels:a,listeners:n})}(m,n),y=i.meta.data||[],w=t.ctx;for(w.save(),o=0,s=y.length;o<s;++o)if((d=y[o])[T]=[],f&&d&&t.getDataVisibility(o)&&!d.skip)for(r=0,a=v.labels.length;r<a;++r)c=(l=v.labels[r])._key,(u=new b(l,w,d,o)).$groups={_set:h,_key:c||k},u.$context={active:!1,chart:t,dataIndex:o,dataset:m,datasetIndex:h},u.update(u.$context),d[T].push(u),g.push(u);w.restore(),e.merge(p._listeners,v.listeners,{merger:function(e,t,n){t[e]=t[e]||{},t[e][i.index]=n[e],p._listened=!0}})},afterUpdate:function(e){e[T]._labels=E.prepare(e[T]._datasets)},afterDatasetsDraw:function(e){E.draw(e,e[T]._labels)},beforeEvent:function(e,t){if(e[T]._listened){var i=t.event;switch(i.type){case"mousemove":case"mouseout":M(e,i);break;case"click":!function(e,t){var i=e[T],n=i._listeners.click,o=n&&E.lookup(i._labels,t);o&&D(e,n,o,t)}(e,i)}}},afterEvent:function(e){var t,i,n,o,r,a,l,c=e[T],d=c._actives,u=c._actives=e.getActiveElements(),h=s(d,u);for(t=0,i=h.length;t<i;++t)if((r=h[t])[1])for(n=0,o=(l=r[0].element[T]||[]).length;n<o;++n)(a=l[n]).$context.active=1===r[1],a.update(a.$context);(c._dirty||h.length)&&(E.update(c._labels),e.render()),delete c._dirty}}}),function(){var e;!function(){"use strict";var t=[,,function(e){function t(e){this.__parent=e,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function i(e,t){this.__cache=[""],this.__indent_size=e.indent_size,this.__indent_string=e.indent_char,e.indent_with_tabs||(this.__indent_string=new Array(e.indent_size+1).join(e.indent_char)),t=t||"",e.indent_level>0&&(t=new Array(e.indent_level+1).join(this.__indent_string)),this.__base_string=t,this.__base_string_length=t.length}function n(e,n){this.__indent_cache=new i(e,n),this.raw=!1,this._end_with_newline=e.end_with_newline,this.indent_size=e.indent_size,this.wrap_line_length=e.wrap_line_length,this.indent_empty_lines=e.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new t(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}t.prototype.clone_empty=function(){var e=new t(this.__parent);return e.set_indent(this.__indent_count,this.__alignment_count),e},t.prototype.item=function(e){return e<0?this.__items[this.__items.length+e]:this.__items[e]},t.prototype.has_match=function(e){for(var t=this.__items.length-1;t>=0;t--)if(this.__items[t].match(e))return!0;return!1},t.prototype.set_indent=function(e,t){this.is_empty()&&(this.__indent_count=e||0,this.__alignment_count=t||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},t.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},t.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},t.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var e=this.__parent.current_line;return e.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),e.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),e.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===e.__items[0]&&(e.__items.splice(0,1),e.__character_count-=1),!0}return!1},t.prototype.is_empty=function(){return 0===this.__items.length},t.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},t.prototype.push=function(e){this.__items.push(e);var t=e.lastIndexOf("\n");-1!==t?this.__character_count=e.length-t:this.__character_count+=e.length},t.prototype.pop=function(){var e=null;return this.is_empty()||(e=this.__items.pop(),this.__character_count-=e.length),e},t.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},t.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},t.prototype.trim=function(){for(;" "===this.last();)this.__items.pop(),this.__character_count-=1},t.prototype.toString=function(){var e="";return this.is_empty()?this.__parent.indent_empty_lines&&(e=this.__parent.get_indent_string(this.__indent_count)):(e=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),e+=this.__items.join("")),e},i.prototype.get_indent_size=function(e,t){var i=this.__base_string_length;return t=t||0,e<0&&(i=0),i+=e*this.__indent_size,i+=t},i.prototype.get_indent_string=function(e,t){var i=this.__base_string;return t=t||0,e<0&&(e=0,i=""),t+=e*this.__indent_size,this.__ensure_cache(t),i+=this.__cache[t]},i.prototype.__ensure_cache=function(e){for(;e>=this.__cache.length;)this.__add_column()},i.prototype.__add_column=function(){var e=this.__cache.length,t=0,i="";this.__indent_size&&e>=this.__indent_size&&(e-=(t=Math.floor(e/this.__indent_size))*this.__indent_size,i=new Array(t+1).join(this.__indent_string)),e&&(i+=new Array(e+1).join(" ")),this.__cache.push(i)},n.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},n.prototype.get_line_number=function(){return this.__lines.length},n.prototype.get_indent_string=function(e,t){return this.__indent_cache.get_indent_string(e,t)},n.prototype.get_indent_size=function(e,t){return this.__indent_cache.get_indent_size(e,t)},n.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},n.prototype.add_new_line=function(e){return!(this.is_empty()||!e&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},n.prototype.get_code=function(e){this.trim(!0);var t=this.current_line.pop();t&&("\n"===t[t.length-1]&&(t=t.replace(/\n+$/g,"")),this.current_line.push(t)),this._end_with_newline&&this.__add_outputline();var i=this.__lines.join("\n");return"\n"!==e&&(i=i.replace(/[\n]/g,e)),i},n.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},n.prototype.set_indent=function(e,t){return e=e||0,t=t||0,this.next_line.set_indent(e,t),this.__lines.length>1?(this.current_line.set_indent(e,t),!0):(this.current_line.set_indent(),!1)},n.prototype.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},n.prototype.add_token=function(e){this.__add_space_before_token(),this.current_line.push(e),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},n.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},n.prototype.remove_indent=function(e){for(var t=this.__lines.length;e<t;)this.__lines[e]._remove_indent(),e++;this.current_line._remove_wrap_indent()},n.prototype.trim=function(e){for(e=void 0!==e&&e,this.current_line.trim();e&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},n.prototype.just_added_newline=function(){return this.current_line.is_empty()},n.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},n.prototype.ensure_empty_line_above=function(e,i){for(var n=this.__lines.length-2;n>=0;){var o=this.__lines[n];if(o.is_empty())break;if(0!==o.item(0).indexOf(e)&&o.item(-1)!==i){this.__lines.splice(n+1,0,new t(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}},e.exports.Output=n},function(e){e.exports.Token=function(e,t,i,n){this.type=e,this.text=t,this.comments_before=null,this.newlines=i||0,this.whitespace_before=n||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},,,function(e){function t(e,t){this.raw_options=i(e,t),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","angular","django","erb","handlebars","php","smarty"],["auto"])}function i(e,t){var i,o={};for(i in e=n(e))i!==t&&(o[i]=e[i]);if(t&&e[t])for(i in e[t])o[i]=e[t][i];return o}function n(e){var t,i={};for(t in e){i[t.replace(/-/g,"_")]=e[t]}return i}t.prototype._get_array=function(e,t){var i=this.raw_options[e],n=t||[];return"object"==typeof i?null!==i&&"function"==typeof i.concat&&(n=i.concat()):"string"==typeof i&&(n=i.split(/[^a-zA-Z0-9_\/\-]+/)),n},t.prototype._get_boolean=function(e,t){var i=this.raw_options[e];return void 0===i?!!t:!!i},t.prototype._get_characters=function(e,t){var i=this.raw_options[e],n=t||"";return"string"==typeof i&&(n=i.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),n},t.prototype._get_number=function(e,t){var i=this.raw_options[e];t=parseInt(t,10),isNaN(t)&&(t=0);var n=parseInt(i,10);return isNaN(n)&&(n=t),n},t.prototype._get_selection=function(e,t,i){var n=this._get_selection_list(e,t,i);if(1!==n.length)throw new Error("Invalid Option Value: The option '"+e+"' can only be one of the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return n[0]},t.prototype._get_selection_list=function(e,t,i){if(!t||0===t.length)throw new Error("Selection list cannot be empty.");if(i=i||[t[0]],!this._is_valid_selection(i,t))throw new Error("Invalid Default Value!");var n=this._get_array(e,i);if(!this._is_valid_selection(n,t))throw new Error("Invalid Option Value: The option '"+e+"' can contain only the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return n},t.prototype._is_valid_selection=function(e,t){return e.length&&t.length&&!e.some(function(e){return-1===t.indexOf(e)})},e.exports.Options=t,e.exports.normalizeOpts=n,e.exports.mergeOpts=i},,function(e){var t=RegExp.prototype.hasOwnProperty("sticky");function i(e){this.__input=e||"",this.__input_length=this.__input.length,this.__position=0}i.prototype.restart=function(){this.__position=0},i.prototype.back=function(){this.__position>0&&(this.__position-=1)},i.prototype.hasNext=function(){return this.__position<this.__input_length},i.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__input.charAt(this.__position),this.__position+=1),e},i.prototype.peek=function(e){var t=null;return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&(t=this.__input.charAt(e)),t},i.prototype.__match=function(e,i){e.lastIndex=i;var n=e.exec(this.__input);return!n||t&&e.sticky||n.index!==i&&(n=null),n},i.prototype.test=function(e,t){return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&!!this.__match(e,t)},i.prototype.testChar=function(e,t){var i=this.peek(t);return e.lastIndex=0,null!==i&&e.test(i)},i.prototype.match=function(e){var t=this.__match(e,this.__position);return t?this.__position+=t[0].length:t=null,t},i.prototype.read=function(e,t,i){var n,o="";return e&&(n=this.match(e))&&(o+=n[0]),!t||!n&&e||(o+=this.readUntil(t,i)),o},i.prototype.readUntil=function(e,t){var i,n=this.__position;e.lastIndex=this.__position;var o=e.exec(this.__input);return o?(n=o.index,t&&(n+=o[0].length)):n=this.__input_length,i=this.__input.substring(this.__position,n),this.__position=n,i},i.prototype.readUntilAfter=function(e){return this.readUntil(e,!0)},i.prototype.get_regexp=function(e,i){var n=null,o="g";return i&&t&&(o="y"),"string"==typeof e&&""!==e?n=new RegExp(e,o):e&&(n=new RegExp(e.source,o)),n},i.prototype.get_literal_regexp=function(e){return RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},i.prototype.peekUntilAfter=function(e){var t=this.__position,i=this.readUntilAfter(e);return this.__position=t,i},i.prototype.lookBack=function(e){var t=this.__position-1;return t>=e.length&&this.__input.substring(t-e.length,t).toLowerCase()===e},e.exports.InputScanner=i},function(e,t,i){var n=i(8).InputScanner,o=i(3).Token,r=i(10).TokenStream,s=i(11).WhitespacePattern,a={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},l=function(e,t){this._input=new n(e),this._options=t||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new s(this._input)};l.prototype.tokenize=function(){var e;this._input.restart(),this.__tokens=new r,this._reset();for(var t=new o(a.START,""),i=null,n=[],s=new r;t.type!==a.EOF;){for(e=this._get_next_token(t,i);this._is_comment(e);)s.add(e),e=this._get_next_token(t,i);s.isEmpty()||(e.comments_before=s,s=new r),e.parent=i,this._is_opening(e)?(n.push(i),i=e):i&&this._is_closing(e,i)&&(e.opened=i,i.closed=e,i=n.pop(),e.parent=i),e.previous=t,t.next=e,this.__tokens.add(e),t=e}return this.__tokens},l.prototype._is_first_token=function(){return this.__tokens.isEmpty()},l.prototype._reset=function(){},l.prototype._get_next_token=function(e,t){this._readWhitespace();var i=this._input.read(/.+/g);return i?this._create_token(a.RAW,i):this._create_token(a.EOF,"")},l.prototype._is_comment=function(e){return!1},l.prototype._is_opening=function(e){return!1},l.prototype._is_closing=function(e,t){return!1},l.prototype._create_token=function(e,t){return new o(e,t,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},l.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},e.exports.Tokenizer=l,e.exports.TOKEN=a},function(e){function t(e){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=e}t.prototype.restart=function(){this.__position=0},t.prototype.isEmpty=function(){return 0===this.__tokens_length},t.prototype.hasNext=function(){return this.__position<this.__tokens_length},t.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__tokens[this.__position],this.__position+=1),e},t.prototype.peek=function(e){var t=null;return e=e||0,(e+=this.__position)>=0&&e<this.__tokens_length&&(t=this.__tokens[e]),t},t.prototype.add=function(e){this.__parent_token&&(e.parent=this.__parent_token),this.__tokens.push(e),this.__tokens_length+=1},e.exports.TokenStream=t},function(e,t,i){var n=i(12).Pattern;function o(e,t){n.call(this,e,t),t?this._line_regexp=this._input.get_regexp(t._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}o.prototype=new n,o.prototype.__set_whitespace_patterns=function(e,t){e+="\\t ",t+="\\n\\r",this._match_pattern=this._input.get_regexp("["+e+t+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+t+"]")},o.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var e=this._input.read(this._match_pattern);if(" "===e)this.whitespace_before_token=" ";else if(e){var t=this.__split(this._newline_regexp,e);this.newline_count=t.length-1,this.whitespace_before_token=t[this.newline_count]}return e},o.prototype.matching=function(e,t){var i=this._create();return i.__set_whitespace_patterns(e,t),i._update(),i},o.prototype._create=function(){return new o(this._input,this)},o.prototype.__split=function(e,t){e.lastIndex=0;for(var i=0,n=[],o=e.exec(t);o;)n.push(t.substring(i,o.index)),i=o.index+o[0].length,o=e.exec(t);return i<t.length?n.push(t.substring(i,t.length)):n.push(""),n},e.exports.WhitespacePattern=o},function(e){function t(e,t){this._input=e,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,t&&(this._starting_pattern=this._input.get_regexp(t._starting_pattern,!0),this._match_pattern=this._input.get_regexp(t._match_pattern,!0),this._until_pattern=this._input.get_regexp(t._until_pattern),this._until_after=t._until_after)}t.prototype.read=function(){var e=this._input.read(this._starting_pattern);return this._starting_pattern&&!e||(e+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),e},t.prototype.read_match=function(){return this._input.match(this._match_pattern)},t.prototype.until_after=function(e){var t=this._create();return t._until_after=!0,t._until_pattern=this._input.get_regexp(e),t._update(),t},t.prototype.until=function(e){var t=this._create();return t._until_after=!1,t._until_pattern=this._input.get_regexp(e),t._update(),t},t.prototype.starting_with=function(e){var t=this._create();return t._starting_pattern=this._input.get_regexp(e,!0),t._update(),t},t.prototype.matching=function(e){var t=this._create();return t._match_pattern=this._input.get_regexp(e,!0),t._update(),t},t.prototype._create=function(){return new t(this._input,this)},t.prototype._update=function(){},e.exports.Pattern=t},function(e){function t(e,t){e="string"==typeof e?e:e.source,t="string"==typeof t?t:t.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+t,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+t,"g")}t.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var t={};this.__directive_pattern.lastIndex=0;for(var i=this.__directive_pattern.exec(e);i;)t[i[1]]=i[2],i=this.__directive_pattern.exec(e);return t},t.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)},e.exports.Directives=t},function(e,t,i){var n=i(12).Pattern,o={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1,angular:!1};function r(e,t){n.call(this,e,t),this.__template_pattern=null,this._disabled=Object.assign({},o),this._excluded=Object.assign({},o),t&&(this.__template_pattern=this._input.get_regexp(t.__template_pattern),this._excluded=Object.assign(this._excluded,t._excluded),this._disabled=Object.assign(this._disabled,t._disabled));var i=new n(e);this.__patterns={handlebars_comment:i.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:i.starting_with(/{{{/).until_after(/}}}/),handlebars:i.starting_with(/{{/).until_after(/}}/),php:i.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:i.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:i.starting_with(/{%/).until_after(/%}/),django_value:i.starting_with(/{{/).until_after(/}}/),django_comment:i.starting_with(/{#/).until_after(/#}/),smarty:i.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:i.starting_with(/{\*/).until_after(/\*}/),smarty_literal:i.starting_with(/{literal}/).until_after(/{\/literal}/)}}r.prototype=new n,r.prototype._create=function(){return new r(this._input,this)},r.prototype._update=function(){this.__set_templated_pattern()},r.prototype.disable=function(e){var t=this._create();return t._disabled[e]=!0,t._update(),t},r.prototype.read_options=function(e){var t=this._create();for(var i in o)t._disabled[i]=-1===e.templating.indexOf(i);return t._update(),t},r.prototype.exclude=function(e){var t=this._create();return t._excluded[e]=!0,t._update(),t},r.prototype.read=function(){var e="";e=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var t=this._read_template();t;)this._match_pattern?t+=this._input.read(this._match_pattern):t+=this._input.readUntil(this.__template_pattern),e+=t,t=this._read_template();return this._until_after&&(e+=this._input.readUntilAfter(this._until_pattern)),e},r.prototype.__set_templated_pattern=function(){var e=[];this._disabled.php||e.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||e.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.angular||e.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||e.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(e.push(this.__patterns.django._starting_pattern.source),e.push(this.__patterns.django_value._starting_pattern.source),e.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||e.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&e.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+e.join("|")+")")},r.prototype._read_template=function(){var e="",t=this._input.peek();if("<"===t){var i=this._input.peek(1);this._disabled.php||this._excluded.php||"?"!==i||(e=e||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||"%"!==i||(e=e||this.__patterns.erb.read())}else"{"===t&&(this._disabled.handlebars||this._excluded.handlebars||(e=(e=(e=e||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(e=e||this.__patterns.django_value.read()),this._excluded.django||(e=(e=e||this.__patterns.django_comment.read())||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(e=(e=(e=e||this.__patterns.smarty_comment.read())||this.__patterns.smarty_literal.read())||this.__patterns.smarty.read()));return e},e.exports.TemplatablePattern=r},,,,function(e,t,i){var n=i(19).Beautifier,o=i(20).Options;e.exports=function(e,t,i,o){return new n(e,t,i,o).beautify()},e.exports.defaultOptions=function(){return new o}},function(e,t,i){var n=i(20).Options,o=i(2).Output,r=i(21).Tokenizer,s=i(21).TOKEN,a=/\r\n|[\r\n]/,l=/\r\n|[\r\n]/g,c=function(e,t){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=e.max_preserve_newlines,this.preserve_newlines=e.preserve_newlines,this._output=new o(e,t)};c.prototype.current_line_has_match=function(e){return this._output.current_line.has_match(e)},c.prototype.set_space_before_token=function(e,t){this._output.space_before_token=e,this._output.non_breaking_space=t},c.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},c.prototype.add_raw_token=function(e){this._output.add_raw_token(e)},c.prototype.print_preserved_newlines=function(e){var t=0;e.type!==s.TEXT&&e.previous.type!==s.TEXT&&(t=e.newlines?1:0),this.preserve_newlines&&(t=e.newlines<this.max_preserve_newlines+1?e.newlines:this.max_preserve_newlines+1);for(var i=0;i<t;i++)this.print_newline(i>0);return 0!==t},c.prototype.traverse_whitespace=function(e){return!(!e.whitespace_before&&!e.newlines)&&(this.print_preserved_newlines(e)||(this._output.space_before_token=!0),!0)},c.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},c.prototype.print_newline=function(e){this._output.add_new_line(e)},c.prototype.print_token=function(e){e.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(e.text))},c.prototype.indent=function(){this.indent_level++},c.prototype.deindent=function(){this.indent_level>0&&(this.indent_level--,this._output.set_indent(this.indent_level,this.alignment_size))},c.prototype.get_full_indent=function(e){return(e=this.indent_level+(e||0))<1?"":this._output.get_indent_string(e)};var d=function(e,t){var i=null,n=null;return t.closed?("script"===e?i="text/javascript":"style"===e&&(i="text/css"),i=function(e){for(var t=null,i=e.next;i.type!==s.EOF&&e.closed!==i;){if(i.type===s.ATTRIBUTE&&"type"===i.text){i.next&&i.next.type===s.EQUALS&&i.next.next&&i.next.next.type===s.VALUE&&(t=i.next.next.text);break}i=i.next}return t}(t)||i,i.search("text/css")>-1?n="css":i.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?n="javascript":i.search(/(text|application|dojo)\/(x-)?(html)/)>-1?n="html":i.search(/test\/null/)>-1&&(n="null"),n):null};function u(e,t){return-1!==t.indexOf(e)}function h(e,t,i){this.parent=e||null,this.tag=t?t.tag_name:"",this.indent_level=i||0,this.parser_token=t||null}function p(e){this._printer=e,this._current_frame=null}function g(e,t,i,o){this._source_text=e||"",t=t||{},this._js_beautify=i,this._css_beautify=o,this._tag_stack=null;var r=new n(t,"html");this._options=r,this._is_wrap_attributes_force="force"===this._options.wrap_attributes.substr(0,5),this._is_wrap_attributes_force_expand_multiline="force-expand-multiline"===this._options.wrap_attributes,this._is_wrap_attributes_force_aligned="force-aligned"===this._options.wrap_attributes,this._is_wrap_attributes_aligned_multiple="aligned-multiple"===this._options.wrap_attributes,this._is_wrap_attributes_preserve="preserve"===this._options.wrap_attributes.substr(0,8),this._is_wrap_attributes_preserve_aligned="preserve-aligned"===this._options.wrap_attributes}p.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},p.prototype.record_tag=function(e){var t=new h(this._current_frame,e,this._printer.indent_level);this._current_frame=t},p.prototype._try_pop_frame=function(e){var t=null;return e&&(t=e.parser_token,this._printer.indent_level=e.indent_level,this._current_frame=e.parent),t},p.prototype._get_frame=function(e,t){for(var i=this._current_frame;i&&-1===e.indexOf(i.tag);){if(t&&-1!==t.indexOf(i.tag)){i=null;break}i=i.parent}return i},p.prototype.try_pop=function(e,t){var i=this._get_frame([e],t);return this._try_pop_frame(i)},p.prototype.indent_to_tag=function(e){var t=this._get_frame(e);t&&(this._printer.indent_level=t.indent_level)},g.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e=this._source_text,t=this._options.eol;"auto"===this._options.eol&&(t="\n",e&&a.test(e)&&(t=e.match(a)[0]));var i=(e=e.replace(l,"\n")).match(/^[\t ]*/)[0],n={text:"",type:""},o=new f(this._options),d=new c(this._options,i),u=new r(e,this._options).tokenize();this._tag_stack=new p(d);for(var h=null,g=u.next();g.type!==s.EOF;)g.type===s.TAG_OPEN||g.type===s.COMMENT?o=h=this._handle_tag_open(d,g,o,n,u):g.type===s.ATTRIBUTE||g.type===s.EQUALS||g.type===s.VALUE||g.type===s.TEXT&&!o.tag_complete?h=this._handle_inside_tag(d,g,o,n):g.type===s.TAG_CLOSE?h=this._handle_tag_close(d,g,o):g.type===s.TEXT?h=this._handle_text(d,g,o):g.type===s.CONTROL_FLOW_OPEN?h=this._handle_control_flow_open(d,g):g.type===s.CONTROL_FLOW_CLOSE?h=this._handle_control_flow_close(d,g):d.add_raw_token(g),n=h,g=u.next();return d._output.get_code(t)},g.prototype._handle_control_flow_open=function(e,t){var i={text:t.text,type:t.type};return e.set_space_before_token(t.newlines||""!==t.whitespace_before,!0),t.newlines?e.print_preserved_newlines(t):e.set_space_before_token(t.newlines||""!==t.whitespace_before,!0),e.print_token(t),e.indent(),i},g.prototype._handle_control_flow_close=function(e,t){var i={text:t.text,type:t.type};return e.deindent(),t.newlines?e.print_preserved_newlines(t):e.set_space_before_token(t.newlines||""!==t.whitespace_before,!0),e.print_token(t),i},g.prototype._handle_tag_close=function(e,t,i){var n={text:t.text,type:t.type};return e.alignment_size=0,i.tag_complete=!0,e.set_space_before_token(t.newlines||""!==t.whitespace_before,!0),i.is_unformatted?e.add_raw_token(t):("<"===i.tag_start_char&&(e.set_space_before_token("/"===t.text[0],!0),this._is_wrap_attributes_force_expand_multiline&&i.has_wrapped_attrs&&e.print_newline(!1)),e.print_token(t)),!i.indent_content||i.is_unformatted||i.is_content_unformatted||(e.indent(),i.indent_content=!1),i.is_inline_element||i.is_unformatted||i.is_content_unformatted||e.set_wrap_point(),n},g.prototype._handle_inside_tag=function(e,t,i,n){var o=i.has_wrapped_attrs,r={text:t.text,type:t.type};return e.set_space_before_token(t.newlines||""!==t.whitespace_before,!0),i.is_unformatted?e.add_raw_token(t):"{"===i.tag_start_char&&t.type===s.TEXT?e.print_preserved_newlines(t)?(t.newlines=0,e.add_raw_token(t)):e.print_token(t):(t.type===s.ATTRIBUTE?e.set_space_before_token(!0):(t.type===s.EQUALS||t.type===s.VALUE&&t.previous.type===s.EQUALS)&&e.set_space_before_token(!1),t.type===s.ATTRIBUTE&&"<"===i.tag_start_char&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(e.traverse_whitespace(t),o=o||0!==t.newlines),this._is_wrap_attributes_force&&i.attr_count>=this._options.wrap_attributes_min_attrs&&(n.type!==s.TAG_OPEN||this._is_wrap_attributes_force_expand_multiline)&&(e.print_newline(!1),o=!0)),e.print_token(t),o=o||e.previous_token_wrapped(),i.has_wrapped_attrs=o),r},g.prototype._handle_text=function(e,t,i){var n={text:t.text,type:"TK_CONTENT"};return i.custom_beautifier_name?this._print_custom_beatifier_text(e,t,i):i.is_unformatted||i.is_content_unformatted?e.add_raw_token(t):(e.traverse_whitespace(t),e.print_token(t)),n},g.prototype._print_custom_beatifier_text=function(e,t,i){var n=this;if(""!==t.text){var o,r=t.text,s=1,a="",l="";"javascript"===i.custom_beautifier_name&&"function"==typeof this._js_beautify?o=this._js_beautify:"css"===i.custom_beautifier_name&&"function"==typeof this._css_beautify?o=this._css_beautify:"html"===i.custom_beautifier_name&&(o=function(e,t){return new g(e,t,n._js_beautify,n._css_beautify).beautify()}),"keep"===this._options.indent_scripts?s=0:"separate"===this._options.indent_scripts&&(s=-e.indent_level);var c=e.get_full_indent(s);if(r=r.replace(/\n[ \t]*$/,""),"html"!==i.custom_beautifier_name&&"<"===r[0]&&r.match(/^(<!--|<!\[CDATA\[)/)){var d=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(r);if(!d)return void e.add_raw_token(t);a=c+d[1]+"\n",r=d[4],d[5]&&(l=c+d[5]),r=r.replace(/\n[ \t]*$/,""),(d[2]||-1!==d[3].indexOf("\n"))&&(d=d[3].match(/[ \t]+$/))&&(t.whitespace_before=d[0])}if(r)if(o){var u=function(){this.eol="\n"};u.prototype=this._options.raw_options,r=o(c+r,new u)}else{var h=t.whitespace_before;h&&(r=r.replace(new RegExp("\n("+h+")?","g"),"\n")),r=c+r.replace(/\n/g,"\n"+c)}a&&(r=r?a+r+"\n"+l:a+l),e.print_newline(!1),r&&(t.text=r,t.whitespace_before="",t.newlines=0,e.add_raw_token(t),e.print_newline(!0))}},g.prototype._handle_tag_open=function(e,t,i,n,o){var r=this._get_tag_open_token(t);if(!i.is_unformatted&&!i.is_content_unformatted||i.is_empty_element||t.type!==s.TAG_OPEN||r.is_start_tag?(e.traverse_whitespace(t),this._set_tag_position(e,t,r,i,n),r.is_inline_element||e.set_wrap_point(),e.print_token(t)):(e.add_raw_token(t),r.start_tag_token=this._tag_stack.try_pop(r.tag_name)),r.is_start_tag&&this._is_wrap_attributes_force){var a,l=0;do{(a=o.peek(l)).type===s.ATTRIBUTE&&(r.attr_count+=1),l+=1}while(a.type!==s.EOF&&a.type!==s.TAG_CLOSE)}return(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(r.alignment_size=t.text.length+1),r.tag_complete||r.is_unformatted||(e.alignment_size=r.alignment_size),r};var f=function(e,t,i){if(this.parent=t||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",i){var n;this.tag_start_char=i.text[0],this.text=i.text,"<"===this.tag_start_char?(n=i.text.match(/^<([^\s>]*)/),this.tag_check=n?n[1]:""):(n=i.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=n?n[1]:"",(i.text.startsWith("{{#>")||i.text.startsWith("{{~#>"))&&">"===this.tag_check[0]&&(">"===this.tag_check&&null!==i.next?this.tag_check=i.next.text.split(" ")[0]:this.tag_check=i.text.split(">")[1])),this.tag_check=this.tag_check.toLowerCase(),i.type===s.COMMENT&&(this.tag_complete=!0),this.is_start_tag="/"!==this.tag_check.charAt(0),this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||i.closed&&"/>"===i.closed.text;var o=2;"{"===this.tag_start_char&&this.text.length>=3&&"~"===this.text.charAt(2)&&(o=3),this.is_end_tag=this.is_end_tag||"{"===this.tag_start_char&&(!e.indent_handlebars||this.text.length<3||/[^#\^]/.test(this.text.charAt(o)))}else this.tag_complete=!0};g.prototype._get_tag_open_token=function(e){var t=new f(this._options,this._tag_stack.get_parser_token(),e);return t.alignment_size=this._options.wrap_attributes_indent_size,t.is_end_tag=t.is_end_tag||u(t.tag_check,this._options.void_elements),t.is_empty_element=t.tag_complete||t.is_start_tag&&t.is_end_tag,t.is_unformatted=!t.tag_complete&&u(t.tag_check,this._options.unformatted),t.is_content_unformatted=!t.is_empty_element&&u(t.tag_check,this._options.content_unformatted),t.is_inline_element=u(t.tag_name,this._options.inline)||this._options.inline_custom_elements&&t.tag_name.includes("-")||"{"===t.tag_start_char,t},g.prototype._set_tag_position=function(e,t,i,n,o){if(i.is_empty_element||(i.is_end_tag?i.start_tag_token=this._tag_stack.try_pop(i.tag_name):(this._do_optional_end_element(i)&&(i.is_inline_element||e.print_newline(!1)),this._tag_stack.record_tag(i),"script"!==i.tag_name&&"style"!==i.tag_name||i.is_unformatted||i.is_content_unformatted||(i.custom_beautifier_name=d(i.tag_check,t)))),u(i.tag_check,this._options.extra_liners)&&(e.print_newline(!1),e._output.just_added_blankline()||e.print_newline(!0)),i.is_empty_element){if("{"===i.tag_start_char&&"else"===i.tag_check)this._tag_stack.indent_to_tag(["if","unless","each"]),i.indent_content=!0,e.current_line_has_match(/{{#if/)||e.print_newline(!1);"!--"===i.tag_name&&o.type===s.TAG_CLOSE&&n.is_end_tag&&-1===i.text.indexOf("\n")||(i.is_inline_element||i.is_unformatted||e.print_newline(!1),this._calcluate_parent_multiline(e,i))}else if(i.is_end_tag){var r=!1;r=(r=i.start_tag_token&&i.start_tag_token.multiline_content)||!i.is_inline_element&&!(n.is_inline_element||n.is_unformatted)&&!(o.type===s.TAG_CLOSE&&i.start_tag_token===n)&&"TK_CONTENT"!==o.type,(i.is_content_unformatted||i.is_unformatted)&&(r=!1),r&&e.print_newline(!1)}else i.indent_content=!i.custom_beautifier_name,"<"===i.tag_start_char&&("html"===i.tag_name?i.indent_content=this._options.indent_inner_html:"head"===i.tag_name?i.indent_content=this._options.indent_head_inner_html:"body"===i.tag_name&&(i.indent_content=this._options.indent_body_inner_html)),i.is_inline_element||i.is_unformatted||"TK_CONTENT"===o.type&&!i.is_content_unformatted||e.print_newline(!1),this._calcluate_parent_multiline(e,i)},g.prototype._calcluate_parent_multiline=function(e,t){!t.parent||!e._output.just_added_newline()||(t.is_inline_element||t.is_unformatted)&&t.parent.is_inline_element||(t.parent.multiline_content=!0)};var m=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","menu","nav","ol","p","pre","section","table","ul"],v=["a","audio","del","ins","map","noscript","video"];g.prototype._do_optional_end_element=function(e){var t=null;if(!e.is_empty_element&&e.is_start_tag&&e.parent){if("body"===e.tag_name)t=t||this._tag_stack.try_pop("head");else if("li"===e.tag_name)t=t||this._tag_stack.try_pop("li",["ol","ul","menu"]);else if("dd"===e.tag_name||"dt"===e.tag_name)t=(t=t||this._tag_stack.try_pop("dt",["dl"]))||this._tag_stack.try_pop("dd",["dl"]);else if("p"===e.parent.tag_name&&-1!==m.indexOf(e.tag_name)){var i=e.parent.parent;i&&-1!==v.indexOf(i.tag_name)||(t=t||this._tag_stack.try_pop("p"))}else"rp"===e.tag_name||"rt"===e.tag_name?t=(t=t||this._tag_stack.try_pop("rt",["ruby","rtc"]))||this._tag_stack.try_pop("rp",["ruby","rtc"]):"optgroup"===e.tag_name?t=t||this._tag_stack.try_pop("optgroup",["select"]):"option"===e.tag_name?t=t||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):"colgroup"===e.tag_name?t=t||this._tag_stack.try_pop("caption",["table"]):"thead"===e.tag_name?t=(t=t||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]):"tbody"===e.tag_name||"tfoot"===e.tag_name?t=(t=(t=(t=t||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("thead",["table"]))||this._tag_stack.try_pop("tbody",["table"]):"tr"===e.tag_name?t=(t=(t=t||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"]):"th"!==e.tag_name&&"td"!==e.tag_name||(t=(t=t||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]))||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return e.parent=this._tag_stack.get_parser_token(),t}},e.exports.Beautifier=g},function(e,t,i){var n=i(6).Options;function o(e){n.call(this,e,"html"),1===this.templating.length&&"auto"===this.templating[0]&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_min_attrs=this._get_number("wrap_attributes_min_attrs",2),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.inline_custom_elements=this._get_boolean("inline_custom_elements",!0),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}o.prototype=new n,e.exports.Options=o},function(e,t,i){var n=i(9).Tokenizer,o=i(9).TOKEN,r=i(13).Directives,s=i(14).TemplatablePattern,a=i(12).Pattern,l={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",CONTROL_FLOW_OPEN:"TK_CONTROL_FLOW_OPEN",CONTROL_FLOW_CLOSE:"TK_CONTROL_FLOW_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:o.START,RAW:o.RAW,EOF:o.EOF},c=new r(/<\!--/,/-->/),d=function(e,t){n.call(this,e,t),this._current_tag_name="";var i=new s(this._input).read_options(this._options),o=new a(this._input);if(this.__patterns={word:i.until(/[\n\r\t <]/),word_control_flow_close_excluded:i.until(/[\n\r\t <}]/),single_quote:i.until_after(/'/),double_quote:i.until_after(/"/),attribute:i.until(/[\n\r\t =>]|\/>/),element_name:i.until(/[\n\r\t >\/]/),angular_control_flow_start:o.matching(/\@[a-zA-Z]+[^({]*[({]/),handlebars_comment:o.starting_with(/{{!--/).until_after(/--}}/),handlebars:o.starting_with(/{{/).until_after(/}}/),handlebars_open:o.until(/[\n\r\t }]/),handlebars_raw_close:o.until(/}}/),comment:o.starting_with(/<!--/).until_after(/-->/),cdata:o.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:o.starting_with(/<!\[/).until_after(/]>/),processing:o.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars"),this.__patterns.word_control_flow_close_excluded=this.__patterns.word_control_flow_close_excluded.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var r=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=o.matching(r).until_after(r)}};(d.prototype=new n)._is_comment=function(e){return!1},d.prototype._is_opening=function(e){return e.type===l.TAG_OPEN||e.type===l.CONTROL_FLOW_OPEN},d.prototype._is_closing=function(e,t){return e.type===l.TAG_CLOSE&&t&&((">"===e.text||"/>"===e.text)&&"<"===t.text[0]||"}}"===e.text&&"{"===t.text[0]&&"{"===t.text[1])||e.type===l.CONTROL_FLOW_CLOSE&&"}"===e.text&&t.text.endsWith("{")},d.prototype._reset=function(){this._current_tag_name=""},d.prototype._get_next_token=function(e,t){var i=null;this._readWhitespace();var n=this._input.peek();return null===n?this._create_token(l.EOF,""):i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=i||this._read_open_handlebars(n,t))||this._read_attribute(n,e,t))||this._read_close(n,t))||this._read_script_and_style(n,e))||this._read_control_flows(n,t))||this._read_raw_content(n,e,t))||this._read_content_word(n,t))||this._read_comment_or_cdata(n))||this._read_processing(n))||this._read_open(n,t))||this._create_token(l.UNKNOWN,this._input.next())},d.prototype._read_comment_or_cdata=function(e){var t=null,i=null,n=null;"<"===e&&("!"===this._input.peek(1)&&((i=this.__patterns.comment.read())?(n=c.get_directives(i))&&"start"===n.ignore&&(i+=c.readIgnored(this._input)):i=this.__patterns.cdata.read()),i&&((t=this._create_token(l.COMMENT,i)).directives=n));return t},d.prototype._read_processing=function(e){var t=null,i=null;if("<"===e){var n=this._input.peek(1);"!"!==n&&"?"!==n||(i=(i=this.__patterns.conditional_comment.read())||this.__patterns.processing.read()),i&&((t=this._create_token(l.COMMENT,i)).directives=null)}return t},d.prototype._read_open=function(e,t){var i=null,n=null;return t&&t.type!==l.CONTROL_FLOW_OPEN||"<"===e&&(i=this._input.next(),"/"===this._input.peek()&&(i+=this._input.next()),i+=this.__patterns.element_name.read(),n=this._create_token(l.TAG_OPEN,i)),n},d.prototype._read_open_handlebars=function(e,t){var i=null,n=null;return t&&t.type!==l.CONTROL_FLOW_OPEN||(this._options.templating.includes("angular")||this._options.indent_handlebars)&&"{"===e&&"{"===this._input.peek(1)&&(this._options.indent_handlebars&&"!"===this._input.peek(2)?(i=(i=this.__patterns.handlebars_comment.read())||this.__patterns.handlebars.read(),n=this._create_token(l.COMMENT,i)):(i=this.__patterns.handlebars_open.read(),n=this._create_token(l.TAG_OPEN,i))),n},d.prototype._read_control_flows=function(e,t){var i="",n=null;if(!this._options.templating.includes("angular"))return n;if("@"===e){if(""===(i=this.__patterns.angular_control_flow_start.read()))return n;for(var o=i.endsWith("(")?1:0,r=0;!i.endsWith("{")||o!==r;){var s=this._input.next();if(null===s)break;"("===s?o++:")"===s&&r++,i+=s}n=this._create_token(l.CONTROL_FLOW_OPEN,i)}else"}"===e&&t&&t.type===l.CONTROL_FLOW_OPEN&&(i=this._input.next(),n=this._create_token(l.CONTROL_FLOW_CLOSE,i));return n},d.prototype._read_close=function(e,t){var i=null,n=null;return t&&t.type===l.TAG_OPEN&&("<"===t.text[0]&&(">"===e||"/"===e&&">"===this._input.peek(1))?(i=this._input.next(),"/"===e&&(i+=this._input.next()),n=this._create_token(l.TAG_CLOSE,i)):"{"===t.text[0]&&"}"===e&&"}"===this._input.peek(1)&&(this._input.next(),this._input.next(),n=this._create_token(l.TAG_CLOSE,"}}"))),n},d.prototype._read_attribute=function(e,t,i){var n=null,o="";if(i&&"<"===i.text[0])if("="===e)n=this._create_token(l.EQUALS,this._input.next());else if('"'===e||"'"===e){var r=this._input.next();r+='"'===e?this.__patterns.double_quote.read():this.__patterns.single_quote.read(),n=this._create_token(l.VALUE,r)}else(o=this.__patterns.attribute.read())&&(n=t.type===l.EQUALS?this._create_token(l.VALUE,o):this._create_token(l.ATTRIBUTE,o));return n},d.prototype._is_content_unformatted=function(e){return-1===this._options.void_elements.indexOf(e)&&(-1!==this._options.content_unformatted.indexOf(e)||-1!==this._options.unformatted.indexOf(e))},d.prototype._read_raw_content=function(e,t,i){var n="";if(i&&"{"===i.text[0])n=this.__patterns.handlebars_raw_close.read();else if(t.type===l.TAG_CLOSE&&"<"===t.opened.text[0]&&"/"!==t.text[0]){var o=t.opened.text.substr(1).toLowerCase();this._is_content_unformatted(o)&&(n=this._input.readUntil(new RegExp("</"+o+"[\\n\\r\\t ]*?>","ig")))}return n?this._create_token(l.TEXT,n):null},d.prototype._read_script_and_style=function(e,t){if(t.type===l.TAG_CLOSE&&"<"===t.opened.text[0]&&"/"!==t.text[0]){var i=t.opened.text.substr(1).toLowerCase();if("script"===i||"style"===i){var n=this._read_comment_or_cdata(e);if(n)return n.type=l.TEXT,n;var o=this._input.readUntil(new RegExp("</"+i+"[\\n\\r\\t ]*?>","ig"));if(o)return this._create_token(l.TEXT,o)}}return null},d.prototype._read_content_word=function(e,t){var i="";return this._options.unformatted_content_delimiter&&e===this._options.unformatted_content_delimiter[0]&&(i=this.__patterns.unformatted_content_delimiter.read()),i||(i=t&&t.type===l.CONTROL_FLOW_OPEN?this.__patterns.word_control_flow_close_excluded.read():this.__patterns.word.read()),i?this._create_token(l.TEXT,i):null},e.exports.Tokenizer=d,e.exports.TOKEN=l}],i={};var n=function e(n){var o=i[n];if(void 0!==o)return o.exports;var r=i[n]={exports:{}};return t[n](r,r.exports,e),r.exports}(18);e=n}();var t=e;if("function"==typeof define&&define.amd)define(["require","./beautify","./beautify-css"],function(e){var i=e("./beautify"),n=e("./beautify-css");return{html_beautify:function(e,o){return t(e,o,i.js_beautify,n.css_beautify)}}});else if("undefined"!=typeof exports){var i=require("./beautify.js"),n=require("./beautify-css.js");exports.html_beautify=function(e,o){return t(e,o,i.js_beautify,n.css_beautify)}}else"undefined"!=typeof window?window.html_beautify=function(e,i){return t(e,i,window.js_beautify,window.css_beautify)}:"undefined"!=typeof global&&(global.html_beautify=function(e,i){return t(e,i,global.js_beautify,global.css_beautify)})}(),function(e){e(["jquery","lodash"],function(e,t){return function(){const i=parseInt(e("html").css("--popup-width")),n=parseInt(e("html").css("--popup-width-mobile"));var o,r,s=0,a="alert",l="info",c="success",d="warning";const u=[c,d,a,l];var h={clear:function(t){var i=b();o||g(i);f(t,i)||function(t){for(var i=o.children(),n=i.length-1;n>=0;n--)f(e(i[n]),t)}(i)},remove:function(t){var i=b();o||g(i);if(t&&0===e(":focus",t).length)return void y(t,i.removeEmptyContainer);o.children().length&&o.remove()},alert:function(e,t,i){return v({type:a,title:e,message:t,options:i})},getContainer:g,info:function(e,t,i){return v({type:l,title:e,message:t,options:i})},options:{},subscribe:function(e){r=e},success:function(e,t,i){return v({type:c,title:e,message:t,options:i})},version:"2.0.3",warning:p,warning_permanent:p};return h;function p(e,t,i){return v({type:d,title:e,message:t,options:i})}function g(t,i){return t||(t=b()),(o=e("#"+t.containerId)).length||i&&(o=function(t){return o=e("<div/>").attr("id",t.containerId).addClass(t.positionClass).attr("aria-live","polite").attr("role","alert"),o.appendTo(e(t.target)),o}(t)),o}function f(t,i){return!(!t||0!==e(":focus",t).length)&&(t[i.hideMethod]({duration:i.hideDuration,easing:i.hideEasing,complete:function(){y(t,i.removeEmptyContainer)}}),!0)}function m(e){r&&r(e)}function v(r){var a=b(),l=e.extend(a,r);if(void 0!==r.options&&(l=e.extend(l,r.options)),(o=g(l,!0)).is("[data-popups-options]")){const e=AGN.Lib.Helpers.objFromString(o.data("popups-options"));l=t.extend(l,e)}const c=e(`.popup-${l.type}`);if(l.useTabs&&c.is(":visible"))return k(c),c;s++;var d=t.template(function(){return this._template||(this._template='\n                <div class="{{= toastClass }} {{= toastClass }}-{{= type }}">\n                  <div class="{{= headerClass }} {{= tabsClass }}"></div>\n                  <div class="{{= tabClass }} {{= arrowClass }} {{= leftArrowClass }} {{= activeTabClass }}">\n                    <i class="icon icon-{{= leftArrowClass }}"></i>\n                  </div>\n                  <div class="{{= tabClass }} {{= arrowClass }} {{= rightArrowClass }} {{= activeTabClass }}">\n                    <i class="icon icon-{{= rightArrowClass }}"></i>\n                  </div>\n                  \n                  <div class="{{= headerClass }}">\n                    <div class="d-flex">\n                     {{ if (collapse) { }}\n                        <i class="icon icon-caret-left me-2"></i>\n                     {{ } }}\n                     <i class="icon icon-state-{{= type }} popup-header-icon me-1"></i>\n                    </div>\n                    <span class="popup-header-title">{{= title }}</span>\n                    <i class="js-close close-icon {{= closeIcon }} ms-auto"></i>\n                  </div>\n                  <div class="{{= messageClass }}" style="display: none;">{{= message }}</div>\n                </div>')}())(l),h=e(d),p=null,f=h,v=f.find(".js-close"),w=f.find(`.${l.rightArrowClass}`),C=f.find(`.${l.leftArrowClass}`).hide(),_=0,S={toastId:s,state:"visible",startTime:new Date,options:l};return l.message&&f.find("."+l.messageClass).show(),f.data("type",l.type),function(t){if(l.newestOnTop||!o.find(`.${l.toastClass}`).length)return void o.prepend(t);const i=function(){const t=u.indexOf(l.type);return o.find(`.${l.toastClass}`).filter((i,n)=>{const o=u.indexOf(e(n).data("type"));return t<o}).first()}();if(i.exists())return void t.insertBefore(i);o.append(t)}(f),f[l.showMethod]({duration:l.showDuration,easing:l.showEasing,complete:l.onShown}),l.timeOut>0&&(p=setTimeout(O,l.timeOut)),f.hover(function(){clearTimeout(p),f.stop(!0,!0)[l.showMethod]({duration:l.showDuration,easing:l.showEasing})},function(){(l.timeOut>0||l.extendedTimeOut>0)&&(p=setTimeout(O,l.extendedTimeOut))}),!l.onclick&&l.tapToDismiss&&f.click(O),v&&v.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),l.onCloseClick&&l.onCloseClick(e),f.hasClass(l.hasTabsClass)?function(){const e=P(f).filter(`.${l.activeTabClass}`),t=e.next(),i=t.length?t:e.prev();e.remove(),C.is(":visible")&&A(!0);T(f,i)}():O(!0)}),l.onclick&&f.click(function(){l.onclick(),O()}),m(S),l.debug&&console&&console.log(S),C.click(()=>A()),w.click(()=>function(){const e=(_+=1)*R(f);x(f,-1*e),C.show(),f.find(`.${l.tabsClass}`).width()-e<=f.width()&&w.hide()}()),l.collapse?f.find(`.${l.headerClass}:not(.${l.tabsClass})`).click(()=>{f.toggleClass(l.expandedClass,I(f)),E(f)}):f.addClass(l.expandedClass),k(f),f;function x(e,t){e.find(`.${l.tabsClass}`).css("transform",`translateX(${t}px)`),setTimeout(()=>M(e),300)}function A(e){const t=(_-=1)*-R(f);x(f,t),e||w.show(),0===_&&C.hide()}function E(t){let i=P(t);t.toggleClass(l.hasTabsClass,i.length>1),t.toggleClass(l.hasCarouselClass,i.length>10);const n=R(t);t.find(`.${l.tabClass}`).each((t,i)=>e(i).css("width",`${n}px`)),M(t)}function T(e,t){P(e).filter(`.${l.activeTabClass}`).removeClass(l.activeTabClass),t.addClass(l.activeTabClass),e.find(`.${l.messageClass}`).html(t.data("options").message),E(e)}function k(t){const i=function(){const t=e(`\n                    <div class="${l.tabClass}">\n                      <i class="icon icon-state-${l.type}"></i>\n                    </div>`);return t.data("options",l),t}();t.find(`.${l.tabsClass}`).prepend(i),T(t,i),i.click(()=>T(t,i))}function D(e){e.style("border-right-width","0")}function M(t){let i=P(t);i.each((t,i)=>{e(i).style("border-right-width","1px")}),D(i.filter(`.${l.activeTabClass}`).prev());const n=function(t,i){const n=t.offset().left,o=t.offset().left+t.outerWidth();return i.filter((t,i)=>{const r=e(i),s=r.offset().left,a=r.offset().left+r.outerWidth();return s>=n-5&&a<=o+5})}(t,i);t.find(`.${l.rightArrowClass}`).is(":visible")&&D(n.last().prev()),t.find(`.${l.leftArrowClass}`).is(":visible")&&D(n.first())}function P(e){return e.find(`.${l.tabClass}:not(.${l.arrowClass})`)}function R(e){return!e.hasClass(l.expandedClass)||I(e)?i/10:e.width()/10}function I(e){return e.width()===n}function O(t){if(!e(":focus",f).length&&!f.hasClass(l.expandedClass)||t)return f[l.hideMethod]({duration:l.hideDuration,easing:l.hideEasing,complete:function(){y(f,l.removeEmptyContainer),l.onHidden&&"hidden"!==S.state&&l.onHidden(),S.state="hidden",S.endTime=new Date,m(S)}})}}function b(){return e.extend({},{tapToDismiss:!1,toastClass:"popup",containerId:"popups",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,onCloseClick:void 0,positionClass:"popups-bottom-right",timeOut:5e3,titleClass:"headline",messageClass:"popup-content",tabsClass:"popup-tabs",tabClass:"popup-tab",arrowClass:"arrow",leftArrowClass:"arrow-left",rightArrowClass:"arrow-right",headerClass:"popup-header",activeTabClass:"active",hasTabsClass:"has-tabs",hasCarouselClass:"has-carousel",expandedClass:"expanded",closeIcon:"icon icon-times-circle",target:"body",newestOnTop:!1,useTabs:!0,removeEmptyContainer:!0,collapse:!0},h.options)}function y(e,t=!0){o||(o=g()),e.is(":visible")||(e.remove(),e=null,t&&0===o.children().length&&o.remove())}}()})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery","lodash")):window.toastr=t(window.jQuery,window._)}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var e,t;function i(){return e.apply(null,arguments)}function n(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function s(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(r(e,t))return!1;return!0}function a(e){return void 0===e}function l(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function c(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){var i,n=[],o=e.length;for(i=0;i<o;++i)n.push(t(e[i],i));return n}function u(e,t){for(var i in t)r(t,i)&&(e[i]=t[i]);return r(t,"toString")&&(e.toString=t.toString),r(t,"valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t,i,n){return It(e,t,i,n,!0).utc()}function p(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function g(e){var i=null,n=!1,o=e._d&&!isNaN(e._d.getTime());return o&&(i=p(e),n=t.call(i.parsedDateParts,function(e){return null!=e}),o=i.overflow<0&&!i.empty&&!i.invalidEra&&!i.invalidMonth&&!i.invalidWeekday&&!i.weekdayMismatch&&!i.nullInput&&!i.invalidFormat&&!i.userInvalidated&&(!i.meridiem||i.meridiem&&n),e._strict&&(o=o&&0===i.charsLeftOver&&0===i.unusedTokens.length&&void 0===i.bigHour)),null!=Object.isFrozen&&Object.isFrozen(e)?o:(e._isValid=o,e._isValid)}function f(e){var t=h(NaN);return null!=e?u(p(t),e):p(t).userInvalidated=!0,t}t=Array.prototype.some?Array.prototype.some:function(e){var t,i=Object(this),n=i.length>>>0;for(t=0;t<n;t++)if(t in i&&e.call(this,i[t],t,i))return!0;return!1};var m=i.momentProperties=[],v=!1;function b(e,t){var i,n,o,r=m.length;if(a(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),a(t._i)||(e._i=t._i),a(t._f)||(e._f=t._f),a(t._l)||(e._l=t._l),a(t._strict)||(e._strict=t._strict),a(t._tzm)||(e._tzm=t._tzm),a(t._isUTC)||(e._isUTC=t._isUTC),a(t._offset)||(e._offset=t._offset),a(t._pf)||(e._pf=p(t)),a(t._locale)||(e._locale=t._locale),r>0)for(i=0;i<r;i++)a(o=t[n=m[i]])||(e[n]=o);return e}function y(e){b(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===v&&(v=!0,i.updateOffset(this),v=!1)}function w(e){return e instanceof y||null!=e&&null!=e._isAMomentObject}function C(e){!1===i.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function _(e,t){var n=!0;return u(function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,e),n){var o,s,a,l=[],c=arguments.length;for(s=0;s<c;s++){if(o="","object"==typeof arguments[s]){for(a in o+="\n["+s+"] ",arguments[0])r(arguments[0],a)&&(o+=a+": "+arguments[0][a]+", ");o=o.slice(0,-2)}else o=arguments[s];l.push(o)}C(e+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)},t)}var S,x={};function A(e,t){null!=i.deprecationHandler&&i.deprecationHandler(e,t),x[e]||(C(t),x[e]=!0)}function E(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function T(e,t){var i,n=u({},e);for(i in t)r(t,i)&&(o(e[i])&&o(t[i])?(n[i]={},u(n[i],e[i]),u(n[i],t[i])):null!=t[i]?n[i]=t[i]:delete n[i]);for(i in e)r(e,i)&&!r(t,i)&&o(e[i])&&(n[i]=u({},n[i]));return n}function k(e){null!=e&&this.set(e)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,S=Object.keys?Object.keys:function(e){var t,i=[];for(t in e)r(e,t)&&i.push(t);return i};function D(e,t,i){var n=""+Math.abs(e),o=t-n.length;return(e>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+n}var M=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,R={},I={};function O(e,t,i,n){var o=n;"string"==typeof n&&(o=function(){return this[n]()}),e&&(I[e]=o),t&&(I[t[0]]=function(){return D(o.apply(this,arguments),t[1],t[2])}),i&&(I[i]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function N(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function L(e,t){return e.isValid()?(t=F(t,e.localeData()),R[t]=R[t]||function(e){var t,i,n=e.match(M);for(t=0,i=n.length;t<i;t++)I[n[t]]?n[t]=I[n[t]]:n[t]=N(n[t]);return function(t){var o,r="";for(o=0;o<i;o++)r+=E(n[o])?n[o].call(t,e):n[o];return r}}(t),R[t](e)):e.localeData().invalidDate()}function F(e,t){var i=5;function n(e){return t.longDateFormat(e)||e}for(P.lastIndex=0;i>=0&&P.test(e);)e=e.replace(P,n),P.lastIndex=0,i-=1;return e}var $={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function G(e){return"string"==typeof e?$[e]||$[e.toLowerCase()]:void 0}function B(e){var t,i,n={};for(i in e)r(e,i)&&(t=G(i))&&(n[t]=e[i]);return n}var H={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};var z,W=/\d/,V=/\d\d/,j=/\d{3}/,U=/\d{4}/,Y=/[+-]?\d{6}/,q=/\d\d?/,K=/\d\d\d\d?/,X=/\d\d\d\d\d\d?/,Z=/\d{1,3}/,J=/\d{1,4}/,Q=/[+-]?\d{1,6}/,ee=/\d+/,te=/[+-]?\d+/,ie=/Z|[+-]\d\d:?\d\d/gi,ne=/Z|[+-]\d\d(?::?\d\d)?/gi,oe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,re=/^[1-9]\d?/,se=/^([1-9]\d|\d)/;function ae(e,t,i){z[e]=E(t)?t:function(e,n){return e&&i?i:t}}function le(e,t){return r(z,e)?z[e](t._strict,t._locale):new RegExp(ce(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,o){return t||i||n||o})))}function ce(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function de(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ue(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=de(t)),i}z={};var he={};function pe(e,t){var i,n,o=t;for("string"==typeof e&&(e=[e]),l(t)&&(o=function(e,i){i[t]=ue(e)}),n=e.length,i=0;i<n;i++)he[e[i]]=o}function ge(e,t){pe(e,function(e,i,n,o){n._w=n._w||{},t(e,n._w,n,o)})}function fe(e,t,i){null!=t&&r(he,e)&&he[e](t,i._a,i,e)}function me(e){return e%4==0&&e%100!=0||e%400==0}var ve=0,be=1,ye=2,we=3,Ce=4,_e=5,Se=6,xe=7,Ae=8;function Ee(e){return me(e)?366:365}O("Y",0,0,function(){var e=this.year();return e<=9999?D(e,4):"+"+e}),O(0,["YY",2],0,function(){return this.year()%100}),O(0,["YYYY",4],0,"year"),O(0,["YYYYY",5],0,"year"),O(0,["YYYYYY",6,!0],0,"year"),ae("Y",te),ae("YY",q,V),ae("YYYY",J,U),ae("YYYYY",Q,Y),ae("YYYYYY",Q,Y),pe(["YYYYY","YYYYYY"],ve),pe("YYYY",function(e,t){t[ve]=2===e.length?i.parseTwoDigitYear(e):ue(e)}),pe("YY",function(e,t){t[ve]=i.parseTwoDigitYear(e)}),pe("Y",function(e,t){t[ve]=parseInt(e,10)}),i.parseTwoDigitYear=function(e){return ue(e)+(ue(e)>68?1900:2e3)};var Te,ke=De("FullYear",!0);function De(e,t){return function(n){return null!=n?(Pe(this,e,n),i.updateOffset(this,t),this):Me(this,e)}}function Me(e,t){if(!e.isValid())return NaN;var i=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?i.getUTCMilliseconds():i.getMilliseconds();case"Seconds":return n?i.getUTCSeconds():i.getSeconds();case"Minutes":return n?i.getUTCMinutes():i.getMinutes();case"Hours":return n?i.getUTCHours():i.getHours();case"Date":return n?i.getUTCDate():i.getDate();case"Day":return n?i.getUTCDay():i.getDay();case"Month":return n?i.getUTCMonth():i.getMonth();case"FullYear":return n?i.getUTCFullYear():i.getFullYear();default:return NaN}}function Pe(e,t,i){var n,o,r,s,a;if(e.isValid()&&!isNaN(i)){switch(n=e._d,o=e._isUTC,t){case"Milliseconds":return void(o?n.setUTCMilliseconds(i):n.setMilliseconds(i));case"Seconds":return void(o?n.setUTCSeconds(i):n.setSeconds(i));case"Minutes":return void(o?n.setUTCMinutes(i):n.setMinutes(i));case"Hours":return void(o?n.setUTCHours(i):n.setHours(i));case"Date":return void(o?n.setUTCDate(i):n.setDate(i));case"FullYear":break;default:return}r=i,s=e.month(),a=29!==(a=e.date())||1!==s||me(r)?a:28,o?n.setUTCFullYear(r,s,a):n.setFullYear(r,s,a)}}function Re(e,t){if(isNaN(e)||isNaN(t))return NaN;var i,n=(t%(i=12)+i)%i;return e+=(t-n)/12,1===n?me(e)?29:28:31-n%7%2}Te=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},O("M",["MM",2],"Mo",function(){return this.month()+1}),O("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),O("MMMM",0,0,function(e){return this.localeData().months(this,e)}),ae("M",q,re),ae("MM",q,V),ae("MMM",function(e,t){return t.monthsShortRegex(e)}),ae("MMMM",function(e,t){return t.monthsRegex(e)}),pe(["M","MM"],function(e,t){t[be]=ue(e)-1}),pe(["MMM","MMMM"],function(e,t,i,n){var o=i._locale.monthsParse(e,n,i._strict);null!=o?t[be]=o:p(i).invalidMonth=e});var Ie="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Oe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ne=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Le=oe,Fe=oe;function $e(e,t,i){var n,o,r,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)r=h([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(r,"").toLocaleLowerCase();return i?"MMM"===t?-1!==(o=Te.call(this._shortMonthsParse,s))?o:null:-1!==(o=Te.call(this._longMonthsParse,s))?o:null:"MMM"===t?-1!==(o=Te.call(this._shortMonthsParse,s))||-1!==(o=Te.call(this._longMonthsParse,s))?o:null:-1!==(o=Te.call(this._longMonthsParse,s))||-1!==(o=Te.call(this._shortMonthsParse,s))?o:null}function Ge(e,t){if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=ue(t);else if(!l(t=e.localeData().monthsParse(t)))return e;var i=t,n=e.date();return n=n<29?n:Math.min(n,Re(e.year(),i)),e._isUTC?e._d.setUTCMonth(i,n):e._d.setMonth(i,n),e}function Be(e){return null!=e?(Ge(this,e),i.updateOffset(this,!0),this):Me(this,"Month")}function He(){function e(e,t){return t.length-e.length}var t,i,n,o,r=[],s=[],a=[];for(t=0;t<12;t++)i=h([2e3,t]),n=ce(this.monthsShort(i,"")),o=ce(this.months(i,"")),r.push(n),s.push(o),a.push(o),a.push(n);r.sort(e),s.sort(e),a.sort(e),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function ze(e,t,i,n,o,r,s){var a;return e<100&&e>=0?(a=new Date(e+400,t,i,n,o,r,s),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,t,i,n,o,r,s),a}function We(e){var t,i;return e<100&&e>=0?((i=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,i)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ve(e,t,i){var n=7+t-i;return-((7+We(e,0,n).getUTCDay()-t)%7)+n-1}function je(e,t,i,n,o){var r,s,a=1+7*(t-1)+(7+i-n)%7+Ve(e,n,o);return a<=0?s=Ee(r=e-1)+a:a>Ee(e)?(r=e+1,s=a-Ee(e)):(r=e,s=a),{year:r,dayOfYear:s}}function Ue(e,t,i){var n,o,r=Ve(e.year(),t,i),s=Math.floor((e.dayOfYear()-r-1)/7)+1;return s<1?n=s+Ye(o=e.year()-1,t,i):s>Ye(e.year(),t,i)?(n=s-Ye(e.year(),t,i),o=e.year()+1):(o=e.year(),n=s),{week:n,year:o}}function Ye(e,t,i){var n=Ve(e,t,i),o=Ve(e+1,t,i);return(Ee(e)-n+o)/7}O("w",["ww",2],"wo","week"),O("W",["WW",2],"Wo","isoWeek"),ae("w",q,re),ae("ww",q,V),ae("W",q,re),ae("WW",q,V),ge(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=ue(e)});function qe(e,t){return e.slice(t,7).concat(e.slice(0,t))}O("d",0,"do","day"),O("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),O("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),O("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),O("e",0,0,"weekday"),O("E",0,0,"isoWeekday"),ae("d",q),ae("e",q),ae("E",q),ae("dd",function(e,t){return t.weekdaysMinRegex(e)}),ae("ddd",function(e,t){return t.weekdaysShortRegex(e)}),ae("dddd",function(e,t){return t.weekdaysRegex(e)}),ge(["dd","ddd","dddd"],function(e,t,i,n){var o=i._locale.weekdaysParse(e,n,i._strict);null!=o?t.d=o:p(i).invalidWeekday=e}),ge(["d","e","E"],function(e,t,i,n){t[n]=ue(e)});var Ke="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Xe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ze="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Je=oe,Qe=oe,et=oe;function tt(e,t,i){var n,o,r,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)r=h([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(r,"").toLocaleLowerCase();return i?"dddd"===t?-1!==(o=Te.call(this._weekdaysParse,s))?o:null:"ddd"===t?-1!==(o=Te.call(this._shortWeekdaysParse,s))?o:null:-1!==(o=Te.call(this._minWeekdaysParse,s))?o:null:"dddd"===t?-1!==(o=Te.call(this._weekdaysParse,s))||-1!==(o=Te.call(this._shortWeekdaysParse,s))||-1!==(o=Te.call(this._minWeekdaysParse,s))?o:null:"ddd"===t?-1!==(o=Te.call(this._shortWeekdaysParse,s))||-1!==(o=Te.call(this._weekdaysParse,s))||-1!==(o=Te.call(this._minWeekdaysParse,s))?o:null:-1!==(o=Te.call(this._minWeekdaysParse,s))||-1!==(o=Te.call(this._weekdaysParse,s))||-1!==(o=Te.call(this._shortWeekdaysParse,s))?o:null}function it(){function e(e,t){return t.length-e.length}var t,i,n,o,r,s=[],a=[],l=[],c=[];for(t=0;t<7;t++)i=h([2e3,1]).day(t),n=ce(this.weekdaysMin(i,"")),o=ce(this.weekdaysShort(i,"")),r=ce(this.weekdays(i,"")),s.push(n),a.push(o),l.push(r),c.push(n),c.push(o),c.push(r);s.sort(e),a.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function nt(){return this.hours()%12||12}function ot(e,t){O(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function rt(e,t){return t._meridiemParse}O("H",["HH",2],0,"hour"),O("h",["hh",2],0,nt),O("k",["kk",2],0,function(){return this.hours()||24}),O("hmm",0,0,function(){return""+nt.apply(this)+D(this.minutes(),2)}),O("hmmss",0,0,function(){return""+nt.apply(this)+D(this.minutes(),2)+D(this.seconds(),2)}),O("Hmm",0,0,function(){return""+this.hours()+D(this.minutes(),2)}),O("Hmmss",0,0,function(){return""+this.hours()+D(this.minutes(),2)+D(this.seconds(),2)}),ot("a",!0),ot("A",!1),ae("a",rt),ae("A",rt),ae("H",q,se),ae("h",q,re),ae("k",q,re),ae("HH",q,V),ae("hh",q,V),ae("kk",q,V),ae("hmm",K),ae("hmmss",X),ae("Hmm",K),ae("Hmmss",X),pe(["H","HH"],we),pe(["k","kk"],function(e,t,i){var n=ue(e);t[we]=24===n?0:n}),pe(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),pe(["h","hh"],function(e,t,i){t[we]=ue(e),p(i).bigHour=!0}),pe("hmm",function(e,t,i){var n=e.length-2;t[we]=ue(e.substr(0,n)),t[Ce]=ue(e.substr(n)),p(i).bigHour=!0}),pe("hmmss",function(e,t,i){var n=e.length-4,o=e.length-2;t[we]=ue(e.substr(0,n)),t[Ce]=ue(e.substr(n,2)),t[_e]=ue(e.substr(o)),p(i).bigHour=!0}),pe("Hmm",function(e,t,i){var n=e.length-2;t[we]=ue(e.substr(0,n)),t[Ce]=ue(e.substr(n))}),pe("Hmmss",function(e,t,i){var n=e.length-4,o=e.length-2;t[we]=ue(e.substr(0,n)),t[Ce]=ue(e.substr(n,2)),t[_e]=ue(e.substr(o))});var st=De("Hours",!0);var at,lt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ie,monthsShort:Oe,week:{dow:0,doy:6},weekdays:Ke,weekdaysMin:Ze,weekdaysShort:Xe,meridiemParse:/[ap]\.?m?\.?/i},ct={},dt={};function ut(e,t){var i,n=Math.min(e.length,t.length);for(i=0;i<n;i+=1)if(e[i]!==t[i])return i;return n}function ht(e){return e?e.toLowerCase().replace("_","-"):e}function pt(e){var t=null;if(void 0===ct[e]&&"undefined"!=typeof module&&module&&module.exports&&function(e){return!(!e||!e.match("^[^/\\\\]*$"))}(e))try{t=at._abbr,require("./locale/"+e),gt(t)}catch(t){ct[e]=null}return ct[e]}function gt(e,t){var i;return e&&((i=a(t)?mt(e):ft(e,t))?at=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),at._abbr}function ft(e,t){if(null!==t){var i,n=lt;if(t.abbr=e,null!=ct[e])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=ct[e]._config;else if(null!=t.parentLocale)if(null!=ct[t.parentLocale])n=ct[t.parentLocale]._config;else{if(null==(i=pt(t.parentLocale)))return dt[t.parentLocale]||(dt[t.parentLocale]=[]),dt[t.parentLocale].push({name:e,config:t}),null;n=i._config}return ct[e]=new k(T(n,t)),dt[e]&&dt[e].forEach(function(e){ft(e.name,e.config)}),gt(e),ct[e]}return delete ct[e],null}function mt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return at;if(!n(e)){if(t=pt(e))return t;e=[e]}return function(e){for(var t,i,n,o,r=0;r<e.length;){for(t=(o=ht(e[r]).split("-")).length,i=(i=ht(e[r+1]))?i.split("-"):null;t>0;){if(n=pt(o.slice(0,t).join("-")))return n;if(i&&i.length>=t&&ut(o,i)>=t-1)break;t--}r++}return at}(e)}function vt(e){var t,i=e._a;return i&&-2===p(e).overflow&&(t=i[be]<0||i[be]>11?be:i[ye]<1||i[ye]>Re(i[ve],i[be])?ye:i[we]<0||i[we]>24||24===i[we]&&(0!==i[Ce]||0!==i[_e]||0!==i[Se])?we:i[Ce]<0||i[Ce]>59?Ce:i[_e]<0||i[_e]>59?_e:i[Se]<0||i[Se]>999?Se:-1,p(e)._overflowDayOfYear&&(t<ve||t>ye)&&(t=ye),p(e)._overflowWeeks&&-1===t&&(t=xe),p(e)._overflowWeekday&&-1===t&&(t=Ae),p(e).overflow=t),e}var bt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wt=/Z|[+-]\d\d(?::?\d\d)?/,Ct=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],_t=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],St=/^\/?Date\((-?\d+)/i,xt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,At={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Et(e){var t,i,n,o,r,s,a=e._i,l=bt.exec(a)||yt.exec(a),c=Ct.length,d=_t.length;if(l){for(p(e).iso=!0,t=0,i=c;t<i;t++)if(Ct[t][1].exec(l[1])){o=Ct[t][0],n=!1!==Ct[t][2];break}if(null==o)return void(e._isValid=!1);if(l[3]){for(t=0,i=d;t<i;t++)if(_t[t][1].exec(l[3])){r=(l[2]||" ")+_t[t][0];break}if(null==r)return void(e._isValid=!1)}if(!n&&null!=r)return void(e._isValid=!1);if(l[4]){if(!wt.exec(l[4]))return void(e._isValid=!1);s="Z"}e._f=o+(r||"")+(s||""),Pt(e)}else e._isValid=!1}function Tt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function kt(e){var t,i,n,o,r,s,a,l,c=xt.exec(e._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){if(i=c[4],n=c[3],o=c[2],r=c[5],s=c[6],a=c[7],l=[Tt(i),Oe.indexOf(n),parseInt(o,10),parseInt(r,10),parseInt(s,10)],a&&l.push(parseInt(a,10)),t=l,!function(e,t,i){return!e||Xe.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(p(i).weekdayMismatch=!0,i._isValid=!1,!1)}(c[1],t,e))return;e._a=t,e._tzm=function(e,t,i){if(e)return At[e];if(t)return 0;var n=parseInt(i,10),o=n%100;return(n-o)/100*60+o}(c[8],c[9],c[10]),e._d=We.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),p(e).rfc2822=!0}else e._isValid=!1}function Dt(e,t,i){return null!=e?e:null!=t?t:i}function Mt(e){var t,n,o,r,s,a=[];if(!e._d){for(o=function(e){var t=new Date(i.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[ye]&&null==e._a[be]&&function(e){var t,i,n,o,r,s,a,l,c;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(r=1,s=4,i=Dt(t.GG,e._a[ve],Ue(Ot(),1,4).year),n=Dt(t.W,1),((o=Dt(t.E,1))<1||o>7)&&(l=!0)):(r=e._locale._week.dow,s=e._locale._week.doy,c=Ue(Ot(),r,s),i=Dt(t.gg,e._a[ve],c.year),n=Dt(t.w,c.week),null!=t.d?((o=t.d)<0||o>6)&&(l=!0):null!=t.e?(o=t.e+r,(t.e<0||t.e>6)&&(l=!0)):o=r);n<1||n>Ye(i,r,s)?p(e)._overflowWeeks=!0:null!=l?p(e)._overflowWeekday=!0:(a=je(i,n,o,r,s),e._a[ve]=a.year,e._dayOfYear=a.dayOfYear)}(e),null!=e._dayOfYear&&(s=Dt(e._a[ve],o[ve]),(e._dayOfYear>Ee(s)||0===e._dayOfYear)&&(p(e)._overflowDayOfYear=!0),n=We(s,0,e._dayOfYear),e._a[be]=n.getUTCMonth(),e._a[ye]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=o[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[we]&&0===e._a[Ce]&&0===e._a[_e]&&0===e._a[Se]&&(e._nextDay=!0,e._a[we]=0),e._d=(e._useUTC?We:ze).apply(null,a),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[we]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(p(e).weekdayMismatch=!0)}}function Pt(e){if(e._f!==i.ISO_8601)if(e._f!==i.RFC_2822){e._a=[],p(e).empty=!0;var t,n,o,r,s,a,l,c=""+e._i,d=c.length,u=0;for(l=(o=F(e._f,e._locale).match(M)||[]).length,t=0;t<l;t++)r=o[t],(n=(c.match(le(r,e))||[])[0])&&((s=c.substr(0,c.indexOf(n))).length>0&&p(e).unusedInput.push(s),c=c.slice(c.indexOf(n)+n.length),u+=n.length),I[r]?(n?p(e).empty=!1:p(e).unusedTokens.push(r),fe(r,n,e)):e._strict&&!n&&p(e).unusedTokens.push(r);p(e).charsLeftOver=d-u,c.length>0&&p(e).unusedInput.push(c),e._a[we]<=12&&!0===p(e).bigHour&&e._a[we]>0&&(p(e).bigHour=void 0),p(e).parsedDateParts=e._a.slice(0),p(e).meridiem=e._meridiem,e._a[we]=function(e,t,i){var n;if(null==i)return t;return null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?((n=e.isPM(i))&&t<12&&(t+=12),n||12!==t||(t=0),t):t}(e._locale,e._a[we],e._meridiem),null!==(a=p(e).era)&&(e._a[ve]=e._locale.erasConvertYear(a,e._a[ve])),Mt(e),vt(e)}else kt(e);else Et(e)}function Rt(e){var t=e._i,r=e._f;return e._locale=e._locale||mt(e._l),null===t||void 0===r&&""===t?f({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),w(t)?new y(vt(t)):(c(t)?e._d=t:n(r)?function(e){var t,i,n,o,r,s,a=!1,l=e._f.length;if(0===l)return p(e).invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<l;o++)r=0,s=!1,t=b({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],Pt(t),g(t)&&(s=!0),r+=p(t).charsLeftOver,r+=10*p(t).unusedTokens.length,p(t).score=r,a?r<n&&(n=r,i=t):(null==n||r<n||s)&&(n=r,i=t,s&&(a=!0));u(e,i||t)}(e):r?Pt(e):function(e){var t=e._i;a(t)?e._d=new Date(i.now()):c(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=St.exec(e._i);null===t?(Et(e),!1===e._isValid&&(delete e._isValid,kt(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:i.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):n(t)?(e._a=d(t.slice(0),function(e){return parseInt(e,10)}),Mt(e)):o(t)?function(e){if(!e._d){var t=B(e._i),i=void 0===t.day?t.date:t.day;e._a=d([t.year,t.month,i,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),Mt(e)}}(e):l(t)?e._d=new Date(t):i.createFromInputFallback(e)}(e),g(e)||(e._d=null),e))}function It(e,t,i,r,a){var l,c={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==i&&!1!==i||(r=i,i=void 0),(o(e)&&s(e)||n(e)&&0===e.length)&&(e=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=a,c._l=i,c._i=e,c._f=t,c._strict=r,(l=new y(vt(Rt(c))))._nextDay&&(l.add(1,"d"),l._nextDay=void 0),l}function Ot(e,t,i,n){return It(e,t,i,n,!1)}i.createFromInputFallback=_("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),i.ISO_8601=function(){},i.RFC_2822=function(){};var Nt=_("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ot.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:f()}),Lt=_("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ot.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:f()});function Ft(e,t){var i,o;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return Ot();for(i=t[0],o=1;o<t.length;++o)t[o].isValid()&&!t[o][e](i)||(i=t[o]);return i}var $t=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Gt(e){var t=B(e),i=t.year||0,n=t.quarter||0,o=t.month||0,s=t.week||t.isoWeek||0,a=t.day||0,l=t.hour||0,c=t.minute||0,d=t.second||0,u=t.millisecond||0;this._isValid=function(e){var t,i,n=!1,o=$t.length;for(t in e)if(r(e,t)&&(-1===Te.call($t,t)||null!=e[t]&&isNaN(e[t])))return!1;for(i=0;i<o;++i)if(e[$t[i]]){if(n)return!1;parseFloat(e[$t[i]])!==ue(e[$t[i]])&&(n=!0)}return!0}(t),this._milliseconds=+u+1e3*d+6e4*c+1e3*l*60*60,this._days=+a+7*s,this._months=+o+3*n+12*i,this._data={},this._locale=mt(),this._bubble()}function Bt(e){return e instanceof Gt}function Ht(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function zt(e,t){O(e,0,0,function(){var e=this.utcOffset(),i="+";return e<0&&(e=-e,i="-"),i+D(~~(e/60),2)+t+D(~~e%60,2)})}zt("Z",":"),zt("ZZ",""),ae("Z",ne),ae("ZZ",ne),pe(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=Vt(ne,e)});var Wt=/([\+\-]|\d\d)/gi;function Vt(e,t){var i,n,o=(t||"").match(e);return null===o?null:0===(n=60*(i=((o[o.length-1]||[])+"").match(Wt)||["-",0,0])[1]+ue(i[2]))?0:"+"===i[0]?n:-n}function jt(e,t){var n,o;return t._isUTC?(n=t.clone(),o=(w(e)||c(e)?e.valueOf():Ot(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+o),i.updateOffset(n,!1),n):Ot(e).local()}function Ut(e){return-Math.round(e._d.getTimezoneOffset())}function Yt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}i.updateOffset=function(){};var qt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Kt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Xt(e,t){var i,n,o,s=e,a=null;return Bt(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:l(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(a=qt.exec(e))?(i="-"===a[1]?-1:1,s={y:0,d:ue(a[ye])*i,h:ue(a[we])*i,m:ue(a[Ce])*i,s:ue(a[_e])*i,ms:ue(Ht(1e3*a[Se]))*i}):(a=Kt.exec(e))?(i="-"===a[1]?-1:1,s={y:Zt(a[2],i),M:Zt(a[3],i),w:Zt(a[4],i),d:Zt(a[5],i),h:Zt(a[6],i),m:Zt(a[7],i),s:Zt(a[8],i)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(o=function(e,t){var i;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=jt(t,e),e.isBefore(t)?i=Jt(e,t):((i=Jt(t,e)).milliseconds=-i.milliseconds,i.months=-i.months);return i}(Ot(s.from),Ot(s.to)),(s={}).ms=o.milliseconds,s.M=o.months),n=new Gt(s),Bt(e)&&r(e,"_locale")&&(n._locale=e._locale),Bt(e)&&r(e,"_isValid")&&(n._isValid=e._isValid),n}function Zt(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function Jt(e,t){var i={};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Qt(e,t){return function(i,n){var o;return null===n||isNaN(+n)||(A(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=i,i=n,n=o),ei(this,Xt(i,n),e),this}}function ei(e,t,n,o){var r=t._milliseconds,s=Ht(t._days),a=Ht(t._months);e.isValid()&&(o=null==o||o,a&&Ge(e,Me(e,"Month")+a*n),s&&Pe(e,"Date",Me(e,"Date")+s*n),r&&e._d.setTime(e._d.valueOf()+r*n),o&&i.updateOffset(e,s||a))}Xt.fn=Gt.prototype,Xt.invalid=function(){return Xt(NaN)};var ti=Qt(1,"add"),ii=Qt(-1,"subtract");function ni(e){return"string"==typeof e||e instanceof String}function oi(e){return w(e)||c(e)||ni(e)||l(e)||function(e){var t=n(e),i=!1;t&&(i=0===e.filter(function(t){return!l(t)&&ni(e)}).length);return t&&i}(e)||function(e){var t,i,n=o(e)&&!s(e),a=!1,l=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=l.length;for(t=0;t<c;t+=1)i=l[t],a=a||r(e,i);return n&&a}(e)||null==e}function ri(e,t){if(e.date()<t.date())return-ri(t,e);var i=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(i,"months");return-(i+(t-n<0?(t-n)/(n-e.clone().add(i-1,"months")):(t-n)/(e.clone().add(i+1,"months")-n)))||0}function si(e){var t;return void 0===e?this._locale._abbr:(null!=(t=mt(e))&&(this._locale=t),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ai=_("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function li(){return this._locale}var ci=1e3,di=6e4,ui=36e5,hi=126227808e5;function pi(e,t){return(e%t+t)%t}function gi(e,t,i){return e<100&&e>=0?new Date(e+400,t,i)-hi:new Date(e,t,i).valueOf()}function fi(e,t,i){return e<100&&e>=0?Date.UTC(e+400,t,i)-hi:Date.UTC(e,t,i)}function mi(e,t){return t.erasAbbrRegex(e)}function vi(){var e,t,i,n,o,r=[],s=[],a=[],l=[],c=this.eras();for(e=0,t=c.length;e<t;++e)i=ce(c[e].name),n=ce(c[e].abbr),o=ce(c[e].narrow),s.push(i),r.push(n),a.push(o),l.push(i),l.push(n),l.push(o);this._erasRegex=new RegExp("^("+l.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+s.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}function bi(e,t){O(0,[e,e.length],0,t)}function yi(e,t,i,n,o){var r;return null==e?Ue(this,n,o).year:(t>(r=Ye(e,n,o))&&(t=r),wi.call(this,e,t,i,n,o))}function wi(e,t,i,n,o){var r=je(e,t,i,n,o),s=We(r.year,0,r.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}O("N",0,0,"eraAbbr"),O("NN",0,0,"eraAbbr"),O("NNN",0,0,"eraAbbr"),O("NNNN",0,0,"eraName"),O("NNNNN",0,0,"eraNarrow"),O("y",["y",1],"yo","eraYear"),O("y",["yy",2],0,"eraYear"),O("y",["yyy",3],0,"eraYear"),O("y",["yyyy",4],0,"eraYear"),ae("N",mi),ae("NN",mi),ae("NNN",mi),ae("NNNN",function(e,t){return t.erasNameRegex(e)}),ae("NNNNN",function(e,t){return t.erasNarrowRegex(e)}),pe(["N","NN","NNN","NNNN","NNNNN"],function(e,t,i,n){var o=i._locale.erasParse(e,n,i._strict);o?p(i).era=o:p(i).invalidEra=e}),ae("y",ee),ae("yy",ee),ae("yyy",ee),ae("yyyy",ee),ae("yo",function(e,t){return t._eraYearOrdinalRegex||ee}),pe(["y","yy","yyy","yyyy"],ve),pe(["yo"],function(e,t,i,n){var o;i._locale._eraYearOrdinalRegex&&(o=e.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?t[ve]=i._locale.eraYearOrdinalParse(e,o):t[ve]=parseInt(e,10)}),O(0,["gg",2],0,function(){return this.weekYear()%100}),O(0,["GG",2],0,function(){return this.isoWeekYear()%100}),bi("gggg","weekYear"),bi("ggggg","weekYear"),bi("GGGG","isoWeekYear"),bi("GGGGG","isoWeekYear"),ae("G",te),ae("g",te),ae("GG",q,V),ae("gg",q,V),ae("GGGG",J,U),ae("gggg",J,U),ae("GGGGG",Q,Y),ae("ggggg",Q,Y),ge(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=ue(e)}),ge(["gg","GG"],function(e,t,n,o){t[o]=i.parseTwoDigitYear(e)}),O("Q",0,"Qo","quarter"),ae("Q",W),pe("Q",function(e,t){t[be]=3*(ue(e)-1)}),O("D",["DD",2],"Do","date"),ae("D",q,re),ae("DD",q,V),ae("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),pe(["D","DD"],ye),pe("Do",function(e,t){t[ye]=ue(e.match(q)[0])});var Ci=De("Date",!0);O("DDD",["DDDD",3],"DDDo","dayOfYear"),ae("DDD",Z),ae("DDDD",j),pe(["DDD","DDDD"],function(e,t,i){i._dayOfYear=ue(e)}),O("m",["mm",2],0,"minute"),ae("m",q,se),ae("mm",q,V),pe(["m","mm"],Ce);var _i=De("Minutes",!1);O("s",["ss",2],0,"second"),ae("s",q,se),ae("ss",q,V),pe(["s","ss"],_e);var Si,xi,Ai=De("Seconds",!1);for(O("S",0,0,function(){return~~(this.millisecond()/100)}),O(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),O(0,["SSS",3],0,"millisecond"),O(0,["SSSS",4],0,function(){return 10*this.millisecond()}),O(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),O(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),O(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),O(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),O(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),ae("S",Z,W),ae("SS",Z,V),ae("SSS",Z,j),Si="SSSS";Si.length<=9;Si+="S")ae(Si,ee);function Ei(e,t){t[Se]=ue(1e3*("0."+e))}for(Si="S";Si.length<=9;Si+="S")pe(Si,Ei);xi=De("Milliseconds",!1),O("z",0,0,"zoneAbbr"),O("zz",0,0,"zoneName");var Ti=y.prototype;function ki(e){return e}Ti.add=ti,Ti.calendar=function(e,t){1===arguments.length&&(arguments[0]?oi(arguments[0])?(e=arguments[0],t=void 0):function(e){var t,i=o(e)&&!s(e),n=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<a.length;t+=1)n=n||r(e,a[t]);return i&&n}(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Ot(),a=jt(n,this).startOf("day"),l=i.calendarFormat(this,a)||"sameElse",c=t&&(E(t[l])?t[l].call(this,n):t[l]);return this.format(c||this.localeData().calendar(l,this,Ot(n)))},Ti.clone=function(){return new y(this)},Ti.diff=function(e,t,i){var n,o,r;if(!this.isValid())return NaN;if(!(n=jt(e,this)).isValid())return NaN;switch(o=6e4*(n.utcOffset()-this.utcOffset()),t=G(t)){case"year":r=ri(this,n)/12;break;case"month":r=ri(this,n);break;case"quarter":r=ri(this,n)/3;break;case"second":r=(this-n)/1e3;break;case"minute":r=(this-n)/6e4;break;case"hour":r=(this-n)/36e5;break;case"day":r=(this-n-o)/864e5;break;case"week":r=(this-n-o)/6048e5;break;default:r=this-n}return i?r:de(r)},Ti.endOf=function(e){var t,n;if(void 0===(e=G(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?fi:gi,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=ui-pi(t+(this._isUTC?0:this.utcOffset()*di),ui)-1;break;case"minute":t=this._d.valueOf(),t+=di-pi(t,di)-1;break;case"second":t=this._d.valueOf(),t+=ci-pi(t,ci)-1}return this._d.setTime(t),i.updateOffset(this,!0),this},Ti.format=function(e){e||(e=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var t=L(this,e);return this.localeData().postformat(t)},Ti.from=function(e,t){return this.isValid()&&(w(e)&&e.isValid()||Ot(e).isValid())?Xt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Ti.fromNow=function(e){return this.from(Ot(),e)},Ti.to=function(e,t){return this.isValid()&&(w(e)&&e.isValid()||Ot(e).isValid())?Xt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Ti.toNow=function(e){return this.to(Ot(),e)},Ti.get=function(e){return E(this[e=G(e)])?this[e]():this},Ti.invalidAt=function(){return p(this).overflow},Ti.isAfter=function(e,t){var i=w(e)?e:Ot(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=G(t)||"millisecond")?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf())},Ti.isBefore=function(e,t){var i=w(e)?e:Ot(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=G(t)||"millisecond")?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf())},Ti.isBetween=function(e,t,i,n){var o=w(e)?e:Ot(e),r=w(t)?t:Ot(t);return!!(this.isValid()&&o.isValid()&&r.isValid())&&(("("===(n=n||"()")[0]?this.isAfter(o,i):!this.isBefore(o,i))&&(")"===n[1]?this.isBefore(r,i):!this.isAfter(r,i)))},Ti.isSame=function(e,t){var i,n=w(e)?e:Ot(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=G(t)||"millisecond")?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf()))},Ti.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},Ti.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},Ti.isValid=function(){return g(this)},Ti.lang=ai,Ti.locale=si,Ti.localeData=li,Ti.max=Lt,Ti.min=Nt,Ti.parsingFlags=function(){return u({},p(this))},Ti.set=function(e,t){if("object"==typeof e){var i,n=function(e){var t,i=[];for(t in e)r(e,t)&&i.push({unit:t,priority:H[t]});return i.sort(function(e,t){return e.priority-t.priority}),i}(e=B(e)),o=n.length;for(i=0;i<o;i++)this[n[i].unit](e[n[i].unit])}else if(E(this[e=G(e)]))return this[e](t);return this},Ti.startOf=function(e){var t,n;if(void 0===(e=G(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?fi:gi,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=pi(t+(this._isUTC?0:this.utcOffset()*di),ui);break;case"minute":t=this._d.valueOf(),t-=pi(t,di);break;case"second":t=this._d.valueOf(),t-=pi(t,ci)}return this._d.setTime(t),i.updateOffset(this,!0),this},Ti.subtract=ii,Ti.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},Ti.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},Ti.toDate=function(){return new Date(this.valueOf())},Ti.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,i=t?this.clone().utc():this;return i.year()<0||i.year()>9999?L(i,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):E(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",L(i,"Z")):L(i,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},Ti.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,i,n="moment",o="";return this.isLocal()||(n=0===this.utcOffset()?"moment.utc":"moment.parseZone",o="Z"),e="["+n+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=o+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+i)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(Ti[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Ti.toJSON=function(){return this.isValid()?this.toISOString():null},Ti.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Ti.unix=function(){return Math.floor(this.valueOf()/1e3)},Ti.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Ti.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Ti.eraName=function(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until)return n[e].name;if(n[e].until<=i&&i<=n[e].since)return n[e].name}return""},Ti.eraNarrow=function(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until)return n[e].narrow;if(n[e].until<=i&&i<=n[e].since)return n[e].narrow}return""},Ti.eraAbbr=function(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until)return n[e].abbr;if(n[e].until<=i&&i<=n[e].since)return n[e].abbr}return""},Ti.eraYear=function(){var e,t,n,o,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=r[e].since<=r[e].until?1:-1,o=this.clone().startOf("day").valueOf(),r[e].since<=o&&o<=r[e].until||r[e].until<=o&&o<=r[e].since)return(this.year()-i(r[e].since).year())*n+r[e].offset;return this.year()},Ti.year=ke,Ti.isLeapYear=function(){return me(this.year())},Ti.weekYear=function(e){return yi.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)},Ti.isoWeekYear=function(e){return yi.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},Ti.quarter=Ti.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},Ti.month=Be,Ti.daysInMonth=function(){return Re(this.year(),this.month())},Ti.week=Ti.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},Ti.isoWeek=Ti.isoWeeks=function(e){var t=Ue(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},Ti.weeksInYear=function(){var e=this.localeData()._week;return Ye(this.year(),e.dow,e.doy)},Ti.weeksInWeekYear=function(){var e=this.localeData()._week;return Ye(this.weekYear(),e.dow,e.doy)},Ti.isoWeeksInYear=function(){return Ye(this.year(),1,4)},Ti.isoWeeksInISOWeekYear=function(){return Ye(this.isoWeekYear(),1,4)},Ti.date=Ci,Ti.day=Ti.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=Me(this,"Day");return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},Ti.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},Ti.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},Ti.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},Ti.hour=Ti.hours=st,Ti.minute=Ti.minutes=_i,Ti.second=Ti.seconds=Ai,Ti.millisecond=Ti.milliseconds=xi,Ti.utcOffset=function(e,t,n){var o,r=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Vt(ne,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(o=Ut(this)),this._offset=e,this._isUTC=!0,null!=o&&this.add(o,"m"),r!==e&&(!t||this._changeInProgress?ei(this,Xt(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:Ut(this)},Ti.utc=function(e){return this.utcOffset(0,e)},Ti.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ut(this),"m")),this},Ti.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Vt(ie,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},Ti.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Ot(e).utcOffset():0,(this.utcOffset()-e)%60==0)},Ti.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Ti.isLocal=function(){return!!this.isValid()&&!this._isUTC},Ti.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Ti.isUtc=Yt,Ti.isUTC=Yt,Ti.zoneAbbr=function(){return this._isUTC?"UTC":""},Ti.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Ti.dates=_("dates accessor is deprecated. Use date instead.",Ci),Ti.months=_("months accessor is deprecated. Use month instead",Be),Ti.years=_("years accessor is deprecated. Use year instead",ke),Ti.zone=_("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),Ti.isDSTShifted=_("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!a(this._isDSTShifted))return this._isDSTShifted;var e,t={};return b(t,this),(t=Rt(t))._a?(e=t._isUTC?h(t._a):Ot(t._a),this._isDSTShifted=this.isValid()&&function(e,t,i){var n,o=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),s=0;for(n=0;n<o;n++)(i&&e[n]!==t[n]||!i&&ue(e[n])!==ue(t[n]))&&s++;return s+r}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted});var Di=k.prototype;function Mi(e,t,i,n){var o=mt(),r=h().set(n,t);return o[i](r,e)}function Pi(e,t,i){if(l(e)&&(t=e,e=void 0),e=e||"",null!=t)return Mi(e,t,i,"month");var n,o=[];for(n=0;n<12;n++)o[n]=Mi(e,n,i,"month");return o}function Ri(e,t,i,n){"boolean"==typeof e?(l(t)&&(i=t,t=void 0),t=t||""):(i=t=e,e=!1,l(t)&&(i=t,t=void 0),t=t||"");var o,r=mt(),s=e?r._week.dow:0,a=[];if(null!=i)return Mi(t,(i+s)%7,n,"day");for(o=0;o<7;o++)a[o]=Mi(t,(o+s)%7,n,"day");return a}Di.calendar=function(e,t,i){var n=this._calendar[e]||this._calendar.sameElse;return E(n)?n.call(t,i):n},Di.longDateFormat=function(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.match(M).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},Di.invalidDate=function(){return this._invalidDate},Di.ordinal=function(e){return this._ordinal.replace("%d",e)},Di.preparse=ki,Di.postformat=ki,Di.relativeTime=function(e,t,i,n){var o=this._relativeTime[i];return E(o)?o(e,t,i,n):o.replace(/%d/i,e)},Di.pastFuture=function(e,t){var i=this._relativeTime[e>0?"future":"past"];return E(i)?i(t):i.replace(/%s/i,t)},Di.set=function(e){var t,i;for(i in e)r(e,i)&&(E(t=e[i])?this[i]=t:this["_"+i]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Di.eras=function(e,t){var n,o,r,s=this._eras||mt("en")._eras;for(n=0,o=s.length;n<o;++n){if("string"==typeof s[n].since)r=i(s[n].since).startOf("day"),s[n].since=r.valueOf();switch(typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":r=i(s[n].until).startOf("day").valueOf(),s[n].until=r.valueOf()}}return s},Di.erasParse=function(e,t,i){var n,o,r,s,a,l=this.eras();for(e=e.toUpperCase(),n=0,o=l.length;n<o;++n)if(r=l[n].name.toUpperCase(),s=l[n].abbr.toUpperCase(),a=l[n].narrow.toUpperCase(),i)switch(t){case"N":case"NN":case"NNN":if(s===e)return l[n];break;case"NNNN":if(r===e)return l[n];break;case"NNNNN":if(a===e)return l[n]}else if([r,s,a].indexOf(e)>=0)return l[n]},Di.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?i(e.since).year():i(e.since).year()+(t-e.offset)*n},Di.erasAbbrRegex=function(e){return r(this,"_erasAbbrRegex")||vi.call(this),e?this._erasAbbrRegex:this._erasRegex},Di.erasNameRegex=function(e){return r(this,"_erasNameRegex")||vi.call(this),e?this._erasNameRegex:this._erasRegex},Di.erasNarrowRegex=function(e){return r(this,"_erasNarrowRegex")||vi.call(this),e?this._erasNarrowRegex:this._erasRegex},Di.months=function(e,t){return e?n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ne).test(t)?"format":"standalone"][e.month()]:n(this._months)?this._months:this._months.standalone},Di.monthsShort=function(e,t){return e?n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ne.test(t)?"format":"standalone"][e.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Di.monthsParse=function(e,t,i){var n,o,r;if(this._monthsParseExact)return $e.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(o=h([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(r="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(r.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}},Di.monthsRegex=function(e){return this._monthsParseExact?(r(this,"_monthsRegex")||He.call(this),e?this._monthsStrictRegex:this._monthsRegex):(r(this,"_monthsRegex")||(this._monthsRegex=Fe),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},Di.monthsShortRegex=function(e){return this._monthsParseExact?(r(this,"_monthsRegex")||He.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(r(this,"_monthsShortRegex")||(this._monthsShortRegex=Le),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},Di.week=function(e){return Ue(e,this._week.dow,this._week.doy).week},Di.firstDayOfYear=function(){return this._week.doy},Di.firstDayOfWeek=function(){return this._week.dow},Di.weekdays=function(e,t){var i=n(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?qe(i,this._week.dow):e?i[e.day()]:i},Di.weekdaysMin=function(e){return!0===e?qe(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},Di.weekdaysShort=function(e){return!0===e?qe(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},Di.weekdaysParse=function(e,t,i){var n,o,r;if(this._weekdaysParseExact)return tt.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(o=h([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(r="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[n]=new RegExp(r.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(i&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(i&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!i&&this._weekdaysParse[n].test(e))return n}},Di.weekdaysRegex=function(e){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||it.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(r(this,"_weekdaysRegex")||(this._weekdaysRegex=Je),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},Di.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||it.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(r(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Qe),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Di.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||it.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(r(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=et),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Di.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},Di.meridiem=function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},gt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===ue(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),i.lang=_("moment.lang is deprecated. Use moment.locale instead.",gt),i.langData=_("moment.langData is deprecated. Use moment.localeData instead.",mt);var Ii=Math.abs;function Oi(e,t,i,n){var o=Xt(t,i);return e._milliseconds+=n*o._milliseconds,e._days+=n*o._days,e._months+=n*o._months,e._bubble()}function Ni(e){return e<0?Math.floor(e):Math.ceil(e)}function Li(e){return 4800*e/146097}function Fi(e){return 146097*e/4800}function $i(e){return function(){return this.as(e)}}var Gi=$i("ms"),Bi=$i("s"),Hi=$i("m"),zi=$i("h"),Wi=$i("d"),Vi=$i("w"),ji=$i("M"),Ui=$i("Q"),Yi=$i("y"),qi=Gi;function Ki(e){return function(){return this.isValid()?this._data[e]:NaN}}var Xi=Ki("milliseconds"),Zi=Ki("seconds"),Ji=Ki("minutes"),Qi=Ki("hours"),en=Ki("days"),tn=Ki("months"),nn=Ki("years");var on=Math.round,rn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function sn(e,t,i,n,o){return o.relativeTime(t||1,!!i,e,n)}var an=Math.abs;function ln(e){return(e>0)-(e<0)||+e}function cn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,i,n,o,r,s,a,l=an(this._milliseconds)/1e3,c=an(this._days),d=an(this._months),u=this.asSeconds();return u?(e=de(l/60),t=de(e/60),l%=60,e%=60,i=de(d/12),d%=12,n=l?l.toFixed(3).replace(/\.?0+$/,""):"",o=u<0?"-":"",r=ln(this._months)!==ln(u)?"-":"",s=ln(this._days)!==ln(u)?"-":"",a=ln(this._milliseconds)!==ln(u)?"-":"",o+"P"+(i?r+i+"Y":"")+(d?r+d+"M":"")+(c?s+c+"D":"")+(t||e||l?"T":"")+(t?a+t+"H":"")+(e?a+e+"M":"")+(l?a+n+"S":"")):"P0D"}var dn=Gt.prototype;return dn.isValid=function(){return this._isValid},dn.abs=function(){var e=this._data;return this._milliseconds=Ii(this._milliseconds),this._days=Ii(this._days),this._months=Ii(this._months),e.milliseconds=Ii(e.milliseconds),e.seconds=Ii(e.seconds),e.minutes=Ii(e.minutes),e.hours=Ii(e.hours),e.months=Ii(e.months),e.years=Ii(e.years),this},dn.add=function(e,t){return Oi(this,e,t,1)},dn.subtract=function(e,t){return Oi(this,e,t,-1)},dn.as=function(e){if(!this.isValid())return NaN;var t,i,n=this._milliseconds;if("month"===(e=G(e))||"quarter"===e||"year"===e)switch(t=this._days+n/864e5,i=this._months+Li(t),e){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(t=this._days+Math.round(Fi(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}},dn.asMilliseconds=Gi,dn.asSeconds=Bi,dn.asMinutes=Hi,dn.asHours=zi,dn.asDays=Wi,dn.asWeeks=Vi,dn.asMonths=ji,dn.asQuarters=Ui,dn.asYears=Yi,dn.valueOf=qi,dn._bubble=function(){var e,t,i,n,o,r=this._milliseconds,s=this._days,a=this._months,l=this._data;return r>=0&&s>=0&&a>=0||r<=0&&s<=0&&a<=0||(r+=864e5*Ni(Fi(a)+s),s=0,a=0),l.milliseconds=r%1e3,e=de(r/1e3),l.seconds=e%60,t=de(e/60),l.minutes=t%60,i=de(t/60),l.hours=i%24,s+=de(i/24),a+=o=de(Li(s)),s-=Ni(Fi(o)),n=de(a/12),a%=12,l.days=s,l.months=a,l.years=n,this},dn.clone=function(){return Xt(this)},dn.get=function(e){return e=G(e),this.isValid()?this[e+"s"]():NaN},dn.milliseconds=Xi,dn.seconds=Zi,dn.minutes=Ji,dn.hours=Qi,dn.days=en,dn.weeks=function(){return de(this.days()/7)},dn.months=tn,dn.years=nn,dn.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var i,n,o=!1,r=rn;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(o=e),"object"==typeof t&&(r=Object.assign({},rn,t),null!=t.s&&null==t.ss&&(r.ss=t.s-1)),n=function(e,t,i,n){var o=Xt(e).abs(),r=on(o.as("s")),s=on(o.as("m")),a=on(o.as("h")),l=on(o.as("d")),c=on(o.as("M")),d=on(o.as("w")),u=on(o.as("y")),h=r<=i.ss&&["s",r]||r<i.s&&["ss",r]||s<=1&&["m"]||s<i.m&&["mm",s]||a<=1&&["h"]||a<i.h&&["hh",a]||l<=1&&["d"]||l<i.d&&["dd",l];return null!=i.w&&(h=h||d<=1&&["w"]||d<i.w&&["ww",d]),(h=h||c<=1&&["M"]||c<i.M&&["MM",c]||u<=1&&["y"]||["yy",u])[2]=t,h[3]=+e>0,h[4]=n,sn.apply(null,h)}(this,!o,r,i=this.localeData()),o&&(n=i.pastFuture(+this,n)),i.postformat(n)},dn.toISOString=cn,dn.toString=cn,dn.toJSON=cn,dn.locale=si,dn.localeData=li,dn.toIsoString=_("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",cn),dn.lang=ai,O("X",0,0,"unix"),O("x",0,0,"valueOf"),ae("x",te),ae("X",/[+-]?\d+(\.\d{1,3})?/),pe("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e))}),pe("x",function(e,t,i){i._d=new Date(ue(e))}),i.version="2.30.1",e=Ot,i.fn=Ti,i.min=function(){return Ft("isBefore",[].slice.call(arguments,0))},i.max=function(){return Ft("isAfter",[].slice.call(arguments,0))},i.now=function(){return Date.now?Date.now():+new Date},i.utc=h,i.unix=function(e){return Ot(1e3*e)},i.months=function(e,t){return Pi(e,t,"months")},i.isDate=c,i.locale=gt,i.invalid=f,i.duration=Xt,i.isMoment=w,i.weekdays=function(e,t,i){return Ri(e,t,i,"weekdays")},i.parseZone=function(){return Ot.apply(null,arguments).parseZone()},i.localeData=mt,i.isDuration=Bt,i.monthsShort=function(e,t){return Pi(e,t,"monthsShort")},i.weekdaysMin=function(e,t,i){return Ri(e,t,i,"weekdaysMin")},i.defineLocale=ft,i.updateLocale=function(e,t){if(null!=t){var i,n,o=lt;null!=ct[e]&&null!=ct[e].parentLocale?ct[e].set(T(ct[e]._config,t)):(null!=(n=pt(e))&&(o=n._config),t=T(o,t),null==n&&(t.abbr=e),(i=new k(t)).parentLocale=ct[e],ct[e]=i),gt(e)}else null!=ct[e]&&(null!=ct[e].parentLocale?(ct[e]=ct[e].parentLocale,e===gt()&&gt(e)):null!=ct[e]&&delete ct[e]);return ct[e]},i.locales=function(){return S(ct)},i.weekdaysShort=function(e,t,i){return Ri(e,t,i,"weekdaysShort")},i.normalizeUnits=G,i.relativeTimeRounding=function(e){return void 0===e?on:"function"==typeof e&&(on=e,!0)},i.relativeTimeThreshold=function(e,t){return void 0!==rn[e]&&(void 0===t?rn[e]:(rn[e]=t,"s"===e&&(rn.ss=t-1),!0))},i.calendarFormat=function(e,t){var i=e.diff(t,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"},i.prototype=Ti,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}),function(e,t){"use strict";"object"==typeof module&&module.exports?module.exports=t(require("moment")):"function"==typeof define&&define.amd?define(["moment"],t):t(e.moment)}(this,function(e){"use strict";void 0===e.version&&e.default&&(e=e.default);var t,i={},n={},o={},r={},s={};e&&"string"==typeof e.version||M("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");var a=e.version.split("."),l=+a[0],c=+a[1];function d(e){return e>96?e-87:e>64?e-29:e-48}function u(e){var t=0,i=e.split("."),n=i[0],o=i[1]||"",r=1,s=0,a=1;for(45===e.charCodeAt(0)&&(t=1,a=-1);t<n.length;t++)s=60*s+d(n.charCodeAt(t));for(t=0;t<o.length;t++)r/=60,s+=d(o.charCodeAt(t))*r;return s*a}function h(e){for(var t=0;t<e.length;t++)e[t]=u(e[t])}function p(e,t){var i,n=[];for(i=0;i<t.length;i++)n[i]=e[t[i]];return n}function g(e){var t=e.split("|"),i=t[2].split(" "),n=t[3].split(""),o=t[4].split(" ");return h(i),h(n),h(o),function(e,t){for(var i=0;i<t;i++)e[i]=Math.round((e[i-1]||0)+6e4*e[i]);e[t-1]=1/0}(o,n.length),{name:t[0],abbrs:p(t[1].split(" "),n),offsets:p(i,n),untils:o,population:0|t[5]}}function f(e){e&&this._set(g(e))}function m(e,t){this.name=e,this.zones=t}function v(e){var t=e.toTimeString(),i=t.match(/\([a-z ]+\)/i);"GMT"===(i=i&&i[0]?(i=i[0].match(/[A-Z]/g))?i.join(""):void 0:(i=t.match(/[A-Z]{3,5}/g))?i[0]:void 0)&&(i=void 0),this.at=+e,this.abbr=i,this.offset=e.getTimezoneOffset()}function b(e){this.zone=e,this.offsetScore=0,this.abbrScore=0}function y(e,t){for(var i,n;n=6e4*((t.at-e.at)/12e4|0);)(i=new v(new Date(e.at+n))).offset===e.offset?e=i:t=i;return e}function w(e,t){return e.offsetScore!==t.offsetScore?e.offsetScore-t.offsetScore:e.abbrScore!==t.abbrScore?e.abbrScore-t.abbrScore:e.zone.population!==t.zone.population?t.zone.population-e.zone.population:t.zone.name.localeCompare(e.zone.name)}function C(e,t){var i,n;for(h(t),i=0;i<t.length;i++)n=t[i],s[n]=s[n]||{},s[n][e]=!0}function _(e){var t,i,n,o,a=e.length,l={},c=[],d={};for(t=0;t<a;t++)if(n=e[t].offset,!d.hasOwnProperty(n)){for(i in o=s[n]||{})o.hasOwnProperty(i)&&(l[i]=!0);d[n]=!0}for(t in l)l.hasOwnProperty(t)&&c.push(r[t]);return c}function S(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e&&e.length>3){var t=r[x(e)];if(t)return t;M("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(e){}var i,n,o,s=function(){var e,t,i,n,o=(new Date).getFullYear()-2,r=new v(new Date(o,0,1)),s=r.offset,a=[r];for(n=1;n<48;n++)(i=new Date(o,n,1).getTimezoneOffset())!==s&&(e=y(r,t=new v(new Date(o,n,1))),a.push(e),a.push(new v(new Date(e.at+6e4))),r=t,s=i);for(n=0;n<4;n++)a.push(new v(new Date(o+n,0,1))),a.push(new v(new Date(o+n,6,1)));return a}(),a=s.length,l=_(s),c=[];for(n=0;n<l.length;n++){for(i=new b(E(l[n]),a),o=0;o<a;o++)i.scoreOffsetAt(s[o]);c.push(i)}return c.sort(w),c.length>0?c[0].zone.name:void 0}function x(e){return(e||"").toLowerCase().replace(/\//g,"_")}function A(e){var t,n,o,s;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)s=x(n=(o=e[t].split("|"))[0]),i[s]=e[t],r[s]=n,C(s,o[2].split(" "))}function E(e,t){e=x(e);var o,s=i[e];return s instanceof f?s:"string"==typeof s?(s=new f(s),i[e]=s,s):n[e]&&t!==E&&(o=E(n[e],E))?((s=i[e]=new f)._set(o),s.name=r[e],s):null}function T(e){var t,i,o,s;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)o=x((i=e[t].split("|"))[0]),s=x(i[1]),n[o]=s,r[o]=i[0],n[s]=o,r[s]=i[1]}function k(e){A(e.zones),T(e.links),function(e){var t,i,n,r;if(e&&e.length)for(t=0;t<e.length;t++)i=(r=e[t].split("|"))[0].toUpperCase(),n=r[1].split(" "),o[i]=new m(i,n)}(e.countries),P.dataVersion=e.version}function D(e){var t="X"===e._f||"x"===e._f;return!(!e._a||void 0!==e._tzm||t)}function M(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}function P(t){var i,n=Array.prototype.slice.call(arguments,0,-1),o=arguments[arguments.length-1],r=e.utc.apply(null,n);return!e.isMoment(t)&&D(r)&&(i=E(o))&&r.add(i.parse(r),"minutes"),r.tz(o),r}(l<2||2===l&&c<6)&&M("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+e.version+". See momentjs.com"),f.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets,this.population=e.population},_index:function(e){var t;if((t=function(e,t){var i,n=t.length;if(e<t[0])return 0;if(n>1&&t[n-1]===1/0&&e>=t[n-2])return n-1;if(e>=t[n-1])return-1;for(var o=0,r=n-1;r-o>1;)t[i=Math.floor((o+r)/2)]<=e?o=i:r=i;return r}(+e,this.untils))>=0)return t},countries:function(){var e=this.name;return Object.keys(o).filter(function(t){return-1!==o[t].zones.indexOf(e)})},parse:function(e){var t,i,n,o,r=+e,s=this.offsets,a=this.untils,l=a.length-1;for(o=0;o<l;o++)if(t=s[o],i=s[o+1],n=s[o?o-1:o],t<i&&P.moveAmbiguousForward?t=i:t>n&&P.moveInvalidForward&&(t=n),r<a[o]-6e4*t)return s[o];return s[l]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return M("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(e)]},utcOffset:function(e){return this.offsets[this._index(e)]}},b.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.utcOffset(e.at)-e.offset),this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr&&this.abbrScore++},P.version="0.5.45",P.dataVersion="",P._zones=i,P._links=n,P._names=r,P._countries=o,P.add=A,P.link=T,P.load=k,P.zone=E,P.zoneExists=function e(t){return e.didShowError||(e.didShowError=!0,M("moment.tz.zoneExists('"+t+"') has been deprecated in favor of !moment.tz.zone('"+t+"')")),!!E(t)},P.guess=function(e){return t&&!e||(t=S()),t},P.names=function(){var e,t=[];for(e in r)r.hasOwnProperty(e)&&(i[e]||i[n[e]])&&r[e]&&t.push(r[e]);return t.sort()},P.Zone=f,P.unpack=g,P.unpackBase60=u,P.needsOffset=D,P.moveInvalidForward=!0,P.moveAmbiguousForward=!1,P.countries=function(){return Object.keys(o)},P.zonesForCountry=function(e,t){if(!(e=function(e){return e=e.toUpperCase(),o[e]||null}(e)))return null;var i=e.zones.sort();return t?i.map(function(e){return{name:e,offset:E(e).utcOffset(new Date)}}):i};var R,I=e.fn;function O(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}function N(e){return function(){return this._z=null,e.apply(this,arguments)}}e.tz=P,e.defaultZone=null,e.updateOffset=function(t,i){var n,o=e.defaultZone;if(void 0===t._z&&(o&&D(t)&&!t._isUTC&&t.isValid()&&(t._d=e.utc(t._a)._d,t.utc().add(o.parse(t),"minutes")),t._z=o),t._z)if(n=t._z.utcOffset(t),Math.abs(n)<16&&(n/=60),void 0!==t.utcOffset){var r=t._z;t.utcOffset(-n,i),t._z=r}else t.zone(n,i)},I.tz=function(t,i){if(t){if("string"!=typeof t)throw new Error("Time zone name must be a string, got "+t+" ["+typeof t+"]");return this._z=E(t),this._z?e.updateOffset(this,i):M("Moment Timezone has no data for "+t+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},I.zoneName=O(I.zoneName),I.zoneAbbr=O(I.zoneAbbr),I.utc=N(I.utc),I.local=N(I.local),I.utcOffset=(R=I.utcOffset,function(){return arguments.length>0&&(this._z=null),R.apply(this,arguments)}),e.tz.setDefault=function(t){return(l<2||2===l&&c<9)&&M("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+e.version+"."),e.defaultZone=t?E(t):null,e};var L=e.momentProperties;return"[object Array]"===Object.prototype.toString.call(L)?(L.push("_z"),L.push("_a")):L&&(L._z=null),k({version:"2024a",zones:["Africa/Abidjan|GMT|0|0||48e5","Africa/Nairobi|EAT|-30|0||47e5","Africa/Algiers|CET|-10|0||26e5","Africa/Lagos|WAT|-10|0||17e6","Africa/Khartoum|CAT|-20|0||51e5","Africa/Cairo|EET EEST|-20 -30|010101010101010|29NW0 1cL0 1cN0 1fz0 1a10 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0|15e6","Africa/Casablanca|+01 +00|-10 0|010101010101010101010101|208q0 e00 2600 gM0 2600 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0 2600 e00 2600|32e5","Europe/Paris|CET CEST|-10 -20|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|11e6","Africa/Johannesburg|SAST|-20|0||84e5","Africa/Juba|EAT CAT|-30 -20|01|24nx0|","Africa/Sao_Tome|WAT GMT|-10 0|01|1XiN0|","Africa/Tripoli|EET|-20|0||11e5","America/Adak|HST HDT|a0 90|01010101010101010101010|1XKc0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|326","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1XKb0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|30e4","America/Santo_Domingo|AST|40|0||29e5","America/Fortaleza|-03|30|0||34e5","America/Asuncion|-03 -04|30 40|01010101010101010101010|1XPD0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0|28e5","America/Panama|EST|50|0||15e5","America/Mexico_City|CST CDT|60 50|010101010|1XVk0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|20e6","America/Managua|CST|60|0||22e5","America/Caracas|-04|40|0||29e5","America/Lima|-05|50|0||11e6","America/Denver|MST MDT|70 60|01010101010101010101010|1XK90 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|26e5","America/Campo_Grande|-03 -04|30 40|01|1XBD0|77e4","America/Chicago|CST CDT|60 50|01010101010101010101010|1XK80 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|92e5","America/Chihuahua|MST MDT CST|70 60 60|010101012|1XVl0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|81e4","America/Ciudad_Juarez|MST MDT CST|70 60 60|010101012010101010101010|1XK90 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1wn0 cm0 EP0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|","America/Phoenix|MST|70|0||42e5","America/Whitehorse|PST PDT MST|80 70 70|01012|1XKa0 1zb0 Op0 1z90|23e3","America/New_York|EST EDT|50 40|01010101010101010101010|1XK70 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|21e6","America/Los_Angeles|PST PDT|80 70|01010101010101010101010|1XKa0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|15e6","America/Halifax|AST ADT|40 30|01010101010101010101010|1XK60 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|39e4","America/Godthab|-03 -02 -01|30 20 10|0101010101212121212121|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 2so0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|17e3","America/Havana|CST CDT|50 40|01010101010101010101010|1XK50 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0|21e5","America/Mazatlan|MST MDT|70 60|010101010|1XVl0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|44e4","America/Metlakatla|PST AKST AKDT|80 90 80|012121212121212121212121|1Xqy0 jB0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|14e2","America/Miquelon|-03 -02|30 20|01010101010101010101010|1XK50 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|61e2","America/Noronha|-02|20|0||30e2","America/Ojinaga|MST MDT CST CDT|70 60 60 50|01010101232323232323232|1XK90 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1wn0 Rc0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|23e3","America/Santiago|-03 -04|30 40|01010101010101010101010|1XVf0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0|62e5","America/Sao_Paulo|-02 -03|20 30|01|1XBC0|20e6","America/Scoresbysund|-01 +00 -02|10 0 20|0101010101020202020202|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 2pA0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|452","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1XK5u 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|11e4","Antarctica/Casey|+11 +08|-b0 -80|0101010101|1XME0 1kr0 12l0 1o01 14kX 1lf1 14kX 1lf1 13bX|10","Asia/Bangkok|+07|-70|0||15e6","Asia/Vladivostok|+10|-a0|0||60e4","Australia/Sydney|AEDT AEST|-b0 -a0|01010101010101010101010|1XV40 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0|40e5","Asia/Tashkent|+05|-50|0||23e5","Pacific/Auckland|NZDT NZST|-d0 -c0|01010101010101010101010|1XV20 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0|14e5","Europe/Istanbul|+03|-30|0||13e6","Antarctica/Troll|+00 +02|0 -20|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|40","Antarctica/Vostok|+07 +05|-70 -50|01|2bnv0|25","Asia/Almaty|+06 +05|-60 -50|01|2bR60|15e5","Asia/Amman|EET EEST +03|-20 -30 -30|010101012|1XRy0 1o00 11A0 1qM0 WM0 1qM0 LA0 1C00|25e5","Asia/Kamchatka|+12|-c0|0||18e4","Asia/Dubai|+04|-40|0||39e5","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1XSm0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0|22e5","Asia/Dhaka|+06|-60|0||16e6","Asia/Kuala_Lumpur|+08|-80|0||71e5","Asia/Kolkata|IST|-5u|0||15e6","Asia/Chita|+09|-90|0||33e4","Asia/Shanghai|CST|-80|0||23e6","Asia/Colombo|+0530|-5u|0||22e5","Asia/Damascus|EET EEST +03|-20 -30 -30|010101012|1XRy0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0|26e5","Europe/Athens|EET EEST|-20 -30|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|35e5","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1XRy0 1on0 11B0 1o00 11A0 1qo0 XA0 1qp0 1cN0 1cL0 1a10 1fz0 17d0 1in0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0|18e5","Asia/Hong_Kong|HKT|-80|0||73e5","Asia/Jakarta|WIB|-70|0||31e6","Asia/Jayapura|WIT|-90|0||26e4","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1XRA0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0|81e4","Asia/Kabul|+0430|-4u|0||46e5","Asia/Karachi|PKT|-50|0||24e6","Asia/Kathmandu|+0545|-5J|0||12e5","Asia/Sakhalin|+11|-b0|0||58e4","Asia/Makassar|WITA|-80|0||15e5","Asia/Manila|PST|-80|0||24e6","Asia/Seoul|KST|-90|0||23e6","Asia/Rangoon|+0630|-6u|0||48e5","Asia/Tehran|+0330 +0430|-3u -4u|010101010|1XOIu 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0|14e6","Asia/Tokyo|JST|-90|0||38e6","Atlantic/Azores|-01 +00|10 0|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|25e4","Europe/Lisbon|WET WEST|0 -10|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|27e5","Atlantic/Cape_Verde|-01|10|0||50e4","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1XV4u 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0|11e5","Australia/Brisbane|AEST|-a0|0||20e5","Australia/Darwin|ACST|-9u|0||12e4","Australia/Eucla|+0845|-8J|0||368","Australia/Lord_Howe|+11 +1030|-b0 -au|01010101010101010101010|1XV30 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1fzu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu|347","Australia/Perth|AWST|-80|0||18e5","Pacific/Easter|-05 -06|50 60|01010101010101010101010|1XVf0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0|30e2","Europe/Dublin|GMT IST|0 -10|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|12e5","Etc/GMT-1|+01|-10|0||","Pacific/Tongatapu|+13|-d0|0||75e3","Pacific/Kiritimati|+14|-e0|0||51e2","Etc/GMT-2|+02|-20|0||","Pacific/Tahiti|-10|a0|0||18e4","Pacific/Niue|-11|b0|0||12e2","Etc/GMT+12|-12|c0|0||","Pacific/Galapagos|-06|60|0||25e3","Etc/GMT+7|-07|70|0||","Pacific/Pitcairn|-08|80|0||56","Pacific/Gambier|-09|90|0||125","Etc/UTC|UTC|0|0||","Europe/London|GMT BST|0 -10|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|10e6","Europe/Chisinau|EET EEST|-20 -30|01010101010101010101010|1XSo0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|67e4","Europe/Moscow|MSK|-30|0||16e6","Europe/Volgograd|+04 MSK|-40 -30|01|249a0|10e5","Pacific/Honolulu|HST|a0|0||37e4","MET|MET MEST|-10 -20|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|","Pacific/Chatham|+1345 +1245|-dJ -cJ|01010101010101010101010|1XV20 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0|600","Pacific/Apia|+14 +13|-e0 -d0|010101|1XV20 1a00 1fA0 1a00 1fA0|37e3","Pacific/Fiji|+13 +12|-d0 -c0|010101|1Xnq0 20o0 pc0 2hc0 bc0|88e4","Pacific/Guam|ChST|-a0|0||17e4","Pacific/Marquesas|-0930|9u|0||86e2","Pacific/Pago_Pago|SST|b0|0||37e2","Pacific/Norfolk|+11 +12|-b0 -c0|0101010101010101010101|219P0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0|25e4"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Algiers|Africa/Tunis","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Khartoum|Africa/Blantyre","Africa/Khartoum|Africa/Bujumbura","Africa/Khartoum|Africa/Gaborone","Africa/Khartoum|Africa/Harare","Africa/Khartoum|Africa/Kigali","Africa/Khartoum|Africa/Lubumbashi","Africa/Khartoum|Africa/Lusaka","Africa/Khartoum|Africa/Maputo","Africa/Khartoum|Africa/Windhoek","Africa/Lagos|Africa/Bangui","Africa/Lagos|Africa/Brazzaville","Africa/Lagos|Africa/Douala","Africa/Lagos|Africa/Kinshasa","Africa/Lagos|Africa/Libreville","Africa/Lagos|Africa/Luanda","Africa/Lagos|Africa/Malabo","Africa/Lagos|Africa/Ndjamena","Africa/Lagos|Africa/Niamey","Africa/Lagos|Africa/Porto-Novo","Africa/Nairobi|Africa/Addis_Ababa","Africa/Nairobi|Africa/Asmara","Africa/Nairobi|Africa/Asmera","Africa/Nairobi|Africa/Dar_es_Salaam","Africa/Nairobi|Africa/Djibouti","Africa/Nairobi|Africa/Kampala","Africa/Nairobi|Africa/Mogadishu","Africa/Nairobi|Indian/Antananarivo","Africa/Nairobi|Indian/Comoro","Africa/Nairobi|Indian/Mayotte","Africa/Tripoli|Europe/Kaliningrad","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Campo_Grande|America/Cuiaba","America/Caracas|America/Boa_Vista","America/Caracas|America/Guyana","America/Caracas|America/La_Paz","America/Caracas|America/Manaus","America/Caracas|America/Porto_Velho","America/Caracas|Brazil/West","America/Caracas|Etc/GMT+4","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Beulah","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Denver|America/Boise","America/Denver|America/Cambridge_Bay","America/Denver|America/Edmonton","America/Denver|America/Inuvik","America/Denver|America/Shiprock","America/Denver|America/Yellowknife","America/Denver|Canada/Mountain","America/Denver|MST7MDT","America/Denver|Navajo","America/Denver|US/Mountain","America/Fortaleza|America/Araguaina","America/Fortaleza|America/Argentina/Buenos_Aires","America/Fortaleza|America/Argentina/Catamarca","America/Fortaleza|America/Argentina/ComodRivadavia","America/Fortaleza|America/Argentina/Cordoba","America/Fortaleza|America/Argentina/Jujuy","America/Fortaleza|America/Argentina/La_Rioja","America/Fortaleza|America/Argentina/Mendoza","America/Fortaleza|America/Argentina/Rio_Gallegos","America/Fortaleza|America/Argentina/Salta","America/Fortaleza|America/Argentina/San_Juan","America/Fortaleza|America/Argentina/San_Luis","America/Fortaleza|America/Argentina/Tucuman","America/Fortaleza|America/Argentina/Ushuaia","America/Fortaleza|America/Bahia","America/Fortaleza|America/Belem","America/Fortaleza|America/Buenos_Aires","America/Fortaleza|America/Catamarca","America/Fortaleza|America/Cayenne","America/Fortaleza|America/Cordoba","America/Fortaleza|America/Jujuy","America/Fortaleza|America/Maceio","America/Fortaleza|America/Mendoza","America/Fortaleza|America/Montevideo","America/Fortaleza|America/Paramaribo","America/Fortaleza|America/Punta_Arenas","America/Fortaleza|America/Recife","America/Fortaleza|America/Rosario","America/Fortaleza|America/Santarem","America/Fortaleza|Antarctica/Palmer","America/Fortaleza|Antarctica/Rothera","America/Fortaleza|Atlantic/Stanley","America/Fortaleza|Etc/GMT+3","America/Godthab|America/Nuuk","America/Halifax|America/Glace_Bay","America/Halifax|America/Goose_Bay","America/Halifax|America/Moncton","America/Halifax|America/Thule","America/Halifax|Atlantic/Bermuda","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/Lima|America/Bogota","America/Lima|America/Eirunepe","America/Lima|America/Guayaquil","America/Lima|America/Porto_Acre","America/Lima|America/Rio_Branco","America/Lima|Brazil/Acre","America/Lima|Etc/GMT+5","America/Los_Angeles|America/Ensenada","America/Los_Angeles|America/Santa_Isabel","America/Los_Angeles|America/Tijuana","America/Los_Angeles|America/Vancouver","America/Los_Angeles|Canada/Pacific","America/Los_Angeles|Mexico/BajaNorte","America/Los_Angeles|PST8PDT","America/Los_Angeles|US/Pacific","America/Managua|America/Belize","America/Managua|America/Costa_Rica","America/Managua|America/El_Salvador","America/Managua|America/Guatemala","America/Managua|America/Regina","America/Managua|America/Swift_Current","America/Managua|America/Tegucigalpa","America/Managua|Canada/Saskatchewan","America/Mazatlan|Mexico/BajaSur","America/Mexico_City|America/Bahia_Banderas","America/Mexico_City|America/Merida","America/Mexico_City|America/Monterrey","America/Mexico_City|Mexico/General","America/New_York|America/Detroit","America/New_York|America/Fort_Wayne","America/New_York|America/Grand_Turk","America/New_York|America/Indiana/Indianapolis","America/New_York|America/Indiana/Marengo","America/New_York|America/Indiana/Petersburg","America/New_York|America/Indiana/Vevay","America/New_York|America/Indiana/Vincennes","America/New_York|America/Indiana/Winamac","America/New_York|America/Indianapolis","America/New_York|America/Iqaluit","America/New_York|America/Kentucky/Louisville","America/New_York|America/Kentucky/Monticello","America/New_York|America/Louisville","America/New_York|America/Montreal","America/New_York|America/Nassau","America/New_York|America/Nipigon","America/New_York|America/Pangnirtung","America/New_York|America/Port-au-Prince","America/New_York|America/Thunder_Bay","America/New_York|America/Toronto","America/New_York|Canada/Eastern","America/New_York|EST5EDT","America/New_York|US/East-Indiana","America/New_York|US/Eastern","America/New_York|US/Michigan","America/Noronha|Atlantic/South_Georgia","America/Noronha|Brazil/DeNoronha","America/Noronha|Etc/GMT+2","America/Panama|America/Atikokan","America/Panama|America/Cancun","America/Panama|America/Cayman","America/Panama|America/Coral_Harbour","America/Panama|America/Jamaica","America/Panama|EST","America/Panama|Jamaica","America/Phoenix|America/Creston","America/Phoenix|America/Dawson_Creek","America/Phoenix|America/Fort_Nelson","America/Phoenix|America/Hermosillo","America/Phoenix|MST","America/Phoenix|US/Arizona","America/Santiago|Chile/Continental","America/Santo_Domingo|America/Anguilla","America/Santo_Domingo|America/Antigua","America/Santo_Domingo|America/Aruba","America/Santo_Domingo|America/Barbados","America/Santo_Domingo|America/Blanc-Sablon","America/Santo_Domingo|America/Curacao","America/Santo_Domingo|America/Dominica","America/Santo_Domingo|America/Grenada","America/Santo_Domingo|America/Guadeloupe","America/Santo_Domingo|America/Kralendijk","America/Santo_Domingo|America/Lower_Princes","America/Santo_Domingo|America/Marigot","America/Santo_Domingo|America/Martinique","America/Santo_Domingo|America/Montserrat","America/Santo_Domingo|America/Port_of_Spain","America/Santo_Domingo|America/Puerto_Rico","America/Santo_Domingo|America/St_Barthelemy","America/Santo_Domingo|America/St_Kitts","America/Santo_Domingo|America/St_Lucia","America/Santo_Domingo|America/St_Thomas","America/Santo_Domingo|America/St_Vincent","America/Santo_Domingo|America/Tortola","America/Santo_Domingo|America/Virgin","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","America/Whitehorse|America/Dawson","America/Whitehorse|Canada/Yukon","Asia/Almaty|Asia/Qostanay","Asia/Bangkok|Antarctica/Davis","Asia/Bangkok|Asia/Barnaul","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Hovd","Asia/Bangkok|Asia/Krasnoyarsk","Asia/Bangkok|Asia/Novokuznetsk","Asia/Bangkok|Asia/Novosibirsk","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Tomsk","Asia/Bangkok|Asia/Vientiane","Asia/Bangkok|Etc/GMT-7","Asia/Bangkok|Indian/Christmas","Asia/Chita|Asia/Dili","Asia/Chita|Asia/Khandyga","Asia/Chita|Asia/Yakutsk","Asia/Chita|Etc/GMT-9","Asia/Chita|Pacific/Palau","Asia/Dhaka|Asia/Bishkek","Asia/Dhaka|Asia/Dacca","Asia/Dhaka|Asia/Kashgar","Asia/Dhaka|Asia/Omsk","Asia/Dhaka|Asia/Thimbu","Asia/Dhaka|Asia/Thimphu","Asia/Dhaka|Asia/Urumqi","Asia/Dhaka|Etc/GMT-6","Asia/Dhaka|Indian/Chagos","Asia/Dubai|Asia/Baku","Asia/Dubai|Asia/Muscat","Asia/Dubai|Asia/Tbilisi","Asia/Dubai|Asia/Yerevan","Asia/Dubai|Etc/GMT-4","Asia/Dubai|Europe/Astrakhan","Asia/Dubai|Europe/Samara","Asia/Dubai|Europe/Saratov","Asia/Dubai|Europe/Ulyanovsk","Asia/Dubai|Indian/Mahe","Asia/Dubai|Indian/Mauritius","Asia/Dubai|Indian/Reunion","Asia/Gaza|Asia/Hebron","Asia/Hong_Kong|Hongkong","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kamchatka|Asia/Anadyr","Asia/Kamchatka|Etc/GMT-12","Asia/Kamchatka|Kwajalein","Asia/Kamchatka|Pacific/Funafuti","Asia/Kamchatka|Pacific/Kwajalein","Asia/Kamchatka|Pacific/Majuro","Asia/Kamchatka|Pacific/Nauru","Asia/Kamchatka|Pacific/Tarawa","Asia/Kamchatka|Pacific/Wake","Asia/Kamchatka|Pacific/Wallis","Asia/Kathmandu|Asia/Katmandu","Asia/Kolkata|Asia/Calcutta","Asia/Kuala_Lumpur|Asia/Brunei","Asia/Kuala_Lumpur|Asia/Choibalsan","Asia/Kuala_Lumpur|Asia/Irkutsk","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Kuala_Lumpur|Asia/Singapore","Asia/Kuala_Lumpur|Asia/Ulaanbaatar","Asia/Kuala_Lumpur|Asia/Ulan_Bator","Asia/Kuala_Lumpur|Etc/GMT-8","Asia/Kuala_Lumpur|Singapore","Asia/Makassar|Asia/Ujung_Pandang","Asia/Rangoon|Asia/Yangon","Asia/Rangoon|Indian/Cocos","Asia/Sakhalin|Asia/Magadan","Asia/Sakhalin|Asia/Srednekolymsk","Asia/Sakhalin|Etc/GMT-11","Asia/Sakhalin|Pacific/Bougainville","Asia/Sakhalin|Pacific/Efate","Asia/Sakhalin|Pacific/Guadalcanal","Asia/Sakhalin|Pacific/Kosrae","Asia/Sakhalin|Pacific/Noumea","Asia/Sakhalin|Pacific/Pohnpei","Asia/Sakhalin|Pacific/Ponape","Asia/Seoul|Asia/Pyongyang","Asia/Seoul|ROK","Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|Asia/Macao","Asia/Shanghai|Asia/Macau","Asia/Shanghai|Asia/Taipei","Asia/Shanghai|PRC","Asia/Shanghai|ROC","Asia/Tashkent|Antarctica/Mawson","Asia/Tashkent|Asia/Aqtau","Asia/Tashkent|Asia/Aqtobe","Asia/Tashkent|Asia/Ashgabat","Asia/Tashkent|Asia/Ashkhabad","Asia/Tashkent|Asia/Atyrau","Asia/Tashkent|Asia/Dushanbe","Asia/Tashkent|Asia/Oral","Asia/Tashkent|Asia/Qyzylorda","Asia/Tashkent|Asia/Samarkand","Asia/Tashkent|Asia/Yekaterinburg","Asia/Tashkent|Etc/GMT-5","Asia/Tashkent|Indian/Kerguelen","Asia/Tashkent|Indian/Maldives","Asia/Tehran|Iran","Asia/Tokyo|Japan","Asia/Vladivostok|Antarctica/DumontDUrville","Asia/Vladivostok|Asia/Ust-Nera","Asia/Vladivostok|Etc/GMT-10","Asia/Vladivostok|Pacific/Chuuk","Asia/Vladivostok|Pacific/Port_Moresby","Asia/Vladivostok|Pacific/Truk","Asia/Vladivostok|Pacific/Yap","Atlantic/Cape_Verde|Etc/GMT+1","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/Lord_Howe|Australia/LHI","Australia/Perth|Australia/West","Australia/Sydney|Antarctica/Macquarie","Australia/Sydney|Australia/ACT","Australia/Sydney|Australia/Canberra","Australia/Sydney|Australia/Currie","Australia/Sydney|Australia/Hobart","Australia/Sydney|Australia/Melbourne","Australia/Sydney|Australia/NSW","Australia/Sydney|Australia/Tasmania","Australia/Sydney|Australia/Victoria","Etc/UTC|Etc/UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UCT","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Athens|Asia/Famagusta","Europe/Athens|Asia/Nicosia","Europe/Athens|EET","Europe/Athens|Europe/Bucharest","Europe/Athens|Europe/Helsinki","Europe/Athens|Europe/Kiev","Europe/Athens|Europe/Kyiv","Europe/Athens|Europe/Mariehamn","Europe/Athens|Europe/Nicosia","Europe/Athens|Europe/Riga","Europe/Athens|Europe/Sofia","Europe/Athens|Europe/Tallinn","Europe/Athens|Europe/Uzhgorod","Europe/Athens|Europe/Vilnius","Europe/Athens|Europe/Zaporozhye","Europe/Chisinau|Europe/Tiraspol","Europe/Dublin|Eire","Europe/Istanbul|Antarctica/Syowa","Europe/Istanbul|Asia/Aden","Europe/Istanbul|Asia/Baghdad","Europe/Istanbul|Asia/Bahrain","Europe/Istanbul|Asia/Istanbul","Europe/Istanbul|Asia/Kuwait","Europe/Istanbul|Asia/Qatar","Europe/Istanbul|Asia/Riyadh","Europe/Istanbul|Etc/GMT-3","Europe/Istanbul|Europe/Minsk","Europe/Istanbul|Turkey","Europe/Lisbon|Atlantic/Canary","Europe/Lisbon|Atlantic/Faeroe","Europe/Lisbon|Atlantic/Faroe","Europe/Lisbon|Atlantic/Madeira","Europe/Lisbon|Portugal","Europe/Lisbon|WET","Europe/London|Europe/Belfast","Europe/London|Europe/Guernsey","Europe/London|Europe/Isle_of_Man","Europe/London|Europe/Jersey","Europe/London|GB","Europe/London|GB-Eire","Europe/Moscow|Europe/Kirov","Europe/Moscow|Europe/Simferopol","Europe/Moscow|W-SU","Europe/Paris|Africa/Ceuta","Europe/Paris|Arctic/Longyearbyen","Europe/Paris|Atlantic/Jan_Mayen","Europe/Paris|CET","Europe/Paris|Europe/Amsterdam","Europe/Paris|Europe/Andorra","Europe/Paris|Europe/Belgrade","Europe/Paris|Europe/Berlin","Europe/Paris|Europe/Bratislava","Europe/Paris|Europe/Brussels","Europe/Paris|Europe/Budapest","Europe/Paris|Europe/Busingen","Europe/Paris|Europe/Copenhagen","Europe/Paris|Europe/Gibraltar","Europe/Paris|Europe/Ljubljana","Europe/Paris|Europe/Luxembourg","Europe/Paris|Europe/Madrid","Europe/Paris|Europe/Malta","Europe/Paris|Europe/Monaco","Europe/Paris|Europe/Oslo","Europe/Paris|Europe/Podgorica","Europe/Paris|Europe/Prague","Europe/Paris|Europe/Rome","Europe/Paris|Europe/San_Marino","Europe/Paris|Europe/Sarajevo","Europe/Paris|Europe/Skopje","Europe/Paris|Europe/Stockholm","Europe/Paris|Europe/Tirane","Europe/Paris|Europe/Vaduz","Europe/Paris|Europe/Vatican","Europe/Paris|Europe/Vienna","Europe/Paris|Europe/Warsaw","Europe/Paris|Europe/Zagreb","Europe/Paris|Europe/Zurich","Europe/Paris|Poland","Pacific/Auckland|Antarctica/McMurdo","Pacific/Auckland|Antarctica/South_Pole","Pacific/Auckland|NZ","Pacific/Chatham|NZ-CHAT","Pacific/Easter|Chile/EasterIsland","Pacific/Galapagos|Etc/GMT+6","Pacific/Gambier|Etc/GMT+9","Pacific/Guam|Pacific/Saipan","Pacific/Honolulu|HST","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Kiritimati|Etc/GMT-14","Pacific/Niue|Etc/GMT+11","Pacific/Pago_Pago|Pacific/Midway","Pacific/Pago_Pago|Pacific/Samoa","Pacific/Pago_Pago|US/Samoa","Pacific/Pitcairn|Etc/GMT+8","Pacific/Tahiti|Etc/GMT+10","Pacific/Tahiti|Pacific/Rarotonga","Pacific/Tongatapu|Etc/GMT-13","Pacific/Tongatapu|Pacific/Enderbury","Pacific/Tongatapu|Pacific/Fakaofo","Pacific/Tongatapu|Pacific/Kanton"],countries:["AD|Europe/Andorra","AE|Asia/Dubai","AF|Asia/Kabul","AG|America/Puerto_Rico America/Antigua","AI|America/Puerto_Rico America/Anguilla","AL|Europe/Tirane","AM|Asia/Yerevan","AO|Africa/Lagos Africa/Luanda","AQ|Antarctica/Casey Antarctica/Davis Antarctica/Mawson Antarctica/Palmer Antarctica/Rothera Antarctica/Troll Antarctica/Vostok Pacific/Auckland Pacific/Port_Moresby Asia/Riyadh Antarctica/McMurdo Antarctica/DumontDUrville Antarctica/Syowa","AR|America/Argentina/Buenos_Aires America/Argentina/Cordoba America/Argentina/Salta America/Argentina/Jujuy America/Argentina/Tucuman America/Argentina/Catamarca America/Argentina/La_Rioja America/Argentina/San_Juan America/Argentina/Mendoza America/Argentina/San_Luis America/Argentina/Rio_Gallegos America/Argentina/Ushuaia","AS|Pacific/Pago_Pago","AT|Europe/Vienna","AU|Australia/Lord_Howe Antarctica/Macquarie Australia/Hobart Australia/Melbourne Australia/Sydney Australia/Broken_Hill Australia/Brisbane Australia/Lindeman Australia/Adelaide Australia/Darwin Australia/Perth Australia/Eucla","AW|America/Puerto_Rico America/Aruba","AX|Europe/Helsinki Europe/Mariehamn","AZ|Asia/Baku","BA|Europe/Belgrade Europe/Sarajevo","BB|America/Barbados","BD|Asia/Dhaka","BE|Europe/Brussels","BF|Africa/Abidjan Africa/Ouagadougou","BG|Europe/Sofia","BH|Asia/Qatar Asia/Bahrain","BI|Africa/Maputo Africa/Bujumbura","BJ|Africa/Lagos Africa/Porto-Novo","BL|America/Puerto_Rico America/St_Barthelemy","BM|Atlantic/Bermuda","BN|Asia/Kuching Asia/Brunei","BO|America/La_Paz","BQ|America/Puerto_Rico America/Kralendijk","BR|America/Noronha America/Belem America/Fortaleza America/Recife America/Araguaina America/Maceio America/Bahia America/Sao_Paulo America/Campo_Grande America/Cuiaba America/Santarem America/Porto_Velho America/Boa_Vista America/Manaus America/Eirunepe America/Rio_Branco","BS|America/Toronto America/Nassau","BT|Asia/Thimphu","BW|Africa/Maputo Africa/Gaborone","BY|Europe/Minsk","BZ|America/Belize","CA|America/St_Johns America/Halifax America/Glace_Bay America/Moncton America/Goose_Bay America/Toronto America/Iqaluit America/Winnipeg America/Resolute America/Rankin_Inlet America/Regina America/Swift_Current America/Edmonton America/Cambridge_Bay America/Inuvik America/Dawson_Creek America/Fort_Nelson America/Whitehorse America/Dawson America/Vancouver America/Panama America/Puerto_Rico America/Phoenix America/Blanc-Sablon America/Atikokan America/Creston","CC|Asia/Yangon Indian/Cocos","CD|Africa/Maputo Africa/Lagos Africa/Kinshasa Africa/Lubumbashi","CF|Africa/Lagos Africa/Bangui","CG|Africa/Lagos Africa/Brazzaville","CH|Europe/Zurich","CI|Africa/Abidjan","CK|Pacific/Rarotonga","CL|America/Santiago America/Punta_Arenas Pacific/Easter","CM|Africa/Lagos Africa/Douala","CN|Asia/Shanghai Asia/Urumqi","CO|America/Bogota","CR|America/Costa_Rica","CU|America/Havana","CV|Atlantic/Cape_Verde","CW|America/Puerto_Rico America/Curacao","CX|Asia/Bangkok Indian/Christmas","CY|Asia/Nicosia Asia/Famagusta","CZ|Europe/Prague","DE|Europe/Zurich Europe/Berlin Europe/Busingen","DJ|Africa/Nairobi Africa/Djibouti","DK|Europe/Berlin Europe/Copenhagen","DM|America/Puerto_Rico America/Dominica","DO|America/Santo_Domingo","DZ|Africa/Algiers","EC|America/Guayaquil Pacific/Galapagos","EE|Europe/Tallinn","EG|Africa/Cairo","EH|Africa/El_Aaiun","ER|Africa/Nairobi Africa/Asmara","ES|Europe/Madrid Africa/Ceuta Atlantic/Canary","ET|Africa/Nairobi Africa/Addis_Ababa","FI|Europe/Helsinki","FJ|Pacific/Fiji","FK|Atlantic/Stanley","FM|Pacific/Kosrae Pacific/Port_Moresby Pacific/Guadalcanal Pacific/Chuuk Pacific/Pohnpei","FO|Atlantic/Faroe","FR|Europe/Paris","GA|Africa/Lagos Africa/Libreville","GB|Europe/London","GD|America/Puerto_Rico America/Grenada","GE|Asia/Tbilisi","GF|America/Cayenne","GG|Europe/London Europe/Guernsey","GH|Africa/Abidjan Africa/Accra","GI|Europe/Gibraltar","GL|America/Nuuk America/Danmarkshavn America/Scoresbysund America/Thule","GM|Africa/Abidjan Africa/Banjul","GN|Africa/Abidjan Africa/Conakry","GP|America/Puerto_Rico America/Guadeloupe","GQ|Africa/Lagos Africa/Malabo","GR|Europe/Athens","GS|Atlantic/South_Georgia","GT|America/Guatemala","GU|Pacific/Guam","GW|Africa/Bissau","GY|America/Guyana","HK|Asia/Hong_Kong","HN|America/Tegucigalpa","HR|Europe/Belgrade Europe/Zagreb","HT|America/Port-au-Prince","HU|Europe/Budapest","ID|Asia/Jakarta Asia/Pontianak Asia/Makassar Asia/Jayapura","IE|Europe/Dublin","IL|Asia/Jerusalem","IM|Europe/London Europe/Isle_of_Man","IN|Asia/Kolkata","IO|Indian/Chagos","IQ|Asia/Baghdad","IR|Asia/Tehran","IS|Africa/Abidjan Atlantic/Reykjavik","IT|Europe/Rome","JE|Europe/London Europe/Jersey","JM|America/Jamaica","JO|Asia/Amman","JP|Asia/Tokyo","KE|Africa/Nairobi","KG|Asia/Bishkek","KH|Asia/Bangkok Asia/Phnom_Penh","KI|Pacific/Tarawa Pacific/Kanton Pacific/Kiritimati","KM|Africa/Nairobi Indian/Comoro","KN|America/Puerto_Rico America/St_Kitts","KP|Asia/Pyongyang","KR|Asia/Seoul","KW|Asia/Riyadh Asia/Kuwait","KY|America/Panama America/Cayman","KZ|Asia/Almaty Asia/Qyzylorda Asia/Qostanay Asia/Aqtobe Asia/Aqtau Asia/Atyrau Asia/Oral","LA|Asia/Bangkok Asia/Vientiane","LB|Asia/Beirut","LC|America/Puerto_Rico America/St_Lucia","LI|Europe/Zurich Europe/Vaduz","LK|Asia/Colombo","LR|Africa/Monrovia","LS|Africa/Johannesburg Africa/Maseru","LT|Europe/Vilnius","LU|Europe/Brussels Europe/Luxembourg","LV|Europe/Riga","LY|Africa/Tripoli","MA|Africa/Casablanca","MC|Europe/Paris Europe/Monaco","MD|Europe/Chisinau","ME|Europe/Belgrade Europe/Podgorica","MF|America/Puerto_Rico America/Marigot","MG|Africa/Nairobi Indian/Antananarivo","MH|Pacific/Tarawa Pacific/Kwajalein Pacific/Majuro","MK|Europe/Belgrade Europe/Skopje","ML|Africa/Abidjan Africa/Bamako","MM|Asia/Yangon","MN|Asia/Ulaanbaatar Asia/Hovd Asia/Choibalsan","MO|Asia/Macau","MP|Pacific/Guam Pacific/Saipan","MQ|America/Martinique","MR|Africa/Abidjan Africa/Nouakchott","MS|America/Puerto_Rico America/Montserrat","MT|Europe/Malta","MU|Indian/Mauritius","MV|Indian/Maldives","MW|Africa/Maputo Africa/Blantyre","MX|America/Mexico_City America/Cancun America/Merida America/Monterrey America/Matamoros America/Chihuahua America/Ciudad_Juarez America/Ojinaga America/Mazatlan America/Bahia_Banderas America/Hermosillo America/Tijuana","MY|Asia/Kuching Asia/Singapore Asia/Kuala_Lumpur","MZ|Africa/Maputo","NA|Africa/Windhoek","NC|Pacific/Noumea","NE|Africa/Lagos Africa/Niamey","NF|Pacific/Norfolk","NG|Africa/Lagos","NI|America/Managua","NL|Europe/Brussels Europe/Amsterdam","NO|Europe/Berlin Europe/Oslo","NP|Asia/Kathmandu","NR|Pacific/Nauru","NU|Pacific/Niue","NZ|Pacific/Auckland Pacific/Chatham","OM|Asia/Dubai Asia/Muscat","PA|America/Panama","PE|America/Lima","PF|Pacific/Tahiti Pacific/Marquesas Pacific/Gambier","PG|Pacific/Port_Moresby Pacific/Bougainville","PH|Asia/Manila","PK|Asia/Karachi","PL|Europe/Warsaw","PM|America/Miquelon","PN|Pacific/Pitcairn","PR|America/Puerto_Rico","PS|Asia/Gaza Asia/Hebron","PT|Europe/Lisbon Atlantic/Madeira Atlantic/Azores","PW|Pacific/Palau","PY|America/Asuncion","QA|Asia/Qatar","RE|Asia/Dubai Indian/Reunion","RO|Europe/Bucharest","RS|Europe/Belgrade","RU|Europe/Kaliningrad Europe/Moscow Europe/Simferopol Europe/Kirov Europe/Volgograd Europe/Astrakhan Europe/Saratov Europe/Ulyanovsk Europe/Samara Asia/Yekaterinburg Asia/Omsk Asia/Novosibirsk Asia/Barnaul Asia/Tomsk Asia/Novokuznetsk Asia/Krasnoyarsk Asia/Irkutsk Asia/Chita Asia/Yakutsk Asia/Khandyga Asia/Vladivostok Asia/Ust-Nera Asia/Magadan Asia/Sakhalin Asia/Srednekolymsk Asia/Kamchatka Asia/Anadyr","RW|Africa/Maputo Africa/Kigali","SA|Asia/Riyadh","SB|Pacific/Guadalcanal","SC|Asia/Dubai Indian/Mahe","SD|Africa/Khartoum","SE|Europe/Berlin Europe/Stockholm","SG|Asia/Singapore","SH|Africa/Abidjan Atlantic/St_Helena","SI|Europe/Belgrade Europe/Ljubljana","SJ|Europe/Berlin Arctic/Longyearbyen","SK|Europe/Prague Europe/Bratislava","SL|Africa/Abidjan Africa/Freetown","SM|Europe/Rome Europe/San_Marino","SN|Africa/Abidjan Africa/Dakar","SO|Africa/Nairobi Africa/Mogadishu","SR|America/Paramaribo","SS|Africa/Juba","ST|Africa/Sao_Tome","SV|America/El_Salvador","SX|America/Puerto_Rico America/Lower_Princes","SY|Asia/Damascus","SZ|Africa/Johannesburg Africa/Mbabane","TC|America/Grand_Turk","TD|Africa/Ndjamena","TF|Asia/Dubai Indian/Maldives Indian/Kerguelen","TG|Africa/Abidjan Africa/Lome","TH|Asia/Bangkok","TJ|Asia/Dushanbe","TK|Pacific/Fakaofo","TL|Asia/Dili","TM|Asia/Ashgabat","TN|Africa/Tunis","TO|Pacific/Tongatapu","TR|Europe/Istanbul","TT|America/Puerto_Rico America/Port_of_Spain","TV|Pacific/Tarawa Pacific/Funafuti","TW|Asia/Taipei","TZ|Africa/Nairobi Africa/Dar_es_Salaam","UA|Europe/Simferopol Europe/Kyiv","UG|Africa/Nairobi Africa/Kampala","UM|Pacific/Pago_Pago Pacific/Tarawa Pacific/Midway Pacific/Wake","US|America/New_York America/Detroit America/Kentucky/Louisville America/Kentucky/Monticello America/Indiana/Indianapolis America/Indiana/Vincennes America/Indiana/Winamac America/Indiana/Marengo America/Indiana/Petersburg America/Indiana/Vevay America/Chicago America/Indiana/Tell_City America/Indiana/Knox America/Menominee America/North_Dakota/Center America/North_Dakota/New_Salem America/North_Dakota/Beulah America/Denver America/Boise America/Phoenix America/Los_Angeles America/Anchorage America/Juneau America/Sitka America/Metlakatla America/Yakutat America/Nome America/Adak Pacific/Honolulu","UY|America/Montevideo","UZ|Asia/Samarkand Asia/Tashkent","VA|Europe/Rome Europe/Vatican","VC|America/Puerto_Rico America/St_Vincent","VE|America/Caracas","VG|America/Puerto_Rico America/Tortola","VI|America/Puerto_Rico America/St_Thomas","VN|Asia/Bangkok Asia/Ho_Chi_Minh","VU|Pacific/Efate","WF|Pacific/Tarawa Pacific/Wallis","WS|Pacific/Apia","YE|Asia/Riyadh Asia/Aden","YT|Africa/Nairobi Indian/Mayotte","ZA|Africa/Johannesburg","ZM|Africa/Maputo Africa/Lusaka","ZW|Africa/Maputo Africa/Harare"]}),e}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).PerfectScrollbar=t()}(this,function(){"use strict";function e(e){return getComputedStyle(e)}function t(e,t){for(var i in t){var n=t[i];"number"==typeof n&&(n+="px"),e.style[i]=n}return e}function i(e){var t=document.createElement("div");return t.className=e,t}var n="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function o(e,t){if(!n)throw new Error("No element matching method supported");return n.call(e,t)}function r(e){e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}function s(e,t){return Array.prototype.filter.call(e.children,function(e){return o(e,t)})}var a="ps",l="ps__rtl",c={thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},d={focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}},u={x:null,y:null};function h(e,t){var i=e.element.classList,n=d.scrolling(t);i.contains(n)?clearTimeout(u[t]):i.add(n)}function p(e,t){u[t]=setTimeout(function(){return e.isAlive&&e.element.classList.remove(d.scrolling(t))},e.settings.scrollingThreshold)}var g=function(e){this.element=e,this.handlers={}},f={isEmpty:{configurable:!0}};g.prototype.bind=function(e,t){void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e].push(t),this.element.addEventListener(e,t,!1)},g.prototype.unbind=function(e,t){var i=this;this.handlers[e]=this.handlers[e].filter(function(n){return!(!t||n===t)||(i.element.removeEventListener(e,n,!1),!1)})},g.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)},f.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return 0===e.handlers[t].length})},Object.defineProperties(g.prototype,f);var m=function(){this.eventElements=[]};function v(e){if("function"==typeof window.CustomEvent)return new CustomEvent(e);var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,void 0),t}function b(e,t,i,n,o){var r;if(void 0===n&&(n=!0),void 0===o&&(o=!1),"top"===t)r=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==t)throw new Error("A proper axis should be provided");r=["contentWidth","containerWidth","scrollLeft","x","left","right"]}!function(e,t,i,n,o){var r=i[0],s=i[1],a=i[2],l=i[3],c=i[4],d=i[5];void 0===n&&(n=!0);void 0===o&&(o=!1);var u=e.element;e.reach[l]=null,u[a]<1&&(e.reach[l]="start");u[a]>e[r]-e[s]-1&&(e.reach[l]="end");t&&(u.dispatchEvent(v("ps-scroll-"+l)),t<0?u.dispatchEvent(v("ps-scroll-"+c)):t>0&&u.dispatchEvent(v("ps-scroll-"+d)),n&&function(e,t){h(e,t),p(e,t)}(e,l));e.reach[l]&&(t||o)&&u.dispatchEvent(v("ps-"+l+"-reach-"+e.reach[l]))}(e,i,r,n,o)}function y(e){return parseInt(e,10)||0}m.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return t||(t=new g(e),this.eventElements.push(t)),t},m.prototype.bind=function(e,t,i){this.eventElement(e).bind(t,i)},m.prototype.unbind=function(e,t,i){var n=this.eventElement(e);n.unbind(t,i),n.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(n),1)},m.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]},m.prototype.once=function(e,t,i){var n=this.eventElement(e),o=function(e){n.unbind(t,o),i(e)};n.bind(t,o)};var w={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)};function C(e){var i=e.element;if(e.settings.wheelPropagation||(0!==e.maxScroll&&i.scrollTop+i.offsetHeight<i.scrollHeight&&(e.maxScroll=0),i.scrollTop+i.offsetHeight>=i.scrollHeight&&0===e.maxScroll&&(e.maxScroll=i.scrollTop),!(0!==e.maxScroll&&i.scrollTop>e.maxScroll))){var n=Math.floor(i.scrollTop),o=i.getBoundingClientRect();e.containerWidth=Math.round(o.width),e.containerHeight=Math.round(o.height),e.contentWidth=i.scrollWidth,e.contentHeight=i.scrollHeight,i.contains(e.scrollbarXRail)||(s(i,c.rail("x")).forEach(function(e){return r(e)}),i.appendChild(e.scrollbarXRail)),i.contains(e.scrollbarYRail)||(s(i,c.rail("y")).forEach(function(e){return r(e)}),i.appendChild(e.scrollbarYRail)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=_(e,y(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=y((e.negativeScrollAdjustment+i.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=_(e,y(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=y(n*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),function(e,i){var n={width:i.railXWidth},o=Math.floor(e.scrollTop);i.isRtl?n.left=i.negativeScrollAdjustment+e.scrollLeft+i.containerWidth-i.contentWidth:n.left=e.scrollLeft;i.isScrollbarXUsingBottom?n.bottom=i.scrollbarXBottom-o:n.top=i.scrollbarXTop+o;t(i.scrollbarXRail,n);var r={top:o,height:i.railYHeight};i.isScrollbarYUsingRight?i.isRtl?r.right=i.contentWidth-(i.negativeScrollAdjustment+e.scrollLeft)-i.scrollbarYRight-i.scrollbarYOuterWidth-9:r.right=i.scrollbarYRight-e.scrollLeft:i.isRtl?r.left=i.negativeScrollAdjustment+e.scrollLeft+2*i.containerWidth-i.contentWidth-i.scrollbarYLeft-i.scrollbarYOuterWidth:r.left=i.scrollbarYLeft+e.scrollLeft;t(i.scrollbarYRail,r),t(i.scrollbarX,{left:i.scrollbarXLeft,width:i.scrollbarXWidth-i.railBorderXWidth}),t(i.scrollbarY,{top:i.scrollbarYTop,height:i.scrollbarYHeight-i.railBorderYWidth})}(i,e),e.scrollbarXActive?i.classList.add(d.active("x")):(i.classList.remove(d.active("x")),e.scrollbarXWidth=0,e.scrollbarXLeft=0,i.scrollLeft=!0===e.isRtl?e.contentWidth:0),e.scrollbarYActive?i.classList.add(d.active("y")):(i.classList.remove(d.active("y")),e.scrollbarYHeight=0,e.scrollbarYTop=0,i.scrollTop=0)}}function _(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function S(e,t){var i=t[0],n=t[1],o=t[2],r=t[3],s=t[4],a=t[5],l=t[6],c=t[7],u=t[8],g=e.element,f=null,m=null,v=null;function b(t){t.touches&&t.touches[0]&&(t[o]=t.touches[0].pageY),g[l]=f+v*(t[o]-m),h(e,c),C(e),t.stopPropagation(),t.type.startsWith("touch")&&t.changedTouches.length>1&&t.preventDefault()}function y(){$(document).trigger($.Event("agn:rail-mouseup"),[e.element]),p(e,c),e[u].classList.remove(d.clicking),e.event.unbind(e.ownerDocument,"mousemove",b)}function w(t,s){f=g[l],s&&t.touches&&(t[o]=t.touches[0].pageY),m=t[o],v=(e[n]-e[i])/(e[r]-e[a]),s?e.event.bind(e.ownerDocument,"touchmove",b):(e.event.bind(e.ownerDocument,"mousemove",b),e.event.once(e.ownerDocument,"mouseup",y),t.preventDefault()),e[u].classList.add(d.clicking),t.stopPropagation()}e.event.bind(e[s],"mousedown",function(e){w(e)}),e.event.bind(e[s],"touchstart",function(e){w(e,!0)})}var x={"click-rail":function(e){e.element,e.event.bind(e.scrollbarY,"mousedown",function(t){return $(document).trigger($.Event("agn:rail-mousedown"),[e.element]),t.stopPropagation()}),e.event.bind(e.scrollbarYRail,"mousedown",function(t){var i=t.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top>e.scrollbarYTop?1:-1;e.element.scrollTop+=i*e.containerHeight,C(e),t.stopPropagation()}),e.event.bind(e.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),e.event.bind(e.scrollbarXRail,"mousedown",function(t){var i=t.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left>e.scrollbarXLeft?1:-1;e.element.scrollLeft+=i*e.containerWidth,C(e),t.stopPropagation()})},"drag-thumb":function(e){S(e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),S(e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])},keyboard:function(e){var t=e.element;e.event.bind(e.ownerDocument,"keydown",function(i){if(!(i.isDefaultPrevented&&i.isDefaultPrevented()||i.defaultPrevented)&&(o(t,":hover")||o(e.scrollbarX,":focus")||o(e.scrollbarY,":focus"))){var n,r=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(r){if("IFRAME"===r.tagName)r=r.contentDocument.activeElement;else for(;r.shadowRoot;)r=r.shadowRoot.activeElement;if(o(n=r,"input,[contenteditable]")||o(n,"select,[contenteditable]")||o(n,"textarea,[contenteditable]")||o(n,"button,[contenteditable]"))return}var s=0,a=0;switch(i.which){case 37:s=i.metaKey?-e.contentWidth:i.altKey?-e.containerWidth:-30;break;case 38:a=i.metaKey?e.contentHeight:i.altKey?e.containerHeight:30;break;case 39:s=i.metaKey?e.contentWidth:i.altKey?e.containerWidth:30;break;case 40:a=i.metaKey?-e.contentHeight:i.altKey?-e.containerHeight:-30;break;case 32:a=i.shiftKey?e.containerHeight:-e.containerHeight;break;case 33:a=e.containerHeight;break;case 34:a=-e.containerHeight;break;case 36:a=e.contentHeight;break;case 35:a=-e.contentHeight;break;default:return}e.settings.suppressScrollX&&0!==s||e.settings.suppressScrollY&&0!==a||(t.scrollTop-=a,t.scrollLeft+=s,C(e),function(i,n){var o=Math.floor(t.scrollTop);if(0===i){if(!e.scrollbarYActive)return!1;if(0===o&&n>0||o>=e.contentHeight-e.containerHeight&&n<0)return!e.settings.wheelPropagation}var r=t.scrollLeft;if(0===n){if(!e.scrollbarXActive)return!1;if(0===r&&i<0||r>=e.contentWidth-e.containerWidth&&i>0)return!e.settings.wheelPropagation}return!0}(s,a)&&i.preventDefault())}})},wheel:function(t){var i=t.element;function n(n){var o=function(e){var t=e.deltaX,i=-1*e.deltaY;return void 0!==t&&void 0!==i||(t=-1*e.wheelDeltaX/6,i=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,i*=10),t!=t&&i!=i&&(t=0,i=e.wheelDelta),e.shiftKey?[-i,-t]:[t,i]}(n),r=o[0],s=o[1];if(!function(t,n,o){if(!w.isWebKit&&i.querySelector("select:focus"))return!0;if(!i.contains(t))return!1;for(var r=t;r&&r!==i;){if(r.classList.contains(c.consuming))return!0;var s=e(r);if(o&&s.overflowY.match(/(scroll|auto)/)){var a=r.scrollHeight-r.clientHeight;if(a>0&&(r.scrollTop>0&&o<0||r.scrollTop<a&&o>0))return!0}if(n&&s.overflowX.match(/(scroll|auto)/)){var l=r.scrollWidth-r.clientWidth;if(l>0&&(r.scrollLeft>0&&n<0||r.scrollLeft<l&&n>0))return!0}r=r.parentNode}return!1}(n.target,r,s)){var a=!1;t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(s?i.scrollTop-=s*t.settings.wheelSpeed:i.scrollTop+=r*t.settings.wheelSpeed,a=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(r?i.scrollLeft+=r*t.settings.wheelSpeed:i.scrollLeft-=s*t.settings.wheelSpeed,a=!0):(i.scrollTop-=s*t.settings.wheelSpeed,i.scrollLeft+=r*t.settings.wheelSpeed),C(t),a=a||function(e,n){var o=Math.floor(i.scrollTop),r=0===i.scrollTop,s=o+i.offsetHeight===i.scrollHeight,a=0===i.scrollLeft,l=i.scrollLeft+i.offsetWidth===i.scrollWidth;return!(Math.abs(n)>Math.abs(e)?r||s:a||l)||!t.settings.wheelPropagation}(r,s),a&&!n.ctrlKey&&(n.stopPropagation(),n.preventDefault())}}void 0!==window.onwheel?t.event.bind(i,"wheel",n):void 0!==window.onmousewheel&&t.event.bind(i,"mousewheel",n)},touch:function(t){if(w.supportsTouch||w.supportsIePointer){var i=t.element,n={},o=0,r={},s=null;w.supportsTouch?(t.event.bind(i,"touchstart",u),t.event.bind(i,"touchmove",h),t.event.bind(i,"touchend",p)):w.supportsIePointer&&(window.PointerEvent?(t.event.bind(i,"pointerdown",u),t.event.bind(i,"pointermove",h),t.event.bind(i,"pointerup",p)):window.MSPointerEvent&&(t.event.bind(i,"MSPointerDown",u),t.event.bind(i,"MSPointerMove",h),t.event.bind(i,"MSPointerUp",p)))}function a(e,n){i.scrollTop-=n,i.scrollLeft-=e,C(t)}function l(e){return e.targetTouches?e.targetTouches[0]:e}function d(e){return(!e.pointerType||"pen"!==e.pointerType||0!==e.buttons)&&(!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE))}function u(e){if(d(e)){var t=l(e);n.pageX=t.pageX,n.pageY=t.pageY,o=(new Date).getTime(),null!==s&&clearInterval(s)}}function h(s){if(d(s)){var u=l(s),h={pageX:u.pageX,pageY:u.pageY},p=h.pageX-n.pageX,g=h.pageY-n.pageY;if(function(t,n,o){if(!i.contains(t))return!1;for(var r=t;r&&r!==i;){if(r.classList.contains(c.consuming))return!0;var s=e(r);if(o&&s.overflowY.match(/(scroll|auto)/)){var a=r.scrollHeight-r.clientHeight;if(a>0&&(r.scrollTop>0&&o<0||r.scrollTop<a&&o>0))return!0}if(n&&s.overflowX.match(/(scroll|auto)/)){var l=r.scrollWidth-r.clientWidth;if(l>0&&(r.scrollLeft>0&&n<0||r.scrollLeft<l&&n>0))return!0}r=r.parentNode}return!1}(s.target,p,g))return;a(p,g),n=h;var f=(new Date).getTime(),m=f-o;m>0&&(r.x=p/m,r.y=g/m,o=f),function(e,n){var o=Math.floor(i.scrollTop),r=i.scrollLeft,s=Math.abs(e),a=Math.abs(n);if(a>s){if(n<0&&o===t.contentHeight-t.containerHeight||n>0&&0===o)return 0===window.scrollY&&n>0&&w.isChrome}else if(s>a&&(e<0&&r===t.contentWidth-t.containerWidth||e>0&&0===r))return!0;return!0}(p,g)&&s.preventDefault()}}function p(){t.settings.swipeEasing&&(clearInterval(s),s=setInterval(function(){t.isInitialized?clearInterval(s):r.x||r.y?Math.abs(r.x)<.01&&Math.abs(r.y)<.01?clearInterval(s):t.element?(a(30*r.x,30*r.y),r.x*=.8,r.y*=.8):clearInterval(s):clearInterval(s)},10))}}},A=function(n,o){var r=this;if(void 0===o&&(o={}),"string"==typeof n&&(n=document.querySelector(n)),!n||!n.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(var s in this.maxScroll=0,this.element=n,n.classList.add(a),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1},o)this.settings[s]=o[s];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var u,h,p=function(){return n.classList.add(d.focus)},g=function(){return n.classList.remove(d.focus)};this.isRtl="rtl"===e(n).direction,!0===this.isRtl&&n.classList.add(l),this.isNegativeScroll=(h=n.scrollLeft,n.scrollLeft=-1,u=n.scrollLeft<0,n.scrollLeft=h,u),this.negativeScrollAdjustment=this.isNegativeScroll?n.scrollWidth-n.clientWidth:0,this.event=new m,this.ownerDocument=n.ownerDocument||document,this.scrollbarXRail=i(c.rail("x")),n.appendChild(this.scrollbarXRail),this.scrollbarX=i(c.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",p),this.event.bind(this.scrollbarX,"blur",g),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var f=e(this.scrollbarXRail);this.scrollbarXBottom=parseInt(f.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=y(f.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=y(f.borderLeftWidth)+y(f.borderRightWidth),t(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=y(f.marginLeft)+y(f.marginRight),t(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=i(c.rail("y")),n.appendChild(this.scrollbarYRail),this.scrollbarY=i(c.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",p),this.event.bind(this.scrollbarY,"blur",g),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var v=e(this.scrollbarYRail);this.scrollbarYRight=parseInt(v.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=y(v.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?function(t){var i=e(t);return y(i.width)+y(i.paddingLeft)+y(i.paddingRight)+y(i.borderLeftWidth)+y(i.borderRightWidth)}(this.scrollbarY):null,this.railBorderYWidth=y(v.borderTopWidth)+y(v.borderBottomWidth),t(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=y(v.marginTop)+y(v.marginBottom),t(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:n.scrollLeft<=0?"start":n.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:n.scrollTop<=0?"start":n.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(e){return x[e](r)}),this.lastScrollTop=Math.floor(n.scrollTop),this.lastScrollLeft=n.scrollLeft,this.event.bind(this.element,"scroll",function(e){return r.onScroll(e)}),C(this)};return A.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,t(this.scrollbarXRail,{display:"block"}),t(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=y(e(this.scrollbarXRail).marginLeft)+y(e(this.scrollbarXRail).marginRight),this.railYMarginHeight=y(e(this.scrollbarYRail).marginTop)+y(e(this.scrollbarYRail).marginBottom),t(this.scrollbarXRail,{display:"none"}),t(this.scrollbarYRail,{display:"none"}),C(this),b(this,"top",0,!1,!0),b(this,"left",0,!1,!0),t(this.scrollbarXRail,{display:""}),t(this.scrollbarYRail,{display:""}))},A.prototype.onScroll=function(e){this.isAlive&&(C(this),b(this,"top",this.element.scrollTop-this.lastScrollTop),b(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},A.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),r(this.scrollbarX),r(this.scrollbarY),r(this.scrollbarXRail),r(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},A.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")},A}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){var t,i,n=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r=Array.prototype.slice;if(e.event.fixHooks)for(var s=n.length;s;)e.event.fixHooks[n[--s]]=e.event.mouseHooks;var a=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var t=o.length;t;)this.addEventListener(o[--t],l,!1);else this.onmousewheel=l;e.data(this,"mousewheel-line-height",a.getLineHeight(this)),e.data(this,"mousewheel-page-height",a.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=o.length;e;)this.removeEventListener(o[--e],l,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};function l(n){var o,s=n||window.event,a=r.call(arguments,1),l=0,u=0,h=0;if((n=e.event.fix(s)).type="mousewheel","detail"in s&&(h=-1*s.detail),"wheelDelta"in s&&(h=s.wheelDelta),"wheelDeltaY"in s&&(h=s.wheelDeltaY),"wheelDeltaX"in s&&(u=-1*s.wheelDeltaX),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(u=-1*h,h=0),l=0===h?u:h,"deltaY"in s&&(l=h=-1*s.deltaY),"deltaX"in s&&(u=s.deltaX,0===h&&(l=-1*u)),0!==h||0!==u){if(1===s.deltaMode){var p=e.data(this,"mousewheel-line-height");l*=p,h*=p,u*=p}else if(2===s.deltaMode){var g=e.data(this,"mousewheel-page-height");l*=g,h*=g,u*=g}return o=Math.max(Math.abs(h),Math.abs(u)),(!i||o<i)&&(i=o,d(s,o)&&(i/=40)),d(s,o)&&(l/=40,u/=40,h/=40),l=Math[l>=1?"floor":"ceil"](l/i),u=Math[u>=1?"floor":"ceil"](u/i),h=Math[h>=1?"floor":"ceil"](h/i),n.deltaX=u,n.deltaY=h,n.deltaFactor=i,n.deltaMode=0,a.unshift(n,l,u,h),t&&clearTimeout(t),t=setTimeout(c,200),(e.event.dispatch||e.event.handle).apply(this,a)}}function c(){i=null}function d(e,t){return a.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(e){if("undefined"!=typeof window){var t=0,i=!1,n=!1,o="[iFrameSizer]",r=null,s=window.requestAnimationFrame,a={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},l={},c=null,d={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,mouseEvents:!0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",onClose:function(){return!0},onClosed:function(){},onInit:function(){},onMessage:function(){y("onMessage function not defined")},onMouseEnter:function(){},onMouseLeave:function(){},onResized:function(){},onScroll:function(){return!0}},u={};window.jQuery&&function(e){e.fn?e.fn.iFrameResize||(e.fn.iFrameResize=function(e){return this.filter("iframe").each(function(t,i){I(i,e)}).end()}):b("","Unable to bind to jQuery, it is not fully loaded.")}(window.jQuery),"function"==typeof define&&define.amd?define([],$):"object"==typeof module&&"object"==typeof module.exports&&(module.exports=$()),window.iFrameResize=window.iFrameResize||$()}function h(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function p(e,t,i){e.addEventListener(t,i,!1)}function g(e,t,i){e.removeEventListener(t,i,!1)}function f(e){return o+"["+function(e){var t="Host page: "+e;return window.top!==window.self&&(t=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+e:"Nested host page: "+e),t}(e)+"]"}function m(e){return l[e]?l[e].log:i}function v(e,t){w("log",e,t,m(e))}function b(e,t){w("info",e,t,m(e))}function y(e,t){w("warn",e,t,!0)}function w(e,t,i,n){!0===n&&"object"==typeof window.console&&console[e](f(t),i)}function C(e){function t(){s("Height"),s("Width"),M(function(){D($),E(G),w("onResized",$)},$,"init")}function i(e){return"border-box"!==e.boxSizing?0:(e.paddingTop?parseInt(e.paddingTop,10):0)+(e.paddingBottom?parseInt(e.paddingBottom,10):0)}function n(e){return"border-box"!==e.boxSizing?0:(e.borderTopWidth?parseInt(e.borderTopWidth,10):0)+(e.borderBottomWidth?parseInt(e.borderBottomWidth,10):0)}function s(e){var t=Number(l[G]["max"+e]),i=Number(l[G]["min"+e]),n=e.toLowerCase(),o=Number($[n]);v(G,"Checking "+n+" is in range "+i+"-"+t),o<i&&(o=i,v(G,"Set "+n+" to min value")),o>t&&(o=t,v(G,"Set "+n+" to max value")),$[n]=""+o}function a(e){return F.substr(F.indexOf(":")+7+e)}function c(e,t){var i,n,o;i=function(){var i,n;P("Send Page Info","pageInfo:"+(i=document.body.getBoundingClientRect(),n=$.iframe.getBoundingClientRect(),JSON.stringify({iframeHeight:n.height,iframeWidth:n.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(n.top-i.top,10),offsetLeft:parseInt(n.left-i.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth,windowHeight:window.innerHeight,windowWidth:window.innerWidth})),e,t)},n=32,u[o=t]||(u[o]=setTimeout(function(){u[o]=null,i()},n))}function d(e){var t=e.getBoundingClientRect();return A(G),{x:Math.floor(Number(t.left)+Number(r.x)),y:Math.floor(Number(t.top)+Number(r.y))}}function h(e){var t=e?d($.iframe):{x:0,y:0},i={x:Number($.width)+t.x,y:Number($.height)+t.y};v(G,"Reposition requested from iFrame (offset x:"+t.x+" y:"+t.y+")"),window.top!==window.self?window.parentIFrame?window.parentIFrame["scrollTo"+(e?"Offset":"")](i.x,i.y):y(G,"Unable to scroll to requested position, window.parentIFrame not found"):(r=i,f(),v(G,"--"))}function f(){!1!==w("onScroll",r)?E(G):T()}function m(e){var t={};if(0===Number($.width)&&0===Number($.height)){var i=a(9).split(":");t={x:i[1],y:i[0]}}else t={x:$.width,y:$.height};w(e,{iframe:$.iframe,screenX:Number(t.x),screenY:Number(t.y),type:$.type})}function w(e,t){return _(G,e,t)}var C,S,I,O,N,L,F=e.data,$={},G=null;"[iFrameResizerChild]Ready"===F?function(){for(var e in l)P("iFrame requested init",R(e),l[e].iframe,e)}():o===(""+F).substr(0,13)&&F.substr(13).split(":")[0]in l?(I=F.substr(13).split(":"),O=I[1]?parseInt(I[1],10):0,N=l[I[0]]&&l[I[0]].iframe,L=getComputedStyle(N),$={iframe:N,id:I[0],height:O+i(L)+n(L),width:I[2],type:I[3]},G=$.id,l[G]&&(l[G].loaded=!0),(S=$.type in{true:1,false:1,undefined:1})&&v(G,"Ignoring init message from meta parent page"),!S&&function(e){var t=!0;return l[e]||(t=!1,y($.type+" No settings for "+e+". Message was: "+F)),t}(G)&&(v(G,"Received: "+F),C=!0,null===$.iframe&&(y(G,"IFrame ("+$.id+") not found"),C=!1),C&&function(){var t,i=e.origin,n=l[G]&&l[G].checkOrigin;if(n&&""+i!="null"&&!(n.constructor===Array?function(){var e=0,t=!1;for(v(G,"Checking connection is from allowed list of origins: "+n);e<n.length;e++)if(n[e]===i){t=!0;break}return t}():(t=l[G]&&l[G].remoteHost,v(G,"Checking connection is from: "+t),i===t)))throw new Error("Unexpected message received from: "+i+" for "+$.iframe.id+". Message was: "+e.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}()&&function(){switch(l[G]&&l[G].firstRun&&l[G]&&(l[G].firstRun=!1),$.type){case"close":x($.iframe);break;case"message":e=a(6),v(G,"onMessage passed: {iframe: "+$.iframe.id+", message: "+e+"}"),w("onMessage",{iframe:$.iframe,message:JSON.parse(e)}),v(G,"--");break;case"mouseenter":m("onMouseEnter");break;case"mouseleave":m("onMouseLeave");break;case"autoResize":l[G].autoResize=JSON.parse(a(9));break;case"scrollTo":h(!1);break;case"scrollToOffset":h(!0);break;case"pageInfo":c(l[G]&&l[G].iframe,G),function(){function e(e,n){function o(){l[i]?c(l[i].iframe,i):t()}["scroll","resize"].forEach(function(t){v(i,e+t+" listener for sendPageInfo"),n(window,t,o)})}function t(){e("Remove ",g)}var i=G;e("Add ",p),l[i]&&(l[i].stopPageInfo=t)}();break;case"pageInfoStop":l[G]&&l[G].stopPageInfo&&(l[G].stopPageInfo(),delete l[G].stopPageInfo);break;case"inPageLink":!function(e){var t,i=e.split("#")[1]||"",n=decodeURIComponent(i),o=document.getElementById(n)||document.getElementsByName(n)[0];o?(t=d(o),v(G,"Moving to in page link (#"+i+") at x: "+t.x+" y: "+t.y),r={x:t.x,y:t.y},f(),v(G,"--")):window.top!==window.self?window.parentIFrame?window.parentIFrame.moveToAnchor(i):v(G,"In page link #"+i+" not found and window.parentIFrame not found"):v(G,"In page link #"+i+" not found")}(a(9));break;case"reset":k($);break;case"init":t(),w("onInit",$.iframe);break;default:0===Number($.width)&&0===Number($.height)?y("Unsupported message received ("+$.type+"), this is likely due to the iframe containing a later version of iframe-resizer than the parent page"):t()}var e}())):b(G,"Ignored: "+F)}function _(e,t,i){var n=null,o=null;if(l[e]){if("function"!=typeof(n=l[e][t]))throw new TypeError(t+" on iFrame["+e+"] is not a function");o=n(i)}return o}function S(e){var t=e.id;delete l[t]}function x(e){var t=e.id;if(!1!==_(t,"onClose",t)){v(t,"Removing iFrame: "+t);try{e.parentNode&&e.parentNode.removeChild(e)}catch(e){y(e)}_(t,"onClosed",t),v(t,"--"),S(e)}else v(t,"Close iframe cancelled by onClose event")}function A(t){null===r&&v(t,"Get page position: "+(r={x:window.pageXOffset!==e?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==e?window.pageYOffset:document.documentElement.scrollTop}).x+","+r.y)}function E(e){null!==r&&(window.scrollTo(r.x,r.y),v(e,"Set page position: "+r.x+","+r.y),T())}function T(){r=null}function k(e){v(e.id,"Size reset requested by "+("init"===e.type?"host page":"iFrame")),A(e.id),M(function(){D(e),P("reset","reset",e.iframe,e.id)},e,"reset")}function D(e){function t(t){n||"0"!==e[t]||(n=!0,v(o,"Hidden iFrame detected, creating visibility listener"),function(){function e(){function e(e){function t(t){return"0px"===(l[e]&&l[e].iframe.style[t])}function i(e){return null!==e.offsetParent}l[e]&&i(l[e].iframe)&&(t("height")||t("width"))&&P("Visibility change","resize",l[e].iframe,e)}Object.keys(l).forEach(function(t){e(t)})}function t(t){v("window","Mutation observed: "+t[0].target+" "+t[0].type),O(e,16)}function i(){var e=document.querySelector("body"),i={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};new n(t).observe(e,i)}var n=h();n&&i()}())}function i(i){!function(t){e.id?(e.iframe.style[t]=e[t]+"px",v(e.id,"IFrame ("+o+") "+t+" set to "+e[t]+"px")):v("undefined","messageData id not set")}(i),t(i)}var o=e.iframe.id;l[o]&&(l[o].sizeHeight&&i("height"),l[o].sizeWidth&&i("width"))}function M(e,t,i){i!==t.type&&s&&!window.jasmine?(v(t.id,"Requesting animation frame"),s(e)):e()}function P(e,t,i,n,r){var s,a=!1;n=n||i.id,l[n]&&(i&&"contentWindow"in i&&null!==i.contentWindow?(s=l[n]&&l[n].targetOrigin,v(n,"["+e+"] Sending msg to iframe["+n+"] ("+t+") targetOrigin: "+s),i.contentWindow.postMessage(o+t,s)):y(n,"["+e+"] IFrame("+n+") not found"),r&&l[n]&&l[n].warningTimeout&&(l[n].msgTimeout=setTimeout(function(){!l[n]||l[n].loaded||a||(a=!0,y(n,"IFrame has not responded within "+l[n].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))},l[n].warningTimeout)))}function R(e){return e+":"+l[e].bodyMarginV1+":"+l[e].sizeWidth+":"+l[e].log+":"+l[e].interval+":"+l[e].enablePublicMethods+":"+l[e].autoResize+":"+l[e].bodyMargin+":"+l[e].heightCalculationMethod+":"+l[e].bodyBackground+":"+l[e].bodyPadding+":"+l[e].tolerance+":"+l[e].inPageLinks+":"+l[e].resizeFrom+":"+l[e].widthCalculationMethod+":"+l[e].mouseEvents}function I(n,o){function r(e){var t=e.split("Callback");if(2===t.length){var i="on"+t[0].charAt(0).toUpperCase()+t[0].slice(1);this[i]=this[e],delete this[e],y(s,"Deprecated: '"+e+"' has been renamed '"+i+"'. The old method will be removed in the next major version.")}}var s=function(e){var r;return""===e&&(n.id=(r=o&&o.id||d.id+t++,null!==document.getElementById(r)&&(r+=t++),e=r),i=(o||{}).log,v(e,"Added missing iframe ID: "+e+" ("+n.src+")")),e}(n.id);s in l&&"iFrameResizer"in n?y(s,"Ignored iFrame, already setup."):(!function(e){var t;e=e||{},l[s]={firstRun:!0,iframe:n,remoteHost:n.src&&n.src.split("/").slice(0,3).join("/")},function(e){if("object"!=typeof e)throw new TypeError("Options is not an object")}(e),Object.keys(e).forEach(r,e),function(e){for(var t in d)Object.prototype.hasOwnProperty.call(d,t)&&(l[s][t]=Object.prototype.hasOwnProperty.call(e,t)?e[t]:d[t])}(e),l[s]&&(l[s].targetOrigin=!0===l[s].checkOrigin?""===(t=l[s].remoteHost)||null!==t.match(/^(about:blank|javascript:|file:\/\/)/)?"*":t:"*")}(o),function(){switch(v(s,"IFrame scrolling "+(l[s]&&l[s].scrolling?"enabled":"disabled")+" for "+s),n.style.overflow=!1===(l[s]&&l[s].scrolling)?"hidden":"auto",l[s]&&l[s].scrolling){case"omit":break;case!0:n.scrolling="yes";break;case!1:n.scrolling="no";break;default:n.scrolling=l[s]?l[s].scrolling:"no"}}(),function(){function e(e){var t=l[s][e];1/0!==t&&0!==t&&(n.style[e]="number"==typeof t?t+"px":t,v(s,"Set "+e+" = "+n.style[e]))}function t(e){if(l[s]["min"+e]>l[s]["max"+e])throw new Error("Value for min"+e+" can not be greater than max"+e)}t("Height"),t("Width"),e("maxHeight"),e("minHeight"),e("maxWidth"),e("minWidth")}(),"number"!=typeof(l[s]&&l[s].bodyMargin)&&"0"!==(l[s]&&l[s].bodyMargin)||(l[s].bodyMarginV1=l[s].bodyMargin,l[s].bodyMargin=l[s].bodyMargin+"px"),function(t){var i=h();i&&function(e){n.parentNode&&new e(function(e){e.forEach(function(e){Array.prototype.slice.call(e.removedNodes).forEach(function(e){e===n&&x(n)})})}).observe(n.parentNode,{childList:!0})}(i),p(n,"load",function(){var i,o;P("iFrame.onload",t,n,e,!0),i=l[s]&&l[s].firstRun,o=l[s]&&l[s].heightCalculationMethod in a,!i&&o&&k({iframe:n,height:0,width:0,type:"init"})}),P("init",t,n,e,!0)}(R(s)),l[s]&&(l[s].iframe.iFrameResizer={close:x.bind(null,l[s].iframe),removeListeners:S.bind(null,l[s].iframe),resize:P.bind(null,"Window resize","resize",l[s].iframe),moveToAnchor:function(e){P("Move to anchor","moveToAnchor:"+e,l[s].iframe,s)},sendMessage:function(e){P("Send Message","message:"+(e=JSON.stringify(e)),l[s].iframe,s)}}))}function O(e,t){null===c&&(c=setTimeout(function(){c=null,e()},t))}function N(){"hidden"!==document.visibilityState&&(v("document","Trigger event: Visiblity change"),O(function(){L("Tab Visable","resize")},16))}function L(e,t){Object.keys(l).forEach(function(i){(function(e){return l[e]&&"parent"===l[e].resizeFrom&&l[e].autoResize&&!l[e].firstRun})(i)&&P(e,t,l[i].iframe,i)})}function F(){p(window,"message",C),p(window,"resize",function(){var e;v("window","Trigger event: "+(e="resize")),O(function(){L("Window "+e,"resize")},16)}),p(document,"visibilitychange",N),p(document,"-webkit-visibilitychange",N)}function $(){function t(e,t){t&&(!function(){if(!t.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==t.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+t.tagName+">")}(),I(t,e),i.push(t))}var i;return function(){var e,t=["moz","webkit","o","ms"];for(e=0;e<t.length&&!s;e+=1)s=window[t[e]+"RequestAnimationFrame"];s?s=s.bind(window):v("setup","RequestAnimationFrame not supported")}(),F(),function(n,o){switch(i=[],function(e){e&&e.enablePublicMethods&&y("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}(n),typeof o){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(o||"iframe"),t.bind(e,n));break;case"object":t(n,o);break;default:throw new TypeError("Unexpected data type ("+typeof o+")")}return i}}}(),function(e){function t(e){var t=document.createElement("input"),i="on"+e,n=i in t;return n||(t.setAttribute(i,"return;"),n="function"==typeof t[i]),t=null,n}function i(t,n,o){var r=o.aliases[t];return!!r&&(r.alias&&i(r.alias,void 0,o),e.extend(!0,o,r),e.extend(!0,o,n),!0)}function n(t,i){function n(i){function n(e,t,i,n){this.matches=[],this.isGroup=e||!1,this.isOptional=t||!1,this.isQuantifier=i||!1,this.isAlternator=n||!1,this.quantifier={min:1,max:1}}function o(i,n,o){var r=t.definitions[n],s=0==i.matches.length;if(o=null!=o?o:i.matches.length,r&&!h){r.placeholder=e.isFunction(r.placeholder)?r.placeholder.call(this,t):r.placeholder;for(var a=r.prevalidator,l=a?a.length:0,c=1;c<r.cardinality;c++){var d=l>=c?a[c-1]:[],u=d.validator,p=d.cardinality;i.matches.splice(o++,0,{fn:u?"string"==typeof u?new RegExp(u):new function(){this.test=u}:new RegExp("."),cardinality:p||1,optionality:i.isOptional,newBlockMarker:s,casing:r.casing,def:r.definitionSymbol||n,placeholder:r.placeholder,mask:n})}i.matches.splice(o++,0,{fn:r.validator?"string"==typeof r.validator?new RegExp(r.validator):new function(){this.test=r.validator}:new RegExp("."),cardinality:r.cardinality,optionality:i.isOptional,newBlockMarker:s,casing:r.casing,def:r.definitionSymbol||n,placeholder:r.placeholder,mask:n})}else i.matches.splice(o++,0,{fn:null,cardinality:0,optionality:i.isOptional,newBlockMarker:s,casing:null,def:n,placeholder:void 0,mask:n}),h=!1}for(var r,s,a,l,c,d,u=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})\??|[^.?*+^${[]()|\\]+|./g,h=!1,p=new n,g=[],f=[];r=u.exec(i);)switch(s=r[0],s.charAt(0)){case t.optionalmarker.end:case t.groupmarker.end:if(a=g.pop(),g.length>0){if((l=g[g.length-1]).matches.push(a),l.isAlternator){c=g.pop();for(var m=0;m<c.matches.length;m++)c.matches[m].isGroup=!1;g.length>0?(l=g[g.length-1]).matches.push(c):p.matches.push(c)}}else p.matches.push(a);break;case t.optionalmarker.start:g.push(new n(!1,!0));break;case t.groupmarker.start:g.push(new n(!0));break;case t.quantifiermarker.start:var v=new n(!1,!1,!0),b=(s=s.replace(/[{}]/g,"")).split(","),y=isNaN(b[0])?b[0]:parseInt(b[0]),w=1==b.length?y:isNaN(b[1])?b[1]:parseInt(b[1]);if(("*"==w||"+"==w)&&(y="*"==w?0:1),v.quantifier={min:y,max:w},g.length>0){var C=g[g.length-1].matches;if(!(r=C.pop()).isGroup)(_=new n(!0)).matches.push(r),r=_;C.push(r),C.push(v)}else{var _;if(!(r=p.matches.pop()).isGroup)(_=new n(!0)).matches.push(r),r=_;p.matches.push(r),p.matches.push(v)}break;case t.escapeChar:h=!0;break;case t.alternatormarker:g.length>0?d=(l=g[g.length-1]).matches.pop():d=p.matches.pop(),d.isAlternator?g.push(d):((c=new n(!1,!1,!1,!0)).matches.push(d),g.push(c));break;default:if(g.length>0){if((l=g[g.length-1]).matches.length>0&&!l.isAlternator&&((d=l.matches[l.matches.length-1]).isGroup&&(d.isGroup=!1,o(d,t.groupmarker.start,0),o(d,t.groupmarker.end))),o(l,s),l.isAlternator){c=g.pop();for(m=0;m<c.matches.length;m++)c.matches[m].isGroup=!1;g.length>0?(l=g[g.length-1]).matches.push(c):p.matches.push(c)}}else p.matches.length>0&&((d=p.matches[p.matches.length-1]).isGroup&&(d.isGroup=!1,o(d,t.groupmarker.start,0),o(d,t.groupmarker.end))),o(p,s)}return p.matches.length>0&&((d=p.matches[p.matches.length-1]).isGroup&&(d.isGroup=!1,o(d,t.groupmarker.start,0),o(d,t.groupmarker.end)),f.push(p)),f}function o(o,r){if(null!=o&&""!=o){if(1==o.length&&0==t.greedy&&0!=t.repeat&&(t.placeholder=""),t.repeat>0||"*"==t.repeat||"+"==t.repeat){var s="*"==t.repeat?0:"+"==t.repeat?1:t.repeat;o=t.groupmarker.start+o+t.groupmarker.end+t.quantifiermarker.start+s+","+t.repeat+t.quantifiermarker.end}var a;return null==e.inputmask.masksCache[o]||!0===i?(a={mask:o,maskToken:n(o),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},metadata:r},!0!==i&&(e.inputmask.masksCache[o]=a)):a=e.extend(!0,{},e.inputmask.masksCache[o]),a}}function r(e){if(e=e.toString(),t.numericInput){e=e.split("").reverse();for(var i=0;i<e.length;i++)e[i]==t.optionalmarker.start?e[i]=t.optionalmarker.end:e[i]==t.optionalmarker.end?e[i]=t.optionalmarker.start:e[i]==t.groupmarker.start?e[i]=t.groupmarker.end:e[i]==t.groupmarker.end&&(e[i]=t.groupmarker.start);e=e.join("")}return e}var s=void 0;if(e.isFunction(t.mask)&&(t.mask=t.mask.call(this,t)),e.isArray(t.mask)){if(t.mask.length>1){t.keepStatic=null==t.keepStatic||t.keepStatic;var a="(";return e.each(t.mask,function(t,i){a.length>1&&(a+=")|("),a+=r(null==i.mask||e.isFunction(i.mask)?i:i.mask)}),o(a+=")",t.mask)}t.mask=t.mask.pop()}return t.mask&&(s=null==t.mask.mask||e.isFunction(t.mask.mask)?o(r(t.mask),t.mask):o(r(t.mask.mask),t.mask)),s}function o(i,n,o){function r(e,t,i){t=t||0;var n,o,r,s=[],a=0;do{if(!0===e&&d().validPositions[a]){var l=d().validPositions[a];o=l.match,n=l.locator.slice(),s.push(!0===i?l.input:P(a,o))}else o=(r=f(a,n,a-1)).match,n=r.locator.slice(),s.push(P(a,o));a++}while((null==Z||Z>a-1)&&null!=o.fn||null==o.fn&&""!=o.def||t>=a);return s.pop(),s}function d(){return n}function u(e){var t=d();t.buffer=void 0,t.tests={},!0!==e&&(t._buffer=void 0,t.validPositions={},t.p=0)}function h(e,t){var i=-1,n=d().validPositions;null==e&&(e=-1);var o=i,r=i;for(var s in n){var a=parseInt(s);n[a]&&(t||null!=n[a].match.fn)&&(e>=a&&(o=a),a>=e&&(r=a))}return-1!=o&&e-o>1||e>r?o:r}function p(t,i,n){if(o.insertMode&&null!=d().validPositions[t]&&null==n){var r,s=e.extend(!0,{},d().validPositions),a=h();for(r=t;a>=r;r++)delete d().validPositions[r];d().validPositions[t]=i;var l,c=!0,u=d().validPositions;for(r=l=t;a>=r;r++){var p=s[r];if(null!=p)for(var g=l,f=-1;g<E()&&(null==p.match.fn&&u[r]&&(!0===u[r].match.optionalQuantifier||!0===u[r].match.optionality)||null!=p.match.fn);){if(null==p.match.fn||!o.keepStatic&&u[r]&&(null!=u[r+1]&&b(r+1,u[r].locator.slice(),r).length>1||null!=u[r].alternation)?g++:g=T(l),v(g,p.match.def)){c=!1!==x(g,p.input,!0,!0),l=g;break}if(c=null==p.match.fn,f==g)break;f=g}if(!c)break}if(!c)return d().validPositions=e.extend(!0,{},s),!1}else d().validPositions[t]=i;return!0}function g(e,t,i,n){var r,s=e;for(d().p=e,null!=d().validPositions[e]&&d().validPositions[e].input==o.radixPoint&&(t++,s++),r=s;t>r;r++)null!=d().validPositions[r]&&(!0===i||0!=o.canClearPosition(d(),r,h(),n,o))&&delete d().validPositions[r];for(u(!0),r=s+1;r<=h();){for(;null!=d().validPositions[s];)s++;var a=d().validPositions[s];s>r&&(r=s+1);var l=d().validPositions[r];null!=l&&null==a?(v(s,l.match.def)&&!1!==x(s,l.input,!0)&&(delete d().validPositions[r],r++),s++):r++}var c=h(),p=E();for(c>=e&&null!=d().validPositions[c]&&d().validPositions[c].input==o.radixPoint&&delete d().validPositions[c],r=c+1;p>=r;r++)d().validPositions[r]&&delete d().validPositions[r];u(!0)}function f(e,t,i){var n=d().validPositions[e];if(null==n)for(var r=b(e,t,i),s=h(),a=d().validPositions[s]||b(0)[0],l=null!=a.alternation?a.locator[a.alternation].toString().split(","):[],c=0;c<r.length&&!((n=r[c]).match&&(o.greedy&&!0!==n.match.optionalQuantifier||(!1===n.match.optionality||!1===n.match.newBlockMarker)&&!0!==n.match.optionalQuantifier)&&(null==a.alternation||a.alternation!=n.alternation||null!=n.locator[a.alternation]&&S(n.locator[a.alternation].toString().split(","),l)));c++);return n}function m(e){return d().validPositions[e]?d().validPositions[e].match:b(e)[0].match}function v(e,t){for(var i=!1,n=b(e),o=0;o<n.length;o++)if(n[o].match&&n[o].match.def==t){i=!0;break}return i}function b(t,i,n,o){function r(i,n,o,s){function l(o,s,p){if(a>1e4)return alert("jquery.inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+d().mask),!0;if(a==t&&null==o.matches)return c.push({match:o,locator:s.reverse()}),!0;if(null!=o.matches){if(o.isGroup&&!0!==p){if(o=l(i.matches[h+1],s))return!0}else if(o.isOptional){var g=o;if(o=r(o,n,s,p)){var f=c[c.length-1].match;if(!(0==e.inArray(f,g.matches)))return!0;u=!0,a=t}}else if(o.isAlternator){var m,v=o,b=[],y=c.slice(),w=s.length,C=n.length>0?n.shift():-1;if(-1==C||"string"==typeof C){var _=a,S=n.slice(),x=[];"string"==typeof C&&(x=C.split(","));for(var A=0;A<v.matches.length;A++){if(c=[],!0!==(o=l(v.matches[A],[A].concat(s),p)||o)&&null!=o&&x[x.length-1]<v.matches.length){var E=i.matches.indexOf(o)+1;i.matches.length>E&&((o=l(i.matches[E],[E].concat(s.slice(1,s.length)),p))&&(x.push(E.toString()),e.each(c,function(e,t){t.alternation=s.length-1})))}m=c.slice(),a=_,c=[];for(var T=0;T<S.length;T++)n[T]=S[T];for(var k=0;k<m.length;k++){var D=m[k];D.alternation=D.alternation||w;for(var M=0;M<b.length;M++){var P=b[M];if(D.match.mask==P.match.mask&&("string"!=typeof C||-1!=e.inArray(D.locator[D.alternation].toString(),x))){m.splice(k,1),k--,P.locator[D.alternation]=P.locator[D.alternation]+","+D.locator[D.alternation],P.alternation=D.alternation;break}}}b=b.concat(m)}"string"==typeof C&&(b=e.map(b,function(t,i){if(isFinite(i)){var n=t.alternation,o=t.locator[n].toString().split(",");t.locator[n]=void 0,t.alternation=void 0;for(var r=0;r<o.length;r++)-1!=e.inArray(o[r],x)&&(null!=t.locator[n]?(t.locator[n]+=",",t.locator[n]+=o[r]):t.locator[n]=parseInt(o[r]),t.alternation=n);if(null!=t.locator[n])return t}})),c=y.concat(b),a=t,u=c.length>0}else o=!!v.matches[C]&&l(v.matches[C],[C].concat(s),p);if(o)return!0}else if(o.isQuantifier&&!0!==p)for(var R=o,I=n.length>0&&!0!==p?n.shift():0;I<(isNaN(R.quantifier.max)?I+1:R.quantifier.max)&&t>=a;I++){var O=i.matches[e.inArray(R,i.matches)-1];if(o=l(O,[I].concat(s),!0)){if((f=c[c.length-1].match).optionalQuantifier=I>R.quantifier.min-1,0==e.inArray(f,O.matches)){if(I>R.quantifier.min-1){u=!0,a=t;break}return!0}return!0}}else if(o=r(o,n,s,p))return!0}else a++}for(var h=n.length>0?n.shift():0;h<i.matches.length;h++)if(!0!==i.matches[h].isQuantifier){var p=l(i.matches[h],[h].concat(o),s);if(p&&a==t)return p;if(a>t)break}}var s=d().maskToken,a=i?n:0,l=i||[0],c=[],u=!1;if(!0===o&&d().tests[t])return d().tests[t];if(null==i){for(var h,p=t-1;null==(h=d().validPositions[p])&&p>-1&&(!d().tests[p]||null==(h=d().tests[p][0]));)p--;null!=h&&p>-1&&(a=p,l=h.locator.slice())}for(var g=l.shift();g<s.length;g++){if(r(s[g],l,[g])&&a==t||a>t)break}return(0==c.length||u)&&c.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:""},locator:[]}),d().tests[t]=e.extend(!0,[],c),d().tests[t]}function y(){return null==d()._buffer&&(d()._buffer=r(!1,1)),d()._buffer}function w(){return null==d().buffer&&(d().buffer=r(!0,h(),!0)),d().buffer}function C(e,t,i){if(i=i||w().slice(),!0===e)u(),e=0,t=i.length;else for(var n=e;t>n;n++)delete d().validPositions[n],delete d().tests[n];for(n=e;t>n;n++)i[n]!=o.skipOptionalPartCharacter&&x(n,i[n],!0,!0)}function _(e,t){switch(t.casing){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e}function S(t,i){for(var n=o.greedy?i:i.slice(0,1),r=!1,s=0;s<t.length;s++)if(-1!=e.inArray(t[s],n)){r=!0;break}return r}function x(t,i,n,r){function s(t,i,n,r){var s=!1;return e.each(b(t),function(a,l){for(var c=l.match,f=i?1:0,m="",v=(w(),c.cardinality);v>f;v--)m+=D(t-(v-1));if(i&&(m+=i),!1!==(s=null!=c.fn?c.fn.test(m,d(),t,n,o):(i==c.def||i==o.skipOptionalPartCharacter)&&""!=c.def&&{c:c.def,pos:t})){var b=null!=s.c?s.c:i;b=b==o.skipOptionalPartCharacter&&null===c.fn?c.def:b;var y=t,S=w();if(null!=s.remove&&(e.isArray(s.remove)||(s.remove=[s.remove]),e.each(s.remove.sort(function(e,t){return t-e}),function(e,t){g(t,t+1,!0)})),null!=s.insert&&(e.isArray(s.insert)||(s.insert=[s.insert]),e.each(s.insert.sort(function(e,t){return e-t}),function(e,t){x(t.pos,t.c,!0)})),s.refreshFromBuffer){var A=s.refreshFromBuffer;if(n=!0,C(!0===A?A:A.start,A.end,S),null==s.pos&&null==s.c)return s.pos=h(),!1;if((y=null!=s.pos?s.pos:t)!=t)return s=e.extend(s,x(y,b,!0)),!1}else if(!0!==s&&null!=s.pos&&s.pos!=t&&(y=s.pos,C(t,y),y!=t))return s=e.extend(s,x(y,b,!0)),!1;return 1!=s&&null==s.pos&&null==s.c||(a>0&&u(!0),p(y,e.extend({},l,{input:_(b,c)}),r)||(s=!1)),!1}}),s}function a(t,i){for(var n=d().validPositions[i].locator,o=n.length,r=t;i>r;r++)if(!A(r)){var s=b(r),a=s[0],l=-1;e.each(s,function(e,t){for(var i=0;o>i;i++)t.locator[i]&&S(t.locator[i].toString().split(","),n[i].toString().split(","))&&i>l&&(l=i,a=t)}),p(r,e.extend({},a,{input:a.match.def}),!0)}}n=!0===n;for(var l=w(),c=t-1;c>-1&&!d().validPositions[c];c--);for(c++;t>c;c++)null==d().validPositions[c]&&((!A(c)||l[c]!=P(c))&&b(c).length>1||l[c]==o.radixPoint||"0"==l[c]&&e.inArray(o.radixPoint,l)<c)&&s(c,l[c],!0);var m=t,v=!1,y=e.extend(!0,{},d().validPositions);if(m<E()&&(v=s(m,i,n,r),(!n||r)&&!1===v)){var k=d().validPositions[m];if(!k||null!=k.match.fn||k.match.def!=i&&i!=o.skipOptionalPartCharacter){if((o.insertMode||null==d().validPositions[T(m)])&&!A(m))for(var M=m+1,R=T(m);R>=M;M++)if(!1!==(v=s(M,i,n,r))){a(m,M),m=M;break}}else v={caret:T(m)}}if((!1===v&&o.keepStatic&&$(l)&&(v=function(t,i,n,r){for(var s,a,l,c,p=e.extend(!0,{},d().validPositions),g=h();g>=0&&(!(c=d().validPositions[g])||null==c.alternation||(s=g,a=d().validPositions[s].alternation,f(s).locator[c.alternation]==c.locator[c.alternation]));g--);if(null!=a)for(var m in d().validPositions)if(c=d().validPositions[m],parseInt(m)>parseInt(s)&&null!=c.alternation){var v=d().validPositions[s].locator[a].toString().split(","),b=c.locator[a]||v[0];b.length>0&&(b=b.split(",")[0]);for(var y=0;y<v.length;y++)if(b<v[y]){for(var w,C,_=m-1;_>=0;_--)if(null!=(w=d().validPositions[_])){C=w.locator[a],w.locator[a]=parseInt(v[y]);break}if(b!=w.locator[a]){for(var S=[],A=m;A<h()+1;A++){var E=d().validPositions[A];E&&null!=E.match.fn&&S.push(E.input),delete d().validPositions[A],delete d().tests[A]}for(u(!0),o.keepStatic=!o.keepStatic,l=!0;S.length>0;){var T=S.shift();if(T!=o.skipOptionalPartCharacter&&!(l=x(h()+1,T,!1,!0)))break}if(w.alternation=a,w.locator[a]=C,l){var k=h(t)+1;l=x(t>k?k:t,i,n,r)}if(o.keepStatic=!o.keepStatic,l)return l;u(),d().validPositions=e.extend(!0,{},p)}}break}return!1}(t,i,n,r)),!0===v&&(v={pos:m}),e.isFunction(o.postValidation)&&0!=v&&!n)&&(u(!0),!o.postValidation(w(),o)))return u(!0),d().validPositions=e.extend(!0,{},y),!1;return v}function A(e){var t=m(e);if(null!=t.fn)return t.fn;if(!o.keepStatic&&null==d().validPositions[e]){for(var i=b(e),n=!0,r=0;r<i.length;r++)if(""!=i[r].match.def&&(null==i[r].alternation||i[r].locator[i[r].alternation].length>1)){n=!1;break}return n}return!1}function E(){var e;-1==(Z=X.prop("maxLength"))&&(Z=void 0);var t,i=h(),n=d().validPositions[i],o=null!=n?n.locator.slice():void 0;for(t=i+1;null==n||null!=n.match.fn||null==n.match.fn&&""!=n.match.def;t++)o=(n=f(t,o,t-1)).locator.slice();return e=""!=m(t-1).def?t:t-1,null==Z||Z>e?e:Z}function T(e){var t=E();if(e>=t)return t;for(var i=e;++i<t&&!A(i)&&(!0!==o.nojumps||o.nojumpsThreshold>i););return i}function k(e){var t=e;if(0>=t)return 0;for(;--t>0&&!A(t););return t}function D(e){return null==d().validPositions[e]?P(e):d().validPositions[e].input}function M(t,i,n,r,s){if(r&&e.isFunction(o.onBeforeWrite)){var a=o.onBeforeWrite.call(t,r,i,n,o);if(a){if(a.refreshFromBuffer){var l=a.refreshFromBuffer;C(!0===l?l:l.start,l.end,a.buffer),u(!0),i=w()}n=a.caret||n}}t._valueSet(i.join("")),null!=n&&N(t,n),!0===s&&(ee=!0,e(t).trigger("input"))}function P(e,t){if(null!=(t=t||m(e)).placeholder)return t.placeholder;if(null==t.fn){if(!o.keepStatic&&null==d().validPositions[e]){for(var i=b(e),n=!0,r=0;r<i.length;r++)if(""!=i[r].match.def&&(null!==i[r].match.fn||null==i[r].alternation||i[r].locator[i[r].alternation].length>1)){n=!1;break}if(n)return o.placeholder.charAt(e%o.placeholder.length)}return t.def}return o.placeholder.charAt(e%o.placeholder.length)}function R(t,i,n,o){var r,s=null!=o?o.slice():t._valueGet().split(""),a="",l=0;if(u(),d().p=T(-1),i&&t._valueSet(""),!n){var c=y().slice(0,T(-1)).join(""),p=s.join("").match(new RegExp("^"+(r=c,e.inputmask.escapeRegex(r)),"g"));p&&p.length>0&&(s.splice(0,p.length*c.length),l=T(l))}e.each(s,function(i,o){var r=e.Event("keypress");r.which=o.charCodeAt(0),a+=o;var s=h(void 0,!0),c=d().validPositions[s],u=f(s+1,c?c.locator.slice():void 0,s);if(!function(){var e=!1,t=y().slice(l,T(l)).join("").indexOf(a);if(-1!=t&&!A(l)){e=!0;for(var i=y().slice(l,l+t),n=0;n<i.length;n++)if(" "!=i[n]){e=!1;break}}return e}()||n){var p=n?i:null==u.match.fn&&u.match.optionality&&s+1<d().p?s+1:d().p;H.call(t,r,!0,!1,n,p),l=p+1,a=""}else H.call(t,r,!0,!1,!0,s+1)}),i&&M(t,w(),e(t).is(":focus")?T(h(0)):void 0,e.Event("checkval"))}function I(t){if(t.data("_inputmask")&&!t.hasClass("hasDatepicker")){var i=[],n=d().validPositions;for(var r in n)n[r].match&&null!=n[r].match.fn&&i.push(n[r].input);var s=(J?i.reverse():i).join(""),a=(J?w().slice().reverse():w()).join("");return e.isFunction(o.onUnMask)&&(s=o.onUnMask.call(t,a,s,o)||s),s}return t[0]._valueGet()}function O(e){!J||"number"!=typeof e||o.greedy&&""==o.placeholder||(e=w().length-e);return e}function N(t,i,n){var r,s=t.jquery&&t.length>0?t[0]:t;if("number"!=typeof i)return s.setSelectionRange?(i=s.selectionStart,n=s.selectionEnd):window.getSelection?((r=window.getSelection().getRangeAt(0)).commonAncestorContainer.parentNode==s||r.commonAncestorContainer==s)&&(i=r.startOffset,n=r.endOffset):document.selection&&document.selection.createRange&&(n=(i=0-(r=document.selection.createRange()).duplicate().moveStart("character",-1e5))+r.text.length),{begin:O(i),end:O(n)};if(i=O(i),n="number"==typeof(n=O(n))?n:i,e(s).is(":visible")){var l=e(s).css("font-size").replace("px","")*n;if(s.scrollLeft=l>s.scrollWidth?l:0,a||0!=o.insertMode||i!=n||n++,s.setSelectionRange)s.selectionStart=i,s.selectionEnd=n;else if(window.getSelection){if(r=document.createRange(),null==s.firstChild){var c=document.createTextNode("");s.appendChild(c)}r.setStart(s.firstChild,i<s._valueGet().length?i:s._valueGet().length),r.setEnd(s.firstChild,n<s._valueGet().length?n:s._valueGet().length),r.collapse(!0);var d=window.getSelection();d.removeAllRanges(),d.addRange(r)}else s.createTextRange&&((r=s.createTextRange()).collapse(!0),r.moveEnd("character",n),r.moveStart("character",i),r.select())}}function L(t){var i,n,o=w(),r=o.length,s=h(),a={},l=d().validPositions[s],c=null!=l?l.locator.slice():void 0;for(i=s+1;i<o.length;i++)c=(n=f(i,c,i-1)).locator.slice(),a[i]=e.extend(!0,{},n);var u=l&&null!=l.alternation?l.locator[l.alternation]:void 0;for(i=r-1;i>s&&(((n=a[i]).match.optionality||n.match.optionalQuantifier||u&&(u!=a[i].locator[l.alternation]&&null!=n.match.fn||null==n.match.fn&&n.locator[l.alternation]&&S(n.locator[l.alternation].toString().split(","),u.split(","))&&""!=b(i)[0].def))&&o[i]==P(i,n.match));i--)r--;return t?{l:r,def:a[r]?a[r].match:void 0}:r}function F(e){for(var t=L(),i=e.length-1;i>t&&!A(i);i--);return e.splice(t,i+1-t),e}function $(t){if(e.isFunction(o.isComplete))return o.isComplete.call(X,t,o);if("*"!=o.repeat){var i=!1,n=L(!0),r=k(n.l);if(h(),null==n.def||n.def.newBlockMarker||n.def.optionality||n.def.optionalQuantifier){i=!0;for(var s=0;r>=s;s++){var a=f(s).match;if(null!=a.fn&&null==d().validPositions[s]&&!0!==a.optionality&&!0!==a.optionalQuantifier||null==a.fn&&t[s]!=P(s,a)){i=!1;break}}}return i}}function G(t,i,n,r){if((o.numericInput||J)&&(i==e.inputmask.keyCode.BACKSPACE?i=e.inputmask.keyCode.DELETE:i==e.inputmask.keyCode.DELETE&&(i=e.inputmask.keyCode.BACKSPACE),J)){var s=n.end;n.end=n.begin,n.begin=s}if(i==e.inputmask.keyCode.BACKSPACE&&(n.end-n.begin<1||0==o.insertMode)?n.begin=k(n.begin):i==e.inputmask.keyCode.DELETE&&n.begin==n.end&&(n.end=A(n.end)?n.end+1:T(n.end)+1),g(n.begin,n.end,!1,r),!0!==r){!function(){if(o.keepStatic){u(!0);var i,n=[],r=e.extend(!0,{},d().validPositions);for(i=h();i>=0;i--){var s=d().validPositions[i];if(s){if(null!=s.alternation&&s.locator[s.alternation]==f(i).locator[s.alternation])break;null!=s.match.fn&&n.push(s.input),delete d().validPositions[i]}}if(i>0)for(;n.length>0;){d().p=T(h());var a=e.Event("keypress");a.which=n.pop().charCodeAt(0),H.call(t,a,!0,!1,!1,d().p)}else d().validPositions=e.extend(!0,{},r)}}();var a=h(n.begin);a<n.begin?(-1==a&&u(),d().p=T(a)):d().p=n.begin}}function B(i){var n=this,r=e(n),a=i.keyCode,l=N(n);a==e.inputmask.keyCode.BACKSPACE||a==e.inputmask.keyCode.DELETE||s&&127==a||i.ctrlKey&&88==a&&!t("cut")?(i.preventDefault(),88==a&&(Y=w().join("")),G(n,a,l),M(n,w(),d().p,i,Y!=w().join("")),n._valueGet()==y().join("")?r.trigger("cleared"):!0===$(w())&&r.trigger("complete"),o.showTooltip&&r.prop("title",d().mask)):a==e.inputmask.keyCode.END||a==e.inputmask.keyCode.PAGE_DOWN?setTimeout(function(){var e=T(h());o.insertMode||e!=E()||i.shiftKey||e--,N(n,i.shiftKey?l.begin:e,e)},0):a==e.inputmask.keyCode.HOME&&!i.shiftKey||a==e.inputmask.keyCode.PAGE_UP?N(n,0,i.shiftKey?l.begin:0):(o.undoOnEscape&&a==e.inputmask.keyCode.ESCAPE||90==a&&i.ctrlKey)&&!0!==i.altKey?(R(n,!0,!1,Y.split("")),r.click()):a!=e.inputmask.keyCode.INSERT||i.shiftKey||i.ctrlKey?0!=o.insertMode||i.shiftKey||(a==e.inputmask.keyCode.RIGHT?setTimeout(function(){var e=N(n);N(n,e.begin)},0):a==e.inputmask.keyCode.LEFT&&setTimeout(function(){var e=N(n);N(n,J?e.begin+1:e.begin-1)},0)):(o.insertMode=!o.insertMode,N(n,o.insertMode||l.begin!=E()?l.begin:l.begin-1)),o.onKeyDown.call(this,i,w(),N(n).begin,o),te=-1!=e.inArray(a,o.ignorables)}function H(t,i,n,r,s){var a,l,c=this,h=e(c),g=t.which||t.charCode||t.keyCode;if(!(!0===i||t.ctrlKey&&t.altKey)&&(t.ctrlKey||t.metaKey||te))return!0;if(g){46==g&&0==t.shiftKey&&","==o.radixPoint&&(g=44);var f,m=i?{begin:s,end:s}:N(c),v=String.fromCharCode(g),y=(a=m.begin,l=m.end,J?a-l>1||a-l==1&&o.insertMode:l-a>1||l-a==1&&o.insertMode);y&&(d().undoPositions=e.extend(!0,{},d().validPositions),G(c,e.inputmask.keyCode.DELETE,m,!0),m.begin=d().p,o.insertMode||(o.insertMode=!o.insertMode,p(m.begin,r),o.insertMode=!o.insertMode),y=!o.multi),d().writeOutBuffer=!0;var _=J&&!y?m.end:m.begin,S=x(_,v,r);if(!1!==S){if(!0!==S&&(_=null!=S.pos?S.pos:_,v=null!=S.c?S.c:v),u(!0),null!=S.caret)f=S.caret;else{var A=d().validPositions;f=!o.keepStatic&&(null!=A[_+1]&&b(_+1,A[_].locator.slice(),_).length>1||null!=A[_].alternation)?_+1:T(_)}d().p=f}if(!1!==n){var E=this;if(setTimeout(function(){o.onKeyValidation.call(E,S,o)},0),d().writeOutBuffer&&!1!==S){var D=w();M(c,D,i?void 0:o.numericInput?k(f):f,t,!0!==i),!0!==i&&setTimeout(function(){!0===$(D)&&h.trigger("complete")},0)}else y&&(d().buffer=void 0,d().validPositions=d().undoPositions)}else y&&(d().buffer=void 0,d().validPositions=d().undoPositions);if(o.showTooltip&&h.prop("title",d().mask),i&&e.isFunction(o.onBeforeWrite)){var P=o.onBeforeWrite.call(this,t,w(),f,o);if(P&&P.refreshFromBuffer){var R=P.refreshFromBuffer;C(!0===R?R:R.start,R.end,P.buffer),u(!0),P.caret&&(d().p=P.caret)}}t.preventDefault()}}function z(t){var i=this,n=e(i),r=i._valueGet(!0),s=N(i);if("propertychange"==t.type&&i._valueGet().length<=E())return!0;if("paste"==t.type){var a=r.substr(0,s.begin),l=r.substr(s.end,r.length);a==y().slice(0,s.begin).join("")&&(a=""),l==y().slice(s.end).join("")&&(l=""),window.clipboardData&&window.clipboardData.getData?r=a+window.clipboardData.getData("Text")+l:t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.getData&&(r=a+t.originalEvent.clipboardData.getData("text/plain")+l)}var c=r;if(e.isFunction(o.onBeforePaste)){if(!1===(c=o.onBeforePaste.call(i,r,o)))return t.preventDefault(),!1;c||(c=r)}return R(i,!0,!1,J?c.split("").reverse():c.split("")),n.click(),!0===$(w())&&n.trigger("complete"),!1}function W(t){R(this,!0,!1),!0===$(w())&&e(this).trigger("complete"),t.preventDefault()}function V(e){Y=w().join(""),(""==K||0!=e.originalEvent.data.indexOf(K))&&(q=N(this))}function j(t){var i=this,n=q||N(i);0==t.originalEvent.data.indexOf(K)&&(u(),n={begin:0,end:0});var r=t.originalEvent.data;N(i,n.begin,n.end);for(var s=0;s<r.length;s++){var a=e.Event("keypress");a.which=r.charCodeAt(s),Q=!1,te=!1,H.call(i,a)}setTimeout(function(){var e=d().p;M(i,w(),o.numericInput?k(e):e)},0),K=t.originalEvent.data}function U(e){}var Y,q,K,X,Z,J=!1,Q=!1,ee=!1,te=!1,ie=!0;if(null!=i)switch(i.action){case"isComplete":return X=e(i.el),n=X.data("_inputmask").maskset,o=X.data("_inputmask").opts,$(i.buffer);case"unmaskedvalue":return X=i.$input,n=X.data("_inputmask").maskset,o=X.data("_inputmask").opts,J=i.$input.data("_inputmask").isRTL,I(i.$input);case"mask":Y=w().join(""),function(t){if((X=e(t)).data("_inputmask",{maskset:n,opts:o,isRTL:!1}),o.showTooltip&&X.prop("title",d().mask),("rtl"==t.dir||o.rightAlign)&&X.css("text-align","right"),"rtl"==t.dir||o.numericInput){t.dir="ltr",X.removeAttr("dir");var i=X.data("_inputmask");i.isRTL=!0,X.data("_inputmask",i),J=!0}X.unbind(".inputmask"),(X.is(":input")&&function(e){var t="text"==e||"tel"==e||"password"==e;if(!t){var i=document.createElement("input");i.setAttribute("type",e),t="text"===i.type,i=null}return t}(X.attr("type"))||t.isContentEditable)&&(X.closest("form").bind("submit",function(e){Y!=w().join("")&&X.change(),X[0]._valueGet&&X[0]._valueGet()==y().join("")&&X[0]._valueSet(""),o.removeMaskOnSubmit&&X.inputmask("remove")}).bind("reset",function(){setTimeout(function(){X.triggerHandler("setvalue.inputmask")},0)}),X.bind("mouseenter.inputmask",function(){!e(this).is(":focus")&&o.showMaskOnHover&&this._valueGet()!=w().join("")&&M(this,w())}).bind("blur.inputmask",function(t){var i=e(this);if(i.data("_inputmask")){var n=this._valueGet(),r=w().slice();ie=!0,Y!=r.join("")&&setTimeout(function(){i.change(),Y=r.join("")},0),""!=n&&(o.clearMaskOnLostFocus&&(n==y().join("")?r=[]:F(r)),!1===$(r)&&(i.trigger("incomplete"),o.clearIncomplete&&(u(),r=o.clearMaskOnLostFocus?[]:y().slice())),M(this,r,void 0,t))}}).bind("focus.inputmask",function(t){var i=(e(this),this),n=i._valueGet();o.showMaskOnFocus&&(!o.showMaskOnHover||o.showMaskOnHover&&""==n)&&i._valueGet()!=w().join("")&&M(i,w(),T(h())),Y=w().join("")}).bind("mouseleave.inputmask",function(){var t=e(this);if(o.clearMaskOnLostFocus){var i=w().slice(),n=this._valueGet();t.is(":focus")||n==t.attr("placeholder")||""==n||(n==y().join("")?i=[]:F(i),M(this,i))}}).bind("click.inputmask",function(){var t=this;if(e(this).is(":focus")){var i=N(t);if(i.begin==i.end)if(o.radixFocus&&""!=o.radixPoint&&-1!=e.inArray(o.radixPoint,w())&&(ie||w().join("")==y().join("")))N(t,e.inArray(o.radixPoint,w())),ie=!1;else{var n=O(i.begin),r=T(h(n));N(t,r>n?A(n)?n:T(n):r)}}}).bind("dblclick.inputmask",function(){var e=this;setTimeout(function(){N(e,0,T(h()))},0)}).bind(c+".inputmask dragdrop.inputmask drop.inputmask",z).bind("cut.inputmask",function(t){ee=!0;var i=this,n=e(i),r=N(i);G(i,e.inputmask.keyCode.DELETE,r),M(i,w(),d().p,t,Y!=w().join("")),i._valueGet()==y().join("")&&n.trigger("cleared"),o.showTooltip&&n.prop("title",d().mask)}).bind("complete.inputmask",o.oncomplete).bind("incomplete.inputmask",o.onincomplete).bind("cleared.inputmask",o.oncleared),X.bind("keydown.inputmask",B).bind("keypress.inputmask",H),l||X.bind("compositionstart.inputmask",V).bind("compositionupdate.inputmask",j).bind("compositionend.inputmask",U),"paste"===c&&X.bind("input.inputmask",W)),X.bind("setvalue.inputmask",function(){var t=this,i=t._valueGet();t._valueSet(e.isFunction(o.onBeforeMask)&&o.onBeforeMask.call(t,i,o)||i),R(t,!0,!1),Y=w().join(""),(o.clearMaskOnLostFocus||o.clearIncomplete)&&t._valueGet()==y().join("")&&t._valueSet("")}),function(t){function i(){var t=e(this),i=e(this).data("_inputmask");return i?i.opts.autoUnmask?t.inputmask("unmaskedvalue"):o.call(this)!=y().join("")?o.call(this):"":o.call(this)}function n(t){var i=e(this).data("_inputmask");r.call(this,t),i&&e(this).triggerHandler("setvalue.inputmask")}var o,r,s;t._valueGet||(Object.getOwnPropertyDescriptor&&null==t.value?(o=function(){return this.textContent},r=function(e){this.textContent=e},Object.defineProperty(t,"value",{get:i,set:n})):((s=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(t,"value"))&&s.configurable,document.__lookupGetter__&&t.__lookupGetter__("value")?(o=t.__lookupGetter__("value"),r=t.__lookupSetter__("value"),t.__defineGetter__("value",i),t.__defineSetter__("value",n)):(o=function(){return t.value},r=function(e){t.value=e},function(t){if(null==e.valHooks[t]||1!=e.valHooks[t].inputmaskpatch){var i=e.valHooks[t]&&e.valHooks[t].get?e.valHooks[t].get:function(e){return e.value},n=e.valHooks[t]&&e.valHooks[t].set?e.valHooks[t].set:function(e,t){return e.value=t,e};e.valHooks[t]={get:function(t){var n=e(t);if(n.data("_inputmask")){if(n.data("_inputmask").opts.autoUnmask)return n.inputmask("unmaskedvalue");var o=i(t),r=n.data("_inputmask").maskset._buffer;return o!=(r=r?r.join(""):"")?o:""}return i(t)},set:function(t,i){var o,r=e(t),s=r.data("_inputmask");return o=n(t,i),s&&r.triggerHandler("setvalue.inputmask"),o},inputmaskpatch:!0}}}(t.type),function(t){e(t).bind("mouseenter.inputmask",function(t){var i=e(this),n=this._valueGet();""!=n&&n!=w().join("")&&i.triggerHandler("setvalue.inputmask")});var i=e._data(t).events.mouseover;if(i){for(var n=i[i.length-1],o=i.length-1;o>0;o--)i[o]=i[o-1];i[0]=n}}(t))),t._valueGet=function(e){return J&&!0!==e?o.call(this).split("").reverse().join(""):o.call(this)},t._valueSet=function(e){r.call(this,J?e.split("").reverse().join(""):e)})}(t);var r=e.isFunction(o.onBeforeMask)&&o.onBeforeMask.call(t,t._valueGet(),o)||t._valueGet();R(t,!0,!1,r.split(""));var s,a,p,g,f=w().slice();Y=f.join("");try{s=document.activeElement}catch(e){}!1===$(f)&&o.clearIncomplete&&u(),o.clearMaskOnLostFocus&&(f.join("")==y().join("")?f=[]:F(f)),M(t,f),s===t&&N(t,T(h())),a=t,p=e._data(a).events,g=!1,e.each(p,function(t,i){e.each(i,function(t,i){if("inputmask"==i.namespace&&"setvalue"!=i.type){var n=i.handler;i.handler=function(t){if(!(this.disabled||this.readOnly&&!("keydown"==t.type&&t.ctrlKey&&67==t.keyCode||t.keyCode==e.inputmask.keyCode.TAB))){switch(t.type){case"input":if(!0===ee||!0===g)return ee=!1,t.preventDefault();break;case"keydown":Q=!1,g=!1;break;case"keypress":if(!0===Q)return t.preventDefault();Q=!0;break;case"compositionstart":g=!0;break;case"compositionupdate":ee=!0;break;case"compositionend":g=!1}return n.apply(this,arguments)}t.preventDefault()}}})})}(i.el);break;case"format":(X=e({})).data("_inputmask",{maskset:n,opts:o,isRTL:o.numericInput}),o.numericInput&&(J=!0);var ne=(e.isFunction(o.onBeforeMask)&&o.onBeforeMask.call(X,i.value,o)||i.value).split("");return R(X,!1,!1,J?ne.reverse():ne),e.isFunction(o.onBeforeWrite)&&o.onBeforeWrite.call(this,void 0,w(),0,o),i.metadata?{value:J?w().slice().reverse().join(""):w().join(""),metadata:X.inputmask("getmetadata")}:J?w().slice().reverse().join(""):w().join("");case"isValid":(X=e({})).data("_inputmask",{maskset:n,opts:o,isRTL:o.numericInput}),o.numericInput&&(J=!0);ne=i.value.split("");R(X,!1,!0,J?ne.reverse():ne);for(var oe=w(),re=L(),se=oe.length-1;se>re&&!A(se);se--);return oe.splice(re,se+1-re),$(oe)&&i.value==oe.join("");case"getemptymask":return X=e(i.el),n=X.data("_inputmask").maskset,o=X.data("_inputmask").opts,y();case"remove":var ae,le=i.el;X=e(le),n=X.data("_inputmask").maskset,o=X.data("_inputmask").opts,le._valueSet(I(X)),X.unbind(".inputmask"),X.removeData("_inputmask"),Object.getOwnPropertyDescriptor&&(ae=Object.getOwnPropertyDescriptor(le,"value")),ae&&ae.get?le._valueGet&&Object.defineProperty(le,"value",{get:le._valueGet,set:le._valueSet}):document.__lookupGetter__&&le.__lookupGetter__("value")&&le._valueGet&&(le.__defineGetter__("value",le._valueGet),le.__defineSetter__("value",le._valueSet));try{delete le._valueGet,delete le._valueSet}catch(e){le._valueGet=void 0,le._valueSet=void 0}break;case"getmetadata":if(X=e(i.el),n=X.data("_inputmask").maskset,o=X.data("_inputmask").opts,e.isArray(n.metadata)){for(var ce,de=h(),ue=de;ue>=0;ue--)if(d().validPositions[ue]&&null!=d().validPositions[ue].alternation){ce=d().validPositions[ue].alternation;break}return null!=ce?n.metadata[d().validPositions[de].locator[ce]]:n.metadata[0]}return n.metadata}}if(void 0===e.fn.inputmask){var r=navigator.userAgent,s=null!==r.match(new RegExp("iphone","i")),a=(r.match(new RegExp("android.*safari.*","i")),null!==r.match(new RegExp("android.*chrome.*","i"))),l=null!==r.match(new RegExp("android.*firefox.*","i")),c=(/Kindle/i.test(r)||/Silk/i.test(r)||/KFTT/i.test(r)||/KFOT/i.test(r)||/KFJWA/i.test(r)||/KFJWI/i.test(r)||/KFSOWI/i.test(r)||/KFTHWA/i.test(r)||/KFTHWI/i.test(r)||/KFAPWA/i.test(r)||/KFAPWI/i.test(r),t("paste")?"paste":t("input")?"input":"propertychange");e.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:null,onKeyDown:e.noop,onBeforeMask:void 0,onBeforePaste:void 0,onBeforeWrite:void 0,onUnMask:void 0,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:e.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",radixFocus:!1,nojumps:!1,nojumpsThreshold:0,keepStatic:void 0,definitions:{9:{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1}},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:void 0,canClearPosition:e.noop,postValidation:void 0},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},masksCache:{},escapeRegex:function(e){return e.replace(new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"].join("|\\")+")","gim"),"\\$1")},format:function(t,r,s){var a=e.extend(!0,{},e.inputmask.defaults,r);return i(a.alias,r,a),o({action:"format",value:t,metadata:s},n(a,r&&void 0!==r.definitions),a)},isValid:function(t,r){var s=e.extend(!0,{},e.inputmask.defaults,r);return i(s.alias,r,s),o({action:"isValid",value:t},n(s,r&&void 0!==r.definitions),s)}},e.fn.inputmask=function(t,r){function s(t,n,o){var r=e(t);for(var s in r.data("inputmask-alias")&&i(r.data("inputmask-alias"),e.extend(!0,{},n),n),n){var a=r.data("inputmask-"+s.toLowerCase());null!=a&&(a="boolean"==typeof a?a:a.toString(),"mask"==s&&0==a.indexOf("[")?(n[s]=a.replace(/[\s[\]]/g,"").split("','"),n[s][0]=n[s][0].replace("'",""),n[s][n[s].length-1]=n[s][n[s].length-1].replace("'","")):n[s]=a,o&&(o[s]=n[s]))}return n}var a,l=e.extend(!0,{},e.inputmask.defaults,r);if("string"==typeof t)switch(t){case"mask":return i(l.alias,r,l),this.each(function(){return s(this,l),null==(a=n(l,r&&void 0!==r.definitions))?this:void o({action:"mask",el:this},a,l)});case"unmaskedvalue":var c=e(this);return c.data("_inputmask")?o({action:"unmaskedvalue",$input:c}):c.val();case"remove":return this.each(function(){e(this).data("_inputmask")&&o({action:"remove",el:this})});case"getemptymask":return this.data("_inputmask")?o({action:"getemptymask",el:this}):"";case"hasMaskedValue":return!!this.data("_inputmask")&&!this.data("_inputmask").opts.autoUnmask;case"isComplete":return!this.data("_inputmask")||o({action:"isComplete",buffer:this[0]._valueGet().split(""),el:this});case"getmetadata":return this.data("_inputmask")?o({action:"getmetadata",el:this}):void 0;default:return i(l.alias,r,l),i(t,r,l)||(l.mask=t),this.each(function(){return s(this,l),null==(a=n(l,r&&void 0!==r.definitions))?this:void o({action:"mask",el:this},a,l)})}else{if("object"==typeof t)return i((l=e.extend(!0,{},e.inputmask.defaults,t)).alias,t,l),this.each(function(){return s(this,l),null==(a=n(l,t&&void 0!==t.definitions))?this:void o({action:"mask",el:this},a,l)});if(null==t)return this.each(function(){var t=e(this).attr("data-inputmask");if(t&&""!=t)try{t=t.replace(new RegExp("'","g"),'"');var n=e.parseJSON("{"+t+"}");e.extend(!0,n,r),i((l=s(this,l=e.extend(!0,{},e.inputmask.defaults,n))).alias,n,l),l.alias=void 0,e(this).inputmask("mask",l)}catch(e){}if(e(this).attr("data-inputmask-mask")||e(this).attr("data-inputmask-alias")){var o={};i((l=s(this,l=e.extend(!0,{},e.inputmask.defaults,{}),o)).alias,o,l),l.alias=void 0,e(this).inputmask("mask",l)}})}}}e.fn.inputmask}(jQuery),function(e){e.extend(e.inputmask.defaults.definitions,{h:{validator:"[01][0-9]|2[0-3]",cardinality:2,prevalidator:[{validator:"[0-2]",cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:"[0-5]",cardinality:1}]},d:{validator:"0[1-9]|[12][0-9]|3[01]",cardinality:2,prevalidator:[{validator:"[0-3]",cardinality:1}]},m:{validator:"0[1-9]|1[012]",cardinality:2,prevalidator:[{validator:"[01]",cardinality:1}]},y:{validator:"(19|20)\\d{2}",cardinality:4,prevalidator:[{validator:"[12]",cardinality:1},{validator:"(19|20)",cardinality:2},{validator:"(19|20)\\d",cardinality:3}]}}),e.extend(e.inputmask.defaults.aliases,{"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:new RegExp("[0-3]"),val1:new RegExp("0[1-9]|[12][0-9]|3[01]"),val2pre:function(t){var i=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|[12][0-9]|3[01])"+i+"[01])")},val2:function(t){var i=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|[12][0-9])"+i+"(0[1-9]|1[012]))|(30"+i+"(0[13-9]|1[012]))|(31"+i+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(e,t,i){if(isNaN(e))return!1;var n=parseInt(e.concat(t.toString().slice(e.length))),o=parseInt(e.concat(i.toString().slice(e.length)));return!isNaN(n)&&(n>=t&&i>=n)||!isNaN(o)&&(o>=t&&i>=o)},determinebaseyear:function(e,t,i){var n=(new Date).getFullYear();if(e>n)return e;if(n>t){for(var o=t.toString().slice(0,2),r=t.toString().slice(2,4);o+i>t;)o--;var s=o+r;return e>s?e:s}return n},onKeyDown:function(t,i,n,o){var r=e(this);if(t.ctrlKey&&t.keyCode==e.inputmask.keyCode.RIGHT){var s=new Date;r.val(s.getDate().toString()+(s.getMonth()+1).toString()+s.getFullYear().toString()),r.triggerHandler("setvalue.inputmask")}},getFrontValue:function(e,t,i){for(var n=0,o=0,r=0;r<e.length&&"2"!=e.charAt(r);r++){var s=i.definitions[e.charAt(r)];s?(n+=o,o=s.cardinality):o++}return t.join("").substr(n,o)},definitions:{1:{validator:function(e,t,i,n,o){var r=o.regex.val1.test(e);return n||r||e.charAt(1)!=o.separator&&-1=="-./".indexOf(e.charAt(1))||!(r=o.regex.val1.test("0"+e.charAt(0)))?r:(t.buffer[i-1]="0",{refreshFromBuffer:{start:i-1,end:i},pos:i,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,i,n,o){var r=e;isNaN(t.buffer[i+1])||(r+=t.buffer[i+1]);var s=1==r.length?o.regex.val1pre.test(r):o.regex.val1.test(r);if(!n&&!s){if(s=o.regex.val1.test(e+"0"))return t.buffer[i]=e,t.buffer[++i]="0",{pos:i,c:"0"};if(s=o.regex.val1.test("0"+e))return t.buffer[i]="0",{pos:++i}}return s},cardinality:1}]},2:{validator:function(e,t,i,n,o){var r=o.getFrontValue(t.mask,t.buffer,o);-1!=r.indexOf(o.placeholder[0])&&(r="01"+o.separator);var s=o.regex.val2(o.separator).test(r+e);if(!n&&!s&&(e.charAt(1)==o.separator||-1!="-./".indexOf(e.charAt(1)))&&(s=o.regex.val2(o.separator).test(r+"0"+e.charAt(0))))return t.buffer[i-1]="0",{refreshFromBuffer:{start:i-1,end:i},pos:i,c:e.charAt(0)};if(o.mask.indexOf("2")==o.mask.length-1&&s){if(t.buffer.join("").substr(4,4)+e!=o.leapday)return!0;var a=parseInt(t.buffer.join("").substr(0,4),10);return a%4==0&&(a%100!=0||a%400==0)}return s},cardinality:2,prevalidator:[{validator:function(e,t,i,n,o){isNaN(t.buffer[i+1])||(e+=t.buffer[i+1]);var r=o.getFrontValue(t.mask,t.buffer,o);-1!=r.indexOf(o.placeholder[0])&&(r="01"+o.separator);var s=1==e.length?o.regex.val2pre(o.separator).test(r+e):o.regex.val2(o.separator).test(r+e);return n||s||!(s=o.regex.val2(o.separator).test(r+"0"+e))?s:(t.buffer[i]="0",{pos:++i})},cardinality:1}]},y:{validator:function(e,t,i,n,o){if(o.isInYearRange(e,o.yearrange.minyear,o.yearrange.maxyear)){if(t.buffer.join("").substr(0,6)!=o.leapday)return!0;var r=parseInt(e,10);return r%4==0&&(r%100!=0||r%400==0)}return!1},cardinality:4,prevalidator:[{validator:function(e,t,i,n,o){var r=o.isInYearRange(e,o.yearrange.minyear,o.yearrange.maxyear);if(!n&&!r){var s=o.determinebaseyear(o.yearrange.minyear,o.yearrange.maxyear,e+"0").toString().slice(0,1);if(r=o.isInYearRange(s+e,o.yearrange.minyear,o.yearrange.maxyear))return t.buffer[i++]=s.charAt(0),{pos:i};if(s=o.determinebaseyear(o.yearrange.minyear,o.yearrange.maxyear,e+"0").toString().slice(0,2),r=o.isInYearRange(s+e,o.yearrange.minyear,o.yearrange.maxyear))return t.buffer[i++]=s.charAt(0),t.buffer[i++]=s.charAt(1),{pos:i}}return r},cardinality:1},{validator:function(e,t,i,n,o){var r=o.isInYearRange(e,o.yearrange.minyear,o.yearrange.maxyear);if(!n&&!r){var s=o.determinebaseyear(o.yearrange.minyear,o.yearrange.maxyear,e).toString().slice(0,2);if(r=o.isInYearRange(e[0]+s[1]+e[1],o.yearrange.minyear,o.yearrange.maxyear))return t.buffer[i++]=s.charAt(1),{pos:i};if(s=o.determinebaseyear(o.yearrange.minyear,o.yearrange.maxyear,e).toString().slice(0,2),o.isInYearRange(s+e,o.yearrange.minyear,o.yearrange.maxyear))if(t.buffer.join("").substr(0,6)!=o.leapday)r=!0;else{var a=parseInt(e,10);r=a%4==0&&(a%100!=0||a%400==0)}else r=!1;if(r)return t.buffer[i-1]=s.charAt(0),t.buffer[i++]=s.charAt(1),t.buffer[i++]=e.charAt(0),{refreshFromBuffer:{start:i-3,end:i},pos:i}}return r},cardinality:2},{validator:function(e,t,i,n,o){return o.isInYearRange(e,o.yearrange.minyear,o.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(t){var i=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[13-9]|1[012])"+i+"[0-3])|(02"+i+"[0-2])")},val2:function(t){var i=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|1[012])"+i+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+i+"30)|((0[13578]|1[02])"+i+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyDown:function(t,i,n,o){var r=e(this);if(t.ctrlKey&&t.keyCode==e.inputmask.keyCode.RIGHT){var s=new Date;r.val((s.getMonth()+1).toString()+s.getDate().toString()+s.getFullYear().toString()),r.triggerHandler("setvalue.inputmask")}}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyDown:function(t,i,n,o){var r=e(this);if(t.ctrlKey&&t.keyCode==e.inputmask.keyCode.RIGHT){var s=new Date;r.val(s.getFullYear().toString()+(s.getMonth()+1).toString()+s.getDate().toString()),r.triggerHandler("setvalue.inputmask")}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:new RegExp("[012]"),hrs24:new RegExp("2[0-4]|1[3-9]"),hrs:new RegExp("[01][0-9]|2[0-4]"),ampm:new RegExp("^[a|p|A|P][m|M]"),mspre:new RegExp("[0-5]"),ms:new RegExp("[0-5][0-9]")},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(e,t,i,n,o){if("24"==o.hourFormat&&24==parseInt(e,10))return t.buffer[i-1]="0",t.buffer[i]="0",{refreshFromBuffer:{start:i-1,end:i},c:"0"};var r=o.regex.hrs.test(e);if(!n&&!r&&(e.charAt(1)==o.timeseparator||-1!="-.:".indexOf(e.charAt(1)))&&(r=o.regex.hrs.test("0"+e.charAt(0))))return t.buffer[i-1]="0",t.buffer[i]=e.charAt(0),{refreshFromBuffer:{start:++i-2,end:i},pos:i,c:o.timeseparator};if(r&&"24"!==o.hourFormat&&o.regex.hrs24.test(e)){var s=parseInt(e,10);return 24==s?(t.buffer[i+5]="a",t.buffer[i+6]="m"):(t.buffer[i+5]="p",t.buffer[i+6]="m"),10>(s-=12)?(t.buffer[i]=s.toString(),t.buffer[i-1]="0"):(t.buffer[i]=s.toString().charAt(1),t.buffer[i-1]=s.toString().charAt(0)),{refreshFromBuffer:{start:i-1,end:i+6},c:t.buffer[i]}}return r},cardinality:2,prevalidator:[{validator:function(e,t,i,n,o){var r=o.regex.hrspre.test(e);return n||r||!(r=o.regex.hrs.test("0"+e))?r:(t.buffer[i]="0",{pos:++i})},cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:function(e,t,i,n,o){var r=o.regex.mspre.test(e);return n||r||!(r=o.regex.ms.test("0"+e))?r:(t.buffer[i]="0",{pos:++i})},cardinality:1}]},t:{validator:function(e,t,i,n,o){return o.regex.ampm.test(e+"m")},casing:"lower",cardinality:1}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t\\m",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",placeholder:"hh:mm:ss",alias:"datetime",autoUnmask:!1},"hh:mm":{mask:"h:s",placeholder:"hh:mm",alias:"datetime",autoUnmask:!1},date:{alias:"dd/mm/yyyy"},"mm/yyyy":{mask:"1/y",placeholder:"mm/yyyy",leapday:"donotuse",separator:"/",alias:"mm/dd/yyyy"}}),e.fn.inputmask}(jQuery),function(e){e.extend(e.inputmask.defaults.definitions,{A:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,casing:"upper"},"#":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,casing:"upper"}}),e.extend(e.inputmask.defaults.aliases,{url:{mask:"ir",placeholder:"",separator:"",defaultPrefix:"http://",regex:{urlpre1:new RegExp("[fh]"),urlpre2:new RegExp("(ft|ht)"),urlpre3:new RegExp("(ftp|htt)"),urlpre4:new RegExp("(ftp:|http|ftps)"),urlpre5:new RegExp("(ftp:/|ftps:|http:|https)"),urlpre6:new RegExp("(ftp://|ftps:/|http:/|https:)"),urlpre7:new RegExp("(ftp://|ftps://|http://|https:/)"),urlpre8:new RegExp("(ftp://|ftps://|http://|https://)")},definitions:{i:{validator:function(e,t,i,n,o){return!0},cardinality:8,prevalidator:function(){for(var e=[],t=0;8>t;t++)e[t]=function(){var e=t;return{validator:function(t,i,n,o,r){if(r.regex["urlpre"+(e+1)]){var s,a=t;e+1-t.length>0&&(a=i.buffer.join("").substring(0,e+1-t.length)+""+a);var l=r.regex["urlpre"+(e+1)].test(a);if(!o&&!l){for(n-=e,s=0;s<r.defaultPrefix.length;s++)i.buffer[n]=r.defaultPrefix[s],n++;for(s=0;s<a.length-1;s++)i.buffer[n]=a[s],n++;return{pos:n}}return l}return!1},cardinality:e}}();return e}()},r:{validator:".",cardinality:50}},insertMode:!1,autoUnmask:!1},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function(e,t,i,n,o){return i-1>-1&&"."!=t.buffer[i-1]?(e=t.buffer[i-1]+e,e=i-2>-1&&"."!=t.buffer[i-2]?t.buffer[i-2]+e:"0"+e):e="00"+e,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(e)},cardinality:1}}},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,64}]@*{1,64}[.*{2,64}][.*{2,6}][.*{1,2}]",greedy:!1,onBeforePaste:function(e,t){return(e=e.toLowerCase()).replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}}}),e.fn.inputmask}(jQuery),function(e){e.extend(e.inputmask.defaults.aliases,{numeric:{mask:function(e){function t(t){for(var i="",n=0;n<t.length;n++)i+=e.definitions[t[n]]?"\\"+t[n]:t[n];return i}if(0!==e.repeat&&isNaN(e.integerDigits)&&(e.integerDigits=e.repeat),e.repeat=0,e.groupSeparator==e.radixPoint&&("."==e.radixPoint?e.groupSeparator=",":","==e.radixPoint?e.groupSeparator=".":e.groupSeparator="")," "===e.groupSeparator&&(e.skipOptionalPartCharacter=void 0),e.autoGroup=e.autoGroup&&""!=e.groupSeparator,e.autoGroup&&("string"==typeof e.groupSize&&isFinite(e.groupSize)&&(e.groupSize=parseInt(e.groupSize)),isFinite(e.integerDigits))){var i=Math.floor(e.integerDigits/e.groupSize),n=e.integerDigits%e.groupSize;e.integerDigits=parseInt(e.integerDigits)+(0==n?i-1:i)}e.placeholder.length>1&&(e.placeholder=e.placeholder.charAt(0)),e.radixFocus=e.radixFocus&&"0"==e.placeholder,e.definitions[";"]=e.definitions["~"];var o=t(e.prefix);return o+="[+]",o+="~{1,"+e.integerDigits+"}",null!=e.digits&&(isNaN(e.digits)||parseInt(e.digits)>0)&&(o+=e.digitsOptional?"["+(e.decimalProtect?":":e.radixPoint)+";{"+e.digits+"}]":(e.decimalProtect?":":e.radixPoint)+";{"+e.digits+"}"),""!=e.negationSymbol.back&&(o+="[-]"),o+=t(e.suffix),e.greedy=!1,o},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,groupSeparator:"",radixPoint:".",radixFocus:!0,groupSize:3,autoGroup:!1,allowPlus:!0,allowMinus:!0,negationSymbol:{front:"-",back:""},integerDigits:"+",prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,min:void 0,max:void 0,postFormat:function(t,i,n,o){var r=!1;t.length>=o.suffix.length&&t.join("").indexOf(o.suffix)==t.length-o.suffix.length&&(t.length=t.length-o.suffix.length,r=!0);var s=!1,a=t[i=i>=t.length?t.length-1:i<o.prefix.length?o.prefix.length:i];if(""==o.groupSeparator||-1!=e.inArray(o.radixPoint,t)&&i>=e.inArray(o.radixPoint,t)||new RegExp("["+e.inputmask.escapeRegex(o.negationSymbol.front)+"+]").test(a)){if(r)for(var l=0,c=o.suffix.length;c>l;l++)t.push(o.suffix.charAt(l));return{pos:i}}var d=t.slice();a==o.groupSeparator&&(d.splice(i--,1),a=d[i]),n?d[i]="?":d.splice(i,0,"?");var u=d.join(""),h=u;if(u.length>0&&o.autoGroup||n&&-1!=u.indexOf(o.groupSeparator)){var p=e.inputmask.escapeRegex(o.groupSeparator);s=0==u.indexOf(o.groupSeparator);var g=(u=u.replace(new RegExp(p,"g"),"")).split(o.radixPoint);if((u=""==o.radixPoint?u:g[0])!=o.prefix+"?0"&&u.length>=o.groupSize+o.prefix.length)for(var f=new RegExp("([-+]?[\\d?]+)([\\d?]{"+o.groupSize+"})");f.test(u);)u=(u=u.replace(f,"$1"+o.groupSeparator+"$2")).replace(o.groupSeparator+o.groupSeparator,o.groupSeparator);""!=o.radixPoint&&g.length>1&&(u+=o.radixPoint+g[1])}s=h!=u,t.length=u.length;for(l=0,c=u.length;c>l;l++)t[l]=u.charAt(l);var m=e.inArray("?",t);if(n?t[m]=a:t.splice(m,1),!s&&r)for(l=0,c=o.suffix.length;c>l;l++)t.push(o.suffix.charAt(l));return{pos:m,refreshFromBuffer:s,buffer:t}},onBeforeWrite:function(t,i,n,o){if(t&&"blur"==t.type){var r=i.join("").replace(o.prefix,"");if(r=(r=r.replace(o.suffix,"")).replace(new RegExp(e.inputmask.escapeRegex(o.groupSeparator),"g"),""),","===o.radixPoint&&(r=r.replace(e.inputmask.escapeRegex(o.radixPoint),".")),isFinite(r)&&isFinite(o.min)&&parseFloat(r)<parseFloat(o.min))return e.extend(!0,{refreshFromBuffer:!0,buffer:(o.prefix+o.min).split("")},o.postFormat((o.prefix+o.min).split(""),0,!0,o));var s=""!=o.radixPoint?i.join("").split(o.radixPoint):[i.join("")],a=s[0].match(o.regex.integerPart(o)),l=2==s.length?s[1].match(o.regex.integerNPart(o)):void 0;!a||a[0]!=o.negationSymbol.front+"0"&&a[0]!=o.negationSymbol.front&&"+"!=a[0]||null!=l&&!l[0].match(/^0+$/)||i.splice(a.index,1);var c=e.inArray(o.radixPoint,i);if(-1!=c&&isFinite(o.digits)&&!o.digitsOptional){for(var d=1;d<=o.digits;d++)(null==i[c+d]||i[c+d]==o.placeholder.charAt(0))&&(i[c+d]="0");return{refreshFromBuffer:!0,buffer:i}}}if(o.autoGroup){var u=o.postFormat(i,n-1,!0,o);return u.caret=n<=o.prefix.length?u.pos:u.pos+1,u}},regex:{integerPart:function(t){return new RegExp("["+e.inputmask.escapeRegex(t.negationSymbol.front)+"+]?\\d+")},integerNPart:function(t){return new RegExp("[\\d"+e.inputmask.escapeRegex(t.groupSeparator)+"]+")}},signHandler:function(e,t,i,n,o){if(!n&&o.allowMinus&&"-"===e||o.allowPlus&&"+"===e){var r=t.buffer.join("").match(o.regex.integerPart(o));if(r&&r[0].length>0)return t.buffer[r.index]==("-"===e?"+":o.negationSymbol.front)?"-"==e?""!=o.negationSymbol.back?{pos:r.index,c:o.negationSymbol.front,remove:r.index,caret:i,insert:{pos:t.buffer.length-o.suffix.length-1,c:o.negationSymbol.back}}:{pos:r.index,c:o.negationSymbol.front,remove:r.index,caret:i}:""!=o.negationSymbol.back?{pos:r.index,c:"+",remove:[r.index,t.buffer.length-o.suffix.length-1],caret:i}:{pos:r.index,c:"+",remove:r.index,caret:i}:t.buffer[r.index]==("-"===e?o.negationSymbol.front:"+")?"-"==e&&""!=o.negationSymbol.back?{remove:[r.index,t.buffer.length-o.suffix.length-1],caret:i-1}:{remove:r.index,caret:i-1}:"-"==e?""!=o.negationSymbol.back?{pos:r.index,c:o.negationSymbol.front,caret:i+1,insert:{pos:t.buffer.length-o.suffix.length,c:o.negationSymbol.back}}:{pos:r.index,c:o.negationSymbol.front,caret:i+1}:{pos:r.index,c:e,caret:i+1}}return!1},radixHandler:function(t,i,n,o,r){if(!o&&t===r.radixPoint&&r.digits>0){var s=e.inArray(r.radixPoint,i.buffer),a=i.buffer.join("").match(r.regex.integerPart(r));if(-1!=s&&i.validPositions[s])return i.validPositions[s-1]?{caret:s+1}:{pos:a.index,c:a[0],caret:s+1};if(!a||"0"==a[0]&&a.index+1!=n)return i.buffer[a?a.index:n]="0",{pos:(a?a.index:n)+1}}return!1},leadingZeroHandler:function(t,i,n,o,r){var s=i.buffer.join("").match(r.regex.integerNPart(r)),a=e.inArray(r.radixPoint,i.buffer);if(s&&!o&&(-1==a||a>=n))if(0==s[0].indexOf("0")){n<r.prefix.length&&(n=s.index);var l=e.inArray(r.radixPoint,i._buffer),c=i._buffer&&i.buffer.slice(a).join("")==i._buffer.slice(l).join("")||0==parseInt(i.buffer.slice(a+1).join("")),d=i._buffer&&i.buffer.slice(s.index,a).join("")==i._buffer.slice(r.prefix.length,l).join("")||"0"==i.buffer.slice(s.index,a).join("");if(-1==a||c&&d)return i.buffer.splice(s.index,1),{pos:n=n>s.index?n-1:s.index,remove:s.index};if(s.index+1==n||"0"==t)return i.buffer.splice(s.index,1),{pos:n=s.index,remove:s.index}}else if("0"===t&&n<=s.index&&s[0]!=r.groupSeparator)return!1;return!0},postValidation:function(t,i){var n=!0,o=t.join("").replace(i.prefix,"");return o=(o=o.replace(i.suffix,"")).replace(new RegExp(e.inputmask.escapeRegex(i.groupSeparator),"g"),""),","===i.radixPoint&&(o=o.replace(e.inputmask.escapeRegex(i.radixPoint),".")),o=(o=o.replace(new RegExp("^"+e.inputmask.escapeRegex(i.negationSymbol.front)),"-")).replace(new RegExp(e.inputmask.escapeRegex(i.negationSymbol.back)+"$"),""),isFinite(o)&&isFinite(i.max)&&(n=parseFloat(o)<=parseFloat(i.max)),n},definitions:{"~":{validator:function(t,i,n,o,r){var s=r.signHandler(t,i,n,o,r);if(!s&&(!(s=r.radixHandler(t,i,n,o,r))&&(!0===(s=o?new RegExp("[0-9"+e.inputmask.escapeRegex(r.groupSeparator)+"]").test(t):new RegExp("[0-9]").test(t))&&!0===(s=r.leadingZeroHandler(t,i,n,o,r))))){var a=e.inArray(r.radixPoint,i.buffer);s=!1===r.digitsOptional&&n>a&&!o?{pos:n,remove:n}:{pos:n}}return s},cardinality:1,prevalidator:null},"+":{validator:function(e,t,i,n,o){var r=o.signHandler(e,t,i,n,o);return!r&&(n&&o.allowMinus&&e===o.negationSymbol.front||o.allowMinus&&"-"==e||o.allowPlus&&"+"==e)&&(r="-"!=e||(""!=o.negationSymbol.back?{pos:i,c:"-"===e?o.negationSymbol.front:"+",caret:i+1,insert:{pos:t.buffer.length,c:o.negationSymbol.back}}:{pos:i,c:"-"===e?o.negationSymbol.front:"+",caret:i+1})),r},cardinality:1,prevalidator:null,placeholder:""},"-":{validator:function(e,t,i,n,o){var r=o.signHandler(e,t,i,n,o);return!r&&n&&o.allowMinus&&e===o.negationSymbol.back&&(r=!0),r},cardinality:1,prevalidator:null,placeholder:""},":":{validator:function(t,i,n,o,r){var s=r.signHandler(t,i,n,o,r);if(!s){var a="["+e.inputmask.escapeRegex(r.radixPoint)+"]";(s=new RegExp(a).test(t))&&i.validPositions[n]&&i.validPositions[n].match.placeholder==r.radixPoint&&(s={caret:n+1})}return s},cardinality:1,prevalidator:null,placeholder:function(e){return e.radixPoint}}},insertMode:!0,autoUnmask:!1,unmaskAsNumber:!1,onUnMask:function(t,i,n){var o=t.replace(n.prefix,"");return o=(o=o.replace(n.suffix,"")).replace(new RegExp(e.inputmask.escapeRegex(n.groupSeparator),"g"),""),n.unmaskAsNumber?(o=o.replace(e.inputmask.escapeRegex.call(this,n.radixPoint),"."),Number(o)):o},isComplete:function(t,i){var n=t.join(""),o=t.slice();if(i.postFormat(o,0,!0,i),o.join("")!=n)return!1;var r=n.replace(i.prefix,"");return r=(r=r.replace(i.suffix,"")).replace(new RegExp(e.inputmask.escapeRegex(i.groupSeparator),"g"),""),","===i.radixPoint&&(r=r.replace(e.inputmask.escapeRegex(i.radixPoint),".")),isFinite(r)},onBeforeMask:function(t,i){if(""!=i.radixPoint&&isFinite(t))t=t.toString().replace(".",i.radixPoint);else{var n=t.match(/,/g),o=t.match(/\./g);o&&n?o.length>n.length?t=(t=t.replace(/\./g,"")).replace(",",i.radixPoint):n.length>o.length?t=(t=t.replace(/,/g,"")).replace(".",i.radixPoint):t=t.indexOf(".")<t.indexOf(",")?t.replace(/\./g,""):t=t.replace(/,/g,""):t=t.replace(new RegExp(e.inputmask.escapeRegex(i.groupSeparator),"g"),"")}return 0==i.digits&&(-1!=t.indexOf(".")?t=t.substring(0,t.indexOf(".")):-1!=t.indexOf(",")&&(t=t.substring(0,t.indexOf(",")))),t},canClearPosition:function(t,i,n,o,r){var s=t.validPositions[i].input,a=s!=r.radixPoint&&isFinite(s)||i==n||s==r.groupSeparator||s==r.negationSymbol.front||s==r.negationSymbol.back;if(a&&isFinite(s)){var l;if(!o&&t.buffer){var c=i+1;if(null==(l=t.buffer.join("").substr(0,i).match(r.regex.integerNPart(r)))||0==parseInt(l[0].replace(new RegExp(e.inputmask.escapeRegex(r.groupSeparator),"g"),"")))for(;t.validPositions[c]&&(t.validPositions[c].input==r.groupSeparator||"0"==t.validPositions[c].input);)delete t.validPositions[c],c++}var d=[];for(var u in t.validPositions)d.push(t.validPositions[u].input);l=d.join("").match(r.regex.integerNPart(r));var h=e.inArray(r.radixPoint,t.buffer);if(l&&(-1==h||h>=i))if(0==l[0].indexOf("0"))a=l.index!=i||-1==h;else{var p=parseInt(l[0].replace(new RegExp(e.inputmask.escapeRegex(r.groupSeparator),"g"),""));-1!=h&&10>p&&"0"==r.placeholder.charAt(0)&&(t.validPositions[i].input="0",t.p=r.prefix.length+1,a=!1)}}return a}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:"0",radixPoint:""}}),e.fn.inputmask}(jQuery),function(e){e.extend(e.inputmask.defaults.aliases,{phone:{url:"phone-codes/phone-codes.js",countrycode:"",mask:function(t){t.definitions["#"]=t.definitions[9];var i=[];return e.ajax({url:t.url,async:!1,dataType:"json",success:function(e){i=e},error:function(e,i,n){alert(n+" - "+t.url)}}),i=i.sort(function(e,t){return(e.mask||e)<(t.mask||t)?-1:1})},keepStatic:!1,nojumps:!0,nojumpsThreshold:1,onBeforeMask:function(e,t){var i=e.replace(/^0/g,"");return(i.indexOf(t.countrycode)>1||-1==i.indexOf(t.countrycode))&&(i="+"+t.countrycode+i),i}},phonebe:{alias:"phone",url:"phone-codes/phone-be.js",countrycode:"32",nojumpsThreshold:4}}),e.fn.inputmask}(jQuery),function(e){e.extend(e.inputmask.defaults.aliases,{Regex:{mask:"r",greedy:!1,repeat:"*",regex:null,regexTokens:null,tokenizer:/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,quantifierFilter:/[0-9]+[^,]/,isComplete:function(e,t){return new RegExp(t.regex).test(e.join(""))},definitions:{r:{validator:function(t,i,n,o,r){function s(e,t){this.matches=[],this.isGroup=e||!1,this.isQuantifier=t||!1,this.quantifier={min:1,max:1},this.repeaterPart=void 0}function a(t,i){var n=!1;i&&(c+="(",u++);for(var o=0;o<t.matches.length;o++){var r=t.matches[o];if(1==r.isGroup)n=a(r,!0);else if(1==r.isQuantifier){var s=e.inArray(r,t.matches),l=t.matches[s-1],d=c;if(isNaN(r.quantifier.max)){for(;r.repeaterPart&&r.repeaterPart!=c&&r.repeaterPart.length>c.length&&!(n=a(l,!0)););(n=n||a(l,!0))&&(r.repeaterPart=c),c=d+r.quantifier.max}else{for(var p=0,g=r.quantifier.max-1;g>p&&!(n=a(l,!0));p++);c=d+"{"+r.quantifier.min+","+r.quantifier.max+"}"}}else if(null!=r.matches)for(var f=0;f<r.length&&!(n=a(r[f],i));f++);else{var m;if("["==r.charAt(0)){m=c,m+=r;for(var v=0;u>v;v++)m+=")";n=new RegExp("^("+m+")$").test(h)}else for(var b=0,y=r.length;y>b;b++)if("\\"!=r.charAt(b)){m=c,m=(m+=r.substr(0,b+1)).replace(/\|$/,"");for(v=0;u>v;v++)m+=")";if(n=new RegExp("^("+m+")$").test(h))break}c+=r}if(n)break}return i&&(c+=")",u--),n}null==r.regexTokens&&function(){var e,t,i=new s,n=[];for(r.regexTokens=[];e=r.tokenizer.exec(r.regex);)switch(t=e[0],t.charAt(0)){case"(":n.push(new s(!0));break;case")":var o=n.pop();n.length>0?n[n.length-1].matches.push(o):i.matches.push(o);break;case"{":case"+":case"*":var a=new s(!1,!0),l=(t=t.replace(/[{}]/g,"")).split(","),c=isNaN(l[0])?l[0]:parseInt(l[0]),d=1==l.length?c:isNaN(l[1])?l[1]:parseInt(l[1]);if(a.quantifier={min:c,max:d},n.length>0){var u=n[n.length-1].matches;if(!(e=u.pop()).isGroup)(o=new s(!0)).matches.push(e),e=o;u.push(e),u.push(a)}else{if(!(e=i.matches.pop()).isGroup)(o=new s(!0)).matches.push(e),e=o;i.matches.push(e),i.matches.push(a)}break;default:n.length>0?n[n.length-1].matches.push(t):i.matches.push(t)}i.matches.length>0&&r.regexTokens.push(i)}();var l=i.buffer.slice(),c="",d=!1,u=0;l.splice(n,0,t);for(var h=l.join(""),p=0;p<r.regexTokens.length;p++){var s;if(d=a(s=r.regexTokens[p],s.isGroup))break}return d},cardinality:1}}}}),e.fn.inputmask}(jQuery),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(i){if(i.async){var n,o,r,s=i.initialIframeSrc||"javascript:false;";return{send:function(a,l){(n=e('<form style="display:none;"></form>')).attr("accept-charset",i.formAcceptCharset),r=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+r+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+r+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+r+"_method=PATCH",i.type="POST"),o=e('<iframe src="'+s+'" name="iframe-transport-'+(t+=1)+'"></iframe>').bind("load",function(){var t,r=e.isArray(i.paramName)?i.paramName:[i.paramName];o.unbind("load").bind("load",function(){var t;try{if(!(t=o.contents()).length||!t[0].firstChild)throw new Error}catch(e){t=void 0}l(200,"success",{iframe:t}),e('<iframe src="'+s+'"></iframe>').appendTo(n),window.setTimeout(function(){n.remove()},0)}),n.prop("target",o.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&e.each(i.formData,function(t,i){e('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(n)}),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(t=i.fileInput.clone(),i.fileInput.after(function(e){return t[e]}),i.paramName&&i.fileInput.each(function(t){e(this).prop("name",r[t]||i.paramName)}),n.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),i.fileInput.removeAttr("form")),n.submit(),t&&t.length&&i.fileInput.each(function(i,n){var o=e(t[i]);e(n).prop("name",o.prop("name")).attr("form",o.attr("form")),o.replaceWith(n)})}),n.append(o).appendTo(document.body)},abort:function(){o&&o.unbind("load").prop("src",s),n&&n.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var i=t&&t[0];return i&&e.isXMLDoc(i)?i:e.parseXML(i.XMLDocument&&i.XMLDocument.xml||e(i.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(e){this.el=e,this.dragleave=t(this.dragleave,this),this.dragenter=t(this.dragenter,this),this.supportsEventConstructors()&&(this.first=!1,this.second=!1,this.el.addEventListener("dragenter",this.dragenter,!1),this.el.addEventListener("dragleave",this.dragleave,!1))}return e.prototype.dragenter=function(e){return this.first?this.second=!0:(this.first=!0,this.el.dispatchEvent(new CustomEvent("dragster:enter",{bubbles:!0,cancelable:!0,detail:{dataTransfer:e.dataTransfer}})))},e.prototype.dragleave=function(e){if(this.second?this.second=!1:this.first&&(this.first=!1),!this.first&&!this.second)return this.el.dispatchEvent(new CustomEvent("dragster:leave",{bubbles:!0,cancelable:!0,detail:{dataTransfer:e.dataTransfer}}))},e.prototype.removeListeners=function(){return this.el.removeEventListener("dragenter",this.dragenter,!1),this.el.removeEventListener("dragleave",this.dragleave,!1)},e.prototype.supportsEventConstructors=function(){try{new CustomEvent("z")}catch(e){return!1}return!0},e.prototype.reset=function(){return this.first=!1,this.second=!1},e}(),"undefined"==typeof module?window.Dragster=e:module.exports=e}.call(this),function(){var e;return e=function(){function e(e,t){var i,n;null==t&&(t=[]),i={script:null,ajaxQueue:!1,autoUpload:!1,classDragOver:"is-dragover",onUploadingFiles:function(e,t){},onSelectFiles:function(e,t){},onSuccessFile:function(e,t,i){},onComplete:function(e,t){},onFileError:function(e,t){},onFileFail:function(e,t){}},this.options=$.extend(i,t),this.files=[],$.each($(e),(n=this,function(e,t){var i,o;return o=(i=$(t)).find("input[type=file]"),i.data("pos",e),o.on("change",function(e){var t;if(t=$(e.currentTarget).prop("files"),n.options.onSelectFiles(t,i),n.files[i.data("pos")]=e.target.files,n.options.autoUpload)return n.submit(i,e.target.files)}),n.initDrag(i)}))}return e.prototype.initDrag=function(e){var t,i;if(this.isAdvancedUpload())return t=!1,e.on("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault(),e.stopPropagation()}).on("dragover dragenter",(i=this,function(){e.addClass(i.options.classDragOver)})).on("dragleave dragend drop",function(t){return function(){e.removeClass(t.options.classDragOver)}}(this)).on("drop",function(i){return function(n){return t=n.originalEvent.dataTransfer.files,i.options.onSelectFiles(t,e),i.options.autoUpload?i.submit(e,t):i.files[e.data("pos")]=t}}(this))},e.prototype.startUpload=function(e){var t;if(t=this.files[e.data("pos")])return this.submit(e,t)},e.prototype.submit=function(e,t){var i,n,o,r,s,a,l,c,d,u;if(e.hasClass("is-uploading"))return!1;for(e.addClass("is-uploading"),d=t.length,u=1,o=e.find("input[type=file]").attr("name"),this.options.onUploadingFiles(u,d),c=[],s=r=0,a=t.length;r<a;s=++r)n=t[s],(l=new FormData).append(o+"[]",n),l.append("position",s),i=this.options.ajaxQueue?$.ajaxQueue:$.ajax,c.push(i({url:this.options.script,type:"POST",data:l,processData:!1,contentType:!1,cache:!1,complete:function(i){return function(){return++u>=d+1?(i.options.onComplete(t,e),i.removeFiles(e),e.removeClass("is-uploading")):i.options.onUploadingFiles(u,d)}}(this),success:function(t){return function(i){t.options.onSuccessFile(n,i,e)}}(this),fail:function(t){return function(i){t.options.onFileFail(i,e)}}(this),error:function(t){return function(i){t.options.onFileError(i,e)}}(this)}));return c},e.prototype.removeFiles=function(e){return this.files[e.data("pos")]=null},e.prototype.isAdvancedUpload=function(){var e;return("draggable"in(e=document.createElement("div"))||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window},e.prototype.isFormData=function(){return"FormData"in window},e.prototype.isFileReader=function(){return"FileReader"in window},e.prototype.isDraggable=function(){var e;return"draggable"in(e=document.createElement("div"))||"ondragstart"in e&&"ondrop"in e},e}(),"undefined"==typeof module?window.Dropzone=e:module.exports=e,e}.call(this),function(e,t){var i,n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color outlineColor".split(" "),o=/^([\-+])=\s*(\d+\.?\d*)/,r=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],s=e.Color=function(t,i,n,o){return new e.Color.fn.parse(t,i,n,o)},a={rgba:{cache:"_rgba",props:{red:{idx:0,type:"byte",empty:!0},green:{idx:1,type:"byte",empty:!0},blue:{idx:2,type:"byte",empty:!0},alpha:{idx:3,type:"percent",def:1}}},hsla:{cache:"_hsla",props:{hue:{idx:0,type:"degrees",empty:!0},saturation:{idx:1,type:"percent",empty:!0},lightness:{idx:2,type:"percent",empty:!0}}}},l={byte:{floor:!0,min:0,max:255},percent:{min:0,max:1},degrees:{mod:360,floor:!0}},c=a.rgba.props,d=s.support={},u=e.each;function h(e,t,i){var n=l[t.type]||{};return(t.empty||i)&&null==e?null:t.def&&null==e||null==(e=n.floor?~~e:parseFloat(e))||isNaN(e)?t.def:n.mod?(e%=n.mod)<0?n.mod+e:e:n.min>e?n.min:n.max<e?n.max:e}function p(t){var n=s(),o=n._rgba=[];return t=t.toLowerCase(),u(r,function(e,i){var r,s=i.re.exec(t),l=s&&i.parse(s),c=i.space||"rgba",d=a[c].cache;if(l)return r=n[c](l),n[d]=r[d],o=n._rgba=r._rgba,!1}),0!==o.length?(0===Math.max.apply(Math,o)&&e.extend(o,i.transparent),n):(t=i[t])?t:void 0}function g(e,t,i){return 6*(i=(i+1)%1)<1?e+6*(t-e)*i:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}a.hsla.props.alpha=c.alpha,s.fn=s.prototype={constructor:s,parse:function(n,o,r,l){if(n===t)return this._rgba=[null,null,null,null],this;(n instanceof e||n.nodeType)&&(n=n instanceof e?n.css(o):e(n).css(o),o=t);var d=this,g=e.type(n),f=this._rgba=[];return o!==t&&(n=[n,o,r,l],g="array"),"string"===g?this.parse(p(n)||i._default):"array"===g?(u(c,function(e,t){f[t.idx]=h(n[t.idx],t)}),this):"object"===g?(u(a,n instanceof s?function(e,t){n[t.cache]&&(d[t.cache]=n[t.cache].slice())}:function(e,t){u(t.props,function(e,i){var o=t.cache;if(!d[o]&&t.to){if(null==n[e]||"alpha"===e)return;d[o]=t.to(d._rgba)}d[o][i.idx]=h(n[e],i,!0)})}),this):void 0},is:function(e){var t=s(e),i=!0,n=this;return u(a,function(e,o){var r,s=t[o.cache];return s&&(r=n[o.cache]||o.to&&o.to(n._rgba)||[],u(o.props,function(e,t){if(null!=s[t.idx])return i=s[t.idx]===r[t.idx]})),i}),i},_space:function(){var e=[],t=this;return u(a,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var i=s(e),n=i._space(),o=a[n],r=this[o.cache]||o.to(this._rgba),c=r.slice();return i=i[o.cache],u(o.props,function(e,n){var o=n.idx,s=r[o],a=i[o],d=l[n.type]||{};null!==a&&(null===s?c[o]=a:(d.mod&&(a-s>d.mod/2?s+=d.mod:s-a>d.mod/2&&(s-=d.mod)),c[n.idx]=h((a-s)*t+s,n)))}),this[n](c)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),o=s(t)._rgba;return s(e.map(i,function(e,t){return(1-n)*o[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join(",")+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join(",")+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e,t){return 1===(e=(e||0).toString(16)).length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}},s.fn.parse.prototype=s.fn,a.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,o=e[1]/255,r=e[2]/255,s=e[3],a=Math.max(n,o,r),l=Math.min(n,o,r),c=a-l,d=a+l,u=.5*d;return t=l===a?0:n===a?60*(o-r)/c+360:o===a?60*(r-n)/c+120:60*(n-o)/c+240,i=0===u||1===u?u:u<=.5?c/d:c/(2-d),[Math.round(t)%360,i,u,null==s?1:s]},a.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],o=e[3],r=n<=.5?n*(1+i):n+i-n*i,s=2*n-r;return[Math.round(255*g(s,r,t+1/3)),Math.round(255*g(s,r,t)),Math.round(255*g(s,r,t-1/3)),o]},u(a,function(i,n){var r=n.props,a=n.cache,l=n.to,c=n.from;s.fn[i]=function(i){if(l&&!this[a]&&(this[a]=l(this._rgba)),i===t)return this[a].slice();var n,o=e.type(i),d="array"===o||"object"===o?i:arguments,p=this[a].slice();return u(r,function(e,t){var i=d["object"===o?e:t.idx];null==i&&(i=p[t.idx]),p[t.idx]=h(i,t)}),c?((n=s(c(p)))[a]=p,n):s(p)},u(r,function(t,n){s.fn[t]||(s.fn[t]=function(r){var s,a=e.type(r),l="alpha"===t?this._hsla?"hsla":"rgba":i,c=this[l](),d=c[n.idx];return"undefined"===a?d:("function"===a&&(r=r.call(this,d),a=e.type(r)),null==r&&n.empty?this:("string"===a&&(s=o.exec(r))&&(r=d+parseFloat(s[2])*("+"===s[1]?1:-1)),c[n.idx]=r,this[l](c)))})})}),u(n,function(t,i){e.cssHooks[i]={set:function(t,n){var o,r,a;if("string"!==e.type(n)||(o=p(n))){if(n=s(o||n),!d.rgba&&1!==n._rgba[3]){a="backgroundColor"===i?t.parentNode:t;do{r=e.curCSS(a,"backgroundColor")}while((""===r||"transparent"===r)&&(a=a.parentNode)&&a.style);n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}t.style[i]=n}},e.fx.step[i]=function(t){t.colorInit||(t.start=s(t.elem,i),t.end=s(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}}),e(function(){var e=document.createElement("div").style;e.cssText="background-color:rgba(1,1,1,.5)",d.rgba=e.backgroundColor.indexOf("rgba")>-1}),i=e.Color.names={aqua:"#00ffff",azure:"#f0ffff",beige:"#f5f5dc",black:"#000000",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",violet:"#800080",red:"#ff0000",silver:"#c0c0c0",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(e){e.Jcrop=function(t,i){var n,o=e.extend({},e.Jcrop.defaults),r=navigator.userAgent.toLowerCase(),s=/msie/.test(r),a=/msie [1-6]\./.test(r);function l(e){return Math.round(e)+"px"}function c(e){return o.baseClass+"-"+e}function d(t){var i=e(t).offset();return[i.left,i.top]}function u(e){return[e.pageX-n[0],e.pageY-n[1]]}function h(t){"object"!=typeof t&&(t={}),o=e.extend(o,t),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof o[t]&&(o[t]=function(){})})}function p(e,t,i){if(n=d(E),X.setCursor("move"===e?e:e+"-resize"),"move"===e)return X.activateHandlers(function(e){var t=e;return Z.watchKeys(),function(e){Y.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,K.update()}}(t),b,i);var r=Y.getFixed(),s=g(e),a=Y.getCorner(g(s));Y.setPressed(Y.getCorner(s)),Y.setCurrent(a),X.activateHandlers(function(e,t){return function(i){if(o.aspectRatio)switch(e){case"e":case"w":i[1]=t.y+1;break;case"n":case"s":i[0]=t.x+1}else switch(e){case"e":case"w":i[1]=t.y2;break;case"n":case"s":i[0]=t.x2}Y.setCurrent(i),K.update()}}(e,r),b,i)}function g(e){switch(e){case"n":case"ne":return"sw";case"s":case"e":case"se":return"nw";case"w":case"sw":return"ne";case"nw":return"se"}}function f(e){return function(t){return!o.disabled&&(!("move"===e&&!o.allowMove)&&(n=d(E),B=!0,p(e,u(t)),t.stopPropagation(),t.preventDefault(),!1))}}function m(e,t,i){var n=e.width(),o=e.height();n>t&&t>0&&(n=t,o=t/e.width()*e.height()),o>i&&i>0&&(o=i,n=i/e.height()*e.width()),$=e.width()/n,G=e.height()/o,e.width(n).height(o)}function v(e){return{x:e.x*$,y:e.y*G,x2:e.x2*$,y2:e.y2*G,w:e.w*$,h:e.h*G}}function b(e){var t=Y.getFixed();t.w>o.minSelect[0]&&t.h>o.minSelect[1]?(K.enableHandles(),K.done()):K.release(),X.setCursor(o.allowSelect?"crosshair":"default")}function y(e){if(o.disabled)return!1;if(!o.allowSelect)return!1;B=!0,n=d(E),K.disableHandles(),X.setCursor("crosshair");var t=u(e);return Y.setPressed(t),K.update(),X.activateHandlers(w,b,"touch"===e.type.substring(0,5)),Z.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function w(e){Y.setCurrent(e),K.update()}function C(){var t=e("<div></div>").addClass(c("tracker"));return s&&t.css({opacity:0,backgroundColor:"white"}),t}"object"!=typeof t&&(t=e(t)[0]),"object"!=typeof i&&(i={}),h(i);var _={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},S=e(t),x=!0;if("IMG"==t.tagName){if(0!=S[0].width&&0!=S[0].height)S.width(S[0].width),S.height(S[0].height);else{var A=new Image;A.src=S[0].src,S.width(A.width),S.height(A.height)}var E=S.clone().removeAttr("id").css(_).show();E.width(S.width()),E.height(S.height()),S.after(E).hide()}else E=S.css(_).show(),x=!1,null===o.shade&&(o.shade=!0);m(E,o.boxWidth,o.boxHeight);var T=E.width(),k=E.height(),D=e("<div />").width(T).height(k).addClass(c("holder")).css({position:"relative",backgroundColor:o.bgColor}).insertAfter(S).append(E);o.addClass&&D.addClass(o.addClass);var M=e("<div />"),P=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),R=e("<div />").width("100%").height("100%").css("zIndex",320),I=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=Y.getFixed();o.onDblClick.call(oe,e)}).insertBefore(E).append(P,R);x&&(M=e("<img />").attr("src",E.attr("src")).css(_).width(T).height(k),P.append(M)),a&&I.css({overflowY:"hidden"});var O,N,L,F,$,G,B,H,z=o.boundary,W=C().width(T+2*z).height(k+2*z).css({position:"absolute",top:l(-z),left:l(-z),zIndex:290}).mousedown(y),V=o.bgColor,j=o.bgOpacity;n=d(E);var U=function(){function e(){var e,t={},i=["touchstart","touchmove","touchend"],n=document.createElement("div");try{for(e=0;e<i.length;e++){var o=i[e],r=(o="on"+o)in n;r||(n.setAttribute(o,"return;"),r="function"==typeof n[o]),t[i[e]]=r}return t.touchstart&&t.touchend&&t.touchmove}catch(e){return!1}}return{createDragger:function(e){return function(t){return!o.disabled&&(!("move"===e&&!o.allowMove)&&(n=d(E),B=!0,p(e,u(U.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1))}},newSelection:function(e){return y(U.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:!0===o.touchSupport||!1===o.touchSupport?o.touchSupport:e()}}(),Y=function(){var e,t,i=0,n=0,r=0,s=0;function a(){if(!o.aspectRatio)return function(){var e,t=r-i,o=s-n;O&&Math.abs(t)>O&&(r=t>0?i+O:i-O);N&&Math.abs(o)>N&&(s=o>0?n+N:n-N);F/G&&Math.abs(o)<F/G&&(s=o>0?n+F/G:n-F/G);L/$&&Math.abs(t)<L/$&&(r=t>0?i+L/$:i-L/$);i<0&&(r-=i,i-=i);n<0&&(s-=n,n-=n);r<0&&(i-=r,r-=r);s<0&&(n-=s,s-=s);r>T&&(i-=e=r-T,r-=e);s>k&&(n-=e=s-k,s-=e);i>T&&(s-=e=i-k,n-=e);n>k&&(s-=e=n-k,n-=e);return d(c(i,n,r,s))}();var e,t,a,l,u=o.aspectRatio,h=o.minSize[0]/$,p=o.maxSize[0]/$,g=o.maxSize[1]/G,f=r-i,m=s-n,v=Math.abs(f),b=Math.abs(m);return 0===p&&(p=10*T),0===g&&(g=10*k),v/b<u?(t=s,a=b*u,(e=f<0?i-a:a+i)<0?(e=0,l=Math.abs((e-i)/u),t=m<0?n-l:l+n):e>T&&(e=T,l=Math.abs((e-i)/u),t=m<0?n-l:l+n)):(e=r,l=v/u,(t=m<0?n-l:n+l)<0?(t=0,a=Math.abs((t-n)*u),e=f<0?i-a:a+i):t>k&&(t=k,a=Math.abs(t-n)*u,e=f<0?i-a:a+i)),e>i?(e-i<h?e=i+h:e-i>p&&(e=i+p),t=t>n?n+(e-i)/u:n-(e-i)/u):e<i&&(i-e<h?e=i-h:i-e>p&&(e=i-p),t=t>n?n+(i-e)/u:n-(i-e)/u),e<0?(i-=e,e=0):e>T&&(i-=e-T,e=T),t<0?(n-=t,t=0):t>k&&(n-=t-k,t=k),d(c(i,n,e,t))}function l(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>T&&(e[0]=T),e[1]>k&&(e[1]=k),[Math.round(e[0]),Math.round(e[1])]}function c(e,t,i,n){var o=e,r=i,s=t,a=n;return i<e&&(o=i,r=e),n<t&&(s=n,a=t),[o,s,r,a]}function d(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}return{flipCoords:c,setPressed:function(e){e=l(e),r=i=e[0],s=n=e[1]},setCurrent:function(i){i=l(i),e=i[0]-r,t=i[1]-s,r=i[0],s=i[1]},getOffset:function(){return[e,t]},moveOffset:function(e){var t=e[0],o=e[1];0>i+t&&(t-=t+i),0>n+o&&(o-=o+n),k<s+o&&(o+=k-(s+o)),T<r+t&&(t+=T-(r+t)),i+=t,r+=t,n+=o,s+=o},getCorner:function(e){var t=a();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}},getFixed:a}}(),q=function(){var t=!1,i=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),n={top:a(),left:a().height(k),right:a().height(k),bottom:a()};function r(){return s(Y.getFixed())}function s(e){n.top.css({left:l(e.x),width:l(e.w),height:l(e.y)}),n.bottom.css({top:l(e.y2),left:l(e.x),width:l(e.w),height:l(k-e.y2)}),n.right.css({left:l(e.x2),width:l(T-e.x2)}),n.left.css({width:l(e.x)})}function a(){return e("<div />").css({position:"absolute",backgroundColor:o.shadeColor||o.bgColor}).appendTo(i)}function c(){t||(t=!0,i.insertBefore(E),r(),K.setBgOpacity(1,0,1),M.hide(),d(o.shadeColor||o.bgColor,1),K.isAwake()?h(o.bgOpacity,1):h(1,1))}function d(e,t){ie(p(),e,t)}function u(){t&&(i.remove(),M.show(),t=!1,K.isAwake()?K.setBgOpacity(o.bgOpacity,1,1):(K.setBgOpacity(1,1,1),K.disableHandles()),ie(D,0,1))}function h(e,n){t&&(o.bgFade&&!n?i.animate({opacity:1-e},{queue:!1,duration:o.fadeTime}):i.css({opacity:1-e}))}function p(){return i.children()}return{update:r,updateRaw:s,getShades:p,setBgColor:d,enable:c,disable:u,resize:function(e,t){n.left.css({height:l(t)}),n.right.css({height:l(t)})},refresh:function(){o.shade?c():u(),K.isAwake()&&h(o.bgOpacity)},opacity:h}}(),K=function(){var t,i=370,n={},r={},s={},a=!1;function d(t){var i=e("<div />").css({position:"absolute",opacity:o.borderOpacity}).addClass(c(t));return P.append(i),i}function u(t,i){var n=e("<div />").mousedown(f(t)).css({cursor:t+"-resize",position:"absolute",zIndex:i}).addClass("ord-"+t);return U.support&&n.bind("touchstart.jcrop",U.createDragger(t)),R.append(n),n}function h(e){var t=o.handleSize,n=u(e,i++).css({opacity:o.handleOpacity}).addClass(c("handle"));return t&&n.width(t).height(t),n}function p(e){return u(e,i++).addClass("jcrop-dragbar")}function g(){var e=Y.getFixed();Y.setPressed([e.x,e.y]),Y.setCurrent([e.x2,e.y2]),m()}function m(e){if(t)return b(e)}function b(e){var i,n,r,s,a=Y.getFixed();i=a.w,n=a.h,I.width(Math.round(i)).height(Math.round(n)),r=a.x,s=a.y,o.shade||M.css({top:l(-s),left:l(-r)}),I.css({top:l(s),left:l(r)}),o.shade&&q.updateRaw(a),t||function(){I.show(),o.shade?q.opacity(j):y(j,!0);t=!0}(),e?o.onSelect.call(oe,v(a)):o.onChange.call(oe,v(a))}function y(e,i,n){(t||i)&&(o.bgFade&&!n?E.animate({opacity:e},{queue:!1,duration:o.fadeTime}):E.css("opacity",e))}function w(){if(a=!0,o.allowResize)return R.show(),!0}function _(){a=!1,R.hide()}function S(e){e?(H=!0,_()):(H=!1,w())}o.dragEdges&&e.isArray(o.createDragbars)&&function(e){var t;for(t=0;t<e.length;t++)s[e[t]]=p(e[t])}(o.createDragbars),e.isArray(o.createHandles)&&function(e){var t;for(t=0;t<e.length;t++)r[e[t]]=h(e[t])}(o.createHandles),o.drawBorders&&e.isArray(o.createBorders)&&function(e){var t,i;for(i=0;i<e.length;i++){switch(e[i]){case"n":t="hline";break;case"s":t="hline bottom";break;case"e":t="vline right";break;case"w":t="vline"}n[e[i]]=d(t)}}(o.createBorders),e(document).bind("touchstart.jcrop-ios",function(t){e(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()});var x=C().mousedown(f("move")).css({cursor:"move",position:"absolute",zIndex:360});return U.support&&x.bind("touchstart.jcrop",U.createDragger("move")),P.append(x),_(),{updateVisible:m,update:b,release:function(){_(),I.hide(),o.shade?q.opacity(1):y(1),t=!1,o.onRelease.call(oe)},refresh:g,isAwake:function(){return t},setCursor:function(e){x.css("cursor",e)},enableHandles:w,enableOnly:function(){a=!0},showHandles:function(){a&&R.show()},disableHandles:_,animMode:S,setBgOpacity:y,done:function(){S(!1),g()}}}(),X=function(){var t=function(){},i=function(){},n=o.trackDocument;function r(e){return t(u(e)),!1}function s(n){return n.preventDefault(),n.stopPropagation(),B&&(B=!1,i(u(n)),K.isAwake()&&o.onSelect.call(oe,v(Y.getFixed())),W.css({zIndex:290}),e(document).unbind(".jcrop"),t=function(){},i=function(){}),!1}function a(e){return t(u(U.cfilter(e))),!1}function l(e){return s(U.cfilter(e))}return n||W.mousemove(r).mouseup(s).mouseout(s),E.before(W),{activateHandlers:function(o,c,d){return B=!0,t=o,i=c,function(t){W.css({zIndex:450}),t?e(document).bind("touchmove.jcrop",a).bind("touchend.jcrop",l):n&&e(document).bind("mousemove.jcrop",r).bind("mouseup.jcrop",s)}(d),!1},setCursor:function(e){W.css("cursor",e)}}}(),Z=function(){var t=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),i=e("<div />").css({position:"absolute",overflow:"hidden"}).append(t);function n(e,t,i){o.allowMove&&(Y.moveOffset([t,i]),K.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}return o.keySupport&&(t.keydown(function(e){if(e.ctrlKey||e.metaKey)return!0;var t=!!e.shiftKey?10:1;switch(e.keyCode){case 37:n(e,-t,0);break;case 39:n(e,t,0);break;case 38:n(e,0,-t);break;case 40:n(e,0,t);break;case 27:o.allowSelect&&K.release();break;case 9:return!0}return!1}).blur(function(e){t.hide()}),a||!o.fixedSupport?(t.css({position:"absolute",left:"-20px"}),i.append(t).insertBefore(E)):t.insertBefore(E),t.hide()),{watchKeys:function(){o.keySupport}}}();function J(e){Q([e[0]/$,e[1]/G,e[2]/$,e[3]/G]),o.onSelect.call(oe,v(Y.getFixed())),K.enableHandles()}function Q(e){Y.setPressed([e[0],e[1]]),Y.setCurrent([e[2],e[3]]),K.update()}function ee(){o.disabled=!0,K.disableHandles(),K.setCursor("default"),X.setCursor("default")}function te(){o.disabled=!1,ne()}function ie(t,i,n){var r=i||o.bgColor;o.bgFade&&e.fx.step.hasOwnProperty("backgroundColor")&&o.fadeTime&&!n?t.animate({backgroundColor:r},{queue:!1,duration:o.fadeTime}):t.css("backgroundColor",r)}function ne(e){o.allowResize?e?K.enableOnly():K.enableHandles():K.disableHandles(),X.setCursor(o.allowSelect?"crosshair":"default"),K.setCursor(o.allowMove?"move":"default"),o.hasOwnProperty("trueSize")&&($=o.trueSize[0]/T,G=o.trueSize[1]/k),o.hasOwnProperty("setSelect")&&(J(o.setSelect),K.done(),delete o.setSelect),q.refresh(),o.bgColor!=V&&(ie(o.shade?q.getShades():D,o.shade&&o.shadeColor||o.bgColor),V=o.bgColor),j!=o.bgOpacity&&(j=o.bgOpacity,o.shade?q.refresh():K.setBgOpacity(j)),O=o.maxSize[0]||0,N=o.maxSize[1]||0,L=o.minSize[0]||0,F=o.minSize[1]||0,o.hasOwnProperty("outerImage")&&(E.attr("src",o.outerImage),delete o.outerImage),K.refresh()}U.support&&W.bind("touchstart.jcrop",U.newSelection),R.hide(),ne(!0);var oe={setImage:function(e,t){K.release(),ee();var i=new Image;i.onload=function(){var n=i.width,r=i.height,s=o.boxWidth,a=o.boxHeight;E.width(n).height(r),E.attr("src",e),M.attr("src",e),m(E,s,a),T=E.width(),k=E.height(),M.width(T).height(k),W.width(T+2*z).height(k+2*z),D.width(T).height(k),q.resize(T,k),te(),"function"==typeof t&&t.call(oe)},i.src=e},animateTo:function(e,t){var i=e[0]/$,n=e[1]/G,r=e[2]/$,s=e[3]/G;if(!H){var a=Y.flipCoords(i,n,r,s),l=Y.getFixed(),c=[l.x,l.y,l.x2,l.y2],d=c,u=o.animationDelay,h=a[0]-c[0],p=a[1]-c[1],g=a[2]-c[2],f=a[3]-c[3],m=0,v=o.swingSpeed;i=d[0],n=d[1],r=d[2],s=d[3],K.animMode(!0);var b=function(){m+=(100-m)/v,d[0]=Math.round(i+m/100*h),d[1]=Math.round(n+m/100*p),d[2]=Math.round(r+m/100*g),d[3]=Math.round(s+m/100*f),m>=99.8&&(m=100),m<100?(Q(d),y()):(K.done(),K.animMode(!1),"function"==typeof t&&t.call(oe))};y()}function y(){window.setTimeout(b,u)}},setSelect:J,setOptions:function(e){h(e),ne()},tellSelect:function(){return v(Y.getFixed())},tellScaled:function(){return Y.getFixed()},setClass:function(e){D.removeClass().addClass(c("holder")).addClass(e)},disable:ee,enable:te,cancel:function(){K.done(),X.activateHandlers(null,null)},release:K.release,destroy:function(){D.remove(),S.show(),S.css("visibility","visible"),e(t).removeData("Jcrop")},focus:Z.watchKeys,getBounds:function(){return[T*$,k*G]},getWidgetSize:function(){return[T,k]},getScaleFactor:function(){return[$,G]},getOptions:function(){return o},ui:{holder:D,selection:I}};return s&&D.bind("selectstart",function(){return!1}),S.data("Jcrop",oe),oe},e.fn.Jcrop=function(t,i){var n;return this.each(function(){if(e(this).data("Jcrop")){if("api"===t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else"IMG"==this.tagName?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),n=e.Jcrop(this,t),e.isFunction(i)&&i.call(n)}):(e(this).css({display:"block",visibility:"hidden"}),n=e.Jcrop(this,t),e.isFunction(i)&&i.call(n))}),this},e.Jcrop.Loader=function(t,i,n){var o=e(t),r=o[0];o.bind("load.jcloader",function t(){r.complete?(o.unbind(".jcloader"),e.isFunction(i)&&i.call(r)):window.setTimeout(t,50)}).bind("error.jcloader",function(t){o.unbind(".jcloader"),e.isFunction(n)&&n.call(r)}),r.complete&&e.isFunction(i)&&(o.unbind(".jcloader"),i.call(r))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):t(e.jQuery)}(this,function(e){"use strict";e.extendext=function(){var t,i,n,o,r,s,a=arguments[0]||{},l=1,c=arguments.length,d=!1,u="default";for("boolean"==typeof a&&(d=a,a=arguments[l++]||{}),"string"==typeof a&&(u=e([a.toLowerCase(),"default"]).filter(["default","concat","replace","extend"])[0],a=arguments[l++]||{}),"object"==typeof a||e.isFunction(a)||(a={}),l===c&&(a=this,l--);l<c;l++)if(null!==(t=arguments[l]))if(e.isArray(t)&&"default"!==u)switch(s=a&&e.isArray(a)?a:[],u){case"concat":a=s.concat(e.extend(d,[],t));break;case"replace":a=e.extend(d,[],t);break;case"extend":t.forEach(function(t,i){if("object"==typeof t){var n=e.isArray(t)?[]:{};s[i]=e.extendext(d,u,s[i]||n,t)}else-1===s.indexOf(t)&&s.push(t)}),a=s}else for(i in t)n=a[i],a!==(o=t[i])&&(d&&o&&(e.isPlainObject(o)||(r=e.isArray(o)))?(r?(r=!1,s=n&&e.isArray(n)?n:[]):s=n&&e.isPlainObject(n)?n:{},a[i]=e.extendext(d,u,s,o)):void 0!==o&&(a[i]=o));return a}}),function(){"use strict";var e,t={version:"1.0.3",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0};t.encodeHTMLSource=function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(i,function(e){return t[e]||e}):""}},e=function(){return this||(0,eval)("this")}(),"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):e.doT=t;var i={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},n=/$^/;function o(e,t,i){return("string"==typeof t?t:t.toString()).replace(e.define||n,function(t,n,o,r){return 0===n.indexOf("def.")&&(n=n.substring(4)),n in i||(":"===o?(e.defineParams&&r.replace(e.defineParams,function(e,t,o){i[n]={arg:t,text:o}}),n in i||(i[n]=r)):new Function("def","def['"+n+"']="+r)(i)),""}).replace(e.use||n,function(t,n){e.useParams&&(n=n.replace(e.useParams,function(e,t,n,o){if(i[n]&&i[n].arg&&o){var r=(n+":"+o).replace(/'|\\/g,"_");return i.__exp=i.__exp||{},i.__exp[r]=i[n].text.replace(new RegExp("(^|[^\\w$])"+i[n].arg+"([^\\w$])","g"),"$1"+o+"$2"),t+"def.__exp['"+r+"']"}}));var r=new Function("def","return "+n)(i);return r?o(e,r,i):r})}function r(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}t.template=function(s,a,l){var c,d,u=(a=a||t.templateSettings).append?i.append:i.split,h=0,p=a.use||a.define?o(a,s,l||{}):s;p=("var out='"+(a.strip?p.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):p).replace(/'|\\/g,"\\$&").replace(a.interpolate||n,function(e,t){return u.start+r(t)+u.end}).replace(a.encode||n,function(e,t){return c=!0,u.startencode+r(t)+u.end}).replace(a.conditional||n,function(e,t,i){return t?i?"';}else if("+r(i)+"){out+='":"';}else{out+='":i?"';if("+r(i)+"){out+='":"';}out+='"}).replace(a.iterate||n,function(e,t,i,n){return t?(h+=1,d=n||"i"+h,t=r(t),"';var arr"+h+"="+t+";if(arr"+h+"){var "+i+","+d+"=-1,l"+h+"=arr"+h+".length-1;while("+d+"<l"+h+"){"+i+"=arr"+h+"["+d+"+=1];out+='"):"';} } out+='"}).replace(a.evaluate||n,function(e,t){return"';"+r(t)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),c&&(a.selfcontained||!e||e._encodeHTML||(e._encodeHTML=t.encodeHTMLSource(a.doNotSkipEncoded)),p="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+t.encodeHTMLSource.toString()+"("+(a.doNotSkipEncoded||"")+"));"+p);try{return new Function(a.varname,p)}catch(e){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+p),e}},t.compile=function(e,i){return t.template(e,null,i)}}(),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.agGrid=t():e.agGrid=t()}(self,function(){return function(){"use strict";var e={2074:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AlignedGridsModule=void 0;const n=i(7205),o=i(8963);t.AlignedGridsModule={moduleName:"AlignedGrids",version:n.VERSION,beans:[o.AlignedGridsService]}},8963:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AlignedGridsService=void 0;const n=i(2885),o=i(8731),r=i(7764);class s extends o.BeanStub{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t="function"==typeof e;return"function"==typeof e&&(e=e()),e.map(e=>{if(!e)return(0,r._error)(18),void(t||(0,r._error)(20));if(this.isGridApi(e))return e;const i=e;return"current"in i?i.current?.api:(i.api||(0,r._error)(19),i.api)}).filter(e=>!!e&&!e.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:e})=>this.onColumnEvent(e),alignedGridScroll:({event:e})=>this.onScrollEvent(e)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){"horizontal"===e.direction&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){const i=[];return e.columns?e.columns.forEach(e=>{i.push(t(e))}):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,e=>e)}getColumnIds(e){return this.extractDataFromEvent(e,e=>e.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":this.processColumnEvent(e);break;case"columnGroupOpened":this.processGroupOpenedEvent(e);break;case"columnPivotChanged":(0,r._warn)(21)}})}processGroupOpenedEvent(e){const{colGroupSvc:t}=this.beans;t&&e.columnGroups.forEach(e=>{let i=null;e&&(i=t.getProvidedColGroup(e.getGroupId())),e&&!i||t.setColumnGroupOpened(i,e.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){const t=e.column;let i=null;const o=this.beans,{colResize:r,ctrlsSvc:s,colModel:a}=o;if(t&&(i=a.getColDefCol(t.getColId())),t&&!i)return;const l=this.getMasterColumns(e);switch(e.type){case"columnMoved":{const t=e.api.getColumnState().map(e=>({colId:e.colId}));(0,n._applyColumnState)(o,{state:t,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const t=e.api.getColumnState().map(e=>({colId:e.colId,hide:e.hide}));(0,n._applyColumnState)(o,{state:t},"alignedGridChanged")}break;case"columnPinned":{const t=e.api.getColumnState().map(e=>({colId:e.colId,pinned:e.pinned}));(0,n._applyColumnState)(o,{state:t},"alignedGridChanged")}break;case"columnResized":{const t=e,i={};l.forEach(e=>{i[e.getId()]={key:e.getColId(),newWidth:e.getActualWidth()}}),t.flexColumns?.forEach(e=>{i[e.getId()]&&delete i[e.getId()]}),r?.setColumnWidths(Object.values(i),!1,t.finished,"alignedGridChanged");break}}const c=s.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(e=>{e.setGridOption("alwaysShowVerticalScroll",c)})}}t.AlignedGridsService=s},1621:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AllCommunityModule=void 0;const n=i(2074),o=i(9642),r=i(9722),s=i(9722),a=i(3856),l=i(1690),c=i(2027),d=i(9734),u=i(4388),h=i(4652),p=i(5432),g=i(4002),f=i(9410),m=i(9519),v=i(6989),b=i(1824),y=i(5423),w=i(3498),C=i(6964),_=i(4577),S=i(4265),x=i(3352),A=i(8594),E=i(2277),T=i(5010),k=i(6431),D=i(7205);t.AllCommunityModule={moduleName:"AllCommunity",version:D.VERSION,dependsOn:[r.ClientSideRowModelModule,d.CsvExportModule,g.InfiniteRowModelModule,T.ValidationModule,h.TextEditorModule,h.NumberEditorModule,h.DateEditorModule,h.CheckboxEditorModule,h.SelectEditorModule,h.LargeTextEditorModule,h.CustomEditorModule,h.UndoRedoEditModule,p.TextFilterModule,p.NumberFilterModule,p.DateFilterModule,p.CustomFilterModule,p.QuickFilterModule,p.ExternalFilterModule,v.GridStateModule,n.AlignedGridsModule,b.PaginationModule,c.ColumnApiModule,o.RowApiModule,o.ScrollApiModule,C.RenderApiModule,a.ColumnAutoSizeModule,u.RowDragModule,y.PinnedRowModule,x.RowSelectionModule,k.ValueCacheModule,A.CellStyleModule,l.ColumnHoverModule,A.RowStyleModule,f.EventApiModule,k.CellApiModule,w.HighlightChangesModule,E.TooltipModule,m.LocaleModule,_.RowAutoHeightModule,u.DragAndDropModule,s.ClientSideRowModelApiModule,S.CellSpanModule]}},3907:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ApiFunctionService=void 0;const n=i(8731),o=i(7764),r=i(7689),s={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},a=(e,t)=>e.eventSvc.dispatchEvent(t);class l{}Reflect.defineProperty(l,"name",{value:"GridApi"});class c extends n.BeanStub{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new l,this.fns={...s,dispatchEvent:a},this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(r.gridApiFunctionsMap))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){const{fns:i,beans:n}=this;i!==s&&(i[e]=n?.validation?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{const{beans:i,fns:{[e]:n}}=this;return n?n(i,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:i,preDestroyLink:n}=this;if(t){const t=r.gridApiFunctionsMap[e];i.assertModuleRegistered(t,`api.${e}`)&&(0,o._warn)(27,{fnName:e,module:t})}else(0,o._warn)(26,{fnName:e,preDestroyLink:n})}destroy(){super.destroy(),this.fns=s,this.beans=null}}t.ApiFunctionService=c},9642:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollApiModule=t.RowApiModule=void 0;const n=i(7205),o=i(8192),r=i(1765);t.RowApiModule={moduleName:"RowApi",version:n.VERSION,apiFunctions:{redrawRows:o.redrawRows,setRowNodeExpanded:o.setRowNodeExpanded,getRowNode:o.getRowNode,addRenderedRowListener:o.addRenderedRowListener,getRenderedNodes:o.getRenderedNodes,forEachNode:o.forEachNode,getFirstDisplayedRowIndex:o.getFirstDisplayedRowIndex,getLastDisplayedRowIndex:o.getLastDisplayedRowIndex,getDisplayedRowAtIndex:o.getDisplayedRowAtIndex,getDisplayedRowCount:o.getDisplayedRowCount}},t.ScrollApiModule={moduleName:"ScrollApi",version:n.VERSION,apiFunctions:{getVerticalPixelRange:r.getVerticalPixelRange,getHorizontalPixelRange:r.getHorizontalPixelRange,ensureColumnVisible:r.ensureColumnVisible,ensureIndexVisible:r.ensureIndexVisible,ensureNodeVisible:r.ensureNodeVisible}}},6433:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createGridApi=void 0,t.createGridApi=function(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}},9875:function(e,t){function i(e,t){e.gos.updateGridOptions({options:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.updateGridOptions=t.setGridOption=t.getGridOption=t.isDestroyed=t.destroy=t.getGridId=void 0,t.getGridId=function(e){return e.context.getGridId()},t.destroy=function(e){e.gridDestroySvc.destroy()},t.isDestroyed=function(e){return e.gridDestroySvc.destroyCalled},t.getGridOption=function(e,t){return e.gos.get(t)},t.setGridOption=function(e,t,n){i(e,{[t]:n})},t.updateGridOptions=i},9513:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.onRowHeightChanged=t.collapseAll=t.expandAll=void 0;const n=i(6876);t.expandAll=function(e){e.expansionSvc?.expandAll(!0)},t.collapseAll=function(e){e.expansionSvc?.expandAll(!1)},t.onRowHeightChanged=function(e){const t=(0,n._getClientSideRowModel)(e),i=(0,n._getServerSideRowModel)(e);t?t.onRowHeightChanged():i&&i.onRowHeightChanged()}},7689:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.gridApiFunctionsMap=void 0;const i=(e,t)=>{for(const i of Object.keys(t))t[i]=e;return t};t.gridApiFunctionsMap={dispatchEvent:"CommunityCore",...i("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0}),...i("GridState",{getState:0}),...i("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...i("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...i("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...i("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...i("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...i("ValueCache",{expireValueCache:0}),...i("CellApi",{getCellValue:0}),...i("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),...i("Sort",{onSortChanged:0}),...i("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0}),...i("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...i("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...i("HighlightChanges",{flashCells:0}),...i("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0}),...i("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...i("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...i("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...i("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),...i("ColumnResize",{setColumnWidths:0}),...i("ColumnHover",{isColumnHovered:0}),...i("EditCore",{getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0}),...i("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...i("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),...i("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0}),...i("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...i("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...i("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0,onRowHeightChanged:0}),...i("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...i("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...i("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),...i("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...i("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...i("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...i("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...i("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...i("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...i("ContextMenu",{showContextMenu:0}),...i("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),...i("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...i("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...i("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...i("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...i("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...i("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...i("StatusBar",{getStatusPanel:0})}},8192:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDisplayedRowCount=t.getDisplayedRowAtIndex=t.getLastDisplayedRowIndex=t.getFirstDisplayedRowIndex=t.forEachNode=t.getRenderedNodes=t.addRenderedRowListener=t.getRowNode=t.setRowNodeExpanded=t.redrawRows=void 0,t.redrawRows=function(e,t={}){const i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(i))},t.setRowNodeExpanded=function e(t,i,n,o,r){i&&(o&&i.parent&&-1!==i.parent.level&&e(t,i.parent,n,o,r),i.setExpanded(n,void 0,r))},t.getRowNode=function(e,t){return e.rowModel.getRowNode(t)},t.addRenderedRowListener=function(e,t,i,n){e.rowRenderer.addRenderedRowListener(t,i,n)},t.getRenderedNodes=function(e){return e.rowRenderer.getRenderedNodes()},t.forEachNode=function(e,t,i){e.rowModel.forEachNode(t,i)},t.getFirstDisplayedRowIndex=function(e){return e.rowRenderer.firstRenderedRow},t.getLastDisplayedRowIndex=function(e){return e.rowRenderer.lastRenderedRow},t.getDisplayedRowAtIndex=function(e,t){return e.rowModel.getRow(t)},t.getDisplayedRowCount=function(e){return e.rowModel.getRowCount()}},6876:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._getServerSideRowModel=t._getInfiniteRowModel=t._getClientSideRowModel=void 0,t._getClientSideRowModel=function(e){const t=e.rowModel;return"clientSide"===t.getType()?t:void 0},t._getInfiniteRowModel=function(e){const t=e.rowModel;return"infinite"===t.getType()?t:void 0},t._getServerSideRowModel=function(e){const t=e.rowModel;return"serverSide"===t.getType()?t:void 0}},1765:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ensureNodeVisible=t.ensureIndexVisible=t.ensureColumnVisible=t.getHorizontalPixelRange=t.getVerticalPixelRange=void 0,t.getVerticalPixelRange=function(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()},t.getHorizontalPixelRange=function(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()},t.ensureColumnVisible=function(e,t,i="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,i),"ensureVisible")},t.ensureIndexVisible=function(e,t,i){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,i),"ensureVisible")},t.ensureNodeVisible=function(e,t,i=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,i),"ensureVisible")}},6437:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SsrmInfiniteSharedApiModule=t.CsrmSsrmSharedApiModule=void 0;const n=i(7205),o=i(9513),r=i(8496);t.CsrmSsrmSharedApiModule={moduleName:"CsrmSsrmSharedApi",version:n.VERSION,apiFunctions:{expandAll:o.expandAll,collapseAll:o.collapseAll,onRowHeightChanged:o.onRowHeightChanged}},t.SsrmInfiniteSharedApiModule={moduleName:"SsrmInfiniteSharedApi",version:n.VERSION,apiFunctions:{setRowCount:r.setRowCount,getCacheBlockState:r.getCacheBlockState,isLastRowIndexKnown:r.isLastRowIndexKnown}}},8496:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.isLastRowIndexKnown=t.getCacheBlockState=t.setRowCount=void 0;const n=i(7274),o=i(7764),r=i(6876);t.setRowCount=function(e,t,i){const n=(0,r._getServerSideRowModel)(e);if(n)return 0===e.rowGroupColsSvc?.columns.length?t<0?void(0,o._error)(238):void n.setRowCount(t,i):void(0,o._error)(28);const s=(0,r._getInfiniteRowModel)(e);s&&s.setRowCount(t,i)},t.getCacheBlockState=function(e){return(0,n._isServerSideRowModel)(e.gos)?e.rowModel.getBlockStates():e.rowNodeBlockLoader?.getBlockState()??{}},t.isLastRowIndexKnown=function(e){return e.rowModel.isLastRowIndexKnown()}},5628:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AutoScrollService=void 0,t.AutoScrollService=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=-1!==e.scrollAxis.indexOf("x"),this.scrollVertically=-1!==e.scrollAxis.indexOf("y"),this.scrollByTick=null!=e.scrollByTick?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;const n=this.scrollContainer.getBoundingClientRect(),o=this.scrollByTick;this.tickLeft=e.clientX<n.left+o,this.tickRight=e.clientX>n.right-o,this.tickUp=e.clientY<n.top+o&&!i,this.tickDown=e.clientY>n.bottom-o&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}}},3263:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BASE_URL=void 0,t.BASE_URL="https://www.ag-grid.com"},1954:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractClientSideNodeManager=void 0;const n=i(8731),o=i(3373),r=i(7274),s=i(7764);class a extends n.BeanStub{constructor(){super(...arguments),this.nextId=0,this.allNodesMap={},this.rootNode=null}get treeData(){return!1}getRowNode(e){return this.allNodesMap[e]}extractRowData(){return this.rootNode?.allLeafChildren?.map(e=>e.data)}activate(e){this.rootNode=e,e.group=!0,e.level=-1,e.id="ROOT_NODE_ID",e.allLeafChildren=[],e.childrenAfterGroup=[],e.childrenAfterSort=[],e.childrenAfterAggFilter=[],e.childrenAfterFilter=[],this.updateRootSiblingArrays(e)}deactivate(){this.rootNode&&(this.allNodesMap={},this.rootNode=null)}destroy(){super.destroy(),this.allNodesMap={},this.rootNode=null}setNewRowData(e){const t=this.rootNode;t&&(this.dispatchRowDataUpdateStartedEvent(e),t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.allNodesMap={},this.nextId=0,this.loadNewRowData(e),this.updateRootSiblingArrays(t))}updateRootSiblingArrays(e){const t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter,t.childrenAfterGroup=e.childrenAfterGroup,t.childrenAfterAggFilter=e.childrenAfterAggFilter,t.childrenAfterSort=e.childrenAfterSort,t.childrenMapped=e.childrenMapped,t.allLeafChildren=e.allLeafChildren)}loadNewRowData(e){this.rootNode.allLeafChildren=e?.map((e,t)=>this.createRowNode(e,t))??[]}setImmutableRowData(e,t){const i=(0,r._getRowIdCallback)(this.gos),n=!this.gos.get("suppressMaintainUnsortedOrder"),o=e.changedRowNodes,s=new Set,a=this.rootNode,l=a.allLeafChildren,c=l.length;let d=!1,u=!1,h=!1,p=!1;for(let e=0,r=-1,a=t.length;e<a;e++){const a=t[e];let l=this.getRowNode(i({data:a,level:0}));if(l){if(n){const e=l.sourceRowIndex;p||(p=e<=r||d),r=e}l.data!==a&&(h=!0,l.updateData(a),o.update(l))}else d=!0,l=this.createRowNode(a,-1),o.add(l);s.add(l)}const g=[];for(let e=0;e<c;e++){const t=l[e];s.has(t)||(u=!0,t.isSelected()&&g.push(t),this.rowNodeDeleted(t),o.remove(t))}if(d||u||p){const t=new Array(s.size);let i=0;if(!n)for(let e=0;e<c;++e){const n=l[e];s.delete(n)&&(n.sourceRowIndex=i,t[i++]=n)}for(const e of s)e.sourceRowIndex=i,t[i++]=e;a.allLeafChildren=t;const o=a.sibling;o&&(o.allLeafChildren=t),e.rowNodesOrderChanged||(e.rowNodesOrderChanged=p)}(d||u||p||h)&&(this.deselectNodes(g),e.rowDataUpdated=!0)}rowNodeDeleted(e){e.clearRowTopAndRowIndex();const t=e.id,i=this.allNodesMap;i[t]===e&&delete i[t]}updateRowData(e,t){this.dispatchRowDataUpdateStartedEvent(e.add);const i={changedRowNodes:t,rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},n=[],o=(0,r._getRowIdCallback)(this.gos);return this.executeRemove(o,e,i,n),this.executeUpdate(o,e,i,n),this.executeAdd(e,i),this.deselectNodes(n),i}executeAdd(e,t){const i=e.add;if(!i?.length)return;let n=this.rootNode.allLeafChildren,o=n.length;if("number"==typeof e.addIndex&&(o=this.sanitizeAddIndex(e.addIndex),o>0)&&this.gos.get("treeData")&&this.gos.get("getDataPath"))for(let e=0;e<n.length;e++){const t=n[e];if(t?.rowIndex==o-1){o=e+1;break}}const r=i.length,s=t.changedRowNodes,a=new Array(r);for(let e=0;e<r;e++){const t=this.createRowNode(i[e],o+e);s.add(t),a[e]=t}const l=this.rootNode;if(o<n.length){const e=n.slice(0,o),i=n.slice(o,n.length),r=e.length+a.length;for(let e=0,t=i.length;e<t;++e)i[e].sourceRowIndex=r+e;n=[...e,...a,...i],t.rowsInserted=!0}else n=n.concat(a);l.allLeafChildren=n;const c=l.sibling;c&&(c.allLeafChildren=n),t.rowNodeTransaction.add=a}executeRemove(e,t,{changedRowNodes:i,rowNodeTransaction:n},o){const{remove:r}=t;if(!r?.length)return;const s={};r.forEach(t=>{const r=this.lookupRowNode(e,t);r&&(r.isSelected()&&o.push(r),r.clearRowTopAndRowIndex(),s[r.id]=!0,delete this.allNodesMap[r.id],n.remove.push(r),i.remove(r))});const a=this.rootNode;a.allLeafChildren=a.allLeafChildren?.filter(e=>!s[e.id])??null,a.allLeafChildren?.forEach((e,t)=>{e.sourceRowIndex=t});const l=a.sibling;l&&(l.allLeafChildren=a.allLeafChildren)}executeUpdate(e,t,{changedRowNodes:i,rowNodeTransaction:n},o){const{update:r}=t;r?.length&&r.forEach(t=>{const r=this.lookupRowNode(e,t);r&&(r.updateData(t),!r.selectable&&r.isSelected()&&o.push(r),n.update.push(r),i.update(r))})}dispatchRowDataUpdateStartedEvent(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}deselectNodes(e){const t="rowDataChanged",i=this.beans.selectionSvc,n=e.length>0;n&&i?.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),i?.updateGroupsFromChildrenSelections?.(t),n&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:t})}sanitizeAddIndex(e){const t=this.rootNode.allLeafChildren?.length??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}createRowNode(e,t){const i=new o.RowNode(this.beans);return i.parent=this.rootNode,i.level=0,i.group=!1,i.expanded=!1,i.sourceRowIndex=t,i.setDataAndId(e,String(this.nextId)),this.allNodesMap[i.id]&&(0,s._warn)(2,{nodeId:i.id}),this.allNodesMap[i.id]=i,this.nextId++,i}lookupRowNode(e,t){let i;if(e){const n=e({data:t,level:0});if(i=this.allNodesMap[n],!i)return(0,s._error)(4,{id:n}),null}else if(i=this.rootNode?.allLeafChildren?.find(e=>e.data===t),!i)return(0,s._error)(5,{data:t}),null;return i||null}}t.AbstractClientSideNodeManager=a},2106:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ChangedRowNodes=void 0,t.ChangedRowNodes=class{constructor(){this.removals=new Set,this.updates=new Set,this.adds=new Set}remove(e){this.adds.delete(e)||(this.updates.delete(e),this.removals.add(e))}update(e){this.adds.has(e)||this.updates.add(e)}add(e){this.adds.add(e)}}},8128:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ClientSideNodeManager=void 0;const n=i(1954);class o extends n.AbstractClientSideNodeManager{constructor(){super(...arguments),this.beanName="csrmNodeSvc"}}t.ClientSideNodeManager=o},3278:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ClientSideRowModel=void 0;const n=i(8731),o=i(3373),r=i(7274),s=i(1502),a=i(6800),l=i(2043),c=i(7764),d=i(2106),u=i(8287),h=i(9849);class p extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowsToDisplay=[],this.started=!1,this.isRefreshingModel=!1,this.rowNodesCountReady=!1,this.rowCountReady=!1,this.onRowHeightChanged_debounced=(0,l._debounce)(this,this.onRowHeightChanged.bind(this),100)}wireBeans(e){this.colModel=e.colModel,this.valueCache=e.valueCache,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggStage=e.aggStage,this.pivotStage=e.pivotStage,this.filterAggStage=e.filterAggStage}postConstruct(){this.orderedStages=[this.groupStage,this.filterStage,this.pivotStage,this.aggStage,this.sortStage,this.filterAggStage,this.flattenStage].filter(e=>!!e);const e=this.refreshModel.bind(this,{step:"group"}),t=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")});this.addManagedEventListeners({newColumnsLoaded:t,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new o.RowNode(this.beans);const i=this.getNewNodeManager();this.nodeManager=i,i.activate(this.rootNode)}getNewNodeManager(){const{gos:e,beans:t}=this;let i;return e.get("treeData")&&(i=e.get("treeDataChildrenField")?t.csrmChildrenTreeNodeSvc:t.csrmPathTreeNodeSvc),i??t.csrmNodeSvc}addPropertyListeners(){const e=["treeData","treeDataChildrenField",...this.orderedStages.flatMap(({refreshProps:e})=>[...e])];this.addManagedPropertyListeners(e,e=>{const t=e.changeSet?.properties;t&&this.onPropChange(t)}),this.addManagedPropertyListener("rowData",()=>this.onPropChange(["rowData"])),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,i,n){let o,s=!1;do{o=!1;const a=this.getRowIndexAtPixel(e),l=this.getRowIndexAtPixel(t),c=Math.max(a,i),d=Math.min(l,n);for(let e=c;e<=d;e++){const t=this.getRow(e);if(t.rowHeightEstimated){const e=(0,r._getRowHeightForNode)(this.beans,t);t.setRowHeight(e.height),o=!0,s=!0}}o&&this.setRowTopAndRowIndex()}while(o);return s}onPropChange(e){if(!this.rootNode)return;const t=this.gos,i=new Set(e),n={step:"nothing",changedProps:i},o=i.has("rowData"),r=i.has("treeData"),s=this.nodeManager,a=this.getNewNodeManager(),l=s!==a||i.has("treeDataChildrenField")&&t.get("treeData");let u;if(r&&(n.step="group"),(l||o)&&(u=t.get("rowData"),null==u||Array.isArray(u)||(u=null,(0,c._warn)(1))),l&&(o||(u=s?.extractRowData()??u),s!==a&&(s?.deactivate(),this.nodeManager=a),a.activate(this.rootNode)),u&&(!l&&!this.isEmpty()&&u.length>0&&t.exists("getRowId")&&!t.get("resetRowDataOnUpdate")?(n.keepRenderedRows=!0,n.animate=!this.gos.get("suppressAnimationFrame"),n.changedRowNodes=new d.ChangedRowNodes,a.setImmutableRowData(n,u)):(n.rowDataUpdated=!0,n.newData=!0,this.beans.selectionSvc?.reset("rowDataChanged"),this.rowNodesCountReady=!0,a.setNewRowData(u))),n.rowDataUpdated)n.step="group";else if("nothing"===n.step)for(const{refreshProps:t,step:i}of this.orderedStages)if(e.some(e=>t.has(e))){n.step=i;break}"nothing"!==n.step&&this.refreshModel(n)}setRowTopAndRowIndex(){const{beans:e}=this,t=e.environment.getDefaultRowHeight();let i=0;const n=new Set,o=(0,r._isDomLayout)(this.gos,"normal"),s=this.rowsToDisplay;for(let a=0,l=s.length;a<l;++a){const l=s[a];if(null!=l.id&&n.add(l.id),null==l.rowHeight){const i=(0,r._getRowHeightForNode)(e,l,o,t);l.setRowHeight(i.height,i.estimated)}l.setRowTop(i),l.setRowIndex(a),i+=l.rowHeight}return n}clearRowTopAndRowIndex(e,t){const i=e.active,n=e=>{e&&null!=e.id&&!t.has(e.id)&&e.clearRowTopAndRowIndex()},o=e=>{if(null!==e&&(n(e),n(e.detailNode),n(e.sibling),e.hasChildren()&&e.childrenAfterGroup)){const t=-1==e.level;i&&!t&&!e.expanded||e.childrenAfterGroup.forEach(o)}};o(this.rootNode)}ensureRowsAtPixel(e,t,i=0){const n=this.getRowIndexAtPixel(t),o=this.getRow(n),r=!this.gos.get("suppressAnimationFrame");if(o===e[0])return!1;const a=this.rootNode?.allLeafChildren;return!!a&&(e.forEach(e=>{(0,s._removeFromArray)(a,e)}),e.forEach((e,t)=>{a.splice(Math.max(n+i,0)+t,0,e)}),e.forEach((e,t)=>{e.sourceRowIndex=t}),this.refreshModel({step:"group",keepRenderedRows:!0,animate:r,rowNodesOrderChanged:!0}),!0)}highlightRowAtPixel(e,t){const i=null!=t?this.getRowIndexAtPixel(t):null,n=null!=i?this.getRow(i):null;if(!n||!e||null==t)return void this.clearHighlightedRow();const o=this.getHighlightPosition(t,n),r=this.isHighlightingCurrentPosition(e,n,o),s=null!=this.lastHighlightedRow&&this.lastHighlightedRow!==n;(r||s)&&(this.clearHighlightedRow(),r)||(this.setRowNodeHighlighted(n,o),this.lastHighlightedRow=n)}setRowNodeHighlighted(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchRowEvent("rowHighlightChanged"))}getHighlightPosition(e,t){if(!t){const i=this.getRowIndexAtPixel(e);if(!(t=this.getRow(i||0)))return"Below"}const{rowTop:i,rowHeight:n}=t;return e-i<n/2?"Above":"Below"}getLastHighlightedRowNode(){return this.lastHighlightedRow}isHighlightingCurrentPosition(e,t,i){if(e===t)return!0;const n="Above"===i?-1:1;return this.getRow(t.rowIndex+n)===e}clearHighlightedRow(){this.lastHighlightedRow&&(this.setRowNodeHighlighted(this.lastHighlightedRow,null),this.lastHighlightedRow=null)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){const e=this.rootNode;if(!e)return 0;if(0===this.rowsToDisplay.length)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===e)return 1;const t=e.childrenAfterAggFilter,i=e.sibling?1:0;return(t?t.length:0)+i}getTopLevelRowDisplayedIndex(e){const{rootNode:t,rowsToDisplay:i}=this;if(!t||!i.length||i[0]===t)return e;const{childrenAfterSort:n}=t,o=e=>{let t=n[e];if(this.gos.get("groupHideOpenParents"))for(;t.expanded&&t.childrenAfterSort&&t.childrenAfterSort.length>0;)t=t.childrenAfterSort[0];return t.rowIndex},{footerSvc:r}=this.beans;return r?r.getTopDisplayIndex(i,e,n,o):o(e)}getRowBounds(e){const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=(0,r._isAnimateRows)(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=(0,r._isAnimateRows)(this.gos),i=0===e.columns.length||e.columns.some(e=>e.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=(0,r._isAnimateRows)(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){const t=new a.ChangedPath(!1,this.rootNode);return e||(t.active=!1),t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;const{changedRowNodes:t,newData:i,rowDataUpdated:n}=e;return!(!t||i||!n||t.removals.size||t.adds.size)}refreshModel(e){if(!this.rootNode)return;const t=e.changedPath??(e.changedPath=this.createChangePath(!e.newData&&!!e.rowDataUpdated));if(this.nodeManager.refreshModel?.(e,this.started),this.eventSvc.dispatchEvent({type:"beforeRefreshModel",params:e}),!this.started)return;if(e.rowDataUpdated&&this.eventSvc.dispatchEvent({type:"rowDataUpdated"}),this.isRefreshingModel||this.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e))return;switch(this.isRefreshingModel=!0,e.step){case"group":this.doRowGrouping(e.changedRowNodes,t,!!e.rowNodesOrderChanged,!!e.afterColumnsChanged);case"filter":this.doFilter(t);case"pivot":this.doPivot(t);case"aggregate":this.doAggregate(t);case"filter_aggregates":this.doFilterAggregates(t);case"sort":this.doSort(e.changedRowNodes,t);case"map":this.doRowsToDisplay()}const i=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(t,i),this.isRefreshingModel=!1,this.eventSvc.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){return!this.rootNode?.allLeafChildren?.length||!this.colModel?.ready}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,n=!1;const o=[],s=(0,r._getGroupSelectsDescendants)(this.gos);return this.forEachNodeAfterFilterAndSort(r=>{if(!n)if(i&&(r===t||r===e)&&(n=!0,r.group&&s))o.push(...r.allLeafChildren);else{if(!i){if(r!==t&&r!==e)return;i=!0}(!r.group||!s)&&o.push(r)}}),o}getTopLevelNodes(){return this.rootNode?.childrenAfterGroup??null}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){const t=this.rowsToDisplay;if(this.isEmpty()||0===t.length)return-1;let i=0,n=t.length-1;if(e<=0)return 0;if((0,s._last)(t).rowTop<=e)return t.length-1;let o=-1,r=-1;for(;;){const s=Math.floor((i+n)/2),a=t[s];if(this.isRowInPixel(a,e))return s;if(a.rowTop<e?i=s+1:a.rowTop>e&&(n=s-1),o===i&&r===n)return s;o=i,r=n}}isRowInPixel(e,t){const i=e.rowTop,n=e.rowTop+e.rowHeight;return i<=t&&n>t}forEachLeafNode(e){this.rootNode?.allLeafChildren?.forEach((t,i)=>e(t,i))}forEachNode(e,t=!1){this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){this.rowsToDisplay.forEach(e)}forEachNodeAfterFilter(e,t=!1){this.depthFirstSearchRowNodes(e,t,e=>e.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e,t=!1){this.depthFirstSearchRowNodes(e,t,e=>e.childrenAfterSort)}forEachPivotNode(e,t=!1,i=!1){const n=i?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,e=>e.leafGroup?null:e[n])}depthFirstSearchRowNodes(e,t=!1,i=e=>e.childrenAfterGroup,n=this.rootNode,o=0){let r=o;if(!n)return r;const s=n===this.rootNode;s||e(n,r++);const{footerSvc:a}=this.beans;if(n.hasChildren()&&!n.footer){const o=i(n);if(o){r=a?.addTotalRows(r,n,e,t,s,"top")??r;for(const n of o)r=this.depthFirstSearchRowNodes(e,t,i,n,r);return a?.addTotalRows(r,n,e,t,s,"bottom")??r}}return r}doAggregate(e){const t=this.rootNode;t&&this.aggStage?.execute({rowNode:t,changedPath:e})}doFilterAggregates(e){const t=this.rootNode;this.filterAggStage?this.filterAggStage.execute({rowNode:t,changedPath:e}):t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){const{groupHideOpenParentsSvc:i}=this.beans;this.sortStage?this.sortStage.execute({rowNode:this.rootNode,changedRowNodes:e,changedPath:t}):t.forEachChangedNodeDepthFirst(e=>{i?.pullDownGroupDataForHideOpenParents(e.childrenAfterAggFilter,!0),e.childrenAfterSort=e.childrenAfterAggFilter.slice(0),(0,h.updateRowNodeAfterSort)(e)}),i?.updateGroupDataForHideOpenParents(t)}doRowGrouping(e,t,i,n){const o=this.nodeManager.treeData,r=this.rootNode;if(!o){const o=this.groupStage;if(o)o.execute({rowNode:r,changedPath:t,changedRowNodes:e,rowNodesOrderChanged:i,afterColumnsChanged:n});else{const e=r.sibling;r.childrenAfterGroup=r.allLeafChildren,e&&(e.childrenAfterGroup=r.childrenAfterGroup),r.updateHasChildren()}}this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage?this.filterStage.execute({rowNode:this.rootNode,changedPath:e}):e.forEachChangedNodeDepthFirst(e=>{e.childrenAfterFilter=e.childrenAfterGroup,(0,u.updateRowNodeAfterFilter)(e)},!0)}doPivot(e){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getRowNode(e){if("string"==typeof e&&0==e.indexOf(o.ROW_ID_PREFIX_ROW_GROUP)){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}return this.nodeManager.getRowNode(e)}batchUpdateRowData(e,t){if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];const e=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},e)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache?.onDataChanged();const e=[],t=[],i=new d.ChangedRowNodes;let n=!1;this.rowDataTransactionBatch?.forEach(o=>{this.rowNodesCountReady=!0;const{rowNodeTransaction:r,rowsInserted:s}=this.nodeManager.updateRowData(o.rowDataTransaction,i);s&&(n=!0),t.push(r),o.callback&&e.push(o.callback.bind(null,r))}),this.commitTransactions(n,i),e.length>0&&window.setTimeout(()=>{e.forEach(e=>e())},0),t.length>0&&this.eventSvc.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache?.onDataChanged(),this.rowNodesCountReady=!0;const t=new d.ChangedRowNodes,{rowNodeTransaction:i,rowsInserted:n}=this.nodeManager.updateRowData(e,t);return this.commitTransactions(n,t),i}commitTransactions(e,t){this.refreshModel({step:"group",rowDataUpdated:!0,rowNodesOrderChanged:e,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedRowNodes:t,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){const{flattenStage:e,rootNode:t}=this;let i;if(e)i=e.execute({rowNode:t});else{i=t?.childrenAfterSort??[];for(const e of i)e.setUiLevel(0)}this.rowsToDisplay=i}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){const e=this.rootNode;if(!e)return;const t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.beans.rowAutoHeight?.active)return;this.resetRowHeights()}}onGridReady(){this.started||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlightedRow(),this.started=!1,this.rootNode=null,this.nodeManager=null,this.rowDataTransactionBatch=null,this.lastHighlightedRow=null,this.orderedStages=s._EmptyArray,this.rowsToDisplay=s._EmptyArray}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}}t.ClientSideRowModel=p},4452:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getBestCostNodeSelection=t.flushAsyncTransactions=t.applyTransactionAsync=t.applyTransaction=t.resetRowHeights=t.forEachNodeAfterFilterAndSort=t.forEachNodeAfterFilter=t.forEachLeafNode=t.isRowDataEmpty=t.refreshClientSideRowModel=t.onGroupExpandedOrCollapsed=void 0;const n=i(6876),o=i(7764);t.onGroupExpandedOrCollapsed=function(e){e.expansionSvc?.onGroupExpandedOrCollapsed()},t.refreshClientSideRowModel=function(e,t){const i=(0,n._getClientSideRowModel)(e);i&&(t&&"everything"!==t||(t="group"),i.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))},t.isRowDataEmpty=function(e){return(0,n._getClientSideRowModel)(e)?.isEmpty()??!0},t.forEachLeafNode=function(e,t){(0,n._getClientSideRowModel)(e)?.forEachLeafNode(t)},t.forEachNodeAfterFilter=function(e,t){(0,n._getClientSideRowModel)(e)?.forEachNodeAfterFilter(t)},t.forEachNodeAfterFilterAndSort=function(e,t){(0,n._getClientSideRowModel)(e)?.forEachNodeAfterFilterAndSort(t)},t.resetRowHeights=function(e){e.rowAutoHeight?.active?(0,o._warn)(3):(0,n._getClientSideRowModel)(e)?.resetRowHeights()},t.applyTransaction=function(e,t){return e.frameworkOverrides.wrapIncoming(()=>(0,n._getClientSideRowModel)(e)?.updateRowData(t))},t.applyTransactionAsync=function(e,t,i){e.frameworkOverrides.wrapIncoming(()=>(0,n._getClientSideRowModel)(e)?.batchUpdateRowData(t,i))},t.flushAsyncTransactions=function(e){e.frameworkOverrides.wrapIncoming(()=>(0,n._getClientSideRowModel)(e)?.flushAsyncTransactions())},t.getBestCostNodeSelection=function(e){return e.selectionSvc?.getBestCostNodeSelection()}},9722:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ClientSideRowModelApiModule=t.ClientSideRowModelModule=void 0;const n=i(6437),o=i(6620),r=i(7205),s=i(8128),a=i(3278),l=i(4452),c=i(9849);t.ClientSideRowModelModule={moduleName:"ClientSideRowModel",version:r.VERSION,rowModels:["clientSide"],beans:[s.ClientSideNodeManager,a.ClientSideRowModel,c.SortStage],dependsOn:[o.SortModule]},t.ClientSideRowModelApiModule={moduleName:"ClientSideRowModelApi",version:r.VERSION,apiFunctions:{onGroupExpandedOrCollapsed:l.onGroupExpandedOrCollapsed,refreshClientSideRowModel:l.refreshClientSideRowModel,isRowDataEmpty:l.isRowDataEmpty,forEachLeafNode:l.forEachLeafNode,forEachNodeAfterFilter:l.forEachNodeAfterFilter,forEachNodeAfterFilterAndSort:l.forEachNodeAfterFilterAndSort,resetRowHeights:l.resetRowHeights,applyTransaction:l.applyTransaction,applyTransactionAsync:l.applyTransactionAsync,flushAsyncTransactions:l.flushAsyncTransactions,getBestCostNodeSelection:l.getBestCostNodeSelection},dependsOn:[n.CsrmSsrmSharedApiModule]}},8287:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FilterStage=t.updateRowNodeAfterFilter=void 0;const n=i(8731);function o(e){e.sibling&&(e.sibling.childrenAfterFilter=e.childrenAfterFilter)}t.updateRowNodeAfterFilter=o;class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="filterStage",this.refreshProps=new Set(["excludeChildrenWhenTreeDataFiltering"]),this.step="filter"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){const t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){const i=(t,i)=>{t.hasChildren()?t.childrenAfterFilter=e&&!i?t.childrenAfterGroup.filter(e=>{const t=e.childrenAfterFilter&&e.childrenAfterFilter.length>0,i=e.data&&this.filterManager.doesRowPassFilter({rowNode:e});return t||i}):t.childrenAfterGroup:t.childrenAfterFilter=t.childrenAfterGroup,o(t)};if(this.doingTreeDataFiltering()){const e=(t,n)=>{if(t.childrenAfterGroup)for(let o=0;o<t.childrenAfterGroup.length;o++){const r=t.childrenAfterGroup[o],s=n||this.filterManager.doesRowPassFilter({rowNode:r});r.childrenAfterGroup?e(t.childrenAfterGroup[o],s):i(r,s)}i(t,n)},n=t=>e(t,!1);t.executeFromRootNode(n)}else{const e=e=>i(e,!1);t.forEachChangedNodeDepthFirst(e,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}}t.FilterStage=r},9849:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SortStage=t.updateRowNodeAfterSort=void 0;const n=i(8731),o=i(7274),r=i(4422);function s(e){e.sibling&&(e.sibling.childrenAfterSort=e.childrenAfterSort),function(e){if((0,r._missing)(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let i=0;i<t.length;i++){const n=t[i],o=0===i,r=i===e.childrenAfterSort.length-1;n.setFirstChild(o),n.lastChild!==r&&(n.lastChild=r,n.dispatchRowEvent("lastChildChanged")),n.childIndex!==i&&(n.childIndex=i,n.dispatchRowEvent("childIndexChanged"))}}(e)}t.updateRowNodeAfterSort=s;class a extends n.BeanStub{constructor(){super(...arguments),this.beanName="sortStage",this.refreshProps=new Set(["postSortRows","groupDisplayType","accentedSort"]),this.step="sort"}execute(e){const t=this.beans,i=t.sortSvc.getSortOptions(),n=(0,r._exists)(i)&&i.length>0,s=n&&!!e.changedRowNodes&&this.gos.get("deltaSort"),a=i.some(({column:e})=>(0,o._isColumnsSortingCoupledToGroup)(t.gos)?e.isPrimary()&&e.isRowGroupActive():!!e.getColDef().showRowGroup);this.sort(t,i,n,s,e.changedRowNodes,e.changedPath,a)}sort(e,t,i,n,o,r,a){const{gos:l,colModel:c,rowGroupColsSvc:d,groupHideOpenParentsSvc:u,rowNodeSorter:h}=e,p=l.get("groupMaintainOrder"),g=c.getCols().some(e=>e.isRowGroupActive()),f=c.isPivotMode(),m=l.getCallback("postSortRows");r?.forEachChangedNodeDepthFirst(e=>{u?.pullDownGroupDataForHideOpenParents(e.childrenAfterAggFilter,!0);const l=f&&e.leafGroup;let c;if(p&&g&&!e.leafGroup&&!a){const t=d?.columns?.[e.level+1],i=null===t?.getSort(),n=e.childrenAfterAggFilter.slice(0);if(e.childrenAfterSort&&!i){const t={};e.childrenAfterSort.forEach((e,i)=>{t[e.id]=i}),n.sort((e,i)=>(t[e.id]??0)-(t[i.id]??0))}c=n}else c=!i||l?e.childrenAfterAggFilter.slice(0):n&&o?function(e,t,i,n,o){const r=t.childrenAfterAggFilter,s=t.childrenAfterSort;if(!s)return e.doFullSort(r,o);const a=new Set,l=[],{updates:c,adds:d}=i;for(let e=0,t=r.length;e<t;++e){const t=r[e];c.has(t)||d.has(t)||n&&!n.canSkip(t)?l.push({currentPos:l.length,rowNode:t}):a.add(t.id)}const u=s.filter(e=>a.has(e.id)).map((e,t)=>({currentPos:t,rowNode:e}));return l.sort((t,i)=>e.compareRowNodes(o,t,i)),function(e,t,i,n){const o=[];let r=0,s=0;const a=i.length,l=n.length;for(;r<a&&s<l;){const a=i[r],l=n[s];let c;e.compareRowNodes(t,a,l)<0?(c=a,++r):(c=l,++s),o.push(c.rowNode)}for(;r<a;)o.push(i[r++].rowNode);for(;s<l;)o.push(n[s++].rowNode);return o}(e,o,l,u)}(h,e,o,r,t):h.doFullSort(e.childrenAfterAggFilter,t);if(e.childrenAfterSort=c,s(e),m){const t={nodes:e.childrenAfterSort};m(t)}})}}t.SortStage=a},3218:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.autoSizeAllColumns=t.autoSizeColumns=t.sizeColumnsToFit=void 0,t.sizeColumnsToFit=function(e,t){"number"==typeof t?e.colAutosize?.sizeColumnsToFit(t,"api"):e.colAutosize?.sizeColumnsToFitGridBody(t)},t.autoSizeColumns=function(e,t,i){e.colAutosize?.autoSizeCols({colKeys:t,skipHeader:i,source:"api"})},t.autoSizeAllColumns=function(e,t){e.colAutosize?.autoSizeAllColumns("api",t)}},3856:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnAutoSizeModule=void 0;const n=i(447),o=i(7205),r=i(3218),s=i(4817);t.ColumnAutoSizeModule={moduleName:"ColumnAutoSize",version:o.VERSION,beans:[s.ColumnAutosizeService],apiFunctions:{sizeColumnsToFit:r.sizeColumnsToFit,autoSizeColumns:r.autoSizeColumns,autoSizeAllColumns:r.autoSizeAllColumns},dependsOn:[n.AutoWidthModule]}},4817:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnAutosizeService=void 0;const n=i(2934),o=i(3146),r=i(8731),s=i(1502),a=i(3507),l=i(7764),c=i(9644);class d extends r.BeanStub{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}autoSizeCols(e){if(this.shouldQueueResizeOperations)return void this.pushResizeOperation(()=>this.autoSizeCols(e));const{colKeys:t,skipHeader:i,skipHeaderGroups:r,stopAtGroup:s,source:a="api"}=e,{animationFrameSvc:l,renderStatus:c,colModel:d,autoWidthCalc:h,visibleCols:p}=this.beans;if(l?.flushAllFrames(),this.timesDelayed<5&&c&&!c.areHeaderCellsRendered())return this.timesDelayed++,void setTimeout(()=>{this.isAlive()&&this.autoSizeCols(e)});this.timesDelayed=0;const g=[];let f=-1;const m=null!=i?i:this.gos.get("skipHeaderOnAutoSize"),v=null!=r?r:m;for(;0!==f;){f=0;const e=[];t.forEach(t=>{if(!t)return;const i=d.getCol(t);if(!i||(0,o.isRowNumberCol)(i))return;if(g.indexOf(i)>=0)return;const n=h.getPreferredWidthForColumn(i,m);if(n>0){const e=u(i,n);i.setActualWidth(e,a),g.push(i),f++}e.push(i)}),e.length&&p.refresh(a)}v||this.autoSizeColumnGroupsByColumns(t,a,s),(0,n.dispatchColumnResizedEvent)(this.eventSvc,g,!0,"autosizeColumns")}autoSizeColumn(e,t,i){e&&this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const{colModel:n,ctrlsSvc:o}=this.beans,r=new Set;let s;n.getColsForKeys(e).forEach(e=>{let t=e.getParent();for(;t&&t!=i;)t.isPadding()||r.add(t),t=t.getParent()});for(const e of r){for(const t of o.getHeaderRowContainerCtrls())if(s=t.getHeaderCtrlForColumn(e),s)break;s&&s.resizeLeafColumnsToFit(t)}return[]}autoSizeAllColumns(e,t){if(this.shouldQueueResizeOperations)return void this.pushResizeOperation(()=>this.autoSizeAllColumns(e,t));const i=this.beans.visibleCols.allCols;this.autoSizeCols({colKeys:i,skipHeader:t,source:e})}addColumnAutosize(e,t){const i=this.gos.get("skipHeaderOnAutoSize"),n=()=>{this.autoSizeColumn(t,"uiColumnResized",i)};e.addEventListener("dblclick",n);const o=new c.TouchListener(e);return o.addEventListener("doubleTap",n),()=>{e.removeEventListener("dblclick",n),o.removeEventListener("doubleTap",n),o.destroy()}}addColumnGroupResize(e,t,i){const n=this.gos.get("skipHeaderOnAutoSize"),o=()=>{const e=[];t.getDisplayedLeafColumns().forEach(t=>{t.getColDef().suppressAutoSize||e.push(t.getColId())}),e.length>0&&this.autoSizeCols({colKeys:e,skipHeader:n,stopAtGroup:t,source:"uiColumnResized"}),i()};return e.addEventListener("dblclick",o),()=>e.removeEventListener("dblclick",o)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;const{ctrlsSvc:i,scrollVisibleSvc:n}=this.beans,o=i.getGridBodyCtrl(),r=o.isVerticalScrollShowing()?n.getScrollbarWidth():0,s=(0,a._getInnerWidth)(o.eGridBody)-r;s>0?this.sizeColumnsToFit(s,"sizeColumnsToFit",!1,e):void 0===t?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,100)},0):100===t?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,500)},100):500===t?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,-1)},500):(0,l._warn)(29)}sizeColumnsToFit(e,t="sizeColumnsToFit",i,r){if(this.shouldQueueResizeOperations)return void this.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,i,r));const a={};r&&r?.columnLimits?.forEach(({key:e,...t})=>{a["string"==typeof e?e:e.getColId()]=t});const l=this.beans.visibleCols.allCols,c=e===(0,o.getWidthOfColsInList)(l);if(e<=0||!l.length||c)return;const d=[],u=[];l.forEach(e=>{!0===e.getColDef().suppressSizeToFit?u.push(e):d.push(e)});const h=d.slice(0);let p=!1;const g=e=>{(0,s._removeFromArray)(d,e),u.push(e)};for(d.forEach(e=>{e.resetActualWidth(t);const i=a?.[e.getId()],n=i?.minWidth??r?.defaultMinWidth,o=i?.maxWidth??r?.defaultMaxWidth,s=e.getActualWidth();"number"==typeof n&&s<n?e.setActualWidth(n,t,!0):"number"==typeof o&&s>o&&e.setActualWidth(o,t,!0)});!p;){p=!0;const i=e-(0,o.getWidthOfColsInList)(u);if(i<=0)d.forEach(e=>{const i=a?.[e.getId()]?.minWidth??r?.defaultMinWidth;"number"!=typeof i?e.setActualWidth(e.minWidth,t):e.setActualWidth(i,t,!0)});else{const e=i/(0,o.getWidthOfColsInList)(d);let n=i;for(let i=d.length-1;i>=0;i--){const o=d[i],s=a?.[o.getId()],l=s?.minWidth??r?.defaultMinWidth,c=s?.maxWidth??r?.defaultMaxWidth,u=o.getMinWidth(),h=o.getMaxWidth(),f="number"==typeof l&&l>u?l:u,m="number"==typeof c&&c<h?c:h;let v=Math.round(o.getActualWidth()*e);v<f?(v=f,g(o),p=!1):v>m?(v=m,g(o),p=!1):0===i&&(v=n),o.setActualWidth(v,t,!0),n-=v}}}h.forEach(e=>{e.fireColumnWidthChangedEvent(t)});const f=this.beans.visibleCols;f.setLeftValues(t),f.updateBodyWidths(),i||(0,n.dispatchColumnResizedEvent)(this.eventSvc,h,!0,t)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout(()=>{if("fitGridWidth"===t){const{columnLimits:t,defaultMinWidth:i,defaultMaxWidth:n}=e,o=t?.map(({colId:e,minWidth:t,maxWidth:i})=>({key:e,minWidth:t,maxWidth:i}));this.sizeColumnsToFitGridBody({defaultMinWidth:i,defaultMaxWidth:n,columnLimits:o})}else"fitProvidedWidth"===t&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if("fitCellContents"!==e?.type)return;const{colIds:t,skipHeader:i}=e;setTimeout(()=>{t?this.autoSizeCols({colKeys:t,skipHeader:i,source:"autosizeColumns"}):this.autoSizeAllColumns("autosizeColumns",i)})}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}}function u(e,t){const i=e.getMinWidth();t<i&&(t=i);const n=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=n),t}t.ColumnAutosizeService=d},9607:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.columnMovingCSS=void 0,t.columnMovingCSS=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}"},9122:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnAnimationService=void 0;const n=i(8731);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){const{executeNextFuncs:i,executeLaterFuncs:n}=this;if(0===i.length&&0===n.length)return e(),void t();const o=e=>{for(;e.length;){const t=e.pop();t&&t()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),o(i)},0),window.setTimeout(()=>{t(),o(n)},200)})}}t.ColumnAnimationService=o},3052:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BodyDropPivotTarget=void 0;const n=i(8731);class o extends n.BeanStub{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach(e=>{e.isPrimary()&&(e.isAnyFunctionActive()||(e.isAllowValue()?this.columnsToAggregate.push(e):e.isAllowRowGroup()?this.columnsToGroup.push(e):e.isAllowPivot()&&this.columnsToPivot.push(e)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:i,pivotColsSvc:n}=this.beans;this.columnsToAggregate.length>0&&t?.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&i?.addColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&n?.addColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}}t.BodyDropPivotTarget=o},7912:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BodyDropTarget=void 0;const n=i(8731),o=i(2903),r=i(3052),s=i(2909);class a extends n.BeanStub{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,i=this.pinned;e.whenReady(this,e=>{let t;const n=e.gridBodyCtrl.eBodyViewport;switch(i){case"left":t=[[n,e.left.eContainer],[e.bottomLeft.eContainer],[e.topLeft.eContainer]];break;case"right":t=[[n,e.right.eContainer],[e.bottomRight.eContainer],[e.topRight.eContainer]];break;default:t=[[n,e.center.eViewport],[e.bottomCenter.eViewport],[e.topCenter.eViewport]]}this.eSecondaryContainers=t}),this.moveColumnFeature=this.createManagedBean(new s.MoveColumnFeature(i)),this.bodyDropPivotTarget=this.createManagedBean(new r.BodyDropPivotTarget(i)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return e===o.DragSourceType.HeaderCell||e===o.DragSourceType.ToolPanel&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&e.dragSource.type===o.DragSourceType.ToolPanel}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}}t.BodyDropTarget=a},2909:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MoveColumnFeature=void 0;const n=i(8731),o=i(2903),r=i(2783),s=i(1502),a=i(4422),l=i(5446);class c extends n.BeanStub{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!(0,a._exists)(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){const{pinned:e,lastDraggingEvent:t}=this,i=t?.dragItem.columns??[];for(const t of i){const i=t.getPinned();if(t.getColDef().lockPinned){if(i==e)return"move"}else{if(i===e||!e)return"move";if(!i&&e)return"pinned"}}return"notAllowed"}onDragEnter(e){const t=e.dragItem,i=t.columns;if(e.dragSource.type===o.DragSourceType.ToolPanel)this.setColumnsVisible(i,!0,"uiColumnDragged");else{const e=t.visibleState,n=(i||[]).filter(t=>e[t.getId()]);this.setColumnsVisible(n,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(i,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,n=!1){const{gos:o,ctrlsSvc:r}=this.beans,s=o.get("suppressMoveWhenColumnDragging");if(n&&!s)return void this.finishColumnMoving();if(this.lastDraggingEvent=e,!e||!n&&(0,a._missing)(e.hDirection))return;const c=(0,l.normaliseX)({x:e.x,pinned:this.pinned,gos:o,ctrlsSvc:r});t||this.checkCenterForScrolling(c),s?this.handleColumnDragWhileSuppressingMovement(e,t,i,c,n):this.handleColumnDragWhileAllowingMovement(e,t,i,c,n)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(!e)return;const n=e.filter(e=>!e.getColDef().lockVisible);this.beans.colModel.setColsVisible(n,t,i)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:i}=e;this.beans.colMoves.moveColumns(t,i,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,t,i,n,o){const r=this.getAllMovingColumns(e,!0);if(o){const e=this.isAttemptingToPin(r);e&&this.attemptToPinColumns(r,void 0,!0);const{fromLeft:n,xPosition:o}=this.getNormalisedXPositionInfo(r,e)||{};if(null==n||null==o)return void this.finishColumnMoving();this.moveColumnsAfterHighlight({allMovingColumns:r,xPosition:o,fromEnter:t,fakeEvent:i,fromLeft:n})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(r,n)}}handleColumnDragWhileAllowingMovement(e,t,i,n,r){const s=this.getAllMovingColumns(e),a="right"===this.normaliseDirection(e.hDirection),c=e.dragSource.type===o.DragSourceType.HeaderCell,d=this.getMoveColumnParams({allMovingColumns:s,isFromHeader:c,xPosition:n,fromLeft:a,fromEnter:t,fakeEvent:i}),u=(0,l.attemptMoveColumns)({...d,finished:r});u&&(this.lastMovedInfo=u)}getAllMovingColumns(e,t=!1){const i=e.dragSource.getDragItem();let n=null;return t?(n=i.columnsInSplit,n||(n=i.columns)):n=i.columns,n?n.filter(e=>!e.getColDef().lockPinned||e.getPinned()==this.pinned):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:i,xPosition:n,fromLeft:o,fromEnter:r,fakeEvent:s}=e,{gos:a,colModel:l,colMoves:c,visibleCols:d}=this.beans;return{allMovingColumns:t,isFromHeader:i,fromLeft:o,xPosition:n,pinned:this.pinned,fromEnter:r,fakeEvent:s,gos:a,colModel:l,colMoves:c,visibleCols:d}}highlightHoveredColumn(e,t){const{gos:i,colModel:n}=this.beans,o=i.get("enableRtl"),a=n.getCols().filter(e=>e.isVisible()&&e.getPinned()===this.pinned);let l,c=null,u=null,h=null;for(const e of a){if(u=e.getActualWidth(),c=this.getNormalisedColumnLeft(e,0,o),null!=c&&c<=t&&c+u>=t){h=e;break}c=null,u=null}if(h)-1!==e.indexOf(h)&&(h=null);else{for(let e=a.length-1;e>=0;e--){const t=a[e],i=a[e].getParent();if(!i){h=t;break}const n=i?.getDisplayedLeafColumns();if(n.length){h=(0,s._last)(n);break}}if(!h)return;c=this.getNormalisedColumnLeft(h,0,o),u=h.getActualWidth()}this.lastHighlightedColumn?.column!==h&&this.clearHighlighted(),null!=h&&null!=c&&null!=u&&(l=t-c<u/2!==o?r.ColumnHighlightPosition.Before:r.ColumnHighlightPosition.After,d(h,l),this.lastHighlightedColumn={column:h,position:l})}getNormalisedXPositionInfo(e,t){const{gos:i,visibleCols:n}=this.beans,o=i.get("enableRtl"),{firstMovingCol:s,column:a,position:l}=this.getColumnMoveAndTargetInfo(e,t,o);if(!s||!a||null==l)return;const c=n.allCols,d=c.indexOf(s),u=c.indexOf(a),h=l===r.ColumnHighlightPosition.Before!==o,p=d<u||d===u&&!h;let g=0;if(h?p&&(g-=1):p||(g+=1),u+g===d)return;const f=c[u+g];return f?{fromLeft:p,xPosition:this.getNormalisedColumnLeft(f,20,o)}:void 0}getColumnMoveAndTargetInfo(e,t,i){const n=this.lastHighlightedColumn||{},{firstMovingCol:o,lastMovingCol:s}=function(e){const t=e.length;let i,n;for(let o=0;o<t;o++){if(!i){const t=e[o];null!=t.getLeft()&&(i=t)}if(!n){const i=e[t-1-o];null!=i.getLeft()&&(n=i)}if(i&&n)break}return{firstMovingCol:i,lastMovingCol:n}}(e);if(!o||!s||n.column||!t)return{firstMovingCol:o,...n};const a="left"===this.getPinDirection();return{firstMovingCol:o,position:a?r.ColumnHighlightPosition.After:r.ColumnHighlightPosition.Before,column:a!==i?o:s}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,i){const{gos:n,ctrlsSvc:o}=this.beans,r=e.getLeft();if(null==r)return null;const s=e.getActualWidth();return(0,l.normaliseX)({x:i?r+s-t:r+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:n,ctrlsSvc:o})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>7;return t&&i||e.some(e=>e.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:i,fromEnter:n,fakeEvent:o,fromLeft:r}=e,s=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:r,fromEnter:n,fakeEvent:o}),{columns:a,toIndex:c}=(0,l.getBestColumnMoveIndexFromXPosition)(s)||{};a&&null!=c&&(this.lastMovedInfo={columns:a,toIndex:c}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(d(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),i=t.getCenterViewportScrollLeft(),n=i+t.getCenterWidth();let o,r;this.gos.get("enableRtl")?(o=e<i+50,r=e>n-50):(r=e<i+50,o=e>n-50),this.needToMoveRight=o,this.needToMoveLeft=r,r||o?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.beans.dragAndDrop.getDragAndDropImageComponent()?.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.getDragAndDropImageComponent()?.setIcon(this.getIconName(),!1))}moveInterval(){let e;this.intervalCount++,e=10+5*this.intervalCount,e>100&&(e=100);let t=null;const i=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),0!==t)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols:e,dragAndDrop:t,gos:i}=this.beans;if(this.failedMoveAttempts<=8||!e)return;if(t.getDragAndDropImageComponent()?.setIcon("pinned",!1),!i.get("suppressMoveWhenColumnDragging")){const e=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(e,void 0,!0)}}}getPinDirection(){return this.needToMoveLeft||"left"===this.pinned?"left":this.needToMoveRight||"right"===this.pinned?"right":void 0}attemptToPinColumns(e,t,i=!1){const n=(e||[]).filter(e=>!e.getColDef().lockPinned);if(!n.length)return 0;i&&(t=this.getPinDirection());const{pinnedCols:o,dragAndDrop:r}=this.beans;return o?.setColsPinned(n,t,"uiColumnDragged"),i&&r.nudge(),n.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}}function d(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}t.MoveColumnFeature=c},852:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.moveColumns=t.moveColumnByIndex=void 0,t.moveColumnByIndex=function(e,t,i){e.colMoves?.moveColumnByIndex(t,i,"api")},t.moveColumns=function(e,t,i){e.colMoves?.moveColumns(t,i,"api")}},4074:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnMoveModule=void 0;const n=i(4388),o=i(7205),r=i(9607),s=i(9122),a=i(852),l=i(4067);t.ColumnMoveModule={moduleName:"ColumnMove",version:o.VERSION,beans:[l.ColumnMoveService,s.ColumnAnimationService],apiFunctions:{moveColumnByIndex:a.moveColumnByIndex,moveColumns:a.moveColumns},dependsOn:[n.SharedDragAndDropModule],css:[r.columnMovingCSS]}},4067:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnMoveService=void 0;const n=i(8731),o=i(2903),r=i(6908),s=i(1502),a=i(7764),l=i(7912),c=i(3505),d=i(5446);var u;!function(e){e[e.LEFT=-1]="LEFT",e[e.NONE=0]="NONE",e[e.RIGHT=1]="RIGHT"}(u||(u={}));class h extends n.BeanStub{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,i){const n=this.beans.colModel.getCols();if(!n)return;const o=n[e];this.moveColumns([o],t,i)}moveColumns(e,t,i,n=!0){const{colModel:o,colAnimation:r,visibleCols:l,eventSvc:c}=this.beans,d=o.getCols();if(!d)return;if(t>d.length-e.length)return void(0,a._warn)(30,{toIndex:t});r?.start();const u=o.getColsForKeys(e);this.doesMovePassRules(u,t)&&((0,s._moveInArray)(o.getCols(),u,t),l.refresh(i),c.dispatchEvent({type:"columnMoved",columns:u,column:1===u.length?u[0]:null,toIndex:t,finished:n,source:i})),r?.finish()}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){const{colModel:t,gos:i}=this.beans;return!!(0,c.doesMovePassMarryChildren)(e,t.getColTree())&&!!(e=>{const t=i.get("enableRtl");let n=t?u.RIGHT:u.LEFT,o=!0;return e.forEach(e=>{const i=(r=e.getColDef().lockPosition)?"left"===r||!0===r?u.LEFT:u.RIGHT:u.NONE;var r;t?i>n&&(o=!1):i<n&&(o=!1),n=i}),o})(e)}getProposedColumnOrder(e,t){const i=this.beans.colModel.getCols().slice();return(0,s._moveInArray)(i,e,t),i}createBodyDropTarget(e,t){return new l.BodyDropTarget(e,t)}moveHeader(e,t,i,n,o){const{ctrlsSvc:a,gos:l,colModel:c,visibleCols:u,focusSvc:h}=this.beans,p=t.getBoundingClientRect(),g=p.left,f=(0,r.isColumnGroup)(i),m=f?p.width:i.getActualWidth(),v="left"===e!==l.get("enableRtl"),b=(0,d.normaliseX)({x:v?g-20:g+m+20,pinned:n,fromKeyboard:!0,gos:l,ctrlsSvc:a}),y=h.focusedHeader;let w;if((0,d.attemptMoveColumns)({allMovingColumns:f?i.getLeafColumns():[i],isFromHeader:!0,fromLeft:"right"===e,xPosition:b,pinned:n,fromEnter:!1,fakeEvent:!1,gos:l,colModel:c,colMoves:this,visibleCols:u,finished:!0}),f){const e=i.getDisplayedLeafColumns();w=v?e[0]:(0,s._last)(e)}else w=i;if(a.getScrollFeature().ensureColumnVisible(w,"auto"),(!o.isAlive()||l.get("ensureDomOrder"))&&y){let e;if(f){const t=i.getGroupId(),n=i.getLeafColumns();if(!n.length)return;const o=n[0].getParent();if(!o)return;e=function(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}}(o,t)}else e=i;e&&h.focusHeaderPosition({headerPosition:{...y,column:e}})}}setDragSourceForHeader(e,t,i){const{gos:n,colModel:a,dragAndDrop:l,visibleCols:c}=this.beans;let u=!n.get("suppressDragLeaveHidesColumns");const h=(0,r.isColumnGroup)(t),p=h?t.getProvidedColumnGroup().getLeafColumns():[t],g=h?()=>function(e,t){const i=e.getProvidedColumnGroup().getLeafColumns(),n={};i.forEach(e=>n[e.getId()]=e.isVisible());const o=[];t.forEach(e=>{i.indexOf(e)>=0&&(o.push(e),(0,s._removeFromArray)(i,e))}),i.forEach(e=>o.push(e));const r=[],a=e.getLeafColumns();for(const e of o)-1!==a.indexOf(e)&&r.push(e);return{columns:o,columnsInSplit:r,visibleState:n}}(t,c.allCols):()=>function(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}(t),f={type:o.DragSourceType.HeaderCell,eElement:e,getDefaultIconName:()=>u?"hide":"notAllowed",getDragItem:g,dragItemName:i,onDragStarted:()=>{u=!n.get("suppressDragLeaveHidesColumns"),(0,d.setColumnsMoving)(p,!0)},onDragStopped:()=>(0,d.setColumnsMoving)(p,!1),onDragCancelled:()=>(0,d.setColumnsMoving)(p,!1),onGridEnter:e=>{if(u){const{columns:t=[],visibleState:i}=e??{},n=h?e=>!i||i[e.getColId()]:()=>!0,o=t.filter(e=>!e.getColDef().lockVisible&&n(e));a.setColsVisible(o,!0,"uiColumnMoved")}},onGridExit:e=>{if(u){const t=e?.columns?.filter(e=>!e.getColDef().lockVisible)||[];a.setColsVisible(t,!1,"uiColumnMoved")}}};return l.addDragSource(f,!0),f}}t.ColumnMoveService=h},3505:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.doesMovePassMarryChildren=t.placeLockedColumns=void 0;const n=i(2716),o=i(9409);t.placeLockedColumns=function(e,t){const i=[],n=[],o=[];return e.forEach(e=>{const t=e.getColDef().lockPosition;"right"===t?o.push(e):"left"===t||!0===t?i.push(e):n.push(e)}),t.get("enableRtl")?[...o,...n,...i]:[...i,...n,...o]},t.doesMovePassMarryChildren=function(e,t){let i=!0;return(0,n.depthFirstOriginalTreeSearch)(null,t,t=>{if(!(0,o.isProvidedColumnGroup)(t))return;const n=t,r=n.getColGroupDef();if(!r||!r.marryChildren)return;const s=[];n.getLeafColumns().forEach(t=>{const i=e.indexOf(t);s.push(i)}),Math.max.apply(Math,s)-Math.min.apply(Math,s)>n.getLeafColumns().length-1&&(i=!1)}),i}},5446:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.setColumnsMoving=t.normaliseX=t.attemptMoveColumns=t.getBestColumnMoveIndexFromXPosition=void 0;const n=i(1502);function o(e){const{isFromHeader:t,fromLeft:i,xPosition:o,fromEnter:s,fakeEvent:a,pinned:l,gos:c,colModel:d,colMoves:u,visibleCols:h}=e;let{allMovingColumns:p}=e;if(t){const e=[];p.forEach(t=>{let i=null,n=t.getParent();for(;null!=n&&1===n.getDisplayedLeafColumns().length;)i=n,n=n.getParent();null!=i?(i.getColGroupDef()?.marryChildren?i.getProvidedColumnGroup().getLeafColumns():i.getLeafColumns()).forEach(t=>{e.includes(t)||e.push(t)}):e.includes(t)||e.push(t)}),p=e}const g=p.slice();!function(e,t){!t||t.length<=1||t.filter(t=>e.indexOf(t)<0).length>0||t.sort((t,i)=>e.indexOf(t)-e.indexOf(i))}(d.getCols(),g);const f=function(e){const{movingCols:t,draggingRight:i,xPosition:n,pinned:o,gos:r,colModel:s,visibleCols:a}=e,l=r.get("suppressMovableColumns")||t.some(e=>e.getColDef().suppressMovable);if(l)return[];const c=function(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}(a,o),d=s.getCols(),u=c.filter(e=>t.includes(e)),h=c.filter(e=>!t.includes(e)),p=d.filter(e=>!t.includes(e));let g,f=0,m=n;if(i){let e=0;u.forEach(t=>e+=t.getActualWidth()),m-=e}if(m>0){for(let e=0;e<h.length&&(m-=h[e].getActualWidth(),!(m<0));e++)f++;i&&f++}if(f>0){const e=h[f-1];g=p.indexOf(e)+1}else g=p.indexOf(h[0]),-1===g&&(g=0);const v=[g],b=(e,t)=>e-t;if(i){let e=g+1;const t=d.length-1;for(;e<=t;)v.push(e),e++;v.sort(b)}else{let e=g;const t=d.length-1;let i=d[e];for(;e<=t&&c.indexOf(i)<0;)e++,v.push(e),i=d[e];e=g-1;const n=0;for(;e>=n;)v.push(e),e--;v.sort(b).reverse()}return v}({movingCols:g,draggingRight:i,xPosition:o,pinned:l,gos:c,colModel:d,visibleCols:h}),m=function(e,t){const i=t.getCols(),o=(0,n._sortNumerically)(e.map(e=>i.indexOf(e))),r=o[0];return(0,n._last)(o)-r!=o.length-1?null:r}(g,d);if(0===f.length)return;const v=f[0];let b=null!==m&&!s;if(t&&(b=null!==m),b&&!a){if(!i&&v>=m)return;if(i&&v<=m)return}const y=h.allCols,w=[];let C=null;for(let e=0;e<f.length;e++){const t=f[e],i=u.getProposedColumnOrder(g,t);if(!u.doesOrderPassRules(i))continue;const o=i.filter(e=>y.includes(e));if(null===C)C=o;else if(!(0,n._areEqual)(o,C))break;const s=r(i);w.push({move:t,fragCount:s})}if(0===w.length)return;w.sort((e,t)=>e.fragCount-t.fragCount);const _=w[0].move;return _>d.getCols().length-p.length?void 0:{columns:p,toIndex:_}}function r(e){function t(e){const t=[];let i=e.getOriginalParent();for(;null!=i;)t.push(i),i=i.getOriginalParent();return t}let i=0;for(let n=0;n<e.length-1;n++){let o=t(e[n]),r=t(e[n+1]);[o,r]=o.length>r.length?[o,r]:[r,o],o.forEach(e=>{-1===r.indexOf(e)&&i++})}return i}t.getBestColumnMoveIndexFromXPosition=o,t.attemptMoveColumns=function(e){const{columns:t,toIndex:i}=o(e)||{},{finished:n,colMoves:r}=e;return t&&null!=i?(r.moveColumns(t,i,"uiColumnMoved",n),n?null:{columns:t,toIndex:i}):null},t.normaliseX=function(e){const{pinned:t,fromKeyboard:i,gos:n,ctrlsSvc:o,useHeaderRow:r,skipScrollPadding:s}=e;let a=o.getHeaderRowContainerCtrl(t)?.eViewport,{x:l}=e;return a?(i&&(l-=a.getBoundingClientRect().left),n.get("enableRtl")&&(r&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),null!=t||s||(l+=o.get("center").getCenterViewportScrollLeft()),l):0},t.setColumnsMoving=function(e,t){for(const i of e)i.moving=t,i.dispatchColEvent("movingChanged","uiColumnMoved")}},9686:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.setColumnWidths=void 0,t.setColumnWidths=function(e,t,i=!0,n="api"){e.colResize?.setColumnWidths(t,!1,i,n)}},6924:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnResizeModule=void 0;const n=i(4388),o=i(447),r=i(7205),s=i(9686),a=i(9677);t.ColumnResizeModule={moduleName:"ColumnResize",version:r.VERSION,beans:[a.ColumnResizeService],apiFunctions:{setColumnWidths:s.setColumnWidths},dependsOn:[n.HorizontalResizeModule,o.AutoWidthModule]}},9677:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnResizeService=void 0;const n=i(2934),o=i(8731),r=i(7764),s=i(9033),a=i(7438);class l extends o.BeanStub{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,i,n){const o=[],{colModel:r,gos:s,visibleCols:a}=this.beans;e.forEach(e=>{const i=r.getColDefCol(e.key)||r.getCol(e.key);if(i&&(o.push({width:e.newWidth,ratios:[1],columns:[i]}),"shift"===s.get("colResizeDefault")&&(t=!t),t)){const t=a.getColAfter(i);if(!t)return;const n=i.getActualWidth()-e.newWidth,r=t.getActualWidth()+n;o.push({width:r,ratios:[1],columns:[t]})}}),0!==o.length&&this.resizeColumnSets({resizeSets:o,finished:i,source:n})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:o}=e;if(t&&!t.every(e=>function(e){const{columns:t,width:i}=e;let n=0,o=0,r=!0;t.forEach(e=>{const t=e.getMinWidth();n+=t||0;const i=e.getMaxWidth();i>0?o+=i:r=!1});return i>=n&&(!r||i<=o)}(e))){if(i){const e=t&&t.length>0?t[0].columns:null;(0,n.dispatchColumnResizedEvent)(this.eventSvc,e,i,o)}return}const s=[],a=[];t.forEach(e=>{const{width:t,columns:i,ratios:n}=e,l={},c={};i.forEach(e=>a.push(e));let d=!0,u=0;for(;d;){if(u++,u>1e3){(0,r._error)(31);break}d=!1;const e=[];let o=0,s=t;i.forEach((t,i)=>{if(c[t.getId()])s-=l[t.getId()];else{e.push(t);const r=n[i];o+=r}});const a=1/o;e.forEach((i,o)=>{let r;o===e.length-1?r=s:(r=Math.round(n[o]*t*a),s-=r);const u=i.getMinWidth(),h=i.getMaxWidth();r<u?(r=u,c[i.getId()]=!0,d=!0):h>0&&r>h&&(r=h,c[i.getId()]=!0,d=!0),l[i.getId()]=r})}i.forEach(e=>{const t=l[e.getId()];e.getActualWidth()!==t&&(e.setActualWidth(t,o),s.push(e))})});const l=s.length>0;let c=[];if(l){const{colFlex:e,visibleCols:t,colViewport:i}=this.beans;c=e?.refreshFlexedColumns({resizingCols:a,skipSetLeft:!0})??[],t.setLeftValues(o),t.updateBodyWidths(),i.checkViewportColumns()}const d=a.concat(c);(l||i)&&(0,n.dispatchColumnResizedEvent)(this.eventSvc,d,i,o,c)}resizeHeader(e,t,i){if(!e.isResizable())return;const n=e.getActualWidth(),o=e.getMinWidth(),r=e.getMaxWidth(),s=Math.min(Math.max(n+t,o),r);this.setColumnWidths([{key:e,newWidth:s}],i,!0,"uiColumnResized")}createResizeFeature(e,t,i,n,o){return new a.ResizeFeature(e,t,i,n,o)}createGroupResizeFeature(e,t,i,n){return new s.GroupResizeFeature(e,t,i,n)}}t.ColumnResizeService=l},9033:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GroupResizeFeature=void 0;const n=i(8731);class o extends n.BeanStub{constructor(e,t,i,n){super(),this.comp=e,this.eResize=t,this.pinned=i,this.columnGroup=n}postConstruct(){if(!this.columnGroup.isResizable())return void this.comp.setResizableDisplayed(!1);const{horizontalResizeSvc:e,gos:t,colAutosize:i}=this.beans,n=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(n),!t.get("suppressAutoSize")&&i&&this.addDestroyFunc(i.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:n,groupAfterColumns:o,groupAfterStartWidth:r,groupAfterRatios:s}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=n,this.resizeTakeFromCols=o,this.resizeTakeFromStartWidth=r,this.resizeTakeFromRatios=s,this.toggleColumnResizing(!0)}onResizing(e,t,i="uiColumnResized"){const n=this.normaliseDragChange(t),o=this.resizeStartWidth+n;this.resizeColumnsFromLocalValues(o,i,e)}getInitialValues(e){const t=e=>e.reduce((e,t)=>e+t.getActualWidth(),0),i=(e,t)=>e.map(e=>e.getActualWidth()/t),n=this.getColumnsToResize(),o=t(n),r={columnsToResize:n,resizeStartWidth:o,resizeRatios:i(n,o)};let s=null;if(e&&(s=this.beans.colGroupSvc?.getGroupAtDirection(this.columnGroup,"After")??null),s){const e=s.getDisplayedLeafColumns(),n=r.groupAfterColumns=e.filter(e=>e.isResizable()),o=r.groupAfterStartWidth=t(n);r.groupAfterRatios=i(n,o)}else r.groupAfterColumns=void 0,r.groupAfterStartWidth=void 0,r.groupAfterRatios=void 0;return r}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t,i=!0){if(!this.resizeCols||!this.resizeRatios)return;const n={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(n,e,t,i)}resizeColumns(e,t,i,n=!0){const{columnsToResize:o,resizeStartWidth:r,resizeRatios:s,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,d=[];if(d.push({columns:o,ratios:s,width:t}),a){const e=t-r;d.push({columns:a,ratios:c,width:l-e})}this.beans.colResize?.resizeColumnSets({resizeSets:d,finished:n,source:i}),n&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(e=>e.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?"left"!==this.pinned&&(t*=-1):"right"===this.pinned&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}}t.GroupResizeFeature=o},7438:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ResizeFeature=void 0;const n=i(8731),o=i(3507);class r extends n.BeanStub{constructor(e,t,i,n,o){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=n,this.ctrl=o}postConstruct(){const e=[];let t,i;const n=()=>{if((0,o._setDisplayed)(this.eResize,t),!t)return;const{horizontalResizeSvc:n,colAutosize:r}=this.beans,s=n.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(s),i&&r&&e.push(r.addColumnAutosize(this.eResize,this.column))},r=()=>{e.forEach(e=>e()),e.length=0},s=()=>{const e=this.column.isResizable(),o=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(e!==t||o!==i)&&(t=e,i=o,r(),n())};s(),this.addDestroyFunc(r),this.ctrl.setRefreshFunction("resize",s)}onResizing(e,t){const{column:i,lastResizeAmount:n,resizeStartWidth:r,beans:s}=this,a=this.normaliseResizeAmount(t),l=[{key:i,newWidth:r+a}],{pinnedCols:c,ctrlsSvc:d,colResize:u}=s;this.column.getPinned()&&(c?.leftWidth??0)+(c?.rightWidth??0)+(a-n)>(0,o._getInnerWidth)(d.getGridBodyCtrl().eBodyViewport)-50||(this.lastResizeAmount=a,u?.setColumnWidths(l,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1))}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i="left"!==this.pinned,n="right"===this.pinned;return this.gos.get("enableRtl")?i&&(t*=-1):n&&(t*=-1),t}}t.ResizeFeature=r},3600:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseColsService=void 0;const n=i(8731),o=i(1502),r=i(4422),s=i(2934);class a extends n.BeanStub{constructor(){super(...arguments),this.dispatchColumnChangedEvent=s.dispatchColumnChangedEvent,this.columns=[]}wireBeans(e){this.colModel=e.colModel,this.aggFuncSvc=e.aggFuncSvc,this.visibleCols=e.visibleCols}sortColumns(e){this.columns.sort(e)}setColumns(e,t){this.setColList(e,this.columns,this.eventName,!0,!0,this.columnProcessors.set,t)}addColumns(e,t){this.updateColList(e,this.columns,!0,!0,this.columnProcessors.add,this.eventName,t)}removeColumns(e,t){this.updateColList(e,this.columns,!1,!0,this.columnProcessors.remove,this.eventName,t)}setColList(e=[],t,i,n,o,s,a){const l=this.colModel.getCols();if(!l||0===l.length)return;const c=new Map;t.forEach((e,t)=>c.set(e,t)),t.length=0,(0,r._exists)(e)&&e.forEach(e=>{const i=this.colModel.getColDefCol(e);i&&t.push(i)}),t.forEach((e,t)=>{const i=c.get(e);void 0!==i?n&&i!==t||c.delete(e):c.set(e,0)}),(this.colModel.getColDefCols()||[]).forEach(e=>{const i=t.indexOf(e)>=0;s(e,i,a)}),o&&this.colModel.refreshCols(!1),this.visibleCols.refresh(a),this.dispatchColumnChangedEvent(this.eventSvc,i,[...c.keys()],a)}updateColList(e=[],t,i,n,r,s,a){if(!e||0===e.length)return;let l=!1;const c=new Set;if(e.forEach(e=>{if(!e)return;const n=this.colModel.getColDefCol(e);if(n){if(c.add(n),i){if(t.indexOf(n)>=0)return;t.push(n)}else{const e=t.indexOf(n);if(e<0)return;for(let i=e+1;i<t.length;i++)c.add(t[i]);(0,o._removeFromArray)(t,n)}r(n,i,a),l=!0}}),!l)return;n&&this.colModel.refreshCols(!1),this.visibleCols.refresh(a);const d=Array.from(c);this.eventSvc.dispatchEvent({type:s,columns:d,column:1===d.length?d[0]:null,source:a})}extractCols(e,t=[]){const i=this.columns,n=[],o=[],{setFlagFunc:r,getIndexFunc:s,getInitialIndexFunc:a,getValueFunc:l,getInitialValueFunc:c}=this.columnExtractors;(this.colModel.getColDefCols()||[]).forEach(e=>{const r=t.indexOf(e)<0,d=e.getColDef(),u=l(d),h=c(d),p=s(d),g=a(d);let f;f=void 0!==u?u:void 0!==p?null!==p&&p>=0:r?void 0!==h?h:!(void 0===g)&&null!=g&&g>=0:i.indexOf(e)>=0,f&&((r?null!=p||null!=g:null!=p)?n.push(e):o.push(e))});const d=e=>{const t=s(e.getColDef()),i=a(e.getColDef());return null!=t?t:i};n.sort((e,t)=>{const i=d(e),n=d(t);return i===n?0:i<n?-1:1});const u=[].concat(n);return i.forEach(e=>{o.indexOf(e)>=0&&u.push(e)}),o.forEach(e=>{u.indexOf(e)<0&&u.push(e)}),i.forEach(t=>{u.indexOf(t)<0&&r(t,!1,e)}),u.forEach(t=>{i.indexOf(t)<0&&r(t,!0,e)}),this.columns=u}restoreColumnOrder(e,t){const i=this.columns,n=this.colModel.getColDefCols();if(!i.length||!n)return e;const o=Object.keys(t),r=new Set(o),s=new Set(o),a=new Set(i.map(e=>{const t=e.getColId();return s.delete(t),t}).concat(o)),l=[],c={};let d=0;for(let e=0;e<n.length;e++){const t=n[e].getColId();a.has(t)&&(l.push(t),c[t]=d++)}let u=1e3,h=!1,p=0;const g=this.columnOrdering.enableProp,f=this.columnOrdering.initialEnableProp,m=this.columnOrdering.indexProp,v=this.columnOrdering.initialIndexProp,b=e=>{const i=c[e];for(let e=p;e<i;e++){const i=l[e];s.has(i)&&(t[i][m]=u++,s.delete(i))}p=i};return i.forEach(i=>{const n=i.getColId();if(r.has(n))b(n),t[n][m]=u++;else{const o=i.getColDef();(null===o[m]||void 0===o[m]&&null==o[v])&&(h||(o[g]||void 0===o[g]&&o[f]?b(n):(s.forEach(e=>{t[e][m]=u+c[e]}),u+=l.length,h=!0)),e[n]||(e[n]={colId:n}),e[n][m]=u++)}}),e}}t.BaseColsService=a},1144:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getAllDisplayedVirtualColumns=t.getAllDisplayedColumns=t.getDisplayedRightColumns=t.getDisplayedCenterColumns=t.getDisplayedLeftColumns=t.getAllGridColumns=t.setColumnsPinned=t.setColumnsVisible=t.getDisplayedColBefore=t.getDisplayedColAfter=t.isPinningRight=t.isPinningLeft=t.isPinning=t.resetColumnState=t.getColumnState=t.applyColumnState=t.getColumns=t.getColumn=t.getDisplayNameForColumn=t.getColumnDefs=t.getColumnDef=void 0;const n=i(2885);t.getColumnDef=function(e,t){const i=e.colModel.getColDefCol(t);return i?i.getColDef():null},t.getColumnDefs=function(e){return e.colModel.getColumnDefs()},t.getDisplayNameForColumn=function(e,t,i){return e.colNames.getDisplayNameForColumn(t,i)||""},t.getColumn=function(e,t){return e.colModel.getColDefCol(t)},t.getColumns=function(e){return e.colModel.getColDefCols()},t.applyColumnState=function(e,t){return(0,n._applyColumnState)(e,t,"api")},t.getColumnState=function(e){return(0,n._getColumnState)(e)},t.resetColumnState=function(e){(0,n._resetColumnState)(e,"api")},t.isPinning=function(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()},t.isPinningLeft=function(e){return e.visibleCols.isPinningLeft()},t.isPinningRight=function(e){return e.visibleCols.isPinningRight()},t.getDisplayedColAfter=function(e,t){return e.visibleCols.getColAfter(t)},t.getDisplayedColBefore=function(e,t){return e.visibleCols.getColBefore(t)},t.setColumnsVisible=function(e,t,i){e.colModel.setColsVisible(t,i,"api")},t.setColumnsPinned=function(e,t,i){e.pinnedCols?.setColsPinned(t,i,"api")},t.getAllGridColumns=function(e){return e.colModel.getCols()},t.getDisplayedLeftColumns=function(e){return e.visibleCols.leftCols},t.getDisplayedCenterColumns=function(e){return e.visibleCols.centerCols},t.getDisplayedRightColumns=function(e){return e.visibleCols.rightCols},t.getAllDisplayedColumns=function(e){return e.visibleCols.allCols},t.getAllDisplayedVirtualColumns=function(e){return e.colViewport.getViewportColumns()}},4604:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnDefFactory=t._deepCloneDefinition=void 0;const n=i(8731),o=i(6996);function r(e,t){if(!e)return;const i=e,n={};return Object.keys(i).forEach(e=>{if(t&&t.indexOf(e)>=0||o.SKIP_JS_BUILTINS.has(e))return;const s=i[e],a="object"==typeof s&&null!==s&&s.constructor===Object;n[e]=a?r(s):s}),n}t._deepCloneDefinition=r;class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,i,n){const o=e.slice();t?o.sort((e,t)=>i.indexOf(e)-i.indexOf(t)):i&&o.sort((e,t)=>n.indexOf(e)-n.indexOf(t));const r=this.rowGroupColsSvc?.columns,s=this.pivotColsSvc?.columns;return this.buildColumnDefs(o,r,s)}buildColumnDefs(e,t=[],i=[]){const n=[],o={};return e.forEach(e=>{let r=!0,s=this.createDefFromColumn(e,t,i),a=e.getOriginalParent(),l=null;for(;a;){let e=null;if(a.isPadding()){a=a.getOriginalParent();continue}const t=o[a.getGroupId()];if(t){t.children.push(s),r=!1;break}if(e=this.createDefFromGroup(a),e&&(e.children=[s],o[e.groupId]=e,s=e,a=a.getOriginalParent()),null!=a&&l===a){r=!1;break}l=a}r&&n.push(s)}),n}createDefFromGroup(e){const t=r(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const n=r(e.getColDef());return n.colId=e.getColId(),n.width=e.getActualWidth(),n.rowGroup=e.isRowGroupActive(),n.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,n.pivot=e.isPivotActive(),n.pivotIndex=e.isPivotActive()?i.indexOf(e):null,n.aggFunc=e.isValueActive()?e.getAggFunc():null,n.hide=!e.isVisible()||void 0,n.pinned=e.isPinned()?e.getPinned():null,n.sort=e.getSort()?e.getSort():null,n.sortIndex=null!=e.getSortIndex()?e.getSortIndex():null,n}}t.ColumnDefFactory=s},2934:function(e,t){function i(e,t){if(!e||0==e.length)return;const i=t(e[0]);for(let n=1;n<e.length;n++)if(i!==t(e[n]))return;return i}Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchColumnResizedEvent=t.dispatchColumnChangedEvent=t.dispatchColumnVisibleEvent=t.dispatchColumnPinnedEvent=void 0,t.dispatchColumnPinnedEvent=function(e,t,n){if(!t.length)return;const o=1===t.length?t[0]:null,r=i(t,e=>e.getPinned());e.dispatchEvent({type:"columnPinned",pinned:null!=r?r:null,columns:t,column:o,source:n})},t.dispatchColumnVisibleEvent=function(e,t,n){if(!t.length)return;const o=1===t.length?t[0]:null,r=i(t,e=>e.isVisible());e.dispatchEvent({type:"columnVisible",visible:r,columns:t,column:o,source:n})},t.dispatchColumnChangedEvent=function(e,t,i,n){e.dispatchEvent({type:t,columns:i,column:i&&1==i.length?i[0]:null,source:n})},t.dispatchColumnResizedEvent=function(e,t,i,n,o=null){t?.length&&e.dispatchEvent({type:"columnResized",columns:t,column:1===t.length?t[0]:null,flexColumns:o,finished:i,source:n})}},2716:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.depthFirstOriginalTreeSearch=t._addColumnDefaultAndTypes=t._updateColumnState=t.updateSomeColumnState=t._recursivelyCreateColumns=t._createColumnTree=void 0;const n=i(3355),o=i(9409),r=i(5449),s=i(7274),a=i(6996),l=i(7764),c=i(2294),d=i(3146);function u(e,t,i,n,o,r,s,a){if(!t)return[];const{colGroupSvc:l}=e,c=new Array(t.length);for(let d=0;d<c.length;d++){const u=t[d];l&&void 0!==u.children?c[d]=l.createProvidedColumnGroup(n,u,i,o,r,s,a):c[d]=h(e,n,u,o,r,a)}return c}function h(e,t,i,o,r,s){const a=function(e,t){if(t)for(let i=0;i<t.length;i++){const n=t[i].getUserProvidedColDef();if(n)if(null==e.colId){if(null!=e.field){if(n.field===e.field)return{idx:i,column:t[i]}}else if(n===e)return{idx:i,column:t[i]}}else if(t[i].getId()===e.colId)return{idx:i,column:t[i]}}}(i,o);a&&o?.splice(a.idx,1);let l=a?.column;if(l){const t=f(e,i,l.getColId());l.setColDef(t,i,s),g(e,l,t,s)}else{const o=r.getUniqueKey(i.colId,i.field),s=f(e,i,o);l=new n.AgColumn(s,i,o,t),e.context.createBean(l)}return e.dataTypeSvc?.addColumnListeners(l),l}function p(e,t,i,n,o,r,s,a){const{sortSvc:l,pinnedCols:c,colFlex:d}=e;void 0!==i&&t.setVisible(!i,a),l&&(l.updateColSort(t,n,a),void 0!==o&&l.setColSortIndex(t,o)),void 0!==r&&c?.setColPinned(t,r),void 0!==s&&d?.setColFlex(t,s)}function g(e,t,i,n){p(e,t,i.hide,i.sort,i.sortIndex,i.pinned,i.flex,n);const o=t.getFlex();if(!(null!=o&&o>0))if(null!=i.width)t.setActualWidth(i.width,n);else{const e=t.getActualWidth();t.setActualWidth(e,n)}}function f(e,t,i,n){const{gos:o,dataTypeSvc:c,validation:u}=e,h={},p=o.get("defaultColDef");(0,a._mergeDeep)(h,p,!1,!0);const g=function(e,t,i,n){const o=e.dataTypeSvc?.updateColDefAndGetColumnType(t,i,n),r=i.type??o??t.type;return t.type=r,r?(0,d.convertColumnTypes)(r):void 0}(e,h,t,i);g&&function(e,t,i){if(!t.length)return;const n=Object.assign({},r.DefaultColumnTypes),o=e.gos.get("columnTypes")||{};for(const e of Object.keys(o)){const t=o[e];e in n?(0,l._warn)(34,{key:e}):(t.type&&(0,l._warn)(35),n[e]=t)}t.forEach(e=>{const t=n[e.trim()];t?(0,a._mergeDeep)(i,t,!1,!0):(0,l._warn)(36,{t:e})})}(e,g,h),(0,a._mergeDeep)(h,t,!1,!0);const f=o.get("autoGroupColumnDef"),m=(0,s._isColumnsSortingCoupledToGroup)(o);return t.rowGroup&&f&&m&&(0,a._mergeDeep)(h,{sort:f.sort,initialSort:f.initialSort},!1,!0),c?.validateColDef(h),u?.validateColDef(h,i,n),h}function m(e,t,i){if(t)for(let n=0;n<t.length;n++){const r=t[n];(0,o.isProvidedColumnGroup)(r)&&m(r,r.getChildren(),i),i(r,e)}}t._createColumnTree=function(e,t=null,i,n,r){const s=new c.ColumnKeyCreator,{existingCols:a,existingGroups:l,existingColKeys:d}=function(e){const t=[],i=[],n=[];return e&&m(null,e,e=>{if((0,o.isProvidedColumnGroup)(e)){const t=e;i.push(t)}else{const i=e;n.push(i.getId()),t.push(i)}}),{existingCols:t,existingGroups:i,existingColKeys:n}}(n);s.addExistingKeys(d);const h=u(e,t,0,i,a,s,l,r),{colGroupSvc:p}=e,g=p?.findMaxDepth(h,0)??0,f=p?p.balanceColumnTree(h,0,g,s):h;return m(null,f,(e,t)=>{(0,o.isProvidedColumnGroup)(e)&&e.setupExpandable(),e.originalParent=t}),{columnTree:f,treeDept:g}},t._recursivelyCreateColumns=u,t.updateSomeColumnState=p,t._updateColumnState=g,t._addColumnDefaultAndTypes=f,t.depthFirstOriginalTreeSearch=m},2849:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnFlexService=void 0;const n=i(8731),o=i(2934);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="colFlex"}refreshFlexedColumns(e={}){const t=e.source??"flex";null!=e.viewportWidth&&(this.flexViewportWidth=e.viewportWidth);const i=this.flexViewportWidth;if(!i)return[];const{visibleCols:n}=this.beans,r=n.centerCols;let s=-1;if(e.resizingCols){const t=new Set(e.resizingCols);for(let e=r.length-1;e>=0;e--)if(t.has(r[e])){s=e;break}}let a=!1;const l=r.map((e,t)=>{const i=e.getFlex(),n=null!=i&&i>0&&t>s;return a||(a=n),{col:e,isFlex:n,flex:Math.max(0,i??0),initialSize:e.getActualWidth(),min:e.getMinWidth(),max:e.getMaxWidth(),targetSize:0}});if(!a)return[];let c=l.length,d=l.reduce((e,t)=>e+t.flex,0),u=i;const h=(e,i)=>{e.frozenSize=i,e.col.setActualWidth(i,t),u-=i,d-=e.flex,c-=1},p=e=>null!=e.frozenSize;for(const e of l)e.isFlex||h(e,e.initialSize);for(;c>0;){const e=Math.round(d<1?u*d:u);let t,i=0,n=0;for(const o of l){if(p(o))continue;t=o,n+=e*(o.flex/d);const r=n-i,s=Math.round(r);o.targetSize=s,i+=s}t&&(t.targetSize+=e-i);let o=0;for(const e of l){if(p(e))continue;const t=e.targetSize,i=Math.min(Math.max(t,e.min),e.max);o+=i-t,e.violationType=i===t?void 0:i<t?"max":"min",e.targetSize=i}const r=0===o?"all":o>0?"min":"max";for(const e of l)p(e)||"all"!==r&&e.violationType!==r||h(e,e.targetSize)}e.skipSetLeft||n.setLeftValues(t),e.updateBodyWidths&&n.updateBodyWidths();const g=l.filter(e=>e.isFlex&&!e.violationType).map(e=>e.col);if(e.fireResizedEvent){const e=l.filter(e=>e.initialSize!==e.frozenSize).map(e=>e.col),i=l.filter(e=>e.flex).map(e=>e.col);(0,o.dispatchColumnResizedEvent)(this.eventSvc,e,!0,t,i)}return g}initCol(e){const{flex:t,initialFlex:i}=e.colDef;void 0!==t?e.flex=t:void 0!==i&&(e.flex=i)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}}t.ColumnFlexService=r},6641:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getAllDisplayedColumnGroups=t.getRightDisplayedColumnGroups=t.getCenterDisplayedColumnGroups=t.getLeftDisplayedColumnGroups=t.resetColumnGroupState=t.setColumnGroupState=t.getColumnGroupState=t.getDisplayNameForColumnGroup=t.getProvidedColumnGroup=t.getColumnGroup=t.setColumnGroupOpened=void 0,t.setColumnGroupOpened=function(e,t,i){e.colGroupSvc?.setColumnGroupOpened(t,i,"api")},t.getColumnGroup=function(e,t,i){return e.colGroupSvc?.getColumnGroup(t,i)??null},t.getProvidedColumnGroup=function(e,t){return e.colGroupSvc?.getProvidedColGroup(t)??null},t.getDisplayNameForColumnGroup=function(e,t,i){return e.colNames.getDisplayNameForColumnGroup(t,i)||""},t.getColumnGroupState=function(e){return e.colGroupSvc?.getColumnGroupState()??[]},t.setColumnGroupState=function(e,t){e.colGroupSvc?.setColumnGroupState(t,"api")},t.resetColumnGroupState=function(e){e.colGroupSvc?.resetColumnGroupState("api")},t.getLeftDisplayedColumnGroups=function(e){return e.visibleCols.treeLeft},t.getCenterDisplayedColumnGroups=function(e){return e.visibleCols.treeCenter},t.getRightDisplayedColumnGroups=function(e){return e.visibleCols.treeRight},t.getAllDisplayedColumnGroups=function(e){return e.visibleCols.getAllTrees()}},6041:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnGroupModule=void 0;const n=i(84),o=i(7205),r=i(6641),s=i(6266);t.ColumnGroupModule={moduleName:"ColumnGroup",version:o.VERSION,dynamicBeans:{headerGroupCellCtrl:n.HeaderGroupCellCtrl},beans:[s.ColumnGroupService],apiFunctions:{getAllDisplayedColumnGroups:r.getAllDisplayedColumnGroups,getCenterDisplayedColumnGroups:r.getCenterDisplayedColumnGroups,getColumnGroup:r.getColumnGroup,getColumnGroupState:r.getColumnGroupState,getDisplayNameForColumnGroup:r.getDisplayNameForColumnGroup,getLeftDisplayedColumnGroups:r.getLeftDisplayedColumnGroups,getProvidedColumnGroup:r.getProvidedColumnGroup,getRightDisplayedColumnGroups:r.getRightDisplayedColumnGroups,resetColumnGroupState:r.resetColumnGroupState,setColumnGroupOpened:r.setColumnGroupOpened,setColumnGroupState:r.setColumnGroupState}}},6266:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnGroupService=void 0;const n=i(8731),o=i(6908),r=i(6908),s=i(9409),a=i(9409),l=i(1502),c=i(4422),d=i(2716),u=i(6869);class h extends n.BeanStub{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[],t=this.beans.colModel.getColTree();return(0,d.depthFirstOriginalTreeSearch)(null,t,t=>{(0,a.isProvidedColumnGroup)(t)&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})}),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const i=[];(0,d.depthFirstOriginalTreeSearch)(null,t,e=>{if((0,a.isProvidedColumnGroup)(e)){const t=e.getColGroupDef(),n={groupId:e.getGroupId(),open:t?t.openByDefault:void 0};i.push(n)}}),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){const{colModel:i,colAnimation:n,visibleCols:o,eventSvc:r}=this.beans;if(!i.getColTree().length)return;n?.start();const s=[];e.forEach(e=>{const t=e.groupId,i=e.open,n=this.getProvidedColGroup(t);n&&n.isExpanded()!==i&&(n.setExpanded(i),s.push(n))}),o.refresh(t,!0),s.length&&r.dispatchEvent({type:"columnGroupOpened",columnGroup:1===s.length?s[0]:void 0,columnGroups:s}),n?.finish()}setColumnGroupOpened(e,t,i){let n;n=(0,a.isProvidedColumnGroup)(e)?e.getId():e||"",this.setColumnGroupState([{groupId:n,open:t}],i)}getProvidedColGroup(e){let t=null;return(0,d.depthFirstOriginalTreeSearch)(null,this.beans.colModel.getColTree(),i=>{(0,a.isProvidedColumnGroup)(i)&&i.getId()===e&&(t=i)}),t}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),n=e.getDisplayedLeafColumns(),o="After"===t?(0,l._last)(n):n[0],r=`getCol${t}`;for(;;){const t=this.beans.visibleCols[r](o);if(!t)return null;const n=this.getColGroupAtLevel(t,i);if(n!==e)return n}}getColGroupAtLevel(e,t){let i,n,o=e.getParent();for(;i=o.getProvidedColumnGroup().getLevel(),n=o.getPaddingLevel(),!(i+n<=t);)o=o.getParent();return o}updateOpenClosedVisibility(){const e=this.beans.visibleCols.getAllTrees();(0,u.depthFirstAllColumnTreeSearch)(e,!1,e=>{(0,o.isColumnGroup)(e)&&e.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if((0,o.isColumnGroup)(e))return e;const i=this.beans.visibleCols.getAllTrees(),n="number"==typeof t;let r=null;return(0,u.depthFirstAllColumnTreeSearch)(i,!1,i=>{if((0,o.isColumnGroup)(i)){const o=i;let s;s=n?e===o.getGroupId()&&t===o.getPartId():e===o.getGroupId(),s&&(r=o)}}),r}createColumnGroups(e){const{columns:t,idCreator:i,pinned:n,oldDisplayedGroups:r,isStandaloneStructure:s}=e,a=this.mapOldGroupsById(r),l=[];let c=t;for(;c.length;){const e=c;c=[];let t=0;const r=r=>{const d=t;t=r;const u=e[d],h=((0,o.isColumnGroup)(u)?u.getProvidedColumnGroup():u).getOriginalParent();if(null==h){for(let t=d;t<r;t++)l.push(e[t]);return}const p=this.createColumnGroup(h,i,a,n,s);for(let t=d;t<r;t++)p.addChild(e[t]);c.push(p)};for(let i=1;i<e.length;i++){const n=e[i],s=((0,o.isColumnGroup)(n)?n.getProvidedColumnGroup():n).getOriginalParent(),a=e[t];s!==((0,o.isColumnGroup)(a)?a.getProvidedColumnGroup():a).getOriginalParent()&&r(i)}t<e.length&&r(e.length)}return s||this.setupParentsIntoCols(l,null),l}createProvidedColumnGroup(e,t,i,n,o,r,a){const l=o.getUniqueKey(t.groupId||null,null),c=this.createMergedColGroupDef(t,l),u=new s.AgProvidedColumnGroup(c,l,!1,i);this.createBean(u);const h=this.findExistingGroup(t,r);h&&r.splice(h.idx,1);const p=h?.group;p&&u.setExpanded(p.isExpanded());const g=(0,d._recursivelyCreateColumns)(this.beans,c.children,i+1,e,n,o,r,a);return u.setChildren(g),u}balanceColumnTree(e,t,i,n){const o=[];for(let r=0;r<e.length;r++){const l=e[r];if((0,a.isProvidedColumnGroup)(l)){const e=l,r=this.balanceColumnTree(e.getChildren(),t+1,i,n);e.setChildren(r),o.push(e)}else{let r,c;for(let e=i-1;e>=t;e--){const e=n.getUniqueKey(null,null),i=this.createMergedColGroupDef(null,e),o=new s.AgProvidedColumnGroup(i,e,!0,t);this.createBean(o),c&&c.setChildren([o]),c=o,r||(r=c)}if(r&&c){if(o.push(r),e.some(e=>(0,a.isProvidedColumnGroup)(e))){c.setChildren([l]);continue}c.setChildren(e);break}o.push(l)}}return o}findDepth(e){let t=0,i=e;for(;i&&i[0]&&(0,a.isProvidedColumnGroup)(i[0]);)t++,i=i[0].getChildren();return t}findMaxDepth(e,t){let i=t;for(let n=0;n<e.length;n++){const o=e[n];if((0,a.isProvidedColumnGroup)(o)){const e=o,n=this.findMaxDepth(e.getChildren(),t+1);i<n&&(i=n)}}return i}balanceTreeForAutoCols(e,t){const i=[];return e.forEach(e=>{let n=e;for(let i=t-1;i>=0;i--){const t=new s.AgProvidedColumnGroup(null,`FAKE_PATH_${e.getId()}}_${i}`,!0,i);this.createBean(t),t.setChildren([n]),n.originalParent=t,n=t}0===t&&(e.originalParent=null),i.push(n)}),i}createMergedColGroupDef(e,t){const i={},{gos:n,validation:o}=this.beans;return Object.assign(i,n.get("defaultColGroupDef")),Object.assign(i,e),o?.validateColDef(i,t),i}findExistingGroup(e,t){if(null!=e.groupId)for(let i=0;i<t.length;i++){const n=t[i];if(n.getColGroupDef()&&n.getId()===e.groupId)return{idx:i,group:n}}}createColumnGroup(e,t,i,n,s){const a=e.getGroupId(),l=t.getInstanceIdForKey(a);let d=i[(0,o.createUniqueColumnGroupId)(a,l)];return d&&d.getProvidedColumnGroup()!==e&&(d=null),(0,c._exists)(d)?d.reset():(d=new r.AgColumnGroup(e,a,l,n),s||this.createBean(d)),d}mapOldGroupsById(e){const t={},i=e=>{e.forEach(e=>{if((0,o.isColumnGroup)(e)){const n=e;t[e.getUniqueId()]=n,i(n.getChildren())}})};return e&&i(e),t}setupParentsIntoCols(e,t){e.forEach(e=>{if(e.parent=t,(0,o.isColumnGroup)(e)){const t=e;this.setupParentsIntoCols(t.getChildren(),t)}})}}t.ColumnGroupService=h},3156:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isColumnHovered=void 0,t.isColumnHovered=function(e,t){return!!e.colHover?.isHovered(t)}},1690:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnHoverModule=void 0;const n=i(7205),o=i(3156),r=i(7683);t.ColumnHoverModule={moduleName:"ColumnHover",version:n.VERSION,beans:[r.ColumnHoverService],apiFunctions:{isColumnHovered:o.isColumnHovered}}},7683:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnHoverService=void 0;const n=i(8731),o=i(5788);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="colHover"}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){const t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,i){const n=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.isHovered(i);t.addOrRemoveCssClass("ag-column-hover",e)};e.addManagedEventListeners({columnHoverChanged:n}),n()}onCellColumnHover(e,t){if(!t)return;if(!this.gos.get("columnHoverHighlight"))return;const i=this.isHovered(e);t.addOrRemoveCssClass("ag-column-hover",i)}addHeaderFilterColumnHoverListener(e,t,i,n){this.createHoverFeature(e,[i],n);const o=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.isHovered(i);t.addOrRemoveCssClass("ag-column-hover",e)};e.addManagedEventListeners({columnHoverChanged:o}),o()}createHoverFeature(e,t,i){e.createManagedBean(new o.HoverFeature(t,i))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}}t.ColumnHoverService=r},5788:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HoverFeature=void 0;const n=i(8731);class o extends n.BeanStub{constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){if(this.gos.get("columnHoverHighlight")){const e=this.beans.colHover;this.addManagedListeners(this.element,{mouseout:e.clearMouseOver.bind(e),mouseover:e.setMouseOver.bind(e,this.columns)})}}}t.HoverFeature=o},2294:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnKeyCreator=void 0;const n=i(4422);t.ColumnKeyCreator=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=(0,n._toStringOrNull)(e);let i=0;for(;;){let n=e??t;if(n?0!==i&&(n+="_"+i):n=i,!this.existingKeys[n])return this.existingKeys[n]=!0,String(n);i++}}}},2986:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnModel=void 0;const n=i(3505),o=i(8731),r=i(7274),s=i(1502),a=i(2716),l=i(2885),c=i(3146);class d extends o.BeanStub{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],e=>this.refreshAll((0,c._convertColumnEventSourceType)(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),(0,c._convertColumnEventSourceType)(e.source)))}createColsFromColDefs(e){const{beans:t}=this,{valueCache:i,colAutosize:n,rowGroupColsSvc:o,pivotColsSvc:r,valueColsSvc:s,visibleCols:d,colViewport:u,eventSvc:h}=t,p=this.colDefs?(0,l._compareColumnStatesAndDispatchEvents)(t,e):void 0;i?.expire();const g=this.colDefCols?.list,f=this.colDefCols?.tree,m=(0,a._createColumnTree)(t,this.colDefs,!0,f,e);(0,c._destroyColumnTree)(t,this.colDefCols?.tree,m.columnTree);const v=m.columnTree,b=m.treeDept,y=(0,c._getColumnsFromTree)(v),w={};y.forEach(e=>w[e.getId()]=e),this.colDefCols={tree:v,treeDepth:b,list:y,map:w},o?.extractCols(e,g),r?.extractCols(e,g),s?.extractCols(e,g),this.ready=!0,this.refreshCols(!0),d.refresh(e),u.checkViewportColumns(),h.dispatchEvent({type:"columnEverythingChanged",source:e}),p&&(this.changeEventsDispatching=!0,p(),this.changeEventsDispatching=!1),h.dispatchEvent({type:"newColumnsLoaded",source:e}),"gridInitializing"===e&&n?.applyAutosizeStrategy()}refreshCols(e){if(!this.colDefCols)return;const t=this.cols?.tree;this.saveColOrder();const{autoColSvc:i,selectionColSvc:n,rowNumbersSvc:o,quickFilter:a,pivotResultCols:l,showRowGroupCols:c,rowAutoHeight:d,visibleCols:u,colViewport:h,eventSvc:p}=this.beans,g=this.selectCols(l,this.colDefCols);this.createColumnsForService([i,n,o],g);const f=(0,r._shouldMaintainColumnOrder)(this.gos,this.showingPivotResult);e&&!f||this.restoreColOrder(g),this.positionLockedCols(g),c?.refresh(),a?.refreshCols(),this.setColSpanActive(),d?.setAutoHeightActive(g),u.clear(),h.clear(),!(0,s._areEqual)(t,this.cols.tree)&&p.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t){for(const i of e)i&&(i.createColumns(t,e=>{this.lastOrder=e(this.lastOrder),this.lastPivotOrder=e(this.lastPivotOrder)}),i.addColumns(t))}selectCols(e,t){const i=e?.getPivotResultCols()??null;this.showingPivotResult=null!=i;const{map:n,list:o,tree:r,treeDepth:s}=i??t;return this.cols={list:o.slice(),map:{...n},tree:r.slice(),treeDepth:s},i&&(i.list.some(e=>void 0!==this.cols?.map[e.getColId()])||(this.lastPivotOrder=null)),this.cols}getColsToShow(){if(!this.cols)return[];const e=this.isPivotMode()&&!this.showingPivotResult,t=this.beans.valueColsSvc?.columns;return this.cols.list.filter(i=>{const n=(0,c.isColumnGroupAutoCol)(i);if(e){const e=t?.includes(i);return n||e}return n||i.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,i){(0,l._applyColumnState)(this.beans,{state:e.map(e=>({colId:"string"==typeof e?e:e.getColId(),hide:!t}))},i)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const i=new Map(t.map((e,t)=>[e,t]));if(!e.list.some(e=>i.has(e)))return;const n=new Map(e.list.map(e=>[e,!0])),o=t.filter(e=>n.has(e)),r=new Map(o.map(e=>[e,!0])),s=e.list.filter(e=>!r.has(e)),a=o.slice();s.forEach(e=>{let t=e.getOriginalParent();if(!t)return void a.push(e);const i=[];for(;!i.length&&t;)t.getLeafColumns().forEach(e=>{const t=a.indexOf(e)>=0,n=i.indexOf(e)<0;t&&n&&i.push(e)}),t=t.getOriginalParent();if(!i.length)return void a.push(e);const n=i.map(e=>a.indexOf(e)),o=Math.max(...n);a.splice(o+1,0,e)}),e.list=a}positionLockedCols(e){e.list=(0,n.placeLockedColumns)(e.list,this.gos)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list??null:this.lastOrder=this.cols?.list??null}getColumnDefs(){return this.colDefCols?this.beans.colDefFactory?.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,this.cols?.list??[]):void 0}setColSpanActive(){this.colSpanActive=!!this.cols?.list.some(e=>null!=e.getColDef().colSpan)}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode)return;if(this.pivotMode=e,!this.ready)return;this.refreshCols(!1);const{visibleCols:i,eventSvc:n}=this.beans;i.refresh(t),n.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){const e=this.beans.pivotColsSvc?.columns;return this.pivotMode&&!!e?.length}recreateColumnDefs(e){if(!this.cols)return;this.beans.autoColSvc?.updateColumns(e);const t=(0,c._convertColumnEventSourceType)(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){(0,c._destroyColumnTree)(this.beans,this.colDefCols?.tree),super.destroy()}getColTree(){return this.cols?.tree??[]}getColDefColTree(){return this.colDefCols?.tree??[]}getColDefCols(){return this.colDefCols?.list??null}getCols(){return this.cols?.list??[]}getAllCols(){const{pivotResultCols:e,autoColSvc:t,selectionColSvc:i}=this.beans,n=e?.getPivotResultCols()?.list;return[this.colDefCols?.list??[],t?.columns?.list??[],i?.columns?.list??[],n??[]].flat()}getColsForKeys(e){return e?e.map(e=>this.getCol(e)).filter(e=>null!=e):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return null==e?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(null==t)return null;const{map:i,list:n}=t;if("string"==typeof e&&i[e])return i[e];for(let t=0;t<n.length;t++)if((0,c._columnsMatch)(n[t],e))return n[t];return this.beans.autoColSvc?.getColumn(e)??this.beans.selectionColSvc?.getColumn(e)??null}}t.ColumnModel=d},2027:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnApiModule=t.ColumnFlexModule=t.DataTypeModule=void 0;const n=i(7358),o=i(7205),r=i(1144),s=i(4604),a=i(2849),l=i(6350);t.DataTypeModule={moduleName:"DataType",version:o.VERSION,beans:[l.DataTypeService],dependsOn:[n.CheckboxCellRendererModule]},t.ColumnFlexModule={moduleName:"ColumnFlex",version:o.VERSION,beans:[a.ColumnFlexService]},t.ColumnApiModule={moduleName:"ColumnApi",version:o.VERSION,beans:[s.ColumnDefFactory],apiFunctions:{getColumnDef:r.getColumnDef,getDisplayNameForColumn:r.getDisplayNameForColumn,getColumn:r.getColumn,getColumns:r.getColumns,applyColumnState:r.applyColumnState,getColumnState:r.getColumnState,resetColumnState:r.resetColumnState,isPinning:r.isPinning,isPinningLeft:r.isPinningLeft,isPinningRight:r.isPinningRight,getDisplayedColAfter:r.getDisplayedColAfter,getDisplayedColBefore:r.getDisplayedColBefore,setColumnsVisible:r.setColumnsVisible,setColumnsPinned:r.setColumnsPinned,getAllGridColumns:r.getAllGridColumns,getDisplayedLeftColumns:r.getDisplayedLeftColumns,getDisplayedCenterColumns:r.getDisplayedCenterColumns,getDisplayedRightColumns:r.getDisplayedRightColumns,getAllDisplayedColumns:r.getAllDisplayedColumns,getAllDisplayedVirtualColumns:r.getAllDisplayedVirtualColumns,getColumnDefs:r.getColumnDefs}}},8997:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnNameService=t._camelCaseToHumanText=void 0;const n=i(8731),o=i(7274);function r(e){return e&&null!=e?e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map(e=>e.substring(0,1).toUpperCase()+(e.length>1?e.substring(1,e.length):"")).join(" "):null}t._camelCaseToHumanText=r;class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;const n=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:o}=this.beans;return i&&o?o.getHeaderName(e,n):n}getDisplayNameForProvidedColumnGroup(e,t,i){const n=t?.getColGroupDef();return n?this.getHeaderName(n,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,n,s){const a=e.headerValueGetter;if(a){const r=(0,o._addGridCommonParams)(this.gos,{colDef:e,column:t,columnGroup:i,providedColumnGroup:n,location:s});return"function"==typeof a?a(r):"string"==typeof a?this.beans.expressionSvc?.evaluate(a,r)??null:""}return null!=e.headerName?e.headerName:e.field?r(e.field):""}}t.ColumnNameService=s},2885:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getColumnStateFromColDef=t._getColumnState=t._compareColumnStatesAndDispatchEvents=t._resetColumnState=t._applyColumnState=void 0;const n=i(3505),o=i(1502),r=i(4422),s=i(7764),a=i(2934),l=i(2716),c=i(3146);function d(e,t,i){const{colModel:a,rowGroupColsSvc:d,pivotColsSvc:h,autoColSvc:p,selectionColSvc:f,colAnimation:m,visibleCols:v,pivotResultCols:b,environment:y,valueColsSvc:w,eventSvc:C,gos:_}=e,S=a.getColDefCols()||[];if(!S?.length)return!1;if(t?.state&&!t.state.forEach)return(0,s._warn)(32),!1;const x=(n,o,r,s,a)=>{if(!n)return;const u=(0,c.getValueFactory)(o,t.defaultState),p=u("flex").value1;if((0,l.updateSomeColumnState)(e,n,u("hide").value1,u("sort").value1,u("sortIndex").value1,u("pinned").value1,p,i),null==p){const e=u("width").value1;if(null!=e){const t=n.getColDef().minWidth??y.getDefaultColumnMinWidth();null!=t&&e>=t&&n.setActualWidth(e,i)}}!a&&n.isPrimary()&&(w?.syncColumnWithState(n,i,u),d?.syncColumnWithState(n,i,u,r),h?.syncColumnWithState(n,i,u,s))},A=(r,l,m)=>{const b=u(e,i),y=l.slice(),w={},S={},A=[],E=[],T=[];let k=0;const D=d?.columns.slice()??[],M=h?.columns.slice()??[];r.forEach(e=>{const t=e.colId;if(t.startsWith(c.GROUP_AUTO_COLUMN_ID))return A.push(e),void T.push(e);if((0,c.isColumnSelectionCol)(t))return E.push(e),void T.push(e);const i=m(t);i?(x(i,e,w,S,!1),(0,o._removeFromArray)(y,i)):(T.push(e),k+=1)});const P=e=>x(e,null,w,S,!1);y.forEach(P),d?.sortColumns(g.bind(d,w,D)),h?.sortColumns(g.bind(h,S,M)),a.refreshCols(!1);const R=(e,t,i=[])=>{t.forEach(t=>{const n=e(t.colId);(0,o._removeFromArray)(i,n),x(n,t,null,null,!0)}),i.forEach(P)};return R(e=>p?.getColumn(e)??null,A,p?.getColumns()?.slice()),R(e=>f?.getColumn(e)??null,E,f?.getColumns()?.slice()),function(e,t,i){if(!e.applyOrder||!e.state)return;const o=[];e.state.forEach(e=>{null!=e.colId&&o.push(e.colId)}),function(e,t,i,o){if(null==e)return;let r=[];const a={};t.forEach(t=>{if(a[t])return;const i=e.map[t];i&&(r.push(i),a[t]=!0)});let l=0;e.list.forEach(e=>{const t=e.getColId();null==a[t]&&(t.startsWith(c.GROUP_AUTO_COLUMN_ID)?r.splice(l++,0,e):r.push(e))}),r=(0,n.placeLockedColumns)(r,o),(0,n.doesMovePassMarryChildren)(r,i.getColTree())?e.list=r:(0,s._warn)(39)}(t.cols,o,t,i)}(t,a,_),v.refresh(i),C.dispatchEvent({type:"columnEverythingChanged",source:i}),b(),{unmatchedAndAutoStates:T,unmatchedCount:k}};m?.start();let{unmatchedAndAutoStates:E,unmatchedCount:T}=A(t.state||[],S,e=>a.getColDefCol(e));return(E.length>0||(0,r._exists)(t.defaultState))&&(T=A(E,b?.getPivotResultCols()?.list??[],e=>b?.getPivotResultCol(e)??null).unmatchedCount),m?.finish(),0===T}function u(e,t){const{rowGroupColsSvc:i,pivotColsSvc:n,valueColsSvc:r,colModel:s,sortSvc:l,eventSvc:c}=e,d={rowGroupColumns:i?.columns.slice()??[],pivotColumns:n?.columns.slice()??[],valueColumns:r?.columns.slice()??[]},u=h(e),p={};return u.forEach(e=>{p[e.colId]=e}),()=>{const r=s.getAllCols(),g=(e,i,n,r)=>{const s=i.map(r),a=n.map(r);if((0,o._areEqual)(s,a))return;const l=new Set(i);n.forEach(e=>{l.delete(e)||l.add(e)});const d=[...l];c.dispatchEvent({type:e,columns:d,column:1===d.length?d[0]:null,source:t})},f=e=>{const t=[];return r.forEach(i=>{const n=p[i.getColId()];n&&e(n,i)&&t.push(i)}),t},m=e=>e.getColId();g("columnRowGroupChanged",d.rowGroupColumns,i?.columns??[],m),g("columnPivotChanged",d.pivotColumns,n?.columns??[],m);const v=f((e,t)=>{const i=null!=e.aggFunc,n=i!=t.isValueActive(),o=i&&e.aggFunc!=t.getAggFunc();return n||o});v.length>0&&(0,a.dispatchColumnChangedEvent)(c,"columnValueChanged",v,t),(0,a.dispatchColumnResizedEvent)(c,f((e,t)=>e.width!=t.getActualWidth()),!0,t),(0,a.dispatchColumnPinnedEvent)(c,f((e,t)=>e.pinned!=t.getPinned()),t),(0,a.dispatchColumnVisibleEvent)(c,f((e,t)=>e.hide==t.isVisible()),t);const b=f((e,t)=>e.sort!=t.getSort()||e.sortIndex!=t.getSortIndex());b.length>0&&l?.dispatchSortChangedEvents(t,b);const y=h(e);!function(e,t,i,n,o){const r={};t.forEach(e=>r[e.colId]=e);const s={};e.forEach(e=>{r[e.colId]&&(s[e.colId]=!0)});const a=e.filter(e=>s[e.colId]),l=t.filter(e=>s[e.colId]),c=[];l.forEach((e,t)=>{const i=a&&a[t];if(i&&i.colId!==e.colId){const e=n.getCol(i.colId);e&&c.push(e)}}),c.length&&o.dispatchEvent({type:"columnMoved",columns:c,column:1===c.length?c[0]:null,finished:!0,source:i})}(u,y,t,s,c)}}function h(e){const{colModel:t,rowGroupColsSvc:i,pivotColsSvc:n}=e,o=t.getColDefCols();if((0,r._missing)(o)||!t.isAlive())return[];const s=t.getAllCols(),a=i?.columns,l=n?.columns,c=s.map(e=>(e=>{const t=e.isRowGroupActive()&&a?a.indexOf(e):null,i=e.isPivotActive()&&l?l.indexOf(e):null,n=e.isValueActive()?e.getAggFunc():null,o=null!=e.getSort()?e.getSort():null,r=null!=e.getSortIndex()?e.getSortIndex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:o,sortIndex:r,aggFunc:n,rowGroup:e.isRowGroupActive(),rowGroupIndex:t,pivot:e.isPivotActive(),pivotIndex:i,flex:e.getFlex()??null}})(e)),d=new Map(t.getCols().map((e,t)=>[e.getColId(),t]));return c.sort((e,t)=>(d.has(e.colId)?d.get(e.colId):-1)-(d.has(t.colId)?d.get(t.colId):-1)),c}function p(e){const t=(e,t)=>null!=e?e:null!=t?t:null,i=e.getColDef(),n=t(i.sort,i.initialSort),o=t(i.sortIndex,i.initialSortIndex),r=t(i.hide,i.initialHide),s=t(i.pinned,i.initialPinned),a=t(i.width,i.initialWidth),l=t(i.flex,i.initialFlex);let c=t(i.rowGroupIndex,i.initialRowGroupIndex),d=t(i.rowGroup,i.initialRowGroup);null!=c||null!=d&&0!=d||(c=null,d=null);let u=t(i.pivotIndex,i.initialPivotIndex),h=t(i.pivot,i.initialPivot);null!=u||null!=h&&0!=h||(u=null,h=null);const p=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:n,sortIndex:o,hide:r,pinned:s,width:a,flex:l,rowGroup:d,rowGroupIndex:c,pivot:h,pivotIndex:u,aggFunc:p}}t._applyColumnState=d,t._resetColumnState=function(e,t){const{colModel:i,autoColSvc:n}=e,o=i.getColDefCols();if(!o?.length)return;const s=i.getColDefColTree(),a=(0,c._getColumnsFromTree)(s),l=[];let u=1e3,h=1e3,g=[];const f=n?.getColumns();f&&(g=g.concat(f)),a&&(g=g.concat(a)),g.forEach(e=>{const t=p(e);(0,r._missing)(t.rowGroupIndex)&&t.rowGroup&&(t.rowGroupIndex=u++),(0,r._missing)(t.pivotIndex)&&t.pivot&&(t.pivotIndex=h++),l.push(t)}),d(e,{state:l,applyOrder:!0},t)},t._compareColumnStatesAndDispatchEvents=u,t._getColumnState=h,t.getColumnStateFromColDef=p;const g=(e,t,i,n)=>{const o=e[i.getId()],r=e[n.getId()],s=null!=o,a=null!=r;if(s&&a)return o-r;if(s)return-1;if(a)return 1;const l=t.indexOf(i),c=t.indexOf(n),d=l>=0;return d&&c>=0?l-c:d?-1:1}},3146:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getValueFactory=t._columnsMatch=t._convertColumnEventSourceType=t._updateColsMap=t._areColIdsEqual=t.convertColumnTypes=t.isRowNumberCol=t.isColumnSelectionCol=t.isColumnGroupAutoCol=t._destroyColumnTree=t.getWidthOfColsInList=t._getColumnsFromTree=t.ROW_NUMBERS_COLUMN_ID=t.SELECTION_COLUMN_ID=t.GROUP_AUTO_COLUMN_ID=void 0;const n=i(3355),o=i(9409),r=i(1502),s=i(4422),a=i(2716);t.GROUP_AUTO_COLUMN_ID="ag-Grid-AutoColumn",t.SELECTION_COLUMN_ID="ag-Grid-SelectionColumn",t.ROW_NUMBERS_COLUMN_ID="ag-Grid-RowNumbersColumn",t._getColumnsFromTree=function(e){const t=[],i=e=>{for(let r=0;r<e.length;r++){const s=e[r];(0,n.isColumn)(s)?t.push(s):(0,o.isProvidedColumnGroup)(s)&&i(s.getChildren())}};return i(e),t},t.getWidthOfColsInList=function(e){return e.reduce((e,t)=>e+t.getActualWidth(),0)},t._destroyColumnTree=function(e,t,i){const n={};if(!t)return;(0,a.depthFirstOriginalTreeSearch)(null,t,e=>{n[e.getInstanceId()]=e}),i&&(0,a.depthFirstOriginalTreeSearch)(null,i,e=>{n[e.getInstanceId()]=null});const o=Object.values(n).filter(e=>null!=e);e.context.destroyBeans(o)},t.isColumnGroupAutoCol=function(e){return e.getId().startsWith(t.GROUP_AUTO_COLUMN_ID)},t.isColumnSelectionCol=function(e){const i="string"==typeof e?e:"getColId"in e?e.getColId():e.colId;return i?.startsWith(t.SELECTION_COLUMN_ID)??!1},t.isRowNumberCol=function(e){const i="string"==typeof e?e:"getColId"in e?e.getColId():e.colId;return i?.startsWith(t.ROW_NUMBERS_COLUMN_ID)??!1},t.convertColumnTypes=function(e){let t=[];return e instanceof Array?t=e:"string"==typeof e&&(t=e.split(",")),t},t._areColIdsEqual=function(e,t){return(0,r._areEqual)(e,t,(e,t)=>e.getColId()===t.getColId())},t._updateColsMap=function(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)},t._convertColumnEventSourceType=function(e){return"gridOptionsUpdated"===e?"gridOptionsChanged":e},t._columnsMatch=function(e,t){const i=e===t,n=e.getColDef()===t,o=e.getColId()==t;return i||n||o},t.getValueFactory=(e,t)=>(i,n)=>{const o={value1:void 0,value2:void 0};let r=!1;return e&&(void 0!==e[i]&&(o.value1=e[i],r=!0),(0,s._exists)(n)&&void 0!==e[n]&&(o.value2=e[n],r=!0)),!r&&t&&(void 0!==t[i]&&(o.value1=t[i]),(0,s._exists)(n)&&void 0!==t[n]&&(o.value2=t[n])),o}},5034:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnViewportService=void 0;const n=i(8731),o=i(3355),r=i(4422);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,i=!1){const{visibleCols:n}=this,o=n.isBodyWidthDirty;if(e!==this.scrollWidth||t!==this.scrollPosition||o){if(this.scrollWidth=e,this.scrollPosition=t,n.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const i=n.bodyWidth;this.viewportLeft=i-t-e,this.viewportRight=i-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(i)}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t]}return i||[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||0===this.viewportRight}clear(e){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},e||(this.colsWithinViewportHash="")}isColumnInHeaderViewport(e){return!(!e.isAutoHeaderHeight()&&!function(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}(e))||this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),n=this.viewportLeft-200,o=this.viewportRight+200;return!(t<n&&i<n||t>o&&i>o)}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:i}=this,n=i.centerCols;return i.getColsForRow(e,n,t,e=>{const t=e.getLeft();return(0,r._exists)(t)&&t>this.viewportLeft})}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){this.clear(!0);const e={},{leftCols:t,rightCols:i,treeLeft:n,treeRight:r,treeCenter:s}=this.visibleCols;this.headerColsWithinViewport.concat(t).concat(i).forEach(t=>e[t.getId()]=!0);const a=(t,i,n)=>{let r=!1;for(let s=0;s<t.length;s++){const l=t[s];let c=!1;if((0,o.isColumn)(l))c=!0===e[l.getId()];else{const e=l.getDisplayedChildren();e&&(c=a(e,i,n+1))}c&&(r=!0,i[n]||(i[n]=[]),i[n].push(l))}return r};a(n,this.rowsOfHeadersToRenderLeft,0),a(r,this.rowsOfHeadersToRenderRight,0),a(s,this.rowsOfHeadersToRenderCenter,0)}extractViewport(){this.extractViewportColumns();const e=this.getViewportColumns().map(e=>`${e.getId()}-${e.getPinned()||"normal"}`).join("#"),t=this.colsWithinViewportHash!==e;return t&&(this.colsWithinViewportHash=e,this.calculateHeaderRows()),t}}t.ColumnViewportService=s},6350:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DataTypeService=void 0;const n=i(9853),o=i(8731),r=i(7274),s=i(9827),a=i(4422),l=i(6996),c=i(7764),d=i(2716),u=i(2885),h=i(3146);class p extends o.BeanStub{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes(),t={};this.dataTypeDefinitions=t;const i={};this.formatValueFuncs=i;const n=e=>t=>{const{column:i,node:n,value:o}=t;let r=i.getColDef().valueFormatter;return r===e.groupSafeValueFormatter&&(r=e.valueFormatter),this.beans.valueSvc.formatValue(i,n,o,r)};for(const o of Object.keys(e)){const r=e[o],s={...r,groupSafeValueFormatter:m(r,this.gos)};t[o]=s,i[o]=n(s)}const o=this.gos.get("dataTypeDefinitions")??{},r={};this.dataTypeMatchers=r;for(const s of Object.keys(o)){const a=o[s],l=this.processDataTypeDefinition(a,o,[s],e);l&&(t[s]=l,a.dataTypeMatcher&&(r[s]=a.dataTypeMatcher),i[s]=n(l))}this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(t=>{const i=r[t];i&&delete r[t],r[t]=i??e[t].dataTypeMatcher})}processDataTypeDefinition(e,t,i,n){let o;const r=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let i=n[r];const s=t[r];if(i&&s&&(i=s),!f(e,i,r))return;o=g(i,e)}else{if(i.includes(r))return void(0,c._warn)(44);const s=t[r];if(!f(e,s,r))return;const a=this.processDataTypeDefinition(s,t,[...i,r],n);if(!a)return;o=g(a,e)}return{...o,groupSafeValueFormatter:m(o,this.gos)}}updateColDefAndGetColumnType(e,t,i){let{cellDataType:n}=t;const{field:o}=t;if(void 0===n&&(n=e.cellDataType),null!=n&&!0!==n||(n=!!this.canInferCellDataType(e,t)&&this.inferCellDataType(o,i)),!n)return void(e.cellDataType=!1);const r=this.dataTypeDefinitions[n];if(r)return e.cellDataType=n,r.groupSafeValueFormatter&&(e.valueFormatter=r.groupSafeValueFormatter),r.valueParser&&(e.valueParser=r.valueParser),r.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,n,r,i),r.columnTypes;(0,c._warn)(47,{cellDataType:n})}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=e=>{t.add(e.key)};e.__addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",i))}canInferCellDataType(e,t){const{gos:i}=this;if(!(0,r._isClientSideRowModel)(i))return!1;const n={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(v(t,n))return!1;const o=null===t.type?e.type:t.type;if(o){const e=i.get("columnTypes")??{};if((0,h.convertColumnTypes)(o).some(t=>{const i=e[t.trim()];return i&&v(i,n)}))return!1}return!v(e,n)}inferCellDataType(e,t){if(!e)return;let i;const n=this.getInitialData();if(n){const t=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");i=(0,l._getValueUsingField)(n,e,t)}else this.initWaitForRowData(t);return null!=i?Object.keys(this.dataTypeMatchers).find(e=>this.dataTypeMatchers[e](i))??"object":void 0}getInitialData(){const e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{const e=this.beans.rowModel.rootNode?.allLeafChildren;if(e?.length)return e[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:i,eventSvc:n}=this.beans;t&&i&&(i.shouldQueueResizeOperations=!0);const[o]=this.addManagedEventListeners({rowDataUpdateStarted:e=>{const{firstRowData:r}=e;r&&(o?.(),this.isPendingInference=!1,this.processColumnsPendingInference(r,t),this.columnStateUpdatesPendingInference={},t&&i?.processResizeOperations(),n.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const n={},o={};for(const e of Object.keys(this.columnStateUpdatesPendingInference)){const r=this.columnStateUpdatesPendingInference[e],s=this.colModel.getCol(e);if(!s)return;const a=s.getColDef();if(!this.resetColDefIntoCol(s,"cellDataTypeInferred"))return;const l=s.getColDef();if(t&&l.type&&l.type!==a.type){const t=b(s,r);t.rowGroup&&null==t.rowGroupIndex&&(n[e]=t),t.pivot&&null==t.pivotIndex&&(o[e]=t),i.push(t)}}t&&i.push(...this.generateColumnStateForRowGroupAndPivotIndexes(n,o)),i.length&&(0,u._applyColumnState)(this.beans,{state:i},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},{rowGroupColsSvc:n,pivotColsSvc:o}=this.beans;return n?.restoreColumnOrder(i,e),o?.restoreColumnOrder(i,t),Object.values(i)}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const n=(0,d._addColumnDefaultAndTypes)(this.beans,i,e.getColId());return e.setColDef(n,i,t),!0}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}getDateStringTypeDefinition(e){const{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(null==t)return!0;const i=this.getDataTypeDefinition(e)?.dataTypeMatcher;return!i||i(t)}validateColDef(e){const t=e=>(0,c._warn)(48,{property:e});if("object"===e.cellDataType){const{object:i}=this.dataTypeDefinitions;e.valueFormatter!==i.groupSafeValueFormatter||this.hasObjectValueFormatter||t("Formatter"),e.editable&&e.valueParser===i.valueParser&&!this.hasObjectValueParser&&t("Parser")}}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,i,o){const r=this.formatValueFuncs[t];switch(i.baseDataType){case"number":e.cellEditor="agNumberCellEditor";break;case"boolean":e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=e=>!!e.colDef.editable&&e.event.key===n.KeyCode.SPACE;break;case"date":e.cellEditor="agDateCellEditor",e.keyCreator=r;break;case"dateString":e.cellEditor="agDateStringCellEditor",e.keyCreator=r;break;case"object":e.cellEditorParams={useFormatter:!0},e.comparator=(e,t)=>{const i=this.colModel.getColDefCol(o),n=i?.getColDef();if(!i||!n)return 0;const s=null==e?"":r({column:i,node:null,value:e}),a=null==t?"":r({column:i,node:null,value:t});return s===a?0:s>a?1:-1},e.keyCreator=r}this.beans.filterManager?.setColDefPropertiesForDataType(e,i,r)}getDefaultDataTypes(){const e=e=>!!e.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:e=>""===e.newValue?.trim?.()?null:Number(e.newValue),valueFormatter:e=>null==e.value?"":"number"!=typeof e.value||isNaN(e.value)?t("invalidNumber","Invalid Number"):String(e.value),dataTypeMatcher:e=>"number"==typeof e},text:{baseDataType:"text",valueParser:e=>""===e.newValue?null:(0,a._toStringOrNull)(e.newValue),dataTypeMatcher:e=>"string"==typeof e},boolean:{baseDataType:"boolean",valueParser:e=>null==e.newValue?e.newValue:""===e.newValue?.trim?.()?null:"true"===String(e.newValue).toLowerCase(),valueFormatter:e=>null==e.value?"":String(e.value),dataTypeMatcher:e=>"boolean"==typeof e},date:{baseDataType:"date",valueParser:e=>(0,s._parseDateTimeFromString)(null==e.newValue?null:String(e.newValue)),valueFormatter:e=>null==e.value?"":e.value instanceof Date&&!isNaN(e.value.getTime())?(0,s._serialiseDate)(e.value,!1)??"":t("invalidDate","Invalid Date"),dataTypeMatcher:e=>e instanceof Date},dateString:{baseDataType:"dateString",dateParser:e=>(0,s._parseDateTimeFromString)(e)??void 0,dateFormatter:e=>(0,s._serialiseDate)(e??null,!1)??void 0,valueParser:t=>e(String(t.newValue))?t.newValue:null,valueFormatter:t=>e(String(t.value))?t.value:"",dataTypeMatcher:t=>"string"==typeof t&&e(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:e=>(0,a._toStringOrNull)(e.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}}function g(e,t){const i={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...(0,h.convertColumnTypes)(e.columnTypes),...(0,h.convertColumnTypes)(t.columnTypes)]),i}function f(e,t,i){return t?t.baseDataType===e.baseDataType||((0,c._warn)(46),!1):((0,c._warn)(45,{parentCellDataType:i}),!1)}function m(e,t){if(e.valueFormatter)return i=>{if(i.node?.group){const n=(i.colDef.pivotValueColumn??i.column).getAggFunc();if(n){if("first"===n||"last"===n)return e.valueFormatter(i);if("number"===e.baseDataType&&"count"!==n){if("number"==typeof i.value)return e.valueFormatter(i);if("object"==typeof i.value){if(!i.value)return;if("toNumber"in i.value)return e.valueFormatter({...i,value:i.value.toNumber()});if("value"in i.value)return e.valueFormatter({...i,value:i.value.value})}}return}if("groupRows"===t.get("groupDisplayType")&&!t.get("treeData"))return}else if(t.get("groupHideOpenParents")&&i.column.isRowGroupActive()&&"string"==typeof i.value&&!e.dataTypeMatcher?.(i.value))return;return e.valueFormatter(i)}}function v(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,n])=>function(e,t,i,n){if(!t[i])return!1;const o=e[i];return null===o?(t[i]=!1,!1):void 0===n?!!o:o===n}(e,t,i,n))}function b(e,t){const i=(0,u.getColumnStateFromColDef)(e);return t.forEach(e=>{delete i[e],"rowGroup"===e?delete i.rowGroupIndex:"pivot"===e&&delete i.pivotIndex}),i}t.DataTypeService=p},6034:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.GroupInstanceIdCreator=void 0,t.GroupInstanceIdCreator=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return i="number"!=typeof t?0:t+1,this.existingIds[e]=i,i}}},3245:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionColService=void 0;const n=i(8731),o=i(3355),r=i(7274),s=i(2885),a=i(3146);class l extends n.BeanStub{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,(0,a._convertColumnEventSourceType)(e.source))}),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(e){const t=this.columns;null!=t&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),(0,a._updateColsMap)(e))}createColumns(e,t){const i=e.treeDepth,n=(this.columns?.treeDepth??-1)==i,o=this.generateSelectionCols();if((0,a._areColIdsEqual)(o,this.columns?.list??[])&&n)return;(()=>{(0,a._destroyColumnTree)(this.beans,this.columns?.tree),this.columns=null})();const{colGroupSvc:r}=this.beans,s=r?.findDepth(e.tree)??0,l=r?.balanceTreeForAutoCols(o,s)??[];this.columns={list:o,tree:l,treeDepth:s,map:{}},t(e=>{if(!e)return null;const t=e.filter(e=>!(0,a.isColumnSelectionCol)(e));return[...o,...t]})}updateColumns(e){const t=(0,a._convertColumnEventSourceType)(e.source),i=e.currentValue;this.columns?.list.forEach(e=>{const n=this.createSelectionColDef(i);e.setColDef(n,null,t),(0,s._applyColumnState)(this.beans,{state:[{colId:e.getColId(),...n}]},t)})}getColumn(e){return this.columns?.list.find(t=>(0,a._columnsMatch)(t,e))??null}getColumns(){return this.columns?.list??null}isSelectionColumnEnabled(){const{gos:e,beans:t}=this,i=e.get("rowSelection");if("object"!=typeof i||!(0,r._isRowSelection)(e))return!1;const n=(t.autoColSvc?.getColumns()?.length??0)>0;if("autoGroupColumn"===i.checkboxLocation&&n)return!1;const o=!!(0,r._getCheckboxes)(i),s=(0,r._getHeaderCheckbox)(i);return o||s}createSelectionColDef(e){const{gos:t}=this.beans,i=e??t.get("selectionColumnDef"),n=t.get("enableRtl"),{rowSpan:o,spanRows:r,...s}=i??{};return{width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:n?"right":"left",comparator(e,t,i,n){const o=i.isSelected();return o===n.isSelected()?0:o?1:-1},editable:!1,suppressFillHandle:!0,pinned:null,...s,colId:a.SELECTION_COLUMN_ID}}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];const e=this.createSelectionColDef(),t=e.colId;this.beans.validation?.validateColDef(e,t,!0);const i=new o.AgColumn(e,null,t,!1);return this.createBean(i),[i]}onSelectionOptionsChanged(e,t,i){const n=(t&&"string"!=typeof t?(0,r._getCheckboxes)(t):void 0)!==(e&&"string"!=typeof e?(0,r._getCheckboxes)(e):void 0),o=(t&&"string"!=typeof t?(0,r._getHeaderCheckbox)(t):void 0)!==(e&&"string"!=typeof e?(0,r._getHeaderCheckbox)(e):void 0),s=(0,r._getCheckboxLocation)(e),a=(0,r._getCheckboxLocation)(t);(n||o||s!==a)&&this.beans.colModel.refreshAll(i)}destroy(){(0,a._destroyColumnTree)(this.beans,this.columns?.tree),super.destroy()}refreshVisibility(e){if(!this.isSelectionColumnEnabled())return;const t=this.beans,i=t.visibleCols.getAllTrees()??[];if(0!==i.length){if(!i.some(c)){const i=(0,s._getColumnState)(t).find(e=>(0,a.isColumnSelectionCol)(e.colId));i&&(0,s._applyColumnState)(t,{state:[{colId:i.colId,hide:!i.hide}]},e)}if(1===i.length){const n=d(i[0]);if(!n)return;(0,s._applyColumnState)(t,{state:[{colId:n.getColId(),hide:!0}]},e)}}}}t.SelectionColService=l;const c=e=>e.isColumn?(0,a.isColumnSelectionCol)(e):e.getChildren()?.some(c)??!1;function d(e){if(e.isColumn)return(0,a.isColumnSelectionCol)(e)?e:null;const t=e.getChildren()??[];for(const e of t){const t=d(e);if(t)return t}return null}},6869:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.depthFirstAllColumnTreeSearch=t.VisibleColsService=void 0;const n=i(8731),o=i(3355),r=i(6908),s=i(1502),a=i(3146),l=i(6034);class c extends n.BeanStub{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){const{colModel:i,colGroupSvc:n,colViewport:o}=this.beans;t||this.buildTrees(i,n),n?.updateOpenClosedVisibility();const r=u(this.treeLeft);this.leftCols=r,this.centerCols=u(this.treeCenter);const s=u(this.treeRight);this.rightCols=s,this.joinColsAriaOrder(i),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(e=>e.isAutoHeight()),this.beans.colFlex?.refreshFlexedColumns(),this.updateBodyWidths(),o.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(i,r,s,e),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}updateBodyWidths(){const e=(0,a.getWidthOfColsInList)(this.centerCols),t=(0,a.getWidthOfColsInList)(this.leftCols),i=(0,a.getWidthOfColsInList)(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,i,n){let o,r;this.gos.get("enableRtl")?(o=t?t[0]:null,r=i?(0,s._last)(i):null):(o=t?(0,s._last)(t):null,r=i?i[0]:null),e.getCols().forEach(e=>{e.setLastLeftPinned(e===o,n),e.setFirstRightPinned(e===r,n)})}buildTrees(e,t){const i=e.getColsToShow(),n=i.filter(e=>"left"==e.getPinned()),o=i.filter(e=>"right"==e.getPinned()),r=i.filter(e=>"left"!=e.getPinned()&&"right"!=e.getPinned()),s=new l.GroupInstanceIdCreator,a=e=>t?t.createColumnGroups(e):e.columns;this.treeLeft=a({columns:n,idCreator:s,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=a({columns:o,idCreator:s,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=a({columns:r,idCreator:s,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),i=[],n=[],o=[];for(const e of t){const t=e.getPinned();t?!0===t||"left"===t?i.push(e):o.push(e):n.push(e)}this.ariaOrderColumns=i.concat(n).concat(o)}getAriaColIndex(e){let t;return t=(0,r.isColumnGroup)(e)?e.getLeafColumns()[0]:e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(e=>{(0,r.isColumnGroup)(e)&&e.checkLeft()})})}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const i=t.getCols().slice(0),n=this.gos.get("enableRtl");[this.leftCols,this.rightCols,this.centerCols].forEach(t=>{if(n){let i=(0,a.getWidthOfColsInList)(t);t.forEach(t=>{i-=t.getActualWidth(),t.setLeft(i,e)})}else{let i=0;t.forEach(t=>{t.setLeft(i,e),i+=t.getActualWidth()})}!function(e,t){for(let i=0;i<t.length;i++){const n=e.indexOf(t[i]);n>=0&&(e[n]=e[e.length-1],e.pop())}}(i,t)}),i.forEach(t=>{t.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,i,n){const o=[];let r=null;for(let s=0;s<t.length;s++){const a=t[s],l=t.length-s,c=Math.min(a.getColSpan(e),l),d=[a];if(c>1){const e=c-1;for(let i=1;i<=e;i++)d.push(t[s+i]);s+=e}let u;i?(u=!1,d.forEach(e=>{i(e)&&(u=!0)})):u=!0,u&&(0===o.length&&r&&n&&n(a)&&o.push(r),o.push(a)),r=a}return o}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,i=t.indexOf(e);return i>0?t[i-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=e=>{this.colsAndGroupsMap[e.getUniqueId()]=e};d(this.treeCenter,!1,e),d(this.treeLeft,!1,e),d(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const n=this[t[i]];if(n.length)return e?(0,s._last)(n):n[0]}return null}getColAfter(e){const t=this.allCols,i=t.indexOf(e);return i<t.length-1?t[i+1]:null}getColsLeftWidth(){return(0,a.getWidthOfColsInList)(this.leftCols)}getDisplayedColumnsRightWidth(){return(0,a.getWidthOfColsInList)(this.rightCols)}isColAtEdge(e,t){const i=this.allCols;if(!i.length)return!1;const n="first"===t;let o;if((0,r.isColumnGroup)(e)){const t=e.getDisplayedLeafColumns();if(!t.length)return!1;o=n?t[0]:(0,s._last)(t)}else o=e;return(n?i[0]:(0,s._last)(i))===o}}function d(e,t,i){if(e)for(let n=0;n<e.length;n++){const o=e[n];(0,r.isColumnGroup)(o)&&d(t?o.getDisplayedChildren():o.getChildren(),t,i),i(o)}}function u(e){const t=[];return d(e,!0,e=>{(0,o.isColumn)(e)&&t.push(e)}),t}t.VisibleColsService=c,t.depthFirstAllColumnTreeSearch=d},3789:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.setupCompBean=t.EmptyBean=void 0;const n=i(8731);class o extends n.BeanStub{}t.EmptyBean=o,t.setupCompBean=function(e,t,i){return i&&e.addDestroyFunc(()=>t.destroyBean(i)),i??e}},4309:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgComponentUtils=void 0;const n=i(8731),o=i(3507);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){return e.cellRenderer?class{refresh(){return!1}getGui(){return this.eGui}init(e){const i=t(e),n=typeof i;this.eGui="string"!==n&&"number"!==n&&"boolean"!==n?null!=i?i:(0,o._loadTemplate)("<span></span>"):(0,o._loadTemplate)("<span>"+i+"</span>")}}:null}}t.AgComponentUtils=r},8414:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellRendererFunctionModule=void 0;const n=i(7205),o=i(4309);t.CellRendererFunctionModule={moduleName:"CellRendererFunction",version:n.VERSION,beans:[o.AgComponentUtils]}},8759:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponentWrapper=void 0;const n=i(7764);t.BaseComponentWrapper=class{wrap(e,t,i,n){const o=this.createWrapper(e,n);return t?.forEach(e=>{this.createMethod(o,e,!0)}),i?.forEach(e=>{this.createMethod(o,e,!1)}),o}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&(0,n._warn)(49,{methodName:t}),null)}}}},4110:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Registry=void 0;const n=i(8731),o=i(7764);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="registry",this.agGridDefaults={},this.agGridDefaultParams={},this.jsComps={},this.dynamicBeans={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");if(null!=e)for(const t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){const{icons:t,userComponents:i,dynamicBeans:n,selectors:o}=e;if(i){const e=(e,t,i)=>{this.agGridDefaults[e]=t,i&&(this.agGridDefaultParams[e]=i)};for(const t of Object.keys(i)){const n=i[t];"object"==typeof n?e(t,n.classImp,n.params):e(t,n)}}if(n)for(const e of Object.keys(n))this.dynamicBeans[e]=n[e];if(o?.forEach(e=>{this.selectors[e.selector]=e}),t)for(const e of Object.keys(t))this.icons[e]=t[e]}getUserComponent(e,t){const i=(e,t,i)=>({componentFromFramework:t,component:e,params:i}),{frameworkOverrides:n}=this.beans,o=n.frameworkComponent(t,this.gos.get("components"));if(null!=o)return i(o,!0);const r=this.jsComps[t];if(r)return i(r,n.isFrameworkComponent(r));const s=this.agGridDefaults[t];return s?i(s,!1,this.agGridDefaultParams[t]):(this.beans.validation?.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null)}createDynamicBean(e,t,...i){const n=this.dynamicBeans[e];if(null!=n)return new n(...i);if(t)throw new Error((0,o._errMsg)(256))}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}}t.Registry=r},4126:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._unwrapUserComp=void 0,t._unwrapUserComp=function(e){const t=e;return null!=t&&null!=t.getFrameworkComponentInstance?t.getFrameworkComponentInstance():e}},2036:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._mergeFilterParamsWithApplicationProvidedParams=t._getFilterCompKeys=t._getFloatingFilterCompDetails=t._getTooltipCompDetails=t._getNoRowsOverlayCompDetails=t._getLoadingOverlayCompDetails=t._getDateCompDetails=t._getFilterDetails=t._getCellEditorDetails=t._getLoadingCellRendererDetails=t._getEditorRendererDetails=t._getCellRendererDetails=t._getFullWidthDetailCellRendererDetails=t._getFullWidthGroupCellRendererDetails=t._getFullWidthLoadingCellRendererDetails=t._getFullWidthCellRendererDetails=t._getInnerHeaderGroupCompDetails=t._getHeaderGroupCompDetails=t._getInnerHeaderCompDetails=t._getHeaderCompDetails=t._getInnerCellRendererDetails=t._getDragAndDropImageCompDetails=void 0;const n=i(1585),o={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},r={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},s={name:"headerComponent",optionalMethods:["refresh"]},a={name:"innerHeaderComponent"},l={name:"innerHeaderGroupComponent"},c={name:"headerGroupComponent"},d={name:"innerRenderer",cellRenderer:!0,optionalMethods:["afterGuiAttached"]},u={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},h={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"]},p={name:"loadingCellRenderer",cellRenderer:!0},g={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},f={name:"loadingOverlayComponent",optionalMethods:["refresh"]},m={name:"noRowsOverlayComponent",optionalMethods:["refresh"]},v={name:"tooltipComponent"},b={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},y={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},w={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},C={name:"loadingCellRenderer",cellRenderer:!0},_={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},S={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};t._getDragAndDropImageCompDetails=function(e,t){return e.getCompDetailsFromGridOptions(r,"agDragAndDropImage",t,!0)},t._getInnerCellRendererDetails=function(e,t,i){return e.getCompDetails(t,d,void 0,i)},t._getHeaderCompDetails=function(e,t,i){return e.getCompDetails(t,s,"agColumnHeader",i)},t._getInnerHeaderCompDetails=function(e,t,i){return e.getCompDetails(t,a,void 0,i)},t._getHeaderGroupCompDetails=function(e,t){const i=t.columnGroup.getColGroupDef();return e.getCompDetails(i,c,"agColumnGroupHeader",t)},t._getInnerHeaderGroupCompDetails=function(e,t,i){return e.getCompDetails(t,l,void 0,i)},t._getFullWidthCellRendererDetails=function(e,t){return e.getCompDetailsFromGridOptions(w,void 0,t,!0)},t._getFullWidthLoadingCellRendererDetails=function(e,t){return e.getCompDetailsFromGridOptions(C,"agLoadingCellRenderer",t,!0)},t._getFullWidthGroupCellRendererDetails=function(e,t){return e.getCompDetailsFromGridOptions(_,"agGroupRowRenderer",t,!0)},t._getFullWidthDetailCellRendererDetails=function(e,t){return e.getCompDetailsFromGridOptions(S,"agDetailCellRenderer",t,!0)},t._getCellRendererDetails=function(e,t,i){return e.getCompDetails(t,u,void 0,i)},t._getEditorRendererDetails=function(e,t,i){return e.getCompDetails(t,h,void 0,i)},t._getLoadingCellRendererDetails=function(e,t,i){return e.getCompDetails(t,p,"agSkeletonCellRenderer",i,!0)},t._getCellEditorDetails=function(e,t,i){return e.getCompDetails(t,g,"agCellEditor",i,!0)},t._getFilterDetails=function(e,t,i,n){return e.getCompDetails(t,b,n,i,!0)},t._getDateCompDetails=function(e,t){return e.getCompDetailsFromGridOptions(o,"agDateInput",t,!0)},t._getLoadingOverlayCompDetails=function(e,t){return e.getCompDetailsFromGridOptions(f,"agLoadingOverlay",t,!0)},t._getNoRowsOverlayCompDetails=function(e,t){return e.getCompDetailsFromGridOptions(m,"agNoRowsOverlay",t,!0)},t._getTooltipCompDetails=function(e,t){return e.getCompDetails(t.colDef,v,"agTooltipComponent",t,!0)},t._getFloatingFilterCompDetails=function(e,t,i,n){return e.getCompDetails(t,y,n,i)},t._getFilterCompKeys=function(e,t){return(0,n._getUserCompKeys)(e,t,b)},t._mergeFilterParamsWithApplicationProvidedParams=function(e,t,i){return e.mergeParams(t,b,i)}},1585:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.UserComponentFactory=t._getUserCompKeys=void 0;const n=i(8731),o=i(6996),r=i(7990),s=i(7764);function a(e,t,i,n){const{name:o}=i;let r,s,a,l,c,d;if(t){const i=t,u=i[o+"Selector"],h=u?u(n):null,p=t=>{"string"==typeof t?r=t:null!=t&&!0!==t&&(e.isFrameworkComponent(t)?a=t:s=t)};h?(p(h.component),l=h.params,c=h.popup,d=h.popupPosition):p(i[o])}return{compName:r,jsComp:s,fwComp:a,paramsFromSelector:l,popupFromSelector:c,popupPositionFromSelector:d}}t._getUserCompKeys=a;class l extends n.BeanStub{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,i,n=!1){return this.getCompDetails(this.gridOptions,e,t,i,n)}getCompDetails(e,t,i,n,o=!1){const{name:r,cellRenderer:l}=t;let c,{compName:d,jsComp:u,fwComp:h,paramsFromSelector:p,popupFromSelector:g,popupPositionFromSelector:f}=a(this.beans.frameworkOverrides,e,t,n);const m=e=>{const t=this.registry.getUserComponent(r,e);t&&(u=t.componentFromFramework?void 0:t.component,h=t.componentFromFramework?t.component:void 0,c=t.params)};var v;if(null!=d&&m(d),null==u&&null==h&&null!=i&&m(i),!u||!l||(v=u)&&v.prototype&&"getGui"in v.prototype||(u=this.agCompUtils?.adaptFunction(t,u)),!u&&!h){const{validation:e}=this.beans;return void(!o||d===i&&i?i&&!e&&(0,s._error)(146,{comp:i}):d?e?.isProvidedUserComp(d)||(0,s._error)(50,{compName:d}):i?e||(0,s._error)(260,{...this.gos.getModuleErrorParams(),propName:r,compName:i}):(0,s._error)(216,{name:r}))}const b=this.mergeParams(e,t,n,p,c),y=null==u,w=u??h;return{componentFromFramework:y,componentClass:w,params:b,type:t,popupFromSelector:g,popupPositionFromSelector:f,newAgStackInstance:()=>this.newAgStackInstance(w,y,b,t)}}newAgStackInstance(e,t,i,n){let o;o=t?this.frameworkCompWrapper.wrap(e,n.mandatoryMethods,n.optionalMethods,n):new e,this.createBean(o);const s=o.init?.(i);return null==s?r.AgPromise.resolve(o):s.then(()=>o)}mergeParams(e,t,i,n=null,r){const s={...i,...r},a=e&&e[t.name+"Params"];if("function"==typeof a){const e=a(i);(0,o._mergeDeep)(s,e)}else"object"==typeof a&&(0,o._mergeDeep)(s,a);return(0,o._mergeDeep)(s,n),s}}t.UserComponentFactory=l},9853:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyCode=void 0,t.KeyCode={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"}},8731:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BeanStub=void 0;const n=i(5889),o=i(7230),r=i(2979);t.BeanStub=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new n.LocalEventService),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.localEventService?.removeEventListener(e,t,i)}dispatchLocalEvent(e){this.localEventService?.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const n of Object.keys(t)){const o=t[n];o&&i.push(this._setupListener(e,n,o))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;let n;return function(e){return void 0!==e.__addEventListener}(e)?(e.__addEventListener(t,i),n=()=>(e.__removeEventListener(t,i),null)):(e instanceof HTMLElement?(0,r._addSafePassiveEventListener)(this.beans.frameworkOverrides,e,t,i):e.addEventListener(t,i),n=()=>(e.removeEventListener(t,i),null)),this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(e=>e!==n),null)}setupGridOptionListener(e,t){const{gos:i}=this;i.addPropertyEventListener(e,t);const n=()=>(i.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(e=>e!==n),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,n=e=>{if(e.changeSet){if(e.changeSet&&e.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=e.changeSet.id}const n={type:"gridPropertyChanged",changeSet:e.changeSet,source:e.source};t(n)};e.forEach(e=>this.setupGridOptionListener(e,n))}getLocaleTextFunc(){return(0,o._getLocaleTextFunc)(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}}},2342:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;const n=i(2132),o=i(569);class r extends o.GenericContext{init(e){this.gridId=e.gridId,this.beans.context=this,this.destroyCallback=e.destroyCallback,super.init(e)}destroy(){super.destroy(),(0,n._unRegisterGridModules)(this.gridId),this.destroyCallback?.()}getGridId(){return this.gridId}}t.Context=r},569:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.GenericContext=void 0,t.GenericContext=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,e&&e.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){for(const t of Object.keys(e.providedBeanInstances))this.beans[t]=e.providedBeanInstances[t];e.beanClasses.forEach(e=>{const t=new e;t.beanName?this.beans[t.beanName]=t:console.error(`Bean ${e.name} is missing beanName`),this.createdBeans.push(t)}),e.derivedBeans?.forEach(e=>{const{beanName:t,bean:i}=e(this);this.beans[t]=i,this.createdBeans.push(i)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("null bean");return this.initBeans([e],t),e}initBeans(e,t){e.forEach(e=>{e.preWireBeans?.(this.beans),e.wireBeans?.(this.beans)}),e.forEach(e=>e.preConstruct?.()),t&&e.forEach(t),e.forEach(e=>e.postConstruct?.())}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}}},3943:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.gridBeanDestroyComparator=t.gridBeanInitComparator=void 0;const i=Object.fromEntries(["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","rowSpanSvc","pageBoundsListener","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","funcColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"].map((e,t)=>[e,t]));t.gridBeanInitComparator=function(e,t){return((e.beanName?i[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER)-((t.beanName?i[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER)},t.gridBeanDestroyComparator=function(e,t){return"gridDestroySvc"===e?.beanName?-1:0}},1310:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CsvCreator=void 0;const n=i(7331),o=i(3885),r=i(7274),s=i(7764),a=i(2927);class l extends n.BaseCreator{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueSvc=e.valueSvc}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed())return void(0,s._warn)(51);const t=this.getMergedParams(e),i=this.getData(t),n=new Blob(["\ufeff",i],{type:"text/plain"}),a="function"==typeof t.fileName?t.fileName((0,r._addGridCommonParams)(this.gos,{})):t.fileName;(0,o._downloadFile)(this.getFileName(a),n)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const i=t?Object.assign({},e):this.getMergedParams(e);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{colModel:t,colNames:i,rowGroupColsSvc:n,valueSvc:o,gos:r}=this,{processCellCallback:s,processHeaderCallback:l,processGroupHeaderCallback:c,processRowGroupCallback:d,suppressQuotes:u,columnSeparator:h}=e;return new a.CsvSerializingSession({colModel:t,colNames:i,valueSvc:o,gos:r,processCellCallback:s||void 0,processHeaderCallback:l||void 0,processGroupHeaderCallback:c||void 0,processRowGroupCallback:d||void 0,suppressQuotes:u||!1,columnSeparator:h||",",rowGroupColsSvc:n})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}}t.CsvCreator=l},2984:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.exportDataAsCsv=t.getDataAsCsv=void 0,t.getDataAsCsv=function(e,t){return e.csvCreator?.getDataAsCsv(t)},t.exportDataAsCsv=function(e,t){e.csvCreator?.exportDataAsCsv(t)}},9734:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CsvExportModule=void 0;const n=i(2728),o=i(7205),r=i(1310),s=i(2984);t.CsvExportModule={moduleName:"CsvExport",version:o.VERSION,beans:[r.CsvCreator],apiFunctions:{getDataAsCsv:s.getDataAsCsv,exportDataAsCsv:s.exportDataAsCsv},dependsOn:[n.SharedExportModule]}},2927:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CsvSerializingSession=void 0;const n=i(8376),o=i(7764);class r extends n.BaseGridSerializingSession{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&("string"==typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach(e=>{this.beginNewLine(),e.forEach((e,t)=>{0!==t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e.data.value||""),e.mergeAcross&&this.appendEmptyCells(e.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,n){0!=i&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(n)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){0!=t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){0!=t&&(this.result+=this.columnSeparator);const n=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(n.valueFormatted??n.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(null==e)return'""';let t;return"string"==typeof e?t=e:"function"==typeof e.toString?t=e.toString():((0,o._warn)(53),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1}}t.CsvSerializingSession=r},20:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CtrlsService=void 0;const n=i(8731);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(e=>e(this.params)),this.readyCallbacks.length=0)},this.beans.frameworkOverrides.runWhenReadyAsync?.()??!1)}updateReady(){const e=Object.values(this.params);this.ready=23===e.length&&e.every(e=>e?.isAlive()??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const e=this.readyCallbacks.indexOf(t);e>=0&&this.readyCallbacks.splice(e,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}}t.CtrlsService=o},2671:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.dragAndDropImageComponentCSS=void 0,t.dragAndDropImageComponentCSS=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}"},3814:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DragAndDropImageComponent=void 0;const n=i(3507),o=i(9970),r=i(8020),s=i(2671);class a extends r.Component{constructor(){super(),this.dragSource=null,this.eIcon=r.RefPlaceholder,this.eLabel=r.RefPlaceholder,this.registerCSS(s.dragAndDropImageComponentCSS)}postConstruct(){const e=e=>(0,o._createIcon)(e,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate('<div class="ag-dnd-ghost ag-unselectable">\n                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>\n            </div>')}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eIcon:i,dragSource:o,dropIconMap:r,gos:s}=this;(0,n._clearElement)(i);let a=null;e||(e=o?.getDefaultIconName?o.getDefaultIconName():"notAllowed"),a=r[e],i.classList.toggle("ag-shake-left-to-right",t),a===r.hide&&s.get("suppressDragLeaveHidesColumns")||a&&i.appendChild(a)}setLabel(e){this.eLabel.textContent=e}}t.DragAndDropImageComponent=a},2903:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DragAndDropService=t.DragSourceType=void 0;const n=i(2036),o=i(8731),r=i(8399),s=i(7274),a=i(1502),l=i(7764);var c;!function(e){e[e.ToolPanel=0]="ToolPanel",e[e.HeaderCell=1]="HeaderCell",e[e.RowDrag=2]="RowDrag",e[e.ChartPanel=3]="ChartPanel",e[e.AdvancedFilterBuilder=4]="AdvancedFilterBuilder"}(c||(t.DragSourceType=c={}));class d extends o.BeanStub{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.dragSvc=e.dragSvc,this.environment=e.environment,this.userCompFactory=e.userCompFactory}addDragSource(e,t=!1){const i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragSvc.addDragSource(i)}getDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;return e&&e.comp?e.comp:null}removeDragSource(e){const{dragSourceAndParamsList:t,dragSvc:i}=this,n=t.find(t=>t.dragSource===e);n&&(i.removeDragSource(n.params),(0,a._removeFromArray)(t,n))}destroy(){const{dragSourceAndParamsList:e,dragSvc:t,dropTargets:i}=this;e.forEach(e=>t.removeDragSource(e.params)),e.length=0,i.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=e.getDragItem(),e.onDragStarted?.(),this.createDragAndDropImageComponent()}onDragStop(e){this.dragSource?.onDragStopped?.();const{lastDropTarget:t}=this;if(t?.onDragStop){const i=this.createDropTargetEvent(t,e,null,null,!1);t.onDragStop(i)}this.clearDragAndDropProperties()}onDragCancel(){const{dragSource:e,lastDropTarget:t}=this;e?.onDragCancelled?.(),t?.onDragCancel&&t.onDragCancel(this.createDropTargetEvent(t,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){const i=this.getHorizontalDirection(e),n=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);const o=this.dropTargets.filter(t=>this.isMouseOnDropTarget(e,t)),r=this.findCurrentDropTarget(e,o),{lastDropTarget:s,dragSource:a,dragAndDropImageComp:l,dragItem:c}=this;if(r!==s){if(this.leaveLastTargetIfExists(e,i,n,t),null!==s&&null===r&&a?.onGridExit?.(c),null===s&&null!==r&&a?.onGridEnter?.(c),this.enterDragTargetIfExists(r,e,i,n,t),r&&l){const{comp:e,promise:t}=l;e?e.setIcon(r.getIconName?r.getIconName():null,!1):t.then(e=>{e&&e.setIcon(r.getIconName?r.getIconName():null,!1)})}this.lastDropTarget=r}else if(r&&r.onDragging){const o=this.createDropTargetEvent(r,e,i,n,t);r.onDragging(o)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let n=!1;const o=(e,t)=>{for(const i of t){const{width:t,height:n,left:o,right:r,top:s,bottom:a}=i.getBoundingClientRect();if(0===t||0===n)return!1;const l=e.clientX>=o&&e.clientX<r,c=e.clientY>=s&&e.clientY<a;if(!l||!c)return!1}return!0};for(const t of i)if(o(e,t)){n=!0;break}const{eElement:r,type:s}=this.dragSource;return!(t.targetContainsSource&&!t.getContainer().contains(r))&&n&&t.isInterestedIn(s,r)}findCurrentDropTarget(e,t){const i=t.length;if(0===i)return null;if(1===i)return t[0];const n=(0,s._getRootNode)(this.beans).elementsFromPoint(e.clientX,e.clientY);for(const e of n)for(const i of t)if(-1!==this.getAllContainersFromDropTarget(i).flatMap(e=>e).indexOf(e))return i;return null}enterDragTargetIfExists(e,t,i,n,o){if(e&&e.onDragEnter){const r=this.createDropTargetEvent(e,t,i,n,o);e.onDragEnter(r)}}leaveLastTargetIfExists(e,t,i,n){const{lastDropTarget:o}=this;if(!o)return;if(o.onDragLeave){const r=this.createDropTargetEvent(o,e,t,i,n);o.onDragLeave(r)}const r=this.getDragAndDropImageComponent();r&&r.setIcon(null,!1)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(e=>e.external).find(t=>t.getContainer()===e.getContainer())||null}isDropZoneWithinThisGrid(e){const t=this.ctrlsSvc.getGridBodyCtrl().eGridBody,{dropZoneTarget:i}=e;return t.contains(i)}getHorizontalDirection(e){const t=this.eventLastTime?.clientX,i=e.clientX;return t===i?null:t>i?"left":"right"}getVerticalDirection(e){const t=this.eventLastTime?.clientY,i=e.clientY;return t===i?null:t>i?"up":"down"}createDropTargetEvent(e,t,i,n,o){const r=e.getContainer(),a=r.getBoundingClientRect(),{dragItem:l,dragSource:c,gos:d}=this,u=t.clientX-a.left,h=t.clientY-a.top;return(0,s._addGridCommonParams)(d,{event:t,x:u,y:h,vDirection:n,hDirection:i,dragSource:c,fromNudge:o,dragItem:l,dropZoneTarget:r})}positionDragAndDropImageComp(e){const t=this.getDragAndDropImageComponent();t&&(0,s._anchorElementToMouseMoveEvent)(t.getGui(),e,this.beans)}removeDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;if(e){const{comp:t}=e;if(t){const e=t.getGui();this.dragAndDropImageParent?.removeChild(e),this.destroyBean(t)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource:e,gos:t,userCompFactory:i}=this;if(!e)return;const o=(0,n._getDragAndDropImageCompDetails)(i,(0,s._addGridCommonParams)(t,{dragSource:e}));if(!o)return;const r=o.newAgStackInstance();this.dragAndDropImageComp={promise:r},r.then(e=>{e&&this.isAlive()&&(this.processDragAndDropImageComponent(e),this.dragAndDropImageComp.comp=e)})}processDragAndDropImageComponent(e){const{dragSource:t,environment:i}=this;if(!t)return;const n=e.getGui();n.style.setProperty("position","absolute"),n.style.setProperty("z-index","9999"),(0,r._stampTopLevelGridCompWithGridInstance)(this.gos,n),i.applyThemeClasses(n),e.setIcon(null,!1);let{dragItemName:o}=t;"function"==typeof o&&(o=o()),e.setLabel(o||""),n.style.top="20px",n.style.left="20px";const a=(0,s._getPageBody)(this.beans);this.dragAndDropImageParent=a,a?a.appendChild(n):(0,l._warn)(54)}registerGridDropTarget(e,t){const i={getContainer:e,isInterestedIn:e=>e===c.HeaderCell||e===c.ToolPanel,getIconName:()=>"notAllowed"};this.addDropTarget(i),t.addDestroyFunc(()=>this.removeDropTarget(i))}}t.DragAndDropService=d},2830:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getRowDropZoneParams=t.removeRowDropZone=t.addRowDropZone=void 0,t.addRowDropZone=function(e,t){e.rowDragSvc?.rowDragFeature?.addRowDropZone(t)},t.removeRowDropZone=function(e,t){const i=e.dragAndDrop?.findExternalZone(t);i&&e.dragAndDrop?.removeDropTarget(i)},t.getRowDropZoneParams=function(e,t){return e.rowDragSvc?.rowDragFeature?.getRowDropZone(t)}},4388:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HorizontalResizeModule=t.RowDragModule=t.SharedDragAndDropModule=t.DragAndDropModule=t.DragModule=void 0;const n=i(714),o=i(7205),r=i(3814),s=i(2903),a=i(2830),l=i(2165),c=i(6843),d=i(2895);t.DragModule={moduleName:"Drag",version:o.VERSION,beans:[l.DragService]},t.DragAndDropModule={moduleName:"DragAndDrop",version:o.VERSION,dynamicBeans:{dndSourceComp:n.DndSourceComp},icons:{rowDrag:"grip"}},t.SharedDragAndDropModule={moduleName:"SharedDragAndDrop",version:o.VERSION,beans:[s.DragAndDropService],dependsOn:[t.DragModule],userComponents:{agDragAndDropImage:r.DragAndDropImageComponent},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},t.RowDragModule={moduleName:"RowDrag",version:o.VERSION,beans:[d.RowDragService],apiFunctions:{addRowDropZone:a.addRowDropZone,removeRowDropZone:a.removeRowDropZone,getRowDropZoneParams:a.getRowDropZoneParams},dependsOn:[t.SharedDragAndDropModule]},t.HorizontalResizeModule={moduleName:"HorizontalResize",version:o.VERSION,beans:[c.HorizontalResizeService],dependsOn:[t.DragModule]}},2165:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DragService=void 0;const n=i(9853),o=i(8731),r=i(8399),s=i(7274),a=i(1502),l=i(8667),c=i(3507),d=i(4422),u=i(3276);class h extends o.BeanStub{constructor(){super(...arguments),this.beanName="dragSvc",this.dragEndFunctions=[],this.dragSources=[]}destroy(){const{dragSources:e}=this;e.forEach(this.removeListener.bind(this)),e.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){const i=e.touchStartListener;t.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(e){const{dragSources:t}=this,i=t.find(t=>t.dragSource===e);i&&(this.removeListener(i),(0,a._removeFromArray)(t,i))}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:n,stopPropagationForTouch:o}=e;i.addEventListener("mousedown",t);let r=null;const s=this.gos.get("suppressTouch");n&&!s&&(r=t=>{(0,c._isFocusableFormField)(t.target)||(o&&t.stopPropagation(),this.onTouchStart(e,t))},i.addEventListener("touchstart",r,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:r,touchEnabled:!!n})}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const i=t.touches[0];this.touchLastTime=i,this.touchStart=i;const n=t=>this.onTouchUp(t,e.eElement),o=t.target,r=[{target:(0,s._getRootNode)(this.beans),type:"touchmove",listener:e=>{e.cancelable&&e.preventDefault()},options:{passive:!1}},{target:o,type:"touchmove",listener:t=>this.onTouchMove(t,e.eElement),options:{passive:!0}},{target:o,type:"touchend",listener:n,options:{passive:!0}},{target:o,type:"touchcancel",listener:n,options:{passive:!0}}];this.addTemporaryEvents(r),0===e.dragStartPixels&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){const i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t))return;if(i._alreadyProcessedByDragService)return;if(i._alreadyProcessedByDragService=!0,0!==t.button)return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const o=(0,s._getRootNode)(this.beans),r=[{target:o,type:"mousemove",listener:t=>this.onMouseMove(t,e.eElement)},{target:o,type:"mouseup",listener:t=>this.onMouseUp(t,e.eElement)},{target:o,type:"contextmenu",listener:e=>e.preventDefault()},{target:o,type:"keydown",listener:t=>{t.key===n.KeyCode.ESCAPE&&this.cancelDrag(e.eElement)}}];this.addTemporaryEvents(r),0===e.dragStartPixels&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(e=>{const{target:t,type:i,listener:n,options:o}=e;t.addEventListener(i,n,o)}),this.dragEndFunctions.push(()=>{e.forEach(e=>{const{target:t,type:i,listener:n,options:o}=e;t.removeEventListener(i,n,o)})})}isEventNearStartEvent(e,t){const{dragStartPixels:i}=this.currentDragParams,n=(0,d._exists)(i)?i:4;return(0,u._areEventsNear)(e,t,n)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventSvc.dispatchEvent({type:"dragStarted",target:i}),this.currentDragParams.onDragStart(t),!this.currentDragParams)return void(this.dragging=!1);this.currentDragParams.onDragging(t)}this.currentDragParams?.onDragging(e)}onTouchMove(e,t){const i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){if((0,l._isBrowserSafari)()){const e=(0,s._getDocument)(this.beans);e.getSelection()?.removeAllRanges()}this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const{gos:t}=this,i=t.get("enableCellTextSelection"),n="mousemove"===e.type;return i&&n&&e.cancelable&&(0,r._isEventFromThisGrid)(t,e)&&!(e=>{const t=e.target,i=t?.tagName.toLocaleLowerCase();return!!i?.match("^a$|textarea|input|select|button")})(e)}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),this.currentDragParams?.onDragCancel?.(),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null;const{dragEndFunctions:e}=this;e.forEach(e=>e()),e.length=0}}t.DragService=h},6843:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HorizontalResizeService=void 0;const n=i(8731);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:i}=this.beans;return i.addDragSource(t),()=>i.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&!0===t.shiftKey;e.onResizeStart(i)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}}t.HorizontalResizeService=o},1633:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowDragComp=void 0;const n=i(8731),o=i(9970),r=i(8020),s=i(2903);class a extends r.Component{constructor(e,t,i,n,o,r){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=n,this.dragStartPixels=o,this.suppressVisibilityChange=r,this.dragSource=null}isCustomGui(){return null!=this.customGui}postConstruct(){const{beans:e,rowNode:t,column:i,gos:n}=this;if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild((0,o._createIconNoSpan)("rowDrag",e,null)),this.addDragSource()),!this.suppressVisibilityChange){const e=n.get("rowDragManaged")?new d(this,t,i):new c(this,t,i);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){const e=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[e];const t=this.beans.selectionSvc?.getSelectedNodes()??[];return-1!==t.indexOf(e)?t:[e]}getDragItem(){const{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:e=>{e?.preventDefault()}})[0]);const i=this.getLocaleTextFunc();this.dragSource={type:s.DragSourceType.RowDrag,eElement:t,dragItemName:()=>{const e=this.getDragItem(),t=e.rowNodes?.length||1,n=this.getRowDragText(this.column);return n?n(e,t):1===t?this.cellValueFn():`${t} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}}t.RowDragComp=a;class l extends n.BeanStub{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let e=!0,i=!1;const{column:n,rowNode:o,parent:r}=this;n&&(e=n.isRowDrag(o)||r.isCustomGui(),i="function"==typeof n.getColDef().rowDrag),i?(r.setDisplayed(!0,t),r.setVisible(e,t)):(r.setDisplayed(e,t),r.setVisible(!0,t))}}}class c extends l{postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}}class d extends l{postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventSvc,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const{rowDragSvc:e,dragAndDrop:t,gos:i}=this.beans,n=e.rowDragFeature,o=n&&n.shouldPreventRowMove(),r=i.get("suppressRowDrag"),s=t.hasExternalDropZones(),a=o&&!s||r;this.setDisplayedOrVisible(a)}}},2254:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowDragFeature=void 0;const n=i(5628),o=i(8731),r=i(6257),s=i(8399),a=i(7274),l=i(1502),c=i(7764),d=i(2903);class u extends o.BeanStub{constructor(e){super(),this.eContainer=e}postConstruct(){const{rowModel:e,gos:t,ctrlsSvc:i}=this.beans;(0,a._isClientSideRowModel)(t,e)&&(this.clientSideRowModel=e),i.whenReady(this,e=>{const t=e.gridBodyCtrl;this.autoScrollService=new n.AutoScrollService({scrollContainer:t.eBodyViewport,scrollAxis:"y",getVerticalPosition:()=>t.scrollFeature.getVScrollPosition().top,setVerticalPosition:e=>t.scrollFeature.setVerticalScrollPosition(e),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===d.DragSourceType.RowDrag}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){const{rowGroupColsSvc:e,filterManager:t,sortSvc:i}=this.beans;if((e?.columns??[]).length)return!0;const n=t?.isAnyFilterPresent();if(n)return!0;const o=i?.isSortActive();return!!o}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const e=[...this.beans.selectionSvc?.getSelectedNodes()??[]].sort((e,t)=>null==e.rowIndex||null==t.rowIndex?0:this.getRowIndexNumber(e)-this.getRowIndexNumber(t));if(-1!==e.indexOf(t))return e}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(e=>{this.setRowNodeDragging(e,!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;const t=(0,s._getNormalisedMousePosition)(this.beans,e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const{dragAndDrop:i,gos:n}=this.beans,o=this.isFromThisGrid(e),r=n.get("rowDragManaged"),s=e.dragItem.rowNodes;r&&this.shouldPreventRowMove()||(n.get("suppressMoveWhenRowDragging")||!o?i.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.highlightRowAtPixel(s[0],t):this.moveRows(s,t))}getRowIndexNumber(e){const t=e.getRowIndexString();return parseInt((0,l._last)(t.split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel,i=t.getLastHighlightedRowNode(),n=i&&"Below"===i.highlighted,o=(0,s._getNormalisedMousePosition)(this.beans,e).y,r=e.dragItem.rowNodes;let l=n?1:0;if(this.isFromThisGrid(e))r.forEach(e=>{e.rowTop<o&&(l-=1)}),this.moveRows(r,o,l);else{const e=(0,a._getRowIdCallback)(this.gos);let i=t.getRowIndexAtPixel(o)+1;"Above"===t.getHighlightPosition(o)&&i--,t.updateRowData({add:r.filter(i=>!t.getRowNode(e?.({data:i.data,level:0,rowPinned:i.rowPinned})??i.data.id)).map(e=>e.data),addIndex:i})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,i=0){const n=this.beans.focusSvc,o=n.getFocusedCell(),s=o&&(0,r._getCellByPosition)(this.beans,o);this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(s?s.focusCell():n.clearFocusedCell())}addRowDropZone(e){if(!e.getContainer())return void(0,c._warn)(55);const t=this.beans.dragAndDrop;if(t.findExternalZone(e))return void(0,c._warn)(56);let i={getContainer:e.getContainer};e.fromGrid?i=e:(e.onDragEnter&&(i.onDragEnter=t=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",t))}),e.onDragLeave&&(i.onDragLeave=t=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",t))}),e.onDragging&&(i.onDragging=t=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",t))}),e.onDragStop&&(i.onDragStop=t=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",t))}),e.onDragCancel&&(i.onDragCancel=t=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",t))}));const n={isInterestedIn:e=>e===d.DragSourceType.RowDrag,getIconName:()=>"move",external:!0,...i};t.addDropTarget(n),this.addDestroyFunc(()=>t.removeDropTarget(n))}getRowDropZone(e){const t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),n=this.onDragLeave.bind(this),o=this.onDragging.bind(this),r=this.onDragStop.bind(this),s=this.onDragCancel.bind(this);let a;return a=e?{getContainer:t,onDragEnter:e.onDragEnter?t=>{i(t),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",t))}:i,onDragLeave:e.onDragLeave?t=>{n(t),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",t))}:n,onDragging:e.onDragging?t=>{o(t),e.onDragging(this.draggingToRowDragEvent("rowDragMove",t))}:o,onDragStop:e.onDragStop?t=>{r(t),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",t))}:r,onDragCancel:e.onDragCancel?t=>{s(t),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",t))}:s,fromGrid:!0}:{getContainer:t,onDragEnter:i,onDragLeave:n,onDragging:o,onDragStop:r,onDragCancel:s,fromGrid:!0},a}draggingToRowDragEvent(e,t){const i=this.beans,{pageBounds:n,rowModel:o,gos:r}=i,l=(0,s._getNormalisedMousePosition)(i,t).y;let c,d=-1;return l>n.getCurrentPageHeight()||(d=o.getRowIndexAtPixel(l),c=o.getRow(d)),(0,a._addGridCommonParams)(r,{type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:d,overNode:c,y:l,vDirection:t.vDirection})}dispatchGridEvent(e,t){const i=this.draggingToRowDragEvent(e,t);this.eventSvc.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e);const{dragAndDrop:t,gos:i}=this.beans;i.get("rowDragManaged")&&(i.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&t.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e);const{dragAndDrop:t,gos:i}=this.beans;i.get("rowDragManaged")&&(i.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&t.isDropZoneWithinThisGrid(e)&&this.clearRowHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(e=>{this.setRowNodeDragging(e,!1)})}setRowNodeDragging(e,t){e.dragging!==t&&(e.dragging=t,e.dispatchRowEvent("draggingChanged"))}}t.RowDragFeature=u},2895:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowDragService=void 0;const n=i(8731),o=i(7274),r=i(1633),s=i(2254);class a extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowDragSvc"}setupRowDrag(e,t){const i=t.createManagedBean(new s.RowDragFeature(e)),n=this.beans.dragAndDrop;n.addDropTarget(i),t.addDestroyFunc(()=>n.removeDropTarget(i)),this.rowDragFeature=i}createRowDragComp(e,t,i,n,o,s){return new r.RowDragComp(e,t,i,n,o,s)}createRowDragCompForRow(e,t){if((0,o._isCellSelectionEnabled)(this.gos))return;const i=this.getLocaleTextFunc();return this.createRowDragComp(()=>`1 ${i("rowDragRow","row")}`,e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,i,n,r,s){const a=this.gos;if(!a.get("rowDragManaged")||(0,o._isClientSideRowModel)(a)&&!a.get("pagination"))return this.createRowDragComp(i,e,t,n,r,s)}}t.RowDragService=a},6564:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.cellEditingCSS=void 0,t.cellEditingCSS=".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;width:100%}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}"},227:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxCellEditor=void 0;const n=i(5230),o=i(66),r=i(8020),s=i(3598);class a extends s.PopupComponent{constructor(){super('\n            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[o.AgCheckboxSelector]),this.eCheckbox=r.RefPlaceholder}init(e){this.params=e;const t=e.value??void 0,i=this.eCheckbox;i.setValue(t),i.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(i,{fieldValueChanged:e=>this.setAriaLabel(e.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.getLocaleTextFunc(),i=(0,n._getAriaCheckboxStateName)(t,e),o=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${o} (${i})`)}}t.CheckboxCellEditor=a},5314:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DateCellEditor=void 0;const n=i(9827),o=i(4422),r=i(3611),s=i(5336);class a{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[r.AgInputDateFieldSelector]}init(e,t){this.eInput=e,this.params=t;const{min:i,max:n,step:o}=t;null!=i&&e.setMin(i),null!=n&&e.setMax(n),null!=o&&e.setStep(o)}getValue(){const{eInput:e,params:t}=this,i=e.getDate();return(0,o._exists)(i)||(0,o._exists)(t.value)?i??null:t.value}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return(0,n._serialiseDate)(e,!1)}}class l extends s.SimpleCellEditor{constructor(){super(new a)}}t.DateCellEditor=l},2059:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DateStringCellEditor=void 0;const n=i(9827),o=i(4422),r=i(3611),s=i(5336);class a{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[r.AgInputDateFieldSelector]}init(e,t){this.eInput=e,this.params=t;const{min:i,max:n,step:o}=t;null!=i&&e.setMin(i),null!=n&&e.setMax(n),null!=o&&e.setStep(o)}getValue(){const{params:e,eInput:t}=this,i=this.formatDate(t.getDate());return(0,o._exists)(i)||(0,o._exists)(e.value)?e.parseValue(i??""):e.value}getStartValue(){return(0,n._serialiseDate)(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):(0,n._parseDateTimeFromString)(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):(0,n._serialiseDate)(e??null,!1)??void 0}}class l extends s.SimpleCellEditor{constructor(){super(new a(()=>this.beans.dataTypeSvc))}}t.DateStringCellEditor=l},4578:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.LargeTextCellEditor=void 0;const n=i(9853),o=i(4422),r=i(6209),s=i(8020),a=i(3598);class l extends a.PopupComponent{constructor(){super('<div class="ag-large-text">\n        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',[r.AgInputTextAreaSelector]),this.eTextArea=s.RefPlaceholder}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),null!=e.value&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===n.KeyCode.LEFT||t===n.KeyCode.UP||t===n.KeyCode.RIGHT||t===n.KeyCode.DOWN||e.shiftKey&&t===n.KeyCode.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue(),t=this.params;return(0,o._exists)(e)||(0,o._exists)(t.value)?t.parseValue(e):t.value}}t.LargeTextCellEditor=l},4371:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.NumberCellEditor=void 0;const n=i(9853),o=i(8667),r=i(4422),s=i(8792),a=i(5336);class l{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[s.AgInputNumberFieldSelector]}init(e,t){this.eInput=e,this.params=t;const{max:i,min:n,precision:o,step:r}=t;null!=i&&e.setMax(i),null!=n&&e.setMin(n),null!=o&&e.setPrecision(o),null!=r&&e.setStep(r);const s=e.getInputElement();t.preventStepping?e.addManagedElementListeners(s,{keydown:this.preventStepping}):t.showStepperButtons&&s.classList.add("ag-number-field-input-stepper")}preventStepping(e){e.key!==n.KeyCode.UP&&e.key!==n.KeyCode.DOWN||e.preventDefault()}getValue(){const{eInput:e,params:t}=this,i=e.getValue();if(!(0,r._exists)(i)&&!(0,r._exists)(t.value))return t.value;let n=t.parseValue(i);if(null==n)return n;if("string"==typeof n){if(""===n)return null;n=Number(n)}return isNaN(n)?null:n}getStartValue(){return this.params.value}setCaret(){(0,o._isBrowserSafari)()&&this.eInput.getInputElement().focus({preventScroll:!0})}}class c extends a.SimpleCellEditor{constructor(){super(new l)}}t.NumberCellEditor=c},5609:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PopupEditorWrapper=void 0;const n=i(7274),o=i(6466),r=i(3598);class s extends r.PopupComponent{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){(0,n._setDomData)(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params;this.addManagedElementListeners(e,{keydown:e=>{(0,o._isUserSuppressingKeyboardEvent)(this.gos,e,t.node,t.column,!0)||t.onKeyDown(e)}})}}t.PopupEditorWrapper=s},8774:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectCellEditor=void 0;const n=i(9853),o=i(4422),r=i(7764),s=i(159),a=i(8020),l=i(3598);class c extends l.PopupComponent{wireBeans(e){this.valueSvc=e.valueSvc}constructor(){super('<div class="ag-cell-edit-wrapper">\n                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>\n            </div>',[s.AgSelectSelector]),this.eSelect=a.RefPlaceholder,this.startedByEnter=!1}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueSvc:i,gos:s}=this,{values:a,value:l,eventKey:c}=e;if((0,o._missing)(a))return void(0,r._warn)(58);this.startedByEnter=null!=c&&c===n.KeyCode.ENTER;let d=!1;a.forEach(n=>{const o={value:n},r=i.formatValue(e.column,null,n),s=null!=r;o.text=s?r:n,t.addOption(o),d=d||l===n}),d?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:u,valueListMaxWidth:h,valueListMaxHeight:p}=e;null!=u&&t.setPickerGap(u),null!=p&&t.setPickerMaxHeight(p),null!=h&&t.setPickerMaxWidth(h),"fullRow"!==s.get("editType")&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}}t.SelectCellEditor=c},5336:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleCellEditor=void 0;const n=i(9853),o=i(8667),r=i(8020),s=i(3598);class a extends s.PopupComponent{constructor(e){super(`\n            <div class="ag-cell-edit-wrapper">\n                ${e.getTemplate()}\n            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=r.RefPlaceholder}init(e){this.params=e;const{cellStartedEdit:t,eventKey:i,suppressPreventDefault:o}=e,r=this.eInput;let s;this.cellEditorInput.init(r,e);let a=!0;t?(this.focusAfterAttached=!0,i===n.KeyCode.BACKSPACE||i===n.KeyCode.DELETE?s="":i&&1===i.length?o?a=!1:s=i:(s=this.cellEditorInput.getStartValue(),i!==n.KeyCode.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,s=this.cellEditorInput.getStartValue()),a&&null!=s&&r.setStartValue(s),this.addManagedElementListeners(r.getGui(),{keydown:e=>{const{key:t}=e;t!==n.KeyCode.PAGE_UP&&t!==n.KeyCode.PAGE_DOWN||e.preventDefault()}})}afterGuiAttached(){const e=this.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;(0,o._isBrowserSafari)()||t.getFocusableElement().focus();const i=t.getInputElement();this.highlightAllOnFocus?i.select():this.cellEditorInput.setCaret?.()}focusIn(){const e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}}t.SimpleCellEditor=a},5457:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TextCellEditor=void 0;const n=i(4422),o=i(5946),r=i(5336);class s{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[o.AgInputTextFieldSelector]}init(e,t){this.eInput=e,this.params=t;const i=t.maxLength;null!=i&&e.setMaxLength(i)}getValue(){const{eInput:e,params:t}=this,i=e.getValue();return(0,n._exists)(i)||(0,n._exists)(t.value)?t.parseValue(i):t.value}getStartValue(){const e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){const e=this.eInput,t=e.getValue(),i=(0,n._exists)(t)&&t.length||0;i&&e.getInputElement().setSelectionRange(i,i)}}class a extends r.SimpleCellEditor{constructor(){super(new s)}}t.TextCellEditor=a},89:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentRedoSize=t.getCurrentUndoSize=t.startEditingCell=t.stopEditing=t.getEditingCells=t.getCellEditorInstances=t.redoCellEditing=t.undoCellEditing=void 0;const n=i(1765),o=i(4126),r=i(6257),s=i(7274),a=i(7764);t.undoCellEditing=function(e){e.undoRedo?.undo("api")},t.redoCellEditing=function(e){e.undoRedo?.redo("api")},t.getCellEditorInstances=function(e,t={}){const i=[];return e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach(e=>{const t=e.comp?.getCellEditor();t&&i.push((0,o._unwrapUserComp)(t))}),i},t.getEditingCells=function(e){const t=[];return e.rowRenderer.getAllCellCtrls().forEach(e=>{if(e.editing){const{cellPosition:i}=e;t.push(i)}}),t},t.stopEditing=function(e,t=!1){e.editSvc?.stopAllEditing(t)},t.startEditingCell=function(e,t){const i=e.colModel.getCol(t.colKey);if(!i)return void(0,a._warn)(12,{colKey:t.colKey});const o={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:i};null==t.rowPinned&&(0,n.ensureIndexVisible)(e,t.rowIndex),(0,n.ensureColumnVisible)(e,t.colKey);const l=(0,r._getCellByPosition)(e,o);if(!l)return;const{focusSvc:c,gos:d,editSvc:u}=e,h=d.get("stopEditingWhenCellsLoseFocus")&&(()=>{const t=(0,s._getActiveDomElement)(e),i=l.eGui;return t!==i&&!!i?.contains(t)})();!h&&c.isCellFocused(o)||c.setFocusedCell({...o,forceBrowserFocus:h,preventScrollOnBrowserFocus:!0}),u?.startRowOrCellEdit(l,t.key)},t.getCurrentUndoSize=function(e){return e.undoRedo?.getCurrentUndoStackSize()??0},t.getCurrentRedoSize=function(e){return e.undoRedo?.getCurrentRedoStackSize()??0}},4652:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CustomEditorModule=t.LargeTextEditorModule=t.SelectEditorModule=t.CheckboxEditorModule=t.DateEditorModule=t.NumberEditorModule=t.TextEditorModule=t.UndoRedoEditModule=t.EditCoreModule=void 0;const n=i(7113),o=i(7205),r=i(3137),s=i(6564),a=i(227),l=i(5314),c=i(2059),d=i(4578),u=i(4371),h=i(8774),p=i(5457),g=i(89),f=i(1277),m=i(6359);t.EditCoreModule={moduleName:"EditCore",version:o.VERSION,beans:[f.EditService,m.RowEditService],apiFunctions:{getCellEditorInstances:g.getCellEditorInstances,getEditingCells:g.getEditingCells,stopEditing:g.stopEditing,startEditingCell:g.startEditingCell},dependsOn:[r.PopupModule],css:[s.cellEditingCSS]},t.UndoRedoEditModule={moduleName:"UndoRedoEdit",version:o.VERSION,beans:[n.UndoRedoService],apiFunctions:{undoCellEditing:g.undoCellEditing,redoCellEditing:g.redoCellEditing,getCurrentUndoSize:g.getCurrentUndoSize,getCurrentRedoSize:g.getCurrentRedoSize},dependsOn:[t.EditCoreModule]},t.TextEditorModule={moduleName:"TextEditor",version:o.VERSION,userComponents:{agCellEditor:p.TextCellEditor,agTextCellEditor:p.TextCellEditor},dependsOn:[t.EditCoreModule]},t.NumberEditorModule={moduleName:"NumberEditor",version:o.VERSION,userComponents:{agNumberCellEditor:{classImp:u.NumberCellEditor,params:{suppressPreventDefault:!0}}},dependsOn:[t.EditCoreModule]},t.DateEditorModule={moduleName:"DateEditor",version:o.VERSION,userComponents:{agDateCellEditor:l.DateCellEditor,agDateStringCellEditor:c.DateStringCellEditor},dependsOn:[t.EditCoreModule]},t.CheckboxEditorModule={moduleName:"CheckboxEditor",version:o.VERSION,userComponents:{agCheckboxCellEditor:a.CheckboxCellEditor},dependsOn:[t.EditCoreModule]},t.SelectEditorModule={moduleName:"SelectEditor",version:o.VERSION,userComponents:{agSelectCellEditor:h.SelectCellEditor},dependsOn:[t.EditCoreModule]},t.LargeTextEditorModule={moduleName:"LargeTextEditor",version:o.VERSION,userComponents:{agLargeTextCellEditor:d.LargeTextCellEditor},dependsOn:[t.EditCoreModule]},t.CustomEditorModule={moduleName:"CustomEditor",version:o.VERSION,dependsOn:[t.EditCoreModule]}},1277:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.EditService=void 0;const n=i(2036),o=i(9853),r=i(8731),s=i(8399),a=i(7274),l=i(8667),c=i(5609);class d extends r.BeanStub{constructor(){super(...arguments),this.beanName="editSvc"}startEditing(e,t=null,i=!1,o=null){if(!e.isCellEditable()||e.editing)return!0;if(!e.comp)return e.onCompAttachedFuncs.push(()=>{this.startEditing(e,t,i,o)}),!0;const r=this.createCellEditorParams(e,t,i),s=e.column.getColDef(),a=(0,n._getCellEditorDetails)(this.beans.userCompFactory,s,r),l=null!=a?.popupFromSelector?a.popupFromSelector:!!s.cellEditorPopup,c=null!=a?.popupPositionFromSelector?a.popupPositionFromSelector:s.cellEditorPopupPosition;return u(e,!0,a),e.comp.setEditDetails(a,l,c,this.gos.get("reactiveCustomComponents")),this.eventSvc.dispatchEvent(e.createEvent(o,"cellEditingStarted")),!a?.params?.suppressPreventDefault}stopEditing(e,t=!1){if(e.onEditorAttachedFuncs=[],!e.editing)return!1;const{comp:i,column:n,rowNode:o}=e,{newValue:r,newValueExists:s}=function(e,t){const i={newValueExists:!1};if(e)return i;const n=t.getCellEditor();if(!n)return i;if(n.isCancelAfterEnd&&n.isCancelAfterEnd())return i;return{newValue:n.getValue(),newValueExists:!0}}(t,i),a=this.beans.valueSvc.getValueForDisplay(n,o);let l=!1;return s&&(l=function(e,t,i,n,o){if(i===t)return!1;e.suppressRefreshCell=!0;const r=n.setDataValue(o,i,"edit");return e.suppressRefreshCell=!1,r}(e,a,r,o,n)),u(e,!1,void 0),i.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventSvc.dispatchEvent({...e.createEvent(null,"cellEditingStopped"),oldValue:a,newValue:r,valueChanged:l}),l}handleColDefChanged(e){const t=e.comp?.getCellEditor();if(t?.refresh){const{eventKey:i,cellStartedEdit:o}=e.editCompDetails.params,r=this.createCellEditorParams(e,i,o),s=e.column.getColDef(),a=(0,n._getCellEditorDetails)(this.beans.userCompFactory,s,r);t.refresh(a.params)}}setFocusOutOnEditor(e){if(!e.editing)return;const t=e.comp.getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){if(!e.editing)return;const t=e.comp,i=t.getCellEditor();i?.focusIn?i.focusIn():(e.focusCell(!0),e.onEditorAttachedFuncs.push(()=>t.getCellEditor()?.focusIn?.()))}stopEditingAndFocus(e,t=!1,i=!1){this.stopRowOrCellEdit(e),e.focusCell(!0),t||this.navigateAfterEdit(i,e.cellPosition)}createPopupEditorWrapper(e){return new c.PopupEditorWrapper(e)}stopAllEditing(e=!1){this.beans.rowRenderer.getAllRowCtrls().forEach(t=>this.stopRowEditing(t,e))}stopRowEditing(e,t=!1){if(e.stoppingRowEdit)return;const i=e.getAllCellCtrls(),n=e.editing;e.stoppingRowEdit=!0;let o=!1;for(const e of i){const i=e.stopEditing(t);n&&!t&&!o&&i&&(o=!0)}o&&this.eventSvc.dispatchEvent(e.createRowEvent("rowValueChanged")),n&&this.beans.rowEditSvc?.setEditing(e,!1),e.stoppingRowEdit=!1}addStopEditingWhenGridLosesFocus(e){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const t=t=>{const i=t.relatedTarget;if(null===(0,l._getTabIndex)(i))return void this.stopAllEditing();let n=e.some(e=>e.contains(i))&&(0,s._isElementInThisGrid)(this.gos,i);if(!n){const e=this.beans.popupSvc;n=!!e&&(e.getActivePopups().some(e=>e.contains(i))||e.isElementWithinCustomPopup(i))}n||this.stopAllEditing()};e.forEach(e=>this.addManagedElementListeners(e,{focusout:t}))}setInlineEditingCss(e){const t=e.editing||e.getAllCellCtrls().some(e=>e.editing);e.forEachGui(void 0,e=>{e.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),e.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}isCellEditable(e,t){if(t.group)if(this.gos.get("treeData")){if(!t.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1;return e.isColumnFunc(t,e.colDef.editable)}startRowOrCellEdit(e,t,i=null){return e.comp?"fullRow"===this.gos.get("editType")?this.beans.rowEditSvc?.startEditing(e.rowCtrl,t,e)??!0:this.startEditing(e,t,!0,i):(e.onCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(e,t,i)}),!0)}stopRowOrCellEdit(e,t=!1){"fullRow"===this.gos.get("editType")?this.stopRowEditing(e.rowCtrl,t):this.stopEditing(e,t)}createCellEditorParams(e,t,i){const{column:n,rowNode:o,cellPosition:{rowIndex:r}}=e,{valueSvc:s,gos:l}=this.beans;return(0,a._addGridCommonParams)(l,{value:s.getValueForDisplay(n,o),eventKey:t,column:n,colDef:n.getColDef(),rowIndex:r,node:o,data:o.data,cellStartedEdit:i,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.eGui,parseValue:t=>s.parseValue(n,o,t,e.value),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const i=e?o.KeyCode.UP:o.KeyCode.DOWN;this.beans.navigation?.navigateToNextCell(null,i,t,!1)}}}function u(e,t,i){e.editCompDetails=i,e.editing!==t&&(e.editing=t)}t.EditService=d},6359:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowEditService=void 0;const n=i(8731);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowEditSvc"}startEditing(e,t=null,i=null,n=null){if(e.editing)return!0;let o=!0,r=!1;const{editSvc:s}=this.beans;return e.getAllCellCtrls().forEach(e=>{const a=e===i;a?o=s?.startEditing(e,t,a,n)??!0:s?.startEditing(e,null,a,n),r||(r=e.editing)}),r&&this.setEditing(e,!0),o}setEditing(e,t){e.editing=t,e.forEachGui(void 0,e=>e.rowComp.addOrRemoveCssClass("ag-row-editing",t));const i=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventSvc.dispatchEvent(i)}}t.RowEditService=o},3355:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgColumn=t.isColumn=t.getNextColInstanceId=void 0;const n=i(8731),o=i(7274),r=i(5889),s=i(4422),a=i(6996),l=i(7766),c=i(7764),d={resizable:!0,sortable:!0};let u=0;function h(){return u++}t.getNextColInstanceId=h,t.isColumn=function(e){return e instanceof p};class p extends n.BeanStub{constructor(e,t,i,n){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=n,this.isColumn=!0,this.instanceId=h(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new r.LocalEventService,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=(0,l._escapeString)(i)}destroy(){super.destroy(),this.beans.rowSpanSvc?.deregister(this)}getInstanceId(){return this.instanceId}setState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:i,colFlex:n}}=this;t?.initCol(this);const o=e.hide;this.visible=void 0!==o?!o:!e.initialHide,i?.initCol(this),n?.initCol(this)}setColDef(e,t,i){const n=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),n&&(this.beans.rowSpanSvc?.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",i)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:i}}=this,n=e.get("suppressFieldDotNotation");this.fieldContainsDots=(0,s._exists)(t)&&t.indexOf(".")>=0&&!n,this.tooltipFieldContainsDots=(0,s._exists)(i)&&i.indexOf(".")>=0&&!n}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.beans.tooltipSvc?.initCol(this)}initRowSpan(){this.colDef.spanRows&&this.beans.rowSpanSvc?.register(this)}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=e.width,n=e.initialWidth;return t=null!=i?i:null!=n?n:200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){return this.beans.showRowGroupCols?.isRowGroupDisplayed(this,e)??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.colEventSvc);const i=this.frameworkEventListenerService?.wrap(t)??t;this.colEventSvc.addEventListener(e,i)}removeEventListener(e,t){const i=this.frameworkEventListenerService?.unwrap(t)??t;this.colEventSvc.removeEventListener(e,i)}createColumnFunctionCallbackParams(e){return(0,o._addGridCommonParams)(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){return this.beans.cellNavigation?.isSuppressNavigable(this,e)??!1}isCellEditable(e){return this.beans.editSvc?.isCellEditable(this,e)??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.beans.selectionSvc?.isCellCheckboxSelection(this,e)??!1}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?.suppressPaste??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??d[e]}isColumnFunc(e,t){return"boolean"==typeof t?t:"function"==typeof t&&t(this.createColumnFunctionCallbackParams(e))}createColumnEvent(e,t){return(0,o._addGridCommonParams)(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return"asc"===this.sort}isSortDescending(){return"desc"===this.sort}isSortNone(){return(0,s._missing)(this.sort)}isSorting(){return(0,s._exists)(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){return(0,c._warn)(261),!!this.beans.colHover?.isHovered(this)}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return"left"===this.pinned||"right"===this.pinned}isPinnedLeft(){return"left"===this.pinned}isPinnedRight(){return"right"===this.pinned}getPinned(){return this.pinned}setVisible(e,t){const i=!0===e;this.visible!==i&&(this.visible=i,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return(0,o._addGridCommonParams)(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if((0,s._missing)(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if((0,s._missing)(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t,i=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,null!=this.flex&&"flex"!==t&&"gridInitializing"!==t&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return!0===this.colDef.enablePivot}isAllowValue(){return!0===this.colDef.enableValue}isAllowRowGroup(){return!0===this.colDef.enableRowGroup}dispatchColEvent(e,t,i){const n=this.createColumnEvent(e,t);i&&(0,a._mergeDeep)(n,i),this.colEventSvc.dispatchEvent(n)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}}t.AgColumn=p},6908:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgColumnGroup=t.isColumnGroup=t.createUniqueColumnGroupId=void 0;const n=i(8731),o=i(1502),r=i(3355);function s(e,t){return e+"_"+t}function a(e){return e instanceof l}t.createUniqueColumnGroupId=s,t.isColumnGroup=a;class l extends n.BeanStub{constructor(e,t,i,n){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=i,this.pinned=n,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return s(this.groupId,this.partId)}isEmptyGroup(){return 0===this.displayedChildren.length}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!(!e||0===e.length)&&e.every(e=>e.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{a(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const e=(0,o._last)(this.displayedChildren).getLeft();this.setLeft(e)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren?.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{(0,r.isColumn)(t)?e.push(t):a(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{(0,r.isColumn)(t)?e.push(t):a(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return this.isPadding()&&e&&e.isPadding()?1+e.getPaddingLevel():0}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;null!=e&&e.isPadding();)e=e.getParent();if(!e||!e.getProvidedColumnGroup().isExpandable())return this.displayedChildren=this.children,void this.dispatchLocalEvent({type:"displayedChildrenChanged"});this.children.forEach(t=>{if(!a(t)||t.displayedChildren&&t.displayedChildren.length)switch(t.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(t);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(t);break;default:this.displayedChildren.push(t)}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}}t.AgColumnGroup=l},9409:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgProvidedColumnGroup=t.isProvidedColumnGroup=void 0;const n=i(8731),o=i(3355);function r(e){return e instanceof s}t.isProvidedColumnGroup=r;class s extends n.BeanStub{constructor(e,t,i,n){super(),this.colGroupDef=e,this.groupId=t,this.padding=i,this.level=n,this.isColumn=!1,this.expandable=!1,this.instanceId=(0,o.getNextColInstanceId)(),this.expandableListenerRemoveCallback=null,this.expanded=!!e?.openByDefault}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return!!this.children&&this.children.some(e=>e.isVisible())}isPadding(){return this.padding}setExpanded(e){this.expanded=void 0!==e&&e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{(0,o.isColumn)(t)?e.push(t):r(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.__addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.__removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const n=this.findChildrenRemovingPadding();for(let o=0,r=n.length;o<r;o++){const r=n[o];if(!r.isVisible())continue;const s=r.getColumnGroupShow();"open"===s?(e=!0,i=!0):"closed"===s?(t=!0,i=!0):(e=!0,t=!0)}const o=e&&t&&i;this.expandable!==o&&(this.expandable=o,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{i.forEach(i=>{r(i)&&i.isPadding()?t(i.children):e.push(i)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}}t.AgProvidedColumnGroup=s},5449:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultColumnTypes=void 0,t.DefaultColumnTypes={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}}},6257:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._getCellByPosition=t._getRowNode=t._getLastRow=t._getFirstRow=t._isSameRow=t._isRowBefore=t._areCellsEqual=t._createCellId=void 0;const n=i(4422);t._createCellId=function(e){const{rowIndex:t,rowPinned:i,column:n}=e;return`${t}.${null==i?"null":i}.${n.getId()}`},t._areCellsEqual=function(e,t){const i=e.column===t.column,n=e.rowPinned===t.rowPinned,o=e.rowIndex===t.rowIndex;return i&&n&&o},t._isRowBefore=function(e,t){switch(e.rowPinned){case"top":if("top"!==t.rowPinned)return!0;break;case"bottom":if("bottom"!==t.rowPinned)return!1;break;default:if((0,n._exists)(t.rowPinned))return"top"!==t.rowPinned}return e.rowIndex<t.rowIndex},t._isSameRow=function(e,t){return!e&&!t||!(e&&!t||!e&&t)&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned},t._getFirstRow=function(e){let t,i=0;const{pinnedRowModel:n,rowModel:o,pageBounds:r}=e;return n?.getPinnedTopRowCount()?t="top":o.getRowCount()?(t=null,i=r.getFirstRow()):n?.getPinnedBottomRowCount()&&(t="bottom"),void 0===t?null:{rowIndex:i,rowPinned:t}},t._getLastRow=function(e){let t,i=null;const{pinnedRowModel:n,pageBounds:o}=e,r=n?.getPinnedBottomRowCount(),s=n?.getPinnedTopRowCount();return r?(i="bottom",t=r-1):e.rowModel.getRowCount()?(i=null,t=o.getLastRow()):s&&(i="top",t=s-1),void 0===t?null:{rowIndex:t,rowPinned:i}},t._getRowNode=function(e,t){switch(t.rowPinned){case"top":return e.pinnedRowModel?.getPinnedTopRow(t.rowIndex);case"bottom":return e.pinnedRowModel?.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}},t._getCellByPosition=function(e,t){const i=e.spannedRowRenderer?.getCellByPosition(t);if(i)return i;const n=e.rowRenderer.getRowByPosition(t);return n?n.getCellCtrl(t.column):null}},3373:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowNode=t.ROW_ID_PREFIX_BOTTOM_PINNED=t.ROW_ID_PREFIX_TOP_PINNED=t.ROW_ID_PREFIX_ROW_GROUP=void 0;const n=i(7274),o=i(5889),r=i(7764);t.ROW_ID_PREFIX_ROW_GROUP="row-group-",t.ROW_ID_PREFIX_TOP_PINNED="t-",t.ROW_ID_PREFIX_BOTTOM_PINNED="b-";let s=0;t.RowNode=class{constructor(e){this.master=!1,this.detail=void 0,this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=s++,this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.__selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){const{valueCache:i,selectionSvc:n,rowSpanSvc:o}=this.beans,r=this.data;this.data=e,i?.onDataChanged(),this.updateDataOnDetailNode(),n?.updateRowSelectable(this),this.resetQuickFilterAggregateText();const s=this.createDataChangedEvent(e,r,t);this.__localEventService?.dispatchEvent(s),o?.onRowDataUpdated(this)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,t,i){return{type:"dataChanged",node:this,oldData:t,newData:e,update:i}}getRowIndexString(){return null==this.rowIndex?((0,r._error)(13),null):"top"===this.rowPinned?t.ROW_ID_PREFIX_TOP_PINNED+this.rowIndex:"bottom"===this.rowPinned?t.ROW_ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){const{selectionSvc:i}=this.beans,n=i?.createDaemonNode?.(this),o=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),i&&(i.updateRowSelectable(this),i.syncInRowNode(this,n));const r=this.createDataChangedEvent(e,o,!1);this.__localEventService?.dispatchEvent(r)}setId(e){const i=(0,n._getRowIdCallback)(this.beans.gos);if(i)if(this.data){const e=this.parent?.getRoute()??[];this.id=i({data:this.data,parentKeys:e.length>0?e:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(t.ROW_ID_PREFIX_ROW_GROUP)&&(0,r._error)(14,{groupPrefix:t.ROW_ID_PREFIX_ROW_GROUP})}else this.id=void 0;else this.id=e}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.dispatchRowEvent("topChanged"),this.setDisplayed(null!==e))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,i){this.beans.expansionSvc?.setExpanded(this,e,t,i)}setDataValue(e,t,i){const{colModel:n,valueSvc:o,gos:r,selectionSvc:s,rowSpanSvc:a}=this.beans,l="string"!=typeof e?e:n.getCol(e)??n.getColDefCol(e);if(!l)return!1;const c=o.getValueForDisplay(l,this);if(r.get("readOnlyEdit")){const{beans:{eventSvc:e},data:n,rowIndex:o,rowPinned:r}=this;return e.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:o,rowPinned:r,column:l,colDef:l.colDef,data:n,node:this,oldValue:c,newValue:t,value:t,source:i}),!1}const d=o.setValue(this,l,t,i);return this.dispatchCellChangedEvent(l,t,c),s?.updateRowSelectable(this),a?.onRowDataUpdated(this),d}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;const{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,i){const n={type:"cellChanged",node:this,column:e,newValue:t,oldValue:i};this.__localEventService?.dispatchEvent(n)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.beans.expansionSvc?.isExpandable(this)??!1}isSelected(){return this.footer?this.sibling.isSelected():this.__selected}depthFirstSearch(e){this.childrenAfterGroup?.forEach(t=>t.depthFirstSearch(e)),e(this)}dispatchRowEvent(e){this.__localEventService?.dispatchEvent({type:e,node:this})}setSelected(e,t=!1,i="api"){this.beans.selectionSvc?.setNodesSelected({nodes:[this],newValue:e,clearSelection:t,source:i})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){this.__localEventService||(this.__localEventService=new o.LocalEventService),this.__localEventService.addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){this.beans.validation?.checkRowEvents(e),this.__localEventService||(this.__localEventService=new o.LocalEventService),this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.__localEventService);const i=this.frameworkEventListenerService?.wrap(t)??t;this.__localEventService.addEventListener(e,i)}removeEventListener(e,t){const i=this.frameworkEventListenerService?.unwrap(t)??t;this.removeLocalListener(e,i)}removeLocalListener(e,t){this.__localEventService?.removeEventListener(e,t),this.__localEventService?.noRegisteredListenersExist()&&(this.__localEventService=null)}isFullWidthCell(){if((0,r._warn)(61),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this})}getRoute(){if(-1===this.level)return[];if(null==this.key)return;const e=[];let t=this;for(;t&&null!=t.key;)e.push(t.key),t=t.parent;return e.reverse()}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.dispatchRowEvent("firstChildChanged"))}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.dispatchRowEvent("displayedChanged"))}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}}},9888:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._createGlobalRowEvent=void 0;const n=i(7274);t._createGlobalRowEvent=function(e,t,i){return(0,n._addGridCommonParams)(t,{type:i,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}},9024:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Environment=void 0;const n=i(8731),o=i(9621),r=i(8951),s=i(2525),a=i(3507),l=i(7764),c={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},d={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},u={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},h={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0};let p=0;class g extends n.BeanStub{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.paramsClass="ag-theme-params-"+ ++p,this.globalCSS=[]}wireBeans(e){const{eGridDiv:t,gridOptions:i}=e;this.eGridDiv=t,this.eStyleContainer=i.themeStyleContainer??(t.getRootNode()===document?document.head:t),this.cssLayer=i.themeCssLayer}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(c),this.getSizeEl(d),this.getSizeEl(u),this.getSizeEl(h),this.refreshRowBorderWidthVariable(),this.addDestroyFunc(()=>(0,r._unregisterGridUsingThemingAPI)(this)),this.mutationObserver=new MutationObserver(()=>{this.fireGridStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}getDefaultRowHeight(){return this.getCSSVariablePixelValue(c)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(d)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(u)}getRowBorderWidth(){return this.getCSSVariablePixelValue(h)}applyThemeClasses(e){const{gridTheme:t}=this;let i="";if(t)i=`${this.paramsClass} ${t._getCssClass()}`;else{this.mutationObserver.disconnect();let e=this.eGridDiv;for(;e;){let t=!1;for(const n of Array.from(e.classList))n.startsWith("ag-theme-")&&(t=!0,i=i?`${i} ${n}`:n);t&&this.mutationObserver.observe(e,{attributes:!0,attributeFilter:["class"]}),e=e.parentElement}}for(const t of Array.from(e.classList))t.startsWith("ag-theme-")&&e.classList.remove(t);if(i){const t=e.className;e.className=t+(t?" ":"")+i}}refreshRowHeightVariable(){const{eGridDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),i=this.gos.get("rowHeight");if(null==i||isNaN(i)||!isFinite(i))return null!==t&&e.style.setProperty("--ag-line-height",null),-1;const n=`${i}px`;return t!=n?(e.style.setProperty("--ag-line-height",n),i):""!=t?parseFloat(t):-1}addGlobalCSS(e,t){this.gridTheme?(0,r._injectGlobalCSS)(e,this.eStyleContainer,t,this.cssLayer,0):this.globalCSS.push([e,t])}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(null!=t)return t;const i=this.measureSizeEl(e);return"detached"===i||"no-styles"===i?e.defaultValue:(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(null==t.offsetParent)return"detached";const i=t.offsetWidth;return i===f?"no-styles":(this.sizesMeasured=!0,i)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=document.createElement("div"),e.className="ag-measurement-container",this.eGridDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const i=this.getMeasurementContainer();t=document.createElement("div");const{border:n}=e;n?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border",`var(${e.cssName}, solid ${f}px`)):t.style.width=`var(${e.cssName}, ${f}px)`,i.appendChild(t),this.sizeEls.set(e,t);let o=this.measureSizeEl(e);"no-styles"===o&&(0,l._warn)(9,{variable:e});const r=(0,a._observeResize)(this.beans,t,()=>{const t=this.measureSizeEl(e);"detached"!==t&&"no-styles"!==t&&(this.lastKnownValues.set(e,t),t!==o&&(o=t,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>r()),t}fireGridStylesChangedEvent(e){"rowBorderWidthChanged"===e&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:"gridStylesChanged",[e]:!0})}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(h);this.eGridDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}handleThemeGridOptionChange(){const{gos:e,eGridDiv:t,globalCSS:i,gridTheme:n}=this,a=e.get("theme");let c;if("legacy"===a)c=void 0;else{const e=a??s.themeQuartz;e instanceof o.ThemeImpl?c=e:(0,l._error)(240,{theme:e})}if(c!==n){if(c){(0,r._registerGridUsingThemingAPI)(this),(0,r._injectCoreAndModuleCSS)(this.eStyleContainer,this.cssLayer);for(const[e,t]of i)(0,r._injectGlobalCSS)(e,this.eStyleContainer,t,this.cssLayer,0);i.length=0}this.gridTheme=c,c?._startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer});let n=this.eParamsStyle;n||(n=this.eParamsStyle=document.createElement("style"),t.appendChild(n)),r.IS_SSR||(n.textContent=c?._getPerGridCss(this.paramsClass)||""),this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged")}c&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&(a?(0,l._error)(106):(0,l._error)(239))}}t.Environment=g;const f=15538},8778:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.EventService=void 0;const n=i(8731),o=i(7274),r=i(5889);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="eventSvc",this.globalEventService=new r.LocalEventService}postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}addEventListener(e,t,i){this.globalEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.globalEventService.removeEventListener(e,t,i)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent((0,o._addGridCommonParams)(this.gos,e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce((0,o._addGridCommonParams)(this.gos,e))}}t.EventService=s},3080:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._ALL_EVENTS=t._INTERNAL_EVENTS=t._PUBLIC_EVENTS=void 0,t._PUBLIC_EVENTS=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],t._INTERNAL_EVENTS=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged","beforeRefreshModel"],t._ALL_EVENTS=[...t._PUBLIC_EVENTS,...t._INTERNAL_EVENTS]},7968:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ALWAYS_SYNC_GLOBAL_EVENTS=void 0,t.ALWAYS_SYNC_GLOBAL_EVENTS=new Set(["gridPreDestroyed","fillStart","pasteStart"])},7331:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCreator=void 0;const n=i(8731);class o extends n.BeanStub{getFileName(e){const t=this.getDefaultFileExtension();return null!=e&&e.length||(e=this.getDefaultFileName()),-1===e.indexOf(".")?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}}t.BaseCreator=o},8376:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseGridSerializingSession=void 0;const n=i(7274);t.BaseGridSerializingSession=class{constructor(e){this.groupColumns=[];const{colModel:t,rowGroupColsSvc:i,colNames:n,valueSvc:o,gos:r,processCellCallback:s,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.colModel=t,this.rowGroupColsSvc=i,this.colNames=n,this.valueSvc=o,this.gos=r,this.processCellCallback=s,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){this.groupColumns=e.filter(e=>!!e.getColDef().showRowGroup)}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,i,n,o){const r=this.gos.get("groupHideOpenParents")&&!o.footer||!this.shouldRenderGroupSummaryCell(o,e,t)?this.valueSvc.getValue(e,o):this.createValueForGroupNode(e,o);return this.processCell({accumulatedRowIndex:i,rowNode:o,column:e,value:r,processCellCallback:this.processCellCallback,type:n})}shouldRenderGroupSummaryCell(e,t,i){if(!e.group||this.gos.get("treeData"))return!1;if(-1!==this.groupColumns.indexOf(t)){if(void 0!==e.groupData?.[t.getId()])return!0;if((0,n._isServerSideRowModel)(this.gos)&&e.group)return!0;if(e.footer&&-1===e.level){const e=t.getColDef();return null==e||!0===e.showRowGroup||e.showRowGroup===this.rowGroupColsSvc?.columns[0].getId()}}const o=(0,n._isGroupUseEntireRow)(this.gos,this.colModel.isPivotMode());return 0===i&&o}getHeaderName(e,t){return e?e((0,n._addGridCommonParams)(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback((0,n._addGridCommonParams)(this.gos,{column:e,node:t}));const i=this.gos.get("treeData"),o=t=>{if(i)return t.key;const n=t.groupData?.[e.getId()];return n&&t.rowGroupColumn&&!1!==t.rowGroupColumn.getColDef().useValueFormatterForExport?this.valueSvc.formatValue(t.rowGroupColumn,t,n)??n:n},r=t.footer,s=[o(t)];if(!(0,n._isGroupMultiAutoColumn)(this.gos))for(;t.parent;)t=t.parent,s.push(o(t));const a=s.reverse().join(" -> ");return r?`Total ${a}`:a}processCell(e){const{accumulatedRowIndex:t,rowNode:i,column:o,value:r,processCellCallback:s,type:a}=e;return s?{value:s((0,n._addGridCommonParams)(this.gos,{accumulatedRowIndex:t,column:o,node:i,value:r,type:a,parseValue:e=>this.valueSvc.parseValue(o,i,e,this.valueSvc.getValue(o,i)),formatValue:e=>this.valueSvc.formatValue(o,i,e)??e}))??""}:!1!==o.getColDef().useValueFormatterForExport?{value:r??"",valueFormatted:this.valueSvc.formatValue(o,i,r)}:{value:r??""}}}},3885:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._downloadFile=void 0;const n=i(7764);t._downloadFile=function(e,t){const i=document.defaultView||window;if(!i)return void(0,n._warn)(52);const o=document.createElement("a"),r=i.URL.createObjectURL(t);o.setAttribute("href",r),o.setAttribute("download",e),o.style.display="none",document.body.appendChild(o),o.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(o),i.setTimeout(()=>{i.URL.revokeObjectURL(r)},0)}},2728:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SharedExportModule=void 0;const n=i(7205),o=i(826);t.SharedExportModule={moduleName:"SharedExport",version:n.VERSION,beans:[o.GridSerializer]}},826:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridSerializer=void 0;const n=i(3146),o=i(6034),r=i(8731),s=i(6908),a=i(7274),l=i(1502);class c extends r.BeanStub{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e,t={}){const{allColumns:i,columnKeys:n,skipRowGroups:o,exportRowNumbers:r}=t,s=this.getColumnsToExport({allColumns:i,skipRowGroups:o,columnKeys:n,exportRowNumbers:r});return[this.prepareSession(s),this.prependContent(t),this.exportColumnGroups(t,s),this.exportHeaders(t,s),this.processPinnedTopRows(t,s),this.processRows(t,s),this.processPinnedBottomRows(t,s),this.appendContent(t)].reduce((e,t)=>t(e),e).parse()}processRow(e,t,i,n){const o=t.shouldRowBeSkipped||(()=>!1),r=null!=t.rowPositions||!!t.onlySelected,s=this.gos.get("groupHideOpenParents")&&!r,l=this.colModel.isPivotMode()?n.leafGroup:!n.group,c=!!n.footer,d=1===n.allChildrenCount&&1===n.childrenAfterGroup?.length&&(0,a._canSkipShowingRowGroup)(this.gos,n);if(!l&&!c&&(t.skipRowGroups||d||s)||t.onlySelected&&!n.isSelected()||t.skipPinnedTop&&"top"===n.rowPinned||t.skipPinnedBottom&&"bottom"===n.rowPinned)return;if(-1===n.level&&!l&&!c)return;if(o((0,a._addGridCommonParams)(this.gos,{node:n})))return;const u=e.onNewBodyRow(n);if(i.forEach((e,t)=>{u.onColumn(e,t,n)}),t.getCustomContentBelowRow){const i=t.getCustomContentBelowRow((0,a._addGridCommonParams)(this.gos,{node:n}));i&&e.addCustomContent(i)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const n=new o.GroupInstanceIdCreator,{colGroupSvc:r}=this.beans,s=r?r.createColumnGroups({columns:t,idCreator:n,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(s,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const e=i.onNewHeaderRow();t.forEach((t,i)=>{e.onColumn(t,i,void 0)})}return i}}processPinnedTopRows(e,t){return i=>{const n=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(e=>"top"===e.rowPinned).sort((e,t)=>e.rowIndex-t.rowIndex).map(e=>this.pinnedRowModel?.getPinnedTopRow(e.rowIndex)).forEach(n):this.pinnedRowModel?.forEachPinnedRow("top",n),i}}processRows(e,t){return i=>{const n=this.rowModel,o=(0,a._isClientSideRowModel)(this.gos,n),r=(0,a._isServerSideRowModel)(this.gos,n),s=!o&&e.onlySelected,l=this.processRow.bind(this,i,e,t),{exportedRows:c="filteredAndSorted"}=e;if(e.rowPositions)return e.rowPositions.filter(e=>null==e.rowPinned).sort((e,t)=>e.rowIndex-t.rowIndex).map(e=>n.getRow(e.rowIndex)).forEach(l),i;if(this.colModel.isPivotMode())return o?n.forEachPivotNode(l,!0,"filteredAndSorted"===c):r?n.forEachNodeAfterFilterAndSort(l,!0):n.forEachNode(l),i;if(e.onlySelectedAllPages||s){const e=this.beans.selectionSvc?.getSelectedNodes()??[];this.replicateSortedOrder(e),e.forEach(l)}else"all"===c?n.forEachNode(l):o||r?n.forEachNodeAfterFilterAndSort(l,!0):n.forEachNode(l);return i}}replicateSortedOrder(e){const{sortSvc:t,rowNodeSorter:i}=this.beans;if(!t||!i)return;const n=t.getSortOptions(),o=(e,t)=>null!=e.rowIndex&&null!=t.rowIndex?e.rowIndex-t.rowIndex:e.level===t.level?e.parent?.id===t.parent?.id?i.compareRowNodes(n,{rowNode:e,currentPos:e.rowIndex??-1},{rowNode:t,currentPos:t.rowIndex??-1}):o(e.parent,t.parent):e.level>t.level?o(e.parent,t):o(e,t.parent);e.sort(o)}processPinnedBottomRows(e,t){return i=>{const n=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(e=>"bottom"===e.rowPinned).sort((e,t)=>e.rowIndex-t.rowIndex).map(e=>this.pinnedRowModel?.getPinnedBottomRow(e.rowIndex)).forEach(n):this.pinnedRowModel?.forEachPinnedRow("bottom",n),i}}getColumnsToExport(e){const{allColumns:t=!1,skipRowGroups:i=!1,exportRowNumbers:o=!1,columnKeys:r}=e,{colModel:s,gos:a,visibleCols:l}=this,c=s.isPivotMode(),d=e=>!(0,n.isColumnSelectionCol)(e)&&(!(0,n.isRowNumberCol)(e)||o);if(r&&r.length)return s.getColsForKeys(r).filter(d);const u=a.get("treeData");let h=[];return h=t&&!c?s.getCols():l.allCols,h=h.filter(e=>d(e)&&(!(i&&!u)||!(0,n.isColumnGroupAutoCol)(e))),h}recursivelyAddHeaderGroups(e,t,i){const n=[];e.forEach(e=>{const t=e;t.getChildren&&t.getChildren().forEach(e=>n.push(e))}),e.length>0&&(0,s.isColumnGroup)(e[0])&&this.doAddHeaderHeader(t,e,i),n&&n.length>0&&this.recursivelyAddHeaderGroups(n,t,i)}doAddHeaderHeader(e,t,i){const n=e.onNewHeaderGroupingRow();let o=0;t.forEach(e=>{const t=e;let r;r=i?i((0,a._addGridCommonParams)(this.gos,{columnGroup:t})):this.beans.colNames.getDisplayNameForColumnGroup(t,"header");const s=t.getLeafColumns().reduce((e,t,i,n)=>{let o=(0,l._last)(e);return"open"===t.getColumnGroupShow()?o&&null==o[1]||(o=[i],e.push(o)):o&&null==o[1]&&(o[1]=i-1),i===n.length-1&&o&&null==o[1]&&(o[1]=i),e},[]);n.onColumn(t,r||"",o++,t.getLeafColumns().length-1,s)})}}t.GridSerializer=c},6331:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.columnFiltersCSS=void 0,t.columnFiltersCSS=".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-set-floating-filter-input [disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:1px solid var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}"},4527:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.showColumnFilter=t.setColumnFilterModel=t.getColumnFilterModel=t.getFilterModel=t.setFilterModel=t.destroyFilter=t.getColumnFilterInstance=t.isColumnFilterPresent=void 0;const n=i(7764);t.isColumnFilterPresent=function(e){const t=e.filterManager;return!!t?.isColumnFilterPresent()||!!t?.isAggregateFilterPresent()},t.getColumnFilterInstance=function(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)},t.destroyFilter=function(e,t){const i=e.colModel.getColDefCol(t);if(i)return e.filterManager?.destroyFilter(i,"api")},t.setFilterModel=function(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))},t.getFilterModel=function(e){return e.filterManager?.getFilterModel()??{}},t.getColumnFilterModel=function(e,t){return e.filterManager?.getColumnFilterModel(t)??null},t.setColumnFilterModel=function(e,t,i){return e.filterManager?.setColumnFilterModel(t,i)??Promise.resolve()},t.showColumnFilter=function(e,t){const i=e.colModel.getCol(t);i?e.menuSvc?.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"}):(0,n._error)(12,{colKey:t})}},219:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnFilterService=void 0;const n=i(4126),o=i(2036),r=i(8731),s=i(7274),a=i(4422),l=i(7990),c=i(7764),d=i(9990),u={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},h=["january","february","march","april","may","june","july","august","september","october","november","december"];function p(e,t){return null==e?-1:null==t?1:parseFloat(e)-parseFloat(t)}class g extends r.BeanStub{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),beforeRefreshModel:({params:e})=>{(e.rowDataUpdated||e.changedProps?.has("treeData"))&&this.onNewRowsLoaded("rowDataUpdated")},dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel={...this.gos.get("initialState")?.filter?.filterModel??{}}}setFilterModel(e,t="api"){const{colModel:i,dataTypeSvc:n,filterManager:o}=this.beans;if(n?.isPendingInference)return void this.filterModelUpdateQueue.push({model:e,source:t});const r=[],s=this.getFilterModel(!0);if(e){const t=new Set(Object.keys(e));this.allColumnFilters.forEach((i,n)=>{const o=e[n];r.push(f(i.filterPromise,o)),t.delete(n)}),t.forEach(t=>{const n=i.getColDefCol(t)||i.getCol(t);if(!n)return void(0,c._warn)(62,{colId:t});if(!n.isFilterAllowed())return void(0,c._warn)(63,{colId:t});const o=this.getOrCreateFilterWrapper(n);o?r.push(f(o.filterPromise,e[t])):(0,c._warn)(64,{colId:t})})}else this.allColumnFilters.forEach(e=>{r.push(f(e.filterPromise,null))});l.AgPromise.all(r).then(()=>{const e=this.getFilterModel(!0),i=[];this.allColumnFilters.forEach((t,n)=>{const o=s?s[n]:null,r=e?e[n]:null;(0,a._jsonEquals)(o,r)||i.push(t.column)}),i.length>0&&o?.onFilterChanged({columns:i,source:t})})}getFilterModel(e){const t={},{allColumnFilters:i,initialFilterModel:n,beans:{colModel:o}}=this;if(i.forEach((e,i)=>{const n=this.getModelFromFilterWrapper(e);(0,a._exists)(n)&&(t[i]=n)}),!e)for(const e of Object.keys(n)){const r=n[e];(0,a._exists)(r)&&!i.has(e)&&o.getCol(e)?.isFilterAllowed()&&(t[e]=r)}return t}getModelFromFilterWrapper(e){const{filter:t}=e;return t?"function"!=typeof t.getModel?((0,c._warn)(66),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){const{allColumnFilters:e}=this;return!!e.size&&(e.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0)}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){const{colModel:e,gos:t}=this.beans,i=!!(0,s._getGroupAggFiltering)(t),n=[],o=[];return this.forEachColumnFilter((t,r)=>{const s=(e=>!!e&&(e.isFilterActive?e.isFilterActive():((0,c._warn)(67),!1)))(t);s&&((t=>{if(!t.isPrimary())return!0;const n=!e.isPivotActive();return!(!t.isValueActive()||!n)&&(!!e.isPivotMode()||i)})(r.column)?n.push(t):o.push(t))}).then(()=>{this.activeAggregateFilters=n,this.activeColumnFilters=o})}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter((i,n)=>this.setColFilterActive(n.column,i.isFilterActive(),e,t))}forEachColumnFilter(e){const t=[];return this.allColumnFilters.forEach(i=>{const n=i.filterPromise;n&&t.push(n.then(t=>e(t,i)))}),l.AgPromise.all(t)}doColumnFiltersPass(e,t,i){const{data:n,aggData:o}=e,r=i?this.activeAggregateFilters:this.activeColumnFilters,s=i?o:n;for(let i=0;i<r.length;i++){const n=r[i];if(null!=n&&n!==t)if("function"==typeof n.doesFilterPass){if(!n.doesFilterPass({node:e,data:s}))return!1}else(0,c._error)(91)}return!0}callOnFilterChangedOutsideRenderCycle(e){const{rowRenderer:t,filterManager:i}=this.beans,n=()=>{this.isAlive()&&i?.onFilterChanged(e)};t.isRefreshInProgress()?setTimeout(n,0):n()}updateBeforeFilterChanged(e={}){const{filterInstance:t,additionalEventAttributes:i}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",i).then(()=>{this.allColumnFilters.forEach(e=>{e.filterPromise&&e.filterPromise.then(e=>{e&&e!==t&&e.onAnyFilterChanged&&e.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!this.gos.get("allowShowChangeAfterFilter")&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(e=>{e.onNewRowsLoaded?.()}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createGetValue(e){const{filterValueSvc:t,colModel:i}=this.beans;return(n,o)=>{const r=o?i.getCol(o):e;return r?t.getValue(r,n):void 0}}isFilterActive(e){const{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():null!=this.getModelFromInitialState(e)}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;const{gos:i,dataTypeSvc:n}=this.beans;if((0,s._isSetFilterByDefault)(i))t="agSetColumnFilter";else{const i=n?.getBaseDataType(e);t="number"===i?"agNumberColumnFilter":"date"===i||"dateString"===i?"agDateColumnFilter":"agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;const{gos:i,dataTypeSvc:n}=this.beans;if((0,s._isSetFilterByDefault)(i))t="agSetColumnFloatingFilter";else{const i=n?.getBaseDataType(e);t="number"===i?"agNumberColumnFloatingFilter":"date"===i||"dateString"===i?"agDateColumnFloatingFilter":"agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){const i=this.getDefaultFilter(e),n=e.getColDef();let r;const s={...this.createFilterParams(e,n),filterModifiedCallback:()=>this.filterModifiedCallbackFactory(r,e)(),filterChangedCallback:t=>this.filterChangedCallbackFactory(r,e)(t),doesRowPassOtherFilter:e=>this.beans.filterManager?.doesRowPassOtherFilters(r,e)??!0},a=(0,o._getFilterDetails)(this.beans.userCompFactory,n,s,i);return a?{filterPromise:()=>{const e=a.newAgStackInstance();return e.then(e=>{r=e,t&&(t.filter=e??void 0)}),e},compDetails:a}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return(0,s._addGridCommonParams)(this.gos,{column:e,colDef:t,rowModel:this.beans.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){const t={column:e,filterPromise:null,compDetails:null},{filterPromise:i,compDetails:n}=this.createFilterInstance(e,t);return t.filterPromise=i?.()??null,t.compDetails=n,t}onColumnsChanged(){const e=[],{colModel:t,filterManager:i}=this.beans;this.allColumnFilters.forEach((i,n)=>{let o;o=i.column.isPrimary()?t.getColDefCol(n):t.getCol(n),o&&o===i.column||(e.push(i.column),this.disposeFilterWrapper(i,"columnChanged"),this.disposeColumnListener(n))});const n=e.every(m);e.length>0&&!n?i?.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){this.beans.autoColSvc?.getColumns()?.forEach(e=>{m(e)&&this.getOrCreateFilterWrapper(e)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const{filter:t}=this.allColumnFilters.get(e.getColId())??{};return!t||"function"!=typeof t?.isFilterAllowed||t.isFilterAllowed()}getFloatingFilterCompDetails(e,t){const i=t=>{const i=this.getOrCreateFilterWrapper(e)?.filterPromise;null!=i&&i.then(e=>{t((0,n._unwrapUserComp)(e))})},r=e.getColDef(),a={...this.createFilterParams(e,r),filterChangedCallback:()=>i(t=>this.filterChangedCallbackFactory(t,e)())},{userCompFactory:l,frameworkOverrides:c}=this.beans,u=(0,o._mergeFilterParamsWithApplicationProvidedParams)(l,r,a);let h=(0,d._getDefaultFloatingFilterType)(c,r,()=>this.getDefaultFloatingFilter(e));null==h&&(h="agReadOnlyFloatingFilter");const p=(0,s._addGridCommonParams)(this.gos,{column:e,filterParams:u,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:i,showParentFilter:t});return(0,o._getFloatingFilterCompDetails)(l,r,p,h)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){const i=e.getColId(),n=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialFilterModel[i],n&&this.disposeFilterWrapper(n,t).then(t=>{t&&this.isAlive()&&this.beans.filterManager?.onFilterChanged({columns:[e],source:"api"})})}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){return e.filterPromise?.then(i=>{const n=!!i?.isFilterActive();return this.destroyBean(i),this.setColFilterActive(e.column,!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:e.column}),n})??l.AgPromise.resolve(!1)}filterModifiedCallbackFactory(e,t){return()=>{this.eventSvc.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return i=>{const n={filter:e,additionalEventAttributes:i,columns:[t],source:i?.source??"columnFilter"};this.callOnFilterChangedOutsideRenderCycle(n)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const i=t.column,{compDetails:n}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,n))return void this.destroyFilter(i,"paramsUpdated");const o=i.getColDef().filterParams;t.filterPromise?t.filterPromise.then(e=>{!1===(!e?.refresh||e.refresh({...this.createFilterParams(i,i.getColDef()),filterModifiedCallback:this.filterModifiedCallbackFactory(e,i),filterChangedCallback:this.filterChangedCallbackFactory(e,i),doesRowPassOtherFilter:t=>this.beans.filterManager?.doesRowPassOtherFilters(e,t)??!0,...o}))&&this.destroyFilter(i,"paramsUpdated")}):this.destroyFilter(i,"paramsUpdated")}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:n}=t;return!(i===n||i?.render&&n?.render&&i.render===n.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(e=>e.getColDef().floatingFilter)}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstanceImpl(e).then(e=>{t((0,n._unwrapUserComp)(e))})})}getFilterInstanceImpl(e){const t=this.beans.colModel.getColDefCol(e);if(!t)return l.AgPromise.resolve(void 0);const i=this.getOrCreateFilterWrapper(t)?.filterPromise;return i??l.AgPromise.resolve(null)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:i})=>{this.setColumnFilterModel(e,t).then(()=>i())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){const{colModel:i,dataTypeSvc:n}=this.beans;if(n?.isPendingInference){let i=()=>{};const n=new Promise(e=>{i=e});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:i}),n}const o=i.getColDefCol(e),r=o?this.getOrCreateFilterWrapper(o):null;return r?(s=f(r.filterPromise,t),new Promise(e=>{s.then(t=>e(t))})):Promise.resolve();var s}getFilterWrapper(e){const t=this.beans.colModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}setColDefPropertiesForDataType(e,t,i){const n=(0,s._isSetFilterByDefault)(this.gos),o=this.getLocaleTextFunc(),r=t=>{const{filterParams:i}=e;e.filterParams="object"==typeof i?{...i,...t}:t};switch(t.baseDataType){case"number":n&&r({comparator:p});break;case"boolean":r(n?{valueFormatter:e=>(0,a._exists)(e.value)?o(String(e.value),e.value?"True":"False"):o("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>!1===t,numberOfInputs:0}]});break;case"date":r(n?{valueFormatter:e=>{const t=i(e);return(0,a._exists)(t)?t:o("blanks","(Blanks)")},treeList:!0,treeListFormatter:(e,t)=>{if("NaN"===e)return o("invalidDate","Invalid Date");if(1===t&&null!=e){const t=h[Number(e)-1];return o(t,u[t])}return e??o("blanks","(Blanks)")}}:{isValidDate:v});break;case"dateString":{const e=t.dateParser;r(n?{valueFormatter:e=>{const t=i(e);return(0,a._exists)(t)?t:o("blanks","(Blanks)")},treeList:!0,treeListPathGetter:t=>{const i=e(t??void 0);return i?[String(i.getFullYear()),String(i.getMonth()+1),String(i.getDate())]:null},treeListFormatter:(e,t)=>{if(1===t&&null!=e){const t=h[Number(e)-1];return o(t,u[t])}return e??o("blanks","(Blanks)")}}:{comparator:(t,i)=>{const n=e(i);return null==i||n<t?-1:n>t?1:0},isValidDate:t=>"string"==typeof t&&v(e(t))});break}case"object":n?r({valueFormatter:e=>{const t=i(e);return(0,a._exists)(t)?t:o("blanks","(Blanks)")}}):e.filterValueGetter=e=>i({column:e.column,node:e.node,value:this.beans.valueSvc.getValue(e.column,e.node)})}}setColFilterActive(e,t,i,n){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",i)),e.dispatchColEvent("filterChanged",i,n)}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}}function f(e,t){return e?new l.AgPromise(i=>{e.then(e=>{"function"!=typeof e.setModel&&((0,c._warn)(65),i()),(e.setModel(t)||l.AgPromise.resolve()).then(()=>i())})}):l.AgPromise.resolve()}function m(e){return"agGroupColumnFilter"===e.getColDef().filter}function v(e){return e instanceof Date&&!isNaN(e.getTime())}t.ColumnFilterService=g},9002:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.onFilterChanged=t.isAnyFilterPresent=void 0,t.isAnyFilterPresent=function(e){return!!e.filterManager?.isAnyFilterPresent()},t.onFilterChanged=function(e,t="api"){e.filterManager?.onFilterChanged({source:t})}},5741:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FILTER_LOCALE_TEXT=void 0,t.FILTER_LOCALE_TEXT={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"}},8681:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FilterManager=void 0;const n=i(8731),o=i(7274),r=i(6996),s=i(7990),a=i(7764);class l extends n.BeanStub{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:e})=>this.onAdvFilterEnabledChanged(e),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});const{gos:i}=this;this.alwaysPassFilter=i.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=i.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return"function"==typeof e&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return"function"==typeof t&&t(e)}setFilterModel(e,t="api"){this.isAdvFilterEnabled()?this.warnAdvFilters():this.colFilter?.setFilterModel(e,t)}getFilterModel(){return this.colFilter?.getFilterModel()??{}}isColumnFilterPresent(){return!!this.colFilter?.isColumnFilterPresent()}isAggregateFilterPresent(){return!!this.colFilter?.isAggregateFilterPresent()}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){e?this.colFilter?.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilter?.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){return!!this.advancedFilter?.isEnabled()}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){(0,o._getGroupAggFiltering)(this.gos)&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:i,columns:n=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):s.AgPromise.resolve()).then(()=>{const e={source:t,type:"filterChanged",columns:n};i&&(0,r._mergeDeep)(e,i),this.eventSvc.dispatchEvent(e),this.colFilter?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.colFilter?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilter?.isFilterPresent()}updateAggFiltering(){this.aggFiltering=!!(0,o._getGroupAggFiltering)(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){const{rowNode:t}=e;return!(!this.alwaysPassFilter?.(t)&&(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.isAggregateFilterPresent()&&!this.colFilter.doAggregateFiltersPass(t,e.filterInstanceToSkip)))}doesRowPassFilter(e){const{rowNode:t}=e;return!(!this.alwaysPassFilter?.(t)&&(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.externalFilterPresent&&!this.doesExternalFilterPass(t)||this.isColumnFilterPresent()&&!this.colFilter.doColumnFiltersPass(t,e.filterInstanceToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(t)))}isFilterActive(e){return!!this.colFilter?.isFilterActive(e)}getOrCreateFilterWrapper(e){return this.colFilter?.getOrCreateFilterWrapper(e)??null}getDefaultFloatingFilter(e){return this.colFilter.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.colFilter.createFilterParams(e,t)}isFilterAllowed(e){return!this.isAdvFilterEnabled()&&!!this.colFilter?.isFilterAllowed(e)}getFloatingFilterCompDetails(e,t){return this.colFilter?.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){return this.colFilter?.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){this.colFilter?.destroyFilter(e,t)}areFilterCompsDifferent(e,t){return!!this.colFilter?.areFilterCompsDifferent(e,t)}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e,t="api"){this.isAdvFilterEnabled()&&(this.beans.dataTypeSvc?.isPendingInference?this.advFilterModelUpdateQueue.push(e):(this.advancedFilter.setModel(e??null),this.onFilterChanged({source:t})))}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return!this.isAdvFilterEnabled()&&!!this.colFilter?.hasFloatingFilters()}getColumnFilterInstance(e){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):this.colFilter?.getColumnFilterInstance(e)??Promise.resolve(void 0)}warnAdvFilters(){(0,a._warn)(68)}setupAdvFilterHeaderComp(e){this.advancedFilter?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advFilterModelUpdateQueue.forEach(e=>this.setAdvFilterModel(e)),this.advFilterModelUpdateQueue=[]}getColumnFilterModel(e){return this.colFilter?.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):this.colFilter?.setColumnFilterModel(e,t)??Promise.resolve()}setColDefPropertiesForDataType(e,t,i){this.colFilter?.setColDefPropertiesForDataType(e,t,i)}}t.FilterManager=l},9665:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FilterMenuFactory=void 0;const n=i(9853),o=i(8731),r=i(7274),s=i(8994),a=i(5230),l=i(3507),c=i(2331),d=i(7764),u=i(1854);class h extends o.BeanStub{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){this.hidePopup?.()}showMenuAfterMouseEvent(e,t,i,n){this.showPopup(e,n=>{this.popupSvc?.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:n})},i,t.target,(0,r._isLegacyMenuEnabled)(this.gos),n)}showMenuAfterButtonClick(e,t,i,n){let o=-1,s="left";const a=(0,r._isLegacyMenuEnabled)(this.gos);!a&&this.gos.get("enableRtl")&&(o=1,s="right");const l=a?void 0:4*o,c=a?void 0:4;this.showPopup(e,n=>{this.popupSvc?.positionPopupByComponent({type:i,eventSource:t,ePopup:n,nudgeX:l,nudgeY:c,alignSide:s,keepWithinBounds:!0,position:"under",column:e})},i,t,a,n)}showPopup(e,t,i,n,o,h){const p=e?this.createBean(new u.FilterWrapperComp(e,"COLUMN_MENU")):void 0;if(this.activeMenu=p,!p?.hasFilter()||!e)return void(0,d._error)(57);const g=document.createElement("div");let f;(0,a._setAriaRole)(g,"presentation"),g.classList.add("ag-menu"),o||g.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(g,{keydown:e=>this.trapFocusWithin(e,g)}),g.appendChild(p?.getGui());const m=(0,r._isColumnMenuAnchoringEnabled)(this.gos)?n??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,v=this.getLocaleTextFunc(),b=o&&"columnFilter"!==i?v("ariaLabelColumnMenu","Column Menu"):v("ariaLabelColumnFilter","Column Filter"),y=this.popupSvc?.addPopup({modal:!0,eChild:g,closeOnEsc:!0,closedCallback:t=>{(0,s._setColMenuVisible)(e,!1,"contextMenu");const o=t instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),o&&n&&(0,l._isVisible)(n)){const e=(0,c._findTabbableParent)(n);e?.focus({preventScroll:!0})}p?.afterGuiDetached(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e),h?.()},positionCallback:()=>t(g),anchorToElement:m,ariaLabel:b});y&&(this.hidePopup=f=y.hideFunc),p.afterInit().then(()=>{t(g),p.afterGuiAttached({container:i,hidePopup:f})}),(0,s._setColMenuVisible)(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==n.KeyCode.TAB||e.defaultPrevented||(0,c._findNextFocusableElement)(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),(0,c._focusInto)(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:i??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}}t.FilterMenuFactory=h},5432:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalFilterModule=t.QuickFilterModule=t.DateFilterModule=t.NumberFilterModule=t.TextFilterModule=t.CustomFilterModule=t.ColumnFilterModule=t.FilterValueModule=t.FilterCoreModule=t.ClientSideRowModelFilterModule=void 0;const n=i(8287),o=i(3868),r=i(3472),s=i(7205),a=i(3137),l=i(6331),c=i(4527),d=i(219),u=i(9002),h=i(8681),p=i(9665),g=i(3508),f=i(6657),m=i(3725),v=i(3091),b=i(5459),y=i(8988),w=i(4789),C=i(2811),_=i(8305),S=i(5381),x=i(1238);t.ClientSideRowModelFilterModule={moduleName:"ClientSideRowModelFilter",version:s.VERSION,rowModels:["clientSide"],beans:[n.FilterStage]},t.FilterCoreModule={moduleName:"FilterCore",version:s.VERSION,beans:[h.FilterManager],apiFunctions:{isAnyFilterPresent:u.isAnyFilterPresent,onFilterChanged:u.onFilterChanged},css:[l.columnFiltersCSS],dependsOn:[t.ClientSideRowModelFilterModule]},t.FilterValueModule={moduleName:"FilterValue",version:s.VERSION,beans:[g.FilterValueService]},t.ColumnFilterModule={moduleName:"ColumnFilter",version:s.VERSION,beans:[d.ColumnFilterService,p.FilterMenuFactory],dynamicBeans:{headerFilterCellCtrl:o.HeaderFilterCellCtrl},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:c.isColumnFilterPresent,getColumnFilterInstance:c.getColumnFilterInstance,destroyFilter:c.destroyFilter,setFilterModel:c.setFilterModel,getFilterModel:c.getFilterModel,getColumnFilterModel:c.getColumnFilterModel,setColumnFilterModel:c.setColumnFilterModel,showColumnFilter:c.showColumnFilter},dependsOn:[t.FilterCoreModule,a.PopupModule,t.FilterValueModule,r.SharedMenuModule]},t.CustomFilterModule={moduleName:"CustomFilter",version:s.VERSION,userComponents:{agReadOnlyFloatingFilter:f.ReadOnlyFloatingFilter},dependsOn:[t.ColumnFilterModule]},t.TextFilterModule={moduleName:"TextFilter",version:s.VERSION,dependsOn:[t.ColumnFilterModule],userComponents:{agTextColumnFilter:C.TextFilter,agTextColumnFloatingFilter:_.TextFloatingFilter}},t.NumberFilterModule={moduleName:"NumberFilter",version:s.VERSION,dependsOn:[t.ColumnFilterModule],userComponents:{agNumberColumnFilter:y.NumberFilter,agNumberColumnFloatingFilter:w.NumberFloatingFilter}},t.DateFilterModule={moduleName:"DateFilter",version:s.VERSION,dependsOn:[t.ColumnFilterModule],userComponents:{agDateColumnFilter:m.DateFilter,agDateInput:b.DefaultDateComponent,agDateColumnFloatingFilter:v.DateFloatingFilter}};const A={moduleName:"QuickFilterCore",version:s.VERSION,rowModels:["clientSide"],beans:[x.QuickFilterService],dependsOn:[t.FilterCoreModule,t.FilterValueModule]};t.QuickFilterModule={moduleName:"QuickFilter",version:s.VERSION,apiFunctions:{isQuickFilterPresent:S.isQuickFilterPresent,getQuickFilter:S.getQuickFilter,resetQuickFilter:S.resetQuickFilter},dependsOn:[A]},t.ExternalFilterModule={moduleName:"ExternalFilter",version:s.VERSION,dependsOn:[t.FilterCoreModule]}},3508:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FilterValueService=void 0;const n=i(8731),o=i(7274);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t){if(!t)return;const i=e.getColDef(),{filterValueGetter:n}=i;return n?this.executeFilterValueGetter(n,t.data,e,t,i):this.beans.valueSvc.getValue(e,t)}executeFilterValueGetter(e,t,i,n,r){const{expressionSvc:s,valueSvc:a}=this.beans,l=(0,o._addGridCommonParams)(this.gos,{data:t,node:n,column:i,colDef:r,getValue:a.getValueCallback.bind(a,n)});return"function"==typeof e?e(l):s?.evaluate(e,l)}}t.FilterValueService=r},1854:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FilterWrapperComp=void 0;const n=i(3507),o=i(4422),r=i(7990),s=i(7764),a=i(8020);class l extends a.Component{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){return this.filterWrapper?.filterPromise??null}afterInit(){return this.filterWrapper?.filterPromise?.then(()=>{})??r.AgPromise.resolve()}afterGuiAttached(e){this.filterWrapper?.filterPromise?.then(t=>{t?.afterGuiAttached?.(e)})}afterGuiDetached(){this.filterWrapper?.filterPromise?.then(e=>{e?.afterGuiDetached?.()})}createFilter(e){const{column:t,source:i}=this;this.filterWrapper=this.beans.filterManager?.getOrCreateFilterWrapper(t)??null,this.filterWrapper?.filterPromise&&this.filterWrapper.filterPromise.then(n=>{const r=n.getGui();(0,o._exists)(r)||(0,s._warn)(69,{guiFromFilter:r}),this.appendChild(r),e&&this.eventSvc.dispatchEvent({type:"filterOpened",column:t,source:i,eGui:this.getGui()})})}onFilterDestroyed(e){"api"!==e.source&&"paramsUpdated"!==e.source||e.column.getId()!==this.column.getId()||!this.beans.colModel.getColDefCol(this.column)||((0,n._clearElement)(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}}t.FilterWrapperComp=l},9990:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._getDefaultFloatingFilterType=void 0;const n=i(2036);t._getDefaultFloatingFilterType=function(e,t,i){if(null==t)return null;let o=null;const{compName:r,jsComp:s,fwComp:a}=(0,n._getFilterCompKeys)(e,t);return r?o={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[r]:null==s&&null==a&&!0===t.filter&&(o=i()),o}},7287:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FloatingFilterTextInputService=void 0;const n=i(8731),o=i(5946),r=i(8020);class s extends n.BeanStub{constructor(e){super(),this.params=e,this.eInput=r.RefPlaceholder,this.onValueChanged=()=>{}}setupGui(e){this.eInput=this.createManagedBean(new o.AgInputTextField(this.params?.config));const t=this.eInput.getGui();e.appendChild(t);const i=e=>this.onValueChanged(e);this.addManagedListeners(t,{input:i,keydown:i})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams({ariaLabel:e,autoComplete:t}){const{eInput:i}=this;i.setInputAriaLabel(e),void 0!==t&&i.setAutoComplete(t)}}t.FloatingFilterTextInputService=s},361:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.isUseApplyButton=t.getDebounceMs=void 0;const n=i(7764);function o(e){return(e.buttons?.indexOf("apply")??-1)>=0}t.getDebounceMs=function(e,t){const{debounceMs:i}=e;return o(e)?(null!=i&&(0,n._warn)(71),0):i??t},t.isUseApplyButton=o},6657:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ReadOnlyFloatingFilter=void 0;const n=i(5946),o=i(8020);class r extends o.Component{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>\n            </div>',[n.AgInputTextFieldSelector]),this.eFloatingFilterText=o.RefPlaceholder}init(e){this.params=e;const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){null!=e?this.params.parentFilterInstance(t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}}):this.eFloatingFilterText.setValue("")}refresh(e){this.init(e)}}t.ReadOnlyFloatingFilter=r},3141:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleFloatingFilter=void 0;const n=i(8020),o=i(4824);class r extends n.Component{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e)return void(this.lastType=this.optionsFactory.defaultOption);let t;t=e.operator?e.conditions[0]:e,this.lastType=t.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const t=e;return this.isTypeEditable(t.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){const i=new o.OptionsFactory;this.optionsFactory=i,i.init(e.filterParams,this.getDefaultOptions());const n=i.defaultOption;t||(this.lastType=n),this.readOnly=!!e.filterParams.readOnly;const r=this.isTypeEditable(n);this.setEditable(r)}refresh(e){this.setSimpleParams(e)}hasSingleInput(e){const t=this.optionsFactory.getCustomOption(e)?.numberOfInputs;return null==t||1==t}isTypeEditable(e){return!!e&&!this.readOnly&&this.hasSingleInput(e)&&["inRange","empty","blank","notBlank"].indexOf(e)<0}getAriaLabel(e){return`${this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0)} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}}t.SimpleFloatingFilter=r},8922:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TextInputFloatingFilter=void 0;const n=i(9853),o=i(3507),r=i(2043),s=i(8020),a=i(2470),l=i(361),c=i(3141);class d extends c.SimpleFloatingFilter{constructor(){super(...arguments),this.eFloatingFilterInputContainer=s.RefPlaceholder,this.defaultDebounceMs=500}postConstruct(){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>\n        ')}onParentModelChanged(e,t){t?.afterFloatingFilter||t?.afterDataChange||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;const t=e.browserAutoComplete??!1,{inputSvc:i,defaultDebounceMs:n,readOnly:o}=this;if(i.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=(0,l.isUseApplyButton)(e.filterParams),!o){const t=(0,l.getDebounceMs)(e.filterParams,n),o=(0,r._debounce)(this,this.syncUpWithParentFilter.bind(this),t);i.setValueChangedListener(o)}}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const{inputSvc:t}=this,i=t.getValue();(0,o._clearElement)(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(i,!0)}syncUpWithParentFilter(e){const t=e.key===n.KeyCode.ENTER;if(this.applyActive&&!t)return;const{inputSvc:i,params:o}=this;let r=i.getValue();o.filterParams.trimInput&&(r=(0,a.trimInputForFilter)(r),i.setValue(r,!0)),o.parentFilterInstance(e=>{e?.onFloatingFilterChanged(this.lastType||null,r||null)})}setEditable(e){this.inputSvc.setEditable(e)}}t.TextInputFloatingFilter=d},8713:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DateCompWrapper=void 0;const n=i(2036),o=i(3507);t.DateCompWrapper=class{constructor(e,t,i,o,r){this.alive=!0,this.context=e,this.eParent=o;const s=(0,n._getDateCompDetails)(t,i);s&&s.newAgStackInstance().then(t=>{if(!this.alive)return void e.destroyBean(t);if(this.dateComp=t,!t)return;o.appendChild(t.getGui()),t?.afterGuiAttached?.();const{tempValue:i,disabled:n}=this;i&&t.setDate(i),null!=n&&t.setDisabled?.(n),r?.(this)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){const t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){const t=this.dateComp;t?t.setDisabled?.(e):this.disabled=e}setDisplayed(e){(0,o._setDisplayed)(this.eParent,e)}setInputPlaceholder(e){this.dateComp?.setInputPlaceholder?.(e)}setInputAriaLabel(e){this.dateComp?.setInputAriaLabel?.(e)}afterGuiAttached(e){this.dateComp?.afterGuiAttached?.(e)}updateParams(e){this.dateComp?.refresh?.(e)}}},3725:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DateFilter=void 0;const n=i(7274),o=i(9827),r=i(7764),s=i(5562),a=i(7535),l=i(8713),c=i(4200),d=i(4392),u=1/0;class h extends s.ScalarFilter{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=1e3,this.maxValidYear=u,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:i,type:n}=e||{};return[t&&(0,o._parseDateTimeFromString)(t)||null,i&&(0,o._parseDateTimeFromString)(i)||null].slice(0,this.getNumberOfInputs(n))}comparator(){return this.dateFilterParams.comparator??p}isValid(e){const t=this.dateFilterParams.isValidDate;return!t||t(e)}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(t,i)=>{if(null!=e[t]){if(!isNaN(e[t]))return null==e[t]?i:Number(e[t]);(0,r._warn)(82,{param:t})}return i};this.minValidYear=t("minValidYear",1e3),this.maxValidYear=t("maxValidYear",u),this.minValidYear>this.maxValidYear&&(0,r._warn)(83),this.minValidDate=e.minValidDate?e.minValidDate instanceof Date?e.minValidDate:(0,o._parseDateTimeFromString)(e.minValidDate):null,this.maxValidDate=e.maxValidDate?e.maxValidDate instanceof Date?e.maxValidDate:(0,o._parseDateTimeFromString)(e.maxValidDate):null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&(0,r._warn)(84),this.filterModelFormatter=new d.DateFilterModelFormatter(this.dateFilterParams,this.getLocaleTextFunc.bind(this),this.optionsFactory)}createDateCompWrapper(e){const{userCompFactory:t,context:i,gos:o}=this.beans,r=new l.DateCompWrapper(i,t,(0,n._addGridCommonParams)(o,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams,location:"filter"}),e);return this.addDestroyFunc(()=>r.destroy()),r}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return c.DEFAULT_DATE_FILTER_OPTIONS}createValueElement(){const e=(0,n._getDocument)(this.beans).createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,i,o){const r=(0,n._getDocument)(this.beans).createElement("div");r.classList.add(`ag-filter-${o}`),r.classList.add(`ag-filter-date-${o}`),t.push(r),e.appendChild(r),i.push(this.createDateCompWrapper(r))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),(0,a.removeItems)(this.eConditionPanelsFrom,e,t),(0,a.removeItems)(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){(0,a.removeItems)(e,t,i).forEach(e=>e.destroy())}isValidDateValue(e){if(null===e)return!1;const{minValidDate:t,maxValidDate:i,minValidYear:n,maxValidYear:o}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<n)return!1;if(i){if(e>i)return!1}else if(e.getUTCFullYear()>o)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((i,n,o,r)=>{o!==e||!t||n>=r||(t=t&&this.isValidDateValue(i.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),i={},n=this.getValues(e);return n.length>0&&(i.dateFrom=(0,o._serialiseDate)(n[0])),n.length>1&&(i.dateTo=(0,o._serialiseDate)(n[1])),{dateFrom:null,dateTo:null,filterType:this.filterType,type:t,...i}}resetPlaceholder(){const e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(e=>{e.setInputPlaceholder(t),e.setInputAriaLabel(i)})}getInputs(e){const{dateConditionFromComps:t,dateConditionToComps:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(e,i,n,o)=>{i<o&&t.push(e.getDate())}),t}translate(e){return"lessThan"===e?super.translate("before"):"greaterThan"===e?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}}function p(e,t){return t<e?-1:t>e?1:0}t.DateFilter=h},4200:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_DATE_FILTER_OPTIONS=void 0,t.DEFAULT_DATE_FILTER_OPTIONS=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"]},4392:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DateFilterModelFormatter=void 0;const n=i(9827),o=i(2786);class r extends o.SimpleFilterModelFormatter{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){const{type:i}=e,{numberOfInputs:o}=t||{},r="inRange"==i||2===o,s=(0,n._parseDateTimeFromString)(e.dateFrom),a=(0,n._parseDateTimeFromString)(e.dateTo),l=this.dateFilterParams.inRangeFloatingFilterDateFormat;return r?`${null!==s?(0,n._dateToFormattedString)(s,l):"null"}-${null!==a?(0,n._dateToFormattedString)(a,l):"null"}`:null!=s?(0,n._dateToFormattedString)(s,l):`${i}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}}t.DateFilterModelFormatter=r},3091:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DateFloatingFilter=void 0;const n=i(7274),o=i(9827),r=i(3507),s=i(2043),a=i(5946),l=i(8020),c=i(361),d=i(3141),u=i(8713),h=i(4200),p=i(4392);class g extends d.SimpleFloatingFilter{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>\n                <div data-ref="eDateWrapper" style="display: flex;"></div>\n            </div>',[a.AgInputTextFieldSelector]),this.eReadOnlyText=l.RefPlaceholder,this.eDateWrapper=l.RefPlaceholder}getDefaultOptions(){return h.DEFAULT_DATE_FILTER_OPTIONS}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new p.DateFilterModelFormatter(this.filterParams,this.getLocaleTextFunc.bind(this),this.optionsFactory);const t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.dateComp.updateParams(this.getDateComponentParams()),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){const t=e?(0,o._parseDateTimeFromString)(e.dateFrom):null;this.dateComp.setDate(t),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){(0,r._setDisplayed)(this.eDateWrapper,e),(0,r._setDisplayed)(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){t?.afterFloatingFilter||t?.afterDataChange||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=this.dateComp.getDate(),t=(0,o._serialiseDate)(e);this.params.parentFilterInstance(e=>{if(e){const i=(0,o._parseDateTimeFromString)(t);e.onFloatingFilterChanged(this.lastType||null,i)}})}getDateComponentParams(){const{filterParams:e,column:t}=this.params,i=(0,c.getDebounceMs)(e,this.defaultDebounceMs);return(0,n._addGridCommonParams)(this.gos,{onDateChanged:(0,s._debounce)(this,this.onDateChanged.bind(this),i),filterParams:t.getColDef().filterParams,location:"floatingFilter"})}createDateComponent(){const{beans:{context:e,userCompFactory:t},eDateWrapper:i}=this;this.dateComp=new u.DateCompWrapper(e,t,this.getDateComponentParams(),i,e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}}t.DateFloatingFilter=g},5459:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultDateComponent=void 0;const n=i(7274),o=i(8667),r=i(9827),s=i(7764),a=i(5946),l=i(8020);class c extends l.Component{constructor(){super('\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>\n            </div>',[a.AgInputTextFieldSelector]),this.eDateInput=l.RefPlaceholder,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this)})}handleInput(e,t){if(t.target===(0,n._getActiveDomElement)(this.beans)&&!this.eDateInput.isDisabled())return this.isApply?(this.applyOnFocusOut=!e,void(e&&this.params.onDateChanged())):void(e||this.params.onDateChanged())}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}setParams(e){const t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&(0,o._isBrowserSafari)(),t.type=i?"date":"text";const{minValidYear:n,maxValidYear:a,minValidDate:l,maxValidDate:c,buttons:d}=e.filterParams||{};if(l&&n&&(0,s._warn)(85),c&&a&&(0,s._warn)(86),l&&c){const[e,t]=[l,c].map(e=>e instanceof Date?e:(0,r._parseDateTimeFromString)(e));e&&t&&e.getTime()>t.getTime()&&(0,s._warn)(87)}l?l instanceof Date?t.min=(0,r._dateToFormattedString)(l):t.min=l:n&&(t.min=`${n}-01-01`),c?c instanceof Date?t.max=(0,r._dateToFormattedString)(c):t.max=c:a&&(t.max=`${a}-12-31`),this.isApply="floatingFilter"===e.location&&!!d?.includes("apply")}refresh(e){this.params=e,this.setParams(e)}getDate(){return(0,r._parseDateTimeFromString)(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue((0,r._serialiseDate)(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){e&&e.suppressFocus||this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){return e?.filterParams?.browserDatePicker??!0}}t.DefaultDateComponent=c},8988:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.NumberFilter=void 0;const n=i(5230),o=i(4422),r=i(8792),s=i(5946),a=i(5562),l=i(846),c=i(1862),d=i(730);class u extends a.ScalarFilter{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}refresh(e){return this.numberFilterParams.allowedCharPattern===e.allowedCharPattern&&super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:n}=e||{};return[this.processValue(t),this.processValue(i)].slice(0,this.getNumberOfInputs(n))}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new c.NumberFilterModelFormatter(this.getLocaleTextFunc.bind(this),this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return l.DEFAULT_NUMBER_FILTER_OPTIONS}setElementValue(e,t,i){const{numberFormatter:n}=this.numberFilterParams,o=!i&&n?n(t??null):t;super.setElementValue(e,o)}createValueElement(){const e=(0,d.getAllowedCharPattern)(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),(0,n._setAriaRole)(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,n){const o=this.createManagedBean(n?new s.AgInputTextField({allowedCharPattern:n}):new r.AgInputNumberField);o.addCssClass(`ag-filter-${i}`),o.addCssClass("ag-filter-filter"),t.push(o),e.appendChild(o.getGui())}removeValueElements(e,t){const i=i=>this.removeComponents(i,e,t);i(this.eValuesFrom),i(this.eValuesTo)}getValues(e){const t=[];return this.forEachPositionInput(e,(e,i,n,o)=>{i<o&&t.push(this.processValue(this.stringToFloat(e.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}processValue(e){return null==e||isNaN(e)?null:e}stringToFloat(e){if("number"==typeof e)return e;let t=(0,o._makeNull)(e);null!=t&&""===t.trim()&&(t=null);const i=this.numberFilterParams.numberParser;return i?i(t):null==t||"-"===t.trim()?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.filterType,type:t},n=this.getValues(e);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}getInputs(e){const{eValuesFrom:t,eValuesTo:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{t.getInputElement().validity.valid||(e=!0)}),e}}t.NumberFilter=u},846:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_NUMBER_FILTER_OPTIONS=void 0,t.DEFAULT_NUMBER_FILTER_OPTIONS=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"]},1862:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.NumberFilterModelFormatter=void 0;const n=i(2786);class o extends n.SimpleFilterModelFormatter{conditionToString(e,t){const{numberOfInputs:i}=t||{},{filter:n,filterTo:o,type:r}=e,s="inRange"==r||2===i,a=this.formatValue.bind(this);return s?`${a(n)}-${a(o)}`:null!=n?a(n):`${r}`}}t.NumberFilterModelFormatter=o},730:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getAllowedCharPattern=void 0,t.getAllowedCharPattern=function(e){const{allowedCharPattern:t}=e??{};return t??null}},4789:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.NumberFloatingFilter=void 0;const n=i(8731),o=i(8792),r=i(5946),s=i(7287),a=i(8922),l=i(846),c=i(1862),d=i(730);class u extends n.BeanStub{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new o.AgInputNumberField),this.eTextInput=this.createManagedBean(new r.AgInputTextField),this.eTextInput.setDisabled(!0);const t=this.eNumberInput.getGui(),i=this.eTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,e=>this.onValueChanged(e)),this.setupListeners(i,e=>this.onValueChanged(e))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}}class h extends a.TextInputFloatingFilter{init(e){super.init(e),this.filterModelFormatter=new c.NumberFilterModelFormatter(this.getLocaleTextFunc.bind(this),this.optionsFactory,e.filterParams?.numberFormatter)}refresh(e){(0,d.getAllowedCharPattern)(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultOptions(){return l.DEFAULT_NUMBER_FILTER_OPTIONS}createFloatingFilterInputService(e){return this.allowedCharPattern=(0,d.getAllowedCharPattern)(e.filterParams),this.allowedCharPattern?this.createManagedBean(new s.FloatingFilterTextInputService({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new u)}}t.NumberFloatingFilter=h},4824:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsFactory=void 0;const n=i(7764);t.OptionsFactory=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}mapCustomOptions(){const{filterOptions:e}=this;e&&e.forEach(t=>{"string"!=typeof t&&([["displayKey"],["displayName"],["predicate","test"]].every(e=>!!e.some(e=>null!=t[e])||((0,n._warn)(72,{keys:e}),!1))?this.customFilterOptions[t.displayKey]=t:this.filterOptions=e.filter(e=>e===t)||[])})}selectDefaultItem(e){const{filterOptions:t}=this;if(e.defaultOption)this.defaultOption=e.defaultOption;else if(t.length>=1){const e=t[0];"string"==typeof e?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:(0,n._warn)(73)}else(0,n._warn)(74)}getCustomOption(e){return this.customFilterOptions[e]}}},2245:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ProvidedFilter=void 0;const n=i(2147),o=i(3507),r=i(2043),s=i(4422),a=i(7764),l=i(8020),c=i(1772),d=i(5741),u=i(361);class h extends l.Component{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=l.RefPlaceholder,this.buttonListeners=[],this.defaultDebounceMs=0}postConstruct(){this.resetTemplate(),this.createManagedBean(new c.ManagedFocusFeature(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new n.PositionableFeature(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const i=`\n            <form class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">\n                    ${this.createBodyTemplate()}\n                </div>\n            </form>`;this.setTemplate(i,this.getAgComponents(),e),t=this.getGui(),t?.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.params.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.params=e,this.applyActive=(0,u.isUseApplyButton)(e),this.resetButtonsPanel(e)}updateParams(e){this.params=e,this.applyActive=(0,u.isUseApplyButton)(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(e,t){const{buttons:i,readOnly:n}=t??{},{buttons:r,readOnly:l}=e;if(n===l&&(0,s._jsonEquals)(i,r))return;const c=r&&r.length>0&&!this.isReadOnly();if(this.eButtonsPanel?((0,o._clearElement)(this.eButtonsPanel),this.buttonListeners.forEach(e=>e()),this.buttonListeners=[]):c&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!c)return void(this.eButtonsPanel&&(0,o._removeFromParent)(this.eButtonsPanel));const d=document.createDocumentFragment(),u=e=>{let t;const i=e?this.translate(`${e}Filter`):void 0;switch(e){case"apply":t=e=>this.onBtApply(!1,!1,e);break;case"clear":t=()=>this.onBtClear();break;case"reset":t=()=>this.onBtReset();break;case"cancel":t=e=>{this.onBtCancel(e)};break;default:return void(0,a._warn)(75)}const n="apply"===e?"submit":"button",r=(0,o._loadTemplate)(`<button\n                    type="${n}"\n                    data-ref="${e}FilterButton"\n                    class="ag-button ag-standard-button ag-filter-apply-panel-button"\n                >${i}\n                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(r,{click:t})),d.append(r)};r.forEach(e=>u(e)),this.eButtonsPanel.append(d),this.getGui().appendChild(this.eButtonsPanel)}setupOnBtApplyDebounce(){const e=(0,u.getDebounceMs)(this.params,this.defaultDebounceMs),t=(0,r._debounce)(this,this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel??null}setModel(e){return(null!=e?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.params.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const i=()=>{this.onUiChanged(!1,"prevent"),t?.()};null!=e?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const t=this.getModelFromUi();if(!this.isModelValid(t))return!1;const i=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(i,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,i){if(i&&i.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")){const i="columnFilter";this.params.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:i})}const{closeOnApply:n}=this.params;n&&this.applyActive&&!e&&!t&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,i=t&&t.key;let n;"Enter"!==i&&"Space"!==i||(n={keyboardEvent:t}),this.hidePopup(n),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.params.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const e=this.isModelValid(this.getModelFromUi()),t=this.queryForHtmlElement('[data-ref="applyFilterButton"]');t&&(0,o._setDisabled)(t,!e)}e&&!t||"immediately"===t?this.onBtApply(e):(this.applyActive||t)&&"debounce"!==t||this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){const{positionableFeature:t,gos:i}=this;t&&"toolPanel"!==e&&("floatingFilter"===e||"columnFilter"===e?(t.restoreLastSize(),t.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(!0))}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature?.constrainSizeToAvailableHeight(!1)}refresh(e){const t=this.params;return this.params=e,this.resetButtonsPanel(e,t),!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.getLocaleTextFunc()(e,d.FILTER_LOCALE_TEXT[e])}getCellValue(e){return this.params.getValue(e)}getPositionableElement(){return this.eFilterBody}}t.ProvidedFilter=h},5562:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ScalarFilter=void 0;const n=i(7764),o=i(5220),r=i(7535);class s extends o.SimpleFilter{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){const{includeBlanksInEquals:t,includeBlanksInNotEqual:i,includeBlanksInGreaterThan:n,includeBlanksInLessThan:o,includeBlanksInRange:r}=this.scalarFilterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(i)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(n)return!0;break;case"lessThan":case"lessThanOrEqual":if(o)return!0;break;case"inRange":if(r)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){const o=i.type;if(!this.isValid(t))return"notEqual"===o||"notBlank"===o;const s=this.comparator(),a=null!=e[0]?s(e[0],t):0;switch(o){case"equals":return 0===a;case"notEqual":return 0!==a;case"greaterThan":return a>0;case"greaterThanOrEqual":return a>=0;case"lessThan":return a<0;case"lessThanOrEqual":return a<=0;case"inRange":{const i=s(e[1],t);return this.scalarFilterParams.inRangeInclusive?a>=0&&i<=0:a>0&&i<0}case"blank":return(0,r.isBlank)(t);case"notBlank":return!(0,r.isBlank)(t);default:return(0,n._warn)(76,{filterModelType:o}),!0}}}t.ScalarFilter=s},5220:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleFilter=void 0;const n=i(1502),o=i(3507),r=i(7990),s=i(7764),a=i(8085),l=i(7336),c=i(159),d=i(8020),u=i(4824),h=i(2245),p=i(7535);class g extends h.ProvidedFilter{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:e}=t;return null!=e?e:1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:"inRange"===e?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,i)=>{const n=0===i?e:this.optionsFactory.defaultOption;t.setValue(n,!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return 0===e.length?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){const{eJoinOperatorsOr:e,defaultJoinOperator:t}=this;return 0===e.length?t:!0===e[0].getValue()?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const i=!e.operator,o=!t.operator;if(!i&&o||i&&!o)return!1;let r;if(i){const i=e,n=t;r=this.areSimpleModelsEqual(i,n)}else{const i=e,o=t;r=i.operator===o.operator&&(0,n._areEqual)(i.conditions,o.conditions,(e,t)=>this.areSimpleModelsEqual(e,t))}return r}shouldRefresh(e){const t=this.getModel(),i=t?t.conditions??[t]:null,n=e.filterOptions?.map(e=>"string"==typeof e?e:e.displayKey)??this.getDefaultFilterOptions();return!(i&&!i.every(e=>void 0!==n.find(t=>t===e.type))||"number"==typeof e.maxNumConditions&&i&&i.length>e.maxNumConditions)}refresh(e){return!!this.shouldRefresh(e)&&(!!super.refresh(e)&&(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0))}setModelIntoUi(e){if(e.operator){const t=e;let i=t.conditions;null==i&&(i=[],(0,s._warn)(77));const n=(0,p.validateAndUpdateConditions)(i,this.maxNumConditions),o=this.getNumConditions();if(n<o)this.removeConditionsAndOperators(n);else if(n>o)for(let e=o;e<n;e++)this.createJoinOperatorPanel(),this.createOption();const r="OR"===t.operator;this.eJoinOperatorsAnd.forEach(e=>e.setValue(!r,!0)),this.eJoinOperatorsOr.forEach(e=>e.setValue(r,!0)),i.forEach((e,t)=>{this.eTypes[t].setValue(e.type,!0),this.setConditionIntoUi(e,t)})}else{const t=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(t.type,!0),this.setConditionIntoUi(t,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),r.AgPromise.resolve()}doesFilterPass(e){const t=this.getModel();if(null==t)return!0;const{operator:i}=t,n=[];if(i){const e=t;n.push(...e.conditions??[])}else n.push(t);return n[i&&"OR"===i?"some":"every"](t=>this.individualConditionPasses(e,t))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=(0,p.getDefaultJoinOperator)(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new u.OptionsFactory,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){let t=e.maxNumConditions??2;t<1&&((0,s._warn)(79),t=1),this.maxNumConditions=t;let i=e.numAlwaysVisibleConditions??1;i<1&&((0,s._warn)(80),i=1),i>t&&((0,s._warn)(81),i=t),this.numAlwaysVisibleConditions=i}createOption(){const e=this.createManagedBean(new c.AgSelect);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const i=this.getNumConditions()-1;this.forEachPositionInput(i,e=>this.resetInput(e)),this.addChangedListeners(e,i)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const n=this.eJoinOperatorPanels.length-1,o=this.joinOperatorId++;this.resetJoinOperatorAnd(t,n,o),this.resetJoinOperatorOr(i,n,o),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const n=this.createManagedBean(new l.AgRadioButton);e.push(n);const o="ag-filter-condition-operator";return n.addCssClass(o),n.addCssClass(`${o}-${i}`),t.appendChild(n.getGui()),n}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(e=>"string"==typeof e?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(e){const{filterListOptions:t}=this;t.forEach(t=>{e.addOption(t)}),e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?e=i:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const t=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<t){this.removeConditionsAndOperators(t+1);const i=e+1,n=t-i;n>0&&this.removeConditionsAndOperators(i,n),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((t,i)=>{const n=this.isConditionDisabled(i,e);t.setDisabled(n||this.filterListOptions.length<=1),1===i&&((0,o._setDisabled)(this.eJoinOperatorPanels[0],n),this.eJoinOperatorsAnd[0].setDisabled(n),this.eJoinOperatorsOr[0].setDisabled(n))}),this.eConditionBodies.forEach((e,t)=>{(0,o._setDisplayed)(e,this.isConditionBodyVisible(t))});const i="OR"===(t??this.getJoinOperator());this.eJoinOperatorsAnd.forEach(e=>{e.setValue(!i,!0)}),this.eJoinOperatorsOr.forEach(e=>{e.setValue(i,!0)}),this.forEachInput((t,i,n,o)=>{this.setElementDisplayed(t,i<o),this.setElementDisabled(t,this.isConditionDisabled(n,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;const{eTypes:i,eConditionBodies:n,eJoinOperatorPanels:o,eJoinOperatorsAnd:r,eJoinOperatorsOr:s}=this;this.removeComponents(i,e,t),this.removeElements(n,e,t),this.removeValueElements(e,t);const a=Math.max(e-1,0);this.removeElements(o,a,t),this.removeComponents(r,a,t),this.removeComponents(s,a,t)}removeElements(e,t,i){(0,p.removeItems)(e,t,i).forEach(e=>(0,o._removeFromParent)(e))}removeComponents(e,t,i){(0,p.removeItems)(e,t,i).forEach(e=>{(0,o._removeFromParent)(e.getGui()),this.destroyBean(e)})}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus){const{eFilterBody:e,eTypes:t}=this;let i;if(!this.isReadOnly()){const e=this.getInputs(0)[0];i=e instanceof a.AgAbstractInputField&&this.isConditionBodyVisible(0)?e.getInputElement():t[0]?.getFocusableElement()}(i??e).focus({preventScroll:!0})}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,i=-1,n=!1;const o=this.getJoinOperator();for(let e=this.getNumConditions()-1;e>=0;e--)if(this.isConditionUiComplete(e))-1===t&&(t=e,i=e);else{const o=e<t;(e>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(e-1)||o)&&(this.removeConditionsAndOperators(e,1),n=!0,o&&i--)}let r=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),r=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),r=!0),r&&this.updateConditionStatusesAndValues(i,o),n&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getPlaceholderText(e,t){let i=this.translate(e);if("function"==typeof this.filterPlaceholder){const e=this.eTypes[t].getValue(),n=this.translate(e);i=this.filterPlaceholder({filterOptionKey:e,filterOption:n,placeholder:i})}else"string"==typeof this.filterPlaceholder&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.getLocaleTextFunc();this.forEachInput((t,i,n,o)=>{if(!(t instanceof a.AgAbstractInputField))return;const r=0===i&&o>1?"inRangeStart":0===i?"filterOoo":"inRangeEnd",s=0===i&&o>1?e("ariaFilterFromValue","Filter from value"):0===i?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(r,n)),t.setInputAriaLabel(s)})}setElementValue(e,t,i){e instanceof a.AgAbstractInputField&&e.setValue(null!=t?String(t):null,!0)}setElementDisplayed(e,t){e instanceof d.Component&&(0,o._setDisplayed)(e.getGui(),t)}setElementDisabled(e,t){e instanceof d.Component&&(0,o._setDisabled)(e.getGui(),t)}attachElementOnChange(e,t){e instanceof a.AgAbstractInputField&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,i)=>{this.forEachPositionTypeInput(i,t,e)})}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const n=this.getNumberOfInputs(t),o=this.getInputs(e);for(let t=0;t<o.length;t++){const r=o[t];null!=r&&i(r,t,e,n)}}isConditionDisabled(e,t){return!!this.isReadOnly()||0!==e&&e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions())&&("empty"!==this.getConditionType(e)&&!this.getValues(e).some(e=>null==e))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(e=>this.resetType(e)),this.eJoinOperatorsAnd.forEach((e,t)=>this.resetJoinOperatorAnd(e,t,this.joinOperatorId+t)),this.eJoinOperatorsOr.forEach((e,t)=>this.resetJoinOperatorOr(e,t,this.joinOperatorId+t)),this.joinOperatorId++,this.forEachInput(e=>this.resetInput(e)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),r.AgPromise.resolve()}resetType(e){const t=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(t).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,"AND"===this.defaultJoinOperator,this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,"OR"===this.defaultJoinOperator,this.translate("orCondition"),i)}resetJoinOperator(e,t,i,n,o){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${o}`).setLabel(n),t)}updateJoinOperatorsDisabled(){const e=(e,t)=>this.updateJoinOperatorDisabled(e,t);this.eJoinOperatorsAnd.forEach(e),this.eJoinOperatorsOr.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e);this.forEachInput((e,n,o)=>{o===t&&this.setElementValue(e,null!=i[n]?i[n]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,i,n)=>{this.setElementValue(t,0===i&&0===n?e:null,!0)})}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,e=>{this.attachElementOnChange(e,this.listener)}))}individualConditionPasses(e,t){const i=this.getCellValue(e.node),n=this.mapValuesFromModel(t),o=this.optionsFactory.getCustomOption(t.type),r=(0,p.evaluateCustomFilter)(o,n,i);return null!=r?r:null==i?this.evaluateNullValue(t.type):this.evaluateNonNullValue(n,i,t,e)}hasInvalidInputs(){return!1}}t.SimpleFilter=g},2786:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleFilterModelFormatter=void 0;const n=i(5741);t.SimpleFilterModelFormatter=class{constructor(e,t,i){this.getLocaleTextFunc=e,this.optionsFactory=t,this.valueFormatter=i}getModelAsString(e){if(!e)return null;const t=null!=e.operator,i=this.getLocaleTextFunc();if(t){const t=e,o=(t.conditions??[]).map(e=>this.getModelAsString(e)),r="AND"===t.operator?"andCondition":"orCondition";return o.join(` ${i(r,n.FILTER_LOCALE_TEXT[r])} `)}if("blank"===e.type||"notBlank"===e.type)return i(e.type,e.type);{const t=e,n=this.optionsFactory.getCustomOption(t.type),{displayKey:o,displayName:r,numberOfInputs:s}=n||{};return o&&r&&0===s?(i(o,r),r):this.conditionToString(t,n)}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){const t=this.valueFormatter;return t?t(e??null)??"":String(e)}}},7535:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.validateAndUpdateConditions=t.evaluateCustomFilter=t.getDefaultJoinOperator=t.isBlank=t.removeItems=void 0;const n=i(7764);t.removeItems=function(e,t,i){return null==i?e.splice(t):e.splice(t,i)},t.isBlank=function(e){return null==e||"string"==typeof e&&0===e.trim().length},t.getDefaultJoinOperator=function(e){return"AND"===e||"OR"===e?e:"AND"},t.evaluateCustomFilter=function(e,t,i){if(null==e)return;const{predicate:n}=e;return null==n||t.some(e=>null==e)?void 0:n(t,i)},t.validateAndUpdateConditions=function(e,t){let i=e.length;return i>t&&(e.splice(t),(0,n._warn)(78),i=t),i}},2811:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TextFilter=void 0;const n=i(5230),o=i(4422),r=i(5946),s=i(5220),a=i(7535),l=i(650),c=i(330),d=i(2470);class u extends s.SimpleFilter{constructor(){super("textFilter"),this.filterType="text",this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>null==e?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:i})=>{if(null==i)return!1;switch(e){case"contains":return t.indexOf(i)>=0;case"notContains":return t.indexOf(i)<0;case"equals":return t===i;case"notEqual":return t!=i;case"startsWith":return 0===t.indexOf(i);case"endsWith":{const e=t.lastIndexOf(i);return e>=0&&e===t.length-i.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=e.textMatcher||this.defaultMatcher,this.formatter=e.textFormatter||(e.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new c.TextFilterModelFormatter(this.getLocaleTextFunc.bind(this),this.optionsFactory)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.filterType,type:t},n=this.getValuesWithSideEffects(e,!0);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){const{eValuesFrom:t,eValuesTo:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const i=[];return this.forEachPositionInput(e,(e,n,r,s)=>{if(n<s){let n=(0,o._makeNull)(e.getValue());t&&this.textFilterParams.trimInput&&(n=(0,d.trimInputForFilter)(n)??null,e.setValue(n,!0)),i.push(n)}}),i}getDefaultFilterOptions(){return l.DEFAULT_TEXT_FILTER_OPTIONS}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),(0,n._setAriaRole)(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,i){const n=this.createManagedBean(new r.AgInputTextField);n.addCssClass(`ag-filter-${i}`),n.addCssClass("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeValueElements(e,t){const i=i=>this.removeComponents(i,e,t);i(this.eValuesFrom),i(this.eValuesTo)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:n}=e||{};return[t||null,i||null].slice(0,this.getNumberOfInputs(n))}evaluateNullValue(e){return!!e&&["notEqual","notContains","blank"].indexOf(e)>=0}evaluateNonNullValue(e,t,i,n){const o=e.map(e=>this.formatter(e))||[],r=this.formatter(t),{api:s,colDef:l,column:c,context:d,textFormatter:u}=this.textFilterParams;if("blank"===i.type)return(0,a.isBlank)(t);if("notBlank"===i.type)return!(0,a.isBlank)(t);const h={api:s,colDef:l,column:c,context:d,node:n.node,data:n.data,filterOption:i.type,value:r,textFormatter:u};return o.some(e=>this.matcher({...h,filterText:e}))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}}t.TextFilter=u},650:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_TEXT_FILTER_OPTIONS=void 0,t.DEFAULT_TEXT_FILTER_OPTIONS=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"]},330:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TextFilterModelFormatter=void 0;const n=i(2786);class o extends n.SimpleFilterModelFormatter{conditionToString(e,t){const{numberOfInputs:i}=t||{},{filter:n,filterTo:o,type:r}=e;return"inRange"==r||2===i?`${n}-${o}`:null!=n?`${n}`:`${r}`}}t.TextFilterModelFormatter=o},2470:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.trimInputForFilter=void 0,t.trimInputForFilter=function(e){const t=e?.trim();return""===t?e:t}},8305:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TextFloatingFilter=void 0;const n=i(7287),o=i(8922),r=i(650),s=i(330);class a extends o.TextInputFloatingFilter{init(e){super.init(e),this.filterModelFormatter=new s.TextFilterModelFormatter(this.getLocaleTextFunc.bind(this),this.optionsFactory)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultOptions(){return r.DEFAULT_TEXT_FILTER_OPTIONS}createFloatingFilterInputService(){return this.createManagedBean(new n.FloatingFilterTextInputService)}}t.TextFloatingFilter=a},5381:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.resetQuickFilter=t.getQuickFilter=t.isQuickFilterPresent=void 0,t.isQuickFilterPresent=function(e){return!!e.quickFilter?.isFilterPresent()},t.getQuickFilter=function(e){return e.quickFilter?.getText()},t.resetQuickFilter=function(e){e.quickFilter?.resetCache()}},1238:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.QuickFilterService=void 0;const n=i(8731),o=i(7274),r=i(4422),s=i(7764);class a extends n.BeanStub{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){const e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",e=>this.setFilter(e.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onColumnConfigChanged()),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setParserAndMatcher())}refreshCols(){const{autoColSvc:e,colModel:t,gos:i,pivotResultCols:n}=this.beans,o=t.isPivotMode(),r=e?.getColumns(),s=t.getColDefCols();let a=(o&&!i.get("applyQuickFilterBeforePivotOrAgg")?n?.getPivotResultCols()?.list:s)??[];r&&(a=a.concat(r)),this.colsToUse=i.get("includeHiddenColumnsInQuickFilter")?a:a.filter(e=>e.isVisible()||e.isRowGroupActive())}isFilterPresent(){return null!==this.quickFilter}doesRowPass(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every(i=>t?this.doesRowPassCache(e,i):this.doesRowPassNoCache(e,i))}resetCache(){this.beans.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}getText(){return this.gos.get("quickFilterText")}setFilterParts(){const{quickFilter:e,parser:t}=this;this.quickFilterParts=e?t?t(e):e.split(" "):null}parseFilter(e){return(0,r._exists)(e)?e.toUpperCase():null}setFilter(e){if(null!=e&&"string"!=typeof e)return void(0,s._warn)(70,{newFilter:e});const t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some(i=>{const n=this.getTextForColumn(i,e);return(0,r._exists)(n)&&n.indexOf(t)>=0})}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassMatcher(e,t){let i;e?(this.checkGenerateAggText(t),i=t.quickFilterAggregateText):i=this.getAggText(t);const{quickFilterParts:n,matcher:o}=this;return o(n,i)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let i=this.beans.filterValueSvc.getValue(e,t);const n=e.getColDef();if(n.getQuickFilterText){const r=(0,o._addGridCommonParams)(this.gos,{value:i,node:t,data:t.data,column:e,colDef:n});i=n.getQuickFilterText(r)}return(0,r._exists)(i)?i.toString().toUpperCase():null}getAggText(e){const t=[];return this.colsToUse.forEach(i=>{const n=this.getTextForColumn(i,e);(0,r._exists)(n)&&t.push(n)}),t.join("\n")}}t.QuickFilterService=a},5626:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FocusService=void 0;const n=i(9853),o=i(8731),r=i(6257),s=i(7274),a=i(3534),l=i(1323),c=i(3990),d=i(7632),u=i(1502),h=i(2331),p=i(4422);class g extends o.BeanStub{constructor(){super(...arguments),this.beanName="focusSvc"}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc((0,h._registerKeyboardFocusEvents)(this.beans))}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCell||this.isDomDataMissingInHierarchy((0,s._getActiveDomElement)(this.beans),d.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCell}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||this.isDomDataMissingInHierarchy((0,s._getActiveDomElement)(this.beans),a.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeader}isDomDataMissingInHierarchy(e,t){let i=e;for(;i;){if((0,s._getDomData)(this.gos,i,t))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCell}shouldRestoreFocus(e){return!!this.isCellRestoreFocused(e)&&(setTimeout(()=>{this.restoredFocusedCell=null},0),!0)}clearRestoreFocus(){this.restoredFocusedCell=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(e,t){this.awaitRestoreFocusedCell=!0,setTimeout(()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(e),t())})}isCellRestoreFocused(e){return null!=this.restoredFocusedCell&&("cellSpan"in e?e.doesSpanContain(this.restoredFocusedCell):(0,r._areCellsEqual)(e,this.restoredFocusedCell))}setRestoreFocusedCell(e){"react"===this.beans.frameworkOverrides.renderingEngine&&(this.restoredFocusedCell=e)}getFocusEventParams(e){const{rowIndex:t,rowPinned:i,column:n}=e,o={rowIndex:t,rowPinned:i,column:n,isFullWidthCell:!1},r=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i});return r&&(o.isFullWidthCell=r.isFullWidth()),o}clearFocusedCell(){if(this.restoredFocusedCell=null,null==this.focusedCell)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){const{column:t,rowIndex:i,rowPinned:n,forceBrowserFocus:o=!1,preventScrollOnBrowserFocus:r=!1}=e,s=this.colModel.getCol(t);s?(this.focusedCell={rowIndex:i,rowPinned:(0,p._makeNull)(n),column:s},this.eventSvc.dispatchEvent({type:"cellFocused",...this.getFocusEventParams(this.focusedCell),forceBrowserFocus:o,preventScrollOnBrowserFocus:r})):this.focusedCell=null}isCellFocused(e){return null!=this.focusedCell&&(0,r._areCellsEqual)(e,this.focusedCell)}isRowNodeFocused(e){return this.isRowFocused(e.rowIndex,e.rowPinned)}isHeaderWrapperFocused(e){if(null==this.focusedHeader)return!1;const{column:t,rowCtrl:{rowIndex:i,pinned:n}}=e,{column:o,headerRowIndex:r}=this.focusedHeader;return t===o&&i===r&&n==o.getPinned()}focusHeaderPosition(e){if((0,h._isHeaderFocusSuppressed)(this.beans))return!1;const{direction:t,fromTab:i,allowUserOverride:n,event:o,fromCell:r,rowWithoutSpanValue:s}=e;let{headerPosition:a}=e;if(r&&this.filterManager?.isAdvFilterHeaderActive())return this.focusAdvancedFilter(a);if(n){const e=this.focusedHeader,n=(0,l.getFocusHeaderRowCount)(this.beans);if(i){const i=this.gos.getCallback("tabToNextHeader");i&&(a=this.getHeaderPositionFromUserFunc({userFunc:i,direction:t,currentPosition:e,headerPosition:a,headerRowCount:n}))}else{const t=this.gos.getCallback("navigateToNextHeader");t&&o&&(a=t({key:o.key,previousHeaderPosition:e,nextHeaderPosition:a,headerRowCount:n,event:o}))}}return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:t,event:o,fromCell:r,rowWithoutSpanValue:s})}focusHeaderPositionFromUserFunc(e){if((0,h._isHeaderFocusSuppressed)(this.beans))return!1;const{userFunc:t,headerPosition:i,direction:n,event:o}=e,r=this.focusedHeader,s=(0,l.getFocusHeaderRowCount)(this.beans),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:n,currentPosition:r,headerPosition:i,headerRowCount:s});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:n,event:o})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:i,currentPosition:n,headerPosition:o,headerRowCount:r}=e,s=t({backwards:"Before"===i,previousHeaderPosition:n,nextHeaderPosition:o,headerRowCount:r});return!0===s?n:!1===s?null:s}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:i,fromCell:n,rowWithoutSpanValue:o,event:r}=e,{column:s,headerRowIndex:a}=t,{filterManager:l,ctrlsSvc:c,headerNavigation:d}=this.beans;if(-1===a)return l?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:s,event:r});d?.scrollToColumn(s,i);const u=c.getHeaderRowContainerCtrl(s.getPinned()),h=u?.focusHeader(t.headerRowIndex,s,r)||!1;return d&&h&&(null!=o||n)&&(d.currentHeaderRowWithoutSpan=o??-1),h}focusFirstHeader(){if(this.overlays?.isExclusive()&&this.focusOverlay())return!0;let e=this.visibleCols.allCols[0];if(!e)return!1;const{colGroupSvc:t}=this.beans;t&&e.getParent()&&(e=t.getColGroupAtLevel(e,0));const i=(0,c.getHeaderIndexToFocus)(e,0);return this.focusHeaderPosition({headerPosition:i,rowWithoutSpanValue:0})}focusLastHeader(e){if(this.overlays?.isExclusive()&&this.focusOverlay(!0))return!0;const t=(0,l.getFocusHeaderRowCount)(this.beans)-1,i=(0,u._last)(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:i},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return null!=this.focusedCell&&this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===(0,p._makeNull)(t)}focusOverlay(e){const t=this.overlays?.isVisible()&&this.overlays.eWrapper?.getGui();return!!t&&(0,h._focusInto)(t,e)}focusGridView(e){const{backwards:t=!1,canFocusOverlay:i=!0,event:o}=e;if(this.overlays?.isExclusive())return i&&this.focusOverlay(t);if((0,h._isCellFocusSuppressed)(this.beans))return t&&!(0,h._isHeaderFocusSuppressed)(this.beans)?this.focusLastHeader():!(!i||!this.focusOverlay(t))||!t&&(0,h._focusNextGridCoreContainer)(this.beans,t);const s=t?(0,r._getLastRow)(this.beans):(0,r._getFirstRow)(this.beans);if(s){const i=e.column??this.focusedHeader?.column,{rowIndex:a,rowPinned:l}=s,c=(0,r._getRowNode)(this.beans,s);if(!i||!c||null==a)return!1;if(i.isSuppressNavigable(c)){const e=this.gos.get("enableRtl");let t;return t=o&&o.key!==n.KeyCode.TAB?o.key:e?n.KeyCode.LEFT:n.KeyCode.RIGHT,this.beans.navigation?.navigateToNextCell(null,t,{rowIndex:a,column:i,rowPinned:l||null},!0),!0}if(this.navigation?.ensureCellVisible({rowIndex:a,column:i,rowPinned:l}),t){const e=this.rowRenderer.getRowByPosition(s);if(e?.isFullWidth()&&this.navigation?.tryToFocusFullWidthRow(s,t))return!0}return this.setFocusedCell({rowIndex:a,column:i,rowPinned:(0,p._makeNull)(l),forceBrowserFocus:!0}),this.beans.rangeSvc?.setRangeToCell({rowIndex:a,rowPinned:l,column:i}),!0}return!(!i||!this.focusOverlay(t))||!(!t||!this.focusLastHeader())}focusAdvancedFilter(e){return this.advFilterFocusColumn=e?.column,this.beans.advancedFilter?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(e,t){const i=(t?void 0:this.advFilterFocusColumn)??this.visibleCols.allCols?.[0];return e?this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:(0,l.getFocusHeaderRowCount)(this.beans)-1}}):this.focusGridView({column:i})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}}t.FocusService=g},1657:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridCoreCreator=t.createGrid=t._getGlobalGridOption=t.provideGlobalGridOptions=void 0;const n=i(6433),o=i(2342),r=i(3943),s=i(1678),a=i(1978),l=i(2132),c=i(4422),d=i(6996),u=i(7764),h=i(6511);class p{static applyGlobalGridOptions(e){if(!p.gridOptions)return{...e};let t={};return(0,d._mergeDeep)(t,p.gridOptions,!0,!0),"deep"===p.mergeStrategy?(0,d._mergeDeep)(t,e,!0,!0):t={...t,...e},p.gridOptions.context&&(t.context=p.gridOptions.context),e.context&&("deep"===p.mergeStrategy&&t.context&&(0,d._mergeDeep)(e.context,t.context,!0,!0),t.context=e.context),t}}p.gridOptions=void 0,p.mergeStrategy="shallow",t.provideGlobalGridOptions=function(e,t="shallow"){p.gridOptions=e,p.mergeStrategy=t},t._getGlobalGridOption=function(e){return p.gridOptions?.[e]},t.createGrid=function(e,t,i){if(!t)return(0,u._error)(11),{};const n=i;let o;if(!n?.setThemeOnGridDiv){const t=document.createElement("div");t.style.height="100%",e.appendChild(t),e=t,o=()=>e.remove()}return(new f).create(e,t,t=>{const i=new s.GridComp(e);t.createBean(i)},void 0,i,o)};let g=1;class f{create(e,t,i,s,a,l){const c=p.applyGlobalGridOptions(t),d=c.gridId??String(g++),u=c.rowModelType??"clientSide",h=this.getRegisteredModules(a,d,u),f=this.createBeansList(u,h,d),m=this.createProvidedBeans(e,c,a);if(!f)return;const v={providedBeanInstances:m,beanClasses:f,gridId:d,beanInitComparator:r.gridBeanInitComparator,beanDestroyComparator:r.gridBeanDestroyComparator,derivedBeans:[n.createGridApi],destroyCallback:l},b=new o.Context(v);return this.registerModuleFeatures(b,h),i(b),b.getBean("syncSvc").start(),s&&s(b),b.getBean("gridApi")}getRegisteredModules(e,t,i){return(0,l._registerModule)(a.CommunityCoreModule,void 0),e?.modules?.forEach(e=>(0,l._registerModule)(e,t)),(0,l._getRegisteredModules)(t,i)}registerModuleFeatures(e,t){const i=e.getBean("registry"),n=e.getBean("apiFunctionSvc");t.forEach(e=>{i.registerModule(e);const t=e.apiFunctions;t&&Object.keys(t).forEach(e=>{n?.addFunction(e,t[e])})})}createProvidedBeans(e,t,i){let n=i?i.frameworkOverrides:null;(0,c._missing)(n)&&(n=new h.VanillaFrameworkOverrides);const o={gridOptions:t,eGridDiv:e,globalListener:i?i.globalListener:null,globalSyncListener:i?i.globalSyncListener:null,frameworkOverrides:n};return i&&i.providedBeanInstances&&Object.assign(o,i.providedBeanInstances),o}createBeansList(e,t,i){const n={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"}[e];if(!n)return void(0,u._logPreInitErr)(201,{rowModelType:e},`Unknown rowModelType ${e}.`);if(!(0,l._isModuleRegistered)(n,i,e))return void(0,u._logPreInitErr)(200,{reasonOrId:`rowModelType = '${e}'`,moduleName:n,gridScoped:(0,l._areModulesGridScoped)(),gridId:i,rowModelType:e},`Missing module ${n}Module for rowModelType ${e}. \nIf upgrading from before v33, see ${u.baseDocLink}/upgrading-to-ag-grid-33/#changes-to-modules/`);const o=new Set;return t.forEach(e=>e.beans?.forEach(e=>o.add(e))),Array.from(o)}}t.GridCoreCreator=f},736:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractFakeScrollComp=void 0;const n=i(2612),o=i(8667),r=i(3507),s=i(2043),a=i(8020);class l extends a.Component{constructor(e,t){super(),this.direction=t,this.eViewport=a.RefPlaceholder,this.eContainer=a.RefPlaceholder,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",(0,o._isMacOsUserAgent)()||(0,o._isIOSUserAgent)())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=(0,o._isInvisibleScrollbar)(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),i=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),(0,n._requestAnimationFrame)(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;(0,s._waitUntil)(()=>(0,r._isVisible)(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}}t.AbstractFakeScrollComp=l},2218:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CenterWidthFeature=void 0;const n=i(8731),o=i(7274);class r extends n.BeanStub{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=(0,o._isDomLayout)(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:i}=this.beans,n=t.bodyWidth,r=t.getColsLeftWidth(),s=t.getDisplayedColumnsRightWidth();let a;e?a=n+r+s:(a=n,this.addSpacer&&0===(this.gos.get("enableRtl")?r:s)&&i.verticalScrollShowing&&(a+=i.getScrollbarWidth())),this.callback(a)}}t.CenterWidthFeature=r},335:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FakeHScrollSelector=t.FakeHScrollComp=void 0;const n=i(3507),o=i(8020),r=i(736),s=i(2218);class a extends r.AbstractFakeScrollComp{wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}constructor(){super('<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>\n        </div>',"horizontal"),this.eLeftSpacer=o.RefPlaceholder,this.eRightSpacer=o.RefPlaceholder,this.setScrollVisibleDebounce=0}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new s.CenterWidthFeature(e=>this.eContainer.style.width=`${e}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.beans.pinnedRowModel?.getPinnedBottomTotalHeight()??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,o=this.scrollVisibleSvc.getScrollbarWidth();i&&(t+=o),(0,n._setFixedWidth)(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=o);let r=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(r+=o),(0,n._setFixedWidth)(this.eLeftSpacer,r),this.eLeftSpacer.classList.toggle("ag-scroller-corner",r<=o)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),o=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,r=i?0:0===o&&t?16:o,s=()=>{this.setScrollVisibleDebounce=0,this.addOrRemoveCssClass("ag-scrollbar-invisible",t),(0,n._setFixedHeight)(this.getGui(),r),(0,n._setFixedHeight)(this.eViewport,r),(0,n._setFixedHeight)(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(s,100):s()}getScrollPosition(){return(0,n._getScrollLeft)(this.eViewport,this.enableRtl)}setScrollPosition(e){(0,n._isVisible)(this.eViewport)||this.attemptSettingScrollPosition(e),(0,n._setScrollLeft)(this.eViewport,e,this.enableRtl)}}t.FakeHScrollComp=a,t.FakeHScrollSelector={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:a}},6070:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FakeVScrollSelector=t.FakeVScrollComp=void 0;const n=i(3507),o=i(736),r=i(9622);class s extends o.AbstractFakeScrollComp{constructor(){super('<div class="ag-body-vertical-scroll" aria-hidden="true">\n            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">\n                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>\n            </div>\n        </div>',"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new r.SetHeightFeature(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,i=this.invisibleScrollbar,o=t&&e.getScrollbarWidth()||0,r=0===o&&i?16:o;this.addOrRemoveCssClass("ag-scrollbar-invisible",i),(0,n._setFixedWidth)(this.getGui(),r),(0,n._setFixedWidth)(this.eViewport,r),(0,n._setFixedWidth)(this.eContainer,r),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const t=e.getGridBodyCtrl().eBodyViewport,i=this.getScrollPosition(),n=t.scrollTop;i!=n&&this.setScrollPosition(n,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){t||(0,n._isVisible)(this.eViewport)||this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}}t.FakeVScrollComp=s,t.FakeVScrollSelector={selector:"AG-FAKE-VERTICAL-SCROLL",component:s}},2006:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridBodySelector=t.GridBodyComp=void 0;const n=i(7274),o=i(8791),r=i(9360),s=i(5230),a=i(3507),l=i(8020),c=i(335),d=i(6070),u=i(520),h=i(4633);function p(e,t){return t.map(t=>{const i=`e${t[0].toUpperCase()+t.substring(1)}RowContainer`;return e[i]={name:t},`<ag-row-container name="${t}" data-ref="${i}"></ag-row-container>`}).join("")}class g extends l.Component{constructor(){super(...arguments),this.eGridRoot=l.RefPlaceholder,this.eBodyViewport=l.RefPlaceholder,this.eStickyTop=l.RefPlaceholder,this.eStickyBottom=l.RefPlaceholder,this.eTop=l.RefPlaceholder,this.eBottom=l.RefPlaceholder,this.eBody=l.RefPlaceholder}postConstruct(){const{overlays:e,rangeSvc:t}=this.beans,i=e?.getOverlayWrapperSelector(),{paramsMap:l,template:g}=function(e){const t={};return{paramsMap:t,template:`<div class="ag-root ag-unselectable" data-ref="eGridRoot">\n        <ag-header-root></ag-header-root>\n        <div class="ag-floating-top" data-ref="eTop" role="presentation">\n            ${p(t,["topLeft","topCenter","topRight","topFullWidth"])}\n        </div>\n        <div class="ag-body" data-ref="eBody" role="presentation">\n            <div class="ag-body-viewport" data-ref="eBodyViewport" role="presentation">\n            ${p(t,["left","center","right","fullWidth"])}\n            </div>\n            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>\n        </div>\n        <div class="ag-sticky-top" data-ref="eStickyTop" role="presentation">\n            ${p(t,["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}\n        </div>\n        <div class="ag-sticky-bottom" data-ref="eStickyBottom" role="presentation">\n            ${p(t,["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}\n        </div>\n        <div class="ag-floating-bottom" data-ref="eBottom" role="presentation">\n            ${p(t,["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        ${e?"<ag-overlay-wrapper></ag-overlay-wrapper>":""}\n    </div>`}}(!!i);this.setTemplate(g,[...i?[i]:[],c.FakeHScrollSelector,d.FakeVScrollSelector,o.GridHeaderSelector,h.RowContainerSelector],l);const f=(e,t)=>{const i=`${e}px`;t.style.minHeight=i,t.style.height=i},m={setRowAnimationCssOnBodyViewport:(e,t)=>this.setRowAnimationCssOnBodyViewport(e,t),setColumnCount:e=>(0,s._setAriaColCount)(this.getGui(),e),setRowCount:e=>(0,s._setAriaRowCount)(this.getGui(),e),setTopHeight:e=>f(e,this.eTop),setBottomHeight:e=>f(e,this.eBottom),setTopDisplay:e=>this.eTop.style.display=e,setBottomDisplay:e=>this.eBottom.style.display=e,setStickyTopHeight:e=>this.eStickyTop.style.height=e,setStickyTopTop:e=>this.eStickyTop.style.top=e,setStickyTopWidth:e=>this.eStickyTop.style.width=e,setStickyBottomHeight:e=>{this.eStickyBottom.style.height=e,this.eStickyBottom.classList.toggle("ag-invisible","0px"===e)},setStickyBottomBottom:e=>this.eStickyBottom.style.bottom=e,setStickyBottomWidth:e=>this.eStickyBottom.style.width=e,setColumnMovingCss:(e,t)=>this.addOrRemoveCssClass(e,t),updateLayoutClasses:(e,t)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(e=>{e.toggle(r.LayoutCssClasses.AUTO_HEIGHT,t.autoHeight),e.toggle(r.LayoutCssClasses.NORMAL,t.normal),e.toggle(r.LayoutCssClasses.PRINT,t.print)}),this.addOrRemoveCssClass(r.LayoutCssClasses.AUTO_HEIGHT,t.autoHeight),this.addOrRemoveCssClass(r.LayoutCssClasses.NORMAL,t.normal),this.addOrRemoveCssClass(r.LayoutCssClasses.PRINT,t.print)},setAlwaysVerticalScrollClass:(e,t)=>this.eBodyViewport.classList.toggle(u.CSS_CLASS_FORCE_VERTICAL_SCROLL,t),registerBodyViewportResizeListener:e=>{const t=(0,a._observeResize)(this.beans,this.eBodyViewport,e);this.addDestroyFunc(()=>t())},setPinnedTopBottomOverflowY:e=>this.eTop.style.overflowY=this.eBottom.style.overflowY=e,setCellSelectableCss:(e,t)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(i=>i.classList.toggle(e,t))},setBodyViewportWidth:e=>this.eBodyViewport.style.width=e,setGridRootRole:e=>(0,s._setAriaRole)(this.eGridRoot,e)};this.ctrl=this.createManagedBean(new u.GridBodyCtrl),this.ctrl.setComp(m,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(t&&(0,n._isCellSelectionEnabled)(this.gos)||(0,n._isMultiRowSelection)(this.gos))&&(0,s._setAriaMultiSelectable)(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){const i=this.eBodyViewport.classList;i.toggle("ag-row-animation",t),i.toggle("ag-row-no-animation",!t)}}t.GridBodyComp=g,t.GridBodySelector={selector:"AG-GRID-BODY",component:g}},520:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridBodyCtrl=t.CSS_CLASS_FORCE_VERTICAL_SCROLL=void 0;const n=i(8731),o=i(7274),r=i(2612),s=i(9360),a=i(8667),l=i(3507),c=i(5496),d=i(8399),u=i(8115);t.CSS_CLASS_FORCE_VERTICAL_SCROLL="ag-force-vertical-scroll";class h extends n.BeanStub{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,i,n,o,r,a){this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=n,this.eBottom=o,this.eStickyTop=r,this.eStickyBottom=a,this.eCenterColsViewport=i.querySelector(`.${(0,u._getRowViewportClass)("center")}`),this.eFullWidthContainer=i.querySelector(`.${(0,u._getRowContainerClass)("fullWidth")}`),this.eStickyTopFullWidthContainer=r.querySelector(`.${(0,u._getRowContainerClass)("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=a.querySelector(`.${(0,u._getRowContainerClass)("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",e=>this.setCellTextSelection(e.currentValue)),this.createManagedBean(new s.LayoutFeature(this.comp)),this.scrollFeature=this.createManagedBean(new c.GridBodyScrollFeature(this.eBodyViewport)),this.beans.rowDragSvc?.setupRowDrag(this.eBodyViewport,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([n,i,o,r,a]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvFilterHeaderComp(n),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t}),this.addManagedPropertyListener("treeData",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const i=`calc(100% + ${(t&&e.getScrollbarWidth()||0)+((0,a._isInvisibleScrollbar)()?16:0)}px)`;(0,r._requestAnimationFrame)(this.beans,()=>this.comp.setBodyViewportWidth(i)),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t}=this;let i=this.gos.get("treeData");if(!i){const n=t.isPivotMode();i=(e?e.columns.length:0)>=(n?2:1)}this.comp.setGridRootRole(i?"treegrid":"grid")}addFocusListeners(e){e.forEach(e=>{this.addManagedElementListeners(e,{focusin:t=>{const{target:i}=t,n=(0,l._isElementChildOfClass)(i,"ag-root",e);e.classList.toggle("ag-has-focus",!n)},focusout:t=>{const{target:i,relatedTarget:n}=t,o=e.contains(n),r=(0,l._isElementChildOfClass)(n,"ag-root",e);(0,l._isElementChildOfClass)(i,"ag-root",e)||o&&!r||e.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss("ag-column-moving",e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss("ag-selectable",e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){this.beans.editSvc?.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){const e=(this.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.filterManager?.getHeaderRowCount()??0),{rowModel:t}=this.beans,i=t.isLastRowIndexKnown()?t.getRowCount():-1,n=-1===i?-1:e+i;this.comp.setRowCount(n)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),i=e?t.CSS_CLASS_FORCE_VERTICAL_SCROLL:null,n=(0,o._isDomLayout)(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(i,e),e||n&&(0,l._isVerticalScrollShowing)(this.eBodyViewport)}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let i=t.sizesMeasured;const n=()=>{const t=i&&(0,o._isAnimateRows)(this.gos)&&!e.stretching,n=t?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(n,t)};n(),this.addManagedEventListeners({heightScaleChanged:n}),this.addManagedPropertyListener("animateRows",n),this.addManagedEventListeners({gridStylesChanged:()=>{!i&&t.sizesMeasured&&(i=!0,n())}})}addBodyViewportListener(){const{popupSvc:e,touchSvc:t}=this.beans,i=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:i}),t?.mockBodyContextMenu(this,i),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this,e)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:i,shiftKey:n}=e;(n||Math.abs(t)>Math.abs(i))&&(0,d._isEventFromThisGrid)(this.gos,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaX:t,deltaY:i,shiftKey:n}=e,o=n||Math.abs(t)>Math.abs(i),r=e.target;o?(this.eStickyTopFullWidthContainer.contains(r)||this.eStickyBottomFullWidthContainer.contains(r))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(i))}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;this.gos.get("preventDefaultOnContextMenu")&&(e||i).preventDefault();const{target:n}=e||t;n!==this.eBodyViewport&&n!==this.ctrlsSvc.get("center").eViewport||this.beans.contextMenuSvc?.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody,source:"ui"})}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&e?.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){const{pinnedRowModel:e}=this,t=e?.getPinnedTopTotalHeight()??0,i=e?.getPinnedBottomTotalHeight()??0;this.comp.setTopHeight(t),this.comp.setBottomHeight(i),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(e){const e=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${e}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${e}px)`)}else this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%")}setStickyTopOffsetTop(){const e=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(this.filterManager?.getHeaderHeight()??0),t=this.pinnedRowModel?.getPinnedTopTotalHeight()??0;let i=0;e>0&&(i+=e),t>0&&(i+=t),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){const{pinnedRowModel:e,scrollVisibleSvc:t,comp:i}=this,n=(e?.getPinnedBottomTotalHeight()??0)+(t.horizontalScrollShowing&&t.getScrollbarWidth()||0);i.setStickyBottomBottom(`${n}px`)}}t.GridBodyCtrl=h},5496:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridBodyScrollFeature=void 0;const n=i(8731),o=i(7274),r=i(8667),s=i(3507),a=i(2043),l=i(7764);var c;!function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal"}(c||(c={}));const d="Viewport",u="fakeVScrollComp",h=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"];class p extends n.BeanStub{wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.scrollTimer=0,this.needsRefreshedScrollPosition=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=(0,a._debounce)(this,()=>this.lastScrollSource[c.Horizontal]=null,150),this.resetLastVScrollDebounced=(0,a._debounce)(this,()=>this.lastScrollSource[c.Vertical]=null,150)}destroy(){super.destroy(),window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.requireUpdatedScrollPosition.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),gridSizeChanged:e}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}requireUpdatedScrollPosition(){this.needsRefreshedScrollPosition=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,d)});for(const e of h){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?(0,a._debounce)(this,this.onVScroll.bind(this,d),100):this.onVScroll.bind(this,d),n=t?(0,a._debounce)(this,this.onVScroll.bind(this,u),100):this.onVScroll.bind(this,u);this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,n)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){null==this.centerRowsCtrl||(void 0===e&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...h,d]){if(this.lastScrollSource[c.Horizontal]===t)continue;const i=this.getViewportForSource(t);(0,s._setScrollLeft)(i,e,this.enableRtl)}}getViewportForSource(e){return e===d?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return null==this.lastScrollSource[t]?(t===c.Vertical?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,c.Horizontal))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(c.Horizontal,i,!0))return;const n=(0,s._getScrollLeft)(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(n),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,c.Vertical))return;let t;if(t=e===d?this.eBodyViewport.scrollTop:this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(c.Vertical,t,!0))return;const{animationFrameSvc:i}=this;i?.setScrollTop(t),this.nextScrollTop=t,e===d?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,!i||this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded(!0):i.schedule(),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(c.Horizontal),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===c.Horizontal?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.eventSvc.dispatchEvent({...t,type:"bodyScrollEnd"})},150)}shouldBlockScrollUpdate(e,t,i=!1){return!(i&&!(0,r._isIOSUserAgent)())&&(e===c.Vertical?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t))}shouldBlockVerticalScroll(e){const t=(0,s._getInnerHeight)(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.eViewport;if(this.enableRtl&&(0,s._isRtlNegativeScroll)()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(c.Vertical)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll(d)}scrollGridIfNeeded(e=!1){const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.requireUpdatedScrollPosition(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){const i=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(c.Horizontal,e)&&(e=this.enableRtl&&(0,s._isRtlNegativeScroll)()?e>0?0:i:Math.min(Math.max(e,0),i)),(0,s._setScrollLeft)(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.requireUpdatedScrollPosition(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.needsRefreshedScrollPosition){const{lastOffsetHeight:e,lastScrollTop:t}=this;return{top:t,bottom:t+e}}this.needsRefreshedScrollPosition=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const{rowModel:i}=this.beans,n=i.getRowCount();let o=-1;for(let t=0;t<n;t++){const n=i.getRow(t);if("function"==typeof e){if(n&&e(n)){o=t;break}}else if(e===n||e===n.data){o=t;break}}o>=0&&this.ensureIndexVisible(o,t)}ensureIndexVisible(e,t){if((0,o._isDomLayout)(this.gos,"print"))return;const{rowModel:i}=this.beans,n=i.getRowCount();if("number"!=typeof e||e<0||e>=n)return void(0,l._warn)(88,{index:e});const r=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel"),{frameworkOverrides:s,pagination:a,pageBounds:c,rowContainerHeight:d,rowRenderer:u}=this.beans;s.wrapIncoming(()=>{r||a?.goToPageWithIndex(e);const n=this.ctrlsSvc.getGridBodyCtrl(),o=n.stickyTopHeight,s=n.stickyBottomHeight,l=i.getRow(e);let h;do{const e=l.rowTop,i=l.rowHeight,n=c.getPixelOffset(),r=l.rowTop-n,a=r+l.rowHeight,p=this.getVScrollPosition(),g=d.divStretchOffset,f=p.top+g,m=p.bottom+g,v=m-f,b=d.getScrollPositionForPixel(r),y=d.getScrollPositionForPixel(a-v),w=Math.min((b+y)/2,r);let C=null;"top"===t?C=b:"bottom"===t?C=y:"middle"===t?C=w:f+o>r?C=b-o:m-s<a&&(C=y+s),null!==C&&(this.setVerticalScrollPosition(C),u.redraw({afterScroll:!0})),h=e!==l.rowTop||i!==l.rowHeight}while(h);this.animationFrameSvc?.flushAllFrames()})}ensureColumnVisible(e,t="auto"){const{colModel:i,frameworkOverrides:n}=this.beans,o=i.getCol(e);if(!o)return;if(o.isPinned())return;if(!this.visibleCols.isColDisplayed(o))return;const r=this.getPositionedHorizontalScroll(o,t);n.wrapIncoming(()=>{null!==r&&this.centerRowsCtrl.setCenterViewportScrollLeft(r),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameSvc?.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:n}=this.isColumnOutsideViewport(e),o=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),r=this.centerRowsCtrl.getCenterWidth(),s=this.enableRtl;let a=(s?i:n)||o,l=s?n:i;"auto"!==t&&(a="start"===t,l="end"===t);const c="middle"===t;if(a||l||c){const{colLeft:t,colMiddle:i,colRight:n}=this.getColumnBounds(e);return c?i-r/2:a?s?n:t:s?t-r:n-r}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:n,colRight:o}=this.getColumnBounds(e),r=this.enableRtl;return{columnBeforeStart:r?t>o:i<o,columnAfterEnd:r?i<n:t>n}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleCols.bodyWidth,n=e.getActualWidth(),o=e.getLeft(),r=t?-1:1,s=t?i-o:o;return{colLeft:s,colMiddle:s+n/2*r,colRight:s+n*r}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft();return{start:t,end:e+t,width:e}}}t.GridBodyScrollFeature=p},8399:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._getNormalisedMousePosition=t._getCellPositionForEvent=t._isElementInThisGrid=t._isEventFromThisGrid=t._stampTopLevelGridCompWithGridInstance=void 0;const n=i(7274),o=i(814),r=i(4422),s="__ag_grid_instance";function a(e,t){let i=t;for(;i;){const t=i[s];if((0,r._exists)(t))return t===e.gridInstanceId;i=i.parentElement}return!1}t._stampTopLevelGridCompWithGridInstance=function(e,t){t[s]=e.gridInstanceId},t._isEventFromThisGrid=function(e,t){return a(e,t.target)},t._isElementInThisGrid=a,t._getCellPositionForEvent=function(e,t){return(0,o._getCellCtrlForEventTarget)(e,t.target)?.getFocusedCellPosition()??null},t._getNormalisedMousePosition=function(e,t){const i=(0,n._isDomLayout)(e.gos,"normal"),o=t;let r,s;if(null!=o.clientX||null!=o.clientY?(r=o.clientX,s=o.clientY):(r=o.x,s=o.y),i){const t=e.ctrlsSvc.getScrollFeature(),i=t.getVScrollPosition();r+=t.getHScrollPosition().left,s+=i.top}return{x:r,y:s}}},4633:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowContainerSelector=t.RowContainerComp=void 0;const n=i(8430),o=i(3507),r=i(8020),s=i(8115);class a extends r.Component{constructor(e){super(),this.eViewport=r.RefPlaceholder,this.eContainer=r.RefPlaceholder,this.eSpannedContainer=r.RefPlaceholder,this.rowCompsNoSpan={},this.rowCompsWithSpan={},this.name=e?.name,this.options=(0,s._getRowContainerOptions)(this.name)}postConstruct(){this.setTemplate(function(e,t,i){const n=!!i.gos.get("enableCellSpan")&&!!t.getSpannedRowCtrls,o=`<div class="${(0,s._getRowContainerClass)(e)}" data-ref="eContainer" role="rowgroup"></div>`;if("center"===t.type||n){const t=(0,s._getRowSpanContainerClass)(e);return`<div class="ag-viewport ${(0,s._getRowViewportClass)(e)}" data-ref="eViewport" role="presentation">\n                ${o}\n                ${n?`<div class="ag-spanning-container ${t}" data-ref="eSpannedContainer" role="rowgroup"></div>`:""}\n            </div>`}return o}(this.name,this.options,this.beans));const e={setHorizontalScroll:e=>this.eViewport.scrollLeft=e,setViewportHeight:e=>this.eViewport.style.height=e,setRowCtrls:({rowCtrls:e})=>this.setRowCtrls(e),setSpannedRowCtrls:e=>this.setRowCtrls(e,!0),setDomOrder:e=>{this.domOrder=e},setContainerWidth:e=>{this.eContainer.style.width=e,this.eSpannedContainer&&(this.eSpannedContainer.style.width=e)},setOffsetTop:e=>{const t=`translateY(${e})`;this.eContainer.style.transform=t,this.eSpannedContainer&&(this.eSpannedContainer.style.transform=t)}};this.createManagedBean(new s.RowContainerCtrl(this.name)).setComp(e,this.eContainer,this.eSpannedContainer,this.eViewport)}destroy(){this.setRowCtrls([]),this.setRowCtrls([],!0),super.destroy(),this.lastPlacedElement=null}setRowCtrls(e,t){const{beans:i,options:o}=this,r=t?this.eSpannedContainer:this.eContainer,s=t?{...this.rowCompsWithSpan}:{...this.rowCompsNoSpan},a={};t?this.rowCompsWithSpan=a:this.rowCompsNoSpan=a,this.lastPlacedElement=null;const l=[];for(const t of e){const e=t.instanceId,r=s[e];let c;if(r)c=r,delete s[e];else{if(!t.rowNode.displayed)continue;c=new n.RowComp(t,i,o.type)}a[e]=c,l.push([c,!r])}this.removeOldRows(Object.values(s),r),this.addRowNodes(l,r)}addRowNodes(e,t){const{domOrder:i}=this;for(const[n,o]of e){const e=n.getGui();i?this.ensureDomOrder(e,t):o&&t.appendChild(e)}}removeOldRows(e,t){for(const i of e)t.removeChild(i.getGui()),i.destroy()}ensureDomOrder(e,t){(0,o._ensureDomOrder)(t,e,this.lastPlacedElement),this.lastPlacedElement=e}}t.RowContainerComp=a,t.RowContainerSelector={selector:"AG-ROW-CONTAINER",component:a}},8115:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowContainerCtrl=t._getRowContainerOptions=t._getRowSpanContainerClass=t._getRowContainerClass=t._getRowViewportClass=void 0;const n=i(8731),o=i(7274),r=i(3507),s=i(2218),a=i(5858),l=i(2625),c=i(9622),d=e=>e.topRowCtrls,u=e=>e.getStickyTopRowCtrls(),h=e=>e.getStickyBottomRowCtrls(),p=e=>e.bottomRowCtrls,g=e=>e.allRowCtrls,f=e=>e.getCtrls("top"),m=e=>e.getCtrls("center"),v=e=>e.getCtrls("bottom"),b={center:{type:"center",name:"center-cols",getRowCtrls:g,getSpannedRowCtrls:m},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:g,getSpannedRowCtrls:m},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:g,getSpannedRowCtrls:m},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:g},topCenter:{type:"center",name:"floating-top",getRowCtrls:d,getSpannedRowCtrls:f},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:d,getSpannedRowCtrls:f},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:d,getSpannedRowCtrls:f},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:d},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:u},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:u},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:u},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:u},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:h},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:h},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:h},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:h},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:p,getSpannedRowCtrls:v},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:p,getSpannedRowCtrls:v},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:p,getSpannedRowCtrls:v},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:p}};function y(e){return b[e]}t._getRowViewportClass=function(e){return`ag-${y(e).name}-viewport`},t._getRowContainerClass=function(e){const t=y(e);return t.container??`ag-${t.name}-container`},t._getRowSpanContainerClass=function(e){return`ag-${y(e).name}-spanned-cells-container`},t._getRowContainerOptions=y;const w=["center","left","right","fullWidth"],C=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],_=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],S=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],x=["stickyTopCenter","stickyTopLeft","stickyTopRight"],A=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],E=[...x,"stickyTopFullWidth",...A,"stickyBottomFullWidth"],T=["topCenter","topLeft","topRight","bottomCenter","bottomLeft","bottomRight","center","left","right",...x,...A];class k extends n.BeanStub{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=y(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new a.ViewportSizeFeature(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,i,n){this.comp=e,this.eContainer=t,this.eSpannedContainer=i,this.eViewport=n,this.createManagedBean(new l.RowContainerEventsFeature(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:o,rangeSvc:r}=this.beans,a=()=>this.onPinnedWidthChanged();this.forContainers(_,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(o?.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:a})}),this.forContainers(S,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(o?.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:a})}),this.forContainers(w,()=>this.createManagedBean(new c.SetHeightFeature(this.eContainer,"center"===this.name?n:void 0))),r&&this.forContainers(T,()=>this.createManagedBean(r.createDragListenerFeature(this.eContainer))),this.forContainers(C,()=>this.createManagedBean(new s.CenterWidthFeature(e=>this.comp.setContainerWidth(`${e}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){const{spannedRowRenderer:e,gos:t}=this.beans;this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{const t=this.options.getSpannedRowCtrls(e);t&&this.comp.setSpannedRowCtrls(t,!1)}})}listenOnDomOrder(){if(E.indexOf(this.name)>=0)return void this.comp.setDomOrder(!0);const e=()=>{const e=this.gos.get("ensureDomOrder"),t=(0,o._isDomLayout)(this.gos,"print");this.comp.setDomOrder(e||t)};this.addManagedPropertyListener("domLayout",e),e()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=t=>{e.dragging&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return(0,r._getInnerWidth)(this.eViewport)}getCenterViewportScrollLeft(){return(0,r._getScrollLeft)(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=(0,r._observeResize)(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return(0,r._isInDOM)(this.eViewport)}getViewportScrollLeft(){return(0,r._getScrollLeft)(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||(0,r._isHorizontalScrollShowing)(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){(0,r._setScrollLeft)(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(null!=this.options.pinnedType)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||0===t.length)return void this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});const i=(0,o._isDomLayout)(this.gos,"print"),n=this.gos.get("embedFullWidthRows")||i,r=t.filter(e=>{const t=e.isFullWidth();return this.options.fullWidth?!n&&t:n||!t});this.comp.setRowCtrls({rowCtrls:r,useFlushSync:e})}}t.RowContainerCtrl=k},2625:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowContainerEventsFeature=void 0;const n=i(9853),o=i(8731),r=i(7274),s=i(814),a=i(7632),l=i(2979),c=i(6466),d=i(4009),u=i(8399);class h extends o.BeanStub{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.beans.touchSvc?.mockRowContextMenu(this)}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",(0,l._isEventSupported)("touchstart")?"touchstart":"mousedown"].forEach(e=>{const t=this.processMouseEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})})}processMouseEvent(e,t){if(!(0,u._isEventFromThisGrid)(this.gos,t)||(0,l._isStopPropagationForAgGrid)(t))return;const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);"contextmenu"===e?(i?.column&&i.dispatchCellContextMenuEvent(t),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(t,void 0,n,i)):(i&&i.onMouseEvent(e,t),n&&n.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:(0,s._getCellCtrlForEventTarget)(t,e),rowCtrl:(0,l._getCtrlForEventTarget)(t,e,a.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):n&&n.isFullWidth()&&this.processFullWidthRowKeyboardEvent(n,e,t))}processCellKeyboardEvent(e,t,i){const{rowNode:n,column:o,editing:r}=e;(0,c._isUserSuppressingKeyboardEvent)(this.gos,i,n,o,r)||"keydown"!==t||(!r&&this.beans.navigation?.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.editing),(0,c._isEventFromPrintableCharacter)(i)&&e.processCharacter(i)),"keydown"===t&&this.eventSvc.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){const{rowNode:o}=e,{focusSvc:r,navigation:s}=this.beans,a=r.getFocusedCell(),l=a&&a.column;if(!(0,c._isUserSuppressingKeyboardEvent)(this.gos,i,o,l,!1)){const o=i.key;if("keydown"===t)switch(o){case n.KeyCode.PAGE_HOME:case n.KeyCode.PAGE_END:case n.KeyCode.PAGE_UP:case n.KeyCode.PAGE_DOWN:s?.handlePageScrollingKey(i,!0);break;case n.KeyCode.UP:case n.KeyCode.DOWN:e.onKeyboardNavigate(i);break;case n.KeyCode.TAB:e.onTabKeyDown(i)}}"keydown"===t&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey)return;if(t)return;if(!(0,u._isEventFromThisGrid)(this.gos,e))return;const i=function(e){const{keyCode:t}=e;let i;switch(t){case 65:i=n.KeyCode.A;break;case 67:i=n.KeyCode.C;break;case 86:i=n.KeyCode.V;break;case 68:i=n.KeyCode.D;break;case 90:i=n.KeyCode.Z;break;case 89:i=n.KeyCode.Y;break;default:i=e.code}return i}(e),{clipboardSvc:o,undoRedo:r}=this.beans;return i===n.KeyCode.A?this.onCtrlAndA(e):i===n.KeyCode.C?this.onCtrlAndC(o,e):i===n.KeyCode.D?this.onCtrlAndD(o,e):i===n.KeyCode.V?this.onCtrlAndV(o,e):i===n.KeyCode.X?this.onCtrlAndX(o,e):i===n.KeyCode.Y?this.onCtrlAndY(r):i===n.KeyCode.Z?this.onCtrlAndZ(r,e):void 0}onCtrlAndA(e){const{beans:{rowModel:t,rangeSvc:i,selectionSvc:n},gos:o}=this;i&&(0,r._isCellSelectionEnabled)(o)&&t.isRowsToRender()?(0,d._selectAllCells)(this.beans):n&&n?.selectAllRowNodes({source:"keyboardSelectAll",selectAll:(0,r._getSelectAll)(o)}),e.preventDefault()}onCtrlAndC(e,t){if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);i?.editing||n?.editing||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);i?.editing||n?.editing||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);i?.editing||n?.editing||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){this.gos.get("undoRedoCellEditing")&&e&&(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){e?.redo("ui")}}t.RowContainerEventsFeature=h},9622:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SetHeightFeature=void 0;const n=i(8731);class o extends n.BeanStub{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,i=null!=t?`${t}px`:"";this.eContainer.style.height=i,this.eViewport&&(this.eViewport.style.height=i)}}t.SetHeightFeature=o},2865:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SetPinnedWidthFeature=void 0;const n=i(8731),o=i(3507);class r extends n.BeanStub{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[(this.isLeft?"left":"right")+"PinnedWidthChanged"]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;for(const i of this.elements)i&&((0,o._setDisplayed)(i,t),(0,o._setFixedWidth)(i,e))}}t.SetPinnedWidthFeature=r},8913:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollVisibleService=void 0;const n=i(8731),o=i(8667);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation:e}=this;e?.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const e=this.ctrlsSvc.get("center");if(!e||this.colAnimation?.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(null==this.scrollbarWidth){const e=this.gos.get("scrollbarWidth"),t="number"==typeof e&&e>=0?e:(0,o._getScrollbarWidth)();null!=t&&(this.scrollbarWidth=t,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}}t.ScrollVisibleService=r},5858:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ViewportSizeFeature=void 0;const n=i(8731),o=i(2612),r=i(3507);class s extends n.BeanStub{wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:i}=this,n=()=>{(0,o._requestAnimationFrame)(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(n),i.registerBodyViewportResizeListener(n)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;e?.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const i=this.centerContainerCtrl.getCenterWidth();i!==this.centerWidth&&(this.centerWidth=i,t?.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.eBodyViewport,t=(0,r._getInnerHeight)(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}}t.ViewportSizeFeature=s},1678:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridComp=void 0;const n=i(2006),o=i(9360),r=i(3507),s=i(2043),a=i(8020),l=i(8332),c=i(7600);class d extends l.TabGuardComp{constructor(e){super(),this.gridBody=a.RefPlaceholder,this.sideBar=a.RefPlaceholder,this.pagination=a.RefPlaceholder,this.rootWrapperBody=a.RefPlaceholder,this.eGridDiv=e}postConstruct(){const e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:e=>this.addCssClass(e),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:e=>{this.getGui().style.userSelect=null!=e?e:"",this.getGui().style.webkitUserSelect=null!=e?e:""},setCursor:e=>{this.getGui().style.cursor=null!=e?e:""}},t=this.createManagedBean(new c.GridCtrl),i=t.getOptionalSelectors(),o=this.createTemplate(i),r=[n.GridBodySelector,...Object.values(i).filter(e=>!!e)];this.setTemplate(o,r),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:e=>t.focusInnerElement(e),forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:()=>!t.isFocusable()})}insertGridIntoDom(){const e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),(0,s._logIfDebug)(this.gos,"Grid removed from DOM")})}updateLayoutClasses(e,t){const i=this.rootWrapperBody.classList,{AUTO_HEIGHT:n,NORMAL:r,PRINT:s}=o.LayoutCssClasses,{autoHeight:a,normal:l,print:c}=t;i.toggle(n,a),i.toggle(r,l),i.toggle(s,c),this.addOrRemoveCssClass(n,a),this.addOrRemoveCssClass(r,l),this.addOrRemoveCssClass(s,c)}createTemplate(e){const t=e.gridHeaderDropZonesSelector?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",i=e.sideBarSelector?'<ag-side-bar data-ref="sideBar"></ag-side-bar>':"",n=e.statusBarSelector?"<ag-status-bar></ag-status-bar>":"",o=e.watermarkSelector?"<ag-watermark></ag-watermark>":"";return`<div class="ag-root-wrapper" role="presentation">\n                ${t}\n                <div class="ag-root-wrapper-body" data-ref="rootWrapperBody" role="presentation">\n                    <ag-grid-body data-ref="gridBody"></ag-grid-body>\n                    ${i}\n                </div>\n                ${n}\n                ${e.paginationSelector?'<ag-pagination data-ref="pagination"></ag-pagination>':""}\n                ${o}\n            </div>`}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){e||!this.pagination?.isDisplayed()?super.forceFocusOutOfContainer(e):this.pagination.forceFocusOutOfContainer(e)}getFocusableContainers(){const e=[this.gridBody];return[this.sideBar,this.pagination].forEach(t=>{t&&e.push(t)}),e.filter(e=>(0,r._isVisible)(e.getGui()))}}t.GridComp=d},7600:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridCtrl=void 0;const n=i(8731),o=i(8399),r=i(7274),s=i(9360),a=i(1502),l=i(3507),c=i(2331);class d extends n.BeanStub{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDrop:n,ctrlsSvc:r}=this.beans;n?.registerGridDropTarget(()=>this.eGui,this),(0,o._stampTopLevelGridCompWithGridInstance)(this.gos,t),this.createManagedBean(new s.LayoutFeature(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const a=(0,l._observeResize)(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>a()),r.register("gridCtrl",this)}isDetailGrid(){const e=(0,c._findTabbableParent)(this.getGui());return e?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){const e=this.beans;return{paginationSelector:e.pagination?.getPaginationSelector(),gridHeaderDropZonesSelector:e.registry.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:e.sideBar?.getSelector(),statusBarSelector:e.registry?.getSelector("AG-STATUS-BAR"),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:n}=this.getNextFocusableIndex(t,e);if(n<0||n>=t.length)return!1;if(0===n){if(i>0){const{visibleCols:e,focusSvc:t}=this.beans,i=e.allCols,n=(0,a._last)(i);if(t.focusGridView({column:n,backwards:!0}))return!0}return!1}return this.focusContainer(t[n],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;const i=this.getFocusableContainers(),{focusSvc:n,visibleCols:o}=this.beans,r=o.allCols;if(e){if(i.length>1)return this.focusContainer((0,a._last)(i),e);const t=(0,a._last)(r);if(n.focusGridView({column:t,backwards:e}))return!0}if(0===this.gos.get("headerHeight")||(0,c._isHeaderFocusSuppressed)(this.beans)){if(n.focusGridView({column:r[0],backwards:e}))return!0;for(let t=1;t<i.length;t++)if((0,c._focusInto)(i[t].getGui(),e))return!0;return!1}return n.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){const t=this.view.getFocusableContainers(),{nextIndex:i,indexWithFocus:n}=this.getNextFocusableIndex(t,e);if(-1===n||i<0||i>=t.length)return;const o=t[i];o.setAllowFocus?.(!0),setTimeout(()=>{o.setAllowFocus?.(!1)})}isFocusable(){const e=this.beans;return!(0,c._isCellFocusSuppressed)(e)||!(0,c._isHeaderFocusSuppressed)(e)||!!e.sideBar?.comp?.isDisplayed()}getNextFocusableIndex(e,t){const i=(0,r._getActiveDomElement)(this.beans),n=e.findIndex(e=>e.getGui().contains(i));return{indexWithFocus:n,nextIndex:n+(t?-1:1)}}focusContainer(e,t){e.setAllowFocus?.(!0);const i=(0,c._focusInto)(e.getGui(),t,!1,!0);return e.setAllowFocus?.(!1),i}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}}t.GridCtrl=d},1978:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CommunityCoreModule=void 0;const n=i(3907),o=i(9875),r=i(4074),s=i(6924),a=i(6041),l=i(2986),c=i(2027),d=i(8997),u=i(5034),h=i(6869),p=i(8414),g=i(4110),f=i(1585),m=i(20),v=i(9024),b=i(8778),y=i(5626),w=i(8913),C=i(3888),_=i(8484),S=i(8078),x=i(4011),A=i(3705),E=i(928),T=i(2550),k=i(3003),D=i(6219),M=i(3433),P=i(5366),R=i(7109),I=i(557),O=i(6620),N=i(7711),L=i(6431),F=i(5736),$=i(7205);t.CommunityCoreModule={moduleName:"CommunityCore",version:$.VERSION,beans:[C.GridDestroyService,n.ApiFunctionService,g.Registry,f.UserComponentFactory,R.RowContainerHeightService,h.VisibleColsService,b.EventService,_.GridOptionsService,l.ColumnModel,k.PageBoundsService,T.PageBoundsListener,I.RowRenderer,F.ValueService,y.FocusService,v.Environment,w.ScrollVisibleService,m.CtrlsService,N.SyncService,d.ColumnNameService,u.ColumnViewportService],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:o.getGridId,destroy:o.destroy,isDestroyed:o.isDestroyed,getGridOption:o.getGridOption,setGridOption:o.setGridOption,updateGridOptions:o.updateGridOptions},dependsOn:[c.DataTypeModule,r.ColumnMoveModule,s.ColumnResizeModule,O.SortModule,S.ColumnHeaderCompModule,a.ColumnGroupModule,S.ColumnGroupHeaderCompModule,P.OverlayModule,L.ChangeDetectionModule,x.AnimationFrameModule,E.KeyboardNavigationModule,D.PinnedColumnModule,M.AriaModule,A.TouchModule,p.CellRendererFunctionModule,c.ColumnFlexModule,L.ExpressionModule]}},3888:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridDestroyService=void 0;const n=i(8731);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){if(this.destroyCalled)return;const{stateSvc:e,ctrlsSvc:t,context:i}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:e?.getState()??{}}),this.destroyCalled=!0,t.get("gridCtrl")?.destroyGridUi(),i.destroy(),super.destroy()}}t.GridDestroyService=o},5266:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.GRID_OPTION_DEFAULTS=void 0,t.GRID_OPTION_DEFAULTS={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"\t",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,rowNumbers:!1}},2891:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_GRID_OPTION_KEYS=void 0,t.INITIAL_GRID_OPTION_KEYS={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0}},8484:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridOptionsService=void 0;const n=i(8731),o=i(7968),r=i(5266),s=i(7274),a=i(5889),l=i(2132),c=i(2043),d=i(4422),u=i(7764);let h=0,p=0;class g extends n.BeanStub{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.gridInstanceId=p++,this.propEventSvc=new a.LocalEventService,this.globalEventHandlerFactory=e=>(t,i)=>{if(!this.isAlive())return;const n=o.ALWAYS_SYNC_GLOBAL_EVENTS.has(t);if(n&&!e||!n&&e)return;const r=(0,s._getCallbackForEvent)(t),a=this.gridOptions[r];"function"==typeof a&&this.beans.frameworkOverrides.wrapOutgoing(()=>{a(i)})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"gridOptionsUpdated"})}})}get(e){return this.gridOptions[e]??r.GRID_OPTION_DEFAULTS[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return(0,d._exists)(this.gridOptions[e])}mergeGridCommonParams(e){return e?t=>e(this.addGridCommonParams(t)):e}updateGridOptions({options:e,force:t,source:i="api"}){const n={id:h++,properties:[]},o=[],{gridOptions:r,validation:s}=this;for(const a of Object.keys(e)){const l=e[a];s?.warnOnInitialPropertyUpdate(i,a);const c=t||"object"==typeof l&&"api"===i,d=r[a];if(c||d!==l){r[a]=l;const e={type:a,currentValue:l,previousValue:d,changeSet:n,source:i};o.push(e)}}s?.processGridOptions(this.gridOptions),n.properties=o.map(e=>e.type),o.forEach(e=>{(0,c._logIfDebug)(this,`Updated property ${e.type} from`,e.previousValue," to ",e.currentValue),this.propEventSvc.dispatchEvent(e)})}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addGridCommonParams(e){return e.api=this.api,e.context=this.gridOptionsContext,e}assertModuleRegistered(e,t){const i=Array.isArray(e)?e.some(e=>this.isModuleRegistered(e)):this.isModuleRegistered(e);return i||(0,u._error)(200,{...this.getModuleErrorParams(),moduleName:e,reasonOrId:t}),i}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:(0,l._areModulesGridScoped)(),rowModelType:this.get("rowModelType"),isUmd:(0,l._isUmd)()}}isModuleRegistered(e){return(0,l._isModuleRegistered)(e,this.gridId,this.get("rowModelType"))}}t.GridOptionsService=g},7274:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._isLegacyMenuEnabled=t._isSetFilterByDefault=t._getMasterSelects=t._getGroupSelectsDescendants=t._getSelectAll=t._getGroupSelection=t._getEnableSelectionWithoutKeys=t._isMultiRowSelection=t._getRowSelectionMode=t._getIsRowSelectable=t._getEnableDeselection=t._getEnableSelection=t._getFillHandle=t._isCellSelectionEnabled=t._getSuppressMultiRanges=t._isUsingNewCellSelectionAPI=t._isUsingNewRowSelectionAPI=t._getHideDisabledCheckboxes=t._getCheckboxLocation=t._getHeaderCheckbox=t._getCheckboxes=t._shouldUpdateColVisibilityAfterGroup=t._getMaxConcurrentDatasourceRequests=t._canSkipShowingRowGroup=t._getRowIdCallback=t._isGroupUseEntireRow=t._isGroupMultiAutoColumn=t._getGroupTotalRowCallback=t._getGrandTotalRow=t._getGroupAggFiltering=t._isColumnsSortingCoupledToGroup=t._isGroupRowsSticky=t._isAnimateRows=t._isNothingFocused=t._anchorElementToMouseMoveEvent=t._getPageBody=t._getActiveDomElement=t._getRootNode=t._getWindow=t._getDocument=t._setDomData=t._getDomData=t._getRowHeightAsNumber=t._getRowHeightForNode=t._shouldMaintainColumnOrder=t._isGetRowHeightFunction=t._isRowSelection=t._isDomLayout=t._isServerSideRowModel=t._isClientSideRowModel=void 0,t._addGridCommonParams=t._processOnChange=t._combineAttributesAndGridOptions=t._getCallbackForEvent=t._areAdditionalColumnMenuItemsEnabled=t._isColumnMenuAnchoringEnabled=void 0;const n=i(3507),o=i(4422),r=i(7764);function s(e,t){return e.get("rowModelType")===t}function a(e,t){return e.get("domLayout")===t}function l(e){return"function"==typeof e.get("getRowHeight")}function c(e){return!isNaN(e)&&"number"==typeof e&&isFinite(e)}function d(e){const{gos:t,eGridDiv:i}=e;let n=null;const r=t.get("getDocument");return r&&(0,o._exists)(r)?n=r():i&&(n=i.ownerDocument),n&&(0,o._exists)(n)?n:document}function u(e){return e.eGridDiv.getRootNode()}function h(e){return u(e).activeElement}function p(e){let t=null,i=null;try{t=d(e).fullscreenElement}catch(e){}finally{t||(t=u(e));i=t.querySelector("body")||(t instanceof ShadowRoot?t:t instanceof Document?t?.documentElement:t)}return i}function g(e){const t=e.get("rowSelection")??"single";if("string"==typeof t){const t=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return(!t||!i)&&(t?"enableDeselection":!i||"enableSelection")}return("singleRow"===t.mode||"multiRow"===t.mode)&&(t.enableClickSelection??!1)}function f(e){const t="beanName"in e&&"gos"===e.beanName?e.get("rowSelection"):e.rowSelection;if("string"==typeof t)switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(t?.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function m(e){const t=e.get("rowSelection");if("string"==typeof t){const t=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return t&&i?"filteredDescendants":t?"descendants":"self"}return"multiRow"===t?.mode?t.groupSelects:void 0}function v(e){return"legacy"===e.get("columnMenu")}t._isClientSideRowModel=function(e,t){return s(e,"clientSide")},t._isServerSideRowModel=function(e,t){return s(e,"serverSide")},t._isDomLayout=a,t._isRowSelection=function(e){return void 0!==f(e)},t._isGetRowHeightFunction=l,t._shouldMaintainColumnOrder=function(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")},t._getRowHeightForNode=function(e,t,i=!1,n){const{gos:o,environment:s}=e;if(null==n&&(n=s.getDefaultRowHeight()),l(o)){if(i)return{height:n,estimated:!0};const e={node:t,data:t.data},s=o.getCallback("getRowHeight")(e);if(c(s))return 0===s&&(0,r._warn)(23),{height:Math.max(1,s),estimated:!1}}if(t.detail&&o.get("masterDetail"))return function(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return c(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}(o);const a=o.get("rowHeight");return{height:a&&c(a)?a:n,estimated:!1}},t._getRowHeightAsNumber=function(e){const{environment:t,gos:i}=e,n=i.get("rowHeight");if(!n||(0,o._missing)(n))return t.getDefaultRowHeight();const s=t.refreshRowHeightVariable();return-1!==s?s:((0,r._warn)(24),t.getDefaultRowHeight())},t._getDomData=function(e,t,i){const n=t[e.getDomDataKey()];return n?n[i]:void 0},t._setDomData=function(e,t,i,n){const r=e.getDomDataKey();let s=t[r];(0,o._missing)(s)&&(s={},t[r]=s),s[i]=n},t._getDocument=d,t._getWindow=function(e){return d(e).defaultView||window},t._getRootNode=u,t._getActiveDomElement=h,t._getPageBody=p,t._anchorElementToMouseMoveEvent=function(e,t,i){const o=e.getBoundingClientRect().height,r=function(e){const t=p(e);return t?.clientWidth??(window.innerHeight||-1)}(i)-2,s=function(e){const t=p(e);return t?.clientHeight??(window.innerHeight||-1)}(i)-2;if(!e.offsetParent)return;const a=(0,n._getElementRectWithOffset)(e.offsetParent),{clientY:l,clientX:c}=t;let u=l-a.top-o/2,h=c-a.left-10;const g=d(i),f=g.defaultView||window,m=f.pageYOffset||g.documentElement.scrollTop,v=f.pageXOffset||g.documentElement.scrollLeft;r>0&&h+e.clientWidth>r+v&&(h=r+v-e.clientWidth),h<0&&(h=0),s>0&&u+e.clientHeight>s+m&&(u=s+m-e.clientHeight),u<0&&(u=0),e.style.left=`${h}px`,e.style.top=`${u}px`},t._isNothingFocused=function(e){const t=d(e),i=h(e);return null===i||i===t.body},t._isAnimateRows=function(e){return!e.get("ensureDomOrder")&&e.get("animateRows")},t._isGroupRowsSticky=function(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||a(e,"print"))},t._isColumnsSortingCoupledToGroup=function(e){const t=e.get("autoGroupColumnDef");return!t?.comparator&&!e.get("treeData")},t._getGroupAggFiltering=function(e){const t=e.get("groupAggFiltering");return"function"==typeof t?e.getCallback("groupAggFiltering"):!0===t?()=>!0:void 0},t._getGrandTotalRow=function(e){return e.get("grandTotalRow")},t._getGroupTotalRowCallback=function(e){const t=e.get("groupTotalRow");return"function"==typeof t?e.getCallback("groupTotalRow"):()=>t??void 0},t._isGroupMultiAutoColumn=function(e){return e.exists("groupDisplayType")?"multipleColumns"===e.get("groupDisplayType"):e.get("groupHideOpenParents")},t._isGroupUseEntireRow=function(e,t){return!t&&"groupRows"===e.get("groupDisplayType")},t._getRowIdCallback=function(e){const t=e.getCallback("getRowId");return void 0===t?t:e=>{let i=t(e);return"string"!=typeof i&&((0,r._warn)(25,{id:i}),i=String(i)),i}},t._canSkipShowingRowGroup=function(e,t){const i=e.get("groupHideParentOfSingleChild");return!0===i||!("leafGroupsOnly"!==i||!t.leafGroup)||!!e.get("groupRemoveSingleChildren")||!(!e.get("groupRemoveLowestSingleChildren")||!t.leafGroup)},t._getMaxConcurrentDatasourceRequests=function(e){const t=e.get("maxConcurrentDatasourceRequests");return t>0?t:void 0},t._shouldUpdateColVisibilityAfterGroup=function(e,t){const i=e.get("suppressGroupChangesColumnVisibility");if(!0===i)return!1;if(t&&"suppressHideOnGroup"===i)return!1;if(!t&&"suppressShowOnUngroup"===i)return!1;const n=e.get("suppressRowGroupHidesColumns");if(t&&!0===n)return!1;const o=e.get("suppressMakeColumnVisibleAfterUnGroup");return!(!t&&!0===o)},t._getCheckboxes=function(e){return e?.checkboxes??!0},t._getHeaderCheckbox=function(e){return"multiRow"===e?.mode&&(e.headerCheckbox??!0)},t._getCheckboxLocation=function(e){if("object"==typeof e)return e.checkboxLocation??"selectionColumn"},t._getHideDisabledCheckboxes=function(e){return e?.hideDisabledCheckboxes??!1},t._isUsingNewRowSelectionAPI=function(e){return"string"!=typeof e.get("rowSelection")},t._isUsingNewCellSelectionAPI=function(e){return void 0!==e.get("cellSelection")},t._getSuppressMultiRanges=function(e){const t=e.get("cellSelection");return void 0!==t?"boolean"!=typeof t&&(t?.suppressMultiRanges??!1):e.get("suppressMultiRangeSelection")},t._isCellSelectionEnabled=function(e){const t=e.get("cellSelection");return void 0!==t?!!t:e.get("enableRangeSelection")},t._getFillHandle=function(e){const t=e.get("cellSelection");return void 0!==t?"boolean"!=typeof t&&"fill"===t.handle?.mode?t.handle:void 0:{mode:"fill",setFillValue:e.get("fillOperation"),direction:e.get("fillHandleDirection"),suppressClearOnFillReduction:e.get("suppressClearOnFillReduction")}},t._getEnableSelection=function(e){const t=g(e);return!0===t||"enableSelection"===t},t._getEnableDeselection=function(e){const t=g(e);return!0===t||"enableDeselection"===t},t._getIsRowSelectable=function(e){const t=e.get("rowSelection");return"string"==typeof t?e.get("isRowSelectable"):t?.isRowSelectable},t._getRowSelectionMode=f,t._isMultiRowSelection=function(e){return"multiRow"===f(e)},t._getEnableSelectionWithoutKeys=function(e){const t=e.get("rowSelection");return"string"==typeof t?e.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1},t._getGroupSelection=m,t._getSelectAll=function(e,t=!0){const i=e.get("rowSelection");return"object"!=typeof i?t?"all":void 0:"multiRow"===i.mode?i.selectAll:"all"},t._getGroupSelectsDescendants=function(e){const t=m(e);return"descendants"===t||"filteredDescendants"===t},t._getMasterSelects=function(e){const t=e.get("rowSelection");return"object"==typeof t&&t.masterSelects||"self"},t._isSetFilterByDefault=function(e){return e.isModuleRegistered("SetFilter")&&!e.get("suppressSetFilterByDefault")},t._isLegacyMenuEnabled=v,t._isColumnMenuAnchoringEnabled=function(e){return!v(e)},t._areAdditionalColumnMenuItemsEnabled=function(e){return"new"===e.get("columnMenu")},t._getCallbackForEvent=function(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)},t._combineAttributesAndGridOptions=function(e,t,i){"object"!=typeof e&&(e={});const n={...e};return i.forEach(e=>{const i=t[e];void 0!==i&&(n[e]=i)}),n},t._processOnChange=function(e,t){if(!e)return;const i={};let n=!1;if(Object.keys(e).forEach(t=>{i[t]=e[t],n=!0}),!n)return;const o={type:"gridOptionsChanged",options:i};t.dispatchEvent(o);const r={type:"componentStateChanged",...i};t.dispatchEvent(r)},t._addGridCommonParams=function(e,t){return e.addGridCommonParams(t)}},9860:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractHeaderCellComp=void 0;const n=i(8020);class o extends n.Component{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}}t.AbstractHeaderCellComp=o},3534:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractHeaderCellCtrl=t.DOM_DATA_KEY_HEADER_CTRL=void 0;const n=i(8731),o=i(7274),r=i(2612),s=i(5230),a=i(3507),l=i(2331),c=i(4422),d=i(9853),u=i(1295);let h=0;t.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";class p extends n.BeanStub{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.instanceId=e.getUniqueId()+"-"+h++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}shouldStopEventPropagation(e){const{headerRowIndex:t,column:i}=this.beans.focusSvc.focusedHeader,n=i.getDefinition(),r=n&&n.suppressHeaderKeyboardEvent;return!!(0,c._exists)(r)&&!!r((0,o._addGridCommonParams)(this.gos,{colDef:n,column:i,headerRowIndex:t,event:e}))}getWrapperHasFocus(){return(0,o._getActiveDomElement)(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const e=this.column.getDefinition();if(!e)return;const{headerStyle:t}=e;let i;i="function"==typeof t?t(this.getHeaderClassParams()):t,i&&this.comp.setUserStyles(i)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:i,compBean:n}=e,{beans:s}=this,l=e=>{if(!this.isAlive()||!n.isAlive())return;const{paddingTop:i,paddingBottom:c,borderBottomWidth:d,borderTopWidth:u}=(0,a._getElementSize)(this.eGui),h=i+c+d+u,p=t.offsetHeight+h;if(e<5){const i=(0,o._getDocument)(s);if(!i||!i.contains(t)||0==p)return void(0,r._requestAnimationFrame)(s,()=>l(e+1))}this.setColHeaderHeight(this.column,p)};let c,d=!1;const u=()=>{const e=this.column.isAutoHeaderHeight();e&&!d&&h(),!e&&d&&p()},h=()=>{d=!0,l(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),c=(0,a._observeResize)(this.beans,t,()=>l(0))},p=()=>{d=!1,c&&c(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),c=void 0};u(),n.addDestroyFunc(()=>p()),n.addManagedListeners(this.column,{widthChanged:()=>d&&l(0)}),n.addManagedEventListeners({sortChanged:()=>{d&&window.setTimeout(()=>l(0))}}),i&&i(u)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:i,eGui:n}=this;e&&t&&n&&((0,u.refreshFirstAndLastStyles)(e,t,i.visibleCols),(0,s._setAriaColIndex)(n,i.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=(0,l._isHeaderFocusSuppressed)(this.beans);this.eGui&&(0,a._addOrRemoveAttribute)(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){const t=(0,o._getActiveDomElement)(this.beans),i=e.key===d.KeyCode.LEFT||e.key===d.KeyCode.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey)return;if((this.isResizing||i)&&(e.preventDefault(),e.stopImmediatePropagation()),!i)return;const n=e.key===d.KeyCode.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const t=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(t,e.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(n)}moveHeader(e){this.beans.colMoves?.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:i}=this.beans;return i?i.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:i}=this;let n=e.key===d.KeyCode.LEFT!==t.get("enableRtl");const o=i.getPinned(),r=t.get("enableRtl");return o&&r!==("right"===o)&&(n=!n),(n?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case d.KeyCode.PAGE_DOWN:case d.KeyCode.PAGE_UP:case d.KeyCode.PAGE_HOME:case d.KeyCode.PAGE_END:t&&e.preventDefault()}}addDomData(e){const i=t.DOM_DATA_KEY_HEADER_CTRL,{eGui:n,gos:r}=this;(0,o._setDomData)(r,n,i,this),e.addDestroyFunc(()=>(0,o._setDomData)(r,n,i,null))}focus(e){const{eGui:t}=this;return!!t&&(this.lastFocusEvent=e||null,t.focus(),!0)}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop?.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,i){const n=e??t,{menuSvc:o,gos:r}=this.beans;r.get("preventDefaultOnContextMenu")&&n.preventDefault(),o?.isHeaderContextMenuEnabled(i)&&o.showHeaderContextMenu(i,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:i}=this;e.isColumn?i.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):i.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}}t.AbstractHeaderCellCtrl=p},1906:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderCellComp=void 0;const n=i(5230),o=i(3507),r=i(8020),s=i(9860);class a extends s.AbstractHeaderCellComp{constructor(e){super('<div class="ag-header-cell" role="columnheader">\n            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>\n        </div>',e),this.eResize=r.RefPlaceholder,this.eHeaderCompWrapper=r.RefPlaceholder,this.headerCompVersion=0}postConstruct(){const e=this.getGui();var t,i;t="col-id",null!=(i=this.ctrl.column.getColId())&&""!=i?e.setAttribute(t,i):e.removeAttribute(t);const r={setWidth:t=>e.style.width=t,addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setUserStyles:t=>(0,o._addStylesToElement)(e,t),setAriaSort:t=>t?(0,n._setAriaSort)(e,t):(0,n._removeAriaSort)(e),setUserCompDetails:e=>this.setUserCompDetails(e),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(r,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0);const s=this.ctrl.getSelectAllGui();s&&this.eResize.insertAdjacentElement("afterend",s)}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;const t=this.headerCompVersion;e.newAgStackInstance().then(e=>this.afterCompCreated(t,e))}afterCompCreated(e,t){e==this.headerCompVersion&&this.isAlive()?(this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())):this.destroyBean(t)}}t.HeaderCellComp=a},260:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderCellCtrl=void 0;const n=i(3789),o=i(2036),r=i(9853),s=i(7274),a=i(2783),l=i(8703),c=i(5230),d=i(3507),u=i(2331),h=i(1772),p=i(1323),g=i(3534),f=i(1295);class m extends g.AbstractHeaderCellCtrl{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}setComp(e,t,i,o,r){this.comp=e;const{rowCtrl:s,column:a,beans:c}=this,{colResize:u,context:p,colHover:g,rangeSvc:f}=c,m=(0,n.setupCompBean)(this,p,r);this.setGui(t,m),this.updateState(),this.setupWidth(m),this.setupMovingCss(m),this.setupMenuClass(m),this.setupSortableClass(m),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:o,checkMeasuringCallback:e=>this.setRefreshFunction("measuring",e),compBean:m}),this.addColumnHoverListener(m),this.setupFilterClass(m),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(m),this.setupSelectAll(m),this.setupUserComp(),this.refreshAria(),u?this.resizeFeature=m.createManagedBean(u.createResizeFeature(s.pinned,a,i,e,this)):(0,d._setDisplayed)(i,!1),g?.createHoverFeature(m,[a],t),f?.createRangeHighlightFeature(m,a,e),m.createManagedBean(new l.SetLeftFeature(a,t,c)),m.createManagedBean(new h.ManagedFocusFeature(t,{shouldStopEventPropagation:e=>this.shouldStopEventPropagation(e),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(m),m.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),m.addManagedListeners(a,{colDefChanged:()=>this.refresh()}),m.addManagedListeners(a,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const v=()=>this.checkDisplayName();m.addManagedEventListeners({columnValueChanged:v,columnRowGroupChanged:v,columnPivotChanged:v,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),m.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){this.beans.colResize?.resizeHeader(this.column,e,t)}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.colDef;return(0,s._addGridCommonParams)(t.gos,{colDef:i,column:e,floatingFilter:!1})}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return(0,o._getHeaderCompDetails)(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:i,gos:n}=this.beans;return(0,s._addGridCommonParams)(n,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!e?.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!!i&&(!this.openFilterEnabled||(0,s._isLegacyMenuEnabled)(this.gos)),showColumnMenu:(t,i)=>{e?.showColumnMenu({column:this.column,buttonElement:t,positionBy:"button",onClosedCallback:i})},showColumnMenuAfterMouseClick:(t,i)=>{e?.showColumnMenu({column:this.column,mouseEvent:t,positionBy:"mouse",onClosedCallback:i})},showFilter:t=>{e?.showFilterMenu({column:this.column,buttonElement:t,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{t?.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,i)=>{t?.setSortForColumn(this.column,e,!!i,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(e,t)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(e,t)}})}setupSelectAll(e){const{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createManagedBean(t.createSelectAllFeature(this.column)),this.selectAllFeature.setComp(this))}getSelectAllGui(){return this.selectAllFeature?.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===r.KeyCode.SPACE&&this.selectAllFeature?.onSpaceKeyDown(e),e.key===r.KeyCode.ENTER&&this.onEnterKeyDown(e),e.key===r.KeyCode.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){e.ctrlKey||e.metaKey?this.showMenuOnKeyPress(e,!0):this.sortable&&this.beans.sortSvc?.progressSort(this.column,e.shiftKey,"uiColumnSorted")}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();v(i)&&i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),(0,u._isKeyboardMode)()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const e=()=>{const e=this.column.getColDef(),t=(0,f._getHeaderClassesFromColDef)(e,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(t),t.forEach(e=>{i.has(e)?i.delete(e):this.comp.addOrRemoveCssClass(e,!0)}),i.forEach(e=>this.comp.addOrRemoveCssClass(e,!1))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){this.dragSourceElement=e,this.removeDragSource(),e&&this.draggable&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!!e?.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=!!e?.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),Object.values(this.refreshFunctions).forEach(e=>e())}refreshHeaderComp(){const e=this.lookupUserCompDetails();e&&(null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==e.componentClass&&this.attemptHeaderCompRefresh(e.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e))}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!!t&&(!!t.refresh&&t.refresh(e))}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!(this.gos.get("suppressMovableColumns")||e.suppressMovable||e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const e=this.column.getActualWidth();this.comp.setWidth(`${e}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{this.comp?.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const e=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",e),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const e=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",e)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===a.ColumnHighlightPosition.Before,i=e===a.ColumnHighlightPosition.After;this.comp.addOrRemoveCssClass("ag-header-highlight-before",t),this.comp.addOrRemoveCssClass("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:i,beans:n}=this,o=(0,p.getGroupRowsHeight)(this.beans),r=0===o.reduce((e,t)=>e+t,0);if(i.addOrRemoveCssClass("ag-header-parent-hidden",r),!t.isSpanHeaderHeight())return e.style.removeProperty("top"),e.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),void i.addOrRemoveCssClass("ag-header-span-total",!1);const{numberOfParents:s,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",s>0);const l=(0,p.getColumnHeaderRowHeight)(n);if(0===s)return i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),void e.style.setProperty("height",`${l}px`);i.addOrRemoveCssClass("ag-header-span-total",a);let c=0;for(let e=0;e<s;e++)c+=o[o.length-1-e];e.style.setProperty("top",-c+"px"),e.style.setProperty("height",`${l+c}px`)}refreshAriaSort(){if(this.sortable){const e=this.getLocaleTextFunc(),t=this.beans.sortSvc?.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort((0,c._getAriaSortState)(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!(0,s._isLegacyMenuEnabled)(this.gos)){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){null!=t?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains((0,s._getActiveDomElement)(this.beans)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((e,t)=>"filter"===e?-1:t.charCodeAt(0)-e.charCodeAt(0)).map(e=>this.ariaDescriptionProperties.get(e)).join(". ");this.beans.ariaAnnounce?.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){this.beans.colHover?.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column)})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return v(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}}function v(e){return"function"==typeof e.getAnchorElementForMenu&&"function"==typeof e.onMenuKeyboardShortcut}t.HeaderCellCtrl=m},9270:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderComp=void 0;const n=i(2036),o=i(7274),r=i(3507),s=i(9970),a=i(7766),l=i(8020);class c extends l.Component{constructor(){super(...arguments),this.eFilter=l.RefPlaceholder,this.eFilterButton=l.RefPlaceholder,this.eSortIndicator=l.RefPlaceholder,this.eMenu=l.RefPlaceholder,this.eLabel=l.RefPlaceholder,this.eText=l.RefPlaceholder,this.eSortOrder=l.RefPlaceholder,this.eSortAsc=l.RefPlaceholder,this.eSortDesc=l.RefPlaceholder,this.eSortMixed=l.RefPlaceholder,this.eSortNone=l.RefPlaceholder,this.isLoadingInnerComponent=!1}refresh(e){const t=this.params;return this.params=e,this.workOutTemplate()==this.currentTemplate&&this.workOutShowMenu()==this.currentShowMenu&&e.enableSorting==this.currentSort&&(null==this.currentSuppressMenuHide||this.shouldSuppressMenuHide()==this.currentSuppressMenuHide)&&t.enableFilterButton==e.enableFilterButton&&t.enableFilterIcon==e.enableFilterIcon&&(this.innerHeaderComponent?this.innerHeaderComponent.refresh?.(e):this.setDisplayName(e),!0)}workOutTemplate(){const{params:e,beans:t}=this,i=e.template??`<div class="ag-cell-label-container" role="presentation">\n        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>\n        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">\n            <span data-ref="eText" class="ag-header-cell-text"></span>\n            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n            ${t.sortSvc?'<ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>':""}\n        </div>\n    </div>`;return i?.trim?i.trim():i}init(e){this.params=e;const{sortSvc:t,touchSvc:i,rowNumbersSvc:n,userCompFactory:o}=this.beans;this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,t?[t.getSortIndicatorSelector()]:void 0),i?.setupForHeader(this),this.setMenu(),this.setupSort(),n?.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(o,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const i=(0,n._getInnerHeaderCompDetails)(e,t,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then(e=>{this.isLoadingInnerComponent=!1,e&&(this.isAlive()?(this.innerHeaderComponent=e,this.eText.appendChild(e.getGui())):this.destroyBean(e))}))}setDisplayName(e){const{displayName:t}=e,i=this.currentDisplayName;if(this.currentDisplayName=t,i===t||this.innerHeaderComponent||this.isLoadingInnerComponent)return;const n=(0,a._escapeString)(t,!0);this.eText.textContent=n}addInIcon(e,t,i){if(null==t)return;const n=(0,s._createIconNoSpan)(e,this.beans,i);n&&t.appendChild(n)}workOutShowMenu(){return this.params.enableMenu&&!!this.beans.menuSvc?.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return!!this.beans.menuSvc?.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return(0,r._removeFromParent)(this.eMenu),void(this.eMenu=void 0);const{gos:e,eMenu:t,params:i}=this,n=(0,o._isLegacyMenuEnabled)(e);this.addInIcon(n?"menu":"menuAlt",t,i.column),t.classList.toggle("ag-header-menu-icon",!n);const s=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=s,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(s)}toggleMenuAlwaysShow(e){this.eMenu?.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){const{currentSuppressMenuHide:t,params:i}=this;t||this.toggleMenuAlwaysShow(!0),i.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){const{params:t,gos:i,beans:n,eMenu:r,eFilterButton:s}=this,a=t.column,l=(0,o._isLegacyMenuEnabled)(i);if(e&&!l){if(n.menuSvc?.isFilterMenuInHeaderEnabled(a))return t.showFilter(s??r??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(r??s??this.getGui()),!0;return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:i}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:t,eSortOrder:i,eSortAsc:n,eSortDesc:o,eSortMixed:r,eSortNone:s}=this;t.attachCustomElements(i,n,o,r,s)}this.eSortIndicator.setupSort(i),this.currentSort&&e.setupHeader(this,i,this.eLabel)}setupFilterIcon(){const{eFilter:e,params:t}=this;e&&this.configureFilter(t.enableFilterIcon,e,this.onFilterChangedIcon.bind(this),"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;e&&(this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0)}configureFilter(e,t,i,n){if(!e)return(0,r._removeFromParent)(t),!1;const o=this.params.column;return this.addInIcon(n,t,o),this.addManagedListeners(o,{filterChanged:i}),i(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();(0,r._setDisplayed)(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){const{eFilterButton:t,eMenu:i}=this;return e?t??i??this.getGui():i??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&(this.destroyBean(this.innerHeaderComponent),this.innerHeaderComponent=void 0)}}t.HeaderComp=c},4312:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GroupWidthFeature=void 0;const n=i(8731);class o extends n.BeanStub{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",0===e)}}t.GroupWidthFeature=o},7746:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderGroupCellComp=void 0;const n=i(3507),o=i(8020),r=i(9860);class s extends r.AbstractHeaderCellComp{constructor(e){super('<div class="ag-header-group-cell" role="columnheader">\n            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>\n            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',e),this.eResize=o.RefPlaceholder,this.eHeaderCompWrapper=o.RefPlaceholder}postConstruct(){const e=this.getGui();e.setAttribute("col-id",this.ctrl.column.getUniqueId());const t={addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setUserStyles:t=>(0,n._addStylesToElement)(e,t),setHeaderWrapperHidden:e=>{e?this.eHeaderCompWrapper.style.setProperty("display","none"):this.eHeaderCompWrapper.style.removeProperty("display")},setHeaderWrapperMaxHeight:e=>{null!=e?this.eHeaderCompWrapper.style.setProperty("max-height",`${e}px`):this.eHeaderCompWrapper.style.removeProperty("max-height"),this.eHeaderCompWrapper.classList.toggle("ag-header-cell-comp-wrapper-limited-height",null!=e)},setResizableDisplayed:e=>(0,n._setDisplayed)(this.eResize,e),setWidth:t=>e.style.width=t,setAriaExpanded:t=>{return i="aria-expanded",null!=(n=t)?e.setAttribute(i,n):e.removeAttribute(i);var i,n},setUserCompDetails:e=>this.setUserCompDetails(e),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(t,e,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(e){e.newAgStackInstance().then(e=>this.afterHeaderCompCreated(e))}afterHeaderCompCreated(e){const t=()=>this.destroyBean(e);if(!this.isAlive())return void t();const i=this.getGui(),n=e.getGui();this.eHeaderCompWrapper.appendChild(n),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(i)}addOrRemoveHeaderWrapperStyle(e,t){const{eHeaderCompWrapper:i}=this;t?i.style.setProperty(e,t):i.style.removeProperty(e)}}t.HeaderGroupCellComp=s},84:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderGroupCellCtrl=void 0;const n=i(3789),o=i(2036),r=i(9853),s=i(7274),a=i(2783),l=i(8703),c=i(1502),d=i(1772),u=i(3534),h=i(1295),p=i(4312);class g extends u.AbstractHeaderCellCtrl{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}setComp(e,t,i,o,r){const{column:s,beans:a}=this,{context:c,colNames:u,colHover:h,rangeSvc:g,colResize:f}=a;this.comp=e,r=(0,n.setupCompBean)(this,c,r),this.setGui(t,r),this.displayName=u.getDisplayNameForColumnGroup(s,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(r),this.setupExpandable(r),this.setupTooltip(),this.setupAutoHeight({wrapperElement:o,compBean:r}),this.setupUserComp(),this.addHeaderMouseListeners(r),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const m=this.rowCtrl.pinned,v=s.getProvidedColumnGroup().getLeafColumns();h?.createHoverFeature(r,v,t),g?.createRangeHighlightFeature(r,s,e),r.createManagedBean(new l.SetLeftFeature(s,t,a)),r.createManagedBean(new p.GroupWidthFeature(e,s)),f?this.resizeFeature=r.createManagedBean(f.createGroupResizeFeature(e,i,m,s)):e.setResizableDisplayed(!1),r.createManagedBean(new d.ManagedFocusFeature(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(r,v),r.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(r),r.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.getDefinition();return(0,s._addGridCommonParams)(t.gos,{colDef:i,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");null!=i?0===i?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),i=t[0]===e,n=(0,c._last)(t)===e;if(!i&&!n)return;const o=e.getHighlighted();let r=!1,s=!1;if(this.rowCtrl.findHeaderCellCtrl(e=>e.column.isMoving())){const e=this.beans.gos.get("enableRtl"),t=o===a.ColumnHighlightPosition.After,l=o===a.ColumnHighlightPosition.Before;i&&(e?s=t:r=l),n&&(e?r=l:s=t)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",r),this.comp.addOrRemoveCssClass("ag-header-highlight-after",s)}resizeHeader(e,t){const{resizeFeature:i}=this;if(!i)return;const n=i.getInitialValues(t);i.resizeColumns(n,n.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){this.resizeFeature?.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:i}=this.beans,n=(0,s._addGridCommonParams)(i,{displayName:this.displayName,columnGroup:this.column,setExpanded:t=>{e.setColumnGroupOpened(this.column.getProvidedColumnGroup(),t,"gridInitializing")},setTooltip:(e,t)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(e,t)}}),r=(0,o._getHeaderGroupCompDetails)(t,n);r&&this.comp.setUserCompDetails(r)}addHeaderMouseListeners(e){const t=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column.getProvidedColumnGroup())})}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:e}=this,t=e.getColGroupDef(),i=(0,h._getHeaderClassesFromColDef)(t,this.gos,null,e);e.isPadding()?(i.push("ag-header-group-cell-no-group"),e.getLeafColumns().every(e=>e.isSpanHeaderHeight())&&i.push("ag-header-span-height")):(i.push("ag-header-group-cell-with-group"),t?.wrapHeaderText&&i.push("ag-header-cell-wrap-text")),i.forEach(e=>this.comp.addOrRemoveCssClass(e,!0))}setupMovingCss(e){const{column:t}=this,i=t.getProvidedColumnGroup().getLeafColumns(),n=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",t.isMoving());i.forEach(t=>{e.addManagedListeners(t,{movingChanged:n})}),n()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||this.focusThis()}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(this.expandable&&t&&e.key===r.KeyCode.ENTER){const e=this.column,t=!e.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(e.getProvidedColumnGroup(),t,"uiColumnExpanded")}}setDragSource(e){this.isAlive()&&!this.isSuppressMoving()&&(this.removeDragSource(),e&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}}t.HeaderGroupCellCtrl=g},4998:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderGroupComp=void 0;const n=i(2036),o=i(3507),r=i(2979),s=i(4422),a=i(9970),l=i(7766),c=i(7764),d=i(8020);class u extends d.Component{constructor(){super('<div class="ag-header-group-cell-label" role="presentation">\n            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>'),this.agOpened=d.RefPlaceholder,this.agClosed=d.RefPlaceholder,this.agLabel=d.RefPlaceholder,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons()}checkWarnings(){this.params.template&&(0,c._warn)(89)}workOutInnerHeaderGroupComponent(e,t){const i=(0,n._getInnerHeaderGroupCompDetails)(e,t,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then(e=>{this.isLoadingInnerComponent=!1,e&&(this.isAlive()?(this.innerHeaderGroupComponent=e,this.agLabel.appendChild(e.getGui())):this.destroyBean(e))}))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:i},beans:n}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const o=e=>{if((0,r._isStopPropagationForAgGrid)(e))return;const t=!i.isExpanded();n.colGroupSvc.setColumnGroupOpened(i.getProvidedColumnGroup(),t,"uiColumnExpanded")};this.addTouchAndClickListeners(n,t,o),this.addTouchAndClickListeners(n,e,o);const s=e=>{(0,r._stopPropagationForAgGrid)(e)};this.addManagedElementListeners(t,{dblclick:s}),this.addManagedElementListeners(e,{dblclick:s}),this.addManagedElementListeners(this.getGui(),{dblclick:o}),this.updateIconVisibility();const a=i.getProvidedColumnGroup(),l=this.updateIconVisibility.bind(this);this.addManagedListeners(a,{expandedChanged:l,expandableChanged:l})}addTouchAndClickListeners(e,t,i){e.touchSvc?.setupForHeaderGroup(this,t,i),this.addManagedElementListeners(t,{click:i})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:i}}=this;if(i.isExpandable()){const n=i.isExpanded();(0,o._setDisplayed)(e,n),(0,o._setDisplayed)(t,!n)}else(0,o._setDisplayed)(e,!1),(0,o._setDisplayed)(t,!1)}addInIcon(e,t){const i=(0,a._createIconNoSpan)(e,this.beans,null);i&&t.appendChild(i)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:e,agClosed:t}=this;return(0,o._setDisplayed)(e,!1),void(0,o._setDisplayed)(t,!1)}}setupLabel(e){const{displayName:t,columnGroup:i}=e,n=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;if((0,s._exists)(t)&&!n){const e=(0,l._escapeString)(t,!0);this.agLabel.textContent=e}this.addOrRemoveCssClass("ag-sticky-label",!i.getColGroupDef()?.suppressStickyLabel)}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}}t.HeaderGroupComp=u},1295:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.refreshFirstAndLastStyles=t._getToolPanelClassesFromColDef=t._getHeaderClassesFromColDef=void 0;const n=i(7274),o=i(4422);function r(e,t,i,r,s){if((0,o._missing)(e))return[];let a;if("function"==typeof e){const o=function(e,t,i,o){return(0,n._addGridCommonParams)(t,{colDef:e,column:i,columnGroup:o})}(t,i,r,s);a=e(o)}else a=e;return"string"==typeof a?[a]:Array.isArray(a)?[...a]:[]}t._getHeaderClassesFromColDef=function(e,t,i,n){return(0,o._missing)(e)?[]:r(e.headerClass,e,t,i,n)},t._getToolPanelClassesFromColDef=function(e,t,i,n){return(0,o._missing)(e)?[]:r(e.toolPanelClass,e,t,i,n)},t.refreshFirstAndLastStyles=function(e,t,i){e.addOrRemoveCssClass("ag-column-first",i.isColAtEdge(t,"first")),e.addOrRemoveCssClass("ag-column-last",i.isColAtEdge(t,"last"))}},3290:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderFilterCellComp=void 0;const n=i(3507),o=i(8020),r=i(9860);class s extends r.AbstractHeaderCellComp{constructor(e){super('<div class="ag-header-cell ag-floating-filter" role="gridcell">\n            <div data-ref="eFloatingFilterBody" role="presentation"></div>\n            <div class="ag-floating-filter-button ag-hidden" data-ref="eButtonWrapper" role="presentation">\n                <button type="button" class="ag-button ag-floating-filter-button-button" data-ref="eButtonShowMainFilter" tabindex="-1"></button>\n            </div>\n        </div>',e),this.eFloatingFilterBody=o.RefPlaceholder,this.eButtonWrapper=o.RefPlaceholder,this.eButtonShowMainFilter=o.RefPlaceholder}postConstruct(){const e=this.getGui(),t={addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setUserStyles:t=>(0,n._addStylesToElement)(e,t),addOrRemoveBodyCssClass:(e,t)=>this.eFloatingFilterBody.classList.toggle(e,t),setButtonWrapperDisplayed:e=>(0,n._setDisplayed)(this.eButtonWrapper,e),setCompDetails:e=>this.setCompDetails(e),getFloatingFilterComp:()=>this.compPromise,setWidth:t=>e.style.width=t,setMenuIcon:e=>this.eButtonShowMainFilter.appendChild(e)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(e){if(!e)return this.destroyFloatingFilterComp(),void(this.compPromise=null);this.compPromise=e.newAgStackInstance(),this.compPromise.then(e=>this.afterCompCreated(e))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){e&&(this.isAlive()?(this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()):this.destroyBean(e))}}t.HeaderFilterCellComp=s},3868:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderFilterCellCtrl=void 0;const n=i(3789),o=i(9853),r=i(7274),s=i(8703),a=i(5230),l=i(3507),c=i(2331),d=i(9970),u=i(1772),h=i(3534);class p extends h.AbstractHeaderCellCtrl{constructor(){super(...arguments),this.iconCreated=!1}setComp(e,t,i,o,r){this.comp=e;const s=(0,n.setupCompBean)(this,this.beans.context,r);this.eButtonShowMainFilter=i,this.eFloatingFilterBody=o,this.setGui(t,s),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(s),this.setupLeft(s),this.setupHover(s),this.setupFocus(s),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(s),this.setupUi(),s.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(s),s.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(s)}),s.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.colDef;return(0,r._addGridCommonParams)(t.gos,{colDef:i,column:e,floatingFilter:!0})}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=(0,d._createIconNoSpan)("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new u.ManagedFocusFeature(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.getLocaleTextFunc();(0,a._setAriaLabel)(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){const{beans:t}=this;if((0,r._getActiveDomElement)(t)===this.eGui)return;const i=(0,c._findNextFocusableElement)(t,this.eGui,null,e.shiftKey);if(i)return t.headerNavigation?.scrollToColumn(this.column),e.preventDefault(),void i.focus();const n=this.findNextColumnWithFloatingFilter(e.shiftKey);n&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:n},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleCols;let i=this.column;do{if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break}while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case o.KeyCode.UP:case o.KeyCode.DOWN:t||e.preventDefault();case o.KeyCode.LEFT:case o.KeyCode.RIGHT:if(t)return;e.stopPropagation();case o.KeyCode.ENTER:t&&(0,c._focusInto)(this.eGui)&&e.preventDefault();break;case o.KeyCode.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const t=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&(0,l._isElementChildOfClass)(e.relatedTarget,"ag-floating-filter");if(t&&i&&e.target===this.eGui){const e=this.lastFocusEvent,t=!(!e||e.key!==o.KeyCode.TAB);if(e&&t){const t=e.shiftKey;(0,c._focusInto)(this.eGui,t)}}this.focusThis()}setupHover(e){this.beans.colHover?.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){const t=new s.SetLeftFeature(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.beans.menuSvc?.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!(0,r._isLegacyMenuEnabled)(this.gos)}setupUserComp(){if(!this.active)return;const e=this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.beans.menuSvc?.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{filterManager:t}=this.beans,i=e=>{if("filterDestroyed"===e?.source&&!this.isAlive())return;const i=this.comp.getFloatingFilterComp();i&&i.then(i=>{if(i){const n=t?.getCurrentFloatingFilterParentModel(this.column),o=e?{...e,columns:e.columns??[],source:"api"===e.source?"api":"columnFilter"}:null;i.onParentModelChanged(n,o)}})};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:i}),t?.isFilterActive(this.column)&&i(null)}setupWidth(e){const t=()=>{const e=`${this.column.getActualWidth()}px`;this.comp.setWidth(e)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){const t=this.active;this.setupActive();const i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const n=this.active?this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,o=this.comp.getFloatingFilterComp();o&&n?o.then(t=>{!t||this.beans.filterManager?.areFilterCompsDifferent(this.userCompDetails??null,n)?this.updateCompDetails(e,n,i):this.updateFloatingFilterParams(n)}):this.updateCompDetails(e,n,i)}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){if(!e)return;const t=e.params;this.comp.getFloatingFilterComp()?.then(e=>{e?.refresh&&"function"==typeof e.refresh&&e.refresh(t)})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}}t.HeaderFilterCellCtrl=p},8078:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnGroupHeaderCompModule=t.ColumnHeaderCompModule=void 0;const n=i(7205),o=i(9270),r=i(4998);t.ColumnHeaderCompModule={moduleName:"ColumnHeaderComp",version:n.VERSION,userComponents:{agColumnHeader:o.HeaderComp},icons:{menu:"menu",menuAlt:"menu-alt"}},t.ColumnGroupHeaderCompModule={moduleName:"ColumnGroupHeaderComp",version:n.VERSION,userComponents:{agColumnGroupHeader:r.HeaderGroupComp},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}}},8791:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridHeaderSelector=t.GridHeaderComp=void 0;const n=i(8020),o=i(9),r=i(7260);class s extends n.Component{constructor(){super('<div class="ag-header" role="presentation"/>')}postConstruct(){const e={addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setHeightAndMinHeight:e=>{this.getGui().style.height=e,this.getGui().style.minHeight=e}};this.createManagedBean(new o.GridHeaderCtrl).setComp(e,this.getGui(),this.getFocusableElement());const t=e=>{this.createManagedBean(e),this.appendChild(e)};t(new r.HeaderRowContainerComp("left")),t(new r.HeaderRowContainerComp(null)),t(new r.HeaderRowContainerComp("right"))}}t.GridHeaderComp=s,t.GridHeaderSelector={selector:"AG-HEADER-ROOT",component:s}},9:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridHeaderCtrl=void 0;const n=i(9853),o=i(8731),r=i(7274),s=i(2612),a=i(2331),l=i(4422),c=i(1772),d=i(1323);class u extends o.BeanStub{setComp(e,t,i){this.comp=e,this.eGui=t;const{beans:n}=this,{headerNavigation:o,touchSvc:r,ctrlsSvc:s}=n;o&&this.createManagedBean(new c.ManagedFocusFeature(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,n),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,n)}),this.onPivotModeChanged(n),this.setupHeaderHeight();const a=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:a}),r?.mockHeaderContextMenu(this,a),s.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>(0,s._requestAnimationFrame)(this.beans,()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){const{beans:e}=this;let t=0;const i=(0,d.getGroupRowsHeight)(e).reduce((e,t)=>e+t,0),n=(0,d.getColumnHeaderRowHeight)(e);if(e.filterManager?.hasFloatingFilters()&&(t+=(0,d.getFloatingFiltersHeight)(e)),t+=i,t+=n,this.headerHeight===t)return;this.headerHeight=t;const o=`${t+1}px`;this.comp.setHeightAndMinHeight(o),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",t),this.comp.addOrRemoveCssClass("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const t=e.visibleCols.allCols.some(e=>e.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey,n=i!==t?"LEFT":"RIGHT",{beans:o}=this,{headerNavigation:r,focusSvc:s}=o;(r.navigateHorizontally(n,!0,e)||!i&&s.focusOverlay(!1)||(0,a._focusNextGridCoreContainer)(o,i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:i}=this.beans;switch(e.key){case n.KeyCode.LEFT:t="LEFT";case n.KeyCode.RIGHT:(0,l._exists)(t)||(t="RIGHT"),i.navigateHorizontally(t,!1,e)&&e.preventDefault();break;case n.KeyCode.UP:t="UP";case n.KeyCode.DOWN:(0,l._exists)(t)||(t="DOWN"),i.navigateVertically(t,null,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:i,beans:n}=this;!t&&i.contains((0,r._getActiveDomElement)(n))||i.contains(t)||(n.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,i){const{menuSvc:n,ctrlsSvc:o}=this.beans;if(!e&&!i||!n?.isHeaderContextMenuEnabled())return;const{target:r}=e??t;r!==this.eGui&&r!==o.getHeaderRowContainerCtrl()?.eViewport||n.showHeaderContextMenu(void 0,e,i)}}t.GridHeaderCtrl=u},1323:function(e,t){function i(e,t){const i=e.colModel.isPivotMode()?function(e){return e.gos.get("pivotGroupHeaderHeight")??o(e)}(e):o(e);let n=0;const r=t.getHeaderCtrls();for(const e of r){const{column:t}=e;if(t.isAutoHeaderHeight()){const e=t.getAutoHeaderHeight();null!=e&&e>n&&(n=e)}}return Math.max(i,n)}function n(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function o(e){return e.gos.get("groupHeaderHeight")??n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getFloatingFiltersHeight=t.getHeaderHeight=t.getColumnHeaderRowHeight=t.getGroupRowsHeight=t.getFocusHeaderRowCount=t.getHeaderRowCount=void 0,t.getHeaderRowCount=function(e){return e.cols?e.cols.treeDepth+1:-1},t.getFocusHeaderRowCount=function(e){return e.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0},t.getGroupRowsHeight=function(e){const t=[],n=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const o of n){if(!o)continue;const n=o.getGroupRowCount()||0;for(let r=0;r<n;r++){const n=o.getGroupRowCtrlAtIndex(r),s=t[r];if(n){const o=i(e,n);(null==s||o>s)&&(t[r]=o)}}}return t},t.getColumnHeaderRowHeight=function(e){const t=e.colModel.isPivotMode()?function(e){return e.gos.get("pivotHeaderHeight")??n(e)}(e):n(e),i=e.visibleCols.allCols.filter(e=>e.isAutoHeaderHeight()).map(e=>e.getAutoHeaderHeight()||0);return Math.max(t,...i)},t.getHeaderHeight=n,t.getFloatingFiltersHeight=function(e){return e.gos.get("floatingFiltersHeight")??n(e)}},8866:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderRowComp=void 0;const n=i(5230),o=i(3507),r=i(8020),s=i(1906),a=i(7746),l=i(3290);class c extends r.Component{constructor(e){super(),this.ctrl=e,this.headerComps={},this.setTemplate(`<div class="${this.ctrl.headerRowClass}" role="row"></div>`)}postConstruct(){(0,n._setAriaRowIndex)(this.getGui(),this.ctrl.getAriaRowIndex());const e={setHeight:e=>this.getGui().style.height=e,setTop:e=>this.getGui().style.top=e,setHeaderCtrls:(e,t)=>this.setHeaderCtrls(e,t),setWidth:e=>this.getGui().style.width=e};this.ctrl.setComp(e,void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;const i=this.headerComps;if(this.headerComps={},e.forEach(e=>{const t=e.instanceId;let n=i[t];delete i[t],null==n&&(n=this.createHeaderComp(e),this.getGui().appendChild(n.getGui())),this.headerComps[t]=n}),Object.values(i).forEach(e=>{this.getGui().removeChild(e.getGui()),this.destroyBean(e)}),t){const e=Object.values(this.headerComps);e.sort((e,t)=>e.getCtrl().column.getLeft()-t.getCtrl().column.getLeft());const t=e.map(e=>e.getGui());(0,o._setDomChildOrder)(this.getGui(),t)}}createHeaderComp(e){let t;switch(this.ctrl.type){case"group":t=new a.HeaderGroupCellComp(e);break;case"filter":t=new l.HeaderFilterCellComp(e);break;default:t=new s.HeaderCellComp(e)}return this.createBean(t),t.setParentComponent(this),t}}t.HeaderRowComp=c},2868:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderRowCtrl=void 0;const n=i(3789),o=i(8731),r=i(7274),s=i(260),a=i(1323);let l=0;class c extends o.BeanStub{constructor(e,t,i){super(),this.rowIndex=e,this.pinned=t,this.type=i,this.instanceId=l++;const n="group"==i?"ag-header-row-column-group":"filter"==i?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${n}`}postConstruct(){this.isPrintLayout=(0,r._isDomLayout)(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return!!this.comp&&this.getHeaderCellCtrls().every(e=>null!=e.eGui)}setComp(e,t,i=!0){this.comp=e,t=(0,n.setupCompBean)(this,this.beans.context,t),i&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this),i=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:i,virtualColumnsChanged:e=>this.onVirtualColumnsChanged(e.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",i),e.addManagedPropertyListener("ensureDomOrder",e=>this.isEnsureDomOrder=e.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(e){if(this.headerCellCtrls)for(const t of this.headerCellCtrls.values())if(t.column===e)return t}onDisplayedColumnsChanged(){this.isPrintLayout=(0,r._isDomLayout)(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleCols:e}=this.beans;return this.isPrintLayout?null!=this.pinned?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{filterManager:e}=this.beans,t=[],i=(0,a.getGroupRowsHeight)(this.beans),n=(0,a.getColumnHeaderRowHeight)(this.beans);t.push(...i),t.push(n),e?.hasFloatingFilters()&&t.push((0,a.getFloatingFiltersHeight)(this.beans));let o=0;for(let e=0;e<this.rowIndex;e++)o+=t[e];return{topOffset:o,rowHeight:t[this.rowIndex]}}onVirtualColumnsChanged(e=!1){const t=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const i of t)this.recycleAndCreateHeaderCtrls(i,e);const i=e=>{const{focusSvc:t,visibleCols:i}=this.beans;return!!t.isHeaderWrapperFocused(e)&&i.isVisible(e.column)};if(e)for(const[t,n]of e)i(n)?this.headerCellCtrls.set(t,n):this.destroyBean(n);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){return Array.from(this.headerCellCtrls?.values()??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls)return;if(e.isEmptyGroup())return;const i=e.getUniqueId();let n;if(t&&(n=t.get(i),t.delete(i)),n&&n.column!=e&&(this.destroyBean(n),n=void 0),null==n)switch(this.type){case"filter":n=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break;case"group":n=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:n=this.createBean(new s.HeaderCellCtrl(e,this))}this.headerCellCtrls.set(i,n)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(null!=this.pinned)return[];let e=[];const t=this.getActualDepth(),{colViewport:i}=this.beans;return["left",null,"right"].forEach(n=>{const o=i.getHeadersToRender(n,t);e=e.concat(o)}),e}getActualDepth(){return"filter"==this.type?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.colViewport.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;const t=this.getHeaderCellCtrls();let i;return i="function"==typeof e?t.find(e):t.find(t=>t.column==e),i}focusHeader(e,t){const i=this.findHeaderCellCtrl(e);return!!i&&i.focus(t)}destroy(){this.headerCellCtrls?.forEach(e=>{this.destroyBean(e)}),this.headerCellCtrls=void 0,super.destroy()}}t.HeaderRowCtrl=c},7260:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderRowContainerComp=void 0;const n=i(3507),o=i(8020),r=i(8866),s=i(8934);class a extends o.Component{constructor(e){super(),this.eCenterContainer=o.RefPlaceholder,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();const e={setDisplayed:e=>this.setDisplayed(e),setCtrls:e=>this.setCtrls(e),setCenterWidth:e=>this.eCenterContainer.style.width=e,setViewportScrollLeft:e=>this.getGui().scrollLeft=e,setPinnedContainerWidth:e=>{const t=this.getGui();t.style.width=e,t.style.maxWidth=e,t.style.minWidth=e}};this.createManagedBean(new s.HeaderRowContainerCtrl(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){const e="left"==this.pinned,t="right"==this.pinned,i=e?'<div class="ag-pinned-left-header" role="rowgroup"></div>':t?'<div class="ag-pinned-right-header" role="rowgroup"></div>':'<div class="ag-header-viewport" role="presentation">\n        <div class="ag-header-container" data-ref="eCenterContainer" role="rowgroup"></div>\n    </div>';this.setTemplate(i),this.eRowContainer=this.eCenterContainer!==o.RefPlaceholder?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){const t=this.headerRowComps;let i;this.headerRowComps={},this.rowCompsList=[];const o=e=>{const t=e.getGui();t.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(t),i&&(0,n._ensureDomOrder)(this.eRowContainer,t,i),i=t};e.forEach(e=>{const i=e.instanceId,n=t[i];delete t[i];const s=n||this.createBean(new r.HeaderRowComp(e));this.headerRowComps[i]=s,this.rowCompsList.push(s),o(s)}),Object.values(t).forEach(e=>this.destroyRowComp(e))}}t.HeaderRowContainerComp=a},8934:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderRowContainerCtrl=void 0;const n=i(8731),o=i(3355),r=i(2218),s=i(1323),a=i(2868);class l extends n.BeanStub{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:i,ctrlsSvc:n,colModel:o,colMoves:r,filterManager:s}=this.beans;this.setupCenterWidth(),i?.setupHeaderPinnedWidth(this),this.setupDragAndDrop(r,this.eViewport);const a=this.onDisplayedColumnsChanged.bind(this,s);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:a,advancedFilterEnabledChanged:a});const l=`${"string"==typeof this.pinned?this.pinned:"center"}Header`;n.register(l,this),o.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const{focusSvc:t,colModel:i,filterManager:n}=this.beans;let o=0;const r=t.getFocusHeaderToUseAfterRefresh();(()=>{const e=(0,s.getHeaderRowCount)(i)-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let t=0;t<e;t++){const e=this.createBean(new a.HeaderRowCtrl(o++,this.pinned,"group"));this.groupsRowCtrls.push(e)}})(),(()=>{const t=o++,i=!(this.hidden||null!=this.columnsRowCtrl&&e&&this.columnsRowCtrl.rowIndex===t);(i||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),i&&(this.columnsRowCtrl=this.createBean(new a.HeaderRowCtrl(t,this.pinned,"column")))})(),(()=>{this.includeFloatingFilter=!!n?.hasFloatingFilters()&&!this.hidden;const t=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter)return void t();const i=o++;if(this.filtersRowCtrl){const n=this.filtersRowCtrl.rowIndex!==i;e&&!n||t()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new a.HeaderRowCtrl(i,this.pinned,"filter")))})();const l=this.getAllCtrls();this.comp.setCtrls(l),this.restoreFocusOnHeader(t,r)}getHeaderCtrlForColumn(e){if((0,o.isColumn)(e))return this.columnsRowCtrl?.getHeaderCellCtrl(e);if(0!==this.groupsRowCtrls.length)for(let t=0;t<this.groupsRowCtrls.length;t++){const i=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(i)return i}}getHtmlElementForColumnHeader(e){return this.getHeaderCtrlForColumn(e)?.eGui??null}getRowType(e){return this.getAllCtrls()[e]?.type}focusHeader(e,t,i){const n=this.getAllCtrls()[e];return!!n&&n.focusHeader(t,i)}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const i=e?.createBodyDropTarget(this.pinned,t);i&&this.createManagedBean(i)}restoreFocusOnHeader(e,t){if(!t)return;const{column:i}=t;i.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(e){const t=!!e?.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==t&&this.refresh(!0)}setupCenterWidth(){null==this.pinned&&this.createManagedBean(new r.CenterWidthFeature(e=>this.comp.setCenterWidth(`${e}px`),!0))}}t.HeaderRowContainerCtrl=l},6642:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteBlock=void 0;const n=i(8731),o=i(3373),r=i(7274),s=i(4422),a=i(7764);class l extends n.BeanStub{constructor(e,t,i){super(),this.id=e,this.parentCache=t,this.params=i,this.state="needsLoading",this.version=0,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"}),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];const{params:{blockSize:e,rowHeight:t},startRow:i,beans:n,rowNodes:r}=this;for(let s=0;s<e;s++){const e=i+s,a=new o.RowNode(n);a.setRowHeight(t),a.uiLevel=0,a.setRowIndex(e),a.setRowTop(t*e),r.push(a)}}getBlockStateJson(){const{id:e,startRow:t,endRow:i,state:n}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:i,pageStatus:n}}}setDataAndId(e,t,i){(0,s._exists)(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();(0,s._missing)(this.params.datasource.getRows)?(0,a._warn)(90):window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}createLoadParams(){const{startRow:e,endRow:t,version:i,params:{sortModel:n,filterModel:o},gos:s}=this;return{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,i),failCallback:this.pageLoadFailed.bind(this,i),sortModel:n,filterModel:o,context:(0,r._addGridCommonParams)(s,{}).context}}forEachNode(e,t,i){this.rowNodes.forEach((n,o)=>{this.startRow+o<i&&e(n,t.value++)})}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.value++);const i=e-this.startRow;return this.rowNodes[i]}processServerResult(e){const{rowNodes:t,beans:i}=this;t.forEach((n,r)=>{const s=e.rowData?e.rowData[r]:void 0;!n.id&&n.alreadyRendered&&s&&(t[r]=new o.RowNode(i),t[r].setRowIndex(n.rowIndex),t[r].setRowTop(n.rowTop),t[r].setRowHeight(n.rowHeight),n.clearRowTopAndRowIndex()),this.setDataAndId(t[r],s,this.startRow+r)});const n=null!=e.rowCount&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,n)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}}t.InfiniteBlock=l},8861:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteCache=void 0;const n=i(8731),o=i(2043),r=i(4422),s=i(6642);class a extends n.BeanStub{constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e,t=!1){const i=Math.floor(e/this.params.blockSize);let n=this.blocks[i];if(!n){if(t)return;n=this.createBlock(i)}return n.getRow(e)}createBlock(e){const t=this.params,i=this.createBean(new s.InfiniteBlock(e,this,t));return this.blocks[i.id]=i,this.blockCount++,this.purgeBlocksIfNeeded(i),t.rowNodeBlockLoader.addBlock(i),i}refreshCache(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach(e=>e.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad())}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&((0,o._logIfDebug)(this.gos,`InfiniteCache - onPageLoaded: page = ${e.id}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(t=>t!=e);t.sort((e,t)=>t.lastAccessed-e.lastAccessed);const i=this.params.maxBlocksInCache>0,n=i?this.params.maxBlocksInCache-1:null;t.forEach((e,t)=>{if("needsLoading"===e.state&&t>=1||i&&t>=n){if(this.isBlockCurrentlyDisplayed(e))return;if(this.isBlockFocused(e))return;this.removeBlockFromCache(e)}})}isBlockFocused(e){const t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t)return!1;if(null!=t.rowPinned)return!1;const{startRow:i,endRow:n}=e;return t.rowIndex>=i&&t.rowIndex<n}isBlockCurrentlyDisplayed(e){const{startRow:t,endRow:i}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,i-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if("number"==typeof t&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const{blockSize:t,overflowSize:i}=this.params,n=(e.id+1)*t+i;this.rowCount<n&&(this.rowCount=n)}}setRowCount(e,t){this.rowCount=e,(0,r._exists)(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize==0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t={value:0};this.getBlocksInOrder().forEach(i=>i.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){return Object.values(this.blocks).sort((e,t)=>e.id-t.id)}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach(t=>{t.id*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(e=>this.destroyBlock(e))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let n=-1,o=!1;const r={value:0};let s=!1;return this.getBlocksInOrder().forEach(a=>{s||(o&&n+1!==a.id?s=!0:(n=a.id,a.forEachNode(n=>{const r=n===e||n===t;(o||r)&&i.push(n),r&&(o=!o)},r,this.rowCount)))}),s||o?[]:i}}t.InfiniteCache=a},169:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteRowModel=void 0;const n=i(8731),o=i(7274),r=i(4422),s=i(8861);class a extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowModel"}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){"infinite"===this.gos.get("rowModelType")&&(this.rowHeight=(0,o._getRowHeightAsNumber)(this.beans),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()))}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=(0,o._getRowHeightAsNumber)(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onColumnEverything(){let e;e=!this.cacheParams||!(0,r._jsonEquals)(this.cacheParams.sortModel,this.beans.sortSvc?.getSortModel()??[]),e&&this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?.getRowNodesInRange(e,t)??[]}reset(){this.datasource&&(null!=(0,o._getRowIdCallback)(this.gos)||this.beans.selectionSvc?.reset("rowDataChanged"),this.resetCache())}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache();const e=this.beans,{filterManager:t,sortSvc:i,rowNodeBlockLoader:n,eventSvc:r,gos:a}=e;this.cacheParams={datasource:this.datasource,filterModel:t?.getFilterModel()??{},sortModel:i?.getSortModel()??[],rowNodeBlockLoader:n,initialRowCount:a.get("infiniteInitialRowCount"),maxBlocksInCache:a.get("maxBlocksInCache"),rowHeight:(0,o._getRowHeightAsNumber)(e),overflowSize:a.get("cacheOverflowSize"),blockSize:a.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new s.InfiniteCache(this.cacheParams)),r.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){const t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}forEachNode(e){this.infiniteCache?.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(0!==this.rowHeight){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache?.refreshCache()}purgeCache(){this.infiniteCache?.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?.isLastRowIndexKnown()??!1}setRowCount(e,t){this.infiniteCache?.setRowCount(e,t)}}t.InfiniteRowModel=a},9836:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getInfiniteRowCount=t.purgeInfiniteCache=t.refreshInfiniteCache=void 0;const n=i(6876);t.refreshInfiniteCache=function(e){(0,n._getInfiniteRowModel)(e)?.refreshCache()},t.purgeInfiniteCache=function(e){(0,n._getInfiniteRowModel)(e)?.purgeCache()},t.getInfiniteRowCount=function(e){return(0,n._getInfiniteRowModel)(e)?.getRowCount()}},4002:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteRowModelModule=void 0;const n=i(6437),o=i(7205),r=i(169),s=i(9836),a=i(9789),l={moduleName:"InfiniteRowModelCore",version:o.VERSION,rowModels:["infinite"],beans:[r.InfiniteRowModel,a.RowNodeBlockLoader]};t.InfiniteRowModelModule={moduleName:"InfiniteRowModel",version:o.VERSION,apiFunctions:{refreshInfiniteCache:s.refreshInfiniteCache,purgeInfiniteCache:s.purgeInfiniteCache,getInfiniteRowCount:s.getInfiniteRowCount},dependsOn:[l,n.SsrmInfiniteSharedApiModule]}},9789:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowNodeBlockLoader=void 0;const n=i(8731),o=i(7274),r=i(1502),s=i(2043);class a extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=(0,o._getMaxConcurrentDatasourceRequests)(this.gos);const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=(0,s._debounce)(this,this.performCheckBlocksToLoad.bind(this),e))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){(0,r._removeFromArray)(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void(0,s._logIfDebug)(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");const e=null!=this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter(e=>"needsLoading"===e.state).slice(0,e);this.activeBlockLoadsCount+=t.length,t.forEach(e=>e.load()),this.printCacheStatus()}getBlockState(){const e={};return this.blocks.forEach(t=>{const{id:i,state:n}=t.getBlockStateJson();e[i]=n}),e}printCacheStatus(){(0,s._logIfDebug)(this.gos,`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}}t.RowNodeBlockLoader=a},5961:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CellRangeType=void 0,function(e){e[e.VALUE=0]="VALUE",e[e.DIMENSION=1]="DIMENSION"}(i||(t.CellRangeType=i={}))},7419:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},2783:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnHighlightPosition=void 0,function(e){e[e.Before=0]="Before",e[e.After=1]="After"}(i||(t.ColumnHighlightPosition=i={}))},7919:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},3590:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ServerSideTransactionResultStatus=void 0,function(e){e.Applied="Applied",e.StoreNotFound="StoreNotFound",e.StoreLoading="StoreLoading",e.StoreWaitingToLoad="StoreWaitingToLoad",e.StoreLoadingFailed="StoreLoadingFailed",e.StoreWrongType="StoreWrongType",e.Cancelled="Cancelled",e.StoreNotStarted="StoreNotStarted"}(i||(t.ServerSideTransactionResultStatus=i={}))},5889:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.LocalEventService=void 0,t.LocalEventService=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const n=t?this.allAsyncListeners:this.allSyncListeners;let o=n.get(e);return!o&&i&&(o=new Set,n.set(e,o)),o}noRegisteredListenersExist(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){const n=this.getListeners(e,i,!1);n&&(n.delete(t),0===n.size)&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e)}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){const t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const i=e.type;if(t&&"event"in e){const t=e.event;t instanceof Event&&(e.eventPath=t.composedPath())}const n=this.getListeners(i,t,!1)??new Set,o=new Set(n);o.size>0&&((i,n)=>{i.forEach(i=>{if(!n.has(i))return;const o=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>i(e)):()=>i(e);t?this.dispatchAsync(o):o()})})(o,n),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(n=>{const o=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>n(i,e)):()=>n(i,e);t?this.dispatchAsync(o):o()})}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const e=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(e):e(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(e=>e())}}},4769:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});const n=i(5608),o=i(12);(0,o._setUmd)(),o.ModuleRegistry.registerModules([o.AllCommunityModule]),n.__exportStar(i(12),t)},12:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._getRowContainerOptions=t.RowContainerCtrl=t.FakeVScrollComp=t.FakeHScrollComp=t._getNormalisedMousePosition=t._getCellPositionForEvent=t.GridBodyCtrl=t._getDefaultFloatingFilterType=t.ProvidedFilter=t.FilterWrapperComp=t._createGlobalRowEvent=t._ROW_ID_PREFIX_ROW_GROUP=t.RowNode=t.isProvidedColumnGroup=t.AgProvidedColumnGroup=t.isColumnGroup=t.AgColumnGroup=t.isColumn=t.AgColumn=t.DragSourceType=t.BeanStub=t._unwrapUserComp=t._getInnerCellRendererDetails=t._getEditorRendererDetails=t._getCellRendererDetails=t._getFloatingFilterCompDetails=t._getFilterDetails=t.RefPlaceholder=t._EmptyBean=t._columnsMatch=t._convertColumnEventSourceType=t._updateColsMap=t._areColIdsEqual=t._getColumnsFromTree=t._destroyColumnTree=t.isColumnGroupAutoCol=t.isColumnSelectionCol=t.isRowNumberCol=t.ROW_NUMBERS_COLUMN_ID=t.SELECTION_COLUMN_ID=t.GROUP_AUTO_COLUMN_ID=t.GroupInstanceIdCreator=t.ColumnKeyCreator=t._getColumnState=t._applyColumnState=t._resetColumnState=t.BaseColsService=t._createColumnTree=t._addColumnDefaultAndTypes=t._updateColumnState=void 0,t._getGlobalGridOption=t.provideGlobalGridOptions=t.createGrid=t.GridCoreCreator=t.KeyCode=t.VanillaFrameworkOverrides=t.AutoScrollService=t.CellRangeType=t.AgPickerField=t.AgAbstractLabel=t.TouchListener=t.PopupComponent=t.TabGuardFeature=t.TabGuardClassNames=t.TabGuardCtrl=t.TabGuardComp=t._FOCUS_MANAGED_CLASS=t.ManagedFocusFeature=t.Component=t.AgSelectSelector=t.AgSelect=t.AgInputDateField=t.AgInputNumberFieldSelector=t.AgInputNumberField=t.AgInputTextArea=t.AgInputTextFieldSelector=t.AgInputTextField=t.AgToggleButtonSelector=t.AgToggleButton=t.AgRadioButton=t.AgCheckboxSelector=t.AgCheckbox=t.AgAbstractInputField=t.BaseSelectionService=t.ServerSideTransactionResultStatus=t.AbstractClientSideNodeManager=t.CssClassManager=t._getCellCtrlForEventTarget=t.PositionableFeature=t._setColMenuVisible=t._requestAnimationFrame=t._getHeaderRowCount=t._getFloatingFiltersHeight=t.HeaderRowContainerCtrl=t.GridHeaderCtrl=t._getToolPanelClassesFromColDef=t._getHeaderClassesFromColDef=t._getRowViewportClass=t._getRowContainerClass=t._getRowSpanContainerClass=void 0,t.GridCtrl=t.LocalEventService=t._isGroupRowsSticky=t._isUsingNewCellSelectionAPI=t._isUsingNewRowSelectionAPI=t._isColumnMenuAnchoringEnabled=t._isLegacyMenuEnabled=t._getRowSelectionMode=t._getSuppressMultiRanges=t._isCellSelectionEnabled=t._getFillHandle=t._isMultiRowSelection=t._getHeaderCheckbox=t._getCheckboxLocation=t._getCheckboxes=t._getIsRowSelectable=t._getGroupSelectsDescendants=t._getGroupSelection=t._isGetRowHeightFunction=t._isRowSelection=t._getGroupAggFiltering=t._getRootNode=t._anchorElementToMouseMoveEvent=t._getPageBody=t._getDocument=t._isNothingFocused=t._getActiveDomElement=t._shouldUpdateColVisibilityAfterGroup=t._getRowHeightAsNumber=t._canSkipShowingRowGroup=t._isGroupUseEntireRow=t._isServerSideRowModel=t._isClientSideRowModel=t._isColumnsSortingCoupledToGroup=t._isGroupMultiAutoColumn=t._getGroupTotalRowCallback=t._getGrandTotalRow=t._isAnimateRows=t._isDomLayout=t._getRowHeightForNode=t._getRowIdCallback=t._getMaxConcurrentDatasourceRequests=t._processOnChange=t._combineAttributesAndGridOptions=t._getCallbackForEvent=t._addGridCommonParams=t._PUBLIC_EVENTS=t._ALL_EVENTS=t._getServerSideRowModel=t._getClientSideRowModel=void 0,t._getAbsoluteWidth=t._getAbsoluteHeight=t._parseDateTimeFromString=t._serialiseDate=t.ChangedPath=t._isIOSUserAgent=t._areEqual=t._last=t._removeFromArray=t._EmptyArray=t._getAriaPosInSet=t._setAriaHidden=t._setAriaSetSize=t._setAriaPosInSet=t._setAriaSelected=t._setAriaActiveDescendant=t._setAriaRowCount=t._setAriaColCount=t._setAriaSort=t._removeAriaSort=t._removeAriaExpanded=t._setAriaHasPopup=t._setAriaDisabled=t._setAriaRowIndex=t._setAriaColSpan=t._setAriaColIndex=t._setAriaRole=t._setAriaControls=t._setAriaChecked=t._setAriaLabelledBy=t._setAriaExpanded=t._setAriaDescribedBy=t._setAriaLabel=t._setAriaLevel=t._isShowTooltipWhenTruncated=t._getShouldDisplayTooltip=t._shouldDisplayTooltip=t.TooltipFeature=t.BaseComponentWrapper=t._HeaderComp=t._BOOLEAN_MIXED_GRID_OPTIONS=t._ALL_GRID_OPTIONS=t._getCellByPosition=t._getRowNode=t._isSameRow=t._isRowBefore=t._createCellId=t._areCellsEqual=t._getLocaleTextFunc=t.LocaleService=void 0,t._focusNextGridCoreContainer=t._isKeyboardMode=t._focusGridInnerElement=t._findTabbableParent=t._findNextFocusableElement=t._focusInto=t._findFocusableElements=t._addFocusableContainerListener=t._isPromise=t.AgPromise=t._escapeString=t._mergeDeep=t._formatNumberCommas=t._isEventFromPrintableCharacter=t._defaultComparator=t._makeNull=t._toStringOrNull=t._jsonEquals=t._missing=t._exists=t._fuzzySuggestions=t._createIconNoSpan=t._createIcon=t._preInitErrMsg=t._errMsg=t._error=t._warn=t._waitUntil=t._doOnce=t._debounce=t._warnOnce=t._isElementInEventPath=t._isStopPropagationForAgGrid=t._stopPropagationForAgGrid=t._selectAllCells=t._preserveRangesWhile=t._observeResize=t._isNodeOrElement=t._getInnerWidth=t._getInnerHeight=t._bindCellRendererToHtmlElement=t._setVisible=t._setDisabled=t._setFixedWidth=t._isVisible=t._loadTemplate=t._radioCssClass=t._removeFromParent=t._clearElement=t._setDisplayed=void 0,t.RowApiModule=t.PaginationModule=t.ColumnApiModule=t.GridStateModule=t._ColumnGroupModule=t.HighlightChangesModule=t._KeyboardNavigationModule=t._PopupModule=t.InfiniteRowModelModule=t.CsvExportModule=t.ClientSideRowModelApiModule=t.ClientSideRowModelModule=t.AlignedGridsModule=t._SortModule=t._SharedMenuModule=t._SsrmInfiniteSharedApiModule=t._CsrmSsrmSharedApiModule=t._SharedRowSelectionModule=t.RowSelectionModule=t.CustomEditorModule=t.UndoRedoEditModule=t.SelectEditorModule=t.LargeTextEditorModule=t.TextEditorModule=t.CheckboxEditorModule=t.DateEditorModule=t.NumberEditorModule=t._EditCoreModule=t.ExternalFilterModule=t.DateFilterModule=t.NumberFilterModule=t.TextFilterModule=t.QuickFilterModule=t.CustomFilterModule=t._FilterValueModule=t._FilterCoreModule=t._ColumnFilterModule=t.RowDragModule=t.DragAndDropModule=t._SharedDragAndDropModule=t._HorizontalResizeModule=t._DragModule=t._ColumnMoveModule=t.ValidationModule=t._setUmd=t._getGridRegisteredModules=t.ModuleRegistry=t._downloadFile=t.BaseGridSerializingSession=t.BaseCreator=void 0,t.themeAlpine=t.styleMaterial=t.columnDropStylePlain=t.columnDropStyleBordered=t.tabStyleRolodex=t.tabStyleQuartz=t.tabStyleMaterial=t.tabStyleBase=t.tabStyleAlpine=t.buttonStyleQuartz=t.buttonStyleBase=t.buttonStyleBalham=t.buttonStyleAlpine=t.inputStyleUnderlined=t.inputStyleBordered=t.inputStyleBase=t.iconSetQuartzRegular=t.iconSetQuartzLight=t.iconSetQuartzBold=t.iconSetQuartz=t.iconSetMaterial=t.iconSetAlpine=t.iconOverrides=t.colorSchemeVariable=t.colorSchemeLightWarm=t.colorSchemeLightCold=t.colorSchemeLight=t.colorSchemeDarkWarm=t.colorSchemeDarkBlue=t.colorSchemeDark=t.checkboxStyleDefault=t._asThemeImpl=t.createTheme=t.createPart=t.AllCommunityModule=t._SharedExportModule=t.RowAutoHeightModule=t.LocaleModule=t.TooltipModule=t.EventApiModule=t.ColumnHoverModule=t.RowStyleModule=t.CellStyleModule=t.CellApiModule=t.ValueCacheModule=t.CellSpanModule=t.PinnedRowModule=t.ColumnAutoSizeModule=t.RenderApiModule=t.ScrollApiModule=void 0,t.themeQuartz=t.themeMaterial=t.themeBalham=void 0;const n=i(5608);var o=i(2716);Object.defineProperty(t,"_updateColumnState",{enumerable:!0,get:function(){return o._updateColumnState}}),Object.defineProperty(t,"_addColumnDefaultAndTypes",{enumerable:!0,get:function(){return o._addColumnDefaultAndTypes}}),Object.defineProperty(t,"_createColumnTree",{enumerable:!0,get:function(){return o._createColumnTree}});var r=i(3600);Object.defineProperty(t,"BaseColsService",{enumerable:!0,get:function(){return r.BaseColsService}});var s=i(2885);Object.defineProperty(t,"_resetColumnState",{enumerable:!0,get:function(){return s._resetColumnState}}),Object.defineProperty(t,"_applyColumnState",{enumerable:!0,get:function(){return s._applyColumnState}}),Object.defineProperty(t,"_getColumnState",{enumerable:!0,get:function(){return s._getColumnState}});var a=i(2294);Object.defineProperty(t,"ColumnKeyCreator",{enumerable:!0,get:function(){return a.ColumnKeyCreator}});var l=i(6034);Object.defineProperty(t,"GroupInstanceIdCreator",{enumerable:!0,get:function(){return l.GroupInstanceIdCreator}});var c=i(3146);Object.defineProperty(t,"GROUP_AUTO_COLUMN_ID",{enumerable:!0,get:function(){return c.GROUP_AUTO_COLUMN_ID}}),Object.defineProperty(t,"SELECTION_COLUMN_ID",{enumerable:!0,get:function(){return c.SELECTION_COLUMN_ID}}),Object.defineProperty(t,"ROW_NUMBERS_COLUMN_ID",{enumerable:!0,get:function(){return c.ROW_NUMBERS_COLUMN_ID}}),Object.defineProperty(t,"isRowNumberCol",{enumerable:!0,get:function(){return c.isRowNumberCol}}),Object.defineProperty(t,"isColumnSelectionCol",{enumerable:!0,get:function(){return c.isColumnSelectionCol}}),Object.defineProperty(t,"isColumnGroupAutoCol",{enumerable:!0,get:function(){return c.isColumnGroupAutoCol}}),Object.defineProperty(t,"_destroyColumnTree",{enumerable:!0,get:function(){return c._destroyColumnTree}}),Object.defineProperty(t,"_getColumnsFromTree",{enumerable:!0,get:function(){return c._getColumnsFromTree}}),Object.defineProperty(t,"_areColIdsEqual",{enumerable:!0,get:function(){return c._areColIdsEqual}}),Object.defineProperty(t,"_updateColsMap",{enumerable:!0,get:function(){return c._updateColsMap}}),Object.defineProperty(t,"_convertColumnEventSourceType",{enumerable:!0,get:function(){return c._convertColumnEventSourceType}}),Object.defineProperty(t,"_columnsMatch",{enumerable:!0,get:function(){return c._columnsMatch}});var d=i(3789);Object.defineProperty(t,"_EmptyBean",{enumerable:!0,get:function(){return d.EmptyBean}});var u=i(8020);Object.defineProperty(t,"RefPlaceholder",{enumerable:!0,get:function(){return u.RefPlaceholder}});var h=i(2036);Object.defineProperty(t,"_getFilterDetails",{enumerable:!0,get:function(){return h._getFilterDetails}}),Object.defineProperty(t,"_getFloatingFilterCompDetails",{enumerable:!0,get:function(){return h._getFloatingFilterCompDetails}}),Object.defineProperty(t,"_getCellRendererDetails",{enumerable:!0,get:function(){return h._getCellRendererDetails}}),Object.defineProperty(t,"_getEditorRendererDetails",{enumerable:!0,get:function(){return h._getEditorRendererDetails}}),Object.defineProperty(t,"_getInnerCellRendererDetails",{enumerable:!0,get:function(){return h._getInnerCellRendererDetails}});var p=i(4126);Object.defineProperty(t,"_unwrapUserComp",{enumerable:!0,get:function(){return p._unwrapUserComp}});var g=i(8731);Object.defineProperty(t,"BeanStub",{enumerable:!0,get:function(){return g.BeanStub}});var f=i(2903);Object.defineProperty(t,"DragSourceType",{enumerable:!0,get:function(){return f.DragSourceType}});var m=i(3355);Object.defineProperty(t,"AgColumn",{enumerable:!0,get:function(){return m.AgColumn}}),Object.defineProperty(t,"isColumn",{enumerable:!0,get:function(){return m.isColumn}});var v=i(6908);Object.defineProperty(t,"AgColumnGroup",{enumerable:!0,get:function(){return v.AgColumnGroup}}),Object.defineProperty(t,"isColumnGroup",{enumerable:!0,get:function(){return v.isColumnGroup}});var b=i(9409);Object.defineProperty(t,"AgProvidedColumnGroup",{enumerable:!0,get:function(){return b.AgProvidedColumnGroup}}),Object.defineProperty(t,"isProvidedColumnGroup",{enumerable:!0,get:function(){return b.isProvidedColumnGroup}});var y=i(3373);Object.defineProperty(t,"RowNode",{enumerable:!0,get:function(){return y.RowNode}}),Object.defineProperty(t,"_ROW_ID_PREFIX_ROW_GROUP",{enumerable:!0,get:function(){return y.ROW_ID_PREFIX_ROW_GROUP}});var w=i(9888);Object.defineProperty(t,"_createGlobalRowEvent",{enumerable:!0,get:function(){return w._createGlobalRowEvent}});var C=i(1854);Object.defineProperty(t,"FilterWrapperComp",{enumerable:!0,get:function(){return C.FilterWrapperComp}});var _=i(2245);Object.defineProperty(t,"ProvidedFilter",{enumerable:!0,get:function(){return _.ProvidedFilter}});var S=i(9990);Object.defineProperty(t,"_getDefaultFloatingFilterType",{enumerable:!0,get:function(){return S._getDefaultFloatingFilterType}});var x=i(520);Object.defineProperty(t,"GridBodyCtrl",{enumerable:!0,get:function(){return x.GridBodyCtrl}});var A=i(8399);Object.defineProperty(t,"_getCellPositionForEvent",{enumerable:!0,get:function(){return A._getCellPositionForEvent}}),Object.defineProperty(t,"_getNormalisedMousePosition",{enumerable:!0,get:function(){return A._getNormalisedMousePosition}});var E=i(335);Object.defineProperty(t,"FakeHScrollComp",{enumerable:!0,get:function(){return E.FakeHScrollComp}});var T=i(6070);Object.defineProperty(t,"FakeVScrollComp",{enumerable:!0,get:function(){return T.FakeVScrollComp}});var k=i(8115);Object.defineProperty(t,"RowContainerCtrl",{enumerable:!0,get:function(){return k.RowContainerCtrl}}),Object.defineProperty(t,"_getRowContainerOptions",{enumerable:!0,get:function(){return k._getRowContainerOptions}}),Object.defineProperty(t,"_getRowSpanContainerClass",{enumerable:!0,get:function(){return k._getRowSpanContainerClass}}),Object.defineProperty(t,"_getRowContainerClass",{enumerable:!0,get:function(){return k._getRowContainerClass}}),Object.defineProperty(t,"_getRowViewportClass",{enumerable:!0,get:function(){return k._getRowViewportClass}});var D=i(1295);Object.defineProperty(t,"_getHeaderClassesFromColDef",{enumerable:!0,get:function(){return D._getHeaderClassesFromColDef}}),Object.defineProperty(t,"_getToolPanelClassesFromColDef",{enumerable:!0,get:function(){return D._getToolPanelClassesFromColDef}});var M=i(9);Object.defineProperty(t,"GridHeaderCtrl",{enumerable:!0,get:function(){return M.GridHeaderCtrl}});var P=i(8934);Object.defineProperty(t,"HeaderRowContainerCtrl",{enumerable:!0,get:function(){return P.HeaderRowContainerCtrl}});var R=i(1323);Object.defineProperty(t,"_getFloatingFiltersHeight",{enumerable:!0,get:function(){return R.getFloatingFiltersHeight}}),Object.defineProperty(t,"_getHeaderRowCount",{enumerable:!0,get:function(){return R.getHeaderRowCount}});var I=i(2612);Object.defineProperty(t,"_requestAnimationFrame",{enumerable:!0,get:function(){return I._requestAnimationFrame}});var O=i(8994);Object.defineProperty(t,"_setColMenuVisible",{enumerable:!0,get:function(){return O._setColMenuVisible}});var N=i(2147);Object.defineProperty(t,"PositionableFeature",{enumerable:!0,get:function(){return N.PositionableFeature}});var L=i(814);Object.defineProperty(t,"_getCellCtrlForEventTarget",{enumerable:!0,get:function(){return L._getCellCtrlForEventTarget}});var F=i(1734);Object.defineProperty(t,"CssClassManager",{enumerable:!0,get:function(){return F.CssClassManager}});var $=i(1954);Object.defineProperty(t,"AbstractClientSideNodeManager",{enumerable:!0,get:function(){return $.AbstractClientSideNodeManager}});var G=i(3590);Object.defineProperty(t,"ServerSideTransactionResultStatus",{enumerable:!0,get:function(){return G.ServerSideTransactionResultStatus}});var B=i(3306);Object.defineProperty(t,"BaseSelectionService",{enumerable:!0,get:function(){return B.BaseSelectionService}});var H=i(8085);Object.defineProperty(t,"AgAbstractInputField",{enumerable:!0,get:function(){return H.AgAbstractInputField}});var z=i(66);Object.defineProperty(t,"AgCheckbox",{enumerable:!0,get:function(){return z.AgCheckbox}}),Object.defineProperty(t,"AgCheckboxSelector",{enumerable:!0,get:function(){return z.AgCheckboxSelector}});var W=i(7336);Object.defineProperty(t,"AgRadioButton",{enumerable:!0,get:function(){return W.AgRadioButton}});var V=i(4927);Object.defineProperty(t,"AgToggleButton",{enumerable:!0,get:function(){return V.AgToggleButton}}),Object.defineProperty(t,"AgToggleButtonSelector",{enumerable:!0,get:function(){return V.AgToggleButtonSelector}});var j=i(5946);Object.defineProperty(t,"AgInputTextField",{enumerable:!0,get:function(){return j.AgInputTextField}}),Object.defineProperty(t,"AgInputTextFieldSelector",{enumerable:!0,get:function(){return j.AgInputTextFieldSelector}});var U=i(6209);Object.defineProperty(t,"AgInputTextArea",{enumerable:!0,get:function(){return U.AgInputTextArea}});var Y=i(8792);Object.defineProperty(t,"AgInputNumberField",{enumerable:!0,get:function(){return Y.AgInputNumberField}}),Object.defineProperty(t,"AgInputNumberFieldSelector",{enumerable:!0,get:function(){return Y.AgInputNumberFieldSelector}});var q=i(3611);Object.defineProperty(t,"AgInputDateField",{enumerable:!0,get:function(){return q.AgInputDateField}});var K=i(159);Object.defineProperty(t,"AgSelect",{enumerable:!0,get:function(){return K.AgSelect}}),Object.defineProperty(t,"AgSelectSelector",{enumerable:!0,get:function(){return K.AgSelectSelector}});var X=i(8020);Object.defineProperty(t,"Component",{enumerable:!0,get:function(){return X.Component}});var Z=i(1772);Object.defineProperty(t,"ManagedFocusFeature",{enumerable:!0,get:function(){return Z.ManagedFocusFeature}}),Object.defineProperty(t,"_FOCUS_MANAGED_CLASS",{enumerable:!0,get:function(){return Z.FOCUS_MANAGED_CLASS}});var J=i(8332);Object.defineProperty(t,"TabGuardComp",{enumerable:!0,get:function(){return J.TabGuardComp}});var Q=i(6);Object.defineProperty(t,"TabGuardCtrl",{enumerable:!0,get:function(){return Q.TabGuardCtrl}}),Object.defineProperty(t,"TabGuardClassNames",{enumerable:!0,get:function(){return Q.TabGuardClassNames}});var ee=i(1017);Object.defineProperty(t,"TabGuardFeature",{enumerable:!0,get:function(){return ee.TabGuardFeature}});var te=i(3598);Object.defineProperty(t,"PopupComponent",{enumerable:!0,get:function(){return te.PopupComponent}});var ie=i(9644);Object.defineProperty(t,"TouchListener",{enumerable:!0,get:function(){return ie.TouchListener}});var ne=i(2747);Object.defineProperty(t,"AgAbstractLabel",{enumerable:!0,get:function(){return ne.AgAbstractLabel}});var oe=i(9497);Object.defineProperty(t,"AgPickerField",{enumerable:!0,get:function(){return oe.AgPickerField}});var re=i(5961);Object.defineProperty(t,"CellRangeType",{enumerable:!0,get:function(){return re.CellRangeType}});var se=i(5628);Object.defineProperty(t,"AutoScrollService",{enumerable:!0,get:function(){return se.AutoScrollService}});var ae=i(6511);Object.defineProperty(t,"VanillaFrameworkOverrides",{enumerable:!0,get:function(){return ae.VanillaFrameworkOverrides}});var le=i(9853);Object.defineProperty(t,"KeyCode",{enumerable:!0,get:function(){return le.KeyCode}});var ce=i(1657);Object.defineProperty(t,"GridCoreCreator",{enumerable:!0,get:function(){return ce.GridCoreCreator}}),Object.defineProperty(t,"createGrid",{enumerable:!0,get:function(){return ce.createGrid}}),Object.defineProperty(t,"provideGlobalGridOptions",{enumerable:!0,get:function(){return ce.provideGlobalGridOptions}}),Object.defineProperty(t,"_getGlobalGridOption",{enumerable:!0,get:function(){return ce._getGlobalGridOption}});var de=i(6876);Object.defineProperty(t,"_getClientSideRowModel",{enumerable:!0,get:function(){return de._getClientSideRowModel}}),Object.defineProperty(t,"_getServerSideRowModel",{enumerable:!0,get:function(){return de._getServerSideRowModel}});var ue=i(3080);Object.defineProperty(t,"_ALL_EVENTS",{enumerable:!0,get:function(){return ue._ALL_EVENTS}}),Object.defineProperty(t,"_PUBLIC_EVENTS",{enumerable:!0,get:function(){return ue._PUBLIC_EVENTS}});var he=i(7274);Object.defineProperty(t,"_addGridCommonParams",{enumerable:!0,get:function(){return he._addGridCommonParams}}),Object.defineProperty(t,"_getCallbackForEvent",{enumerable:!0,get:function(){return he._getCallbackForEvent}}),Object.defineProperty(t,"_combineAttributesAndGridOptions",{enumerable:!0,get:function(){return he._combineAttributesAndGridOptions}}),Object.defineProperty(t,"_processOnChange",{enumerable:!0,get:function(){return he._processOnChange}}),Object.defineProperty(t,"_getMaxConcurrentDatasourceRequests",{enumerable:!0,get:function(){return he._getMaxConcurrentDatasourceRequests}}),Object.defineProperty(t,"_getRowIdCallback",{enumerable:!0,get:function(){return he._getRowIdCallback}}),Object.defineProperty(t,"_getRowHeightForNode",{enumerable:!0,get:function(){return he._getRowHeightForNode}}),Object.defineProperty(t,"_isDomLayout",{enumerable:!0,get:function(){return he._isDomLayout}}),Object.defineProperty(t,"_isAnimateRows",{enumerable:!0,get:function(){return he._isAnimateRows}}),Object.defineProperty(t,"_getGrandTotalRow",{enumerable:!0,get:function(){return he._getGrandTotalRow}}),Object.defineProperty(t,"_getGroupTotalRowCallback",{enumerable:!0,get:function(){return he._getGroupTotalRowCallback}}),Object.defineProperty(t,"_isGroupMultiAutoColumn",{enumerable:!0,get:function(){return he._isGroupMultiAutoColumn}}),Object.defineProperty(t,"_isColumnsSortingCoupledToGroup",{enumerable:!0,get:function(){return he._isColumnsSortingCoupledToGroup}}),Object.defineProperty(t,"_isClientSideRowModel",{enumerable:!0,get:function(){return he._isClientSideRowModel}}),Object.defineProperty(t,"_isServerSideRowModel",{enumerable:!0,get:function(){return he._isServerSideRowModel}}),Object.defineProperty(t,"_isGroupUseEntireRow",{enumerable:!0,get:function(){return he._isGroupUseEntireRow}}),Object.defineProperty(t,"_canSkipShowingRowGroup",{enumerable:!0,get:function(){return he._canSkipShowingRowGroup}}),Object.defineProperty(t,"_getRowHeightAsNumber",{enumerable:!0,get:function(){return he._getRowHeightAsNumber}}),Object.defineProperty(t,"_shouldUpdateColVisibilityAfterGroup",{enumerable:!0,get:function(){return he._shouldUpdateColVisibilityAfterGroup}}),Object.defineProperty(t,"_getActiveDomElement",{enumerable:!0,get:function(){return he._getActiveDomElement}}),Object.defineProperty(t,"_isNothingFocused",{enumerable:!0,get:function(){return he._isNothingFocused}}),Object.defineProperty(t,"_getDocument",{enumerable:!0,get:function(){return he._getDocument}}),Object.defineProperty(t,"_getPageBody",{enumerable:!0,get:function(){return he._getPageBody}}),Object.defineProperty(t,"_anchorElementToMouseMoveEvent",{enumerable:!0,get:function(){return he._anchorElementToMouseMoveEvent}}),Object.defineProperty(t,"_getRootNode",{enumerable:!0,get:function(){return he._getRootNode}}),Object.defineProperty(t,"_getGroupAggFiltering",{enumerable:!0,get:function(){return he._getGroupAggFiltering}}),Object.defineProperty(t,"_isRowSelection",{enumerable:!0,get:function(){return he._isRowSelection}}),Object.defineProperty(t,"_isGetRowHeightFunction",{enumerable:!0,get:function(){return he._isGetRowHeightFunction}}),Object.defineProperty(t,"_getGroupSelection",{enumerable:!0,get:function(){return he._getGroupSelection}}),Object.defineProperty(t,"_getGroupSelectsDescendants",{enumerable:!0,get:function(){return he._getGroupSelectsDescendants}}),Object.defineProperty(t,"_getIsRowSelectable",{enumerable:!0,get:function(){return he._getIsRowSelectable}}),Object.defineProperty(t,"_getCheckboxes",{enumerable:!0,get:function(){return he._getCheckboxes}}),Object.defineProperty(t,"_getCheckboxLocation",{enumerable:!0,get:function(){return he._getCheckboxLocation}}),Object.defineProperty(t,"_getHeaderCheckbox",{enumerable:!0,get:function(){return he._getHeaderCheckbox}}),Object.defineProperty(t,"_isMultiRowSelection",{enumerable:!0,get:function(){return he._isMultiRowSelection}}),Object.defineProperty(t,"_getFillHandle",{enumerable:!0,get:function(){return he._getFillHandle}}),Object.defineProperty(t,"_isCellSelectionEnabled",{enumerable:!0,get:function(){return he._isCellSelectionEnabled}}),Object.defineProperty(t,"_getSuppressMultiRanges",{enumerable:!0,get:function(){return he._getSuppressMultiRanges}}),Object.defineProperty(t,"_getRowSelectionMode",{enumerable:!0,get:function(){return he._getRowSelectionMode}}),Object.defineProperty(t,"_isLegacyMenuEnabled",{enumerable:!0,get:function(){return he._isLegacyMenuEnabled}}),Object.defineProperty(t,"_isColumnMenuAnchoringEnabled",{enumerable:!0,get:function(){return he._isColumnMenuAnchoringEnabled}}),Object.defineProperty(t,"_isUsingNewRowSelectionAPI",{enumerable:!0,get:function(){return he._isUsingNewRowSelectionAPI}}),Object.defineProperty(t,"_isUsingNewCellSelectionAPI",{enumerable:!0,get:function(){return he._isUsingNewCellSelectionAPI}}),Object.defineProperty(t,"_isGroupRowsSticky",{enumerable:!0,get:function(){return he._isGroupRowsSticky}});var pe=i(5889);Object.defineProperty(t,"LocalEventService",{enumerable:!0,get:function(){return pe.LocalEventService}});var ge=i(7600);Object.defineProperty(t,"GridCtrl",{enumerable:!0,get:function(){return ge.GridCtrl}});var fe=i(9944);Object.defineProperty(t,"LocaleService",{enumerable:!0,get:function(){return fe.LocaleService}});var me=i(7230);Object.defineProperty(t,"_getLocaleTextFunc",{enumerable:!0,get:function(){return me._getLocaleTextFunc}});var ve=i(6257);Object.defineProperty(t,"_areCellsEqual",{enumerable:!0,get:function(){return ve._areCellsEqual}}),Object.defineProperty(t,"_createCellId",{enumerable:!0,get:function(){return ve._createCellId}}),Object.defineProperty(t,"_isRowBefore",{enumerable:!0,get:function(){return ve._isRowBefore}}),Object.defineProperty(t,"_isSameRow",{enumerable:!0,get:function(){return ve._isSameRow}}),Object.defineProperty(t,"_getRowNode",{enumerable:!0,get:function(){return ve._getRowNode}}),Object.defineProperty(t,"_getCellByPosition",{enumerable:!0,get:function(){return ve._getCellByPosition}});var be=i(920);Object.defineProperty(t,"_ALL_GRID_OPTIONS",{enumerable:!0,get:function(){return be._ALL_GRID_OPTIONS}}),Object.defineProperty(t,"_BOOLEAN_MIXED_GRID_OPTIONS",{enumerable:!0,get:function(){return be._BOOLEAN_MIXED_GRID_OPTIONS}});var ye=i(9270);Object.defineProperty(t,"_HeaderComp",{enumerable:!0,get:function(){return ye.HeaderComp}});var we=i(8759);Object.defineProperty(t,"BaseComponentWrapper",{enumerable:!0,get:function(){return we.BaseComponentWrapper}});var Ce=i(3386);Object.defineProperty(t,"TooltipFeature",{enumerable:!0,get:function(){return Ce.TooltipFeature}}),Object.defineProperty(t,"_shouldDisplayTooltip",{enumerable:!0,get:function(){return Ce._shouldDisplayTooltip}}),Object.defineProperty(t,"_getShouldDisplayTooltip",{enumerable:!0,get:function(){return Ce._getShouldDisplayTooltip}}),Object.defineProperty(t,"_isShowTooltipWhenTruncated",{enumerable:!0,get:function(){return Ce._isShowTooltipWhenTruncated}});var _e=i(5230);Object.defineProperty(t,"_setAriaLevel",{enumerable:!0,get:function(){return _e._setAriaLevel}}),Object.defineProperty(t,"_setAriaLabel",{enumerable:!0,get:function(){return _e._setAriaLabel}}),Object.defineProperty(t,"_setAriaDescribedBy",{enumerable:!0,get:function(){return _e._setAriaDescribedBy}}),Object.defineProperty(t,"_setAriaExpanded",{enumerable:!0,get:function(){return _e._setAriaExpanded}}),Object.defineProperty(t,"_setAriaLabelledBy",{enumerable:!0,get:function(){return _e._setAriaLabelledBy}}),Object.defineProperty(t,"_setAriaChecked",{enumerable:!0,get:function(){return _e._setAriaChecked}}),Object.defineProperty(t,"_setAriaControls",{enumerable:!0,get:function(){return _e._setAriaControls}}),Object.defineProperty(t,"_setAriaRole",{enumerable:!0,get:function(){return _e._setAriaRole}}),Object.defineProperty(t,"_setAriaColIndex",{enumerable:!0,get:function(){return _e._setAriaColIndex}}),Object.defineProperty(t,"_setAriaColSpan",{enumerable:!0,get:function(){return _e._setAriaColSpan}}),Object.defineProperty(t,"_setAriaRowIndex",{enumerable:!0,get:function(){return _e._setAriaRowIndex}}),Object.defineProperty(t,"_setAriaDisabled",{enumerable:!0,get:function(){return _e._setAriaDisabled}}),Object.defineProperty(t,"_setAriaHasPopup",{enumerable:!0,get:function(){return _e._setAriaHasPopup}}),Object.defineProperty(t,"_removeAriaExpanded",{enumerable:!0,get:function(){return _e._removeAriaExpanded}}),Object.defineProperty(t,"_removeAriaSort",{enumerable:!0,get:function(){return _e._removeAriaSort}}),Object.defineProperty(t,"_setAriaSort",{enumerable:!0,get:function(){return _e._setAriaSort}}),Object.defineProperty(t,"_setAriaColCount",{enumerable:!0,get:function(){return _e._setAriaColCount}}),Object.defineProperty(t,"_setAriaRowCount",{enumerable:!0,get:function(){return _e._setAriaRowCount}}),Object.defineProperty(t,"_setAriaActiveDescendant",{enumerable:!0,get:function(){return _e._setAriaActiveDescendant}}),Object.defineProperty(t,"_setAriaSelected",{enumerable:!0,get:function(){return _e._setAriaSelected}}),Object.defineProperty(t,"_setAriaPosInSet",{enumerable:!0,get:function(){return _e._setAriaPosInSet}}),Object.defineProperty(t,"_setAriaSetSize",{enumerable:!0,get:function(){return _e._setAriaSetSize}}),Object.defineProperty(t,"_setAriaHidden",{enumerable:!0,get:function(){return _e._setAriaHidden}}),Object.defineProperty(t,"_getAriaPosInSet",{enumerable:!0,get:function(){return _e._getAriaPosInSet}});var Se=i(1502);Object.defineProperty(t,"_EmptyArray",{enumerable:!0,get:function(){return Se._EmptyArray}}),Object.defineProperty(t,"_removeFromArray",{enumerable:!0,get:function(){return Se._removeFromArray}}),Object.defineProperty(t,"_last",{enumerable:!0,get:function(){return Se._last}}),Object.defineProperty(t,"_areEqual",{enumerable:!0,get:function(){return Se._areEqual}});var xe=i(8667);Object.defineProperty(t,"_isIOSUserAgent",{enumerable:!0,get:function(){return xe._isIOSUserAgent}});var Ae=i(6800);Object.defineProperty(t,"ChangedPath",{enumerable:!0,get:function(){return Ae.ChangedPath}});var Ee=i(9827);Object.defineProperty(t,"_serialiseDate",{enumerable:!0,get:function(){return Ee._serialiseDate}}),Object.defineProperty(t,"_parseDateTimeFromString",{enumerable:!0,get:function(){return Ee._parseDateTimeFromString}});var Te=i(3507);Object.defineProperty(t,"_getAbsoluteHeight",{enumerable:!0,get:function(){return Te._getAbsoluteHeight}}),Object.defineProperty(t,"_getAbsoluteWidth",{enumerable:!0,get:function(){return Te._getAbsoluteWidth}}),Object.defineProperty(t,"_setDisplayed",{enumerable:!0,get:function(){return Te._setDisplayed}}),Object.defineProperty(t,"_clearElement",{enumerable:!0,get:function(){return Te._clearElement}}),Object.defineProperty(t,"_removeFromParent",{enumerable:!0,get:function(){return Te._removeFromParent}}),Object.defineProperty(t,"_radioCssClass",{enumerable:!0,get:function(){return Te._radioCssClass}}),Object.defineProperty(t,"_loadTemplate",{enumerable:!0,get:function(){return Te._loadTemplate}}),Object.defineProperty(t,"_isVisible",{enumerable:!0,get:function(){return Te._isVisible}}),Object.defineProperty(t,"_setFixedWidth",{enumerable:!0,get:function(){return Te._setFixedWidth}}),Object.defineProperty(t,"_setDisabled",{enumerable:!0,get:function(){return Te._setDisabled}}),Object.defineProperty(t,"_setVisible",{enumerable:!0,get:function(){return Te._setVisible}}),Object.defineProperty(t,"_bindCellRendererToHtmlElement",{enumerable:!0,get:function(){return Te._bindCellRendererToHtmlElement}}),Object.defineProperty(t,"_getInnerHeight",{enumerable:!0,get:function(){return Te._getInnerHeight}}),Object.defineProperty(t,"_getInnerWidth",{enumerable:!0,get:function(){return Te._getInnerWidth}}),Object.defineProperty(t,"_isNodeOrElement",{enumerable:!0,get:function(){return Te._isNodeOrElement}}),Object.defineProperty(t,"_observeResize",{enumerable:!0,get:function(){return Te._observeResize}}),Object.defineProperty(t,"_preserveRangesWhile",{enumerable:!0,get:function(){return Te._preserveRangesWhile}});var ke=i(4009);Object.defineProperty(t,"_selectAllCells",{enumerable:!0,get:function(){return ke._selectAllCells}});var De=i(2979);Object.defineProperty(t,"_stopPropagationForAgGrid",{enumerable:!0,get:function(){return De._stopPropagationForAgGrid}}),Object.defineProperty(t,"_isStopPropagationForAgGrid",{enumerable:!0,get:function(){return De._isStopPropagationForAgGrid}}),Object.defineProperty(t,"_isElementInEventPath",{enumerable:!0,get:function(){return De._isElementInEventPath}});var Me=i(2043);Object.defineProperty(t,"_warnOnce",{enumerable:!0,get:function(){return Me._warnOnce}}),Object.defineProperty(t,"_debounce",{enumerable:!0,get:function(){return Me._debounce}}),Object.defineProperty(t,"_doOnce",{enumerable:!0,get:function(){return Me._doOnce}}),Object.defineProperty(t,"_waitUntil",{enumerable:!0,get:function(){return Me._waitUntil}});var Pe=i(7764);Object.defineProperty(t,"_warn",{enumerable:!0,get:function(){return Pe._warn}}),Object.defineProperty(t,"_error",{enumerable:!0,get:function(){return Pe._error}}),Object.defineProperty(t,"_errMsg",{enumerable:!0,get:function(){return Pe._errMsg}}),Object.defineProperty(t,"_preInitErrMsg",{enumerable:!0,get:function(){return Pe._preInitErrMsg}});var Re=i(9970);Object.defineProperty(t,"_createIcon",{enumerable:!0,get:function(){return Re._createIcon}}),Object.defineProperty(t,"_createIconNoSpan",{enumerable:!0,get:function(){return Re._createIconNoSpan}});var Ie=i(1298);Object.defineProperty(t,"_fuzzySuggestions",{enumerable:!0,get:function(){return Ie._fuzzySuggestions}});var Oe=i(4422);Object.defineProperty(t,"_exists",{enumerable:!0,get:function(){return Oe._exists}}),Object.defineProperty(t,"_missing",{enumerable:!0,get:function(){return Oe._missing}}),Object.defineProperty(t,"_jsonEquals",{enumerable:!0,get:function(){return Oe._jsonEquals}}),Object.defineProperty(t,"_toStringOrNull",{enumerable:!0,get:function(){return Oe._toStringOrNull}}),Object.defineProperty(t,"_makeNull",{enumerable:!0,get:function(){return Oe._makeNull}}),Object.defineProperty(t,"_defaultComparator",{enumerable:!0,get:function(){return Oe._defaultComparator}});var Ne=i(6466);Object.defineProperty(t,"_isEventFromPrintableCharacter",{enumerable:!0,get:function(){return Ne._isEventFromPrintableCharacter}});var Le=i(7698);Object.defineProperty(t,"_formatNumberCommas",{enumerable:!0,get:function(){return Le._formatNumberCommas}});var Fe=i(6996);Object.defineProperty(t,"_mergeDeep",{enumerable:!0,get:function(){return Fe._mergeDeep}});var $e=i(7766);Object.defineProperty(t,"_escapeString",{enumerable:!0,get:function(){return $e._escapeString}});var Ge=i(7990);Object.defineProperty(t,"AgPromise",{enumerable:!0,get:function(){return Ge.AgPromise}}),Object.defineProperty(t,"_isPromise",{enumerable:!0,get:function(){return Ge._isPromise}});var Be=i(2331);Object.defineProperty(t,"_addFocusableContainerListener",{enumerable:!0,get:function(){return Be._addFocusableContainerListener}}),Object.defineProperty(t,"_findFocusableElements",{enumerable:!0,get:function(){return Be._findFocusableElements}}),Object.defineProperty(t,"_focusInto",{enumerable:!0,get:function(){return Be._focusInto}}),Object.defineProperty(t,"_findNextFocusableElement",{enumerable:!0,get:function(){return Be._findNextFocusableElement}}),Object.defineProperty(t,"_findTabbableParent",{enumerable:!0,get:function(){return Be._findTabbableParent}}),Object.defineProperty(t,"_focusGridInnerElement",{enumerable:!0,get:function(){return Be._focusGridInnerElement}}),Object.defineProperty(t,"_isKeyboardMode",{enumerable:!0,get:function(){return Be._isKeyboardMode}}),Object.defineProperty(t,"_focusNextGridCoreContainer",{enumerable:!0,get:function(){return Be._focusNextGridCoreContainer}}),n.__exportStar(i(7419),t),n.__exportStar(i(7919),t);var He=i(7331);Object.defineProperty(t,"BaseCreator",{enumerable:!0,get:function(){return He.BaseCreator}});var ze=i(8376);Object.defineProperty(t,"BaseGridSerializingSession",{enumerable:!0,get:function(){return ze.BaseGridSerializingSession}});var We=i(3885);Object.defineProperty(t,"_downloadFile",{enumerable:!0,get:function(){return We._downloadFile}});var Ve=i(2132);Object.defineProperty(t,"ModuleRegistry",{enumerable:!0,get:function(){return Ve.ModuleRegistry}}),Object.defineProperty(t,"_getGridRegisteredModules",{enumerable:!0,get:function(){return Ve._getGridRegisteredModules}}),Object.defineProperty(t,"_setUmd",{enumerable:!0,get:function(){return Ve._setUmd}});var je=i(5010);Object.defineProperty(t,"ValidationModule",{enumerable:!0,get:function(){return je.ValidationModule}});var Ue=i(4074);Object.defineProperty(t,"_ColumnMoveModule",{enumerable:!0,get:function(){return Ue.ColumnMoveModule}});var Ye=i(4388);Object.defineProperty(t,"_DragModule",{enumerable:!0,get:function(){return Ye.DragModule}}),Object.defineProperty(t,"_HorizontalResizeModule",{enumerable:!0,get:function(){return Ye.HorizontalResizeModule}}),Object.defineProperty(t,"_SharedDragAndDropModule",{enumerable:!0,get:function(){return Ye.SharedDragAndDropModule}}),Object.defineProperty(t,"DragAndDropModule",{enumerable:!0,get:function(){return Ye.DragAndDropModule}}),Object.defineProperty(t,"RowDragModule",{enumerable:!0,get:function(){return Ye.RowDragModule}});var qe=i(5432);Object.defineProperty(t,"_ColumnFilterModule",{enumerable:!0,get:function(){return qe.ColumnFilterModule}}),Object.defineProperty(t,"_FilterCoreModule",{enumerable:!0,get:function(){return qe.FilterCoreModule}}),Object.defineProperty(t,"_FilterValueModule",{enumerable:!0,get:function(){return qe.FilterValueModule}}),Object.defineProperty(t,"CustomFilterModule",{enumerable:!0,get:function(){return qe.CustomFilterModule}}),Object.defineProperty(t,"QuickFilterModule",{enumerable:!0,get:function(){return qe.QuickFilterModule}}),Object.defineProperty(t,"TextFilterModule",{enumerable:!0,get:function(){return qe.TextFilterModule}}),Object.defineProperty(t,"NumberFilterModule",{enumerable:!0,get:function(){return qe.NumberFilterModule}}),Object.defineProperty(t,"DateFilterModule",{enumerable:!0,get:function(){return qe.DateFilterModule}}),Object.defineProperty(t,"ExternalFilterModule",{enumerable:!0,get:function(){return qe.ExternalFilterModule}});var Ke=i(4652);Object.defineProperty(t,"_EditCoreModule",{enumerable:!0,get:function(){return Ke.EditCoreModule}}),Object.defineProperty(t,"NumberEditorModule",{enumerable:!0,get:function(){return Ke.NumberEditorModule}}),Object.defineProperty(t,"DateEditorModule",{enumerable:!0,get:function(){return Ke.DateEditorModule}}),Object.defineProperty(t,"CheckboxEditorModule",{enumerable:!0,get:function(){return Ke.CheckboxEditorModule}}),Object.defineProperty(t,"TextEditorModule",{enumerable:!0,get:function(){return Ke.TextEditorModule}}),Object.defineProperty(t,"LargeTextEditorModule",{enumerable:!0,get:function(){return Ke.LargeTextEditorModule}}),Object.defineProperty(t,"SelectEditorModule",{enumerable:!0,get:function(){return Ke.SelectEditorModule}}),Object.defineProperty(t,"UndoRedoEditModule",{enumerable:!0,get:function(){return Ke.UndoRedoEditModule}}),Object.defineProperty(t,"CustomEditorModule",{enumerable:!0,get:function(){return Ke.CustomEditorModule}});var Xe=i(3352);Object.defineProperty(t,"RowSelectionModule",{enumerable:!0,get:function(){return Xe.RowSelectionModule}}),Object.defineProperty(t,"_SharedRowSelectionModule",{enumerable:!0,get:function(){return Xe.SharedRowSelectionModule}});var Ze=i(6437);Object.defineProperty(t,"_CsrmSsrmSharedApiModule",{enumerable:!0,get:function(){return Ze.CsrmSsrmSharedApiModule}}),Object.defineProperty(t,"_SsrmInfiniteSharedApiModule",{enumerable:!0,get:function(){return Ze.SsrmInfiniteSharedApiModule}});var Je=i(3472);Object.defineProperty(t,"_SharedMenuModule",{enumerable:!0,get:function(){return Je.SharedMenuModule}});var Qe=i(6620);Object.defineProperty(t,"_SortModule",{enumerable:!0,get:function(){return Qe.SortModule}});var et=i(2074);Object.defineProperty(t,"AlignedGridsModule",{enumerable:!0,get:function(){return et.AlignedGridsModule}});var tt=i(9722);Object.defineProperty(t,"ClientSideRowModelModule",{enumerable:!0,get:function(){return tt.ClientSideRowModelModule}}),Object.defineProperty(t,"ClientSideRowModelApiModule",{enumerable:!0,get:function(){return tt.ClientSideRowModelApiModule}});var it=i(9734);Object.defineProperty(t,"CsvExportModule",{enumerable:!0,get:function(){return it.CsvExportModule}});var nt=i(4002);Object.defineProperty(t,"InfiniteRowModelModule",{enumerable:!0,get:function(){return nt.InfiniteRowModelModule}});var ot=i(3137);Object.defineProperty(t,"_PopupModule",{enumerable:!0,get:function(){return ot.PopupModule}});var rt=i(928);Object.defineProperty(t,"_KeyboardNavigationModule",{enumerable:!0,get:function(){return rt.KeyboardNavigationModule}});var st=i(3498);Object.defineProperty(t,"HighlightChangesModule",{enumerable:!0,get:function(){return st.HighlightChangesModule}});var at=i(6041);Object.defineProperty(t,"_ColumnGroupModule",{enumerable:!0,get:function(){return at.ColumnGroupModule}});var lt=i(6989);Object.defineProperty(t,"GridStateModule",{enumerable:!0,get:function(){return lt.GridStateModule}});var ct=i(2027);Object.defineProperty(t,"ColumnApiModule",{enumerable:!0,get:function(){return ct.ColumnApiModule}});var dt=i(1824);Object.defineProperty(t,"PaginationModule",{enumerable:!0,get:function(){return dt.PaginationModule}});var ut=i(9642);Object.defineProperty(t,"RowApiModule",{enumerable:!0,get:function(){return ut.RowApiModule}}),Object.defineProperty(t,"ScrollApiModule",{enumerable:!0,get:function(){return ut.ScrollApiModule}});var ht=i(6964);Object.defineProperty(t,"RenderApiModule",{enumerable:!0,get:function(){return ht.RenderApiModule}});var pt=i(3856);Object.defineProperty(t,"ColumnAutoSizeModule",{enumerable:!0,get:function(){return pt.ColumnAutoSizeModule}});var gt=i(5423);Object.defineProperty(t,"PinnedRowModule",{enumerable:!0,get:function(){return gt.PinnedRowModule}});var ft=i(4265);Object.defineProperty(t,"CellSpanModule",{enumerable:!0,get:function(){return ft.CellSpanModule}});var mt=i(6431);Object.defineProperty(t,"ValueCacheModule",{enumerable:!0,get:function(){return mt.ValueCacheModule}}),Object.defineProperty(t,"CellApiModule",{enumerable:!0,get:function(){return mt.CellApiModule}});var vt=i(8594);Object.defineProperty(t,"CellStyleModule",{enumerable:!0,get:function(){return vt.CellStyleModule}}),Object.defineProperty(t,"RowStyleModule",{enumerable:!0,get:function(){return vt.RowStyleModule}});var bt=i(1690);Object.defineProperty(t,"ColumnHoverModule",{enumerable:!0,get:function(){return bt.ColumnHoverModule}});var yt=i(9410);Object.defineProperty(t,"EventApiModule",{enumerable:!0,get:function(){return yt.EventApiModule}});var wt=i(2277);Object.defineProperty(t,"TooltipModule",{enumerable:!0,get:function(){return wt.TooltipModule}});var Ct=i(9519);Object.defineProperty(t,"LocaleModule",{enumerable:!0,get:function(){return Ct.LocaleModule}});var _t=i(4577);Object.defineProperty(t,"RowAutoHeightModule",{enumerable:!0,get:function(){return _t.RowAutoHeightModule}});var St=i(2728);Object.defineProperty(t,"_SharedExportModule",{enumerable:!0,get:function(){return St.SharedExportModule}});var xt=i(1621);Object.defineProperty(t,"AllCommunityModule",{enumerable:!0,get:function(){return xt.AllCommunityModule}}),n.__exportStar(i(7968),t);var At=i(6607);Object.defineProperty(t,"createPart",{enumerable:!0,get:function(){return At.createPart}});var Et=i(9621);Object.defineProperty(t,"createTheme",{enumerable:!0,get:function(){return Et.createTheme}}),Object.defineProperty(t,"_asThemeImpl",{enumerable:!0,get:function(){return Et._asThemeImpl}});var Tt=i(8265);Object.defineProperty(t,"checkboxStyleDefault",{enumerable:!0,get:function(){return Tt.checkboxStyleDefault}});var kt=i(8689);Object.defineProperty(t,"colorSchemeDark",{enumerable:!0,get:function(){return kt.colorSchemeDark}}),Object.defineProperty(t,"colorSchemeDarkBlue",{enumerable:!0,get:function(){return kt.colorSchemeDarkBlue}}),Object.defineProperty(t,"colorSchemeDarkWarm",{enumerable:!0,get:function(){return kt.colorSchemeDarkWarm}}),Object.defineProperty(t,"colorSchemeLight",{enumerable:!0,get:function(){return kt.colorSchemeLight}}),Object.defineProperty(t,"colorSchemeLightCold",{enumerable:!0,get:function(){return kt.colorSchemeLightCold}}),Object.defineProperty(t,"colorSchemeLightWarm",{enumerable:!0,get:function(){return kt.colorSchemeLightWarm}}),Object.defineProperty(t,"colorSchemeVariable",{enumerable:!0,get:function(){return kt.colorSchemeVariable}});var Dt=i(6407);Object.defineProperty(t,"iconOverrides",{enumerable:!0,get:function(){return Dt.iconOverrides}}),Object.defineProperty(t,"iconSetAlpine",{enumerable:!0,get:function(){return Dt.iconSetAlpine}}),Object.defineProperty(t,"iconSetMaterial",{enumerable:!0,get:function(){return Dt.iconSetMaterial}}),Object.defineProperty(t,"iconSetQuartz",{enumerable:!0,get:function(){return Dt.iconSetQuartz}}),Object.defineProperty(t,"iconSetQuartzBold",{enumerable:!0,get:function(){return Dt.iconSetQuartzBold}}),Object.defineProperty(t,"iconSetQuartzLight",{enumerable:!0,get:function(){return Dt.iconSetQuartzLight}}),Object.defineProperty(t,"iconSetQuartzRegular",{enumerable:!0,get:function(){return Dt.iconSetQuartzRegular}});var Mt=i(7161);Object.defineProperty(t,"inputStyleBase",{enumerable:!0,get:function(){return Mt.inputStyleBase}}),Object.defineProperty(t,"inputStyleBordered",{enumerable:!0,get:function(){return Mt.inputStyleBordered}}),Object.defineProperty(t,"inputStyleUnderlined",{enumerable:!0,get:function(){return Mt.inputStyleUnderlined}});var Pt=i(2475);Object.defineProperty(t,"buttonStyleAlpine",{enumerable:!0,get:function(){return Pt.buttonStyleAlpine}}),Object.defineProperty(t,"buttonStyleBalham",{enumerable:!0,get:function(){return Pt.buttonStyleBalham}}),Object.defineProperty(t,"buttonStyleBase",{enumerable:!0,get:function(){return Pt.buttonStyleBase}}),Object.defineProperty(t,"buttonStyleQuartz",{enumerable:!0,get:function(){return Pt.buttonStyleQuartz}});var Rt=i(5117);Object.defineProperty(t,"tabStyleAlpine",{enumerable:!0,get:function(){return Rt.tabStyleAlpine}}),Object.defineProperty(t,"tabStyleBase",{enumerable:!0,get:function(){return Rt.tabStyleBase}}),Object.defineProperty(t,"tabStyleMaterial",{enumerable:!0,get:function(){return Rt.tabStyleMaterial}}),Object.defineProperty(t,"tabStyleQuartz",{enumerable:!0,get:function(){return Rt.tabStyleQuartz}}),Object.defineProperty(t,"tabStyleRolodex",{enumerable:!0,get:function(){return Rt.tabStyleRolodex}});var It=i(1697);Object.defineProperty(t,"columnDropStyleBordered",{enumerable:!0,get:function(){return It.columnDropStyleBordered}}),Object.defineProperty(t,"columnDropStylePlain",{enumerable:!0,get:function(){return It.columnDropStylePlain}});var Ot=i(2525);Object.defineProperty(t,"styleMaterial",{enumerable:!0,get:function(){return Ot.styleMaterial}}),Object.defineProperty(t,"themeAlpine",{enumerable:!0,get:function(){return Ot.themeAlpine}}),Object.defineProperty(t,"themeBalham",{enumerable:!0,get:function(){return Ot.themeBalham}}),Object.defineProperty(t,"themeMaterial",{enumerable:!0,get:function(){return Ot.themeMaterial}}),Object.defineProperty(t,"themeQuartz",{enumerable:!0,get:function(){return Ot.themeQuartz}})},4011:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationFrameModule=void 0;const n=i(7205),o=i(2612);t.AnimationFrameModule={moduleName:"AnimationFrame",version:n.VERSION,beans:[o.AnimationFrameService]}},2612:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationFrameService=t._requestAnimationFrame=void 0;const n=i(8731),o=i(7274),r=i(7764);function s(e,t){const i=(0,o._getWindow)(e);i.requestAnimationFrame?i.requestAnimationFrame(t):i.webkitRequestAnimationFrame?i.webkitRequestAnimationFrame(t):i.setTimeout(t,0)}t._requestAnimationFrame=s;class a extends n.BeanStub{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(e){const{gos:t,pagination:i}=this.beans,n=t.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,n&&0===e){const e=i?.getCurrentPage()??0;e!==this.lastPage&&(this.lastPage=e,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame")}verifyAnimationFrameOn(e){!1===this.active&&(0,r._warn)(92,{methodName:e})}createTask(e,t,i){this.verifyAnimationFrameOn(i);const n={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],n),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((e,i)=>e.index!==i.index?t*(i.index-e.index):i.createOrder-e.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,i=t.list,n=this.createTasksP2,o=n.list,r=this.destroyTasks,s=(new Date).getTime();let a=(new Date).getTime()-s;const l=e<=0,c=this.beans.ctrlsSvc.getScrollFeature();for(;l||a<e;){if(!c.scrollGridIfNeeded()){let e;if(i.length)this.sortTaskList(t),e=i.pop().task;else if(o.length)this.sortTaskList(n),e=o.pop().task;else{if(!r.length){this.cancelledTasks.clear();break}e=r.pop()}this.cancelledTasks.has(e)||e()}a=(new Date).getTime()-s}i.length||o.length||r.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);s(this.beans,e)}isQueueEmpty(){return!this.ticking}}t.AnimationFrameService=a},9410:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.EventApiModule=void 0;const n=i(7205),o=i(6107),r=i(6470);t.EventApiModule={moduleName:"EventApi",version:n.VERSION,apiFunctions:{addEventListener:r.addEventListener,addGlobalListener:r.addGlobalListener,removeEventListener:r.removeEventListener,removeGlobalListener:r.removeGlobalListener},beans:[o.ApiEventService]}},6107:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ApiEventService=void 0;const n=i(8731),o=i(7968);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){this.wrapSvc=this.beans.frameworkOverrides.createGlobalEventListenerWrapper?.()}addEventListener(e,t){const i=this.wrapSvc?.wrap(t)??t,n=!o.ALWAYS_SYNC_GLOBAL_EVENTS.has(e),r=n?this.asyncListeners:this.syncListeners;r.has(e)||r.set(e,new Set),r.get(e).add(i),this.eventSvc.addEventListener(e,i,n)}removeEventListener(e,t){const i=this.wrapSvc?.unwrap(t)??t,n=this.asyncListeners.get(e),o=!!n?.delete(i);o||this.syncListeners.get(e)?.delete(i),this.eventSvc.removeEventListener(e,i,o)}addGlobalListener(e){const t=this.wrapSvc?.wrapGlobal(e)??e,i=(e,i)=>{o.ALWAYS_SYNC_GLOBAL_EVENTS.has(e)&&t(e,i)},n=(e,i)=>{o.ALWAYS_SYNC_GLOBAL_EVENTS.has(e)||t(e,i)};this.globalListenerPairs.set(e,{syncListener:i,asyncListener:n});const r=this.eventSvc;r.addGlobalListener(i,!1),r.addGlobalListener(n,!0)}removeGlobalListener(e){const{eventSvc:t,wrapSvc:i,globalListenerPairs:n}=this,o=i?.unwrapGlobal(e)??e;if(n.has(o)){const{syncListener:i,asyncListener:r}=n.get(o);t.removeGlobalListener(i,!1),t.removeGlobalListener(r,!0),n.delete(e)}else this.syncGlobalListeners.delete(o),t.removeGlobalListener(o,!1)}destroyEventListeners(e,t){e.forEach((e,i)=>{e.forEach(e=>this.eventSvc.removeEventListener(i,e,t)),e.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(e=>this.eventSvc.removeGlobalListener(e,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);const{globalListenerPairs:e,eventSvc:t}=this;e.forEach(({syncListener:e,asyncListener:i})=>{t.removeGlobalListener(e,!1),t.removeGlobalListener(i,!0)}),e.clear()}}t.ApiEventService=r},6470:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.removeGlobalListener=t.addGlobalListener=t.removeEventListener=t.addEventListener=void 0,t.addEventListener=function(e,t,i){e.apiEventSvc?.addEventListener(t,i)},t.removeEventListener=function(e,t,i){e.apiEventSvc?.removeEventListener(t,i)},t.addGlobalListener=function(e,t){e.apiEventSvc?.addGlobalListener(t)},t.removeGlobalListener=function(e,t){e.apiEventSvc?.removeGlobalListener(t)}},9519:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.LocaleModule=void 0;const n=i(7205),o=i(9944);t.LocaleModule={moduleName:"Locale",version:n.VERSION,beans:[o.LocaleService]}},9944:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.LocaleService=void 0;const n=i(8731);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){const e=this.gos,t=e.getCallback("getLocaleText");if(t)return(e,i,n)=>t({key:e,defaultValue:i,variableValues:n});const i=e.get("localeText");return(e,t,n)=>{let o=i&&i[e];if(o&&n&&n.length){let e=0;for(;!(e>=n.length)&&-1!==o.indexOf("${variable}");)o=o.replace("${variable}",n[e++])}return o??t}}}t.LocaleService=o},7230:function(e,t){function i(e,t){return t}Object.defineProperty(t,"__esModule",{value:!0}),t._getLocaleTextFunc=void 0,t._getLocaleTextFunc=function(e){return e?.getLocaleTextFunc()??i}},297:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.hidePopupMenu=t.showColumnMenu=void 0;const n=i(7764);t.showColumnMenu=function(e,t){const i=e.colModel.getCol(t);i?e.menuSvc?.showColumnMenu({column:i,positionBy:"auto"}):(0,n._error)(12,{colKey:t})},t.hidePopupMenu=function(e){e.menuSvc?.hidePopupMenu()}},8994:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._setColMenuVisible=t.MenuService=void 0;const n=i(8731),o=i(3355),r=i(7274),s=i(8667),a=i(2612);class l extends n.BeanStub{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=e??t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const{enterpriseMenuFactory:t,filterMenuFactory:i}=this.beans,n=t&&(0,r._isLegacyMenuEnabled)(this.gos)?t:i;this.showColumnMenuCommon(n,e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory?.showMenuAfterContextMenuEvent(e,t,i)}hidePopupMenu(){this.beans.contextMenuSvc?.hideActiveMenu(),this.activeMenuFactory?.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){const{suppressHeaderMenuButton:t}=e.getColDef();return!t&&!!this.activeMenuFactory?.isMenuEnabled(e)&&((0,r._isLegacyMenuEnabled)(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.beans.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){const t=e&&(0,o.isColumn)(e)?e.getColDef():e?.getColGroupDef();return!t?.suppressHeaderContextMenu&&"new"===this.gos.get("columnMenu")}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!((0,s._isIOSUserAgent)()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!(0,r._isLegacyMenuEnabled)(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!(!this.beans.filterManager?.isFilterAllowed(e)||(0,r._isLegacyMenuEnabled)(this.gos)||this.isFilterMenuInHeaderEnabled(e)||this.isFloatingFilterButtonDisplayed(e))}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos,t=e.get("suppressMenuHide");return(0,r._isLegacyMenuEnabled)(e)?!!e.exists("suppressMenuHide")&&t:t}showColumnMenuCommon(e,t,i,n){const{positionBy:o,onClosedCallback:r}=t,s=t.column;if("button"===o){const{buttonElement:o}=t;e?.showMenuAfterButtonClick(s,o,i,r,n)}else if("mouse"===o){const{mouseEvent:o}=t;e?.showMenuAfterMouseEvent(s,o,i,r,n)}else if(s){const t=this.beans,o=t.ctrlsSvc;o.getScrollFeature().ensureColumnVisible(s,"auto"),(0,a._requestAnimationFrame)(t,()=>{const t=o.getHeaderRowContainerCtrl(s.getPinned())?.getHeaderCtrlForColumn(s);t&&e?.showMenuAfterButtonClick(s,t.getAnchorElementForMenu(n),i,r,!0)})}}}t.MenuService=l,t._setColMenuVisible=function(e,t,i){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",i))}},3472:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SharedMenuModule=void 0;const n=i(7205),o=i(297),r=i(8994);t.SharedMenuModule={moduleName:"SharedMenu",version:n.VERSION,beans:[r.MenuService],apiFunctions:{showColumnMenu:o.showColumnMenu,hidePopupMenu:o.hidePopupMenu}}},1997:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getState=void 0,t.getState=function(e){return e.stateSvc?.getState()??{}}},6414:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.migrateGridStateModel=void 0,t.migrateGridStateModel=function(e){return(e={...e}).version||(e.version="32.1.0"),"32.1.0"===e.version&&(e=function(e){return e.cellSelection=function(e){if(e&&"object"==typeof e)return e.rangeSelection}(e),e}(e)),e}},6989:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridStateModule=void 0;const n=i(7205),o=i(1997),r=i(3374);t.GridStateModule={moduleName:"GridState",version:n.VERSION,beans:[r.StateService],apiFunctions:{getState:o.getState}}},3374:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.StateService=void 0;const n=i(2885),o=i(8731),r=i(7274),s=i(2043),a=i(4422),l=i(7205),c=i(6414);class d extends o.BeanStub{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=(0,s._debounce)(this,()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=(0,s._debounce)(this,()=>{this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())},0),this.onRowSelectedDebounced=(0,s._debounce)(this,()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){this.isClientSideRowModel=(0,r._isClientSideRowModel)(this.gos),this.cachedState=this.getInitialState(),this.setCachedStateValue("version",l.VERSION);const e=this.suppressEventsAndDispatchInitEvent.bind(this);this.beans.ctrlsSvc.whenReady(this,()=>e(()=>this.setupStateOnGridReady()));const[t,i,n]=this.addManagedEventListeners({newColumnsLoaded:({source:i})=>{"gridInitializing"===i&&(t(),e(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{i?.(),e(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{n?.(),e(()=>this.setupStateOnFirstDataRendered())}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getInitialState(){return(0,c.migrateGridStateModel)(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){const e=()=>this.updateCachedState("sideBar",this.getSideBarState());e(),this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){const e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());const t=e=>()=>this.updateColumnState([e]);this.addManagedEventListeners({columnValueChanged:t("aggregation"),columnMoved:t("columnOrder"),columnPinned:t("columnPinning"),columnResized:t("columnSizing"),columnVisible:t("columnVisibility"),columnPivotChanged:t("pivot"),columnPivotModeChanged:t("pivot"),columnRowGroupChanged:t("rowGroup"),sortChanged:t("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){const{filter:e,rowGroupExpansion:t,rowSelection:i,pagination:n}=this.getInitialState();e&&this.setFilterState(e),t&&this.setRowGroupExpansionState(t),i&&this.setRowSelectionState(i),n&&this.setPaginationState(n);const o=this.updateCachedState.bind(this);o("filter",this.getFilterState()),o("rowGroupExpansion",this.getRowGroupExpansionState()),o("rowSelection",this.getRowSelectionState()),o("pagination",this.getPaginationState());const r=()=>{this.updateRowGroupExpansionStateTimer=0,o("rowGroupExpansion",this.getRowGroupExpansionState())};this.addManagedEventListeners({filterChanged:()=>o("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:r,columnRowGroupChanged:r,rowDataUpdated:()=>{0!==this.gos.get("groupDefaultExpanded")&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(r)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:e=>{(e.newPage||e.newPageSize)&&o("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){const{scroll:e,cellSelection:t,focusedCell:i,columnOrder:n}=this.getInitialState();i&&this.setFocusedCellState(i),t&&this.setCellSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!n?.orderedColIds);const o=this.updateCachedState.bind(this);o("sideBar",this.getSideBarState()),o("focusedCell",this.getFocusedCellState());const r=this.getRangeSelectionState();o("rangeSelection",r),o("cellSelection",r),o("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>o("focusedCell",this.getFocusedCellState()),cellSelectionChanged:e=>{if(e.finished){const e=this.getRangeSelectionState();o("rangeSelection",e),o("cellSelection",e)}},bodyScrollEnd:()=>o("scroll",this.getScrollState())})}getColumnState(){const e=this.beans,t=e.colModel.isPivotMode(),i=[],o=[],r=[],s=[],a=[],l=[],c=[],d=[],u=[];let h=0;const p=(0,n._getColumnState)(e);for(let e=0;e<p.length;e++){const{colId:t,sort:n,sortIndex:g,rowGroup:f,rowGroupIndex:m,aggFunc:v,pivot:b,pivotIndex:y,pinned:w,hide:C,width:_,flex:S}=p[e];u.push(t),n&&(i[g??h++]={colId:t,sort:n}),f&&(o[m??0]=t),"string"==typeof v&&r.push({colId:t,aggFunc:v}),b&&(s[y??0]=t),w&&("right"===w?l:a).push(t),C&&c.push(t),(null!=S||_)&&d.push({colId:t,flex:S??void 0,width:_})}return{sort:i.length?{sortModel:i}:void 0,rowGroup:o.length?{groupColIds:o}:void 0,aggregation:r.length?{aggregationModel:r}:void 0,pivot:s.length||t?{pivotMode:t,pivotColIds:s}:void 0,columnPinning:a.length||l.length?{leftColIds:a,rightColIds:l}:void 0,columnVisibility:c.length?{hiddenColIds:c}:void 0,columnSizing:d.length?{columnSizingModel:d}:void 0,columnOrder:u.length?{orderedColIds:u}:void 0}}setColumnState(e){const{sort:t,rowGroup:i,aggregation:o,pivot:r,columnPinning:s,columnVisibility:a,columnSizing:l,columnOrder:c,partialColumnState:d}=e,u={},h=e=>{let t=u[e];return t||(t={colId:e},u[e]=t,t)},p=d?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};t&&(t.sortModel.forEach(({colId:e,sort:t},i)=>{const n=h(e);n.sort=t,n.sortIndex=i}),p.sort=null,p.sortIndex=null),i&&(i.groupColIds.forEach((e,t)=>{const i=h(e);i.rowGroup=!0,i.rowGroupIndex=t}),p.rowGroup=null,p.rowGroupIndex=null),o&&(o.aggregationModel.forEach(({colId:e,aggFunc:t})=>{h(e).aggFunc=t}),p.aggFunc=null),r&&(r.pivotColIds.forEach((e,t)=>{const i=h(e);i.pivot=!0,i.pivotIndex=t}),this.gos.updateGridOptions({options:{pivotMode:r.pivotMode},source:"gridInitializing"}),p.pivot=null,p.pivotIndex=null),s&&(s.leftColIds.forEach(e=>{h(e).pinned="left"}),s.rightColIds.forEach(e=>{h(e).pinned="right"}),p.pinned=null),a&&(a.hiddenColIds.forEach(e=>{h(e).hide=!0}),p.hide=null),l&&(l.columnSizingModel.forEach(({colId:e,flex:t,width:i})=>{const n=h(e);n.flex=t??null,n.width=i}),p.flex=null);const g=c?.orderedColIds,f=!!g?.length,m=f?g.map(e=>h(e)):Object.values(u);m.length&&(this.columnStates=m,(0,n._applyColumnState)(this.beans,{state:m,applyOrder:f,defaultState:p},"gridInitializing"))}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;this.columnGroupStates=void 0;const o=this.beans,{pivotResultCols:r,colGroupSvc:s}=o;if(r?.isPivotResultColsPresent()){if(t){const i=[];for(const e of t)r.getPivotResultCol(e.colId)&&i.push(e);(0,n._applyColumnState)(o,{state:i,applyOrder:e},"gridInitializing")}i&&s?.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){const e=this.beans.colGroupSvc;if(!e)return;const t=e.getColumnGroupState(),i=[];return t.forEach(({groupId:e,open:t})=>{t&&i.push(e)}),i.length?{openColumnGroupIds:i}:void 0}setColumnGroupState(e){const t=this.beans.colGroupSvc;if(!Object.prototype.hasOwnProperty.call(e,"columnGroup")||!t)return;const i=new Set(e.columnGroup?.openColumnGroupIds),n=t.getColumnGroupState().map(({groupId:e})=>{const t=i.has(e);return t&&i.delete(e),{groupId:e,open:t}});i.forEach(e=>{n.push({groupId:e,open:!0})}),n.length&&(this.columnGroupStates=n),t.setColumnGroupState(n,"gridInitializing")}getFilterState(){const e=this.beans.filterManager;let t=e?.getFilterModel();t&&0===Object.keys(t).length&&(t=void 0);const i=e?.getAdvFilterModel()??void 0;return t||i?{filterModel:t,advancedFilterModel:i}:void 0}setFilterState(e){const t=this.beans.filterManager,{filterModel:i,advancedFilterModel:n}=e??{};i&&t?.setFilterModel(i,"columnFilter"),n&&t?.setAdvFilterModel(n,"advancedFilter")}getRangeSelectionState(){const e=this.beans.rangeSvc?.getCellRanges().map(e=>{const{id:t,type:i,startRow:n,endRow:o,columns:r,startColumn:s}=e;return{id:t,type:i,startRow:n,endRow:o,colIds:r.map(e=>e.getColId()),startColId:s.getColId()}});return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeSvc:i,colModel:n,visibleCols:o}=this.beans;if(!(0,r._isCellSelectionEnabled)(t)||!i)return;const s=[];e.cellRanges.forEach(e=>{const t=[];if(e.colIds.forEach(e=>{const i=n.getCol(e);i&&t.push(i)}),!t.length)return;let i=n.getCol(e.startColId);if(!i){const e=o.allCols,n=new Set(t);i=e.find(e=>n.has(e))}s.push({...e,columns:t,startColumn:i})}),i.setCellRanges(s)}getScrollState(){if(!this.isClientSideRowModel)return;const e=this.beans.ctrlsSvc.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:i}=e?.getVScrollPosition()??{top:0};return i||t?{top:i,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:i}=e,{frameworkOverrides:n,rowRenderer:o,animationFrameSvc:r,ctrlsSvc:s}=this.beans;n.wrapIncoming(()=>{s.get("center").setCenterViewportScrollLeft(i),s.getScrollFeature()?.setVerticalScrollPosition(t),o.redraw({afterScroll:!0}),r?.flushAllFrames()})}getSideBarState(){return this.beans.sideBar?.comp?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.beans.focusSvc.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:n}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:n}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:i,rowPinned:n}=e,{focusSvc:o,colModel:r}=this.beans;o.setFocusedCell({column:r.getCol(t),rowIndex:i,rowPinned:n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const{pagination:e,gos:t}=this.beans;if(!e)return;const i=e.getCurrentPage(),n=t.get("paginationAutoPageSize")?void 0:e.getPageSize();return i||n?{page:i,pageSize:n}:void 0}setPaginationState(e){const{pagination:t,gos:i}=this.beans;t&&(e.pageSize&&!i.get("paginationAutoPageSize")&&t.setPageSize(e.pageSize,"initialState"),"number"==typeof e.page&&t.setPage(e.page))}getRowSelectionState(){const e=this.beans.selectionSvc;if(!e)return;const t=e.getSelectionState();return t&&(Array.isArray(t)||!1!==t.selectAll&&!1!==t.selectAllChildren||t?.toggledNodes?.length)?t:void 0}setRowSelectionState(e){this.beans.selectionSvc?.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const{expansionSvc:e,rowModel:t}=this.beans;if(!e)return;const i=[];return t.forEachNode(({expanded:e,id:t})=>{e&&t&&i.push(t)}),i.length?{expandedRowGroupIds:i}:void 0}setRowGroupExpansionState(e){this.beans.expansionSvc?.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let i=!1;const n=this.cachedState;for(const e of Object.keys(t)){const o=t[e];(0,a._jsonEquals)(o,n[e])||(i=!0)}this.cachedState={...n,...t},i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),(0,a._jsonEquals)(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){const e=this.staleStateKeys;e.forEach(e=>{"rowSelection"===e&&this.setCachedStateValue(e,this.getRowSelectionState())}),e.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(e=>this.queuedUpdateSources.add(e)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0;const t=this.beans.colAnimation;t?.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(t?.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}}t.StateService=d},3705:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TouchModule=void 0;const n=i(7205),o=i(3914);t.TouchModule={moduleName:"Touch",version:n.VERSION,beans:[o.TouchService]}},3914:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TouchService=void 0;const n=i(8731),o=i(8667),r=i(2979),s=i(4422),a=i(9644);class l extends n.BeanStub{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){(0,o._isIOSUserAgent)()&&this.mockContextMenu(e,e.element,(t,i,n)=>{const{rowCtrl:o,cellCtrl:r}=e.getControlsForEventTarget(n?.target??null);r?.column&&r.dispatchCellContextMenuEvent(n??null),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(void 0,n,o,r)})}handleCellDoubleClick(e,t){return!!(()=>{if(!(0,o._isIOSUserAgent)()||(0,r._isEventSupported)("dblclick"))return!1;const t=(new Date).getTime(),i=t-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=t,i})()&&(e.onCellDoubleClicked(t),t.preventDefault(),!0)}setupForHeader(e){const{gos:t,sortSvc:i}=this.beans;if(t.get("suppressTouch"))return;const{params:n,eMenu:o,eFilterButton:r}=e,l=new a.TouchListener(e.getGui(),!0),c=e.shouldSuppressMenuHide(),d=c&&(0,s._exists)(o),u=d?new a.TouchListener(o,!0):l;if(n.enableMenu){const t=d?"tap":"longTap",i=e=>n.showColumnMenuAfterMouseClick(e.touchStart);e.addManagedListeners(u,{[t]:i})}if(n.enableSorting){const t=e=>{const t=e.touchStart.target;c&&(o?.contains(t)||r?.contains(t))||i?.progressSort(n.column,!1,"uiColumnSorted")};e.addManagedListeners(l,{tap:t})}if(n.enableFilterButton&&r){const t=new a.TouchListener(r,!0);e.addManagedListeners(t,{tap:()=>n.showFilter(r)}),e.addDestroyFunc(()=>t.destroy())}e.addDestroyFunc(()=>l.destroy()),d&&e.addDestroyFunc(()=>u.destroy())}setupForHeaderGroup(e,t,i){const n=new a.TouchListener(t,!0);e.addManagedListeners(n,{tap:i}),e.addDestroyFunc(()=>n.destroy())}mockContextMenu(e,t,i){if(!(0,o._isIOSUserAgent)())return;const n=new a.TouchListener(t);e.addManagedListeners(n,{longTap:e=>{i(void 0,e.touchStart,e.touchEvent)}}),e.addDestroyFunc(()=>n.destroy())}}t.TouchService=l},2132:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleRegistry=t._setUmd=t._isUmd=t._getGridRegisteredModules=t._getAllRegisteredModules=t._getRegisteredModules=t._areModulesGridScoped=t._isModuleRegistered=t._unRegisterGridModules=t._registerModule=void 0;const n=i(2043),o=new Set,r={},s={};let a,l=!1,c=!1;function d(e){a||(a=e.version);const t=e=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${e} Please update all modules to the same version.`;if(e.version?function(e){const[t,i]=e.version.split(".")||[],[n,o]=a.split(".")||[];return t===n&&i===o}(e)||(0,n._errorOnce)(t(`'${e.moduleName}' is version ${e.version} but the other modules are version ${a}.`)):(0,n._errorOnce)(t(`'${e.moduleName}' is incompatible.`)),e.validate){const t=e.validate();if(!t.isValid){const e=t;(0,n._errorOnce)(`${e.message}`)}}}function u(e,t){d(e);const i=e.rowModels??["all"];let n;o.add(e),void 0!==t?(l=!0,void 0===s[t]&&(s[t]={}),n=s[t]):n=r,i.forEach(t=>{void 0===n[t]&&(n[t]={}),n[t][e.moduleName]=e}),e.dependsOn&&e.dependsOn.forEach(e=>u(e,t))}t._registerModule=u,t._unRegisterGridModules=function(e){delete s[e]},t._isModuleRegistered=function(e,t,i){const n=i=>!!r[i]?.[e]||!!s[t]?.[i]?.[e];return n(i)||n("all")},t._areModulesGridScoped=function(){return l},t._getRegisteredModules=function(e,t){const i=s[e]??{};return[...Object.values(r.all??{}),...Object.values(i.all??{}),...Object.values(r[t]??{}),...Object.values(i[t]??{})]},t._getAllRegisteredModules=function(){return new Set(o)},t._getGridRegisteredModules=function(e,t){const i=s[e]??{};return[...Object.values(i.all??{}),...Object.values(i[t]??{})]},t._isUmd=function(){return c},t._setUmd=function(){c=!0},t.ModuleRegistry=class{static register(e){u(e,void 0)}static registerModules(e){e.forEach(e=>u(e,void 0))}}},9413:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellNavigationService=void 0;const n=i(9853),o=i(8731),r=i(7274),s=i(1502),a=i(4422),l=i(7764);class c extends o.BeanStub{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===n.KeyCode.UP,o=e===n.KeyCode.DOWN,r=e===n.KeyCode.LEFT;let s,a;const{pageBounds:l,gos:c,visibleCols:d}=this.beans;if(i||o)a=i?l.getFirstRow():l.getLastRow(),s=t.column;else{const e=c.get("enableRtl");a=t.rowIndex,s=(r!==e?d.allCols:[...d.allCols].reverse()).find(e=>this.isCellGoodToFocusOn({rowIndex:a,rowPinned:null,column:e}))}return s?{rowIndex:a,rowPinned:null,column:s}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,o=!1;for(;!o;){switch(e){case n.KeyCode.UP:i=this.getCellAbove(i);break;case n.KeyCode.DOWN:i=this.getCellBelow(i);break;case n.KeyCode.RIGHT:i=this.gos.get("enableRtl")?this.getCellToLeft(i):this.getCellToRight(i);break;case n.KeyCode.LEFT:i=this.gos.get("enableRtl")?this.getCellToRight(i):this.getCellToLeft(i);break;default:i=null,(0,l._warn)(8,{key:e})}o=!i||this.isCellGoodToFocusOn(i)}return i}isCellGoodToFocusOn(e){const t=e.column;let i;const{pinnedRowModel:n,rowModel:o}=this.beans;switch(e.rowPinned){case"top":i=n?.getPinnedTopRow(e.rowIndex);break;case"bottom":i=n?.getPinnedBottomRow(e.rowIndex);break;default:i=o.getRow(e.rowIndex)}return!!i&&!this.isSuppressNavigable(t,i)}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,i=e.rowPinned;let n=!1;const{pageBounds:o,pinnedRowModel:r,rowModel:s}=this.beans;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return s.isRowsToRender()?{rowIndex:o.getFirstRow(),rowPinned:null}:r?.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return r?.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else i&&(n=!0);const a=s.getRow(e.rowIndex);return(n?void 0:this.getNextStickyPosition(a))||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){const{gos:i,rowRenderer:n}=this.beans;if(!(0,r._isGroupRowsSticky)(i)||!e||!e.sticky)return;let o=[];o=n.getStickyTopRowCtrls().some(t=>t.rowNode.rowIndex===e.rowIndex)?[...n.getStickyTopRowCtrls()].sort((e,t)=>e.rowNode.rowIndex-t.rowNode.rowIndex):[...n.getStickyBottomRowCtrls()].sort((e,t)=>t.rowNode.rowIndex-e.rowNode.rowIndex);const s=t?-1:1,a=o.findIndex(t=>t.rowNode.rowIndex===e.rowIndex),l=o[a+s];return l?{rowIndex:l.rowNode.rowIndex,rowPinned:null}:void 0}getCellBelow(e){if(!e)return null;const t=this.rowSpanSvc?.getCellEnd(e)??e,i=this.getRowBelow(t);return i?{rowIndex:i.rowIndex,column:e.column,rowPinned:i.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,i=e.rowIndex,{pinnedRowModel:n,pageBounds:o}=this.beans;return"top"===t?(n?.getPinnedTopRowCount()??-1)<=i:"bottom"===t?(n?.getPinnedBottomRowCount()??-1)<=i:o.getLastRow()<=i}getRowAbove(e){const t=e.rowIndex,i=e.rowPinned,{pageBounds:n,pinnedRowModel:o,rowModel:r}=this.beans;let s=!1;const a=()=>({rowIndex:o?.getPinnedTopRowCount()??-1,rowPinned:"top"});if(i?0===t:t===n.getFirstRow())return"top"===i?null:i&&r.isRowsToRender()?{rowIndex:n.getLastRow(),rowPinned:null}:o?.isRowsToRender("top")?a():null;i&&(s=!0);const l=r.getRow(e.rowIndex);return(s?void 0:this.getNextStickyPosition(l,!0))||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;const t=this.rowSpanSvc?.getCellStart(e)??e,i=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});return i?{rowIndex:i.rowIndex,column:e.column,rowPinned:i.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:i}=this.beans,n=t.allCols;let o=e.rowIndex,r=e.rowPinned,s=t.getColAfter(e.column);if(!s){s=n[0];const t=this.getRowBelow(e);if((0,a._missing)(t))return null;if(!t.rowPinned&&!(i?.isRowInPage(t)??1))return null;o=t?t.rowIndex:null,r=t?t.rowPinned:null}return{rowIndex:o,column:s,rowPinned:r}}getNextTabbedCellBackwards(e){const{visibleCols:t,pagination:i}=this.beans,n=t.allCols;let o=e.rowIndex,r=e.rowPinned,l=t.getColBefore(e.column);if(!l){l=(0,s._last)(n);const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if((0,a._missing)(t))return null;if(!t.rowPinned&&!(i?.isRowInPage(t)??1))return null;o=t?t.rowIndex:null,r=t?t.rowPinned:null}return{rowIndex:o,column:l,rowPinned:r}}isSuppressNavigable(e,t){const{suppressNavigable:i}=e.colDef;return"boolean"==typeof i?i:"function"==typeof i&&i(e.createColumnFunctionCallbackParams(t))}}t.CellNavigationService=c},3990:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderNavigationService=t.getHeaderIndexToFocus=void 0;const n=i(8731),o=i(6908),r=i(7274),s=i(1323),a=i(1502);function l(e){return!!e&&e.getLeafColumns().some(e=>e.isSpanHeaderHeight())}function c(e,t){let i;if((0,o.isColumnGroup)(e)&&l(e)&&e.isPadding()){const n=e;i=n.getLeafColumns()[0];let o=i;for(;o!==n;)t++,o=o.getParent()}return{column:i||e,headerRowIndex:t}}t.getHeaderIndexToFocus=c;class d extends n.BeanStub{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl});const t=(0,r._getDocument)(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let i;const{colModel:n,colGroupSvc:o,ctrlsSvc:r}=this.beans;if("string"==typeof e?(i=n.getCol(e),i||(i=o?.getColumnGroup(e)??null)):i=e,!i)return null;const l=r.getHeaderRowContainerCtrl(),c=l?.getAllCtrls(),d="filter"===(0,a._last)(c||[]).type,u=(0,s.getFocusHeaderRowCount)(this.beans)-1;let h=-1,p=i;for(;p;)h++,p=p.getParent();let g=h;return t&&d&&g===u-1&&g++,-1===g?null:{headerRowIndex:g,column:i}}navigateVertically(e,t,i){const n=this.beans.focusSvc;if(t||(t=n.focusedHeader),!t)return!1;const{headerRowIndex:o}=t,r=t.column,c=(0,s.getFocusHeaderRowCount)(this.beans),d="UP"===e,u=this.getHeaderRowType(o);let{headerRowIndex:h,column:p,headerRowIndexWithoutSpan:g}=d?function(e,t,i){const n="column"===e;let o="filter"===e?t:t.getParent(),r=i-1,s=r;if(n&&l(t.getParent())){for(;o&&o.isPadding();)o=o.getParent(),r--;s=r,r<0&&(o=t,r=i,s=void 0)}return{column:o,headerRowIndex:r,headerRowIndexWithoutSpan:s}}(u,r,o):function(e,t,i,n="After"){let o=t,r=i+1;const s=r;if("group"===e){const e=t.getDisplayedLeafColumns(),i="After"===n?e[0]:(0,a._last)(e),s=[];let l=i;for(;l.getParent()!==t;)l=l.getParent(),s.push(l);if(o=i,i.isSpanHeaderHeight())for(let e=s.length-1;e>=0;e--){const t=s[e];if(!t.isPadding()){o=t;break}r++}else o=(0,a._last)(s),o||(o=i)}return{column:o,headerRowIndex:r,headerRowIndexWithoutSpan:s}}(u,r,o),f=!1;return h<0&&(h=0,p=r,f=!0),h>=c?(h=-1,this.currentHeaderRowWithoutSpan=-1):void 0!==g&&(this.currentHeaderRowWithoutSpan=g),!(!f&&!p)&&n.focusHeaderPosition({headerPosition:{headerRowIndex:h,column:p},allowUserOverride:!0,event:i})}navigateHorizontally(e,t=!1,i){const{focusSvc:n,gos:o}=this.beans,r=n.focusedHeader;let s,a;if(-1!==this.currentHeaderRowWithoutSpan?r.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=r.headerRowIndex,"LEFT"===e!==o.get("enableRtl")?(a="Before",s=this.findHeader(r,a)):(a="After",s=this.findHeader(r,a)),s||!t)return n.focusHeaderPosition({headerPosition:s,direction:a,fromTab:t,allowUserOverride:!0,event:i});if(t){const e=o.getCallback("tabToNextHeader");if(e)return n.focusHeaderPositionFromUserFunc({userFunc:e,headerPosition:s,direction:a})}return this.focusNextHeaderRow(r,a,i)}focusNextHeaderRow(e,t,i){const n=e.headerRowIndex;let o,r=null;const a=this.beans;if("Before"===t?n>0&&(o=n-1,this.currentHeaderRowWithoutSpan-=1,r=this.findColAtEdgeForHeaderRow(o,"end")):(o=n+1,this.currentHeaderRowWithoutSpan<(0,s.getFocusHeaderRowCount)(a)?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1,r=this.findColAtEdgeForHeaderRow(o,"start")),!r)return!1;const{column:l,headerRowIndex:d}=c(r.column,r?.headerRowIndex);return a.focusSvc.focusHeaderPosition({headerPosition:{column:l,headerRowIndex:d},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){if(e.getPinned())return;let i;if((0,o.isColumnGroup)(e)){const n=e.getDisplayedLeafColumns();i="Before"===t?(0,a._last)(n):n[0]}else i=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(i)}findHeader(e,t){let i,n;const{colGroupSvc:r,visibleCols:s}=this.beans;if((0,o.isColumnGroup)(e.column)?i=r?.getGroupAtDirection(e.column,t)??void 0:(n=`getCol${t}`,i=s[n](e.column)),!i)return;const{headerRowIndex:a}=e;if("filter"!==this.getHeaderRowType(a)){const e=[i];for(;i.getParent();)i=i.getParent(),e.push(i);i=e[Math.max(0,e.length-1-a)]}const{column:l,headerRowIndex:d}=c(i,a);return{column:l,headerRowIndex:d}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const{visibleCols:i,ctrlsSvc:n,colGroupSvc:o}=this.beans,r=i.allCols,s=r["start"===t?0:r.length-1];if(!s)return;const a=n.getHeaderRowContainerCtrl(s.getPinned()),l=a?.getRowType(e);if("group"==l){const t=o?.getColGroupAtLevel(s,e);return{headerRowIndex:e,column:t}}return{headerRowIndex:null==l?-1:e,column:s}}}t.HeaderNavigationService=d},322:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.setFocusedHeader=t.tabToPreviousCell=t.tabToNextCell=t.setFocusedCell=t.clearFocusedCell=t.getFocusedCell=void 0,t.getFocusedCell=function(e){return e.focusSvc.getFocusedCell()},t.clearFocusedCell=function(e){return e.focusSvc.clearFocusedCell()},t.setFocusedCell=function(e,t,i,n){e.focusSvc.setFocusedCell({rowIndex:t,column:i,rowPinned:n,forceBrowserFocus:!0})},t.tabToNextCell=function(e,t){return e.navigation?.tabToNextCell(!1,t)??!1},t.tabToPreviousCell=function(e,t){return e.navigation?.tabToNextCell(!0,t)??!1},t.setFocusedHeader=function(e,t,i=!1){const n=e.headerNavigation?.getHeaderPositionForColumn(t,i);n&&e.focusSvc.focusHeaderPosition({headerPosition:n})}},928:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardNavigationModule=void 0;const n=i(7205),o=i(9413),r=i(3990),s=i(322),a=i(2321);t.KeyboardNavigationModule={moduleName:"KeyboardNavigation",version:n.VERSION,beans:[a.NavigationService,o.CellNavigationService,r.HeaderNavigationService],apiFunctions:{getFocusedCell:s.getFocusedCell,clearFocusedCell:s.clearFocusedCell,setFocusedCell:s.setFocusedCell,setFocusedHeader:s.setFocusedHeader,tabToNextCell:s.tabToNextCell,tabToPreviousCell:s.tabToPreviousCell}}},2321:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationService=void 0;const n=i(9853),o=i(8731),r=i(6257),s=i(8399),a=i(7274),l=i(1323),c=i(814),d=i(7632),u=i(1502),h=i(2331),p=i(2043),g=i(4422);class f extends o.BeanStub{constructor(){super(),this.beanName="navigation",this.onPageDown=(0,p._throttle)(this.onPageDown,100),this.onPageUp=(0,p._throttle)(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const i=e.key,o=e.altKey,r=e.ctrlKey||e.metaKey,a=!!this.beans.rangeSvc&&e.shiftKey,l=(0,s._getCellPositionForEvent)(this.gos,e);let c=!1;switch(i){case n.KeyCode.PAGE_HOME:case n.KeyCode.PAGE_END:r||o||(this.onHomeOrEndKey(i),c=!0);break;case n.KeyCode.LEFT:case n.KeyCode.RIGHT:case n.KeyCode.UP:case n.KeyCode.DOWN:if(!l)return!1;!r||o||a||(this.onCtrlUpDownLeftRight(i,l),c=!0);break;case n.KeyCode.PAGE_DOWN:case n.KeyCode.PAGE_UP:r||o||(c=this.handlePageUpDown(i,l,t))}return c&&e.preventDefault(),c}handlePageUpDown(e,t,i){return i&&(t=this.beans.focusSvc.getFocusedCell()),!!t&&(e===n.KeyCode.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0)}navigateTo(e){const{scrollIndex:t,scrollType:i,scrollColumn:n,focusIndex:o,focusColumn:r}=e,{scrollFeature:s}=this.gridBodyCon;(0,g._exists)(n)&&!n.isPinned()&&s.ensureColumnVisible(n),(0,g._exists)(t)&&s.ensureIndexVisible(t,i),e.isAsync||s.ensureIndexVisible(o);const{focusSvc:a,rangeSvc:l}=this.beans;a.setFocusedCell({rowIndex:o,column:r,rowPinned:null,forceBrowserFocus:!0}),l?.setRangeToCell({rowIndex:o,rowPinned:null,column:r})}onPageDown(e){const t=this.beans,i=m(t),n=this.getViewportHeight(),{pageBounds:o,rowModel:r,rowAutoHeight:s}=t,a=o.getPixelOffset(),l=i.top+n,c=r.getRowIndexAtPixel(l+a);s?.active?this.navigateToNextPageWithAutoHeight(e,c):this.navigateToNextPage(e,c)}onPageUp(e){const t=this.beans,i=m(t),{pageBounds:n,rowModel:o,rowAutoHeight:r}=t,s=n.getPixelOffset(),a=i.top,l=o.getRowIndexAtPixel(a+s);r?.active?this.navigateToNextPageWithAutoHeight(e,l,!0):this.navigateToNextPage(e,l,!0)}navigateToNextPage(e,t,i=!1){const{pageBounds:n,rowModel:o}=this.beans,r=this.getViewportHeight(),s=n.getFirstRow(),a=n.getLastRow(),l=n.getPixelOffset(),c=o.getRow(e.rowIndex),d=i?c?.rowHeight-r-l:r-l,u=c?.rowTop+d;let h,p=o.getRowIndexAtPixel(u+l);if(p===e.rowIndex){const n=i?-1:1;t=p=e.rowIndex+n}i?(h="bottom",p<s&&(p=s),t<s&&(t=s)):(h="top",p>a&&(p=a),t>a&&(t=a)),this.isRowTallerThanView(o.getRow(p))&&(t=p,h="top"),this.navigateTo({scrollIndex:t,scrollType:h,scrollColumn:null,focusIndex:p,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const n=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:n,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const i=t?-1:1,n=this.getViewportHeight(),{pageBounds:o,rowModel:r}=this.beans,s=o.getLastRow();let a=0,l=e.rowIndex;for(;l>=0&&l<=s;){const e=r.getRow(l);if(e){const t=e.rowHeight??0;if(a+t>n)break;a+=t}l+=i}return Math.max(0,Math.min(l,s))}getViewportHeight(){const e=this.beans,t=m(e),i=this.beans.scrollVisibleSvc.getScrollbarWidth();let n=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(n-=i),n}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return"number"==typeof t&&t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),{rowIndex:n}=i,o=i.column;this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:o,focusIndex:n,focusColumn:o})}onHomeOrEndKey(e){const t=e===n.KeyCode.PAGE_HOME,{visibleCols:i,pageBounds:o,rowModel:r}=this.beans,s=i.allCols,a=t?o.getFirstRow():o.getLastRow(),l=r.getRow(a);if(!l)return;const c=(t?s:[...s].reverse()).find(e=>!e.isSuppressNavigable(l));c&&this.navigateTo({scrollIndex:a,scrollType:null,scrollColumn:c,focusIndex:a,focusColumn:c})}onTabKeyDown(e,t){const i=t.shiftKey,n=this.tabToNextCellCommon(e,i,t),o=this.beans,{ctrlsSvc:r,pageBounds:s,focusSvc:a,gos:l}=o;if(!1===n)if(i){const{rowIndex:i,rowPinned:n}=e.getRowPosition();(n?0===i:i===s.getFirstRow())&&(0===l.get("headerHeight")||(0,h._isHeaderFocusSuppressed)(o)?(0,h._focusNextGridCoreContainer)(o,!0,!0):(t.preventDefault(),a.focusPreviousFromFirstCell(t)))}else e instanceof c.CellCtrl&&e.focusCell(!0),(!i&&a.focusOverlay(!1)||(0,h._focusNextGridCoreContainer)(o,i))&&t.preventDefault();else n?t.preventDefault():null===n&&r.get("gridCtrl").allowFocusForNextCoreContainer(i)}tabToNextCell(e,t){const i=this.beans,{focusSvc:n,rowRenderer:o}=i,s=n.getFocusedCell();if(!s)return!1;let a=(0,r._getCellByPosition)(i,s);return!!(a||(a=o.getRowByPosition(s),a&&a.isFullWidth()))&&!!this.tabToNextCellCommon(a,e,t)}tabToNextCellCommon(e,t,i){let n,o=e.editing;if(!o&&e instanceof c.CellCtrl){const t=e.rowCtrl;t&&(o=t.editing)}return n=o?"fullRow"===this.gos.get("editType")?this.moveToNextEditingRow(e,t,i):this.moveToNextEditingCell(e,t,i):this.moveToNextCellNotEditing(e,t),null===n?n:n||!!this.beans.focusSvc.focusedHeader}moveToNextEditingCell(e,t,i=null){const n=e.cellPosition;e.eGui.focus(),e.stopEditing();const o=this.findNextCellToFocusOn(n,t,!0);return!1===o?null:null!=o&&(this.beans.editSvc?.startEditing(o,null,!0,i),o.focusCell(!1),!0)}moveToNextEditingRow(e,t,i=null){const n=e.cellPosition,o=this.findNextCellToFocusOn(n,t,!0);if(!1===o)return null;if(null==o)return!1;const r=o.cellPosition,s=this.isCellEditable(n),a=this.isCellEditable(r),l=r&&n.rowIndex===r.rowIndex&&n.rowPinned===r.rowPinned,{editSvc:c,rowEditSvc:d}=this.beans;if(s&&c?.setFocusOutOnEditor(e),!l){const t=e.rowCtrl;c?.stopRowEditing(t);const n=o.rowCtrl;d?.startEditing(n,void 0,void 0,i)}return a?(c?.setFocusInOnEditor(o),o.focusCell()):o.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const i=this.beans.visibleCols.allCols;let n;n=e instanceof d.RowCtrl?{...e.getRowPosition(),column:t?i[0]:(0,u._last)(i)}:e.getFocusedCellPosition();const o=this.findNextCellToFocusOn(n,t,!1);if(!1===o)return null;if(o instanceof c.CellCtrl)o.focusCell(!0);else if(o)return this.tryToFocusFullWidthRow(o.getRowPosition(),t);return(0,g._exists)(o)}findNextCellToFocusOn(e,t,i){let n=e;const o=this.beans,{cellNavigation:s,gos:a,focusSvc:c,rowRenderer:d,rangeSvc:u}=o;for(;;){e!==n&&(e=n),t||(n=this.getLastCellOfColSpan(n)),n=s.getNextTabbedCell(n,t);const h=a.getCallback("tabToNextCell");if((0,g._exists)(h)){const o=h({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:n||null});if(!0===o)n=e;else{if(!1===o)return!1;n={rowIndex:o.rowIndex,column:o.column,rowPinned:o.rowPinned}}}if(!n)return null;if(n.rowIndex<0){const e=(0,l.getFocusHeaderRowCount)(o);return c.focusHeaderPosition({headerPosition:{headerRowIndex:e+n.rowIndex,column:n.column},fromCell:!0}),null}const p="fullRow"===a.get("editType");if(i&&!p&&!this.isCellEditable(n))continue;this.ensureCellVisible(n);const f=(0,r._getCellByPosition)(o,n);if(!f){const e=d.getRowByPosition(n);if(!e||!e.isFullWidth()||i)continue;return e}if(!s.isSuppressNavigable(f.column,f.rowNode))return f.setFocusedCellPosition(n),u?.setRangeToCell(n),f}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return!!t&&e.column.isCellEditable(t)}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){const{pinnedRowModel:i,rowModel:n}=this.beans;return"top"===t?i?.getPinnedTopRow(e):"bottom"===t?i?.getPinnedBottomRow(e):n.getRow(e)}navigateToNextCell(e,t,i,o){let r=i,s=!1;const a=this.beans,{cellNavigation:c,focusSvc:d,gos:u}=a;for(;r&&(r===i||!this.isValidNavigateCell(r));)u.get("enableRtl")?t===n.KeyCode.LEFT&&(r=this.getLastCellOfColSpan(r)):t===n.KeyCode.RIGHT&&(r=this.getLastCellOfColSpan(r)),r=c.getNextCellToFocus(t,r),s=(0,g._missing)(r);if(s&&e&&e.key===n.KeyCode.UP&&(r={rowIndex:-1,rowPinned:null,column:i.column}),o){const n=u.getCallback("navigateToNextCell");if((0,g._exists)(n)){const o=n({key:t,previousCellPosition:i,nextCellPosition:r||null,event:e});r=(0,g._exists)(o)?{rowPinned:o.rowPinned,rowIndex:o.rowIndex,column:o.column}:null}}if(!r)return;if(r.rowIndex<0){const t=(0,l.getFocusHeaderRowCount)(a);return void d.focusHeaderPosition({headerPosition:{headerRowIndex:t+r.rowIndex,column:i.column},event:e||void 0,fromCell:!0})}const h=this.getNormalisedPosition(r);h?this.focusPosition(h):this.tryToFocusFullWidthRow(r)}getNormalisedPosition(e){if(this.beans.spannedRowRenderer?.getCellByPosition(e))return e;this.ensureCellVisible(e);const t=(0,r._getCellByPosition)(this.beans,e);return t?(e=t.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:i,rowRenderer:n,focusSvc:o,eventSvc:s}=this.beans,a=i.allCols,l=n.getRowByPosition(e);if(!l||!l.isFullWidth())return!1;const c=o.getFocusedCell(),d={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?(0,u._last)(a):a[0])};this.focusPosition(d);const h=null==t?null!=c&&(0,r._isRowBefore)(d,c):t;return s.dispatchEvent({type:"fullWidthRowFocused",rowIndex:d.rowIndex,rowPinned:d.rowPinned,column:d.column,isFullWidthCell:!0,fromBelow:h}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:i}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),i?.setRangeToCell(e)}isValidNavigateCell(e){return!!(0,r._getRowNode)(this.beans,e)}getLastCellOfColSpan(e){const t=(0,r._getCellByPosition)(this.beans,e);if(!t)return e;const i=t.getColSpanningList();return 1===i.length?e:{rowIndex:e.rowIndex,column:(0,u._last)(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=(0,a._isGroupRowsSticky)(this.gos),i=this.beans.rowModel.getRow(e.rowIndex),n=t&&i?.sticky,{scrollFeature:o}=this.gridBodyCon;!n&&(0,g._missing)(e.rowPinned)&&o.ensureIndexVisible(e.rowIndex),e.column.isPinned()||o.ensureColumnVisible(e.column)}}function m(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}t.NavigationService=f},2550:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PageBoundsListener=void 0;const n=i(8731);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:i}=this.beans;t?t.calculatePages():e.calculateBounds(0,i.getRowCount()-1)}}t.PageBoundsListener=o},3003:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PageBoundsService=void 0;const n=i(8731);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){return this.topRowBounds?.rowIndex??-1}getLastRow(){return this.bottomRowBounds?.rowIndex??-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return e&&t?Math.max(t.rowTop+t.rowHeight-e.rowTop,0):0}getCurrentPagePixelRange(){const{topRowBounds:e,bottomRowBounds:t}=this;return{pageFirstPixel:e?.rowTop??0,pageLastPixel:t?t.rowTop+t.rowHeight:0}}calculateBounds(e,t){const{rowModel:i}=this.beans,n=i.getRowBounds(e);n&&(n.rowIndex=e),this.topRowBounds=n;const o=i.getRowBounds(t);o&&(o.rowIndex=t),this.bottomRowBounds=o,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=this.topRowBounds?.rowTop??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}}t.PageBoundsService=o},2078:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PageSizeSelectorSelector=t.PageSizeSelectorComp=void 0;const n=i(1502),o=i(3507),r=i(7764),s=i(159),a=i(8020),l="paginationPageSizeSelector";class c extends a.Component{wireBeans(e){this.pagination=e.pagination}constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}postConstruct(){this.addManagedPropertyListener(l,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;const t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){(0,o._clearElement)(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&!1!==this.gos.get(l)}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),i=!t||!e.includes(t);if(i){const i=this.gos.exists("paginationPageSize"),n=!0!==this.gos.get(l);(0,r._warn)(94,{pageSizeSet:i,pageSizesSet:n,pageSizeOptions:e,paginationPageSizeOption:t}),n||(0,r._warn)(95,{paginationPageSizeOption:t,paginationPageSizeSelector:l}),e.unshift("")}const o=String(i?"":t);this.selectPageSizeComp?((0,n._areEqual)(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(o,!0)):this.createPageSizeSelectorComp(e,o),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map(e=>({value:String(e)}))}createPageSizeSelectorComp(e,t){const i=this.getLocaleTextFunc(),n=i("pageSizeSelectorLabel","Page Size:"),o=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new s.AgSelect).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(o).setLabel(n).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=this.gos.get(l);return Array.isArray(e)&&e?.length?[...e].sort((e,t)=>e-t):[20,50,100]}destroy(){this.toggleSelectDisplay(!1),super.destroy()}}t.PageSizeSelectorComp=c,t.PageSizeSelectorSelector={selector:"AG-PAGE-SIZE-SELECTOR",component:c}},5794:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.paginationGoToPage=t.paginationGoToLastPage=t.paginationGoToFirstPage=t.paginationGoToPreviousPage=t.paginationGoToNextPage=t.paginationGetRowCount=t.paginationGetTotalPages=t.paginationGetCurrentPage=t.paginationGetPageSize=t.paginationIsLastPageFound=void 0,t.paginationIsLastPageFound=function(e){return e.rowModel.isLastRowIndexKnown()},t.paginationGetPageSize=function(e){return e.pagination?.getPageSize()??100},t.paginationGetCurrentPage=function(e){return e.pagination?.getCurrentPage()??0},t.paginationGetTotalPages=function(e){return e.pagination?.getTotalPages()??1},t.paginationGetRowCount=function(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()},t.paginationGoToNextPage=function(e){e.pagination?.goToNextPage()},t.paginationGoToPreviousPage=function(e){e.pagination?.goToPreviousPage()},t.paginationGoToFirstPage=function(e){e.pagination?.goToFirstPage()},t.paginationGoToLastPage=function(e){e.pagination?.goToLastPage()},t.paginationGoToPage=function(e,t){e.pagination?.goToPage(t)}},90:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PaginationAutoPageSizeService=void 0;const n=i(8731),o=i(7274),r=i(2043);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||null==this.centerRowsCtrl}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){const t=this.beans,i=()=>{const i=Math.max((0,o._getRowHeightAsNumber)(t),1),n=Math.floor(e/i);t.pagination.setPageSize(n,"autoCalculated")};this.isBodyRendered?(0,r._debounce)(this,i,50)():(i(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}}t.PaginationAutoPageSizeService=s},462:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.paginationCompCSS=void 0,t.paginationCompCSS=".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:max(var(--ag-row-height),22px);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}"},300:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PaginationSelector=t.PaginationComp=void 0;const n=i(9853),o=i(5230),r=i(2331),s=i(9970),a=i(7698),l=i(8020),c=i(8332),d=i(2078),u=i(462);class h extends c.TabGuardComp{wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}constructor(){super(),this.btFirst=l.RefPlaceholder,this.btPrevious=l.RefPlaceholder,this.btNext=l.RefPlaceholder,this.btLast=l.RefPlaceholder,this.lbRecordCount=l.RefPlaceholder,this.lbFirstRowOnPage=l.RefPlaceholder,this.lbLastRowOnPage=l.RefPlaceholder,this.lbCurrent=l.RefPlaceholder,this.lbTotal=l.RefPlaceholder,this.pageSizeComp=l.RefPlaceholder,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(u.paginationCompCSS)}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[d.PageSizeSelectorSelector]);const{btFirst:t,btPrevious:i,btNext:n,btLast:o}=this;this.activateTabIndex([t,i,n,o]),t.insertAdjacentElement("afterbegin",(0,s._createIconNoSpan)(e?"last":"first",this.beans)),i.insertAdjacentElement("afterbegin",(0,s._createIconNoSpan)(e?"next":"previous",this.beans)),n.insertAdjacentElement("afterbegin",(0,s._createIconNoSpan)(e?"previous":"next",this.beans)),o.insertAdjacentElement("afterbegin",(0,s._createIconNoSpan)(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:e=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(e):(0,r._focusGridInnerElement)(this.beans,e),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const e=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:e=>{e.key!==n.KeyCode.ENTER&&e.key!==n.KeyCode.SPACE||(e.preventDefault(),i())}})}),(0,r._addFocusableContainerListener)(this.beans,this,this.getGui()),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");return t?t({value:e}):(0,a._formatNumberCommas)(e,this.getLocaleTextFunc.bind(this))}getTemplate(){const e=this.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),n=e("of","of"),o=e("firstPage","First Page"),r=e("previousPage","Previous Page"),s=e("nextPage","Next Page"),a=e("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">\n                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>\n                <span class="ag-paging-row-summary-panel">\n                    <span id="ag-${l}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-${l}-to">${i}</span>\n                    <span id="ag-${l}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-${l}-of">${n}</span>\n                    <span id="ag-${l}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>\n                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>\n                    <span class="ag-paging-description">\n                        <span id="ag-${l}-start-page">${t}</span>\n                        <span id="ag-${l}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-${l}-of-page">${n}</span>\n                        <span id="ag-${l}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>\n                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>\n                </span>\n            </div>`}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){const e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=0===e,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const n=this.isZeroPagesToDisplay(),o=e===i-1;this.nextButtonDisabled=o||n,this.lastButtonDisabled=!t||n||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){(0,o._setAriaDisabled)(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&0===t}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages(),i=this.pagination.getMasterRowCount(),n=e?i:null;if(1===n){const e=this.rowModel.getRow(0);if(e&&e.group&&!e.groupData&&!e.aggData)return void this.setTotalLabelsToZero()}const o=this.pagination.getCurrentPage(),r=this.pagination.getPageSize();let s,a;this.isZeroPagesToDisplay()?s=a=0:(s=r*o+1,a=s+r-1,e&&a>n&&(a=n));const l=!e&&i<s+r-1,c=this.formatNumber(s);let d;this.lbFirstRowOnPage.textContent=c;const u=this.getLocaleTextFunc();d=l?u("pageLastRowUnknown","?"):this.formatNumber(a),this.lbLastRowOnPage.textContent=d;const h=t>0?o+1:0,p=this.formatNumber(h);let g,f;if(this.lbCurrent.textContent=p,e)g=this.formatNumber(t),f=this.formatNumber(n);else{const e=u("more","more");g=e,f=e}this.lbTotal.textContent=g,this.lbRecordCount.textContent=f,this.announceAriaStatus(c,d,f,p,g)}announceAriaStatus(e,t,i,n,o){const r=this.getLocaleTextFunc(),s=r("page","Page"),a=r("to","to"),l=r("of","of"),c=`${e} ${a} ${t} ${l} ${i}`,d=`${s} ${n} ${l} ${o}`;c!==this.ariaRowStatus&&(this.ariaRowStatus=c,this.ariaAnnounce?.announceValue(c,"paginationRow")),d!==this.ariaPageStatus&&(this.ariaPageStatus=d,this.ariaAnnounce?.announceValue(d,"paginationPage"))}setTotalLabelsToZero(){const e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}}t.PaginationComp=h,t.PaginationSelector={selector:"AG-PAGINATION",component:h}},1824:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PaginationModule=void 0;const n=i(7205),o=i(3137),r=i(5794),s=i(90),a=i(3937);t.PaginationModule={moduleName:"Pagination",version:n.VERSION,beans:[a.PaginationService,s.PaginationAutoPageSizeService],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:r.paginationIsLastPageFound,paginationGetPageSize:r.paginationGetPageSize,paginationGetCurrentPage:r.paginationGetCurrentPage,paginationGetTotalPages:r.paginationGetTotalPages,paginationGetRowCount:r.paginationGetRowCount,paginationGoToNextPage:r.paginationGoToNextPage,paginationGoToPreviousPage:r.paginationGoToPreviousPage,paginationGoToFirstPage:r.paginationGoToFirstPage,paginationGoToLastPage:r.paginationGoToLastPage,paginationGoToPage:r.paginationGoToPage},dependsOn:[o.PopupModule]}},3937:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PaginationService=void 0;const n=i(8731),o=i(4422),r=i(300);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){const e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return r.PaginationSelector}isPaginateChildRows(){const e=this.gos;return!!(e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren"))||e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){const t=this.currentPage;this.active&&t!==e&&"number"==typeof t&&(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return!this.active||this.getPageForIndex(e.rowIndex)===this.currentPage}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.beans.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return(0,o._exists)(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:(0,o._exists)(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:(0,o._exists)(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:(0,o._exists)(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(void 0===this.pageSizeAutoCalculated)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,0!==this.currentPage&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,0!==this.currentPage&&this.goToFirstPage()}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){const e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);const t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){const e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0)return void this.setZeroRows();const i=this.pageSize,n=t-1;this.totalPages=Math.floor(n/i)+1,this.adjustCurrentPageIfInvalid();const o=this.currentPage,r=i*o;let s=i*(o+1)-1;if(s>n&&(s=n),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(r),s===n)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{const t=e.getTopLevelRowDisplayedIndex(s+1);this.bottomDisplayedRowIndex=t-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){const e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,0===e)return void this.setZeroRows();const{pageSize:t,currentPage:i}=this,n=e-1;this.totalPages=Math.floor(n/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*i,this.bottomDisplayedRowIndex=t*(i+1)-1,this.bottomDisplayedRowIndex>n&&(this.bottomDisplayedRowIndex=n)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:n=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:n,keepRenderedRows:t})}}t.PaginationService=s},7186:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.pinnedColumnModuleCSS=void 0,t.pinnedColumnModuleCSS=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}"},6219:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PinnedColumnModule=void 0;const n=i(7205),o=i(7186),r=i(7076);t.PinnedColumnModule={moduleName:"PinnedColumn",version:n.VERSION,beans:[r.PinnedColumnService],css:[o.pinnedColumnModuleCSS]}},7076:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PinnedColumnService=void 0;const n=i(2934),o=i(3146),r=i(8731),s=i(2865),a=i(7274),l=i(3507),c=i(7764);class d extends r.BeanStub{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl});const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:i}=this.beans,n=(0,a._isDomLayout)(e,"print"),o=n?0:t.getColsLeftWidth(),r=n?0:t.getDisplayedColumnsRightWidth();o!=this.leftWidth&&(this.leftWidth=o,i.dispatchEvent({type:"leftPinnedWidthChanged"})),r!=this.rightWidth&&(this.rightWidth=r,i.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.eBodyViewport,t=(0,l._getInnerWidth)(e);if(t<=50)return;const i=this.getPinnedColumnsOverflowingViewport(t-50),n=this.gos.getCallback("processUnpinnedColumns"),{columns:r,hasLockedPinned:s}=i;let a=r;(a.length||s)&&(n&&(a=n({columns:a,viewportWidth:t})),a&&a.length&&(a=a.filter(e=>!(0,o.isRowNumberCol)(e)),this.setColsPinned(a,null,"viewportSizeFeature")))}createPinnedWidthFeature(e,...t){return new s.SetPinnedWidthFeature(e,t)}setColsPinned(e,t,i){const{colModel:o,colAnimation:r,visibleCols:s,gos:l}=this.beans;if(!o.cols)return;if(!e?.length)return;if((0,a._isDomLayout)(l,"print"))return void(0,c._warn)(37);let d;r?.start(),d=!0===t||"left"===t?"left":"right"===t?"right":null;const u=[];e.forEach(e=>{if(!e)return;const t=o.getCol(e);t&&t.getPinned()!==d&&(this.setColPinned(t,d),u.push(t))}),u.length&&(s.refresh(i),(0,n.dispatchColumnPinnedEvent)(this.eventSvc,u,i)),r?.finish()}initCol(e){const{pinned:t,initialPinned:i}=e.colDef;void 0!==t?this.setColPinned(e,t):this.setColPinned(e,i)}setColPinned(e,t){e.pinned=!0===t||"left"===t?"left":"right"===t?"right":null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(null==e.pinned)return;const i="left"===e.pinned,n="right"===e.pinned;e.hidden=!0;const o=()=>{const o=i?this.leftWidth:this.rightWidth;if(null==o)return;const r=0==o,s=e.hidden!==r,a=this.gos.get("enableRtl"),l=t.getScrollbarWidth(),c=t.verticalScrollShowing&&(a&&i||!a&&n)?o+l:o;e.comp.setPinnedContainerWidth(`${c}px`),e.comp.setDisplayed(!r),s&&(e.hidden=r,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:o,rightPinnedWidthChanged:o,scrollVisibilityChanged:o,scrollbarWidthChanged:o})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:t,rightWidth:i}=this,n=(0,l._getInnerWidth)(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(t+i+e>n){if(!(n>t+i))return 0;e=n-t-i}}return e}getPinnedColumnsOverflowingViewport(e){const t=(this.rightWidth??0)+(this.leftWidth??0);let i=!1;if(t<e)return{columns:[],hasLockedPinned:i};const{visibleCols:n}=this.beans,o=[...n.leftCols],r=[...n.rightCols];let s=0,a=0;const l=[];let c=t-0-e;for(;(a<o.length||s<r.length)&&c>0;){if(s<r.length){const e=r[s++];if(e.colDef.lockPinned){i=!0;continue}c-=e.getActualWidth(),l.push(e)}if(a<o.length&&c>0){const e=o[a++];if(e.colDef.lockPinned){i=!0;continue}c-=e.getActualWidth(),l.push(e)}}return{columns:l,hasLockedPinned:i}}}t.PinnedColumnService=d},1879:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getPinnedBottomRow=t.getPinnedTopRow=t.getPinnedBottomRowCount=t.getPinnedTopRowCount=void 0,t.getPinnedTopRowCount=function(e){return e.pinnedRowModel?.getPinnedTopRowCount()??0},t.getPinnedBottomRowCount=function(e){return e.pinnedRowModel?.getPinnedBottomRowCount()??0},t.getPinnedTopRow=function(e,t){return e.pinnedRowModel?.getPinnedTopRow(t)},t.getPinnedBottomRow=function(e,t){return e.pinnedRowModel?.getPinnedBottomRow(t)}},9294:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PinnedRowModel=void 0;const n=i(8731),o=i(3373),r=i(7274),s=i(7764);class a extends n.BeanStub{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){const e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",e=>this.setPinnedRowData(e.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",e=>this.setPinnedRowData(e.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return 0===this.getCache(e).order.length}isRowsToRender(e){return!this.isEmpty(e)}onGridStylesChanges(e){if(e.rowHeightChanged){const e=e=>{e.setRowHeight(e.rowHeight,!0)};u(this.pinnedBottomRows,e),u(this.pinnedTopRows,e)}}ensureRowHeightsValid(){let e=!1,t=0;const i=i=>{if(i.rowHeightEstimated){const n=(0,r._getRowHeightForNode)(this.beans,i);i.setRowTop(t),i.setRowHeight(n.height),t+=n.height,e=!0}};return u(this.pinnedBottomRows,i),t=0,u(this.pinnedTopRows,i),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const i=this.getCache(t);if(void 0===e)return i.order.length=0,void(i.cache={});const n=(0,r._getRowIdCallback)(this.gos),a="top"===t?o.ROW_ID_PREFIX_TOP_PINNED:o.ROW_ID_PREFIX_BOTTOM_PINNED,l=new Set(i.order),d=[],u=new Set;let h=0,p=-1;for(const r of e){const e=n?.({data:r,level:0,rowPinned:t})??a+this.nextId++;if(u.has(e)){(0,s._warn)(96,{id:e,data:r});continue}p++,u.add(e),d.push(e);const g=c(i,e);if(void 0!==g)g.data!==r&&g.setData(r),h+=this.setRowTopAndRowIndex(g,h,p),l.delete(e);else{const n=new o.RowNode(this.beans);n.id=e,n.data=r,n.rowPinned=t,h+=this.setRowTopAndRowIndex(n,h,p),i.cache[e]=n,i.order.push(e)}}l.forEach(e=>{c(i,e)?.clearRowTopAndRowIndex(),delete i.cache[e]}),i.order=d}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight((0,r._getRowHeightForNode)(this.beans,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return l(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return l(this.pinnedBottomRows)}getPinnedTopRowCount(){return h(this.pinnedTopRows)}getPinnedBottomRowCount(){return h(this.pinnedBottomRows)}getPinnedTopRow(e){return d(this.pinnedTopRows,e)}getPinnedBottomRow(e){return d(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return c(this.getCache(t),e)}forEachPinnedRow(e,t){return u(this.getCache(e),t)}getCache(e){return"top"===e?this.pinnedTopRows:this.pinnedBottomRows}}function l(e){const t=h(e);if(0===t)return 0;const i=d(e,t-1);return void 0===i?0:i.rowTop+i.rowHeight}function c(e,t){return e.cache[t]}function d(e,t){return c(e,e.order[t])}function u(e,t){e.order.forEach((i,n)=>{const o=c(e,i);o&&t(o,n)})}function h(e){return e.order.length}t.PinnedRowModel=a},5423:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PinnedRowModule=void 0;const n=i(7205),o=i(1879),r=i(9294);t.PinnedRowModule={moduleName:"PinnedRow",version:n.VERSION,beans:[r.PinnedRowModel],apiFunctions:{getPinnedTopRowCount:o.getPinnedTopRowCount,getPinnedBottomRowCount:o.getPinnedBottomRowCount,getPinnedTopRow:o.getPinnedTopRow,getPinnedBottomRow:o.getPinnedBottomRow}}},920:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._ALL_GRID_OPTIONS=t._FUNCTION_GRID_OPTIONS=t._BOOLEAN_GRID_OPTIONS=t._BOOLEAN_MIXED_GRID_OPTIONS=t._NUMBER_GRID_OPTIONS=void 0,t._NUMBER_GRID_OPTIONS=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"],t._BOOLEAN_MIXED_GRID_OPTIONS=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild"],t._BOOLEAN_GRID_OPTIONS=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"],t._FUNCTION_GRID_OPTIONS=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter"],t._ALL_GRID_OPTIONS=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector","components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","selectionColumnDef","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow","themeCssLayer",...t._NUMBER_GRID_OPTIONS,...t._FUNCTION_GRID_OPTIONS,...t._BOOLEAN_GRID_OPTIONS,...t._BOOLEAN_MIXED_GRID_OPTIONS,"theme","rowSelection"]},1331:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AriaAnnouncementService=void 0;const n=i(8731),o=i(7274),r=i(5230),s=i(3507),a=i(2043);class l extends n.BeanStub{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=(0,a._debounce)(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=(0,o._getDocument)(e),i=this.descriptionContainer=t.createElement("div");i.classList.add("ag-aria-description-container"),(0,r._setAriaLive)(i,"polite"),(0,r._setAriaRelevant)(i,"additions text"),(0,r._setAriaAtomic)(i,!0),e.eGridDiv.appendChild(i)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{if(this.isAlive()&&this.descriptionContainer){let t=e;this.lastAnnouncement===t&&(t=`${t}.`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}},50)}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&((0,s._clearElement)(e),e.parentElement?.removeChild(e)),this.descriptionContainer=null,this.pendingAnnouncements.clear()}}t.AriaAnnouncementService=l},3433:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AriaModule=void 0;const n=i(7205),o=i(1331);t.AriaModule={moduleName:"Aria",version:n.VERSION,beans:[o.AriaAnnouncementService]}},8763:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AutoWidthCalculator=void 0;const n=i(8731);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const n=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||n.push(i),this.getPreferredWidthForElements(n)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){const i=document.createElement("form");i.style.position="fixed";const n=this.centerRowContainerCtrl.eContainer;e.forEach(e=>this.cloneItemIntoDummy(e,i)),n.appendChild(i);const o=i.offsetWidth;return n.removeChild(i),o+(t??this.gos.get("autoSizePadding"))}getHeaderCellForColumn(e){let t=null;return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().forEach(i=>{const n=i.getHtmlElementForColumnHeader(e);null!=n&&(t=n)}),t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const n=document.createElement("div"),o=n.classList;["ag-header-cell","ag-header-group-cell"].some(e=>i.classList.contains(e))?(o.add("ag-header","ag-header-row"),n.style.position="static"):o.add("ag-row");let r=e.parentElement;for(;r;){if(["ag-header-row","ag-row"].some(e=>r.classList.contains(e))){for(let e=0;e<r.classList.length;e++){const t=r.classList[e];"ag-row-position-absolute"!=t&&o.add(t)}break}r=r.parentElement}n.appendChild(i),t.appendChild(n)}}t.AutoWidthCalculator=o},447:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AutoWidthModule=void 0;const n=i(7205),o=i(8763);t.AutoWidthModule={moduleName:"AutoWidth",version:n.VERSION,beans:[o.AutoWidthCalculator]}},2308:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellComp=void 0;const n=i(7274),o=i(7230),r=i(5230),s=i(3507),a=i(4422),l=i(7766),c=i(7764),d=i(8020),u=i(1734);class h extends d.Component{constructor(e,t,i,n,o){super(),this.cellCtrl=t,this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.column,this.rowNode=t.rowNode,this.eRow=n;const a=document.createElement("div");let l;a.setAttribute("comp-id",`${this.getCompId()}`),this.eCell=a,t.isCellSpanning()?(l=document.createElement("div"),l.className="ag-spanned-cell-wrapper",l.appendChild(a),(0,r._setAriaRole)(l,"presentation"),this.setTemplateFromElement(l)):this.setTemplateFromElement(a),this.cellCssClassManager=new u.CssClassManager(()=>a),this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1),(0,r._setAriaRole)(a,t.getCellAriaRole()),a.setAttribute("col-id",t.colIdSanitised);const c={addOrRemoveCssClass:(e,t)=>this.cellCssClassManager.addOrRemoveCssClass(e,t),setUserStyles:e=>(0,s._addStylesToElement)(a,e),getFocusableElement:()=>a,setIncludeSelection:e=>this.includeSelection=e,setIncludeRowDrag:e=>this.includeRowDrag=e,setIncludeDndSource:e=>this.includeDndSource=e,setRenderDetails:(e,t,i)=>this.setRenderDetails(e,t,i),setEditDetails:(e,t,i)=>this.setEditDetails(e,t,i),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(c,a,l,this.eCellWrapper,i,o,void 0)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.eCell}setRenderDetails(e,t,i){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=null==this.firstRender;const n=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!i&&!n&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(e,t,i){e?this.createCellEditorInstance(e,t,i):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){const t=this.includeRowDrag||this.includeDndSource||this.includeSelection,i=t||this.forceWrapper,n=i&&null==this.eCellWrapper;if(n){const e=document.createElement("div");e.setAttribute("role","presentation"),e.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=e,this.eCell.appendChild(this.eCellWrapper)}const o=!i&&null!=this.eCellWrapper;o&&((0,s._removeFromParent)(this.eCellWrapper),this.eCellWrapper=void 0),this.cellCssClassManager.addOrRemoveCssClass("ag-cell-value",!i);const r=!e&&i,a=r&&null==this.eCellValue;if(a){const e=document.createElement("span");e.setAttribute("role","presentation"),e.setAttribute("class","ag-cell-value"),this.eCellValue=e,this.eCellWrapper.appendChild(this.eCellValue)}const l=!r&&null!=this.eCellValue;l&&((0,s._removeFromParent)(this.eCellValue),this.eCellValue=void 0);const c=n||o||a||l;return c&&this.removeControls(),e||t&&this.addControls(),c}addControls(){this.includeRowDrag&&null==this.rowDraggingComp&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&null==this.dndSourceComp&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.dndSourceComp&&this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&null==this.checkboxSelectionComp&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.checkboxSelectionComp&&this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,i){const n=this.editorVersion,o=e.newAgStackInstance(),{params:r}=e;o.then(e=>this.afterCellEditorCreated(n,e,r,t,i)),(0,a._missing)(this.cellEditor)&&r.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){const t=this.getParentOfValue();(0,s._clearElement)(t);const i=null!=e?(0,l._escapeString)(e,!0):null;null!=i&&(t.textContent=i)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){const{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),(0,s._removeFromParent)(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){const{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),(0,s._removeFromParent)(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(null==this.cellRenderer||null==this.cellRenderer.refresh)return!1;if(this.cellRendererClass!==e.componentClass)return!1;const t=this.cellRenderer.refresh(e.params);return!0===t||void 0===t}createCellRendererInstance(e){const t=!this.beans.gos.get("suppressAnimationFrame")&&this.beans.animationFrameSvc,i=this.rendererVersion,{componentClass:n}=e,o=()=>{if(this.rendererVersion!==i||!this.isAlive())return;const t=e.newAgStackInstance(),o=this.afterCellRendererCreated.bind(this,i,n);t&&t.then(o)};t&&this.firstRender?this.beans.animationFrameSvc.createTask(o,this.rowNode.rowIndex,"createTasksP2"):o()}afterCellRendererCreated(e,t,i){if(this.isAlive()&&e===this.rendererVersion){if(this.cellRenderer=i,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),null!=this.cellRendererGui){const e=this.getParentOfValue();(0,s._clearElement)(e),e.appendChild(this.cellRendererGui)}}else this.beans.context.destroyBean(i)}afterCellEditorCreated(e,t,i,n,o){if(e!==this.editorVersion)return void this.beans.context.destroyBean(t);if(t.isCancelBeforeStart&&t.isCancelBeforeStart())return this.beans.context.destroyBean(t),void this.cellCtrl.stopEditing(!0);if(!t.getGui)return(0,c._warn)(97,{colId:this.column.getId()}),void this.beans.context.destroyBean(t);this.cellEditor=t,this.cellEditorGui=t.getGui();const r=n||void 0!==t.isPopup&&t.isPopup();r?this.addPopupCellEditor(i,o):this.addInCellEditor(),this.refreshEditStyles(!0,r),t.afterGuiAttached&&t.afterGuiAttached(),this.cellCtrl.cellEditorAttached()}refreshEditStyles(e,t){const{cellCssClassManager:i}=this;i.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),i.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),i.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),this.cellCtrl.setInlineEditingCss()}addInCellEditor(){const{eCell:e}=this;e.contains((0,n._getActiveDomElement)(this.beans))&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){"fullRow"===this.beans.gos.get("editType")&&(0,c._warn)(98);const i=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(this.beans.editSvc.createPopupEditorWrapper(e));const n=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&n.appendChild(this.cellEditorGui);const r=this.beans.popupSvc,s=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),a=null!=t?t:i.getPopupPosition?.()??"over",l=this.beans.gos.get("enableRtl"),d={ePopup:n,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.eCell,position:a,alignSide:l?"right":"left",keepWithinBounds:!0},u=r.positionPopupByComponent.bind(r,d),h=(0,o._getLocaleTextFunc)(this.beans.localeSvc),p=r.addPopup({modal:s,eChild:n,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.eCell,positionCallback:u,ariaLabel:h("ariaLabelCellEditor","Cell Editor")});p&&(this.hideEditorPopup=p.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){const{eCell:e}=this;e.contains((0,n._getActiveDomElement)(this.beans))&&e.focus({preventScroll:!0}),(0,s._clearElement)(this.getParentOfValue())}}t.CellComp=h},814:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellCtrl=t._getCellCtrlForEventTarget=t.DOM_DATA_KEY_CELL_CTRL=void 0;const n=i(3146),o=i(2036),r=i(8731),s=i(7274),a=i(1295),l=i(2612),c=i(5230),d=i(3507),u=i(2979),h=i(2331),p=i(4422),g=i(7038),f=i(6368),m=i(3976);t.DOM_DATA_KEY_CELL_CTRL="cellCtrl",t._getCellCtrlForEventTarget=function(e,i){return(0,u._getCtrlForEventTarget)(e,i,t.DOM_DATA_KEY_CELL_CTRL)};let v=0;class b extends r.BeanStub{constructor(e,t,i,n){super(),this.column=e,this.rowNode=t,this.rowCtrl=n,this.rangeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.tooltipFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.beans=i;const{colId:o,colIdSanitised:r}=e;this.instanceId=o+"-"+v++,this.colIdSanitised=r,this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusSvc.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusSvc.clearRestoreFocus()}addFeatures(){const{beans:e}=this;this.positionFeature=new m.CellPositionFeature(this,e),this.customStyleFeature=e.cellStyles?.createCellCustomStyleFeature(this,e),this.mouseListener=new f.CellMouseListenerFeature(this,e,this.column),this.keyboardListener=new g.CellKeyboardListenerFeature(this,e,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature();const{rangeSvc:t}=e;t&&(0,s._isCellSelectionEnabled)(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(e,this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){this.tooltipFeature=this.beans.tooltipSvc?.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(e,t,i,n,o,r,s){this.comp=e,this.eGui=t,this.printLayout=o,s??(s=this),this.addDomData(s),this.addFeatures(),s.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(n,s),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.positionFeature?.init(),this.customStyleFeature?.setComp(e),this.tooltipFeature?.refreshTooltip(),this.keyboardListener?.init(),this.rangeFeature?.setComp(e),r&&this.isCellEditable()?this.beans.editSvc?.startEditing(this):this.showValue(!1,!0),this.onCompAttachedFuncs.length&&(this.onCompAttachedFuncs.forEach(e=>e()),this.onCompAttachedFuncs=[])}setupAutoHeight(e,t){this.isAutoHeight=this.beans.rowAutoHeight?.setupCellAutoHeight(this,e,t)??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const e=this.column.getColDef();return null!=e.cellRenderer||null!=e.cellRendererSelector}getValueToDisplay(){return this.valueFormatted??this.value}showValue(e,t){const{beans:i,column:n,rowNode:r,rangeFeature:s}=this,{userCompFactory:a}=i,c=this.getValueToDisplay();let d;if(r.stub&&null==r.groupData?.[n.getId()]){const e=this.createCellRendererParams();d=(0,o._getLoadingCellRendererDetails)(a,n.getColDef(),e)}else if(this.isCellRenderer()){const e=this.createCellRendererParams();d=(0,o._getCellRendererDetails)(a,n.getColDef(),e)}this.comp.setRenderDetails(d,c,e),!t&&s&&(0,l._requestAnimationFrame)(i,()=>s?.refreshHandle())}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e)),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return!(null!=this.rowNode.rowPinned||"function"!=typeof e&&!0!==e)}isCheckboxSelection(e){const{rowSelection:t}=this.beans.gridOptions;return e.checkboxSelection||(0,n.isColumnSelectionCol)(this.column)&&t&&"string"!=typeof t&&(0,s._getCheckboxes)(t)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e)),i=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),n=this.includeDndSource!=this.isIncludeControl(e.dndSource),o=this.isAutoHeight!=this.column.isAutoHeight();return t||i||n||o}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(e=!1){return this.beans.editSvc?.stopEditing(this,e)??!1}createCellRendererParams(){const{value:e,valueFormatted:t,column:i,rowNode:n,comp:o,eGui:r,beans:{valueSvc:a,gos:l}}=this,c=(0,s._addGridCommonParams)(l,{value:e,valueFormatted:t,getValue:()=>a.getValueForDisplay(i,n),setValue:e=>a.setValue(n,i,e),formatValue:this.formatValue.bind(this),data:n.data,node:n,pinned:i.getPinned(),colDef:i.getColDef(),column:i,refreshCell:this.refreshCell.bind(this),eGridCell:r,eParentOfValue:o.getParentOfValue(),registerRowDragger:(e,t,i,n)=>this.registerRowDragger(e,t,n),setTooltip:(e,t)=>{l.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(e,t),this.tooltipFeature?.refreshTooltip()}});return c}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(e)}refreshCell(e){if(this.suppressRefreshCell||this.editing)return;const t=this.column.getColDef(),i=null!=e&&!!e.newData,n=null!=e&&!!e.suppressFlash,o=null==t.field&&null==t.valueGetter&&null==t.showRowGroup,r=e&&e.forceRefresh||o||i,s=!!this.comp,a=this.updateAndFormatValue(s);if(s){if(r||a){this.showValue(i,!1);const e=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!n&&!e&&t.enableCellChangeFlash&&this.beans.cellFlashSvc?.flashCell(this),this.customStyleFeature?.applyUserStyles(),this.customStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshTooltip(),this.customStyleFeature?.applyCellClassRules()}}stopEditingAndFocus(e=!1,t=!1){this.beans.editSvc?.stopEditingAndFocus(this,e,t)}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,i=this.valueFormatted;return this.value=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),!e||!this.valuesAreEqual(t,this.value)||this.valueFormatted!=i}valuesAreEqual(e,t){const i=this.column.getColDef();return i.equals?i.equals(e,t):e===t}addDomData(e){const i=this.eGui;(0,s._setDomData)(this.beans.gos,i,t.DOM_DATA_KEY_CELL_CTRL,this),e.addDestroyFunc(()=>(0,s._setDomData)(this.beans.gos,i,t.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(e,t){const{rowNode:i,column:n,value:o,beans:r}=this;return(0,s._addGridCommonParams)(r.gos,{type:t,node:i,data:i.data,value:o,column:n,colDef:n.getColDef(),rowPinned:i.rowPinned,event:e,rowIndex:i.rowIndex})}processCharacter(e){this.keyboardListener?.processCharacter(e)}onKeyDown(e){this.keyboardListener?.onKeyDown(e)}onMouseEvent(e,t){this.mouseListener?.onMouseEvent(e,t)}getColSpanningList(){return this.positionFeature.getColSpanningList()}onLeftChanged(){this.comp&&this.positionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:i}=this;(0,a.refreshFirstAndLastStyles)(e,t,i.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);(0,c._setAriaColIndex)(this.eGui,e)}onWidthChanged(){return this.positionFeature?.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){this.comp&&this.rangeFeature?.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.comp&&this.rangeFeature?.onCellSelectionChanged()}isRangeSelectionEnabled(){return null!=this.rangeFeature}focusCell(e=!1){this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:e})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.rangeFeature?.onCellSelectionChanged()}onSuppressCellFocusChanged(e){const t=this.eGui;t&&((0,n.isRowNumberCol)(this.column)&&(e=!0),(0,d._addOrRemoveAttribute)(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.addOrRemoveCssClass("ag-cell-first-right-pinned",e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.addOrRemoveCssClass("ag-cell-last-left-pinned",e)}isCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}onCellFocused(e){const{beans:t}=this;if((0,h._isCellFocusSuppressed)(t))return;const i=this.isCellFocused();if(!this.comp)return void(i&&e?.forceBrowserFocus&&(this.focusEventToRestore=e));if(this.focusEventToRestore=void 0,this.comp.addOrRemoveCssClass("ag-cell-focus",i),i&&e&&e.forceBrowserFocus){let t=this.comp.getFocusableElement();if(this.editing){const e=(0,h._findFocusableElements)(t,null,!0);e.length&&(t=e[0])}t.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}const n="fullRow"===t.gos.get("editType");i||n||!this.editing||t.editSvc?.stopRowOrCellEdit(this),i&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:(0,p._makeNull)(t),column:this.column}}setInlineEditingCss(){this.beans.editSvc?.setInlineEditingCss(this.rowCtrl)}applyStaticCssClasses(){const{comp:e}=this;e.addOrRemoveCssClass("ag-cell",!0),e.addOrRemoveCssClass("ag-cell-not-inline-editing",!0);const t=1==this.column.isAutoHeight();e.addOrRemoveCssClass("ag-cell-auto-height",t),e.addOrRemoveCssClass("ag-cell-normal-height",!t)}onColumnHover(){this.beans.colHover?.onCellColumnHover(this.column,this.comp)}onColDefChanged(){this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?this.beans.editSvc?.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0}))}setWrapText(){const e=1==this.column.getColDef().wrapText;this.comp.addOrRemoveCssClass("ag-cell-wrap-text",e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),i=this.createEvent(e,"cellContextMenu"),{beans:n}=this;n.eventSvc.dispatchEvent(i),t.onCellContextMenu&&window.setTimeout(()=>{n.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(i)})},0)}getCellRenderer(){return this.comp?.getCellRenderer()??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const e=this.beans.selectionSvc?.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,i){if(this.customRowDragComp)return void this.customRowDragComp.setDragElement(e,t);const n=this.createRowDragComp(e,t,i);n&&(this.customRowDragComp=n,this.addDestroyFunc(()=>{this.beans.context.destroyBean(n),this.customRowDragComp=null}))}createRowDragComp(e,t,i){const n=this.beans.rowDragSvc?.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,i);if(n)return this.beans.context.createBean(n),n}cellEditorAttached(){this.onEditorAttachedFuncs.forEach(e=>e()),this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}}t.CellCtrl=b},4534:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellFlashService=void 0;const n=i(8731),o=i(6257),r=i(4422);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="cellFlashSvc"}onFlashCells(e,t){if(!e.comp)return;const i=(0,o._createCellId)(e.cellPosition);t.cells[i]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",t?.flashDuration,t?.fadeDuration)}animateCell(e,t,i,n){const o=e.comp;if(!o)return;const{gos:s}=this;if(i||(i=s.get("cellFlashDuration")),0===i)return;(0,r._exists)(n)||(n=s.get("cellFadeDuration"));const a=`ag-cell-${t}`,l=`ag-cell-${t}-animation`;o.addOrRemoveCssClass(a,!0),o.addOrRemoveCssClass(l,!1);const c=e.eGui;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e.isAlive()&&(o.addOrRemoveCssClass(a,!1),o.addOrRemoveCssClass(l,!0),c.style.transition=`background-color ${n}ms`,window.setTimeout(()=>{e.isAlive()&&(o.addOrRemoveCssClass(l,!1),c.style.transition="")},n))},i)})}}t.CellFlashService=s},7038:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellKeyboardListenerFeature=void 0;const n=i(9853),o=i(8731),r=i(7274),s=i(8667);class a extends o.BeanStub{constructor(e,t,i,n){super(),this.cellCtrl=e,this.rowNode=i,this.rowCtrl=n,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){const t=e.key;switch(t){case n.KeyCode.ENTER:this.onEnterKeyDown(e);break;case n.KeyCode.F2:this.onF2KeyDown(e);break;case n.KeyCode.ESCAPE:this.onEscapeKeyDown(e);break;case n.KeyCode.TAB:this.onTabKeyDown(e);break;case n.KeyCode.BACKSPACE:case n.KeyCode.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case n.KeyCode.DOWN:case n.KeyCode.UP:case n.KeyCode.RIGHT:case n.KeyCode.LEFT:this.onNavigationKeyDown(e,t)}}onNavigationKeyDown(e,t){if(!this.cellCtrl.editing){if(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{const i=this.cellCtrl.getFocusedCellPosition();this.beans.navigation?.navigateToNextCell(e,t,i,!0)}e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:i}=this.beans;if(!t)return;const n=t.extendLatestRangeInDirection(e);n&&i?.ensureCellVisible(n)}onTabKeyDown(e){this.beans.navigation?.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:o,rowNode:a}=this,{gos:l,rangeSvc:c,eventSvc:d}=o;if(!i.editing){if(d.dispatchEvent({type:"keyShortcutChangedCellStart"}),function(e,t=!1){return e===n.KeyCode.DELETE||!t&&e===n.KeyCode.BACKSPACE&&(0,s._isMacOsUserAgent)()}(e,l.get("enableCellEditingOnBackspace"))){if(c&&(0,r._isCellSelectionEnabled)(l))c.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const{column:e}=i,t=this.beans.valueSvc.getDeleteValue(e,a);a.setDataValue(e,t,"cellClear")}}else o.editSvc?.startRowOrCellEdit(i,e,t);d.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){const{cellCtrl:t,beans:i}=this;if(t.editing||this.rowCtrl.editing)t.stopEditingAndFocus(!1,e.shiftKey);else if(i.gos.get("enterNavigatesVertically")){const o=e.shiftKey?n.KeyCode.UP:n.KeyCode.DOWN;i.navigation?.navigateToNextCell(null,o,t.cellPosition,!1)}else i.editSvc?.startRowOrCellEdit(t,n.KeyCode.ENTER,e),t.editing&&e.preventDefault()}onF2KeyDown(e){const{cellCtrl:t,beans:i}=this;t.editing||i.editSvc?.startRowOrCellEdit(t,n.KeyCode.F2,e)}onEscapeKeyDown(e){const{cellCtrl:t,beans:i}=this;t.editing&&(i.editSvc?.stopRowOrCellEdit(t,!0),t.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.editing)return;const t=e.key;t===n.KeyCode.SPACE?this.onSpaceKeyDown(e):this.beans.editSvc?.startRowOrCellEdit(this.cellCtrl,t,e)&&e.preventDefault()}onSpaceKeyDown(e){const{gos:t}=this.beans;!this.cellCtrl.editing&&(0,r._isRowSelection)(t)&&this.beans.selectionSvc?.handleSelectionEvent(e,this.rowNode,"spaceKey"),e.preventDefault()}destroy(){super.destroy()}}t.CellKeyboardListenerFeature=a},6368:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellMouseListenerFeature=void 0;const n=i(3146),o=i(8731),r=i(8667),s=i(3507),a=i(2979);class l extends o.BeanStub{constructor(e,t,i){super(),this.cellCtrl=e,this.column=i,this.beans=t}onMouseEvent(e,t){if(!(0,a._isStopPropagationForAgGrid)(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t)}}onCellClicked(e){if(this.beans.touchSvc?.handleCellDoubleClick(this,e))return;const{eventSvc:t,rangeSvc:i,gos:n,editSvc:o}=this.beans,r=e.ctrlKey||e.metaKey;i&&r&&i.getCellRangeCount(this.cellCtrl.cellPosition)>1&&i.intersectLastRange(!0);const s=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(s);const a=this.column.getColDef();a.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{a.onCellClicked(s)})},0),!n.get("singleClickEdit")&&!a.singleClickEdit||n.get("suppressClickEdit")||e.shiftKey&&0!=i?.getCellRanges().length||o?.startRowOrCellEdit(this.cellCtrl,void 0,e)}onCellDoubleClicked(e){const{column:t,beans:i,cellCtrl:n}=this,{eventSvc:o,frameworkOverrides:r,gos:s,editSvc:a}=i,l=t.getColDef(),c=n.createEvent(e,"cellDoubleClicked");o.dispatchEvent(c),"function"==typeof l.onCellDoubleClicked&&window.setTimeout(()=>{r.wrapOutgoing(()=>{l.onCellDoubleClicked(c)})},0),!s.get("singleClickEdit")&&!s.get("suppressClickEdit")&&a?.startRowOrCellEdit(n,null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:o}=e,a=e.target,{cellCtrl:l,beans:c}=this,{eventSvc:d,rangeSvc:u,rowNumbersSvc:h,focusSvc:p,gos:g}=c;if(this.isRightClickInExistingRange(e))return;const f=u&&!u.isEmpty(),m=this.containsWidget(a),{cellPosition:v}=l,b=(0,n.isRowNumberCol)(v.column);if(h&&b&&!h.handleMouseDownOnCell(v,e))return u&&e.preventDefault(),void e.stopImmediatePropagation();if(!o||!f){const t=g.get("enableCellTextSelection")&&e.defaultPrevented,i=((0,r._isBrowserSafari)()||t)&&!l.editing&&!(0,s._isFocusableFormField)(a)&&!m;l.focusCell(i)}if(o&&f&&!p.isCellFocused(v)){e.preventDefault();const t=p.getFocusedCell();if(t){const{column:e,rowIndex:i,rowPinned:n}=t,o=c.rowRenderer.getRowByPosition({rowIndex:i,rowPinned:n}),r=o?.getCellCtrl(e);r?.editing&&r.stopEditing(),p.setFocusedCell({column:e,rowIndex:i,rowPinned:n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!m){if(u)if(b&&e.preventDefault(),o)u.extendLatestRangeToCell(v);else{const e=t||i;u.setRangeToCell(v,e)}d.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.cellPosition),n=2===e.button||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(i&&n)return!0}return!1}containsWidget(e){return(0,s._isElementChildOfClass)(e,"ag-selection-checkbox",3)||(0,s._isElementChildOfClass)(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),i?.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),i?.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.eGui,i=t.contains(e.target),n=t.contains(e.relatedTarget);return i&&n}destroy(){super.destroy()}}t.CellMouseListenerFeature=l},3976:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellPositionFeature=void 0;const n=i(8731),o=i(7274),r=i(1502),s=i(4422);class a extends n.BeanStub{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const e=this.cellCtrl.getCellSpan();e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e&&(this.refreshSpanHeight(e),this.addManagedListeners(this.beans.eventSvc,{modelUpdated:this.refreshSpanHeight.bind(this,e),recalculateRowBounds:this.refreshSpanHeight.bind(this,e)}))}refreshSpanHeight(e){const t=e.getCellHeight();null!=t&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();(0,r._areEqual)(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,i=e.getColSpan(t),n=[];if(1===i)n.push(e);else{let t=e;const o=e.getPinned();for(let e=0;t&&e<i&&(n.push(t),t=this.beans.visibleCols.getColAfter(t),t&&!(0,s._missing)(t))&&o===t.getPinned();e++);}return n}onLeftChanged(){if(!this.eSetLeft)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return e=this.beans.gos.get("enableRtl")&&this.colsSpanning?(0,r._last)(this.colsSpanning):this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||"left"===this.column.getPinned())return e;const{visibleCols:t}=this.beans,i=t.getColsLeftWidth();return"right"===this.column.getPinned()?i+t.bodyWidth+(e||0):i+(e||0)}_legacyApplyRowSpan(e){if(1===this.rowSpan&&!e)return;const t=(0,o._getRowHeightAsNumber)(this.beans)*this.rowSpan;this.eContent.style.height=`${t}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}}t.CellPositionFeature=a},916:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.flashCells=void 0,t.flashCells=function(e,t={}){const{cellFlashSvc:i}=e;i&&e.frameworkOverrides.wrapIncoming(()=>{e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach(e=>i.flashCell(e,t))})}},3498:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HighlightChangesModule=void 0;const n=i(7205),o=i(8868),r=i(2346),s=i(4534),a=i(916);t.HighlightChangesModule={moduleName:"HighlightChanges",version:n.VERSION,beans:[s.CellFlashService],userComponents:{agAnimateShowChangeCellRenderer:o.AnimateShowChangeCellRenderer,agAnimateSlideCellRenderer:r.AnimateSlideCellRenderer},apiFunctions:{flashCells:a.flashCells}}},8868:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AnimateShowChangeCellRenderer=void 0;const n=i(3507),o=i(4422),r=i(8020);class s extends r.Component{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(i),this.setTemplateFromElement(e)}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),n=e.formatValue(i),r=(0,o._exists)(n)?n:i,s=t>=0,a=this.eDelta;a.textContent=s?"↑"+r:"↓"+r,a.classList.toggle("ag-value-change-delta-up",s),a.classList.toggle("ag-value-change-delta-down",!s)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),(0,n._clearElement)(this.eDelta)}refresh(e,t=!1){const{value:i,valueFormatted:r}=e,{eValue:s,lastValue:a,beans:l}=this;if(i===a)return!1;if((0,o._exists)(r)?s.textContent=r:(0,o._exists)(i)?s.textContent=i:(0,n._clearElement)(s),l.filterManager?.isSuppressFlashingCellsBecauseFiltering())return!1;if("number"==typeof i&&"number"==typeof a){const t=i-a;this.showDelta(e,t)}return a&&s.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0}}t.AnimateShowChangeCellRenderer=s},9707:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.animateSlideCellRendererCSS=void 0,t.animateSlideCellRendererCSS=".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}"},2346:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AnimateSlideCellRenderer=void 0;const n=i(7274),o=i(3507),r=i(4422),s=i(8020),a=i(9707);class l extends s.Component{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current"),this.registerCSS(a.animateSlideCellRendererCSS)}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const{beans:t,eCurrent:i}=this,o=(0,n._getDocument)(t).createElement("span");o.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=o,o.textContent=i.textContent,this.getGui().insertBefore(o,i),t.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let i=e.value;if((0,r._missing)(i)&&(i=""),i===this.lastValue)return!1;if(this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering())return!1;t||this.addSlideAnimation(),this.lastValue=i;const n=this.eCurrent;return(0,r._exists)(e.valueFormatted)?n.textContent=e.valueFormatted:(0,r._exists)(e.value)?n.textContent=i:(0,o._clearElement)(n),!0}}t.AnimateSlideCellRenderer=l},7358:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxCellRendererModule=void 0;const n=i(7205),o=i(3987);t.CheckboxCellRendererModule={moduleName:"CheckboxCellRenderer",version:n.VERSION,userComponents:{agCheckboxCellRenderer:o.CheckboxCellRenderer}}},2522:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkboxCellRendererCSS=void 0,t.checkboxCellRendererCSS=".ag-checkbox-cell{height:100%}"},3987:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxCellRenderer=void 0;const n=i(3146),o=i(9853),r=i(7274),s=i(5230),a=i(2979),l=i(66),c=i(8020),d=i(2522);class u extends c.Component{constructor(){super('\n            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[l.AgCheckboxSelector]),this.eCheckbox=c.RefPlaceholder,this.registerCSS(d.checkboxCellRendererCSS)}init(e){this.refresh(e);const{eCheckbox:t,beans:i}=this,n=t.getInputElement();n.setAttribute("tabindex","-1"),(0,s._setAriaLive)(n,"polite"),this.addManagedListeners(n,{click:e=>{if((0,a._stopPropagationForAgGrid)(e),t.isDisabled())return;const i=t.getValue();this.onCheckboxChanged(i)},dblclick:e=>{(0,a._stopPropagationForAgGrid)(e)}}),this.addManagedElementListeners(e.eGridCell,{keydown:n=>{if(n.key===o.KeyCode.SPACE&&!t.isDisabled()){e.eGridCell===(0,r._getActiveDomElement)(i)&&t.toggle();const o=t.getValue();this.onCheckboxChanged(o),n.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,i=!0;const{value:o,column:r,node:a}=e;if(a.group&&r)if("boolean"==typeof o)t=o;else{const e=r.getColId();e.startsWith(n.GROUP_AUTO_COLUMN_ID)?t=null==o||""===o?void 0:"true"===o:a.aggData&&void 0!==a.aggData[e]?t=o??void 0:i=!1}else t=o??void 0;const{eCheckbox:l}=this;if(!i)return void l.setDisplayed(!1);l.setValue(t);const c=e.disabled??!r?.isCellEditable(a);l.setDisabled(c);const d=this.getLocaleTextFunc(),u=(0,s._getAriaCheckboxStateName)(d,t),h=c?u:`${d("ariaToggleCellValue","Press SPACE to toggle cell value")} (${u})`;l.setInputAriaLabel(h)}onCheckboxChanged(e){const{eventSvc:t,params:i}=this,{column:n,node:o,value:r}=i,s={column:n,colDef:n.getColDef(),data:o.data,node:o,rowIndex:o.rowIndex,rowPinned:o.rowPinned,value:r};t.dispatchEvent({type:"cellEditingStarted",...s});const a=o.setDataValue(n,e,"edit");t.dispatchEvent({type:"cellEditingStopped",...s,oldValue:r,newValue:e,valueChanged:a}),a||this.updateCheckbox(i)}}t.CheckboxCellRenderer=u},1734:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CssClassManager=void 0,t.CssClassManager=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){this.addOrRemoveCssClass(e,!0)}removeCssClass(e){this.addOrRemoveCssClass(e,!1)}containsCssClass(e){const t=this.getGui();return!!t&&t.classList.contains(e)}addOrRemoveCssClass(e,t){if(e){if(e.indexOf(" ")>=0){const i=(e||"").split(" ");if(i.length>1)return void i.forEach(e=>this.addOrRemoveCssClass(e,t))}if(this.cssClassStates[e]!==t&&e.length){const i=this.getGui();i&&i.classList.toggle(e,t),this.cssClassStates[e]=t}}}}},714:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DndSourceComp=void 0;const n=i(7274),o=i(9970),r=i(8020);class s extends r.Component{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild((0,o._createIconNoSpan)("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",e=>{e.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const{rowNode:t,column:i,eCell:o,gos:r}=this,s=i.getColDef().dndSourceOnRowDrag,a=e.dataTransfer;if(a.setDragImage(o,0,0),s)s((0,n._addGridCommonParams)(r,{rowNode:t,dragEvent:e}));else try{const e=JSON.stringify(t.data);a.setData("application/json",e),a.setData("text/plain",e)}catch(e){}}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}}t.DndSourceComp=s},2147:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PositionableFeature=void 0;const n=i(8731),o=i(3507),r="ag-resizer-wrapper",s=(e,t)=>`<div data-ref="${e}Resizer" class="ag-resizer ag-resizer-${t}"></div>`,a=`<div class="${r}">\n        ${s("eTopLeft","topLeft")}\n        ${s("eTop","top")}\n        ${s("eTopRight","topRight")}\n        ${s("eRight","right")}\n        ${s("eBottomRight","bottomRight")}\n        ${s("eBottom","bottom")}\n        ${s("eBottomLeft","bottomLeft")}\n        ${s("eLeft","left")}\n    </div>`;class l extends n.BeanStub{wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,n=e/2-this.getHeight()/2;this.offsetElement(i,n)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:n,minHeight:r,height:s,x:a,y:l}=this.config;this.offsetParent||this.setOffsetParent();let c=0,d=0;const u=(0,o._isVisible)(this.element);if(u){const e=this.findBoundaryElement(),t=window.getComputedStyle(e);if(null!=t.minWidth){const i=e.offsetWidth-this.element.offsetWidth;d=parseInt(t.minWidth,10)-i}if(null!=t.minHeight){const i=e.offsetHeight-this.element.offsetHeight;c=parseInt(t.minHeight,10)-i}}if(this.minHeight=r||c,this.minWidth=i||d,n&&this.setWidth(n),s&&this.setHeight(s),n&&s||this.refreshSize(),e)this.center();else if(a||l)this.offsetElement(a,l);else if(u&&t){let e=this.boundaryEl,t=!0;if(e||(e=this.findBoundaryElement(),t=!1),e){const i=parseFloat(e.style.top),n=parseFloat(e.style.left);t?this.offsetElement(isNaN(n)?0:n,isNaN(i)?0:i):this.setPosition(n,i)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragSvc?.addDragSource(i),this.moveElementDragListener=i):(this.dragSvc?.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),"boolean"==typeof e){if(!1===e)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{const i=!!e[t],n=this.getResizerElement(t),o={dragStartPixels:0,eElement:n,onDragStart:e=>this.onResizeStart(e,t),onDragging:this.onResize.bind(this),onDragStop:e=>this.onResizeEnd(e,t)};(i||!this.isAlive()&&!i)&&(i?(this.dragSvc?.addDragSource(o),this.resizeListeners.push(o),n.style.pointerEvents="all"):n.style.pointerEvents="none",this.resizable[t]=i)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;-1!==t&&(this.element.style.width=`${t}px`),-1!==e&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let n=!1;if("string"==typeof e&&-1!==e.indexOf("%"))(0,o._setFixedHeight)(i,e),e=(0,o._getAbsoluteHeight)(i),n=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const t=this.getAvailableHeight();t&&e>t&&(e=t)}this.getHeight()!==e&&(n?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?(0,o._setFixedHeight)(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height="number"==typeof e?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=e?this.position.y:n.top,s=e?0:o.top;let a=0;if(t){const e=this.element.parentElement;if(e){const{bottom:t}=e.getBoundingClientRect();a=t-n.bottom}}return i+s-r-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let n=!1;if("string"==typeof e&&-1!==e.indexOf("%"))(0,o._setFixedWidth)(t,e),e=(0,o._getAbsoluteWidth)(t),n=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:t}=this.offsetParent,n=i?this.position.x:this.element.getBoundingClientRect().left;t&&e+n>t&&(e=t-n)}this.getWidth()!==e&&(n?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?(0,o._setFixedWidth)(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width="number"==typeof e?e:parseFloat(e)))}offsetElement(e=0,t=0){const{forcePopupParentAsOffsetParent:i}=this.config,n=i?this.boundaryEl:this.element;n&&(this.popupSvc?.positionPopup({ePopup:n,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(n.style.left),parseFloat(n.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;e&&this.popupSvc?this.resizeObserverSubscriber=(0,o._observeResize)(this.beans,this.popupSvc?.getPopupParent(),()=>{const e=this.getAvailableHeight();this.element.style.setProperty("max-height",`${e}px`)}):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:n,anywhereWithin:o,topBuffer:r}=e,s=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(t,!!i,!!o,s)?0:s,movementY:this.shouldSkipY(t,!!n,r,a)?0:a}}shouldSkipX(e,t,i,n){const o=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:o.left;let l=a<=0&&r.left>=e.clientX||r.right<=e.clientX&&r.right<=s.right;return!!l||(l=t?n<0&&e.clientX>a+r.left||n>0&&e.clientX<a+r.left:i?n<0&&e.clientX>s.right||n>0&&e.clientX<a+r.left:n<0&&e.clientX>s.right||n>0&&e.clientX<s.right,l)}shouldSkipY(e,t,i=0,n){const o=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:o.top;let l=a<=0&&r.top>=e.clientY||r.bottom<=e.clientY&&r.bottom<=s.bottom;return!!l||(l=t?n<0&&e.clientY>a+r.top+i||n>0&&e.clientY<a+r.top:n<0&&e.clientY>s.bottom||n>0&&e.clientY<s.bottom,l)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const t=(new DOMParser).parseFromString(a,"text/html").body;e.appendChild(t.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${r}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:n}=this.config;i||n||this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter(e=>!e.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let n=0;n<e.length;n++){const o=e[n],r=!!o.style.flex&&"0 0 auto"!==o.style.flex;if(o===this.element)continue;let s=this.minHeight||0,a=this.minWidth||0;if(r){const e=window.getComputedStyle(o);e.minHeight&&(s=parseInt(e.minHeight,10)),e.minWidth&&(a=parseInt(e.minWidth,10))}else s=o.offsetHeight,a=o.offsetWidth;t+=s,i+=a}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let n=0;n<i.length;n++){const o=i[n];o!==t&&(e?o.style.height=`${o.offsetHeight}px`:o.style.width=`${o.offsetWidth}px`,o.style.flex="0 0 auto",o===this.element&&(t=i[n+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:n,isRight:o,isBottom:r,isLeft:s}=this.currentResizer,a=o||s,l=r||n,{movementX:c,movementY:d}=this.calculateMouseMovement({e:e,isLeft:s,isTop:n}),u=this.position.x,h=this.position.y;let p=0,g=0;if(a&&c){const e=s?-1:1,t=this.getWidth(),i=t+c*e;let n=!1;s&&(p=t-i,(u+p<=0||i<=this.minWidth)&&(n=!0,p=0)),n||this.setWidth(i)}if(l&&d){const e=n?-1:1,t=this.getHeight(),i=t+d*e;let o=!1;n?(g=t-i,(h+g<=0||i<=this.minHeight)&&(o=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&t<i&&this.getMinSizeOfSiblings().height+i>this.element.parentElement.offsetHeight&&(o=!0),o||this.setHeight(i)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&p||g)&&this.offsetElement(u+p,h+g)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let n;this.config.calculateTopBuffer&&(n=this.config.calculateTopBuffer());const{movementX:o,movementY:r}=this.calculateMouseMovement({e:e,isTop:!0,anywhereWithin:!0,topBuffer:n});this.offsetElement(t+o,i+r),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if("static"!==window.getComputedStyle(e).position)return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragSvc?.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragSvc?.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}}t.PositionableFeature=l},8703:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SetLeftFeature=void 0;const n=i(8731),o=i(6908),r=i(7274),s=i(5230),a=i(1502),l=i(4422);class c extends n.BeanStub{constructor(e,t,i,n){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=n,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?(0,a._last)(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,i=e.get("suppressColumnMoveAnimation"),n=(0,l._exists)(this.columnOrGroup.getOldLeft());t?.isActive()&&n&&!i?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),i=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=i,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===i&&this.setLeft(i)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:i,visibleCols:n}=this.beans;if(!(0,r._isDomLayout)(i,"print"))return t;if("left"===e.getPinned())return t;const o=n.getColsLeftWidth();return"right"===e.getPinned()?o+n.bodyWidth+t:o+t}setLeft(e){if((0,l._exists)(e)&&(this.eCell.style.left=`${e}px`),(0,o.isColumnGroup)(this.columnOrGroup)){const e=this.columnOrGroup.getLeafColumns();if(!e.length)return;e.length>1&&(0,s._setAriaColSpan)(this.ariaEl,e.length)}}}t.SetLeftFeature=c},6105:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingOverlayComponent=void 0;const n=i(4422),o=i(4679);class r extends o.OverlayComponent{init(){const e=(0,n._makeNull)(this.gos.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){const e=this.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=e("loadingOoo","Loading...")})}}}t.LoadingOverlayComponent=r},5233:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.NoRowsOverlayComponent=void 0;const n=i(4422),o=i(4679);class r extends o.OverlayComponent{init(){const e=(0,n._makeNull)(this.gos.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){const e=this.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=e("noRowsToShow","No Rows To Show")})}}}t.NoRowsOverlayComponent=r},7896:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hideOverlay=t.showNoRowsOverlay=t.showLoadingOverlay=void 0,t.showLoadingOverlay=function(e){e.overlays?.showLoadingOverlay()},t.showNoRowsOverlay=function(e){e.overlays?.showNoRowsOverlay()},t.hideOverlay=function(e){e.overlays?.hideOverlay()}},4679:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayComponent=void 0;const n=i(8020);class o extends n.Component{constructor(){super()}}t.OverlayComponent=o},5366:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayModule=void 0;const n=i(7205),o=i(6105),r=i(5233),s=i(7896),a=i(2351);t.OverlayModule={moduleName:"Overlay",version:n.VERSION,userComponents:{agLoadingOverlay:o.LoadingOverlayComponent,agNoRowsOverlay:r.NoRowsOverlayComponent},apiFunctions:{showLoadingOverlay:s.showLoadingOverlay,showNoRowsOverlay:s.showNoRowsOverlay,hideOverlay:s.hideOverlay},beans:[a.OverlayService]}},2351:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayService=void 0;const n=i(2036),o=i(8731),r=i(7274),s=i(7764),a=i(8360);class l extends o.BeanStub{constructor(){super(...arguments),this.beanName="overlays",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=(0,r._isClientSideRowModel)(this.gos),this.isServerSide=!this.isClientSide&&(0,r._isServerSideRowModel)(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.eWrapper=e,this.updateOverlayVisibility()}isVisible(){return 0!==this.state&&!!this.eWrapper}isExclusive(){return 1===this.state&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos,t=e.get("loading");(t||void 0===t&&!e.get("suppressLoadingOverlay"))&&this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;e.get("loading")||e.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){this.showInitialOverlay=!1,this.gos.get("loading")?(0,s._warn)(99):this.doHideOverlay()}getOverlayWrapperSelector(){return a.OverlayWrapperSelector}getOverlayWrapperCompClass(){return a.OverlayWrapperComponent}updateOverlayVisibility(){if(!this.eWrapper)return void(this.state=0);const{state:e,isClientSide:t,isServerSide:i,beans:{gos:n,colModel:o,rowModel:r}}=this;let s=this.gos.get("loading");void 0!==s&&(this.showInitialOverlay=!1),this.showInitialOverlay&&void 0===s&&!n.get("suppressLoadingOverlay")&&(s=!n.get("columnDefs")||!o.ready||!n.get("rowData")&&t),s?1!==e&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,t&&r.isEmpty()&&!n.get("suppressNoRowsOverlay")?2!==e&&this.doShowNoRowsOverlay():(1===e||!i&&0!==e)&&this.doHideOverlay())}doShowLoadingOverlay(){this.eWrapper&&(this.state=1,this.showOverlay((0,n._getLoadingOverlayCompDetails)(this.beans.userCompFactory,(0,r._addGridCommonParams)(this.gos,{})),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.eWrapper&&(this.state=2,this.showOverlay((0,n._getNoRowsOverlayCompDetails)(this.beans.userCompFactory,(0,r._addGridCommonParams)(this.gos,{})),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(e,t,i){const n=e?.newAgStackInstance()??null;this.eWrapper?.showOverlay(n,t,this.isExclusive(),i),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}refreshWrapperPadding(){const e=this.eWrapper;if(!e)return;let t=0;if(2===this.state){const e=this.beans.ctrlsSvc.get("gridHeaderCtrl");t=e?.headerHeight||0}else 0!==this.wrapperPadding&&(t=0);this.wrapperPadding!==t&&(this.wrapperPadding=t,e.updateOverlayWrapperPaddingTop(t))}}t.OverlayService=l},3893:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.overlayWrapperComponentCSS=void 0,t.overlayWrapperComponentCSS=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:1px solid var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}"},8360:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayWrapperSelector=t.OverlayWrapperComponent=void 0;const n=i(9853),o=i(7274),r=i(9360),s=i(1502),a=i(3507),l=i(2979),c=i(2331),d=i(8020),u=i(3893);class h extends d.Component{constructor(){super('\n            <div class="ag-overlay" role="presentation">\n                <div class="ag-overlay-panel" role="presentation">\n                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>\n                </div>\n            </div>'),this.eOverlayWrapper=d.RefPlaceholder,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(u.overlayWrapperComponentCSS)}handleKeyDown(e){if(e.key!==n.KeyCode.TAB||e.defaultPrevented||(0,l._isStopPropagationForAgGrid)(e))return;const t=this.beans;if((0,c._findNextFocusableElement)(t,this.eOverlayWrapper,!1,e.shiftKey))return;let i=!1;i=e.shiftKey?t.focusSvc.focusGridView({column:(0,s._last)(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):(0,c._focusNextGridCoreContainer)(t,!1),i&&e.preventDefault()}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList,{AUTO_HEIGHT:n,NORMAL:o,PRINT:s}=r.LayoutCssClasses;i.toggle(n,t.autoHeight),i.toggle(o,t.normal),i.toggle(s,t.print)}postConstruct(){this.createManagedBean(new r.LayoutFeature(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i,n){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),i&&this.isGridFocused()){const e=(0,o._getActiveDomElement)(this.beans);e&&!(0,o._isNothingFocused)(this.beans)&&(this.elToFocusAfter=e)}e.then(t=>{if(this.activePromise===e){if(this.activePromise=null,t){if(this.activeOverlay!==t&&(this.eOverlayWrapper.appendChild(t.getGui()),this.activeOverlay=t,n)){const e=t;this.updateListenerDestroyFunc=this.addManagedPropertyListener(n,({currentValue:t})=>{e.refresh?.((0,o._addGridCommonParams)(this.gos,{...t??{}}))})}i&&this.isGridFocused()&&(0,c._focusInto)(this.eOverlayWrapper)}}else this.activeOverlay!==t&&(this.destroyBean(t),t=null)})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.isGridFocused()&&(t=null);const i=this.updateListenerDestroyFunc;i&&(i(),this.updateListenerDestroyFunc=null),this.destroyBean(e),(0,a._clearElement)(this.eOverlayWrapper),t?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=(0,o._getActiveDomElement)(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}}t.OverlayWrapperComponent=h,t.OverlayWrapperSelector={selector:"AG-OVERLAY-WRAPPER",component:h}},94:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getCellRendererInstances=t.getSizesForCurrentTheme=t.flushAllAnimationFrames=t.isAnimationFrameQueueEmpty=t.refreshHeader=t.refreshCells=t.setGridAriaProperty=void 0;const n=i(4126),o=i(7274),r=i(1323),s=i(557);t.setGridAriaProperty=function(e,t,i){if(!t)return;const n=e.ctrlsSvc.getGridBodyCtrl().eGridBody,o=`aria-${t}`;null===i?n.removeAttribute(o):n.setAttribute(o,i)},t.refreshCells=function(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))},t.refreshHeader=function(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getHeaderRowContainerCtrls().forEach(e=>e.refresh()))},t.isAnimationFrameQueueEmpty=function(e){return e.animationFrameSvc?.isQueueEmpty()??!0},t.flushAllAnimationFrames=function(e){e.animationFrameSvc?.flushAllFrames()},t.getSizesForCurrentTheme=function(e){return{rowHeight:(0,o._getRowHeightAsNumber)(e),headerHeight:(0,r.getHeaderHeight)(e)}},t.getCellRendererInstances=function(e,t={}){const i=[];if(e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach(e=>{const t=e.getCellRenderer();null!=t&&i.push((0,n._unwrapUserComp)(t))}),t.columns?.length)return i;const o=[],r=(0,s.mapRowNodes)(t.rowNodes);return e.rowRenderer.getAllRowCtrls().forEach(e=>{if(r&&!(0,s.isRowInMap)(e.rowNode,r))return;if(!e.isFullWidth())return;const t=e.getFullWidthCellRenderers();for(let e=0;e<t.length;e++){const i=t[e];null!=i&&o.push((0,n._unwrapUserComp)(i))}}),[...o,...i]}},6964:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RenderApiModule=void 0;const n=i(7205),o=i(94);t.RenderApiModule={moduleName:"RenderApi",version:n.VERSION,apiFunctions:{setGridAriaProperty:o.setGridAriaProperty,refreshCells:o.refreshCells,refreshHeader:o.refreshHeader,isAnimationFrameQueueEmpty:o.isAnimationFrameQueueEmpty,flushAllAnimationFrames:o.flushAllAnimationFrames,getSizesForCurrentTheme:o.getSizesForCurrentTheme,getCellRendererInstances:o.getCellRendererInstances}}},4577:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowAutoHeightModule=void 0;const n=i(7205),o=i(6418);t.RowAutoHeightModule={moduleName:"RowAutoHeight",version:n.VERSION,beans:[o.RowAutoHeightService]}},6418:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowAutoHeightService=void 0;const n=i(8731),o=i(7274),r=i(3507),s=i(2043);class a extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=(0,s._debounce)(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){const{visibleCols:e,rowModel:t,rowSpanSvc:i}=this.beans,n=e.autoHeightCols;let r=!1;t.forEachDisplayedNode?.(e=>{const t=e.__autoHeights;let s=(0,o._getRowHeightForNode)(this.beans,e).height;for(const o of n){if(this.colSpanSkipRow(o,e))return;let n=t?.[o.getColId()];const r=i?.getCellSpan(o,e);if(r){if(r.getLastNode()!==e)continue;if(n=i?.getCellSpan(o,e)?.getLastNodeAutoHeight(),!n)return}if(null==n)return;s=Math.max(n,s)}s!==e.rowHeight&&(e.setRowHeight(s),r=!0)}),r&&t.onRowHeightChanged?.()}setRowAutoHeight(e,t,i){if(e.__autoHeights||(e.__autoHeights={}),null==t)return void delete e.__autoHeights[i.getId()];const n=e.__autoHeights[i.getId()];e.__autoHeights[i.getId()]=t,n!==t&&this.requestCheckAutoHeight()}colSpanSkipRow(e,t){const{colModel:i,colViewport:n,visibleCols:o}=this.beans;if(!i.colSpanActive)return!1;let r=[];switch(e.getPinned()){case"left":r=o.getLeftColsForRow(t);break;case"right":r=o.getRightColsForRow(t);break;case null:r=n.getColsWithinViewport(t)}return r.includes(e)}setupCellAutoHeight(e,t,i){if(!e.column.isAutoHeight()||!t)return!1;this.wasEverActive=!0;const n=t.parentElement,{rowNode:s,column:a}=e,l=this.beans,c=d=>{if(e.editing)return;if(!e.isAlive()||!i.isAlive())return;const{paddingTop:u,paddingBottom:h,borderBottomWidth:p,borderTopWidth:g}=(0,r._getElementSize)(n),f=u+h+p+g,m=t.offsetHeight+f;if(d<5){const e=(0,o._getDocument)(l);if(!e||!e.contains(t)||0==m)return void window.setTimeout(()=>c(d+1),0)}this.setRowAutoHeight(s,m,a)},d=()=>c(0);d();const u=(0,r._observeResize)(l,t,d);return i.addDestroyFunc(()=>{u(),this.setRowAutoHeight(s,void 0,a)}),!0}setAutoHeightActive(e){this.active=e.list.some(e=>e.isVisible()&&e.isAutoHeight())}}t.RowAutoHeightService=a},8430:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowComp=void 0;const n=i(5230),o=i(3507),r=i(8020),s=i(2308);class a extends r.Component{constructor(e,t,i){super(),this.cellComps={},this.beans=t,this.rowCtrl=e;const r=document.createElement("div");r.setAttribute("comp-id",`${this.getCompId()}`),r.setAttribute("style",this.getInitialStyle(i)),this.setTemplateFromElement(r);const s=this.getGui(),a=s.style;this.domOrder=this.rowCtrl.getDomOrder(),(0,n._setAriaRole)(s,"row");const l={setDomOrder:e=>this.domOrder=e,setCellCtrls:e=>this.setCellCtrls(e),showFullWidth:e=>this.showFullWidth(e),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setUserStyles:e=>(0,o._addStylesToElement)(s,e),setTop:e=>a.top=e,setTransform:e=>a.transform=e,setRowIndex:e=>s.setAttribute("row-index",e),setRowId:e=>s.setAttribute("row-id",e),setRowBusinessKey:e=>s.setAttribute("row-business-key",e),refreshFullWidth:e=>this.fullWidthCellRenderer?.refresh?.(e())??!1};e.setComp(l,this.getGui(),i,void 0),this.addDestroyFunc(()=>{e.unsetComp(i)})}getInitialStyle(e){const t=this.rowCtrl.getInitialTransform(e);return t?`transform: ${t}`:`top: ${this.rowCtrl.getInitialRowTop(e)}`}showFullWidth(e){e.newAgStackInstance().then(e=>{if(this.isAlive()){const t=e.getGui();this.getGui().appendChild(t),this.rowCtrl.setupDetailRowAutoHeight(t),this.setFullWidthRowComp(e)}else this.beans.context.destroyBean(e)})}setCellCtrls(e){const t=Object.assign({},this.cellComps);e.forEach(e=>{const i=e.instanceId;null==this.cellComps[i]?this.newCellComp(e):t[i]=null}),this.destroyCells(Object.values(t)),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;const t=[];e.forEach(e=>{const i=this.cellComps[e.instanceId];i&&t.push(i.getGui())}),(0,o._setDomChildOrder)(this.getGui(),t)}newCellComp(e){const t=new s.CellComp(this.beans,e,this.rowCtrl.printLayout,this.getGui(),this.rowCtrl.editing);this.cellComps[e.instanceId]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyCells(Object.values(this.cellComps))}setFullWidthRowComp(e){this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}destroyCells(e){e.forEach(e=>{if(!e)return;const t=e.cellCtrl.instanceId;this.cellComps[t]===e&&(e.detach(),e.destroy(),this.cellComps[t]=null)})}}t.RowComp=a},7632:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowCtrl=t.DOM_DATA_KEY_ROW_CTRL=void 0;const n=i(3789),o=i(2036),r=i(8731),s=i(7274),a=i(7648),l=i(5230),c=i(8667),d=i(3507),u=i(2979),h=i(2331),p=i(2043),g=i(4422),f=i(7766),m=i(814);let v=0;t.DOM_DATA_KEY_ROW_CTRL="renderedRow";class b extends r.BeanStub{constructor(e,t,i,n,o){super(),this.rowNode=e,this.useAnimationFrameForCreate=n,this.printLayout=o,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=t.pagination?.getCurrentPage()??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+v++,this.rowId=(0,f._escapeString)(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=(0,a.calculateRowLevel)(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if("function"!=typeof this.businessKeyForNodeFunc)return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=(0,f._escapeString)(e)}updateGui(e,t){"left"===e?this.leftGui=t:"right"===e?this.rightGui=t:"fullWidth"===e?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,i,o){const r={rowComp:e,element:t,containerType:i,compBean:o=(0,n.setupCompBean)(this,this.beans.context,o)};this.allRowGuis.push(r),this.updateGui(i,r),this.initialiseRowComp(r),"FullWidthLoading"===this.rowType||this.rowNode.stub||this.rowNode.rowPinned||this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return"FullWidthDetail"===this.rowType&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";this.allRowGuis.forEach(e=>e.element.style.display=t)}initialiseRowComp(e){const i=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),(0,s._isRowSelection)(i)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const n=e.rowComp;this.getInitialRowClasses(e.containerType).forEach(e=>n.addOrRemoveCssClass(e,!0)),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&(0,l._setAriaExpanded)(e.element,1==this.rowNode.expanded),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),(0,s._setDomData)(i,e.element,t.DOM_DATA_KEY_ROW_CTRL,this),e.compBean.addDestroyFunc(()=>(0,s._setDomData)(i,e.element,t.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){null!=this.businessKey&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=(0,f._escapeString)(this.rowNode.id);this.rowId=t,null!=t&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&((0,p._executeNextVMTurn)(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&((0,p._executeNextVMTurn)(()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){const t=this.beans.rowDragSvc?.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;const i=this.createBean(t,this.beans.context);this.rowDragComps.push(i),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(e=>e!==i),this.destroyBean(i,this.beans.context)})}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),i=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(i)}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(e=>e?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");e&&this.areAllContainersReady()&&e({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:i,beans:{visibleCols:n}}=this,o=!!e||!n.isPinningLeft(),r=!!t,s=!!i||!n.isPinningRight();return o&&r&&s}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this.rowNode})}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),i=this.gos.get("masterDetail")&&this.rowNode.detail,n=this.beans.colModel.isPivotMode(),o=!!this.rowNode.group&&!this.rowNode.footer&&(0,s._isGroupUseEntireRow)(this.gos,n);this.rowType=e?"FullWidthLoading":i?"FullWidthDetail":t?"FullWidth":o?"FullWidthGroup":"Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;const{animationFrameSvc:i}=this.beans;!i||e||this.gos.get("suppressAnimationFrame")||this.printLayout?this.updateColumnListsImpl(t):this.updateColumnListsPending||(i.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}getNewCellCtrl(e){const t=this.beans.rowSpanSvc?.isCellSpanning(e,this.rowNode);if(!t)return new m.CellCtrl(e,this.rowNode,this.beans,this)}shouldRecreateCellCtrl(e){return!!this.beans.rowSpanSvc?.isCellSpanning(e.column,this.rowNode)}createCellCtrls(e,t,i=null){const n={list:[],map:{}},o=(e,t,i)=>{null!=i?n.list.splice(i,0,t):n.list.push(t),n.map[e]=t},r=[];for(const i of t){const t=i.getInstanceId();let n=e.map[t];n&&this.shouldRecreateCellCtrl(n)&&(n.destroy(),n=void 0),n||(n=this.getNewCellCtrl(i)),n&&o(t,n)}for(const t of e.list){const e=t.column.getInstanceId();null==n.map[e]&&(this.isCellEligibleToBeRemoved(t,i)?t.destroy():r.push([e,t]))}if(r.length)for(const[e,t]of r){const i=n.list.findIndex(e=>e.column.getLeft()>t.column.getLeft()),r=-1===i?void 0:Math.max(i-1,0);o(e,t,r)}return n}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach(t=>{const i=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(i,e)})}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const i=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const n=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");const o=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,o,"right")}}isCellEligibleToBeRemoved(e,t){const i=!0,{column:n}=e;if(n.getPinned()!=t)return i;const{editing:o,cellPosition:r}=e,{focusSvc:s,visibleCols:a}=this.beans,l=s.isCellFocused(r);return o||l?!(a.allCols.indexOf(n)>=0)&&i:i}getDomOrder(){return this.gos.get("ensureDomOrder")||(0,s._isDomLayout)(this.gos,"print")}listenOnDomOrder(e){e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],()=>{e.rowComp.setDomOrder(this.getDomOrder())})}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=(0,g._exists)(this.rowNode.oldRowTop),{visibleCols:i}=this.beans,n=i.isPinningLeft(),o=i.isPinningRight();if(t){const{slideInAnimation:e}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(e.fullWidth=!0);e.center=!0,e.left=n,e.right=o}else{const{fadeInAnimation:e}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(e.fullWidth=!0);e.center=!0,e.left=n,e.right=o}}isFullWidth(){return"Normal"!==this.rowType}refreshFullWidth(){const e=(e,t)=>!e||e.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(e.element,t).params),t=e(this.fullWidthGui,null),i=e(this.centerGui,null),n=e(this.leftGui,"left"),o=e(this.rightGui,"right");return t&&i&&n&&o}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...this.beans.expansionSvc?.getRowExpandedListeners(this)??{}}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventSvc,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.beans.rowSpanSvc&&this.addManagedListeners(this.beans.rowSpanSvc,{spannedCellsUpdated:({pinned:e})=>{e&&!this.rowNode.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{this.gos.get("rowDragEntireRow")?this.allRowGuis.forEach(e=>{this.addRowDraggerToRow(e)}):this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onRowIndexChanged())},cellChanged:e=>{this.getAllCellCtrls().forEach(t=>t.onCellChanged(e))}})}onRowNodeDataChanged(e){this.isFullWidth()!==!!this.isNodeFullWidthCell()?this.beans.rowRenderer.redrawRow(this.rowNode):this.isFullWidth()?this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode):(this.getAllCellCtrls().forEach(t=>t.refreshCell({suppressFlash:!e.update,newData:!e.update})),this.allRowGuis.forEach(e=>{this.setRowCompRowId(e.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(e.rowComp)}),this.onRowSelected(),this.postProcessCss())}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.rowNode.highlighted;this.allRowGuis.forEach(t=>{const i="Above"===e,n="Below"===e;t.rowComp.addOrRemoveCssClass("ag-row-highlight-above",i),t.rowComp.addOrRemoveCssClass("ag-row-highlight-below",n)})}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass("ag-row-dragging",e))}verifyCells(){this.onDisplayedColumnsChanged()}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.rowAutoHeight?.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:(0,g._makeNull)(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.findFullWidthInfoForEvent(e);if(!t)return;const{rowGui:i,column:n}=t;if(i.element!==e.target)return;const o=this.rowNode,{focusSvc:r,navigation:s}=this.beans,a=r.getFocusedCell(),l={rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:a?.column??n};s?.navigateToNextCell(e,e.key,l,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||(0,u._isStopPropagationForAgGrid)(e))return;const t=this.allRowGuis.find(t=>t.element.contains(e.target)),i=t?t.element:null,n=i===e.target,o=(0,s._getActiveDomElement)(this.beans);let r=!1;i&&o&&(r=i.contains(o)&&o.classList.contains("ag-cell"));let a=null;n||r||(a=(0,h._findNextFocusableElement)(this.beans,i,!1,e.shiftKey)),(this.isFullWidth()&&n||!a)&&this.beans.navigation?.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){const e=this.allRowGuis.find(e=>(0,d._isVisible)(e.element))?.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:-1;this.allRowGuis.forEach(e=>{(0,d._addOrRemoveAttribute)(e.element,"tabindex",t)})}onFullWidthRowFocused(e){const t=this.rowNode,i=!!e&&this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned,n=this.fullWidthGui?this.fullWidthGui.element:this.centerGui?.element;n&&(n.classList.toggle("ag-full-width-focus",i),i&&e?.forceBrowserFocus&&n.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const i={list:[],map:{}};return e.list.forEach(e=>{e!==t&&(i.list.push(e),i.map[e.column.getInstanceId()]=e)}),i}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t)}}createRowEvent(e,t){const{rowNode:i}=this;return(0,s._addGridCommonParams)(this.gos,{type:e,node:i,data:i.data,rowIndex:i.rowIndex,rowPinned:i.rowPinned,event:t})}createRowEventWithSource(e,t){const i=this.createRowEvent(e,t);return i.source=this,i}onRowDblClick(e){(0,u._isStopPropagationForAgGrid)(e)||this.beans.eventSvc.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",e))}findFullWidthInfoForEvent(e){if(!e)return;const t=this.findFullWidthRowGui(e.target),i=this.getColumnForFullWidth(t);return t&&i?{rowGui:t,column:i}:void 0}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(e?.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=(0,d._isElementChildOfClass)(e.target,"ag-row-drag",3),!this.isFullWidth())return;const t=this.rowNode,{rangeSvc:i,focusSvc:n}=this.beans;i?.removeAllCellRanges();const o=this.findFullWidthInfoForEvent(e);if(!o)return;const{rowGui:r,column:s}=o,a=r.element,l=e.target;let u=e.defaultPrevented||(0,c._isBrowserSafari)();a&&a.contains(l)&&(0,d._isFocusableFormField)(l)&&(u=!1),n.setFocusedCell({rowIndex:t.rowIndex,column:s,rowPinned:t.rowPinned,forceBrowserFocus:u})}onRowClick(e){if((0,u._isStopPropagationForAgGrid)(e)||this.lastMouseDownOnDragger)return;const{eventSvc:t,selectionSvc:i}=this.beans;t.dispatchEvent(this.createRowEventWithSource("rowClicked",e)),i?.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){"FullWidthDetail"===this.rowType&&this.beans.masterDetailSvc?.setupDetailRowAutoHeight(this,e)}createFullWidthCompDetails(e,t){const{gos:i,rowNode:n}=this,r=(0,s._addGridCommonParams)(i,{fullWidth:!0,data:n.data,node:n,value:n.key,valueFormatted:n.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(e,t,i,n)=>this.addFullWidthRowDragging(e,t,i,n),setTooltip:(e,t)=>{i.assertModuleRegistered("Tooltip",3),this.refreshRowTooltip(e,t)}}),a=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return(0,o._getFullWidthDetailCellRendererDetails)(a,r);case"FullWidthGroup":return(0,o._getFullWidthGroupCellRendererDetails)(a,r);case"FullWidthLoading":return(0,o._getFullWidthLoadingCellRendererDetails)(a,r);default:return(0,o._getFullWidthCellRendererDetails)(a,r)}}refreshRowTooltip(e,t){this.fullWidthGui&&(this.tooltipFeature=this.beans.tooltipSvc?.refreshRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,i="",n){const{rowDragSvc:o,context:r}=this.beans;if(!o||!this.isFullWidth())return;const s=o.createRowDragComp(()=>i,this.rowNode,void 0,e,t,n);this.createBean(s,r),this.addDestroyFunc(()=>{this.destroyBean(s,r)})}onUiLevelChanged(){const e=(0,a.calculateRowLevel)(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(e=>{e.rowComp.addOrRemoveCssClass(t,!0),e.rowComp.addOrRemoveCssClass(i,!1)})}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass("ag-row-first",e))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach(e=>e.rowComp.addOrRemoveCssClass("ag-row-last",t)))}getAllCellCtrls(){return 0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=[];this.beans.rowStyleSvc?.processClassesFromGridOptions(e,this.rowNode),e.length&&e.forEach(e=>{this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass(e,!0))})}postProcessRowClassRules(){this.beans.rowStyleSvc?.processRowClassRules(this.rowNode,e=>{this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass(e,!0))},e=>{this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass(e,!1))})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,e=>e.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return"left"===e||"right"===e?e:null}getInitialRowClasses(e){const t=this.getPinnedForContainer(e),i=this.isFullWidth(),{rowNode:n,beans:o}=this,r=[];r.push("ag-row"),r.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&r.push("ag-opacity-zero"),r.push(n.rowIndex%2==0?"ag-row-even":"ag-row-odd"),n.isRowPinned()&&r.push("ag-row-pinned"),n.isSelected()&&r.push("ag-row-selected"),n.footer&&r.push("ag-row-footer"),r.push("ag-row-level-"+this.rowLevel),n.stub&&r.push("ag-row-loading"),i&&r.push("ag-full-width-row"),o.expansionSvc?.addExpandedCss(r,n),n.dragging&&r.push("ag-row-dragging");const{rowStyleSvc:s}=o;return s&&(s.processClassesFromGridOptions(r,n),s.preProcessRowClassRules(r,n)),r.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&r.push("ag-row-first"),this.isLastRowOnPage()&&r.push("ag-row-last"),i&&("left"===t&&r.push("ag-cell-last-left-pinned"),"right"===t&&r.push("ag-cell-first-right-pinned")),r}processStylesFromGridOptions(){return this.beans.rowStyleSvc?.processStylesFromGridOptions(this.rowNode)??this.emptyStyle}onRowSelected(e){this.beans.selectionSvc?.onRowCtrlSelected(this,e=>{e!==this.centerGui&&e!==this.fullWidthGui||this.announceDescription()},e)}announceDescription(){this.beans.selectionSvc?.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:i}=e,{rowNode:n,beans:o,gos:r}=this;i.addManagedListeners(t,{mouseenter:()=>n.dispatchRowEvent("mouseEnter"),mouseleave:()=>n.dispatchRowEvent("mouseLeave")}),i.addManagedListeners(n,{mouseEnter:()=>{o.dragSvc?.dragging||r.get("suppressRowHoverHighlight")||(t.classList.add("ag-row-hover"),n.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){const t=e?[e]:this.allRowGuis.map(e=>e.element);for(const e of t)e.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(t.top,!0)-100,n=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(i,e),n)}forEachGui(e,t){e?t(e):this.allRowGuis.forEach(t)}onRowHeightChanged(e){if(null==this.rowNode.rowHeight)return;const t=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),n=(0,s._isGetRowHeightFunction)(this.gos)?(0,s._getRowHeightForNode)(this.beans,this.rowNode).height:void 0,o=n?Math.min(i,n)-2+"px":void 0;this.forEachGui(e,e=>{e.element.style.height=`${t}px`,o&&e.element.style.setProperty("--ag-line-height",o)})}destroyFirstPass(e=!1){this.active=!1;const{rowNode:t}=this;if(!e&&(0,s._isAnimateRows)(this.gos)&&!t.sticky)if(null!=t.rowTop){const e=this.roundRowTopToBounds(t.rowTop);this.setRowTop(e)}else this.allRowGuis.forEach(e=>e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));t.setHovered(!1);const i=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(i),this.beans.eventSvc.dispatchEvent(i),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.beans.editSvc?.stopRowEditing(this);const e=e=>(e.list.forEach(e=>e.destroy()),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,e=>{e.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),e.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const{focusSvc:e,editSvc:t}=this.beans,i=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);i!==this.rowFocused&&(this.rowFocused=i,this.setFocusedClasses()),!i&&this.editing&&t?.stopRowEditing(this,!1)}onPaginationChanged(){const e=this.beans.pagination?.getCurrentPage()??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){return this.rowNode.isRowPinned()||this.rowNode.sticky?e:e+this.beans.pageBounds.getPixelOffset()*(t?1:-1)}setRowTop(e){if(!this.printLayout&&(0,g._exists)(e)){const t=this.applyPaginationOffset(e),i=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(i)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let i;if(t.sticky)i=t.stickyRowTop;else{const n=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,o=this.applyPaginationOffset(n);i=t.isRowPinned()?o:this.beans.rowContainerHeight.getRealPixelPosition(o)}return i+"px"}setRowTopStyle(e){this.allRowGuis.forEach(t=>this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`))}getCellCtrl(e,t=!1){let i=null;return this.getAllCellCtrls().forEach(t=>{t.column==e&&(i=t)}),null!=i||t||this.getAllCellCtrls().forEach(t=>{t.getColSpanningList().indexOf(e)>=0&&(i=t)}),i}onRowIndexChanged(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){const t=this.rowNode.getRowIndexString();if(null===t)return;const i=(this.beans.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.beans.filterManager?.getHeaderRowCount()??0),n=this.rowNode.rowIndex%2==0,o=i+this.rowNode.rowIndex+1;this.forEachGui(e,e=>{e.rowComp.setRowIndex(t),e.rowComp.addOrRemoveCssClass("ag-row-even",n),e.rowComp.addOrRemoveCssClass("ag-row-odd",!n),(0,l._setAriaRowIndex)(e.element,o)})}}t.RowCtrl=b},7109:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowContainerHeightService=void 0;const n=i(8731),o=i(8667),r=i(2043);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=(0,o._getMaxDivHeight)(),(0,r._logIfDebug)(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;(0,r._logIfDebug)(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t="number"==typeof e?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=e/(this.modelHeight-this.getUiBodyHeight());return this.maxScrollY*t}}t.RowContainerHeightService=s},557:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.isRowInMap=t.mapRowNodes=t.RowRenderer=void 0;const n=i(8731),o=i(7274),r=i(2612),s=i(1502),a=i(4422),l=i(7764),c=i(814),d=i(7632);class u extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach(e=>e.onCellSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(e=>e.updateRangeBordersIfRangeCount())},i=()=>{this.eventSvc.addEventListener("cellSelectionChanged",e),this.eventSvc.addEventListener("columnMoved",t),this.eventSvc.addEventListener("columnPinned",t),this.eventSvc.addEventListener("columnVisible",t)},n=()=>{this.eventSvc.removeEventListener("cellSelectionChanged",e),this.eventSvc.removeEventListener("columnMoved",t),this.eventSvc.removeEventListener("columnPinned",t),this.eventSvc.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>n()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{(0,o._isCellSelectionEnabled)(this.gos)?i():n()}),(0,o._isCellSelectionEnabled)(this.gos)&&i()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:e,previousValue:t})=>{(!t&&e||t&&!e)&&this.redrawRows()});const{stickyRowSvc:e,gos:t}=this.beans;if(e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const e=this.gridBodyCtrl;e.setStickyTopHeight(0),e.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=(0,o._isDomLayout)(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=null!=e?e:3;this.cachedRowCtrls=new h(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?.stickyTopRowCtrls??[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?.stickyBottomRowCtrls??[]}updateAllRowCtrls(){const e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),i=this.cachedRowCtrls?.getEntries()??[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(t=>t.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;t&&this.getAllCellCtrls().forEach(i=>t.onFlashCells(i,e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.colModel.getCols().forEach(e=>{const t=t=>{this.getAllCellCtrls().forEach(i=>{i.column===e&&t(i)})},i=()=>{t(e=>e.onLeftChanged())},n=()=>{t(e=>e.onWidthChanged())},o=()=>{t(e=>e.onFirstRightPinnedChanged())},r=()=>{t(e=>e.onLastLeftPinnedChanged())},s=()=>{t(e=>e.onColDefChanged())};e.__addEventListener("leftChanged",i),e.__addEventListener("widthChanged",n),e.__addEventListener("firstRightPinnedChanged",o),e.__addEventListener("lastLeftPinnedChanged",r),e.__addEventListener("colDefChanged",s),this.destroyFuncsForColumnListeners.push(()=>{e.__removeEventListener("leftChanged",i),e.__removeEventListener("widthChanged",n),e.__removeEventListener("firstRightPinnedChanged",o),e.__removeEventListener("lastLeftPinnedChanged",r),e.__removeEventListener("colDefChanged",s)})})}onDomLayoutChanged(){const e=(0,o._isDomLayout)(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){const t=[];return this.getAllRowCtrls().forEach(i=>{const n=i.getCellCtrl(e,!0)?.eGui;n&&t.push(n)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}refreshFloatingRows(e,t){const{pinnedRowModel:i,beans:n,printLayout:o}=this,r=Object.fromEntries(e.map(e=>[e.rowNode.id,e]));i?.forEachPinnedRow(t,(s,a)=>{const l=e[a];l&&void 0===i.getPinnedRowById(l.rowNode.id,t)&&(l.destroyFirstPass(),l.destroySecondPass()),s.id in r?(e[a]=r[s.id],delete r[s.id]):e[a]=new d.RowCtrl(s,n,!1,!1,o)});const s=("top"===t?i?.getPinnedTopRowCount():i?.getPinnedBottomRowCount())??0;e.length=s}onPinnedRowDataChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature?.refreshStickyNode(e);else{if(this.cachedRowCtrls?.has(e))return void this.cachedRowCtrls.removeRow(e);{const t=t=>{const i=t[e.rowIndex];i&&i.rowNode===e&&(i.destroyFirstPass(),i.destroySecondPass(),t[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":t(this.topRowCtrls);break;case"bottom":t(this.bottomRowCtrls);break;default:t(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(null!=e)return e?.forEach(e=>this.redrawRow(e,!0)),void this.dispatchDisplayedRowsChanged(!1);this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=e?.suppressKeepFocus?null:this.focusSvc.getFocusCellToUseAfterRefresh();if(null==t)return null;const i=(0,o._getActiveDomElement)(this.beans),n=(0,o._getDomData)(this.gos,i,c.DOM_DATA_KEY_CELL_CTRL),r=(0,o._getDomData)(this.gos,i,d.DOM_DATA_KEY_ROW_CTRL);return n||r?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,n=e.animate&&(0,o._isAnimateRows)(this.gos),r=i?this.getRowsToRecycle():null;i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:s}=this;if(s){s.checkStickyRows();const e=s.extraTopHeight+s.extraBottomHeight;e&&this.updateContainerHeights(e)}this.recycleRows(r,n),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),null!=t&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");t&&!i&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){const{rowContainerHeight:t}=this;if(this.printLayout)return void t.setModelHeight(null);let i=this.pageBounds.getCurrentPageHeight();0===i&&(i=1),t.setModelHeight(i+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error((0,l._errMsg)(252));this.refreshInProgress=!0,this.beans.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.beans.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusSvc.restoreFocusedCell(e,()=>{this.onCellFocusChanged((0,o._addGridCommonParams)(this.gos,{rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let n=0;n<i;n++){const i=t[n].getAllCellCtrls(),o=i.length;for(let t=0;t<o;t++)e.push(i[t])}return e}getAllRowCtrls(){const{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),i=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...i,...e?.getCtrls("top")??[],...e?.getCtrls("bottom")??[],...e?.getCtrls("center")??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,i){const n=this.rowCtrlsByRowIndex[t];n&&n.addEventListener(e,i)}refreshCells(e={}){const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(const i of this.getCellCtrls(e.rowNodes,e.columns))i.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(const t of this.getRowCtrls(e))t.isFullWidth()&&(t.refreshFullWidth()||this.redrawRow(t.rowNode,!0));this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getRowCtrls(e){const t=p(e),i=this.getAllRowCtrls();return e&&t?i.filter(e=>g(e.rowNode,t)):i}getCellCtrls(e,t){let i;(0,a._exists)(t)&&(i={},t.forEach(e=>{const t=this.colModel.getCol(e);(0,a._exists)(t)&&(i[t.getId()]=!0)}));const n=[];return this.getRowCtrls(e).forEach(e=>{e.getAllCellCtrls().forEach(e=>{const t=e.column.getId();i&&!i[t]||n.push(e)})}),n}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature?.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const t of Object.keys(this.rowCtrlsByRowIndex))null==this.rowCtrlsByRowIndex[t].rowNode.id&&e.push(t);this.removeRowCtrls(e);const t={};for(const e of Object.values(this.rowCtrlsByRowIndex))t[e.rowNode.id]=e;return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(e=>{const i=this.rowCtrlsByRowIndex[e];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[e]})}onBodyScroll(e){"vertical"===e.direction&&this.redraw({afterScroll:!0})}redraw(e={}){const{afterScroll:t}=e;let i;const n=this.stickyRowFeature;n&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);const o=this.firstRenderedRow,r=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let s=!1;if(n){s=n.checkStickyRows();const e=n.extraTopHeight+n.extraBottomHeight;e&&this.updateContainerHeights(e)}const a=this.firstRenderedRow!==o||this.lastRenderedRow!==r;if((!t||s||a)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!s),null!=i)){const e=this.getCellToRestoreFocusToAfterRefresh();null!=i&&null==e&&(this.beans.animationFrameSvc?.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e,t){const i={};e.forEach(e=>i[e]=!0);const n=Object.keys(this.rowCtrlsByRowIndex).filter(e=>!i[e]);this.removeRowCtrls(n,t)}calculateIndexesToDraw(e){const t=[];for(let e=this.firstRenderedRow;e<=this.lastRenderedRow;e++)t.push(e);const i=e=>{const i=e.rowNode.rowIndex;null!=i&&(i<this.firstRenderedRow||i>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(e)&&t.push(i)};for(const e of Object.values(this.rowCtrlsByRowIndex))i(e);if(e)for(const t of Object.values(e))i(t);t.sort((e,t)=>e-t);const n=[];for(let e=0;e<t.length;e++){const i=t[e],o=this.rowModel.getRow(i);o&&!o.sticky&&n.push(i)}return n}recycleRows(e,t=!1,i=!1){const n=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(n,!t);const o=[];if(n.forEach(n=>{const r=this.createOrUpdateRowCtrl(n,e,t,i);(0,a._exists)(r)&&o.push(r)}),e){const{animationFrameSvc:n}=this.beans;n&&i&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?n.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),i=e.isPinningRight();(this.pinningLeft!==t||i!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=i,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(t=>{const i=t.rowNode.rowIndex;e.push(i.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=p(e);return this.getAllRowCtrls().filter(e=>{if(!e.isFullWidth())return!1;const i=e.rowNode;return!(null!=t&&!g(i,t))})}createOrUpdateRowCtrl(e,t,i,n){let o,r=this.rowCtrlsByRowIndex[e];if(r||(o=this.rowModel.getRow(e),(0,a._exists)(o)&&(0,a._exists)(t)&&t[o.id]&&o.alreadyRendered&&(r=t[o.id],t[o.id]=null)),!r){if(o||(o=this.rowModel.getRow(e)),!(0,a._exists)(o))return;r=this.createRowCon(o,i,n)}return o&&(o.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=r,r}destroyRowCtrls(e,t){const i=[];if(e)for(const n of Object.values(e))if(n)if(this.cachedRowCtrls&&n.isCacheable())this.cachedRowCtrls.addRow(n);else if(n.destroyFirstPass(!t),t){const e=n.instanceId;this.zombieRowCtrls[e]=n,i.push(()=>{n.destroySecondPass(),delete this.zombieRowCtrls[e]})}else n.destroySecondPass();t&&(i.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),window.setTimeout(()=>i.forEach(e=>e()),400))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){return this.getRowBuffer()*(0,o._getRowHeightAsNumber)(this.beans)}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:i}=this;let n,r;if(e.updateOffset(),i.isRowsToRender())if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),n=t.getFirstRow(),r=t.getLastRow();else{const o=this.getRowBufferInPixels(),s=this.ctrlsSvc.getScrollFeature(),a=this.gos.get("suppressRowVirtualisation");let l,c,d=!1;do{const i=t.getPixelOffset(),{pageFirstPixel:n,pageLastPixel:r}=t.getCurrentPagePixelRange(),u=e.divStretchOffset,h=s.getVScrollPosition(),p=h.top,g=h.bottom;a?(l=n+u,c=r+u):(l=Math.max(p+i-o,n)+u,c=Math.min(g+i+o,r)+u),this.firstVisibleVPixel=Math.max(p+i,n)+u,this.lastVisibleVPixel=Math.min(g+i,r)+u,d=this.ensureAllRowsInRangeHaveHeightsCalculated(l,c)}while(d);let u=i.getRowIndexAtPixel(l),h=i.getRowIndexAtPixel(c);const p=t.getFirstRow(),g=t.getLastRow();u<p&&(u=p),h>g&&(h=g),n=u,r=h}else n=0,r=-1;const s=(0,o._isDomLayout)(this.gos,"normal"),a=this.gos.get("suppressMaxRenderedRowRestriction"),l=Math.max(this.getRowBuffer(),500);s&&!a&&r-n>l&&(r=n+l);const c=n!==this.firstRenderedRow,d=r!==this.lastRenderedRow;(c||d)&&(this.firstRenderedRow=n,this.lastRenderedRow=r,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:n,lastRow:r}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,(0,r._requestAnimationFrame)(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){const i=this.pinnedRowModel?.ensureRowHeightsValid(),n=this.stickyRowFeature?.ensureRowHeightsValid(),{pageBounds:o,rowModel:r}=this,s=r.ensureRowHeightsValid(e,t,o.getFirstRow(),o.getLastRow());return(s||n)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),!!(n||s||i)&&(this.updateContainerHeights(),!0)}doNotUnVirtualiseRow(e){const t=!1,i=e.rowNode,n=this.focusSvc.isRowNodeFocused(i),o=e.editing,r=i.detail;return(n||o||r)&&!!this.isRowPresent(i)||t}isRowPresent(e){return!!this.rowModel.isRowPresent(e)&&(this.beans.pagination?.isRowPresent(e)??!0)}createRowCon(e,t,i){const n=this.cachedRowCtrls?.getRow(e)??null;if(n)return n;const o=this.gos.get("suppressAnimationFrame"),r=i&&!o&&!this.printLayout&&!!this.beans.animationFrameSvc;return new d.RowCtrl(e,this.beans,t,r,this.printLayout)}getRenderedNodes(){const e=Object.values(this.rowCtrlsByRowIndex).map(e=>e.rowNode);return[...this.getStickyTopRowCtrls().map(e=>e.rowNode),...e,...this.getStickyBottomRowCtrls().map(e=>e.rowNode)]}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find(e=>e.rowNode.rowIndex===i)||null,t||(t=this.getStickyBottomRowCtrls().find(e=>e.rowNode.rowIndex===i)||null))}return t}isRangeInRenderedViewport(e,t){if(null==e||null==t)return!1;const i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow||i)}}t.RowRenderer=u;class h{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(e){if(null==e||null==e.id)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.rowNode!=e?null:t):null}has(e){return null!=this.entriesMap[e.id]}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],(0,s._removeFromArray)(this.entriesList,i)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],(0,s._removeFromArray)(this.entriesList,e)}getEntries(){return this.entriesList}}function p(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach(e=>{const i=e.id;switch(e.rowPinned){case"top":t.top[i]=e;break;case"bottom":t.bottom[i]=e;break;default:t.normal[i]=e}}),t}function g(e,t){const i=e.id;switch(e.rowPinned){case"top":return null!=t.top[i];case"bottom":return null!=t.bottom[i];default:return null!=t.normal[i]}}t.mapRowNodes=p,t.isRowInMap=g},4265:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellSpanModule=void 0;const n=i(7205),o=i(4658),r=i(2991);t.CellSpanModule={moduleName:"CellSpan",version:n.VERSION,beans:[o.RowSpanService,r.SpannedRowRenderer]}},3643:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowSpanCache=t.CellSpan=t._doesColumnSpan=void 0;const n=i(8731),o=i(7274),r=i(2991);t._doesColumnSpan=e=>e.colDef.rowSpan;class s{constructor(e,t){this.col=e,this.firstNode=t,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(t)}addSpannedNode(e){this.spannedNodes.add(e),this.lastNode=e}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(e){return e.column===this.col&&e.rowPinned==this.firstNode.rowPinned&&this.firstNode.rowIndex<=e.rowIndex&&e.rowIndex<=this.lastNode.rowIndex}getLastNodeAutoHeight(){const e=this.firstNode.__autoHeights?.[this.col.getColId()];if(null==e)return;let t=0;return this.spannedNodes.forEach(e=>{e!==this.lastNode&&(t+=e.rowHeight)}),e-t}}t.CellSpan=s;class a extends n.BeanStub{constructor(e){super(),this.column=e}buildCache(e){const{column:t,beans:{gos:i,pinnedRowModel:n,rowModel:r,valueSvc:a}}=this,{colDef:l}=t,c=new Map,d=i.getCallback("isFullWidthRow"),u=l.equals,h=l.spanRows,p="function"==typeof h;let g,f=null,m=null;const v=(e,t)=>{f=e,m=null,g=t},b=e=>{const n=!(e.isExpandable()||e.group||e.detail||d&&d({rowNode:e}));if(null==e.rowIndex||!n)return void v(null,null);if(null==f||e.level!==f.level||e.footer||m&&e.rowIndex-1!==m?.getLastNode().rowIndex)return void v(e,a.getValue(t,e));const r=a.getValue(t,e);if(p){const n=(0,o._addGridCommonParams)(i,{valueA:g,nodeA:f,valueB:r,nodeB:e,column:t,colDef:l});if(!h(n))return void v(e,r)}else if(u?!u(g,r):g!==r)return void v(e,r);m||(m=new s(t,f),c.set(f,m)),m.addSpannedNode(e),c.set(e,m)};switch(e){case"center":r.forEachDisplayedNode?.(b);break;case"top":n?.forEachPinnedRow("top",b);break;case"bottom":n?.forEachPinnedRow("bottom",b)}this[`${e}ValueNodeMap`]=c}isCellSpanning(e){return!!this.getCellSpan(e)}getCellSpan(e){return this[`${(0,r._normalisePinnedValue)(e.rowPinned)}ValueNodeMap`].get(e)}}t.RowSpanCache=a},4658:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowSpanService=void 0;const n=i(8731),o=i(2043),r=i(3643);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=(0,o._debounce)(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=(0,o._debounce)(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){this.addManagedEventListeners({modelUpdated:this.buildModelCaches.bind(this),pinnedRowDataChanged:this.buildPinnedCaches.bind(this)})}register(e){const{gos:t}=this.beans;if(!t.get("enableCellSpan"))return;if(this.spanningColumns.has(e))return;const i=this.createManagedBean(new r.RowSpanCache(e));this.spanningColumns.set(e,i),i.buildCache("top"),i.buildCache("bottom"),i.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(e){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:e})}deregister(e){this.spanningColumns.delete(e)}onRowDataUpdated(e){const{spannedRowRenderer:t}=this.beans;if(e.rowPinned){if(null!=this.pinnedTimeout)return;this.pinnedTimeout=window.setTimeout(()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),t?.createCtrls("top"),t?.createCtrls("bottom")},0)}else null==this.modelTimeout&&(this.modelTimeout=window.setTimeout(()=>{this.modelTimeout=null,this.buildModelCaches(),t?.createCtrls("center")},0))}buildModelCaches(){null!=this.modelTimeout&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach(e=>e.buildCache("center")),this.debounceModelEvent()}buildPinnedCaches(){null!=this.pinnedTimeout&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach(e=>{e.buildCache("top"),e.buildCache("bottom")}),this.debouncePinnedEvent()}isCellSpanning(e,t){const i=this.spanningColumns.get(e);return!!i&&i.isCellSpanning(t)}getCellSpanByPosition(e){const{pinnedRowModel:t,rowModel:i}=this.beans,n=e.column,o=e.rowIndex,r=this.spanningColumns.get(n);if(!r)return;let s;switch(e.rowPinned){case"top":s=t?.getPinnedTopRow(o);break;case"bottom":s=t?.getPinnedBottomRow(o);break;default:s=i.getRow(o)}return s?r.getCellSpan(s):void 0}getCellStart(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.firstNode.rowIndex}:e}getCellEnd(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.getLastNode().rowIndex}:e}getCellSpan(e,t){const i=this.spanningColumns.get(e);if(i)return i.getCellSpan(t)}forEachSpannedColumn(e,t){for(const[i,n]of this.spanningColumns)n.isCellSpanning(e)&&t(i,n.getCellSpan(e))}destroy(){super.destroy(),this.spanningColumns.clear()}}t.RowSpanService=s},8411:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SpannedCellCtrl=void 0;const n=i(5230),o=i(2331),r=i(814);class s extends r.CellCtrl{constructor(e,t,i){super(e.col,e.firstNode,i,t),this.cellSpan=e,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(e,t,i,n,o,r,s){this.eWrapper=i,super.setComp(e,t,i,n,o,r,s),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){null!=this.rowNode.rowIndex&&(0,n._setAriaRowIndex)(this.eGui,this.rowNode.rowIndex)}setAriaRowSpan(){(0,n._setAriaRowSpan)(this.eGui,this.cellSpan.spannedNodes.size)}shouldRestoreFocus(){return this.beans.focusSvc.shouldRestoreFocus(this.cellSpan)}onFocusOut(){this.focusedCellPosition=void 0,super.onFocusOut()}setFocusedCellPosition(e){this.focusedCellPosition=e}getFocusedCellPosition(){return this.focusedCellPosition??this.cellPosition}isCellFocused(){const e=this.beans.focusSvc.getFocusedCell();return!!e&&this.cellSpan.doesSpanContain(e)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.addOrRemoveCssClass(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(e){const{beans:t}=this;if((0,o._isCellFocusSuppressed)(t))return void(this.focusedCellPosition=void 0);const i=this.isCellFocused();i||(this.focusedCellPosition=void 0),e&&i&&(this.focusedCellPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column}),super.onCellFocused(e)}getRootElement(){return this.eWrapper}}t.SpannedCellCtrl=s},6541:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SpannedRowCtrl=void 0;const n=i(7632),o=i(8411);class r extends n.RowCtrl{onRowIndexChanged(){super.onRowIndexChanged(),this.getAllCellCtrls().forEach(e=>e.refreshAriaRowIndex())}getInitialRowClasses(e){return["ag-spanned-row"]}getNewCellCtrl(e){const t=this.beans.rowSpanSvc?.getCellSpan(e,this.rowNode);if(t)return t.firstNode!==this.rowNode?void 0:new o.SpannedCellCtrl(t,this,this.beans)}shouldRecreateCellCtrl(e){const t=this.beans.rowSpanSvc?.getCellSpan(e.column,this.rowNode);return!t||(!(t.firstNode===this.rowNode)||e.getCellSpan()!==t)}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}}t.SpannedRowCtrl=r},2991:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._normalisePinnedValue=t.SpannedRowRenderer=void 0;const n=i(8731),o=i(6541);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(e){const{rowSpanSvc:t}=this.beans,i=`${e}Ctrls`,n=this[i],r=n.size,s=this.getAllRelevantRowControls(e),a=new Map;let l=!1;for(const e of s)e.isAlive()&&t?.forEachSpannedColumn(e.rowNode,(e,t)=>{if(a.has(t.firstNode))return;const i=n.get(t.firstNode);if(i)return a.set(t.firstNode,i),void n.delete(t.firstNode);l=!0;const r=new o.SpannedRowCtrl(t.firstNode,this.beans,!1,!1,!1);a.set(t.firstNode,r)});this[i]=a;const c=a.size===r;if(l||!c){for(const e of n.values())e.destroyFirstPass(!0),e.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey:e})}}getAllRelevantRowControls(e){const{rowRenderer:t}=this.beans;switch(e){case"top":return t.topRowCtrls;case"bottom":return t.bottomRowCtrls;case"center":return t.allRowCtrls}}getCellByPosition(e){const{rowSpanSvc:i}=this.beans,n=i?.getCellSpanByPosition(e);if(!n)return;const o=this[`${(0,t._normalisePinnedValue)(e.rowPinned)}Ctrls`].get(n.firstNode);return o?o.getAllCellCtrls().find(t=>t.column===e.column):void 0}getCtrls(e){return[...this[`${e}Ctrls`].values()]}destroyRowCtrls(e){const t=`${e}Ctrls`;for(const e of this[t].values())e.destroyFirstPass(!0),e.destroySecondPass();this[t]=new Map}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}}t.SpannedRowRenderer=r,t._normalisePinnedValue=e=>e??"center"},3306:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSelectionService=void 0;const n=i(3146),o=i(8731),r=i(9888),s=i(7274),a=i(5230),l=i(5954),c=i(9666),d=i(8273);class u extends o.BeanStub{postConstruct(){const{gos:e,beans:t}=this;this.selectionCtx=new c.RowRangeSelectionContext(t.rowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>{const t=(0,s._getIsRowSelectable)(e);t!==this.isRowSelectable&&(this.isRowSelectable=t,this.updateSelectable())}),this.isRowSelectable=(0,s._getIsRowSelectable)(e)}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new l.CheckboxSelectionComponent}createSelectAllFeature(e){return new d.SelectAllFeature(e)}isMultiSelect(){return(0,s._isMultiRowSelection)(this.gos)}onRowCtrlSelected(e,t,i){const n=!!e.rowNode.isSelected();e.forEachGui(i,e=>{e.rowComp.addOrRemoveCssClass("ag-row-selected",n);const i=e.element;(0,a._setAriaSelected)(i,n),i.contains((0,s._getActiveDomElement)(this.beans))&&t(e)})}announceAriaRowSelection(e){if(this.isRowSelectionBlocked(e))return;const t=e.isSelected();if(!e.selectable)return;const i=this.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row`);this.beans.ariaAnnounce?.announceValue(i,"rowSelection")}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e})}isRowSelectionBlocked(e){return!e.selectable||!!e.rowPinned||!(0,s._isRowSelection)(this.gos)}updateRowSelectable(e,t){const i=this.isRowSelectable?.(e)??!0;return this.setRowSelectable(e,i,t),i}setRowSelectable(e,t,i){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent("selectableChanged"),i)return;if((0,s._getGroupSelectsDescendants)(this.gos)){const t=this.calculateSelectedFromChildren(e);return void this.setNodesSelected({nodes:[e],newValue:t??!1,source:"selectableChanged"})}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){let t=!1,i=!1;if(!e.childrenAfterGroup?.length)return e.selectable?e.__selected:null;for(let n=0;n<e.childrenAfterGroup.length;n++){const o=e.childrenAfterGroup[n];let r=o.isSelected();if(!o.selectable){const e=this.calculateSelectedFromChildren(o);if(null===e)continue;r=e}switch(r){case!0:t=!0;break;case!1:i=!0;break;default:return}}return t&&i?void 0:!!t||!i&&(e.selectable?e.__selected:null)}selectRowNode(e,t,i,n="api"){const o=!e.selectable&&t,s=e.__selected===t;if(o||s)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");const a=e.sibling;return a&&a.footer&&a.__localEventService&&a.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent({...(0,r._createGlobalRowEvent)(e,this.gos,"rowSelected"),event:i||null,source:n}),!0}isCellCheckboxSelection(e,t){const i=this.gos.get("rowSelection");if(i&&"string"!=typeof i){const o=(0,n.isColumnSelectionCol)(e)&&(0,s._getCheckboxes)(i);return e.isColumnFunc(t,o)}return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,i,n){const{gos:o,selectionCtx:r}=this,a=e.isSelected(),l=(0,s._getGroupSelectsDescendants)(o),c=(0,s._getEnableSelection)(o),d=(0,s._getEnableDeselection)(o),u=this.isMultiSelect(),h="rowClicked"===n;if(h&&l&&e.group)return null;if(h&&!c&&!d)return null;if(t&&i&&u){const t=r.getRoot();if(t){if(t.isSelected()){const t=r.isInRange(e)?r.truncate(e):r.extend(e,l);return{deselect:t.discard,select:t.keep,reset:!1}}return{select:[],deselect:r.extend(e,l).keep,reset:!1}}return null}if(t&&u){const t=r.selectAll?this.beans.rowModel.getRow(0):void 0,i=r.getRoot(t),n=r.isInRange(e)?r.truncate(e):r.extend(e,l);return{select:n.keep,deselect:n.discard,reset:r.selectAll||!(!i||i.isSelected())}}if(i)return r.setRoot(e),h&&a&&!d?null:{node:e,newValue:!a,clearSelection:!u};{r.setRoot(e);const t=(0,s._getEnableSelectionWithoutKeys)(o),i=h&&(!t||!c);if("filteredDescendants"===(0,s._getGroupSelection)(o)&&void 0===a&&(0,s._isClientSideRowModel)(o))return{node:e,newValue:!1,clearSelection:!u||i};if(h){const n=a?!t:c;return n===a&&!i||n&&!c||!n&&!d?null:{node:e,newValue:n,clearSelection:!u||i}}return{node:e,newValue:!a,clearSelection:!u||i}}}}t.BaseSelectionService=u},5954:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxSelectionComponent=void 0;const n=i(7274),o=i(5230),r=i(2979),s=i(66),a=i(8020);class l extends a.Component{constructor(){super('\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[s.AgCheckboxSelector]),this.eCheckbox=a.RefPlaceholder}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:i}=this,n=t.isSelected(),r=(0,o._getAriaCheckboxStateName)(e,n),[s,a]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],l=e(s,a);i.setValue(n,!0),i.setInputAriaLabel(`${l} (${r})`)}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:r._stopPropagationForAgGrid,click:e=>{(0,r._stopPropagationForAgGrid)(e),this.beans.selectionSvc?.handleSelectionEvent(e,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue:e,previousValue:t})=>{("object"==typeof e?(0,n._getHideDisabledCheckboxes)(e):void 0)!==("object"==typeof t?(0,n._getHideDisabledCheckboxes)(t):void 0)&&this.onSelectableChanged()}),(0,n._getIsRowSelectable)(this.gos)||"function"==typeof this.getIsVisible()){const e=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){const{column:e,rowNode:t,overrides:i,gos:o}=this;let r=t.selectable;const s=this.getIsVisible();if(r)if("function"==typeof s){const n=i?.callbackParams;if(e){const i=e.createColumnFunctionCallbackParams(t);r=s({...n,...i})}else r=s({...n,node:t,data:t.data})}else r=s??!1;const a=o.get("rowSelection");if(a&&"string"!=typeof a?!(0,n._getHideDisabledCheckboxes)(a):e?.getColDef().showDisabledCheckboxes)return this.eCheckbox.setDisabled(!r),this.setVisible(!0),void this.setDisplayed(!0);i?.removeHidden?this.setDisplayed(r):this.setVisible(r)}getIsVisible(){const e=this.overrides;if(e)return e.isVisible;const t=this.gos.get("rowSelection");return t&&"string"!=typeof t?(0,n._getCheckboxes)(t):this.column?.getColDef()?.checkboxSelection}}t.CheckboxSelectionComponent=l},9666:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RowRangeSelectionContext=void 0,t.RowRangeSelectionContext=class{constructor(e){this.rowModel=e,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(0===this.cachedRange.length){const e=this.getRoot(),t=this.getEnd();if(null==e||null==t)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)??[]}return this.cachedRange}isInRange(e){return null!==this.rootId&&this.getRange().some(t=>t.id===e.id)}getRoot(e){return this.rootId?this.rowModel.getRowNode(this.rootId)??null:e?(this.setRoot(e),e):null}getEnd(){return this.endId?this.rowModel.getRowNode(this.endId)??null:null}truncate(e){const t=this.getRange();if(0===t.length)return{keep:[],discard:[]};const i=t[0].id===this.rootId,n=t.findIndex(t=>t.id===e.id);if(n>-1){const o=t.slice(0,n),r=t.slice(n+1);return this.setEndRange(e),i?{keep:o,discard:r}:{keep:r,discard:o}}return{keep:t,discard:[]}}extend(e,t=!1){const i=this.getRoot();if(null==i){const i=this.getRange().slice();return t&&e.depthFirstSearch(e=>!e.group&&i.push(e)),i.push(e),this.setRoot(e),{keep:i,discard:[]}}const n=this.rowModel.getNodesInRangeForSelection(i,e);if(!n)return this.setRoot(e),{keep:[e],discard:[]};if(n.find(e=>e.id===this.endId))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const t=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:t}}}}},9770:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedRows=t.getSelectedNodes=t.deselectAllOnCurrentPage=t.selectAllOnCurrentPage=t.deselectAllFiltered=t.selectAllFiltered=t.deselectAll=t.selectAll=t.setNodesSelected=void 0;const n=i(7764);t.setNodesSelected=function(e,t){if(!t.nodes.every(e=>e.rowPinned?((0,n._warn)(59),!1):void 0!==e.id||((0,n._warn)(60),!1)))return;const{nodes:i,source:o,newValue:r}=t;e.selectionSvc?.setNodesSelected({nodes:i,source:o??"api",newValue:r})},t.selectAll=function(e,t,i="apiSelectAll"){e.selectionSvc?.selectAllRowNodes({source:i,selectAll:t})},t.deselectAll=function(e,t,i="apiSelectAll"){e.selectionSvc?.deselectAllRowNodes({source:i,selectAll:t})},t.selectAllFiltered=function(e,t="apiSelectAllFiltered"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"filtered"})},t.deselectAllFiltered=function(e,t="apiSelectAllFiltered"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"filtered"})},t.selectAllOnCurrentPage=function(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"currentPage"})},t.deselectAllOnCurrentPage=function(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"currentPage"})},t.getSelectedNodes=function(e){return e.selectionSvc?.getSelectedNodes()??[]},t.getSelectedRows=function(e){return e.selectionSvc?.getSelectedRows()??[]}},3352:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowSelectionModule=t.SharedRowSelectionModule=void 0;const n=i(3245),o=i(7205),r=i(9770),s=i(6603);t.SharedRowSelectionModule={moduleName:"SharedRowSelection",version:o.VERSION,beans:[n.SelectionColService],apiFunctions:{setNodesSelected:r.setNodesSelected,selectAll:r.selectAll,deselectAll:r.deselectAll,selectAllFiltered:r.selectAllFiltered,deselectAllFiltered:r.deselectAllFiltered,selectAllOnCurrentPage:r.selectAllOnCurrentPage,deselectAllOnCurrentPage:r.deselectAllOnCurrentPage,getSelectedNodes:r.getSelectedNodes,getSelectedRows:r.getSelectedRows}},t.RowSelectionModule={moduleName:"RowSelection",version:o.VERSION,rowModels:["clientSide","infinite","viewport"],beans:[s.SelectionService],dependsOn:[t.SharedRowSelectionModule]}},8273:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectAllFeature=void 0;const n=i(3146),o=i(8731),r=i(7274),s=i(5230),a=i(7764),l=i(66);class c extends o.BeanStub{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains((0,r._getActiveDomElement)(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;const t=this.createManagedBean(new l.AgCheckbox);this.cbSelectAll=t,t.addCssClass("ag-header-select-all"),(0,s._setAriaRole)(t.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue:e,previousValue:t})=>{const i=e=>"string"!=typeof e&&e&&"singleRow"!==e.mode?e.selectAll:void 0;i(e)!==i(t)&&this.showOrHideSelectAll()}),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll("uiColumnMoved"===e.source)}showOrHideSelectAll(e=!1){const t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.getSelectAllMode(),t=this.beans.selectionSvc,i=this.cbSelectAll,n=t.getSelectAllState(e);i.setValue(n);const o=t.hasNodesToSelect(e);i.setDisabled(!o),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(e=!1){const t=this.getLocaleTextFunc(),{headerCellCtrl:i,cbSelectAll:n,cbSelectAllVisible:o}=this,r=n.getValue()?t("ariaChecked","checked"):t("ariaUnchecked","unchecked"),s=t("ariaRowSelectAll","Press Space to toggle all rows selection");i.setAriaDescriptionProperty("selectAll",o?`${s} (${r})`:null),n.setInputAriaLabel(t("ariaHeaderSelection","Column with Header Selection")),e||i.announceAriaDescription()}checkSelectionType(e){return!!(0,r._isMultiRowSelection)(this.gos)||((0,a._warn)(128,{feature:e}),!1)}checkRightRowModelType(e){const{gos:t,rowModel:i}=this.beans;return!(!(0,r._isClientSideRowModel)(t)&&!(0,r._isServerSideRowModel)(t)&&((0,a._warn)(129,{feature:e,rowModel:i.getType()}),1))}onCbSelectAll(){if(this.processingEventFromCheckbox)return;if(!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.getSelectAllMode();let i="uiSelectAll";"currentPage"===t?i="uiSelectAllCurrentPage":"filtered"===t&&(i="uiSelectAllFiltered");const n={source:i,selectAll:t},o=this.beans.selectionSvc;e?o.selectAllRowNodes(n):o.deselectAllRowNodes(n)}isCheckboxSelection(){const{column:e,gos:t,beans:i}=this,o=t.get("rowSelection"),s=e.getColDef(),{headerCheckboxSelection:a}=s;let l=!1;const c="object"==typeof o;if(c){const t=(0,n.isColumnSelectionCol)(e),s=(0,n.isColumnGroupAutoCol)(e);("autoGroupColumn"===(0,r._getCheckboxLocation)(o)&&s||t&&i.selectionColSvc?.isSelectionColumnEnabled())&&(l=(0,r._getHeaderCheckbox)(o))}else l="function"==typeof a?a((0,r._addGridCommonParams)(t,{column:e,colDef:s})):!!a;const d=c?"headerCheckbox":"headerCheckboxSelection";return l&&this.checkRightRowModelType(d)&&this.checkSelectionType(d)}getSelectAllMode(){const e=(0,r._getSelectAll)(this.gos,!1);if(e)return e;const{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:i}=this.column.getColDef();return t?"currentPage":i?"filtered":"all"}}t.SelectAllFeature=c},6603:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionService=void 0;const n=i(3373),o=i(7274),r=i(6800),s=i(7764),a=i(3306);class l extends a.BaseSelectionService{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();const{gos:e}=this;this.mode=(0,o._getRowSelectionMode)(e),this.groupSelectsDescendants=(0,o._getGroupSelectsDescendants)(e),this.groupSelectsFiltered="filteredDescendants"===(0,o._getGroupSelection)(e),this.masterSelectsDetail="detail"===(0,o._getMasterSelects)(e),this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],()=>{const t=(0,o._getGroupSelectsDescendants)(e),i=(0,o._getRowSelectionMode)(e),n="filteredDescendants"===(0,o._getGroupSelection)(e);this.masterSelectsDetail="detail"===(0,o._getMasterSelects)(e),t===this.groupSelectsDescendants&&n===this.groupSelectsFiltered&&i===this.mode||(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=n,this.mode=i)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,i){if(this.isRowSelectionBlocked(t))return 0;const n=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,i);return null==n?0:(this.selectionCtx.selectAll=!1,"select"in n?(n.reset?this.resetNodes():this.selectRange(n.deselect,!1,i),this.selectRange(n.select,!0,i)):this.setNodesSelected({nodes:[n.node],newValue:n.newValue,clearSelection:n.clearSelection,event:e,source:i}))}setNodesSelected({newValue:e,clearSelection:t,suppressFinishActions:i,nodes:n,event:r,source:a}){if(!(0,o._isRowSelection)(this.gos)&&e)return(0,s._warn)(132),0;if(0===n.length)return 0;if(n.length>1&&!this.isMultiSelect())return(0,s._warn)(130),0;let l=0;for(let t=0;t<n.length;t++){const i=c(n[t]),o=this.groupSelectsFiltered&&i.group;i.rowPinned?(0,s._warn)(59):void 0!==i.id?(o||this.selectRowNode(i,e,r,a)&&(this.detailSelection.delete(i.id),l++),this.groupSelectsDescendants&&i.childrenAfterGroup?.length&&(l+=this.selectChildren(i,e,a))):(0,s._warn)(60)}return i||(e&&(t||!this.isMultiSelect())&&(l+=this.clearOtherNodes(c(n[0]),a)),l>0&&(this.updateGroupsFromChildrenSelections(a),this.dispatchSelectionChanged(a))),l}selectRange(e,t,i){let n=0;return e.forEach(e=>{e.group&&this.groupSelectsDescendants||this.selectRowNode(e,t,void 0,i)&&n++}),n>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),n}selectChildren(e,t,i){const n=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return n?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:i,nodes:n}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>e.push(t.data)),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((i,n)=>{e(i)&&t.set(n,i)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;const{gos:i,rowModel:n}=this.beans;if(!(0,o._isClientSideRowModel)(i,n))return!1;const s=n.rootNode;if(!s)return!1;t||((t=new r.ChangedPath(!0,s)).active=!1);let a=!1;return t.forEachChangedNodeDepthFirst(t=>{if(t!==s){const i=this.calculateSelectedFromChildren(t);a=this.selectRowNode(t,null!==i&&i,void 0,e)||a}}),a}clearOtherNodes(e,t){const i=new Map;let n=0;return this.selectedNodes.forEach(o=>{if(o&&o.id!==e.id){const e=this.selectedNodes.get(o.id);n+=this.setNodesSelected({nodes:[e],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsDescendants&&o.parent&&i.set(o.parent.id,o.parent)}}),i.forEach(e=>{const i=this.calculateSelectedFromChildren(e);this.selectRowNode(e,null!==i&&i,void 0,t)}),n}onRowSelected(e){const t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;const t=new n.RowNode(this.beans);return t.id=e.id,t.data=e.data,t.__daemon=!0,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){t&&e.id!==t.id&&this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach(e=>{this.selectRowNode(e,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){const{gos:e,rowModel:t}=this.beans;if(!(0,o._isClientSideRowModel)(e,t))return;const i=t.getTopLevelNodes();if(null===i)return;const n=[];return function e(t){for(let i=0,o=t.length;i<o;i++){const o=t[i];o.isSelected()?n.push(o):o.group&&o.childrenAfterGroup&&e(o.childrenAfterGroup)}}(i),n}isEmpty(){return 0===this.getSelectionCount()}deselectAllRowNodes({source:e,selectAll:t}){const i=(0,o._isClientSideRowModel)(this.gos);let n=!1;const r=t=>{const i=this.selectRowNode(c(t),!1,void 0,e);n||(n=i)};if("currentPage"===t||"filtered"===t){if(!i)return void(0,s._error)(102);this.getNodesToSelect(t).forEach(r)}else this.selectedNodes.forEach(r),this.reset(e);if(this.selectionCtx.selectAll=!1,i&&this.groupSelectsDescendants){const t=this.updateGroupsFromChildrenSelections(e);n||(n=t)}n&&this.dispatchSelectionChanged(e)}getSelectedCounts(e){let t=0,i=0;return this.getNodesToSelect(e).forEach(e=>{this.groupSelectsDescendants&&e.group||(e.isSelected()?t++:e.selectable&&i++)}),{selectedCount:t,notSelectedCount:i}}getSelectAllState(e){const{selectedCount:t,notSelectedCount:i}=this.getSelectedCounts(e);return d(t,i)??null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter(e=>e.selectable).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];const t=[];if("currentPage"===e)return this.forEachNodeOnPage(e=>{if(e.group)if(e.expanded||e.footer)this.groupSelectsDescendants||t.push(e);else{const i=e=>{t.push(e),e.childrenAfterFilter?.length&&e.childrenAfterFilter.forEach(i)};i(e)}else t.push(e)}),t;const i=this.beans.rowModel;return"filtered"===e?(i.forEachNodeAfterFilter(e=>{t.push(e)}),t):(i.forEachNode(e=>{t.push(e)}),t)}forEachNodeOnPage(e){const{pageBounds:t,rowModel:i}=this.beans,n=t.getFirstRow(),o=t.getLastRow();for(let t=n;t<=o;t++){const n=i.getRow(t);n&&e(n)}}selectAllRowNodes(e){const{gos:t,selectionCtx:i}=this;if(!(0,o._isRowSelection)(t))return void(0,s._warn)(132);if((0,o._isUsingNewRowSelectionAPI)(t)&&!(0,o._isMultiRowSelection)(t))return void(0,s._warn)(130);if(!this.canSelectAll())return;const{source:n,selectAll:r}=e;let a=!1;if(this.getNodesToSelect(r).forEach(e=>{const t=this.selectRowNode(c(e),!0,void 0,n);a||(a=t)}),i.selectAll=!0,(0,o._isClientSideRowModel)(t)&&this.groupSelectsDescendants){const e=this.updateGroupsFromChildrenSelections(n);a||(a=e)}a&&this.dispatchSelectionChanged(n)}getSelectionState(){const e=[];return this.selectedNodes.forEach(t=>{t?.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return void(0,s._error)(103);const i=new Set(e),n=[];this.beans.rowModel.forEachNode(e=>{i.has(e.id)&&n.push(e)}),this.setNodesSelected({newValue:!0,nodes:n,source:t})}canSelectAll(){const{gos:e,rowModel:t}=this.beans;return!!(0,o._isClientSideRowModel)(e)||((0,s._error)(100,{rowModelType:t.getType()}),!1)}updateSelectable(e){const{gos:t,rowModel:i}=this.beans;if(!(0,o._isRowSelection)(t))return;const n="selectableChanged",s=void 0!==e,a=(0,o._isClientSideRowModel)(t)&&this.groupSelectsDescendants,l=[],c=e=>{if(!s||e.group){if(a&&e.group){const t=e.childrenAfterGroup?.some(e=>e.selectable)??!1;return void this.setRowSelectable(e,t,!0)}!this.updateRowSelectable(e,!0)&&e.isSelected()&&l.push(e)}};if(a){if(void 0===e){const t=i.rootNode;e=t?new r.ChangedPath(!1,t):void 0}e?.forEachChangedNodeDepthFirst(c,!s,!s)}else i.forEachNode(c);l.length&&this.setNodesSelected({nodes:l,newValue:!1,source:n}),!s&&a&&this.updateGroupsFromChildrenSelections?.(n)}updateSelectableAfterGrouping(e){if(this.updateSelectable(e),this.groupSelectsDescendants){const t=this.updateGroupsFromChildrenSelections?.("rowGroupChanged",e);t&&this.dispatchSelectionChanged("rowGroupChanged")}}refreshMasterNodeState(e,t){if(!this.masterSelectsDetail)return;const i=e.detailNode?.detailGridInfo?.api;if(!i)return;const n=function(e){let t=0,i=0;return e.forEachNode(e=>{e.isSelected()?t++:e.selectable&&i++}),d(t,i)}(i);if(e.isSelected()!==n&&this.selectRowNode(e,n,t,"masterDetail")&&this.dispatchSelectionChanged("masterDetail"),!n){const t=this.detailSelection.get(e.id)??new Set;for(const e of i.getSelectedNodes())t.add(e.id);this.detailSelection.set(e.id,t)}}setDetailSelectionState(e,t,i){if(this.masterSelectsDetail)if((0,o._isMultiRowSelection)(t))switch(e.isSelected()){case!0:i.selectAll();break;case!1:i.deselectAll();break;case void 0:{const t=this.detailSelection.get(e.id);if(t){const e=[];for(const n of t){const t=i.getRowNode(n);t&&e.push(t)}i.setNodesSelected({nodes:e,newValue:!0,source:"masterDetail"})}break}}else(0,s._warn)(269)}}function c(e){return e.footer?e.sibling:e}function d(e,t){return(0!==e||0!==t)&&(e>0&&t>0?void 0:e>0)}t.SelectionService=l},3341:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowNodeSorter=void 0;const n=i(8731),o=i(7274),r=i(4422);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){const{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=(0,o._isColumnsSortingCoupledToGroup)(e),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=(0,o._isColumnsSortingCoupledToGroup)(e))}doFullSort(e,t){const i=e.map((e,t)=>({currentPos:t,rowNode:e}));return i.sort(this.compareRowNodes.bind(this,t)),i.map(e=>e.rowNode)}compareRowNodes(e,t,i){const n=t.rowNode,o=i.rowNode;for(let t=0,i=e.length;t<i;t++){const i=e[t],s="desc"===i.sort,a=this.getValue(n,i.column),l=this.getValue(o,i.column);let c;const d=this.getComparator(i,n);if(c=d?d(a,l,n,o,s):(0,r._defaultComparator)(a,l,this.isAccentedSort),!isNaN(c)&&0!==c)return"asc"===i.sort?c:-1*c}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,n=i.getColDef().comparator;if(null!=n)return n;if(!i.getColDef().showRowGroup)return;const o=!t.group&&i.getColDef().field;if(!o)return;const r=this.beans.colModel.getColDefCol(o);return r?r.getColDef().comparator:void 0}getValue(e,t){const{valueSvc:i,colModel:n,showRowGroupCols:r,gos:s}=this.beans;if(!this.primaryColumnsSortGroups)return i.getValue(t,e,!1);if(e.rowGroupColumn===t){if((0,o._isGroupUseEntireRow)(s,n.isPivotActive())){const n=e.allLeafChildren?.[0];return n?i.getValue(t,n,!1):void 0}const a=r?.getShowRowGroupCol(t.getId());if(!a)return;return e.groupData?.[a.getId()]}return e.group&&t.getColDef().showRowGroup?void 0:i.getValue(t,e,!1)}}t.RowNodeSorter=s},7430:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.onSortChanged=void 0,t.onSortChanged=function(e){e.sortSvc?.onSortChanged("api")}},7388:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SortIndicatorSelector=t.SortIndicatorComp=void 0;const n=i(7274),o=i(3507),r=i(9970),s=i(8020);function a(e,t){return`<span data-ref="eSort${e}" class="ag-sort-indicator-icon ag-sort-${t} ag-hidden" aria-hidden="true"></span>`}const l=`<span class="ag-sort-indicator-container">\n        ${a("Order","order")}\n        ${a("Asc","ascending-icon")}\n        ${a("Desc","descending-icon")}\n        ${a("Mixed","mixed-icon")}\n        ${a("None","none-icon")}\n    </span>`;class c extends s.Component{constructor(e){super(),this.eSortOrder=s.RefPlaceholder,this.eSortAsc=s.RefPlaceholder,this.eSortDesc=s.RefPlaceholder,this.eSortMixed=s.RefPlaceholder,this.eSortNone=s.RefPlaceholder,e||this.setTemplate(l)}attachCustomElements(e,t,i,n,o){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=n,this.eSortNone=o}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const i=this.updateIcons.bind(this),n=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:n,columnRowGroupChanged:n}),this.onSortChanged()}addInIcon(e,t,i){if(null==t)return;const n=(0,r._createIconNoSpan)(e,this.beans,i);n&&t.appendChild(n)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortNone:i,column:n,gos:r,beans:s}=this,a=s.sortSvc.getDisplaySortForColumn(n);if(e){const t="asc"===a;(0,o._setDisplayed)(e,t,{skipAriaHidden:!0})}if(t){const e="desc"===a;(0,o._setDisplayed)(t,e,{skipAriaHidden:!0})}if(i){const e=!n.getColDef().unSortIcon&&!r.get("unSortIcon"),t=null==a;(0,o._setDisplayed)(i,!e&&t,{skipAriaHidden:!0})}}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:i}=this;this.addInIcon("sortUnSort",e,t);const o=t.getColDef().showRowGroup;(0,n._isColumnsSortingCoupledToGroup)(i)&&o&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:e,beans:t,column:i}=this;if(e){const n="mixed"===t.sortSvc.getDisplaySortForColumn(i);(0,o._setDisplayed)(e,n,{skipAriaHidden:!0})}}updateSortOrder(){const{eSortOrder:e,column:t,beans:{sortSvc:i}}=this;if(!e)return;const n=i.getColumnsWithSortingOrdered(),r=i.getDisplaySortIndexForColumn(t)??-1,s=n.some(e=>i.getDisplaySortIndexForColumn(e)??!1),a=r>=0&&s;(0,o._setDisplayed)(e,a,{skipAriaHidden:!0}),r>=0?e.textContent=(r+1).toString():(0,o._clearElement)(e)}}t.SortIndicatorComp=c,t.SortIndicatorSelector={selector:"AG-SORT-INDICATOR",component:c}},6620:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SortModule=void 0;const n=i(7205),o=i(3341),r=i(7430),s=i(7388),a=i(8125);t.SortModule={moduleName:"Sort",version:n.VERSION,beans:[a.SortService,o.RowNodeSorter],apiFunctions:{onSortChanged:r.onSortChanged},userComponents:{agSortIndicator:s.SortIndicatorComp},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}}},8125:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SortService=t.DEFAULT_SORTING_ORDER=void 0;const n=i(8731),o=i(7274),r=i(7388);t.DEFAULT_SORTING_ORDER=["asc","desc",null];class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,i){const n=this.getNextSortDirection(e);this.setSortForColumn(e,n,t,i)}progressSortFromEvent(e,t){const i="ctrl"===this.gos.get("multiSortKey")?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,i,"uiColumnSorted")}setSortForColumn(e,t,i,n){"asc"!==t&&"desc"!==t&&(t=null);const{gos:r,showRowGroupCols:s}=this.beans;let a=[e];if((0,o._isColumnsSortingCoupledToGroup)(r)&&e.getColDef().showRowGroup){const t=s?.getSourceColumnsForGroupColumn?.(e),i=t?.filter(e=>e.isSortable());i&&(a=[e,...i])}a.forEach(e=>this.setColSort(e,t,n));const l=[];if(!i&&!r.get("alwaysMultiSort")||r.get("suppressMultiSort")){const e=this.clearSortBarTheseColumns(a,n);l.push(...e)}this.updateSortIndex(e),l.push(...a),this.dispatchSortChangedEvents(n,l)}updateSortIndex(e){const{gos:t,colModel:i,showRowGroupCols:n}=this.beans,r=(0,o._isColumnsSortingCoupledToGroup)(t),s=n?.getShowRowGroupCol(e.getId()),a=r&&s||e,l=this.getColumnsWithSortingOrdered();i.getAllCols().forEach(e=>this.setColSortIndex(e,null));const c=l.filter(e=>!(r&&e.getColDef().showRowGroup||e===a));(a.getSort()?[...c,a]:c).forEach((e,t)=>this.setColSortIndex(e,t))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const e=this.beans.colModel.getAllCols().filter(e=>!!e.getSort());return e&&e.length>0}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventSvc.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.beans.colModel.getAllCols().forEach(n=>{e.includes(n)||(n.getSort()&&i.push(n),this.setColSort(n,void 0,t))}),i}getNextSortDirection(e){const i=e.getColDef().sortingOrder??this.gos.get("sortingOrder")??t.DEFAULT_SORTING_ORDER,n=i.indexOf(e.getSort()),o=n<0,r=n==i.length-1;return o||r?i[0]:i[n+1]}getIndexedSortMap(){const{gos:e,colModel:t,showRowGroupCols:i,rowGroupColsSvc:n}=this.beans;let r=t.getAllCols().filter(e=>!!e.getSort());if(t.isPivotMode()){const t=(0,o._isColumnsSortingCoupledToGroup)(e);r=r.filter(e=>{const n=!!e.getAggFunc(),o=!e.isPrimary(),r=t?i?.getShowRowGroupCol(e.getId()):e.getColDef().showRowGroup;return n||o||r})}const s=n?.columns.filter(e=>!!e.getSort())??[],a={};r.forEach((e,t)=>a[e.getId()]=t),r.sort((e,t)=>{const i=e.getSortIndex(),n=t.getSortIndex();return null!=i&&null!=n?i-n:null==i&&null==n?a[e.getId()]>a[t.getId()]?1:-1:null==n?-1:1});const l=(0,o._isColumnsSortingCoupledToGroup)(e)&&!!s.length;l&&(r=[...new Set(r.map(e=>i?.getShowRowGroupCol(e.getId())??e))]);const c=new Map;return r.forEach((e,t)=>c.set(e,t)),l&&s.forEach(e=>{const t=i.getShowRowGroupCol(e.getId());c.set(e,c.get(t))}),c}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[i,n])=>t-n).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=(0,o._isColumnsSortingCoupledToGroup)(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){const t=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();const i=null!=e.getColDef().field||e.getColDef().valueGetter?[e,...t]:t,n=i[0].getSort();return i.every(e=>e.getSort()==n)?n:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t,i){let n=0;e.addManagedListeners(t,{movingChanged:()=>{n=(new Date).getTime()}}),i&&e.addManagedElementListeners(i,{click:e=>{const i=t.isMoving(),o=(new Date).getTime();i||o-n<50||this.progressSortFromEvent(t,e)}});const o=()=>{const i=t.getSort();if(e.addOrRemoveCssClass("ag-header-cell-sorted-asc","asc"===i),e.addOrRemoveCssClass("ag-header-cell-sorted-desc","desc"===i),e.addOrRemoveCssClass("ag-header-cell-sorted-none",!i),t.getColDef().showRowGroup){const i=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(t),n=i?.every(e=>t.getSort()==e.getSort()),o=!n;e.addOrRemoveCssClass("ag-header-cell-sorted-mixed",o)}};e.addManagedEventListeners({sortChanged:o,columnRowGroupChanged:o})}initCol(e){const{sort:t,initialSort:i,sortIndex:n,initialSortIndex:o}=e.colDef;void 0!==t?"asc"!==t&&"desc"!==t||(e.sort=t):"asc"!==i&&"desc"!==i||(e.sort=i),void 0!==n?null!==n&&(e.sortIndex=n):null!==o&&(e.sortIndex=o)}updateColSort(e,t,i){void 0!==t&&("desc"===t||"asc"===t?this.setColSort(e,t,i):this.setColSort(e,void 0,i))}setColSort(e,t,i){e.sort!==t&&(e.sort=t,e.dispatchColEvent("sortChanged",i)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new r.SortIndicatorComp(e)}getSortIndicatorSelector(){return r.SortIndicatorSelector}}t.SortService=s},2760:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellCustomStyleFeature=void 0;const n=i(8731),o=i(7274),r=i(8729);class s extends n.BeanStub{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const{column:e,cellComp:t}=this,i=e.colDef,n=i.cellClassRules,o=this.getCellClassParams(e,i);(0,r.processClassRules)(this.beans.expressionSvc,n===this.cellClassRules?void 0:this.cellClassRules,n,o,e=>t.addOrRemoveCssClass(e,!0),e=>t.addOrRemoveCssClass(e,!1)),this.cellClassRules=n}applyUserStyles(){const e=this.column,t=e.colDef,i=t.cellStyle;if(!i)return;let n;n="function"==typeof i?i(this.getCellClassParams(e,t)):i,n&&this.cellComp.setUserStyles(n)}applyClassesFromColDef(){const{column:e,cellComp:t}=this,i=e.colDef,n=this.getCellClassParams(e,i);this.staticClasses.forEach(e=>t.addOrRemoveCssClass(e,!1));const o=this.beans.cellStyles.getStaticCellClasses(i,n);this.staticClasses=o,o.forEach(e=>t.addOrRemoveCssClass(e,!0))}getCellClassParams(e,t){const{value:i,rowNode:n}=this.cellCtrl;return(0,o._addGridCommonParams)(this.beans.gos,{value:i,data:n.data,node:n,colDef:t,column:e,rowIndex:n.rowIndex})}}t.CellCustomStyleFeature=s},9330:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellStyleService=void 0;const n=i(8731),o=i(2760),r=i(8729);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,i,n){(0,r.processClassRules)(this.beans.expressionSvc,void 0,e.cellClassRules,t,i,n),this.processStaticCellClasses(e,t,i)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let n;return n="function"==typeof i?i(t):i,"string"==typeof n&&(n=[n]),n||[]}createCellCustomStyleFeature(e,t){return new o.CellCustomStyleFeature(e,t)}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(e=>{i(e)})}}t.CellStyleService=s},9360:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutFeature=t.LayoutCssClasses=void 0;const n=i(8731);t.LayoutCssClasses={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"};class o extends n.BeanStub{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),i={autoHeight:"autoHeight"===e,normal:"normal"===e,print:"print"===e},n=i.autoHeight?t.LayoutCssClasses.AUTO_HEIGHT:i.print?t.LayoutCssClasses.PRINT:t.LayoutCssClasses.NORMAL;this.view.updateLayoutClasses(n,i)}}t.LayoutFeature=o},7648:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowStyleService=t.calculateRowLevel=void 0;const n=i(8731),o=i(7274),r=i(8729);t.calculateRowLevel=function(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0};class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){const i=this.gos,n=t=>{"string"==typeof t?e.push(t):Array.isArray(t)&&t.forEach(t=>e.push(t))},o=i.get("rowClass");o&&n(o);const r=i.getCallback("getRowClass");r&&n(r({data:t.data,node:t,rowIndex:t.rowIndex}))}preProcessRowClassRules(e,t){this.processRowClassRules(t,t=>{e.push(t)},()=>{})}processRowClassRules(e,t,i){const{gos:n,expressionSvc:s}=this.beans,a=(0,o._addGridCommonParams)(n,{data:e.data,node:e,rowIndex:e.rowIndex});(0,r.processClassRules)(s,void 0,n.get("rowClassRules"),a,t,i)}processStylesFromGridOptions(e){const t=this.gos,i=t.get("rowStyle"),n=t.getCallback("getRowStyle");let o;if(n&&(o=n({data:e.data,node:e,rowIndex:e.rowIndex})),o||i)return Object.assign({},i,o)}}t.RowStyleService=s},8594:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowStyleModule=t.CellStyleModule=void 0;const n=i(7205),o=i(9330),r=i(7648);t.CellStyleModule={moduleName:"CellStyle",version:n.VERSION,beans:[o.CellStyleService]},t.RowStyleModule={moduleName:"RowStyle",version:n.VERSION,beans:[r.RowStyleService]}},8729:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.processClassRules=void 0,t.processClassRules=function(e,t,i,n,o,r){if(null==i&&null==t)return;const s={},a={},l=(e,t)=>{e.split(" ").forEach(e=>{""!=e.trim()&&t(e)})};if(i){const t=Object.keys(i);for(let o=0;o<t.length;o++){const r=t[o],c=i[r];let d;"string"==typeof c?d=!e||e.evaluate(c,n):"function"==typeof c&&(d=c(n)),l(r,e=>{d?s[e]=!0:a[e]=!0})}}t&&r&&Object.keys(t).forEach(e=>l(e,e=>{s[e]||(a[e]=!0)})),r&&Object.keys(a).forEach(r),Object.keys(s).forEach(o)}},7711:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SyncService=void 0;const n=i(3146),o=i(8731),r=i(2043);class s extends o.BeanStub{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){const{colModel:t,rowModel:i}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),i.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),(0,r._logIfDebug)(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t)return this.waitingForColumns?(this.waitingForColumns=!1,void this.setColumnsAndData(t)):void this.beans.colModel.setColumnDefs(t,(0,n._convertColumnEventSourceType)(e.source))}}t.SyncService=s},6607:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PartImpl=t.defaultModeName=t.createPart=void 0;const n=i(8951);t.createPart=e=>new r(e),t.defaultModeName="$default";let o=0;class r{constructor({feature:e,params:i,modeParams:n={},css:o,cssImports:r}){this.feature=e,this.css=o,this.cssImports=r,this.modeParams={[t.defaultModeName]:{...n[t.defaultModeName]??{},...i??{}},...n}}use(e,t){let i=this._inject;if(null==i){let{css:e}=this;if(e){const t=`ag-theme-${this.feature??"part"}-${++o}`;"function"==typeof e&&(e=e()),e=`:where(.${t}) {\n${e}\n}\n`;for(const t of this.cssImports??[])e=`@import url(${JSON.stringify(t)});\n${e}`;i={css:e,class:t}}else i=!1;this._inject=i}return i&&e&&(0,n._injectGlobalCSS)(i.css,e,i.class,t,1),!!i&&i.class}}t.PartImpl=r},9621:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeImpl=t.createTheme=t._asThemeImpl=t.FORCE_LEGACY_THEMES=void 0;const n=i(7764),o=i(6607),r=i(405),s=i(8951),a=i(2475),l=i(1697),c=i(113),d=i(7845);t.FORCE_LEGACY_THEMES=!1,t._asThemeImpl=e=>{if(!(e instanceof u))throw new Error("theme is not an object created by createTheme");return e},t.createTheme=()=>(new u).withPart(a.buttonStyleQuartz).withPart(l.columnDropStyleBordered);class u{constructor(e=[]){this.parts=e}withPart(e){return"function"==typeof e&&(e=e()),e instanceof o.PartImpl?new u([...this.parts,e]):((0,n._logPreInitErr)(259,{part:e},"Invalid part"),this)}withoutPart(e){return this.withPart((0,o.createPart)({feature:e}))}withParams(e,t=o.defaultModeName){return this.withPart((0,o.createPart)({modeParams:{[t]:e}}))}_startUse({styleContainer:e,cssLayer:i,loadThemeGoogleFonts:n}){if(s.IS_SSR)return;if(t.FORCE_LEGACY_THEMES)return;f(),(0,s._injectCoreAndModuleCSS)(e,i);const o=p(this);if(o.length>0)for(const e of o)n&&v(e);for(const t of this.parts)t.use(e,i)}_getCssClass(){return t.FORCE_LEGACY_THEMES?"ag-theme-quartz":this._cssClassCache??(this._cssClassCache=h(this.parts).map(e=>e.use(void 0,void 0)).filter(Boolean).join(" "))}_getModeParams(){let e=this._paramsCache;if(!e){const t={[o.defaultModeName]:{...r.coreDefaults}};for(const e of h(this.parts))for(const i of Object.keys(e.modeParams)){const n=e.modeParams[i];if(n){const e=t[i]??(t[i]={}),r=new Set;for(const t of Object.keys(n)){const i=n[t];void 0!==i&&(e[t]=i,r.add(t))}if(i===o.defaultModeName)for(const e of Object.keys(t)){const i=t[e];if(e!==o.defaultModeName)for(const e of r)delete i[e]}}}this._paramsCache=e=t}return e}_getPerGridCss(e){const t="##SELECTOR##";let i=this._paramsCssCache;if(!i){let e="",r="";const s=this._getModeParams();for(const t of Object.keys(s)){const i=s[t];if(t!==o.defaultModeName){const i=`:where([data-ag-theme-mode="${"object"==typeof CSS?CSS.escape(t):t}"]) & {\n`;e+=i,r+=i}for(const t of Object.keys(i).sort()){const o=i[t],s=(0,c.paramValueToCss)(t,o);if(!1===s)(0,n._error)(107,{key:t,value:o});else{const i=(0,d.paramToVariableName)(t),n=i.replace("--ag-","--ag-inherited-");e+=`\t${i}: var(${n}, ${s});\n`,r+=`\t${n}: var(${i});\n`}}t!==o.defaultModeName&&(e+="}\n",r+="}\n")}let a=`${t} {\n${e}}\n`;a+=`:has(> ${t}):not(${t}) {\n${r}}\n`,this._paramsCssCache=i=a}return i.replaceAll(t,`:where(.${e})`)}}t.ThemeImpl=u;const h=e=>{const t=new Map;for(const i of e)t.set(i.feature,i);const i=[];for(const n of e)n.feature&&t.get(n.feature)!==n||i.push(n);return i},p=e=>{const t=new Set,i=e=>{if(Array.isArray(e))e.forEach(i);else{const i=e?.googleFont;"string"==typeof i&&t.add(i)}};return Object.values(e._getModeParams()).flatMap(e=>Object.values(e)).forEach(i),Array.from(t).sort()};let g=!1;const f=()=>{if(!g){g=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},m=new Set,v=async e=>{m.add(e);const t=`@import url('https://${b}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');\n`;(0,s._injectGlobalCSS)(t,document.head,`googleFont:${e}`,void 0,0)},b="fonts.googleapis.com"},405:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.coreDefaults=t.defaultLightColorSchemeParams=t.coreCSS=void 0;const n=i(7845);var o=i(9550);Object.defineProperty(t,"coreCSS",{enumerable:!0,get:function(){return o.coreCSS}}),t.defaultLightColorSchemeParams={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:(0,n.foregroundMix)(.15),chromeBackgroundColor:(0,n.foregroundBackgroundMix)(.02),browserColorScheme:"light"},t.coreDefaults={...t.defaultLightColorSchemeParams,textColor:n.foregroundColor,accentColor:"#2196f3",invalidColor:"#e02525",wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:n.backgroundColor,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},subtleTextColor:{ref:"textColor",mix:.5},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:n.accentColor,rangeSelectionBackgroundColor:(0,n.accentMix)(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:(0,n.accentMix)(.5),rangeHeaderHighlightColor:(0,n.foregroundHeaderBackgroundMix)(.08),rowNumbersSelectedColor:(0,n.accentMix)(.5),rowHoverColor:(0,n.accentMix)(.08),columnHoverColor:(0,n.accentMix)(.05),selectedRowBackgroundColor:(0,n.accentMix)(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},oddRowBackgroundColor:n.backgroundColor,borderRadius:4,wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",spacing:8,fontSize:14,rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},dragAndDropImageBackgroundColor:n.backgroundColor,dragAndDropImageBorder:!0,dragAndDropImageShadow:{ref:"popupShadow"},dragHandleColor:(0,n.foregroundMix)(.7),focusShadow:{spread:3,color:(0,n.accentMix)(.5)},headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},iconSize:16,iconColor:"inherit",iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:(0,n.foregroundMix)(.1),iconButtonActiveColor:n.accentColor,iconButtonActiveBackgroundColor:(0,n.accentMix)(.28),iconButtonActiveIndicatorColor:n.accentColor,toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:n.accentColor,toggleButtonOffBackgroundColor:(0,n.foregroundBackgroundMix)(.3),toggleButtonSwitchBackgroundColor:n.backgroundColor,toggleButtonSwitchInset:2,menuBorder:{color:(0,n.foregroundMix)(.2)},menuBackgroundColor:(0,n.foregroundBackgroundMix)(.03),menuTextColor:(0,n.foregroundBackgroundMix)(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:(0,n.foregroundMix)(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:n.accentColor},cellEditingShadow:{ref:"cardShadow"},dialogBorder:{color:(0,n.foregroundMix)(.2)},panelBackgroundColor:n.backgroundColor,panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipTextColor:{ref:"textColor"},tooltipBorder:!0,columnDropCellBackgroundColor:(0,n.foregroundMix)(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:(0,n.foregroundMix)(.13)},selectCellBackgroundColor:(0,n.foregroundMix)(.07),selectCellBorder:{color:(0,n.foregroundMix)(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:(0,n.foregroundMix)(.15),statusBarLabelColor:n.foregroundColor,statusBarLabelFontWeight:500,statusBarValueColor:n.foregroundColor,statusBarValueFontWeight:500}},9550:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.coreCSS=void 0,t.coreCSS=':where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none}}:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value,.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom,.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}.ag-floating-bottom{border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-large-text-input{display:block}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row-hover.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{opacity:1}50%{opacity:.4}to{opacity:1}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-chart,.ag-dnd-ghost,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab}.ag-list-item,.ag-virtual-list-item{height:var(--ag-list-item-height)}.ag-virtual-list-item{position:absolute;width:100%}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-list-item{align-items:center;display:flex;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly,.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-column-select-column-readonly{&.ag-icon-grip,.ag-icon-grip{opacity:.35}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-accent-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto}.ag-menu,.ag-resizer{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-resizer{pointer-events:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}'},8951:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._unregisterGridUsingThemingAPI=t._registerGridUsingThemingAPI=t._injectCoreAndModuleCSS=t._injectGlobalCSS=t.IS_SSR=void 0;const n=i(2132),o=i(9621),r=i(9550);t.IS_SSR="object"!=typeof window||!window?.document?.fonts?.forEach;let s=new WeakMap;t._injectGlobalCSS=(e,i,n,r,a)=>{if(t.IS_SSR)return;if(o.FORCE_LEGACY_THEMES)return;r&&(e=`@layer ${CSS.escape(r)} { ${e} }`);let l=s.get(i);if(l||(l=[],s.set(i,l)),l.find(t=>t.css===e))return;const c=document.createElement("style");c.dataset.agGlobalCss=n,c.textContent=e;const d={css:e,el:c,priority:a};let u;for(const e of l){if(e.priority>a)break;u=e}if(u){u.el.insertAdjacentElement("afterend",c);const e=l.indexOf(u);l.splice(e+1,0,d)}else i.insertBefore(c,i.querySelector(":not(title, meta)")),l.push(d)},t._injectCoreAndModuleCSS=(e,i)=>{(0,t._injectGlobalCSS)(r.coreCSS,e,"core",i,0),Array.from((0,n._getAllRegisteredModules)()).sort((e,t)=>e.moduleName.localeCompare(t.moduleName)).forEach(n=>n.css?.forEach(o=>(0,t._injectGlobalCSS)(o,e,`module-${n.moduleName}`,i,0)))};const a=new Set;t._registerGridUsingThemingAPI=e=>{a.add(e)},t._unregisterGridUsingThemingAPI=e=>{if(a.delete(e),0===a.size){s=new WeakMap;for(const e of document.head.querySelectorAll("style[data-ag-global-css]"))e.remove()}}},7753:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.buttonStyleBaseCSS=void 0,t.buttonStyleBaseCSS=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}"},2475:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.buttonStyleBalham=t.buttonStyleAlpine=t.buttonStyleQuartz=t.buttonStyleBase=void 0;const n=i(6607),o=i(7845),r=i(7753),s={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}};t.buttonStyleBase=(0,n.createPart)({feature:"buttonStyle",params:s,css:r.buttonStyleBaseCSS}),t.buttonStyleQuartz=(0,n.createPart)({feature:"buttonStyle",params:{...s,buttonBackgroundColor:o.backgroundColor,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:o.accentColor}},css:r.buttonStyleBaseCSS}),t.buttonStyleAlpine=(0,n.createPart)({feature:"buttonStyle",params:{...s,buttonBackgroundColor:o.backgroundColor,buttonBorder:{color:o.accentColor},buttonFontWeight:600,buttonTextColor:o.accentColor,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBackgroundColor:o.accentColor,buttonActiveTextColor:o.backgroundColor},css:r.buttonStyleBaseCSS}),t.buttonStyleBalham=(0,n.createPart)({feature:"buttonStyle",params:{...s,buttonBorder:{color:o.foregroundColor,width:2,style:"outset"},buttonActiveBorder:{color:o.foregroundColor,width:2,style:"inset"},buttonBackgroundColor:(0,o.foregroundBackgroundMix)(.07),buttonHoverBackgroundColor:o.backgroundColor,buttonVerticalPadding:{calc:"spacing * 0.5"}},css:r.buttonStyleBaseCSS})},3071:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkboxStyleDefaultCSS=void 0,t.checkboxStyleDefaultCSS='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}'},8265:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.checkboxStyleDefault=void 0;const n=i(6607),o=i(7845),r=i(3071);t.checkboxStyleDefault=(0,n.createPart)({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:o.backgroundColor,checkboxUncheckedBorderColor:(0,o.foregroundBackgroundMix)(.3),checkboxCheckedBackgroundColor:o.accentColor,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:o.backgroundColor,checkboxIndeterminateBackgroundColor:(0,o.foregroundBackgroundMix)(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:o.backgroundColor,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:r.checkboxStyleDefaultCSS})},8689:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.colorSchemeVariable=t.colorSchemeDarkBlue=t.colorSchemeDarkWarm=t.colorSchemeDark=t.colorSchemeLightCold=t.colorSchemeLightWarm=t.colorSchemeLight=void 0;const n=i(6607),o=i(405),r=i(7845);t.colorSchemeLight=(0,n.createPart)({feature:"colorScheme",params:o.defaultLightColorSchemeParams}),t.colorSchemeLightWarm=(0,n.createPart)({feature:"colorScheme",params:{...o.defaultLightColorSchemeParams,foregroundColor:"#000000de",borderColor:"#60300026",chromeBackgroundColor:"#60300005"}}),t.colorSchemeLightCold=(0,n.createPart)({feature:"colorScheme",params:{...o.defaultLightColorSchemeParams,foregroundColor:"#000",chromeBackgroundColor:"#f3f8f8"}});const s=()=>({...o.defaultLightColorSchemeParams,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:(0,r.foregroundBackgroundMix)(.05),rowHoverColor:(0,r.accentMix)(.15),selectedRowBackgroundColor:(0,r.accentMix)(.2),menuBackgroundColor:(0,r.foregroundBackgroundMix)(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",checkboxUncheckedBorderColor:(0,r.foregroundBackgroundMix)(.4),toggleButtonOffBackgroundColor:(0,r.foregroundBackgroundMix)(.4)});t.colorSchemeDark=(0,n.createPart)({feature:"colorScheme",params:s()});const a=()=>({...s(),backgroundColor:"#1f2836"});t.colorSchemeDarkWarm=(0,n.createPart)({feature:"colorScheme",params:{backgroundColor:"hsl(29, 10%, 17%)",foregroundColor:"#FFF",browserColorScheme:"dark"}}),t.colorSchemeDarkBlue=(0,n.createPart)({feature:"colorScheme",params:a()}),t.colorSchemeVariable=(0,n.createPart)({feature:"colorScheme",params:o.defaultLightColorSchemeParams,modeParams:{light:o.defaultLightColorSchemeParams,dark:s(),"dark-blue":a()}})},7941:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.columnDropStyleBorderedCSS=void 0,t.columnDropStyleBorderedCSS=".ag-column-drop-vertical-empty-message{align-items:center;border:1px dashed;border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}"},5350:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.columnDropStylePlainCSS=void 0,t.columnDropStylePlainCSS=".ag-column-drop-vertical-empty-message{color:var(--ag-subtle-text-color);font-size:calc(var(--ag-font-size) - 1px);font-weight:600;padding-top:var(--ag-spacing)}:where(.ag-ltr) .ag-column-drop-vertical-empty-message{padding-left:calc(var(--ag-icon-size) + var(--ag-spacing) + var(--ag-widget-horizontal-spacing));padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-column-drop-vertical-empty-message{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-icon-size) + var(--ag-spacing) + var(--ag-widget-horizontal-spacing))}"},1697:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.columnDropStylePlain=t.columnDropStyleBordered=void 0;const n=i(6607),o=i(7941),r=i(5350);t.columnDropStyleBordered=(0,n.createPart)({feature:"columnDropStyle",css:o.columnDropStyleBorderedCSS}),t.columnDropStylePlain=(0,n.createPart)({feature:"columnDropStyle",css:r.columnDropStylePlainCSS})},8897:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.iconSetAlpineCSS=void 0,t.iconSetAlpineCSS=".ag-icon-aggregation:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24 6H8v2l8 8-8 8v2h16v-2H11l8-8-8-8h13z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-arrows:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.515 11.171 2.687 16l4.828 4.829-1.414 1.414L-.142 16l6.243-6.243zm16.97 0 1.414-1.414L32.142 16l-6.243 6.243-1.414-1.414L29.313 16zM16.028 13.2l2.829 2.828-2.829 2.829-2.828-2.829zm-4.857 11.285L16 29.313l4.829-4.828 1.414 1.414L16 32.142l-6.243-6.243zm0-16.97L9.757 6.101 16-.142l6.243 6.243-1.414 1.414L16 2.687z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-asc:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333 5.332 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-cancel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16 2.667A13.32 13.32 0 0 0 2.667 16c0 7.373 5.96 13.333 13.333 13.333S29.333 23.373 29.333 16 23.373 2.667 16 2.667m6.667 18.12-1.88 1.88L16 17.88l-4.787 4.787-1.88-1.88L14.12 16l-4.787-4.787 1.88-1.88L16 14.12l4.787-4.787 1.88 1.88L17.88 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-chart:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Echart%3C/title%3E%3Cg fill='%23000' fill-rule='nonzero'%3E%3Cpath d='M14 7h4v18h-4zM8 17h4v8H8zM20 13h4v12h-4z'/%3E%3C/g%3E%3C/svg%3E\")}.ag-icon-color-picker:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M23.907 17.587 10.574 4.254l-1.88 1.88 3.173 3.173-8.28 8.28 10.16 10.16zm-16.547 0 6.387-6.387 6.387 6.387zm18.387 2s-2.667 2.893-2.667 4.667c0 1.467 1.2 2.667 2.667 2.667s2.667-1.2 2.667-2.667c0-1.773-2.667-4.667-2.667-4.667' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-columns:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M26 25H6V7h20zM12 11H8v12h4zm6 0h-4v12h4zm6 12V11h-4v12z' style='fill-rule:nonzero' transform='translate(0 -1)'/%3E%3C/svg%3E\")}.ag-icon-contracted:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m12 6 10 10-10 10-2-2 8-8-8-8z'/%3E%3C/svg%3E\")}.ag-icon-copy:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M22 1.333H6A2.675 2.675 0 0 0 3.333 4v18.667H6V4h16zm4 5.334H11.333a2.675 2.675 0 0 0-2.667 2.667v18.667c0 1.467 1.2 2.667 2.667 2.667H26c1.467 0 2.667-1.2 2.667-2.667V9.334c0-1.467-1.2-2.667-2.667-2.667M26 28H11.333V9.333H26z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-cross:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M15.984 13.894 27.05 2.828l2.122 2.122-11.066 11.066 11.066 11.066-2.122 2.12-11.066-11.066L4.918 29.202l-2.12-2.12 11.066-11.066L2.798 4.95l2.12-2.122z'/%3E%3C/svg%3E\")}.ag-icon-csv:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='M.688-.226a.2.2 0 0 1-.017.074.28.28 0 0 1-.145.14.412.412 0 0 1-.234.013.28.28 0 0 1-.202-.168.468.468 0 0 1-.04-.19q0-.086.025-.155a.319.319 0 0 1 .182-.191.4.4 0 0 1 .134-.025q.087 0 .155.035a.3.3 0 0 1 .104.085.17.17 0 0 1 .036.097.06.06 0 0 1-.018.044.06.06 0 0 1-.042.019.06.06 0 0 1-.042-.013.2.2 0 0 1-.031-.046.2.2 0 0 0-.066-.079.16.16 0 0 0-.095-.027.17.17 0 0 0-.142.068.3.3 0 0 0-.053.193.4.4 0 0 0 .023.139.2.2 0 0 0 .067.083.2.2 0 0 0 .1.027q.063 0 .106-.031a.2.2 0 0 0 .065-.091.2.2 0 0 1 .023-.046q.014-.018.044-.018a.06.06 0 0 1 .044.018.06.06 0 0 1 .019.045' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 7.122 25.977)'/%3E%3Cpath d='M.622-.215a.2.2 0 0 1-.033.117.23.23 0 0 1-.098.081.4.4 0 0 1-.153.029.34.34 0 0 1-.175-.04.23.23 0 0 1-.079-.077.17.17 0 0 1-.031-.093q0-.027.019-.045a.06.06 0 0 1 .046-.019.06.06 0 0 1 .039.014.1.1 0 0 1 .027.044.3.3 0 0 0 .03.057q.015.023.044.038.03.015.076.015.065 0 .105-.03a.09.09 0 0 0 .04-.075.08.08 0 0 0-.022-.058.14.14 0 0 0-.056-.034 1 1 0 0 0-.092-.025.7.7 0 0 1-.129-.042.2.2 0 0 1-.083-.066.17.17 0 0 1-.03-.104q0-.058.032-.105a.2.2 0 0 1 .093-.07.4.4 0 0 1 .144-.025q.066 0 .114.016a.3.3 0 0 1 .08.044.2.2 0 0 1 .046.057q.015.03.015.058a.07.07 0 0 1-.018.046.06.06 0 0 1-.046.021q-.025 0-.038-.012a.2.2 0 0 1-.028-.041.2.2 0 0 0-.047-.063Q.387-.625.326-.625a.15.15 0 0 0-.09.025q-.035.024-.035.059 0 .021.012.037a.1.1 0 0 0 .032.027.4.4 0 0 0 .111.036q.06.015.11.031.048.018.083.042a.2.2 0 0 1 .054.062.2.2 0 0 1 .019.091' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 13.339 25.977)'/%3E%3Cpath d='m.184-.633.162.48.163-.483q.013-.038.019-.053a.062.062 0 0 1 .061-.039q.018 0 .034.009a.1.1 0 0 1 .025.025q.009.015.009.031L.654-.64l-.007.025-.009.024-.173.468-.019.051a.2.2 0 0 1-.021.042.1.1 0 0 1-.033.03.1.1 0 0 1-.049.012.1.1 0 0 1-.05-.011A.1.1 0 0 1 .26-.03a.2.2 0 0 1-.021-.042L.22-.123.05-.587.041-.612.033-.638.03-.662q0-.025.02-.046a.07.07 0 0 1 .05-.02q.037 0 .053.023.015.023.031.072' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 18.94 25.977)'/%3E%3C/svg%3E\")}.ag-icon-cut:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M13.775 15.198 3.835 2.945a1.501 1.501 0 0 1 2.33-1.89l14.997 18.488A6.003 6.003 0 0 1 29.657 25c0 3.311-2.688 6-6 6s-6-2.689-6-6c0-1.335.437-2.569 1.176-3.566l-3.127-3.855-3.001 3.7A5.97 5.97 0 0 1 14 25c0 3.311-2.689 6-6 6s-6-2.689-6-6a6.003 6.003 0 0 1 8.315-5.536zm9.882 6.702a3.1 3.1 0 0 0-3.1 3.1c0 1.711 1.389 3.1 3.1 3.1s3.1-1.389 3.1-3.1-1.389-3.1-3.1-3.1M8 21.95a3.05 3.05 0 1 0 .001 6.101A3.05 3.05 0 0 0 8 21.95m9.63-11.505 1.932 2.381 8.015-9.881a1.5 1.5 0 0 0-2.329-1.89z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-desc:before,.ag-icon-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m26.667 16-1.88-1.88-7.453 7.44V5.333h-2.667V21.56l-7.44-7.453L5.334 16l10.667 10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-excel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='m.052-.139.16-.234-.135-.208a.4.4 0 0 1-.028-.052.1.1 0 0 1-.01-.042.05.05 0 0 1 .018-.037.07.07 0 0 1 .045-.016q.03 0 .047.018a1 1 0 0 1 .047.066l.107.174.115-.174.024-.038.019-.026.021-.015a.1.1 0 0 1 .027-.005.06.06 0 0 1 .044.016.05.05 0 0 1 .018.039q0 .033-.038.089l-.141.211.152.234a.3.3 0 0 1 .03.051.1.1 0 0 1 .009.038.1.1 0 0 1-.008.031.1.1 0 0 1-.024.023.1.1 0 0 1-.034.008.1.1 0 0 1-.035-.008.1.1 0 0 1-.023-.022L.427-.067.301-.265l-.134.204-.022.034-.016.019a.1.1 0 0 1-.022.015.1.1 0 0 1-.03.005.06.06 0 0 1-.044-.016.06.06 0 0 1-.017-.047q0-.036.036-.088' style='fill-rule:nonzero' transform='matrix(17.82892 0 0 16.50777 10.371 25.928)'/%3E%3C/svg%3E\")}.ag-icon-expanded:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M20 26 10 16 20 6l2 2-8 8 8 8z'/%3E%3C/svg%3E\")}.ag-icon-eye-slash:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye-slash%3C/title%3E%3Cpath fill='%23000' fill-rule='nonzero' d='M8.95 10.364 7 8.414 8.414 7l2.32 2.32A13.2 13.2 0 0 1 16.5 8c5.608 0 10.542 3.515 12.381 8.667L29 17l-.119.333a13 13 0 0 1-4.255 5.879l1.466 1.466-1.414 1.414-1.754-1.753A13.2 13.2 0 0 1 16.5 26c-5.608 0-10.542-3.515-12.381-8.667L4 17l.119-.333a13 13 0 0 1 4.83-6.303m1.445 1.445A11.02 11.02 0 0 0 6.148 17c1.646 4.177 5.728 7 10.352 7 1.76 0 3.441-.409 4.94-1.146l-1.878-1.878A5.06 5.06 0 0 1 16.5 22c-2.789 0-5.05-2.239-5.05-5 0-1.158.398-2.223 1.065-3.07zm1.855-.974 1.794 1.795A5.07 5.07 0 0 1 16.5 12c2.789 0 5.05 2.239 5.05 5 0 .9-.24 1.745-.661 2.474l2.305 2.306A11 11 0 0 0 26.852 17c-1.646-4.177-5.728-7-10.352-7-1.495 0-2.933.295-4.25.835'/%3E%3C/svg%3E\")}.ag-icon-eye:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16.5 23c4.624 0 8.706-2.823 10.352-7-1.646-4.177-5.728-7-10.352-7s-8.706 2.823-10.352 7c1.646 4.177 5.728 7 10.352 7M4.119 15.667C5.958 10.515 10.892 7 16.5 7s10.542 3.515 12.381 8.667L29 16l-.119.333C27.042 21.485 22.108 25 16.5 25S5.958 21.485 4.119 16.333L4 16zM16.5 21c2.789 0 5.049-2.239 5.049-5s-2.26-5-5.049-5-5.049 2.239-5.049 5 2.26 5 5.049 5' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-filter:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m28 8-8 8v5l-6 6V16L6 8V6h22zM9 8l7 7v7l2-2v-5l7-7z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-first:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24.273 22.12 18.153 16l6.12-6.12L22.393 8l-8 8 8 8zM7.727 8h2.667v16H7.727z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-group:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M14 7v1H9V7zm0-3v1H5.001V4zm-7 7H5v-1h2zm0-3H5V7h2zM3 5H1V4h2zm11 5v1H9v-1zm-7 4H5v-1h2zm7-1v1H9v-1z' style='fill-rule:nonzero' transform='matrix(2 0 0 2 0 -2)'/%3E%3C/svg%3E\")}.ag-icon-last:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m7.727 9.88 6.12 6.12-6.12 6.12L9.607 24l8-8-8-8zM21.607 8h2.667v16h-2.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M26.667 14.667H10.44l7.453-7.453L16 5.334 5.333 16.001 16 26.668l1.88-1.88-7.44-7.453h16.227z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-linked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M5.2 16a4.136 4.136 0 0 1 4.133-4.133h5.333V9.334H9.333a6.67 6.67 0 0 0-6.667 6.667 6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.333A4.136 4.136 0 0 1 5.2 16.002zm5.467 1.333h10.667v-2.667H10.667zm12-8h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133 4.136 4.136 0 0 1-4.133 4.133h-5.333v2.533h5.333a6.67 6.67 0 0 0 6.667-6.667 6.67 6.67 0 0 0-6.667-6.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-loading:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M17 29h-2v-8h2zm-3.586-9L7 26.414 5.586 25 12 18.586zm13 5L25 26.414 18.586 20 20 18.586zM29 17h-8v-2h8zm-18 0H3v-2h8zm2.414-5L12 13.414 5.586 7 7 5.586zm13-5L20 13.414 18.586 12 25 5.586zM17 11h-2V3h2z' style='fill-rule:nonzero' transform='translate(-3.692 -3.692)scale(1.23077)'/%3E%3C/svg%3E\")}.ag-icon-maximize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M14 30H2V18h2.828v7.05l8.254-8.252 2.12 2.12-8.252 8.254H14zm4-28h12v12h-2.828V6.95l-8.254 8.252-2.12-2.12 8.252-8.254H18z'/%3E%3C/svg%3E\")}.ag-icon-menu:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M20 13H0v-2h20zm0-6H0V5h20zm0-6H0v-2h20z' style='fill-rule:nonzero' transform='translate(6 9)'/%3E%3C/svg%3E\")}.ag-icon-menu-alt:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M16 19a3 3 0 1 0 0-6 3 3 0 0 0 0 6M16 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6M16 27a3 3 0 1 0 0-6 3 3 0 0 0 0 6'/%3E%3C/svg%3E\")}.ag-icon-minimize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M2 18h12v12h-2.828v-7.05l-8.254 8.252-2.12-2.12 8.252-8.254H2zm28-4H18V2h2.828v7.05L29.082.798l2.12 2.12-8.252 8.254H30z'/%3E%3C/svg%3E\")}.ag-icon-minus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658H7.901v-2.658z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-next:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M10.94 6 9.06 7.88 17.167 16 9.06 24.12 10.94 26l10-10z' style='fill-rule:nonzero' transform='translate(1)'/%3E%3C/svg%3E\")}.ag-icon-none:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enone%3C/title%3E%3Cg fill='%23000' fill-rule='nonzero'%3E%3Cpath d='M23.708 14.645 16 6.939l-7.708 7.706 1.416 1.416L16 9.767l6.292 6.294zM23.708 20.355 16 28.061l-7.708-7.706 1.416-1.416L16 25.233l6.292-6.294z'/%3E%3C/g%3E%3C/svg%3E\")}.ag-icon-not-allowed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16 2.667C8.64 2.667 2.667 8.64 2.667 16S8.64 29.333 16 29.333 29.333 23.36 29.333 16 23.36 2.667 16 2.667M5.333 16c0-5.893 4.773-10.667 10.667-10.667 2.467 0 4.733.84 6.533 2.253L7.586 22.533A10.54 10.54 0 0 1 5.333 16M16 26.667c-2.467 0-4.733-.84-6.533-2.253L24.414 9.467A10.54 10.54 0 0 1 26.667 16c0 5.893-4.773 10.667-10.667 10.667' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-paste:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M25.334 4H19.76C19.2 2.453 17.733 1.333 16 1.333S12.8 2.453 12.24 4H6.667A2.675 2.675 0 0 0 4 6.667V28c0 1.467 1.2 2.667 2.667 2.667h18.667c1.467 0 2.667-1.2 2.667-2.667V6.667C28.001 5.2 26.801 4 25.334 4M16 4c.733 0 1.333.6 1.333 1.333s-.6 1.333-1.333 1.333-1.333-.6-1.333-1.333S15.267 4 16 4m9.333 24H6.666V6.667h2.667v4h13.333v-4h2.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-pin:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m10.78 19.777-4.668-4.666s.032-1 .67-1.87c1.366-1.86 4.052-1.96 6.056-1.572l3.158-3.108c-.7-2.342 3.352-5.046 3.352-5.046l9.166 9.168q-.334.447-.67.894c-1.074 1.426-2.538 2.63-4.272 2.338l-3.32 3.218c.046.344.042.03.118 1.152.144 2.13-.64 4.324-2.632 5.34l-.746.364-4.798-4.798-7.292 7.294-1.416-1.416zm8.24-13.672c-.688.568-1.416 1.45-1.024 2.072l.49.722-4.986 4.988c-1.988-.506-4.346-.636-5.156.614l9.02 9.032q.14-.099.272-.21c1.226-1.08.764-3.04.498-4.9l4.79-4.79s1.47.938 2.936-.776l-6.79-6.79q-.026.019-.05.038' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-pivot:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M25.128 2.002c2.56.096 4.772 2.292 4.87 4.87a712 712 0 0 1 0 18.256c-.096 2.56-2.292 4.772-4.87 4.87a712 712 0 0 1-18.256 0c-2.558-.096-4.772-2.29-4.87-4.87a712 712 0 0 1 0-18.256c.096-2.56 2.292-4.772 4.87-4.87a712 712 0 0 1 18.256 0m2.966 7.954H9.892v18.136c5.086.13 10.18.098 15.264-.096 1.48-.094 2.746-1.35 2.84-2.84.192-5.064.226-10.134.098-15.2M3.968 24.1q.015.528.036 1.056c.094 1.484 1.354 2.746 2.84 2.84l1.012.036V24.1zM22 15.414l-.292.294-1.416-1.416L23 11.586l2.708 2.706-1.416 1.416-.292-.294v3.592c-.032 2.604-2.246 4.892-4.872 4.992L15.414 24l.294.292-1.416 1.416L11.586 23l2.706-2.708 1.416 1.416-.322.32c3.372.03 6.578-.164 6.614-3.034zM3.88 18.038c.002 1.346.012 2.694.038 4.04h3.938v-4.04zm.05-6.062a681 681 0 0 0-.044 4.042h3.97v-4.042zm5.962-7.99Q8.449 3.999 7.006 4c-1.57.02-2.946 1.348-3.004 2.922q-.02 1.517-.042 3.034h3.896v-2.02h2.036zm14.244-.016v3.966h3.898q-.017-.546-.038-1.092c-.094-1.48-1.35-2.746-2.84-2.84q-.51-.019-1.02-.034m-8.14-.054q-2.035.022-4.07.048v3.972h4.07zm6.106.008a213 213 0 0 0-4.07-.022v4.034h4.07z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-plus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658h-6.77v6.77h-2.658v-6.77h-6.77v-2.658h6.77v-6.77h2.658v6.77z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-previous:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M21.94 7.88 20.06 6l-10 10 10 10 1.88-1.88L13.833 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m16 5.333-1.88 1.88 7.44 7.453H5.333v2.667H21.56l-7.44 7.453 1.88 1.88 10.667-10.667L16 5.332z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-save:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M15.708 2.355 8 10.061.292 2.355 1.708.939 8 7.233 14.292.939z' style='fill-rule:nonzero' transform='translate(8 14)'/%3E%3Cpath d='M5 26h22v2H5zM15 4h2v18h-2z'/%3E%3C/svg%3E\")}.ag-icon-small-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.334 10.667 16 21.334l8.667-10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-small-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M21.333 7.334 10.666 16l10.667 8.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-small-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M10.667 24.666 21.334 16 10.667 7.333z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-small-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.334 21.333 16 10.666l8.667 10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-tick:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M11.586 22.96 27.718 6.828 29.84 8.95 11.586 27.202 2.4 18.016l2.12-2.122z'/%3E%3C/svg%3E\")}.ag-icon-tree-closed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m11.94 6-1.88 1.88L18.167 16l-8.107 8.12L11.94 26l10-10z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-tree-indeterminate:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6 13.5h20v3H6z'/%3E%3C/svg%3E\")}.ag-icon-tree-open:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24.12 9.06 16 17.167 7.88 9.06 6 10.94l10 10 10-10z' style='fill-rule:nonzero' transform='translate(0 1)'/%3E%3C/svg%3E\")}.ag-icon-unlinked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M22.667 9.333h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133c0 1.907-1.307 3.507-3.08 3.973l1.947 1.947c2.173-1.107 3.667-3.32 3.667-5.92a6.67 6.67 0 0 0-6.667-6.667zm-1.334 5.334h-2.92l2.667 2.667h.253zM2.667 5.693 6.814 9.84A6.65 6.65 0 0 0 2.667 16a6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.334a4.136 4.136 0 0 1-4.133-4.133c0-2.12 1.613-3.867 3.68-4.093l2.76 2.76h-.973v2.667h3.64l3.027 3.027v2.307h2.307l5.347 5.333 1.68-1.68L4.362 4.002 2.669 5.695z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333 5.332 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-grip:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M8 24H6v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zM8 18H6v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zM8 12H6V8h2zm6 0h-2V8h2zm6 0h-2V8h2zm6 0h-2V8h2z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-settings:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M30 8h-4.1c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2h14.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30zm-9 4c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3M2 24h4.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30v-2H15.9c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2zm9-4c1.7 0 3 1.3 3 3s-1.3 3-3 3-3-1.3-3-3 1.3-3 3-3'/%3E%3C/svg%3E\")}"},9580:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.iconSetAlpine=void 0;const n=i(6607),o=i(8897);t.iconSetAlpine=(0,n.createPart)({feature:"iconSet",css:o.iconSetAlpineCSS})},3817:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.iconSetBalhamCSS=void 0,t.iconSetBalhamCSS=".ag-icon-aggregation:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eaggregation%3C/title%3E%3Cpath d='M25.128 2.002c2.56.096 4.772 2.292 4.87 4.87a712 712 0 0 1 0 18.256c-.096 2.56-2.292 4.772-4.87 4.87a712 712 0 0 1-18.256 0c-2.558-.096-4.772-2.29-4.87-4.87a712 712 0 0 1 0-18.256c.096-2.56 2.292-4.772 4.87-4.87a712 712 0 0 1 18.256 0M7.006 4c-1.57.02-2.946 1.348-3.004 2.922-.078 6.078-.23 12.16.002 18.234.094 1.484 1.354 2.746 2.84 2.84 6.1.232 12.212.232 18.312 0 1.48-.094 2.746-1.35 2.84-2.84.232-6.1.232-12.212 0-18.312-.094-1.48-1.35-2.746-2.84-2.84C19.11 3.774 13.056 4 7.006 4M22 12h-2v-2h-8v.092c.056 1.352 3.426 2.598 4.472 4.404.682 1.174.438 2.754-.572 3.72C14.29 19.618 12 20.924 12 22h8v-2h2v4H10c0-1.586-.098-3.304 1.016-4.314 1.904-1.632 4.89-3.108 3.54-4.42-1.918-1.68-4.464-2.936-4.554-5.12L10 8h12z'/%3E%3C/svg%3E\")}.ag-icon-arrows:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Earrows%3C/title%3E%3Cpath d='m6.414 17 2.294 2.292-1.416 1.416L2.586 16l4.706-4.708 1.416 1.416L6.414 15H15V6.414l-2.292 2.294-1.416-1.416L16 2.586l4.708 4.706-1.416 1.416L17 6.414V15h8.586l-2.294-2.292 1.416-1.416L29.414 16l-4.706 4.708-1.416-1.416L25.586 17H17v8.586l2.292-2.294 1.416 1.416L16 29.414l-4.708-4.706 1.416-1.416L15 25.586V17z'/%3E%3C/svg%3E\")}.ag-icon-asc:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Easc%3C/title%3E%3Cpath d='m15 10.621-4.292 4.294-1.416-1.416L16 6.793l6.708 6.706-1.416 1.416L17 10.621v14.586h-2z'/%3E%3C/svg%3E\")}.ag-icon-cancel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecancel%3C/title%3E%3Cpath d='M16 4C9.378 4 4 9.378 4 16s5.378 12 12 12 12-5.378 12-12S22.622 4 16 4m0 2c5.52 0 10 4.48 10 10s-4.48 10-10 10S6 21.52 6 16 10.48 6 16 6m0 8.586 5.292-5.294 1.416 1.416L17.414 16l5.294 5.292-1.416 1.416L16 17.414l-5.292 5.294-1.416-1.416L14.586 16l-5.294-5.292 1.416-1.416z'/%3E%3C/svg%3E\")}.ag-icon-chart:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Echart%3C/title%3E%3Cpath d='M6.667 12.267h4v13.067h-4zm7.466-5.6h3.733v18.667h-3.733zM21.6 17.333h3.733v8H21.6z'/%3E%3C/svg%3E\")}.ag-icon-color-picker:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecolor-picker%3C/title%3E%3Cpath d='M23.907 17.587 10.574 4.254l-1.88 1.88 3.173 3.173-8.28 8.28 10.16 10.16zm-16.547 0 6.387-6.387 6.387 6.387H7.361zm18.387 2s-2.667 2.893-2.667 4.667c0 1.467 1.2 2.667 2.667 2.667s2.667-1.2 2.667-2.667c0-1.773-2.667-4.667-2.667-4.667'/%3E%3C/svg%3E\")}.ag-icon-columns:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecolumns%3C/title%3E%3Cpath d='M14 25h-2V7h2zm6 0h-2V7h2zm6 0h-2V7h2zM8 25H6V7h2z'/%3E%3C/svg%3E\")}.ag-icon-contracted:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Econtracted%3C/title%3E%3Cpath d='m21.061 16-8.706 8.708-1.416-1.416L18.233 16l-7.294-7.292 1.416-1.416z'/%3E%3C/svg%3E\")}.ag-icon-copy:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecopy%3C/title%3E%3Cpath d='M21.929 27.999h-7.828a5.09 5.09 0 0 1-5.086-5.086v-9.812a5.087 5.087 0 0 1 5.086-5.086h7.828a5.09 5.09 0 0 1 5.086 5.086v9.812a5.087 5.087 0 0 1-5.086 5.086m.16-17.984h-8.088a2.94 2.94 0 0 0-2.938 2.938v10.132a2.94 2.94 0 0 0 2.938 2.938h8.088a2.94 2.94 0 0 0 2.936-2.938V12.953a2.94 2.94 0 0 0-2.936-2.938M7.041 26.013h-2.05a4 4 0 0 1-.006-.228V9.065a5.07 5.07 0 0 1 5.064-5.064h12.812q.069 0 .134.002v2.012H9.915a2.876 2.876 0 0 0-2.874 2.874z'/%3E%3C/svg%3E\")}.ag-icon-cross:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='4 4 24 24'%3E%3Ctitle%3Ecross%3C/title%3E%3Cpath d='m16 14.586 5.292-5.294 1.416 1.416L17.414 16l5.294 5.292-1.416 1.416L16 17.414l-5.292 5.294-1.416-1.416L14.586 16l-5.294-5.292 1.416-1.416z'/%3E%3C/svg%3E\")}.ag-icon-csv:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='M.688-.226a.2.2 0 0 1-.017.074.28.28 0 0 1-.145.14.412.412 0 0 1-.234.013.28.28 0 0 1-.202-.168.468.468 0 0 1-.04-.19q0-.086.025-.155a.319.319 0 0 1 .182-.191.4.4 0 0 1 .134-.025q.087 0 .155.035a.3.3 0 0 1 .104.085.17.17 0 0 1 .036.097.06.06 0 0 1-.018.044.06.06 0 0 1-.042.019.06.06 0 0 1-.042-.013.2.2 0 0 1-.031-.046.2.2 0 0 0-.066-.079.16.16 0 0 0-.095-.027.17.17 0 0 0-.142.068.3.3 0 0 0-.053.193.4.4 0 0 0 .023.139.2.2 0 0 0 .067.083.2.2 0 0 0 .1.027q.063 0 .106-.031a.2.2 0 0 0 .065-.091.2.2 0 0 1 .023-.046q.014-.018.044-.018a.06.06 0 0 1 .044.018.06.06 0 0 1 .019.045' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 7.122 25.977)'/%3E%3Cpath d='M.622-.215a.2.2 0 0 1-.033.117.23.23 0 0 1-.098.081.4.4 0 0 1-.153.029.34.34 0 0 1-.175-.04.23.23 0 0 1-.079-.077.17.17 0 0 1-.031-.093q0-.027.019-.045a.06.06 0 0 1 .046-.019.06.06 0 0 1 .039.014.1.1 0 0 1 .027.044.3.3 0 0 0 .03.057q.015.023.044.038.03.015.076.015.065 0 .105-.03a.09.09 0 0 0 .04-.075.08.08 0 0 0-.022-.058.14.14 0 0 0-.056-.034 1 1 0 0 0-.092-.025.7.7 0 0 1-.129-.042.2.2 0 0 1-.083-.066.17.17 0 0 1-.03-.104q0-.058.032-.105a.2.2 0 0 1 .093-.07.4.4 0 0 1 .144-.025q.066 0 .114.016a.3.3 0 0 1 .08.044.2.2 0 0 1 .046.057q.015.03.015.058a.07.07 0 0 1-.018.046.06.06 0 0 1-.046.021q-.025 0-.038-.012a.2.2 0 0 1-.028-.041.2.2 0 0 0-.047-.063Q.387-.625.326-.625a.15.15 0 0 0-.09.025q-.035.024-.035.059 0 .021.012.037a.1.1 0 0 0 .032.027.4.4 0 0 0 .111.036q.06.015.11.031.048.018.083.042a.2.2 0 0 1 .054.062.2.2 0 0 1 .019.091' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 13.339 25.977)'/%3E%3Cpath d='m.184-.633.162.48.163-.483q.013-.038.019-.053a.062.062 0 0 1 .061-.039q.018 0 .034.009a.1.1 0 0 1 .025.025q.009.015.009.031L.654-.64l-.007.025-.009.024-.173.468-.019.051a.2.2 0 0 1-.021.042.1.1 0 0 1-.033.03.1.1 0 0 1-.049.012.1.1 0 0 1-.05-.011A.1.1 0 0 1 .26-.03a.2.2 0 0 1-.021-.042L.22-.123.05-.587.041-.612.033-.638.03-.662q0-.025.02-.046a.07.07 0 0 1 .05-.02q.037 0 .053.023.015.023.031.072' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 18.94 25.977)'/%3E%3C/svg%3E\")}.ag-icon-cut:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M14.703 15.096 6.215 4.719a1 1 0 1 1 1.548-1.267l13.058 15.965A5.001 5.001 0 0 1 28 23.916a5 5 0 0 1-4.999 4.999 5 5 0 0 1-4.999-4.999 4.98 4.98 0 0 1 1.23-3.283l-3.238-3.958-3.272 4.001a4.98 4.98 0 0 1 1.265 3.323 5 5 0 0 1-4.999 4.999 5 5 0 0 1-4.999-4.999 5 5 0 0 1 7.13-4.522zM8.991 20.8a3.1 3.1 0 0 0-3.1 3.1c0 1.711 1.389 3.1 3.1 3.1s3.1-1.389 3.1-3.1-1.389-3.1-3.1-3.1M23 20.8a3.1 3.1 0 0 0-3.1 3.1c0 1.711 1.389 3.1 3.1 3.1s3.1-1.389 3.1-3.1-1.389-3.1-3.1-3.1m-5.723-8.852 1.292 1.579 7.205-8.808a1 1 0 0 0-1.548-1.267z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-desc:before,.ag-icon-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Edesc%3C/title%3E%3Cpath d='m17 21.379 4.292-4.294 1.416 1.416L16 25.207l-6.708-6.706 1.416-1.416L15 21.379V6.793h2z'/%3E%3C/svg%3E\")}.ag-icon-excel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='m.052-.139.16-.234-.135-.208a.4.4 0 0 1-.028-.052.1.1 0 0 1-.01-.042.05.05 0 0 1 .018-.037.07.07 0 0 1 .045-.016q.03 0 .047.018a1 1 0 0 1 .047.066l.107.174.115-.174.024-.038.019-.026.021-.015a.1.1 0 0 1 .027-.005.06.06 0 0 1 .044.016.05.05 0 0 1 .018.039q0 .033-.038.089l-.141.211.152.234a.3.3 0 0 1 .03.051.1.1 0 0 1 .009.038.1.1 0 0 1-.008.031.1.1 0 0 1-.024.023.1.1 0 0 1-.034.008.1.1 0 0 1-.035-.008.1.1 0 0 1-.023-.022L.427-.067.301-.265l-.134.204-.022.034-.016.019a.1.1 0 0 1-.022.015.1.1 0 0 1-.03.005.06.06 0 0 1-.044-.016.06.06 0 0 1-.017-.047q0-.036.036-.088' style='fill-rule:nonzero' transform='matrix(17.82892 0 0 16.50777 10.371 25.928)'/%3E%3C/svg%3E\")}.ag-icon-expanded:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eexpanded%3C/title%3E%3Cpath d='M21.061 8.708 13.767 16l7.294 7.292-1.416 1.416L10.939 16l8.706-8.708z'/%3E%3C/svg%3E\")}.ag-icon-eye-slash:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye-slash%3C/title%3E%3Cpath d='M9.304 7.89a15.2 15.2 0 0 1 6.404-1.638c.294-.002.292-.002.584 0 5.956.174 11.328 4.088 13.62 9.748 0 0-1.318 3.178-3.224 5.174a13.6 13.6 0 0 1-2.226 1.874L26.414 25 25 26.414l-2.336-2.336C17.866 26.396 11.776 26.15 7.36 22.96a14.9 14.9 0 0 1-4.168-4.612c-.41-.71-.694-1.336-1.104-2.348 0 0 .898-2.218 2.002-3.718a14.6 14.6 0 0 1 3.442-3.334L5.586 7 7 5.586zm-.3 2.528c-2.038 1.344-3.708 3.246-4.724 5.508L4.248 16c2.46 5.762 9.622 9.064 15.63 7.15q.688-.219 1.342-.516l-.912-.912a6.96 6.96 0 0 1-4.19 1.394c-3.862 0-7-3.136-7-7 0-1.57.52-3.022 1.394-4.19zm14.032 11.204a13.25 13.25 0 0 0 4.684-5.548l.032-.074c-1.984-4.646-6.834-7.798-12.006-7.748-1.712.05-3.386.458-4.922 1.158l1.102 1.102a6.97 6.97 0 0 1 4.192-1.396 7.003 7.003 0 0 1 5.606 11.192zm-11.09-8.262a5.003 5.003 0 0 0 6.928 6.928zm8.342 5.514a5.002 5.002 0 0 0-6.928-6.928z'/%3E%3C/svg%3E\")}.ag-icon-eye:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye%3C/title%3E%3Cpath d='M16.292 6.32c5.956.174 11.328 4.086 13.62 9.746 0 0-1.318 3.18-3.224 5.176-4.862 5.088-13.534 5.97-19.328 1.784a14.9 14.9 0 0 1-4.168-4.612c-.41-.71-.694-1.336-1.104-2.348 0 0 .898-2.216 2.002-3.716 2.678-3.64 7.03-5.896 11.618-6.03.294-.004.292-.004.584 0m-.546 2c-4.896.142-9.458 3.202-11.466 7.672l-.032.074c2.46 5.762 9.622 9.066 15.63 7.152 3.458-1.102 6.342-3.738 7.842-7.076l.032-.076C25.768 11.42 20.918 8.27 15.746 8.32m.254.946c3.754 0 6.8 3.048 6.8 6.8 0 3.754-3.046 6.8-6.8 6.8s-6.8-3.046-6.8-6.8c0-3.752 3.046-6.8 6.8-6.8m5 6.768V16c0-2.76-2.24-5-5-5s-5 2.24-5 5v.066c0 2.76 2.24 5 5 5s5-2.24 5-5z'/%3E%3C/svg%3E\")}.ag-icon-filter:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Efilter%3C/title%3E%3Cpath d='M26 8.184c-.066 2.658-4.058 5.154-6.742 7.974a1.05 1.05 0 0 0-.258.682v3.66L13 25c0-2.74.066-5.482-.002-8.222a1.05 1.05 0 0 0-.256-.62C10.026 13.304 6.06 10.61 6 8.184V6h20zM8 8c0 .304.06.612.258.842 2.716 2.854 6.682 5.548 6.742 7.974V21l2-1.5v-2.684c.066-2.658 4.058-5.154 6.742-7.974.198-.23.258-.538.258-.842z'/%3E%3C/svg%3E\")}.ag-icon-first:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Efirst%3C/title%3E%3Cpath d='M24.354 8.708 17.06 16l7.294 7.292-1.416 1.416L14.232 16l8.706-8.708zM9.646 8v16h-2V8z'/%3E%3C/svg%3E\")}.ag-icon-group:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Egroup%3C/title%3E%3Cpath d='M25.128 2.002c2.56.096 4.772 2.292 4.87 4.87a712 712 0 0 1 0 18.256c-.096 2.56-2.292 4.772-4.87 4.87a712 712 0 0 1-18.256 0c-2.558-.096-4.772-2.29-4.87-4.87a712 712 0 0 1 0-18.256c.096-2.56 2.292-4.772 4.87-4.87a712 712 0 0 1 18.256 0M7.006 4c-1.57.02-2.946 1.348-3.004 2.922-.078 6.078-.23 12.16.002 18.234.094 1.484 1.354 2.746 2.84 2.84 6.1.232 12.212.232 18.312 0 1.48-.094 2.746-1.35 2.84-2.84.232-6.1.232-12.212 0-18.312-.094-1.48-1.35-2.746-2.84-2.84C19.11 3.774 13.056 4 7.006 4M14 21h-4v-2h4zm12 0H16v-2h10zm-12-4h-4v-2h4zm12 0H16v-2h10zm-16-4H6v-2h4zm16 0H12v-2h14z'/%3E%3C/svg%3E\")}.ag-icon-last:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Elast%3C/title%3E%3Cpath d='m17.768 16-8.706 8.708-1.416-1.416L14.94 16 7.646 8.708l1.416-1.416zm6.586 8h-2V8h2z'/%3E%3C/svg%3E\")}.ag-icon-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eleft%3C/title%3E%3Cpath d='m17.621 11-2 2h12.586v6H15.621l2 2-4.414 4.414L3.793 16l9.414-9.414zm-11 5 6.586 6.586L14.793 21l-4-4h15.414v-2H10.793l4-4-1.586-1.586z'/%3E%3C/svg%3E\")}.ag-icon-linked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Elinked%3C/title%3E%3Cpath d='M17.138 13.418a1.03 1.03 0 0 0-.298.658s.125.096.226.178c1.372 1.114 2.033 3.039 1.582 4.796a4.7 4.7 0 0 1-1.205 2.123c-1.145 1.151-2.296 2.294-3.445 3.441-1.241 1.232-3.185 1.691-4.864 1.105-1.546-.54-2.756-1.938-3.048-3.572-.267-1.496.246-3.108 1.319-4.186l.578-.578-.03-.092a10.5 10.5 0 0 1-.452-2.3v-.005c-.776.775-1.621 1.489-2.275 2.396-1.817 2.522-1.643 6.323.706 8.669 1.813 1.811 4.708 2.462 7.171 1.517a6.75 6.75 0 0 0 2.336-1.518l3.427-3.424c1.939-1.954 2.533-5.126 1.294-7.674a6.8 6.8 0 0 0-2.071-2.481l-.003-.002zM21.265 4a6.8 6.8 0 0 0-4.734 1.964l-3.427 3.424c-1.961 1.977-2.52 5.092-1.32 7.619a6.8 6.8 0 0 0 2.098 2.537l.003.002c.32-.32.643-.637.96-.96.167-.172.27-.401.286-.64l-.204-.167c-1.603-1.287-2.215-3.68-1.316-5.616a4.7 4.7 0 0 1 .918-1.32c1.145-1.151 2.296-2.294 3.445-3.441 1.239-1.23 3.178-1.694 4.864-1.105 1.83.639 3.16 2.498 3.12 4.493a4.8 4.8 0 0 1-1.391 3.265l-.578.578.03.092c.235.743.387 1.519.452 2.3v.005c.732-.731 1.521-1.406 2.162-2.244 1.192-1.559 1.643-3.651 1.204-5.575a6.8 6.8 0 0 0-3.98-4.703 6.8 6.8 0 0 0-2.529-.506h-.061z'/%3E%3C/svg%3E\")}.ag-icon-loading:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eloading%3C/title%3E%3Cpath d='M17 29h-2v-8h2zm-3.586-9L7 26.414 5.586 25 12 18.586zm13 5L25 26.414 18.586 20 20 18.586zM29 17h-8v-2h8zm-18 0H3v-2h8zm2.414-5L12 13.414 5.586 7 7 5.586zm13-5L20 13.414 18.586 12 25 5.586zM17 11h-2V3h2z'/%3E%3C/svg%3E\")}.ag-icon-maximize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='3 3 26 26'%3E%3Ctitle%3Emaximize%3C/title%3E%3Cpath d='m7.54 17.4.1 6.98 6.96.1-2.24-2.24L16 18.6 13.4 16l-3.64 3.64zm16.92-2.8-.1-6.98-6.96-.1 2.24 2.24L16 13.4l2.6 2.6 3.64-3.64z'/%3E%3C/svg%3E\")}.ag-icon-menu:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Emenu%3C/title%3E%3Cpath d='M26 23H6v-2h20zm0-6H6v-2h20zm0-6H6V9h20z'/%3E%3C/svg%3E\")}.ag-icon-menu-alt:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none'%3E%3Cpath fill='%23000' d='M16 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4m0-7a2 2 0 1 0 0-4 2 2 0 0 0 0 4m0 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4'/%3E%3C/svg%3E\")}.ag-icon-minimize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='3 3 26 26'%3E%3Ctitle%3Eminimize%3C/title%3E%3Cpath d='m14.8 24.26-.1-6.96-6.96-.1 2.24 2.24-3.64 3.64 2.6 2.6 3.64-3.64zm2.4-16.52.1 6.96 6.96.1-2.24-2.24 3.64-3.64-2.6-2.6-3.64 3.64z'/%3E%3C/svg%3E\")}.ag-icon-minus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.515 7.515c-4.683 4.682-4.683 12.288 0 16.97 4.682 4.683 12.288 4.683 16.97 0 4.683-4.682 4.683-12.288 0-16.97-4.682-4.683-12.288-4.683-16.97 0m1.414 1.414c3.903-3.903 10.239-3.903 14.142 0s3.903 10.239 0 14.142-10.239 3.903-14.142 0-3.903-10.239 0-14.142m-1.414 6.07h16.97v2.002H7.515z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-next:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enext%3C/title%3E%3Cpath d='m21.061 16-8.706 8.708-1.416-1.416L18.233 16l-7.294-7.292 1.416-1.416z'/%3E%3C/svg%3E\")}.ag-icon-none:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enone%3C/title%3E%3Cpath d='m10.044 21.258 4.478-4.198L16 18.444 9 25l-7-6.556 1.478-1.384 4.478 4.198V7h2.088zm14 3.742h-2.088V10.742l-4.478 4.198L16 13.556 23 7q3.5 3.28 7 6.556l-1.478 1.384-4.478-4.198z'/%3E%3C/svg%3E\")}.ag-icon-not-allowed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enot-allowed%3C/title%3E%3Cpath d='M16.186 3.646c8.188.154 14.898 9.796 11.17 17.78-3.298 7.066-13.932 9.374-19.848 3.87-3.9-3.632-5.076-9.896-2.684-14.708 2.082-4.19 6.588-6.974 11.362-6.942m-.298 1.998c-6.922.132-12.578 8.308-9.33 15.052 3.342 6.934 15.246 7.646 18.932 0 3.076-6.386-1.988-15.1-9.602-15.052m7.596 6.422c2.864 5.33-1.744 13.186-8.306 12.536a8.6 8.6 0 0 1-3.232-.998l-1.266-.706L22.778 10.8q.351.633.706 1.266m-9.422 10.276c3.296 1.028 7.246-1.006 8.216-4.418a6.6 6.6 0 0 0-.056-3.742zm2.104-14.696a8.8 8.8 0 0 1 3.936 1.038l1.266.706L9.27 21.488c-3.018-5.41-.99-13.37 6.318-13.834q.289-.01.578-.008m-.31 2c-4.06.154-7.23 4.614-6.03 8.46l8.16-8.16a6.8 6.8 0 0 0-2.13-.3'/%3E%3C/svg%3E\")}.ag-icon-paste:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epaste%3C/title%3E%3Cpath d='M20 6.5c0-1-1-3-4-3s-4 2-4 3H8c-2.21 0-4 1.79-4 4v14c0 2.21 1.79 4 4 4h16c2.21 0 4-1.79 4-4v-14c0-2.21-1.79-4-4-4zm-4 .546c.734 0 1.334.572 1.334 1.272S16.734 9.59 16 9.59s-1.334-.572-1.334-1.272.6-1.272 1.334-1.272M24 26.5H8a2 2 0 0 1-2-2v-14a2 2 0 0 1 2-2h2v4h12v-4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2'/%3E%3C/svg%3E\")}.ag-icon-pin:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epin%3C/title%3E%3Cpath d='m10.78 19.777-4.668-4.666s.032-1 .67-1.87c1.366-1.86 4.052-1.96 6.056-1.572l3.158-3.108c-.7-2.342 3.352-5.046 3.352-5.046l9.166 9.168q-.334.447-.67.894c-1.074 1.426-2.538 2.63-4.272 2.338l-3.32 3.218c.046.344.042.03.118 1.152.144 2.13-.64 4.324-2.632 5.34l-.746.364-4.798-4.798-7.292 7.294-1.416-1.416zm8.24-13.672c-.688.568-1.416 1.45-1.024 2.072l.49.722-4.986 4.988c-1.988-.506-4.346-.636-5.156.614l9.02 9.032q.14-.099.272-.21c1.226-1.08.764-3.04.498-4.9l4.79-4.79s1.47.938 2.936-.776l-6.79-6.79q-.026.019-.05.038'/%3E%3C/svg%3E\")}.ag-icon-pivot:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epivot%3C/title%3E%3Cpath d='M25.128 2.002c2.56.096 4.772 2.292 4.87 4.87a712 712 0 0 1 0 18.256c-.096 2.56-2.292 4.772-4.87 4.87a712 712 0 0 1-18.256 0c-2.558-.096-4.772-2.29-4.87-4.87a712 712 0 0 1 0-18.256c.096-2.56 2.292-4.772 4.87-4.87a712 712 0 0 1 18.256 0m2.966 7.954H9.892v18.136c5.086.13 10.18.098 15.264-.096 1.48-.094 2.746-1.35 2.84-2.84.192-5.064.226-10.134.098-15.2M3.968 24.1q.015.528.036 1.056c.094 1.484 1.354 2.746 2.84 2.84l1.012.036V24.1zM22 15.414l-.292.294-1.416-1.416L23 11.586l2.708 2.706-1.416 1.416-.292-.294v3.592c-.032 2.604-2.246 4.892-4.872 4.992L15.414 24l.294.292-1.416 1.416L11.586 23l2.706-2.708 1.416 1.416-.322.32c3.372.03 6.578-.164 6.614-3.034zM3.88 18.038c.002 1.346.012 2.694.038 4.04h3.938v-4.04zm.05-6.062a681 681 0 0 0-.044 4.042h3.97v-4.042zm5.962-7.99Q8.449 3.999 7.006 4c-1.57.02-2.946 1.348-3.004 2.922q-.02 1.517-.042 3.034h3.896v-2.02h2.036zm14.244-.016v3.966h3.898q-.017-.546-.038-1.092c-.094-1.48-1.35-2.746-2.84-2.84q-.51-.019-1.02-.034m-8.14-.054q-2.035.022-4.07.048v3.972h4.07zm6.106.008c-1.358-.022-2.714-.026-4.07-.022v4.034h4.07z'/%3E%3C/svg%3E\")}.ag-icon-plus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.515 7.515c-4.683 4.682-4.683 12.288 0 16.97 4.682 4.683 12.288 4.683 16.97 0 4.683-4.682 4.683-12.288 0-16.97-4.682-4.683-12.288-4.683-16.97 0m1.414 1.414c3.903-3.903 10.239-3.903 14.142 0s3.903 10.239 0 14.142-10.239 3.903-14.142 0-3.903-10.239 0-14.142M15 15l-.001-7.485h2.002L17 15l7.485-.001v2.002L17 17l.001 7.485h-2.002L15 17l-7.485.001v-2.002z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-previous:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eprevious%3C/title%3E%3Cpath d='M21.061 8.708 13.767 16l7.294 7.292-1.416 1.416L10.939 16l8.706-8.708z'/%3E%3C/svg%3E\")}.ag-icon-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eright%3C/title%3E%3Cpath d='m28.207 16-9.414 9.414L14.379 21l2-2H3.793v-6h12.586l-2-2 4.414-4.414zm-11-5 4 4H5.793v2h15.414l-4 4 1.586 1.586L25.379 16l-6.586-6.586z'/%3E%3C/svg%3E\")}.ag-icon-save:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esave%3C/title%3E%3Cpath d='M25.333 16v9.333H6.666V16H3.999v9.333C3.999 26.8 5.199 28 6.666 28h18.667C26.8 28 28 26.8 28 25.333V16zm-8 .893 3.453-3.44 1.88 1.88L15.999 22l-6.667-6.667 1.88-1.88 3.453 3.44V4h2.667v12.893z'/%3E%3C/svg%3E\")}.ag-icon-small-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-down%3C/title%3E%3Cpath d='M24.708 12.355 16 21.061l-8.708-8.706 1.416-1.416L16 18.233l7.292-7.294z'/%3E%3C/svg%3E\")}.ag-icon-small-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-left%3C/title%3E%3Cpath d='M21.061 8.708 13.767 16l7.294 7.292-1.416 1.416L10.939 16l8.706-8.708z'/%3E%3C/svg%3E\")}.ag-icon-small-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-right%3C/title%3E%3Cpath d='m21.061 16-8.706 8.708-1.416-1.416L18.233 16l-7.294-7.292 1.416-1.416z'/%3E%3C/svg%3E\")}.ag-icon-small-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-up%3C/title%3E%3Cpath d='m24.708 19.645-1.416 1.416L16 13.767l-7.292 7.294-1.416-1.416L16 10.939z'/%3E%3C/svg%3E\")}.ag-icon-tick:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etick%3C/title%3E%3Cpath d='M24.708 10.855 13 22.561l-5.708-5.706 1.416-1.416L13 19.733 23.292 9.439z'/%3E%3C/svg%3E\")}.ag-icon-tree-closed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-closed%3C/title%3E%3Cpath d='m21.061 16-8.706 8.708-1.416-1.416L18.233 16l-7.294-7.292 1.416-1.416z'/%3E%3C/svg%3E\")}.ag-icon-tree-indeterminate:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-indeterminate%3C/title%3E%3Cpath d='M6 15h20v2H6z'/%3E%3C/svg%3E\")}.ag-icon-tree-open:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-open%3C/title%3E%3Cpath d='M24.708 12.355 16 21.061l-8.708-8.706 1.416-1.416L16 18.233l7.292-7.294z'/%3E%3C/svg%3E\")}.ag-icon-unlinked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eunlinked%3C/title%3E%3Cpath d='M5.35 3.999a.2.2 0 0 0-.14.058c-.388.38-.768.768-1.152 1.152a.21.21 0 0 0-.002.288c7.459 7.506 14.965 14.965 22.447 22.447a.21.21 0 0 0 .288.002q.576-.574 1.151-1.151a.21.21 0 0 0 .002-.288C20.484 19.002 12.979 11.542 5.497 4.06a.2.2 0 0 0-.146-.061zm.611 12.548c-1.933 1.939-2.538 5.119-1.289 7.688a6.79 6.79 0 0 0 4.891 3.672 6.82 6.82 0 0 0 5.893-1.866l1.984-1.984-1.438-1.438-1.986 1.986c-1.486 1.476-3.993 1.81-5.834.629a4.73 4.73 0 0 1-2.024-2.853 4.76 4.76 0 0 1 1.241-4.393l1.986-1.986-1.438-1.438-1.984 1.984zM21.273 3.999a6.78 6.78 0 0 0-4.727 1.963l-1.984 1.984L16 9.384l1.985-1.985a4.74 4.74 0 0 1 2.776-1.338c1.974-.224 4.045.926 4.845 2.834.712 1.699.329 3.778-1.004 5.12L22.616 16l1.439 1.438q1-1 2-2c2.012-2.031 2.557-5.368 1.112-7.982-1.144-2.07-3.432-3.441-5.834-3.459h-.061z'/%3E%3C/svg%3E\")}.ag-icon-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Easc%3C/title%3E%3Cpath d='m15 10.621-4.292 4.294-1.416-1.416L16 6.793l6.708 6.706-1.416 1.416L17 10.621v14.586h-2z'/%3E%3C/svg%3E\")}.ag-icon-grip:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Egrip%3C/title%3E%3Cpath d='M8 24H6v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zM8 18H6v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zM8 12H6V8h2zm6 0h-2V8h2zm6 0h-2V8h2zm6 0h-2V8h2z'/%3E%3C/svg%3E\")}.ag-icon-settings:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M30 8h-4.1c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2h14.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30zm-9 4c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3M2 24h4.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30v-2H15.9c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2zm9-4c1.7 0 3 1.3 3 3s-1.3 3-3 3-3-1.3-3-3 1.3-3 3-3'/%3E%3C/svg%3E\")}"},5572:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.iconSetBalham=void 0;const n=i(6607),o=i(3817);t.iconSetBalham=(0,n.createPart)({feature:"iconSet",css:o.iconSetBalhamCSS})},6407:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.iconSetQuartzRegular=t.iconSetQuartzLight=t.iconSetQuartzBold=t.iconSetQuartz=t.iconOverrides=t.iconSetMaterial=t.iconSetAlpine=void 0;var n=i(9580);Object.defineProperty(t,"iconSetAlpine",{enumerable:!0,get:function(){return n.iconSetAlpine}});var o=i(8900);Object.defineProperty(t,"iconSetMaterial",{enumerable:!0,get:function(){return o.iconSetMaterial}});var r=i(5867);Object.defineProperty(t,"iconOverrides",{enumerable:!0,get:function(){return r.iconOverrides}});var s=i(3692);Object.defineProperty(t,"iconSetQuartz",{enumerable:!0,get:function(){return s.iconSetQuartz}}),Object.defineProperty(t,"iconSetQuartzBold",{enumerable:!0,get:function(){return s.iconSetQuartzBold}}),Object.defineProperty(t,"iconSetQuartzLight",{enumerable:!0,get:function(){return s.iconSetQuartzLight}}),Object.defineProperty(t,"iconSetQuartzRegular",{enumerable:!0,get:function(){return s.iconSetQuartzRegular}})},7545:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.iconSetMaterialCSS=void 0,t.iconSetMaterialCSS=".ag-icon-aggregation:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eaggregation%3C/title%3E%3Cpath d='M24 5.333H8V8l8.667 8L8 24v2.667h16v-4h-9.333L21.334 16l-6.667-6.667H24z'/%3E%3C/svg%3E\")}.ag-icon-arrows:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Earrows%3C/title%3E%3Cpath d='M13.333 11.556h5.333V8h3.556L16 1.778 9.778 8h3.556zm-1.777 1.777H8V9.777l-6.222 6.222L8 22.221v-3.556h3.556zM30.222 16 24 9.778v3.556h-3.556v5.333H24v3.556l6.222-6.222zm-11.555 4.444h-5.333V24H9.778L16 30.222 22.222 24h-3.556z'/%3E%3C/svg%3E\")}.ag-icon-asc:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Easc%3C/title%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333z'/%3E%3C/svg%3E\")}.ag-icon-cancel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecancel%3C/title%3E%3Cpath d='M16 2.667C8.627 2.667 2.667 8.627 2.667 16S8.627 29.333 16 29.333 29.333 23.373 29.333 16 23.373 2.667 16 2.667m6.667 18.12-1.88 1.88L16 17.88l-4.787 4.787-1.88-1.88L14.12 16l-4.787-4.787 1.88-1.88L16 14.12l4.787-4.787 1.88 1.88L17.88 16z'/%3E%3C/svg%3E\")}.ag-icon-chart:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Echart%3C/title%3E%3Cpath d='M6.667 12.267h4v13.067h-4zm7.466-5.6h3.733v18.667h-3.733zM21.6 17.333h3.733v8H21.6z'/%3E%3C/svg%3E\")}.ag-icon-color-picker:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecolor-picker%3C/title%3E%3Cpath d='M23.907 17.587 10.574 4.254l-1.88 1.88 3.173 3.173-8.28 8.28 10.16 10.16zm-16.547 0 6.387-6.387 6.387 6.387H7.361zm18.387 2s-2.667 2.893-2.667 4.667c0 1.467 1.2 2.667 2.667 2.667s2.667-1.2 2.667-2.667c0-1.773-2.667-4.667-2.667-4.667'/%3E%3C/svg%3E\")}.ag-icon-columns:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecolumns%3C/title%3E%3Cpath d='M5.333 10.667h5.333V5.334H5.333zm8 16h5.333v-5.333h-5.333zm-8 0h5.333v-5.333H5.333zm0-8h5.333v-5.333H5.333zm8 0h5.333v-5.333h-5.333zm8-13.334v5.333h5.333V5.333zm-8 5.334h5.333V5.334h-5.333zm8 8h5.333v-5.333h-5.333zm0 8h5.333v-5.333h-5.333z'/%3E%3C/svg%3E\")}.ag-icon-contracted:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Econtracted%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E\")}.ag-icon-copy:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecopy%3C/title%3E%3Cpath d='M22 1.333H6A2.675 2.675 0 0 0 3.333 4v18.667H6V4h16zm4 5.334H11.333a2.675 2.675 0 0 0-2.667 2.667v18.667c0 1.467 1.2 2.667 2.667 2.667H26c1.467 0 2.667-1.2 2.667-2.667V9.334c0-1.467-1.2-2.667-2.667-2.667M26 28H11.333V9.333H26z'/%3E%3C/svg%3E\")}.ag-icon-cross:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecross%3C/title%3E%3Cpath d='m25.333 8.547-1.88-1.88L16 14.12 8.547 6.667l-1.88 1.88L14.12 16l-7.453 7.453 1.88 1.88L16 17.88l7.453 7.453 1.88-1.88L17.88 16z'/%3E%3C/svg%3E\")}.ag-icon-csv:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='M.688-.226a.2.2 0 0 1-.017.074.28.28 0 0 1-.145.14.412.412 0 0 1-.234.013.28.28 0 0 1-.202-.168.468.468 0 0 1-.04-.19q0-.086.025-.155a.319.319 0 0 1 .182-.191.4.4 0 0 1 .134-.025q.087 0 .155.035a.3.3 0 0 1 .104.085.17.17 0 0 1 .036.097.06.06 0 0 1-.018.044.06.06 0 0 1-.042.019.06.06 0 0 1-.042-.013.2.2 0 0 1-.031-.046.2.2 0 0 0-.066-.079.16.16 0 0 0-.095-.027.17.17 0 0 0-.142.068.3.3 0 0 0-.053.193.4.4 0 0 0 .023.139.2.2 0 0 0 .067.083.2.2 0 0 0 .1.027q.063 0 .106-.031a.2.2 0 0 0 .065-.091.2.2 0 0 1 .023-.046q.014-.018.044-.018a.06.06 0 0 1 .044.018.06.06 0 0 1 .019.045' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 7.122 25.977)'/%3E%3Cpath d='M.622-.215a.2.2 0 0 1-.033.117.23.23 0 0 1-.098.081.4.4 0 0 1-.153.029.34.34 0 0 1-.175-.04.23.23 0 0 1-.079-.077.17.17 0 0 1-.031-.093q0-.027.019-.045a.06.06 0 0 1 .046-.019.06.06 0 0 1 .039.014.1.1 0 0 1 .027.044.3.3 0 0 0 .03.057q.015.023.044.038.03.015.076.015.065 0 .105-.03a.09.09 0 0 0 .04-.075.08.08 0 0 0-.022-.058.14.14 0 0 0-.056-.034 1 1 0 0 0-.092-.025.7.7 0 0 1-.129-.042.2.2 0 0 1-.083-.066.17.17 0 0 1-.03-.104q0-.058.032-.105a.2.2 0 0 1 .093-.07.4.4 0 0 1 .144-.025q.066 0 .114.016a.3.3 0 0 1 .08.044.2.2 0 0 1 .046.057q.015.03.015.058a.07.07 0 0 1-.018.046.06.06 0 0 1-.046.021q-.025 0-.038-.012a.2.2 0 0 1-.028-.041.2.2 0 0 0-.047-.063Q.387-.625.326-.625a.15.15 0 0 0-.09.025q-.035.024-.035.059 0 .021.012.037a.1.1 0 0 0 .032.027.4.4 0 0 0 .111.036q.06.015.11.031.048.018.083.042a.2.2 0 0 1 .054.062.2.2 0 0 1 .019.091' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 13.339 25.977)'/%3E%3Cpath d='m.184-.633.162.48.163-.483q.013-.038.019-.053a.062.062 0 0 1 .061-.039q.018 0 .034.009a.1.1 0 0 1 .025.025q.009.015.009.031L.654-.64l-.007.025-.009.024-.173.468-.019.051a.2.2 0 0 1-.021.042.1.1 0 0 1-.033.03.1.1 0 0 1-.049.012.1.1 0 0 1-.05-.011A.1.1 0 0 1 .26-.03a.2.2 0 0 1-.021-.042L.22-.123.05-.587.041-.612.033-.638.03-.662q0-.025.02-.046a.07.07 0 0 1 .05-.02q.037 0 .053.023.015.023.031.072' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 18.94 25.977)'/%3E%3C/svg%3E\")}.ag-icon-cut:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m19 3-6 6 2 2 7-7V3m-10 9.5a.503.503 0 0 1-.5-.5c0-.274.226-.5.5-.5s.5.226.5.5-.226.5-.5.5M6 20c-1.097 0-2-.903-2-2a2 2 0 0 1 2-2c1.097 0 2 .903 2 2a2 2 0 0 1-2 2M6 8c-1.097 0-2-.903-2-2a2 2 0 0 1 2-2c1.097 0 2 .903 2 2a2 2 0 0 1-2 2m3.64-.36c.23-.5.36-1.05.36-1.64 0-2.194-1.806-4-4-4S2 3.806 2 6s1.806 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.194 0-4 1.806-4 4s1.806 4 4 4 4-1.806 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1z' style='fill-rule:nonzero' transform='translate(4 4)'/%3E%3C/svg%3E\")}.ag-icon-desc:before,.ag-icon-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Edesc%3C/title%3E%3Cpath d='m26.667 16-1.88-1.88-7.453 7.44V5.333h-2.667V21.56l-7.44-7.453L5.334 16l10.667 10.667L26.668 16z'/%3E%3C/svg%3E\")}.ag-icon-excel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='m.052-.139.16-.234-.135-.208a.4.4 0 0 1-.028-.052.1.1 0 0 1-.01-.042.05.05 0 0 1 .018-.037.07.07 0 0 1 .045-.016q.03 0 .047.018a1 1 0 0 1 .047.066l.107.174.115-.174.024-.038.019-.026.021-.015a.1.1 0 0 1 .027-.005.06.06 0 0 1 .044.016.05.05 0 0 1 .018.039q0 .033-.038.089l-.141.211.152.234a.3.3 0 0 1 .03.051.1.1 0 0 1 .009.038.1.1 0 0 1-.008.031.1.1 0 0 1-.024.023.1.1 0 0 1-.034.008.1.1 0 0 1-.035-.008.1.1 0 0 1-.023-.022L.427-.067.301-.265l-.134.204-.022.034-.016.019a.1.1 0 0 1-.022.015.1.1 0 0 1-.03.005.06.06 0 0 1-.044-.016.06.06 0 0 1-.017-.047q0-.036.036-.088' style='fill-rule:nonzero' transform='matrix(17.82892 0 0 16.50777 10.371 25.928)'/%3E%3C/svg%3E\")}.ag-icon-expanded:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eexpanded%3C/title%3E%3Cpath d='M20.94 9.88 19.06 8l-8 8 8 8 1.88-1.88L14.833 16z'/%3E%3C/svg%3E\")}.ag-icon-eye-slash:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye-slash%3C/title%3E%3Cpath d='M21.106 15.088A5.19 5.19 0 0 0 16 10.814a5.17 5.17 0 0 0-3.668 1.522L9.866 9.868a12.2 12.2 0 0 1 6.133-1.646c5.186 0 9.614 3.225 11.408 7.778a12.34 12.34 0 0 1-5.276 6.133l-2.468-2.466a5.17 5.17 0 0 0 1.449-2.802h-2.123c-.148.508-.42.964-.782 1.33l-1.33-1.33h-2.514l2.196 2.196q-.272.049-.56.05a3.11 3.11 0 0 1-2.99-2.245h-2.123a5.19 5.19 0 0 0 7.3 3.836l2.247 2.247a12.2 12.2 0 0 1-4.434.828c-5.186 0-9.614-3.225-11.408-7.778a12.3 12.3 0 0 1 3.781-5.111l2.924 2.924a5.1 5.1 0 0 0-.404 1.275h4.206l-1.296-1.296a3.1 3.1 0 0 1 2.196-.903c1.404 0 2.587.924 2.976 2.199h2.13z'/%3E%3C/svg%3E\")}.ag-icon-eye:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye%3C/title%3E%3Cpath d='M16 8.222c-5.186 0-9.614 3.225-11.408 7.778 1.794 4.553 6.222 7.778 11.408 7.778S25.614 20.553 27.408 16C25.614 11.447 21.186 8.222 16 8.222m0 12.964c-2.862 0-5.186-2.324-5.186-5.186s2.324-5.186 5.186-5.186 5.186 2.324 5.186 5.186-2.324 5.186-5.186 5.186m0-8.297c-1.721 0-3.111 1.39-3.111 3.111s1.39 3.111 3.111 3.111 3.111-1.39 3.111-3.111-1.39-3.111-3.111-3.111'/%3E%3C/svg%3E\")}.ag-icon-filter:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Efilter%3C/title%3E%3Cpath d='M13.333 24h5.333v-2.667h-5.333zM4 8v2.667h24V8zm4 9.333h16v-2.667H8z'/%3E%3C/svg%3E\")}.ag-icon-first:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Efirst%3C/title%3E%3Cpath d='M24.273 22.12 18.153 16l6.12-6.12L22.393 8l-8 8 8 8zM7.727 8h2.667v16H7.727z'/%3E%3C/svg%3E\")}.ag-icon-group:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Egroup%3C/title%3E%3Cpath d='M18.667 21.333h8.889A3.555 3.555 0 0 1 24 24.889h-5.333zm8.888-7.111v3.556h-8.889v-3.556zM24 7.111a3.555 3.555 0 0 1 3.556 3.556h-16V7.111zm-8.889 17.778h-3.556v-3.556h3.556zm0-7.111h-3.556v-3.556h3.556zM8 10.667H4.444A3.555 3.555 0 0 1 8 7.111z'/%3E%3C/svg%3E\")}.ag-icon-last:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Elast%3C/title%3E%3Cpath d='m7.727 9.88 6.12 6.12-6.12 6.12L9.607 24l8-8-8-8zM21.607 8h2.667v16h-2.667z'/%3E%3C/svg%3E\")}.ag-icon-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eleft%3C/title%3E%3Cpath d='M26.667 14.667H10.44l7.453-7.453L16 5.334 5.333 16.001 16 26.668l1.88-1.88-7.44-7.453h16.227v-2.667z'/%3E%3C/svg%3E\")}.ag-icon-linked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Elinked%3C/title%3E%3Cpath d='M5.2 16a4.136 4.136 0 0 1 4.133-4.133h5.333V9.334H9.333c-3.68 0-6.667 2.987-6.667 6.667s2.987 6.667 6.667 6.667h5.333v-2.533H9.333A4.136 4.136 0 0 1 5.2 16.002zm5.467 1.333h10.667v-2.667H10.667zm12-8h-5.333v2.533h5.333c2.28 0 4.133 1.853 4.133 4.133s-1.853 4.133-4.133 4.133h-5.333v2.533h5.333c3.68 0 6.667-2.987 6.667-6.667s-2.987-6.667-6.667-6.667z'/%3E%3C/svg%3E\")}.ag-icon-loading:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eloading%3C/title%3E%3Cpath d='m17.778 11.708 3.25-3.251 2.516 2.516-3.251 3.25h4.597v3.556h-4.597l3.251 3.25-2.516 2.516-3.25-3.251v4.597h-3.556v-4.597l-3.25 3.251-2.516-2.516 3.251-3.25H7.11v-3.556h4.597l-3.251-3.25 2.516-2.516 3.25 3.251V7.111h3.556zm-3.251 7.847h2.944l2.084-2.084v-2.944l-2.084-2.084h-2.944l-2.084 2.084v2.944z'/%3E%3C/svg%3E\")}.ag-icon-maximize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Emaximize%3C/title%3E%3Cpath d='M4 4h24v2.667H4z'/%3E%3C/svg%3E\")}.ag-icon-menu:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Emenu%3C/title%3E%3Cpath d='M4 24h24v-2.667H4zm0-6.667h24v-2.667H4zM4 8v2.667h24V8z'/%3E%3C/svg%3E\")}.ag-icon-menu-alt:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M16 26.667a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 24q0-1.1.784-1.883A2.57 2.57 0 0 1 16 21.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784m0-8a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 16q0-1.1.784-1.883A2.57 2.57 0 0 1 16 13.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784m0-8a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 8q0-1.1.784-1.883A2.57 2.57 0 0 1 16 5.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784'/%3E%3C/svg%3E\")}.ag-icon-minimize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eminimize%3C/title%3E%3Cpath d='M8 25.333h16V28H8z'/%3E%3C/svg%3E\")}.ag-icon-minus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658H7.901v-2.658z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-next:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enext%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E\")}.ag-icon-none:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enone%3C/title%3E%3Cpath d='M4 24h16v-2.667H4zM4 8v2.667h24V8zm0 9.333h24v-2.667H4z'/%3E%3C/svg%3E\")}.ag-icon-not-allowed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enot-allowed%3C/title%3E%3Cpath d='M16 2.667C8.64 2.667 2.667 8.64 2.667 16S8.64 29.333 16 29.333 29.333 23.36 29.333 16 23.36 2.667 16 2.667M5.333 16c0-5.893 4.773-10.667 10.667-10.667 2.467 0 4.733.84 6.533 2.253L7.586 22.533A10.54 10.54 0 0 1 5.333 16M16 26.667c-2.467 0-4.733-.84-6.533-2.253L24.414 9.467A10.54 10.54 0 0 1 26.667 16c0 5.893-4.773 10.667-10.667 10.667'/%3E%3C/svg%3E\")}.ag-icon-paste:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epaste%3C/title%3E%3Cpath d='M25.333 4H19.76C19.2 2.453 17.733 1.333 16 1.333S12.8 2.453 12.24 4H6.667A2.675 2.675 0 0 0 4 6.667V28c0 1.467 1.2 2.667 2.667 2.667h18.667c1.467 0 2.667-1.2 2.667-2.667V6.667C28.001 5.2 26.801 4 25.334 4zM16 4c.733 0 1.333.6 1.333 1.333s-.6 1.333-1.333 1.333-1.333-.6-1.333-1.333S15.267 4 16 4m9.333 24H6.666V6.667h2.667v4h13.333v-4h2.667z'/%3E%3C/svg%3E\")}.ag-icon-pin:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epin%3C/title%3E%3Cpath d='m11.106 22.093-4.444 4.444-1.259-1.259 4.444-4.444zm5.872-16.63 9.618 9.62-.962.962-.962-.962-7.694 3.847 1.924 1.924-2.74 2.74-7.696-7.696 2.741-2.74 1.924 1.925 3.847-7.696-.962-.962z'/%3E%3C/svg%3E\")}.ag-icon-pivot:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epivot%3C/title%3E%3Cpath d='M26.667 30.223H5.334a3.556 3.556 0 0 1-3.556-3.556V5.334a3.556 3.556 0 0 1 3.556-3.556h21.333a3.556 3.556 0 0 1 3.556 3.556v21.333a3.556 3.556 0 0 1-3.556 3.556m-16-8.89H5.334v5.333h5.333zm16-7.11H12.444v12.444h14.223zm-9.15 6.85-2.039 2.037 2.039 2.039-1.257 1.257-3.295-3.296 3.295-3.295q.63.628 1.257 1.257zm-6.85-6.85H5.334v5.333h5.333zm15.74 3.816-1.257 1.256-2.039-2.037-2.037 2.037-1.257-1.256 3.295-3.296zM10.667 5.333H5.334v5.333h5.333zm8.889 0h-7.112v5.333h7.112zm7.111 0h-5.333v5.333h5.333z'/%3E%3C/svg%3E\")}.ag-icon-plus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658h-6.77v6.77h-2.658v-6.77h-6.77v-2.658h6.77v-6.77h2.658v6.77z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-previous:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eprevious%3C/title%3E%3Cpath d='M20.94 9.88 19.06 8l-8 8 8 8 1.88-1.88L14.833 16z'/%3E%3C/svg%3E\")}.ag-icon-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eright%3C/title%3E%3Cpath d='m16 5.333-1.88 1.88 7.44 7.453H5.333v2.667H21.56l-7.44 7.453 1.88 1.88 10.667-10.667L16 5.332z'/%3E%3C/svg%3E\")}.ag-icon-save:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esave%3C/title%3E%3Cpath d='M25.333 16v9.333H6.666V16H3.999v9.333C3.999 26.8 5.199 28 6.666 28h18.667C26.8 28 28 26.8 28 25.333V16zm-8 .893 3.453-3.44 1.88 1.88L15.999 22l-6.667-6.667 1.88-1.88 3.453 3.44V4h2.667v12.893z'/%3E%3C/svg%3E\")}.ag-icon-small-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-down%3C/title%3E%3Cpath d='M9.333 12.667 16 19.334l6.667-6.667H9.334z'/%3E%3C/svg%3E\")}.ag-icon-small-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-left%3C/title%3E%3Cpath d='M19.333 9.333 12.666 16l6.667 6.667V9.334z'/%3E%3C/svg%3E\")}.ag-icon-small-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-right%3C/title%3E%3Cpath d='M12.667 22.667 19.334 16l-6.667-6.667v13.333z'/%3E%3C/svg%3E\")}.ag-icon-small-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-up%3C/title%3E%3Cpath d='M9.333 19.333 16 12.666l6.667 6.667H9.334z'/%3E%3C/svg%3E\")}.ag-icon-tick:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etick%3C/title%3E%3Cpath d='m11.727 21.167-5.56-5.56-1.893 1.88 7.453 7.453 16-16-1.88-1.88z'/%3E%3C/svg%3E\")}.ag-icon-tree-closed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-closed%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E\")}.ag-icon-tree-indeterminate:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-indeterminate%3C/title%3E%3Cpath d='M6.667 14.667h18.667v2.667H6.667z'/%3E%3C/svg%3E\")}.ag-icon-tree-open:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-open%3C/title%3E%3Cpath d='M22.12 11.06 16 17.167 9.88 11.06 8 12.94l8 8 8-8z'/%3E%3C/svg%3E\")}.ag-icon-unlinked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eunlinked%3C/title%3E%3Cpath d='M22.667 9.333h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133c0 1.907-1.307 3.507-3.08 3.973l1.947 1.947c2.173-1.107 3.667-3.32 3.667-5.92a6.67 6.67 0 0 0-6.667-6.667zm-1.334 5.334h-2.92l2.667 2.667h.253zM2.667 5.693 6.814 9.84A6.65 6.65 0 0 0 2.667 16a6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.334a4.136 4.136 0 0 1-4.133-4.133c0-2.12 1.613-3.867 3.68-4.093l2.76 2.76h-.973v2.667h3.64l3.027 3.027v2.307h2.307l5.347 5.333 1.68-1.68L4.362 4.002 2.669 5.695z'/%3E%3C/svg%3E\")}.ag-icon-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Easc%3C/title%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333z'/%3E%3C/svg%3E\")}.ag-icon-grip:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Egrip%3C/title%3E%3Cpath d='M26.667 12H5.334v2.667h21.333zM5.333 20h21.333v-2.667H5.333z'/%3E%3C/svg%3E\")}.ag-icon-settings:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M30 8h-4.1c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2h14.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30zm-9 4c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3M2 24h4.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30v-2H15.9c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2zm9-4c1.7 0 3 1.3 3 3s-1.3 3-3 3-3-1.3-3-3 1.3-3 3-3'/%3E%3C/svg%3E\")}"},8900:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.iconSetMaterial=void 0;const n=i(6607),o=i(7545);t.iconSetMaterial=(0,n.createPart)({feature:"iconSet",css:o.iconSetMaterialCSS})},5867:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.iconOverrides=void 0;const n=i(6607),o=i(113);t.iconOverrides=e=>{const t=[];if("image"===e.type){const{icons:i,mask:n}=e;for(const e of Object.keys(i)){const s=(0,o.imageValueToCss)(i[e]);n?t.push(`.ag-icon-${e}::before { mask-image: ${s}; }`):t.push(`.ag-icon-${e}::before { background-image: ${s}; ${r} }`)}}if("font"===e.type){const{family:i,weight:n,color:s,icons:a}=e;let l=r;i&&(l+=` font-family: ${(0,o.fontFamilyValueToCss)(i)};`),n&&(l+=` font-weight: ${(0,o.fontWeightValueToCss)(n)};`),s&&(l+=` color: ${(0,o.colorValueToCss)(s)};`);for(const e of Object.keys(a))t.push(`.ag-icon-${e}::before { content: ${JSON.stringify(a[e])}; ${l} }`)}return(0,n.createPart)({css:t.join(";\n"),cssImports:e.cssImports})};const r="background-color: unset; mask-image: unset; -webkit-mask-image: unset;"},3692:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.iconSetQuartzBold=t.iconSetQuartzRegular=t.iconSetQuartzLight=t.iconSetQuartz=void 0;const n=i(6607),o=i(1368);t.iconSetQuartz=(e={})=>(0,n.createPart)({feature:"iconSet",css:()=>(0,o.getQuartzIconsCss)(e)}),t.iconSetQuartzLight=(0,t.iconSetQuartz)({strokeWidth:1}),t.iconSetQuartzRegular=(0,t.iconSetQuartz)(),t.iconSetQuartzBold=(0,t.iconSetQuartz)({strokeWidth:2})},1368:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getQuartzIconsCss=void 0;const i={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},n={"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>'};t.getQuartzIconsCss=(e={})=>{let t="";for(const r of[...Object.keys(i),...Object.keys(n)]){const i=o(r,e.strokeWidth);t+=`.ag-icon-${r}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(i)}'); }\n`}return t};const o=(e,t=1.5)=>{const o=n[e];if(o)return o;const r=i[e];if(!r)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+r+"</svg>"}},2543:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.inputStyleBaseCSS=void 0,t.inputStyleBaseCSS=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}:where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) :where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) :where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}'},7389:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.inputStyleBorderedCSS=void 0,t.inputStyleBorderedCSS=":where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){&:focus{box-shadow:var(--ag-focus-shadow)}}"},3054:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.inputStyleUnderlinedCSS=void 0,t.inputStyleUnderlinedCSS=":where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){border-left:none;border-right:none;border-top:none}"},7161:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.inputStyleUnderlined=t.inputStyleBordered=t.inputStyleBase=void 0;const n=i(6607),o=i(7845),r=i(2543),s=i(7389),a=i(3054),l={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"}};t.inputStyleBase=(0,n.createPart)({feature:"inputStyle",params:l,css:r.inputStyleBaseCSS}),t.inputStyleBordered=(0,n.createPart)({feature:"inputStyle",params:{...l,inputBackgroundColor:o.backgroundColor,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:o.accentColor},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:(0,o.foregroundBackgroundMix)(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0},css:()=>r.inputStyleBaseCSS+s.inputStyleBorderedCSS}),t.inputStyleUnderlined=(0,n.createPart)({feature:"inputStyle",params:{...l,inputBackgroundColor:"transparent",inputBorder:{width:2,color:(0,o.foregroundMix)(.3)},inputPaddingStart:{ref:"spacing"},inputFocusBorder:"solid 2px var(--ag-accent-color)",inputDisabledTextColor:{ref:"textColor",mix:.5},inputDisabledBorder:"solid 1px var(--ag-border-color)",inputInvalidBorder:{width:2,color:{ref:"invalidColor",mix:.3}}},css:()=>r.inputStyleBaseCSS+a.inputStyleUnderlinedCSS})},4907:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.tabStyleBaseCSS=void 0,t.tabStyleBaseCSS='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:1px solid var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:1px solid var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}'},5797:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.tabStyleRolodexCSS=void 0,t.tabStyleRolodexCSS=".ag-tab{border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;border-top:var(--ag-tab-selected-border-width) solid transparent;flex:none;&.ag-tab-selected{border-left-color:var(--ag-tab-selected-border-color);border-right-color:var(--ag-tab-selected-border-color);border-top-color:var(--ag-tab-selected-border-color);margin-bottom:-1px;padding-bottom:calc(var(--ag-tab-bottom-padding) + 1px)}}"},5117:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.tabStyleRolodex=t.tabStyleAlpine=t.tabStyleMaterial=t.tabStyleQuartz=t.tabStyleBase=void 0;const n=i(6607),o=i(7845),r=i(4907),s=i(5797),a={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:1,tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1};t.tabStyleBase=(0,n.createPart)({feature:"tabStyle",params:a,css:r.tabStyleBaseCSS}),t.tabStyleQuartz=(0,n.createPart)({feature:"tabStyle",params:{...a,tabBarBorder:!0,tabBarBackgroundColor:(0,o.foregroundMix)(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:o.backgroundColor},css:r.tabStyleBaseCSS}),t.tabStyleMaterial=(0,n.createPart)({feature:"tabStyle",params:{...a,tabBarBackgroundColor:{ref:"chromeBackgroundColor"},tabSelectedUnderlineColor:{ref:"primaryColor"},tabSelectedUnderlineWidth:2,tabSelectedUnderlineTransitionDuration:0},css:r.tabStyleBaseCSS}),t.tabStyleAlpine=(0,n.createPart)({feature:"tabStyle",params:{...a,tabBarBorder:!0,tabBarBackgroundColor:{ref:"chromeBackgroundColor"},tabHoverTextColor:o.accentColor,tabSelectedTextColor:o.accentColor,tabSelectedUnderlineColor:o.accentColor,tabSelectedUnderlineWidth:2,tabSelectedUnderlineTransitionDuration:"0.3s"},css:r.tabStyleBaseCSS}),t.tabStyleRolodex=(0,n.createPart)({feature:"tabStyle",params:{...a,tabBarBackgroundColor:{ref:"chromeBackgroundColor"},tabBarHorizontalPadding:{ref:"spacing"},tabBarTopPadding:{ref:"spacing"},tabBarBorder:!0,tabHorizontalPadding:{calc:"spacing * 2"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:{ref:"spacing"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:o.backgroundColor},css:()=>r.tabStyleBaseCSS+s.tabStyleRolodexCSS})},142:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.materialAdjustmentsCSS=void 0,t.materialAdjustmentsCSS=".ag-dnd-ghost,.ag-filter-toolpanel-header,.ag-filter-toolpanel-search,.ag-header-row,.ag-multi-filter-group-title-bar,.ag-panel-title-bar-title,.ag-status-bar{color:var(--ag-header-text-color);font-size:calc(var(--ag-font-size) - 1px);font-weight:600}.ag-column-drop-horizontal{background-color:color-mix(in srgb,var(--ag-background-color),var(--ag-foreground-color) 8%)}.ag-cell.ag-cell-inline-editing{background-color:var(--ag-background-color);background-image:linear-gradient(0deg,var(--ag-input-background-color),var(--ag-input-background-color));border:var(--ag-input-border)!important;border-width:1px!important;height:calc(var(--ag-row-height) + var(--ag-spacing)*3);padding:var(--ag-spacing);:where(.ag-row-last:not(.ag-row-first)) &{bottom:0}:where(.ag-has-focus) &{border:var(--ag-input-focus-border)!important;border-width:1px!important}}.ag-advanced-filter-builder-button,.ag-standard-button{text-transform:uppercase}.ag-status-bar{border:1px solid var(--ag-border-color)}.ag-list-item-hovered:after{background-color:var(--ag-primary-color)}.ag-pill-button:hover{color:var(--ag-primary-color)}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-primary-color)}"},2525:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.themeMaterial=t.styleMaterial=t.themeBalham=t.themeAlpine=t.themeQuartz=void 0;const n=i(6607),o=i(9621),r=i(7845),s=i(2475),a=i(8265),l=i(8689),c=i(1697),d=i(5572),u=i(6407),h=i(7161),p=i(5117),g=i(142);t.themeQuartz=(0,o.createTheme)().withPart(a.checkboxStyleDefault).withPart(l.colorSchemeVariable).withPart(u.iconSetQuartzRegular).withPart(p.tabStyleQuartz).withPart(h.inputStyleBordered).withPart(c.columnDropStyleBordered).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]});t.themeAlpine=(0,o.createTheme)().withPart(s.buttonStyleAlpine).withPart(a.checkboxStyleDefault).withPart(l.colorSchemeVariable).withPart(u.iconSetAlpine).withPart(p.tabStyleAlpine).withPart(h.inputStyleBordered).withPart(c.columnDropStyleBordered).withParams({accentColor:"#2196f3",selectedRowBackgroundColor:(0,r.accentMix)(.3),inputFocusBorder:{color:(0,r.accentMix)(.4)},focusShadow:{radius:2,spread:1.6,color:(0,r.accentMix)(.4)},iconButtonHoverBackgroundColor:"transparent",iconButtonActiveBackgroundColor:"transparent",checkboxUncheckedBorderColor:(0,r.foregroundBackgroundMix)(.45),checkboxIndeterminateBackgroundColor:(0,r.foregroundBackgroundMix)(.45),checkboxIndeterminateBorderColor:(0,r.foregroundBackgroundMix)(.45),checkboxBorderWidth:2,checkboxBorderRadius:2,fontSize:13,dataFontSize:14,headerFontWeight:700,borderRadius:3,wrapperBorderRadius:3,tabSelectedUnderlineColor:r.accentColor,tabSelectedBorderWidth:0,tabSelectedUnderlineTransitionDuration:.3,sideButtonSelectedUnderlineColor:r.accentColor,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineTransitionDuration:.3,sideButtonBorder:!1,sideButtonSelectedBorder:!1,sideButtonBarTopPadding:{calc:"spacing * 3"},sideButtonSelectedBackgroundColor:"transparent",sideButtonHoverTextColor:r.accentColor,iconButtonHoverColor:r.accentColor,toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonSwitchInset:1,toggleButtonOffBackgroundColor:(0,r.foregroundBackgroundMix)(.45)});t.themeBalham=(0,o.createTheme)().withPart(s.buttonStyleBalham).withPart(a.checkboxStyleDefault).withPart(l.colorSchemeVariable).withPart(d.iconSetBalham).withPart(p.tabStyleRolodex).withPart(h.inputStyleBordered).withPart(c.columnDropStylePlain).withParams({accentColor:"#0091ea",borderColor:(0,r.foregroundMix)(.2),spacing:4,widgetVerticalSpacing:{calc:"max(8px, spacing)"},borderRadius:2,wrapperBorderRadius:2,headerColumnResizeHandleColor:"transparent",headerColumnBorder:!0,headerColumnBorderHeight:"50%",oddRowBackgroundColor:{ref:"chromeBackgroundColor",mix:.5},checkboxBorderRadius:2,checkboxBorderWidth:1,checkboxUncheckedBackgroundColor:r.backgroundColor,checkboxUncheckedBorderColor:(0,r.foregroundBackgroundMix)(.5),checkboxCheckedBackgroundColor:r.backgroundColor,checkboxCheckedBorderColor:r.accentColor,checkboxCheckedShapeColor:r.accentColor,checkboxIndeterminateBackgroundColor:r.backgroundColor,checkboxIndeterminateBorderColor:(0,r.foregroundBackgroundMix)(.5),checkboxIndeterminateShapeColor:(0,r.foregroundBackgroundMix)(.5),focusShadow:{radius:2,spread:1,color:r.accentColor},headerTextColor:(0,r.foregroundMix)(.6),iconButtonHoverBackgroundColor:"transparent",iconButtonActiveBackgroundColor:"transparent",fontSize:12,tabSelectedBackgroundColor:r.backgroundColor,headerFontWeight:"bold",toggleButtonWidth:32,toggleButtonHeight:16,toggleButtonSwitchInset:1,toggleButtonOffBackgroundColor:(0,r.foregroundBackgroundMix)(.5),sideButtonBorder:!0,sideButtonBarTopPadding:{calc:"spacing * 4"},popupShadow:"5px 5px 10px rgba(0, 0, 0, 0.3)",statusBarLabelColor:(0,r.foregroundMix)(.54),statusBarLabelFontWeight:600,statusBarValueFontWeight:600,panelTitleBarIconColor:r.foregroundColor}),t.styleMaterial=(()=>{const e={tabSelectedUnderlineColor:{ref:"primaryColor"},sideButtonSelectedUnderlineColor:{ref:"primaryColor"},buttonTextColor:{ref:"primaryColor"},rangeSelectionBackgroundColor:{ref:"primaryColor",mix:.2},rangeSelectionBorderColor:{ref:"primaryColor"},rangeSelectionHighlightColor:{ref:"primaryColor",mix:.5},rangeHeaderHighlightColor:{ref:"foregroundColor",mix:.08},rowNumbersSelectedColor:{ref:"primaryColor",mix:.5},inputFocusBorder:{width:2,color:{ref:"primaryColor"}},pickerButtonFocusBorder:{width:1,color:{ref:"primaryColor"}},cellEditingBorder:{color:{ref:"primaryColor"}},menuBackgroundColor:{ref:"backgroundColor"},sideButtonBarBackgroundColor:r.backgroundColor,sideButtonSelectedBackgroundColor:"transparent",sideButtonBarTopPadding:{calc:"spacing * 4"},headerColumnResizeHandleColor:"none",headerBackgroundColor:{ref:"backgroundColor"},rowHoverColor:(0,r.foregroundMix)(.08),columnHoverColor:(0,r.foregroundMix)(.08),headerCellHoverBackgroundColor:(0,r.foregroundMix)(.05),statusBarLabelColor:(0,r.foregroundMix)(.63),statusBarLabelFontWeight:600,statusBarValueFontWeight:600,valueChangeValueHighlightBackgroundColor:"#00acc1",panelTitleBarIconColor:r.foregroundColor,advancedFilterBuilderButtonBarBorder:!1},t={...e,primaryColor:"#3f51b5",foregroundColor:"#000D",headerTextColor:"#0008",accentColor:"#ff4081",checkboxUncheckedBorderColor:r.foregroundColor,checkboxIndeterminateBackgroundColor:r.foregroundColor,toggleButtonOffBackgroundColor:r.foregroundColor,selectedRowBackgroundColor:"rgba(33, 150, 243, 0.3)"},i={...e,primaryColor:"#3f51b5",foregroundColor:"#fffD",headerTextColor:"#fff8",accentColor:"#bb86fc",checkboxUncheckedBorderColor:(0,r.foregroundBackgroundMix)(.5),checkboxIndeterminateBackgroundColor:(0,r.foregroundBackgroundMix)(.5),toggleButtonOffBackgroundColor:(0,r.foregroundBackgroundMix)(.5),selectedRowBackgroundColor:"#bb86fc33"};return(0,n.createPart)({feature:"styleMaterial",css:g.materialAdjustmentsCSS,params:t,modeParams:{light:t,dark:i,"dark-blue":i}})})();t.themeMaterial=(0,o.createTheme)().withPart(s.buttonStyleBase).withPart(a.checkboxStyleDefault).withPart(l.colorSchemeVariable).withPart(u.iconSetMaterial).withPart(p.tabStyleMaterial).withPart(h.inputStyleUnderlined).withPart(c.columnDropStylePlain).withPart(t.styleMaterial).withParams({rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.75 * rowVerticalPaddingScale"},headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4.75 * headerVerticalPaddingScale"},widgetVerticalSpacing:{calc:"spacing * 1.75"},cellHorizontalPadding:{calc:"spacing * 3"},buttonHorizontalPadding:{ref:"spacing"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 2"},fontSize:13,iconSize:18,borderRadius:0,wrapperBorderRadius:0,wrapperBorder:!1,menuBorder:!1,dialogBorder:!1,panelTitleBarBorder:!1,tabSelectedBorderWidth:0,tabSelectedUnderlineTransitionDuration:.3,sidePanelBorder:!1,sideButtonSelectedBorder:!1,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineTransitionDuration:.3,sideButtonBorder:!1,buttonBorder:!1,buttonDisabledBorder:!1,focusShadow:{spread:4,color:(0,r.foregroundMix)(.16)},fontFamily:[{googleFont:"Roboto"},"-apple-system","BlinkMacSystemFont","Segoe UI","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],inputHeight:{calc:"max(iconSize, fontSize) + spacing * 3"},pickerButtonBorder:{width:1,color:"transparent"},headerFontWeight:600,checkboxBorderWidth:2,checkboxBorderRadius:2,toggleButtonWidth:34,toggleButtonSwitchInset:1,cardShadow:"0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)",popupShadow:"5px 5px 10px rgba(0, 0, 0, 0.3)"})},113:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.paramValueToCss=t.durationValueToCss=t.imageValueToCss=t.fontWeightValueToCss=t.fontFamilyValueToCss=t.borderStyleValueToCss=t.shadowValueToCss=t.borderValueToCss=t.scaleValueToCss=t.lengthValueToCss=t.colorSchemeValueToCss=t.colorValueToCss=t.getParamType=void 0;const n=i(7764),o=i(7845),r=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"];t.getParamType=(0,o.memoize)(e=>(e=e.toLowerCase(),r.find(t=>e.endsWith(t.toLowerCase()))??"length"));const s=e=>"object"==typeof e&&e?.ref?(0,o.paramToVariableExpression)(e.ref):"string"==typeof e?e:"number"==typeof e&&String(e);t.colorValueToCss=e=>{if("string"==typeof e)return e;if(e&&"ref"in e){const t=(0,o.paramToVariableExpression)(e.ref);return null==e.mix?t:`color-mix(in srgb, ${e.onto?(0,o.paramToVariableExpression)(e.onto):"transparent"}, ${t} ${(0,o.clamp)(100*e.mix,0,100)}%)`}return!1},t.colorSchemeValueToCss=s,t.lengthValueToCss=e=>"string"==typeof e?e:"number"==typeof e?`${e}px`:e&&"calc"in e?`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,e=>"-"===e[0]?e:` ${(0,o.paramToVariableExpression)(e)} `)})`:!(!e||!("ref"in e))&&(0,o.paramToVariableExpression)(e.ref),t.scaleValueToCss=s,t.borderValueToCss=(e,i)=>"string"==typeof e?e:!0===e?"solid 1px var(--ag-border-color)":!1===e?"columnBorder"===i?"solid 1px transparent":"none":e&&"ref"in e?(0,o.paramToVariableExpression)(e.ref):(0,t.borderStyleValueToCss)(e.style??"solid")+" "+(0,t.lengthValueToCss)(e.width??1)+" "+(0,t.colorValueToCss)(e.color??{ref:"borderColor"}),t.shadowValueToCss=e=>"string"==typeof e?e:!1===e?"none":e&&"ref"in e?(0,o.paramToVariableExpression)(e.ref):[(0,t.lengthValueToCss)(e.offsetX??0),(0,t.lengthValueToCss)(e.offsetY??0),(0,t.lengthValueToCss)(e.radius??0),(0,t.lengthValueToCss)(e.spread??0),(0,t.colorValueToCss)(e.color??{ref:"foregroundColor"})].join(" "),t.borderStyleValueToCss=s,t.fontFamilyValueToCss=e=>"string"==typeof e?e:e&&"googleFont"in e?(0,t.fontFamilyValueToCss)(e.googleFont):e&&"ref"in e?(0,o.paramToVariableExpression)(e.ref):!!Array.isArray(e)&&e.map(e=>("object"==typeof e&&"googleFont"in e&&(e=e.googleFont),a(e))).join(", ");const a=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e);t.fontWeightValueToCss=s,t.imageValueToCss=e=>"string"==typeof e?e:e&&"url"in e?`url(${JSON.stringify(e.url)})`:e&&"svg"in e?(0,t.imageValueToCss)({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):!(!e||!("ref"in e))&&(0,o.paramToVariableExpression)(e.ref),t.durationValueToCss=(e,t)=>"string"==typeof e?e:"number"==typeof e?(e>=10&&(0,n._error)(104,{value:e,param:t}),`${e}s`):!(!e||!("ref"in e))&&(0,o.paramToVariableExpression)(e.ref);const l={color:t.colorValueToCss,colorScheme:t.colorSchemeValueToCss,length:t.lengthValueToCss,scale:t.scaleValueToCss,border:t.borderValueToCss,borderStyle:t.borderStyleValueToCss,shadow:t.shadowValueToCss,image:t.imageValueToCss,fontFamily:t.fontFamilyValueToCss,fontWeight:t.fontWeightValueToCss,duration:t.durationValueToCss};t.paramValueToCss=(e,i)=>{const n=(0,t.getParamType)(e);return l[n](i,e)}},7845:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.accentColor=t.foregroundColor=t.backgroundColor=t.foregroundHeaderBackgroundMix=t.foregroundBackgroundMix=t.foregroundMix=t.accentMix=t.memoize=t.logErrorMessage=t.clamp=t.paramToVariableExpression=t.paramToVariableName=t.kebabCase=void 0,t.kebabCase=e=>e.replace(/[A-Z]/g,e=>`-${e}`).toLowerCase(),t.paramToVariableName=e=>`--ag-${(0,t.kebabCase)(e)}`,t.paramToVariableExpression=e=>`var(${(0,t.paramToVariableName)(e)})`,t.clamp=(e,t,i)=>Math.max(t,Math.min(i,e)),t.logErrorMessage=(e,t)=>{t?console.error(e,t):console.error(e)},t.memoize=e=>{const t=new Map;return i=>{const n=i;return t.has(n)||t.set(n,e(i)),t.get(n)}},t.accentMix=e=>({ref:"accentColor",mix:e}),t.foregroundMix=e=>({ref:"foregroundColor",mix:e}),t.foregroundBackgroundMix=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),t.foregroundHeaderBackgroundMix=e=>({ref:"foregroundColor",mix:e,onto:"headerBackgroundColor"}),t.backgroundColor={ref:"backgroundColor"},t.foregroundColor={ref:"foregroundColor"},t.accentColor={ref:"accentColor"}},8927:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.tooltipCSS=void 0,t.tooltipCSS=".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);white-space:normal}.ag-tooltip,.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}"},243:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipComponent=void 0;const n=i(7766),o=i(3598);class r extends o.PopupComponent{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=(0,n._escapeString)(t,!0)}}t.TooltipComponent=r},3386:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipFeature=t._shouldDisplayTooltip=t._getShouldDisplayTooltip=t._isShowTooltipWhenTruncated=void 0;const n=i(8731),o=i(3430);function r(e){return"whenTruncated"===e.get("tooltipShowMode")}function s(e){return()=>{const t=e();return!t||t.scrollWidth>t.clientWidth}}t._isShowTooltipWhenTruncated=r,t._getShouldDisplayTooltip=function(e,t){return r(e)?s(t):void 0},t._shouldDisplayTooltip=s;class a extends n.BeanStub{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e){const t="title",i=this.ctrl.getGui();i&&(null!=e&&""!=e?i.setAttribute(t,e):i.removeAttribute(t))}updateTooltipText(){const{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){null==this.tooltipManager&&(this.tooltipManager=this.createBean(new o.TooltipStateManager(this.ctrl,()=>this.tooltip),this.beans.context))}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}}t.TooltipFeature=a},2277:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipModule=void 0;const n=i(7205),o=i(3137),r=i(8927),s=i(243),a=i(3386),l=i(7931);t.TooltipModule={moduleName:"Tooltip",version:n.VERSION,beans:[l.TooltipService],dynamicBeans:{tooltipFeature:a.TooltipFeature},userComponents:{agTooltipComponent:s.TooltipComponent},dependsOn:[o.PopupModule],css:[r.tooltipCSS]}},7931:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipService=void 0;const n=i(8731),o=i(7274),r=i(4422),s=i(6996),a=i(3386);class l extends n.BeanStub{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,i,n){e&&t.destroyBean(e);const o=(0,a._isShowTooltipWhenTruncated)(this.gos),{column:r,eGui:s}=t,l=r.getColDef();n||!o||l.headerComponent||(n=(0,a._shouldDisplayTooltip)(()=>s.querySelector(".ag-header-cell-text")));const c={getColumn:()=>r,getColDef:()=>r.getColDef(),getGui:()=>s,getLocation:()=>"header",getTooltipValue:()=>null!=i?i:r.getColDef().headerTooltip,shouldDisplayTooltip:n};let d=this.createTooltipFeature(c);return d&&(d=t.createBean(d),t.setRefreshFunction("tooltip",()=>d.refreshTooltip())),d}setupHeaderGroupTooltip(e,t,i,n){e&&t.destroyBean(e);const o=(0,a._isShowTooltipWhenTruncated)(this.gos),{column:r,eGui:s}=t,l=r.getColGroupDef();n||!o||l?.headerGroupComponent||(n=(0,a._shouldDisplayTooltip)(()=>s.querySelector(".ag-header-group-text")));const c={getColumn:()=>r,getGui:()=>s,getLocation:()=>"headerGroup",getTooltipValue:()=>i??(l&&l.headerTooltip),shouldDisplayTooltip:n};l&&(c.getColDef=()=>l);const d=this.createTooltipFeature(c);return d?t.createBean(d):d}enableCellTooltipFeature(e,t,i){const{column:n,rowNode:l}=e,c=(0,a._isShowTooltipWhenTruncated)(this.gos);i||!c||e.isCellRenderer()||(i=(0,a._shouldDisplayTooltip)(()=>{const t=e.eGui;return 0===t.children.length?t:t.querySelector(".ag-cell-value")}));const d={getColumn:()=>n,getColDef:()=>n.getColDef(),getRowIndex:()=>e.cellPosition.rowIndex,getRowNode:()=>l,getGui:()=>e.eGui,getLocation:()=>"cell",getTooltipValue:null!=t?()=>t:()=>{const t=n.getColDef(),i=l.data;if(t.tooltipField&&(0,r._exists)(i))return(0,s._getValueUsingField)(i,t.tooltipField,n.isTooltipFieldContainsDots());const a=t.tooltipValueGetter;return a?a((0,o._addGridCommonParams)(this.gos,{location:"cell",colDef:n.getColDef(),column:n,rowIndex:e.cellPosition.rowIndex,node:l,data:l.data,value:e.value,valueFormatted:e.valueFormatted})):null},getValueFormatted:()=>e.valueFormatted,shouldDisplayTooltip:i};return this.createTooltipFeature(d,this.beans)}refreshRowTooltip(e,t,i,n){const o={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>i,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:n},r=this.beans,s=r.context;e&&t.destroyBean(e,s);const a=this.createTooltipFeature(o,r);return t.createBean(a,s)}initCol(e){const{colDef:t}=e;e.tooltipEnabled=(0,r._exists)(t.tooltipField)||(0,r._exists)(t.tooltipValueGetter)||(0,r._exists)(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}}t.TooltipService=l},3430:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipStateManager=void 0;const n=i(2036),o=i(8731),r=i(7274),s=i(8667),a=i(4422);var l,c;!function(e){e[e.NOTHING=0]="NOTHING",e[e.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",e[e.SHOWING=2]="SHOWING"}(l||(l={})),function(e){e[e.HOVER=0]="HOVER",e[e.FOCUS=1]="FOCUS"}(c||(c={}));let d,u=!1;class h extends o.BeanStub{wireBeans(e){this.popupSvc=e.popupSvc,this.userCompFactory=e.userCompFactory}constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=l.NOTHING,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.tooltipCtrl.getGui();this.tooltipTrigger===c.HOVER&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===c.FOCUS&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){return"show"===e?this.tooltipCtrl.getTooltipShowDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipCtrl.getTooltipHideDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return e&&"hover"!==e?c.FOCUS:c.HOVER}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),(0,s._isIOSUserAgent)()||(u?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},100):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===l.SHOWING&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){const t=e.relatedTarget,i=this.tooltipCtrl.getGui(),n=this.tooltipComp?.getGui();this.isInteractingWithTooltip||i.contains(t)||this.interactionEnabled&&n?.contains(t)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=l.NOTHING||u)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=l.WAITING_TO_SHOW}isLastTooltipHiddenRecently(){return(new Date).getTime()-d<1e3}setToDoNothing(e){e||this.state!==l.SHOWING||this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=l.NOTHING,this.lastMouseEvent=null}showTooltip(){const e=this.getTooltipValue(),t=this.tooltipCtrl;if(!(0,a._exists)(e)||t.shouldDisplayTooltip&&!t.shouldDisplayTooltip())return void this.setToDoNothing();const i=t.getRowNode?.(),o=(0,r._addGridCommonParams)(this.gos,{location:t.getLocation?.()??"UNKNOWN",colDef:t.getColDef?.(),column:t.getColumn?.(),rowIndex:t.getRowIndex?.(),node:i,data:i?.data,value:e,valueFormatted:t.getValueFormatted?.(),hideTooltipCallback:()=>this.hideTooltip(!0),...t.getAdditionalParams?.()??{}});this.state=l.SHOWING,this.tooltipInstanceCount++;const s=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount),c=(0,n._getTooltipCompDetails)(this.userCompFactory,o);c?.newAgStackInstance().then(s)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),d=(new Date).getTime()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){if(this.state!==l.SHOWING||this.tooltipInstanceCount!==e)return void this.destroyBean(t);const i=t.getGui();this.tooltipComp=t,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),this.tooltipTrigger===c.HOVER&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");const n=this.getLocaleTextFunc(),o=this.popupSvc?.addPopup({eChild:i,ariaLabel:n("ariaLabelTooltip","Tooltip")});if(o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===c.FOCUS){const e=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:e,columnMoved:e})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(i,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners((0,r._getDocument)(this.beans),{keydown:e=>{i.contains(e?.target)||this.onKeyDown()}}),this.tooltipTrigger===c.FOCUS&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(i,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:i,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){const e=this.tooltipComp?.getGui(),t=(0,r._getActiveDomElement)(this.beans);return!!e&&e.contains(t)}onTooltipFocusOut(e){const t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupSvc?.positionPopupUnderMouseEvent({...e,mouseEvent:this.lastMouseEvent}):this.popupSvc?.positionPopupByComponent({...e,eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,i=this.tooltipTrigger===c.HOVER?1e3:0;window.setTimeout(()=>{e(),this.destroyBean(t)},i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(e=>{e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){u=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},100)}unlockService(){u=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}}t.TooltipStateManager=h},7113:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.UndoRedoService=void 0;const n=i(8731),o=i(6257),r=i(7274),s=i(2410);class a extends n.BeanStub{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=null!==this.activeCellEdit&&(0,o._areCellsEqual)(this.activeCellEdit,t),n=null!==this.activeRowEdit&&(0,o._isSameRow)(this.activeRowEdit,t);if(!(i||n||this.isPasting||this.isRangeInAction))return;const{rowPinned:r,rowIndex:s,column:a,oldValue:l,value:c}=e,d={rowPinned:r,rowIndex:s,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(d)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){const{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;const i=e.get("undoRedoCellEditingLimit");if(i<=0)return;this.undoStack=new s.UndoRedoStack(i),this.redoStack=new s.UndoRedoStack(i),this.addListeners();const n=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:e=>{e.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:n,newColumnsLoaded:n,columnGroupOpened:n,columnRowGroupChanged:n,columnMoved:n,columnPinned:n,columnVisible:n,rowDragEnd:n}),t.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?.getCurrentStackSize()??0}getCurrentRedoStackSize(){return this.redoStack?.getCurrentStackSize()??0}undo(e){const{eventSvc:t,undoStack:i,redoStack:n}=this;t.dispatchEvent({type:"undoStarted",source:e});const o=this.undoRedo(i,n,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:o})}redo(e){const{eventSvc:t,undoStack:i,redoStack:n}=this;t.dispatchEvent({type:"redoStarted",source:e});const o=this.undoRedo(n,i,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:o})}undoRedo(e,t,i,n,o){if(!e)return!1;const r=e.pop();return!(!r||!r.cellValueChanges||(this.processAction(r,e=>e[n],o),r instanceof s.RangeUndoRedoAction?this.processRange(r.ranges||[r[i]]):this.processCell(r.cellValueChanges),t.push(r),0))}processAction(e,t,i){e.cellValueChanges.forEach(e=>{const{rowIndex:n,rowPinned:r,columnId:s}=e,a={rowIndex:n,rowPinned:r},l=(0,o._getRowNode)(this.beans,a);l.displayed&&l.setDataValue(s,t(e),i)})}processRange(e){let t;const i=this.beans.rangeSvc;i.removeAllCellRanges(!0),e.forEach((n,o)=>{if(!n)return;const r=n.startRow,s=n.endRow;o===e.length-1&&(t={rowPinned:r.rowPinned,rowIndex:r.rowIndex,columnId:n.startColumn.getColId()},this.setLastFocusedCell(t));const a={rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,rowEndIndex:s.rowIndex,rowEndPinned:s.rowPinned,columnStart:n.startColumn,columns:n.columns};i.addCellRange(a)})}processCell(e){const t=e[0],{rowIndex:i,rowPinned:n}=t,r={rowIndex:i,rowPinned:n},s=(0,o._getRowNode)(this.beans,r),a={rowPinned:t.rowPinned,rowIndex:s.rowIndex,columnId:t.columnId};this.setLastFocusedCell(a)}setLastFocusedCell(e){const{rowIndex:t,columnId:i,rowPinned:n}=e,{colModel:o,focusSvc:r,rangeSvc:s}=this.beans,a=o.getCol(i);if(!a)return;const{scrollFeature:l}=this.gridBodyCtrl;l.ensureIndexVisible(t),l.ensureColumnVisible(a);const c={rowIndex:t,column:a,rowPinned:n};r.setFocusedCell({...c,forceBrowserFocus:!0}),s?.setRangeToCell(c)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new s.UndoRedoAction(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const e=new s.UndoRedoAction(this.cellValueChanges);this.pushActionsToUndoStack(e)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new s.UndoRedoAction(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new s.RangeUndoRedoAction(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;const{rangeSvc:t,gos:i}=this.beans;e=t&&(0,r._isCellSelectionEnabled)(i)?new s.RangeUndoRedoAction(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):new s.UndoRedoAction(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}}t.UndoRedoService=a},2410:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UndoRedoStack=t.RangeUndoRedoAction=t.UndoRedoAction=void 0;class i{constructor(e){this.cellValueChanges=e}}t.UndoRedoAction=i,t.RangeUndoRedoAction=class extends i{constructor(e,t,i,n){super(e),this.initialRange=t,this.finalRange=i,this.ranges=n}},t.UndoRedoStack=class{constructor(e){this.actionStack=[],this.maxStackSize=e||10,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}}},5230:function(e,t){function i(e,t,i){null==i||"string"==typeof i&&""==i?o(e,t):n(e,t,i)}function n(e,t,i){e.setAttribute(r(t),i.toString())}function o(e,t){e.removeAttribute(r(t))}function r(e){return`aria-${e}`}function s(e,t){i(e,"labelledby",t)}Object.defineProperty(t,"__esModule",{value:!0}),t._getAriaCheckboxStateName=t._setAriaHasPopup=t._setAriaControls=t._setAriaChecked=t._setAriaSelected=t._removeAriaSort=t._setAriaSort=t._setAriaColSpan=t._setAriaColIndex=t._setAriaColCount=t._setAriaRowSpan=t._setAriaRowIndex=t._setAriaRowCount=t._setAriaMultiSelectable=t._setAriaPosInSet=t._setAriaSetSize=t._removeAriaExpanded=t._setAriaExpanded=t._setAriaActiveDescendant=t._setAriaHidden=t._setAriaDisabled=t._setAriaLevel=t._setAriaRelevant=t._setAriaAtomic=t._setAriaLive=t._setAriaDescribedBy=t._setAriaLabelledBy=t._setAriaLabel=t._getAriaLabel=t._getAriaPosInSet=t._getAriaLevel=t._getAriaSortState=t._setAriaRole=void 0,t._setAriaRole=function(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")},t._getAriaSortState=function(e){let t;return t="asc"===e?"ascending":"desc"===e?"descending":"mixed"===e?"other":"none",t},t._getAriaLevel=function(e){return parseInt(e.getAttribute("aria-level"),10)},t._getAriaPosInSet=function(e){return parseInt(e.getAttribute("aria-posinset"),10)},t._getAriaLabel=function(e){return e.getAttribute("aria-label")},t._setAriaLabel=function(e,t){i(e,"label",t)},t._setAriaLabelledBy=s,t._setAriaDescribedBy=function(e,t){i(e,"describedby",t)},t._setAriaLive=function(e,t){i(e,"live",t)},t._setAriaAtomic=function(e,t){i(e,"atomic",t)},t._setAriaRelevant=function(e,t){i(e,"relevant",t)},t._setAriaLevel=function(e,t){i(e,"level",t)},t._setAriaDisabled=function(e,t){i(e,"disabled",t)},t._setAriaHidden=function(e,t){i(e,"hidden",t)},t._setAriaActiveDescendant=function(e,t){i(e,"activedescendant",t)},t._setAriaExpanded=function(e,t){n(e,"expanded",t)},t._removeAriaExpanded=function(e){o(e,"expanded")},t._setAriaSetSize=function(e,t){n(e,"setsize",t)},t._setAriaPosInSet=function(e,t){n(e,"posinset",t)},t._setAriaMultiSelectable=function(e,t){n(e,"multiselectable",t)},t._setAriaRowCount=function(e,t){n(e,"rowcount",t)},t._setAriaRowIndex=function(e,t){n(e,"rowindex",t)},t._setAriaRowSpan=function(e,t){n(e,"rowspan",t)},t._setAriaColCount=function(e,t){n(e,"colcount",t)},t._setAriaColIndex=function(e,t){n(e,"colindex",t)},t._setAriaColSpan=function(e,t){n(e,"colspan",t)},t._setAriaSort=function(e,t){n(e,"sort",t)},t._removeAriaSort=function(e){o(e,"sort")},t._setAriaSelected=function(e,t){i(e,"selected",t)},t._setAriaChecked=function(e,t){n(e,"checked",void 0===t?"mixed":t)},t._setAriaControls=function(e,t){i(e,"controls",t.id),s(t,e.id)},t._setAriaHasPopup=function(e,t){i(e,"haspopup",!1===t?null:t)},t._getAriaCheckboxStateName=function(e,t){return void 0===t?e("ariaIndeterminate","indeterminate"):!0===t?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}},1502:function(e,t){function i(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}Object.defineProperty(t,"__esModule",{value:!0}),t._moveInArray=t._removeFromArray=t._sortNumerically=t._areEqual=t._last=t._EmptyArray=void 0,t._EmptyArray=Object.freeze([]),t._last=function(e){if(e?.length)return e[e.length-1]},t._areEqual=function(e,t,i){return null==e&&null==t||null!=e&&null!=t&&e.length===t.length&&e.every((e,n)=>i?i(e,t[n]):t[n]===e)},t._sortNumerically=function(e){return e.sort((e,t)=>e-t)},t._removeFromArray=i,t._moveInArray=function(e,t,n){for(let n=0;n<t.length;n++)i(e,t[n]);for(let i=t.length-1;i>=0;i--)e.splice(n,0,t[i])}},8667:function(e,t){let i,n,o,r,s,a,l,c;function d(){return void 0===o&&(o=/(firefox)/i.test(navigator.userAgent)),o}function u(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;0===i&&0===t.clientWidth&&(i=null),t.parentNode&&t.parentNode.removeChild(t),null!=i&&(l=i,a=0===i)}Object.defineProperty(t,"__esModule",{value:!0}),t._isInvisibleScrollbar=t._getScrollbarWidth=t._getMaxDivHeight=t._getTabIndex=t._isIOSUserAgent=t._isMacOsUserAgent=t._isBrowserFirefox=t._isBrowserChrome=t._isBrowserSafari=void 0,t._isBrowserSafari=function(){return void 0===i&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),i},t._isBrowserChrome=function(){if(void 0===n){const e=window;n=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return n},t._isBrowserFirefox=d,t._isMacOsUserAgent=function(){return void 0===r&&(r=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),r},t._isIOSUserAgent=function(){return void 0===s&&(s=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),s},t._getTabIndex=function(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return-1!==t||null!==i&&(""!==i||d())?t.toString():null},t._getMaxDivHeight=function(){if(void 0!==c)return c;if(!document.body)return-1;let e=1e6;const t=d()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const n=2*e;if(i.style.height=n+"px",n>t||i.clientHeight!==n)break;e=n}return document.body.removeChild(i),c=e,e},t._getScrollbarWidth=function(){return null==l&&u(),l},t._isInvisibleScrollbar=function(){return null==a&&u(),a}},6800:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ChangedPath=void 0,t.ChangedPath=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:i,children:n}=e;if(n)for(let e=0;e<n.length;++e)this.depthFirstSearchChangedPath(n[e],t);t(i)}depthFirstSearchEverything(e,t,i){const n=e.childrenAfterGroup;if(n)for(let e=0,o=n.length;e<o;++e){const o=n[e];o.childrenAfterGroup?this.depthFirstSearchEverything(o,t,i):i&&t(o)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const e={rowNode:t,children:null};this.mapToItems[t.id]=e,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach(e=>this.nodeIdsToColumns[i.id][e.getId()]=!0),i=i.parent}linkPathItems(e,t){let i=e;for(let e=0;e<t;e++){const e=this.mapToItems[i.id],t=this.mapToItems[i.parent.id];t.children||(t.children=[]),t.children.push(e),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter(e=>i[e.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter(e=>!i[e.getId()])}}},9827:function(e,t){function i(e,t){return e.toString().padStart(t,"0")}Object.defineProperty(t,"__esModule",{value:!0}),t._parseDateTimeFromString=t._dateToFormattedString=t._serialiseDate=void 0,t._serialiseDate=function(e,t=!0,n="-"){if(!e)return null;let o=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(e=>i(e,2)).join(n);return t&&(o+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(e=>i(e,2)).join(":")),o};const n=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};t._dateToFormattedString=function(e,t="YYYY-MM-DD"){const o=i(e.getFullYear(),4),r=["January","February","March","April","May","June","July","August","September","October","November","December"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a={YYYY:()=>o.slice(o.length-4,o.length),YY:()=>o.slice(o.length-2,o.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>r[e.getMonth()],MMM:()=>r[e.getMonth()].slice(0,3),MM:()=>i(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${n(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${n(e.getDate())}`,DD:()=>i(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>s[e.getDay()],ddd:()=>s[e.getDay()].slice(0,3),dd:()=>s[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${n(e.getDay())}`,d:()=>`${e.getDay()}`},l=new RegExp(Object.keys(a).join("|"),"g");return t.replace(l,e=>e in a?a[e]():e)},t._parseDateTimeFromString=function(e){if(!e)return null;const[t,i]=e.split(" ");if(!t)return null;const n=t.split("-").map(e=>parseInt(e,10));if(3!==n.filter(e=>!isNaN(e)).length)return null;const[o,r,s]=n,a=new Date(o,r-1,s);if(a.getFullYear()!==o||a.getMonth()!==r-1||a.getDate()!==s)return null;if(!i||"00:00:00"===i)return a;const[l,c,d]=i.split(":").map(e=>parseInt(e,10));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),d>=0&&d<60&&a.setSeconds(d),a}},3507:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._preserveRangesWhile=t._getTextSelectionRanges=t._observeResize=t._bindCellRendererToHtmlElement=t._nodeListForEach=t._addOrRemoveAttribute=t._iterateNamedNodeMap=t._copyNodeList=t._isNodeOrElement=t._formatSize=t._setFixedHeight=t._setElementHeight=t._setFixedWidth=t._setElementWidth=t._isVerticalScrollShowing=t._isHorizontalScrollShowing=t._addStylesToElement=t._insertWithDomOrder=t._setDomChildOrder=t._ensureDomOrder=t._loadTemplate=t._isVisible=t._isInDOM=t._removeFromParent=t._clearElement=t._setScrollLeft=t._getScrollLeft=t._isRtlNegativeScroll=t._getElementRectWithOffset=t._getAbsoluteWidth=t._getAbsoluteHeight=t._getInnerWidth=t._getInnerHeight=t._getElementSize=t._isElementChildOfClass=t._setDisabled=t._setVisible=t._setDisplayed=t._isFocusableFormField=t.FOCUSABLE_EXCLUDE=t.FOCUSABLE_SELECTOR=t._radioCssClass=void 0;const n=i(7274),o=i(5230),r=i(8667);let s;function a(e){const{height:t,width:i,borderTopWidth:n,borderRightWidth:o,borderBottomWidth:r,borderLeftWidth:s,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:d,marginTop:u,marginRight:h,marginBottom:p,marginLeft:g,boxSizing:f}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(n||"0"),borderRightWidth:parseFloat(o||"0"),borderBottomWidth:parseFloat(r||"0"),borderLeftWidth:parseFloat(s||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(d||"0"),marginTop:parseFloat(u||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(g||"0"),boxSizing:f}}function l(){if("boolean"==typeof s)return s;const e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(e),e.scrollLeft=1,s=0===Math.floor(e.scrollLeft),document.body.removeChild(e),s}function c(e){return!!e.offsetParent}function d(e){const t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!c(e)||"visible"!==window.getComputedStyle(e).visibility)}function u(e,t){t=p(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function h(e,t){t=p(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function p(e){return"number"==typeof e?`${e}px`:e}function g(e,t){if(null!=e)for(let i=0;i<e.length;i++)t(e[i])}function f(e){const t=(0,n._getRootNode)(e),i="getSelection"in t?t.getSelection():null,o=[];for(let e=0;e<(i?.rangeCount??0);e++){const t=i?.getRangeAt(e);t&&o.push(t)}return{selection:i,ranges:o}}t._radioCssClass=function(e,t,i){const n=e.parentElement;let o=n&&n.firstChild;for(;o;)t&&o.classList.toggle(t,o===e),i&&o.classList.toggle(i,o!==e),o=o.nextSibling},t.FOCUSABLE_SELECTOR="[tabindex], input, select, button, textarea, [href]",t.FOCUSABLE_EXCLUDE="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *",t._isFocusableFormField=function(e){const i=Element.prototype.matches||Element.prototype.msMatchesSelector,n=i.call(e,"input, select, button, textarea"),o=i.call(e,t.FOCUSABLE_EXCLUDE),r=d(e);return n&&!o&&r},t._setDisplayed=function(e,t,i={}){const{skipAriaHidden:n}=i;e.classList.toggle("ag-hidden",!t),n||(0,o._setAriaHidden)(e,!t)},t._setVisible=function(e,t,i={}){const{skipAriaHidden:n}=i;e.classList.toggle("ag-invisible",!t),n||(0,o._setAriaHidden)(e,!t)},t._setDisabled=function(e,t){const i="disabled",n=t?e=>e.setAttribute(i,""):e=>e.removeAttribute(i);n(e),g(e.querySelectorAll("input"),e=>n(e))},t._isElementChildOfClass=function(e,t,i){let n=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,"number"==typeof i){if(++n>i)break}else if(e===i)break}return!1},t._getElementSize=a,t._getInnerHeight=function(e){const t=a(e);return"border-box"===t.boxSizing?t.height-t.paddingTop-t.paddingBottom:t.height},t._getInnerWidth=function(e){const t=a(e);return"border-box"===t.boxSizing?t.width-t.paddingLeft-t.paddingRight:t.width},t._getAbsoluteHeight=function(e){const{height:t,marginBottom:i,marginTop:n}=a(e);return Math.floor(t+i+n)},t._getAbsoluteWidth=function(e){const{width:t,marginLeft:i,marginRight:n}=a(e);return Math.floor(t+i+n)},t._getElementRectWithOffset=function(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:n,borderRightWidth:o,borderBottomWidth:r}=a(e);return{top:t.top+(i||0),left:t.left+(n||0),right:t.right+(o||0),bottom:t.bottom+(r||0)}},t._isRtlNegativeScroll=l,t._getScrollLeft=function(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i),(0,r._isBrowserChrome)()&&!l()&&(i=e.scrollWidth-e.getBoundingClientRect().width-i)),i},t._setScrollLeft=function(e,t,i){i&&(l()?t*=-1:((0,r._isBrowserSafari)()||(0,r._isBrowserChrome)())&&(t=e.scrollWidth-e.getBoundingClientRect().width-t)),e.scrollLeft=t},t._clearElement=function(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)},t._removeFromParent=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},t._isInDOM=c,t._isVisible=d,t._loadTemplate=function(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild},t._ensureDomOrder=function(e,t,i){i&&i.nextSibling===t||(e.firstChild?i?i.nextSibling?e.insertBefore(t,i.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t):e.appendChild(t))},t._setDomChildOrder=function(e,t){for(let i=0;i<t.length;i++){const n=t[i],o=e.children[i];o!==n&&e.insertBefore(n,o)}},t._insertWithDomOrder=function(e,t,i){i?i.insertAdjacentElement("afterend",t):e.firstChild?e.insertAdjacentElement("afterbegin",t):e.appendChild(t)},t._addStylesToElement=function(e,t){if(t)for(const i of Object.keys(t)){const n=t[i];if(!i||!i.length||null==n)continue;const o=i.replace(/[A-Z]/g,e=>`-${e.toLocaleLowerCase()}`),r=n.toString(),s=r.replace(/\s*!important/g,""),a=s.length!=r.length?"important":void 0;e.style.setProperty(o,s,a)}},t._isHorizontalScrollShowing=function(e){return e.clientWidth<e.scrollWidth},t._isVerticalScrollShowing=function(e){return e.clientHeight<e.scrollHeight},t._setElementWidth=function(e,t){"flex"===t?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):u(e,t)},t._setFixedWidth=u,t._setElementHeight=function(e,t){"flex"===t?(e.style.removeProperty("height"),e.style.removeProperty("minHeight"),e.style.removeProperty("maxHeight"),e.style.flex="1 1 auto"):h(e,t)},t._setFixedHeight=h,t._formatSize=p,t._isNodeOrElement=function(e){return e instanceof Node||e instanceof HTMLElement},t._copyNodeList=function(e){if(null==e)return[];const t=[];return g(e,e=>t.push(e)),t},t._iterateNamedNodeMap=function(e,t){if(e)for(let i=0;i<e.length;i++){const n=e[i];t(n.name,n.value)}},t._addOrRemoveAttribute=function(e,t,i){null==i||""===i?e.removeAttribute(t):e.setAttribute(t,i.toString())},t._nodeListForEach=g,t._bindCellRendererToHtmlElement=function(e,t){e.then(e=>{const i=e.getGui();null!=i&&("object"==typeof i?t.appendChild(i):t.innerHTML=i)})},t._observeResize=function(e,t,i){const o=(0,n._getWindow)(e).ResizeObserver,r=o?new o(i):null;return r?.observe(t),()=>r?.disconnect()},t._getTextSelectionRanges=f,t._preserveRangesWhile=function(e,t){if(!e.gos.get("enableCellTextSelection"))return t();if(!(0,r._isBrowserFirefox)()&&!(0,r._isBrowserSafari)())return t();const{selection:i,ranges:n}=f(e);t(),i?.removeAllRanges();for(const e of n)i?.addRange(e)}},2979:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getPassiveStateForEvent=t._addSafePassiveEventListener=t._getEventPath=t._createEventPath=t._isElementInEventPath=t._getCtrlForEventTarget=t._isEventSupported=t._isStopPropagationForAgGrid=t._stopPropagationForAgGrid=void 0;const n=i(7274),o="__ag_Grid_Stop_Propagation",r=["touchstart","touchend","touchmove","touchcancel","scroll"],s=["wheel"],a={};function l(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}function c(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():l(t)}t._stopPropagationForAgGrid=function(e){e[o]=!0},t._isStopPropagationForAgGrid=function(e){return!0===e[o]},t._isEventSupported=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t=>{if("boolean"==typeof a[t])return a[t];const i=document.createElement(e[t]||"div");return a[t="on"+t]=t in i}})(),t._getCtrlForEventTarget=function(e,t,i){let o=t;for(;o;){const t=(0,n._getDomData)(e,o,i);if(t)return t;o=o.parentElement}return null},t._isElementInEventPath=function(e,t){return!(!t||!e)&&c(t).indexOf(e)>=0},t._createEventPath=l,t._getEventPath=c,t._addSafePassiveEventListener=function(e,i,n,o){const r=(0,t.getPassiveStateForEvent)(n);let s;null!=r&&(s={passive:r}),e&&e.addEventListener&&e.addEventListener(i,n,o,s)},t.getPassiveStateForEvent=e=>{const t=r.includes(e),i=s.includes(e);return!!t||!i&&void 0}},2331:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._focusNextGridCoreContainer=t._isCellFocusSuppressed=t._isHeaderFocusSuppressed=t._focusGridInnerElement=t._findTabbableParent=t._findNextFocusableElement=t._focusInto=t._findFocusableElements=t._addFocusableContainerListener=t._isKeyboardMode=t._registerKeyboardFocusEvents=void 0;const n=i(9853),o=i(7274),r=i(1502),s=i(8667),a=i(3507);let l=!1,c=0;function d(e){const t=l,i="keydown"===e.type;i&&(e.ctrlKey||e.metaKey||e.altKey)||t!==i&&(l=i)}function u(e,t,i=!1){const n=a.FOCUSABLE_SELECTOR;let o=a.FOCUSABLE_EXCLUDE;t&&(o+=", "+t),i&&(o+=', [tabindex="-1"]');const r=Array.prototype.slice.apply(e.querySelectorAll(n)).filter(e=>(0,a._isVisible)(e)),s=Array.prototype.slice.apply(e.querySelectorAll(o));return s.length?(l=s,r.filter(e=>-1===l.indexOf(e))):r;var l}function h(e,t,i,n){const r=u(t,i?':not([tabindex="-1"])':null),s=(0,o._getActiveDomElement)(e);let a;a=i?r.findIndex(e=>e.contains(s)):r.indexOf(s);const l=a+(n?-1:1);return l<0||l>=r.length?null:r[l]}function p(e,t,i=!1){const n=e.ctrlsSvc.get("gridCtrl");return!(i||!n.focusNextInnerContainer(t))||((i||!t&&!n.isDetailGrid())&&n.forceFocusOutOfContainer(t),!1)}t._registerKeyboardFocusEvents=function(e){const t=(0,o._getDocument)(e);var i;return i=t,c>0||(i.addEventListener("keydown",d),i.addEventListener("mousedown",d)),c++,()=>{c--,function(e){c>0||(e.removeEventListener("keydown",d),e.removeEventListener("mousedown",d))}(t)}},t._isKeyboardMode=function(){return l},t._addFocusableContainerListener=function(e,t,i){t.addManagedElementListeners(i,{keydown:t=>{if(!t.defaultPrevented&&t.key===n.KeyCode.TAB){const n=t.shiftKey;h(e,i,!1,n)||p(e,n)&&t.preventDefault()}}})},t._findFocusableElements=u,t._focusInto=function(e,t=!1,i=!1,n=!1){const o=u(e,n?".ag-tab-guard":null,i),s=t?(0,r._last)(o):o[0];return!!s&&(s.focus({preventScroll:!0}),!0)},t._findNextFocusableElement=h,t._findTabbableParent=function(e,t=5){let i=0;for(;e&&null===(0,s._getTabIndex)(e)&&++i<=t;)e=e.parentElement;return null===(0,s._getTabIndex)(e)?null:e},t._focusGridInnerElement=function(e,t){return e.ctrlsSvc.get("gridCtrl").focusInnerElement(t)},t._isHeaderFocusSuppressed=function(e){return e.gos.get("suppressHeaderFocus")||!!e.overlays?.isExclusive()},t._isCellFocusSuppressed=function(e){return e.gos.get("suppressCellFocus")||!!e.overlays?.isExclusive()},t._focusNextGridCoreContainer=p},2043:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._waitUntil=t._throttle=t._debounce=t._executeNextVMTurn=t._errorOnce=t._warnOnce=t._logIfDebug=t._doOnce=void 0;const i={};function n(e,t){i[t]||(e(),i[t]=!0)}function o(e,...t){n(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}t._doOnce=n,t._logIfDebug=function(e,t,...i){e.get("debug")&&console.log("AG Grid: "+t,...i)},t._warnOnce=o,t._errorOnce=function(e,...t){n(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))};const r=[];let s=!1;t._executeNextVMTurn=function(e){r.push(e),s||(s=!0,window.setTimeout(()=>{const e=r.slice();r.length=0,s=!1,e.forEach(e=>e())},0))},t._debounce=function(e,t,i){let n;return function(...o){const r=this;window.clearTimeout(n),n=window.setTimeout(function(){e.isAlive()&&t.apply(r,o)},i)}},t._throttle=function(e,t){let i=0;return function(...n){const o=(new Date).getTime();o-i<t||(i=o,e.apply(this,n))}},t._waitUntil=function(e,t,i=100,n){const r=(new Date).getTime();let s=null,a=!1;const l=()=>{const l=(new Date).getTime()-r>i;(e()||l)&&(t(),a=!0,null!=s&&(window.clearInterval(s),s=null),l&&n&&o(n))};l(),a||(s=window.setInterval(l,10))}},1298:function(e,t){function i(e,t,i=!1){const n=e.replace(/\s/g,""),o=t.replace(/\s/g,""),r=n.length,s=o.length,a=new Array(r+1).fill(null).map(()=>new Array(s+1).fill(0));for(let e=0;e<=r;e+=1)a[e][0]=e;for(let e=0;e<=s;e+=1)a[0][e]=e;for(let e=1;e<=r;e++)for(let t=1;t<=s;t++)n[e-1]===o[t-1]?a[e][t]=a[e-1][t-1]:a[e][t]=1+Math.min(a[e][t-1],Math.min(a[e-1][t],a[e-1][t-1]));const l=a[r][s];let c=Math.max(r,s)-l;if(i){const e=function(e){const t=[],i=e.length;for(let n=1;n<=i;n++)for(let o=0;o<=i-n;o++){const i=o+n-1;t.push(e.slice(o,i+1))}return t}(n);for(let t=0;t<e.length;t++){const i=e[t];-1!==o.indexOf(i)&&(c+=1,c*=i.length)}}return c}Object.defineProperty(t,"__esModule",{value:!0}),t._fuzzySuggestions=void 0,t._fuzzySuggestions=function(e){const{inputValue:t,allSuggestions:n,hideIrrelevant:o,filterByPercentageOfBestMatch:r,addSequentialWeight:s}=e;let a=n.map((e,n)=>({value:e,relevance:i(t.toLowerCase(),e.toLocaleLowerCase(),s),idx:n}));if(a.sort((e,t)=>t.relevance-e.relevance),o&&(a=a.filter(e=>0!==e.relevance)),a.length>0&&r&&r>0){const e=a[0].relevance*r;a=a.filter(t=>e-t.relevance<0)}const l=[],c=[];for(const e of a)l.push(e.value),c.push(e.idx);return{values:l,indices:c}}},4422:function(e,t){function i(e){return null!=e&&""!==e}Object.defineProperty(t,"__esModule",{value:!0}),t._defaultComparator=t._jsonEquals=t._toStringOrNull=t._missing=t._exists=t._makeNull=void 0,t._makeNull=function(e){return null==e||""===e?null:e},t._exists=i,t._missing=function(e){return!i(e)},t._toStringOrNull=function(e){return null!=e&&"function"==typeof e.toString?e.toString():null},t._jsonEquals=function(e,t){return(e?JSON.stringify(e):null)===(t?JSON.stringify(t):null)},t._defaultComparator=function(e,t,i=!1){const n=null==e,o=null==t;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),n&&o)return 0;if(n)return-1;if(o)return 1;function r(e,t){return e>t?1:e<t?-1:0}if("string"!=typeof e)return r(e,t);if(!i)return r(e,t);try{return e.localeCompare(t)}catch(i){return r(e,t)}}},9970:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._createIconNoSpan=t._createIcon=void 0;const n=i(7764),o=i(5230),r=i(3507);function s(e,t,i){let s=null;"smallDown"===e?(0,n._warn)(262):"smallLeft"===e?(0,n._warn)(263):"smallRight"===e&&(0,n._warn)(264);const a=i&&i.getColDef().icons;if(a&&(s=a[e]),t.gos&&!s){const i=t.gos.get("icons");i&&(s=i[e])}if(s){let t;if("function"==typeof s)t=s();else{if("string"!=typeof s)return void(0,n._warn)(38,{iconName:e});t=s}return"string"==typeof t?(0,r._loadTemplate)(t):(0,r._isNodeOrElement)(t)?t:void(0,n._warn)(133,{iconName:e})}{const i=document.createElement("span"),n=t.registry.getIcon(e);n||t.validation?.validateIcon(e);const r=n??e;return i.setAttribute("class",`ag-icon ag-icon-${r}`),i.setAttribute("unselectable","on"),(0,o._setAriaRole)(i,"presentation"),i}}t._createIcon=function(e,t,i){const n=s(e,t,i);if(n){const{className:e}=n;if("string"==typeof e&&e.indexOf("ag-icon")>-1||"object"==typeof e&&e["ag-icon"])return n}const o=document.createElement("span");return o.appendChild(n),o},t._createIconNoSpan=s},6466:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._isUserSuppressingKeyboardEvent=t._isEventFromPrintableCharacter=void 0;const n=i(7274);t._isEventFromPrintableCharacter=function(e){return!(e.altKey||e.ctrlKey||e.metaKey)&&1===e.key?.length},t._isUserSuppressingKeyboardEvent=function(e,t,i,o,r){const s=o?o.getColDef().suppressKeyboardEvent:void 0;if(!s)return!1;const a=(0,n._addGridCommonParams)(e,{event:t,editing:r,column:o,node:i,data:i.data,colDef:o.getColDef()});return!(!s||!s(a))}},3276:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._areEventsNear=void 0,t._areEventsNear=function(e,t,i){if(0===i)return!1;const n=Math.abs(e.clientX-t.clientX),o=Math.abs(e.clientY-t.clientY);return Math.max(n,o)<=i}},7698:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._formatNumberCommas=void 0,t._formatNumberCommas=function(e,t){if("number"!=typeof e)return"";const i=t(),n=i("thousandSeparator",","),o=i("decimalSeparator",".");return e.toString().replace(".",o).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${n}`)}},6996:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._getValueUsingField=t._mergeDeep=t.SKIP_JS_BUILTINS=void 0;const n=i(4422);function o(e){return"object"==typeof e&&null!==e}t.SKIP_JS_BUILTINS=new Set(["__proto__","constructor","prototype"]),t._mergeDeep=function e(i,r,s=!0,a=!1){(0,n._exists)(r)&&function(e,t){if(null!=e)if(Array.isArray(e))for(let i=0;i<e.length;i++)t(i.toString(),e[i]);else for(const i of Object.keys(e))t(i,e[i])}(r,(n,r)=>{if(t.SKIP_JS_BUILTINS.has(n))return;let l=i[n];l!==r&&(a&&null==l&&null!=r&&"object"==typeof r&&r.constructor===Object&&(l={},i[n]=l),o(r)&&o(l)&&!Array.isArray(l)?e(l,r,s,a):(s||void 0!==r)&&(i[n]=r))})},t._getValueUsingField=function(e,t,i){if(!t||!e)return;if(!i)return e[t];const n=t.split(".");let o=e;for(let e=0;e<n.length;e++){if(null==o)return;o=o[n[e]]}return o}},7990:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.AgPromise=t._isPromise=void 0,t._isPromise=function(e){return"function"==typeof e.then},function(e){e[e.IN_PROGRESS=0]="IN_PROGRESS",e[e.RESOLVED=1]="RESOLVED"}(i||(i={}));class n{static all(e){return e.length?new n(t=>{let i=e.length;const n=new Array(i);e.forEach((e,o)=>{e.then(e=>{n[o]=e,i--,0===i&&t(n)})})}):n.resolve()}static resolve(e=null){return new n(t=>t(e))}constructor(e){this.status=i.IN_PROGRESS,this.resolution=null,this.waiters=[],e(e=>this.onDone(e),e=>this.onReject(e))}then(e){return new n(t=>{this.status===i.RESOLVED?t(e(this.resolution)):this.waiters.push(i=>t(e(i)))})}onDone(e){this.status=i.RESOLVED,this.resolution=e,this.waiters.forEach(t=>t(e))}onReject(e){}}t.AgPromise=n},4009:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._selectAllCells=void 0,t._selectAllCells=function(e){const{pinnedRowModel:t,rowModel:i}=e,[n,o]=[t?.isEmpty("top")??!0,t?.isEmpty("bottom")??!0],r=n?null:"top";let s,a;o?(s=null,a=i.getRowCount()-1):(s="bottom",a=t?.getPinnedBottomRowCount()??-1);const{visibleCols:l,rangeSvc:c}=e,d=l.allCols;c&&d?.length&&c.setCellRange({rowStartIndex:0,rowStartPinned:r,rowEndIndex:a,rowEndPinned:s})}},7766:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._escapeString=void 0;const i=/[&<>"']/g,n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};t._escapeString=function(e,t){if(null==e)return null;const o=e.toString().toString();return t?o:o.replace(i,e=>n[e])}},8179:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.validateApiFunction=void 0;const n=i(2043),o="clientSide",r="serverSide",s="infinite",a={onGroupExpandedOrCollapsed:[o],refreshClientSideRowModel:[o],isRowDataEmpty:[o],forEachLeafNode:[o],forEachNodeAfterFilter:[o],forEachNodeAfterFilterAndSort:[o],resetRowHeights:[o],applyTransaction:[o],applyTransactionAsync:[o],flushAsyncTransactions:[o],getBestCostNodeSelection:[o],getServerSideSelectionState:[r],setServerSideSelectionState:[r],applyServerSideTransaction:[r],applyServerSideTransactionAsync:[r],applyServerSideRowData:[r],retryServerSideLoads:[r],flushServerSideAsyncTransactions:[r],refreshServerSide:[r],getServerSideGroupLevelState:[r],refreshInfiniteCache:[s],purgeInfiniteCache:[s],getInfiniteRowCount:[s],isLastRowIndexKnown:[s,r],expandAll:[o,r],collapseAll:[o,r],onRowHeightChanged:[o,r],setRowCount:[s,r],getCacheBlockState:[s,r]},l={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};t.validateApiFunction=function(e,t,i){const o=l[e];if(o){const{version:i,new:r,old:s,message:a}=o,l=s??e;return(...e)=>{const o=r?`Please use ${r} instead. `:"";return(0,n._warnOnce)(`Since ${i} api.${l} is deprecated. ${o}${a??""}`),t.apply(t,e)}}const r=a[e];return r?(...o)=>{const s=i.rowModel.getType();if(r.includes(s))return t.apply(t,o);(0,n._errorOnce)(`api.${e} can only be called when gridOptions.rowModelType is ${r.join(" or ")}`)}:t}},8732:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ENTERPRISE_MODULE_NAMES=void 0,t.ENTERPRISE_MODULE_NAMES={AdvancedFilter:1,AllEnterprise:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1}},5205:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MISSING_MODULE_REASONS=t.getError=t.AG_GRID_ERRORS=t.moduleImportMsg=void 0;const n=i(1298),o=i(8732),r=i(7764),s=i(342),a=i(1389);function l(e,t=!1){return!t||"IntegratedCharts"!==e&&"Sparklines"!==e?`${e}Module`:`${e}Module.with(AgChartsEnterpriseModule)`}t.moduleImportMsg=e=>{const t=e.map(e=>`import { ${l(e)} } from '${o.ENTERPRISE_MODULE_NAMES[e]?"ag-grid-enterprise":"ag-grid-community"}';`);if(e.some(e=>"IntegratedCharts"===e||"Sparklines"===e)){const e="import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';";t.push(e)}return`import { ModuleRegistry } from 'ag-grid-community'; \n${t.join(" \n")} \n\nModuleRegistry.registerModules([ ${e.map(e=>l(e,!0)).join(", ")} ]); \n\nFor more info see: ${r.baseDocLink}/modules/`};const c=({reasonOrId:e,moduleName:i,gridScoped:n,gridId:r,rowModelType:a,additionalText:c,isUmd:d})=>{const u=(0,s.resolveModuleNames)(i,a),h="string"==typeof e?e:t.MISSING_MODULE_REASONS[e];if(d)return function(e,t){const i=t.filter(e=>"IntegratedCharts"===e||"Sparklines"===e);let n="";const r=globalThis?.agCharts;return!r&&i.length>0?n=`Unable to use ${e} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.\n`:t.some(e=>o.ENTERPRISE_MODULE_NAMES[e])&&(n+=`Unable to use ${e} as that requires the ag-grid-enterprise script to be included.\n`),n}(h,u);const p=u.filter(e=>"IntegratedCharts"===e||"Sparklines"===e),g=p.length>0?`${p.map(e=>l(e)).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"";return`Unable to use ${h} as ${u.length>1?"one of "+u.map(e=>l(e)).join(", "):l(u[0])} is not registered${n?" for gridId: "+r:""}. ${g} Check if you have registered the module:\n\n${(0,t.moduleImportMsg)(u)}`+(c?` \n\n${c}`:"")},d=e=>`${e} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.\n\nimport { AgChartsEnterpriseModule } from 'ag-charts-enterprise';\nimport { ModuleRegistry } from 'ag-grid-community';\nimport { ${e} } from 'ag-grid-enterprise';\n    \nModuleRegistry.registerModules([${e}.with(AgChartsEnterpriseModule)]);\n    `;t.AG_GRID_ERRORS={1:()=>"`rowData` must be an array",2:({nodeId:e})=>`Duplicate node id '${e}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id:e})=>`Could not find row id=${e}, data item was not found for this id`,5:({data:e})=>["Could not find data item as object was not found.",e," Consider using getRowId to help the Grid find matching row data"],6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key:e})=>`Unknown key for navigation ${e}`,9:({variable:e})=>`No value for ${e?.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e?.defaultValue} will be used and updated when styles load.`,10:({eventType:e})=>`As of v33, the '${e}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey:e})=>["column ",e," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix:e})=>`Row IDs cannot start with ${e}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:e})=>["value should be either a string or a function",e],16:({expression:e,params:t,e:i})=>["Processing of the expression failed","Expression = ",e,"Params = ",t,"Exception = ",i],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>'You may want to configure via a callback to avoid setup race conditions:\n                     "alignedGrids: () => [linkedGrid]"',21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key:e})=>`${e} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id:e})=>["The getRowId callback must return a string. The ID ",e," is being cast to a string."],26:({fnName:e,preDestroyLink:t})=>`Grid API function ${e}() cannot be called as the grid has been destroyed.\n Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.\n To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`,27:({fnName:e,module:t})=>`API function '${e}' not registered to module '${t}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex:e})=>["tried to insert columns in invalid location, toIndex = ",e,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key:e})=>`the column type '${e}' is a default column type and cannot be overridden.`,35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:({t:e})=>"colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes",37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:({iconName:e})=>`provided icon '${e}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e:e,method:t})=>`${e}\n${(e=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${e}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`)(t)}`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName:e})=>`As of v33, icon '${e}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType:e})=>`The data type definition ${e} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType:e})=>`Missing data type definition - "${e}"`,48:({property:e})=>`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`,49:({methodName:e})=>`Framework component is missing the method ${e}()`,50:({compName:e})=>`Could not find component ${e}, did you forget to configure this component?`,51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:e})=>`setFilterModel() - no column found for colId: ${e}`,63:({colId:e})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${e}`,64:({colId:e})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${e}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter:e})=>`getGui method from filter returned ${e}; it should be a DOM element.`,70:({newFilter:e})=>"Grid option quickFilterText only supports string inputs, received: "+typeof e,71:()=>"debounceMs is ignored when apply button is present",72:({keys:e})=>["ignoring FilterOptionDef as it doesn't contain one of ",e],73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType:e})=>['Unexpected type of filter "',e,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param:e})=>`DateFilter ${e} is not a number`,83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index:e})=>`Invalid row index for ensureIndexVisible: ${e}`,89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:({methodName:e})=>`AnimationFrameService.${e} called but animation frames are off`,93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:e,pageSizeSet:t,pageSizesSet:i,pageSizeOptions:n})=>`'paginationPageSize=${e}'${t?"":" (default value)"}, but ${e} is not included in${i?"":" the default"} paginationPageSizeSelector=[${n?.join(", ")}].`,95:({paginationPageSizeOption:e,paginationPageSizeSelector:t})=>`Either set '${t}' to an array that includes ${e} or to 'false' to disable the page size selector.`,96:({id:e,data:t})=>["Duplicate ID",e,"found for pinned row with data",t,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:e})=>`cellEditor for column ${e} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",100:({rowModelType:e})=>`selectAll only available when rowModelType='clientSide', ie not ${e}`,101:({propertyName:e,componentName:t,agGridDefaults:i,jsComps:o})=>{const r=[],s=[...Object.keys(i??[]).filter(e=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(e)),...Object.keys(o??[])],a=(0,n._fuzzySuggestions)({inputValue:t,allSuggestions:s,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return r.push(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.\n`),a.length>0&&r.push(`         Did you mean: [${a.slice(0,3)}]?\n`),r.push("If using a custom component check it has been registered correctly."),r},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:e,param:t})=>`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`,105:({e:e})=>["chart rendering failed",e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${r.baseDocLink}/theming-migration/`,107:({key:e,value:t})=>`Invalid value for theme param ${e} - ${t}`,108:({e:e})=>["chart update failed",e],109:({aggFuncOrString:e})=>`unrecognised aggregation function ${e}`,110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component:e})=>`Could not find component with name of ${e}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId:e})=>`Unable to update chart. No active chart found with ID: ${e}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange:e})=>`unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`,128:({feature:e})=>`${e} is only available if using 'multiRow' selection mode.`,129:({feature:e,rowModel:t})=>`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:e})=>`icon '${e}' function should return back a string or a dom object`,134:({iconName:e})=>`Did not find icon '${e}'`,135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:({type:e,currentChartType:t})=>`Unable to update chart as a '${e}' update type is not permitted on a ${t}.`,138:({chartType:e})=>`invalid chart type supplied: ${e}`,139:({customThemeName:e})=>`a custom chart theme with the name ${e} has been supplied but not added to the 'chartThemes' list`,140:({name:e})=>`no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel:e})=>`'${e}' is not a valid Chart Tool Panel name`,144:({type:e})=>`Invalid charts data panel group name supplied: '${e}'`,145:({group:e})=>`As of v32, only one charts customize panel group can be expanded at a time. '${e}' will not be expanded.`,146:({comp:e})=>`Unable to instantiate component '${e}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:e})=>`Invalid charts customize panel group name supplied: '${e}'`,148:({group:e})=>`invalid chartGroupsDef config '${e}'`,149:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:({chartType:e})=>`invalid chartType '${e}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:e})=>`no 'seriesChartType' found for colId = '${e}', defaulting to 'line'.`,153:({chartDataType:e})=>`unexpected chartDataType value '${e}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:e})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${e}`,155:({option:e})=>`'${e}' is not a valid Chart Toolbar Option`,156:({panel:e})=>`Invalid panel in chartToolPanelsDef.panels: '${e}'`,157:({unrecognisedGroupIds:e})=>["unable to find group(s) for supplied groupIds:",e],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id:e,dataType:t})=>`Unrecognized data type for excel export [${e}.dataType=${t}]`,163:({featureName:e})=>`Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.\n Please turn off ${e} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds:e})=>["unable to find groups for these supplied groupIds:",e],167:({unrecognisedColIds:e})=>["unable to find columns for these supplied colIds:",e],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy:e})=>`invalid cellRendererParams.refreshStrategy = ${e} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group:e})=>`invalid chartGroupsDef config '${e}'`,174:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,175:({menuTabName:e,itemsToConsider:t})=>[`Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of `,t],176:({key:e})=>`unknown menu item type ${e}`,177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:({colId:e})=>`column ${e} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData:e,childNodeData:t})=>["duplicate group keys for row data, keys should be unique",[e,t]],185:({data:e})=>["getDataPath() should not return an empty path",[e]],186:({rowId:e,rowData:t,duplicateRowsData:i})=>["duplicate group keys for row data, keys should be unique",e,t,...i??[]],187:({rowId:e,firstData:t,secondData:i})=>[`Duplicate node id ${e}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",t,"second instance",i],188:()=>"getRowId callback must be provided for Server Side Row Model selection to work correctly.",189:({startRow:e})=>`invalid value ${e} for startRow, the value should be >= 0`,190:({rowGroupId:e,data:t})=>["null and undefined values are not allowed for server side row model keys",e?`column = ${e}`:"","data is ",t],194:({method:e})=>`calling gridApi.${e}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:e})=>`selecting just ${e?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key:e})=>`Provided ids must be of string type. Invalid id provided: ${e}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:c,201:({rowModelType:e})=>`Could not find row model for rowModelType = ${e}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText:e})=>`Unable to display rows as duplicate row ids (${e}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${r.baseDocLink}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key:e})=>`unable to lookup Tool Panel as invalid key supplied: ${e}`,215:({key:e,defaultByKey:t})=>`the key ${e} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(t??{}).join(",")}`,216:({name:e})=>`Missing component for '${e}'`,217:({invalidColIds:e})=>["unable to find grid columns for the supplied colDef(s):",e],218:({property:e,defaultOffset:t})=>`${e} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`,219:({property:e})=>`Property ${e} does not exist on the target object.`,220:({lineDash:e})=>`'${e}' is not a valid 'lineDash' option.`,221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString:e})=>`unrecognised menu item ${e}`,229:({index:e})=>["invalid row index for ensureIndexVisible: ",e],230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName:e})=>`Framework component is missing the method ${e}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:e})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${e}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>"Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. \nPlease rebuild the selection state and reapply it.",248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:e})=>`AG Grid: Unable to create chart as an invalid chartType = '${e}' was supplied.`,252:()=>"cannot get grid to draw rows when it is in the middle of drawing rows. \nYour code probably called a grid API method while the grid was in the render stage. \nTo overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). \nTo see what part of your code that caused the refresh check this stacktrace.",253:({version:e})=>["Illegal version string: ",e],254:()=>"Cannot create chart: no chart themes available.",255:({point:e})=>`Lone surrogate U+${e?.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>d("IntegratedChartsModule"),258:()=>d("SparklinesModule"),259:({part:e})=>`the argument to theme.withPart must be a Theming API part object, received: ${e}`,260:({propName:e,compName:t,gridScoped:i,gridId:n,rowModelType:o})=>c({reasonOrId:`AG Grid '${e}' component: ${t}`,moduleName:a.USER_COMP_MODULES[t],gridId:n,gridScoped:i,rowModelType:o}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId:e})=>`Unable to infer chart data type for column '${e}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${r.baseDocLink}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection"},t.getError=function(e,i){const n=t.AG_GRID_ERRORS[e];if(!n)return[`Missing error text for error id ${e}!`];const o=n(i),s=`\nSee ${(0,r.getErrorLink)(e,i)}`;return Array.isArray(o)?o.concat(s):[o,s]},t.MISSING_MODULE_REASONS={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"}},7764:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._preInitErrMsg=t._errMsg=t._logPreInitErr=t._error=t._warn=t.getErrorLink=t.toStringWithNullUndefined=t.setValidationDocLink=t.suppressAllLogs=t.provideValidationServiceLogger=t.baseDocLink=void 0;const n=i(3263),o=i(2043),r=i(7205),s="_version_";let a=null,l=!1;function c(e,t,i){return a?.getConsoleMessage(e,t)??[g(e,t,i)]}function d(e,t,i,n){l||e(`error #${t}`,...c(t,i,n))}function u(e){let t=e;return e instanceof Error?t=e.toString():"object"==typeof e&&(t=function(e){if(!e)return String(e);const t={};for(const i of Object.keys(e))"object"!=typeof e[i]&&"function"!=typeof e[i]&&(t[i]=e[i]);return JSON.stringify(t)}(e)),t}function h(e,t){return`${e}?${t.toString()}`}function p(e,i){const n=new URLSearchParams;if(n.append(s,r.VERSION),i)for(const e of Object.keys(i))n.append(e,u(i[e]));const o=`${t.baseDocLink}/errors/${e}`,a=h(o,n);return a.length<=2e3?a:function(e,t){const i=Array.from(t.entries()).sort((e,t)=>t[1].length-e[1].length);let n=h(e,t);for(const[o,r]of i){if(o===s)continue;const i=n.length-2e3;if(i<=0)break;const a="...",l=i+a.length,c=r.length-l>100?r.slice(0,r.length-l)+a:r.slice(0,100)+a;t.set(o,c),n=h(e,t)}return n}(o,n)}t.baseDocLink=`${n.BASE_URL}/javascript-data-grid`,t.provideValidationServiceLogger=function(e){a=e},t.suppressAllLogs=function(){l=!0},t.setValidationDocLink=function(e){t.baseDocLink=e},t.toStringWithNullUndefined=function(e){return void 0===e?"undefined":null===e?"null":e},t.getErrorLink=p;const g=(e,t,i)=>`${i?i+" \n":""}Visit ${p(e,t)}${i?"":" \n  Alternatively register the ValidationModule to see the full message in the console."}`;function f(e,t){const i=t[0];return`error #${i} `+c(i,t[1],e).join(" ")}t._warn=function(...e){d(o._warnOnce,e[0],e[1])},t._error=function(...e){d(o._errorOnce,e[0],e[1])},t._logPreInitErr=function(e,t,i){d(o._errorOnce,e,t,i)},t._errMsg=function(...e){return f(void 0,e)},t._preInitErrMsg=function(...e){return f("\n",e)}},342:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.resolveModuleNames=t.MODULES_FOR_ROW_MODELS=t.RESOLVABLE_MODULE_NAMES=void 0;const i=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"];t.RESOLVABLE_MODULE_NAMES={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:i,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...i,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...i,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},t.MODULES_FOR_ROW_MODELS={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"},t.resolveModuleNames=function(e,i){const n=[];return(Array.isArray(e)?e:[e]).forEach(e=>{const o=t.RESOLVABLE_MODULE_NAMES[e];o?o.forEach(e=>{const o=t.MODULES_FOR_ROW_MODELS[e];o&&o!==i||n.push(e)}):n.push(e)}),n}},4842:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.COL_DEF_VALIDATORS=void 0;const n=i(8125),o=i(7764),r=i(1389),s={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0};t.COL_DEF_VALIDATORS=()=>({objectName:"colDef",allProperties:Object.keys(s),docsUrl:"column-properties/",deprecations:{checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},validations:{aggFunc:{module:"SharedAggregation"},autoHeight:{supportedRowModels:["clientSide","serverSide"],module:"RowAutoHeight"},cellClass:{module:"CellStyle"},cellClassRules:{module:"CellStyle"},cellEditor:({cellEditor:e,editable:t})=>{if(!t)return null;if("string"==typeof e){const t=r.USER_COMP_MODULES[e];if(t)return{module:t}}return{module:"CustomEditor"}},cellRenderer:({cellRenderer:e})=>{if("string"!=typeof e)return null;const t=r.USER_COMP_MODULES[e];return t?{module:t}:null},cellRendererParams:{validate:e=>null==e.rowGroup&&null==e.rowGroupIndex&&"agGroupCellRenderer"!==e.cellRenderer||!("checkbox"in e.cellRendererParams)?null:'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.'},cellStyle:{module:"CellStyle"},children:()=>(0,t.COL_DEF_VALIDATORS)(),columnChooserParams:{module:"ColumnMenu"},contextMenuItems:{module:"ContextMenu"},dndSource:{module:"DragAndDrop"},dndSourceOnRowDrag:{module:"DragAndDrop"},editable:({editable:e,cellEditor:t})=>e&&!t?{module:"TextEditor"}:null,enableCellChangeFlash:{module:"HighlightChanges"},enablePivot:{module:"SharedPivot"},enableRowGroup:{module:"SharedRowGrouping"},enableValue:{module:"SharedAggregation"},filter:({filter:e})=>{if(e&&"string"!=typeof e&&"boolean"!=typeof e)return{module:"CustomFilter"};if("string"==typeof e){const t=r.USER_COMP_MODULES[e];if(t)return{module:t}}return{module:"ColumnFilter"}},floatingFilter:{module:"ColumnFilter"},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,{rowSelection:t})=>"multiple"===t?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>"multiple"===t?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>"multiple"===t?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerTooltip:{module:"Tooltip"},headerValueGetter:{validate:e=>{const t=e.headerValueGetter;return"function"==typeof t||"string"==typeof t?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:({icons:e})=>{if(e){if(e.smallDown)return(0,o._errMsg)(262);if(e.smallLeft)return(0,o._errMsg)(263);if(e.smallRight)return(0,o._errMsg)(264)}return null}},mainMenuItems:{module:"ColumnMenu"},menuTabs:e=>{const t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(e=>t.includes(e))?{module:"ColumnMenu"}:null},pivot:{module:"SharedPivot"},pivotIndex:{module:"SharedPivot"},rowDrag:{module:"RowDrag"},rowGroup:{module:"SharedRowGrouping"},rowGroupIndex:{module:"SharedRowGrouping"},sortingOrder:{validate:e=>{const t=e.sortingOrder;if(Array.isArray(t)&&t.length>0){const e=t.filter(e=>!n.DEFAULT_SORTING_ORDER.includes(e));if(e.length>0)return`sortingOrder must be an array with elements from [${n.DEFAULT_SORTING_ORDER.map(o.toStringWithNullUndefined).join()}], currently it includes [${e.map(o.toStringWithNullUndefined).join()}]`}else if(!Array.isArray(t)||t.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${t}`;return null}},tooltipField:{module:"Tooltip"},tooltipValueGetter:{module:"Tooltip"},type:{validate:e=>{const t=e.type;return t instanceof Array?t.some(e=>"string"!=typeof e)?"if colDef.type is supplied an array it should be of type 'string[]'":null:"string"==typeof t?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(e,{suppressRowTransform:t})=>t?null:"colDef.rowSpan requires suppressRowTransform to be enabled."},spanRows:{module:"CellSpan",dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[!1,void 0]},rowSpan:{required:[!1,void 0]}},validate:(e,{rowSelection:t,cellSelection:i,suppressRowTransform:n,enableCellSpan:o,pagination:r,rowDragEntireRow:s,enableCellTextSelection:a})=>"object"==typeof t&&"singleRow"===t?.mode&&t?.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":i?"colDef.spanRows is not supported with cellSelection.":n?"colDef.spanRows is not supported with suppressRowTransform.":o?r?"colDef.spanRows is not supported with pagination.":s?"colDef.spanRows is not supported with rowDragEntireRow.":a?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."}}})},711:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GRID_OPTIONS_VALIDATORS=void 0;const n=i(3080),o=i(7274),r=i(920),s=i(8125),a=i(6996),l=i(7764);function c(e,t,i,n=Number.MAX_VALUE){return"number"==typeof t||null==t?null==t||t>=i&&t<=n?null:n===Number.MAX_VALUE?`${e}: value should be greater than or equal to ${i}`:`${e}: value should be between ${i} and ${n}`:`${e}: value should be a number`}const d=()=>{const e={alignedGrids:{module:"AlignedGrids"},allowContextMenuWithControlKey:{module:"ContextMenu"},autoSizePadding:{validate:({autoSizePadding:e})=>c("autoSizePadding",e,0)},autoSizeStrategy:{module:"ColumnAutoSize"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate:({cacheBlockSize:e})=>c("cacheBlockSize",e,1)},cacheOverflowSize:{validate:({cacheOverflowSize:e})=>c("cacheOverflowSize",e,1)},cellSelection:{module:"CellSelection"},columnHoverHighlight:{module:"ColumnHover"},datasource:{supportedRowModels:["infinite"],module:"InfiniteRowModel"},doesExternalFilterPass:{module:"ExternalFilter"},domLayout:{validate:e=>{const t=e.domLayout,i=["autoHeight","normal","print"];return t&&!i.includes(t)?`domLayout must be one of [${i.join()}], currently it's ${t}`:null}},editType:{module:"EditCore"},enableAdvancedFilter:{module:"AdvancedFilter"},enableCharts:{module:"IntegratedCharts"},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{module:"CellSelection",dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},rowNumbers:{module:"RowNumbers"},getContextMenuItems:{module:"ContextMenu"},getLocaleText:{module:"Locale"},getMainMenuItems:{module:"ColumnMenu"},getRowClass:{module:"RowStyle"},getRowStyle:{module:"RowStyle"},grandTotalRow:{module:"SharedRowGrouping"},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},icons:{validate:({icons:e})=>{if(e){if(e.smallDown)return(0,l._errMsg)(262);if(e.smallLeft)return(0,l._errMsg)(263);if(e.smallRight)return(0,l._errMsg)(264)}return null}},infiniteInitialRowCount:{validate:({infiniteInitialRowCount:e})=>c("infiniteInitialRowCount",e,1)},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},initialState:{module:"GridState"},isExternalFilterPresent:{module:"ExternalFilter"},keepDetailRowsCount:{validate:({keepDetailRowsCount:e})=>c("keepDetailRowsCount",e,1)},localeText:{module:"Locale"},masterDetail:{module:"SharedMasterDetail"},pagination:{module:"Pagination"},paginationPageSize:{validate:({paginationPageSize:e})=>c("paginationPageSize",e,1)},paginationPageSizeSelector:{validate:e=>{const t=e.paginationPageSizeSelector;return"boolean"==typeof t||null==t||t.length?null:"'paginationPageSizeSelector' cannot be an empty array.\n                    If you want to hide the page size selector, set paginationPageSizeSelector to false."}},pinnedTopRowData:{module:"PinnedRow"},pinnedBottomRowData:{module:"PinnedRow"},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}},module:"SharedPivot"},pivotPanelShow:{module:"RowGroupingPanel"},quickFilterText:{supportedRowModels:["clientSide"],module:"QuickFilter"},rowBuffer:{validate:({rowBuffer:e})=>c("rowBuffer",e,0)},rowClass:{validate:e=>"function"==typeof e.rowClass?"rowClass should not be a function, please use getRowClass instead":null,module:"RowStyle"},rowClassRules:{module:"RowStyle"},rowData:{supportedRowModels:["clientSide"],module:"ClientSideRowModel"},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{treeData:{required:[!1,void 0]},pagination:{required:[!1,void 0]}},module:"RowDrag"},rowGroupPanelShow:{module:"RowGroupingPanel"},rowSelection:{validate:({rowSelection:e})=>e&&"string"==typeof e?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':e&&"object"!=typeof e?"Expected `RowSelectionOptions` object for the `rowSelection` property.":e&&"multiRow"!==e.mode&&"singleRow"!==e.mode?`Selection mode "${e.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null,module:"SharedRowSelection"},rowStyle:{validate:e=>{const t=e.rowStyle;return t&&"function"==typeof t?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null},module:"RowStyle"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"ServerSideRowModel"},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate:({serverSideInitialRowCount:e})=>c("serverSideInitialRowCount",e,1)},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sideBar:{module:"SideBar"},sortingOrder:{validate:e=>{const t=e.sortingOrder;if(Array.isArray(t)&&t.length>0){const e=t.filter(e=>!s.DEFAULT_SORTING_ORDER.includes(e));if(e.length>0)return`sortingOrder must be an array with elements from [${s.DEFAULT_SORTING_ORDER.map(l.toStringWithNullUndefined).join()}], currently it includes [${e.map(l.toStringWithNullUndefined).join()}]`}else if(!Array.isArray(t)||t.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${t}`;return null}},statusBar:{module:"StatusBar"},tooltipHideDelay:{validate:e=>e.tooltipHideDelay&&e.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:e=>e.tooltipShowDelay&&e.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],module:"SharedTreeData",validate:e=>{const t=e.rowModelType??"clientSide";switch(t){case"clientSide":{const{treeDataChildrenField:t,getDataPath:i}=e;return t||i?t&&i?"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.":null:"treeData requires either 'treeDataChildrenField' or 'getDataPath' in the clientSide row model."}case"serverSide":{const i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:i}}return null}},treeDataChildrenField:{module:"SharedTreeData"},undoRedoCellEditing:{module:"UndoRedoEdit"},valueCache:{module:"ValueCache"},viewportDatasource:{supportedRowModels:["viewport"],module:"ViewportRowModel"},viewportRowModelBufferSize:{validate:({viewportRowModelBufferSize:e})=>c("viewportRowModelBufferSize",e,0)},viewportRowModelPageSize:{validate:({viewportRowModelPageSize:e})=>c("viewportRowModelPageSize",e,1)},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},enableCellSpan:{module:"CellSpan"}},t={};return r._BOOLEAN_GRID_OPTIONS.forEach(e=>{t[e]={expectedType:"boolean"}}),r._NUMBER_GRID_OPTIONS.forEach(e=>{t[e]={expectedType:"number"}}),(0,a._mergeDeep)(t,e),t};t.GRID_OPTIONS_VALIDATORS=()=>({objectName:"gridOptions",allProperties:[...r._ALL_GRID_OPTIONS,...n._ALL_EVENTS.map(e=>(0,o._getCallbackForEvent)(e))],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:{suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."}},validations:d()})},9938:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEPRECATED_ICONS_V33=t.ICON_MODULES=t.ICON_VALUES=void 0,t.ICON_VALUES={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1},t.ICON_MODULES={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore"},t.DEPRECATED_ICONS_V33=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"])},3781:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MENU_ITEM_MODULES=void 0,t.MENU_ITEM_MODULES={pinSubMenu:"PinnedColumn",pinLeft:"PinnedColumn",pinRight:"PinnedColumn",clearPinned:"PinnedColumn",valueAggSubMenu:"SharedAggregation",autoSizeThis:"ColumnAutoSize",autoSizeAll:"ColumnAutoSize",rowGroup:"SharedRowGrouping",rowUnGroup:"SharedRowGrouping",resetColumns:"CommunityCore",expandAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],contractAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],copy:"Clipboard",copyWithHeaders:"Clipboard",copyWithGroupHeaders:"Clipboard",cut:"Clipboard",paste:"Clipboard",export:["CsvExport","ExcelExport"],csvExport:"CsvExport",excelExport:"ExcelExport",separator:"CommunityCore",pivotChart:"IntegratedCharts",chartRange:"IntegratedCharts",columnFilter:"ColumnFilter",columnChooser:"ColumnMenu",sortAscending:"Sort",sortDescending:"Sort",sortUnSort:"Sort"}},1389:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.USER_COMP_MODULES=void 0,t.USER_COMP_MODULES={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar"}},5010:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationModule=void 0;const n=i(7205),o=i(5147);t.ValidationModule={moduleName:"Validation",version:n.VERSION,beans:[o.ValidationService]}},5147:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._fuzzyCheckStrings=t.ValidationService=void 0;const n=i(8731),o=i(2891),r=i(2132),s=i(2043),a=i(1298),l=i(8179),c=i(5205),d=i(7764),u=i(4842),h=i(711),p=i(9938),g=i(3781),f=i(1389);class m extends n.BeanStub{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,(0,d.provideValidationServiceLogger)(this)}postConstruct(){this.processGridOptions(this.gridOptions)}warnOnInitialPropertyUpdate(e,t){"api"===e&&o.INITIAL_GRID_OPTION_KEYS[t]&&(0,d._warn)(22,{key:t})}processGridOptions(e){this.processOptions(e,(0,h.GRID_OPTIONS_VALIDATORS)())}validateApiFunction(e,t){return(0,l.validateApiFunction)(e,t,this.beans)}missingUserComponent(e,t,i,n){const o=f.USER_COMP_MODULES[t];o?this.gos.assertModuleRegistered(o,`AG Grid '${e}' component: ${t}`):(0,d._warn)(101,{propertyName:e,componentName:t,agGridDefaults:i,jsComps:n})}checkRowEvents(e){b.has(e)&&(0,d._warn)(10,{eventType:e})}validateIcon(e){if(p.DEPRECATED_ICONS_V33.has(e)&&(0,d._warn)(43,{iconName:e}),p.ICON_VALUES[e])return;const t=p.ICON_MODULES[e];t?(0,d._error)(200,{reasonOrId:`icon '${e}'`,moduleName:t,gridScoped:(0,r._areModulesGridScoped)(),gridId:this.beans.context.getGridId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."}):(0,d._warn)(134,{iconName:e})}validateMenuItem(e){const t=g.MENU_ITEM_MODULES[e];t&&this.gos.assertModuleRegistered(t,`menu item '${e}'`)}isProvidedUserComp(e){return!!f.USER_COMP_MODULES[e]}validateColDef(e,t,i){!i&&this.beans.dataTypeSvc?.isColPendingInference(t)||this.processOptions(e,(0,u.COL_DEF_VALIDATORS)())}processOptions(e,t){const{validations:i,deprecations:n,allProperties:o,propertyExceptions:r,objectName:a,docsUrl:l}=t;o&&!0!==this.gridOptions.suppressPropertyNamesCheck&&this.checkProperties(e,[...r??[],...Object.keys(n)],o,a,l);const c=new Set,d=t=>{const n=i[t];if(n){if("function"==typeof n){const i=n(e,this.gridOptions,this.beans);if(!i)return;if("objectName"in i){const n=e[t];return Array.isArray(n)?void n.forEach(e=>{this.processOptions(e,i)}):void this.processOptions(e[t],i)}return i}return n}};Object.keys(e).forEach(t=>{const i=n[t];if(i){const{message:e,version:n}=i;c.add(`As of v${n}, ${String(t)} is deprecated. ${e??""}`)}const o=e[t];if(null==o||!1===o)return;const r=d(t);if(!r)return;const{module:s,dependencies:a,validate:l,supportedRowModels:u,expectedType:h}=r;if(h){const e=typeof o;if(e!==h)return void c.add(`${String(t)} should be of type '${h}' but received '${e}' (${o}).`)}if(u){const e=this.gridOptions.rowModelType??"clientSide";if(!u.includes(e))return void c.add(`${String(t)} is not supported with the '${e}' row model. It is only valid with: ${u.join(", ")}.`)}if(s){const e=Array.isArray(s)?s:[s];let i=!0;if(e.forEach(e=>{this.gos.assertModuleRegistered(e,String(t))||(i=!1)}),!i)return}if(a){const i=this.checkForRequiredDependencies(t,a,e);if(i)return void c.add(i)}if(l){const t=l(e,this.gridOptions,this.beans);if(t)return void c.add(t)}}),c.size>0&&c.forEach(e=>{(0,s._warnOnce)(e)})}checkForRequiredDependencies(e,t,i){const n=Object.entries(t).filter(([e,t])=>{const n=i[e];return!t.required.includes(n)});return 0===n.length?null:n.map(([t,i])=>`'${String(e)}' requires '${t}' to be one of [${i.required.map(e=>null===e?"null":void 0===e?"undefined":e).join(", ")}]. ${i.reason??""}`).join("\n           ")}checkProperties(e,t,i,n,o){const r=v(Object.getOwnPropertyNames(e),["__ob__","__v_skip","__metadata__",...t,...i],i),a=Object.keys(r);for(const e of a){let t=`invalid ${n} property '${e}' did you mean any of these: ${r[e].slice(0,8).join(", ")}.`;i.includes("context")&&(t+=`\nIf you are trying to annotate ${n} with application data, use the '${n}.context' property instead.`),(0,s._warnOnce)(t)}if(a.length>0&&o){const e=this.beans.frameworkOverrides.getDocLink(o);(0,s._warnOnce)(`to see all the valid ${n} properties please check: ${e}`)}}getConsoleMessage(e,t){return(0,c.getError)(e,t)}}function v(e,t,i){const n={},o=e.filter(e=>!t.some(t=>t===e));return o.length>0&&o.forEach(e=>n[e]=(0,a._fuzzySuggestions)({inputValue:e,allSuggestions:i}).values),n}t.ValidationService=m,t._fuzzyCheckStrings=v;const b=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"])},7486:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getCellValue=t.expireValueCache=void 0;const n=i(4422),o=i(7766);t.expireValueCache=function(e){e.valueCache?.expire()},t.getCellValue=function(e,t){const{colKey:i,rowNode:r,useFormatter:s}=t,a=e.colModel.getColDefCol(i)??e.colModel.getCol(i);if((0,n._missing)(a))return null;const l=e.valueSvc.getValueForDisplay(a,r);return s?e.valueSvc.formatValue(a,r,l)??(0,o._escapeString)(l,!0):l}},2878:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeDetectionService=void 0;const n=i(8731),o=i(7274),r=i(6800);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;(0,o._isClientSideRowModel)(e,t)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:i}=this.beans;if("paste"===e.source||t.get("suppressChangeDetection"))return;const n=e.node,o=[n],s=this.clientSideRowModel,a=s?.rootNode;if(a&&!n.isRowPinned()){const i=t.get("aggregateOnlyChangedColumns"),l=new r.ChangedPath(i,a);l.addParentNode(n.parent,[e.column]),s.doAggregate(l),l.forEachChangedNodeDepthFirst(e=>{o.push(e)})}i.refreshCells({rowNodes:o})}}t.ChangeDetectionService=s},5751:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionService=void 0;const n=i(8731),o=i(7764);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if("string"==typeof e)return this.evaluateExpression(e,t);(0,o._error)(15,{expression:e})}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return(0,o._error)(16,{expression:e,params:t,e:i}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const i=this.createFunctionBody(e),n=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",i);return t[e]=n,n}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}}t.ExpressionService=r},3913:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueCache=void 0;const n=i(8731);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){const e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){if(this.active){const n=this.cacheVersion;e.__cacheVersion!==n&&(e.__cacheVersion=n,e.__cacheData={}),e.__cacheData[t]=i}}getValue(e,t){if(this.active&&e.__cacheVersion===this.cacheVersion)return e.__cacheData[t]}}t.ValueCache=o},6431:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellApiModule=t.ChangeDetectionModule=t.ExpressionModule=t.ValueCacheModule=void 0;const n=i(7205),o=i(7486),r=i(2878),s=i(5751),a=i(3913);t.ValueCacheModule={moduleName:"ValueCache",version:n.VERSION,beans:[a.ValueCache],apiFunctions:{expireValueCache:o.expireValueCache}},t.ExpressionModule={moduleName:"Expression",version:n.VERSION,beans:[s.ExpressionService]},t.ChangeDetectionModule={moduleName:"ChangeDetection",version:n.VERSION,beans:[r.ChangeDetectionService]},t.CellApiModule={moduleName:"CellApi",version:n.VERSION,apiFunctions:{getCellValue:o.getCellValue}}},5736:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueService=void 0;const n=i(8731),o=i(7274),r=i(4422),s=i(6996),a=i(7764);class l extends n.BeanStub{constructor(){super(...arguments),this.beanName="valueSvc",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=(0,o._isServerSideRowModel)(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=e=>this.callColumnCellValueChangedHandler(e);this.eventSvc.addEventListener("cellValueChanged",e,!0),this.addDestroyFunc(()=>this.eventSvc.removeEventListener("cellValueChanged",e,!0)),this.addManagedPropertyListener("treeData",e=>this.isTreeData=e.currentValue)}getValueForDisplay(e,t){const i=t.leafGroup&&this.colModel.isPivotMode(),n=t.group&&t.expanded&&!t.footer&&!i,o=this.gos.get("groupSuppressBlankHeader");if(!n||o)return this.getValue(e,t);let r=!1;const s=this.gos.get("groupTotalRow");r="function"!=typeof s?!!s:!!this.gos.getCallback("groupTotalRow")({node:this});const a=n&&r;return this.getValue(e,t,a)}getValue(e,t,i=!1){if(this.initialised||this.init(),!t)return;const n=e.getColDef(),o=n.field,r=e.getColId(),a=t.data;let l;const c=t.groupData&&void 0!==t.groupData[r],d=!i&&t.aggData&&void 0!==t.aggData[r],u=this.isSsrm&&i&&!!e.getColDef().aggFunc,h=this.isSsrm&&t.footer&&t.field&&(!0===e.getColDef().showRowGroup||e.getColDef().showRowGroup===t.field);if(this.isTreeData&&d?l=t.aggData[r]:this.isTreeData&&n.valueGetter?l=this.executeValueGetter(n.valueGetter,a,e,t):this.isTreeData&&o&&a?l=(0,s._getValueUsingField)(a,o,e.isFieldContainsDots()):c?l=t.groupData[r]:d?l=t.aggData[r]:n.valueGetter?l=this.executeValueGetter(n.valueGetter,a,e,t):h?l=(0,s._getValueUsingField)(a,t.field,e.isFieldContainsDots()):o&&a&&!u&&(l=(0,s._getValueUsingField)(a,o,e.isFieldContainsDots())),this.cellExpressions&&"string"==typeof l&&0===l.indexOf("=")){const i=l.substring(1);l=this.executeValueGetter(i,a,e,t)}if(null==l){const i=this.getOpenedGroup(t,e);if(null!=i)return i}return l}parseValue(e,t,i,n){const s=e.getColDef(),a=s.valueParser;if((0,r._exists)(a)){const r=(0,o._addGridCommonParams)(this.gos,{node:t,data:t?.data,oldValue:n,newValue:i,colDef:s,column:e});return"function"==typeof a?a(r):this.expressionSvc?.evaluate(a,r)}return i}getDeleteValue(e,t){return(0,r._exists)(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t))??null:null}formatValue(e,t,i,n,r=!0){let s,a=null;const l=e.getColDef();if(n?s=n:r&&(s=l.valueFormatter),s){const n=(0,o._addGridCommonParams)(this.gos,{value:i,node:t,data:t?t.data:null,colDef:l,column:e});a="function"==typeof s?s(n):this.expressionSvc?this.expressionSvc.evaluate(s,n):null}else if(l.refData)return l.refData[i]||"";return null==a&&Array.isArray(i)&&(a=i.join(", ")),a}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup"))return;if(!t.getColDef().showRowGroup)return;const i=t.getColDef().showRowGroup;let n=e.parent;for(;null!=n;){if(n.rowGroupColumn&&(!0===i||i===n.rowGroupColumn.getColId()))return n.key;n=n.parent}}setValue(e,t,i,n){const s=this.colModel.getColDefCol(t);if(!e||!s)return!1;(0,r._missing)(e.data)&&(e.data={});const{field:l,valueSetter:c}=s.getColDef();if((0,r._missing)(l)&&(0,r._missing)(c))return(0,a._warn)(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(s,i))return(0,a._warn)(135),!1;const d=(0,o._addGridCommonParams)(this.gos,{node:e,data:e.data,oldValue:this.getValue(s,e),newValue:i,colDef:s.getColDef(),column:s});let u;if(d.newValue=i,u=(0,r._exists)(c)?"function"==typeof c?c(d):this.expressionSvc?.evaluate(c,d):this.setValueUsingField(e.data,l,i,s.isFieldContainsDots()),void 0===u&&(u=!0),!u)return!1;e.resetQuickFilterAggregateText(),this.valueCache?.onDataChanged();const h=this.getValue(s,e);return this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:d.column,colDef:d.colDef,data:e.data,node:e,oldValue:d.oldValue,newValue:h,value:h,source:n}),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;"function"==typeof t&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,i,n){if(!t)return!1;let o=!1;if(n){const n=t.split(".");let r=e;for(;n.length>0&&r;){const e=n.shift();0===n.length?(o=r[e]===i,o||(r[e]=i)):r=r[e]}}else o=e[t]===i,o||(e[t]=i);return!o}executeValueGetterWithValueCache(e,t,i,n){const o=i.getColId(),r=this.valueCache.getValue(n,o);if(void 0!==r)return r;const s=this.executeValueGetterWithoutValueCache(e,t,i,n);return this.valueCache.setValue(n,o,s),s}executeValueGetterWithoutValueCache(e,t,i,n){const r=(0,o._addGridCommonParams)(this.gos,{data:t,node:n,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,n)});let s;return s="function"==typeof e?e(r):this.expressionSvc?.evaluate(e,r),s}getValueCallback(e,t){const i=this.colModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),n=e.getColDef().keyCreator;let r=i;return n&&(r=n((0,o._addGridCommonParams)(this.gos,{value:i,colDef:e.getColDef(),column:e,node:t,data:t.data}))),"string"==typeof r||null==r||(r=String(r),"[object Object]"===r&&(0,a._warn)(121)),r}}t.ValueService=l},6511:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.VanillaFrameworkOverrides=void 0;const n=i(3263),o=i(2979),r=i(7990),s=i(7764);t.VanillaFrameworkOverrides=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e(),this.baseDocLink=`${n.BASE_URL}/${this.frameworkName}-data-grid`,(0,s.setValidationDocLink)(this.baseDocLink)}setInterval(e,t){return new r.AgPromise(i=>{i(window.setInterval(e,t))})}addEventListener(e,t,i,n){let r={};if("object"==typeof n?r=n:"boolean"==typeof n&&(r={capture:n}),null==r.passive){const e=(0,o.getPassiveStateForEvent)(t);null!=e&&(r.passive=e)}e.addEventListener(t,i,r)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`${this.baseDocLink}${e?`/${e}`:""}`}}},7205:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="33.1.0"},7321:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgAbstractField=void 0;const n=i(5230),o=i(3507),r=i(2747);class s extends r.AgAbstractLabel{constructor(e,t,i,n){super(e,t,i),this.className=n}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i}=this.config;null!=e&&this.setWidth(e),null!=t&&this.setValue(t),null!=i&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();null==i||""==i||null!==(0,n._getAriaLabel)(e)?(0,n._setAriaLabelledBy)(e,""):(0,n._setAriaLabelledBy)(e,t??"")}setAriaLabel(e){return(0,n._setAriaLabel)(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return(0,o._setFixedWidth)(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e||(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"})),this}}t.AgAbstractField=s},8085:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgAbstractInputField=void 0;const n=i(5230),o=i(3507),r=i(7321),s=i(8020);class a extends r.AgAbstractField{constructor(e,t,i="text",n="input"){super(e,e?.template??`\n            <div role="presentation">\n                <div data-ref="eLabel" class="ag-input-field-label"></div>\n                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <${n} data-ref="eInput" class="ag-input-field-input"></${n}>\n                </div>\n            </div>`,[],t),this.inputType=i,this.displayFieldTag=n,this.eLabel=s.RefPlaceholder,this.eWrapper=s.RefPlaceholder,this.eInput=s.RefPlaceholder}postConstruct(){super.postConstruct(),this.setInputType();const{eLabel:e,eWrapper:t,eInput:i,className:n}=this;e.classList.add(`${n}-label`),t.classList.add(`${n}-input-wrapper`),i.classList.add(`${n}-input`),this.addCssClass("ag-input-field"),i.id=i.id||`ag-${this.getCompId()}-input`;const{inputName:o,inputWidth:r}=this.config;null!=o&&this.setInputName(o),null!=r&&this.setInputWidth(r),this.addInputListeners(),this.activateTabIndex([i])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return(0,o._setElementWidth)(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){return this.eInput.maxLength=e,this}setInputPlaceholder(e){return(0,o._addOrRemoveAttribute)(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return(0,n._setAriaLabel)(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return(0,o._setDisabled)(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(!0===e)(0,o._addOrRemoveAttribute)(this.eInput,"autocomplete",null);else{const t="string"==typeof e?e:"off";(0,o._addOrRemoveAttribute)(this.eInput,"autocomplete",t)}return this}}t.AgAbstractInputField=a},2178:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.agAbstractLabelCSS=void 0,t.agAbstractLabelCSS=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}"},2747:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgAbstractLabel=void 0;const n=i(5230),o=i(3507),r=i(2178),s=i(8020);class a extends s.Component{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(r.agAbstractLabelCSS)}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:n,disabled:o}=this.config;null!=o&&this.setDisabled(o),null!=e&&this.setLabelSeparator(e),null!=t&&this.setLabel(t),null!=i&&this.setLabelWidth(i),this.setLabelAlignment(n||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;(0,o._clearElement)(t),"string"==typeof e?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),""===e?((0,o._setDisplayed)(t,!1),(0,n._setAriaRole)(t,"presentation")):((0,o._setDisplayed)(t,!0),(0,n._setAriaRole)(t,null))}setLabelSeparator(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this}getLabelId(){const e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e||(this.label=e,this.refreshLabel()),this}setLabelAlignment(e){const t=this.getGui().classList;return t.toggle("ag-label-align-left","left"===e),t.toggle("ag-label-align-right","right"===e),t.toggle("ag-label-align-top","top"===e),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return null==this.label||(0,o._setElementWidth)(this.eLabel,e),this}setDisabled(e){e=!!e;const t=this.getGui();return(0,o._setDisabled)(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}}t.AgAbstractLabel=a},66:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgCheckboxSelector=t.AgCheckbox=void 0;const n=i(8085);class o extends n.AgAbstractInputField{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;"boolean"==typeof e&&this.setReadOnly(e),"boolean"==typeof t&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return void 0===this.selected||!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){return this.getInputElement().name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected="boolean"==typeof e?e:void 0;const i=this.eInput;i.checked=e,i.indeterminate=void 0===e,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const n=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:n.id,name:n.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",!0===e),t.toggle("ag-indeterminate",null==e)}}t.AgCheckbox=o,t.AgCheckboxSelector={selector:"AG-CHECKBOX",component:o}},3611:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgInputDateFieldSelector=t.AgInputDateField=void 0;const n=i(7274),o=i(8667),r=i(9827),s=i(3507),a=i(5946);class l extends a.AgInputTextField{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=(0,o._isBrowserSafari)();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){(0,n._getActiveDomElement)(this.beans)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?(0,r._serialiseDate)(e??null,!1)??void 0:e;return this.min===t||(this.min=t,(0,s._addOrRemoveAttribute)(this.eInput,"min",t)),this}setMax(e){const t=e instanceof Date?(0,r._serialiseDate)(e??null,!1)??void 0:e;return this.max===t||(this.max=t,(0,s._addOrRemoveAttribute)(this.eInput,"max",t)),this}setStep(e){return this.step===e||(this.step=e,(0,s._addOrRemoveAttribute)(this.eInput,"step",e)),this}getDate(){if(this.eInput.validity.valid)return(0,r._parseDateTimeFromString)(this.getValue())??void 0}setDate(e,t){this.setValue((0,r._serialiseDate)(e??null,!1),t)}}t.AgInputDateField=l,t.AgInputDateFieldSelector={selector:"AG-INPUT-DATE-FIELD",component:l}},8792:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgInputNumberFieldSelector=t.AgInputNumberField=void 0;const n=i(7274),o=i(3507),r=i(4422),s=i(5946);class a extends s.AgInputTextField{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();const e=this.eInput;this.addManagedListeners(e,{blur:()=>{const t=parseFloat(e.value),i=isNaN(t)?"":this.normalizeValue(t.toString());this.value!==i&&this.setValue(i)},wheel:this.onWheel.bind(this)}),e.step="any";const{precision:t,min:i,max:n,step:o}=this.config;"number"==typeof t&&this.setPrecision(t),"number"==typeof i&&this.setMin(i),"number"==typeof n&&this.setMax(n),"number"==typeof o&&this.setStep(o)}onWheel(e){(0,n._getActiveDomElement)(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){if(""===e)return"";null!=this.precision&&(e=this.adjustPrecision(e));const t=parseFloat(e),{min:i,max:n}=this;return null!=i&&t<i?e=i.toString():null!=n&&t>n&&(e=n.toString()),e}adjustPrecision(e,t){const i=this.precision;if(null==i)return e;if(t){const t=parseFloat(e).toFixed(i);return parseFloat(t).toString()}const n=String(e).split(".");if(n.length>1){if(n[1].length<=i)return e;if(i>0)return`${n[0]}.${n[1].slice(0,i)}`}return n[0]}setMin(e){return this.min===e||(this.min=e,(0,o._addOrRemoveAttribute)(this.eInput,"min",e)),this}setMax(e){return this.max===e||(this.max=e,(0,o._addOrRemoveAttribute)(this.eInput,"max",e)),this}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e||(this.step=e,(0,o._addOrRemoveAttribute)(this.eInput,"step",e)),this}setValue(e,t){return this.setValueOrInputValue(e=>super.setValue(e,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(e=>super.setValue(e,!0),e=>{this.eInput.value=e},e)}setValueOrInputValue(e,t,i){if((0,r._exists)(i)){let n=this.isScientificNotation(i);if(n&&this.eInput.validity.valid)return e(i);if(n||(n=(i=this.adjustPrecision(i))!=this.normalizeValue(i)),n)return t(i)}return e(i)}getValue(){const e=this.eInput;if(!e.validity.valid)return;const t=e.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(e){return"string"==typeof e&&e.includes("e")}}t.AgInputNumberField=a,t.AgInputNumberFieldSelector={selector:"AG-INPUT-NUMBER-FIELD",component:a}},6209:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgInputTextAreaSelector=t.AgInputTextArea=void 0;const n=i(8085);class o extends n.AgAbstractInputField{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}}t.AgInputTextArea=o,t.AgInputTextAreaSelector={selector:"AG-INPUT-TEXT-AREA",component:o}},5946:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgInputTextFieldSelector=t.AgInputTextField=void 0;const n=i(4422),o=i(6466),r=i(8085);class s extends r.AgAbstractInputField{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){const i=this.eInput;return i.value!==e&&(i.value=(0,n._exists)(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`);this.addManagedListeners(this.eInput,{keydown:t=>{(0,o._isEventFromPrintableCharacter)(t)&&t.key&&!e.test(t.key)&&t.preventDefault()},paste:t=>{const i=t.clipboardData?.getData("text");i&&i.split("").some(t=>!e.test(t))&&t.preventDefault()}})}}t.AgInputTextField=s,t.AgInputTextFieldSelector={selector:"AG-INPUT-TEXT-FIELD",component:s}},7283:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgList=void 0;const n=i(9853),o=i(7274),r=i(5230),s=i(3507),a=i(8020);class l extends a.Component{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),this.unFocusable||this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case n.KeyCode.ENTER:if(this.highlightedEl){const e=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(e)}else this.setValue(this.getValue());break;case n.KeyCode.DOWN:case n.KeyCode.UP:e.preventDefault(),this.navigate(t);break;case n.KeyCode.PAGE_DOWN:case n.KeyCode.PAGE_UP:case n.KeyCode.PAGE_HOME:case n.KeyCode.PAGE_END:e.preventDefault(),this.navigateToPage(t)}}navigate(e){const t=e===n.KeyCode.DOWN;let i;const{itemEls:o,highlightedEl:r}=this;if(r){let e=o.indexOf(r)+(t?1:-1);e=Math.min(Math.max(e,0),o.length-1),i=o[e]}else i=o[t?0:o.length-1];this.highlightItem(i)}navigateToPage(e){const{itemEls:t,highlightedEl:i}=this;if(!i||0===t.length)return;const o=t.indexOf(i),r=this.options.length-1,s=t[0].clientHeight,a=Math.floor(this.getGui().clientHeight/s);let l=-1;e===n.KeyCode.PAGE_HOME?l=0:e===n.KeyCode.PAGE_END?l=r:e===n.KeyCode.PAGE_DOWN?l=Math.min(o+a,r):e===n.KeyCode.PAGE_UP&&(l=Math.max(o-a,0)),-1!==l&&this.highlightItem(t[l])}addOptions(e){return e.forEach(e=>this.addOption(e)),this}addOption(e){const{value:t,text:i}=e,n=i||t;return this.options.push({value:t,text:n}),this.renderOption(t,n),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{(0,s._removeFromParent)(e)}),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,i)=>{(0,r._setAriaPosInSet)(t,i+1),(0,r._setAriaSetSize)(t,e.length)})}renderOption(e,t){const i=(0,o._getDocument)(this.beans),n=i.createElement("div");(0,r._setAriaRole)(n,"option"),n.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const s=i.createElement("span");n.appendChild(s),s.textContent=t,this.unFocusable||(n.tabIndex=-1),this.itemEls.push(n),this.addManagedListeners(n,{mouseover:()=>this.highlightItem(n),mousedown:t=>{t.preventDefault(),t.stopPropagation(),this.setValue(e)}}),this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getTooltipValue:()=>t,getGui:()=>n,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>s.scrollWidth>s.clientWidth})),this.getGui().appendChild(n)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(null==e)return this.reset(t),this;const i=this.options.findIndex(t=>t.value===e);if(-1!==i){const e=this.options[i];this.value=e.value,this.displayValue=e.text,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(e=>e.value===this.value);-1!==e&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!(0,s._isVisible)(e))return;this.clearHighlighted(),this.highlightedEl=e,e.classList.add(this.activeClass),(0,r._setAriaSelected)(e,!0);const t=this.getGui(),{scrollTop:i,clientHeight:n}=t,{offsetTop:o,offsetHeight:a}=e;(o+a>i+n||o<i)&&e.scrollIntoView({block:"nearest"}),this.unFocusable||e.focus()}clearHighlighted(){const e=this.highlightedEl;e&&(0,s._isVisible)(e)&&(e.classList.remove(this.activeClass),(0,r._setAriaSelected)(e,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}}t.AgList=l},4772:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.agPickerFieldCSS=void 0,t.agPickerFieldCSS=".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:disabled{opacity:.5}&.ag-picker-has-focus,&:focus-within{background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow)}}"},9497:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgPickerField=void 0;const n=i(9853),o=i(7274),r=i(5230),s=i(3507),a=i(9970),l=i(7321),c=i(4772),d=i(8020);class u extends l.AgAbstractField{constructor(e){if(super(e,e?.template||'\n            <div class="ag-picker-field" role="presentation">\n                <div data-ref="eLabel"></div>\n                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">\n                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>\n                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                </div>\n            </div>',e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=d.RefPlaceholder,this.eWrapper=d.RefPlaceholder,this.eDisplayField=d.RefPlaceholder,this.eIcon=d.RefPlaceholder,this.registerCSS(c.agPickerFieldCSS),this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:n,minPickerWidth:o,maxPickerWidth:r}=e;null!=t&&(this.pickerGap=t),this.variableWidth=!!n,null!=i&&this.setPickerMaxHeight(i),null!=o&&this.setPickerMinWidth(o),null!=r&&this.setPickerMaxWidth(r)}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:n}=this.config;if(i){const e=(0,a._createIconNoSpan)(i,this.beans);e&&this.eIcon.appendChild(e)}null!=n&&this.setInputWidth(n)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),(0,r._setAriaExpanded)(e,!1),this.ariaRole&&(0,r._setAriaRole)(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}this.skipClick?this.skipClick=!1:this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case n.KeyCode.UP:case n.KeyCode.DOWN:case n.KeyCode.ENTER:case n.KeyCode.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case n.KeyCode.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker())}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:i,pickerAriaLabelValue:n,modalPicker:r=!0},maxPickerHeight:a,minPickerWidth:l,maxPickerWidth:c,variableWidth:d,beans:u,eWrapper:h}=this,p={modal:r,eChild:e,closeOnEsc:!0,closedCallback:()=>{const e=(0,o._isNothingFocused)(u);this.beforeHidePicker(),e&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,n),anchorToElement:h};e.style.position="absolute";const g=u.popupSvc,f=g.addPopup(p);d?(l&&(e.style.minWidth=l),e.style.width=(0,s._formatSize)((0,s._getAbsoluteWidth)(h)),c&&(e.style.maxWidth=c)):(0,s._setElementWidth)(e,c??(0,s._getAbsoluteWidth)(h));const m=a??`${(0,s._getInnerHeight)(g.getPopupParent())}px`;return e.style.setProperty("max-height",m),this.alignPickerToComponent(),f.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerGap:e,config:{pickerType:t},beans:{popupSvc:i,gos:n},eWrapper:o,pickerComponent:r}=this,s=n.get("enableRtl")?"right":"left";i.positionPopupByComponent({type:t,eventSource:o,ePopup:r.getGui(),position:"under",alignSide:s,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();(0,r._setAriaExpanded)(t,e);const i=this.eWrapper.classList;i.toggle("ag-picker-expanded",e),i.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker?.()}setInputWidth(e){return(0,s._setElementWidth)(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return"number"==typeof e&&(e=`${e}px`),this.minPickerWidth=null==e?void 0:e,this}setPickerMaxWidth(e){return"number"==typeof e&&(e=`${e}px`),this.maxPickerWidth=null==e?void 0:e,this}setPickerMaxHeight(e){return"number"==typeof e&&(e=`${e}px`),this.maxPickerHeight=null==e?void 0:e,this}destroy(){this.hidePicker(),super.destroy()}}t.AgPickerField=u},7336:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgRadioButton=void 0;const n=i(66);class o extends n.AgCheckbox{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){const t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}}t.AgRadioButton=o},5310:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.agSelectCSS=void 0,t.agSelectCSS=".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}"},159:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgSelectSelector=t.AgSelect=void 0;const n=i(9853),o=i(3386),r=i(5230),s=i(7283),a=i(9497),l=i(5310);class c extends a.AgPickerField{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox",...e}),this.registerCSS(l.agSelectCSS)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:(0,o._shouldDisplayTooltip)(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:i}=this.config;null!=e&&this.addOptions(e),null!=t&&this.setValue(t,!0),i&&null==t&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){const e=this.createBean(new s.AgList("select",!0));this.listComponent=e,e.setParentComponent(this);const t=e.getAriaElement(),i=`ag-select-list-${e.getCompId()}`;t.setAttribute("id",i),(0,r._setAriaControls)(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:e=>{e?.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){const{key:t}=e;switch(t===n.KeyCode.TAB&&this.hidePicker(),t){case n.KeyCode.ENTER:case n.KeyCode.UP:case n.KeyCode.DOWN:case n.KeyCode.PAGE_UP:case n.KeyCode.PAGE_DOWN:case n.KeyCode.PAGE_HOME:case n.KeyCode.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case n.KeyCode.ESCAPE:super.onKeyDown(e);break;case n.KeyCode.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e)}}showPicker(){const e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){return e.forEach(e=>this.addOption(e)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this}setValue(e,t,i){const{listComponent:n,config:{placeholder:o},eDisplayField:r,tooltipFeature:s}=this;if(this.value===e||!n)return this;if(i||n.setValue(e,!0),n.getValue()===this.getValue())return this;let a=n.getDisplayValue();return null==a&&o&&(a=o),r.textContent=a,s?.setTooltipAndRefresh(a??null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}}t.AgSelect=c,t.AgSelectSelector={selector:"AG-SELECT",component:c}},8398:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.agToggleButtonCSS=void 0,t.agToggleButtonCSS='.ag-toggle-button{flex:none;min-width:unset;width:unset}.ag-toggle-button-input-wrapper{background-color:var(--ag-toggle-button-off-background-color);border-radius:calc(var(--ag-toggle-button-height)*.5);flex:none;height:var(--ag-toggle-button-height);max-width:var(--ag-toggle-button-width);min-width:var(--ag-toggle-button-width);position:relative;transition:background-color .1s;:where(.ag-toggle-button-input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-toggle-button-height);margin:0;max-width:var(--ag-toggle-button-width);min-width:var(--ag-toggle-button-width);opacity:0}&:before{background-color:var(--ag-toggle-button-switch-background-color);border-radius:100%;content:"";display:block;height:calc(var(--ag-toggle-button-height) - var(--ag-toggle-button-switch-inset)*2);left:var(--ag-toggle-button-switch-inset);pointer-events:none;position:absolute;top:var(--ag-toggle-button-switch-inset);transition:left .1s;width:calc(var(--ag-toggle-button-height) - var(--ag-toggle-button-switch-inset)*2)}&.ag-checked{background-color:var(--ag-toggle-button-on-background-color);&:before{left:calc(100% - var(--ag-toggle-button-height) + var(--ag-toggle-button-switch-inset))}}&:focus-within{box-shadow:var(--ag-focus-shadow)}&.ag-disabled{opacity:.5}}'},4927:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgToggleButtonSelector=t.AgToggleButton=void 0;const n=i(66),o=i(8398);class r extends n.AgCheckbox{constructor(e){super(e,"ag-toggle-button"),this.registerCSS(o.agToggleButtonCSS)}setValue(e,t){return super.setValue(e,t),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}}t.AgToggleButton=r,t.AgToggleButtonSelector={selector:"AG-TOGGLE-BUTTON",component:r}},8020:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Component=t.RefPlaceholder=void 0;const n=i(8731),o=i(1734),r=i(3507);let s=0;t.RefPlaceholder=null;class a extends n.BeanStub{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=s++,this.cssClassManager=new o.CssClassManager(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(e=>[e.selector,e])),e&&this.setTemplate(e)}preConstruct(){this.wireTemplate(this.getGui());const e="component-"+Object.getPrototypeOf(this)?.constructor?.name;this.css?.forEach(t=>this.beans.environment.addGlobalCSS(t,e))}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute("data-ref"):null}applyElementsToComponent(e,i,n,o=null){if(void 0===i&&(i=this.getDataRefAttribute(e)),i){const r=this[i];if(r===t.RefPlaceholder)this[i]=o??e;else{const e=n&&n[i];if(!this.suppressDataRefValidation&&!e)throw new Error(`data-ref: ${i} on ${this.constructor.name} with ${r}`)}}}createChildComponentsFromTags(e,t){(0,r._copyNodeList)(e.childNodes).forEach(i=>{if(!(i instanceof HTMLElement))return;const n=this.createComponentFromElement(i,e=>{e.getGui()&&this.copyAttributesFromNode(i,e.getGui())},t);if(n){if(n.addItems&&i.children.length){this.createChildComponentsFromTags(i,t);const e=Array.prototype.slice.call(i.children);n.addItems(e)}this.swapComponentForNode(n,e,i)}else i.childNodes&&this.createChildComponentsFromTags(i,t)})}createComponentFromElement(e,t,i){const n=e.nodeName,o=this.getDataRefAttribute(e),r=0===n.indexOf("AG-"),s=r?this.componentSelectors.get(n):null;let a=null;if(s){const e=i&&o?i[o]:void 0;a=new s.component(e),a.setParentComponent(this),this.createBean(a,null,t)}else if(r)throw new Error(`selector: ${n}`);return this.applyElementsToComponent(e,o,i,a),a}copyAttributesFromNode(e,t){(0,r._iterateNamedNodeMap)(e.attributes,(e,i)=>t.setAttribute(e,i))}swapComponentForNode(e,t,i){const n=e.getGui();t.replaceChild(n,i),t.insertBefore(document.createComment(i.nodeName),n),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){const t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach(e=>e.setAttribute("tabindex",t.toString()))}setTemplate(e,t,i){const n=(0,r._loadTemplate)(e);this.setTemplateFromElement(n,t,i)}setTemplateFromElement(e,t,i,n=!1){if(this.eGui=e,this.suppressDataRefValidation=n,t)for(let e=0;e<t.length;e++){const i=t[e];this.componentSelectors.set(i.selector,i)}this.wireTemplate(e,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let i=t;return null==e?null:(i||(i=this.eGui),(0,r._isNodeOrElement)(e)?{element:e,parent:i}:{element:e.getGui(),parent:i})}prependChild(e,t){const{element:i,parent:n}=this.getContainerAndElement(e,t)||{};i&&n&&n.insertAdjacentElement("afterbegin",i)}appendChild(e,t){const{element:i,parent:n}=this.getContainerAndElement(e,t)||{};i&&n&&n.appendChild(i)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:i}=t;(0,r._setVisible)(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:i}=t;(0,r._setDisplayed)(this.eGui,e,{skipAriaHidden:i});const n={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(n)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,i){this.eGui.addEventListener(e,t,i),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,t){this.cssClassManager.addOrRemoveCssClass(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}}t.Component=a},1772:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ManagedFocusFeature=t.FOCUS_MANAGED_CLASS=void 0;const n=i(9853),o=i(8731),r=i(2979),s=i(2331);t.FOCUS_MANAGED_CLASS="ag-focus-managed";class a extends o.BeanStub{constructor(e,t={}){super(),this.eFocusable=e,this.callbacks=t,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:e=>{if(e.defaultPrevented)return;const t=(0,s._findNextFocusableElement)(this.beans,this.eFocusable,!1,e.shiftKey);t&&(t.focus(),e.preventDefault())},...t}}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:i,onFocusOut:n}}=this;e.classList.add(t.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(e),i&&this.addManagedElementListeners(e,{focusin:i}),n&&this.addManagedElementListeners(e,{focusout:n})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:e=>{if(e.defaultPrevented||(0,r._isStopPropagationForAgGrid)(e))return;const{callbacks:t}=this;t.shouldStopEventPropagation(e)?(0,r._stopPropagationForAgGrid)(e):e.key===n.KeyCode.TAB?t.onTabKeyDown(e):t.handleKeyDown&&t.handleKeyDown(e)}})}}t.ManagedFocusFeature=a},3598:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PopupComponent=void 0;const n=i(8020);class o extends n.Component{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}}t.PopupComponent=o},3137:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PopupModule=void 0;const n=i(7205),o=i(3906);t.PopupModule={moduleName:"Popup",version:n.VERSION,beans:[o.PopupService]}},3906:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PopupService=void 0;const n=i(9853),o=i(8731),r=i(7274),s=i(5230),a=i(3507),l=i(2979),c=i(4422),d=i(7990),u=i(7764);var h;!function(e){e[e.vertical=0]="vertical",e[e.horizontal=1]="horizontal"}(h||(h={}));let p=0;class g extends o.BeanStub{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){return this.gos.get("popupParent")||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i,column:n,node:o,event:r}=e,s=t.getBoundingClientRect(),a=this.getParentRect();this.setAlignedTo(t,i);let l=!1;this.positionPopup({ePopup:i,keepWithinBounds:!0,updatePosition:()=>{const e=this.keepXYWithinBounds(i,s.top-a.top,h.vertical),t=i.clientWidth>0?i.clientWidth:200;l||(i.style.minWidth=`${t}px`,l=!0);const n=a.right-a.left-t;let o;return this.gos.get("enableRtl")?(o=c(),o<0&&(o=r(),this.setAlignedStyles(i,"left")),o>n&&(o=0,this.setAlignedStyles(i,"right"))):(o=r(),o>n&&(o=c(),this.setAlignedStyles(i,"right")),o<0&&(o=0,this.setAlignedStyles(i,"left"))),{x:o,y:e};function r(){return s.right-a.left-2}function c(){return s.left-a.left-t}},postProcessCallback:()=>this.callPostProcessPopup("subMenu",i,t,r instanceof MouseEvent?r:void 0,n,o)})}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:n,skipObserver:o}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:!0,skipObserver:o,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:o,eventSource:r,alignSide:s="left",position:a="over",column:l,rowNode:c,type:d}=e,u=r.getBoundingClientRect(),h=this.getParentRect();this.setAlignedTo(r,t),this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:o,updatePosition:()=>{let i,o=u.left-h.left;return"right"===s&&(o-=t.offsetWidth-u.width),"over"===a?(i=u.top-h.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),i="under"===this.shouldRenderUnderOrAbove(t,u,h,e.nudgeY||0)?u.top-h.top+u.height:u.top-t.offsetHeight-2*(n||0)-h.top),{x:o,y:i}},postProcessCallback:()=>this.callPostProcessPopup(d,t,r,null,l,c)})}shouldRenderUnderOrAbove(e,t,i,n){const o=i.bottom-t.bottom,r=t.top-i.top,s=e.offsetHeight+n;return o>s?"under":r>s||r>o?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const n=this.popupList[i],{alignedToElement:o}=n;o&&(["right","left","over","above","under"].forEach(t=>{o.classList.remove(`ag-has-popup-positioned-${t}`),e.classList.remove(`ag-popup-positioned-${t}`)}),t&&(o.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`)))}setAlignedTo(e,t){const i=this.getPopupIndex(t);-1!==i&&(this.popupList[i].alignedToElement=e)}callPostProcessPopup(e,t,i,n,o,r){const s=this.gos.getCallback("postProcessPopup");s&&s({column:o,rowNode:r,ePopup:t,type:e,eventSource:i,mouseEvent:n})}positionPopup(e){const{ePopup:t,keepWithinBounds:i,nudgeX:n,nudgeY:o,skipObserver:r,updatePosition:s}=e,l={width:0,height:0},c=(r=!1)=>{let{x:a,y:c}=s();r&&t.clientWidth===l.width&&t.clientHeight===l.height||(l.width=t.clientWidth,l.height=t.clientHeight,n&&(a+=n),o&&(c+=o),i&&(a=this.keepXYWithinBounds(t,a,h.horizontal),c=this.keepXYWithinBounds(t,c,h.vertical)),t.style.left=`${a}px`,t.style.top=`${c}px`,e.postProcessCallback&&e.postProcessCallback())};if(c(),!r){const e=(0,a._observeResize)(this.beans,t,()=>c(!0));setTimeout(()=>e(),200)}}getActivePopups(){return this.popupList.map(e=>e.element)}getParentRect(){const e=(0,r._getDocument)(this.beans);let t=this.getPopupParent();return t===e.body?t=e.documentElement:"static"===getComputedStyle(t).position&&(t=t.offsetParent),(0,a._getElementRectWithOffset)(t)}keepXYWithinBounds(e,t,i){const n=i===h.vertical,o=n?"clientHeight":"clientWidth",s=n?"top":"left",l=n?"height":"width",c=n?"scrollTop":"scrollLeft",d=(0,r._getDocument)(this.beans),u=d.documentElement,p=this.getPopupParent(),g=e.getBoundingClientRect(),f=p.getBoundingClientRect(),m=d.documentElement.getBoundingClientRect(),v=p===d.body,b=Math.ceil(g[l]),y=n?a._getAbsoluteHeight:a._getAbsoluteWidth;let w=v?y(u)+u[c]:p[o];v&&(w-=Math.abs(m[s]-f[s]));const C=w-b;return Math.min(Math.max(t,0),Math.abs(C))}addPopup(e){const t=(0,r._getDocument)(this.beans),{eChild:i,ariaLabel:n,alwaysOnTop:o,positionCallback:s,anchorToElement:a}=e;if(!t)return(0,u._warn)(122),{hideFunc:()=>{}};const l=this.getPopupIndex(i);if(-1!==l)return{hideFunc:this.popupList[l].hideFunc};this.initialisePopupPosition(i);const c=this.createPopupWrapper(i,n,!!o),d=this.addEventListenersToPopup({...e,wrapperEl:c});return s&&s(),this.addPopupToPopupList(i,c,d,a),{hideFunc:d}}initialisePopupPosition(e){const t=this.getPopupParent().getBoundingClientRect();(0,c._exists)(e.style.top)||(e.style.top=-1*t.top+"px"),(0,c._exists)(e.style.left)||(e.style.left=-1*t.left+"px")}createPopupWrapper(e,t,i){const n=this.getPopupParent(),o=document.createElement("div"),{environment:r,gos:a}=this.beans;return r.applyThemeClasses(o),o.classList.add("ag-popup"),e.classList.add(a.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||(0,s._setAriaRole)(e,"dialog"),(0,s._setAriaLabel)(e,t),o.appendChild(e),n.appendChild(o),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),o}handleThemeChange(e){if(e.themeChanged){const e=this.beans.environment;for(const t of this.popupList)e.applyThemeClasses(t.wrapper)}}addEventListenersToPopup(e){const t=this.beans,i=(0,r._getDocument)(t),o=this.getPopupParent(),{wrapperEl:s,eChild:a,closedCallback:c,afterGuiAttached:d,closeOnEsc:u,modal:h}=e;let p=!1;const g=e=>{s.contains((0,r._getActiveDomElement)(t))&&(e.key!==n.KeyCode.ESCAPE||(0,l._isStopPropagationForAgGrid)(e)||v({keyboardEvent:e}))},f=e=>v({mouseEvent:e}),m=e=>v({touchEvent:e}),v=(e={})=>{const{mouseEvent:t,touchEvent:n,keyboardEvent:r,forceHide:l}=e;(l||!this.isEventFromCurrentPopup({mouseEvent:t,touchEvent:n},a)&&!p)&&(p=!0,o.removeChild(s),i.removeEventListener("keydown",g),i.removeEventListener("mousedown",f),i.removeEventListener("touchstart",m),i.removeEventListener("contextmenu",f),this.eventSvc.removeEventListener("dragStarted",f),c&&c(t||n||r),this.removePopupFromPopupList(a))};return d&&d({hidePopup:v}),window.setTimeout(()=>{u&&i.addEventListener("keydown",g),h&&(i.addEventListener("mousedown",f),this.eventSvc.addEventListener("dragStarted",f),i.addEventListener("touchstart",m),i.addEventListener("contextmenu",f))},0),v}addPopupToPopupList(e,t,i,n){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:p++,isAnchored:!!n}),n&&this.setPopupPositionRelatedToElement(e,n)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const n=this.popupList[i];if(n.stopAnchoringPromise&&n.stopAnchoringPromise.then(e=>e&&e()),n.stopAnchoringPromise=void 0,n.isAnchored=!1,!t)return;const o=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:n.hideFunc});return n.stopAnchoringPromise=o,n.isAnchored=!0,o}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:n,ePopup:o}=e,r=n.getBoundingClientRect(),s=e=>parseInt(e.substring(0,e.length-1),10),a=(e,t)=>{const n=i[e]-r[e],a=s(o.style[e]);return{initialDiff:n,lastDiff:n,initial:a,last:a,direction:t}},l=a("top",h.vertical),c=a("left",h.horizontal),u=this.beans.frameworkOverrides;return new d.AgPromise(i=>{u.wrapIncoming(()=>{u.setInterval(()=>{const i=t.getBoundingClientRect(),r=n.getBoundingClientRect();if(0==r.top&&0==r.left&&0==r.height&&0==r.width)return void e.hidePopup();const a=(e,t)=>{const n=s(o.style[t]);e.last!==n&&(e.initial=n,e.last=n);const a=i[t]-r[t];if(a!=e.lastDiff){const i=this.keepXYWithinBounds(o,e.initial+e.initialDiff-a,e.direction);o.style[t]=`${i}px`,e.last=i}e.lastDiff=a};a(l,"top"),a(c,"left")},200).then(e=>{i(()=>{null!=e&&window.clearInterval(e)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:n}=e,o=i||n;if(!o)return!1;const r=this.getPopupIndex(t);if(-1===r)return!1;for(let e=r;e<this.popupList.length;e++){const t=this.popupList[e];if((0,l._isElementInEventPath)(t.element,o))return!0}return this.isElementWithinCustomPopup(o.target)}isElementWithinCustomPopup(e){const t=(0,r._getDocument)(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||null===e.parentElement)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),n=i.length,o=this.getWrapper(e);if(!o||n<=1||!t.contains(e))return;const r=[],s=[];for(const e of i)e!==o&&(e.classList.contains("ag-always-on-top")?s.push(e):r.push(e));const a=[],l=s.length,c=o.classList.contains("ag-always-on-top")||!l?[...r,...s,o]:[...r,o,...s];for(let e=0;e<=n;e++){const n=c[e];i[e]!==c[e]&&n!==o&&(n.querySelectorAll("div").forEach(e=>{0!==e.scrollTop&&a.push([e,e.scrollTop])}),0===e?t.insertAdjacentElement("afterbegin",n):c[e-1].insertAdjacentElement("afterend",n))}for(;a.length;){const e=a.pop();e[0].scrollTop=e[1]}}}t.PopupService=g},8332:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TabGuardComp=void 0;const n=i(8020),o=i(1017);class r extends n.Component{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new o.TabGuardFeature(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}}t.TabGuardComp=r},6:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TabGuardCtrl=t.TabGuardClassNames=void 0;const n=i(8731),o=i(7274),r=i(2331),s=i(1772);t.TabGuardClassNames={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"};class a extends n.BeanStub{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:i,eBottomGuard:n,focusTrapActive:o,forceFocusOutWhenTabGuardsAreEmpty:r,isFocusableContainer:s,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:d,onTabKeyDown:u,handleKeyDown:h,isEmpty:p,eFocusableElement:g}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=n,this.providedFocusInnerElement=a,this.eFocusableElement=g,this.focusTrapActive=!!o,this.forceFocusOutWhenTabGuardsAreEmpty=!!r,this.isFocusableContainer=!!s,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=d,this.providedOnTabKeyDown=u,this.providedHandleKeyDown=h,this.providedIsEmpty=p}postConstruct(){this.createManagedBean(new s.ManagedFocusFeature(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);if(this.skipTabGuardFocus)return void(this.skipTabGuardFocus=!1);if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():0===(0,r._findFocusableElements)(this.eFocusableElement,".ag-tab-guard").length))return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){const t=(0,o._getDocument)(this.beans),i=(0,r._findFocusableElements)(t.body,null,!0),n=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(-1===n)return;let s,a;e?(s=0,a=n):(s=n+1,a=i.length);const l=i.slice(s,a),c=this.gos.get("tabIndex");l.sort((e,t)=>{const i=parseInt(e.getAttribute("tabindex")||"0"),n=parseInt(t.getAttribute("tabindex")||"0");return n===c?1:i===c?-1:0===i?1:0===n?-1:i-n}),l[e?l.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown)return void this.providedOnTabKeyDown(e);if(this.focusTrapActive)return;if(e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=(0,r._findFocusableElements)(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),!!t.length&&(t[e?t.length-1:0].focus({preventScroll:!0}),!0)}getNextFocusableElement(e){return(0,r._findNextFocusableElement)(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}}t.TabGuardCtrl=a},1017:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TabGuardFeature=void 0;const n=i(8731),o=i(7274),r=i(5230),s=i(3507),a=i(6);class l extends n.BeanStub{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:n}=this,o=[t,i],r={setTabIndex:e=>{o.forEach(t=>null!=e?t.setAttribute("tabindex",e):t.removeAttribute("tabindex"))}};this.addTabGuards(t,i);const{focusTrapActive:s=!1,onFocusIn:l,onFocusOut:c,focusInnerElement:d,handleKeyDown:u,onTabKeyDown:h,shouldStopEventPropagation:p,isEmpty:g,forceFocusOutWhenTabGuardsAreEmpty:f,isFocusableContainer:m}=e;this.tabGuardCtrl=this.createManagedBean(new a.TabGuardCtrl({comp:r,focusTrapActive:s,eTopGuard:t,eBottomGuard:i,eFocusableElement:n,onFocusIn:l,onFocusOut:c,focusInnerElement:d,handleKeyDown:u,onTabKeyDown:h,shouldStopEventPropagation:p,isEmpty:g,forceFocusOutWhenTabGuardsAreEmpty:f,isFocusableContainer:m}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=(0,o._getDocument)(this.beans).createElement("div"),i="top"===e?a.TabGuardClassNames.TAB_GUARD_TOP:a.TabGuardClassNames.TAB_GUARD_BOTTOM;return t.classList.add(a.TabGuardClassNames.TAB_GUARD,i),(0,r._setAriaRole)(t,"presentation"),t}addTabGuards(e,t){const i=this.eFocusableElement;i.insertAdjacentElement("afterbegin",e),i.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];(0,s._clearElement)(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){(0,s._isNodeOrElement)(t)||(t=t.getGui());const{eBottomGuard:n}=this;n?n.insertAdjacentElement("beforebegin",t):e(t,i)}destroy(){const{eFocusableElement:e,eTopGuard:t,eBottomGuard:i}=this;e.removeChild(t),e.removeChild(i),super.destroy()}}t.TabGuardFeature=l},9644:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TouchListener=void 0;const n=i(5889),o=i(3276);t.TouchListener=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new n.LocalEventService,this.preventMouseClick=t;const i=this.onTouchStart.bind(this),o=this.onTouchMove.bind(this),r=this.onTouchEnd.bind(this);e.addEventListener("touchstart",i,{passive:!0}),e.addEventListener("touchmove",o,{passive:!0}),e.addEventListener("touchend",r,{passive:!1}),this.destroyFuncs.push(()=>{e.removeEventListener("touchstart",i,{passive:!0}),e.removeEventListener("touchmove",o,{passive:!0}),e.removeEventListener("touchend",r,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout(()=>{const i=this.touchStart===t;if(this.touching&&i&&!this.moved){this.moved=!0;const t={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(t)}},500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);t&&!(0,o._areEventsNear)(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const e={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=(new Date).getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const e={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}}},5608:function(e,t,i){i.r(t),i.d(t,{__addDisposableResource:function(){return N},__assign:function(){return r},__asyncDelegator:function(){return A},__asyncGenerator:function(){return x},__asyncValues:function(){return E},__await:function(){return S},__awaiter:function(){return g},__classPrivateFieldGet:function(){return R},__classPrivateFieldIn:function(){return O},__classPrivateFieldSet:function(){return I},__createBinding:function(){return m},__decorate:function(){return a},__disposeResources:function(){return F},__esDecorate:function(){return c},__exportStar:function(){return v},__extends:function(){return o},__generator:function(){return f},__importDefault:function(){return P},__importStar:function(){return M},__makeTemplateObject:function(){return T},__metadata:function(){return p},__param:function(){return l},__propKey:function(){return u},__read:function(){return y},__rest:function(){return s},__rewriteRelativeImportExtension:function(){return $},__runInitializers:function(){return d},__setFunctionName:function(){return h},__spread:function(){return w},__spreadArray:function(){return _},__spreadArrays:function(){return C},__values:function(){return b}});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var r=function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};function s(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}function a(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}function l(e,t){return function(i,n){t(i,n,e)}}function c(e,t,i,n,o,r){function s(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,l=n.kind,c="getter"===l?"get":"setter"===l?"set":"value",d=!t&&e?n.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),h=!1,p=i.length-1;p>=0;p--){var g={};for(var f in n)g[f]="access"===f?{}:n[f];for(var f in n.access)g.access[f]=n.access[f];g.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");r.push(s(e||null))};var m=(0,i[p])("accessor"===l?{get:u.get,set:u.set}:u[c],g);if("accessor"===l){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=s(m.get))&&(u.get=a),(a=s(m.set))&&(u.set=a),(a=s(m.init))&&o.unshift(a)}else(a=s(m))&&("field"===l?o.unshift(a):u[c]=a)}d&&Object.defineProperty(d,n.name,u),h=!0}function d(e,t,i){for(var n=arguments.length>2,o=0;o<t.length;o++)i=n?t[o].call(e,i):t[o].call(e);return n?i:void 0}function u(e){return"symbol"==typeof e?e:"".concat(e)}function h(e,t,i){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:i?"".concat(i," ",t):t})}function p(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function g(e,t,i,n){return new(i||(i=Promise))(function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})}function f(e,t){var i,n,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var m=Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]};function v(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||m(t,e,i)}function b(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,o,r=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function C(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n}function _(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function S(e){return this instanceof S?(this.v=e,this):new S(e)}function x(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=i.apply(e,t||[]),r=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),n[Symbol.asyncIterator]=function(){return this},n;function s(e,t){o[e]&&(n[e]=function(t){return new Promise(function(i,n){r.push([e,t,i,n])>1||a(e,t)})},t&&(n[e]=t(n[e])))}function a(e,t){try{(i=o[e](t)).value instanceof S?Promise.resolve(i.value.v).then(l,c):d(r[0][2],i)}catch(e){d(r[0][3],e)}var i}function l(e){a("next",e)}function c(e){a("throw",e)}function d(e,t){e(t),r.shift(),r.length&&a(r[0][0],r[0][1])}}function A(e){var t,i;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(i=!i)?{value:S(e[n](t)),done:!1}:o?o(t):t}:o}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=b(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(t){return new Promise(function(n,o){!function(e,t,i,n){Promise.resolve(n).then(function(t){e({value:t,done:i})},t)}(n,o,(t=e[i](t)).done,t.value)})}}}function T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var k=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},D=function(e){return D=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t},D(e)};function M(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i=D(e),n=0;n<i.length;n++)"default"!==i[n]&&m(t,e,i[n]);return k(t,e),t}function P(e){return e&&e.__esModule?e:{default:e}}function R(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)}function I(e,t,i,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,i):o?o.value=i:t.set(e,i),i}function O(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function N(e,t,i){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n,o;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],i&&(o=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:i})}else i&&e.stack.push({async:!0});return t}var L="function"==typeof SuppressedError?SuppressedError:function(e,t,i){var n=new Error(i);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function F(e){function t(t){e.error=e.hasError?new L(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var i,n=0;return function o(){for(;i=e.stack.pop();)try{if(!i.async&&1===n)return n=0,e.stack.push(i),Promise.resolve().then(o);if(i.dispose){var r=i.dispose.call(i.value);if(i.async)return n|=2,Promise.resolve(r).then(o,function(e){return t(e),o()})}else n|=1}catch(e){t(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function $(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,i,n,o,r){return i?t?".jsx":".js":!n||o&&r?n+o+"."+r.toLowerCase()+"js":e}):e}t.default={__extends:o,__assign:r,__rest:s,__decorate:a,__param:l,__esDecorate:c,__runInitializers:d,__propKey:u,__setFunctionName:h,__metadata:p,__awaiter:g,__generator:f,__createBinding:m,__exportStar:v,__values:b,__read:y,__spread:w,__spreadArrays:C,__spreadArray:_,__await:S,__asyncGenerator:x,__asyncDelegator:A,__asyncValues:E,__makeTemplateObject:T,__importStar:M,__importDefault:P,__classPrivateFieldGet:R,__classPrivateFieldSet:I,__classPrivateFieldIn:O,__addDisposableResource:N,__disposeResources:F,__rewriteRelativeImportExtension:$}}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}return i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(4769)}()}),function(){var e=function(t){var i={};return _.each(t,function(t,n){_.isPlainObject(t)?_.each(e(t),function(e,t){i[n+"."+t]=e}):i[n]=t}),i};$.i18n.load(e(window.I18n)),window.t=function(){return $.i18n._.apply($.i18n,Array.prototype.slice.call(arguments))}}(),AGN=window.AGN||(window.AGN={}),AGN.Lib=window.AGN.Lib||(window.AGN.Lib={}),AGN.Lib.WM=window.AGN.Lib.WM||(window.AGN.Lib.WM={}),AGN.Lib.Dashboard=window.AGN.Lib.Dashboard||(window.AGN.Lib.Dashboard={}),AGN.Lib.MailingContent=window.AGN.Lib.MailingContent||(window.AGN.Lib.MailingContent={}),AGN.Lib.Schedule=window.AGN.Lib.Schedule||(window.AGN.Lib.Schedule={}),AGN.Lib.LB=window.AGN.Lib.LB||(window.AGN.Lib.LB={}),AGN.Opt=window.AGN.Opt||(window.AGN.Opt={}),AGN.Opt.Fields=window.AGN.Opt.Fields||(window.AGN.Opt.Fields={}),AGN.Opt.Forms=window.AGN.Opt.Forms||(window.AGN.Opt.Forms={}),AGN.Opt.Controllers=window.AGN.Opt.Controllers||(window.AGN.Opt.Controllers={}),AGN.Opt.Templates=window.AGN.Opt.Templates||(window.AGN.Opt.Templates={}),AGN.Opt.TableCellRenderers=window.AGN.Opt.TableCellRenderers||(window.AGN.Opt.TableCellRenderers={}),AGN.Opt.TableActionsConditions=window.AGN.Opt.TableActionsConditions||(window.AGN.Opt.TableActionsConditions={}),AGN.Opt.Table=window.AGN.Opt.Table||(window.AGN.Opt.Table={filters:{},comparators:{}}),AGN.Opt.Validators=window.AGN.Opt.Validators||(window.AGN.Opt.Validators={}),AGN.Opt.Components=window.AGN.Opt.Components||(window.AGN.Opt.Components={}),AGN.url=function(e,t){return window.agnResolveRelativeUrl?(e&&"/"===e.charAt(0)&&(e=e.substring(1)),window.agnResolveRelativeUrl(e,t)):(console.error("window.agnResolveRelativeUrl is not defined"),e)},AGN.runAll=function(e){AGN.Lib.CoreInitializer.autorun(e),AGN.Lib.DomInitializer.autorun(e)},(e=>{const t=e("html");let i;Chart.register(ChartZoom),Chart.register(ChartDataLabels),Chart.defaults.color=()=>(i||(i=e("body").css("--chart-label-color")),i),Chart.defaults.maintainAspectRatio=!1,Chart.defaults.font.size=t.css("--chart-font-size"),Chart.defaults.font.family=t.css("--chart-font-family"),Chart.defaults.scale.border.display=!1,Chart.defaults.scale.grid.display=!1,Chart.controllers.bar.defaults.barPercentage=1,Chart.defaults.plugins.legend.labels.usePointStyle=!0,Chart.defaults.plugins.legend.labels.pointStyle="rectRounded",Chart.defaults.plugins.legend.position="right",Chart.defaults.plugins.tooltip.enabled=!1,Chart.defaults.plugins.tooltip.external=t=>{const{chart:i,tooltip:n}=t,o=function(t){let i=e(t.canvas).parent().find(".chart-tooltip");i.exists()||(i=e('<div class="chart-tooltip">'),e(t.canvas).parent().append(i));return i}(i);if(0===n.opacity)return void o.css("opacity",0);if(n.body){const t=n.title||[],i=n.body.map(e=>e.lines),r=e('<div class="tooltip-header">');r.append(e(`<span>${t[0]}</span>`));const s=e('<div class="tooltip-body">');i.forEach((t,i)=>{const o=n.labelColors[i],r=e("<div>"),a=e('<i class="icon icon-square">').css("color",o.backgroundColor),l=e('<span class="text-truncate">').text(t);r.append(a),r.append(l),s.append(r)}),e(o).empty(),e(o).append(r),e(o).append(s)}const r=function(e,t){const{chartArea:i,tooltip:n}=t,o=i.right-i.left,r=i.bottom-i.top,{offsetLeft:s,offsetTop:a}=t.canvas,l=s+o,c=a+r;let d=s+n.caretX,u=a+n.caretY;d+e.outerWidth()>l&&(d=l-e.outerWidth());u+e.outerHeight()>c&&(u=c-e.outerHeight());return{left:Math.max(s,d),top:Math.max(a,u)}}(o,i);o.css({opacity:1,left:r.left+"px",top:r.top+"px"})};class n extends Chart.DoughnutController{initialize(){this._actualRealValues=this.chart.data.datasets[0].data,this._exactPercentages=AGN.Lib.ChartUtils.calcExactPercentages(this._actualRealValues),this.chart.data.datasets[0].data=r(this._actualRealValues),super.initialize()}}function o(e){return e.getDatasetMeta(0).controller}function r(e){const t=AGN.Lib.ChartUtils.getTotal(e);return e.map(e=>e<=0?0:Math.max(e/t*100,1))}n.id="agnDoughnut",n.defaults=Chart.DoughnutController.defaults,n.overrides=_.merge(_.cloneDeep(Chart.DoughnutController.overrides),{plugins:{legend:{onClick:function(e,t,i){const n=o(i.chart),s=i.legendItems.map((e,i)=>t.index===i?e.hidden?n._actualRealValues[i]:0:e.hidden?0:n._actualRealValues[i]);n._exactPercentages=AGN.Lib.ChartUtils.calcExactPercentages(s),i.chart.data.datasets[0].data=r(s);(0,Chart.DoughnutController.overrides.plugins.legend.onClick)(e,t,i)}},datalabels:{color:e=>{const t=e.dataset.backgroundColor[e.dataIndex];return AGN.Lib.Helpers.getColorLuminance(t)<.57?"white":"#4B4B4B"},formatter:(e,t)=>{const i=o(t.chart)._exactPercentages[t.dataIndex],{innerRadius:n,outerRadius:r}=t.chart.getDatasetMeta(0).data[0];return(n+r)/2*(i/100*2*Math.PI)<40?"":`${i.toFixed(1)}%`}},tooltip:{callbacks:{label:e=>o(e.chart)._actualRealValues[e.dataIndex]}}}}),Chart.register(n)})(window.jQuery),function(){var e=$.ui.dialog.prototype._allowInteraction;$.ui.dialog.prototype._allowInteraction=function(t){var i=$(t.target);return!(!i.closest(".cke_dialog").length&&!i.closest(".cke_panel_frame").length)||e.apply(this,arguments)}}(),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define([],t.bind(e,e)):t(e)}("undefined"!=typeof global?global:this,function(e){if(e.CSS&&e.CSS.escape)return e.CSS.escape;var t=function(e){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var t,i=String(e),n=i.length,o=-1,r="",s=i.charCodeAt(0);++o<n;)0!=(t=i.charCodeAt(o))?r+=t>=1&&t<=31||127==t||0==o&&t>=48&&t<=57||1==o&&t>=48&&t<=57&&45==s?"\\"+t.toString(16)+" ":(0!=o||1!=n||45!=t)&&(t>=128||45==t||95==t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122)?i.charAt(o):"\\"+i.charAt(o):r+="�";return r};return e.CSS||(e.CSS={}),e.CSS.escape=t,t}),function(){var e,t;jQuery.browser=(e=navigator.userAgent.toLowerCase(),t=/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(e)||[],{browser:t[1]||"",version:t[2]||"0"}).browser}(jQuery),function(e){e.extend(!0,e.fn.dirty.prototype,{checkValues:function(t){var i=this,n=!1;this.form.find("select").each(function(t,o){var r=e(o);if(!r.is("[data-dirty-ignore]")){var s=i.isSelectFieldDirty(r);r.data(i.statuses.dataIsDirty,s),n|=s}}),this.form.find("input, textarea").each(function(t,o){var r,s=i.isRadioOrCheckbox(o),a=i.isFileInput(o),l=e(o);l.is("[data-dirty-ignore]")||(s?r=i.isCheckboxDirty(l):a?r=i.isFileInputDirty(l):l.is(".select2-input[placeholder]")||(r=i.isFieldDirty(l)),l.data(i.statuses.dataIsDirty,r),n|=r)}),n?i.setDirty():i.setClean()},saveInitialValues:function(){var t=this;this.form.find("input, select, textarea").each(function(i,n){var o=e(n);(o.attr("id")||o.attr("name"))&&o.attr("id",o.prop("tagName__"+i));var r=t.isRadioOrCheckbox(n),s=t.isFileInput(n);if(r){var a=e(n).is(":checked")?"checked":"unchecked";o.data(t.statuses.dataInitialValue,a)}else s?o.data(t.statuses.dataInitialValue,JSON.stringify(n.files)):o.data(t.statuses.dataInitialValue,o.val()||"")})},backupData:function(){var t=this,i={};return t.form.find("input, select, textarea").each(function(n,o){var r=e(o),s=r.attr("id")||r.attr("name"),a={};a[t.statuses.dataInitialValue]=r.data(t.statuses.dataInitialValue),a[t.statuses.dataIsDirty]=r.data(t.statuses.dataIsDirty),i[s]=a}),i},restoreData:function(t){var i=this;t&&i.form.find("input, select, textarea").each(function(n,o){var r=e(o),s=r.attr("id")||r.attr("name"),a=t[s];a&&(r.data(i.statuses.dataInitialValue,a[i.statuses.dataInitialValue]),r.data(i.statuses.dataIsDirty,a[i.statuses.dataIsDirty]))}),i.checkValues()},isSelectFieldDirty:function(e){var t=e.data(this.statuses.dataInitialValue)||"",i=e.val()||"";return!_.isEqual(i,t)},resetForm:function(){var t=this;this.form.find("select").each(function(i,n){var o=e(n),r=o.data(t.statuses.dataInitialValue);o.data("select2")?o.select2("val",r):o.val(r)}),this.form.find("input, textarea").each(function(i,n){var o=e(n),r=t.isRadioOrCheckbox(n),s=t.isFileInput(n);if(r){var a="checked"===o.data(t.statuses.dataInitialValue);o.prop("checked",a)}if(s)n.value="",e(n).data(t.statuses.dataInitialValue,JSON.stringify(n.files));else{var l=o.data(t.statuses.dataInitialValue);o.val(l)}}),this.checkValues()}})}(jQuery),function(e){e.fn.all?console.error("$.fn.all is already defined"):e.fn.extend({all:function(e){return this.filter(e).add(this.find(e))}}),e.fn.exists?console.error("$.fn.exists is already defined"):e.fn.extend({exists:function(){return this.length>0}}),e.fn.json?console.error("$.fn.json is already defined"):e.fn.extend({json:function(){return JSON.parse(this.html())}}),e.expr[":"].truncated=function(e){return e.scrollWidth-e.clientWidth>1||e.scrollHeight-e.clientHeight>2},e.expr[":"].truncatedAlt=function(e){const t=e.cloneNode(!0);t.style.width="auto",t.style.height="auto",t.style.position="fixed",t.style.overflow="visible",t.style.whiteSpace="nowrap",t.style.visibility="hidden",e.parentElement.appendChild(t);try{const i=t.getBoundingClientRect().width;return i>e.getBoundingClientRect().width}finally{t.remove()}}}(jQuery),function(e){e.fn.extend({ensureLoad:function(t){return this.each(function(){this.complete?t.call(this):e(this).on("load",t)})}})}(jQuery),$.extend(!0,$.inputmask.defaults.aliases,{datetime:{regex:{quartspre:new RegExp("0|1|3|4"),quartspost:new RegExp("00|15|30|45"),halfspre:new RegExp("0|3"),halfspost:new RegExp("00|30")},definitions:{q:{validator:function(e,t,i,n,o){var r=o.regex.quartspost.test(e);return!(!n&&!r)||(o.regex.quartspost.test(e[0]+"5")?{c:"5"}:{c:"0"})},cardinality:2,prevalidator:[{validator:function(e,t,i,n,o){o.regex.quartspre.test(e);if(!n){for(var r,s=parseInt(e+"0"),a=["00","15","30","45"],l=100,c=0;c<a.length;c++){var d=a[c];parsedNum=parseInt(d),Math.abs(parsedNum-s)<l&&(l=Math.abs(parsedNum-s),r=d)}return{caret:i+2,insert:[{pos:i,c:r[0]},{pos:i+1,c:r[1]}]}}return!0},cardinality:1}]},u:{validator:function(e,t,i,n,o){var r=o.regex.halfspost.test(e);return!(!n&&!r)||{c:"0"}},cardinality:2,prevalidator:[{validator:function(e,t,i,n,o){o.regex.halfspre.test(e);if(!n){for(var r,s=parseInt(e+"0"),a=["00","30"],l=100,c=0;c<a.length;c++){var d=a[c];parsedNum=parseInt(d),Math.abs(parsedNum-s)<l&&(l=Math.abs(parsedNum-s),r=d)}return{caret:i+2,insert:[{pos:i,c:r[0]},{pos:i+1,c:r[1]}]}}return!0},cardinality:1}]}}},"h:quarts t":{mask:"h:q t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:quarts":{mask:"h:q",placeholder:"hh:mm",alias:"datetime",hourFormat:"24"},"h:halfs t":{mask:"h:u t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:halfs":{mask:"h:u",placeholder:"hh:mm",alias:"datetime",hourFormat:"24"},"h:00 t":{mask:"h:00 t\\m",placeholder:"hh:00 xm",alias:"datetime",hourFormat:"12"},"h:00":{mask:"h:00",placeholder:"hh:00",alias:"datetime",hourFormat:"24"}}),$.fn.serializeObject=function(){var e={};return $.each(this.serializeArray(),function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},$.fn.serializeFormDataObject=function(){var e=this.serializeObject();return this.find("input[type=file]").each(function(){if(!$(this).is(":disabled")&&this.name){var t=this.files;if(0==t.length&&(t=[new File([],"",{type:"application/octet-stream"})]),e[this.name]){var i=e[this.name];$.isArray(i)?e[this.name]=i.concat(t):e[this.name]=[i].concat(t)}else t.length>1?e[this.name]=t:e[this.name]=t[0]}}),e},function(e){e.fn.style?console.error("$.fn.style is already defined"):e.fn.extend({style:function(t,i,n){if(void 0===i)return this.css(t);e.isFunction(i)?this.each(function(){if(this.style){var e=i.call(this,this.style.getPropertyValue(t));this.style.setProperty(t,e,n)}}):this.each(function(){this.style&&this.style.setProperty(t,i,n)})}})}(jQuery),jQuery.trim=e=>null==e?"":(e+"").trim(),$.widget("ui.dialog",$.extend({},$.ui.dialog.prototype,{_title:function(e){this.options.title||e.html("&#160;"),e.html(this.options.title)}})),AGN.Opt.Components.JsPlumbFixedBezierConnector=function(e){var t=jsPlumb.Connectors.AbstractConnector.apply(this,arguments);this.type="FixedBezierConnector",this._compute=function(e){var i="opposite"===e.anchorOrientation?2:1.5;t.addSegment(this,"Bezier",{x1:e.tx,y1:e.ty,x2:e.sx,y2:e.sy,cp1x:e.tx+e.to[0]*e.w/i,cp1y:e.ty+e.to[1]*e.h/i,cp2x:e.sx+e.so[0]*e.w/i,cp2y:e.sy+e.so[1]*e.h/i})}},_.templateSettings={evaluate:/\{\{(.+?)\}\}/g,interpolate:/\{\{=(.+?)\}\}/g,escape:/\{\{-(.+?)\}\}/g},window.onpopstate=function(){window.location.reload()},(e=>{const i=e.fn.select2.amd.require("select2/defaults");e.extend(i.defaults,{searchInputPlaceholder:"",showSearchIcon:!1,language:{noResults:function(e){return t("selects.noMatches",e||"")}}});const n=e.fn.select2.amd.require("select2/dropdown/search"),o=n.prototype.render;n.prototype.render=function(e){const t=o.apply(this,Array.prototype.slice.apply(arguments));return this.$search.attr("placeholder",this.options.get("searchInputPlaceholder")),this.options.get("showSearchIcon")&&this.$searchContainer.append('<i class="icon icon-search select2-search-icon"></i>'),t};const r=e.fn.select2.amd.require("select2/selection/search"),s=r.prototype.update;r.prototype.update=function(e,t){s.apply(this,Array.prototype.slice.apply(arguments)),this.options.get("preventPlaceholderClear")&&this.placeholder?.text&&this.$search.attr("placeholder",this.placeholder.text)},r.prototype.resizeSearch=function(){this.$search.css("width","100%")};const a=e.fn.select2.amd.require("select2/selection/single"),l=e.fn.select2.amd.require("select2/selection/multiple"),c=a.prototype.update,d=l.prototype.update;a.prototype.update=function(e,t){c.apply(this,Array.prototype.slice.apply(arguments)),this.$selection.find(".select2-selection__rendered").removeAttr("title")},l.prototype.update=function(e){d.apply(this,Array.prototype.slice.apply(arguments)),this.$selection.find(".select2-selection__choice").removeAttr("title")}})(window.jQuery),function(e,t){"function"==typeof define&&define.amd?define([],function(){return e.svg4everybody=t()}):"object"==typeof exports?module.exports=t():e.svg4everybody=t()}(this,function(){function e(e,t){if(t){var i=!e.getAttribute("viewBox")&&t.getAttribute("viewBox"),n=document.createDocumentFragment(),o=t.cloneNode(!0);for(i&&e.setAttribute("viewBox",i);o.childNodes.length;)n.appendChild(o.firstChild);e.appendChild(n)}}function t(t){t.onreadystatechange=function(){if(4===t.readyState){var i=document.createElement("x");i.innerHTML=t.responseText,t.s.splice(0).map(function(t){e(t[0],i.querySelector("#"+t[1].replace(/(\W)/g,"\\$1")))})}},t.onreadystatechange()}return function(i){i=i||{};var n=document.getElementsByTagName("use"),o="polyfill"in i?i.polyfill:/\bEdge\/12\b|\bTrident\/[567]\b|\bVersion\/7.0 Safari\b/.test(navigator.userAgent)||(navigator.userAgent.match(/AppleWebKit\/(\d+)/)||[])[1]<537,r=i.validate,s=window.requestAnimationFrame||setTimeout,a={};o&&function i(){for(var l;l=n[0];){var c=l.parentNode;if(c&&/svg/i.test(c.nodeName)){var d=l.getAttribute("xlink:href");if(o&&(!r||r(d,c,l))){var u=d.split("#"),h=u[0],p=u[1];if(c.removeChild(l),h.length){var g=a[h]=a[h]||new XMLHttpRequest;g.s||(g.s=[],g.open("GET",h),g.send()),g.s.push([c,p]),t(g)}else e(c,document.getElementById(p))}}}s(i,17)}()}}),AGN.Opt.Templates["select2-result"]="<span>{{- title ? title : text }}</span>",AGN.Opt.Templates["select2-badge-option"]='\n<div class="d-flex align-items-center gap-1">\n    {{ if (value) { }}\n        <span class="status-badge {{- element.getAttribute(\'data-badge-class\')}}"></span>\n    {{ } }}\n    <span>{{- text }}</span>\n</div>\n',AGN.Opt.Templates["input-feedback"]="\n<div class=\"form-control-feedback-message\">\n    <i class=\"icon icon-state-{{- type === 'success' ? 'success' : 'warning' }}\"></i>\n    {{ print(message); }}\n</div>\n",AGN.Opt.Templates["datepicker-btn"]='\n<button id="{{- id }}" class="btn btn-secondary">\n    <i class="icon {{- iconClass }}"></i>\n    <span class="text">{{- text }}</span>\n</button>\n',AGN.Opt.Templates.error=`\n   <div class="modal modal-alert" tabindex="-1">\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h1 class="modal-title">\n                        <i class="icon icon-state-warning"></i>\n                        {{= headline }}\n                    </h1>\n  \n                    <button type="button" class="btn-close" data-bs-dismiss="modal">\n                        <span class="sr-only">${t("defaults.cancel")}</span>\n                    </button>\n                </div>\n  \n                <div class="modal-body">\n                    <p>{{= text }}</p>\n                </div>\n                \n                <div class="modal-footer">\n                   <button class="btn btn-primary" data-bs-dismiss="modal" onclick="location.reload();">\n                        <i class="icon icon-redo"></i>\n                        <span class="text">{{= reload }}</span>\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n`,AGN.Opt.Templates["permission-denied"]='\n   <div class="modal modal-alert" tabindex="-1">\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h1 class="modal-title">\n                        <i class="icon icon-state-alert"></i>\n                        {{= title }}\n                    </h1>\n                </div>\n\n                <div class="modal-body">\n                    <p>{{= text }}</p>\n                </div>\n                \n                <div class="modal-footer">\n                     <button class="btn btn-primary" data-bs-dismiss="modal">\n                        <i class="icon icon-check"></i>\n                        <span class="text">{{= btn }}</span>\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n',AGN.Opt.Templates["autosave-restore"]=`\n  <div class="modal" tabIndex="-1" data-bs-backdrop="static">\n    <div class="modal-dialog modal-lg">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h1 class="modal-title">{{= title }}</h1>\n          <button type="button" class="btn-close" data-confirm-negative>\n            <span class="sr-only">${t("defaults.cancel")}</span>\n          </button>\n        </div>\n        <div class="modal-body">\n          <p>{{= content }}</p>\n        </div>\n  \n        <div class="modal-footer">\n            <button type="button" class="btn btn-danger" data-confirm-negative>\n              <i class="icon icon-times"></i>\n              <span>${t("defaults.no")}</span>\n            </button>\n            <button type="button" class="btn btn-primary" data-confirm-positive>\n                <i class="icon icon-check"></i>\n                <span>${t("defaults.yes")}</span>\n            </button>\n        </div>\n      </div>\n    </div>\n  </div>\n`,AGN.Opt.Templates["tooltip-template"]='\n  <div class="tooltip {{= tooltipStyle }}" role="tooltip">\n    <div class="tooltip-arrow {{= arrowStyle }}"></div>\n    <div class="tooltip-inner {{= innerStyle }}"></div>\n  </div>\n',AGN.Opt.Templates["table-footer"]=`\n {{ if (showRecordsCount === 'simple') { }}\n    <div class="table-wrapper__footer"></div>\n {{ } else { }}\n    <div class="table-wrapper__footer">\n      {{ if (showRecordsCount) { }}\n        <div class="table-wrapper__rows-selection">\n          <select data-number-of-rows class="form-control compact" data-select-options="width: 'auto', dropdownAutoWidth: true">\n            {{ _.each([20, 50, 100, 200], numberOfRows => { }}       \n              <option value="{{- numberOfRows }}" {{- pageSize == numberOfRows ? 'selected="selected"' : ''}}>{{- numberOfRows }}</option>\n            {{ }) }}\n          </select>       \n          <span>${t("defaults.rowsToDisplay")}</span>\n        </div>\n      {{ } }}\n    \n      {{ if (pagination && totalPages > 1) { }}\n        <ul class="pagination">\n          <li class="{{= currentPage == 1 ? 'disabled' : '' }}" data-js-table-page="first" role="button">\n            <span><i class="icon icon-angle-double-left"></i></span>\n          </li>\n          <li class="{{= currentPage == 1 ? 'disabled' : '' }}" data-js-table-page="prev" role="button">\n            <span><i class="icon icon-angle-left"></i></span>\n          </li>\n          {{ _.each(pageSelects, page => { }} \n            <li class="{{= page == currentPage ? 'active' : '' }}" data-js-table-page="{{= page - 1 }}" role="button">\n              <span>{{= page }}</span>\n            </li>\n          {{ }) }}\n          <li class="{{= currentPage == totalPages ? 'disabled' : '' }}" data-js-table-page="next" role="button">\n            <span><i class="icon icon-angle-right"></i></span>\n          </li>\n          <li class="{{= currentPage == totalPages ? 'disabled' : '' }}" data-js-table-page="last" role="button">\n            <span><i class="icon icon-angle-double-right"></i></span>\n          </li>\n        </ul>\n      {{ } }}\n    </div>\n {{ } }}\n`,AGN.Opt.Templates["js-table-wrapper"]=`\n  <div class="table-wrapper">\n    <div class="table-wrapper__header justify-content-end">\n        <div class="table-wrapper__controls">\n          <button type="button" class="btn" data-toggle-table-truncation>\n            <i class="icon icon-ellipsis-h"></i>\n            <span>${t("defaults.toggleTruncation")}</span>\n          </button>\n          \n          <p class="table-wrapper__entries-label">\n            <b></b>\n            <span class="text-truncate">${t("defaults.entries")}</span>\n          </p>\n        </div>\n    </div>\n  </div>\n`,AGN.Opt.Templates["session-expired"]=`\n<div class="modal modal-warning" tabindex="-1" data-bs-backdrop="static">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h1 class="modal-title">\n                    <i class="icon icon-state-warning"></i>\n                    ${t("logon.session.expired")}\n                </h1>\n            </div>\n\n            <div class="modal-body">\n                <p>${t("logon.session.notification")}</p>\n            </div>\n            \n            <div class="modal-footer">\n               <button class="btn btn-primary" data-bs-dismiss="modal">\n                  ${t("defaults.relogin")}\n              </button>\n            </div>\n        </div>\n    </div>\n</div>\n`,AGN.Opt.Templates["datetime-picker"]='\n  <div class="date-time-container">\n      <div class="date-picker-container">\n        <input type="text" class="form-control js-datepicker" value="{{- date }}" placeholder="{{- window.adminDateFormat }}" {{- extraAttrs }} />\n      </div>\n      {{ var timeMask = timeMask ? timeMask : \'h:s\' }}\n      <div class="time-picker-container">\n         <input type="text" class="form-control js-timepicker" value="{{- time }}" data-timepicker-options="mask: \'{{- timeMask }}\'" {{- extraAttrs }} />\n      </div>\n  </div>\n',AGN.Opt.Templates["plus-btn"]='\n<a href="#" class="btn btn-icon btn-primary" {{= attrs }}>\n    <i class="icon icon-plus"></i>\n</a>',AGN.Opt.Templates["trash-btn"]='\n<a href="#" class="btn btn-icon btn-danger" {{= attrs }}>\n    <i class="icon icon-trash-alt"></i>\n</a>',AGN.Opt.Templates["notification-info"]='\n  <div class="notification-simple">\n      <i class="icon icon-info-circle"></i>\n      <span>{{- message }}</span>\n  </div>\n',AGN.Opt.Templates.progress='\n  {{ if (isNaN(currentProgress) || currentProgress === true) { }}\n      <div class="progress loop" style="width: 100%"></div>\n  {{ } else { }}\n      <div class="progress">\n          <div class="progress-bar"\n                     role="progressbar"\n                     aria-valuenow="{{= currentProgress }}"\n                     aria-valuemin="0"\n                     aria-valuemax="100"\n                     style="width: {{= currentProgress }}%"></div>\n          <div class="percentage">{{= currentProgress }}%</div>\n      </div>\n  {{ } }}\n',AGN.Opt.Templates["tile-overlay"]=`\n  <div class="tile-overlay tile-overlay--{{= state }}">\n      {{ if (state === 'visible') { }}\n        <button type="button" class="btn btn-lg btn-sm-horizontal tile-overlay__btn" data-edit-tile-visibility>\n            <i class="icon icon-eye-slash"></i>\n            ${t("editableView.tile.state.visible")}\n        </button>\n      {{ } else if (state === 'hidden') { }}\n        <button type="button" class="btn btn-lg btn-sm-horizontal tile-overlay__btn" data-edit-tile-visibility>\n            <i class="icon icon-eye"></i>\n            ${t("editableView.tile.state.hidden")}\n        </button>\n      {{ } else { }}\n        <button type="button" class="btn btn-lg btn-sm-horizontal tile-overlay__btn pe-none">\n            <i class="icon icon-minus-circle"></i>\n            ${t("editableView.tile.state.main")}\n        </button>\n      {{ } }}\n  </div>\n`,AGN.Opt.Templates["deletable-table-column"]='\n  <div class="d-flex gap-1 align-items-center hidden">\n    {{ if (!permanent) { }}\n      <button type="button" class="icon-btn icon-btn--danger" data-remove-table-column>\n        <i class="icon icon-times-circle"></i>\n      </button>\n    {{ } }}\n    <span class="text-truncate">{{= text }}</span>\n  </div>\n',AGN.Opt.Templates["table-column-picker"]=`\n  <div class="dropdown dropstart hidden">\n      <button type="button" class="icon-btn icon-btn--primary" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">\n        <i class="icon icon-plus-circle"></i>\n      </button>\n      <ul class="dropdown-menu dropdown-menu--table-column mt-4">\n          <select class="form-control" multiple data-select-options="preventPlaceholderClear: true, placeholder: '${t("tables.searchOoo")}'">\n            {{ _.each(columns, col => { }}\n              <option value="{{- col.name }}" {{ col.selected ? print('selected') : print('') }}>\n                {{- col.text }}\n              </option>\n            {{ }); }}\n          </select>\n      </ul>\n  </div>\n`,AGN.Opt.Templates["multi-editor-modal"]=`\n<div class="modal modal-adaptive modal-editor">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h1 class="modal-title">{{= title }}</h1>\n                <button type="button" class="btn-close js-confirm-negative" data-bs-dismiss="modal">\n                    <span class="sr-only">${t("defaults.cancel")}</span>\n                </button>\n            </div>\n            <div class="modal-body">\n                <div class="modal-editors-container">\n                    <div data-placeholder></div>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <a href="#" class="btn btn-primary" data-apply-enlarged>\n                    <i class="icon icon-save"></i>\n                    <span class="text">{{- btnText }}</span>\n                </a>\n            </div>\n        </div>\n    </div>\n</div>\n`,AGN.Opt.Templates["mailing-locked"]=`\n<div class="modal modal-warning" tabindex="-1">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h1 class="modal-title">\n                    <i class="icon icon-state-warning"></i>\n                    {{= t('defaults.warning') }}\n                </h1>\n                \n                <button type="button" class="btn-close" data-bs-dismiss="modal">\n                  <span class="sr-only">${t("defaults.cancel")}</span>\n                </button>\n            </div>\n\n            <div class="modal-body">\n                <p>{{= t('error.mailing.exclusiveLockingFailed', username) }}</p>\n            </div>\n        </div>\n    </div>\n</div>\n`,AGN.Opt.Templates["double-select-options"]="\n{{ _.forEach(opts, (name, value) => { }}\n   {{ let isSelected = Array.isArray(valueSelected) ? valueSelected.includes(value) : value === valueSelected; }}\n    <option value=\"{{- value }}\" {{ isSelected ? print('selected') : print('') }}>\n      {{- name }}\n    </option>\n{{ }); }}\n",AGN.Opt.Templates["processing-loader"]='\n<div class="tile tile--notification tile--processing">\n  <div class="tile-header">\n    <h1 class="tile-title">\n      <i class="icon icon-sync icon-pulse"></i>\n      {{- t(\'statistic.waitProcessing\') }}\n    </h1>\n  </div>\n  <div class="tile-body">\n    <a type="button" class="btn btn-light w-100" data-form-abort data-form-target="{{- targetForm }}">\n      {{- t(\'statistic.cancelProcessing\') }}\n    </a>\n  </div>\n</div>\n',window.agnTimeZoneId&&moment.tz.setDefault(window.agnTimeZoneId),(()=>{if(!window.Jodit)return;const e={width:"100%",height:"100%",showWordsCounter:!1,showCharsCounter:!1,showPlaceholder:!1,askBeforePasteHTML:!1,toolbarAdaptive:!1,addNewLineOnDBLClick:!1,hidePoweredByJodit:!0,extraPlugins:["emm","emoji"],cleanHTML:{timeout:500,removeEmptyTags:!1,fillEmptyParagraph:!1,replaceNBSP:!1,removeEmptyElements:!1,removeEmptyAttributes:!1,removeOnError:!1,replaceOldTags:!1},link:{processPastedLink:!1},colors:{full:["#000000","#993300","#333300","#003300","#003366","#000080","#333399","#333333","#800000","#FF6600","#808000","#808080","#008080","#0000FF","#666699","#808080","#FF0000","#FF9900","#99CC00","#339966","#33CCCC","#3366FF","#800080","#999999","#FF00FF","#FFCC00","#FFFF00","#00FF00","#00FFFF","#00CCFF","#993366","#C0C0C0","#FF99CC","#FFCC99","#FFFF99","#CCFFCC","#CCFFFF","#99CCFF","#CC99FF","#FFFFFF"]},colorPickerDefaultTab:"color",wrapNodes:{emptyBlockAfterInit:!1},enter:"br",enterBlock:"div",iframe:!0,iframeSandbox:"allow-forms allow-same-origin",iframeDefaultSrc:"<html><head><title></title></head><body></body></html>",iframeStyle:"",iframeTitle:"",iframeCSSLinks:[AGN.url("/assets/jodit.css")],controls:{font:{list:{"Comic Sans MS,cursive":"Comic Sans MS"}}}};_.merge(Jodit.defaultOptions,e),Jodit.defaultOptions.controls.font.list=Object.fromEntries(Object.entries(Jodit.defaultOptions.controls.font.list).sort(([,e],[,t])=>e.localeCompare(t))),function(){const e=Jodit.defaultOptions.link.formTemplate;Jodit.defaultOptions.link.formTemplate=i=>{const n=e(i);return $(n.container).prepend(`\n        <div class="jodit-ui-block jodit-ui-block_align_left">\n          <div class="jodit-ui-input jodit-ui-block__link-type">\n            <span class="jodit-ui-input__label">${t("wysiwyg.dialogs.link.type")}</span>\n            <div class="jodit-ui-input__wrapper">\n              <select name="link_type" class="jodit-select">\n                <option value="">URL</option>\n                <option value="email">${t("wysiwyg.dialogs.link.email_type")}</option>\n                <option value="phone">${t("wysiwyg.dialogs.link.phone_type")}</option>\n              </select>\n            </div>\n          </div>\n        </div>\n      \n        <div class="jodit-ui-block jodit-ui-block_align_left" style="display: none">\n          <div class="jodit-ui-input jodit-ui-block__phone-number">\n            <span class="jodit-ui-input__label">${t("wysiwyg.dialogs.link.phone_number")} *</span>\n            <div class="jodit-ui-input__wrapper">\n              <input class="jodit-ui-input__input" name="phone-number" type="tel">\n            </div>\n          </div>\n        </div>\n      \n        <div class="jodit-ui-block jodit-ui-block_align_left" style="display: none">\n          <div class="jodit-ui-input jodit-ui-block__email-address">\n            <span class="jodit-ui-input__label">${t("wysiwyg.dialogs.link.email_address")} *</span>\n            <div class="jodit-ui-input__wrapper">\n              <input class="jodit-ui-input__input" name="email-address" type="text">\n            </div>\n          </div>\n        </div>\n      \n        <div class="jodit-ui-block jodit-ui-block_align_left" style="display: none">\n          <div class="jodit-ui-input jodit-ui-block__email-subject">\n            <span class="jodit-ui-input__label">${t("wysiwyg.dialogs.link.subject")}</span>\n            <div class="jodit-ui-input__wrapper">\n              <input class="jodit-ui-input__input" name="email-subject" type="text">\n            </div>\n          </div>\n        </div>\n      \n        <div class="jodit-ui-block jodit-ui-block_align_left" style="display: none">\n          <div class="jodit-ui-input jodit-ui-block__email-body">\n            <span class="jodit-ui-input__label">${t("wysiwyg.dialogs.link.content")}</span>\n            <div class="jodit-ui-input__wrapper">\n              <input class="jodit-ui-input__input" name="email-body" type="text">\n            </div>\n          </div>\n        </div>\n      `),n};const i=Jodit.plugins.get("link"),n=i.prototype.__generateForm,o=i.prototype.afterInit;i.prototype.afterInit=function(...e){o.apply(this,e);const[t]=e;t.e.on("dblclick.link",e=>{$(e.target).is("a")&&$(t.container).find(".jodit-toolbar-button_link button:visible").first().trigger("click")})},i.prototype.__generateForm=function(...e){const i=n.apply(this,e),o=i.validate,r=$(i.container),s=r.find(".jodit-ui-block__phone-number input"),a=r.find(".jodit-ui-block__email-address input"),l=r.find(".jodit-ui-block__email-subject input"),c=r.find(".jodit-ui-block__email-body input"),d=r.find(".jodit-ui-block__url input"),u=r.find(".jodit-ui-block__link-type select"),h=r.find('button[type="submit"]'),p=[a,l,c];function g(){h.prop("disabled",a.is(":visible")&&!a.val()||s.is(":visible")&&!s.val())}function f(e,t=!1){e.closest(".jodit-ui-block").toggle(t)}i.validate=function(...e){if(!o.apply(this,e))return!1;const i=(e,t)=>{AGN.Lib.Form.cleanFieldFeedback$(e),AGN.Lib.Form.appendFeedbackMessage(e,t),AGN.Lib.Form.markField(e)};if("email"===u.val()){const e=a.val();if(!AGN.Lib.Helpers.isValidEmail(e))return i(a,t("defaults.invalidEmail")),!1}else if(""===u.val()){const e=d.val();if(!AGN.Lib.Helpers.isUrl(e))return i(d,t("url.invalid")),!1}return!0},u.on("change",function(){[...p,s].forEach(e=>f(e)),f(d,!0);const e=$(this).val();"phone"===e?(f(s,!0),f(d)):"email"===e?(p.forEach(e=>f(e,!0)),f(d)):d.val(""),g()}),[a,l,c].forEach(e=>e.on("input",()=>{!function(){const e=a.val().trim(),t=l.val().trim(),i=c.val().trim();let n="";if(e){n=`mailto:${e}`;const o=[];t&&o.push(`subject=${encodeURIComponent(t)}`),i&&o.push(`body=${encodeURIComponent(i)}`),o.length&&(n+=`?${o.join("&")}`)}d.val(n)}(),g()})),s.on("input",function(){const e=$(this).val();d.val(e.length?`tel:${e}`:""),g()});const m=d.val();if(m.startsWith("tel:"))s.val(m.substring(4).trim()),u.val("phone").trigger("change");else if(m.startsWith("mailto:")){const e=m.substring(7),[t,i]=e.split("?",2);if(a.val(t),i){const e=new URLSearchParams(i);l.val(e.get("subject")||""),c.val(e.get("body")||"")}u.val("email").trigger("change")}return i}}()})(),(()=>{if(!window.Jodit)return;Jodit.modules.Icon.set("wrap-text-in-p",'<i class="icon icon-code"></i>');const e=new Map,i={Full:[{buttons:["cut","copy","paste"]},{buttons:["undo","redo"]},{buttons:["find","selectall","spellcheck"]},{buttons:["link","image","table","hr","symbols"]},{buttons:["font","fontsize","paragraph","brush"]},{buttons:["bold","italic","underline","strikethrough","superscript","subscript"]},{buttons:["eraser","align"]},{buttons:["ul","ol"]},{buttons:["outdent","indent"]},{buttons:["emm-tag","emoji","wrap-text-in-p"]}],Trimmed:[{buttons:["cut","copy","paste"]},{buttons:["undo","redo"]},{buttons:["find","link","symbols"]},{buttons:["bold","italic","underline","strikethrough","superscript","subscript"]},{buttons:["eraser","outdent","indent"]},{buttons:["emm-tag","emoji","wrap-text-in-p"]}],EMM:[{buttons:["cut","copy","paste"]},{buttons:["undo","redo"]},{buttons:["find","selectall"]},{buttons:["link","image","table","hr","symbols"]},{buttons:["font","fontsize","paragraph","brush"]},{buttons:["bold","italic","underline","strikethrough","superscript","subscript"]},{buttons:["eraser","align"]},{buttons:["ul","ol"]},{buttons:["outdent","indent"]},{buttons:["emm-tag","emoji","wrap-text-in-p"]}],EMC:[{buttons:["cut","copy","paste"]},{buttons:["undo","redo"]},{buttons:["find","selectall"]},{buttons:["link","symbols"]},{buttons:["font","fontsize","paragraph","brush","align"]},{buttons:["ul","ol"]},{buttons:["bold","italic","underline","strikethrough","superscript","subscript"]},{buttons:["eraser","emm-tag","emoji","wrap-text-in-p"]}]};Jodit.plugins.add("emm",n=>{n.options.buttons=i[n.options.emmToolbarType]||i.EMM,n.options.controls["emm-tag"]={icon:`<svg><use href="${AGN.url("/assets/core/images/wysiwyg/wysiwyg-icon-sprite.svg#agn_tag",!0)}"></use></svg>`,tooltip:t("wysiwyg.dialogs.agn_tags.tooltip"),exec:e=>{AGN.Lib.Confirm.request(AGN.url("/wysiwyg/dialogs/agn-tags.action")).done(t=>function(e,t){t&&(e.s.insertHTML(t),e.synchronizeValues())}(e,t))}},n.options.controls["wrap-text-in-p"]={icon:"wrap-text-in-p",tooltip:t("wysiwyg.wrapTextInP"),isDisabled:e=>e.s.isCollapsed()||Boolean(e.s.current()&&Jodit.modules.Dom.closest(e.s.current(),"p",e.editor)),exec:e=>{e.s.commitStyle({element:"p"}),e.synchronizeValues()}};const o=n.options.emmMailingId;if(e.get(o)||e.set(o,function(e){let t;return $.ajax({url:AGN.url("/wysiwyg/images/names-urls.action"),type:"GET",async:!1,data:{mi:e},success:e=>t=e}),t}(o)),o&&!window.isOpenEmm){const c=Jodit.defaultOptions.controls.image.popup;function r(e){const t=AGN.url(`/wysiwyg/image-browser.action?mailingID=${o}&editorId=${n.id}`),i=e.querySelector(".jodit-ui-form .jodit-ui-button"),r=i.cloneNode(!0);return r.classList.add("jodit-ui-button--browse-server"),r.querySelector(".jodit-ui-button__text").textContent="Browse server",r.style.marginLeft="5px",r.setAttribute("type","button"),r.setAttribute("data-popup",""),r.setAttribute("data-popup-options",`width: 1200, height: 630, url: ${t}`),i.parentNode.appendChild(r),r}n.options.controls.image.popup=function(e,t,i){const n=c.apply(this,Array.prototype.slice.apply(arguments)),o=`image-browser:selectedLink:${e.id}`;return AGN.Lib.Messaging.unsubscribe(o),n.querySelector(".jodit-ui-button--browse-server")||r(n),AGN.Lib.Messaging.subscribe(o,t=>{const i=e.s.insertImage(t);e.e.fire("openImageProperties",i)}),n}}function s(t){return t?(t=function(t,i){const n=e.get(i);if(!n)return t;const o=t.match(/https?:\/\/[\w\-._~:\/?#@!$&'()*+,;=%]+/g);if(!o)return t;const r={};return Object.keys(n).forEach(e=>{r[n[e]]=e}),o.forEach(e=>{let i=e.replace(/(\/mediapool_element)(\/\d+)?(\/\d+\/\d+\/0\/\d+)(\.\w+)?/,function(e,t,i,n){return t+n});try{i=decodeURI(i)}catch(e){console.error("Error with encoding URL: "+i)}i=i.replaceAll("&amp;","&");const n=r[i];n&&(t=t.replace(e,`[agnIMAGE name="${n}"]`))}),t.replaceAll("&amp;","&")}(t,o),AGN.Lib.Helpers.unescapeAgnTags(t)):t}if(n.options.editHTMLDocumentMode){function a(e){return""===e||"<br>"===e}function l(e){return(new DOMParser).parseFromString(e,"text/html")}n.events.on("beforeGetNativeEditorValue",function(e){if(e?.fromEmmPlugin)return"";let t=n.e.fire("beforeGetNativeEditorValue",{fromEmmPlugin:!0});return n.e.stopPropagation("beforeGetNativeEditorValue"),t=AGN.Lib.Helpers.prettifyHtml(t),s(t)}),n.events.on("beforeSetNativeEditorValue",function(e){!n.options.iframe&&!n.options.editHTMLDocumentMode||n.history.canUndo()||(e.value="")}),n.events.on("beforeSetElementValue",function(e){if(void 0===n._initialRawValue&&(n._initialRawValue=n.element.value,n._initialHasHtmlStructure=function(e){if(!(/<html[\s\S]*?>/i.test(e)&&/<head[\s\S]*?>/i.test(e)&&/<body[\s\S]*?>/i.test(e)))return!1;const t=l(e);return!!(t.documentElement&&t.head&&t.body)}(n._initialRawValue),n._initialBodyHtml=l(n._initialRawValue).body.innerHTML,n._initialHasDefaultHead=n._initialHasHtmlStructure&&function(e){const t=l(e),i=t.head;if(!i)return!1;const n=Array.from(i.children);if(1!==n.length)return!1;const o=n[0];if("title"!==o.tagName.toLowerCase())return!1;return""===o.textContent.trim()}(n._initialRawValue)),e.value===n._initialRawValue)return;const t=l(e.value),i=n.o.iframeCSSLinks.map(e=>t.head.querySelector(`link[rel="stylesheet"][href="${e}"]`)).filter(e=>!!e);i.length&&(i.forEach(e=>{const t=e.nextSibling;t?.nodeType===Node.TEXT_NODE&&""===t.textContent.trim()&&t.remove(),e.remove()}),e.value=`${n.o.iframeDoctype}\n${t.documentElement.outerHTML}`);const o=t.body.innerHTML.trim();""===n._initialRawValue.trim()&&a(o)?e.value="":n._initialHasHtmlStructure?n._initialBodyHtml.trim()===o?e.value=n._initialRawValue:n._initialHasDefaultHead&&a(o)&&(e.value=""):a(o)&&(e.value="")})}else n.events.on("afterGetValueFromEditor",e=>{e.value=s(e.value)});n.events.on("processPaste",function(e,t){if(e.clipboardData?.types?.includes("text/html"))return t.replace(/<(\w+)([^>]*)>/g,(e,t,i)=>`<${t}${i.replace(/\s+(?!href=|src=)[\w:-]+(?:=(["']).*?\1)?/g,"")}>`).replace(/<path[^>]*>\s*<\/path>/g,"").replace(/<svg[^>]*>\s*<\/svg>/g,"")}),n.events.on("beforeSetValueToEditor",function(t){return t?(t=function(t,i){const n=e.get(i);if(!n)return t;return AGN.Lib.Helpers.replaceAgnTags(t,(e,t)=>{if("agnIMAGE"===e.name&&e.attributes.name){const t=n[e.attributes.name];if(t)return encodeURI(t)}return t})}(t,o),AGN.Lib.Helpers.escapeAgnTags(t)):t})})})(),(()=>{if(!window.Jodit)return;Jodit.modules.Icon.set("smile",'<i class="icon icon-smile"></i>'),Jodit.plugins.add("emoji",e=>{let i;$.get(Jodit.BASE_PATH+"emoji.json").success(e=>i=_.groupBy(e,"group")),e.options.controls.emoji={icon:"smile",tooltip:t("wysiwyg.emoji"),popup:(e,t,n)=>(setTimeout(()=>{$(document).off("click",".jodit-emoji__symbol"),$(document).off("input",".jodit-emoji__search-input"),$(document).on("click",".jodit-emoji__symbol",function(){e.s.insertHTML($(this).text()),n()}),$(document).on("input",".jodit-emoji__search-input",function(){const e=$(this).val().toUpperCase();Object.keys(i).forEach(t=>{let n=!1;i[t].forEach(t=>{const i=!!t.keywords.find(t=>t.toUpperCase().includes(e));$(`[data-jodit-emoji-id="${t.id}"]`).toggle(i),i&&(n=!0)}),$(`[data-jodit-emoji-group="${t}"]`).toggle(n)})})},0),_.template('\n    <div class="jodit-emoji">\n      <div class="jodit-emoji__header">\n        <input type="text" placeholder="Search" class="jodit-emoji__search-input form-control">\n      </div>\n      \n      <div class="jodit-emoji__body">\n          {{ _.each(Object.keys(emojis), group => { }}\n            <div class="jodit-emoji__group" data-jodit-emoji-group="{{- group }}">\n                <h1 class="jodit-emoji__group-name">{{- t(\'wysiwyg.dialogs.emoji.groups.\' + group) }}</h1>\n                \n                <div class="jodit-emoji__group-content">\n                  {{ _.each(emojis[group], emoji => { }}\n                      <a class="jodit-emoji__symbol" data-jodit-emoji-id="{{- emoji.id }}" type="button">{{- emoji.symbol }}</a>\n                  {{ }) }}\n                </div>\n            </div>\n          {{ }) }}\n      </div>\n    </div>\n  ')({emojis:i}))}})})(),function(e,t){"function"==typeof define&&define.amd?define(["jquery","dot/doT","jquery-extendext"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery"),require("dot/doT"),require("jquery-extendext")):t(e.jQuery,e.doT)}(this,function(e,i){"use strict";var n=function(t,s){t[0].queryBuilder=this,this.$el=t,this.settings=e.extendext(!0,"replace",{},n.DEFAULTS,s),this.model=new r,this.status={id:null,generated_id:!1,group_id:0,rule_id:0,has_optgroup:!1,has_operator_optgroup:!1},this.filters=this.settings.filters,this.icons=this.settings.icons,this.operators=this.settings.operators,this.templates=this.settings.templates,this.plugins=this.settings.plugins,this.lang=null,void 0===n.regional.en&&o.error("Config",'"i18n/en.js" not loaded.'),this.lang=e.extendext(!0,"replace",{},n.regional.en,n.regional[this.settings.lang_code],this.settings.lang),!1===this.settings.allow_groups?this.settings.allow_groups=0:!0===this.settings.allow_groups&&(this.settings.allow_groups=-1),Object.keys(this.templates).forEach(function(e){this.templates[e]||(this.templates[e]=n.templates[e]),"string"==typeof this.templates[e]&&(this.templates[e]=i.template(this.templates[e]))},this),this.$el.attr("id")||(this.$el.attr("id","qb_"+Math.floor(99999*Math.random())),this.status.generated_id=!0),this.status.id=this.$el.attr("id"),this.$el.addClass("query-builder form-inline"),this.filters=this.checkFilters(this.filters),this.operators=this.checkOperators(this.operators),this.bindEvents(),this.initPlugins()};e.extend(n.prototype,{trigger:function(t){var i=new e.Event(this._tojQueryEvent(t),{builder:this});return this.$el.triggerHandler(i,Array.prototype.slice.call(arguments,1)),i},change:function(t,i){var n=new e.Event(this._tojQueryEvent(t,!0),{builder:this,value:i});return this.$el.triggerHandler(n,Array.prototype.slice.call(arguments,2)),n.value},on:function(e,t){return this.$el.on(this._tojQueryEvent(e),t),this},off:function(e,t){return this.$el.off(this._tojQueryEvent(e),t),this},once:function(e,t){return this.$el.one(this._tojQueryEvent(e),t),this},_tojQueryEvent:function(e,t){return e.split(" ").map(function(e){return e+".queryBuilder"+(t?".filter":"")}).join(" ")}}),n.types={string:"string",integer:"number",double:"number",date:"datetime",time:"datetime",datetime:"datetime",boolean:"boolean"},n.inputs=["text","number","textarea","radio","checkbox","select"],n.modifiable_options=["display_errors","allow_groups","allow_empty","default_condition","default_filter"],n.selectors={group_container:".rules-group-container",rule_container:".rule-container",filter_container:".rule-filter-container",operator_container:".rule-operator-container",value_container:".rule-value-container",error_container:".error-container",condition_container:".rules-group-header .group-conditions",rule_header:".rule-header",group_header:".rules-group-header",group_actions:".group-actions",rule_actions:".rule-actions",rules_list:".rules-group-body>.rules-list",group_btns:".btn",group_condition:".rules-group-header [name$=_cond]",rule_filter:".rule-filter-container [name$=_filter]",rule_operator:".rule-operator-container [name$=_operator]",rule_value:".rule-value-container :input:not(.icon-help)",add_rule:"[data-add=rule]",delete_rule:"[data-delete=rule]",add_group:"[data-add=group]",delete_group:"[data-delete=group]"},n.templates={},n.regional={},n.OPERATORS={equal:{type:"equal",nb_inputs:1,multiple:!1,apply_to:["string","number","datetime","boolean"]},not_equal:{type:"not_equal",nb_inputs:1,multiple:!1,apply_to:["string","number","datetime","boolean"]},in:{type:"in",nb_inputs:1,multiple:!0,apply_to:["string","number","datetime"]},not_in:{type:"not_in",nb_inputs:1,multiple:!0,apply_to:["string","number","datetime"]},less:{type:"less",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},less_or_equal:{type:"less_or_equal",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},greater:{type:"greater",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},greater_or_equal:{type:"greater_or_equal",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},between:{type:"between",nb_inputs:2,multiple:!1,apply_to:["number","datetime"]},not_between:{type:"not_between",nb_inputs:2,multiple:!1,apply_to:["number","datetime"]},begins_with:{type:"begins_with",nb_inputs:1,multiple:!1,apply_to:["string"]},not_begins_with:{type:"not_begins_with",nb_inputs:1,multiple:!1,apply_to:["string"]},contains:{type:"contains",nb_inputs:1,multiple:!1,apply_to:["string"]},not_contains:{type:"not_contains",nb_inputs:1,multiple:!1,apply_to:["string"]},ends_with:{type:"ends_with",nb_inputs:1,multiple:!1,apply_to:["string"]},not_ends_with:{type:"not_ends_with",nb_inputs:1,multiple:!1,apply_to:["string"]},is_empty:{type:"is_empty",nb_inputs:0,multiple:!1,apply_to:["string"]},is_not_empty:{type:"is_not_empty",nb_inputs:0,multiple:!1,apply_to:["string"]},is_null:{type:"is_null",nb_inputs:0,multiple:!1,apply_to:["string","number","datetime","boolean"]},is_not_null:{type:"is_not_null",nb_inputs:0,multiple:!1,apply_to:["string","number","datetime","boolean"]}},n.DEFAULTS={filters:[],plugins:[],sort_filters:!1,display_errors:!0,allow_groups:-1,allow_empty:!1,conditions:["AND","OR"],default_condition:"AND",inputs_separator:" , ",select_placeholder:"------",display_empty_filter:!0,default_filter:null,optgroups:{},default_rule_flags:{filter_readonly:!1,operator_readonly:!1,value_readonly:!1,no_delete:!1},default_group_flags:{condition_readonly:!1,no_add_rule:!1,no_add_group:!1,no_delete:!1},templates:{group:null,rule:null,filterSelect:null,operatorSelect:null,ruleValueSelect:null},lang_code:"en",lang:{},operators:["equal","not_equal","in","not_in","less","less_or_equal","greater","greater_or_equal","between","not_between","begins_with","not_begins_with","contains","not_contains","ends_with","not_ends_with","is_empty","is_not_empty","is_null","is_not_null"],icons:{add_group:"glyphicon glyphicon-plus-sign",add_rule:"glyphicon glyphicon-plus",remove_group:"glyphicon glyphicon-remove",remove_rule:"glyphicon glyphicon-remove",error:"glyphicon glyphicon-warning-sign"}},n.plugins={},n.defaults=function(t){if("object"!=typeof t)return"string"==typeof t?"object"==typeof n.DEFAULTS[t]?e.extend(!0,{},n.DEFAULTS[t]):n.DEFAULTS[t]:e.extend(!0,{},n.DEFAULTS);e.extendext(!0,"replace",n.DEFAULTS,t)},n.define=function(e,t,i){n.plugins[e]={fct:t,def:i||{}}},n.extend=function(t){e.extend(n.prototype,t)},n.prototype.initPlugins=function(){if(this.plugins){if(e.isArray(this.plugins)){var t={};this.plugins.forEach(function(e){t[e]=null}),this.plugins=t}Object.keys(this.plugins).forEach(function(t){t in n.plugins?(this.plugins[t]=e.extend(!0,{},n.plugins[t].def,this.plugins[t]||{}),n.plugins[t].fct.call(this,this.plugins[t])):o.error("Config",'Unable to find plugin "{0}"',t)},this)}},n.prototype.getPluginOptions=function(e,t){var i;if(this.plugins&&this.plugins[e]?i=this.plugins[e]:n.plugins[e]&&(i=n.plugins[e].def),i)return t?i[t]:i;o.error("Config",'Unable to find plugin "{0}"',e)},n.prototype.init=function(e){this.trigger("afterInit"),e?(this.setRules(e),delete this.settings.rules):this.setRoot(!0)},n.prototype.checkFilters=function(e){var t=[];if(e&&0!==e.length||o.error("Config","Missing filters list"),e.forEach(function(e,i){switch(e.id||o.error("Config","Missing filter {0} id",i),-1!=t.indexOf(e.id)&&o.error("Config",'Filter "{0}" already defined',e.id),t.push(e.id),e.type?n.types[e.type]||o.error("Config",'Invalid type "{0}"',e.type):e.type="string",e.input?"function"!=typeof e.input&&-1==n.inputs.indexOf(e.input)&&o.error("Config",'Invalid input "{0}"',e.input):e.input="number"===n.types[e.type]?"number":"text",e.operators&&e.operators.forEach(function(e){"string"!=typeof e&&o.error("Config","Filter operators must be global operators types (string)")}),e.field||(e.field=e.id),e.label||(e.label=e.field),e.optgroup?(this.status.has_optgroup=!0,this.settings.optgroups[e.optgroup]||(this.settings.optgroups[e.optgroup]=e.optgroup)):e.optgroup=null,e.input){case"radio":case"checkbox":(!e.values||e.values.length<1)&&o.error("Config",'Missing filter "{0}" values',e.id);break;case"select":var r=[];e.has_optgroup=!1,o.iterateOptions(e.values,function(t,i,n){r.push({value:t,label:i,optgroup:n||null}),n&&(e.has_optgroup=!0,this.settings.optgroups[n]||(this.settings.optgroups[n]=n))}.bind(this)),e.has_optgroup?e.values=o.groupSort(r,"optgroup"):e.values=r,e.placeholder&&(void 0===e.placeholder_value&&(e.placeholder_value=-1),e.values.forEach(function(t){t.value==e.placeholder_value&&o.error("Config",'Placeholder of filter "{0}" overlaps with one of its values',e.id)}))}},this),this.settings.sort_filters)if("function"==typeof this.settings.sort_filters)e.sort(this.settings.sort_filters);else{var i=this;e.sort(function(e,t){return i.translate(e.label).localeCompare(i.translate(t.label))})}return this.status.has_optgroup&&(e=o.groupSort(e,"optgroup")),e},n.prototype.checkOperators=function(t){var i=[];return t.forEach(function(r,s){"string"==typeof r?(n.OPERATORS[r]||o.error("Config",'Unknown operator "{0}"',r),t[s]=r=e.extendext(!0,"replace",{},n.OPERATORS[r])):(r.type||o.error("Config",'Missing "type" for operator {0}',s),n.OPERATORS[r.type]&&(t[s]=r=e.extendext(!0,"replace",{},n.OPERATORS[r.type],r)),void 0!==r.nb_inputs&&void 0!==r.apply_to||o.error("Config",'Missing "nb_inputs" and/or "apply_to" for operator "{0}"',r.type)),-1!=i.indexOf(r.type)&&o.error("Config",'Operator "{0}" already defined',r.type),i.push(r.type),r.optgroup?(this.status.has_operator_optgroup=!0,this.settings.optgroups[r.optgroup]||(this.settings.optgroups[r.optgroup]=r.optgroup)):r.optgroup=null},this),this.status.has_operator_optgroup&&(t=o.groupSort(t,"optgroup")),t},n.prototype.bindEvents=function(){var t=this,i=n.selectors;this.$el.on("change.queryBuilder",i.group_condition,function(){if(e(this).is(":checked")){var n=e(this).closest(i.group_container);t.getModel(n).condition=e(this).val()}}),this.$el.on("change.queryBuilder",i.rule_filter,function(){var n=e(this).closest(i.rule_container);t.getModel(n).filter=t.getFilterById(e(this).val())}),this.$el.on("change.queryBuilder",i.rule_operator,function(){var n=e(this).closest(i.rule_container);t.getModel(n).operator=t.getOperatorByType(e(this).val())}),this.$el.on("click.queryBuilder",i.add_rule,function(){var n=e(this).closest(i.group_container);t.addRule(t.getModel(n))}),this.$el.on("click.queryBuilder",i.delete_rule,function(){var n=e(this).closest(i.rule_container);t.deleteRule(t.getModel(n))}),0!==this.settings.allow_groups&&(this.$el.on("click.queryBuilder",i.add_group,function(){var n=e(this).closest(i.group_container);t.addGroup(t.getModel(n))}),this.$el.on("click.queryBuilder",i.delete_group,function(){var n=e(this).closest(i.group_container);t.deleteGroup(t.getModel(n))})),this.model.on({drop:function(e,i){i.$el.remove(),t.refreshGroupsConditions()},add:function(e,i,o,r){0===r?o.$el.prependTo(i.$el.find(">"+n.selectors.rules_list)):o.$el.insertAfter(i.rules[r-1].$el),t.refreshGroupsConditions()},move:function(e,i,o,r){i.$el.detach(),0===r?i.$el.prependTo(o.$el.find(">"+n.selectors.rules_list)):i.$el.insertAfter(o.rules[r-1].$el),t.refreshGroupsConditions()},update:function(e,i,n,o,r){if(i instanceof l)switch(n){case"error":t.updateError(i);break;case"flags":t.applyRuleFlags(i);break;case"filter":t.updateRuleFilter(i,r);break;case"operator":t.updateRuleOperator(i,r);break;case"value":t.updateRuleValue(i,r)}else switch(n){case"error":t.updateError(i);break;case"flags":t.applyGroupFlags(i);break;case"condition":t.updateGroupCondition(i,r)}}})},n.prototype.setRoot=function(t,i,o){t=void 0===t||!0===t;var r=this.nextGroupId(),s=e(this.getGroupTemplate(r,1));return s.find(n.selectors.group_btns).addClass(this.settings.readonly?"disabled":""),this.$el.append(s),this.model.root=new a(null,s),this.model.root.model=this.model,this.model.root.data=i,this.model.root.flags=e.extend({},this.settings.default_group_flags,o),this.model.root.condition=this.settings.default_condition,this.trigger("afterAddGroup",this.model.root),t&&this.addRule(this.model.root),this.model.root},n.prototype.addGroup=function(t,i,n,o){i=void 0===i||!0===i;var r=t.level+1;if(this.trigger("beforeAddGroup",t,i,r).isDefaultPrevented())return null;var s=this.nextGroupId(),a=e(this.getGroupTemplate(s,r)),l=t.addGroup(a);return l.data=n,l.flags=e.extend({},this.settings.default_group_flags,o),l.condition=this.settings.default_condition,this.trigger("afterAddGroup",l),this.trigger("rulesChanged"),i&&this.addRule(l),l},n.prototype.deleteGroup=function(e){if(e.isRoot())return!1;if(this.trigger("beforeDeleteGroup",e).isDefaultPrevented())return!1;var t=!0;return e.each("reverse",function(e){t&=this.deleteRule(e)},function(e){t&=this.deleteGroup(e)},this),t&&(e.drop(),this.trigger("afterDeleteGroup"),this.trigger("rulesChanged")),t},n.prototype.updateGroupCondition=function(t,i){t.$el.find(">"+n.selectors.group_condition).each(function(){var i=e(this);i.prop("checked",i.val()===t.condition),i.parent().toggleClass("active",i.val()===t.condition)}),this.trigger("afterUpdateGroupCondition",t,i),this.trigger("rulesChanged")},n.prototype.refreshGroupsConditions=function(){!function e(t){(!t.flags||t.flags&&!t.flags.condition_readonly)&&t.$el.find(">"+n.selectors.group_condition).prop("disabled",t.rules.length<=1).parent().toggleClass("disabled",t.rules.length<=1),t.each(null,function(t){e(t)},this)}(this.model.root)},n.prototype.addRule=function(t,i,n){if(this.trigger("beforeAddRule",t).isDefaultPrevented())return null;var o=this.nextRuleId(),r=e(this.getRuleTemplate(o)),s=t.addRule(r);return s.data=i,s.flags=e.extend({},this.settings.default_rule_flags,n),this.trigger("afterAddRule",s),this.trigger("rulesChanged"),this.createRuleFilters(s),!this.settings.default_filter&&this.settings.display_empty_filter||(s.filter=this.change("getDefaultFilter",this.getFilterById(this.settings.default_filter||this.filters[0].id),s)),s},n.prototype.deleteRule=function(e){return!e.flags.no_delete&&(!this.trigger("beforeDeleteRule",e).isDefaultPrevented()&&(e.drop(),this.trigger("afterDeleteRule"),this.trigger("rulesChanged"),!0))},n.prototype.createRuleFilters=function(t){var i=this.change("getRuleFilters",this.filters,t),o=e(this.getRuleFilterSelect(t,i));t.$el.find(n.selectors.filter_container).html(o),this.trigger("afterCreateRuleFilters",t),this.applyRuleFlags(t)},n.prototype.createRuleOperators=function(t){var i=t.$el.find(n.selectors.operator_container).empty();if(t.filter){var o=this.getOperators(t.filter),r=e(this.getRuleOperatorSelect(t,o));i.html(r),t.filter.default_operator?t.__.operator=this.getOperatorByType(t.filter.default_operator):t.__.operator=o[0],t.$el.find(n.selectors.rule_operator).val(t.operator.type),this.trigger("afterCreateRuleOperators",t,o),this.applyRuleFlags(t)}},n.prototype.createRuleInput=function(t){var i=t.$el.find(n.selectors.value_container).empty();if(t.__.value=void 0,t.filter&&t.operator&&0!==t.operator.nb_inputs){for(var o=this,r=e(),s=t.filter,a=0;a<t.operator.nb_inputs;a++){var l=e(this.getRuleInput(t,a));a>0&&i.append(this.settings.inputs_separator),i.append(l),r=r.add(l)}i.css("display",""),r.on("change "+(s.input_event||""),function(){t._updating_input||(t._updating_value=!0,t.value=o.getRuleInputValue(t),t._updating_value=!1)}),s.plugin&&r[s.plugin](s.plugin_config||{}),this.trigger("afterCreateRuleInput",t),void 0!==s.default_value?t.value=s.default_value:(t._updating_value=!0,t.value=o.getRuleInputValue(t),t._updating_value=!1),this.applyRuleFlags(t)}},n.prototype.updateRuleFilter=function(e,t){this.createRuleOperators(e),this.createRuleInput(e),e.$el.find(n.selectors.rule_filter).val(e.filter?e.filter.id:"-1"),t&&e.filter&&t.id!==e.filter.id&&(e.data=void 0),this.trigger("afterUpdateRuleFilter",e,t),this.trigger("rulesChanged")},n.prototype.updateRuleOperator=function(e,t){var i=e.$el.find(n.selectors.value_container);e.operator&&0!==e.operator.nb_inputs?(i.css("display",""),!i.is(":empty")&&t&&e.operator.nb_inputs===t.nb_inputs&&e.operator.optgroup===t.optgroup||this.createRuleInput(e)):(i.hide(),e.__.value=void 0),e.operator&&(e.$el.find(n.selectors.rule_operator).val(e.operator.type),e.__.value=this.getRuleInputValue(e)),this.trigger("afterUpdateRuleOperator",e,t),this.trigger("rulesChanged")},n.prototype.updateRuleValue=function(e,t){e._updating_value||this.setRuleInputValue(e,e.value),this.trigger("afterUpdateRuleValue",e,t),this.trigger("rulesChanged")},n.prototype.applyRuleFlags=function(e){var t=e.flags,i=n.selectors;e.$el.find(i.rule_filter).prop("disabled",t.filter_readonly),e.$el.find(i.rule_operator).prop("disabled",t.operator_readonly),e.$el.find(i.rule_value).prop("disabled",t.value_readonly),t.no_delete&&e.$el.find(i.delete_rule).remove(),this.trigger("afterApplyRuleFlags",e)},n.prototype.applyGroupFlags=function(e){var t=e.flags,i=n.selectors;e.$el.find(">"+i.group_condition).prop("disabled",t.condition_readonly).parent().toggleClass("readonly",t.condition_readonly),t.no_add_rule&&e.$el.find(i.add_rule).remove(),t.no_add_group&&e.$el.find(i.add_group).remove(),t.no_delete&&e.$el.find(i.delete_group).remove(),this.trigger("afterApplyGroupFlags",e)},n.prototype.clearErrors=function(e){(e=e||this.model.root)&&(e.error=null,e instanceof a&&e.each(function(e){e.error=null},function(e){this.clearErrors(e)},this))},n.prototype.updateError=function(e){if(this.settings.display_errors)if(null===e.error)e.$el.removeClass("has-error");else{var t=this.translate("errors",e.error[0]);t=o.fmt(t,e.error.slice(1)),t=this.change("displayError",t,e.error,e),e.$el.addClass("has-error").find(n.selectors.error_container).eq(0).attr("title",t)}},n.prototype.triggerValidationError=function(t,i,n){e.isArray(i)||(i=[i]),this.trigger("validationError",t,i,n).isDefaultPrevented()||(t.error=i)},n.prototype.destroy=function(){this.trigger("beforeDestroy"),this.status.generated_id&&this.$el.removeAttr("id"),this.clear(),this.model=null,this.$el.off(".queryBuilder").removeClass("query-builder").removeData("queryBuilder"),delete this.$el[0].queryBuilder},n.prototype.reset=function(){this.trigger("beforeReset").isDefaultPrevented()||(this.status.group_id=1,this.status.rule_id=0,this.model.root.empty(),this.model.root.data=void 0,this.model.root.flags=e.extend({},this.settings.default_group_flags),this.model.root.condition=this.settings.default_condition,this.addRule(this.model.root),this.trigger("afterReset"),this.trigger("rulesChanged"))},n.prototype.clear=function(){this.trigger("beforeClear").isDefaultPrevented()||(this.status.group_id=0,this.status.rule_id=0,this.model.root&&(this.model.root.drop(),this.model.root=null),this.trigger("afterClear"),this.trigger("rulesChanged"))},n.prototype.setOptions=function(t){e.each(t,function(e,t){-1!==n.modifiable_options.indexOf(e)&&(this.settings[e]=t)}.bind(this))},n.prototype.getModel=function(t){return t?t instanceof s?t:e(t).data("queryBuilderModel"):this.model.root},n.prototype.validate=function(t){t=e.extend({skip_empty:!1},t),this.clearErrors();var i=this,n=function e(n){var o=0,r=0;return n.each(function(e){if(e.filter||!t.skip_empty){if(!e.filter)return i.triggerValidationError(e,"no_filter",null),void r++;if(!e.operator)return i.triggerValidationError(e,"no_operator",null),void r++;if(0!==e.operator.nb_inputs){var n=i.validateValue(e,e.value);if(!0!==n)return i.triggerValidationError(e,n,e.value),void r++}o++}},function(t){var i=e(t);!0===i?o++:!1===i&&r++}),!(r>0)&&(0===o&&!n.isRoot()&&t.skip_empty?null:!!(0!==o||i.settings.allow_empty&&n.isRoot())||(i.triggerValidationError(n,"empty_group",null),!1))}(this.model.root);return this.change("validate",n)},n.prototype.getRules=function(t){t=e.extend({get_flags:!1,allow_invalid:!1,skip_empty:!1},t);var i=this.validate(t);if(!i&&!t.allow_invalid)return null;var n=this,o=function i(o){var r={condition:o.condition,rules:[]};if(o.data&&(r.data=e.extendext(!0,"replace",{},o.data)),t.get_flags){var s=n.getGroupFlags(o.flags,"all"===t.get_flags);e.isEmptyObject(s)||(r.flags=s)}return o.each(function(i){if(i.filter||!t.skip_empty){var o=null;i.operator&&0===i.operator.nb_inputs||(o=i.value);var s={id:i.filter?i.filter.id:null,field:i.filter?i.filter.field:null,type:i.filter?i.filter.type:null,input:i.filter?i.filter.input:null,operator:i.operator?i.operator.type:null,value:o};if((i.filter&&i.filter.data||i.data)&&(s.data=e.extendext(!0,"replace",{},i.filter.data,i.data)),t.get_flags){var a=n.getRuleFlags(i.flags,"all"===t.get_flags);e.isEmptyObject(a)||(s.flags=a)}r.rules.push(n.change("ruleToJson",s,i))}},function(e){var n=i(e);0===n.rules.length&&t.skip_empty||r.rules.push(n)},this),n.change("groupToJson",r,o)}(this.model.root);return o.valid=i,this.change("getRules",o)},n.prototype.setRules=function(t,i){i=e.extend({allow_invalid:!1},i),e.isArray(t)&&(t={condition:this.settings.default_condition,rules:t}),t&&t.rules&&(0!==t.rules.length||this.settings.allow_empty)||o.error("RulesParse","Incorrect data object passed"),this.clear(),this.setRoot(!1,t.data,this.parseGroupFlags(t)),t=this.change("setRules",t,i);var n=this;!function e(t,r){null!==r&&(void 0===t.condition?t.condition=n.settings.default_condition:-1==n.settings.conditions.indexOf(t.condition)&&(o.error(!i.allow_invalid,"UndefinedCondition",'Invalid condition "{0}"',t.condition),t.condition=n.settings.default_condition),r.condition=t.condition,t.rules.forEach(function(t){var s;if(void 0!==t.rules)if(-1!==n.settings.allow_groups&&n.settings.allow_groups<r.level)o.error(!i.allow_invalid,"RulesParse","No more than {0} groups are allowed",n.settings.allow_groups),n.reset();else{if(null===(s=n.addGroup(r,!1,t.data,n.parseGroupFlags(t))))return;e(t,s)}else{if(t.empty||(void 0===t.id&&(o.error(!i.allow_invalid,"RulesParse","Missing rule field id"),t.empty=!0),void 0===t.operator&&(t.operator="equal")),null===(s=n.addRule(r,t.data,n.parseRuleFlags(t))))return;t.empty||(s.filter=n.getFilterById(t.id,!i.allow_invalid)),s.filter&&(s.operator=n.getOperatorByType(t.operator,!i.allow_invalid),s.operator||(s.operator=n.getOperators(s.filter)[0])),s.operator&&0!==s.operator.nb_inputs&&(void 0!==t.value?s.value=t.value:void 0!==s.filter.default_value&&(s.value=s.filter.default_value)),n.change("jsonToRule",s,t)!=s&&o.error("RulesParse","Plugin tried to change rule reference")}}),n.change("jsonToGroup",r,t)!=r&&o.error("RulesParse","Plugin tried to change group reference"))}(t,this.model.root),this.trigger("afterSetRules")},n.prototype.validateValue=function(e,t){var i=e.filter.validation||{},n=!0;return n=i.callback?i.callback.call(this,t,e):this._validateValue(e,t),this.change("validateValue",n,t,e)},n.prototype._validateValue=function(t,i){var r,s,a=t.filter,l=t.operator,c=a.validation||{},d=!0;1===t.operator.nb_inputs&&(i=[i]);for(var u=0;u<l.nb_inputs;u++){if(!l.multiple&&e.isArray(i[u])&&i[u].length>1){d=["operator_not_multiple",l.type,this.translate("operators",l.type)];break}switch(a.input){case"radio":if(void 0===i[u]||0===i[u].length){c.allow_empty_value||(d=["radio_empty"]);break}break;case"checkbox":if(void 0===i[u]||0===i[u].length){c.allow_empty_value||(d=["checkbox_empty"]);break}break;case"select":if(void 0===i[u]||0===i[u].length||a.placeholder&&i[u]==a.placeholder_value){c.allow_empty_value||(d=["select_empty"]);break}break;default:s=e.isArray(i[u])?i[u]:[i[u]];for(var h=0;h<s.length;h++){switch(n.types[a.type]){case"string":if(void 0===s[h]||0===s[h].length){c.allow_empty_value||(d=["string_empty"]);break}if(void 0!==c.min&&s[h].length<parseInt(c.min)){d=[this.getValidationMessage(c,"min","string_exceed_min_length"),c.min];break}if(void 0!==c.max&&s[h].length>parseInt(c.max)){d=[this.getValidationMessage(c,"max","string_exceed_max_length"),c.max];break}if(c.format&&("string"==typeof c.format&&(c.format=new RegExp(c.format)),!c.format.test(s[h]))){d=[this.getValidationMessage(c,"format","string_invalid_format"),c.format];break}break;case"number":if(void 0===s[h]||0===s[h].length){c.allow_empty_value||(d=["number_nan"]);break}if(isNaN(s[h])){d=["number_nan"];break}if("integer"==a.type){if(parseInt(s[h])!=s[h]){d=["number_not_integer"];break}}else if(parseFloat(s[h])!=s[h]){d=["number_not_double"];break}if(void 0!==c.min&&s[h]<parseFloat(c.min)){d=[this.getValidationMessage(c,"min","number_exceed_min"),c.min];break}if(void 0!==c.max&&s[h]>parseFloat(c.max)){d=[this.getValidationMessage(c,"max","number_exceed_max"),c.max];break}if(void 0!==c.step&&"any"!==c.step){var p=(s[h]/c.step).toPrecision(14);if(parseInt(p)!=p){d=[this.getValidationMessage(c,"step","number_wrong_step"),c.step];break}}break;case"datetime":if(void 0===s[h]||0===s[h].length){c.allow_empty_value||(d=["datetime_empty"]);break}if(c.format){"moment"in window||o.error("MissingLibrary","MomentJS is required for Date/Time validation. Get it here http://momentjs.com");var g=moment(s[h],c.format);if(!g.isValid()){d=[this.getValidationMessage(c,"format","datetime_invalid"),c.format];break}if(c.min&&g<moment(c.min,c.format)){d=[this.getValidationMessage(c,"min","datetime_exceed_min"),c.min];break}if(c.max&&g>moment(c.max,c.format)){d=[this.getValidationMessage(c,"max","datetime_exceed_max"),c.max];break}}break;case"boolean":if(void 0===s[h]||0===s[h].length){c.allow_empty_value||(d=["boolean_not_valid"]);break}if("true"!==(r=(""+s[h]).trim().toLowerCase())&&"false"!==r&&"1"!==r&&"0"!==r&&1!==s[h]&&0!==s[h]){d=["boolean_not_valid"];break}}if(!0!==d)break}}if(!0!==d)break}if(("between"===t.operator.type||"not_between"===t.operator.type)&&2===i.length)switch(n.types[a.type]){case"number":i[0]>i[1]&&(d=["number_between_invalid",i[0],i[1]]);break;case"datetime":c.format&&("moment"in window||o.error("MissingLibrary","MomentJS is required for Date/Time validation. Get it here http://momentjs.com"),moment(i[0],c.format).isAfter(moment(i[1],c.format))&&(d=["datetime_between_invalid",i[0],i[1]]))}return d},n.prototype.nextGroupId=function(){return this.status.id+"_group_"+this.status.group_id++},n.prototype.nextRuleId=function(){return this.status.id+"_rule_"+this.status.rule_id++},n.prototype.getOperators=function(e){"string"==typeof e&&(e=this.getFilterById(e));for(var t=[],i=0,o=this.operators.length;i<o;i++){if(e.operators){if(-1==e.operators.indexOf(this.operators[i].type))continue}else if(-1==this.operators[i].apply_to.indexOf(n.types[e.type]))continue;t.push(this.operators[i])}return e.operators&&t.sort(function(t,i){return e.operators.indexOf(t.type)-e.operators.indexOf(i.type)}),this.change("getOperators",t,e)},n.prototype.getFilterById=function(e,t){if("-1"==e)return null;for(var i=0,n=this.filters.length;i<n;i++)if(this.filters[i].id==e)return this.filters[i];return o.error(!1!==t,"UndefinedFilter",'Undefined filter "{0}"',e),null},n.prototype.getOperatorByType=function(e,t){if("-1"==e)return null;for(var i=0,n=this.operators.length;i<n;i++)if(this.operators[i].type==e)return this.operators[i];return o.error(!1!==t,"UndefinedOperator",'Undefined operator "{0}"',e),null},n.prototype.getRuleInputValue=function(t){var i=t.filter,r=t.operator,s=[];if(i.valueGetter)s=i.valueGetter.call(this,t);else{for(var a=t.$el.find(n.selectors.value_container),l=0;l<r.nb_inputs;l++){var c,d=o.escapeElementId(t.id+"_value_"+l);switch(i.input){case"radio":s.push(a.find("[name="+d+"]:checked").val());break;case"checkbox":c=[],a.find("[name="+d+"]:checked").each(function(){c.push(e(this).val())}),s.push(c);break;case"select":i.multiple?(c=[],a.find("[name="+d+"] option:selected").each(function(){c.push(e(this).val())}),s.push(c)):s.push(a.find("[name="+d+"] option:selected").val());break;default:s.push(a.find("[name="+d+"]").val())}}s=s.map(function(t){return r.multiple&&i.value_separator&&"string"==typeof t&&(t=t.split(i.value_separator)),e.isArray(t)?t.map(function(e){return o.changeType(e,i.type)}):o.changeType(t,i.type)}),1===r.nb_inputs&&(s=s[0]),i.valueParser&&(s=i.valueParser.call(this,t,s))}return this.change("getRuleValue",s,t)},n.prototype.setRuleInputValue=function(t,i){var r=t.filter,s=t.operator;if(r&&s){if(t._updating_input=!0,r.valueSetter)r.valueSetter.call(this,t,i);else{var a=t.$el.find(n.selectors.value_container);1==s.nb_inputs&&(i=[i]);for(var l=0;l<s.nb_inputs;l++){var c=o.escapeElementId(t.id+"_value_"+l);switch(r.input){case"radio":a.find("[name="+c+'][value="'+i[l]+'"]').prop("checked",!0).trigger("change");break;case"checkbox":e.isArray(i[l])||(i[l]=[i[l]]),i[l].forEach(function(e){a.find("[name="+c+'][value="'+e+'"]').prop("checked",!0).trigger("change")});break;default:s.multiple&&r.value_separator&&e.isArray(i[l])&&(i[l]=i[l].join(r.value_separator)),a.find("[name="+c+"]").val(i[l]).trigger("change")}}}t._updating_input=!1}},n.prototype.parseRuleFlags=function(t){var i=e.extend({},this.settings.default_rule_flags);return t.readonly&&e.extend(i,{header_readonly:!0,filter_readonly:!0,operator_readonly:!0,value_readonly:!0,no_delete:!0,no_sortable:!0}),t.flags&&e.extend(i,t.flags),this.change("parseRuleFlags",i,t)},n.prototype.getRuleFlags=function(t,i){if(i)return e.extend({},t);var n={};return e.each(this.settings.default_rule_flags,function(e,i){t[e]!==i&&(n[e]=t[e])}),n},n.prototype.parseGroupFlags=function(t){var i=e.extend({},this.settings.default_group_flags);return t.readonly&&e.extend(i,{condition_readonly:!0,no_add_rule:!0,no_add_group:!0,no_delete:!0}),t.flags&&e.extend(i,t.flags),this.change("parseGroupFlags",i,t)},n.prototype.getGroupFlags=function(t,i){if(i)return e.extend({},t);var n={};return e.each(this.settings.default_group_flags,function(e,i){t[e]!==i&&(n[e]=t[e])}),n},n.prototype.translate=function(e,t){var i;return t||(t=e,e=void 0),i="object"==typeof t?t[this.settings.lang_code]||t.en:(e?this.lang[e]:this.lang)[t]||t,this.change("translate",i,t,e)},n.prototype.getValidationMessage=function(e,t,i){return e.messages&&e.messages[t]||i},n.templates.group='<div id="{{= it.group_id }}" class="rules-group-container">   <div class="rules-group-header">     <div class="btn-group pull-right group-actions">       <button type="button" class="btn btn-xs btn-success" data-add="rule">         <i class="{{= it.icons.add_rule }}"></i> {{= it.translate("add_rule") }}       </button>       {{? it.settings.allow_groups===-1 || it.settings.allow_groups>=it.level }}         <button type="button" class="btn btn-xs btn-success" data-add="group">           <i class="{{= it.icons.add_group }}"></i> {{= it.translate("add_group") }}         </button>       {{?}}       {{? it.level>1 }}         <button type="button" class="btn btn-xs btn-danger" data-delete="group">           <i class="{{= it.icons.remove_group }}"></i> {{= it.translate("delete_group") }}         </button>       {{?}}     </div>     <div class="btn-group group-conditions">       {{~ it.conditions: condition }}         <label class="btn btn-xs btn-primary">           <input type="radio" name="{{= it.group_id }}_cond" value="{{= condition }}"> {{= it.translate("conditions", condition) }}         </label>       {{~}}     </div>     {{? it.settings.display_errors }}       <div class="error-container"><i class="{{= it.icons.error }}"></i></div>     {{?}}   </div>   <div class=rules-group-body>     <div class=rules-list></div>   </div> </div>',n.templates.rule='<div id="{{= it.rule_id }}" class="rule-container">   <div class="rule-header">     <div class="btn-group pull-right rule-actions">       <button type="button" class="btn btn-xs btn-danger" data-delete="rule">         <i class="{{= it.icons.remove_rule }}"></i> {{= it.translate("delete_rule") }}       </button>     </div>   </div>   {{? it.settings.display_errors }}     <div class="error-container"><i class="{{= it.icons.error }}"></i></div>   {{?}}   <div class="rule-filter-container"></div>   <div class="rule-operator-container"></div>   <div class="rule-value-container"></div> </div>',n.templates.filterSelect='{{ var optgroup = null; }} <select class="form-control" name="{{= it.rule.id }}_filter">   {{? it.settings.display_empty_filter }}     <option value="-1">{{= it.settings.select_placeholder }}</option>   {{?}}   {{~ it.filters: filter }}     {{? optgroup !== filter.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = filter.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= filter.id }}" {{? filter.icon}}data-icon="{{= filter.icon}}"{{?}}>{{= it.translate(filter.label) }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>',n.templates.operatorSelect='{{? it.operators.length === 1 }} <span> {{= it.translate("operators", it.operators[0].type) }} </span> {{?}} {{ var optgroup = null; }} <select class="form-control {{? it.operators.length === 1 }}hide{{?}}" name="{{= it.rule.id }}_operator">   {{~ it.operators: operator }}     {{? optgroup !== operator.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = operator.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= operator.type }}" {{? operator.icon}}data-icon="{{= operator.icon}}"{{?}}>{{= it.translate("operators", operator.type) }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>',n.templates.ruleValueSelect='{{ var optgroup = null; }} <select class="form-control" name="{{= it.name }}" {{? it.rule.filter.multiple }}multiple{{?}}>   {{? it.rule.filter.placeholder }}     <option value="{{= it.rule.filter.placeholder_value }}" disabled selected>{{= it.rule.filter.placeholder }}</option>   {{?}}   {{~ it.rule.filter.values: entry }}     {{? optgroup !== entry.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = entry.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= entry.value }}">{{= entry.label }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>',n.prototype.getGroupTemplate=function(e,t){var i=this.templates.group({builder:this,group_id:e,level:t,conditions:this.settings.conditions,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getGroupTemplate",i,t)},n.prototype.getRuleTemplate=function(e){var t=this.templates.rule({builder:this,rule_id:e,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleTemplate",t)},n.prototype.getRuleFilterSelect=function(e,t){var i=this.templates.filterSelect({builder:this,rule:e,filters:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleFilterSelect",i,e,t)},n.prototype.getRuleOperatorSelect=function(e,t){var i=this.templates.operatorSelect({builder:this,rule:e,operators:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleOperatorSelect",i,e,t)},n.prototype.getRuleValueSelect=function(e,t){var i=this.templates.ruleValueSelect({builder:this,name:e,rule:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleValueSelect",i,e,t)},n.prototype.getRuleInput=function(e,t){var i=e.filter,n=e.filter.validation||{},r=e.id+"_value_"+t,s=i.vertical?" class=block":"",a="";if("function"==typeof i.input)a=i.input.call(this,e,r);else switch(i.input){case"radio":case"checkbox":o.iterateOptions(i.values,function(e,t){a+="<label"+s+'><input type="'+i.input+'" name="'+r+'" value="'+e+'"> '+t+"</label> "});break;case"select":a=this.getRuleValueSelect(r,e);break;case"textarea":a+='<textarea class="form-control" name="'+r+'"',i.size&&(a+=' cols="'+i.size+'"'),i.rows&&(a+=' rows="'+i.rows+'"'),void 0!==n.min&&(a+=' minlength="'+n.min+'"'),void 0!==n.max&&(a+=' maxlength="'+n.max+'"'),i.placeholder&&(a+=' placeholder="'+i.placeholder+'"'),a+="></textarea>";break;case"number":a+='<input class="form-control" type="number" name="'+r+'"',void 0!==n.step&&(a+=' step="'+n.step+'"'),void 0!==n.min&&(a+=' min="'+n.min+'"'),void 0!==n.max&&(a+=' max="'+n.max+'"'),i.placeholder&&(a+=' placeholder="'+i.placeholder+'"'),i.size&&(a+=' size="'+i.size+'"'),a+=">";break;default:a+='<input class="form-control" type="text" name="'+r+'"',i.placeholder&&(a+=' placeholder="'+i.placeholder+'"'),"string"===i.type&&void 0!==n.min&&(a+=' minlength="'+n.min+'"'),"string"===i.type&&void 0!==n.max&&(a+=' maxlength="'+n.max+'"'),i.size&&(a+=' size="'+i.size+'"'),a+=">"}return this.change("getRuleInput",a,e,r)};var o={};function r(){this.root=null,this.$=e(this)}n.utils=o,o.iterateOptions=function(t,i){t&&(e.isArray(t)?t.forEach(function(t){e.isPlainObject(t)?"value"in t?i(t.value,t.label||t.value,t.optgroup):e.each(t,function(e,t){return i(e,t),!1}):i(t,t)}):e.each(t,function(e,t){i(e,t)}))},o.fmt=function(e,t){return Array.isArray(t)||(t=Array.prototype.slice.call(arguments,1)),e.replace(/{([0-9]+)}/g,function(e,i){return t[parseInt(i)]})},o.error=function(){var e=0,t="boolean"!=typeof arguments[e]||arguments[e++],i=arguments[e++],n=arguments[e++],r=Array.isArray(arguments[e])?arguments[e]:Array.prototype.slice.call(arguments,e);if(t){var s=new Error(o.fmt(n,r));throw s.name=i+"Error",s.args=r,s}console.error(i+"Error: "+o.fmt(n,r))},o.changeType=function(e,t){if(""!==e&&void 0!==e)switch(t){case"integer":return"string"!=typeof e||/^-?\d+$/.test(e)?parseInt(e):e;case"double":return"string"!=typeof e||/^-?\d+\.?\d*$/.test(e)?parseFloat(e):e;case"boolean":return"string"!=typeof e||/^(0|1|true|false){1}$/i.test(e)?!0===e||1===e||"true"===e.toLowerCase()||"1"===e:e;default:return e}},o.escapeString=function(e){return"string"!=typeof e?e:e.replace(/[\0\n\r\b\\\'\"]/g,function(e){switch(e){case"\0":return"\\0";case"\n":return"\\n";case"\r":return"\\r";case"\b":return"\\b";default:return"\\"+e}}).replace(/\t/g,"\\t").replace(/\x1a/g,"\\Z")},o.escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},o.escapeElementId=function(e){return e?e.replace(/(\\)?([:.\[\],])/g,function(e,t,i){return t?e:"\\"+i}):e},o.groupSort=function(e,t){var i=[],n=[];return e.forEach(function(e){var o;e[t]?-1==(o=i.lastIndexOf(e[t]))?o=i.length:o++:o=i.length,i.splice(o,0,e[t]),n.splice(o,0,e)}),n},o.defineModelProperties=function(t,i){i.forEach(function(i){Object.defineProperty(t.prototype,i,{enumerable:!0,get:function(){return this.__[i]},set:function(t){var n=null!==this.__[i]&&"object"==typeof this.__[i]?e.extend({},this.__[i]):this.__[i];this.__[i]=t,null!==this.model&&this.model.trigger("update",this,i,t,n)}})})},e.extend(r.prototype,{trigger:function(t){var i=new e.Event(t);return this.$.triggerHandler(i,Array.prototype.slice.call(arguments,1)),i},on:function(){return this.$.on.apply(this.$,Array.prototype.slice.call(arguments)),this},off:function(){return this.$.off.apply(this.$,Array.prototype.slice.call(arguments)),this},once:function(){return this.$.one.apply(this.$,Array.prototype.slice.call(arguments)),this}});var s=function(e,t){if(!(this instanceof s))return new s(e,t);Object.defineProperty(this,"__",{value:{}}),t.data("queryBuilderModel",this),this.__.level=1,this.__.error=null,this.__.flags={},this.__.data=void 0,this.$el=t,this.id=t[0].id,this.model=null,this.parent=e};o.defineModelProperties(s,["level","error","data","flags"]),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){return this.__.parent},set:function(e){this.__.parent=e,this.level=null===e?1:e.level+1,this.model=null===e?null:e.model}}),s.prototype.isRoot=function(){return 1===this.level},s.prototype.getPos=function(){return this.isRoot()?-1:this.parent.getNodePos(this)},s.prototype.drop=function(){var e=this.model;this.parent&&this.parent.removeNode(this),this.$el.removeData("queryBuilderModel"),null!==e&&e.trigger("drop",this)},s.prototype.moveAfter=function(e){this.isRoot()||this.move(e.parent,e.getPos()+1)},s.prototype.moveAtBegin=function(e){this.isRoot()||(void 0===e&&(e=this.parent),this.move(e,0))},s.prototype.moveAtEnd=function(e){this.isRoot()||(void 0===e&&(e=this.parent),this.move(e,0===e.length()?0:e.length()-1))},s.prototype.move=function(e,t){this.isRoot()||("number"==typeof e&&(t=e,e=this.parent),this.parent.removeNode(this),e.insertNode(this,t,!1),null!==this.model&&this.model.trigger("move",this,e,t))};var a=function(e,t){if(!(this instanceof a))return new a(e,t);s.call(this,e,t),this.rules=[],this.__.condition=null};a.prototype=Object.create(s.prototype),a.prototype.constructor=a,o.defineModelProperties(a,["condition"]),a.prototype.empty=function(){this.each("reverse",function(e){e.drop()},function(e){e.drop()})},a.prototype.drop=function(){this.empty(),s.prototype.drop.call(this)},a.prototype.length=function(){return this.rules.length},a.prototype.insertNode=function(e,t,i){return void 0===t&&(t=this.length()),this.rules.splice(t,0,e),e.parent=this,i&&null!==this.model&&this.model.trigger("add",this,e,t),e},a.prototype.addGroup=function(e,t){return this.insertNode(new a(this,e),t,!0)},a.prototype.addRule=function(e,t){return this.insertNode(new l(this,e),t,!0)},a.prototype.removeNode=function(e){var t=this.getNodePos(e);-1!==t&&(e.parent=null,this.rules.splice(t,1))},a.prototype.getNodePos=function(e){return this.rules.indexOf(e)},a.prototype.each=function(e,t,i,n){"boolean"!=typeof e&&"string"!=typeof e&&(n=i,i=t,t=e,e=!1),n=void 0===n?null:n;for(var o=e?this.rules.length-1:0,r=e?0:this.rules.length-1,s=e?-1:1,l=function(){return e?o>=r:o<=r},c=!1;l()&&(this.rules[o]instanceof a?i&&(c=!1===i.call(n,this.rules[o])):t&&(c=!1===t.call(n,this.rules[o])),!c);o+=s);return!c},a.prototype.contains=function(e,t){return-1!==this.getNodePos(e)||!!t&&!this.each(function(){return!0},function(t){return!t.contains(e,!0)})};var l=function(e,t){if(!(this instanceof l))return new l(e,t);s.call(this,e,t),this._updating_value=!1,this._updating_input=!1,this.__.filter=null,this.__.operator=null,this.__.value=void 0};function c(e,t,i){var o,r,s=n.selectors;(o=t.closest(s.rule_container)).length&&(r="moveAfter"),r||(o=t.closest(s.group_header)).length&&(o=t.closest(s.group_container),r="moveAtBegin"),r||(o=t.closest(s.group_container)).length&&(r="moveAtEnd"),r&&(e[r](i.getModel(o)),i&&e instanceof l&&i.setRuleInputValue(e,e.value))}function d(e){var t=e.match(/(question_mark|numbered|named)(?:\((.)\))?/);return t||(t=[null,"question_mark",void 0]),t}return l.prototype=Object.create(s.prototype),l.prototype.constructor=l,o.defineModelProperties(l,["filter","operator","value"]),l.prototype.isRoot=function(){return!1},n.Group=a,n.Rule=l,e.fn.queryBuilder=function(e){0===this.length&&o.error("Config","No target defined"),this.length>1&&o.error("Config","Unable to initialize on multiple target");var t=this.data("queryBuilder"),i="object"==typeof e&&e||{};if(!t&&"destroy"==e)return this;if(!t){var r=new n(this,i);this.data("queryBuilder",r),r.init(i.rules)}return"string"==typeof e?t[e].apply(t,Array.prototype.slice.call(arguments,1)):this},e.fn.queryBuilder.constructor=n,e.fn.queryBuilder.defaults=n.defaults,e.fn.queryBuilder.extend=n.extend,e.fn.queryBuilder.define=n.define,e.fn.queryBuilder.regional=n.regional,n.define("bt-checkbox",function(e){"glyphicons"==e.font&&this.$el.addClass("bt-checkbox-glyphicons"),this.on("getRuleInput.filter",function(t,i,n){var r=i.filter;if(("radio"===r.input||"checkbox"===r.input)&&!r.plugin){t.value="",r.colors||(r.colors={}),r.color&&(r.colors._def_=r.color);var s=r.vertical?' style="display:block"':"",a=0;o.iterateOptions(r.values,function(i,o){var l=r.colors[i]||r.colors._def_||e.color,c=n+"_"+a++;t.value+="<div"+s+' class="'+r.input+" "+r.input+"-"+l+'">   <input type="'+r.input+'" name="'+n+'" id="'+c+'" value="'+i+'">   <label for="'+c+'">'+o+"</label> </div>"})}})},{font:"glyphicons",color:"default"}),n.define("bt-selectpicker",function(t){e.fn.selectpicker&&e.fn.selectpicker.Constructor||o.error("MissingLibrary",'Bootstrap Select is required to use "bt-selectpicker" plugin. Get it here: http://silviomoreto.github.io/bootstrap-select');var i=n.selectors;this.on("afterCreateRuleFilters",function(e,n){n.$el.find(i.rule_filter).removeClass("form-control").selectpicker(t)}),this.on("afterCreateRuleOperators",function(e,n){n.$el.find(i.rule_operator).removeClass("form-control").selectpicker(t)}),this.on("afterUpdateRuleFilter",function(e,t){t.$el.find(i.rule_filter).selectpicker("render")}),this.on("afterUpdateRuleOperator",function(e,t){t.$el.find(i.rule_operator).selectpicker("render")}),this.on("beforeDeleteRule",function(e,t){t.$el.find(i.rule_filter).selectpicker("destroy"),t.$el.find(i.rule_operator).selectpicker("destroy")})},{container:"body",style:"btn-inverse btn-xs",width:"auto",showIcon:!1}),n.define("bt-tooltip-errors",function(t){e.fn.tooltip&&e.fn.tooltip.Constructor&&e.fn.tooltip.Constructor.prototype.fixTitle||o.error("MissingLibrary",'Bootstrap Tooltip is required to use "bt-tooltip-errors" plugin. Get it here: http://getbootstrap.com');var i=this;this.on("getRuleTemplate.filter getGroupTemplate.filter",function(t){var i=e(t.value);i.find(n.selectors.error_container).attr("data-toggle","tooltip"),t.value=i.prop("outerHTML")}),this.model.on("update",function(e,o,r){"error"==r&&i.settings.display_errors&&o.$el.find(n.selectors.error_container).eq(0).tooltip(t).tooltip("hide").tooltip("fixTitle")})},{placement:"right"}),n.extend({setFilters:function(e,t){var i=this;void 0===t&&(t=e,e=!1),t=this.checkFilters(t);var r=(t=this.change("setFilters",t)).map(function(e){return e.id});if(e||function e(t){t.each(function(e){e.filter&&-1===r.indexOf(e.filter.id)&&o.error("ChangeFilter",'A rule is using filter "{0}"',e.filter.id)},e)}(this.model.root),this.filters=t,function e(t){t.each(!0,function(e){e.filter&&-1===r.indexOf(e.filter.id)?(e.drop(),i.trigger("rulesChanged")):(i.createRuleFilters(e),e.$el.find(n.selectors.rule_filter).val(e.filter?e.filter.id:"-1"),i.trigger("afterUpdateRuleFilter",e))},e)}(this.model.root),this.settings.plugins&&(this.settings.plugins["unique-filter"]&&this.updateDisabledFilters(),this.settings.plugins["bt-selectpicker"]&&this.$el.find(n.selectors.rule_filter).selectpicker("render")),this.settings.default_filter)try{this.getFilterById(this.settings.default_filter)}catch(e){this.settings.default_filter=null}this.trigger("afterSetFilters",t)},addFilter:function(t,i){void 0===i||"#end"==i?i=this.filters.length:"#start"==i&&(i=0),e.isArray(t)||(t=[t]);var n=e.extend(!0,[],this.filters);parseInt(i)==i||this.filters.some(function(e,t){if(e.id==i)return i=t+1,!0})?Array.prototype.splice.apply(n,[i,0].concat(t)):Array.prototype.push.apply(n,t),this.setFilters(n)},removeFilter:function(t,i){var n=e.extend(!0,[],this.filters);"string"==typeof t&&(t=[t]),n=n.filter(function(e){return-1===t.indexOf(e.id)}),this.setFilters(i,n)}}),n.define("chosen-selectpicker",function(t){e.fn.chosen||o.error("MissingLibrary",'chosen is required to use "chosen-selectpicker" plugin. Get it here: https://github.com/harvesthq/chosen'),this.settings.plugins["bt-selectpicker"]&&o.error("Conflict","bt-selectpicker is already selected as the dropdown plugin. Please remove chosen-selectpicker from the plugin list");var i=n.selectors;this.on("afterCreateRuleFilters",function(e,n){n.$el.find(i.rule_filter).removeClass("form-control").chosen(t)}),this.on("afterCreateRuleOperators",function(e,n){n.$el.find(i.rule_operator).removeClass("form-control").chosen(t)}),this.on("afterUpdateRuleFilter",function(e,t){t.$el.find(i.rule_filter).trigger("chosen:updated")}),this.on("afterUpdateRuleOperator",function(e,t){t.$el.find(i.rule_operator).trigger("chosen:updated")}),this.on("beforeDeleteRule",function(e,t){t.$el.find(i.rule_filter).chosen("destroy"),t.$el.find(i.rule_operator).chosen("destroy")})}),n.define("filter-description",function(t){"inline"===t.mode?this.on("afterUpdateRuleFilter afterUpdateRuleOperator",function(i,n){var o=n.$el.find("p.filter-description"),r=i.builder.getFilterDescription(n.filter,n);r?(0===o.length?(o=e('<p class="filter-description"></p>')).appendTo(n.$el):o.css("display",""),o.html('<i class="'+t.icon+'"></i> '+r)):o.hide()}):"popover"===t.mode?(e.fn.popover&&e.fn.popover.Constructor&&e.fn.popover.Constructor.prototype.fixTitle||o.error("MissingLibrary",'Bootstrap Popover is required to use "filter-description" plugin. Get it here: http://getbootstrap.com'),this.on("afterUpdateRuleFilter afterUpdateRuleOperator",function(i,o){var r=o.$el.find("button.filter-description"),s=i.builder.getFilterDescription(o.filter,o);s?(0===r.length?((r=e('<button type="button" class="btn btn-xs btn-info filter-description" data-toggle="popover"><i class="'+t.icon+'"></i></button>')).prependTo(o.$el.find(n.selectors.rule_actions)),r.popover({placement:"left",container:"body",html:!0}),r.on("mouseout",function(){r.popover("hide")})):r.css("display",""),r.data("bs.popover").options.content=s,r.attr("aria-describedby")&&r.popover("show")):(r.hide(),r.data("bs.popover")&&r.popover("hide"))})):"bootbox"===t.mode&&("bootbox"in window||o.error("MissingLibrary",'Bootbox is required to use "filter-description" plugin. Get it here: http://bootboxjs.com'),this.on("afterUpdateRuleFilter afterUpdateRuleOperator",function(i,o){var r=o.$el.find("button.filter-description"),s=i.builder.getFilterDescription(o.filter,o);s?(0===r.length?((r=e('<button type="button" class="btn btn-xs btn-info filter-description" data-toggle="bootbox"><i class="'+t.icon+'"></i></button>')).prependTo(o.$el.find(n.selectors.rule_actions)),r.on("click",function(){bootbox.alert(r.data("description"))})):r.css("display",""),r.data("description",s)):r.hide()}))},{icon:"glyphicon glyphicon-info-sign",mode:"popover"}),n.extend({getFilterDescription:function(e,t){return e?"function"==typeof e.description?e.description.call(this,t):e.description:void 0}}),n.define("invert",function(t){var i=this,o=n.selectors;this.on("afterInit",function(){i.$el.on("click.queryBuilder","[data-invert=group]",function(){var n=e(this).closest(o.group_container);i.invert(i.getModel(n),t)}),t.display_rules_button&&t.invert_rules&&i.$el.on("click.queryBuilder","[data-invert=rule]",function(){var n=e(this).closest(o.rule_container);i.invert(i.getModel(n),t)})}),t.disable_template||(this.on("getGroupTemplate.filter",function(n){var r=e(n.value);r.find(o.condition_container).after('<button type="button" class="btn btn-xs btn-default" data-invert="group"><i class="'+t.icon+'"></i> '+i.translate("invert")+"</button>"),n.value=r.prop("outerHTML")}),t.display_rules_button&&t.invert_rules&&this.on("getRuleTemplate.filter",function(n){var r=e(n.value);r.find(o.rule_actions).prepend('<button type="button" class="btn btn-xs btn-default" data-invert="rule"><i class="'+t.icon+'"></i> '+i.translate("invert")+"</button>"),n.value=r.prop("outerHTML")}))},{icon:"glyphicon glyphicon-random",recursive:!0,invert_rules:!0,display_rules_button:!1,silent_fail:!1,disable_template:!1}),n.defaults({operatorOpposites:{equal:"not_equal",not_equal:"equal",in:"not_in",not_in:"in",less:"greater_or_equal",less_or_equal:"greater",greater:"less_or_equal",greater_or_equal:"less",between:"not_between",not_between:"between",begins_with:"not_begins_with",not_begins_with:"begins_with",contains:"not_contains",not_contains:"contains",ends_with:"not_ends_with",not_ends_with:"ends_with",is_empty:"is_not_empty",is_not_empty:"is_empty",is_null:"is_not_null",is_not_null:"is_null"},conditionOpposites:{AND:"OR",OR:"AND"}}),n.extend({invert:function(t,i){if(!(t instanceof s)){if(!this.model.root)return;i=t,t=this.model.root}if("object"!=typeof i&&(i={}),void 0===i.recursive&&(i.recursive=!0),void 0===i.invert_rules&&(i.invert_rules=!0),void 0===i.silent_fail&&(i.silent_fail=!1),void 0===i.trigger&&(i.trigger=!0),t instanceof a){if(this.settings.conditionOpposites[t.condition]?t.condition=this.settings.conditionOpposites[t.condition]:i.silent_fail||o.error("InvertCondition",'Unknown inverse of condition "{0}"',t.condition),i.recursive){var n=e.extend({},i,{trigger:!1});t.each(function(e){i.invert_rules&&this.invert(e,n)},function(e){this.invert(e,n)},this)}}else if(t instanceof l&&t.operator&&!t.filter.no_invert)if(this.settings.operatorOpposites[t.operator.type]){var r=this.settings.operatorOpposites[t.operator.type];t.filter.operators&&-1==t.filter.operators.indexOf(r)||(t.operator=this.getOperatorByType(r))}else i.silent_fail||o.error("InvertOperator",'Unknown inverse of operator "{0}"',t.operator.type);i.trigger&&(this.trigger("afterInvert",t,i),this.trigger("rulesChanged"))}}),n.defaults({mongoOperators:{equal:function(e){return e[0]},not_equal:function(e){return{$ne:e[0]}},in:function(e){return{$in:e}},not_in:function(e){return{$nin:e}},less:function(e){return{$lt:e[0]}},less_or_equal:function(e){return{$lte:e[0]}},greater:function(e){return{$gt:e[0]}},greater_or_equal:function(e){return{$gte:e[0]}},between:function(e){return{$gte:e[0],$lte:e[1]}},not_between:function(e){return{$lt:e[0],$gt:e[1]}},begins_with:function(e){return{$regex:"^"+o.escapeRegExp(e[0])}},not_begins_with:function(e){return{$regex:"^(?!"+o.escapeRegExp(e[0])+")"}},contains:function(e){return{$regex:o.escapeRegExp(e[0])}},not_contains:function(e){return{$regex:"^((?!"+o.escapeRegExp(e[0])+").)*$",$options:"s"}},ends_with:function(e){return{$regex:o.escapeRegExp(e[0])+"$"}},not_ends_with:function(e){return{$regex:"(?<!"+o.escapeRegExp(e[0])+")$"}},is_empty:function(e){return""},is_not_empty:function(e){return{$ne:""}},is_null:function(e){return null},is_not_null:function(e){return{$ne:null}}},mongoRuleOperators:{$eq:function(e){return{val:e,op:null===e?"is_null":""===e?"is_empty":"equal"}},$ne:function(e){return{val:e=e.$ne,op:null===e?"is_not_null":""===e?"is_not_empty":"not_equal"}},$regex:function(e){return"^(?!"==(e=e.$regex).slice(0,4)&&")"==e.slice(-1)?{val:e.slice(4,-1),op:"not_begins_with"}:"^((?!"==e.slice(0,5)&&").)*$"==e.slice(-5)?{val:e.slice(5,-5),op:"not_contains"}:"(?<!"==e.slice(0,4)&&")$"==e.slice(-2)?{val:e.slice(4,-2),op:"not_ends_with"}:"$"==e.slice(-1)?{val:e.slice(0,-1),op:"ends_with"}:"^"==e.slice(0,1)?{val:e.slice(1),op:"begins_with"}:{val:e,op:"contains"}},between:function(e){return{val:[e.$gte,e.$lte],op:"between"}},not_between:function(e){return{val:[e.$lt,e.$gt],op:"not_between"}},$in:function(e){return{val:e.$in,op:"in"}},$nin:function(e){return{val:e.$nin,op:"not_in"}},$lt:function(e){return{val:e.$lt,op:"less"}},$lte:function(e){return{val:e.$lte,op:"less_or_equal"}},$gt:function(e){return{val:e.$gt,op:"greater"}},$gte:function(e){return{val:e.$gte,op:"greater_or_equal"}}}}),n.extend({getMongo:function(e){if(!(e=void 0===e?this.getRules():e))return null;var t=this;return function e(i){if(i.condition||(i.condition=t.settings.default_condition),-1===["AND","OR"].indexOf(i.condition.toUpperCase())&&o.error("UndefinedMongoCondition",'Unable to build MongoDB query with condition "{0}"',i.condition),!i.rules)return{};var n=[];i.rules.forEach(function(i){if(i.rules&&i.rules.length>0)n.push(e(i));else{var r=t.settings.mongoOperators[i.operator],s=t.getOperatorByType(i.operator);void 0===r&&o.error("UndefinedMongoOperator",'Unknown MongoDB operation for operator "{0}"',i.operator),0!==s.nb_inputs&&(i.value instanceof Array||(i.value=[i.value]));var a={};a[t.change("getMongoDBField",i.field,i)]=r.call(t,i.value),n.push(t.change("ruleToMongo",a,i,i.value,r))}});var r={};return r["$"+i.condition.toLowerCase()]=n,t.change("groupToMongo",r,i)}(e)},getRulesFromMongo:function(e){if(null==e)return null;var t=this;if("rules"in(e=t.change("parseMongoNode",e))&&"condition"in e)return e;if("id"in e&&"operator"in e&&"value"in e)return{condition:this.settings.default_condition,rules:[e]};var i=t.getMongoCondition(e);return i||o.error("MongoParse","Invalid MongoDB query format"),function e(i,n){var r=i[n],s=[];return r.forEach(function(i){if("rules"in(i=t.change("parseMongoNode",i))&&"condition"in i)s.push(i);else if("id"in i&&"operator"in i&&"value"in i)s.push(i);else{var n=t.getMongoCondition(i);if(n)s.push(e(i,n));else{var r=Object.keys(i)[0],a=i[r],l=t.getMongoOperator(a);void 0===l&&o.error("MongoParse","Invalid MongoDB query format");var c=t.settings.mongoRuleOperators[l];void 0===c&&o.error("UndefinedMongoOperator",'JSON Rule operation unknown for operator "{0}"',l);var d=c.call(t,a),u=t.getMongoDBFieldID(r,a),h=t.change("mongoToRule",{id:u,field:r,operator:d.op,value:d.val},i);s.push(h)}}}),t.change("mongoToGroup",{condition:n.replace("$","").toUpperCase(),rules:s},i)}(e,i)},setRulesFromMongo:function(e){this.setRules(this.getRulesFromMongo(e))},getMongoDBFieldID:function(e,t){var i=this.filters.filter(function(t){return t.field===e});return 1===i.length?i[0].id:this.change("getMongoDBFieldID",e,t)},getMongoOperator:function(e){if(null===e||"object"!=typeof e)return"$eq";if(void 0!==e.$gte&&void 0!==e.$lte)return"between";if(void 0!==e.$lt&&void 0!==e.$gt)return"not_between";var t=Object.keys(e).filter(function(e){return!!this.settings.mongoRuleOperators[e]}.bind(this));return 1===t.length?t[0]:void 0},getMongoCondition:function(e){for(var t=Object.keys(e),i=0,n=t.length;i<n;i++)if("$or"===t[i].toLowerCase()||"$and"===t[i].toLowerCase())return t[i]}}),n.define("not-group",function(t){var i=this;this.on("afterInit",function(){i.$el.on("click.queryBuilder","[data-not=group]",function(){var t=e(this).closest(n.selectors.group_container),o=i.getModel(t);o.not=!o.not}),i.model.on("update",function(e,t,n){t instanceof a&&"not"===n&&i.updateGroupNot(t)})}),this.on("afterAddGroup",function(e,t){t.__.not=!1}),t.disable_template||this.on("getGroupTemplate.filter",function(o){var r=e(o.value);r.find(n.selectors.condition_container).prepend('<button type="button" class="btn btn-xs btn-default" data-not="group"><i class="'+t.icon_unchecked+'"></i> '+i.translate("NOT")+"</button>"),o.value=r.prop("outerHTML")}),this.on("groupToJson.filter",function(e,t){e.value.not=t.not}),this.on("jsonToGroup.filter",function(e,t){e.value.not=!!t.not}),this.on("groupToSQL.filter",function(e,t){t.not&&(e.value="NOT ( "+e.value+" )")}),this.on("parseSQLNode.filter",function(e){e.value.name&&"NOT"==e.value.name.toUpperCase()&&(e.value=e.value.arguments.value[0],-1===["AND","OR"].indexOf(e.value.operation.toUpperCase())&&(e.value=new SQLParser.nodes.Op(i.settings.default_condition,e.value,null)),e.value.not=!0)}),this.on("sqlGroupsDistinct.filter",function(e,t,i,n){i.not&&n>0&&(e.value=!0)}),this.on("sqlToGroup.filter",function(e,t){e.value.not=!!t.not}),this.on("groupToMongo.filter",function(e,t){var i="$"+t.condition.toLowerCase();t.not&&e.value[i]&&(e.value={$nor:[e.value]})}),this.on("parseMongoNode.filter",function(e){var t=Object.keys(e.value);"$nor"==t[0]&&(e.value=e.value[t[0]][0],e.value.not=!0)}),this.on("mongoToGroup.filter",function(e,t){e.value.not=!!t.not})},{icon_unchecked:"glyphicon glyphicon-unchecked",icon_checked:"glyphicon glyphicon-check",disable_template:!1}),o.defineModelProperties(a,["not"]),n.selectors.group_not=n.selectors.group_header+" [data-not=group]",n.extend({updateGroupNot:function(e){var t=this.plugins["not-group"];e.$el.find(">"+n.selectors.group_not).toggleClass("active",e.not).find("i").attr("class",e.not?t.icon_checked:t.icon_unchecked),this.trigger("afterUpdateGroupNot",e),this.trigger("rulesChanged")}}),n.define("sortable",function(t){var i,r,s,l;"interact"in window||o.error("MissingLibrary",'interact.js is required to use "sortable" plugin. Get it here: http://interactjs.io'),void 0!==t.default_no_sortable&&(o.error(!1,"Config",'Sortable plugin : "default_no_sortable" options is deprecated, use standard "default_rule_flags" and "default_group_flags" instead'),this.settings.default_rule_flags.no_sortable=this.settings.default_group_flags.no_sortable=t.default_no_sortable),interact.dynamicDrop(!0),interact.pointerMoveTolerance(10),this.on("afterAddRule afterAddGroup",function(o,d){if(d!=i){var u=o.builder;t.inherit_no_sortable&&d.parent&&d.parent.flags.no_sortable&&(d.flags.no_sortable=!0),t.inherit_no_drop&&d.parent&&d.parent.flags.no_drop&&(d.flags.no_drop=!0),d.flags.no_sortable||interact(d.$el[0]).draggable({allowFrom:n.selectors.drag_handle,onstart:function(t){l=!1,s=u.getModel(t.target),r=s.$el.clone().appendTo(s.$el.parent()).width(s.$el.outerWidth()).addClass("dragging");var n=e('<div class="rule-placeholder">&nbsp;</div>').height(s.$el.outerHeight());i=s.parent.addRule(n,s.getPos()),s.$el.hide()},onmove:function(e){r[0].style.top=e.clientY-15+"px",r[0].style.left=e.clientX-15+"px"},onend:function(t){t.dropzone&&(c(s,e(t.relatedTarget),u),l=!0),r.remove(),r=void 0,i.drop(),i=void 0,s.$el.css("display",""),u.trigger("afterMove",s),u.trigger("rulesChanged")}}),d.flags.no_drop||(interact(d.$el[0]).dropzone({accept:n.selectors.rule_and_group_containers,ondragenter:function(t){c(i,e(t.target),u)},ondrop:function(t){l||c(s,e(t.target),u)}}),d instanceof a&&interact(d.$el.find(n.selectors.group_header)[0]).dropzone({accept:n.selectors.rule_and_group_containers,ondragenter:function(t){c(i,e(t.target),u)},ondrop:function(t){l||c(s,e(t.target),u)}}))}}),this.on("beforeDeleteRule beforeDeleteGroup",function(e,t){e.isDefaultPrevented()||(interact(t.$el[0]).unset(),t instanceof a&&interact(t.$el.find(n.selectors.group_header)[0]).unset())}),this.on("afterApplyRuleFlags afterApplyGroupFlags",function(e,t){t.flags.no_sortable&&t.$el.find(".drag-handle").remove()}),t.disable_template||(this.on("getGroupTemplate.filter",function(i,o){if(o>1){var r=e(i.value);r.find(n.selectors.condition_container).after('<div class="drag-handle"><i class="'+t.icon+'"></i></div>'),i.value=r.prop("outerHTML")}}),this.on("getRuleTemplate.filter",function(i){var o=e(i.value);o.find(n.selectors.rule_header).after('<div class="drag-handle"><i class="'+t.icon+'"></i></div>'),i.value=o.prop("outerHTML")}))},{inherit_no_sortable:!0,inherit_no_drop:!0,icon:"glyphicon glyphicon-sort",disable_template:!1}),n.selectors.rule_and_group_containers=n.selectors.rule_container+", "+n.selectors.group_container,n.selectors.drag_handle=".drag-handle",n.defaults({default_rule_flags:{no_sortable:!1,no_drop:!1},default_group_flags:{no_sortable:!1,no_drop:!1}}),n.define("sql-support",function(e){},{boolean_as_integer:!0}),n.defaults({sqlOperators:{equal:{op:"= ?"},not_equal:{op:"!= ?"},in:{op:"IN(?)",sep:", "},not_in:{op:"NOT IN(?)",sep:", "},less:{op:"< ?"},less_or_equal:{op:"<= ?"},greater:{op:"> ?"},greater_or_equal:{op:">= ?"},between:{op:"BETWEEN ?",sep:" AND "},not_between:{op:"NOT BETWEEN ?",sep:" AND "},begins_with:{op:"LIKE(?)",mod:"{0}%"},not_begins_with:{op:"NOT LIKE(?)",mod:"{0}%"},contains:{op:"LIKE(?)",mod:"%{0}%"},not_contains:{op:"NOT LIKE(?)",mod:"%{0}%"},ends_with:{op:"LIKE(?)",mod:"%{0}"},not_ends_with:{op:"NOT LIKE(?)",mod:"%{0}"},is_empty:{op:"= ''"},is_not_empty:{op:"!= ''"},is_null:{op:"IS NULL"},is_not_null:{op:"IS NOT NULL"}},sqlRuleOperator:{"=":function(e){return{val:e,op:""===e?"is_empty":"equal"}},"!=":function(e){return{val:e,op:""===e?"is_not_empty":"not_equal"}},LIKE:function(e){return"%"==e.slice(0,1)&&"%"==e.slice(-1)?{val:e.slice(1,-1),op:"contains"}:"%"==e.slice(0,1)?{val:e.slice(1),op:"ends_with"}:"%"==e.slice(-1)?{val:e.slice(0,-1),op:"begins_with"}:void o.error("SQLParse",'Invalid value for LIKE operator "{0}"',e)},"NOT LIKE":function(e){return"%"==e.slice(0,1)&&"%"==e.slice(-1)?{val:e.slice(1,-1),op:"not_contains"}:"%"==e.slice(0,1)?{val:e.slice(1),op:"not_ends_with"}:"%"==e.slice(-1)?{val:e.slice(0,-1),op:"not_begins_with"}:void o.error("SQLParse",'Invalid value for NOT LIKE operator "{0}"',e)},IN:function(e){return{val:e,op:"in"}},"NOT IN":function(e){return{val:e,op:"not_in"}},"<":function(e){return{val:e,op:"less"}},"<=":function(e){return{val:e,op:"less_or_equal"}},">":function(e){return{val:e,op:"greater"}},">=":function(e){return{val:e,op:"greater_or_equal"}},BETWEEN:function(e){return{val:e,op:"between"}},"NOT BETWEEN":function(e){return{val:e,op:"not_between"}},IS:function(e){return null!==e&&o.error("SQLParse","Invalid value for IS operator"),{val:null,op:"is_null"}},"IS NOT":function(e){return null!==e&&o.error("SQLParse","Invalid value for IS operator"),{val:null,op:"is_not_null"}}},sqlStatements:{question_mark:function(){var e=[];return{add:function(t,i){return e.push(i),"?"},run:function(){return e}}},numbered:function(e){(!e||e.length>1)&&(e="$");var t=0,i=[];return{add:function(n,o){return i.push(o),t++,e+t},run:function(){return i}}},named:function(e){(!e||e.length>1)&&(e=":");var t={},i={};return{add:function(n,o){t[n.field]||(t[n.field]=1);var r=n.field+"_"+t[n.field]++;return i[r]=o,e+r},run:function(){return i}}}},sqlRuleStatement:{question_mark:function(e){var t=0;return{parse:function(i){return"?"==i?e[t++]:i},esc:function(e){return e.replace(/\?/g,"'?'")}}},numbered:function(e,t){(!t||t.length>1)&&(t="$");var i=new RegExp("^\\"+t+"[0-9]+$"),n=new RegExp("\\"+t+"([0-9]+)","g");return{parse:function(t){return i.test(t)?e[t.slice(1)-1]:t},esc:function(e){return e.replace(n,"'"+("$"==t?"$$":t)+"$1'")}}},named:function(e,t){(!t||t.length>1)&&(t=":");var i=new RegExp("^\\"+t),n=new RegExp("\\"+t+"("+Object.keys(e).join("|")+")","g");return{parse:function(t){return i.test(t)?e[t.slice(1)]:t},esc:function(e){return e.replace(n,"'"+("$"==t?"$$":t)+"$1'")}}}}}),n.extend({getSQL:function(e,t,i){if(!(i=void 0===i?this.getRules():i))return null;t=t?"\n":" ";var n=this.getPluginOptions("sql-support","boolean_as_integer");if(!0===e&&(e="question_mark"),"string"==typeof e){var r=d(e);e=this.settings.sqlStatements[r[1]](r[2])}var s=this,a=function i(r){if(r.condition||(r.condition=s.settings.default_condition),-1===["AND","OR"].indexOf(r.condition.toUpperCase())&&o.error("UndefinedSQLCondition",'Unable to build SQL query with condition "{0}"',r.condition),!r.rules)return"";var a=[];r.rules.forEach(function(r){if(r.rules&&r.rules.length>0)a.push("("+t+i(r)+t+")"+t);else{var l=s.settings.sqlOperators[r.operator],c=s.getOperatorByType(r.operator),d="";void 0===l&&o.error("UndefinedSQLOperator",'Unknown SQL operation for operator "{0}"',r.operator),0!==c.nb_inputs&&(r.value instanceof Array||(r.value=[r.value]),r.value.forEach(function(t,i){i>0&&(d+=l.sep),"boolean"==r.type&&n?t=t?1:0:e||"integer"===r.type||"double"===r.type||"boolean"===r.type||(t=o.escapeString(t)),l.mod&&(t=o.fmt(l.mod,t)),e?d+=e.add(r,t):("string"==typeof t&&(t="'"+t+"'"),d+=t)}));var u=function(e){return l.op.replace("?",function(){return e})},h=s.change("getSQLField",r.field,r)+" "+u(d);a.push(s.change("ruleToSQL",h,r,d,u))}});var l=a.join(" "+r.condition+t);return s.change("groupToSQL",l,r)}(i);return e?{sql:a,params:e.run()}:{sql:a}},getRulesFromSQL:function(t,i){"SQLParser"in window||o.error("MissingLibrary","SQLParser is required to parse SQL queries. Get it here https://github.com/mistic100/sql-parser");var n=this;if("string"==typeof t&&(t={sql:t}),!0===i&&(i="question_mark"),"string"==typeof i){var r=d(i);i=this.settings.sqlRuleStatement[r[1]](t.params,r[2])}i&&(t.sql=i.esc(t.sql)),0!==t.sql.toUpperCase().indexOf("SELECT")&&(t.sql="SELECT * FROM table WHERE "+t.sql);var s=SQLParser.parse(t.sql);s.where||o.error("SQLParse","No WHERE clause found");var a=n.change("parseSQLNode",s.where.conditions);if("rules"in a&&"condition"in a)return a;if("id"in a&&"operator"in a&&"value"in a)return{condition:this.settings.default_condition,rules:[a]};var l=n.change("sqlToGroup",{condition:this.settings.default_condition,rules:[]},a),c=l;return function t(r,s){if(null!==r)if("rules"in(r=n.change("parseSQLNode",r))&&"condition"in r)c.rules.push(r);else if("id"in r&&"operator"in r&&"value"in r)c.rules.push(r);else if("left"in r&&"right"in r&&"operation"in r||o.error("SQLParse","Unable to parse WHERE clause"),-1!==["AND","OR"].indexOf(r.operation.toUpperCase())){if(n.change("sqlGroupsDistinct",s>0&&c.condition!=r.operation.toUpperCase(),c,r,s)){var a=n.change("sqlToGroup",{condition:n.settings.default_condition,rules:[]},r);c.rules.push(a),c=a}c.condition=r.operation.toUpperCase(),s++;var l=c;t(r.left,s),c=l,t(r.right,s)}else{var d;e.isPlainObject(r.right.value)&&o.error("SQLParse","Value format not supported for {0}.",r.left.value),d=e.isArray(r.right.value)?r.right.value.map(function(e){return e.value}):r.right.value,i&&(d=e.isArray(d)?d.map(i.parse):i.parse(d));var u=r.operation.toUpperCase();"<>"==u&&(u="!=");var h=n.settings.sqlRuleOperator[u];void 0===h&&o.error("UndefinedSQLOperator",'Invalid SQL operation "{0}".',r.operation);var p,g=h.call(this,d,r.operation);"values"in r.left?p=r.left.values.join("."):"value"in r.left?p=r.left.value:o.error("SQLParse","Cannot find field name in {0}",JSON.stringify(r.left));var f=n.getSQLFieldID(p,d),m=n.change("sqlToRule",{id:f,field:p,operator:g.op,value:g.val},r);c.rules.push(m)}}(a,0),l},setRulesFromSQL:function(e,t){this.setRules(this.getRulesFromSQL(e,t))},getSQLFieldID:function(e,t){var i=this.filters.filter(function(t){return t.field.toLowerCase()===e.toLowerCase()});return 1===i.length?i[0].id:this.change("getSQLFieldID",e,t)}}),n.define("unique-filter",function(){this.status.used_filters={},this.on("afterUpdateRuleFilter",this.updateDisabledFilters),this.on("afterDeleteRule",this.updateDisabledFilters),this.on("afterCreateRuleFilters",this.applyDisabledFilters),this.on("afterReset",this.clearDisabledFilters),this.on("afterClear",this.clearDisabledFilters),this.on("getDefaultFilter.filter",function(e,t){var i=e.builder;(i.updateDisabledFilters(),e.value.id in i.status.used_filters)&&(i.filters.some(function(n){if(!(n.id in i.status.used_filters)||i.status.used_filters[n.id].length>0&&-1===i.status.used_filters[n.id].indexOf(t.parent))return e.value=n,!0})||(o.error(!1,"UniqueFilter","No more non-unique filters available"),e.value=void 0))})}),n.extend({updateDisabledFilters:function(e){var t=e?e.builder:this;t.status.used_filters={},t.model&&(!function e(i){i.each(function(e){e.filter&&e.filter.unique&&(t.status.used_filters[e.filter.id]||(t.status.used_filters[e.filter.id]=[]),"group"==e.filter.unique&&t.status.used_filters[e.filter.id].push(e.parent))},function(t){e(t)})}(t.model.root),t.applyDisabledFilters(e))},clearDisabledFilters:function(e){var t=e?e.builder:this;t.status.used_filters={},t.applyDisabledFilters(e)},applyDisabledFilters:function(t){var i=t?t.builder:this;i.$el.find(n.selectors.filter_container+" option").prop("disabled",!1),e.each(i.status.used_filters,function(e,t){0===t.length?i.$el.find(n.selectors.filter_container+' option[value="'+e+'"]:not(:selected)').prop("disabled",!0):t.forEach(function(t){t.each(function(t){t.$el.find(n.selectors.filter_container+' option[value="'+e+'"]:not(:selected)').prop("disabled",!0)})})}),i.settings.plugins&&i.settings.plugins["bt-selectpicker"]&&i.$el.find(n.selectors.rule_filter).selectpicker("render")}}),n.regional.en={__locale:"English (en)",__author:'Damien "Mistic" Sorel, http://www.strangeplanet.fr',add_rule:t("querybuilder.common.add_rule"),add_group:t("querybuilder.common.add_group"),delete_rule:t("querybuilder.common.delete_rule"),delete_group:t("querybuilder.common.delete_group"),conditions:{AND:t("querybuilder.conditions.AND"),OR:t("querybuilder.conditions.OR")},operators:{equal:t("querybuilder.operators.equal"),not_equal:t("querybuilder.operators.not_equal"),in:t("querybuilder.operators.in"),not_in:t("querybuilder.operators.not_in"),less:t("querybuilder.operators.less"),less_or_equal:t("querybuilder.operators.less_or_equal"),greater:t("querybuilder.operators.greater"),greater_or_equal:t("querybuilder.operators.greater_or_equal"),between:t("querybuilder.operators.between"),not_between:t("querybuilder.operators.not_between"),begins_with:t("querybuilder.operators.begins_with"),not_begins_with:t("querybuilder.operators.not_begins_with"),contains:t("querybuilder.operators.contains"),not_contains:t("querybuilder.operators.not_contains"),ends_with:t("querybuilder.operators.ends_with"),not_ends_with:t("querybuilder.operators.not_ends_with"),is_empty:t("querybuilder.operators.is_empty"),is_not_empty:t("querybuilder.operators.is_not_empty"),is_null:t("querybuilder.operators.is_null"),is_not_null:t("querybuilder.operators.is_not_null"),before:t("querybuilder.operators.before"),after:t("querybuilder.operators.after"),like:"Like",not_like:"Not like"},errors:{no_filter:t("querybuilder.errors.no_filter"),empty_group:t("querybuilder.errors.empty_group"),radio_empty:t("querybuilder.errors.radio_empty"),checkbox_empty:t("querybuilder.errors.checkbox_empty"),select_empty:t("querybuilder.errors.select_empty"),string_empty:t("querybuilder.errors.string_empty"),string_exceed_min_length:t("querybuilder.errors.string_exceed_min_length"),string_exceed_max_length:t("querybuilder.errors.string_exceed_max_length"),string_invalid_format:t("querybuilder.errors.string_invalid_format"),number_nan:t("querybuilder.errors.number_nan"),number_not_integer:t("querybuilder.errors.number_not_integer"),number_not_double:t("querybuilder.errors.number_not_double"),number_exceed_min:t("querybuilder.errors.number_exceed_min"),number_exceed_max:t("querybuilder.errors.number_exceed_max"),number_wrong_step:t("querybuilder.errors.number_wrong_step"),number_between_invalid:"Invalid values, {0} is greater than {1}",datetime_empty:t("querybuilder.errors.datetime_empty"),datetime_invalid:t("querybuilder.errors.datetime_invalid"),datetime_exceed_min:t("querybuilder.errors.datetime_exceed_min"),datetime_exceed_max:t("querybuilder.errors.datetime_exceed_max"),datetime_between_invalid:"Invalid values, {0} is greater than {1}",boolean_not_valid:t("querybuilder.errors.boolean_not_valid"),operator_not_multiple:t("querybuilder.errors.operator_not_multiple")},invert:t("querybuilder.common.invert"),NOT:"NOT"},n.defaults({lang_code:"en"}),n}),AGN.Lib.Field=class{constructor(e){this.el=e,this.options=_.extend({},AGN.Lib.Helpers.objFromString(e.data("field-options")))}valid(){return!0}errors(){return[]}onSubmit(){}isInitializedFor(e){return this.el.is(e)}static create(e){const t=e.data("agn:field");if(t)return t;const i=e.data("field"),n=new(AGN.Opt.Fields[i]||this)(e);return e.data("agn:field",n),n}},(()=>{const e="HH:mm";class i extends AGN.Lib.Field{constructor(e){super(e),this._value=this.options.value||this.options.defaultValue||"",this._propertyName=this.el.data("property"),this.#e(),this.el.on("change",()=>this.setDateTimeFieldValue())}get dateValue(){return moment(this.strValue,`${window.adminDateFormat.toUpperCase()} ${e}`).toDate()}get strValue(){return this.$hiddenInput.val()}get $hiddenInput(){return this.el.find(`[name="${this._propertyName}"]`)}setDateTimeFieldValue(){this.$hiddenInput.val(this.#t())}valid(){return 0===this.errors().length}errors(){const e=this.#i(),i=this.#n();return!e.val()&&i.val()?[{field:e,msg:t("fields.dateTime.errors.incompleteDate")}]:[]}onSubmit(){this.setDateTimeFieldValue()}#t(){let e=this.#i().val();const t=this.#n().val()||this.#o();return e?this.#r(e,t.replace(/[_hm]/g,"0")):""}#o(){let t=this.options.defaultSubmitTime;return""===t||t?"now"===t?moment().format(e):t:"00:00"}#i(){return this.el.find(".js-datepicker")}#n(){return this.el.find(".js-timepicker")}#r(e,t){return/^(\d{2}):(\d{2})$/.test(t)?`${e} ${t}`:e}#e(){const e=this.el.data("field-extra-attributes"),t=e&&AGN.Lib.Helpers.objFromString(e)||{},i=$("<input>",{type:"hidden",name:this._propertyName,value:this._value});$.each(t,(e,t)=>i.attr(e,t)),this.el.append(AGN.Lib.Template.text("datetime-picker",{date:this._value?this._value.split(" ")[0]:"",time:this.#s(),timeMask:this.options?.timeMask,extraAttrs:e||""})),this.el.find(".js-datepicker").data("datepicker-options",this.el.data("datepicker-options")),this.el.append(i),AGN.runAll(this.el)}#s(){if(!this._value)return"";const e=this._value.split(" ");return 2===e.length?e[1]:""}}AGN.Lib.DateTimeField=i,AGN.Opt.Fields.datetime=i})(),(()=>{class e extends AGN.Lib.Field{constructor(e){super(e),this.$source=this.el.find("select.js-double-select-trigger"),this.$targets=this.el.find("select.js-double-select-target");const t=()=>{this.$targets.val([]),this.update()};this.$source.off("change",t),this.$source.on("change",t),AGN.Lib.DataProvider.get(e).done(e=>{this.options=e,this.update()})}update(){const e=this.$source.find("option:selected").val();this.$targets.each((t,i)=>{const n=$(i),o=n.val();n.html(AGN.Lib.Template.text("double-select-options",{opts:this.options[e],valueSelected:o})),AGN.Lib.CoreInitializer.run("select",n)})}}AGN.Lib.DoubleSelectField=e,AGN.Opt.Fields["double-select"]=e})(),(()=>{class e extends AGN.Lib.Field{constructor(e){super(e),this.$strength=this.el.find(".js-password-strength"),this.$match=this.el.parent().find(".js-password-match"),this.$strength.on("keyup",e=>{13!==e.keyCode&&(this.safe()&&0!==this.$strength.val().length||this.$match.val(""),this.updateStrength(),this.updateMatch())}),this.$match.on("keyup",()=>this.updateMatch())}match(){return this.$strength.val()===this.$match.val()}safe(){return 0===this.#a().length}valid(){return!this.$match.exists()||this.match()&&this.safe()}errors(){const e=[];if(this.valid())return e;this.match()||e.push({field:this.$match,msg:t("fields.password.errors.notMatching")});const i=this.#a();return i.length>0&&i.forEach(t=>{e.push({field:this.$strength,msg:t})}),e}resetStrength(){AGN.Lib.Form.get(this.$strength).cleanFieldFeedback(this.$strength)}resetMatch(){AGN.Lib.Form.get(this.$match).cleanFieldFeedback(this.$match)}updateStrength(){if(this.resetStrength(),0===this.$strength.val().length)return;const e=AGN.Lib.Form.get(this.$strength),i=this.#a();0===i.length?(e.markField(this.$strength,"success"),AGN.Lib.Form.appendFeedbackMessage(this.$strength,t("fields.password.safe"),"success")):(e.markField(this.$strength),i.forEach(e=>AGN.Lib.Form.appendFeedbackMessage(this.$strength,e)))}updateMatch(){if(this.resetMatch(),this.$match.get(0).toggleAttribute("readonly",!this.safe()||0===this.$strength.val().length),0===this.$match.val().length)return;const e=AGN.Lib.Form.get(this.$match);this.match()?(e.markField(this.$match,"success"),AGN.Lib.Form.appendFeedbackMessage(this.$match,t("fields.password.matches"),"success")):(e.markField(this.$match),AGN.Lib.Form.appendFeedbackMessage(this.$match,t("fields.password.matchesNot")))}#a(){const e=[],i=this.$strength.val();if(0===i.length)return e;const n=this.$strength.attr("data-rule"),o=AGN.Lib.PasswordPolicies.findPasswordPolicy(n)(i);return o&&o.length&&o.forEach(i=>e.push(t(i))),e}}AGN.Lib.PasswordField=e,AGN.Opt.Fields.password=e})(),(()=>{class e extends AGN.Lib.Field{valid(){return!(!this.options?.ignoreHidden||this.el.is(":visible"))||(!this.el.exists()||$.trim(this.el.val()))}errors(){const e=[];return this.valid()||e.push({field:this.el,msg:t("fields.required.errors.missing")}),e}}AGN.Lib.RequiredField=e,AGN.Opt.Fields.required=e})(),(()=>{const e="field-vis-show",t="field-vis-hide",i="data-field-vis",n=`data-${e}`,o=`data-${t}`,r="data-field-vis-default";class s extends AGN.Lib.Field{static STR={DATA_FIELD_VIS:i,DATA_FIELD_VIS_SHOW:n,DATA_FIELD_VIS_HIDE:o,DATA_FIELD_VIS_DEFAULT:r};constructor(e){super(e),this.$source=this.el.find(`[${i}]`),this.$source.on("change change.select2",()=>this.update()),this.update()}update(){this.#l(),this.#c(),this.#d()}#c(){_.each(this.$source.filter("select"),e=>{this.#u($(e).find(":selected"))})}#l(){_.each(this.el.find(`[${r}]`),e=>{this.#u($(e))})}#d(){_.each(this.$source.filter(":checked"),e=>{this.#u($(e))})}#u(i){if(this._skipDisabled(i))return;const n=i.data(t),o=i.data(e);let r=this.el;this.el.is("[data-field-vis-scope]")&&(r=$(this.el.data("field-vis-scope"))),_.each(r.find(n),e=>{(i=$(e)).all(":input").each(function(){const e=$(this);e.prop("disabled")||(e.data("field-disabled",!0),e.prop("disabled",!0))}),i.hide(),i.data("select2")&&(i.next(".select2-container").hide(),AGN.Lib.CoreInitializer.run("select",i.parents("select"))),i.is("option")&&(i.prop("disabled",!0),AGN.Lib.CoreInitializer.run("select",i.parents("select")))}),_.each(r.find(o),e=>{(i=$(e)).all(":input").each(function(){const e=$(this);e.data("field-disabled")&&(e.prop("disabled",!1),e.removeData("field-disabled"))}),i.show(),i.data("select2")&&(i.next(".select2-container").show(),AGN.Lib.CoreInitializer.run("select",i.parents("select"))),i.is("option")&&(i.prop("disabled",!1),AGN.Lib.CoreInitializer.run("select",i.parents("select")))})}_skipDisabled(e){return(e=e.is("option")?e.closest("select"):e).is(":disabled")&&!e.is("[data-field-vis-nondisabled]")}}AGN.Lib.ToggleVisField=s,AGN.Opt.Fields["toggle-vis"]=s})(),(()=>{class e extends AGN.Lib.Field{constructor(e){super(e),this.$target=this.el.find("[data-field-validator]"),this.validatorName=this.$target.data("field-validator");const t=this.$target.data("validator-options");this.options=t&&AGN.Lib.Helpers.objFromString(t)||{}}valid(){return!this.errors().length}errors(){return!this.$target.exists()||this.$target.prop("disabled")?[]:this.#h().map(e=>e.errors(this.$target,this.options)).flat()}#h(){const e=[];return this.validatorName.split(",").map(e=>e.trim()).forEach(t=>{const i=AGN.Lib.Validator.get(t);i?e.push(i):console.debug(`Validator \`${t}\` doesn't exist`)}),e}isInitializedFor(e){return super.isInitializedFor(e)||this.$target.is(e)}}AGN.Lib.CustomField=e,AGN.Opt.Fields.validator=e})(),(()=>{class e extends AGN.Lib.Field{constructor(e){super(e),this.$source=this.el.find("[data-field-split]"),this.targets=this.$source.data("field-split").split(/,\s?/),this.rule=new RegExp(this.$source.data("field-split-rule"))}valid(){const e=AGN.Lib.Form.get(this.el),t=this.$source.val().split(this.rule);return _.each(this.targets,(i,n)=>{e.setValueOnce(i,t[n])}),!0}}AGN.Lib.ValueSplitField=e,AGN.Opt.Fields.split=e})(),(()=>{class e{constructor(e,t,i){const n=this;t=_.bind(t,this),i=i&&i.exists()?i.first():$(document),_.each(e,(e,o)=>{i.on(o,e,function(e,i){n.event=e,n.trigger=o,n.el=$(this),n.data=i,t(n.el,n.event,n.data,n.trigger);const r=$(n.event.target);(r.is("a")||1===r.parent("a").length)&&n.event.preventDefault()})})}static new(t,i,n){new e(t,i,n)}static translate(e){const t={};return _.each(e,function(e,i){e=e.split(/,\s?/),e=_.map(e,e=>`[data-action="${e}"]`).join(", "),t[i]=e}),t}}AGN.Lib.Action=e})(),(()=>{function e(e){return`autosave#${e}`}AGN.Lib.AutoSave={initialize(i,n,o,r,s){const a=function(i,n,o){const r=e(i),s=AGN.Lib.Storage.get(r);if(s){const e=n?n(s.values,s.timestamp):s.values;if(e){const i=AGN.Lib.Template.text("autosave-restore",{title:t("autosave.confirm.title"),content:t("autosave.confirm.question",new Date(s.timestamp).toLocaleString(window.adminLocale,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))});return AGN.Lib.Confirm.create(i).done(()=>{o(!0===e?s.values:e,s.timestamp),AGN.Lib.Messages(t("autosave.success.title"),t("autosave.success.message"),"success")}).always(()=>AGN.Lib.Storage.delete(r)).promise()}AGN.Lib.Storage.delete(r)}return $.Deferred().reject().promise()}(i,o,r);return function(t,i,n){const o=()=>{const n=i();return n&&AGN.Lib.Storage.set(e(t),{timestamp:(new Date).getTime(),values:n}),!1!==n};if(n>0){const e=setInterval(()=>{o()||clearInterval(e)},1e3*n)}const r=function(){o()||$(document).unbind("ajax:unauthorized",r)};$(document).on("ajax:unauthorized",r)}(i,n,s),a},clear(t){AGN.Lib.Storage.delete(e(t))}}})(),AGN.Lib.ChartUtils={getTotal:e=>e.reduce((e,t)=>e+t,0),calcExactPercentages:function(e){const t=this.getTotal(e);return e.map(e=>e/t*100)}},AGN.Lib.Clipboard={set:function(e,t){!function(e,t){try{navigator.clipboard.writeText(e).then(function(){t(!0)},function(){t(!1)})}catch(e){console.warn(e),t(!1)}}(e,function(i){i?t&&t(e,!0):function(e,t){var i=!0;try{var n=$("<input>");$("body").append(n),n.val(e),n.select(),document.execCommand("copy"),n.remove()}catch(e){console.warn(e),i=!1}t&&t(i)}(e,function(i){t&&t(e,i)})})}},(()=>{class e{static DATA_KEY="agn:colorpicker";static get(t){return t.data(e.DATA_KEY)}constructor(t){this.$el=t,this.$trigger=this.#p(),t.spectrum({showInput:!0,allowEmpty:!0,preferredFormat:"hex",move:e=>{t.val(e.toHexString()),this.$trigger.val(e.toHexString()),this.#g(e)},change:e=>{this.#g(e)}}),this.#g(t.spectrum("get")),t.data(e.DATA_KEY,this)}#p(){const e=this.$el.clone();return this.$el.attr("id")&&e.attr("id",this.$el.attr("id")+"_colorpicker"),e.attr("name",""),e.removeClass("js-colorpicker"),this.$el.before(e),e.on("input",()=>{const t=e.val();this.$el.spectrum("set",t),this.#g(this.$el.spectrum("get"))}),e.on("blur",()=>e.val(this.$el.val())),this.$el.on("change",()=>{e.val(this.$el.val()),this.$el.spectrum("set",this.$el.val())}),e}#g(e){const t=e?this.#f(e.toHexString()):this.$el.css("--bs-body-color");this.$el.parent().find(".sp-preview").css("color",t)}#f(e){return AGN.Lib.Helpers.getColorLuminance(e)>.5?"#000":"#FFF"}}AGN.Lib.Colorpicker=e})(),(()=>{class e{constructor(e,t){this.$modal=e,this.deferred=t||$.Deferred()}promise(){return this.deferred.promise()}positive(e){this.deferred.resolve(e),this.$modal.modal("hide"),this.$modal.remove()}negative(e){this.deferred.reject(e),this.$modal.modal("hide"),this.$modal.remove()}static get(t){return e.getWrapper(t).data("_confirm")}static getWrapper(e){return e.closest(".modal")}static create(t,i){const n=AGN.Lib.Modal.create(t),o=new e(n,i);return n&&n.data("_confirm",o),o.promise()}static from(t,i={},n){const o=AGN.Lib.Modal.fromTemplate(t,i),r=new e(o,n);return o.data("_confirm",r),r.promise()}static request(t){const i=$.Deferred();let n;return n=_.isString(t)?$.get(t):t,n.done(t=>{const n=$(t).all(".modal");if(1===n.length){const t=new e(n,i);n.data("_confirm",t),AGN.Lib.Modal.create(n)}else"object"==typeof t&&"success"in t?(AGN.Lib.JsonMessages(t.popups,!0),t.success?i.resolve():i.reject()):(AGN.Lib.Page.render(t),i.reject())}).fail(()=>i.reject()),i.promise()}}AGN.Lib.Confirm=e})(),AGN.Lib.ContextMenu={create:function(e){$.each(e,function(e,t){$.contextMenu({selector:e,build:function(e,i){return function(e,t,i){if(!1===e.shown||_.isFunction(e.shown)&&!1===e.shown(t,i))return!1;var n=e.items;_.isFunction(n)&&(n=n(t,i));var o={},r=0;return $.each(n,function(e,n){if(!_.isFunction(n.shown)||!1!==n.shown(t,i)){var s=o[e]={name:n.name,icon:n.icon};_.isFunction(n.disabled)?s.disabled=!0===n.disabled(t,i):!0===n.disabled&&(s.disabled=!0),_.isFunction(n.clicked)&&(s.callback=function(e,i){n.clicked(t,e,i)}),r++}}),!!r&&{items:o}}(t,e,i)}})})}},(()=>{const e=function(e){(e=_.bind(e,this))(this)};e.prototype.addAction=function(e,t){AGN.Lib.Action.new(AGN.Lib.Action.translate(e),t)},e.prototype.addInitializer=function(e,t){AGN.Lib.CoreInitializer.new(e,t)},e.prototype.addDomInitializer=function(e,t){AGN.Lib.DomInitializer.new(e,t)},e.prototype.runInitializer=function(e){AGN.Lib.CoreInitializer.run(e)},e.new=function(e,t){AGN.Opt.Controllers[e]=t},e.newExtended=function(t,i,n){e.new(t,t=>{const o=AGN.Opt.Controllers[i];o&&new e(o),_.bind(n,t)(t)})},e.init=function(e=$(document)){e.all("[data-controller]").each(function(){const e=$(this).data("controller"),t=AGN.Opt.Controllers[e];t&&(new AGN.Lib.Controller(t),AGN.Opt.Controllers[e]=void 0)})},AGN.Lib.Controller=e})(),function(){var e={};function t(i,n,o,r){var s="key#"+n.name;if(!o[s]){Array.isArray(n.dependencies)&&n.dependencies.length&&(r.push(n.name),n.dependencies.forEach(function(n){var s=e["key#"+n];if(s){if(r.includes(n)){var a=r.map(function(e){return"`"+e+"`"}).join(" => ");return void console.error("Cyclic initializer dependency detected ("+a+" => `"+n+"`)")}t(i,s,o,r)}else console.error("Unknown initializer dependency: `"+name+"`")}),r.pop());try{n.handler.call(n.handler,i)}catch(e){console.error(e)}o[s]=!0}}AGN.Lib.CoreInitializer={autorun:function(i){var n={},o=[];$.each(e,function(e,r){t(i,r,n,o)})},run:function t(i,n){if(!Array.isArray(i)){var o=e["key#"+i];return o?(o.handler.call(o.handler,n),!0):(console.error("Unknown initializer: `"+i+"`"),!1)}i.forEach(function(e){t(e,n)})},new:function(t){var i,n=null;arguments.length>2?(n=arguments[1],i=arguments[2]):i=arguments[1],_.isFunction(i)?e["key#"+t]={name:t,handler:i,dependencies:n}:console.error("Handler must be a function")}}}(),(()=>{class e{static HEADER_NAME="";static COOKIE_NAME="";static PARAM_NAME="";static getParameterName(){return this.PARAM_NAME}static getCookieName(){return this.COOKIE_NAME}static getHeaderName(){return this.HEADER_NAME}static setHeaderName(e){this.HEADER_NAME=e}static setParamName(e){this.PARAM_NAME=e}static setCookieName(e){this.COOKIE_NAME=e}static isProtectionEnabled(){return this.getHeaderName()&&this.getParameterName()&&this.getCookieName()}static readActualToken(){return e.isProtectionEnabled()?AGN.Lib.Storage.readCookie(this.getCookieName()):""}static setTokenToReqHeader(e,t){"GET"!==t&&e.setRequestHeader(this.getHeaderName(),this.readActualToken())}static updateTokenInDOM(e=$(document)){if(!this.isProtectionEnabled())return e;const t=!(e instanceof $);t&&(e=$("<div>").append(e));const i=this.readActualToken(),n=e.find(`input[name="${this.getParameterName()}"]`);return _.each(n,e=>{t?$(e).attr("value",i):$(e).val(i)}),t?e.html():void 0}}AGN.Lib.CSRF=e})(),function(){var e={get:function(t){var i,n=t.data("provider"),o=t.data("provider-src");switch(n){case"opt":i=e.opt(o);break;case"remote":i=e.remote(o)}return i},opt:function(e){var t=$.Deferred();return AGN.Opt[e]?setTimeout(function(){t.resolve(AGN.Opt[e])},100):setTimeout(function(){t.reject()},100),t},remote:function(e){return $.get(e)}};AGN.Lib.DataProvider=e}(),function(){let e;const t={"ar-SA":"dd/MM/yy","bg-BG":"dd.M.yyyy","ca-ES":"dd/MM/yyyy","zh-TW":"yyyy/M/d","cs-CZ":"d.M.yyyy","da-DK":"dd-MM-yyyy","de-DE":"dd.MM.yyyy","el-GR":"d/M/yyyy","en-US":"M/d/yyyy","fi-FI":"d.M.yyyy","fr-FR":"dd/MM/yyyy","he-IL":"dd/MM/yyyy","hu-HU":"yyyy. MM. dd.","is-IS":"d.M.yyyy","it-IT":"dd/MM/yyyy","ja-JP":"yyyy/MM/dd","ko-KR":"yyyy-MM-dd","nl-NL":"d-M-yyyy","nb-NO":"dd.MM.yyyy","pl-PL":"yyyy-MM-dd","pt-BR":"d/M/yyyy","ro-RO":"dd.MM.yyyy","ru-RU":"dd.MM.yyyy","hr-HR":"d.M.yyyy","sk-SK":"d. M. yyyy","sq-AL":"yyyy-MM-dd","sv-SE":"yyyy-MM-dd","th-TH":"d/M/yyyy","tr-TR":"dd.MM.yyyy","ur-PK":"dd/MM/yyyy","id-ID":"dd/MM/yyyy","uk-UA":"dd.MM.yyyy","be-BY":"dd.MM.yyyy","sl-SI":"d.M.yyyy","et-EE":"d.MM.yyyy","lv-LV":"yyyy.MM.dd.","lt-LT":"yyyy.MM.dd","fa-IR":"MM/dd/yyyy","vi-VN":"dd/MM/yyyy","hy-AM":"dd.MM.yyyy","az-Latn-AZ":"dd.MM.yyyy","eu-ES":"yyyy/MM/dd","mk-MK":"dd.MM.yyyy","af-ZA":"yyyy/MM/dd","ka-GE":"dd.MM.yyyy","fo-FO":"dd-MM-yyyy","hi-IN":"dd-MM-yyyy","ms-MY":"dd/MM/yyyy","kk-KZ":"dd.MM.yyyy","ky-KG":"dd.MM.yy","sw-KE":"M/d/yyyy","uz-Latn-UZ":"dd/MM yyyy","tt-RU":"dd.MM.yyyy","pa-IN":"dd-MM-yy","gu-IN":"dd-MM-yy","ta-IN":"dd-MM-yyyy","te-IN":"dd-MM-yy","kn-IN":"dd-MM-yy","mr-IN":"dd-MM-yyyy","sa-IN":"dd-MM-yyyy","mn-MN":"yy.MM.dd","gl-ES":"dd/MM/yy","kok-IN":"dd-MM-yyyy","syr-SY":"dd/MM/yyyy","dv-MV":"dd/MM/yy","ar-IQ":"dd/MM/yyyy","zh-CN":"yyyy/M/d","de-CH":"dd.MM.yyyy","en-GB":"dd/MM/yyyy","es-MX":"dd/MM/yyyy","fr-BE":"d/MM/yyyy","it-CH":"dd.MM.yyyy","nl-BE":"d/MM/yyyy","nn-NO":"dd.MM.yyyy","pt-PT":"dd-MM-yyyy","sr-Latn-CS":"d.M.yyyy","sv-FI":"d.M.yyyy","az-Cyrl-AZ":"dd.MM.yyyy","ms-BN":"dd/MM/yyyy","uz-Cyrl-UZ":"dd.MM.yyyy","ar-EG":"dd/MM/yyyy","zh-HK":"d/M/yyyy","de-AT":"dd.MM.yyyy","en-AU":"d/MM/yyyy","es-ES":"dd/MM/yyyy","fr-CA":"yyyy-MM-dd","sr-Cyrl-CS":"d.M.yyyy","ar-LY":"dd/MM/yyyy","zh-SG":"d/M/yyyy","de-LU":"dd.MM.yyyy","en-CA":"dd/MM/yyyy","es-GT":"dd/MM/yyyy","fr-CH":"dd.MM.yyyy","ar-DZ":"dd-MM-yyyy","zh-MO":"d/M/yyyy","de-LI":"dd.MM.yyyy","en-NZ":"d/MM/yyyy","es-CR":"dd/MM/yyyy","fr-LU":"dd/MM/yyyy","ar-MA":"dd-MM-yyyy","en-IE":"dd/MM/yyyy","es-PA":"MM/dd/yyyy","fr-MC":"dd/MM/yyyy","ar-TN":"dd-MM-yyyy","en-ZA":"yyyy/MM/dd","es-DO":"dd/MM/yyyy","ar-OM":"dd/MM/yyyy","en-JM":"dd/MM/yyyy","es-VE":"dd/MM/yyyy","ar-YE":"dd/MM/yyyy","en-029":"MM/dd/yyyy","es-CO":"dd/MM/yyyy","ar-SY":"dd/MM/yyyy","en-BZ":"dd/MM/yyyy","es-PE":"dd/MM/yyyy","ar-JO":"dd/MM/yyyy","en-TT":"dd/MM/yyyy","es-AR":"dd/MM/yyyy","ar-LB":"dd/MM/yyyy","en-ZW":"M/d/yyyy","es-EC":"dd/MM/yyyy","ar-KW":"dd/MM/yyyy","en-PH":"M/d/yyyy","es-CL":"dd-MM-yyyy","ar-AE":"dd/MM/yyyy","es-UY":"dd/MM/yyyy","ar-BH":"dd/MM/yyyy","es-PY":"dd/MM/yyyy","ar-QA":"dd/MM/yyyy","es-BO":"dd/MM/yyyy","es-SV":"dd/MM/yyyy","es-HN":"dd/MM/yyyy","es-NI":"dd/MM/yyyy","es-PR":"dd/MM/yyyy","am-ET":"d/M/yyyy","tzm-Latn-DZ":"dd-MM-yyyy","iu-Latn-CA":"d/MM/yyyy","sma-NO":"dd.MM.yyyy","mn-Mong-CN":"yyyy/M/d","gd-GB":"dd/MM/yyyy","en-MY":"d/M/yyyy","prs-AF":"dd/MM/yy","bn-BD":"dd-MM-yy","wo-SN":"dd/MM/yyyy","rw-RW":"M/d/yyyy","qut-GT":"dd/MM/yyyy","sah-RU":"MM.dd.yyyy","gsw-FR":"dd/MM/yyyy","co-FR":"dd/MM/yyyy","oc-FR":"dd/MM/yyyy","mi-NZ":"dd/MM/yyyy","ga-IE":"dd/MM/yyyy","se-SE":"yyyy-MM-dd","br-FR":"dd/MM/yyyy","smn-FI":"d.M.yyyy","moh-CA":"M/d/yyyy","arn-CL":"dd-MM-yyyy","ii-CN":"yyyy/M/d","dsb-DE":"d. M. yyyy","ig-NG":"d/M/yyyy","kl-GL":"dd-MM-yyyy","lb-LU":"dd/MM/yyyy","ba-RU":"dd.MM.yy","nso-ZA":"yyyy/MM/dd","quz-BO":"dd/MM/yyyy","yo-NG":"d/M/yyyy","ha-Latn-NG":"d/M/yyyy","fil-PH":"M/d/yyyy","ps-AF":"dd/MM/yy","fy-NL":"d-M-yyyy","ne-NP":"M/d/yyyy","se-NO":"dd.MM.yyyy","iu-Cans-CA":"d/M/yyyy","sr-Latn-RS":"d.M.yyyy","si-LK":"yyyy-MM-dd","sr-Cyrl-RS":"d.M.yyyy","lo-LA":"dd/MM/yyyy","km-KH":"yyyy-MM-dd","cy-GB":"dd/MM/yyyy","bo-CN":"yyyy/M/d","sms-FI":"d.M.yyyy","as-IN":"dd-MM-yyyy","ml-IN":"dd-MM-yy","en-IN":"dd-MM-yyyy","or-IN":"dd-MM-yy","bn-IN":"dd-MM-yy","tk-TM":"dd.MM.yy","bs-Latn-BA":"d.M.yyyy","mt-MT":"dd/MM/yyyy","sr-Cyrl-ME":"d.M.yyyy","se-FI":"d.M.yyyy","zu-ZA":"yyyy/MM/dd","xh-ZA":"yyyy/MM/dd","tn-ZA":"yyyy/MM/dd","hsb-DE":"d. M. yyyy","bs-Cyrl-BA":"d.M.yyyy","tg-Cyrl-TJ":"dd.MM.yy","sr-Latn-BA":"d.M.yyyy","smj-NO":"dd.MM.yyyy","rm-CH":"dd/MM/yyyy","smj-SE":"yyyy-MM-dd","quz-EC":"dd/MM/yyyy","quz-PE":"dd/MM/yyyy","hr-BA":"d.M.yyyy.","sr-Latn-ME":"d.M.yyyy","sma-SE":"yyyy-MM-dd","en-SG":"d/M/yyyy","ug-CN":"yyyy-M-d","sr-Cyrl-BA":"d.M.yyyy","es-US":"M/d/yyyy"};e={MONTH_NAMES:["January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAY_NAMES:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat"],LZ:function(e){return(e<0||e>9?"":"0")+e},compareDates:function(t,i,n,o){var r=e.parseFormat(t,i),s=e.parseFormat(n,o);return 0==r||0==s?-1:r>s?1:0},format:function(t,i){i+="";var n="",o=0,r="",s="",a=t.getYear()+"",l=t.getMonth()+1,c=t.getDate(),d=t.getDay(),u=t.getHours(),h=t.getMinutes(),p=t.getSeconds(),g=new Object;for(a.length<4&&(a=""+(a-0+1900)),g.y=""+a,g.yyyy=a,g.yy=a.substring(2,4),g.M=l,g.MM=e.LZ(l),g.MMM=e.MONTH_NAMES[l-1],g.NNN=e.MONTH_NAMES[l+11],g.d=c,g.dd=e.LZ(c),g.E=e.DAY_NAMES[d+7],g.EE=e.DAY_NAMES[d],g.H=u,g.HH=e.LZ(u),g.h=0==u?12:u>12?u-12:u,g.hh=e.LZ(g.h),g.K=u>11?u-12:u,g.k=u+1,g.KK=e.LZ(g.K),g.kk=e.LZ(g.k),g.a=u>11?"PM":"AM",g.m=h,g.mm=e.LZ(h),g.s=p,g.ss=e.LZ(p);o<i.length;){for(r=i.charAt(o),s="";i.charAt(o)==r&&o<i.length;)s+=i.charAt(o++);null!=g[s]?n+=g[s]:n+=s}return n},_isInteger:function(e){for(var t=0;t<e.length;t++)if(-1=="1234567890".indexOf(e.charAt(t)))return!1;return!0},_getInt:function(t,i,n,o){for(var r=o;r>=n;r--){var s=t.substring(i,i+r);if(s.length<n)return null;if(e._isInteger(s))return s}return null},parseFormat:function(t,i){t+="",i+="";for(var n,o=0,r=0,s="",a="",l=new Date,c=l.getYear(),d=l.getMonth()+1,u=1,h=l.getHours(),p=l.getMinutes(),g=l.getSeconds(),f="";r<i.length;){for(s=i.charAt(r),a="";i.charAt(r)==s&&r<i.length;)a+=i.charAt(r++);if("yyyy"==a||"yy"==a||"y"==a){if("yyyy"==a&&(n=4),"yy"==a&&(n=2),"y"==a&&(n=2),null==(c=e._getInt(t,o,n,4)))return 0;o+=c.length,2==c.length&&(c=c>70?c-0+1900:c-0+2e3)}else if("MMM"==a||"NNN"==a){d=0;for(var m=0;m<e.MONTH_NAMES.length;m++){var v=e.MONTH_NAMES[m];if(t.substring(o,o+v.length).toLowerCase()==v.toLowerCase()&&("MMM"==a||"NNN"==a&&m>11)){(d=m+1)>12&&(d-=12),o+=v.length;break}}if(d<1||d>12)return 0}else if("EE"==a||"E"==a)for(m=0;m<e.DAY_NAMES.length;m++){var b=e.DAY_NAMES[m];if(t.substring(o,o+b.length).toLowerCase()==b.toLowerCase()){o+=b.length;break}}else if("MM"==a||"M"==a){if(null==(d=e._getInt(t,o,a.length,2))||d<1||d>12)return 0;o+=d.length}else if("dd"==a||"d"==a){if(null==(u=e._getInt(t,o,a.length,2))||u<1||u>31)return 0;o+=u.length}else if("hh"==a||"h"==a){if(null==(h=e._getInt(t,o,a.length,2))||h<1||h>12)return 0;o+=h.length}else if("HH"==a||"H"==a){if(null==(h=e._getInt(t,o,a.length,2))||h<0||h>23)return 0;o+=h.length}else if("KK"==a||"K"==a){if(null==(h=e._getInt(t,o,a.length,2))||h<0||h>11)return 0;o+=h.length}else if("kk"==a||"k"==a){if(null==(h=e._getInt(t,o,a.length,2))||h<1||h>24)return 0;o+=h.length,h--}else if("mm"==a||"m"==a){if(null==(p=e._getInt(t,o,a.length,2))||p<0||p>59)return 0;o+=p.length}else if("ss"==a||"s"==a){if(null==(g=e._getInt(t,o,a.length,2))||g<0||g>59)return 0;o+=g.length}else if("a"==a){if("am"==t.substring(o,o+2).toLowerCase())f="AM";else{if("pm"!=t.substring(o,o+2).toLowerCase())return 0;f="PM"}o+=2}else{if(t.substring(o,o+a.length)!=a)return 0;o+=a.length}}if(o!=t.length)return 0;if(2==d)if(c%4==0&&c%100!=0||c%400==0){if(u>29)return 0}else if(u>28)return 0;return(4==d||6==d||9==d||11==d)&&u>30?0:(h<12&&"PM"==f?h=h-0+12:h>11&&"AM"==f&&(h-=12),new Date(c,d-1,u,h,p,g))},parse:function(t,i){if(i)return e.parseFormat(t,i);for(var n=2==arguments.length&&arguments[1],o=new Array("y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d"),r=new Array("M/d/y","M-d-y","M.d.y","MMM-d","M/d","M-d"),s=new Array("d/M/y","d-M-y","d.M.y","d-MMM","d/M","d-M"),a=[o,n?s:r,n?r:s],l=null,c=0;c<a.length;c++)for(var d=a[c],u=0;u<d.length;u++)if(0!=(l=e.parseFormat(t,d[u])))return new Date(l);return null},toArray:function(e,t){return e&&e.getMonth?[e.getFullYear(),e.getMonth(),e.getDate()]:t},getLocaleShortDateString:function(e){var i=navigator.language?navigator.language:navigator.userLanguage,n=e.getFullYear(),o=e.getMonth()+1,r=(e=e.getDate(),i in t?t[i]:"MM/dd/yyyy");function s(e){return(e=""+e).length>1?e:"0"+e}return r=(r=(r=(r=(r=(r=r.replace(/yyyy/,n)).replace(/yy/,String(n).substr(2))).replace(/MM/,s(o))).replace(/M/,o)).replace(/dd/,s(e))).replace(/d/,e)},getLocaleDateFormat:function(){var e=navigator.language?navigator.language:navigator.userLanguage;return e in t?t[e]:"MM/dd/yyyy"},getLocalizedShortWeekdays:function(e,t){const i=[],n=new Date,o={weekday:"short"};n.setDate(n.getDate()-n.getDay()+t);for(let t=0;t<7;t++){const t=n.toLocaleDateString(e,o);i.push(t),n.setDate(n.getDate()+1)}return i},formatAdminDateTime:function(e){if(!e)return"";const t=window.adminDateTimeFormat.replaceAll("d","D").replaceAll("y","Y");return moment(e).format(t)},formatAdminDate:function(e){if(!e)return"";const t=window.adminDateFormat.replaceAll("d","D").replaceAll("y","Y");return moment(e).format(t)}},AGN.Lib.DateFormat=e}(),function(){var e="config:",t={};function i(t,i){if(this.el=t,t.is('script[type="application/json"]'))this.config=t.json();else{const o=function(t,i){const n="script#"+CSS.escape(e+i),o=t.find(n);if(o.exists())return o;return $(n)}(t,i);if(o.exists()){var n=o.attr("type");n&&"application/json"!==n?console.error("Unexpected config script type: `"+n+"`"):this.config=o.json()}}}function n(e,n,o){var r=t["key#"+e];return!!r&&(!1===r.call(new i(n,e),n,o)&&(t["key#"+e]=void 0),!0)}i.prototype.addAction=function(e,t){AGN.Lib.Action.new(AGN.Lib.Action.translate(e),t,this.el)},AGN.Lib.DomInitializer={autorun:function(e){var t=e;t||(t=$(document)),t.all("[data-initializer]").each(function(){var t=$(this);n(t.data("initializer"),t,e)})},run:n,try:function(e,i){if(t["key#"+e]){var o=i;o||(o=$(document)),o.all('[data-initializer="'+CSS.escape(e)+'"]').each(function(){n(e,$(this),i)})}},new:function(e,i){_.isFunction(i)?t["key#"+e]=i:console.error("Handler must be a function")}}}(),(()=>{const e="main",i="visible",n="hidden";class o{static DATA_KEY="agn:editable-tile";static SELECTOR="[data-editable-tile]";constructor(e,t){this.$el=e,this.state=t,this.toggle(),this.setOverlay(),this.$el.data(o.DATA_KEY,this)}static get(e){return e.closest(o.SELECTOR).data(o.DATA_KEY)}toggleState(){this.state===i?this.state=n:this.state=i,this.setOverlay()}toggle(){this.$el.toggleClass("tile--hidden",this.state===n)}setOverlay(){const e=AGN.Lib.Template.dom("tile-overlay",{state:this.state});this.$overlay&&document.body.contains(this.$overlay[0])?this.$overlay.replaceWith(e):this.$el.append(e),this.$overlay=e}}AGN.Lib.EditableTile=o;class r{static DATA_KEY="agn:editable-view";static SELECTOR="[data-editable-view]";constructor(e,t){this.$el=e,this.name=t,this.inEditMode=!1,this.$btn=$(`[data-edit-view="${t}"]`),this.$btnSiblings=this.$btn.closest("li").siblings("li:visible"),this.config=AGN.Lib.Storage.get(this.#m())||{},this.tiles=this.#v(),this.#b(),this.$el.addClass("is-initialized"),this.$el.data(r.DATA_KEY,this),this.#y()}static get(e){return e.closest(r.SELECTOR).data(r.DATA_KEY)}enableEditMode(){this.inEditMode=!0,this.$el.addClass("edit-mode"),this.#b(),this.#y(),this.$btnSiblings.hide()}applyChanges(){this.inEditMode=!1,this.$el.removeClass("edit-mode"),this.$btnSiblings.show();const t={};this.tiles.forEach(i=>{i.toggle(),i.state!==e&&(t[i.$el.attr("id")]=i.state)}),this.#b(),AGN.Lib.Storage.set(this.#m(),t),AGN.Lib.Messages.success("editableView.saved"),this.#y()}#w(){return this.#C(n).length}#y(){const e=this.$btn.find(".text");if(this.isInEditMode())e.text(t("editableView.save"));else{e.text(t("editableView.edit"));const i=this.#w();i>0&&e.append(` (${i} <i class="icon icon-eye-slash"></i>)`)}}toggleState(e){const t=this.#C(n),r=o.get(e);t.length===this.tiles.length-1&&r.state===i?AGN.Lib.Messages.alert("editableView.tile.error.cantRemove"):r.toggleState()}#C(e){return this.tiles.filter(t=>t.state===e)}isInEditMode(){return this.inEditMode}#v(){const e=this,t=new Map;this.$el.find(o.SELECTOR).each(function(){const i=$(this),n=e.getTileState(i);t.set(i,n)});const r=[...t.values()].every(e=>e===n);return Array.from(t,([e,t])=>new o(e,r?i:t))}getTileState(e){return e.data("editable-tile")||this.config[e.attr("id")]||i}#b(){this.tiles.flatMap(e=>e.$el.parentsUntil(this.$el).toArray().map(e=>$(e))).forEach(e=>e.toggleClass("tile-container--hidden",this.#_(e)))}#_(e){return!this.inEditMode&&e.find(o.SELECTOR).toArray().every(e=>o.get($(e)).state===n)}#m(){return`editable-view#${this.name}`}#S(e){const t=o.get(e);return t&&this.tiles.includes(t)}add(e){if(this.#S(e))return void o.get(e).setOverlay();const t=new o(e,this.getTileState(e));this.tiles.push(t),this.#b(),this.#y()}}AGN.Lib.EditableView=r})(),(()=>{let e,t,i,n;const o=function(e){const t=this;let i;this.el=$(e);const n=!!this.el.attr("readonly");this.isFullHeight=!!this.el.data("full-height-editor"),this.height=15*parseInt(this.el.attr("rows")||15);const o=this.el.attr("id")+"Editor";let r=$(`#${o}`);if(1===r.length){i=o;const e=r.data("full-height-editor");r.css("height",e?"100%":this.height+"px")}else i=_.uniqueId("Editor"),r=$(`<div id="${i}" class="form-control"></div>`),r.css("height",this.isFullHeight?"100%":this.height+"px"),r.insertAfter($(this.el));this.el.hide(),this.editor=ace.edit(i),this.editor.setReadOnly(n),this.editor.getSession().setValue(this.el.val()),this.editor.getSession().on("change",function(e){t.el.val(t.editor.getSession().getValue()),t.el.trigger("editor:change")}),this.langTools=ace.require("ace/ext/language_tools"),this.decorate(),this.el.hasClass("js-editor-validate")&&this.editor.getSession().setUseWorker(!0),this.el.hasClass("js-editor-wrap")&&this.editor.getSession().setUseWrapMode(!0),this.el.trigger("editor:create")};o.get=function(o){let r=o.data("_editor");return r||(o.hasClass("js-editor")?r=new e(o):o.hasClass("js-editor-text")?r=new t(o):o.hasClass("js-editor-eql")?r=new i(o):o.hasClass("js-editor-css")&&(r=new n(o)),o.data("_editor",r),r)},o.exists=function(e){return!!e.data("_editor")},o.all=function(e=$(document)){return _.map(e.all(".js-editor, .js-editor-text, .js-editor-eql, .js-editor-css"),function(e){return o.get($(e))})},o.prototype.decorate=function(){AGN.Lib.Helpers.isDarkTheme()?this.editor.setTheme("ace/theme/idle_fingers"):this.editor.setTheme("ace/theme/chrome"),this.editor.session.setUseWrapMode(!0),this.editor.session.setWrapLimitRange(null,null),this.editor.setBehavioursEnabled(!0),this.editor.setShowPrintMargin(!1),this.editor.session.setUseSoftTabs(!0),this.editor.getSession().setUseWorker(!1),this.editor.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,minLines:20})},o.prototype.resize=function(){this.editor.resize()},o.prototype.val=function(e,t=!1){if(void 0===e)return this.editor.getSession().getValue();{const i=this.editor.getSelection().getCursor();this.editor.getSession().setValue(e),t&&this.goToLine(i.row+1,i.column)}},o.prototype.goToLine=function(e,t){this.editor.focus(),this.editor.gotoLine(e,t)},e=function(e){o.apply(this,e)},e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.decorate=function(){o.prototype.decorate.call(this),this.editor.getSession().setMode("ace/mode/html")},t=function(e){o.apply(this,e)},t.prototype=Object.create(o.prototype),t.prototype.constructor=t,t.prototype.decorate=function(){AGN.Lib.Helpers.isDarkTheme()?this.editor.setTheme("ace/theme/idle_fingers"):this.editor.setTheme("ace/theme/chrome"),this.editor.session.setUseWrapMode(!1),this.editor.session.setWrapLimitRange(null,null),this.editor.setBehavioursEnabled(!0),this.editor.setShowPrintMargin(!1),this.editor.session.setUseSoftTabs(!0),this.editor.getSession().setUseWorker(!1),this.editor.setOptions({enableBasicAutocompletion:!1,enableSnippets:!1,enableLiveAutocompletion:!1,minLines:20}),this.editor.getSession().setMode("ace/mode/text")},i=function(e){o.apply(this,e)},i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.decorate=function(){AGN.Lib.Helpers.isDarkTheme()?this.editor.setTheme("ace/theme/idle_fingers"):this.editor.setTheme("ace/theme/chrome"),this.editor.session.setUseWrapMode(!1),this.editor.session.setWrapLimitRange(null,null),this.editor.setBehavioursEnabled(!0),this.editor.setShowPrintMargin(!1),this.editor.session.setUseSoftTabs(!0),this.editor.getSession().setUseWorker(!1),this.langTools.setCompleters([this.langTools.keyWordCompleter,this.langTools.snippetCompleter]),this.editor.setOptions({enableBasicAutocompletion:!0,enableSnippets:!1,enableLiveAutocompletion:!0,minLines:20}),ace.config.loadModule("ace/ext/eql_constructions_tokens"),ace.config.loadModule("ace/ext/eql_constructions_basic"),ace.config.loadModule("ace/ext/eql_constructions_extended"),this.editor.getSession().setMode("ace/mode/eql")},n=function(e){o.apply(this,e)},n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.decorate=function(){o.prototype.decorate.call(this),this.editor.getSession().setMode("ace/mode/css")},AGN.Lib.Editor=o,AGN.Lib.EditorHtml=e,AGN.Lib.EditorText=t,AGN.Lib.EditorEql=i,AGN.Lib.EditorCss=n})(),(()=>{class e{static DATA_ATTR_NAME="agn:endless-scroll";constructor(t,i,n={}){this.$el=t,this.url=i,this.options=n,this.currentPage=0,this.allPagesLoaded=!1,this.$loader=n.loader?$(n.loader):null,this.$content=t.find("[data-endless-scroll-content]"),this.$content.exists()||(this.$content=t.find("> div:first")),this.$content.wrap('<div class="endless_scroll_inner_wrap"></div>'),t.endlessScroll({fireOnce:!0,fireDelay:1e3,loader:"",insertAfter:"",callback:()=>this.loadContent()}),this.loadContent(),t.data(e.DATA_ATTR_NAME,this)}static get(t){return t.data(e.DATA_ATTR_NAME)}load(e){this.$content.empty(),e&&(this.url=e),this.currentPage=0,this.allPagesLoaded=!1,this.loadContent()}loadContent(){if(this.allPagesLoaded)return;const e=this.$loader?.exists()&&this.$el.is(":visible");e&&(AGN.Lib.Loader.prevent(),this.$loader.removeClass("hidden"));const t=$.get(this.url,{page:this.currentPage+1});return t.done(t=>{this.currentPage+=1;const i=$(t),n=$(t).children();t instanceof Array&&this.$content.append(JSON.stringify(t)),this.$content.append(n),this.allPagesLoaded=i.is("[data-endless-scroll-stop]"),e&&this.$loader.addClass("hidden"),this.options.onLoad&&this.options.onLoad(n)}),t}}AGN.Lib.EndlessScroll=e})(),(()=>{class e{static defaults(){return[{active:!1,time:""}]}static create(t,i){return t=$.extend(e.defaults()[0],t),AGN.Lib.Template.dom(i?"schedule-extended-time-wrapper":"schedule-time-wrapper",{scheduleElement:t})}static get(e){return e.closest("[data-schedule-time-wrapper]")}}class i{constructor(e){e.exists()||(e=i.create({})),this.$rowWrapper=e}static defaults(){return{weekDay:"",scheduledInterval:{active:!1,interval:""},scheduledTime:[{active:!1,time:""}]}}static get(e){let t;return t=e.is("tr[data-schedule-row]")?e:e.closest("tr[data-schedule-row]"),new i(t)}static create(e){e=$.extend(i.defaults(),e);const t=AGN.Lib.Template.dom("schedule-day-row",{entry:e}),n=new i(t);return t.on("row:add-schedule row:remove-schedule",()=>{const e=t.find("[data-schedule-time-wrapper]").length,i=t.find('[data-action="remove-schedule"]'),n=t.find('[data-action="add-schedule"]');i.addClass("hidden"),n.addClass("hidden"),e>1&&i.slice(0,-1).removeClass("hidden"),n.last().removeClass("hidden")}),t.find("[data-schedule-interval]").on("change",function(){const e=n.isIntervalSelection(),i=t.find("[data-schedule-time-wrapper]");i.find(".btn").toggleClass("disabled",e),i.find(":input").prop("disabled",e),e||i.exists()||n.addSchedule()}),t}static deserialize(e){return e.scheduledInterval.active||e.scheduledTime.some(e=>e.active)?i.create(e):null}toJson(){const e=this.$rowWrapper.find("[data-schedule-dayOfTheWeek]").val(),t=this.isIntervalSelection(),n=_.map(this.$rowWrapper.find("[data-schedule-time-wrapper]"),e=>{const i=$(e).find("[data-schedule-time]").val();return{active:!t&&!!i,time:i}}),o={active:t,interval:this.$rowWrapper.find("[data-schedule-interval]").val()};return $.extend(i.defaults(),{weekDay:e,scheduledTime:n,scheduledInterval:o})}isIntervalSelection(e){return"0"!==this.$rowWrapper.find("[data-schedule-interval]").val()}addSchedule(t){const i=e.create(t,!0);this.$rowWrapper.find("[data-schedule-time-container]").append(i),AGN.runAll(i),this.$rowWrapper.trigger("row:add-schedule")}removeSchedule(t){e.get(t).remove(),this.$rowWrapper.trigger("row:remove-schedule")}getAllScheduleTimes(){const e=[];return this.toJson().scheduledTime.forEach(t=>{t.active&&e.push(parseInt(t.time.replace(":","")))}),e}isValidTimeIntervals(){const e=this.getAllScheduleTimes();return(new o).valid(e)}validateTimeIntervals(){return this.isValidTimeIntervals()?(this.hideTimeScheduleErrors(),!0):(this.showTimeScheduleErrors(t("error.delay.60")),!1)}showTimeScheduleErrors(e){const t=this.$rowWrapper.find("[data-schedule-time-wrapper]"),i=$(`<div class="form-control-feedback-message">${e}</div>`);_.each(t,e=>{const t=$(e);t.find(".form-control-feedback-message").exists()||(t.find("[data-schedule-time]").parent().append(i.clone()),t.addClass("has-alert has-feedback"))})}hideTimeScheduleErrors(){const e=this.$rowWrapper.find("[data-schedule-time-wrapper]");e.find(".form-control-feedback-message").remove(),e.removeClass("has-alert has-feedback")}}class n{constructor(e){e.exists()||(e=n.create({})),this.$rowWrapper=e}static defaults(){return{type:"1",weekDay:"",monthDay:"",scheduledTime:[{active:!1,time:""}]}}static get(e){let t;return t=e.is("tr[data-schedule-row]")?e:e.closest("tr[data-schedule-row]"),new n(t)}static create(e){e=$.extend(n.defaults(),e);const t=AGN.Lib.Template.dom("schedule-period-row",{entry:e}),i=new n(t);return t.on("row:add-schedule",function(){t.find("[data-schedule-time-wrapper]").length>1&&t.find('[data-action="remove-schedule"]').closest(".input-group-addon").removeClass("hidden")}),t.on("row:remove-schedule",function(){const e=t.find("[data-schedule-time-wrapper]");e.length<2&&t.find('[data-action="remove-schedule"]').closest(".input-group-addon").addClass("hidden"),0===e.length&&i.addSchedule()}),t}static deserialize(e,t){const i=$.extend(n.defaults(),e);return i.type=n._convertTypeToInt(e.type),i.monthDay=n._convertMonthToInt(e.monthDay),n.create(i)}static _convertTypeToInt(e){return"TYPE_MONTHLY"===e?2:1}static _convertMonthToInt(e){switch(e){case"TYPE_MONTHLY_FIRST":default:return 1;case"TYPE_MONTHLY_15TH":return 15;case"TYPE_MONTHLY_LAST":return 99}}toJson(){const e=this.$rowWrapper.find("[data-schedule-type]").val();let t,i;"TYPE_MONTHLY"==e?i=this.$rowWrapper.find("[data-schedule-day-of-month]").val():t=this.$rowWrapper.find("[data-schedule-day-of-week]").val();const o=_.map(this.$rowWrapper.find("[data-schedule-time-wrapper]"),e=>{const t=$(e).find(".time-checkbox");let i=!0;return t.exists()&&(i=!t.is(":disabled")&&t.is(":checked")),{active:i,time:$(e).find("[data-schedule-time]").val()}});return $.extend(n.defaults(),{type:e,weekDay:t,monthDay:i,scheduledTime:o})}addSchedule(t){const i=e.create(t);this.$rowWrapper.find("[data-schedule-time-container]").append(i),AGN.runAll(i),this.$rowWrapper.trigger("row:add-schedule")}removeSchedule(t){e.get(t).remove(),this.$rowWrapper.trigger("row:remove-schedule")}}class o{constructor(e){let t=100;e&&(t=Number(e)),this.intervalPad=t}static hasCorrectInterval(e,t,i){const n=this;let o=!0;return i.splice(t,1),i.forEach(t=>{Math.abs(t-e)<n&&(o=!1)}),o}valid(e){const t=this.intervalPad;return e.every(o.hasCorrectInterval,t)}}AGN.Lib.ScheduleTimeTable=class{constructor(e){this.$container=e.find("table tbody"),this.$container.on("scheduler:add-day scheduler:remove-day",()=>{const e=this.$container.find("[data-schedule-row]").length,t=this.$container.find('[data-action="remove-day"]'),i=this.$container.find('[data-action="add-day"]');t.addClass("hidden"),i.addClass("hidden"),e>1&&t.slice(0,-1).removeClass("hidden"),i.last().removeClass("hidden")})}clean(){this.$container.find("tr[data-schedule-row]").remove()}deleteRow(e){this.deleteRowByNeedle(e.$rowWrapper)}deleteRowByNeedle(e){this.$container.find(e).remove(),this.$container.trigger("scheduler:remove-day")}addRow(e){e&&(this.$container.append(e),AGN.runAll(e),this.$container.trigger("scheduler:add-day",e),e.trigger("row:add-schedule",e))}addEmptyDayRow(){this.addRow(i.create())}addEmptyPeriodRow(){this.addRow(n.create())}getAllDayRows(){const e=this.$container.find("tr[data-schedule-row]");return _.map(e,e=>i.get($(e)))}getAllPeriodRows(){const e=this.$container.find("tr[data-schedule-row]");return _.map(e,e=>n.get($(e)))}getSubmissionJson(e){let t={};return"day"==e?t=_.map(this.getAllDayRows(),e=>e.toJson()):"period"==e&&(t=_.map(this.getAllPeriodRows(),e=>e.toJson())),JSON.stringify(t)}},AGN.Lib.ScheduleTimeTable.DayRow=i,AGN.Lib.ScheduleTimeTable.PeriodRow=n})(),(()=>{const e=AGN.Lib.Field,i=AGN.Lib.CSRF;class n{static scrollTo(e){const t=this.#x(e),i=this.#A(t);if(this.inHiddenTab($(_.last(e)))&&this.showTab($(_.last(e))),t.forEach((e,t)=>this.scrollToPos($(t),e)),AGN.Lib.Helpers.isMobileView()&&!i?.container?.closest(".modal").exists()){const e=$(".tiles-container, .filter-overview");e.animate({scrollTop:i.pos-e.offset().top+e.scrollTop()})}}static scrollToPos(e,t){e.animate({scrollTop:t-e.offset().top+e.scrollTop()})}static inHiddenTab(e){return this.#E(e).hasClass("hidden")&&this.#T(e).is(".navbar")}static showTab(e){const t=this.#E(e);AGN.Lib.Tab.show(this.#T(e).find(`[data-toggle-tab="#${t.attr("id")}"]`))}static#x(e){const t=new Map;return _.each(e,e=>{const i=$(e),n=this.#E(i).get(0),o=this.#k(i).offset().top;t.has(n)?t.get(n)>o&&t.set(n,o):t.set(n,o)}),t}static#E(e){return this.#D(e).exists()?e.closest(".tile-body"):e.closest(".modal-body").first()}static#D(e){return e.closest(".tiles-container > .tile, .filter-overview > .tile, .tiles-block > .tile")}static#T(e){return this.#D(e).find("> .tile-header")}static#k(e){const t=e.data("_editor")?.editor,i=t?$(t.container):e.closest(".has-feedback");return i.exists()?i:e.parent()}static#A(e){let t,i=1/0;return e.forEach((e,n)=>{e<i&&(i=e,t={container:$(n),pos:e})}),t}}class o{constructor(e){this.group=e,this.$controls=$()}_collect(e){const t=$("[data-controls-group]");return"*"===e?t:e?t.filter(function(){return e===$(this).attr("data-controls-group")}):$()}collect(){this.group&&(this.$controls=this._collect(this.group).filter(function(){const e=$(this);return!e.prop("disabled")&&!e.hasClass("disabled")}))}setDisabled(e){!1===e?(this.$controls.removeClass("disabled"),this.$controls.prop("disabled",!1)):(this.$controls.addClass("disabled"),this.$controls.prop("disabled",!0))}}class r{constructor(e){this.$form=e,this.form=e[0],this._abort=null,this._data={},this._dataNextRequest={},this._isSubmitting=!1,this.fields=[],this.validatorName=null,this.validatorOptions=null,this.dirtyChecking=e.is("[data-form-dirty-checking]"),this.editable=!e.is("[data-editable]")||!!e.data("editable"),this.url=e.attr("action"),this.urlNextRequest=null,this.methodNextRequest=null,this.method=e.attr("method"),this.isMultipart="multipart/form-data"==(e.attr("enctype")||"").toLowerCase(),this.isCustomLoader=e.is("[data-custom-loader]"),this.controlsToDisable=new o(e.attr("data-disable-controls")),e.is("[data-custom-loader]")?this.isCustomLoader="false"!==e.attr("data-custom-loader"):this.isCustomLoader=!1,this.initFields(),this.initValidator(),this.#M(),this.dirtyChecking&&this.#P(e),this.editable||e.find(":input").prop("disabled",!0)}#P(e){e.dirty({preventLeaving:!0,leavingMessage:t("grid.layout.leaveQuestion")}),window.onbeforeunload=()=>{!0==!e.dirty("isDirty")&&AGN.Lib.Loader.show()}}static get(e){const t=r.getWrapper(e);let i=t.data("_form");if(!i){const e=t.data("form");i=new(AGN.Opt.Forms[e]||AGN.Lib.Form)(t),t.data("_form",i)}return i}static getWrapper(e){let t=$(e.data("form-target"));return t.exists()||(e.attr("form")&&(t=$(`#${e.attr("form")}`)),t.exists()||(t=e.closest("form"))),t}valid(e){const t=$.Event("validation");if(e=_.merge({},this.validatorOptions,e),this.$form.trigger(t,e),t.isDefaultPrevented())return!1;const i=_.every(this.fields,e=>e.valid());if(i&&this.validatorName){const t=AGN.Lib.Validator.get(this.validatorName);if(t)return t.valid(this,e,i)}return i}validate(e){return this.valid(e)?(this.cleanFieldFeedback(),!0):(this.handleErrors(),!1)}validateField(e){this.cleanFieldFeedback(e);const t=this.fields.find(t=>t.isInitializedFor(e));t&&!t.valid()&&this.#R(t.errors())}get$(){return this.$form}isEditable(){return this.editable}getAction(){if(this.urlNextRequest){const e=this.urlNextRequest;return this.urlNextRequest=null,e}return this.url}setActionOnce(e){return this.urlNextRequest=e,this}setMethodOnce(e){return this.methodNextRequest=e,this}getMethod(){if(this.methodNextRequest){const e=this.methodNextRequest;return this.methodNextRequest=null,e}return this.method}errors(){let e=this.fields.map(e=>e.errors()).flat();if(this.validatorName){const t=AGN.Lib.Validator.get(this.validatorName);t&&(e=e.concat(t.errors(this,this.validatorOptions)))}return e}setValue(e,t){const i=this.form[e];if("object"==typeof i){const e=$(i);e.is("select")?AGN.Lib.Select.get(e).selectValue(t):e.val([t]),e.trigger("change")}else void 0===t?delete this._data[e]:this._data[e]=t}setValueOnce(e,t){void 0===t?delete this._dataNextRequest[e]:this._dataNextRequest[e]=t}getValue(e){const t=this.form[e];return"object"==typeof t?t.value:this._data[e]}getValues(e){const t=this.form[e];return t instanceof NodeList?Array.from(t,e=>e.value):[this.getValue(e)]}data(){if(this.isMultipart){const e=new FormData,t=this.$form.serializeFormDataObject();return $.each(this._data,(e,i)=>{t.hasOwnProperty(e)||(t[e]=i)}),$.each(this._dataNextRequest,(e,i)=>{t[e]=i}),$.each(t,(t,i)=>{$.isArray(i)?$.each(i,(i,n)=>{e.append(t,n)}):e.append(t,i)}),e}return _.merge({},this._data,this.$form.serializeObject(),this._dataNextRequest)}params(){return $.param(this.data(),!0)}jqxhr(){const e=this,t=$.ajaxSettings.xhr(),i=$.Deferred();this.$form.trigger("form:submit");const n={url:this.getAction(),method:this.getMethod(),loader:this.loader(),xhr:function(){return t}};if(this.isMultipart?(n.data=this.data(),n.enctype="multipart/form-data",n.processData=!1,n.contentType=!1):n.data=this.params(),this.isCustomLoader){const i=function(t){let i=!0;t.lengthComputable&&(i=(t.loaded/t.total*100).toFixed(1)),e.$form.trigger("form:progress",{loaded:t.loaded,total:t.total,progress:i})};"upload"in t?n.xhr=function(){return t.upload.onprogress=i,t}:n.xhrFields={onprogress:i}}"function"==typeof t.abort&&(this._abort=function(){t.abort()});const o=$.ajax(n);return this._dataNextRequest={},this.setLoaderShown(!0),i.always(function(){e.setLoaderShown(!1)}),o.done(e=>i.resolve(e)),o.fail(function(){i.reject.apply(this,arguments)}),i.promise()}#I(){this._isSubmitting=!0,this.setLoaderShown(!0);const e=this.jqxhr();return e.done(e=>{this.setLoaderShown(!1),this.updateHtml(e),this.$form.trigger("submitted",e),this.dirtyChecking&&this.#O(this.$form)}),e.fail(e=>{e.responseText&&(this.handleFieldsMessages(e.responseText),this.$form.trigger("submitted",e.responseText))}),e.always(()=>this._isSubmitting=!1),e}#O(e){0===$("body").has(e).length?e.dirty("destroy"):e.dirty("setAsClean")}#N(){const e=this.data();i.isProtectionEnabled()&&(e[i.getParameterName()]=i.readActualToken());const t=$(`<form method="${this.getMethod()}" action="${this.getAction()}"></form>`);_.each(e,(e,i)=>{if(_.isArray(e)){const n=$(`<select multiple name="${i}"></select>`);_.each(e,e=>{const t=$('<option selected="selected"></option>');t.val(e),t.appendTo(n)}),n.appendTo(t)}else{const n=$(`<input type="hidden" name="${i}"/>`);n.val(e),n.appendTo(t)}}),t.appendTo($("body")),t.submit(),t.remove(),this._dataNextRequest={}}#L(){const e=$.Event("submission");this.$form.trigger(e),e.isDefaultPrevented()||(this.$form.trigger("submitted"),this._dataNextRequest={})}#F(){this._isSubmitting=!0;const e=this.jqxhr();return e.done(e=>this.$form.trigger("submitted",e)),e.fail(e=>{e.responseText&&(this.handleFieldsMessages(e.responseText),this.$form.trigger("submitted",e.responseText))}),e.always(()=>this._isSubmitting=!1),e}submit(e,t={}){if(this._isSubmitting)return console.warn("The form is already being submitted, please wait..."),$.Deferred().promise();if(_.each(this.fields,e=>e.onSubmit()),!this.valid(t))return this.handleErrors(),!1;switch(this.cleanFieldFeedback(),e){case"static":return this.#N();case"confirm":return this.#F();case"event":return this.#L();default:return this.#I()}}revertAction(){}reset(){this.$form.trigger("reset"),AGN.Lib.CoreInitializer.run("select",this.$form)}abort(){this.$form.trigger("form:abort"),this._abort&&(this._abort(),this._abort=null)}clear(){_.forEach(this.data(),(e,t)=>this.setValue(t,""))}handleMessages(e){e instanceof $||(e=$(e)),this.handleFieldsMessages(e);const t=e.all("script[data-message]");_.each(t,e=>$("body").append(e))}#M(){const e=AGN.Lib.Modal.getWrapper(this.$form);this.handleFieldsMessages(e.exists()?e:$("body"))}handleFieldsMessages(e){const t=this;e instanceof $||(e=$(e)),e.all('script[data-message][type="text/html"]').each(function(){const e=$(this);t.showFieldError(e.data("message"),e.text()),e.remove()})}initFields(t=$(document)){this.fields.length=0,t.all("[data-field]").each((t,i)=>{const n=$(i);r.getWrapper(n).is(this.$form)&&this.fields.push(e.create(n))})}initValidator(){this.validatorName=this.$form.data("validator");const e=this.$form.data("validator-options");this.validatorOptions=e?AGN.Lib.Helpers.objFromString(e):null}updateHtml(e){let t;t=this.$form.attr("id")?$(e).all(`#${this.$form.attr("id")}`):this.$form.attr("name")?$(e).all(`[name="${this.$form.attr("name")}"]`):$(e).all("form"),this.$form.html(t.html()),this.handleMessages(e),this.initFields(),this.initValidator(),AGN.Lib.Controller.init(this.$form),AGN.runAll(this.$form)}loader(){const e=this;return{show:function(){e.controlsToDisable.collect(),e.controlsToDisable.setDisabled(!0),e.setLoaderShown(!0)},hide:function(){e.controlsToDisable.setDisabled(!1),e.setLoaderShown(!1)}}}setLoaderShown(e){this.isCustomLoader?e?this.$form.trigger("form:loadershow"):this.$form.trigger("form:loaderhide"):e?AGN.Lib.Loader.show():AGN.Lib.Loader.hide()}cleanFieldFeedback(e){if(r.cleanFieldFeedback$(e,this.$form),!e&&this.$form.attr("id")){$(`:input[form='${this.$form.attr("id")}']`).each((e,t)=>r.cleanFieldFeedback$($(t)))}}static cleanFieldFeedback$(e,t){const i=e?r.#$(e).parent():t.find(".js-form-field-feedback");_.each(i,e=>{const t=$(e);t.removeClass("has-feedback has-alert has-success has-warning js-form-field-feedback"),t.find(".form-control-feedback-message").remove()})}static appendFeedbackMessage(e,t,i="alert"){r.#$(e).parent().append(AGN.Lib.Template.text("input-feedback",{type:i,message:t})),e.data("_editor")?.editor?.resize()}handleErrors(){this.cleanFieldFeedback(),this.#R(this.errors())}#R(e){e=e.filter(e=>e.field?.exists()),_.each(e,e=>{const t=e.field;this.markField(t),r.appendFeedbackMessage(t,e.msg)});const t=e.map(e=>e.field);n.scrollTo(t)}cleanFieldError(e){this.form[e]&&this.cleanFieldError$($(this.form[e]))}cleanFieldError$(e){this.cleanFieldFeedback(e)}showFieldError(e,t,i){e&&t&&(this.form[e]?this.showFieldError$($(this.form[e]),t,i):(console.warn(`Field '${e}' not found inside the form!`),AGN.Lib.Messages.alertText(t)))}showFieldError$(e,t,i){r.showFieldError$(e,t,i)}static showFieldError$(e,t,i){r.markField(e),e.closest(".js-form-field-feedback").find(".form-control-feedback-message").remove(),r.appendFeedbackMessage(e,t),!0!==i&&r.scrollToField(e)}static showFieldError(e,t){const i=Array.from(document.forms).find(t=>t[e]);i&&this.get($(i)).showFieldError(e,t)}markField(e,t="alert"){r.markField(e,t)}static markField(e,t="alert"){r.#$(e).parent().addClass(`has-${t} has-feedback js-form-field-feedback`)}static#$(e){if(e.is("[data-feedback-anchor]"))return e.closest(e.data("feedback-anchor"));const t=e.data("_editor")?.editor;return t&&t.container?$(t.container):e}static scrollToField(e){n.scrollTo(e)}}AGN.Lib.Form=r})(),(()=>{class e{constructor(e){this.$el=e,this.config=null;const t=`help_${window.helpLanguage||"en"}/${e.data("help")}`;$.get(AGN.url(t)).done(e=>{this.config=$(e),this.popover(),this.show()})}show(){this.$el.popover("show")}getConfig(e){const t=this.config.find(e).text().replace("<![CDATA[","").replace("]]>","");return this.$el.is("[data-help-options]")?_.template(t)(AGN.Lib.Helpers.objFromString(this.$el.data("help-options"))):t}popover(){if(!this.config)return;this.$el.popover("dispose");const e=AGN.Lib.Popover.create(this.$el,{title:this.getConfig("title"),content:this.getConfig("content"),html:!0,trigger:"manual",popperConfig:{placement:"bottom-start"}}),t=$(e.tip);t.attr("tabindex",0),t.css("outline","none");let i=null;const n=()=>{i=setTimeout(()=>e.hide(),100)},o=()=>clearTimeout(i);t.focusout(n),this.$el.focusout(n),t.focusin(o),this.$el.focusin(o),this.$el.on("shown.bs.popover",function(){const e=t.children(".popover-content"),i=e.css("min-width"),n=e.outerWidth();e.css("min-width","100%"),e.css("min-width",e.outerWidth()),n>e.outerWidth()&&e.css("min-width",i||"0px")})}static show(t){const i=t.data("agn:help");i?i.show():t.data("agn:help",new e(t))}}AGN.Lib.Help=e})(),(()=>{let mobileViewThreshold=0;AGN.Lib.Helpers={paramsFromUrl:function(e){var t,i={};if(!e)return i;if(-1==(t=e.indexOf("?")))return i;for(var n=e.substring(t+1).split("&"),o=0;o<n.length;o++){var r=n[o].split("=");i[r[0]]=r[1]}return i},objFromString:function(optsAsString){var optsArray,optsSplitRegex=/,\s*(?=(?:[^'\\]*(?:\\.|'(?:[^'\\]*\\.)*[^'\\]*'))*[^']*$)/m,tupleSplitRegex=/:\s*(?=(?:[^'\\]*(?:\\.|'(?:[^'\\]*\\.)*[^'\\]*'))*[^']*$)/m,floatRegex=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,arrayRegex=/^\s?\[.*?\]$/i;return opts={},""===optsAsString||void 0===optsAsString||(optsArray=optsAsString.split(optsSplitRegex),_.forEach(optsArray,function(opt){var tup=opt.split(tupleSplitRegex),name,value;tup=_.filter(tup),name=tup[0].replace(/^'([^]*?)'$/m,"$1"),name=name.replace(/\\/,""),value=tup[1],void 0===value&&(value=""),"true"==value?value=!0:"false"==value?value=!1:floatRegex.test(value)?value=parseFloat(value):arrayRegex.test(value)?(value=value.replace(/\[|\]/g,""),value=value.split(/\s+/),value=_.map(value,function(v){return/^\'(.*?)\'$/.test(v)?v.replace(/^\'(.*?)\'$/g,"$1"):eval(v)})):(value=value.replace(/^'(.*?)'$/m,"$1"),value=value.replace(/\\/,"")),opts[name]=value})),opts},disableCSSAnimations:function(){var e=$('<style class="disable-animation">* { -webkit-transition: none !important; -o-transition: none !important; transition: none !important; }</style>');$("body").append(e)},enableCSSAnimations:function(){window.setTimeout(function(){$(".disable-animation").remove()},10)},clearFormField:function(e){var t=$("<form></form>"),i=$("<div></div>");i.insertAfter(e),t.append(e),t.get(0).reset(),e.insertBefore(i),i.remove()},renameFile:function(e,t){Object.defineProperty(e,"name",{writable:!0,value:t})},formatBytes:function(e,t){if(0==e)return"0 Bytes";if(1==e)return"1 Byte";if(-1==e)return"-1 Byte";e=Math.abs(e);if(t&&t.toLowerCase()&&"iec"==t.toLowerCase())var i=Math.pow(2,10),n=["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];else i=Math.pow(10,3),n=["Bytes","kB","MB","GB","TB","PB","EB","ZB","YB"];var o=Math.floor(Math.log(e)/Math.log(i)),r=e/Math.pow(i,o);return e<0&&(r*=-1),r>=99.995||0==o?r.toFixed(0)+" "+n[o]:r.toFixed(2)+" "+n[o]},pad:function(e,t,i){i=i||"0";var n=e+"";return n.length<t?new Array(t-n.length+1).join(i)+n:n},caching:function(e,t){var i,n=!1;return arguments.length>1&&(e=_.bind.apply(null,Array.prototype.slice.call(arguments))),function(){return n||(n=!0,i=e()),i}},replaceAgnTags:function(e,t){try{return e.replace(/\[(agn[A-Z0-9_]+)(?:[^'"\]]|'.*?'|".*?")+]/g,function(e,i){var n=$("<"+e.substring(1,e.length-1)+">")[0];if(n instanceof HTMLElement){for(var o=n.attributes,r={},s=0;s<o.length;s++){var a=o[s];r[a.nodeName]=a.nodeValue}return t({name:i,attributes:r},e)}return e})}catch(e){}return e},escapeAgnTags:function(e){try{if(e)return e.replace(/\[agn[A-Z0-9]+(?:[^'"\]]|'.*?'|".*?")+]/g,function(e){return e.includes("'")||e.includes('"')?_.escape(e):e})}catch(e){}return e},unescapeAgnTags:function(e){try{if(e)return e.replace(/\[agn[A-Z0-9]+(?:(?!&#39;|&quot;)[^'"\]]|=\s*&#39;.*?&#39;|=\s*&quot;.*?&quot;)*]/g,function(e){return _.unescape(e)})}catch(e){}return e},isDarkTheme:function(e=$("body")){const t=e.data("bs-theme");return"dark"===t||"dark-contrast"===t},isValidEmails:function(e){return e.every(e=>this.isValidEmail(e))},isValidEmail:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},isUrl:function(e){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=!$]*)$/.test(e)},isNumber:e=>"number"==typeof e,deepFreeze:function(e){Object.freeze(e);const t=Object.getOwnPropertyNames(e);for(const i of t){const t=e[i];"object"!=typeof t||null===t||Object.isFrozen(t)||this.deepFreeze(t)}return e},isMobileView:function(){return 0===mobileViewThreshold&&(mobileViewThreshold=parseInt($("html").css("--mobile-view-threshold"))),$(window).width()<=mobileViewThreshold},openHelpModal:function(e="",t={}){const i="manual"===e?t.key:$("[data-help-key]").data("help-key");$.get(AGN.url(`/support/help-center.action?helpKey=${i}`)).done(i=>{AGN.Lib.Modal.create(i),e&&$(`[data-help-tab="${e}"]`).trigger("help-tab:open",t)})},getColorLuminance:function(e){if(null==e)return e;e=e.replace("#","");return(.299*parseInt(e.substring(0,2),16)+.587*parseInt(e.substring(2,4),16)+.114*parseInt(e.substring(4,6),16))/255},isFilledTextNode:function(e){return 3===e.nodeType&&e.nodeValue?.trim()?.length>0},containsTruncatedElements:function(e){if($(e).is("select, .select2"))return!1;if($(e.parentElement).is(":truncated"))return!0;if(e.childNodes&&e.childNodes.length>0)for(let t=0;t<e.childNodes.length;t++){const i=this.containsTruncatedElements(e.childNodes[t]);if(i)return i}return!1},retrieveTextElement:function(e){if(this.isFilledTextNode(e))return e.parentElement;if(e.childNodes&&e.childNodes.length>0)for(let t=0;t<e.childNodes.length;t++){const i=this.retrieveTextElement(e.childNodes[t]);if(i)return i}return null},getStatColors:function(){const e=getComputedStyle(document.documentElement).getPropertyValue("--stat-colors").trim().split(", ");return _.fromPairs(e.map(e=>e.split(" ")))},getStatColorsNames:function(){return Object.keys(this.getStatColors())},getStatColorsHexValues:function(){return Object.values(this.getStatColors())},imagesLoaded:function(e){const t=$.Deferred(),i=e.filter(function(){return this.complete?null:this}),n=[],o=function(){let e=!0;for(let t=0;t<i.length;t++){const o=i[t];o&&(o.complete?($(o).off("load error"),i[t]=null,n.push(o)):e=!1)}return e};if(i.length)for(let e=0;e<i.length;e++)$(i[e]).on("load error",function(){o()&&t.resolve(n)});else t.resolve(n);return t},prettifyHtml:function(e){return html_beautify(e,{preserve_newlines:!1,wrap_line_length:0})},isHtml:e=>/<html[\s\S]*?>[\s\S]*<\/html>/i.test(e),setValue(e,t){const i=e.attr("id");window.Jodit?.instances[i]?Jodit.instances[i].value=t:window.CKEDITOR&&CKEDITOR.instances[i]?CKEDITOR.instances[i].setData(t):AGN.Lib.Editor.exists(e)?AGN.Lib.Editor.get(e).val(t):e.val(t)}}})(),AGN.Lib.InMemoryCache=class{constructor(e=6e4){this.cache=new Map,this.cacheDuration=e}set(e,t){const i=Date.now()+this.cacheDuration;this.cache.set(e,{data:t,expiration:i})}get(e){const t=this.cache.get(e);return t?t.expiration<Date.now()?(this.delete(e),null):t.data:null}clear(){this.cache.clear()}delete(e){this.cache.delete(e)}},(()=>{const e=AGN.Opt.Templates,i=_.template(e["plus-btn"]),n=_.template(e["trash-btn"]);AGN.Lib.InputTable=class{constructor(e,t=[],i){const n=e.find("script[data-config]");this.config=n.exists()?n.json():{readonly:i,data:t},this.readonly=this.config.readonly,this.$container=e,this.rowTemplateMustache=_.template(this.rowTemplate),this.renderTable(this.config.data),this.addActions(),this.$container.data("table",this),this.$container.css("--column-count",this.$container.find("tr:first").children("td").length)}static get(e){return $(e).data("table")}get rowTemplate(){return this._rowTemplate?.length||(this._rowTemplate=this.$container.find("[data-row-template]").html()),this._rowTemplate}get headerTemplate(){return this._headerTemplate?.length||(this._headerTemplate=this.$container.find("[data-input-table-header-template]").html()),this._headerTemplate}get $rowTemplate(){return $(this.rowTemplate)}renderTable(e,t=!0){if(t){if(this.$table=$("<table>").addClass("input-table").append($("<tbody>")),this.readonly&&this.$table.addClass("input-table--readonly"),this.headerTemplate){const e=$(_.template(this.headerTemplate)());this.readonly||e.append("<th></th>"),this.$table.prepend($("<thead>").append(e))}this.$container.prepend(this.$table)}_.each(e,e=>this.addRow(e)),this.readonly||this.addEmptyRow()}addActions(){const e=this;this.addAction({click:"[data-add-row]"},this.addEmptyRow.bind(this)),this.addAction({enterdown:"input"},function(){this.event.preventDefault(),e.getNextInputToFocus(this.el).focus()}),this.addAction({click:"[data-delete-row]"},function(){e.removeRow(this.el)})}removeRow(e){e.closest("tr").remove(),this.$container.trigger("input-table:row-removed")}addAction(e,t){AGN.Lib.Action.new(e,t,this.$table)}collect(e=!0){let t=this.$table.find("tr").toArray();return e||(t=t.slice(0,-1)),t.filter(e=>!this.isEmptyRow$($(e))).map(e=>this.getRowData($(e)))}getRowData(e){return e.find(":input[data-name]").toArray().reduce((e,t)=>(e[$(t).data("name")]=this.getInputVal($(t)),e),{})}getInputVal(e){return e.is(":checkbox")?e.is(":checked"):e.val()?.trim()}addRow(e){if(!this.isUniqueRow(e))return;const t=$(this.rowTemplateMustache(e));if(!this.readonly){const i=this.generateRowBtn(e);t.append($("<td>").html(i))}this.$table.append(t),AGN.runAll(t),AGN.Lib.Form.get(this.$table).initFields()}getNextInputToFocus(e){const t=e.closest("tr");if(this.isEmptyRow$(t))return t.find(':input[type="text"]:first');const i=t.find(':input[type="text"]'),n=i.index(e);let o=i.eq(n+1);return o.length?o:(o=t.next().find(':input[type="text"]:first'),o.length?o:(this.addEmptyRow(),this.$table.find('tbody tr:last input[type="text"]:first')))}generateRowBtn(e){return this.#G(e)?this.generateAddBtn():this.generateDeleteBtn()}generateAddBtn(){return i({attrs:`data-add-row data-tooltip='${t("defaults.add")}'`})}generateDeleteBtn(){return n({attrs:`data-delete-row data-tooltip='${t("defaults.clear")}'`})}#G(e){return this.getRowEntries(e).every(([,e])=>this.#B(e))}getNames(){return this.$rowTemplate.find("[data-name]").toArray().map(e=>$(e).data("name"))}getRowEntries(e){const t=this.getNames();return Object.entries(e).filter(([e])=>t.includes(e))}isEmptyRow$(e){return _.every(e.find(':input:not([type="hidden"])'),e=>{const t=$(e);return t.prop("disabled")||this.#B(t.val())})}#B(e){return null==e||""===String(e).trim()}addEmptyRow(){const e=this.$table.find("tbody tr:last");e.length&&this.isEmptyRow$(e)||(this.replaceNewButtonWithDeleteButton(),this.addRow(this.getNames().reduce((e,t)=>(e[t]="",e),{}))),this.focusOnLastRow()}focusOnLastRow(){this.$table.find("tbody tr:last input:first").focus()}isUniqueRow(e){if(this.#G(e))return!0;const t=this.getRowEntries(e);return!this.$table.find("tbody tr").toArray().some(e=>t.every(([t,i])=>$(e).find(`[data-name="${t}"]`).val()===i))}replaceNewButtonWithDeleteButton(){const e=this.$table.find("[data-add-row]"),t=$(this.generateDeleteBtn());e.after(t),e.remove(),AGN.Lib.CoreInitializer.run("tooltip",t)}#H(){const e=$(this.generateAddBtn());this.$table.find("[data-delete-row]:last").after(e).remove(),AGN.Lib.CoreInitializer.run("tooltip",e)}removeLastRow(){this.$container.find("tbody tr").length>1&&(this.$container.find("tbody tr:last").remove(),this.#H())}clean(){this.$table.find("tbody tr").remove(),this.addEmptyRow()}update(e){this.$table.find("tbody tr").remove(),this.renderTable(e,!1)}get readonlyAttr(){return this.readonly?"readonly":""}}})(),(()=>{class e{static DATA_KEY="agn:load";constructor(t){this.el=t,this.url=t.data("load"),this.interval=parseInt(t.data("load-interval")),this.target=t.data("load-target"),this.interval&&(this._interval=window.setInterval(()=>this.load(),this.interval)),this.el.removeAttr("data-load"),this.el.data(e.DATA_KEY,this)}stop(){window.clearInterval(this._interval)}load(){this.loading||(this.loading=!0,$.get(this.url).always(()=>{this.interval&&(this.loading=!1)}).done(e=>{const t=$(e);let i;t.all("[data-load-stop]").exists()&&this.stop(),i=this.target?"body"==this.target?/<body[^>]*>((.|[\n\r])*)<\/body>/im.exec(e)[1]:t.all(this.target):e,this.el.is("[data-load-replace]")?(this.el.replaceWith(i),this.el=i):this.el.html(i),AGN.Lib.Controller.init(this.el),AGN.runAll(this.el)}).fail(()=>this.stop))}static load(t){const i=e.get(t);i?i.load():t.is(":hidden")||new e(t).load()}static get(t){return t.data(e.DATA_KEY)}}AGN.Lib.Load=e})(),(()=>{const e="#main-loader";let t,i=0,n=!1;AGN.Lib.Loader=class{static show(){window.clearTimeout(t),n?n=!1:(i+=1,$(e).removeClass("hidden"))}static hide(){i-=1,i<=0&&(t=window.setTimeout(()=>$(e).addClass("hidden"),5),i=0)}static prevent(){n=!0}}})(),function(){const e=AGN.Lib.Form;class t extends e{constructor(e){super(e),AGN.Lib.Loader.show(),this.submit()}jqxhr(){const e=$.Deferred();return this.$form.trigger("form:submit"),window.setTimeout(()=>{$.ajax({url:this.url,method:this.method,data:this.params(),loader:this.loader()}).done(function(t){e.resolve.apply(this,arguments)})},parseInt(this.$form.data("polling-interval"))),e.promise()}submit(){const e=this.jqxhr();return e.done(e=>this.updateHtml(e)),e}updateHtml(e){const t=$(e).all('[data-form="loading"]');t.exists()?(this.$form.html(t.html()),AGN.runAll(this.$form),this.submit()):(AGN.Lib.Loader.hide(),AGN.Lib.Modal.getInstance(this.$form)?.hide(),AGN.Lib.Page.render(e))}}AGN.Lib.LoadingForm=t,AGN.Opt.Forms.loading=t}(),(()=>{const Messages=function(e,t,i,n,o){i||(i="info");const r={success:6e3,warning:15e3,alert:6e4}[i||"info"]||0;if(findMessagesWithSameContent(e,t).length)return;const s=toastr[i](e,t,{timeOut:r,extendedTimeOut:r,onCloseClick:n,newestOnTop:o});AGN.Lib.Controller.init(s),AGN.runAll(s)},findMessagesWithSameContent=function(e,t){return $(".popup-tab:not(.arrow)").filter((i,n)=>{const o=$(n).data("options");return e===o.title&&t===o.message})},JsonMessages=function(e,t=!1){t&&_.each($(".popup"),e=>$(e).remove()),e&&(e.info?.forEach(e=>Messages.infoText(e)),e.success?.forEach(e=>Messages.successText(e)),e.warning?.forEach(e=>Messages.warnText(e)),e.alert?.forEach(e=>Messages.alertText(e)),e.fields?.forEach(e=>AGN.Lib.Form.showFieldError(e.name,e.message)))},RenderMessages=function($resp){$resp.all('script[data-message][type="text/javascript"]').each(function(){try{eval($(this).html())}catch(e){console.debug(e)}})};Messages.success=function(e,...i){Messages.successText(t(e,...i))},Messages.successText=function(e){Messages(t("defaults.success"),e,"success")},Messages.alert=function(e,...i){Messages.alertText(t(e,...i))},Messages.alertText=function(e){Messages(t("defaults.error"),e,"alert")},Messages.warn=function(e,...i){Messages.warnText(t(e,...i))},Messages.warnText=function(e){Messages(t("defaults.warning"),e,"warning")},Messages.info=function(e,...i){Messages.infoText(t(e,...i))},Messages.infoText=function(e){Messages(t("defaults.info"),e,"info")},Messages.defaultSaved=function(){Messages.success("defaults.saved")},Messages.defaultError=function(){Messages.alert("defaults.error")},AGN.Lib.Messages=Messages,AGN.Lib.JsonMessages=JsonMessages,AGN.Lib.RenderMessages=RenderMessages})(),(()=>{const e={};function t(t,i){const n=`key#${t}`;$.isFunction(i)?(e[n]||(e[n]=[]),e[n].push(i)):console.error("Callback must be a function")}function i(t,i){if(arguments.length){const n=`key#${t}`;e[n]=arguments.length>1?e[n].filter(e=>e!==i):[]}}AGN.Lib.Messaging={send:function(t){const i=`key#${t}`,n=e[i],o=Array.prototype.slice.call(arguments,1);n&&(e[i]=n.filter(e=>!1!==e.apply(this,o)))},subscribe:t,resubscribe:function(e,n){i(e),t(e,n)},unsubscribe:i}})(),(()=>{class e{static create(e,t){let i,n=null;i=e instanceof $?e:$(e);const o=i.filter(".modal"),r=i.filter("script");return o.exists()?(n=$(o[0]),n.data("_modal",t),r.each(function(){$(this).appendTo(n)}),new bootstrap.Modal(n,{focus:!1}).show(),AGN.Lib.RenderMessages(i),AGN.Lib.Controller.init(n),AGN.runAll(n)):AGN.Lib.RenderMessages(i),n}static fromTemplate(t,i={}){return e.create(AGN.Lib.Template.text(t,i),i)}static get(t){return e.getWrapper(t).data("_modal")}static getWrapper(e){return e.closest(".modal")}static getInstance(t){const i=e.getWrapper(t);return bootstrap.Modal.getInstance(i)}}AGN.Lib.Modal=e})(),(()=>{const e=AGN.Lib.Confirm;class t{static render(i,n){if(/<\s*\/\s*body\s*>/i.test(i))return void t.#z(i,n);const o=$(i);if(AGN.Lib.RenderMessages(o),o.filter(".modal").exists()){const t=$.Deferred();return e.create(o),t.resolve(e.get(o)),t.promise()}}static#z(e,t){const i=(new DOMParser).parseFromString(e,"text/html");if(!1!==t&&i.head){const e=$(i.head).data("origin-uri");e&&(t=e)}t&&window.history.pushState({},"",t);const n=$(document).scrollTop();setTimeout(function(){AGN.Lib.Controller.init(),AGN.runAll(),$(document).scrollTop(n)},100),document.body=i.body,document.title=i.title;const o=$(document.body);o.find("script").each(function(e,t){const i=$(t);if(i.attr("src")){const e=$("<script><\/script>");$.each(t.attributes,function(){this.specified&&e.attr(this.name,this.value)});try{e.appendTo(o)}catch(e){console.debug(e)}}else if("text/javascript"==i.attr("type"))try{eval.call(window,i.html())}catch(e){console.debug(e)}})}static reload(e,i,n){if(i){e=e||window.location.href;const i=$.Deferred();return $.ajax(e,{method:t.#W(n)}).done(n=>{const o=t.render(n,e);o?o.done(i.resolve).fail(i.reject):i.resolve()}).fail(()=>i.reject()),i.promise()}return e&&e!=window.location.href?window.location.assign(e):window.location.reload(!0),null}static#W(e){if(e)switch(e=e.toUpperCase()){case"CONNECT":case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"POST":case"PUT":return e}return"GET"}}AGN.Lib.Page=t})(),function(){class e{static policyMap=new Map;static findPasswordPolicy(t){return e.policyMap.has(t)?e.policyMap.get(t):["password.error.generic_error"]}static registerPolicy(t,i){e.policyMap.set(t,i)}}e.registerPolicy("LENGTH_8_MIXED",e=>{const t=[];return e.length<8&&t.push("password.error.too_short_min8"),e.match("[a-z]")||t.push("password.error.no_lower_case"),e.match("[A-Z]")||t.push("password.error.no_upper_case"),e.match("[0-9]")||t.push("password.error.no_digits"),e.match("[^a-zA-Z0-9]")||t.push("password.error.no_special"),t}),e.registerPolicy("LENGTH_12_SIMPLE",e=>e.length<12?["password.error.too_short_min12"]:null),e.registerPolicy("WEBSERVICE",e=>e.length<32?["password.error.too_short_min32"]:null),AGN.Lib.PasswordPolicies=e}(),(e=>{const t=function(t,i){const n=e(t.tip),o=e(i),r=e(window).scrollTop(),s=e(window).outerHeight(),a=o.outerHeight(),l=o.offset().top-r,c=l+a;return n.outerHeight()<=l?"top":s-c>l?"bottom":"top"},i=(t,i)=>{const n=e(i).outerWidth();return"bottom-end"===t.placement?[-n,0]:"bottom-start"===t.placement?[n,0]:[0,0]};class n{static instances=[];static MARKER_ATTR_NAME="agn-popover";static getOrCreate(e,t){return this.get(e)||this.create(e,t)}static create(o,r){if(1!==o.length)return!1;const s={trigger:"hover",container:"body",animation:!1,content:o.text(),placement:t,popperConfig:{onFirstUpdate:t=>{const i=e(t.elements.popper);i.exists()&&new AGN.Lib.Scrollbar(i,{wheelSpeed:.2})}},offset:i},a=new bootstrap.Popover(o[0],_.merge(s,r));return this.instances.push(a),o.attr(n.MARKER_ATTR_NAME,""),a}static get(e){if(1!==e.length)return null;const t=bootstrap.Popover.getInstance(e);if(t)return t;const i=e.closest("div.popover");return i.length?bootstrap.Popover.getInstance(i):void 0}static remove(e){return this.#V(this.get(e)),!0}static hide(e){this.get(e)?.hide()}static validate(){_.each(Array.from(this.instances),t=>{t._element&&!e.contains(document.body,t._element)&&this.#V(t)})}static#V(t){const i=this.instances.indexOf(t);-1!==i&&this.instances.splice(i,1),t&&(e(t._element).removeAttr(n.MARKER_ATTR_NAME),t.dispose())}static isShown(e){return!!e?.tip}static toggleState(t,i=!0){t.all(`[${n.MARKER_ATTR_NAME}]`).each(function(){const t=AGN.Lib.Popover.get(e(this));i?t.enable():t.disable()})}}AGN.Lib.Popover=n})(jQuery),(()=>{class e{static init(t){const i=AGN.Lib.Storage.get(e.#m(t));i&&(t.find(`input[value="${i.type}"]`).prop("checked",!0),e.#j(t))}static toggle(t){e.#j(t),AGN.Lib.Storage.set(e.#m(t),{type:t.find("input:checked").val()})}static#j(e){const t=e.find('input[type="radio"]:checked').val(),i="preview"===t,n="visual-list"===t,o=$(e.data("preview-table"));o.toggleClass("table--preview",i),o.toggleClass("table--visual-list",n),AGN.Lib.Popover.toggleState(o,!i&&!n)}static#m(e){return`table-type-${e.data("preview-table")}`}}AGN.Lib.PreviewTable=e})(),(()=>{const e=AGN.Lib.Form,t=AGN.Lib.Page;class i extends e{constructor(e){super(e),this.resourceSelector=e.data("resource-selector")}getResourceSelector(){if(this.resourceSelectorNextRequest){const e=this.resourceSelectorNextRequest;return this.resourceSelectorNextRequest=null,e}return this.resourceSelector}setResourceSelectorOnce(e){this.resourceSelectorNextRequest=e}updateHtml(e){const i=this.getResourceSelector();if(i){const n=$(e),o=$(i),r=n.all(i);if(1===o.length&&1===r.length){let e=!1;(o[0]==this.$form[0]||$.contains(o[0],this.$form[0]))&&(e=!0),o.html(r.html()),this.handleMessages(n),e&&(this.initFields(),this.initValidator()),AGN.Lib.Controller.init(o),AGN.runAll(o)}else t.render(e),this.handleFieldsMessages(e)}else t.render(e),this.handleFieldsMessages(e)}}AGN.Lib.ResourceForm=i,AGN.Opt.Forms.resource=i})(),(()=>{class e{static DATA_KEY="agn:perfect-scrollbar";static MARKER_ATTR_NAME="agn-scrollbar";static INSTANCES=[];constructor(t,i={}){this.$el=t,this.scrollbar=new PerfectScrollbar(t[0],_.extend(this.options,i)),t.attr(e.MARKER_ATTR_NAME,""),t.data(e.DATA_KEY,this),e.INSTANCES.push(this)}get options(){return{wheelSpeed:1,wheelPropagation:!1,minScrollbarLength:30}}destroy(){this.scrollbar.destroy(),this.$el.data(e.DATA_KEY,null),this.$el.removeAttr(e.MARKER_ATTR_NAME),delete e.INSTANCES[this]}update(){this.scrollbar.update()}static get(t,i=!0){const n=t.data(e.DATA_KEY);return i?n||t.closest(`[${e.MARKER_ATTR_NAME}]`).data(e.DATA_KEY):n}static updateAll(){e.INSTANCES.forEach(e=>e.update())}}AGN.Lib.Scrollbar=e})(),function(){const e=AGN.Lib.Form;class t extends e{constructor(e){super(e)}updateHtml(e){const t=$(e).find("[data-form-content]"),i=this.$form.is("[data-form-content]")?this.$form:this.$form.find("[data-form-content]");i.html(t.html()),this.handleMessages(e),this.initFields(i),AGN.Lib.Controller.init(i),AGN.runAll(i),i.trigger("scrollTo",i)}}AGN.Lib.SearchForm=t,AGN.Opt.Forms.search=t}(),(()=>{class e{static DATA_KEY="agn:select";constructor(e){this.$select=e,this.select=e[0],this.api=this.$select.data("select2")}static get(t){const i=t,n=i.data(e.DATA_KEY)||new e(i);return i.data(e.DATA_KEY,n),n}get $el(){return this.$select}get $options(){return this.$select.find("option")}values(){return _.map(this.$options,e=>$(e).val())}hasOption(e){return-1!==this.values().indexOf(e)}clear(){return this.selectValue(""),this}toggleDisabled(e){this.$select.prop("disabled",e)}selectNext(){const e=this.values(),t=this.getSelectedValue(),i=e.indexOf(t)+1;i<e.length&&this.selectValue(e[i])}selectValue(e){this.$select.val(e).trigger("change.select2"),this.isMultiple()&&this.#U()}#U(){this.#Y(this.$select)}#Y(e){AGN.Lib.CoreInitializer.run("select",e)}isMultiple(){return this.$select.is("[multiple]")}unselectValue(e){const t=this.$select.val().filter(t=>t!==e);this.selectValue(t)}getFirstValue(){return this.$select.find("option:not(:disabled):first").val()}selectFirstValue(){this.selectValue(this.getFirstValue())}selectValueOrSelectFirst(e){const t=this.values();_.isArray(e)||(e=[e]);_.every(e,e=>-1!=t.indexOf(e+""))&&0!=e.length?this.selectValue(e):this.selectFirstValue()}resetOptions(){this.$select.empty()}setOptions(e){const t=_.reduce(e,(e,t)=>e+=`<option value="${t.id}">${t.text}</option>`,"");this.$select.html(t)}addFormattedOption(e){this.$select.append(e)}getSelectedValue(){return this.$select.val()||""}addOption(e,t=e){this.$select.append($("<option>",{value:e,text:t}))}addOptionIfMissing(e,t=e){this.hasOption(e)||this.addOption(e,t)}getAllPossibleValues(){return this.$select.find("option").map((e,t)=>$(t).val()).get()}selectOptions(e){e.forEach(e=>this.selectOption(e))}selectOption(e){this.$findOption(e).prop("selected",!0),this.$select.trigger("change.select2")}isOptionSelected(e){return this.$findOption(e).prop("selected")}$findOption(e){return this.$select.find(`option[value="${e}"`)}getSelectedText(){return this.$select.find("option:selected").text()}disableOptions(e=[],t){const i=this.$select.val();this.$options.prop("disabled",!1),this.$select.find("option"+(t?"":":not(:selected)")).filter((t,i)=>e.includes($(i).val())).each((e,t)=>$(t).prop("disabled",!0)),t&&!this.isMultiple()&&e.includes(i)&&this.selectFirstValue(),this.$select.trigger("change.select2")}disableOption(e,t){this.disableOptions([e],t)}setReadonly(e){e?this.$select.attr("readonly","readonly"):this.$select.removeAttr("readonly")}remove(){return this.$select.next(".select2").remove(),this.$select.remove(),this}replaceWith(e){return this.$select.before(e),this.remove(),e.is("select")&&this.#Y(e),this}get $selectedOption(){return this.$findOption(this.$select.val())}}AGN.Lib.Select=e})(),function(){const e=AGN.Lib.Form;class t extends e{constructor(e){super(e)}jqxhr(){return this.form.submit()}submit(){if(!this.valid())return this.handleErrors(),!1;const e=_.merge({},this._data,this._dataNextRequest);return this.$form.trigger("form:submit"),AGN.Lib.CSRF.updateTokenInDOM(this.$form),_.each(e,(e,t)=>{const i=$(`<input type="hidden" name="${t}"/>`);i.val(e),i.appendTo(this.$form)}),this._dataNextRequest={},this.$form.submit(),$.Deferred().promise()}}AGN.Lib.StaticForm=t,AGN.Opt.Forms.static=t}(),function(e){var t,i,n,o,r,s,a,l;l=function(e){function t(e,t,i){var n,o;i?((n=new Date).setTime(n.getTime()+24*i*60*60*1e3),o="; expires="+n.toGMTString()):o="",document.cookie=e+"="+t+o+"; path=/"}function i(i){i=JSON.stringify(i),"session"==e?window.name=i:t("localStorage",i,365)}function n(){var t="session"==e?window.name:s("localStorage");try{return JSON.parse(t)}catch(e){console.warn("Could not parse storage data: "+t+" cause: "+e)}return{}}var o=n();return{length:0,clear:function(){o={},this.length=0,"session"==e?window.name="":t("localStorage","",365)},getItem:function(e,t){if(!0===t){var i=n();return void 0===i[e]?null:i[e]}return void 0===o[e]?null:o[e]},key:function(e){var t=0;for(var i in o){if(t==e)return i;t++}return null},removeItem:function(e){delete o[e],this.length--,i(o)},setItem:function(e,t){o[e]=t+"",this.length++,i(o)}}},s=function(e){var t,i,n=e+"=",o=document.cookie.split(";");for(t=0;t<o.length;t++){for(i=o[t];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(n))return i.substring(n.length,i.length)}return null};try{a=window.localStorage?window.localStorage:new l("local")}catch(e){a=new l("local")}function c(e){var t=""|e.data("stored-field"),n=e.prop("name");if(null!=n){var o=void 0;"checkbox"==e.prop("type")?o=e.is(":checked"):(e.is("input")||e.is("select"))&&(o=e.val()),null!=o&&i(h(n,t),o)}}function d(n){var o=""|n.data("stored-field"),r=!1,s=n.prop("name");if(null!=s){var a=n.prop("type")||n.prop("type"),l=t(h(s,o));if(void 0===l){if(void 0===(l=t(u(s,o))))return!1;i(h(s,o),l)}if("radio"==a){if(n.val()!==l&&n.is(":checked"))return n.prop("checked",!1),!0;if(n.val()==l&&!n.is(":checked"))return n.prop("checked",!0),!0}else if("checkbox"==a)n.prop("checked")!==l&&(n.prop("checked",l),r=!0);else if("select-one"==a){var c=!1;n.find("option").each(function(){if(e(this).val()==l)return c=!0,!1}),c&&n.val()!==l&&(n.val(l).change(),r=!0)}else if("select-multiple"==a){var d=[],p=n.value();n.find("option").each(function(){var t=e(this);e.each(l,function(e,i){t.val()==i&&d.push(i)})}),d.sort(),p.sort();var g=!0;d.length!=p.length&&(g=!1);for(var f=0;f<d.length;++f)d[f]!==p[f]&&(g=!1);g||(n.val(d).change(),r=!0)}else"textarea"!=a&&"text"!=a||n.val()!==l&&(n.val(l),r=!0)}return r}function u(e,t){var i="stored_field_";if(e&&(i+=e),t)return i=i+"_"+t}function h(e,t){var i=u(e,t);return i?p(i):i}function p(e){return window.adminId?window.adminId+"-"+e:e}t=function(e){try{var t=a.getItem(p(e));if(t)return JSON.parse(t)}catch(t){console.warn("Could not get Storage key: "+e+" cause: "+t)}},i=function(e,t){try{t=JSON.stringify(t),a.setItem(p(e),t)}catch(i){console.warn("Could not set Storage key:value "+e+":"+t+" cause: "+i)}},n=function(e){try{a.removeItem(p(e))}catch(t){console.warn("Could not remove Storage key:"+e+" cause: "+t)}},o=function(t){t.each(function(){var t=e(this);t.is("[data-stored-field]")&&(t.is("input")||t.is("select"))?c(t):t.find("[data-stored-field]").each(function(){c(e(this))})})},r=function(t){var i=!1;return t.each(function(){var t=e(this);t.is("[data-stored-field]")&&(t.is("input")||t.is("select"))?d(t)&&(i=!0):t.find("[data-stored-field]").each(function(){d(e(this))&&(i=!0)})}),i},AGN.Lib.Storage={get:t,set:i,delete:n,readCookie:s,saveChosenFields:o,restoreChosenFields:r}}(jQuery),(()=>{const e=AGN.Lib.Storage;AGN.Lib.Tab=class{static init(t){const i=t.data("toggle-tab"),n=e.get(this.#m(t,i))||{},o=$(i);void 0!==o.data("tab-show")&&(n.hidden=!1,o.data("tab-show",void 0)),void 0!==o.data("tab-hide")&&(n.hidden=!0,o.data("tab-hide",void 0)),(!1===n.hidden||!0!==n.hidden&&o.is(":visible"))&&this.show(t)}static show(e){const t=e.data("toggle-tab"),i=e.parents("ul").find("[data-toggle-tab]").not(e),n=$(t),o=e.find(".tab-toggle"),r=$(e.data("extends-tab"));_.each(i,e=>this.hide($(e))),e.addClass("active"),e.closest("nav").find(".btn-header-tab.active > span").text(e.text()),o.removeClass("icon-angle-down").addClass("icon-angle-up"),n.removeClass("hidden"),r.removeClass("hidden"),n.trigger("tile:show"),this.#q(e,t,!1),AGN.Lib.CoreInitializer.run("load",n)}static hide(e){const t=e.data("toggle-tab"),i=e.find(".tab-toggle");e.removeClass("active"),i.removeClass("icon-angle-up").addClass("icon-angle-down"),$(t).addClass("hidden"),$(t).trigger("tile:hide"),this.#q(e,t,!0)}static toggle(e){$(e.data("toggle-tab")).is(":visible")?this.hide(e):this.show(e)}static#q(t,i,n){"false"!==t.attr("data-store-tab-state")&&e.set(this.#m(t,i),{hidden:n})}static#m(e,t){const i="toggle_tab",n=e.data("tab-group");return n?`${i}/${n}`:i+t}}})(),(()=>{class e{static DATA_ATTR_NAME="agn:table-manager-col";constructor(t){this.$th=t,this.$td=this.#K(),this._name=t.data("table-column"),this.#X(),this.#Z(),this.$th.data(e.DATA_ATTR_NAME,this)}static get(t){return t.data(e.DATA_ATTR_NAME)}get name(){return this._name}get permanent(){return!this.name}get text(){return this.$th.children().first().text().trim()}toggleMode(){this.$controls.toggleClass("hidden"),this.$controls.prev().toggleClass("hidden")}toggle(e=!1){this.$th.toggleClass("hidden",e),this.$td.toggleClass("hidden",e)}isHidden(){return this.$th.hasClass("hidden")}#Z(){const e=AGN.Lib.Template.dom("deletable-table-column",{text:this.text,permanent:this.permanent});this.$th.append(e),this.$controls=e}#K(){const e=this.$th.index()+1;return this.$th.closest("table").find(`td:nth-child(${e})`)}#X(){1===this.$th.contents().length&&$(this.$th.contents()[0]).wrap("<span></span>")}}class i{static DATA_ATTR_NAME="agn:table-column-manager";static SELECTOR="[data-table-column-manager]";static MAX_SELECTED_COLUMNS=8;constructor(t){this.$el=t;const n=t.find("[data-table-column-manager-config]");this.config=n.exists()?n.json():{},this.$btn=t.find("[data-manage-table-columns]"),this.$columnPickerCell=t.find("th.columns-picker"),this._editModeEnabled=!1,this.columns=t.find("[data-table-column]").map(function(){return new e($(this))}).get(),this.#J(),this.#Q(),this.config.editMode&&(this.toEditMode(),this.$columnPicker.find("> .icon-btn").trigger("click")),this.#ee(),t.data(i.DATA_ATTR_NAME,this)}static get(e){return e.closest(i.SELECTOR).data(i.DATA_ATTR_NAME)}toEditMode(){this.#te(),this._columnsBeforeEdit=this.#ie()}applyChanges(){this.#te(),this.$el.trigger($.Event("table-column-manager:apply"),{columns:this.#ne()})}discardChanges(){this.isInEditMode()&&(this.columns.forEach(e=>e.toggle(!this._columnsBeforeEdit.includes(e))),this.#te(),this.$columnPicker.trigger("hidden.bs.dropdown"))}removeColumn(t){const i=e.get(t);this.#oe(i),AGN.Lib.CoreInitializer.run(["table-cols-resizer","table"],this.$el)}isInEditMode(){return this._editModeEnabled}#ee(){const e=this.#ie();if(e.length<=i.MAX_SELECTED_COLUMNS)return;const t=e.length-i.MAX_SELECTED_COLUMNS,n=this.#ne();for(let e=0;e<t;e++){const t=this.#re(n[e]);this.#oe(t)}}#oe(e){AGN.Lib.Select.get(this.$columnSelect).unselectValue(e.name),e.toggle(!0)}#se(){return this.columns.filter(e=>!e.permanent)}#ne(){return this.#se().filter(e=>!e.isHidden()).map(e=>e.name)}#te(){this.columns.forEach(e=>e.toggleMode()),this._editModeEnabled=!this._editModeEnabled,this.$el.toggleClass("is-edit-mode"),this.$columnPicker.toggleClass("hidden"),this.#ae(),AGN.Lib.CoreInitializer.run(["table-cols-resizer","table"],this.$el)}#J(){let e=this.config.columns;e||(e=this.#se().map(e=>({text:e.text,name:e.name,selected:!e.isHidden()})));const t=AGN.Lib.Template.dom("table-column-picker",{columns:e});this.$columnPickerCell.append(t),this.$columnPicker=t,this.$columnSelect=t.find("select"),AGN.runAll(t)}#Q(){let e;this.$columnPicker.on("show.bs.dropdown",function(){e=$(this).find(".dropdown-menu"),$("body").append(e.detach())}),this.$columnPicker.on("hidden.bs.dropdown",()=>{this.$columnPicker.append(e.detach())}),this.$columnSelect.on("select2:selecting",e=>{this.#le()||e.preventDefault()}),this.$columnSelect.on("select2:select",t=>{const i=t.params.data.id,n=this.#re(i);if(n)n.toggle(),AGN.Lib.CoreInitializer.run(["table-cols-resizer","table"],this.$el);else{const t=this.#ne().concat(i);this.$el.trigger($.Event("table-column-manager:add"),{columns:t}),e.remove()}})}#le(){return this.#ie().length!==i.MAX_SELECTED_COLUMNS||(AGN.Lib.Messages.warn("defaults.table.maxColumnsSelected"),!1)}#ie(){return this.columns.filter(e=>!e.isHidden())}#re(e){return this.columns.find(t=>t.name===e)}#ae(){const e=this.$btn.find("span");this.isInEditMode()?e.text(t("defaults.table.saveColumns")):e.text(t("defaults.table.editColumns"))}}AGN.Lib.TableColumnManager=i})(),(()=>{const e=AGN.Lib.Helpers,i=AGN.Lib.Popover,n=AGN.Lib.CoreInitializer;class o{static DATA_KEY="agn:js-table";constructor(t,i,r,s){if(this.$el=t,this.$el.append(this.#ce),this.$el.data(o.DATA_KEY,this),i.forEach(e=>{e.cellRenderer&&(e.cellRenderer=AGN.Opt.TableCellRenderers[e.cellRenderer]),e.filter&&(e.filter=AGN.Opt.Table.filters[e.filter]),e.comparator&&(e.comparator=AGN.Opt.Table.comparators[e.comparator]),e.hasOwnProperty("suppressSizeToFit")&&!r.length&&(e.suppressSizeToFit=!1)}),i.some(e=>"colorBadge"===e.type)){const t=e.getStatColorsNames();_.each(r,(e,i)=>e.color=t[i%t.length])}i[i.length-1].resizable=!1,this.gridOptions=_.merge(this.#de(i),s||{});const a=this.gridOptions.columnDefs.find(e=>"tableActionsColumn"===e.type);a&&!a.hide||(this.gridOptions.selectionColumnDef.hide=!0),this.#ue(),this.api=agGrid.createGrid(this.$table.get(0),this.gridOptions),this.#he(r),this.api.setGridOption("rowData",this.gridOptions.singleNameTable?r.map(e=>({name:e})):r),this.redraw(),this.#pe(),this.popoverTimer=void 0,window.setTimeout(()=>n.run("scrollable",t),100)}#de(e){return{autoSizePadding:4,columnDefs:e,accentedSort:!0,colResizeDefault:"shift",scrollbarWidth:0,pagination:!0,showRecordsCount:!0,paginationPageSize:100,rowSelection:{mode:"multiRow",selectAll:"currentPage"},theme:"legacy",loading:!1,overlayNoRowsTemplate:`\n          <div class="w-100 align-self-start">\n           ${AGN.Lib.Template.text("notification-info",{message:t("defaults.table.empty")})}\n          </div>\n        `,onCellClicked:e=>{"ag-Grid-SelectionColumn"===e.colDef.colId&&e.node.setSelected(!e.node.isSelected())},onColumnResized:e=>{e.finished&&AGN.Lib.CoreInitializer.run("truncated-text-popover",this.$el)},onCellMouseOver:_.throttle(e=>this.showCellPopoverIfTruncated(e),50),onCellMouseOut:_.throttle(e=>this.hideCellPopover(e),50),onSelectionChanged:()=>this.updateBulkActions(),onRowDataUpdated:()=>{this.api.forEachNode(e=>this.#he([e.data])),this.updateBulkActions(),this.#ge()},headerHeight:33,suppressPaginationPanel:!0,onPaginationChanged:()=>{this.api&&(this.#fe(),this.$el.css("--ag-rows-count",this.#me()))},defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoHeight:!0,wrapText:!0,unSortIcon:!0,suppressMovable:!0,sortingOrder:["asc","desc"],suppressHeaderFilterButton:!0,suppressHeaderMenuButton:!0,suppressHeaderContextMenu:!0,headerComponentParams:{template:'\n              <div class="ag-cell-label-container" role="presentation">\n                <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">\n                    <span data-ref="eSortOrder" class="ag-header-icon ag-header-label-icon ag-sort-order" aria-hidden="true"></span>\n                    <span data-ref="eSortAsc" class="ag-header-icon ag-header-label-icon ag-sort-ascending-icon" aria-hidden="true"></span>\n                    <span data-ref="eSortDesc" class="ag-header-icon ag-header-label-icon ag-sort-descending-icon" aria-hidden="true"></span>\n                    <span data-ref="eSortNone" class="ag-header-icon ag-header-label-icon ag-sort-none-icon" aria-hidden="true"></span>\n                    <span data-ref="eText" class="ag-header-cell-text"></span>\n                </div>\n              </div>\n            '},filterParams:{clearButton:!0}},selectionColumnDef:{editable:!1,resizable:!1,sortable:!1,suppressSizeToFit:!0,cellStyle:{textAlign:"center"}},columnTypes:{numberColumn:{cellDataType:"text",comparator:AGN.Lib.TableNumberComparator},numberRangeColumn:{filter:"agNumberColumnFilter",filterParams:{inRangeInclusive:!0}},dateColumn:{filter:DateRangeFilter,cellRenderer:o.dateCellRenderer},dateTimeColumn:{filter:DateRangeFilter,cellRenderer:o.dateTimeCellRenderer},setColumn:{filter:SetFilter},tableActionsColumn:{headerName:"",editable:!1,resizable:!1,sortable:!1,filter:SwitchFilter,cellRenderer:AGN.Opt.TableCellRenderers.TableActionsCellRenderer,suppressSizeToFit:!0},textCaseInsensitiveColumn:{editable:!1,comparator:AGN.Lib.TableCaseInsensitiveComparator,filter:WildcardFilter},select:{comparator:AGN.Lib.TableCaseInsensitiveComparator},colorBadge:{cellRenderer:o.colorBadgeCellRenderer}},icons:{menu:'<i class="icon icon-filter"/>',filter:'<i class="icon icon-filter"/>',columns:'<i class="icon icon-handshake-o"/>',sortAscending:'<i class="icon icon-sort-down"/>',sortDescending:'<i class="icon icon-sort-up"/>',checkboxChecked:'<i class="icon icon-check-square"/>',checkboxUnchecked:'<i class="icon icon-square"/>',checkboxIndeterminate:'<i class="icon icon-square-o"/>',checkboxCheckedReadOnly:'<i class="icon icon-check-square-o"/>',checkboxUncheckedReadOnly:'<i class="icon icon-square-o"/>',checkboxIndeterminateReadOnly:'<i class="icon icon-square-o"/>',sortUnSort:'<i class="icon icon-sort"/>'},localeText:window.I18n.tables,onFilterChanged:()=>{this.#ge(),this.api.forEachNode(e=>this.#he([e.data])),this.api.deselectAll(),this.updateBulkActions()},isRestoreMode:()=>!!this.isRestoreMode,getRowClass:()=>this.isRestoreMode?"ag-row-no-hover":""}}hideCellPopover(e){clearTimeout(this.popoverTimer);const t=this.#ve(e.event.target);i.get(t)?.hide()}showCellPopoverIfTruncated(t){this.popoverTimer=setTimeout(()=>{const n=this.#ve(t.event.target);if(this.#be(n[0])){const t=$(e.retrieveTextElement(n[0])).text();i.getOrCreate(n,{trigger:"manual",content:t}).show()}},400)}#be(t){return t&&($(t).is(":truncated")||e.containsTruncatedElements(t))}#ge(){0===this.api.getDisplayedRowCount()?this.api.showNoRowsOverlay():this.api.hideOverlay()}#ve(e){const t=$(e);return t.is(".ag-cell")?t:t.closest(".ag-cell")}static dateCellRenderer(e,t=!1){const i=t?window.adminDateTimeFormat:window.adminDateFormat,n=o.createCellWrapper(e),r=document.createElement("div");r.classList.add("text-truncate-table"),n.appendChild(r);const s=e?.value?.date||e.value;return r.innerHTML=s?moment(s).format(i.replaceAll("d","D").replaceAll("y","Y")):"",n}static dateTimeCellRenderer(e){return o.dateCellRenderer(e,!0)}static colorBadgeCellRenderer(e){const t=o.createCellWrapper(e),i=$("<div>").addClass("text-truncate-table").html(`\n        <div class="d-flex gap-2">\n            <span class="square-badge badge--stat-${e.data.color}"></span>\n            <span class="text-truncate-table">${e.value}</span>\n        </div>`);return $(t).append(i)[0]}static createCellWrapper(e){const t=e?.api;return AGN.Lib.TableCellWrapper(t?.getGridOption("viewLinkTemplate"),t?.getGridOption("viewInModal"),t?.getGridOption("isRestoreMode")(),e?.data)}get theme(){return"bootstrap"}get#ce(){return`<div class="ag-theme-${this.theme}" style="width: 100%; height: 100%"></div>`}get $table(){return this._$table||(this._$table=this.$el.find(`.ag-theme-${this.theme}`)),this._$table}#ue(){this.gridOptions.showRecordsCount||this.gridOptions.pagination||this.$table.height(this.$el.parent().height())}#fe(){const e=this.api.paginationGetCurrentPage()+1,t=this.api.paginationGetTotalPages(),i={pagination:this.gridOptions.pagination,showRecordsCount:this.gridOptions.showRecordsCount,currentPage:e,totalPages:t,pageSize:this.api.paginationGetPageSize(),pageSelects:this.#ye(e,t)};this.#we();const o=AGN.Lib.Template.dom("table-footer",i),r=this.$el.find(".table-wrapper__footer");r.exists()?r.replaceWith(o):this.$el.append(o),n.run("select",o),this.api.redrawRows()}#ye(e,t){const i=parseInt(this.$el.css("--table-max-pages-count"));let n,o;t<=i?(n=1,o=t):e<=Math.ceil(i/2)?(n=1,o=i):e+Math.floor(i/2)>t?(n=t-i+1,o=t):(n=e-Math.floor(i/2),o=e+Math.floor(i/2)-1);const r=[];for(let e=n;e<=o;e++)r.push(e);return r}#we(){const e=this.api,t=this.#Ce(),i=this.gridOptions.pagination?e.paginationGetRowCount():e.getDisplayedRowCount(),n=this.$el.find(".table-wrapper__entries-label"),o=n.children().first();t>i?o.text(`${i} / ${t}`):o.text(i),n.removeClass("hidden")}#Ce(){let e=0;return this.api.forEachNode(t=>{e++}),e}#me(){if(!this.gridOptions.pagination)return this.api.getDisplayedRowCount();const e=this.api.paginationGetRowCount(),t=this.api.paginationGetCurrentPage(),i=this.api.paginationGetPageSize();return Math.min(e-t*i,i)}redraw(){const e=this.api.getAllDisplayedColumns().filter(e=>!0===e.getColDef().suppressSizeToFit).map(e=>e.getColId());e.length&&this.api.autoSizeColumns(e),this.api.sizeColumnsToFit(),AGN.Lib.CoreInitializer.run("truncated-text-popover",this.$el),this.$el.trigger("table:redraw")}#pe(){$("#filter-tile").on("enterdown",e=>{e.preventDefault(),this.applyFilter.bind(this)()}),$("#apply-filter").on("click",this.applyFilter.bind(this)),$("#reset-filter").on("apply-filter",this.applyFilter.bind(this))}applyFilter(){const e=_.groupBy(this.api.getColumns(),e=>e.getColDef().type),t=this.#_e(e.numberColumn),i=this.#Se(e.numberRangeColumn),n=this.#xe(e.select),o=this.#Ae(_.union(e.dateColumn,e.dateTimeColumn,e.customColumn,e.setColumn,e.tableActionsColumn,e.textCaseInsensitiveColumn)),r=this.#_e(e[void 0]);this.api.setFilterModel({...i,...t,...n,...r,...o}),this.isRestoreMode=$("#deleted-filter").prop("checked")}#Se(e=[]){return e.reduce((e,t)=>{const i=t.getColId(),n=$(`#${i}-min-filter`).val()||Number.MIN_SAFE_INTEGER,o=$(`#${i}-max-filter`).val()||Number.MAX_SAFE_INTEGER;return e[i]={filterType:"number",type:"inRange",filter:n,filterTo:o},e},{})}#_e(e=[]){return e.reduce((e,t)=>{const i=t.getColId(),n=$(`#${i}-filter`.replaceAll(".","\\.")).val()?.toLowerCase();return e[i]={type:"contains",filter:n},e},{})}#xe(e=[]){return e.reduce((e,t)=>{const i=t.getColId(),n=$(`#${i}-filter`).val()?.toLowerCase();return e[i]={type:"equals",filter:n},e},{})}#Ae(e=[]){return e.reduce((e,t)=>(e[t.getColId()]={},e),{})}findRowByElement(e){return this.api.getRowNode(e.closest(".ag-row").attr("row-id"))}updateBulkActions(){const e=this.api.getSelectedRows(),t=e.flatMap(e=>e.rowActions);this.$el.trigger("table:updateBulkActions",[e.length,t])}#he(e){const t=this.api.getColumnDefs().find(e=>"tableActionsColumn"===e.type)?.buttons;t&&e.forEach(e=>e.rowActions=t.filter(t=>this.allowedToShowRowAction(t,e)).map(e=>e.name))}allowedToShowRowAction(e,t){if(this.isRestoreMode)return"restore"===e.name;if(!0===e.hide)return!1;const i=AGN.Opt.TableActionsConditions[e.name];return!i||i(t)}static get(e){return o.getWrapper(e).data(this.DATA_KEY)}static getWrapper(e){return e.closest(".table-wrapper")}}AGN.Lib.Table=o})(),(()=>{const e=AGN.Lib.CSRF,t=AGN.Opt.Templates,i=[];AGN.Lib.Template=class{static prepare(n){if(!this.exists(n))throw new Error(`There's no template \`${n}\` registered`);if(!i[n]){const o=_.template(t[n]);i[n]=function(){const t=o.apply(this,arguments);return e.updateTokenInDOM(t)}}return i[n]}static text(e,t){return this.prepare(e)(t)}static dom(e,t){return $(this.text(e,t))}static exists(e){return e in t}static register(e,t){AGN.Opt.Templates[e]=t,delete i[e]}}})(),(()=>{const e=AGN.Lib.Storage,t="tile--collapsed";class i{constructor(e){this.$el=e.closest(".tile"),this.$toggle=this.$el.all("[data-toggle-tile]"),this.toggleCollapse(this.initiallyHidden),this.$el.data("tile",this)}get initiallyHidden(){const t=this.$el.attr("id"),i=t?e.get("toggle_tile#"+t):void 0;return i?i.hidden:!1===this.$toggle.data("toggle-tile")}get collapsed(){return!this.$el.hasClass(t)}toggleCollapse(i=this.collapsed){this.$el.toggleClass(t,i),this.#Ee(i),this.$el.attr("id")&&e.set(`toggle_tile#${this.$el.attr("id")}`,{hidden:i}),i||(AGN.Lib.CoreInitializer.run("load",this.$el.find(".tile-body")),AGN.Lib.Scrollbar.get(this.$el)?.update())}#Ee(e){this.$el.find("> .tile-header .tile-title i.icon").toggleClass("icon-caret-down",e).toggleClass("icon-caret-up",!e)}static get(e){const t=e.closest(".tile").data("tile");return t||new i(e)}}AGN.Lib.Tile=i})(),(()=>{const e=AGN.Lib.Template,t=AGN.Lib.Helpers,i={get:function(e){const t=bootstrap.Tooltip.getInstance(e);return t||null}};function n(t,i,n){return{title:t,container:"body",template:(o=i,e.text("tooltip-template",{tooltipStyle:o,arrowStyle:r,innerStyle:s})),...n&&{trigger:n}};var o,r,s}i.options=function(i){let o={};if(i.is("[data-tooltip]")){let t=i.data("tooltip");const r=i.data("tooltip-src");r&&(t=e.text(r,{element:i})),o=n(t,i.data("tooltip-style"))}return $.extend(o,t.objFromString(i.data("tooltip-options")))},i.create=function(e,t){i.remove(e);const n=new bootstrap.Tooltip(e,t);if(e.on("remove",function(){i.remove(e)}),"manual"!==t.trigger){new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&n.hide()})}).observe(e[0])}return n},i.remove=function(e){i.get(e)?.dispose()},i.setShown=function(e,t){const n=i.get(e);n&&(t||void 0===t?n.show():n.hide())},i.setContent=function(e,t=""){const n=i.get(e);n&&n.setContent({".tooltip-inner":t})},i.restoreContent=function(e){const t=i.get(e);t&&i.setContent(e,t._getTitle())},i.createTip=function(e,t,o,r){return i.create(e,n(t,o,r))},i.toggleState=function(e,t=!0){const n=i.get(e);t?n?.enable():n?.disable()},AGN.Lib.Tooltip=i})(),AGN.Lib.Upload=class{constructor(e,t,i){const n=this;this.multiple=!t.exists()||t.is("[multiple]"),this.selection=[],this.$dropzone=e,this.$file=t,e.exists()?(e.data("agn:upload",this),new Dropzone(e,{classDragOver:"drag-over",onSelectFiles:function(e){(i||n).#Te(e)}})):(t.data("agn:upload",this),t.on("change",()=>{(i||n).#Te(t.prop("files"))}))}static get(e,t){return e.exists()?e.data("agn:upload"):t.data("agn:upload")}reset(){this.selection=[],this.$file.val("")}removeSelection(e){this.selection.splice(e,1)}getSelection(){return this.selection.slice(0)}#Te(e){if(!e||e.length<=0)return;let t=!1;if(this.multiple)for(let i=0;i<e.length;i++){const n=e[i];this.#ke(n,this.selection.length)&&(this.selection.push(n),t=!0)}else{let i=e[0];this.#ke(i,0)&&(this.selection=[i],t=!0)}t&&this.$dropzone.trigger("upload:dropped",[this.selection])}#ke(e,t){const i=$.Event("upload:add");return(this.$dropzone.exists()?this.$dropzone:this.$file).trigger(i,{file:e,index:t}),!i.isDefaultPrevented()}},function(){var e;(e=function(e){return e.init&&(e.init(),delete e.init),$.extend(this,e)}).exists=function(e){return AGN.Opt.Validators.hasOwnProperty(e)},e.get=function(t){return e.exists(t)?AGN.Opt.Validators[t]:null},e.new=function(t,i){e.exists(t)&&console.debug("Validator with name `"+t+"` was overridden");var n=new e(i);return AGN.Opt.Validators[t]=n,n},e.prototype.valid=function(){return!0},e.prototype.errors=function(){return[]},AGN.Lib.Validator=e}(),(()=>{const e=AGN.Lib.Storage;class t{static PREFIX="web-storage#";static get(i){try{return e.get(t.PREFIX+$.trim(i))}catch(e){console.error(e)}return null}static set(i,n){e.set(t.PREFIX+$.trim(i),n)}static extend(e,i){let n=t.get(e);return n=null!=n?"mailing-preview"===e?$.extend(!0,{},n,i):$.extend(n,i):i,t.set(e,n),n}}AGN.Lib.WebStorage=t})(),AGN.Lib.LB.Definitions={EDITOR:null,IS_BASIC_LB:!1,AGN_TAGS_CONFIG:{},EMPTY_ROW_HEIGHT:80,COLLAPSED_BLOCK_SIZE:10,ALL_ENTRIES:-1,ALL_RECIPIENTS:0,DEFAULT_LAYERING_INDEX:-1,TOP_Z:500,UNCOLLAPSIBLE_GUTTER_SIZE:2,AUTOSAVE_INACITVE_INTERVAL:2e3,MAX_UNDO_OPERATIONS_SIZE:100,CONTROLS_STATE:{DISABLED:0,HIDDEN:1,POPOVER:2,INLINE:3},MARKUP_SPAN:{TEXT:"Text",PLACEHOLDER:"Placeholder",TOC_AREA:"TocArea",TOC_PLACEHOLDER:"TocPlaceholder"},PLACEHOLDER:{LABEL:"Label",TEXT:"Text",LINK:"Link",IMAGE:"Image",IMAGE_SRC:"ImageLink",SELECT:"Select",COLOR:"Color",CHECK:"Check",MULTI:"Multi"},TOC_PLACEHOLDER_TYPE_ID:"Id",TOC_PLACEHOLDER_TYPE_NAME:"Name",TOC_ID_PREFIX:"toc_",DIRECTION:{NONE:"",EAST:"e",WEST:"w",NORTH:"n",SOUTH:"s"},CONTAINER_TYPE:{EDITABLE:0,ANCHORED:2,FIXED_AND_ANCHORED:3}},(()=>{function e(e){var t={};e?(this.data=e.slice(),this.data.forEach(function(e){t[e.id]=e.name})):this.data=[],this.map=t}e.prototype.name=function(e){return this.map[e]},e.prototype.list=function(){return this.data.slice()},AGN.Lib.LB.Categories=e})(),(()=>{function e(){this.deferred=$.Deferred(),this.callback=null}e.prototype.promise=function(){return this.deferred.promise()},e.prototype.bind=function(e){var t=this;if(!1===e)t.callback=null;else{var i=t.callback=function(){t.callback===i&&t.deferred.notifyWith(this,arguments)};$.isArray(e)?e.forEach(function(e){e.progress(i)}):e.progress(i)}},AGN.Lib.LB.PromiseProgressWatcher=e})(),(()=>{const e=AGN.Lib.LB.Definitions;function t(e){var t={};e?(this.data=e.slice(),this.data.forEach(function(e){t[e.id]=e.name})):this.data=[],this.map=t}t.prototype.name=function(t){return this.map[t==e.ALL_ENTRIES?e.ALL_RECIPIENTS:t]},t.prototype.list=function(){return this.data.slice()},AGN.Lib.LB.Targets=t})(),(()=>{const e=AGN.Lib.LB.Definitions;var t={make:function(e,i){t.adjustChildren(e,i),i.forEach(function(t){t.adjustHeight(e.getHeightForSpans(t.getRow(),t.getColumn(),t.getRows(),t.getColumns()))})},getChildrenProjections:function(e,i){var n=[];e.each(function(e){n.push({row:e,projections:[]})});var o=[];return i.forEach(function(e){for(var t=[],i={child:e,height:e.getHeight(),spans:t},r=e.getRow(),s=r+e.getRows()-1,a=r;a<=s;a++){var l={cascade:i,height:0,margin:0,adjusted:!1};t.push(l),n[a-1].projections.push(l)}o.push(i)}),$.each(n,function(t,i){var n=e.getRowMargin(i.row.isGuttered());$.each(i.projections,function(e,t){t.margin=n})}),$.each(o,function(e,i){t.adjustCascade(i)}),n},adjustCascade:function(t){for(var i=Math.max(t.height,e.COLLAPSED_BLOCK_SIZE),n=0,o=t.spans,r=[],s=0;s<o.length;s++){var a=o[s];if(!1===a.adjusted&&(a.height=e.COLLAPSED_BLOCK_SIZE,r.push(a)),(n+=a.height)+a.margin>=i){for(s+=1;s<o.length;s++)o[s].height=0;break}s+1<o.length&&(n+=a.margin)}var l=i-n;if(l>0&&r.length){var c=l/r.length;$.each(r,function(e,t){t.height+=c})}},adjustChildren:function(i,n){$.each(t.getChildrenProjections(i,n),function(i,n){var o=n.projections;if(o.length){var r=0,s=0;$.each(o,function(e,t){t.height>r&&(r=t.height,s=e)}),0===r&&(r=e.EMPTY_ROW_HEIGHT),$.each(o,function(e,i){i.adjusted=!0,e!==s&&(i.height=r,t.adjustCascade(i.cascade))}),n.row.setHeight(r)}else n.row.setHeight(e.EMPTY_ROW_HEIGHT)})}};AGN.Lib.LB.Adjustments=t})(),(()=>{const e=AGN.Lib.LB.Definitions;function t(t){this.horizontal=e.DIRECTION.NONE,this.vertical=e.DIRECTION.NONE;for(var i=0;i<t.length;i++){var n=t.charAt(i).toLowerCase();switch(n){case e.DIRECTION.EAST:case e.DIRECTION.WEST:this.horizontal===e.DIRECTION.NONE?this.horizontal=n:console.error("Ambiguous direction code: "+t);break;case e.DIRECTION.NORTH:case e.DIRECTION.SOUTH:this.vertical===e.DIRECTION.NONE?this.vertical=n:console.error("Ambiguous direction code: "+t);break;default:console.error("Unknown direction code: "+n)}}}t.prototype.isHorizontal=function(){return this.horizontal!==e.DIRECTION.NONE},t.prototype.isVertical=function(){return this.vertical!==e.DIRECTION.NONE},t.prototype.isEast=function(){return this.horizontal===e.DIRECTION.EAST},t.prototype.isWest=function(){return this.horizontal===e.DIRECTION.WEST},t.prototype.isNorth=function(){return this.vertical===e.DIRECTION.NORTH},t.prototype.isSouth=function(){return this.vertical===e.DIRECTION.SOUTH},AGN.Lib.LB.ResizingDirection=t})(),(()=>{function e(e,t){var i=e.get$();this.child=e,this.$child=i,this.grid=t}e.prototype.setupConstraints=function(){this.setConstraints(this.grid.getConstraints(this.child,this.direction))},e.prototype.setConstraints=function(e){this.$child.resizable({minWidth:e.minWidth,maxWidth:e.maxWidth,minHeight:e.minHeight,maxHeight:e.maxHeight})},e.prototype.getArea=function(e,t){return this.grid.getArea(this.child,this.direction,e,t)},e.prototype.start=function(e){this.direction=e,this.area={row:this.child.getRow(),column:this.child.getColumn(),rows:this.child.getRows(),columns:this.child.getColumns()},this.z=this.child.getZ(),this.setupConstraints(),this.grid.setAreaHovered(this.area),this.grid.startResizing(this.child),this.child.setZ(AGN.Lib.LB.Definitions.TOP_Z)},e.prototype.resize=function(e,t){var i=this.getArea(e,t);i.row===this.area.row&&i.column===this.area.column&&i.rows===this.area.rows&&i.columns===this.area.columns||(this.area=i,this.grid.setAreaHovered(i))},e.prototype.stop=function(e,t){this.area=this.getArea(e,t),this.child.setZ(this.z),this.child.setRow(this.area.row),this.child.setColumn(this.area.column),this.child.setRows(this.area.rows),this.child.setColumns(this.area.columns),this.grid.setAreaHovered(null),this.grid.stopResizing(this.child),this.child.adjustSize(this.grid),this.child.adjustCoordinates(this.grid)},AGN.Lib.LB.Resizing=e})(),(()=>{const UNKNOWN_GENDER=2;let SALUTATIONS_CACHE,VOUCHER_CODES_CACHE;class AgnTagsResolver{static resolve(e,t){return AGN.Lib.Helpers.replaceAgnTags(e,(e,i)=>{const n=this.#De(t)?.[i];if(void 0!==n)return n;if("agnIMAGE"===e.name)return this.resolveAgnImage(e,i);if("agnEMAIL"===e.name)return this.#Me("email")||i;if("agnNULL"===e.name)return"";if("agnPROFILE"===e.name)return this.resolveAgnForm("profile");if("agnUNSUBSCRIBE"===e.name)return this.resolveAgnForm("unsubscribe");if("agnWEBVIEW"===e.name||"agnFULLVIEW"===e.name)return`${this.#Pe()}/fullview.action?agnUID=##AGNUID##`;if("agnFORM"===e.name)return e.attributes.name?this.resolveAgnForm(e.attributes.name):i;if("agnPUBVIEW"===e.name)return`${this.#Pe()}/v.html?uid=##PUBID:NL##`;if("agnTITLE"===e.name||"agnTITLEFIRST"===e.name||"agnTITLEFULL"===e.name)return this.resolveAgnTitle(e,i,t);if("agnDB"===e.name)return this.resolveAgnDb(e,i);if("agnAGE"===e.name)return this.resolveAgnAge(e,i);if("agnDAYS_UNTIL"===e.name)return this.resolveAgnDaysUntil(e,i);if("agnBARCODE"===e.name)return this.resolveAgnBarcode(e,i);if("agnQRCODE"===e.name)return this.resolveAgnQrCode(e,i);if("agnONEPIXEL"===e.name){const e=this.#Re();return e?`${this.#Pe()}/g.html?uid=${e}`:i}return"agnUID"===e.name?this.#Re()||i:"agnREDIRECT"===e.name?this.resolveAgnRedirect(e,i):"agnVOUCHER"===e.name?this.resolveAgnVoucher(e,i):"agnIMGLINK"===e.name?"":"agnTXTIMG"===e.name?this.resolveAgnTxtImg(e,i):"agnDYNIMAGE"===e.name?this.resolveAgnDynImage(e,i):"agnITEM"===e.name?this.resolveAgnItem(e,i,t):this.#Ie(i,t)})}static resolveAgnImage(e,t){return!e.attributes.name||e.attributes.source&&"mediapool"!==e.attributes.source&&"mediapoolbg"!==e.attributes.source?t:AGN.url(`/mediapool/${encodeURIComponent(e.attributes.name)}/raw.action`)}static resolveAgnTxtImg(e,t){const i=this.#Re();if(!i)return t;const{reftbl:n,key:o,col:r}=e.attributes;if(this.#Oe(n)||this.#Oe(o)||this.#Oe(r))return t;let s=`${this.#Pe()}/dynimg/${i}?reftbl=${n}&key=${o}&col=${r}`;return["width","height","fontsize","fontname","fontstyle","fontcolor"].forEach(t=>{const i=e.attributes[t];i&&(s+=`&${t}=${i}`)}),s}static resolveAgnDynImage(e,t){const{referencetable:i,keycolumn:n,keyvalue:o,imagesource:r}=e.attributes;if(this.#Oe(i)||this.#Oe(n)||this.#Oe(o))return t;const{licenseId:s}=this.#Ne();if("mediapool"===r)return`${this.#Pe()}/dyn_mediapool_element/${s}/${window.companyId}/${i}.${n}.${o}.jpg`;if("mailing"===r){const e=this.#Le();return e>0?`${this.#Pe()}/dyn_image/${s}/${window.companyId}/${e}/${i}.${n}.${o}.jpg`:""}return`${this.#Pe()}/dyn_extern/${s}/${window.companyId}/${i}.${n}.${o}.jpg`}static resolveAgnItem(e,t,i){return this.#Oe(e.attributes.column)?t:this.#Ie(t,i)}static resolveAgnBarcode(e,t){const i=this.#Re();if(!i)return t;let n=`${this.#Pe()}/barcode?uid=${i}`;const{code:o,column:r,drawtext:s,barheight:a,type:l,voucher:c,default:d}=e.attributes;let u;return o?u=o:r?u=this.#Me(r):c&&(u=this.#Fe(c)||d),u&&(n+="&data="+u),"true"!==s&&"false"!==s||(n+="&drawText="+s),this.#$e(a)&&parseInt(a)>0&&(n+="&barHeight="+a),l&&(n+="&type="+l),n}static resolveAgnRedirect(e,t){const{column:i}=e.attributes;return i?`${this.#Pe()}/redirect?url=##${i}##`:t}static resolveAgnVoucher(e,t){const{name:i}=e.attributes;if(!i)return t;const n=this.#Fe(i);return n||(e.attributes.default??"")}static resolveAgnQrCode(e,t){const i=this.#Re();if(!i)return t;let n=`${this.#Pe()}/qrcode?uid=${i}`;const{data:o,column:r,drawtext:s,height:a,width:l,voucher:c,default:d}=e.attributes;let u;return o?u=o:r?u=this.#Me(r):c&&(u=this.#Fe(c)||d),u&&(n+="&data="+u),"true"!==s&&"false"!==s||(n+="&drawText="+s),this.#$e(a)&&parseInt(a)>0&&(n+="&height="+a),this.#$e(l)&&parseInt(l)>0&&(n+="&width="+l),n}static resolveAgnDb(e,t){const{column:i}=e.attributes;if(!i)return t;const n=this.#Me(i);return this.#Oe(n)?t:n}static resolveAgnForm(e){const{companyToken:t}=this.#Ne();return t?`${this.#Pe()}/form.action?agnCTOKEN=${t}&agnFN=${e}&agnUID=##AGNUID##`:`${this.#Pe()}/form.action?agnCI=${window.companyId}&agnFN=${e}&agnUID=##AGNUID##`}static resolveAgnTitle(e,t,i){const{type:n}=e.attributes;if(!n)return t;const o=this.#Ge()[parseInt(n)];if(!o)return t;const r=$.trim(this.#Me("lastname")),s=$.trim(this.#Me("firstname")),a=$.trim(this.#Me("title"));let l=r?this.#Me("gender"):UNKNOWN_GENDER;AGN.Lib.Helpers.isNumber(l)||(l=UNKNOWN_GENDER);const c=o[l];return c?c.includes("#<>#")?this.#Ie(t,i):l===UNKNOWN_GENDER?c:"agnTITLE"===e.name?`${c} ${a?`${a} `:""}${r}`:"agnTITLEFIRST"===e.name?`${c} ${s}`:"agnTITLEFULL"===e.name?`${c} ${a?`${a} `:""}${s} ${r}`:c:t}static resolveAgnDaysUntil(e,t){const{column:i}=e.attributes;if(!i)return t;if(!["Date","DateTime"].includes(this.#Be(i)))return t;const n=this.#Me(i,!1);if(this.#Oe(n))return t;const o=new Date(n)-new Date;return Math.ceil(o/864e5)}static resolveAgnAge(tag,tagHtml){const{column:column}=tag.attributes;if(!column)return tagHtml;if(!["Date","DateTime"].includes(this.#Be(column)))return tagHtml;const dateMs=this.#Me(column,!1);if(this.#Oe(dateMs))return tagHtml;const{position:positionAttr,length:lengthAttr,modifier:modifierAttr}=tag.attributes;let result=this.#He(new Date(dateMs),new Date);if(null!=modifierAttr)try{result=eval(`${result}${modifierAttr}`)}catch(e){console.error("Error when process 'modifier' attribute in [agnAGE] tag!")}if(result=String(result),this.#$e(positionAttr)){const e=Math.max(1,parseInt(positionAttr));result=result.substring(e-1)}if(this.#$e(lengthAttr)){const e=Math.max(0,parseInt(lengthAttr));e>0&&(result=result.substring(0,e))}return result}static#He(e,t){let i=t.getFullYear()-e.getFullYear();const n=t.getMonth()-e.getMonth(),o=t.getDate()-e.getDate();return(n<0||0===n&&o<0)&&i--,Math.max(0,i)}static#Pe(){return this.#Ne().redirectDomain}static#Re(){return this.#Ne().recipientUID}static#Le(){return this.#Ne().mailingId}static#Me(e,t=!0){const{previewRecipient:i}=this.#Ne(),n=i?.parameters[e];if(this.#Oe(n)||!t)return n;const o=this.#Be(e);if(o){if("Date"===o)return AGN.Lib.DateFormat.format(new Date(n),window.adminDateFormat);if("DateTime"===o)return AGN.Lib.DateFormat.format(new Date(n),window.adminDateTimeFormat)}return n}static#Be(e){const{previewRecipient:t}=this.#Ne();return t.columnsTypes[e]}static#$e(e){const t=parseInt(e,10);return!isNaN(t)&&t.toString()===e}static#Ge(){return SALUTATIONS_CACHE||$.ajax({url:AGN.url("/salutation/list/json.action"),method:"GET",async:!1,success:e=>{SALUTATIONS_CACHE={},e.forEach(e=>SALUTATIONS_CACHE[e.id]=e.titleGender)}}),SALUTATIONS_CACHE}static#Fe(e){if(!VOUCHER_CODES_CACHE){const e=this.#ze();e?$.ajax({url:AGN.url("/administration/table/voucherCodes/json.action"),data:{customerId:e},method:"GET",async:!1,success:e=>VOUCHER_CODES_CACHE=e}):VOUCHER_CODES_CACHE={}}return VOUCHER_CODES_CACHE[e]}static#ze(){return this.#Me("customer_id",!1)||0}static#Ie(e,t){const i=this.#Le(),n=this.#ze();let o;return $.ajax({url:AGN.url("/layoutbuilder/agn-tag/resolve.action"),data:{tag:e,customerId:n,mailingId:i},method:"POST",async:!1,success:e=>o=e}),this.#We(t,e,o),o}static#Ne(){return AGN.Lib.LB.Definitions.AGN_TAGS_CONFIG}static#We(e,t,i){let n=this.#De(e);n||(n={},this.#Ne().resolvedTagsCache[e]=n),n[t]=i}static#De(e){return this.#Ne().resolvedTagsCache[e]}static#Oe(e){return null==e}}AGN.Lib.LB.AgnTagsResolver=AgnTagsResolver})(),(()=>{class e{constructor(e=AGN.Lib.LB.Definitions.MAX_UNDO_OPERATIONS_SIZE){this.maxLength=e,this._stack=[]}add(e){for(;this._stack.length>=this.maxLength;)this._stack.shift();this._stack.push(e)}pop(){return this._stack.pop()}isEmpty(){return _.isEmpty(this._stack)}clear(){this._stack=[]}}AGN.Lib.LB.UndoManager=class{constructor(t,i={}){this._editor=t,this._operationHandlers={},this.undoStack=new e,this.redoStack=new e,this.onChange=_.isFunction(i.onChange)?i.onChange:_.noop}registerHandler(e,t){this._operationHandlers[e]=t}undo(){if(!this.canUndo())return!1;const e=this.undoStack.pop();return e.args=this._operationHandlers[e.operation]?.apply(this,e.args),this.redoStack.add(e),this.onChange(),!0}redo(){if(!this.canRedo())return!1;const e=this.redoStack.pop();return e.args=this._operationHandlers[e.operation]?.apply(this,e.args),this.undoStack.add(e),this.onChange(),!0}clear(){this.undoStack.clear(),this.redoStack.clear()}canUndo(){return!this.undoStack.isEmpty()}canRedo(){return!this.redoStack.isEmpty()}operation(e){const t=[].slice.call(arguments);t.shift(),this.undoStack.add({operation:e,args:t}),this.redoStack.clear(),this.onChange()}}})(),(()=>{const e=AGN.Lib.LB.Definitions,i=AGN.Lib.LB.ResizingDirection;AGN.Lib.LB.Ui={setShown:function(e,t){e.toggleClass("hidden",!t)},setUndoOptionEnabled:function(e){$("#undo-option").toggleClass("disabled",!e)},setRedoOptionEnabled:function(e){$("#redo-option").toggleClass("disabled",!e)},setTooltip:function(e,t){e.data("tooltip",t),AGN.Lib.Tooltip.createTip(e,t)},removeTooltip:function(e){AGN.Lib.Tooltip.remove(e)},checkHoverState:function(e){e.is(":hover")&&e.trigger("mouseleave").trigger("mouseenter")},setLoading:function(e){$("#lb-editor-progress").toggle(!!e),$("#disabled-save-button").parent().toggleClass("hidden",!e),$("#save-button").parent().toggleClass("hidden",!!e)},setEditable:function(e){$("#save-button").parent().toggleClass("hidden",!e),$("#building-blocks-search").toggleClass("disabled",!e),$("#update-text-version").parent().toggle(!!e),$("#visibleTargets").attr("disabled",!e)},setTargetId:function(e){AGN.Lib.Select.get($("#visibleTargets")).selectValue(e)},getAvailableTargetIds:function(){return $("#visibleTargets").children("option").get().map(function(e){return parseInt($(e).val())})},setAvailableTargetIds:function(i){var n=this.getAvailableTargetIds(),o=$("#visibleTargets");o.empty(),i.push({id:e.ALL_ENTRIES,name:t("filter.reset")}),_.sortBy(i,function(t){return t.id>e.ALL_RECIPIENTS?n.indexOf(parseInt(t.id)):t.id==e.ALL_RECIPIENTS?1e6:1000001}).forEach(function(e){$("<option></option>").val(e.id).text(e.name).appendTo(o)})},imagesAdjusted:function(e,t){var i=$.Deferred(),n=void 0,o=void 0;!0===t&&(n=e.outerWidth(),o=e.outerHeight());var r=function(){var t=e.outerWidth(),r=e.outerHeight();n===t&&o===r||(n=t,o=r,i.notify())};return e.imagesLoaded().progress(r).always(r),i.promise()},getHeightAccurate:function(e){return e[0].getBoundingClientRect().height},getResizeHandleDirection:function(e){return e.hasClass("ui-resizable-ne")?new i("ne"):e.hasClass("ui-resizable-se")?new i("se"):e.hasClass("ui-resizable-nw")?new i("nw"):e.hasClass("ui-resizable-sw")?new i("sw"):e.hasClass("ui-resizable-e")?new i("e"):e.hasClass("ui-resizable-w")?new i("w"):e.hasClass("ui-resizable-n")?new i("n"):e.hasClass("ui-resizable-s")?new i("s"):(console.error("Invalid resizing direction handle"),new i(""))}}})(),(()=>{const e=AGN.Lib.LB.Definitions,t=AGN.Lib.LB.AgnTagsResolver,i=AGN.Lib.LB.Resizing,n=AGN.Lib.LB.Ui;function o(t){var i={id:0,name:"",targetId:0,row:0,column:0,rows:1,columns:1,z:0,isTocItem:!1,isRecycled:!1,interestGroup:"",container:{id:0,name:"",isToc:!1,isSortable:!1,markup:[],content:{},tocItemPlaceholderId:0,type:"",filter:""},content:void 0};this.data=_.merge(i,t),void 0===this.data.content&&(this.data.content=_.clone(this.data.container.content)),this.capsule=new AGN.Lib.LB.Capsule(this),this.layeringIndex=e.DEFAULT_LAYERING_INDEX,this.callbacks={};var n=t.container.modeEdit;(this.isContainerDeleted()||n===e.CONTAINER_TYPE.ANCHORED||n===e.CONTAINER_TYPE.FIXED_AND_ANCHORED)&&(this.setDraggable(!1),e.IS_BASIC_LB||this.setResizable(!1))}o.get=function(e){return e.data("agn:child")},o.set=function(e,t){e.data("agn:child",t)},o.render=function(i,n,r,s){let a="";return n.forEach(function(n){switch(n.type){case e.MARKUP_SPAN.TEXT:n.value?a+=t.resolve(n.value,i):a+=n.value;break;case e.MARKUP_SPAN.PLACEHOLDER:var l=r[n.id];if(!n.markup||n.placeholderType===e.PLACEHOLDER.MULTI&&l)switch(n.placeholderType){case e.PLACEHOLDER.LABEL:case e.PLACEHOLDER.TEXT:case e.PLACEHOLDER.LINK:case e.PLACEHOLDER.COLOR:case e.PLACEHOLDER.SELECT:case e.PLACEHOLDER.CHECK:case e.PLACEHOLDER.MULTI:l&&(a+=$.trim(t.resolve(l,i)));break;case e.PLACEHOLDER.IMAGE_SRC:a+=l?$.trim(t.resolve(l,i)):s.noImageLink;break;case e.PLACEHOLDER.IMAGE:a+=parseInt(l)>0?s.imageUriPattern.replace("{image-id}",l):s.noImageLink;break;default:console.error(`Unknown placeholder type: ${n.placeholderType}`)}else(function(t,i){if(!i)return t.placeholderType===e.PLACEHOLDER.MULTI;if(t.placeholderType!==e.PLACEHOLDER.SELECT)return!0;return function(e,t){return!_.has(e.options,"showByValue")||function(e,t){return e?.showByValue===t}(e.options,t)}(t,i)})(n,l)&&(a+=o.render(i,n.markup,r,s));break;case e.MARKUP_SPAN.TOC_AREA:s.toc.forEach(function(e){a+=o.render(i,n.markup,r,$.extend({tocItem:e},s))});break;case e.MARKUP_SPAN.TOC_PLACEHOLDER:switch(n.placeholderType){case e.TOC_PLACEHOLDER_TYPE_ID:a+=e.TOC_ID_PREFIX+s.tocItem.id;break;case e.TOC_PLACEHOLDER_TYPE_NAME:a+=s.tocItem.name;break;default:console.error(`Unknown TOC placeholder type: ${n.placeholderType}`)}break;default:console.error(`Unknown span type: ${n.type}`)}}),AGN.Lib.Helpers.escapeAgnTags(a)},o.collectPlaceholders=function(t,i,n,r,s){t.forEach(function(t){switch(t.type){case e.MARKUP_SPAN.PLACEHOLDER:s&&!s.call(s,t)||_.has(t.options,"showByValue")||void 0===r[t.id]&&(n.push({id:t.id,type:t.placeholderType,name:t.name,value:i[t.id],options:t.options,help:t.help}),r[t.id]=!0);case e.MARKUP_SPAN.TOC_AREA:t.markup&&o.collectPlaceholders(t.markup,i,n,r,s)}})},o.draggableOptions=function(){return{stack:"#lb-childrens .div-container",revert:"invalid",distance:20,cursor:"move",opacity:.4,refreshPositions:!0,start:function(){e.EDITOR.setChildrenControlsEnabled(!1)},stop:function(){e.EDITOR.setChildrenControlsEnabled(!0),e.EDITOR.clearEmptyAddedOnTheFlyRows()},drag:function(t,i){e.EDITOR.processAddedOnTheFlyRows(t)}}},o.resizableOptions=function(t){let o=!1;return{handles:"ne, se, sw, nw, w, n, e, s",autoHide:!0,create:function(){o=new i(t,e.EDITOR.getGrid())},start:function(r,s){!1===o&&(o=new i(t,e.EDITOR.getGrid()));const a=$(r.originalEvent.target);t.setControlsEnabled(!1),t.capsule.setResizingEnabled(!0),o.start(n.getResizeHandleDirection(a))},stop:function(i,n){o.stop(n.size.width,n.size.height),t.capsule.setResizingEnabled(!1),t.setControlsEnabled(!0),t.checkHoverState(),e.EDITOR.updateToc(!1),e.EDITOR.adjust(),e.EDITOR.setChanged(!0)},resize:function(e,t){o.resize(t.size.width,t.size.height)}}},o.prototype.asSubmittable=function(){return{id:this.data.id,containerId:this.data.container.id,name:this.data.name,targetId:this.data.targetId,interestGroup:this.data.container.isSortable&&this.data.interestGroup||"",type:this.data.container.type,filter:this.data.container.filter,row:this.data.row,column:this.data.column,rows:this.data.rows,columns:this.data.columns,content:$.extend({},this.data.content),isTocItem:this.data.isTocItem,z:this.getZ()}},o.prototype.get$=function(){return this.capsule.get$()},o.prototype.getId=function(){return this.data.id},o.prototype.setId=function(e){this.data.id=e},o.prototype.getName=function(){return this.data.name},o.prototype.getContainerName=function(){return this.data.container.name},o.prototype.setName=function(e){this.data.name=e||""},o.prototype.getContainerId=function(){return this.data.container.id},o.prototype.isRecycled=function(){return this.data.isRecycled},o.prototype.setRecycled=function(e){e?(this.setShown(!1),this.setRows(1),this.setColumns(1),this.capsule.recycle(),this.data.isRecycled=!0):this.data.isRecycled=!1},o.prototype.setLayeringIndex=function(e){this.layeringIndex=e,this.capsule.setLayeringIndex(e)},o.prototype.getLayeringIndex=function(e){return this.layeringIndex},o.prototype.setOnLayeringRotate=function(e){this.callbacks.onLayeringRotate=e?()=>e.call(this):void 0},o.prototype.rotateLayering=function(){this.callbacks.onLayeringRotate&&this.callbacks.onLayeringRotate()},o.prototype.isInArea=function(e){return!this.isNotInArea(e)},o.prototype.isNotInArea=function(e){var t=e.column,i=t+e.columns-1,n=e.row,o=n+e.rows-1,r=this.data.column,s=r+this.data.columns-1,a=this.data.row,l=a+this.data.rows-1;return Math.max(r,s)<t||Math.min(r,s)>i||Math.max(a,l)<n||Math.min(a,l)>o},o.prototype.isMatching=function(t){return t===e.ALL_ENTRIES||this.data.targetId===e.ALL_RECIPIENTS||this.data.targetId===t},o.prototype.isToc=function(){return this.data.container.isToc},o.prototype.modeEdit=function(){return this.data.container.modeEdit},o.prototype.isTocItem=function(){return this.data.isTocItem},o.prototype.setTocItem=function(e){this.data.isTocItem=!!e},o.prototype.isSortable=function(){return this.data.container.isSortable},o.prototype.getInterestGroup=function(){return this.isSortable()&&this.data.interestGroup||""},o.prototype.setInterestGroup=function(e){this.isSortable()?this.data.interestGroup=e||"":this.data.interestGroup=""},o.prototype.getTargetId=function(){return this.data.targetId},o.prototype.setTargetId=function(t){this.data.targetId=t>=0?t:e.ALL_RECIPIENTS,this.capsule.updateControls()},o.prototype.getRow=function(){return this.data.row},o.prototype.setRow=function(e){return this.data.row=e},o.prototype.getColumn=function(){return this.data.column},o.prototype.setColumn=function(e){this.data.column=e},o.prototype.getZ=function(){return this.capsule.getZ()},o.prototype.setZ=function(e){this.capsule.setZ(e)},o.prototype.getRows=function(){return this.data.rows},o.prototype.setRows=function(e){this.data.rows=e},o.prototype.getColumns=function(){return this.data.columns},o.prototype.setColumns=function(e){this.data.columns=e},o.prototype.getArea=function(){return AGN.Lib.LB.Grid.area(this.data.row,this.data.column,this.data.rows,this.data.columns)},o.prototype.setArea=function(e){this.setRow(e.row),this.setColumn(e.column),this.setRows(e.rows),this.setColumns(e.columns)},o.prototype.getHeight=function(){return this.capsule.getHeight()},o.prototype.setShown=function(t){this.capsule.setShown(t),this.isContainerDeleted()||(this.setDraggable(t),e.IS_BASIC_LB||this.setResizable(t))},o.prototype.setBorderHighlighted=function(e){this.capsule.setBorderHighlighted(e)},o.prototype.setHighlighted=function(e){this.capsule.setHighlighted(e)},o.prototype.setSize=function(e,t){this.capsule.setSize(e,t)},o.prototype.setCoordinates=function(e){this.capsule.setCoordinates(e)},o.prototype.setControlsEnabled=function(e){this.capsule.setControlsEnabled(e)},o.prototype.checkHoverState=function(){n.checkHoverState(this.capsule.get$())},o.prototype.adjustSize=function(t,i){const n=e.IS_BASIC_LB?"100%":t.getWidthForSpans(this.getColumns());this.setSize(n,i||"auto")},o.prototype.adjustHeight=function(e){this.capsule.adjustHeight(e)},o.prototype.adjustCoordinates=function(e){this.setCoordinates(e.getCoordinates(this.getRow(),this.getColumn()))},o.prototype.setDraggable=function(e){var t=this.capsule.get$();if(e)t.draggable(o.draggableOptions());else try{t.draggable("destroy")}catch(e){}},o.prototype.setResizable=function(e){var t=this.capsule.get$();if(e)t.resizable(o.resizableOptions(this));else try{t.resizable("destroy")}catch(e){}},o.prototype.getPlaceholders=function(t){var i=this.data.content,n=[],r=void 0;return t&&(r=function(e){return e.placeholderType===t}),o.collectPlaceholders(this.data.container.markup,i,n,{},r),n.sort(function(e,t){return e.name.localeCompare(t.name)}),function(t){const i=new Map(t.filter(function(t){return t.type===e.PLACEHOLDER.CHECK}).map(function(e){return[e.id,e.options.split(",").map(function(e){return t.find(function(t){return e==t.id})})]})),n=Array.from(i.values()).flat(),o=[];return t.filter(function(e){return!n.includes(e)}).forEach(function(t){if(o.push(t),t.type===e.PLACEHOLDER.CHECK){i.get(t.id).forEach(function(e){o.push(e)})}}),o}(n)},o.prototype.getPlaceholder=function(e){return this.getPlaceholders().find(t=>t.id==e)},o.prototype.containsMultiPh=function(){return!!this.getMultiPh()},o.prototype.getMultiPh=function(){return this.data.container.markup.find(t=>t.placeholderType===e.PLACEHOLDER.MULTI)},o.prototype.setContent=function(e){$.extend(this.data.content,e)},o.prototype.asTocItem=function(){var e=this.data.container.tocItemPlaceholderId;if(e>0){var t=this.data.content,i=[];if(o.collectPlaceholders(this.data.container.markup,t,i,{},function(t){return t.id===e}),i.length){var n=i[0];return{id:this.data.id,name:t[n.id]||"",placeholderName:n.name,isEnabled:this.data.isTocItem}}}return null},o.prototype.rebuild=function(e){this.capsule.embrace(o.render(this.getId(),this.data.container.markup,this.data.content,e))},o.prototype.pulse=function(){return this.capsule.pulse()},o.prototype.clone=function(){const e=new o(this.data);return e.setId(0),e},o.prototype.isContainerDeleted=function(){return this.data.container.isDeleted},o.prototype.isRssTemplateChild=function(){return!(!this.data.container.type||!this.data.container.type.startsWith("rss:contentSourceId="))},o.prototype.isRssImportedChild=function(){const e="rss:import";return!(!this.data.container.type||!this.data.container.type.startsWith(e))||!(!this.data.type||!this.data.type.startsWith(e))},o.prototype.canFillFromRefTable=function(){return"refTable:placeholders"===this.data.container.type},o.prototype.getRefTableName=function(){return this.canFillFromRefTable()?JSON.parse(this.data.container.filter).refTable:""},o.prototype.getRefTableKeyCol=function(){return this._refTableKey||(this._refTableKey=$.ajax({url:AGN.url(`/administration/table/${this.getRefTableName()}/keyColumn.action`),async:!1}).responseText),this._refTableKey},o.prototype.getRefTableCols=function(){return this._refTableColumns||$.ajax({url:AGN.url(`/administration/table/${this.getRefTableName()}/columns.action`),async:!1}).done(e=>this._refTableColumns=e),this._refTableColumns},AGN.Lib.LB.Child=o})(),(()=>{const e=AGN.Lib.LB.Definitions;function t(e){this.data=$.extend({id:0,name:"",isToc:!1,markup:[],content:{}},e)}t.draggableOptions=function(){return{stack:"#lb-childrens .div-container",revert:"invalid",distance:20,helper:"clone",appendTo:"body",containment:"window",zIndex:e.TOP_Z,refreshPositions:!0,start:function(t,i){i.helper.width($(this).width()),e.EDITOR.setChildrenControlsEnabled(!1)},stop:function(t,i){i.helper.width("auto"),e.EDITOR.setChildrenControlsEnabled(!0),e.EDITOR.clearEmptyAddedOnTheFlyRows()},drag:function(t,i){e.EDITOR.processAddedOnTheFlyRows(t)}}},t.prototype.getContainerId=function(){return this.data.id},t.prototype.getRows=function(){return 1},t.prototype.getColumns=function(){return 1},t.prototype.isToc=function(){return this.data.isToc},t.prototype.instantiate=function(){return new AGN.Lib.LB.Child({name:this.data.name,container:this.data})},AGN.Lib.LB.ChildSample=t})(),(()=>{const e=AGN.Lib.LB.Definitions,t=AGN.Lib.LB.Child;function i(e){e[0]instanceof t?this.children=e.slice():this.children=e.sort(function(e,t){return e.z===t.z?e.columns===t.columns?e.column-t.column:t.columns-e.columns:e.z-t.z}).map(function(e){return new t(e)})}i.make=function(e){return new i(e||[])},i.prototype.get=function(){return this.children.slice()},i.prototype.size=function(){return this.children.length},i.prototype.each=function(e){this.children.forEach(e)},i.prototype.sort=function(e){this.children.sort(e)},i.prototype.contains=function(e){return this.children.indexOf(e)>=0},i.prototype.containsToc=function(){for(var e=0;e<this.children.length;e++)if(this.children[e].isToc())return!0;return!1},i.prototype.matching=function(e){return this.select(function(t){return t.isMatching(e)})},i.prototype.unmatching=function(e){return this.select(function(t){return!t.isMatching(e)})},i.prototype.containsRssChildren=function(){return this.active().children.some(function(e){return e.isRssImportedChild()||e.isRssTemplateChild()})},i.prototype.active=function(){return this.select(function(e){return!e.isRecycled()})},i.prototype.recycled=function(){return this.select(function(e){return e.isRecycled()})},i.prototype.select=function(e){return new i(this.children.filter(e))},i.prototype.removeChilds=function(e){this.children=this.children.filter(t=>!e.includes(t))},i.prototype.add=function(e){e.setZ(this.active().calculateMaxZ()+1),this.children.push(e)},i.prototype.groupsMap=function(){var e={},t=_.groupBy(this.children,function(e){return e.getRow()});return $.each(t,function(t,i){var n={};i.forEach(function(e){var t=e.getColumns();if(t>1)for(var i=e.getColumn(),o=1;o<t;o++)n[i+o]=i}),i.forEach(function(i){for(var o=i.getColumn();n[o];)o=n[o];var r=t+":"+o;void 0===e[r]&&(e[r]=[]),e[r].push(i)})}),e},i.prototype.groups=function(){var e=[],t=this.groupsMap();return $.each(t,function(t,i){i.length&&e.push(i)}),e},i.prototype.collectTargetIds=function(){var e={};return this.each(function(t){e[t.getTargetId()]=!0}),Object.keys(e).sort()},i.prototype.calculateMaxZ=function(){return this.children.reduce(function(e,t){return Math.max(t.getZ(),e)},0)},i.prototype.calculateRowsCount=function(){return this.children.reduce(function(e,t){return Math.max(t.getRow()+t.getRows()-1,e)},0)},i.prototype.setShown=function(t){this.children.forEach(function(i){i.setShown(t);var n=i.data.container.modeEdit;n!==e.CONTAINER_TYPE.ANCHORED&&n!==e.CONTAINER_TYPE.FIXED_AND_ANCHORED||(i.setDraggable(!1),e.IS_BASIC_LB||i.setResizable(!1))})},i.prototype.setBorderHighlighted=function(e){this.children.forEach(function(t){t.setBorderHighlighted(e)})},i.prototype.setHighlighted=function(e){this.children.forEach(function(t){t.setHighlighted(e)})},i.prototype.setControlsEnabled=function(t){this.children.forEach(function(i){i.setControlsEnabled(t),i.isContainerDeleted()||e.IS_BASIC_LB||i.setResizable(t),i.checkHoverState()})},i.prototype.asTocItems=function(e){var t=(e?_.map(this.groupsMap(),function(e){return _.maxBy(e,function(e){return e.getZ()})}):this.children.slice()).sort(function(e,t){return e.getRow()===t.getRow()?e.getColumn()===t.getColumn()?t.getZ()-e.getZ():e.getColumn()-t.getColumn():e.getRow()-t.getRow()}).map(function(e){return e.asTocItem()}).filter(function(e){return!!e});return e?t.filter(function(e){return e.isEnabled}):t},i.prototype.pulse=function(){return this.children.map(function(e){return e.pulse()})},i.prototype.rebuildStatic=function(e){this.each(function(t){t.isToc()||t.rebuild(e)})},i.prototype.rebuildToc=function(e){let t=!1;return this.each(i=>{i.isToc()&&(i.rebuild($.extend({},e,{toc:this.asTocItems(!0)})),t=!0)}),t},i.prototype.rotateLayering=function(){const e=this.children.slice().sort((e,t)=>e.getZ()-t.getZ()),t=e.map(e=>e.getZ());e.forEach((e,i)=>{e.setShown(i===t.length-2),e.setZ(t[(i+1)%t.length])})},i.prototype.setLayeringByTargets=function(e){const t=this.children.slice().sort((e,t)=>t.getZ()-e.getZ()),i=t.map(e=>e.getZ());_.sortBy(t,t=>e.indexOf(t.getTargetId())).forEach((e,t)=>{e.setShown(0===t),e.setZ(i[t])})},i.prototype.stick=function(e){this.children.forEach(function(t){t.isInArea(e)&&t.setArea(e)})},i.prototype.adjustLayering=function(){let e=this.children.length;this.children.forEach(t=>t.setZ(--e))},i.prototype.adjustSizes=function(e){this.children.forEach(function(t){t.adjustSize(e)})},i.prototype.adjustCoordinates=function(e){this.children.forEach(function(t){t.adjustCoordinates(e)})},AGN.Lib.LB.Children=i})(),(()=>{const e=AGN.Lib.LB.Definitions,i="-mobile";function n(e,t,i){this.$el=e,this.child=t,this.options=i,this._displayMediapoolImages(),this._controlCheckPhChildrenVisibility(),this._updateImageSrcPreview=_.throttle(this._updateImageSrcPreview,300)}function o(){return $("#div-child-edit-tile")}n.get=function(){return o().data("agn:child-editor")},n.init=function(e,t){const r=n.get();if(r&&(r.isInitForChild(e)||!r.applyScheduledChanges()))return;const s=AGN.Lib.Template.dom("div-editing-block",{...t,mobileSuffix:i}),a=AGN.Lib.Template.dom("child-targetgroup-dropdown",{targets:t.targets,targetId:e.getTargetId()}),l=o();l.find(".js-wysiwyg").each(function(){window.Jodit?Jodit.instances[$(this).attr("id")]?.destruct():window.removeEditor($(this).attr("id"))}),l.find(".tile-title").text(e.getContainerName()),l.find(".tile-body").empty().append(s),l.find("> .tile-header .tile-controls").empty().removeClass("hidden").append(a);const c=new n(l,e,t);l.data("agn:child-editor",c),AGN.Lib.Controller.init(s),AGN.runAll(l.find("> *")),AGN.Lib.Form.get(l).initFields(),c.setupJsEditorChangeDetection()},n.prototype.updateImageSrc=function(e){const t=e.data("placeholder-id"),i=$.trim(e.val());this._updateImageSrcPreview(t,i)},n.prototype._updateImageSrcPreview=function(e,t){const i=$(`#preview-${e}`);i.attr("src")!==t&&i.attr("src",$.trim(AGN.Lib.LB.AgnTagsResolver.resolve(t,this.child.getId()))||this.options.noPreviewImageLink)},n.prototype.updateImage=function(e,t){const n=e.data("placeholder-id"),o=e.prop("files"),r=$(`#content-${n}`);if(o&&o.length){const r=o[0];if("image"===r.type||r.type.match("image/.*")){const e=new FileReader;if(t){const e=n.replace(i,""),t=$(`#image-name-${e}`).text();AGN.Lib.Helpers.renameFile(r,this.options.mobileImagePrefix+t)}else{const e=this._buildMobilePlaceholder(n);this._toggleMobileImageBlockVisibility(e,!0),this._updateImagePreview(e)}e.onload=e=>this._updateImagePreview(n,e.target.result,r.name,r.name),e.readAsDataURL(r)}else AGN.Lib.Helpers.clearFormField(e),this._updateImagePreview(n)}else this._updateImagePreview(n);r.val("")},n.prototype.syncImageCategories=function(e,t){const i=$(`#content-${e}`).val();this._findPlaceholdersWithImage(i).forEach(e=>{const i=$(`#image-category-id-${e.id}`);AGN.Lib.Select.get(i).selectValue(t)})},n.prototype._findPlaceholdersWithImage=function(t){return this.child.getPlaceholders(e.PLACEHOLDER.IMAGE).filter(e=>t==$(`#content-${e.id}`).val())},n.prototype._updateImagePreview=function(e,t,i,n){const o=$(`#preview-${e}`),r=$(`#image-name-${e}`);o.attr("src")!==t&&o.attr("src",t||this.options.noPreviewImageLink),o.attr("title",n||""),r.text(i||"")},n.prototype._toggleMobileImageBlockVisibility=function(e,t){const i=$(`#image-block-${e}`);AGN.Lib.LB.Ui.setShown(i,t)},n.prototype.chooseImage=function(e){const t=$(`#file-${e}`);t.val()||String(e).endsWith(i)?t.trigger("click"):this.showMediapoolDialog(e)},n.prototype.deleteImage=function(e,t){if(this._clearImageData(e),!t){const t=this._buildMobilePlaceholder(e);this._clearImageData(t),this._changeImageControlsState(t,!1),this._toggleMobileImageBlockVisibility(t,!1),this.savePlaceholder(e)}},n.prototype._clearImageData=function(e){const t=$(`#file-${e}`),i=$(`#image-name-${e}`),n=$(`#content-${e}`),o=$(`#preview-${e}`);AGN.Lib.Helpers.clearFormField(t),i.text(""),n.val(""),o.attr("src",this.options.noPreviewImageLink)},n.prototype.showMediapoolDialog=function(e){AGN.Lib.Confirm.request(AGN.url("/mediapool/image/pick.action")).done(t=>{this._updateMobileAlternative(t.id,e);let i=t.category.categoryId;const n=this._findPlaceholdersWithImage(t.id);n.length>0&&(i=$(`#image-category-id-${n[0].id}`).val()),$(`#content-${e}`).val(t.id),AGN.Lib.Select.get($(`#image-category-id-${e}`)).selectValue(i),AGN.Lib.Helpers.clearFormField($(`#file-${e}`)),this._updateImagePreview(e,t.src,t.fileName,t.title),this.savePlaceholder(e)})},n.prototype._updateMobileAlternative=function(e,t){const i=this._buildMobilePlaceholder(t);this._loadMobileAlternative(e).then(e=>{$(`#content-${i}`).val(e.id),this._updateImagePreview(i,e.src,e.name,e.title),this._changeImageControlsState(i,!0)}).catch(()=>{this._updateImagePreview(i),this._changeImageControlsState(i,!1)}).finally(()=>{AGN.Lib.Helpers.clearFormField($(`#file-${i}`)),this._toggleMobileImageBlockVisibility(i,!0)})},n.prototype._changeImageControlsState=function(e,t){const i=$(`#preview-${e}`);$(`#image-delete-button-${e}`).prop("disabled",t),$(`#choose-image-btn-${e}`).prop("disabled",t),i.toggleClass("clickable",!t),i.attr("data-action",t?"":"chooseImage")},n.prototype._loadMobileAlternative=function(e){return new Promise((t,i)=>{$.ajax({url:AGN.url(`/mediapool/${e}/mobile-alternative/json.action`),type:"GET",success:e=>t(e),error:()=>i(),statusCode:{404:()=>i()}})})},n.prototype._buildMobilePlaceholder=function(e){return e+i},n.prototype.updateChildTarget=function(t){e.EDITOR.setChildTarget(this.child,t)},n.prototype.updateChildInterestGroup=function(){const t=$("#is-interest-sortable").is(":checked")?$("#interest-group").val():"";this.child.setInterestGroup(t),e.EDITOR.setChanged(!0)},n.prototype.updateToC=function(){const t={};$("input.js-is-toc-item").each(function(){const e=$(this);t[e.data("child-id")]=e.is(":checked")}),e.EDITOR.updateTocItemsUsage(this.child,t)},n.prototype.setTocItem=function(t){e.EDITOR.setTocItem(this.child,t)},n.prototype._saveIfChanged=function(e){return!this._placeholderWasChanged(e)||this.savePlaceholder(e)},n.prototype._placeholderWasChanged=function(e){const t=this.child.getPlaceholder(e);if(!t)return!1;return t.value!==this._readPlaceholderValue(e,t.type)},n.prototype.savePlaceholder=function(t){const i=this.child.getPlaceholder(t);return!!this._validatePlaceholder(i)&&(this._prepareDataBeforeSave(i).done(()=>{if(i.type===e.PLACEHOLDER.TEXT){const e=this._findWysiwygEditor(t);e.exists()&&AGN.Lib.Editor.get(e).val(e.val(),!0)}const n=this._readPlaceholderValue(t,i.type);e.EDITOR.savePlaceholder(this.child,t,n)}),!0)},n.prototype.updateCategory=function(t){const i=this.child.getPlaceholder(t);if(this._validatePlaceholder(i)){const i=parseInt($(`#content-${t}`).val());if(i>0){const n=$(`#image-category-id-${t}`).val();this.updateImageCategory(i,n,!0).then(t=>{e.EDITOR.getUndoManager().operation("mediapoolImageCategoryChanged",this.child,i,t,n)})}}},n.prototype._readPlaceholderValue=function(t,i){const n=$(`#content-${t}`);if(i===e.PLACEHOLDER.CHECK)return n.prop("checked")?"checked":"";if(i===e.PLACEHOLDER.TEXT){return(window.Jodit?Jodit.instances[n.attr("id")]?.value:CKEDITOR.instances[n.attr("id")]?.getData())||n.val()}return n.val()},n.prototype._prepareDataBeforeSave=function(t){const i=$.Deferred();return t.type===e.PLACEHOLDER.IMAGE?this._uploadImage(t).done(()=>i.resolve()):i.resolve(),i.promise()},n.prototype.updateImageCategory=function(e,t,i=!1){const n=$.Deferred();return $.ajax(AGN.url(`/mediapool/${e}/category/change.action`),{type:"POST",dataType:"json",async:i,data:{categoryId:t}}).done(e=>n.resolve(e.data)).fail(()=>n.reject()),n.promise()},n.prototype._uploadImage=function(e){const t=$.Deferred(),i=e.id,n=this._buildMobilePlaceholder(i);return this._collectImagesToUpload(i,n).then(e=>{if(e.length){const i=new FormData;e.forEach((e,t)=>{i.append(`uploads[${t}].file`,e.image),i.append(`uploads[${t}].fileName`,e.image.name),i.append(`uploads[${t}].title`,e.image.name),i.append(`uploads[${t}].categoryId`,e.categoryId)}),$.ajax(AGN.url("/mediapool/upload.action?asJson=true"),{type:"POST",dataType:"json",enctype:"multipart/form-data",processData:!1,contentType:!1,data:i}).done(i=>{AGN.Lib.JsonMessages(i.popups),i.data&&e.forEach(e=>{const t=i.data[e.image.name];if(t){const i=e.placeholderId;$(`#content-${i}`).val(t),AGN.Lib.Helpers.clearFormField($(`#file-${i}`)),i==n&&this._changeImageControlsState(n,!0)}}),!0===i.success?t.resolve():t.reject()}).fail(()=>t.reject())}else t.resolve()}),t.promise()},n.prototype._collectImagesToUpload=function(e,t){return new Promise(i=>{const n=[];Promise.all([e,t].map(t=>{const i=$(`#file-${t}`).prop("files");return i?.length?this._checkIfCanBeUploaded(i[0].name).then(()=>{n.push({placeholderId:t,image:i[0],categoryId:$(`#image-category-id-${e}`).val()})}):Promise.resolve()})).then(()=>i(n))})},n.prototype._checkIfCanBeUploaded=function(e){return new Promise((t,i)=>{$.get(AGN.url("/mediapool/findIdByFilename.action"),{fileName:e}).done(e=>{e>0?AGN.Lib.Confirm.from("lb-replace-mediapool-image-question-modal",{imageId:e}).done(t).catch(i):t()})})},n.prototype._validatePlaceholder=function(t){if(t.type===e.PLACEHOLDER.CHECK||t.type===e.PLACEHOLDER.COLOR)return!0;if(t.type===e.PLACEHOLDER.IMAGE)return this._validateImageCategory(t)&&this._validateImageFormats(t);if(!window.Jodit&&t.type===e.PLACEHOLDER.TEXT){const e=this._findWysiwygEditor(t.id);e.exists()&&CKEDITOR.instances[e.attr("id")]?.updateElement()}return this._validateHtml(t)},n.prototype._validateHtml=function(t){const i=$(`#content-${t.id}`).val();if(!$.trim(i))return!0;let n=!1;return $.ajax({type:"POST",url:AGN.url(`/layoutbuilder/template/${e.EDITOR.getTemplateId()}/validateHtml.action`),contentType:"application/json",async:!1,data:JSON.stringify({htmlPlaceholders:{[t.name]:i}})}).done(e=>{AGN.Lib.JsonMessages(e.popups,!0),n=!!e.success}),n},n.prototype._validateImageCategory=function(e){const i=e.id,n=$(`#image-category-id-${i}`);if(AGN.Lib.Form.cleanFieldFeedback$(n),n.val()>0)return!0;const o=!!$(`#file-${i}`).val(),r=$(`#content-${i}`).val();return(o||parseInt(r)>0)&&AGN.Lib.Form.showFieldError$(n,t("error.grid.noCategorySelected")),!1},n.prototype._validateImageFormats=function(e){const i=e.id,n=$(`#file-${i}`).val(),o=$(`#content-${i}`);return AGN.Lib.Form.cleanFieldFeedback$(o),!(n&&!(e=>{const t=e.match(/[^.\\/]\.([^.\\/]+)$/);if(t){return["GIF","JPG","JPEG","PNG","SVG","ICO"].includes(t[1].toUpperCase())}return!1})(n))||(AGN.Lib.Form.showFieldError$(o,t("grid.divchild.format.error")),!1)},n.prototype._findWysiwygEditor=function(e){return this.$el.find(`.js-wysiwyg[data-ph-id='${e}']`)},n.prototype._controlCheckPhChildrenVisibility=function(){this.child.getPlaceholders(e.PLACEHOLDER.CHECK).filter(e=>e).forEach(e=>{const t=$(`\n            <div id="${e.id}-children" class="bordered-box-sm" data-show-by-checkbox="#content-${e.id}">\n                <div class="row g-2"></div>\n            </div>\n        `);t.insertAfter($(`#content-${e.id}`).parent()),e.options.split(",").forEach(e=>{t.find("> .row").append($(`.ph-${e}`))})}),AGN.Lib.CoreInitializer.run("checkbox-hider",this.$el)},n.prototype._displayMediapoolImages=function(){const t=this.child.getPlaceholders(e.PLACEHOLDER.IMAGE),i=t.map(e=>parseInt(e.value)).filter(e=>e>0);i.length<=0||$.get(AGN.url("/mediapool/elements/json.action"),{ids:i}).done(e=>{t.forEach(t=>{const i=parseInt(t.value);if(i>0){const n=e[i];AGN.Lib.Select.get($(`#image-category-id-${t.id}`)).selectValue(n.categoryId),this._updateImagePreview(t.id,n.src,n.name,n.title);const o=this._buildMobilePlaceholder(t.id);n.mobileSrc&&(this._updateImagePreview(o,n.mobileSrc,n.mobileName,n.mobileTitle),this._changeImageControlsState(o,!0)),this._toggleMobileImageBlockVisibility(o,!0)}})})},n.prototype.setupJsEditorChangeDetection=function(t=this.$el){const i=this;t.find(".js-editor").each(function(){const t=$(this);i._clearAutoSaveTimeout(t);const o=()=>{i._clearAutoSaveTimeout(t);const o=window.setTimeout(()=>{i===n.get()&&i._saveIfChanged(t.data("ph-id"))},e.AUTOSAVE_INACITVE_INTERVAL);t.data("lb:autosave-timeoutId",o)};t.off("editor:change",o),t.on("editor:change",o),window.Jodit?t.on("change",o):CKEDITOR.instances[t.attr("id")]?.on("change",o)})},n.prototype._clearAutoSaveTimeout=function(e){"none"!==e.data("lb:autosave-timeoutId")&&(clearTimeout(e.data("lb:autosave-timeoutId")),e.data("lb:autosave-timeoutId","none"))},n.prototype.applyScheduledChanges=function(){const e=this;let t=!0;return this.$el.find(".js-editor").each(function(){const i=$(this);e._clearAutoSaveTimeout(i);const n=e._saveIfChanged(i.data("ph-id"));t&&(t=n)}),t},n.prototype.notifyTabChanged=function(e){const t=e.closest(".tile"),i=t.find(".js-editor").data("ph-id");this.setupJsEditorChangeDetection(t),this._saveIfChanged(i)},n.prototype.get$=function(){return this.$el},n.prototype.isInitForChild=function(e){return this.child===e},AGN.Lib.LB.ChildEditor=n})(),(()=>{function e(e){this.child=e}e.prototype.getOptions=function(){return{targetName:AGN.Lib.LB.Definitions.EDITOR.getTargetName(this.child.getTargetId()),isToc:this.child.isToc(),containerDeleted:this.child.isContainerDeleted(),containerModeEdit:this.child.modeEdit()}},e.prototype.createControls=function(e){var t=AGN.Lib.Template.dom(e,this.getOptions());return AGN.Lib.LB.Child.set(t.find("[data-action]"),this.child),AGN.runAll(t),t},e.prototype.createInlineControls=function(){return this.createControls("child-controls")},e.prototype.createPopoverControls=function(){return this.createControls("child-popover-controls")},AGN.Lib.LB.ControlsFactory=e})(),(()=>{const e=AGN.Lib.LB.Definitions,t=AGN.Lib.LB.Child;function i(i){this.$capsule=i,this.child=t.get(i),this.factory=new AGN.Lib.LB.ControlsFactory(this.child),this.timeoutId=null,this.state=e.CONTROLS_STATE.HIDDEN,this.update(),i.on("mouseenter",()=>this.show()),i.on("mouseleave",()=>this.hide())}i.popoverOptions=function(e){return{trigger:"manual",html:!0,content:function(){return e.getPopoverContent()}}},i.prototype.stopHiding=function(){return!!this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0,!0)},i.prototype.popoverShow=function(t=!0){if(!this.stopHiding()&&(this.popover.show(),t)){const e=$(this.popover.tip);e.on("mouseenter",()=>this.popoverShow(!1)),e.on("mouseleave",()=>this.popoverHide())}this.state=e.CONTROLS_STATE.POPOVER},i.prototype.popoverHide=function(t){if(this.stopHiding(),!0===t)this.popover.hide(),this.state=e.CONTROLS_STATE.HIDDEN;else{var i=this;this.timeoutId=setTimeout(function(){i.popoverHide(!0)},200)}},i.prototype.inlineShow=function(){this.$inlineControls.css("display","flex"),this.state=e.CONTROLS_STATE.INLINE},i.prototype.inlineHide=function(){this.$inlineControls.hide(),this.state=e.CONTROLS_STATE.HIDDEN},i.prototype.show=function(){this.state!==e.CONTROLS_STATE.DISABLED&&(this.$inlineControls.css("bottom",""),this.$inlineControls.height()<=this.$capsule.height()?(this.$inlineControls.css("bottom",0),this.state===e.CONTROLS_STATE.POPOVER&&this.popoverHide(!0),this.inlineShow()):(this.state===e.CONTROLS_STATE.INLINE&&this.inlineHide(),this.popoverShow()))},i.prototype.hide=function(t){switch(this.state){case e.CONTROLS_STATE.INLINE:this.inlineHide();break;case e.CONTROLS_STATE.POPOVER:this.popoverHide(t)}},i.prototype.setEnabled=function(t){t?this.state===e.CONTROLS_STATE.DISABLED&&(this.state=e.CONTROLS_STATE.HIDDEN):(this.hide(!0),this.state=e.CONTROLS_STATE.DISABLED)},i.prototype.update=function(){this.$inlineControls&&this.$inlineControls.remove(),this.$inlineControls=this.factory.createInlineControls(),this.$capsule.append(this.$inlineControls),this.popover&&AGN.Lib.Popover.remove(this.$capsule),this.$popoverControls&&(this.$popoverControls=void 0),this.popover=AGN.Lib.Popover.create(this.$capsule,i.popoverOptions(this)),this.state!==e.CONTROLS_STATE.INLINE&&this.state!==e.CONTROLS_STATE.POPOVER||this.show()},i.prototype.getPopoverContent=function(){if(void 0===this.$popoverControls){this.$popoverControls=this.factory.createPopoverControls();var e=this.$popoverControls.find("[data-action]");t.set(e,this.child);var i=this;e.on("click",function(){i.popoverHide(!0)})}this._updateLayeringBtn(this.child.getLayeringIndex(),this.$popoverControls);var n=this.$popoverControls.clone(!0);return AGN.runAll(n),n},i.prototype.updateLayeringBtn=function(e){this._updateLayeringBtn(e,this.$inlineControls),this._updateLayeringBtn(e,this.$popoverControls)},i.prototype._updateLayeringBtn=function(e,t){if(!t)return;const i=t.find(".lb-layering-btn");e>0&&(i.find(".layer-number").text(e),i.off("click"),i.on("click",()=>{this.child.rotateLayering(),this.hide()})),i.toggleClass("hidden",e<=0)},i.prototype.remove=function(){this.state=e.CONTROLS_STATE.DISABLED,this.stopHiding(),this.popover.destroy(),this.$popoverControls=void 0,this.$inlineControls.remove(),this.$inlineControls=void 0},AGN.Lib.LB.Controls=i})(),(()=>{const e=AGN.Lib.LB.Definitions,i=AGN.Lib.LB.Ui;function n(e){var t=this,o=$.Deferred(),r=AGN.Lib.Template.dom("div-sandbox");this.promise=o.promise(),this.watcher=new AGN.Lib.LB.PromiseProgressWatcher,this.$capsule=r,this.$content=n.stub(),e.isContainerDeleted()&&this.showIsDeleted(),r.find("iframe").on("load",function(){var e=$(this).contents().get(0);$(e.head).append(n.style()),$(e.body).append(t.$content),t.watcher.bind(i.imagesAdjusted(t.$content)),o.resolveWith(t)}),r.appendTo("#lb-childrens"),AGN.Lib.LB.Child.set(r,e),this.controls=new AGN.Lib.LB.Controls(r)}n.stub=function(){return $('<div class="div-container"></div>')},n.css=function(){return $("#template-styles").html()},n.style=function(){return $("<style/>",{html:this.css()})},n.prototype.get$=function(){return this.$capsule},n.prototype.updateControls=function(){this.controls.update()},n.prototype.setControlsEnabled=function(e){this.controls.setEnabled(e)},n.prototype.ready=function(e){return void 0!==e&&this.promise.done(e),"resolved"===this.promise.state()},n.prototype.setLayeringIndex=function(e){this.controls.updateLayeringBtn(e)},n.prototype.pulse=function(){return this.watcher.promise()},n.prototype.embrace=function(e){var t=$(e).filter("*");if(this.ready()){this.$content.replaceWith(t),this.$content=t;var n=this.$capsule.outerWidth();n>0&&this.setSize(n,"auto"),this.watcher.bind(i.imagesAdjusted(t,!0))}else this.$content=t},n.prototype.recycle=function(){var e=this;this.setShown(!1),this.ready(function(){var t=n.stub();e.watcher.bind(!1),e.$content.replaceWith(t),e.$content=t})},n.prototype.getZ=function(){return this.$capsule.css("z-index")},n.prototype.setZ=function(e){this.$capsule.css("z-index",e)},n.prototype.setShown=function(e){i.setShown(this.$capsule,e)},n.prototype.setBorderHighlighted=function(e){this.$capsule.toggleClass("highlight-border",e)},n.prototype.setHighlighted=function(e){this.$capsule.toggleClass("highlighted",e)},n.prototype.setCoordinates=function(e){this.$capsule.offset(e)},n.prototype.setSize=function(t,i){e.IS_BASIC_LB||this.$content.outerWidth(t),this.$capsule.outerWidth(t),this.ready()?(this.$content.style("width",function(e){return e},"important"),this.$content.style("height","auto","important"),"auto"===i&&(i=this.$content.outerHeight()),this.$capsule.outerHeight(i)):"auto"===i?this.$capsule.outerHeight(e.EMPTY_ROW_HEIGHT):this.$capsule.outerHeight(i)},n.prototype.adjustHeight=function(e){this.$capsule.outerHeight(e)},n.prototype.getHeight=function(){return this.ready()?i.getHeightAccurate(this.$content):e.EMPTY_ROW_HEIGHT},n.prototype.setResizingEnabled=function(e){e?(this.$capsule.css("box-sizing","content-box"),this.$capsule.css("opacity",.4),this.$content.style("width","100%","important"),this.$content.style("height","100%","important")):(this.$capsule.css("box-sizing",""),this.$capsule.css("opacity",""))},n.prototype.showIsDeleted=function(){const e=this.$capsule.find(".div-sandbox-overlay");e.addClass("div--deleted");const i=$(`\n        <div data-tooltip="${t("grid.container.deleted")}">\n            <button type="button" class="btn btn-icon btn-danger pe-none">\n                <i class="icon icon-trash-alt"></i>\n            </button>\n        </div>\n    `);AGN.Lib.Tooltip.create(i,AGN.Lib.Tooltip.options(i)),e.append(i)},AGN.Lib.LB.Capsule=n})(),(()=>{const e=AGN.Lib.LB.Child;class t{constructor(e){this.$droppable=AGN.Lib.Template.dom("droppable"),this.$droppable.data("agn:droppable",this),this.$droppable.droppable(t.options(this)),this.row=e,this.callbacks={}}static get(e){return e.data("agn:droppable")}static options(t){return{accept:"[data-building-block]",tolerance:"pointer",deactivate:function(){t.setHovered(!1),t.callbacks.onHoverChange&&t.callbacks.onHoverChange(!1)},drop:function(i,n){t.setHovered(!1),t.callbacks.onDrop&&t.callbacks.onDrop(e.get(n.draggable)),t.row.isEmptyRowAddedOnTheFly=!1},over:function(i,n){t.callbacks.onHoverChange?t.callbacks.onHoverChange(e.get(n.draggable),!0):t.setHovered(!0)},out:function(i,n){t.callbacks.onHoverChange?t.callbacks.onHoverChange(e.get(n.draggable),!1):t.setHovered(!1)}}}get$(){return this.$droppable}getCoordinates(){return this.$droppable.offset()}getRow(){return this.row}getHeight(){return AGN.Lib.LB.Ui.getHeightAccurate(this.$droppable)}setHeight(e){this.$droppable.outerHeight(e)}setHovered(e){this.$droppable.toggleClass("container-hover-accept",e)}remove(){this.$droppable.droppable("destroy"),this.$droppable.remove(),this.callbacks.onDrop=void 0,this.callbacks.onHoverChange=void 0}setOnDrop(e){var t=this;this.callbacks.onDrop=function(i){e.call(t,i)}}setOnHoverChange(e){var t=this;this.callbacks.onHoverChange=function(i,n){e.call(t,i,n)}}}AGN.Lib.LB.Droppable=t})(),(()=>{const e=AGN.Lib.LB.Definitions,i=AGN.Lib.LB.Ui;AGN.Lib.LB.Row=class{constructor(e,n){this.$row=AGN.Lib.Template.dom("droppables-row"),this.$removeButton=AGN.Lib.Template.dom("remove-row-button"),this.$row.data("agn:row",this),this.$removeButton.data("agn:row",this),this.droppables=[],this.callbacks={};for(var o=1;o<=e;o++){var r=this.createDroppable();this.droppables.push(r),this.$row.append(r.get$())}this.setGuttered(n),this.$removeButton.appendTo("#lb-sidebar"),i.setTooltip(this.$removeButton,t("grid.row.delete"))}static get(e){return e.data("agn:row")}static isEmpty(t){return!e.EDITOR.children.active().children.some(e=>e.getRow()>=t&&e.getRow()+e.getRows()-1<=t)}animateAppearance(){const e=this.$row,t=e.clone(!0);e.hide().after(t),t.show().addClass("container-row-animated"),t.one("animationend",function(){e.show(),t.remove()})}createDroppable(){var e=new AGN.Lib.LB.Droppable(this),t=this;return e.setOnHoverChange(function(e,i){if(t.callbacks.onHoverChange){var n=t.droppables.indexOf(this)+1;n>0&&t.callbacks.onHoverChange.call(t,this,e,n,i)}}),e.setOnDrop(function(e){if(t.callbacks.onDrop){var i=t.droppables.indexOf(this)+1;i>0&&t.callbacks.onDrop.call(t,e,this,i)}}),e}get$(){return this.$row}each(e){this.droppables.forEach(e)}getDroppables(){return this.droppables.slice()}getDroppable(e){return this.droppables[e-1]||null}setHeight(t){t=t>0?Math.max(t,e.COLLAPSED_BLOCK_SIZE):e.EMPTY_ROW_HEIGHT,this.droppables.forEach(e=>e.setHeight(t))}isGuttered(){return this.$row.hasClass("guttered")}setGuttered(e){this.$row.toggleClass("guttered",!!e)}setHovered(e,t,i){void 0===t?this.droppables.forEach(t=>t.setHovered(e)):(void 0===i&&(i=t),this.droppables.forEach((n,o)=>{var r=o+1;t<=r&&r<=i?n.setHovered(e):n.setHovered(!e)}))}remove(){this.droppables.forEach(e=>e.remove()),this.droppables=[],i.removeTooltip(this.$removeButton),this.$removeButton.remove(),this.$row.remove(),this.callbacks.onDrop=void 0}setRemoveButtonShown(e){this.$removeButton.toggleClass("opacity-0",!e)}setOnHoverChange(e){this.callbacks.onHoverChange=e}setOnDrop(e){this.callbacks.onDrop=e}getRemoveBtn$(){return this.$removeButton}getCoordinates(){const e=this.$row.offset().left,t=this.$row.offset().top;return{startX:e,endX:e+this.$row.outerWidth(),startY:t,endY:t+this.$row.outerHeight()}}}})(),(()=>{const e=AGN.Lib.LB.Definitions;function t(e,t){this.$template=$("#lb-grid-template"),this.$sidebar=$("#lb-sidebar"),this.columns=e.columns,this.rows=[],this.gap=e.gap,this.columnWidth=e.columnWidth,this.callbacks={},this.hoveredDroppable=null;for(var i=1;i<=t;i++){var n=this.createRow(e.gutters[i-1]);this.$template.append(n.get$()),this.rows.push(n)}this.adjustSidebar(),this.$template.addClass("is-initialized")}t.area=function(e,t,i,n){return{row:e,column:t,rows:i,columns:n}},t.prototype.createRow=function(e){var i=new AGN.Lib.LB.Row(this.columns,e),n=this;return i.setOnHoverChange(function(e,o,r,s){var a=n.getRowIndex(i)+1;a>0?s?(n.setAreaHovered(t.area(a,r,o.getRows(),o.getColumns())),n.hoveredDroppable=e):n.hoveredDroppable===e&&n.setAreaHovered(!1):n.setAreaHovered(!1)}),i.setOnDrop(function(e,o,r){if(n.callbacks.onDrop){var s=n.getRowIndex(i)+1;if(s>0){var a=e.getRows(),l=n.getRows()-s+1;a>l&&(a=l);var c=e.getColumns(),d=n.getColumns()-r+1;c>d&&(c=d),n.callbacks.onDrop.call(n,e,o,t.area(s,r,a,c))}}}),i},t.prototype.each=function(e){this.rows.forEach(e)},t.prototype.getRows=function(){return this.rows.length},t.prototype.getColumns=function(){return this.columns},t.prototype.getRow=function(e){return this.rows[e-1]||null},t.prototype.getDroppable=function(e,t){var i=this.getRow(e);return i?i.getDroppable(t):null},t.prototype.getRowMargin=function(t){return e.UNCOLLAPSIBLE_GUTTER_SIZE+(t?this.gap:0)},t.prototype.getCoordinates=function(e,t){return this.getDroppable(e,t).getCoordinates()},t.prototype.getConstraints=function(e,t){return $.extend(this.getWidthConstraints(e,t),this.getHeightConstraints(e,t))},t.prototype.getWidthConstraints=function(e,t){const i=e.getColumn(),n=e.getColumns(),o=this.getWidthForSpans(1);let r;return r=t.isHorizontal()?t.isEast()?this.getWidthForSpans(this.getColumns()-i+1):this.getWidthForSpans(i+n-1):o,{minWidth:o,maxWidth:r}},t.prototype.getHeightConstraints=function(e,t){var i,n,o=e.getColumns(),r=e.getColumn(),s=r+o-1,a=e.getRows(),l=e.getRow(),c=l+a-1;return t.isVertical()?(t.isSouth()?(i=this.getMinHeightConstraint(l,r,1,o),c=this.getRows(),t.isHorizontal()&&(t.isEast()?s=this.getColumns():r=1)):(i=this.getMinHeightConstraint(c,r,1,o),l=1),n=this.getMaxHeightConstraint(l,r,c-l+1,s-r+1)):i=n=e.getHeight(),{minHeight:Math.min(i,e.getHeight()),maxHeight:n}},t.prototype.getWidthForSpans=function(t){return e.IS_BASIC_LB?this.$template.width():this.columnWidth*t+this.gap*(t-1)},t.prototype.getHeightForSpans=function(e,t,i,n,o){var r=this;function s(e){return r.rows[e-1].getDroppables().slice(t-1,t+n-1).reduce(o)}void 0===o&&(o=function(e,t){return e.getHeight()>t.getHeight()?e:t});var a=e,l=e+i-1;if(a===l)return s(a).getHeight();var c=s(a).get$(),d=s(l).get$();return d.position().top-c.position().top+d.outerHeight()},t.prototype.getMinHeightConstraint=function(e,t,i,n){return this.getHeightForSpans(e,t,i,n,function(e,t){return e.getHeight()<t.getHeight()?e:t})},t.prototype.getMaxHeightConstraint=function(e,t,i,n){return this.getHeightForSpans(e,t,i,n,function(e,t){return e.getHeight()>t.getHeight()?e:t})},t.prototype.getArea=function(i,n,o,r){const s=this;let a,l;function c(e){const t=s.rows[e-1];return t?t.getDroppables().slice(a-1,a+l-1).reduce((e,t)=>e.getHeight()>t.getHeight()?e:t):null}function d(e){return e.get$().position().top}var u,h,p,g;if(n.isHorizontal()?(l=e.IS_BASIC_LB?1:Math.ceil(o/(this.columnWidth+this.gap)),a=n.isEast()?i.getColumn():i.getColumn()+i.getColumns()-l):(a=i.getColumn(),l=i.getColumns()),n.isVertical())if(h=1,n.isSouth())for(p=c(u=i.getRow());(g=c(u+h))&&r>d(g)-d(p);)h++;else for(g=c(u=i.getRow()+i.getRows()-1);(p=c(u-1))&&r>d(g)-d(p)+g.getHeight()-p.getHeight();)u--,h++;else u=i.getRow(),h=i.getRows();return t.area(u,a,h,l)},t.prototype.setAreaHovered=function(e){e?this.each(function(t,i){i>=e.row-1&&i<=e.row-1+e.rows-1?t.setHovered(!0,e.column,e.column+e.columns-1):t.setHovered(!1)}):this.each(function(e){e.setHovered(!1)}),this.callbacks.onAreaHovered&&this.callbacks.onAreaHovered.call(this,e)},t.prototype.startResizing=function(e){this.callbacks.onResizingStarted&&this.callbacks.onResizingStarted.call(this,e)},t.prototype.stopResizing=function(e){this.callbacks.onResizingStopped&&this.callbacks.onResizingStopped.call(this,e)},t.prototype.adjustRows=function(e){AGN.Lib.LB.Adjustments.make(this,e.get())},t.prototype.getDroppables=function(){var t=[],i=this.gap;return this.each(function(n,o){var r=(n.isGuttered()?i:0)+e.UNCOLLAPSIBLE_GUTTER_SIZE;n.each(function(e,i){t.push({droppable:e,row:o+1,column:i+1,marginBottom:r})})}),t},t.prototype.addRowBefore=function(e){var t=this.getRowIndex(e);if(t>=0){var i=!0;t>0&&(i=this.rows[t-1].isGuttered());var n=this.createRow(i);this.rows[t].get$().before(n.get$()),this.rows.splice(t,0,n)}return t+1},t.prototype.addRow=function(){this.rows.length>0&&this.rows[this.rows.length-1].setGuttered(!0);var e=this.createRow(!0);return this.$template.append(e.get$()),this.rows.push(e),this.rows.length},t.prototype.removeRow=function(e){var t=this.getRowIndex(e);return t>=0&&(this.rows[t].remove(),this.rows.splice(t,1)),t+1},t.prototype.getRowIndex=function(e){return this.rows.indexOf(e)},t.prototype.adjustSidebar=function(){let e=null;this.each(t=>{const i=t.get$(),n=t.getRemoveBtn$();var o;(o=n).removeClass("btn--small"),o.removeClass("btn--detached"),o.removeClass("btn--attached"),o.css("height","");const r=i.outerHeight(),s=r-n.outerHeight();if(s>=0)s>=20&&n.css("height",r-20),n.addClass("btn--attached");else{n.addClass("btn--small");const t=e?.getRemoveBtn$();t&&t.hasClass("btn--detached")?n.addClass("btn--attached"):n.addClass("btn--detached")}((e,t)=>{const i=t.offset().top+t.outerHeight()/2,n=e.outerHeight()/2;e.offset({top:i-n})})(n,i),t.setRemoveButtonShown(!0),e=t}),this._updateSidebarWidth()},t.prototype._updateSidebarWidth=function(){const e=this.$sidebar.children().get().reduce((e,t)=>{const{left:i}=$(t).position(),n=i+$(t).outerWidth(!0);return Math.max(e,n)},0);this.$sidebar.css("width",e)},t.prototype.setOnDrop=function(e){this.callbacks.onDrop=e},t.prototype.setOnAreaHovered=function(e){this.callbacks.onAreaHovered=e},t.prototype.setOnResizingStarted=function(e){this.callbacks.onResizingStarted=e},t.prototype.setOnResizingStopped=function(e){this.callbacks.onResizingStopped=e},AGN.Lib.LB.Grid=t})(),(()=>{const e=AGN.Lib.LB.Definitions;AGN.Lib.LB.RssImporter=function t(){t.prototype.import=function(){const e=this;this.getRssChildrenToReplaceWithNewContent().forEach(function(t){e._importContent(t)})},t.prototype.getRssChildrenToReplaceWithNewContent=function(){return _.union(this._getRssImportedStartChildren(),this.getRssTemplateChildren())},t.prototype._importContent=function(e){e.containsMultiPh()?this._fillChildWithRssContent(e):this._replicateRssChild(e)},t.prototype._fillChildWithRssContent=function(t){$.get(AGN.url("/layoutbuilder/container/"+t.getContainerId()+"/rss.action")).done(i=>e.EDITOR.savePlaceholder(t,t.getMultiPh().id,i))},t.prototype._replicateRssChild=function(e){const t=this;$.get(AGN.url("/layoutbuilder/container/"+e.getContainerId()+"/replicateRss.action")).done(function(i){t.insertRssChildren(t.getRssChildrenFromSamples(i),e)})},t.prototype.insertRssChildren=function(t,i){if(t.length){var n=i.getColumn(),o=i.getRow();e.EDITOR.replaceChildren(i,t[0]),t.slice(1).forEach(function(t){t.setColumn(n),t.setRow(o);const i=e.EDITOR.cloneChild(t);n=i.getColumn(),o=i.getRow()})}},t.prototype.getRssChildrenFromSamples=function(e){return e.map(function(e){return new AGN.Lib.LB.ChildSample(e).instantiate()})},t.prototype.getImportedRssChildren=function(){return _.groupBy(e.EDITOR.children.active().children.filter(function(e){return e.isRssImportedChild()}),function(e){return e.data.type||e.data.container.type})},t.prototype.getRssTemplateChildren=function(){return e.EDITOR.children.active().children.filter(function(e){return e.isRssTemplateChild()})},t.prototype._removeRssChildrenAndGetPlaceholder=function(t){return t.slice(1).forEach(function(t){const i=t.getRow();e.EDITOR.removeChild(t),AGN.Lib.LB.Row.isEmpty(i)&&e.EDITOR.removeRow(e.EDITOR.grid.getRow(i))}),t[0]},t.prototype._getRssImportedStartChildren=function(){const e=this;return _.map(this.getImportedRssChildren(),function(t){return e._removeRssChildrenAndGetPlaceholder(t)})}}})(),(()=>{const e=AGN.Lib.LB.Definitions,t=AGN.Lib.LB.Children,i=AGN.Lib.LB.Categories,n=AGN.Lib.LB.Targets,o=AGN.Lib.LB.ChildEditor,r=AGN.Lib.LB.Child,s=AGN.Lib.LB.ChildSample,a=AGN.Lib.LB.Row,l=AGN.Lib.LB.Ui;function c(){this.templateId=0,this.targetId=e.ALL_ENTRIES,this.targets=new n,this.categories=new i,this.children=new t([]),this.imageUriPattern="{image-id}",this.watcher=new AGN.Lib.LB.PromiseProgressWatcher,this.removedChildren=[],this.adjust=_.throttle(this.adjust,200),this.watcher.promise().progress(()=>this.adjust(!1))}c.prototype.setup=function(o){o=$.extend({templateId:0,targetId:e.ALL_ENTRIES,grid:{},children:[],imageUriPattern:"{image-id}",noPreviewImageLink:"#",mobileImagePrefix:"mobile_",isTextVersionGenerationAllowed:!1,serverSideUndoAvailable:!1,isEmptyTextVersion:!1,targets:[],interestGroups:[],categories:[],translations:{},actions:{}},o),$.i18n.load(o.translations),this.changesNotSaved=!1,this.templateId=o.templateId,this.targetId=o.targetId,this.imageUriPattern=o.imageUriPattern,this.noPreviewImageLink=o.noPreviewImageLink,this.textVersionGenerationAllowed=o.isTextVersionGenerationAllowed,this.emptyTextVersion=o.isEmptyTextVersion,this.noImageLink=o.noImageLink,this.targets=new n(o.targets),this.interestGroups=o.interestGroups,this.categories=new i(o.categories),this.children=new t(o.children),this.actions=o.actions,this.mailingId=o.mailingId,this.mobileImagePrefix=o.mobileImagePrefix,this.isServerSideUndoAvailable=o.serverSideUndoAvailable;const r=this.children.active();this.grid=new AGN.Lib.LB.Grid(o.grid,Math.max(1,r.calculateRowsCount())),r.rebuildStatic({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink}),r.adjustLayering(),this.updateAvailableTargets(),this.mailingId>0?this.editable=AGN.Opt.Components.MailingContentLock.manageLock(this.mailingId,o.isMailingExclusiveLockingAcquired,o.anotherLockingUserName):this.editable=!0,l.setTargetId(this.targetId),this.setTargetId(this.targetId),l.setUndoOptionEnabled(this.isServerSideUndoAvailable),this.editable?(this.setupInteractions(),this.updateRecycleBin(),this.restoreUpdateTextVersionCheckbox(o.mailingId),this._setupUndoManager(),l.setLoading(!1)):(r.each(function(t){t.setDraggable(!1),t.setControlsEnabled(!1),e.IS_BASIC_LB||t.setResizable(!1)}),l.setLoading(!1),l.setEditable(!1))},c.prototype._setupUndoManager=function(){this.undoManager=new AGN.Lib.LB.UndoManager(this,{onChange:()=>{l.setUndoOptionEnabled(this.undoManager.canUndo()||this.isServerSideUndoAvailable),l.setRedoOptionEnabled(this.undoManager.canRedo())}}),this.undoManager.registerHandler("placeholderUpdated",(e,t,i)=>{const n=e.getPlaceholder(t).value;return this._savePlaceholder(e,t,i),o.get().isInitForChild(e)&&this.editChild(e),[e,t,n]}),this.undoManager.registerHandler("childTargetChanged",(e,t)=>{const i=e.getTargetId();return this._setChildTarget(e,t),o.get().isInitForChild(e)&&this.editChild(e),[e,i]}),this.undoManager.registerHandler("tocItemsUsageUpdated",(e,t)=>{const i=this._collectTocItemsUsages();return this._updateTocItemsUsage(e,t),o.get().isInitForChild(e)&&this.editChild(e),[e,i]}),this.undoManager.registerHandler("setTocItemChanged",(e,t)=>{const i=e.isTocItem();return this._setTocItem(e,t),o.get().isInitForChild(e)&&this.editChild(e),[e,i]}),this.undoManager.registerHandler("mediapoolImageCategoryChanged",(e,t,i,n)=>(o.get().updateImageCategory(t,i),o.get().isInitForChild(e)&&this.editChild(e),[e,t,n,i]))},c.prototype.getUndoManager=function(){return this.undoManager},c.prototype.restoreUpdateTextVersionCheckbox=function(){$("#update-text-version").attr("checked",this.getMadeChoice())},c.prototype.setupInteractions=function(){var t=this;function i(i,n){t.children.active().matching(t.targetId).each(function(t){t!==i&&(t.setControlsEnabled(n),t.isContainerDeleted()||e.IS_BASIC_LB||t.setResizable(n),t.data.container.modeEdit!==e.CONTAINER_TYPE.ANCHORED&&t.data.container.modeEdit!==e.CONTAINER_TYPE.FIXED_AND_ANCHORED||e.IS_BASIC_LB||t.setResizable(!1))})}this.children.recycled().each(function(e){e.setRows(1),e.setColumns(1)}),this.grid.setOnResizingStarted(function(e){i(e,!1)}),this.grid.setOnResizingStopped(function(e){i(e,!0),t.children.active().stick(e.getArea())});var n=null;this.grid.setOnAreaHovered(function(e){var i=t.children.active().matching(t.targetId);e?(i=i.select(function(t){return t.isInArea(e)}),n&&n.each(function(e){i.contains(e)||e.setHighlighted(!1)}),i.setHighlighted(!0),n=i):(i.setHighlighted(!1),n=null)}),this.grid.setOnDrop(function(i,n,o){var r=t.children.active(),a=!1;if(r.contains(i)||(a=!0,i instanceof s?(i=i.instantiate(),t.children.add(i)):i.isRecycled()?(i.setRecycled(!1),t.updateRecycleBin()):(i=i.clone(),t.children.add(i)),t.targetId!==e.ALL_ENTRIES&&i.setTargetId(t.targetId),r=t.children.active(),i.isToc()||i.rebuild({imageUriPattern:t.imageUriPattern,noImageLink:t.noImageLink})),i.setArea(o),r.active().stick(o),r.matching(t.targetId).rebuildToc({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink}),i.adjustSize(t.grid),i.adjustCoordinates(t.grid),a){var l=i.data.container.modeEdit;i.setShown(!0),l!==e.CONTAINER_TYPE.ANCHORED&&l!==e.CONTAINER_TYPE.FIXED_AND_ANCHORED||(i.setDraggable(!1),e.IS_BASIC_LB||i.setResizable(!1)),t.adjust(),t.watcher.bind(r.matching(t.targetId).pulse())}else t.adjust();t.updateAvailableTargets(),t.setChanged(!0)}),$("#lb-childrens").on("click","[data-building-block]",function(t){var i=$(t.target);if(!(i.is("button")||i.is(".ui-resizable-handle")||i.closest("button").exists())){var n=$(this),o=r.get(n),s=o.data.container.modeEdit;o&&(s!==e.CONTAINER_TYPE.EDITABLE&&s!==e.CONTAINER_TYPE.ANCHORED||e.EDITOR.editChild(o))}})},c.prototype.updateAvailableTargets=function(){var t=this.children.active(),i=this.targets,n=t.collectTargetIds(),o=[];t.groups().forEach(function(e){var t={};e.sort(function(e,t){return e.getZ()-t.getZ()}).forEach(function(e,i){t[e.getTargetId()]=i}),o.push(t)}),n.sort(function(e,t){var i=0;return o.forEach(function(n){if(e in n&&t in n){var o=n[e]-n[t];o<0?i++:o>0&&i--}}),i}),l.setAvailableTargetIds(n.map(function(e){return{id:e,name:i.name(e)}})),n.indexOf(String(this.targetId))<0&&(this.targetId=e.ALL_ENTRIES),l.setTargetId(this.targetId)},c.prototype.getTemplateId=function(){return this.templateId},c.prototype.isTextVersionGenerationAllowed=function(){return this.textVersionGenerationAllowed},c.prototype.saveMadeChoice=function(e){AGN.Lib.WebStorage.set("updateTextVersion_"+this.mailingId,e)},c.prototype.getMadeChoice=function(){return AGN.Lib.WebStorage.get("updateTextVersion_"+this.mailingId)},c.prototype.isEmptyTextVersion=function(){return this.emptyTextVersion},c.prototype.isChanged=function(){return this.changesNotSaved},c.prototype.isEditable=function(){return this.editable},c.prototype.setChanged=function(e){e&&this.controlRssBtn(),this.changesNotSaved=!!e},c.prototype.getGrid=function(){return this.grid},c.prototype.getTargetName=function(e){return this.targets.name(e)},c.prototype.setTargetId=function(e){var t=this.children.active();this.targetId=e,t.unmatching(this.targetId).setShown(!1),(t=t.matching(this.targetId)).rebuildToc({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink}),t.setShown(!0),this.adjust(),this.watcher.bind(t.pulse())},c.prototype.setLayeringByTargets=function(e){let i=!1;this.children.active().groups().forEach(n=>{n.length>1&&(t.make(n).setLayeringByTargets(e),i=!0)}),i&&this.updateToc(!0),this.setChanged(!0),this.adjust(!1)},c.prototype.setChildrenControlsEnabled=function(e){this.children.active().matching(this.targetId).setControlsEnabled(e)},c.prototype.updateToc=function(e){var t=this.children.active().matching(this.targetId);t.rebuildToc({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink})&&e&&(this.adjustSizes(t),this.adjustCoordinates(t))},c.prototype.adjustSizes=function(e){void 0===e&&(e=this.children.active().matching(this.targetId)),e.adjustSizes(this.grid),this.grid.adjustRows(e)},c.prototype.adjustCoordinates=function(e){void 0===e&&(e=this.children.active().matching(this.targetId)),this.grid.adjustSidebar(),e.adjustCoordinates(this.grid)},c.prototype.adjustLayering=function(i){var n=this;void 0===i&&(i=this.children.active().matching(this.targetId));var o=i.groupsMap();this.grid.each(function(i,r){i.each(function(i,s){var a=r+1+":"+(s+1),l=t.make(o[a]);l.size()>1?(l.setBorderHighlighted(!0),l.each((e,t)=>{e.setShown(0===t),e.setLayeringIndex(t+1),e.setOnLayeringRotate(()=>{n.setChanged(!0),l.rotateLayering(),n.updateToc(!0),n.adjust(!1)})})):(l.setBorderHighlighted(!1),l.each(t=>{t.setShown(!0),t.setLayeringIndex(e.DEFAULT_LAYERING_INDEX),t.setOnLayeringRotate(null)}),n.adjust(!1))})})},c.prototype.adjust=function(e){const t=this.children.active().matching(this.targetId);!1!==e&&this.adjustLayering(t),this.adjustSizes(t),this.adjustCoordinates(t)},c.prototype.addRowBefore=function(e,t){var i=this.grid.addRowBefore(e),n=this.children.active(),o=!1;n.each(function(e){var t=e.getRows(),n=e.getRow(),r=n+t-1;i<=n?e.setRow(n+1):i>n&&i<=r&&(o=!0,e.setRows(t+1))}),!1!==t&&(o?this.adjust():this.adjustCoordinates(n.matching(this.targetId))),this.setChanged(!0)},c.prototype.addRowAfter=function(e){if(this.isEditable())if(this.grid.getRowIndex(e)==this.grid.getRows()-1)this.addRow();else{const t=this.grid.getRowIndex(e);this.addRowBefore(this.grid.rows[t+1])}},c.prototype.addRow=function(e){this.grid.addRow(),!1!==e&&this.grid.adjustSidebar(),this.setChanged(!0)},c.prototype.removeRow=function(e){var t=this.grid.removeRow(e),i=this.children.active(),n=!1,o=!1;i.each(function(e){var i=e.getRows(),r=e.getRow();t>=r&&t<=r+i-1?i>1?(e.setRows(i-1),o=!0):(e.setRecycled(!0),n=!0):t<r&&e.setRow(r-1)}),n?((i=this.children.active().matching(this.targetId)).rebuildToc({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink}),this.adjust(),this.watcher.bind(i.pulse()),this.updateAvailableTargets(),this.updateRecycleBin()):o?this.adjust():this.adjustCoordinates(),this.setChanged(!0)},c.prototype.removeChild=function(e,t=!1){this.children.contains(e)&&(e.setRecycled(!0),this.updateToc(!1),this.adjust(),this.updateAvailableTargets(),this.updateRecycleBin(),this.setChanged(!0),t&&this.findEmptyRowsOccupiedByChild(e).forEach(e=>this.removeRow(e)))},c.prototype.findEmptyRowsOccupiedByChild=function(e){const t=e.getRow();let i=[];for(let n=t;n<t+e.getRows();n++)a.isEmpty(n)&&i.push(this.grid.getRow(n));return i},c.prototype.cloneChild=function(e){var t=this,i=this.grid.getColumns(),n=this.children.active();function o(e,t){function n(e,t){var n=null,o=null;e.forEach(function(e){var t=e.getColumn(),i=t+e.getColumns()-1;n=Math.min(n||t,t),o=Math.max(o||i,i)});var r=0;return o+t>i&&(t+=r=i+1-n-t),e.forEach(function(e){var n=e.getColumn()+t;n>i?(e.setRow(e.getRow()+1),e.setColumn(n-i)):e.setColumn(n)}),r}for(var o=0;o<e.length&&t>0;o++){var r=e[o];r.length>0?t+=n(r,t):t--}}function r(e){var i=t.grid.getRow(e);i?t.addRowBefore(i,!1):t.addRow(!1)}var s=e.clone();return function(e,t,n){var s=t.getRow(),a=t.getColumns(),l=t.getColumn()+a,c=function(e,t,n){var o=[],r={};e.each(function(e){var i=e.getColumn();if(t===e.getRow()&&i>=n){o.push(e);var s=e.getColumns();r[i]=Math.min(r[i]||i,i);for(var a=1;a<s;a++)r[i+a]=i}});for(var s=_.groupBy(o,function(e){for(var t=e.getColumn();r[t]&&r[t]!==t;)t=r[t];return t}),a=[],l=n;l<=i;l++)if(r[l]){var c=s[l];c&&a.push(c)}else a.push([]);return a}(e,s,l),d=i-l+1;d>=a?(function(e){var t=0;return e.forEach(function(e){0===e.length&&t++}),t}(c)>=a||r(s+1),o(c,a),n.setRow(s),n.setColumn(l)):(r(s+1),o(c,d+a),n.setRow(s+1),n.setColumn(1))}(n,e,s),s.rebuild({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink}),s.setShown(!0),this.children.add(s),this.updateToc(!1),this.watcher.bind(this.children.active().matching(this.targetId).pulse()),this.adjust(),this.setChanged(!0),s},c.prototype.replaceChildren=function(e,t){this.removeChild(e),t.setRow(e.getRow()),t.setColumn(e.getColumn()),t.rebuild({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink}),t.setShown(!0),this.children.add(t),this.updateToc(!1),this.watcher.bind(this.children.active().matching(this.targetId).pulse()),this.adjust(),this.setChanged(!0)},c.prototype.editChild=function(e){if(!this.isEditable())return;const t={child:{name:e.getName(),containerName:e.getContainerName(),isToc:e.isToc(),isSortable:e.isSortable(),interestGroup:e.getInterestGroup(),targetId:e.getTargetId(),asTocItem:e.asTocItem(),placeholders:e.getPlaceholders()},targets:this.targets.list(),interestGroups:this.interestGroups.slice(),categories:this.categories.list(),imageUriPattern:this.imageUriPattern,noPreviewImageLink:this.noPreviewImageLink,noImageLink:this.noImageLink,mailingId:this.mailingId,mobileImagePrefix:this.mobileImagePrefix,resolveAgnTags:t=>t?$.trim(AGN.Lib.LB.AgnTagsResolver.resolve(t,e.getId())):t};if(e.isToc()&&(t.child.toc=this.children.active().asTocItems(!1)),e.canFillFromRefTable()){t.child.refTableName=e.getRefTableName(),t.child.refTableKeyCol=e.getRefTableKeyCol();const i=e.getRefTableCols();t.child.placeholdersGroups=[...new Set(e.getPlaceholders().map(e=>e.name).filter(e=>e.includes(":")).map(e=>e.split(":")).filter(e=>2===e.length&&i.includes(e[1])).map(e=>e[0]))]}if(e.containsMultiPh()){const i=e.getMultiPh();if(e.containsMultiPh()&&e.data.content[i.id]){const n=[];r.collectPlaceholders(i.markup,e.data.content,n,{},null);const o=n.map(e=>e.id);t.child.placeholders=t.child.placeholders.filter(e=>!o.includes(e.id))}}o.init(e,t)},c.prototype.setChildTarget=function(e,t){this.undoManager.operation("childTargetChanged",e,e.getTargetId()),this._setChildTarget(e,t)},c.prototype._setChildTarget=function(e,t){e.setTargetId(t);const i=e.isMatching(this.targetId);e.setShown(i),i||(this.watcher.bind(this.children.active().matching(this.targetId).pulse()),e.isToc()||e.isTocItem()||this.updateToc(!1)),e.isTocItem()&&this.updateToc(!1),this.adjust(),this.setChanged(!0),this.updateAvailableTargets()},c.prototype.updateTocItemsUsage=function(e,t){e.isToc()&&(this.undoManager.operation("tocItemsUsageUpdated",e,this._collectTocItemsUsages()),this._updateTocItemsUsage(e,t))},c.prototype._updateTocItemsUsage=function(e,t){this.children.active().each(e=>{const i=t[e.getId()];!0!==i&&!1!==i||e.setTocItem(i)}),this.updateToc(!1),this.adjust(),this.setChanged(!0)},c.prototype._collectTocItemsUsages=function(){const e={};return this.children.active().asTocItems(!1).forEach(t=>e[t.id]=t.isEnabled),e},c.prototype.setTocItem=function(e,t){this.undoManager.operation("setTocItemChanged",e,e.isTocItem()),this._setTocItem(e,t)},c.prototype._setTocItem=function(e,t){e.setTocItem(t),this.updateToc(!1),this.adjust(),this.setChanged(!0)},c.prototype.savePlaceholder=function(e,t,i){this.undoManager.operation("placeholderUpdated",e,t,e.getPlaceholder(t).value),this._savePlaceholder(e,t,i)},c.prototype._savePlaceholder=function(e,t,i){e.setContent({[t]:i}),e.isToc()?this.updateToc(!1):e.rebuild({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink}),e.isMatching(this.targetId)||this.watcher.bind(this.children.active().matching(this.targetId).pulse()),this.adjust(!1),this.setChanged(!0)},c.prototype.controlRssBtn=function(){$('[data-action="import-from-content-source"]').parent().toggle(this.children.containsRssChildren())},c.prototype.updateRecycleBin=function(){const e=$("#recyclebin-content"),t=$("#grid-recyclebin-tab").find("[data-no-found-blocks-msg]"),i=$("#recycle-bin-clear-btn");this.children.sort(function(e,t){return e.isRecycled()===t.isRecycled()?0:e.isRecycled()?1:-1});var n=this.children.recycled().get();l.setShown(t,0===n.length),l.setShown(i,n.length>0);var o=AGN.Lib.Template.dom("recyclebin-blocks",{children:n.map(function(e){return{name:e.getName()||e.getContainerName(),id:e.getId(),containerId:e.getContainerId()}})});e.html(o),o.find("[data-building-block]").each(function(e){var t=$(this);t.draggable(s.draggableOptions()),r.set(t,n[e])})},c.prototype.getGuttersAsString=function(){var e=[];return this.grid.each(function(t){e.push(t.isGuttered()?"1":"0")}),e.join("|")},c.prototype.getChildrenAsSubmittable=function(){var e=this.children.active().groups(),t=[],i=l.getAvailableTargetIds();return e.forEach(function(e){e=_.sortBy(e,function(e){return i.indexOf(e.getTargetId())});var n=0;e.forEach(function(e){e.setZ(n++),t.push(e.asSubmittable())})}),t},c.prototype.validateOverlaps=function(){for(var e=this.children.active().select(function(e){return e.getRows()>1}).get(),t=0;t<e.length;t++)for(var i=e[t],n=i.getRow(),o=n+i.getRows()-1,r=t+1;r<e.length;r++){var s=e[r],a=s.getRow(),l=a+s.getRows()-1;if(a>n&&a<=o&&l>o||a<n&&l>=n&&l<o){var c=i.getColumn(),d=c+i.getColumns()-1,u=s.getColumn(),h=u+s.getColumns()-1;if(u>d||h<c)return!1}}return!0},c.prototype.save=function(e){const t=o.get();if(t&&!t.applyScheduledChanges())return;if(!this.validateOverlaps())return void AGN.Lib.Messages.alert("error.template.invalidVerticalSpanning");this.setChanged(!1);const i=AGN.Lib.Form.get($("#grid-template-tile"));i.setValue("forceGenerateTextVersion",!0===e),i.setValue("rowGutters",this.getGuttersAsString()),i.setValue("childrenJson",JSON.stringify(this.getChildrenAsSubmittable())),i.setValue("removedChildren",this.removedChildren),i.jqxhr().done(e=>{const t=new Map(this.children.active().get().map(e=>[`${e.getRow()}:${e.getColumn()}:${e.getZ()}`,e]));e.data.forEach(e=>{t.get(`${e.row}:${e.column}:${e.z}`).setId(e.id)}),this.removedChildren=[],this.undoManager.clear(),this.isServerSideUndoAvailable=this.mailingId>0,l.setUndoOptionEnabled(this.isServerSideUndoAvailable),l.setRedoOptionEnabled(!1)}).always(e=>AGN.Lib.JsonMessages(e.popups,!0))},c.prototype.checkIfDataRestoreNeeded=function(e){const t=this.getChildrenData(),i=e.children;return t.length!==i.length||JSON.stringify(t)!==JSON.stringify(i)},c.prototype.getDataForAutoSave=function(){return{children:this.getChildrenData()}},c.prototype.getChildrenData=function(){return this.children.children.map(function(e){return e.data})},c.prototype.clearEmptyAddedOnTheFlyRows=function(){this.grid.each(e=>{e.isEmptyRowAddedOnTheFly&&this.removeRow(e)})},c.prototype.processAddedOnTheFlyRows=function(e){if(this.grid.getRows()>0){const{pageX:t,pageY:i}=e,n=this.grid.rows.find(e=>this.isRowHovered(e,t,i));if(!n||n.isEmptyRowAddedOnTheFly)return;const o=10,r=n.getCoordinates(),s=Math.abs(i-r.startY),a=Math.abs(i-r.endY),l=s<=a,c=this.grid.getRowIndex(n),d=this._findRowByIndex(c-1),u=this._findRowByIndex(c+1);if(d?.isEmptyRowAddedOnTheFly&&l||u?.isEmptyRowAddedOnTheFly&&!l)return;(l&&i<r.startY||!l&&i>r.endY||Math.min(s,a)<=o)&&this.appendRowOnTheFlyFor(n,l)}else this.appendRowOnTheFly()},c.prototype._findRowByIndex=function(e){return e<0||e>=this.grid.rows.length?null:this.grid.rows[e]},c.prototype.isRowHovered=function(e,t,i){const n=e.getCoordinates(),o=(e.isGuttered()?this.grid.gap:1)/2;return t>=n.startX&&t<=n.endX&&i>n.startY-o&&i<n.endY+o},c.prototype.appendRowOnTheFlyFor=function(e,t){this.clearEmptyAddedOnTheFlyRows();const i=this.grid.getRowIndex(e);let n;t?(this.addRowBefore(e),n=this._findRowByIndex(i)):(this.addRowAfter(e),n=this._findRowByIndex(i+1)),n.isEmptyRowAddedOnTheFly=!0,n.animateAppearance()},c.prototype.appendRowOnTheFly=function(){this.addRow(!1);const e=this._findRowByIndex(0);e.isEmptyRowAddedOnTheFly=!0,e.animateAppearance()},c.prototype.getRecycledChildren=function(){return this.children.recycled().get().map(e=>e.getId()).filter(e=>e>0)},c.prototype.clearRecycleBin=function(){const e=this.children.recycled();e.each(e=>{e.getId()>0&&this.removedChildren.push(e.getId())}),this.children.removeChilds(e.get()),this.updateRecycleBin()},c.prototype.undo=function(){return this.undoManager.undo()},c.prototype.redo=function(){return this.undoManager.redo()},AGN.Lib.LB.Editor=c})(),AGN.Lib.Schedule.ScheduleInterval=class{constructor(e,t){if(new.target===AGN.Lib.Schedule.ScheduleInterval)throw new TypeError(`${new.target.name} is an abstract class and cannot be instantiated directly`);this.$container=e,this.settings=t??{}}drawSettings(){this.$container.off(),this.$container.html(this.getSettingsHtml()),AGN.runAll(this.$container)}getPossibleWeekDays(){return[2,3,4,5,6,7,1]}getSettingsHtml(){throw new Error(`${this.constructor.name}: getSettingsHtml() must be implemented`)}getSettings(){throw new Error(`${this.constructor.name}: getSettings() must be implemented`)}validate(){const e=this.$container.find("[data-schedule-time]");let i=!0;return e.each((e,n)=>{const o=$(n);AGN.Lib.Form.cleanFieldFeedback$(o),!o.val()&&o.is(":visible")&&(AGN.Lib.Form.showFieldError$(o,t("fields.required.errors.missing")),i=!1)}),i}},(()=>{AGN.Lib.Template.register("bi-weekly-schedule-interval",'\n    <div>\n      <label class="form-label">{{- t(\'schedule.daysAndTime\') }}</label>\n      <div class="d-flex flex-column gap-1">\n        <select class="form-control" data-schedule-day-of-week>\n           {{ weekDays.forEach(_weekDay => { }}\n              <option value="{{- _weekDay }}" {{ _weekDay == weekDay ? print(\'selected\') : print(\'\') }}>\n                  {{- t(\'schedule.weekdays.\' + _weekDay) }}\n              </option>\n           {{ }); }}\n        </select>\n        \n        <div class="input-icon-container">\n            <input class="form-control js-timepicker" type="text" value="{{- time }}"\n                data-schedule-time data-timepicker-options="mask: \'h:s\'" placeholder="_" />\n            <i class="icon icon-clock" data-tooltip="{{- window.agnTimeZoneId }}"></i>\n        </div>\n      </div>\n    </div>\n  ');class e extends AGN.Lib.Schedule.ScheduleInterval{static defaults(){return{weekDay:"",time:""}}getSettings(){return{weekDay:this.$container.find("[data-schedule-day-of-week]").val(),time:this.$container.find("[data-schedule-time]").val()}}getSettingsHtml(){const t=$.extend(e.defaults(),this.settings);return t.weekDays=this.getPossibleWeekDays(),AGN.Lib.Template.text("bi-weekly-schedule-interval",t)}}AGN.Lib.Schedule.ScheduleBiWeeklyInterval=e})(),(()=>{AGN.Lib.Template.register("monthly-schedule-interval",'\n    <div>\n      <label for="interval-month" class="form-label">{{- t(\'schedule.monthAndTime\') }}</label>\n      <div class="d-flex flex-column gap-1">\n          <select class="form-control" data-schedule-month>\n            {{ for (const _month of _.range(1, 13)) { }}\n                <option value="{{- _month }}" {{ _month == month ? print(\'selected\') : print(\'\') }}>\n                    {{- t(\'schedule.everyXMonth.\' + _month) }}\n                </option>\n            {{ } }}\n          </select>\n      \n          <select class="form-control" data-schedule-day-of-month>\n            <option value="1" {{ monthDay == 1 ? print(\'selected\') : print(\'\') }}>\n                {{- t(\'schedule.firstDayOfMonth\') }}\n            </option>\n            {{ for (const _monthDay of _.range(2, 32)) { }}\n                <option value="{{- _monthDay }}" {{ _monthDay == monthDay ? print(\'selected\') : print(\'\') }}>\n                  {{- _monthDay }}.\n                </option>\n            {{ } }}\n            <option value="-1" {{ monthDay == -1 ? print(\'selected\') : print(\'\') }}>\n              {{- t(\'schedule.lastDayOfMonth\') }}\n            </option>\n          </select>\n      \n          <div class="input-icon-container">\n             <input class="form-control js-timepicker" type="text" value="{{- time }}"\n                 data-schedule-time data-timepicker-options="mask: \'h:s\'" placeholder="_" />\n             <i class="icon icon-clock" data-tooltip="{{- window.agnTimeZoneId }}"></i>\n          </div>\n      </div>\n    </div>\n  ');class e extends AGN.Lib.Schedule.ScheduleInterval{static defaults(){return{month:"",monthDay:"",time:""}}getSettings(){return{month:this.$container.find("[data-schedule-month]").val(),monthDay:this.$container.find("[data-schedule-day-of-month]").val(),time:this.$container.find("[data-schedule-time]").val()}}getSettingsHtml(){const t=$.extend(e.defaults(),this.settings);return AGN.Lib.Template.text("monthly-schedule-interval",t)}}AGN.Lib.Schedule.ScheduleMontlyInterval=e})(),(()=>{AGN.Lib.Template.register("weekdays-schedule-interval",'\n    <div>\n      <label class="form-label">{{- t(\'schedule.monthAndTime\') }}</label>\n      \n      <div class="d-flex flex-column gap-1">\n        <select class="form-control" data-schedule-day-of-month>\n            {{ for (const _monthDay of _.range(1, 6)) { }}\n                <option value="{{- _monthDay }}" {{ _monthDay == monthDay ? print(\'selected\') : print(\'\') }}>\n                    {{- t(\'schedule.weekDayOrdinal.\' + _monthDay) }}\n                </option>\n            {{ } }}\n        </select>\n        \n        <select class="form-control" data-schedule-day-of-week>\n           {{ weekDays.forEach(_weekDay => { }}\n              <option value="{{- _weekDay }}" {{ _weekDay == weekDay ? print(\'selected\') : print(\'\') }}>\n                  {{- t(\'schedule.weekdays.\' + _weekDay) }}\n              </option>\n           {{ }); }}\n        </select>\n        \n        <div class="input-icon-container">\n            <input class="form-control js-timepicker" type="text" value="{{- time }}"\n                data-schedule-time data-timepicker-options="mask: \'h:s\'" placeholder="_" />\n            <i class="icon icon-clock" data-tooltip="{{- window.agnTimeZoneId }}"></i>\n        </div>\n      </div>\n    </div>\n  ');class e extends AGN.Lib.Schedule.ScheduleInterval{static defaults(){return{weekDay:"",monthDay:"",time:""}}getSettings(){return{weekDay:this.$container.find("[data-schedule-day-of-week]").val(),monthDay:this.$container.find("[data-schedule-day-of-month]").val(),time:this.$container.find("[data-schedule-time]").val()}}getSettingsHtml(){const t=$.extend(e.defaults(),this.settings);return t.weekDays=this.getPossibleWeekDays(),AGN.Lib.Template.text("weekdays-schedule-interval",t)}}AGN.Lib.Schedule.ScheduleWeekdaysInterval=e})(),(()=>{AGN.Lib.Template.register("schedule-time-item-add-btn",'\n    <a href="#" class="btn btn-icon btn-primary" data-schedule-add-time-item data-tooltip="{{- t(\'defaults.add\') }}">\n      <i class="icon icon-plus"></i>\n    </a>\n  '),AGN.Lib.Template.register("schedule-time-item-remove-btn",'\n    <a href="#" class="btn btn-icon btn-danger" data-schedule-remove-time-item data-tooltip="{{- t(\'defaults.clear\') }}">\n      <i class="icon icon-trash-alt"></i>\n    </a>\n  '),AGN.Lib.Template.register("schedule-time-item","\n    <div class=\"input-group\" data-schedule-time-item>\n        {{ const isExplicitTimeSelected = time.type === 'EXPLICIT'; }}\n        <select class=\"form-control\" data-schedule-time-interval>\n            <option value=\"\" {{ isExplicitTimeSelected ? print('selected') : print('') }}>\n              {{- t('schedule.defineTime') }}\n            </option>\n            \n            {{ intervals.forEach(interval => { }}\n               <option value=\"{{- interval }}\" {{ !isExplicitTimeSelected && time.value == interval ? print('selected') : print('') }}>\n                {{- t('schedule.intervals.' + interval) }}\n               </option> \n            {{ }); }}\n        </select>\n\n        <div class=\"input-icon-container flex-grow-1 {{ isExplicitTimeSelected ? print('') : print('hidden') }}\">\n          <input class=\"form-control js-timepicker\" type=\"text\" value=\"{{- isExplicitTimeSelected ? time.value : '' }}\"\n                 data-schedule-time data-timepicker-options=\"mask: 'h:s'\"\n                 placeholder=\"_\" {{ isExplicitTimeSelected ? print('') : print('disabled') }}/>\n\n          <i class=\"icon icon-clock\" data-tooltip=\"{{- window.agnTimeZoneId }}\"></i>\n        </div>\n    </div>\n  "),AGN.Lib.Template.register("schedule-day-item",'\n    <div class="row g-1 mb-1" data-schedule-day-item>\n        <div class="col d-flex flex-column gap-1">\n            <select class="form-control" size="1" data-schedule-day-of-week>\n              {{ weekDays.forEach(weekDay => { }}\n                  <option value="{{- weekDay }}" {{ weekDay == entry.weekDay ? print(\'selected\') : print(\'\') }}>\n                    {{- t(\'schedule.weekdays.\' + weekDay) }}\n                  </option>\n              {{ }); }}\n            </select>\n\n            <div class="d-flex flex-column gap-inherit" data-schedule-time-items>\n              {{ _.each(entry.times, time => { }}\n                  {{= AGN.Lib.Template.text(\'schedule-time-item\', { time, intervals }) }}\n              {{ }); }}\n            </div>\n        </div>\n        <div class="col-auto">\n          <a href="#" class="btn btn-icon btn-primary" data-add-day data-tooltip="{{- t(\'defaults.add\') }}">\n              <i class="icon icon-plus"></i>\n          </a>\n          <a href="#" class="btn btn-icon btn-danger hidden" data-remove-day data-tooltip="{{- t(\'defaults.clear\') }}">\n              <i class="icon icon-trash-alt"></i>\n          </a>\n        </div>\n    </div>\n  ');class e{static DATA_ATTR_NAME="agn:scheduleBuilder:weeklyDayItem";static ALLOWED_INTERVALS=[1,2,3,4,6,12];static defaults(){return{weekDay:"0",times:[{type:"EXPLICIT",value:""}]}}static get(t){let i;return i=t.is("[data-schedule-day-item]")?t:t.closest("[data-schedule-day-item]"),i.data(e.DATA_ATTR_NAME)}static create(t,i={}){const n=AGN.Lib.Template.dom("schedule-day-item",{entry:$.extend(e.defaults(),i),intervals:e.ALLOWED_INTERVALS,...t});return new e(n),n}constructor(t,i){t.exists()||(t=e.create({weekDays:i})),this.$el=t,this.$el.data(e.DATA_ATTR_NAME,this)}getSettings(){return{weekDay:this.$el.find("[data-schedule-day-of-week]").val(),times:this.#Ve().map((e,t)=>{const i=$(t),n=this.#je(i);return{type:n?"INTERVAL":"EXPLICIT",value:n?this.#Ue(i):this.#Ye(i)}}).get()}}toggleTimePickerVisibility(e){const t=this.#qe(e),i=this.#je(t);this.#Ke(t).prop("disabled",i).parent().toggleClass("hidden",i)}toggleTimeItemsButtonsVisibility(){this.#Ve().each((e,t)=>{const i=$(t),n=i.find(".btn-icon"),o=AGN.Lib.Template.dom(i.is(":last-child")?"schedule-time-item-add-btn":"schedule-time-item-remove-btn");n.exists()?n.replaceWith(o):i.append(o),AGN.Lib.CoreInitializer.run("tooltip",o)})}addTimeItem(t={}){const i=AGN.Lib.Template.dom("schedule-time-item",{time:$.extend(e.defaults().times[0],t),intervals:e.ALLOWED_INTERVALS});this.$el.find("[data-schedule-time-items]").append(i),AGN.runAll(i),this.toggleTimeItemsButtonsVisibility()}removeTimeItem(e){this.#qe(e).remove(),this.toggleTimeItemsButtonsVisibility()}getDayOfWeek(){return parseInt(this.$el.find("[data-schedule-day-of-week]").val())}disableDayOptions(e){const t=this.$el.find("[data-schedule-day-of-week]");t.find("option").prop("disabled",!1),AGN.Lib.Select.get(t).disableOptions(e)}disableSelectedIntervalOptions(){const e=this.#Ve(),t=e.filter((e,t)=>this.#je($(t))).map((e,t)=>this.#Ue($(t))).get();e.find("[data-schedule-time-interval]").each((e,i)=>{const n=$(i);n.find("option").prop("disabled",!1);const o=t.filter(e=>e!==n.val());AGN.Lib.Select.get(n).disableOptions(o)})}#je(e){return!!this.#Ue(e)}#Ue(e){return e.find("[data-schedule-time-interval]").val()}#Ye(e){return this.#Ke(e).val()}#Ke(e){return e.find("[data-schedule-time]")}#Ve(){return this.$el.find("[data-schedule-time-item]")}#qe(e){return e.closest("[data-schedule-time-item]")}}class i extends AGN.Lib.Schedule.ScheduleInterval{getSettings(){return{days:this.#Xe()?[]:this.#Ze().map(e=>e.getSettings())}}validate(){return this.#Xe()||super.validate()}drawSettings(){super.drawSettings(),this.settings?.days?.length?this.settings.days.map(t=>e.create({weekDays:this.getPossibleWeekDays()},t)).forEach(e=>this.#Je(e)):this.#Qe(),this.#et()}getPossibleWeekDays(){return[0,...super.getPossibleWeekDays()]}getSettingsHtml(){return`<label class="form-label">${t("schedule.daysAndTime")}</label>`}#et(){AGN.Lib.Action.new({click:"[data-add-day]"},()=>{const t=this.#Ze().map(e=>e.getDayOfWeek()),i=this.getPossibleWeekDays().find(e=>!t.includes(e));this.#Je(e.create({weekDays:this.getPossibleWeekDays()},{weekDay:i}))},this.$container),AGN.Lib.Action.new({click:"[data-remove-day]"},t=>{this.#tt(e.get(t))},this.$container),AGN.Lib.Action.new({click:"[data-schedule-add-time-item]"},t=>{const i=e.get(t);i.addTimeItem(),i.disableSelectedIntervalOptions()},this.$container),AGN.Lib.Action.new({click:"[data-schedule-remove-time-item]"},t=>{const i=e.get(t);i.removeTimeItem(t),i.disableSelectedIntervalOptions()},this.$container),AGN.Lib.Action.new({change:"[data-schedule-time-interval]"},t=>{const i=e.get(t);i.toggleTimePickerVisibility(t),i.disableSelectedIntervalOptions()},this.$container),AGN.Lib.Action.new({change:"[data-schedule-day-of-week]"},()=>{this.#it()},this.$container),AGN.Lib.Action.new({change:"[data-schedule-time-items]"},()=>this.validate(),this.$container)}#Ze(){return this.$container.find("[data-schedule-day-item]").map((t,i)=>e.get($(i))).get()}#tt(e){this.$container.find(e.$el).remove(),this.#nt(),this.#it()}#Qe(){this.#Je(e.create({weekDays:this.getPossibleWeekDays()}))}#Je(t){this.$container.append(t),AGN.runAll(t),this.#nt();const i=e.get(t);i.toggleTimeItemsButtonsVisibility(),i.disableSelectedIntervalOptions(),this.#it()}#it(){const e=this.#Ze();e.forEach(t=>{const i=e.filter(e=>t!==e).map(e=>String(e.getDayOfWeek()));t.disableDayOptions(i)})}#nt(){const e=this.#Ze().length,t=this.$container.find("[data-remove-day]").addClass("hidden"),i=this.$container.find("[data-add-day]").addClass("hidden");e>1&&t.slice(0,-1).removeClass("hidden"),e<this.getPossibleWeekDays().length?i.last().removeClass("hidden"):t.last().removeClass("hidden")}#Xe(){const t=this.#Ze();return 1===t.length&&_.isEqual(t[0].getSettings(),e.defaults())}}AGN.Lib.Schedule.ScheduleWeeklyInterval=i})(),(()=>{AGN.Lib.Template.register("schedule-interval-type",'\n   <div>\n      <label for="interval-type" class="form-label">\n        {{- t(\'schedule.interval\') }}\n      </label>\n      <select id="interval-type" class="form-control" data-change-interval-type>\n          {{ Object.keys(intervals).forEach(intervalType => { }}\n            <option value="{{- intervalType }}" {{ intervalType === type ? print(\'selected\') : print() }}>\n              {{= intervals[intervalType].label }}\n            </option>\n          {{ }) }}\n      </select>\n    </div>\n  ');const e={WEEKLY:{label:t("schedule.interval_type.weekly"),class:AGN.Lib.Schedule.ScheduleWeeklyInterval},BI_WEEKLY:{label:t("schedule.interval_type.bi_weekly"),class:AGN.Lib.Schedule.ScheduleBiWeeklyInterval},MONTHLY:{label:t("schedule.interval_type.monthly"),class:AGN.Lib.Schedule.ScheduleMontlyInterval},WEEKDAYS:{label:t("schedule.interval_type.weekdays"),class:AGN.Lib.Schedule.ScheduleWeekdaysInterval}};class i{static DATA_ATTR_NAME="agn:scheduleBuilder";constructor(e){this.config=e.find("script[data-config]").json(),this.settings=JSON.parse(this.config.settings),this.settingsCache=new Map,this.#ot(e),e.data(i.DATA_ATTR_NAME,this)}static get(e){return e.data(i.DATA_ATTR_NAME)}validate(){return this.interval.validate()}toJson(){return JSON.stringify({type:this.getCurrentIntervalType(),...this.interval.getSettings()})}addAction(e,t){AGN.Lib.Action.new(e,t,this.$container)}#ot(t){this.$container=$('<div class="vstack gap-3">'),this.#rt(),this.$dynamicContainer=$("<div>"),t.append(this.$container.append(this.$dynamicContainer)),AGN.Lib.CoreInitializer.run("select",this.$container),this.changeIntervalType(e[this.settings?.type]?.class??e.WEEKLY.class,_.omit(this.settings,["type"])),this.addAction({change:"[data-change-interval-type]"},this.#st.bind(this))}#rt(){this.$container.append(AGN.Lib.Template.text("schedule-interval-type",{intervals:e,type:this.settings?.type}))}#st(t){this.settingsCache.set(this.interval.constructor.name,this.interval.getSettings());const i=e[t.val()].class;this.changeIntervalType(i,this.settingsCache.get(i.name)??{})}changeIntervalType(e,t){this.interval=new e(this.$dynamicContainer,t),this.interval.drawSettings()}getCurrentIntervalType(){return this.$container.find("[data-change-interval-type]").val()}}AGN.Lib.Schedule.Builder=i})(),AGN.Lib.WM.Definitions={KEY_ENTER:13,KEY_SHIFT:16,KEY_CTRL:17,KEY_SPACE:32,KEY_DELETE:46,MOUSE_BUTTON_LEFT:0,MOUSE_BUTTON_MIDDLE:1,DEFAULT_DRAG_MODE:0,GRID_CELL_DRAG_MODE:1,BOTTOM:"BOTTOM",LEFT:"LEFT",RIGHT:"RIGHT",TOP:"TOP",NODE_ANIMATION_DROPPED:"animate-dropped",NODE_ANIMATION_AUTO_DROPPED:"animate-auto-dropped",Z_INDEX_VIEW_PORT:10,Z_INDEX_ICON_PANEL:50,Z_INDEX_DRAGGABLE_BUTTON:60,Z_INDEX_ICON_TITLES_CONTAINER:5,Z_INDEX_CONNECTION_OVERLAY:9,Z_INDEX_ICON:10,Z_INDEX_CONNECTION_HOVER:11,Z_INDEX_CONNECTION_OVERLAY_HOVER:12,Z_INDEX_ICON_HOVER:13,Z_INDEX_ICON_TITLE_HOVER:19,Z_INDEX_DRAGGED_ICON_NODE:20,Z_INDEX_JSPLUMB_DRAG_OPTIONS:25,Z_INDEX_NAVIGATOR_GLOBE:30,Z_INDEX_NAVIGATOR_ARROWS:31,Z_INDEX_CONTEXT_MENU:40,CANVAS_DEFAULT_GRID_SIZE:20,CANVAS_GRID_SIZE:20,NODE_SIZE:64,NODE_MIN_MARGIN:.1,TITLE_WIDTH:94,MINIMAP_PADDING:2,DEFAULT_AUTO_ALIGN_STEP_X:5,GRID_AUTO_ALIGN_STEP_X:2,AUTO_ALIGN_STEP_X:5,AUTO_ALIGN_EXTRA_STEP_X:.5,DEFAULT_AUTO_ALIGN_STEP_Y:6,GRID_AUTO_ALIGN_STEP_Y:2,AUTO_ALIGN_STEP_Y:6,AUTO_ALIGN_STEP_BETWEEN_GROUPS:2,AUTO_DROP_STEP_X:4,AUTO_DROP_STEP_Y:3,MIN_ZOOM:.5,MAX_ZOOM:1.5,DEFAULT_ZOOM:1,ZOOM_STEP:.1,NAVIGATION_STEP:100,MAX_UNDO_STEPS:17,CONNECTION_COLOR:"var(--workflow-connection-color)",CONNECTION_THICKNESS:3,CONNECTION_OUTLINE_COLOR:"transparent",CONNECTION_OUTLINE_WIDTH:4,CONNECTION_HOVER_COLOR:"var(--workflow-connection-hover-color)",CONNECTION_ARROW_SIZE:10,NODE_TYPE_START:"start",NODE_TYPE_STOP:"stop",NODE_TYPE_DECISION:"decision",NODE_TYPE_DEADLINE:"deadline",NODE_TYPE_PARAMETER:"parameter",NODE_TYPE_RECIPIENT:"recipient",NODE_TYPE_ARCHIVE:"archive",NODE_TYPE_FORM:"form",NODE_TYPE_MAILING:"mailing",NODE_TYPE_OWN_WORKFLOW:"ownWorkflow",NODE_TYPE_SPLIT:"split",NODE_TYPE_SC_BIRTHDAY:"scBirthday",NODE_TYPE_SC_DOI:"scDOI",NODE_TYPE_SC_ABTEST:"scABTest",NODE_TYPE_BIRTHDAY_WITH_COUPON:"birthdayWithCoupon",NODE_TYPE_WELCOME_TRACK:"welcomeTrack",NODE_TYPE_WELCOME_TRACK_WITH_INCENTIVE:"welcomeTrackWithIncentive",NODE_TYPE_SHOPPING_CART_ABANDONERS_SMALL:"shoppingCartAbandonersSmall",NODE_TYPE_SHOPPING_CART_ABANDONERS_LARGE:"shoppingCartAbandonersLarge",NODE_TYPE_ANNIVERSARY_MAIL:"anniversaryMail",NODE_TYPE_ACTION_BASED_MAILING:"actionbased_mailing",NODE_TYPE_MAILING_MEDIATYPE_SMS:"mailing_mediatype_sms",NODE_TYPE_MAILING_MEDIATYPE_POST:"mailing_mediatype_post",NODE_TYPE_DATE_BASED_MAILING:"datebased_mailing",NODE_TYPE_FOLLOWUP_MAILING:"followup_mailing",NODE_TYPE_IMPORT:"import",NODE_TYPE_EXPORT:"export",NODE_TYPES_MAILING:["mailing","followup_mailing","actionbased_mailing","datebased_mailing","mailing_mediatype_sms","mailing_mediatype_post"],NODE_TYPES_IMPORT_EXPORT:["import","export"],NODE_TYPE_START_ID:0,NODE_TYPE_STOP_ID:1,NODE_TYPE_DECISION_ID:2,NODE_TYPE_DEADLINE_ID:3,NODE_TYPE_PARAMETER_ID:4,NODE_TYPE_RECIPIENT_ID:6,NODE_TYPE_ARCHIVE_ID:7,NODE_TYPE_FORM_ID:8,NODE_TYPE_MAILING_ID:9,NODE_TYPE_OWN_WORKFLOW_ID:10,NODE_TYPE_SC_BIRTHDAY_ID:11,NODE_TYPE_SC_DOI_ID:12,NODE_TYPE_SC_ABTEST_ID:13,NODE_TYPE_ACTION_BASED_MAILING_ID:14,NODE_TYPE_DATE_BASED_MAILING_ID:15,NODE_TYPE_FOLLOWUP_MAILING_ID:16,NODE_TYPE_IMPORT_ID:17,NODE_TYPE_EXPORT_ID:18,NODE_TYPE_MAILING_MEDIATYPE_SMS_ID:19,NODE_TYPE_MAILING_MEDIATYPE_POST_ID:20,MAILING_PARAM_MAILING_LIST:1,MAILING_PARAM_TARGET_GROUPS:2,MAILING_PARAM_ARCHIVE:3,MAILING_PARAM_LIST_SPLIT:4,MAILING_PARAM_PLANNED_DATE:5,MAILING_PARAM_SEND_DATE:6,MAILING_PARAM_ALTGS:7,DEPENDENCY_TYPE_ARCHIVE:1,DEPENDENCY_TYPE_AUTO_EXPORT:2,DEPENDENCY_TYPE_AUTO_IMPORT:3,DEPENDENCY_TYPE_MAILING_DELIVERY:4,DEPENDENCY_TYPE_MAILING_LINK:5,DEPENDENCY_TYPE_MAILING_REFERENCE:6,DEPENDENCY_TYPE_MAILINGLIST:7,DEPENDENCY_TYPE_PROFILE_FIELD:8,DEPENDENCY_TYPE_PROFILE_FIELD_HISTORY:9,DEPENDENCY_TYPE_TARGET_GROUP:11,DEPENDENCY_TYPE_USER_FORM:12,GENDER_PROFILE_FIELD:"gender",FIELD_TYPE_DATE:"date",SPLIT_DEFAULT_PARAMETERS:[5,10,15,20,25,30,33,40,50],TITLE_MAX_TARGETS:2,PDF_SIZE:"A4",PDF_ORIENTATION:"landscape",PAGE_DIMENSIONS:{A4:{width:800,height:1360}},ICONS_CONFIG:{actionbased_mailing:{anchors:[[.07,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},mailing_mediatype_sms:{anchors:[[.07,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},mailing_mediatype_post:{anchors:[[.07,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},archive:{anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.8,0,1]]},datebased_mailing:{anchors:[[.07,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},deadline:{anchors:[[.1,.5,-1,0],[.5,.05,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},decision:{anchors:[[.06,.5,-1,0],[.5,.06,0,-1],[.94,.5,1,0],[.5,.94,0,1]]},export:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},followup_mailing:{anchors:[[.04,.5,-1,0],[.5,.2,0,-1],[.96,.5,1,0],[.5,.8,0,1]]},form:{anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},import:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},mailing:{anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},split:{anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},ownWorkflow:{anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},parameter:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},recipient:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},scABTest:{anchors:[[.1,.5,-1,0],[.5,.15,0,-1],[.9,.5,1,0],[.5,.85,0,1]]},scBirthday:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.85,0,1]]},scDOI:{anchors:[[.3,.5,-1,0],[.5,.04,0,-1],[.72,.5,1,0],[.5,.96,0,1]]},welcomeTrack:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},welcomeTrackWithIncentive:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},anniversaryMail:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},birthdayWithCoupon:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},shoppingCartAbandonersSmall:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},shoppingCartAbandonersLarge:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},start:{anchors:[[0,.5,-1,0],[.5,.15,0,-1],[1,.5,1,0],[.5,.85,0,1]]},stop:{anchors:[[0,.5,-1,0],[.5,.15,0,-1],[1,.5,1,0],[.5,.85,0,1]]}},CONNECTION_CONSTRAINTS:{"*":{deadline:function(e,t){return!t.connections.incoming.some(function(e){return"import"===e.source.getType()})},mailing:function(e,t){return 0===t.connections.incoming.length},datebased_mailing:function(e,t){return 0===t.connections.incoming.length}},start:{recipient:!0,form:!0,import:!0,export:!0},stop:!1,decision:{stop:!0,decision:!0,parameter:!0,deadline:!0,recipient:!0,form:!0,archive:!0,mailing_mediatype_sms:!0,mailing_mediatype_post:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0,split:!0},parameter:{stop:!0,decision:!0,parameter:!0,deadline:!0,recipient:!0,form:!0,archive:!0,mailing_mediatype_sms:!0,mailing_mediatype_post:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0},deadline:{decision:!0,parameter:!0,recipient:!0,archive:!0,mailing_mediatype_sms:!0,mailing_mediatype_post:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0,import:!0,export:!0,split:!0},recipient:{decision:!0,parameter:!0,deadline:!0,recipient:!0,form:!0,archive:!0,mailing_mediatype_sms:!0,mailing_mediatype_post:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0,import:!0,export:!0,split:!0},actionbased_mailing:{stop:!0,decision:!0,parameter:!0,deadline:!0,recipient:!0,form:!0,archive:!0,import:!0,export:!0},datebased_mailing:{stop:!0,decision:!0,parameter:!0,deadline:!0,recipient:!0,form:!0,archive:!0,import:!0,export:!0},followup_mailing:{stop:!0,decision:!0,parameter:!0,deadline:!0,recipient:!0,form:!0,archive:!0,import:!0,export:!0},mailing:{stop:!0,decision:!0,parameter:!0,deadline:!0,recipient:!0,form:!0,archive:!0,import:!0,export:!0},split:{parameter:!0},mailing_mediatype_sms:{stop:!0,decision:!0,parameter:!0,deadline:!0,recipient:!0,form:!0,archive:!0,import:!0,export:!0},mailing_mediatype_post:{stop:!0,decision:!0,parameter:!0,deadline:!0,recipient:!0,form:!0,archive:!0,import:!0,export:!0},archive:{decision:!0,parameter:!0,deadline:!0,recipient:!0,actionbased_mailing:!0,mailing_mediatype_sms:!0,mailing_mediatype_post:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0,import:!0,export:!0,split:!0},form:{stop:!0,decision:!0,parameter:!0,deadline:!0,recipient:!0,form:!0,archive:!0,actionbased_mailing:!0,mailing_mediatype_sms:!0,mailing_mediatype_post:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0,import:!0,export:!0},import:{deadline:function(e){return 0===e.connections.outgoing.length}},export:{stop:!0,decision:!0,parameter:!0,deadline:!0,recipient:!0,actionbased_mailing:!0,mailing_mediatype_sms:!0,mailing_mediatype_post:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0,import:!0,export:!0,archive:!0,form:!0,split:!0}},NODE_POPOVER_TEMPLATE:'<div class="popover popover-wide" role="tooltip" ><div class="arrow"></div><div class="popover-content" style="width: auto; height: auto; max-width: 300px; max-height: 350px; overflow: auto;"></div></div>',EMPTY_OPTION_PLACEHOLDER:"--"},(()=>{const e=AGN.Lib.WM.Definitions,t=AGN.Lib.Helpers,i=AGN.Lib.DateFormat;AGN.Lib.WM.Utils={checkActivation:function(t){const i=$("#workflow-status").val();return e.constants.initialWorkflowStatus===e.constants.statusActive&&(i===e.constants.statusActive||i===e.constants.statusTesting)&&(t&&AGN.Lib.Messages.warn("error.workflow.saveActivatedWorkflow"),!0)},isPausedWorkflow:function(){return $("#workflow-status").val()===e.constants.statusPaused},getConfigData:function(e){return t.objFromString(e.data("config"))},mapAsOptionsHtml:function(e){var t="";return Object.keys(e).forEach(function(i){t+="<option "+('value="'+i+'"')+">"+e[i]+"</option>"}),t},arrayAsOptionsHtml:function(e){var t="";return e.forEach(function(e){var i='value="'+e.id+'"',n=e.data;n&&Object.keys(n).forEach(function(e){i+=" data-"+e+'="'+n[e].replace('"',"&quot;")+'"'});var o=e.text.replace("<","&lt;").replace(">","&gt;");t+="<option "+i+">"+o+"</option>"}),t}},AGN.Lib.WM.DateTimeUtils={toDateTime:function(e,t,i){var n=null;return e&&e.getMonth&&(n=new Date(e),t&&0!==t&&n.setHours(t),i&&0!==i&&n.setMinutes(i)),n},getDateTimeValue:function(e,t,i){var n=this.toDateTime(e,t,i);return null!=n?n.getTime():null},getDateTimeStr:function(e,t,n,o){if(!e||!e.getMonth)return"";t=t||e.getHours(),n=n||e.getMinutes();var r=this.toDateTime(e,t,n);return r?i.format(r,o):""},getDateStr:function(e,t){return this.getDateTimeStr(e,null,null,t)},getCurrentAdminTime:()=>$.ajax({url:AGN.url("/workflow/getCurrentAdminTime.action"),async:!1}).responseJSON}})(),function(){function e(e){this.rules=e}e.prototype.isConstraint=function(e){return _.isBoolean(e)||_.isFunction(e)},e.prototype.evaluate=function(e,t,i){return!0===e||!1===e?e:_.isFunction(e)?e(t,i):void 0},e.prototype.getRulesToCheck=function(e,t){return[{from:e.type,to:[t.type,"*"]},{from:"*",to:[t.type,"*"]}]},e.prototype.getRelevantConstraints=function(e,t){var i=this.isConstraint,n=this.getRulesToCheck(e,t),o=this.rules,r=[];return n.forEach(function(e){var t=!0;if(_.has(o,e.from)){var n=o[e.from];i(n)?(r.push(n),t=!1):e.to.forEach(function(s){_.has(o[e.from],s)&&(n=o[e.from][s],i(n)&&(r.push(n),t=!1))})}t&&"*"!=e.from&&r.push(!1)}),r},e.prototype.check=function(e,t){for(var i=this.getRelevantConstraints(e,t),n=!1,o=0;o<i.length;o++){if(!this.evaluate(i[o],e,t))return!1;n=!0}return n},AGN.Lib.WM.ConnectionConstraints=e}(),function(){const e=AGN.Lib.Popover;AGN.Lib.WM.NodePopover=class{constructor(e){this.node=e,this.getMailingThumbnailWithCache=_.memoize(this.getMailingThumbnail.bind(this)),this.#at()}#at(){this.getPopoverContent().then(e=>this.createPopover(e)),this.setEnabled(!0)}createPopover(t){t&&(this.popover=e.getOrCreate(this.node.get$(),{trigger:"hover",html:!0,content:t}))}remove(){this.popover&&this.popover.hide(),e.remove(this.node.get$()),this.popover=null}update(){this.remove(),this.#at()}async getPopoverContent(){const e=await this.getThumbnail(),t=this.node.getComment();return e||t?.trim()?$("<div>").addClass("d-flex flex-column align-items-center").append(e).append($("<div>").text(t)):null}async getThumbnail(){const e=this.node.getData().mailingId;return this.node.isMailingNode()&&e?this.getMailingThumbnailWithCache(e):""}async getMailingThumbnail(e){const t=await this.getMailingThumbnailSrc(e);if(!t)return"";const i=new Image;return i.src=t,i.className="popover__thumbnail",i}async getMailingThumbnailSrc(e){const t=await $.get(AGN.url(`/workflow/mailing/${e}/thumbnail.action`));return t>0?AGN.url("/sc?compID="+t):""}setEnabled(e){this.isEnabled=e,this.popover&&(e?this.popover.enable():this.popover.disable())}}}(),(()=>{const e=AGN.Lib.WM.DateTimeUtils,t=AGN.Lib.Template,i=AGN.Lib.WM.Definitions,n=AGN.Lib.WM.NodePopover;class o{constructor(e,t){this.id=null,this.x=0,this.y=0,this.type=e,this.title="",this.overlayTitle="",this.filled=!1,this.editable=!0,this.expandable=!1,this.dependent=!1,this.inRecipientsChain=!1,this.anchors=i.ICONS_CONFIG[e].anchors,this.data=t,this.$element=o.create$(e),this.$element.data("agn:node",this),this.$connectionButton=this.$element.find(".node-connect-button"),this.$titleDiv=o.createTitleDiv$(),this.$titleSpan=this.$titleDiv.find(".icon-title-span"),this.$overlayTitle=this.$element.find(".icon-overlay-title"),this.nodePopover=new n(this),this.lastTitleAnchor=i.BOTTOM}static restore(e){return e.get$().data("agn:node")||e.get$().data("agn:node",e),e}static get(e){return e instanceof o?e:(e instanceof HTMLElement&&(e=$(e)),e.is(".node")||(e=e.closest(".node")),e.data("agn:node"))}static isDecisionNode(e){return e.getType()===i.NODE_TYPE_DECISION}isMailingNode(){return i.NODE_TYPES_MAILING.includes(this.getType())}get isSplitNode(){return this.getType()===i.NODE_TYPE_SPLIT}get isParameterNode(){return this.getType()===i.NODE_TYPE_PARAMETER}static isMailingNode(e){return!!e&&i.NODE_TYPES_MAILING.includes(e.getType())}static isBranchingDecisionNode(e){if(o.isDecisionNode(e)&&e.getData().decisionType===i.constants.decisionTypeDecision)return!0;return!1}static isDecisionBranchesOrderFromPositiveToNegative(e,t,i){return t.y<=e.y&&i.y<=e.y?t.y<i.y||!(i.y<t.y)&&t.x<i.x:t.y>e.y&&i.y>e.y?t.x>i.x:t.y<i.y}static getDecisionBranches(e){if(2===e.length){var t=o.getPosition(e[0].source.get$()),i=o.getPosition(e[0].target.get$()),n=o.getPosition(e[1].target.get$());return this.isDecisionBranchesOrderFromPositiveToNegative(t,i,n)?{positive:e[0],negative:e[1]}:{positive:e[1],negative:e[0]}}return null}static isCommented(e){return!!_.trim(e.getComment())}static isSelected(e){return e.hasClass("ui-selected")}static setSelected(e,t){return e.toggleClass("ui-selected",!!t)}static isChainSource(e){return e.hasClass("chain-mode-source")}static setChainSource(e,t){e.toggleClass("chain-mode-source",!!t)}static getAnchors(e){var t=o.get(e);return t?t.getAnchors():i.ICONS_CONFIG[e.data("type")].anchors}static getAnchorsInUse(e){var t={};return e.forEach(function(e){var n=e.anchor.getOrientation();n[0]>0?t[i.RIGHT]=!0:n[0]<0?t[i.LEFT]=!0:n[1]>0?t[i.BOTTOM]=!0:n[1]<0&&(t[i.TOP]=!0)}),t}static getPosition(e){var t=e.position();return{x:t.left,y:t.top}}static getBox(e){var t=e.position(),i=e[0].getBoundingClientRect();return{minX:t.left,minY:t.top,maxX:t.left+i.width,maxY:t.top+i.height}}static isInRegion(e,t){var i=o.getBox(e);return(i.minX>=t.minX&&i.minX<=t.maxX||i.maxX>=t.minX&&i.maxX<=t.maxX)&&(i.minY>=t.minY&&i.minY<=t.maxY||i.maxY>=t.minY&&i.maxY<=t.maxY)}static getCollisionBox(e){var t=o.getAnchors(e),n=e.position(),r=e[0].getBoundingClientRect(),s=(t[0][0]-i.NODE_MIN_MARGIN)*r.width,a=(t[1][1]-i.NODE_MIN_MARGIN)*r.height,l=(1-t[2][0]-i.NODE_MIN_MARGIN)*r.width,c=(1-t[3][1]-i.NODE_MIN_MARGIN)*r.height;return{minX:n.left+s,minY:n.top+a,maxX:n.left+r.width-l,maxY:n.top+r.height-c}}static detectBoxCollision=function(e,t){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)};static create$(e){return["datebased_mailing","actionbased_mailing"].includes(e)&&(e="mailing"),t.dom("workflow-node",{type:e})}static createDraggable$(e){return t.dom("workflow-draggable-node",{type:e})}static createTitleDiv$(){return t.dom("workflow-icon-title")}static create(e){var t={iconComment:""},n=new o(e,t);switch(e){case i.NODE_TYPE_SC_ABTEST:case i.NODE_TYPE_SC_BIRTHDAY:case i.NODE_TYPE_SC_DOI:case i.NODE_TYPE_BIRTHDAY_WITH_COUPON:case i.NODE_TYPE_WELCOME_TRACK:case i.NODE_TYPE_WELCOME_TRACK_WITH_INCENTIVE:case i.NODE_TYPE_SHOPPING_CART_ABANDONERS_SMALL:case i.NODE_TYPE_SHOPPING_CART_ABANDONERS_LARGE:case i.NODE_TYPE_ANNIVERSARY_MAIL:n.setFilled(!0),n.setExpandable(!0),t.copyContent=!0,t.created=!1;break;case"ownWorkflow":n.setExpandable(!0),t.ownWorkflowId=0,t.copyContent=!0,t.created=!1;break;case"start":t.startType=null,t.date=null,t.hour=0,t.minute=0,t.sendReminder=!1,t.remindAdminId=0,t.remindAtOnce=!1,t.scheduleReminder=!1,t.remindSpecificDate=!1,t.remindDate=new Date,t.remindHour=0,t.remindMinute=0,t.event=null,t.reaction=null,t.mailingId=0,t.profileField="",t.dateProfileField="",t.dateFieldOperator=1,t.dateFieldValue="",t.useRules=!1,t.rules=[],t.executeOnce=!0,t.comment="",t.recipients="",t.adminTimezone="";break;case"stop":t.endType=null,t.date=null,t.hour=0,t.minute=0,t.sendReminder=!1,t.remindAdminId=0,t.remindAtOnce=!1,t.scheduleReminder=!1,t.remindSpecificDate=!1,t.remindDate=new Date,t.remindHour=0,t.remindMinute=0,t.event=null,t.reaction=null,t.mailingId=0,t.profileField="",t.useRules=!1,t.rules=[],t.executeOnce=!0,t.comment="",t.recipients="",t.adminTimezone="";break;case"decision":t.decisionType=null,t.decisionCriteria=null,t.reaction=null,t.mailingId=0,t.linkId=0,t.profileField="",t.aoDecisionCriteria=null,t.threshold="",t.decisionDate=new Date,t.rules=[],t.includeVetoed=!0;break;case"deadline":t.deadlineType=null,t.date=new Date,t.timeUnit=null,t.delayValue=0,t.hour=0,t.minute=0,t.useTime=!1;break;case"parameter":t.value=0;break;case"recipient":n.setDependent(!1),t.mailinglistId=0,t.targets=[],t.altgs=[],t.targetsOption=null;break;case"archive":t.campaignId=0,t.archived=!1;break;case"form":t.userFormId=0,t.formType="form";break;case"mailing":t.mailingId=0,t.skipEmptyBlocks=!0,t.doubleCheck=!0;break;case"actionbased_mailing":case"datebased_mailing":case"mailing_mediatype_sms":case"mailing_mediatype_post":t.mailingId=0;break;case"followup_mailing":t.baseMailingId=0,t.mailingId=0,t.decisionCriterion="OPENED";break;case"import":case"export":t.importexportId=0,t.errorTolerant=!1}return n}static isExpandableType(e){switch(e){case i.NODE_TYPE_SC_ABTEST:case i.NODE_TYPE_SC_BIRTHDAY:case i.NODE_TYPE_SC_DOI:case i.NODE_TYPE_BIRTHDAY_WITH_COUPON:case i.NODE_TYPE_WELCOME_TRACK:case i.NODE_TYPE_WELCOME_TRACK_WITH_INCENTIVE:case i.NODE_TYPE_SHOPPING_CART_ABANDONERS_SMALL:case i.NODE_TYPE_SHOPPING_CART_ABANDONERS_LARGE:case i.NODE_TYPE_ANNIVERSARY_MAIL:case i.NODE_TYPE_OWN_WORKFLOW:case i.NODE_TYPE_SPLIT:return!0;default:return!1}}static deserialize(e){var t=$.extend({},e),n=new o(e.type,t);return n.setId(e.id),n.setCoordinates(e.x,e.y),n.setComment(e.iconComment),n.setFilled(e.filled),n.setEditable(e.editable),[i.NODE_TYPE_OWN_WORKFLOW,i.NODE_TYPE_SC_BIRTHDAY,i.NODE_TYPE_SC_DOI,i.NODE_TYPE_SC_ABTEST,i.NODE_TYPE_BIRTHDAY_WITH_COUPON,i.NODE_TYPE_WELCOME_TRACK,i.NODE_TYPE_WELCOME_TRACK_WITH_INCENTIVE,i.NODE_TYPE_SHOPPING_CART_ABANDONERS_SMALL,i.NODE_TYPE_SHOPPING_CART_ABANDONERS_LARGE,i.NODE_TYPE_ANNIVERSARY_MAIL].includes(e.type)&&n.setExpandable(!0),n.isMailingNode()&&t.mailingId?$.get(AGN.url(`/mailing/${t.mailingId}/name.action`)).done(t=>n.setTitle(t||e.iconTitle)):n.setTitle(e.iconTitle),delete t.id,delete t.x,delete t.y,delete t.type,delete t.iconTitle,delete t.filled,delete t.editable,["date","remindDate","decisionDate"].forEach(function(e){if(t[e]){var i=t[e].toString();if(i.includes("-")){var n=i.split("-");t[e]=new Date(n[0],n[1]-1,n[2])}else t[e]=new Date(t[e])}}),n}static deserializeConnections(e,t){var i=[];return e.forEach(function(e){var n=t[e.id];n instanceof o&&e.connections&&e.connections.forEach(function(e){var r=t[e.targetIconId];r instanceof o&&i.push({source:n,target:r})})}),i}static toMap(e){var t={};return e.forEach(function(e){t[e.getId()]=e}),t}appendTo(e,t,i){this.$container=e,this.$titlesContainer=t,i&&this.$element.addClass(i),e.append(this.$element),t.append(this.$titleDiv),this.$titleDiv.toggleClass("expandable",this.$titleSpan.height()>this.$titleDiv.height())}isAppended(){return!!this.$container}get $inUseBadge(){return this.$element.find(".node-status-badge")}toggleInUseBadge(){return this.$inUseBadge.toggle(i.sentMailings.includes(parseInt(this.data.mailingId)))}get$(){return this.$element}getId(){return this.id}setId(e){this.id=e,this.$element.prop("id",e)}getX(){return this.x}getY(){return this.y}getCoordinates(){return{x:this.x,y:this.y}}setCoordinates(e,t){this.x=e,this.y=t,this.$element.css("left",e*i.CANVAS_GRID_SIZE),this.$element.css("top",t*i.CANVAS_GRID_SIZE)}updateCoordinates(e){var t=o.getPosition(this.$element);this.x=t.x/e/i.CANVAS_GRID_SIZE,this.y=t.y/e/i.CANVAS_GRID_SIZE}getType(){return this.type}setType(e){this.type=e,this.$element.find(".node-image").replaceWith(t.dom("workflow-node-icon",{type:e}))}getTitle(){return this.title}setTitle(e){this.title=e,e&&(this.$titleSpan.text(e),this.positionTitle(this.lastTitleAnchor),this.$titleDiv.toggleClass("expandable",this.$titleSpan.height()>this.$titleDiv.height())),this.setTitleEnabled(!!e)}setTitleEnabled(e){this.$titleDiv.toggle(!!e&&!!this.title)}setTitleExpanded(e){this.$titleDiv.toggleClass("expanded",!!e),this.isAppended()&&(e?this.$titleDiv.appendTo(this.$container):this.$titleDiv.appendTo(this.$titlesContainer))}positionTitle(e){this.lastTitleAnchor=e;var t=this.x*i.CANVAS_GRID_SIZE,n=t+i.NODE_SIZE,o=this.y*i.CANVAS_GRID_SIZE,r=o+i.NODE_SIZE;switch(e){case i.BOTTOM:this.$titleDiv.css({top:r,left:t+(i.NODE_SIZE-i.TITLE_WIDTH)/2,transform:"none"});break;case i.LEFT:this.$titleDiv.css({top:(o+r)/2,left:t-i.TITLE_WIDTH,transform:"translateY(-50%)"});break;case i.RIGHT:this.$titleDiv.css({top:(o+r)/2,left:n,transform:"translateY(-50%)"});break;case i.TOP:this.$titleDiv.css({top:o,left:t+(i.NODE_SIZE-i.TITLE_WIDTH)/2,transform:"translateY(-100%)"});break;default:return}}getOverlayTitle(){return this.overlayTitle}setOverlayTitle(e){this.overlayTitle=e,this.$overlayTitle.text(_.trim(e))}getComment(){return this.comment}get $commentBtn(){return this.$element.find(".node-comment-button")}setComment(e){this.comment=this.data.iconComment=e,this.updateCommentLabels()}updateCommentLabels(){const e=!!_.trim(this.comment);this.$element.toggleClass("icon-commented",e),this.$commentBtn.toggle(e)}setFootnote(e){e>0?this.$element.attr("comment-footnote",e):this.$element.removeAttr("comment-footnote")}isFilled(){return this.filled}setFilled(e){this.filled=e,this.$element.toggleClass("active",e),e&&this.isMailingNode()&&this.toggleInUseBadge()}isEditable(){return this.editable}setEditable(e){this.editable=e}isExpandable(){return this.expandable}setExpandable(e){this.expandable=e}isDependent(){return this.dependent}setDependent(e){this.dependent=e}isInRecipientsChain(){return this.inRecipientsChain}setInRecipientsChain(e){this.inRecipientsChain=e}getAnchors(){return this.anchors}setAnchors(e){this.anchors=e}getData(){return this.data}setData(e){this.data=e}setInteractionEnabled(e){this.$connectionButton.toggle(!!e)}removePopover(){this.nodePopover.remove()}setPopoverEnabled(e){this.nodePopover.setEnabled(e)}setHovered(e){this.setTitleExpanded(e)}remove(){this.nodePopover.remove(),this.$element.remove(),this.$titleDiv.remove(),this.$container=null,this.$titlesContainer=null}serialize(){var t=$.extend({},this.data,{id:this.id,x:this.x,y:this.y,type:this.type,filled:this.filled,editable:this.editable,iconTitle:this.title});return"date"in t&&"hour"in t&&"minute"in t&&(t.date=e.getDateTimeValue(t.date,t.hour,t.minute)),"remindDate"in t&&"remindHour"in t&&"remindMinute"in t&&(t.remindDate=e.getDateTimeValue(t.remindDate,t.remindHour,t.remindMinute)),"decisionDate"in t&&(t.decisionDate=e.getDateTimeValue(t.decisionDate)),t}}AGN.Lib.WM.Node=o})(),function(){var e=AGN.Lib.WM.Node;function t(t){this.id=t.getId(),this.node=t,this.position=e.getPosition(t.get$()),this.box=e.getBox(t.get$()),this.connections={incoming:[],outgoing:[]}}function i(e,t,n,o){if(n[t.id])o.push(e);else{e.push(t.node);var r=t.connections.incoming;r.length?(n[t.id]=!0,1==r.length?i(e,r[0],n,o):r.forEach(function(t){i(e.slice(),t,n,o)}),n[t.id]=!1):o.push(e)}}function n(e,t,i,o){if(i[t.id])o.push(e);else{e.push(t.node);var r=t.connections.outgoing;r.length?(i[t.id]=!0,1==r.length?n(e,r[0],i,o):r.forEach(function(t){n(e.slice(),t,i,o)}),i[t.id]=!1):o.push(e)}}t.nodesToVertices=function(e){return e.map(function(e){return new t(e)})},t.verticesToMap=function(e){var t={};return e.forEach(function(e){t[e.id]=e}),t},t.verticesFrom=function(e,i){var n=t.nodesToVertices(e),o=t.verticesToMap(n);return i.forEach(function(e){var t,i;"sourceId"in e?(t=o[e.sourceId],i=o[e.targetId]):(t=o[e.source.getId()],i=o[e.target.getId()]),t.connections.outgoing.push(i),i.connections.incoming.push(t)}),n},t.compareByPosition=function(e,t){var i=e.box,n=t.box;return i.minX==n.minX?i.minY-n.minY:i.minX-n.minX},t.filterUnvisited=function(e,t){return e.filter(function(e){return!t[e.id]&&(t[e.id]=!0,!0)})},t.getDecisionBranches=function(t){var i=t.connections.outgoing.map(function(e){return{source:t.node,target:e.node,targetVertex:e}}),n=e.getDecisionBranches(i);return n?{positive:n.positive.targetVertex,negative:n.negative.targetVertex}:null},t.getIncomingChains=function(e){var t=[];return i([],e,{},t),t},t.getOutgoingChains=function(e){var t=[];return n([],e,{},t),t},t.prototype.getNode=function(){return this.node},t.prototype.siblings=function(){return this.connections.incoming.concat(this.connections.outgoing)},t.prototype.rightSiblingsOrdered=function(){var i=this.connections.outgoing;if(e.isBranchingDecisionNode(this.node)){var n=t.getDecisionBranches(this);if(n)return[n.positive,n.negative]}return i.sort(function(e,t){return e.node.getY()-t.node.getY()})},AGN.Lib.WM.Vertex=t}(),function(){var e=AGN.Lib.WM.Vertex;function t(e){this.vertices=e,this.box=e.map(function(e){return e.box}).reduce(function(e,t){return{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}})}t.detectGroups=function(e){var i=[],n={};return e.forEach(function(e){var o=t.detectGroup(e,n);o&&i.push(o)}),i.sort(t.compareByPosition)},t.detectGroup=function(e,i){if(i[e.id])return null;var n=[],o=e.siblings();for(n.push(e),i[e.id]=!0;o.length;)o=_.flatMap(o,function(e){return i[e.id]?[]:(n.push(e),i[e.id]=!0,e.siblings())});return new t(n)},t.compareByPosition=function(e,t){var i=e.box.minX+e.box.maxX-(t.box.minX+t.box.maxX);return 0==i?e.box.minY+e.box.maxY-(t.box.minY+t.box.maxY):i},t.prototype.getNodes=function(){return this.vertices.map(function(e){return e.getNode()})},t.prototype.getStartingVertices=function(){var t=this.vertices.filter(function(e){return 0==e.connections.incoming.length});return t.length?t.sort(e.compareByPosition):[this.vertices.reduce(function(t,i){var n=t.connections.outgoing.length/t.connections.incoming.length,o=i.connections.outgoing.length/i.connections.incoming.length;return n==o?e.compareByPosition(t,i)>=0?t:i:n>o?t:i})]},AGN.Lib.WM.VertexGroup=t}(),function(){var e=AGN.Lib.WM.Definitions,i=AGN.Lib.WM.DateTimeUtils,n={},o=function(){};function r(e,t,i){if(t<=0)return"";_.isEmpty(n[e])&&$.ajax({url:AGN.url(i),async:!1}).done(function(t){n[e]=_.extend({},t)});var o=n[e][t];return o||""}function s(e,t,i){const o=n[e]||{};o[t]=i,n[e]=o}function a(i){switch(i){case e.constants.reactionOpened:return t("workflow.reaction.opened");case e.constants.reactionNotOpened:return t("workflow.reaction.not_opened");case e.constants.reactionClicked:return t("workflow.reaction.clicked");case e.constants.reactionNotClicked:return t("workflow.reaction.not_clicked");case e.constants.reactionBought:return t("workflow.reaction.bought");case e.constants.reactionNotBought:return t("workflow.reaction.not_bought");case e.constants.reactionChangeOfProfile:return t("workflow.reaction.change_of_profile");case e.constants.reactionWaitingForConfirm:return t("workflow.reaction.waiting_for_confirm");case e.constants.reactionOptIn:return t("workflow.reaction.opt_in");case e.constants.reactionOptOut:return t("workflow.reaction.opt_out");case e.constants.reactionClickedLink:return t("workflow.reaction.clicked_on_link");case e.constants.reactionOpenedAndClicked:return t("workflow.reaction.opened_and_clicked");case e.constants.reactionOpenedOrClicked:return t("workflow.reaction.opened_or_clicked")}}function l(i,n){var o="";return n.forEach(function(t){var n,r;o+=(_.isEmpty(o)?"":" "+t.chainOperator+" ")+function(e){switch(Number(e)){case 1:return"(";case 0:return""}}(t.parenthesisOpened)+i+" "+e.constants.operatorsMap[t.primaryOperator]+" "+(n=i,r=t.primaryValue,n&&e.GENDER_PROFILE_FIELD===n.toLowerCase()?e.constants.genderOptions[r||0]:_.isEmpty(r)?"":r)+function(e){switch(Number(e)){case 1:return")";case 0:return""}}(t.parenthesisClosed)}),t("workflow.start.rule")+(o?": "+o:"")}function c(t,n,o){return t?1===arguments.length?i.getDateStr(t,e.constants.localeDateTimePattern):i.getDateTimeStr(t,n,o,e.constants.localeDateTimePattern):""}function d(i,n){return i+" "+function(i,n){if(i>1)switch(n){case e.constants.deadlineTimeUnitMinute:return t("workflow.deadline.minutes");case e.constants.deadlineTimeUnitHour:return t("workflow.defaults.hours");case e.constants.deadlineTimeUnitDay:return t("workflow.defaults.days");case e.constants.deadlineTimeUnitWeek:return t("workflow.defaults.weeks");case e.constants.deadlineTimeUnitMonth:return t("workflow.defaults.months")}else switch(n){case e.constants.deadlineTimeUnitMinute:return t("workflow.deadline.minute");case e.constants.deadlineTimeUnitHour:return t("workflow.defaults.hour");case e.constants.deadlineTimeUnitDay:return t("workflow.defaults.day");case e.constants.deadlineTimeUnitWeek:return t("workflow.defaults.week");case e.constants.deadlineTimeUnitMonth:return t("workflow.defaults.month")}}(i,n)}function u(i,n,o){var r=function(i){switch(i){case e.constants.decisionAOCriteriaClickRate:return t("workflow.defaults.ckickrate");case e.constants.decisionAOCriteriaOpenrate:return t("workflow.opening_rate");default:return t("workflow.statistic.revenue")}}(i)+(_.isEmpty(n)?"":": "+n)+"\n";return o&&(r+=t("workflow.defaults.date")+": "+c(o)),r}function h(i,n,r,s){var a="";return s&&(a+=t("workflow.mailinglist.short")+": "+o.getMailinglistName(i)),_.isEmpty(n)||(_.isEmpty(a)||(a+="\n"),a+=t("workflow.target.short")+": "+function(i,n){for(var r=[],s=0;s<e.TITLE_MAX_TARGETS&&s<i.length;s++)r.push(o.getTargetName(i[s]));var a=", ";return e.constants.targetOptions[n]&&(a=" "+e.constants.targetOptions[n]+" "),i.length>e.TITLE_MAX_TARGETS?r.join(a)+" "+t("defaults.andMore",i.length-e.TITLE_MAX_TARGETS)+"...":r.join(a)}(n,r)),a}o.addArchiveName=function(e,t){s("archive",e,t)},o.addMailingName=function(e,t){s("mailing",e,t)},o.getWebFormName=function(e){return r("form",e,"/workflow/ajax/getWebFormNames.action")},o.getTargetName=function(e){return r("target",e,"/workflow/ajax/getTargetNames.action")},o.getMailingName=function(e){return r("mailing",e,"/workflow/ajax/getMailingNames.action")},o.getArchiveName=function(e){return r("archive",e,"/workflow/ajax/getArchiveNames.action")},o.getAutoExportName=function(e){return r("autoExport",e,"/workflow/ajax/getAutoExportNames.action")},o.getAutoImportName=function(e){return r("autoImport",e,"/workflow/ajax/getAutoImportNames.action")},o.getMailinglistName=function(e){return r("mailinglist",e,"/workflow/ajax/getMailinglistNames.action")},o.positionTitle=function(t,i){"split"!==t.type&&i[e.BOTTOM]?i[e.LEFT]?i[e.RIGHT]?i[e.TOP]?t.positionTitle(e.BOTTOM):t.positionTitle(e.TOP):t.positionTitle(e.RIGHT):t.positionTitle(e.LEFT):t.positionTitle(e.BOTTOM)};var p={title:function(e){return o.getMailingName(e.mailingId)}};const g={"*":{overlayTitle:"",title:""},start:{title:function(i){var n,o,r,s=i.startType,l="";if(e.constants.startTypeDate===s)l=t("workflow.start.start_date")+":\n"+c(i.date,i.hour,i.minute);else if(e.constants.startTypeEvent===s){var d=i.event;e.constants.startEventReaction===d?l=t("workflow.start.start_event")+":\n"+a(i.reaction)+": ("+c(i.date,i.hour,i.minute)+")":e.constants.startEventDate===d&&(l=t("workflow.start.start_event")+":\n"+(n=i.dateProfileField,o=i.dateFieldOperator,r=i.dateFieldValue,n+" "+e.constants.operatorsMap[o]+(r?" "+r:"")+":\n(")+c(i.date,i.hour,i.minute)+")")}return l}},stop:{title:function(i,n,o){var r=i.endType,s="";return e.constants.endTypeDate===r?s=t("workflow.stop.end_date")+":\n"+c(i.date,i.hour,i.minute):e.constants.endTypeAutomatic===r&&(s=o?t("workflow.stop.automatic_end"):t("workflow.stop.open_end")),s}},deadline:{title:function(i){var n=i.deadlineType,o="";return e.constants.deadlineTypeFixedDeadline===n?o=t("workflow.deadline.title")+":\n"+c(i.date,i.hour,i.minute):e.constants.deadlineTypeDelay===n&&(o=t("workflow.defaults.delay")+":\n"+d(i.delayValue,i.timeUnit)),o}},parameter:{title:"",overlayTitle:e=>e.value},split:{title:e=>t(`split.ratio.${e.splitType}`)},decision:{title:function(i){var n,r,s=i.decisionType;return e.constants.decisionTypeAutoOptimization===s?t("workflow.mailing.autooptimization")+":\n"+u(i.aoDecisionCriteria,i.threshold,i.decisionDate):e.constants.decisionReaction===i.decisionCriteria?t("workflow.decision")+",\n"+(n=i.reaction,r=i.mailingId,t("workflow.reaction.title")+": "+a(n)+",\n"+t("workflow.defaults.mailing")+": "+o.getMailingName(r)):t("workflow.decision")+",\n"+l(i.profileField,i.rules)},branches:{title:()=>({positive:t("defaults.yes"),negative:t("defaults.no")})}},recipient:{title:(e,t)=>h(e.mailinglistId,e.targets,e.targetsOption,!t.isInRecipientsChain())},archive:{title:e=>o.getArchiveName(e.campaignId)},form:{title:e=>o.getWebFormName(e.userFormId)},mailing:p,mailing_mediatype_sms:p,mailing_mediatype_post:p,actionbased_mailing:p,datebased_mailing:p,followup_mailing:{title:function(e,t){var i,n=t.title;i=o.getMailingName(e.baseMailingId)||"?";var r=function(e,t,i){if(e)return t?t+" ("+a(i)+") "+e:e}(o.getMailingName(e.mailingId)||"?",i,e.decisionCriterion);return r&&(n=r),n}},import:{title:e=>o.getAutoImportName(e.importexportId)},export:{title:e=>o.getAutoExportName(e.importexportId)}};function f(e,t){var i=g[e];i.hasOwnProperty(t)||(i=g["*"]);var n=i[t],o=Array.prototype.slice.call(arguments,2);return _.isFunction(n)?n.apply(i,o):n}o.getDecisionBranchesLabels=function(){return g.decision.branches.title()},o.updateTitle=function(t,i,n){if(n||!function(t){var i=t.getType();return!(!e.NODE_TYPES_MAILING.includes(i)&&!e.NODE_TYPES_IMPORT_EXPORT.includes(i)||!t.title)}(t)){if(!t.isFilled())return t.setTitle(""),void t.setOverlayTitle("");t.setTitle(function(e,t){return f(e.getType(),"title",e.getData(),e,t)}(t,i)),t.setOverlayTitle(function(e){return f(e.getType(),"overlayTitle",e.getData())}(t))}},AGN.Lib.WM.NodeTitleHelper=o}(),function(){const e=AGN.Lib.WM.Node,t=AGN.Lib.WM.Definitions;class i{constructor(e,t){this.minimap=e,this.$element=e.$container.find(t),this.scale=1}setScale(e){this.scale=e}getScale(){return this.scale}getPosition(){var e=this.$element.position();return{x:e.left,y:e.top}}update(){this.reset();var e=this.minimap.getPureIconsBox(),i=2*t.MINIMAP_PADDING,n=e.maxX-e.minX+i,o=e.maxY-e.minY+i,r=(this.minimap.getWidth()-i)/n,s=(this.minimap.getHeight()-i)/o;this.setScale(Math.min(r,s));var a=-e.minX*this.scale+t.MINIMAP_PADDING,l=-e.minY*this.scale+t.MINIMAP_PADDING;this.$element.css({transform:"scale("+this.scale+")",width:n,height:o,left:a,top:l}),this.renderIcons()}renderIcons(){var e=this;this.minimap.getPureIconsPosition().forEach(function(i){var n=$('<div class="miniview-element"></div>').css({width:t.NODE_SIZE,height:t.NODE_SIZE,left:i.x,top:i.y});e.$element.append(n)})}reset(){this.scale=1,this.$element.css({transform:"scale(1)",width:0,height:0,left:0,top:0}),this.$element.html("")}}class n{constructor(e,t,i){this.minimap=e,this.$element=e.get$().find(t),this.onDrag=_.isFunction(i.onPannerDrag)?i.onPannerDrag:_.noop,this.containment=$.extend({mode:"",padding:0},i.containment),this.containmentBox=null;var n=this,o=0,r=0;this.$element.draggable({start:function(e,t){o=t.position.left,r=t.position.top,n.containmentBox||(n.containmentBox=n.getContainmentBox(n.containment))},drag:function(e,t){var i=n.getScale();if(n.containmentBox){var s=t.position.left,a=t.position.top;s<n.containmentBox.minX?t.position.left=n.containmentBox.minX:s>n.containmentBox.maxX&&(t.position.left=n.containmentBox.maxX),a<n.containmentBox.minY?t.position.top=n.containmentBox.minY:a>n.containmentBox.maxY&&(t.position.top=n.containmentBox.maxY)}var l=(o-t.position.left)/i,c=(r-t.position.top)/i;o=t.position.left,r=t.position.top,n.onDrag.call(n,l,c)}})}getContainmentBox(e){if(e.mode&&"none"!=e.mode){var t=this.minimap.get$(),i=this.getScaledWidth(),n=this.getScaledHeight();return"panner-box"==e.mode?{minX:-i+e.padding,maxX:t.width()-e.padding,minY:-n+e.padding,maxY:t.height()-e.padding}:"minimap-box"==e.mode?{minX:e.padding,maxX:Math.max(0,t.width()-i)-e.padding,minY:e.padding,maxY:Math.max(0,t.height()-n)-e.padding}:void 0}}getScale(){return this.minimap.getMiniCanvasScale()/this.minimap.getCanvasZoom()}getScaledWidth(){return this.getWidth()*this.getScale()}getScaledHeight(){return this.getHeight()*this.getScale()}getWidth(){return this.$element.width()}getHeight(){return this.$element.height()}update(){var e=this.minimap.getCanvasParent$(),i=e.width(),n=e.height(),o=i+2*t.MINIMAP_PADDING,r=n+2*t.MINIMAP_PADDING;this.$element.css({width:o,height:r}),this.containmentBox=this.getContainmentBox(this.containment),this.updatePosition()}updatePosition(){var e=this.minimap.getCanvasPosition(),t=this.minimap.getMiniCanvasPosition(),i=this.getScale(),n=-e.x*i+t.x,o=-e.y*i+t.y;this.$element.css({transform:"scale("+i+")",left:n,top:o})}}AGN.Lib.WM.Minimap=class{constructor(e,t){this.$container=$("#minimap"),this.canvas=e,this.miniCanvas=new i(this,".minimap-canvas",t),this.miniPanner=new n(this,".minimap-panner",t),this.enabled=!1;const o=this.$container.find(".minimap-collapse"),r=$("#collapsed-navigator");this.$container.on("click",".minimap-panner, .minimap-collapse, .minimap-arrow",e=>e.preventFocusOnArea=!0),o.on("click",()=>this.toggleMinimap(!1)),r.on("click",()=>this.toggleMinimap(!0)),this.$container.on("click",e=>this.moveToClickPos(e)),this.$container.find(".minimap-arrow").on("click",e=>{const t=$(e.currentTarget).data("arrow"),i=this.#lt(t);this.moveCanvasTo(i.x,i.y)})}#lt(e){const{x:t,y:i}=this.canvas.getPosition();switch(e){case"up":return{x:t,y:i+50};case"right":return{x:t-50,y:i};case"down":return{x:t,y:i-50};case"left":return{x:t+50,y:i}}}moveToClickPos(e){if(e.preventFocusOnArea)return;const t=this.$container[0].getBoundingClientRect(),i=e.clientX-t.left,n=e.clientY-t.top;this.focusOnClickedArea(i,n)}get$(){return this.$container}getWidth(){return this.get$().width()}getHeight(){return this.get$().height()}moveCanvasTo(e,t){this.canvas.moveTo(e,t)}getCanvas$(){return this.canvas.get$()}getCanvasParent$(){return this.canvas.get$().parent()}focusOnClickedArea(e,t){var i=this.getMiniCanvasPosition(),n=this.getMiniPannerScale(),o=(e-i.x)/n,r=(t-i.y)/n,s=this.getMiniPannerCenter(),a=this.getCanvasZoom(),l=(o-s.x)*a,c=(r-s.y)*a;this.moveCanvasTo(-l,-c)}toggleMinimap(e){$("#navigator").toggle(e),$("#collapsed-navigator").toggle(!e)}getIcons(){return this.canvas.getIcons()}getPureIconsPosition(){var t=this.getCanvasZoom();return this.getIcons().map(function(i){var n=e.getPosition(i);return{x:n.x/t,y:n.y/t}})}getPureIconsBox(){return this.canvas.getPureIconsBox()}getMiniCanvasScale(){return this.miniCanvas.getScale()}getMiniCanvasPosition(){return this.miniCanvas.getPosition()}getMiniPannerScale(){return this.miniCanvas.getScale()}getMiniPannerCenter(){return{x:this.miniPanner.getWidth()/2,y:this.miniPanner.getHeight()/2}}getCanvasZoom(){return this.canvas.getZoom()}getCanvasPosition(){return this.canvas.getPosition()}updateMinimap(){this.enabled&&(this.miniCanvas.update(),this.miniPanner.update())}onPanZoom(){this.enabled&&this.miniPanner.updatePosition()}setEnabled(e){this.enabled=e,e?(this.updateMinimap(),this.get$().show()):this.get$().hide()}}}(),function(){const e=AGN.Lib.WM.Definitions,t=AGN.Lib.WM.Node,i=AGN.Lib.WM.Minimap;AGN.Lib.WM.Canvas=class{constructor(t){const n=this;this.$canvas=t,this.mouseWheelZoomEnabled=!1,this.panningEnabled=!1,this.zoomEventHandler=null,this.moveEventHandler=null,this.ignoreNextZoomEvent=!1,this.minimap=new i(this,{containment:{mode:"panner-box",padding:5},onPannerDrag:function(e,t){if(e||t){var i=n.getPosition();n.moveTo(i.x+e,i.y+t)}}}),this.panzoom=panzoom(t[0],{minZoom:e.MIN_ZOOM,maxZoom:e.MAX_ZOOM,initialZoom:e.DEFAULT_ZOOM,disableKeyboardInteraction:!0,smoothScroll:!1,onDoubleClick:()=>!1,beforeWheel:()=>!n.mouseWheelZoomEnabled,beforeMouseDown:t=>t.button!==e.MOUSE_BUTTON_MIDDLE}),this.panzoom.on("zoom",function(){n.zoomEventHandler&&(n.ignoreNextZoomEvent?n.ignoreNextZoomEvent=!1:(n.zoomEventHandler.call(null,n.getZoom()),n.minimap.onPanZoom()))}),this.panzoom.on("pan",function(){n.minimap.onPanZoom(),n.moveEventHandler&&n.moveEventHandler.call(null,n.getPosition())})}get$(){return this.$canvas}setMinimapEnabled(e){this.minimap.setEnabled(e)}updateMinimap(){this.minimap.updateMinimap()}setPanningEnabled(e){this.panningEnabled=!!e}setMouseWheelZoomEnabled(e){this.mouseWheelZoomEnabled=e}getZoom(){return this.panzoom.getTransform().scale}getPosition(){var e=this.panzoom.getTransform();return{x:e.x,y:e.y}}getVisibleArea(){var e=this.$canvas.parent(),t=e.width(),i=e.height(),n=this.panzoom.getTransform();return{minX:-n.x/n.scale,minY:-n.y/n.scale,maxX:(t-n.x)/n.scale,maxY:(i-n.y)/n.scale}}moveTo(e,t){this.panzoom.moveTo(e,t)}setZoom(e){var t=this.panzoom.getTransform();this.ignoreNextZoomEvent=!0,this.panzoom.zoomAbs(t.x,t.y,e),this.minimap.onPanZoom()}setOnZoom(e){this.zoomEventHandler=e}setOnMove(e){this.moveEventHandler=e}getCanvasParent$(){return this.get$().parent()}getIcons(){var e=[];return this.get$().children(".node").each(function(t,i){e.push($(i))}),e}getPureIconsBox(){var i=this.getIcons(),n=this.getZoom();if(i.length){var o=i.map(function(e){return t.getBox(e)}).reduce(function(e,t,i){return{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}});return{minX:o.minX/n-e.CANVAS_GRID_SIZE,minY:o.minY/n-e.CANVAS_GRID_SIZE,maxX:o.maxX/n+e.CANVAS_GRID_SIZE,maxY:o.maxY/n+e.CANVAS_GRID_SIZE}}var r=this.getCanvasParent$();return{minX:-e.CANVAS_GRID_SIZE,minY:-e.CANVAS_GRID_SIZE,maxX:r.width()/n+e.CANVAS_GRID_SIZE,maxY:r.height()/n+e.CANVAS_GRID_SIZE}}fitPdfPage(t,i){var n=this.getPureIconsBox(),o=n.maxX-n.minX+e.NODE_MIN_MARGIN,r=n.maxY-n.minY+e.NODE_MIN_MARGIN;if(e.PAGE_DIMENSIONS[t]){var s=e.PAGE_DIMENSIONS[t],a="landscape"==i,l=a?s.height:s.width,c=a?s.width:s.height,d=0,u=0,h=1;(o>l||r>c)&&(h=o/r<l/c?c/r:l/o),n.minX<0&&(d=-n.minX*h),n.minY<0&&(u=-n.minY*h);var p="matrix("+h+", 0, 0, "+h+", "+d+", "+u+")",g="left top 0";this.getCanvasParent$().css({transform:p,"-webkit-transform":p,"transform-origin":g,"-webkit-transform-origin":g,"backface-visibility":"hidden","-webkit-backface-visibility":"hidden",overflow:"visible"})}}}}(),(()=>{const e=AGN.Lib.WM.Definitions,i=AGN.Lib.Confirm,n={Activation:function(e,n){const o=i.from("activate-campaign-dialog",{rows:e.length});n||function(e){const i=[{field:"name",headerName:t("defaults.name"),filter:!1,suppressMovable:!0,sortable:!0,sort:"asc",resizable:!1,cellRenderer:"NotEscapedStringCellRenderer"}],n={pagination:!1,singleNameTable:!0,showRecordsCount:"simple"};new AGN.Lib.Table($("#activate-modal .table-wrapper"),i,e,n)}(e);return o},Deactivation:function(){const e=t("workflow.inactivating.title"),i=t("workflow.inactivating.question");return o(e,i)},confirmTestingStartStop:function(t){return i.from("testing-modal",{startTesting:t,shortname:e.shortname})},confirmMailingDataTransfer:function(t){return i.from("mailing-data-transfer-modal",{Def:e,paramsToAsk:t})},confirmOwnWorkflowExpanding:function(){return i.from("own-workflow-expanding-modal")},createAutoOpt:function(){return i.from("create-auto-opt-modal")},createSplit:function(){return i.from("create-split-modal")},confirmCopy:function(e){return i.from("workflow-copy-modal",{hasContent:!0===e})},connectionNotAllowed:function(){const e=t("workflow.dialog.connectionNotAllowedTitle"),i=t("workflow.dialog.connectionNotAllowedMessage");return o(e,i)},mailingInUseDialog:function(e){const i=t("workflow.mailing.copyQuestion"),n=`${t("workflow.button.copy")} ${t("workflow.defaults.and")} ${t("workflow.defaults.edit").toLowerCase()}`;return o(e,i,n)},simpleDialog:o};function o(e,n,o=t("defaults.ok")){return i.from("workflow-simple-dialog-modal",{title:e,message:n,btnText:o})}AGN.Lib.WM.Dialogs=n})(),(()=>{const e=AGN.Lib.WM.Definitions,t=AGN.Lib.WM.Node;function i(e){return function(i){var n=i.map(t.deserialize),o=t.deserializeConnections(i,t.toMap(n));e.call(null,n,o)}}AGN.Lib.WM.Snippets=class{static loadSample(t,n,o){[e.NODE_TYPE_SC_ABTEST,e.NODE_TYPE_SC_DOI,e.NODE_TYPE_ANNIVERSARY_MAIL,e.NODE_TYPE_SC_BIRTHDAY,e.NODE_TYPE_BIRTHDAY_WITH_COUPON,e.NODE_TYPE_WELCOME_TRACK,e.NODE_TYPE_WELCOME_TRACK_WITH_INCENTIVE,e.NODE_TYPE_SHOPPING_CART_ABANDONERS_SMALL,e.NODE_TYPE_SHOPPING_CART_ABANDONERS_LARGE].includes(t)?$.ajax({url:AGN.url("/workflow/getSampleWorkflowContent.action"),async:!1,data:{type:t,gridEnabled:n},success:i(o)}):console.error("Unknown sample type: "+t)}static loadAutoOptSample(e,t,n){$.get(AGN.url("/workflow/autoOptWorkflowSample.action"),{mailingsCount:e,gridEnabled:t}).done(i(n))}static createSplitSample(e,t,n){const o=function(e,t){let i=0;const n=AGN.Lib.WM.SplitNodeEditor.getSplitPortions(e),o=n.length,r=t?o-1:3*(o-1),s=t?2:4;let a=0;const l=function(e,t,i,n){return{id:e,x:t,y:i,splitType:n,type:"split",filled:!0,iconTitle:null,editable:!0,iconComment:null,connections:[]}}(i++,s,r,e),c=n.map(e=>{const n=function(e,t,i,n){return{id:e,x:t,y:i,value:n,type:"parameter",filled:!0,iconTitle:null,editable:!0,iconComment:null}}(i++,s+(t?2:4),a,e);return l.connections.push({targetIconId:n.id}),a+=t?2:6,n});return[l,...c]}(e,t);i(n)(o)}static loadOwnWorkflow(e,t,n){$.ajax({url:AGN.url("/workflow/getWorkflowContent.action"),async:!1,data:{workflowId:e,isWithContent:t},success:i(n)})}static removeStartStop(t,i,n,o){if(n||o){var r=[],s=t.filter(function(t){var i=t.getType();return!(n&&i===e.NODE_TYPE_START||o&&i===e.NODE_TYPE_STOP)||(r.push(t),!1)});if(s.length<t.length){Array.prototype.splice.apply(t,[0,t.length].concat(s));var a=i.filter(function(e){return!(r.includes(e.source)||r.includes(e.target))});a.length<i.length&&Array.prototype.splice.apply(i,[0,i.length].concat(a))}}}static adjustPositions(t,i,n,o){var r=0,s=0;if(o){var a=function(t){var i=t.filter(function(t){return e.NODE_TYPE_START==t.getType()});0==i.length&&(i=t);return i.length>1?i.reduce(function(e,t){return e.getX()==t.getX()?e.getY()<t.getY()?e:t:e.getX()<t.getX()?e:t}):i[0]}(t);r=a.getX(),s=a.getY()}else{var l=0,c=0,d=0,u=0,h=!0;t.forEach(function(e){h?(l=c=e.getX(),d=u=e.getY(),h=!1):(l=Math.min(l,e.getX()),c=Math.max(c,e.getX()),d=Math.min(d,e.getY()),u=Math.max(u,e.getY()))}),r=Math.round((l+c)/2),s=Math.round((d+u)/2)}t.forEach(function(e){e.setCoordinates(i+e.getX()-r,n+e.getY()-s)})}}})(),(()=>{const e=AGN.Lib.WM.Definitions,t=AGN.Lib.WM.Node,i=".js-draggable-button";function n(n){this.enabled=!!n.enabled,this.$buttons=$(i);const o=this;this.$buttons.each(function(){const i=$(this);i.draggable({revert:!0,revertDuration:0,zIndex:e.Z_INDEX_DRAGGABLE_BUTTON,disabled:!o.enabled,cursorAt:function(){const e=this.helper[0].getBoundingClientRect();return[e.width/2-1,e.height/2]},appendTo:"#canvas",helper:function(){return t.createDraggable$(i.data("type"))},start:function(){n.onStart.call(o,i.data("type"))},stop:function(){n.onStop.call(o)},drag:function(t,i){const r=n.getZoom.call(o);i.position.left=Math.round(i.position.left/r/e.CANVAS_GRID_SIZE)*e.CANVAS_GRID_SIZE,i.position.top=Math.round(i.position.top/r/e.CANVAS_GRID_SIZE)*e.CANVAS_GRID_SIZE,n.onDrag.call(o,i.helper)}}).on("dblclick",function(){o.enabled&&n.onDrop.call(o,null,i.data("type"))})}),$("#viewPort").droppable({accept:i,tolerance:"fit",drop:function(t,i){const r=n.getZoom.call(o),s=$("#canvas").offset(),a=Math.round((i.offset.left-s.left)/r),l=Math.round((i.offset.top-s.top)/r);n.onDrop.call(o,i.helper,i.helper.data("type"),{x:Math.round(a/e.CANVAS_GRID_SIZE),y:Math.round(l/e.CANVAS_GRID_SIZE)})}})}n.prototype.setEnabled=function(e){this.enabled=!!e,this.$buttons.draggable("option","disabled",!e)},n.prototype.changeType=function(e,t){this.$buttons.filter(function(){return $(this).data("type")===e}).data("type",t)},AGN.Lib.WM.DraggableButtons=n})(),function(){var e=AGN.Lib.WM.Definitions,t=AGN.Lib.WM.Vertex,i=AGN.Lib.WM.VertexGroup;function n(e,t){this.layers=e,this.height=t}n.fromVertexGroup=function(e){for(var i=[],o={},r=t.filterUnvisited(e.getStartingVertices(),o),s=0;r.length;)s=Math.max(s,r.length),i.push(r),r=_.flatMap(r,function(e){return t.filterUnvisited(e.rightSiblingsOrdered(),o)});return new n(i,s)},n.prototype.align=function(t,i){var n=null;return this.layers.forEach(function(o){var r=Math.max(Math.round(e.AUTO_ALIGN_STEP_Y*(i-o.length)/2),1);if(n){var s=Math.abs(n.length-o.length);s>1&&(t+=Math.round(e.AUTO_ALIGN_EXTRA_STEP_X*s))}o.forEach(function(i){i.node.setCoordinates(t,r),r+=e.AUTO_ALIGN_STEP_Y}),t+=e.AUTO_ALIGN_STEP_X,n=o}),t},AGN.Lib.WM.AutoAlignment={align:function(t){var o=i.detectGroups(t).map(function(e){return n.fromVertexGroup(e)}),r=0;o.forEach(function(e){r=Math.max(r,e.height)});var s=1;o.forEach(function(t){s=t.align(s,r),s+=e.AUTO_ALIGN_STEP_BETWEEN_GROUPS})}}}(),(()=>{const e=AGN.Lib.WM.Definitions,t=AGN.Lib.WM.Node;class i{constructor(e){this.maxLength=e,this._undoStack=[],this._transactionStack=[],this._transaction=!1}add(e){for(;this._undoStack.length>=this.maxLength;)this._undoStack.shift();this._undoStack.push(e)}pop(){return this._undoStack.pop().reverse()}addOperation(e){this._transactionStack.push(e)}isEmpty(){return _.isEmpty(this._undoStack)}startTransaction(){this._transaction=!0}endTransaction(){this.flush(),this._transaction=!1}flush(){_.isEmpty(this._transactionStack)||this.add(this._transactionStack),this._transactionStack=[]}isTransactionStarted(){return!0===this._transaction}}AGN.Lib.WM.UndoManager=class{constructor(t,n){this.editor=t,this.undoOperations={nodeAdded:this.undoAddNode,nodeDeleted:this.undoDeleteNode,nodeMoved:this.undoMoveNode,nodeDataUpdated:this.undoSaveNodeData,connectionCreated:this.undoCreateConnection,connectionDeleted:this.undoDeleteConnection},this.manualStart=!1,this.undoStack=new i(e.MAX_UNDO_STEP),this.onChange=_.isFunction(n.onChange)?n.onChange:_.noop}undoAddNode(e){this.editor.deleteNode(e)}undoDeleteNode(e){e instanceof t?this.editor.add(t.restore(e)):this.editor.add(t.get(e))}undoCreateConnection(e){this.editor.deleteConnectionBetween(e.source,e.target)}undoDeleteConnection(e){this.editor.connect(t.get(e.source),t.get(e.target))}undoMoveNode(e){const t=this.editor.getZoom(),i=this;e.forEach(function(e){e.node.setTitleEnabled(!1)}),this.editor.batch(function(){e.forEach(function(e){var n=e.coordinates,o=e.node;i.editor.getCurrentDragMode()!==e.dragMode&&i.editor.convertCoordinates(n),o.setCoordinates(n.x,n.y),o.updateCoordinates(t)}),i.editor.updateOverlays(),i.editor.positionTitles(),i.editor.updateMinimap()}),e.forEach(function(e){e.node.setTitleEnabled(!0)})}undoSaveNodeData(e,i){i=i instanceof t?i:t.get(i),(e=e instanceof t?e:t.get(e)).setTitle(i.title),e.setOverlayTitle(i.getOverlayTitle()),e.setComment(i.getComment()),e.setDependent(i.isDependent()),e.setInRecipientsChain(i.isInRecipientsChain()),e.setData(i.getData()),e.setFilled(i.isFilled()),this.editor.positionTitles(),e.nodePopover.update()}canUndo(){return!this.undoStack.isEmpty()}startTransaction(){this.manualStart=!0,this.undoStack.startTransaction()}endTransaction(){this.undoStack.endTransaction(),this.onChange(),this.manualStart=!1}transaction(e){_.isFunction(e)&&(this.undoStack.isTransactionStarted()||(this.manualStart=!1,this.undoStack.startTransaction()),e.call(),this.manualStart||this.undoStack.endTransaction(),this.onChange())}operation(e){if(this.undoStack.isTransactionStarted()){var t=[].slice.call(arguments);t.shift(),this.undoStack.addOperation({operation:e,args:t})}}undo(){if(this.canUndo()){const e=this.undoStack.pop().sort((e,t)=>{const i=e.operation,n=t.operation;return"nodeDeleted"===i&&"nodeDeleted"!==n?-1:"nodeDeleted"!==i&&"nodeDeleted"===n?1:0});this.editor.batch(()=>{e.forEach(e=>{const t=this.undoOperations[e.operation];t?.apply(this,e.args)})}),this.onChange()}}}})(),(()=>{const e=AGN.Lib.WM.Definitions,t=AGN.Lib.WM.Utils,i=AGN.Lib.WM.Node,n=AGN.Lib.Select;AGN.Lib.WM.EditorsHelper=new function(){var o={};this.editors=[],this.curEditor,this.curEditingNode,this.getCurrentNodeId=function(){return this.curEditingNode.getId()},this.getCurrentNodeAnchorsInUse=function(){return o.getNodeAnchorsInUse?o.getNodeAnchorsInUse(this.curEditingNode):{}},this.getCurrentEditor=function(){return this.curEditor},this.assignOptions=function(e){$.extend(o,e)},this.registerEditor=function(e,t){return this.editors[e]=t},this._notAllowedToChangeDuringPause=function(i){return t.isPausedWorkflow()&&!_.union(e.NODE_TYPES_MAILING,[e.NODE_TYPE_STOP]).includes(i.getType())},this.hideNodeEditors=function(){$('#node-editor > [id$="-editor"]').hide()},this.activeNodeIcon=function(e){$(".node").removeClass("under-edit"),e.$element.addClass("under-edit")},this.toggleSelectNodeInfoMsg=function(e){$("#select-node-notification").toggle(e)},this.exitNodeEditorIfActive=function(e){this.curEditingNode===e&&(this.hideNodeEditors(),this.toggleSelectNodeInfoMsg(!0))},this.showEditDialog=function(t){const i=t.getType();this.curEditingNode=t,this.curEditor=this.editors[i],this.curEditor.fillEditor(t),this.activeNodeIcon(t),this.toggleSelectNodeInfoMsg(!1),this.hideNodeEditors();const n=this.getEditorPanel(i);var o;AGN.runAll(n.find("form")),$("#node-editor").scrollTop(0),n.show(),i===e.NODE_TYPE_RECIPIENT&&n.parent().find(".recipient-editor-select").prop("disabled",t.isDependent()||t.isInRecipientsChain()),(this.isReadOnlyMode()||this.curEditor.alwaysReadonly(t))&&((o=n).find(".disable-for-active").each((e,t)=>$(t).attr("disabled",!0)),o.find(".hide-for-active").each((e,t)=>$(t).hide()),o.find(':input:enabled[type!="hidden"]').not(":button, .select2, select, .js-datepicker").each((e,t)=>{$(t).attr(["radio","checkbox"].includes($(t).prop("type"))?"disabled":"readonly",!0)}),o.find(":input:enabled.select2, .select2 .btn, select").not(".disabled, :disabled").each(function(e,t){"text"===$(t).prop("type")||$(t).is("input, select")?$(t).attr("disabled",!0):$(t).prop("disabled",!0)}),o.find(".js-datepicker").each(function(e,t){$(t).attr("disabled",!0)})),!this.curEditor.saveOnOpen||this.isReadOnlyMode()||this.curEditor.alwaysReadonly(t)||this.curEditor.save()},this.isReadOnlyMode=function(){return t.checkActivation(!i.isMailingNode(this.curEditingNode))||this._notAllowedToChangeDuringPause(this.curEditingNode)},this.showIconCommentDialog=function(e){const t=this;this.curEditingNode=e,this.curEditor=this.editors["icon-comment"],this.curEditor.fillEditor(e),this.getEditorPanel("icon-comment").dialog({open:function(){t.getEditorPanel("icon-comment").parent().find(".ui-dialog-titlebar").hide()},width:300,height:"auto",minHeight:"auto",modal:!0,resizable:!1,fluid:!0,position:{my:"left top",at:"left bottom",of:e.get$()}})},this.saveIconComment=function(e){const t=this.curEditingNode;o.getUndoManager().transaction(function(){o.getUndoManager().operation("nodeDataUpdated",t,_.cloneDeep(t)),t.setComment(e),o.onChange(t)}),t.nodePopover?.update()},this.saveCurrentEditorWithUndo=function(e){_.defer(()=>{o.getUndoManager().startTransaction(),this.saveCurrentEditor(e,()=>o.getUndoManager().endTransaction())})},this.saveCurrentEditor=function(e,t){t=_.isFunction(t)?t:_.noop;var i=this,n=this.curEditingNode;o.getUndoManager().operation("nodeDataUpdated",n,_.cloneDeep(n),i.curEditor);var r=i.curEditor.saveEditor();if(i.isNodeIsMailing(n)){var s=r.mailingId;e&&e.checkDifferentMailingLists(s,function(n){i.mailingSpecificSave(n,r,e),t()},function(n){i.curEditor.storedMailingContent=n,i.curEditor.storedMailingId=s,i.curEditor.storedEditorData=r,e.initOneMailinglistWarningDialog(e),t()})}else $.extend(n.getData(),r),n.isFilled()||n.setFilled(!0),n.isFilled()&&_.isFunction(i.curEditor.isSetFilledAllowed)&&(i.curEditor.isSetFilledAllowed()||n.setFilled(!1)),o.supplement&&o.supplement(n),o.onChange&&o.onChange(n),t()},this.resave=function(e){var t=this.curEditingNode,i=this.curEditor;try{this.curEditingNode=e,this.curEditor=this.editors[e.getType()],this.curEditor.fillEditor(e),this.saveCurrentEditor()}finally{this.curEditingNode=t,this.curEditor=i}},this.modify=function(e,t){o.getUndoManager().operation("nodeDataUpdated",e,_.cloneDeep(e)),t(e),o.onChange&&o.onChange(e)},this.isNodeIsMailing=function(t){return e.NODE_TYPES_MAILING.includes(t.getType())},this.mailingSpecificSave=function(e,t,i){const n=this.curEditingNode,r=n.getData();$.extend(r,t),n.isFilled()&&_.isFunction(this.curEditor.isSetFilledAllowed)&&(this.curEditor.isSetFilledAllowed()||n.setFilled(!1)),o.supplement&&o.supplement(n,i,e),o.onChange&&o.onChange(n),n.nodePopover.update(),n.toggleInUseBadge()},this.mailingSpecificSaveAfterMailinglistCheckModal=function(e){this.curEditor.storedMailingContent.mailinglistId=e.configuredMailingData.mailinglistId,this.mailingSpecificSave(this.curEditor.storedMailingContent,this.curEditor.storedEditorData,e)},this.getEditorPanel=function(e){return $(`#${"stop"===e?"start":e}-editor`)},this.formToObject=function(e){const t=$(`form[name="${e}"]`),i=_.groupBy(t.serializeArray(),"name"),n=new Set(t.find("select.dynamic-tags").map((e,t)=>t.name).get()),o=Object.entries(i).map(([e,t])=>({name:e,value:n.has(e)?t.map(e=>e.value):t[t.length-1].value}));let r={};return $.each(o,function(){if(-1!=this.name.indexOf("[")){var e=this.name.substring(0,this.name.indexOf("["));null==r[e]&&(r[e]=[]);var t=this.name.substring(this.name.indexOf("[")+1,this.name.indexOf("]"));if(null==r[e][t]&&(r[e][t]={}),-1!=this.name.indexOf(".")){var i=this.name.substring(this.name.indexOf(".")+1);r[e][t][i]=this.value}else r[e][t]=this.value}else r[this.name]=this.value||""}),$(`form[name="${e}"] [type="checkbox"]`).each(function(){r[this.name]=$(this).prop("checked")}),$(`form[name="${e}"] select.dynamic-tags`).each(function(){r[this.name]||(r[this.name]=[])}),r},this.fillFormFromObject=function(e,t,i,n){if("string"==typeof t)this.fillFormFromObjectItem(e,i,i,t||n);else for(var o in t)if(t.hasOwnProperty(o)){var r=t[o];!r&&n&&n[o]&&(r=n[o]),this.fillFormFromObjectItem(e,i,o,r)}},this.fillFormFromObjectItem=function(e,t,i,o){const r=$(`form[name="${e}"] [name="${t}${i}"]`);if("[object Array]"!==Object.prototype.toString.call(o)||r.is("select.dynamic-tags"))switch(r.attr("type")){case"checkbox":r.prop("checked",Boolean(o));break;case"radio":r.filter(`[value="${o}"]`).prop("checked",!0);break;default:if("SELECT"===r.prop("tagName"))if(r.hasClass("dynamic-tags")){if(o instanceof Array){const e=n.get(r);o.forEach(t=>{e.addOptionIfMissing(t),e.selectOption(t)})}else if("string"==typeof o){const n=$.trim(o).split(/[,;\s\n\r]+/).filter(e=>!!e);this.fillFormFromObjectItem(e,t,i,n)}}else r.val(o),this.initSelectWithValueOrChooseFirst(r,o);else r.val(o)}else for(let t=0;t<o.length;t++)this.fillFormFromObject(e,o[t],`${i}[${t}].`)},this.processForward=function(e,t,i,n){var o=[];o.push("nodeId="+this.curEditingNode.getId()),o.push("elementId="+encodeURIComponent(t)),n&&o.push(n);const r={forwardName:e,forwardParams:o.join(";")};this.curEditor.safeToSave&&this.saveCurrentEditor(),i(!1,r)},this.getFirstOptionValue=function(e){return n.get(e).getFirstValue()},this.resetSelect=function(e){n.get(e).clear()},this.initSelectWithFirstValue=function(e){n.get(e).selectFirstValue()},this.initSelectWithValueOrChooseFirst=function(e,t){n.get(e).selectValueOrSelectFirst(t)},this.getNodesByTypes=function(e){return o.getNodesByTypes?o.getNodesByTypes(e):[]},this.getNodesByType=function(e){return this.getNodesByTypes([e])},this.getNodesByIncomingConnections=function(e){return o.getNodesByIncomingConnections?o.getNodesByIncomingConnections(e):[]},this.getNodesByOutgoingConnections=function(e){return o.getNodesByOutgoingConnections?o.getNodesByOutgoingConnections(e):[]},this.getFirstIncomingChain=function(){return this.curEditingNode&&o.getFirstIncomingChain?o.getFirstIncomingChain(this.curEditingNode):[]},this.forEachPreviousNode=function(e){var t=this;return this.curEditingNode&&o.forEachPreviousNode?o.forEachPreviousNode(this.curEditingNode,function(i){return e.call(t,i)}):[]},this.deleteNode=function(e){o.deleteNodeById&&o.deleteNodeById(e)},this.openNode=function(e,t){o.editNode&&o.editNode(e,t)}}})(),(()=>{const e=AGN.Lib.WM.Definitions,i=AGN.Lib.WM.Node,n=AGN.Lib.WM.EditorsHelper,o=AGN.Lib.WM.NodeTitleHelper,r=AGN.Lib.WM.Utils,s=AGN.Lib.Messages,a=AGN.Lib.WM.Dialogs,l=AGN.Lib.Select;AGN.Lib.WM.MailingEditorHelper=function(c,d){this.MAILING_TYPE_ACTIONBASED=1,this.MAILING_TYPE_DATEBASED=2,this.MAILING_TYPE_FOLLOWUP=3,this.node={},this.mailingsStatus="all",this.defaultMailingsSort=c.defaultMailingsSort,this.defaultMailingsOrder=c.defaultMailingsOrder,this.mailingsSort=this.defaultMailingsSort,this.mailingsOrder=this.defaultMailingsOrder,this.formNameJId='form[name="'+c.form+'"]',this.containerId=c.container,this.mailingType=parseInt(c.mailingType),this.mediaType=c.mediaType,this.mediatypes=c.mediatypes,this.mailingTypesForLoading=c.mailingTypesForLoading,this.statusName=c.mailingStatus,this.selectName=c.selectName,this.selectNameJId="select[name="+c.selectName+"]",this.mailingId=0,this.prevMailingId=0,this.showCreateEditLinks=c.showCreateEditLinks,this.$dropdown=null,c.$dropdown&&(this.$dropdown=c.$dropdown),this.isChangeDecisionOptions=c.isFollowUpBaseMailing,this.followUpContainer=c.followUpContainer,this.advertisingAdditionalOptions=c.advertisingAdditionalOptions,this.nodesChain=[],this.mailingData={},this.configuredMailingData=null;var u=this;function h(t){let i=0;return n.curEditingNode=t,n.forEachPreviousNode(function(t){if(t.type===e.NODE_TYPE_RECIPIENT)return i=t.data.mailinglistId,!1}),i}this.fillEditorBase=function(e){this.node=e,r.checkActivation()?this.mailingsStatus="all":this.mailingsStatus=$(this.formNameJId).find("input[checked=checked]").val()||"all",this.mailingsSort=this.defaultMailingsSort,this.mailingsOrder=this.defaultMailingsOrder,this.cleanOptions(),this.hideSendSettings(),this.changeDecisionOptionsSet($(this.containerId),this.isChangeDecisionOptions)},this.cleanOptions=function(){$(this.containerId+" #"+this.statusName+"_all").attr("checked","checked"),this.activateInputs(),this.setSelectMailingOptions(this.node.data[this.selectName]),this.getMailingsByWorkStatus(this.mailingsStatus,this.mailingsSort,this.mailingsOrder,this.node.data.mailingId)},this.onMailingsStatusChange=function(e){this.setSelectMailingOptions(0),this.getMailingsByWorkStatus(e,this.mailingsSort,this.mailingsOrder),this.changeDecisionOptionsSet($(this.containerId),this.isChangeDecisionOptions)},this.onMailingSelectChange=function(e){this.setSelectMailingOptions(e),this.changeDecisionOptionsSet($(this.containerId),this.isChangeDecisionOptions)},this.changeDecisionOptionsSet=function(e,t){if(t){const t=this.mailingId,i=$(e.find(this.followUpContainer)),n=this.advertisingAdditionalOptions;i.find(".advertisingOption").remove(),t&&$.get(AGN.url(`/mailing/ajax/${t}/isAdvertisingContentType.action`),e=>{e?.success&&i.append(AGN.Lib.Template.text("followupAdvertisingOptions",{items:n}))})}},this.setMailingId=function(e){this.prevMailingId=this.mailingId,this.mailingId=e,this.$dropdown&&(this.mailingId>0?this.$dropdown.show():this.$dropdown.hide())},this.setSelectMailingOptions=function(e){this.setMailingId(e),this.showCreateEditLinks&&this.setMailingLinks(e)},this.setMailingLinks=function(e){const t=$(this.getMailingLink(e));t.addClass("btn btn-icon btn-primary"),$(this.containerId+" #mailing_create_edit_link").html(t),AGN.Lib.CoreInitializer.run("tooltip",t)},this.getMailingLink=function(e){return e&&"0"!==e?r.checkActivation()?`<a href="${AGN.url(`/mailing/${e}/settings.action`)}" data-tooltip="${t("workflow.mailing.edit")}">\n                <i class="icon icon-pen"></i>\n              </a>`:`<a href="#" data-action="mailing-editor-edit" data-tooltip="${t("workflow.mailing.edit")}">\n                    <i class="icon icon-pen"></i>\n                </a>`:`<a href="#" data-action="mailing-editor-new" data-tooltip="${t("workflow.mailing.new")}">\n                    <i class="icon icon-plus"></i>\n                </a>`},this.showSecurityQuestion=function(){if(this.setSecurityQuestion(),this.setIsUsedInCMAttr(),this.isSentMailing(this.mailingIsSent)||this.mailingIsUsedInCM){const e=this.getSelectedMailingOption();a.mailingInUseDialog(e.html()).then(()=>n.getCurrentEditor().copyMailing()).fail(()=>{this.mailingId=this.prevMailingId||0,this.mailingSelect().selectValue(this.prevMailingId)});const t=$(".modal"),i=AGN.Lib.Confirm.get(t);return t.on("modal:close",()=>i.negative()),!1}return!0},this.isSentMailing=function(e){return"mailing.status.sent"==e||"mailing.status.scheduled"==e||"mailing.status.norecipients"==e},this.getMailingsByWorkStatus=function(e,i,o,r){const s=this,a=this.$mailingSelect(),c=l.get(a);c.setReadonly(!0),$.ajax({url:AGN.url("/workflow/getMailingsByWorkStatus.action"),data:{mailingTypes:this.mailingTypesForLoading.join(","),mediatypes:this.mediatypes?this.mediatypes.join(","):"",status:e,sort:i,order:o},success:function(i){c.resetOptions(),c.addOption(0,t("workflow.defaults.no_mailing")),i.forEach(function(e){const t=$("<option></option>",{value:e.MAILING_ID,text:e.SHORTNAME,selected:r==e.MAILING_ID});s.isSentMailing(e.WORK_STATUS)&&t.css("color","#808080"),t.attr({status:e.WORK_STATUS,senddate:e.SENDDATE}),t.data({status:e.WORK_STATUS,"send-date":e.SENDDATE,"dependent-campaigns":e.USEDINWORKFLOWS||""}),a.append(t)}),c.setReadonly(!1),s.mailingsStatus=e,n.initSelectWithValueOrChooseFirst(a,s.mailingId)}})},this.disableInputs=function(){$(this.containerId+' [name="'+this.statusName+'"]').attr("disabled","disabled")},this.activateInputs=function(){$(this.containerId+' [name="'+this.statusName+'"]').removeAttr("disabled")},this.setNodeFields=function(){this.node.setFilled(parseInt(this.mailingId,10)>0)},this.setSecurityQuestion=function(){var e=this.getSelectedMailingOption();this.mailingIsSent="",parseInt(this.mailingId,10)>0&&(this.mailingIsSent=e.data("status"))},this.setIsUsedInCMAttr=function(){var t=this.getSelectedMailingOption(),i=t.data("dependent-campaigns"),n=t.val();if(this.mailingIsUsedInCM=!1,parseInt(this.mailingId,10)>0&&n==this.mailingId&&i){var o=e.workflowId||0;i>0&&(this.mailingIsUsedInCM=!(o>0)||o!==i)}},this.getSelectedMailingOption=function(){return $(this.formNameJId+" "+this.selectNameJId+" option[value="+this.mailingId+"]")},this.getSelectedDecisionOption=function(){var e="decisionCriterion",t=$(this.formNameJId+' select[name="'+e+'"]').val();return $(this.formNameJId+' select[name="'+e+'"] option[value='+t+"]")},this.createNewMailing=function(t=_.noop){if(AGN.Lib.Messaging.unsubscribe("workflow:mailingCreated"),!(h(this.node)>0))return void s.warn("error.workflow.notAddedMailingList");let i="/mailing/create.action";this.node.type===e.NODE_TYPE_MAILING_MEDIATYPE_POST?i="/mailing/new.action":this.node.type===e.NODE_TYPE_MAILING_MEDIATYPE_SMS&&(i=e.constants.forwards.MAILING_CREATE_STANDARD.url),this.openSelectTemplateToCreateMailingView(i,{mediaType:this.mediaType||0}),AGN.Lib.Messaging.subscribe("workflow:mailingCreated",({mailingId:e,mailingName:i})=>{t(e,i),this.node.getData().mailingId=e,o.addMailingName(e,i),o.updateTitle(this.node,!0,!0),n.saveCurrentEditorWithUndo(),AGN.Lib.Messages.defaultSaved()})},this.openSelectTemplateToCreateMailingView=function(t,i={}){return $.get(AGN.url(t),_.extend({workflowId:e.workflowId,workflowForwardParams:this._getCreateMailingForwardParams()},i)).done(e=>AGN.Lib.Page.render(e))},this._getCreateMailingForwardParams=function(){const e=this.formNameJId+" "+this.selectNameJId,t={nodeId:n.curEditingNode.getId(),elementId:encodeURIComponent(e),mailingType:this.mailingType,workflowMailinglistId:h(this.node)};return this.mailingType===this.MAILING_TYPE_FOLLOWUP&&(t.workflowFollowUpParentMailing=this.node.data.baseMailingId,t.workflowFollowUpDecisionCriterion=this.node.data.decisionCriterion),n.curEditor.safeToSave&&n.saveCurrentEditor(),Object.entries(t).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`).join(";")},this.processCopyAndEditMailingForward=function(e,t,i,o){$("#forwardTargetItemId").val(e);const r=["mailingType="+u.mailingType];this.mailingType===this.MAILING_TYPE_FOLLOWUP&&(r.push("workflowFollowUpParentMailing="+this.node.data.baseMailingId),r.push("workflowFollowUpDecisionCriterion="+this.node.data.decisionCriterion)),n.processForward(t,i+" "+o,d,r.join(";"))},this.editMailing=function(e){this.processCopyAndEditMailingForward(this.mailingId,e,this.formNameJId,this.selectNameJId)},this.copyMailing=function(e){this.processCopyAndEditMailingForward(this.mailingId,e,this.formNameJId,this.selectNameJId)},this.trySupplementChain=function(e,t,i){if(e.length>0){this.configuredMailingData=p(e),this.nodesChain=e,this.mailingData=t;var n=g(u,!0);n.length?a.confirmMailingDataTransfer(n).done(function(e){u.transferMailingData(e),u.supplementChain(i)}).fail(function(){u.transferMailingData(),u.supplementChain(i)}):u.supplementChain(i)}},this.checkDifferentMailingLists=function(t,i,o){$.ajax({url:AGN.url(`/workflow/mailing/${t}/info.action`),method:"GET",async:!1,success:t=>{var r=n.getFirstIncomingChain();this.configuredMailingData=p(r),this.nodesChain=r,this.mailingData=t;const s=r.filter(t=>t.getType()===e.NODE_TYPE_MAILING).length,a=this.configuredMailingData.mailinglistId;s>1&&0!=a&&a!=t.mailinglistId?o(t):i(t)}})};var p=function(t){for(var i={parameterValue:0,campaignId:0,mailinglistId:0,targets:[],date:null},n=t.length-1;n>=0;n--){var o=t[n],r=o.getData();switch(o.getType()){case e.NODE_TYPE_PARAMETER:i.parameterValue=r.value;break;case e.NODE_TYPE_ARCHIVE:i.campaignId=r.campaignId;break;case e.NODE_TYPE_RECIPIENT:0==i.mailinglistId&&(i.mailinglistId=r.mailinglistId),null!==r.targets&&r.targets.forEach(function(e){i.targets.includes(e)||i.targets.push(parseInt(e))});break;case e.NODE_TYPE_START:r.date?(i.date=w(r.date),i.date.setHours(r.hour),i.date.setMinutes(r.minute)):i.date=null;break;case e.NODE_TYPE_DEADLINE:r.deadlineType==e.constants.deadlineTypeFixedDeadline?r.date?(i.date=w(r.date),i.date.setHours(r.hour),i.date.setMinutes(r.minute)):i.date=null:r.deadlineType==e.constants.deadlineTypeDelay&&null!=i.date&&(r.timeUnit==e.constants.deadlineTimeUnitMinute?i.date.setMinutes(i.date.getMinutes()+parseInt(r.delayValue)):r.timeUnit==e.constants.deadlineTimeUnitHour?i.date.setHours(i.date.getHours()+parseInt(r.delayValue)):r.timeUnit==e.constants.deadlineTimeUnitDay&&(i.date.setDate(i.date.getDate()+parseInt(r.delayValue)),(r.useTime||"true"==r.useTime)&&(i.date.setMinutes(i.date.getMinutes()+parseInt(r.minute)),i.date.setHours(i.date.getHours()+parseInt(r.hour)))))}}return i},g=function(t,i){var n=t.configuredMailingData,o=t.mailingData,r=[],s=[],a=[];0==o.mailinglistId?a.push(e.MAILING_PARAM_MAILING_LIST):0==n.mailinglistId?r.push(e.MAILING_PARAM_MAILING_LIST):n.mailinglistId!=o.mailinglistId&&(i?s.push(e.MAILING_PARAM_MAILING_LIST):r.push(e.MAILING_PARAM_MAILING_LIST));var l=n.targets,c=o.targetGroupIds;if(null==c||0==c.length?a.push(e.MAILING_PARAM_TARGET_GROUPS):null==l||0==l.length?r.push(e.MAILING_PARAM_TARGET_GROUPS):C(n,o)||(i?s.push(e.MAILING_PARAM_TARGET_GROUPS):r.push(e.MAILING_PARAM_TARGET_GROUPS)),e.constants.isAltgExtended){var d=n.altgs,u=o.altgIds;null==u||0==u.length?a.push(e.MAILING_PARAM_ALTGS):null==d||0==d.length?r.push(e.MAILING_PARAM_ALTGS):S(n,o)||(i?s.push(e.MAILING_PARAM_TARGET_GROUPS):r.push(e.MAILING_PARAM_TARGET_GROUPS))}var h=t.getParameterValue(o.splitBase,o.splitPart);null==h?a.push(e.MAILING_PARAM_LIST_SPLIT):0==n.parameterValue?r.push(e.MAILING_PARAM_LIST_SPLIT):n.parameterValue!=h&&(i?s.push(e.MAILING_PARAM_LIST_SPLIT):r.push(e.MAILING_PARAM_LIST_SPLIT)),0==o.campaignId?a.push(e.MAILING_PARAM_ARCHIVE):0==n.campaignId?r.push(e.MAILING_PARAM_ARCHIVE):n.campaignId!=o.campaignId&&(i?s.push(e.MAILING_PARAM_ARCHIVE):r.push(e.MAILING_PARAM_ARCHIVE));var p=n.date,g=y(o),m=b(o);return null==g&&null==m?a.push(e.MAILING_PARAM_PLANNED_DATE):null==p?null!=g?r.push(e.MAILING_PARAM_PLANNED_DATE):r.push(e.MAILING_PARAM_SEND_DATE):(w(g)>w(p)?i?s.push(e.MAILING_PARAM_PLANNED_DATE):r.push(e.MAILING_PARAM_PLANNED_DATE):g&&w(g)<w(p)&&a.push(e.MAILING_PARAM_PLANNED_DATE),m>p?i?s.push(e.MAILING_PARAM_SEND_DATE):r.push(e.MAILING_PARAM_SEND_DATE):m&&m<p&&a.push(e.MAILING_PARAM_SEND_DATE)),f(t,a),i?s:r},f=function(t,i){for(var n=t.configuredMailingData,o=t.mailingData,r=0;r<i.length;r++)switch(i[r]){case e.MAILING_PARAM_MAILING_LIST:o.mailinglistId=n.mailinglistId;break;case e.MAILING_PARAM_TARGET_GROUPS:o.targetGroupIds=n.targets;break;case e.MAILING_PARAM_ALTGS:o.altgIds=n.altgs;break;case e.MAILING_PARAM_ARCHIVE:o.campaignId=n.campaignId;break;case e.MAILING_PARAM_LIST_SPLIT:o.splitBase="",o.splitPart="";break;case e.MAILING_PARAM_PLANNED_DATE:var s=w(n.date);o.planDate=s?s.getTime():0;break;case e.MAILING_PARAM_SEND_DATE:o.sendDate=w(n.date),n.date&&(o.sendHour=n.date.getHours(),o.sendMinute=n.date.getMinutes())}};this.transferMailingData=function(e){f(u,e||g(u,!0))},this.supplementChain=function(t){for(var i=g(this,!1),o=this.mailingData,r=this.configuredMailingData,s=this.nodesChain,a=!1,l=!1,c=1;c<s.length;c++)if(e.NODE_TYPES_MAILING.includes(s[c].getType())){s.splice(c+1),l=!0;break}if(!l&&(i.includes(e.MAILING_PARAM_PLANNED_DATE)||i.includes(e.MAILING_PARAM_SEND_DATE))){if(e.NODE_TYPE_START==s[s.length-1].getType())a=!0;else 0==n.getNodesByType(e.NODE_TYPE_START).length&&o.mailingType!==this.MAILING_TYPE_ACTIONBASED&&o.mailingType!==this.MAILING_TYPE_DATEBASED&&(a=!0);a&&this.supplementSingleNode(e.NODE_TYPE_START,function(t){var s=t.getData();if(i.includes(e.MAILING_PARAM_PLANNED_DATE)){s.date=y(o);var a=r.date;a&&(s.hour=a.getHours(),s.minute=a.getMinutes()),n.resave(t)}else i.includes(e.MAILING_PARAM_SEND_DATE)&&(s.date=b(o),s.hour=s.date.getHours(),s.minute=s.date.getMinutes())})}i.includes(e.MAILING_PARAM_LIST_SPLIT)&&this.supplementSingleNode(e.NODE_TYPE_PARAMETER,function(e){e.getData().value=u.getParameterValue(o.splitBase,o.splitPart)}),i.includes(e.MAILING_PARAM_ARCHIVE)&&this.supplementSingleNode(e.NODE_TYPE_ARCHIVE,function(e){e.getData().campaignId=o.campaignId}),(i.includes(e.MAILING_PARAM_MAILING_LIST)||i.includes(e.MAILING_PARAM_TARGET_GROUPS))&&this.supplementSingleNode(e.NODE_TYPE_RECIPIENT,function(t){var n=t.getData();i.includes(e.MAILING_PARAM_MAILING_LIST)&&(n.mailinglistId=o.mailinglistId,t.setDependent(!0)),i.includes(e.MAILING_PARAM_TARGET_GROUPS)&&(n.targets=o.targetGroupIds,e.constants.isAltgExtended?n.targetsOption="ONE_TARGET_REQUIRED":n.targetsOption=e.constants.accessLimitTargetId>0?"ALL_TARGETS_REQUIRED":"ONE_TARGET_REQUIRED"),e.constants.isAltgExtended&&i.includes(e.MAILING_PARAM_ALTGS)&&(n.altgs=o.altgIds)}),a||!i.includes(e.MAILING_PARAM_PLANNED_DATE)&&!i.includes(e.MAILING_PARAM_SEND_DATE)||this.supplementSingleNode(e.NODE_TYPE_DEADLINE,function(t){var n=t.getData();if(i.includes(e.MAILING_PARAM_PLANNED_DATE)){n.date=y(o);var s=r.date;s&&(n.date.setHours(s.getHours()),n.date.setMinutes(s.getMinutes()))}else i.includes(e.MAILING_PARAM_SEND_DATE)&&(n.date=b(o));n.deadlineType=e.constants.deadlineTypeFixedDeadline,n.hour=n.date.getHours(),n.minute=n.date.getMinutes()}),t(s)},this.supplementSingleNode=function(t,i){var n;switch(t){case e.NODE_TYPE_START:n=!1;break;case e.NODE_TYPE_PARAMETER:n=[];break;case e.NODE_TYPE_ARCHIVE:n=[e.NODE_TYPE_PARAMETER];break;case e.NODE_TYPE_RECIPIENT:n=[e.NODE_TYPE_PARAMETER,e.NODE_TYPE_ARCHIVE];break;case e.NODE_TYPE_DEADLINE:n=[e.NODE_TYPE_PARAMETER,e.NODE_TYPE_ARCHIVE,e.NODE_TYPE_RECIPIENT];break;default:return void console.error("Unexpected supplement node type: "+t)}m(t,i)||v(t,n,i)};var m=function(e,t){for(var i=u.nodesChain,o=1;o<i.length;o++){var r=i[o];if(e==r.getType())return t(r),n.resave(r),!0}return!1},v=function(e,t,n){var o=u.nodesChain,r=i.create(e);if(n(r),!1===t)o.push(r);else{for(var s=1;s<o.length;s++){var a=o[s];if(!t.includes(a.getType()))return void o.splice(s,0,r)}o.push(r)}};this.acceptOneMailinglistPerCampaign=function(){n.mailingSpecificSaveAfterMailinglistCheckModal(u)},this.$mailingSelect=function(){return $(this.formNameJId+" "+this.selectNameJId)},this.mailingSelect=function(){return l.get(this.$mailingSelect())},this.validateEditor=function(e){let t=!1;if($(`${this.containerId} .delivery-settings`).exists()){const e=$(`${this.containerId} [name="maxRecipients"]`).val();parseInt(e)!=e?(s.warn("error.workflow.wrongMaxRecipientsFormat"),t=!0):parseInt(e)<0?(s.warn("error.workflow.maxRecipientsLessThanZero"),t=!0):parseInt(e)>1e9&&(s.warn("error.workflow.maxRecipientsTooBig"),t=!0)}if($(`${this.containerId} .security-notifications-settings`).exists()&&$(`${this.containerId} [name="enableNotifications"]`).is(":checked")){const e=$(`${this.containerId} [name="clearanceEmails"]`).val(),i=$(`${this.containerId} [name="clearanceThreshold"]`),n=i.val();!e.length||e.every(e=>""===e.trim())?(s.warn("error.workflow.emptyEmail"),t=!0):AGN.Lib.Helpers.isValidEmails(e)||(s.warn("error.workflow.wrongEmail"),t=!0),""!==n&&n<=0&&(s.warn("error.workflow.notPositiveNumber",i.parent().text().trim()),t=!0)}$(`${this.formNameJId} ${this.selectNameJId}`).val()<=0&&(s.warn("error.workflow.noMailing"),t=!0),t||(e?e():n.saveCurrentEditor())},this.toggleSendSettings=function(e){"none"==$("#sendSettings_"+e).css("display")?($("#sendSettingsToggle_"+e).removeClass("toggle_closed"),$("#sendSettingsToggle_"+e).addClass("toggle_open")):($("#sendSettingsToggle_"+e).removeClass("toggle_open"),$("#sendSettingsToggle_"+e).addClass("toggle_closed")),$("#sendSettings_"+e).toggle("blind",200)},this.hideSendSettings=function(){$(".wm-mailing-send-settings-link").removeClass("toggle_open"),$(".wm-mailing-send-settings-link").addClass("toggle_closed"),$(".wm-mailing-send-settings").css("display","none")},this.getParameterValue=function(e,t){if(e.length>4){for(var i=0;i<e.length/2;i++)if(i+1==t)return e.substring(2*i,2*(i+1))}else for(i=0;i<e.length/2;i++)if(e.substring(2*i,2*(i+1))==t)return e.substring(2*i,2*(i+1));return null},this.initOneMailinglistWarningDialog=function(e){a.simpleDialog(e.getSelectedMailingOption().html(),t("workflow.mailinglist.onlyOne")).then(()=>e.acceptOneMailinglistPerCampaign()).fail(()=>{this.mailingId=this.prevMailingId||0,this.mailingSelect().selectValue(this.prevMailingId)});const i=$(".modal"),n=AGN.Lib.Confirm.get(i);i.on("modal:close",()=>n.negative())};var b=function(e){return function(e){return null!=e.sendDate&&null!=e.sendDate&&null!=e.sendHour&&null!=e.sendMinute}(e)?new Date(e.sendDate+"T"+e.sendHour+":"+e.sendMinute+":00"):null},y=function(e){return function(e){return e.planDate>0}(e)?new Date(e.planDate):null},w=function(e){return null==e?null:new Date(e.getFullYear(),e.getMonth(),e.getDate())},C=function(e,t){var i=e.targets,n=t.targetGroupIds;if(null==i&&null==n)return!0;if(i.length!=n.length)return!1;for(var o=0;o<n.length;o++)if(!x(i,n[o]))return!1;return!0},S=function(e,t){var i=e.altgs,n=t.altgIds;if(null==i&&null==n)return!0;if(i.length!=n.length)return!1;for(var o=0;o<n.length;o++)if(!x(i,n[o]))return!1;return!0},x=function(e,t){return-1!=e.indexOf(t)}}})(),function(){const e=AGN.Lib.WM.EditorsHelper;AGN.Lib.WM.MailingSelector=function(i,n,o){this.formNameJId='form[name="'+i+'"]',this.selectNameJId="select[name="+n+"]",this.defaultSortField="date",this.mailingId=0,this.noMailingOption=o,this.cleanOptions=function(){this.getAllMailingSorted(this.defaultSortField,"asc")},this.onMailingSelectChange=function(e){},this.setMailingId=function(e){this.mailingId=e},this.getAllMailingSorted=function(i,n){var o=this,r=$(this.formNameJId+" "+this.selectNameJId),s=r.val();null!=s&&(o.mailingId=s),r.attr("readonly","readonly"),$.ajax({type:"GET",url:AGN.url("/workflow/getAllMailingSorted.action"),data:{sortField:i,sortDirection:n},success:function(i){r.html(""),o.noMailingOption&&r.append('<option value="0">'+t("workflow.defaults.no_mailing")+"</option>");for(var n=0;n<i.length;n++)r.append('<option  value="'+i[n].mailingID+'">'+i[n].shortname+"</option>");r.removeAttr("readonly"),0==o.mailingId&&0==o.noMailingOption&&i.length>0?r.val(i[0].mailingID):r.val(o.mailingId),e.initSelectWithValueOrChooseFirst(r,r.val())}})},this.getSelectedMailingOption=function(){return $(this.formNameJId+" "+this.selectNameJId+" option[value="+this.mailingId+"]")}}}(),function(){const e=AGN.Lib.WM.Definitions;AGN.Lib.WM.GridBackground=class{constructor(e){this.canvas=e,this.$gridBackground=$("#grid-background"),this.scale=1,this.#ct(),this.canvas.setOnMove(()=>this.move())}get shown(){return!this.$gridBackground.hasClass("hidden")}setZoom(e){this.scale=e,this.move(),this.#ct()}toggle(){this.$gridBackground.toggleClass("hidden")}move(){const{x:e,y:t}=this.canvas.getPosition(),i=this.#dt(e),n=this.#dt(t);this.$gridBackground.css({left:"-"+i+"px",top:"-"+n+"px",width:"calc(100% + "+i+"px)",height:"calc(100% + "+n+"px)"})}#ct(){const t=e.NODE_SIZE*this.scale;this.$gridBackground.css("background-size",t+"px "+t+"px")}#dt(t){if(t<=0)return-1*t;const i=e.NODE_SIZE*this.scale;return i-i*(t/i%1)}}}(),(()=>{const e=AGN.Lib.WM.Definitions,i=AGN.Lib.WM.Node,n=AGN.Lib.WM.Vertex,o=AGN.Lib.WM.VertexGroup,r=AGN.Lib.WM.NodeTitleHelper,s=AGN.Lib.WM.Canvas,a=AGN.Lib.WM.GridBackground,l=AGN.Lib.WM.ConnectionConstraints,c=AGN.Lib.WM.DraggableButtons,d=AGN.Lib.WM.AutoAlignment,u=AGN.Lib.WM.UndoManager,h=AGN.Lib.WM.EditorsHelper,p=AGN.Lib.WM.Dialogs,g=AGN.Lib.WM.Snippets,f=AGN.Lib.ContextMenu,m=AGN.Lib.Helpers,v=AGN.Lib.Messages,b=AGN.Lib.WM.Utils,y=function(){document.activeElement&&$(document.activeElement).is("input, textarea")&&document.activeElement.blur()},w=function(e,t){if(t){var i=e.origin.getOverlay("label");i?(i.setLabel(t),i.show()):e.origin.addOverlay(["Label",{location:.5,id:"label",cssClass:"connection-label",label:t}])}else e.origin.hideOverlay("label")},C=function(e){$("#deleteButton").toggleClass("disabled",!e),$("#deleteItem").prop("disabled",!e)},S=function(e){$("#undoButton").toggleClass("disabled",!e),$("#undoItem").prop("disabled",!e)};class x{constructor(t,n,o){this.$viewport=$("#viewPort"),this.$container=$("#canvas"),this.$titlesContainer=this.$container.find("#icon-titles-container"),this.canvas=new s(this.$container),this.canvasZoomHandler=null,this.instance=jsPlumb.getInstance(x.defaults(this.$container)),this.editable=!!t,this.lastAllocatedId=0,this.drag=null,this.chainModeEnabled=!1,this.multiConnectionEnabled=!1,this.scale=1,this.dragMode=e.DEFAULT_DRAG_MODE,this.gridBackground=new a(this.canvas),this.instance.isHoverSuspended=()=>!this.editable;const r=this;this.canvas.setOnZoom(e=>{this.instance.setZoom(e),this.gridBackground.setZoom(e),this.canvasZoomHandler&&this.canvasZoomHandler.call(null,e)}),this.draggableButtons=new c({enabled:!!t,getZoom:()=>r.getZoom(),onStart:function(e){this._connections=r.getConnections(),this._connectionsHoverAllowed=!i.isExpandableType(e),this._occupiedAreas=r.getNodes$().get().map(e=>i.getCollisionBox($(e)))},onStop:function(){this._connections.forEach(e=>$(e.origin.canvas).removeClass("js-connection-drop-forbidden")),this._connections=null},onDrag:function(e){const t=i.getCollisionBox(e),n=this._occupiedAreas.some(e=>i.detectBoxCollision(t,e));e.toggleClass("js-collision-detected",n),this._connections.forEach(e=>{$(e.origin.canvas).toggleClass("js-connection-drop-forbidden",e.origin.isHover()&&!this._connectionsHoverAllowed)})},onDrop:function(e,t,n){const o=e?.hasClass("js-collision-detected"),s=r.findHoveredConnection(this._connections);!s&&o||s&&!this._connectionsHoverAllowed||r.undoManager.transaction(()=>{if(!s||r.canInsertNodeIntoConnection(i.create(t),s)){const e=r.newNode(t,n);s&&r.insertNodeIntoConnection(e,s,o)}})}}),this.$viewport.selectable({filter:".node",distance:10,disabled:!this.editable,start:function(){$("#selection-backdrop").show()},stop:function(){$("#selection-backdrop").hide()},selected:function(e,t){r.instance.addToDragSelection(t.selected),r.onSelectionChanged()},unselected:function(e,t){r.instance.removeFromDragSelection(t.unselected),r.onSelectionChanged()}}),this.$viewport.on("mousedown",function(e){(["canvas","viewPort","icon-titles-container"].includes(e.target.id)||$.contains(r.$titlesContainer[0],e.target))&&r.deselectAll(),y()}),this.$viewport.on("wheel",e=>{if(this.canvas.mouseWheelZoomEnabled)return void e.preventDefault();const{x:t,y:i}=this.canvas.getPosition(),n=50*(e.originalEvent.wheelDelta>0?1:-1),[o,r]=e.shiftKey?[t+n,i]:[t,i+n];this.canvas.moveTo(o,r)}),this.instance.bind("connection",function(e){r.undoManager.operation("connectionCreated",e),r.autofillStopNodesIfPossible(),r.autoConvertMailingNodesTypeIfPossible(),r.updateOverlays(),r.positionTitles(),r.processRecipientsChains()}),this.instance.bind("connectionDetached",function(e){r.undoManager.operation("connectionDeleted",e),r.autofillStopNodesIfPossible(),r.autoConvertMailingNodesTypeIfPossible(),r.updateOverlays(),r.positionTitles(),r.processRecipientsChains()}),this.instance.bind("mousedown",function(t,i){r.editable&&i.button===e.MOUSE_BUTTON_MIDDLE&&_.defer(function(){r.undoManager.transaction(function(){r.deleteConnection(t)})}),y()}),this.instance.bind("beforeDrag",function(){r.undoManager.startTransaction()}),this.instance.bind("connectionDragStop",function(){r.undoManager.endTransaction()}),this.instance.bind("connectionDrag",function(e){if(r.deselectAll(),e.source){var t=$(e.source);r.setNodeSelected(t,!0),r.isChainMode()&&i.setChainSource(t,!0)}}),this.instance.bind("beforeDrop",function(e){var t=i.get(document.getElementById(e.sourceId)),n=i.get(document.getElementById(e.targetId)),o=r.connect(t,n,!0);return!!o||(!1===o&&p.connectionNotAllowed(),!1)}),this.$footnotesContainer=$("#footnotes-container ol"),this.isFootnotesEnabled=o,this.undoManager=new u(this,{onChange:function(){S(this.canUndo()),r.processRecipientsChains(),r.autofillStopNodesIfPossible(),r.autoConvertMailingNodesTypeIfPossible()}}),h.assignOptions({getUndoManager:()=>r.getUndoManager(),getNodesByTypes:e=>r.getNodesByTypes(e),getNodesByIncomingConnections:function(e){return r.getNodeIncomingConnections(e).map(function(e){return e.source})},getNodesByOutgoingConnections:function(e){return r.getNodeOutgoingConnections(e).map(function(e){return e.target})},getFirstIncomingChain:e=>r.getFirstIncomingChain(e),forEachPreviousNode:(e,t)=>r.forEachPreviousNode(e,t),getNodeAnchorsInUse:e=>r.getAnchorsInUse(e),onChange:function(e){r.updateNodeTitle(e,!0),r.updateFootnotes(),r.updateMinimap()},supplement:function(e){r.supplement.apply(r,arguments)},editNode:function(e,t){alert("Missing editorsHelper.editNode")},deleteNodeById:function(e){alert("Missing editorsHelper.deleteNodeById")}}),n&&f.create(x.contextMenuOptions(r))}static defaults(t){return{Container:t,Anchor:[[0,.5,-1,0],[.5,0,0,-1],[1,.5,1,0],[.5,1,0,1]],DragOptions:{cursor:"pointer",zIndex:e.Z_INDEX_JSPLUMB_DRAG_OPTIONS},Endpoint:"Blank",Connector:["FixedBezierConnector"],PaintStyle:{stroke:e.CONNECTION_COLOR,strokeWidth:e.CONNECTION_THICKNESS,outlineStroke:e.CONNECTION_OUTLINE_COLOR,outlineWidth:e.CONNECTION_OUTLINE_WIDTH},HoverPaintStyle:{stroke:e.CONNECTION_HOVER_COLOR,strokeWidth:e.CONNECTION_THICKNESS,outlineStroke:e.CONNECTION_OUTLINE_COLOR,outlineWidth:e.CONNECTION_OUTLINE_WIDTH},ConnectionOverlays:[["PlainArrow",{id:"arrow",visible:!0,location:1,width:e.CONNECTION_ARROW_SIZE,length:e.CONNECTION_ARROW_SIZE}]]}}static contextMenuOptions(e){return{".jtk-connector":{shown:()=>e.editable,items:{delete:{name:t("workflow.defaults.delete"),icon:"delete",disabled:function(t){return!e.canDeleteConnection(e.getConnectionByConnector$(t))},clicked:function(t){e.undoManager.transaction(()=>{const i=e.getConnectionByConnector$(t);e.deleteConnection(i.origin)})}}}},".node":{shown:()=>!0,items:{connect:{name:t("workflow.connect"),icon:"connect",shown:()=>e.editable&&e.getSelectionSize()>1,clicked:function(){e.undoManager.transaction(()=>{2==e.getSelectionSize()&&e.multiConnectionEnabled?e.connectBetweenSelected():e.connectSelected()})}},disconnect:{name:t("workflow.disconnect"),icon:"disconnect",shown:()=>e.editable&&e.getSelectionSize()>1,clicked:function(){e.undoManager.transaction(()=>{e.disconnectSelected()})}},edit:{name:t("workflow.defaults.edit"),icon:"pen",shown:()=>e.getSelectionSize()<=1,clicked:t=>e.editIcon(i.get(t)),disabled:e=>!i.get(e).isEditable()},delete:{name:t("workflow.defaults.delete"),icon:"trash-alt",clicked:function(){e.undoManager.transaction(()=>e.deleteSelected())},disabled:()=>!e.editable},comment:{name:t("workflow.defaults.comment"),icon:"comment-dots",clicked:t=>e.editIconComment(i.get(t)),disabled:()=>!e.editable}}}}}updateFootnotes=_.throttle(()=>{if(this.forEachNode(e=>e.setFootnote(-1)),this.$footnotesContainer.html(""),this.isFootnotesEnabled){var e=this,t=1;this.forEachNode(function(n){i.isCommented(n)&&(e.$footnotesContainer.append('<li id="#fn:'+t+'">'+n.getComment()+"</li>"),n.setFootnote(t),t++)})}},150);isActionBasedWorkflow(){return this.getNodes().some(t=>t.getType()===e.NODE_TYPE_ACTION_BASED_MAILING)}isDateBasedWorkflow(){return this.getNodes().some(t=>t.getType()===e.NODE_TYPE_DATE_BASED_MAILING)}isNormalWorkflow(){return!this.isActionBasedWorkflow()&&!this.isDateBasedWorkflow()}getNodes$(){return this.$container.find(".node")}getNodes(){return this.getNodes$().get().map(e=>i.get(e))}getVertices(){return n.verticesFrom(this.getNodes(),this.instance.getAllConnections())}getNodesByType(e){return this.getNodesByTypes([e])}getNodesByTypes(e){return this.getNodes().filter(t=>e.includes(t.type))}forEachNode$(e){const t=this.getNodes$(),i=this;t.each(function(){e.call(i,$(this))})}forEachNode(e){this.forEachNode$(t=>e.call(this,i.get(t)))}forEachPreviousNode(e,t){for(var i=this.getConnections(),n=i.filter(function(t){return t.target===e}).map(e=>e.source),o={};n.length;){for(var r=0;r<n.length;r++){var s=n[r],a=s.getId();if(!1===t.call(this,s))return;o[a]=!0}n=i.filter(function(e){if(n.includes(e.target)){var t=e.source.getId();return!o[t]&&(o[t]=!0,!0)}return!1}).map(e=>e.source)}}getNodeIncomingChains(e){var t=this.getVertices().find(t=>t.node==e);return t?n.getIncomingChains(t):[]}getNodeOutgoingChains(e){var t=this.getVertices().find(t=>t.node==e);return t?n.getOutgoingChains(t):[]}getFirstOutgoingChain(e){const t=this.getNodeOutgoingChains(e);return t.length?t[0]:[]}getFirstIncomingChain(e){var t=this.getNodeIncomingChains(e);return t.length?t[0]:[]}getNodeIncomingConnections(e){return this.getConnections(t=>i.get(t.target)===e)}getNodeOutgoingConnections(e){return this.getConnections(t=>i.get(t.source)===e)}getNodeConnections(e){return this.getConnections(t=>i.get(t.source)===e||i.get(t.target)===e)}isNodeConnected(e){return this.getNodeConnections(e).length>0}hasNodeIncomingConnections(e){return this.instance.getAllConnections().some(t=>i.get(t.target)===e)}hasNodeOutgoingConnections(e){return this.instance.getAllConnections().some(t=>i.get(t.source)===e)}hasConnection(e){return this.instance.getAllConnections().some(function(t){return e.call(null,{origin:t,source:i.get(t.source),target:i.get(t.target)})})}getConnections(e){var t=this.instance.getAllConnections();return e&&(t=t.filter(e)),t.map(function(e){return{origin:e,source:i.get(e.source),target:i.get(e.target)}})}getConnectionByConnector$(e){return this.getConnections(t=>t.canvas==e[0])[0]}getConnectionBetween(e,t){return this.getConnections(i=>$(i.source).is(e)&&$(i.target).is(t))[0]}recycle(){this.instance.reset(),this.$container.empty()}batch(){this.instance.batch.apply(this.instance,arguments)}newNode(t,n){var o=this;if(this.editable){if(!i.isExpandableType(t)){var r=i.create(t),s=e.NODE_ANIMATION_DROPPED;return n||(n=this.pickNewNodePosition(),s=e.NODE_ANIMATION_AUTO_DROPPED),r.setCoordinates(n.x,n.y),o.add(r,s),o.supplement(r),r}{const i=0===e.workflowId&&o._isInInitialState();switch(t){case e.NODE_TYPE_SC_BIRTHDAY:case e.NODE_TYPE_SC_DOI:case e.NODE_TYPE_BIRTHDAY_WITH_COUPON:case e.NODE_TYPE_WELCOME_TRACK:case e.NODE_TYPE_WELCOME_TRACK_WITH_INCENTIVE:case e.NODE_TYPE_SHOPPING_CART_ABANDONERS_SMALL:case e.NODE_TYPE_SHOPPING_CART_ABANDONERS_LARGE:case e.NODE_TYPE_ANNIVERSARY_MAIL:0===e.workflowId&&this._isInInitialState()&&this.deleteAllNodes(),this.newSnippetFromSample(t,n);break;case e.NODE_TYPE_SC_ABTEST:p.createAutoOpt().done(e=>{i&&o.deleteAllNodes(),g.loadAutoOptSample(e,this.gridBackgroundShown,(e,t)=>this.newSnippet(e,t,n))});break;case e.NODE_TYPE_OWN_WORKFLOW:p.confirmOwnWorkflowExpanding().done(function(e){i&&o.deleteAllNodes(),o.newSnippetFromOwnWorkflow(e.workflowId,e.copyContent,n)});break;case e.NODE_TYPE_SPLIT:p.createSplit().done(e=>{g.createSplitSample(e,this.gridBackgroundShown,(e,t)=>this.newSnippet(e,t,n))})}}}}_isInInitialState(){return e.intialSchema===this.serializeIcons()}newSnippetFromSample(e,t){g.loadSample(e,this.gridBackgroundShown,(e,i)=>this.newSnippet(e,i,t))}newSnippetFromOwnWorkflow(e,t,i){g.loadOwnWorkflow(e,t,(e,t)=>{this.gridBackgroundShown&&e.forEach(e=>this.convertNodeCoordinates(e)),this.newSnippet(e,t,i)})}newSnippet(t,i,n){var o=this,r=n?e.NODE_ANIMATION_DROPPED:e.NODE_ANIMATION_AUTO_DROPPED,s=this.getNodesByTypes([e.NODE_TYPE_START]).length>0,a=this.getNodesByTypes([e.NODE_TYPE_STOP]).length>0;g.removeStartStop(t,i,s,a),n?g.adjustPositions(t,n.x,n.y,!0):(n=this.getCenterPosition(),g.adjustPositions(t,n.x,n.y,!1)),this.undoManager.transaction(()=>{o.batch(function(){var e=o.allocateIds(t.length);o.allocateSpaceForSnippet(t),t.forEach(function(t,i){t.setId(e[i]),o.add(t,r),o.updateNodeTitle(t,!0)}),i.forEach(function(e){o.connect(e.source,e.target)})})})}allocateId(){return this.allocateIds(1)[0]}allocateIds(e){var t=[],i={};for(this.forEachNode(function(e){i[e.getId()]=!0});e>0;){do{this.lastAllocatedId++}while(i[this.lastAllocatedId]);t.push(this.lastAllocatedId),e--}return t}_findMaxNodeId(){var e=0;return this.forEachNode(function(t){t.getId()>e&&(e=t.getId())}),e}pickNewNodePosition(){var t,i=this.canvas.getVisibleArea(),n=Math.ceil(i.minY/e.CANVAS_GRID_SIZE),o=Math.floor(i.maxY/e.CANVAS_GRID_SIZE)-(e.AUTO_DROP_STEP_Y>>1),r=[];this.forEachNode(function(t){var i=t.getCoordinates();r.push({minX:i.x-e.AUTO_DROP_STEP_X+1,minY:i.y-e.AUTO_DROP_STEP_Y+1,maxX:i.x+e.AUTO_DROP_STEP_X-1,maxY:i.y+e.AUTO_DROP_STEP_Y-1})});var s=function(e,t){return!(t<n||t>o)&&(!r.some(function(i){return!(e<i.minX||e>i.maxX||t<i.minY||t>i.maxY)})&&{x:e,y:t})},a=function(){for(var e=0;e+1<arguments.length;e+=2){var t=s(arguments[e],arguments[e+1]);if(t)return t}return!1},l=Math.round((i.minX+i.maxX-e.NODE_SIZE)/2/e.CANVAS_GRID_SIZE),c=Math.round((i.minY+i.maxY-e.NODE_SIZE)/2/e.CANVAS_GRID_SIZE);if(t=a(l,c))return t;for(var d=l,u=l,h=c,p=c,g=0;;){if(t=a(d-e.AUTO_DROP_STEP_X,c,l,h-e.AUTO_DROP_STEP_Y,l,p+e.AUTO_DROP_STEP_Y,u+e.AUTO_DROP_STEP_X,c))return t;for(var f=1;f<=g;f++){var m=f*e.AUTO_DROP_STEP_X,v=f*e.AUTO_DROP_STEP_Y;if(t=a(d-e.AUTO_DROP_STEP_X,c-v,d-e.AUTO_DROP_STEP_X,c+v,l-m,h-e.AUTO_DROP_STEP_Y,l+m,h-e.AUTO_DROP_STEP_Y,l-m,p+e.AUTO_DROP_STEP_Y,l+m,p+e.AUTO_DROP_STEP_Y,u+e.AUTO_DROP_STEP_X,c-v,u+e.AUTO_DROP_STEP_X,c+v))return t}if(t=a(d-e.AUTO_DROP_STEP_X,h-e.AUTO_DROP_STEP_Y,d-e.AUTO_DROP_STEP_X,p+e.AUTO_DROP_STEP_Y,u+e.AUTO_DROP_STEP_X,h-e.AUTO_DROP_STEP_Y,u+e.AUTO_DROP_STEP_X,p+e.AUTO_DROP_STEP_Y))return t;d-=e.AUTO_DROP_STEP_X,u+=e.AUTO_DROP_STEP_X,h-=e.AUTO_DROP_STEP_Y,p+=e.AUTO_DROP_STEP_Y,g++}}getCenterPosition(){var t=this.canvas.getVisibleArea();return{x:Math.round((t.minX+t.maxX-e.NODE_SIZE)/2/e.CANVAS_GRID_SIZE),y:Math.round((t.minY+t.maxY-e.NODE_SIZE)/2/e.CANVAS_GRID_SIZE)}}getLinkedFilledStartNodes(t){return _.compact(this.getNodeIncomingChains(t).map(function(t){return _.find(t,t=>t.getType()===e.NODE_TYPE_START)})).filter(e=>e.isFilled())}isAutoOptimizationDecisionAllowed(t){const i=this.getLinkedFilledStartNodes(t);return 0===i.length||i.every(t=>e.constants.startTypeEvent!==t.data.startType)}isAllLinkedFilledStartsHasDateType(t){const i=this.getLinkedFilledStartNodes(t);return!!i.length&&i.every(function(t){return e.constants.startTypeDate===t.data.startType})}autofillStopNodesIfPossible(){const t=this;this.getNodesByTypes([e.NODE_TYPE_STOP]).forEach(function(e){t.autofillAutomaticEndIfPossible(e)})}autofillAutomaticEndIfPossible(t){this.isAllLinkedFilledStartsHasDateType(t)&&(t.data.endType=e.constants.endTypeAutomatic,t.setFilled(!0),this.updateNodeTitle(t,!0))}_possibleToAutoConvertMailingsTypeToActionBased(t){const i=this.getLinkedFilledStartNodes(t);return!!i.length&&i.every(function(t){return e.constants.startTypeEvent===t.data.startType&&"EVENT_REACTION"===t.data.event})}_possibleToAutoConvertMailingsTypeToDateBased(t){const i=this.getLinkedFilledStartNodes(t);return!!i.length&&i.every(function(t){return e.constants.startTypeEvent===t.data.startType&&"EVENT_DATE"===t.data.event})}autoConvertMailingNodesTypeIfPossible(){const t=this,i=[e.NODE_TYPE_MAILING,e.NODE_TYPE_ACTION_BASED_MAILING,e.NODE_TYPE_DATE_BASED_MAILING];this.getNodesByTypes(i).forEach(function(e){const i=t._getAutoConvertedMailingTypeIfPossible(e);e.type!==i&&(e.type=i,e.isFilled()&&(e.data.mailingId=0,e.setFilled(!1),t.updateNodeTitle(e,!0)),v.warn("workflow.mailing.typeChanged"))})}_getAutoConvertedMailingTypeIfPossible(t){return this.isAllLinkedFilledStartsHasDateType(t)?e.NODE_TYPE_MAILING:this._possibleToAutoConvertMailingsTypeToActionBased(t)?e.NODE_TYPE_ACTION_BASED_MAILING:this._possibleToAutoConvertMailingsTypeToDateBased(t)?e.NODE_TYPE_DATE_BASED_MAILING:t.type}allocateSpaceForSnippet(t){const i=this;function n(t,i){return t.some(t=>i.some(i=>function(t,i){const n=t.getCoordinates(),o=i.getCoordinates();return Math.abs(n.x-o.x)<e.AUTO_DROP_STEP_X&&Math.abs(n.y-o.y)<e.AUTO_DROP_STEP_Y}(t,i)))}function r(e){let t=0,i=0,n=0,o=0;return e.forEach(e=>{t=Math.min(t,e.getX()),i=Math.max(i,e.getX()),n=Math.min(n,e.getY()),o=Math.max(o,e.getY())}),{x:(i-t)/2,y:(o-n)/2}}function s(e,t){e.forEach(e=>{const i=e.getCoordinates();e.setCoordinates(i.x+t.x,i.y+t.y)})}if(t.length){var a=this.getNodes().map(e=>({node:e,coordinates:e.getCoordinates(),dragMode:i.getCurrentDragMode()}));const l=r(t),c=o.detectGroups(this.getVertices()).map(t=>{const i=t.getNodes();return{nodes:i,moveDirection:(n=r(i),o=l,Math.abs(n.x-o.x)>=Math.abs(n.y-o.y)?n.x<o.x?{x:-e.AUTO_DROP_STEP_X,y:0}:{x:e.AUTO_DROP_STEP_X,y:0}:n.y<o.y?{x:0,y:-e.AUTO_DROP_STEP_Y}:{x:0,y:e.AUTO_DROP_STEP_Y})};var n,o});c.forEach(e=>{if(n(e.nodes,t)){const i=e.moveDirection,o=e.nodes.slice(0),r=t.slice(0);let a=c.filter(t=>t!==e);do{let e;s(o,i);do{e=!1,a=a.filter(t=>!n(o,t.nodes)||(t.moveDirection.x===i.x&&t.moveDirection.y===i.y?(s(t.nodes,i),Array.prototype.push.apply(o,t.nodes),e=!0):Array.prototype.push.apply(r,t.nodes),!1))}while(e)}while(n(o,r))}}),(a=a.filter(e=>{const t=e.node.getCoordinates(),i=e.coordinates;return t.x!==i.x||t.y!==i.y})).length&&this.undoManager.operation("nodeMoved",a)}}allocateSpaceForSupplement(t,i,n=this.#ut()){let o=0,r=0;switch(i){case e.LEFT:default:o=-1;break;case e.RIGHT:o=1;break;case e.TOP:r=-1;break;case e.BOTTOM:r=1}let s=t.getX()+e.AUTO_DROP_STEP_X*o,a=t.getY()+e.AUTO_DROP_STEP_Y*r;for(;!this.#ht(s,a,n);)s+=o,a+=r;return{x:s,y:a}}#ut(t=[]){return this.getNodes().filter(e=>!t.includes(e)).map(t=>{const i=t.getCoordinates();return{minX:i.x-e.AUTO_DROP_STEP_X+1,minY:i.y-e.AUTO_DROP_STEP_Y+1,maxX:i.x+e.AUTO_DROP_STEP_X-1,maxY:i.y+e.AUTO_DROP_STEP_Y-1}})}#ht(e,t,i){return!i.some(i=>!(e<i.minX||e>i.maxX||t<i.minY||t>i.maxY))}allocateSpaceForIncomingSupplement(t){const i=this.getAnchorsInUse(t);let n=e.LEFT;return!i[e.LEFT]&&i[e.TOP]&&(n=e.TOP),this.allocateSpaceForSupplement(t,n)}allocateSpaceForOutgoingSupplement(t){const i=this.getAnchorsInUse(t);let n=e.RIGHT;return!i[e.RIGHT]&&i[e.BOTTOM]&&(n=e.BOTTOM),this.allocateSpaceForSupplement(t,n)}add(t,n){var o,r=this,s=t.get$();t.getId()||t.setId(this.allocateId()),t.appendTo(this.$container,this.$titlesContainer,n),t.setInteractionEnabled(this.editable),t.updateCommentLabels(),this.instance.makeTarget(s,{anchor:t.getAnchors()}),this.instance.makeSource(s,{anchor:t.getAnchors(),filter:".node-connect-button svg"}),this.initDraggableOptions(s),s.on({mousedown:function(n){if(n.button===e.MOUSE_BUTTON_MIDDLE)r.editable&&r.undoManager.transaction(()=>r.deleteNode(s));else if(t.wasDragging=!1,!(o=i.isSelected(s)))if(r.isChainMode())if(r.isChainSourceSelected()){var a=r.getChainSource();_.defer(function(){r.undoManager.transaction(()=>{var e=r.connect(i.get(a),t);e?(r.deselectAll(),r.setNodeSelected(s,!0),i.setChainSource(s,!0)):!1===e&&p.connectionNotAllowed()})})}else r.setNodeSelected(s,!0),i.setChainSource(s,!0);else n.shiftKey||n.ctrlKey||r.deselectAll(),r.setNodeSelected(s,!0);y()},mouseup:function(e){o&&!t.wasDragging&&(r.isChainMode()?(r.setNodeSelected(s,!1),i.setChainSource(s,!1)):e.shiftKey||e.ctrlKey?r.setNodeSelected(s,!1):(r.deselectAll(),r.setNodeSelected(s,!0)))},dblclick:()=>this.editIcon(t),mouseenter:()=>t.setHovered(!0),mouseleave:()=>t.setHovered(!1)}),this.undoManager.operation("nodeAdded",t),this.updateMinimap(),this.updateFootnotes(),this.updateDraggableButtons()}supplement(t,n,o){var r=this;if(t.isFilled())if(e.NODE_TYPES_MAILING.includes(t.getType())&&!b.isPausedWorkflow()){const e=this._findFinalParameterNode(t);e&&this._fillOptimizationFinalMailingIfPossible(e),n.trySupplementChain(this.getFirstIncomingChain(t),o,function(e){r.batch(function(){for(var t=e[0],i=1;i<e.length;i++){if((s=e[i]).isAppended())t=s;else for(var n=i;n<e.length;n++){var o=e[n];if(o.isAppended()){r.deleteConnectionBetween(o.get$(),t.get$()),t=o,i=n;break}}}for(i=1;i<e.length;i++){var s;if(!(s=e[i]).isAppended()){var a=e[i-1],l=r.allocateSpaceForIncomingSupplement(a);s.setCoordinates(l.x,l.y),r.add(s),r.connect(s,a),i+1<e.length&&e[i+1].isAppended()&&r.connect(e[i+1],s),h.resave(s)}}})}),this.autoConvertMailingNodesTypeIfPossible()}else if(e.NODE_TYPE_RECIPIENT==t.getType())this.processRecipientsChains();else if(e.NODE_TYPE_PARAMETER===t.getType()){const e=r._findFinalParameterNode(t);if(e){const i=r._findTestMailingsParamsNodes(e),n=t.getData().value;r._setParameterNodesValue(i,n);const o=n*i.length;h.modify(e,function(e){e.setFilled(!0),e.setEditable(!1),e.getData().value=100-o})}}else e.NODE_TYPE_START==t.getType()&&(this.autofillStopNodesIfPossible(),this.autoConvertMailingNodesTypeIfPossible());else if(e.NODE_TYPE_IMPORT==t.getType()&&!this.hasNodeOutgoingConnections(t)){var s=i.create(e.NODE_TYPE_DEADLINE),a=this.allocateSpaceForOutgoingSupplement(t);s.setCoordinates(a.x,a.y),this.add(s),this.connect(t,s)}}isAutoOptimizationWorkflow(t){const i=this._findFinalParameterNode(t);if(!i)return!1;if(!this._findOptimizationFinalMailingNode(i))return!1;const n=this.getFirstIncomingChain(i).find(function(t){return t.getType()===e.NODE_TYPE_DECISION});return!!n&&n.data.decisionType===e.constants.decisionTypeAutoOptimization}getParametersOptions(t){const i=this._findFinalParameterNode(t);var n=e.SPLIT_DEFAULT_PARAMETERS;if(i){const e=this._findTestMailingsParamsNodes(i).length+1,t=Math.floor(100/e);n=n.filter(function(e){return e<=t})}return n.map(function(e){return{id:e,text:e}})}_fillOptimizationFinalMailingIfPossible(e){if(!this._isAllOptimizationTestMailingsFilled(e))return;const t=this._findOptimizationFinalMailingNode(e),i=t.title;h.modify(t,function(e){e.setFilled(!0)}),t.setTitle(i)}_findFinalParameterNode(t){const i=this.getNodeOutgoingChains(t);for(var n=0;n<i.length;n++){const t=i[n].find(function(t,i){return i>0&&e.NODE_TYPE_PARAMETER===t.getType()});if(t)return t}return null}_findTestMailingsParamsNodes(t){const i=[];return this.getNodeIncomingChains(t).forEach(function(t){const n=t.find(function(t,i){return i>0&&e.NODE_TYPE_PARAMETER===t.getType()});n&&i.push(n)}),i}_findOptimizationFinalMailingNode(t){return this.getFirstOutgoingChain(t).find(function(t){return t.getType()===e.NODE_TYPE_MAILING&&!t.isEditable()})}_isAllOptimizationTestMailingsFilled(t){const i=this._findTestMailingsParamsNodes(t);for(var n=0;n<i.length;n++){const t=i[n],o=this.getFirstOutgoingChain(t);if(o.length<=1)return!1;const r=o[1];if(r.getType()!==e.NODE_TYPE_MAILING||!r.isFilled()||!r.isEditable())return!1}return!0}_setParameterNodesValue(e,t){e.forEach(function(e){h.modify(e,function(e){e.setFilled(!0),e.getData().value=t})})}processRecipientsChains=_.debounce(()=>{var t=this._findInitialRecipientsNodes(),i=this;t.forEach(function(t){t.setInRecipientsChain(!1),i.updateNodeTitle(t),i.getNodeOutgoingChains(t).forEach(function(n){for(var o=1;o<n.length;++o){var r=n[o];if(r.type!=e.NODE_TYPE_RECIPIENT)break;r.data.mailinglistId=t.data.mailinglistId,r.setInRecipientsChain(!0),i.updateNodeTitle(r)}})})},150);_findInitialRecipientsNodes(){var t=this.getNodesByTypes([e.NODE_TYPE_RECIPIENT]),i=this.getConnections(),n=[];return i.filter(function(t){return t.target.type==e.NODE_TYPE_RECIPIENT&&t.source.type==e.NODE_TYPE_RECIPIENT}).forEach(function(e){n.push(e.target.id)}),t.filter(function(e){return!n.includes(e.id)})}getAnchorsInUse(e){var t=e.get$();return i.getAnchorsInUse(this.instance.getEndpoints(t[0]))}getConnectionDirection(t){const n=i.getAnchorsInUse([t.endpoints[1]]);return n[e.TOP]?e.BOTTOM:n[e.BOTTOM]?e.TOP:n[e.RIGHT]?e.LEFT:e.RIGHT}positionTitle(e){r.positionTitle(e,this.getAnchorsInUse(e))}updateNodeTitle(e,t){var i=this.isNormalWorkflow();r.updateTitle(e,i,t),this.positionTitle(e)}updateNodeTitles=_.throttle(e=>{var t=this,i=this.isNormalWorkflow();this.forEachNode(function(n){r.updateTitle(n,i,e),t.positionTitle(n)})},150);positionTitles=_.throttle(()=>{this.forEachNode(e=>{this.positionTitle(e)})},150);setMinimapEnabled(e){this.canvas.setMinimapEnabled(e)}updateMinimap=_.debounce(function(){this.canvas.updateMinimap()},100);isChainSourceSelected(){return this.$container.find(".node.chain-mode-source").exists()}getChainSource(){return this.$container.find(".node.chain-mode-source")}setNodeSelected(e,t){t?this.instance.addToDragSelection(e):this.instance.removeFromDragSelection(e),i.setSelected(e,!!t),this.onSelectionChanged()}isConnectionPossible(e,t){return e instanceof i&&t instanceof i&&(e!==t&&!this.hasConnection(function(i){return i.source===e&&i.target===t||i.source===t&&i.target===e}))}isConnectionAllowed(t,i,n){var o=new l(e.CONNECTION_CONSTRAINTS),r=this,s={node:t,type:t.getType(),connections:{}},a={node:i,type:i.getType(),connections:{}};return Object.defineProperty(s.connections,"incoming",{get:m.caching(e=>r.getNodeIncomingConnections(e).filter(e=>n?.origin!==e.origin),r,t)}),Object.defineProperty(s.connections,"outgoing",{get:m.caching(e=>r.getNodeOutgoingConnections(e).filter(e=>n?.origin!==e.origin),r,t)}),Object.defineProperty(a.connections,"incoming",{get:m.caching(e=>r.getNodeIncomingConnections(e).filter(e=>n?.origin!==e.origin),r,i)}),Object.defineProperty(a.connections,"outgoing",{get:m.caching(e=>r.getNodeOutgoingConnections(e).filter(e=>n?.origin!==e.origin),r,i)}),n||(s.type!==e.NODE_TYPE_STOP||this.hasNodeIncomingConnections(t)||(s.type=e.NODE_TYPE_START,s.node.setType(e.NODE_TYPE_START),this.updateDraggableButtons()),a.type!==e.NODE_TYPE_START||this.hasNodeOutgoingConnections(i)||(a.type=e.NODE_TYPE_STOP,a.node.setType(e.NODE_TYPE_STOP),this.updateDraggableButtons())),o.check(s,a)}connect(t,i,n){return this.isConnectionPossible(t,i)?!(this.#pt(t,i,n)||!this.isConnectionAllowed(t,i))&&(t.getType()===e.NODE_TYPE_STOP&&t.setType(e.NODE_TYPE_START),i.getType()===e.NODE_TYPE_START&&i.setType(e.NODE_TYPE_STOP),!0!==n&&this.instance.connect({source:t.get$(),target:i.get$()}),!0):null}#pt(e,t,i){return this.#gt(e,t,i)||this.#ft(e,t)}#ft(e,t){return e.isParameterNode&&this.isSplitParameterNode(t)||t.isParameterNode&&this.isSplitParameterNode(e)}#gt(e,t,i){return i&&e.isSplitNode&&t.isParameterNode}deselectAll(){this.$container.find(".node.ui-selected").removeClass("ui-selected"),this.instance.clearDragSelection(),this.clearSelectedSource(),this.onSelectionChanged()}clearSelectedSource(){this.$container.find(".node.chain-mode-source").removeClass("chain-mode-source")}alignAll(){this.undoManager.transaction(()=>{this.#mt(()=>d.align(this.getVertices()))&&(this.positionTitles(),this.updateMinimap())})}#mt(e){const t=this.getNodes(),i={};t.forEach(e=>i[e.getId()]=e.getCoordinates()),this.batch(()=>e());const n=t.filter(e=>{const t=i[e.getId()];return t.x!==e.getX()||t.y!==e.getY()}).map(e=>({node:e,coordinates:i[e.getId()],dragMode:this.getCurrentDragMode()}));return!!n.length&&(this.undoManager.operation("nodeMoved",n),!0)}deleteSelected(){this.deleteNodes(this.getSelectedNodes())}deleteNode(t,n){if(t instanceof i||(t=i.get(t)),t.isAppended()){const i=[t];switch(t.getType()){case e.NODE_TYPE_PARAMETER:if(!n&&this.isSplitParameterNode(t))return void v.warn("split.deleteWorkflowParameterIconWarn");break;case e.NODE_TYPE_SPLIT:i.push(...this.getSplitParameterNodes(t));break;case e.NODE_TYPE_IMPORT:this.getNodeOutgoingConnections(t).forEach(function(t){e.NODE_TYPE_DEADLINE===t.target.getType()&&i.push(t.target)});break;case e.NODE_TYPE_DEADLINE:this.getNodeIncomingConnections(t).forEach(function(t){e.NODE_TYPE_IMPORT===t.source.getType()&&i.push(t.source)})}i.forEach(e=>{h.exitNodeEditorIfActive(e),this.undoManager.operation("nodeDeleted",e),this.instance.remove(e.get$()),e.remove()}),this.updateDraggableButtons(),this.onSelectionChanged(),this.positionTitles(),this.updateFootnotes(),this.updateMinimap()}}getSplitParameterNodes(e){return this.getNodeOutgoingConnections(e).filter(e=>e.target.isParameterNode).map(e=>e.target)}isSplitParameterNode(e){return this.getNodeIncomingConnections(e).some(e=>e.source.isSplitNode)}deleteAllNodes(){this.deleteNodes(this.getNodes())}deleteNodes(e){this.undoManager.transaction(()=>{this.batch(()=>{e.forEach(e=>this.deleteNode(e))})})}disconnectSelected(){this.disconnectNodes(this.getSelectedNodes())}disconnectNode(e){var t=this;this.getNodeConnections(e).forEach(function(e){t.deleteConnection(e)})}disconnectNodes(e){var t=this;this.batch(function(){e.forEach(function(e){t.disconnectNode(e)})})}canDeleteConnection(e){var t,n;return e.origin?(t=e.source,n=e.target):(t=i.get(e.source),n=i.get(e.target)),!this.#vt(t,n)&&!this.#bt(t,n)}#bt(e,t){return e.isSplitNode&&t.isParameterNode}#vt(t,i){return e.NODE_TYPE_IMPORT===t.getType()&&e.NODE_TYPE_DEADLINE===i.getType()}deleteConnection(e){return!!this.canDeleteConnection(e)&&(e.origin?this.instance.deleteConnection(e.origin):this.instance.deleteConnection(e),!0)}deleteConnectionBetween(e,t){const i=this.getConnectionBetween(e,t);i&&this.deleteConnection(i)}connectSelected(){return this.connectNodes(this.getSelectedNodes())}connectBetweenSelected(){var e=this.getSelectedNodes$();return e.length>=2&&this.connectNodes(this.getNodesBetweenSelected(e[0],e[1]))}getNodesBetweenSelected(e,t){var n=i.getBox(e),o=i.getBox(t),r={minX:Math.min(n.minX,o.minX),maxX:Math.max(n.maxX,o.maxX),minY:Math.min(n.minY,o.minY),maxY:Math.max(n.maxY,o.maxY)};return this.getNodes().filter(function(e){return i.isInRegion(e.get$(),r)})}findHoveredConnection(e){return e?.find(e=>e.origin.isHover())}insertNodeIntoConnection(e,t,i=!1){if(!this.canInsertNodeIntoConnection(e,t))return!1;const n=this.getConnectionDirection(t.origin);return this.deleteConnection(t),this.connect(t.source,e),this.connect(e,t.target),i&&this.#mt(()=>{e.setCoordinates(t.source.getX(),t.source.getY());const i=this.getFirstOutgoingChain(e);let o=t.source;i.forEach(e=>{const t=this.#ut(i.slice(i.indexOf(e)));if(!this.#ht(e.getX(),e.getY(),t)){const{x:i,y:r}=this.allocateSpaceForSupplement(o,n,t);e.setCoordinates(i,r)}o=e})}),!0}canInsertNodeIntoConnection(e,t){const i=this.isConnectionAllowed(t.source,e,t)&&this.isConnectionAllowed(e,t.target,t);return i||p.connectionNotAllowed(),i}connectNodes(e){const t=e.sort((e,t)=>e.getX()<t.getX()?-1:e.getX()>t.getX()?1:e.getY()<t.getY()?-1:e.getY()>t.getY()?1:0);let i=!1;return this.undoManager.transaction(()=>{this.batch(()=>{for(let e=0;e<t.length-1;e++)this.connect(t[e],t[e+1])&&(i=!0)})}),i}getSelectedNodes$(){var e=[];return this.$container.find(".node.ui-selected").each(function(t,i){e.push($(i))}),e}getSelectedNodes(){return this.getSelectedNodes$().map(function(e){return i.get(e)})}getSelectionSize(){return this.$container.find(".node.ui-selected").length}updateDraggableButtons(){this.getNodesByType(e.NODE_TYPE_START).length?this.draggableButtons.changeType(e.NODE_TYPE_START,e.NODE_TYPE_STOP):this.draggableButtons.changeType(e.NODE_TYPE_STOP,e.NODE_TYPE_START)}onSelectionChanged(){C(this.getSelectionSize()>0)}setOnInitialized(e){const t=this;this.instance.ready(function(){e.apply(this),t.lastAllocatedId=t._findMaxNodeId()})}setOnZoom(e){this.canvasZoomHandler=e}setEditable(e){e=!!e,this.editable!==e&&(this.editable=e,this.draggableButtons.setEnabled(e),this.$viewport.selectable(e?"enable":"disable"),this.forEachNode(function(t){t.setInteractionEnabled(e)}))}getZoom(){return this.instance.getZoom()}setZoom(e){this.scale=e,this.canvas.setZoom(e),this.instance.setZoom(e),this.gridBackground.setZoom(e)}toggleGrid(){this.gridBackground.toggle(),this.dragMode=this.gridBackgroundShown?e.GRID_CELL_DRAG_MODE:e.DEFAULT_DRAG_MODE,this.adaptToNewDragMode()}get gridBackgroundShown(){return this.gridBackground.shown}convertNodeCoordinates(e){const t=e.getCoordinates();this.convertCoordinates(t),e.setCoordinates(t.x,t.y)}convertCoordinates(t){const i=e.NODE_SIZE/e.CANVAS_DEFAULT_GRID_SIZE;this.getCurrentDragMode()===e.GRID_CELL_DRAG_MODE?(t.x=t.x/i,t.y=t.y/i):(t.x=t.x*i,t.y=t.y*i)}adaptToNewDragMode(){this.adaptPropertiesToDragMode();const e=this;this.getNodes$().each(function(){e.instance.destroyDraggable(this),e.initDraggableOptions($(this))}),this.forEachNode(function(t){e.convertNodeCoordinates(t)})}adaptPropertiesToDragMode(){this.getCurrentDragMode()===e.GRID_CELL_DRAG_MODE?(e.CANVAS_GRID_SIZE=e.NODE_SIZE,e.AUTO_ALIGN_STEP_X=e.GRID_AUTO_ALIGN_STEP_X,e.AUTO_ALIGN_STEP_Y=e.GRID_AUTO_ALIGN_STEP_Y):(e.CANVAS_GRID_SIZE=e.CANVAS_DEFAULT_GRID_SIZE,e.AUTO_ALIGN_STEP_X=e.DEFAULT_AUTO_ALIGN_STEP_X,e.AUTO_ALIGN_STEP_Y=e.DEFAULT_AUTO_ALIGN_STEP_Y)}initDraggableOptions(t){const n=this,o=i.get($(t));let r;this.instance.draggable(t,{distance:e.CANVAS_GRID_SIZE/2,grid:[e.CANVAS_GRID_SIZE,e.CANVAS_GRID_SIZE],rightButtonCanDrag:!1,canDrag:function(){return n.editable},start:function(){if(o.wasDragging=!0,null==n.drag){const e=[],s=[];o.setPopoverEnabled(!1),n.forEachNode$(function(t){i.isSelected(t)?(e.push(t),i.get(t).setTitleEnabled(!1)):s.push(i.getCollisionBox(t))}),r=n.getConnections(),n.drag={lead:t,selected:e,unselected:s,connectionsHoverAllowed:1===e.length&&!n.isNodeConnected(o)}}},stop:function(){n.drag.selected.forEach(e=>{i.get(e).setTitleEnabled(!0),e.removeClass("js-collision-detected")}),r.forEach(e=>$(e.origin.canvas).removeClass("js-connection-drop-forbidden")),o.setPopoverEnabled(!0)},drag:function(){n.drag&&t===n.drag.lead&&(n.drag.selected.forEach(e=>{const t=i.getCollisionBox(e),o=n.drag.unselected.some(e=>i.detectBoxCollision(e,t));e.toggleClass("js-collision-detected",o)}),r.forEach(e=>{$(e.origin.canvas).toggleClass("js-connection-drop-forbidden",e.origin.isHover()&&!n.drag.connectionsHoverAllowed)}))},revert:function(){if(!n.drag)return!1;let e=!1;return n.undoManager.transaction(()=>{const t=n.getZoom(),s=n.drag.selected.some(e=>{const t=i.getCollisionBox(e);return n.drag.unselected.some(e=>i.detectBoxCollision(e,t))}),a=n.findHoveredConnection(r);!a&&s&&(e=!0),a&&!n.drag.connectionsHoverAllowed&&(e=!0),!e&&a&&(e=!n.insertNodeIntoConnection(o,a,s)),e||a||(n.undoManager.operation("nodeMoved",n.drag.selected.map(e=>{const t=i.get(e);return{node:t,coordinates:t.getCoordinates(),dragMode:n.getCurrentDragMode()}})),n.drag.selected.forEach(e=>{i.get(e).updateCoordinates(t)})),n.drag=null,n.updateOverlays(),n.positionTitles(),n.updateMinimap()}),e}})}getCurrentDragMode(){return this.dragMode}setPanningEnabled(e){this.canvas.setPanningEnabled(e),this.$viewport.toggleClass("js-panning",!!e),e?this.$viewport.selectable("disable"):this.editable&&this.$viewport.selectable("enable")}setMouseWheelZoomEnabled(e){this.canvas.setMouseWheelZoomEnabled(e)}setMultiConnectionEnabled(e){this.multiConnectionEnabled=e}setChainModeEnabled(e){if(this.chainModeEnabled=e,this.clearSelectedSource(),e){var t=this.getSelectedNodes$().shift();t&&(this.deselectAll(),this.setNodeSelected(t,!0),i.setChainSource(t,!0))}}isChainMode(){return!0===this.chainModeEnabled}updateOverlays=_.debounce(()=>{this.forEachNode(function(e){i.isDecisionNode(e)&&this.updateDecisionBranchesOverlays(e)})},100);updateDecisionBranchesOverlays(e){var t=this.getNodeOutgoingConnections(e);if(i.isBranchingDecisionNode(e)){var n=i.getDecisionBranches(t);if(n){var o=r.getDecisionBranchesLabels();w(n.positive,o.positive),w(n.negative,o.negative)}else t.forEach(function(e){w(e,"?")})}else t.forEach(function(e){w(e,!1)})}editIcon(e){if(null==this.drag)if(e)e.editable&&(this.deselectAll(),h.showEditDialog(e));else{var t=this.getSelectedNodes$();if(1==t.length){this.deselectAll();const e=i.get(t[0]);h.showEditDialog(e)}}}editIconComment(e){h.showIconCommentDialog(e)}serializeIcons(){var e=this.getNodes().map(function(e){return e.serialize()}),t={};return this.getConnections().forEach(function(e){var i=t[e.source.id];i||(i=[]),i.push(e),t[e.source.id]=i}),e.forEach(function(e){var i=t[e.id];e.connections=i?i.map(function(e){return{targetIconId:e.target.id}}):[]}),JSON.stringify(e)}undo(){this.undoManager.undo()}getUndoManager(){return this.undoManager}hasUnsavedChanges(){return this.getUndoManager().canUndo()}fitPdfPage(){this.canvas.fitPdfPage(e.PDF_SIZE,e.PDF_ORIENTATION)}}AGN.Lib.WM.Editor=x})(),AGN.Lib.TableCaseInsensitiveComparator=function(e,t){return"string"==typeof e&&"string"==typeof t?e.toLowerCase().localeCompare(t.toLowerCase()):null==e?1:e.localeCompare(t)};class SwitchFilter{init(e){this.column=e.column.colId,this.$el=$(`#${this.column}-filter`),this.checked=this.$el.prop("checked")}getGui(){return document.createElement("div")}doesFilterPass(e){return this.checked===e.data[this.column]}isFilterActive(){return!0}getModel(){return this.checked}setModel(e){this.checked=this.$el.prop("checked")}}class DateRangeFilter{init(e){this.params=e,this.column=e.column.colId,this.$fromDate=this.#yt(e,"from"),this.$toDate=this.#yt(e,"to")}#yt(e,t){let i=$(`${e.colDef[`filter${_.capitalize(t)}Input`]}`);return i.length||(i=$(`#${e.column.colId}-${t}-filter`)),i}#wt(e){return e.datepicker("getDate")?.toISOString()}isFilterActive(){return this.fromDate||this.toDate}doesFilterPass(e){if(!this.fromDate&&!this.toDate)return!0;const t=this.#Ct(e);return!!t&&(this.fromDate&&this.toDate?t>=this.fromDate&&t<=this.toDate:this.fromDate?t>=this.fromDate:this.toDate?t<=this.toDate:void 0)}#Ct(e){const t=e.data[this.column];return"number"==typeof t&&t>0?new Date(t):t?.date}getModel(){return{fromDate:this.fromDate,toDate:this.toDate}}setModel(e){if(this.$fromDate?.length){const e=this.#wt(this.$fromDate);this.fromDate=e?new Date(e):null}if(this.$toDate?.length){const e=this.#wt(this.$toDate);this.toDate=e?new Date(e):null,this.toDate?.setDate(this.toDate?.getDate()+1)}}getGui(){return document.createElement("div")}}class DeliveryDateFilter extends DateRangeFilter{init(e){super.init(e),this.$filterType=$(`#${this.column}-filter`)}doesFilterPass(e){const t=e.data[this.column];return this.doesDateFilterPass(t)&&super.doesFilterPass(e)||this.doesSoftBounceFilterPass(t)||this.doesHardBounceFilterPass(t)||this.doesNoFeedbackFilterPass(t)}doesDateFilterPass(e){return e&&this.types.includes("date")&&!["soft-bounce","hard-bounce"].includes(e)}doesSoftBounceFilterPass(e){return this.types.includes("soft-bounce")&&"soft-bounce"===e}doesHardBounceFilterPass(e){return this.types.includes("hard-bounce")&&"hard-bounce"===e}doesNoFeedbackFilterPass(e){return this.types.includes("no-feedback")&&!e}isFilterActive(){return this.types.length>0}getModel(){return{...super.getModel(),types:this.types}}setModel(e){super.setModel(e),this.types=[...this.$filterType.val()]}}AGN.Opt.Table.filters.DeliveryDateFilter=DeliveryDateFilter,AGN.Opt.TableCellRenderers.MustacheTemplateCellRender=class{init(e){const t=e.api;this.eGui=AGN.Lib.TableCellWrapper(t.getGridOption("viewLinkTemplate"),t.getGridOption("viewInModal"),t.getGridOption("isRestoreMode")(),e.data),this.eGui.innerHTML=AGN.Lib.Template.text(e.templateName,{value:e.value,entry:e.data}),AGN.Lib.CoreInitializer.run("tooltip",$(this.eGui))}getGui(){return this.eGui}refresh(){return!1}destroy(){}},AGN.Opt.TableCellRenderers.NotEscapedStringCellRenderer=class{init(e){const t=e.api;this.gui=AGN.Lib.TableCellWrapper(t.getGridOption("viewLinkTemplate"),t.getGridOption("viewInModal"),t.getGridOption("isRestoreMode")(),e.data);const i=document.createElement("div");e.value&&(i.innerHTML=e.value),i.classList.add("text-truncate-table"),this.gui.appendChild(i)}getGui(){return this.gui}refresh(){return!1}destroy(){}},AGN.Lib.TableNumberComparator=function(e,t,i,n,o){return e=parseFloat(e),t=parseFloat(t),isNaN(e)||isNaN(t)?isNaN(e)?isNaN(t)?0:o?-1:1:o?1:-1:e-t},(()=>{var e=AGN.Lib.Confirm,t=AGN.Lib.Page,i=function(){};function n(e){return e.deliveryHistoryEnabled?AGN.url("/recipient/"+e.recipientId+"/mailing/"+e.data.mailingId+"/deliveryHistory.action"):""}i.prototype.init=function(i){this.eGui=document.createElement("div");var o=n(i);o?(this.eGui.innerHTML='<button type="button" class="table__btn btn btn-secondary"><i class="icon icon-external-link-alt"></i><span>'+i.value+"</span></button>",this.eButton=this.eGui.querySelector(".btn"),this.eButton.setAttribute("href",o),this.eventListener=function(o){var r=n(i);if(r)return $.get(r).done(function(i){1==$(i).all(".modal").length?e.create(i):t.render(i)}),o.preventDefault(),!1},this.eButton.addEventListener("click",this.eventListener)):this.eGui.innerHTML=i.value},i.prototype.getGui=function(){return this.eGui},i.prototype.refresh=function(e){return this.eButton&&(this.eButton.dataset.url=n(e)),!0},i.prototype.destroy=function(){this.eButton&&this.eButton.removeEventListener("click",this.eventListener)},AGN.Opt.TableCellRenderers.RecipientDeliveryInfoRenderer=i})(),function(){var e=AGN.Lib.Confirm,t=AGN.Lib.Page,i=function(){};function n(e){return e.deliveryHistoryEnabled?AGN.url("/recipient/"+e.recipientId+"/mailing/"+e.data.mailingId+"/successfulDeliveryHistory.action"):""}i.prototype.init=function(i){this.eGui=document.createElement("div");var o=n(i);o?(this.eGui.innerHTML='<button type="button" class="table__btn btn btn-secondary"><i class="icon icon-external-link-alt"></i><span>'+i.value+"</span></button>",this.eButton=this.eGui.querySelector(".btn"),this.eButton.setAttribute("href",o),this.eventListener=function(o){var r=n(i);if(r)return $.get(r).done(function(i){1==$(i).all(".modal").length?e.create(i):t.render(i)}),o.preventDefault(),!1},this.eButton.addEventListener("click",this.eventListener)):this.eGui.innerHTML=i.value},i.prototype.getGui=function(){return this.eGui},i.prototype.refresh=function(e){return this.eButton&&(this.eButton.dataset.url=n(e)),!0},i.prototype.destroy=function(){this.eButton&&this.eButton.removeEventListener("click",this.eventListener)},AGN.Opt.TableCellRenderers.RecipientSuccessDeliveryInfoRenderer=i}();class SetFilter{init(e){this.params=e,this.column=e.column.colId,this.$el=$(`#${this.column}-filter`),this.filterValues=this.$el.val()}getGui(){return document.createElement("div")}doesFilterPass(e){if(!this.filterValues.length)return!0;let t=e.data[this.column];return t=t?.name||t,t instanceof Array?this.filterValues.every(e=>t.includes(e)):this.filterValues.includes(t)}isFilterActive(){return this.filterValues.length>0}getModel(){return{values:this.filterValues}}setModel(e){this.filterValues=this.$el.val()}}AGN.Opt.TableCellRenderers.StringCellRenderer=class{init(e){const t=e.api;this.gui=AGN.Lib.TableCellWrapper(t.getGridOption("viewLinkTemplate"),t.getGridOption("viewInModal"),t.getGridOption("isRestoreMode")(),e.data);const i=document.createElement("div");e.value&&i.appendChild(document.createTextNode(e.value)),i.classList.add("text-truncate-table"),this.gui.appendChild(i)}getGui(){return this.gui}refresh(){return!1}destroy(){}},AGN.Opt.TableCellRenderers.TableActionsCellRenderer=class{init(e){this.$eGui=$('<div class="d-flex gap-2 justify-content-end"></div>');const t=e.colDef.buttons;t&&(e.data.rowActions.forEach(i=>{const n=t.find(e=>e.name===i);n&&this.$eGui.append(AGN.Lib.Template.text(n.template,e.data))}),AGN.Lib.CoreInitializer.run("tooltip",this.$eGui))}getGui(){return this.$eGui.get(0)}refresh(){return!0}},(()=>{const e=AGN.Lib.Template;AGN.Lib.TableCellWrapper=function(t,i,n,o){if(t&&!n){const n=document.createElement("a");return e.exists(t)||e.register(t,t),n.href=AGN.url(e.text(t,o).trim()),n.classList.add("ag-grid-cell-link"),i&&n.setAttribute("data-confirm",""),n}return document.createElement("div")}})();class WildcardFilter{init(e){this.params=e,this.column=e.column.colId,this.$el=$(`#${this.column}-filter`),this.searchText=this.$el.val()}getGui(){return document.createElement("div")}doesFilterPass(e){if(!this.isFilterActive())return!0;const t=e.data[this.column]||"",i=this.searchText.replace(/[%*]/g,".*").replace(/[_?]/g,".");return new RegExp(`${i}`,"i").test(t)}isFilterActive(){return this.searchText?.trim().length>0}getModel(){return{values:this.searchText}}setModel(e){this.searchText=this.$el.val()}}class WorkflowStartFilter extends DateRangeFilter{init(e){super.init(e),this.$filterType=$(`#${this.column}-filter`)}doesFilterPass(e){const t=e.data[this.column]?.type;return this.doesByDateFilterPass(t)&&super.doesFilterPass(e)||this.doesActionBasedFilterPass(t)||this.doesDateBasedFilterPass(t)}doesByDateFilterPass(e){return this.types.includes("startDate")&&"EVENT_REACTION"!==e&&"EVENT_DATE"!==e}doesActionBasedFilterPass(e){return this.types.includes("actionBased")&&"EVENT_REACTION"===e}doesDateBasedFilterPass(e){return this.types.includes("dateBased")&&"EVENT_DATE"===e}isFilterActive(){return this.types.length>0}getModel(){return{...super.getModel(),types:this.types}}setModel(e){super.setModel(e),this.types=[...this.$filterType.val()]}}AGN.Opt.Table.filters.WorkflowStartFilter=WorkflowStartFilter;class WorkflowStopFilter extends DateRangeFilter{init(e){super.init(e),this.$filterType=$(`#${this.column}-filter`)}doesFilterPass(e){const t=e.data[this.column]?.type;return this.doesByDateFilterPass(t)&&super.doesFilterPass(e)||this.doesAutomaticEndFilterPass(t)}doesByDateFilterPass(e){return this.types.includes("stopDate")&&"AUTOMATIC"!==e}doesAutomaticEndFilterPass(e){return this.types.includes("automaticEnd")&&"AUTOMATIC"===e}isFilterActive(){return this.types.length>0}getModel(){return{...super.getModel(),types:this.types}}setModel(e){super.setModel(e),this.types=[...this.$filterType.val()]}}function validateEmailList(e,i,n){e.each(function(e,o){const r=$(o),s=getEmailsFromField(r);s&&AGN.Lib.Helpers.isValidEmails(s)?r.val(s.join(",")):i.push({field:r,msg:t(n)})})}function validateEmail(e,i,n){e.each(function(e,o){const r=$(o),s=r.val().trim();AGN.Lib.Helpers.isValidEmail(s)?r.val(s):i.push({field:r,msg:t(n)})})}function validateSubject(e,i){e.each(function(e,n){const o=$(n),r=o.val().trim();!r||r.length<3?i.push({field:o,msg:t("triggerManager.operation.serviceMail.error.subjectToShort")}):r&&r.length>200?i.push({field:o,msg:t("triggerManager.operation.serviceMail.error.subjectToLong")}):o.val(r)})}function getEmailsFromField(e){const t=e.val();let i=t.trim()&&t.trim().split(/[ ,|]+/);return _.map(i,_.trim),i}AGN.Opt.Table.filters.WorkflowStopFilter=WorkflowStopFilter,AGN.Lib.FormBuilder=AGN.Lib.FormBuilder||{},AGN.Lib.FormBuilder.Utils={pushControl:function(e,t){Array.isArray(e)&&e.push(function(e){var i=function(e){var i=e.prototype.constructor;function n(){return i.apply(this,arguments)}return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),n.__proto__=e,t.build&&(n.prototype.build=t.build),t.onRender&&(n.prototype.onRender=t.onRender),Object.defineProperty(n,"definition",{get:t.definition}),n}(e);return e.register(t.newControlName,i),i})}},AGN.Lib.FormBuilder=AGN.Lib.FormBuilder||{},AGN.Lib.FormBuilder.EmmControls={mediapool:function(e){return{newControlName:"mediapool",build:function(){return{field:this.markup("img",null,{}),layout:"agnMediapool"}},onRender:function(i){this.preview&&$(i.target).parents(".form-field").find(".field-label").html(t("userform.formBuilder.mediapoolImage")+": "+e.options.mediapoolImages[this.config.image]);var n=$(this.element);n.attr("src",this.config.image).attr("alt",this.config.alt),this.config.width&&n.attr("width",this.config.width),this.config.height&&n.attr("height",this.config.height)},definition:function(){return{i18n:{default:t("userform.formBuilder.mediapoolImage")}}}}},nextform:function(){return{newControlName:"formName",build:function(){return{field:this.markup("input",null,{name:"agnFN",type:"hidden"}),layout:"hidden"}},onRender:function(e){this.preview&&$(e.target).parents(".form-field").find(".field-label").html(t("userform.formBuilder.nextForm")+": "+this.config.formName),$(this.element).attr("value",this.config.formName)},definition:function(){return{i18n:{default:t("userform.formBuilder.nextForm")}}}}}},(()=>{AGN.Lib.FormBuilder=AGN.Lib.FormBuilder||{};const e={agnCTOKEN:t("userform.formBuilder.tooltips.agnCTOKEN"),agnUID:t("userform.formBuilder.tooltips.agnUID")},i={gender:[{selected:!0,label:"Gender Male",value:0},{selected:!1,label:"Gender Female",value:1}]},n=["agnCTOKEN","agnUID","agnMAILINGLIST","agnSUBSCRIBE"];function o(e){var t=$(e.target).parents(".form-field"),i=this.config.emmField,n=t.data("currentEmmField"),o=i!==n;!n?t.data("currentEmmField",i):o&&(t.data("currentEmmField",i),function(e,t,i,n){const o=e.find(".form-elements"),r=o.find('input[name="value"]'),a=o.find('input[name="name"]'),c="none"!==i;var d=c?"$!customerData."+i:"",u=c?i:"";r.val(d),a.val(u),c?a.prop("disabled",!0):a.prop("disabled",!1);"select"===t.type&&function(e,t,i,n){const o=l(e);if(o.length>=2){s(i,n,{values:o,name:e})}else if(l(t).length>0){s(i,n,{values:[],name:e})}}(i,n,e,t)}(t,this.config,i,n))}function r(t){var i=this.config.id.replace("-preview",""),r=$(t.target),s=r.parents(".form-field").find(".form-elements").find(".emmField-wrap");n.includes(i)?s.hide():s.show(),n.includes(i)||o.apply(this,arguments),function(t,i){const n=e[i];if(!n)return void t.hide();t.removeAttr("tooltip").show(),AGN.Lib.Tooltip.createTip(t,n)}(r.parents(".form-field").find(".tooltip-element"),i)}function s(e,t,i){const n=e.parents(".js-form-builder"),o=n.data("formBuilder");o.actions.removeField(e.prop("id")),a(function(){const r=_.mergeWith(t,i,function(e,t){return _.isArray(t)?t:void 0});o.actions.addField(r,function(e,t){let i=0;return _.each(t.find(".form-field"),(t,n)=>{$(t).prop("id")===e.prop("id")&&(i=n)}),i}(e,n))}),a(function(){o.actions.toggleFieldEdit(o.actions.getCurrentFieldId())})}function a(e){window.setTimeout(()=>e(),0)}function l(e){const t=i[e];return t||[]}AGN.Lib.FormBuilder.Templates={default:function(){return{onRender:o}},hidden:function(){return{onRender:r}},dateForRender:function(e){const t=$.extend({},this.config,{className:this.config.className||""});return{field:this.markup("input",null,t),onRender:function(t){$(t.target).append(`<input type="hidden" name="${e.name}_format" value="yyyy-MM-dd">`)}}}}})(),(()=>{const e=AGN.Lib.FormBuilder.Utils,i=AGN.Lib.FormBuilder.EmmControls,n=AGN.Lib.FormBuilder.Templates,o=`\n        <html>\n            <head>\n                <link rel="stylesheet" href="${AGN.url("/assets/form.css",!0)}">\n                {{ if (cssUrl) { }}\n                    <link rel="stylesheet" href="{{- cssUrl }}">\n                {{ } }}\n            </head>\n            <body>\n                <div class="container" style="margin-top: 50px;">\n                    <form action="form.action">\n                        {{= generatedHTML}}\n                    </form>\n                </div>\n            </body>\n        </html>\n    `,r=["required","label","description","name","className","placeholder","value"],s=function(e,t){this.options=$.extend({},t);var i=this;i.$el=$(e),i.$target=$(this.$el.data("target")),i.initCustomControls(),i.builder=i.$el.formBuilder(s.getBuilderDefaultOptions(i)),i.defered=$.Deferred(),i.options.data&&i.setJson(i.options.data),i.builder.promise.then(function(){i.builder=i.$el.data("formBuilder"),i.defered.resolve()})};function a(e,i){i.val(e.generateHtml()),AGN.Lib.Messages(t("defaults.success"),t("userform.formBuilder.success.htmlGenerated"),"success")}function l(e){const i={formName:{formName:{label:t("userform.formBuilder.formName"),options:e.options.namesJson.reduce(function(e,t){return e[t]=t,e},{})}},mediapool:{image:{label:t("userform.formBuilder.mediapoolImage"),options:e.options.mediapoolImages},alt:{label:t("userform.formBuilder.imageAlt"),value:""},width:{label:t("userform.formBuilder.imageWidth"),value:0},height:{label:t("userform.formBuilder.imageHeight"),value:0}},date:{emmField:{label:t("userform.formBuilder.emmField"),options:e.options.dateProfileFields}},number:{emmField:{label:t("userform.formBuilder.emmField"),options:e.options.numberProfileFields}},select:{emmField:{label:t("userform.formBuilder.emmField"),options:e.options.profileFieldsForSelect}}};return["text","hidden","textarea","radio-group","checkbox-group"].forEach(n=>{i[n]={emmField:{label:t("userform.formBuilder.emmField"),options:e.options.textProfileFields}}}),i}function c(e){return`${t("userform.formBuilder.template.template")}: ${e}`}s.getBuilderDefaultOptions=function(e){return{roles:{},disabledAttrs:["access","description"],disableFields:["file","autocomplete"],defaultFields:s.defaultFields(e),disabledActionButtons:["data","save"],actionButtons:[{id:"downloadHtml",className:"btn btn-info",label:t("workflow.reaction.download"),type:"button",events:{click:function(){e.downloadHtml.bind(e)()}}},{id:"generateHtml",className:"btn btn-success",label:t("userform.formBuilder.generateHtml"),type:"button",events:{click:function(){e.generateHtmlToTarget.bind(e)()}}}],editOnAdd:!0,typeUserDisabledAttrs:{formName:r,mediapool:r,text:["subtype"],textarea:["subtype"]},typeUserAttrs:l(e),layoutTemplates:{agnMediapool:function(){return document.createElement("span")}},fields:[{type:"text"},{type:"hidden"},{type:"select"},{type:"radio-group"},{type:"checkbox-group"},{type:"number"},{type:"textarea"},{type:"date"}],templates:{text:n.default,hidden:n.hidden,textarea:n.default,date:n.default,select:n.default,"radio-group":n.default,"checkbox-group":n.default,number:n.default},controls:e.controls,i18n:{locale:window.adminLocale,location:AGN.url("/js/lib/formbuilder/translation/")},controlOrder:["header","paragraph","mediapool","","text","date","textarea","number","","select","radio-group","checkbox-group","","hidden","formName","button"],inputSets:s.getDefaultPresetsConfig(e)}},s.defaultFields=function(e){return[{type:"hidden",name:"agnCTOKEN",value:e.options.companyToken},{type:"hidden",name:"agnUID",value:"$!agnUID"}]},s.getDefaultPresetsConfig=function(e){return[{label:c(t("userform.formBuilder.template.subscribe")),name:"subscribe",fields:[{type:"hidden",name:"agnCTOKEN",value:e.options.companyToken,label:" "},{type:"hidden",name:"agnMAILINGLIST",value:"",label:" "},{type:"hidden",name:"agnSUBSCRIBE",value:"1",label:" "},{type:"hidden",name:"agnUID",value:"$!agnUID",label:" "},{type:"text",name:"firstname",value:"$!customerData.firstname",emmField:"firstname",label:"Firstname:"},{type:"text",name:"lastname",value:"$!customerData.lastname",emmField:"lastname",label:"Lastname:"},{type:"text",name:"email",value:"$!customerData.email",emmField:"email",label:"Email:"},{type:"button",subtype:"submit",style:"primary",label:"Subscribe"},{type:"formName",label:" "}]},{label:c(t("userform.formBuilder.template.unsubscribe")),name:"unsubscribe",fields:[{type:"hidden",name:"agnCTOKEN",value:e.options.companyToken,label:" "},{type:"formName",label:" "},{type:"hidden",name:"agnUID",value:"$!agnUID",label:" "},{type:"button",subtype:"submit",style:"primary",label:"Unsubscribe"}]},{label:c(t("userform.formBuilder.template.profile_change")),name:"profile_change",fields:[{type:"hidden",name:"agnCTOKEN",value:e.options.companyToken,label:" "},{type:"hidden",name:"agnUID",value:"$!agnUID",label:" "},{type:"formName",label:" "},{type:"text",name:"firstname",value:"$!customerData.firstname",emmField:"firstname",label:"Firstname:"},{type:"text",name:"lastname",value:"$!customerData.lastname",emmField:"lastname",label:"Lastname:"},{type:"text",name:"email",value:"$!customerData.email",emmField:"email",label:"Email:"},{type:"button",subtype:"submit",style:"primary",label:"Subscribe"}]},{label:c(t("userform.formBuilder.template.other")),name:"other",fields:[{type:"hidden",name:"agnCTOKEN",value:e.options.companyToken,label:" "},{type:"hidden",name:"agnUID",value:"$!agnUID",label:" "}]}]},s.get=function(e,t){var i=$(e),n=i.data("_form-builder");return n||(n=new s(e,t),i.data("_form-builder",n),n)},s.isCreated=function(e){return!!$(e).data("_form-builder")},s.prototype.initCustomControls=function(){this.controls=[],e.pushControl(this.controls,i.mediapool(this)),e.pushControl(this.controls,i.nextform(this))},s.prototype.generateHtml=function(){const e=$("<form/>");let t;return e.formRender({formData:this.builder.actions.getData(),controls:this.controls,templates:{date:n.dateForRender}}),t=o?_.template(o)({generatedHTML:e.html(),cssUrl:this.options.cssUrl}):e.html(),e.remove(),function(e){if(!e||e.length<=0)return e;return e.replace(/<\/.*?>/g,"$&\n")}(t)},s.prototype.generateHtmlToTarget=function(){const e=this.$target;if(!e)return;const t=AGN.Lib.Editor.get(e);if(!t)return;const i=this.options.confirmationModal;i&&t.val()?AGN.Lib.Confirm.from(i).done(()=>a(this,t)):a(this,t)},s.prototype.downloadHtml=function(){const e=window.btoa(this.generateHtml());let t="Generated form.txt";this.options.formName&&(t=this.options.formName+".txt");const i=document.createElement("a");i.setAttribute("href","data:application/octet-stream;charset=utf-8;base64,"+e),i.setAttribute("download",t),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)},s.prototype.getJson=function(){return this.builder.actions.getData("json",!1)},s.prototype.getData=function(){return this.builder.actions.getData()},s.prototype.setJson=function(e){var t=this;t.defered.done(function(){return t.builder.actions.setData(e)})},s.prototype.promise=function(){return this.defered.promise()},s.prototype.getInitJson=function(){return JSON.stringify(this.options.data)},s.prototype.isChanged=function(){const e=this;return e.options.data?e.getInitJson()!==e.getJson():_.isEqual(e.getData(),s.defaultFields(e))},AGN.Lib.FormBuilder.FormBuilder=s})(),AGN.Lib.CoreInitializer.new("ace",["form"],(e=$(document))=>{_.each(e.find(".js-editor, .js-editor-text, .js-editor-eql, .js-editor-css"),function(e){AGN.Lib.Editor.get($(e))})}),(()=>{function e(e,i,n){i.change(()=>{t(e,i,n),i.is("[data-stored-field]")&&AGN.Lib.Storage.saveChosenFields(i)})}function t(e,t,i){const n=i?!t.is(":checked"):t.is(":checked");e.toggleClass("hidden",n),AGN.Lib.CoreInitializer.run("truncated-text-popover",e)}function i(e,t,i,o){t.change(function(){n(e,t,i,o)})}function n(e,t,i,n){const o=t.val(),r=Array.isArray(o)?o:[o],s=r.some(e=>i.includes(e));n?e.toggleClass("hidden",!(s||e.is("[data-show-if-no-selection]")&&0===r.length)):e.toggleClass("hidden",s),e.closest("select").trigger("change.select2"),AGN.Lib.CoreInitializer.run("truncated-text-popover",e)}AGN.Lib.CoreInitializer.new("checkbox-hider",function(o=$(document)){const r=AGN.Lib.Storage;_.each(o.find("[data-show-by-checkbox]"),i=>{const n=$(i),o=$(n.data("show-by-checkbox"));o.is("[data-stored-field]")&&r.restoreChosenFields(o),t(n,o,!0),e(n,o,!0)}),_.each(o.find("[data-hide-by-checkbox]"),i=>{const n=$(i),o=$(n.data("hide-by-checkbox"));t(n,o,!1),e(n,o,!1)}),_.each(o.find("[data-show-by-select]"),e=>{const t=$(e),o=$(t.data("show-by-select")),{showBySelectValues:r=""}=t.data();if(o.exists()&&(""!==r||t.is("[data-show-if-no-selection]"))){const e=r.toString().split(",").map(e=>e.trim());n(t,o,e,!0),i(t,o,e,!0)}}),_.each(o.find("[data-hide-by-select]"),e=>{const t=$(e),o=$(t.data("hide-by-select")),{hideBySelectValues:r=""}=t.data();if(o.exists()&&(""!==r||t.is("[data-hide-if-no-selection]"))){const e=r.toString().split(",").map(e=>e.trim());n(t,o,e,!1),i(t,o,e,!1)}})})})(),(()=>{const e=AGN.Lib.AutoSave,t=AGN.Lib.Helpers;AGN.Lib.CoreInitializer.new("auto-save",["ace"],function(i=$(document)){_.each(i.find("[data-autosave-scope]"),i=>{const n=$(i),o=n.data("autosave-scope"),r=n.data("autosave-period");let s=n.all("[data-autosave]");if(s.exists()){e.initialize(o,function(){if(s=s.filter(function(e,t){return document.body.contains(t)}),s.length>0){const e={};return _.each(s,t=>{const i=$(t);e[`value#${i.data("autosave")}`]=i.val()}),e}return!1},function(e){const i=$.map(s,function(i){const n=$(i),o=`value#${n.data("autosave")}`;if(o in e){const i=n.val(),r=e[o];if(i!=r){if(!n.is("[data-autorestore]"))return{target:n,value:r};t.setValue(n,r)}return null}});return i.length>0&&i},function(e){_.each(e,e=>t.setValue(e.target,e.value))},r)}})})})(),AGN.Lib.DomInitializer.new("autosubmit",function(e){setTimeout(()=>AGN.Lib.Form.get(e).submit(),100)}),AGN.Lib.CoreInitializer.new("char-counter",["growing-textarea"],function(e=$(document)){function i(e,i){e.text(t("fields.content.charactersEntered",i.val()?.length||0))}_.each(e.find("[data-show-char-counter]"),function(e){const t=$(e);(t.is("input")||t.is("textarea"))&&function(e){const t=$('<span class="text-truncate">');if("tile-footer"===e.data("show-char-counter"))!function(e,t){let i=e.find(".tile-footer");i.exists()||(i=$('<div class="tile-footer text-secondary fs-3 border-top">'),e.append(i));i.prepend(t)}(e.closest(".tile"),t);else{(e.is("textarea")?e.parent():e).before($('<div class="char-counter"></div>').append(t))}i(t,e),e.on("change input editor:create editor:change",_.throttle(()=>i(t,e),100))}(t)})}),AGN.Lib.CoreInitializer.new("colorpicker",function(e=$(document)){const t=AGN.Lib.Colorpicker;e.find(".js-colorpicker").each(function(){const e=$(this);t.get(e)||new t(e)})}),AGN.Lib.CoreInitializer.new("csrf",function(e=$(document)){const t=AGN.Lib.CSRF;e.find('meta[name="_csrf_header"]').each(function(){const e=$(this).attr("content");t.setHeaderName(e),t.setCookieName(e)}),e.find('meta[name="_csrf_parameter"]').each(function(){t.setParamName($(this).attr("content"))}),AGN.Lib.CSRF.isProtectionEnabled()&&e.find(`div > input[type="hidden"][name="${t.getParameterName()}"]:only-child`).parent("div").hide()}),(()=>{const e=AGN.Lib.Helpers,i=AGN.Lib.Template,n="agn:datepicker-opt";AGN.Lib.CoreInitializer.new("datepicker",function(o=$(document)){function r(e,t){(e.minDate||e.maxDate)&&t.datepicker("setDate",$.datepicker.parseDate(e.dateFormat,t.val()))}function s(e){return e.replace(/M/g,"m").replace(/D/g,"d").replace("YYYY","yyyy").replace("yyyy","yy")}function a(e){if(e.data(`${n}-minFor`)){const t=$(e.data(`${n}-minFor`));t.datepicker("option","minDate",t.data(`${n}-initialMinDate`))}if(e.data(`${n}-maxFor`)){const t=$(e.data(`${n}-maxFor`));t.datepicker("option","maxDate",t.data(`${n}-initialMaxDate`))}}function l(e,t){t.addClass("form-control has-arrows"),t.attr("data-select-options","minimumResultsForSearch: -1, dropdownParent: '#ui-datepicker-div'")}_.each(o.find(".js-datepicker"),o=>{const c=$(o);c.removeClass("hasDatepicker");let d={showWeek:!0,changeMonth:!0,changeYear:!0,selectOtherMonths:!0,dateFormat:window.adminDateFormat,showButtonPanel:!0,showOtherMonths:!0,firstDay:1,weekHeader:t("calendar.common.weekNumber"),monthNamesShort:t("date.monthsFull"),dayNamesMin:t("date.weekdaysShort"),onUpdateDatepicker:function(e){!function(e){const n=$(".ui-datepicker-buttonpane");n.append(i.text("datepicker-btn",{id:"clear-datepicker-btn",iconClass:"icon-undo-alt",text:t("defaults.reset")})),n.find("#clear-datepicker-btn").on("click",()=>function(e){e.val(""),e.datepicker("setDate",null),e.datepicker("hide"),e.blur(),a(e)}(e)),n.find(".ui-datepicker-current").exists()&&(n.append(i.text("datepicker-btn",{id:"today-datepicker-btn",iconClass:"icon-calendar-alt",text:t("defaults.today")})),n.find("#today-datepicker-btn").on("click",()=>function(e){e.datepicker("setDate",new Date),e.datepicker("hide"),e.trigger("change"),e.blur()}(e)))}(c),function(e,t){l(t,e.find("select.ui-datepicker-month")),l(t,e.find("select.ui-datepicker-year")),AGN.runAll(e)}(e.dpDiv,c)},beforeShow:function(e,t){if(c.attr("readonly"))return!1;t.dpDiv.removeClass("hidden"),c.parent().addClass("is-active")},onClose:function(){c.parent().removeClass("is-active")}};d=_.merge({},d,e.objFromString(c.data("datepicker-options")));let u=d.dateFormat?.toLowerCase()?.replace(/d+/,"dd")?.replace(/m+/,"mm")?.replace(/y+/,"yyyy");c.inputmask(u,{placeholder:"_",showMaskOnHover:!1}),d.dateFormat=s(d.dateFormat),d.formatSubmit&&(d.altFormat=s(d.formatSubmit),d.altField=function(e,t,i){const n=function(e,t,i){const n=$.datepicker.parseDate(t,e);return $.datepicker.formatDate(i,n)}(e.val(),t,i),o=$(`<input type="hidden" name="${e.attr("name")}" value="${n}">`);return e.attr("name",""),o.insertAfter(e),o}(c,d.dateFormat,d.altFormat)),c.data(`${n}-initialMinDate`,d.minDate),c.data(`${n}-initialMaxDate`,d.maxDate),c.datepicker(d),c.datepicker("widget").addClass("hidden");const h=c.closest("[data-date-range]");if(h.exists()){const e=h.find(".js-datepicker");c.is(e.get(0))?d.minFor=$(e.get(1)):d.maxFor=$(e.get(0))}if(d.maxFor){c.data(`${n}-maxFor`,d.maxFor);const e=()=>{r(d,c);const e=c.datepicker("getDate");e?d.maxFor.datepicker("option","maxDate",e):a(c)};c.on("change",e),e()}if(d.minFor){c.data(`${n}-minFor`,d.minFor);const e=()=>{r(d,c);const e=c.datepicker("getDate");e?d.minFor.datepicker("option","minDate",e):a(c)};c.on("change",e),window.setTimeout(e,100)}r(d,c)}),_.each(o.find(".js-timepicker"),function(t){let i,n,o=$(t),r={mask:"h:halfs",oncomplete:function(){o.trigger("timepicker:complete")},onincomplete:function(){o.trigger("timepicker:incomplete")}};i=_.merge({},r,e.objFromString(o.data("timepicker-options"))),n=i.mask,delete i.mask,o.inputmask(n,i),o.attr("placeholder",o.data("_inputmask").opts.placeholder)})})})(),AGN.Lib.CoreInitializer.new("delegate",function(e){e||(e=$(document)),e.all("[data-delegate]").each(function(){var e=$(this),t=e.data("delegate"),i=e.data("delegate-events")||"click";e.on(i,function(e){var i=$(t);i.length>0&&i.trigger($.Event(e))})})}),AGN.Lib.CoreInitializer.new("display-dimensions",function(e=$(document)){_.each(e.find("[data-display-dimensions]"),e=>{const t=$(e),i=AGN.Lib.Helpers.objFromString(t.data("display-dimensions")).scope,n=t.parents(i).find("[data-dimensions]");t.ensureLoad(function(){const t=e.naturalWidth,i=e.naturalHeight;n.html(`${t} x ${i} px`)})})}),AGN.Lib.CoreInitializer.new("dragster",function(e){e||(e=$(document)),e.find(".dropzone").each(function(){new Dragster(this)})}),AGN.Lib.CoreInitializer.new("dropzone",function(){Dropzone.autoDiscover=!1}),AGN.Lib.CoreInitializer.new("editable-view",function(e=$(document)){const t=AGN.Lib.EditableView,i=AGN.Lib.EditableTile;e.all(t.SELECTOR).each(function(){const e=$(this);new t(e,e.data("editable-view"))}),e.is(i.SELECTOR)&&(t.get(e)?.add(e),$(window).trigger("agn:resize"))}),AGN.Lib.CoreInitializer.new("endless-scroll",function(e=$(document)){e.find("[data-endless-scroll]").each(function(){const e=$(this);let t={};if(e.is("[data-endless-scroll-opts]")){const i=AGN.Lib.Helpers.objFromString(e.data("endless-scroll-opts"));t=_.extend(t,i)}new AGN.Lib.EndlessScroll(e,e.data("endless-scroll"),t)})}),(()=>{const e=AGN.Lib.Form;AGN.Lib.CoreInitializer.new("form",["select","switchable-tile","loader"],function(t=$(document)){t.find("form input[type=text], form input[type=password]").on("keyup keypress",function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1});const i=t.all("form[data-form-focus]").first();i.exists()&&setTimeout(()=>{const t=i.find(`[name="${i.data("form-focus")}"]`);!t.exists()||t.is(":disabled")||t.is(":hidden")||(t.trigger("focus"),e.scrollToField(t))},10),_.each(t.all("form"),t=>e.get($(t)))})})(),AGN.Lib.DomInitializer.new("formbuilder",function(e=$(document)){let i=this.config;const n=$(`script#${CSS.escape("config:formbuilderCommon")}[type="application/json"]`);1===n.length&&(i=$.extend(n.json(),i)),_.each(e.find(".js-form-builder"),e=>{AGN.Lib.FormBuilder.FormBuilder.get(e,i).promise().then(function(){$(e).find(".form-actions button").each(function(){const e=$(this);AGN.Lib.Tooltip.create(e,{title:e.text()})})})}),document.styleSheets[0].insertRule(`:root { --warn-dialog-title: "${t("defaults.warning")}"; }`,0)}),AGN.Lib.CoreInitializer.new("growing-textarea",function(e=$(document)){e.all('textarea.form-control:not([class*="js-editor"])').each(function(){const e=$(this);e.closest(".text-area-grow-wrapper").exists()||e.wrap('<div class="text-area-grow-wrapper"></div>'),e.trigger("input")})}),AGN.Lib.CoreInitializer.new("hover-dropdown-btn",function(e=$(document)){const t="agn-isActivedDropdownMenu";function i(e,t,i){t.attr("aria-expanded",i),e.toggleClass("open",i)}_.each(e.find(".js-btn-dropdown"),e=>{const n=$(e);n.removeAttr("data-bs-toggle");const o=n.closest(".dropdown"),r=o.find(".dropdown-menu");n.attr("aria-expanded",!1),n.data(t,!1),n.on("mouseenter",()=>{r.css("transform",`translate(0px, ${n.outerHeight()+5}px)`),i(o,n,!0)}),r.on("mouseenter",()=>n.data(t,!0)),n.on("mouseleave",()=>{setTimeout(()=>{n.data(t)||n.is(":hover")||i(o,n,!1)},400)}),r.on("mouseleave",()=>{n.data(t,!1),i(o,n,!1)})})}),AGN.Lib.CoreInitializer.new("iframe",function(e=$(document)){e.find("iframe:not(.js-fixed-iframe):not(.jodit-wysiwyg_iframe)").each(function(){const e=this,t=$(this);if(t.hasClass("js-simple-iframe")){const i=t.parent(),n=i.parent(),o=t.data("max-width"),r="100%"!==o,s=parseInt(o),a=t.data("media-query"),l=e=>{const t=e.body,i=e.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight)},c=e=>{const t=e.body,i=e.documentElement;return Math.max(t.scrollWidth,t.offsetWidth,i.clientWidth,i.scrollWidth,i.offsetWidth)},d=()=>{const o=e.contentDocument||e.contentWindow?.document;if(o){let e=1;if(r){const i=c(o);a?(i>s&&(e=s/i,$(o.documentElement).css("zoom",`calc(${e})`)),t.width(s)):t.width(i)}t.height(l(o)*e);const i=t.contents().find("body");i.css("overflow-y","hidden"),a&&i.css("overflow-x","hidden")}r&&(n.width("auto"),t.width()>s&&s>n.width()?i.width(t.width()):i.width(Math.min(s,n.width())))};t.off("load.iframe"),t.on("load.iframe",function(){window.setTimeout(()=>{d();const t=$(e.contentDocument.body);"function"==typeof t.imagesLoaded&&t.imagesLoaded().progress(_.throttle(d,100)).always(d),$(window).off("viewportChanged.iframe",d),$(window).on("viewportChanged.iframe",d)},50)})}else t.on("load.iframe",function(){window.setTimeout(()=>{t.iFrameResize({heightCalculationMethod:"grow",enablePublicMethods:!0})},50)})})}),AGN.Lib.CoreInitializer.new("image-editor",function(e=$(document)){_.each(e.find("#editor-canvas"),e=>{const t=e.getContext("2d"),i=new Image;i.src=$("#editor-img").attr("src"),i.onload=function(){const e=i.width,n=i.height;t.canvas.width=e,t.canvas.height=n,t.drawImage(i,0,0,e,n)}})}),AGN.Lib.CoreInitializer.new("input-mask",function(e=$(document)){_.each(e.find(".js-inputmask"),e=>{const t=$(e),i=_.merge({},AGN.Lib.Helpers.objFromString(t.data("inputmask-options"))),n=i.mask;delete i.mask,t.inputmask(n,i)})}),AGN.Lib.CoreInitializer.new("input-popover",["popover"],(e=$(document))=>{e.all('input[type="text"]').each(function(){const e=$(this);let t=AGN.Lib.Popover.get(e);t||(t=AGN.Lib.Popover.create(e,{content:()=>e.val()}),t.inputTruncatedTextPopover=!0,e.is(":truncated")||t.disable())})}),AGN.Lib.CoreInitializer.new("input-table",function(e=$(document)){_.each(e.find("[data-input-table]"),e=>new AGN.Lib.InputTable($(e)))}),$.fn.queryBuilder.defaults({templates:{group:'\n<dl id="{{= it.group_id }}" class="rules-group-container">\n  <dt class="rules-group-header">\n    <div class="group-conditions switch">\n      {{~ it.conditions: condition }}\n        <input id="qb-codition-btn-{{= condition }}-group-{{= it.group_id }}" type="radio" name="{{= it.group_id }}_cond" value="{{= condition }}">\n        <label for="qb-codition-btn-{{= condition }}-group-{{= it.group_id }}">{{= it.translate("conditions", condition) }}</label>\n      {{~}}\n    </div>\n    \n    <div class="group-actions">\n      <button type="button" class="btn btn-secondary btn-icon" data-add="rule" data-tooltip="{{= it.translate("add_rule") }}">\n        <i class="{{= it.icons.add_rule }}"></i>\n      </button>\n      {{? it.settings.allow_groups===-1 || it.settings.allow_groups>=it.level }}\n        <button type="button" class="btn btn-secondary btn-icon" data-add="group" data-tooltip="{{= it.translate("add_group") }}">\n          <i class="{{= it.icons.add_group }}"></i>\n        </button>\n      {{?}}\n      {{? it.level>1 }}\n        <button type="button" class="btn btn-danger btn-icon" data-delete="group" data-tooltip="{{= it.translate("delete_group") }}">\n          <i class="{{= it.icons.remove_group }}"></i>\n        </button>\n      {{?}}\n    </div>\n    \n    {{? it.settings.display_errors }}\n      <div class="error-container"><i class="{{= it.icons.error }}"></i></div>\n    {{?}}\n  </dt>\n  <dd class=rules-group-body>\n    <ul class=rules-list></ul>\n  </dd>\n</dl>'}}),$.fn.queryBuilder.defaults({templates:{rule:'\n<li id="{{= it.rule_id }}" class="rule-container">\n  <div class="rule-header">\n    <div class="rule-actions">\n      <button type="button" class="btn btn-icon btn-danger" data-delete="rule">\n        <i class="{{= it.icons.remove_rule }}"></i>\n      </button>\n    </div>\n    <div class="rule-operator-conditions-container"></div>\n  </div>\n  {{? it.settings.display_errors }}\n    <div class="error-container"><i class="{{= it.icons.error }}"></i></div>\n  {{?}}\n  <div class="rule-filter-container"></div>\n  <div class="rule-operator-container"></div>\n  <div class="rule-value-container"></div>\n</li>'}}),$.fn.queryBuilder.defaults({templates:{filterSelect:'\n{{ var optgroup = null; }}\n<select class="form-control" name="{{= it.rule.id }}_filter" data-select-options="dropdownAutoWidth: true">\n  {{? it.settings.display_empty_filter }}\n    <option value="-1">{{= it.settings.select_placeholder }}</option>\n  {{?}}\n  {{~ it.filters: filter }}\n    {{? optgroup !== filter.optgroup }}\n      {{? optgroup !== null }}</optgroup>{{?}}\n      {{? (optgroup = filter.optgroup) !== null }}\n        <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">\n      {{?}}\n    {{?}}\n    <option value="{{= filter.id }}">{{= it.translate(filter.label) }}</option>\n  {{~}}\n  {{? optgroup !== null }}</optgroup>{{?}}\n</select>'}}),$.fn.queryBuilder.defaults({templates:{ruleValueSelect:'{{ var optgroup = null; }} <select class="form-control" name="{{= it.name }}" {{? it.rule.filter.multiple }}multiple{{?}}>   {{? it.rule.filter.placeholder }}     <option value="{{= it.rule.filter.placeholder_value }}" disabled selected>{{= it.rule.filter.placeholder }}</option>   {{?}}   {{~ it.rule.filter.values: entry }}     {{? optgroup !== entry.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = entry.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= entry.value }}">{{= entry.label }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>'}}),$.fn.queryBuilder.defaults({icons:{add_group:"icon icon-plus-circle",add_rule:"icon icon-plus",remove_group:"icon icon-trash-alt",remove_rule:"icon icon-trash-alt",error:"icon icon-exclamation-triangle"}}),AGN.Lib.CoreInitializer.new("js-table",function(e=$(document)){e.all("[data-js-table]").each(function(){const e=$(this),t=e.all(".table-wrapper"),i=e.data("js-table");if(!t.exists()||!i)return;const n=$(`script#${CSS.escape(i)}`);if(!n.exists())return void console.warn(`Config for JS table (${i}) not found!`);const o=n.json();let r;r=t.data("web-storage")?_.merge(AGN.Lib.WebStorage.get(t.data("web-storage"))||{},o.options||{}):o.options||{},new AGN.Lib.Table(t,o.columns,o.data,r).applyFilter()})}),AGN.Lib.CoreInitializer.new("load",function(e=$(document)){_.each(e.find("[data-load]"),e=>{window.setTimeout(()=>AGN.Lib.Load.load($(e)),100)})}),AGN.Lib.CoreInitializer.new("loader",function(e=$(document)){const t=AGN.Lib.Template;_.each(e.find("[data-custom-loader]"),e=>{"processing"===$(e).data("custom-loader")&&function(e){const i=$($(e).data("resource-selector"))||$(e),n=t.dom("processing-loader",{targetForm:`#${$(e).attr("id")}`});$(e).on({"form:loadershow":()=>i.html(n),"form:loaderhide":()=>n.remove()})}(e)})}),AGN.Lib.DomInitializer.new("logon-complete",function(e){const t=AGN.Lib.Form.get(e),i={};if(window.adminId=this.config.adminId,this.config){$.each(this.config.webStorageBundleNames,function(e,t){try{const e=AGN.Lib.Storage.get(`web-storage#${t}`);null!=e&&(i[t]=e)}catch(e){console.error(e)}});const e=AGN.Lib.Storage.get("login-page")||{};AGN.Lib.Storage.set("login-page",e)}t.setValue("webStorageJson",JSON.stringify(i)),t.submit()}),AGN.Opt.Components.MailingContentLock={manageLock:function(e,t,i){if(e>0&&t){const t=Date.now();let i;return i=setInterval(function(){t+108e5>Date.now()?$.ajax({url:AGN.url(`/mailing/ajax/${e}/lock.action`),type:"POST",success:e=>{!0!==e.success&&clearInterval(i)},statusCode:{404:function(){clearInterval(i)}}}):(clearInterval(i),$(document).trigger("ajax:unauthorized"),$.ajax({url:AGN.url("/logout.action"),type:"POST",success:()=>{AGN.Lib.Modal.fromTemplate("session-expired").on("modal:close",()=>AGN.Lib.Page.reload(AGN.url("/logon.action")))}}))},45e3),!0}return AGN.Lib.Modal.fromTemplate("mailing-locked",{username:i}),!1}},AGN.Lib.DomInitializer.new("mailing-content-overview",function(e,t){const i=this.config,n=$("#myDatePicker"),o=$("#myTimePicker");if(!t){var r=AGN.Lib.Storage.get("mailings-content-dynNameID");if(r){var s=$("tr[data-dyn-name-id='"+r.dynNameID+"']");if(s.exists()){var a=s.position().top;setTimeout(function(){$("body").scrollTop(a)},1),AGN.Lib.Storage.set("mailings-content-dynNameID",{dynNameID:0})}}}if(n.exists()&&(n.on("change",function(){const e=n.datepicker("getDate");$("#startDay").val(e?e.getDate():0),$("#startMonth").val(e?e.getMonth()+1:0),$("#startYear").val(e?e.getFullYear():0)}),o.on("timepicker:complete",function(){var e=o.val();$("#startHour").val(e.substr(0,2)),$("#startMinute").val(e.substring(3,5))}),o.on("timepicker:incomplete",function(){$("#startHour").val(0),$("#startMinute").val(0)})),!i.isEditableMailing||!AGN.Opt.Components.MailingContentLock.manageLock(i.mailingId,i.isMailingExclusiveLockingAcquired,i.anotherLockingUserName)){var l=$('[data-controls-group="editing"]');l.prop("disabled",!0),l.addClass("disabled")}}),AGN.Lib.Controller.new("mailing-followup-options",function(){let e,t="",i=[];this.addDomInitializer("mailing-followup-options",function(){e=$("#followUpType"),t=$("#lightWeightMailingList"),i=this.config.additionalOptions,n(),t.on("change",function(){n()})});const n=function(){const n=AGN.Lib.Select.get(t).getSelectedValue();e.children(".advertisingOption").remove(),n&&parseInt(n)>0&&$.get(AGN.url(`/mailing/ajax/${n}/isAdvertisingContentType.action`),t=>{t?.success&&e.append(AGN.Lib.Template.text("followupAdvertisingOptions",{items:i}))})}}),AGN.Lib.DomInitializer.new("mediapool-image-pick",function(e){let t;function i(t){if(t){const i=function(e){return e.find("[data-mediapool-image-info]").json()}(t);i&&AGN.Lib.Confirm.get(e).positive(i)}else AGN.Lib.Messages.alert("messages.error.nothing_selected")}function n(e,t){const i=e.find("input[type=checkbox]");e.toggleClass("picked",t),i.prop("checked",t)}AGN.Lib.Action.new({click:"tbody tr"},function(){t&&n(t,!1),t=this.el,n(t,!0)},e),AGN.Lib.Action.new({dblclick:"tbody tr"},function(){i(this.el)},e),this.addAction({click:"mpAcceptImage"},function(){i(t)})}),AGN.Lib.CoreInitializer.new("multi-editor",function(e=$(document)){const i=AGN.Lib.Helpers,n=AGN.Lib.Modal,o=AGN.Lib.FormBuilder.FormBuilder,r=AGN.Lib.Editor;class s{constructor(e){const t=e.data("_multi_editor");if(t)return t;this.$el=e,this.$target=e.find("[data-enlarge-target]"),this.$target.exists()||(this.$target=this.$el),this.$container=this.$target.parent(),this._isQbEditor=this.$target.find("#queryBuilderRules").exists(),this.#_t()}static defaultOptions(){return{btnText:t("defaults.apply")}}#_t(){this.$resizeBtn.on("click",()=>this.resize()),this.updateResizeBtn()}resize(){this.enlarged?this.apply():this.enlarge(),this.updateResizeBtn(),r.get(this.editor$)?.resize()}enlarge(){this.toggleWysiwygIfSelected(!1),this.createBackup(),this.showModal(),this.toggleWysiwygIfSelected(!0)}createBackup(){this.backup={},_.each(this.editor$,e=>this.backup[$(e).attr("id")]=r.get($(e)).val()),_.each(this.$el.find(".js-form-builder"),e=>this.backup[$(e).attr("id")]=o.get(e).getJson()),_.each(this.$el.find("#queryBuilderRules"),e=>{const t=$(e).parent().prop("queryBuilder");this.backup.queryBuilderRules=t.getRules({allow_invalid:!0,skip_empty:!1})})}showModal(){const e=this.$resizeBtn.data("enlarged-modal")||"multi-editor-modal",t=i.objFromString(this.$resizeBtn.data("modal-set"));this.$modal=n.fromTemplate(e,_.extend(s.defaultOptions(),t)),this.$placeholder.replaceWith(this.$target),this._isQbEditor&&AGN.Lib.CoreInitializer.run("select",this.$target),this.$applyBtn.on("click",()=>this.resize()),this.$modal.on("hide.bs.modal",()=>this.hideModal()),this.$el.trigger("enlarged")}hideModal(){this.applyChanges||this.cancel(),this.applyChanges=!1,this.updateResizeBtn()}cancel(){this.toggleWysiwygIfSelected(!1),this.restore(),this.$container.append(this.$target),this._isQbEditor&&AGN.Lib.CoreInitializer.run("select",this.$target),this.toggleWysiwygIfSelected(!0)}restore(){Object.entries(this.backup).forEach(([e,t])=>{const i=`#${e}`;"queryBuilderRules"===e?$(i).parent().prop("queryBuilder")?.setRules(t):o.isCreated(i)?o.get(i).setJson(t):this.$el.find(i).data("_editor")?.val(t)})}apply(){this.applyChanges=!0,this.toggleWysiwygIfSelected(!1),n.getInstance(this.$modal).hide(),this.$container.append(this.$target),this._isQbEditor&&AGN.Lib.CoreInitializer.run("select",this.$target),this.toggleWysiwygIfSelected(!0)}toggleWysiwygIfSelected(e){this.wysiwygSelected&&this.$el.trigger(e?"tile:show":"tile:hide")}get editor$(){return this.$el.find(".js-editor")}get wysiwygSelected(){return this.$el.find('[data-multi-editor-option="wysiwyg"]').is(".active")}get enlarged(){return this.$target.closest(".modal").length>0}get $resizeBtn(){return this.$el.find("[data-enlarged-modal]")}get $applyBtn(){return this.$modal?.find("[data-apply-enlarged]")}get $placeholder(){return this.$modal?.find(".modal-body [data-placeholder]")}updateResizeBtn(){this.$resizeBtn.exists()&&(this.$resizeBtn.find("i").toggleClass("icon-expand-arrows-alt",!this.enlarged).toggleClass("icon-compress-arrows-alt",this.enlarged),AGN.Lib.Tooltip.remove(this.$resizeBtn),AGN.Lib.Tooltip.createTip(this.$resizeBtn,this.enlarged?"":t("defaults.enlargeEditor")))}}_.each(e.find("[data-multi-editor]"),e=>new s($(e)))}),AGN.Lib.CoreInitializer.new("number-input",(e=$(document))=>{e.on("keypress",'input[type="number"]',function(e){8!==e.which&&0!==e.which&&(e.which<48||e.which>57)&&e.preventDefault()})}),AGN.Lib.CoreInitializer.new("popout-window",function(e=$(document)){_.each(e.find("[data-popout-window]"),e=>{const t=$(e),i=t.attr("src");i&&t.parent().append($("<figure>").append(t).append($(`\n          <figcaption>\n            <a class="clickable flex-center overflow-hidden" data-popup="${i}" data-bs-dismiss="modal">\n                <span class="text-truncate">${i}</span>\n                <i class="icon icon-external-link-alt"></i>\n            </a>\n          </figcaption>`)))})}),AGN.Lib.CoreInitializer.new("popover",["table-row-actions"],function(e=$(document)){const t=AGN.Lib.Popover,i="data-popover";t.validate(),e.all(`[${i}]`).each(function(){const e=$(this),n=$.extend({content:$.trim(e.attr(i))},e.data("popover-options"));if(n.templateName&&(n.html?function(e,i){let n=null;i.content=()=>{if(n)return n;if(!AGN.Lib.Template.exists(i.templateName))return;const o=AGN.Lib.Template.dom(i.templateName);return AGN.Lib.Helpers.imagesLoaded(o.all("img")).done(i=>{if(n=o,i.length){const i=t.get(e);i&&(i.setContent(),e.is(":hover")&&e.popover("show"))}}),n}}(e,n):n.content=AGN.Lib.Template.text(n.templateName)),n.content){const i=t.getOrCreate(e,n);n.disabled&&i.disable()}})}),AGN.Lib.CoreInitializer.new("preview-table",function(e=$(document)){e.find("[data-preview-table]").each(function(){AGN.Lib.PreviewTable.init($(this))})}),(()=>{function e(e){var i=[];return e.forEach(function(e){var n=$("<option />");n.text(t("date.formats."+e)),n.val(e),i.push($("<div/>").append(n).html())}),i.join("")}function i(e){var t=["DD","MM","YYYY",".","-","_"];if(e)for(var i=0;i<t.length;i++)if(e.startsWith(t[i]))return t[i];return!1}AGN.Lib.CoreInitializer.new("target-group-query-builder-extend",function(){if(window.queryBuilderIsExtended)return;window.queryBuilderIsExtended=!0;let n={};const o=$.fn.queryBuilder,r=o.constructor,s=r.prototype.init,a=r.prototype.validate,l=r.prototype.bindEvents;n=r.utils;const c=r.selectors;Object.assign(c,{rule_include_empty:".rule-include-empty[name*=_include_empty]",rule_operator_conditions_container:".rule-operator-conditions-container",rule_header_inputs:".rule-header :input"}),n.defineModelProperties(r.Rule,["includeEmpty"]),o.extend({init:function(e){return this.on("afterCreateRuleInput",function(e,t){var i=e.builder.optionsByType[t.filter.type];if(i){var n=i.postCreate;n&&"function"==typeof n&&n.call(e.builder,t,i)}}),this.on("afterUpdateRuleOperator",function(e,t){var i=e.builder.optionsByType[t.filter.type];if(i){var n=i.postOperatorUpdate;n&&"function"==typeof n&&n.call(e.builder,t,i)}}),this.on("getGroupTemplate.filter getRuleTemplate.filter",function(e,t){const i=$(e.value);i.find(c.drag_handle).replaceWith('\n                        <button class="btn btn-icon btn-secondary drag-handle" type="button">\n                            <i class="icon icon-arrows-alt"></i>\n                        </button>\n                    '),e.value=i.prop("outerHTML")}),this.on("afterAddGroup",function(e,t){const i=t.$el.parent().closest(".rules-group-container");i.exists()&&!i.hasClass("rules-group-container--nested")&&t.$el.addClass("rules-group-container--nested"),AGN.Lib.CoreInitializer.run("tooltip",t.$el)}),this.setupInitialRule(e),s.call(this,e)},isEmptyOrInitial:function(e){return!(e&&e.rules&&e.rules.length)||!(1!==e.rules.length||!e.rules[0].initialRule&&!e.rules[0].empty)},setupInitialRule:function(e){this.isEmptyOrInitial(e)?(this.initialRule=!0,e.rules=[{initialRule:!0,empty:!0}]):this.initialRule=!1},optionsByType:{date:{availableFormats:function(e){return e&&e.type&&("before"==e.type||"after"==e.type)?["YYYYMMDD"]:["DD.MM.YYYY","YYYYMMDD","DDMMYYYY","MMDD","DDMM","DD","MM","YYYY"]},input:function(i,n){return $(` \n                            <div class="form-check form-switch">\n                                <input id="${i.id}-today" name="today" type="checkbox" role="switch" class="form-check-input">\n                                <label class="form-label form-check-label" for="${i.id}-today">${t("defaults.today")}</label>\n                            </div>\n                            <div class="input-group">\n                                <input class="form-control rounded-2" type="text" id="date-filter"/>\n                                <span id="date-offset-label" class="input-group-text input-group-text--dark hidden">${t("defaults.Days")}</span>\n                            </div>\n                            <div class="qb-dateformat-block">\n                                <label class="form-label">\n                                    <span>${t("date.formats.label")}</span>\n                                    <a href="#" class="icon icon-question-circle" data-help="targets/DateFormat.xml"></a>\n                                </label>\n                                <select class="form-control" id="date-format" data-select-options="dropdownAutoWidth: true">\n                                    ${e(n.availableFormats(n.operator))}\n                                </select>\n                            </div>\n                        `)},postCreate:function(e){const t=e.$el.find("input[name=today]"),i=e.$el.find("#date-offset-label"),n=e.$el.find("#date-filter"),o=e.$el.find("#date-format");t.on("change",function(){const r=t.prop("checked");var s;i.toggleClass("hidden",!r),i.parent().find(".form-control").toggleClass("rounded-2",!r),n.off("change.offset keyup.offset"),e._updating_input||(e._updating_value=!0,r?n.val("+0"):n.val((s=new Date,o.val().replace("DD",AGN.Lib.Helpers.pad(s.getDate(),2)).replace("MM",AGN.Lib.Helpers.pad(s.getMonth()+1,2)).replace("YYYY",AGN.Lib.Helpers.pad(s.getFullYear(),4)))),e._updating_value=!1),r&&n.on("change.offset keyup.offset",function(e){var t=n.val();if(t){var i=parseInt(t);if(!isNaN(i)){var o=(i<0?"":"+")+i;o!=t&&n.val(o)}}else"change"===e.type&&n.val("+0")})})},postOperatorUpdate:function(t,i){var n=t.$el.find("#date-format");n.html(e(i.availableFormats(t.operator))),n.change(),n.trigger("change-date-format")},valueSetter:function(e,t){const i=t.slice(0),n=e.$el.find("input[name=today]"),o=e.$el.find("#date-offset-label"),r=e.$el.find("#date-format");let s,a,l,c=!1;t.length>2?("today"===i.shift()&&(c=!0),l=i.shift(),s=i.shift(),a=i.shift()):(l=i.shift(),"today"===l&&(c=!0,l="+0"),a=i.shift()),o.toggleClass("hidden",!c),o.parent().find(".form-control").toggleClass("rounded-2",!c),function(e,t,i){i&&(t="sub"===i?"-"+Math.abs(t):"+"+Math.abs(t)),e.$el.find("#date-filter").val(t)}(e,l,s),r.val(a),n.prop("checked",c).change()},valueGetter:function(e){var t=[],i=e.$el.find("#date-filter").val(),n=e.$el.find("#date-format").val();return e.$el.find("input[name=today]").is(":checked")?(t.push("today"),t.push(i),function(e,t){-1===Math.sign(e)?t.push("sub"):t.push("add")}(i,t)):t.push(i),t.push(n),t},validate:function(e){if(2==e.length){var t=e[0],n=e[1];return t?"today"==t||!n||(!!function(e,t){if(!e)return!1;var n=function(e){var t=["DD","MM","YYYY"],n=[];for(;e;){var o=i(e);if(!o)return!1;var r=!1,s=!1;if(t.includes(o)&&(r=!0,s=!0,n.length)){var a=n[n.length-1];a.isDigitFragment&&(a.isLenient=!1,s=!1)}n.push({lexeme:o,isDigitFragment:r,isLenient:s}),e=e.substring(o.length)}return!!n.length&&n}(t);if(n){for(var o=0;o<n.length;o++){var r=n[o];if(r.isDigitFragment)if(r.isLenient){var s=e.match("^\\d{1,"+r.lexeme.length+"}");if(!s)return!1;e=e.substring(s[0].length)}else{if(e.length<r.lexeme.length)return!1;if(!e.substr(0,r.lexeme.length).match(/^\d+$/))return!1;e=e.substring(r.lexeme.length)}else{if(!e.startsWith(r.lexeme))return!1;e=e.substring(r.lexeme.length)}}return!e}return!1}(t,n.toUpperCase())||["invalid_format"]):["empty_date"]}if(4==e.length){var o=e[1];if(!o||o!=parseInt(o))return["invalid_expression"]}return!0}}},clearInitialRuleSettings:function(){this.initialRule=!1,$(".initial-rule").removeClass("initial-rule")},isInitial:function(e){return!(1!==e.length||!e[0].$el.hasClass("initial-rule"))||!(!this.initialRule||1!==e.length)&&(e[0].$el.addClass("initial-rule"),!0)},validate:function(e){var t=this,i=t.model.root.rules,n=_.clone(e);return(n=$.extend({skip_filter_validation:!0,skip_empty:!1},n)).skip_filter_validation&&(n.skip_empty=!0),this.isInitial(i)?(t.clearErrors(),!0):(t.clearInitialRuleSettings(),a.call(this,n))},getRuleInput:function(e,t){var i=e.filter,o=e.filter.validation||{},r=e.id+"_value_"+t,s=i.vertical?" class=block":"",a="";if("function"==typeof i.input)a=i.input.call(this,e,r);else if("function"==typeof e.operator.input)a=e.operator.input.call(this,e,r);else if(this.optionsByType[e.filter.type]&&"function"==typeof this.optionsByType[e.filter.type].input)a=this.optionsByType[e.filter.type].input.call(this,e,this.optionsByType[e.filter.type],r);else switch(i.input){case"radio":case"checkbox":n.iterateOptions(i.values,function(e,t){a+="<label"+s+'><input type="'+i.input+'" name="'+r+'" value="'+e+'"> '+t+"</label> "});break;case"select":a=this.getRuleValueSelect(r,e);break;case"textarea":a+='<textarea class="form-control" name="'+r+'"',i.size&&(a+=' cols="'+i.size+'"'),i.rows&&(a+=' rows="'+i.rows+'"'),void 0!==o.min&&(a+=' minlength="'+o.min+'"'),void 0!==o.max&&(a+=' maxlength="'+o.max+'"'),i.placeholder&&(a+=' placeholder="'+i.placeholder+'"'),a+="></textarea>";break;case"number":a+='<input class="form-control" type="number" name="'+r+'"',void 0!==o.step&&(a+=' step="'+o.step+'"'),void 0!==o.min&&(a+=' min="'+o.min+'"'),void 0!==o.max&&(a+=' max="'+o.max+'"'),i.placeholder&&(a+=' placeholder="'+i.placeholder+'"'),i.size&&(a+=' size="'+i.size+'"'),a+=">";break;default:a+='<input class="form-control" type="text" name="'+r+'"',i.placeholder&&(a+=' placeholder="'+i.placeholder+'"'),"string"===i.type&&void 0!==o.min&&(a+=' minlength="'+o.min+'"'),"string"===i.type&&void 0!==o.max&&(a+=' maxlength="'+o.max+'"'),i.size&&(a+=' size="'+i.size+'"'),a+=">"}return this.change("getRuleInput",a,e,r)},getRuleValueSelect:function(e,t){var i=this.templates.ruleValueSelect({builder:this,name:e,rule:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleValueSelect",i,e,t)},updateRuleOperator:function(e,t){var i=e.$el.find(c.value_container);e.operator&&0!==e.operator.nb_inputs?(i.css("display",""),!i.is(":empty")&&t&&"function"!=typeof t.input&&"function"!=typeof e.operator.input&&e.operator.nb_inputs===t.nb_inputs&&e.operator.optgroup===t.optgroup||this.createRuleInput(e)):(i.hide(),e.__.value=void 0),e.operator&&(e.$el.find(c.rule_operator).val(e.operator.type),e.__.value=this.getRuleInputValue(e),this.createExtendedOperatorConditions(e)),this.trigger("afterUpdateRuleOperator",e,t),this.trigger("rulesChanged")},createExtendedOperatorConditions:function(e){var i=this,n=e.$el.find(c.rule_operator_conditions_container);if("not_equal"===e.operator.type){e.includeEmpty=!0;const o=$(`\n                      <div class="form-check form-switch">\n                        <input id="${e.id}_include_empty" type="checkbox" class="rule-include-empty form-check-input" name="${e.id}_include_empty" role="switch" checked="checked"/>\n                        <label class="form-label form-check-label text-truncate" for="${e.id}_include_empty">${t("querybuilder.common.include_empty")}</label>\n                      </div>`);n.html(o);o.find(c.rule_include_empty).on("change",function(){e.includeEmpty=i.getRuleIncludeEmptyValue(e)}),e.$el.find(c.rule_header_inputs).prop("disabled",e.flags.header_readonly)}else e.includeEmpty=!1,n.html("")},createRuleOperators:function(e){var t=e.$el.find(c.operator_container).empty();if(e.filter){var i=this.getOperators(e.filter);if(!e.filter.skipOperator){var n=$(this.getRuleOperatorSelect(e,i));t.html(n)}e.filter.default_operator?e.__.operator=this.getOperatorByType(e.filter.default_operator):e.__.operator=i[0],e.$el.find(c.rule_operator).val(e.operator.type),this.trigger("afterCreateRuleOperators",e,i),this.applyRuleFlags(e)}},createRuleInput:function(e){var t=e.$el.find(c.value_container).empty();if(e.__.value=void 0,e.filter&&e.operator&&0!==e.operator.nb_inputs){for(var i=this,n=$(),o=e.filter,r=0;r<e.operator.nb_inputs;r++){var s=$(this.getRuleInput(e,r));if(o.canBeNegated){var a=i.getNegateInput();t.prepend(a),n=n.add(a)}r>0&&t.append(this.settings.inputs_separator),t.append(s),"function"==typeof o.values&&o.values.call(this,s),n=n.add(s)}t.css("display",""),n.on("change "+(o.input_event||""),function(){e._updating_input||(e._updating_value=!0,e.negated=i.getNegateValue(e),e.value=i.getRuleInputValue(e),e._updating_value=!1)}),o.plugin&&n[o.plugin](o.plugin_config||{}),this.trigger("afterCreateRuleInput",e),void 0!==o.default_value?e.value=o.default_value:(e._updating_value=!0,e.negated=i.getNegateValue(e),e.value=i.getRuleInputValue(e),e._updating_value=!1),this.applyRuleFlags(e)}},setRuleInputValue:function(e,t){var i=e.filter,o=e.operator;if(i&&o){if(e._updating_input=!0,i.valueSetter)i.valueSetter.call(this,e,t);else if("function"==typeof e.operator.valueSetter)e.operator.valueSetter.call(this,e,t);else if(this.optionsByType[e.filter.type]&&"function"==typeof this.optionsByType[e.filter.type].valueSetter)this.optionsByType[e.filter.type].valueSetter.call(this,e,t);else{var r=e.$el.find(c.value_container);1===o.nb_inputs&&(t=[t]);for(var s=0;s<o.nb_inputs;s++){var a=n.escapeElementId(e.id+"_value_"+s);switch(i.input){case"radio":r.find("[name="+a+'][value="'+t[s]+'"]').prop("checked",!0).trigger("change");break;case"checkbox":$.isArray(t[s])||(t[s]=[t[s]]),t[s].forEach(function(e){r.find("[name="+a+'][value="'+e+'"]').prop("checked",!0).trigger("change")});break;default:o.multiple&&i.value_separator&&$.isArray(t[s])&&(t[s]=t[s].join(i.value_separator)),r.find("[name="+a+"]").val(t[s]).trigger("change")}}}this.setNegated(e),e._updating_input=!1}},getRuleInputValue:function(e){var t=e.filter,i=e.operator,o=[];if(t.valueGetter)o=t.valueGetter.call(this,e);else if("function"==typeof e.operator.valueGetter)o=e.operator.valueGetter.call(this,e);else if(this.optionsByType[e.filter.type]&&"function"==typeof this.optionsByType[e.filter.type].valueGetter)o=this.optionsByType[e.filter.type].valueGetter.call(this,e);else{for(var r=e.$el.find(c.value_container),s=0;s<i.nb_inputs;s++){var a,l=n.escapeElementId(e.id+"_value_"+s);switch(t.input){case"radio":o.push(r.find("[name="+l+"]:checked").val());break;case"checkbox":a=[],r.find("[name="+l+"]:checked").each(function(){a.push($(this).val())}),o.push(a);break;case"select":t.multiple?(a=[],r.find("[name="+l+"] option:selected").each(function(){a.push($(this).val())}),o.push(a)):o.push(r.find("[name="+l+"] option:selected").val());break;default:o.push(r.find("[name="+l+"]").val())}}o=o.map(function(e){return i.multiple&&t.value_separator&&"string"==typeof e&&(e=e.split(t.value_separator)),$.isArray(e)?e.map(function(e){return n.changeType(e,t.type)}):n.changeType(e,t.type)}),1===i.nb_inputs&&(o=o[0]),t.valueParser&&(o=t.valueParser.call(this,e,o))}return this.change("getRuleValue",o,e)},getRuleIncludeEmptyValue:function(e){return e.$el.find(c.rule_include_empty).is(":checked")},validateValue:function(e,t){var i=e.filter.validation||{},n=!0;return n=i.callback?i.callback.call(this,t,e):"function"==typeof e.operator.validate?e.operator.validate.call(this,t,e):this.optionsByType[e.filter.type]&&"function"==typeof this.optionsByType[e.filter.type].validate?this.optionsByType[e.filter.type].validate.call(this,t,e):this._validateValue(e,t),this.change("validateValue",n,t,e)},getRules:function(e){e=$.extend({get_flags:!1,allow_invalid:!1,skip_empty:!1},e);var t=this.validate(e);if(!t&&!e.allow_invalid)return null;var i=this,n=function t(n){var o={condition:n.condition,rules:[]};if(n.data&&(o.data=$.extendext(!0,"replace",{},n.data)),e.get_flags){var r=i.getGroupFlags(n.flags,"all"===e.get_flags);$.isEmptyObject(r)||(o.flags=r)}return n.each(function(t){if(t.filter||!e.skip_empty){var n=null;t.operator&&0===t.operator.nb_inputs||(n=t.value);var r={id:t.filter?t.filter.id:null,field:t.filter?t.filter.field:null,type:t.filter?t.filter.type:null,input:t.filter?t.filter.input:null,operator:t.operator?t.operator.type:null,value:n,includeEmpty:t.includeEmpty};if((t.filter&&t.filter.data||t.data)&&(r.data=$.extendext(!0,"replace",{},t.filter.data,t.data)),t.filter&&t.filter.canBeNegated&&(r.negated=t.negated),e.get_flags){var s=i.getRuleFlags(t.flags,"all"===e.get_flags);$.isEmptyObject(s)||(r.flags=s)}o.rules.push(i.change("ruleToJson",r,t))}},function(i){var n=t(i);0===n.rules.length&&e.skip_empty||o.rules.push(n)},this),i.change("groupToJson",o,n)}(this.model.root);return n.valid=t,this.change("getRules",n)},setRules:function(e,t){t=$.extend({allow_invalid:!1},t),this.setupInitialRule(e),$.isArray(e)&&(e={condition:this.settings.default_condition,rules:e}),e&&e.rules&&(0!==e.rules.length||this.settings.allow_empty)||n.error("RulesParse","Incorrect data object passed"),this.clear(),this.setRoot(!1,e.data,this.parseGroupFlags(e)),this.applyGroupFlags(this.model.root),e=this.change("setRules",e,t);var i=this;!function e(o,r){null!==r&&(void 0===o.condition?o.condition=i.settings.default_condition:-1==i.settings.conditions.indexOf(o.condition)&&(n.error(!t.allow_invalid,"UndefinedCondition",'Invalid condition "{0}"',o.condition),o.condition=i.settings.default_condition),r.condition=o.condition,o.rules.forEach(function(o){var s;if(void 0!==o.rules)if(-1!==i.settings.allow_groups&&i.settings.allow_groups<r.level)n.error(!t.allow_invalid,"RulesParse","No more than {0} groups are allowed",i.settings.allow_groups),i.reset();else{if(null===(s=i.addGroup(r,!1,o.data,i.parseGroupFlags(o))))return;i.applyGroupFlags(s),e(o,s)}else{if(o.empty||(void 0===o.id&&(n.error(!t.allow_invalid,"RulesParse","Missing rule field id"),o.empty=!0),void 0===o.operator&&(o.operator="equal")),null===(s=i.addRule(r,o.data,i.parseRuleFlags(o))))return;o.id&&(o.empty||(s.filter=i.getFilterById(o.id,!t.allow_invalid)),s.filter&&(s.operator=i.getOperatorByType(o.operator,!t.allow_invalid),s.operator||(s.operator=i.getOperators(s.filter)[0])),s.negated=o.negated,s.operator&&0!==s.operator.nb_inputs&&(s.includeEmpty=!!o.includeEmpty,void 0!==o.value?s.value=o.value:void 0!==s.filter.default_value&&(s.value=s.filter.default_value))),i.change("jsonToRule",s,o)!=s&&n.error("RulesParse","Plugin tried to change rule reference")}}),i.change("jsonToGroup",r,o)!=r&&n.error("RulesParse","Plugin tried to change group reference"))}(e,this.model.root),this.validate(),this.trigger("afterSetRules")},getNegateValue:function(e){var t,i=e.$el.find("select.negate");return 0!==i.length&&(t="true"===i.val()),t},getNegateInput:function(){return $(`\n                  <div class="qb-input-negate">\n                    <select class="form-control negate" data-select-options="dropdownAutoWidth: true">\n                      <option value="false">${t("defaults.yes")}</option>\n                      <option value="true">${t("defaults.no")}</option>\n                    </select>\n                  </div>\n                `)},setNegated:function(e){var t=e.$el.find("select.negate");0!==t.length&&t.val(""+e.negated)},displayError:function(e){if(this.settings.display_errors)if(null===e.error)e.$el.removeClass("has-error");else{var t=this.translate("errors",e.error[0]);t=this.constructor.utils.fmt(t,e.error.slice(1)),t=this.change("displayError",t,e.error,e),e.$el.addClass("has-error").find(this.constructor.selectors.error_container).eq(0).attr("data-tooltip",t),AGN.Lib.CoreInitializer.run("tooltip",e.$el)}},bindEvents:function(){l.call(this);var e=this;this.model.on("update",function(t,i,n){i instanceof r.Rule&&"includeEmpty"===n&&e.updateRuleIncludeEmpty(i)})},findRuleByField:function(e,t,i){var n=function(e){return e.hasOwnProperty("rules")};if(n(e)){var o=this;return e.rules.find(function(e){return n(e)?!!i&&o.findRuleByField(e,i):e.field&&e.field===t})}return e.field&&e.field===t},deleteRuleByField:function(e,t,i){var n=this;if(e||(e=n.model.root)){var o=!1;return e.each("reverse",function(e){e&&e.filter&&e.filter.id==t&&(o&=n.deleteRule(n.getModel(e.$el)))},function(e){o&=n.deleteRuleByField(e,t,i)},n),!!o}},setOrReplaceRule:function(e,t,i){if(e||(e=this.getRules({allow_invalid:!0,skip_empty:!0})),t&&t.id){var n=this.findRuleByField(e,t.id,i);return n?$.extend(n,t):e.rules.push(t),this.setRules(e),!0}return!1},containsNotEmptyRule:function(e){var t=this,i=t.getModel(e);return i.rules&&i.rules.length?i.rules.every(function(e){return e.hasOwnProperty("rules")?t.containsNotEmptyRule(e):!!e.filter}):!!i.filter}}),r.prototype.updateRuleIncludeEmpty=function(e){e.$el.find(c.rule_include_empty).prop("checked",e.includeEmpty),this.trigger("rulesChanged")}})})(),AGN.Lib.DomInitializer.new("recipient-report-initializer",function(e){if(!$("body").attr("bs-theme"))return;const t=e.find("iframe");t.on("load.iframe",function(){!function(e){const t=e.contents().find("body"),i=t.find("center");i.length?(t.css("background-color","var(--bs-body-bg)"),i.css("background-color","var(--bs-body-bg)")):e.contents().find("body").css("color","#fff")}(t)})}),AGN.Lib.CoreInitializer.new("relative-href",function(e=$(document)){e.find("a[data-relative]").each(function(){const e=$(this);e.attr("href",AGN.url(e.attr("href"))),e.removeAttr("data-relative")})}),AGN.Lib.CoreInitializer.new("restore",function(e=$(document)){const t=AGN.Lib.Storage;_.each(e.find("[data-restore-fields]"),e=>{t.restoreChosenFields($(e)),$(e).on("change",function(){return t.saveChosenFields($(this))})})}),AGN.Lib.CoreInitializer.new("schedule-builder",function(e=$(document)){_.each(e.find("[data-schedule-builder]"),e=>new AGN.Lib.Schedule.Builder($(e)))}),(()=>{const e=AGN.Lib.Scrollbar;AGN.Lib.CoreInitializer.new("scrollable",["table"],function(t=$(document)){_.each(t.find(".js-scrollable, .table-wrapper__body, .ag-body-viewport"),t=>{const i=$(t),n=e.get(i,!1);AGN.Lib.Helpers.isMobileView()?n?.destroy():n?n.update():new e(i)})})})(),(()=>{const e=AGN.Lib.Template,i=AGN.Lib.CoreInitializer,n="agn:select-scrollbar";function o(e,t){if(t.selected)return null;if(""===$.trim(e.term))return t;const i=e.term.toLowerCase();return t.text.toLowerCase().includes(i)?t:null}function r(e){return e.closest(".modal").exists()?e.closest(".modal"):e.closest(".dropdown-menu").exists()?e.closest(".dropdown-menu"):"body"}i.new("select",["template"],function(a=$(document)){_.each(a.all("select"),a=>{const l=$(a);l.data("select2")&&l.select2("destroy");let c={placeholder:l.attr("placeholder"),minimumResultsForSearch:10,showSearchIcon:!0,width:"100%",searchInputPlaceholder:t("tables.searchOoo"),dropdownCssClass:":all:",selectionCssClass:":all:",dropdownParent:r(l),preventPlaceholderClear:!1};l.is("[data-sort]")&&"alphabetic"===l.data("sort")&&(c.sorter=function(e){return e.sort((e,t)=>$(e.element).is("[data-no-sort]")?-1:$(t.element).is("[data-no-sort]")?1:e.text.toLowerCase().localeCompare(t.text.toLowerCase())),e}),l.prop("multiple")&&(c.matcher=o);const d=l.data("result-template");c.templateResult=function(t){return t.loading?t.text:$(t.element).hasClass("hidden")?null:d?e.dom(d,{element:t.element,isDisabled:t.disabled,text:t.text,title:t.title,value:t.id}):t.text};const u=l.data("selection-template");if(c.templateSelection=function(t){return e.dom(u||"select2-result",{element:Array.isArray(t.element)?t.element[0]:t.element,isDisabled:t.disabled,text:t.text,title:t.title,value:t.id})},l.hasClass("dynamic-tags")&&(l.find("option").prop("selected",!0),c.tags=!0,c.preventPlaceholderClear=!0),l.is("[data-select-options]")){const e=AGN.Lib.Helpers.objFromString(l.data("select-options"));c=_.extend(c,e)}if(c.alignDropdownRight&&$(c.dropdownParent).addClass("align-dropdown-right-container"),c.tags&&!c.tokenSeparators&&(c.tokenSeparators=[","," ",";"]),l.is("[data-select-tree]")?(!function(e){const t=e.find("option"),i=t.map(function(){return String($(this).data("parent")||"")}).get();t.each(function(){const e=$(this);e.val()&&i.includes(e.val())?e.attr("data-pup","parent"):e.data("parent")&&e.attr("data-pup",e.data("parent"))})}(l),l.select2ToTree(c)):l.select2(c),l.is("[data-show-create-btn]")||c.tags){const e=function(e){const t=(i=e.data("show-create-btn"),$(`\n        <button type="button" class="btn btn-icon btn-primary" ${i}>\n          <i class="icon icon-plus"></i>\n        </button>\n    `));var i;return e.next(".select2-container").find(".select2-search").addClass("flex-grow-1").wrap($('<div class="d-flex gap-1"></div>')).parent().append(t),t}(l);c.tags&&(AGN.Lib.Tooltip.createTip(e,t("defaults.add")),c.selectOnClose?l.on("select2:unselect",()=>{l.find("option:not(:selected)").remove()}):e.on("click",()=>{const e=l.data("select2").selection.$search.val();AGN.Lib.Select.get(l).selectOption(e)}))}l.hasClass("has-arrows")&&new s(l),l.on("select2:open",e=>{const t="scroll.select2";$(e.target).parents().off(t),$(window).off(t),window.setTimeout(()=>{const e=l.data("select2").$dropdown.find(".select2-results__options");l.data(n,new AGN.Lib.Scrollbar(e,{wheelSpeed:.2})),i.run("tooltip",e)},20)}),l.on("select2:closing",e=>l.data(n)?.destroy()),l.on("change.select2",e=>i.run(["truncated-text-popover","tooltip"],l.next(".select2")));const h=l.find("option[data-exclusive]");if(h.exists()){const e=()=>{const e=h.filter(":selected"),t=l.find("option");t.prop("disabled",!1),e.exists()?l.find("option").not(e).prop("disabled",!0):t.filter(":selected").exists()&&h.prop("disabled",!0)};e(),l.on("select2:select",e),l.on("select2:unselect",e)}})});class s{constructor(e){this.$select=e,this.#St(),this.#xt(),this.$select.next(".select2").find(".selection").prepend(this.$prevBtn).append(this.$nextBtn),this.$select.on("change",()=>this.toggleArrows()),this.toggleArrows(),this.$select.data("selectWithArrows",this)}toggleArrows(){const e=this.$select.prop("selectedIndex");this.$prevBtn.prop("disabled",0===e),this.$nextBtn.prop("disabled",e===this.$select.find("option").length-1)}#St(){this.$prevBtn=this.#At(!0),this.$prevBtn.on("click",()=>this.#Et())}#xt(){this.$nextBtn=this.#At(!1),this.$nextBtn.on("click",()=>this.#Tt())}#At(e){return $(`\n         <button class="btn btn-outline-primary btn-icon btn-select-control">\n           <i class="icon icon-caret-${e?"left":"right"}"></i>\n         </button>\n       `)}#Tt(){this.#kt(!1)}#Et(){this.#kt(!0)}#kt(e){(e?this.$prevBtn:this.$nextBtn).prop("disabled")||(this.$select.prop("selectedIndex",this.$select.prop("selectedIndex")+(e?-1:1)).trigger("change"),this.toggleArrows())}}})(),AGN.Lib.DomInitializer.new("server-sent-events",function(){if(!("locks"in navigator))return void console.warn("Web Locks API not supported.");const e=new BroadcastChannel(`sse-leader-channel-${window.adminId}`);let t=null,i=!1;function n(){t=new EventSource(AGN.url("/sse/connect.action")),t.addEventListener("notification",t=>{e.postMessage({type:"notification",popupsJson:t.data}),o(t.data)}),t.addEventListener("debug",e=>{console.info("SSE init. Status: "+e.data)}),t.onerror=e=>{console.error("Error during server send events:",e),t.close(),t.readyState!==EventSource.CLOSED&&setTimeout(()=>{i&&n()},5e3)}}function o(e){AGN.Lib.JsonMessages(JSON.parse(e)),$.post(AGN.url("/sse/ack.action"))}e.addEventListener("message",e=>{"notification"===e.data.type&&o(e.data.popupsJson)}),navigator.locks.request(`sse-leader-lock-${window.adminId}`,{mode:"exclusive"},e=>{if(e)return i=!0,n(),new Promise(()=>{})}).catch(e=>console.error("Error acquiring leader lock:",e))}),AGN.Lib.DomInitializer.new("session-timer",function(){const e=6e5,t=5e3,i=this.config,n=this.config.creationTime,o=this.config.lastAccessedTime;let r,s,a=this.config.maxInactiveInterval,l=!1,c=!0,d=!1;function u(){d=!0}function h(e){e?(a=e.maxInactiveInterval,r=Date.now()+1e3*e.maxInactiveInterval,l=!1):(l=!0,s.showSessionExpired())}function p(e){401===e.status&&(l=!0,s.showSessionExpired())}function g(){d=!1,c=!1}i&&n&&o&&a&&(r=1e3*a+Date.now(),setInterval(function(){const i=Date.now(),n=r>i?r-i:0;s||(s=new f),c&&!(n<=e)||l||d||s.showTimerBlock(n),!d&&!l&&r+t>i&&r<i&&s.showLoading(),!l&&!d&&r+t<i&&$.ajax({url:AGN.url("/session/info.action"),global:!1,beforeSend:u,success:h,error:p,complete:g})},1e3)),$(document).ajaxComplete(function(e,t){!e.preventSessionTimer&&!l&&!d&&401!==t.status&&t.status<501&&(r=1e3*a+Date.now()),e.preventSessionTimer=!0});class f{constructor(){this.$timerBlock=$("#session-timer-block"),this.$timeLabel=$("#session-time-label"),this.isSessionExpiredNotification=!1,this.refreshIconClass="icon icon-spinner icon-pulse"}showTimerBlock(e){this.$timerBlock.removeClass("hidden"),this.printTimerText(e)}showSessionExpired(){if(this.printTimerText(0),!this.isSessionExpiredNotification){AGN.Lib.Modal.fromTemplate("session-expired").on("modal:close",()=>AGN.Lib.Page.reload(AGN.url("/logon.action"))),this.isSessionExpiredNotification=!0}}showLoading(){const e=`<i class="${this.refreshIconClass}"></i>`;this.changeTimeFieldContent(e)}printTimerText(e){let t="00:00";if(e>0){const i=new Date(e);t=`${this.formatTimeComponent(i.getUTCMinutes())}:${this.formatTimeComponent(i.getUTCSeconds())}`}this.changeTimeFieldContent(t)}formatTimeComponent(e){return e>0?e<10?"0"+e:e:"00"}changeTimeFieldContent(e){this.$timeLabel.html(e)}}return!1}),AGN.Lib.CoreInitializer.new("slider",function(e=$(document)){function t(e){return e.closest(".tile").find(".tile-body").find(".form-check-input:visible")}function i(e){const i=t(e);var n;e.prop("checked",(n=i,_.every(n.filter(":not(:disabled)"),e=>e.checked))),e.prop("disabled",function(e){return 0===e.filter(":not(:disabled)").length}(i))}_.each(e.find("[data-toggle-checkboxes]"),function(e){const n=$(e);i(n),t(n).click(()=>i(n)),n.on("update-toggle-all",()=>i(n)),function(e){e.on("click",function(){const e=$(this);_.each(e.closest(".tile").find(".tile-body [type=checkbox]:enabled:visible"),t=>$(t).prop("checked",e.is(":checked")).trigger("change"))})}(n),n.closest(".form-switch").toggle(t(n).length>0)})}),AGN.Lib.CoreInitializer.new("switchable-tile",function(e=$(document)){const t=AGN.Lib.ToggleVisField.STR;t.DATA_SHOW_ON_SWITCH="data-show-on-switch",t.DATA_HIDE_ON_SWITCH="data-hide-on-switch";class i{constructor(e){const t=e.data("switchableTile");if(t)return t;this.$el=e,this.#_t()}#_t(){this.$el.attr("data-field","toggle-vis"),this.$checkbox.attr(t.DATA_FIELD_VIS,"").attr(t.DATA_FIELD_VIS_SHOW,this.#Dt()).attr(t.DATA_FIELD_VIS_HIDE,this.#Mt()),this.$switch.prepend(this.#Pt()),this.$el.data("switchableTile",this)}#Dt(){return this.isSwapMode?`[${t.DATA_SHOW_ON_SWITCH}]`:".tile-body"}#Mt(){return this.isSwapMode?`[${t.DATA_HIDE_ON_SWITCH}]`:""}#Pt(){return $('<div class="hidden"></div>').attr(t.DATA_FIELD_VIS_DEFAULT,"").attr(t.DATA_FIELD_VIS_HIDE,this.#Dt()).attr(t.DATA_FIELD_VIS_SHOW,this.#Mt())}get $switch(){return this.$el.find(".tile-header .form-switch:first-child").first()}get $checkbox(){return this.$switch.find('[role="switch"]')}get isSwapMode(){return this.$body.find(`[${t.DATA_SHOW_ON_SWITCH}]`).length>0&&this.$body.find(`[${t.DATA_HIDE_ON_SWITCH}]`).length>0}get $body(){return this.$el.find(".tile-body")}}_.each(e.find(".tile--switchable"),e=>new i($(e)))}),AGN.Lib.CoreInitializer.new("sync",["ace"],function(e=$(document)){_.each(e.find("[data-sync]"),e=>{const t=$(e),i=$(t.data("sync")),n=t.data("_editor");n?n.val(i.val()):"checkbox"===t?.prop("type")?.trim()?t.prop("checked","true"===i.val()):t.val(i.val())})}),AGN.Lib.CoreInitializer.new("tab-related",function(e=$(document)){_.each(e.find("[data-tab-related]"),e=>{const t=$(e),i=$(t.data("tab-related"));i.on("tile:show",()=>t.removeClass("hidden")),i.on("tile:hide",()=>t.addClass("hidden"))})}),AGN.Lib.CoreInitializer.new("tab-toggle",function(e=$(document)){_.each(e.find("[data-toggle-tab]"),e=>AGN.Lib.Tab.init($(e)))}),AGN.Lib.CoreInitializer.new("table-column-manager",function(e=$(document)){const t=AGN.Lib.TableColumnManager;e.all(t.SELECTOR).each(function(){new t($(this))})}),(()=>{class e{static MIN_WIDTH=40;constructor(e){this.el=e,this.$el=$(this.el),this.$siblings=this.$el.siblings().filter(function(){return $(this).is(":visible")}),this.$el.addClass("resizable"),this._separatorWidth=parseInt(this.$el.css("--table-separator-width"))}get separatorWidth(){return this._separatorWidth}startResize(t,i){this.$nextSibling=this.$el.nextAll(":visible").filter((e,t)=>!$(t).css("--table-not-resizable-cell")).first(),this.$prevSibling=this.$el.prevAll(":visible").filter((e,t)=>!$(t).css("--table-not-resizable-cell")).first(),this.siblingsWidths=this.#Rt();const n=this.el.offsetWidth;this._resizeHandler=o=>{const r=Math.max(e.MIN_WIDTH,n+(o.clientX-t));r<n?this.#It(n,r):this.#Ot(n,r,i)},document.addEventListener("mousemove",this._resizeHandler)}stopResize(){document.removeEventListener("mousemove",this._resizeHandler)}destroy(){this.el.style.width="",this.$el.removeClass("resizable")}#It(e,t){const i=this.$nextSibling.exists()?this.$nextSibling:this.$prevSibling;i.get(0).style.width=`${this.#Nt(i)+(e-t)}px`,this.el.style.width=`${t}px`}#Ot(t,i,n){if(this.$nextSibling.exists()){let n=this.#Nt(this.$nextSibling)-(i-t);return n<e.MIN_WIDTH&&(i-=e.MIN_WIDTH-n,n=e.MIN_WIDTH),this.$nextSibling.get(0).style.width=`${n}px`,void(this.el.style.width=`${i}px`)}this.#Lt()+i<=n&&(this.el.style.width=`${i}px`)}#Rt(){const e={};return this.$siblings.each((t,i)=>{e[$(i).index()]=i.clientWidth}),e}#Nt(e){return this.siblingsWidths[e.index()]}#Lt(){return Object.values(this.siblingsWidths).reduce((e,t)=>e+t,0)}}class t{static DATA_KEY="agn:table-cols-resizer";constructor(e){this.table=e.get(0),this.$table=e,this.$cols=e.find("th:visible"),this.tableId=e.attr("id"),this.$fitContentCols=this.$cols.filter((e,t)=>$(t).hasClass("fit-content")),this.$nonResizableCols=this.$cols.filter((e,t)=>"true"===$(t).css("--table-not-resizable-cell")),this.$resizableCols=this.#Ft(),e.data(t.DATA_KEY,this)}resize(){this._resizableColumns=[],document.fonts.ready.then(()=>{this.$resizableCols.each((e,t)=>this.#$t(t)),this.#Gt(this.$fitContentCols),this.#Gt(this.$nonResizableCols),this.$table.addClass("table-layout-fixed"),this.#Bt(),AGN.Lib.CoreInitializer.run("truncated-text-popover",this.$table.parent())})}#Ft(){let e=this.$cols.not(this.$nonResizableCols).not(this.$cols.last());const t=e.last(),i=t.next();return i.exists()&&i.is(this.$nonResizableCols)&&(e=e.not(t)),e}#$t(t){const i=new e(t);this._resizableColumns.push(i),$(t).on("mousedown",e=>{e.offsetX>=t.offsetWidth-i.separatorWidth&&(this.#Ht(),i.startResize(e.clientX,this.table.clientWidth),this._mouseupHandler=()=>this.#zt(i),document.addEventListener("mouseup",this._mouseupHandler))})}#Ht(){this._widthsWasSetToStyles||(this.#Gt(this.$resizableCols),this._widthsWasSetToStyles=!0)}#Gt(e){e.each((e,t)=>{t.style.width=getComputedStyle(t).width})}static get(e){return e.data(this.DATA_KEY)}destroy(){this._resizableColumns.forEach(e=>e.destroy()),this.$resizableCols.off("mousedown"),this.$nonResizableCols.each((e,t)=>t.style.width=""),this.$table.removeClass("table-layout-fixed"),this.$table.data(t.DATA_KEY,null)}#zt(e){e.stopResize(),document.removeEventListener("mouseup",this._mouseupHandler),this.#Wt(),AGN.Lib.CoreInitializer.run("truncated-text-popover",this.$table.parent())}#Wt(){this.tableId&&AGN.Lib.Storage.set(this.#m(),{width:this.table.clientWidth,colsCount:this.$cols.length,widths:this.#Vt()})}#Bt(){if(!this.tableId)return;const e=AGN.Lib.Storage.get(this.#m());e&&this.table.clientWidth===e.width&&this.$cols.length===e.colsCount&&_.isEmpty(_.xor(Object.keys(e.widths),this.#jt()))&&this.$cols.each(function(){const t=e.widths[$(this).text()];t&&(this.style.width=`${t}px`)})}#m(){return`table-#${this.tableId}-widths`}#Vt(){const e={};return this.$resizableCols.each(function(){e[$(this).text()]=this.clientWidth}),e}#jt(){return this.$resizableCols.map((e,t)=>$(t).text()).get()}}AGN.Lib.CoreInitializer.new("table-cols-resizer",function(e=$(document)){e.all(".table--borderless").each(function(){const e=$(this);t.get(e)?.destroy(),e.hasClass("table--preview")||AGN.Lib.Helpers.isMobileView()||new t(e).resize()})})})(),AGN.Lib.CoreInitializer.new("table-row-actions",function(e=$(document)){e.find(".js-table tr").each(function(){const e=$(this);!function(e){const t=e.find("[data-view-row]");t.exists()&&(e.data("link",t.attr("href")),"page"===t.data("view-row")?e.wrap(`<a class="table-row-wrapper" href="${t.attr("href")}"></a>`):(t.data("modal")||t.data("action"))&&function(e,t){const i="data-";$.each(e[0].attributes,(e,n)=>{if(n.name.startsWith(i)&&"data-view-row"!==n.name){const e=n.name.substring(i.length);t.attr(`data-${e}`,n.value)}})}(t,e),t.remove())}(e),function(e){const t=e.find(".js-row-popover");if(!t.exists())return;const i=_.uniqueId("agn-table-row-popover-");AGN.Lib.Template.register(i,t.html()),e.attr("data-popover",""),e.attr("data-popover-options",JSON.stringify({html:!0,delay:{show:300,hide:100},templateName:i}))}(e)})}),AGN.Lib.CoreInitializer.new("table",["js-table"],function(e=$(document)){!1===AGN.Lib.Storage.get("truncate-table-text")&&function(e){e.all("[data-toggle-table-truncation]").each((e,t)=>{$(t).closest(".table-wrapper").find("table, .ag-body").toggleClass("no-truncate")})}(e),function(e){e.all("tr.empty").each(function(){const e=$(this),t=e.closest("table").find("th:visible").length;e.find("td").attr("colspan",t)})}(e)}),(()=>{const e={header_readonly:!0,filter_readonly:!0,condition_readonly:!0,operator_readonly:!0,value_readonly:!0,no_delete:!0,no_add_rule:!0,no_sortable:!0,no_add_group:!0};AGN.Lib.DomInitializer.new("target-group-query-builder",function(i){const n=this.config,o=AGN.Lib.Form.getWrapper(i),r="#targetgroup-querybuilder",s=$(r),a=n.mailTrackingAvailable,l=n.isTargetGroupLocked;_.each(s,e=>{const i=$(e),o=[{type:"equal",apply_to:["string","number","datetime"]},{type:"not_equal",apply_to:["string","number","datetime"]},{type:"less",apply_to:["string","number"]},{type:"less_or_equal",apply_to:["string","number"]},{type:"greater",apply_to:["string","number"]},{type:"greater_or_equal",apply_to:["string","number"]},{type:"like",nb_inputs:1,apply_to:["string"]},{type:"not_like",nb_inputs:1,apply_to:["string"]},{type:"contains",nb_inputs:1,apply_to:["string"]},{type:"not_contains",nb_inputs:1,apply_to:["string"]},{type:"begins_with",nb_inputs:1,apply_to:["string"]},{type:"not_begins_with",nb_inputs:1,apply_to:["string"]},{type:"mod",nb_inputs:1,apply_to:["number"],valueSelectors:["#first","#operator select","#second"],valueGetter:function(e){const t=[];return e.operator.valueSelectors.forEach(function(i){t.push(e.$el.find(i).val())}),t},valueSetter:function(e,t){e.operator.valueSelectors.forEach(function(i,n){e.$el.find(i).val(t[n])})},input:function(e){const t=this.operators.filter(function(e){return"mod"!==e.type&&e.apply_to.includes("number")});return"<div class='qb-input-element'><input class='form-control' id='first' type='number'/></div><div class='qb-input-element' id='operator'>"+this.getRuleOperatorSelect(e,t)+"</div><div class='qb-input-element'><input class='form-control' id='second' type='number'/></div>"},validate:function(e){return e.every(function(e){return e})||["string_empty"]}},{type:"is_empty",nb_inputs:0,apply_to:["string","number","datetime"]},{type:"is_not_empty",nb_inputs:0,apply_to:["string","number","datetime"]},{type:"before",nb_inputs:1,apply_to:["datetime"]},{type:"after",nb_inputs:1,apply_to:["datetime"]}],s=function(e,i){if(null===e)e=[{id:"?",label:"?",type:"string"}];else{const t={};e=e.filter(function(e){return!t[e.id]&&(t[e.id]=!0,!0)})}return function(e,i){i=$.extend({mail_tracking_available:!1},i);const n=function(e){return $(`\n          <div class="qb-select-container">\n            <select id="${e.id}" class="form-control mailings" data-select-options="dropdownAutoWidth: true"></select>\n          </div>\n        `)},o=function(e){const t=$('<select class="form-control auto-imports"></select>');return t.attr("id",e.id),t},s=function(e){return e.$el.find(".mailings :selected").val()},a=function(e){return e.$el.find(".auto-imports :selected").val()},l=function(e){const t={},i={},n=-1;return $(r).on("values-set",e,function(o){if($.isEmptyObject(i))d($(o.target),n);else{const r=$(o.target).attr("id"),s=i[r];d(s?s.$el.find(e):$(o.target),t[r]||n)}}),function(n,o){const r=n.$el.find(e);t[n.id]=o,i[n.id]=n,d(r,o)}},c=l("select.mailings"),u=l("select.auto-imports"),p={"finished auto-import":{type:"string",input_event:"values-setup-finished",input:o,values:function(e){(function(e,t){const i=t||function(t){Object.keys(t).forEach(i=>{e.append($("<option>",{text:t[i],value:i}))}),e.trigger("values-set")};return $.ajax({type:"GET",url:AGN.url("/workflow/ajax/getAutoImportNames.action"),success:i})})(e).done(function(){e.trigger("values-setup-finished")})},valueSetter:u,valueGetter:a,canBeNegated:!0,skipOperator:!0},"received mailing":{type:"string",input_event:"values-setup-finished",input:n,values:function(e){const t=e.find("select.mailings");h(t).done(()=>t.trigger("values-setup-finished"))},valueSetter:c,valueGetter:s,canBeNegated:!0,skipOperator:!0},"opened mailing":{type:"string",input_event:"values-setup-finished",input:n,values:function(e){const t=e.find("select.mailings");h(t).done(()=>t.trigger("values-setup-finished"))},valueSetter:c,valueGetter:s,canBeNegated:i.mail_tracking_available,skipOperator:!0},"clicked in mailing":{type:"string",input_event:"values-setup-finished",valueSelector:function(e,t){return e+"_"+["mailingID","linkID"][t]},input:function(e){return $(`\n             <div class="qb-select-container">\n               <select id="${e.filter.valueSelector(e.id,0)}" class="form-control mailings" data-rule-id="${e.id}" data-select-options="dropdownAutoWidth: true"></select>\n             </div>\n             <label class="form-label d-flex align-items-center">Links</label>\n             <div class="qb-select-container">\n               <select id="${e.filter.valueSelector(e.id,1)}" class="form-control links" data-rule-id="${e.id}" data-select-options="dropdownAutoWidth: true"></select>\n             </div>\n            `)},values:function(e){const i=e.find("select.mailings"),n=AGN.Lib.Select.get(i);i.change(function(){const i=n.getSelectedValue();var o,r;o=i,r=function(i){const n=e.find("select.links"),o=AGN.Lib.Select.get(n),r=[{id:-1,text:t("querybuilder.common.anyLink")}];$.each(i,function(e,t){r.push({id:t.id,text:t.url})}),o.setOptions(r),n.trigger("link-values-set")},$.ajax({url:AGN.url(`/mailing/ajax/${o}/links.action`),success:r})}),h(i,function(e){const t=[];e.forEach(function(e){t.push({id:e.mailingID,text:e.shortname})}),n.setOptions(t),i.trigger("mailing-values-set")})},valueGetter:function(e){const t=0,i=1,n=[];return n[t]=e.$el.find("#"+e.filter.valueSelector(e.id,t)).val(),n[i]=e.$el.find("#"+e.filter.valueSelector(e.id,i)).val(),n},valueSetter:function(){const e=0,t=1,i={},n={},o=function(e,t){i[e.id]=t,n[e.id]=e};return $(r).on("mailing-values-set",function(t){let o,r=$(t.target),s=r.data("rule-id"),a=n[s];a?(o=a.$el.find("select.mailings"),d(o,i[s][e]),o.trigger("change")):(d(r),r.trigger("change"))}),$(r).on("link-values-set",function(e){let o,r=$(e.target).data("rule-id"),s=n[r];s?(o=s.$el.find("select.links"),d(o,i[r][t]||-1)):(o=$(e.target),d(o)),o.trigger("values-setup-finished")}),o}(),validation:{callback:function(e){return e.every(function(e){return e})||["string_empty"]}},canBeNegated:i.mail_tracking_available,skipOperator:!0},"revenue by mailing":{type:"string",input_event:"values-setup-finished",input:n,values:function(e){const t=e.find("select.mailings");h(t).done(()=>t.trigger("values-setup-finished"))},valueSetter:c,valueGetter:s,canBeNegated:i.mail_tracking_available,skipOperator:!0}};i.mail_tracking_available||delete p["received mailing"];e.forEach(function(e){const t=p[e.id];t&&$.extend(e,t)})}(e,i),$.extend([],e)}(n.queryBuilderFilters,{mail_tracking_available:a}),c=function(e,t){t&&(e=u(e));return $.extend({},e)}(JSON.parse(n.queryBuilderRules),l);i.queryBuilder({filters:s,allow_empty:!0,operators:o,readonly:l,plugins:{sortable:{inherit_no_drop:!0,inherit_no_sortable:!0}},rules:c}),AGN.Lib.CoreInitializer.run("select",i),i.on("afterSetRules.queryBuilder afterUpdateRuleFilter.queryBuilder afterCreateRuleFilters.queryBuilder afterAddRule.querybuilder",function(e){AGN.Lib.CoreInitializer.run("select",$(this))}),i.on("link-values-set",function(e){AGN.Lib.CoreInitializer.run("select",$(e.target))}),i.on("mailing-values-set values-set ",function(e){AGN.Lib.CoreInitializer.run("select",$(e.target))}),i.on("change-date-format",function(e){AGN.Lib.CoreInitializer.run("select",$(e.target))}),i.on("enterdown","input",function(e){return!1})});const c=function(e,t){t=$.extend({ignore_qb_validation:!1,skip_empty:!1},t),_.each($(r),function(i){const n=$(i),o=n.prop("queryBuilder");if(!function(e,t,i,n){return t.clearInitialRuleSettings(),!!i.ignore_qb_validation||(t.validate({skip_filter_validation:!1,skip_empty:i.skip_empty})?(n.find("#queryBuilderRules").val(function(e,t){return JSON.stringify(e.getRules({allow_invalid:!0,skip_empty:t}))}(t,i.skip_empty)),!0):(n.trigger("qb:invalidrules"),e.preventDefault(),!1))}(e,o,t,n))return!1})};function d(e,t){e.is("select")?AGN.Lib.Select.get(e).selectValueOrSelectFirst(t):e.val(t)}function u(t){return t&&(t.flags=e,_.each(t.rules,function(t){t.flags=e,t.hasOwnProperty("condition")&&u(t)})),t}function h(e,t){const i=t||function(t){const i=AGN.Lib.Select.get(e),n=[];t.forEach(e=>n.push({id:e.mailingID,text:e.shortname})),i.setOptions(n),e.trigger("values-set")};return $.ajax({type:"GET",url:AGN.url("/workflow/getAllMailingSorted.action"),data:{sortField:"date",sortDirection:"desc"},success:i})}s.on("qb:validation",c),o.off().on("validation",c)})})(),AGN.Lib.Controller.new("targets-list",function(){this.addAction({change:"check-favorites"},function(){AGN.Lib.Loader.prevent(),$.post(AGN.url(function(e){const t=e.data("target-id");if(e.is(":checked"))return`/target/${t}/addToFavorites.action`;return`/target/${t}/removeFromFavorites.action`}(this.el)))}),this.addAction({change:"check-admin-favorites"},function(){AGN.Lib.Loader.prevent();const e=this.el.data("target-id"),t=this.el.is(":checked");$.ajax({type:t?"POST":"DELETE",url:AGN.url(`/target/${e}/favorite.action`)})})}),AGN.Lib.CoreInitializer.new("template",function(e=$(document)){e.find('script[type="text/x-mustache-template"], template').each(function(){const e=$(this),t=e.attr("id");t&&AGN.Lib.Template.register(t,e.html())})}),AGN.Lib.CoreInitializer.new("tile-toggle",function(e=$(document)){_.each(e.find("[data-toggle-tile]"),e=>new AGN.Lib.Tile($(e)))}),AGN.Lib.CoreInitializer.new("tooltip",function(e=$(document)){const t=AGN.Lib.Tooltip;$(".tooltip").remove(),e.all("[data-tooltip]").each(function(){const e=$(this);t.create(e,t.options(e))})}),AGN.Lib.CoreInitializer.new("trackable-link-extensions",function(e=$(document)){class i extends AGN.Lib.InputTable{constructor(e){super(e)}get rowTemplate(){return`\n        <tr>\n            <td><input type="text" class="form-control" data-name="name" value="{{- name }}" placeholder="${t("defaults.name")}" ${this.readonly?"disabled":""}></td>\n            <td><input type="text" class="form-control" data-name="value" value="{{- value }}" placeholder="${t("defaults.value")}" ${this.readonly?"disabled":""}></td>\n        </tr>\n      `}get headerTemplate(){return`\n        <tr>\n            <th>${t("defaults.name")}</th>\n            <th>${t("defaults.value")}</th>\n        </tr>\n      `}addActions(){super.addActions(),AGN.Lib.Action.new({click:"[data-delete-all-extensions]"},this.clean.bind(this),this.$container),AGN.Lib.Action.new({click:"[data-add-default-extensions]"},this.addDefaultExtensions.bind(this),this.$container)}addDefaultExtensions(){const e=this.$table.find("tbody tr:last");this.isEmptyRow$(e)&&e.remove(),_.each(this.config.defaultExtensions,e=>this.addRow(e)),this.addEmptyRow()}}_.each(e.find("[data-trackable-link-extensions]"),function(e){new i($(e))})}),AGN.Lib.CoreInitializer.new("truncated-text-popover",function(e=$(document)){const t=AGN.Lib.Popover,i=AGN.Lib.Helpers;document.fonts.ready.then(()=>{e.find("\n      .text-truncate,\n      table:not(.input-table) td,\n      table:not(.input-table) th,\n      .ag-header-cell,\n      .select2-selection__rendered,\n      [data-truncated-text],\n      .dashboard-calendar__label--comment .text-truncate-lines\n      ").each((e,n)=>function(e){const n=function(e){const t=$(e),i=t.closest("td");return i.exists()?i:t}(e),o=t.get(n);!function(e){let t=$(e);if(t.is(".text-truncate-alt"))return t.is(":truncatedAlt");t.is(".ag-header-cell")&&(t=t.find(".ag-header-cell-text"));return t.is(":truncated")||t.is("td")&&i.containsTruncatedElements(e)}(e)?o?.forTruncatedText&&t.remove(n):o||(t.create(n,{delay:{show:400,hide:50},content:$(i.retrieveTextElement(n[0])).text()}).forTruncatedText=!0)}(n))})}),AGN.Lib.CoreInitializer.new("ui-theme",function(){const e=$("body").data("bs-theme");$("iframe:not(.cke_wysiwyg_frame):not(.jodit-wysiwyg_iframe):not(.default-iframe)").each(function(){const t=$(this);t.on("load.iframe",function(){t.contents().find("body").attr("data-bs-theme",e)})})}),AGN.Lib.DomInitializer.new("upload",function(e){const t=AGN.Lib.Upload,i=AGN.Lib.Template,n=u(e),o=u(e,!0),r=(n.exists()?n:e).find("[data-upload]");if(!r.exists()&&!n.exists())return;let s=t.get(n,r);s||(s=new t(n,r)),o.exists()&&new t(o,o.find("[data-upload]"),s);const a=r.data("upload")||"",l=a.includes("[]"),c=AGN.Lib.Form.get(e),d=c.get$();if(d.exists()){c instanceof AGN.Lib.StaticForm&&r.attr("name",a);const t=function(){const t=n.nextAll("[data-upload-progress]").first();return t.length?t:e.find("[data-upload-progress]")}(),o=t.data("upload-progress-template")||"progress";g(),d.on("form:loadershow",()=>{t.html(i.text(o,{currentProgress:!0})),t.show()}),d.on("form:loaderhide",()=>t.hide()),d.on("form:submit",()=>function(){const e=f();if(c instanceof AGN.Lib.StaticForm&&r.exists()&&0===r[0].files.length){const t=new DataTransfer;e.forEach(e=>t.items.add(e)),r[0].files=t.files}else l?e.forEach((e,t)=>{c.setValueOnce(p(t),e)}):c.setValueOnce(a,e)}()),d.on("submitted",h),d.on("form:progress",(e,n)=>{t.html(i.text(o,{currentProgress:n.progress}))}),n.on("upload:reset",h),n.on("upload:dropped",(e,t)=>{g(),"submit"===n.data("upload-dropzone")&&(n.hide(),c.submit(d.data("action")?"event":""))})}function u(e,t=!1){if(t)return e.find('[data-upload-dropzone="extra"]').first();const i=$(e.data("linked-dropzone"));return i.exists()?i:e.find("[data-upload-dropzone]").first()}function h(){l?f().forEach((e,t)=>{c.setValueOnce(p(t),void 0)}):c.setValueOnce(a,void 0),s.reset(),g(),n.show()}function p(e){return a.replace("[]",`[${e}]`)}function g(){e.data("upload-selection",f())}function f(){return s?s.getSelection():[]}}),AGN.Lib.DomInitializer.new("web-storage-persist",function(){this.config&&$.each(this.config,(e,t)=>{AGN.Lib.WebStorage.extend(e,t)})}),(()=>{function e(){return AGN.Lib.Template.text("edit-with-campaign-btn")}AGN.Lib.CoreInitializer.new("workflow-driven-input",function(i=$(document)){AGN.Lib.Template.exists("edit-with-campaign-btn")&&_.each(i.all(':input[data-workflow-driven="true"]'),i=>{const n=$(i);n.is('input[type="text"]')&&function(t){t.css("border-left","0").wrap('<div class="input-group">').before((e(),$("<div>",{class:"input-group-text input-group-text--disabled border-end-0 pe-0",html:e()}))),AGN.Lib.CoreInitializer.run("tooltip",t.parent())}(n),n.is('input[type="checkbox"]')&&function(t){t.next().after(e()),AGN.Lib.CoreInitializer.run("tooltip",t.parent())}(n),n.is("select")&&function(i){const n=i.next(".select2-container");i.prop("multiple")?(n.find(".select2-selection__rendered").hide(),n.find(".select2-search__field").val(t("mailing.default.editWithCampaign")),n.find(".select2-search--inline").prepend(e())):n.find(".select2-selection").prepend(e());AGN.Lib.CoreInitializer.run("tooltip",n)}(n),n.prop("disabled",!0)})})})(),AGN.Lib.DomInitializer.new("workflow-pause-timer",function(){const e=this.config.workflowId,i=this.config.pauseTime,n=this.config.defaultExpirationHours,o=60*(this.config.expirationHours>0?this.config.expirationHours:n)*60*1e3,r=$("#workflow-pause-timer-text"),s=setInterval(function(){a()},1e3);function a(){r.html(function(){const n=o-(Date.now()-i);if(n<=0)return s&&clearInterval(s),$.post(AGN.url(`/workflow/${e}/autoUnpause.action`)).done(t=>{!0===t.success?AGN.Lib.Page.reload(AGN.url(`/workflow/${e}/view.action`)):AGN.Lib.JsonMessages(t.popups)}),'<i class="icon icon-refresh icon-spin"></i> '+t("workflow.activating.auto");const r=new Date(n);return l(r.getUTCHours())+":"+l(r.getUTCMinutes())+":"+l(r.getUTCSeconds())}())}function l(e){return e>0?e<10?"0"+e:e:"00"}return a(),!1}),(()=>{const e=AGN.Lib.Loader,i=AGN.Lib.Page,n=AGN.Lib.CSRF,o=function(t){!0!==t.loader&&void 0!==t.loader||(t.loader={show:()=>e.show(),hide:()=>e.hide()})},r=function(e){const t=e.loader;if(t?.show)try{t.show()}catch(e){console.error(e)}},s=function(e){const t=e.loader;if(t?.hide)try{t.hide()}catch(e){console.error(e)}};$.ajaxPrefilter(function(e){o(e)}),$(document).ajaxSend(function(e,t,i){r(i),n.isProtectionEnabled()&&n.setTokenToReqHeader(t,i.type)}),$(document).ajaxComplete(function(e,t,i){s(i),n.updateTokenInDOM()}),$(document).ajaxError(function(e,n,o){if(s(o),!(0==n.readyState||0==n.status||o.statusCode&&n.status in o.statusCode))if(401===n.status){const e=$.Event("ajax:unauthorized");$(document).trigger(e),!e.isDefaultPrevented()&&n.responseText&&i.render(n.responseText)}else if(403===n.status){if(n.responseText){const e=$(n.responseText),t=e.filter("#csrf-error-message");if(t.exists())return void AGN.Lib.Modal.create(_.template(t.html())({}),{});if(e.all("script[data-message]").exists())return void i.render(n.responseText)}AGN.Lib.Modal.fromTemplate("permission-denied",{title:t("messages.permission.denied.title"),text:t("messages.permission.denied.text"),btn:t("defaults.ok")})}else{let o=!0;if(n.responseText){try{const e=JSON.parse(n.responseText);e.popups&&(AGN.Lib.JsonMessages(e.popups,!0),o=!1)}catch(e){o=!0}if(o)try{$(n.responseText).all("script[data-message]").exists()&&(i.render(n.responseText),o=!1)}catch(e){o=!0}}o&&AGN.Lib.Modal.fromTemplate("error",{headline:t("messages.error.headline"),text:t("messages.error.text"),reload:t("messages.error.reload")})}}),$(document).on("click","a[data-ajax]",function(e){const t=$(this);e.preventDefault(),i.reload(t.attr("href"),!0,t.data("ajax"))}),$(document).on("click","[data-prevent-load]",function(){e.prevent()}),window.onbeforeunload=function(){e.show()}})(),(()=>{const e=AGN.Lib.Form,t=AGN.Lib.Confirm,i=AGN.Lib.Page,n=AGN.Lib.Helpers;AGN.Lib.Action.new({click:"[data-confirm], .js-confirm"},function(){$.get(this.el.attr("href")).done(e=>{1===$(e).all(".modal").length?t.create(e).done(e=>i.render(e)):i.render(e)}),this.event.preventDefault()}),$(document).on("click","[data-confirm-positive], .js-confirm-positive",function(){const i=$(this),o=t.get(i),r=e.getWrapper(i);if(o)if(r.exists()){const t=e.get(r);if(i.is("[data-url]")&&t.setActionOnce(i.data("url")),i.is("[data-form-set]")){const e=n.objFromString(i.data("form-set"));_.forEach(e,(e,i)=>t.setValueOnce(i,e))}t.jqxhr().done(e=>o.positive(e))}else{const e=o.$modal.find('[name="confirm-choice"]');e.exists()?o.positive(e.val()):o.positive(i.data("confirm-positive"))}}),$(document).on("click","[data-confirm-negative], .js-confirm-negative",function(){const e=$(this);t.get(e)?.negative(e.data("confirm-negative"))})})(),(()=>{const e=AGN.Lib.Tooltip;AGN.Lib.Action.new({click:"[data-copyable]"},function(){let i,n=this.el;if(this.el.is("[data-copyable-value]"))i=this.el.data("copyable-value");else{const e=this.el.data("copyable-target"),t=e?$(e):this.el;t.exists()&&(i=t.val()||t.text(),n=t)}void 0!==i&&AGN.Lib.Clipboard.set(i,(i,o)=>{if(o){const i=e.get(n),o=t("clipboard.copied.tooltip");i?e.setContent(n,o):e.create(n,{title:o,trigger:"manual"}),e.setShown(n);const r=this.el.data("tooltip-timeout-id");r&&clearTimeout(r);const s=setTimeout(()=>{i?(e.restoreContent(n),e.setShown(n,!1)):e.remove(n),this.el.removeData("tooltip-timeout-id")},2500);this.el.data("tooltip-timeout-id",s)}})})})(),(()=>{const e=AGN.Lib.Table,t=AGN.Lib.WebStorage,i=AGN.Lib.Confirm,n="[data-restore-row]",o='[data-bulk-action="restore"]';function r(t,o){const r=e.get(t),a=r.api,l=t.is(n)?[r?.findRowByElement(t)?.data]:a.getSelectedRows();(function(e,t,n="GET"){const o=$.Deferred();if(e&&e.length){const r=$.ajax(t,{method:n,traditional:!0,data:{bulkIds:e}}).fail(()=>o.reject());i.request(r).then(o.resolve,o.reject)}else o.reject(),AGN.Lib.Messages.alert("messages.error.nothing_selected");return o.promise()})(l.map(e=>e.id),t.data("bulk-url"),o?"POST":t.data("method")).done(()=>function(e,t,i){t.forEach(t=>{t.active="false",t.deleted=!i,e.getSelectedNodes().forEach(e=>{e.data.id===t.id&&e.setSelected(!1)})}),e.applyTransaction(s()?{update:t}:{remove:t})}(a,l,o))}function s(){return $(o).exists()}$(document).on("click","[data-js-table-page]",function(){const t=$(this),i=t.data("js-table-page"),n=e.get(t).api;"first"===i?n.paginationGoToFirstPage():"prev"===i?n.paginationGoToPreviousPage():"next"===i?n.paginationGoToNextPage():"last"===i?n.paginationGoToLastPage():n.paginationGoToPage(i),n.deselectAll()}),$(document).on("change","[data-js-table] [data-number-of-rows]",function(){const i=$(this),n=i.val();e.get(i).api.setGridOption("paginationPageSize",n);const o=i.closest(".table-wrapper").data("web-storage");o&&t.extend(o,{paginationPageSize:parseInt(n)})}),$(window).on("viewportChanged",function(){$(document).all(".table-wrapper").each(function(){AGN.Lib.Table.get($(this))?.redraw()})}),$(document).on("click",".js-data-table-delete",function(t){const n=$(this),o=e.get(n);$.get(n.attr("href")).done(e=>{$(e).all(".modal").exists()?i.create(e).done(e=>{const t=o?.findRowByElement(n);t&&(t.data.deleted=!0,t.data.active="false",o.api?.applyTransaction(s()?{update:[t.data]}:{remove:[t.data]}),t.setSelected(!1)),"object"==typeof e?AGN.Lib.JsonMessages(e.popups,!0):AGN.Lib.RenderMessages($(e))}):AGN.Lib.Page.render(e)}),t.preventDefault()}),$(document).on("click",".js-data-table-bulk-delete",e=>{r($(e.currentTarget),!1)}),$(document).on("click",`${o}, ${n}`,e=>{r($(e.currentTarget),!0)})})(),$(document).on("click",".date-picker-container",function(){const e=$(this).find(".js-datepicker");e.prop("disabled")||e.datepicker("widget").is(":visible")||e.datepicker("show")}),$(document).ready(function(){window.AGN.Lib.Controller.init(),window.AGN.runAll()}),$(document).on("dragster:enter",function(e){var t=$(e.target);t.is("[data-upload-dropzone]")||t.addClass("drag-over")}),$(document).on("dragster:leave",function(e){var t=$(e.target);t.is("[data-upload-dropzone]")||t.removeClass("drag-over")}),(()=>{const e=AGN.Lib.EditableView,t=AGN.Lib.Action;t.new({click:"[data-edit-view]"},function(){const t=$(`[data-editable-view="${this.el.data("edit-view")}"]`),i=e.get(t);i.isInEditMode()?i.applyChanges():i.enableEditMode(),$(window).trigger("agn:resize")}),t.new({click:"[data-edit-tile-visibility]"},function(){e.get(this.el).toggleState(this.el)})})(),(()=>{const e=AGN.Lib.Form;function t(){const e=new XMLHttpRequest;return e.addEventListener("progress",e=>{e.lengthComputable&&$("#progress-text").html(`${e.loaded} bytes`)}),e}$(document).on("click","[data-evaluate-loader]",function(i){const n=$(this);let o;return i.preventDefault(),$.ajax({beforeSend:()=>o=AGN.Lib.Modal.fromTemplate(function(e){return e.data("evaluate-loader")||"evaluate-loader-template"}(n)),xhr:t,url:n.prop("href"),type:"POST",data:n.is("[data-form-target]")?e.get($(n.data("form-target"))).params():""}).done(t=>{"object"==typeof t?!1===t.success?AGN.Lib.JsonMessages(t.popups):function(t,i){const n=e.getWrapper(i),o=n.dirty("isDirty");n.dirty("setAsClean");const r=window.onbeforeunload;window.onbeforeunload=null,window.location=AGN.url(t),window.onbeforeunload=r,o&&n.dirty("setAsDirty")}(t.data,n):AGN.Lib.Page.render(t)}).fail(e=>AGN.Lib.Page.render(e)).always(()=>AGN.Lib.Modal.getInstance(o).hide())})})(),(()=>{const e=AGN.Lib.Action,t=AGN.Lib.Form,i=AGN.Lib.Confirm,n=AGN.Lib.Helpers;e.new({click:"[data-form-change]",change:"select[data-form-change]"},function(){t.get(this.el).setValueOnce("numberOfRowsChanged",!0)}),e.new({click:"a[data-form-set], button[data-form-set]",change:"select[data-form-set], input[data-form-set]"},function(){const e=n.objFromString(this.el.data("form-set")),i=t.get(this.el);_.forEach(e,(e,t)=>i.setValueOnce(t,e))}),e.new({click:"a[data-form-url], button[data-form-url]",change:"select[data-form-url], input[data-form-url]"},function(){t.get(this.el).setActionOnce(this.el.data("form-url"))}),e.new({click:"a[data-form-method], button[data-form-method]",change:"select[data-form-method], input[data-form-method]"},function(){t.get(this.el).setMethodOnce(this.el.data("form-method"))}),e.new({click:"a[data-form-resource], button[data-form-resource]",change:"select[data-form-resource], input[data-form-resource]"},function(){const e=t.get(this.el);e instanceof AGN.Lib.ResourceForm&&e.setResourceSelectorOnce(this.el.data("form-resource"))}),e.new({click:"a[data-form-clear], button[data-form-clear]"},function(){const e=this.el.data("form-clear");var i;e?((i=$(e)).find(":input, select").val("").trigger("change"),i.find(":checkbox, :radio").prop("checked",!1),AGN.Lib.CoreInitializer.run("select",i),this.el.trigger("apply-filter")):t.get(this.el).clear()}),e.new({click:"a[data-form-persist], button[data-form-persist]",change:"select[data-form-persist], input[data-form-persist]"},function(){const e=n.objFromString(this.el.data("form-persist")),i=t.get(this.el);_.forEach(e,(e,t)=>i.setValue(t,e))}),e.new({click:"a[data-form-reset], button[data-form-reset]"},function(){t.get(this.el).reset()}),e.new({click:"a[data-form-abort], button[data-form-abort]"},function(){t.get(this.el).abort()}),e.new({click:"[data-form-confirm]"},function(){const e=t.get(this.el);e.submit("confirm").done(t=>{$(t).all(".modal").exists()?i.create(t).done(t=>e.updateHtml(t)).fail(e.revertAction):e.updateHtml(t)})}),e.new({click:"a[data-form-submit], button[data-form-submit]",change:"select[data-form-submit], input[data-form-submit]"},function(){setTimeout(()=>t.get(this.el).submit(),5)}),e.new({click:"a[data-form-submit-static], button[data-form-submit-static]",change:"select[data-form-submit-static], input[data-form-submit-static]"},function(){setTimeout(()=>t.get(this.el).submit("static"),5)}),e.new({click:"a[data-form-submit-event], button[data-form-submit-event]",change:"select[data-form-submit-event], input[data-form-submit-event]"},function(){setTimeout(()=>t.get(this.el).submit("event"),5)}),e.new({submit:"[data-form]"},function(){"static"!==this.el.data("form")&&(this.event.preventDefault(),setTimeout(()=>t.get(this.el).submit(),5))}),e.new({keydown:'input[type="text"], input[type="password"], input[type="number"]'},function(){if(function(e){const t=e.keyCode||e.which;if(13===t)return!0;if(229===t&&e.originalEvent){const t=e.originalEvent.code;if("Enter"===t||"NumpadEnter"===t)return!0}return!1}(this.event)){const e=$.Event("enterdown");if(this.el.trigger(e),e.isDefaultPrevented())return void this.event.preventDefault();const i=t.getWrapper(this.el);if(i.exists())if(i.is("[data-form]")){const e=t.get(i);i.is("[data-action]")?e.submit("event"):e.submit()}else i.submit()}})})(),AGN.Lib.Action.new({click:"[data-help]"},function(){AGN.Lib.Help.show(this.el),this.event.preventDefault()}),$(document).on("click","[data-manual]",function(e){const t=$(this);AGN.Lib.Helpers.openHelpModal("manual",{key:t.data("manual")})}),(()=>{const e='input[type="text"]';function t(e){const t=AGN.Lib.Popover,i=t.get(e);i?.inputTruncatedTextPopover&&(i.setContent({".popover-body":e.val()}),e.is(":truncated")?(i.enable(),!t.isShown(i)&&e.is(":hover")&&i.show()):i.disable())}$(document).on("input change",e,function(){t($(this))}),$(window).on("viewportChanged",function(){$(e).each(function(){t($(this))})})})(),$(document).on("click","label",function(e){if($(e.target).is("[data-help]"))return;const t=$(this),i=$(`#${t.attr("for")}`),n=i.data("select2");1===i.length&&n&&setTimeout(()=>{n.isOpen()||n.open()},0)}),(()=>{const e=window.history;$(document).on("click",'a[href^="#"]',function(t){if(t.isDefaultPrevented())return;const i=$(this);i.closest("[bs-scrollspy]").exists()||(t.preventDefault(),function(t){if("#"===t)return;var i=window.location.href,n=i.indexOf("#");n>=0&&(i=i.substring(0,n));e.replaceState(e.state||{},document.title,i+t)}(i.attr("href")))})})(),AGN.Lib.Action.new({click:"[data-msg]"},function(){AGN.Lib.Messages(this.el.data("msg"),this.el.data("msg-content"),this.el.data("msg-type"))}),AGN.Lib.Action.new({click:"[data-modal]"},function(){const e=this.el.data("modal");let t=this.el.data("modal-set");t="object"==typeof t?t:AGN.Lib.Helpers.objFromString(t),AGN.Lib.Modal.fromTemplate(e,t)}),$(document).on("hidden.bs.modal",".modal",function(){const e=$(this);e.trigger("modal:close"),setTimeout(()=>e.remove(),100)}),$(document).on("shown.bs.modal",".modal",function(){setTimeout(()=>$(this).trigger("modal:open"),0);const e=$(".modal.show");var t;e.length>1&&(t=e.last(),$(".modal-backdrop.show").last().css("z-index",t.css("z-index")))}),AGN.Lib.Action.new({click:"[data-popup]"},function(){const e=window.location.href,t=e.substring(0,e.lastIndexOf("/"));let i=this.el.data("popup");(!i||i.indexOf("://")<=0)&&(i=`${t}/${i}`);const n={width:800,height:600,url:i};this.el.is("[data-popup-options]")&&_.merge(n,AGN.Lib.Helpers.objFromString(this.el.data("popup-options")));const o=window.screen.width,r=window.screen.height,s=o>n.width?(o-n.width)/2:0,a=r>n.height?(r-n.height)/2:0;window.open(n.url,"help",`width=${n.width},height=${n.height},top=${a},left=${s}`)}),(()=>{const e=$(window),t=1,i=2;let n,o;const r=function(){n&&clearTimeout(n),n=setTimeout(function(){AGN.Lib.CoreInitializer.run(["scrollable","truncated-text-popover","table-cols-resizer","table"]),_.each(AGN.Lib.Editor.all(),e=>e.resize()),e.trigger("viewportChanged")},500),function(){const e=o;return o=AGN.Lib.Helpers.isMobileView()?i:t,e!==o}()&&e.trigger("displayTypeChanged",[o===i])};e.on("resize",r),e.on("agn:resize",r)})(),$(document).on("agn:rail-mousedown",function(e,t){$(t).find("iframe").addClass("pe-none")}),$(document).on("agn:rail-mouseup",function(e,t){$(t).find("iframe").removeClass("pe-none")}),$(window).on("load",function(){new MutationObserver(()=>AGN.Lib.Scrollbar.updateAll()).observe(document.body,{childList:!0,subtree:!0})}),(()=>{const e=AGN.Lib.Helpers;AGN.Lib.Action.new({click:"[data-support-type]"},function(){const t=this.el.data("support-type"),i=e.objFromString(this.el.data("support-options"));e.openHelpModal("support",{type:t,opts:i})})})(),(()=>{const e=AGN.Lib.FormBuilder.FormBuilder,t=AGN.Lib.Editor;AGN.Lib.Action.new({"click change":"[data-sync-from]"},function(){const i=this.el.data("sync-from").split(/,\s?/),n=this.el.data("sync-to").split(/,\s?/);_.each(i,(i,o)=>{const r=$(i),s=$(n[o]),a=r.val(),l=s.attr("id");window.Jodit?.instances[l]?Jodit.instances[l].value=a:window.CKEDITOR&&CKEDITOR.instances[l]?CKEDITOR.instances[l].setData(a):t.exists(s)?t.get(s).val(a):s.data("select2")?s.select2("val",a):e.isCreated(`#${l}`)?e.get(`#${l}`).setJson(e.get(i).getJson()):"checkbox"===r?.prop("type")?.trim()?s.val(r.prop("checked")):s.val(a)})})})(),(()=>{const e=AGN.Lib.Form;$(document).on("click","[data-toggle-tab]",function(t){const i=$(this);if(i.is("[data-form-submit]")){const n=e.getWrapper(i);if(n.exists()&&!e.get(n).valid())return t.preventDefault(),!1}return AGN.Lib.Tab.show(i),AGN.Lib.Scrollbar.get(i)?.update(),t.preventDefault(),!1})})(),(()=>{const e=AGN.Lib.Action,t=AGN.Lib.TableColumnManager;e.new({click:"[data-manage-table-columns]"},function(){const e=t.get(this.el);e.isInEditMode()?e.applyChanges():e.toEditMode()}),e.new({click:"[data-remove-table-column]"},function(){t.get(this.el).removeColumn(this.el.closest("th"))}),$(window).on("displayTypeChanged",(e,i)=>{i&&t.get($("[data-manage-table-columns]"))?.discardChanges()})})(),(()=>{const e=AGN.Lib.Helpers,t=AGN.Lib.Confirm,i=AGN.Lib.Form;function n(e,t,i){const n=function(e){return e.find(".bulk-actions")}(e);if(n.exists()){if(null==t){const n=e.find("[data-bulk-checkbox]:checked").closest("tr");i=n.find("[data-bulk-action]").filter((e,t)=>!$(t).prop("disabled")&&!$(t).hasClass("disabled")).map((e,t)=>$(t).data("bulk-action")).get(),t=n.length}n.find(".bulk-actions__selected span").text(t),function(e,t){if(!t.length)return;const i=new Set(t);e.find("[data-bulk-action]").each(function(){const e=$(this);e.toggleClass("hidden",!i.has(e.data("bulk-action")))})}(n,i||[]),n.toggleClass("hidden",0===t)}}$(document).on("click",'.js-table a, .js-table input, .input-table input[type="checkbox"], .js-table select, .js-table .select2, .js-table button, .js-table td:has(input[type="checkbox"]), .js-table .disabled',function(e){e.stopPropagation()}),$(document).on("click","[data-table-sort]",function(t){const n=$(this);if(t.target!==n.get(0))return;const o=n.attr("href");if(i.getWrapper(n).exists()){const t=i.get(n),r=e.paramsFromUrl(o);_.each(r,(e,i)=>t.setValue(i,e)),t.submit()}else $.get(o).done(e=>AGN.Lib.Page.render(e,!1));t.preventDefault()}),$(document).on("click","[data-paginate]",function(t){const n=$(this),o=i.get(n),r=e.paramsFromUrl(n.attr("href"));_.each(r,(e,t)=>o.setValue(t,e)),o.submit(),t.preventDefault();const s=n.closest(".tile");if(s.exists()){const e=s.offset().top;window.scrollY>e&&window.scrollTo(0,e-150)}else window.scrollTo(0,0)}),$(document).on("click",".js-row-delete",function(e){const n=$(this),o=n.is("button")?n.data("url"):n.attr("href"),r=i.get(n);o&&$.get(o).done(e=>{$(e).all(".modal").exists()?t.create(e).done(e=>{n.closest("tr").remove(),r.updateHtml(e)}):r.updateHtml(e)}),e.preventDefault()}),$(document).on("click",".js-table tr:not(.disabled)",function(e){if(AGN.Lib.Helpers.isMobileView())return;const n=$(this),o=n.data("link");void 0===o||"#"===o||n.closest(".table-row-wrapper").exists()||function(e,n){const o=i.get(e);$.get(n).done(e=>{$(e).all(".modal").exists()?t.create(e).done(e=>o.updateHtml(e)):o.updateHtml(e)})}(n,o)}),$(document).on("click",'td:has(input[type="checkbox"])',function(e){e.preventDefault();const t=$(this).find('input[type="checkbox"]');_.each(t,e=>{const t=$(e);t.prop("disabled")||(t.prop("checked",!t.prop("checked")),t.trigger("change"))})}),$(document).on("click",".disabled",function(e){e.preventDefault()}),$(document).on("click","[data-toggle-table-truncation]",function(){const e=$(this).closest(".table-wrapper"),t=e.find("table, .ag-body");t.toggleClass("no-truncate"),AGN.Lib.CoreInitializer.run(["truncated-text-popover","scrollable"],e),AGN.Lib.Storage.set("truncate-table-text",!t.hasClass("no-truncate"))}),AGN.Lib.Action.new({change:"[data-preview-table]"},function(){AGN.Lib.PreviewTable.toggle(this.el),AGN.Lib.CoreInitializer.run(["scrollable","truncated-text-popover","table","table-cols-resizer"],this.el.closest(".table-wrapper"))}),$(document).on("change","[data-bulk-checkbox]",function(){const e=$(this).closest(".table-wrapper"),t=e.find("[data-bulk-checkboxes]"),i=e.find("[data-bulk-checkbox]:not(:disabled)"),o=i.filter(":checked").length,r=i.length;t.prop("indeterminate",o>0&&o<r),t.prop("checked",o===r),n(e)}),$(document).on("change","[data-bulk-checkboxes]",function(){const e=$(this);e.closest(".table-wrapper").find("[data-bulk-checkbox]:not(:disabled)").prop("checked",e.prop("checked")).trigger("change")}),$(document).on("table:updateBulkActions",".table-wrapper",function(e,t,i){n($(this),t,i)})})(),$(document).on("input change",".text-area-grow-wrapper > textarea",function(e){const t=$(this);t.parent().attr("data-replicated-value",t.val()),AGN.Lib.Scrollbar.get(t)?.update()}),(()=>{const e="tile--full-screen";function t(t,i,n){return!function(e,t){return!t&&e.find("\n    .tile-title > i.icon-caret-up.mobile-visible,\n    .tile-title > i.icon-caret-down.mobile-visible").exists()}(t,i)&&!t.hasClass(e)&&(i&&(o=n.target,!$(o).closest(".tile-header .tile-controls").length)||function(e){return $(e).closest(".tile-header .tile-title").length}(n.target));var o}$(document).on("click","[data-toggle-tile] > .tile-header",function(e){const i=$(this).closest(".tile");t(i,AGN.Lib.Helpers.isMobileView(),e)&&AGN.Lib.Tile.get(i).toggleCollapse()}),$(document).on("click",".tile [data-full-screen]",function(t){const i=$(this),n=i.closest(".tile");n.toggleClass(e),_.each(AGN.Lib.Editor.all(n),e=>e.resize()),Jodit&&n.find(".js-wysiwyg").each(function(){const e=$(this).attr("id");Jodit.instances[e]?.e.fire("setHeight","100%")});const o=n.hasClass(e);i.find("i").toggleClass("icon-compress-arrows-alt",o).toggleClass("icon-expand-arrows-alt",!o),t.preventDefault()})})(),AGN.Lib.Action.new({change:"[data-toggle-usability]"},e=>{_.each($(e.data("toggle-usability")),e=>{const t=$(e);t.prop("disabled",!t.prop("disabled"))})}),AGN.Lib.Action.new({click:"[data-upload-reset]"},function(){const e=$(this.el.data("linked-dropzone"));e.exists()&&e.trigger("upload:reset")}),(()=>{const e=AGN.Lib.Messaging,t=["Enter","Backspace","Delete","Tab"];window.addEventListener("message",e=>{if("scroll-transfer"===e.data?.type){const t=e.data.wysiwygId,i=window.Jodit?Jodit.instances[t].iframe:CKEDITOR.instances[t].container.findOne("iframe").$,n=AGN.Lib.Scrollbar.get($(i))?.$el?.get(0);n&&(n.scrollTop=n.scrollTop+e.data.deltaY)}}),$(document).on("tile:show",function(o){const r=$(o.target).find(".js-wysiwyg");if(1===r.length){const o=r.attr("id"),s=i(r);if(window.Jodit){const i=Jodit.make(`#${o}`,{theme:AGN.Lib.Helpers.isDarkTheme()?"dark":"default",editHTMLDocumentMode:s.isFullHtml,language:window.adminLocale?.split("-")[0]||"en",cleanHTML:{denyTags:""+(s.allowExternalScript?"":"script")},emmMailingId:s.browseMailingId||-1,emmToolbarType:s.toolbarType});s.isFullHtml&&($(i.editor).trigger("click"),function(e){const t=e.iframe.contentWindow.document;e.iframe.contentWindow.document.documentElement&&e.e.on(t.documentElement,"mousedown touchend",()=>{e.s.isFocused()||(e.s.focus(),e.editor===t.body&&e.s.setCursorIn(t.body))}).on(e.ew,"mousedown touchstart keydown keyup touchend click mouseup mousemove scroll",t=>{e.events?.fire(e.ow,t)})}(i),setTimeout(()=>{i.e.on("keyup",e=>{(1===e.key.length||t.includes(e.key))&&(i.userInputHappened=!0)}),e.send("html-version-wysiwyg-shown")},100)),n(i.iframe,i.id)}else window.createEditorExt(o,s.width,s.height,s.browseMailingId,s.isFullHtml,!1,s.allowExternalScript),s.isFullHtml&&e.send("html-version-wysiwyg-shown"),window.setTimeout(()=>{n(CKEDITOR.instances[o].container.findOne("iframe").$,o)},500);e.send("wysiwyg-shown")}}),$(document).on("tile:hide modal:close",function(e){$(e.target).find(".js-wysiwyg").each(function(){const e=$(this);if(window.Jodit){const t=Jodit.instances[e.attr("id")];t?.options.editHTMLDocumentMode&&(t.e.fire("outsideClick"),t.synchronizeValues()),t?.destruct(),AGN.Lib.Editor.get(e).val(e.val())}else CKEDITOR.instances[e.attr("id")]?.updateElement(),AGN.Lib.Editor.get(e).val(e.val()),window.removeEditor(e.attr("id"))})}),$(document).on("form:submit",function(e){$(e.target).find(".js-wysiwyg").exists()&&(window.Jodit?Object.values(Jodit.instances).forEach(e=>e.destruct()):window.removeAllEditors&&window.removeAllEditors())});const i=e=>{const t={};return window.Jodit?t.isFullHtml=!1:(t.isFullHtml=!!e.data("full-tags"),t.height=e.height(),t.width="100%"),t.allowExternalScript=!1,t.browseMailingId=function(e){const t=e.data("form-target"),i=t?$(t):null;if(!i||!i.exists())return null;const n=AGN.Lib.Form.get(i);let o=n.getValue("mailingID");o||(o=n.getValue("mailingId"));return o}(e),_.extend(t,AGN.Lib.Helpers.objFromString(e.data("editor-options")))};function n(e,t){if(!e)return;const i=e.contentWindow,n=e.contentDocument||i.document;i.addEventListener("wheel",e=>{const o=i.scrollY<=0,r=i.scrollY+i.innerHeight>=n.body.scrollHeight;(o&&e.deltaY<0||r&&e.deltaY>0)&&(window.parent.postMessage({type:"scroll-transfer",deltaY:e.deltaY,wysiwygId:t},"*"),e.preventDefault())},{passive:!1})}})(),AGN.Lib.Validator.new("action",{valid:function(e,t,i){return i&&!this.errors(e,t).length},errors:function(e,t){const i=[];return $("#serviceMailOperation").length&&this.validateSendServiceOperation(i),i},validateSendServiceOperation:function(e){validateEmailList($("input[id$=toAddress]"),e,"triggerManager.operation.serviceMail.error.recipientAddress"),validateEmail($("input[id$=fromAddress]"),e,"triggerManager.operation.serviceMail.error.senderAddress"),validateEmail($("input[id$=replyAddress]"),e,"triggerManager.operation.serviceMail.error.replyAddress"),validateSubject($("input[id$=subjectLine]"),e)}}),AGN.Lib.Validator.new("email-validator",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){const n=e.is("select[multiple]")?e.val():e.val().split(",");return!n.length&&i.required?[{field:e,msg:t("fields.required.errors.missing")}]:AGN.Lib.Helpers.isValidEmails(n)?[]:[{field:e,msg:t("defaults.invalidEmail")}]}}),(()=>{function e(e){return e.val().trim()}AGN.Lib.Validator.new("export/form",{valid:function(e,t){return!this.errors(e,t).length},errors:function(i,n){const o=[];return function(i){const n=[];_.each($("#custom-column-mappings tbody").find("tr"),o=>{const r=$(o),s=r.find('[data-name="dbColumn"]'),a=e(s);!function(i,n,o){const r=e(n),s=i.is(":last-child");if(!s&&0===r.length)return void o.push({field:n,msg:t("export.columnMapping.error.nameEmpty")});if(!s&&r.length<3||s&&r&&r.length<3)return void o.push({field:n,msg:t("export.columnMapping.error.nameTooShort")});(!s&&!/^[a-zA-Z0-9_]{3,}$/.test(r)||s&&r&&!/^[a-zA-Z0-9_]{3,}$/.test(r))&&o.push({field:n,msg:t("export.columnMapping.error.invalidColName")})}(r,s,i),function(e,i,n,o){e&&i.indexOf(e.toLowerCase())>=0&&n.push({field:o,msg:t("export.columnMapping.error.duplicate")});$.map($('select[name="userColumns"] option'),function(e){return e.value.toLowerCase()}).indexOf(e.toLowerCase())>=0&&n.push({field:o,msg:t("export.columnMapping.error.exist")})}(a,n,i,s),n.push(a.toLowerCase())})}(o),o}})})(),function(){let e;function i(e){const t=e.simpleDataType.toLowerCase();return"float"===t||"numeric"===t?e.numericPrecision+e.numericScale:e.characterLength}function n(e){return e.closest("[data-mapping-row]").find("[data-mapping-db-column]").first().val()}function o(e,t){switch(e){case"numeric":case"float":case"double":return i=t,!isNaN(parseFloat(i))&&isFinite(i);case"integer":return function(e){return/^-?\d+$/.test(e)}(t);case"date":return r(t);case"datetime":return function(e){const t=e.split(" ");return r(t[0])&&/^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/.test(t[1])}(t);default:return!0}var i}function r(e){return moment(e,window.adminDateFormat.toUpperCase(),!0).isValid()}AGN.Lib.Validator.new("import-profile-mappings/form",{valid:function(e,t){return!this.errors(e,t).length},errors:function(r,s){const a=[];return function(r,s){_.each(s.find("[data-mapping-defaultValue]"),s=>{const a=$(s);a.closest("[data-mapping-row]").is("[data-mapping-new]")&&(n(a)===e.doNotImportValue||function(){const e=$("[data-action=set-today-date]");return e.exists()&&e.is(":checked")}())||function(r,s){const a=function(e){let t=e.val();"'"==t[0]&&"'"==t[t.length-1]&&(t=t.substring(1,t.length-1));return t}(r);if(a&&n(r)!==e.doNotImportValue){const c=function(t){return e.columns[n(t)]}(r),d=c.simpleDataType.toLowerCase();if("email"!==c.columnName||AGN.Lib.Helpers.isValidEmail(a))if("date"===d||"datetime"===d){if(l=r.val().trim(),/^(now|now\(\)|sysdate|sysdate\(\)|current_timestamp|current_timestamp\(\)|today)\s*([+\-]\s*\d+\s*)?$/im.test(l))return;!function(e,i,n,r){i&&o(e,i)||n.push({field:r,msg:t("import.columnMapping.error.dateFormat","datetime"===e?window.adminDateFormat+" hh:mm":window.adminDateFormat)})}(d,a,s,r)}else o(d,a)?function(e,t){return t.length<=i(e)}(c,a)||s.push({field:r,msg:t("import.columnMapping.error.length",i(c))}):s.push({field:r,msg:t("import.columnMapping.error.type",d)});else s.push({field:r,msg:t("import.columnMapping.error.invalidEmail")})}var l}(a,r)})}(a,s.$mappingsBlock),a}}),AGN.Lib.DomInitializer.new("import-profile-mappings-validator",function(){e=this.config})}(),AGN.Lib.Validator.new("length",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=e.val(),o=[];return n?i.min>=0&&n.length<i.min?o.push({field:e,msg:t("fields.errors.string_exceed_min_length",i.min)}):i.max>=0&&n.length>i.max&&o.push({field:e,msg:t("fields.errors.string_exceed_max_length",i.max)}):(i.min>0||!0===i.required)&&o.push({field:e,msg:t("fields.required.errors.missing")}),o}}),AGN.Lib.Validator.new("logon-new-password/form",{valid:function(){return!this.errors().length},errors:function(){var e=[],i=$("#password"),n=$("#password-repeat"),o=i.val();return $.trim(o)?o!=n.val()&&e.push({field:n,msg:t("fields.password.errors.notMatching")}):e.push({field:i,msg:t("fields.required.errors.missing")}),e}}),AGN.Lib.Validator.new("mailing-priorities/form",{valid:function(){return $("#priorityCount").val()>0||(AGN.Lib.Messages.alert("error.mailing.invalidPriorityCount"),!1)},errors:function(){return[]}}),AGN.Lib.Validator.new("mailinglist-exist",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=e.val(),o=AGN.Lib.Validator.get("required-id").errors(e,i);return o&&o.length<=0&&i&&n&&i.removedMailinglistId==n.trim()&&o.push({field:e,msg:t("fields.mailinglist.errors.removed")}),o}}),AGN.Lib.Validator.new("max-length-validator",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=e.val(),o=[];return e.hasClass("js-wysiwyg")&&!n&&(n=$("#cke_"+e.attr("id")).find("iframe").contents().find("body").text()),n?n.length>i.max&&o.push({field:e,msg:t("fields.errors.contentLengthExceedsLimit",i.max)}):!0===i.required&&o.push({field:e,msg:t("fields.required.errors.missing")}),o}}),AGN.Lib.Validator.new("number",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=[];if(i.excludeHidden&&e.is(":hidden"))return[];var o=e.val();if(o){var r=!0===i.float?parseFloat(o):parseInt(o);isNaN(r)?n.push({field:e,msg:t("fields.errors.number_nan")}):r<i.min?n.push({field:e,msg:t("fields.errors.number_exceed_min",i.min-1)}):r>i.max?n.push({field:e,msg:t("fields.errors.number_exceed_max",i.max)}):!0===i.strict&&$.trim(o)!==r.toString()&&(!0===i.float?n.push({field:e,msg:t("fields.errors.number_not_double")}):n.push({field:e,msg:t("fields.errors.number_not_integer")}))}else!0===i.required&&n.push({field:e,msg:t("fields.required.errors.missing")});return n}}),AGN.Lib.Validator.new("phone-number",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=$.trim(e.val()),o=[];if(n){for(var r=0,s=!1,a=!1,l=0,c=0;c<n.length;c++){var d=n.charAt(c);if(d>="0"&&d<="9")l++,r=3;else if("."==d||"-"==d||"/"==d){if(3!=r&&6!=r){s=!0;break}r=4}else if("("==d){if(a){s=!0;break}r=5,a=!0}else if(")"==d){if(3!=r||!a){s=!0;break}r=6,a=!1}else if("+"==d){if(0!=r){s=!0;break}r=1}else if(!/\s/.test(d)){s=!0;break}}(s||a||l<3||l>20)&&o.push({field:e,msg:t("fields.errors.phone_number_invalid")})}else!0===i.required&&o.push({field:e,msg:t("fields.required.errors.missing")});return o}}),function(){function e(e,i,n,o,r,s){(function(e,t,i,n){var o=AGN.Lib.Validator.get("length").errors(e,{min:i,max:n,required:!0});if(o.length)return o.forEach(function(e){t.push(e)}),!1;return!0})(e,i,n,o)&&function(e,i,n,o){e.val().match(n)||i.push({field:e,msg:t(o)})}(e,i,r,s)}AGN.Lib.Validator.new("reference-table/form",{valid:function(e,t){return!this.errors(e,t).length},errors:function(t,i){var n=[],o=$('[name="shortname"]'),r=$('[name="keyColumn"]');return o.length&&e(o,n,5,i.isVoucher?27:29,new RegExp("^[a-z]*$","i"),"referenceTables.table.error.name"),r.length&&e(r,n,3,30,/^(?![0-9_])[a-z0-9_]*$/,"referenceTables.table.error.keyColumn"),n}})}(),AGN.Lib.Validator.new("reject-not-allowed-chars",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){const n="string"==typeof i.chars?$(i.chars).json().chars:i.chars,o=function(e,t){const i=[],n=new Set(t);for(let t of e)n.has(t)||i.includes(t)||i.push(t);return i}(e.val(),n);return o.length?[{field:e,msg:t(i.msgKey,o.map(e=>`'${e}'`).join(", "))}]:[]}}),AGN.Lib.Validator.new("reject-script-element",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=[];return(new DOMParser).parseFromString(e.val(),"text/html").querySelector("script")&&n.push({field:e,msg:t("fields.errors.illegal_script_element")}),n}}),AGN.Lib.Validator.new("required-id",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){if(e.data("select2")&&!e.parent().find(".select2-container").is(":visible"))return[];var n=e.val(),o=parseInt(n),r=[];return(isNaN(o)||o.toString()!==n.toString().trim()||o<=0&&!1!==i.positive)&&r.push({field:e,msg:t("fields.required.errors.missing")}),r}}),AGN.Lib.Validator.new("unique-mobile-base",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=AGN.Lib.Select.get(e).getSelectedValue(),o=e.attr("id"),r=[];return this.isUniqueMobileBase(n,o)||r.push({field:e,msg:t("fields.mediapool.errors.mobile_base_duplicate")}),r},isUniqueMobileBase:function(e,t){return""==e||0===$("[id^=image-mobile-base]:not(#"+t+")").filter(function(){var t=$(this);return AGN.Lib.Select.get(t).getSelectedValue()===e}).length}}),AGN.Lib.Validator.new("upload-file/form",{valid:function(e,t,i){let n=!0;return e.get$().data("upload-selection").length<1&&(AGN.Lib.Messages.alert("error.upload.file"),n=!1),i&&n&&!this.errors(e,t).length},errors:function(e,i){const n="error.workflow.shortName",o="fields.required.errors.missing";var r=[{field:$("#name"),minLength:{val:3,msgKey:n},maxLength:99},{field:$("#firstName"),minLength:{val:3,msgKey:n},maxLength:99},{field:$("#phone"),minLength:{val:1,msgKey:o},maxLength:99},{field:$("#email"),maxLength:99,regexpRules:[{regexp:/\S+@\S+\.\S{2,}/,message:t("error.upload.email")}]}],s=[];return r.forEach(function(e){var i=e.field,n=i.val();if(!n||n.length<1)s.push({field:i,msg:t(o)});else if(e.minLength&&n.length<e.minLength.val)s.push({field:i,msg:t(e.minLength.msgKey)});else if(e.maxLength&&n.length>e.maxLength)s.push({field:i,msg:t("fields.errors.contentLengthExceedsLimit",e.maxLength)});else if(e.regexpRules&&e.regexpRules.length>0)for(var r=0;r<e.regexpRules.length;++r){var a=e.regexpRules[r];if(!n.match(a.regexp))return void s.push({field:i,msg:a.message})}}),s}}),AGN.Lib.Validator.new("userform-edit/form",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=[],o=$('[name="formName"]');return o.val().match(/^[a-zA-Z0-9-_]+$/gi)||n.push({field:o,msg:t("userform.error.invalid_name")}),this.validateUrlField(n,"success"),this.validateUrlField(n,"error"),this.validateTemplateField(n,$("#successTemplate"),"SUCCESS"),this.validateTemplateField(n,$("#errorTemplate"),"ERROR"),n},validateUrlField(e,i){const n=$(`#${i}URL`);$(`[name="${i}Settings.useUrl"]`).prop("checked")&&!AGN.Lib.Helpers.isUrl(n.val())&&e.push({field:n,msg:t(`userform.error.invalid_${i}Url`)})},validateTemplateField:function(e,i,n){const o=n.toLowerCase();return $(`[name="${o}Settings.useUrl"]`).prop("checked")||i.val().trim()||e.push({field:$(`#${o}-form-editor .tile-body`),msg:t(`userform.error.invalid_${o}Html`)}),!!this.validateDirectives(e,i)&&(!!this.validateHrefPattern(e,i,n)&&void 0)},validateDirectives:function(e,i){var n=i.val().match(/#(?:include|parse)/gi);return!n||(e.push({field:i,msg:t("userform.error.illegal_directive",n.join(", "))}),!1)},validateHrefPattern:function(e,i,n){var o=i.val(),r=o.search(/\shref\s*=\s*(["'])\s/gi);if(-1!=r){var s=o.slice(0,r).match(/\r?\n/g).length+1;return e.push({field:i,msg:t("userform.error.invalid_link",n,s)}),!1}return!0}}),AGN.Lib.Dashboard.Def={LAYOUT:{DEFAULT:{COLS_COUNT:3,ROWS_COUNT:2,SCHEMA:[{id:"mailings"},{id:"statistics"},{id:"imports-exports"},{id:"calendar"},{id:"news"}]}},TileSize:{REGULAR:{dimensions:[1,1],name:"regular"},TALL:{dimensions:[2,1],name:"tall"},WIDE:{dimensions:[1,2],name:"wide"},X_WIDE:{dimensions:[1,3],name:"x-wide"},X_LARGE:{dimensions:[2,3],name:"xl"},from:function(e){for(let t in this)if(this[t].name===e)return this[t];return null}},DATE_FORMAT:"DD-MM-YYYY",TIME_FORMAT:"HH:mm",DATE_TIME_FORMAT:"DD-MM-YYYY HH:mm"},(()=>{const e=AGN.Lib.Dashboard.Def.TileSize;AGN.Lib.Dashboard.DashboardGrid=class{constructor(e,t,i){this.rows=e,this.cols=t,this.swapper=new AGN.Lib.Dashboard.TileSwapper(this),this.$container=$("#dashboard-tiles"),this.$container.on("agn:grid-modified",(e,t)=>this.#Ut(t)),this.#Yt(i)}#Yt(e){this.#qt(e),this.#Kt(),e.forEach(e=>e.displayIn(this.$container)),this.$container.removeClass((e,t)=>(t.match(/\bdashboard-grid-cols-\S+/g)||[]).join(" ")),this.$container.addClass(`dashboard-grid-cols-${this.cols}`)}#qt(e){e.sort((e,t)=>{const i=e.position.rows[0],n=e.position.cols[0],o=t.position.rows[0],r=t.position.cols[0];return i!==o?i-o:n-r})}#Kt(){this.$tiles.each((e,t)=>$(t).data("tile").remove())}get visibleTiles(){return this.tiles.filter(e=>"hidden"!==e.$el.css("visibility"))}get schema(){return{COLS_COUNT:this.cols,SCHEMA:this.tiles.map(({id:e,position:t})=>({id:e,position:t}))}}#Xt(e,t,i){if(t<0||i<0)return!1;const[n,o]=e.dimensions;for(let e=0;e<n;e++)for(let n=0;n<o;n++){let o=i+n;if(t+e>=this.rows||o>=this.cols)return!1}return!0}#Ut(e){this.updateTilesPositions(),e&&this.swapper.initDragAndDrop(e)}#Zt(e,t,i,n){const o=_.flatMap(_.range(e),e=>_.range(t).map(t=>this.getTile(i+e,n+t)).filter(Boolean));return _.uniq(o)}insertTile(e,t,i){const n=this.getTile(t,i),o=this.getPreviousTileOf(n);o?e.insertAfter(o):n?e.insertBefore(n):e.displayIn(this.$container)}getPreviousTileOf(e){if(!e)return null;const t=this.tiles,i=t.findIndex(t=>t===e);return i>0?t[i-1]:null}get tiles(){return this.$tiles.toArray().map(e=>$(e).data("tile"))}get tallTiles(){return this.tiles.filter(e=>e.isTall)}get xlTiles(){return this.tiles.filter(e=>e.isXl)}get wideTiles(){return this.tiles.filter(e=>e.isWide)}get xWideTiles(){return this.tiles.filter(e=>e.isXWide)}get $tiles(){return $(".draggable-tile")}getTile(e,t){return this.tiles.find(i=>i.position.rows.includes(e)&&i.position.cols.includes(t))}replaceTile(e,t){const i=this.#Jt(e,t.size);this.#Qt(t,i[0],i[1])}#Jt(e,t){const i=this.#ei(e,t);let n=null,o=0;for(let e=0;e<i.length;e++){const r=i[e],s=this.#ti(t,r[0],r[1]).filter(e=>!e.isEmpty);(s.length<o||null===n)&&(o=s.length,n=r)}return n}#ei(e,t){const i=[];for(let n=e.beginRow-t.dimensions[0]+1;n<=e.beginRow+e.size.dimensions[0]-1;n++)for(let o=e.beginCol-t.dimensions[1]+1;o<=e.beginCol+e.size.dimensions[1]-1;o++)this.#Xt(t,n,o)&&i.push([n,o]);return i}findInterferingTilesToReplace(e,t){const i=this.#Jt(e,t);return this.#ti(t,i[0],i[1])}#Qt(t,i,n){this.#ti(t.size,i,n).filter(t=>t.size!==e.REGULAR).forEach(e=>this.replaceWithEmptyTile(e)),this.#ti(t.size,i,n).forEach(e=>e.remove()),this.insertTile(t,i,n)}#ti(e,t,i){const[n,o]=e.dimensions;return this.#Zt(n,o,t,i)}#ii(){return new AGN.Lib.Dashboard.EmptyTile}replaceWithEmptyTile(e){if(!e)return;e.remove();const{rows:t,cols:i}=e.position;t.forEach(e=>i.forEach(t=>this.insertTile(this.#ii(),e,t)))}updateTilesPositions(){const e=this.tiles,t={row:0,col:-1};e.forEach(e=>e.position={rows:[],cols:[]}),e.forEach(i=>i.position=this.#ni(e,i.size,t))}#ni(t,i,n){for(n.col=n.col+1,n.col>=this.cols&&(n.row=n.row+1,n.col=0);this.#oi(t,n.row,n.col);)n.col=n.col+1;switch(i){case e.TALL:return{rows:[0,1],cols:[n.col]};case e.WIDE:return n.col=n.col+1,{rows:[n.row],cols:[n.col-1,n.col]};case e.X_WIDE:return n.col=n.col+2,{rows:[n.row],cols:[n.col-2,n.col-1,n.col]};case e.X_LARGE:return n.col=n.col+2,{rows:[0,1],cols:[n.col-2,n.col-1,n.col]};default:return{rows:[n.row],cols:[n.col]}}}#oi(e,t,i){return e.filter(e=>!e.isRegular).some(e=>e.position.rows.includes(t)&&e.position.cols.includes(i))}}})(),(()=>{const e=AGN.Lib.Dashboard.Def.TileSize;AGN.Lib.Dashboard.TileSwapper=class{constructor(e){this.grid=e}toggle(e){this.grid.$tiles.draggable("option","disabled",!e)}initDragAndDrop(e){this.setDraggable(e),this.setDroppable(e)}setDraggable(e){const t=this;e.$el.draggable({containment:this.grid.$container,opacity:.7,zIndex:1e3,cursor:"move",scroll:!1,appendTo:"body",helper:function(e){const t=$(e.currentTarget);return t.clone(!0).css({animation:"none",width:t.width(),height:t.height()})},start(){$(this).css({opacity:0}),t.switchNotAllowedDroppables($(this),!1)},stop(){$(this).css({opacity:1}),t.switchNotAllowedDroppables($(this),!0)}})}switchNotAllowedDroppables(e,t){this._getNotAllowedDroppablesToSwitch(AGN.Lib.Dashboard.DraggableTile.get(e)).forEach(e=>e.switchDroppable(t))}_getNotAllowedDroppablesToSwitch(e){return e.isRegular?this.grid.tiles.filter(e=>!e.isRegular):e.isTall?[...this.getTilesUnderOrAboveWideTiles(),...this.grid.wideTiles,...this.grid.xWideTiles]:e.isWide?[...this.getTilesLockedByTallTiles(),...this.grid.tallTiles,...this.grid.xWideTiles]:e.isXWide?[...this.grid.tallTiles,...this.grid.xlTiles]:[]}setDroppable(e){const t=this;e.$el.droppable({accept:".draggable-tile",tolerance:"pointer",activeClass:"draggable-accept",over:function(e,i){t.unhighlightAll();const n=AGN.Lib.Dashboard.DraggableTile.get(i.draggable),o=AGN.Lib.Dashboard.DraggableTile.get($(this));t.getReadyToSwapTiles(n,o).forEach(e=>e.toggleHighlight(!0))},drop:async function(e,i){const n=AGN.Lib.Dashboard.DraggableTile.get(i.draggable),o=AGN.Lib.Dashboard.DraggableTile.get($(this));await t.swapTiles(n,o),t.grid.updateTilesPositions()},deactivate:()=>t.unhighlightAll()})}getReadyToSwapTiles(t,i){switch(t.size){case e.TALL:case e.X_LARGE:return this.getTilesHoveredByTallTile(i);case e.WIDE:return this.getTilesHoveredByWideTile(t,i);case e.X_WIDE:return this.getTilesHoveredByExtraWideTile(t,i);default:return[i]}}getTilesHoveredByTallTile(e){const{beginCol:t}=e,i=[this.grid.getTile(0,t)],n=this.grid.getTile(1,t);return i[0].isTall||i.push(n),i}getTilesHoveredByWideTile(e,t){return e.beginRow===t.beginRow?this.getTilesHoveredByWideTileAtSameRow(e,t):this.getTilesHoveredByWideTileAtAnotherRow(e,t)}getTilesHoveredByWideTileAtSameRow(e,t){const{beginCol:i,beginRow:n}=e;return t.beginCol===i-2||t.beginCol===i+3?[t,this.grid.getTile(n,t.beginCol)]:[t]}getTilesHoveredByWideTileAtAnotherRow(e,t){const{beginCol:i,beginRow:n}=t,o=this.grid.getTile(n,i+1),r=this.grid.getTile(n,i-1);return!this.isFirstCol(i)&&r.isRegular?[t,r]:!this.isLastCol(i)&&o.isRegular?[t,o]:[]}getTilesHoveredByExtraWideTile(e,t){return e.beginRow===t.beginRow?[t]:this.getTilesHoveredByExtraWideTileAtAnotherRow(e,t)}getTilesHoveredByExtraWideTileAtAnotherRow(e,t){const{beginCol:i,beginRow:n}=t,o=this.grid.getTile(n,i+1),r=this.grid.getTile(n,i+2),s=this.grid.getTile(n,i-1),a=this.grid.getTile(n,i-2);let l;l=this.isFirstCol(i)?[t,o,r]:this.isLastCol(i)?[a,s,t]:e.position.cols.map(e=>this.grid.getTile(n,e)),l=[...new Set(l)];const c=l.filter(e=>e.isRegular).length,d=l.filter(e=>e.isWide).length;return 3===c||1===c&&1===d?l:[]}unhighlightAll(){this.grid.tiles.forEach(e=>e.toggleHighlight(!1))}async swapTiles(t,i){switch(t.size){case e.TALL:this.moveTallTile(t,i);break;case e.WIDE:this.moveWideTile(t,i);break;case e.X_WIDE:this.moveExtraWideTile(t,i);break;case e.X_LARGE:this.moveXlTile(t,i);break;default:t.swap(i)}}moveTallTile(e,t){const i=e.beginCol,n=t.beginCol,o=this.grid.getTile(0,n),r=this.grid.getTile(1,n),s=this.getPreviousTileOfTallTileBottomPart(i);o.$el.is(s.$el)?(s.$el.after(r.$el),e.swap(o)):(e.swap(o),o.isTall||s.$el.after(r.$el))}getPreviousTileOfTallTileBottomPart(e){return this.isFirstCol(e)?this.grid.getTile(0,this.grid.cols-1):this.grid.getTile(1,e-1).isTall?this.getPreviousTileOfTallTileBottomPart(e-1):this.grid.getTile(1,e-1)}getTilesUnderOrAboveWideTiles(){return[...this.grid.wideTiles,...this.grid.xWideTiles].map(e=>{const t=0===e.beginRow?1:0;return e.position.cols.map(e=>this.grid.getTile(t,e))}).flat()}getTilesLockedByTallTiles(){return this.grid.tiles.filter(e=>e.isRegular&&this.isFirstCol(e.beginCol)&&this.grid.getTile(e.beginRow,1).isTall||this.isLastCol(e.beginCol)&&this.grid.getTile(e.beginRow,this.grid.cols-2).isTall)}moveWideTile(e,t){e.beginRow===t.beginRow?this.moveWideTileAtSameRow(e,t):this.moveWideTileToAnotherRow(e,t)}moveWideTileAtSameRow(e,t){const{beginCol:i,beginRow:n}=e;t.beginCol===i-2?this.grid.getTile(n,i-2).$el.before(e.$el):t.beginCol===i+3?this.grid.getTile(n,i+3).$el.after(e.$el):e.swap(t)}moveWideTileToAnotherRow(e,t){const{beginCol:i,beginRow:n}=t,o=this.grid.getTile(n,i+1),r=this.grid.getTile(n,i-1);!this.isFirstCol(i)&&r.isRegular?this.replaceWideTileWithDroppableAndPrev(e,t,r):!this.isLastCol(i)&&o.isRegular&&this.replaceWideTileWithDroppableAndNext(e,t,o)}replaceWideTileWithDroppableAndNext(e,t,i){e.swap(t),t.$el.after(i.$el)}replaceWideTileWithDroppableAndPrev(e,t,i){e.swap(i),i.$el.after(t.$el)}moveExtraWideTile(e,t){e.beginRow===t.beginRow?e.swap(t):this.moveExtraWideTileToAnotherRow(e,t)}moveExtraWideTileToAnotherRow(e,t){const[i,n,o]=this.getTilesHoveredByExtraWideTile(e,t);i&&e.swap(i),n&&i.$el.after(n.$el),o&&n.$el.after(o.$el)}moveXlTile(e,t){const i=t.beginCol,n=this.grid.getTile(0,i),o=this.grid.getTile(1,i);this.isLastCol(i)?e.$el.before(n.$el):e.$el.after(n.$el),n.isTall||(this.isLastCol(i)?e.$el:n.$el).after(o.$el)}isFirstCol(e){return 0===e}isLastCol(e){return e===this.grid.cols-1}}})(),(()=>{const e=AGN.Lib.Template,t=AGN.Lib.Popover;AGN.Lib.Dashboard.DashboardCalendarLabel=class{static SELECTOR=".dashboard-calendar__label";constructor(e){this.data=e,(this.$day.exists()||this.data.inUnsentList)&&this.create$()}get date(){return this.data.date}get $day(){return this.calendar.$day(this.date)}toggle(e){this.$el.toggle(e)}get text(){return this.$elText.text()}get $elText(){return this.$el.find("span:nth-child(2) span")}create$(){return this.$el=e.dom(this.templateName,this.templateParams),this.attachToCalendar(),this.createPopover(),this.$el.data("label",this),this.draggable&&this.initDragging(),AGN.Lib.CoreInitializer.run("tooltip",this.$el),this.$el}attachToCalendar(){this.data.inUnsentList?this.attachToUnsentMailings():this.attachToDay()}attachToDay(){this.calendar.$dayBody(this.$day).append(this.$el)}attachToUnsentMailings(){this.calendar.$unsentList.append(this.$el),AGN.Lib.CoreInitializer.run(["tooltip","scrollable"],this.calendar.$unsentList)}get calendar(){return $("#dashboard-calendar").data("calendar")}get draggable(){return!0}get templateParams(){return{labelId:this.labelId}}get labelId(){return`dashboard-calendar-${this.type}-${this.entityId}`}get entityId(){throw new Error("entityId() must be implemented in extended class")}get templateName(){return`dashboard-calendar-${this.type}-label`}get type(){return this.constructor.TYPE}get popoverOptions(){throw new Error("popoverOptions() must be implemented in extended class")}initDragging(){this.$el.draggable({cursor:"move",containment:$("#dashboard-calendar > .tile-body"),distance:10,appendTo:"body",zIndex:2,start:()=>this.onDragStart(),stop:()=>this.onDragStop(),helper:function(e){const t=$(e.currentTarget);return t.clone(!0).css({width:t.width(),height:t.height()})},revert:e=>e&&this.canMoveTo(e)?(this.moveTo(e).always(()=>this.$el.css("opacity",1)),!1):(this.$el.css("opacity",1),!0)})}createPopover(){t.remove(this.$elText),t.create(this.$elText,this.popoverOptions)}onDragStart(){this.$el.css("opacity",.5),this.#ri(),this.#si()}onDragStop(){this.#ai()}#ri(){this.calendar.labels.forEach(e=>e.popover?.disable())}#ai(){this.calendar.labels.forEach(e=>e.popover?.enable())}#si(){let e;document.selection&&document.selection.empty?document.selection.empty():window.getSelection&&(e=window.getSelection(),e&&e.removeAllRanges&&e.removeAllRanges())}canMoveTo(e){return!e.is(this.$day)}moveTo(e){const t=$.Deferred(),i=this.calendar.getLastLabelOfType(e,this.type);return i?.length?i.$el.after(this.$el):this.calendar.$dayBody(e).append(this.$el),t.resolve(),t.promise()}remove(){this.$el.remove()}static get(e){return e.data("label")}static getByEntityId(e,t){return $(`#dashboard-calendar #dashboard-calendar-${t}-${e}`).data("label")}}})(),(()=>{const e=AGN.Lib.Modal,t=AGN.Lib.Form,i=AGN.Lib.Dashboard.Def,n=AGN.Lib.Dashboard.DashboardCalendarLabel;class o extends n{static TYPE="comment";static SELECTOR=n.SELECTOR+"--comment";constructor(e){_.isNumber(e.date)&&(e.date=moment(e.date).tz(window.agnTimeZoneId).format(i.DATE_FORMAT)),_.isNumber(e.plannedSendDate)&&(e.plannedSendDate=moment(e.plannedSendDate).tz(window.agnTimeZoneId).format(`${window.adminDateFormat.toUpperCase()} ${i.TIME_FORMAT}`)),super(e)}attachToDay(){this.calendar.$dayBody(this.$day).prepend(this.$el)}get templateParams(){return _.merge(super.templateParams,{comment:this.data.comment})}get entityId(){return this.data.commentId}get form(){return t.get($("#calendar-comment-form"))}get saveUrl(){return AGN.url("/calendar/saveComment.action")}createPopover(){}moveTo(e){return this.data.date=e.data("date"),$.post(this.saveUrl,this.data).done(t=>{t.commentId&&this.calendar.$dayBody(e).prepend(this.$el)})}remove(){$.post(AGN.url("/calendar/removeComment.action"),{commentId:this.entityId}).done(()=>super.remove())}updateComment(e){this.data=e,this.$elText.text(this.data.comment),this.createPopover()}showModal(){o.showModal(this.data)}static showModal(t){(t=_.extend(o.createNewEmptyComment(t.date),t)).comment=t.comment?.replace(/<br>/gi,"\n"),t.recipients||(t.recipients=[]),t.recipients=(Array.isArray(t.recipients)?t.recipients:t.recipients.split(",")).map(e=>e.trim()).filter(e=>""!==e),t.isCustomRecipients=!!t.recipients.length,t.sendReminder=!!t.deadline,e.fromTemplate("calendar-comment-modal",t)}static createNewEmptyComment(e){return{commentId:0,comment:"",recipients:[],deadline:!1,plannedSendDate:moment(e,i.DATE_FORMAT).format(window.adminDateFormat.toUpperCase())+" 08:00"}}static getOrCreate(e){const t=n.getByEntityId(e.commentId,o.TYPE);return t||new o(e)}}AGN.Lib.Dashboard.DashboardCalendarCommentLabel=o})(),(()=>{const e=AGN.Lib.Dashboard.DashboardCalendarLabel,t=AGN.Lib.Dashboard.Def;class i extends e{static TYPE="mailing";constructor(e,t){super(e),this.limit=t}get templateParams(){return _.merge(super.templateParams,{link:this.data.link,mediatype:"mailing.mediatype."+this.data.mediatype?.toLowerCase(),status:this.data.status,shortname:this.data.shortname})}get draggable(){return!(this.data.inUnsentList&&this.data.planned)&&!0==!this.data.isSent}get date(){return this.data.sendDate}set date(e){return this.data.sendDate=e}get entityId(){return this.data.id}createPopover(){this.data.$el=this.$el,this.popover=new AGN.Lib.Dashboard.MailingPopover(this.data,!0)}canMoveTo(e){if(!super.canMoveTo(e))return!1;if(e.is(this.calendar.$unsentList))return!this.$el.closest("#dashboard-calendar-unsent-tile").exists()&&"mailing.status.scheduled"!==this.data.status;const i=e.data("date");return moment(i+this.data.sendTime,t.DATE_TIME_FORMAT).toDate()>=new Date}moveTo(e){return e.is(this.calendar.$unsentList)?this.moveToUnplannedList():this.moveToDay(e)}moveToDay(e){const t=e.data("date");return $.post(AGN.url("/calendar/moveMailing.action"),{mailingId:this.entityId,date:t}).done(i=>{!0===i.success&&(this.insertLabelInDay(e),this.date=t)})}moveToUnplannedList(){return $.post(AGN.url(`/calendar/mailing/${this.entityId}/clearPlannedDate.action`)).done(e=>{e&&(this.date="",this.calendar.$unsentList.append(this.$el))})}insertLabelInDay(e){const n=e.data("date");let o=this.data.time;const r=moment(n+o,t.DATE_TIME_FORMAT).toDate(),s=new Date(r);s.setHours(s.getHours()-3),s<new Date&&(o=null,this.data.time=null);let a=!1;o&&this.calendar.getLabelsByType(e,i.TYPE).reverse().map(e=>e.data.time<o).forEach(e=>{e.$el.after(this.$el),a=!0}),a||super.moveTo(e)}static getOrCreate(t){const n=e.getByEntityId(t.id,i.TYPE);return n&&!n.data.planned?n:new i(t)}}AGN.Lib.Dashboard.DashboardCalendarMailingLabel=i})(),(()=>{const e=AGN.Lib.Dashboard.DashboardCalendarLabel,t=AGN.Lib.Dashboard.Def;class i extends e{static TYPE="auto-opt";constructor(e){_.isNumber(e.sendDate)&&(e.sendDate=moment(e.sendDate).tz(window.agnTimeZoneId).format(t.DATE_FORMAT)),super(e)}get templateParams(){return _.merge(super.templateParams,{link:this.link,mediatype:"mailing.mediatype.email",status:"mailing.status."+this.adaptStatusForIcon(this.data.autoOptimizationStatus),tooltip:"mailing.status."+this.adaptStatusForTooltip(this.data.autoOptimizationStatus),shortname:this.data.shortname})}get draggable(){return!1}get link(){return this.data.workflowId?AGN.url("workflow/"+this.data.workflowId+"/view.action"):"#"}adaptStatusForIcon(e){switch(e){case"NOT_STARTED":return"new";case"TEST_SEND":return"ao_test_send";case"EVAL_IN_PROGRESS":return"in-generation";case"FINISHED":return"sent";default:return e.toLowerCase()}}adaptStatusForTooltip(e){switch(e){case"NOT_STARTED":return"new";case"TEST_SEND":return"test";case"EVAL_IN_PROGRESS":return"inGeneration";case"FINISHED":return"sent";default:return e.toLowerCase()}}get date(){return this.data.sendDate}get entityId(){return this.data.id}get popoverOptions(){return{trigger:"hover",text:this.data.shortname}}static getOrCreate(t){const n=e.getByEntityId(t.id,i.TYPE);return n||new i(t)}}AGN.Lib.Dashboard.DashboardCalendarAutoOptLabel=i})(),(()=>{const e=AGN.Lib.Dashboard.DashboardCalendarLabel,t=AGN.Lib.Dashboard.Def;class i extends e{static TYPE="push";constructor(e){_.isNumber(e.date)&&(e.date=moment(e.date).tz(window.agnTimeZoneId).format(t.DATE_FORMAT)),super(e)}get pushStatusSent(){return this.calendar.config.pushStatusSent}get pushStatusScheduled(){return this.calendar.config.pushStatusScheduled}get draggable(){return this.data.status!==this.pushStatusSent}get templateParams(){return _.merge(super.templateParams,{link:AGN.url(`/push/${this.entityId}/view.action`),mediatype:"status.push",status:"mailing.status."+this.data.status.toLowerCase(),shortname:this.data.name})}get entityId(){return this.data.id}get popoverOptions(){return{trigger:"hover",text:this.data.name}}canMoveTo(e){if(!super.canMoveTo(e))return!1;const i=e.data("date");switch(this.data.status){case this.pushStatusSent:return!1;case this.pushStatusScheduled:return moment(i,t.DATE_FORMAT).toDate()>=new Date;default:return!0}}moveTo(e){const t=e.data("date");return $.post(AGN.url("/calendar/movePush.action"),{pushId:this.entityId,date:t}).done(i=>{!0===i.success&&(super.moveTo(e),this.sendDate=t)})}static getOrCreate(t){const n=e.getByEntityId(t.id,i.TYPE);return n||new i(t)}}AGN.Lib.Dashboard.DashboardCalendarPushLabel=i})(),(()=>{const e=AGN.url("/mailing/:mailingId:/settings.action"),t=AGN.url("/statistics/mailing/:mailingId:/view.action?init=true");class i{constructor(e,t){this.$el=e,this.config=t,this.firstDayOfWeek=t.firstDayOfWeek,this.statisticsViewAllowed=t.statisticsViewAllowed,this.$el.data("calendar",this)}get $year(){}get $month(){}get removeCurrentCalendar(){throw this.notImplementedError("removeCurrentCalendar()")}isToday(e){return moment(e).isSame(moment(),"day")}showMonth(e,t){this.removeCurrentCalendar();const i=this.daysInMonth(e+1,t);let n=new Date(t,e,1),o=n.getDay()-this.firstDayOfWeek;o<0&&(o=7+o);const r=Math.ceil((i+o)/7),s=new Date(t,e,1-o),a=new Date(t,e,1+7*r);n=new Date(s);for(let t=0;t<r;t++){const i="row-"+(t+1);this.addWeekNumber(n,i);for(let t=0;t<7;t++){const t=n.getMonth()!==e;this.addDay(n,t,i),n.setDate(n.getDate()+1)}}const l=this.dateToServiceFormat(s),c=this.dateToServiceFormat(a);this.fillCalendar(l,c),this.synchronizeMonthsList(e,t)}addWeekNumber(){throw this.notImplementedError("addWeekNumber()")}addDay(){throw this.notImplementedError("addDay()")}fillCalendar(){throw this.notImplementedError("fillCalendar()")}notImplementedError(e){return new Error(`${e} must be implemented in extended class`)}getMailingLink(i){return"mailing.status.sent"===i.status&&"mailing.status.test"!==i.status&&this.statisticsViewAllowed?t.replace(":mailingId:",i.id):e.replace(":mailingId:",i.id)}addYearOption(){const e=$("#month_list_year"),t=parseInt(e.find("option:last").val(),10)+1;e.append($("<option></option>").val(t).text(t))}lastYearSelected(){return $("#month_list_year option:selected").index()===$("#month_list_year option").length-1}daysInMonth(e,t){return new Date(t,e,0).getDate()}synchronizeMonthsList(e,t){this.$year[0].selectedIndex=this.$year.find(`option[value=${t}]`)[0].index,this.$month[0].selectedIndex=this.$month.find(`option[value=${e}]`)[0].index,AGN.runAll(this.$year),AGN.runAll(this.$month)}static pad(e,t){let i=e+"";for(;i.length<t;)i="0"+i;return i}dateToServiceFormat(e){return i.pad(e.getDate(),2)+"-"+i.pad(e.getMonth()+1,2)+"-"+e.getFullYear()}getWeek(e){var t=new Date(e.valueOf()),i=t.getFullYear(),n=t.getMonth(),o=t.getDate();0===this.firstDayOfWeek&&(o+=1),n+=1;var r=Math.floor((14-n)/12),s=i+4800-r,a=n+12*r-3,l=o+Math.floor((153*a+2)/5)+365*s+Math.floor(s/4)-Math.floor(s/100)+Math.floor(s/400)-32045,c=(l+31741-l%7)%146097%36524%1461,d=Math.floor(c/1460),u=(c-d)%365+d;return Math.floor(u/7)+1}}AGN.Lib.Dashboard.CalendarBase=i})(),(()=>{const e=AGN.Lib.DateFormat,t=AGN.Lib.Template,i=AGN.Lib.Dashboard.CalendarBase,n=AGN.Lib.Dashboard.Def,o=AGN.url("/calendar/light/mailings.action"),r=AGN.url("/calendar/mailingsPopoverInfo.action");AGN.Lib.Dashboard.CalendarLight=class extends i{constructor(e,t){super(e,t),this.$el=e,this.firstDayOfWeek=t.firstDayOfWeek,this.statisticsViewAllowed=t.statisticsViewAllowed,this.#_t()}get $month(){return $("#month_list")}get $year(){return $("#month_list_year")}#_t(){const e=new Date;this.#li(),this.showMonth(e.getMonth(),e.getFullYear()),this.$el.on("change","#month_list, #month_list_year",this.switchMonth.bind(this))}#li(){AGN.Lib.DateFormat.getLocalizedShortWeekdays(window.adminLocale,this.firstDayOfWeek).forEach(e=>{$("#calendar-header").append(`<td><div class="calendar-cell">${e}</div></td>`)})}addWeekNumber(e,t){const i=this.getWeek(e);$("#calendar-container").append(`<tr id="${t}"><td><div class="calendar-cell">${i}</div></td></tr>`)}addDay(e,t,i){const n=!t&&this.isToday(e),o=this.dateToServiceFormat(new Date(e.getFullYear(),e.getMonth(),e.getDate())),r="day-"+o;$("#"+i).append(`<td id="${r}"></td>`),$("#"+r).append(`<div class="calendar-cell calendar-day ${n?"calendar-day--today":""} ${t?"calendar-day--alien":""}" id="label-${r}" data-date="${o}">${e.getDate().toString().padStart(2,"0")}</div>`)}fillCalendar(e,t){$.get(o,{start:e,end:t}).done(e=>this.assignMailingsToCalendarDays(e))}removeCurrentCalendar(){$("#calendar-container tr:not(:first)").remove()}assignMailingsToCalendarDays(e){e.forEach(e=>{const t=moment(e.sendDate).tz(window.agnTimeZoneId);e.sendDate=t.format(n.DATE_FORMAT),e.sendTime=t.format(n.TIME_FORMAT),e.link=this.getMailingLink(e)});const t=_.groupBy(e,"sendDate");this.makeDaysSelectable(t),this.makeCurrentDayActive(t)}makeCurrentDayActive(e){const t=this.dateToServiceFormat(new Date);this.changeSelectedDay(t,e[t])}makeDaysSelectable(e){_.forEach($(".calendar-day"),t=>{const i=$(t),n=i.data("date"),o=e[n];_.isEmpty(o)||$("#label-day-"+n).addClass("calendar-day--selectable"),i.off("click").on("click",()=>this.changeSelectedDay(n,_.sortBy(o,"sendTime")))})}changeSelectedDay(i,n){$("#calendar-container").find(".calendar-day--selected").removeClass("calendar-day--selected"),$("#label-day-"+i).addClass("calendar-day--selected");const o=e.parseFormat(i,"dd-MM-yy"),r=o.toLocaleString(window.adminLocale,{weekday:"long"});i=AGN.Lib.DateFormat.format(o,window.adminDateFormat),$("#calendar-tile-day-mailings").html(t.dom("dashboard-schedule-day",{dayOfWeek:r,dateStr:i,dayMailings:n})),this.createPopovers(n)}createPopovers(e){if(!e?.length)return;const t=e.map(e=>e.id).join(",");$.get(r,{mailingIds:t}).done(e=>e.map(e=>({...e,$el:$(`.schedule__day-mailing[data-mailing-id="${e.mailingId}"]`)})).forEach(e=>new AGN.Lib.Dashboard.MailingPopover({...e,isSent:e.sentCount},!1)))}switchMonth(){const e=parseInt($("#month_list option:selected").val()),t=parseInt($("#month_list_year option:selected").val());this.removeCurrentCalendar(),this.showMonth(e,t),this.lastYearSelected()&&this.addYearOption()}}})(),(()=>{const e=new Intl.DateTimeFormat(window.adminLocale,{month:"long"}),i=new Intl.DateTimeFormat(window.adminLocale,{month:"short"}),n=new Intl.DateTimeFormat(window.adminLocale,{month:"long",year:"numeric"});AGN.Lib.Dashboard.DashboardCalendarPeriodPicker=class{constructor(e){this.calendar=e,this.initActions()}jumpToDate(e){this.#ci(e.getFullYear()),this.#di(),this.#ui(e.getFullYear()),this.$findYear(e.getFullYear()).prop("checked",!0),this.$findMonth(e.getMonth()).prop("checked",!0),this.$findWeek(this.calendar.getWeek(e)).prop("checked",!0),this.updateCalendarTitle(),this.calendar.isWeekMode?this.showWeeks():this.showMonths()}initActions(){this.$pickerTitleBtn.on("click",()=>this.widerPeriod()),this.$arrowUp.on("click",()=>this.prev()),this.$arrowDown.on("click",()=>this.next()),$("#period-picker").on("click",()=>this.#hi())}widerPeriod(){this.$monthsBox.is(":visible")&&this.showYears(),this.$weeksBox.is(":visible")&&this.showMonths()}selectYear(){this.$months.prop("checked",!1),this.#ui(this.year),this.showMonths()}selectMonth(){this.calendar.isWeekMode?this.showWeeks():(this.dropdown.hide(),this.calendar.flip())}selectWeek(){this.dropdown.hide(),this.calendar.flip(moment().locale(window.adminLocale).isoWeekYear(this.year).isoWeek(this.week).startOf("isoWeek").toDate())}showYears(){this.$yearsBox.show(),this.$monthsBox.hide(),this.$weeksBox.hide(),this.$pickerTitleBtn.text(`${this.$years.first().val()}-${this.$years.last().val()}`)}showMonths(){this.$yearsBox.hide(),this.$monthsBox.show(),this.$weeksBox.hide(),this.$pickerTitleBtn.text(this.year)}showWeeks(){this.$yearsBox.hide(),this.$monthsBox.hide(),this.$weeksBox.show(),this.$pickerTitleBtn.text(e.format(new Date(this.year,this.month))),this.$weeks.map((e,t)=>$(t).next("label")).each((e,t)=>$(t).hide().find("span:not(:first)").removeClass("alien")),this.$getMonthWeeks(this.year,this.month).forEach(e=>{$(e).next("label").show(),$(e).find("+ label span:not(:first)").each((e,t)=>{$(t).toggleClass("alien",parseInt($(t).data("month"))!==this.month)})})}$getMonthWeeks(e,t){const i=new Set,n=moment().year(e).month(t).daysInMonth();for(let o=1;o<=n;o++){const n=this.calendar.getWeek(new Date(e,t,o));11===t&&1===n||0===t&&n>50||i.add(n)}return[...i].map(e=>this.$findWeek(e))}updateCalendarTitle(){this.calendar.$el.find(".tile-title > span").text(this.calendar.isWeekMode?this.#pi(this.year,this.week):n.format(new Date(this.year,this.month)))}#gi(e){return this.#fi("year",e,e)}#mi(e){return this.#fi("month",e,i.format(new Date(2025,e)))}#vi(e,t){return this.#fi("week",e,t)}#fi(e,t,i){return`\n        <input type="radio" class="btn-check" name="${e}" value="${t}" id="${e}-${t}" autocomplete="off">\n        <label class="btn" for="${e}-${t}">${i}</label>`}get dropdown(){return bootstrap.Dropdown.getInstance($("#period-picker .dropdown-toggle"))}get year(){return parseInt(this.$yearsBox.find("input:checked").val())}get month(){return parseInt(this.$monthsBox.find("input:checked").val())}get week(){return parseInt(this.$weeksBox.find("input:checked").val())}get $yearsBox(){return this.$tile.find(".period-picker__years")}get $monthsBox(){return this.$tile.find(".period-picker__months")}get $weeksBox(){return this.$tile.find(".period-picker__weeks")}get $years(){return this.$yearsBox.find("input")}get $months(){return this.$monthsBox.find("input")}get $weeks(){return this.$weeksBox.find("input")}get $tile(){return $(".tile--period-picker")}get $pickerTitleBtn(){return this.$tile.find(".period-picker__title-btn")}get $arrowUp(){return this.$tile.find(".icon-caret-up")}get $arrowDown(){return this.$tile.find(".icon-caret-down")}next(){this.#kt(!0)}prev(){this.#kt(!1)}#kt(e){this.$yearsBox.is(":visible")&&this.#bi(e),this.$monthsBox.is(":visible")&&this.#yi(e),this.$weeksBox.is(":visible")&&this.#wi(e)}#bi(e){this.#ci(parseInt(this.$years.first().val())+(e?12:-12)),this.$pickerTitleBtn.text(`${this.$years.first().val()}-${this.$years.last().val()}`),this.$years.prop("checked",!1)}#yi(e){const t=this.year+(e?1:-1);let i=this.$findYear(t);i.length||(this.#ci(e?t:this.year-12),i=this.$findYear(t)),i.prop("checked",!0),this.selectYear()}#wi(e){this.$findMonth(this.month+(e?1:-1)).prop("checked",!0),this.selectMonth()}$findYear(e){return this.$yearsBox.find(`[value="${e}"]`)}$findMonth(e){return this.$monthsBox.find(`[value="${e}"]`)}$findWeek(e){return this.$weeksBox.find(`[value="${e}"]`)}#pi(e,i){const n=moment().locale(window.adminLocale).isoWeekYear(e).isoWeek(i).startOf("isoWeek"),o=moment(n).endOf("isoWeek"),r={year:"numeric",month:"2-digit",day:"2-digit"},s=new Intl.DateTimeFormat(window.adminLocale,r).format(n.toDate()),a=new Intl.DateTimeFormat(window.adminLocale,r).format(o.toDate()),l=n.isoWeekYear();return`${s} - ${a} (${t("workflow.defaults.week")} ${i.toString().padStart(2,"0")}, ${l})`}#ci(e){e=Math.max(Math.min(e,this.calendar.today.getFullYear()),this.calendar.config.minYear),this.$yearsBox.empty();for(let t=e;t<e+12;t++)this.$yearsBox.append(this.#gi(t));this.$years.on("click",()=>this.selectYear())}#di(){this.$monthsBox.empty(),Array.from({length:12},(e,t)=>this.$monthsBox.append(this.#mi(t))),this.$months.on("click",()=>this.selectMonth())}#ui(e){this.$weeksBox.empty();const t=new Date(e,0,1-new Date(e,0,1).getDay()+this.calendar.firstDayOfWeek);1!==this.calendar.getWeek(t)&&t.setTime(t.getTime()+6048e5);do{let e=this.calendar.getWeek(t);const i=$(`<div value="${e}">`);i.append($("<span>").text(e));for(let e=0;e<7;e++)i.append($(`<span data-month="${t.getMonth()}">${t.getDate()}</span>`)),t.setDate(t.getDate()+1);this.$weeksBox.append(this.#vi(e,i.html()))}while(1!==this.calendar.getWeek(t)&&t.getFullYear()===e);this.$weeks.on("click",()=>this.selectWeek())}#hi(){this.$arrowDown.toggle(this.#Ci()),this.$arrowUp.toggle(this.#_i())}#Ci(){return this.$yearsBox.is(":visible")?parseInt(this.$years.last().val())<this.calendar.today.getFullYear()+11:this.$monthsBox.is(":visible")?this.year<this.calendar.today.getFullYear()+11:!!this.$weeksBox.is(":visible")&&this.month<11}#_i(){return this.$yearsBox.is(":visible")?parseInt(this.$years.first().val())>this.calendar.config.minYear:this.$monthsBox.is(":visible")?this.year>this.calendar.config.minYear:!!this.$weeksBox.is(":visible")&&this.month>0}}})(),(()=>{const e=AGN.Lib.Form,t=AGN.Lib.Modal,i=AGN.Lib.Storage,n=AGN.Lib.Dashboard.DashboardCalendarLabel,o=AGN.Lib.Dashboard.DashboardCalendarCommentLabel;AGN.Lib.Dashboard.DashboardCalendarCommentsManager=class{constructor(e){this.calendar=e,$("#toggle-calendar-comments").prop("checked",this.isCommentsShown)}get isCommentsShown(){return i.get("dashboard.calendar.comments")}set isCommentsShown(e){return i.set("dashboard.calendar.comments",e)}toggle(e){if(this.calendar.$grid.find(o.SELECTOR).toggle(e),e&&!this.calendar.commentsLoaded){const e=$(`${this.calendar.daySelector}:first`).data("date"),t=$(`${this.calendar.daySelector}:last`).data("date");this.#Si(e,t)}this.isCommentsShown=e}create(e){o.showModal({date:e})}save(i){const r=e.get($("#calendar-comment-form"));if(!r.validate())return;const s=r.data();$.post(AGN.url("/calendar/saveComment.action"),s).done(e=>{e.commentId?(i?n.getByEntityId(i,o.TYPE).updateComment(s):(s.commentId=e.commentId,o.getOrCreate(s).$el.toggle(this.isCommentsShown)),t.getInstance(r.$form).hide()):AGN.Lib.Page.render(e)})}remove(e){n.getByEntityId(e,o.TYPE).remove()}#Si(e,t){$.get(AGN.url("/calendar/comments.action"),{start:e,end:t}).done(e=>_.each(e,e=>o.getOrCreate(e)))}}})(),(()=>{const e=AGN.Lib.Template,t=AGN.Lib.Storage,i=AGN.Lib.Dashboard.DashboardCalendarLabel,n=AGN.Lib.Dashboard.DashboardCalendarCommentLabel,o=AGN.Lib.Dashboard.DashboardCalendarMailingLabel,r=AGN.Lib.Dashboard.DashboardCalendarAutoOptLabel,s=AGN.Lib.Dashboard.DashboardCalendarPushLabel,a=AGN.Lib.Dashboard.CalendarBase,l=AGN.Lib.Dashboard.Def,c=6048e5;class d extends a{static DAY_CLASS="dashboard-calendar-day";static MODE_STORAGE_KEY="dashboard.calendar.mode";static SCROLL_STORAGE_KEY="dashboard.calendar.scroll";constructor(e,t){super(e,t),this.today=new Date,this.dayMailingsLimit=t.showALlMailingsPerDay?-1:6,this.commentsManager=new AGN.Lib.Dashboard.DashboardCalendarCommentsManager(this),this.periodPicker=new AGN.Lib.Dashboard.DashboardCalendarPeriodPicker(this),this.#xi(),this.flip(this.today),this.$grid.css("background-color","var(--xl-calendar-cell-border-color)")}get daySelector(){return`.${d.DAY_CLASS}`}get $days(){return $(this.daySelector)}get $grid(){return $("#dashboard-calendar-grid")}get isScrollShown(){return t.get(d.SCROLL_STORAGE_KEY)}set isScrollShown(e){return t.set(d.SCROLL_STORAGE_KEY,e)}get isWeekMode(){return"week"===t.get(d.MODE_STORAGE_KEY)}set mode(e){return t.set(d.MODE_STORAGE_KEY,e)}get selectedDate(){const e=new Date(this.periodPicker.year,this.periodPicker.month);return e.getMonth()===this.today.getMonth()&&e.getFullYear()===this.today.getFullYear()?this.today:e}get $unsentList(){return $("#dashboard-calendar-unsent-tile").find(".tile-body")}get labels(){return this.$el.find(i.SELECTOR).map((e,t)=>i.get($(t))).toArray()}#xi(){$('[data-action="switch-mode"]').prop("checked",this.isWeekMode).parent().show(),$("#toggle-calendar-scroll").prop("checked",this.isScrollShown)}$day(e){return this.$grid.find(`${this.daySelector}[data-date="${e}"]`)}removeCurrentCalendar(){this.$grid.empty()}showWeek(e,t,i){this.removeCurrentCalendar();const n=new Date(i,t,e);n.setDate(e-n.getDay()-1+this.firstDayOfWeek);const o=new Date(n.getFullYear(),n.getMonth(),n.getDate());o.setDate(o.getDate()+1),0===t&&1===e&&1!==this.getWeek(o)&&(o.setTime(o.getTime()+c),n.setTime(n.getTime()+c));for(let e=0;e<7;e++)n.setDate(n.getDate()+1),this.addDay(n,!1);this.fillCalendar(this.dateToServiceFormat(o),this.dateToServiceFormat(n))}addWeekNumber(e){}addDay(t,i){const n=this.dateToServiceFormat(new Date(t.getFullYear(),t.getMonth(),t.getDate())),o=e.dom("dashboard-calendar-day",{day:t.getDate(),date:n});o.find(".dashboard-calendar-day").toggleClass(`${d.DAY_CLASS}--today`,this.isToday(t)).toggleClass(`${d.DAY_CLASS}--alien`,i),this.$grid.append(o),!this.isWeekMode&&o.is(":nth-child(7n+1)")&&o.append(`<div class="dashboard-calendar__week-number">${this.getWeek(t)}</div>`)}fillCalendar(e,t){this.#Ai(e,t),this.toggleScroll(this.isScrollShown),this.$days.droppable({accept:i.SELECTOR})}#Ai(e,t){const i=this.dayMailingsLimit,o=this.commentsManager.isCommentsShown;$.get(AGN.url("/calendar/labels.action"),{start:e,end:t,dayMailingsLimit:i,loadComments:o}).done(e=>{_.each(e.optimizations,e=>r.getOrCreate(e)),_.each(e.pushes,e=>s.getOrCreate(e)),_.each(e.mailings,e=>this.addMailingLabel(e,i)),_.each(e.comments,e=>n.getOrCreate(e)),this.commentsLoaded=o,AGN.Lib.CoreInitializer.run("truncated-text-popover",this.$grid)})}flip(e=this.selectedDate){this.isWeekMode?this.showWeek(e.getDate(),e.getMonth(),e.getFullYear()):this.showMonth(e.getMonth(),e.getFullYear()),this.periodPicker.jumpToDate(e)}toggleMode(e){this.mode=e?"week":"month",this.flip()}synchronizeMonthsList(e,t){}jumpToToday(){this.flip(this.today)}dropLabel(e,t){const n=t.draggable;i.get(n).drop($(this))}initUnsentList(e,t){t||this.$unsentList.droppable({accept:'[id^="dashboard-calendar-mailing-"]'}),e.map(e=>this.asUnsentMailingData(e,t)).forEach(e=>new o(e))}asUnsentMailingData(e,t){return{...e,link:AGN.url(`/mailing/${e.id}/settings.action`),mediatype:e.mediatype?.toLowerCase(),labelId:`dashboard-calendar-unsent-${e.id}`,inUnsentList:!0,planned:t,sent:!1,sendTime:!1}}showMoreMailings(e){const t=e.closest(this.daySelector).data("date");this.getMailings(t,t,-1),e.remove()}getMailings(e,t,i){$.get(AGN.url("/calendar/mailings.action"),{start:e,end:t,dayMailingsLimit:i}).done(e=>_.each(e,e=>this.addMailingLabel(e,i)))}$dayBody(e){return e.find(`${this.daySelector}__body`)}addMailingLabel(t,i){const n=moment(t.sendDate).tz(window.agnTimeZoneId);t.sendDate=n.format(l.DATE_FORMAT),t.sendTime=n.format(l.TIME_FORMAT);const r=this.$day(t.sendDate);i>0&&r.find('[id^="dashboard-calendar-mailing-"]').length>=i-1?r.find('[data-action="show-more-mailings"]').exists()||this.$dayBody(r).append(e.text("dashboard-calendar-show-more-btn")):(t.link=this.getMailingLink(t),o.getOrCreate(t))}toggleScroll(e){this.$days.map((e,t)=>this.$dayBody($(t))).each((t,i)=>{$(i).toggleClass("js-scrollable",!e),e&&AGN.Lib.Scrollbar.get($(i),!1)?.destroy()}),e||AGN.Lib.Scrollbar.get(this.$grid,!1)?.destroy(),AGN.Lib.CoreInitializer.run(["scrollable","tooltip"],$("#dashboard-calendar-table")),this.isScrollShown=e}search(e){this.labels.forEach(t=>t.toggle(t.text?.toLowerCase().includes(e)))}getLabelsByType(e,t){return e.find(i.SELECTOR).map(e=>i.get($(e))).filter(e=>e.type===t)}getLastLabelOfType(e,t){return this.getLabelsByType(e,t).slice(-1)[0]}}AGN.Lib.Dashboard.DashboardCalendar=d})(),(()=>{const e=AGN.Lib.Field;function i(e){var t=encodeURI(e);if(-1!=t.indexOf("%")){var i=t.split("%").length-1;0==i&&i++,i+=t.length-3*i}else i=t.length;return i}AGN.Lib.Validator.new("calendar-comment",{valid:function(e,t){return!this.errors(e,t).length},errors:function(){const n=function(){const e=[],n=$("#comment-text"),o=n.val();_.isEmpty(_.trim(o))&&e.push({field:n,msg:t("calendar.error.empty_comment")});i(o)>1e3&&e.push({field:n,msg:t("calendar.error.long_comment")});return e}();return"true"===$('[name="isCustomRecipients"]').val()&&n.push(...function(){const e=[],n=$('[name="recipients"]'),o=n.val().filter(e=>""!==e?.trim());o?.length||e.push({field:n,msg:t("calendar.error.empty_recipient_list")});i(o.join(","))>2e3&&e.push({field:n,msg:t("calendar.error.long_recipient_list")});return _.each(o,i=>{AGN.Lib.Helpers.isValidEmail(i)||e.push({field:n,msg:t("calendar.error.invalid_email")+" "+i})}),e}()),$('[name="deadline"]').is(":checked")&&n.push(...function(){const i=$("#remind-date");return e.create(i).dateValue<new Date?[{field:i,msg:t("calendar.error.reminderInPast")}]:[]}()),n}})})(),(()=>{const e=AGN.Lib.Dashboard.Def.TileSize;class i{constructor(t){if(new.target===i)throw new TypeError("Cannot construct Abstract Tile instances directly!");this._controller=t,this.variants=[e.REGULAR],this.size=this.variants[0]}displayIn(e){e?.is(".draggable-tile")?e.replaceWith(this.$el):e.append(this.$el),this.afterTileAdded()}afterTileAdded(){this._$el.data("tile",this),this.$el.trigger("agn:grid-modified",[this]),AGN.runAll(this.$el)}insertAfter(e){e.$el.after(this.$el),this.afterTileAdded()}insertBefore(e){e.$el.before(this.$el),this.afterTileAdded()}remove(){const e=this.$container;this.$el.remove(),e.trigger("agn:grid-modified")}switchDroppable(e){this.$el.droppable("option","disabled",!e)}swap(e){const t=$("<span>").hide();this.$el.before(t),e.$el.before(this.$el),t.replaceWith(e.$el)}get $container(){return this.$el.parent()}get id(){return this.constructor.ID}get name(){return t(`dashboard.tile.${this.id}`)}thumbnail(){return AGN.url(`/assets/core/images/dashboard/dashboard-tile-sprite.svg#${this.id}`)}allowed(){return AGN.Lib.Template.exists(this.templateName)}get $el(){return this._$el||(this._$el=AGN.Lib.Template.dom(this.templateName,this.templateOptions)),this._$el}get templateOptions(){return{tileName:this.name,tileSize:this.size.name,overlay:this.getOverlay()}}set $el(e){this._$el=e}get position(){return this._position?this._position:{rows:[],cols:[]}}set position(e){this._position=e}get beginCol(){return this.position.cols[0]}get beginRow(){return this.position.rows[0]}get endCol(){return this.position.cols[1]}get endRow(){return this.position.rows[1]}get isEmpty(){return this.id===AGN.Lib.Dashboard.EmptyTile.ID}get isRegular(){return this.size===e.REGULAR}get isTall(){return this.size===e.TALL}get isXl(){return this.size===e.X_LARGE}get isWide(){return this.size===e.WIDE}get isXWide(){return this.size===e.X_WIDE}get templateName(){return`dashboard-tile-${this.id}`}get shown(){return this._$el?.is(":visible")}toggleHighlight(e){this.$el.toggleClass("draggable-accept--hovered",e)}getOverlay(){return AGN.Lib.Template.text("dashboard-tile-overlay")}static get(e){return e.data("tile")}}AGN.Lib.Dashboard.DraggableTile=i})(),(()=>{class e extends AGN.Lib.Dashboard.DraggableTile{static FETCHED_DATA_CACHE=new AGN.Lib.InMemoryCache;constructor(){if(new.target===e)throw new TypeError("Cannot construct Abstract BaseMailingStatisticsTile instances directly!");super(),this.needsRedrawOnMobile()&&(this._isMobileView=!1,this.#Ei()),this._chart=null,this._chartData={names:[],values:[],mailingId:0}}#Ei(){$(window).on("displayTypeChanged",(e,t)=>{this._isMobileView=t,this._chart&&this.updateChart(!0)})}displayIn(e){super.displayIn(e),this.updateChartIfCanvasExists()}insertAfter(e){super.insertAfter(e),this.updateChartIfCanvasExists()}insertBefore(e){super.insertBefore(e),this.updateChartIfCanvasExists()}updateChartIfCanvasExists(){this.findCanvas$().exists()&&this.updateChart()}async updateChart(e=!1){const t=this._chartData.mailingId;this._chartData.mailingId=this.$el.find("[data-statistics-mailing]").val();const i=this._chartData.mailingId!==t;if(i||e){if(i){const e=await this.#Ti();this.initChartData(this.extractStatisticsData(e))}this.drawChart()}}#Ti(){const t=this._chartData.mailingId,i=e.FETCHED_DATA_CACHE.get(t);if(i)return i;const n=new Promise((e,i)=>{$.ajax({type:"GET",url:AGN.url("/dashboard/statistics.action"),data:{mailingId:t},success:t=>e(t),error:e=>i(e)})});return e.FETCHED_DATA_CACHE.set(t,n),n}extractStatisticsData(e){throw new Error("Extract statistics function not implemented for statistics tile!")}initChartData(e){this._chartData.names=e.names,this._chartData.values=e.values}drawChart(){this._chart?.destroy();const e=this.findCanvas$()[0].getContext("2d");this._chart=new Chart(e,this.getChartOptions())}findCanvas$(){return this.$el.find("canvas")}getChartOptions(){throw new Error("Chart options not defined for statistics tile!")}needsRedrawOnMobile(){return!1}}AGN.Lib.Dashboard.BaseMailingStatisticsTile=e})(),(()=>{class e extends AGN.Lib.Dashboard.BaseMailingStatisticsTile{constructor(){if(new.target===e)throw new TypeError("Cannot construct Abstract BaseMailingDeviceStatisticsTile instances directly!");super()}extractStatisticsData(e){return{percent:this.extractPercent(e)}}extractPercent(e){}initChartData(e){super.initChartData(e),this._chartData.percent=e.percent}getChartOptions(){return this._chartData.colors||(this._chartData.colors=[this.$el.css("--chart-darkest-blue-color"),this.$el.css("--chart-dark-blue-color"),this.$el.css("--chart-blue-color"),this.$el.css("--chart-light-blue-color"),this.$el.css("--chart-light-cyan-color")]),{type:"agnDoughnut",data:{labels:this._chartData.names,datasets:[{data:this._chartData.values,backgroundColor:this._chartData.colors,borderWidth:0}]}}}}AGN.Lib.Dashboard.BaseMailingDeviceStatisticsTile=e})(),(()=>{class e extends AGN.Lib.Dashboard.DraggableTile{static ID="empty";getOverlay(){return AGN.Lib.Template.text("dashboard-tile-empty-overlay")}}AGN.Lib.Dashboard.EmptyTile=e})(),(()=>{class e extends AGN.Lib.Dashboard.DraggableTile{static ID="add-ons"}AGN.Lib.Dashboard.AddOnsTile=e})(),(()=>{class e extends AGN.Lib.Dashboard.DraggableTile{static ID="analysis"}AGN.Lib.Dashboard.AnalysisTile=e})(),(()=>{const e=AGN.Lib.Dashboard.Def.TileSize;class t extends AGN.Lib.Dashboard.DraggableTile{static ID="calendar";constructor(t){super(t),this._controller.addDomInitializer("dashboard-calendar-tile",this.#ki),this.variants=[e.WIDE,e.TALL],this.size=this.variants[0]}#ki(){new AGN.Lib.Dashboard.CalendarLight(this.el,this.config)}remove(){super.remove(),this.$el=void 0}thumbnail(t){return super.thumbnail()+(t===e.TALL?"-tall":"")}}AGN.Lib.Dashboard.CalendarTile=t})(),(()=>{class e extends AGN.Lib.Dashboard.DraggableTile{static ID="imports-exports"}AGN.Lib.Dashboard.ImportExportTile=e})(),(()=>{class e extends AGN.Lib.Dashboard.BaseMailingStatisticsTile{static ID="statistics";extractStatisticsData(e){const t=[],i=[];for(let n=0;n<e.common.length;n++)t.push(e.common[n][0]),i.push(parseInt(e.common[n][1]));return{names:t,values:i}}getChartOptions(){const e=this._isMobileView,t=this.$el.css("--chart-blue-color");return{type:"bar",data:{labels:this._chartData.names,datasets:[{data:this._chartData.values,backgroundColor:t,categoryPercentage:e?.7:.9,minBarLength:2}]},options:{indexAxis:e?"y":"x",layout:{padding:{top:e?0:20,right:e?25:0}},scales:{x:{display:!e,ticks:{autoSkip:!1,maxRotation:90,minRotation:0}},y:{display:e,ticks:{mirror:!0,labelOffset:-37.5}}},plugins:{legend:{display:!1},datalabels:{anchor:"end",align:"end",offset:e?0:-5}}}}}needsRedrawOnMobile(){return!0}}AGN.Lib.Dashboard.StatisticsTile=e})(),(()=>{class e extends AGN.Lib.Dashboard.BaseMailingDeviceStatisticsTile{static ID="clickers";extractStatisticsData(e){const t=[],i=[],n=e.clickers;for(let e=0;e<n.length;e++){const o=parseFloat(n[e][1]);t.push(n[e][0]),i.push(o)}return _.extend(super.extractStatisticsData(e),{names:t,values:i})}drawChart(){const e=AGN.Lib.ChartUtils.getTotal(this._chartData.values),t=this.findCanvas$();t.toggleClass("hidden",0===e),t.next().toggleClass("hidden",e>0),e>0&&super.drawChart()}}AGN.Lib.Dashboard.ClickersTile=e})(),(()=>{class e extends AGN.Lib.Dashboard.BaseMailingDeviceStatisticsTile{static ID="openers";extractStatisticsData(e){const t=[],i=[],n=e.openers;for(let e=0;e<n.length;e++){const o=parseFloat(n[e][1]);t.push(n[e][0]),i.push(o)}return _.extend(super.extractStatisticsData(e),{names:t,values:i})}extractPercent(e){return e.openersPercent[0]}drawChart(){const e=AGN.Lib.ChartUtils.getTotal(this._chartData.values),t=this.findCanvas$().parent();t.toggleClass("hidden",0===e),t.next().toggleClass("hidden",0===e),t.next().next().toggleClass("hidden",e>0),e>0&&(super.drawChart(),this.#Di(this._chartData.percent))}#Di(e){e=this.#Mi(100*e,1),this.$el.find("#statistics-openers-percent").text(`${e}%`)}#Mi(e,t){return 1*parseFloat(e).toFixed(t)}}AGN.Lib.Dashboard.OpenersTile=e})(),(()=>{const e=".mailing-card";class t extends AGN.Lib.Dashboard.DraggableTile{static ID="mailings";constructor(e){super(e);const t=this;e.addAction({click:"delete-recent-mailing"},function(){t.deleteAction(this)}),e.addAction({click:"copy-recent-mailing"},function(){t.copyAction(this)}),e.addAction({change:"change-mailings-preview"},function(){const e=this.el.closest(".tile"),t=!this.el.is(":checked");AGN.Lib.Storage.set("dashboard-mailings-preview",t),AGN.Lib.CoreInitializer.run("truncated-text-popover"),AGN.Lib.Scrollbar.get(e.find(".tile-body")).update(),AGN.Lib.Popover.toggleState(e,!t)})}copyAction(e){e.event.preventDefault();const t=this.getRecentMailingId($(e.el));AGN.Lib.Page.reload(AGN.url(`/mailing/${t}/copy.action`))}deleteAction(t){t.event.preventDefault();const i=$(t.el);$.get({url:AGN.url("/mailing/deleteMailings.action"),data:{bulkIds:this.getRecentMailingId(i),toPage:"dashboard"}}).done(t=>{AGN.Lib.Confirm.create(t).done(t=>{AGN.Lib.RenderMessages($(t)),i.closest(e).remove()})})}getRecentMailingId(t){return t.closest(e).data("mailing-id")}get templateOptions(){return{...super.templateOptions,isPreviewEnabled:AGN.Lib.Storage.get("dashboard-mailings-preview")||!1}}}AGN.Lib.Dashboard.MailingsTile=t})(),(()=>{class e extends AGN.Lib.Dashboard.DraggableTile{static ID="news";constructor(e){super(e),this.dashboardNews=new AGN.Lib.Dashboard.News}afterTileAdded(){super.afterTileAdded(),this.dashboardNews.showNews(this.$el.find("> .tile-body")),this.dashboardNews.$sidebarNewsBtn.hide()}remove(){super.remove(),this.dashboardNews.$sidebarNewsBtn.show(this.shown)}}AGN.Lib.Dashboard.NewsTile=e})(),(()=>{const e=AGN.Lib.Dashboard.Def.TileSize;class i extends AGN.Lib.Dashboard.DraggableTile{static ID="planning";constructor(t){super(t);const i=this;this._controller.addDomInitializer("dashboard-planning",function(){$.i18n.load(this.config.translations),i.#Pi(),i.#Ri(new Date,new Date)}),this.variants=[e.TALL],this.size=this.variants[0]}#Pi(){const e=this.$el.find("#schedule-start-date"),t=this.$el.find("#schedule-end-date");this.#Ii(e,e,t),this.#Ii(t,e,t)}#Ii(e,t,i){const n=this;e.on("change",function(){const e=t.datepicker("getDate"),o=i.datepicker("getDate");e&&o&&n.#Ri(e,o)}),e.datepicker("option","onChangeMonthYear",function(e,n,o){const r=$(this),[s,a]=r.datepicker("option","yearRange").split(":");if(parseInt(e)===parseInt(a)){const e=`${s}:${parseInt(a)+1}`,n=r.is(t)?i:t;o.settings.yearRange=e,n.datepicker("option","yearRange",e)}})}#Ri(e,i){this.#Oi(e,i,window.adminDateFormat).then(e=>{let i="";i=e.length?`<div class="grid w-100" style="--bs-columns: 1">${this.#Ni(e)}</div>`:AGN.Lib.Template.text("notification-info",{message:t("dashboard.schedule.noMailings")});const n=this.$el.find("#schedule-data-container");n.html(i),AGN.runAll(n)})}#Oi(e,t,i){return new Promise((n,o)=>{$.get(AGN.url("/dashboard/scheduledMailings.action"),{startDate:AGN.Lib.DateFormat.format(e,i),endDate:AGN.Lib.DateFormat.format(t,i)}).done(e=>n(e)).fail(e=>o(e))})}#Ni(e){_.each(e,e=>e.link=AGN.url(`/mailing/send/${e.id}/view.action`));const t=_.groupBy(e,"sendDate");return _.sortBy(t,e=>e[0].maildropSendDate).map(e=>_.sortBy(e,"sendTime")).reduce((e,t)=>{const i=new Date(t[0].maildropSendDate).toLocaleString(window.adminLocale,{weekday:"long"}),n=t[0].sendDate;return e+AGN.Lib.Template.text("dashboard-schedule-day",{dayOfWeek:i,dateStr:n,dayMailings:t})},"")}}AGN.Lib.Dashboard.PlanningTile=i})(),(()=>{class e extends AGN.Lib.Dashboard.DraggableTile{static ID="workflows"}AGN.Lib.Dashboard.WorkflowsTile=e})(),(()=>{const e=AGN.Lib.Popover,t=AGN.Lib.Template,i="/assets/core/images/facelift/no_preview.svg",n="---";AGN.Lib.Dashboard.MailingPopover=class extends e{constructor(t,i){super(),this.showLoader=i,this.mailing=t;const n=AGN.url(this.mailingThumbnailSrc(t)),o=this.content(this.showLoader?this.loaderInfo:this.loadedInfo(t,n));this.popover=e.getOrCreate(this.mailing.$el,this.options(o));let r=0,s=0;function a(e=0,t=0){return()=>({width:0,height:0,top:t,right:e,bottom:t,left:e})}const l=({clientX:e,clientY:t})=>{r=e,s=t,this.popover?._popper?.state?.elements?.reference&&(this.popover._popper.state.elements.reference=c),c.getBoundingClientRect=a(e,t),this.popover?._popper?.update()},c={getBoundingClientRect:a()};this.mailing.$el.off("mouseenter").on("mouseenter",t=>{if(this.disabled)return;const i=setTimeout(()=>{this.showLoader&&(AGN.Lib.Loader.prevent(),$.get(AGN.url("/calendar/mailingsPopoverInfo.action"),{mailingIds:this.mailing.id}).done(t=>{const i=AGN.url(this.mailingThumbnailSrc(t[0]));let n=new Image;n.src=i,n.onload=()=>{this.$loadedContent=this.content(this.loadedInfo(t[0],i)),e.isShown(this.popover)?o.replaceWith(this.$loadedContent):this.popover.setContent({".popover-body":this.$loadedContent}),this.showLoader=!1}}))},250),n=setTimeout(()=>{this.popover.show(),l({clientX:r,clientY:s})},500);this.mailing.$el.on("mousemove",l),this.mailing.$el.on("mouseleave",()=>{this.mailing.$el.off("mousemove"),this.popover.hide(),clearTimeout(i),clearTimeout(n),this.$loadedContent?.length&&this.popover.setContent({".popover-body":this.$loadedContent})})})}loadedInfo(e,t){return{...e,isSent:this.mailing.isSent,thumbnailUrl:t,showLoader:!1}}disable(){this.disabled=!0}enable(){this.disabled=!1}content(e){const i=t.dom("calendar-mailing-popover-content",e);return AGN.runAll(i),i}get loaderInfo(){return{shortname:this.mailing.shortname,thumbnailUrl:AGN.url(i),subject:n,description:n,mailinglist:n,sendDate:n,sentCount:n,isSent:this.mailing.isSent,openers:n,clickers:n,showLoader:!0}}options(e){return{content:e,html:!0,trigger:"manual",customClass:"dashboard-mailing-popover",animation:!0,popperConfig:e=>({...e,placement:"bottom-start",modifiers:[...e.modifiers||[],{name:"offset",options:{offset:({placement:e,reference:t,popper:i})=>["bottom-end","top-end"].includes(e)?[-15,15]:[15,15]}},{name:"flip",options:{enabled:!0,fallbackPlacements:["bottom-end","top-start","top-end"]}}]})}}mailingThumbnailSrc(e){return e.post?"/assets/core/images/facelift/post_thumbnail.jpg":e.thumbnailComponentId?"/sc?compID="+e.thumbnailComponentId:i}}})(jQuery),AGN.Lib.Controller.new("dashboard-grid",function(){const e=["xl-calendar"],t=AGN.Lib.Dashboard,i=AGN.Lib.Modal,n=t.Def,o=n.TileSize,r=t.EmptyTile,s=t.DraggableTile,a=this;let l,c,d;function u(){d.visibleTiles.length||AGN.Lib.Messages.info("dashboard.empty")}function h(e,i){d=new t.DashboardGrid(2,i,e)}function p(){const e=d.visibleTiles.map(e=>e.id);return l.filter(t=>!t.isEmpty&&!e.includes(t.id)).map(e=>(e.variants.forEach(e=>e.disabled=!1),e))}function g(e){return l[l.findIndex(t=>t.id===e)]||new r}function f(e){$("#dashboard-start-edit-btn").closest("li").toggle(!e),$("body").toggleClass("edit-mode",!!e),d.swapper.toggle(e)}function m(e,t){switch(t){case 3:return e.position.cols.includes(3);case 2:return e.position.cols.includes(2)||e.position.cols.includes(3);default:return!1}}function v(e,t){for(let i=0;i<d.rows;i++){const n=new r;n.position={rows:[i],cols:[t]},e.push(n)}}function b(e){return e<d.cols?function(e){return d.tiles.filter(t=>(t.isXl||t.isXWide)&&m(t,e)).forEach(e=>d.replaceWithEmptyTile(e)),d.tiles.map(t=>{if(t.isWide&&m(t,e)){const e=new r;return e.position={cols:[t.beginCol],rows:[t.beginRow]},e}return t}).filter(t=>!m(t,e))}(e):function(e){const t=d.tiles;for(let i=0;i<e-d.cols;i++)v(t,d.cols+i);return t}(e)}this.addDomInitializer("dashboard-grid",function(){l=[new t.MailingsTile(a),new t.PlanningTile(a),new t.StatisticsTile(a),new t.ClickersTile(a),new t.OpenersTile(a),new t.WorkflowsTile(a),new t.ImportExportTile(a),new t.AddOnsTile(a),new t.NewsTile(a),new t.CalendarTile(a),new t.AnalysisTile(a)].filter(e=>e.allowed());const i=JSON.parse(this.config.layout)||_.clone(n.LAYOUT.DEFAULT);!function(i){i.SCHEMA.filter(t=>e.includes(t.id)).map(e=>e.position).forEach(e=>{e.rows.forEach(n=>{e.cols.forEach(e=>{i.SCHEMA.push({id:t.EmptyTile.ID,positions:{rows:[n],cols:[e]}})})})}),i.SCHEMA=i.SCHEMA.filter(t=>!e.includes(t.id))}(i),h(i.SCHEMA.map(e=>{const t=g(e.id);return t.size=function(e,t){const i=e.position?.rows?.length,n=e.position?.cols?.length;return 2===i&&1===n?o.TALL:1===i&&2===n?o.WIDE:2===i&&3===n?o.X_LARGE:t}(e,t.size),t}),i.COLS_COUNT),u(),$(window).on("displayTypeChanged",(e,t)=>{t&&f(!1)}),f(!1)}),this.addAction({click:"delete-tile"},function(){const e=s.get(this.el.closest(".draggable-tile"));d.replaceWithEmptyTile(e)}),this.addAction({click:"replace-tile"},function(){c=s.get(this.el.closest(".draggable-tile")),i.fromTemplate("dashboard-tiles-selection-modal",{tiles:p()})}),this.addAction({click:"select-tile"},function(){c=s.get(this.el.closest(".draggable-tile")),i.fromTemplate("dashboard-tiles-selection-modal",{tiles:p().map(e=>(e.variants.forEach(e=>{const t=d.findInterferingTilesToReplace(c,e);e.disabled=t.some(e=>!e.isEmpty)}),e))})}),this.addAction({click:"add-tile"},function(){const e=i.getInstance(this.el),t=g(this.el.data("tile-id"));t.size=o.from(this.el.data("type"))||o.REGULAR;const n=d.findInterferingTilesToReplace(c,t.size).filter(e=>!e.isEmpty),r=()=>{d.replaceTile(c,t),e.hide()};n.length>1?AGN.Lib.Confirm.from("dashboard-replace-tiles-question-modal",{tileNames:n.map(e=>e.name).join(", ")}).done(r):r()}),this.addAction({change:"redraw-mailing-statistics"},function(){const e=this.el.closest(".draggable-tile");s.get(e).updateChart()}),this.addAction({click:"open-mailing-statistics"},function(){const e=this.el.closest(".draggable-tile").find("[data-statistics-mailing]").val();AGN.Lib.Page.reload(AGN.url(`/statistics/mailing/${e}/view.action`))}),this.addAction({click:"edit-dashboard"},function(){f(!0);const e=this.el.closest(".popup");var t;(t=e).length&&($(":focus",t).blur(),toastr.clear(t))}),this.addAction({click:"stop-editing"},function(){f(!1),u(),$.ajax({type:"POST",url:AGN.url("/dashboard/layout/save.action"),data:{layout:JSON.stringify(d.schema)},async:!1}).done(()=>AGN.Lib.Messages.defaultSaved())}),this.addAction({click:"select-layout"},function(){i.fromTemplate("dashboard-layout-selection-modal")}),this.addAction({click:"change-layout"},function(){const e=this.el.data("cols-count");if(e===d.cols)return;h(b(e),e)})}),AGN.Lib.Controller.new("dashboard-calendar",function(){const e=AGN.Lib.Dashboard.DashboardCalendarLabel,t=AGN.Lib.Dashboard.DashboardCalendar;let i;this.addDomInitializer("dashboard-calendar",function(){i=new t($("#dashboard-calendar"),this.config),new AGN.Lib.Dashboard.News}),this.addDomInitializer("unsent-list",function(){i.initUnsentList(this.config.mailings,this.config.planned)}),this.addAction({change:"toggle-scroll"},e=>i.toggleScroll(e.prop("checked"))),this.addAction({change:"switch-mode"},e=>i.toggleMode(e.prop("checked"))),this.addAction({click:"show-more-mailings"},e=>i.showMoreMailings(e)),this.addAction({click:"jump-to-today"},()=>i.jumpToToday()),this.addAction({keyup:"search"},e=>i.search(e.val().toLowerCase())),this.addAction({dblclick:"show-comment"},t=>e.get(t).showModal()),this.addAction({change:"toggle-comments"},e=>i.commentsManager.toggle(e.prop("checked"))),this.addAction({click:"create-comment"},e=>i.commentsManager.create(e.data("date"))),this.addAction({click:"delete-comment"},e=>i.commentsManager.remove(e.data("comment-id"))),this.addAction({click:"save-comment"},e=>i.commentsManager.save(e.data("comment-id")))}),(()=>{const e=AGN.Lib.Template,t=AGN.Lib.Modal;let i=[];AGN.Lib.Dashboard.News=class{constructor(){this.$sidebarNewsBtn.off("click").on("click",()=>this.showNewsModal())}get $sidebarNewsBtn(){return $("#sidebar-news-btn")}get $sidebarNewsCounter(){return this.$sidebarNewsBtn.find("span:nth-child(2)")}get unreadNewsCount(){return parseInt(this.$sidebarNewsCounter?.text())}showNewsModal(){const e=t.fromTemplate("news-modal-template");this.showNews(e.find(".modal-body")),this.unreadNewsCount<1||(this.$sidebarNewsCounter.hide(),$.post(AGN.url("/administration/popupnews/reset-news-unread-count.action")))}showNews(t){this.fetchNews().then(i=>i.forEach(i=>t.append(e.dom("news-item-template",i))))}async fetchNews(){return i.length?i:(i=await $.get(AGN.url("/administration/popupnews/news.action")))||[]}}})(),function(){const e=AGN.Lib.WM.EditorsHelper;AGN.Lib.WM.CommentEditor=class{constructor(){this.formName="iconCommentForm",this.safeToSave=!0}fillEditor(e){$("#iconComment").val(e.getComment())}saveEditor(){e.saveIconComment($("#iconComment").val()),this.cancelEditor()}cancelEditor(){return $("#icon-comment-editor").dialog("close"),!1}}}(),function(){const e=AGN.Lib.WM.Definitions;class t extends AGN.Lib.InputTable{constructor(t,i=[],n,o){t.empty();super(t,i.map(t=>({...t,chainOperator:t.chainOperator===parseInt(e.constants.chainOperatorOr)})),n),this.profileFieldsTypes=o,this.#Li(),this.updateOperatorsAvailability()}get $form(){return this.$container.closest("form")}get $profileFieldSelect(){return this.$form.find('[name="profileField"]')}get currentProfileField(){return this.$profileFieldSelect.val()}get currentProfileFieldIsGender(){return this.currentProfileField?.toLowerCase()===e.GENDER_PROFILE_FIELD}addActions(){super.addActions(),this.addAction({click:"[data-add-row]"},()=>this.onRowAddedManually()),this.addAction({click:"[data-delete-row]"},()=>this.onRowsChangedManually())}addRow(e){const t=this;super.addRow(e),this.$container.find('tr:last [data-name="primaryOperator"]').on("change",function(){t.updateValueInput($(this))})}renderTable(t){super.renderTable(t),this.$container.find('[data-name="primaryOperator"]').toArray().filter(t=>$(t).val()===e.constants.operatorIs).forEach(t=>$(t).data("previous-value",e.constants.operatorIs)),this.currentProfileFieldIsGender&&this.$profileFieldSelect.data("previous-value",e.GENDER_PROFILE_FIELD),this.removeLastRow()}onRowAddedManually(){this.updateOperatorsAvailability(),this.onRowsChangedManually()}onRowsChangedManually(){this.#Li(),this.$container.trigger("change")}#Li(){this.$container.find('[data-name="chainOperator"]:first').closest(".switch").prop("checked",!1).closest("td").hide(),this.$container.find('[data-name="chainOperator"]:not(:first)').closest(".switch").show()}collect(){const t=super.collect();return t.forEach(t=>{t.chainOperator=parseInt(t.chainOperator?e.constants.chainOperatorOr:e.constants.chainOperatorAnd),t.parenthesisOpened=parseInt(t.parenthesisOpened),t.parenthesisClosed=parseInt(t.parenthesisClosed),t.primaryOperator=parseInt(t.primaryOperator)}),t}get rowTemplate(){const e=this.$primaryOperatorOptions(),t=this.ruleValueInput();return`\n          <tr>\n              <td style="max-width: 70px">\n                  <label class="switch">\n                      <input type="checkbox" data-name="chainOperator" value="true" {{- chainOperator ? 'checked' : ''}} ${this.readonlyAttr}>\n                      <span>AND</span>\n                      <span class="flex-center flex-grow-1">OR</span>\n                  </label>\n              </td>\n              <td style="max-width: 45px">\n                  <select data-name="parenthesisOpened" class="form-control rule-field" ${this.readonlyAttr}>\n                      <option value="0" {{- parenthesisOpened === 0 ? 'selected' : ''}}>&nbsp</option>\n                      <option value="1" {{- parenthesisOpened === 1 ? 'selected' : ''}}>(</option>\n                  </select>\n              </td>\n              <td>\n                  <select data-name="primaryOperator" class="form-control" data-action="start-rule-operator-change" ${this.readonlyAttr} data-select-options="dropdownAutoWidth: true">\n                      ${e}\n                  </select>\n              </td>\n              <td>\n                  ${t}\n              </td>            \n              <td style="max-width: 45px">\n                  <select data-name="parenthesisClosed" class="form-control rule-field" ${this.readonlyAttr}>\n                      <option value="0" {{- parenthesisClosed === 0 ? 'selected' : ''}}>&nbsp</option>\n                      <option value="1" {{- parenthesisClosed === 1 ? 'selected' : ''}}>)</option>\n                  </select>\n              </td>                        \n          </tr>`}emptyRuleValueInput(){return`<input type="text" data-name="primaryValue" value="" class="form-control rule-field" ${this.readonlyAttr}/>`}ruleValueInput(){return`\n        {{ if (${this.currentProfileField===e.GENDER_PROFILE_FIELD}) { }}\n            ${this.genderSelect(!0)}\n        {{ } else if (primaryOperator == ${e.constants.operatorIs}) { }}\n            ${this.operatorIsSelect(!0)}\n        {{ } else { }}\n            ${this.emptyRuleValueInput().replace('value=""','value="{{- primaryValue }}"')}\n        {{ } }}`}$primaryOperatorOptions(){let t="";return e.constants.operators.forEach(function(e){let i='value="'+e.id+'"',n=e.data;n&&Object.keys(n).forEach(function(e){i+=" data-"+e+'="'+n[e].replace('"',"&quot;")+'"'}),t+=`<option ${i} {{- primaryOperator === ${e.id} ? 'selected' : '' }}>${e.text.replace("<","&lt;").replace(">","&gt;")}</option>`}),t}genderSelect(t){return`<select data-name="primaryValue" class="form-control">${Object.entries(e.constants.genderOptions).map(([e,i])=>this.genderOption(e,i,t)).join("")}</select>`}genderOption(e,t,i){return`<option value="${e}" ${i?`{{- primaryValue == ${e} ? "selected" : "" }}`:""}>${t}</option>`}operatorIsSelect(e){const t='\n        <select data-name="primaryValue" class="form-control">\n            <option value="NULL">NULL</option>\n            <option value="NOT_NULL">NOT NULL</option>\n        </select>';return e?t.replace('value="NULL"','value="NULL" {{- primaryValue === "NULL" ? "selected" : "" }}').replace('value="NOT_NULL"','value="NOT_NULL" {{- primaryValue === "NOT_NULL" ? "selected" : "" }}'):t}updateOperatorsAvailability(){const e=this.$container.find('select[data-name="primaryOperator"]');_.forEach(e.toArray(),e=>this.updateSelectOperatorsAvailability($(e))),e.trigger("change.select2")}updateSelectOperatorsAvailability(e){const t=this.currentProfileField,i=this.profileFieldsTypes[t],n=e.children("option").toArray().filter(e=>this.isAllowedOperatorsOption(e,i)).map(e=>e.value);AGN.Lib.Select.get(e).disableOptions(n,!0)}isAllowedOperatorsOption(e,t){if(this.currentProfileFieldIsGender)return"="!==e.text&&"<>"!==e.text;const i=$(e).data("types");return!("*"===i||!i)&&!i.split(/[\s,]+/).includes(t)}updateValueInput(t){const i=t.closest("tr").find('[data-name="primaryValue"]');if(t.val()===e.constants.operatorIs){const n=$(this.operatorIsSelect());i.closest("td").html(n),t.data("previous-value",e.constants.operatorIs),this.#U(n)}else t.data("previous-value")===e.constants.operatorIs&&(i.closest("td").html(this.emptyRuleValueInput()),t.removeData("previous-value"))}onProfileFieldChanged(){this.updateOperatorsAvailability(),this.currentProfileFieldIsGender?(this.changeValueInputsToGenderSelect(),this.$profileFieldSelect.data("previous-value",e.GENDER_PROFILE_FIELD)):this.$profileFieldSelect.data("previous-value")===e.GENDER_PROFILE_FIELD&&(this.changeValueInputsToTextInput(),this.$profileFieldSelect.removeData("previous-value"))}changeValueInputsToGenderSelect(){_.each(this.$container.find('[data-name="primaryValue"]'),e=>{const t=$(this.genderSelect());$(e).closest("td").html(t),this.#U(t)})}changeValueInputsToTextInput(){_.each(this.$container.find('[data-name="primaryValue"]'),e=>{$(e).closest("td").html(this.emptyRuleValueInput())})}#U(e){AGN.Lib.CoreInitializer.run("select",e)}}AGN.Lib.WM.FieldRulesTable=t}(),function(){const e=AGN.Lib.WM.EditorsHelper;class t{constructor(){if(this.constructor===t)throw new Error("Cannot instantiate abstract class")}get saveOnOpen(){return!1}get $form(){return $(`form[name="${this.formName}"]`)}get form(){return AGN.Lib.Form.get(this.$form)}get formName(){throw new Error("formName() must be implemented")}$find(e){return $(`form[name="${this.formName}"] ${e}`)}toggle(e,t){this.$find(e).toggle(t)}hide(e){this.toggle(e,!1)}show(e){this.toggle(e,!0)}dateAsUTC(e){return e?new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())):null}getForwardParams(t){return{nodeId:e.curEditingNode.getId(),elementId:encodeURIComponent(t)}}getForwardParamsStr(){return Object.entries(this.getForwardParams()).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`).join(";")}isValid(){return this.form.validate()}save(){this.isValid()&&e.saveCurrentEditorWithUndo()}alwaysReadonly(e){return!1}}AGN.Lib.WM.NodeEditor=t}(),function(){const e=AGN.Lib.WM.EditorsHelper,t=AGN.Lib.Messages,i=AGN.Lib.WM.Definitions;class n extends AGN.Lib.WM.NodeEditor{constructor(e){super(),this.conf=e,this.safeToSave=!0}get formName(){throw new Error("formName() must be implemented")}get $idSelect(){return this.$find("select[name=importexportId]")}get selectedId(){return this.$idSelect.val()}get type(){throw new Error("type() must be implemented")}get $editor(){throw new Error("$editor() must be implemented")}fillEditor(i){const n=i.getData();this.$form.submit(!1),this.$form.get(0).reset(),e.fillFormFromObject(this.formName,n,""),this.addLinks(),"true"===this.conf.isDisabled&&t.warn(this.missingPermissionMsgCode),this.isValid()}get missingPermissionMsgCode(){throw new Error("missingPermissionMsgCode() must be implemented")}get dependencyType(){throw new Error("dependencyType() must be implemented")}get inUseMsgCode(){throw new Error("inUseMsgCode() must be implemented")}get notSelectedMsgCode(){throw new Error("notSelectedMsgCode() must be implemented")}isValidDependency(){let e=!1;return $.ajax({url:AGN.url("/workflow/validateDependency.action"),async:!1,data:{workflowId:i.workflowId||0,type:this.dependencyType,entityId:this.selectedId}}).done(i=>{!0===i.valid?e=!0:t.warn(this.inUseMsgCode)}).fail(()=>{t.warn("Error")}),e}isValid(){return super.isValid()&&this.isValidDependency()}save(){"true"!==this.conf.isDisabled&&super.save()}onChange(){this.addLinks()}addLinks(){throw new Error("addLinks() must be implemented")}saveEditor(){return e.formToObject(this.formName)}isSetFilledAllowed(){const e=this.$idSelect.find(":selected");return!(0==this.selectedId||1!=e.data("is-available"))}}AGN.Lib.WM.RecipientTransferEditor=n}(),(()=>{const e=AGN.Lib.WM.MailingSelector,i=AGN.Lib.WM.FieldRulesTable,n=AGN.Lib.WM.EditorsHelper,o=AGN.Lib.WM.DateTimeUtils,r=AGN.Lib.Template,s=AGN.Lib.Messages,a=AGN.Lib.Select,l=AGN.Lib.WM.Definitions;class c extends AGN.Lib.WM.NodeEditor{constructor(t,i,n){super(),this.editor=t,this.config=i,this.submitWorkflowForm=n,this.startMailingSelector=new e(i.form,i.selectedName,i.noMailingOption),this.isStartEditor=!1,this.timePattern=/^(\d{2}):(\d{2})$/}get saveOnOpen(){return!0}get formName(){return"startForm"}get title(){return this.isStartEditor?t("workflow.start.title"):t("workflow.stop.title")}get $endTypeSelect(){return this.$find('[name="endType"]')}get endTypeSelect(){return a.get(this.$endTypeSelect)}get $rulesContainer(){return this.$find("#profileFieldRules")}get requiredMsg(){return t("fields.required.errors.missing")}getStartStopDate(e){if(e=e||n.formToObject(this.formName),this.isStartEditor)switch(e.startType){case l.constants.startTypeDate:return this.$find("#startDate").datepicker("getDate");case l.constants.startTypeEvent:return this.$find("#executionDate").datepicker("getDate")}else if(e.endType==l.constants.endTypeDate)return this.$find("#startDate").datepicker("getDate");return null}generateReminderComment(){const e=$('#workflowForm input[name="shortname"]').val(),i=o.getDateStr(this.getStartStopDate(),window.adminDateFormat);return(this.isStartEditor?t("workflow.start.reminder_text"):t("workflow.stop.reminder_text")).replace(/:campaignName/g,e).replace(/:startDate/g,i).replace(/:endDate/g,i)}fillEditor(e){var r=e.getData();this.isStartEditor="start"===e.getType();const s=this.isStartEditor&&(e.data.startType===l.constants.startTypeEvent||!this.editor.isAutoOptimizationWorkflow(e));this.updateEditorType(this.isStartEditor,s),this.$form.submit(!1),this.$find("#remindCalendarDateTitle").text(t(this.isStartEditor?"workflow.start.start_date":"workflow.stop.end_date")),r.adminTimezone=this.config.adminTimezone,r.sendReminder=r.scheduleReminder,n.fillFormFromObject(this.formName,r,""),this.startMailingSelector.setMailingId(r.mailingId),this.startMailingSelector.cleanOptions(),this.#Fi(r.mailingId);const c=new Date;this.$find("#startDate").datepicker("setDate",this.dateAsUTC(r.date??c)),this.$find("#executionDate").datepicker("setDate",this.dateAsUTC(r.date??c)),this.$find("#remindDate").datepicker("setDate",this.dateAsUTC(r.remindDate??c));const d=r.date?r:o.getCurrentAdminTime();this.$find("#startTime").val(this.formatTime(d.hour,d.minute)),this.$find("#remindTime").val(this.formatTime(d.remindHour,d.remindMinute)),this.updateVisibility(),r.startType==l.constants.startTypeEvent&&r.event==l.constants.startEventReaction&&r.reaction==l.constants.reactionClickedLink&&0!=r.mailingId&&null!=r.mailingId&&this.onMailingSelectChange(r.mailingId,r.linkId),r.comment||this.$find("#reminderComment").val(this.generateReminderComment()),a.get($('#start-editor [name="userType"]')).selectOption(""!=r.recipients?2:1),this.$find('select[name="recipients"]').on("select2:selecting",e=>{const i=$(e.target).find("option:last-child").val();if(AGN.Lib.Helpers.isValidEmail(i))return!0;AGN.Lib.Messages.warn(t("error.workflow.cantAddInvalidEmailToTheList",i)),e.preventDefault()}),this.form.cleanFieldFeedback();const u=!this.isStartEditor&&this.editor.isAllLinkedFilledStartsHasDateType(e);u&&this.endTypeSelect.selectOption(l.constants.endTypeAutomatic),this.endTypeSelect.setReadonly(u),this.rulesTable=new i(this.$rulesContainer,r.rules,n.isReadOnlyMode(),this.config.profileFields)}#Fi(e){const t=$("#edit-start-editor-mailing-btn");t.toggleClass("hidden",!e),e&&t.attr("href",AGN.url(`/mailing/${e}/settings.action`))}editMailing(){const e=`form[name="${this.formName}"] select[name=mailingId]`;$("#forwardTargetItemId").val($(e).val()),n.processForward(l.constants.forwards.MAILING_EDIT.name,e,this.submitWorkflowForm)}saveEditor(){const e=n.formToObject(this.formName);var t;e.date=this.getStartStopDate(e),null==e.date&&(e.date=new Date,e.date.setHours(0),e.date.setMinutes(0),e.date.setSeconds(0),e.date.setMilliseconds(0));var i=this.$find("#startTime").val();(t=this.timePattern.exec(i))?(e.hour=t[1],e.minute=t[2]):(e.hour=0,e.minute=0),e.scheduleReminder=e.sendReminder;var o=this.$find("#remindTime").val();return(t=this.timePattern.exec(o))?(e.remindHour=t[1],e.remindMinute=t[2]):(e.remindHour=0,e.remindMinute=0),"true"===this.$find('[name="remindSpecificDate"]').val()?e.remindDate=this.$find("#remindDate").datepicker("getDate"):(e.remindDate=e.date,e.remindHour=0,e.remindMinute=0),null==e.rules&&(e.rules=[]),null!=e.linkId&&null!=e.linkId||(e.linkId=0),e.dateFieldOperator!=this.config.equelsOperatorCode&&(e.dateFieldOperator=this.config.equelsOperatorCode),2==e.userType?(e.remindAdminId=0,e.recipients=$.trim(e.recipients).toLowerCase().split(/[,;\s\n\r]+/).filter(e=>!!e).join(", ")):e.recipients="",delete e.userType,e.rules=this.rulesTable.collect(),e}validateEditorInternal(e){const i=this;let n=!0;const o=this.isStartEditor?this.$find('select[name="startType"]').val():this.$find('select[name="endType"]').val();return this.isStartEditor&&o===l.constants.startTypeEvent&&(!function(){switch(i.$find('select[name="event"]').val()){case l.constants.startEventDate:if(i.$find("#executionDate").datepicker("getDate")){var t=i.$find("#startTime").val();i.timePattern.test(t)||(n=!1)}else n=!1;var o=i.$find("#dateFieldValue");$.trim(o.val())||(n=!1,e&&s.warn("error.workflow.startDateOmitted"));const r=i.$find("#dateProfileField");$.trim(r.val())||(n=!1,e&&i.form.showFieldError("dateProfileField",i.requiredMsg));break;case l.constants.startEventReaction:switch(i.$find('select[name="reaction"]').val()){case l.constants.reactionClickedLink:const t=i.$find('select[name="linkId"]').val();(!t||parseInt(t,10)<=0)&&(n=!1,e&&s.warn("error.workflow.noLinkSelected"));case l.constants.reactionOpened:case l.constants.reactionClicked:const o=i.$find('select[name="mailingId"]').val();parseInt(o,10)<=0&&(n=!1,e&&s.warn("error.workflow.noMailing"));break;case l.constants.reactionChangeOfProfile:if(void 0!==i.config.isBigData&&1==i.config.isBigData)i.$find('select[name="profileField"]').val()||(n=!1);const r=i.$find("#startProfileField");$.trim(r.val())||(n=!1,e&&i.form.showFieldError("profileField",i.requiredMsg));break;case l.constants.reactionWaitingForConfirm:case l.constants.reactionOptIn:case l.constants.reactionOptOut:break;default:n=!1}}}(),r()),(this.isStartEditor&&o===l.constants.startTypeDate||!this.isStartEditor&&o===l.constants.endTypeDate)&&r(),n&&this.$find("#sendReminder").is(":checked")&&"2"==this.$find('[name="userType"]').val()&&function(){const o=i.$find('select[name="recipients"]').val();o.length?AGN.Lib.Helpers.isValidEmails(o)||(n=!1,e&&i.form.showFieldError("recipients",t("error.workflow.wrongEmail"))):e&&(n=!1,s.warn("error.workflow.emptyRecipientList"))}(),n&&this.form.cleanFieldFeedback(),n;function r(){if(i.$find("#startDate").datepicker("getDate")){var e=i.$find("#startTime").val();i.timePattern.test(e)||(n=!1)}else n=!1}}isValid(){return this.validateEditorInternal(!0)&&super.isValid()}isSetFilledAllowed(){return this.validateEditorInternal(!1)}updateEditorType(e,i){const n=$("#startStopType");n.empty(),e?(n.append(r.text("start-types",{showStartEventTab:i})),$("#eventReaction").html(t("workflow.start.reaction_based")),$("#eventDate").html(t("workflow.start.date_based"))):(n.append(r.text("stop-types")),this.checkPresentNodeOfType([l.NODE_TYPE_ACTION_BASED_MAILING,l.NODE_TYPE_DATE_BASED_MAILING])?$("#endTypeAutomaticLabel").html(t("workflow.stop.open_end")):$("#endTypeAutomaticLabel").html(t("workflow.stop.automatic_end")))}onStartTypeChanged(){const e=this.$find("#startIconTime"),t=this.isStartEditor?this.$find('select[name="startType"]').val():this.$find('select[name="endType"]').val();this.isStartEditor&&t==l.constants.startTypeDate||!this.isStartEditor&&t==l.constants.endTypeDate?(this.toggleFormat(),this.hide("#startEventPanel"),this.show("#startDatePanel"),this.show("#startIconTime"),this.$find("#startDatePanel .date-time-container").append(e),this.show("#startRemindAdmin")):this.isStartEditor&&t==l.constants.startTypeEvent?(this.hide("#startDatePanel"),this.$find("#executionDatePanel .date-time-container").append(e),this.show("#startEventPanel"),this.show("#startIconTime"),this.show("#startRemindAdmin"),this.onStartEventChanged()):(this.isStartEditor&&t==l.constants.startTypeOpen||!this.isStartEditor&&t==l.constants.endTypeAutomatic)&&(this.hide("#startDatePanel"),this.$find("#executionDatePanel .date-time-container").append(e),this.hide("#startEventPanel"),this.hide("#startIconTime"),this.hide("#startRemindAdmin"))}onStartEventChanged(){var e=$("#startEvent").val();e==l.constants.startEventReaction?(this.toggleFormat(),this.hide("#dateStartPanel"),this.show("#reactionStartPanel"),this.onExecutionChanged(),this.onProfileFieldChanged()):e==l.constants.startEventDate&&(this.toggleFormat(),this.hide("#reactionStartPanel"),this.show("#dateStartPanel"),this.hide("#executionDateLabel"),this.show("#firstExecutionDateLabel"),$("#startIconDateFormat").insertAfter("#startIconDateFieldOperator"),this.show("#startIconDateFormat"))}toggleFormat(){this.$find("input#startTime").inputmask(this.isDateBasedStart?"h:00":"h:s")}get isDateBasedStart(){return this.$find("#start-type").val()===l.constants.startTypeEvent&&this.$find("select#startEvent").val()===l.constants.startEventDate}onRuleModeChanged(){this.toggle("#profileFieldRules","false"!==$('select[name="useRules"]').val())}onProfileFieldChanged(){this.updateDateFormatVisibility(),this.rulesTable?.onProfileFieldChanged()}updateDateFormatVisibility(){const e=this.$find('select[name="profileField"]').val(),t=this.config.profileFields[e];t&&t.toLowerCase()==l.FIELD_TYPE_DATE?($("#startIconDateFormat").insertAfter("#reactionProfileField"),this.show("#startIconDateFormat")):this.hide("#startIconDateFormat")}onExecutionChanged(){const e=this.$find('[name="executeOnce"]').val();this.toggle("#executionDateLabel","false"!==e),this.toggle("#firstExecutionDateLabel","false"===e)}onReactionChanged(){const e=this.$find("#startReaction").val();e==l.constants.reactionOpened||e==l.constants.reactionNotOpened||e==l.constants.reactionClicked||e==l.constants.reactionNotClicked||e==l.constants.reactionBought||e==l.constants.reactionNotBought||e==l.constants.reactionClickedLink?(this.hide("#reactionStartProfile"),this.show("#reactionStartMailing")):e==l.constants.reactionChangeOfProfile?(this.hide("#reactionStartMailing"),this.show("#reactionStartProfile")):(this.hide("#reactionStartMailing"),this.hide("#reactionStartProfile")),this.toggle("#reactionStartMailingLink",e===l.constants.reactionClickedLink)}onReminderChanged(){return this.$find('input[name="sendReminder"]').is(":checked")?(this.$find("#reminderComment").val(this.generateReminderComment()),this.show("#reminderDetails")):this.hide("#reminderDetails"),!1}onScheduleReminderDateChanged(){return this.toggle("#dateTimePicker","true"===this.$find('select[name="remindSpecificDate"]').val()),!1}onMailingSelectChange(e,t){const i=this.$find('select[name="linkId"]'),o=parseInt(e,10);o>0?(i.attr("readonly","readonly"),$.ajax({url:AGN.url(`/mailing/ajax/${o}/links.action`),success:function(e){i.empty(),i.append($("<option></option>",{value:"",text:l.EMPTY_OPTION_PLACEHOLDER})),$.each(e,function(e,t){i.append($("<option></option>",{value:t.id,text:t.url}))}),i.removeAttr("readonly"),null!=t&&null!=t?(i.val(t),n.initSelectWithValueOrChooseFirst(i,t)):n.initSelectWithFirstValue(i)}})):i.empty(),this.#Fi(o)}updateVisibility(){this.onStartTypeChanged(),this.onStartEventChanged(),this.onReactionChanged(),this.onRuleModeChanged(),this.onExecutionChanged(),this.onReminderChanged(),this.onScheduleReminderDateChanged()}formatTime(e,t){var i=0,n=0;return(e=parseInt(e,10))>=0&&(i=e),(t=parseInt(t,10))>=0&&(n=t),(i<10?"0"+i:i)+":"+(n<10?"0"+n:n)}checkPresentNodeOfType(e){return n.getNodesByTypes(e).length>0}}AGN.Lib.WM.StartStopNodeEditor=c})(),function(){const e=AGN.Lib.WM.EditorsHelper,i=AGN.Lib.Select;class n extends AGN.Lib.WM.NodeEditor{constructor(e){super(),this.campaignEditor=e}get saveOnOpen(){return!0}get formName(){return"parameterForm"}get title(){return t("workflow.parameter")}fillEditor(t){i.get(this.$find("select[name=value]")).setOptions(this.campaignEditor.getParametersOptions(t));const n=t.getData();this.$form.submit(!1),this.$form.get(0).reset(),e.fillFormFromObject(this.formName,n,"")}saveEditor(){return e.formToObject(this.formName)}alwaysReadonly(e){return this.campaignEditor.isSplitParameterNode(e)}}AGN.Lib.WM.ParameterNodeEditor=n}(),function(){const e=AGN.Lib.WM.EditorsHelper,i=AGN.Lib.WM.Definitions;class n extends AGN.Lib.WM.RecipientTransferEditor{constructor(e,t){super(e),this.submitWorkflowForm=t}get formName(){return"importForm"}get title(){return t("auto_import")}get $editor(){return $("#import-editor")}get missingPermissionMsgCode(){return"error.workflow.autoImportPermission"}get dependencyType(){return i.DEPENDENCY_TYPE_AUTO_IMPORT}get inUseMsgCode(){return"error.workflow.autoImportInUse"}get notSelectedMsgCode(){return"error.workflow.noImport"}createNewAutoImport(){e.processForward(i.constants.forwards.AUTO_IMPORT_CREATE.name,"#importexportId",this.submitWorkflowForm)}editAutoImport(){$("#forwardTargetItemId").val(this.selectedId),e.processForward(i.constants.forwards.AUTO_IMPORT_EDIT.name,'form[name="'+this.formName+'"] select[name=importexportId]',this.submitWorkflowForm)}addLinks(){this.selectedId>0?($("#import-editor #editAutoImportLink").show(),$("#import-editor #createAutoImportLink").hide()):($("#import-editor #createAutoImportLink").show(),$("#import-editor #editAutoImportLink").hide())}}AGN.Lib.WM.ImportNodeEditor=n}(),function(){const e=AGN.Lib.WM.EditorsHelper,i=AGN.Lib.WM.Definitions;class n extends AGN.Lib.WM.RecipientTransferEditor{constructor(e,t){super(e),this.submitWorkflowForm=t}get formName(){return"exportForm"}get title(){return t("auto_export")}get $editor(){return $("#export-editor")}get missingPermissionMsgCode(){return"error.workflow.autoExportPermission"}get dependencyType(){return i.DEPENDENCY_TYPE_AUTO_EXPORT}get inUseMsgCode(){return"error.workflow.autoExportInUse"}get notSelectedMsgCode(){return"error.workflow.noExport"}createNewAutoExport(){e.processForward(i.constants.forwards.AUTO_EXPORT_CREATE.name,'form[name="'+this.formName+'"] select[name=importexportId]',this.submitWorkflowForm)}editAutoExport(){$("#forwardTargetItemId").val(this.selectedId),e.processForward(i.constants.forwards.AUTO_EXPORT_EDIT.name,'form[name="'+this.formName+'"] select[name=importexportId]',this.submitWorkflowForm)}addLinks(){this.selectedId>0?($("#export-editor #editAutoExportLink").show(),$("#export-editor #createAutoExportLink").hide()):($("#export-editor #createAutoExportLink").show(),$("#export-editor #editAutoExportLink").hide())}}AGN.Lib.WM.ExportNodeEditor=n}(),(()=>{const e=AGN.Lib.WM.Definitions,i=AGN.Lib.WM.EditorsHelper,n=AGN.Lib.WM.NodeTitleHelper;class o extends AGN.Lib.WM.NodeEditor{constructor(e){super(),this.safeToSave=!0,this._submitWorkflowForm=e}get formName(){return"archiveNodeForm"}get title(){return t("workflow.mailing.archive")}get archiveSelectSelector(){return`#${this.formName} #settings_general_campaign`}get archiveSelect(){return AGN.Lib.Select.get(this.$archiveSelect)}get $archiveSelect(){return $(this.archiveSelectSelector)}createNewArchive(){const t=this.#$i();AGN.Lib.Confirm.request($.get(AGN.url(e.constants.forwards.ARCHIVE_CREATE.url),{workflowId:e.workflowId,workflowForwardParams:t})).done(({archiveId:n,archiveName:o})=>{this.#Gi(n,o),this.archiveSelect.selectOption(n),i.saveCurrentEditorWithUndo(),0===e.workflowId?_.defer(()=>{this._submitWorkflowForm(!1,{forwardParams:t,forwardTargetItemId:n})}):AGN.Lib.Messages.defaultSaved()})}#$i(){const e={nodeId:i.curEditingNode.getId()};return Object.entries(e).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`).join(";")}#Gi(e,t){this.archiveSelect.addOption(e,t),n.addArchiveName(e,t)}fillEditor(e){const t=e.getData();this.$form.submit(!1),this.$form.get(0).reset(),i.fillFormFromObject(this.formName,t,""),this.isValid()}saveEditor(){return i.formToObject(this.formName)}}AGN.Lib.WM.ArchiveNodeEditor=o})(),function(){const e=AGN.Lib.WM.EditorsHelper,i=AGN.Lib.WM.Snippets;class n extends AGN.Lib.WM.NodeEditor{constructor(e){super(),this.editor=e,this.safeToSave=!0}get formName(){return"splitNodeForm"}get title(){return t("split.mailing")}fillEditor(t){const i=t.getData();this.$form.submit(!1),this.$form.get(0).reset(),e.fillFormFromObject(this.formName,i,""),this.isValid()}saveEditor(){const t=e.formToObject(this.formName),i=e.curEditingNode,o=n.getSplitPortions(i.data.splitType),r=n.getSplitPortions(t.splitType);return o.length===r.length?this.#Bi(i,r):this.#Hi(i,t.splitType),t}#Hi(t,n){const o={x:t.x,y:t.y},r=e.getNodesByIncomingConnections(t);this.editor.deleteNode(t),i.createSplitSample(n,this.editor.gridBackgroundShown,(e,t)=>{const i=e.filter(e=>e.isSplitNode)[0],n=r.map(e=>({source:e,target:i}));this.editor.newSnippet(e,[...t,...n],o)})}#Bi(e,t){this.editor.getSplitParameterNodes(e).forEach((e,i)=>this.editor._setParameterNodesValue([e],t[i]))}static getSplitPortions(e){return e.match(/.{1,2}/g).map(e=>parseInt(e,10))}}AGN.Lib.WM.SplitNodeEditor=n}(),(()=>{const e=AGN.Lib.WM.Definitions,i=AGN.Lib.WM.EditorsHelper;class n extends AGN.Lib.WM.NodeEditor{constructor(e){super(),this.safeToSave=!0,this.mailingEditorBase=e}get formName(){return"mailingForm"}get title(){return t("workflow.defaults.mailing")}get $editor(){return $("#mailing-editor")}fillEditor(e){this.$form.submit(!1),this.$form.get(0).reset(),i.fillFormFromObject(this.formName,e.getData(),""),this.mailingEditorBase.fillEditorBase(e)}createNewMailing(){this.mailingEditorBase.createNewMailing((e,t)=>{this.mailingEditorBase.node.setFilled(!0);const i=this.mailingEditorBase.mailingSelect();i.addOption(e,t),i.selectOption(e),this.mailingEditorBase.setSelectMailingOptions(e)})}editMailing(){this.mailingEditorBase.editMailing(e.constants.forwards.MAILING_EDIT.name)}saveEditor(){return this.mailingEditorBase.setNodeFields(),i.formToObject(this.formName)}saveWithCheckStatus(){this.mailingEditorBase.showSecurityQuestion()&&i.saveCurrentEditorWithUndo(this.mailingEditorBase)}copyMailing(){this.mailingEditorBase.copyMailing(e.constants.forwards.MAILING_COPY.name)}save(){this.mailingEditorBase.validateEditor(()=>this.saveWithCheckStatus())}}AGN.Lib.WM.MailingNodeEditor=n})(),function(){class e extends AGN.Lib.WM.MailingNodeEditor{constructor(e){super(e),this.safeToSave=!1}get formName(){return"datebasedMailingForm"}get title(){return t("workflow.mailing.date_based")}get $editor(){return $("#datebased_mailing-editor")}}AGN.Lib.WM.DateBasedMailingNodeEditor=e}(),function(){class e extends AGN.Lib.WM.MailingNodeEditor{constructor(e){super(e),this.safeToSave=!1}get formName(){return"actionbasedMailingForm"}get title(){return t("workflow.mailing.action_based")}get $editor(){return $("#actionbased_mailing-editor")}}AGN.Lib.WM.ActionBasedMailingNodeEditor=e}(),(()=>{const e=AGN.Lib.WM.EditorsHelper,i=AGN.Lib.Messages,n=AGN.Lib.WM.Definitions;class o extends AGN.Lib.WM.NodeEditor{constructor(e,t,i){super(),this.safeToSave=!1,this.disableFollowup=i,this.baseMailingEditorBase=e,this.followupMailingEditorBase=t}get formName(){return"followupMailingForm"}get title(){return t("workflow.mailing.followup")}fillEditor(t){this.followupMailingEditorBase.fillEditorBase(t),this.baseMailingEditorBase.fillEditorBase(t),this.$form.submit(!1),this.$form.get(0).reset(),e.fillFormFromObject(this.formName,t.getData(),""),this.disableFollowup&&(i.warn("error.workflow.followupPermission"),this.baseMailingEditorBase.disableInputs())}createNewMailing(){this.#zi(),this.followupMailingEditorBase.createNewMailing((e,t)=>{this.baseMailingEditorBase.node.setFilled(!0);const i=this.followupMailingEditorBase.mailingSelect();i.addOption(e,t),i.selectOption(e),this.followupMailingEditorBase.setSelectMailingOptions(e)})}editMailing(){this.#zi(),this.followupMailingEditorBase.editMailing(n.constants.forwards.MAILING_EDIT.name)}copyMailing(){this.#zi(),this.followupMailingEditorBase.copyMailing(n.constants.forwards.MAILING_COPY.name)}#zi(){const e=this.baseMailingEditorBase.node.getData();e.baseMailingId=this.baseMailingEditorBase.mailingId,e.decisionCriterion=this.followupMailingEditorBase.getSelectedDecisionOption().val()}saveEditor(){return this.setNodeFields(),e.formToObject(this.formName)}saveWithCheckStatus(){this.followupMailingEditorBase.showSecurityQuestion()&&e.saveCurrentEditorWithUndo(this.followupMailingEditorBase)}save(){if(this.disableFollowup)return;const e=$(`${this.baseMailingEditorBase.formNameJId} ${this.baseMailingEditorBase.selectNameJId}`),t=$(`${this.followupMailingEditorBase.formNameJId} ${this.followupMailingEditorBase.selectNameJId}`);e.val()>0&&t.val()>0?this.saveWithCheckStatus():i.warn("error.workflow.noMailing")}setNodeFields(){this.baseMailingEditorBase.node.setFilled(parseInt(this.baseMailingEditorBase.mailingId,10)>0&&parseInt(this.followupMailingEditorBase.mailingId,10)>0)}}AGN.Lib.WM.FollowupMailingNodeEditor=o})(),function(){const e=AGN.Lib.WM.MailingSelector,i=AGN.Lib.WM.FieldRulesTable,n=AGN.Lib.WM.EditorsHelper,o=AGN.Lib.Messages,r=AGN.Lib.WM.Definitions;class s extends AGN.Lib.WM.NodeEditor{constructor(t,i){super(),this.editor=t,this.config=i,this.mailingSelector=new e(i.form,i.selectName,i.noMailingOption)}get saveOnOpen(){return!0}get formName(){return"decisionForm"}get title(){return t("workflow.decision")}get $rulesContainer(){return this.$find("#decisionProfileFieldRules")}get $decisionType(){return this.$find('select[name="decisionType"]')}get $decisionCriteria(){return this.$find('select[name="decisionCriteria"]')}fillEditor(e){this.profileFieldMailingId=0;const t=e.getData();this.$form.submit(!1),this.possibleToUseAutoOptimization=this.editor.isAutoOptimizationDecisionAllowed(e),t.profileField&&(t.profileField=t.profileField.toLowerCase()),n.fillFormFromObject(this.formName,t,""),this.mailingSelector.setMailingId(t.mailingId),this.mailingSelector.cleanOptions(1),t.decisionDate||(t.decisionDate=new Date);const o=$("#decision-date-time-inputs");this.checkPresentNodeOfType([r.NODE_TYPE_ACTION_BASED_MAILING,r.NODE_TYPE_DATE_BASED_MAILING])?o.hide():(o.show(),this.$find("#decisionDate").datepicker("setDate",this.dateAsUTC(t.decisionDate)),this.$find("#decisionTime").val(("0"+t.decisionDate.getHours()).slice(-2)+":"+("0"+t.decisionDate.getMinutes()).slice(-2))),this.updateVisibility(),this.updateDateFormatVisibility(),t.decisionType==r.constants.decisionTypeDecision&&t.decisionCriteria==r.constants.decisionReaction&&t.reaction==r.constants.reactionClickedLink&&0!=t.mailingId&&null!=t.mailingId?this.onMailingSelectChange(t.mailingId,t.linkId):n.resetSelect(this.$find('select[name="linkId"]')),this.rulesTable=new i(this.$rulesContainer,t.rules,n.isReadOnlyMode(),this.config.profileFields),this.form.cleanFieldFeedback()}saveEditor(){const e=n.formToObject(this.formName);if(e.decisionCriteria==r.constants.decisionProfileField&&0!=this.profileFieldMailingId&&(e.mailingId=this.profileFieldMailingId),this.profileFieldMailingId=0,null==e.rules&&(e.rules=[]),e.threshold||(e.threshold=""),this.checkPresentNodeOfType([r.NODE_TYPE_ACTION_BASED_MAILING,r.NODE_TYPE_DATE_BASED_MAILING]))e.decisionDate=null;else{e.decisionDate=this.$find("#decisionDate").datepicker("getDate");const t=this.$find("#decisionTime").val();e.decisionDate.setHours(t.substring(0,2)),e.decisionDate.setMinutes(t.substring(3,5))}return e.rules=this.rulesTable.collect(),e}save(){var e=this.$decisionType.val(),i=$("#decisionCriteria").val(),s=this.$find('select[name="mailingId"]').val(),a=this.$find('select[name="linkId"]').val(),l=this.$find('select[name="reaction"]').val(),c=this.$find('input[name="threshold"]').val();if(e==r.constants.decisionTypeDecision&&i==r.constants.decisionReaction&&0==s)o.alert("error.workflow.noMailing");else if(e!=r.constants.decisionTypeDecision||i!=r.constants.decisionReaction||l!=r.constants.reactionClickedLink||0!=a&&null!=a)if(e==r.constants.decisionTypeDecision&&i==r.constants.decisionProfileField){if("true"==this.config.isMailtrackingActive){const e=this.$find("#decisionProfileField");$.trim(e.val())?(this.form.cleanFieldError("profileField"),n.saveCurrentEditorWithUndo()):this.form.showFieldError("profileField",t("fields.required.errors.missing"))}}else if(e==r.constants.decisionTypeAutoOptimization)if(c){var d=parseInt(c,10);d&&d>0?n.saveCurrentEditorWithUndo():o.alert("error.workflow.noValidThreshold")}else n.saveCurrentEditorWithUndo();else n.saveCurrentEditorWithUndo();else o.alert("error.workflow.noLinkSelected")}onTypeChanged(){const e=this.$decisionType,t=e.val();if(!this.possibleToUseAutoOptimization&&t===r.constants.decisionTypeAutoOptimization)return o.alert("error.workflow.autoOptimizationDecisionForbidden"),void e.val(r.constants.decisionTypeDecision);t==r.constants.decisionTypeDecision?(this.hide("#autoOptimizationPanel"),this.show("#decisionPanel")):t==r.constants.decisionTypeAutoOptimization&&(this.hide("#decisionPanel"),this.show("#autoOptimizationPanel")),this.updateVisibilityOfRuleMailingReceived()}onDecisionReactionChanged(){if(this.$find('select[name="reaction"]').val()==r.constants.reactionClickedLink){this.show("#reactionLinkPanel");var e=this.$find('select[name="mailingId"]').val();this.onMailingSelectChange(e,0)}else this.hide("#reactionLinkPanel")}onCriteriaChanged(){const e=this.$decisionCriteria.val();e==r.constants.decisionReaction?(this.hide("#decisionProfileFieldPanel"),this.show("#decisionReactionPanel")):e==r.constants.decisionProfileField&&(this.hide("#decisionReactionPanel"),this.show("#decisionProfileFieldPanel")),this.updateVisibilityOfRuleMailingReceived()}onMailingSelectChange(e,t){var i=this.$find('select[name="linkId"]'),o=parseInt(e,10);o>0?(i.attr("readonly","readonly"),$.ajax({url:AGN.url(`/mailing/ajax/${o}/links.action`),success:function(e){i.empty(),i.append($("<option></option>",{value:"",text:r.EMPTY_OPTION_PLACEHOLDER})),$.each(e,function(e,t){i.append($("<option></option>",{value:t.id,text:t.url}))}),i.removeAttr("readonly"),null!=t&&null!=t?(i.val(t),n.initSelectWithValueOrChooseFirst(i,t)):n.initSelectWithFirstValue(i)}})):i.empty()}onProfileFieldChanged(){this.updateDateFormatVisibility(),this.rulesTable?.onProfileFieldChanged()}updateDateFormatVisibility(){const e=this.$find('select[name="profileField"]').val(),t=this.config.profileFields[e];this.toggle("#decisionDateFormat",t&&t.toLowerCase()==r.FIELD_TYPE_DATE)}updateVisibility(){this.onTypeChanged(),this.onDecisionReactionChanged(),this.onCriteriaChanged()}updateVisibilityOfRuleMailingReceived(){const e=this,t=this.$decisionType.val();if(t==r.constants.decisionTypeAutoOptimization)this.hide("#ruleMailingReceivedWrapper");else if(t==r.constants.decisionTypeDecision){var i=this.$decisionCriteria.val();i==r.constants.decisionReaction?this.hide("#ruleMailingReceivedWrapper"):i==r.constants.decisionProfileField&&(this.hide("#ruleMailingReceivedWrapper"),n.forEachPreviousNode(function(t){if(r.NODE_TYPES_MAILING.includes(t.getType())){var i=t.getData();return this.profileFieldMailingId=i.mailingId,e.show("#ruleMailingReceivedWrapper"),!1}}))}}checkPresentNodeOfType(e){return n.getNodesByTypes(e).length>0}}AGN.Lib.WM.DecisionNodeEditor=s}(),function(){class e extends AGN.Lib.WM.MailingNodeEditor{constructor(e){super(e),this.safeToSave=!1}get formName(){return"smsMailingForm"}get title(){return t("workflow.mailing.mediatype_sms")}get $editor(){return $("#mailing_mediatype_sms-editor")}}AGN.Lib.WM.SmsMailingNodeEditor=e}(),function(){class e extends AGN.Lib.WM.MailingNodeEditor{constructor(e){super(e),this.safeToSave=!1}get formName(){return"postMailingForm"}get title(){return t("workflow.mailing.mediatype_post")}get $editor(){return $("#mailing_mediatype_post-editor")}}AGN.Lib.WM.PostMailingNodeEditor=e}(),function(){const e=AGN.Lib.WM.Definitions,i=AGN.Lib.WM.EditorsHelper,n=AGN.Lib.Messages;class o extends AGN.Lib.WM.NodeEditor{constructor(){super(),this.panelIds=["fixedDeadlinePanel","delayDeadlinePanel"],this.timeUnitIds=["deadlineTimeUnitMinute","deadlineTimeUnitHour","deadlineTimeUnitDay","deadlineTimeUnitWeek","deadlineTimeUnitMonth"]}get saveOnOpen(){return!0}get formName(){return"deadlineForm"}getDefaultDelayData(t){return t===e.constants.deadlineTypeDelay&&this.isPrecededByImportIcon?{timeUnit:e.constants.deadlineTimeUnitHour,delayValue:e.constants.defaultImportDelayLimit}:{}}get title(){return t("workflow.deadline.title")}get deadlineType(){return this.$find('[name="deadlineType"]').val()}get timeUnit(){return this.$find('select[name="timeUnit"]').val()}fillEditor(e){const t=e.getData();this.isPrecededByImportIcon=this.checkPrecededByImportIcon(e),this.$form.submit(!1),this.$find("#deadlineDate").datepicker("setDate",this.dateAsUTC(t.date||new Date)),this.fillDelayData(t),this.$find("#time").val(("0"+t.hour).slice(-2)+":"+("0"+t.minute).slice(-2))}fillDelayData(e){this.$form.get(0).reset();const t=this.deadlineType,n=this.getDefaultDelayData(t);i.fillFormFromObject(this.formName,e,"",n),this.updateVisibility();const o=e.delayValue||n.delayValue;i.initSelectWithValueOrChooseFirst(this.$find('[name="delayValue"]'),o)}saveEditor(){const e=i.formToObject(this.formName),t=this.$find("#time").val();return e.date=this.$find("#deadlineDate").datepicker("getDate"),e.hour=t.substring(0,2),e.minute=t.substring(3,5),e}updateVisibility(){const t=this.$find("#deadline-type-box");let i=this.deadlineType;if(this.checkPresentNodeOfType([e.NODE_TYPE_ACTION_BASED_MAILING,e.NODE_TYPE_DATE_BASED_MAILING])?(t.hide(),this.$find("#typeDelay").prop("selected",!0),i=e.constants.deadlineTypeDelay):t.show(),i===e.constants.deadlineTypeDelay){switch(this.switchPanelsVisibility("delayDeadlinePanel"),this.switchTimeContainerVisibility(!1),this.timeUnit){case e.constants.deadlineTimeUnitMinute:this.switchTimeUnitsVisibility("deadlineTimeUnitMinute");break;case e.constants.deadlineTimeUnitHour:this.switchTimeUnitsVisibility("deadlineTimeUnitHour");break;case e.constants.deadlineTimeUnitDay:this.switchTimeUnitsVisibility("deadlineTimeUnitDay"),this.switchTimeContainerVisibility(!0),$("#deadlineTimeHelp").removeAttr("style");break;case e.constants.deadlineTimeUnitWeek:this.switchTimeUnitsVisibility("deadlineTimeUnitWeek");break;case e.constants.deadlineTimeUnitMonth:this.switchTimeUnitsVisibility("deadlineTimeUnitMonth")}this.$find('input[name="useTime"]').show()}else i===e.constants.deadlineTypeFixedDeadline&&(this.switchPanelsVisibility("fixedDeadlinePanel"),this.switchTimeContainerVisibility(!0),this.hide("#deadlineTimeHelp"),this.$find('input[name="useTime"]').hide())}switchPanelsVisibility(e){const t=this;this.panelIds.forEach(function(i){i!==e&&t.hide(`#${i}`)}),this.show(`#${e}`)}switchTimeUnitsVisibility(e){const t=this;this.timeUnitIds.forEach(function(i){i!==e&&(t.hide(`#${i}`),$("#"+i+" select").removeAttr("name"))}),this.show(`#${e}`),$(`#${e} select`).attr("name","delayValue")}switchTimeContainerVisibility(e){this.toggle("#deadlineTimeContainer",e)}save(){let t=!0;this.isPrecededByImportIcon&&this.deadlineType===e.constants.deadlineTypeDelay&&(this.timeUnit===e.constants.deadlineTimeUnitMinute||this.timeUnit===e.constants.deadlineTimeUnitHour&&$("#deadlineTimeUnitHour select").val()<e.constants.defaultImportDelayLimit)&&(t=!1),t?super.save():n.warn("error.workflow.deadlineIsTooShortForImport")}onTimeChanged(){this.deadlineType==e.constants.deadlineTypeDelay&&this.timeUnit==e.constants.deadlineTimeUnitDay&&this.$find('input[name="useTime"]').prop("checked",!0)}checkPresentNodeOfType(e){return i.getNodesByTypes(e).length>0}checkPrecededByImportIcon(t){return i.getNodesByIncomingConnections(t).some(t=>e.NODE_TYPE_IMPORT==t.getType())}}AGN.Lib.WM.DeadlineNodeEditor=o}(),function(){const e=AGN.Lib.WM.Definitions,i=AGN.Lib.WM.EditorsHelper,n=AGN.Lib.Select;AGN.Lib.Messages;class o extends AGN.Lib.WM.NodeEditor{constructor(e){super(),this.submitWorkflowForm=e,this.targetSelector="#recipientTargetSelect",this.altgSelector="#recipientAltgSelect",this.safeToSave=!0}get formName(){return"recipientForm"}get $targetSelect(){return $(this.targetSelector)}get targetSelect(){return n.get(this.$targetSelect)}get altgSelect(){return new n($(this.altgSelector))}createNewTarget(){i.processForward(e.constants.forwards.TARGET_GROUP_CREATE.name,this.targetSelector,this.submitWorkflowForm)}editTarget(t){$("#forwardTargetItemId").val(t),i.processForward(e.constants.forwards.TARGET_GROUP_EDIT.name,this.targetSelector,this.submitWorkflowForm)}get title(){return t("workflow.recipient")}fillEditor(t){var n=t.getData();e.constants.isAltgExtended||e.constants.accessLimitTargetId>0&&(n.targets=_.union([e.constants.accessLimitTargetId],n.targets),n.targetsOption="ALL_TARGETS_REQUIRED"),this.$form.submit(!1),this.$form.get(0).reset(),i.fillFormFromObject(this.formName,n,""),this.targetSelect.selectValue(n.targets),e.constants.isAltgExtended&&this.altgSelect.selectValue(n.altgs),this.isValid()}saveEditor(){var t=i.formToObject(this.formName);return t.targets=this.targetSelect.getSelectedValue(),e.constants.isAltgExtended&&(t.altgs=this.altgSelect.getSelectedValue()),t}}AGN.Lib.WM.RecipientNodeEditor=o}(),AGN.Lib.MailingContent.Def={get $dynTagsList(){return $("#dyn-tags-container")},get $dynTagsMobileSelect(){return $("#mobile-dyn-tags-list")},get $dynTagSettings(){return $("#dyn-tag-settings")},get htmlDyntagNames(){return this._htmlDyntagNames||[]},set htmlDyntagNames(e){this._htmlDyntagNames=e},get smsDyntagNames(){return this._smsDyntagNames||[]},set smsDyntagNames(e){this._smsDyntagNames=e},get availableTargetGroups(){return this._availableTargetGroups||[]},set availableTargetGroups(e){this._availableTargetGroups=e},get isEditableMailing(){return this._isEditableMailing},set isEditableMailing(e){this._isEditableMailing=e},get isContentGenerationAllowed(){return this._isContentGenerationAllowed},set isContentGenerationAllowed(e){this._isContentGenerationAllowed=e}},(()=>{class e{constructor(t){void 0===e.uniqueIdCounter&&(e.uniqueIdCounter=0),this.uniqueId=++e.uniqueIdCounter,this.id=t.id,this.index=void 0===t.dynOrder?t.index:t.dynOrder,this.content=void 0===t.dynContent?t.content:t.dynContent,this.targetId=void 0===t.targetID?t.targetId:t.targetID}get lightWeight(){const{id:e,content:t,targetId:i}=this;return{id:e,content:t,targetId:i}}}AGN.Lib.MailingContent.DynContent=e})(),(()=>{const e=AGN.Lib.MailingContent.DynContent,t=AGN.Lib.MailingContent.Def,i=AGN.Lib.Messages,n=AGN.Lib.Template,o=AGN.Lib.Select;class r{constructor(t){this.id=t.id||0,this.name=t.name,this.interestGroup=void 0===t.interestValue?t.interestGroup:t.dynInterestGroup,this.contentBlocks=t.contentBlocks?t.contentBlocks.map(t=>new e(t)):Object.entries(t.dynContent).map(t=>new e(t[1])),this.markAsClean()}get defaultContentBlock(){return{id:0,index:0,targetId:0,content:""}}get isDirty(){return this.modified}get modified(){return(!!this.initState.contentBlocks.length||!this.isEmpty||1!==this.contentBlocks.length||0!==this.contentBlocks[0].targetId)&&!_.isEqual(this.initState,this.lightWeight)}get isHtmlVersionDynTag(){return"HTML-Version"===this.name}get isHtmlDynTag(){return t.htmlDyntagNames?.includes(this.name)}get lightWeight(){return{id:this.id,interestGroup:this.interestGroup,contentBlocks:this.contentBlocks.map(e=>e.lightWeight)}}get $btn(){return $(`.dyn-tag[data-dyn-tag="${this.id}"]`)}get isEmpty(){return this.contentBlocks.every(e=>!e.content)}get isValid(){const e=this.#Wi();return e?.forEach(e=>i.alert(e)),!e?.length}get templateOpts(){return{dynTagName:this.name,isFullHtmlTags:this.isHtmlVersionDynTag,showHTMLEditor:this.isHtmlDynTag,usedInSmsContent:t.smsDyntagNames?.includes(this.name),isEditableMailing:t.isEditableMailing||t.isTextModulesPage,isContentGenerationAllowed:t.isContentGenerationAllowed}}applyWysiwygInitialChanges(){const e=t.editor.currentContentBlock;e.initWysiwygChangesApplied||(t.editor.applyLastChanges(!0),this.initState.contentBlocks.length&&(this.initState.contentBlocks.find(t=>t.id===e.id).content=e.content),e.initWysiwygChangesApplied=!0,this.afterInitialWysiwygChangesApplied())}afterInitialWysiwygChangesApplied(){}markAsClean(){this.initState=_.cloneDeep(this.lightWeight)}getContentBlockByTargetId(e){return this.contentBlocks.filter(t=>t.targetId===e)[0]}getContentBlockById(e){return this.contentBlocks.filter(t=>t.uniqueId===e)[0]}createNewContentBlock(t=0){const i=new e(this.defaultContentBlock);return i.index=this.contentBlocks.length,i.targetId=t,this.contentBlocks.push(i),this.recalculateIndexes(),i}hasEmptyContent(){return!this.contentBlocks.length||this.contentBlocks.every(e=>""===e.content)}getUsedTargetGroups(){return this.contentBlocks.map(e=>e.targetId)}changeTargetGroup(e,t){const i=this.getContentBlockById(e);return i.targetId=t,i}changeContent(e,t){const i=this.getContentBlockById(e);return i.content=t||"",i}changeOrder(e){this.contentBlocks=e.map(function(e){return function(t){return e.getContentBlockById(parseInt(t))}}(this)),this.recalculateIndexes()}remove(e){const t=this.getContentBlockById(e),i=this.contentBlocks.indexOf(t);i>-1&&(this.contentBlocks.splice(i,1),this.recalculateIndexes())}recalculateIndexes(){this.contentBlocks.forEach((e,t)=>e.index=t+1)}#Wi(){const e=[],t=this.contentBlocks.map(e=>e.targetId);return new Set(t).size!==t.length&&e.push("mailing.validation.target_group_duplicated"),t.includes(0)&&0!==_.last(t)&&e.push("mailing.validation.all_recipients_not_last"),this.isHtmlDynTag&&this.contentBlocks.find(e=>this.#Vi(e))&&e.push("fields.error.illegal_script_element"),e}#Vi(e){return(new DOMParser).parseFromString(e,"text/html").querySelector("script")}updatePreview(){this.$btn.html(n.text("dyn-tag-preview",this.#ji())),t.$dynTagsMobileSelect.find(`option[data-id="${this.id}"]`).attr("data-dyn-tag-data",JSON.stringify(this.#ji()))}#ji(){return{name:this.name,content:this.contentBlocks?.[0]?.content,hasEmptyContent:this.hasEmptyContent(),targets:this.getUsedTargetGroups().map(e=>this.#Ui(e)).join("; ")}}#Ui(e){return(t.availableTargetGroups.find(t=>t.id===e)||t.availableTargetGroups[0]).targetName}markActive(){o.get(t.$dynTagsMobileSelect).selectValue(this.id),$(".dyn-tag").removeClass("active"),$(`.dyn-tag[data-dyn-tag="${this.id}"]`).addClass("active")}static create(e){return"HTML-Version"===(void 0===e.dynName?e.name:e.dynName)?new AGN.Lib.MailingContent.HtmlVersionDynTag(e):new r(e)}}AGN.Lib.MailingContent.DynTag=r})(),(()=>{const e=AGN.Lib.MailingContent.DynTag,t=AGN.Lib.Helpers,i=AGN.Lib.MailingContent.Def;AGN.Lib.MailingContent.HtmlVersionDynTag=class extends e{constructor(e){super(e)}afterInitialWysiwygChangesApplied(){const e=i.editor.currentContentBlock;window.Jodit&&Jodit.instances.content?.events.on("finishedCleanHTMLWorker",()=>setTimeout(()=>{Jodit.instances.content.userInputHappened||e.isWysiwygHtmlCleanerChangesApplied||this.#Yi()},0))}#Yi(){const e=i.editor.currentContentBlock;e.isWysiwygHtmlCleanerChangesApplied||(i.editor.applyLastChanges(!0),this.initState.contentBlocks.find(t=>t.id===e.id).content=e.content,e.isWysiwygHtmlCleanerChangesApplied=!0)}get isDirty(){if(!super.isDirty)return!1;const e=_.omit(this.initState,"contentBlocks"),t=_.omit(this.lightWeight,"contentBlocks");return!_.isEqual(e,t)||!this.#qi(this.initState.contentBlocks,this.lightWeight.contentBlocks)}#qi(e,t){return e.length===t.length&&_.every(e,(e,i)=>this.#Ki(e,t[i]))}#Ki(e,t){const i=_.pick(e,["id","targetId"]),n=_.pick(t,["id","targetId"]);return _.isEqual(i,n)&&this.#Xi(e.content,t.content)}#Xi(e,i){if(!t.isHtml(e)&&t.isHtml(i))return _.isEqual(this.#Zi(e),this.#Zi(i));const n=e=>e.replace(/<body([^>]*)\sspellcheck="false"([^>]*)>/gi,"<body$1$2>").replace(/\s+/g," ").replace(/>\s+</g,"><").trim();return _.isEqual(n(e),n(i))}createNewContentBlock(e=0){const t=super.createNewContentBlock(e);return this.initState.contentBlocks.push(_.cloneDeep(t)),t}#Zi(e){return $("<div>").html(e).text().trim()}}})(),(()=>{const e=AGN.Lib.Messaging;AGN.Lib.MailingContent.AiEditor=class{constructor(e){this.dynTagEditor=e}get generatedText(){return $("[data-ai-result]").val()?.trim()}isAiTextGeneratedAndNotApplied(){const e=$("#tab-content-ai-text-generation").is(":visible")&&this.generatedText;if(e){const e=this.dynTagEditor.currentDynTag?.name;this.showApplyGeneratedTextModal(e)}return e}showApplyGeneratedTextModal(e){AGN.Lib.Confirm.from("mailing-ai-text-generation-apply-question",{dynTagName:e}).then(()=>this.applyAItextAndSave())}applyAItextAndSave(){this.dynTagEditor.currentContentBlock&&this.dynTagEditor.currentDynTag.changeContent(this.dynTagEditor.currentContentBlock.uniqueId,this.generatedText),e.send("mailing-content:applyGeneratedText",$("#ai-apply-text-btn")),this.dynTagEditor.saveDynTags()}}})(),(()=>{const e=AGN.Lib.Template,t=AGN.Lib.Select,i=".target-row";AGN.Lib.MailingContent.TargetsManager=class{constructor(e){this.editor=e}get sortableOptions(){return{scroll:!1,handle:".target-row-handle",cursor:"move",items:`${i}:not(:has(option[value="0"][selected]))`,stop:this.updateSortable}}init(){this.$targetsOrder=$("#targets-order").sortable(this.sortableOptions),this.editor.currentDynTag.contentBlocks.forEach(e=>this.addTargetRow(e)),this.updateSortable(),this.controlAddTargetBtn()}changeTarget(e){this.editor.currentDynTag.changeTargetGroup(this.getContentBlockIdFromTargetRow(e),parseInt(e.val())),this.disableUsedTargetOptionsInOrder(),this.moveAllRecipientsTargetToEnd(),this.editor.updateTargetsOptions(),this.editor.currentDynTag.updatePreview()}updateSortable(){this.updateTargetsOrder(),this.editor.updateTargetsOptions(),this.disableUsedTargetOptionsInOrder(),this.moveAllRecipientsTargetToEnd()}updateSortableTargetIndex(e){const t=this.editor.currentDynTag.getContentBlockById(parseInt(e.attr("id"))).index;e.find(".input-group-text").text(t)}updateTargetsOrder(){const e=this.$targetsOrder.find(i).toArray().map(e=>$(e).attr("id"));this.editor.currentDynTag.changeOrder(e),this.$targetsOrder.find(i).each((e,t)=>this.updateSortableTargetIndex($(t)))}deleteContentBlock(e){const t=e.closest(i),n=this.getContentBlockIdFromTargetRow(t);this.isContentBlockUnderEdit(n)&&(this.editor.currentContentBlock=void 0,this.editor.selectContentBlock(this.getContentBlockToReplaceRemoved(t))),this.editor.currentDynTag.remove(n),t.remove(),this.updateSortable(),this.editor.currentDynTag.updatePreview(),this.controlAddTargetBtn()}getContentBlockIdFromTargetRow(e){return parseInt(e.closest(i).attr("id"))}getContentBlockToReplaceRemoved(e){const t=e.next(i).length?e.next(i):e.prev(i);return t.find(".input-group-text").addClass("active").removeClass("disabled"),this.editor.currentDynTag.getContentBlockById(this.getContentBlockIdFromTargetRow(t))}controlAddTargetBtn(){const e=t.get(this.$targetsOrder.find("select:first"));$('[data-action="add-content-block"]').toggle(this.getUsedTargets().length<e.$options.length)}getUsedTargets(){return this.$targetsOrder.find("select").map((e,t)=>$(t).val())?.toArray()}disableUsedTargetOptionsInOrder(){const e=this.getUsedTargets();_.each(this.$targetsOrder.find("select"),i=>t.get($(i)).disableOptions(e))}addTargetGroup(){const e=this.editor.currentDynTag.createNewContentBlock(),i=this.getUsedTargets(),n=t.get(this.addTargetRow(e).find("select"));return n.disableOptions(i,!0),this.disableUsedTargetOptionsInOrder(),e.targetId=parseInt(n.getSelectedValue()),this.moveAllRecipientsTargetToEnd(),this.editor.updateTargetsOptions(),this.editor.currentDynTag.updatePreview(),this.controlAddTargetBtn(),e}moveAllRecipientsTargetToEnd(){this.$targetsOrder.find('select option[value="0"]:selected').closest(i).appendTo(this.$targetsOrder),this.updateTargetsOrder()}addTargetRow(t){const i=e.dom("mailing-content-target-template",{...t,isCurrent:this.isContentBlockUnderEdit(t.uniqueId)});return this.$targetsOrder.append(i),this.addUpdateSelectedAttrOnChangeHandler(i),AGN.Lib.CoreInitializer.run("select",i),i}addUpdateSelectedAttrOnChangeHandler(e){e.find("select").on("change, change.select2",function(){const e=$(this).val();$(this).find("option").each((t,i)=>$(i).attr("selected",$(i).val()===e?"selected":null))})}isContentBlockUnderEdit(e){return this.editor.currentContentBlock.uniqueId===e}}})(),(()=>{const e=AGN.Lib.MailingContent.TargetsManager,t=AGN.Lib.MailingContent.AiEditor,i=AGN.Lib.Template,n=AGN.Lib.Select,o=AGN.Lib.Messaging,r=AGN.Lib.MailingContent.Def;AGN.Lib.MailingContent.DynTagEditor=class{constructor(n){r.editor=this,r.isTextModulesPage||o.resubscribe("wysiwyg-shown",()=>this.applyWysiwygInitialChanges()),this.$el=i.dom("content-editor-template",n.templateOpts),r.$dynTagSettings.html(this.$el).on("tile:show",()=>this.resizeAceIfShown()),this.currentDynTag=n,this.currentContentBlock=void 0,this.currentDynTag.currentContentBlock=this.currentContentBlock,this.selectContentBlock(this.currentDynTag.contentBlocks[0]||this.currentDynTag.createNewContentBlock()),AGN.runAll(this.$el),this.#Ji(),this.targetsManager=new e(this),this.aiEditor=new t(this),AGN.Lib.Controller.init(r.$dynTagSettings)}get $interestGroup(){return $('[data-action="change-interest-group"]')}get aceEditor(){return AGN.Lib.Editor.get($("#content"))}get isAceTabActive(){return this.$activeTab.is(this.$aceTab)}get isWysiwygTabActive(){return this.$activeTab.is(this.$wysiwygTab)}get $aceTab(){return $("#tab-content-html")}get $wysiwygTab(){return $("#tab-content-wysiwyg")}get $activeTab(){return $(r.$dynTagSettings.find("[data-toggle-tab].active").data("toggle-tab"))}resizeAceIfShown(){this.isAceTabActive&&this.aceEditor?.resize()}applyWysiwygInitialChanges(){window.Jodit?setTimeout(()=>this.currentDynTag.applyWysiwygInitialChanges(),200):CKEDITOR.instances.content?.on("instanceReady",()=>setTimeout(()=>{this.currentDynTag.applyWysiwygInitialChanges()},200))}#Ji(){AGN.Lib.CoreInitializer.run("select",this.$interestGroup.val(this.currentDynTag.interestGroup))}applyLastChanges(e){this.setContentFromEditorToBlock(),e||this.$el.trigger("tile:hide")}selectContentBlock(e){this.setContentFromEditorToBlock(),this.setEditorsContent(void 0===e?"":e.content),this.currentContentBlock=e,this.updateTargetsOptions()}updateTargetsOptions(){const e=i.dom("mailing-content-select-template",{dynTag:this.currentDynTag});n.get($('[data-action="switch-content-block"]')).replaceWith(e),$("#content-block-index").text(this.currentContentBlock.index),this.currentContentBlock&&n.get(e).selectValue(this.currentContentBlock.uniqueId)}setEditorsContent(e){this.$activeTab.exists()||$(r.$dynTagSettings.find("[data-toggle-tab]:first").addClass("active").data("toggle-tab")),this.$el.trigger("tile:hide"),this.isWysiwygTabActive?this.$el.find(".js-wysiwyg").val(e):this.aceEditor.val(e),this.$el.trigger("tile:show")}getContentFromEditors(){const e=$("#tab-content-wysiwyg"),t=$("#contentEditor");return $("#tab-content-ai-text-generation").is(":visible")?e.exists()?$("#content").val():this.aceEditor.val():e.is(":visible")?window.Jodit?Jodit.instances.content.value.replace(/[\r\n]?\s*<style[^>]*class=["']?jodit[^>]*>[\s\S]*?<\/style>/gi,""):CKEDITOR.instances.content.getData():t.is(":visible")?this.aceEditor.val():void 0}setContentFromEditorToBlock(){if(!this.currentContentBlock)return;const e=this.getContentFromEditors();void 0!==e&&(this.currentDynTag.changeContent(this.currentContentBlock.uniqueId,e),this.currentDynTag.updatePreview())}}})(),(()=>{const e=AGN.Lib.AutoSave,t=AGN.Lib.MailingContent.DynContent;AGN.Lib.MailingContent.Storage=class{constructor(t){this.blocksManager=t,e.initialize(`mailing/${this.blocksManager.config.mailingId}/content-blocks`,()=>this.#Qi(),e=>this.#en(e),e=>this.#tn(e))}#Qi(){return this.blocksManager.editor.applyLastChanges(),this.blocksManager.dynTags.filter(e=>e.modified).map(e=>e.lightWeight)}#tn(e){e.forEach(e=>{const i=this.blocksManager.getDynTagById(e.id);i.interestGroup=e.interestGroup,i.contentBlocks=e.contentBlocks.map(e=>new t(e))}),this.blocksManager.editor.$el.trigger("tile:hide"),this.blocksManager.switchDynTag(e[0].id)}#en(e){return e.some(t=>{const i=this.blocksManager.getDynTagById(t.id);return this.#in(i,e)})}#in(e,t){return t.interestGroup!==e.interestGroup||e.contentBlocks.length!==t.contentBlocks.length||e.contentBlocks.some(e=>{const i=t.getContentBlockByTargetId(e.targetId);return!i||i.content!==e.content})}}})(),(()=>{const e=AGN.Lib.MailingContent.Def,i=AGN.Lib.MailingContent.DynTagEditor,n=AGN.Lib.MailingContent.Storage,o=AGN.Lib.MailingContent.DynTag,r=AGN.Lib.Template,s=AGN.Lib.Form;AGN.Lib.MailingContent.BlocksManager=class{constructor(e){this.config=e,this.dynTags=Object.entries(e.dynTags).map(e=>o.create(e[1]),[]),this.interestGroups=[{column:"",shortname:t("mailing.default.interest_group_name")},..._.cloneDeep(e.interestGroupList)],this.drawDynTagsList(),this.storage=new n(this),this.selectDynTagOnLoad()}get modified(){return this.dynTags.some(e=>e.modified)}get isDirty(){return this.dynTags.some(e=>e.isDirty)}get saveUrl(){return`/mailing/content/${this.config.mailingId}/save.action`}drawDynTagsList(){e.$dynTagsList.append(this.dynTags.map(this.generateDynTagBtn).join("")),this.dynTags.forEach(e=>e.updatePreview())}generateDynTagBtn(e){return r.text("dyn-tag-btn",{id:e.id})}selectDynTagOnLoad(){e.$dynTagsList.scrollTop(this.scrollTopBeforeSave||0),this.switchDynTag(this.editor?.currentDynTag?.id||this.dynTags?.[0]?.id||0)}switchDynTagVisually(e){const t=this.getDynTagById(e);this.editor=new i(t),this.displayContentBadges(),t.markActive()}cantSwitchDynTag(e){return!this.editor.currentDynTag?.isValid||this.editor.currentDynTag.id===e}switchDynTag(e){e&&this.switchDynTagVisually(e)}switchContentBlock(e){if(!this.editor.currentDynTag.isValid)return;const t=this.editor.currentDynTag.getContentBlockById(e);this.editor.selectContentBlock(t)}markAsClean(){this.dynTags.forEach(e=>e.markAsClean())}getDynTagById(e){return this.dynTags.filter(t=>t.id===e)[0]}search(t){e.$dynTagsList.find(".dyn-tag").each(function(){const e=$(this),i=e.find("small").text();e.toggle(i.toLowerCase().includes(t))}),$("[data-blocks-not-found-msg]").toggle(!e.$dynTagsList.find(".dyn-tag:visible").exists()),t.length>0&&e.$dynTagsList.scrollTop(0)}setContentBadgesInContainer(e){e.find(".dyn-tag").each((e,t)=>this.setContentBadge($(t)))}displayContentBadges(){const t=this;this.setContentBadgesInContainer(e.$dynTagsList),e.$dynTagsMobileSelect.on("select2:open",function(){const i=$("#select2-mobile-dyn-tags-list-results")[0],n=new MutationObserver(()=>$(i).children().each((e,i)=>t.setContentBadgesInContainer($(i))));n.observe(i,{childList:!0}),e.$dynTagsMobileSelect.on("select2:close",()=>n.disconnect())})}setContentBadge(e){const t=parseInt(e.val()),i=this.getDynTagById(t).isEmpty;e.find(".icon-file-alt").toggleClass("text-primary",!i)}save(){this.dynTags.some(e=>!e.isValid)||this.editor.aiEditor.isAiTextGeneratedAndNotApplied()||(this.editor.applyLastChanges(!0),this.saveDynTags())}saveDynTags(){this.scrollTopBeforeSave=e.$dynTagsList.scrollTop();const t=JSON.stringify(this.#nn());$.post({url:AGN.url(this.saveUrl),contentType:"application/json",data:t}).done(e=>{AGN.Lib.JsonMessages(e,!0),s.get($("#preview-form")).submit(),this.markAsClean()})}#nn(){const e=_.cloneDeep(this.dynTags.filter(e=>e.modified));return e.forEach(e=>e.contentBlocks.forEach(t=>{t.content||e.remove(t.uniqueId)})),e}}})(),(()=>{const e=AGN.Lib.MailingContent.BlocksManager;AGN.Lib.MailingContent.EmcTextModulesManager=class extends e{constructor(e){super(e)}get saveUrl(){return`/layoutbuilder/template/${this.config.templateId}/textModules.action`}}})(),AGN.Lib.Controller.new("mailing-content-controller",function(){const e=AGN.Lib.MailingContent.Def,i=AGN.Lib.MailingContent.BlocksManager,n=AGN.Lib.MailingContent.EmcTextModulesManager,o=AGN.Lib.Storage,r=AGN.Lib.Select,s=AGN.Lib.Form,a=t("defaults.leaveQuestion"),l="web-storage#last-content-source";let c,d;this.addDomInitializer("mailing-content-initializer",function(){e.htmlDyntagNames=this.config.htmlDynTagNames,e.smsDyntagNames=this.config.smsDynNames,e.isEditableMailing=this.config.isEditableMailing,e.isContentGenerationAllowed=this.config.isContentGenerationAllowed,e.availableTargetGroups=[{id:0,targetName:t("mailing.default.target_group_name")},..._.cloneDeep(this.config.targetGroupList)],d=`toggleFullScreenEditor:mailing:${this.config.mailingId}`,c=new i(this.config),function(){const e=$("#content-source-select");if(!e.exists())return;const t=o.get(l);if(!t)return;r.get(e).hasOption(t.id)?e.val(t.id).change():o.delete(l)}()}),this.addDomInitializer("gridTemplate-textContent-initializer",function(){e.isContentGenerationAllowed=this.config.isContentGenerationAllowed,e.availableTargetGroups=[{id:0,targetName:t("mailing.default.target_group_name")},..._.cloneDeep(this.config.targetGroupList)],e.isTextModulesPage=!0,this.config.interestGroupList=[],c=new n(this.config)}),this.addInitializer("frame-content-tab",function(){const e=o.get(d);e&&($(`#${e}`).addClass("tile--full-screen"),o.delete(d))}),this.addDomInitializer("manage-targets-modal-initializer",()=>c.editor.targetsManager.init()),this.addAction({click:"save"},function(){const e=$('[data-toggle-tab="#content-blocks-tab"]');if(e.exists()&&!e.hasClass("active")||!$("#dyn-tag-list").exists())return function(e){e.hasClass("tile--full-screen")&&o.set(d,e.attr("id"));return c.editor?.$el?.trigger("tile:hide"),AGN.Lib.Loader.prevent(),s.get($("#frame-content-tab")).submit()}(this.el.closest(".tile"));c.save()}),this.addAction({keyup:"search-content-blocks"},e=>c.search(e.val().toLowerCase())),this.addAction({click:"delete-content-block"},e=>c.editor.targetsManager.deleteContentBlock(e)),this.addAction({click:"add-content-block"},()=>c.editor.targetsManager.addTargetGroup()),this.addAction({change:"change-interest-group"},e=>c.editor.currentDynTag.interestGroup=e.val()),this.addAction({change:"change-target"},e=>c.editor.targetsManager.changeTarget(e)),this.addAction({change:"switch-content-block"},e=>c.switchContentBlock(parseInt(e.val()))),this.addAction({click:"switch-dyn-tag",change:"switch-dyn-tag"},function(){const e=parseInt(this.el.val());if(c.cantSwitchDynTag(e))return void this.event.preventDefault();c.editor.applyLastChanges(),c.switchDynTag(e)}),this.addAction({"editor:change":"validate-on-change"},e=>s.get(e).validateField(e)),this.addAction({"editor:change":"validate-sms-content"},function(){s.cleanFieldFeedback$(this.el);const e=AGN.Lib.Validator.get("reject-not-allowed-chars").errors(this.el,{msgKey:"error.mailing.smsSymbolsProhibited",chars:"#gsm-7-bit-chars"});_.each(e,e=>{s.markField(this.el),s.appendFeedbackMessage(this.el,e.msg)})}),$(window).on("beforeunload",function(){if(c.editor?.applyLastChanges(!0),c.isDirty)return AGN.Lib.Loader.hide(),a})}),AGN.Lib.Controller.new("action-view",function(){const e=AGN.Lib.Form,i=AGN.Lib.Template,n=AGN.Lib.Select;let o,r={};class s{constructor(e){this.$container=e,this.activeModules=[],e.on("remove-module",()=>{const t=e.find("[data-action-module] [data-module-index]");$.each(t,(e,t)=>$(t).html(e+1+"."))}),e.on("add-new-module",()=>{const t=e.find("[data-action-module]");t.last().find("[data-module-index]").html(t.length+".")})}clean(){this.$container.empty()}addModule(e){if(e&&e.type){e.index=this._getNextIndex();const n=i.dom("common-module-data",{moduleName:t(`triggerManager.operation.${e.type}`)}),o=i.text(`module-${e.type}`,e.getParameters());n.find(".tile").append(o),this.$container.append(n),AGN.runAll(n),this.$container.trigger("add-new-module"),this.activeModules.push(e)}}deleteModule(e){if(e>=0){this.$container.find(`[data-module-content="${e}"]`).closest("[data-action-module]").remove(),this.$container.trigger("remove-module"),this.activeModules=this.activeModules.filter(t=>t.index!==e)}}toJson(){const e=[];return this.$container.find("[data-module-content]").each(function(t,i){e.push(a.toJson($(i),t))}),e}getSubmissionJson(){return JSON.stringify(this.toJson())}getModulesByType(e){return this.activeModules.filter(t=>t.type===e)}_getNextIndex(){const e=this.$container.find("[data-module-content]");let t=0;if(e.length>0){t=e.last().data("module-content")+1}return t}}class a{constructor(e,t,i){this.type=e,this.index=i||0,this.id=t.id||0,this.data=$.extend(a.defaults(e),t)}static defaults(e){const t={};switch(e){case"ActivateDoubleOptIn":t.forAllLists=!1,t.mediaTypeCode=0;break;case"ContentView":t.tagName="";break;case"ExecuteScript":t.script="";break;case"GetArchiveList":t.campaignID=0,t.limitType=null,t.limitValue=null;break;case"GetArchiveMailing":t.expireDate=null;break;case"GetCustomer":t.loadAlways=!1;break;case"IdentifyCustomer":t.keyColumn="",t.passColumn="";break;case"SendMailing":t.mailingID=0,t.delayMinutes=0,t.bcc="",t.userStatusesOption=1;break;case"ServiceMail":t.toAddress="",t.fromAddress="",t.replyAddress="",t.subjectLine="",t.mailtype=0,t.textMail="",t.htmlMail="";break;case"SubscribeCustomer":t.doubleCheck=!1,t.keyColumn="",t.doubleOptIn=!1;break;case"UnsubscribeCustomer":t.mailinglistIds=[],t.allMailinglistsSelected=!1,t.additionalMailinglists=!1;break;case"UpdateCustomer":t.useTrack=!1,t.columnName="",t.updateValue="",t.updateType=1,t.trackingPointId=-1}return t.readonly=!1,t}static create(e){return new a(e,{})}static deserialize(e,t){const i=r[e.operationType];return new a(i,e,t)}static toJson(e,t){const i={};return i.index=t,e.find('[name^="modules[]"]:not(:disabled)').each(function(e,t){const o=$(t),r=(o.prop("name")||"").replace("modules[].","");let s="";s=o.is("select")?n.get(o).getSelectedValue():o.is("input")&&"checkbox"===o.prop("type")?o.prop("checked"):o.val(),i[r]=s}),$.extend(a.defaults(i.type),i)}getParameters(){const e={type:this.type,index:this.index,id:this.id};return _.merge({},this.data,e)}}function l(e,t){const i=e.closest("[data-action-module]"),n=i.find("[data-useTrack-trackingPointId]"),o=i.find("[data-useTrack-updateValue]");n.exists()?0===i.index()&&(n.toggleClass("hidden",!t),o.toggleClass("hidden",t)):o.removeClass("hidden")}this.addDomInitializer("action-view",function(){const t=e.get(this.el);r=this.config.operationTypes,o=new s($("#module-list")),o.clean();let i=[];this.config.modules&&(i=JSON.parse(this.config.modules).map((e,t)=>a.deserialize(e,t))),i.forEach(e=>o.addModule(e)),t.initFields()}),this.addAction({click:"add-new-module"},function(){const t=$("#moduleName").val(),i=a.create(t);if("SendMailing"===i.type&&o.getModulesByType("ActivateDoubleOptIn").length>0&&(i.data.userStatusesOption=0),o.addModule(i),e.get(this.el).initFields(),"ActivateDoubleOptIn"===i.type){o.getModulesByType("SendMailing").forEach(function(e){const t=$(`#module-${e.index}-userStatusesOption`);n.get(t).selectFirstValue()})}}),this.addAction({click:"action-delete-module"},function(){const e=this.el.closest(".tile").find("[data-module-content]").data("module-content");o.deleteModule(e)}),this.addAction({submission:"save-action-data"},function(){const t=e.get(this.el);t.setValueOnce("modulesSchema",o.getSubmissionJson()),t.submit()}),this.addDomInitializer("update-customer-module",function(){const e=$(this.el),t=e.find('[data-action="toggle-if-first"]:checked');l(e,t.exists())}),this.addAction({click:"toggle-if-first"},function(){const e=$(this.el);l(e,e.prop("checked"))})}),AGN.Lib.Controller.new("activeness-overview",function(){const e=AGN.Lib.Table;let t;function i(i,n,o){r(i)&&(l(o),$.ajax(t,{method:"POST",traditional:!0,data:{ids:i,activate:n,fromOverview:!0}}).done(t=>{if(t.success){const i=e.get(o),r=t.data.map(e=>{const t="object"==typeof e,o=t?e.id:e,r=function(e,t){const i=[];return e.api.forEachNodeAfterFilterAndSort(e=>{t===e.data.id&&i.push(e.data)}),i[0]}(i,o);return t?_.merge(r,e):_.merge(r,{active:String(n)})});i.api.applyTransaction({update:r})}AGN.Lib.JsonMessages(t.popups)}).always(()=>l(o)))}function n(e,t=!0){o([s(e)],t)}function o(e,i){if(!r(e))return;const n=$(".table-wrapper__body").scrollTop();$.ajax(t,{method:"POST",traditional:!0,data:{ids:e,activate:i,fromOverview:!0}}).done(e=>{var t;AGN.Lib.Form.get($("#table-tile")).updateHtml(e),t=n,$(".table-wrapper__body").scrollTop(t)})}function r(e){return e.length>0||(AGN.Lib.Messages.alert("messages.error.nothing_selected"),!1)}function s(e){return e.closest("table").exists()?e.closest("tr").find("[data-bulk-checkbox]").val():e.data("item-id")}function a(t=!1){return t?e.get($(".table-wrapper")).api.getSelectedRows().map(e=>e.id):$("[data-bulk-checkbox]:checked").map(function(){return $(this).val()}).get()}function l(e){e.is("a")?(e.toggleClass("disabled"),e.toggleClass("pe-none")):e.prop("disabled",!e.prop("disabled"))}this.addDomInitializer("activeness-overview",function(){t=this.config.url}),this.addAction({click:"deactivate-js"},function(){i([s(this.el)],!1,this.el)}),this.addAction({click:"activate-js"},function(){i([s(this.el)],!0,this.el)}),this.addAction({click:"bulk-deactivate-js"},function(){i(a(!0),!1,this.el)}),this.addAction({click:"bulk-activate-js"},function(){i(a(!0),!0,this.el)}),this.addAction({click:"activate"},function(){n(this.el,!0)}),this.addAction({click:"deactivate"},function(){n(this.el,!1)}),this.addAction({click:"bulk-activate"},function(){o(a(),!0)}),this.addAction({click:"bulk-deactivate"},function(){o(a(),!1)})}),AGN.Lib.Controller.new("address-management",function(){const e=AGN.Lib.Table,i=AGN.Lib.Messages,n=AGN.Lib.Confirm,o="data-entry-category";let r;function s(e,t){$.ajax({url:AGN.url(`/address-management/entries/delete.action?email=${r}`),type:"POST",contentType:"application/json",data:JSON.stringify(e),dataType:"json",success:e=>{e.success&&t(e.data),AGN.Lib.JsonMessages(e.popups,!0)},error:i.defaultError})}function a(e,t){const i=g(t.$el);t.api.applyTransaction({remove:e}),p(i,e.length)}function l(e){n.from("replace-email-modal").done(e)}function c(e,t,n){$.ajax({url:AGN.url(`/address-management/entries/replace.action?oldEmail=${r}&email=${e}`),type:"POST",contentType:"application/json",data:JSON.stringify(t),dataType:"json",success:t=>{t.success&&(e.toLowerCase().includes(r.toLowerCase())||n(t.data)),AGN.Lib.JsonMessages(t.popups,!0)},error:i.defaultError})}function d(t){const i=e.get(t),n=i?.findRowByElement(t);if(n){const e=g(t);i.api?.applyTransaction({remove:[n.data]}),p(e)}}function u(e){return{id:e.data("entry-id"),companyId:e.data("entry-cid"),category:g(e)}}function h(e,t){return e.map(e=>({id:e.id,companyId:e.companyId,category:t}))}function p(e,t=1){const i=$(`[data-entry-category-tab=${e}]`),n=i.find("span"),o=parseInt(n.text())-t;n.text(o),i.prop("disabled",0===o)}function g(e){return e.closest(`[${o}]`).attr(o)}this.addDomInitializer("address-management",function(){r=this.config.email}),this.addAction({click:"delete-all"},function(){const e=$(".btn-category:not([disabled])").map(function(){return $(this).data("entry-category-tab")}).get();n.from("confirm-delete-all-modal",{affectedCategories:e}).done(()=>{$.post(AGN.url(`/address-management/entries/deleteAll.action?email=${r}`)).done(e=>AGN.Lib.Form.get(this.el).updateHtml(e))})}),this.addAction({click:"update-all"},function(){l(e=>{$.post(AGN.url(`/address-management/entries/replaceAll.action?email=${r}&newEmail=${e}`)).done(e=>AGN.Lib.Form.get(this.el).updateHtml(e))})}),this.addAction({click:"delete-entry"},function(){const t=g(this.el),i=e.get(this.el).findRowByElement(this.el);n.from("confirm-single-delete-modal",{category:t,data:i.data}).done(()=>{s([u(this.el)],()=>d(this.el))})}),this.addAction({click:"bulk-delete"},function(){const t=e.get(this.el),i=t.api.getSelectedRows(),o=g(this.el),r=h(i,o);n.from("confirm-bulk-delete-modal",{category:o}).done(()=>{s(r,e=>{a(i.filter(t=>e.find(e=>e.id===t.id&&e.companyId===t.companyId)),t)})})}),this.addAction({click:"replace-email"},function(){const e=$("#new-email-address"),i=e.val();AGN.Lib.Helpers.isValidEmail(i)?n.get(this.el).positive(i):AGN.Lib.Form.showFieldError$(e,t("import.columnMapping.error.invalidEmail"))}),this.addAction({click:"single-replace"},function(){l(e=>{c(e,[u(this.el)],()=>d(this.el))})}),this.addAction({click:"bulk-replace"},function(){l(t=>{const i=e.get(this.el),n=i.api.getSelectedRows();c(t,h(n,g(this.el)),e=>{a(n.filter(t=>e.find(e=>e.id===t.id&&e.companyId===t.companyId)),i)})})})}),AGN.Lib.Controller.new("admin-enabling",function(){this.addAction({click:"save-approved-mailing-lists"},function(){var e=this.el,t=AGN.Lib.Form.getWrapper(e);!function(e){$("input[name*='disabledMailinglistsIds']").remove(),(t="mailinglist",t?$("input:checkbox:not(:checked)[data-enabling="+t+"]"):$("input:checkbox:not(:checked)[data-enabling]")).each(function(){$("<input>").attr({type:"hidden",name:"disabledMailinglistsIds",value:$(this).data("mailinglist")}).appendTo(e)});var t}(t),AGN.Lib.Form.get(t).submit().done(function(t){!0===t.success?(AGN.Lib.JsonMessages(t.popups,!0),AGN.Lib.Modal.getWrapper(e).modal("hide")):AGN.Lib.JsonMessages(t.popups,!0)})})}),AGN.Lib.Controller.new("ai-image-generation",function(){let e,i,n,o,r,s,a;function l(e){e<=0?(i.text(t("mediapool.imageGeneration.limitExceeded")),n.parent().remove()):i.text(t("mediapool.imageGeneration.remainingGenerations",e))}function c(e,t){const i=e.find(":input");i.prop("disabled",t),i.prev().toggleClass("input-group-text--disabled",t),e.find(".btn").toggleClass("disabled",t),i.filter(".js-colorpicker").spectrum(t?"disable":"enable")}this.addDomInitializer("ai-image-generation",function(){e=$("#ai-generated-image"),i=$("#remaining-generations-text"),n=$("#generate-btn"),o=$("#save-btn"),r=$("#important-objects-table"),s=$("#filters-table"),l(this.config.remainingGenerations)}),this.addAction({click:"generate"},function(){const t=AGN.Lib.Form.get(this.el);!function(e){AGN.Lib.InputTable.get(r).collect().forEach(function(t,i){Object.keys(t).forEach(n=>{e.setValueOnce(`importantObjects[${i}].${n}`,t[n])})})}(t),function(e){const t=AGN.Lib.InputTable.get(s),i=_.groupBy(t.collect(),"name");_.forEach(i,(t,i)=>{const n=_.map(t,"value");e.setValueOnce(`filters[${i}]`,n)})}(t),t.jqxhr().done(t=>{var i;t.success?(l(t.data.remainingGenerationsCount),a=t.data.base64Data,i=`data:image/png;base64,${a}`,e.attr("src",i),e.parent().removeClass("hidden"),e.parent().prev().addClass("hidden"),o.removeClass("hidden")):AGN.Lib.JsonMessages(t.popups)})}),this.addAction({click:"save"},function(){$.ajax({url:AGN.url("/mediapool/generated-image/save.action"),method:"POST",contentType:"application/json",data:JSON.stringify({base64Data:a}),success:e=>AGN.Lib.Page.render(e)})}),this.addAction({change:"use-important-objects"},function(){c(r,!this.el.is(":checked"))}),this.addAction({change:"use-filters"},function(){c(s,!this.el.is(":checked"))})}),AGN.Lib.Controller.new("ai-text-generation",function(){const e=AGN.Lib.Form,i=AGN.Lib.Messaging;let n;function o(e){const t=s(e),i=r(t).val(),n=e.closest("[data-tab-id]").data("tab-id");!function(e){const t=$(`[data-toggle-tab*="wysiwyg${e}"]`);if(t.exists())return void t.trigger("click");const i=$(`[data-toggle-tab*="html${e}"]`);i.exists()&&i.trigger("click")}(n),function(e,t,i){const n=t.find(".js-wysiwyg");if($("#tab-content-wysiwyg").is(":visible")||$(`[id^='tab-grid-wysiwyg${i}']`).is(":visible"))if(window.Jodit){const t=Jodit.instances[n.attr("id")];if(t.o.editHTMLDocumentMode){const i=(new DOMParser).parseFromString(t.value,"text/html");i.body.innerHTML=e,e=`${t.o.iframeDoctype}\n${i.documentElement.outerHTML}`}t.value=e}else{const t=CKEDITOR.instances[n.attr("id")];"ready"===t.status?t.setData(e):t.on("instanceReady",t=>t.editor.setData(e))}($("#contentEditor").is(":visible")||$(`[id^='tab-grid-html${i}']`).is(":visible"))&&ace.edit(`${n.attr("name")}Editor`).setValue(e)}(i,t,n)}function r(e){return e.find("[data-ai-result]")}function s(e){return e.closest(".tile")}this.addDomInitializer("ai-text-generation",function(){const e=AGN.Lib.Select.get(this.el.find("[data-ai-language]"));e.hasOption(window.adminLocale)&&e.selectValue(window.adminLocale)}),this.addAction({enterdown:"skip-form-submit"},function(){this.event.preventDefault()}),this.addAction({click:"generateText"},function(){const i=s(this.el);if(function(i){let n=!0;const o=i.find("[data-ai-numberOfWords]"),r=i.find("[data-ai-contentDescription]"),s=AGN.Lib.Validator.get("number").errors(o,{min:1,required:!0});s.length>0?(n=!1,s.forEach(t=>e.showFieldError$(o,t.msg))):e.cleanFieldFeedback$(o);$.trim(r.val())?e.cleanFieldFeedback$(r):(n=!1,e.showFieldError$(r,t("fields.required.errors.missing")));return n}(i)){const e=function(e){return{language:e.find("[data-ai-language]").val(),numberOfWords:e.find("[data-ai-numberOfWords]").val(),tonality:e.find("[data-ai-tonality]").val(),contentDescription:e.find("[data-ai-contentDescription]").val()}}(i);$.post(AGN.url("/mailing/content/generateText.action"),e).done(e=>{n=e.data,function(e,t){r(t).val(e).trigger("change"),t.find("#ai-apply-text-btn").removeClass("hidden")}(e.data,i),this.el.find(".text").text(t("ai.regenerateText"))})}}),this.addAction({click:"applyGeneratedText"},function(){o(this.el)}),i.subscribe("mailing-content:applyGeneratedText",o)}),AGN.Lib.Controller.newExtended("auto-export","auto-import-export-base",function(){let e;function t(){const e=$("select#export-profile").val(),t=parseInt(e)>0;$("#add-profile-btn").toggle(!t),$("#edit-profile-btn").toggle(t).attr("href",AGN.url(`/export/${e}/view.action`))}this.addDomInitializer("auto-export",function(){t()}),this.addDomInitializer("mailing-options-attribute-resolver",function(){e=new i(this.config)}),this.addAction({click:"evaluate"},function(){$.post(this.el.attr("href")).done(e=>AGN.Lib.Page.render(e))}),this.addAction({change:"select-export-profile"},function(){t()}),this.addAction({change:"change-mailing-type"},function(){const t=AGN.Lib.Select.get(this.el).getSelectedValue(),i=AGN.Lib.Select.get($("select#exportType")).getSelectedValue();e.resolve(i,t)}),this.addAction({change:"export-type-resolver"},function(){const t=AGN.Lib.Select.get($("select#exportType")).getSelectedValue(),i=AGN.Lib.Select.get($("select#exportMailing")).getSelectedValue();e.resolve(t,i)}),this.addAction({submission:"save-scheduler-data"},function(){const e=this.el.closest("[data-controller]").data("_schedule_table");if(e.getAllDayRows().every(e=>e.validateTimeIntervals())){const t=AGN.Lib.Form.get($(this.el));t.setValueOnce("intervalAsJson",e.getSubmissionJson("day")),t.submit()}});class i{constructor(e){this.exportType=e.exportType||"",this.mailingType=e.mailingType||-1,this.$oneTimeCheckbox=$('input[name="autoExport.oneTime"]'),this.initialOneTimeValues={checked:this.$oneTimeCheckbox.is(":checked"),disabled:this.$oneTimeCheckbox.is(":disabled")},this.toggleOneTimeSwitch()}resolve(e,t){this.exportType=e||"",this.mailingType=t||-1,this.toggleOneTimeSwitch()}toggleOneTimeSwitch(){const e="Mailing"==this.exportType&&0==this.mailingType;this.$oneTimeCheckbox.prop("checked",e||this.initialOneTimeValues.checked),this.$oneTimeCheckbox.prop("disabled",e||this.initialOneTimeValues.disabled)}}}),AGN.Lib.Controller.newExtended("auto-export-new","auto-import-export-base-new",function(){let e;function t(){const e=$("select#export-profile").val(),t=parseInt(e)>0;$("#add-profile-btn").toggle(!t),$("#edit-profile-btn").toggle(t).attr("href",AGN.url(`/export/${e}/view.action`))}this.addDomInitializer("auto-export",function(){t()}),this.addDomInitializer("mailing-options-attribute-resolver",function(){e=new i(this.config)}),this.addAction({click:"evaluate"},function(){$.post(this.el.attr("href")).done(e=>AGN.Lib.Page.render(e))}),this.addAction({change:"select-export-profile"},function(){t()}),this.addAction({change:"change-mailing-type"},function(){const t=AGN.Lib.Select.get(this.el).getSelectedValue(),i=AGN.Lib.Select.get($("select#exportType")).getSelectedValue();e.resolve(i,t)}),this.addAction({change:"export-type-resolver"},function(){const t=AGN.Lib.Select.get($("select#exportType")).getSelectedValue(),i=AGN.Lib.Select.get($("select#exportMailing")).getSelectedValue();e.resolve(t,i)}),this.addAction({submission:"save-scheduler-data"},function(){const e=AGN.Lib.Form.get($(this.el)),t=AGN.Lib.Schedule.Builder.get(e.get$().find("[data-schedule-builder]"));t.validate()&&(e.setValueOnce("intervalAsJson",t.toJson()),e.submit())});class i{constructor(e){this.exportType=e.exportType||"",this.mailingType=e.mailingType||-1,this.$oneTimeCheckbox=$('input[name="autoExport.oneTime"]'),this.initialOneTimeValues={checked:this.$oneTimeCheckbox.is(":checked"),disabled:this.$oneTimeCheckbox.is(":disabled")},this.toggleOneTimeSwitch()}resolve(e,t){this.exportType=e||"",this.mailingType=t||-1,this.toggleOneTimeSwitch()}toggleOneTimeSwitch(){const e="Mailing"==this.exportType&&0==this.mailingType;this.$oneTimeCheckbox.prop("checked",e||this.initialOneTimeValues.checked),this.$oneTimeCheckbox.prop("disabled",e||this.initialOneTimeValues.disabled)}}}),AGN.Lib.Controller.new("auto-import-export-base-new",function(){this.addDomInitializer("auto-import-export-scheduler",function(){const e=this.el;AGN.Lib.Form.get(e).isEditable()||(e.find(":input").prop("disabled",!0),e.find("a").addClass("disabled"))}),this.addAction({click:"check-connection"},function(){const e=AGN.Lib.Form.get(this.el);$.ajax(this.el.attr("href"),{type:"POST",dataType:"html",enctype:"multipart/form-data",processData:!1,contentType:!1,data:e.data()}).done(e=>AGN.Lib.Page.render(e))})}),AGN.Lib.Controller.new("auto-import-export-base",function(){const e=AGN.Lib.ScheduleTimeTable,t=AGN.Lib.ScheduleTimeTable.DayRow;let i;this.addDomInitializer("auto-import-export-scheduler",function(){const n=this.el,o=this.config.intervalAsJson||[];i=new e(n),function(e,t){e.closest("[data-controller]").data("_schedule_table",t)}(n,i);let r=[];_.isEmpty(o)||(r=JSON.parse(o).map(e=>t.deserialize(e)).filter(e=>e)),r.forEach(e=>i.addRow(e)),0===r.length&&i.addEmptyDayRow();const s=AGN.Lib.Form.get(n);s.initFields(),s.editable||(n.find(":input").prop("disabled",!0),n.find("a").addClass("disabled"))}),this.addAction({click:"add-day"},function(){i.addEmptyDayRow()}),this.addAction({click:"remove-day"},function(){i.deleteRow(t.get(this.el))}),this.addAction({click:"add-schedule"},function(){t.get(this.el).addSchedule()}),this.addAction({click:"remove-schedule"},function(){t.get(this.el).removeSchedule(this.el)}),this.addAction({click:"time-checkbox-toggle"},function(){t.get(this.el).timeCheckboxToggle(this.el)}),this.addAction({click:"hour-checkbox-toggle"},function(){t.get(this.el).hourCheckboxToggle(this.el)}),this.addAction({change:"validate-changes"},function(){t.get(this.el).validateTimeIntervals()}),this.addAction({click:"check-connection"},function(){const e=AGN.Lib.Form.get(this.el);$.ajax(this.el.attr("href"),{type:"POST",dataType:"html",enctype:"multipart/form-data",processData:!1,contentType:!1,data:e.data()}).done(e=>AGN.Lib.Page.render(e))})}),AGN.Lib.Controller.newExtended("auto-import-new","auto-import-export-base-new",function(){let e,t={},i=!1;function n(){const e=$("select#auto-import-profile").val(),t=parseInt(e)>0;$("#add-profile-btn").toggle(!t),$("#edit-profile-btn").toggle(t).attr("href",AGN.url(`/import-profile/${e}/view.action`))}this.addDomInitializer("auto-import",function(){e=this.config.isWorkflowDriven,function(e){const t=$("#contentSourceId");if(!t.exists())return;const i=AGN.Lib.Select.get(t);i.hasOption(e)&&i.selectValue(e)}(this.config.contentSourceIdentifier),n()}),this.addAction({click:"save-auto-import"},function(){const t=$("#auto-import-form"),i=AGN.Lib.Schedule.Builder.get(t.find("[data-schedule-builder]"));if(i.validate()){const n=AGN.Lib.Form.get(t),o=i.toJson(),r=$("#contentSourceId").val()?.split("/")||[];e?(n.setValue("intervalAsJson",o),r.length&&(n.setValue("contentSourceID",r[0]),n.setValue("contentSourceType",r[1]))):(n.setValueOnce("intervalAsJson",o),r.length&&(n.setValueOnce("contentSourceID",r[0]),n.setValueOnce("contentSourceType",r[1]))),n.submit()}}),this.addAction({click:"import"},function(){$.post(this.el.attr("href")).done(e=>AGN.Lib.Page.render(e))}),this.addDomInitializer("import-profile-mailing-lists",function(){i=this.config.isAutoImportNew,t=this.config.profileMailinglists;const e=$('[name="importProfileId"]').val();o(e,i)}),this.addAction({change:"change-import-profile"},function(){const e=AGN.Lib.Select.get($(this.el)).getSelectedValue();o(e,i),n()});const o=function(e,i){if(i){const i=t[e];$('input[type=checkbox][name^="mailinglists"]').prop("checked",!1),_.each(i,e=>{$(`input[type=checkbox][name="mailinglists[${e}]"]`).prop("checked",!0)})}}}),AGN.Lib.Controller.newExtended("auto-import","auto-import-export-base",function(){let e,t={},i=!1;function n(){const e=$("select#auto-import-profile").val(),t=parseInt(e)>0;$("#add-profile-btn").toggle(!t),$("#edit-profile-btn").toggle(t).attr("href",AGN.url(`/import-profile/${e}/view.action`))}this.addDomInitializer("auto-import",function(){e=this.config.isWorkflowDriven,function(e){const t=$("#contentSourceId");if(!t.exists())return;const i=AGN.Lib.Select.get(t);i.hasOption(e)&&i.selectValue(e)}(this.config.contentSourceIdentifier),n()}),this.addAction({click:"save-auto-import"},function(){const t=$("#auto-import-form"),i=t.closest("[data-controller]").data("_schedule_table");if(i.getAllDayRows().every(e=>e.validateTimeIntervals())){const n=AGN.Lib.Form.get(t),o=i.getSubmissionJson("day"),r=$("#contentSourceId").val()?.split("/")||[];e?(n.setValue("intervalAsJson",o),r.length&&(n.setValue("contentSourceID",r[0]),n.setValue("contentSourceType",r[1]))):(n.setValueOnce("intervalAsJson",o),r.length&&(n.setValueOnce("contentSourceID",r[0]),n.setValueOnce("contentSourceType",r[1]))),n.submit()}}),this.addAction({click:"import"},function(){$.post(this.el.attr("href")).done(e=>AGN.Lib.Page.render(e))}),this.addDomInitializer("import-profile-mailing-lists",function(){i=this.config.isAutoImportNew,t=this.config.profileMailinglists;const e=$('[name="importProfileId"]').val();o(e,i)}),this.addAction({change:"change-import-profile"},function(){const e=AGN.Lib.Select.get($(this.el)).getSelectedValue();o(e,i),n()});const o=function(e,i){if(i){const i=t[e];$('input[type=checkbox][name^="mailinglists"]').prop("checked",!1),_.each(i,e=>{$(`input[type=checkbox][name="mailinglists[${e}]"]`).prop("checked",!0)})}}}),AGN.Lib.Controller.new("available-building-blocks",function(){let e,t,i;function n(){if(i){const t=JSON.stringify(e,(e,t)=>null!==t?t:void 0);i.setValue("changedBlockStatusJson",t)}}this.addDomInitializer("available-building-blocks",function(){e={},t={},i=AGN.Lib.Form.get(this.el),this.config.changedBlockStatus&&(e=JSON.parse(this.config.changedBlockStatus))}),this.addDomInitializer("available-building-blocks-table",function(){const i=this.config.divContainerList;_.each(i,function(i){const n=i.id,o=i.active;n in t?n in e&&$(`input:checkbox[data-block-id='${n}']`).prop("checked",!!e[n]):t[n]=o})}),this.addAction({click:"search"},function(){const e=this.el;n(),i.setActionOnce(e.data("form-url")),i.setResourceSelectorOnce(e.data("form-resource")),i.submit()}),this.addAction({click:"save-changed-data"},function(){const e=this.el;n(),i.setActionOnce(e.data("form-url")),i.jqxhr().done(t=>{AGN.Lib.JsonMessages(t.popups),t.success&&AGN.Lib.Confirm.get(e).positive()})}),this.addAction({change:"change-activation"},function(){const i=this.el,n=i.data("block-id");i.is(":checked")==t[n]?n in e&&delete e[n]:e[n]=i.is(":checked")}),this.addAction({change:"activate-all"},function(){$("input:checkbox[data-block-id]").prop("checked",this.el.is(":checked")).change()})}),AGN.Lib.Controller.new("birt-reports",function(){let e,t,i,n={},o=0,r=[],s=[],a=[];const l=".form-check-input";function c(){return $('[data-action="activate-delivery-for-active-tab"]')}function d(){const i=$("#interval").val();i==e?$("#extended-settings-tile").find("[data-toggle-tab]").each(function(){const e=$(this),i=e.data("toggle-tab");i.endsWith(t)?e.trigger("click"):(e.addClass("disabled"),AGN.Lib.Tab.hide($(i)))}):o==e&&$("#extended-settings-tile").find("[data-toggle-tab]").each(function(){$(this).removeClass("disabled")}),o=i}this.addDomInitializer("birt-reports",function(){n=this.config,t=n.constant.MAILING_ID,e=n.constant.AFTER_MAILING_TYPE_ID,r=n.filtered.FILTER_ARCHIVE,s=n.filtered.FILTER_MAILINGLIST,a=n.filtered.FILTER_TARGET,o=n.reportType,i=this.el}),this.addDomInitializer("report-settings",function(){$("#extended-settings-tile").find("[data-toggle-tab]").on("click",function(e){if(!$(e.target).is(l)){const e=$(this).find(l).is(":checked");c().prop("checked",e)}}),d(),new u(this.el,this.config)}),this.addAction({click:"confirm-deactivate-deliveries"},function(){AGN.Lib.Confirm.from("report-deactivate-deliveries")}),this.addAction({click:"activate-delivery"},function(){const e=this.el.is(":checked");this.event.stopPropagation(),window.setTimeout(()=>this.el.prop("checked",e),0);this.el.closest(".btn").is(".active")&&c().prop("checked",e)}),this.addAction({click:"activate-delivery-for-active-tab"},function(){const e=this.el.is(":checked");this.event.stopPropagation(),window.setTimeout(()=>this.el.prop("checked",e),0),$("#extended-settings-tile").find("[data-toggle-tab].active").find(l).prop("checked",e)}),this.addAction({change:"interval-change"},function(){d()});class u{constructor(e,t){this.$container=e,this.config=t,this.settingsType=t.settingsType,this.select=AGN.Lib.Select.get(e.find(t.selectors.filterBlockId)),this.mailingSelect=AGN.Lib.Select.get(e.find(t.selectors.normalMailing)),this.init(t),e.find(t.selectors.mailingType).on("change",e=>{this.handleMailingTypeChanges($(e.target))}),e.find(t.selectors.mailingFilter).on("change",e=>{this.handleMailingFilterChanges($(e.target))}),e.find(t.selectors.filterBlockId).on("change",e=>{this.handleMailingFilterValueChanges($(e.target))})}init(e){const t=e.data.mailingType,n=e.data.mailingFilter,o=e.data.predefineMailing,r=e.data.selectedMailings;this.updateAllComparisonDependentFields(t,n,o,r).done(()=>i.dirty("setAsClean"))}handleMailingTypeChanges(e){const t=this.getMailingFilter(),i=this.getMailingFilterValue();this.updateNormalMailingField(e.val(),t,i)}handleMailingFilterChanges(e){this.updateAllComparisonDependentFields(this.mailingType,e.val())}handleMailingFilterValueChanges(e){const t=this.getMailingFilter();this.updateNormalMailingField(this.mailingType,t,e.val())}updateAllComparisonDependentFields(e,t,i,n){if(this.select.resetOptions(),t>0){let e=[];1==t?e=r:2==t?e=s:4==t&&(e=a),_.each(e,e=>this.select.addFormattedOption(`<option value="${e.id}">${e.shortname}</option>`)),this.select.selectValueOrSelectFirst(i),i=this.select.getSelectedValue()}return this.updateNormalMailingField(e,t,i,n)}updateNormalMailingField(e,t,i,o){const r=$.Deferred();return this.mailingSelect.resetOptions(),(this.settingsType==n.constant.COMPARISON_SETTINGS&&2==e||this.settingsType==n.constant.MAILING_SETTINGS&&3==e)&&$.ajax({type:"GET",url:AGN.url("/statistics/report/getFilteredMailing.action"),data:{type:t,value:i||0,mailingType:n.constant.NORMAL_MAILING_TYPE}}).done(e=>{_.each(e,e=>this.mailingSelect.addFormattedOption(`<option value="${e.id}">${e.shortname}</option>`)),this.mailingSelect.selectValue(o||""),r.resolve()}),r.promise()}getMailingFilter(){const e=this.$container.find(this.config.selectors.mailingFilter);return 0|parseInt(e.val())}getMailingFilterValue(){return 0|parseInt(this.select.getSelectedValue())}get $mailingType(){return this.$container.find(`${this.config.selectors.mailingType}`)}get mailingType(){return parseInt(this.$mailingType.val())||0}}}),AGN.Lib.Controller.new("blacklist-list",function(){function e(e,t){!0===e.success?(AGN.Lib.Form.get($("#blacklist-overview")).submit().done(()=>AGN.Lib.JsonMessages(e.popups,!0)),t&&t()):e.popups?AGN.Lib.JsonMessages(e.popups,!0):AGN.Lib.RenderMessages($(e))}this.addAction({click:"save"},function(){$.ajax(this.el.data("url"),{type:"POST",data:{email:$("#new-entry-email").val(),reason:$("#new-entry-reason").val()},success:t=>e(t)})}),this.addAction({click:"save-edit"},function(){const t=this.el;AGN.Lib.Form.get(t).submit().done(i=>{e(i,()=>AGN.Lib.Modal.getInstance(t).hide())})})}),AGN.Lib.Controller.new("company-insights",function(){const e=AGN.Lib.ChartUtils,t=50;let i,n,o,r,s,a=[];function l(){const t=$("#progressOfUsedPeriod").val(),i={};"MONTH"===t?i.byMonth=!0:"PERIOD"==t&&(i.from=$("#progressOfUsedFrom").val(),i.till=$("#progressOfUsedTill").val()),$.get(AGN.url("/recipient/chart/progressOfUsedDevices.action"),i).done(t=>{!function(t){const i=t.usedDevices,n=[{title:t.windowsTitle,count:i.windows},{title:t.macTitle,count:i.mac},{title:t.androidTitle,count:i.android},{title:t.iosTitle,count:i.ios}];n.sort((e,t)=>t.count-e.count);const o=n.map(e=>e.title),s=n.map(e=>e.count);if(o.push(t.otherTitle),s.push(i.other),0===e.getTotal(s))return void d(r,!0);d(r,!1);const a=[r.css("--chart-darkest-blue-color"),r.css("--chart-dark-blue-color"),r.css("--chart-blue-color"),r.css("--chart-light-blue-color"),r.css("--chart-light-cyan-color")];Chart.getChart(r)?.destroy(),new Chart(r[0].getContext("2d"),{type:"agnDoughnut",data:{labels:o,datasets:[{data:s,backgroundColor:a,borderWidth:0}]},options:{plugins:{"half-doughnut-label":!1,revenueIcon:!1,hideXAxisIfLabelsOverlaps:!1}}})}(t),function(e){const t=s.css("--chart-black-color"),i=[],n=[],o=[],r=[],a=[],l=[],u=[];for(let t=0;t<e.usedDevicesByPeriods.length;t++){const s=e.usedDevicesByPeriods[t],{windows:d,mac:h,android:p,ios:g,other:f}=s,m=d+h+p+g+f;n.push(c(d/m)),o.push(c(h/m)),r.push(c(p/m)),a.push(c(g/m)),l.push(c(f/m)),u.push(m),i.push(s.date)}const h=Math.max(...u);if(0===h)return void d(s,!0);d(s,!1);Chart.getChart(s)?.destroy(),new Chart(s[0].getContext("2d"),{type:"bar",data:{labels:i,datasets:[{label:e.numberOfReactions,data:u,borderColor:t,backgroundColor:t,type:"line",yAxisID:"reactions-y"},{label:e.otherTitle,backgroundColor:s.css("--chart-light-cyan-color"),data:l},{label:e.iosTitle,backgroundColor:s.css("--chart-light-blue-color"),data:a},{label:e.androidTitle,backgroundColor:s.css("--chart-blue-color"),data:r},{label:e.macTitle,backgroundColor:s.css("--chart-dark-blue-color"),data:o},{label:e.windowsTitle,backgroundColor:s.css("--chart-darkest-blue-color"),data:n}]},options:{interaction:{mode:"index"},plugins:{"half-doughnut-label":!1,revenueIcon:!1,hideXAxisIfLabelsOverlaps:!1,datalabels:{display:!1},legend:{position:"bottom",reverse:!0},tooltip:{callbacks:{label:function(e){let t=e.raw;return e.datasetIndex>0&&(t+="%"),`${e.dataset.label}: ${t}`}},itemSort:(e,t)=>t.datasetIndex-e.datasetIndex}},scales:{x:{stacked:!0,ticks:{maxRotation:0}},y:{stacked:!0,min:0,max:100,ticks:{callback:(e,t,i)=>`${e}%`}},"reactions-y":{type:"linear",position:"right",min:0,max:h}}}})}(t)})}function c(e){return Math.round(1e3*e)/10}function d(e,t){e.toggleClass("hidden",t),e.next().toggleClass("hidden",!t)}this.addAction({change:"load-dynamic-statistic"},function(){l()}),this.addDomInitializer("company-insights",function(){a=this.config.revenueImages,i=$("#type-of-reactor-chart"),n=$("#rebuy-rate-chart"),o=$("#revenue-chart"),r=$("#reaction-devices-chart"),s=$("#devices-progress-chart"),l();const u=this.config.chartData;var h,p,g,f,m,v;this.config.chartData?(!function(e){if(Object.values(e).some(e=>e<=0))return void d(i,!0);const t=[i.css("--chart-darkest-blue-color"),i.css("--chart-blue-color"),i.css("--chart-light-cyan-color")];new Chart(i[0].getContext("2d"),{type:"agnDoughnut",data:{labels:Object.keys(e),datasets:[{data:Object.values(e),backgroundColor:t,borderWidth:0}]},options:{plugins:{"half-doughnut-label":!1,revenueIcon:!1,hideXAxisIfLabelsOverlaps:!1}}})}(u.reactorType),function(e){if(e<=0)return void d(n,!0);e=c(e);const t=[n.css("--chart-blue-color"),n.css("--chart-light-grey-color")],i=n.css("--chart-half-doughnut-label-color");Chart.register({id:"half-doughnut-label",beforeDraw:(t,n)=>{const o=t.getDatasetMeta(0).data[0].y,r=Math.floor(.1*t.height);t.ctx.textBaseline="middle",t.ctx.textAlign="center",t.ctx.font=`600 ${r}px ${Chart.defaults.font.family}`,t.ctx.fillStyle=i,t.ctx.fillText(`${e}%`,t.width/2,o-r/3)}}),new Chart(n[0].getContext("2d"),{type:"doughnut",data:{datasets:[{data:[e,100-e],backgroundColor:t,borderWidth:0}]},options:{rotation:-90,circumference:180,plugins:{legend:{display:!1},datalabels:{display:!1},tooltip:{external:null},revenueIcon:!1,hideXAxisIfLabelsOverlaps:!1}}})}(u.rebuyRate),function(i){const n=e.getTotal(Object.values(i));if(n<=0)return void d(o,!0);const r=[o.css("--chart-darkest-blue-color"),o.css("--chart-dark-blue-color"),o.css("--chart-blue-color"),o.css("--chart-light-blue-color")],s=a.map(e=>{const t=new Image;return t.src=e,t});Chart.register({id:"revenueIcon",afterDraw:e=>{const i=e.getDatasetMeta(0).data;_.each(Object.keys(i),(n,o)=>{const r=s[o];if(r.complete){const o=i[n],s=o.x-o.width/2,a=o.y+o.height,l=r.width/r.height,c=40*o.width/100;let d=Math.min(c,l*t),u=d/l;u>t&&(u=t,d=u*l);const h=s+(o.width-d)/2,p=a-(60-u)/2-u;e.ctx.drawImage(r,h,p,d,u)}else r.onload=()=>e.draw()})}}),Chart.register({id:"hideXAxisIfLabelsOverlaps",afterRender:e=>{const t=e.getDatasetMeta(0).data;e.options.scales.x.display=!function(e,t,i){if(e.length<2)return!1;const n=2,o=e.map(e=>i.measureText(e).width);for(let i=1;i<e.length;i++){if(t[i].x-o[i]/2-n<=t[i-1].x+o[i-1]/2)return!0}return!1}(e.data.labels,t,e.ctx),e.update()}}),new Chart(o[0].getContext("2d"),{type:"bar",data:{labels:Object.keys(i),datasets:[{data:Object.values(i),backgroundColor:r,categoryPercentage:.9,minBarLength:60}]},options:{indexAxis:"x",layout:{padding:{top:20,right:0}},scales:{x:{ticks:{autoSkip:!1,maxRotation:0}},y:{display:!1}},plugins:{"half-doughnut-label":!1,legend:{display:!1},datalabels:{anchor:"end",align:"end",offset:-5,formatter:(e,t)=>`${(100*e/n).toFixed(1)}%`}}}})}(u.revenue),function(e){const t=$("#fav-days-stat-block");Object.keys(e).length>0&&t.empty(),$.each(e,(e,i)=>{t.append(AGN.Lib.Template.dom("company-insights-fav-day-record",{day:e,value:i}))})}((h=u).favoriteOpeningDays),function(e){const t=$("#fav-time-stat-block");Object.keys(e).length>0&&t.empty(),$.each(e,(e,i)=>{t.append(AGN.Lib.Template.dom("company-insights-fav-time-record",{time:e,value:i}))})}(h.favoriteOpeningHours),v=h.ctr,$("#ctr-val").text(v.toString().replace(".",",")+" %"),0!=(m=h.conversion)&&$("#conversion-val").text(m.toString().replace(".",",")+" %"),0!=(f=h.pageImpressions)&&$("#pi-val").text(f.toString().replace(",",".")+" Ø"),0!=(g=h.pageImpressionsPerVisit)&&$("#pi-visit-val").text(g.toString().replace(",",".")+" Ø"),0!=(p=h.pageImpressionsPerBuy)&&$("#pi-buy-val").text(p.toString().replace(",",".")+" Ø")):(d(i,!0),d(n,!0),d(o,!0))})}),AGN.Lib.Controller.new("company-view",function(){function e(){const e=$("#passwordPolicy").val();$("#password").attr("data-rule",e)}this.addDomInitializer("company-view",function(){e()}),this.addAction({click:"create-postal-field"},function(){const e=this.el.attr("href");AGN.Lib.Form.get(this.el).jqxhr().done(()=>AGN.Lib.Page.reload(e))}),this.addAction({change:"update-policy"},function(){e()}),this.addAction({change:"change-password-expire"},function(){this.el.find('[data-default-password-expire-option="false"]').remove()})}),AGN.Lib.Controller.new("content-source-list",function(){function e(e,t,i){$.ajax({url:e,type:"POST",contentType:"application/json",data:JSON.stringify(t),success:e=>i(e)})}this.addAction({click:"bulk-delete"},function(){const t=$("[data-bulk-checkbox]:checked").map(function(){const e=$(this);return{id:e.val(),type:e.data("content-source-type")}}).get();e(this.el.attr("href"),t,i=>{AGN.Lib.Confirm.create(i).done(()=>{e(AGN.url("/administration/content-source/bulkDelete.action"),t,e=>{AGN.Lib.Form.get(this.el).updateHtml(e)})})})})}),AGN.Lib.Controller.new("content-source-view",function(){const e=AGN.Lib.Select,i=AGN.Lib.InputTable,n=AGN.Lib.Helpers;let o,r,s,a,l,c,d,u=[];function h(){const e=d.find('[data-name="url"]');"HTML"===s&&r?(e.each((e,t)=>g($(t))),$("[data-add-row]").closest("td").show(),$('[data-action="configure-url"]').closest("td").show()):"XML"===s&&($("[data-add-row]").closest("td").hide(),$('[data-action="configure-url"]').closest("td").hide(),e.first().attr("data-field","required"),o.initFields())}function p(){const e=u.find(e=>e.name===$(this).val()).blocks.map(e=>({id:e,text:e}));l.setOptions(e)}function g(e){e.closest("td").next().toggleClass("hidden",!$(e).val())}function f(e){const n=i.get(d).getRowData(e);a.toggle(function(e){return"XML"!==s&&e.find('[data-name="url"]')?.val()?.trim()?.length>0}(e)),a.data("urlRow",e),$("#url-ph").text(n.url);const o=n.contentBlockName?{id:n.contentBlockName,text:n.contentBlockName}:{id:"",text:t("contentSource.mailingContentSelect")};l.setOptions([o]),function(e){c.selectValueOrSelectFirst(e.targetGroup)}(n)}function m(){const e=a.data("urlRow");e.find('[data-name="contentBlockName"]').val($("#content-block-name").val()),e.find('[data-name="targetGroup"]').val($("#target-group-select").val())}this.addDomInitializer("content-source-view",function(){o=AGN.Lib.Form.get($("#content-source-form")),s=$("#resource-type").val(),d=$("#urls-table"),a=$("#url-settings"),l=e.get($("#content-block-name")),c=e.get($("#target-group-select")),r=this.config.htmlSourcesAllowed,u=this.config.availableMailings,h(),$("#mailing-name").on("change",p),f(d.find("tr:first"))}),this.addAction({change:"change-resource-type"},function(){s=this.el.val(),h()}),this.addAction({change:"url-input",keyup:"url-input",paste:"url-input"},function(){g(this.el)}),this.addAction({click:"configure-url"},function(){o.validate()&&(m(),f(this.el.closest("tr")))}),this.addAction({submission:"content-source-save"},function(){m();const e=i.get(d).collect();(function(e){if("HTML"===s)for(let t=0;t<e.length;t++)if(e[t].contentBlockName.trim()?.length<=0)return f(d.find("tr").eq(t)),o.validate();return!0})(e)&&(_.each(e,function(e,t){o.setValue("urls["+t+"].url",e.url),o.setValue("urls["+t+"].contentBlockName",e.contentBlockName),o.setValue("urls["+t+"].targetGroup",e.targetGroup||0)}),o.submit())}),AGN.Lib.Validator.new("content-source-url",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e){return!e.val()||n.isUrl(e.val())?[]:[{field:e,msg:t("url.invalid")}]}})}),AGN.Lib.Controller.new("custom-thumbnail-view",function(){function e(e,t="",i=""){let n=e.data("preview-name");n&&$(n).text(t),n=e.data("preview-image"),n&&(i?$(n).prop("src",i):$(n).each(function(){const e=$(this);e.prop("src",e.data("no-preview-src")||"")}))}this.addAction({change:"use-custom-thumbnail"},function(){$("#customThumbnailFile").prop("name",this.el.is(":checked")?"customThumbnailFile":"")}),this.addAction({change:"custom-thumbnail-image"},function(){const t=this.el,i=t.prop("files");if(i?.length){const n=i[0];if("image"==n.type||n.type.match("image/.*")){const i=new FileReader;i.onload=i=>{e(t,n.name,i.target.result)},i.readAsDataURL(n)}else AGN.Lib.Helpers.clearFormField(t),e(t)}else e(t)}),this.addAction({click:"delete-custom-thumbnail-image"},function(){const t=this.el.parent().parent().find('input[type="file"]');t.prop("files")?.length&&(AGN.Lib.Helpers.clearFormField(t),e(t))})}),AGN.Lib.Controller.new("dynamic-report",function(){const e=AGN.Lib.DateFormat;let i,n;function o(t){let i=`${t.shortname} (ID: ${t.id})`;if(t.sendTime){i+=` (${e.format(new Date(t.sendTime),window.adminDateTimeFormat)})`}return i}this.addDomInitializer("dynamic-report",function(){i=this.config.mailings,n=this.config.clickersGroupsCount,$.i18n.load(this.config.translations),function(){const n=function(t,i){const n=[],o=e.parse(t,window.adminDateFormat),r=i?e.parse(i,window.adminDateFormat):new Date;for(;o<=r;)n.push(e.format(o,window.adminDateFormat)),o.setDate(o.getDate()+1);return n}($("#filter-send-date-from").val(),$("#filter-send-date-to").val()),o=_.groupBy(i,t=>t.sendTime?e.format(new Date(t.sendTime),window.adminDateFormat):null),r=e=>n.map(t=>_.sumBy(o[t]||[],e)),s=$("#mailing-statistics-chart");new Chart(s[0].getContext("2d"),{type:"line",data:{labels:n,datasets:[{label:t("sentMailings"),data:r("sendCount"),borderColor:s.css("--chart-darkest-blue-color"),backgroundColor:s.css("--chart-darkest-blue-color"),pointRadius:1},{label:t("openers"),data:r("openersCount"),borderColor:s.css("--chart-light-blue-color"),backgroundColor:s.css("--chart-light-blue-color"),pointRadius:1},{label:t("clickers"),data:r("clickersCount"),borderColor:s.css("--chart-lime-color"),backgroundColor:s.css("--chart-lime-color"),pointRadius:1}]},options:{scales:{x:{ticks:{maxRotation:0}},y:{display:!1}},interaction:{mode:"index",intersect:!1},stacked:!1,plugins:{legend:{position:"bottom"},datalabels:{display:!1}}}})}(),function(){const e=$("#clickers-chart"),o=[e.css("--chart-darkest-blue-color"),e.css("--chart-dark-blue-color"),e.css("--chart-blue-color"),e.css("--chart-light-blue-color"),e.css("--chart-light-cyan-color"),e.css("--chart-cyan-color")],r=[`> ${n} ${t("clicks")}`],s=[_.sumBy(i,"clickersWithMoreThenXClicksCount")];for(let e=n;e>0;e--)r.push(`${e} ${t("clicks")}`),s.push(_.sumBy(i,`clickersByClicksCountMap.${e}`));new Chart(e[0].getContext("2d"),{type:"agnDoughnut",data:{labels:r,datasets:[{data:s,backgroundColor:o,borderWidth:0}]}})}(),function(){$("#avg-sent-opened").text(function(){const e=i.filter(e=>e.sendCount>0),t=e.filter(e=>e.openingsCount>0);return e.length?100*t.length/e.length:0}().toFixed(2)+"%");const e=i.length?_.sumBy(i,"revenue")/i.length:0;$("#avg-revenue").text(e.toFixed(2)+" €");const t=_.sortBy(i,["ordersCount"]).reverse();t.length&&$("#best-performing-mailing").text(o(t[0]));t.length>1&&$("#worst-performing-mailing").text(o(t[t.length-1]))}(),function(){const e=["ordersCount","revenue","clickers","openers"],t=e.map(e=>_.sortBy(i,[e]).reverse()),n=_.sortBy(i,i=>e.reduce((e,n,o)=>e+_.findIndex(t[o],{id:i.id}),0));$("[data-performance-mailing-info]").each((e,t)=>{e<n.length&&$(t).text(o(n[e]))})}()})}),AGN.Lib.Controller.new("edit-field-content",function(){this.addAction({click:"calculateRecipients"},function(){const e=$("#recipients-count"),t=AGN.Lib.Form.get(this.el);$.ajax({url:AGN.url("/recipient/calculate.action"),data:{targetId:t.getValue("targetId"),mailinglistId:t.getValue("mailinglistId")}}).always(t=>{e.val(t.count||0)}).fail(()=>e.val("?"))})}),AGN.Lib.Controller.new("evaluate-fields",function(){const e=AGN.Lib.Helpers;this.addDomInitializer("evaluate-fields",function(){const t=$("#evaluate-fields-chart"),i=this.config.stat,n=e.getStatColorsHexValues();new Chart(t[0].getContext("2d"),{type:"agnDoughnut",data:{labels:i.map(({value:e})=>e),datasets:[{data:i.map(({count:e})=>e),backgroundColor:n,borderWidth:0}]}})})}),AGN.Lib.Controller.new("export-view",function(){let e,t,i;function n(){const e=$("#user-columns").val(),t=e.includes("lastopen_date")||e.includes("lastclick_date");$("#24h-col-info").toggle(t)}function o(){const t=$("#mailing-bounce-column-option");if($("#recipient-export-recipientstatus").find(":selected").val()==e)t.removeAttr("disabled");else{AGN.Lib.Select.get($("#user-columns")).unselectValue("mailing_bounce"),t.attr("disabled","disabled")}}function r(){i.valid({})?(!function(e){_.each(t.collect(),(t,i)=>{e.setValue("customColumns["+i+"].dbColumn",t.dbColumn),e.setValue("customColumns["+i+"].defaultValue",t.defaultValue)})}(i),i.submit()):i.handleErrors()}this.addDomInitializer("export-view",function(){e=this.config.bounceUserStatusCode,o(),i=AGN.Lib.Form.get($("#exportForm")),t=new s($("#custom-column-mappings")),n()}),this.addAction({click:"save"},r),this.addAction({click:"evaluate"},r),this.addAction({change:"add-bounce-col-to-choose"},o),this.addAction({change:"user-columns-update"},n);class s extends AGN.Lib.InputTable{addEmptyRow(){i.valid({})?(i.cleanFieldFeedback(),super.addEmptyRow()):i.handleErrors()}}}),AGN.Lib.Controller.new("facebook-leadads",function(){var e=AGN_FACEBOOK.Login,i=AGN_FACEBOOK.LeadAds,n=AGN_FACEBOOK.SDK,o=AGN.Lib.Select,r={};this.addDomInitializer("facebook-leadads",function(){r=this.config,AGN.Lib.Storage.delete("fblst_"+r.FACEBOOK_LEADADS_APP_ID),n.load_sdk(r.FACEBOOK_LEADADS_APP_ID,c)});var s=function(e){$("#mailinglistId").prop("disabled",!e)},a=function(e){$("#doiMailingId").prop("disabled",!e)},l=function(e){$('[data-action="connect-page"]').prop("disabled",!e)},c=function(){e.attach_login_function(".facebook-login-btn",function(e){d(),i.list_manageable_pages(e,r.URL.LIST_FACEBOOK_PAGE_BINDINGS_AJAX_URL,"#facebook-pages-table",function(){AGN.Lib.Messages.alert("messages.error.reload")})},"pages_read_engagement, leads_retrieval"),d()},d=function(){e.doByLoginStatus(h,u)},u=function(){o.get($("#mailinglistId")).selectFirstValue(),s(!1),a(!1),l(!1),$(".facebook-login-btn").removeClass("hidden")},h=function(e){$(".facebook-login-btn").addClass("hidden"),s(!0),i.list_manageable_pages(e,r.URL.LIST_FACEBOOK_PAGE_BINDINGS_AJAX_URL,"#facebook-pages-table"),$('[data-action="connect-page"]').data("fbAccessToken",e),i.renew_page_access_tokens(e,r.URL.RENEW_FACEBOOK_PAGE_ACCESS_TOKENS_AJAX_URL,function(e){var i=JSON.parse(e);i.count>0&&AGN.Lib.Messages(t("defaults.success"),t("facebook.leadAds.renewedPageAccessTokens",i.count),"success")})};this.addAction({change:"mailinglist-change"},function(){l(!1),a(!1);var e=$(this.el),t=o.get(e).getSelectedValue();p(t),a(0!==t)});var p=function(e){var t=o.get($('[data-action="doi-mailing-change"]'));t.resetOptions(),t.setOptions([{id:0,text:"---"}]),t.selectFirstValue(),0!==e&&(a(!1),$.ajax({url:r.URL.LIST_ACTIONBASED_AJAX_URL,type:"GET",data:{mailinglist:e},success:function(e){if(e){var i=_.map(e.mailings,function(e){return console.log("mailing "+e.id+": "+e.shortname),{id:e.id,text:e.shortname}});i.unshift({id:0,text:"---"}),t.setOptions(i),t.selectFirstValue()}},error:function(e,t,i){console.log("status = "+t+", error = "+i),AGN.Lib.Messages.alert("messages.error.reload")},statusCode:{500:function(){onError&&onError()}}}))};this.addAction({change:"doi-mailing-change"},function(){var e=$(this.el),t=o.get(e).getSelectedValue();l(t>0)}),this.addAction({click:"connect-page"},function(){var e=$(this.el).data("fbAccessToken"),n=o.get($('[data-action="mailinglist-change"]')).getSelectedValue(),s=o.get($('[data-action="doi-mailing-change"]')).getSelectedValue();i.connect_pages(e,r.URL.CONNECT_FACEBOOK_PAGE_BINDINGS_AJAX_URL,"#facebook-pages-table",n,s,function(){i.list_manageable_pages(e,r.URL.LIST_FACEBOOK_PAGE_BINDINGS_AJAX_URL,"#facebook-pages-table"),AGN.Lib.Messages(t("defaults.success"),t("defaults.saved"),"success")},null,function(e){e&&e.page_names.forEach(function(e){AGN.Lib.Messages(t("facebook.leadAds.error.already_bound_to_other_company"),e,"alert")})})})}),AGN.Lib.Controller.new("form-trackable-links",function(){function e(e,t,i){const n=i.data("table").collect();_.each(n,function(i,n){e.setValueOnce(t+"["+n+"].name",i.name),e.setValueOnce(t+"["+n+"].value",i.value)})}this.addAction({submission:"save-all"},function(){const t=AGN.Lib.Form.get($("#userFormTrackableLinksForm"));e(t,"commonExtensions",$("#links-common-extensions")),t.submit()}),this.addAction({submission:"save-individual"},function(){const t=AGN.Lib.Form.get($("#userFormTrackableLinkForm"));e(t,"extensions",$("#link-extensions")),t.submit()})}),AGN.Lib.Controller.newExtended("grid-building-block-defaults","building-block-view",function(){const e=AGN.Lib.Helpers,i=AGN.Lib.Confirm,n=AGN.Lib.Form;let o;function r(t){return e.replaceAgnTags(t,(e,t)=>"agnIMAGE"!==e.name||!e.attributes.name||e.attributes.source&&"mediapool"!==e.attributes.source&&"mediapoolbg"!==e.attributes.source?t:AGN.url(`/mediapool/${encodeURIComponent(e.attributes.name)}/raw.action`))}function s(e){var t=e.closest("[data-ph-id]");return t.exists()?parseInt(t.data("ph-id")):0}function a(t){i.request(AGN.url("/mediapool/image/pick.action")).done(i=>{$(`#content-${t}`).val(i.id),e.clearFormField($(`#file-${t}`)),l(t,i.src,i.name,i.title)})}function l(e,t,i,n){const r=$(`#preview-${e}`),s=$(`#image-name-${e}`);r.attr("src")!==t&&r.attr("src",t||o.noPreviewImageLink),r.attr("title",n||""),s.text(i||"")}this.addDomInitializer("grid-building-block-defaults",function(){o=this.config,$("img[id^=preview]").each(function(){const e=$(this),t=e.attr("src");if(t){const i=r(t);i!==t&&e.attr("src",$.trim(i))}e.parent().removeClass("hidden")}),o.placeholders.filter(e=>e.placeholderType===o.CHECK_PLACEHOLDER_TYPE).forEach(e=>{const t=$(`\n            <div id="${e.placeholderId}-children" class="bordered-box-sm" data-show-by-checkbox="#content-${e.placeholderId}">\n                <div class="row g-2"></div>\n            </div>\n        `);t.insertAfter($(`#content-${e.placeholderId}`).parent()),e.options.split(",").forEach(e=>{t.find("> .row").append($(`.ph-${e}`))})}),AGN.Lib.CoreInitializer.run("checkbox-hider",$("#default-content-tile"))}),this.addAction({click:"chooseImage"},function(){const e=s(this.el);e>0&&(!function(e){const t=$(`#file-${e}`);return!!t.exists()&&!!t.val()}(e)?a(e):$(`#file-${e}`).trigger("click"))}),this.addAction({change:"chooseImageFile"},function(){const t=s(this.el);t>0&&function(t,i){const n=t.prop("files"),o=$(`#content-${i}`),r=$(`#image-category-${i}`).parent();if(n?.length){const o=n[0];if("image"===o.type||o.type.match("image/.*")){const e=new FileReader;e.onload=e=>{r.removeClass("hidden"),l(i,e.target.result,o.name,o.name)},e.readAsDataURL(o)}else r.addClass("hidden"),e.clearFormField(t),l(i)}else r.addClass("hidden"),l(i);o.val("")}(this.el,t)}),this.addAction({click:"deleteImage"},function(){const t=s(this.el);t>0&&function(t){e.clearFormField($(`#file-${t}`)),$(`#image-name-${t}`).text(""),$(`#content-${t}`).val(""),$(`#preview-${t}`).attr("src",o.noPreviewImageLink)}(t)}),this.addAction({click:"showMediapoolDialog"},function(){const e=s(this.el);e>0&&a(e)}),this.addAction({click:"chooseImageLink"},function(){const e=s(this.el);e>0&&$(`#content-${e}`).trigger("focus")}),this.addAction({change:"previewImageLink",keyup:"previewImageLink",mouseup:"previewImageLink"},function(){const e=s(this.el);e>0&&c(e,$.trim(this.el.val()))}),this.addAction({click:"save"},function(){(function(){const i=$.Deferred(),o=[],r=n.get($("#default-content-tile"));let a=!0;if(r.get$().find("input[type=file]").each(function(){const e=$(this),i=s(e),n=$(`#image-category-${i}`),l=e.prop("files");if(l?.length){const e=n.val();e>0?(o.push({placeholderId:i,image:l[0],categoryId:e}),r.cleanFieldFeedback(n)):(a=!1,r.showFieldError$(n,t("error.grid.noCategorySelected")))}else r.cleanFieldFeedback(n)}),a)if(o.length){const t=new FormData;o.forEach((e,i)=>{t.append(`uploads[${i}].file`,e.image),t.append(`uploads[${i}].fileName`,e.image.name),t.append(`uploads[${i}].title`,e.image.name),t.append(`uploads[${i}].categoryId`,e.categoryId)}),$.ajax(AGN.url("/mediapool/upload.action?asJson=true"),{type:"POST",dataType:"json",enctype:"multipart/form-data",processData:!1,contentType:!1,data:t}).done(t=>{!0===t.success?(o.forEach(i=>{const n=t.data[i.image.name]||0,o=i.placeholderId;$(`#content-${o}`).val(n),e.clearFormField($(`#file-${o}`))}),i.resolve()):(AGN.Lib.JsonMessages(t.popups),i.reject())}).fail(()=>i.reject())}else i.resolve();else i.reject();return i.promise()})().done(()=>n.get($("#default-content-tile")).submit())});const c=_.throttle((e,t)=>{const i=$(`#preview-${e}`);i.attr("src")!==t&&(t?i.attr("src",$.trim(r(t))):i.attr("src",t||o.noPreviewImageLink))},300)}),AGN.Lib.Controller.new("building-block-view",function(){const e=AGN.Lib.Template,t=AGN.Lib.Form;function i(t){t&&$.get(AGN.url(`/administration/table/${t}/columns.action`)).done(t=>$("#ref-table-placeholders").empty().append(t.map(t=>e.dom("ref-table-placeholder",{column:t}))))}function n(e,t){const i=$("[data-building-block-activeness-toggle]");i.addClass("disabled"),$.post(t.data("url")).done(n=>{n.success&&(t.toggleClass("hidden",!0),i.not(t).toggleClass("hidden",!1),function(e){const t=$("[data-building-block-activeness-indicator]");t.addClass("hidden"),t.not($(`[data-building-block-activeness-indicator="${!e}"]`)).removeClass("hidden")}(e),$("#building-block-delete-option").toggleClass("hidden",e)),AGN.Lib.JsonMessages(n.popups),i.removeClass("disabled")})}this.addDomInitializer("building-block-view",function(){i($('[data-action="load-refTable-cols"]').val())}),this.addAction({change:"load-refTable-cols"},function(){t.get(this.el).validate(),i(this.el.val())}),this.addAction({click:"activate"},function(){n(!0,this.el)}),this.addAction({click:"deactivate"},function(){n(!1,this.el)})}),AGN.Lib.Controller.newExtended("building-blocks-overview","activeness-overview",function(){this.addDomInitializer("building-blocks-overview",function(){if(location.hash){const t=parseInt(location.hash.substr(1));if(t>0){const i=$(`[data-bulk-checkbox][value="${t}"]`).closest("tr");e=i.position().top-i.height(),$(".table-wrapper__body").scrollTop(e)}}var e})}),AGN.Lib.Controller.new("grid-edit",function(){const e=AGN.Lib.Template;let t,i;function n(e,t,i){const n=parseInt(e.val());(n!=e.val()||n<t)&&e.val(t),n>i&&e.val(i)}function o(){const t=a(),i=s(),n=l(),o=$("#grid-preview-block");o.html(e.text("lb-grid-columns-preview",{columnsCount:i,columnWidth:t,gutter:n}));for(let r=0;r<i;r++){const s=r+1;o.append(e.text("lb-grid-row-preview",{columnsCount:i,firstBlockWidth:s,columnWidth:t,gutter:n,percent:Math.floor(100*s/i)}))}}function r(){return Math.floor(c("templateWidth")/s()-l())}function s(){return c("columnNum")}function a(){return c("columnWidth")}function l(){return c("gutter")}function c(e){return parseInt(d(e).val())}function d(e){return i.get$().find(`[name='${e}']`)}this.addDomInitializer("grid-edit",function(){t=this.config,i=AGN.Lib.Form.get($("#gridForm")),o()}),this.addAction({submission:"createTemplate"},function(){$("#templateCreationForm").submit()}),this.addAction({submission:"saveGrid"},function(){i.submit()}),this.addAction({change:"updateColnum"},function(){n(this.el,1,t.maxColumnsCount),d("columnWidth").val(r()),o()}),this.addAction({change:"updateTemplateWidth"},function(){n(this.el,50,2e3),d("columnWidth").val(r()),o()}),this.addAction({change:"updateColumnWidth"},function(){n(this.el,10,2e3),d("templateWidth").val(Math.ceil((a()+l())*s())),o()}),this.addAction({change:"updateGutterWidth"},function(){n(this.el,0,500),d("columnWidth").val(r()),o()}),this.addAction({click:"enableEditing"},function(){$(this.el).prop("disabled",!0),d("gridName").prop("disabled",!1),t.isGridInUse||$.each(["columnNum","columnWidth","gutter","templateWidth"],(e,t)=>{d(t).prop("disabled",!1)}),$("#createTemplateButton").addClass("hidden"),$("#saveAndCreateTemplateButton").removeClass("hidden"),i.get$().attr("data-action","saveGrid")})}),AGN.Lib.Controller.newExtended("grid-outer-template","grid-template-base",function(){this.addAction({click:"update-preview"},function(){const e=AGN.Lib.Form.get(this.el);e.setValue("outerHtml",$("#templateOuterHTML").val()),e.submit()})}),AGN.Lib.Controller.new("grid-overview",function(){this.addAction({submission:"createNewGrid"},function(){const e=AGN.Lib.Form.get(this.el),i=e.getValue("newGridName");$.get(AGN.url("/layoutbuilder/grid/checkName.action"),{name:i}).done(i=>{i.used?e.showFieldError("newGridName",t("fields.name.errors.name_in_use")):e.submit().done(()=>{AGN.Lib.Modal.getInstance(e.get$()).hide()})})})}),AGN.Lib.Controller.newExtended("grid-template-css","grid-template-base",function(){let e,t,i=[],n=[];function o(){const o=parseInt(e.val());!function(t){const o=AGN.Lib.Template.dom("template-css-iframe",{previewWidth:i[t],mediaQuery:n[t]});e.closest(".tile").find(".tile-body").html(o),AGN.Lib.CoreInitializer.run("iframe")}(o),function(e){void 0===t.getValue("previewSize")?t.setValueOnce("previewSize",e):t.setValue("previewSize",e)}(o),t.submit()}this.addDomInitializer("grid-template-css",function(){i=this.config.previewWidths,n=this.config.previewMediaQueries,t=AGN.Lib.Form.get($("#layoutPreviewForm")),e=$('[name="previewSize"]'),AGN.Lib.Storage.restoreChosenFields(e),o()}),this.addAction({change:"update-css-preview",click:"refresh-preview"},function(){AGN.Lib.Storage.saveChosenFields(e),t.setValue("css",$("#cssContents").val()),o()})}),AGN.Lib.Controller.newExtended("grid-template-settings","grid-template-base",function(){const e=AGN.Lib.Messages,t={11:"mailing.default.sender_and_reply_emails_changed",10:"mailing.default.sender_email_changed","01":"mailing.default.reply_email_changed"};let i=[],n=[];function o(e){const t=$("#target-mode-box");t.toggle(e),$("#regular-targets-box").toggleClass("border rounded p-2",e&&t.is(":visible"))}this.addDomInitializer("grid-template-settings",function(){i=$("#targetGroupSelect").val()||[],o(i.length>1),n=this.config.mailinglists}),this.addAction({submission:"save"},function(){const e=AGN.Lib.Form.get(this.el);!function(e){const t=$("#mailingParamsTable");if(!t.exists())return;_.each(t.data("table").collect(),(t,i)=>{e.setValueOnce(`settings.parameters[${i}].name`,t.name),e.setValueOnce(`settings.parameters[${i}].value`,t.value),e.setValueOnce(`settings.parameters[${i}].description`,t.description)})}(e),e.submit()}),this.addAction({change:"selectTargetGroups"},function(){const e=this.el.val()||[];e.length>1&&i.length<=1&&$("#recipientHasToBeInAllTargets").prop("checked",!0),o(e.length>1),i=e}),this.addAction({change:"select-mailinglist"},function(){const i=n.find(e=>e.id===parseInt(this.el.val()));if(!i)return;const o=$("#sender-email"),r=$("#reply-email"),s=i.senderEmail&&o.val()!==i.senderEmail,a=i.replyEmail&&r.val()!==i.replyEmail;s&&o.val(i.senderEmail).trigger("change"),a&&r.val(i.replyEmail);const l=_.result(t,`${+!!s}${+!!a}`);l&&e.info(l)})}),AGN.Lib.Controller.newExtended("grid-template-styles","grid-template-base",function(){this.addAction({click:"update-preview"},function(){const e=AGN.Lib.Form.get(this.el);$("#styles-tile").find('input[name^="styles["]').each(function(){const t=$(this);e.setValue(t.attr("name"),t.val())}),e.submit()})}),AGN.Lib.Controller.new("grid-template-base",function(){const e=AGN.Lib.LB.Definitions,t=AGN.Lib.LB.Ui;this.addAction({click:"toggle-released"},function(){if(e.EDITOR&&!e.EDITOR.isEditable())return;const i=$("[data-template-released-toggle]");i.addClass("disabled"),$.post(this.el.data("url")).done(e=>{e.success&&(t.setShown(this.el,!1),t.setShown(i.not(this.el),!0)),AGN.Lib.JsonMessages(e.popups),i.removeClass("disabled")})})}),AGN.Lib.Controller.new("iframe-progress",function(){this.addDomInitializer("iframe-progress",function(){const e=$("#preview-progress"),t=setTimeout(()=>{e.show()},100);$(".default-iframe").on("load",()=>{clearTimeout(t),e.hide()})})}),AGN.Lib.Controller.new("img-editor",function(){const e=AGN.Lib.Modal;let t,i,n,o,r,s,a,l,c=0,d=0;function u(e){let t=R().attr("src");t.startsWith("data:")||(t+=`&t=${(new Date).getTime()}`),n=new Image,n.src=t,n.onload=function(){o.width=n.width,o.height=n.height,r.drawImage(n,0,0),D(),h(),p(),N(),e&&e()}}function h(e,t){const i=t?.size?.width||o.width,n=t?.size?.height||o.height;S().val(Math.round(i)),C().val(Math.round(n))}function p(){$("#img-percent").val(100)}async function g(){if(c<=1||d<=1)return;await m(function(e,o){e.width=c,e.height=d,o.drawImage(n,t,i,c,d,0,0,c,d)}),k()}async function f(e,t){await m(function(e,i){e.width=t.size.width,e.height=t.size.height,i.drawImage(n,0,0,t.size.width,t.size.height)})}async function m(e){await v();const t=document.createElement("canvas"),i=t.getContext("2d");e(t,i),o.width=t.width,o.height=t.height,r.clearRect(0,0,o.width,o.height),r.drawImage(t,0,0),await v(),p()}async function v(){await new Promise(e=>{n.src=o.toDataURL(),n.onload=e})}async function b(e){w();await m(function(t,i){t.width=o.height,t.height=o.width,i.translate(t.width/2,t.height/2),i.rotate((e?-1:1)*Math.PI/2),i.drawImage(n,-n.width/2,-n.height/2)}),N()}async function y(e){await v(),w(),r.clearRect(0,0,o.width,o.height),r.save(),e?(r.scale(1,-1),r.drawImage(n,0,-o.height)):(r.scale(-1,1),r.drawImage(n,-o.width,0)),r.restore(),p(),await v()}function w(e){"crop"!==e&&k(!1),"resize"!==e&&P(!1)}function C(){return $("#img-height")}function S(){return $("#img-width")}function x(e){w();let{newWidth:t,newHeight:i}=e?function(){const e=$("#img-percent").val(),t=n.width,i=n.height,o=Math.round(t*(e/100)),r=Math.round(i*(e/100));return{newWidth:o,newHeight:r}}():function(){const e=n.width,t=n.height;let i=S().val(),o=C().val();if(M())if($("#img-width").is(":focus")){const n=i/e;o=Math.round(n*t)}else if($("#img-height").is(":focus")){const n=o/t;i=Math.round(n*e)}return{newWidth:i,newHeight:o}}();o.width=t,o.height=i,r.save(),r.drawImage(n,0,0,t,i),r.restore(),C().val(i),S().val(t),N()}function A(e,t){$(`[data-action="${e}"]`).toggleClass("active",t)}function E(){return!!T()}function T(){return $("#editor-canvas").data("Jcrop")}function k(e){void 0===e&&(e=!E()),e?I().Jcrop({onChange:O,onSelect:O,setSelect:[0,0,o.width,o.height]}):function(){const e=T();void 0!==e&&(e.destroy(),D(),N());c=0,d=0}(),A("crop",e)}function D(){I().resizable("instance")&&I().resizable("destroy"),I().resizable({handles:"ne, se, sw, nw, w, n, e, s",stop:f,resize:h,disabled:!0})}function M(){return $('[data-action="lock-proportions"]').prop("checked")}function P(e){void 0===e&&(e=function(){const e=I();return e.resizable("instance")&&e.resizable("option","disabled")}()),I().resizable(e?"enable":"disable"),A("resize",e)}function R(){return $("#editor-img")}function I(){return $("#editor-canvas")}function O(e){t=e.x,i=e.y,c=e.w,d=e.h}function N(){const e=I(),t=$(".ui-wrapper");e.css("width",o.width),e.css("height",o.height),t.css("width",o.width),t.css("height",o.height),h()}function L(e){const t=F(),i=$("<input/>").attr({type:"file",name:"image"}).css("display","none"),n=new DataTransfer;n.items.add(new File([e],$("#filename"))),i[0].files=n.files,t.get$().append(i),t.submit()}function F(){return AGN.Lib.Form.get(R())}this.addDomInitializer("img-editor",function(){s=this.el.data().saveUrl,o=document.getElementById("editor-canvas"),r=o.getContext("2d"),u(()=>{a=o.toDataURL(),l=F().$form.serializeArray()})}),this.addAction({click:"crop"},async function(){w("crop"),E()?await g():k()}),this.addAction({click:"resize"},async function(){await g(),w("resize"),P()}),this.addAction({click:"rotate-clockwise"},async function(){await b(!1)}),this.addAction({click:"rotate-counterclockwise"},async function(){await b(!0)}),this.addAction({click:"flip-horizontally"},async function(){await y(!1)}),this.addAction({click:"flip-vertically"},async function(){await y(!0)}),this.addAction({input:"change-size"},()=>x()),this.addAction({input:"change-size-via-percentage"},()=>x(!0)),this.addAction({change:"lock-proportions"},async function(){let e=M();A("lock-proportions",e),I().resizable("option","aspectRatio",e)}),this.addAction({click:"save"},async function(){if(await g(),await v(),function(){const e=F().$form.serializeArray();return _.isEqual(l,e)&&a===o.toDataURL()}())return e.getWrapper(R()).data("closedOnUnchangedSave",!0),e.getInstance(R()).hide(),void AGN.Lib.Messages.defaultSaved();o.toBlob(L)}),this.addAction({"upload:add":"replace"},function(){w();const e=new FileReader;e.readAsDataURL(this.data.file),e.onload=function(e){R().attr("src",e.target.result),u()}}),this.addAction({click:"reset"},function(){w(),R().attr("src",undefined),u()})}),AGN.Lib.Controller.new("import-modal",function(){this.addAction({submission:"import-for-workflow"},function(){const e=AGN.Lib.Form.get(this.el);e.validate()&&e.jqxhr().done(e=>{e.success?(AGN.Lib.Messaging.send("workflow:mailingCreated",e.data),AGN.Lib.Modal.getInstance(this.el).hide()):AGN.Lib.JsonMessages(e.popups,!0)})})}),AGN.Lib.Controller.new("import-profile",function(){const e=AGN.Lib.Template,i=AGN.Lib.Modal,n=AGN.Lib.Messages,o=AGN.Lib.Form,r=AGN.Lib.Select,s=AGN.Lib.CoreInitializer,a="agn:db-column";let l,c,d,u,h,p,g,f,m;function v(){const e=$("#import_actionnewrecipients"),t=$("#allMalinglistsCheckbox"),i=e.exists()&&e.val()>0,n=t.exists()&&t.is(":checked"),o=i&&!m||l||n,s=r.get(b());if(s.toggleDisabled(o),o&&s.clear(),t.exists()){const e=i&&!m||l;t.prop("disabled",e),t.parent().toggleClass("hidden",e)}}function b(){return $("#recipient-mailinglists")}function y(){return c.find("[data-gender-settings-row]:last-child")}function w(e){const t=c.find("[data-gender-settings-row]").toArray();for(let i=0;i<t.length-1;i++)if(_.intersection(Array.from(e),Array.from(C($(t[i])))).length)return n.alert("import.gender.error.duplicate"),!1;return!0}function C(e){const t=S(e),i=t.length?t.split(","):[];return new Set(_.without(_.map(i,_.trim),""))}function S(e){const t=e.find("[data-gender-text-value]");return t.is("input")?t.val().trim():t.text().trim()}this.addDomInitializer("import-profile-view",function(){var e;l=b().prop("disabled"),d=this.config.availableGenderIntValues,m=this.config.isClientForceSendingActive,e=x(this.config.genderMappings),c=$("#gender-mappings-block"),_.each(e,e=>{A(e[0],e[1])}),A("",""),v()}),this.addAction({click:"save"},function(){if(w(C(y()))){const e=o.get(this.el);!function(e){_.each(function(){const e={};return _.each(c.find("[data-gender-settings-row]"),t=>{const i=$(t),n=S(i),o=function(e){const t=e.find("[data-gender-int-value]");return t.is("select")?t.val():t.text()[0]}(i);n.length&&(e[o]=e.hasOwnProperty(o)?e[o]+", "+n:n)}),e}(),(t,i)=>{e.setValue(`genderMapping[${i}]`,t)})}(e),function(e){if(k())return;_.each(M(!0),(t,i)=>{e.setValueOnce("columnsMappings["+i+"].id",t.id),e.setValueOnce("columnsMappings["+i+"].fileColumn",t.fileColumn),e.setValueOnce("columnsMappings["+i+"].databaseColumn",t.databaseColumn),e.setValueOnce("columnsMappings["+i+"].mandatory",t.mandatory),e.setValueOnce("columnsMappings["+i+"].defaultValue",t.defaultValue)})}(e),e.submit()}}),this.addAction({change:"change-new-recipients-action"},function(){v()}),this.addAction({change:"allMailinglists-toggle"},function(){v()}),this.addAction({change:"change-mode"},function(){const e=$("#allMalinglistsCheckbox");e.exists()&&(e.parent().is(":visible")||e.prop("checked",!1).trigger("change"))}),this.addAction({click:"delete-gender-mapping"},function(){const e=this.el.closest("[data-gender-settings-row]");if(e.is(":first-child")){e.next("[data-gender-settings-row]").find(".form-label").removeClass("hidden")}e.remove()}),this.addAction({click:"add-gender-mapping",enterdown:"gender-enterdown"},function(){this.event.preventDefault(),function(){const e=C(y());if(e.size<1)return n.alert("import.gender.error.empty"),!1;return w(e)}()&&(!function(){const e=c.find('[data-action="add-gender-mapping"]');e.after("\n        <a href='#' class='btn btn-danger btn-icon' data-action='delete-gender-mapping'>\n            <i class='icon icon-trash-alt'></i>\n        </a>\n    "),e.remove()}(),A("",""),y().find("[data-gender-text-value]").focus())});const x=e=>{e||(e="");const t=Object.keys(e).map(t=>[t,e[t]]);return t.sort((e,t)=>e[1]-t[1]),t};function A(i,n){const o=c.find("[data-gender-settings-row]").length,r=_.map(d,e=>({value:e,selected:n==e,title:t(`import.gender.short.${e}`)}));c.append(e.text("gender-settings-table-row",{intValue:n,textValues:i,mappingsCount:o,genders:r})),s.run("select",c.find("[data-gender-int-value]:last-child"))}let E;function T(){const e=$("#manage-fields-tile"),t=k();e.find(".tile-controls").toggleClass("hidden",t),$("[data-mapping-db-column]").prop("disabled",t),$("[data-mappings-actions]").toggleClass("hidden",t),$("#upload-mappings-btn").prop("disabled",t),$("#uploadFile").prop("disabled",t)}function k(){return $("#import_automapping").is(":checked")}function D(e){const t=o.get(e);return t.validatorOptions={$mappingsBlock:f},t.valid()?(t.cleanFieldFeedback(),!0):(t.handleErrors(),!1)}function M(e=!1){if(!f||!f.exists())return[];const t=_.map(f.find("[data-mapping-row]"),function(e){const t=$(e);return{id:N(t,"id"),fileColumn:N(t,"fileColumn"),databaseColumn:N(t,"db-column"),mandatory:N(t,"mandatory"),defaultValue:N(t,"defaultValue")}}),i=t[t.length-1];return e&&u!==i.databaseColumn||t.pop(),t}function P(e){if(e.find("[data-action=set-today-date]").is(":checked")){const e=parseInt($("#daysCount").val()||0);return`CURRENT_TIMESTAMP${0===e?"":e>0?`+${e}`:e}`}return e.find("[data-mapping-defaultValue]").val()}function R(){$(".table-wrapper").trigger("table:updateBulkActions")}function I(e){const t=e.closest("[data-mapping-row]"),i=N(t,"db-column");if(t.is(":first-child")){t.next("[data-mapping-row]").find(".form-label").removeClass("hidden")}t.remove(),O(i)}function O(e){e&&e!==u&&_.each(f.find("[data-mapping-db-column]"),t=>{!function(e,t){e.val()!==t&&r.get(e).addOption(t)}($(t),e)})}function N(e,t){const i=e.find(`[data-mapping-${t}]`);return i.is(":checkbox")?i.is(":checked"):i.val()}function L(t,i=!1){if(f.exists()){f.empty(),g=e.prepare(i?"column-mapping-row-extended":"column-mapping-row");for(let e=0;e<t.length;e++){const i=t[e];i.index=e,H(i)}F(),G(),f.find("[data-mapping-db-column]").each(function(){const e=$(this);e.data(a,e.val())})}}function F(){H({index:-1,id:0,fileColumn:"",databaseColumn:"",mandatory:!1,defaultValue:""})}function G(){f.find("[data-mapping-db-column]").each(function(){B($(this).val())})}function B(e){f.find("[data-mapping-db-column]").each(function(){const t=$(this);t.val()!==e&&e!==u&&t.find(`[value="${e}"]`).remove()})}function H(e){e.isFirstMapping=0==f.find("[data-mapping-row]").length;const t=$(g(e));f.append(t),AGN.runAll(t)}this.addAction({change:"change-auto-mapping"},function(){T()}),this.addDomInitializer("import-profile-mappings",function(){E=this.config,E&&(h=E.columnMappings,u=E.doNotImportValue,p=E.columns,f=$("#column-mappings-block"),L(h),T())}),this.addAction({click:"upload-column-mappings"},function(){const e=o.get(this.el);$.ajax(AGN.url("/import-profile/mappings/read.action"),{type:"POST",dataType:"json",enctype:"multipart/form-data",processData:!1,contentType:!1,data:e.data()}).done(e=>{!0===e.success?L(function(e){const t=M(),i=t.filter(e=>!e.fileColumn),n=e.map(e=>{const i=t.find(t=>t.fileColumn===e.fileColumn);return void 0!==i?i:e});return[].concat(n,i)}(e.data)):AGN.Lib.JsonMessages(e.popups)})}),this.addAction({click:"bulk-mappings-delete"},function(){_.each($("[data-mapping-checkbox]:checked"),e=>I($(e))),R()}),this.addAction({change:"change-database-column"},function(){const t=this.el.data(a),i=this.el.val();O(t),B(i),this.el.data(a,i),this.el.closest("[data-mapping-row]").is("[data-mapping-new]")&&function(t){if(!f.parents("table").exists())return;const i=function(e){const t=p[e].simpleDataType.toLowerCase();switch(t){case"date":case"datetime":return t;default:return"text"}}(t),n=f.find("[data-mapping-defaultValue]").last(),o=n.val(),r=n.closest("td");r.children().first().data("type")!==i&&(r.empty(),r.append(function(t,i){switch(t){case"date":case"datetime":return e.text("date-def-val-input",{withTime:"datetime"===t,val:i});default:return e.text("text-def-val-input")}}(i,o)),function(e,t){"date"===t?AGN.runAll(e):"datetime"===t&&_.each(e.find("[data-field]"),function(e){AGN.Lib.Field.create($(e))})}(r,i))}(i)}),this.addAction({change:"set-today-date"},function(){$("#dateInput").toggleClass("hidden",this.el.is(":checked")),$("#daysInput").toggleClass("hidden",!this.el.is(":checked"));const e=$("#daysCount");e.on("change.offset keyup.offset",function(t){const i=e.val();if(i){const t=parseInt(i);if(isNaN(t))e.val(i.replace(/[^\d+-]/g,""));else{const n=(t<0?"":"+")+t;n!=i&&e.val(n)}}else"change"===t.type&&e.val("+0")})}),this.addAction({click:"show-column-mappings"},function(){const t=M();i.fromTemplate("column-mappings-modal").on("modal:close",()=>{f=$("#column-mappings-block"),g=e.prepare("column-mapping-row")}),f=$("#extended-column-mappings-block"),L(t,!0),s.run("table-cols-resizer",f.closest("table"))}),this.addAction({click:"save-extended-mappings"},function(){if(!D(this.el))return;const e=M(!0);f=$("#column-mappings-block"),L(e),i.getInstance(this.el).hide()}),this.addAction({click:"add-column-mapping"},function(){if(this.el.closest("table").exists()&&!D(this.el))return;const e=this.el.closest("[data-mapping-row]"),i=function(e){const t=e.find("[data-mapping-mandatory]");return{id:0,fileColumn:"",databaseColumn:e.find("[data-mapping-db-column]").val(),mandatory:!!t.exists()&&t.is(":checked"),defaultValue:P(e)}}(e);!function(e){if(e.databaseColumn===u)return!1;return M().some(t=>t.fileColumn===e.databaseColumn||t.databaseColumn===e.databaseColumn)}(i)?(e.remove(),i.index=$("[data-mapping-row]").last().data("mapping-row")+1,H(i),F(),G()):n.alert(t("export.columnMapping.error.duplicate"))}),this.addAction({click:"delete-column-mapping"},function(){I(this.el),R()})}),AGN.Lib.Controller.newExtended("layout-builder","grid-template-base",function(){const e=AGN.Lib.Action,i=AGN.Lib.Form,n=AGN.Lib.EndlessScroll,o=AGN.Lib.LB.Definitions,r=AGN.Lib.LB.ChildEditor,s=AGN.Lib.LB.Child,a=AGN.Lib.LB.ChildSample,l=AGN.Lib.LB.Ui,c=AGN.Lib.Helpers;let d,u,h="";function p(e){u.setup(e),new AGN.Lib.EndlessScroll(d,AGN.url(`/layoutbuilder/template/${u.getTemplateId()}/activeBuildingBlocks.action`),{loader:"#building-blocks-loader",onLoad:e=>{g(e),v()}})}function g(e,t=!0){e.each(function(){const e=$(this),i=e.find("[data-div-cache]");t?s.set(e,new a(i.json())):s.set(e,new s(i.json())),u.isEditable()&&e.draggable(a.draggableOptions()),i.remove()})}function f(){return $("#server-undo-option")}function m(e,t){return $(e.dataAdapter.item(t).element)}function v(){const e=$("#building-blocks-tile");e.find("[data-building-block]").each(function(){const e=$(this),t=e.find("[data-building-block-name]").text();e.toggleClass("hidden",!t.toLowerCase().includes(h))}),e.find(".tile-body").each(function(){const e=$(this),t=e.find("[data-building-block]:not(.hidden)").length>0;e.find("[data-no-found-blocks-msg]").toggleClass("hidden",t),h.length>0&&e.scrollTop(0)})}window.onbeforeunload=function(e){const i=t("grid.layout.leaveQuestion");if(e=e||window.event,u&&u.isChanged())return e&&(e.returnValue=i),i;AGN.Lib.Loader.show()},this.addDomInitializer("agn-tags-resolver",function(){o.AGN_TAGS_CONFIG=this.config}),this.addDomInitializer("layout-builder",function(){d=$("#grid-components-tab"),u||(u=new AGN.Lib.LB.Editor,o.EDITOR=u);const e=this.config;e.serverSideUndoAvailable=f().exists(),o.IS_BASIC_LB=e.IS_BASIC_LB;AGN.Lib.AutoSave.initialize(`template-components/${e.templateId}`,_.bind(u.getDataForAutoSave,u),_.bind(u.checkIfDataRestoreNeeded,u),function(t){p($.extend(e,{children:t.children})),u.setChanged(!0)}).fail(()=>p(e)),u.controlRssBtn(),$(document).on("tile:show",function(e){const t=r.get();if(!t)return;const i=$(e.target);t.get$().find(i).exists()&&t.notifyTabChanged(i)})}),this.addAction({click:"update-available-blocks"},function(){const e=this.el.attr("href");$.get(e).done(e=>{AGN.Lib.Confirm.create(e).done(()=>{n.get(d).load()})})}),this.addAction({click:"undo"},()=>{u.undo()||f().trigger("click")}),this.addAction({click:"redo"},()=>u.redo()),this.addAction({change:"visibleTargets"},function(){u.isEditable()&&u.setTargetId(parseInt(this.el.val()))}),this.addAction({"select2:open":"visibleTargets"},function(){u.isEditable()&&setTimeout(()=>function(e){const t=e.data("select2"),i=t.dropdown.$dropdown,n=i.find(".select2-results__options"),r=i.css("min-width"),s=i.outerWidth();i.find(".select2-results__option").each(function(){const e=$(this);t.dataAdapter.item(e).id>o.ALL_RECIPIENTS&&e.addClass("sortable")}),n.sortable({items:".select2-results__option.sortable",containment:"parent",tolerance:"pointer",distance:5,opacity:.4,cursor:"move",start:function(e,t){i.css("min-width",s),t.item.removeClass("select2-results__option--selectable")},stop:function(e,t){i.css("min-width",r),t.item.addClass("select2-results__option--selectable")},update:function(e,i){const n=m(t,i.item),o=i.item.prev(),r=i.item.next();o.exists()?m(t,o).after(n):r.exists()&&m(t,r).before(n),u.setLayeringByTargets(l.getAvailableTargetIds())}})}(this.el),0)}),this.addAction({"select2-close":"visibleTargets"},function(){u.isEditable()&&this.el.data("select2").dropdown.$dropdown.find(".select2-results__options").sortable("destroy")}),this.addAction({click:"clear-recycle-bin"},function(){if(!u.isEditable())return;const e=u.getRecycledChildren();e.length?$.ajax(this.el.attr("href"),{method:"POST",traditional:!0,data:{children:e}}).done(e=>{e.success&&u.clearRecycleBin()}):u.clearRecycleBin()}),this.addAction({click:"deleteRow"},function(){u.isEditable()&&(u.removeRow(AGN.Lib.LB.Row.get(this.el)),v())}),this.addAction({click:"clone"},function(){if(u.isEditable()){const e=s.get(this.el);e&&u.cloneChild(e)}}),this.addAction({click:"remove"},function(){if(u.isEditable()){const e=s.get(this.el);e&&(u.removeChild(e,!0),v())}}),this.addAction({change:"previewImageSrc",keyup:"previewImageSrc",mouseup:"previewImageSrc"},function(){u.isEditable()&&r.get().updateImageSrc(this.el)}),this.addAction({change:"chooseImageFile"},function(){u.isEditable()&&r.get().updateImage(this.el,!1)}),this.addAction({change:"changeImageCategory"},function(){if(u.isEditable()){const e=this.el.data("placeholder-id");r.get().syncImageCategories(e,this.el.val()),r.get().updateCategory(e)}}),this.addAction({change:"chooseMobileImageFile"},function(){u.isEditable()&&r.get().updateImage(this.el,!0)}),this.addAction({click:"chooseImage"},function(){if(u.isEditable()){const e=this.el.data("placeholder-id");r.get().chooseImage(e)}}),this.addAction({click:"deleteImage"},function(){if(u.isEditable()){const e=this.el.data("placeholder-id");r.get().deleteImage(e,!1)}}),this.addAction({click:"deleteMobileImage"},function(){if(u.isEditable()){const e=this.el.data("placeholder-id");r.get().deleteImage(e,!0)}}),this.addAction({click:"showMediapoolDialog"},function(){if(u.isEditable()){const e=this.el.data("placeholder-id");r.get().showMediapoolDialog(e)}}),this.addAction({change:"set-toc-item"},function(){u.isEditable()&&r.get().setTocItem(this.el.is(":checked"))}),this.addAction({change:"use-toc-item"},function(){u.isEditable()&&r.get().updateToC()}),this.addAction({change:"child-target-change"},function(){u.isEditable()&&r.get().updateChildTarget(parseInt(this.el.val()))}),this.addAction({change:"change-interest-group"},function(){u.isEditable()&&r.get().updateChildInterestGroup()}),this.addAction({change:"savePlaceholder",enterdown:"savePlaceholder"},function(){u.isEditable()&&r.get().savePlaceholder(this.el.data("ph-id")),"enterdown"===this.event.type&&this.event.preventDefault()}),this.addAction({submission:"child-save"},function(){this.event.preventDefault()}),window.Jodit||this.addAction({"ckeditor-save":"save-text-ph"},function(){u.isEditable()&&r.get().savePlaceholder(this.el.data("ph-id"))}),this.addAction({change:"changeContentPool"},function(){const e=$("#grid-contentpool-tab"),t=e.find("[data-no-found-blocks-msg]"),i=parseInt(this.el.val());if(i>0){const t=n.get(e),o=AGN.url(`/mailing/${i}/buildingBlocks.action`);t?t.load(o):new n(e,o,{loader:"#building-blocks-loader",onLoad:e=>{g(e,!1),v()}})}else e.find(".lb-building-blocks").empty();l.setShown(t,0===i)}),this.addAction({keyup:"search-building-blocks"},function(){h=this.el.val().toLowerCase(),v()}),this.addAction({submission:"save-content"},function(){if(u.isEditable()){let e=!1;if(u.isTextVersionGenerationAllowed()){e=$("#update-text-version:checked").length>0}u.saveMadeChoice(e),u.save(e),AGN.Lib.AutoSave.clear(`template-components/${u.getTemplateId()}`)}}),this.addAction({click:"import-from-content-source"},function(){(new AGN.Lib.LB.RssImporter).import()}),e.new({"form:loadershow":"form"},function(){l.setLoading(!0)}),e.new({"form:loaderhide":"form"},function(){l.setLoading(!1)}),this.addAction({click:"fill-placeholders-from-reftable-click",enterdown:"fill-placeholders-from-reftable-enterdown"},function(){const e=i.get(this.el);if(!u.isEditable()||!e.validate())return;const t=$("#refTablePhGroup").val(),n=r.get().child;$.get(AGN.url(`/administration/table/${n.getRefTableName()}/${$("#refTable-key").val()}.action`)).done(e=>function(e,t,i){_.each(e,(e,n)=>{const o=_.find(t,e=>e.name===(i?`${i}:${n}`:n));o&&(c.setValue($(`[data-ph-id="${o.id}"]`),e),r.get().savePlaceholder(o.id))})}(e,n.getPlaceholders(),t))})}),AGN.Lib.Controller.newExtended("lb-template-list","activeness-overview",function(){this.addAction({submission:"grid-template-validation"},function(){const e=AGN.Lib.Form.get(this.el),i=$("#newTemplateName").val();""!==i?$.get(AGN.url("/layoutbuilder/template/validateTemplateName.action"),{newTemplateName:i}).done(i=>{!0===i?e.submit("static"):e.showFieldError("newTemplateName",t("fields.name.errors.name_in_use"))}):e.showFieldError("newTemplateName",t("fields.required.errors.missing"))})}),AGN.Lib.Controller.new("login",function(){const e="login-page",i=AGN.Lib.Storage,n=AGN.Lib.Messages,o=AGN.Lib.Form;function r(){return i.get(e)||{}}function s(){const t=r(),n=new Date;n.setDate(n.getDate()+30),t.notificationDismissExpiration=n.getTime(),function(t){i.set(e,t)}(t)}function a(e){const t=e.originalEvent;return t.getModifierState&&t.getModifierState("CapsLock")}this.addDomInitializer("login",function(){!0===this.config.SHOW_TAB_HINT&&function(){const e=r();if(e?.notificationDismissExpiration)return e.notificationDismissExpiration<=Date.now();const t=localStorage.getItem("closedDate");if(t){const e=new Date,i=new Date(t);return i.setDate(i.getDate()+30),e-i>0}return!0}()&&n(t("defaults.info"),t("logon.info.multiple_tabs"),"info",s,!1),this.config.logoutMsg&&n.infoText(this.config.logoutMsg)}),this.addAction({keydown:"password-change"},function(){a(this.event)&&o.showFieldError$(this.el,t("login.error.capslock"))}),this.addAction({keyup:"password-change"},function(){a(this.event)||o.get(this.el).cleanFieldFeedback(this.el)}),this.addAction({click:"showPasswordChangeForm"},function(){$("#suggestion-view").addClass("hidden"),$("#submission-view").removeClass("hidden")})}),AGN.Lib.Controller.new("mailing-upload-attachment",function(){function e(e){let t="";if(e)t=AGN.Lib.Select.get($("#pdfUploadId")).getSelectedText();else{const e=$("#attachmentFile").prop("files");e&&e.length&&(t=e[0].name)}$("#attachmentName").val(t)}this.addAction({change:"change-attachment-file"},function(){e(!1)}),this.addAction({change:"change-upload-file"},function(){e(!0)}),this.addAction({change:"use-pdf"},function(){e(this.el.is(":checked"))})}),AGN.Lib.Controller.new("mailing-images",function(){const e=AGN.Lib.Modal,t=AGN.Lib.Template,i=AGN.Lib.Form;function n(e){return e.name&&e.name.includes(".")?e.name.substring(e.name.lastIndexOf(".")+1).toLowerCase():""}function o(e){return/^image/.test(e.type)?URL.createObjectURL(e):""}function r(){$("#upload-files").val(""),$("#dropzone").trigger("upload:reset")}this.addAction({"upload:add":"image-upload"},function(){const i=this.data.file,s=this.data.index;let a=$("#components-upload-modal");a.exists()||(a=e.fromTemplate("userform-images-upload-modal-template"),a.on("modal:close",r));const l=a.find("#components-uploads-container"),c=t.dom("mailing-upload-image",{index:s,fileName:i.name,previewUrl:o(i),isArchive:"zip"===n(i)});l.append(c),AGN.runAll(c)}),this.addAction({click:"upload-images"},function(){const t=i.get(this.el),n=e.getWrapper(this.el);t.get$().on("submitted",()=>{document.contains(n[0])&&n.css("opacity",1)}),t.submit(),n.css("opacity",0)})}),AGN.Lib.Controller.new("mailing-overview",function(){const e=AGN.Lib.Form,i=AGN.Lib.DateFormat,n=[{key:"isgrid",text:t("mailing.default.grid"),class:"mailing.status.emc"},{key:"isCampaignManager",text:t("workflow.campaign"),class:"mailing.status.cm"}];function o(e,t){$("#filterSendDateBegin").val(e).trigger("change"),$("#filterSendDateEnd").val(t).trigger("change")}function r(e){$("#filterSendDateBegin").get(0).toggleAttribute("readonly",e),$("#filterSendDateEnd").get(0).toggleAttribute("readonly",e)}this.addDomInitializer("mailing-overview",function(){var t;(t=e.getWrapper(this.el)).off("form:submit"),t.off("submitted"),function(t){t||(t=[]);const i=$("#status-filter"),o=AGN.Lib.Select.get(i);_.each(n,e=>{i.append(`<option value="${e.key}" data-badge-class="${e.class}">${e.text}</option>`),t.includes(e.key)&&o.selectOption(e.key)});const r=e.get(i);r.get$().on("form:submit",()=>{let e=0;_.each(n,t=>{o.isOptionSelected(t.key)&&(r.setValueOnce(`filterBadges[${e++}]`,t.key),o.$findOption(t.key).attr("disabled",!0))})}),r.get$().on("submitted",()=>{n.forEach(e=>{o.$findOption(e.key).attr("disabled",!1)})})}(this.config.badgesFilters)}),this.addAction({"table-column-manager:add":"update-columns"},function(){const t=e.get(this.el);t.setValueOnce("selectedFields",this.data.columns),t.setValueOnce("inEditColumnsMode",!0),t.submit()}),this.addAction({"table-column-manager:apply":"update-columns"},function(){const e=this.data.columns;$.ajax({type:"POST",url:AGN.url("/mailing/setSelectedFields.action"),traditional:!0,data:{selectedFields:e}}).done(t=>{t.success&&AGN.Lib.WebStorage.extend("mailing-overview",{fields:e}),AGN.Lib.JsonMessages(t.popups)})}),this.addAction({click:"send-date-filter-period"},function(){!function(e){if(e.is(":checked")){const t=`input:checkbox[name="${e.attr("name")}"]`;$(t).prop("checked",!1),e.prop("checked",!0)}else e.prop("checked",!1)}(this.el),o(function(){const e=$("input[name='sendDatePeriod']:checked").val();if(!e)return"";const t=new Date;return t.setDate(t.getDate()-e),i.format(t,window.adminDateFormat)}(),$("input[name='sendDatePeriod']:checked").length?i.format(new Date,window.adminDateFormat):""),r($("input[name='sendDatePeriod']:checked").length>0)}),this.addAction({click:"reset-send-date-filter"},function(){o("",""),$('input[name="sendDatePeriod"]:checked').removeAttr("checked"),r(!1)})}),AGN.Lib.Controller.new("mailing-params",function(){let e,t=$("#mailingSettingsForm"),i=$("#mailingParamsTable");function n(){0!==t.dirty("showDirtyFields").filter((e,t)=>!$(t).closest("#mailingParamsTable").length).length||function(){const t=e.map(function(e){const t=_.omit(e,"mailingID","mailingInfoID","changeDate");return Object.keys(t).forEach(function(e){null===t[e]&&(t[e]="")}),t});return JSON.stringify(t)!==JSON.stringify(i.data("table").collect())}()||t.dirty("setAsClean")}this.addDomInitializer("mailing-params",function(){e=this.config.params,t=$("#mailingSettingsForm"),t.dirty("setAsClean"),t.dirty("refreshEvents"),i.on("input-table:row-removed",n)})}),AGN.Lib.Controller.new("mailing-preview",function(){const e=AGN.Lib.Form,t=AGN.Lib.Messages,i=AGN.Lib.Helpers,n=AGN.Lib.Select;let o;function r(){$(this.contentDocument||this.contentWindow.document).find("img").filter((e,t)=>$(t).attr("src")?.includes("mediapool_element")).each(function(){const e=$(this).attr("src");$(this).attr("src",`${e}${e.includes("?")?"&":"?"}forMobile=true`)})}function s(){e.get($("#preview-form")).submit()}function a(){l(),d()}function l(){const e=c();if(!e.exists())return;const t=e.val().length<=0;$("#personalized-test-run-container").toggleClass("hidden",t)}function c(){return $("#personalized-test-recipients")}function d(){const e=!("TARGET_GROUP"===h())&&function(){const e=u();return-1===n.get(c()).getSelectedValue().indexOf(e)}();$('[data-action="add-to-personalized-test-run"]').toggle(!!e)}function u(){return"MANUAL"===h()?$("#customerEmail").val():$('[name="customerATID"]').find(":selected").data("email")}function h(){return $('[name="modeType"]').val()}this.addDomInitializer("mailing-preview",function(){o=this.config.MAILING_ID;const t=e.get(this.el);t.initFields(),t.initValidator(),a(),function(e,t){return e.MOBILE_SIZES.includes(parseInt(t.getValue("size")))}(this.config,t)&&$('[name="previewFrame"]').hide().on("load",r).show()}),this.addAction({change:"refresh-preview",click:"update-preview"},function(){s()}),this.addAction({change:"change-stored-header-data"},function(){s()}),this.addAction({change:"change-header-data"},function(){s()}),this.addAction({click:"change-preview-customer-options"},function(){d()}),this.addAction({input:"change-personalized-test-recipients",change:"change-personalized-test-recipients"},function(){a()}),this.addAction({click:"add-to-personalized-test-run"},function(){new Promise(function(e,n){const r=u();i.isValidEmail(r)?$.get(AGN.url(`/mailing/preview/${o}/isRecipient.action`),{email:r}).done(t=>{t.success?e(r):(AGN.Lib.JsonMessages(t.popups,!0),n())}):t.alert("defaults.invalidEmail")}).then(e=>{const t=c(),i=n.get(t);i.hasOption(e)||i.addOption(e),i.selectOptions(_.union(t.val(),[e])),a()})}),this.addAction({click:"personalized-test-run"},function(){const e=c(),t=e.val();$.post(AGN.url(`/mailing/send/${o}/personalized-test.action`),{mailingTestRecipients:t}).done(t=>{t&&!0===t.success&&(e.val([]),AGN.Lib.CoreInitializer.run("select",e),l()),AGN.Lib.JsonMessages(t.popups,!0)})}),this.addAction({click:"download-attachment"},function(){const e=$("<a>").attr("href",$("#attachments").val());$("body").append(e),e[0].click(),e.remove()})}),AGN.Lib.Controller.new("mailing-priorities",function(){const e=AGN.Lib.Template,t=AGN.Lib.Helpers,i=AGN.Lib.DateFormat,n=".mailing-priority",o=".mailing-priority-container";let r,s,a,l,c,d,u;const h=()=>{const e=$("#date-picker");_.keys(u.mailingsMap).sort().length&&(e.datepicker("getDate")||e.datepicker("setDate",i.parse(_.reduce(_.keys(u.mailingsMap),function(e,t){return e<t?e:t})))),e.trigger("change")};this.addDomInitializer("mailing-priorities",function(){u=this.config,r=$("#ordered-area"),s=$("#unordered-area"),l=$("#priorityCount"),a=$("#save-btn");const e=$(".tiles-container");$(o).sortable({handle:".mailing-priority__drag-btn",opacity:.4,connectWith:o,items:n,helper:"clone",containment:e,appendTo:document.body,update:function(){this.id===r.attr("id")&&(!function(){let e=1,t=10;r.children(n).each(function(){const i=$(this);let n=0;i.data("type")==u.DATE_BASED_TYPE?(n=t,e=t,t+=10):(n=e,e>t&&(t=10*Math.round(e/10))),e++,i.find(".mailing-priority__order").text(`${n}.`)})}(),m())},out:function(){p($(this),!1)},over:function(e,t){p($(e.target),!1),p($(this),!0)},start:function(){p($(this),!0)},stop:function(){p($(this),!1)}}),h()}),this.addAction({change:"priorityCount"},m),this.addAction({input:"priorityCount"},function(){const e=parseFloat(this.el.val()),t=!isNaN(e)&&e>=0?e:0;this.el.val(t)}),this.addAction({change:"change-date"},function(){const e=this.el.datepicker("getDate");e?g(function(e){return`${t.pad(e[0],4)}-${t.pad(parseInt(e[1])+1,2)}-${t.pad(e[2],2)}`}([e.getFullYear(),e.getMonth(),e.getDate()])):g()}),this.addAction({click:"save"},function(){const e=AGN.Lib.Form.get(this.el);e.setValueOnce("prioritizedIds",v()),e.submit()});const p=(e,t)=>{e.closest(o).toggleClass("highlighted",t)};function g(t){const i=function(e){let t=(u.mailingsMap[e]||[]).filter(e=>e.mailingType!==u.DATE_BASED_TYPE||e.priority>0);const i=t.map(e=>e.id),n=f(i);return _.union(t,n,"id").sort((e,t)=>e.priority>t.priority?1:-1)}(t);$(n).remove(),function(t){t&&t.length&&t.forEach(function(t){t.thumbnailId?t.thumbnailUrl=u.thumbnailLinkPattern.replace("__thumbnailId__",t.thumbnailId):t.thumbnailUrl=u.noPreviewUrl;const i=e.dom("draggable-mailing-priority-entry",t);t.priority?r.append(i):s.append(i),AGN.runAll(i)})}(i),m(!0)}const f=e=>{const t=[],i=_.clone(e);return _.keys(u.mailingsMap).forEach(e=>{u.mailingsMap[e].forEach(e=>{e.mailingType!=u.DATE_BASED_TYPE||i.includes(e.id)||(i.push(_.clone(e).id),t.push(e))})}),t};function m(e){const t=v(";"),i=l.val();if(null==c&&null==d||e)if(c=t,d=i,i>0)a.prop("disabled",!0);else{const e=r.children(n).filter(function(){return $(this).data("id")>0}).length;l.val(e),a.prop("disabled",!e)}else a.prop("disabled",t==c&&i==d)}function v(e){const t=[];return r.children(n).each(function(){const e=$(this).data("id");e>0&&t.push(e)}),e?t.join(e):t}}),AGN.Lib.Controller.new("mailing-recipients",function(){const e=AGN.Lib.Form;this.addAction({"table-column-manager:add":"update-columns"},function(){const t=e.get(this.el);t.setValueOnce("selectedFields",this.data.columns),t.setValueOnce("inEditColumnsMode",!0),t.submit()}),this.addAction({"table-column-manager:apply":"update-columns"},function(){const e=this.data.columns;$.ajax({type:"POST",url:AGN.url("/mailing/recipients/setSelectedFields.action"),traditional:!0,data:{selectedFields:e}}).done(t=>{t.success&&AGN.Lib.WebStorage.extend("mailing-recipient-overview",{fields:e}),AGN.Lib.JsonMessages(t.popups)})})}),AGN.Lib.Controller.new("reference-content-settings",function(){let e,t,i=!1,n=!1,o=[];function r(){const e=$("#referenceTableSelect").children("option:selected");$("#keyColumnText").val(e.exists()?e.data("key-column"):"")}function s(e){return"Item"+e}function a(t){const i=function(e,t){return AGN.Lib.Template.dom("mailing-reference-content-item",{name:s(e),value:t,disabled:!n})}(l().length+1,t);e.append(i)}function l(){return $("#reference-content-items .row")}this.addDomInitializer("reference-content-settings",function(){var s;e=$("#reference-content-items"),t=$("#mailingSettingsForm"),r(),i=this.config.isAvailable,n=this.config.isEnabled,s=this.config.items,n?_.each(s,e=>a(e)):a(""),o=l(),$("#referenceContentEnabled").on("change",function(){$("#referenceTableSelect").prop("disabled",!$(this).prop("checked"))}),t.dirty("setAsClean"),t.dirty("refreshEvents")}),this.addAction({change:"select-reference-table"},function(){r()}),this.addAction({click:"add-reference-content-item"},function(){!function(){const t=e.find('[data-action="add-reference-content-item"]');t.after(_.template(AGN.Opt.Templates["mailing-reference-content-delete-btn"])({disabled:!n})),t.remove()}(),a(""),t.dirty("setAsDirty")}),this.addAction({click:"delete-reference-content-item"},function(){this.el.closest(".row").remove(),l().each((e,t)=>{$(t).find(".input-group-text").text(s(e+1))}),o.length!==l().length||o.some(e=>!l().includes(e))||t.dirty("setAsDirty")})}),AGN.Lib.Controller.new("mailing-send",function(){const e=AGN.Lib.Form,t=AGN.Lib.Confirm,i=AGN.Lib.Page,n=AGN.Lib.Template,o=AGN.Lib.Messages,r="RECIPIENT";let s,a,l;const c=function(){const e=$(".transmission-mark");e.parent().find("button").removeClass("hidden"),e.remove()},d=function(e,t){const i=n.dom("mailing-workstatus-icon",{workStatus:e,tooltip:t});$("#workstatus-icon").replaceWith(i),AGN.Lib.CoreInitializer.run("tooltip",i)};function u(){const e=$("#get-approval-switch").prop("checked"),t=$("#test-run-options");t.find("option:not([value='"+a.join("']):not([value='")+"']").attr("disabled",e),e&&-1===a.indexOf(t.val())&&t.val(t.find("option:not(:disabled):first").val()).trigger("change")}function h(){const e=$("#test-run-options");if(!e.exists())return;const t=e.val()==r,i="TARGET"==e.val(),n="SEND_TO_SELF"==e.val(),o=!t||!$("#save-target-toggle").prop("checked");s.parent().toggleClass("hidden",!t),$("#adminSendButton").parent().toggleClass("hidden",t||i||n),$("#testTargetSaveButton").parent().toggleClass("hidden",o),$("#test-run-target-name-input").toggleClass("hidden",o),$("#testRunOptionSelect").prop("disabled",!i),s.find("input").prop("disabled",!t)}this.addDomInitializer("test-mailing",function(){s=$("#test-recipients-table"),p(this.config.testRecipients),a=JSON.parse(this.config?this.config.approvalOptions:"[]"),u(),$("#get-approval-switch").on("change",function(){u()}),h(),$("#test-run-options").on("change",function(){h()})}),this.addDomInitializer("send-mailing",function(){l=this.config;const e="en-US"===window.adminLocale?",":".";_.each($(".commaSplitInput"),t=>{const i=$(t),n=i.val().replace(/\B(?=(\d{3})+(?!\d))/g,e);i.val(n)}),b(),l.approximateMaxDeliverySize>l.errorSizeThreshold&&o.warnText(n.text("delivery-size-error-msg"))}),this.addAction({click:"check-links"},function(){$.post(l.urls.CHECK_LINKS).done(e=>AGN.Lib.RenderMessages($(e)))}),this.addAction({click:"send-world"},function(){if(l.approximateMaxDeliverySize>l.errorSizeThreshold)return void o.alertText(n.text("delivery-size-error-msg"));const i=()=>{const i=e.get(this.el);i.setActionOnce(AGN.url("/mailing/send/confirm-send-world.action")),i.submit("confirm").done(e=>{t.create(e).done(e=>i.updateHtml(e))})};l.approximateMaxDeliverySize>l.warningSizeThreshold?t.from("warning-mailing-size-modal").done(i):i()});const p=function(e){if(!e.length){const e=n.dom("test-recipient-row",{value:"",newRow:!0,sent:!1});return s.append(e),void AGN.runAll(e)}for(let t=0;t<e.length;t++){const i=t===e.length-1,o=n.dom("test-recipient-row",{value:e[t],newRow:i,sent:!0});s.append(o),AGN.runAll(o)}};this.addAction({change:"save-interval-settings"},function(){const t=e.get(this.el);t.setActionOnce(AGN.url("/mailing/send/interval.action")),t.submit()}),this.addAction({click:"resume-sending"},function(){const e=this.el,t=e.data("link");$.post(t).done(t=>{i.render(t),e.parent().remove()})}),this.addDomInitializer("status-mail-recipients",function(){const e=this.config.recipients||"",t=$("#status-emails-block");e.split(" ").filter(e=>e).forEach(e=>t.append(n.text("status-mail-recipient-row",{email:e,newRow:!1}))),t.append(n.text("status-mail-recipient-row",{email:"",newRow:!0}))}),this.addAction({click:"status-mail-recipient-row-delete"},function(){const e=this.el.closest("[data-status-mail-recipient-row]"),t=e.data("mailing-id");e.remove(),f(t,g())}),this.addAction({click:"status-mail-recipient-row-add",enterdown:"status-mail-recipient-change"},function(){this.event.preventDefault();const e=this.el.closest("[data-status-mail-recipient-row]"),t=e.find("input"),i=t.val();i&&f(e.data("mailing-id"),g(!0),()=>{e.before(n.text("status-mail-recipient-row",{email:i,newRow:!1})),t.val("")})}),this.addAction({enterdown:"send-mailing"},function(){this.event.preventDefault(),$("#send-btn").trigger("click")});const g=(e=!1)=>{let t=$("[data-status-mail-recipient-row]").find("input");return e||(t=t.not(":last")),t.map(function(){return $(this).val().trim()}).get().join(" ")},f=(e,t,i)=>{$.post(AGN.url(`/mailing/send/${e}/save-statusmail-recipients.action`),{emails:t}).done(e=>{e.success&&i&&i(),AGN.Lib.JsonMessages(e.popups)})};function m(e){const t=$("#testTargetSaveButton"),i=t.find("i");e&&i.hide(),t.toggleClass("btn-primary",!e,500),t.toggleClass("btn-success",e,500),e?t.css({cursor:"not-allowed","pointer-events":"none"}):t.css({cursor:"","pointer-events":""}),i.toggleClass("icon-save",!e),i.toggleClass("icon-check",e),i.show(500)}function v(){return $('input[name="mailingTestRecipients"]').map(function(){return this.value.trim()}).get().filter(e=>e)}function b(){const e=$("#maxRecipients");e.exists()&&"0"===e.val()&&e.val("")}function y(e,t){const i=e.prop("checked");e.prop("disabled",!0);const n=()=>{e.prop("checked",!i),o.defaultError()},r={};r[t]=e.is(":checked"),$.ajax({type:"POST",url:e.data("url"),data:r}).done(e=>{e&&e.success?o.defaultSaved():n()}).fail(n).always(()=>e.prop("disabled",!1))}this.addDomInitializer("delivery-status-view",function(){this.config.isTransmissionRunning||c();const e=this.config.workStatus,t=this.config.workStatusTooltip;if(e&&t&&d(e,t),this.config.deliveryStat){!function(e){const t=n.dom("delivery-status-buttons",e);$(".delivery-status-action").remove(),$(".header__actions").append(t)}(_.extend(this.config.deliveryStat,this.config.deliveryStatExtraInfo))}}),this.addAction({click:"start-delivery"},function(){if($("#test-run-options").val()==r){if(!$('input[name="mailingTestRecipients"]').get().some(e=>$(e).val().trim()))return void o.alert("error.enterEmailAddresses")}$("#adminSendButton").addClass("disabled"),$("#testSendButton").addClass("disabled");const t=e.get(this.el);t.setActionOnce(this.el.data("url")),t.submit()}),this.addAction({click:"add-test-recipient",enterdown:"new-test-recipient"},function(){this.event.preventDefault();const e=this.el.closest("[data-test-recipient-row]"),t=this.el.is("input")?this.el:e.find("input"),i=n.dom("test-recipient-row",{value:t.val()||"",newRow:!1,sent:!1});e.before(i),t.val(""),AGN.runAll(i),t.focus(),m(!1)}),this.addAction({click:"remove-test-recipient"},function(){this.el.closest("[data-test-recipient-row]").remove(),m(!1)}),this.addAction({input:"new-test-recipient"},function(){m(!1)}),this.addAction({input:"edit-test-recipient",enterdown:"edit-test-recipient"},function(){this.event.preventDefault(),m(!1)}),this.addAction({input:"edit-test-run-target-name"},function(){m(!1)}),this.addAction({enterdown:"edit-test-run-target-name"},function(){this.event.preventDefault()}),this.addAction({click:"save-target-for-test-run"},function(){(function(){const t=$('input[name="targetName"]'),i=e.get(t),n=AGN.Lib.Validator.get("length").errors(t,{min:3,required:!0});if(!n.length)return i.cleanFieldFeedback(),!0;return n.forEach(e=>i.showFieldError$(t,e.msg)),!1})()&&$.ajax({type:"POST",url:AGN.url("/mailing/send/test/saveTarget.action"),data:{mailingTestRecipients:v(),targetName:$('input[name="targetName"]').val().trim()}}).done(e=>{!0===e.success?m(!0):AGN.Lib.JsonMessages(e.popups)})}),this.addAction({focusout:"max-recipients-change"},function(){b()}),this.addAction({change:"prioritization-toggle"},function(){y($(this.el),"isPrioritizationDisallowed")}),this.addAction({change:"encrypted-send-toggle"},function(){y($(this.el),"isEncryptedSend")}),this.addAction({change:"sendStatusOnErrorOnly-toggle"},function(){y($(this.el),"statusOnErrorEnabled")})}),AGN.Lib.Controller.new("mailing-separate-statistics",function(){this.addAction({"table-column-manager:add":"update-columns"},function(){const e=AGN.Lib.Form.get(this.el);e.setValueOnce("additionalFields",this.data.columns),e.setValueOnce("inEditColumnsMode",!0),e.submit()}),this.addAction({"table-column-manager:apply":"update-columns"},function(){const e=this.data.columns;$.ajax({type:"POST",url:AGN.url("/statistics/mailing/setSelectedFields.action"),traditional:!0,data:{selectedFields:e}}).done(t=>{t.success&&AGN.Lib.WebStorage.extend("mailing-separate-stats-overview",{fields:e}),AGN.Lib.JsonMessages(t.popups)})})}),AGN.Lib.Controller.new("mailing-settings-base-view",function(){const e=AGN.Lib.Messaging,i=AGN.Lib.Messages,n=AGN.Lib.Form,o={11:"mailing.default.sender_and_reply_emails_changed",10:"mailing.default.sender_email_changed","01":"mailing.default.reply_email_changed"};let r,s=[];function a(){const e=$("#generateBtn");if(!e.exists())return;const t=n.get(e).valid();e.toggleClass("btn-grey-out",!t),AGN.Lib.Tooltip.toggleState(e,!t)}function l(){const e=$("#lightWeightMailingList").val(),t=$(`#parentmailing-${e}-mailinglist`).attr("data-mailing-list-id"),i=AGN.Lib.Select.get($("#settingsGeneralMailingList"));i.selectOption(t),i.setReadonly(!0)}e.subscribe("mailing-settings:updateMailinglistForFollowUp",()=>{l()}),this.addDomInitializer("mailing-settings-base-view",function(){var e;r=this.config.selectedRemovedMailinglistId,s=this.config.mailinglists,r&&(e=this.el,n.get(e).showFieldError("mailinglistId",t("fields.mailinglist.errors.removed"),!0)),a(),this.config.isFollowUpMailing&&l()}),this.addAction({change:"save-mailing-list-id"},function(){const t=this.el.select2("val");e.send("mailing-settings:mailinglistChanged",t),r&&(AGN.Lib.Select.get(this.el).$findOption(r).remove(),n.get($(this.el)).cleanFieldError("mailinglistId"),r=null);const a=s.find(e=>e.id==t);if(a){const e=$("#emailSenderMail"),t=$("#emailReplyEmail");if(!e.exists()&&!t.exists())return;const n=a.senderEmail&&e.val()!==a.senderEmail,r=a.replyEmail&&t.val()!==a.replyEmail;n&&e.val(a.senderEmail).trigger("change"),r&&t.val(a.replyEmail);const s=_.result(o,`${+!!n}${+!!r}`);s&&i.info(s)}}),this.addAction({"change input":"change-mailing-base-info"},function(){a()}),this.addAction({change:"set-parent-mail-mailinglist"},function(){l()}),this.addAction({click:"generate-mailing-for-workflow"},function(){const t=n.get(this.el);t.validate()&&t.jqxhr().done(t=>{t.success?(e.send("workflow:mailingCreated",t.data),AGN.Lib.Modal.getInstance(this.el).hide()):AGN.Lib.JsonMessages(t.popups,!0)})})}),AGN.Lib.Controller.newExtended("mailing-settings-view","mailing-settings-base-view",function(){const e=AGN.Lib.Form,i=AGN.Lib.Select,n=AGN.Lib.Modal,o=AGN.Lib.Messages,r=AGN.Lib.Messaging,s=["#settingsGeneralMailingList","#settingsTargetgroupsListSplit","#settingsTargetgroupsListSplitPart","#lightWeightMailingList","#assignTargetGroups","#targetGroupIds","#altgIds","#followUpType"];let a,l,c,d,u=!1,h=[],p=0,g=!1;function f(){return $("#mediatypes-list")}function m(){const e=v()===a.TARGET_MODE_OR;$("#target-mode-description").text(t("mailing.default.targetmode_"+(e?"or":"and")))}function v(){return $("[name='targetMode']:checked").val()}function b(){const e=d.dirty("showDirtyFields");if(e.length>0){return 0===e.filter(function(e,t){const i=$(t);return!(!0===i.prop("readonly")||i.is(":disabled")||"hidden"===i.prop("type"))}).length}return!1}function y(e){$("#target-mode-box").toggle(e),$("#regular-targets-box").toggleClass("border rounded p-2",e)}function w(){return $.extend(function(e){const t={};return e.forEach(e=>{const i=$(e);if(i.exists()&&i.is(":visible")&&!i.prop("disabled")){const e=i.prop("name");e&&(t[e]=i.val())}}),t}(s),{changeMailing:u,targetMode:v(),isWmSplit:a.wmSplit})}function C(e){$("#number-of-recipients").val(e)}function S(e){return a.FOLLOWUP_MAILING_TYPE==e}function x(e){let t=!1;a.followUpAllowed&&(S(e)&&(r.send("mailing-settings:updateMailinglistForFollowUp"),t=!0),A(t,"#followUpControls"),$("#followUpControls").all(":input").each((e,i)=>$(i).prop("disabled",!t)));const i=function(e){return a.DATEBASED_MAILING_TYPE==e}(e);A(i,"#mailing-bcc-recipients"),$("#mailing-bcc-recipients").prop("disabled",!i);const n=!function(e){return a.ACTIONBASED_MAILING_TYPE==e}(e)||a.campaignEnableTargetGroups;A(n,"#regular-targets-box, #calculate-recipients-box")}function A(e,t){const i=$(t);i&&(e?(i.removeClass("hidden"),i.show()):i.hide())}function E(e){return e.find("input:checkbox:first").is(":checked")}function T(){!function(){const e=f();e.find("a").css("opacity","1"),e.find(".icon-angle-up:first, .icon-angle-down:last").css("opacity","0")}(),function(){const e=f().find(".form-check-input").toArray().every(e=>e.checked);f().find(".mediatype-order-handle").toggle(e)}(),_.each($(".mediatype-item .input-group span:first-child"),(e,t)=>$(e).text(t+1)),e.get(f()).initFields()}function k(e,t){g=!0,function(e,t){return t&&e.prev().length||!t&&e.next().length&&E(e.next())}(e,t)&&(t?e.prev().before(e):e.next().after(e),d.dirty("setAsDirty"),T())}function D(){const t=e.get(d);!function(e){_.each($("#mediatypes-list li"),function(t,i){e.setValueOnce($(t).data("mediatype")+"Mediatype.priority",i)})}(t),function(e){const t=$("#mailingParamsTable");if(!t.exists())return;_.each(t.data("table").collect(),function(t,i){e.setValueOnce("params["+i+"].name",t.name),e.setValueOnce("params["+i+"].value",t.value),e.setValueOnce("params["+i+"].description",t.description)})}(t),t.submit()}r.subscribe("mailing-settings:mailinglistChanged",e=>{S($("#settingsGeneralMailType").val())||(p=e)}),this.addDomInitializer("mailing-settings-view",function(){a=this.config,$(s.join(",")).on("change",function(){if(u=!0,!c)return;const e=w();_.isEqual(e,c)||(c=null,C("?"))}),d=$("#mailingSettingsForm"),h=$("#targetGroupIds").val()||[],y(h.length>1),l=i.get($("#settingsGeneralMailingList")),l.setReadonly(!1),p>0&&(p=l.selectOption(p),l.$el.trigger("change")),x(a.mailingType),function(){d.dirty("destroy"),d.dirty({preventLeaving:!0,leavingMessage:t("grid.layout.leaveQuestion"),onDirty:function(){b()&&!g&&d.dirty("setAsClean")}}),b()&&!g&&d.dirty("setAsClean");g=!1}(),m(),T(),f().sortable({delay:10,scroll:!0,scrollSensitivity:30,scrollSpeed:5,handle:".mediatype-order-handle",cursor:"move",items:".mediatype-item",stop:()=>_.each($(".mediatype-item .input-group span:first-child"),(e,t)=>$(e).text(t+1))})}),window.onbeforeunload=function(){!0==!d.dirty("isDirty")&&AGN.Lib.Loader.show()},this.addAction({change:"selectTargetGroups"},function(){const e=this.el.val()||[];e.length>1&&h.length<=1&&$("#target-mode-and-btn").prop("checked",!0),y(e.length>1),h=e}),this.addAction({click:"calculateRecipients"},function(){a&&(c=w(),$.ajax({type:"POST",url:AGN.url("/mailing/ajax/"+a.mailingId+"/calculateRecipients.action"),traditional:!0,data:c}).always(function(e){e&&!0===e.success?C(e.count):(C("?"),o.defaultError())}))}),this.addAction({change:"change-general-mailing-type"},function(){const e=this.el.val();l.setReadonly(!1),p>0&&l.selectOption(p),x(e)}),this.addAction({change:"change-target-mode"},m),this.addAction({change:"change-mediatype"},function(){const e=$(this.el);!function(e,t){(function(){const e=f(),t=$("#mediatypes-list li").toArray().sort(function(e,t){const i=$(e),n=$(t);return!E(i)&&E(n)?1:E(i)&&!E(n)?-1:i.data("priority")-n.data("priority")});e.empty(),t.forEach(function(t){e.append(t)})})(),function(e,t){t?e.find(".form-switch").after("\n          <div class='list-group-item-controls'>\n              <a href='#' class='icon icon-angle-down fs-2' data-action='prioritise-mediatype-down'></a>\n              <a href='#' class='icon icon-angle-up fs-2' data-action='prioritise-mediatype-up'></a>\n          </div>"):e.find(".list-group-item-controls").remove();T()}(e,t)}(e,E(e));const t=$("#email-mediatype-switch, #sms-mediatype-switch").is(":checked");$("#edit-frame-content-btn").toggle(t)}),this.addAction({click:"prioritise-mediatype-up"},function(){k($(this.el).closest("li"),!0)}),this.addAction({click:"prioritise-mediatype-down"},function(){k($(this.el).closest("li"),!1)}),this.addAction({submission:"save"},D),this.addAction({click:"edit-content-modal"},function(){const e=$("#email-mediatype-switch").prop("checked")||a.isMailingGrid,t=e&&0==!$("#emailMailFormat").val()&&!a.isMailingGrid,i=$("#sms-mediatype-switch").prop("checked");AGN.Lib.Modal.fromTemplate("modal-editor",{showText:e,showHtml:t,showSms:i})}),this.addAction({click:"save-content"},function(){let t=$("#content-form");e.get(t).validate()&&(n.getInstance(t).hide(),D())}),this.addAction({"editor:change":"validate-on-change"},function(){e.get(this.el).validateField(this.el)})}),AGN.Lib.Controller.new("mailing-stat",function(){let e;this.addDomInitializer("mailing-stat",function(){e=this.config}),this.addAction({change:"change-mailing"},t=>{const i=AGN.Lib.Form.get(t),n=parseInt(t.val());i.setActionOnce(AGN.url(n?`/statistics/mailing/${n}/view.action?statWorkflowId=${e.statWorkflowId}`:`/workflow/${e.statWorkflowId}/statistic.action`)),i.submit()})}),AGN.Lib.Controller.new("mailing-styles",function(){const e=AGN.Lib.Form;this.addAction({click:"update-preview",submission:"updatePreview"},function(){const t=e.get($("#layoutPreviewForm"));e.get(this.el).get$().find('input[name^="styles["]').each(function(){const e=$(this);t.setValue(e.attr("name"),e.val())}),t.submit()})}),AGN.Lib.Controller.new("mailinglist-list",function(){this.addAction({click:"bulk-delete"},function(){const e=(t=this.el,AGN.Lib.Table.get(t)?.api);var t;if(!e)return;const i=e.getSelectedRows();(function(e,t){const i=$.Deferred();if(e&&e.length){const n=$.ajax(t,{method:"GET",traditional:!0,data:{bulkIds:e}}).done(e=>{e&&AGN.Lib.RenderMessages($(e))}).fail(()=>i.reject());AGN.Lib.Confirm.request(n).then(i.resolve,i.reject)}else i.reject(),AGN.Lib.Messages.alert("messages.error.nothing_selected");return i.promise()})(i.map(e=>e.id),AGN.url("/mailinglist/confirmBulkDelete.action")).done(t=>{if("object"==typeof t){const n=t.data,o=i.filter(e=>n.includes(e.id));e.applyTransaction({remove:o}),AGN.Lib.JsonMessages(t.popups,!0)}else AGN.Lib.RenderMessages($(t))})})}),AGN.Lib.Controller.new("mailloop-reply-view",function(){this.addDomInitializer("mailloop-reply-view",function(){const e=AGN.Lib.Template.dom("mailoop-reply-new-status-badge");$(`[data-reply-status-badge="${this.config.id}"]`).replaceWith(e),AGN.Lib.CoreInitializer.run("tooltip",e)})}),AGN.Lib.Controller.new("reference-table-import",function(){const e=AGN.Lib.Form;function t(e){_.each(i().collect(!1),(t,i)=>{e.setValueOnce(`mappings[${i}].sourceColumn`,t.sourceColumn),e.setValueOnce(`mappings[${i}].targetColumn`,t.targetColumn),e.setValueOnce(`mappings[${i}].mandatory`,t.mandatory),e.setValueOnce(`mappings[${i}].defaultValue`,t.defaultValue),e.setValueOnce(`mappings[${i}].format`,t.format)}),e.submit()}function i(){return $("#mappingsTable").data("table")}this.addDomInitializer("ref-table-import-mapping",function(){new n(this.el)}),this.addAction({click:"create-mapping"},function(){const t=e.get(this.el);$.ajax(this.el.attr("href"),{type:"POST",dataType:"json",enctype:"multipart/form-data",processData:!1,contentType:!1,data:t.data()}).done(e=>{!0===e.success&&i().update(e.data),AGN.Lib.JsonMessages(e.popups)})}),this.addAction({click:"import-data"},function(){const i=e.get(this.el);i.setActionOnce(this.el.attr("href")),t(i)}),this.addAction({click:"add-contant-value"},function(){$.post(this.el.attr("href")).done(e=>{if(e.success){const e=i(),t=e.collect(!1);t.push({sourceColumn:null,targetColumn:"",mandatory:!1,format:"",defaultValue:""}),e.update(t)}AGN.Lib.JsonMessages(e.popups,!0)})}),this.addAction({submission:"save"},function(){t(e.get(this.el))});class n extends AGN.Lib.InputTable{generateRowBtn(e){return e?.sourceColumn?"":super.generateRowBtn(e)}}}),AGN.Lib.Controller.new("manage-tables-viewfield",function(){var e="true";this.addAction({change:"typeFieldChangeAction"},function(){var t=$("#nullable");"DATE"===this.el.val()||"DATETIME"===this.el.val()?(e=t.val(),t.val("true")):t.val(e)})}),AGN.Lib.Controller.new("mediapool-overview",function(){this.addDomInitializer("mediapool-edit",function(){$('[id$="-editor-modal"]').on("modal:close",e=>{$(e.target).data("closedOnUnchangedSave")||AGN.Lib.Messages.warn("defaults.changesNotSaved"),$(e.target).removeData("closedOnUnchangedSave")})}),this.addAction({click:"change-category-bulk"},function(){const e=[...$('input[name="bulkIds"]:checked')].map(e=>e.value);e?.length?AGN.Lib.Modal.fromTemplate("category-select-modal",{bulkIds:e}):AGN.Lib.Messages.alert("messages.error.nothing_selected")}),this.addAction({"upload:add":"replace-file"},function(){const e=new FileReader;e.readAsDataURL(this.data.file),e.onload=function(e){$("#mediapool-img-preview").attr("src",e.target.result)}}),this.addAction({click:"edit-webp"},function(){const e=this.el.data("modal-set");$.ajax({url:e.link,method:"GET",xhrFields:{responseType:"arraybuffer"},success:t=>{!function(e){if(82!==e[0]||73!==e[1]||70!==e[2]||70!==e[3]||87!==e[8]||69!==e[9]||66!==e[10]||80!==e[11])return!1;return e.findIndex((t,i)=>65===e[i]&&78===e[i+1]&&73===e[i+2]&&77===e[i+3])>-1}(new Uint8Array(t))?AGN.Lib.Modal.fromTemplate("image-editor-modal",e):AGN.Lib.Modal.fromTemplate("file-editor-modal",e)},error:()=>AGN.Lib.Modal.fromTemplate("file-editor-modal",e)})})}),AGN.Lib.Controller.new("mediapool-upload",function(){const e=AGN.Lib.Template,t=AGN.Lib.Form,i="data-mediapool-upload",n=`[${i}]`,o={};let r,s,a,l={};function c(e){return/^image/.test(e.type)?URL.createObjectURL(e):""}function d(e){if(e)for(const t in l)if(l[t].includes(e))return t;return null}function u(){AGN.Lib.CoreInitializer.run("slider",$("#upload-files-tile"))}function h(e,t,i=!1){$.ajax(AGN.url("/mediapool/findElementWithName.action"),{data:{fileName:e},async:i,type:"GET",success:e=>{e.data&&(o[e.data.id]=e.data),t(e),u()}})}function p(){return $(n)}function g(e){return(e.is(n)?e:e.closest(n)).attr(i)}function f(e){r.prev().toggleClass("hidden",!e)}function m(e){s.parent().toggleClass("hidden",!e)}function v(e,t){e.find("[data-duplication-error-block]").toggleClass("hidden",!t),e.find("[data-overwrite-block]").toggleClass("hidden",!t)}this.addDomInitializer("mediapool-upload",function(){l=this.config.fileExtensions,r=$("#components-uploads-container"),s=$("#upload-reset-btn"),a=$("#dropzone"),a.on("upload:reset",function(){r.empty(),f(!0),m(!1)})}),this.addAction({"upload:add":"mediapool-upload"},function(){const i=this.data.file,n=this.data.index;f(!1),m(!0),h(i.name,o=>{const s=function(e){if(e.name&&e.name.includes("."))return e.name.substring(e.name.lastIndexOf(".")+1).toLowerCase();return""}(i),a=e.dom("mediapool-upload-item",{index:n,itemId:o.data?o.data.id:0,fileName:i.name,previewUrl:c(i),typeCode:d(s),isArchive:"zip"===s});r.append(a),t.get(r).initFields(),AGN.runAll(a)},!0)}),this.addAction({click:"upload-files"},function(){const e=t.get(this.el);let i=e.validate();p().each(function(){const e=$(this),t=e.find('[data-action="overwrite-data"]'),n=e.find('[name$=".fileName"]').val(),o=t.is(":checked");h(n,r=>{r.data&&!o?(i=!1,t.data("item-id",r.data.id),$(`[name='uploads[${g(e)}].id']`).val(r.data.id),v(e,!0),AGN.Lib.Messages.warn("fields.mediapool.warnings.overwrite_inactive",n)):o||v(e,!1)})}),i&&e.submit()}),this.addAction({change:"overwrite-data"},function(){const e=$(this.el),t=e.closest(".tile"),i=e.data("item-id");let n="",r="";if(e.is(":checked")&&o[i]){const e=o[i];n=e.title,r=String(e.category.categoryId)}t.find('[name$=".title"]').val(n),t.find('[name$=".categoryId"]').val(r).trigger("change")}),this.addAction({change:"change-mobile-base"},function(){const e=this.el,t=AGN.Lib.Helpers.objFromString(e.data("config")),i=AGN.Lib.Select.get(e).getSelectedValue(),n=i&&i.length>0,o=n?t.mobilePrefix+i:t.initialValue;e.closest(".tile").find('[name$=".fileName"]').val(o).prop("readonly",n)}),this.addAction({click:"remove-upload"},function(){const e=g(this.el),n=t.get(this.el);AGN.Lib.Upload.get(a).removeSelection(e),this.el.closest(".tile").remove(),function(e){const t=p().filter(function(){const t=g($(this));return parseInt(t)>parseInt(e)});t.each(function(){const e=$(this),t=g(e)-1;e.find('[name*="uploads["]').each(function(){const e=$(this);e.attr("name",e.attr("name").replace(/uploads\[\d+]/g,`uploads[${t}]`))}),e.attr(i,t)})}(e),n.initFields(),p().exists()||(f(!0),m(!1)),u()})}),AGN.Lib.Controller.new("navbar",function(){this.addAction({mouseenter:"expand-navbar-tab",mouseleave:"expand-navbar-tab"},function(){this.el.toggleClass("hovered")})}),AGN.Lib.Controller.new("news-editor",function(){var e,t=AGN.Lib.Template,i=["de","en"];function n(i,n,o){if(""!=i){var r=t.dom("news-content-template-row",{lang:i,index:e,title:n,content:o});r.appendTo("#news-content-editor"),AGN.runAll(r),s(),e++}}function o(){const e=a(),t=$("#news-content-editor > .l-news-content-block").last().data("index");$("#add-news-"+t).toggle(i.length!=e.length)}function r(){const e=$("#news-content-editor > .l-news-content-block");$("button[id^='add-news-']").hide();const t=$(e).first().data("index");$("#delete-news-"+t).toggle(1!=e.length)}function s(){var e=function(){var e=[],t=a();return $.each(i,function(i,n){-1==$.inArray(n,t)&&e.push(n)}),e}();$("#news-content-editor > .l-news-content-block").find("select.news-language").each(function(){$("option",this).not(":selected").remove();var t=$(this);$.each(e,function(e,i){$(t).append($("<option>",{value:i,text:i}))})})}function a(){return $("#news-content-editor > .l-news-content-block").find("select.news-language").find("option:selected").map(function(){return $(this).val()}).toArray()}function l(){var e=a(),t="";return 0==e.length?t=i[0]:$.each(i,function(i,n){if(e.indexOf(n)<0)return t=n,!1}),t}this.addDomInitializer("news-editor-init",function(){e=0;var t=$('input[name="newsId"]').val(),i=$(".existent-news");i&&i.length>0&&0==t?$(i).each(function(){n($(this).find(".existent-news-language").val(),$(this).find(".existent-news-title").val(),$(this).find(".existent-news-content").val()),r(),o(),$(this).remove()}):0==t&&(n(l(),"",""),r(),o())}),this.addAction({click:"addNewsContent"},function(){n(l(),"",""),r(),o()}),this.addAction({click:"removeNewsContent"},function(){var e=$(this.el).closest(".l-news-content-block");$(e).remove(),r(),o(),s()}),this.addAction({change:"changeLanguage"},function(){s()})}),AGN.Lib.Controller.new("notification-global-stat",function(){let e,t,i;function n(){if(!i.exists()||!function(){if("RANGE"!==$("#periodType").val())return!0;const e=$("#startDay"),t=$("#endDay");if(!e.val()||!t.val()||o(e).getTime()>o(t).getTime())return AGN.Lib.Messages.alert("error.statistic.period_format"),!1;return!0}())return;Chart.getChart(i)?.destroy();const e=[],t=[],n=[],r=[];$.get(AGN.url("/push/ajaxGetGlobalProgressStatistic.action"),{dateMode:$("#periodType").val(),selectMonth:$("#selectMonth").val(),selectYear:$("#selectYear").val(),startDay:$("#startDay").val(),endDay:$("#endDay").val()}).done(o=>{if(o&&o.warning&&o.warning.length>0)AGN.Lib.JsonMessages(o,!0);else{for(const i in o){const s=o[i];for(const o in s){0==i&&"time"!=o&&(0==t.length?t.push(o):0==n.length?n.push(o):0==r.length&&r.push(o));const a=s[o];"time"==o?e.push(a):o==t[0]?t.push(a):o==n[0]?n.push(a):o==r[0]&&r.push(a)}}const s=function(e){if(e<60)return 5;if(e<100)return 4;return 3}(e.length);new Chart(i[0].getContext("2d"),{type:"line",data:{labels:e,datasets:[{label:t[0],data:t.slice(1),borderColor:i.css("--chart-darkest-blue-color"),backgroundColor:i.css("--chart-darkest-blue-color"),pointRadius:s},{label:n[0],data:n.slice(1),borderColor:i.css("--chart-blue-color"),backgroundColor:i.css("--chart-blue-color"),pointRadius:s},{label:r[0],data:r.slice(1),borderColor:i.css("--chart-light-cyan-color"),backgroundColor:i.css("--chart-light-cyan-color"),pointRadius:s}]},options:{scales:{x:{ticks:{maxRotation:0}},y:{min:0}},interaction:{mode:"index",intersect:!1},stacked:!1,plugins:{legend:{position:"bottom"},datalabels:{display:!1}}}})}})}function o(e){const t=e.datepicker("option","dateFormat");return $.datepicker.parseDate(t,e.val())}function r(e,t){return 1*parseFloat(e).toFixed(t)}this.addDomInitializer("notification-global-stat",function(){e=$("#global-status-chart"),t=$("#global-browser-chart"),i=$("#global-progress-chart"),$.get(AGN.url("/push/ajaxGetGlobalStatusStatistic.action")).done(t=>{t&&t.warning&&t.warning.length>0?AGN.Lib.JsonMessages(t,!0):new Chart(e[0].getContext("2d"),{type:"bar",data:{labels:Object.keys(t),datasets:[{data:Object.values(t),backgroundColor:e.css("--chart-blue-color"),categoryPercentage:1.08,minBarLength:2}]},options:{indexAxis:"x",layout:{padding:{top:20,right:0}},scales:{x:{ticks:{autoSkip:!1,maxRotation:90}},y:{display:!1}},plugins:{legend:{display:!1},datalabels:{anchor:"end",align:"end",offset:-5}}}})}),$.get(AGN.url("/push/ajaxGetGlobalBrowserStatistic.action")).done(e=>{if(e&&e.warning&&e.warning.length>0)AGN.Lib.JsonMessages(e,!0);else{const i=[],n=[];for(const t in e)i.push(t),n.push(r(100*e[t],1));const o=[t.css("--chart-darkest-blue-color"),t.css("--chart-dark-blue-color"),t.css("--chart-blue-color"),t.css("--chart-light-blue-color"),t.css("--chart-light-cyan-color")];new Chart(t[0].getContext("2d"),{type:"agnDoughnut",data:{labels:i,datasets:[{data:n,backgroundColor:o,borderWidth:0}]}})}}),n()}),this.addAction({change:"update-progress-chart"},function(){n()})}),AGN.Lib.Controller.new("notification-list",function(){this.addAction({click:"send-update-notification"},function(){$.post(this.el.attr("href")).done(e=>AGN.Lib.JsonMessages(e.popups,!0))})}),AGN.Lib.Controller.new("notification-schedule",function(){let e,t,i,n;function o(){const e=s();if(t.unbind("change"),e){const t=d(e);l(e,t),a(t),c(i.val())}else l(0,null),a(null),c(null);t.on("change",u)}function r(){const e=s();e?l(e,d(e)):l(0,null)}function s(){return e.datepicker("getDate")}function a(e){t.datepicker("setDate",e)}function l(e,i){t.datepicker("option",{minDate:e,maxDate:i})}function c(e){n.val(e)}function d(e){const t=new Date(e);return t.setDate(t.getDate()+28),t}function u(){t.unbind("change"),n.unbind("change"),e.unbind("change"),e.on("change",r),i.unbind("change"),i.on("change",r)}this.addDomInitializer("notification-schedule",function(){const r=this.el.closest(".tile");e=r.find("#startDate"),t=r.find("#endDate"),i=r.find("#startTime"),n=r.find("#endTime"),e.on("change",o),i.on("change",o),t.on("change",u),n.on("change",u)})}),AGN.Lib.Controller.new("notification-settings",function(){let e,t;function i(){new Notification($("#pushTitle").val(),{body:$("#pushContent").val(),icon:$("#pushIcon").val()}).onclick=e=>{e.preventDefault(),window.open($("#pushLink").val(),"_blank")}}function n(){const e=$("#preview-option");e.parent().attr("data-tooltip",t),e.addClass("disabled"),AGN.runAll(e.parent())}function o({chart:t}){t.timelineInitialized||(t.timelineInitialized=!0,function(t){const i=new Hammer.Manager(e[0]);i.add(new Hammer.Pinch),i.add(new Hammer.Pan({threshold:10}));let n=0,o=0;const r=i=>{const r=i.deltaX-n;i.deltaY;n=i.deltaX,o=i.deltaY;const s=Math.max(parseFloat(e[0].style.width)/100,.1);t.pan({x:-r/s})};i.on("panstart",e=>{n=0,o=0,r(e)}),i.on("panmove",r)}(t));const{labels:i}=t.config.data,{min:n,max:o}=t.scales.x,r=new Date(i[0]).getTime(),s=new Date(i[i.length-1]).getTime(),a=(n-r)/(s-r)*100,l=(o-r)/(s-r)*100,c=a>0?Math.min(a,98):0,d=l<100?Math.max(l,2):100;e.prev().css("width",`${c}%`),e.css("left",`${c}%`),e.css("width",d-c+"%"),e.next().css("width",100-d+"%")}this.addDomInitializer("notification-settings",function(){t=this.config.previewDisabledMsg,"denied"==Notification.permission&&n()}),this.addAction({click:"preview"},function(){"granted"!=Notification.permission?Notification.requestPermission(e=>{"granted"==e?i():"denied"==e&&n()}):i()}),this.addDomInitializer("notification-stats",function(){e=$(".chart-timeline__handle"),$.get(AGN.url(`/push/${this.config.pushId}/ajaxStatistic.action`)).done(e=>{!function(e){const t=$("#common-stat-chart");new Chart(t[0].getContext("2d"),{type:"bar",data:{labels:Object.keys(e),datasets:[{data:Object.values(e),backgroundColor:t.css("--chart-blue-color"),categoryPercentage:.9,minBarLength:2}]},options:{indexAxis:"x",layout:{padding:{top:20,right:0}},scales:{x:{ticks:{autoSkip:!1,maxRotation:90}},y:{display:!1}},plugins:{legend:{display:!1},datalabels:{anchor:"end",align:"end",offset:-5}}}})}(e.common),function(e){if(!e.length)return void $("#progress-chart-block").addClass("hidden");const t=[],i=[],n=[];for(const o in e){const r=e[o];for(const e in r)r.hasOwnProperty(e)&&(0==o&&"time"!=e&&(0==i.length?i.push(e):0==n.length&&n.push(e)),"time"==e?t.push(r[e]):i[0]==e?i.push(r[e]):n[0]==e&&n.push(r[e]))}const r=function(e){if(e<60)return 5;if(e<100)return 4;return 3}(t.length),s=$("#progress-chart"),a=$("#progress-chart-minimap"),l=[{label:i[0],data:i.slice(1),borderColor:s.css("--chart-darkest-blue-color"),backgroundColor:s.css("--chart-darkest-blue-color"),pointRadius:r},{label:n[0],data:n.slice(1),borderColor:s.css("--chart-violet-color"),backgroundColor:s.css("--chart-violet-color"),pointRadius:r}];new Chart(s[0].getContext("2d"),{type:"line",data:{labels:t,datasets:l},options:{scales:{x:{type:"time",min:t[0],max:t[t.length-1],time:{unit:"day",displayFormats:{day:"yyyy-MM-dd hh:mm"},tooltipFormat:"yyyy-MM-dd hh:mm"},ticks:{autoSkip:!0,maxRotation:0}},y:{min:0}},interaction:{mode:"index"},plugins:{legend:{position:"bottom"},datalabels:{display:!1},zoom:{pan:{enabled:!0,onPan:o,mode:"x"},limits:{x:{min:new Date(t[0]).getTime(),max:new Date(t[t.length-1]).getTime(),minRange:1}},zoom:{enabled:!0,wheel:{enabled:!0},pinch:{enabled:!0},mode:"x",onZoom:o}}}}}),new Chart(a[0].getContext("2d"),{type:"line",data:{labels:t,datasets:l.map(e=>({...e,pointRadius:0,borderWidth:.8}))},options:{scales:{x:{display:!1},y:{display:!1}},plugins:{legend:{display:!1},datalabels:{display:!1},tooltip:{external:null}}}})}(e.viewsclicks)})})}),AGN.Lib.Controller.new("profile-field-view",function(){let e,t;function i(e){t.empty(),_.each(e,e=>{""!==e.trim()&&n(!1,e)}),n(!0)}function n(i,n=""){const o=AGN.Lib.Template.dom("fixed-value-row",{isLastRow:i,value:n,fieldType:e});t.append(o),AGN.Lib.Form.get(t).initFields(),AGN.runAll(o)}this.addDomInitializer("profile-field-view",function(){t=$("#fixed-values-container"),e=this.config.fieldType,i(this.config.fixedValues??[])}),this.addAction({click:"delete-fixed-value"},function(){this.el.closest("[data-fixed-value-row]").remove()}),this.addAction({click:"add-fixed-value"},function(){const e=this.el.closest("[data-fixed-value-row]"),t=e.find('[name="allowedValues"]').val();e.remove(),n(!1,t),n(!0)}),this.addAction({change:"change-field-type"},function(){e=this.el.val();i(AGN.Lib.Form.get(this.el).getValues("allowedValues"))})}),AGN.Lib.Controller.new("recipient-duplicates-list",function(){this.addAction({"table-column-manager:apply":"save-selected-columns"},function(){const e=this.data.columns;$.ajax({type:"POST",url:AGN.url("/recipient/duplicate/setSelectedFields.action"),traditional:!0,data:{selectedFields:e}}).done(t=>{t.success&&AGN.Lib.WebStorage.extend("recipient-duplicate-overview",{fields:e}),AGN.Lib.JsonMessages(t.popups)})})}),AGN.Lib.Controller.new("recipient-import-errors-edit",function(){function e(){window.onbeforeunload=null}this.addDomInitializer("recipient-import-errors-edit",function(){!function(){if("undefined"==typeof performance||"function"!=typeof performance.getEntriesByType)return!1;const e=performance.getEntriesByType("navigation");if(e.length>0)return"reload"===e[0].type&&e[0].name===window.location.href;return!1}()?window.onbeforeunload=function(){return"If you leave the page, the import will be canceled automatically!"}:AGN.Lib.Page.reload(AGN.url("/recipient/import/chooseMethod.action?cancelImport=true"))}),this.addAction({submitted:"save-errors"},function(){e()}),this.addAction({click:"ignore-errors"},function(){e(),AGN.Lib.Confirm.request(AGN.url("/recipient/import/errors/ignore.action"))})}),AGN.Lib.Controller.new("recipient-import-view",function(){this.addAction({click:"delete-file"},function(){$.post(AGN.url("/recipient/import/file/delete.action")).done(()=>{this.el.parent().remove(),$("#import-file").prop("disabled",!1).parent().removeClass("hidden")})}),this.addDomInitializer("recipient-import-view",function(){this.config.attachmentCsvFileID>0&&$("#useCsvUpload").prop("checked",!0).trigger("change")})}),AGN.Lib.Controller.new("recipient-insights",function(){const e={HIGH_PERFORMER:"#4FB102",OPPORTUNITY:"#0ACD70",LEAD:"#C2C2C2",SLEEPER:"#E12E59"};let i,n;function o(e){const t=e.slice(1).concat(e[0]);for(let i=0;i<e.length;i++)e[i]=t[i];return e}function r(e){return{values:Object.values(e.values),percentages:Object.entries(e.percentages).map(([e,t])=>t)}}function s(e){n?.destroy();const i=$("#reaction-progress-chart"),o=[],r=[],s=[],a=[];let l=!1,c=!1;$.each(e.values,(e,t)=>{o.push(e),r.push(t.reactions),s.push(t.impressions),a.push(t.revenues),t.impressions>0&&(l=!0),t.revenues>0&&(c=!0)});const d=o.length;let u=3;d<60?u=5:d<100&&(u=4);const h={type:"line",data:{labels:o,datasets:[{label:t("statistic.reactions"),data:r,borderColor:i.css("--chart-darkest-blue-color"),backgroundColor:i.css("--chart-darkest-blue-color"),pointRadius:u}]},options:{scales:{x:{ticks:{maxRotation:0}},y:{display:!1}},interaction:{mode:"index",intersect:!1},stacked:!1,plugins:{legend:{position:"bottom"},datalabels:{display:!1},tooltip:{callbacks:{title:function(t){const i=t[0].label,n=e.values[i].mailingIds;return n.length?e.mailingNames[n[0]]+" "+i:i}}}}}};l&&h.data.datasets.push({label:t("statistic.impressions"),data:s,borderColor:i.css("--chart-blue-color"),backgroundColor:i.css("--chart-blue-color"),pointRadius:u}),c&&h.data.datasets.push({label:t("statistic.revenue"),data:a,borderColor:i.css("--chart-dark-blue-color"),backgroundColor:i.css("--chart-dark-blue-color"),pointRadius:u}),n=new Chart(i[0].getContext("2d"),h)}function a(e,t){const i=$(e).find("[data-kpi-value]");if(t>0)if(t<.01)i.text("< 1");else{let e="";i.is("[data-kpi-sign]")&&(e=" "+i.data("kpi-sign")),i.text(`${t.toFixed(2)}${e}`)}}this.addDomInitializer("recipient-insights",function(){i=this.config.manualPeriodType;const n=this.config.insightsData;$.i18n.load(this.config.translations),function(e){e=r(e),o(e.values),o(e.percentages);const i=Math.max(...e.values),n=$("#days-reaction-chart");new Chart(n[0].getContext("2d"),{type:"bar",data:{labels:o(t("date.weekdaysShort")),datasets:[{data:e.values,backgroundColor:t=>{const o=e.values[t.dataIndex]===i;return n.css(o?"--chart-darkest-blue-color":"--chart-blue-color")},categoryPercentage:.9,minBarLength:2}]},options:{indexAxis:"x",layout:{padding:{top:20,right:0}},scales:{x:{ticks:{autoSkip:!1,maxRotation:90}},y:{display:!1}},plugins:{legend:{display:!1},datalabels:{anchor:"end",align:"end",offset:-5,formatter:(t,i)=>e.percentages[i.dataIndex]+"%"},tooltip:{position:"nearest",callbacks:{label:e=>t("daysWithReactions")+": "+e.formattedValue}}}}})}(n.weekdayReactionRankData),function(e){e=r(e);const i=Math.max(...e.values),n=$("#reaction-hour-chart");new Chart(n[0].getContext("2d"),{type:"bar",data:{labels:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],datasets:[{data:e.values,backgroundColor:t=>{const o=e.values[t.dataIndex]===i;return n.css(o?"--chart-darkest-blue-color":"--chart-blue-color")},categoryPercentage:.5,minBarLength:2}]},options:{indexAxis:"x",layout:{padding:{top:20,right:0}},scales:{x:{ticks:{autoSkip:!0,maxRotation:0}},y:{display:!1}},plugins:{legend:{display:!1},datalabels:{anchor:"end",align:"end",offset:-5,display:"auto",formatter:(t,i)=>e.percentages[i.dataIndex]+"%"},tooltip:{callbacks:{label:e=>t("reactionTimes")+": "+e.formattedValue}}}}})}(n.hourReactionRankData),function(e){const i=$("#reaction-device-chart"),n=[i.css("--chart-darkest-blue-color"),i.css("--chart-dark-blue-color"),i.css("--chart-blue-color"),i.css("--chart-light-blue-color"),i.css("--chart-light-cyan-color")],o=[],r=[];$.each(e,function(e,i){o.push(i.value),r.push(t(i.deviceClass))}),new Chart(i[0].getContext("2d"),{type:"agnDoughnut",data:{labels:r,datasets:[{data:o,backgroundColor:n,borderWidth:0}]}})}(n.reactionDeviceRankData),s(n.reactionsInProgressData),function(t){a("#reactionTypeKpi",t.percentage.percentage),$("#reactionGradeIcon").css("color",(i=t.grade,e[i]||"inherit"));var i}(n.mailingReactionPercentageData),function(e){a("#impressionsByClickKpi",e.perClick),a("#impressionsByVisitKpi",e.perVisit),a("#impressionsByBuyKpi",e.perBuy)}(n.pageImpressionsData),function(e){a("#revenueSumKpi",e.value),a("#revenueAvgKpi",e.average)}(n.customerRevenueData),function(e){e.clicks.percentage>0?a("#performanceClicksKpi",e.clicks.percentage):a("#performanceClicksKpi",e.clicks.value>0?.001:0);a("#performanceRevenueKpi",e.revenue)}(n.customerPerformanceData)}),this.addAction({change:"update-period-chart"},function(){if(!($("#reactionProgressPeriod").val()!==i||$("#reactionProgressMinDate").val()&&$("#reactionProgressMaxDate").val()))return;const e=AGN.Lib.Form.get(this.el);e.jqxhr().done(t=>{s(t),function(e){const t=e.data(),i=new URL(window.location.href);Object.keys(t).forEach(e=>{i.searchParams.set(e,t[e])}),window.history.replaceState({},"",i)}(e)})})}),AGN.Lib.Controller.new("recipient-list",function(){const e=AGN.Lib.Action,t=AGN.Lib.Messages,i=AGN.Lib.Form,n=AGN.Lib.Storage,o="#targetgroup-querybuilder",r=["firstname","lastname","email","gender"];let s,a={},l=!1;function c(){const e=u();$("#basic-filters-block").toggleClass("hidden",e),$("#filter-query-builder-block").toggleClass("hidden",!e),d()}function d(e=!1){$("#target-group-save-button").toggleClass("hidden",e||!u()||!function(){const e=b();return!!e&&e.containsNotEmptyRule()}())}function u(){return h().is(":checked")}function h(){return $("#use-advanced-filter")}function p(){const e="-1"===v("mailinglist").val();v("type").prop("disabled",e),v("status").prop("disabled",e)}function g(e){const t=f();t.setActionOnce(AGN.url("/recipient/search.action")),t.submit("",_.merge({ignore_qb_validation:!0,skip_empty:!0},t.validatorOptions,e))}function f(){return i.get($("#recipients-overview"))}function m(){return function(e,t){const i=b();if(!i)return!1;return e.reduce((e,n)=>{const o=i.getRules({allow_invalid:!0,skip_empty:!0});return n.id?"number"==typeof n.value||n.value?!0===i.setOrReplaceRule(o,n,t)||e:!0===i.deleteRuleByField(null,n.id,t)||e:e},!1)}(r.map(e=>{const t=function(e){const t=b().getFilterById(e).type;return $.fn.queryBuilder.constructor.types[t]}(e),i="string"===t?"like":"equal";let n=v(e).val().trim();return n="number"===t&&""!==n?Number(n):n?`%${n}%`:"",{id:e,value:n,operator:i}}),!0)}function v(e){return $(`#filter-${e}`)}function b(){return s.prop("queryBuilder")}e.new({"qb:invalidrules":o},function(){t.alert("querybuilder.errors.invalid_definition")}),this.addDomInitializer("recipient-list",function(){s=$(o),a=$.extend({},JSON.parse(this.config.initialRules)),this.config.forceShowAdvancedSearchTab||n.restoreChosenFields(h()),c(),p(),s.on("afterClear.queryBuilder",()=>d(!0)),s.on("change afterReset.queryBuilder afterDeleteGroup.queryBuilder afterDeleteRule.queryBuilder afterSetRules.queryBuilder afterUpdateRuleFilter.queryBuilder",()=>d())}),this.addAction({change:"toggle-filter"},function(){c(),n.saveChosenFields(this.el)}),this.addAction({"table-column-manager:apply":"save-selected-columns"},function(){const e=this.data.columns;$.ajax({type:"POST",url:AGN.url("/recipient/setSelectedFields.action"),traditional:!0,data:{selectedFields:e}}).done(t=>{t.success&&AGN.Lib.WebStorage.extend("recipient-overview",{fields:e}),AGN.Lib.JsonMessages(t.popups)})}),this.addAction({click:"create-new-target"},function(){b()?.clearErrors(),function(e=!1){const t=$.Event("qb:validation");return s.trigger(t,{ignore_qb_validation:!1,skip_empty:e}),!t.isDefaultPrevented()}()&&AGN.Lib.Confirm.from("new-targetgroup-modal",{rules:$("#queryBuilderRules").val()}).done(e=>f().updateHtml(e))}),this.addAction({change:"change-mailinglist-id"},p),this.addAction({enterdown:"search-recipient"},function(){l=!0}),this.addAction({validation:"search-recipient"},function(){if(l){const e=this.data;this.data=_.merge({},e,{ignore_qb_validation:!1,skip_empty:!1})}else this.data&&this.data.ignore_qb_validation&&function(){const e=b();e&&(e.clearErrors(),e.setRules(a),function(){const e=function(e=r){const t=b(),i={};if(t){const n=t.getRules({allow_invalid:!0,skip_empty:!0});e.forEach(e=>{const o=t.findRuleByField(n,e,!0);i[e]=o?.value||""})}return i}();_.each(r,t=>v(t).val(e[t]))}())}()}),this.addAction({submission:"search-recipient"},function(){l&&(m(),g({ignore_qb_validation:!1}))}),this.addAction({click:"search"},function(){u()||m(),g({ignore_qb_validation:!1})})}),AGN.Lib.Controller.new("recipient-statistics-view",function(){this.addAction({change:"type-change"},function(){const e=this.el,t=e.find("option:selected"),i=$("#mailinglist-select");t.is("[data-mailinglist-required]")&&"0"===i.val()&&AGN.Lib.Select.get(i).selectNext(),AGN.Lib.Form.get(e).submit()})}),AGN.Lib.Controller.new("recipient-view",function(){const e="OK",i="USED",n="BLACKLISTED",o=AGN.Lib.Form;let r;function s(e,t){return AGN.Lib.Confirm.from("recipient-confirmation-modal",{question:e}).done(t)}this.addDomInitializer("recipient-view",function(){const s=o.get(this.el);r=new a(AGN.url(`/recipient/${this.config.id}/checkAddress.action`),o=>{switch(o.status){case e:s.cleanFieldError("email");break;case i:s.showFieldError("email",AGN.Lib.Template.text("duplicated-email-block",o),!0);break;case n:s.showFieldError("email",t("error.isBlacklisted"),!0)}}),$("#recipient-email").on("change input",_.debounce(function(){r.check($(this).val())},300)),$(".not-allowed-usertype").each(function(){const e=$(this);e.prop("selected")?e.parent("select").prop("disabled",!0):e.prop("disabled",!0)})}),this.addAction({submission:"recipient-save"},function(){const e=o.get(this.el),i=$("#recipient-email").val();this.event.preventDefault();const n=()=>{$.post(AGN.url("/recipient/checkAltgMatch.action"),e.params()).done(i=>{i.popups&&i.popups.alert&&i.popups.alert.length>0?AGN.Lib.JsonMessages(i.popups):i.success&&0!==i.success.length?e.submit():s(t("recipient.hide.question"),()=>{e.setActionOnce(AGN.url("/recipient/saveAndBackToList.action")),e.submit()})}).fail(()=>e.submit())};r&&i&&i.trim()?r.jqxhr(i.trim()).done(e=>{!0===e.isBlacklisted?s(t("recipient.blacklisted.question"),()=>{!0===e.inUse?s(t("recipient.duplicate.question"),n):n()}):!0===e.inUse?s(t("recipient.duplicate.question"),n):n()}).fail(n):n()}),this.addAction({change:"activate-mediatype"},function(){const e=this.el.data("mediatype"),t=this.el.is(":checked");this.el.closest("[data-mailinglist-tile]").find(`.icon-mediatype-${e}`).toggleClass("icon-mediatype--active",t),this.el.closest(".tile").find("[data-binding-usertype]").prop("disabled",!t)}),this.addAction({focusout:"hide-datasource-popover"},function(){AGN.Lib.Popover.hide(this.el)});class a{constructor(e,t){this.url=e,this.running=!1,this.callback=$.isFunction(t)?t:$.noop,this.lastAddress=null,this.lastResult=null,this.scheduledCheck=null}jqxhr(e){return $.get(this.url,{email:e})}scheduleCheck(t){if(this.scheduledCheck&&clearTimeout(this.scheduledCheck),this.running)this.scheduledCheck=setTimeout(()=>this.scheduleCheck(t),300);else{this.running=!0,this.lastAddress=null,this.lastResult=null;try{this.jqxhr(t).always(()=>this.running=!1).done(o=>{this.lastAddress=t,this.lastResult={status:!0===o.isBlacklisted?n:!0===o.inUse?i:e,recipientID:o.existingRecipientId||0},this.report()})}catch(e){this.running=!1}}}check(t){(t=t?.trim()||"")?this.lastAddress===t?this.report():this.scheduleCheck(t):this.report(e)}report(e){arguments.length?this.callback.call(null,e):this.lastAddress&&this.report(this.lastResult)}}}),AGN.Lib.Controller.new("reference-table-export",function(){let e,t;function i(i=!1){e.html(AGN.Lib.Template.text("referente-table-export-time-period",{type:t.val(),initial:i}))}this.addDomInitializer("reference-table-export",function(){e=$("#export-time-period-block"),t=$("#period-type"),i(!0)}),this.addAction({change:"update-period-type"},function(){i()})}),AGN.Lib.Controller.new("reference-table-list",function(){this.addAction({click:"bulk-delete"},function(){const e=AGN.Lib.Table.get(this.el)?.api,t=e.getSelectedRows(),i=t.map(e=>e.id);(function(e,t){const i=$.Deferred();if(e&&e.length){const n=$.ajax(t,{method:"GET",traditional:!0,data:{ids:e}}).done(e=>{e&&AGN.Lib.RenderMessages($(e))}).fail(()=>i.reject());AGN.Lib.Confirm.request(n).then(i.resolve,i.reject)}else i.reject(),AGN.Lib.Messages.alert("messages.error.nothing_selected");return i.promise()})(i,this.el.attr("href")).done(n=>{if(i.length>1){const i=n.data,o=t.filter(e=>i.includes(e.id));e.applyTransaction({remove:o}),AGN.Lib.JsonMessages(n.popups,!0)}else e.applyTransaction({remove:t}),AGN.Lib.RenderMessages($(n))})})}),AGN.Lib.Controller.new("salutation-view",function(){const e=AGN.Lib.Select;let t,i,n,o,r,s;function a(){return`[${c()} type='${s}']`}function l(){(async function(){const{title:l,firstname:d,lastname:u,gender:h}=e.get(t).$selectedOption.data(),p=$(`[name="genderMapping[${h}]"]`).val();if(p.includes("#<>#"))return await async function(){const n=a();try{return await $.get(AGN.url(`/salutation/${s}/resolve.action`),{recipientId:t.val(),type:e.get(i).$selectedOption.data("id")})}catch(e){return console.error("Error resolving salutation agnTag:",e),n}}();switch(c()){case n:return`${p} ${l?`${l} `:""}${u}`;case o:return`${p} ${d}`;case r:return`${p} ${l?`${l} `:""}${d} ${u}`;default:return""}})().then(e=>$("#salutation-preview").text(e+",")),$("#copy-salutation").data("copyable-value",a())}function c(){return i.val()}this.addDomInitializer("salutation-view",function(){t=$("#recipient"),i=$("#tagType"),s=this.config.id,n=this.config.AGN_TAG_TITLE,o=this.config.AGN_TAG_TITLE_FIRST,r=this.config.AGN_TAG_TITLE_FULL,l()}),this.addAction({change:"switch-salutation",input:"switch-salutation"},()=>l())}),AGN.Lib.Controller.new("side-menu",function(){const e=!!window.matchMedia("(pointer: fine)").matches,t=e?400:0;function i(t,i,o){const r=t.find(".sidebar__tooltip");e||r.hasClass("open")?(o(),e||s(r)):(n(r),i.preventDefault(),e||$(document).one("click touchstart",e=>{$(e.target).closest(t).exists()||s(r)}))}function n(e){r(e),clearTimeout(e.data("closeTimerId")),e.css("left",c()-1),e.addClass("open")}function o(e){const t=e.find(".sidebar__link"),i=t.next(".sidebar__submenu"),n=i.find(".sidebar__submenu-list");r(i),clearTimeout(t.data("closeTimerId")),i.addClass("open"),function(e,t){const i=$(window),n=e.find(".sidebar__submenu-title"),o=parseInt(t.parent().parent().css("gap"));let r=t.scrollTop()+t.offset().top+t.outerHeight()/2-n.outerHeight()/2-o;const s=e.outerHeight();r+s>i.height()+i.scrollTop()&&(r=i.height()+i.scrollTop()-s-o);r-i.scrollTop()<0&&(r=i.scrollTop());e.offset({top:r}),e.css("left",c()-1)}(i,t),n.addClass("open")}function r(e){$(".sidebar__tooltip.open").not(e).each(function(){s($(this))}),$(".sidebar__submenu.open").not(e).each(function(){a($(this))})}function s(e){e.removeClass("open")}function a(e){e.removeClass("open"),e.find(".sidebar__submenu-list").removeClass("open")}function l(){return $(".sidebar").hasClass("sidebar--wide")}function c(){return $(".sidebar").outerWidth()}this.addAction({click:"logout"},function(){i(this.el,this.event,()=>AGN.Lib.Form.get($("#logoutForm")).submit("static"))}),this.addAction({click:"expand"},function(){const e=l();$(".sidebar").toggleClass("sidebar--wide",!e),function(e){AGN.Lib.WebStorage.set("is-wide-sidebar",{value:e}),$.post(AGN.url("/sidebar/setIsWide.action"),{isWide:e})}(!e),$(window).trigger("viewportChanged")}),this.addAction({click:"open-help"},function(){i(this.el,this.event,AGN.Lib.Helpers.openHelpModal)}),e?(this.addAction({mouseenter:"display-tooltip"},function(){if(this.el.find(".sidebar__icon").exists()||!l()){n(this.el.find(".sidebar__tooltip"))}}),this.addAction({mouseleave:"display-tooltip"},function(){const e=this.el.find(".sidebar__tooltip");e.data("closeTimerId",setTimeout(()=>s(e),t))}),this.addAction({mouseenter:"activateSubmenu"},function(){o(this.el)}),this.addAction({mouseleave:"activateSubmenu"},function(){const e=$(this.el).find(".sidebar__link"),i=e.next(".sidebar__submenu");e.data("closeTimerId",setTimeout(()=>a(i),t))})):(this.addAction({click:"activateSubmenu"},function(){const e=this.el.find(".sidebar__link").next(".sidebar__submenu");if(e.hasClass("open")){const e=$(this.event.target).closest("a");e.exists()&&!e.is("[data-confirm]")&&AGN.Lib.Page.reload(e.attr("href"))}else{o(this.el),this.event.preventDefault();const t=()=>{$(document).one("click touchstart",i=>{$(i.target).closest(this.el).exists()?t():a(e)})};t()}}),this.addAction({click:"open-account-data"},function(){i(this.el,this.event,()=>AGN.Lib.Page.reload(AGN.url(this.el.data("url"))))}))}),AGN.Lib.Controller.new("help-center",function(){const e=AGN.Lib.Form,i=AGN.Lib.JsonMessages,n=AGN.Lib.Template;function o(e,t=!1){const i=marked.parse(function(e){return e.replace(/(【\d+:\d+†source】)+/g,"")}(e));r(i,t)}function r(e,t=!1){return s(n.dom(t?"support-chart-incoming-message":"support-chart-outgoing-message",{text:e.replace(/\r?\n$/,"").replace(/\n/g,"<br>")}))}function s(e){const t=$("#support-chat-tab").find(".chat-content");return t.append(e).scrollTop(t.prop("scrollHeight")),e}function a(e,t){const i=$("#help-center-support-tab"),o={supportType:e||"",subject:"",subjectChangeable:!0,page:l()};i.html(n.text("help-center-support",_.merge({},o,t))),AGN.Lib.CoreInitializer.run(["select","growing-textarea","char-counter","scrollable"],i)}function l(){const e=window.location,t=[".action",".do"];if(e.origin&&e.pathname){let i=c(e.pathname);for(let e=0;e<t.length;e++){let n=t[e],o=i.indexOf(n);o>0&&(i=i.substring(0,o+n.length))}return e.origin+i+e.search+e.hash}let i=c(e.href);for(let e=0;e<t.length;e++){let n=t[e],o=i.indexOf(n);if(o>0){const e=o+n.length;let t=i.indexOf("?",e);return t<0&&(t=i.indexOf("#",e)),t>0?i.substring(0,e)+i.substring(t):i.substring(0,e)}}return i}function c(e){return(e+"").replace(/;jsessionid=[a-z0-9]+/i,"")}window.hmNavigationFrame=!0,window.lazysync=e=>{const t=document.getElementById("manual-iframe").contentWindow;t.hmForceRedirect&&t.location&&t.location.href&&(t.location.href="index.html?"+e)},this.addDomInitializer("help-center",function(){$("[data-help-tab]").on("help-tab:open",function(e,t){const i=$(this);"support"===i.data("help-tab")&&a(t.type,t.opts),i.is(".active")||i.trigger("click")})}),this.addDomInitializer("support-chat",function(){const e=$("#support-chat-tab");var t,i;let a;this.config.messagesHistory?.length?(t=this.config.messagesHistory,i=this.config.userRole,t.reverse().forEach(e=>{e.role===i?r(e.content):o(e.content,!0)})):r(this.config.initialMessage,!0),e.on("form:loadershow",()=>{a||(a=s(n.dom("support-chart-typing-msg")))}),e.on("form:loaderhide",()=>{a.remove(),a=null})}),this.addAction({submission:"send-message"},function(){const t=$("#support-message"),n=t.val();n.length&&(r(n),e.get(this.el).jqxhr().done(e=>{i(e.popups),e.success&&o(e.data,!0)}),t.val(""))}),this.addDomInitializer("support",function(){a()}),this.addDomInitializer("help-center-docs",function(){const e=this.config.manuals;e.flatMap(e=>e.files).forEach(e=>{e.link=AGN.url(`/manual/${e.lang}/pdf/${e.name}`,!0),e.btnMsgKey=t("defaults.download")+" "+e.lang.toUpperCase()}),$("#help-center-docs-tab").html(n.dom("help-center-docs",{manuals:e}))}),this.addAction({submission:"send-support-request"},function(){this.event.preventDefault(),e.get(this.el).submit()}),this.addAction({submitted:"send-support-request"},function(){i(this.data.popups),this.data.success&&AGN.Lib.Modal.getInstance(this.el).hide()})}),AGN.Lib.Controller.new("system-messages",function(){const e=AGN.Lib.Helpers,i=AGN.Lib.Confirm,n="type",o="language";let r,s,a;function l(){const e=f();Object.assign(e,a.data()),c([e])}function c(e){$.ajax({url:a.getAction(),method:"POST",contentType:"application/json",data:JSON.stringify(e)}).done(()=>{g(),a.get$().dirty("setAsClean")}).always(e=>AGN.Lib.JsonMessages(e.popups))}function d(){const e={};return Object.entries(a.data()).forEach(([t,i])=>{$(`:input[name="${t}"]`).is("[data-sys-msg-ph]")&&(e[t]=i)}),e}function u(){$("#logo-img-id").val(""),e.clearFormField($("#file-logo")),h()}function h(e="",t=""){$("#logo-img-name").text(e),$("#logo-preview").attr("src",t||s)}function p(e){Object.keys(e).forEach(t=>{if(t!==n&&t!==o){const i=$(`:input[name="${t}"]`),n=e[t];a.setValue(t,n),window.Jodit?.instances[t]?Jodit.instances[t].value=n:window.CKEDITOR?.instances[t]?CKEDITOR.instances[t].setData(n):AGN.Lib.Editor.exists(i)?AGN.Lib.Editor.get(i).val(n):AGN.Lib.Colorpicker.get(i)&&i.trigger("change")}})}function g(){const e=$("#preview-tile .tile-body");e.html(AGN.Lib.Template.text("system-message-preview-iframe",a.data())),AGN.Lib.CoreInitializer.run("iframe",e)}function f(){const e=a.getValue(n),t=a.getValue(o);return r.find(i=>i.type===e&&i.language===t)}this.addDomInitializer("system-messages",function(){r=this.config.messagesConfigs,s=this.config.noPreviewImageLink,a=AGN.Lib.Form.get($("#setup-tile")),g(),$("#logo-img-id").val()||h(),a.get$().dirty({preventLeaving:!0,leavingMessage:t("grid.layout.leaveQuestion")})}),window.onbeforeunload=()=>{!0==!a.get$().dirty("isDirty")&&AGN.Lib.Loader.show()},this.addAction({submission:"save"},function(){!function(){const e=d(),t=f();return Object.entries(e).some(([e,i])=>$.trim(i)!==$.trim(t[e]))}()?l():i.from("update-all-messages-confirm").done(()=>{Object.entries(d()).forEach(([e,t])=>{r.forEach(i=>i[e]=t)}),c(r)}).catch(()=>l())}),this.addAction({click:"delete-logo"},function(){u()}),this.addAction({click:"choose-logo"},function(){i.request(AGN.url("/mediapool/image/pick.action")).done(e=>{$("#logo-img-id").val(e.id),h(e.fileName,e.src)})}),this.addAction({change:"choose-logo-file"},function(){const t=this.el.prop("files");if(!t.length)return;const n=t[0],o=new FileReader;o.onload=t=>{const o=t.target.result;i.from("logo-mediapool-category-modal",{imageSrc:o}).done(t=>{(function(e,t){const i=$.Deferred(),n=new FormData;return n.append("uploads[0].file",e),n.append("uploads[0].fileName",e.name),n.append("uploads[0].title",e.name),n.append("uploads[0].categoryId",t),$.ajax(AGN.url("/mediapool/upload.action?asJson=true"),{type:"POST",dataType:"json",enctype:"multipart/form-data",processData:!1,contentType:!1,data:n}).done(e=>{!0===e.success?i.resolve(Object.entries(e.data)[0]):(AGN.Lib.JsonMessages(e.popups),i.reject())}).fail(()=>i.reject()),i})(n,t).done(([t,i])=>{$("#logo-img-id").val(i),h(t,o),e.clearFormField($("#file-logo"))}).catch(u)}).catch(u)},o.readAsDataURL(n)}),this.addAction({change:"redraw-form"},function(){const e=f();p(e||Object.keys(a.data()).reduce((e,t)=>(e[t]="",e),{})),h("",e?.logoImageId?AGN.url(`/mediapool/${e.logoImageId}/raw.action`):""),g(),a.get$().dirty("setAsClean")})}),AGN.Lib.Controller.new("system-status",function(){this.addAction({click:"cancel-imports"},function(){AGN.Lib.Confirm.from("cancel-running-imports-modal").done(()=>{$.post(AGN.url("/serverstatus/killRunningImports.action"))})})}),AGN.Lib.Controller.new("target-group-stat",function(){this.addDomInitializer("chart",function(){const e=this.config.statistics;if(!e?.length)return;const t=$("#target-statistic-chart"),i=[t.css("--chart-dark-blue-color"),t.css("--chart-blue-color"),t.css("--chart-light-blue-color"),t.css("--chart-cyan-color"),t.css("--chart-light-cyan-color"),t.css("--chart-light-lime-color")].splice(0,e.length);new Chart(t[0].getContext("2d"),{type:"bar",data:{labels:e.map(e=>e.status),datasets:[{data:e.map(e=>e.recipientsCount),backgroundColor:i,categoryPercentage:.9,minBarLength:2}]},options:{indexAxis:"x",layout:{padding:{top:20,right:0}},scales:{x:{ticks:{autoSkip:!1,maxRotation:90}},y:{display:!1}},plugins:{legend:{display:!1},datalabels:{anchor:"end",align:"end",offset:-5}}}})})}),AGN.Lib.Controller.new("target-group-view",function(){const e=AGN.Lib.Form,t=AGN.Lib.ScheduleTimeTable,i=AGN.Lib.ScheduleTimeTable.PeriodRow;let n;function o(e){AGN.Lib.Editor.get($("#eql")).goToLine(e.line,e.column)}AGN.Lib.Action.new({"qb:invalidrules":"#targetgroup-querybuilder"},function(){AGN.Lib.Messages.alert("querybuilder.errors.general")}),this.addDomInitializer("target-group-view",function(){this.config.errorPositionDetails&&o(this.config.errorPositionDetails)}),this.addAction({change:"toggle-editor-tab"},function(){const t=this.el,i=t.is(":checked");t.prop("checked",!i);const n=e.get(t);n.validate({skip_empty:!0})&&(n.setValueOnce("viewFormat",i?"EQL":"QUERY_BUILDER"),n.submit("",{skip_empty:!0}))}),this.addAction({submission:"save-target"},function(){e.get(this.el).submit(this.el.data("submit-type")).done(e=>{"object"!=typeof e||e.success||(o(e.data),AGN.Lib.JsonMessages(e.popups))})}),this.addDomInitializer("target-scheduler-init",function(){n?.clean(),n=new t($("#target-scheduler-block"));let o=[];this.config.intervalAsJson&&(o=JSON.parse(this.config.intervalAsJson).map(e=>i.deserialize(e))),0===o.length?n.addEmptyPeriodRow():o.forEach(e=>n.addRow(e)),e.get(this.el).initFields()}),this.addAction({click:"activate-schedule"},function(){const e=this.el.attr("href"),t=n.getSubmissionJson("period");$.post(e,{intervalAsJson:t}).done(e=>AGN.Lib.Page.render(e))})}),AGN.Lib.Controller.new("temp-file",function(){const e=AGN.Lib.Form;let i;function n(){$("#files").val(""),$("#dropzone").trigger("upload:reset")}this.addAction({"upload:add":"show-upload-file-form"},function(){i||(i=!0,$.ajax({url:AGN.url("/upload/new.action"),type:"GET",async:!1,success:e=>{AGN.Lib.Page.render(e),$(".modal").on("modal:close",n)}}))}),this.addAction({"upload:dropped":"addFilesToModal"},function(){!function(e){if(e.length>1)return void function(e){const i=new AGN.Lib.Table(AGN.Lib.Template.dom("js-table-wrapper"),[{field:"name",headerName:t("defaults.name"),filter:!1,suppressMovable:!0,cellRenderer:"NotEscapedStringCellRenderer"},{field:"size",headerName:t("defaults.size"),filter:!1,suppressMovable:!0,width:50,cellRenderer:"NotEscapedStringCellRenderer"}],function(e){return e.map(({name:e,size:t})=>({name:e,size:AGN.Lib.Helpers.formatBytes(t)}))}(e),{pagination:!1}),n=$('<div class="col-12">').append(i.$el);i.$el.css({"--ag-rows-count":e.length,"max-height":"235px"}),$("#upload-form").find(".row:first").prepend(n)}(e);$("#file-names").append(e[0].name)}(this.data),i=!1}),this.addAction({click:"save-file"},function(){const t=e.get(this.el),i=t.submit();i&&(i.done(e=>{AGN.Lib.Modal.getWrapper(t.get$()).modal("hide"),AGN.Lib.JsonMessages(e.popups)}),$(".modal").hide())})}),AGN.Lib.Controller.new("template-css",function(){const e=AGN.Lib.Form;this.addAction({click:"saveCss"},function(){const t=e.get($("#gridTemplateForm")),i=this.el.closest(".modal").find('[name="templatesToUpdate"]').val(),n=t.getValue("templateId");n&&i.push(n),t.setValueOnce("bulkIds",i),t.submit()})}),AGN.Lib.Controller.new("mailing-trackable-links",function(){const e=this,t=AGN.Lib.Form;let i,n,o;function r(e){if(e&&e.length>0){const t=e.closest(".table-wrapper__body");if(t.exists()){const i=t.find(":first-child").offset().top,n=e.offset().top;t.scrollTop(0),t.scrollTop(n-i)}}}function s(e,t){_.each(e,function(e,i){t.setValue("extensions["+i+"].name",e.name),t.setValue("extensions["+i+"].value",e.value)})}this.addDomInitializer("mailing-trackable-links",function(){n=this.config.KEEP_UNCHANGED,o=this.config.SAVE_ALL_URL,this.config.scrollToLinkId&&r($(`#link-${this.config.scrollToLinkId}`))}),AGN.Lib.Action.new({change:"[id^=link-], #tile-trackableLinkEditAll"},function(){i=this.el.attr("id")}),this.addAction({click:"save-bulk-actions"},function(){const e=t.get($("#trackableLinksForm")),i=$("#bulkActionsForm").serializeFormDataObject();e._data={},$.each(i,function(t,i){e.setValue(t,i)}),e.setValue("modifyAllLinksExtensions",!1),s(AGN.Lib.InputTable.get("#bulkActionExtensions").collect(),e),e.setActionOnce(o),e.submit(),AGN.Lib.Modal.getWrapper(this.el).modal("hide")}),this.addAction({submission:"save-all"},function(){this.event.preventDefault();const e=t.get($("#trackableLinksForm"));e._data={},e.setValue("modifyBulkLinksExtensions",!1),function(e){e.setValue("bulkUsage",n),e.setValue("bulkAction",n),e.setValue("bulkDeepTracking",n),e.setValue("bulkStatic",n)}(e),s(AGN.Lib.InputTable.get("#link-common-extensions").collect(),e),e.setActionOnce(o),e.submit()}),this.addAction({scrollTo:"scroll-to"},function(){i&&r($(this.el).find("#"+i))}),this.addAction({click:"save-individual"},function(){this.event.preventDefault();const e=t.get($("#trackableLinkForm"));s(AGN.Lib.InputTable.get("#individual-extensions").collect(),e),e.submit()}),this.addAction({change:"link-details-trackable"},function(){e.runInitializer("trackableAction")}),this.addInitializer("trackableAction",function(){const e=$('[data-action="link-details-trackable"] :selected'),t=$("#linkAction");t.prop("disabled",t.prop("disabled")||0==e.val())})}),AGN.Lib.Controller.new("userform-images",function(){const e=AGN.Lib.Modal,t=AGN.Lib.Template,i=AGN.Lib.Form;function n(){$("#upload-files").val(""),$("#dropzone").trigger("upload:reset")}function o(e){return e.name&&e.name.includes(".")?e.name.substring(e.name.lastIndexOf(".")+1).toLowerCase():""}function r(e){return/^image/.test(e.type)?URL.createObjectURL(e):""}this.addAction({"upload:add":"image-upload"},function(){const s=this.data.file,a=this.data.index;let l=$("#components-upload-modal");l.exists()||(l=e.fromTemplate("userform-images-upload-modal-template"),l.on("modal:close",n));const c=l.find("#components-uploads-container"),d=t.dom("userform-upload-image",{index:a,fileName:s.name,previewUrl:r(s),isArchive:"zip"===o(s)});c.append(d),i.get(l).initFields(),AGN.runAll(d)}),this.addAction({click:"upload-images"},function(){const t=i.get(this.el),n=e.getWrapper(this.el);t.get$().on("submitted",()=>{document.contains(n[0])&&n.css("opacity",1)}),t.submit(),n.css("opacity",0)})}),AGN.Lib.Controller.new("userform-view",function(){var e,t=AGN.Lib.FormBuilder.FormBuilder,i=AGN.Lib.Editor,n=AGN.Lib.Confirm;let o=0;function r(e){return window.Jodit||CKEDITOR.instances[e]?.updateElement(),$("#userFormForm").dirty("isFieldDirty",$(`#${e}`))}function s(e){return!!t.isCreated("#"+e)&&t.get("#"+e).isChanged()}function a(e,n){var o=AGN.Lib.Form.get($("form#userFormForm"));if(t.isCreated("#successFormBuilder")){var r=t.get("#successFormBuilder");"FORM_BUILDER"===e&&i.get($("#successTemplate")).val(r.generateHtml());var s=r.getJson();o.setValueOnce("successSettings.formBuilderJson",s);var a=$("#successFormBuilder").find("input:enabled,select:enabled");a.prop("disabled",!0)}if(t.isCreated("#errorFormBuilder")){var l=t.get("#errorFormBuilder");"FORM_BUILDER"===n&&i.get($("#errorTemplate")).val(l.generateHtml());var c=l.getJson();o.setValueOnce("errorSettings.formBuilderJson",c);var d=$("#errorFormBuilder").find("input:enabled,select:enabled");d.prop("disabled",!0)}o.submit(),a&&a.prop("disabled",!1),d&&d.prop("disabled",!1)}function l(t,i){t.exists()&&(i>0?(t.attr("href",e.replace(":action-ID:",i)),t.removeClass("hidden")):(t.attr("href","#"),t.addClass("hidden")))}this.addDomInitializer("userform-view",function(){var t=this.config;e=t.actionURLPattern,o=t.formId,$("#userFormForm").dirty()}),this.addAction({click:"activate-and-test"},function(){const e=this.el,t=e.attr("href");n.from("userform-activate-and-test").done(()=>{$.post(AGN.url(`/webform/${o}/activate.action`)).done(i=>{AGN.Lib.JsonMessages(i.popups,!0),i.success&&($("#is-active-switch").prop("checked",!0),e.removeAttr("data-action"),window.open(t,"_blank"))})})}),this.addAction({change:"change-intro-action"},function(){l($("#startActionLink"),this.el.val())}),this.addAction({change:"change-final-action"},function(){l($("#finalActionLink"),this.el.val())}),this.addAction({change:"check-velocity-script"},function(){"wysiwyg"===this.el.val()&&function(e){const t=AGN.Lib.Helpers.objFromString(e.data("action-options"));AGN.Lib.Editor.get($("#"+t.type+"Template")).val().match(/#(?:set|include|macro|parse|if|foreach)/gi)&&(AGN.Lib.Messages.alert("userform.error.velocity_not_allowed"),e.val("html").trigger("change"))}(this.el)}),this.addAction({submission:"saveUserForm"},function(){var e=s("successFormBuilder"),t=s("errorFormBuilder"),i=e&&r("successTemplate"),o=t&&r("errorTemplate");i||o?n.from("warning-save-different-tabs",{needSuccessCodeChoose:i,needErrorCodeChoose:o}):a(e?"FORM_BUILDER":"HTML",t?"FORM_BUILDER":"HTML")}),this.addAction({click:"save-specific-code-mode"},function(){const e=$("#choose-code-format-modal-form");a(e.find('[name="success_template_mode"]').val(),e.find('[name="error_template_mode"]').val())}),this.addAction({change:"formTestRecipient"},function(){var e=$("#formTestLink"),t=$("#formTestRecipient");e.attr("href",t.val())})}),AGN.Lib.Controller.new("user|groups-permissions",function(){let e;function t(){return $(".permission-categories__btn")}function i(){_.each(t(),function(e){const t=$(e),i=t.data("category-index"),n=function(e){return $(`#${e}-category-permissions`).find(".permission:not(.hidden)")}(i),o=n.length,r=n.find('[role="switch"]:checked').length;$(`label[for="${i}-category-btn"] .permissions-counter`).text(`(${r}/${o})`),t.toggleClass("disabled",o<=0)})}function n(){return $('[id$="-category-permissions"]:visible')}function o(){$('[id$="-category-permissions"]:visible .tile-body').scrollTop(0)}function r(e){!function(e){$('[id$="-category-permissions"]').hide(),$(`#${e}-category-permissions`).show(),l()}(e),o(),$('[id$="-category-btn"]').prop("checked",!1),$(`#${e}-category-btn`).prop("checked",!0),c()}function s(){e.filter(e=>function(e){return function(e){const t=$("#name-filter").val().trim().toLowerCase(),i=$(`#${e.name.replaceAll(".","\\.")}`).parent().find("label").text().toLowerCase().trim();return!t||i.includes(t)}(e)&&function(e){const t=$("#right-filter").val()?.trim()?.toLowerCase();return!t||e.name.toLowerCase().includes(t)}(e)&&function(e){const t=$("#type-filter").val();if(!t?.length)return!0;return t.some(t=>function(e){switch(e){case"granted":return function(e){return e.granted};case"grantedForUser":return function(e){return e.granted&&!e.showInfoTooltip};case"grantedByGroup":return function(e){return e.showInfoTooltip};case"grantable":return function(e){return!e.granted&&e.changeable};case"notGrantable":return function(e){return!e.granted&&!e.changeable};case"new":return function(e){return e.recent};default:return function(){return!0}}}(t)(e))}(e)}(e)).map(e=>$('[id="'+e.name+'"]').closest(".permission")).forEach(e=>e.removeClass("hidden"))}function a(){return n().find(".permission:visible")}function l(){$(".permission_category-subcategory").show(),$(".permission_category-subcategory").each(function(){return $(this).toggle($(this).find("li:visible").length>0)}),function(){const e=a().length<=0;$(".no-results-found").toggle(e)}()}function c(){n().find("[data-toggle-checkboxes]").trigger("update-toggle-all")}this.addDomInitializer("user|groups-permissions",function(){e=function(e){if(e.isSoapUser)return function(e){const t=e.permissions.map(e=>({...e,name:e.endpointName}));return[...t,...e.permissionGroups]}(e);return function(e){return e.permissionCategories.map(function(e){return e.subCategories}).flatMap(function(e){return Object.values(e)}).flatMap(function(e){return e.permissions})}(e)}(this.config),r(+n().first().attr("id").match(/\d+/)[0]),i()}),this.addAction({click:"change-category"},function(){r(this.el.data("category-index"))}),this.addAction({click:"apply-filter",enterdown:"handle-filter-enterdown"},function(){this.event.preventDefault(),$(".permission").addClass("hidden"),s(),l(),i(),function(){const e=t().not(".disabled");a().length>0||e.length<=0||r(+e.first().data("category-index"))}(),o(),c()})}),AGN.Lib.Controller.new("widget-creation",function(){let e;this.addDomInitializer("widget-creation",function(){e=this.config.rdirDomain}),this.addAction({click:"generate-widget"},function(){const t=AGN.Lib.Form.get($("#settings-tile form:visible"));t.validate()&&t.jqxhr().done(t=>{t.success&&function(t){const i=`\n      <div class="emm-widget" data-emm-widget="${_.escape(t)}"></div> <script async src="${e}/assets/widgets.js" type="application/javascript"><\/script>\n    `.trim(),n=$("#preview-tile .tile-body");n.html(AGN.Lib.Template.text("widget-preview-block",{widgetCode:i})),AGN.Lib.CoreInitializer.run("tooltip",n)}(t.data),AGN.Lib.JsonMessages(t.popups)})})}),AGN.Lib.Controller.newExtended("workflow-list","activeness-overview",function(){this.addAction({click:"bulk-delete"},function(){const e=AGN.Lib.Table.get(this.el).api,t=e.getSelectedRows(),i=t.map(e=>e.id);i.length?$.ajax(AGN.url("/workflow/bulkDelete.action"),{method:"GET",traditional:!0,data:{bulkIds:i}}).done(n=>{AGN.Lib.Confirm.create(n).done(n=>{if(i.length>1){const i=n.data,o=t.filter(e=>i.includes(e.id));e.applyTransaction({remove:o}),AGN.Lib.JsonMessages(n.popups,!0)}else e.applyTransaction({remove:t}),AGN.Lib.RenderMessages($(n))})}):AGN.Lib.Messages.alert("messages.error.nothing_selected")})}),AGN.Lib.Controller.new("workflow-view",function(){const e=AGN.Lib.WM.Definitions,i=AGN.Lib.WM.Editor,n=AGN.Lib.WM.Node,o=AGN.Lib.WM.EditorsHelper,r=AGN.Lib.WM.MailingEditorHelper,s=AGN.Lib.WM.Dialogs,a=AGN.Lib.Confirm,l=AGN.Lib.WM.Utils,c=AGN.Lib.WM.DateTimeUtils,d=AGN.Lib.Modal;let u;function h(){u.getNodesByType(e.NODE_TYPE_START).filter(p).forEach(g),f(!0,{status:e.constants.statusActive})}function p(e){const t=_.clone(e.data.date);return!!t&&(t.setHours(e.data.hour),t.setMinutes(e.data.minute),t.setSeconds(0),t<=new Date)}function g(e){const{hour:t,minute:i}=c.getCurrentAdminTime()||{};if(!t||!i)return;e.data.date=new Date;const n=e.data.date;n.setHours(parseInt(t,10)),n.setMinutes(parseInt(i,10)),n.setSeconds(n.getSeconds()>55?n.getSeconds()+120:n.getSeconds()+60),e.data.hour=n.getHours(),e.data.minute=n.getMinutes(),u.updateNodeTitle(e,!0),m().setValueOnce("startTimeAdjusted",!0)}function f(e,i){if(e&&!function(){if($("#name").val().length<3)return m().showFieldError("shortname",t("error.workflow.shortName")),!1;return!0}())return;const n=m();i=$.extend({},i),Object.keys(i).forEach(function(e){n.setValueOnce(e,i[e])}),u.gridBackgroundShown&&u.toggleGrid(),n.setValueOnce("workflowSchema",u.serializeIcons()),n.submit("static")}function m(){return AGN.Lib.Form.get($("form#workflowForm"))}jsPlumb.Connectors.FixedBezierConnector||(jsPlumbUtil.extend(AGN.Opt.Components.JsPlumbFixedBezierConnector,jsPlumb.Connectors.AbstractConnector),jsPlumb.Connectors.FixedBezierConnector=AGN.Opt.Components.JsPlumbFixedBezierConnector),$(window).on("wheel mousewheel DOMMouseScroll",e=>e.ctrlKey&&e.preventDefault()),$(window).on("resize viewportChanged",()=>u?.updateMinimap()),$(document).on("keydown",function(t){if($(t?.target).is("input, textarea"))return;switch(t.keyCode){case e.KEY_SHIFT:u.setMultiConnectionEnabled(!0);break;case e.KEY_CTRL:u.setMouseWheelZoomEnabled(!0)}}),$(document).on("keyup",function(t){if($(t?.target).is("input, textarea"))return;switch(t.keyCode){case e.KEY_DELETE:u.deleteSelected();break;case e.KEY_SHIFT:u.setMultiConnectionEnabled(!1);break;case e.KEY_ENTER:u.editIcon();break;case e.KEY_CTRL:u.setMouseWheelZoomEnabled(!1)}}),$(document).on("mousedown",function(t){t.button===e.MOUSE_BUTTON_MIDDLE&&u.setPanningEnabled(!0)}),$(document).on("mouseup",function(t){t.button===e.MOUSE_BUTTON_MIDDLE&&u.setPanningEnabled(!1)}),this.addDomInitializer("workflow-view",function(){const t=this.config;e.constants=t.constants,e.workflowId=t.workflowId,e.shortname=t.shortname,e.statisticUrl=t.statisticUrl,e.sentMailings=t.sentMailings||[],o.hideNodeEditors();const r=t.icons.map(n.deserialize),s=n.deserializeConnections(t.icons,n.toMap(r));u&&u.recycle(),u=new i(!1!==t.isEditable,!1!==t.isContextMenuEnabled,!0===t.isFootnotesEnabled),u.setOnInitialized(function(){u.batch(function(){r.forEach(function(e){u.add(e)}),s.forEach(function(e){u.connect(e.source,e.target)})}),u.updateNodeTitles(),u.updateFootnotes(),0===e.workflowId&&(e.intialSchema=u.serializeIcons())}),u.setMinimapEnabled(!1!==t.isMinimapEnabled);var a,l=$("#slider");l.exists()&&l.slider({min:e.MIN_ZOOM,max:e.MAX_ZOOM,value:e.DEFAULT_ZOOM,step:e.ZOOM_STEP,create:function(){var t=$(this).slider("instance");u.setZoom(e.DEFAULT_ZOOM),u.setOnZoom(function(e){t.value(e)})},slide:function(e,t){u.setZoom(t.value)}}),!0===t.fitPdfPage&&u.fitPdfPage(),window.waitStatus=t.initializerFinishStatus||"",a=t.showStatisticWithoutSave,$(".navbar-nav a[href*='statistic.action']").on("click",e=>{a||(e.preventDefault(),f(!0,{showStatistic:!0}))})}),this.addDomInitializer("mailing-data-transfer-modal",function(e){var t=e.find("input[data-mailing-param]"),i=e.find("#transferAllSettings"),n={},o=[];t.on("change",function(){var e=$(this),r=e.data("mailing-param");e.prop("checked")?n[r]=!0:delete n[r],o=Object.keys(n),i.prop("checked",o.length==t.length)}),i.on("change",function(){var e=i.prop("checked");t.prop("checked",e),e?(t.each(function(){n[$(this).data("mailing-param")]=!0}),o=Object.keys(n)):(n={},o=[])}),this.addAction({click:"transfer-mailing-data"},function(){a.get(e).positive(o)})}),this.addDomInitializer("own-workflow-expanding-modal",function(e){this.addAction({click:"expand-own-workflow"},function(){a.get(e).positive({workflowId:e.find("#workflow-select").val(),copyContent:"true"===e.find('[name="copyContent"]').val()})})}),this.addDomInitializer("icon-comment-editor-initializer",function(){const e=o.registerEditor("icon-comment",new AGN.Lib.WM.CommentEditor);this.addAction({click:"icon-comment-editor-save"},()=>e.saveEditor()),this.addAction({click:"icon-comment-editor-cancel"},()=>e.cancelEditor())}),this.addDomInitializer("parameter-editor-initializer",function(){o.registerEditor("parameter",new AGN.Lib.WM.ParameterNodeEditor(u))}),this.addDomInitializer("split-editor-initializer",function(){o.registerEditor("split",new AGN.Lib.WM.SplitNodeEditor(u))}),this.addDomInitializer("deadline-editor-initializer",function(){const e=o.registerEditor("deadline",new AGN.Lib.WM.DeadlineNodeEditor);this.addAction({change:"deadline-editor-update"},()=>e.updateVisibility()),this.addAction({change:"deadline-editor-time-change"},()=>e.onTimeChanged())}),this.addDomInitializer("archive-editor-initializer",function(){const e=o.registerEditor("archive",new AGN.Lib.WM.ArchiveNodeEditor(f));this.addAction({click:"archive-editor-new"},()=>e.createNewArchive())}),this.addDomInitializer("recipient-editor-initializer",function(){const e=o.registerEditor("recipient",new AGN.Lib.WM.RecipientNodeEditor(f));this.addAction({click:"recipient-editor-create-new-target"},()=>e.createNewTarget()),this.addAction({click:"recipient-editor-target-edit"},function(){e.editTarget(this.el.data("target-id"))})}),this.addDomInitializer("export-editor-initializer",function(){const e=o.registerEditor("export",new AGN.Lib.WM.ExportNodeEditor(this.config,f));this.addAction({change:"export-editor-change"},()=>e.onChange()),this.addAction({click:"export-editor-new"},()=>e.createNewAutoExport()),this.addAction({click:"export-editor-autoexport"},()=>e.editAutoExport())}),this.addDomInitializer("import-editor-initializer",function(){const e=o.registerEditor("import",new AGN.Lib.WM.ImportNodeEditor(this.config,f));this.addAction({change:"import-editor-change"},()=>e.onChange()),this.addAction({click:"import-editor-new"},()=>e.createNewAutoImport()),this.addAction({click:"import-editor-update"},()=>e.editAutoImport())}),this.addDomInitializer("start-editor-initializer",function(){const e=new AGN.Lib.WM.StartStopNodeEditor(u,this.config,f);o.registerEditor("start",e),o.registerEditor("stop",e),this.addAction({change:"start-editor-execution-changed"},()=>e.onExecutionChanged()),this.addAction({change:"start-editor-event-changed"},()=>e.onStartEventChanged()),this.addAction({change:"start-editor-type-changed"},()=>e.onStartTypeChanged()),this.addAction({change:"start-editor-rule-changed"},()=>e.onRuleModeChanged()),this.addAction({change:"start-editor-reaction-changed"},()=>e.onReactionChanged()),this.addAction({change:"start-editor-profile-field-changed"},()=>e.onProfileFieldChanged()),this.addAction({click:"start-editor-add-rule"},()=>e.addRule()),this.addAction({click:"start-editor-reminder-changed"},()=>e.onReminderChanged()),this.addAction({change:"start-editor-schedule-reminder-date-changed"},()=>e.onScheduleReminderDateChanged()),this.addAction({change:"start-editor-mailing-select"},function(){e.onMailingSelectChange(this.el.val())}),this.addAction({click:"start-editor-rule-remove"},function(){e.removeRuleRow(this.el.data("rule-index"))})}),this.addDomInitializer("decision-editor-initializer",function(){const e=o.registerEditor("decision",new AGN.Lib.WM.DecisionNodeEditor(u,this.config));this.addAction({change:"decision-editor-mailing-select"},function(){e.onMailingSelectChange(this.el.val())}),this.addAction({click:"decision-editor-rule-remove"},function(){e.removeRuleRow(this.el.data("rule-index"))}),this.addAction({click:"decision-editor-rule-add"},()=>e.addRule()),this.addAction({change:"decision-editor-type-change"},()=>e.onTypeChanged()),this.addAction({change:"decision-editor-criteria-change"},()=>e.onCriteriaChanged()),this.addAction({change:"decision-editor-reaction-change"},()=>e.onDecisionReactionChanged()),this.addAction({change:"decision-editor-profile-field-change"},()=>e.onProfileFieldChanged())}),this.addDomInitializer("mailing-editor-initializer",function(){const e=new r(this.config,f);o.registerEditor("mailing",new AGN.Lib.WM.MailingNodeEditor(e)),this.addAction({change:"mailing-editor-base-status-change"},function(){e.onMailingsStatusChange(this.el.val())}),this.addAction({change:"mailing-editor-base-select-change"},function(){e.onMailingSelectChange(this.el.val())}),this.addAction({click:"mailing-editor-base-toggle-settings"},function(){const t=l.getConfigData(this.el);e.toggleSendSettings(t.editorId)})}),this.addDomInitializer("followup-mailing-editor-initializer",function(){const i=this.config.baseMailingData,n=this.config.followupMailingData;i.$dropdown=$("#followup-m-editor");const s=new r(i,f),a=new r(n,f);s.selectedFollowUpMailingId=0,s.findPreviousMailingIds=function(){const t=[];return o.forEachPreviousNode(function(i){const n=i.getType();e.NODE_TYPES_MAILING.includes(n)&&e.NODE_TYPE_FOLLOWUP_MAILING!=n&&t.push(i.getId())}),t},s.getMailingsByWorkStatus=function(e,i,n,r){var s=this,a=$(this.formNameJId+" "+this.selectNameJId),l=_.uniq(this.findPreviousMailingIds()).toString();a.attr("readonly","readonly"),$.ajax({url:AGN.url("/workflow/getMailingsByWorkStatus.action"),data:{mailingTypes:this.mailingTypesForLoading.join(","),status:e,sort:i,order:n,mailingId:this.selectedFollowUpMailingId,parentMailingId:$(this.formNameJId+" "+this.selectNameJId).val(),mailingStatus:"W",takeMailsForPeriod:!0,mailingsInCampaign:l},success:function(l){a.html(""),a.append('<option value="0">'+t("workflow.defaults.no_mailing")+"</option>");for(var c=0;c<l.length;c++){var d=l[c],u="",h="";"mailing.status.sent"!=d.WORK_STATUS&&"mailing.status.norecipients"!=d.WORK_STATUS||(u="style='color: #808080;'"),r==d.MAILING_ID&&(h="selected"),a.append("<option "+u+" value='"+d.MAILING_ID+"' status='"+d.WORK_STATUS+"' senddate='"+d.SENDDATE+"' "+h+">"+d.SHORTNAME+"</option>")}a.removeAttr("readonly"),s.mailingsStatus=e,s.mailingsSort=i,s.mailingsOrder=n,a.val(s.mailingId),o.initSelectWithValueOrChooseFirst(a,s.mailingId)}})},a.onMailingSelectChange=function(e){s.selectedFollowUpMailingId=e,this.setSelectMailingOptions(e)},o.registerEditor("followup_mailing",new AGN.Lib.WM.FollowupMailingNodeEditor(s,a,"true"===n.disableFollowup)),this.addAction({change:"followup-mailing-editor-base-status-change"},function(){a.onMailingsStatusChange(this.el.val())}),this.addAction({change:"followup-mailing-editor-base-select-change"},function(){a.onMailingSelectChange(this.el.val())}),this.addAction({change:"followup-base-mailing-editor-base-status-change"},function(){s.onMailingsStatusChange(this.el.val())}),this.addAction({change:"followup-base-mailing-editor-base-select-change"},function(){s.onMailingSelectChange(this.el.val())})}),this.addDomInitializer("sms-mailing-editor-initializer",function(){const e=new r(this.config,f);o.registerEditor("mailing_mediatype_sms",new AGN.Lib.WM.SmsMailingNodeEditor(e)),this.addAction({change:"sms-mailing-editor-base-status-change"},function(){e.onMailingsStatusChange(this.el.val())}),this.addAction({change:"sms-mailing-editor-base-select-change"},function(){e.onMailingSelectChange(this.el.val())})}),this.addDomInitializer("post-mailing-editor-initializer",function(){const e=new r(this.config,f);o.registerEditor("mailing_mediatype_post",new AGN.Lib.WM.PostMailingNodeEditor(e)),this.addAction({change:"post-mailing-editor-base-status-change"},function(){e.onMailingsStatusChange(this.el.val())}),this.addAction({change:"post-mailing-editor-base-select-change"},function(){e.onMailingSelectChange(this.el.val())})}),this.addDomInitializer("action-mailing-editor-initializer",function(){const e=new r(this.config,f);o.registerEditor("actionbased_mailing",new AGN.Lib.WM.ActionBasedMailingNodeEditor(e)),this.addAction({change:"action-mailing-editor-base-status-change"},function(){e.onMailingsStatusChange(this.el.val())}),this.addAction({change:"action-mailing-editor-base-select-change"},function(){e.onMailingSelectChange(this.el.val())})}),this.addDomInitializer("date-based-mailing-editor-initializer",function(){const e=new r(this.config,f);o.registerEditor("datebased_mailing",new AGN.Lib.WM.DateBasedMailingNodeEditor(e)),this.addAction({change:"date-mailing-editor-base-status-change"},function(){e.onMailingsStatusChange(this.el.val())}),this.addAction({change:"date-mailing-editor-base-select-change"},function(){e.onMailingSelectChange(this.el.val())})}),this.addAction({change:"save-node"},function(){o.isReadOnlyMode()||o.getCurrentEditor().save()}),this.addAction({click:"mailing-editor-edit"},()=>o.getCurrentEditor().editMailing()),this.addAction({click:"mailing-editor-new"},()=>o.getCurrentEditor().createNewMailing()),this.addAction({click:"chain-mode"},function(){u.setChainModeEnabled(!(u.isChainMode()||u.connectSelected())),$(this.el).toggleClass("active",u.isChainMode())}),this.addAction({click:"delete-selected"},()=>u.deleteSelected()),this.addAction({click:"show-grid"},()=>u.toggleGrid()),this.addAction({submission:"workflow-save"},()=>f(!0,{})),this.addAction({click:"align-all"},()=>u.alignAll()),this.addAction({click:"undo"},()=>u.undo()),this.addAction({click:"zoom-in"},function(){const t=$("#slider").slider("instance");t.value(t.value()+e.ZOOM_STEP),u.setZoom(t.value())}),this.addAction({click:"zoom-out"},function(){const t=$("#slider").slider("instance");t.value(t.value()-e.ZOOM_STEP),u.setZoom(t.value())}),this.addAction({click:"workflow-copy"},function(){const t=e.workflowId,i=u.getNodes().some(e=>e.isFilled());s.confirmCopy(i).done(function(e){return window.location.href=AGN.url(`/workflow/copy.action?workflowId=${t}&isWithContent=${e}`),!1})}),this.addAction({click:"workflow-generate-pdf"},function(){const t=e.workflowId<=0||!e.shortname,i=u.hasUnsavedChanges();t||i?d.fromTemplate("save-before-pdf-modal"):(window.location.href=AGN.url("/workflow/"+e.workflowId+"/generatePDF.action"),AGN.Lib.Loader.hide())}),this.addAction({click:"workflow-activate"},()=>s.Activation(u.getNodesByTypes(e.NODE_TYPES_MAILING).map(e=>e.title).filter(e=>e.trim())).done(h)),this.addAction({click:"workflow-deactivate"},()=>{return t=!0,i={status:e.constants.statusInactive},void s.Deactivation().done(()=>f(t,i));var t,i}),this.addAction({click:"workflow-pause"},()=>f(!0,{status:e.constants.statusPaused})),this.addAction({click:"workflow-unpause"},()=>{return t={status:e.constants.statusActive},void s.Activation([],!0).done(()=>f(!0,t));var t}),this.addAction({click:"workflow-dry-run"},function(){let t=!1,i=e.constants.statusOpen;e.constants.initialWorkflowStatus!=e.constants.statusTesting&&(t=!0,i=e.constants.statusTesting),s.confirmTestingStartStop(t).done(()=>f(!0,{status:i}))}),this.addDomInitializer("open-edit-icon-initializer",function(t){const i=t.json(),o=i.nodeId,r=i.elementValue;if(!o||!r)return;const s=n.get($("#"+o));s&&(!function(t,i){switch(t.type){case e.NODE_TYPE_MAILING:case e.NODE_TYPE_ACTION_BASED_MAILING:case e.NODE_TYPE_MAILING_MEDIATYPE_SMS:case e.NODE_TYPE_MAILING_MEDIATYPE_POST:case e.NODE_TYPE_DATE_BASED_MAILING:case e.NODE_TYPE_FOLLOWUP_MAILING:t.data.mailingId=i;break;case e.NODE_TYPE_RECIPIENT:"0"!=i&&-1==$.inArray(i,t.data.targets)&&t.data.targets.push(i);break;case e.NODE_TYPE_ARCHIVE:t.data.campaignId=i;break;case e.NODE_TYPE_IMPORT:case e.NODE_TYPE_EXPORT:t.data.importexportId=i;break;default:console.debug("Unknown node type")}}(s,r),u.editIcon(s),u.updateNodeTitle(s,!0))})}),AGN.Lib.Controller.new("wysiwyg-agn-tags",function(){const e=AGN.Lib.Template,t=AGN.Lib.Select,i=AGN.Lib.Confirm,n={},o={};let r;function s(e){let t="";return e&&e.length>0&&e.forEach(function(e,i){const n=$(`#agn-tag-attribute-${i}`);t+=` ${e.name}=&quot;${_.escape(n.val())}&quot;`}),t}n.agnFULLVIEW=()=>{const e=r.children("option:selected").val();if(!e)return;if(!$("#createLinkToggle").prop("checked"))return`[${e}]`;let t=$("#tagLinkText").val();return t||(t="fullview"),`<a href="[${e}]">${t}</a>`},n.agnWEBVIEW=n.agnFULLVIEW,n.agnFORM=function(){const e=r.children("option:selected"),t=e.val(),i=e.data("attributes");if(t){if(!0===$("#createLinkToggle").prop("checked")){let e=$("#tagLinkText").val();if(!e){const t=i.findIndex(function(e){return"name"===e.name});t>-1&&(e=$(`#agn-tag-attribute-${t}`).val())}if(e)return`<a href="[${t+s(i)}]">${e}</a>`}return`[${t+s(i)}]`}},o.agnFORM=function(){const e=$("#createLinkToggle");!0!==e.prop("checked")&&$("#tagLinkText").hide(),e.on("change",function(){$("#tagLinkText").toggle($(this).prop("checked"))})},o.agnFULLVIEW=o.agnFORM,o.agnWEBVIEW=o.agnFULLVIEW,this.addDomInitializer("wysiwyg-agn-tags",function(){r=$("#agn-tag-name"),this.config.forEach(function(e){const t=$("<option>",{value:e.name,text:e.name});r.append(t),t.data("attributes",e.attributes)}),t.get(r).selectFirstValue(),r.trigger("change")}),this.addAction({change:"select-agn-tag"},function(){const t=this.el.children("option:selected"),i=t.val();!function(t,i){const n=$("#agn-tag-attributes");n.empty(),i&&i.length>0&&i.forEach(function(t,i){switch(t.type){case"SELECT":n.append(e.text("agn-tag-select-attribute",{index:i,name:t.name,options:t.options}));break;case"TEXT":n.append(e.text("agn-tag-text-attribute",{index:i,name:t.name}))}});const o=`${t}-extended-attributes`;if(e.exists(o)){const t=e.dom(o);t&&n.append(t)}AGN.runAll(n)}(i,t.data("attributes"));const n=o[i];n&&n()}),this.addAction({click:"insert-agn-tag"},function(){const e=r.val(),t=n[e];let o;o=t?t():function(){const e=r.children("option:selected"),t=e.val();return t?"["+t+s(e.data("attributes"))+"]":null}(),o&&i.get(this.el).positive(o)})}),AGN.Lib.Controller.new("wysiwyg-image-browser",function(){let e;const t=i("mailingID");function i(e){const t=new RegExp("(?:[?&]|&amp;)"+e+"=([^&]+)","i"),i=window.location.search.match(t);return i&&i.length>1?i[1]:""}function n(){const e=s(),t=$("#image-preview"),i=$("#no-image-message"),n=!(!e||!e.length);i.toggleClass("hidden",n),t.parent().toggleClass("hidden",!n),n&&t.attr("src",r(e))}function o(e){if(window.opener.Jodit){const t=i("editorId");window.opener.AGN.Lib.Messaging.send(`image-browser:selectedLink:${t}`,e)}else window.opener.CKEDITOR.tools.callFunction(i("CKEditorFuncNum"),e);window.close()}function r(i){return"http"!==i.substr(0,4).toLowerCase()?`${e.rdirDomain}/image?ci=${e.companyId}&mi=${t}&name=${encodeURIComponent(i)}`:encodeURI(i)}function s(){return $("#image-dropdown").val()}this.addDomInitializer("wysiwyg-image-browser",function(){e=this.config,n()}),this.addAction({change:"update-image"},function(){n()}),this.addAction({click:"submit-image"},function(){"mediapool"===$(".navbar li .active").data("image-tab-name")?function(){const e=$("tr.picked");if(e.exists()){o(e.find("img").attr("src"))}else AGN.Lib.Messages.alert("messages.error.nothing_selected")}():o(r(s()))}),this.addAction({click:"close-window"},function(){window.close()})}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).interact=e()}}(function(){return function e(t,i,n){function o(s,a){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[s]={exports:{}};t[s][0].call(d.exports,function(e){var i=t[s][1][e];return o(i||e)},d,d.exports,e,t,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,i){"use strict";"undefined"==typeof window?t.exports=function(t){return e("./src/utils/window").init(t),e("./src/index")}:t.exports=e("./src/index")},{"./src/index":19,"./src/utils/window":52}],2:[function(e,t,i){"use strict";var n=e("./utils/extend.js");function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(e.immediatePropagationStopped)break;n(e)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=n({},t||{})}return e.prototype.fire=function(e){var t=void 0,i="on"+e.type,n=this.global;(t=this[e.type])&&o(e,t),this[i]&&this[i](e),!e.propagationStopped&&n&&(t=n[e.type])&&o(e,t)},e.prototype.on=function(e,t){this[e]?this[e].push(t):this[e]=[t]},e.prototype.off=function(e,t){var i=this[e],n=i?i.indexOf(t):-1;-1!==n&&i.splice(n,1),(i&&0===i.length||!t)&&(this[e]=void 0)},e}();t.exports=r},{"./utils/extend.js":41}],3:[function(e,t,i){"use strict";var n=e("./utils/extend"),o=e("./utils/getOriginXY"),r=e("./defaultOptions"),s=e("./utils/Signals").new(),a=function(){function e(t,i,a,l,c,d){var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var h=t.target,p=(h&&h.options||r).deltaSource,g=o(h,c,a),f="start"===l,m="end"===l,v=f?t.startCoords:t.curCoords,b=t.prevEvent;c=c||t.element;var y=n({},v.page),w=n({},v.client);y.x-=g.x,y.y-=g.y,w.x-=g.x,w.y-=g.y,this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.button=i.button,this.buttons=i.buttons,this.target=c,this.currentTarget=c,this.relatedTarget=d||null,this.preEnd=u,this.type=a+(l||""),this.interaction=t,this.interactable=h,this.t0=f?t.downTimes[t.downTimes.length-1]:b.t0;var C={interaction:t,event:i,action:a,phase:l,element:c,related:d,page:y,client:w,coords:v,starting:f,ending:m,deltaSource:p,iEvent:this};s.fire("set-xy",C),m?(this.pageX=b.pageX,this.pageY=b.pageY,this.clientX=b.clientX,this.clientY=b.clientY):(this.pageX=y.x,this.pageY=y.y,this.clientX=w.x,this.clientY=w.y),this.x0=t.startCoords.page.x-g.x,this.y0=t.startCoords.page.y-g.y,this.clientX0=t.startCoords.client.x-g.x,this.clientY0=t.startCoords.client.y-g.y,s.fire("set-delta",C),this.timeStamp=v.timeStamp,this.dt=t.pointerDelta.timeStamp,this.duration=this.timeStamp-this.t0,this.speed=t.pointerDelta[p].speed,this.velocityX=t.pointerDelta[p].vx,this.velocityY=t.pointerDelta[p].vy,this.swipe=m||"inertiastart"===l?this.getSwipe():null,s.fire("new",C)}return e.prototype.getSwipe=function(){var e=this.interaction;if(e.prevEvent.speed<600||this.timeStamp-e.prevEvent.timeStamp>150)return null;var t=180*Math.atan2(e.prevEvent.velocityY,e.prevEvent.velocityX)/Math.PI;t<0&&(t+=360);var i=112.5<=t&&t<247.5,n=202.5<=t&&t<337.5;return{up:n,down:!n&&22.5<=t&&t<157.5,left:i,right:!i&&(292.5<=t||t<67.5),angle:t,speed:e.prevEvent.speed,velocity:{x:e.prevEvent.velocityX,y:e.prevEvent.velocityY}}},e.prototype.preventDefault=function(){},e.prototype.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e}();s.on("set-delta",function(e){var t=e.iEvent,i=e.interaction,n=e.starting,o=e.deltaSource,r=n?t:i.prevEvent;"client"===o?(t.dx=t.clientX-r.clientX,t.dy=t.clientY-r.clientY):(t.dx=t.pageX-r.pageX,t.dy=t.pageY-r.pageY)}),a.signals=s,t.exports=a},{"./defaultOptions":18,"./utils/Signals":34,"./utils/extend":41,"./utils/getOriginXY":42}],4:[function(e,t,i){"use strict";var n=e("./utils/clone"),o=e("./utils/is"),r=e("./utils/events"),s=e("./utils/extend"),a=e("./actions/base"),l=e("./scope"),c=e("./Eventable"),d=e("./defaultOptions"),u=e("./utils/Signals").new(),h=e("./utils/domUtils"),p=h.getElementRect,g=h.nodeContains,f=h.trySelector,m=h.matchesSelector,v=e("./utils/window").getWindow,b=e("./utils/arr").contains,y=e("./utils/browser").wheelEvent;l.interactables=[];var w=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=i||{},this.target=t,this.events=new c,this._context=i.context||l.document,this._win=v(f(t)?this._context:t),this._doc=this._win.document,u.fire("new",{target:t,options:i,interactable:this,win:this._win}),l.addDocument(this._doc,this._win),l.interactables.push(this),this.set(i)}return e.prototype.setOnEvents=function(e,t){var i="on"+e;return o.function(t.onstart)&&(this.events[i+"start"]=t.onstart),o.function(t.onmove)&&(this.events[i+"move"]=t.onmove),o.function(t.onend)&&(this.events[i+"end"]=t.onend),o.function(t.oninertiastart)&&(this.events[i+"inertiastart"]=t.oninertiastart),this},e.prototype.setPerAction=function(e,t){for(var i in t)i in d[e]&&(o.object(t[i])?(this.options[e][i]=n(this.options[e][i]||{}),s(this.options[e][i],t[i]),o.object(d.perAction[i])&&"enabled"in d.perAction[i]&&(this.options[e][i].enabled=!1!==t[i].enabled)):o.bool(t[i])&&o.object(d.perAction[i])?this.options[e][i].enabled=t[i]:void 0!==t[i]&&(this.options[e][i]=t[i]))},e.prototype.getRect=function(e){return e=e||this.target,o.string(this.target)&&!o.element(e)&&(e=this._context.querySelector(this.target)),p(e)},e.prototype.rectChecker=function(e){return o.function(e)?(this.getRect=e,this):null===e?(delete this.options.getRect,this):this.getRect},e.prototype._backCompatOption=function(e,t){if(f(t)||o.object(t)){this.options[e]=t;for(var i=0;i<a.names.length;i++){var n=a.names[i];this.options[n][e]=t}return this}return this.options[e]},e.prototype.origin=function(e){return this._backCompatOption("origin",e)},e.prototype.deltaSource=function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):this.options.deltaSource},e.prototype.context=function(){return this._context},e.prototype.inContext=function(e){return this._context===e.ownerDocument||g(this._context,e)},e.prototype.fire=function(e){return this.events.fire(e),this},e.prototype._onOffMultiple=function(e,t,i,n){if(o.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),o.array(t)){for(var r=0;r<t.length;r++){var s=t[r];this[e](s,i,n)}return!0}if(o.object(t)){for(var a in t)this[e](a,t[a],i);return!0}},e.prototype.on=function(t,i,n){return this._onOffMultiple("on",t,i,n)||("wheel"===t&&(t=y),b(e.eventTypes,t)?this.events.on(t,i):o.string(this.target)?r.addDelegate(this.target,this._context,t,i,n):r.add(this.target,t,i,n)),this},e.prototype.off=function(t,i,n){return this._onOffMultiple("off",t,i,n)||("wheel"===t&&(t=y),b(e.eventTypes,t)?this.events.off(t,i):o.string(this.target)?r.removeDelegate(this.target,this._context,t,i,n):r.remove(this.target,t,i,n)),this},e.prototype.set=function(t){o.object(t)||(t={}),this.options=n(d.base);var i=n(d.perAction);for(var r in a.methodDict){var s=a.methodDict[r];this.options[r]=n(d[r]),this.setPerAction(r,i),this[s](t[r])}for(var l=0;l<e.settingsMethods.length;l++){var c=e.settingsMethods[l];this.options[c]=d.base[c],c in t&&this[c](t[c])}return u.fire("set",{options:t,interactable:this}),this},e.prototype.unset=function(){if(r.remove(this.target,"all"),o.string(this.target))for(var e in r.delegatedEvents){var t=r.delegatedEvents[e];t.selectors[0]===this.target&&t.contexts[0]===this._context&&(t.selectors.splice(0,1),t.contexts.splice(0,1),t.listeners.splice(0,1),t.selectors.length||(t[e]=null)),r.remove(this._context,e,r.delegateListener),r.remove(this._context,e,r.delegateUseCapture,!0)}else r.remove(this,"all");u.fire("unset",{interactable:this}),l.interactables.splice(l.interactables.indexOf(this),1);for(var i=0;i<(l.interactions||[]).length;i++){var n=(l.interactions||[])[i];n.target===this&&n.interacting()&&!n._ending&&n.stop()}return l.interact},e}();l.interactables.indexOfElement=function(e,t){t=t||l.document;for(var i=0;i<this.length;i++){var n=this[i];if(n.target===e&&n._context===t)return i}return-1},l.interactables.get=function(e,t,i){var n=this[this.indexOfElement(e,t&&t.context)];return n&&(o.string(e)||i||n.inContext(e))?n:null},l.interactables.forEachMatch=function(e,t){for(var i=0;i<this.length;i++){var n=this[i],r=void 0;if((o.string(n.target)?o.element(e)&&m(e,n.target):e===n.target)&&n.inContext(e)&&(r=t(n)),void 0!==r)return r}},w.eventTypes=l.eventTypes=[],w.signals=u,w.settingsMethods=["deltaSource","origin","preventDefault","rectChecker"],t.exports=w},{"./Eventable":2,"./actions/base":6,"./defaultOptions":18,"./scope":33,"./utils/Signals":34,"./utils/arr":35,"./utils/browser":36,"./utils/clone":37,"./utils/domUtils":39,"./utils/events":40,"./utils/extend":41,"./utils/is":46,"./utils/window":52}],5:[function(e,t,i){"use strict";var n=e("./scope"),o=e("./utils"),r=e("./utils/events"),s=e("./utils/browser"),a=e("./utils/domObjects"),l=e("./utils/interactionFinder"),c=e("./utils/Signals").new(),d={},u=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer"],h=0;n.interactions=[];for(var p=function(){function e(t){var i=t.pointerType;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=null,this.element=null,this.prepared={name:null,axis:null,edges:null},this.pointers=[],this.pointerIds=[],this.downTargets=[],this.downTimes=[],this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0},this.downEvent=null,this.downPointer={},this._eventTarget=null,this._curEventTarget=null,this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this.pointerType=i,c.fire("new",this),n.interactions.push(this)}return e.prototype.pointerDown=function(e,t,i){var n=this.updatePointer(e,t,!0);c.fire("down",{pointer:e,event:t,eventTarget:i,pointerIndex:n,interaction:this})},e.prototype.start=function(e,t,i){this.interacting()||!this.pointerIsDown||this.pointerIds.length<("gesture"===e.name?2:1)||(-1===n.interactions.indexOf(this)&&n.interactions.push(this),o.copyAction(this.prepared,e),this.target=t,this.element=i,c.fire("action-start",{interaction:this,event:this.downEvent}))},e.prototype.pointerMove=function(t,i,n){this.simulation||(this.updatePointer(t),o.setCoords(this.curCoords,this.pointers));var r=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y,s=void 0,a=void 0;this.pointerIsDown&&!this.pointerWasMoved&&(s=this.curCoords.client.x-this.startCoords.client.x,a=this.curCoords.client.y-this.startCoords.client.y,this.pointerWasMoved=o.hypot(s,a)>e.pointerMoveTolerance);var l={pointer:t,pointerIndex:this.getPointerIndex(t),event:i,eventTarget:n,dx:s,dy:a,duplicate:r,interaction:this,interactingBeforeMove:this.interacting()};r||o.setCoordDeltas(this.pointerDelta,this.prevCoords,this.curCoords),c.fire("move",l),r||(this.interacting()&&this.doMove(l),this.pointerWasMoved&&o.copyCoords(this.prevCoords,this.curCoords))},e.prototype.doMove=function(e){e=o.extend({pointer:this.pointers[0],event:this.prevEvent,eventTarget:this._eventTarget,interaction:this},e||{}),c.fire("before-action-move",e),this._dontFireMove||c.fire("action-move",e),this._dontFireMove=!1},e.prototype.pointerUp=function(e,t,i,n){var o=this.getPointerIndex(e);c.fire(/cancel$/i.test(t.type)?"cancel":"up",{pointer:e,pointerIndex:o,event:t,eventTarget:i,curEventTarget:n,interaction:this}),this.simulation||this.end(t),this.pointerIsDown=!1,this.removePointer(e,t)},e.prototype.end=function(e){this._ending=!0,e=e||this.prevEvent,this.interacting()&&c.fire("action-end",{event:e,interaction:this}),this.stop(),this._ending=!1},e.prototype.currentAction=function(){return this._interacting?this.prepared.name:null},e.prototype.interacting=function(){return this._interacting},e.prototype.stop=function(){c.fire("stop",{interaction:this}),this._interacting&&(c.fire("stop-active",{interaction:this}),c.fire("stop-"+this.prepared.name,{interaction:this})),this.target=this.element=null,this._interacting=!1,this.prepared.name=this.prevEvent=null},e.prototype.getPointerIndex=function(e){return"mouse"===this.pointerType||"pen"===this.pointerType?0:this.pointerIds.indexOf(o.getPointerId(e))},e.prototype.updatePointer=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t&&/(down|start)$/i.test(t.type),n=o.getPointerId(e),r=this.getPointerIndex(e);return-1===r&&(r=this.pointerIds.length,this.pointerIds[r]=n),i&&c.fire("update-pointer-down",{pointer:e,event:t,down:i,pointerId:n,pointerIndex:r,interaction:this}),this.pointers[r]=e,r},e.prototype.removePointer=function(e,t){var i=this.getPointerIndex(e);-1!==i&&(c.fire("remove-pointer",{pointer:e,event:t,pointerIndex:i,interaction:this}),this.pointers.splice(i,1),this.pointerIds.splice(i,1),this.downTargets.splice(i,1),this.downTimes.splice(i,1))},e.prototype._updateEventTargets=function(e,t){this._eventTarget=e,this._curEventTarget=t},e}(),g=0;g<u.length;g++){var f=u[g];d[f]=m(f)}function m(e){return function(t){var i=o.getPointerType(t),r=o.getEventTargets(t),a=r[0],c=r[1],d=[];if(s.supportsTouch&&/touch/.test(t.type)){h=(new Date).getTime();for(var u=0;u<t.changedTouches.length;u++){var g=t.changedTouches[u],f=l.search(g,t.type,a);d.push([g,f||new p({pointerType:i})])}}else{var m=!1;if(!s.supportsPointerEvent&&/mouse/.test(t.type)){for(var v=0;v<n.interactions.length&&!m;v++)m="mouse"!==n.interactions[v].pointerType&&n.interactions[v].pointerIsDown;m=m||(new Date).getTime()-h<500||0===t.timeStamp}if(!m){var b=l.search(t,t.type,a);b||(b=new p({pointerType:i})),d.push([t,b])}}for(var y=0;y<d.length;y++){var w=d[y],C=w[0],_=w[1];_._updateEventTargets(a,c),_[e](C,t,a,c)}}}function v(e){for(var t=0;t<n.interactions.length;t++){var i=n.interactions[t];i.end(e),c.fire("endall",{event:e,interaction:i})}}var b={},y=s.pEventTypes;function w(e,t){var i=e.doc,o=0===t.indexOf("add")?r.add:r.remove;for(var a in n.delegatedEvents)o(i,a,r.delegateListener),o(i,a,r.delegateUseCapture,!0);for(var l in b)o(i,l,b[l],s.isIOS?{passive:!1}:void 0)}a.PointerEvent?(b[y.down]=d.pointerDown,b[y.move]=d.pointerMove,b[y.up]=d.pointerUp,b[y.cancel]=d.pointerUp):(b.mousedown=d.pointerDown,b.mousemove=d.pointerMove,b.mouseup=d.pointerUp,b.touchstart=d.pointerDown,b.touchmove=d.pointerMove,b.touchend=d.pointerUp,b.touchcancel=d.pointerUp),b.blur=v,c.on("update-pointer-down",function(e){var t=e.interaction,i=e.pointer,n=e.pointerId,r=e.pointerIndex,s=e.event,a=e.eventTarget,l=e.down;t.pointerIds[r]=n,t.pointers[r]=i,l&&(t.pointerIsDown=!0),t.interacting()||(o.setCoords(t.startCoords,t.pointers),o.copyCoords(t.curCoords,t.startCoords),o.copyCoords(t.prevCoords,t.startCoords),t.downEvent=s,t.downTimes[r]=t.curCoords.timeStamp,t.downTargets[r]=a||s&&o.getEventTargets(s)[0],t.pointerWasMoved=!1,o.pointerExtend(t.downPointer,i))}),n.signals.on("add-document",w),n.signals.on("remove-document",w),p.pointerMoveTolerance=1,p.doOnInteractions=m,p.endAll=v,p.signals=c,p.docEvents=b,n.endAllInteractions=v,t.exports=p},{"./scope":33,"./utils":44,"./utils/Signals":34,"./utils/browser":36,"./utils/domObjects":38,"./utils/events":40,"./utils/interactionFinder":45}],6:[function(e,t,i){"use strict";var n=e("../Interaction"),o=e("../InteractEvent"),r={firePrepared:s,names:[],methodDict:{}};function s(e,t,i,n){var r=e.prepared.name,s=new o(e,t,r,i,e.element,null,n);e.target.fire(s),e.prevEvent=s}n.signals.on("action-start",function(e){var t=e.interaction,i=e.event;t._interacting=!0,s(t,i,"start")}),n.signals.on("action-move",function(e){var t=e.interaction;if(s(t,e.event,"move",e.preEnd),!t.interacting())return!1}),n.signals.on("action-end",function(e){s(e.interaction,e.event,"end")}),t.exports=r},{"../InteractEvent":3,"../Interaction":5}],7:[function(e,t,i){"use strict";var n=e("./base"),o=e("../utils"),r=e("../InteractEvent"),s=e("../Interactable"),a=e("../Interaction"),l=e("../defaultOptions"),c={defaults:{enabled:!1,mouseButtons:null,origin:null,snap:null,restrict:null,inertia:null,autoScroll:null,startAxis:"xy",lockAxis:"xy"},checker:function(e,t,i){var n=i.options.drag;return n.enabled?{name:"drag",axis:"start"===n.lockAxis?n.startAxis:n.lockAxis}:null},getCursor:function(){return"move"}};a.signals.on("before-action-move",function(e){var t=e.interaction;if("drag"===t.prepared.name){var i=t.prepared.axis;"x"===i?(t.curCoords.page.y=t.startCoords.page.y,t.curCoords.client.y=t.startCoords.client.y,t.pointerDelta.page.speed=Math.abs(t.pointerDelta.page.vx),t.pointerDelta.client.speed=Math.abs(t.pointerDelta.client.vx),t.pointerDelta.client.vy=0,t.pointerDelta.page.vy=0):"y"===i&&(t.curCoords.page.x=t.startCoords.page.x,t.curCoords.client.x=t.startCoords.client.x,t.pointerDelta.page.speed=Math.abs(t.pointerDelta.page.vy),t.pointerDelta.client.speed=Math.abs(t.pointerDelta.client.vy),t.pointerDelta.client.vx=0,t.pointerDelta.page.vx=0)}}),r.signals.on("new",function(e){var t=e.iEvent,i=e.interaction;if("dragmove"===t.type){var n=i.prepared.axis;"x"===n?(t.pageY=i.startCoords.page.y,t.clientY=i.startCoords.client.y,t.dy=0):"y"===n&&(t.pageX=i.startCoords.page.x,t.clientX=i.startCoords.client.x,t.dx=0)}}),s.prototype.draggable=function(e){return o.is.object(e)?(this.options.drag.enabled=!1!==e.enabled,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^(xy|x|y|start)$/.test(e.lockAxis)&&(this.options.drag.lockAxis=e.lockAxis),/^(xy|x|y)$/.test(e.startAxis)&&(this.options.drag.startAxis=e.startAxis),this):o.is.bool(e)?(this.options.drag.enabled=e,e||(this.ondragstart=this.ondragstart=this.ondragend=null),this):this.options.drag},n.drag=c,n.names.push("drag"),o.merge(s.eventTypes,["dragstart","dragmove","draginertiastart","draginertiaresume","dragend"]),n.methodDict.drag="draggable",l.drag=c.defaults,t.exports=c},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":44,"./base":6}],8:[function(e,t,i){"use strict";var n=e("./base"),o=e("../utils"),r=e("../scope"),s=e("../interact"),a=e("../InteractEvent"),l=e("../Interactable"),c=e("../Interaction"),d=e("../defaultOptions"),u={defaults:{enabled:!1,accept:null,overlap:"pointer"}},h=!1;function p(e,t){for(var i=void 0,n=0;n<e.dropzones.length;n++){var o=e.dropzones[n],r=e.elements[n];r!==i&&(t.target=r,o.fire(t)),i=r}}function g(e,t){var i=function(e,t){for(var i=[],n=[],s=0;s<r.interactables.length;s++){var a=r.interactables[s];if(a.options.drop.enabled){var l=a.options.drop.accept;if(!(o.is.element(l)&&l!==t||o.is.string(l)&&!o.matchesSelector(t,l)))for(var c=o.is.string(a.target)?a._context.querySelectorAll(a.target):[a.target],d=0;d<c.length;d++){var u=c[d];u!==t&&(i.push(a),n.push(u))}}}return{elements:n,dropzones:i}}(0,t);e.dropzones=i.dropzones,e.elements=i.elements,e.rects=[];for(var n=0;n<e.dropzones.length;n++)e.rects[n]=e.dropzones[n].getRect(e.elements[n])}function f(e,t,i){var n={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null},r={dragEvent:i,interaction:e,target:e.dropElement,dropzone:e.dropTarget,relatedTarget:i.target,draggable:i.interactable,timeStamp:i.timeStamp};return e.dropElement!==e.prevDropElement&&(e.prevDropTarget&&(n.leave=o.extend({type:"dragleave"},r),i.dragLeave=n.leave.target=e.prevDropElement,i.prevDropzone=n.leave.dropzone=e.prevDropTarget),e.dropTarget&&(n.enter={dragEvent:i,interaction:e,target:e.dropElement,dropzone:e.dropTarget,relatedTarget:i.target,draggable:i.interactable,timeStamp:i.timeStamp,type:"dragenter"},i.dragEnter=e.dropElement,i.dropzone=e.dropTarget)),"dragend"===i.type&&e.dropTarget&&(n.drop=o.extend({type:"drop"},r),i.dropzone=e.dropTarget,i.relatedTarget=e.dropElement),"dragstart"===i.type&&(n.activate=o.extend({type:"dropactivate"},r),n.activate.target=null,n.activate.dropzone=null),"dragend"===i.type&&(n.deactivate=o.extend({type:"dropdeactivate"},r),n.deactivate.target=null,n.deactivate.dropzone=null),"dragmove"===i.type&&e.dropTarget&&(n.move=o.extend({dragmove:i,type:"dropmove"},r),i.dropzone=e.dropTarget),n}function m(e,t){var i=e.activeDrops,n=e.prevDropTarget,o=e.dropTarget,r=e.dropElement;t.leave&&n.fire(t.leave),t.move&&o.fire(t.move),t.enter&&o.fire(t.enter),t.drop&&o.fire(t.drop),t.deactivate&&p(i,t.deactivate),e.prevDropTarget=o,e.prevDropElement=r}c.signals.on("action-start",function(e){var t=e.interaction,i=e.event;if("drag"===t.prepared.name){t.activeDrops.dropzones=[],t.activeDrops.elements=[],t.activeDrops.rects=[],t.dropEvents=null,t.dynamicDrop||g(t.activeDrops,t.element);var n=f(t,i,t.prevEvent);n.activate&&p(t.activeDrops,n.activate)}}),a.signals.on("new",function(e){var t=e.interaction,i=e.iEvent,n=e.event;if("dragmove"===i.type||"dragend"===i.type){var r=i,s=function(e,t,i){var n=e.interaction,r=[];h&&g(n.activeDrops,i);for(var s=0;s<n.activeDrops.dropzones.length;s++){var a=n.activeDrops.dropzones[s],l=n.activeDrops.elements[s],c=n.activeDrops.rects[s];r.push(a.dropCheck(e,t,n.target,i,l,c)?l:null)}var d=o.indexOfDeepestElement(r);return{dropzone:n.activeDrops.dropzones[d]||null,element:n.activeDrops.elements[d]||null}}(r,n,t.element);t.dropTarget=s.dropzone,t.dropElement=s.element,t.dropEvents=f(t,n,r)}}),c.signals.on("action-move",function(e){var t=e.interaction;"drag"===t.prepared.name&&m(t,t.dropEvents)}),c.signals.on("action-end",function(e){var t=e.interaction;"drag"===t.prepared.name&&m(t,t.dropEvents)}),c.signals.on("stop-drag",function(e){var t=e.interaction;t.activeDrops={dropzones:null,elements:null,rects:null},t.dropEvents=null}),l.prototype.dropzone=function(e){return o.is.object(e)?(this.options.drop.enabled=!1!==e.enabled,o.is.function(e.ondrop)&&(this.events.ondrop=e.ondrop),o.is.function(e.ondropactivate)&&(this.events.ondropactivate=e.ondropactivate),o.is.function(e.ondropdeactivate)&&(this.events.ondropdeactivate=e.ondropdeactivate),o.is.function(e.ondragenter)&&(this.events.ondragenter=e.ondragenter),o.is.function(e.ondragleave)&&(this.events.ondragleave=e.ondragleave),o.is.function(e.ondropmove)&&(this.events.ondropmove=e.ondropmove),/^(pointer|center)$/.test(e.overlap)?this.options.drop.overlap=e.overlap:o.is.number(e.overlap)&&(this.options.drop.overlap=Math.max(Math.min(1,e.overlap),0)),"accept"in e&&(this.options.drop.accept=e.accept),"checker"in e&&(this.options.drop.checker=e.checker),this):o.is.bool(e)?(this.options.drop.enabled=e,e||(this.ondragenter=this.ondragleave=this.ondrop=this.ondropactivate=this.ondropdeactivate=null),this):this.options.drop},l.prototype.dropCheck=function(e,t,i,n,r,s){var a=!1;if(!(s=s||this.getRect(r)))return!!this.options.drop.checker&&this.options.drop.checker(e,t,a,this,r,i,n);var l=this.options.drop.overlap;if("pointer"===l){var c=o.getOriginXY(i,n,"drag"),d=o.getPageXY(e);d.x+=c.x,d.y+=c.y;var u=d.x>s.left&&d.x<s.right,h=d.y>s.top&&d.y<s.bottom;a=u&&h}var p=i.getRect(n);if(p&&"center"===l){var g=p.left+p.width/2,f=p.top+p.height/2;a=g>=s.left&&g<=s.right&&f>=s.top&&f<=s.bottom}p&&o.is.number(l)&&(a=Math.max(0,Math.min(s.right,p.right)-Math.max(s.left,p.left))*Math.max(0,Math.min(s.bottom,p.bottom)-Math.max(s.top,p.top))/(p.width*p.height)>=l);return this.options.drop.checker&&(a=this.options.drop.checker(e,t,a,this,r,i,n)),a},l.signals.on("unset",function(e){e.interactable.dropzone(!1)}),l.settingsMethods.push("dropChecker"),c.signals.on("new",function(e){e.dropTarget=null,e.dropElement=null,e.prevDropTarget=null,e.prevDropElement=null,e.dropEvents=null,e.activeDrops={dropzones:[],elements:[],rects:[]}}),c.signals.on("stop",function(e){var t=e.interaction;t.dropTarget=t.dropElement=t.prevDropTarget=t.prevDropElement=null}),s.dynamicDrop=function(e){return o.is.bool(e)?(h=e,s):h},o.merge(l.eventTypes,["dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop"]),n.methodDict.drop="dropzone",d.drop=u.defaults,t.exports=u},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../interact":21,"../scope":33,"../utils":44,"./base":6}],9:[function(e,t,i){"use strict";var n=e("./base"),o=e("../utils"),r=e("../InteractEvent"),s=e("../Interactable"),a=e("../Interaction"),l=e("../defaultOptions"),c={defaults:{enabled:!1,origin:null,restrict:null},checker:function(e,t,i,n,o){return o.pointerIds.length>=2?{name:"gesture"}:null},getCursor:function(){return""}};r.signals.on("new",function(e){var t=e.iEvent,i=e.interaction;"gesturestart"===t.type&&(t.ds=0,i.gesture.startDistance=i.gesture.prevDistance=t.distance,i.gesture.startAngle=i.gesture.prevAngle=t.angle,i.gesture.scale=1)}),r.signals.on("new",function(e){var t=e.iEvent,i=e.interaction;"gesturemove"===t.type&&(t.ds=t.scale-i.gesture.scale,i.target.fire(t),i.gesture.prevAngle=t.angle,i.gesture.prevDistance=t.distance,t.scale===1/0||null===t.scale||void 0===t.scale||isNaN(t.scale)||(i.gesture.scale=t.scale))}),s.prototype.gesturable=function(e){return o.is.object(e)?(this.options.gesture.enabled=!1!==e.enabled,this.setPerAction("gesture",e),this.setOnEvents("gesture",e),this):o.is.bool(e)?(this.options.gesture.enabled=e,e||(this.ongesturestart=this.ongesturestart=this.ongestureend=null),this):this.options.gesture},r.signals.on("set-delta",function(e){var t=e.interaction,i=e.iEvent,n=e.action,s=e.event,a=e.starting,l=e.ending,c=e.deltaSource;if("gesture"===n){var d=t.pointers;i.touches=[d[0],d[1]],a?(i.distance=o.touchDistance(d,c),i.box=o.touchBBox(d),i.scale=1,i.ds=0,i.angle=o.touchAngle(d,void 0,c),i.da=0):l||s instanceof r?(i.distance=t.prevEvent.distance,i.box=t.prevEvent.box,i.scale=t.prevEvent.scale,i.ds=i.scale-1,i.angle=t.prevEvent.angle,i.da=i.angle-t.gesture.startAngle):(i.distance=o.touchDistance(d,c),i.box=o.touchBBox(d),i.scale=i.distance/t.gesture.startDistance,i.angle=o.touchAngle(d,t.gesture.prevAngle,c),i.ds=i.scale-t.gesture.prevScale,i.da=i.angle-t.gesture.prevAngle)}}),a.signals.on("new",function(e){e.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0}}),n.gesture=c,n.names.push("gesture"),o.merge(s.eventTypes,["gesturestart","gesturemove","gestureend"]),n.methodDict.gesture="gesturable",l.gesture=c.defaults,t.exports=c},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":44,"./base":6}],10:[function(e,t,i){"use strict";var n=e("./base"),o=e("../utils"),r=e("../utils/browser"),s=e("../InteractEvent"),a=e("../Interactable"),l=e("../Interaction"),c=e("../defaultOptions"),d=r.supportsTouch||r.supportsPointerEvent?20:10,u={defaults:{enabled:!1,mouseButtons:null,origin:null,snap:null,restrict:null,inertia:null,autoScroll:null,square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},checker:function(e,t,i,n,r,s){if(!s)return null;var a=o.extend({},r.curCoords.page),l=i.options;if(l.resize.enabled){var c=l.resize,u={left:!1,right:!1,top:!1,bottom:!1};if(o.is.object(c.edges)){for(var p in u)u[p]=h(p,c.edges[p],a,r._eventTarget,n,s,c.margin||d);if(u.left=u.left&&!u.right,u.top=u.top&&!u.bottom,u.left||u.right||u.top||u.bottom)return{name:"resize",edges:u}}else{var g="y"!==l.resize.axis&&a.x>s.right-d,f="x"!==l.resize.axis&&a.y>s.bottom-d;if(g||f)return{name:"resize",axes:(g?"x":"")+(f?"y":"")}}}return null},cursors:r.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"},getCursor:function(e){if(e.axis)return u.cursors[e.name+e.axis];if(e.edges){for(var t="",i=["top","bottom","left","right"],n=0;n<4;n++)e.edges[i[n]]&&(t+=i[n]);return u.cursors[t]}}};function h(e,t,i,n,r,s,a){if(!t)return!1;if(!0===t){var l=o.is.number(s.width)?s.width:s.right-s.left,c=o.is.number(s.height)?s.height:s.bottom-s.top;if(l<0&&("left"===e?e="right":"right"===e&&(e="left")),c<0&&("top"===e?e="bottom":"bottom"===e&&(e="top")),"left"===e)return i.x<(l>=0?s.left:s.right)+a;if("top"===e)return i.y<(c>=0?s.top:s.bottom)+a;if("right"===e)return i.x>(l>=0?s.right:s.left)-a;if("bottom"===e)return i.y>(c>=0?s.bottom:s.top)-a}return!!o.is.element(n)&&(o.is.element(t)?t===n:o.matchesUpTo(n,t,r))}s.signals.on("new",function(e){var t=e.iEvent,i=e.interaction;if("resizestart"===t.type&&i.prepared.edges){var n=i.target.getRect(i.element),r=i.target.options.resize;if(r.square||r.preserveAspectRatio){var s=o.extend({},i.prepared.edges);s.top=s.top||s.left&&!s.bottom,s.left=s.left||s.top&&!s.right,s.bottom=s.bottom||s.right&&!s.top,s.right=s.right||s.bottom&&!s.left,i.prepared._linkedEdges=s}else i.prepared._linkedEdges=null;r.preserveAspectRatio&&(i.resizeStartAspectRatio=n.width/n.height),i.resizeRects={start:n,current:o.extend({},n),inverted:o.extend({},n),previous:o.extend({},n),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},t.rect=i.resizeRects.inverted,t.deltaRect=i.resizeRects.delta}}),s.signals.on("new",function(e){var t=e.iEvent,i=e.phase,n=e.interaction;if("move"===i&&n.prepared.edges){var r=n.target.options.resize,s=r.invert,a="reposition"===s||"negate"===s,l=n.prepared.edges,c=n.resizeRects.start,d=n.resizeRects.current,u=n.resizeRects.inverted,h=n.resizeRects.delta,p=o.extend(n.resizeRects.previous,u),g=l,f=t.dx,m=t.dy;if(r.preserveAspectRatio||r.square){var v=r.preserveAspectRatio?n.resizeStartAspectRatio:1;l=n.prepared._linkedEdges,g.left&&g.bottom||g.right&&g.top?m=-f/v:g.left||g.right?m=f/v:(g.top||g.bottom)&&(f=m*v)}if(l.top&&(d.top+=m),l.bottom&&(d.bottom+=m),l.left&&(d.left+=f),l.right&&(d.right+=f),a){if(o.extend(u,d),"reposition"===s){var b=void 0;u.top>u.bottom&&(b=u.top,u.top=u.bottom,u.bottom=b),u.left>u.right&&(b=u.left,u.left=u.right,u.right=b)}}else u.top=Math.min(d.top,c.bottom),u.bottom=Math.max(d.bottom,c.top),u.left=Math.min(d.left,c.right),u.right=Math.max(d.right,c.left);for(var y in u.width=u.right-u.left,u.height=u.bottom-u.top,u)h[y]=u[y]-p[y];t.edges=n.prepared.edges,t.rect=u,t.deltaRect=h}}),a.prototype.resizable=function(e){return o.is.object(e)?(this.options.resize.enabled=!1!==e.enabled,this.setPerAction("resize",e),this.setOnEvents("resize",e),/^x$|^y$|^xy$/.test(e.axis)?this.options.resize.axis=e.axis:null===e.axis&&(this.options.resize.axis=c.resize.axis),o.is.bool(e.preserveAspectRatio)?this.options.resize.preserveAspectRatio=e.preserveAspectRatio:o.is.bool(e.square)&&(this.options.resize.square=e.square),this):o.is.bool(e)?(this.options.resize.enabled=e,e||(this.onresizestart=this.onresizestart=this.onresizeend=null),this):this.options.resize},l.signals.on("new",function(e){e.resizeAxes="xy"}),s.signals.on("set-delta",function(e){var t=e.interaction,i=e.iEvent;"resize"===e.action&&t.resizeAxes&&(t.target.options.resize.square?("y"===t.resizeAxes?i.dx=i.dy:i.dy=i.dx,i.axes="xy"):(i.axes=t.resizeAxes,"x"===t.resizeAxes?i.dy=0:"y"===t.resizeAxes&&(i.dx=0)))}),n.resize=u,n.names.push("resize"),o.merge(a.eventTypes,["resizestart","resizemove","resizeinertiastart","resizeinertiaresume","resizeend"]),n.methodDict.resize="resizable",c.resize=u.defaults,t.exports=u},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":44,"../utils/browser":36,"./base":6}],11:[function(e,t,i){"use strict";var n=e("./utils/raf"),o=e("./utils/window").getWindow,r=e("./utils/is"),s=e("./utils/domUtils"),a=e("./Interaction"),l=e("./defaultOptions"),c={defaults:{enabled:!1,container:null,margin:60,speed:300},interaction:null,i:null,x:0,y:0,isScrolling:!1,prevTime:0,start:function(e){c.isScrolling=!0,n.cancel(c.i),c.interaction=e,c.prevTime=(new Date).getTime(),c.i=n.request(c.scroll)},stop:function(){c.isScrolling=!1,n.cancel(c.i)},scroll:function(){var e=c.interaction.target.options[c.interaction.prepared.name].autoScroll,t=e.container||o(c.interaction.element),i=(new Date).getTime(),s=(i-c.prevTime)/1e3,a=e.speed*s;a>=1&&(r.window(t)?t.scrollBy(c.x*a,c.y*a):t&&(t.scrollLeft+=c.x*a,t.scrollTop+=c.y*a),c.prevTime=i),c.isScrolling&&(n.cancel(c.i),c.i=n.request(c.scroll))},check:function(e,t){var i=e.options;return i[t].autoScroll&&i[t].autoScroll.enabled},onInteractionMove:function(e){var t=e.interaction,i=e.pointer;if(t.interacting()&&c.check(t.target,t.prepared.name))if(t.simulation)c.x=c.y=0;else{var n=void 0,a=void 0,l=void 0,d=void 0,u=t.target.options[t.prepared.name].autoScroll,h=u.container||o(t.element);if(r.window(h))d=i.clientX<c.margin,n=i.clientY<c.margin,a=i.clientX>h.innerWidth-c.margin,l=i.clientY>h.innerHeight-c.margin;else{var p=s.getElementClientRect(h);d=i.clientX<p.left+c.margin,n=i.clientY<p.top+c.margin,a=i.clientX>p.right-c.margin,l=i.clientY>p.bottom-c.margin}c.x=a?1:d?-1:0,c.y=l?1:n?-1:0,c.isScrolling||(c.margin=u.margin,c.speed=u.speed,c.start(t))}}};a.signals.on("stop-active",function(){c.stop()}),a.signals.on("action-move",c.onInteractionMove),l.perAction.autoScroll=c.defaults,t.exports=c},{"./Interaction":5,"./defaultOptions":18,"./utils/domUtils":39,"./utils/is":46,"./utils/raf":50,"./utils/window":52}],12:[function(e,t,i){"use strict";var n=e("../Interactable"),o=e("../actions/base"),r=e("../utils/is"),s=e("../utils/domUtils"),a=e("../utils").warnOnce;n.prototype.getAction=function(e,t,i,n){var o=this.defaultActionChecker(e,t,i,n);return this.options.actionChecker?this.options.actionChecker(e,t,o,this,n,i):o},n.prototype.ignoreFrom=a(function(e){return this._backCompatOption("ignoreFrom",e)},"Interactable.ignoreForm() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),n.prototype.allowFrom=a(function(e){return this._backCompatOption("allowFrom",e)},"Interactable.allowForm() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),n.prototype.testIgnore=function(e,t,i){return!(!e||!r.element(i))&&(r.string(e)?s.matchesUpTo(i,e,t):!!r.element(e)&&s.nodeContains(e,i))},n.prototype.testAllow=function(e,t,i){return!e||!!r.element(i)&&(r.string(e)?s.matchesUpTo(i,e,t):!!r.element(e)&&s.nodeContains(e,i))},n.prototype.testIgnoreAllow=function(e,t,i){return!this.testIgnore(e.ignoreFrom,t,i)&&this.testAllow(e.allowFrom,t,i)},n.prototype.actionChecker=function(e){return r.function(e)?(this.options.actionChecker=e,this):null===e?(delete this.options.actionChecker,this):this.options.actionChecker},n.prototype.styleCursor=function(e){return r.bool(e)?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor},n.prototype.defaultActionChecker=function(e,t,i,n){for(var r=this.getRect(n),s=t.buttons||{0:1,1:4,3:8,4:16}[t.button],a=null,l=0;l<o.names.length;l++){var c=o.names[l];if((!i.pointerIsDown||!/mouse|pointer/.test(i.pointerType)||0!==(s&this.options[c].mouseButtons))&&(a=o[c].checker(e,t,this,n,i,r)))return a}}},{"../Interactable":4,"../actions/base":6,"../utils":44,"../utils/domUtils":39,"../utils/is":46}],13:[function(e,t,i){"use strict";var n=e("../interact"),o=e("../Interactable"),r=e("../Interaction"),s=e("../actions/base"),a=e("../defaultOptions"),l=e("../scope"),c=e("../utils"),d=e("../utils/Signals").new();e("./InteractableMethods");var u={signals:d,withinInteractionLimit:m,maxInteractions:1/0,defaults:{perAction:{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}},setActionDefaults:function(e){c.extend(e.defaults,u.defaults.perAction)},validateAction:h};function h(e,t,i,n){return c.is.object(e)&&t.testIgnoreAllow(t.options[e.name],i,n)&&t.options[e.name].enabled&&m(t,i,e)?e:null}function p(e,t,i,n,o,r){for(var s=0,a=n.length;s<a;s++){var l=n[s],c=o[s],d=h(l.getAction(t,i,e,c),l,c,r);if(d)return{action:d,target:l,element:c}}return{}}function g(e,t,i,n){var o=[],r=[],s=n;function a(e){o.push(e),r.push(s)}for(;c.is.element(s);){o=[],r=[],l.interactables.forEachMatch(s,a);var d=p(e,t,i,o,r,n);if(d.action&&!d.target.options[d.action.name].manualStart)return d;s=c.parentNode(s)}return{}}function f(e,t){var i=t.action,n=t.target,o=t.element;if(i=i||{},e.target&&e.target.options.styleCursor&&(e.target._doc.documentElement.style.cursor=""),e.target=n,e.element=o,c.copyAction(e.prepared,i),n&&n.options.styleCursor){var r=i?s[i.name].getCursor(i):"";e.target._doc.documentElement.style.cursor=r}d.fire("prepared",{interaction:e})}function m(e,t,i){var n=e.options,o=n[i.name].max,r=n[i.name].maxPerElement,s=0,a=0,c=0;if(o&&r&&u.maxInteractions){for(var d=0;d<l.interactions.length;d++){var h=l.interactions[d],p=h.prepared.name;if(h.interacting()){if(++s>=u.maxInteractions)return!1;if(h.target===e){if((a+=p===i.name|0)>=o)return!1;if(h.element===t&&(c++,p!==i.name||c>=r))return!1}}}return u.maxInteractions>0}}r.signals.on("down",function(e){var t=e.interaction,i=e.pointer,n=e.event,o=e.eventTarget;t.interacting()||f(t,g(t,i,n,o))}),r.signals.on("move",function(e){var t=e.interaction,i=e.pointer,n=e.event,o=e.eventTarget;"mouse"!==t.pointerType||t.pointerIsDown||t.interacting()||f(t,g(t,i,n,o))}),r.signals.on("move",function(e){var t=e.interaction,i=e.event;if(t.pointerIsDown&&!t.interacting()&&t.pointerWasMoved&&t.prepared.name){d.fire("before-start",e);var n=t.target;t.prepared.name&&n&&(n.options[t.prepared.name].manualStart||!m(n,t.element,t.prepared)?t.stop(i):t.start(t.prepared,n,t.element))}}),r.signals.on("stop",function(e){var t=e.interaction.target;t&&t.options.styleCursor&&(t._doc.documentElement.style.cursor="")}),n.maxInteractions=function(e){return c.is.number(e)?(u.maxInteractions=e,n):u.maxInteractions},o.settingsMethods.push("styleCursor"),o.settingsMethods.push("actionChecker"),o.settingsMethods.push("ignoreFrom"),o.settingsMethods.push("allowFrom"),a.base.actionChecker=null,a.base.styleCursor=!0,c.extend(a.perAction,u.defaults.perAction),t.exports=u},{"../Interactable":4,"../Interaction":5,"../actions/base":6,"../defaultOptions":18,"../interact":21,"../scope":33,"../utils":44,"../utils/Signals":34,"./InteractableMethods":12}],14:[function(e,t,i){"use strict";var n=e("./base"),o=e("../scope"),r=e("../utils/is"),s=e("../utils/domUtils").parentNode;n.setActionDefaults(e("../actions/drag")),n.signals.on("before-start",function(e){var t=e.interaction,i=e.eventTarget,a=e.dx,l=e.dy;if("drag"===t.prepared.name){var c=Math.abs(a),d=Math.abs(l),u=t.target.options.drag,h=u.startAxis,p=c>d?"x":c<d?"y":"xy";if(t.prepared.axis="start"===u.lockAxis?p[0]:u.lockAxis,"xy"!==p&&"xy"!==h&&h!==p){t.prepared.name=null;for(var g=i,f=function(e){if(e!==t.target){var o=t.target.options.drag;if(!o.manualStart&&e.testIgnoreAllow(o,g,i)){var r=e.getAction(t.downPointer,t.downEvent,t,g);if(r&&"drag"===r.name&&function(e,t){if(!t)return!1;var i=t.options.drag.startAxis;return"xy"===e||"xy"===i||i===e}(p,e)&&n.validateAction(r,e,g,i))return e}}};r.element(g);){var m=o.interactables.forEachMatch(g,f);if(m){t.prepared.name="drag",t.target=m,t.element=g;break}g=s(g)}}}})},{"../actions/drag":7,"../scope":33,"../utils/domUtils":39,"../utils/is":46,"./base":13}],15:[function(e,t,i){"use strict";e("./base").setActionDefaults(e("../actions/gesture"))},{"../actions/gesture":9,"./base":13}],16:[function(e,t,i){"use strict";var n=e("./base"),o=e("../Interaction");function r(e){var t=e.prepared&&e.prepared.name;if(!t)return null;var i=e.target.options;return i[t].hold||i[t].delay}n.defaults.perAction.hold=0,n.defaults.perAction.delay=0,o.signals.on("new",function(e){e.autoStartHoldTimer=null}),n.signals.on("prepared",function(e){var t=e.interaction,i=r(t);i>0&&(t.autoStartHoldTimer=setTimeout(function(){t.start(t.prepared,t.target,t.element)},i))}),o.signals.on("move",function(e){var t=e.interaction,i=e.duplicate;t.pointerWasMoved&&!i&&clearTimeout(t.autoStartHoldTimer)}),n.signals.on("before-start",function(e){var t=e.interaction;r(t)>0&&(t.prepared.name=null)}),t.exports={getHoldDuration:r}},{"../Interaction":5,"./base":13}],17:[function(e,t,i){"use strict";e("./base").setActionDefaults(e("../actions/resize"))},{"../actions/resize":10,"./base":13}],18:[function(e,t,i){"use strict";t.exports={base:{accept:null,preventDefault:"auto",deltaSource:"page"},perAction:{origin:{x:0,y:0},inertia:{enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}}}},{}],19:[function(e,t,i){"use strict";e("./inertia"),e("./modifiers/snap"),e("./modifiers/restrict"),e("./pointerEvents/base"),e("./pointerEvents/holdRepeat"),e("./pointerEvents/interactableTargets"),e("./autoStart/hold"),e("./actions/gesture"),e("./actions/resize"),e("./actions/drag"),e("./actions/drop"),e("./modifiers/snapSize"),e("./modifiers/restrictEdges"),e("./modifiers/restrictSize"),e("./autoStart/gesture"),e("./autoStart/resize"),e("./autoStart/drag"),e("./interactablePreventDefault.js"),e("./autoScroll"),t.exports=e("./interact")},{"./actions/drag":7,"./actions/drop":8,"./actions/gesture":9,"./actions/resize":10,"./autoScroll":11,"./autoStart/drag":14,"./autoStart/gesture":15,"./autoStart/hold":16,"./autoStart/resize":17,"./inertia":20,"./interact":21,"./interactablePreventDefault.js":22,"./modifiers/restrict":24,"./modifiers/restrictEdges":25,"./modifiers/restrictSize":26,"./modifiers/snap":27,"./modifiers/snapSize":28,"./pointerEvents/base":30,"./pointerEvents/holdRepeat":31,"./pointerEvents/interactableTargets":32}],20:[function(e,t,i){"use strict";var n=e("./InteractEvent"),o=e("./Interaction"),r=e("./modifiers/base"),s=e("./utils"),a=e("./utils/raf");function l(){d(this),s.setCoordDeltas(this.pointerDelta,this.prevCoords,this.curCoords);var e=this.inertiaStatus,t=this.target.options[this.prepared.name].inertia.resistance,i=(new Date).getTime()/1e3-e.t0;if(i<e.te){var n=1-(Math.exp(-t*i)-e.lambda_v0)/e.one_ve_v0;if(e.modifiedXe===e.xe&&e.modifiedYe===e.ye)e.sx=e.xe*n,e.sy=e.ye*n;else{var o=s.getQuadraticCurvePoint(0,0,e.xe,e.ye,e.modifiedXe,e.modifiedYe,n);e.sx=o.x,e.sy=o.y}this.doMove(),e.i=a.request(this.boundInertiaFrame)}else e.sx=e.modifiedXe,e.sy=e.modifiedYe,this.doMove(),this.end(e.startEvent),e.active=!1,this.simulation=null;s.copyCoords(this.prevCoords,this.curCoords)}function c(){d(this);var e=this.inertiaStatus,t=(new Date).getTime()-e.t0,i=this.target.options[this.prepared.name].inertia.smoothEndDuration;t<i?(e.sx=s.easeOutQuad(t,0,e.xe,i),e.sy=s.easeOutQuad(t,0,e.ye,i),this.pointerMove(e.startEvent,e.startEvent),e.i=a.request(this.boundSmoothEndFrame)):(e.sx=e.xe,e.sy=e.ye,this.pointerMove(e.startEvent,e.startEvent),this.end(e.startEvent),e.smoothEnd=e.active=!1,this.simulation=null)}function d(e){var t=e.inertiaStatus;if(t.active){var i=t.upCoords.page,n=t.upCoords.client;s.setCoords(e.curCoords,[{pageX:i.x+t.sx,pageY:i.y+t.sy,clientX:n.x+t.sx,clientY:n.y+t.sy}])}}o.signals.on("new",function(e){e.inertiaStatus={active:!1,smoothEnd:!1,allowResume:!1,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,lambda_v0:0,one_ve_v0:0,i:null},e.boundInertiaFrame=function(){return l.apply(e)},e.boundSmoothEndFrame=function(){return c.apply(e)}}),o.signals.on("down",function(e){var t=e.interaction,i=e.event,l=e.pointer,c=e.eventTarget,d=t.inertiaStatus;if(d.active)for(var u=c;s.is.element(u);){if(u===t.element){a.cancel(d.i),d.active=!1,t.simulation=null,t.updatePointer(l),s.setCoords(t.curCoords,t.pointers);var h={interaction:t};o.signals.fire("before-action-move",h),o.signals.fire("action-resume",h);var p=new n(t,i,t.prepared.name,"inertiaresume",t.element);t.target.fire(p),t.prevEvent=p,r.resetStatuses(t.modifierStatuses),s.copyCoords(t.prevCoords,t.curCoords);break}u=s.parentNode(u)}}),o.signals.on("up",function(e){var t=e.interaction,i=e.event,o=t.inertiaStatus;if(t.interacting()&&!o.active){var l=t.target,c=l&&l.options,d=c&&t.prepared.name&&c[t.prepared.name].inertia,u=(new Date).getTime(),h={},p=s.extend({},t.curCoords.page),g=t.pointerDelta.client.speed,f=!1,m=void 0,v=d&&d.enabled&&"gesture"!==t.prepared.name&&i!==o.startEvent,b=v&&u-t.curCoords.timeStamp<50&&g>d.minSpeed&&g>d.endSpeed,y={interaction:t,pageCoords:p,statuses:h,preEnd:!0,requireEndOnly:!0};v&&!b&&(r.resetStatuses(h),(m=r.setAll(y)).shouldMove&&m.locked&&(f=!0)),(b||f)&&(s.copyCoords(o.upCoords,t.curCoords),t.pointers[0]=o.startEvent=new n(t,i,t.prepared.name,"inertiastart",t.element),o.t0=u,o.active=!0,o.allowResume=d.allowResume,t.simulation=o,l.fire(o.startEvent),b?(o.vx0=t.pointerDelta.client.vx,o.vy0=t.pointerDelta.client.vy,o.v0=g,function(e,t){var i=e.target.options[e.prepared.name].inertia,n=i.resistance,o=-Math.log(i.endSpeed/t.v0)/n;t.x0=e.prevEvent.pageX,t.y0=e.prevEvent.pageY,t.t0=t.startEvent.timeStamp/1e3,t.sx=t.sy=0,t.modifiedXe=t.xe=(t.vx0-o)/n,t.modifiedYe=t.ye=(t.vy0-o)/n,t.te=o,t.lambda_v0=n/t.v0,t.one_ve_v0=1-i.endSpeed/t.v0}(t,o),s.extend(p,t.curCoords.page),p.x+=o.xe,p.y+=o.ye,r.resetStatuses(h),m=r.setAll(y),o.modifiedXe+=m.dx,o.modifiedYe+=m.dy,o.i=a.request(t.boundInertiaFrame)):(o.smoothEnd=!0,o.xe=m.dx,o.ye=m.dy,o.sx=o.sy=0,o.i=a.request(t.boundSmoothEndFrame)))}}),o.signals.on("stop-active",function(e){var t=e.interaction,i=t.inertiaStatus;i.active&&(a.cancel(i.i),i.active=!1,t.simulation=null)})},{"./InteractEvent":3,"./Interaction":5,"./modifiers/base":23,"./utils":44,"./utils/raf":50}],21:[function(e,t,i){"use strict";var n=e("./utils/browser"),o=e("./utils/events"),r=e("./utils"),s=e("./scope"),a=e("./Interactable"),l=e("./Interaction"),c={};function d(e,t){var i=s.interactables.get(e,t);return i||((i=new a(e,t)).events.global=c),i}d.isSet=function(e,t){return-1!==s.interactables.indexOfElement(e,t&&t.context)},d.on=function(e,t,i){if(r.is.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),r.is.array(e)){for(var n=0;n<e.length;n++){var l=e[n];d.on(l,t,i)}return d}if(r.is.object(e)){for(var u in e)d.on(u,e[u],t);return d}return r.contains(a.eventTypes,e)?c[e]?c[e].push(t):c[e]=[t]:o.add(s.document,e,t,{options:i}),d},d.off=function(e,t,i){if(r.is.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),r.is.array(e)){for(var n=0;n<e.length;n++){var l=e[n];d.off(l,t,i)}return d}if(r.is.object(e)){for(var u in e)d.off(u,e[u],t);return d}if(r.contains(a.eventTypes,e)){var h=void 0;e in c&&-1!==(h=c[e].indexOf(t))&&c[e].splice(h,1)}else o.remove(s.document,e,t,i);return d},d.debug=function(){return s},d.getPointerAverage=r.pointerAverage,d.getTouchBBox=r.touchBBox,d.getTouchDistance=r.touchDistance,d.getTouchAngle=r.touchAngle,d.getElementRect=r.getElementRect,d.getElementClientRect=r.getElementClientRect,d.matchesSelector=r.matchesSelector,d.closest=r.closest,d.supportsTouch=function(){return n.supportsTouch},d.supportsPointerEvent=function(){return n.supportsPointerEvent},d.stop=function(e){for(var t=s.interactions.length-1;t>=0;t--)s.interactions[t].stop(e);return d},d.pointerMoveTolerance=function(e){return r.is.number(e)?(l.pointerMoveTolerance=e,d):l.pointerMoveTolerance},d.addDocument=s.addDocument,d.removeDocument=s.removeDocument,s.interact=d,t.exports=d},{"./Interactable":4,"./Interaction":5,"./scope":33,"./utils":44,"./utils/browser":36,"./utils/events":40}],22:[function(e,t,i){"use strict";var n=e("./Interactable"),o=e("./Interaction"),r=e("./scope"),s=e("./utils/is"),a=e("./utils/events"),l=e("./utils/browser"),c=e("./utils/domUtils"),d=c.nodeContains,u=c.matchesSelector;function h(e){var t=e.interaction,i=e.event;t.target&&t.target.checkAndPreventDefault(i)}n.prototype.preventDefault=function(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):s.bool(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault},n.prototype.checkAndPreventDefault=function(e){var t=this.options.preventDefault;"never"!==t&&("always"!==t&&(a.supportsPassive&&/^touch(start|move)$/.test(e.type)&&!l.isIOS||/^(mouse|pointer|touch)*(down|start)/i.test(e.type)||s.element(e.target)&&u(e.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *"))||e.preventDefault())};for(var p=["down","move","up","cancel"],g=0;g<p.length;g++){var f=p[g];o.signals.on(f,h)}o.docEvents.dragstart=function(e){for(var t=0;t<r.interactions.length;t++){var i=r.interactions[t];if(i.element&&(i.element===e.target||d(i.element,e.target)))return void i.target.checkAndPreventDefault(e)}}},{"./Interactable":4,"./Interaction":5,"./scope":33,"./utils/browser":36,"./utils/domUtils":39,"./utils/events":40,"./utils/is":46}],23:[function(e,t,i){"use strict";var n=e("../InteractEvent"),o=e("../Interaction"),r=e("../utils/extend"),s={names:[],setOffsets:function(e){var t=e.interaction,i=e.pageCoords,n=t.target,o=t.element,r=t.startOffset,a=n.getRect(o);a?(r.left=i.x-a.left,r.top=i.y-a.top,r.right=a.right-i.x,r.bottom=a.bottom-i.y,"width"in a||(a.width=a.right-a.left),"height"in a||(a.height=a.bottom-a.top)):r.left=r.top=r.right=r.bottom=0,e.rect=a,e.interactable=n,e.element=o;for(var l=0;l<s.names.length;l++){var c=s.names[l];e.options=n.options[t.prepared.name][c],e.options&&(t.modifierOffsets[c]=s[c].setOffset(e))}},setAll:function(e){var t=e.interaction,i=e.statuses,n=e.preEnd,o=e.requireEndOnly,l={dx:0,dy:0,changed:!1,locked:!1,shouldMove:!0};e.modifiedCoords=r({},e.pageCoords);for(var c=0;c<s.names.length;c++){var d=s.names[c],u=s[d],h=t.target.options[t.prepared.name][d];a(h,n,o)&&(e.status=e.status=i[d],e.options=h,e.offset=e.interaction.modifierOffsets[d],u.set(e),e.status.locked&&(e.modifiedCoords.x+=e.status.dx,e.modifiedCoords.y+=e.status.dy,l.dx+=e.status.dx,l.dy+=e.status.dy,l.locked=!0))}return l.shouldMove=!e.status||!l.locked||e.status.changed,l},resetStatuses:function(e){for(var t=0;t<s.names.length;t++){var i=s.names[t],n=e[i]||{};n.dx=n.dy=0,n.modifiedX=n.modifiedY=NaN,n.locked=!1,n.changed=!0,e[i]=n}return e},start:function(e,t){var i=e.interaction,n={interaction:i,pageCoords:("action-resume"===t?i.curCoords:i.startCoords).page,startOffset:i.startOffset,statuses:i.modifierStatuses,preEnd:!1,requireEndOnly:!1};s.setOffsets(n),s.resetStatuses(n.statuses),n.pageCoords=r({},i.startCoords.page),i.modifierResult=s.setAll(n)},beforeMove:function(e){var t=e.interaction,i=e.preEnd,n=e.interactingBeforeMove,o=s.setAll({interaction:t,preEnd:i,pageCoords:t.curCoords.page,statuses:t.modifierStatuses,requireEndOnly:!1});!o.shouldMove&&n&&(t._dontFireMove=!0),t.modifierResult=o},end:function(e){for(var t=e.interaction,i=e.event,n=0;n<s.names.length;n++){var o=s.names[n];if(a(t.target.options[t.prepared.name][o],!0,!0)){t.doMove({event:i,preEnd:!0});break}}},setXY:function(e){for(var t=e.iEvent,i=e.interaction,n=r({},e),o=0;o<s.names.length;o++){var a=s.names[o];if(n.options=i.target.options[i.prepared.name][a],n.options){var l=s[a];n.status=i.modifierStatuses[a],t[a]=l.modifyCoords(n)}}}};function a(e,t,i){return e&&e.enabled&&(t||!e.endOnly)&&(!i||e.endOnly)}o.signals.on("new",function(e){e.startOffset={left:0,right:0,top:0,bottom:0},e.modifierOffsets={},e.modifierStatuses=s.resetStatuses({}),e.modifierResult=null}),o.signals.on("action-start",s.start),o.signals.on("action-resume",s.start),o.signals.on("before-action-move",s.beforeMove),o.signals.on("action-end",s.end),n.signals.on("set-xy",s.setXY),t.exports=s},{"../InteractEvent":3,"../Interaction":5,"../utils/extend":41}],24:[function(e,t,i){"use strict";var n=e("./base"),o=e("../utils"),r=e("../defaultOptions"),s={defaults:{enabled:!1,endOnly:!1,restriction:null,elementRect:null},setOffset:function(e){var t=e.rect,i=e.startOffset,n=e.options,o=n&&n.elementRect,r={};return t&&o?(r.left=i.left-t.width*o.left,r.top=i.top-t.height*o.top,r.right=i.right-t.width*(1-o.right),r.bottom=i.bottom-t.height*(1-o.bottom)):r.left=r.top=r.right=r.bottom=0,r},set:function(e){var t=e.modifiedCoords,i=e.interaction,n=e.status,r=e.options;if(!r)return n;var s=n.useStatusXY?{x:n.x,y:n.y}:o.extend({},t),l=a(r.restriction,i,s);if(!l)return n;n.dx=0,n.dy=0,n.locked=!1;var c=l,d=s.x,u=s.y,h=i.modifierOffsets.restrict;"x"in l&&"y"in l?(d=Math.max(Math.min(c.x+c.width-h.right,s.x),c.x+h.left),u=Math.max(Math.min(c.y+c.height-h.bottom,s.y),c.y+h.top)):(d=Math.max(Math.min(c.right-h.right,s.x),c.left+h.left),u=Math.max(Math.min(c.bottom-h.bottom,s.y),c.top+h.top)),n.dx=d-s.x,n.dy=u-s.y,n.changed=n.modifiedX!==d||n.modifiedY!==u,n.locked=!(!n.dx&&!n.dy),n.modifiedX=d,n.modifiedY=u},modifyCoords:function(e){var t=e.page,i=e.client,n=e.status,o=e.phase,r=e.options,s=r&&r.elementRect;if(r&&r.enabled&&("start"!==o||!s||!n.locked)&&n.locked)return t.x+=n.dx,t.y+=n.dy,i.x+=n.dx,i.y+=n.dy,{dx:n.dx,dy:n.dy}},getRestrictionRect:a};function a(e,t,i){return o.is.function(e)?o.resolveRectLike(e,t.target,t.element,[i.x,i.y,t]):o.resolveRectLike(e,t.target,t.element)}n.restrict=s,n.names.push("restrict"),r.perAction.restrict=s.defaults,t.exports=s},{"../defaultOptions":18,"../utils":44,"./base":23}],25:[function(e,t,i){"use strict";var n=e("./base"),o=e("../utils"),r=e("../utils/rect"),s=e("../defaultOptions"),a=e("../actions/resize"),l=e("./restrict").getRestrictionRect,c={top:1/0,left:1/0,bottom:-1/0,right:-1/0},d={top:-1/0,left:-1/0,bottom:1/0,right:1/0},u={defaults:{enabled:!1,endOnly:!1,min:null,max:null,offset:null},setOffset:function(e){var t=e.interaction,i=e.startOffset,n=e.options;if(!n)return o.extend({},i);var r=l(n.offset,t,t.startCoords.page);return r?{top:i.top+r.y,left:i.left+r.x,bottom:i.bottom+r.y,right:i.right+r.x}:i},set:function(e){var t=e.modifiedCoords,i=e.interaction,n=e.status,s=e.offset,a=e.options,u=i.prepared.linkedEdges||i.prepared.edges;if(i.interacting()&&u){var h=n.useStatusXY?{x:n.x,y:n.y}:o.extend({},t),p=r.xywhToTlbr(l(a.inner,i,h))||c,g=r.xywhToTlbr(l(a.outer,i,h))||d,f=h.x,m=h.y;n.dx=0,n.dy=0,n.locked=!1,u.top?m=Math.min(Math.max(g.top+s.top,h.y),p.top+s.top):u.bottom&&(m=Math.max(Math.min(g.bottom-s.bottom,h.y),p.bottom-s.bottom)),u.left?f=Math.min(Math.max(g.left+s.left,h.x),p.left+s.left):u.right&&(f=Math.max(Math.min(g.right-s.right,h.x),p.right-s.right)),n.dx=f-h.x,n.dy=m-h.y,n.changed=n.modifiedX!==f||n.modifiedY!==m,n.locked=!(!n.dx&&!n.dy),n.modifiedX=f,n.modifiedY=m}},modifyCoords:function(e){var t=e.page,i=e.client,n=e.status,o=e.phase,r=e.options;if(r&&r.enabled&&("start"!==o||!n.locked)&&n.locked)return t.x+=n.dx,t.y+=n.dy,i.x+=n.dx,i.y+=n.dy,{dx:n.dx,dy:n.dy}},noInner:c,noOuter:d,getRestrictionRect:l};n.restrictEdges=u,n.names.push("restrictEdges"),s.perAction.restrictEdges=u.defaults,a.defaults.restrictEdges=u.defaults,t.exports=u},{"../actions/resize":10,"../defaultOptions":18,"../utils":44,"../utils/rect":51,"./base":23,"./restrict":24}],26:[function(e,t,i){"use strict";var n=e("./base"),o=e("./restrictEdges"),r=e("../utils"),s=e("../utils/rect"),a=e("../defaultOptions"),l=e("../actions/resize"),c={width:-1/0,height:-1/0},d={width:1/0,height:1/0},u={defaults:{enabled:!1,endOnly:!1,min:null,max:null},setOffset:function(e){return e.interaction.startOffset},set:function(e){var t=e.interaction,i=e.options,n=t.prepared.linkedEdges||t.prepared.edges;if(t.interacting()&&n){var a=s.xywhToTlbr(t.resizeRects.inverted),l=s.tlbrToXywh(o.getRestrictionRect(i.min,t))||c,u=s.tlbrToXywh(o.getRestrictionRect(i.max,t))||d;e.options={enabled:i.enabled,endOnly:i.endOnly,inner:r.extend({},o.noInner),outer:r.extend({},o.noOuter)},n.top?(e.options.inner.top=a.bottom-l.height,e.options.outer.top=a.bottom-u.height):n.bottom&&(e.options.inner.bottom=a.top+l.height,e.options.outer.bottom=a.top+u.height),n.left?(e.options.inner.left=a.right-l.width,e.options.outer.left=a.right-u.width):n.right&&(e.options.inner.right=a.left+l.width,e.options.outer.right=a.left+u.width),o.set(e)}},modifyCoords:o.modifyCoords};n.restrictSize=u,n.names.push("restrictSize"),a.perAction.restrictSize=u.defaults,l.defaults.restrictSize=u.defaults,t.exports=u},{"../actions/resize":10,"../defaultOptions":18,"../utils":44,"../utils/rect":51,"./base":23,"./restrictEdges":25}],27:[function(e,t,i){"use strict";var n=e("./base"),o=e("../interact"),r=e("../utils"),s=e("../defaultOptions"),a={defaults:{enabled:!1,endOnly:!1,range:1/0,targets:null,offsets:null,relativePoints:null},setOffset:function(e){var t=e.interaction,i=e.interactable,n=e.element,o=e.rect,s=e.startOffset,a=e.options,l=[],c=r.rectToXY(r.resolveRectLike(a.origin))||r.getOriginXY(i,n,t.prepared.name),d=void 0;if("startCoords"===(a=a||i.options[t.prepared.name].snap||{}).offset)d={x:t.startCoords.page.x-c.x,y:t.startCoords.page.y-c.y};else{var u=r.resolveRectLike(a.offset,i,n,[t]);d=r.rectToXY(u)||{x:0,y:0}}if(o&&a.relativePoints&&a.relativePoints.length)for(var h=0;h<a.relativePoints.length;h++){var p=a.relativePoints[h],g=p.x,f=p.y;l.push({x:s.left-o.width*g+d.x,y:s.top-o.height*f+d.y})}else l.push(d);return l},set:function(e){var t=e.interaction,i=e.modifiedCoords,n=e.status,o=e.options,s=e.offset,a=[],l=void 0,c=void 0,d=void 0;if(n.useStatusXY)c={x:n.x,y:n.y};else{var u=r.getOriginXY(t.target,t.element,t.prepared.name);(c=r.extend({},i)).x-=u.x,c.y-=u.y}n.realX=c.x,n.realY=c.y;for(var h=o.targets&&o.targets.length,p=0;p<s.length;p++)for(var g=s[p],f=g.x,m=g.y,v=c.x-f,b=c.y-m,y=0;y<(o.targets||[]).length;y++){var w=(o.targets||[])[y];(l=r.is.function(w)?w(v,b,t):w)&&a.push({x:r.is.number(l.x)?l.x+f:v,y:r.is.number(l.y)?l.y+m:b,range:r.is.number(l.range)?l.range:o.range})}var C={target:null,inRange:!1,distance:0,range:0,dx:0,dy:0};for(d=0,h=a.length;d<h;d++){var _=(l=a[d]).range,S=l.x-c.x,x=l.y-c.y,A=r.hypot(S,x),E=A<=_;_===1/0&&C.inRange&&C.range!==1/0&&(E=!1),C.target&&!(E?C.inRange&&_!==1/0?A/_<C.distance/C.range:_===1/0&&C.range!==1/0||A<C.distance:!C.inRange&&A<C.distance)||(C.target=l,C.distance=A,C.range=_,C.inRange=E,C.dx=S,C.dy=x,n.range=_)}var T=void 0;C.target?(T=n.modifiedX!==C.target.x||n.modifiedY!==C.target.y,n.modifiedX=C.target.x,n.modifiedY=C.target.y):(T=!0,n.modifiedX=NaN,n.modifiedY=NaN),n.dx=C.dx,n.dy=C.dy,n.changed=T||C.inRange&&!n.locked,n.locked=C.inRange},modifyCoords:function(e){var t=e.page,i=e.client,n=e.status,o=e.phase,r=e.options,s=r&&r.relativePoints;if(r&&r.enabled&&("start"!==o||!s||!s.length))return n.locked&&(t.x+=n.dx,t.y+=n.dy,i.x+=n.dx,i.y+=n.dy),{range:n.range,locked:n.locked,x:n.modifiedX,y:n.modifiedY,realX:n.realX,realY:n.realY,dx:n.dx,dy:n.dy}}};o.createSnapGrid=function(e){return function(t,i){var n=e.limits||{left:-1/0,right:1/0,top:-1/0,bottom:1/0},o=0,s=0;r.is.object(e.offset)&&(o=e.offset.x,s=e.offset.y);var a=Math.round((t-o)/e.x),l=Math.round((i-s)/e.y);return{x:Math.max(n.left,Math.min(n.right,a*e.x+o)),y:Math.max(n.top,Math.min(n.bottom,l*e.y+s)),range:e.range}}},n.snap=a,n.names.push("snap"),s.perAction.snap=a.defaults,t.exports=a},{"../defaultOptions":18,"../interact":21,"../utils":44,"./base":23}],28:[function(e,t,i){"use strict";var n=e("./base"),o=e("./snap"),r=e("../defaultOptions"),s=e("../actions/resize"),a=e("../utils/"),l={defaults:{enabled:!1,endOnly:!1,range:1/0,targets:null,offsets:null},setOffset:function(e){var t=e.interaction,i=e.options,n=t.prepared.edges;if(n){e.options={relativePoints:[{x:n.left?0:1,y:n.top?0:1}],origin:{x:0,y:0},offset:"self",range:i.range};var r=o.setOffset(e);return e.options=i,r}},set:function(e){var t=e.interaction,i=e.options,n=e.offset,r=e.modifiedCoords,s=a.extend({},r),l=s.x-n[0].x,c=s.y-n[0].y;e.options=a.extend({},i),e.options.targets=[];for(var d=0;d<(i.targets||[]).length;d++){var u=(i.targets||[])[d],h=void 0;(h=a.is.function(u)?u(l,c,t):u)&&("width"in h&&"height"in h&&(h.x=h.width,h.y=h.height),e.options.targets.push(h))}o.set(e)},modifyCoords:function(e){var t=e.options;e.options=a.extend({},t),e.options.enabled=t.enabled,e.options.relativePoints=[null],o.modifyCoords(e)}};n.snapSize=l,n.names.push("snapSize"),r.perAction.snapSize=l.defaults,s.defaults.snapSize=l.defaults,t.exports=l},{"../actions/resize":10,"../defaultOptions":18,"../utils/":44,"./base":23,"./snap":27}],29:[function(e,t,i){"use strict";var n=e("../utils/pointerUtils");t.exports=function(){function e(t,i,o,r,s){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n.pointerExtend(this,o),o!==i&&n.pointerExtend(this,i),this.interaction=s,this.timeStamp=(new Date).getTime(),this.originalEvent=o,this.type=t,this.pointerId=n.getPointerId(i),this.pointerType=n.getPointerType(i),this.target=r,this.currentTarget=null,"tap"===t){var a=s.getPointerIndex(i);this.dt=this.timeStamp-s.downTimes[a];var l=this.timeStamp-s.tapTime;this.double=!!(s.prevTap&&"doubletap"!==s.prevTap.type&&s.prevTap.target===this.target&&l<500)}else"doubletap"===t&&(this.dt=i.timeStamp-s.tapTime)}return e.prototype.subtractOrigin=function(e){var t=e.x,i=e.y;return this.pageX-=t,this.pageY-=i,this.clientX-=t,this.clientY-=i,this},e.prototype.addOrigin=function(e){var t=e.x,i=e.y;return this.pageX+=t,this.pageY+=i,this.clientX+=t,this.clientY+=i,this},e.prototype.preventDefault=function(){this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e}()},{"../utils/pointerUtils":49}],30:[function(e,t,i){"use strict";var n=e("./PointerEvent"),o=e("../Interaction"),r=e("../utils"),s=e("../defaultOptions"),a=e("../utils/Signals").new(),l=["down","up","cancel"],c=["down","up","cancel"],d={PointerEvent:n,fire:u,collectEventTargets:h,signals:a,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:["down","move","up","cancel","tap","doubletap","hold"]};function u(e){for(var t=e.interaction,i=e.pointer,o=e.event,s=e.eventTarget,l=e.type,c=void 0===l?e.pointerEvent.type:l,d=e.targets,p=void 0===d?h(e):d,g=e.pointerEvent,f=void 0===g?new n(c,i,o,s,t):g,m={interaction:t,pointer:i,event:o,eventTarget:s,targets:p,type:c,pointerEvent:f},v=0;v<p.length;v++){var b=p[v];for(var y in b.props||{})f[y]=b.props[y];var w=r.getOriginXY(b.eventable,b.element);if(f.subtractOrigin(w),f.eventable=b.eventable,f.currentTarget=b.element,b.eventable.fire(f),f.addOrigin(w),f.immediatePropagationStopped||f.propagationStopped&&v+1<p.length&&p[v+1].element!==f.currentTarget)break}if(a.fire("fired",m),"tap"===c){var C=f.double?u({interaction:t,pointer:i,event:o,eventTarget:s,type:"doubletap"}):f;t.prevTap=C,t.tapTime=C.timeStamp}return f}function h(e){var t=e.interaction,i=e.pointer,n=e.event,o=e.eventTarget,s=e.type,l=t.getPointerIndex(i);if("tap"===s&&(t.pointerWasMoved||!t.downTargets[l]||t.downTargets[l]!==o))return[];for(var c=r.getPath(o),d={interaction:t,pointer:i,event:n,eventTarget:o,type:s,path:c,targets:[],element:null},u=0;u<c.length;u++){var h=c[u];d.element=h,a.fire("collect-targets",d)}return"hold"===s&&(d.targets=d.targets.filter(function(e){return e.eventable.options.holdDuration===t.holdTimers[l].duration})),d.targets}o.signals.on("update-pointer-down",function(e){var t=e.interaction,i=e.pointerIndex;t.holdTimers[i]={duration:1/0,timeout:null}}),o.signals.on("remove-pointer",function(e){var t=e.interaction,i=e.pointerIndex;t.holdTimers.splice(i,1)}),o.signals.on("move",function(e){var t=e.interaction,i=e.pointer,n=e.event,o=e.eventTarget,r=e.duplicateMove,s=t.getPointerIndex(i);r||t.pointerIsDown&&!t.pointerWasMoved||(t.pointerIsDown&&clearTimeout(t.holdTimers[s].timeout),u({interaction:t,pointer:i,event:n,eventTarget:o,type:"move"}))}),o.signals.on("down",function(e){for(var t=e.interaction,i=e.pointer,n=e.event,o=e.eventTarget,s=e.pointerIndex,l=t.holdTimers[s],c=r.getPath(o),d={interaction:t,pointer:i,event:n,eventTarget:o,type:"hold",targets:[],path:c,element:null},h=0;h<c.length;h++){var p=c[h];d.element=p,a.fire("collect-targets",d)}if(d.targets.length){for(var g=1/0,f=0;f<d.targets.length;f++){var m=d.targets[f].eventable.options.holdDuration;m<g&&(g=m)}l.duration=g,l.timeout=setTimeout(function(){u({interaction:t,eventTarget:o,pointer:i,event:n,type:"hold"})},g)}}),o.signals.on("up",function(e){var t=e.interaction,i=e.pointer,n=e.event,o=e.eventTarget;t.pointerWasMoved||u({interaction:t,eventTarget:o,pointer:i,event:n,type:"tap"})});for(var p=["up","cancel"],g=0;g<p.length;g++){var f=p[g];o.signals.on(f,function(e){var t=e.interaction,i=e.pointerIndex;t.holdTimers[i]&&clearTimeout(t.holdTimers[i].timeout)})}function m(e){return function(t){var i=t.interaction,n=t.pointer,o=t.event;u({interaction:i,eventTarget:t.eventTarget,pointer:n,event:o,type:e})}}for(var v=0;v<l.length;v++)o.signals.on(l[v],m(c[v]));o.signals.on("new",function(e){e.prevTap=null,e.tapTime=0,e.holdTimers=[]}),s.pointerEvents=d.defaults,t.exports=d},{"../Interaction":5,"../defaultOptions":18,"../utils":44,"../utils/Signals":34,"./PointerEvent":29}],31:[function(e,t,i){"use strict";var n=e("./base"),o=e("../Interaction");n.signals.on("new",l),n.signals.on("fired",c);for(var r=["move","up","cancel","endall"],s=0;s<r.length;s++){var a=r[s];o.signals.on(a,d)}function l(e){var t=e.pointerEvent;"hold"===t.type&&(t.count=(t.count||0)+1)}function c(e){var t=e.interaction,i=e.pointerEvent,o=e.eventTarget,r=e.targets;if("hold"===i.type&&r.length){var s=r[0].eventable.options.holdRepeatInterval;s<=0||(t.holdIntervalHandle=setTimeout(function(){n.fire({interaction:t,eventTarget:o,type:"hold",pointer:i,event:i})},s))}}function d(e){var t=e.interaction;t.holdIntervalHandle&&(clearInterval(t.holdIntervalHandle),t.holdIntervalHandle=null)}n.defaults.holdRepeatInterval=0,n.types.push("holdrepeat"),t.exports={onNew:l,onFired:c,endHoldRepeat:d}},{"../Interaction":5,"./base":30}],32:[function(e,t,i){"use strict";var n=e("./base"),o=e("../Interactable"),r=e("../utils/is"),s=e("../scope"),a=e("../utils/extend"),l=e("../utils/arr").merge;n.signals.on("collect-targets",function(e){var t=e.targets,i=e.element,n=e.type,o=e.eventTarget;s.interactables.forEachMatch(i,function(e){var s=e.events,a=s.options;s[n]&&r.element(i)&&e.testIgnoreAllow(a,i,o)&&t.push({element:i,eventable:s,props:{interactable:e}})})}),o.signals.on("new",function(e){var t=e.interactable;t.events.getRect=function(e){return t.getRect(e)}}),o.signals.on("set",function(e){var t=e.interactable,i=e.options;a(t.events.options,n.defaults),a(t.events.options,i)}),l(o.eventTypes,n.types),o.prototype.pointerEvents=function(e){return a(this.events.options,e),this};var c=o.prototype._backCompatOption;o.prototype._backCompatOption=function(e,t){var i=c.call(this,e,t);return i===this&&(this.events.options[e]=t),i},o.settingsMethods.push("pointerEvents")},{"../Interactable":4,"../scope":33,"../utils/arr":35,"../utils/extend":41,"../utils/is":46,"./base":30}],33:[function(e,t,i){"use strict";var n=e("./utils"),o=e("./utils/events"),r=e("./utils/Signals").new(),s=e("./utils/window").getWindow,a={signals:r,events:o,utils:n,document:e("./utils/domObjects").document,documents:[],addDocument:function(e,t){if(n.contains(a.documents,e))return!1;t=t||s(e),a.documents.push(e),o.documents.push(e),e!==a.document&&o.add(t,"unload",a.onWindowUnload),r.fire("add-document",{doc:e,win:t})},removeDocument:function(e,t){var i=a.documents.indexOf(e);t=t||s(e),o.remove(t,"unload",a.onWindowUnload),a.documents.splice(i,1),o.documents.splice(i,1),r.fire("remove-document",{win:t,doc:e})},onWindowUnload:function(){a.removeDocument(this.document,this)}};t.exports=a},{"./utils":44,"./utils/Signals":34,"./utils/domObjects":38,"./utils/events":40,"./utils/window":52}],34:[function(e,t,i){"use strict";var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]?this.listeners[e].push(t):this.listeners[e]=[t]},e.prototype.off=function(e,t){if(this.listeners[e]){var i=this.listeners[e].indexOf(t);-1!==i&&this.listeners[e].splice(i,1)}},e.prototype.fire=function(e,t){var i=this.listeners[e];if(i)for(var n=0;n<i.length;n++){if(!1===(0,i[n])(t,e))return}},e}();n.new=function(){return new n},t.exports=n},{}],35:[function(e,t,i){"use strict";t.exports={contains:function(e,t){return-1!==e.indexOf(t)},merge:function(e,t){for(var i=0;i<t.length;i++){var n=t[i];e.push(n)}return e}}},{}],36:[function(e,t,i){"use strict";var n=e("./window").window,o=e("./is"),r=e("./domObjects"),s=r.Element,a=n.navigator,l={supportsTouch:!!("ontouchstart"in n||o.function(n.DocumentTouch)&&r.document instanceof n.DocumentTouch),supportsPointerEvent:!!r.PointerEvent,isIOS:/iP(hone|od|ad)/.test(a.platform),isIOS7:/iP(hone|od|ad)/.test(a.platform)&&/OS 7[^\d]/.test(a.appVersion),isIe9:/MSIE 9/.test(a.userAgent),prefixedMatchesSelector:"matches"in s.prototype?"matches":"webkitMatchesSelector"in s.prototype?"webkitMatchesSelector":"mozMatchesSelector"in s.prototype?"mozMatchesSelector":"oMatchesSelector"in s.prototype?"oMatchesSelector":"msMatchesSelector",pEventTypes:r.PointerEvent?r.PointerEvent===n.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,wheelEvent:"onmousewheel"in r.document?"mousewheel":"wheel"};l.isOperaMobile="Opera"===a.appName&&l.supportsTouch&&a.userAgent.match("Presto"),t.exports=l},{"./domObjects":38,"./is":46,"./window":52}],37:[function(e,t,i){"use strict";var n=e("./is");t.exports=function e(t){var i={};for(var o in t)n.plainObject(t[o])?i[o]=e(t[o]):i[o]=t[o];return i}},{"./is":46}],38:[function(e,t,i){"use strict";var n={},o=e("./window").window;function r(){}n.document=o.document,n.DocumentFragment=o.DocumentFragment||r,n.SVGElement=o.SVGElement||r,n.SVGSVGElement=o.SVGSVGElement||r,n.SVGElementInstance=o.SVGElementInstance||r,n.Element=o.Element||r,n.HTMLElement=o.HTMLElement||n.Element,n.Event=o.Event,n.Touch=o.Touch||r,n.PointerEvent=o.PointerEvent||o.MSPointerEvent,t.exports=n},{"./window":52}],39:[function(e,t,i){"use strict";var n=e("./window"),o=e("./browser"),r=e("./is"),s=e("./domObjects"),a={nodeContains:function(e,t){for(;t;){if(t===e)return!0;t=t.parentNode}return!1},closest:function(e,t){for(;r.element(e);){if(a.matchesSelector(e,t))return e;e=a.parentNode(e)}return null},parentNode:function(e){var t=e.parentNode;if(r.docFrag(t)){for(;(t=t.host)&&r.docFrag(t););return t}return t},matchesSelector:function(e,t){return n.window!==n.realWindow&&(t=t.replace(/\/deep\//g," ")),e[o.prefixedMatchesSelector](t)},indexOfDeepestElement:function(e){var t=[],i=[],n=void 0,o=e[0],r=o?0:-1,a=void 0,l=void 0,c=void 0,d=void 0;for(c=1;c<e.length;c++)if((n=e[c])&&n!==o)if(o){if(n.parentNode!==n.ownerDocument)if(o.parentNode!==n.ownerDocument){if(!t.length)for(a=o;a.parentNode&&a.parentNode!==a.ownerDocument;)t.unshift(a),a=a.parentNode;if(o instanceof s.HTMLElement&&n instanceof s.SVGElement&&!(n instanceof s.SVGSVGElement)){if(n===o.parentNode)continue;a=n.ownerSVGElement}else a=n;for(i=[];a.parentNode!==a.ownerDocument;)i.unshift(a),a=a.parentNode;for(d=0;i[d]&&i[d]===t[d];)d++;var u=[i[d-1],i[d],t[d]];for(l=u[0].lastChild;l;){if(l===u[1]){o=n,r=c,t=[];break}if(l===u[2])break;l=l.previousSibling}}else o=n,r=c}else o=n,r=c;return r},matchesUpTo:function(e,t,i){for(;r.element(e);){if(a.matchesSelector(e,t))return!0;if((e=a.parentNode(e))===i)return a.matchesSelector(e,t)}return!1},getActualElement:function(e){return e instanceof s.SVGElementInstance?e.correspondingUseElement:e},getScrollXY:function(e){return{x:(e=e||n.window).scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}},getElementClientRect:function(e){var t=e instanceof s.SVGElement?e.getBoundingClientRect():e.getClientRects()[0];return t&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}},getElementRect:function(e){var t=a.getElementClientRect(e);if(!o.isIOS7&&t){var i=a.getScrollXY(n.getWindow(e));t.left+=i.x,t.right+=i.x,t.top+=i.y,t.bottom+=i.y}return t},getPath:function(e){for(var t=[];e;)t.push(e),e=a.parentNode(e);return t},trySelector:function(e){return!!r.string(e)&&(s.document.querySelector(e),!0)}};t.exports=a},{"./browser":36,"./domObjects":38,"./is":46,"./window":52}],40:[function(e,t,i){"use strict";var n,o=e("./is"),r=e("./domUtils"),s=e("./pointerUtils"),a=e("./pointerExtend"),l=e("./window").window,c=e("./arr").contains,d=[],u=[],h={},p=[],g=(n=!1,l.document.createElement("div").addEventListener("test",null,{get capture(){n=!0}}),n);function f(e,t,i,n){var o=w(n),r=d.indexOf(e),s=u[r];s||(s={events:{},typeCount:0},r=d.push(e)-1,u.push(s)),s.events[t]||(s.events[t]=[],s.typeCount++),c(s.events[t],i)||(e.addEventListener(t,i,g?o:!!o.capture),s.events[t].push(i))}function m(e,t,i,n){var o=w(n),r=d.indexOf(e),s=u[r];if(s&&s.events)if("all"!==t){if(s.events[t]){var a=s.events[t].length;if("all"===i){for(var l=0;l<a;l++)m(e,t,s.events[t][l],o);return}for(var c=0;c<a;c++)if(s.events[t][c]===i){e.removeEventListener("on"+t,i,g?o:!!o.capture),s.events[t].splice(c,1);break}s.events[t]&&0===s.events[t].length&&(s.events[t]=null,s.typeCount--)}s.typeCount||(u.splice(r,1),d.splice(r,1))}else for(t in s.events)s.events.hasOwnProperty(t)&&m(e,t,"all")}function v(e,t){var i=w(t),n={},l=h[e.type],c=s.getEventTargets(e)[0],d=c;for(a(n,e),n.originalEvent=e,n.preventDefault=y;o.element(d);){for(var u=0;u<l.selectors.length;u++){var p=l.selectors[u],g=l.contexts[u];if(r.matchesSelector(d,p)&&r.nodeContains(g,c)&&r.nodeContains(g,d)){var f=l.listeners[u];n.currentTarget=d;for(var m=0;m<f.length;m++){var v=f[m],b=v[0],C=v[1],_=v[2];C===!!i.capture&&_===i.passive&&b(n)}}}d=r.parentNode(d)}}function b(e){return v.call(this,e,!0)}function y(){this.originalEvent.preventDefault()}function w(e){return o.object(e)?e:{capture:e}}t.exports={add:f,remove:m,addDelegate:function(e,t,i,n,o){var r=w(o);if(!h[i]){h[i]={selectors:[],contexts:[],listeners:[]};for(var s=0;s<p.length;s++){var a=p[s];f(a,i,v),f(a,i,b,!0)}}var l=h[i],c=void 0;for(c=l.selectors.length-1;c>=0&&(l.selectors[c]!==e||l.contexts[c]!==t);c--);-1===c&&(c=l.selectors.length,l.selectors.push(e),l.contexts.push(t),l.listeners.push([])),l.listeners[c].push([n,!!r.capture,r.passive])},removeDelegate:function(e,t,i,n,o){var r=w(o),s=h[i],a=!1,l=void 0;if(s)for(l=s.selectors.length-1;l>=0;l--)if(s.selectors[l]===e&&s.contexts[l]===t){for(var c=s.listeners[l],d=c.length-1;d>=0;d--){var u=c[d],p=u[0],g=u[1],f=u[2];if(p===n&&g===!!r.capture&&f===r.passive){c.splice(d,1),c.length||(s.selectors.splice(l,1),s.contexts.splice(l,1),s.listeners.splice(l,1),m(t,i,v),m(t,i,b,!0),s.selectors.length||(h[i]=null)),a=!0;break}}if(a)break}},delegateListener:v,delegateUseCapture:b,delegatedEvents:h,documents:p,supportsOptions:g,_elements:d,_targets:u}},{"./arr":35,"./domUtils":39,"./is":46,"./pointerExtend":48,"./pointerUtils":49,"./window":52}],41:[function(e,t,i){"use strict";t.exports=function(e,t){for(var i in t)e[i]=t[i];return e}},{}],42:[function(e,t,i){"use strict";var n=e("./rect"),o=n.resolveRectLike,r=n.rectToXY;t.exports=function(e,t,i){var n=e.options[i],s=n&&n.origin||e.options.origin,a=o(s,e,t,[e&&t]);return r(a)||{x:0,y:0}}},{"./rect":51}],43:[function(e,t,i){"use strict";t.exports=function(e,t){return Math.sqrt(e*e+t*t)}},{}],44:[function(e,t,i){"use strict";var n=e("./extend"),o=e("./window"),r={warnOnce:function(e,t){var i=!1;return function(){return i||(o.window.console.warn(t),i=!0),e.apply(this,arguments)}},_getQBezierValue:function(e,t,i,n){var o=1-e;return o*o*t+2*o*e*i+e*e*n},getQuadraticCurvePoint:function(e,t,i,n,o,s,a){return{x:r._getQBezierValue(a,e,i,o),y:r._getQBezierValue(a,t,n,s)}},easeOutQuad:function(e,t,i,n){return-i*(e/=n)*(e-2)+t},copyAction:function(e,t){return e.name=t.name,e.axis=t.axis,e.edges=t.edges,e},is:e("./is"),extend:n,hypot:e("./hypot"),getOriginXY:e("./getOriginXY")};n(r,e("./arr")),n(r,e("./domUtils")),n(r,e("./pointerUtils")),n(r,e("./rect")),t.exports=r},{"./arr":35,"./domUtils":39,"./extend":41,"./getOriginXY":42,"./hypot":43,"./is":46,"./pointerUtils":49,"./rect":51,"./window":52}],45:[function(e,t,i){"use strict";var n=e("../scope"),o=e("./index"),r={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(e,t,i){for(var n=o.getPointerType(e),s={pointer:e,pointerId:o.getPointerId(e),pointerType:n,eventType:t,eventTarget:i},a=0;a<r.methodOrder.length;a++){var l;l=r.methodOrder[a];var c=r[l](s);if(c)return c}},simulationResume:function(e){var t=e.pointerType,i=e.eventType,r=e.eventTarget;if(!/down|start/i.test(i))return null;for(var s=0;s<n.interactions.length;s++){var a=n.interactions[s],l=r;if(a.simulation&&a.simulation.allowResume&&a.pointerType===t)for(;l;){if(l===a.element)return a;l=o.parentNode(l)}}return null},mouseOrPen:function(e){var t=e.pointerId,i=e.pointerType,r=e.eventType;if("mouse"!==i&&"pen"!==i)return null;for(var s=void 0,a=0;a<n.interactions.length;a++){var l=n.interactions[a];if(l.pointerType===i){if(l.simulation&&!o.contains(l.pointerIds,t))continue;if(l.interacting())return l;s||(s=l)}}if(s)return s;for(var c=0;c<n.interactions.length;c++){var d=n.interactions[c];if(!(d.pointerType!==i||/down/i.test(r)&&d.simulation))return d}return null},hasPointer:function(e){for(var t=e.pointerId,i=0;i<n.interactions.length;i++){var r=n.interactions[i];if(o.contains(r.pointerIds,t))return r}},idle:function(e){for(var t=e.pointerType,i=0;i<n.interactions.length;i++){var o=n.interactions[i];if(1===o.pointerIds.length){var r=o.target;if(r&&!r.options.gesture.enabled)continue}else if(o.pointerIds.length>=2)continue;if(!o.interacting()&&t===o.pointerType)return o}return null}};t.exports=r},{"../scope":33,"./index":44}],46:[function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("./window"),r=e("./isWindow"),s={array:function(){},window:function(e){return e===o.window||r(e)},docFrag:function(e){return s.object(e)&&11===e.nodeType},object:function(e){return!!e&&"object"===(void 0===e?"undefined":n(e))},function:function(e){return"function"==typeof e},number:function(e){return"number"==typeof e},bool:function(e){return"boolean"==typeof e},string:function(e){return"string"==typeof e},element:function(e){if(!e||"object"!==(void 0===e?"undefined":n(e)))return!1;var t=o.getWindow(e)||o.window;return/object|function/.test(n(t.Element))?e instanceof t.Element:1===e.nodeType&&"string"==typeof e.nodeName},plainObject:function(e){return s.object(e)&&"Object"===e.constructor.name}};s.array=function(e){return s.object(e)&&void 0!==e.length&&s.function(e.splice)},t.exports=s},{"./isWindow":47,"./window":52}],47:[function(e,t,i){"use strict";t.exports=function(e){return!(!e||!e.Window)&&e instanceof e.Window}},{}],48:[function(e,t,i){"use strict";function n(e,i){for(var n in i){var o=t.exports.prefixedPropREs,r=!1;for(var s in o)if(0===n.indexOf(s)&&o[s].test(n)){r=!0;break}r||"function"==typeof i[n]||(e[n]=i[n])}return e}n.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/},t.exports=n},{}],49:[function(e,t,i){"use strict";var n=e("./hypot"),o=e("./browser"),r=e("./domObjects"),s=e("./domUtils"),a=e("./domObjects"),l=e("./is"),c={copyCoords:function(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp},setCoordDeltas:function(e,t,i){e.page.x=i.page.x-t.page.x,e.page.y=i.page.y-t.page.y,e.client.x=i.client.x-t.client.x,e.client.y=i.client.y-t.client.y,e.timeStamp=i.timeStamp-t.timeStamp;var o=Math.max(e.timeStamp/1e3,.001);e.page.speed=n(e.page.x,e.page.y)/o,e.page.vx=e.page.x/o,e.page.vy=e.page.y/o,e.client.speed=n(e.client.x,e.page.y)/o,e.client.vx=e.client.x/o,e.client.vy=e.client.y/o},isNativePointer:function(e){return e instanceof r.Event||e instanceof r.Touch},getXY:function(e,t,i){return e=e||"page",(i=i||{}).x=t[e+"X"],i.y=t[e+"Y"],i},getPageXY:function(e,t){return t=t||{},o.isOperaMobile&&c.isNativePointer(e)?(c.getXY("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):c.getXY("page",e,t),t},getClientXY:function(e,t){return t=t||{},o.isOperaMobile&&c.isNativePointer(e)?c.getXY("screen",e,t):c.getXY("client",e,t),t},getPointerId:function(e){return l.number(e.pointerId)?e.pointerId:e.identifier},setCoords:function(e,t,i){var n=t.length>1?c.pointerAverage(t):t[0],o={};c.getPageXY(n,o),e.page.x=o.x,e.page.y=o.y,c.getClientXY(n,o),e.client.x=o.x,e.client.y=o.y,e.timeStamp=l.number(i)?i:(new Date).getTime()},pointerExtend:e("./pointerExtend"),getTouchPair:function(e){var t=[];return l.array(e)?(t[0]=e[0],t[1]=e[1]):"touchend"===e.type?1===e.touches.length?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):0===e.touches.length&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t},pointerAverage:function(e){for(var t={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},i=0;i<e.length;i++){var n=e[i];for(var o in t)t[o]+=n[o]}for(var r in t)t[r]/=e.length;return t},touchBBox:function(e){if(e.length||e.touches&&e.touches.length>1){var t=c.getTouchPair(e),i=Math.min(t[0].pageX,t[1].pageX),n=Math.min(t[0].pageY,t[1].pageY);return{x:i,y:n,left:i,top:n,width:Math.max(t[0].pageX,t[1].pageX)-i,height:Math.max(t[0].pageY,t[1].pageY)-n}}},touchDistance:function(e,t){var i=t+"X",o=t+"Y",r=c.getTouchPair(e),s=r[0][i]-r[1][i],a=r[0][o]-r[1][o];return n(s,a)},touchAngle:function(e,t,i){var n=i+"X",o=i+"Y",r=c.getTouchPair(e),s=r[1][n]-r[0][n],a=r[1][o]-r[0][o];return 180*Math.atan2(a,s)/Math.PI},getPointerType:function(e){return l.string(e.pointerType)?e.pointerType:l.number(e.pointerType)?[void 0,void 0,"touch","pen","mouse"][e.pointerType]:/touch/.test(e.type)||e instanceof a.Touch?"touch":"mouse"},getEventTargets:function(e){var t=l.function(e.composedPath)?e.composedPath():e.path;return[s.getActualElement(t?t[0]:e.target),s.getActualElement(e.currentTarget)]}};t.exports=c},{"./browser":36,"./domObjects":38,"./domUtils":39,"./hypot":43,"./is":46,"./pointerExtend":48}],50:[function(e,t,i){"use strict";for(var n=e("./window").window,o=["ms","moz","webkit","o"],r=0,s=void 0,a=void 0,l=0;l<o.length&&!n.requestAnimationFrame;l++)s=n[o[l]+"RequestAnimationFrame"],a=n[o[l]+"CancelAnimationFrame"]||n[o[l]+"CancelRequestAnimationFrame"];s||(s=function(e){var t=(new Date).getTime(),i=Math.max(0,16-(t-r)),n=setTimeout(function(){e(t+i)},i);return r=t+i,n}),a||(a=function(e){clearTimeout(e)}),t.exports={request:s,cancel:a}},{"./window":52}],51:[function(e,t,i){"use strict";var n=e("./extend"),o=e("./is"),r=e("./domUtils"),s=r.closest,a=r.parentNode,l=r.getElementRect,c={getStringOptionResult:function(e,t,i){return o.string(e)?e="parent"===e?a(i):"self"===e?t.getRect(i):s(i,e):null},resolveRectLike:function(e,t,i,n){return e=c.getStringOptionResult(e,t,i)||e,o.function(e)&&(e=e.apply(null,n)),o.element(e)&&(e=l(e)),e},rectToXY:function(e){return e&&{x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top}},xywhToTlbr:function(e){return!e||"left"in e&&"top"in e||((e=n({},e)).left=e.x||0,e.top=e.y||0,e.right=e.right||e.left+e.width,e.bottom=e.bottom||e.top+e.height),e},tlbrToXywh:function(e){return!e||"x"in e&&"y"in e||((e=n({},e)).x=e.left||0,e.top=e.top||0,e.width=e.width||e.right-e.x,e.height=e.height||e.bottom-e.y),e}};t.exports=c},{"./domUtils":39,"./extend":41,"./is":46}],52:[function(e,t,i){"use strict";var n=t.exports,o=e("./isWindow");function r(e){n.realWindow=e;var t=e.document.createTextNode("");t.ownerDocument!==e.document&&"function"==typeof e.wrap&&e.wrap(t)===t&&(e=e.wrap(e)),n.window=e}"undefined"==typeof window?(n.window=void 0,n.realWindow=void 0):r(window),n.getWindow=function(e){if(o(e))return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||n.window},n.init=r},{"./isWindow":47}]},{},[1])(1)}),void 0===jQuery.migrateMute&&(jQuery.migrateMute=!0),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t,window)}):"object"==typeof module&&module.exports?module.exports=e(require("jquery"),window):e(jQuery,window)}(function(e,t){"use strict";function i(t){return 0<=function(e,t){for(var i=/^(\d+)\.(\d+)\.(\d+)/,n=i.exec(e)||[],o=i.exec(t)||[],r=1;r<=3;r++){if(+o[r]<+n[r])return 1;if(+n[r]<+o[r])return-1}return 0}(e.fn.jquery,t)}e.migrateVersion="3.3.2",t.console&&t.console.log&&(e&&i("3.0.0")||t.console.log("JQMIGRATE: jQuery 3.0.0+ REQUIRED"),e.migrateWarnings&&t.console.log("JQMIGRATE: Migrate plugin loaded multiple times"),t.console.log("JQMIGRATE: Migrate is installed"+(e.migrateMute?"":" with logging active")+", version "+e.migrateVersion));var n={};function o(i){var o=t.console;e.migrateDeduplicateWarnings&&n[i]||(n[i]=!0,e.migrateWarnings.push(i),o&&o.warn&&!e.migrateMute&&(o.warn("JQMIGRATE: "+i),e.migrateTrace&&o.trace&&o.trace()))}function r(e,t,i,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return o(n),i},set:function(e){o(n),i=e}})}function s(e,t,i,n){e[t]=function(){return o(n),i.apply(this,arguments)}}e.migrateDeduplicateWarnings=!0,e.migrateWarnings=[],void 0===e.migrateTrace&&(e.migrateTrace=!0),e.migrateReset=function(){n={},e.migrateWarnings.length=0},"BackCompat"===t.document.compatMode&&o("jQuery is not compatible with Quirks Mode");var a,l,c,d={},u=e.fn.init,h=e.find,p=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,g=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,f=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;for(a in e.fn.init=function(e){var t=Array.prototype.slice.call(arguments);return"string"==typeof e&&"#"===e&&(o("jQuery( '#' ) is not a valid selector"),t[0]=[]),u.apply(this,t)},e.fn.init.prototype=e.fn,e.find=function(e){var i=Array.prototype.slice.call(arguments);if("string"==typeof e&&p.test(e))try{t.document.querySelector(e)}catch(n){e=e.replace(g,function(e,t,i,n){return"["+t+i+'"'+n+'"]'});try{t.document.querySelector(e),o("Attribute selector with '#' must be quoted: "+i[0]),i[0]=e}catch(e){o("Attribute selector with '#' was not fixed: "+i[0])}}return h.apply(this,i)},h)Object.prototype.hasOwnProperty.call(h,a)&&(e.find[a]=h[a]);s(e.fn,"size",function(){return this.length},"jQuery.fn.size() is deprecated and removed; use the .length property"),s(e,"parseJSON",function(){return JSON.parse.apply(null,arguments)},"jQuery.parseJSON is deprecated; use JSON.parse"),s(e,"holdReady",e.holdReady,"jQuery.holdReady is deprecated"),s(e,"unique",e.uniqueSort,"jQuery.unique is deprecated; use jQuery.uniqueSort"),r(e.expr,"filters",e.expr.pseudos,"jQuery.expr.filters is deprecated; use jQuery.expr.pseudos"),r(e.expr,":",e.expr.pseudos,"jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos"),i("3.1.1")&&s(e,"trim",function(e){return null==e?"":(e+"").replace(f,"")},"jQuery.trim is deprecated; use String.prototype.trim"),i("3.2.0")&&(s(e,"nodeName",function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},"jQuery.nodeName is deprecated"),s(e,"isArray",Array.isArray,"jQuery.isArray is deprecated; use Array.isArray")),i("3.3.0")&&(s(e,"isNumeric",function(e){var t=typeof e;return("number"==t||"string"==t)&&!isNaN(e-parseFloat(e))},"jQuery.isNumeric() is deprecated"),e.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){d["[object "+t+"]"]=t.toLowerCase()}),s(e,"type",function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[Object.prototype.toString.call(e)]||"object":typeof e},"jQuery.type is deprecated"),s(e,"isFunction",function(e){return"function"==typeof e},"jQuery.isFunction() is deprecated"),s(e,"isWindow",function(e){return null!=e&&e===e.window},"jQuery.isWindow() is deprecated")),e.ajax&&(l=e.ajax,c=/(=)\?(?=&|$)|\?\?/,e.ajax=function(){var e=l.apply(this,arguments);return e.promise&&(s(e,"success",e.done,"jQXHR.success is deprecated and removed"),s(e,"error",e.fail,"jQXHR.error is deprecated and removed"),s(e,"complete",e.always,"jQXHR.complete is deprecated and removed")),e},i("4.0.0")||e.ajaxPrefilter("+json",function(e){!1!==e.jsonp&&(c.test(e.url)||"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&c.test(e.data))&&o("JSON-to-JSONP auto-promotion is deprecated")}));var m=e.fn.removeAttr,v=e.fn.toggleClass,b=/\S+/g;function y(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}e.fn.removeAttr=function(t){var i=this;return e.each(t.match(b),function(t,n){e.expr.match.bool.test(n)&&(o("jQuery.fn.removeAttr no longer sets boolean properties: "+n),i.prop(n,!1))}),m.apply(this,arguments)};var w,C=!(e.fn.toggleClass=function(t){return void 0!==t&&"boolean"!=typeof t?v.apply(this,arguments):(o("jQuery.fn.toggleClass( boolean ) is deprecated"),this.each(function(){var i=this.getAttribute&&this.getAttribute("class")||"";i&&e.data(this,"__className__",i),this.setAttribute&&this.setAttribute("class",!i&&!1!==t&&e.data(this,"__className__")||"")}))}),_=/^[a-z]/,S=/^(?:Border(?:Top|Right|Bottom|Left)?(?:Width|)|(?:Margin|Padding)?(?:Top|Right|Bottom|Left)?|(?:Min|Max)?(?:Width|Height))$/;e.swap&&e.each(["height","width","reliableMarginRight"],function(t,i){var n=e.cssHooks[i]&&e.cssHooks[i].get;n&&(e.cssHooks[i].get=function(){var e;return C=!0,e=n.apply(this,arguments),C=!1,e})}),e.swap=function(e,t,i,n){var r,s,a={};for(s in C||o("jQuery.swap() is undocumented and deprecated"),t)a[s]=e.style[s],e.style[s]=t[s];for(s in r=i.apply(e,n||[]),t)e.style[s]=a[s];return r},i("3.4.0")&&"undefined"!=typeof Proxy&&(e.cssProps=new Proxy(e.cssProps||{},{set:function(){return o("JQMIGRATE: jQuery.cssProps is deprecated"),Reflect.set.apply(this,arguments)}})),e.cssNumber||(e.cssNumber={}),w=e.fn.css,e.fn.css=function(t,i){var n,r,s=this;return t&&"object"==typeof t&&!Array.isArray(t)?(e.each(t,function(t,i){e.fn.css.call(s,t,i)}),this):("number"==typeof i&&(r=n=y(t),_.test(r)&&S.test(r[0].toUpperCase()+r.slice(1))||e.cssNumber[n]||o('Number-typed values are deprecated for jQuery.fn.css( "'+t+'", value )')),w.apply(this,arguments))};var x,A,E,T,k=e.data;e.data=function(t,i,n){var r,s,a;if(i&&"object"==typeof i&&2===arguments.length){for(a in r=e.hasData(t)&&k.call(this,t),s={},i)a!==y(a)?(o("jQuery.data() always sets/gets camelCased names: "+a),r[a]=i[a]):s[a]=i[a];return k.call(this,t,s),i}return i&&"string"==typeof i&&i!==y(i)&&(r=e.hasData(t)&&k.call(this,t))&&i in r?(o("jQuery.data() always sets/gets camelCased names: "+i),2<arguments.length&&(r[i]=n),r[i]):k.apply(this,arguments)},e.fx&&(E=e.Tween.prototype.run,T=function(e){return e},e.Tween.prototype.run=function(){1<e.easing[this.easing].length&&(o("'jQuery.easing."+this.easing.toString()+"' should use only one argument"),e.easing[this.easing]=T),E.apply(this,arguments)},x=e.fx.interval||13,A="jQuery.fx.interval is deprecated",t.requestAnimationFrame&&Object.defineProperty(e.fx,"interval",{configurable:!0,enumerable:!0,get:function(){return t.document.hidden||o(A),x},set:function(e){o(A),x=e}}));var D=e.fn.load,M=e.event.add,P=e.event.fix;function R(e){var i=t.document.implementation.createHTMLDocument("");return i.body.innerHTML=e,i.body&&i.body.innerHTML}function I(e){var t=e.replace(O,"<$1></$2>");t!==e&&R(e)!==R(t)&&o("HTML tags must be properly nested and closed: "+e)}e.event.props=[],e.event.fixHooks={},r(e.event.props,"concat",e.event.props.concat,"jQuery.event.props.concat() is deprecated and removed"),e.event.fix=function(t){var i,n=t.type,r=this.fixHooks[n],s=e.event.props;if(s.length)for(o("jQuery.event.props are deprecated and removed: "+s.join());s.length;)e.event.addProp(s.pop());if(r&&!r._migrated_&&(r._migrated_=!0,o("jQuery.event.fixHooks are deprecated and removed: "+n),(s=r.props)&&s.length))for(;s.length;)e.event.addProp(s.pop());return i=P.call(this,t),r&&r.filter?r.filter(i,t):i},e.event.add=function(e,i){return e===t&&"load"===i&&"complete"===t.document.readyState&&o("jQuery(window).on('load'...) called after load event occurred"),M.apply(this,arguments)},e.each(["load","unload","error"],function(t,i){e.fn[i]=function(){var e=Array.prototype.slice.call(arguments,0);return"load"===i&&"string"==typeof e[0]?D.apply(this,e):(o("jQuery.fn."+i+"() is deprecated"),e.splice(0,0,i),arguments.length?this.on.apply(this,e):(this.triggerHandler.apply(this,e),this))}}),e.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,i){e.fn[i]=function(e,t){return o("jQuery.fn."+i+"() event shorthand is deprecated"),0<arguments.length?this.on(i,null,e,t):this.trigger(i)}}),e(function(){e(t.document).triggerHandler("ready")}),e.event.special.ready={setup:function(){this===t.document&&o("'ready' event is deprecated")}},e.fn.extend({bind:function(e,t,i){return o("jQuery.fn.bind() is deprecated"),this.on(e,null,t,i)},unbind:function(e,t){return o("jQuery.fn.unbind() is deprecated"),this.off(e,null,t)},delegate:function(e,t,i,n){return o("jQuery.fn.delegate() is deprecated"),this.on(t,e,i,n)},undelegate:function(e,t,i){return o("jQuery.fn.undelegate() is deprecated"),1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return o("jQuery.fn.hover() is deprecated"),this.on("mouseenter",e).on("mouseleave",t||e)}});var O=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,N=e.htmlPrefilter;e.UNSAFE_restoreLegacyHtmlPrefilter=function(){e.htmlPrefilter=function(e){return I(e),e.replace(O,"<$1></$2>")}},e.htmlPrefilter=function(e){return I(e),N(e)};var L,F=e.fn.offset;e.fn.offset=function(){var e=this[0];return!e||e.nodeType&&e.getBoundingClientRect?F.apply(this,arguments):(o("jQuery.fn.offset() requires a valid DOM element"),arguments.length?this:void 0)},e.ajax&&(L=e.param,e.param=function(t,i){var n=e.ajaxSettings&&e.ajaxSettings.traditional;return void 0===i&&n&&(o("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),i=n),L.call(this,t,i)});var $,G,B=e.fn.andSelf||e.fn.addBack;return e.fn.andSelf=function(){return o("jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()"),B.apply(this,arguments)},e.Deferred&&($=e.Deferred,G=[["resolve","done",e.Callbacks("once memory"),e.Callbacks("once memory"),"resolved"],["reject","fail",e.Callbacks("once memory"),e.Callbacks("once memory"),"rejected"],["notify","progress",e.Callbacks("memory"),e.Callbacks("memory")]],e.Deferred=function(t){var i=$(),n=i.promise();return i.pipe=n.pipe=function(){var t=arguments;return o("deferred.pipe() is deprecated"),e.Deferred(function(o){e.each(G,function(e,r){var s="function"==typeof t[e]&&t[e];i[r[1]](function(){var e=s&&s.apply(this,arguments);e&&"function"==typeof e.promise?e.promise().done(o.resolve).fail(o.reject).progress(o.notify):o[r[0]+"With"](this===n?o.promise():this,s?[e]:arguments)})}),t=null}).promise()},t&&t.call(i,i),i},e.Deferred.exceptionHook=$.exceptionHook),e});