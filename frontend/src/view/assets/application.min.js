/* ==========================================================================
   Emm JS - nightly build 11-07-2025
   ========================================================================== */

/* License
   ========================================================================== */

/**
 * EMM License to be added
 *
 **/



/* Libraries
   ========================================================================== */

/**
 * jQuery JavaScript Library v3.5.1
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * (c) 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Licensed under MIT (http://jquery.org/license)
 *
 * http://jquery.com
 **/

/**
 * Lo-Dash 4.17.21 (Custom Build)
 *
 * Build: `lodash -o ./dist/lodash.compat.js`
 *
 * Based on Underscore.js 1.8.3
 * Licensed under MIT (http://underscorejs.org/LICENSE)
 * (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 *
 * (c) 2012-2013 The Dojo Foundation http://dojofoundation.org/
 * Licensed under MIT (http://lodash.com/license)
 *
 * https://lodash.com/
 **/

 /**
 * D3.js 3.5.5
 *
 * Licensed under MIT (https://github.com/mbostock/d3/blob/master/LICENSE)
 * (c) 2010-2015, Michael Bostock
 *
 * http://d3js.org/
 **/

  /**
 * C3.js 0.4.10
 *
 * Licensed under MIT (https://github.com/masayuki0812/c3/blob/master/LICENSE)
 * (c) 2013 Masayuki Tanaka
 *
 * http://c3js.org/
 **/

/**
 * jQuery Plugins
 *
 * jquery-i18n v1.1.1
 * Licensed under MIT
 * (c) 2010 Dave Perrett
 * https://github.com/recurser/jquery-i18n
 *
 * jquery-migrate v3.3.2
 * Licensed under MIT
 * (c) 2005, 2013 jQuery Foundation, Inc. and other contributors
 * https://github.com/jquery/jquery-migrate
 *
 * jquery-select2 v3.5.2
 * Licensed under Apache License, Version 2.0 & GNU General Public License version 2
 * (c) 2012 Igor Vaynberg
 * https://ivaynberg.github.io/select2/
 *
 * jquery-mousewheel v3.1.9
 * Licensed under MIT
 * (c) 2013 Brandon Aaron
 * http://brandon.aaron.sh
 *
 * jquery-perfect-scrollbar v0.5.7
 * Licensed under MIT
 * (c) 2012, 2014 Hyunje Alex Jun and other contributors
 * https://noraesae.github.io/perfect-scrollbar/
 *
 * jquery DoubleScroll v0.4
 * Dual licensed under the MIT and GPL licenses
 * (c) Pawel Suwala, Antoine Vianey
 * https://github.com/avianey/jqDoubleScroll
 *
 * jquery Endless Scroll
 * Dual licensed under the MIT and GPL licenses
 * (c) 2008-2012 Fred Wu
 * https://github.com/fredwu/jquery-endless-scroll
 *
 * jQuery File Upload Plugin
 * Licensed under the MIT license
 * (c) 2010, Sebastian Tschan
 * https://github.com/blueimp/jQuery-File-Upload
 **/

/**
 * Bootstrap Components v3.4.1
 *
 * dropdown.js
 * modal.js
 * popover.js
 * tooltip.js
 *
 * (c) 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 *
 * http://getbootstrap.com/
 **/

/**
 * Bootstrap Extensions
 *
 * bootstrap-slider v4.8.1
 * Licensed under MIT
 * (c) 2015 Kyle Kemp, Rohit Kalkur, and contributors
 *
 * bootstrap-colorpicker v2.5.2
 * Licensed under Apache License v2.0
 * (c) 2012 Stefan Petre
 *
 **/

/**
 * jQuery UI v1.13.1
 *
 * core.js, widget.js, mouse.js, position.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, draggable.js, droppable.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js, menu.js, progressbar.js, resizable.js, selectable.js, selectmenu.js, slider.js, sortable.js, spinner.js, tabs.js, tooltip.js
 *
 * (c) 2014 jQuery Foundation and other contributors
 * Licensed under MIT
 *
 * http://jqueryui.com
 **/

/**
 * Pickadate v3.5.6
 *
 * date.js
 * time.js
 * legacy.js
 *
 * (c) 2014 Amsul, http://amsul.ca
 * Licensed under https://github.com/amsul/pickadate.js/blob/3.5.6/LICENSE.md
 *
 * https://amsul.github.io/pickadate.js
 **/

/**
 * Ace Editor
 *
 * Distributed under the BSD license:

 * Copyright (c) 2010, Ajax.org B.V.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of Ajax.org B.V. nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * http://ace.c9.io/
 **/

/**
 * iFrame Resizer v4.3.2
 *
 * (c) 2014 David J. Bradshaw - dave@bradshaw.net
 * Licensed under MIT
 *
 * https://davidjbradshaw.github.io/iframe-resizer/
 **/

/**
 * Toastr (modified version)
 *
 * (c) 2012-2014 John Papa and Hans Fjällemark
 * Licensed under MIT
 *
 * https://github.com/CodeSeven/toastr
 **/

/**
 * EmojiOne Area v v3.4.1
 *
 * EmojiOneArea is released under the MIT license.
 *
 * Copyright (c) 2015-2017 Andrey Izman <izmanw@gmail.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

(function(e,t){"use strict";if(typeof module==="object"&&typeof module.exports==="object"){module.exports=e.document?t(e,true):function(e){if(!e.document){throw new Error("jQuery requires a window with a document")}return t(e)}}else{t(e)}})(typeof window!=="undefined"?window:this,(function(e,t){"use strict";var i=[];var n=Object.getPrototypeOf;var r=i.slice;var o=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)};var a=i.push;var s=i.indexOf;var l={};var u=l.toString;var c=l.hasOwnProperty;var d=c.toString;var f=d.call(Object);var p={};var h=function e(t){return typeof t==="function"&&typeof t.nodeType!=="number"&&typeof t.item!=="function"};var g=function e(t){return t!=null&&t===t.window};var m=e.document;var v={type:true,src:true,nonce:true,noModule:true};function y(e,t,i){i=i||m;var n,r,o=i.createElement("script");o.text=e;if(t){for(n in v){r=t[n]||t.getAttribute&&t.getAttribute(n);if(r){o.setAttribute(n,r)}}}i.head.appendChild(o).parentNode.removeChild(o)}function b(e){if(e==null){return e+""}return typeof e==="object"||typeof e==="function"?l[u.call(e)]||"object":typeof e}var _="3.5.1",w=function(e,t){return new w.fn.init(e,t)};w.fn=w.prototype={jquery:_,constructor:w,length:0,toArray:function(){return r.call(this)},get:function(e){if(e==null){return r.call(this)}return e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);t.prevObject=this;return t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(w.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:i.sort,splice:i.splice};w.extend=w.fn.extend=function(){var e,t,i,n,r,o,a=arguments[0]||{},s=1,l=arguments.length,u=false;if(typeof a==="boolean"){u=a;a=arguments[s]||{};s++}if(typeof a!=="object"&&!h(a)){a={}}if(s===l){a=this;s--}for(;s<l;s++){if((e=arguments[s])!=null){for(t in e){n=e[t];if(t==="__proto__"||a===n){continue}if(u&&n&&(w.isPlainObject(n)||(r=Array.isArray(n)))){i=a[t];if(r&&!Array.isArray(i)){o=[]}else if(!r&&!w.isPlainObject(i)){o={}}else{o=i}r=false;a[t]=w.extend(u,o,n)}else if(n!==undefined){a[t]=n}}}}return a};w.extend({expando:"jQuery"+(_+Math.random()).replace(/\D/g,""),isReady:true,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;if(!e||u.call(e)!=="[object Object]"){return false}t=n(e);if(!t){return true}i=c.call(t,"constructor")&&t.constructor;return typeof i==="function"&&d.call(i)===f},isEmptyObject:function(e){var t;for(t in e){return false}return true},globalEval:function(e,t,i){y(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,n=0;if(C(e)){i=e.length;for(;n<i;n++){if(t.call(e[n],n,e[n])===false){break}}}else{for(n in e){if(t.call(e[n],n,e[n])===false){break}}}return e},makeArray:function(e,t){var i=t||[];if(e!=null){if(C(Object(e))){w.merge(i,typeof e==="string"?[e]:e)}else{a.call(i,e)}}return i},inArray:function(e,t,i){return t==null?-1:s.call(t,e,i)},merge:function(e,t){var i=+t.length,n=0,r=e.length;for(;n<i;n++){e[r++]=t[n]}e.length=r;return e},grep:function(e,t,i){var n,r=[],o=0,a=e.length,s=!i;for(;o<a;o++){n=!t(e[o],o);if(n!==s){r.push(e[o])}}return r},map:function(e,t,i){var n,r,a=0,s=[];if(C(e)){n=e.length;for(;a<n;a++){r=t(e[a],a,i);if(r!=null){s.push(r)}}}else{for(a in e){r=t(e[a],a,i);if(r!=null){s.push(r)}}}return o(s)},guid:1,support:p});if(typeof Symbol==="function"){w.fn[Symbol.iterator]=i[Symbol.iterator]}w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){l["[object "+t+"]"]=t.toLowerCase()}));function C(e){var t=!!e&&"length"in e&&e.length,i=b(e);if(h(e)||g(e)){return false}return i==="array"||t===0||typeof t==="number"&&t>0&&t-1 in e}var A=function(e){var t,i,n,r,o,a,s,l,u,c,d,f,p,h,g,m,v,y,b,_="sizzle"+1*new Date,w=e.document,C=0,A=0,E=le(),x=le(),T=le(),S=le(),D=function(e,t){if(e===t){d=true}return 0},k={}.hasOwnProperty,O=[],R=O.pop,N=O.push,P=O.push,I=O.slice,M=function(e,t){var i=0,n=e.length;for(;i<n;i++){if(e[i]===t){return i}}return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|"+"ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",G="(?:\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",$="\\["+F+"*("+G+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+G+"))|)"+F+"*\\]",W=":("+G+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+$+")*)|"+".*"+")\\)|)",H=new RegExp(F+"+","g"),j=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),B=new RegExp("^"+F+"*,"+F+"*"),V=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),z=new RegExp(F+"|>"),U=new RegExp(W),Y=new RegExp("^"+G+"$"),q={ID:new RegExp("^#("+G+")"),CLASS:new RegExp("^\\.("+G+")"),TAG:new RegExp("^("+G+"|[*])"),ATTR:new RegExp("^"+$),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\([^\\r\\n\\f])","g"),ie=function(e,t){var i="0x"+e.slice(1)-65536;return t?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,i&1023|56320)},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,re=function(e,t){if(t){if(e==="\0"){return"�"}return e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" "}return"\\"+e},oe=function(){f()},ae=_e((function(e){return e.disabled===true&&e.nodeName.toLowerCase()==="fieldset"}),{dir:"parentNode",next:"legend"});try{P.apply(O=I.call(w.childNodes),w.childNodes);O[w.childNodes.length].nodeType}catch(e){P={apply:O.length?function(e,t){N.apply(e,I.call(t))}:function(e,t){var i=e.length,n=0;while(e[i++]=t[n++]){}e.length=i-1}}}function se(e,t,n,r){var o,s,u,c,d,h,v,y=t&&t.ownerDocument,w=t?t.nodeType:9;n=n||[];if(typeof e!=="string"||!e||w!==1&&w!==9&&w!==11){return n}if(!r){f(t);t=t||p;if(g){if(w!==11&&(d=J.exec(e))){if(o=d[1]){if(w===9){if(u=t.getElementById(o)){if(u.id===o){n.push(u);return n}}else{return n}}else{if(y&&(u=y.getElementById(o))&&b(t,u)&&u.id===o){n.push(u);return n}}}else if(d[2]){P.apply(n,t.getElementsByTagName(e));return n}else if((o=d[3])&&i.getElementsByClassName&&t.getElementsByClassName){P.apply(n,t.getElementsByClassName(o));return n}}if(i.qsa&&!S[e+" "]&&(!m||!m.test(e))&&(w!==1||t.nodeName.toLowerCase()!=="object")){v=e;y=t;if(w===1&&(z.test(e)||V.test(e))){y=ee.test(e)&&ve(t.parentNode)||t;if(y!==t||!i.scope){if(c=t.getAttribute("id")){c=c.replace(ne,re)}else{t.setAttribute("id",c=_)}}h=a(e);s=h.length;while(s--){h[s]=(c?"#"+c:":scope")+" "+be(h[s])}v=h.join(",")}try{P.apply(n,y.querySelectorAll(v));return n}catch(t){S(e,true)}finally{if(c===_){t.removeAttribute("id")}}}}}return l(e.replace(j,"$1"),t,n,r)}function le(){var e=[];function t(i,r){if(e.push(i+" ")>n.cacheLength){delete t[e.shift()]}return t[i+" "]=r}return t}function ue(e){e[_]=true;return e}function ce(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return false}finally{if(t.parentNode){t.parentNode.removeChild(t)}t=null}}function de(e,t){var i=e.split("|"),r=i.length;while(r--){n.attrHandle[i[r]]=t}}function fe(e,t){var i=t&&e,n=i&&e.nodeType===1&&t.nodeType===1&&e.sourceIndex-t.sourceIndex;if(n){return n}if(i){while(i=i.nextSibling){if(i===t){return-1}}}return e?1:-1}function pe(e){return function(t){var i=t.nodeName.toLowerCase();return i==="input"&&t.type===e}}function he(e){return function(t){var i=t.nodeName.toLowerCase();return(i==="input"||i==="button")&&t.type===e}}function ge(e){return function(t){if("form"in t){if(t.parentNode&&t.disabled===false){if("label"in t){if("label"in t.parentNode){return t.parentNode.disabled===e}else{return t.disabled===e}}return t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e}return t.disabled===e}else if("label"in t){return t.disabled===e}return false}}function me(e){return ue((function(t){t=+t;return ue((function(i,n){var r,o=e([],i.length,t),a=o.length;while(a--){if(i[r=o[a]]){i[r]=!(n[r]=i[r])}}}))}))}function ve(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}i=se.support={};o=se.isXML=function(e){var t=e.namespaceURI,i=(e.ownerDocument||e).documentElement;return!X.test(t||i&&i.nodeName||"HTML")};f=se.setDocument=function(e){var t,r,a=e?e.ownerDocument||e:w;if(a==p||a.nodeType!==9||!a.documentElement){return p}p=a;h=p.documentElement;g=!o(p);if(w!=p&&(r=p.defaultView)&&r.top!==r){if(r.addEventListener){r.addEventListener("unload",oe,false)}else if(r.attachEvent){r.attachEvent("onunload",oe)}}i.scope=ce((function(e){h.appendChild(e).appendChild(p.createElement("div"));return typeof e.querySelectorAll!=="undefined"&&!e.querySelectorAll(":scope fieldset div").length}));i.attributes=ce((function(e){e.className="i";return!e.getAttribute("className")}));i.getElementsByTagName=ce((function(e){e.appendChild(p.createComment(""));return!e.getElementsByTagName("*").length}));i.getElementsByClassName=Z.test(p.getElementsByClassName);i.getById=ce((function(e){h.appendChild(e).id=_;return!p.getElementsByName||!p.getElementsByName(_).length}));if(i.getById){n.filter["ID"]=function(e){var t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}};n.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&g){var i=t.getElementById(e);return i?[i]:[]}}}else{n.filter["ID"]=function(e){var t=e.replace(te,ie);return function(e){var i=typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id");return i&&i.value===t}};n.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&g){var i,n,r,o=t.getElementById(e);if(o){i=o.getAttributeNode("id");if(i&&i.value===e){return[o]}r=t.getElementsByName(e);n=0;while(o=r[n++]){i=o.getAttributeNode("id");if(i&&i.value===e){return[o]}}}return[]}}}n.find["TAG"]=i.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!=="undefined"){return t.getElementsByTagName(e)}else if(i.qsa){return t.querySelectorAll(e)}}:function(e,t){var i,n=[],r=0,o=t.getElementsByTagName(e);if(e==="*"){while(i=o[r++]){if(i.nodeType===1){n.push(i)}}return n}return o};n.find["CLASS"]=i.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!=="undefined"&&g){return t.getElementsByClassName(e)}};v=[];m=[];if(i.qsa=Z.test(p.querySelectorAll)){ce((function(e){var t;h.appendChild(e).innerHTML="<a id='"+_+"'></a>"+"<select id='"+_+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(e.querySelectorAll("[msallowcapture^='']").length){m.push("[*^$]="+F+"*(?:''|\"\")")}if(!e.querySelectorAll("[selected]").length){m.push("\\["+F+"*(?:value|"+L+")")}if(!e.querySelectorAll("[id~="+_+"-]").length){m.push("~=")}t=p.createElement("input");t.setAttribute("name","");e.appendChild(t);if(!e.querySelectorAll("[name='']").length){m.push("\\["+F+"*name"+F+"*="+F+"*(?:''|\"\")")}if(!e.querySelectorAll(":checked").length){m.push(":checked")}if(!e.querySelectorAll("a#"+_+"+*").length){m.push(".#.+[+~]")}e.querySelectorAll("\\\f");m.push("[\\r\\n\\f]")}));ce((function(e){e.innerHTML="<a href='' disabled='disabled'></a>"+"<select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden");e.appendChild(t).setAttribute("name","D");if(e.querySelectorAll("[name=d]").length){m.push("name"+F+"*[*^$|!~]?=")}if(e.querySelectorAll(":enabled").length!==2){m.push(":enabled",":disabled")}h.appendChild(e).disabled=true;if(e.querySelectorAll(":disabled").length!==2){m.push(":enabled",":disabled")}e.querySelectorAll("*,:x");m.push(",.*:")}))}if(i.matchesSelector=Z.test(y=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector)){ce((function(e){i.disconnectedMatch=y.call(e,"*");y.call(e,"[s!='']:x");v.push("!=",W)}))}m=m.length&&new RegExp(m.join("|"));v=v.length&&new RegExp(v.join("|"));t=Z.test(h.compareDocumentPosition);b=t||Z.test(h.contains)?function(e,t){var i=e.nodeType===9?e.documentElement:e,n=t&&t.parentNode;return e===n||!!(n&&n.nodeType===1&&(i.contains?i.contains(n):e.compareDocumentPosition&&e.compareDocumentPosition(n)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};D=t?function(e,t){if(e===t){d=true;return 0}var n=!e.compareDocumentPosition-!t.compareDocumentPosition;if(n){return n}n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1;if(n&1||!i.sortDetached&&t.compareDocumentPosition(e)===n){if(e==p||e.ownerDocument==w&&b(w,e)){return-1}if(t==p||t.ownerDocument==w&&b(w,t)){return 1}return c?M(c,e)-M(c,t):0}return n&4?-1:1}:function(e,t){if(e===t){d=true;return 0}var i,n=0,r=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!r||!o){return e==p?-1:t==p?1:r?-1:o?1:c?M(c,e)-M(c,t):0}else if(r===o){return fe(e,t)}i=e;while(i=i.parentNode){a.unshift(i)}i=t;while(i=i.parentNode){s.unshift(i)}while(a[n]===s[n]){n++}return n?fe(a[n],s[n]):a[n]==w?-1:s[n]==w?1:0};return p};se.matches=function(e,t){return se(e,null,null,t)};se.matchesSelector=function(e,t){f(e);if(i.matchesSelector&&g&&!S[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t))){try{var n=y.call(e,t);if(n||i.disconnectedMatch||e.document&&e.document.nodeType!==11){return n}}catch(e){S(t,true)}}return se(t,p,null,[e]).length>0};se.contains=function(e,t){if((e.ownerDocument||e)!=p){f(e)}return b(e,t)};se.attr=function(e,t){if((e.ownerDocument||e)!=p){f(e)}var r=n.attrHandle[t.toLowerCase()],o=r&&k.call(n.attrHandle,t.toLowerCase())?r(e,t,!g):undefined;return o!==undefined?o:i.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null};se.escape=function(e){return(e+"").replace(ne,re)};se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};se.uniqueSort=function(e){var t,n=[],r=0,o=0;d=!i.detectDuplicates;c=!i.sortStable&&e.slice(0);e.sort(D);if(d){while(t=e[o++]){if(t===e[o]){r=n.push(o)}}while(r--){e.splice(n[r],1)}}c=null;return e};r=se.getText=function(e){var t,i="",n=0,o=e.nodeType;if(!o){while(t=e[n++]){i+=r(t)}}else if(o===1||o===9||o===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){i+=r(e)}}}else if(o===3||o===4){return e.nodeValue}return i};n=se.selectors={cacheLength:50,createPseudo:ue,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(te,ie);e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){se.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+(e[7]+e[8]||e[3]==="odd")}else if(e[3]){se.error(e[0])}return e},PSEUDO:function(e){var t,i=!e[6]&&e[2];if(q["CHILD"].test(e[0])){return null}if(e[3]){e[2]=e[4]||e[5]||""}else if(i&&U.test(i)&&(t=a(i,true))&&(t=i.indexOf(")",i.length-t)-i.length)){e[0]=e[0].slice(0,t);e[2]=i.slice(0,t)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(te,ie).toLowerCase();return e==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&E(e,(function(e){return t.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!=="undefined"&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(n){var r=se.attr(n,e);if(r==null){return t==="!="}if(!t){return true}r+="";return t==="="?r===i:t==="!="?r!==i:t==="^="?i&&r.indexOf(i)===0:t==="*="?i&&r.indexOf(i)>-1:t==="$="?i&&r.slice(-i.length)===i:t==="~="?(" "+r.replace(H," ")+" ").indexOf(i)>-1:t==="|="?r===i||r.slice(0,i.length+1)===i+"-":false}},CHILD:function(e,t,i,n,r){var o=e.slice(0,3)!=="nth",a=e.slice(-4)!=="last",s=t==="of-type";return n===1&&r===0?function(e){return!!e.parentNode}:function(t,i,l){var u,c,d,f,p,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=false;if(m){if(o){while(g){f=t;while(f=f[g]){if(s?f.nodeName.toLowerCase()===v:f.nodeType===1){return false}}h=g=e==="only"&&!h&&"nextSibling"}return true}h=[a?m.firstChild:m.lastChild];if(a&&y){f=m;d=f[_]||(f[_]={});c=d[f.uniqueID]||(d[f.uniqueID]={});u=c[e]||[];p=u[0]===C&&u[1];b=p&&u[2];f=p&&m.childNodes[p];while(f=++p&&f&&f[g]||(b=p=0)||h.pop()){if(f.nodeType===1&&++b&&f===t){c[e]=[C,p,b];break}}}else{if(y){f=t;d=f[_]||(f[_]={});c=d[f.uniqueID]||(d[f.uniqueID]={});u=c[e]||[];p=u[0]===C&&u[1];b=p}if(b===false){while(f=++p&&f&&f[g]||(b=p=0)||h.pop()){if((s?f.nodeName.toLowerCase()===v:f.nodeType===1)&&++b){if(y){d=f[_]||(f[_]={});c=d[f.uniqueID]||(d[f.uniqueID]={});c[e]=[C,b]}if(f===t){break}}}}}b-=r;return b===n||b%n===0&&b/n>=0}}},PSEUDO:function(e,t){var i,r=n.pseudos[e]||n.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);if(r[_]){return r(t)}if(r.length>1){i=[e,e,"",t];return n.setFilters.hasOwnProperty(e.toLowerCase())?ue((function(e,i){var n,o=r(e,t),a=o.length;while(a--){n=M(e,o[a]);e[n]=!(i[n]=o[a])}})):function(e){return r(e,0,i)}}return r}},pseudos:{not:ue((function(e){var t=[],i=[],n=s(e.replace(j,"$1"));return n[_]?ue((function(e,t,i,r){var o,a=n(e,null,r,[]),s=e.length;while(s--){if(o=a[s]){e[s]=!(t[s]=o)}}})):function(e,r,o){t[0]=e;n(t,null,o,i);t[0]=null;return!i.pop()}})),has:ue((function(e){return function(t){return se(e,t).length>0}})),contains:ue((function(e){e=e.replace(te,ie);return function(t){return(t.textContent||r(t)).indexOf(e)>-1}})),lang:ue((function(e){if(!Y.test(e||"")){se.error("unsupported lang: "+e)}e=e.replace(te,ie).toLowerCase();return function(t){var i;do{if(i=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang")){i=i.toLowerCase();return i===e||i.indexOf(e+"-")===0}}while((t=t.parentNode)&&t.nodeType===1);return false}})),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(false),disabled:ge(true),checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return!n.pseudos["empty"](e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:me((function(){return[0]})),last:me((function(e,t){return[t-1]})),eq:me((function(e,t,i){return[i<0?i+t:i]})),even:me((function(e,t){var i=0;for(;i<t;i+=2){e.push(i)}return e})),odd:me((function(e,t){var i=1;for(;i<t;i+=2){e.push(i)}return e})),lt:me((function(e,t,i){var n=i<0?i+t:i>t?t:i;for(;--n>=0;){e.push(n)}return e})),gt:me((function(e,t,i){var n=i<0?i+t:i;for(;++n<t;){e.push(n)}return e}))}};n.pseudos["nth"]=n.pseudos["eq"];for(t in{radio:true,checkbox:true,file:true,password:true,image:true}){n.pseudos[t]=pe(t)}for(t in{submit:true,reset:true}){n.pseudos[t]=he(t)}function ye(){}ye.prototype=n.filters=n.pseudos;n.setFilters=new ye;a=se.tokenize=function(e,t){var i,r,o,a,s,l,u,c=x[e+" "];if(c){return t?0:c.slice(0)}s=e;l=[];u=n.preFilter;while(s){if(!i||(r=B.exec(s))){if(r){s=s.slice(r[0].length)||s}l.push(o=[])}i=false;if(r=V.exec(s)){i=r.shift();o.push({value:i,type:r[0].replace(j," ")});s=s.slice(i.length)}for(a in n.filter){if((r=q[a].exec(s))&&(!u[a]||(r=u[a](r)))){i=r.shift();o.push({value:i,type:a,matches:r});s=s.slice(i.length)}}if(!i){break}}return t?s.length:s?se.error(e):x(e,l).slice(0)};function be(e){var t=0,i=e.length,n="";for(;t<i;t++){n+=e[t].value}return n}function _e(e,t,i){var n=t.dir,r=t.next,o=r||n,a=i&&o==="parentNode",s=A++;return t.first?function(t,i,r){while(t=t[n]){if(t.nodeType===1||a){return e(t,i,r)}}return false}:function(t,i,l){var u,c,d,f=[C,s];if(l){while(t=t[n]){if(t.nodeType===1||a){if(e(t,i,l)){return true}}}}else{while(t=t[n]){if(t.nodeType===1||a){d=t[_]||(t[_]={});c=d[t.uniqueID]||(d[t.uniqueID]={});if(r&&r===t.nodeName.toLowerCase()){t=t[n]||t}else if((u=c[o])&&u[0]===C&&u[1]===s){return f[2]=u[2]}else{c[o]=f;if(f[2]=e(t,i,l)){return true}}}}}return false}}function we(e){return e.length>1?function(t,i,n){var r=e.length;while(r--){if(!e[r](t,i,n)){return false}}return true}:e[0]}function Ce(e,t,i){var n=0,r=t.length;for(;n<r;n++){se(e,t[n],i)}return i}function Ae(e,t,i,n,r){var o,a=[],s=0,l=e.length,u=t!=null;for(;s<l;s++){if(o=e[s]){if(!i||i(o,n,r)){a.push(o);if(u){t.push(s)}}}}return a}function Ee(e,t,i,n,r,o){if(n&&!n[_]){n=Ee(n)}if(r&&!r[_]){r=Ee(r,o)}return ue((function(o,a,s,l){var u,c,d,f=[],p=[],h=a.length,g=o||Ce(t||"*",s.nodeType?[s]:s,[]),m=e&&(o||!t)?Ae(g,f,e,s,l):g,v=i?r||(o?e:h||n)?[]:a:m;if(i){i(m,v,s,l)}if(n){u=Ae(v,p);n(u,[],s,l);c=u.length;while(c--){if(d=u[c]){v[p[c]]=!(m[p[c]]=d)}}}if(o){if(r||e){if(r){u=[];c=v.length;while(c--){if(d=v[c]){u.push(m[c]=d)}}r(null,v=[],u,l)}c=v.length;while(c--){if((d=v[c])&&(u=r?M(o,d):f[c])>-1){o[u]=!(a[u]=d)}}}}else{v=Ae(v===a?v.splice(h,v.length):v);if(r){r(null,a,v,l)}else{P.apply(a,v)}}}))}function xe(e){var t,i,r,o=e.length,a=n.relative[e[0].type],s=a||n.relative[" "],l=a?1:0,c=_e((function(e){return e===t}),s,true),d=_e((function(e){return M(t,e)>-1}),s,true),f=[function(e,i,n){var r=!a&&(n||i!==u)||((t=i).nodeType?c(e,i,n):d(e,i,n));t=null;return r}];for(;l<o;l++){if(i=n.relative[e[l].type]){f=[_e(we(f),i)]}else{i=n.filter[e[l].type].apply(null,e[l].matches);if(i[_]){r=++l;for(;r<o;r++){if(n.relative[e[r].type]){break}}return Ee(l>1&&we(f),l>1&&be(e.slice(0,l-1).concat({value:e[l-2].type===" "?"*":""})).replace(j,"$1"),i,l<r&&xe(e.slice(l,r)),r<o&&xe(e=e.slice(r)),r<o&&be(e))}f.push(i)}}return we(f)}function Te(e,t){var i=t.length>0,r=e.length>0,o=function(o,a,s,l,c){var d,h,m,v=0,y="0",b=o&&[],_=[],w=u,A=o||r&&n.find["TAG"]("*",c),E=C+=w==null?1:Math.random()||.1,x=A.length;if(c){u=a==p||a||c}for(;y!==x&&(d=A[y])!=null;y++){if(r&&d){h=0;if(!a&&d.ownerDocument!=p){f(d);s=!g}while(m=e[h++]){if(m(d,a||p,s)){l.push(d);break}}if(c){C=E}}if(i){if(d=!m&&d){v--}if(o){b.push(d)}}}v+=y;if(i&&y!==v){h=0;while(m=t[h++]){m(b,_,a,s)}if(o){if(v>0){while(y--){if(!(b[y]||_[y])){_[y]=R.call(l)}}}_=Ae(_)}P.apply(l,_);if(c&&!o&&_.length>0&&v+t.length>1){se.uniqueSort(l)}}if(c){C=E;u=w}return b};return i?ue(o):o}s=se.compile=function(e,t){var i,n=[],r=[],o=T[e+" "];if(!o){if(!t){t=a(e)}i=t.length;while(i--){o=xe(t[i]);if(o[_]){n.push(o)}else{r.push(o)}}o=T(e,Te(r,n));o.selector=e}return o};l=se.select=function(e,t,i,r){var o,l,u,c,d,f=typeof e==="function"&&e,p=!r&&a(e=f.selector||e);i=i||[];if(p.length===1){l=p[0]=p[0].slice(0);if(l.length>2&&(u=l[0]).type==="ID"&&t.nodeType===9&&g&&n.relative[l[1].type]){t=(n.find["ID"](u.matches[0].replace(te,ie),t)||[])[0];if(!t){return i}else if(f){t=t.parentNode}e=e.slice(l.shift().value.length)}o=q["needsContext"].test(e)?0:l.length;while(o--){u=l[o];if(n.relative[c=u.type]){break}if(d=n.find[c]){if(r=d(u.matches[0].replace(te,ie),ee.test(l[0].type)&&ve(t.parentNode)||t)){l.splice(o,1);e=r.length&&be(l);if(!e){P.apply(i,r);return i}break}}}}(f||s(e,p))(r,t,!g,i,!t||ee.test(e)&&ve(t.parentNode)||t);return i};i.sortStable=_.split("").sort(D).join("")===_;i.detectDuplicates=!!d;f();i.sortDetached=ce((function(e){return e.compareDocumentPosition(p.createElement("fieldset"))&1}));if(!ce((function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"}))){de("type|href|height|width",(function(e,t,i){if(!i){return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}}))}if(!i.attributes||!ce((function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""}))){de("value",(function(e,t,i){if(!i&&e.nodeName.toLowerCase()==="input"){return e.defaultValue}}))}if(!ce((function(e){return e.getAttribute("disabled")==null}))){de(L,(function(e,t,i){var n;if(!i){return e[t]===true?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}}))}return se}(e);w.find=A;w.expr=A.selectors;w.expr[":"]=w.expr.pseudos;w.uniqueSort=w.unique=A.uniqueSort;w.text=A.getText;w.isXMLDoc=A.isXML;w.contains=A.contains;w.escapeSelector=A.escape;var E=function(e,t,i){var n=[],r=i!==undefined;while((e=e[t])&&e.nodeType!==9){if(e.nodeType===1){if(r&&w(e).is(i)){break}n.push(e)}}return n};var x=function(e,t){var i=[];for(;e;e=e.nextSibling){if(e.nodeType===1&&e!==t){i.push(e)}}return i};var T=w.expr.match.needsContext;function S(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function k(e,t,i){if(h(t)){return w.grep(e,(function(e,n){return!!t.call(e,n,e)!==i}))}if(t.nodeType){return w.grep(e,(function(e){return e===t!==i}))}if(typeof t!=="string"){return w.grep(e,(function(e){return s.call(t,e)>-1!==i}))}return w.filter(t,e,i)}w.filter=function(e,t,i){var n=t[0];if(i){e=":not("+e+")"}if(t.length===1&&n.nodeType===1){return w.find.matchesSelector(n,e)?[n]:[]}return w.find.matches(e,w.grep(t,(function(e){return e.nodeType===1})))};w.fn.extend({find:function(e){var t,i,n=this.length,r=this;if(typeof e!=="string"){return this.pushStack(w(e).filter((function(){for(t=0;t<n;t++){if(w.contains(r[t],this)){return true}}})))}i=this.pushStack([]);for(t=0;t<n;t++){w.find(e,r[t],i)}return n>1?w.uniqueSort(i):i},filter:function(e){return this.pushStack(k(this,e||[],false))},not:function(e){return this.pushStack(k(this,e||[],true))},is:function(e){return!!k(this,typeof e==="string"&&T.test(e)?w(e):e||[],false).length}});var O,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,N=w.fn.init=function(e,t,i){var n,r;if(!e){return this}i=i||O;if(typeof e==="string"){if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3){n=[null,e,null]}else{n=R.exec(e)}if(n&&(n[1]||!t)){if(n[1]){t=t instanceof w?t[0]:t;w.merge(this,w.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:m,true));if(D.test(n[1])&&w.isPlainObject(t)){for(n in t){if(h(this[n])){this[n](t[n])}else{this.attr(n,t[n])}}}return this}else{r=m.getElementById(n[2]);if(r){this[0]=r;this.length=1}return this}}else if(!t||t.jquery){return(t||i).find(e)}else{return this.constructor(t).find(e)}}else if(e.nodeType){this[0]=e;this.length=1;return this}else if(h(e)){return i.ready!==undefined?i.ready(e):e(w)}return w.makeArray(e,this)};N.prototype=w.fn;O=w(m);var P=/^(?:parents|prev(?:Until|All))/,I={children:true,contents:true,next:true,prev:true};w.fn.extend({has:function(e){var t=w(e,this),i=t.length;return this.filter((function(){var e=0;for(;e<i;e++){if(w.contains(this,t[e])){return true}}}))},closest:function(e,t){var i,n=0,r=this.length,o=[],a=typeof e!=="string"&&w(e);if(!T.test(e)){for(;n<r;n++){for(i=this[n];i&&i!==t;i=i.parentNode){if(i.nodeType<11&&(a?a.index(i)>-1:i.nodeType===1&&w.find.matchesSelector(i,e))){o.push(i);break}}}}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(e){if(!e){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof e==="string"){return s.call(w(e),this[0])}return s.call(this,e.jquery?e[0]:e)},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function M(e,t){while((e=e[t])&&e.nodeType!==1){}return e}w.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return E(e,"parentNode")},parentsUntil:function(e,t,i){return E(e,"parentNode",i)},next:function(e){return M(e,"nextSibling")},prev:function(e){return M(e,"previousSibling")},nextAll:function(e){return E(e,"nextSibling")},prevAll:function(e){return E(e,"previousSibling")},nextUntil:function(e,t,i){return E(e,"nextSibling",i)},prevUntil:function(e,t,i){return E(e,"previousSibling",i)},siblings:function(e){return x((e.parentNode||{}).firstChild,e)},children:function(e){return x(e.firstChild)},contents:function(e){if(e.contentDocument!=null&&n(e.contentDocument)){return e.contentDocument}if(S(e,"template")){e=e.content||e}return w.merge([],e.childNodes)}},(function(e,t){w.fn[e]=function(i,n){var r=w.map(this,t,i);if(e.slice(-5)!=="Until"){n=i}if(n&&typeof n==="string"){r=w.filter(n,r)}if(this.length>1){if(!I[e]){w.uniqueSort(r)}if(P.test(e)){r.reverse()}}return this.pushStack(r)}}));var L=/[^\x20\t\r\n\f]+/g;function F(e){var t={};w.each(e.match(L)||[],(function(e,i){t[i]=true}));return t}w.Callbacks=function(e){e=typeof e==="string"?F(e):w.extend({},e);var t,i,n,r,o=[],a=[],s=-1,l=function(){r=r||e.once;n=t=true;for(;a.length;s=-1){i=a.shift();while(++s<o.length){if(o[s].apply(i[0],i[1])===false&&e.stopOnFalse){s=o.length;i=false}}}if(!e.memory){i=false}t=false;if(r){if(i){o=[]}else{o=""}}},u={add:function(){if(o){if(i&&!t){s=o.length-1;a.push(i)}(function t(i){w.each(i,(function(i,n){if(h(n)){if(!e.unique||!u.has(n)){o.push(n)}}else if(n&&n.length&&b(n)!=="string"){t(n)}}))})(arguments);if(i&&!t){l()}}return this},remove:function(){w.each(arguments,(function(e,t){var i;while((i=w.inArray(t,o,i))>-1){o.splice(i,1);if(i<=s){s--}}}));return this},has:function(e){return e?w.inArray(e,o)>-1:o.length>0},empty:function(){if(o){o=[]}return this},disable:function(){r=a=[];o=i="";return this},disabled:function(){return!o},lock:function(){r=a=[];if(!i&&!t){o=i=""}return this},locked:function(){return!!r},fireWith:function(e,i){if(!r){i=i||[];i=[e,i.slice?i.slice():i];a.push(i);if(!t){l()}}return this},fire:function(){u.fireWith(this,arguments);return this},fired:function(){return!!n}};return u};function G(e){return e}function $(e){throw e}function W(e,t,i,n){var r;try{if(e&&h(r=e.promise)){r.call(e).done(t).fail(i)}else if(e&&h(r=e.then)){r.call(e,t,i)}else{t.apply(undefined,[e].slice(n))}}catch(e){i.apply(undefined,[e])}}w.extend({Deferred:function(t){var i=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){o.done(arguments).fail(arguments);return this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return w.Deferred((function(t){w.each(i,(function(i,n){var r=h(e[n[4]])&&e[n[4]];o[n[1]]((function(){var e=r&&r.apply(this,arguments);if(e&&h(e.promise)){e.promise().progress(t.notify).done(t.resolve).fail(t.reject)}else{t[n[0]+"With"](this,r?[e]:arguments)}}))}));e=null})).promise()},then:function(t,n,r){var o=0;function a(t,i,n,r){return function(){var s=this,l=arguments,u=function(){var e,u;if(t<o){return}e=n.apply(s,l);if(e===i.promise()){throw new TypeError("Thenable self-resolution")}u=e&&(typeof e==="object"||typeof e==="function")&&e.then;if(h(u)){if(r){u.call(e,a(o,i,G,r),a(o,i,$,r))}else{o++;u.call(e,a(o,i,G,r),a(o,i,$,r),a(o,i,G,i.notifyWith))}}else{if(n!==G){s=undefined;l=[e]}(r||i.resolveWith)(s,l)}},c=r?u:function(){try{u()}catch(e){if(w.Deferred.exceptionHook){w.Deferred.exceptionHook(e,c.stackTrace)}if(t+1>=o){if(n!==$){s=undefined;l=[e]}i.rejectWith(s,l)}}};if(t){c()}else{if(w.Deferred.getStackHook){c.stackTrace=w.Deferred.getStackHook()}e.setTimeout(c)}}}return w.Deferred((function(e){i[0][3].add(a(0,e,h(r)?r:G,e.notifyWith));i[1][3].add(a(0,e,h(t)?t:G));i[2][3].add(a(0,e,h(n)?n:$))})).promise()},promise:function(e){return e!=null?w.extend(e,r):r}},o={};w.each(i,(function(e,t){var a=t[2],s=t[5];r[t[1]]=a.add;if(s){a.add((function(){n=s}),i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock)}a.add(t[3].fire);o[t[0]]=function(){o[t[0]+"With"](this===o?undefined:this,arguments);return this};o[t[0]+"With"]=a.fireWith}));r.promise(o);if(t){t.call(o,o)}return o},when:function(e){var t=arguments.length,i=t,n=Array(i),o=r.call(arguments),a=w.Deferred(),s=function(e){return function(i){n[e]=this;o[e]=arguments.length>1?r.call(arguments):i;if(! --t){a.resolveWith(n,o)}}};if(t<=1){W(e,a.done(s(i)).resolve,a.reject,!t);if(a.state()==="pending"||h(o[i]&&o[i].then)){return a.then()}}while(i--){W(o[i],s(i),a.reject)}return a.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,i){if(e.console&&e.console.warn&&t&&H.test(t.name)){e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)}};w.readyException=function(t){e.setTimeout((function(){throw t}))};var j=w.Deferred();w.fn.ready=function(e){j.then(e).catch((function(e){w.readyException(e)}));return this};w.extend({isReady:false,readyWait:1,ready:function(e){if(e===true?--w.readyWait:w.isReady){return}w.isReady=true;if(e!==true&&--w.readyWait>0){return}j.resolveWith(m,[w])}});w.ready.then=j.then;function B(){m.removeEventListener("DOMContentLoaded",B);e.removeEventListener("load",B);w.ready()}if(m.readyState==="complete"||m.readyState!=="loading"&&!m.documentElement.doScroll){e.setTimeout(w.ready)}else{m.addEventListener("DOMContentLoaded",B);e.addEventListener("load",B)}var V=function(e,t,i,n,r,o,a){var s=0,l=e.length,u=i==null;if(b(i)==="object"){r=true;for(s in i){V(e,t,s,i[s],true,o,a)}}else if(n!==undefined){r=true;if(!h(n)){a=true}if(u){if(a){t.call(e,n);t=null}else{u=t;t=function(e,t,i){return u.call(w(e),i)}}}if(t){for(;s<l;s++){t(e[s],i,a?n:n.call(e[s],s,t(e[s],i)))}}}if(r){return e}if(u){return t.call(e)}return l?t(e[0],i):o};var z=/^-ms-/,U=/-([a-z])/g;function Y(e,t){return t.toUpperCase()}function q(e){return e.replace(z,"ms-").replace(U,Y)}var X=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function K(){this.expando=w.expando+K.uid++}K.uid=1;K.prototype={cache:function(e){var t=e[this.expando];if(!t){t={};if(X(e)){if(e.nodeType){e[this.expando]=t}else{Object.defineProperty(e,this.expando,{value:t,configurable:true})}}}return t},set:function(e,t,i){var n,r=this.cache(e);if(typeof t==="string"){r[q(t)]=i}else{for(n in t){r[q(n)]=t[n]}}return r},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][q(t)]},access:function(e,t,i){if(t===undefined||t&&typeof t==="string"&&i===undefined){return this.get(e,t)}this.set(e,t,i);return i!==undefined?i:t},remove:function(e,t){var i,n=e[this.expando];if(n===undefined){return}if(t!==undefined){if(Array.isArray(t)){t=t.map(q)}else{t=q(t);t=t in n?[t]:t.match(L)||[]}i=t.length;while(i--){delete n[t[i]]}}if(t===undefined||w.isEmptyObject(n)){if(e.nodeType){e[this.expando]=undefined}else{delete e[this.expando]}}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!w.isEmptyObject(t)}};var Q=new K;var Z=new K;var J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e){if(e==="true"){return true}if(e==="false"){return false}if(e==="null"){return null}if(e===+e+""){return+e}if(J.test(e)){return JSON.parse(e)}return e}function ie(e,t,i){var n;if(i===undefined&&e.nodeType===1){n="data-"+t.replace(ee,"-$&").toLowerCase();i=e.getAttribute(n);if(typeof i==="string"){try{i=te(i)}catch(e){}Z.set(e,t,i)}else{i=undefined}}return i}w.extend({hasData:function(e){return Z.hasData(e)||Q.hasData(e)},data:function(e,t,i){return Z.access(e,t,i)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,i){return Q.access(e,t,i)},_removeData:function(e,t){Q.remove(e,t)}});w.fn.extend({data:function(e,t){var i,n,r,o=this[0],a=o&&o.attributes;if(e===undefined){if(this.length){r=Z.get(o);if(o.nodeType===1&&!Q.get(o,"hasDataAttrs")){i=a.length;while(i--){if(a[i]){n=a[i].name;if(n.indexOf("data-")===0){n=q(n.slice(5));ie(o,n,r[n])}}}Q.set(o,"hasDataAttrs",true)}}return r}if(typeof e==="object"){return this.each((function(){Z.set(this,e)}))}return V(this,(function(t){var i;if(o&&t===undefined){i=Z.get(o,e);if(i!==undefined){return i}i=ie(o,e);if(i!==undefined){return i}return}this.each((function(){Z.set(this,e,t)}))}),null,t,arguments.length>1,null,true)},removeData:function(e){return this.each((function(){Z.remove(this,e)}))}});w.extend({queue:function(e,t,i){var n;if(e){t=(t||"fx")+"queue";n=Q.get(e,t);if(i){if(!n||Array.isArray(i)){n=Q.access(e,t,w.makeArray(i))}else{n.push(i)}}return n||[]}},dequeue:function(e,t){t=t||"fx";var i=w.queue(e,t),n=i.length,r=i.shift(),o=w._queueHooks(e,t),a=function(){w.dequeue(e,t)};if(r==="inprogress"){r=i.shift();n--}if(r){if(t==="fx"){i.unshift("inprogress")}delete o.stop;r.call(e,a,o)}if(!n&&o){o.empty.fire()}},_queueHooks:function(e,t){var i=t+"queueHooks";return Q.get(e,i)||Q.access(e,i,{empty:w.Callbacks("once memory").add((function(){Q.remove(e,[t+"queue",i])}))})}});w.fn.extend({queue:function(e,t){var i=2;if(typeof e!=="string"){t=e;e="fx";i--}if(arguments.length<i){return w.queue(this[0],e)}return t===undefined?this:this.each((function(){var i=w.queue(this,e,t);w._queueHooks(this,e);if(e==="fx"&&i[0]!=="inprogress"){w.dequeue(this,e)}}))},dequeue:function(e){return this.each((function(){w.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=w.Deferred(),o=this,a=this.length,s=function(){if(! --n){r.resolveWith(o,[o])}};if(typeof e!=="string"){t=e;e=undefined}e=e||"fx";while(a--){i=Q.get(o[a],e+"queueHooks");if(i&&i.empty){n++;i.empty.add(s)}}s();return r.promise(t)}});var ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var re=new RegExp("^(?:([+-])=|)("+ne+")([a-z%]*)$","i");var oe=["Top","Right","Bottom","Left"];var ae=m.documentElement;var se=function(e){return w.contains(e.ownerDocument,e)},le={composed:true};if(ae.getRootNode){se=function(e){return w.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument}}var ue=function(e,t){e=t||e;return e.style.display==="none"||e.style.display===""&&se(e)&&w.css(e,"display")==="none"};function ce(e,t,i,n){var r,o,a=20,s=n?function(){return n.cur()}:function(){return w.css(e,t,"")},l=s(),u=i&&i[3]||(w.cssNumber[t]?"":"px"),c=e.nodeType&&(w.cssNumber[t]||u!=="px"&&+l)&&re.exec(w.css(e,t));if(c&&c[3]!==u){l=l/2;u=u||c[3];c=+l||1;while(a--){w.style(e,t,c+u);if((1-o)*(1-(o=s()/l||.5))<=0){a=0}c=c/o}c=c*2;w.style(e,t,c+u);i=i||[]}if(i){c=+c||+l||0;r=i[1]?c+(i[1]+1)*i[2]:+i[2];if(n){n.unit=u;n.start=c;n.end=r}}return r}var de={};function fe(e){var t,i=e.ownerDocument,n=e.nodeName,r=de[n];if(r){return r}t=i.body.appendChild(i.createElement(n));r=w.css(t,"display");t.parentNode.removeChild(t);if(r==="none"){r="block"}de[n]=r;return r}function pe(e,t){var i,n,r=[],o=0,a=e.length;for(;o<a;o++){n=e[o];if(!n.style){continue}i=n.style.display;if(t){if(i==="none"){r[o]=Q.get(n,"display")||null;if(!r[o]){n.style.display=""}}if(n.style.display===""&&ue(n)){r[o]=fe(n)}}else{if(i!=="none"){r[o]="none";Q.set(n,"display",i)}}}for(o=0;o<a;o++){if(r[o]!=null){e[o].style.display=r[o]}}return e}w.fn.extend({show:function(){return pe(this,true)},hide:function(){return pe(this)},toggle:function(e){if(typeof e==="boolean"){return e?this.show():this.hide()}return this.each((function(){if(ue(this)){w(this).show()}else{w(this).hide()}}))}});var he=/^(?:checkbox|radio)$/i;var ge=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i;var me=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=m.createDocumentFragment(),t=e.appendChild(m.createElement("div")),i=m.createElement("input");i.setAttribute("type","radio");i.setAttribute("checked","checked");i.setAttribute("name","t");t.appendChild(i);p.checkClone=t.cloneNode(true).cloneNode(true).lastChild.checked;t.innerHTML="<textarea>x</textarea>";p.noCloneChecked=!!t.cloneNode(true).lastChild.defaultValue;t.innerHTML="<option></option>";p.option=!!t.lastChild})();var ve={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead;ve.th=ve.td;if(!p.option){ve.optgroup=ve.option=[1,"<select multiple='multiple'>","</select>"]}function ye(e,t){var i;if(typeof e.getElementsByTagName!=="undefined"){i=e.getElementsByTagName(t||"*")}else if(typeof e.querySelectorAll!=="undefined"){i=e.querySelectorAll(t||"*")}else{i=[]}if(t===undefined||t&&S(e,t)){return w.merge([e],i)}return i}function be(e,t){var i=0,n=e.length;for(;i<n;i++){Q.set(e[i],"globalEval",!t||Q.get(t[i],"globalEval"))}}var _e=/<|&#?\w+;/;function we(e,t,i,n,r){var o,a,s,l,u,c,d=t.createDocumentFragment(),f=[],p=0,h=e.length;for(;p<h;p++){o=e[p];if(o||o===0){if(b(o)==="object"){w.merge(f,o.nodeType?[o]:o)}else if(!_e.test(o)){f.push(t.createTextNode(o))}else{a=a||d.appendChild(t.createElement("div"));s=(ge.exec(o)||["",""])[1].toLowerCase();l=ve[s]||ve._default;a.innerHTML=l[1]+w.htmlPrefilter(o)+l[2];c=l[0];while(c--){a=a.lastChild}w.merge(f,a.childNodes);a=d.firstChild;a.textContent=""}}}d.textContent="";p=0;while(o=f[p++]){if(n&&w.inArray(o,n)>-1){if(r){r.push(o)}continue}u=se(o);a=ye(d.appendChild(o),"script");if(u){be(a)}if(i){c=0;while(o=a[c++]){if(me.test(o.type||"")){i.push(o)}}}}return d}var Ce=/^key/,Ae=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ee=/^([^.]*)(?:\.(.+)|)/;function xe(){return true}function Te(){return false}function Se(e,t){return e===De()===(t==="focus")}function De(){try{return m.activeElement}catch(e){}}function ke(e,t,i,n,r,o){var a,s;if(typeof t==="object"){if(typeof i!=="string"){n=n||i;i=undefined}for(s in t){ke(e,s,i,n,t[s],o)}return e}if(n==null&&r==null){r=i;n=i=undefined}else if(r==null){if(typeof i==="string"){r=n;n=undefined}else{r=n;n=i;i=undefined}}if(r===false){r=Te}else if(!r){return e}if(o===1){a=r;r=function(e){w().off(e);return a.apply(this,arguments)};r.guid=a.guid||(a.guid=w.guid++)}return e.each((function(){w.event.add(this,t,r,n,i)}))}w.event={global:{},add:function(e,t,i,n,r){var o,a,s,l,u,c,d,f,p,h,g,m=Q.get(e);if(!X(e)){return}if(i.handler){o=i;i=o.handler;r=o.selector}if(r){w.find.matchesSelector(ae,r)}if(!i.guid){i.guid=w.guid++}if(!(l=m.events)){l=m.events=Object.create(null)}if(!(a=m.handle)){a=m.handle=function(t){return typeof w!=="undefined"&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):undefined}}t=(t||"").match(L)||[""];u=t.length;while(u--){s=Ee.exec(t[u])||[];p=g=s[1];h=(s[2]||"").split(".").sort();if(!p){continue}d=w.event.special[p]||{};p=(r?d.delegateType:d.bindType)||p;d=w.event.special[p]||{};c=w.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&w.expr.match.needsContext.test(r),namespace:h.join(".")},o);if(!(f=l[p])){f=l[p]=[];f.delegateCount=0;if(!d.setup||d.setup.call(e,n,h,a)===false){if(e.addEventListener){e.addEventListener(p,a)}}}if(d.add){d.add.call(e,c);if(!c.handler.guid){c.handler.guid=i.guid}}if(r){f.splice(f.delegateCount++,0,c)}else{f.push(c)}w.event.global[p]=true}},remove:function(e,t,i,n,r){var o,a,s,l,u,c,d,f,p,h,g,m=Q.hasData(e)&&Q.get(e);if(!m||!(l=m.events)){return}t=(t||"").match(L)||[""];u=t.length;while(u--){s=Ee.exec(t[u])||[];p=g=s[1];h=(s[2]||"").split(".").sort();if(!p){for(p in l){w.event.remove(e,p+t[u],i,n,true)}continue}d=w.event.special[p]||{};p=(n?d.delegateType:d.bindType)||p;f=l[p]||[];s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)");a=o=f.length;while(o--){c=f[o];if((r||g===c.origType)&&(!i||i.guid===c.guid)&&(!s||s.test(c.namespace))&&(!n||n===c.selector||n==="**"&&c.selector)){f.splice(o,1);if(c.selector){f.delegateCount--}if(d.remove){d.remove.call(e,c)}}}if(a&&!f.length){if(!d.teardown||d.teardown.call(e,h,m.handle)===false){w.removeEvent(e,p,m.handle)}delete l[p]}}if(w.isEmptyObject(l)){Q.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,o,a,s=new Array(arguments.length),l=w.event.fix(e),u=(Q.get(this,"events")||Object.create(null))[l.type]||[],c=w.event.special[l.type]||{};s[0]=l;for(t=1;t<arguments.length;t++){s[t]=arguments[t]}l.delegateTarget=this;if(c.preDispatch&&c.preDispatch.call(this,l)===false){return}a=w.event.handlers.call(this,l,u);t=0;while((r=a[t++])&&!l.isPropagationStopped()){l.currentTarget=r.elem;i=0;while((o=r.handlers[i++])&&!l.isImmediatePropagationStopped()){if(!l.rnamespace||o.namespace===false||l.rnamespace.test(o.namespace)){l.handleObj=o;l.data=o.data;n=((w.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s);if(n!==undefined){if((l.result=n)===false){l.preventDefault();l.stopPropagation()}}}}}if(c.postDispatch){c.postDispatch.call(this,l)}return l.result},handlers:function(e,t){var i,n,r,o,a,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!(e.type==="click"&&e.button>=1)){for(;u!==this;u=u.parentNode||this){if(u.nodeType===1&&!(e.type==="click"&&u.disabled===true)){o=[];a={};for(i=0;i<l;i++){n=t[i];r=n.selector+" ";if(a[r]===undefined){a[r]=n.needsContext?w(r,this).index(u)>-1:w.find(r,this,null,[u]).length}if(a[r]){o.push(n)}}if(o.length){s.push({elem:u,handlers:o})}}}}u=this;if(l<t.length){s.push({elem:u,handlers:t.slice(l)})}return s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:true,configurable:true,get:h(t)?function(){if(this.originalEvent){return t(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[e]}},set:function(t){Object.defineProperty(this,e,{enumerable:true,configurable:true,writable:true,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:true},click:{setup:function(e){var t=this||e;if(he.test(t.type)&&t.click&&S(t,"input")){Oe(t,"click",xe)}return false},trigger:function(e){var t=this||e;if(he.test(t.type)&&t.click&&S(t,"input")){Oe(t,"click")}return true},_default:function(e){var t=e.target;return he.test(t.type)&&t.click&&S(t,"input")&&Q.get(t,"click")||S(t,"a")}},beforeunload:{postDispatch:function(e){if(e.result!==undefined&&e.originalEvent){e.originalEvent.returnValue=e.result}}}}};function Oe(e,t,i){if(!i){if(Q.get(e,t)===undefined){w.event.add(e,t,xe)}return}Q.set(e,t,false);w.event.add(e,t,{namespace:false,handler:function(e){var n,o,a=Q.get(this,t);if(e.isTrigger&1&&this[t]){if(!a.length){a=r.call(arguments);Q.set(this,t,a);n=i(this,t);this[t]();o=Q.get(this,t);if(a!==o||n){Q.set(this,t,false)}else{o={}}if(a!==o){e.stopImmediatePropagation();e.preventDefault();return o.value}}else if((w.event.special[t]||{}).delegateType){e.stopPropagation()}}else if(a.length){Q.set(this,t,{value:w.event.trigger(w.extend(a[0],w.Event.prototype),a.slice(1),this)});e.stopImmediatePropagation()}}})}w.removeEvent=function(e,t,i){if(e.removeEventListener){e.removeEventListener(t,i)}};w.Event=function(e,t){if(!(this instanceof w.Event)){return new w.Event(e,t)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===false?xe:Te;this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target;this.currentTarget=e.currentTarget;this.relatedTarget=e.relatedTarget}else{this.type=e}if(t){w.extend(this,t)}this.timeStamp=e&&e.timeStamp||Date.now();this[w.expando]=true};w.Event.prototype={constructor:w.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe;if(e&&!this.isSimulated){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe;if(e&&!this.isSimulated){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};w.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,char:true,code:true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function(e){var t=e.button;if(e.which==null&&Ce.test(e.type)){return e.charCode!=null?e.charCode:e.keyCode}if(!e.which&&t!==undefined&&Ae.test(e.type)){if(t&1){return 1}if(t&2){return 3}if(t&4){return 2}return 0}return e.which}},w.event.addProp);w.each({focus:"focusin",blur:"focusout"},(function(e,t){w.event.special[e]={setup:function(){Oe(this,e,Se);return false},trigger:function(){Oe(this,e);return true},delegateType:t}}));w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,o=e.handleObj;if(!r||r!==n&&!w.contains(n,r)){e.type=o.origType;i=o.handler.apply(this,arguments);e.type=t}return i}}}));w.fn.extend({on:function(e,t,i,n){return ke(this,e,t,i,n)},one:function(e,t,i,n){return ke(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj){n=e.handleObj;w(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler);return this}if(typeof e==="object"){for(r in e){this.off(r,t,e[r])}return this}if(t===false||typeof t==="function"){i=t;t=undefined}if(i===false){i=Te}return this.each((function(){w.event.remove(this,e,i,t)}))}});var Re=/<script|<style|<link/i,Ne=/checked\s*(?:[^=]|=\s*.checked.)/i,Pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ie(e,t){if(S(e,"table")&&S(t.nodeType!==11?t:t.firstChild,"tr")){return w(e).children("tbody")[0]||e}return e}function Me(e){e.type=(e.getAttribute("type")!==null)+"/"+e.type;return e}function Le(e){if((e.type||"").slice(0,5)==="true/"){e.type=e.type.slice(5)}else{e.removeAttribute("type")}return e}function Fe(e,t){var i,n,r,o,a,s,l;if(t.nodeType!==1){return}if(Q.hasData(e)){o=Q.get(e);l=o.events;if(l){Q.remove(t,"handle events");for(r in l){for(i=0,n=l[r].length;i<n;i++){w.event.add(t,r,l[r][i])}}}}if(Z.hasData(e)){a=Z.access(e);s=w.extend({},a);Z.set(t,s)}}function Ge(e,t){var i=t.nodeName.toLowerCase();if(i==="input"&&he.test(e.type)){t.checked=e.checked}else if(i==="input"||i==="textarea"){t.defaultValue=e.defaultValue}}function $e(e,t,i,n){t=o(t);var r,a,s,l,u,c,d=0,f=e.length,g=f-1,m=t[0],v=h(m);if(v||f>1&&typeof m==="string"&&!p.checkClone&&Ne.test(m)){return e.each((function(r){var o=e.eq(r);if(v){t[0]=m.call(this,r,o.html())}$e(o,t,i,n)}))}if(f){r=we(t,e[0].ownerDocument,false,e,n);a=r.firstChild;if(r.childNodes.length===1){r=a}if(a||n){s=w.map(ye(r,"script"),Me);l=s.length;for(;d<f;d++){u=r;if(d!==g){u=w.clone(u,true,true);if(l){w.merge(s,ye(u,"script"))}}i.call(e[d],u,d)}if(l){c=s[s.length-1].ownerDocument;w.map(s,Le);for(d=0;d<l;d++){u=s[d];if(me.test(u.type||"")&&!Q.access(u,"globalEval")&&w.contains(c,u)){if(u.src&&(u.type||"").toLowerCase()!=="module"){if(w._evalUrl&&!u.noModule){w._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c)}}else{y(u.textContent.replace(Pe,""),u,c)}}}}}}return e}function We(e,t,i){var n,r=t?w.filter(t,e):e,o=0;for(;(n=r[o])!=null;o++){if(!i&&n.nodeType===1){w.cleanData(ye(n))}if(n.parentNode){if(i&&se(n)){be(ye(n,"script"))}n.parentNode.removeChild(n)}}return e}w.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var n,r,o,a,s=e.cloneNode(true),l=se(e);if(!p.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!w.isXMLDoc(e)){a=ye(s);o=ye(e);for(n=0,r=o.length;n<r;n++){Ge(o[n],a[n])}}if(t){if(i){o=o||ye(e);a=a||ye(s);for(n=0,r=o.length;n<r;n++){Fe(o[n],a[n])}}else{Fe(e,s)}}a=ye(s,"script");if(a.length>0){be(a,!l&&ye(e,"script"))}return s},cleanData:function(e){var t,i,n,r=w.event.special,o=0;for(;(i=e[o])!==undefined;o++){if(X(i)){if(t=i[Q.expando]){if(t.events){for(n in t.events){if(r[n]){w.event.remove(i,n)}else{w.removeEvent(i,n,t.handle)}}}i[Q.expando]=undefined}if(i[Z.expando]){i[Z.expando]=undefined}}}}});w.fn.extend({detach:function(e){return We(this,e,true)},remove:function(e){return We(this,e)},text:function(e){return V(this,(function(e){return e===undefined?w.text(this):this.empty().each((function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=e}}))}),null,e,arguments.length)},append:function(){return $e(this,arguments,(function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Ie(this,e);t.appendChild(e)}}))},prepend:function(){return $e(this,arguments,(function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Ie(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return $e(this,arguments,(function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}}))},after:function(){return $e(this,arguments,(function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}}))},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){if(e.nodeType===1){w.cleanData(ye(e,false));e.textContent=""}}return this},clone:function(e,t){e=e==null?false:e;t=t==null?e:t;return this.map((function(){return w.clone(this,e,t)}))},html:function(e){return V(this,(function(e){var t=this[0]||{},i=0,n=this.length;if(e===undefined&&t.nodeType===1){return t.innerHTML}if(typeof e==="string"&&!Re.test(e)&&!ve[(ge.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;i<n;i++){t=this[i]||{};if(t.nodeType===1){w.cleanData(ye(t,false));t.innerHTML=e}}t=0}catch(e){}}if(t){this.empty().append(e)}}),null,e,arguments.length)},replaceWith:function(){var e=[];return $e(this,arguments,(function(t){var i=this.parentNode;if(w.inArray(this,e)<0){w.cleanData(ye(this));if(i){i.replaceChild(t,this)}}}),e)}});w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){w.fn[e]=function(e){var i,n=[],r=w(e),o=r.length-1,s=0;for(;s<=o;s++){i=s===o?this:this.clone(true);w(r[s])[t](i);a.apply(n,i.get())}return this.pushStack(n)}}));var He=new RegExp("^("+ne+")(?!px)[a-z%]+$","i");var je=function(t){var i=t.ownerDocument.defaultView;if(!i||!i.opener){i=e}return i.getComputedStyle(t)};var Be=function(e,t,i){var n,r,o={};for(r in t){o[r]=e.style[r];e.style[r]=t[r]}n=i.call(e);for(r in t){e.style[r]=o[r]}return n};var Ve=new RegExp(oe.join("|"),"i");(function(){function t(){if(!c){return}u.style.cssText="position:absolute;left:-11111px;width:60px;"+"margin-top:1px;padding:0;border:0";c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;"+"margin:auto;border:1px;padding:1px;"+"width:60%;top:1%";ae.appendChild(u).appendChild(c);var t=e.getComputedStyle(c);n=t.top!=="1%";l=i(t.marginLeft)===12;c.style.right="60%";a=i(t.right)===36;r=i(t.width)===36;c.style.position="absolute";o=i(c.offsetWidth/3)===12;ae.removeChild(u);c=null}function i(e){return Math.round(parseFloat(e))}var n,r,o,a,s,l,u=m.createElement("div"),c=m.createElement("div");if(!c.style){return}c.style.backgroundClip="content-box";c.cloneNode(true).style.backgroundClip="";p.clearCloneStyle=c.style.backgroundClip==="content-box";w.extend(p,{boxSizingReliable:function(){t();return r},pixelBoxStyles:function(){t();return a},pixelPosition:function(){t();return n},reliableMarginLeft:function(){t();return l},scrollboxSize:function(){t();return o},reliableTrDimensions:function(){var t,i,n,r;if(s==null){t=m.createElement("table");i=m.createElement("tr");n=m.createElement("div");t.style.cssText="position:absolute;left:-11111px";i.style.height="1px";n.style.height="9px";ae.appendChild(t).appendChild(i).appendChild(n);r=e.getComputedStyle(i);s=parseInt(r.height)>3;ae.removeChild(t)}return s}})})();function ze(e,t,i){var n,r,o,a,s=e.style;i=i||je(e);if(i){a=i.getPropertyValue(t)||i[t];if(a===""&&!se(e)){a=w.style(e,t)}if(!p.pixelBoxStyles()&&He.test(a)&&Ve.test(t)){n=s.width;r=s.minWidth;o=s.maxWidth;s.minWidth=s.maxWidth=s.width=a;a=i.width;s.width=n;s.minWidth=r;s.maxWidth=o}}return a!==undefined?a+"":a}function Ue(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}var Ye=["Webkit","Moz","ms"],qe=m.createElement("div").style,Xe={};function Ke(e){var t=e[0].toUpperCase()+e.slice(1),i=Ye.length;while(i--){e=Ye[i]+t;if(e in qe){return e}}}function Qe(e){var t=w.cssProps[e]||Xe[e];if(t){return t}if(e in qe){return e}return Xe[e]=Ke(e)||e}var Ze=/^(none|table(?!-c[ea]).+)/,Je=/^--/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"};function it(e,t,i){var n=re.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function nt(e,t,i,n,r,o){var a=t==="width"?1:0,s=0,l=0;if(i===(n?"border":"content")){return 0}for(;a<4;a+=2){if(i==="margin"){l+=w.css(e,i+oe[a],true,r)}if(!n){l+=w.css(e,"padding"+oe[a],true,r);if(i!=="padding"){l+=w.css(e,"border"+oe[a]+"Width",true,r)}else{s+=w.css(e,"border"+oe[a]+"Width",true,r)}}else{if(i==="content"){l-=w.css(e,"padding"+oe[a],true,r)}if(i!=="margin"){l-=w.css(e,"border"+oe[a]+"Width",true,r)}}}if(!n&&o>=0){l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0}return l}function rt(e,t,i){var n=je(e),r=!p.boxSizingReliable()||i,o=r&&w.css(e,"boxSizing",false,n)==="border-box",a=o,s=ze(e,t,n),l="offset"+t[0].toUpperCase()+t.slice(1);if(He.test(s)){if(!i){return s}s="auto"}if((!p.boxSizingReliable()&&o||!p.reliableTrDimensions()&&S(e,"tr")||s==="auto"||!parseFloat(s)&&w.css(e,"display",false,n)==="inline")&&e.getClientRects().length){o=w.css(e,"boxSizing",false,n)==="border-box";a=l in e;if(a){s=e[l]}}s=parseFloat(s)||0;return s+nt(e,t,i||(o?"border":"content"),a,n,s)+"px"}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=ze(e,"opacity");return i===""?"1":i}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,gridArea:true,gridColumn:true,gridColumnEnd:true,gridColumnStart:true,gridRow:true,gridRowEnd:true,gridRowStart:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{},style:function(e,t,i,n){if(!e||e.nodeType===3||e.nodeType===8||!e.style){return}var r,o,a,s=q(t),l=Je.test(t),u=e.style;if(!l){t=Qe(s)}a=w.cssHooks[t]||w.cssHooks[s];if(i!==undefined){o=typeof i;if(o==="string"&&(r=re.exec(i))&&r[1]){i=ce(e,t,r);o="number"}if(i==null||i!==i){return}if(o==="number"&&!l){i+=r&&r[3]||(w.cssNumber[s]?"":"px")}if(!p.clearCloneStyle&&i===""&&t.indexOf("background")===0){u[t]="inherit"}if(!a||!("set"in a)||(i=a.set(e,i,n))!==undefined){if(l){u.setProperty(t,i)}else{u[t]=i}}}else{if(a&&"get"in a&&(r=a.get(e,false,n))!==undefined){return r}return u[t]}},css:function(e,t,i,n){var r,o,a,s=q(t),l=Je.test(t);if(!l){t=Qe(s)}a=w.cssHooks[t]||w.cssHooks[s];if(a&&"get"in a){r=a.get(e,true,i)}if(r===undefined){r=ze(e,t,n)}if(r==="normal"&&t in tt){r=tt[t]}if(i===""||i){o=parseFloat(r);return i===true||isFinite(o)?o||0:r}return r}});w.each(["height","width"],(function(e,t){w.cssHooks[t]={get:function(e,i,n){if(i){return Ze.test(w.css(e,"display"))&&(!e.getClientRects().length||!e.getBoundingClientRect().width)?Be(e,et,(function(){return rt(e,t,n)})):rt(e,t,n)}},set:function(e,i,n){var r,o=je(e),a=!p.scrollboxSize()&&o.position==="absolute",s=a||n,l=s&&w.css(e,"boxSizing",false,o)==="border-box",u=n?nt(e,t,n,l,o):0;if(l&&a){u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-nt(e,t,"border",false,o)-.5)}if(u&&(r=re.exec(i))&&(r[3]||"px")!=="px"){e.style[t]=i;i=w.css(e,t)}return it(e,i,u)}}}));w.cssHooks.marginLeft=Ue(p.reliableMarginLeft,(function(e,t){if(t){return(parseFloat(ze(e,"marginLeft"))||e.getBoundingClientRect().left-Be(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"}}));w.each({margin:"",padding:"",border:"Width"},(function(e,t){w.cssHooks[e+t]={expand:function(i){var n=0,r={},o=typeof i==="string"?i.split(" "):[i];for(;n<4;n++){r[e+oe[n]+t]=o[n]||o[n-2]||o[0]}return r}};if(e!=="margin"){w.cssHooks[e+t].set=it}}));w.fn.extend({css:function(e,t){return V(this,(function(e,t,i){var n,r,o={},a=0;if(Array.isArray(t)){n=je(e);r=t.length;for(;a<r;a++){o[t[a]]=w.css(e,t[a],false,n)}return o}return i!==undefined?w.style(e,t,i):w.css(e,t)}),e,t,arguments.length>1)}});function ot(e,t,i,n,r){return new ot.prototype.init(e,t,i,n,r)}w.Tween=ot;ot.prototype={constructor:ot,init:function(e,t,i,n,r,o){this.elem=e;this.prop=i;this.easing=r||w.easing._default;this.options=t;this.start=this.now=this.cur();this.end=n;this.unit=o||(w.cssNumber[i]?"":"px")},cur:function(){var e=ot.propHooks[this.prop];return e&&e.get?e.get(this):ot.propHooks._default.get(this)},run:function(e){var t,i=ot.propHooks[this.prop];if(this.options.duration){this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration)}else{this.pos=t=e}this.now=(this.end-this.start)*t+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(i&&i.set){i.set(this)}else{ot.propHooks._default.set(this)}return this}};ot.prototype.init.prototype=ot.prototype;ot.propHooks={_default:{get:function(e){var t;if(e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null){return e.elem[e.prop]}t=w.css(e.elem,e.prop,"");return!t||t==="auto"?0:t},set:function(e){if(w.fx.step[e.prop]){w.fx.step[e.prop](e)}else if(e.elem.nodeType===1&&(w.cssHooks[e.prop]||e.elem.style[Qe(e.prop)]!=null)){w.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}};ot.propHooks.scrollTop=ot.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"};w.fx=ot.prototype.init;w.fx.step={};var at,st,lt=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;function ct(){if(st){if(m.hidden===false&&e.requestAnimationFrame){e.requestAnimationFrame(ct)}else{e.setTimeout(ct,w.fx.interval)}w.fx.tick()}}function dt(){e.setTimeout((function(){at=undefined}));return at=Date.now()}function ft(e,t){var i,n=0,r={height:e};t=t?1:0;for(;n<4;n+=2-t){i=oe[n];r["margin"+i]=r["padding"+i]=e}if(t){r.opacity=r.width=e}return r}function pt(e,t,i){var n,r=(mt.tweeners[t]||[]).concat(mt.tweeners["*"]),o=0,a=r.length;for(;o<a;o++){if(n=r[o].call(i,t,e)){return n}}}function ht(e,t,i){var n,r,o,a,s,l,u,c,d="width"in t||"height"in t,f=this,p={},h=e.style,g=e.nodeType&&ue(e),m=Q.get(e,"fxshow");if(!i.queue){a=w._queueHooks(e,"fx");if(a.unqueued==null){a.unqueued=0;s=a.empty.fire;a.empty.fire=function(){if(!a.unqueued){s()}}}a.unqueued++;f.always((function(){f.always((function(){a.unqueued--;if(!w.queue(e,"fx").length){a.empty.fire()}}))}))}for(n in t){r=t[n];if(lt.test(r)){delete t[n];o=o||r==="toggle";if(r===(g?"hide":"show")){if(r==="show"&&m&&m[n]!==undefined){g=true}else{continue}}p[n]=m&&m[n]||w.style(e,n)}}l=!w.isEmptyObject(t);if(!l&&w.isEmptyObject(p)){return}if(d&&e.nodeType===1){i.overflow=[h.overflow,h.overflowX,h.overflowY];u=m&&m.display;if(u==null){u=Q.get(e,"display")}c=w.css(e,"display");if(c==="none"){if(u){c=u}else{pe([e],true);u=e.style.display||u;c=w.css(e,"display");pe([e])}}if(c==="inline"||c==="inline-block"&&u!=null){if(w.css(e,"float")==="none"){if(!l){f.done((function(){h.display=u}));if(u==null){c=h.display;u=c==="none"?"":c}}h.display="inline-block"}}}if(i.overflow){h.overflow="hidden";f.always((function(){h.overflow=i.overflow[0];h.overflowX=i.overflow[1];h.overflowY=i.overflow[2]}))}l=false;for(n in p){if(!l){if(m){if("hidden"in m){g=m.hidden}}else{m=Q.access(e,"fxshow",{display:u})}if(o){m.hidden=!g}if(g){pe([e],true)}f.done((function(){if(!g){pe([e])}Q.remove(e,"fxshow");for(n in p){w.style(e,n,p[n])}}))}l=pt(g?m[n]:0,n,f);if(!(n in m)){m[n]=l.start;if(g){l.end=l.start;l.start=0}}}}function gt(e,t){var i,n,r,o,a;for(i in e){n=q(i);r=t[n];o=e[i];if(Array.isArray(o)){r=o[1];o=e[i]=o[0]}if(i!==n){e[n]=o;delete e[i]}a=w.cssHooks[n];if(a&&"expand"in a){o=a.expand(o);delete e[n];for(i in o){if(!(i in e)){e[i]=o[i];t[i]=r}}}else{t[n]=r}}}function mt(e,t,i){var n,r,o=0,a=mt.prefilters.length,s=w.Deferred().always((function(){delete l.elem})),l=function(){if(r){return false}var t=at||dt(),i=Math.max(0,u.startTime+u.duration-t),n=i/u.duration||0,o=1-n,a=0,l=u.tweens.length;for(;a<l;a++){u.tweens[a].run(o)}s.notifyWith(e,[u,o,i]);if(o<1&&l){return i}if(!l){s.notifyWith(e,[u,1,0])}s.resolveWith(e,[u]);return false},u=s.promise({elem:e,props:w.extend({},t),opts:w.extend(true,{specialEasing:{},easing:w.easing._default},i),originalProperties:t,originalOptions:i,startTime:at||dt(),duration:i.duration,tweens:[],createTween:function(t,i){var n=w.Tween(e,u.opts,t,i,u.opts.specialEasing[t]||u.opts.easing);u.tweens.push(n);return n},stop:function(t){var i=0,n=t?u.tweens.length:0;if(r){return this}r=true;for(;i<n;i++){u.tweens[i].run(1)}if(t){s.notifyWith(e,[u,1,0]);s.resolveWith(e,[u,t])}else{s.rejectWith(e,[u,t])}return this}}),c=u.props;gt(c,u.opts.specialEasing);for(;o<a;o++){n=mt.prefilters[o].call(u,e,c,u.opts);if(n){if(h(n.stop)){w._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)}return n}}w.map(c,pt,u);if(h(u.opts.start)){u.opts.start.call(e,u)}u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always);w.fx.timer(w.extend(l,{elem:e,anim:u,queue:u.opts.queue}));return u}w.Animation=w.extend(mt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);ce(i.elem,e,re.exec(t),i);return i}]},tweener:function(e,t){if(h(e)){t=e;e=["*"]}else{e=e.match(L)}var i,n=0,r=e.length;for(;n<r;n++){i=e[n];mt.tweeners[i]=mt.tweeners[i]||[];mt.tweeners[i].unshift(t)}},prefilters:[ht],prefilter:function(e,t){if(t){mt.prefilters.unshift(e)}else{mt.prefilters.push(e)}}});w.speed=function(e,t,i){var n=e&&typeof e==="object"?w.extend({},e):{complete:i||!i&&t||h(e)&&e,duration:e,easing:i&&t||t&&!h(t)&&t};if(w.fx.off){n.duration=0}else{if(typeof n.duration!=="number"){if(n.duration in w.fx.speeds){n.duration=w.fx.speeds[n.duration]}else{n.duration=w.fx.speeds._default}}}if(n.queue==null||n.queue===true){n.queue="fx"}n.old=n.complete;n.complete=function(){if(h(n.old)){n.old.call(this)}if(n.queue){w.dequeue(this,n.queue)}};return n};w.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ue).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=w.isEmptyObject(e),o=w.speed(t,i,n),a=function(){var t=mt(this,w.extend({},e),o);if(r||Q.get(this,"finish")){t.stop(true)}};a.finish=a;return r||o.queue===false?this.each(a):this.queue(o.queue,a)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop;t(i)};if(typeof e!=="string"){i=t;t=e;e=undefined}if(t){this.queue(e||"fx",[])}return this.each((function(){var t=true,r=e!=null&&e+"queueHooks",o=w.timers,a=Q.get(this);if(r){if(a[r]&&a[r].stop){n(a[r])}}else{for(r in a){if(a[r]&&a[r].stop&&ut.test(r)){n(a[r])}}}for(r=o.length;r--;){if(o[r].elem===this&&(e==null||o[r].queue===e)){o[r].anim.stop(i);t=false;o.splice(r,1)}}if(t||!i){w.dequeue(this,e)}}))},finish:function(e){if(e!==false){e=e||"fx"}return this.each((function(){var t,i=Q.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],o=w.timers,a=n?n.length:0;i.finish=true;w.queue(this,e,[]);if(r&&r.stop){r.stop.call(this,true)}for(t=o.length;t--;){if(o[t].elem===this&&o[t].queue===e){o[t].anim.stop(true);o.splice(t,1)}}for(t=0;t<a;t++){if(n[t]&&n[t].finish){n[t].finish.call(this)}}delete i.finish}))}});w.each(["toggle","show","hide"],(function(e,t){var i=w.fn[t];w.fn[t]=function(e,n,r){return e==null||typeof e==="boolean"?i.apply(this,arguments):this.animate(ft(t,true),e,n,r)}}));w.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){w.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}));w.timers=[];w.fx.tick=function(){var e,t=0,i=w.timers;at=Date.now();for(;t<i.length;t++){e=i[t];if(!e()&&i[t]===e){i.splice(t--,1)}}if(!i.length){w.fx.stop()}at=undefined};w.fx.timer=function(e){w.timers.push(e);w.fx.start()};w.fx.interval=13;w.fx.start=function(){if(st){return}st=true;ct()};w.fx.stop=function(){st=null};w.fx.speeds={slow:600,fast:200,_default:400};w.fn.delay=function(t,i){t=w.fx?w.fx.speeds[t]||t:t;i=i||"fx";return this.queue(i,(function(i,n){var r=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(r)}}))};(function(){var e=m.createElement("input"),t=m.createElement("select"),i=t.appendChild(m.createElement("option"));e.type="checkbox";p.checkOn=e.value!=="";p.optSelected=i.selected;e=m.createElement("input");e.value="t";e.type="radio";p.radioValue=e.value==="t"})();var vt,yt=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return V(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){w.removeAttr(this,e)}))}});w.extend({attr:function(e,t,i){var n,r,o=e.nodeType;if(o===3||o===8||o===2){return}if(typeof e.getAttribute==="undefined"){return w.prop(e,t,i)}if(o!==1||!w.isXMLDoc(e)){r=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?vt:undefined)}if(i!==undefined){if(i===null){w.removeAttr(e,t);return}if(r&&"set"in r&&(n=r.set(e,i,t))!==undefined){return n}e.setAttribute(t,i+"");return i}if(r&&"get"in r&&(n=r.get(e,t))!==null){return n}n=w.find.attr(e,t);return n==null?undefined:n},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&t==="radio"&&S(e,"input")){var i=e.value;e.setAttribute("type",t);if(i){e.value=i}return t}}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(L);if(r&&e.nodeType===1){while(i=r[n++]){e.removeAttribute(i)}}}});vt={set:function(e,t,i){if(t===false){w.removeAttr(e,i)}else{e.setAttribute(i,i)}return i}};w.each(w.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=yt[t]||w.find.attr;yt[t]=function(e,t,n){var r,o,a=t.toLowerCase();if(!n){o=yt[a];yt[a]=r;r=i(e,t,n)!=null?a:null;yt[a]=o}return r}}));var bt=/^(?:input|select|textarea|button)$/i,_t=/^(?:a|area)$/i;w.fn.extend({prop:function(e,t){return V(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[w.propFix[e]||e]}))}});w.extend({prop:function(e,t,i){var n,r,o=e.nodeType;if(o===3||o===8||o===2){return}if(o!==1||!w.isXMLDoc(e)){t=w.propFix[t]||t;r=w.propHooks[t]}if(i!==undefined){if(r&&"set"in r&&(n=r.set(e,i,t))!==undefined){return n}return e[t]=i}if(r&&"get"in r&&(n=r.get(e,t))!==null){return n}return e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");if(t){return parseInt(t,10)}if(bt.test(e.nodeName)||_t.test(e.nodeName)&&e.href){return 0}return-1}}},propFix:{for:"htmlFor",class:"className"}});if(!p.optSelected){w.propHooks.selected={get:function(e){var t=e.parentNode;if(t&&t.parentNode){t.parentNode.selectedIndex}return null},set:function(e){var t=e.parentNode;if(t){t.selectedIndex;if(t.parentNode){t.parentNode.selectedIndex}}}}}w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){w.propFix[this.toLowerCase()]=this}));function wt(e){var t=e.match(L)||[];return t.join(" ")}function Ct(e){return e.getAttribute&&e.getAttribute("class")||""}function At(e){if(Array.isArray(e)){return e}if(typeof e==="string"){return e.match(L)||[]}return[]}w.fn.extend({addClass:function(e){var t,i,n,r,o,a,s,l=0;if(h(e)){return this.each((function(t){w(this).addClass(e.call(this,t,Ct(this)))}))}t=At(e);if(t.length){while(i=this[l++]){r=Ct(i);n=i.nodeType===1&&" "+wt(r)+" ";if(n){a=0;while(o=t[a++]){if(n.indexOf(" "+o+" ")<0){n+=o+" "}}s=wt(n);if(r!==s){i.setAttribute("class",s)}}}}return this},removeClass:function(e){var t,i,n,r,o,a,s,l=0;if(h(e)){return this.each((function(t){w(this).removeClass(e.call(this,t,Ct(this)))}))}if(!arguments.length){return this.attr("class","")}t=At(e);if(t.length){while(i=this[l++]){r=Ct(i);n=i.nodeType===1&&" "+wt(r)+" ";if(n){a=0;while(o=t[a++]){while(n.indexOf(" "+o+" ")>-1){n=n.replace(" "+o+" "," ")}}s=wt(n);if(r!==s){i.setAttribute("class",s)}}}}return this},toggleClass:function(e,t){var i=typeof e,n=i==="string"||Array.isArray(e);if(typeof t==="boolean"&&n){return t?this.addClass(e):this.removeClass(e)}if(h(e)){return this.each((function(i){w(this).toggleClass(e.call(this,i,Ct(this),t),t)}))}return this.each((function(){var t,r,o,a;if(n){r=0;o=w(this);a=At(e);while(t=a[r++]){if(o.hasClass(t)){o.removeClass(t)}else{o.addClass(t)}}}else if(e===undefined||i==="boolean"){t=Ct(this);if(t){Q.set(this,"__className__",t)}if(this.setAttribute){this.setAttribute("class",t||e===false?"":Q.get(this,"__className__")||"")}}}))},hasClass:function(e){var t,i,n=0;t=" "+e+" ";while(i=this[n++]){if(i.nodeType===1&&(" "+wt(Ct(i))+" ").indexOf(t)>-1){return true}}return false}});var Et=/\r/g;w.fn.extend({val:function(e){var t,i,n,r=this[0];if(!arguments.length){if(r){t=w.valHooks[r.type]||w.valHooks[r.nodeName.toLowerCase()];if(t&&"get"in t&&(i=t.get(r,"value"))!==undefined){return i}i=r.value;if(typeof i==="string"){return i.replace(Et,"")}return i==null?"":i}return}n=h(e);return this.each((function(i){var r;if(this.nodeType!==1){return}if(n){r=e.call(this,i,w(this).val())}else{r=e}if(r==null){r=""}else if(typeof r==="number"){r+=""}else if(Array.isArray(r)){r=w.map(r,(function(e){return e==null?"":e+""}))}t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,r,"value")===undefined){this.value=r}}))}});w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return t!=null?t:wt(w.text(e))}},select:{get:function(e){var t,i,n,r=e.options,o=e.selectedIndex,a=e.type==="select-one",s=a?null:[],l=a?o+1:r.length;if(o<0){n=l}else{n=a?o:0}for(;n<l;n++){i=r[n];if((i.selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!S(i.parentNode,"optgroup"))){t=w(i).val();if(a){return t}s.push(t)}}return s},set:function(e,t){var i,n,r=e.options,o=w.makeArray(t),a=r.length;while(a--){n=r[a];if(n.selected=w.inArray(w.valHooks.option.get(n),o)>-1){i=true}}if(!i){e.selectedIndex=-1}return o}}}});w.each(["radio","checkbox"],(function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t)){return e.checked=w.inArray(w(e).val(),t)>-1}}};if(!p.checkOn){w.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}}));p.focusin="onfocusin"in e;var xt=/^(?:focusinfocus|focusoutblur)$/,Tt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,i,n,r){var o,a,s,l,u,d,f,p,v=[n||m],y=c.call(t,"type")?t.type:t,b=c.call(t,"namespace")?t.namespace.split("."):[];a=p=s=n=n||m;if(n.nodeType===3||n.nodeType===8){return}if(xt.test(y+w.event.triggered)){return}if(y.indexOf(".")>-1){b=y.split(".");y=b.shift();b.sort()}u=y.indexOf(":")<0&&"on"+y;t=t[w.expando]?t:new w.Event(y,typeof t==="object"&&t);t.isTrigger=r?2:3;t.namespace=b.join(".");t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;t.result=undefined;if(!t.target){t.target=n}i=i==null?[t]:w.makeArray(i,[t]);f=w.event.special[y]||{};if(!r&&f.trigger&&f.trigger.apply(n,i)===false){return}if(!r&&!f.noBubble&&!g(n)){l=f.delegateType||y;if(!xt.test(l+y)){a=a.parentNode}for(;a;a=a.parentNode){v.push(a);s=a}if(s===(n.ownerDocument||m)){v.push(s.defaultView||s.parentWindow||e)}}o=0;while((a=v[o++])&&!t.isPropagationStopped()){p=a;t.type=o>1?l:f.bindType||y;d=(Q.get(a,"events")||Object.create(null))[t.type]&&Q.get(a,"handle");if(d){d.apply(a,i)}d=u&&a[u];if(d&&d.apply&&X(a)){t.result=d.apply(a,i);if(t.result===false){t.preventDefault()}}}t.type=y;if(!r&&!t.isDefaultPrevented()){if((!f._default||f._default.apply(v.pop(),i)===false)&&X(n)){if(u&&h(n[y])&&!g(n)){s=n[u];if(s){n[u]=null}w.event.triggered=y;if(t.isPropagationStopped()){p.addEventListener(y,Tt)}n[y]();if(t.isPropagationStopped()){p.removeEventListener(y,Tt)}w.event.triggered=undefined;if(s){n[u]=s}}}}return t.result},simulate:function(e,t,i){var n=w.extend(new w.Event,i,{type:e,isSimulated:true});w.event.trigger(n,null,t)}});w.fn.extend({trigger:function(e,t){return this.each((function(){w.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];if(i){return w.event.trigger(e,t,i,true)}}});if(!p.focusin){w.each({focus:"focusin",blur:"focusout"},(function(e,t){var i=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,r=Q.access(n,t);if(!r){n.addEventListener(e,i,true)}Q.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,r=Q.access(n,t)-1;if(!r){n.removeEventListener(e,i,true);Q.remove(n,t)}else{Q.access(n,t,r)}}}}))}var St=e.location;var Dt={guid:Date.now()};var kt=/\?/;w.parseXML=function(t){var i;if(!t||typeof t!=="string"){return null}try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){i=undefined}if(!i||i.getElementsByTagName("parsererror").length){w.error("Invalid XML: "+t)}return i};var Ot=/\[\]$/,Rt=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;function It(e,t,i,n){var r;if(Array.isArray(t)){w.each(t,(function(t,r){if(i||Ot.test(e)){n(e,r)}else{It(e+"["+(typeof r==="object"&&r!=null?t:"")+"]",r,i,n)}}))}else if(!i&&b(t)==="object"){for(r in t){It(e+"["+r+"]",t[r],i,n)}}else{n(e,t)}}w.param=function(e,t){var i,n=[],r=function(e,t){var i=h(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(i==null?"":i)};if(e==null){return""}if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e)){w.each(e,(function(){r(this.name,this.value)}))}else{for(i in e){It(i,e[i],t,r)}}return n.join("&")};w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&Pt.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!he.test(e))})).map((function(e,t){var i=w(this).val();if(i==null){return null}if(Array.isArray(i)){return w.map(i,(function(e){return{name:t.name,value:e.replace(Rt,"\r\n")}}))}return{name:t.name,value:i.replace(Rt,"\r\n")}})).get()}});var Mt=/%20/g,Lt=/#.*$/,Ft=/([?&])_=[^&]*/,Gt=/^(.*?):[ \t]*([^\r\n]*)$/gm,$t=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Wt=/^(?:GET|HEAD)$/,Ht=/^\/\//,jt={},Bt={},Vt="*/".concat("*"),zt=m.createElement("a");zt.href=St.href;function Ut(e){return function(t,i){if(typeof t!=="string"){i=t;t="*"}var n,r=0,o=t.toLowerCase().match(L)||[];if(h(i)){while(n=o[r++]){if(n[0]==="+"){n=n.slice(1)||"*";(e[n]=e[n]||[]).unshift(i)}else{(e[n]=e[n]||[]).push(i)}}}}}function Yt(e,t,i,n){var r={},o=e===Bt;function a(s){var l;r[s]=true;w.each(e[s]||[],(function(e,s){var u=s(t,i,n);if(typeof u==="string"&&!o&&!r[u]){t.dataTypes.unshift(u);a(u);return false}else if(o){return!(l=u)}}));return l}return a(t.dataTypes[0])||!r["*"]&&a("*")}function qt(e,t){var i,n,r=w.ajaxSettings.flatOptions||{};for(i in t){if(t[i]!==undefined){(r[i]?e:n||(n={}))[i]=t[i]}}if(n){w.extend(true,e,n)}return e}function Xt(e,t,i){var n,r,o,a,s=e.contents,l=e.dataTypes;while(l[0]==="*"){l.shift();if(n===undefined){n=e.mimeType||t.getResponseHeader("Content-Type")}}if(n){for(r in s){if(s[r]&&s[r].test(n)){l.unshift(r);break}}}if(l[0]in i){o=l[0]}else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}if(!a){a=r}}o=o||a}if(o){if(o!==l[0]){l.unshift(o)}return i[o]}}function Kt(e,t,i,n){var r,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1]){for(a in e.converters){u[a.toLowerCase()]=e.converters[a]}}o=c.shift();while(o){if(e.responseFields[o]){i[e.responseFields[o]]=t}if(!l&&n&&e.dataFilter){t=e.dataFilter(t,e.dataType)}l=o;o=c.shift();if(o){if(o==="*"){o=l}else if(l!=="*"&&l!==o){a=u[l+" "+o]||u["* "+o];if(!a){for(r in u){s=r.split(" ");if(s[1]===o){a=u[l+" "+s[0]]||u["* "+s[0]];if(a){if(a===true){a=u[r]}else if(u[r]!==true){o=s[0];c.unshift(s[1])}break}}}}if(a!==true){if(a&&e.throws){t=a(t)}else{try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}}}}}return{state:"success",data:t}}w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:St.href,type:"GET",isLocal:$t.test(St.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(e,t){return t?qt(qt(e,w.ajaxSettings),t):qt(w.ajaxSettings,e)},ajaxPrefilter:Ut(jt),ajaxTransport:Ut(Bt),ajax:function(t,i){if(typeof t==="object"){i=t;t=undefined}i=i||{};var n,r,o,a,s,l,u,c,d,f,p=w.ajaxSetup({},i),h=p.context||p,g=p.context&&(h.nodeType||h.jquery)?w(h):w.event,v=w.Deferred(),y=w.Callbacks("once memory"),b=p.statusCode||{},_={},C={},A="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(u){if(!a){a={};while(t=Gt.exec(o)){a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2])}}t=a[e.toLowerCase()+" "]}return t==null?null:t.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(e,t){if(u==null){e=C[e.toLowerCase()]=C[e.toLowerCase()]||e;_[e]=t}return this},overrideMimeType:function(e){if(u==null){p.mimeType=e}return this},statusCode:function(e){var t;if(e){if(u){E.always(e[E.status])}else{for(t in e){b[t]=[b[t],e[t]]}}}return this},abort:function(e){var t=e||A;if(n){n.abort(t)}x(0,t);return this}};v.promise(E);p.url=((t||p.url||St.href)+"").replace(Ht,St.protocol+"//");p.type=i.method||i.type||p.method||p.type;p.dataTypes=(p.dataType||"*").toLowerCase().match(L)||[""];if(p.crossDomain==null){l=m.createElement("a");try{l.href=p.url;l.href=l.href;p.crossDomain=zt.protocol+"//"+zt.host!==l.protocol+"//"+l.host}catch(e){p.crossDomain=true}}if(p.data&&p.processData&&typeof p.data!=="string"){p.data=w.param(p.data,p.traditional)}Yt(jt,p,i,E);if(u){return E}c=w.event&&p.global;if(c&&w.active++===0){w.event.trigger("ajaxStart")}p.type=p.type.toUpperCase();p.hasContent=!Wt.test(p.type);r=p.url.replace(Lt,"");if(!p.hasContent){f=p.url.slice(r.length);if(p.data&&(p.processData||typeof p.data==="string")){r+=(kt.test(r)?"&":"?")+p.data;delete p.data}if(p.cache===false){r=r.replace(Ft,"$1");f=(kt.test(r)?"&":"?")+"_="+Dt.guid+++f}p.url=r+f}else if(p.data&&p.processData&&(p.contentType||"").indexOf("application/x-www-form-urlencoded")===0){p.data=p.data.replace(Mt,"+")}if(p.ifModified){if(w.lastModified[r]){E.setRequestHeader("If-Modified-Since",w.lastModified[r])}if(w.etag[r]){E.setRequestHeader("If-None-Match",w.etag[r])}}if(p.data&&p.hasContent&&p.contentType!==false||i.contentType){E.setRequestHeader("Content-Type",p.contentType)}E.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+(p.dataTypes[0]!=="*"?", "+Vt+"; q=0.01":""):p.accepts["*"]);for(d in p.headers){E.setRequestHeader(d,p.headers[d])}if(p.beforeSend&&(p.beforeSend.call(h,E,p)===false||u)){return E.abort()}A="abort";y.add(p.complete);E.done(p.success);E.fail(p.error);n=Yt(Bt,p,i,E);if(!n){x(-1,"No Transport")}else{E.readyState=1;if(c){g.trigger("ajaxSend",[E,p])}if(u){return E}if(p.async&&p.timeout>0){s=e.setTimeout((function(){E.abort("timeout")}),p.timeout)}try{u=false;n.send(_,x)}catch(e){if(u){throw e}x(-1,e)}}function x(t,i,a,l){var d,f,m,_,C,A=i;if(u){return}u=true;if(s){e.clearTimeout(s)}n=undefined;o=l||"";E.readyState=t>0?4:0;d=t>=200&&t<300||t===304;if(a){_=Xt(p,E,a)}if(!d&&w.inArray("script",p.dataTypes)>-1){p.converters["text script"]=function(){}}_=Kt(p,_,E,d);if(d){if(p.ifModified){C=E.getResponseHeader("Last-Modified");if(C){w.lastModified[r]=C}C=E.getResponseHeader("etag");if(C){w.etag[r]=C}}if(t===204||p.type==="HEAD"){A="nocontent"}else if(t===304){A="notmodified"}else{A=_.state;f=_.data;m=_.error;d=!m}}else{m=A;if(t||!A){A="error";if(t<0){t=0}}}E.status=t;E.statusText=(i||A)+"";if(d){v.resolveWith(h,[f,A,E])}else{v.rejectWith(h,[E,A,m])}E.statusCode(b);b=undefined;if(c){g.trigger(d?"ajaxSuccess":"ajaxError",[E,p,d?f:m])}y.fireWith(h,[E,A]);if(c){g.trigger("ajaxComplete",[E,p]);if(! --w.active){w.event.trigger("ajaxStop")}}}return E},getJSON:function(e,t,i){return w.get(e,t,i,"json")},getScript:function(e,t){return w.get(e,undefined,t,"script")}});w.each(["get","post"],(function(e,t){w[t]=function(e,i,n,r){if(h(i)){r=r||n;n=i;i=undefined}return w.ajax(w.extend({url:e,type:t,dataType:r,data:i,success:n},w.isPlainObject(e)&&e))}}));w.ajaxPrefilter((function(e){var t;for(t in e.headers){if(t.toLowerCase()==="content-type"){e.contentType=e.headers[t]||""}}}));w._evalUrl=function(e,t,i){return w.ajax({url:e,type:"GET",dataType:"script",cache:true,async:false,global:false,converters:{"text script":function(){}},dataFilter:function(e){w.globalEval(e,t,i)}})};w.fn.extend({wrapAll:function(e){var t;if(this[0]){if(h(e)){e=e.call(this[0])}t=w(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){t.insertBefore(this[0])}t.map((function(){var e=this;while(e.firstElementChild){e=e.firstElementChild}return e})).append(this)}return this},wrapInner:function(e){if(h(e)){return this.each((function(t){w(this).wrapInner(e.call(this,t))}))}return this.each((function(){var t=w(this),i=t.contents();if(i.length){i.wrapAll(e)}else{t.append(e)}}))},wrap:function(e){var t=h(e);return this.each((function(i){w(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(e){this.parent(e).not("body").each((function(){w(this).replaceWith(this.childNodes)}));return this}});w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)};w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)};w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Qt={0:200,1223:204},Zt=w.ajaxSettings.xhr();p.cors=!!Zt&&"withCredentials"in Zt;p.ajax=Zt=!!Zt;w.ajaxTransport((function(t){var i,n;if(p.cors||Zt&&!t.crossDomain){return{send:function(r,o){var a,s=t.xhr();s.open(t.type,t.url,t.async,t.username,t.password);if(t.xhrFields){for(a in t.xhrFields){s[a]=t.xhrFields[a]}}if(t.mimeType&&s.overrideMimeType){s.overrideMimeType(t.mimeType)}if(!t.crossDomain&&!r["X-Requested-With"]){r["X-Requested-With"]="XMLHttpRequest"}for(a in r){s.setRequestHeader(a,r[a])}i=function(e){return function(){if(i){i=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null;if(e==="abort"){s.abort()}else if(e==="error"){if(typeof s.status!=="number"){o(0,"error")}else{o(s.status,s.statusText)}}else{o(Qt[s.status]||s.status,s.statusText,(s.responseType||"text")!=="text"||typeof s.responseText!=="string"?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders())}}}};s.onload=i();n=s.onerror=s.ontimeout=i("error");if(s.onabort!==undefined){s.onabort=n}else{s.onreadystatechange=function(){if(s.readyState===4){e.setTimeout((function(){if(i){n()}}))}}}i=i("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(i){throw e}}},abort:function(){if(i){i()}}}}}));w.ajaxPrefilter((function(e){if(e.crossDomain){e.contents.script=false}}));w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){w.globalEval(e);return e}}});w.ajaxPrefilter("script",(function(e){if(e.cache===undefined){e.cache=false}if(e.crossDomain){e.type="GET"}}));w.ajaxTransport("script",(function(e){if(e.crossDomain||e.scriptAttrs){var t,i;return{send:function(n,r){t=w("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove();i=null;if(e){r(e.type==="error"?404:200,e.type)}});m.head.appendChild(t[0])},abort:function(){if(i){i()}}}}}));var Jt=[],ei=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Jt.pop()||w.expando+"_"+Dt.guid++;this[e]=true;return e}});w.ajaxPrefilter("json jsonp",(function(t,i,n){var r,o,a,s=t.jsonp!==false&&(ei.test(t.url)?"url":typeof t.data==="string"&&(t.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&ei.test(t.data)&&"data");if(s||t.dataTypes[0]==="jsonp"){r=t.jsonpCallback=h(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback;if(s){t[s]=t[s].replace(ei,"$1"+r)}else if(t.jsonp!==false){t.url+=(kt.test(t.url)?"&":"?")+t.jsonp+"="+r}t.converters["script json"]=function(){if(!a){w.error(r+" was not called")}return a[0]};t.dataTypes[0]="json";o=e[r];e[r]=function(){a=arguments};n.always((function(){if(o===undefined){w(e).removeProp(r)}else{e[r]=o}if(t[r]){t.jsonpCallback=i.jsonpCallback;Jt.push(r)}if(a&&h(o)){o(a[0])}a=o=undefined}));return"script"}}));p.createHTMLDocument=function(){var e=m.implementation.createHTMLDocument("").body;e.innerHTML="<form></form><form></form>";return e.childNodes.length===2}();w.parseHTML=function(e,t,i){if(typeof e!=="string"){return[]}if(typeof t==="boolean"){i=t;t=false}var n,r,o;if(!t){if(p.createHTMLDocument){t=m.implementation.createHTMLDocument("");n=t.createElement("base");n.href=m.location.href;t.head.appendChild(n)}else{t=m}}r=D.exec(e);o=!i&&[];if(r){return[t.createElement(r[1])]}r=we([e],t,o);if(o&&o.length){w(o).remove()}return w.merge([],r.childNodes)};w.fn.load=function(e,t,i){var n,r,o,a=this,s=e.indexOf(" ");if(s>-1){n=wt(e.slice(s));e=e.slice(0,s)}if(h(t)){i=t;t=undefined}else if(t&&typeof t==="object"){r="POST"}if(a.length>0){w.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done((function(e){o=arguments;a.html(n?w("<div>").append(w.parseHTML(e)).find(n):e)})).always(i&&function(e,t){a.each((function(){i.apply(this,o||[e.responseText,t,e])}))})}return this};w.expr.pseudos.animated=function(e){return w.grep(w.timers,(function(t){return e===t.elem})).length};w.offset={setOffset:function(e,t,i){var n,r,o,a,s,l,u,c=w.css(e,"position"),d=w(e),f={};if(c==="static"){e.style.position="relative"}s=d.offset();o=w.css(e,"top");l=w.css(e,"left");u=(c==="absolute"||c==="fixed")&&(o+l).indexOf("auto")>-1;if(u){n=d.position();a=n.top;r=n.left}else{a=parseFloat(o)||0;r=parseFloat(l)||0}if(h(t)){t=t.call(e,i,w.extend({},s))}if(t.top!=null){f.top=t.top-s.top+a}if(t.left!=null){f.left=t.left-s.left+r}if("using"in t){t.using.call(e,f)}else{if(typeof f.top==="number"){f.top+="px"}if(typeof f.left==="number"){f.left+="px"}d.css(f)}}};w.fn.extend({offset:function(e){if(arguments.length){return e===undefined?this:this.each((function(t){w.offset.setOffset(this,e,t)}))}var t,i,n=this[0];if(!n){return}if(!n.getClientRects().length){return{top:0,left:0}}t=n.getBoundingClientRect();i=n.ownerDocument.defaultView;return{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}},position:function(){if(!this[0]){return}var e,t,i,n=this[0],r={top:0,left:0};if(w.css(n,"position")==="fixed"){t=n.getBoundingClientRect()}else{t=this.offset();i=n.ownerDocument;e=n.offsetParent||i.documentElement;while(e&&(e===i.body||e===i.documentElement)&&w.css(e,"position")==="static"){e=e.parentNode}if(e&&e!==n&&e.nodeType===1){r=w(e).offset();r.top+=w.css(e,"borderTopWidth",true);r.left+=w.css(e,"borderLeftWidth",true)}}return{top:t.top-r.top-w.css(n,"marginTop",true),left:t.left-r.left-w.css(n,"marginLeft",true)}},offsetParent:function(){return this.map((function(){var e=this.offsetParent;while(e&&w.css(e,"position")==="static"){e=e.offsetParent}return e||ae}))}});w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i="pageYOffset"===t;w.fn[e]=function(n){return V(this,(function(e,n,r){var o;if(g(e)){o=e}else if(e.nodeType===9){o=e.defaultView}if(r===undefined){return o?o[t]:e[n]}if(o){o.scrollTo(!i?r:o.pageXOffset,i?r:o.pageYOffset)}else{e[n]=r}}),e,n,arguments.length)}}));w.each(["top","left"],(function(e,t){w.cssHooks[t]=Ue(p.pixelPosition,(function(e,i){if(i){i=ze(e,t);return He.test(i)?w(e).position()[t]+"px":i}}))}));w.each({Height:"height",Width:"width"},(function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,n){w.fn[n]=function(r,o){var a=arguments.length&&(i||typeof r!=="boolean"),s=i||(r===true||o===true?"margin":"border");return V(this,(function(t,i,r){var o;if(g(t)){return n.indexOf("outer")===0?t["inner"+e]:t.document.documentElement["client"+e]}if(t.nodeType===9){o=t.documentElement;return Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])}return r===undefined?w.css(t,i,s):w.style(t,i,r,s)}),t,a?r:undefined,a)}}))}));w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){w.fn[t]=function(e){return this.on(t,e)}}));w.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});w.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),(function(e,t){w.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}));var ti=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.proxy=function(e,t){var i,n,o;if(typeof t==="string"){i=e[t];t=e;e=i}if(!h(e)){return undefined}n=r.call(arguments,2);o=function(){return e.apply(t||this,n.concat(r.call(arguments)))};o.guid=e.guid=e.guid||w.guid++;return o};w.holdReady=function(e){if(e){w.readyWait++}else{w.ready(true)}};w.isArray=Array.isArray;w.parseJSON=JSON.parse;w.nodeName=S;w.isFunction=h;w.isWindow=g;w.camelCase=q;w.type=b;w.now=Date.now;w.isNumeric=function(e){var t=w.type(e);return(t==="number"||t==="string")&&!isNaN(e-parseFloat(e))};w.trim=function(e){return e==null?"":(e+"").replace(ti,"")};if(typeof define==="function"&&define.amd){define("jquery",[],(function(){return w}))}var ii=e.jQuery,ni=e.$;w.noConflict=function(t){if(e.$===w){e.$=ni}if(t&&e.jQuery===w){e.jQuery=ii}return w};if(typeof t==="undefined"){e.jQuery=e.$=w}return w}));(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})((function(e){"use strict";e.ui=e.ui||{};var t=e.ui.version="1.14.1";var i=0;var n=Array.prototype.hasOwnProperty;var r=Array.prototype.slice;e.cleanData=function(t){return function(i){var n,r,o;for(o=0;(r=i[o])!=null;o++){n=e._data(r,"events");if(n&&n.remove){e(r).triggerHandler("remove")}}t(i)}}(e.cleanData);e.widget=function(t,i,n){var r,o,a;var s={};var l=t.split(".")[0];t=t.split(".")[1];if(t==="__proto__"||t==="constructor"){return e.error("Invalid widget name: "+t)}var u=l+"-"+t;if(!n){n=i;i=e.Widget}if(Array.isArray(n)){n=e.extend.apply(null,[{}].concat(n))}e.expr.pseudos[u.toLowerCase()]=function(t){return!!e.data(t,u)};e[l]=e[l]||{};r=e[l][t];o=e[l][t]=function(e,t){if(!this||!this._createWidget){return new o(e,t)}if(arguments.length){this._createWidget(e,t)}};e.extend(o,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]});a=new i;a.options=e.widget.extend({},a.options);e.each(n,(function(e,t){if(typeof t!=="function"){s[e]=t;return}s[e]=function(){function n(){return i.prototype[e].apply(this,arguments)}function r(t){return i.prototype[e].apply(this,t)}return function(){var e=this._super;var i=this._superApply;var o;this._super=n;this._superApply=r;o=t.apply(this,arguments);this._super=e;this._superApply=i;return o}}()}));o.prototype=e.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix||t:t},s,{constructor:o,namespace:l,widgetName:t,widgetFullName:u});if(r){e.each(r._childConstructors,(function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,o,i._proto)}));delete r._childConstructors}else{i._childConstructors.push(o)}e.widget.bridge(t,o);return o};e.widget.extend=function(t){var i=r.call(arguments,1);var o=0;var a=i.length;var s;var l;for(;o<a;o++){for(s in i[o]){l=i[o][s];if(n.call(i[o],s)&&l!==undefined){if(e.isPlainObject(l)){t[s]=e.isPlainObject(t[s])?e.widget.extend({},t[s],l):e.widget.extend({},l)}else{t[s]=l}}}}return t};e.widget.bridge=function(t,i){var n=i.prototype.widgetFullName||t;e.fn[t]=function(o){var a=typeof o==="string";var s=r.call(arguments,1);var l=this;if(a){if(!this.length&&o==="instance"){l=undefined}else{this.each((function(){var i;var r=e.data(this,n);if(o==="instance"){l=r;return false}if(!r){return e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+o+"'")}if(typeof r[o]!=="function"||o.charAt(0)==="_"){return e.error("no such method '"+o+"' for "+t+" widget instance")}i=r[o].apply(r,s);if(i!==r&&i!==undefined){l=i&&i.jquery?l.pushStack(i.get()):i;return false}}))}}else{if(s.length){o=e.widget.extend.apply(null,[o].concat(s))}this.each((function(){var t=e.data(this,n);if(t){t.option(o||{});if(t._init){t._init()}}else{e.data(this,n,new i(o,this))}}))}return l}};e.Widget=function(){};e.Widget._childConstructors=[];e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:false,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0];this.element=e(n);this.uuid=i++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=e();this.hoverable=e();this.focusable=e();this.classesElementLookup={};if(n!==this){e.data(n,this.widgetFullName,this);this._on(true,this.element,{remove:function(e){if(e.target===n){this.destroy()}}});this.document=e(n.style?n.ownerDocument:n.document||n);this.window=e(this.document[0].defaultView||this.document[0].parentWindow)}this.options=e.widget.extend({},this.options,this._getCreateOptions(),t);this._create();if(this.options.disabled){this._setOptionDisabled(this.options.disabled)}this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy();e.each(this.classesElementLookup,(function(e,i){t._removeClass(i,e)}));this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n=t;var r;var o;var a;if(arguments.length===0){return e.widget.extend({},this.options)}if(typeof t==="string"){n={};r=t.split(".");t=r.shift();if(r.length){o=n[t]=e.widget.extend({},this.options[t]);for(a=0;a<r.length-1;a++){o[r[a]]=o[r[a]]||{};o=o[r[a]]}t=r.pop();if(arguments.length===1){return o[t]===undefined?null:o[t]}o[t]=i}else{if(arguments.length===1){return this.options[t]===undefined?null:this.options[t]}n[t]=i}}this._setOptions(n);return this},_setOptions:function(e){var t;for(t in e){this._setOption(t,e[t])}return this},_setOption:function(e,t){if(e==="classes"){this._setOptionClasses(t)}this.options[e]=t;if(e==="disabled"){this._setOptionDisabled(t)}return this},_setOptionClasses:function(t){var i,n,r;for(i in t){r=this.classesElementLookup[i];if(t[i]===this.options.classes[i]||!r||!r.length){continue}n=e(r.get());this._removeClass(r,i);n.addClass(this._classes({element:n,keys:i,classes:t,add:true}))}},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e);if(e){this._removeClass(this.hoverable,null,"ui-state-hover");this._removeClass(this.focusable,null,"ui-state-focus")}},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_classes:function(t){var i=[];var n=this;t=e.extend({element:this.element,classes:this.options.classes||{}},t);function r(){var i=[];t.element.each((function(t,r){var o=e.map(n.classesElementLookup,(function(e){return e})).some((function(e){return e.is(r)}));if(!o){i.push(r)}}));n._on(e(i),{remove:"_untrackClassesElement"})}function o(o,a){var s,l;for(l=0;l<o.length;l++){s=n.classesElementLookup[o[l]]||e();if(t.add){r();s=e(e.uniqueSort(s.get().concat(t.element.get())))}else{s=e(s.not(t.element).get())}n.classesElementLookup[o[l]]=s;i.push(o[l]);if(a&&t.classes[o[l]]){i.push(t.classes[o[l]])}}}if(t.keys){o(t.keys.match(/\S+/g)||[],true)}if(t.extra){o(t.extra.match(/\S+/g)||[])}return i.join(" ")},_untrackClassesElement:function(t){var i=this;e.each(i.classesElementLookup,(function(n,r){if(e.inArray(t.target,r)!==-1){i.classesElementLookup[n]=e(r.not(t.target).get())}}));this._off(e(t.target))},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,false)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,true)},_toggleClass:function(e,t,i,n){n=typeof n==="boolean"?n:i;var r=typeof e==="string"||e===null,o={extra:r?t:i,keys:r?e:t,element:r?this.element:e,add:n};o.element.toggleClass(this._classes(o),n);return this},_on:function(t,i,n){var r;var o=this;if(typeof t!=="boolean"){n=i;i=t;t=false}if(!n){n=i;i=this.element;r=this.widget()}else{i=r=e(i);this.bindings=this.bindings.add(i)}e.each(n,(function(n,a){function s(){if(!t&&(o.options.disabled===true||e(this).hasClass("ui-state-disabled"))){return}return(typeof a==="string"?o[a]:a).apply(o,arguments)}if(typeof a!=="string"){s.guid=a.guid=a.guid||s.guid||e.guid++}var l=n.match(/^([\w:-]*)\s*(.*)$/);var u=l[1]+o.eventNamespace;var c=l[2];if(c){r.on(u,c,s)}else{i.on(u,s)}}))},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;t.off(i);this.bindings=e(this.bindings.not(t).get());this.focusable=e(this.focusable.not(t).get());this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return(typeof e==="string"?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,i,n){var r,o;var a=this.options[t];n=n||{};i=e.Event(i);i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase();i.target=this.element[0];o=i.originalEvent;if(o){for(r in o){if(!(r in i)){i[r]=o[r]}}}this.element.trigger(i,n);return!(typeof a==="function"&&a.apply(this.element[0],[i].concat(n))===false||i.isDefaultPrevented())}};e.each({show:"fadeIn",hide:"fadeOut"},(function(t,i){e.Widget.prototype["_"+t]=function(n,r,o){if(typeof r==="string"){r={effect:r}}var a;var s=!r?t:r===true||typeof r==="number"?i:r.effect||i;r=r||{};if(typeof r==="number"){r={duration:r}}else if(r===true){r={}}a=!e.isEmptyObject(r);r.complete=o;if(r.delay){n.delay(r.delay)}if(a&&e.effects&&e.effects.effect[s]){n[t](r)}else if(s!==t&&n[s]){n[s](r.duration,r.easing,o)}else{n.queue((function(i){e(this)[t]();if(o){o.call(n[0])}i()}))}}}));var o=e.widget;(function(){var t,i=Math.max,n=Math.abs,r=/left|center|right/,o=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,l=/%$/,u=e.fn.position;function c(e,t,i){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?i/100:1)]}function d(t,i){return parseInt(e.css(t,i),10)||0}function f(e){return e!=null&&e===e.window}function p(e){var t=e[0];if(t.nodeType===9){return{width:e.width(),height:e.height(),offset:{top:0,left:0}}}if(f(t)){return{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}}if(t.preventDefault){return{width:0,height:0,offset:{top:t.pageY,left:t.pageX}}}return{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}e.position={scrollbarWidth:function(){if(t!==undefined){return t}var i,n,r=e("<div style="+"'display:block;position:absolute;width:200px;height:200px;overflow:hidden;'>"+"<div style='height:300px;width:auto;'></div></div>"),o=r.children()[0];e("body").append(r);i=o.offsetWidth;r.css("overflow","scroll");n=o.offsetWidth;if(i===n){n=r[0].clientWidth}r.remove();return t=i-n},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),r=i==="scroll"||i==="auto"&&t.width<t.element[0].scrollWidth,o=n==="scroll"||n==="auto"&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=f(i[0]),r=!!i[0]&&i[0].nodeType===9,o=!n&&!r;return{element:i,isWindow:n,isDocument:r,offset:o?e(t).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}};e.fn.position=function(t){if(!t||!t.of){return u.apply(this,arguments)}t=e.extend({},t);var l,f,h,g,m,v,y=typeof t.of==="string"?e(document).find(t.of):e(t.of),b=e.position.getWithinInfo(t.within),_=e.position.getScrollInfo(b),w=(t.collision||"flip").split(" "),C={};v=p(y);if(y[0].preventDefault){t.at="left top"}f=v.width;h=v.height;g=v.offset;m=e.extend({},g);e.each(["my","at"],(function(){var e=(t[this]||"").split(" "),i,n;if(e.length===1){e=r.test(e[0])?e.concat(["center"]):o.test(e[0])?["center"].concat(e):["center","center"]}e[0]=r.test(e[0])?e[0]:"center";e[1]=o.test(e[1])?e[1]:"center";i=a.exec(e[0]);n=a.exec(e[1]);C[this]=[i?i[0]:0,n?n[0]:0];t[this]=[s.exec(e[0])[0],s.exec(e[1])[0]]}));if(w.length===1){w[1]=w[0]}if(t.at[0]==="right"){m.left+=f}else if(t.at[0]==="center"){m.left+=f/2}if(t.at[1]==="bottom"){m.top+=h}else if(t.at[1]==="center"){m.top+=h/2}l=c(C.at,f,h);m.left+=l[0];m.top+=l[1];return this.each((function(){var r,o,a=e(this),s=a.outerWidth(),u=a.outerHeight(),p=d(this,"marginLeft"),v=d(this,"marginTop"),A=s+p+d(this,"marginRight")+_.width,E=u+v+d(this,"marginBottom")+_.height,x=e.extend({},m),T=c(C.my,a.outerWidth(),a.outerHeight());if(t.my[0]==="right"){x.left-=s}else if(t.my[0]==="center"){x.left-=s/2}if(t.my[1]==="bottom"){x.top-=u}else if(t.my[1]==="center"){x.top-=u/2}x.left+=T[0];x.top+=T[1];r={marginLeft:p,marginTop:v};e.each(["left","top"],(function(i,n){if(e.ui.position[w[i]]){e.ui.position[w[i]][n](x,{targetWidth:f,targetHeight:h,elemWidth:s,elemHeight:u,collisionPosition:r,collisionWidth:A,collisionHeight:E,offset:[l[0]+T[0],l[1]+T[1]],my:t.my,at:t.at,within:b,elem:a})}}));if(t.using){o=function(e){var r=g.left-x.left,o=r+f-s,l=g.top-x.top,c=l+h-u,d={target:{element:y,left:g.left,top:g.top,width:f,height:h},element:{element:a,left:x.left,top:x.top,width:s,height:u},horizontal:o<0?"left":r>0?"right":"center",vertical:c<0?"top":l>0?"bottom":"middle"};if(f<s&&n(r+o)<f){d.horizontal="center"}if(h<u&&n(l+c)<h){d.vertical="middle"}if(i(n(r),n(o))>i(n(l),n(c))){d.important="horizontal"}else{d.important="vertical"}t.using.call(this,e,d)}}a.offset(e.extend(x,{using:o}))}))};e.ui.position={fit:{left:function(e,t){var n=t.within,r=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,a=e.left-t.collisionPosition.marginLeft,s=r-a,l=a+t.collisionWidth-o-r,u;if(t.collisionWidth>o){if(s>0&&l<=0){u=e.left+s+t.collisionWidth-o-r;e.left+=s-u}else if(l>0&&s<=0){e.left=r}else{if(s>l){e.left=r+o-t.collisionWidth}else{e.left=r}}}else if(s>0){e.left+=s}else if(l>0){e.left-=l}else{e.left=i(e.left-a,e.left)}},top:function(e,t){var n=t.within,r=n.isWindow?n.scrollTop:n.offset.top,o=t.within.height,a=e.top-t.collisionPosition.marginTop,s=r-a,l=a+t.collisionHeight-o-r,u;if(t.collisionHeight>o){if(s>0&&l<=0){u=e.top+s+t.collisionHeight-o-r;e.top+=s-u}else if(l>0&&s<=0){e.top=r}else{if(s>l){e.top=r+o-t.collisionHeight}else{e.top=r}}}else if(s>0){e.top+=s}else if(l>0){e.top-=l}else{e.top=i(e.top-a,e.top)}}},flip:{left:function(e,t){var i=t.within,r=i.offset.left+i.scrollLeft,o=i.width,a=i.isWindow?i.scrollLeft:i.offset.left,s=e.left-t.collisionPosition.marginLeft,l=s-a,u=s+t.collisionWidth-o-a,c=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,d=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,f=-2*t.offset[0],p,h;if(l<0){p=e.left+c+d+f+t.collisionWidth-o-r;if(p<0||p<n(l)){e.left+=c+d+f}}else if(u>0){h=e.left-t.collisionPosition.marginLeft+c+d+f-a;if(h>0||n(h)<u){e.left+=c+d+f}}},top:function(e,t){var i=t.within,r=i.offset.top+i.scrollTop,o=i.height,a=i.isWindow?i.scrollTop:i.offset.top,s=e.top-t.collisionPosition.marginTop,l=s-a,u=s+t.collisionHeight-o-a,c=t.my[1]==="top",d=c?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,f=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],h,g;if(l<0){g=e.top+d+f+p+t.collisionHeight-o-r;if(g<0||g<n(l)){e.top+=d+f+p}}else if(u>0){h=e.top-t.collisionPosition.marginTop+d+f+p-a;if(h>0||n(h)<u){e.top+=d+f+p}}}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments);e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments);e.ui.position.fit.top.apply(this,arguments)}}}})();var a=e.ui.position;var s=e.extend(e.expr.pseudos,{data:e.expr.createPseudo((function(t){return function(i){return!!e.data(i,t)}}))});var l=e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",(function(e){e.preventDefault()}))}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});var u=e;var c="backgroundColor borderBottomColor borderLeftColor borderRightColor "+"borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",d={},f=d.toString,p=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),e[4]?(parseInt(e[4],16)/255).toFixed(2):1]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),e[4]?(parseInt(e[4]+e[4],16)/255).toFixed(2):1]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],g=u.Color=function(e,t,i,n){return new u.Color.fn.parse(e,t,i,n)},m={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},v={byte:{floor:true,max:255},percent:{max:1},degrees:{mod:360,floor:true}},y,b=u.each;b(m,(function(e,t){t.cache="_"+e;t.props.alpha={idx:3,type:"percent",def:1}}));u.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));function _(e){if(e==null){return e+""}return typeof e==="object"?d[f.call(e)]||"object":typeof e}function w(e,t,i){var n=v[t.type]||{};if(e==null){return i||!t.def?null:t.def}e=n.floor?~~e:parseFloat(e);if(n.mod){return(e+n.mod)%n.mod}return Math.min(n.max,Math.max(0,e))}function C(e){var t=g(),i=t._rgba=[];e=e.toLowerCase();b(h,(function(n,r){var o,a=r.re.exec(e),s=a&&r.parse(a),l=r.space||"rgba";if(s){o=t[l](s);t[m[l].cache]=o[m[l].cache];i=t._rgba=o._rgba;return false}}));if(i.length){if(i.join()==="0,0,0,0"){u.extend(i,y.transparent)}return t}return y[e]}g.fn=u.extend(g.prototype,{parse:function(e,t,i,n){if(e===undefined){this._rgba=[null,null,null,null];return this}if(e.jquery||e.nodeType){e=u(e).css(t);t=undefined}var r=this,o=_(e),a=this._rgba=[];if(t!==undefined){e=[e,t,i,n];o="array"}if(o==="string"){return this.parse(C(e)||y._default)}if(o==="array"){b(m.rgba.props,(function(t,i){a[i.idx]=w(e[i.idx],i)}));return this}if(o==="object"){if(e instanceof g){b(m,(function(t,i){if(e[i.cache]){r[i.cache]=e[i.cache].slice()}}))}else{b(m,(function(t,i){var n=i.cache;b(i.props,(function(t,o){if(!r[n]&&i.to){if(t==="alpha"||e[t]==null){return}r[n]=i.to(r._rgba)}r[n][o.idx]=w(e[t],o,true)}));if(r[n]&&u.inArray(null,r[n].slice(0,3))<0){if(r[n][3]==null){r[n][3]=1}if(i.from){r._rgba=i.from(r[n])}}}))}return this}},is:function(e){var t=g(e),i=true,n=this;b(m,(function(e,r){var o,a=t[r.cache];if(a){o=n[r.cache]||r.to&&r.to(n._rgba)||[];b(r.props,(function(e,t){if(a[t.idx]!=null){i=a[t.idx]===o[t.idx];return i}}))}return i}));return i},_space:function(){var e=[],t=this;b(m,(function(i,n){if(t[n.cache]){e.push(i)}}));return e.pop()},transition:function(e,t){var i=g(e),n=i._space(),r=m[n],o=this.alpha()===0?g("transparent"):this,a=o[r.cache]||r.to(o._rgba),s=a.slice();i=i[r.cache];b(r.props,(function(e,n){var r=n.idx,o=a[r],l=i[r],u=v[n.type]||{};if(l===null){return}if(o===null){s[r]=l}else{if(u.mod){if(l-o>u.mod/2){o+=u.mod}else if(o-l>u.mod/2){o-=u.mod}}s[r]=w((l-o)*t+o,n)}}));return this[n](s)},blend:function(e){if(this._rgba[3]===1){return this}var t=this._rgba.slice(),i=t.pop(),n=g(e)._rgba;return g(u.map(t,(function(e,t){return(1-i)*n[t]+i*e})))},toRgbaString:function(){var e="rgba(",t=u.map(this._rgba,(function(e,t){if(e!=null){return e}return t>2?1:0}));if(t[3]===1){t.pop();e="rgb("}return e+t.join(", ")+")"},toHslaString:function(){var e="hsla(",t=u.map(this.hsla(),(function(e,t){if(e==null){e=t>2?1:0}if(t&&t<3){e=Math.round(e*100)+"%"}return e}));if(t[3]===1){t.pop();e="hsl("}return e+t.join(", ")+")"},toHexString:function(e){var t=this._rgba.slice(),i=t.pop();if(e){t.push(~~(i*255))}return"#"+u.map(t,(function(e){return("0"+(e||0).toString(16)).substr(-2)})).join("")},toString:function(){return this.toRgbaString()}});g.fn.parse.prototype=g.fn;function A(e,t,i){i=(i+1)%1;if(i*6<1){return e+(t-e)*i*6}if(i*2<1){return t}if(i*3<2){return e+(t-e)*(2/3-i)*6}return e}m.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null){return[null,null,null,e[3]]}var t=e[0]/255,i=e[1]/255,n=e[2]/255,r=e[3],o=Math.max(t,i,n),a=Math.min(t,i,n),s=o-a,l=o+a,u=l*.5,c,d;if(a===o){c=0}else if(t===o){c=60*(i-n)/s+360}else if(i===o){c=60*(n-t)/s+120}else{c=60*(t-i)/s+240}if(s===0){d=0}else if(u<=.5){d=s/l}else{d=s/(2-l)}return[Math.round(c)%360,d,u,r==null?1:r]};m.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null){return[null,null,null,e[3]]}var t=e[0]/360,i=e[1],n=e[2],r=e[3],o=n<=.5?n*(1+i):n+i-n*i,a=2*n-o;return[Math.round(A(a,o,t+1/3)*255),Math.round(A(a,o,t)*255),Math.round(A(a,o,t-1/3)*255),r]};b(m,(function(e,t){var i=t.props,n=t.cache,r=t.to,o=t.from;g.fn[e]=function(e){if(r&&!this[n]){this[n]=r(this._rgba)}if(e===undefined){return this[n].slice()}var t,a=_(e),s=a==="array"||a==="object"?e:arguments,l=this[n].slice();b(i,(function(e,t){var i=s[a==="object"?e:t.idx];if(i==null){i=l[t.idx]}l[t.idx]=w(i,t)}));if(o){t=g(o(l));t[n]=l;return t}else{return g(l)}};b(i,(function(t,i){if(g.fn[t]){return}g.fn[t]=function(n){var r,o,a,s,l=_(n);if(t==="alpha"){s=this._hsla?"hsla":"rgba"}else{s=e}r=this[s]();o=r[i.idx];if(l==="undefined"){return o}if(l==="function"){n=n.call(this,o);l=_(n)}if(n==null&&i.empty){return this}if(l==="string"){a=p.exec(n);if(a){n=o+parseFloat(a[2])*(a[1]==="+"?1:-1)}}r[i.idx]=n;return this[s](r)}}))}));g.hook=function(e){var t=e.split(" ");b(t,(function(e,t){u.cssHooks[t]={set:function(e,i){var n;if(i!=="transparent"&&(_(i)!=="string"||(n=C(i)))){i=g(n||i);i=i.toRgbaString()}e.style[t]=i}};u.fx.step[t]=function(e){if(!e.colorInit){e.start=g(e.elem,t);e.end=g(e.end);e.colorInit=true}u.cssHooks[t].set(e.elem,e.start.transition(e.end,e.pos))}}))};g.hook(c);u.cssHooks.borderColor={expand:function(e){var t={};b(["Top","Right","Bottom","Left"],(function(i,n){t["border"+n+"Color"]=e}));return t}};y=u.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};var E="ui-effects-",x="ui-effects-style",T="ui-effects-animated";e.effects={effect:{}};(function(){var t=["add","remove","toggle"],i={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(t,i){e.fx.step[i]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr){u.style(e.elem,i,e.end);e.setAttr=true}}}));function n(e){return e.replace(/-([\da-z])/gi,(function(e,t){return t.toUpperCase()}))}function r(e){var t,i,r=e.ownerDocument.defaultView.getComputedStyle(e),o={};i=r.length;while(i--){t=r[i];if(typeof r[t]==="string"){o[n(t)]=r[t]}}return o}function o(t,n){var r={},o,a;for(o in n){a=n[o];if(t[o]!==a){if(!i[o]){if(e.fx.step[o]||!isNaN(parseFloat(a))){r[o]=a}}}}return r}e.effects.animateClass=function(i,n,a,s){var l=e.speed(n,a,s);return this.queue((function(){var n=e(this),a=n.attr("class")||"",s,u=l.children?n.find("*").addBack():n;u=u.map((function(){var t=e(this);return{el:t,start:r(this)}}));s=function(){e.each(t,(function(e,t){if(i[t]){n[t+"Class"](i[t])}}))};s();u=u.map((function(){this.end=r(this.el[0]);this.diff=o(this.start,this.end);return this}));n.attr("class",a);u=u.map((function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:false,complete:function(){i.resolve(t)}});this.el.animate(this.diff,n);return i.promise()}));e.when.apply(e,u.get()).done((function(){s();e.each(arguments,(function(){var t=this.el;e.each(this.diff,(function(e){t.css(e,"")}))}));l.complete.call(n[0])}))}))};e.fn.extend({addClass:function(t){return function(i,n,r,o){return n?e.effects.animateClass.call(this,{add:i},n,r,o):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,r,o){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,r,o):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,n,r,o,a){if(typeof n==="boolean"||n===undefined){if(!r){return t.apply(this,arguments)}else{return e.effects.animateClass.call(this,n?{add:i}:{remove:i},r,o,a)}}else{return e.effects.animateClass.call(this,{toggle:i},n,r,o)}}}(e.fn.toggleClass),switchClass:function(t,i,n,r,o){return e.effects.animateClass.call(this,{add:i,remove:t},n,r,o)}})})();(function(){if(e.expr&&e.expr.pseudos&&e.expr.pseudos.animated){e.expr.pseudos.animated=function(t){return function(i){return!!e(i).data(T)||t(i)}}(e.expr.pseudos.animated)}if(e.uiBackCompat===true){e.extend(e.effects,{save:function(e,t){var i=0,n=t.length;for(;i<n;i++){if(t[i]!==null){e.data(E+t[i],e[0].style[t[i]])}}},restore:function(e,t){var i,n=0,r=t.length;for(;n<r;n++){if(t[n]!==null){i=e.data(E+t[n]);e.css(t[n],i)}}},setMode:function(e,t){if(t==="toggle"){t=e.is(":hidden")?"show":"hide"}return t},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper")){return t.parent()}var i={width:t.outerWidth(true),height:t.outerHeight(true),float:t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(e){o=document.body}t.wrap(n);if(t[0]===o||e.contains(t[0],o)){e(o).trigger("focus")}n=t.parent();if(t.css("position")==="static"){n.css({position:"relative"});t.css({position:"relative"})}else{e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")});e.each(["top","left","bottom","right"],(function(e,n){i[n]=t.css(n);if(isNaN(parseInt(i[n],10))){i[n]="auto"}}));t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}t.css(r);return n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;if(t.parent().is(".ui-effects-wrapper")){t.parent().replaceWith(t);if(t[0]===i||e.contains(t[0],i)){e(i).trigger("focus")}}return t}})}e.extend(e.effects,{version:"1.14.1",define:function(t,i,n){if(!n){n=i;i="effect"}e.effects.effect[t]=n;e.effects.effect[t].mode=i;return n},scaledDimensions:function(e,t,i){if(t===0){return{height:0,width:0,outerHeight:0,outerWidth:0}}var n=i!=="horizontal"?(t||100)/100:1,r=i!=="vertical"?(t||100)/100:1;return{height:e.height()*r,width:e.width()*n,outerHeight:e.outerHeight()*r,outerWidth:e.outerWidth()*n}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(e,t,i){var n=e.queue();if(t>1){n.splice.apply(n,[1,0].concat(n.splice(t,i)))}e.dequeue()},saveStyle:function(e){e.data(x,e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data(x)||"";e.removeData(x)},mode:function(e,t){var i=e.is(":hidden");if(t==="toggle"){t=i?"show":"hide"}if(i?t==="hide":t==="show"){t="none"}return t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createPlaceholder:function(t){var i,n=t.css("position"),r=t.position();t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight());if(/^(static|relative)/.test(n)){n="absolute";i=e("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder");t.data(E+"placeholder",i)}t.css({position:n,left:r.left,top:r.top});return i},removePlaceholder:function(e){var t=E+"placeholder",i=e.data(t);if(i){i.remove();e.removeData(t)}},cleanUp:function(t){e.effects.restoreStyle(t);e.effects.removePlaceholder(t)},setTransition:function(t,i,n,r){r=r||{};e.each(i,(function(e,i){var o=t.cssUnit(i);if(o[0]>0){r[i]=o[0]*n+o[1]}}));return r}});function t(t,i,n,r){if(e.isPlainObject(t)){i=t;t=t.effect}t={effect:t};if(i==null){i={}}if(typeof i==="function"){r=i;n=null;i={}}if(typeof i==="number"||e.fx.speeds[i]){r=n;n=i;i={}}if(typeof n==="function"){r=n;n=null}if(i){e.extend(t,i)}n=n||i.duration;t.duration=e.fx.off?0:typeof n==="number"?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default;t.complete=r||i.complete;return t}function i(t){if(!t||typeof t==="number"||e.fx.speeds[t]){return true}if(typeof t==="string"&&!e.effects.effect[t]){return true}if(typeof t==="function"){return true}if(typeof t==="object"&&!t.effect){return true}return false}e.fn.extend({effect:function(){var i=t.apply(this,arguments),n=e.effects.effect[i.effect],r=n.mode,o=i.queue,a=o||"fx",s=i.complete,l=i.mode,u=[],c=function(t){var i=e(this),n=e.effects.mode(i,l)||r;i.data(T,true);u.push(n);if(r&&(n==="show"||n===r&&n==="hide")){i.show()}if(!r||n!=="none"){e.effects.saveStyle(i)}if(typeof t==="function"){t()}};if(e.fx.off||!n){if(l){return this[l](i.duration,s)}else{return this.each((function(){if(s){s.call(this)}}))}}function d(t){var o=e(this);function a(){o.removeData(T);e.effects.cleanUp(o);if(i.mode==="hide"){o.hide()}c()}function c(){if(typeof s==="function"){s.call(o[0])}if(typeof t==="function"){t()}}i.mode=u.shift();if(e.uiBackCompat===true&&!r){if(o.is(":hidden")?l==="hide":l==="show"){o[l]();c()}else{n.call(o[0],i,c)}}else{if(i.mode==="none"){o[l]();c()}else{n.call(o[0],i,a)}}}return o===false?this.each(c).each(d):this.queue(a,c).queue(a,d)},show:function(e){return function(n){if(i(n)){return e.apply(this,arguments)}else{var r=t.apply(this,arguments);r.mode="show";return this.effect.call(this,r)}}}(e.fn.show),hide:function(e){return function(n){if(i(n)){return e.apply(this,arguments)}else{var r=t.apply(this,arguments);r.mode="hide";return this.effect.call(this,r)}}}(e.fn.hide),toggle:function(e){return function(n){if(i(n)||typeof n==="boolean"){return e.apply(this,arguments)}else{var r=t.apply(this,arguments);r.mode="toggle";return this.effect.call(this,r)}}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];e.each(["em","px","%","pt"],(function(e,t){if(i.indexOf(t)>0){n=[parseFloat(i),t]}}));return n},cssClip:function(e){if(e){return this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)")}return n(this.css("clip"),this)},transfer:function(t,i){var n=e(this),r=e(t.to),o=r.css("position")==="fixed",a=e("body"),s=o?a.scrollTop():0,l=o?a.scrollLeft():0,u=r.offset(),c={top:u.top-s,left:u.left-l,height:r.innerHeight(),width:r.innerWidth()},d=n.offset(),f=e("<div class='ui-effects-transfer'></div>");f.appendTo("body").addClass(t.className).css({top:d.top-s,left:d.left-l,height:n.innerHeight(),width:n.innerWidth(),position:o?"fixed":"absolute"}).animate(c,t.duration,t.easing,(function(){f.remove();if(typeof i==="function"){i()}}))}});function n(e,t){var i=t.outerWidth(),n=t.outerHeight(),r=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,o=r.exec(e)||["",0,i,n,0];return{top:parseFloat(o[1])||0,right:o[2]==="auto"?i:parseFloat(o[2]),bottom:o[3]==="auto"?n:parseFloat(o[3]),left:parseFloat(o[4])||0}}e.fx.step.clip=function(t){if(!t.clipInit){t.start=e(t.elem).cssClip();if(typeof t.end==="string"){t.end=n(t.end,t.elem)}t.clipInit=true}e(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}})();(function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],(function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}));e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,i=4;while(e<((t=Math.pow(2,--i))-1)/11){}return 1/Math.pow(4,3-i)-7.5625*Math.pow((t*3-2)/22-e,2)}});e.each(t,(function(t,i){e.easing["easeIn"+t]=i;e.easing["easeOut"+t]=function(e){return 1-i(1-e)};e.easing["easeInOut"+t]=function(e){return e<.5?i(e*2)/2:1-i(e*-2+2)/2}}))})();var S=e.effects;var D=e.effects.define("blind","hide",(function(t,i){var n={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},r=e(this),o=t.direction||"up",a=r.cssClip(),s={clip:e.extend({},a)},l=e.effects.createPlaceholder(r);s.clip[n[o][0]]=s.clip[n[o][1]];if(t.mode==="show"){r.cssClip(s.clip);if(l){l.css(e.effects.clipToBox(s))}s.clip=a}if(l){l.animate(e.effects.clipToBox(s),t.duration,t.easing)}r.animate(s,{queue:false,duration:t.duration,easing:t.easing,complete:i})}));var k=e.effects.define("bounce",(function(t,i){var n,r,o,a=e(this),s=t.mode,l=s==="hide",u=s==="show",c=t.direction||"up",d=t.distance,f=t.times||5,p=f*2+(u||l?1:0),h=t.duration/p,g=t.easing,m=c==="up"||c==="down"?"top":"left",v=c==="up"||c==="left",y=0,b=a.queue().length;e.effects.createPlaceholder(a);o=a.css(m);if(!d){d=a[m==="top"?"outerHeight":"outerWidth"]()/3}if(u){r={opacity:1};r[m]=o;a.css("opacity",0).css(m,v?-d*2:d*2).animate(r,h,g)}if(l){d=d/Math.pow(2,f-1)}r={};r[m]=o;for(;y<f;y++){n={};n[m]=(v?"-=":"+=")+d;a.animate(n,h,g).animate(r,h,g);d=l?d*2:d/2}if(l){n={opacity:0};n[m]=(v?"-=":"+=")+d;a.animate(n,h,g)}a.queue(i);e.effects.unshift(a,b,p+1)}));var O=e.effects.define("clip","hide",(function(t,i){var n,r={},o=e(this),a=t.direction||"vertical",s=a==="both",l=s||a==="horizontal",u=s||a==="vertical";n=o.cssClip();r.clip={top:u?(n.bottom-n.top)/2:n.top,right:l?(n.right-n.left)/2:n.right,bottom:u?(n.bottom-n.top)/2:n.bottom,left:l?(n.right-n.left)/2:n.left};e.effects.createPlaceholder(o);if(t.mode==="show"){o.cssClip(r.clip);r.clip=n}o.animate(r,{queue:false,duration:t.duration,easing:t.easing,complete:i})}));var R=e.effects.define("drop","hide",(function(t,i){var n,r=e(this),o=t.mode,a=o==="show",s=t.direction||"left",l=s==="up"||s==="down"?"top":"left",u=s==="up"||s==="left"?"-=":"+=",c=u==="+="?"-=":"+=",d={opacity:0};e.effects.createPlaceholder(r);n=t.distance||r[l==="top"?"outerHeight":"outerWidth"](true)/2;d[l]=u+n;if(a){r.css(d);d[l]=c+n;d.opacity=1}r.animate(d,{queue:false,duration:t.duration,easing:t.easing,complete:i})}));var N=e.effects.define("explode","hide",(function(t,i){var n,r,o,a,s,l,u=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=u,d=e(this),f=t.mode,p=f==="show",h=d.show().css("visibility","hidden").offset(),g=Math.ceil(d.outerWidth()/c),m=Math.ceil(d.outerHeight()/u),v=[];function y(){v.push(this);if(v.length===u*c){b()}}for(n=0;n<u;n++){a=h.top+n*m;l=n-(u-1)/2;for(r=0;r<c;r++){o=h.left+r*g;s=r-(c-1)/2;d.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-r*g,top:-n*m}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g,height:m,left:o+(p?s*g:0),top:a+(p?l*m:0),opacity:p?0:1}).animate({left:o+(p?0:s*g),top:a+(p?0:l*m),opacity:p?1:0},t.duration||500,t.easing,y)}}function b(){d.css({visibility:"visible"});e(v).remove();i()}}));var P=e.effects.define("fade","toggle",(function(t,i){var n=t.mode==="show";e(this).css("opacity",n?0:1).animate({opacity:n?1:0},{queue:false,duration:t.duration,easing:t.easing,complete:i})}));var I=e.effects.define("fold","hide",(function(t,i){var n=e(this),r=t.mode,o=r==="show",a=r==="hide",s=t.size||15,l=/([0-9]+)%/.exec(s),u=!!t.horizFirst,c=u?["right","bottom"]:["bottom","right"],d=t.duration/2,f=e.effects.createPlaceholder(n),p=n.cssClip(),h={clip:e.extend({},p)},g={clip:e.extend({},p)},m=[p[c[0]],p[c[1]]],v=n.queue().length;if(l){s=parseInt(l[1],10)/100*m[a?0:1]}h.clip[c[0]]=s;g.clip[c[0]]=s;g.clip[c[1]]=0;if(o){n.cssClip(g.clip);if(f){f.css(e.effects.clipToBox(g))}g.clip=p}n.queue((function(i){if(f){f.animate(e.effects.clipToBox(h),d,t.easing).animate(e.effects.clipToBox(g),d,t.easing)}i()})).animate(h,d,t.easing).animate(g,d,t.easing).queue(i);e.effects.unshift(n,v,4)}));var M=e.effects.define("highlight","show",(function(t,i){var n=e(this),r={backgroundColor:n.css("backgroundColor")};if(t.mode==="hide"){r.opacity=0}e.effects.saveStyle(n);n.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(r,{queue:false,duration:t.duration,easing:t.easing,complete:i})}));var L=e.effects.define("size",(function(t,i){var n,r,o,a=e(this),s=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],u=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=t.mode,d=c!=="effect",f=t.scale||"both",p=t.origin||["middle","center"],h=a.css("position"),g=a.position(),m=e.effects.scaledDimensions(a),v=t.from||m,y=t.to||e.effects.scaledDimensions(a,0);e.effects.createPlaceholder(a);if(c==="show"){o=v;v=y;y=o}r={from:{y:v.height/m.height,x:v.width/m.width},to:{y:y.height/m.height,x:y.width/m.width}};if(f==="box"||f==="both"){if(r.from.y!==r.to.y){v=e.effects.setTransition(a,l,r.from.y,v);y=e.effects.setTransition(a,l,r.to.y,y)}if(r.from.x!==r.to.x){v=e.effects.setTransition(a,u,r.from.x,v);y=e.effects.setTransition(a,u,r.to.x,y)}}if(f==="content"||f==="both"){if(r.from.y!==r.to.y){v=e.effects.setTransition(a,s,r.from.y,v);y=e.effects.setTransition(a,s,r.to.y,y)}}if(p){n=e.effects.getBaseline(p,m);v.top=(m.outerHeight-v.outerHeight)*n.y+g.top;v.left=(m.outerWidth-v.outerWidth)*n.x+g.left;y.top=(m.outerHeight-y.outerHeight)*n.y+g.top;y.left=(m.outerWidth-y.outerWidth)*n.x+g.left}delete v.outerHeight;delete v.outerWidth;a.css(v);if(f==="content"||f==="both"){l=l.concat(["marginTop","marginBottom"]).concat(s);u=u.concat(["marginLeft","marginRight"]);a.find("*[width]").each((function(){var i=e(this),n=e.effects.scaledDimensions(i),o={height:n.height*r.from.y,width:n.width*r.from.x,outerHeight:n.outerHeight*r.from.y,outerWidth:n.outerWidth*r.from.x},a={height:n.height*r.to.y,width:n.width*r.to.x,outerHeight:n.height*r.to.y,outerWidth:n.width*r.to.x};if(r.from.y!==r.to.y){o=e.effects.setTransition(i,l,r.from.y,o);a=e.effects.setTransition(i,l,r.to.y,a)}if(r.from.x!==r.to.x){o=e.effects.setTransition(i,u,r.from.x,o);a=e.effects.setTransition(i,u,r.to.x,a)}if(d){e.effects.saveStyle(i)}i.css(o);i.animate(a,t.duration,t.easing,(function(){if(d){e.effects.restoreStyle(i)}}))}))}a.animate(y,{queue:false,duration:t.duration,easing:t.easing,complete:function(){var t=a.offset();if(y.opacity===0){a.css("opacity",v.opacity)}if(!d){a.css("position",h==="static"?"relative":h).offset(t);e.effects.saveStyle(a)}i()}})}));var F=e.effects.define("scale",(function(t,i){var n=e(this),r=t.mode,o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:r!=="effect"?0:100),a=e.extend(true,{from:e.effects.scaledDimensions(n),to:e.effects.scaledDimensions(n,o,t.direction||"both"),origin:t.origin||["middle","center"]},t);if(t.fade){a.from.opacity=1;a.to.opacity=0}e.effects.effect.size.call(this,a,i)}));var G=e.effects.define("puff","hide",(function(t,i){var n=e.extend(true,{},t,{fade:true,percent:parseInt(t.percent,10)||150});e.effects.effect.scale.call(this,n,i)}));var $=e.effects.define("pulsate","show",(function(t,i){var n=e(this),r=t.mode,o=r==="show",a=r==="hide",s=o||a,l=(t.times||5)*2+(s?1:0),u=t.duration/l,c=0,d=1,f=n.queue().length;if(o||!n.is(":visible")){n.css("opacity",0).show();c=1}for(;d<l;d++){n.animate({opacity:c},u,t.easing);c=1-c}n.animate({opacity:c},u,t.easing);n.queue(i);e.effects.unshift(n,f,l+1)}));var W=e.effects.define("shake",(function(t,i){var n=1,r=e(this),o=t.direction||"left",a=t.distance||20,s=t.times||3,l=s*2+1,u=Math.round(t.duration/l),c=o==="up"||o==="down"?"top":"left",d=o==="up"||o==="left",f={},p={},h={},g=r.queue().length;e.effects.createPlaceholder(r);f[c]=(d?"-=":"+=")+a;p[c]=(d?"+=":"-=")+a*2;h[c]=(d?"-=":"+=")+a*2;r.animate(f,u,t.easing);for(;n<s;n++){r.animate(p,u,t.easing).animate(h,u,t.easing)}r.animate(p,u,t.easing).animate(f,u/2,t.easing).queue(i);e.effects.unshift(r,g,l+1)}));var H=e.effects.define("slide","show",(function(t,i){var n,r,o=e(this),a={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},s=t.mode,l=t.direction||"left",u=l==="up"||l==="down"?"top":"left",c=l==="up"||l==="left",d=t.distance||o[u==="top"?"outerHeight":"outerWidth"](true),f={};e.effects.createPlaceholder(o);n=o.cssClip();r=o.position()[u];f[u]=(c?-1:1)*d+r;f.clip=o.cssClip();f.clip[a[l][1]]=f.clip[a[l][0]];if(s==="show"){o.cssClip(f.clip);o.css(u,f[u]);f.clip=n;f[u]=r}o.animate(f,{queue:false,duration:t.duration,easing:t.easing,complete:i})}));var S;if(e.uiBackCompat===true){S=e.effects.define("transfer",(function(t,i){e(this).transfer(t,i)}))}var j=S;e.ui.focusable=function(t,i){var n,r,o,a,s,l=t.nodeName.toLowerCase();if("area"===l){n=t.parentNode;r=n.name;if(!t.href||!r||n.nodeName.toLowerCase()!=="map"){return false}o=e("img[usemap='#"+r+"']");return o.length>0&&o.is(":visible")}if(/^(input|select|textarea|button|object)$/.test(l)){a=!t.disabled;if(a){s=e(t).closest("fieldset")[0];if(s){a=!s.disabled}}}else if("a"===l){a=t.href||i}else{a=i}return a&&e(t).is(":visible")&&e(t).css("visibility")==="visible"};e.extend(e.expr.pseudos,{focusable:function(t){return e.ui.focusable(t,e.attr(t,"tabindex")!=null)}});var B=e.ui.focusable;var V=e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout((function(){var i=t.data("ui-form-reset-instances");e.each(i,(function(){this.refresh()}))}))},_bindFormResetHandler:function(){this.form=e(this.element.prop("form"));if(!this.form.length){return}var t=this.form.data("ui-form-reset-instances")||[];if(!t.length){this.form.on("reset.ui-form-reset",this._formResetHandler)}t.push(this);this.form.data("ui-form-reset-instances",t)},_unbindFormResetHandler:function(){if(!this.form.length){return}var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1);if(t.length){this.form.data("ui-form-reset-instances",t)}else{this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};if(!e.escapeSelector){e.escapeSelector=function(e){return CSS.escape(e+"")}}if(!e.fn.even||!e.fn.odd){e.fn.extend({even:function(){return this.filter((function(e){return e%2===0}))},odd:function(){return this.filter((function(e){return e%2===1}))}})}var z=e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};var U=e.fn.labels=function(){var e,t,i,n,r;if(!this.length){return this.pushStack([])}if(this[0].labels&&this[0].labels.length){return this.pushStack(this[0].labels)}n=this.eq(0).parents("label");i=this.attr("id");if(i){e=this.eq(0).parents().last();r=e.add(e.length?e.siblings():this.siblings());t="label[for='"+CSS.escape(i)+"']";n=n.add(r.find(t).addBack(t))}return this.pushStack(n)};var Y=e.fn.scrollParent=function(t){var i=this.css("position"),n=i==="absolute",r=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter((function(){var t=e(this);if(n&&t.css("position")==="static"){return false}return r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))})).eq(0);return i==="fixed"||!o.length?e(this[0].ownerDocument||document):o};var q=e.extend(e.expr.pseudos,{tabbable:function(t){var i=e.attr(t,"tabindex"),n=i!=null;return(!n||i>=0)&&e.ui.focusable(t,n)}});var X=e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each((function(){if(!this.id){this.id="ui-id-"+ ++e}}))}}(),removeUniqueId:function(){return this.each((function(){if(/^ui-id-\d+$/.test(this.id)){e(this).removeAttr("id")}}))}});var K=e.widget("ui.accordion",{version:"1.14.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:false,event:"click",header:function(e){return e.find("> li > :first-child").add(e.find("> :not(li)").filter((function(e){return e%2===0})))},heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e();this._addClass("ui-accordion","ui-widget ui-helper-reset");this.element.attr("role","tablist");if(!t.collapsible&&(t.active===false||t.active==null)){t.active=0}this._processPanels();if(t.active<0){t.active+=this.headers.length}this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:!this.active.length?e():this.active.next()}},_createIcons:function(){var t,i,n=this.options.icons;if(n){t=e("<span>");this._addClass(t,"ui-accordion-header-icon","ui-icon "+n.header);t.prependTo(this.headers);i=this.active.children(".ui-accordion-header-icon");this._removeClass(i,n.header)._addClass(i,null,n.activeHeader)._addClass(this.headers,"ui-accordion-icons")}},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons");this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeAttr("role");this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId();this._destroyIcons();e=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId();if(this.options.heightStyle!=="content"){e.css("height","")}},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="event"){if(this.options.event){this._off(this.headers,this.options.event)}this._setupEvents(t)}this._super(e,t);if(e==="collapsible"&&!t&&this.options.active===false){this._activate(0)}if(e==="icons"){this._destroyIcons();if(t){this._createIcons()}}},_setOptionDisabled:function(e){this._super(e);this.element.attr("aria-disabled",e);this._toggleClass(null,"ui-state-disabled",!!e)},_keydown:function(t){if(t.altKey||t.ctrlKey){return}var i=e.ui.keyCode,n=this.headers.length,r=this.headers.index(t.target),o=false;switch(t.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(r+1)%n];break;case i.LEFT:case i.UP:o=this.headers[(r-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[n-1];break}if(o){e(t.target).attr("tabIndex",-1);e(o).attr("tabIndex",0);e(o).trigger("focus");t.preventDefault()}},_panelKeyDown:function(t){if(t.keyCode===e.ui.keyCode.UP&&t.ctrlKey){e(t.currentTarget).prev().trigger("focus")}},refresh:function(){var t=this.options;this._processPanels();if(t.active===false&&t.collapsible===true||!this.headers.length){t.active=false;this.active=e()}else if(t.active===false){this._activate(0)}else if(this.active.length&&!e.contains(this.element[0],this.active[0])){if(this.headers.length===this.headers.find(".ui-state-disabled").length){t.active=false;this.active=e()}else{this._activate(Math.max(0,t.active-1))}}else{t.active=this.headers.index(this.active)}this._destroyIcons();this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;if(typeof this.options.header==="function"){this.headers=this.options.header(this.element)}else{this.headers=this.element.find(this.options.header)}this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default");this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide();this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content");if(t){this._off(e.not(this.headers));this._off(t.not(this.panels))}},_refresh:function(){var t,i=this.options,n=i.heightStyle,r=this.element.parent();this.active=this._findActive(i.active);this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed");this._addClass(this.active.next(),"ui-accordion-content-active");this.active.next().show();this.headers.attr("role","tab").each((function(){var t=e(this),i=t.uniqueId().attr("id"),n=t.next(),r=n.uniqueId().attr("id");t.attr("aria-controls",r);n.attr("aria-labelledby",i)})).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex",0)}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"})}this._createIcons();this._setupEvents(i.event);if(n==="fill"){t=r.height();this.element.siblings(":visible").each((function(){var i=e(this),n=i.css("position");if(n==="absolute"||n==="fixed"){return}t-=i.outerHeight(true)}));this.headers.each((function(){t-=e(this).outerHeight(true)}));this.headers.next().each((function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")}else if(n==="auto"){t=0;this.headers.next().each((function(){var i=e(this).is(":visible");if(!i){e(this).show()}t=Math.max(t,e(this).css("height","").height());if(!i){e(this).hide()}})).height(t)}},_activate:function(t){var i=this._findActive(t)[0];if(i===this.active[0]){return}i=i||this.active[0];this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop})},_findActive:function(t){return typeof t==="number"?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};if(t){e.each(t.split(" "),(function(e,t){i[t]="_eventHandler"}))}this._off(this.headers.add(this.headers.next()));this._on(this.headers,i);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(t){var i,n,r=this.options,o=this.active,a=e(t.currentTarget),s=a[0]===o[0],l=s&&r.collapsible,u=l?e():a.next(),c=o.next(),d={oldHeader:o,oldPanel:c,newHeader:l?e():a,newPanel:u};t.preventDefault();if(s&&!r.collapsible||this._trigger("beforeActivate",t,d)===false){return}r.active=l?false:this.headers.index(a);this.active=s?e():a;this._toggle(d);this._removeClass(o,"ui-accordion-header-active","ui-state-active");if(r.icons){i=o.children(".ui-accordion-header-icon");this._removeClass(i,null,r.icons.activeHeader)._addClass(i,null,r.icons.header)}if(!s){this._removeClass(a,"ui-accordion-header-collapsed")._addClass(a,"ui-accordion-header-active","ui-state-active");if(r.icons){n=a.children(".ui-accordion-header-icon");this._removeClass(n,null,r.icons.header)._addClass(n,null,r.icons.activeHeader)}this._addClass(a.next(),"ui-accordion-content-active")}},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=i;this.prevHide=n;if(this.options.animate){this._animate(i,n,t)}else{n.hide();i.show();this._toggleComplete(t)}n.attr({"aria-hidden":"true"});n.prev().attr({"aria-selected":"false","aria-expanded":"false"});if(i.length&&n.length){n.prev().attr({tabIndex:-1,"aria-expanded":"false"})}else if(i.length){this.headers.filter((function(){return parseInt(e(this).attr("tabIndex"),10)===0})).attr("tabIndex",-1)}i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,i){var n,r,o,a=this,s=0,l=e.css("box-sizing"),u=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},d=u&&c.down||c,f=function(){a._toggleComplete(i)};if(typeof d==="number"){o=d}if(typeof d==="string"){r=d}r=r||d.easing||c.easing;o=o||d.duration||c.duration;if(!t.length){return e.animate(this.showProps,o,r,f)}if(!e.length){return t.animate(this.hideProps,o,r,f)}n=e.show().outerHeight();t.animate(this.hideProps,{duration:o,easing:r,step:function(e,t){t.now=Math.round(e)}});e.hide().animate(this.showProps,{duration:o,easing:r,complete:f,step:function(e,i){i.now=Math.round(e);if(i.prop!=="height"){if(l==="content-box"){s+=i.now}}else if(a.options.heightStyle!=="content"){i.now=Math.round(n-t.outerHeight()-s);s=0}}})},_toggleComplete:function(e){var t=e.oldPanel,i=t.prev();this._removeClass(t,"ui-accordion-content-active");this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed");this._trigger("activate",null,e)}});var Q=e.widget("ui.menu",{version:"1.14.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.lastMousePosition={x:null,y:null};this.element.uniqueId().attr({role:this.options.role,tabIndex:0});this._addClass("ui-menu","ui-widget ui-widget-content");this._on({"mousedown .ui-menu-item":function(e){e.preventDefault();this._activateItem(e)},"click .ui-menu-item":function(t){var i=e(t.target);var n=e(this.document[0].activeElement);if(!this.mouseHandled&&i.not(".ui-state-disabled").length){this.select(t);if(!t.isPropagationStopped()){this.mouseHandled=true}if(i.has(".ui-menu").length){this.expand(t)}else if(!this.element.is(":focus")&&n.closest(".ui-menu").length){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer)}}}},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this._menuItems().first();if(!t){this.focus(e,i)}},blur:function(t){this._delay((function(){var i=!e.contains(this.element[0],this.document[0].activeElement);if(i){this.collapseAll(t)}}))},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(e){if(this._closeOnDocumentClick(e)){this.collapseAll(e,true)}this.mouseHandled=false}})},_activateItem:function(t){if(this.previousFilter){return}if(t.clientX===this.lastMousePosition.x&&t.clientY===this.lastMousePosition.y){return}this.lastMousePosition={x:t.clientX,y:t.clientY};var i=e(t.target).closest(".ui-menu-item"),n=e(t.currentTarget);if(i[0]!==n[0]){return}if(n.is(".ui-state-active")){return}this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active");this.focus(t,n)},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),i=t.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled "+"tabIndex").removeUniqueId().show();i.children().each((function(){var t=e(this);if(t.data("ui-menu-submenu-caret")){t.remove()}}))},_keydown:function(t){var i,n,r,o,a=true;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(t)}break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:a=false;n=this.previousFilter||"";o=false;r=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode);clearTimeout(this.filterTimer);if(r===n){o=true}else{r=n+r}i=this._filterMenuItems(r);i=o&&i.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):i;if(!i.length){r=String.fromCharCode(t.keyCode);i=this._filterMenuItems(r)}if(i.length){this.focus(t,i);this.previousFilter=r;this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)}else{delete this.previousFilter}}if(a){t.preventDefault()}},_activate:function(e){if(this.active&&!this.active.is(".ui-state-disabled")){if(this.active.children("[aria-haspopup='true']").length){this.expand(e)}else{this.select(e)}}},refresh:function(){var t,i,n,r,o,a=this,s=this.options.icons.submenu,l=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length);n=l.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),i=t.prev(),n=e("<span>").data("ui-menu-submenu-caret",true);a._addClass(n,"ui-menu-icon","ui-icon "+s);i.attr("aria-haspopup","true").prepend(n);t.attr("aria-labelledby",i.attr("id"))}));this._addClass(n,"ui-menu","ui-widget ui-widget-content ui-front");t=l.add(this.element);i=t.find(this.options.items);i.not(".ui-menu-item").each((function(){var t=e(this);if(a._isDivider(t)){a._addClass(t,"ui-menu-divider","ui-widget-content")}}));r=i.not(".ui-menu-item, .ui-menu-divider");o=r.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()});this._addClass(r,"ui-menu-item")._addClass(o,"ui-menu-item-wrapper");i.filter(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!e.contains(this.element[0],this.active[0])){this.blur()}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if(e==="icons"){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e);this.element.attr("aria-disabled",String(e));this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var i,n,r;this.blur(e,e&&e.type==="focus");this._scrollIntoView(t);this.active=t.first();n=this.active.children(".ui-menu-item-wrapper");this._addClass(n,null,"ui-state-active");if(this.options.role){this.element.attr("aria-activedescendant",n.attr("id"))}r=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper");this._addClass(r,null,"ui-state-active");if(e&&e.type==="keydown"){this._close()}else{this.timer=this._delay((function(){this._close()}),this.delay)}i=t.children(".ui-menu");if(i.length&&e&&/^mouse/.test(e.type)){this._startOpening(i)}this.activeMenu=t.parent();this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,r,o,a,s;if(this._hasScroll()){i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0;n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0;r=t.offset().top-this.activeMenu.offset().top-i-n;o=this.activeMenu.scrollTop();a=this.activeMenu.height();s=t.outerHeight();if(r<0){this.activeMenu.scrollTop(o+r)}else if(r+s>a){this.activeMenu.scrollTop(o+r-a+s)}}},blur:function(e,t){if(!t){clearTimeout(this.timer)}if(!this.active){return}this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active");this._trigger("blur",e,{item:this.active});this.active=null},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true"){return}this.timer=this._delay((function(){this._close();this._open(e)}),this.delay)},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true");t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer);this.timer=this._delay((function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));if(!n.length){n=this.element}this._close(n);this.blur(t);this._removeClass(n.find(".ui-state-active"),null,"ui-state-active");this.activeMenu=n}),i?0:this.delay)},_close:function(e){if(!e){e=this.active?this.active.parent():this.element}e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(t&&t.length){this._close();this.focus(e,t)}},expand:function(e){var t=this.active&&this._menuItems(this.active.children(".ui-menu")).first();if(t&&t.length){this._open(t.parent());this._delay((function(){this.focus(e,t)}))}},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_menuItems:function(e){return(e||this.element).find(this.options.items).filter(".ui-menu-item")},_move:function(e,t,i){var n;if(this.active){if(e==="first"||e==="last"){n=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").last()}else{n=this.active[e+"All"](".ui-menu-item").first()}}if(!n||!n.length||!this.active){n=this._menuItems(this.activeMenu)[t]()}this.focus(i,n)},nextPage:function(t){var i,n,r;if(!this.active){this.next(t);return}if(this.isLastItem()){return}if(this._hasScroll()){n=this.active.offset().top;r=this.element.innerHeight();if(e.fn.jquery.indexOf("3.2.")===0){r+=this.element[0].offsetHeight-this.element.outerHeight()}this.active.nextAll(".ui-menu-item").each((function(){i=e(this);return i.offset().top-n-r<0}));this.focus(t,i)}else{this.focus(t,this._menuItems(this.activeMenu)[!this.active?"first":"last"]())}},previousPage:function(t){var i,n,r;if(!this.active){this.next(t);return}if(this.isFirstItem()){return}if(this._hasScroll()){n=this.active.offset().top;r=this.element.innerHeight();if(e.fn.jquery.indexOf("3.2.")===0){r+=this.element[0].offsetHeight-this.element.outerHeight()}this.active.prevAll(".ui-menu-item").each((function(){i=e(this);return i.offset().top-n+r>0}));this.focus(t,i)}else{this.focus(t,this._menuItems(this.activeMenu).first())}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(t,true)}this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return n.test(String.prototype.trim.call(e(this).children(".ui-menu-item-wrapper").text()))}))}});e.widget("ui.autocomplete",{version:"1.14.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var t,i,n,r=this.element[0].nodeName.toLowerCase(),o=r==="textarea",a=r==="input";this.isMultiLine=o||!a&&this.element.prop("contentEditable")==="true";this.valueMethod=this.element[o||a?"val":"text"];this.isNewMenu=true;this._addClass("ui-autocomplete-input");this.element.attr("autocomplete","off");this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly")){t=true;n=true;i=true;return}t=false;n=false;i=false;var o=e.ui.keyCode;switch(r.keyCode){case o.PAGE_UP:t=true;this._move("previousPage",r);break;case o.PAGE_DOWN:t=true;this._move("nextPage",r);break;case o.UP:t=true;this._keyEvent("previous",r);break;case o.DOWN:t=true;this._keyEvent("next",r);break;case o.ENTER:if(this.menu.active){t=true;r.preventDefault();this.menu.select(r)}break;case o.TAB:if(this.menu.active){this.menu.select(r)}break;case o.ESCAPE:if(this.menu.element.is(":visible")){if(!this.isMultiLine){this._value(this.term)}this.close(r);r.preventDefault()}break;default:i=true;this._searchTimeout(r);break}},keypress:function(n){if(t){t=false;if(!this.isMultiLine||this.menu.element.is(":visible")){n.preventDefault()}return}if(i){return}var r=e.ui.keyCode;switch(n.keyCode){case r.PAGE_UP:this._move("previousPage",n);break;case r.PAGE_DOWN:this._move("nextPage",n);break;case r.UP:this._keyEvent("previous",n);break;case r.DOWN:this._keyEvent("next",n);break}},input:function(e){if(n){n=false;e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(e){clearTimeout(this.searching);this.close(e);this._change(e)}});this._initSource();this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._addClass(this.menu.element,"ui-autocomplete","ui-front");this._on(this.menu.element,{mousedown:function(e){e.preventDefault()},menufocus:function(t,i){var n,r;if(this.isNewMenu){this.isNewMenu=false;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur();this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));return}}r=i.item.data("ui-autocomplete-item");if(false!==this._trigger("focus",t,{item:r})){if(t.originalEvent&&/^key/.test(t.originalEvent.type)){this._value(r.value)}}n=i.item.attr("aria-label")||r.value;if(n&&String.prototype.trim.call(n).length){clearTimeout(this.liveRegionTimer);this.liveRegionTimer=this._delay((function(){this.liveRegion.html(e("<div>").text(n))}),100)}},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.trigger("focus");this.previous=n}if(false!==this._trigger("select",e,{item:i})){this._value(i.value)}this.term=this._value();this.close(e);this.selectedItem=i}});this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t);if(e==="source"){this._initSource()}if(e==="appendTo"){this.menu.element.appendTo(this._appendTo())}if(e==="disabled"&&t&&this.xhr){this.xhr.abort()}},_isEventTargetInWidget:function(t){var i=this.menu.element[0];return t.target===this.element[0]||t.target===i||e.contains(i,t.target)},_closeOnClickOutside:function(e){if(!this._isEventTargetInWidget(e)){this.close()}},_appendTo:function(){var t=this.options.appendTo;if(t){t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)}if(!t||!t[0]){t=this.element.closest(".ui-front, dialog")}if(!t.length){t=this.document[0].body}return t},_initSource:function(){var t,i,n=this;if(Array.isArray(this.options.source)){t=this.options.source;this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}}else if(typeof this.options.source==="string"){i=this.options.source;this.source=function(t,r){if(n.xhr){n.xhr.abort()}n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){r(e)},error:function(){r([])}})}}else{this.source=this.options.source}},_searchTimeout:function(e){clearTimeout(this.searching);this.searching=this._delay((function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),n=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(!t||t&&!i&&!n){this.selectedItem=null;this.search(null,e)}}),this.options.delay)},search:function(e,t){e=e!=null?e:this._value();this.term=this._value();if(e.length<this.options.minLength){return this.close(t)}if(this._trigger("search",t)===false){return}return this._search(e)},_search:function(e){this.pending++;this._addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:e},this._response())},_response:function(){var e=++this.requestIndex;return function(t){if(e===this.requestIndex){this.__response(t)}this.pending--;if(!this.pending){this._removeClass("ui-autocomplete-loading")}}.bind(this)},__response:function(e){if(e){e=this._normalize(e)}this._trigger("response",null,{content:e});if(!this.options.disabled&&e&&e.length&&!this.cancelSearch){this._suggest(e);this._trigger("open")}else{this._close()}},close:function(e){this.cancelSearch=true;this._close(e)},_close:function(e){this._off(this.document,"mousedown");if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",e)}},_change:function(e){if(this.previous!==this._value()){this._trigger("change",e,{item:this.selectedItem})}},_normalize:function(t){if(t.length&&t[0].label&&t[0].value){return t}return e.map(t,(function(t){if(typeof t==="string"){return{label:t,value:t}}return e.extend({},t,{label:t.label||t.value,value:t.value||t.label})}))},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t);this.isNewMenu=true;this.menu.refresh();i.show();this._resizeMenu();i.position(e.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next()}this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,(function(e,i){n._renderItemData(t,i)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<div>").text(i.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){if(!this.isMultiLine){this._value(this.term)}this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(e,t);t.preventDefault()}}});e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,(function(e){return n.test(e.label||e.value||e)}))}});e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return}if(t&&t.length){i=this.options.messages.results(t.length)}else{i=this.options.messages.noResults}clearTimeout(this.liveRegionTimer);this.liveRegionTimer=this._delay((function(){this.liveRegion.html(e("<div>").text(i))}),100)}});var Z=e.ui.autocomplete;var J=/ui-corner-([a-z]){2,6}/g;var ee=e.widget("ui.controlgroup",{version:"1.14.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:true,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar");this.refresh()},_destroy:function(){this._callChildMethod("destroy");this.childWidgets.removeData("ui-controlgroup-data");this.element.removeAttr("role");if(this.options.items.controlgroupLabel){this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()}},_initWidgets:function(){var t=this,i=[];e.each(this.options.items,(function(n,r){var o;var a={};if(!r){return}if(n==="controlgroupLabel"){o=t.element.find(r);o.each((function(){var t=e(this);if(t.children(".ui-controlgroup-label-contents").length){return}t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}));t._addClass(o,null,"ui-widget ui-widget-content ui-state-default");i=i.concat(o.get());return}if(!e.fn[n]){return}if(t["_"+n+"Options"]){a=t["_"+n+"Options"]("middle")}else{a={classes:{}}}t.element.find(r).each((function(){var r=e(this);var o=r[n]("instance");var s=e.widget.extend({},a);if(n==="button"&&r.parent(".ui-spinner").length){return}if(!o){o=r[n]()[n]("instance")}if(o){s.classes=t._resolveClassesValues(s.classes,o)}r[n](s);var l=r[n]("widget");e.data(l[0],"ui-controlgroup-data",o?o:r[n]("instance"));i.push(l[0])}))}));this.childWidgets=e(e.uniqueSort(i));this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each((function(){var i=e(this),n=i.data("ui-controlgroup-data");if(n&&n[t]){n[t]()}}))},_updateCornerClass:function(e,t){var i="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all";var n=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,i);this._addClass(e,null,n)},_buildSimpleOptions:function(e,t){var i=this.options.direction==="vertical";var n={classes:{}};n.classes[t]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[e];return n},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");t.classes["ui-spinner-up"]="";t.classes["ui-spinner-down"]="";return t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t=this.options.direction==="vertical";return{width:t?"auto":false,classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(t,i){var n={};e.each(t,(function(e){var r=i.options.classes[e]||"";r=String.prototype.trim.call(r.replace(J,""));n[e]=(r+" "+t[e]).replace(/\s+/g," ")}));return n},_setOption:function(e,t){if(e==="direction"){this._removeClass("ui-controlgroup-"+this.options.direction)}this._super(e,t);if(e==="disabled"){this._callChildMethod(t?"disable":"enable");return}this.refresh()},refresh:function(){var t,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction);if(this.options.direction==="horizontal"){this._addClass(null,"ui-helper-clearfix")}this._initWidgets();t=this.childWidgets;if(this.options.onlyVisible){t=t.filter(":visible")}if(t.length){e.each(["first","last"],(function(e,n){var r=t[n]().data("ui-controlgroup-data");if(r&&i["_"+r.widgetName+"Options"]){var o=i["_"+r.widgetName+"Options"](t.length===1?"only":n);o.classes=i._resolveClassesValues(o.classes,r);r.element[r.widgetName](o)}else{i._updateCornerClass(t[n](),n)}}));this._callChildMethod("refresh")}}});e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.14.1",options:{disabled:null,label:null,icon:true,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,i,n;var r=this._super()||{};this._readType();i=this.element.labels();this.label=e(i[i.length-1]);if(!this.label.length){e.error("No label found for checkboxradio widget")}this.originalLabel="";n=this.label.contents().not(this.element[0]);if(n.length){this.originalLabel+=n.clone().wrapAll("<div></div>").parent().html()}if(this.originalLabel){r.label=this.originalLabel}t=this.element[0].disabled;if(t!=null){r.disabled=t}return r},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler();if(this.options.disabled==null){this.options.disabled=this.element[0].disabled}this._setOption("disabled",this.options.disabled);this._addClass("ui-checkboxradio","ui-helper-hidden-accessible");this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget");if(this.type==="radio"){this._addClass(this.label,"ui-checkboxradio-radio-label")}if(this.options.label&&this.options.label!==this.originalLabel){this._updateLabel()}else if(this.originalLabel){this.options.label=this.originalLabel}this._enhance();if(e){this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active")}this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type;if(t!=="input"||!/radio|checkbox/.test(this.type)){e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)}},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t;var i=this.element[0].name;var n="input[name='"+CSS.escape(i)+"']";if(!i){return e([])}if(this.form.length){t=e(this.form[0].elements).filter(n)}else{t=e(n).filter((function(){return e(e(this).prop("form")).length===0}))}return t.not(this.element)},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t);if(this.options.icon&&this.type==="checkbox"){this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t)}if(this.type==="radio"){this._getRadioGroup().each((function(){var t=e(this).checkboxradio("instance");if(t){t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")}}))}},_destroy:function(){this._unbindFormResetHandler();if(this.icon){this.icon.remove();this.iconSpace.remove()}},_setOption:function(e,t){if(e==="label"&&!t){return}this._super(e,t);if(e==="disabled"){this._toggleClass(this.label,null,"ui-state-disabled",t);this.element[0].disabled=t;return}this.refresh()},_updateIcon:function(t){var i="ui-icon ui-icon-background ";if(this.options.icon){if(!this.icon){this.icon=e("<span>");this.iconSpace=e("<span> </span>");this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")}if(this.type==="checkbox"){i+=t?"ui-icon-check ui-state-checked":"ui-icon-blank";this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")}else{i+="ui-icon-blank"}this._addClass(this.icon,"ui-checkboxradio-icon",i);if(!t){this._removeClass(this.icon,null,"ui-icon-check ui-state-checked")}this.icon.prependTo(this.label).after(this.iconSpace)}else if(this.icon!==undefined){this.icon.remove();this.iconSpace.remove();delete this.icon}},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);if(this.icon){e=e.not(this.icon[0])}if(this.iconSpace){e=e.not(this.iconSpace[0])}e.remove();this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e);this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e);if(this.options.label!==null){this._updateLabel()}if(t!==this.options.disabled){this._setOptions({disabled:t})}}}]);var te=e.ui.checkboxradio;e.widget("ui.button",{version:"1.14.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:true},_getCreateOptions:function(){var e,t=this._super()||{};this.isInput=this.element.is("input");e=this.element[0].disabled;if(e!=null){t.disabled=e}this.originalLabel=this.isInput?this.element.val():this.element.html();if(this.originalLabel){t.label=this.originalLabel}return t},_create:function(){if(!this.option.showLabel&!this.options.icon){this.options.showLabel=true}if(this.options.disabled==null){this.options.disabled=this.element[0].disabled||false}this.hasTitle=!!this.element.attr("title");if(this.options.label&&this.options.label!==this.originalLabel){if(this.isInput){this.element.val(this.options.label)}else{this.element.html(this.options.label)}}this._addClass("ui-button","ui-widget");this._setOption("disabled",this.options.disabled);this._enhance();if(this.element.is("a")){this._on({keyup:function(t){if(t.keyCode===e.ui.keyCode.SPACE){t.preventDefault();if(this.element[0].click){this.element[0].click()}else{this.element.trigger("click")}}}})}},_enhance:function(){if(!this.element.is("button")){this.element.attr("role","button")}if(this.options.icon){this._updateIcon("icon",this.options.icon);this._updateTooltip()}},_updateTooltip:function(){this.title=this.element.attr("title");if(!this.options.showLabel&&!this.title){this.element.attr("title",this.options.label)}},_updateIcon:function(t,i){var n=t!=="iconPosition",r=n?this.options.iconPosition:i,o=r==="top"||r==="bottom";if(!this.icon){this.icon=e("<span>");this._addClass(this.icon,"ui-button-icon","ui-icon");if(!this.options.showLabel){this._addClass("ui-button-icon-only")}}else if(n){this._removeClass(this.icon,null,this.options.icon)}if(n){this._addClass(this.icon,null,i)}this._attachIcon(r);if(o){this._addClass(this.icon,null,"ui-widget-icon-block");if(this.iconSpace){this.iconSpace.remove()}}else{if(!this.iconSpace){this.iconSpace=e("<span> </span>");this._addClass(this.iconSpace,"ui-button-icon-space")}this._removeClass(this.icon,null,"ui-wiget-icon-block");this._attachIconSpace(r)}},_destroy:function(){this.element.removeAttr("role");if(this.icon){this.icon.remove()}if(this.iconSpace){this.iconSpace.remove()}if(!this.hasTitle){this.element.removeAttr("title")}},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=e.showLabel===undefined?this.options.showLabel:e.showLabel,i=e.icon===undefined?this.options.icon:e.icon;if(!t&&!i){e.showLabel=true}this._super(e)},_setOption:function(e,t){if(e==="icon"){if(t){this._updateIcon(e,t)}else if(this.icon){this.icon.remove();if(this.iconSpace){this.iconSpace.remove()}}}if(e==="iconPosition"){this._updateIcon(e,t)}if(e==="showLabel"){this._toggleClass("ui-button-icon-only",null,!t);this._updateTooltip()}if(e==="label"){if(this.isInput){this.element.val(t)}else{this.element.html(t);if(this.icon){this._attachIcon(this.options.iconPosition);this._attachIconSpace(this.options.iconPosition)}}}this._super(e,t);if(e==="disabled"){this._toggleClass(null,"ui-state-disabled",t);this.element[0].disabled=t;if(t){this.element.trigger("blur")}}},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");if(e!==this.options.disabled){this._setOptions({disabled:e})}this._updateTooltip()}});if(e.uiBackCompat===true){e.widget("ui.button",e.ui.button,{options:{text:true,icons:{primary:null,secondary:null}},_create:function(){if(this.options.showLabel&&!this.options.text){this.options.showLabel=this.options.text}if(!this.options.showLabel&&this.options.text){this.options.text=this.options.showLabel}if(!this.options.icon&&(this.options.icons.primary||this.options.icons.secondary)){if(this.options.icons.primary){this.options.icon=this.options.icons.primary}else{this.options.icon=this.options.icons.secondary;this.options.iconPosition="end"}}else if(this.options.icon){this.options.icons.primary=this.options.icon}this._super()},_setOption:function(e,t){if(e==="text"){this._super("showLabel",t);return}if(e==="showLabel"){this.options.text=t}if(e==="icon"){this.options.icons.primary=t}if(e==="icons"){if(t.primary){this._super("icon",t.primary);this._super("iconPosition","beginning")}else if(t.secondary){this._super("icon",t.secondary);this._super("iconPosition","end")}}this._superApply(arguments)}});e.fn.button=function(t){return function(i){var n=typeof i==="string";var r=Array.prototype.slice.call(arguments,1);var o=this;if(n){if(!this.length&&i==="instance"){o=undefined}else{this.each((function(){var t;var n=e(this).attr("type");var a=n!=="checkbox"&&n!=="radio"?"button":"checkboxradio";var s=e.data(this,"ui-"+a);if(i==="instance"){o=s;return false}if(!s){return e.error("cannot call methods on button"+" prior to initialization; "+"attempted to call method '"+i+"'")}if(typeof s[i]!=="function"||i.charAt(0)==="_"){return e.error("no such method '"+i+"' for button"+" widget instance")}t=s[i].apply(s,r);if(t!==s&&t!==undefined){o=t&&t.jquery?o.pushStack(t.get()):t;return false}}))}}else{if(r.length){i=e.widget.extend.apply(null,[i].concat(r))}this.each((function(){var n=e(this).attr("type");var r=n!=="checkbox"&&n!=="radio"?"button":"checkboxradio";var o=e.data(this,"ui-"+r);if(o){o.option(i||{});if(o._init){o._init()}}else{if(r==="button"){t.call(e(this),i);return}e(this).checkboxradio(e.extend({icon:false},i))}}))}return o}}(e.fn.button);e.fn.buttonset=function(){if(!e.ui.controlgroup){e.error("Controlgroup widget missing")}if(arguments[0]==="option"&&arguments[1]==="items"&&arguments[2]){return this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]])}if(arguments[0]==="option"&&arguments[1]==="items"){return this.controlgroup.apply(this,[arguments[0],"items.button"])}if(typeof arguments[0]==="object"&&arguments[0].items){arguments[0].items={button:arguments[0].items}}return this.controlgroup.apply(this,arguments)}}var ie=e.ui.button;e.extend(e.ui,{datepicker:{version:"1.14.1"}});var ne;function re(e){var t,i;while(e.length&&e[0]!==document){t=e.css("position");if(t==="absolute"||t==="relative"||t==="fixed"){i=parseInt(e.css("zIndex"),10);if(!isNaN(i)&&i!==0){return i}}e=e.parent()}return 0}function oe(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:"",selectMonthLabel:"Select month",selectYearLabel:"Select year"};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,onUpdateDatepicker:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};e.extend(this._defaults,this.regional[""]);this.regional.en=e.extend(true,{},this.regional[""]);this.regional["en-US"]=e.extend(true,{},this.regional.en);this.dpDiv=ae(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}e.extend(oe.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){le(this._defaults,e||{});return this},_attachDatepicker:function(t,i){var n,r,o;n=t.nodeName.toLowerCase();r=n==="div"||n==="span";if(!t.id){this.uuid+=1;t.id="dp"+this.uuid}o=this._newInst(e(t),r);o.settings=e.extend({},i||{});if(n==="input"){this._connectDatepicker(t,o)}else if(r){this._inlineDatepicker(t,o)}},_newInst:function(t,i){var n=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:!i?this.dpDiv:ae(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]);i.trigger=e([]);if(n.hasClass(this.markerClassName)){return}this._attachments(n,i);n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp);this._autoSize(i);e.data(t,"datepicker",i);if(i.settings.disabled){this._disableDatepicker(t)}},_attachments:function(t,i){var n,r,o,a=this._get(i,"appendText"),s=this._get(i,"isRTL");if(i.append){i.append.remove()}if(a){i.append=e("<span>").addClass(this._appendClass).text(a);t[s?"before":"after"](i.append)}t.off("focus",this._showDatepicker);if(i.trigger){i.trigger.remove()}n=this._get(i,"showOn");if(n==="focus"||n==="both"){t.on("focus",this._showDatepicker)}if(n==="button"||n==="both"){r=this._get(i,"buttonText");o=this._get(i,"buttonImage");if(this._get(i,"buttonImageOnly")){i.trigger=e("<img>").addClass(this._triggerClass).attr({src:o,alt:r,title:r})}else{i.trigger=e("<button type='button'>").addClass(this._triggerClass);if(o){i.trigger.html(e("<img>").attr({src:o,alt:r,title:r}))}else{i.trigger.text(r)}}t[s?"before":"after"](i.trigger);i.trigger.on("click",(function(){if(e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]){e.datepicker._hideDatepicker()}else if(e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]){e.datepicker._hideDatepicker();e.datepicker._showDatepicker(t[0])}else{e.datepicker._showDatepicker(t[0])}return false}))}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,r,o=new Date(2009,12-1,20),a=this._get(e,"dateFormat");if(a.match(/[DM]/)){t=function(e){i=0;n=0;for(r=0;r<e.length;r++){if(e[r].length>i){i=e[r].length;n=r}}return n};o.setMonth(t(this._get(e,a.match(/MM/)?"monthNames":"monthNamesShort")));o.setDate(t(this._get(e,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())}e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(t,i){var n=e(t);if(n.hasClass(this.markerClassName)){return}n.addClass(this.markerClassName).append(i.dpDiv);e.data(t,"datepicker",i);this._setDate(i,this._getDefaultDate(i),true);this._updateDatepicker(i);this._updateAlternate(i);if(i.settings.disabled){this._disableDatepicker(t)}i.dpDiv.css("display","block")},_dialogDatepicker:function(t,i,n,r,o){var a,s,l,u,c,d=this._dialogInst;if(!d){this.uuid+=1;a="dp"+this.uuid;this._dialogInput=e("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.on("keydown",this._doKeyDown);e("body").append(this._dialogInput);d=this._dialogInst=this._newInst(this._dialogInput,false);d.settings={};e.data(this._dialogInput[0],"datepicker",d)}le(d.settings,r||{});i=i&&i.constructor===Date?this._formatDate(d,i):i;this._dialogInput.val(i);this._pos=o?o.length?o:[o.pageX,o.pageY]:null;if(!this._pos){s=document.documentElement.clientWidth;l=document.documentElement.clientHeight;u=document.documentElement.scrollLeft||document.body.scrollLeft;c=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[s/2-100+u,l/2-150+c]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");d.settings.onSelect=n;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if(e.blockUI){e.blockUI(this.dpDiv)}e.data(this._dialogInput[0],"datepicker",d);return this},_destroyDatepicker:function(t){var i,n=e(t),r=e.data(t,"datepicker");if(!n.hasClass(this.markerClassName)){return}i=t.nodeName.toLowerCase();e.removeData(t,"datepicker");if(i==="input"){r.append.remove();r.trigger.remove();n.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)}else if(i==="div"||i==="span"){n.removeClass(this.markerClassName).empty()}e.datepicker._hideDatepicker();if(ne===r){ne=null;this._curInst=null}},_enableDatepicker:function(t){var i,n,r=e(t),o=e.data(t,"datepicker");if(!r.hasClass(this.markerClassName)){return}i=t.nodeName.toLowerCase();if(i==="input"){t.disabled=false;o.trigger.filter("button").each((function(){this.disabled=false})).end().filter("img").css({opacity:"1.0",cursor:""})}else if(i==="div"||i==="span"){n=r.children("."+this._inlineClass);n.children().removeClass("ui-state-disabled");n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false)}this._disabledInputs=e.map(this._disabledInputs,(function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,n,r=e(t),o=e.data(t,"datepicker");if(!r.hasClass(this.markerClassName)){return}i=t.nodeName.toLowerCase();if(i==="input"){t.disabled=true;o.trigger.filter("button").each((function(){this.disabled=true})).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(i==="div"||i==="span"){n=r.children("."+this._inlineClass);n.children().addClass("ui-state-disabled");n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true)}this._disabledInputs=e.map(this._disabledInputs,(function(e){return e===t?null:e}));this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e){return false}for(var t=0;t<this._disabledInputs.length;t++){if(this._disabledInputs[t]===e){return true}}return false},_getInst:function(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,n){var r,o,a,s,l=this._getInst(t);if(arguments.length===2&&typeof i==="string"){return i==="defaults"?e.extend({},e.datepicker._defaults):l?i==="all"?e.extend({},l.settings):this._get(l,i):null}r=i||{};if(typeof i==="string"){r={};r[i]=n}if(l){if(this._curInst===l){this._hideDatepicker()}o=this._getDateDatepicker(t,true);a=this._getMinMaxDate(l,"min");s=this._getMinMaxDate(l,"max");le(l.settings,r);if(a!==null&&r.dateFormat!==undefined&&r.minDate===undefined){l.settings.minDate=this._formatDate(l,a)}if(s!==null&&r.dateFormat!==undefined&&r.maxDate===undefined){l.settings.maxDate=this._formatDate(l,s)}if("disabled"in r){if(r.disabled){this._disableDatepicker(t)}else{this._enableDatepicker(t)}}this._attachments(e(t),l);this._autoSize(l);this._setDate(l,o);this._updateAlternate(l);this._updateDatepicker(l)}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);if(t){this._updateDatepicker(t)}},_setDateDatepicker:function(e,t){var i=this._getInst(e);if(i){this._setDate(i,t);this._updateDatepicker(i);this._updateAlternate(i)}},_getDateDatepicker:function(e,t){var i=this._getInst(e);if(i&&!i.inline){this._setDateFromField(i,t)}return i?this._getDate(i):null},_doKeyDown:function(t){var i,n,r,o=e.datepicker._getInst(t.target),a=true,s=o.dpDiv.is(".ui-datepicker-rtl");o._keyEvent=true;if(e.datepicker._datepickerShowing){switch(t.keyCode){case 9:e.datepicker._hideDatepicker();a=false;break;case 13:r=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",o.dpDiv);if(r[0]){e.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,r[0])}i=e.datepicker._get(o,"onSelect");if(i){n=e.datepicker._formatDate(o);i.apply(o.input?o.input[0]:null,[n,o])}else{e.datepicker._hideDatepicker()}return false;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 35:if(t.ctrlKey||t.metaKey){e.datepicker._clearDate(t.target)}a=t.ctrlKey||t.metaKey;break;case 36:if(t.ctrlKey||t.metaKey){e.datepicker._gotoToday(t.target)}a=t.ctrlKey||t.metaKey;break;case 37:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,s?+1:-1,"D")}a=t.ctrlKey||t.metaKey;if(t.originalEvent.altKey){e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M")}break;case 38:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,-7,"D")}a=t.ctrlKey||t.metaKey;break;case 39:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,s?-1:+1,"D")}a=t.ctrlKey||t.metaKey;if(t.originalEvent.altKey){e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M")}break;case 40:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,+7,"D")}a=t.ctrlKey||t.metaKey;break;default:a=false}}else if(t.keyCode===36&&t.ctrlKey){e.datepicker._showDatepicker(this)}else{a=false}if(a){t.preventDefault();t.stopPropagation()}},_doKeyPress:function(t){var i,n,r=e.datepicker._getInst(t.target);if(e.datepicker._get(r,"constrainInput")){i=e.datepicker._possibleChars(e.datepicker._get(r,"dateFormat"));n=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode);return t.ctrlKey||t.metaKey||(n<" "||!i||i.indexOf(n)>-1)}},_doKeyUp:function(t){var i,n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal){try{i=e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n));if(i){e.datepicker._setDateFromField(n);e.datepicker._updateAlternate(n);e.datepicker._updateDatepicker(n)}}catch(e){}}return true},_showDatepicker:function(t){t=t.target||t;if(t.nodeName.toLowerCase()!=="input"){t=e("input",t.parentNode)[0]}if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t){return}var i,n,r,o,a,s,l;i=e.datepicker._getInst(t);if(e.datepicker._curInst&&e.datepicker._curInst!==i){e.datepicker._curInst.dpDiv.stop(true,true);if(i&&e.datepicker._datepickerShowing){e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])}}n=e.datepicker._get(i,"beforeShow");r=n?n.apply(t,[t,i]):{};if(r===false){return}le(i.settings,r);i.lastVal=null;e.datepicker._lastInput=t;e.datepicker._setDateFromField(i);if(e.datepicker._inDialog){t.value=""}if(!e.datepicker._pos){e.datepicker._pos=e.datepicker._findPos(t);e.datepicker._pos[1]+=t.offsetHeight}o=false;e(t).parents().each((function(){o|=e(this).css("position")==="fixed";return!o}));a={left:e.datepicker._pos[0],top:e.datepicker._pos[1]};e.datepicker._pos=null;i.dpDiv.empty();i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});e.datepicker._updateDatepicker(i);a=e.datepicker._checkOffset(i,a,o);i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"});if(!i.inline){s=e.datepicker._get(i,"showAnim");l=e.datepicker._get(i,"duration");i.dpDiv.css("z-index",re(e(t))+1);e.datepicker._datepickerShowing=true;if(e.effects&&e.effects.effect[s]){i.dpDiv.show(s,e.datepicker._get(i,"showOptions"),l)}else{i.dpDiv[s||"show"](s?l:null)}if(e.datepicker._shouldFocusInput(i)){i.input.trigger("focus")}e.datepicker._curInst=i}},_updateDatepicker:function(t){this.maxRows=4;ne=t;t.dpDiv.empty().append(this._generateHTML(t));this._attachHandlers(t);var i,n=this._getNumberOfMonths(t),r=n[1],o=17,a=t.dpDiv.find("."+this._dayOverClass+" a"),s=e.datepicker._get(t,"onUpdateDatepicker");if(a.length>0){se.apply(a.get(0))}t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(r>1){t.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",o*r+"em")}t.dpDiv[(n[0]!==1||n[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)){t.input.trigger("focus")}if(t.yearshtml){i=t.yearshtml;setTimeout((function(){if(i===t.yearshtml&&t.yearshtml){t.dpDiv.find("select.ui-datepicker-year").first().replaceWith(t.yearshtml)}i=t.yearshtml=null}),0)}if(s){s.apply(t.input?t.input[0]:null,[t])}},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")},_checkOffset:function(t,i,n){var r=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),a=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),u=document.documentElement.clientHeight+(n?0:e(document).scrollTop());i.left-=this._get(t,"isRTL")?r-a:0;i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0;i.top-=n&&i.top===t.input.offset().top+s?e(document).scrollTop():0;i.left-=Math.min(i.left,i.left+r>l&&l>r?Math.abs(i.left+r-l):0);i.top-=Math.min(i.top,i.top+o>u&&u>o?Math.abs(o+s):0);return i},_findPos:function(t){var i,n=this._getInst(t),r=this._get(n,"isRTL");while(t&&(t.type==="hidden"||t.nodeType!==1||e.expr.pseudos.hidden(t))){t=t[r?"previousSibling":"nextSibling"]}i=e(t).offset();return[i.left,i.top]},_hideDatepicker:function(t){var i,n,r,o,a=this._curInst;if(!a||t&&a!==e.data(t,"datepicker")){return}if(this._datepickerShowing){i=this._get(a,"showAnim");n=this._get(a,"duration");r=function(){e.datepicker._tidyDialog(a)};if(e.effects&&e.effects.effect[i]){a.dpDiv.hide(i,e.datepicker._get(a,"showOptions"),n,r)}else{a.dpDiv[i==="slideDown"?"slideUp":i==="fadeIn"?"fadeOut":"hide"](i?n:null,r)}if(!i){r()}this._datepickerShowing=false;o=this._get(a,"onClose");if(o){o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(e.blockUI){e.unblockUI();e("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(!e.datepicker._curInst){return}var i=e(t.target),n=e.datepicker._getInst(i[0]);if(i[0].id!==e.datepicker._mainDivId&&i.parents("#"+e.datepicker._mainDivId).length===0&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&!(e.datepicker._inDialog&&e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==n){e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var r=e(t),o=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0])){return}this._adjustInstDate(o,i,n);this._updateDatepicker(o)},_gotoToday:function(t){var i,n=e(t),r=this._getInst(n[0]);if(this._get(r,"gotoCurrent")&&r.currentDay){r.selectedDay=r.currentDay;r.drawMonth=r.selectedMonth=r.currentMonth;r.drawYear=r.selectedYear=r.currentYear}else{i=new Date;r.selectedDay=i.getDate();r.drawMonth=r.selectedMonth=i.getMonth();r.drawYear=r.selectedYear=i.getFullYear()}this._notifyChange(r);this._adjustDate(n)},_selectMonthYear:function(t,i,n){var r=e(t),o=this._getInst(r[0]);o["selected"+(n==="M"?"Month":"Year")]=o["draw"+(n==="M"?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10);this._notifyChange(o);this._adjustDate(r)},_selectDay:function(t,i,n,r){var o,a=e(t);if(e(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])){return}o=this._getInst(a[0]);o.selectedDay=o.currentDay=parseInt(e("a",r).attr("data-date"));o.selectedMonth=o.currentMonth=i;o.selectedYear=o.currentYear=n;this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,r=e(t),o=this._getInst(r[0]);i=i!=null?i:this._formatDate(o);if(o.input){o.input.val(i)}this._updateAlternate(o);n=this._get(o,"onSelect");if(n){n.apply(o.input?o.input[0]:null,[i,o])}else if(o.input){o.input.trigger("change")}if(o.inline){this._updateDatepicker(o)}else{this._hideDatepicker();this._lastInput=o.input[0];if(typeof o.input[0]!=="object"){o.input.trigger("focus")}this._lastInput=null}},_updateAlternate:function(t){var i,n,r,o=this._get(t,"altField");if(o){i=this._get(t,"altFormat")||this._get(t,"dateFormat");n=this._getDate(t);r=this.formatDate(i,n,this._getFormatConfig(t));e(document).find(o).val(r)}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());i.setDate(i.getDate()+4-(i.getDay()||7));t=i.getTime();i.setMonth(0);i.setDate(1);return Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,n){if(t==null||i==null){throw"Invalid arguments"}i=typeof i==="object"?i.toString():i+"";if(i===""){return null}var r,o,a,s=0,l=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u=typeof l!=="string"?l:(new Date).getFullYear()%100+parseInt(l,10),c=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,d=(n?n.dayNames:null)||this._defaults.dayNames,f=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,p=(n?n.monthNames:null)||this._defaults.monthNames,h=-1,g=-1,m=-1,v=-1,y=false,b,_=function(e){var i=r+1<t.length&&t.charAt(r+1)===e;if(i){r++}return i},w=function(e){var t=_(e),n=e==="@"?14:e==="!"?20:e==="y"&&t?4:e==="o"?3:2,r=e==="y"?n:1,o=new RegExp("^\\d{"+r+","+n+"}"),a=i.substring(s).match(o);if(!a){throw"Missing number at position "+s}s+=a[0].length;return parseInt(a[0],10)},C=function(t,n,r){var o=-1,a=e.map(_(t)?r:n,(function(e,t){return[[t,e]]})).sort((function(e,t){return-(e[1].length-t[1].length)}));e.each(a,(function(e,t){var n=t[1];if(i.substr(s,n.length).toLowerCase()===n.toLowerCase()){o=t[0];s+=n.length;return false}}));if(o!==-1){return o+1}else{throw"Unknown name at position "+s}},A=function(){if(i.charAt(s)!==t.charAt(r)){throw"Unexpected literal at position "+s}s++};for(r=0;r<t.length;r++){if(y){if(t.charAt(r)==="'"&&!_("'")){y=false}else{A()}}else{switch(t.charAt(r)){case"d":m=w("d");break;case"D":C("D",c,d);break;case"o":v=w("o");break;case"m":g=w("m");break;case"M":g=C("M",f,p);break;case"y":h=w("y");break;case"@":b=new Date(w("@"));h=b.getFullYear();g=b.getMonth()+1;m=b.getDate();break;case"!":b=new Date((w("!")-this._ticksTo1970)/1e4);h=b.getFullYear();g=b.getMonth()+1;m=b.getDate();break;case"'":if(_("'")){A()}else{y=true}break;default:A()}}}if(s<i.length){a=i.substr(s);if(!/^\s+/.test(a)){throw"Extra/unparsed characters found in date: "+a}}if(h===-1){h=(new Date).getFullYear()}else if(h<100){h+=(new Date).getFullYear()-(new Date).getFullYear()%100+(h<=u?0:-100)}if(v>-1){g=1;m=v;do{o=this._getDaysInMonth(h,g-1);if(m<=o){break}g++;m-=o}while(true)}b=this._daylightSavingAdjust(new Date(h,g-1,m));if(b.getFullYear()!==h||b.getMonth()+1!==g||b.getDate()!==m){throw"Invalid date"}return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7,formatDate:function(e,t,i){if(!t){return""}var n,r=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,s=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=n+1<e.length&&e.charAt(n+1)===t;if(i){n++}return i},u=function(e,t,i){var n=""+t;if(l(e)){while(n.length<i){n="0"+n}}return n},c=function(e,t,i,n){return l(e)?n[t]:i[t]},d="",f=false;if(t){for(n=0;n<e.length;n++){if(f){if(e.charAt(n)==="'"&&!l("'")){f=false}else{d+=e.charAt(n)}}else{switch(e.charAt(n)){case"d":d+=u("d",t.getDate(),2);break;case"D":d+=c("D",t.getDay(),r,o);break;case"o":d+=u("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=u("m",t.getMonth()+1,2);break;case"M":d+=c("M",t.getMonth(),a,s);break;case"y":d+=l("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=t.getTime()*1e4+this._ticksTo1970;break;case"'":if(l("'")){d+="'"}else{f=true}break;default:d+=e.charAt(n)}}}}return d},_possibleChars:function(e){var t,i="",n=false,r=function(i){var n=t+1<e.length&&e.charAt(t+1)===i;if(n){t++}return n};for(t=0;t<e.length;t++){if(n){if(e.charAt(t)==="'"&&!r("'")){n=false}else{i+=e.charAt(t)}}else{switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":if(r("'")){i+="'"}else{n=true}break;default:i+=e.charAt(t)}}}return i},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal){return}var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,r=this._getDefaultDate(e),o=r,a=this._getFormatConfig(e);try{o=this.parseDate(i,n,a)||r}catch(e){n=t?"":n}e.selectedDay=o.getDate();e.drawMonth=e.selectedMonth=o.getMonth();e.drawYear=e.selectedYear=o.getFullYear();e.currentDay=n?o.getDate():0;e.currentMonth=n?o.getMonth():0;e.currentYear=n?o.getFullYear():0;this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var r=function(e){var t=new Date;t.setDate(t.getDate()+e);return t},o=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(e){}var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,r=n.getFullYear(),o=n.getMonth(),a=n.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=s.exec(i);while(l){switch(l[2]||"d"){case"d":case"D":a+=parseInt(l[1],10);break;case"w":case"W":a+=parseInt(l[1],10)*7;break;case"m":case"M":o+=parseInt(l[1],10);a=Math.min(a,e.datepicker._getDaysInMonth(r,o));break;case"y":case"Y":r+=parseInt(l[1],10);a=Math.min(a,e.datepicker._getDaysInMonth(r,o));break}l=s.exec(i)}return new Date(r,o,a)},a=i==null||i===""?n:typeof i==="string"?o(i):typeof i==="number"?isNaN(i)?n:r(i):new Date(i.getTime());a=a&&a.toString()==="Invalid Date"?n:a;if(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0)}return this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(e){if(!e){return null}e.setHours(e.getHours()>12?e.getHours()+2:0);return e},_setDate:function(e,t,i){var n=!t,r=e.selectedMonth,o=e.selectedYear,a=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=a.getDate();e.drawMonth=e.selectedMonth=e.currentMonth=a.getMonth();e.drawYear=e.selectedYear=e.currentYear=a.getFullYear();if((r!==e.selectedMonth||o!==e.selectedYear)&&!i){this._notifyChange(e)}this._adjustInstDate(e);if(e.input){e.input.val(n?"":this._formatDate(e))}},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()===""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map((function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){e.datepicker._selectMonthYear(n,this,"M");return false},selectYear:function(){e.datepicker._selectMonthYear(n,this,"Y");return false}};e(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])}))},_generateHTML:function(t){var i,n,r,o,a,s,l,u,c,d,f,p,h,g,m,v,y,b,_,w,C,A,E,x,T,S,D,k,O,R,N,P,I,M,L,F,G,$,W,H=new Date,j=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),B=this._get(t,"isRTL"),V=this._get(t,"showButtonPanel"),z=this._get(t,"hideIfNoPrevNext"),U=this._get(t,"navigationAsDateFormat"),Y=this._getNumberOfMonths(t),q=this._get(t,"showCurrentAtPos"),X=this._get(t,"stepMonths"),K=Y[0]!==1||Y[1]!==1,Q=this._daylightSavingAdjust(!t.currentDay?new Date(9999,9,9):new Date(t.currentYear,t.currentMonth,t.currentDay)),Z=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),ee=t.drawMonth-q,te=t.drawYear;if(ee<0){ee+=12;te--}if(J){i=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-Y[0]*Y[1]+1,J.getDate()));i=Z&&i<Z?Z:i;while(this._daylightSavingAdjust(new Date(te,ee,1))>i){ee--;if(ee<0){ee=11;te--}}}t.drawMonth=ee;t.drawYear=te;n=this._get(t,"prevText");n=!U?n:this.formatDate(n,this._daylightSavingAdjust(new Date(te,ee-X,1)),this._getFormatConfig(t));if(this._canAdjustMonth(t,-1,te,ee)){r=e("<a>").attr({class:"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:n}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(B?"e":"w")).text(n))[0].outerHTML}else if(z){r=""}else{r=e("<a>").attr({class:"ui-datepicker-prev ui-corner-all ui-state-disabled",title:n}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(B?"e":"w")).text(n))[0].outerHTML}o=this._get(t,"nextText");o=!U?o:this.formatDate(o,this._daylightSavingAdjust(new Date(te,ee+X,1)),this._getFormatConfig(t));if(this._canAdjustMonth(t,+1,te,ee)){a=e("<a>").attr({class:"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:o}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(B?"w":"e")).text(o))[0].outerHTML}else if(z){a=""}else{a=e("<a>").attr({class:"ui-datepicker-next ui-corner-all ui-state-disabled",title:o}).append(e("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+(B?"w":"e")).text(o))[0].outerHTML}s=this._get(t,"currentText");l=this._get(t,"gotoCurrent")&&t.currentDay?Q:j;s=!U?s:this.formatDate(s,l,this._getFormatConfig(t));u="";if(!t.inline){u=e("<button>").attr({type:"button",class:"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide","data-event":"click"}).text(this._get(t,"closeText"))[0].outerHTML}c="";if(V){c=e("<div class='ui-datepicker-buttonpane ui-widget-content'>").append(B?u:"").append(this._isInRange(t,l)?e("<button>").attr({type:"button",class:"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(s):"").append(B?"":u)[0].outerHTML}d=parseInt(this._get(t,"firstDay"),10);d=isNaN(d)?0:d;f=this._get(t,"showWeek");p=this._get(t,"dayNames");h=this._get(t,"dayNamesMin");g=this._get(t,"monthNames");m=this._get(t,"monthNamesShort");v=this._get(t,"beforeShowDay");y=this._get(t,"showOtherMonths");b=this._get(t,"selectOtherMonths");_=this._getDefaultDate(t);w="";for(A=0;A<Y[0];A++){E="";this.maxRows=4;for(x=0;x<Y[1];x++){T=this._daylightSavingAdjust(new Date(te,ee,t.selectedDay));S=" ui-corner-all";D="";if(K){D+="<div class='ui-datepicker-group";if(Y[1]>1){switch(x){case 0:D+=" ui-datepicker-group-first";S=" ui-corner-"+(B?"right":"left");break;case Y[1]-1:D+=" ui-datepicker-group-last";S=" ui-corner-"+(B?"left":"right");break;default:D+=" ui-datepicker-group-middle";S="";break}}D+="'>"}D+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&A===0?B?a:r:"")+(/all|right/.test(S)&&A===0?B?r:a:"")+this._generateMonthYearHeader(t,ee,te,Z,J,A>0||x>0,g,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";k=f?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"";for(C=0;C<7;C++){O=(C+d)%7;k+="<th scope='col'"+((C+d+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+p[O]+"'>"+h[O]+"</span></th>"}D+=k+"</tr></thead><tbody>";R=this._getDaysInMonth(te,ee);if(te===t.selectedYear&&ee===t.selectedMonth){t.selectedDay=Math.min(t.selectedDay,R)}N=(this._getFirstDayOfMonth(te,ee)-d+7)%7;P=Math.ceil((N+R)/7);I=K?this.maxRows>P?this.maxRows:P:P;this.maxRows=I;M=this._daylightSavingAdjust(new Date(te,ee,1-N));for(L=0;L<I;L++){D+="<tr>";F=!f?"":"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(M)+"</td>";for(C=0;C<7;C++){G=v?v.apply(t.input?t.input[0]:null,[M]):[true,""];$=M.getMonth()!==ee;W=$&&!b||!G[0]||Z&&M<Z||J&&M>J;F+="<td class='"+((C+d+6)%7>=5?" ui-datepicker-week-end":"")+($?" ui-datepicker-other-month":"")+(M.getTime()===T.getTime()&&ee===t.selectedMonth&&t._keyEvent||_.getTime()===M.getTime()&&_.getTime()===T.getTime()?" "+this._dayOverClass:"")+(W?" "+this._unselectableClass+" ui-state-disabled":"")+($&&!y?"":" "+G[1]+(M.getTime()===Q.getTime()?" "+this._currentClass:"")+(M.getTime()===j.getTime()?" ui-datepicker-today":""))+"'"+((!$||y)&&G[2]?" title='"+G[2].replace(/'/g,"&#39;")+"'":"")+(W?"":" data-handler='selectDay' data-event='click' data-month='"+M.getMonth()+"' data-year='"+M.getFullYear()+"'")+">"+($&&!y?"&#xa0;":W?"<span class='ui-state-default'>"+M.getDate()+"</span>":"<a class='ui-state-default"+(M.getTime()===j.getTime()?" ui-state-highlight":"")+(M.getTime()===Q.getTime()?" ui-state-active":"")+($?" ui-priority-secondary":"")+"' href='#' aria-current='"+(M.getTime()===Q.getTime()?"true":"false")+"' data-date='"+M.getDate()+"'>"+M.getDate()+"</a>")+"</td>";M.setDate(M.getDate()+1);M=this._daylightSavingAdjust(M)}D+=F+"</tr>"}ee++;if(ee>11){ee=0;te++}D+="</tbody></table>"+(K?"</div>"+(Y[0]>0&&x===Y[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");E+=D}w+=E}w+=c;t._keyEvent=false;return w},_generateMonthYearHeader:function(e,t,i,n,r,o,a,s){var l,u,c,d,f,p,h,g,m=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b=this._get(e,"selectMonthLabel"),_=this._get(e,"selectYearLabel"),w="<div class='ui-datepicker-title'>",C="";if(o||!m){C+="<span class='ui-datepicker-month'>"+a[t]+"</span>"}else{l=n&&n.getFullYear()===i;u=r&&r.getFullYear()===i;C+="<select class='ui-datepicker-month' aria-label='"+b+"' data-handler='selectMonth' data-event='change'>";for(c=0;c<12;c++){if((!l||c>=n.getMonth())&&(!u||c<=r.getMonth())){C+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+s[c]+"</option>"}}C+="</select>"}if(!y){w+=C+(o||!(m&&v)?"&#xa0;":"")}if(!e.yearshtml){e.yearshtml="";if(o||!v){w+="<span class='ui-datepicker-year'>"+i+"</span>"}else{d=this._get(e,"yearRange").split(":");f=(new Date).getFullYear();p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?f+parseInt(e,10):parseInt(e,10);return isNaN(t)?f:t};h=p(d[0]);g=Math.max(h,p(d[1]||""));h=n?Math.max(h,n.getFullYear()):h;g=r?Math.min(g,r.getFullYear()):g;e.yearshtml+="<select class='ui-datepicker-year' aria-label='"+_+"' data-handler='selectYear' data-event='change'>";for(;h<=g;h++){e.yearshtml+="<option value='"+h+"'"+(h===i?" selected='selected'":"")+">"+h+"</option>"}e.yearshtml+="</select>";w+=e.yearshtml;e.yearshtml=null}}w+=this._get(e,"yearSuffix");if(y){w+=(o||!(m&&v)?"&#xa0;":"")+C}w+="</div>";return w},_adjustInstDate:function(e,t,i){var n=e.selectedYear+(i==="Y"?t:0),r=e.selectedMonth+(i==="M"?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(n,r))+(i==="D"?t:0),a=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,r,o)));e.selectedDay=a.getDate();e.drawMonth=e.selectedMonth=a.getMonth();e.drawYear=e.selectedYear=a.getFullYear();if(i==="M"||i==="Y"){this._notifyChange(e)}},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),r=i&&t<i?i:t;return n&&r>n?n:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");if(t){t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])}},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t==="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var r=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(i,n+(t<0?t:r[0]*r[1]),1));if(t<0){o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth()))}return this._isInRange(e,o)},_isInRange:function(e,t){var i,n,r=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),a=null,s=null,l=this._get(e,"yearRange");if(l){i=l.split(":");n=(new Date).getFullYear();a=parseInt(i[0],10);s=parseInt(i[1],10);if(i[0].match(/[+\-].*/)){a+=n}if(i[1].match(/[+\-].*/)){s+=n}}return(!r||t.getTime()>=r.getTime())&&(!o||t.getTime()<=o.getTime())&&(!a||t.getFullYear()>=a)&&(!s||t.getFullYear()<=s)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");t=typeof t!=="string"?t:(new Date).getFullYear()%100+parseInt(t,10);return{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){if(!t){e.currentDay=e.selectedDay;e.currentMonth=e.selectedMonth;e.currentYear=e.selectedYear}var r=t?typeof t==="object"?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}});function ae(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",i,(function(){e(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){e(this).removeClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){e(this).removeClass("ui-datepicker-next-hover")}})).on("mouseover",i,se)}function se(){if(!e.datepicker._isDisabledDatepicker(ne.inline?ne.dpDiv.parent()[0]:ne.input[0])){e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");e(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){e(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){e(this).addClass("ui-datepicker-next-hover")}}}function le(t,i){e.extend(t,i);for(var n in i){if(i[n]==null){t[n]=i[n]}}return t}e.fn.datepicker=function(t){if(!this.length){return this}if(!e.datepicker.initialized){e(document).on("mousedown",e.datepicker._checkExternalClick);e.datepicker.initialized=true}if(e("#"+e.datepicker._mainDivId).length===0){e("body").append(e.datepicker.dpDiv)}var i=Array.prototype.slice.call(arguments,1);if(typeof t==="string"&&(t==="isDisabled"||t==="getDate"||t==="widget")){return e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))}if(t==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))}return this.each((function(){if(typeof t==="string"){e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i))}else{e.datepicker._attachDatepicker(this,t)}}))};e.datepicker=new oe;e.datepicker.initialized=false;e.datepicker.uuid=(new Date).getTime();e.datepicker.version="1.14.1";var ue=e.datepicker;var ce=false;e(document).on("mouseup",(function(){ce=false}));var de=e.widget("ui.mouse",{version:"1.14.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).on("click."+this.widgetName,(function(i){if(true===e.data(i.target,t.widgetName+".preventClickEvent")){e.removeData(i.target,t.widgetName+".preventClickEvent");i.stopImmediatePropagation();return false}}));this.started=false},_mouseDestroy:function(){this.element.off("."+this.widgetName);if(this._mouseMoveDelegate){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(t){if(ce){return}this._mouseMoved=false;if(this._mouseStarted){this._mouseUp(t)}this._mouseDownEvent=t;var i=this,n=t.which===1,r=typeof this.options.cancel==="string"?e(t.target).closest(this.options.cancel).length:false;if(!n||r||!this._mouseCapture(t)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=true}),this.options.delay)}if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==false;if(!this._mouseStarted){t.preventDefault();return true}}if(true===e.data(t.target,this.widgetName+".preventClickEvent")){e.removeData(t.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(e){return i._mouseMove(e)};this._mouseUpDelegate=function(e){return i._mouseUp(e)};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);t.preventDefault();ce=true;return true},_mouseMove:function(e){if(this._mouseMoved&&!e.which){if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey){this.ignoreMissingWhich=true}else if(!this.ignoreMissingWhich){return this._mouseUp(e)}}if(e.which||e.button){this._mouseMoved=true}if(this._mouseStarted){this._mouseDrag(e);return e.preventDefault()}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==false;if(this._mouseStarted){this._mouseDrag(e)}else{this._mouseUp(e)}}return!this._mouseStarted},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(t.target===this._mouseDownEvent.target){e.data(t.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(t)}if(this._mouseDelayTimer){clearTimeout(this._mouseDelayTimer);delete this._mouseDelayTimer}this.ignoreMissingWhich=false;ce=false;t.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}});var fe=e.ui.plugin={add:function(t,i,n){var r,o=e.ui[t].prototype;for(r in n){o.plugins[r]=o.plugins[r]||[];o.plugins[r].push([i,n[r]])}},call:function(e,t,i,n){var r,o=e.plugins[t];if(!o){return}if(!n&&(!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)){return}for(r=0;r<o.length;r++){if(e.options[o[r][0]]){o[r][1].apply(e.element,i)}}}};e.widget("ui.draggable",e.ui.mouse,{version:"1.14.1",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative()}if(this.options.addClasses){this._addClass("ui-draggable")}this._setHandleClassName();this._mouseInit()},_setOption:function(e,t){this._super(e,t);if(e==="handle"){this._removeHandleClassName();this._setHandleClassName()}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return}this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;if(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0){return false}this.handle=this._getHandle(t);if(!this.handle){return false}this._blurActiveElement(t);this._blockFrames(i.iframeFix===true?"iframe":i.iframeFix);return true},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map((function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]}))},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_blurActiveElement:function(t){var i=this.document[0].activeElement,n=e(t.target);if(n.closest(i).length){return}e(i).trigger("blur")},_mouseStart:function(t){var i=this.options;this.helper=this._createHelper(t);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();if(e.ui.ddmanager){e.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter((function(){return e(this).css("position")==="fixed"})).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(t);this.originalPosition=this.position=this._generatePosition(t,false);this.originalPageX=t.pageX;this.originalPageY=t.pageY;if(i.cursorAt){this._adjustOffsetFromHelper(i.cursorAt)}this._setContainment();if(this._trigger("start",t)===false){this._clear();return false}this._cacheHelperProportions();if(e.ui.ddmanager&&!i.dropBehaviour){e.ui.ddmanager.prepareOffsets(this,t)}this._mouseDrag(t,true);if(e.ui.ddmanager){e.ui.ddmanager.dragStart(this,t)}return true},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset()}this.position=this._generatePosition(t,true);this.positionAbs=this._convertPositionTo("absolute");if(!i){var n=this._uiHash();if(this._trigger("drag",t,n)===false){this._mouseUp(new e.Event("mouseup",t));return false}this.position=n.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if(e.ui.ddmanager){e.ui.ddmanager.drag(this,t)}return false},_mouseStop:function(t){var i=this,n=false;if(e.ui.ddmanager&&!this.options.dropBehaviour){n=e.ui.ddmanager.drop(this,t)}if(this.dropped){n=this.dropped;this.dropped=false}if(this.options.revert==="invalid"&&!n||this.options.revert==="valid"&&n||this.options.revert===true||typeof this.options.revert==="function"&&this.options.revert.call(this.element,n)){e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){if(i._trigger("stop",t)!==false){i._clear()}}))}else{if(this._trigger("stop",t)!==false){this._clear()}}return false},_mouseUp:function(t){this._unblockFrames();if(e.ui.ddmanager){e.ui.ddmanager.dragStop(this,t)}if(this.handleElement.is(t.target)){this.element.trigger("focus")}return e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp(new e.Event("mouseup",{target:this.element[0]}))}else{this._clear()}return this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:true},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var i=this.options,n=typeof i.helper==="function",r=n?e(i.helper.apply(this.element[0],[t])):i.helper==="clone"?this.element.clone().removeAttr("id"):this.element;if(!r.parents("body").length){r.appendTo(i.appendTo==="parent"?this.element[0].parentNode:i.appendTo)}if(n&&r[0]===this.element[0]){this._setPositionRelative()}if(r[0]!==this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))){r.css("position","absolute")}return r},_setPositionRelative:function(){if(!/^(?:r|a|f)/.test(this.element.css("position"))){this.element[0].style.position="relative"}},_adjustOffsetFromHelper:function(e){if(typeof e==="string"){e=e.split(" ")}if(Array.isArray(e)){e={left:+e[0],top:+e[1]||0}}if("left"in e){this.offset.click.left=e.left+this.margins.left}if("right"in e){this.offset.click.left=this.helperProportions.width-e.right+this.margins.left}if("top"in e){this.offset.click.top=e.top+this.margins.top}if("bottom"in e){this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top}},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft();t.top+=this.scrollParent.scrollTop()}if(this._isRootNode(this.offsetParent[0])){t={top:0,left:0}}return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0}}var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(!t?this.scrollParent.scrollTop():0),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(!t?this.scrollParent.scrollLeft():0)}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,r=this.options,o=this.document[0];this.relativeContainer=null;if(!r.containment){this.containment=null;return}if(r.containment==="window"){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(r.containment==="document"){this.containment=[0,0,e(o).width()-this.helperProportions.width-this.margins.left,(e(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(r.containment.constructor===Array){this.containment=r.containment;return}if(r.containment==="parent"){r.containment=this.helper[0].parentNode}i=e(r.containment);n=i[0];if(!n){return}t=/(scroll|auto)/.test(i.css("overflow"));this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=i},_convertPositionTo:function(e,t){if(!t){t=this.position}var i=e==="absolute"?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-(this.cssPosition==="fixed"?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-(this.cssPosition==="fixed"?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,r,o,a=this.options,s=this._isRootNode(this.scrollParent[0]),l=e.pageX,u=e.pageY;if(!s||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}}if(t){if(this.containment){if(this.relativeContainer){n=this.relativeContainer.offset();i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]}else{i=this.containment}if(e.pageX-this.offset.click.left<i[0]){l=i[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<i[1]){u=i[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>i[2]){l=i[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>i[3]){u=i[3]+this.offset.click.top}}if(a.grid){r=a.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY;u=i?r-this.offset.click.top>=i[1]||r-this.offset.click.top>i[3]?r:r-this.offset.click.top>=i[1]?r-a.grid[1]:r+a.grid[1]:r;o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX;l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o}if(a.axis==="y"){l=this.originalPageX}if(a.axis==="x"){u=this.originalPageY}}return{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy()}},_trigger:function(t,i,n){n=n||this._uiHash();e.ui.plugin.call(this,t,[i,n,this],true);if(/^(drag|start|stop)/.test(t)){this.positionAbs=this._convertPositionTo("absolute");n.offset=this.positionAbs}return e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,n){var r=e.extend({},i,{item:n.element});n.sortables=[];e(n.options.connectToSortable).each((function(){var i=e(this).sortable("instance");if(i&&!i.options.disabled){n.sortables.push(i);i.refreshPositions();i._trigger("activate",t,r)}}))},stop:function(t,i,n){var r=e.extend({},i,{item:n.element});n.cancelHelperRemoval=false;e.each(n.sortables,(function(){var e=this;if(e.isOver){e.isOver=0;n.cancelHelperRemoval=true;e.cancelHelperRemoval=false;e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")};e._mouseStop(t);e.options.helper=e.options._helper}else{e.cancelHelperRemoval=true;e._trigger("deactivate",t,r)}}))},drag:function(t,i,n){e.each(n.sortables,(function(){var r=false,o=this;o.positionAbs=n.positionAbs;o.helperProportions=n.helperProportions;o.offset.click=n.offset.click;if(o._intersectsWith(o.containerCache)){r=true;e.each(n.sortables,(function(){this.positionAbs=n.positionAbs;this.helperProportions=n.helperProportions;this.offset.click=n.offset.click;if(this!==o&&this._intersectsWith(this.containerCache)&&e.contains(o.element[0],this.element[0])){r=false}return r}))}if(r){if(!o.isOver){o.isOver=1;n._parent=i.helper.parent();o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",true);o.options._helper=o.options.helper;o.options.helper=function(){return i.helper[0]};t.target=o.currentItem[0];o._mouseCapture(t,true);o._mouseStart(t,true,true);o.offset.click.top=n.offset.click.top;o.offset.click.left=n.offset.click.left;o.offset.parent.left-=n.offset.parent.left-o.offset.parent.left;o.offset.parent.top-=n.offset.parent.top-o.offset.parent.top;n._trigger("toSortable",t);n.dropped=o.element;e.each(n.sortables,(function(){this.refreshPositions()}));n.currentItem=n.element;o.fromOutside=n}if(o.currentItem){o._mouseDrag(t);i.position=o.position}}else{if(o.isOver){o.isOver=0;o.cancelHelperRemoval=true;o.options._revert=o.options.revert;o.options.revert=false;o._trigger("out",t,o._uiHash(o));o._mouseStop(t,true);o.options.revert=o.options._revert;o.options.helper=o.options._helper;if(o.placeholder){o.placeholder.remove()}i.helper.appendTo(n._parent);n._refreshOffsets(t);i.position=n._generatePosition(t,true);n._trigger("fromSortable",t);n.dropped=false;e.each(n.sortables,(function(){this.refreshPositions()}))}}}))}});e.ui.plugin.add("draggable","cursor",{start:function(t,i,n){var r=e("body"),o=n.options;if(r.css("cursor")){o._cursor=r.css("cursor")}r.css("cursor",o.cursor)},stop:function(t,i,n){var r=n.options;if(r._cursor){e("body").css("cursor",r._cursor)}}});e.ui.plugin.add("draggable","opacity",{start:function(t,i,n){var r=e(i.helper),o=n.options;if(r.css("opacity")){o._opacity=r.css("opacity")}r.css("opacity",o.opacity)},stop:function(t,i,n){var r=n.options;if(r._opacity){e(i.helper).css("opacity",r._opacity)}}});e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){if(!i.scrollParentNotHidden){i.scrollParentNotHidden=i.helper.scrollParent(false)}if(i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML"){i.overflowOffset=i.scrollParentNotHidden.offset()}},drag:function(t,i,n){var r=n.options,o=false,a=n.scrollParentNotHidden[0],s=n.document[0];if(a!==s&&a.tagName!=="HTML"){if(!r.axis||r.axis!=="x"){if(n.overflowOffset.top+a.offsetHeight-t.pageY<r.scrollSensitivity){a.scrollTop=o=a.scrollTop+r.scrollSpeed}else if(t.pageY-n.overflowOffset.top<r.scrollSensitivity){a.scrollTop=o=a.scrollTop-r.scrollSpeed}}if(!r.axis||r.axis!=="y"){if(n.overflowOffset.left+a.offsetWidth-t.pageX<r.scrollSensitivity){a.scrollLeft=o=a.scrollLeft+r.scrollSpeed}else if(t.pageX-n.overflowOffset.left<r.scrollSensitivity){a.scrollLeft=o=a.scrollLeft-r.scrollSpeed}}}else{if(!r.axis||r.axis!=="x"){if(t.pageY-e(s).scrollTop()<r.scrollSensitivity){o=e(s).scrollTop(e(s).scrollTop()-r.scrollSpeed)}else if(e(window).height()-(t.pageY-e(s).scrollTop())<r.scrollSensitivity){o=e(s).scrollTop(e(s).scrollTop()+r.scrollSpeed)}}if(!r.axis||r.axis!=="y"){if(t.pageX-e(s).scrollLeft()<r.scrollSensitivity){o=e(s).scrollLeft(e(s).scrollLeft()-r.scrollSpeed)}else if(e(window).width()-(t.pageX-e(s).scrollLeft())<r.scrollSensitivity){o=e(s).scrollLeft(e(s).scrollLeft()+r.scrollSpeed)}}}if(o!==false&&e.ui.ddmanager&&!r.dropBehaviour){e.ui.ddmanager.prepareOffsets(n,t)}}});e.ui.plugin.add("draggable","snap",{start:function(t,i,n){var r=n.options;n.snapElements=[];e(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each((function(){var t=e(this),i=t.offset();if(this!==n.element[0]){n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})}}))},drag:function(t,i,n){var r,o,a,s,l,u,c,d,f,p,h=n.options,g=h.snapTolerance,m=i.offset.left,v=m+n.helperProportions.width,y=i.offset.top,b=y+n.helperProportions.height;for(f=n.snapElements.length-1;f>=0;f--){l=n.snapElements[f].left-n.margins.left;u=l+n.snapElements[f].width;c=n.snapElements[f].top-n.margins.top;d=c+n.snapElements[f].height;if(v<l-g||m>u+g||b<c-g||y>d+g||!e.contains(n.snapElements[f].item.ownerDocument,n.snapElements[f].item)){if(n.snapElements[f].snapping){if(n.options.snap.release){n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[f].item}))}}n.snapElements[f].snapping=false;continue}if(h.snapMode!=="inner"){r=Math.abs(c-b)<=g;o=Math.abs(d-y)<=g;a=Math.abs(l-v)<=g;s=Math.abs(u-m)<=g;if(r){i.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top}if(o){i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top}if(a){i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left}if(s){i.position.left=n._convertPositionTo("relative",{top:0,left:u}).left}}p=r||o||a||s;if(h.snapMode!=="outer"){r=Math.abs(c-y)<=g;o=Math.abs(d-b)<=g;a=Math.abs(l-m)<=g;s=Math.abs(u-v)<=g;if(r){i.position.top=n._convertPositionTo("relative",{top:c,left:0}).top}if(o){i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top}if(a){i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left}if(s){i.position.left=n._convertPositionTo("relative",{top:0,left:u-n.helperProportions.width}).left}}if(!n.snapElements[f].snapping&&(r||o||a||s||p)){if(n.options.snap.snap){n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[f].item}))}}n.snapElements[f].snapping=r||o||a||s||p}}});e.ui.plugin.add("draggable","stack",{start:function(t,i,n){var r,o=n.options,a=e.makeArray(e(o.stack)).sort((function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)}));if(!a.length){return}r=parseInt(e(a[0]).css("zIndex"),10)||0;e(a).each((function(t){e(this).css("zIndex",r+t)}));this.css("zIndex",r+a.length)}});e.ui.plugin.add("draggable","zIndex",{start:function(t,i,n){var r=e(i.helper),o=n.options;if(r.css("zIndex")){o._zIndex=r.css("zIndex")}r.css("zIndex",o.zIndex)},stop:function(t,i,n){var r=n.options;if(r._zIndex){e(i.helper).css("zIndex",r._zIndex)}}});var pe=e.ui.draggable;e.widget("ui.resizable",e.ui.mouse,{version:"1.14.1",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,i){var n,r=false,o=e(t).css("overflow");if(o==="hidden"){return false}if(o==="scroll"){return true}n=i&&i==="left"?"scrollLeft":"scrollTop";if(t[n]>0){return true}try{t[n]=1;r=t[n]>0;t[n]=0}catch(e){}return r},_create:function(){var t,i=this.options,n=this;this._addClass("ui-resizable");e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap(e("<div class='ui-wrapper'></div>").css({overflow:"hidden",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")};this.element.css(t);this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this._proportionallyResize()}this._setupHandles();if(i.autoHide){e(this.element).on("mouseenter",(function(){if(i.disabled){return}n._removeClass("ui-resizable-autohide");n._handles.show()})).on("mouseleave",(function(){if(i.disabled){return}if(!n.resizing){n._addClass("ui-resizable-autohide");n._handles.hide()}}))}this._mouseInit()},_destroy:function(){this._mouseDestroy();this._addedHandles.remove();var t,i=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable")};if(this.elementIsWrapper){i(this.element);t=this.element;this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t);t.remove()}this.originalElement.css("resize",this.originalResizeStyle);i(this.originalElement);return this},_setOption:function(e,t){this._super(e,t);switch(e){case"handles":this._removeHandles();this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!t;break;default:break}},_setupHandles:function(){var t=this.options,i,n,r,o,a,s=this;this.handles=t.handles||(!e(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=e();this._addedHandles=e();if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}r=this.handles.split(",");this.handles={};for(n=0;n<r.length;n++){i=String.prototype.trim.call(r[n]);o="ui-resizable-"+i;a=e("<div>");this._addClass(a,"ui-resizable-handle "+o);a.css({zIndex:t.zIndex});this.handles[i]=".ui-resizable-"+i;if(!this.element.children(this.handles[i]).length){this.element.append(a);this._addedHandles=this._addedHandles.add(a)}}}this._renderAxis=function(t){var i,n,r,o;t=t||this.element;for(i in this.handles){if(this.handles[i].constructor===String){this.handles[i]=this.element.children(this.handles[i]).first().show()}else if(this.handles[i].jquery||this.handles[i].nodeType){this.handles[i]=e(this.handles[i]);this._on(this.handles[i],{mousedown:s._mouseDown})}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){n=e(this.handles[i],this.element);o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth();r=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");t.css(r,o);this._proportionallyResize()}this._handles=this._handles.add(this.handles[i])}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",(function(){if(!s.resizing){if(this.className){a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}s.axis=a&&a[1]?a[1]:"se"}}));if(t.autoHide){this._handles.hide();this._addClass("ui-resizable-autohide")}},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(t){var i,n,r=false;for(i in this.handles){n=e(this.handles[i])[0];if(n===t.target||e.contains(n,t.target)){r=true}}return!this.options.disabled&&r},_mouseStart:function(t){var i,n,r,o,a=this.options,s=this.element;this.resizing=true;this._renderProxy();i=this._num(this.helper.css("left"));n=this._num(this.helper.css("top"));if(a.containment){i+=e(a.containment).scrollLeft()||0;n+=e(a.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:i,top:n};if(!this._helper){o=this._calculateAdjustedElementDimensions(s)}this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width,height:o.height};this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:o.width,height:o.height};this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()};this.originalPosition={left:i,top:n};this.originalMousePosition={left:t.pageX,top:t.pageY};this.aspectRatio=typeof a.aspectRatio==="number"?a.aspectRatio:this.originalSize.width/this.originalSize.height||1;r=e(".ui-resizable-"+this.axis).css("cursor");e("body").css("cursor",r==="auto"?this.axis+"-resize":r);this._addClass("ui-resizable-resizing");this._propagate("start",t);return true},_mouseDrag:function(t){var i,n,r=this.originalMousePosition,o=this.axis,a=t.pageX-r.left||0,s=t.pageY-r.top||0,l=this._change[o];this._updatePrevProperties();if(!l){return false}i=l.apply(this,[t,a,s]);this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey){i=this._updateRatio(i,t)}i=this._respectSize(i,t);this._updateCache(i);this._propagate("resize",t);n=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!e.isEmptyObject(n)){this._updatePrevProperties();this._trigger("resize",t,this.ui());this._applyChanges()}return false},_mouseStop:function(t){this.resizing=false;var i,n,r,o,a,s,l,u=this.options,c=this;if(this._helper){i=this._proportionallyResizeElements;n=i.length&&/textarea/i.test(i[0].nodeName);r=n&&this._hasScroll(i[0],"left")?0:c.sizeDiff.height;o=n?0:c.sizeDiff.width;a={width:c.helper.width()-o,height:c.helper.height()-r};s=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null;l=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null;if(!u.animate){this.element.css(e.extend(a,{top:l,left:s}))}c.helper.height(c.size.height);c.helper.width(c.size.width);if(this._helper&&!u.animate){this._proportionallyResize()}}e("body").css("cursor","auto");this._removeClass("ui-resizable-resizing");this._propagate("stop",t);if(this._helper){this.helper.remove()}return false},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};if(this.position.top!==this.prevPosition.top){e.top=this.position.top+"px"}if(this.position.left!==this.prevPosition.left){e.left=this.position.left+"px"}this.helper.css(e);if(this.size.width!==this.prevSize.width){e.width=this.size.width+"px";this.helper.width(e.width)}if(this.size.height!==this.prevSize.height){e.height=this.size.height+"px";this.helper.height(e.height)}return e},_updateVirtualBoundaries:function(e){var t,i,n,r,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:Infinity,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:Infinity};if(this._aspectRatio||e){t=o.minHeight*this.aspectRatio;n=o.minWidth/this.aspectRatio;i=o.maxHeight*this.aspectRatio;r=o.maxWidth/this.aspectRatio;if(t>o.minWidth){o.minWidth=t}if(n>o.minHeight){o.minHeight=n}if(i<o.maxWidth){o.maxWidth=i}if(r<o.maxHeight){o.maxHeight=r}}this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset();if(this._isNumber(e.left)){this.position.left=e.left}if(this._isNumber(e.top)){this.position.top=e.top}if(this._isNumber(e.height)){this.size.height=e.height}if(this._isNumber(e.width)){this.size.width=e.width}},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;if(this._isNumber(e.height)){e.width=e.height*this.aspectRatio}else if(this._isNumber(e.width)){e.height=e.width/this.aspectRatio}if(n==="sw"){e.left=t.left+(i.width-e.width);e.top=null}if(n==="nw"){e.top=t.top+(i.height-e.height);e.left=t.left+(i.width-e.width)}return e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,r=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,a=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,s=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,u=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);if(o){e.width=t.minWidth}if(a){e.height=t.minHeight}if(n){e.width=t.maxWidth}if(r){e.height=t.maxHeight}if(o&&u){e.left=s-t.minWidth}if(n&&u){e.left=s-t.maxWidth}if(a&&c){e.top=l-t.minHeight}if(r&&c){e.top=l-t.maxHeight}if(!e.width&&!e.height&&!e.left&&e.top){e.top=null}else if(!e.width&&!e.height&&!e.top&&e.left){e.left=null}return e},_getPaddingPlusBorderDimensions:function(e){var t=0,i=[],n=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],r=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];for(;t<4;t++){i[t]=parseFloat(n[t])||0;i[t]+=parseFloat(r[t])||0}return{height:i[0]+i[2],width:i[1]+i[3]}},_calculateAdjustedElementDimensions:function(e){var t,i,n,r=e.get(0);if(e.css("box-sizing")!=="content-box"||!this._hasScroll(r)&&!this._hasScroll(r,"left")){return{height:parseFloat(e.css("height")),width:parseFloat(e.css("width"))}}t=parseFloat(r.style.width);i=parseFloat(r.style.height);n=this._getPaddingPlusBorderDimensions(e);t=isNaN(t)?this._getElementTheoreticalSize(e,n,"width"):t;i=isNaN(i)?this._getElementTheoreticalSize(e,n,"height"):i;return{height:i,width:t}},_getElementTheoreticalSize:function(e,t,i){var n=Math.max(0,Math.ceil(e.get(0)["offset"+i[0].toUpperCase()+i.slice(1)]-t[i]-.5))||0;return n},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return}var e,t=0,i=this.helper||this.element;for(;t<this._proportionallyResizeElements.length;t++){e=this._proportionallyResizeElements[t];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(e)}e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e("<div></div>").css({overflow:"hidden"});this._addClass(this.helper,this._helper);this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize,r=this.originalPosition;return{top:r.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]);if(t!=="resize"){this._trigger(t,i,this.ui())}},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),n=i.options,r=i._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),a=o&&i._hasScroll(r[0],"left")?0:i.sizeDiff.height,s=o?0:i.sizeDiff.width,l={width:i.size.width-s,height:i.size.height-a},u=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,c&&u?{top:c,left:u}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};if(r&&r.length){e(r[0]).css({width:n.width,height:n.height})}i._updateCache(n);i._propagate("resize",t)}})}});e.ui.plugin.add("resizable","containment",{start:function(){var t,i,n,r,o,a,s,l=e(this).resizable("instance"),u=l.options,c=l.element,d=u.containment,f=d instanceof e?d.get(0):/parent/.test(d)?c.parent().get(0):d;if(!f){return}l.containerElement=e(f);if(/document/.test(d)||d===document){l.containerOffset={left:0,top:0};l.containerPosition={left:0,top:0};l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}}else{t=e(f);i=[];e(["Top","Right","Left","Bottom"]).each((function(e,n){i[e]=l._num(t.css("padding"+n))}));l.containerOffset=t.offset();l.containerPosition=t.position();l.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]};n=l.containerOffset;r=l.containerSize.height;o=l.containerSize.width;a=l._hasScroll(f,"left")?f.scrollWidth:o;s=l._hasScroll(f)?f.scrollHeight:r;l.parentData={element:f,left:n.left,top:n.top,width:a,height:s}}},resize:function(t){var i,n,r,o,a=e(this).resizable("instance"),s=a.options,l=a.containerOffset,u=a.position,c=a._aspectRatio||t.shiftKey,d={top:0,left:0},f=a.containerElement,p=true;if(f[0]!==document&&/static/.test(f.css("position"))){d=l}if(u.left<(a._helper?l.left:0)){a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-d.left);if(c){a.size.height=a.size.width/a.aspectRatio;p=false}a.position.left=s.helper?l.left:0}if(u.top<(a._helper?l.top:0)){a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top);if(c){a.size.width=a.size.height*a.aspectRatio;p=false}a.position.top=a._helper?l.top:0}r=a.containerElement.get(0)===a.element.parent().get(0);o=/relative|absolute/.test(a.containerElement.css("position"));if(r&&o){a.offset.left=a.parentData.left+a.position.left;a.offset.top=a.parentData.top+a.position.top}else{a.offset.left=a.element.offset().left;a.offset.top=a.element.offset().top}i=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-d.left:a.offset.left-l.left));n=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-d.top:a.offset.top-l.top));if(i+a.size.width>=a.parentData.width){a.size.width=a.parentData.width-i;if(c){a.size.height=a.size.width/a.aspectRatio;p=false}}if(n+a.size.height>=a.parentData.height){a.size.height=a.parentData.height-n;if(c){a.size.width=a.size.height*a.aspectRatio;p=false}}if(!p){a.position.left=a.prevPosition.left;a.position.top=a.prevPosition.top;a.size.width=a.prevSize.width;a.size.height=a.prevSize.height}},stop:function(){var t=e(this).resizable("instance"),i=t.options,n=t.containerOffset,r=t.containerPosition,o=t.containerElement,a=e(t.helper),s=a.offset(),l=a.outerWidth()-t.sizeDiff.width,u=a.outerHeight()-t.sizeDiff.height;if(t._helper&&!i.animate&&/relative/.test(o.css("position"))){e(this).css({left:s.left-r.left-n.left,width:l,height:u})}if(t._helper&&!i.animate&&/static/.test(o.css("position"))){e(this).css({left:s.left-r.left-n.left,width:l,height:u})}}});e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each((function(){var i=e(this),n=t._calculateAdjustedElementDimensions(i);i.data("ui-resizable-alsoresize",{width:n.width,height:n.height,left:parseFloat(i.css("left")),top:parseFloat(i.css("top"))})}))},resize:function(t,i){var n=e(this).resizable("instance"),r=n.options,o=n.originalSize,a=n.originalPosition,s={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-a.top||0,left:n.position.left-a.left||0};e(r.alsoResize).each((function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),r={},o=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,(function(e,t){var i=(n[t]||0)+(s[t]||0);if(i&&i>=0){r[t]=i||null}}));t.css(r)}))},stop:function(){e(this).removeData("ui-resizable-alsoresize")}});e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.size;t.ghost=t.originalElement.clone();t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0});t._addClass(t.ghost,"ui-resizable-ghost");if(e.uiBackCompat===true&&typeof t.options.ghost==="string"){t.ghost.addClass(this.options.ghost)}t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");if(t.ghost){t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})}},stop:function(){var t=e(this).resizable("instance");if(t.ghost&&t.helper){t.helper.get(0).removeChild(t.ghost.get(0))}}});e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),n=i.options,r=i.size,o=i.originalSize,a=i.originalPosition,s=i.axis,l=typeof n.grid==="number"?[n.grid,n.grid]:n.grid,u=l[0]||1,c=l[1]||1,d=Math.round((r.width-o.width)/u)*u,f=Math.round((r.height-o.height)/c)*c,p=o.width+d,h=o.height+f,g=n.maxWidth&&n.maxWidth<p,m=n.maxHeight&&n.maxHeight<h,v=n.minWidth&&n.minWidth>p,y=n.minHeight&&n.minHeight>h;n.grid=l;if(v){p+=u}if(y){h+=c}if(g){p-=u}if(m){h-=c}if(/^(se|s|e)$/.test(s)){i.size.width=p;i.size.height=h}else if(/^(ne)$/.test(s)){i.size.width=p;i.size.height=h;i.position.top=a.top-f}else if(/^(sw)$/.test(s)){i.size.width=p;i.size.height=h;i.position.left=a.left-d}else{if(h-c<=0||p-u<=0){t=i._getPaddingPlusBorderDimensions(this)}if(h-c>0){i.size.height=h;i.position.top=a.top-f}else{h=c-t.height;i.size.height=h;i.position.top=a.top+o.height-h}if(p-u>0){i.size.width=p;i.position.left=a.left-d}else{p=u-t.width;i.size.width=p;i.position.left=a.left+o.width-p}}}});var he=e.ui.resizable;e.widget("ui.dialog",{version:"1.14.1",options:{appendTo:"body",autoOpen:true,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:true,closeText:"Close",draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;if(i<0){e(this).css("top",t.top-i)}}},resizable:true,show:null,title:null,uiDialogTitleHeadingLevel:0,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions:{maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");if(this.options.title==null&&this.originalTitle!=null){this.options.title=this.originalTitle}if(this.options.disabled){this.options.disabled=false}this._createWrapper();this.element.show().removeAttr("title").appendTo(this.uiDialog);this._addClass("ui-dialog-content","ui-widget-content");this._createTitlebar();this._createButtonPane();if(this.options.draggable&&e.fn.draggable){this._makeDraggable()}if(this.options.resizable&&e.fn.resizable){this._makeResizable()}this._isOpen=false;this._trackFocus()},_init:function(){if(this.options.autoOpen){this.open()}},_appendTo:function(){var t=this.options.appendTo;if(t&&(t.jquery||t.nodeType)){return e(t)}return this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().css(this.originalCss).detach();this.uiDialog.remove();if(this.originalTitle){this.element.attr("title",this.originalTitle)}e=t.parent.children().eq(t.index);if(e.length&&e[0]!==this.element[0]){e.before(this.element)}else{t.parent.append(this.element)}},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i=this;if(!this._isOpen||this._trigger("beforeClose",t)===false){return}this._isOpen=false;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();if(!this.opener.filter(":focusable").trigger("focus").length){e(this.document[0].activeElement).trigger("blur")}this._hide(this.uiDialog,this.options.hide,(function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var n=false,r=this.uiDialog.siblings(".ui-front:visible").map((function(){return+e(this).css("z-index")})).get(),o=Math.max.apply(null,r);if(o>=+this.uiDialog.css("z-index")){this.uiDialog.css("z-index",o+1);n=true}if(n&&!i){this._trigger("focus",t)}return n},open:function(){var t=this;if(this._isOpen){if(this._moveToTop()){this._focusTabbable()}return}this._isOpen=true;this.opener=e(this.document[0].activeElement);this._size();this._position();this._createOverlay();this._moveToTop(null,true);if(this.overlay){this.overlay.css("z-index",this.uiDialog.css("z-index")-1)}this._show(this.uiDialog,this.options.show,(function(){t._focusTabbable();t._trigger("focus")}));this._makeFocusTarget();this._trigger("open")},_focusTabbable:function(){var e=this._focusedElement;if(!e){e=this.element.find("[autofocus]")}if(!e.length){e=this.element.find(":tabbable")}if(!e.length){e=this.uiDialogButtonPane.find(":tabbable")}if(!e.length){e=this.uiDialogTitlebarClose.filter(":tabbable")}if(!e.length){e=this.uiDialog}e.eq(0).trigger("focus")},_restoreTabbableFocus:function(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);if(!i){this._focusTabbable()}},_keepFocus:function(e){e.preventDefault();this._restoreTabbableFocus()},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog","aria-modal":this.options.modal?"true":null}).appendTo(this._appendTo());this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front");this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE){t.preventDefault();this.close(t);return}if(t.keyCode!==e.ui.keyCode.TAB||t.isDefaultPrevented()){return}var i=this.uiDialog.find(":tabbable"),n=i.first(),r=i.last();if((t.target===r[0]||t.target===this.uiDialog[0])&&!t.shiftKey){this._delay((function(){n.trigger("focus")}));t.preventDefault()}else if((t.target===n[0]||t.target===this.uiDialog[0])&&t.shiftKey){this._delay((function(){r.trigger("focus")}));t.preventDefault()}},mousedown:function(e){if(this._moveToTop(e)){this._focusTabbable()}}});if(!this.element.find("[aria-describedby]").length){this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})}},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>");this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix");this._on(this.uiDialogTitlebar,{mousedown:function(t){if(!e(t.target).closest(".ui-dialog-titlebar-close")){this.uiDialog.trigger("focus")}}});this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:false}).appendTo(this.uiDialogTitlebar);this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close");this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault();this.close(e)}});var i=Number.isInteger(this.options.uiDialogTitleHeadingLevel)&&this.options.uiDialogTitleHeadingLevel>0&&this.options.uiDialogTitleHeadingLevel<=6?"h"+this.options.uiDialogTitleHeadingLevel:"span";t=e("<"+i+">").uniqueId().prependTo(this.uiDialogTitlebar);this._addClass(t,"ui-dialog-title");this._title(t);this.uiDialogTitlebar.prependTo(this.uiDialog);this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){if(this.options.title){e.text(this.options.title)}else{e.html("&#160;")}},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>");this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix");this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane);this._addClass(this.uiButtonSet,"ui-dialog-buttonset");this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if(e.isEmptyObject(i)||Array.isArray(i)&&!i.length){this._removeClass(this.uiDialog,"ui-dialog-buttons");return}e.each(i,(function(i,n){var r,o;n=typeof n==="function"?{click:n,text:i}:n;n=e.extend({type:"button"},n);r=n.click;o={icon:n.icon,iconPosition:n.iconPosition,showLabel:n.showLabel,icons:n.icons,text:n.text};delete n.click;delete n.icon;delete n.iconPosition;delete n.showLabel;delete n.icons;if(typeof n.text==="boolean"){delete n.text}e("<button></button>",n).button(o).appendTo(t.uiButtonSet).on("click",(function(){r.apply(t.element[0],arguments)}))}));this._addClass(this.uiDialog,"ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){var t=this,i=this.options;function n(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,r){t._addClass(e(this),"ui-dialog-dragging");t._blockFrames();t._trigger("dragStart",i,n(r))},drag:function(e,i){t._trigger("drag",e,n(i))},stop:function(r,o){var a=o.offset.left-t.document.scrollLeft(),s=o.offset.top-t.document.scrollTop();i.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" "+"top"+(s>=0?"+":"")+s,of:t.window};t._removeClass(e(this),"ui-dialog-dragging");t._unblockFrames();t._trigger("dragStop",r,n(o))}})},_makeResizable:function(){var t=this,i=this.options,n=i.resizable,r=this.uiDialog.css("position"),o=typeof n==="string"?n:"n,e,s,w,se,sw,ne,nw";function a(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:o,start:function(i,n){t._addClass(e(this),"ui-dialog-resizing");t._blockFrames();t._trigger("resizeStart",i,a(n))},resize:function(e,i){t._trigger("resize",e,a(i))},stop:function(n,r){var o=t.uiDialog.offset(),s=o.left-t.document.scrollLeft(),l=o.top-t.document.scrollTop();i.height=t.uiDialog.height();i.width=t.uiDialog.width();i.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" "+"top"+(l>=0?"+":"")+l,of:t.window};t._removeClass(e(this),"ui-dialog-resizing");t._unblockFrames();t._trigger("resizeStop",n,a(r))}}).css("position",r)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget();this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);if(i!==-1){t.splice(i,1)}},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");if(!e){e=[];this.document.data("ui-dialog-instances",e)}return e},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");if(!e){this.uiDialog.show()}this.uiDialog.position(this.options.position);if(!e){this.uiDialog.hide()}},_setOptions:function(t){var i=this,n=false,r={};e.each(t,(function(e,t){i._setOption(e,t);if(e in i.sizeRelatedOptions){n=true}if(e in i.resizableRelatedOptions){r[e]=t}}));if(n){this._size();this._position()}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option",r)}},_setOption:function(t,i){var n,r,o=this.uiDialog;if(t==="disabled"){return}this._super(t,i);if(t==="appendTo"){this.uiDialog.appendTo(this._appendTo())}if(t==="buttons"){this._createButtons()}if(t==="closeText"){this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()})}if(t==="draggable"){n=o.is(":data(ui-draggable)");if(n&&!i){o.draggable("destroy")}if(!n&&i){this._makeDraggable()}}if(t==="position"){this._position()}if(t==="resizable"){r=o.is(":data(ui-resizable)");if(r&&!i){o.resizable("destroy")}if(r&&typeof i==="string"){o.resizable("option","handles",i)}if(!r&&i!==false){this._makeResizable()}}if(t==="title"){this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))}if(t==="modal"){o.attr("aria-modal",i?"true":null)}},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(n.minWidth>n.width){n.width=n.minWidth}e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight();t=Math.max(0,n.minHeight-e);i=typeof n.maxHeight==="number"?Math.max(0,n.maxHeight-e):"none";if(n.height==="auto"){this.element.css({minHeight:t,maxHeight:i,height:"auto"})}else{this.element.height(Math.max(0,n.height-e))}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map((function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]}))},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_allowInteraction:function(t){if(e(t.target).closest(".ui-dialog").length){return true}return!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(!this.options.modal){return}var t=true;this._delay((function(){t=false}));if(!this.document.data("ui-dialog-overlays")){this.document.on("focusin.ui-dialog",function(e){if(t){return}var i=this._trackingInstances()[0];if(!i._allowInteraction(e)){e.preventDefault();i._focusTabbable()}}.bind(this))}this.overlay=e("<div>").appendTo(this._appendTo());this._addClass(this.overlay,null,"ui-widget-overlay ui-front");this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)},_destroyOverlay:function(){if(!this.options.modal){return}if(this.overlay){var e=this.document.data("ui-dialog-overlays")-1;if(!e){this.document.off("focusin.ui-dialog");this.document.removeData("ui-dialog-overlays")}else{this.document.data("ui-dialog-overlays",e)}this.overlay.remove();this.overlay=null}}});if(e.uiBackCompat===true){e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super();this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){if(e==="dialogClass"){this.uiDialog.removeClass(this.options.dialogClass).addClass(t)}this._superApply(arguments)}})}var ge=e.ui.dialog;e.widget("ui.droppable",{version:"1.14.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:true,greedy:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,t=this.options,i=t.accept;this.isover=false;this.isout=true;this.accept=typeof i==="function"?i:function(e){return e.is(i)};this.proportions=function(){if(arguments.length){e=arguments[0]}else{return e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}}};this._addToManager(t.scope);if(t.addClasses){this._addClass("ui-droppable")}},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[];e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){var t=0;for(;t<e.length;t++){if(e[t]===this){e.splice(t,1)}}},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,i){if(t==="accept"){this.accept=typeof i==="function"?i:function(e){return e.is(i)}}else if(t==="scope"){var n=e.ui.ddmanager.droppables[this.options.scope];this._splice(n);this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this._addActiveClass();if(i){this._trigger("activate",t,this.ui(i))}},_deactivate:function(t){var i=e.ui.ddmanager.current;this._removeActiveClass();if(i){this._trigger("deactivate",t,this.ui(i))}},_over:function(t){var i=e.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],i.currentItem||i.element)){this._addHoverClass();this._trigger("over",t,this.ui(i))}},_out:function(t){var i=e.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],i.currentItem||i.element)){this._removeHoverClass();this._trigger("out",t,this.ui(i))}},_drop:function(t,i){var n=i||e.ui.ddmanager.current,r=false;if(!n||(n.currentItem||n.element)[0]===this.element[0]){return false}this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each((function(){var i=e(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===n.options.scope&&i.accept.call(i.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t)){r=true;return false}}));if(r){return false}if(this.accept.call(this.element[0],n.currentItem||n.element)){this._removeActiveClass();this._removeHoverClass();this._trigger("drop",t,this.ui(n));return this.element}return false},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});e.ui.intersect=function(){function e(e,t,i){return e>=t&&e<t+i}return function(t,i,n,r){if(!i.offset){return false}var o=(t.positionAbs||t.position.absolute).left+t.margins.left,a=(t.positionAbs||t.position.absolute).top+t.margins.top,s=o+t.helperProportions.width,l=a+t.helperProportions.height,u=i.offset.left,c=i.offset.top,d=u+i.proportions().width,f=c+i.proportions().height;switch(n){case"fit":return u<=o&&s<=d&&c<=a&&l<=f;case"intersect":return u<o+t.helperProportions.width/2&&s-t.helperProportions.width/2<d&&c<a+t.helperProportions.height/2&&l-t.helperProportions.height/2<f;case"pointer":return e(r.pageY,c,i.proportions().height)&&e(r.pageX,u,i.proportions().width);case"touch":return(a>=c&&a<=f||l>=c&&l<=f||a<c&&l>f)&&(o>=u&&o<=d||s>=u&&s<=d||o<u&&s>d);default:return false}}}();e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var n,r,o=e.ui.ddmanager.droppables[t.options.scope]||[],a=i?i.type:null,s=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<o.length;n++){if(o[n].options.disabled||t&&!o[n].accept.call(o[n].element[0],t.currentItem||t.element)){continue}for(r=0;r<s.length;r++){if(s[r]===o[n].element[0]){o[n].proportions().height=0;continue e}}o[n].visible=o[n].element.css("display")!=="none";if(!o[n].visible){continue}if(a==="mousedown"){o[n]._activate.call(o[n],i)}o[n].offset=o[n].element.offset();o[n].proportions({width:o[n].element[0].offsetWidth,height:o[n].element[0].offsetHeight})}},drop:function(t,i){var n=false;e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),(function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,i)){n=this._drop.call(this,i)||n}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)){this.isout=true;this.isover=false;this._deactivate.call(this,i)}}));return n},dragStart:function(t,i){t.element.parentsUntil("body").on("scroll.droppable",(function(){if(!t.options.refreshPositions){e.ui.ddmanager.prepareOffsets(t,i)}}))},drag:function(t,i){if(t.options.refreshPositions){e.ui.ddmanager.prepareOffsets(t,i)}e.each(e.ui.ddmanager.droppables[t.options.scope]||[],(function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var n,r,o,a=e.ui.intersect(t,this,this.options.tolerance,i),s=!a&&this.isover?"isout":a&&!this.isover?"isover":null;if(!s){return}if(this.options.greedy){r=this.options.scope;o=this.element.parents(":data(ui-droppable)").filter((function(){return e(this).droppable("instance").options.scope===r}));if(o.length){n=e(o[0]).droppable("instance");n.greedyChild=s==="isover"}}if(n&&s==="isover"){n.isover=false;n.isout=true;n._out.call(n,i)}this[s]=true;this[s==="isout"?"isover":"isout"]=false;this[s==="isover"?"_over":"_out"].call(this,i);if(n&&s==="isout"){n.isout=false;n.isover=true;n._over.call(n,i)}}))},dragStop:function(t,i){t.element.parentsUntil("body").off("scroll.droppable");if(!t.options.refreshPositions){e.ui.ddmanager.prepareOffsets(t,i)}}};if(e.uiBackCompat===true){e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:false,activeClass:false},_addActiveClass:function(){this._super();if(this.options.activeClass){this.element.addClass(this.options.activeClass)}},_removeActiveClass:function(){this._super();if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}},_addHoverClass:function(){this._super();if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}},_removeHoverClass:function(){this._super();if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}}})}var me=e.ui.droppable;var ve=e.widget("ui.progressbar",{version:"1.14.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.attr({role:"progressbar","aria-valuemin":this.min});this._addClass("ui-progressbar","ui-widget ui-widget-content");this.valueDiv=e("<div>").appendTo(this.element);this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header");this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow");this.valueDiv.remove()},value:function(e){if(e===undefined){return this.options.value}this.options.value=this._constrainedValue(e);this._refreshValue()},_constrainedValue:function(e){if(e===undefined){e=this.options.value}this.indeterminate=e===false;if(typeof e!=="number"){e=0}return this.indeterminate?false:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value;this._super(e);this.options.value=this._constrainedValue(t);this._refreshValue()},_setOption:function(e,t){if(e==="max"){t=Math.max(this.min,t)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e);this.element.attr("aria-disabled",e);this._toggleClass(null,"ui-state-disabled",!!e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(i.toFixed(0)+"%");this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate);if(this.indeterminate){this.element.removeAttr("aria-valuenow");if(!this.overlayDiv){this.overlayDiv=e("<div>").appendTo(this.valueDiv);this._addClass(this.overlayDiv,"ui-progressbar-overlay")}}else{this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t});if(this.overlayDiv){this.overlayDiv.remove();this.overlayDiv=null}}if(this.oldValue!==t){this.oldValue=t;this._trigger("change")}if(t===this.options.max){this._trigger("complete")}}});var ye=e.widget("ui.selectable",e.ui.mouse,{version:"1.14.1",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t=this;this._addClass("ui-selectable");this.dragged=false;this.refresh=function(){t.elementPos=e(t.element[0]).offset();t.selectees=e(t.options.filter,t.element[0]);t._addClass(t.selectees,"ui-selectee");t.selectees.each((function(){var i=e(this),n=i.offset(),r=this.getBoundingClientRect(),o={left:n.left-t.elementPos.left,top:n.top-t.elementPos.top};e.data(this,"selectable-item",{element:this,$element:i,left:o.left,top:o.top,right:o.left+r.width,bottom:o.top+r.height,startselected:false,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})}))};this.refresh();this._mouseInit();this.helper=e("<div>");this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item");this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY];this.elementPos=e(this.element[0]).offset();if(this.options.disabled){return}this.selectees=e(n.filter,this.element[0]);this._trigger("start",t);e(n.appendTo).append(this.helper);this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0});if(n.autoRefresh){this.refresh()}this.selectees.filter(".ui-selected").each((function(){var n=e.data(this,"selectable-item");n.startselected=true;if(!t.metaKey&&!t.ctrlKey){i._removeClass(n.$element,"ui-selected");n.selected=false;i._addClass(n.$element,"ui-unselecting");n.unselecting=true;i._trigger("unselecting",t,{unselecting:n.element})}}));e(t.target).parents().addBack().each((function(){var n,r=e.data(this,"selectable-item");if(r){n=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected");i._removeClass(r.$element,n?"ui-unselecting":"ui-selected")._addClass(r.$element,n?"ui-selecting":"ui-unselecting");r.unselecting=!n;r.selecting=n;r.selected=n;if(n){i._trigger("selecting",t,{selecting:r.element})}else{i._trigger("unselecting",t,{unselecting:r.element})}return false}}))},_mouseDrag:function(t){this.dragged=true;if(this.options.disabled){return}var i,n=this,r=this.options,o=this.opos[0],a=this.opos[1],s=t.pageX,l=t.pageY;if(o>s){i=s;s=o;o=i}if(a>l){i=l;l=a;a=i}this.helper.css({left:o,top:a,width:s-o,height:l-a});this.selectees.each((function(){var i=e.data(this,"selectable-item"),u=false,c={};if(!i||i.element===n.element[0]){return}c.left=i.left+n.elementPos.left;c.right=i.right+n.elementPos.left;c.top=i.top+n.elementPos.top;c.bottom=i.bottom+n.elementPos.top;if(r.tolerance==="touch"){u=!(c.left>s||c.right<o||c.top>l||c.bottom<a)}else if(r.tolerance==="fit"){u=c.left>o&&c.right<s&&c.top>a&&c.bottom<l}if(u){if(i.selected){n._removeClass(i.$element,"ui-selected");i.selected=false}if(i.unselecting){n._removeClass(i.$element,"ui-unselecting");i.unselecting=false}if(!i.selecting){n._addClass(i.$element,"ui-selecting");i.selecting=true;n._trigger("selecting",t,{selecting:i.element})}}else{if(i.selecting){if((t.metaKey||t.ctrlKey)&&i.startselected){n._removeClass(i.$element,"ui-selecting");i.selecting=false;n._addClass(i.$element,"ui-selected");i.selected=true}else{n._removeClass(i.$element,"ui-selecting");i.selecting=false;if(i.startselected){n._addClass(i.$element,"ui-unselecting");i.unselecting=true}n._trigger("unselecting",t,{unselecting:i.element})}}if(i.selected){if(!t.metaKey&&!t.ctrlKey&&!i.startselected){n._removeClass(i.$element,"ui-selected");i.selected=false;n._addClass(i.$element,"ui-unselecting");i.unselecting=true;n._trigger("unselecting",t,{unselecting:i.element})}}}}));return false},_mouseStop:function(t){var i=this;this.dragged=false;e(".ui-unselecting",this.element[0]).each((function(){var n=e.data(this,"selectable-item");i._removeClass(n.$element,"ui-unselecting");n.unselecting=false;n.startselected=false;i._trigger("unselected",t,{unselected:n.element})}));e(".ui-selecting",this.element[0]).each((function(){var n=e.data(this,"selectable-item");i._removeClass(n.$element,"ui-selecting")._addClass(n.$element,"ui-selected");n.selecting=false;n.selected=true;n.startselected=true;i._trigger("selected",t,{selected:n.element})}));this._trigger("stop",t);this.helper.remove();return false}});var be=e.widget("ui.selectmenu",[e.ui.formResetMixin,{version:"1.14.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:false,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"};this._drawButton();this._drawMenu();this._bindFormResetHandler();this._rendered=false;this.menuItems=e()},_drawButton:function(){var t,i=this,n=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button);this._on(this.labels,{click:function(e){this.button.trigger("focus");e.preventDefault()}});this.element.hide();this.button=e("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element);this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget");t=e("<span>").appendTo(this.button);this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button);this.buttonItem=this._renderButtonItem(n).appendTo(this.button);if(this.options.width!==false){this._resizeButton()}this._on(this.button,this._buttonEvents);this.button.one("focusin",(function(){if(!i._rendered){i._refreshMenu()}}))},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=e("<div>").append(this.menu);this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front");this.menuWrap.appendTo(this._appendTo());this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(e,i){e.preventDefault();t._select(i.item.data("ui-selectmenu-item"),e)},focus:function(e,i){var n=i.item.data("ui-selectmenu-item");if(t.focusIndex!=null&&n.index!==t.focusIndex){t._trigger("focus",e,{item:n});if(!t.isOpen){t._select(n,e)}}t.focusIndex=n.index;t.button.attr("aria-activedescendant",t.menuItems.eq(n.index).attr("id"))}}).menu("instance");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return false};this.menuInstance._isDivider=function(){return false}},refresh:function(){this._refreshMenu();this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{}));if(this.options.width===null){this._resizeButton()}},_refreshMenu:function(){var e,t=this.element.find("option");this.menu.empty();this._parseOptions(t);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper");this._rendered=true;if(!t.length){return}e=this._getSelectedItem();this.menuInstance.focus(null,e);this._setAria(e.data("ui-selectmenu-item"));this._setOption("disabled",this.element.prop("disabled"))},open:function(e){if(this.options.disabled){return}if(!this._rendered){this._refreshMenu()}else{this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active");this.menuInstance.focus(null,this._getSelectedItem())}if(!this.menuItems.length){return}this.isOpen=true;this._toggleAttr();this._resizeMenu();this._position();this._on(this.document,this._documentClick);this._trigger("open",e)},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){if(!this.isOpen){return}this.isOpen=false;this._toggleAttr();this.range=null;this._off(this.document);this._trigger("close",e)},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var i=e("<span>");this._setText(i,t.label);this._addClass(i,"ui-selectmenu-text");return i},_renderMenu:function(t,i){var n=this,r="";e.each(i,(function(i,o){var a;if(o.optgroup!==r){a=e("<li>",{text:o.optgroup});n._addClass(a,"ui-selectmenu-optgroup","ui-menu-divider"+(o.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""));a.appendTo(t);r=o.optgroup}n._renderItemData(t,o)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var n=e("<li>"),r=e("<div>",{title:i.element.attr("title")});if(i.disabled){this._addClass(n,null,"ui-state-disabled")}if(i.hidden){n.prop("hidden",true)}else{this._setText(r,i.label)}return n.append(r).appendTo(t)},_setText:function(e,t){if(t){e.text(t)}else{e.html("&#160;")}},_move:function(e,t){var i,n,r=".ui-menu-item";if(this.isOpen){i=this.menuItems.eq(this.focusIndex).parent("li")}else{i=this.menuItems.eq(this.element[0].selectedIndex).parent("li");r+=":not(.ui-state-disabled)"}if(e==="first"||e==="last"){n=i[e==="first"?"prevAll":"nextAll"](r).eq(-1)}else{n=i[e+"All"](r).eq(0)}if(n.length){this.menuInstance.focus(t,n)}},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;if(!this.range){return}e=window.getSelection();e.removeAllRanges();e.addRange(this.range)},_documentClick:{mousedown:function(t){if(!this.isOpen){return}if(!e(t.target).closest(".ui-selectmenu-menu, #"+CSS.escape(this.ids.button)).length){this.close(t)}}},_buttonEvents:{mousedown:function(){var e=window.getSelection();if(e.rangeCount){this.range=e.getRangeAt(0)}},click:function(e){this._setSelection();this._toggle(e)},keydown:function(t){var i=true;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t);i=false;break;case e.ui.keyCode.ENTER:if(this.isOpen){this._selectFocusedItem(t)}break;case e.ui.keyCode.UP:if(t.altKey){this._toggle(t)}else{this._move("prev",t)}break;case e.ui.keyCode.DOWN:if(t.altKey){this._toggle(t)}else{this._move("next",t)}break;case e.ui.keyCode.SPACE:if(this.isOpen){this._selectFocusedItem(t)}else{this._toggle(t)}break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t);i=false}if(i){t.preventDefault()}}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex).parent("li");if(!t.hasClass("ui-state-disabled")){this._select(t.data("ui-selectmenu-item"),e)}},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index;this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(e));this._setAria(e);this._trigger("select",t,{item:e});if(e.index!==i){this._trigger("change",t,{item:e})}this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t});this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){if(e==="icons"){var i=this.button.find("span.ui-icon");this._removeClass(i,null,this.options.icons.button)._addClass(i,null,t.button)}this._super(e,t);if(e==="appendTo"){this.menuWrap.appendTo(this._appendTo())}if(e==="width"){this._resizeButton()}},_setOptionDisabled:function(e){this._super(e);this.menuInstance.option("disabled",e);this.button.attr("aria-disabled",e);this._toggleClass(this.button,null,"ui-state-disabled",e);this.element.prop("disabled",e);if(e){this.button.attr("tabindex",-1);this.close()}else{this.button.attr("tabindex",0)}},_appendTo:function(){var t=this.options.appendTo;if(t){t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)}if(!t||!t[0]){t=this.element.closest(".ui-front, dialog")}if(!t.length){t=this.document[0].body}return t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen);this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;if(e===false){this.button.css("width","");return}if(e===null){e=this.element.show().outerWidth();this.element.hide()}this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()))},_getCreateOptions:function(){var e=this._super();e.disabled=this.element.prop("disabled");return e},_parseOptions:function(t){var i=this,n=[];t.each((function(t,r){n.push(i._parseOption(e(r),t))}));this.items=n},_parseOption:function(e,t){var i=e.parent("optgroup");return{element:e,index:t,value:e.val(),label:e.text(),hidden:i.prop("hidden")||e.prop("hidden"),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||e.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler();this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.labels.attr("for",this.ids.element)}}]);var _e=e.widget("ui.slider",e.ui.mouse,{version:"1.14.1",widgetEventPrefix:"slide",options:{animate:false,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content");this._refresh();this._animateOff=false},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var t,i,n=this.options,r=this.element.find(".ui-slider-handle"),o="<span tabindex='0'></span>",a=[];i=n.values&&n.values.length||1;if(r.length>i){r.slice(i).remove();r=r.slice(0,i)}for(t=r.length;t<i;t++){a.push(o)}this.handles=r.add(e(a.join("")).appendTo(this.element));this._addClass(this.handles,"ui-slider-handle","ui-state-default");this.handle=this.handles.eq(0);this.handles.each((function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)}))},_createRange:function(){var t=this.options;if(t.range){if(t.range===true){if(!t.values){t.values=[this._valueMin(),this._valueMin()]}else if(t.values.length&&t.values.length!==2){t.values=[t.values[0],t.values[0]]}else if(Array.isArray(t.values)){t.values=t.values.slice(0)}}if(!this.range||!this.range.length){this.range=e("<div>").appendTo(this.element);this._addClass(this.range,"ui-slider-range")}else{this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max");this.range.css({left:"",bottom:""})}if(t.range==="min"||t.range==="max"){this._addClass(this.range,"ui-slider-range-"+t.range)}}else{if(this.range){this.range.remove()}this.range=null}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();if(this.range){this.range.remove()}this._mouseDestroy()},_mouseCapture:function(t){var i,n,r,o,a,s,l,u,c=this,d=this.options;if(d.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();i={x:t.pageX,y:t.pageY};n=this._normValueFromMouse(i);r=this._valueMax()-this._valueMin()+1;this.handles.each((function(t){var i=Math.abs(n-c.values(t));if(r>i||r===i&&(t===c._lastChangedValue||c.values(t)===d.min)){r=i;o=e(this);a=t}}));s=this._start(t,a);if(s===false){return false}this._mouseSliding=true;this._handleIndex=a;this._addClass(o,null,"ui-state-active");o.trigger("focus");l=o.offset();u=!e(t.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=u?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(t,a,n)}this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);this._slide(e,this._handleIndex,i);return false},_mouseStop:function(e){this._removeClass(this.handles,null,"ui-state-active");this._mouseSliding=false;this._stop(e,this._handleIndex);this._change(e,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,r,o;if(this.orientation==="horizontal"){t=this.elementSize.width;i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{t=this.elementSize.height;i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}n=i/t;if(n>1){n=1}if(n<0){n=0}if(this.orientation==="vertical"){n=1-n}r=this._valueMax()-this._valueMin();o=this._valueMin()+n*r;return this._trimAlignValue(o)},_uiHash:function(e,t,i){var n={handle:this.handles[e],handleIndex:e,value:t!==undefined?t:this.value()};if(this._hasMultipleValues()){n.value=t!==undefined?t:this.values(e);n.values=i||this.values()}return n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,i){var n,r,o=this.value(),a=this.values();if(this._hasMultipleValues()){r=this.values(t?0:1);o=this.values(t);if(this.options.values.length===2&&this.options.range===true){i=t===0?Math.min(r,i):Math.max(r,i)}a[t]=i}if(i===o){return}n=this._trigger("slide",e,this._uiHash(t,i,a));if(n===false){return}if(this._hasMultipleValues()){this.values(t,i)}else{this.value(i)}},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){this._lastChangedValue=t;this._trigger("change",e,this._uiHash(t))}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e);this._refreshValue();this._change(null,0);return}return this._value()},values:function(e,t){var i,n,r;if(arguments.length>1){this.options.values[e]=this._trimAlignValue(t);this._refreshValue();this._change(null,e);return}if(arguments.length){if(Array.isArray(arguments[0])){i=this.options.values;n=arguments[0];for(r=0;r<i.length;r+=1){i[r]=this._trimAlignValue(n[r]);this._change(null,r)}this._refreshValue()}else{if(this._hasMultipleValues()){return this._values(e)}else{return this.value()}}}else{return this._values()}},_setOption:function(e,t){var i,n=0;if(e==="range"&&this.options.range===true){if(t==="min"){this.options.value=this._values(0);this.options.values=null}else if(t==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null}}if(Array.isArray(this.options.values)){n=this.options.values.length}this._super(e,t);switch(e){case"orientation":this._detectOrientation();this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation);this._refreshValue();if(this.options.range){this._refreshRange(t)}this.handles.css(t==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=n-1;i>=0;i--){this._change(null,i)}this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break}},_setOptionDisabled:function(e){this._super(e);this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;e=this._trimAlignValue(e);return e},_values:function(e){var t,i,n;if(arguments.length){t=this.options.values[e];t=this._trimAlignValue(t);return t}else if(this._hasMultipleValues()){i=this.options.values.slice();for(n=0;n<i.length;n+=1){i[n]=this._trimAlignValue(i[n])}return i}else{return[]}},_trimAlignValue:function(e){if(e<=this._valueMin()){return this._valueMin()}if(e>=this._valueMax()){return this._valueMax()}var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;if(Math.abs(i)*2>=t){n+=i>0?t:-t}return parseFloat(n.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step,n=Math.round((e-t)/i)*i;e=n+t;if(e>this.options.max){e-=i}this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);if(this.options.min!==null){e=Math.max(e,this._precisionOf(this.options.min))}return e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return i===-1?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){if(e==="vertical"){this.range.css({width:"",left:""})}if(e==="horizontal"){this.range.css({height:"",bottom:""})}},_refreshValue:function(){var t,i,n,r,o,a=this.options.range,s=this.options,l=this,u=!this._animateOff?s.animate:false,c={};if(this._hasMultipleValues()){this.handles.each((function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100;c[l.orientation==="horizontal"?"left":"bottom"]=i+"%";e(this).stop(1,1)[u?"animate":"css"](c,s.animate);if(l.options.range===true){if(l.orientation==="horizontal"){if(n===0){l.range.stop(1,1)[u?"animate":"css"]({left:i+"%"},s.animate)}if(n===1){l.range[u?"animate":"css"]({width:i-t+"%"},{queue:false,duration:s.animate})}}else{if(n===0){l.range.stop(1,1)[u?"animate":"css"]({bottom:i+"%"},s.animate)}if(n===1){l.range[u?"animate":"css"]({height:i-t+"%"},{queue:false,duration:s.animate})}}}t=i}))}else{n=this.value();r=this._valueMin();o=this._valueMax();i=o!==r?(n-r)/(o-r)*100:0;c[this.orientation==="horizontal"?"left":"bottom"]=i+"%";this.handle.stop(1,1)[u?"animate":"css"](c,s.animate);if(a==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[u?"animate":"css"]({width:i+"%"},s.animate)}if(a==="max"&&this.orientation==="horizontal"){this.range.stop(1,1)[u?"animate":"css"]({width:100-i+"%"},s.animate)}if(a==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[u?"animate":"css"]({height:i+"%"},s.animate)}if(a==="max"&&this.orientation==="vertical"){this.range.stop(1,1)[u?"animate":"css"]({height:100-i+"%"},s.animate)}}},_handleEvents:{keydown:function(t){var i,n,r,o,a=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=true;this._addClass(e(t.target),null,"ui-state-active");i=this._start(t,a);if(i===false){return}}break}o=this.options.step;if(this._hasMultipleValues()){n=r=this.values(a)}else{n=r=this.value()}switch(t.keyCode){case e.ui.keyCode.HOME:r=this._valueMin();break;case e.ui.keyCode.END:r=this._valueMax();break;case e.ui.keyCode.PAGE_UP:r=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax()){return}r=this._trimAlignValue(n+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin()){return}r=this._trimAlignValue(n-o);break}this._slide(t,a,r)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(t,i);this._change(t,i);this._removeClass(e(t.target),null,"ui-state-active")}}}});var we=e.widget("ui.sortable",e.ui.mouse,{version:"1.14.1",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&e<t+i},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true},_setOption:function(e,t){this._super(e,t);if(e==="handle"){this._setHandleClassName()}},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");e.each(this.items,(function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")}))},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--){this.items[e].item.removeData(this.widgetName+"-item")}return this},_mouseCapture:function(t,i){var n=null,r=false,o=this;if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(t);e(t.target).parents().each((function(){if(e.data(this,o.widgetName+"-item")===o){n=e(this);return false}}));if(e.data(t.target,o.widgetName+"-item")===o){n=e(t.target)}if(!n){return false}if(this.options.handle&&!i){e(this.options.handle,n).find("*").addBack().each((function(){if(this===t.target){r=true}}));if(!r){return false}}this.currentItem=n;this._removeCurrentsFromItems();return true},_mouseStart:function(t,i,n){var r,o,a=this.options;this.currentContainer=this;this.refreshPositions();this.appendTo=e(a.appendTo!=="parent"?a.appendTo:this.currentItem.parent());this.helper=this._createHelper(t);this._cacheHelperProportions();this._cacheMargins();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");if(a.cursorAt){this._adjustOffsetFromHelper(a.cursorAt)}this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();this.scrollParent=this.placeholder.scrollParent();e.extend(this.offset,{parent:this._getParentOffset()});if(a.containment){this._setContainment()}if(a.cursor&&a.cursor!=="auto"){o=this.document.find("body");this._storedStylesheet=e("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)}if(a.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",a.zIndex)}if(a.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",a.opacity)}if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",t,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!n){for(r=this.containers.length-1;r>=0;r--){this.containers[r]._trigger("activate",t,this._uiHash(this))}}if(e.ui.ddmanager){e.ui.ddmanager.current=this}if(e.ui.ddmanager&&!a.dropBehaviour){e.ui.ddmanager.prepareOffsets(this,t)}this.dragging=true;this._addClass(this.helper,"ui-sortable-helper");if(!this.helper.parent().is(this.appendTo)){this.helper.detach().appendTo(this.appendTo);this.offset.parent=this._getParentOffset()}this.position=this.originalPosition=this._generatePosition(t);this.originalPageX=t.pageX;this.originalPageY=t.pageY;this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute");this._mouseDrag(t);return true},_scroll:function(e){var t=this.options,i=false;if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<t.scrollSensitivity){this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+t.scrollSpeed}else if(e.pageY-this.overflowOffset.top<t.scrollSensitivity){this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-t.scrollSpeed}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<t.scrollSensitivity){this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+t.scrollSpeed}else if(e.pageX-this.overflowOffset.left<t.scrollSensitivity){this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-t.scrollSpeed}}else{if(e.pageY-this.document.scrollTop()<t.scrollSensitivity){i=this.document.scrollTop(this.document.scrollTop()-t.scrollSpeed)}else if(this.window.height()-(e.pageY-this.document.scrollTop())<t.scrollSensitivity){i=this.document.scrollTop(this.document.scrollTop()+t.scrollSpeed)}if(e.pageX-this.document.scrollLeft()<t.scrollSensitivity){i=this.document.scrollLeft(this.document.scrollLeft()-t.scrollSpeed)}else if(this.window.width()-(e.pageX-this.document.scrollLeft())<t.scrollSensitivity){i=this.document.scrollLeft(this.document.scrollLeft()+t.scrollSpeed)}}return i},_mouseDrag:function(t){var i,n,r,o,a=this.options;this.position=this._generatePosition(t);this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}if(a.scroll){if(this._scroll(t)!==false){this._refreshItemPositions(true);if(e.ui.ddmanager&&!a.dropBehaviour){e.ui.ddmanager.prepareOffsets(this,t)}}}this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()};for(i=this.items.length-1;i>=0;i--){n=this.items[i];r=n.item[0];o=this._intersectsWithPointer(n);if(!o){continue}if(n.instance!==this.currentContainer){continue}if(r!==this.currentItem[0]&&this.placeholder[o===1?"next":"prev"]()[0]!==r&&!e.contains(this.placeholder[0],r)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],r):true)){this.direction=o===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(n)){this._rearrange(t,n)}else{break}this._trigger("change",t,this._uiHash());break}}this._contactContainers(t);if(e.ui.ddmanager){e.ui.ddmanager.drag(this,t)}this._trigger("sort",t,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(t,i){if(!t){return}if(e.ui.ddmanager&&!this.options.dropBehaviour){e.ui.ddmanager.drop(this,t)}if(this.options.revert){var n=this,r=this.placeholder.offset(),o=this.options.axis,a={};if(!o||o==="x"){a.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)}if(!o||o==="y"){a.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)}this.reverting=true;e(this.helper).animate(a,parseInt(this.options.revert,10)||500,(function(){n._clear(t)}))}else{this._clear(t,i)}return false},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null}));if(this.options.helper==="original"){this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}for(var t=this.containers.length-1;t>=0;t--){this.containers[t]._trigger("deactivate",null,this._uiHash(this));if(this.containers[t].containerCache.over){this.containers[t]._trigger("out",null,this._uiHash(this));this.containers[t].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}e.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){e(this.domPosition.prev).after(this.currentItem)}else{e(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];t=t||{};e(i).each((function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);if(i){n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}}));if(!n.length&&t.key){n.push(t.key+"=")}return n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];t=t||{};i.each((function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}));return n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,o=e.left,a=o+e.width,s=e.top,l=s+e.height,u=this.offset.click.top,c=this.offset.click.left,d=this.options.axis==="x"||n+u>s&&n+u<l,f=this.options.axis==="y"||t+c>o&&t+c<a,p=d&&f;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]){return p}else{return o<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<a&&s<n+this.helperProportions.height/2&&r-this.helperProportions.height/2<l}},_intersectsWithPointer:function(e){var t,i,n=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),r=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),o=n&&r;if(!o){return false}t=this.dragDirection.vertical;i=this.dragDirection.horizontal;return this.floating?i==="right"||t==="down"?2:1:t&&(t==="down"?2:1)},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this.dragDirection.vertical,r=this.dragDirection.horizontal;if(this.floating&&r){return r==="right"&&i||r==="left"&&!i}else{return n&&(n==="down"&&t||n==="up"&&!t)}},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){this._refreshItems(e);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,n,r,o,a=[],s=[],l=this._connectWith();if(l&&t){for(i=l.length-1;i>=0;i--){r=e(l[i],this.document[0]);for(n=r.length-1;n>=0;n--){o=e.data(r[n],this.widgetFullName);if(o&&o!==this&&!o.options.disabled){s.push([typeof o.options.items==="function"?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o])}}}}s.push([typeof this.options.items==="function"?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function u(){a.push(this)}for(i=s.length-1;i>=0;i--){s[i][0].each(u)}return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,(function(e){for(var i=0;i<t.length;i++){if(t[i]===e.item[0]){return false}}return true}))},_refreshItems:function(t){this.items=[];this.containers=[this];var i,n,r,o,a,s,l,u,c=this.items,d=[[typeof this.options.items==="function"?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready){for(i=f.length-1;i>=0;i--){r=e(f[i],this.document[0]);for(n=r.length-1;n>=0;n--){o=e.data(r[n],this.widgetFullName);if(o&&o!==this&&!o.options.disabled){d.push([typeof o.options.items==="function"?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]);this.containers.push(o)}}}}for(i=d.length-1;i>=0;i--){a=d[i][1];s=d[i][0];for(n=0,u=s.length;n<u;n++){l=e(s[n]);l.data(this.widgetName+"-item",a);c.push({item:l,instance:a,width:0,height:0,left:0,top:0})}}},_refreshItemPositions:function(t){var i,n,r,o;for(i=this.items.length-1;i>=0;i--){n=this.items[i];if(this.currentContainer&&n.instance!==this.currentContainer&&n.item[0]!==this.currentItem[0]){continue}r=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item;if(!t){n.width=r.outerWidth();n.height=r.outerHeight()}o=r.offset();n.left=o.left;n.top=o.top}},refreshPositions:function(e){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}this._refreshItemPositions(e);var t,i;if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(t=this.containers.length-1;t>=0;t--){i=this.containers[t].element.offset();this.containers[t].containerCache.left=i.left;this.containers[t].containerCache.top=i.top;this.containers[t].containerCache.width=this.containers[t].element.outerWidth();this.containers[t].containerCache.height=this.containers[t].element.outerHeight()}}return this},_createPlaceholder:function(t){t=t||this;var i,n,r=t.options;if(!r.placeholder||r.placeholder.constructor===String){i=r.placeholder;n=t.currentItem[0].nodeName.toLowerCase();r.placeholder={element:function(){var r=e("<"+n+">",t.document[0]);t._addClass(r,"ui-sortable-placeholder",i||t.currentItem[0].className)._removeClass(r,"ui-sortable-helper");if(n==="tbody"){t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(r))}else if(n==="tr"){t._createTrPlaceholder(t.currentItem,r)}else if(n==="img"){r.attr("src",t.currentItem.attr("src"))}if(!i){r.css("visibility","hidden")}return r},update:function(e,o){if(i&&!r.forcePlaceholderSize){return}if(!o.height()||r.forcePlaceholderSize&&(n==="tbody"||n==="tr")){o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10))}if(!o.width()){o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}}}}t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem));t.currentItem.after(t.placeholder);r.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var n=this;t.children().each((function(){e("<td>&#160;</td>",n.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)}))},_contactContainers:function(t){var i,n,r,o,a,s,l,u,c,d,f=null,p=null;for(i=this.containers.length-1;i>=0;i--){if(e.contains(this.currentItem[0],this.containers[i].element[0])){continue}if(this._intersectsWith(this.containers[i].containerCache)){if(f&&e.contains(this.containers[i].element[0],f.element[0])){continue}f=this.containers[i];p=i}else{if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",t,this._uiHash(this));this.containers[i].containerCache.over=0}}}if(!f){return}if(this.containers.length===1){if(!this.containers[p].containerCache.over){this.containers[p]._trigger("over",t,this._uiHash(this));this.containers[p].containerCache.over=1}}else{r=1e4;o=null;c=f.floating||this._isFloating(this.currentItem);a=c?"left":"top";s=c?"width":"height";d=c?"pageX":"pageY";for(n=this.items.length-1;n>=0;n--){if(!e.contains(this.containers[p].element[0],this.items[n].item[0])){continue}if(this.items[n].item[0]===this.currentItem[0]){continue}l=this.items[n].item.offset()[a];u=false;if(t[d]-l>this.items[n][s]/2){u=true}if(Math.abs(t[d]-l)<r){r=Math.abs(t[d]-l);o=this.items[n];this.direction=u?"up":"down"}}if(!o&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[p]){if(!this.currentContainer.containerCache.over){this.containers[p]._trigger("over",t,this._uiHash());this.currentContainer.containerCache.over=1}return}if(o){this._rearrange(t,o,null,true)}else{this._rearrange(t,null,this.containers[p].element,true)}this._trigger("change",t,this._uiHash());this.containers[p]._trigger("change",t,this._uiHash(this));this.currentContainer=this.containers[p];this.options.placeholder.update(this.currentContainer,this.placeholder);this.scrollParent=this.placeholder.scrollParent();if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this.containers[p]._trigger("over",t,this._uiHash(this));this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=typeof i.helper==="function"?e(i.helper.apply(this.element[0],[t,this.currentItem])):i.helper==="clone"?this.currentItem.clone():this.currentItem;if(!n.parents("body").length){this.appendTo[0].appendChild(n[0])}if(n[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!n[0].style.width||i.forceHelperSize){n.width(this.currentItem.width())}if(!n[0].style.height||i.forceHelperSize){n.height(this.currentItem.height())}return n},_adjustOffsetFromHelper:function(e){if(typeof e==="function"){e=e.call(this)}if(typeof e==="string"){e=e.split(" ")}if(Array.isArray(e)){e={left:+e[0],top:+e[1]||0}}if("left"in e){this.offset.click.left=e.left+this.margins.left}if("right"in e){this.offset.click.left=this.helperProportions.width-e.right+this.margins.left}if("top"in e){this.offset.click.top=e.top+this.margins.top}if("bottom"in e){this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft();t.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===this.document[0].body){t={top:0,left:0}}return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,r=this.options;if(r.containment==="parent"){r.containment=this.helper[0].parentNode}if(r.containment==="document"||r.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,r.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(r.containment==="document"?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(r.containment)){t=e(r.containment)[0];i=e(r.containment).offset();n=e(t).css("overflow")!=="hidden";this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){if(!i){i=this.position}var n=t==="absolute"?1:-1,r=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,o=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():o?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*n}},_generatePosition:function(t){var i,n,r=this.options,o=t.pageX,a=t.pageY,s=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(s[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(t.pageX-this.offset.click.left<this.containment[0]){o=this.containment[0]+this.offset.click.left}if(t.pageY-this.offset.click.top<this.containment[1]){a=this.containment[1]+this.offset.click.top}if(t.pageX-this.offset.click.left>this.containment[2]){o=this.containment[2]+this.offset.click.left}if(t.pageY-this.offset.click.top>this.containment[3]){a=this.containment[3]+this.offset.click.top}}if(r.grid){i=this.originalPageY+Math.round((a-this.originalPageY)/r.grid[1])*r.grid[1];a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-r.grid[1]:i+r.grid[1]:i;n=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0];o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-r.grid[0]:n+r.grid[0]:n}}return{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(e,t,i,n){if(i){i[0].appendChild(this.placeholder[0])}else{t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling)}this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay((function(){if(r===this.counter){this.refreshPositions(!n)}}))},_clear:function(e,t){this.reverting=false;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS){if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static"){this._storedCSS[i]=""}}this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!t){n.push((function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}))}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t){n.push((function(e){this._trigger("update",e,this._uiHash())}))}if(this!==this.currentContainer){if(!t){n.push((function(e){this._trigger("remove",e,this._uiHash())}));n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer));n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))}}function r(e,t,i){return function(n){i._trigger(e,n,t._uiHash(t))}}for(i=this.containers.length-1;i>=0;i--){if(!t){n.push(r("deactivate",this,this.containers[i]))}if(this.containers[i].containerCache.over){n.push(r("out",this,this.containers[i]));this.containers[i].containerCache.over=0}}if(this._storedStylesheet){this._storedStylesheet.remove();this._storedStylesheet=null}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false;if(!t){this._trigger("beforeStop",e,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null}if(!t){for(i=0;i<n.length;i++){n[i].call(this,e)}this._trigger("stop",e,this._uiHash())}this.fromOutside=false;return!this.cancelHelperRemoval},_trigger:function(){if(e.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}});function Ce(e){return function(){var t=this.element.val();e.apply(this,arguments);this._refresh();if(t!==this.element.val()){this._trigger("change")}}}e.widget("ui.spinner",{version:"1.14.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);if(this.value()!==""){this._value(this.element.val(),true)}this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t=this._super();var i=this.element;e.each(["min","max","step"],(function(e,n){var r=i.attr(n);if(r!=null&&r.length){t[n]=r}}));return t},_events:{keydown:function(e){if(this._start(e)&&this._keydown(e)){e.preventDefault()}},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){this._stop();this._refresh();if(this.previous!==this.element.val()){this._trigger("change",e)}},mousewheel:function(e,t){var i=this.document[0].activeElement;var n=this.element[0]===i;if(!n||!t){return}if(!this.spinning&&!this._start(e)){return false}this._spin((t>0?1:-1)*this.options.step,e);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay((function(){if(this.spinning){this._stop(e)}}),100);e.preventDefault()},"mousedown .ui-spinner-button":function(t){var i;i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();function n(){var e=this.element[0]===this.document[0].activeElement;if(!e){this.element.trigger("focus");this.previous=i}}t.preventDefault();n.call(this);if(this._start(t)===false){return}this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(!e(t.currentTarget).hasClass("ui-state-active")){return}if(this._start(t)===false){return false}this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance();this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content");this._addClass("ui-spinner-input");this.element.attr("role","spinbutton");this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",true).button({classes:{"ui-button":""}});this._removeClass(this.buttons,"ui-corner-all");this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up");this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down");this.buttons.first().button({icon:this.options.icons.up,showLabel:false});this.buttons.last().button({icon:this.options.icons.down,showLabel:false});if(this.buttons.height()>Math.ceil(this.uiSpinner.height()*.5)&&this.uiSpinner.height()>0){this.uiSpinner.height(this.uiSpinner.height())}},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:this._repeat(null,1,t);return true;case n.DOWN:this._repeat(null,-1,t);return true;case n.PAGE_UP:this._repeat(null,i.page,t);return true;case n.PAGE_DOWN:this._repeat(null,-i.page,t);return true}return false},_start:function(e){if(!this.spinning&&this._trigger("start",e)===false){return false}if(!this.counter){this.counter=1}this.spinning=true;return true},_repeat:function(e,t,i){e=e||500;clearTimeout(this.timer);this.timer=this._delay((function(){this._repeat(40,t,i)}),e);this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;if(!this.counter){this.counter=1}i=this._adjustValue(i+e*this._increment(this.counter));if(!this.spinning||this._trigger("spin",t,{value:i})!==false){this._value(i);this.counter++}},_increment:function(e){var t=this.options.incremental;if(t){return typeof t==="function"?t(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1)}return 1},_precision:function(){var e=this._precisionOf(this.options.step);if(this.options.min!==null){e=Math.max(e,this._precisionOf(this.options.min))}return e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return i===-1?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;t=n.min!==null?n.min:0;i=e-t;i=Math.round(i/n.step)*n.step;e=t+i;e=parseFloat(e.toFixed(this._precision()));if(n.max!==null&&e>n.max){return n.max}if(n.min!==null&&e<n.min){return n.min}return e},_stop:function(e){if(!this.spinning){return}clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("stop",e)},_setOption:function(e,t){var i,n,r;if(e==="culture"||e==="numberFormat"){i=this._parse(this.element.val());this.options[e]=t;this.element.val(this._format(i));return}if(e==="max"||e==="min"||e==="step"){if(typeof t==="string"){t=this._parse(t)}}if(e==="icons"){n=this.buttons.first().find(".ui-icon");this._removeClass(n,null,this.options.icons.up);this._addClass(n,null,t.up);r=this.buttons.last().find(".ui-icon");this._removeClass(r,null,this.options.icons.down);this._addClass(r,null,t.down)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e);this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!e);this.element.prop("disabled",!!e);this.buttons.button(e?"disable":"enable")},_setOptions:Ce((function(e){this._super(e)})),_parse:function(e){if(typeof e==="string"&&e!==""){e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e}return e===""||isNaN(e)?null:e},_format:function(e){if(e===""){return""}return window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();if(e===null){return false}return e===this._adjustValue(e)},_value:function(e,t){var i;if(e!==""){i=this._parse(e);if(i!==null){if(!t){i=this._adjustValue(i)}e=this._format(i)}}this.element.val(e);this._refresh()},_destroy:function(){this.element.prop("disabled",false).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:Ce((function(e){this._stepUp(e)})),_stepUp:function(e){if(this._start()){this._spin((e||1)*this.options.step);this._stop()}},stepDown:Ce((function(e){this._stepDown(e)})),_stepDown:function(e){if(this._start()){this._spin((e||1)*-this.options.step);this._stop()}},pageUp:Ce((function(e){this._stepUp((e||1)*this.options.page)})),pageDown:Ce((function(e){this._stepDown((e||1)*this.options.page)})),value:function(e){if(!arguments.length){return this._parse(this.element.val())}Ce(this._value).call(this,e)},widget:function(){return this.uiSpinner}});if(e.uiBackCompat===true){e.widget("ui.spinner",e.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}})}var Ae=e.ui.spinner;e.widget("ui.tabs",{version:"1.14.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,n;i=t.href.replace(e,"");n=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(e){}try{n=decodeURIComponent(n)}catch(e){}return t.hash.length>1&&i===n}}(),_create:function(){var t=this,i=this.options;this.running=false;this._addClass("ui-tabs","ui-widget ui-widget-content");this._toggleClass("ui-tabs-collapsible",null,i.collapsible);this._processTabs();i.active=this._initialActive();if(Array.isArray(i.disabled)){i.disabled=e.uniqueSort(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),(function(e){return t.tabs.index(e)})))).sort()}if(this.options.active!==false&&this.anchors.length){this.active=this._findActive(i.active)}else{this.active=e()}this._refresh();if(this.active.length){this.load(i.active)}},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,n=decodeURIComponent(location.hash.substring(1));if(t===null){if(n){this.tabs.each((function(i,r){if(e(r).attr("aria-controls")===n){t=i;return false}}))}if(t===null){t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))}if(t===null||t===-1){t=this.tabs.length?0:false}}if(t!==false){t=this.tabs.index(this.tabs.eq(t));if(t===-1){t=i?false:0}}if(!i&&t===false&&this.anchors.length){t=0}return t},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?e():this._getPanelForTab(this.active)}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),r=true;if(this._handlePageNav(t)){return}switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:r=false;n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:t.preventDefault();clearTimeout(this.activating);this._activate(n);return;case e.ui.keyCode.ENTER:t.preventDefault();clearTimeout(this.activating);this._activate(n===this.options.active?false:n);return;default:return}t.preventDefault();clearTimeout(this.activating);n=this._focusNextTab(n,r);if(!t.ctrlKey&&!t.metaKey){i.attr("aria-selected","false");this.tabs.eq(n).attr("aria-selected","true");this.activating=this._delay((function(){this.option("active",n)}),this.delay)}},_panelKeydown:function(t){if(this._handlePageNav(t)){return}if(t.ctrlKey&&t.keyCode===e.ui.keyCode.UP){t.preventDefault();this.active.trigger("focus")}},_handlePageNav:function(t){if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true}if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true}},_findNextTab:function(t,i){var n=this.tabs.length-1;function r(){if(t>n){t=0}if(t<0){t=n}return t}while(e.inArray(r(),this.options.disabled)!==-1){t=i?t+1:t-1}return t},_focusNextTab:function(e,t){e=this._findNextTab(e,t);this.tabs.eq(e).trigger("focus");return e},_setOption:function(e,t){if(e==="active"){this._activate(t);return}this._super(e,t);if(e==="collapsible"){this._toggleClass("ui-tabs-collapsible",null,t);if(!t&&this.options.active===false){this._activate(0)}}if(e==="event"){this._setupEvents(t)}if(e==="heightStyle"){this._setupHeightStyle(t)}},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),(function(e){return i.index(e)}));this._processTabs();if(t.active===false||!this.anchors.length){t.active=false;this.active=e()}else if(this.active.length&&!e.contains(this.tablist[0],this.active[0])){if(this.tabs.length===t.disabled.length){t.active=false;this.active=e()}else{this._activate(this._findNextTab(Math.max(0,t.active-1),false))}}else{t.active=this.tabs.index(this.active)}this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});if(!this.active.length){this.tabs.eq(0).attr("tabIndex",0)}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});this._addClass(this.active,"ui-tabs-active","ui-state-active");this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})}},_processTabs:function(){var t=this,i=this.tabs,n=this.anchors,r=this.panels;this.tablist=this._getList().attr("role","tablist");this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header");this.tablist.on("mousedown"+this.eventNamespace,"> li",(function(t){if(e(this).is(".ui-state-disabled")){t.preventDefault()}}));this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1});this._addClass(this.tabs,"ui-tabs-tab","ui-state-default");this.anchors=this.tabs.map((function(){return e("a",this)[0]})).attr({tabIndex:-1});this._addClass(this.anchors,"ui-tabs-anchor");this.panels=e();this.anchors.each((function(i,n){var r,o,a,s=e(n).uniqueId().attr("id"),l=e(n).closest("li"),u=l.attr("aria-controls");if(t._isLocal(n)){r=decodeURIComponent(n.hash);a=r.substring(1);o=t.element.find("#"+CSS.escape(a))}else{a=l.attr("aria-controls")||e({}).uniqueId()[0].id;r="#"+a;o=t.element.find(r);if(!o.length){o=t._createPanel(a);o.insertAfter(t.panels[i-1]||t.tablist)}o.attr("aria-live","polite")}if(o.length){t.panels=t.panels.add(o)}if(u){l.data("ui-tabs-aria-controls",u)}l.attr({"aria-controls":a,"aria-labelledby":s});o.attr("aria-labelledby",s)}));this.panels.attr("role","tabpanel");this._addClass(this.panels,"ui-tabs-panel","ui-widget-content");if(i){this._off(i.not(this.tabs));this._off(n.not(this.anchors));this._off(r.not(this.panels))}},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).data("ui-tabs-destroy",true)},_setOptionDisabled:function(t){var i,n,r;if(Array.isArray(t)){if(!t.length){t=false}else if(t.length===this.anchors.length){t=true}}for(r=0;n=this.tabs[r];r++){i=e(n);if(t===true||e.inArray(r,t)!==-1){i.attr("aria-disabled","true");this._addClass(i,null,"ui-state-disabled")}else{i.removeAttr("aria-disabled");this._removeClass(i,null,"ui-state-disabled")}}this.options.disabled=t;this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,t===true)},_setupEvents:function(t){var i={};if(t){e.each(t.split(" "),(function(e,t){i[t]="_eventHandler"}))}this._off(this.anchors.add(this.tabs).add(this.panels));this._on(true,this.anchors,{click:function(e){e.preventDefault()}});this._on(this.anchors,i);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();if(t==="fill"){i=n.height();i-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each((function(){var t=e(this),n=t.css("position");if(n==="absolute"||n==="fixed"){return}i-=t.outerHeight(true)}));this.element.children().not(this.panels).each((function(){i-=e(this).outerHeight(true)}));this.panels.each((function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")}else if(t==="auto"){i=0;this.panels.each((function(){i=Math.max(i,e(this).height("").height())})).height(i)}},_eventHandler:function(t){var i=this.options,n=this.active,r=e(t.currentTarget),o=r.closest("li"),a=o[0]===n[0],s=a&&i.collapsible,l=s?e():this._getPanelForTab(o),u=!n.length?e():this._getPanelForTab(n),c={oldTab:n,oldPanel:u,newTab:s?e():o,newPanel:l};t.preventDefault();if(o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||this._trigger("beforeActivate",t,c)===false){return}i.active=s?false:this.tabs.index(o);this.active=a?e():o;if(this.xhr){this.xhr.abort()}if(!u.length&&!l.length){e.error("jQuery UI Tabs: Mismatching fragment identifier.")}if(l.length){this.load(this.tabs.index(o),t)}this._toggle(t,c)},_toggle:function(t,i){var n=this,r=i.newPanel,o=i.oldPanel;this.running=true;function a(){n.running=false;n._trigger("activate",t,i)}function s(){n._addClass(i.newTab.closest("li"),"ui-tabs-active","ui-state-active");if(r.length&&n.options.show){n._show(r,n.options.show,a)}else{r.show();a()}}if(o.length&&this.options.hide){this._hide(o,this.options.hide,(function(){n._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active");s()}))}else{this._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active");o.hide();s()}o.attr("aria-hidden","true");i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});if(r.length&&o.length){i.oldTab.attr("tabIndex",-1)}else if(r.length){this.tabs.filter((function(){return e(this).attr("tabIndex")===0})).attr("tabIndex",-1)}r.attr("aria-hidden","false");i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);if(n[0]===this.active[0]){return}if(!n.length){n=this.active}i=n.find(".ui-tabs-anchor")[0];this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop})},_findActive:function(t){return t===false?e():this.tabs.eq(t)},_getIndex:function(e){if(typeof e==="string"){e=this.anchors.index(this.anchors.filter("[href$='"+CSS.escape(e)+"']"))}return e},_destroy:function(){if(this.xhr){this.xhr.abort()}this.tablist.removeAttr("role").off(this.eventNamespace);this.anchors.removeAttr("role tabIndex").removeUniqueId();this.tabs.add(this.panels).each((function(){if(e.data(this,"ui-tabs-destroy")){e(this).remove()}else{e(this).removeAttr("role tabIndex "+"aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}}));this.tabs.each((function(){var t=e(this),i=t.data("ui-tabs-aria-controls");if(i){t.attr("aria-controls",i).removeData("ui-tabs-aria-controls")}else{t.removeAttr("aria-controls")}}));this.panels.show();if(this.options.heightStyle!=="content"){this.panels.css("height","")}},enable:function(t){var i=this.options.disabled;if(i===false){return}if(t===undefined){i=false}else{t=this._getIndex(t);if(Array.isArray(i)){i=e.map(i,(function(e){return e!==t?e:null}))}else{i=e.map(this.tabs,(function(e,i){return i!==t?i:null}))}}this._setOptionDisabled(i)},disable:function(t){var i=this.options.disabled;if(i===true){return}if(t===undefined){i=true}else{t=this._getIndex(t);if(e.inArray(t,i)!==-1){return}if(Array.isArray(i)){i=e.merge([t],i).sort()}else{i=[t]}}this._setOptionDisabled(i)},load:function(t,i){t=this._getIndex(t);var n=this,r=this.tabs.eq(t),o=r.find(".ui-tabs-anchor"),a=this._getPanelForTab(r),s={tab:r,panel:a},l=function(e,t){if(t==="abort"){n.panels.stop(false,true)}n._removeClass(r,"ui-tabs-loading");a.removeAttr("aria-busy");if(e===n.xhr){delete n.xhr}};if(this._isLocal(o[0])){return}this.xhr=e.ajax(this._ajaxSettings(o,i,s));if(this.xhr.statusText!=="canceled"){this._addClass(r,"ui-tabs-loading");a.attr("aria-busy","true");this.xhr.done((function(e,t,r){a.html(e);n._trigger("load",i,s);l(r,t)})).fail((function(e,t){l(e,t)}))}},_ajaxSettings:function(t,i,n){var r=this;return{url:t.attr("href"),beforeSend:function(t,o){return r._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:o},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find("#"+CSS.escape(i))}});if(e.uiBackCompat===true){e.widget("ui.tabs",e.ui.tabs,{_processTabs:function(){this._superApply(arguments);this._addClass(this.tabs,"ui-tab")}})}var Ee=e.ui.tabs;e.widget("ui.tooltip",{version:"1.14.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=e(this).attr("title");return e("<a>").text(t).html()},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,track:false,close:null,open:null},_addDescribedBy:function(e,t){var i=(e.attr("aria-describedby")||"").split(/\s+/);i.push(t);e.data("ui-tooltip-id",t).attr("aria-describedby",String.prototype.trim.call(i.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),r=e.inArray(i,n);if(r!==-1){n.splice(r,1)}t.removeData("ui-tooltip-id");n=String.prototype.trim.call(n.join(" "));if(n){t.attr("aria-describedby",n)}else{t.removeAttr("aria-describedby")}},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this.disabledTitles=e([])},_setOption:function(t,i){var n=this;this._super(t,i);if(t==="content"){e.each(this.tooltips,(function(e,t){n._updateContent(t.element)}))}},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var t=this;e.each(this.tooltips,(function(i,n){var r=e.Event("blur");r.target=r.currentTarget=n.element[0];t.close(r,true)}));this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter((function(){var t=e(this);if(t.is("[title]")){return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}})))},_enable:function(){this.disabledTitles.each((function(){var t=e(this);if(t.data("ui-tooltip-title")){t.attr("title",t.data("ui-tooltip-title"))}}));this.disabledTitles=e([])},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);if(!n.length||n.data("ui-tooltip-id")){return}if(n.attr("title")){n.data("ui-tooltip-title",n.attr("title"))}n.data("ui-tooltip-open",true);if(t&&t.type==="mouseover"){n.parents().each((function(){var t=e(this),n;if(t.data("ui-tooltip-open")){n=e.Event("blur");n.target=n.currentTarget=this;i.close(n,true)}if(t.attr("title")){t.uniqueId();i.parents[this.id]={element:this,title:t.attr("title")};t.attr("title","")}}))}this._registerCloseHandlers(t,n);this._updateContent(n,t)},_updateContent:function(e,t){var i,n=this.options.content,r=this,o=t?t.type:null;if(typeof n==="string"||n.nodeType||n.jquery){return this._open(t,e,n)}i=n.call(e[0],(function(i){if(!e.data("ui-tooltip-open")){return}if(t){t.type=o}r._open(t,e,i)}));if(i){this._open(t,e,i)}},_open:function(t,i,n){var r,o,a,s,l=e.extend({},this.options.position);if(!n){return}r=this._find(i);if(r){r.tooltip.find(".ui-tooltip-content").html(n);return}if(i.is("[title]")){if(t&&t.type==="mouseover"){i.attr("title","")}else{i.removeAttr("title")}}r=this._tooltip(i);o=r.tooltip;this._addDescribedBy(i,o.attr("id"));o.find(".ui-tooltip-content").html(n);this.liveRegion.children().hide();s=e("<div>").html(o.find(".ui-tooltip-content").html());s.removeAttr("name").find("[name]").removeAttr("name");s.removeAttr("id").find("[id]").removeAttr("id");s.appendTo(this.liveRegion);function u(e){l.of=e;if(o.is(":hidden")){return}o.position(l)}if(this.options.track&&t&&/^mouse/.test(t.type)){this._on(this.document,{mousemove:u});u(t)}else{o.position(e.extend({of:i},this.options.position))}o.hide();this._show(o,this.options.show);if(this.options.track&&this.options.show&&this.options.show.delay){a=this.delayedShow=setInterval((function(){if(o.is(":visible")){u(l.of);clearInterval(a)}}),13)}this._trigger("open",t,{tooltip:o})},_registerCloseHandlers:function(t,i){var n={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=i[0];this.close(n,true)}}};if(i[0]!==this.element[0]){n.remove=function(){var e=this._find(i);if(e){this._removeTooltip(e.tooltip)}}}if(!t||t.type==="mouseover"){n.mouseleave="close"}if(!t||t.type==="focusin"){n.focusout="close"}this._on(true,i,n)},close:function(t){var i,n=this,r=e(t?t.currentTarget:this.element),o=this._find(r);if(!o){r.removeData("ui-tooltip-open");return}i=o.tooltip;if(o.closing){return}clearInterval(this.delayedShow);if(r.data("ui-tooltip-title")&&!r.attr("title")){r.attr("title",r.data("ui-tooltip-title"))}this._removeDescribedBy(r);o.hiding=true;i.stop(true);this._hide(i,this.options.hide,(function(){n._removeTooltip(e(this))}));r.removeData("ui-tooltip-open");this._off(r,"mouseleave focusout keyup");if(r[0]!==this.element[0]){this._off(r,"remove")}this._off(this.document,"mousemove");if(t&&t.type==="mouseleave"){e.each(this.parents,(function(t,i){e(i.element).attr("title",i.title);delete n.parents[t]}))}o.closing=true;this._trigger("close",t,{tooltip:i});if(!o.hiding){o.closing=false}},_tooltip:function(t){var i=e("<div>").attr("role","tooltip"),n=e("<div>").appendTo(i),r=i.uniqueId().attr("id");this._addClass(n,"ui-tooltip-content");this._addClass(i,"ui-tooltip","ui-widget ui-widget-content");i.appendTo(this._appendTo(t));return this.tooltips[r]={element:t,tooltip:i}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){clearInterval(this.delayedShow);e.remove();delete this.tooltips[e.attr("id")]},_appendTo:function(e){var t=e.closest(".ui-front, dialog");if(!t.length){t=this.document[0].body}return t},_destroy:function(){var t=this;e.each(this.tooltips,(function(i,n){var r=e.Event("blur"),o=n.element;r.target=r.currentTarget=o[0];t.close(r,true);e("#"+i).remove();if(o.data("ui-tooltip-title")){if(!o.attr("title")){o.attr("title",o.data("ui-tooltip-title"))}o.removeData("ui-tooltip-title")}}));this.liveRegion.remove()}});if(e.uiBackCompat===true){e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);if(this.options.tooltipClass){e.tooltip.addClass(this.options.tooltipClass)}return e}})}var xe=e.ui.tooltip}));(function(){var e;var t="4.17.21";var i=200;var n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",r="Expected a function",o="Invalid `variable` option passed into `_.template`";var a="__lodash_hash_undefined__";var s=500;var l="__lodash_placeholder__";var u=1,c=2,d=4;var f=1,p=2;var h=1,g=2,m=4,v=8,y=16,b=32,_=64,w=128,C=256,A=512;var E=30,x="...";var T=800,S=16;var D=1,k=2,O=3;var R=1/0,N=9007199254740991,P=17976931348623157e292,I=0/0;var M=4294967295,L=M-1,F=M>>>1;var G=[["ary",w],["bind",h],["bindKey",g],["curry",v],["curryRight",y],["flip",A],["partial",b],["partialRight",_],["rearg",C]];var $="[object Arguments]",W="[object Array]",H="[object AsyncFunction]",j="[object Boolean]",B="[object Date]",V="[object DOMException]",z="[object Error]",U="[object Function]",Y="[object GeneratorFunction]",q="[object Map]",X="[object Number]",K="[object Null]",Q="[object Object]",Z="[object Promise]",J="[object Proxy]",ee="[object RegExp]",te="[object Set]",ie="[object String]",ne="[object Symbol]",re="[object Undefined]",oe="[object WeakMap]",ae="[object WeakSet]";var se="[object ArrayBuffer]",le="[object DataView]",ue="[object Float32Array]",ce="[object Float64Array]",de="[object Int8Array]",fe="[object Int16Array]",pe="[object Int32Array]",he="[object Uint8Array]",ge="[object Uint8ClampedArray]",me="[object Uint16Array]",ve="[object Uint32Array]";var ye=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,_e=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var we=/&(?:amp|lt|gt|quot|#39);/g,Ce=/[&<>"']/g,Ae=RegExp(we.source),Ee=RegExp(Ce.source);var xe=/<%-([\s\S]+?)%>/g,Te=/<%([\s\S]+?)%>/g,Se=/<%=([\s\S]+?)%>/g;var De=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ke=/^\w*$/,Oe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var Re=/[\\^$.*+?()[\]{}|]/g,Ne=RegExp(Re.source);var Pe=/^\s+/;var Ie=/\s/;var Me=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Le=/\{\n\/\* \[wrapped with (.+)\] \*/,Fe=/,? & /;var Ge=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var $e=/[()=,{}\[\]\/\s]/;var We=/\\(\\)?/g;var He=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var je=/\w*$/;var Be=/^[-+]0x[0-9a-f]+$/i;var Ve=/^0b[01]+$/i;var ze=/^\[object .+?Constructor\]$/;var Ue=/^0o[0-7]+$/i;var Ye=/^(?:0|[1-9]\d*)$/;var qe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;var Xe=/($^)/;var Ke=/['\n\r\u2028\u2029\\]/g;var Qe="\\ud800-\\udfff",Ze="\\u0300-\\u036f",Je="\\ufe20-\\ufe2f",et="\\u20d0-\\u20ff",tt=Ze+Je+et,it="\\u2700-\\u27bf",nt="a-z\\xdf-\\xf6\\xf8-\\xff",rt="\\xac\\xb1\\xd7\\xf7",ot="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",at="\\u2000-\\u206f",st=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lt="A-Z\\xc0-\\xd6\\xd8-\\xde",ut="\\ufe0e\\ufe0f",ct=rt+ot+at+st;var dt="['’]",ft="["+Qe+"]",pt="["+ct+"]",ht="["+tt+"]",gt="\\d+",mt="["+it+"]",vt="["+nt+"]",yt="[^"+Qe+ct+gt+it+nt+lt+"]",bt="\\ud83c[\\udffb-\\udfff]",_t="(?:"+ht+"|"+bt+")",wt="[^"+Qe+"]",Ct="(?:\\ud83c[\\udde6-\\uddff]){2}",At="[\\ud800-\\udbff][\\udc00-\\udfff]",Et="["+lt+"]",xt="\\u200d";var Tt="(?:"+vt+"|"+yt+")",St="(?:"+Et+"|"+yt+")",Dt="(?:"+dt+"(?:d|ll|m|re|s|t|ve))?",kt="(?:"+dt+"(?:D|LL|M|RE|S|T|VE))?",Ot=_t+"?",Rt="["+ut+"]?",Nt="(?:"+xt+"(?:"+[wt,Ct,At].join("|")+")"+Rt+Ot+")*",Pt="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",It="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Mt=Rt+Ot+Nt,Lt="(?:"+[mt,Ct,At].join("|")+")"+Mt,Ft="(?:"+[wt+ht+"?",ht,Ct,At,ft].join("|")+")";var Gt=RegExp(dt,"g");var $t=RegExp(ht,"g");var Wt=RegExp(bt+"(?="+bt+")|"+Ft+Mt,"g");var Ht=RegExp([Et+"?"+vt+"+"+Dt+"(?="+[pt,Et,"$"].join("|")+")",St+"+"+kt+"(?="+[pt,Et+Tt,"$"].join("|")+")",Et+"?"+Tt+"+"+Dt,Et+"+"+kt,It,Pt,gt,Lt].join("|"),"g");var jt=RegExp("["+xt+Qe+tt+ut+"]");var Bt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Vt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"];var zt=-1;var Ut={};Ut[ue]=Ut[ce]=Ut[de]=Ut[fe]=Ut[pe]=Ut[he]=Ut[ge]=Ut[me]=Ut[ve]=true;Ut[$]=Ut[W]=Ut[se]=Ut[j]=Ut[le]=Ut[B]=Ut[z]=Ut[U]=Ut[q]=Ut[X]=Ut[Q]=Ut[ee]=Ut[te]=Ut[ie]=Ut[oe]=false;var Yt={};Yt[$]=Yt[W]=Yt[se]=Yt[le]=Yt[j]=Yt[B]=Yt[ue]=Yt[ce]=Yt[de]=Yt[fe]=Yt[pe]=Yt[q]=Yt[X]=Yt[Q]=Yt[ee]=Yt[te]=Yt[ie]=Yt[ne]=Yt[he]=Yt[ge]=Yt[me]=Yt[ve]=true;Yt[z]=Yt[U]=Yt[oe]=false;var qt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"};var Xt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var Kt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};var Qt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var Zt=parseFloat,Jt=parseInt;var ei=typeof global=="object"&&global&&global.Object===Object&&global;var ti=typeof self=="object"&&self&&self.Object===Object&&self;var ii=ei||ti||Function("return this")();var ni=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var ri=ni&&typeof module=="object"&&module&&!module.nodeType&&module;var oi=ri&&ri.exports===ni;var ai=oi&&ei.process;var si=function(){try{var e=ri&&ri.require&&ri.require("util").types;if(e){return e}return ai&&ai.binding&&ai.binding("util")}catch(e){}}();var li=si&&si.isArrayBuffer,ui=si&&si.isDate,ci=si&&si.isMap,di=si&&si.isRegExp,fi=si&&si.isSet,pi=si&&si.isTypedArray;function hi(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function gi(e,t,i,n){var r=-1,o=e==null?0:e.length;while(++r<o){var a=e[r];t(n,a,i(a),e)}return n}function mi(e,t){var i=-1,n=e==null?0:e.length;while(++i<n){if(t(e[i],i,e)===false){break}}return e}function vi(e,t){var i=e==null?0:e.length;while(i--){if(t(e[i],i,e)===false){break}}return e}function yi(e,t){var i=-1,n=e==null?0:e.length;while(++i<n){if(!t(e[i],i,e)){return false}}return true}function bi(e,t){var i=-1,n=e==null?0:e.length,r=0,o=[];while(++i<n){var a=e[i];if(t(a,i,e)){o[r++]=a}}return o}function _i(e,t){var i=e==null?0:e.length;return!!i&&Ni(e,t,0)>-1}function wi(e,t,i){var n=-1,r=e==null?0:e.length;while(++n<r){if(i(t,e[n])){return true}}return false}function Ci(e,t){var i=-1,n=e==null?0:e.length,r=Array(n);while(++i<n){r[i]=t(e[i],i,e)}return r}function Ai(e,t){var i=-1,n=t.length,r=e.length;while(++i<n){e[r+i]=t[i]}return e}function Ei(e,t,i,n){var r=-1,o=e==null?0:e.length;if(n&&o){i=e[++r]}while(++r<o){i=t(i,e[r],r,e)}return i}function xi(e,t,i,n){var r=e==null?0:e.length;if(n&&r){i=e[--r]}while(r--){i=t(i,e[r],r,e)}return i}function Ti(e,t){var i=-1,n=e==null?0:e.length;while(++i<n){if(t(e[i],i,e)){return true}}return false}var Si=Li("length");function Di(e){return e.split("")}function ki(e){return e.match(Ge)||[]}function Oi(e,t,i){var n;i(e,(function(e,i,r){if(t(e,i,r)){n=i;return false}}));return n}function Ri(e,t,i,n){var r=e.length,o=i+(n?1:-1);while(n?o--:++o<r){if(t(e[o],o,e)){return o}}return-1}function Ni(e,t,i){return t===t?un(e,t,i):Ri(e,Ii,i)}function Pi(e,t,i,n){var r=i-1,o=e.length;while(++r<o){if(n(e[r],t)){return r}}return-1}function Ii(e){return e!==e}function Mi(e,t){var i=e==null?0:e.length;return i?Wi(e,t)/i:I}function Li(t){return function(i){return i==null?e:i[t]}}function Fi(t){return function(i){return t==null?e:t[i]}}function Gi(e,t,i,n,r){r(e,(function(e,r,o){i=n?(n=false,e):t(i,e,r,o)}));return i}function $i(e,t){var i=e.length;e.sort(t);while(i--){e[i]=e[i].value}return e}function Wi(t,i){var n,r=-1,o=t.length;while(++r<o){var a=i(t[r]);if(a!==e){n=n===e?a:n+a}}return n}function Hi(e,t){var i=-1,n=Array(e);while(++i<e){n[i]=t(i)}return n}function ji(e,t){return Ci(t,(function(t){return[t,e[t]]}))}function Bi(e){return e?e.slice(0,pn(e)+1).replace(Pe,""):e}function Vi(e){return function(t){return e(t)}}function zi(e,t){return Ci(t,(function(t){return e[t]}))}function Ui(e,t){return e.has(t)}function Yi(e,t){var i=-1,n=e.length;while(++i<n&&Ni(t,e[i],0)>-1){}return i}function qi(e,t){var i=e.length;while(i--&&Ni(t,e[i],0)>-1){}return i}function Xi(e,t){var i=e.length,n=0;while(i--){if(e[i]===t){++n}}return n}var Ki=Fi(qt);var Qi=Fi(Xt);function Zi(e){return"\\"+Qt[e]}function Ji(t,i){return t==null?e:t[i]}function en(e){return jt.test(e)}function tn(e){return Bt.test(e)}function nn(e){var t,i=[];while(!(t=e.next()).done){i.push(t.value)}return i}function rn(e){var t=-1,i=Array(e.size);e.forEach((function(e,n){i[++t]=[n,e]}));return i}function on(e,t){return function(i){return e(t(i))}}function an(e,t){var i=-1,n=e.length,r=0,o=[];while(++i<n){var a=e[i];if(a===t||a===l){e[i]=l;o[r++]=i}}return o}function sn(e){var t=-1,i=Array(e.size);e.forEach((function(e){i[++t]=e}));return i}function ln(e){var t=-1,i=Array(e.size);e.forEach((function(e){i[++t]=[e,e]}));return i}function un(e,t,i){var n=i-1,r=e.length;while(++n<r){if(e[n]===t){return n}}return-1}function cn(e,t,i){var n=i+1;while(n--){if(e[n]===t){return n}}return n}function dn(e){return en(e)?gn(e):Si(e)}function fn(e){return en(e)?mn(e):Di(e)}function pn(e){var t=e.length;while(t--&&Ie.test(e.charAt(t))){}return t}var hn=Fi(Kt);function gn(e){var t=Wt.lastIndex=0;while(Wt.test(e)){++t}return t}function mn(e){return e.match(Wt)||[]}function vn(e){return e.match(Ht)||[]}var yn=function Ie(Ge){Ge=Ge==null?ii:bn.defaults(ii.Object(),Ge,bn.pick(ii,Vt));var Qe=Ge.Array,Ze=Ge.Date,Je=Ge.Error,et=Ge.Function,tt=Ge.Math,it=Ge.Object,nt=Ge.RegExp,rt=Ge.String,ot=Ge.TypeError;var at=Qe.prototype,st=et.prototype,lt=it.prototype;var ut=Ge["__core-js_shared__"];var ct=st.toString;var dt=lt.hasOwnProperty;var ft=0;var pt=function(){var e=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var ht=lt.toString;var gt=ct.call(it);var mt=ii._;var vt=nt("^"+ct.call(dt).replace(Re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var yt=oi?Ge.Buffer:e,bt=Ge.Symbol,_t=Ge.Uint8Array,wt=yt?yt.allocUnsafe:e,Ct=on(it.getPrototypeOf,it),At=it.create,Et=lt.propertyIsEnumerable,xt=at.splice,Tt=bt?bt.isConcatSpreadable:e,St=bt?bt.iterator:e,Dt=bt?bt.toStringTag:e;var kt=function(){try{var e=Ya(it,"defineProperty");e({},"",{});return e}catch(e){}}();var Ot=Ge.clearTimeout!==ii.clearTimeout&&Ge.clearTimeout,Rt=Ze&&Ze.now!==ii.Date.now&&Ze.now,Nt=Ge.setTimeout!==ii.setTimeout&&Ge.setTimeout;var Pt=tt.ceil,It=tt.floor,Mt=it.getOwnPropertySymbols,Lt=yt?yt.isBuffer:e,Ft=Ge.isFinite,Wt=at.join,Ht=on(it.keys,it),jt=tt.max,Bt=tt.min,qt=Ze.now,Xt=Ge.parseInt,Kt=tt.random,Qt=at.reverse;var ei=Ya(Ge,"DataView"),ti=Ya(Ge,"Map"),ni=Ya(Ge,"Promise"),ri=Ya(Ge,"Set"),ai=Ya(Ge,"WeakMap"),si=Ya(it,"create");var Si=ai&&new ai;var Di={};var Fi=Ns(ei),un=Ns(ti),gn=Ns(ni),mn=Ns(ri),yn=Ns(ai);var _n=bt?bt.prototype:e,wn=_n?_n.valueOf:e,Cn=_n?_n.toString:e;function An(e){if(xc(e)&&!lc(e)&&!(e instanceof Sn)){if(e instanceof Tn){return e}if(dt.call(e,"__wrapped__")){return Is(e)}}return new Tn(e)}var En=function(){function t(){}return function(i){if(!Ec(i)){return{}}if(At){return At(i)}t.prototype=i;var n=new t;t.prototype=e;return n}}();function xn(){}function Tn(t,i){this.__wrapped__=t;this.__actions__=[];this.__chain__=!!i;this.__index__=0;this.__values__=e}An.templateSettings={escape:xe,evaluate:Te,interpolate:Se,variable:"",imports:{_:An}};An.prototype=xn.prototype;An.prototype.constructor=An;Tn.prototype=En(xn.prototype);Tn.prototype.constructor=Tn;function Sn(e){this.__wrapped__=e;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=M;this.__views__=[]}function Dn(){var e=new Sn(this.__wrapped__);e.__actions__=ra(this.__actions__);e.__dir__=this.__dir__;e.__filtered__=this.__filtered__;e.__iteratees__=ra(this.__iteratees__);e.__takeCount__=this.__takeCount__;e.__views__=ra(this.__views__);return e}function kn(){if(this.__filtered__){var e=new Sn(this);e.__dir__=-1;e.__filtered__=true}else{e=this.clone();e.__dir__*=-1}return e}function On(){var e=this.__wrapped__.value(),t=this.__dir__,i=lc(e),n=t<0,r=i?e.length:0,o=Za(0,r,this.__views__),a=o.start,s=o.end,l=s-a,u=n?s:a-1,c=this.__iteratees__,d=c.length,f=0,p=Bt(l,this.__takeCount__);if(!i||!n&&r==l&&p==l){return $o(e,this.__actions__)}var h=[];e:while(l--&&f<p){u+=t;var g=-1,m=e[u];while(++g<d){var v=c[g],y=v.iteratee,b=v.type,_=y(m);if(b==k){m=_}else if(!_){if(b==D){continue e}else{break e}}}h[f++]=m}return h}Sn.prototype=En(xn.prototype);Sn.prototype.constructor=Sn;function Rn(e){var t=-1,i=e==null?0:e.length;this.clear();while(++t<i){var n=e[t];this.set(n[0],n[1])}}function Nn(){this.__data__=si?si(null):{};this.size=0}function Pn(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t}function In(t){var i=this.__data__;if(si){var n=i[t];return n===a?e:n}return dt.call(i,t)?i[t]:e}function Mn(t){var i=this.__data__;return si?i[t]!==e:dt.call(i,t)}function Ln(t,i){var n=this.__data__;this.size+=this.has(t)?0:1;n[t]=si&&i===e?a:i;return this}Rn.prototype.clear=Nn;Rn.prototype["delete"]=Pn;Rn.prototype.get=In;Rn.prototype.has=Mn;Rn.prototype.set=Ln;function Fn(e){var t=-1,i=e==null?0:e.length;this.clear();while(++t<i){var n=e[t];this.set(n[0],n[1])}}function Gn(){this.__data__=[];this.size=0}function $n(e){var t=this.__data__,i=cr(t,e);if(i<0){return false}var n=t.length-1;if(i==n){t.pop()}else{xt.call(t,i,1)}--this.size;return true}function Wn(t){var i=this.__data__,n=cr(i,t);return n<0?e:i[n][1]}function Hn(e){return cr(this.__data__,e)>-1}function jn(e,t){var i=this.__data__,n=cr(i,e);if(n<0){++this.size;i.push([e,t])}else{i[n][1]=t}return this}Fn.prototype.clear=Gn;Fn.prototype["delete"]=$n;Fn.prototype.get=Wn;Fn.prototype.has=Hn;Fn.prototype.set=jn;function Bn(e){var t=-1,i=e==null?0:e.length;this.clear();while(++t<i){var n=e[t];this.set(n[0],n[1])}}function Vn(){this.size=0;this.__data__={hash:new Rn,map:new(ti||Fn),string:new Rn}}function zn(e){var t=za(this,e)["delete"](e);this.size-=t?1:0;return t}function Un(e){return za(this,e).get(e)}function Yn(e){return za(this,e).has(e)}function qn(e,t){var i=za(this,e),n=i.size;i.set(e,t);this.size+=i.size==n?0:1;return this}Bn.prototype.clear=Vn;Bn.prototype["delete"]=zn;Bn.prototype.get=Un;Bn.prototype.has=Yn;Bn.prototype.set=qn;function Xn(e){var t=-1,i=e==null?0:e.length;this.__data__=new Bn;while(++t<i){this.add(e[t])}}function Kn(e){this.__data__.set(e,a);return this}function Qn(e){return this.__data__.has(e)}Xn.prototype.add=Xn.prototype.push=Kn;Xn.prototype.has=Qn;function Zn(e){var t=this.__data__=new Fn(e);this.size=t.size}function Jn(){this.__data__=new Fn;this.size=0}function er(e){var t=this.__data__,i=t["delete"](e);this.size=t.size;return i}function tr(e){return this.__data__.get(e)}function ir(e){return this.__data__.has(e)}function nr(e,t){var n=this.__data__;if(n instanceof Fn){var r=n.__data__;if(!ti||r.length<i-1){r.push([e,t]);this.size=++n.size;return this}n=this.__data__=new Bn(r)}n.set(e,t);this.size=n.size;return this}Zn.prototype.clear=Jn;Zn.prototype["delete"]=er;Zn.prototype.get=tr;Zn.prototype.has=ir;Zn.prototype.set=nr;function rr(e,t){var i=lc(e),n=!i&&sc(e),r=!i&&!n&&pc(e),o=!i&&!n&&!r&&Wc(e),a=i||n||r||o,s=a?Hi(e.length,rt):[],l=s.length;for(var u in e){if((t||dt.call(e,u))&&!(a&&(u=="length"||r&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||as(u,l)))){s.push(u)}}return s}function or(t){var i=t.length;return i?t[yo(0,i-1)]:e}function ar(e,t){return ks(ra(e),mr(t,0,e.length))}function sr(e){return ks(ra(e))}function lr(t,i,n){if(n!==e&&!rc(t[i],n)||n===e&&!(i in t)){hr(t,i,n)}}function ur(t,i,n){var r=t[i];if(!(dt.call(t,i)&&rc(r,n))||n===e&&!(i in t)){hr(t,i,n)}}function cr(e,t){var i=e.length;while(i--){if(rc(e[i][0],t)){return i}}return-1}function dr(e,t,i,n){Cr(e,(function(e,r,o){t(n,e,i(e),o)}));return n}function fr(e,t){return e&&oa(t,Cd(t),e)}function pr(e,t){return e&&oa(t,Ad(t),e)}function hr(e,t,i){if(t=="__proto__"&&kt){kt(e,t,{configurable:true,enumerable:true,value:i,writable:true})}else{e[t]=i}}function gr(t,i){var n=-1,r=i.length,o=Qe(r),a=t==null;while(++n<r){o[n]=a?e:md(t,i[n])}return o}function mr(t,i,n){if(t===t){if(n!==e){t=t<=n?t:n}if(i!==e){t=t>=i?t:i}}return t}function vr(t,i,n,r,o,a){var s,l=i&u,f=i&c,p=i&d;if(n){s=o?n(t,r,o,a):n(t)}if(s!==e){return s}if(!Ec(t)){return t}var h=lc(t);if(h){s=ts(t);if(!l){return ra(t,s)}}else{var g=Qa(t),m=g==U||g==Y;if(pc(t)){return qo(t,l)}if(g==Q||g==$||m&&!o){s=f||m?{}:is(t);if(!l){return f?sa(t,pr(s,t)):aa(t,fr(s,t))}}else{if(!Yt[g]){return o?t:{}}s=ns(t,g,l)}}a||(a=new Zn);var v=a.get(t);if(v){return v}a.set(t,s);if(Fc(t)){t.forEach((function(e){s.add(vr(e,i,n,e,t,a))}))}else if(Tc(t)){t.forEach((function(e,r){s.set(r,vr(e,i,n,r,t,a))}))}var y=p?f?Wa:$a:f?Ad:Cd;var b=h?e:y(t);mi(b||t,(function(e,r){if(b){r=e;e=t[r]}ur(s,r,vr(e,i,n,r,t,a))}));return s}function yr(e){var t=Cd(e);return function(i){return br(i,e,t)}}function br(t,i,n){var r=n.length;if(t==null){return!r}t=it(t);while(r--){var o=n[r],a=i[o],s=t[o];if(s===e&&!(o in t)||!a(s)){return false}}return true}function _r(t,i,n){if(typeof t!="function"){throw new ot(r)}return xs((function(){t.apply(e,n)}),i)}function wr(e,t,n,r){var o=-1,a=_i,s=true,l=e.length,u=[],c=t.length;if(!l){return u}if(n){t=Ci(t,Vi(n))}if(r){a=wi;s=false}else if(t.length>=i){a=Ui;s=false;t=new Xn(t)}e:while(++o<l){var d=e[o],f=n==null?d:n(d);d=r||d!==0?d:0;if(s&&f===f){var p=c;while(p--){if(t[p]===f){continue e}}u.push(d)}else if(!a(t,f,r)){u.push(d)}}return u}var Cr=ca(Rr);var Ar=ca(Nr,true);function Er(e,t){var i=true;Cr(e,(function(e,n,r){i=!!t(e,n,r);return i}));return i}function xr(t,i,n){var r=-1,o=t.length;while(++r<o){var a=t[r],s=i(a);if(s!=null&&(l===e?s===s&&!$c(s):n(s,l))){var l=s,u=a}}return u}function Tr(t,i,n,r){var o=t.length;n=qc(n);if(n<0){n=-n>o?0:o+n}r=r===e||r>o?o:qc(r);if(r<0){r+=o}r=n>r?0:Xc(r);while(n<r){t[n++]=i}return t}function Sr(e,t){var i=[];Cr(e,(function(e,n,r){if(t(e,n,r)){i.push(e)}}));return i}function Dr(e,t,i,n,r){var o=-1,a=e.length;i||(i=os);r||(r=[]);while(++o<a){var s=e[o];if(t>0&&i(s)){if(t>1){Dr(s,t-1,i,n,r)}else{Ai(r,s)}}else if(!n){r[r.length]=s}}return r}var kr=da();var Or=da(true);function Rr(e,t){return e&&kr(e,t,Cd)}function Nr(e,t){return e&&Or(e,t,Cd)}function Pr(e,t){return bi(t,(function(t){return wc(e[t])}))}function Ir(t,i){i=Vo(i,t);var n=0,r=i.length;while(t!=null&&n<r){t=t[Rs(i[n++])]}return n&&n==r?t:e}function Mr(e,t,i){var n=t(e);return lc(e)?n:Ai(n,i(e))}function Lr(t){if(t==null){return t===e?re:K}return Dt&&Dt in it(t)?qa(t):bs(t)}function Fr(e,t){return e>t}function Gr(e,t){return e!=null&&dt.call(e,t)}function $r(e,t){return e!=null&&t in it(e)}function Wr(e,t,i){return e>=Bt(t,i)&&e<jt(t,i)}function Hr(t,i,n){var r=n?wi:_i,o=t[0].length,a=t.length,s=a,l=Qe(a),u=Infinity,c=[];while(s--){var d=t[s];if(s&&i){d=Ci(d,Vi(i))}u=Bt(d.length,u);l[s]=!n&&(i||o>=120&&d.length>=120)?new Xn(s&&d):e}d=t[0];var f=-1,p=l[0];e:while(++f<o&&c.length<u){var h=d[f],g=i?i(h):h;h=n||h!==0?h:0;if(!(p?Ui(p,g):r(c,g,n))){s=a;while(--s){var m=l[s];if(!(m?Ui(m,g):r(t[s],g,n))){continue e}}if(p){p.push(g)}c.push(h)}}return c}function jr(e,t,i,n){Rr(e,(function(e,r,o){t(n,i(e),r,o)}));return n}function Br(t,i,n){i=Vo(i,t);t=ws(t,i);var r=t==null?t:t[Rs(ol(i))];return r==null?e:hi(r,t,n)}function Vr(e){return xc(e)&&Lr(e)==$}function zr(e){return xc(e)&&Lr(e)==se}function Ur(e){return xc(e)&&Lr(e)==B}function Yr(e,t,i,n,r){if(e===t){return true}if(e==null||t==null||!xc(e)&&!xc(t)){return e!==e&&t!==t}return qr(e,t,i,n,Yr,r)}function qr(e,t,i,n,r,o){var a=lc(e),s=lc(t),l=a?W:Qa(e),u=s?W:Qa(t);l=l==$?Q:l;u=u==$?Q:u;var c=l==Q,d=u==Q,p=l==u;if(p&&pc(e)){if(!pc(t)){return false}a=true;c=false}if(p&&!c){o||(o=new Zn);return a||Wc(e)?Ma(e,t,i,n,r,o):La(e,t,l,i,n,r,o)}if(!(i&f)){var h=c&&dt.call(e,"__wrapped__"),g=d&&dt.call(t,"__wrapped__");if(h||g){var m=h?e.value():e,v=g?t.value():t;o||(o=new Zn);return r(m,v,i,n,o)}}if(!p){return false}o||(o=new Zn);return Fa(e,t,i,n,r,o)}function Xr(e){return xc(e)&&Qa(e)==q}function Kr(t,i,n,r){var o=n.length,a=o,s=!r;if(t==null){return!a}t=it(t);while(o--){var l=n[o];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t)){return false}}while(++o<a){l=n[o];var u=l[0],c=t[u],d=l[1];if(s&&l[2]){if(c===e&&!(u in t)){return false}}else{var h=new Zn;if(r){var g=r(c,d,u,t,i,h)}if(!(g===e?Yr(d,c,f|p,r,h):g)){return false}}}return true}function Qr(e){if(!Ec(e)||ds(e)){return false}var t=wc(e)?vt:ze;return t.test(Ns(e))}function Zr(e){return xc(e)&&Lr(e)==ee}function Jr(e){return xc(e)&&Qa(e)==te}function eo(e){return xc(e)&&Ac(e.length)&&!!Ut[Lr(e)]}function to(e){if(typeof e=="function"){return e}if(e==null){return Rf}if(typeof e=="object"){return lc(e)?so(e[0],e[1]):ao(e)}return Vf(e)}function io(e){if(!ps(e)){return Ht(e)}var t=[];for(var i in it(e)){if(dt.call(e,i)&&i!="constructor"){t.push(i)}}return t}function no(e){if(!Ec(e)){return ys(e)}var t=ps(e),i=[];for(var n in e){if(!(n=="constructor"&&(t||!dt.call(e,n)))){i.push(n)}}return i}function ro(e,t){return e<t}function oo(e,t){var i=-1,n=cc(e)?Qe(e.length):[];Cr(e,(function(e,r,o){n[++i]=t(e,r,o)}));return n}function ao(e){var t=Ua(e);if(t.length==1&&t[0][2]){return gs(t[0][0],t[0][1])}return function(i){return i===e||Kr(i,e,t)}}function so(t,i){if(ls(t)&&hs(i)){return gs(Rs(t),i)}return function(n){var r=md(n,t);return r===e&&r===i?yd(n,t):Yr(i,r,f|p)}}function lo(t,i,n,r,o){if(t===i){return}kr(i,(function(a,s){o||(o=new Zn);if(Ec(a)){uo(t,i,s,n,lo,r,o)}else{var l=r?r(As(t,s),a,s+"",t,i,o):e;if(l===e){l=a}lr(t,s,l)}}),Ad)}function uo(t,i,n,r,o,a,s){var l=As(t,n),u=As(i,n),c=s.get(u);if(c){lr(t,n,c);return}var d=a?a(l,u,n+"",t,i,s):e;var f=d===e;if(f){var p=lc(u),h=!p&&pc(u),g=!p&&!h&&Wc(u);d=u;if(p||h||g){if(lc(l)){d=l}else if(dc(l)){d=ra(l)}else if(h){f=false;d=qo(u,true)}else if(g){f=false;d=Jo(u,true)}else{d=[]}}else if(Ic(u)||sc(u)){d=l;if(sc(l)){d=Qc(l)}else if(!Ec(l)||wc(l)){d=is(u)}}else{f=false}}if(f){s.set(u,d);o(d,u,r,a,s);s["delete"](u)}lr(t,n,d)}function co(t,i){var n=t.length;if(!n){return}i+=i<0?n:0;return as(i,n)?t[i]:e}function fo(e,t,i){if(t.length){t=Ci(t,(function(e){if(lc(e)){return function(t){return Ir(t,e.length===1?e[0]:e)}}return e}))}else{t=[Rf]}var n=-1;t=Ci(t,Vi(Va()));var r=oo(e,(function(e,i,r){var o=Ci(t,(function(t){return t(e)}));return{criteria:o,index:++n,value:e}}));return $i(r,(function(e,t){return ta(e,t,i)}))}function po(e,t){return ho(e,t,(function(t,i){return yd(e,i)}))}function ho(e,t,i){var n=-1,r=t.length,o={};while(++n<r){var a=t[n],s=Ir(e,a);if(i(s,a)){Eo(o,Vo(a,e),s)}}return o}function go(e){return function(t){return Ir(t,e)}}function mo(e,t,i,n){var r=n?Pi:Ni,o=-1,a=t.length,s=e;if(e===t){t=ra(t)}if(i){s=Ci(e,Vi(i))}while(++o<a){var l=0,u=t[o],c=i?i(u):u;while((l=r(s,c,l,n))>-1){if(s!==e){xt.call(s,l,1)}xt.call(e,l,1)}}return e}function vo(e,t){var i=e?t.length:0,n=i-1;while(i--){var r=t[i];if(i==n||r!==o){var o=r;if(as(r)){xt.call(e,r,1)}else{Lo(e,r)}}}return e}function yo(e,t){return e+It(Kt()*(t-e+1))}function bo(e,t,i,n){var r=-1,o=jt(Pt((t-e)/(i||1)),0),a=Qe(o);while(o--){a[n?o:++r]=e;e+=i}return a}function _o(e,t){var i="";if(!e||t<1||t>N){return i}do{if(t%2){i+=e}t=It(t/2);if(t){e+=e}}while(t);return i}function wo(e,t){return Ts(_s(e,t,Rf),e+"")}function Co(e){return or(Hd(e))}function Ao(e,t){var i=Hd(e);return ks(i,mr(t,0,i.length))}function Eo(t,i,n,r){if(!Ec(t)){return t}i=Vo(i,t);var o=-1,a=i.length,s=a-1,l=t;while(l!=null&&++o<a){var u=Rs(i[o]),c=n;if(u==="__proto__"||u==="constructor"||u==="prototype"){return t}if(o!=s){var d=l[u];c=r?r(d,u,l):e;if(c===e){c=Ec(d)?d:as(i[o+1])?[]:{}}}ur(l,u,c);l=l[u]}return t}var xo=!Si?Rf:function(e,t){Si.set(e,t);return e};var To=!kt?Rf:function(e,t){return kt(e,"toString",{configurable:true,enumerable:false,value:Sf(t),writable:true})};function So(e){return ks(Hd(e))}function Do(e,t,i){var n=-1,r=e.length;if(t<0){t=-t>r?0:r+t}i=i>r?r:i;if(i<0){i+=r}r=t>i?0:i-t>>>0;t>>>=0;var o=Qe(r);while(++n<r){o[n]=e[n+t]}return o}function ko(e,t){var i;Cr(e,(function(e,n,r){i=t(e,n,r);return!i}));return!!i}function Oo(e,t,i){var n=0,r=e==null?n:e.length;if(typeof t=="number"&&t===t&&r<=F){while(n<r){var o=n+r>>>1,a=e[o];if(a!==null&&!$c(a)&&(i?a<=t:a<t)){n=o+1}else{r=o}}return r}return Ro(e,t,Rf,i)}function Ro(t,i,n,r){var o=0,a=t==null?0:t.length;if(a===0){return 0}i=n(i);var s=i!==i,l=i===null,u=$c(i),c=i===e;while(o<a){var d=It((o+a)/2),f=n(t[d]),p=f!==e,h=f===null,g=f===f,m=$c(f);if(s){var v=r||g}else if(c){v=g&&(r||p)}else if(l){v=g&&p&&(r||!h)}else if(u){v=g&&p&&!h&&(r||!m)}else if(h||m){v=false}else{v=r?f<=i:f<i}if(v){o=d+1}else{a=d}}return Bt(a,L)}function No(e,t){var i=-1,n=e.length,r=0,o=[];while(++i<n){var a=e[i],s=t?t(a):a;if(!i||!rc(s,l)){var l=s;o[r++]=a===0?0:a}}return o}function Po(e){if(typeof e=="number"){return e}if($c(e)){return I}return+e}function Io(e){if(typeof e=="string"){return e}if(lc(e)){return Ci(e,Io)+""}if($c(e)){return Cn?Cn.call(e):""}var t=e+"";return t=="0"&&1/e==-R?"-0":t}function Mo(e,t,n){var r=-1,o=_i,a=e.length,s=true,l=[],u=l;if(n){s=false;o=wi}else if(a>=i){var c=t?null:ka(e);if(c){return sn(c)}s=false;o=Ui;u=new Xn}else{u=t?[]:l}e:while(++r<a){var d=e[r],f=t?t(d):d;d=n||d!==0?d:0;if(s&&f===f){var p=u.length;while(p--){if(u[p]===f){continue e}}if(t){u.push(f)}l.push(d)}else if(!o(u,f,n)){if(u!==l){u.push(f)}l.push(d)}}return l}function Lo(e,t){t=Vo(t,e);e=ws(e,t);return e==null||delete e[Rs(ol(t))]}function Fo(e,t,i,n){return Eo(e,t,i(Ir(e,t)),n)}function Go(e,t,i,n){var r=e.length,o=n?r:-1;while((n?o--:++o<r)&&t(e[o],o,e)){}return i?Do(e,n?0:o,n?o+1:r):Do(e,n?o+1:0,n?r:o)}function $o(e,t){var i=e;if(i instanceof Sn){i=i.value()}return Ei(t,(function(e,t){return t.func.apply(t.thisArg,Ai([e],t.args))}),i)}function Wo(e,t,i){var n=e.length;if(n<2){return n?Mo(e[0]):[]}var r=-1,o=Qe(n);while(++r<n){var a=e[r],s=-1;while(++s<n){if(s!=r){o[r]=wr(o[r]||a,e[s],t,i)}}}return Mo(Dr(o,1),t,i)}function Ho(t,i,n){var r=-1,o=t.length,a=i.length,s={};while(++r<o){var l=r<a?i[r]:e;n(s,t[r],l)}return s}function jo(e){return dc(e)?e:[]}function Bo(e){return typeof e=="function"?e:Rf}function Vo(e,t){if(lc(e)){return e}return ls(e,t)?[e]:Os(Jc(e))}var zo=wo;function Uo(t,i,n){var r=t.length;n=n===e?r:n;return!i&&n>=r?t:Do(t,i,n)}var Yo=Ot||function(e){return ii.clearTimeout(e)};function qo(e,t){if(t){return e.slice()}var i=e.length,n=wt?wt(i):new e.constructor(i);e.copy(n);return n}function Xo(e){var t=new e.constructor(e.byteLength);new _t(t).set(new _t(e));return t}function Ko(e,t){var i=t?Xo(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}function Qo(e){var t=new e.constructor(e.source,je.exec(e));t.lastIndex=e.lastIndex;return t}function Zo(e){return wn?it(wn.call(e)):{}}function Jo(e,t){var i=t?Xo(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function ea(t,i){if(t!==i){var n=t!==e,r=t===null,o=t===t,a=$c(t);var s=i!==e,l=i===null,u=i===i,c=$c(i);if(!l&&!c&&!a&&t>i||a&&s&&u&&!l&&!c||r&&s&&u||!n&&u||!o){return 1}if(!r&&!a&&!c&&t<i||c&&n&&o&&!r&&!a||l&&n&&o||!s&&o||!u){return-1}}return 0}function ta(e,t,i){var n=-1,r=e.criteria,o=t.criteria,a=r.length,s=i.length;while(++n<a){var l=ea(r[n],o[n]);if(l){if(n>=s){return l}var u=i[n];return l*(u=="desc"?-1:1)}}return e.index-t.index}function ia(e,t,i,n){var r=-1,o=e.length,a=i.length,s=-1,l=t.length,u=jt(o-a,0),c=Qe(l+u),d=!n;while(++s<l){c[s]=t[s]}while(++r<a){if(d||r<o){c[i[r]]=e[r]}}while(u--){c[s++]=e[r++]}return c}function na(e,t,i,n){var r=-1,o=e.length,a=-1,s=i.length,l=-1,u=t.length,c=jt(o-s,0),d=Qe(c+u),f=!n;while(++r<c){d[r]=e[r]}var p=r;while(++l<u){d[p+l]=t[l]}while(++a<s){if(f||r<o){d[p+i[a]]=e[r++]}}return d}function ra(e,t){var i=-1,n=e.length;t||(t=Qe(n));while(++i<n){t[i]=e[i]}return t}function oa(t,i,n,r){var o=!n;n||(n={});var a=-1,s=i.length;while(++a<s){var l=i[a];var u=r?r(n[l],t[l],l,n,t):e;if(u===e){u=t[l]}if(o){hr(n,l,u)}else{ur(n,l,u)}}return n}function aa(e,t){return oa(e,Xa(e),t)}function sa(e,t){return oa(e,Ka(e),t)}function la(e,t){return function(i,n){var r=lc(i)?gi:dr,o=t?t():{};return r(i,e,Va(n,2),o)}}function ua(t){return wo((function(i,n){var r=-1,o=n.length,a=o>1?n[o-1]:e,s=o>2?n[2]:e;a=t.length>3&&typeof a=="function"?(o--,a):e;if(s&&ss(n[0],n[1],s)){a=o<3?e:a;o=1}i=it(i);while(++r<o){var l=n[r];if(l){t(i,l,r,a)}}return i}))}function ca(e,t){return function(i,n){if(i==null){return i}if(!cc(i)){return e(i,n)}var r=i.length,o=t?r:-1,a=it(i);while(t?o--:++o<r){if(n(a[o],o,a)===false){break}}return i}}function da(e){return function(t,i,n){var r=-1,o=it(t),a=n(t),s=a.length;while(s--){var l=a[e?s:++r];if(i(o[l],l,o)===false){break}}return t}}function fa(e,t,i){var n=t&h,r=ga(e);function o(){var t=this&&this!==ii&&this instanceof o?r:e;return t.apply(n?i:this,arguments)}return o}function pa(t){return function(i){i=Jc(i);var n=en(i)?fn(i):e;var r=n?n[0]:i.charAt(0);var o=n?Uo(n,1).join(""):i.slice(1);return r[t]()+o}}function ha(e){return function(t){return Ei(Cf(qd(t).replace(Gt,"")),e,"")}}function ga(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=En(e.prototype),n=e.apply(i,t);return Ec(n)?n:i}}function ma(t,i,n){var r=ga(t);function o(){var a=arguments.length,s=Qe(a),l=a,u=Ba(o);while(l--){s[l]=arguments[l]}var c=a<3&&s[0]!==u&&s[a-1]!==u?[]:an(s,u);a-=c.length;if(a<n){return Sa(t,i,ba,o.placeholder,e,s,c,e,e,n-a)}var d=this&&this!==ii&&this instanceof o?r:t;return hi(d,this,s)}return o}function va(t){return function(i,n,r){var o=it(i);if(!cc(i)){var a=Va(n,3);i=Cd(i);n=function(e){return a(o[e],e,o)}}var s=t(i,n,r);return s>-1?o[a?i[s]:s]:e}}function ya(t){return Ga((function(i){var n=i.length,o=n,a=Tn.prototype.thru;if(t){i.reverse()}while(o--){var s=i[o];if(typeof s!="function"){throw new ot(r)}if(a&&!l&&ja(s)=="wrapper"){var l=new Tn([],true)}}o=l?o:n;while(++o<n){s=i[o];var u=ja(s),c=u=="wrapper"?Ha(s):e;if(c&&cs(c[0])&&c[1]==(w|v|b|C)&&!c[4].length&&c[9]==1){l=l[ja(c[0])].apply(l,c[3])}else{l=s.length==1&&cs(s)?l[u]():l.thru(s)}}return function(){var e=arguments,t=e[0];if(l&&e.length==1&&lc(t)){return l.plant(t).value()}var r=0,o=n?i[r].apply(this,e):t;while(++r<n){o=i[r].call(this,o)}return o}}))}function ba(t,i,n,r,o,a,s,l,u,c){var d=i&w,f=i&h,p=i&g,m=i&(v|y),b=i&A,_=p?e:ga(t);function C(){var e=arguments.length,h=Qe(e),g=e;while(g--){h[g]=arguments[g]}if(m){var v=Ba(C),y=Xi(h,v)}if(r){h=ia(h,r,o,m)}if(a){h=na(h,a,s,m)}e-=y;if(m&&e<c){var w=an(h,v);return Sa(t,i,ba,C.placeholder,n,h,w,l,u,c-e)}var A=f?n:this,E=p?A[t]:t;e=h.length;if(l){h=Cs(h,l)}else if(b&&e>1){h.reverse()}if(d&&u<e){h.length=u}if(this&&this!==ii&&this instanceof C){E=_||ga(E)}return E.apply(A,h)}return C}function _a(e,t){return function(i,n){return jr(i,e,t(n),{})}}function wa(t,i){return function(n,r){var o;if(n===e&&r===e){return i}if(n!==e){o=n}if(r!==e){if(o===e){return r}if(typeof n=="string"||typeof r=="string"){n=Io(n);r=Io(r)}else{n=Po(n);r=Po(r)}o=t(n,r)}return o}}function Ca(e){return Ga((function(t){t=Ci(t,Vi(Va()));return wo((function(i){var n=this;return e(t,(function(e){return hi(e,n,i)}))}))}))}function Aa(t,i){i=i===e?" ":Io(i);var n=i.length;if(n<2){return n?_o(i,t):i}var r=_o(i,Pt(t/dn(i)));return en(i)?Uo(fn(r),0,t).join(""):r.slice(0,t)}function Ea(e,t,i,n){var r=t&h,o=ga(e);function a(){var t=-1,s=arguments.length,l=-1,u=n.length,c=Qe(u+s),d=this&&this!==ii&&this instanceof a?o:e;while(++l<u){c[l]=n[l]}while(s--){c[l++]=arguments[++t]}return hi(d,r?i:this,c)}return a}function xa(t){return function(i,n,r){if(r&&typeof r!="number"&&ss(i,n,r)){n=r=e}i=Yc(i);if(n===e){n=i;i=0}else{n=Yc(n)}r=r===e?i<n?1:-1:Yc(r);return bo(i,n,r,t)}}function Ta(e){return function(t,i){if(!(typeof t=="string"&&typeof i=="string")){t=Kc(t);i=Kc(i)}return e(t,i)}}function Sa(t,i,n,r,o,a,s,l,u,c){var d=i&v,f=d?s:e,p=d?e:s,y=d?a:e,w=d?e:a;i|=d?b:_;i&=~(d?_:b);if(!(i&m)){i&=~(h|g)}var C=[t,i,o,y,f,w,p,l,u,c];var A=n.apply(e,C);if(cs(t)){Es(A,C)}A.placeholder=r;return Ss(A,t,i)}function Da(e){var t=tt[e];return function(e,i){e=Kc(e);i=i==null?0:Bt(qc(i),292);if(i&&Ft(e)){var n=(Jc(e)+"e").split("e"),r=t(n[0]+"e"+(+n[1]+i));n=(Jc(r)+"e").split("e");return+(n[0]+"e"+(+n[1]-i))}return t(e)}}var ka=!(ri&&1/sn(new ri([,-0]))[1]==R)?$f:function(e){return new ri(e)};function Oa(e){return function(t){var i=Qa(t);if(i==q){return rn(t)}if(i==te){return ln(t)}return ji(t,e(t))}}function Ra(t,i,n,o,a,s,l,u){var c=i&g;if(!c&&typeof t!="function"){throw new ot(r)}var d=o?o.length:0;if(!d){i&=~(b|_);o=a=e}l=l===e?l:jt(qc(l),0);u=u===e?u:qc(u);d-=a?a.length:0;if(i&_){var f=o,p=a;o=a=e}var m=c?e:Ha(t);var w=[t,i,n,o,a,f,p,s,l,u];if(m){vs(w,m)}t=w[0];i=w[1];n=w[2];o=w[3];a=w[4];u=w[9]=w[9]===e?c?0:t.length:jt(w[9]-d,0);if(!u&&i&(v|y)){i&=~(v|y)}if(!i||i==h){var C=fa(t,i,n)}else if(i==v||i==y){C=ma(t,i,u)}else if((i==b||i==(h|b))&&!a.length){C=Ea(t,i,n,o)}else{C=ba.apply(e,w)}var A=m?xo:Es;return Ss(A(C,w),t,i)}function Na(t,i,n,r){if(t===e||rc(t,lt[n])&&!dt.call(r,n)){return i}return t}function Pa(t,i,n,r,o,a){if(Ec(t)&&Ec(i)){a.set(i,t);lo(t,i,e,Pa,a);a["delete"](i)}return t}function Ia(t){return Ic(t)?e:t}function Ma(t,i,n,r,o,a){var s=n&f,l=t.length,u=i.length;if(l!=u&&!(s&&u>l)){return false}var c=a.get(t);var d=a.get(i);if(c&&d){return c==i&&d==t}var h=-1,g=true,m=n&p?new Xn:e;a.set(t,i);a.set(i,t);while(++h<l){var v=t[h],y=i[h];if(r){var b=s?r(y,v,h,i,t,a):r(v,y,h,t,i,a)}if(b!==e){if(b){continue}g=false;break}if(m){if(!Ti(i,(function(e,t){if(!Ui(m,t)&&(v===e||o(v,e,n,r,a))){return m.push(t)}}))){g=false;break}}else if(!(v===y||o(v,y,n,r,a))){g=false;break}}a["delete"](t);a["delete"](i);return g}function La(e,t,i,n,r,o,a){switch(i){case le:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset){return false}e=e.buffer;t=t.buffer;case se:if(e.byteLength!=t.byteLength||!o(new _t(e),new _t(t))){return false}return true;case j:case B:case X:return rc(+e,+t);case z:return e.name==t.name&&e.message==t.message;case ee:case ie:return e==t+"";case q:var s=rn;case te:var l=n&f;s||(s=sn);if(e.size!=t.size&&!l){return false}var u=a.get(e);if(u){return u==t}n|=p;a.set(e,t);var c=Ma(s(e),s(t),n,r,o,a);a["delete"](e);return c;case ne:if(wn){return wn.call(e)==wn.call(t)}}return false}function Fa(t,i,n,r,o,a){var s=n&f,l=$a(t),u=l.length,c=$a(i),d=c.length;if(u!=d&&!s){return false}var p=u;while(p--){var h=l[p];if(!(s?h in i:dt.call(i,h))){return false}}var g=a.get(t);var m=a.get(i);if(g&&m){return g==i&&m==t}var v=true;a.set(t,i);a.set(i,t);var y=s;while(++p<u){h=l[p];var b=t[h],_=i[h];if(r){var w=s?r(_,b,h,i,t,a):r(b,_,h,t,i,a)}if(!(w===e?b===_||o(b,_,n,r,a):w)){v=false;break}y||(y=h=="constructor")}if(v&&!y){var C=t.constructor,A=i.constructor;if(C!=A&&("constructor"in t&&"constructor"in i)&&!(typeof C=="function"&&C instanceof C&&typeof A=="function"&&A instanceof A)){v=false}}a["delete"](t);a["delete"](i);return v}function Ga(t){return Ts(_s(t,e,qs),t+"")}function $a(e){return Mr(e,Cd,Xa)}function Wa(e){return Mr(e,Ad,Ka)}var Ha=!Si?$f:function(e){return Si.get(e)};function ja(e){var t=e.name+"",i=Di[t],n=dt.call(Di,t)?i.length:0;while(n--){var r=i[n],o=r.func;if(o==null||o==e){return r.name}}return t}function Ba(e){var t=dt.call(An,"placeholder")?An:e;return t.placeholder}function Va(){var e=An.iteratee||Nf;e=e===Nf?to:e;return arguments.length?e(arguments[0],arguments[1]):e}function za(e,t){var i=e.__data__;return us(t)?i[typeof t=="string"?"string":"hash"]:i.map}function Ua(e){var t=Cd(e),i=t.length;while(i--){var n=t[i],r=e[n];t[i]=[n,r,hs(r)]}return t}function Ya(t,i){var n=Ji(t,i);return Qr(n)?n:e}function qa(t){var i=dt.call(t,Dt),n=t[Dt];try{t[Dt]=e;var r=true}catch(e){}var o=ht.call(t);if(r){if(i){t[Dt]=n}else{delete t[Dt]}}return o}var Xa=!Mt?qf:function(e){if(e==null){return[]}e=it(e);return bi(Mt(e),(function(t){return Et.call(e,t)}))};var Ka=!Mt?qf:function(e){var t=[];while(e){Ai(t,Xa(e));e=Ct(e)}return t};var Qa=Lr;if(ei&&Qa(new ei(new ArrayBuffer(1)))!=le||ti&&Qa(new ti)!=q||ni&&Qa(ni.resolve())!=Z||ri&&Qa(new ri)!=te||ai&&Qa(new ai)!=oe){Qa=function(t){var i=Lr(t),n=i==Q?t.constructor:e,r=n?Ns(n):"";if(r){switch(r){case Fi:return le;case un:return q;case gn:return Z;case mn:return te;case yn:return oe}}return i}}function Za(e,t,i){var n=-1,r=i.length;while(++n<r){var o=i[n],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Bt(t,e+a);break;case"takeRight":e=jt(e,t-a);break}}return{start:e,end:t}}function Ja(e){var t=e.match(Le);return t?t[1].split(Fe):[]}function es(e,t,i){t=Vo(t,e);var n=-1,r=t.length,o=false;while(++n<r){var a=Rs(t[n]);if(!(o=e!=null&&i(e,a))){break}e=e[a]}if(o||++n!=r){return o}r=e==null?0:e.length;return!!r&&Ac(r)&&as(a,r)&&(lc(e)||sc(e))}function ts(e){var t=e.length,i=new e.constructor(t);if(t&&typeof e[0]=="string"&&dt.call(e,"index")){i.index=e.index;i.input=e.input}return i}function is(e){return typeof e.constructor=="function"&&!ps(e)?En(Ct(e)):{}}function ns(e,t,i){var n=e.constructor;switch(t){case se:return Xo(e);case j:case B:return new n(+e);case le:return Ko(e,i);case ue:case ce:case de:case fe:case pe:case he:case ge:case me:case ve:return Jo(e,i);case q:return new n;case X:case ie:return new n(e);case ee:return Qo(e);case te:return new n;case ne:return Zo(e)}}function rs(e,t){var i=t.length;if(!i){return e}var n=i-1;t[n]=(i>1?"& ":"")+t[n];t=t.join(i>2?", ":" ");return e.replace(Me,"{\n/* [wrapped with "+t+"] */\n")}function os(e){return lc(e)||sc(e)||!!(Tt&&e&&e[Tt])}function as(e,t){var i=typeof e;t=t==null?N:t;return!!t&&(i=="number"||i!="symbol"&&Ye.test(e))&&(e>-1&&e%1==0&&e<t)}function ss(e,t,i){if(!Ec(i)){return false}var n=typeof t;if(n=="number"?cc(i)&&as(t,i.length):n=="string"&&t in i){return rc(i[t],e)}return false}function ls(e,t){if(lc(e)){return false}var i=typeof e;if(i=="number"||i=="symbol"||i=="boolean"||e==null||$c(e)){return true}return ke.test(e)||!De.test(e)||t!=null&&e in it(t)}function us(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function cs(e){var t=ja(e),i=An[t];if(typeof i!="function"||!(t in Sn.prototype)){return false}if(e===i){return true}var n=Ha(i);return!!n&&e===n[0]}function ds(e){return!!pt&&pt in e}var fs=ut?wc:Xf;function ps(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||lt;return e===i}function hs(e){return e===e&&!Ec(e)}function gs(t,i){return function(n){if(n==null){return false}return n[t]===i&&(i!==e||t in it(n))}}function ms(e){var t=Wu(e,(function(e){if(i.size===s){i.clear()}return e}));var i=t.cache;return t}function vs(e,t){var i=e[1],n=t[1],r=i|n,o=r<(h|g|w);var a=n==w&&i==v||n==w&&i==C&&e[7].length<=t[8]||n==(w|C)&&t[7].length<=t[8]&&i==v;if(!(o||a)){return e}if(n&h){e[2]=t[2];r|=i&h?0:m}var s=t[3];if(s){var u=e[3];e[3]=u?ia(u,s,t[4]):s;e[4]=u?an(e[3],l):t[4]}s=t[5];if(s){u=e[5];e[5]=u?na(u,s,t[6]):s;e[6]=u?an(e[5],l):t[6]}s=t[7];if(s){e[7]=s}if(n&w){e[8]=e[8]==null?t[8]:Bt(e[8],t[8])}if(e[9]==null){e[9]=t[9]}e[0]=t[0];e[1]=r;return e}function ys(e){var t=[];if(e!=null){for(var i in it(e)){t.push(i)}}return t}function bs(e){return ht.call(e)}function _s(t,i,n){i=jt(i===e?t.length-1:i,0);return function(){var e=arguments,r=-1,o=jt(e.length-i,0),a=Qe(o);while(++r<o){a[r]=e[i+r]}r=-1;var s=Qe(i+1);while(++r<i){s[r]=e[r]}s[i]=n(a);return hi(t,this,s)}}function ws(e,t){return t.length<2?e:Ir(e,Do(t,0,-1))}function Cs(t,i){var n=t.length,r=Bt(i.length,n),o=ra(t);while(r--){var a=i[r];t[r]=as(a,n)?o[a]:e}return t}function As(e,t){if(t==="constructor"&&typeof e[t]==="function"){return}if(t=="__proto__"){return}return e[t]}var Es=Ds(xo);var xs=Nt||function(e,t){return ii.setTimeout(e,t)};var Ts=Ds(To);function Ss(e,t,i){var n=t+"";return Ts(e,rs(n,Ps(Ja(n),i)))}function Ds(t){var i=0,n=0;return function(){var r=qt(),o=S-(r-n);n=r;if(o>0){if(++i>=T){return arguments[0]}}else{i=0}return t.apply(e,arguments)}}function ks(t,i){var n=-1,r=t.length,o=r-1;i=i===e?r:i;while(++n<i){var a=yo(n,o),s=t[a];t[a]=t[n];t[n]=s}t.length=i;return t}var Os=ms((function(e){var t=[];if(e.charCodeAt(0)===46){t.push("")}e.replace(Oe,(function(e,i,n,r){t.push(n?r.replace(We,"$1"):i||e)}));return t}));function Rs(e){if(typeof e=="string"||$c(e)){return e}var t=e+"";return t=="0"&&1/e==-R?"-0":t}function Ns(e){if(e!=null){try{return ct.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ps(e,t){mi(G,(function(i){var n="_."+i[0];if(t&i[1]&&!_i(e,n)){e.push(n)}}));return e.sort()}function Is(e){if(e instanceof Sn){return e.clone()}var t=new Tn(e.__wrapped__,e.__chain__);t.__actions__=ra(e.__actions__);t.__index__=e.__index__;t.__values__=e.__values__;return t}function Ms(t,i,n){if(n?ss(t,i,n):i===e){i=1}else{i=jt(qc(i),0)}var r=t==null?0:t.length;if(!r||i<1){return[]}var o=0,a=0,s=Qe(Pt(r/i));while(o<r){s[a++]=Do(t,o,o+=i)}return s}function Ls(e){var t=-1,i=e==null?0:e.length,n=0,r=[];while(++t<i){var o=e[t];if(o){r[n++]=o}}return r}function Fs(){var e=arguments.length;if(!e){return[]}var t=Qe(e-1),i=arguments[0],n=e;while(n--){t[n-1]=arguments[n]}return Ai(lc(i)?ra(i):[i],Dr(t,1))}var Gs=wo((function(e,t){return dc(e)?wr(e,Dr(t,1,dc,true)):[]}));var $s=wo((function(t,i){var n=ol(i);if(dc(n)){n=e}return dc(t)?wr(t,Dr(i,1,dc,true),Va(n,2)):[]}));var Ws=wo((function(t,i){var n=ol(i);if(dc(n)){n=e}return dc(t)?wr(t,Dr(i,1,dc,true),e,n):[]}));function Hs(t,i,n){var r=t==null?0:t.length;if(!r){return[]}i=n||i===e?1:qc(i);return Do(t,i<0?0:i,r)}function js(t,i,n){var r=t==null?0:t.length;if(!r){return[]}i=n||i===e?1:qc(i);i=r-i;return Do(t,0,i<0?0:i)}function Bs(e,t){return e&&e.length?Go(e,Va(t,3),true,true):[]}function Vs(e,t){return e&&e.length?Go(e,Va(t,3),true):[]}function zs(e,t,i,n){var r=e==null?0:e.length;if(!r){return[]}if(i&&typeof i!="number"&&ss(e,t,i)){i=0;n=r}return Tr(e,t,i,n)}function Us(e,t,i){var n=e==null?0:e.length;if(!n){return-1}var r=i==null?0:qc(i);if(r<0){r=jt(n+r,0)}return Ri(e,Va(t,3),r)}function Ys(t,i,n){var r=t==null?0:t.length;if(!r){return-1}var o=r-1;if(n!==e){o=qc(n);o=n<0?jt(r+o,0):Bt(o,r-1)}return Ri(t,Va(i,3),o,true)}function qs(e){var t=e==null?0:e.length;return t?Dr(e,1):[]}function Xs(e){var t=e==null?0:e.length;return t?Dr(e,R):[]}function Ks(t,i){var n=t==null?0:t.length;if(!n){return[]}i=i===e?1:qc(i);return Dr(t,i)}function Qs(e){var t=-1,i=e==null?0:e.length,n={};while(++t<i){var r=e[t];n[r[0]]=r[1]}return n}function Zs(t){return t&&t.length?t[0]:e}function Js(e,t,i){var n=e==null?0:e.length;if(!n){return-1}var r=i==null?0:qc(i);if(r<0){r=jt(n+r,0)}return Ni(e,t,r)}function el(e){var t=e==null?0:e.length;return t?Do(e,0,-1):[]}var tl=wo((function(e){var t=Ci(e,jo);return t.length&&t[0]===e[0]?Hr(t):[]}));var il=wo((function(t){var i=ol(t),n=Ci(t,jo);if(i===ol(n)){i=e}else{n.pop()}return n.length&&n[0]===t[0]?Hr(n,Va(i,2)):[]}));var nl=wo((function(t){var i=ol(t),n=Ci(t,jo);i=typeof i=="function"?i:e;if(i){n.pop()}return n.length&&n[0]===t[0]?Hr(n,e,i):[]}));function rl(e,t){return e==null?"":Wt.call(e,t)}function ol(t){var i=t==null?0:t.length;return i?t[i-1]:e}function al(t,i,n){var r=t==null?0:t.length;if(!r){return-1}var o=r;if(n!==e){o=qc(n);o=o<0?jt(r+o,0):Bt(o,r-1)}return i===i?cn(t,i,o):Ri(t,Ii,o,true)}function sl(t,i){return t&&t.length?co(t,qc(i)):e}var ll=wo(ul);function ul(e,t){return e&&e.length&&t&&t.length?mo(e,t):e}function cl(e,t,i){return e&&e.length&&t&&t.length?mo(e,t,Va(i,2)):e}function dl(t,i,n){return t&&t.length&&i&&i.length?mo(t,i,e,n):t}var fl=Ga((function(e,t){var i=e==null?0:e.length,n=gr(e,t);vo(e,Ci(t,(function(e){return as(e,i)?+e:e})).sort(ea));return n}));function pl(e,t){var i=[];if(!(e&&e.length)){return i}var n=-1,r=[],o=e.length;t=Va(t,3);while(++n<o){var a=e[n];if(t(a,n,e)){i.push(a);r.push(n)}}vo(e,r);return i}function hl(e){return e==null?e:Qt.call(e)}function gl(t,i,n){var r=t==null?0:t.length;if(!r){return[]}if(n&&typeof n!="number"&&ss(t,i,n)){i=0;n=r}else{i=i==null?0:qc(i);n=n===e?r:qc(n)}return Do(t,i,n)}function ml(e,t){return Oo(e,t)}function vl(e,t,i){return Ro(e,t,Va(i,2))}function yl(e,t){var i=e==null?0:e.length;if(i){var n=Oo(e,t);if(n<i&&rc(e[n],t)){return n}}return-1}function bl(e,t){return Oo(e,t,true)}function _l(e,t,i){return Ro(e,t,Va(i,2),true)}function wl(e,t){var i=e==null?0:e.length;if(i){var n=Oo(e,t,true)-1;if(rc(e[n],t)){return n}}return-1}function Cl(e){return e&&e.length?No(e):[]}function Al(e,t){return e&&e.length?No(e,Va(t,2)):[]}function El(e){var t=e==null?0:e.length;return t?Do(e,1,t):[]}function xl(t,i,n){if(!(t&&t.length)){return[]}i=n||i===e?1:qc(i);return Do(t,0,i<0?0:i)}function Tl(t,i,n){var r=t==null?0:t.length;if(!r){return[]}i=n||i===e?1:qc(i);i=r-i;return Do(t,i<0?0:i,r)}function Sl(e,t){return e&&e.length?Go(e,Va(t,3),false,true):[]}function Dl(e,t){return e&&e.length?Go(e,Va(t,3)):[]}var kl=wo((function(e){return Mo(Dr(e,1,dc,true))}));var Ol=wo((function(t){var i=ol(t);if(dc(i)){i=e}return Mo(Dr(t,1,dc,true),Va(i,2))}));var Rl=wo((function(t){var i=ol(t);i=typeof i=="function"?i:e;return Mo(Dr(t,1,dc,true),e,i)}));function Nl(e){return e&&e.length?Mo(e):[]}function Pl(e,t){return e&&e.length?Mo(e,Va(t,2)):[]}function Il(t,i){i=typeof i=="function"?i:e;return t&&t.length?Mo(t,e,i):[]}function Ml(e){if(!(e&&e.length)){return[]}var t=0;e=bi(e,(function(e){if(dc(e)){t=jt(e.length,t);return true}}));return Hi(t,(function(t){return Ci(e,Li(t))}))}function Ll(t,i){if(!(t&&t.length)){return[]}var n=Ml(t);if(i==null){return n}return Ci(n,(function(t){return hi(i,e,t)}))}var Fl=wo((function(e,t){return dc(e)?wr(e,t):[]}));var Gl=wo((function(e){return Wo(bi(e,dc))}));var $l=wo((function(t){var i=ol(t);if(dc(i)){i=e}return Wo(bi(t,dc),Va(i,2))}));var Wl=wo((function(t){var i=ol(t);i=typeof i=="function"?i:e;return Wo(bi(t,dc),e,i)}));var Hl=wo(Ml);function jl(e,t){return Ho(e||[],t||[],ur)}function Bl(e,t){return Ho(e||[],t||[],Eo)}var Vl=wo((function(t){var i=t.length,n=i>1?t[i-1]:e;n=typeof n=="function"?(t.pop(),n):e;return Ll(t,n)}));function zl(e){var t=An(e);t.__chain__=true;return t}function Ul(e,t){t(e);return e}function Yl(e,t){return t(e)}var ql=Ga((function(t){var i=t.length,n=i?t[0]:0,r=this.__wrapped__,o=function(e){return gr(e,t)};if(i>1||this.__actions__.length||!(r instanceof Sn)||!as(n)){return this.thru(o)}r=r.slice(n,+n+(i?1:0));r.__actions__.push({func:Yl,args:[o],thisArg:e});return new Tn(r,this.__chain__).thru((function(t){if(i&&!t.length){t.push(e)}return t}))}));function Xl(){return zl(this)}function Kl(){return new Tn(this.value(),this.__chain__)}function Ql(){if(this.__values__===e){this.__values__=Uc(this.value())}var t=this.__index__>=this.__values__.length,i=t?e:this.__values__[this.__index__++];return{done:t,value:i}}function Zl(){return this}function Jl(t){var i,n=this;while(n instanceof xn){var r=Is(n);r.__index__=0;r.__values__=e;if(i){o.__wrapped__=r}else{i=r}var o=r;n=n.__wrapped__}o.__wrapped__=t;return i}function eu(){var t=this.__wrapped__;if(t instanceof Sn){var i=t;if(this.__actions__.length){i=new Sn(this)}i=i.reverse();i.__actions__.push({func:Yl,args:[hl],thisArg:e});return new Tn(i,this.__chain__)}return this.thru(hl)}function tu(){return $o(this.__wrapped__,this.__actions__)}var iu=la((function(e,t,i){if(dt.call(e,i)){++e[i]}else{hr(e,i,1)}}));function nu(t,i,n){var r=lc(t)?yi:Er;if(n&&ss(t,i,n)){i=e}return r(t,Va(i,3))}function ru(e,t){var i=lc(e)?bi:Sr;return i(e,Va(t,3))}var ou=va(Us);var au=va(Ys);function su(e,t){return Dr(mu(e,t),1)}function lu(e,t){return Dr(mu(e,t),R)}function uu(t,i,n){n=n===e?1:qc(n);return Dr(mu(t,i),n)}function cu(e,t){var i=lc(e)?mi:Cr;return i(e,Va(t,3))}function du(e,t){var i=lc(e)?vi:Ar;return i(e,Va(t,3))}var fu=la((function(e,t,i){if(dt.call(e,i)){e[i].push(t)}else{hr(e,i,[t])}}));function pu(e,t,i,n){e=cc(e)?e:Hd(e);i=i&&!n?qc(i):0;var r=e.length;if(i<0){i=jt(r+i,0)}return Gc(e)?i<=r&&e.indexOf(t,i)>-1:!!r&&Ni(e,t,i)>-1}var hu=wo((function(e,t,i){var n=-1,r=typeof t=="function",o=cc(e)?Qe(e.length):[];Cr(e,(function(e){o[++n]=r?hi(t,e,i):Br(e,t,i)}));return o}));var gu=la((function(e,t,i){hr(e,i,t)}));function mu(e,t){var i=lc(e)?Ci:oo;return i(e,Va(t,3))}function vu(t,i,n,r){if(t==null){return[]}if(!lc(i)){i=i==null?[]:[i]}n=r?e:n;if(!lc(n)){n=n==null?[]:[n]}return fo(t,i,n)}var yu=la((function(e,t,i){e[i?0:1].push(t)}),(function(){return[[],[]]}));function bu(e,t,i){var n=lc(e)?Ei:Gi,r=arguments.length<3;return n(e,Va(t,4),i,r,Cr)}function _u(e,t,i){var n=lc(e)?xi:Gi,r=arguments.length<3;return n(e,Va(t,4),i,r,Ar)}function wu(e,t){var i=lc(e)?bi:Sr;return i(e,Hu(Va(t,3)))}function Cu(e){var t=lc(e)?or:Co;return t(e)}function Au(t,i,n){if(n?ss(t,i,n):i===e){i=1}else{i=qc(i)}var r=lc(t)?ar:Ao;return r(t,i)}function Eu(e){var t=lc(e)?sr:So;return t(e)}function xu(e){if(e==null){return 0}if(cc(e)){return Gc(e)?dn(e):e.length}var t=Qa(e);if(t==q||t==te){return e.size}return io(e).length}function Tu(t,i,n){var r=lc(t)?Ti:ko;if(n&&ss(t,i,n)){i=e}return r(t,Va(i,3))}var Su=wo((function(e,t){if(e==null){return[]}var i=t.length;if(i>1&&ss(e,t[0],t[1])){t=[]}else if(i>2&&ss(t[0],t[1],t[2])){t=[t[0]]}return fo(e,Dr(t,1),[])}));var Du=Rt||function(){return ii.Date.now()};function ku(e,t){if(typeof t!="function"){throw new ot(r)}e=qc(e);return function(){if(--e<1){return t.apply(this,arguments)}}}function Ou(t,i,n){i=n?e:i;i=t&&i==null?t.length:i;return Ra(t,w,e,e,e,e,i)}function Ru(t,i){var n;if(typeof i!="function"){throw new ot(r)}t=qc(t);return function(){if(--t>0){n=i.apply(this,arguments)}if(t<=1){i=e}return n}}var Nu=wo((function(e,t,i){var n=h;if(i.length){var r=an(i,Ba(Nu));n|=b}return Ra(e,n,t,i,r)}));var Pu=wo((function(e,t,i){var n=h|g;if(i.length){var r=an(i,Ba(Pu));n|=b}return Ra(t,n,e,i,r)}));function Iu(t,i,n){i=n?e:i;var r=Ra(t,v,e,e,e,e,e,i);r.placeholder=Iu.placeholder;return r}function Mu(t,i,n){i=n?e:i;var r=Ra(t,y,e,e,e,e,e,i);r.placeholder=Mu.placeholder;return r}function Lu(t,i,n){var o,a,s,l,u,c,d=0,f=false,p=false,h=true;if(typeof t!="function"){throw new ot(r)}i=Kc(i)||0;if(Ec(n)){f=!!n.leading;p="maxWait"in n;s=p?jt(Kc(n.maxWait)||0,i):s;h="trailing"in n?!!n.trailing:h}function g(i){var n=o,r=a;o=a=e;d=i;l=t.apply(r,n);return l}function m(e){d=e;u=xs(b,i);return f?g(e):l}function v(e){var t=e-c,n=e-d,r=i-t;return p?Bt(r,s-n):r}function y(t){var n=t-c,r=t-d;return c===e||n>=i||n<0||p&&r>=s}function b(){var e=Du();if(y(e)){return _(e)}u=xs(b,v(e))}function _(t){u=e;if(h&&o){return g(t)}o=a=e;return l}function w(){if(u!==e){Yo(u)}d=0;o=c=a=u=e}function C(){return u===e?l:_(Du())}function A(){var t=Du(),n=y(t);o=arguments;a=this;c=t;if(n){if(u===e){return m(c)}if(p){Yo(u);u=xs(b,i);return g(c)}}if(u===e){u=xs(b,i)}return l}A.cancel=w;A.flush=C;return A}var Fu=wo((function(e,t){return _r(e,1,t)}));var Gu=wo((function(e,t,i){return _r(e,Kc(t)||0,i)}));function $u(e){return Ra(e,A)}function Wu(e,t){if(typeof e!="function"||t!=null&&typeof t!="function"){throw new ot(r)}var i=function(){var n=arguments,r=t?t.apply(this,n):n[0],o=i.cache;if(o.has(r)){return o.get(r)}var a=e.apply(this,n);i.cache=o.set(r,a)||o;return a};i.cache=new(Wu.Cache||Bn);return i}Wu.Cache=Bn;function Hu(e){if(typeof e!="function"){throw new ot(r)}return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function ju(e){return Ru(2,e)}var Bu=zo((function(e,t){t=t.length==1&&lc(t[0])?Ci(t[0],Vi(Va())):Ci(Dr(t,1),Vi(Va()));var i=t.length;return wo((function(n){var r=-1,o=Bt(n.length,i);while(++r<o){n[r]=t[r].call(this,n[r])}return hi(e,this,n)}))}));var Vu=wo((function(t,i){var n=an(i,Ba(Vu));return Ra(t,b,e,i,n)}));var zu=wo((function(t,i){var n=an(i,Ba(zu));return Ra(t,_,e,i,n)}));var Uu=Ga((function(t,i){return Ra(t,C,e,e,e,i)}));function Yu(t,i){if(typeof t!="function"){throw new ot(r)}i=i===e?i:qc(i);return wo(t,i)}function qu(e,t){if(typeof e!="function"){throw new ot(r)}t=t==null?0:jt(qc(t),0);return wo((function(i){var n=i[t],r=Uo(i,0,t);if(n){Ai(r,n)}return hi(e,this,r)}))}function Xu(e,t,i){var n=true,o=true;if(typeof e!="function"){throw new ot(r)}if(Ec(i)){n="leading"in i?!!i.leading:n;o="trailing"in i?!!i.trailing:o}return Lu(e,t,{leading:n,maxWait:t,trailing:o})}function Ku(e){return Ou(e,1)}function Qu(e,t){return Vu(Bo(t),e)}function Zu(){if(!arguments.length){return[]}var e=arguments[0];return lc(e)?e:[e]}function Ju(e){return vr(e,d)}function ec(t,i){i=typeof i=="function"?i:e;return vr(t,d,i)}function tc(e){return vr(e,u|d)}function ic(t,i){i=typeof i=="function"?i:e;return vr(t,u|d,i)}function nc(e,t){return t==null||br(e,t,Cd(t))}function rc(e,t){return e===t||e!==e&&t!==t}var oc=Ta(Fr);var ac=Ta((function(e,t){return e>=t}));var sc=Vr(function(){return arguments}())?Vr:function(e){return xc(e)&&dt.call(e,"callee")&&!Et.call(e,"callee")};var lc=Qe.isArray;var uc=li?Vi(li):zr;function cc(e){return e!=null&&Ac(e.length)&&!wc(e)}function dc(e){return xc(e)&&cc(e)}function fc(e){return e===true||e===false||xc(e)&&Lr(e)==j}var pc=Lt||Xf;var hc=ui?Vi(ui):Ur;function gc(e){return xc(e)&&e.nodeType===1&&!Ic(e)}function mc(e){if(e==null){return true}if(cc(e)&&(lc(e)||typeof e=="string"||typeof e.splice=="function"||pc(e)||Wc(e)||sc(e))){return!e.length}var t=Qa(e);if(t==q||t==te){return!e.size}if(ps(e)){return!io(e).length}for(var i in e){if(dt.call(e,i)){return false}}return true}function vc(e,t){return Yr(e,t)}function yc(t,i,n){n=typeof n=="function"?n:e;var r=n?n(t,i):e;return r===e?Yr(t,i,e,n):!!r}function bc(e){if(!xc(e)){return false}var t=Lr(e);return t==z||t==V||typeof e.message=="string"&&typeof e.name=="string"&&!Ic(e)}function _c(e){return typeof e=="number"&&Ft(e)}function wc(e){if(!Ec(e)){return false}var t=Lr(e);return t==U||t==Y||t==H||t==J}function Cc(e){return typeof e=="number"&&e==qc(e)}function Ac(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=N}function Ec(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function xc(e){return e!=null&&typeof e=="object"}var Tc=ci?Vi(ci):Xr;function Sc(e,t){return e===t||Kr(e,t,Ua(t))}function Dc(t,i,n){n=typeof n=="function"?n:e;return Kr(t,i,Ua(i),n)}function kc(e){return Pc(e)&&e!=+e}function Oc(e){if(fs(e)){throw new Je(n)}return Qr(e)}function Rc(e){return e===null}function Nc(e){return e==null}function Pc(e){return typeof e=="number"||xc(e)&&Lr(e)==X}function Ic(e){if(!xc(e)||Lr(e)!=Q){return false}var t=Ct(e);if(t===null){return true}var i=dt.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&ct.call(i)==gt}var Mc=di?Vi(di):Zr;function Lc(e){return Cc(e)&&e>=-N&&e<=N}var Fc=fi?Vi(fi):Jr;function Gc(e){return typeof e=="string"||!lc(e)&&xc(e)&&Lr(e)==ie}function $c(e){return typeof e=="symbol"||xc(e)&&Lr(e)==ne}var Wc=pi?Vi(pi):eo;function Hc(t){return t===e}function jc(e){return xc(e)&&Qa(e)==oe}function Bc(e){return xc(e)&&Lr(e)==ae}var Vc=Ta(ro);var zc=Ta((function(e,t){return e<=t}));function Uc(e){if(!e){return[]}if(cc(e)){return Gc(e)?fn(e):ra(e)}if(St&&e[St]){return nn(e[St]())}var t=Qa(e),i=t==q?rn:t==te?sn:Hd;return i(e)}function Yc(e){if(!e){return e===0?e:0}e=Kc(e);if(e===R||e===-R){var t=e<0?-1:1;return t*P}return e===e?e:0}function qc(e){var t=Yc(e),i=t%1;return t===t?i?t-i:t:0}function Xc(e){return e?mr(qc(e),0,M):0}function Kc(e){if(typeof e=="number"){return e}if($c(e)){return I}if(Ec(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ec(t)?t+"":t}if(typeof e!="string"){return e===0?e:+e}e=Bi(e);var i=Ve.test(e);return i||Ue.test(e)?Jt(e.slice(2),i?2:8):Be.test(e)?I:+e}function Qc(e){return oa(e,Ad(e))}function Zc(e){return e?mr(qc(e),-N,N):e===0?e:0}function Jc(e){return e==null?"":Io(e)}var ed=ua((function(e,t){if(ps(t)||cc(t)){oa(t,Cd(t),e);return}for(var i in t){if(dt.call(t,i)){ur(e,i,t[i])}}}));var td=ua((function(e,t){oa(t,Ad(t),e)}));var id=ua((function(e,t,i,n){oa(t,Ad(t),e,n)}));var nd=ua((function(e,t,i,n){oa(t,Cd(t),e,n)}));var rd=Ga(gr);function od(e,t){var i=En(e);return t==null?i:fr(i,t)}var ad=wo((function(t,i){t=it(t);var n=-1;var r=i.length;var o=r>2?i[2]:e;if(o&&ss(i[0],i[1],o)){r=1}while(++n<r){var a=i[n];var s=Ad(a);var l=-1;var u=s.length;while(++l<u){var c=s[l];var d=t[c];if(d===e||rc(d,lt[c])&&!dt.call(t,c)){t[c]=a[c]}}}return t}));var sd=wo((function(t){t.push(e,Pa);return hi(Sd,e,t)}));function ld(e,t){return Oi(e,Va(t,3),Rr)}function ud(e,t){return Oi(e,Va(t,3),Nr)}function cd(e,t){return e==null?e:kr(e,Va(t,3),Ad)}function dd(e,t){return e==null?e:Or(e,Va(t,3),Ad)}function fd(e,t){return e&&Rr(e,Va(t,3))}function pd(e,t){return e&&Nr(e,Va(t,3))}function hd(e){return e==null?[]:Pr(e,Cd(e))}function gd(e){return e==null?[]:Pr(e,Ad(e))}function md(t,i,n){var r=t==null?e:Ir(t,i);return r===e?n:r}function vd(e,t){return e!=null&&es(e,t,Gr)}function yd(e,t){return e!=null&&es(e,t,$r)}var bd=_a((function(e,t,i){if(t!=null&&typeof t.toString!="function"){t=ht.call(t)}e[t]=i}),Sf(Rf));var _d=_a((function(e,t,i){if(t!=null&&typeof t.toString!="function"){t=ht.call(t)}if(dt.call(e,t)){e[t].push(i)}else{e[t]=[i]}}),Va);var wd=wo(Br);function Cd(e){return cc(e)?rr(e):io(e)}function Ad(e){return cc(e)?rr(e,true):no(e)}function Ed(e,t){var i={};t=Va(t,3);Rr(e,(function(e,n,r){hr(i,t(e,n,r),e)}));return i}function xd(e,t){var i={};t=Va(t,3);Rr(e,(function(e,n,r){hr(i,n,t(e,n,r))}));return i}var Td=ua((function(e,t,i){lo(e,t,i)}));var Sd=ua((function(e,t,i,n){lo(e,t,i,n)}));var Dd=Ga((function(e,t){var i={};if(e==null){return i}var n=false;t=Ci(t,(function(t){t=Vo(t,e);n||(n=t.length>1);return t}));oa(e,Wa(e),i);if(n){i=vr(i,u|c|d,Ia)}var r=t.length;while(r--){Lo(i,t[r])}return i}));function kd(e,t){return Rd(e,Hu(Va(t)))}var Od=Ga((function(e,t){return e==null?{}:po(e,t)}));function Rd(e,t){if(e==null){return{}}var i=Ci(Wa(e),(function(e){return[e]}));t=Va(t);return ho(e,i,(function(e,i){return t(e,i[0])}))}function Nd(t,i,n){i=Vo(i,t);var r=-1,o=i.length;if(!o){o=1;t=e}while(++r<o){var a=t==null?e:t[Rs(i[r])];if(a===e){r=o;a=n}t=wc(a)?a.call(t):a}return t}function Pd(e,t,i){return e==null?e:Eo(e,t,i)}function Id(t,i,n,r){r=typeof r=="function"?r:e;return t==null?t:Eo(t,i,n,r)}var Md=Oa(Cd);var Ld=Oa(Ad);function Fd(e,t,i){var n=lc(e),r=n||pc(e)||Wc(e);t=Va(t,4);if(i==null){var o=e&&e.constructor;if(r){i=n?new o:[]}else if(Ec(e)){i=wc(o)?En(Ct(e)):{}}else{i={}}}(r?mi:Rr)(e,(function(e,n,r){return t(i,e,n,r)}));return i}function Gd(e,t){return e==null?true:Lo(e,t)}function $d(e,t,i){return e==null?e:Fo(e,t,Bo(i))}function Wd(t,i,n,r){r=typeof r=="function"?r:e;return t==null?t:Fo(t,i,Bo(n),r)}function Hd(e){return e==null?[]:zi(e,Cd(e))}function jd(e){return e==null?[]:zi(e,Ad(e))}function Bd(t,i,n){if(n===e){n=i;i=e}if(n!==e){n=Kc(n);n=n===n?n:0}if(i!==e){i=Kc(i);i=i===i?i:0}return mr(Kc(t),i,n)}function Vd(t,i,n){i=Yc(i);if(n===e){n=i;i=0}else{n=Yc(n)}t=Kc(t);return Wr(t,i,n)}function zd(t,i,n){if(n&&typeof n!="boolean"&&ss(t,i,n)){i=n=e}if(n===e){if(typeof i=="boolean"){n=i;i=e}else if(typeof t=="boolean"){n=t;t=e}}if(t===e&&i===e){t=0;i=1}else{t=Yc(t);if(i===e){i=t;t=0}else{i=Yc(i)}}if(t>i){var r=t;t=i;i=r}if(n||t%1||i%1){var o=Kt();return Bt(t+o*(i-t+Zt("1e-"+((o+"").length-1))),i)}return yo(t,i)}var Ud=ha((function(e,t,i){t=t.toLowerCase();return e+(i?Yd(t):t)}));function Yd(e){return wf(Jc(e).toLowerCase())}function qd(e){e=Jc(e);return e&&e.replace(qe,Ki).replace($t,"")}function Xd(t,i,n){t=Jc(t);i=Io(i);var r=t.length;n=n===e?r:mr(qc(n),0,r);var o=n;n-=i.length;return n>=0&&t.slice(n,o)==i}function Kd(e){e=Jc(e);return e&&Ee.test(e)?e.replace(Ce,Qi):e}function Qd(e){e=Jc(e);return e&&Ne.test(e)?e.replace(Re,"\\$&"):e}var Zd=ha((function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}));var Jd=ha((function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}));var ef=pa("toLowerCase");function tf(e,t,i){e=Jc(e);t=qc(t);var n=t?dn(e):0;if(!t||n>=t){return e}var r=(t-n)/2;return Aa(It(r),i)+e+Aa(Pt(r),i)}function nf(e,t,i){e=Jc(e);t=qc(t);var n=t?dn(e):0;return t&&n<t?e+Aa(t-n,i):e}function rf(e,t,i){e=Jc(e);t=qc(t);var n=t?dn(e):0;return t&&n<t?Aa(t-n,i)+e:e}function of(e,t,i){if(i||t==null){t=0}else if(t){t=+t}return Xt(Jc(e).replace(Pe,""),t||0)}function af(t,i,n){if(n?ss(t,i,n):i===e){i=1}else{i=qc(i)}return _o(Jc(t),i)}function sf(){var e=arguments,t=Jc(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var lf=ha((function(e,t,i){return e+(i?"_":"")+t.toLowerCase()}));function uf(t,i,n){if(n&&typeof n!="number"&&ss(t,i,n)){i=n=e}n=n===e?M:n>>>0;if(!n){return[]}t=Jc(t);if(t&&(typeof i=="string"||i!=null&&!Mc(i))){i=Io(i);if(!i&&en(t)){return Uo(fn(t),0,n)}}return t.split(i,n)}var cf=ha((function(e,t,i){return e+(i?" ":"")+wf(t)}));function df(e,t,i){e=Jc(e);i=i==null?0:mr(qc(i),0,e.length);t=Io(t);return e.slice(i,i+t.length)==t}function ff(t,i,n){var r=An.templateSettings;if(n&&ss(t,i,n)){i=e}t=Jc(t);i=id({},i,r,Na);var a=id({},i.imports,r.imports,Na),s=Cd(a),l=zi(a,s);var u,c,d=0,f=i.interpolate||Xe,p="__p += '";var h=nt((i.escape||Xe).source+"|"+f.source+"|"+(f===Se?He:Xe).source+"|"+(i.evaluate||Xe).source+"|$","g");var g="//# sourceURL="+(dt.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++zt+"]")+"\n";t.replace(h,(function(e,i,n,r,o,a){n||(n=r);p+=t.slice(d,a).replace(Ke,Zi);if(i){u=true;p+="' +\n__e("+i+") +\n'"}if(o){c=true;p+="';\n"+o+";\n__p += '"}if(n){p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"}d=a+e.length;return e}));p+="';\n";var m=dt.call(i,"variable")&&i.variable;if(!m){p="with (obj) {\n"+p+"\n}\n"}else if($e.test(m)){throw new Je(o)}p=(c?p.replace(ye,""):p).replace(be,"$1").replace(_e,"$1;");p="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(c?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=Af((function(){return et(s,g+"return "+p).apply(e,l)}));v.source=p;if(bc(v)){throw v}return v}function pf(e){return Jc(e).toLowerCase()}function hf(e){return Jc(e).toUpperCase()}function gf(t,i,n){t=Jc(t);if(t&&(n||i===e)){return Bi(t)}if(!t||!(i=Io(i))){return t}var r=fn(t),o=fn(i),a=Yi(r,o),s=qi(r,o)+1;return Uo(r,a,s).join("")}function mf(t,i,n){t=Jc(t);if(t&&(n||i===e)){return t.slice(0,pn(t)+1)}if(!t||!(i=Io(i))){return t}var r=fn(t),o=qi(r,fn(i))+1;return Uo(r,0,o).join("")}function vf(t,i,n){t=Jc(t);if(t&&(n||i===e)){return t.replace(Pe,"")}if(!t||!(i=Io(i))){return t}var r=fn(t),o=Yi(r,fn(i));return Uo(r,o).join("")}function yf(t,i){var n=E,r=x;if(Ec(i)){var o="separator"in i?i.separator:o;n="length"in i?qc(i.length):n;r="omission"in i?Io(i.omission):r}t=Jc(t);var a=t.length;if(en(t)){var s=fn(t);a=s.length}if(n>=a){return t}var l=n-dn(r);if(l<1){return r}var u=s?Uo(s,0,l).join(""):t.slice(0,l);if(o===e){return u+r}if(s){l+=u.length-l}if(Mc(o)){if(t.slice(l).search(o)){var c,d=u;if(!o.global){o=nt(o.source,Jc(je.exec(o))+"g")}o.lastIndex=0;while(c=o.exec(d)){var f=c.index}u=u.slice(0,f===e?l:f)}}else if(t.indexOf(Io(o),l)!=l){var p=u.lastIndexOf(o);if(p>-1){u=u.slice(0,p)}}return u+r}function bf(e){e=Jc(e);return e&&Ae.test(e)?e.replace(we,hn):e}var _f=ha((function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}));var wf=pa("toUpperCase");function Cf(t,i,n){t=Jc(t);i=n?e:i;if(i===e){return tn(t)?vn(t):ki(t)}return t.match(i)||[]}var Af=wo((function(t,i){try{return hi(t,e,i)}catch(e){return bc(e)?e:new Je(e)}}));var Ef=Ga((function(e,t){mi(t,(function(t){t=Rs(t);hr(e,t,Nu(e[t],e))}));return e}));function xf(e){var t=e==null?0:e.length,i=Va();e=!t?[]:Ci(e,(function(e){if(typeof e[1]!="function"){throw new ot(r)}return[i(e[0]),e[1]]}));return wo((function(i){var n=-1;while(++n<t){var r=e[n];if(hi(r[0],this,i)){return hi(r[1],this,i)}}}))}function Tf(e){return yr(vr(e,u))}function Sf(e){return function(){return e}}function Df(e,t){return e==null||e!==e?t:e}var kf=ya();var Of=ya(true);function Rf(e){return e}function Nf(e){return to(typeof e=="function"?e:vr(e,u))}function Pf(e){return ao(vr(e,u))}function If(e,t){return so(e,vr(t,u))}var Mf=wo((function(e,t){return function(i){return Br(i,e,t)}}));var Lf=wo((function(e,t){return function(i){return Br(e,i,t)}}));function Ff(e,t,i){var n=Cd(t),r=Pr(t,n);if(i==null&&!(Ec(t)&&(r.length||!n.length))){i=t;t=e;e=this;r=Pr(t,Cd(t))}var o=!(Ec(i)&&"chain"in i)||!!i.chain,a=wc(e);mi(r,(function(i){var n=t[i];e[i]=n;if(a){e.prototype[i]=function(){var t=this.__chain__;if(o||t){var i=e(this.__wrapped__),r=i.__actions__=ra(this.__actions__);r.push({func:n,args:arguments,thisArg:e});i.__chain__=t;return i}return n.apply(e,Ai([this.value()],arguments))}}}));return e}function Gf(){if(ii._===this){ii._=mt}return this}function $f(){}function Wf(e){e=qc(e);return wo((function(t){return co(t,e)}))}var Hf=Ca(Ci);var jf=Ca(yi);var Bf=Ca(Ti);function Vf(e){return ls(e)?Li(Rs(e)):go(e)}function zf(t){return function(i){return t==null?e:Ir(t,i)}}var Uf=xa();var Yf=xa(true);function qf(){return[]}function Xf(){return false}function Kf(){return{}}function Qf(){return""}function Zf(){return true}function Jf(e,t){e=qc(e);if(e<1||e>N){return[]}var i=M,n=Bt(e,M);t=Va(t);e-=M;var r=Hi(n,t);while(++i<e){t(i)}return r}function ep(e){if(lc(e)){return Ci(e,Rs)}return $c(e)?[e]:ra(Os(Jc(e)))}function tp(e){var t=++ft;return Jc(e)+t}var ip=wa((function(e,t){return e+t}),0);var np=Da("ceil");var rp=wa((function(e,t){return e/t}),1);var op=Da("floor");function ap(t){return t&&t.length?xr(t,Rf,Fr):e}function sp(t,i){return t&&t.length?xr(t,Va(i,2),Fr):e}function lp(e){return Mi(e,Rf)}function up(e,t){return Mi(e,Va(t,2))}function cp(t){return t&&t.length?xr(t,Rf,ro):e}function dp(t,i){return t&&t.length?xr(t,Va(i,2),ro):e}var fp=wa((function(e,t){return e*t}),1);var pp=Da("round");var hp=wa((function(e,t){return e-t}),0);function gp(e){return e&&e.length?Wi(e,Rf):0}function mp(e,t){return e&&e.length?Wi(e,Va(t,2)):0}An.after=ku;An.ary=Ou;An.assign=ed;An.assignIn=td;An.assignInWith=id;An.assignWith=nd;An.at=rd;An.before=Ru;An.bind=Nu;An.bindAll=Ef;An.bindKey=Pu;An.castArray=Zu;An.chain=zl;An.chunk=Ms;An.compact=Ls;An.concat=Fs;An.cond=xf;An.conforms=Tf;An.constant=Sf;An.countBy=iu;An.create=od;An.curry=Iu;An.curryRight=Mu;An.debounce=Lu;An.defaults=ad;An.defaultsDeep=sd;An.defer=Fu;An.delay=Gu;An.difference=Gs;An.differenceBy=$s;An.differenceWith=Ws;An.drop=Hs;An.dropRight=js;An.dropRightWhile=Bs;An.dropWhile=Vs;An.fill=zs;An.filter=ru;An.flatMap=su;An.flatMapDeep=lu;An.flatMapDepth=uu;An.flatten=qs;An.flattenDeep=Xs;An.flattenDepth=Ks;An.flip=$u;An.flow=kf;An.flowRight=Of;An.fromPairs=Qs;An.functions=hd;An.functionsIn=gd;An.groupBy=fu;An.initial=el;An.intersection=tl;An.intersectionBy=il;An.intersectionWith=nl;An.invert=bd;An.invertBy=_d;An.invokeMap=hu;An.iteratee=Nf;An.keyBy=gu;An.keys=Cd;An.keysIn=Ad;An.map=mu;An.mapKeys=Ed;An.mapValues=xd;An.matches=Pf;An.matchesProperty=If;An.memoize=Wu;An.merge=Td;An.mergeWith=Sd;An.method=Mf;An.methodOf=Lf;An.mixin=Ff;An.negate=Hu;An.nthArg=Wf;An.omit=Dd;An.omitBy=kd;An.once=ju;An.orderBy=vu;An.over=Hf;An.overArgs=Bu;An.overEvery=jf;An.overSome=Bf;An.partial=Vu;An.partialRight=zu;An.partition=yu;An.pick=Od;An.pickBy=Rd;An.property=Vf;An.propertyOf=zf;An.pull=ll;An.pullAll=ul;An.pullAllBy=cl;An.pullAllWith=dl;An.pullAt=fl;An.range=Uf;An.rangeRight=Yf;An.rearg=Uu;An.reject=wu;An.remove=pl;An.rest=Yu;An.reverse=hl;An.sampleSize=Au;An.set=Pd;An.setWith=Id;An.shuffle=Eu;An.slice=gl;An.sortBy=Su;An.sortedUniq=Cl;An.sortedUniqBy=Al;An.split=uf;An.spread=qu;An.tail=El;An.take=xl;An.takeRight=Tl;An.takeRightWhile=Sl;An.takeWhile=Dl;An.tap=Ul;An.throttle=Xu;An.thru=Yl;An.toArray=Uc;An.toPairs=Md;An.toPairsIn=Ld;An.toPath=ep;An.toPlainObject=Qc;An.transform=Fd;An.unary=Ku;An.union=kl;An.unionBy=Ol;An.unionWith=Rl;An.uniq=Nl;An.uniqBy=Pl;An.uniqWith=Il;An.unset=Gd;An.unzip=Ml;An.unzipWith=Ll;An.update=$d;An.updateWith=Wd;An.values=Hd;An.valuesIn=jd;An.without=Fl;An.words=Cf;An.wrap=Qu;An.xor=Gl;An.xorBy=$l;An.xorWith=Wl;An.zip=Hl;An.zipObject=jl;An.zipObjectDeep=Bl;An.zipWith=Vl;An.entries=Md;An.entriesIn=Ld;An.extend=td;An.extendWith=id;Ff(An,An);An.add=ip;An.attempt=Af;An.camelCase=Ud;An.capitalize=Yd;An.ceil=np;An.clamp=Bd;An.clone=Ju;An.cloneDeep=tc;An.cloneDeepWith=ic;An.cloneWith=ec;An.conformsTo=nc;An.deburr=qd;An.defaultTo=Df;An.divide=rp;An.endsWith=Xd;An.eq=rc;An.escape=Kd;An.escapeRegExp=Qd;An.every=nu;An.find=ou;An.findIndex=Us;An.findKey=ld;An.findLast=au;An.findLastIndex=Ys;An.findLastKey=ud;An.floor=op;An.forEach=cu;An.forEachRight=du;An.forIn=cd;An.forInRight=dd;An.forOwn=fd;An.forOwnRight=pd;An.get=md;An.gt=oc;An.gte=ac;An.has=vd;An.hasIn=yd;An.head=Zs;An.identity=Rf;An.includes=pu;An.indexOf=Js;An.inRange=Vd;An.invoke=wd;An.isArguments=sc;An.isArray=lc;An.isArrayBuffer=uc;An.isArrayLike=cc;An.isArrayLikeObject=dc;An.isBoolean=fc;An.isBuffer=pc;An.isDate=hc;An.isElement=gc;An.isEmpty=mc;An.isEqual=vc;An.isEqualWith=yc;An.isError=bc;An.isFinite=_c;An.isFunction=wc;An.isInteger=Cc;An.isLength=Ac;An.isMap=Tc;An.isMatch=Sc;An.isMatchWith=Dc;An.isNaN=kc;An.isNative=Oc;An.isNil=Nc;An.isNull=Rc;An.isNumber=Pc;An.isObject=Ec;An.isObjectLike=xc;An.isPlainObject=Ic;An.isRegExp=Mc;An.isSafeInteger=Lc;An.isSet=Fc;An.isString=Gc;An.isSymbol=$c;An.isTypedArray=Wc;An.isUndefined=Hc;An.isWeakMap=jc;An.isWeakSet=Bc;An.join=rl;An.kebabCase=Zd;An.last=ol;An.lastIndexOf=al;An.lowerCase=Jd;An.lowerFirst=ef;An.lt=Vc;An.lte=zc;An.max=ap;An.maxBy=sp;An.mean=lp;An.meanBy=up;An.min=cp;An.minBy=dp;An.stubArray=qf;An.stubFalse=Xf;An.stubObject=Kf;An.stubString=Qf;An.stubTrue=Zf;An.multiply=fp;An.nth=sl;An.noConflict=Gf;An.noop=$f;An.now=Du;An.pad=tf;An.padEnd=nf;An.padStart=rf;An.parseInt=of;An.random=zd;An.reduce=bu;An.reduceRight=_u;An.repeat=af;An.replace=sf;An.result=Nd;An.round=pp;An.runInContext=Ie;An.sample=Cu;An.size=xu;An.snakeCase=lf;An.some=Tu;An.sortedIndex=ml;An.sortedIndexBy=vl;An.sortedIndexOf=yl;An.sortedLastIndex=bl;An.sortedLastIndexBy=_l;An.sortedLastIndexOf=wl;An.startCase=cf;An.startsWith=df;An.subtract=hp;An.sum=gp;An.sumBy=mp;An.template=ff;An.times=Jf;An.toFinite=Yc;An.toInteger=qc;An.toLength=Xc;An.toLower=pf;An.toNumber=Kc;An.toSafeInteger=Zc;An.toString=Jc;An.toUpper=hf;An.trim=gf;An.trimEnd=mf;An.trimStart=vf;An.truncate=yf;An.unescape=bf;An.uniqueId=tp;An.upperCase=_f;An.upperFirst=wf;An.each=cu;An.eachRight=du;An.first=Zs;Ff(An,function(){var e={};Rr(An,(function(t,i){if(!dt.call(An.prototype,i)){e[i]=t}}));return e}(),{chain:false});An.VERSION=t;mi(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){An[e].placeholder=An}));mi(["drop","take"],(function(t,i){Sn.prototype[t]=function(n){n=n===e?1:jt(qc(n),0);var r=this.__filtered__&&!i?new Sn(this):this.clone();if(r.__filtered__){r.__takeCount__=Bt(n,r.__takeCount__)}else{r.__views__.push({size:Bt(n,M),type:t+(r.__dir__<0?"Right":"")})}return r};Sn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}));mi(["filter","map","takeWhile"],(function(e,t){var i=t+1,n=i==D||i==O;Sn.prototype[e]=function(e){var t=this.clone();t.__iteratees__.push({iteratee:Va(e,3),type:i});t.__filtered__=t.__filtered__||n;return t}}));mi(["head","last"],(function(e,t){var i="take"+(t?"Right":"");Sn.prototype[e]=function(){return this[i](1).value()[0]}}));mi(["initial","tail"],(function(e,t){var i="drop"+(t?"":"Right");Sn.prototype[e]=function(){return this.__filtered__?new Sn(this):this[i](1)}}));Sn.prototype.compact=function(){return this.filter(Rf)};Sn.prototype.find=function(e){return this.filter(e).head()};Sn.prototype.findLast=function(e){return this.reverse().find(e)};Sn.prototype.invokeMap=wo((function(e,t){if(typeof e=="function"){return new Sn(this)}return this.map((function(i){return Br(i,e,t)}))}));Sn.prototype.reject=function(e){return this.filter(Hu(Va(e)))};Sn.prototype.slice=function(t,i){t=qc(t);var n=this;if(n.__filtered__&&(t>0||i<0)){return new Sn(n)}if(t<0){n=n.takeRight(-t)}else if(t){n=n.drop(t)}if(i!==e){i=qc(i);n=i<0?n.dropRight(-i):n.take(i-t)}return n};Sn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};Sn.prototype.toArray=function(){return this.take(M)};Rr(Sn.prototype,(function(t,i){var n=/^(?:filter|find|map|reject)|While$/.test(i),r=/^(?:head|last)$/.test(i),o=An[r?"take"+(i=="last"?"Right":""):i],a=r||/^find/.test(i);if(!o){return}An.prototype[i]=function(){var i=this.__wrapped__,s=r?[1]:arguments,l=i instanceof Sn,u=s[0],c=l||lc(i);var d=function(e){var t=o.apply(An,Ai([e],s));return r&&f?t[0]:t};if(c&&n&&typeof u=="function"&&u.length!=1){l=c=false}var f=this.__chain__,p=!!this.__actions__.length,h=a&&!f,g=l&&!p;if(!a&&c){i=g?i:new Sn(this);var m=t.apply(i,s);m.__actions__.push({func:Yl,args:[d],thisArg:e});return new Tn(m,f)}if(h&&g){return t.apply(this,s)}m=this.thru(d);return h?r?m.value()[0]:m.value():m}}));mi(["pop","push","shift","sort","splice","unshift"],(function(e){var t=at[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);An.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var r=this.value();return t.apply(lc(r)?r:[],e)}return this[i]((function(i){return t.apply(lc(i)?i:[],e)}))}}));Rr(Sn.prototype,(function(e,t){var i=An[t];if(i){var n=i.name+"";if(!dt.call(Di,n)){Di[n]=[]}Di[n].push({name:t,func:i})}}));Di[ba(e,g).name]=[{name:"wrapper",func:e}];Sn.prototype.clone=Dn;Sn.prototype.reverse=kn;Sn.prototype.value=On;An.prototype.at=ql;An.prototype.chain=Xl;An.prototype.commit=Kl;An.prototype.next=Ql;An.prototype.plant=Jl;An.prototype.reverse=eu;An.prototype.toJSON=An.prototype.valueOf=An.prototype.value=tu;An.prototype.first=An.prototype.head;if(St){An.prototype[St]=Zl}return An};var bn=yn();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){ii._=bn;define((function(){return bn}))}else if(ri){(ri.exports=bn)._=bn;ni._=bn}else{ii._=bn}}).call(this);(function(e){var t=Array.prototype.slice;var i={dict:null,load:function(t){if(this.dict!==null){e.extend(this.dict,t)}else{this.dict=t}},_:function(e){dict=this.dict;if(dict&&dict.hasOwnProperty(e)){e=dict[e]}args=t.call(arguments);args[0]=e;return this.printf.apply(this,args)},printf:function(i,n){if(arguments.length<2)return i;n=e.isArray(n)?n:t.call(arguments,1);return i.replace(/([^%]|^)%(?:(\d+)\$)?s/g,(function(e,t,i){if(i){return t+n[parseInt(i)-1]}return t+n.shift()})).replace(/%%s/g,"%s")}};e.fn._t=function(t,n){return e(this).html(i._.apply(i,arguments))};e.i18n=i})(jQuery);(function(e){if(typeof e.fn.each2=="undefined"){e.extend(e.fn,{each2:function(t){var i=e([0]),n=-1,r=this.length;while(++n<r&&(i.context=i[0]=this[n])&&t.call(i[0],n,i)!==false);return this}})}})(jQuery);(function(e,t){"use strict";if(window.Select2!==t){return}var i,n,r,o,a,s={x:0,y:0},l,u,c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){e=e.which?e.which:e;switch(e){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return true}return false},isControl:function(e){var t=e.which;switch(t){case c.SHIFT:case c.CTRL:case c.ALT:return true}if(e.metaKey)return true;return false},isFunctionKey:function(e){e=e.which?e.which:e;return e>=112&&e<=123}},d="<div class='select2-measure-scrollbar'></div>",f={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};l=e(document);o=function(){var e=1;return function(){return e++}}();function p(t){var i=e(document.createTextNode(""));t.before(i);i.before(t);i.remove()}function h(e){function t(e){return f[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function g(e,t){var i=0,n=t.length;for(;i<n;i=i+1){if(v(e,t[i]))return i}return-1}function m(){var t=e(d);t.appendTo(e(document.body));var i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};t.remove();return i}function v(e,i){if(e===i)return true;if(e===t||i===t)return false;if(e===null||i===null)return false;if(e.constructor===String)return e+""===i+"";if(i.constructor===String)return i+""===e+"";return false}function y(e,t,i){var n,r,o;if(e===null||e.length<1)return[];n=e.split(t);for(r=0,o=n.length;r<o;r=r+1)n[r]=i(n[r]);return n}function b(e){return e.outerWidth(false)-e.width()}function _(i){var n="keyup-change-value";i.on("keydown",(function(){if(e.data(i,n)===t){e.data(i,n,i.val())}}));i.on("keyup",(function(){var r=e.data(i,n);if(r!==t&&i.val()!==r){e.removeData(i,n);i.trigger("keyup-change")}}))}function w(i){i.on("mousemove",(function(i){var n=s;if(n===t||n.x!==i.pageX||n.y!==i.pageY){e(i.target).trigger("mousemove-filtered",i)}}))}function C(e,i,n){n=n||t;var r;return function(){var t=arguments;window.clearTimeout(r);r=window.setTimeout((function(){i.apply(n,t)}),e)}}function A(e,t){var i=C(e,(function(e){t.trigger("scroll-debounced",e)}));t.on("scroll",(function(e){if(g(e.target,t.get())>=0)i(e)}))}function E(e){if(e[0]===document.activeElement)return;window.setTimeout((function(){var t=e[0],i=e.val().length,n;e.focus();var r=t.offsetWidth>0||t.offsetHeight>0;if(r&&t===document.activeElement){if(t.setSelectionRange){t.setSelectionRange(i,i)}else if(t.createTextRange){n=t.createTextRange();n.collapse(false);n.select()}}}),0)}function x(t){t=e(t)[0];var i=0;var n=0;if("selectionStart"in t){i=t.selectionStart;n=t.selectionEnd-i}else if("selection"in document){t.focus();var r=document.selection.createRange();n=document.selection.createRange().text.length;r.moveStart("character",-t.value.length);i=r.text.length-n}return{offset:i,length:n}}function T(e){e.preventDefault();e.stopPropagation()}function S(e){e.preventDefault();e.stopImmediatePropagation()}function D(t){if(!a){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);a=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"});a.attr("class","select2-sizer");e(document.body).append(a)}a.text(t.val());return a.width()}function k(t,i,n){var r,o=[],a;r=e.trim(t.attr("class"));if(r){r=""+r;e(r.split(/\s+/)).each2((function(){if(this.indexOf("select2-")===0){o.push(this)}}))}r=e.trim(i.attr("class"));if(r){r=""+r;e(r.split(/\s+/)).each2((function(){if(this.indexOf("select2-")!==0){a=n(this);if(a){o.push(a)}}}))}t.attr("class",o.join(" "))}function O(e,t,i,n){var r=h(e.toUpperCase()).indexOf(h(t.toUpperCase())),o=t.length;if(r<0){i.push(n(e));return}i.push(n(e.substring(0,r)));i.push("<span class='select2-match'>");i.push(n(e.substring(r,r+o)));i.push("</span>");i.push(n(e.substring(r+o,e.length)))}function R(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))}function N(i){var n,r=null,o=i.quietMillis||100,a=i.url,s=this;return function(l){window.clearTimeout(n);n=window.setTimeout((function(){var n=i.data,o=a,u=i.transport||e.fn.select2.ajaxDefaults.transport,c={type:i.type||"GET",cache:i.cache||false,jsonpCallback:i.jsonpCallback||t,dataType:i.dataType||"json"},d=e.extend({},e.fn.select2.ajaxDefaults.params,c);n=n?n.call(s,l.term,l.page,l.context):null;o=typeof o==="function"?o.call(s,l.term,l.page,l.context):o;if(r&&typeof r.abort==="function"){r.abort()}if(i.params){if(e.isFunction(i.params)){e.extend(d,i.params.call(s))}else{e.extend(d,i.params)}}e.extend(d,{url:o,dataType:i.dataType,data:n,success:function(e){var t=i.results(e,l.page,l);l.callback(t)},error:function(e,t,i){var n={hasError:true,jqXHR:e,textStatus:t,errorThrown:i};l.callback(n)}});r=u.call(s,d)}),o)}}function P(t){var i=t,n,r,o=function(e){return""+e.text};if(e.isArray(i)){r=i;i={results:r}}if(e.isFunction(i)===false){r=i;i=function(){return r}}var a=i();if(a.text){o=a.text;if(!e.isFunction(o)){n=a.text;o=function(e){return e[n]}}}return function(t){var n=t.term,r={results:[]},a;if(n===""){t.callback(i());return}a=function(i,r){var s,l;i=i[0];if(i.children){s={};for(l in i){if(i.hasOwnProperty(l))s[l]=i[l]}s.children=[];e(i.children).each2((function(e,t){a(t,s.children)}));if(s.children.length||t.matcher(n,o(s),i)){r.push(s)}}else{if(t.matcher(n,o(i),i)){r.push(i)}}};e(i().results).each2((function(e,t){a(t,r.results)}));t.callback(r)}}function I(i){var n=e.isFunction(i);return function(r){var o=r.term,a={results:[]};var s=n?i(r):i;if(e.isArray(s)){e(s).each((function(){var e=this.text!==t,i=e?this.text:this;if(o===""||r.matcher(o,i)){a.results.push(e?this:{id:this,text:this})}}));r.callback(a)}}}function M(t,i){if(e.isFunction(t))return true;if(!t)return false;if(typeof t==="string")return true;throw new Error(i+" must be a string, function, or falsy value")}function L(t,i){if(e.isFunction(t)){var n=Array.prototype.slice.call(arguments,2);return t.apply(i,n)}return t}function F(t){var i=0;e.each(t,(function(t,n){if(e(n.element).is("optgroup")){i+=F(n.children)}else{if(n.children&&n.children.length){i+=F(n.children)}i++}}));return i}function G(e,i,n,r){var o=e,a=false,s,l,u,c,d;if(!r.createSearchChoice||!r.tokenSeparators||r.tokenSeparators.length<1)return t;while(true){l=-1;for(u=0,c=r.tokenSeparators.length;u<c;u++){d=r.tokenSeparators[u];l=e.indexOf(d);if(l>=0)break}if(l<0)break;s=e.substring(0,l);e=e.substring(l+d.length);if(s.length>0){s=r.createSearchChoice.call(this,s,i);if(s!==t&&s!==null&&r.id(s)!==t&&r.id(s)!==null){a=false;for(u=0,c=i.length;u<c;u++){if(v(r.id(s),r.id(i[u]))){a=true;break}}if(!a)n(s)}}}if(o!==e)return e}function $(){var t=this;e.each(arguments,(function(e,i){t[i].remove();t[i]=null}))}function W(t,i){var n=function(){};n.prototype=new t;n.prototype.constructor=n;n.prototype.parent=t.prototype;n.prototype=e.extend(n.prototype,i);return n}i=W(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(i){var n,r,a=".select2-results";this.opts=i=this.prepareOpts(i);this.id=i.id;if(i.element.data("select2")!==t&&i.element.data("select2")!==null){i.element.data("select2").destroy()}this.container=this.createContainer();this.liveRegion=e(".select2-hidden-accessible");if(this.liveRegion.length==0){this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(e(document.body))}this.containerId="s2id_"+(i.element.attr("id")||"autogen"+o());this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);this.container.attr("title",i.element.attr("title"));this.body=e(document.body);k(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.attr("style",i.element.attr("style"));this.container.css(L(i.containerCss,this.opts.element));this.container.addClass(L(i.containerCssClass,this.opts.element));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",T);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");k(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(L(i.dropdownCssClass,this.opts.element));this.dropdown.data("select2",this);this.dropdown.on("click",T);this.results=n=this.container.find(a);this.search=r=this.container.find("input.select2-input");this.queryCount=0;this.resultsPage=0;this.context=null;this.initContainer();this.container.on("click",(function(t){if(t.target&&e(t.target).is(".select2-search-choice *")){return}return T(t)}));w(this.results);this.dropdown.on("mousemove-filtered",a,this.bind(this.highlightUnderEvent));this.dropdown.on("touchstart touchmove touchend",a,this.bind((function(e){this._touchEvent=true;this.highlightUnderEvent(e)})));this.dropdown.on("touchmove",a,this.bind(this.touchMoved));this.dropdown.on("touchstart touchend",a,this.bind(this.clearTouchMoved));this.dropdown.on("click",this.bind((function(e){if(this._touchEvent){this._touchEvent=false;this.selectHighlighted()}})));A(80,this.results);this.dropdown.on("scroll-debounced",a,this.bind(this.loadMoreIfNeeded));e(this.container).on("change",".select2-input",(function(e){e.stopPropagation()}));e(this.dropdown).on("change",".select2-input",(function(e){e.stopPropagation()}));if(e.fn.mousewheel){n.mousewheel((function(e,t,i,r){var o=n.scrollTop();if(r>0&&o-r<=0){n.scrollTop(0);T(e)}else if(r<0&&n.get(0).scrollHeight-n.scrollTop()+r<=n.height()){n.scrollTop(n.get(0).scrollHeight-n.height());T(e)}}))}_(r);r.on("keyup-change input paste",this.bind(this.updateResults));r.on("focus",(function(){r.addClass("select2-focused")}));r.on("blur",(function(){r.removeClass("select2-focused")}));this.dropdown.on("mouseup",a,this.bind((function(t){if(e(t.target).closest(".select2-result-selectable").length>0){this.highlightUnderEvent(t);this.selectHighlighted(t)}})));this.dropdown.on("click mouseup mousedown touchstart touchend focusin",(function(t){var i=e.Event(t.type+".sortable");t.stopPropagation();e(t.target).trigger(i)}));this.nextSearchTerm=t;if(e.isFunction(this.opts.initSelection)){this.initSelection();this.monitorSource()}if(i.maximumInputLength!==null){this.search.attr("maxlength",i.maximumInputLength)}var s=i.element.prop("disabled");if(s===t)s=false;this.enable(!s);var l=i.element.prop("readonly");if(l===t)l=false;this.readonly(l);u=u||m();this.autofocus=i.element.prop("autofocus");i.element.prop("autofocus",false);if(this.autofocus)this.focus();this.search.attr("placeholder",i.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,i=e.data("select2"),n=this;this.close();if(e.length&&e[0].detachEvent&&n._sync){e.each((function(){if(n._sync){this.detachEvent("onpropertychange",n._sync)}}))}if(this.propertyObserver){this.propertyObserver.disconnect();this.propertyObserver=null}this._sync=null;if(i!==t){i.container.remove();i.liveRegion.remove();i.dropdown.remove();e.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||false);if(this.elementTabIndex){e.attr({tabindex:this.elementTabIndex})}else{e.removeAttr("tabindex")}e.show()}$.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){if(e.is("option")){return{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:v(e.attr("locked"),"locked")||v(e.data("locked"),true)}}else if(e.is("optgroup")){return{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}}},prepareOpts:function(i){var n,r,a,s,l=this;n=i.element;if(n.get(0).tagName.toLowerCase()==="select"){this.select=r=i.element}if(r){e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],(function(){if(this in i){throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}}))}i=e.extend({},{populateResults:function(n,r,a){var s,u=this.opts.id,c=this.liveRegion;s=function(n,r,d){var f,p,h,g,m,v,y,b,_,w;n=i.sortResults(n,r,a);var C=[];for(f=0,p=n.length;f<p;f=f+1){h=n[f];m=h.disabled===true;g=!m&&u(h)!==t;v=h.children&&h.children.length>0;y=e("<li></li>");y.addClass("select2-results-dept-"+d);y.addClass("select2-result");y.addClass(g?"select2-result-selectable":"select2-result-unselectable");if(m){y.addClass("select2-disabled")}if(v){y.addClass("select2-result-with-children")}y.addClass(l.opts.formatResultCssClass(h));y.attr("role","presentation");b=e(document.createElement("div"));b.addClass("select2-result-label");b.attr("id","select2-result-label-"+o());b.attr("role","option");w=i.formatResult(h,b,a,l.opts.escapeMarkup);if(w!==t){b.html(w);y.append(b)}if(v){_=e("<ul></ul>");_.addClass("select2-result-sub");s(h.children,_,d+1);y.append(_)}y.data("select2-data",h);C.push(y[0])}r.append(C);c.text(i.formatMatches(n.length))};s(r,n,0)}},e.fn.select2.defaults,i);if(typeof i.id!=="function"){a=i.id;i.id=function(e){return e[a]}}if(e.isArray(i.element.data("select2Tags"))){if("tags"in i){throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id")}i.tags=i.element.data("select2Tags")}if(r){var u=r.hasClass("js-tree-select");i.query=this.bind((function(i){var r={results:[],more:false},o=i.term,a,s,c;a=n.children();if(this.getPlaceholder()!==t&&a.length>0){s=this.getPlaceholderOption();if(s){a=a.not(s)}}if(u){var d=function(t){var i=[];var n=null;t.each2((function(t,r){var o={element:e(r[0]),id:parseInt(r.data("id")),children:[]};if(r.is("option")){if(n&&n.id==parseInt(r.data("parent-id"))){n.children.push(o)}else{n=o;i.push(o)}}else if(r.is("optgroup")){o.children=d(r.children());i.push(o);n=null}}));return i};c=function(t,n){t.forEach((function(t){if(t.element.is("option")){var r=[];c(t.children,r);if(i.matcher(o,t.element.text(),t.element)){n.push(e.extend(l.optionToData(t.element),{children:r}))}else if(r.length>0){n.push(e.extend(l.optionToData(t.element),{disabled:true,children:r}))}}else if(t.element.is("optgroup")){var a=l.optionToData(t.element);c(t.children,a.children);if(a.children.length>0){n.push(a)}}}))};c(d(a),r.results)}else{c=function(e,t){var n;if(e.is("option")){if(i.matcher(o,e.text(),e)){t.push(l.optionToData(e))}}else if(e.is("optgroup")){n=l.optionToData(e);e.children().each2((function(e,t){c(t,n.children)}));if(n.children.length>0){t.push(n)}}};a.each2((function(e,t){c(t,r.results)}))}i.callback(r)}));i.id=function(e){return e.id}}else{if(!("query"in i)){if("ajax"in i){s=i.element.data("ajax-url");if(s&&s.length>0){i.ajax.url=s}i.query=N.call(i.element,i.ajax)}else if("data"in i){i.query=P(i.data)}else if("tags"in i){i.query=I(i.tags);if(i.createSearchChoice===t){i.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}}if(i.initSelection===t){i.initSelection=function(t,n){var r=[];e(y(t.val(),i.separator,i.transformVal)).each((function(){var t={id:this,text:this},n=i.tags;if(e.isFunction(n))n=n();e(n).each((function(){if(v(this.id,t.id)){t=this;return false}}));r.push(t)}));n(r)}}}}}if(typeof i.query!=="function"){throw"query function not defined for Select2 "+i.element.attr("id")}if(i.createSearchChoicePosition==="top"){i.createSearchChoicePosition=function(e,t){e.unshift(t)}}else if(i.createSearchChoicePosition==="bottom"){i.createSearchChoicePosition=function(e,t){e.push(t)}}else if(typeof i.createSearchChoicePosition!=="function"){throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function"}return i},monitorSource:function(){var i=this.opts.element,n,r=this;i.on("change.select2",this.bind((function(e){if(this.opts.element.data("select2-change-triggered")!==true){this.initSelection()}})));this._sync=this.bind((function(){var e=i.prop("disabled");if(e===t)e=false;this.enable(!e);var n=i.prop("readonly");if(n===t)n=false;this.readonly(n);if(this.container){k(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(L(this.opts.containerCssClass,this.opts.element))}if(this.dropdown){k(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(L(this.opts.dropdownCssClass,this.opts.element))}}));if(i.length&&i[0].attachEvent){i.each((function(){this.attachEvent("onpropertychange",r._sync)}))}n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(n!==t){if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}this.propertyObserver=new n((function(t){e.each(t,r._sync)}));this.propertyObserver.observe(i.get(0),{attributes:true,subtree:false})}},triggerSelect:function(t){var i=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});this.opts.element.trigger(i);return!i.isDefaultPrevented()},triggerChange:function(t){t=t||{};t=e.extend({},t,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",true);this.opts.element.trigger(t);this.opts.element.data("select2-change-triggered",false);this.opts.element.click();if(this.opts.blurOnChange)this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===true},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;if(e===this.enabledInterface)return false;this.container.toggleClass("select2-container-disabled",t);this.close();this.enabledInterface=e;return true},enable:function(e){if(e===t)e=true;if(this._enabled===e)return;this._enabled=e;this.opts.element.prop("disabled",!e);this.enableInterface()},disable:function(){this.enable(false)},readonly:function(e){if(e===t)e=false;if(this._readonly===e)return;this._readonly=e;this.opts.element.prop("readonly",e);this.enableInterface()},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):false},positionDropdown:function(){var t=this.dropdown,i=this.container,n=i.offset(),r=i.outerHeight(false),o=i.outerWidth(false),a=t.outerHeight(false),s=e(window),l=s.width(),c=s.height(),d=s.scrollLeft()+l,f=s.scrollTop()+c,p=n.top+r,h=n.left,g=p+a<=f,m=n.top-a>=s.scrollTop(),v=t.outerWidth(false),y=function(){return h+v<=d},b=function(){return n.left+d+i.outerWidth(false)>v},_=t.hasClass("select2-drop-above"),w,C,A,E,x;if(_){C=true;if(!m&&g){A=true;C=false}}else{C=false;if(!g&&m){A=true;C=true}}if(A){t.hide();n=this.container.offset();r=this.container.outerHeight(false);o=this.container.outerWidth(false);a=t.outerHeight(false);d=s.scrollLeft()+l;f=s.scrollTop()+c;p=n.top+r;h=n.left;v=t.outerWidth(false);t.show();this.focusSearch()}if(this.opts.dropdownAutoWidth){x=e(".select2-results",t)[0];t.addClass("select2-drop-auto-width");t.css("width","");v=t.outerWidth(false)+(x.scrollHeight===x.clientHeight?0:u.width);v>o?o=v:v=o;a=t.outerHeight(false)}else{this.container.removeClass("select2-drop-auto-width")}if(this.body.css("position")!=="static"){w=this.body.offset();p-=w.top;h-=w.left}if(!y()&&b()){h=n.left+this.container.outerWidth(false)-v}E={left:h,width:o};if(C){E.top=n.top-a;E.bottom="auto";this.container.addClass("select2-drop-above");t.addClass("select2-drop-above")}else{E.top=p;E.bottom="auto";this.container.removeClass("select2-drop-above");t.removeClass("select2-drop-above")}E=e.extend(E,L(this.opts.dropdownCss,this.opts.element));t.css(E)},shouldOpen:function(){var t;if(this.opened())return false;if(this._enabled===false||this._readonly===true)return false;t=e.Event("select2-opening");this.opts.element.trigger(t);return!t.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return false;this.opening();l.on("mousemove.select2Event",(function(e){s.x=e.pageX;s.y=e.pageY}));return true},opening:function(){var t=this.containerEventName,i="scroll."+t,n="resize."+t,r="orientationchange."+t,o;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();if(this.dropdown[0]!==this.body.children().last()[0]){this.dropdown.detach().appendTo(this.body)}o=e("#select2-drop-mask");if(o.length===0){o=e(document.createElement("div"));o.attr("id","select2-drop-mask").attr("class","select2-drop-mask");o.hide();o.appendTo(this.body);o.on("mousedown touchstart click",(function(t){p(o);var i=e("#select2-drop"),n;if(i.length>0){n=i.data("select2");if(n.opts.selectOnBlur){n.selectHighlighted({noFocus:true})}n.close();t.preventDefault();t.stopPropagation()}}))}if(this.dropdown.prev()[0]!==o[0]){this.dropdown.before(o)}e("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");o.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each((function(){e(this).on(n+" "+i+" "+r,(function(e){if(a.opened())a.positionDropdown()}))}))},close:function(){if(!this.opened())return;var t=this.containerEventName,i="scroll."+t,n="resize."+t,r="orientationchange."+t;this.container.parents().add(window).each((function(){e(this).off(i).off(n).off(r)}));this.clearDropdownAlignmentPreference();e("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();l.off("mousemove.select2Event");this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger(e.Event("select2-close"))},externalSearch:function(e){this.open();this.search.val(e);this.updateResults(false)},clearSearch:function(){},getMaximumSelectionSize:function(){return L(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t=this.results,i,n,r,o,a,s,l,u;n=this.highlight();if(n<0)return;if(n==0){t.scrollTop(0);return}i=this.findHighlightableChoices().find(".select2-result-label");r=e(i[n]);u=(r.offset()||{}).top||0;o=u+r.outerHeight(true);if(n===i.length-1){l=t.find("li.select2-more-results");if(l.length>0){o=l.offset().top+l.outerHeight(true)}}a=t.offset().top+t.outerHeight(false);if(o>a){t.scrollTop(t.scrollTop()+(o-a))}s=u-t.offset().top;if(s<0&&r.css("display")!="none"){t.scrollTop(t.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){var i=this.findHighlightableChoices(),n=this.highlight();while(n>-1&&n<i.length){n+=t;var r=e(i[n]);if(r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(t){var i=this.findHighlightableChoices(),n,r;if(arguments.length===0){return g(i.filter(".select2-highlighted")[0],i.get())}if(t>=i.length)t=i.length-1;if(t<0)t=0;this.removeHighlight();n=e(i[t]);n.addClass("select2-highlighted");this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id"));this.ensureHighlightVisible();this.liveRegion.text(n.text());r=n.data("select2-data");if(r){this.opts.element.trigger({type:"select2-highlight",val:this.id(r),choice:r})}},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=true},clearTouchMoved:function(){this._touchMoved=false},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=e(t.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(i))}else if(i.length==0){this.removeHighlight()}},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),i,n=this.resultsPage+1,r=this,o=this.search.val(),a=this.context;if(t.length===0)return;i=t.offset().top-e.offset().top-e.height();if(i<=this.opts.loadMorePadding){t.addClass("select2-active");this.opts.query({element:this.opts.element,term:o,page:n,context:a,matcher:this.opts.matcher,callback:this.bind((function(i){if(!r.opened())return;r.opts.populateResults.call(this,e,i.results,{term:o,page:n,context:a});r.postprocessResults(i,false,false);if(i.more===true){t.detach().appendTo(e).html(r.opts.escapeMarkup(L(r.opts.formatLoadMore,r.opts.element,n+1)));window.setTimeout((function(){r.loadMoreIfNeeded()}),10)}else{t.remove()}r.positionDropdown();r.resultsPage=n;r.context=i.context;this.opts.element.trigger({type:"select2-loaded",items:i})}))})}},tokenize:function(){},updateResults:function(i){var n=this.search,r=this.results,o=this.opts,a,s=this,l,u=n.val(),c=e.data(this.container,"select2-last-term"),d;if(i!==true&&c&&v(u,c))return;e.data(this.container,"select2-last-term",u);if(i!==true&&(this.showSearchInput===false||!this.opened())){return}function f(){n.removeClass("select2-active");s.positionDropdown();if(r.find(".select2-no-results,.select2-selection-limit,.select2-searching").length){s.liveRegion.text(r.text())}else{s.liveRegion.text(s.opts.formatMatches(r.find('.select2-result-selectable:not(".select2-selected")').length))}}function p(e){r.html(e);f()}d=++this.queryCount;var h=this.getMaximumSelectionSize();if(h>=1){a=this.data();if(e.isArray(a)&&a.length>=h&&M(o.formatSelectionTooBig,"formatSelectionTooBig")){p("<li class='select2-selection-limit'>"+L(o.formatSelectionTooBig,o.element,h)+"</li>");return}}if(n.val().length<o.minimumInputLength){if(M(o.formatInputTooShort,"formatInputTooShort")){p("<li class='select2-no-results'>"+L(o.formatInputTooShort,o.element,n.val(),o.minimumInputLength)+"</li>")}else{p("")}if(i&&this.showSearch)this.showSearch(true);return}if(o.maximumInputLength&&n.val().length>o.maximumInputLength){if(M(o.formatInputTooLong,"formatInputTooLong")){p("<li class='select2-no-results'>"+L(o.formatInputTooLong,o.element,n.val(),o.maximumInputLength)+"</li>")}else{p("")}return}if(o.formatSearching&&this.findHighlightableChoices().length===0){p("<li class='select2-searching'>"+L(o.formatSearching,o.element)+"</li>")}n.addClass("select2-active");this.removeHighlight();l=this.tokenize();if(l!=t&&l!=null){n.val(l)}this.resultsPage=1;o.query({element:o.element,term:n.val(),page:this.resultsPage,context:null,matcher:o.matcher,callback:this.bind((function(a){var l;if(d!=this.queryCount){return}if(!this.opened()){this.search.removeClass("select2-active");return}if(a.hasError!==t&&M(o.formatAjaxError,"formatAjaxError")){p("<li class='select2-ajax-error'>"+L(o.formatAjaxError,o.element,a.jqXHR,a.textStatus,a.errorThrown)+"</li>");return}this.context=a.context===t?null:a.context;if(this.opts.createSearchChoice&&n.val()!==""){l=this.opts.createSearchChoice.call(s,n.val(),a.results);if(l!==t&&l!==null&&s.id(l)!==t&&s.id(l)!==null){if(e(a.results).filter((function(){return v(s.id(this),s.id(l))})).length===0){this.opts.createSearchChoicePosition(a.results,l)}}}if(a.results.length===0&&M(o.formatNoMatches,"formatNoMatches")){p("<li class='select2-no-results'>"+L(o.formatNoMatches,o.element,n.val())+"</li>");return}r.empty();s.opts.populateResults.call(this,r,a.results,{term:n.val(),page:this.resultsPage,context:null});if(a.more===true&&M(o.formatLoadMore,"formatLoadMore")){r.append("<li class='select2-more-results'>"+o.escapeMarkup(L(o.formatLoadMore,o.element,this.resultsPage))+"</li>");window.setTimeout((function(){s.loadMoreIfNeeded()}),10)}this.postprocessResults(a,i);f();this.opts.element.trigger({type:"select2-loaded",items:a})}))})},cancel:function(){this.close()},blur:function(){if(this.opts.selectOnBlur)this.selectHighlighted({noFocus:true});this.close();this.container.removeClass("select2-container-active");if(this.search[0]===document.activeElement){this.search.blur()}this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){E(this.search)},selectHighlighted:function(e){if(this._touchMoved){this.clearTouchMoved();return}var t=this.highlight(),i=this.results.find(".select2-highlighted"),n=i.closest(".select2-result").data("select2-data");if(n){this.highlight(t);this.onSelect(n,e)}else if(e&&e.noFocus){this.close()}},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var i=this.select.children("option").first();if(this.opts.placeholderOption!==t){return this.opts.placeholderOption==="first"&&i||typeof this.opts.placeholderOption==="function"&&this.opts.placeholderOption(this.select)}else if(e.trim(i.text())===""&&i.val()===""){return i}}},initContainerWidth:function(){function i(){var i,n,r,o,a,s;if(this.opts.width==="off"){return null}else if(this.opts.width==="element"){return this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px"}else if(this.opts.width==="copy"||this.opts.width==="resolve"){i=this.opts.element.attr("style");if(i!==t){n=i.split(";");for(o=0,a=n.length;o<a;o=o+1){s=n[o].replace(/\s/g,"");r=s.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);if(r!==null&&r.length>=1)return r[1]}}if(this.opts.width==="resolve"){i=this.opts.element.css("width");if(i.indexOf("%")>0)return i;return this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px"}return null}else if(e.isFunction(this.opts.width)){return this.opts.width()}else{return this.opts.width}}var n=i.call(this);if(n!==null){this.container.css("width",n)}}});n=W(i,{createContainer:function(){var t=e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments)){this.focusser.prop("disabled",!this.isInterfaceEnabled())}},opening:function(){var i,n,r;if(this.opts.minimumResultsForSearch>=0){this.showSearch(true)}this.parent.opening.apply(this,arguments);if(this.showSearchInput!==false){this.search.val(this.focusser.val())}if(this.opts.shouldFocusInput(this)){this.search.focus();i=this.search.get(0);if(i.createTextRange){n=i.createTextRange();n.collapse(false);n.select()}else if(i.setSelectionRange){r=this.search.val().length;i.setSelectionRange(r,r)}}if(this.search.val()===""){if(this.nextSearchTerm!=t){this.search.val(this.nextSearchTerm);this.search.select()}}this.focusser.prop("disabled",true).val("");this.updateResults(true);this.opts.element.trigger(e.Event("select2-open"))},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments);this.focusser.prop("disabled",false);if(this.opts.shouldFocusInput(this)){this.focusser.focus()}},focus:function(){if(this.opened()){this.close()}else{this.focusser.prop("disabled",false);if(this.opts.shouldFocusInput(this)){this.focusser.focus()}}},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.prop("disabled",false);if(this.opts.shouldFocusInput(this)){this.focusser.focus()}},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);$.call(this,"selection","focusser")},initContainer:function(){var t,i=this.container,n=this.dropdown,r=o(),a;if(this.opts.minimumResultsForSearch<0){this.showSearch(false)}else{this.showSearch(true)}this.selection=t=i.find(".select2-choice");this.focusser=i.find(".select2-focusser");t.find(".select2-chosen").attr("id","select2-chosen-"+r);this.focusser.attr("aria-labelledby","select2-chosen-"+r);this.results.attr("id","select2-results-"+r);this.search.attr("aria-owns","select2-results-"+r);this.focusser.attr("id","s2id_autogen"+r);a=e("label[for='"+this.opts.element.attr("id")+"']");this.opts.element.focus(this.bind((function(){this.focus()})));this.focusser.prev().text(a.text()).attr("for",this.focusser.attr("id"));var s=this.opts.element.attr("title");this.opts.element.attr("title",s||a.text());this.focusser.attr("tabindex",this.elementTabIndex);this.search.attr("id",this.focusser.attr("id")+"_search");this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.search.on("keydown",this.bind((function(e){if(!this.isInterfaceEnabled())return;if(229==e.keyCode)return;if(e.which===c.PAGE_UP||e.which===c.PAGE_DOWN){T(e);return}switch(e.which){case c.UP:case c.DOWN:this.moveHighlight(e.which===c.UP?-1:1);T(e);return;case c.ENTER:this.selectHighlighted();T(e);return;case c.TAB:this.selectHighlighted({noFocus:true});return;case c.ESC:this.cancel(e);T(e);return}})));this.search.on("blur",this.bind((function(e){if(document.activeElement===this.body.get(0)){window.setTimeout(this.bind((function(){if(this.opened()){this.search.focus()}})),0)}})));this.focusser.on("keydown",this.bind((function(e){if(!this.isInterfaceEnabled())return;if(e.which===c.TAB||c.isControl(e)||c.isFunctionKey(e)||e.which===c.ESC){return}if(this.opts.openOnEnter===false&&e.which===c.ENTER){T(e);return}if(e.which==c.DOWN||e.which==c.UP||e.which==c.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;this.open();T(e);return}if(e.which==c.DELETE||e.which==c.BACKSPACE){if(this.opts.allowClear){this.clear()}T(e);return}})));_(this.focusser);this.focusser.on("keyup-change input",this.bind((function(e){if(this.opts.minimumResultsForSearch>=0){e.stopPropagation();if(this.opened())return;this.open()}})));t.on("mousedown touchstart","abbr",this.bind((function(e){if(!this.isInterfaceEnabled()){return}this.clear();S(e);this.close();if(this.selection){this.selection.focus()}})));t.on("mousedown touchstart",this.bind((function(i){p(t);if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(e.Event("select2-focus"))}if(this.opened()){this.close()}else if(this.isInterfaceEnabled()){this.open()}T(i)})));n.on("mousedown touchstart",this.bind((function(){if(this.opts.shouldFocusInput(this)){this.search.focus()}})));t.on("focus",this.bind((function(e){T(e)})));this.focusser.on("focus",this.bind((function(){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(e.Event("select2-focus"))}this.container.addClass("select2-container-active")}))).on("blur",this.bind((function(){if(!this.opened()){this.container.removeClass("select2-container-active");this.opts.element.trigger(e.Event("select2-blur"))}})));this.search.on("focus",this.bind((function(){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(e.Event("select2-focus"))}this.container.addClass("select2-container-active")})));this.initContainerWidth();this.opts.element.hide();this.setPlaceholder()},clear:function(t){var i=this.selection.data("select2-data");if(i){var n=e.Event("select2-clearing");this.opts.element.trigger(n);if(n.isDefaultPrevented()){return}var r=this.getPlaceholderOption();this.opts.element.val(r?r.val():"");this.selection.find(".select2-chosen").empty();this.selection.removeData("select2-data");this.setPlaceholder();if(t!==false){this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i});this.triggerChange({removed:i})}}},initSelection:function(){var e;if(this.isPlaceholderOptionSelected()){this.updateSelection(null);this.close();this.setPlaceholder()}else{var i=this;this.opts.initSelection.call(null,this.opts.element,(function(e){if(e!==t&&e!==null){i.updateSelection(e);i.close();i.setPlaceholder();i.nextSearchTerm=i.opts.nextSearchTerm(e,i.search.val())}}))}},isPlaceholderOptionSelected:function(){var e;if(this.getPlaceholder()===t)return false;return(e=this.getPlaceholderOption())!==t&&e.prop("selected")||this.opts.element.val()===""||this.opts.element.val()===t||this.opts.element.val()===null},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;if(t.element.get(0).tagName.toLowerCase()==="select"){t.initSelection=function(e,t){var n=e.find("option").filter((function(){return this.selected&&!this.disabled}));t(i.optionToData(n))}}else if("data"in t){t.initSelection=t.initSelection||function(i,n){var r=i.val();var o=null;t.query({matcher:function(e,i,n){var a=v(r,t.id(n));if(a){o=n}return a},callback:!e.isFunction(n)?e.noop:function(){n(o)}})}}return t},getPlaceholder:function(){if(this.select){if(this.getPlaceholderOption()===t){return t}}return this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e));this.selection.addClass("select2-default");this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,i){var n=0,r=this,o=true;this.findHighlightableChoices().each2((function(e,t){if(v(r.id(t.data("select2-data")),r.opts.element.val())){n=e;return false}}));if(i!==false){if(t===true&&n>=0){this.highlight(n)}else{this.highlight(0)}}if(t===true){var a=this.opts.minimumResultsForSearch;if(a>=0){this.showSearch(F(e.results)>=a)}}},showSearch:function(t){if(this.showSearchInput===t)return;this.showSearchInput=t;this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t);this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t);e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t)},onSelect:function(e,t){if(!this.triggerSelect(e)){return}var i=this.opts.element.val(),n=this.data();this.opts.element.val(this.id(e));this.updateSelection(e);this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e});this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val());this.close();if((!t||!t.noFocus)&&this.opts.shouldFocusInput(this)){this.focusser.focus()}if(!v(i,this.id(e))){this.triggerChange({added:e,removed:n})}},updateSelection:function(i){var n=this.selection.find(".select2-chosen"),r,o;this.selection.data("select2-data",i);n.empty();if(i!==null){r=this.opts.formatSelection(i,n,this.opts.escapeMarkup);n.prop("title",e(i.element).prop("title")||i.text)}if(r!==t){n.append(r)}o=this.opts.formatSelectionCssClass(i,n);if(o!==t){n.addClass(o)}this.selection.removeClass("select2-default");if(this.opts.allowClear&&this.getPlaceholder()!==t){this.container.addClass("select2-allowclear")}},val:function(){var e,i=false,n=null,r=this,o=this.data();if(arguments.length===0){return this.opts.element.val()}e=arguments[0];if(arguments.length>1){i=arguments[1]}if(this.select){this.select.val(e).find("option").filter((function(){return this.selected})).each2((function(e,t){n=r.optionToData(t);return false}));this.updateSelection(n);this.setPlaceholder();if(i){this.triggerChange({added:n,removed:o})}}else{if(!e&&e!==0){this.clear(i);return}if(this.opts.initSelection===t){throw new Error("cannot call val() if initSelection() is not defined")}this.opts.element.val(e);this.opts.initSelection(this.opts.element,(function(e){r.opts.element.val(!e?"":r.id(e));r.updateSelection(e);r.setPlaceholder();if(i){r.triggerChange({added:e,removed:o})}}))}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(e){var i,n=false;if(arguments.length===0){i=this.selection.data("select2-data");if(i==t)i=null;return i}else{if(arguments.length>1){n=arguments[1]}if(!e){this.clear(n)}else{i=this.data();this.opts.element.val(!e?"":this.id(e));this.updateSelection(e);if(n){this.triggerChange({added:e,removed:i})}}}}});r=W(i,{createContainer:function(){var t=e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;if(t.element.get(0).tagName.toLowerCase()==="select"){t.initSelection=function(e,t){var n=[];e.find("option").filter((function(){return this.selected&&!this.disabled})).each2((function(e,t){n.push(i.optionToData(t))}));t(n)}}else if("data"in t){t.initSelection=t.initSelection||function(i,n){var r=y(i.val(),t.separator,t.transformVal);var o=[];t.query({matcher:function(i,n,a){var s=e.grep(r,(function(e){return v(e,t.id(a))})).length;if(s){o.push(a)}return s},callback:!e.isFunction(n)?e.noop:function(){var e=[];for(var i=0;i<r.length;i++){var a=r[i];for(var s=0;s<o.length;s++){var l=o[s];if(v(a,t.id(l))){e.push(l);o.splice(s,1);break}}}n(e)}})}}return t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");if(t.length&&e&&e[0]==t[0]){}else{if(t.length){this.opts.element.trigger("choice-deselected",t)}t.removeClass("select2-search-choice-focus");if(e&&e.length){this.close();e.addClass("select2-search-choice-focus");this.opts.element.trigger("choice-selected",e)}}},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);$.call(this,"searchContainer","selection")},initContainer:function(){var t=".select2-choices",i;this.searchContainer=this.container.find(".select2-search-field");this.selection=i=this.container.find(t);var n=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",(function(t){n.search[0].focus();n.selectChoice(e(this))}));this.search.attr("id","s2id_autogen"+o());this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.opts.element.focus(this.bind((function(){this.focus()})));this.search.on("input paste",this.bind((function(){if(this.search.attr("placeholder")&&this.search.val().length==0)return;if(!this.isInterfaceEnabled())return;if(!this.opened()){this.open()}})));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind((function(e){if(!this.isInterfaceEnabled())return;++this.keydowns;var t=i.find(".select2-search-choice-focus");var n=t.prev(".select2-search-choice:not(.select2-locked)");var r=t.next(".select2-search-choice:not(.select2-locked)");var o=x(this.search);if(t.length&&(e.which==c.LEFT||e.which==c.RIGHT||e.which==c.BACKSPACE||e.which==c.DELETE||e.which==c.ENTER)){var a=t;if(e.which==c.LEFT&&n.length){a=n}else if(e.which==c.RIGHT){a=r.length?r:null}else if(e.which===c.BACKSPACE){if(this.unselect(t.first())){this.search.width(10);a=n.length?n:r}}else if(e.which==c.DELETE){if(this.unselect(t.first())){this.search.width(10);a=r.length?r:null}}else if(e.which==c.ENTER){a=null}this.selectChoice(a);T(e);if(!a||!a.length){this.open()}return}else if((e.which===c.BACKSPACE&&this.keydowns==1||e.which==c.LEFT)&&(o.offset==0&&!o.length)){this.selectChoice(i.find(".select2-search-choice:not(.select2-locked)").last());T(e);return}else{this.selectChoice(null)}if(this.opened()){switch(e.which){case c.UP:case c.DOWN:this.moveHighlight(e.which===c.UP?-1:1);T(e);return;case c.ENTER:this.selectHighlighted();T(e);return;case c.TAB:this.selectHighlighted({noFocus:true});this.close();return;case c.ESC:this.cancel(e);T(e);return}}if(e.which===c.TAB||c.isControl(e)||c.isFunctionKey(e)||e.which===c.BACKSPACE||e.which===c.ESC){return}if(e.which===c.ENTER){if(this.opts.openOnEnter===false){return}else if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey){return}}this.open();if(e.which===c.PAGE_UP||e.which===c.PAGE_DOWN){T(e)}if(e.which===c.ENTER){T(e)}})));this.search.on("keyup",this.bind((function(e){this.keydowns=0;this.resizeSearch()})));this.search.on("blur",this.bind((function(t){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.selectChoice(null);if(!this.opened())this.clearSearch();t.stopImmediatePropagation();this.opts.element.trigger(e.Event("select2-blur"))})));this.container.on("click",t,this.bind((function(t){if(!this.isInterfaceEnabled())return;if(e(t.target).closest(".select2-search-choice").length>0){return}this.selectChoice(null);this.clearPlaceholder();if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(e.Event("select2-focus"))}this.open();this.focusSearch();t.preventDefault()})));this.container.on("focus",t,this.bind((function(){if(!this.isInterfaceEnabled())return;if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(e.Event("select2-focus"))}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");this.clearPlaceholder()})));this.initContainerWidth();this.opts.element.hide();this.clearSearch()},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments)){this.search.prop("disabled",!this.isInterfaceEnabled())}},initSelection:function(){var e;if(this.opts.element.val()===""&&this.opts.element.text()===""){this.updateSelection([]);this.close();this.clearSearch()}if(this.select||this.opts.element.val()!==""){var i=this;this.opts.initSelection.call(null,this.opts.element,(function(e){if(e!==t&&e!==null){i.updateSelection(e);i.close();i.clearSearch()}}))}},clearSearch:function(){var e=this.getPlaceholder(),i=this.getMaxSearchWidth();if(e!==t&&this.getVal().length===0&&this.search.hasClass("select2-focused")===false){this.search.val(e).addClass("select2-default");this.search.width(i>0?i:this.container.css("width"))}else{this.search.val("").width(10)}},clearPlaceholder:function(){if(this.search.hasClass("select2-default")){this.search.val("").removeClass("select2-default")}},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();if(this.search.val()===""){if(this.nextSearchTerm!=t){this.search.val(this.nextSearchTerm);this.search.select()}}this.updateResults(true);if(this.opts.shouldFocusInput(this)){this.search.focus()}this.opts.element.trigger(e.Event("select2-open"))},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var i=[],n=[],r=this;e(t).each((function(){if(g(r.id(this),i)<0){i.push(r.id(this));n.push(this)}}));t=n;this.selection.find(".select2-search-choice").remove();e(t).each((function(){r.addSelectedChoice(this)}));r.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts);if(e!=null&&e!=t){this.search.val(e);if(e.length>0){this.open()}}},onSelect:function(e,i){if(!this.triggerSelect(e)||e.text===""){return}this.addSelectedChoice(e);this.opts.element.trigger({type:"selected",val:this.id(e),choice:e});this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val());this.clearSearch();this.updateResults();if(this.select||!this.opts.closeOnSelect)this.postprocessResults(e,false,this.opts.closeOnSelect===true);if(this.opts.closeOnSelect){this.close();this.search.width(10)}else{if(this.countSelectableResults()>0){this.search.width(10);this.resizeSearch();if(this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()){this.updateResults(true)}else{if(this.nextSearchTerm!=t){this.search.val(this.nextSearchTerm);this.updateResults();this.search.select()}}this.positionDropdown()}else{this.close();this.search.width(10)}}this.triggerChange({added:e});if(!i||!i.noFocus)this.focusSearch()},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(i){var n=!i.locked,r=e("<li class='select2-search-choice'>"+"    <div></div>"+"    <a href='#' class='select2-search-choice-close' tabindex='-1'></a>"+"</li>"),o=e("<li class='select2-search-choice select2-locked'>"+"<div></div>"+"</li>");var a=n?r:o,s=this.id(i),l=this.getVal(),u,c;u=this.opts.formatSelection(i,a.find("div"),this.opts.escapeMarkup);if(u!=t){a.find("div").replaceWith(e("<div></div>").html(u))}if(this.opts.inlineTags){a.addClass("select2-search-choice-inlined")}c=this.opts.formatSelectionCssClass(i,a.find("div"));if(c!=t){a.addClass(c)}if(n){a.find(".select2-search-choice-close").on("mousedown",T).on("click dblclick",this.bind((function(t){if(!this.isInterfaceEnabled())return;this.unselect(e(t.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");T(t);this.close();this.focusSearch()}))).on("focus",this.bind((function(){if(!this.isInterfaceEnabled())return;this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active")})))}a.data("select2-data",i);a.insertBefore(this.searchContainer);l.push(s);this.setVal(l)},unselect:function(t){var i=this.getVal(),n,r;t=t.closest(".select2-search-choice");if(t.length===0){throw"Invalid argument: "+t+". Must be .select2-search-choice"}n=t.data("select2-data");if(!n){return}var o=e.Event("select2-removing");o.val=this.id(n);o.choice=n;this.opts.element.trigger(o);if(o.isDefaultPrevented()){return false}while((r=g(this.id(n),i))>=0){i.splice(r,1);this.setVal(i);if(this.select)this.postprocessResults()}t.remove();this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n});this.triggerChange({removed:n});return true},postprocessResults:function(e,t,i){var n=this.getVal(),r=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),a=this;r.each2((function(e,t){var i=a.id(t.data("select2-data"));if(g(i,n)>=0){if(t.is("optgroup")){t.addClass("select2-selected");t.find(".select2-result-selectable").addClass("select2-selected")}else{if(t.find(".select2-result-selectable").length>0){t.addClass("select2-disabled")}else{t.addClass("select2-selected")}}}}));o.each2((function(e,t){if(t.find(".select2-result-selectable:not(.select2-selected)").length===0){if(!t.is(".select2-result-selectable")||t.is(".select2-disabled")){t.addClass("select2-selected")}}}));if(this.highlight()==-1&&i!==false&&this.opts.closeOnSelect===true){a.highlight(0)}if(!this.opts.createSearchChoice&&!r.filter(".select2-result:not(.select2-selected)").length>0){if(!e||e&&!e.more&&this.results.find(".select2-no-results").length===0){if(M(a.opts.formatNoMatches,"formatNoMatches")){this.results.append("<li class='select2-no-results'>"+L(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>")}}}},getMaxSearchWidth:function(){return this.selection.width()-b(this.search)},resizeSearch:function(){var e,t,i,n,r,o=b(this.search);e=D(this.search)+10;t=this.search.offset().left;i=this.selection.width();n=this.selection.offset().left;r=i-(t-n)-o;if(r<e){r=i-o}if(r<40){r=i-o}if(r<=0){r=e}this.search.width(Math.floor(r))},getVal:function(){var e;if(this.select){e=this.select.val();return e===null?[]:e}else{e=this.opts.element.val();return y(e,this.opts.separator,this.opts.transformVal)}},setVal:function(t){var i;if(this.select){this.select.val(t)}else{i=[];e(t).each((function(){if(g(this,i)<0)i.push(this)}));this.opts.element.val(i.length===0?"":i.join(this.opts.separator))}},buildChangeDetails:function(e,t){var t=t.slice(0),e=e.slice(0);for(var i=0;i<t.length;i++){for(var n=0;n<e.length;n++){if(v(this.opts.id(t[i]),this.opts.id(e[n]))){t.splice(i,1);if(i>0){i--}e.splice(n,1);n--}}}return{added:t,removed:e}},val:function(i,n){var r,o=this;if(arguments.length===0){return this.getVal()}r=this.data();if(!r.length)r=[];if(!i&&i!==0){this.opts.element.val("");this.updateSelection([]);this.clearSearch();if(n){this.triggerChange({added:this.data(),removed:r})}return}this.setVal(i);if(this.select){this.opts.initSelection(this.select,this.bind(this.updateSelection));if(n){this.triggerChange(this.buildChangeDetails(r,this.data()))}}else{if(this.opts.initSelection===t){throw new Error("val() cannot be called if initSelection() is not defined")}this.opts.initSelection(this.opts.element,(function(t){var i=e.map(t,o.id);o.setVal(i);o.updateSelection(t);o.clearSearch();if(n){o.triggerChange(o.buildChangeDetails(r,o.data()))}}))}this.clearSearch()},onSortStart:function(){if(this.select){throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.")}this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each((function(){t.push(i.opts.id(e(this).data("select2-data")))}));this.setVal(t);this.triggerChange()},data:function(t,i){var n=this,r,o;if(arguments.length===0){return this.selection.children(".select2-search-choice").map((function(){return e(this).data("select2-data")})).get()}else{o=this.data();if(!t){t=[]}r=e.map(t,(function(e){return n.opts.id(e)}));this.setVal(r);this.updateSelection(t);this.clearSearch();if(i){this.triggerChange(this.buildChangeDetails(o,this.data()))}}}});e.fn.select2=function(){var i=Array.prototype.slice.call(arguments,0),n,r,o,a,s,l=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],u=["opened","isFocused","container","dropdown"],c=["val","data"],d={search:"externalSearch"};this.each((function(){if(i.length===0||typeof i[0]==="object"){n=i.length===0?{}:e.extend({},i[0]);n.element=e(this);if(n.element.get(0).tagName.toLowerCase()==="select"){s=n.element.prop("multiple")}else{s=n.multiple||false;if("tags"in n){n.multiple=s=true}}r=s?new window.Select2["class"].multi:new window.Select2["class"].single;r.init(n)}else if(typeof i[0]==="string"){if(g(i[0],l)<0){throw"Unknown method: "+i[0]}a=t;r=e(this).data("select2");if(r===t)return;o=i[0];if(o==="container"){a=r.container}else if(o==="dropdown"){a=r.dropdown}else{if(d[o])o=d[o];a=r[o].apply(r,i.slice(1))}if(g(i[0],u)>=0||g(i[0],c)>=0&&i.length==1){return false}}else{throw"Invalid arguments to select2 plugin: "+i}}));return a===t?this:a};e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:true,openOnEnter:true,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,n){var r=[];O(this.text(e),i.term,r,n);return r.join("")},transformVal:function(t){return e.trim(t)},formatSelection:function(e,i,n){return e?n(this.text(e)):t},sortResults:function(e,t,i){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,i){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},text:function(t){if(t&&this.data&&this.data.text){if(e.isFunction(this.data.text)){return this.data.text(t)}else{return t[this.data.text]}}else{return t.text}},matcher:function(e,t){return h(""+t).toUpperCase().indexOf(h(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:G,escapeMarkup:R,blurOnChange:false,selectOnBlur:false,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,i){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;if(!t){return true}if(e.opts.minimumResultsForSearch<0){return false}return true}};e.fn.select2.locales=[];e.fn.select2.locales["en"]={formatMatches:function(e){if(e===1){return"One result is available, press enter to select it."}return e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,i){return"Loading failed"},formatInputTooShort:function(e,t){var i=t-e.length;return"Please enter "+i+" or more character"+(i==1?"":"s")},formatInputTooLong:function(e,t){var i=e.length-t;return"Please delete "+i+" character"+(i==1?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(e==1?"":"s")},formatLoadMore:function(e){return"Loading more results…"},formatSearching:function(){return"Searching…"}};e.extend(e.fn.select2.defaults,e.fn.select2.locales["en"]);e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:false,dataType:"json"}};window.Select2={query:{ajax:N,local:P,tags:I},util:{debounce:C,markMatch:O,escapeMarkup:R,stripDiacritics:h},class:{abstract:i,single:n,multi:r}}})(jQuery);var EndlessScroll;EndlessScroll=function(){var e;t.name="EndlessScroll";e={bottomPixels:50,fireOnce:true,fireDelay:150,loader:"Loading...",content:"",insertAfter:"div:last",intervalFrequency:250,resetCounter:function(){return false},callback:function(){return true},ceaseFire:function(){return false}};function t(t,i){var n=this;this.options=$.extend({},e,i);this.firing=true;this.fired=false;this.fireSequence=0;this.didScroll=false;this.isScrollable=true;this.target=t;this.targetId="";this.content="";this.innerWrap=$(".endless_scroll_inner_wrap",this.target);if(this.options.data){this.options.content=this.options.data}$(t).scroll((function(){n.didScroll=true;n.target=t;return n.targetId=$(n.target).attr("id")}))}t.prototype.run=function(){var e=this;return setInterval((function(){if(e.shouldTryFiring()){e.didScroll=false;if(e.ceaseFireWhenNecessary()){return}if(e.shouldBeFiring()){e.resetFireSequenceWhenNecessary();e.acknowledgeFiring();e.insertLoader();if(e.hasContent()){e.showContent();e.fireCallback();e.delayFireingWhenNecessary()}return e.removeLoader()}}}),this.options.intervalFrequency)};t.prototype.shouldTryFiring=function(){return this.didScroll&&this.firing===true};t.prototype.ceaseFireWhenNecessary=function(){if(this.options.ceaseFire.apply(this.target,[this.fireSequence])){this.firing=false;return true}else{return false}};t.prototype.wrapContainer=function(){if(this.innerWrap.length===0){return this.innerWrap=$(this.target).wrapInner('<div class="endless_scroll_inner_wrap" />').find(".endless_scroll_inner_wrap")}};t.prototype.isScrollableOrNot=function(){if(this.target===document||this.target===window){return this.isScrollable=$(document).height()-$(window).height()<=$(window).scrollTop()+this.options.bottomPixels}else{this.wrapContainer();return this.isScrollable=this.innerWrap.length>0&&this.innerWrap.height()-$(this.target).height()<=$(this.target).scrollTop()+this.options.bottomPixels}};t.prototype.shouldBeFiring=function(){this.isScrollableOrNot();return this.isScrollable&&(this.options.fireOnce===false||this.options.fireOnce===true&&this.fired!==true)};t.prototype.resetFireSequenceWhenNecessary=function(){if(this.options.resetCounter.apply(this.target)===true){return this.fireSequence=0}};t.prototype.acknowledgeFiring=function(){this.fired=true;return this.fireSequence++};t.prototype.insertLoader=function(){return $(this.options.insertAfter).after('<div class="endless_scroll_loader_'+this.targetId+' endless_scroll_loader">'+this.options.loader+"</div>")};t.prototype.removeLoader=function(){return $(".endless_scroll_loader_"+this.targetId).fadeOut((function(){return $(this).remove()}))};t.prototype.hasContent=function(){if(typeof this.options.content==="function"){this.content=this.options.content.apply(this.target,[this.fireSequence])}else{this.content=this.options.content}return this.content!==false};t.prototype.showContent=function(){$(this.options.insertAfter).after('<div id="endless_scroll_content">'+this.content+"</div>");return $("#endless_scroll_content").hide().fadeIn(250,(function(){return $(this).removeAttr("id")}))};t.prototype.fireCallback=function(){return this.options.callback.apply(this.target,[this.fireSequence])};t.prototype.delayFireingWhenNecessary=function(){var e=this;if(this.options.fireDelay>0){$("body").after('<div id="endless_scroll_marker"></div>');return $("#endless_scroll_marker").fadeTo(this.options.fireDelay,1,(function(){$("#endless_scroll_marker").remove();return e.fired=false}))}else{return this.fired=false}};return t}();(function(e){return e.fn.endlessScroll=function(e){return new EndlessScroll(this,e).run()}})(jQuery);(function(e){var t=[];var i="dirty";var n="clean";var r="dirtyInitialValue";var o="isDirty";var a=function(e){var i;t.forEach((function(t){if(t.id===e){i=t}}));return i};const s=function(e){t=t.filter((function(t){return t!==e}));e.isDirty=false};var l=function(t){t.form.on("submit",(function(){t.submitting=true}));if(t.options.preventLeaving){e(window).on("beforeunload",(function(e){if(t.isDirty&&!t.submitting){e.preventDefault();return t.options.leavingMessage}}))}};var u=function(e){e.form.find("input, select, textarea").on("change.dirty click.dirty keyup.dirty keydown.dirty blur.dirty",(function(t){e.checkValues(t)}));e.form.on("dirty",(function(){e.options.onDirty()}));e.form.on("clean",(function(){e.options.onClean()}))};var c=function(e){e.form.find("input, select, textarea").off("change.dirty click.dirty keyup.dirty keydown.dirty blur.dirty");e.form.off("dirty");e.form.off("clean")};var d=function(i,r){this.form=i;this.isDirty=false;this.options=r;this.history=[n,n];this.id=e(i).attr("id");t.push(this)};d.prototype={init:function(){this.saveInitialValues();this.setEvents()},statuses:{dirty:i,clean:n,dataInitialValue:r,dataIsDirty:o},isRadioOrCheckbox:function(t){return e(t).is(":radio, :checkbox")},isFileInput:function(t){return e(t).is(":file")},saveInitialValues:function(){var t=this;this.form.find("input, select, textarea").each((function(i,n){var o=t.isRadioOrCheckbox(n);var a=t.isFileInput(n);if(o){var s=e(n).is(":checked")?"checked":"unchecked";e(n).data(r,s)}else if(a){e(n).data(r,JSON.stringify(n.files))}else{e(n).data(r,e(n).val()||"")}}))},refreshEvents:function(){var e=this;c(e);u(e)},showDirtyFields:function(){var t=this;return t.form.find("input, select, textarea").filter((function(t,i){return e(i).data(o)}))},setEvents:function(){var e=this;l(e);u(e)},isFieldDirty:function(e){var t=e.data(r);if(t==null){t=""}var i=e.val();if(i==null){i=""}var n=/^(true|false)$/i;var o=n.test(t)&&n.test(i);if(o){var a=new RegExp("^"+t+"$","i");return!a.test(i)}return i!==t},isFileInputDirty:function(e){var t=e.data(r);var i=e[0];var n=JSON.stringify(i.files);return n!==t},isCheckboxDirty:function(e){var t=e.data(r);var i=e.is(":checked")?"checked":"unchecked";return t!==i},checkValues:function(t){var i=this;var n=false;this.form.find("input, select, textarea").each((function(t,r){var a=i.isRadioOrCheckbox(r);var s=i.isFileInput(r);var l=e(r);var u;if(a){u=i.isCheckboxDirty(l)}else if(s){u=i.isFileInputDirty(l)}else{u=i.isFieldDirty(l)}l.data(o,u);n|=u}));if(n){i.setDirty()}else{i.setClean()}},setDirty:function(){this.isDirty=true;this.history[0]=this.history[1];this.history[1]=i;if(this.options.fireEventsOnEachChange||this.wasJustClean()){this.form.trigger("dirty")}},setClean:function(){this.isDirty=false;this.history[0]=this.history[1];this.history[1]=n;if(this.options.fireEventsOnEachChange||this.wasJustDirty()){this.form.trigger("clean")}},wasJustDirty:function(){return this.history[0]===i},wasJustClean:function(){return this.history[0]===n},setAsClean:function(){this.saveInitialValues();this.setClean()},setAsDirty:function(){this.saveInitialValues();this.setDirty()},resetForm:function(){var t=this;this.form.find("input, select, textarea").each((function(i,n){var o=e(n);var a=t.isRadioOrCheckbox(n);var s=t.isFileInput(n);if(a){var l=o.data(r);var u=l==="checked";o.prop("checked",u)}if(s){n.value="";e(n).data(r,JSON.stringify(n.files))}else{var c=o.data(r);o.val(c)}}));this.checkValues()}};e.fn.dirty=function(t){if(typeof t==="string"){var i=a(e(this).attr("id"));if(!i){return null}if(/^(isDirty|isClean|refreshEvents|resetForm|setAsClean|setAsDirty|showDirtyFields|destroy)$/i.test(t)){var n=t.toLowerCase();switch(n){case"isclean":return!i.isDirty;case"isdirty":return i.isDirty;case"refreshevents":return i.refreshEvents();case"resetform":return i.resetForm();case"setasclean":return i.setAsClean();case"setasdirty":return i.setAsDirty();case"showdirtyfields":return i.showDirtyFields();case"destroy":return s(i)}}else{return i[t].apply(i,Array.prototype.slice.call(arguments,1))}}else{return this.each((function(i,n){t=e.extend({},e.fn.dirty.defaults,t);var r=new d(e(n),t);r.init()}))}};e.fn.dirty.singleton=a;e.fn.dirty.defaults={preventLeaving:false,leavingMessage:"There are unsaved changes on this page which will be discarded if you continue.",onDirty:e.noop,onClean:e.noop,fireEventsOnEachChange:false};e.fn.dirty.extend=function(t){e.extend(d.prototype,t)};e.fn.dirty.constructor=d;e.fn.dirty.prototype=d.prototype})(jQuery);+function(e){"use strict";var t=".dropdown-backdrop";var i='[data-toggle="dropdown"]';var n=function(t){e(t).on("click.bs.dropdown",this.toggle)};n.VERSION="3.4.1";function r(t){var i=t.attr("data-target");if(!i){i=t.attr("href");i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")}var n=i!=="#"?e(document).find(i):null;return n&&n.length?n:t.parent()}function o(n){if(n&&n.which===3)return;if(n.preventDropdownClose)return;e(t).remove();e(i).each((function(){var t=e(this);var i=r(t);var o={relatedTarget:this};if(!i.hasClass("open"))return;if(n&&n.type=="click"&&/input|textarea/i.test(n.target.tagName)&&e.contains(i[0],n.target))return;i.trigger(n=e.Event("hide.bs.dropdown",o));if(n.isDefaultPrevented())return;t.attr("aria-expanded","false");i.removeClass("open").trigger(e.Event("hidden.bs.dropdown",o))}))}n.prototype.toggle=function(t){var i=e(this);if(i.is(".disabled, :disabled"))return;var n=r(i);var a=n.hasClass("open");o(t);if(!a){if("ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length){e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",o)}var s={relatedTarget:this};n.trigger(t=e.Event("show.bs.dropdown",s));if(t.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true");n.toggleClass("open").trigger(e.Event("shown.bs.dropdown",s))}return false};n.prototype.keydown=function(t){if(!/(38|40|27|32)/.test(t.which)||/input|textarea/i.test(t.target.tagName))return;var n=e(this);t.preventDefault();t.stopPropagation();if(n.is(".disabled, :disabled"))return;var o=r(n);var a=o.hasClass("open");if(!a&&t.which!=27||a&&t.which==27){if(t.which==27)o.find(i).trigger("focus");return n.trigger("click")}var s=" li:not(.disabled):visible a";var l=o.find(".dropdown-menu"+s);if(!l.length)return;var u=l.index(t.target);if(t.which==38&&u>0)u--;if(t.which==40&&u<l.length-1)u++;if(!~u)u=0;l.eq(u).trigger("focus")};function a(t){return this.each((function(){var i=e(this);var r=i.data("bs.dropdown");if(!r)i.data("bs.dropdown",r=new n(this));if(typeof t=="string")r[t].call(i)}))}var s=e.fn.dropdown;e.fn.dropdown=a;e.fn.dropdown.Constructor=n;e.fn.dropdown.noConflict=function(){e.fn.dropdown=s;return this};e(document).on("click.bs.dropdown.data-api",o).on("click.bs.dropdown.data-api",".dropdown form",(function(e){e.stopPropagation()})).on("click.bs.dropdown.data-api",i,n.prototype.toggle).on("keydown.bs.dropdown.data-api",i,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery);+function(e){"use strict";var t=function(t,i){this.options=i;this.$body=e(document.body);this.$element=e(t);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=false;this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom";if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,e.proxy((function(){this.$element.trigger("loaded.bs.modal")}),this))}};t.VERSION="3.4.1";t.TRANSITION_DURATION=300;t.BACKDROP_TRANSITION_DURATION=150;t.DEFAULTS={backdrop:true,keyboard:true,show:true};t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)};t.prototype.show=function(i){var n=this;var r=e.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(r);if(this.isShown||r.isDefaultPrevented())return;this.isShown=true;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",(function(){n.$element.one("mouseup.dismiss.bs.modal",(function(t){if(e(t.target).is(n.$element))n.ignoreBackdropClick=true}))}));this.backdrop((function(){var r=e.support.transition&&n.$element.hasClass("fade");if(!n.$element.parent().length){n.$element.appendTo(n.$body)}n.$element.show().scrollTop(0);n.adjustDialog();if(r){n.$element[0].offsetWidth}n.$element.addClass("in");n.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:i});r?n.$dialog.one("bsTransitionEnd",(function(){n.$element.trigger("focus").trigger(o)})).emulateTransitionEnd(t.TRANSITION_DURATION):n.$element.trigger("focus").trigger(o)}))};t.prototype.hide=function(i){if(i)i.preventDefault();i=e.Event("hide.bs.modal");this.$element.trigger(i);if(!this.isShown||i.isDefaultPrevented())return;this.isShown=false;this.escape();this.resize();e(document).off("focusin.bs.modal");this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal");this.$dialog.off("mousedown.dismiss.bs.modal");e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal()};t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy((function(e){if(document!==e.target&&this.$element[0]!==e.target&&!this.$element.has(e.target).length){this.$element.trigger("focus")}}),this))};t.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keydown.dismiss.bs.modal",e.proxy((function(e){e.which==27&&this.hide()}),this))}else if(!this.isShown){this.$element.off("keydown.dismiss.bs.modal")}};t.prototype.resize=function(){if(this.isShown){e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this))}else{e(window).off("resize.bs.modal")}};t.prototype.hideModal=function(){var e=this;this.$element.hide();this.backdrop((function(){e.$body.removeClass("modal-open");e.resetAdjustments();e.resetScrollbar();e.$element.trigger("hidden.bs.modal")}))};t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};t.prototype.backdrop=function(i){var n=this;var r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&r;this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",e.proxy((function(e){if(this.ignoreBackdropClick){this.ignoreBackdropClick=false;return}if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus():this.hide()}),this));this.$backdrop.on("click.dismiss.bs.modal",e.proxy((function(e){this.hide.call(this)}),this));if(o)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!i)return;o?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):i()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){n.removeBackdrop();i&&i()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):a()}else if(i){i()}};t.prototype.handleUpdate=function(){this.adjustDialog()};t.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})};t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};t.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e;this.scrollbarWidth=this.measureScrollbar()};t.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var i=this.scrollbarWidth;if(this.bodyIsOverflowing){this.$body.css("padding-right",t+i);e(this.fixedContent).each((function(t,n){var r=n.style.paddingRight;var o=e(n).css("padding-right");e(n).data("padding-right",r).css("padding-right",parseFloat(o)+i+"px")}))}};t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad);e(this.fixedContent).each((function(t,i){var n=e(i).data("padding-right");e(i).removeData("padding-right");i.style.paddingRight=n?n:""}))};t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure";this.$body.append(e);var t=e.offsetWidth-e.clientWidth;this.$body[0].removeChild(e);return t};function i(i,n){return this.each((function(){var r=e(this);var o=r.data("bs.modal");var a=e.extend({},t.DEFAULTS,r.data(),typeof i=="object"&&i);if(!o)r.data("bs.modal",o=new t(this,a));if(typeof i=="string")o[i](n);else if(a.show)o.show(n)}))}var n=e.fn.modal;e.fn.modal=i;e.fn.modal.Constructor=t;e.fn.modal.noConflict=function(){e.fn.modal=n;return this};e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',(function(t){var n=e(this);var r=n.attr("href");var o=n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"");var a=e(document).find(o);var s=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},a.data(),n.data());if(n.is("a"))t.preventDefault();a.one("show.bs.modal",(function(e){if(e.isDefaultPrevented())return;a.one("hidden.bs.modal",(function(){n.is(":visible")&&n.trigger("focus")}))}));i.call(a,s,this)}))}(jQuery);+function(e){"use strict";var t=["sanitize","whiteList","sanitizeFn"];var i=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"];var n=/^aria-[\w-]*$/i;var r={"*":["class","dir","id","lang","role",n],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};var o=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi;var a=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function s(t,n){var r=t.nodeName.toLowerCase();if(e.inArray(r,n)!==-1){if(e.inArray(r,i)!==-1){return Boolean(t.nodeValue.match(o)||t.nodeValue.match(a))}return true}var s=e(n).filter((function(e,t){return t instanceof RegExp}));for(var l=0,u=s.length;l<u;l++){if(r.match(s[l])){return true}}return false}function l(t,i,n){if(t.length===0){return t}if(n&&typeof n==="function"){return n(t)}if(!document.implementation||!document.implementation.createHTMLDocument){return t}var r=document.implementation.createHTMLDocument("sanitization");r.body.innerHTML=t;var o=e.map(i,(function(e,t){return t}));var a=e(r.body).find("*");for(var l=0,u=a.length;l<u;l++){var c=a[l];var d=c.nodeName.toLowerCase();if(e.inArray(d,o)===-1){c.parentNode.removeChild(c);continue}var f=e.map(c.attributes,(function(e){return e}));var p=[].concat(i["*"]||[],i[d]||[]);for(var h=0,g=f.length;h<g;h++){if(!s(f[h],p)){c.removeAttribute(f[h].nodeName)}}}return r.body.innerHTML}var u=function(e,t){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.inState=null;this.init("tooltip",e,t)};u.VERSION="3.4.1";u.TRANSITION_DURATION=150;u.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0},sanitize:true,sanitizeFn:null,whiteList:r};u.prototype.init=function(t,i,n){this.enabled=true;this.type=t;this.$element=e(i);this.options=this.getOptions(n);this.$viewport=this.options.viewport&&e(document).find(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport);this.inState={click:false,hover:false,focus:false};if(this.$element[0]instanceof document.constructor&&!this.options.selector){throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!")}var r=this.options.trigger.split(" ");for(var o=r.length;o--;){var a=r[o];if(a=="click"){this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this))}else if(a!="manual"){var s=a=="hover"?"mouseenter":"focusin";var l=a=="hover"?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this));this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};u.prototype.getDefaults=function(){return u.DEFAULTS};u.prototype.getOptions=function(i){var n=this.$element.data();for(var r in n){if(n.hasOwnProperty(r)&&e.inArray(r,t)!==-1){delete n[r]}}i=e.extend({},this.getDefaults(),n,i);if(i.delay&&typeof i.delay=="number"){i.delay={show:i.delay,hide:i.delay}}if(i.sanitize){i.template=l(i.template,i.whiteList,i.sanitizeFn)}return i};u.prototype.getDelegateOptions=function(){var t={};var i=this.getDefaults();this._options&&e.each(this._options,(function(e,n){if(i[e]!=n)t[e]=n}));return t};u.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(!i){i=new this.constructor(t.currentTarget,this.getDelegateOptions());e(t.currentTarget).data("bs."+this.type,i)}if(t instanceof e.Event){i.inState[t.type=="focusin"?"focus":"hover"]=true}if(i.tip().hasClass("in")||i.hoverState=="in"){i.hoverState="in";return}clearTimeout(i.timeout);i.hoverState="in";if(!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout((function(){if(i.hoverState=="in")i.show()}),i.options.delay.show)};u.prototype.isInStateTrue=function(){for(var e in this.inState){if(this.inState[e])return true}return false};u.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(!i){i=new this.constructor(t.currentTarget,this.getDelegateOptions());e(t.currentTarget).data("bs."+this.type,i)}if(t instanceof e.Event){i.inState[t.type=="focusout"?"focus":"hover"]=false}if(i.isInStateTrue())return;clearTimeout(i.timeout);i.hoverState="out";if(!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout((function(){if(i.hoverState=="out")i.hide()}),i.options.delay.hide)};u.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var n=this;var r=this.tip();var o=this.getUID(this.type);this.setContent();r.attr("id",o);this.$element.attr("aria-describedby",o);if(this.options.animation)r.addClass("fade");r.detach().css({top:0,left:0,display:"block"}).data("bs."+this.type,this);this.options.container?r.appendTo(e(document).find(this.options.container)):r.insertAfter(this.$element);var a=typeof this.options.placement=="function"?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement;var s=/\s?auto?\s?/i;var l=s.test(a);if(l)a=a.replace(s,"")||"top";r.addClass(a);this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition();var d=r[0].offsetWidth;var f=r[0].offsetHeight;if(l){var p=a;var h=this.getPosition(this.$viewport);a=a=="bottom"&&c.bottom+f>h.bottom?"top":a=="top"&&c.top-f<h.top?"bottom":a=="right"&&c.right+d>h.width?"left":a=="left"&&c.left-d<h.left?"right":a;r.removeClass(p).addClass(a)}var g=this.getCalculatedOffset(a,c,d,f);this.applyPlacement(g,a);var m=function(){var e=n.hoverState;n.$element.trigger("shown.bs."+n.type);n.hoverState=null;if(e=="out")n.leave(n)};e.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",m).emulateTransitionEnd(u.TRANSITION_DURATION):m()}};u.prototype.applyPlacement=function(t,i){var n=this.tip();var r=n[0].offsetWidth;var o=n[0].offsetHeight;var a=parseInt(n.css("margin-top"),10);var s=parseInt(n.css("margin-left"),10);if(isNaN(a))a=0;if(isNaN(s))s=0;t.top+=a;t.left+=s;e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0);n.addClass("in");var l=n[0].offsetWidth;var u=n[0].offsetHeight;if(i=="top"&&u!=o){t.top=t.top+o-u}var c=this.getViewportAdjustedDelta(i,t,l,u);if(c.left)t.left+=c.left;else t.top+=c.top;var d=/top|bottom/.test(i);var f=d?c.left*2-r+l:c.top*2-o+u;var p=d?"offsetWidth":"offsetHeight";n.offset(t);this.replaceArrow(f,n[0][p],d)};u.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")};u.prototype.setContent=function(){var e=this.tip();var t=this.getTitle();if(this.options.html){if(this.options.sanitize){t=l(t,this.options.whiteList,this.options.sanitizeFn)}e.find(".tooltip-inner").html(t)}else{e.find(".tooltip-inner").text(t)}e.removeClass("fade in top bottom left right")};u.prototype.hide=function(t){var i=this;var n=e(this.$tip);var r=e.Event("hide.bs."+this.type);function o(){if(i.hoverState!="in")n.detach();if(i.$element){i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type)}t&&t()}this.$element.trigger(r);if(r.isDefaultPrevented())return;n.removeClass("in");e.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",o).emulateTransitionEnd(u.TRANSITION_DURATION):o();this.hoverState=null;return this};u.prototype.fixTitle=function(){var e=this.$element;if(e.attr("title")||typeof e.attr("data-original-title")!="string"){e.attr("data-original-title",e.attr("title")||"").attr("title","")}};u.prototype.hasContent=function(){return this.getTitle()};u.prototype.getPosition=function(t){t=t||this.$element;var i=t[0];var n=i.tagName=="BODY";var r=i.getBoundingClientRect();if(r.width==null){r=e.extend({},r,{width:r.right-r.left,height:r.bottom-r.top})}var o=window.SVGElement&&i instanceof window.SVGElement;var a=n?{top:0,left:0}:o?null:t.offset();var s={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()};var l=n?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},r,s,l,a)};u.prototype.getCalculatedOffset=function(e,t,i,n){return e=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-i/2}:e=="top"?{top:t.top-n,left:t.left+t.width/2-i/2}:e=="left"?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}};u.prototype.getViewportAdjustedDelta=function(e,t,i,n){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0;var a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-o-a.scroll;var l=t.top+o-a.scroll+n;if(s<a.top){r.top=a.top-s}else if(l>a.top+a.height){r.top=a.top+a.height-l}}else{var u=t.left-o;var c=t.left+o+i;if(u<a.left){r.left=a.left-u}else if(c>a.right){r.left=a.left+a.width-c}}return r};u.prototype.getTitle=function(){var e;var t=this.$element;var i=this.options;e=t.attr("data-original-title")||(typeof i.title=="function"?i.title.call(t[0]):i.title);return e};u.prototype.getUID=function(e){do{e+=~~(Math.random()*1e6)}while(document.getElementById(e));return e};u.prototype.tip=function(){if(!this.$tip){this.$tip=e(this.options.template);if(this.$tip.length!=1){throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")}}return this.$tip};u.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};u.prototype.enable=function(){this.enabled=true};u.prototype.disable=function(){this.enabled=false};u.prototype.toggleEnabled=function(){this.enabled=!this.enabled};u.prototype.toggle=function(t){var i=this;if(t){i=e(t.currentTarget).data("bs."+this.type);if(!i){i=new this.constructor(t.currentTarget,this.getDelegateOptions());e(t.currentTarget).data("bs."+this.type,i)}}if(t){i.inState.click=!i.inState.click;if(i.isInStateTrue())i.enter(i);else i.leave(i)}else{i.tip().hasClass("in")?i.leave(i):i.enter(i)}};u.prototype.destroy=function(){var e=this;clearTimeout(this.timeout);this.hide((function(){e.$element.off("."+e.type).removeData("bs."+e.type);if(e.$tip){e.$tip.detach()}e.$tip=null;e.$arrow=null;e.$viewport=null;e.$element=null}))};u.prototype.sanitizeHtml=function(e){return l(e,this.options.whiteList,this.options.sanitizeFn)};function c(t){return this.each((function(){var i=e(this);var n=i.data("bs.tooltip");var r=typeof t=="object"&&t;if(!n&&/destroy|hide/.test(t))return;if(!n)i.data("bs.tooltip",n=new u(this,r));if(typeof t=="string")n[t]()}))}var d=e.fn.bsTooltip;e.fn.bsTooltip=c;e.fn.bsTooltip.Constructor=u;e.fn.bsTooltip.noConflict=function(){e.fn.bsTooltip=d;return this}}(jQuery);+function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.bsTooltip)throw new Error("Popover requires bootstrap-tooltip.js");t.VERSION="3.4.1";t.DEFAULTS=e.extend({},e.fn.bsTooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});t.prototype=e.extend({},e.fn.bsTooltip.Constructor.prototype);t.prototype.constructor=t;t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.setContent=function(){var e=this.tip();var t=this.getTitle();var i=this.getContent();if(this.options.html){var n=typeof i;if(this.options.sanitize){t=this.sanitizeHtml(t);if(n==="string"){i=this.sanitizeHtml(i)}}e.find(".popover-title").html(t);e.find(".popover-content").children().detach().end()[n==="string"?"html":"append"](i)}else{e.find(".popover-title").text(t);e.find(".popover-content").children().detach().end().text(i)}e.removeClass("fade top bottom left right in");if(!e.find(".popover-title").html())e.find(".popover-title").hide()};t.prototype.hasContent=function(){return this.getTitle()||this.getContent()};t.prototype.getContent=function(){var e=this.$element;var t=this.options;return e.attr("data-content")||(typeof t.content=="function"?t.content.call(e[0]):t.content)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};function i(i){return this.each((function(){var n=e(this);var r=n.data("bs.popover");var o=typeof i=="object"&&i;if(!r&&/destroy|hide/.test(i))return;if(!r)n.data("bs.popover",r=new t(this,o));if(typeof i=="string")r[i]()}))}var n=e.fn.popover;e.fn.popover=i;e.fn.popover.Constructor=t;e.fn.popover.noConflict=function(){e.fn.popover=n;return this}}(jQuery);(function(e,t){if(typeof define==="function"&&define.amd){define(["jquery"],(function(e){return t(e)}))}else if(typeof exports==="object"){module.exports=t(require("jquery"))}else if(jQuery&&!jQuery.fn.colorpicker){t(jQuery)}})(this,(function(e){"use strict";var t=function(i,n,r,o,a){this.fallbackValue=r?typeof r==="string"?this.parse(r):r:null;this.fallbackFormat=o?o:"rgba";this.hexNumberSignPrefix=a===true;this.value=this.fallbackValue;this.origFormat=null;this.predefinedColors=n?n:{};this.colors=e.extend({},t.webColors,this.predefinedColors);if(i){if(typeof i.h!=="undefined"){this.value=i}else{this.setColor(String(i))}}if(!this.value){this.value={h:0,s:0,b:0,a:1}}};t.webColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32",transparent:"transparent"};t.prototype={constructor:t,colors:{},predefinedColors:{},getValue:function(){return this.value},setValue:function(e){this.value=e},_sanitizeNumber:function(e){if(typeof e==="number"){return e}if(isNaN(e)||e===null||e===""||e===undefined){return 1}if(e===""){return 0}if(typeof e.toLowerCase!=="undefined"){if(e.match(/^\./)){e="0"+e}return Math.ceil(parseFloat(e)*100)/100}return 1},isTransparent:function(e){if(!e||!(typeof e==="string"||e instanceof String)){return false}e=e.toLowerCase().trim();return e==="transparent"||e.match(/#?00000000/)||e.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/)},rgbaIsTransparent:function(e){return e.r===0&&e.g===0&&e.b===0&&e.a===0},setColor:function(e){e=e.toLowerCase().trim();if(e){if(this.isTransparent(e)){this.value={h:0,s:0,b:0,a:0};return true}else{var t=this.parse(e);if(t){this.value=this.value={h:t.h,s:t.s,b:t.b,a:t.a};if(!this.origFormat){this.origFormat=t.format}}else if(this.fallbackValue){this.value=this.fallbackValue}}}return false},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setBrightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=Math.round(parseInt((1-e)*100,10)/100*100)/100},toRGB:function(e,t,i,n){if(arguments.length===0){e=this.value.h;t=this.value.s;i=this.value.b;n=this.value.a}e*=360;var r,o,a,s,l;e=e%360/60;l=i*t;s=l*(1-Math.abs(e%2-1));r=o=a=i-l;e=~~e;r+=[l,s,0,0,s,l][e];o+=[s,l,l,s,0,0][e];a+=[0,0,s,l,l,s][e];return{r:Math.round(r*255),g:Math.round(o*255),b:Math.round(a*255),a:n}},toHex:function(e,t,i,n,r){if(arguments.length<=1){t=this.value.h;i=this.value.s;n=this.value.b;r=this.value.a}var o="#";var a=this.toRGB(t,i,n,r);if(this.rgbaIsTransparent(a)){return"transparent"}if(!e){o=this.hexNumberSignPrefix?"#":""}var s=o+((1<<24)+(parseInt(a.r)<<16)+(parseInt(a.g)<<8)+parseInt(a.b)).toString(16).slice(1);return s},toHSL:function(e,t,i,n){if(arguments.length===0){e=this.value.h;t=this.value.s;i=this.value.b;n=this.value.a}var r=e,o=(2-t)*i,a=t*i;if(o>0&&o<=1){a/=o}else{a/=2-o}o/=2;if(a>1){a=1}return{h:isNaN(r)?0:r,s:isNaN(a)?0:a,l:isNaN(o)?0:o,a:isNaN(n)?0:n}},toAlias:function(e,t,i,n){var r,o=arguments.length===0?this.toHex(true):this.toHex(true,e,t,i,n);var a=this.origFormat==="alias"?o:this.toString(false,this.origFormat);for(var s in this.colors){r=this.colors[s].toLowerCase().trim();if(r===o||r===a){return s}}return false},RGBtoHSB:function(e,t,i,n){e/=255;t/=255;i/=255;var r,o,a,s;a=Math.max(e,t,i);s=a-Math.min(e,t,i);r=s===0?null:a===e?(t-i)/s:a===t?(i-e)/s+2:(e-t)/s+4;r=(r+360)%6*60/360;o=s===0?0:s/a;return{h:this._sanitizeNumber(r),s:o,b:a,a:this._sanitizeNumber(n)}},HueToRGB:function(e,t,i){if(i<0){i+=1}else if(i>1){i-=1}if(i*6<1){return e+(t-e)*i*6}else if(i*2<1){return t}else if(i*3<2){return e+(t-e)*(2/3-i)*6}else{return e}},HSLtoRGB:function(e,t,i,n){if(t<0){t=0}var r;if(i<=.5){r=i*(1+t)}else{r=i+t-i*t}var o=2*i-r;var a=e+1/3;var s=e;var l=e-1/3;var u=Math.round(this.HueToRGB(o,r,a)*255);var c=Math.round(this.HueToRGB(o,r,s)*255);var d=Math.round(this.HueToRGB(o,r,l)*255);return[u,c,d,this._sanitizeNumber(n)]},parse:function(t){if(typeof t!=="string"){return this.fallbackValue}if(arguments.length===0){return false}var i=this,n=false,r=typeof this.colors[t]!=="undefined",o,a;if(r){t=this.colors[t].toLowerCase().trim()}e.each(this.stringParsers,(function(e,s){var l=s.re.exec(t);o=l&&s.parse.apply(i,[l]);if(o){n={};a=r?"alias":s.format?s.format:i.getValidFallbackFormat();if(a.match(/hsla?/)){n=i.RGBtoHSB.apply(i,i.HSLtoRGB.apply(i,o))}else{n=i.RGBtoHSB.apply(i,o)}if(n instanceof Object){n.format=a}return false}return true}));return n},getValidFallbackFormat:function(){var e=["rgba","rgb","hex","hsla","hsl"];if(this.origFormat&&e.indexOf(this.origFormat)!==-1){return this.origFormat}if(this.fallbackFormat&&e.indexOf(this.fallbackFormat)!==-1){return this.fallbackFormat}return"rgba"},toString:function(e,i,n){i=i||this.origFormat||this.fallbackFormat;n=n||false;var r=false;switch(i){case"rgb":{r=this.toRGB();if(this.rgbaIsTransparent(r)){return"transparent"}return"rgb("+r.r+","+r.g+","+r.b+")"}break;case"rgba":{r=this.toRGB();return"rgba("+r.r+","+r.g+","+r.b+","+r.a+")"}break;case"hsl":{r=this.toHSL();return"hsl("+Math.round(r.h*360)+","+Math.round(r.s*100)+"%,"+Math.round(r.l*100)+"%)"}break;case"hsla":{r=this.toHSL();return"hsla("+Math.round(r.h*360)+","+Math.round(r.s*100)+"%,"+Math.round(r.l*100)+"%,"+r.a+")"}break;case"hex":{return this.toHex(e)}break;case"alias":{r=this.toAlias();if(r===false){return this.toString(e,this.getValidFallbackFormat())}if(n&&!(r in t.webColors)&&r in this.predefinedColors){return this.predefinedColors[r]}return r}default:{return r}break}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(e){return[e[1],e[2],e[3],1]}},{re:/rgb\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/hsl\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/hsla\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),1]}}],colorNameToHex:function(e){if(typeof this.colors[e.toLowerCase()]!=="undefined"){return this.colors[e.toLowerCase()]}return false}};var i={horizontal:false,inline:false,color:false,format:false,input:"input",container:false,component:".add-on, .input-group-addon",fallbackColor:false,fallbackFormat:"hex",hexNumberSignPrefix:true,sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:false,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:false,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:false},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:false}},template:'<div class="colorpicker dropdown-menu">'+'<div class="colorpicker-saturation"><i><b></b></i></div>'+'<div class="colorpicker-hue"><i></i></div>'+'<div class="colorpicker-alpha"><i></i></div>'+'<div class="colorpicker-color"><div /></div>'+'<div class="colorpicker-selectors"></div>'+"</div>",align:"right",customClass:null,colorSelectors:null};var n=function(t,n){this.element=e(t).addClass("colorpicker-element");this.options=e.extend(true,{},i,this.element.data(),n);this.component=this.options.component;this.component=this.component!==false?this.element.find(this.component):false;if(this.component&&this.component.length===0){this.component=false}this.container=this.options.container===true?this.element:this.options.container;this.container=this.container!==false?e(this.container):false;this.input=this.element.is("input")?this.element:this.options.input?this.element.find(this.options.input):false;if(this.input&&this.input.length===0){this.input=false}this.color=this.createColor(this.options.color!==false?this.options.color:this.getValue());this.format=this.options.format!==false?this.options.format:this.color.origFormat;if(this.options.color!==false){this.updateInput(this.color);this.updateData(this.color)}this.disabled=false;var r=this.picker=e(this.options.template);if(this.options.customClass){r.addClass(this.options.customClass)}if(this.options.inline){r.addClass("colorpicker-inline colorpicker-visible")}else{r.addClass("colorpicker-hidden")}if(this.options.horizontal){r.addClass("colorpicker-horizontal")}if(["rgba","hsla","alias"].indexOf(this.format)!==-1||this.options.format===false||this.getValue()==="transparent"){r.addClass("colorpicker-with-alpha")}if(this.options.align==="right"){r.addClass("colorpicker-right")}if(this.options.inline===true){r.addClass("colorpicker-no-arrow")}if(this.options.colorSelectors){var o=this,a=o.picker.find(".colorpicker-selectors");if(a.length>0){e.each(this.options.colorSelectors,(function(t,i){var n=e("<i />").addClass("colorpicker-selectors-color").css("background-color",i).data("class",t).data("alias",t);n.on("mousedown.colorpicker touchstart.colorpicker",(function(t){t.preventDefault();o.setValue(o.format==="alias"?e(this).data("alias"):e(this).css("background-color"))}));a.append(n)}));a.show().addClass("colorpicker-visible")}}r.on("mousedown.colorpicker touchstart.colorpicker",e.proxy((function(e){if(e.target===e.currentTarget){e.preventDefault()}}),this));r.find(".colorpicker-saturation, .colorpicker-hue, .colorpicker-alpha").on("mousedown.colorpicker touchstart.colorpicker",e.proxy(this.mousedown,this));r.appendTo(this.container?this.container:e("body"));if(this.input!==false){this.input.on({"keyup.colorpicker":e.proxy(this.keyup,this)});this.input.on({"input.colorpicker":e.proxy(this.change,this)});if(this.component===false){this.element.on({"focus.colorpicker":e.proxy(this.show,this)})}if(this.options.inline===false){this.element.on({"focusout.colorpicker":e.proxy(this.hide,this)})}}if(this.component!==false){this.component.on({"click.colorpicker":e.proxy(this.show,this)})}if(this.input===false&&this.component===false){this.element.on({"click.colorpicker":e.proxy(this.show,this)})}if(this.input!==false&&this.component!==false&&this.input.attr("type")==="color"){this.input.on({"click.colorpicker":e.proxy(this.show,this),"focus.colorpicker":e.proxy(this.show,this)})}this.update();e(e.proxy((function(){this.element.trigger("create")}),this))};n.Color=t;n.prototype={constructor:n,destroy:function(){this.picker.remove();this.element.removeData("colorpicker","color").off(".colorpicker");if(this.input!==false){this.input.off(".colorpicker")}if(this.component!==false){this.component.off(".colorpicker")}this.element.removeClass("colorpicker-element");this.element.trigger({type:"destroy"})},reposition:function(){if(this.options.inline!==false||this.options.container){return false}var e=this.container&&this.container[0]!==window.document.body?"position":"offset";var t=this.component||this.element;var i=t[e]();if(this.options.align==="right"){i.left-=this.picker.outerWidth()-t.outerWidth()}this.picker.css({top:i.top+t.outerHeight(),left:i.left})},show:function(t){if(this.isDisabled()){return}this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden");this.reposition();e(window).on("resize.colorpicker",e.proxy(this.reposition,this));if(t&&(!this.hasInput()||this.input.attr("type")==="color")){if(t.stopPropagation&&t.preventDefault){t.stopPropagation();t.preventDefault()}}if((this.component||!this.input)&&this.options.inline===false){e(window.document).on({"mousedown.colorpicker":e.proxy(this.hide,this)})}this.element.trigger({type:"showPicker",color:this.color})},hide:function(t){if(typeof t!=="undefined"&&t.target){if(e(t.currentTarget).parents(".colorpicker").length>0||e(t.target).parents(".colorpicker").length>0){return false}}this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible");e(window).off("resize.colorpicker",this.reposition);e(window.document).off({"mousedown.colorpicker":this.hide});this.update();this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(e){e=e||this.color.toString(false,this.format);this.element.data("color",e);return e},updateInput:function(e){e=e||this.color.toString(false,this.format);if(this.input!==false){this.input.prop("value",e);this.input.trigger("change")}return e},updatePicker:function(e){if(typeof e!=="undefined"){this.color=this.createColor(e)}var t=this.options.horizontal===false?this.options.sliders:this.options.slidersHorz;var i=this.picker.find("i");if(i.length===0){return}if(this.options.horizontal===false){t=this.options.sliders;i.eq(1).css("top",t.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",t.alpha.maxTop*(1-this.color.value.a))}else{t=this.options.slidersHorz;i.eq(1).css("left",t.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",t.alpha.maxLeft*(1-this.color.value.a))}i.eq(0).css({top:t.saturation.maxTop-this.color.value.b*t.saturation.maxTop,left:this.color.value.s*t.saturation.maxLeft});this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(true,this.color.value.h,1,1,1));this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex(true));this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(true,this.format));return e},updateComponent:function(e){var t;if(typeof e!=="undefined"){t=this.createColor(e)}else{t=this.color}if(this.component!==false){var i=this.component.find("i").eq(0);if(i.length>0){i.css({backgroundColor:t.toString(true,this.format)})}else{this.component.css({backgroundColor:t.toString(true,this.format)})}}return t.toString(false,this.format)},update:function(e){var t;if(this.getValue(false)!==false||e===true){t=this.updateComponent();this.updateInput(t);this.updateData(t);this.updatePicker()}return t},setValue:function(e){this.color=this.createColor(e);this.update(true);this.element.trigger({type:"changeColor",color:this.color,value:e})},createColor:function(e){return new t(e?e:null,this.options.colorSelectors,this.options.fallbackColor?this.options.fallbackColor:this.color,this.options.fallbackFormat,this.options.hexNumberSignPrefix)},getValue:function(e){e=typeof e==="undefined"?this.options.fallbackColor:e;var t;if(this.hasInput()){t=this.input.val()}else{t=this.element.data("color")}if(t===undefined||t===""||t===null){t=e}return t},hasInput:function(){return this.input!==false},isDisabled:function(){return this.disabled},disable:function(){if(this.hasInput()){this.input.prop("disabled",true)}this.disabled=true;this.element.trigger({type:"disable",color:this.color,value:this.getValue()});return true},enable:function(){if(this.hasInput()){this.input.prop("disabled",false)}this.disabled=false;this.element.trigger({type:"enable",color:this.color,value:this.getValue()});return true},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(t){if(!t.pageX&&!t.pageY&&t.originalEvent&&t.originalEvent.touches){t.pageX=t.originalEvent.touches[0].pageX;t.pageY=t.originalEvent.touches[0].pageY}t.stopPropagation();t.preventDefault();var i=e(t.target);var n=i.closest("div");var r=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!n.is(".colorpicker")){if(n.is(".colorpicker-saturation")){this.currentSlider=e.extend({},r.saturation)}else if(n.is(".colorpicker-hue")){this.currentSlider=e.extend({},r.hue)}else if(n.is(".colorpicker-alpha")){this.currentSlider=e.extend({},r.alpha)}else{return false}var o=n.offset();this.currentSlider.guide=n.find("i")[0].style;this.currentSlider.left=t.pageX-o.left;this.currentSlider.top=t.pageY-o.top;this.mousePointer={left:t.pageX,top:t.pageY};e(window.document).on({"mousemove.colorpicker":e.proxy(this.mousemove,this),"touchmove.colorpicker":e.proxy(this.mousemove,this),"mouseup.colorpicker":e.proxy(this.mouseup,this),"touchend.colorpicker":e.proxy(this.mouseup,this)}).trigger("mousemove")}return false},mousemove:function(e){if(!e.pageX&&!e.pageY&&e.originalEvent&&e.originalEvent.touches){e.pageX=e.originalEvent.touches[0].pageX;e.pageY=e.originalEvent.touches[0].pageY}e.stopPropagation();e.preventDefault();var t=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((e.pageX||this.mousePointer.left)-this.mousePointer.left)));var i=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((e.pageY||this.mousePointer.top)-this.mousePointer.top)));this.currentSlider.guide.left=t+"px";this.currentSlider.guide.top=i+"px";if(this.currentSlider.callLeft){this.color[this.currentSlider.callLeft].call(this.color,t/this.currentSlider.maxLeft)}if(this.currentSlider.callTop){this.color[this.currentSlider.callTop].call(this.color,i/this.currentSlider.maxTop)}if(this.options.format===false&&(this.currentSlider.callTop==="setAlpha"||this.currentSlider.callLeft==="setAlpha")){if(this.color.value.a!==1){this.format="rgba";this.color.origFormat="rgba"}else{this.format="hex";this.color.origFormat="hex"}}this.update(true);this.element.trigger({type:"changeColor",color:this.color});return false},mouseup:function(t){t.stopPropagation();t.preventDefault();e(window.document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup});return false},change:function(e){this.color=this.createColor(this.input.val());if(this.color.origFormat&&this.options.format===false){this.format=this.color.origFormat}if(this.getValue(false)!==false){this.updateData();this.updateComponent();this.updatePicker()}this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})},keyup:function(e){if(e.keyCode===38){if(this.color.value.a<1){this.color.value.a=Math.round((this.color.value.a+.01)*100)/100}this.update(true)}else if(e.keyCode===40){if(this.color.value.a>0){this.color.value.a=Math.round((this.color.value.a-.01)*100)/100}this.update(true)}this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})}};e.colorpicker=n;e.fn.colorpicker=function(t){var i=Array.prototype.slice.call(arguments,1),r=this.length===1,o=null;var a=this.each((function(){var r=e(this),a=r.data("colorpicker"),s=typeof t==="object"?t:{};if(!a){a=new n(this,s);r.data("colorpicker",a)}if(typeof t==="string"){if(e.isFunction(a[t])){o=a[t].apply(a,i)}else{if(i.length){a[t]=i[0]}o=a[t]}}else{o=r}}));return r?o:a};e.fn.colorpicker.constructor=n}));!function(){var e={version:"3.5.5"};var t=[].slice,i=function(e){return t.call(e)};var n=this.document;function r(e){return e&&(e.ownerDocument||e.document||e).documentElement}function o(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(n){try{i(n.documentElement.childNodes)[0].nodeType}catch(e){i=function(e){var t=e.length,i=new Array(t);while(t--)i[t]=e[t];return i}}}if(!Date.now)Date.now=function(){return+new Date};if(n){try{n.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var a=this.Element.prototype,s=a.setAttribute,l=a.setAttributeNS,u=this.CSSStyleDeclaration.prototype,c=u.setProperty;a.setAttribute=function(e,t){s.call(this,e,t+"")};a.setAttributeNS=function(e,t,i){l.call(this,e,t,i+"")};u.setProperty=function(e,t,i){c.call(this,e,t+"",i)}}}e.ascending=d;function d(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}e.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};e.min=function(e,t){var i=-1,n=e.length,r,o;if(arguments.length===1){while(++i<n)if((o=e[i])!=null&&o>=o){r=o;break}while(++i<n)if((o=e[i])!=null&&r>o)r=o}else{while(++i<n)if((o=t.call(e,e[i],i))!=null&&o>=o){r=o;break}while(++i<n)if((o=t.call(e,e[i],i))!=null&&r>o)r=o}return r};e.max=function(e,t){var i=-1,n=e.length,r,o;if(arguments.length===1){while(++i<n)if((o=e[i])!=null&&o>=o){r=o;break}while(++i<n)if((o=e[i])!=null&&o>r)r=o}else{while(++i<n)if((o=t.call(e,e[i],i))!=null&&o>=o){r=o;break}while(++i<n)if((o=t.call(e,e[i],i))!=null&&o>r)r=o}return r};e.extent=function(e,t){var i=-1,n=e.length,r,o,a;if(arguments.length===1){while(++i<n)if((o=e[i])!=null&&o>=o){r=a=o;break}while(++i<n)if((o=e[i])!=null){if(r>o)r=o;if(a<o)a=o}}else{while(++i<n)if((o=t.call(e,e[i],i))!=null&&o>=o){r=a=o;break}while(++i<n)if((o=t.call(e,e[i],i))!=null){if(r>o)r=o;if(a<o)a=o}}return[r,a]};function f(e){return e===null?NaN:+e}function p(e){return!isNaN(e)}e.sum=function(e,t){var i=0,n=e.length,r,o=-1;if(arguments.length===1){while(++o<n)if(p(r=+e[o]))i+=r}else{while(++o<n)if(p(r=+t.call(e,e[o],o)))i+=r}return i};e.mean=function(e,t){var i=0,n=e.length,r,o=-1,a=n;if(arguments.length===1){while(++o<n)if(p(r=f(e[o])))i+=r;else--a}else{while(++o<n)if(p(r=f(t.call(e,e[o],o))))i+=r;else--a}if(a)return i/a};e.quantile=function(e,t){var i=(e.length-1)*t+1,n=Math.floor(i),r=+e[n-1],o=i-n;return o?r+o*(e[n]-r):r};e.median=function(t,i){var n=[],r=t.length,o,a=-1;if(arguments.length===1){while(++a<r)if(p(o=f(t[a])))n.push(o)}else{while(++a<r)if(p(o=f(i.call(t,t[a],a))))n.push(o)}if(n.length)return e.quantile(n.sort(d),.5)};e.variance=function(e,t){var i=e.length,n=0,r,o,a=0,s=-1,l=0;if(arguments.length===1){while(++s<i){if(p(r=f(e[s]))){o=r-n;n+=o/++l;a+=o*(r-n)}}}else{while(++s<i){if(p(r=f(t.call(e,e[s],s)))){o=r-n;n+=o/++l;a+=o*(r-n)}}}if(l>1)return a/(l-1)};e.deviation=function(){var t=e.variance.apply(this,arguments);return t?Math.sqrt(t):t};function h(e){return{left:function(t,i,n,r){if(arguments.length<3)n=0;if(arguments.length<4)r=t.length;while(n<r){var o=n+r>>>1;if(e(t[o],i)<0)n=o+1;else r=o}return n},right:function(t,i,n,r){if(arguments.length<3)n=0;if(arguments.length<4)r=t.length;while(n<r){var o=n+r>>>1;if(e(t[o],i)>0)r=o;else n=o+1}return n}}}var g=h(d);e.bisectLeft=g.left;e.bisect=e.bisectRight=g.right;e.bisector=function(e){return h(e.length===1?function(t,i){return d(e(t),i)}:e)};e.shuffle=function(e,t,i){if((n=arguments.length)<3){i=e.length;if(n<2)t=0}var n=i-t,r,o;while(n){o=Math.random()*n--|0;r=e[n+t],e[n+t]=e[o+t],e[o+t]=r}return e};e.permute=function(e,t){var i=t.length,n=new Array(i);while(i--)n[i]=e[t[i]];return n};e.pairs=function(e){var t=0,i=e.length-1,n,r=e[0],o=new Array(i<0?0:i);while(t<i)o[t]=[n=r,r=e[++t]];return o};e.zip=function(){if(!(o=arguments.length))return[];for(var t=-1,i=e.min(arguments,m),n=new Array(i);++t<i;){for(var r=-1,o,a=n[t]=new Array(o);++r<o;){a[r]=arguments[r][t]}}return n};function m(e){return e.length}e.transpose=function(t){return e.zip.apply(e,t)};e.keys=function(e){var t=[];for(var i in e)t.push(i);return t};e.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t};e.entries=function(e){var t=[];for(var i in e)t.push({key:i,value:e[i]});return t};e.merge=function(e){var t=e.length,i,n=-1,r=0,o,a;while(++n<t)r+=e[n].length;o=new Array(r);while(--t>=0){a=e[t];i=a.length;while(--i>=0){o[--r]=a[i]}}return o};var v=Math.abs;e.range=function(e,t,i){if(arguments.length<3){i=1;if(arguments.length<2){t=e;e=0}}if((t-e)/i===Infinity)throw new Error("infinite range");var n=[],r=y(v(i)),o=-1,a;e*=r,t*=r,i*=r;if(i<0)while((a=e+i*++o)>t)n.push(a/r);else while((a=e+i*++o)<t)n.push(a/r);return n};function y(e){var t=1;while(e*t%1)t*=10;return t}function b(e,t){for(var i in t){Object.defineProperty(e.prototype,i,{value:t[i],enumerable:false})}}e.map=function(e,t){var i=new _;if(e instanceof _){e.forEach((function(e,t){i.set(e,t)}))}else if(Array.isArray(e)){var n=-1,r=e.length,o;if(arguments.length===1)while(++n<r)i.set(n,e[n]);else while(++n<r)i.set(t.call(e,o=e[n],n),o)}else{for(var a in e)i.set(a,e[a])}return i};function _(){this._=Object.create(null)}var w="__proto__",C="\0";b(_,{has:x,get:function(e){return this._[A(e)]},set:function(e,t){return this._[A(e)]=t},remove:T,keys:S,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:E(t),value:this._[t]});return e},size:D,empty:k,forEach:function(e){for(var t in this._)e.call(this,E(t),this._[t])}});function A(e){return(e+="")===w||e[0]===C?C+e:e}function E(e){return(e+="")[0]===C?e.slice(1):e}function x(e){return A(e)in this._}function T(e){return(e=A(e))in this._&&delete this._[e]}function S(){var e=[];for(var t in this._)e.push(E(t));return e}function D(){var e=0;for(var t in this._)++e;return e}function k(){for(var e in this._)return false;return true}e.nest=function(){var t={},i=[],n=[],r,o;function a(e,n,s){if(s>=i.length)return o?o.call(t,n):r?n.sort(r):n;var l=-1,u=n.length,c=i[s++],d,f,p,h=new _,g;while(++l<u){if(g=h.get(d=c(f=n[l]))){g.push(f)}else{h.set(d,[f])}}if(e){f=e();p=function(t,i){f.set(t,a(e,i,s))}}else{f={};p=function(t,i){f[t]=a(e,i,s)}}h.forEach(p);return f}function s(e,t){if(t>=i.length)return e;var r=[],o=n[t++];e.forEach((function(e,i){r.push({key:e,values:s(i,t)})}));return o?r.sort((function(e,t){return o(e.key,t.key)})):r}t.map=function(e,t){return a(t,e,0)};t.entries=function(t){return s(a(e.map,t,0),0)};t.key=function(e){i.push(e);return t};t.sortKeys=function(e){n[i.length-1]=e;return t};t.sortValues=function(e){r=e;return t};t.rollup=function(e){o=e;return t};return t};e.set=function(e){var t=new O;if(e)for(var i=0,n=e.length;i<n;++i)t.add(e[i]);return t};function O(){this._=Object.create(null)}b(O,{has:x,add:function(e){this._[A(e+="")]=true;return e},remove:T,values:S,size:D,empty:k,forEach:function(e){for(var t in this._)e.call(this,E(t))}});e.behavior={};function R(e){return e}e.rebind=function(e,t){var i=1,n=arguments.length,r;while(++i<n)e[r=arguments[i]]=N(e,t,t[r]);return e};function N(e,t,i){return function(){var n=i.apply(t,arguments);return n===t?e:n}}function P(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var i=0,n=I.length;i<n;++i){var r=I[i]+t;if(r in e)return r}}var I=["webkit","ms","moz","Moz","o","O"];function M(){}e.dispatch=function(){var e=new L,t=-1,i=arguments.length;while(++t<i)e[arguments[t]]=F(e);return e};function L(){}L.prototype.on=function(e,t){var i=e.indexOf("."),n="";if(i>=0){n=e.slice(i+1);e=e.slice(0,i)}if(e)return arguments.length<2?this[e].on(n):this[e].on(n,t);if(arguments.length===2){if(t==null)for(e in this){if(this.hasOwnProperty(e))this[e].on(n,null)}return this}};function F(e){var t=[],i=new _;function n(){var i=t,n=-1,r=i.length,o;while(++n<r)if(o=i[n].on)o.apply(this,arguments);return e}n.on=function(n,r){var o=i.get(n),a;if(arguments.length<2)return o&&o.on;if(o){o.on=null;t=t.slice(0,a=t.indexOf(o)).concat(t.slice(a+1));i.remove(n)}if(r)t.push(i.set(n,{on:r}));return e};return n}e.event=null;function G(){e.event.preventDefault()}function $(){var t=e.event,i;while(i=t.sourceEvent)t=i;return t}function W(t){var i=new L,n=0,r=arguments.length;while(++n<r)i[arguments[n]]=F(i);i.of=function(n,r){return function(o){try{var a=o.sourceEvent=e.event;o.target=t;e.event=o;i[o.type].apply(n,r)}finally{e.event=a}}};return i}e.requote=function(e){return e.replace(H,"\\$&")};var H=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var j={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)e[i]=t[i]};function B(e){j(e,Y);return e}var V=function(e,t){return t.querySelector(e)},z=function(e,t){return t.querySelectorAll(e)},U=function(e,t){var i=e.matches||e[P(e,"matchesSelector")];U=function(e,t){return i.call(e,t)};return U(e,t)};if(typeof Sizzle==="function"){V=function(e,t){return Sizzle(e,t)[0]||null};z=Sizzle;U=Sizzle.matchesSelector}e.selection=function(){return e.select(n.documentElement)};var Y=e.selection.prototype=[];Y.select=function(e){var t=[],i,n,r,o;e=q(e);for(var a=-1,s=this.length;++a<s;){t.push(i=[]);i.parentNode=(r=this[a]).parentNode;for(var l=-1,u=r.length;++l<u;){if(o=r[l]){i.push(n=e.call(o,o.__data__,l,a));if(n&&"__data__"in o)n.__data__=o.__data__}else{i.push(null)}}}return B(t)};function q(e){return typeof e==="function"?e:function(){return V(e,this)}}Y.selectAll=function(e){var t=[],n,r;e=X(e);for(var o=-1,a=this.length;++o<a;){for(var s=this[o],l=-1,u=s.length;++l<u;){if(r=s[l]){t.push(n=i(e.call(r,r.__data__,l,o)));n.parentNode=r}}}return B(t)};function X(e){return typeof e==="function"?e:function(){return z(e,this)}}var K={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};e.ns={prefix:K,qualify:function(e){var t=e.indexOf(":"),i=e;if(t>=0){i=e.slice(0,t);e=e.slice(t+1)}return K.hasOwnProperty(i)?{space:K[i],local:e}:e}};Y.attr=function(t,i){if(arguments.length<2){if(typeof t==="string"){var n=this.node();t=e.ns.qualify(t);return t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(i in t)this.each(Q(i,t[i]));return this}return this.each(Q(t,i))};function Q(t,i){t=e.ns.qualify(t);function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function o(){this.setAttribute(t,i)}function a(){this.setAttributeNS(t.space,t.local,i)}function s(){var e=i.apply(this,arguments);if(e==null)this.removeAttribute(t);else this.setAttribute(t,e)}function l(){var e=i.apply(this,arguments);if(e==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,e)}return i==null?t.local?r:n:typeof i==="function"?t.local?l:s:t.local?a:o}function Z(e){return e.trim().replace(/\s+/g," ")}Y.classed=function(e,t){if(arguments.length<2){if(typeof e==="string"){var i=this.node(),n=(e=ee(e)).length,r=-1;if(t=i.classList){while(++r<n)if(!t.contains(e[r]))return false}else{t=i.getAttribute("class");while(++r<n)if(!J(e[r]).test(t))return false}return true}for(t in e)this.each(te(t,e[t]));return this}return this.each(te(e,t))};function J(t){return new RegExp("(?:^|\\s+)"+e.requote(t)+"(?:\\s+|$)","g")}function ee(e){return(e+"").trim().split(/^|\s+/)}function te(e,t){e=ee(e).map(ie);var i=e.length;function n(){var n=-1;while(++n<i)e[n](this,t)}function r(){var n=-1,r=t.apply(this,arguments);while(++n<i)e[n](this,r)}return typeof t==="function"?r:n}function ie(e){var t=J(e);return function(i,n){if(r=i.classList)return n?r.add(e):r.remove(e);var r=i.getAttribute("class")||"";if(n){t.lastIndex=0;if(!t.test(r))i.setAttribute("class",Z(r+" "+e))}else{i.setAttribute("class",Z(r.replace(t," ")))}}}Y.style=function(e,t,i){var n=arguments.length;if(n<3){if(typeof e!=="string"){if(n<2)t="";for(i in e)this.each(ne(i,e[i],t));return this}if(n<2){var r=this.node();return o(r).getComputedStyle(r,null).getPropertyValue(e)}i=""}return this.each(ne(e,t,i))};function ne(e,t,i){function n(){this.style.removeProperty(e)}function r(){this.style.setProperty(e,t,i)}function o(){var n=t.apply(this,arguments);if(n==null)this.style.removeProperty(e);else this.style.setProperty(e,n,i)}return t==null?n:typeof t==="function"?o:r}Y.property=function(e,t){if(arguments.length<2){if(typeof e==="string")return this.node()[e];for(t in e)this.each(re(t,e[t]));return this}return this.each(re(e,t))};function re(e,t){function i(){delete this[e]}function n(){this[e]=t}function r(){var i=t.apply(this,arguments);if(i==null)delete this[e];else this[e]=i}return t==null?i:typeof t==="function"?r:n}Y.text=function(e){return arguments.length?this.each(typeof e==="function"?function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent};Y.html=function(e){return arguments.length?this.each(typeof e==="function"?function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML};Y.append=function(e){e=oe(e);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))};function oe(t){function i(){var e=this.ownerDocument,i=this.namespaceURI;return i?e.createElementNS(i,t):e.createElement(t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return typeof t==="function"?t:(t=e.ns.qualify(t)).local?n:i}Y.insert=function(e,t){e=oe(e);t=q(t);return this.select((function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)}))};Y.remove=function(){return this.each(ae)};function ae(){var e=this.parentNode;if(e)e.removeChild(this)}Y.data=function(e,t){var i=-1,n=this.length,r,o;if(!arguments.length){e=new Array(n=(r=this[0]).length);while(++i<n){if(o=r[i]){e[i]=o.__data__}}return e}function a(e,i){var n,r=e.length,o=i.length,a=Math.min(r,o),c=new Array(o),d=new Array(o),f=new Array(r),p,h;if(t){var g=new _,m=new Array(r),v;for(n=-1;++n<r;){if(g.has(v=t.call(p=e[n],p.__data__,n))){f[n]=p}else{g.set(v,p)}m[n]=v}for(n=-1;++n<o;){if(!(p=g.get(v=t.call(i,h=i[n],n)))){d[n]=se(h)}else if(p!==true){c[n]=p;p.__data__=h}g.set(v,true)}for(n=-1;++n<r;){if(g.get(m[n])!==true){f[n]=e[n]}}}else{for(n=-1;++n<a;){p=e[n];h=i[n];if(p){p.__data__=h;c[n]=p}else{d[n]=se(h)}}for(;n<o;++n){d[n]=se(i[n])}for(;n<r;++n){f[n]=e[n]}}d.update=c;d.parentNode=c.parentNode=f.parentNode=e.parentNode;s.push(d);l.push(c);u.push(f)}var s=de([]),l=B([]),u=B([]);if(typeof e==="function"){while(++i<n){a(r=this[i],e.call(r,r.parentNode.__data__,i))}}else{while(++i<n){a(r=this[i],e)}}l.enter=function(){return s};l.exit=function(){return u};return l};function se(e){return{__data__:e}}Y.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")};Y.filter=function(e){var t=[],i,n,r;if(typeof e!=="function")e=le(e);for(var o=0,a=this.length;o<a;o++){t.push(i=[]);i.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;s<l;s++){if((r=n[s])&&e.call(r,r.__data__,s,o)){i.push(r)}}}return B(t)};function le(e){return function(){return U(this,e)}}Y.order=function(){for(var e=-1,t=this.length;++e<t;){for(var i=this[e],n=i.length-1,r=i[n],o;--n>=0;){if(o=i[n]){if(r&&r!==o.nextSibling)r.parentNode.insertBefore(o,r);r=o}}}return this};Y.sort=function(e){e=ue.apply(this,arguments);for(var t=-1,i=this.length;++t<i;)this[t].sort(e);return this.order()};function ue(e){if(!arguments.length)e=d;return function(t,i){return t&&i?e(t.__data__,i.__data__):!t-!i}}Y.each=function(e){return ce(this,(function(t,i,n){e.call(t,t.__data__,i,n)}))};function ce(e,t){for(var i=0,n=e.length;i<n;i++){for(var r=e[i],o=0,a=r.length,s;o<a;o++){if(s=r[o])t(s,o,i)}}return e}Y.call=function(e){var t=i(arguments);e.apply(t[0]=this,t);return this};Y.empty=function(){return!this.node()};Y.node=function(){for(var e=0,t=this.length;e<t;e++){for(var i=this[e],n=0,r=i.length;n<r;n++){var o=i[n];if(o)return o}}return null};Y.size=function(){var e=0;ce(this,(function(){++e}));return e};function de(e){j(e,fe);return e}var fe=[];e.selection.enter=de;e.selection.enter.prototype=fe;fe.append=Y.append;fe.empty=Y.empty;fe.node=Y.node;fe.call=Y.call;fe.size=Y.size;fe.select=function(e){var t=[],i,n,r,o,a;for(var s=-1,l=this.length;++s<l;){r=(o=this[s]).update;t.push(i=[]);i.parentNode=o.parentNode;for(var u=-1,c=o.length;++u<c;){if(a=o[u]){i.push(r[u]=n=e.call(o.parentNode,a.__data__,u,s));n.__data__=a.__data__}else{i.push(null)}}}return B(t)};fe.insert=function(e,t){if(arguments.length<2)t=pe(this);return Y.insert.call(this,e,t)};function pe(e){var t,i;return function(n,r,o){var a=e[o].update,s=a.length,l;if(o!=i)i=o,t=0;if(r>=t)t=r+1;while(!(l=a[t])&&++t<s);return l}}e.select=function(e){var t;if(typeof e==="string"){t=[V(e,n)];t.parentNode=n.documentElement}else{t=[e];t.parentNode=r(e)}return B([t])};e.selectAll=function(e){var t;if(typeof e==="string"){t=i(z(e,n));t.parentNode=n.documentElement}else{t=e;t.parentNode=null}return B([t])};Y.on=function(e,t,i){var n=arguments.length;if(n<3){if(typeof e!=="string"){if(n<2)t=false;for(i in e)this.each(he(i,e[i],t));return this}if(n<2)return(n=this.node()["__on"+e])&&n._;i=false}return this.each(he(e,t,i))};function he(t,n,r){var o="__on"+t,a=t.indexOf("."),s=me;if(a>0)t=t.slice(0,a);var l=ge.get(t);if(l)t=l,s=ve;function u(){var e=this[o];if(e){this.removeEventListener(t,e,e.$);delete this[o]}}function c(){var e=s(n,i(arguments));u.call(this);this.addEventListener(t,this[o]=e,e.$=r);e._=n}function d(){var i=new RegExp("^__on([^.]+)"+e.requote(t)+"$"),n;for(var r in this){if(n=r.match(i)){var o=this[r];this.removeEventListener(n[1],o,o.$);delete this[r]}}}return a?n?c:u:n?M:d}var ge=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(n){ge.forEach((function(e){if("on"+e in n)ge.remove(e)}))}function me(t,i){return function(n){var r=e.event;e.event=n;i[0]=this.__data__;try{t.apply(this,i)}finally{e.event=r}}}function ve(e,t){var i=me(e,t);return function(e){var t=this,n=e.relatedTarget;if(!n||n!==t&&!(n.compareDocumentPosition(t)&8)){i.call(t,e)}}}var ye,be=0;function _e(t){var i=".dragsuppress-"+ ++be,n="click"+i,a=e.select(o(t)).on("touchmove"+i,G).on("dragstart"+i,G).on("selectstart"+i,G);if(ye==null){ye="onselectstart"in t?false:P(t.style,"userSelect")}if(ye){var s=r(t).style,l=s[ye];s[ye]="none"}return function(e){a.on(i,null);if(ye)s[ye]=l;if(e){var t=function(){a.on(n,null)};a.on(n,(function(){G();t()}),true);setTimeout(t,0)}}}e.mouse=function(e){return Ce(e,$())};var we=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ce(t,i){if(i.changedTouches)i=i.changedTouches[0];var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(we<0){var a=o(t);if(a.scrollX||a.scrollY){n=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var s=n[0][0].getScreenCTM();we=!(s.f||s.e);n.remove()}}if(we)r.x=i.pageX,r.y=i.pageY;else r.x=i.clientX,r.y=i.clientY;r=r.matrixTransform(t.getScreenCTM().inverse());return[r.x,r.y]}var l=t.getBoundingClientRect();return[i.clientX-l.left-t.clientLeft,i.clientY-l.top-t.clientTop]}e.touch=function(e,t,i){if(arguments.length<3)i=t,t=$().changedTouches;if(t)for(var n=0,r=t.length,o;n<r;++n){if((o=t[n]).identifier===i){return Ce(e,o)}}};e.behavior.drag=function(){var t=W(a,"drag","dragstart","dragend"),i=null,n=s(M,e.mouse,o,"mousemove","mouseup"),r=s(Ae,e.touch,R,"touchmove","touchend");function a(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function s(n,r,o,a,s){return function(){var l=this,u=e.event.target,c=l.parentNode,d=t.of(l,arguments),f=0,p=n(),h=".drag"+(p==null?"":"-"+p),g,m=e.select(o(u)).on(a+h,b).on(s+h,_),v=_e(u),y=r(c,p);if(i){g=i.apply(l,arguments);g=[g.x-y[0],g.y-y[1]]}else{g=[0,0]}d({type:"dragstart"});function b(){var e=r(c,p),t,i;if(!e)return;t=e[0]-y[0];i=e[1]-y[1];f|=t|i;y=e;d({type:"drag",x:e[0]+g[0],y:e[1]+g[1],dx:t,dy:i})}function _(){if(!r(c,p))return;m.on(a+h,null).on(s+h,null);v(f&&e.event.target===u);d({type:"dragend"})}}}a.origin=function(e){if(!arguments.length)return i;i=e;return a};return e.rebind(a,t,"on")};function Ae(){return e.event.changedTouches[0].identifier}e.touches=function(e,t){if(arguments.length<2)t=$().touches;return t?i(t).map((function(t){var i=Ce(e,t);i.identifier=t.identifier;return i})):[]};var Ee=1e-6,xe=Ee*Ee,Te=Math.PI,Se=2*Te,De=Se-Ee,ke=Te/2,Oe=Te/180,Re=180/Te;function Ne(e){return e>0?1:e<0?-1:0}function Pe(e,t,i){return(t[0]-e[0])*(i[1]-e[1])-(t[1]-e[1])*(i[0]-e[0])}function Ie(e){return e>1?0:e<-1?Te:Math.acos(e)}function Me(e){return e>1?ke:e<-1?-ke:Math.asin(e)}function Le(e){return((e=Math.exp(e))-1/e)/2}function Fe(e){return((e=Math.exp(e))+1/e)/2}function Ge(e){return((e=Math.exp(2*e))-1)/(e+1)}function $e(e){return(e=Math.sin(e/2))*e}var We=Math.SQRT2,He=2,je=4;e.interpolateZoom=function(e,t){var i=e[0],n=e[1],r=e[2],o=t[0],a=t[1],s=t[2];var l=o-i,u=a-n,c=l*l+u*u,d=Math.sqrt(c),f=(s*s-r*r+je*c)/(2*r*He*d),p=(s*s-r*r-je*c)/(2*s*He*d),h=Math.log(Math.sqrt(f*f+1)-f),g=Math.log(Math.sqrt(p*p+1)-p),m=g-h,v=(m||Math.log(s/r))/We;function y(e){var t=e*v;if(m){var o=Fe(h),a=r/(He*d)*(o*Ge(We*t+h)-Le(h));return[i+a*l,n+a*u,r*o/Fe(We*t+h)]}return[i+e*l,n+e*u,r*Math.exp(We*t)]}y.duration=v*1e3;return y};e.behavior.zoom=function(){var t={x:0,y:0,k:1},i,r,a,s=[960,500],l=Be,u=250,c=0,d="mousedown.zoom",f="mousemove.zoom",p="mouseup.zoom",h,g="touchstart.zoom",m,v=W(C,"zoomstart","zoom","zoomend"),y,b,_,w;if(!ze){ze="onwheel"in n?(Ve=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in n?(Ve=function(){return e.event.wheelDelta},"mousewheel"):(Ve=function(){return-e.event.detail},"MozMousePixelScroll")}function C(e){e.on(d,N).on(ze+".zoom",I).on("dblclick.zoom",M).on(g,P)}C.event=function(i){i.each((function(){var i=v.of(this,arguments),n=t;if(El){e.select(this).transition().each("start.zoom",(function(){t=this.__chart__||{x:0,y:0,k:1};k(i)})).tween("zoom:zoom",(function(){var o=s[0],a=s[1],l=r?r[0]:o/2,u=r?r[1]:a/2,c=e.interpolateZoom([(l-t.x)/t.k,(u-t.y)/t.k,o/t.k],[(l-n.x)/n.k,(u-n.y)/n.k,o/n.k]);return function(e){var n=c(e),r=o/n[2];this.__chart__=t={x:l-n[0]*r,y:u-n[1]*r,k:r};O(i)}})).each("interrupt.zoom",(function(){R(i)})).each("end.zoom",(function(){R(i)}))}else{this.__chart__=t;k(i);O(i);R(i)}}))};C.translate=function(e){if(!arguments.length)return[t.x,t.y];t={x:+e[0],y:+e[1],k:t.k};D();return C};C.scale=function(e){if(!arguments.length)return t.k;t={x:t.x,y:t.y,k:+e};D();return C};C.scaleExtent=function(e){if(!arguments.length)return l;l=e==null?Be:[+e[0],+e[1]];return C};C.center=function(e){if(!arguments.length)return a;a=e&&[+e[0],+e[1]];return C};C.size=function(e){if(!arguments.length)return s;s=e&&[+e[0],+e[1]];return C};C.duration=function(e){if(!arguments.length)return u;u=+e;return C};C.x=function(e){if(!arguments.length)return b;b=e;y=e.copy();t={x:0,y:0,k:1};return C};C.y=function(e){if(!arguments.length)return w;w=e;_=e.copy();t={x:0,y:0,k:1};return C};function A(e){return[(e[0]-t.x)/t.k,(e[1]-t.y)/t.k]}function E(e){return[e[0]*t.k+t.x,e[1]*t.k+t.y]}function x(e){t.k=Math.max(l[0],Math.min(l[1],e))}function T(e,i){i=E(i);t.x+=e[0]-i[0];t.y+=e[1]-i[1]}function S(i,n,o,a){i.__chart__={x:t.x,y:t.y,k:t.k};x(Math.pow(2,a));T(r=n,o);i=e.select(i);if(u>0)i=i.transition().duration(u);i.call(C.event)}function D(){if(b)b.domain(y.range().map((function(e){return(e-t.x)/t.k})).map(y.invert));if(w)w.domain(_.range().map((function(e){return(e-t.y)/t.k})).map(_.invert))}function k(e){if(!c++)e({type:"zoomstart"})}function O(e){D();e({type:"zoom",scale:t.k,translate:[t.x,t.y]})}function R(e){if(! --c)e({type:"zoomend"});r=null}function N(){var t=this,i=e.event.target,n=v.of(t,arguments),r=0,a=e.select(o(t)).on(f,u).on(p,c),s=A(e.mouse(t)),l=_e(t);bl.call(t);k(n);function u(){r=1;T(e.mouse(t),s);O(n)}function c(){a.on(f,null).on(p,null);l(r&&e.event.target===i);R(n)}}function P(){var i=this,n=v.of(i,arguments),r={},o=0,a,s=".zoom-"+e.event.changedTouches[0].identifier,l="touchmove"+s,u="touchend"+s,c=[],f=e.select(i),p=_e(i);y();k(n);f.on(d,null).on(g,y);function h(){var n=e.touches(i);a=t.k;n.forEach((function(e){if(e.identifier in r)r[e.identifier]=A(e)}));return n}function y(){var n=e.event.target;e.select(n).on(l,b).on(u,_);c.push(n);var a=e.event.changedTouches;for(var s=0,d=a.length;s<d;++s){r[a[s].identifier]=null}var f=h(),p=Date.now();if(f.length===1){if(p-m<500){var g=f[0];S(i,g,r[g.identifier],Math.floor(Math.log(t.k)/Math.LN2)+1);G()}m=p}else if(f.length>1){var g=f[0],v=f[1],y=g[0]-v[0],w=g[1]-v[1];o=y*y+w*w}}function b(){var t=e.touches(i),s,l,u,c;bl.call(i);for(var d=0,f=t.length;d<f;++d,c=null){u=t[d];if(c=r[u.identifier]){if(l)break;s=u,l=c}}if(c){var p=(p=u[0]-s[0])*p+(p=u[1]-s[1])*p,h=o&&Math.sqrt(p/o);s=[(s[0]+u[0])/2,(s[1]+u[1])/2];l=[(l[0]+c[0])/2,(l[1]+c[1])/2];x(h*a)}m=null;T(s,l);O(n)}function _(){if(e.event.touches.length){var t=e.event.changedTouches;for(var i=0,o=t.length;i<o;++i){delete r[t[i].identifier]}for(var a in r){return void h()}}e.selectAll(c).on(s,null);f.on(d,N).on(g,P);p();R(n)}}function I(){var n=v.of(this,arguments);if(h)clearTimeout(h);else i=A(r=a||e.mouse(this)),bl.call(this),k(n);h=setTimeout((function(){h=null;R(n)}),50);G();x(Math.pow(2,Ve()*.002)*t.k);T(r,i);O(n)}function M(){var i=e.mouse(this),n=Math.log(t.k)/Math.LN2;S(this,i,A(i),e.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return e.rebind(C,v,"on")};var Be=[0,Infinity],Ve,ze;e.color=Ue;function Ue(){}Ue.prototype.toString=function(){return this.rgb()+""};e.hsl=Ye;function Ye(e,t,i){return this instanceof Ye?void(this.h=+e,this.s=+t,this.l=+i):arguments.length<2?e instanceof Ye?new Ye(e.h,e.s,e.l):gt(""+e,mt,Ye):new Ye(e,t,i)}var qe=Ye.prototype=new Ue;qe.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);return new Ye(this.h,this.s,this.l/e)};qe.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new Ye(this.h,this.s,e*this.l)};qe.rgb=function(){return Xe(this.h,this.s,this.l)};function Xe(e,t,i){var n,r;e=isNaN(e)?0:(e%=360)<0?e+360:e;t=isNaN(t)?0:t<0?0:t>1?1:t;i=i<0?0:i>1?1:i;r=i<=.5?i*(1+t):i+t-i*t;n=2*i-r;function o(e){if(e>360)e-=360;else if(e<0)e+=360;if(e<60)return n+(r-n)*e/60;if(e<180)return r;if(e<240)return n+(r-n)*(240-e)/60;return n}function a(e){return Math.round(o(e)*255)}return new ct(a(e+120),a(e),a(e-120))}e.hcl=Ke;function Ke(t,i,n){return this instanceof Ke?void(this.h=+t,this.c=+i,this.l=+n):arguments.length<2?t instanceof Ke?new Ke(t.h,t.c,t.l):t instanceof Je?at(t.l,t.a,t.b):at((t=vt((t=e.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Ke(t,i,n)}var Qe=Ke.prototype=new Ue;Qe.brighter=function(e){return new Ke(this.h,this.c,Math.min(100,this.l+et*(arguments.length?e:1)))};Qe.darker=function(e){return new Ke(this.h,this.c,Math.max(0,this.l-et*(arguments.length?e:1)))};Qe.rgb=function(){return Ze(this.h,this.c,this.l).rgb()};function Ze(e,t,i){if(isNaN(e))e=0;if(isNaN(t))t=0;return new Je(i,Math.cos(e*=Oe)*t,Math.sin(e)*t)}e.lab=Je;function Je(e,t,i){return this instanceof Je?void(this.l=+e,this.a=+t,this.b=+i):arguments.length<2?e instanceof Je?new Je(e.l,e.a,e.b):e instanceof Ke?Ze(e.h,e.c,e.l):vt((e=ct(e)).r,e.g,e.b):new Je(e,t,i)}var et=18;var tt=.95047,it=1,nt=1.08883;var rt=Je.prototype=new Ue;rt.brighter=function(e){return new Je(Math.min(100,this.l+et*(arguments.length?e:1)),this.a,this.b)};rt.darker=function(e){return new Je(Math.max(0,this.l-et*(arguments.length?e:1)),this.a,this.b)};rt.rgb=function(){return ot(this.l,this.a,this.b)};function ot(e,t,i){var n=(e+16)/116,r=n+t/500,o=n-i/200;r=st(r)*tt;n=st(n)*it;o=st(o)*nt;return new ct(ut(3.2404542*r-1.5371385*n-.4985314*o),ut(-.969266*r+1.8760108*n+.041556*o),ut(.0556434*r-.2040259*n+1.0572252*o))}function at(e,t,i){return e>0?new Ke(Math.atan2(i,t)*Re,Math.sqrt(t*t+i*i),e):new Ke(NaN,NaN,e)}function st(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function lt(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ut(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}e.rgb=ct;function ct(e,t,i){return this instanceof ct?void(this.r=~~e,this.g=~~t,this.b=~~i):arguments.length<2?e instanceof ct?new ct(e.r,e.g,e.b):gt(""+e,ct,Xe):new ct(e,t,i)}function dt(e){return new ct(e>>16,e>>8&255,e&255)}function ft(e){return dt(e)+""}var pt=ct.prototype=new Ue;pt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,i=this.g,n=this.b,r=30;if(!t&&!i&&!n)return new ct(r,r,r);if(t&&t<r)t=r;if(i&&i<r)i=r;if(n&&n<r)n=r;return new ct(Math.min(255,t/e),Math.min(255,i/e),Math.min(255,n/e))};pt.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new ct(e*this.r,e*this.g,e*this.b)};pt.hsl=function(){return mt(this.r,this.g,this.b)};pt.toString=function(){return"#"+ht(this.r)+ht(this.g)+ht(this.b)};function ht(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function gt(e,t,i){var n=0,r=0,o=0,a,s,l;a=/([a-z]+)\((.*)\)/i.exec(e);if(a){s=a[2].split(",");switch(a[1]){case"hsl":{return i(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100)}case"rgb":{return t(bt(s[0]),bt(s[1]),bt(s[2]))}}}if(l=_t.get(e.toLowerCase())){return t(l.r,l.g,l.b)}if(e!=null&&e.charAt(0)==="#"&&!isNaN(l=parseInt(e.slice(1),16))){if(e.length===4){n=(l&3840)>>4;n=n>>4|n;r=l&240;r=r>>4|r;o=l&15;o=o<<4|o}else if(e.length===7){n=(l&16711680)>>16;r=(l&65280)>>8;o=l&255}}return t(n,r,o)}function mt(e,t,i){var n=Math.min(e/=255,t/=255,i/=255),r=Math.max(e,t,i),o=r-n,a,s,l=(r+n)/2;if(o){s=l<.5?o/(r+n):o/(2-r-n);if(e==r)a=(t-i)/o+(t<i?6:0);else if(t==r)a=(i-e)/o+2;else a=(e-t)/o+4;a*=60}else{a=NaN;s=l>0&&l<1?0:a}return new Ye(a,s,l)}function vt(e,t,i){e=yt(e);t=yt(t);i=yt(i);var n=lt((.4124564*e+.3575761*t+.1804375*i)/tt),r=lt((.2126729*e+.7151522*t+.072175*i)/it),o=lt((.0193339*e+.119192*t+.9503041*i)/nt);return Je(116*r-16,500*(n-r),200*(r-o))}function yt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function bt(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}var _t=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});_t.forEach((function(e,t){_t.set(e,dt(t))}));function wt(e){return typeof e==="function"?e:function(){return e}}e.functor=wt;e.xhr=Ct(R);function Ct(e){return function(t,i,n){if(arguments.length===2&&typeof i==="function")n=i,i=null;return At(t,i,e,n)}}function At(t,n,r,o){var a={},s=e.dispatch("beforesend","progress","load","error"),l={},u=new XMLHttpRequest,c=null;if(this.XDomainRequest&&!("withCredentials"in u)&&/^(http(s)?:)?\/\//.test(t))u=new XDomainRequest;"onload"in u?u.onload=u.onerror=d:u.onreadystatechange=function(){u.readyState>3&&d()};function d(){var e=u.status,t;if(!e&&xt(u)||e>=200&&e<300||e===304){try{t=r.call(a,u)}catch(e){s.error.call(a,e);return}s.load.call(a,t)}else{s.error.call(a,u)}}u.onprogress=function(t){var i=e.event;e.event=t;try{s.progress.call(a,u)}finally{e.event=i}};a.header=function(e,t){e=(e+"").toLowerCase();if(arguments.length<2)return l[e];if(t==null)delete l[e];else l[e]=t+"";return a};a.mimeType=function(e){if(!arguments.length)return n;n=e==null?null:e+"";return a};a.responseType=function(e){if(!arguments.length)return c;c=e;return a};a.response=function(e){r=e;return a};["get","post"].forEach((function(e){a[e]=function(){return a.send.apply(a,[e].concat(i(arguments)))}}));a.send=function(e,i,r){if(arguments.length===2&&typeof i==="function")r=i,i=null;u.open(e,t,true);if(n!=null&&!("accept"in l))l["accept"]=n+",*/*";if(u.setRequestHeader)for(var o in l)u.setRequestHeader(o,l[o]);if(n!=null&&u.overrideMimeType)u.overrideMimeType(n);if(c!=null)u.responseType=c;if(r!=null)a.on("error",r).on("load",(function(e){r(null,e)}));s.beforesend.call(a,u);u.send(i==null?null:i);return a};a.abort=function(){u.abort();return a};e.rebind(a,s,"on");return o==null?a:a.get(Et(o))}function Et(e){return e.length===1?function(t,i){e(t==null?i:null)}:e}function xt(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}e.dsv=function(e,t){var i=new RegExp('["'+e+"\n]"),n=e.charCodeAt(0);function r(e,i,n){if(arguments.length<3)n=i,i=null;var r=At(e,t,i==null?o:a(i),n);r.row=function(e){return arguments.length?r.response((i=e)==null?o:a(e)):i};return r}function o(e){return r.parse(e.responseText)}function a(e){return function(t){return r.parse(t.responseText,e)}}r.parse=function(e,t){var i;return r.parseRows(e,(function(e,n){if(i)return i(e,n-1);var r=new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+"]"})).join(",")+"}");i=t?function(e,i){return t(r(e),i)}:r}))};r.parseRows=function(e,t){var i={},r={},o=[],a=e.length,s=0,l=0,u,c;function d(){if(s>=a)return r;if(c)return c=false,i;var t=s;if(e.charCodeAt(t)===34){var o=t;while(o++<a){if(e.charCodeAt(o)===34){if(e.charCodeAt(o+1)!==34)break;++o}}s=o+2;var l=e.charCodeAt(o+1);if(l===13){c=true;if(e.charCodeAt(o+2)===10)++s}else if(l===10){c=true}return e.slice(t+1,o).replace(/""/g,'"')}while(s<a){var l=e.charCodeAt(s++),u=1;if(l===10)c=true;else if(l===13){c=true;if(e.charCodeAt(s)===10)++s,++u}else if(l!==n)continue;return e.slice(t,s-u)}return e.slice(t)}while((u=d())!==r){var f=[];while(u!==i&&u!==r){f.push(u);u=d()}if(t&&(f=t(f,l++))==null)continue;o.push(f)}return o};r.format=function(t){if(Array.isArray(t[0]))return r.formatRows(t);var i=new O,n=[];t.forEach((function(e){for(var t in e){if(!i.has(t)){n.push(i.add(t))}}}));return[n.map(l).join(e)].concat(t.map((function(t){return n.map((function(e){return l(t[e])})).join(e)}))).join("\n")};r.formatRows=function(e){return e.map(s).join("\n")};function s(t){return t.map(l).join(e)}function l(e){return i.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return r};e.csv=e.dsv(",","text/csv");e.tsv=e.dsv(" ","text/tab-separated-values");var Tt,St,Dt,kt,Ot,Rt=this[P(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};e.timer=function(e,t,i){var n=arguments.length;if(n<2)t=0;if(n<3)i=Date.now();var r=i+t,o={c:e,t:r,f:false,n:null};if(St)St.n=o;else Tt=o;St=o;if(!Dt){kt=clearTimeout(kt);Dt=1;Rt(Nt)}};function Nt(){var e=Pt(),t=It()-e;if(t>24){if(isFinite(t)){clearTimeout(kt);kt=setTimeout(Nt,t)}Dt=0}else{Dt=1;Rt(Nt)}}e.timer.flush=function(){Pt();It()};function Pt(){var e=Date.now();Ot=Tt;while(Ot){if(e>=Ot.t)Ot.f=Ot.c(e-Ot.t);Ot=Ot.n}return e}function It(){var e,t=Tt,i=Infinity;while(t){if(t.f){t=e?e.n=t.n:Tt=t.n}else{if(t.t<i)i=t.t;t=(e=t).n}}St=e;return i}function Mt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}e.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Lt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Ft);e.formatPrefix=function(t,i){var n=0;if(t){if(t<0)t*=-1;if(i)t=e.round(t,Mt(t,i));n=1+Math.floor(1e-12+Math.log(t)/Math.LN10);n=Math.max(-24,Math.min(24,Math.floor((n-1)/3)*3))}return Lt[8+n/3]};function Ft(e,t){var i=Math.pow(10,v(8-t)*3);return{scale:t>8?function(e){return e/i}:function(e){return e*i},symbol:e}}function Gt(t){var i=t.decimal,n=t.thousands,r=t.grouping,o=t.currency,a=r&&n?function(e,t){var i=e.length,o=[],a=0,s=r[0],l=0;while(i>0&&s>0){if(l+s+1>t)s=Math.max(1,t-l);o.push(e.substring(i-=s,i+s));if((l+=s+1)>t)break;s=r[a=(a+1)%r.length]}return o.reverse().join(n)}:R;return function(t){var n=$t.exec(t),r=n[1]||" ",s=n[2]||">",l=n[3]||"-",u=n[4]||"",c=n[5],d=+n[6],f=n[7],p=n[8],h=n[9],g=1,m="",v="",y=false,b=true;if(p)p=+p.substring(1);if(c||r==="0"&&s==="="){c=r="0";s="="}switch(h){case"n":f=true;h="g";break;case"%":g=100;v="%";h="f";break;case"p":g=100;v="%";h="r";break;case"b":case"o":case"x":case"X":if(u==="#")m="0"+h.toLowerCase();case"c":b=false;case"d":y=true;p=0;break;case"s":g=-1;h="r";break}if(u==="$")m=o[0],v=o[1];if(h=="r"&&!p)h="g";if(p!=null){if(h=="g")p=Math.max(1,Math.min(21,p));else if(h=="e"||h=="f")p=Math.max(0,Math.min(20,p))}h=Wt.get(h)||Ht;var _=c&&f;return function(t){var n=v;if(y&&t%1)return"";var o=t<0||t===0&&1/t<0?(t=-t,"-"):l==="-"?"":l;if(g<0){var u=e.formatPrefix(t,p);t=u.scale(t);n=u.symbol+v}else{t*=g}t=h(t,p);var w=t.lastIndexOf("."),C,A;if(w<0){var E=b?t.lastIndexOf("e"):-1;if(E<0)C=t,A="";else C=t.substring(0,E),A=t.substring(E)}else{C=t.substring(0,w);A=i+t.substring(w+1)}if(!c&&f)C=a(C,Infinity);var x=m.length+C.length+A.length+(_?0:o.length),T=x<d?new Array(x=d-x+1).join(r):"";if(_)C=a(T+C,T.length?d-A.length:Infinity);o+=m;t=C+A;return(s==="<"?o+t+T:s===">"?T+o+t:s==="^"?T.substring(0,x>>=1)+o+t+T.substring(x):o+(_?t:T+t))+n}}}var $t=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var Wt=e.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(t,i){return(t=e.round(t,Mt(t,i))).toFixed(Math.max(0,Math.min(20,Mt(t*(1+1e-15),i))))}});function Ht(e){return e+""}var jt=e.time={},Bt=Date;function Vt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Vt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){zt.setUTCDate.apply(this._,arguments)},setDay:function(){zt.setUTCDay.apply(this._,arguments)},setFullYear:function(){zt.setUTCFullYear.apply(this._,arguments)},setHours:function(){zt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){zt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){zt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){zt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){zt.setUTCSeconds.apply(this._,arguments)},setTime:function(){zt.setTime.apply(this._,arguments)}};var zt=Date.prototype;function Ut(e,t,i){function n(t){var i=e(t),n=o(i,1);return t-i<n-t?i:n}function r(i){t(i=e(new Bt(i-1)),1);return i}function o(e,i){t(e=new Bt(+e),i);return e}function a(e,n,o){var a=r(e),s=[];if(o>1){while(a<n){if(!(i(a)%o))s.push(new Date(+a));t(a,1)}}else{while(a<n)s.push(new Date(+a)),t(a,1)}return s}function s(e,t,i){try{Bt=Vt;var n=new Vt;n._=e;return a(n,t,i)}finally{Bt=Date}}e.floor=e;e.round=n;e.ceil=r;e.offset=o;e.range=a;var l=e.utc=Yt(e);l.floor=l;l.round=Yt(n);l.ceil=Yt(r);l.offset=Yt(o);l.range=s;return e}function Yt(e){return function(t,i){try{Bt=Vt;var n=new Vt;n._=t;return e(n,i)._}finally{Bt=Date}}}jt.year=Ut((function(e){e=jt.day(e);e.setMonth(0,1);return e}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e){return e.getFullYear()}));jt.years=jt.year.range;jt.years.utc=jt.year.utc.range;jt.day=Ut((function(e){var t=new Bt(2e3,0);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate());return t}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e){return e.getDate()-1}));jt.days=jt.day.range;jt.days.utc=jt.day.utc.range;jt.dayOfYear=function(e){var t=jt.year(e);return Math.floor((e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach((function(e,t){t=7-t;var i=jt[e]=Ut((function(e){(e=jt.day(e)).setDate(e.getDate()-(e.getDay()+t)%7);return e}),(function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)}),(function(e){var i=jt.year(e).getDay();return Math.floor((jt.dayOfYear(e)+(i+t)%7)/7)-(i!==t)}));jt[e+"s"]=i.range;jt[e+"s"].utc=i.utc.range;jt[e+"OfYear"]=function(e){var i=jt.year(e).getDay();return Math.floor((jt.dayOfYear(e)+(i+t)%7)/7)}}));jt.week=jt.sunday;jt.weeks=jt.sunday.range;jt.weeks.utc=jt.sunday.utc.range;jt.weekOfYear=jt.sundayOfYear;function qt(t){var i=t.dateTime,n=t.date,r=t.time,o=t.periods,a=t.days,s=t.shortDays,l=t.months,u=t.shortMonths;function c(e){var t=e.length;function i(i){var n=[],r=-1,o=0,a,s,l;while(++r<t){if(e.charCodeAt(r)===37){n.push(e.slice(o,r));if((s=Xt[a=e.charAt(++r)])!=null)a=e.charAt(++r);if(l=w[a])a=l(i,s==null?a==="e"?" ":"0":s);n.push(a);o=r+1}}n.push(e.slice(o,r));return n.join("")}i.parse=function(t){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},n=d(i,e,t,0);if(n!=t.length)return null;if("p"in i)i.H=i.H%12+i.p*12;var r=i.Z!=null&&Bt!==Vt,o=new(r?Vt:Bt);if("j"in i)o.setFullYear(i.y,0,i.j);else if("w"in i&&("W"in i||"U"in i)){o.setFullYear(i.y,0,1);o.setFullYear(i.y,0,"W"in i?(i.w+6)%7+i.W*7-(o.getDay()+5)%7:i.w+i.U*7-(o.getDay()+6)%7)}else o.setFullYear(i.y,i.m,i.d);o.setHours(i.H+(i.Z/100|0),i.M+i.Z%100,i.S,i.L);return r?o._:o};i.toString=function(){return e};return i}function d(e,t,i,n){var r,o,a,s=0,l=t.length,u=i.length;while(s<l){if(n>=u)return-1;r=t.charCodeAt(s++);if(r===37){a=t.charAt(s++);o=C[a in Xt?t.charAt(s++):a];if(!o||(n=o(e,i,n))<0)return-1}else if(r!=i.charCodeAt(n++)){return-1}}return n}c.utc=function(e){var t=c(e);function i(e){try{Bt=Vt;var i=new Bt;i._=e;return t(i)}finally{Bt=Date}}i.parse=function(e){try{Bt=Vt;var i=t.parse(e);return i&&i._}finally{Bt=Date}};i.toString=t.toString;return i};c.multi=c.utc.multi=vi;var f=e.map(),p=Jt(a),h=ei(a),g=Jt(s),m=ei(s),v=Jt(l),y=ei(l),b=Jt(u),_=ei(u);o.forEach((function(e,t){f.set(e.toLowerCase(),t)}));var w={a:function(e){return s[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:c(i),d:function(e,t){return Zt(e.getDate(),t,2)},e:function(e,t){return Zt(e.getDate(),t,2)},H:function(e,t){return Zt(e.getHours(),t,2)},I:function(e,t){return Zt(e.getHours()%12||12,t,2)},j:function(e,t){return Zt(1+jt.dayOfYear(e),t,3)},L:function(e,t){return Zt(e.getMilliseconds(),t,3)},m:function(e,t){return Zt(e.getMonth()+1,t,2)},M:function(e,t){return Zt(e.getMinutes(),t,2)},p:function(e){return o[+(e.getHours()>=12)]},S:function(e,t){return Zt(e.getSeconds(),t,2)},U:function(e,t){return Zt(jt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Zt(jt.mondayOfYear(e),t,2)},x:c(n),X:c(r),y:function(e,t){return Zt(e.getFullYear()%100,t,2)},Y:function(e,t){return Zt(e.getFullYear()%1e4,t,4)},Z:gi,"%":function(){return"%"}};var C={a:A,A:E,b:x,B:T,c:S,d:ui,e:ui,H:di,I:di,j:ci,L:hi,m:li,M:fi,p:O,S:pi,U:ii,w:ti,W:ni,x:D,X:k,y:oi,Y:ri,Z:ai,"%":mi};function A(e,t,i){g.lastIndex=0;var n=g.exec(t.slice(i));return n?(e.w=m.get(n[0].toLowerCase()),i+n[0].length):-1}function E(e,t,i){p.lastIndex=0;var n=p.exec(t.slice(i));return n?(e.w=h.get(n[0].toLowerCase()),i+n[0].length):-1}function x(e,t,i){b.lastIndex=0;var n=b.exec(t.slice(i));return n?(e.m=_.get(n[0].toLowerCase()),i+n[0].length):-1}function T(e,t,i){v.lastIndex=0;var n=v.exec(t.slice(i));return n?(e.m=y.get(n[0].toLowerCase()),i+n[0].length):-1}function S(e,t,i){return d(e,w.c.toString(),t,i)}function D(e,t,i){return d(e,w.x.toString(),t,i)}function k(e,t,i){return d(e,w.X.toString(),t,i)}function O(e,t,i){var n=f.get(t.slice(i,i+=2).toLowerCase());return n==null?-1:(e.p=n,i)}return c}var Xt={"-":"",_:" ",0:"0"},Kt=/^\s*\d+/,Qt=/^%/;function Zt(e,t,i){var n=e<0?"-":"",r=(n?-e:e)+"",o=r.length;return n+(o<i?new Array(i-o+1).join(t)+r:r)}function Jt(t){return new RegExp("^(?:"+t.map(e.requote).join("|")+")","i")}function ei(e){var t=new _,i=-1,n=e.length;while(++i<n)t.set(e[i].toLowerCase(),i);return t}function ti(e,t,i){Kt.lastIndex=0;var n=Kt.exec(t.slice(i,i+1));return n?(e.w=+n[0],i+n[0].length):-1}function ii(e,t,i){Kt.lastIndex=0;var n=Kt.exec(t.slice(i));return n?(e.U=+n[0],i+n[0].length):-1}function ni(e,t,i){Kt.lastIndex=0;var n=Kt.exec(t.slice(i));return n?(e.W=+n[0],i+n[0].length):-1}function ri(e,t,i){Kt.lastIndex=0;var n=Kt.exec(t.slice(i,i+4));return n?(e.y=+n[0],i+n[0].length):-1}function oi(e,t,i){Kt.lastIndex=0;var n=Kt.exec(t.slice(i,i+2));return n?(e.y=si(+n[0]),i+n[0].length):-1}function ai(e,t,i){return/^[+-]\d{4}$/.test(t=t.slice(i,i+5))?(e.Z=-t,i+5):-1}function si(e){return e+(e>68?1900:2e3)}function li(e,t,i){Kt.lastIndex=0;var n=Kt.exec(t.slice(i,i+2));return n?(e.m=n[0]-1,i+n[0].length):-1}function ui(e,t,i){Kt.lastIndex=0;var n=Kt.exec(t.slice(i,i+2));return n?(e.d=+n[0],i+n[0].length):-1}function ci(e,t,i){Kt.lastIndex=0;var n=Kt.exec(t.slice(i,i+3));return n?(e.j=+n[0],i+n[0].length):-1}function di(e,t,i){Kt.lastIndex=0;var n=Kt.exec(t.slice(i,i+2));return n?(e.H=+n[0],i+n[0].length):-1}function fi(e,t,i){Kt.lastIndex=0;var n=Kt.exec(t.slice(i,i+2));return n?(e.M=+n[0],i+n[0].length):-1}function pi(e,t,i){Kt.lastIndex=0;var n=Kt.exec(t.slice(i,i+2));return n?(e.S=+n[0],i+n[0].length):-1}function hi(e,t,i){Kt.lastIndex=0;var n=Kt.exec(t.slice(i,i+3));return n?(e.L=+n[0],i+n[0].length):-1}function gi(e){var t=e.getTimezoneOffset(),i=t>0?"-":"+",n=v(t)/60|0,r=v(t)%60;return i+Zt(n,"0",2)+Zt(r,"0",2)}function mi(e,t,i){Qt.lastIndex=0;var n=Qt.exec(t.slice(i,i+1));return n?i+n[0].length:-1}function vi(e){var t=e.length,i=-1;while(++i<t)e[i][0]=this(e[i][0]);return function(t){var i=0,n=e[i];while(!n[1](t))n=e[++i];return n[0](t)}}e.locale=function(e){return{numberFormat:Gt(e),timeFormat:qt(e)}};var yi=e.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});e.format=yi.numberFormat;e.geo={};function bi(){}bi.prototype={s:0,t:0,add:function(e){wi(e,this.t,_i);wi(_i.s,this.s,this);if(this.s)this.t+=_i.t;else this.s=_i.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var _i=new bi;function wi(e,t,i){var n=i.s=e+t,r=n-e,o=n-r;i.t=e-o+(t-r)}e.geo.stream=function(e,t){if(e&&Ai.hasOwnProperty(e.type)){Ai[e.type](e,t)}else{Ci(e,t)}};function Ci(e,t){if(e&&Ei.hasOwnProperty(e.type)){Ei[e.type](e,t)}}var Ai={Feature:function(e,t){Ci(e.geometry,t)},FeatureCollection:function(e,t){var i=e.features,n=-1,r=i.length;while(++n<r)Ci(i[n].geometry,t)}};var Ei={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates;t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var i=e.coordinates,n=-1,r=i.length;while(++n<r)e=i[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){xi(e.coordinates,t,0)},MultiLineString:function(e,t){var i=e.coordinates,n=-1,r=i.length;while(++n<r)xi(i[n],t,0)},Polygon:function(e,t){Ti(e.coordinates,t)},MultiPolygon:function(e,t){var i=e.coordinates,n=-1,r=i.length;while(++n<r)Ti(i[n],t)},GeometryCollection:function(e,t){var i=e.geometries,n=-1,r=i.length;while(++n<r)Ci(i[n],t)}};function xi(e,t,i){var n=-1,r=e.length-i,o;t.lineStart();while(++n<r)o=e[n],t.point(o[0],o[1],o[2]);t.lineEnd()}function Ti(e,t){var i=-1,n=e.length;t.polygonStart();while(++i<n)xi(e[i],t,1);t.polygonEnd()}e.geo.area=function(t){Si=0;e.geo.stream(t,ki);return Si};var Si,Di=new bi;var ki={sphere:function(){Si+=4*Te},point:M,lineStart:M,lineEnd:M,polygonStart:function(){Di.reset();ki.lineStart=Oi},polygonEnd:function(){var e=2*Di;Si+=e<0?4*Te+e:e;ki.lineStart=ki.lineEnd=ki.point=M}};function Oi(){var e,t,i,n,r;ki.point=function(a,s){ki.point=o;i=(e=a)*Oe,n=Math.cos(s=(t=s)*Oe/2+Te/4),r=Math.sin(s)};function o(e,t){e*=Oe;t=t*Oe/2+Te/4;var o=e-i,a=o>=0?1:-1,s=a*o,l=Math.cos(t),u=Math.sin(t),c=r*u,d=n*l+c*Math.cos(s),f=c*a*Math.sin(s);Di.add(Math.atan2(f,d));i=e,n=l,r=u}ki.lineEnd=function(){o(e,t)}}function Ri(e){var t=e[0],i=e[1],n=Math.cos(i);return[n*Math.cos(t),n*Math.sin(t),Math.sin(i)]}function Ni(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Pi(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Ii(e,t){e[0]+=t[0];e[1]+=t[1];e[2]+=t[2]}function Mi(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Li(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t;e[1]/=t;e[2]/=t}function Fi(e){return[Math.atan2(e[1],e[0]),Me(e[2])]}function Gi(e,t){return v(e[0]-t[0])<Ee&&v(e[1]-t[1])<Ee}e.geo.bounds=function(){var t,i,n,r,o,a,s,l,u,c,d;var f={point:p,lineStart:g,lineEnd:m,polygonStart:function(){f.point=y;f.lineStart=b;f.lineEnd=_;u=0;ki.polygonStart()},polygonEnd:function(){ki.polygonEnd();f.point=p;f.lineStart=g;f.lineEnd=m;if(Di<0)t=-(n=180),i=-(r=90);else if(u>Ee)r=90;else if(u<-Ee)i=-90;d[0]=t,d[1]=n}};function p(e,o){c.push(d=[t=e,n=e]);if(o<i)i=o;if(o>r)r=o}function h(e,a){var s=Ri([e*Oe,a*Oe]);if(l){var u=Pi(l,s),c=[u[1],-u[0],0],d=Pi(c,u);Li(d);d=Fi(d);var f=e-o,h=f>0?1:-1,g=d[0]*Re*h,m=v(f)>180;if(m^(h*o<g&&g<h*e)){var y=d[1]*Re;if(y>r)r=y}else if(g=(g+360)%360-180,m^(h*o<g&&g<h*e)){var y=-d[1]*Re;if(y<i)i=y}else{if(a<i)i=a;if(a>r)r=a}if(m){if(e<o){if(w(t,e)>w(t,n))n=e}else{if(w(e,n)>w(t,n))t=e}}else{if(n>=t){if(e<t)t=e;if(e>n)n=e}else{if(e>o){if(w(t,e)>w(t,n))n=e}else{if(w(e,n)>w(t,n))t=e}}}}else{p(e,a)}l=s,o=e}function g(){f.point=h}function m(){d[0]=t,d[1]=n;f.point=p;l=null}function y(e,t){if(l){var i=e-o;u+=v(i)>180?i+(i>0?360:-360):i}else a=e,s=t;ki.point(e,t);h(e,t)}function b(){ki.lineStart()}function _(){y(a,s);ki.lineEnd();if(v(u)>Ee)t=-(n=180);d[0]=t,d[1]=n;l=null}function w(e,t){return(t-=e)<0?t+360:t}function C(e,t){return e[0]-t[0]}function A(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(o){r=n=-(t=i=Infinity);c=[];e.geo.stream(o,f);var a=c.length;if(a){c.sort(C);for(var s=1,l=c[0],u,p=[l];s<a;++s){u=c[s];if(A(u[0],l)||A(u[1],l)){if(w(l[0],u[1])>w(l[0],l[1]))l[1]=u[1];if(w(u[0],l[1])>w(l[0],l[1]))l[0]=u[0]}else{p.push(l=u)}}var h=-Infinity,g;for(var a=p.length-1,s=0,l=p[a],u;s<=a;l=u,++s){u=p[s];if((g=w(l[1],u[0]))>h)h=g,t=u[0],n=l[1]}}c=d=null;return t===Infinity||i===Infinity?[[NaN,NaN],[NaN,NaN]]:[[t,i],[n,r]]}}();e.geo.centroid=function(t){$i=Wi=Hi=ji=Bi=Vi=zi=Ui=Yi=qi=Xi=0;e.geo.stream(t,Ki);var i=Yi,n=qi,r=Xi,o=i*i+n*n+r*r;if(o<xe){i=Vi,n=zi,r=Ui;if(Wi<Ee)i=Hi,n=ji,r=Bi;o=i*i+n*n+r*r;if(o<xe)return[NaN,NaN]}return[Math.atan2(n,i)*Re,Me(r/Math.sqrt(o))*Re]};var $i,Wi,Hi,ji,Bi,Vi,zi,Ui,Yi,qi,Xi;var Ki={sphere:M,point:Qi,lineStart:Ji,lineEnd:en,polygonStart:function(){Ki.lineStart=tn},polygonEnd:function(){Ki.lineStart=Ji}};function Qi(e,t){e*=Oe;var i=Math.cos(t*=Oe);Zi(i*Math.cos(e),i*Math.sin(e),Math.sin(t))}function Zi(e,t,i){++$i;Hi+=(e-Hi)/$i;ji+=(t-ji)/$i;Bi+=(i-Bi)/$i}function Ji(){var e,t,i;Ki.point=function(r,o){r*=Oe;var a=Math.cos(o*=Oe);e=a*Math.cos(r);t=a*Math.sin(r);i=Math.sin(o);Ki.point=n;Zi(e,t,i)};function n(n,r){n*=Oe;var o=Math.cos(r*=Oe),a=o*Math.cos(n),s=o*Math.sin(n),l=Math.sin(r),u=Math.atan2(Math.sqrt((u=t*l-i*s)*u+(u=i*a-e*l)*u+(u=e*s-t*a)*u),e*a+t*s+i*l);Wi+=u;Vi+=u*(e+(e=a));zi+=u*(t+(t=s));Ui+=u*(i+(i=l));Zi(e,t,i)}}function en(){Ki.point=Qi}function tn(){var e,t,i,n,r;Ki.point=function(a,s){e=a,t=s;Ki.point=o;a*=Oe;var l=Math.cos(s*=Oe);i=l*Math.cos(a);n=l*Math.sin(a);r=Math.sin(s);Zi(i,n,r)};Ki.lineEnd=function(){o(e,t);Ki.lineEnd=en;Ki.point=Qi};function o(e,t){e*=Oe;var o=Math.cos(t*=Oe),a=o*Math.cos(e),s=o*Math.sin(e),l=Math.sin(t),u=n*l-r*s,c=r*a-i*l,d=i*s-n*a,f=Math.sqrt(u*u+c*c+d*d),p=i*a+n*s+r*l,h=f&&-Ie(p)/f,g=Math.atan2(f,p);Yi+=h*u;qi+=h*c;Xi+=h*d;Wi+=g;Vi+=g*(i+(i=a));zi+=g*(n+(n=s));Ui+=g*(r+(r=l));Zi(i,n,r)}}function nn(e,t){function i(i,n){return i=e(i,n),t(i[0],i[1])}if(e.invert&&t.invert)i.invert=function(i,n){return i=t.invert(i,n),i&&e.invert(i[0],i[1])};return i}function rn(){return true}function on(e,t,i,n,r){var o=[],a=[];e.forEach((function(e){if((t=e.length-1)<=0)return;var t,i=e[0],n=e[t];if(Gi(i,n)){r.lineStart();for(var s=0;s<t;++s)r.point((i=e[s])[0],i[1]);r.lineEnd();return}var l=new sn(i,e,null,true),u=new sn(i,null,l,false);l.o=u;o.push(l);a.push(u);l=new sn(n,e,null,false);u=new sn(n,null,l,true);l.o=u;o.push(l);a.push(u)}));a.sort(t);an(o);an(a);if(!o.length)return;for(var s=0,l=i,u=a.length;s<u;++s){a[s].e=l=!l}var c=o[0],d,f;while(1){var p=c,h=true;while(p.v)if((p=p.n)===c)return;d=p.z;r.lineStart();do{p.v=p.o.v=true;if(p.e){if(h){for(var s=0,u=d.length;s<u;++s)r.point((f=d[s])[0],f[1])}else{n(p.x,p.n.x,1,r)}p=p.n}else{if(h){d=p.p.z;for(var s=d.length-1;s>=0;--s)r.point((f=d[s])[0],f[1])}else{n(p.x,p.p.x,-1,r)}p=p.p}p=p.o;d=p.z;h=!h}while(!p.v);r.lineEnd()}}function an(e){if(!(t=e.length))return;var t,i=0,n=e[0],r;while(++i<t){n.n=r=e[i];r.p=n;n=r}n.n=r=e[0];r.p=n}function sn(e,t,i,n){this.x=e;this.z=t;this.o=i;this.e=n;this.v=false;this.n=this.p=null}function ln(t,i,n,r){return function(o,a){var s=i(a),l=o.invert(r[0],r[1]);var u={point:c,lineStart:f,lineEnd:p,polygonStart:function(){u.point=_;u.lineStart=w;u.lineEnd=C;h=[];y=[]},polygonEnd:function(){u.point=c;u.lineStart=f;u.lineEnd=p;h=e.merge(h);var t=mn(l,y);if(h.length){if(!v)a.polygonStart(),v=true;on(h,dn,t,n,a)}else if(t){if(!v)a.polygonStart(),v=true;a.lineStart();n(null,null,1,a);a.lineEnd()}if(v)a.polygonEnd(),v=false;h=y=null},sphere:function(){a.polygonStart();a.lineStart();n(null,null,1,a);a.lineEnd();a.polygonEnd()}};function c(e,i){var n=o(e,i);if(t(e=n[0],i=n[1]))a.point(e,i)}function d(e,t){var i=o(e,t);s.point(i[0],i[1])}function f(){u.point=d;s.lineStart()}function p(){u.point=c;s.lineEnd()}var h;var g=cn(),m=i(g),v=false,y,b;function _(e,t){b.push([e,t]);var i=o(e,t);m.point(i[0],i[1])}function w(){m.lineStart();b=[]}function C(){_(b[0][0],b[0][1]);m.lineEnd();var e=m.clean(),t=g.buffer(),i,n=t.length;b.pop();y.push(b);b=null;if(!n)return;if(e&1){i=t[0];var n=i.length-1,r=-1,o;if(n>0){if(!v)a.polygonStart(),v=true;a.lineStart();while(++r<n)a.point((o=i[r])[0],o[1]);a.lineEnd()}return}if(n>1&&e&2)t.push(t.pop().concat(t.shift()));h.push(t.filter(un))}return u}}function un(e){return e.length>1}function cn(){var e=[],t;return{lineStart:function(){e.push(t=[])},point:function(e,i){t.push([e,i])},lineEnd:M,buffer:function(){var i=e;e=[];t=null;return i},rejoin:function(){if(e.length>1)e.push(e.pop().concat(e.shift()))}}}function dn(e,t){return((e=e.x)[0]<0?e[1]-ke-Ee:ke-e[1])-((t=t.x)[0]<0?t[1]-ke-Ee:ke-t[1])}var fn=ln(rn,pn,gn,[-Te,-Te/2]);function pn(e){var t=NaN,i=NaN,n=NaN,r;return{lineStart:function(){e.lineStart();r=1},point:function(o,a){var s=o>0?Te:-Te,l=v(o-t);if(v(l-Te)<Ee){e.point(t,i=(i+a)/2>0?ke:-ke);e.point(n,i);e.lineEnd();e.lineStart();e.point(s,i);e.point(o,i);r=0}else if(n!==s&&l>=Te){if(v(t-n)<Ee)t-=n*Ee;if(v(o-s)<Ee)o-=s*Ee;i=hn(t,i,o,a);e.point(n,i);e.lineEnd();e.lineStart();e.point(s,i);r=0}e.point(t=o,i=a);n=s},lineEnd:function(){e.lineEnd();t=i=NaN},clean:function(){return 2-r}}}function hn(e,t,i,n){var r,o,a=Math.sin(e-i);return v(a)>Ee?Math.atan((Math.sin(t)*(o=Math.cos(n))*Math.sin(i)-Math.sin(n)*(r=Math.cos(t))*Math.sin(e))/(r*o*a)):(t+n)/2}function gn(e,t,i,n){var r;if(e==null){r=i*ke;n.point(-Te,r);n.point(0,r);n.point(Te,r);n.point(Te,0);n.point(Te,-r);n.point(0,-r);n.point(-Te,-r);n.point(-Te,0);n.point(-Te,r)}else if(v(e[0]-t[0])>Ee){var o=e[0]<t[0]?Te:-Te;r=i*o/2;n.point(-o,r);n.point(0,r);n.point(o,r)}else{n.point(t[0],t[1])}}function mn(e,t){var i=e[0],n=e[1],r=[Math.sin(i),-Math.cos(i),0],o=0,a=0;Di.reset();for(var s=0,l=t.length;s<l;++s){var u=t[s],c=u.length;if(!c)continue;var d=u[0],f=d[0],p=d[1]/2+Te/4,h=Math.sin(p),g=Math.cos(p),m=1;while(true){if(m===c)m=0;e=u[m];var v=e[0],y=e[1]/2+Te/4,b=Math.sin(y),_=Math.cos(y),w=v-f,C=w>=0?1:-1,A=C*w,E=A>Te,x=h*b;Di.add(Math.atan2(x*C*Math.sin(A),g*_+x*Math.cos(A)));o+=E?w+C*Se:w;if(E^f>=i^v>=i){var T=Pi(Ri(d),Ri(e));Li(T);var S=Pi(r,T);Li(S);var D=(E^w>=0?-1:1)*Me(S[2]);if(n>D||n===D&&(T[0]||T[1])){a+=E^w>=0?1:-1}}if(!m++)break;f=v,h=b,g=_,d=e}}return(o<-Ee||o<Ee&&Di<0)^a&1}function vn(e){var t=Math.cos(e),i=t>0,n=v(t)>Ee,r=er(e,6*Oe);return ln(o,a,r,i?[0,-e]:[-Te,e-Te]);function o(e,i){return Math.cos(e)*Math.cos(i)>t}function a(e){var t,r,a,u,c;return{lineStart:function(){u=a=false;c=1},point:function(d,f){var p=[d,f],h,g=o(d,f),m=i?g?0:l(d,f):g?l(d+(d<0?Te:-Te),f):0;if(!t&&(u=a=g))e.lineStart();if(g!==a){h=s(t,p);if(Gi(t,h)||Gi(p,h)){p[0]+=Ee;p[1]+=Ee;g=o(p[0],p[1])}}if(g!==a){c=0;if(g){e.lineStart();h=s(p,t);e.point(h[0],h[1])}else{h=s(t,p);e.point(h[0],h[1]);e.lineEnd()}t=h}else if(n&&t&&i^g){var v;if(!(m&r)&&(v=s(p,t,true))){c=0;if(i){e.lineStart();e.point(v[0][0],v[0][1]);e.point(v[1][0],v[1][1]);e.lineEnd()}else{e.point(v[1][0],v[1][1]);e.lineEnd();e.lineStart();e.point(v[0][0],v[0][1])}}}if(g&&(!t||!Gi(t,p))){e.point(p[0],p[1])}t=p,a=g,r=m},lineEnd:function(){if(a)e.lineEnd();t=null},clean:function(){return c|(u&&a)<<1}}}function s(e,i,n){var r=Ri(e),o=Ri(i);var a=[1,0,0],s=Pi(r,o),l=Ni(s,s),u=s[0],c=l-u*u;if(!c)return!n&&e;var d=t*l/c,f=-t*u/c,p=Pi(a,s),h=Mi(a,d),g=Mi(s,f);Ii(h,g);var m=p,y=Ni(h,m),b=Ni(m,m),_=y*y-b*(Ni(h,h)-1);if(_<0)return;var w=Math.sqrt(_),C=Mi(m,(-y-w)/b);Ii(C,h);C=Fi(C);if(!n)return C;var A=e[0],E=i[0],x=e[1],T=i[1],S;if(E<A)S=A,A=E,E=S;var D=E-A,k=v(D-Te)<Ee,O=k||D<Ee;if(!k&&T<x)S=x,x=T,T=S;if(O?k?x+T>0^C[1]<(v(C[0]-A)<Ee?x:T):x<=C[1]&&C[1]<=T:D>Te^(A<=C[0]&&C[0]<=E)){var R=Mi(m,(-y+w)/b);Ii(R,h);return[C,Fi(R)]}}function l(t,n){var r=i?e:Te-e,o=0;if(t<-r)o|=1;else if(t>r)o|=2;if(n<-r)o|=4;else if(n>r)o|=8;return o}}function yn(e,t,i,n){return function(r){var o=r.a,a=r.b,s=o.x,l=o.y,u=a.x,c=a.y,d=0,f=1,p=u-s,h=c-l,g;g=e-s;if(!p&&g>0)return;g/=p;if(p<0){if(g<d)return;if(g<f)f=g}else if(p>0){if(g>f)return;if(g>d)d=g}g=i-s;if(!p&&g<0)return;g/=p;if(p<0){if(g>f)return;if(g>d)d=g}else if(p>0){if(g<d)return;if(g<f)f=g}g=t-l;if(!h&&g>0)return;g/=h;if(h<0){if(g<d)return;if(g<f)f=g}else if(h>0){if(g>f)return;if(g>d)d=g}g=n-l;if(!h&&g<0)return;g/=h;if(h<0){if(g>f)return;if(g>d)d=g}else if(h>0){if(g<d)return;if(g<f)f=g}if(d>0)r.a={x:s+d*p,y:l+d*h};if(f<1)r.b={x:s+f*p,y:l+f*h};return r}}var bn=1e9;e.geo.clipExtent=function(){var e,t,i,n,r,o,a={stream:function(e){if(r)r.valid=false;r=o(e);r.valid=true;return r},extent:function(s){if(!arguments.length)return[[e,t],[i,n]];o=_n(e=+s[0][0],t=+s[0][1],i=+s[1][0],n=+s[1][1]);if(r)r.valid=false,r=null;return a}};return a.extent([[0,0],[960,500]])};function _n(t,i,n,r){return function(l){var u=l,c=cn(),d=yn(t,i,n,r),f,p,h;var g={point:b,lineStart:D,lineEnd:k,polygonStart:function(){l=c;f=[];p=[];S=true},polygonEnd:function(){l=u;f=e.merge(f);var i=m([t,r]),n=S&&i,o=f.length;if(n||o){l.polygonStart();if(n){l.lineStart();v(null,null,1,l);l.lineEnd()}if(o){on(f,a,i,v,l)}l.polygonEnd()}f=p=h=null}};function m(e){var t=0,i=p.length,n=e[1];for(var r=0;r<i;++r){for(var o=1,a=p[r],s=a.length,l=a[0],u;o<s;++o){u=a[o];if(l[1]<=n){if(u[1]>n&&Pe(l,u,e)>0)++t}else{if(u[1]<=n&&Pe(l,u,e)<0)--t}l=u}}return t!==0}function v(e,a,l,u){var c=0,d=0;if(e==null||(c=o(e,l))!==(d=o(a,l))||s(e,a)<0^l>0){do{u.point(c===0||c===3?t:n,c>1?r:i)}while((c=(c+l+4)%4)!==d)}else{u.point(a[0],a[1])}}function y(e,o){return t<=e&&e<=n&&i<=o&&o<=r}function b(e,t){if(y(e,t))l.point(e,t)}var _,w,C,A,E,x,T,S;function D(){g.point=O;if(p)p.push(h=[]);T=true;x=false;A=E=NaN}function k(){if(f){O(_,w);if(C&&x)c.rejoin();f.push(c.buffer())}g.point=b;if(x)l.lineEnd()}function O(e,t){e=Math.max(-bn,Math.min(bn,e));t=Math.max(-bn,Math.min(bn,t));var i=y(e,t);if(p)h.push([e,t]);if(T){_=e,w=t,C=i;T=false;if(i){l.lineStart();l.point(e,t)}}else{if(i&&x)l.point(e,t);else{var n={a:{x:A,y:E},b:{x:e,y:t}};if(d(n)){if(!x){l.lineStart();l.point(n.a.x,n.a.y)}l.point(n.b.x,n.b.y);if(!i)l.lineEnd();S=false}else if(i){l.lineStart();l.point(e,t);S=false}}}A=e,E=t,x=i}return g};function o(e,r){return v(e[0]-t)<Ee?r>0?0:3:v(e[0]-n)<Ee?r>0?2:1:v(e[1]-i)<Ee?r>0?1:0:r>0?3:2}function a(e,t){return s(e.x,t.x)}function s(e,t){var i=o(e,1),n=o(t,1);return i!==n?i-n:i===0?t[1]-e[1]:i===1?e[0]-t[0]:i===2?e[1]-t[1]:t[0]-e[0]}}function wn(e){var t=0,i=Te/3,n=Un(e),r=n(t,i);r.parallels=function(e){if(!arguments.length)return[t/Te*180,i/Te*180];return n(t=e[0]*Te/180,i=e[1]*Te/180)};return r}function Cn(e,t){var i=Math.sin(e),n=(i+Math.sin(t))/2,r=1+i*(2*n-i),o=Math.sqrt(r)/n;function a(e,t){var i=Math.sqrt(r-2*n*Math.sin(t))/n;return[i*Math.sin(e*=n),o-i*Math.cos(e)]}a.invert=function(e,t){var i=o-t;return[Math.atan2(e,i)/n,Me((r-(e*e+i*i)*n*n)/(2*n))]};return a}(e.geo.conicEqualArea=function(){return wn(Cn)}).raw=Cn;e.geo.albers=function(){return e.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};e.geo.albersUsa=function(){var t=e.geo.albers();var i=e.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var n=e.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var r,o={point:function(e,t){r=[e,t]}},a,s,l;function u(e){var t=e[0],i=e[1];r=null;(a(t,i),r)||(s(t,i),r)||l(t,i);return r}u.invert=function(e){var r=t.scale(),o=t.translate(),a=(e[0]-o[0])/r,s=(e[1]-o[1])/r;return(s>=.12&&s<.234&&a>=-.425&&a<-.214?i:s>=.166&&s<.234&&a>=-.214&&a<-.115?n:t).invert(e)};u.stream=function(e){var r=t.stream(e),o=i.stream(e),a=n.stream(e);return{point:function(e,t){r.point(e,t);o.point(e,t);a.point(e,t)},sphere:function(){r.sphere();o.sphere();a.sphere()},lineStart:function(){r.lineStart();o.lineStart();a.lineStart()},lineEnd:function(){r.lineEnd();o.lineEnd();a.lineEnd()},polygonStart:function(){r.polygonStart();o.polygonStart();a.polygonStart()},polygonEnd:function(){r.polygonEnd();o.polygonEnd();a.polygonEnd()}}};u.precision=function(e){if(!arguments.length)return t.precision();t.precision(e);i.precision(e);n.precision(e);return u};u.scale=function(e){if(!arguments.length)return t.scale();t.scale(e);i.scale(e*.35);n.scale(e);return u.translate(t.translate())};u.translate=function(e){if(!arguments.length)return t.translate();var r=t.scale(),c=+e[0],d=+e[1];a=t.translate(e).clipExtent([[c-.455*r,d-.238*r],[c+.455*r,d+.238*r]]).stream(o).point;s=i.translate([c-.307*r,d+.201*r]).clipExtent([[c-.425*r+Ee,d+.12*r+Ee],[c-.214*r-Ee,d+.234*r-Ee]]).stream(o).point;l=n.translate([c-.205*r,d+.212*r]).clipExtent([[c-.214*r+Ee,d+.166*r+Ee],[c-.115*r-Ee,d+.234*r-Ee]]).stream(o).point;return u};return u.scale(1070)};var An,En,xn={point:M,lineStart:M,lineEnd:M,polygonStart:function(){En=0;xn.lineStart=Tn},polygonEnd:function(){xn.lineStart=xn.lineEnd=xn.point=M;An+=v(En/2)}};function Tn(){var e,t,i,n;xn.point=function(o,a){xn.point=r;e=i=o,t=n=a};function r(e,t){En+=n*e-i*t;i=e,n=t}xn.lineEnd=function(){r(e,t)}}var Sn,Dn,kn,On;var Rn={point:Nn,lineStart:M,lineEnd:M,polygonStart:M,polygonEnd:M};function Nn(e,t){if(e<Sn)Sn=e;if(e>kn)kn=e;if(t<Dn)Dn=t;if(t>On)On=t}function Pn(){var e=In(4.5),t=[];var i={point:n,lineStart:function(){i.point=r},lineEnd:a,polygonStart:function(){i.lineEnd=s},polygonEnd:function(){i.lineEnd=a;i.point=n},pointRadius:function(t){e=In(t);return i},result:function(){if(t.length){var e=t.join("");t=[];return e}}};function n(i,n){t.push("M",i,",",n,e)}function r(e,n){t.push("M",e,",",n);i.point=o}function o(e,i){t.push("L",e,",",i)}function a(){i.point=n}function s(){t.push("Z")}return i}function In(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Mn={point:Ln,lineStart:Fn,lineEnd:Gn,polygonStart:function(){Mn.lineStart=$n},polygonEnd:function(){Mn.point=Ln;Mn.lineStart=Fn;Mn.lineEnd=Gn}};function Ln(e,t){Hi+=e;ji+=t;++Bi}function Fn(){var e,t;Mn.point=function(n,r){Mn.point=i;Ln(e=n,t=r)};function i(i,n){var r=i-e,o=n-t,a=Math.sqrt(r*r+o*o);Vi+=a*(e+i)/2;zi+=a*(t+n)/2;Ui+=a;Ln(e=i,t=n)}}function Gn(){Mn.point=Ln}function $n(){var e,t,i,n;Mn.point=function(o,a){Mn.point=r;Ln(e=i=o,t=n=a)};function r(e,t){var r=e-i,o=t-n,a=Math.sqrt(r*r+o*o);Vi+=a*(i+e)/2;zi+=a*(n+t)/2;Ui+=a;a=n*e-i*t;Yi+=a*(i+e);qi+=a*(n+t);Xi+=a*3;Ln(i=e,n=t)}Mn.lineEnd=function(){r(e,t)}}function Wn(e){var t=4.5;var i={point:n,lineStart:function(){i.point=r},lineEnd:a,polygonStart:function(){i.lineEnd=s},polygonEnd:function(){i.lineEnd=a;i.point=n},pointRadius:function(e){t=e;return i},result:M};function n(i,n){e.moveTo(i+t,n);e.arc(i,n,t,0,Se)}function r(t,n){e.moveTo(t,n);i.point=o}function o(t,i){e.lineTo(t,i)}function a(){i.point=n}function s(){e.closePath()}return i}function Hn(e){var t=.5,i=Math.cos(30*Oe),n=16;function r(e){return(n?a:o)(e)}function o(t){return Vn(t,(function(i,n){i=e(i,n);t.point(i[0],i[1])}))}function a(t){var i,r,o,a,l,u,c,d,f,p,h,g,m;var v={point:y,lineStart:b,lineEnd:w,polygonStart:function(){t.polygonStart();v.lineStart=C},polygonEnd:function(){t.polygonEnd();v.lineStart=b}};function y(i,n){i=e(i,n);t.point(i[0],i[1])}function b(){f=NaN;v.point=_;t.lineStart()}function _(i,r){var o=Ri([i,r]),a=e(i,r);s(f,p,d,h,g,m,f=a[0],p=a[1],d=i,h=o[0],g=o[1],m=o[2],n,t);t.point(f,p)}function w(){v.point=y;t.lineEnd()}function C(){b();v.point=A;v.lineEnd=E}function A(e,t){_(i=e,r=t),o=f,a=p,l=h,u=g,c=m;v.point=_}function E(){s(f,p,d,h,g,m,o,a,i,l,u,c,n,t);v.lineEnd=w;w()}return v}function s(n,r,o,a,l,u,c,d,f,p,h,g,m,y){var b=c-n,_=d-r,w=b*b+_*_;if(w>4*t&&m--){var C=a+p,A=l+h,E=u+g,x=Math.sqrt(C*C+A*A+E*E),T=Math.asin(E/=x),S=v(v(E)-1)<Ee||v(o-f)<Ee?(o+f)/2:Math.atan2(A,C),D=e(S,T),k=D[0],O=D[1],R=k-n,N=O-r,P=_*R-b*N;if(P*P/w>t||v((b*R+_*N)/w-.5)>.3||a*p+l*h+u*g<i){s(n,r,o,a,l,u,k,O,S,C/=x,A/=x,E,m,y);y.point(k,O);s(k,O,S,C,A,E,c,d,f,p,h,g,m,y)}}}r.precision=function(e){if(!arguments.length)return Math.sqrt(t);n=(t=e*e)>0&&16;return r};return r}e.geo.path=function(){var t=4.5,i,n,r,o,a;function s(i){if(i){if(typeof t==="function")o.pointRadius(+t.apply(this,arguments));if(!a||!a.valid)a=r(o);e.geo.stream(i,a)}return o.result()}s.area=function(t){An=0;e.geo.stream(t,r(xn));return An};s.centroid=function(t){Hi=ji=Bi=Vi=zi=Ui=Yi=qi=Xi=0;e.geo.stream(t,r(Mn));return Xi?[Yi/Xi,qi/Xi]:Ui?[Vi/Ui,zi/Ui]:Bi?[Hi/Bi,ji/Bi]:[NaN,NaN]};s.bounds=function(t){kn=On=-(Sn=Dn=Infinity);e.geo.stream(t,r(Rn));return[[Sn,Dn],[kn,On]]};s.projection=function(e){if(!arguments.length)return i;r=(i=e)?e.stream||jn(e):R;return l()};s.context=function(e){if(!arguments.length)return n;o=(n=e)==null?new Pn:new Wn(e);if(typeof t!=="function")o.pointRadius(t);return l()};s.pointRadius=function(e){if(!arguments.length)return t;t=typeof e==="function"?e:(o.pointRadius(+e),+e);return s};function l(){a=null;return s}return s.projection(e.geo.albersUsa()).context(null)};function jn(e){var t=Hn((function(t,i){return e([t*Re,i*Re])}));return function(e){return Yn(t(e))}}e.geo.transform=function(e){return{stream:function(t){var i=new Bn(t);for(var n in e)i[n]=e[n];return i}}};function Bn(e){this.stream=e}Bn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Vn(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}e.geo.projection=zn;e.geo.projectionMutator=Un;function zn(e){return Un((function(){return e}))()}function Un(t){var i,n,r,o=Hn((function(e,t){e=i(e,t);return[e[0]*a+h,g-e[1]*a]})),a=150,s=480,l=250,u=0,c=0,d=0,f=0,p=0,h,g,m=fn,v=R,y=null,b=null,_;function w(e){e=r(e[0]*Oe,e[1]*Oe);return[e[0]*a+h,g-e[1]*a]}function C(e){e=r.invert((e[0]-h)/a,(g-e[1])/a);return e&&[e[0]*Re,e[1]*Re]}w.stream=function(e){if(_)_.valid=false;_=Yn(m(n,o(v(e))));_.valid=true;return _};w.clipAngle=function(e){if(!arguments.length)return y;m=e==null?(y=e,fn):vn((y=+e)*Oe);return E()};w.clipExtent=function(e){if(!arguments.length)return b;b=e;v=e?_n(e[0][0],e[0][1],e[1][0],e[1][1]):R;return E()};w.scale=function(e){if(!arguments.length)return a;a=+e;return A()};w.translate=function(e){if(!arguments.length)return[s,l];s=+e[0];l=+e[1];return A()};w.center=function(e){if(!arguments.length)return[u*Re,c*Re];u=e[0]%360*Oe;c=e[1]%360*Oe;return A()};w.rotate=function(e){if(!arguments.length)return[d*Re,f*Re,p*Re];d=e[0]%360*Oe;f=e[1]%360*Oe;p=e.length>2?e[2]%360*Oe:0;return A()};e.rebind(w,o,"precision");function A(){r=nn(n=Kn(d,f,p),i);var e=i(u,c);h=s-e[0]*a;g=l+e[1]*a;return E()}function E(){if(_)_.valid=false,_=null;return w}return function(){i=t.apply(this,arguments);w.invert=i.invert&&C;return A()}}function Yn(e){return Vn(e,(function(t,i){e.point(t*Oe,i*Oe)}))}function qn(e,t){return[e,t]}(e.geo.equirectangular=function(){return zn(qn)}).raw=qn.invert=qn;e.geo.rotation=function(e){e=Kn(e[0]%360*Oe,e[1]*Oe,e.length>2?e[2]*Oe:0);function t(t){t=e(t[0]*Oe,t[1]*Oe);return t[0]*=Re,t[1]*=Re,t}t.invert=function(t){t=e.invert(t[0]*Oe,t[1]*Oe);return t[0]*=Re,t[1]*=Re,t};return t};function Xn(e,t){return[e>Te?e-Se:e<-Te?e+Se:e,t]}Xn.invert=qn;function Kn(e,t,i){return e?t||i?nn(Zn(e),Jn(t,i)):Zn(e):t||i?Jn(t,i):Xn}function Qn(e){return function(t,i){return t+=e,[t>Te?t-Se:t<-Te?t+Se:t,i]}}function Zn(e){var t=Qn(e);t.invert=Qn(-e);return t}function Jn(e,t){var i=Math.cos(e),n=Math.sin(e),r=Math.cos(t),o=Math.sin(t);function a(e,t){var a=Math.cos(t),s=Math.cos(e)*a,l=Math.sin(e)*a,u=Math.sin(t),c=u*i+s*n;return[Math.atan2(l*r-c*o,s*i-u*n),Me(c*r+l*o)]}a.invert=function(e,t){var a=Math.cos(t),s=Math.cos(e)*a,l=Math.sin(e)*a,u=Math.sin(t),c=u*r-l*o;return[Math.atan2(l*r+u*o,s*i+c*n),Me(c*i-s*n)]};return a}e.geo.circle=function(){var e=[0,0],t,i=6,n;function r(){var t=typeof e==="function"?e.apply(this,arguments):e,i=Kn(-t[0]*Oe,-t[1]*Oe,0).invert,r=[];n(null,null,1,{point:function(e,t){r.push(e=i(e,t));e[0]*=Re,e[1]*=Re}});return{type:"Polygon",coordinates:[r]}}r.origin=function(t){if(!arguments.length)return e;e=t;return r};r.angle=function(e){if(!arguments.length)return t;n=er((t=+e)*Oe,i*Oe);return r};r.precision=function(e){if(!arguments.length)return i;n=er(t*Oe,(i=+e)*Oe);return r};return r.angle(90)};function er(e,t){var i=Math.cos(e),n=Math.sin(e);return function(r,o,a,s){var l=a*t;if(r!=null){r=tr(i,r);o=tr(i,o);if(a>0?r<o:r>o)r+=a*Se}else{r=e+a*Se;o=e-.5*l}for(var u,c=r;a>0?c>o:c<o;c-=l){s.point((u=Fi([i,-n*Math.cos(c),-n*Math.sin(c)]))[0],u[1])}}}function tr(e,t){var i=Ri(t);i[0]-=e;Li(i);var n=Ie(-i[1]);return((-i[2]<0?-n:n)+2*Math.PI-Ee)%(2*Math.PI)}e.geo.distance=function(e,t){var i=(t[0]-e[0])*Oe,n=e[1]*Oe,r=t[1]*Oe,o=Math.sin(i),a=Math.cos(i),s=Math.sin(n),l=Math.cos(n),u=Math.sin(r),c=Math.cos(r),d;return Math.atan2(Math.sqrt((d=c*o)*d+(d=l*u-s*c*a)*d),s*u+l*c*a)};e.geo.graticule=function(){var t,i,n,r,o,a,s,l,u=10,c=u,d=90,f=360,p,h,g,m,y=2.5;function b(){return{type:"MultiLineString",coordinates:_()}}function _(){return e.range(Math.ceil(r/d)*d,n,d).map(g).concat(e.range(Math.ceil(l/f)*f,s,f).map(m)).concat(e.range(Math.ceil(i/u)*u,t,u).filter((function(e){return v(e%d)>Ee})).map(p)).concat(e.range(Math.ceil(a/c)*c,o,c).filter((function(e){return v(e%f)>Ee})).map(h))}b.lines=function(){return _().map((function(e){return{type:"LineString",coordinates:e}}))};b.outline=function(){return{type:"Polygon",coordinates:[g(r).concat(m(s).slice(1),g(n).reverse().slice(1),m(l).reverse().slice(1))]}};b.extent=function(e){if(!arguments.length)return b.minorExtent();return b.majorExtent(e).minorExtent(e)};b.majorExtent=function(e){if(!arguments.length)return[[r,l],[n,s]];r=+e[0][0],n=+e[1][0];l=+e[0][1],s=+e[1][1];if(r>n)e=r,r=n,n=e;if(l>s)e=l,l=s,s=e;return b.precision(y)};b.minorExtent=function(e){if(!arguments.length)return[[i,a],[t,o]];i=+e[0][0],t=+e[1][0];a=+e[0][1],o=+e[1][1];if(i>t)e=i,i=t,t=e;if(a>o)e=a,a=o,o=e;return b.precision(y)};b.step=function(e){if(!arguments.length)return b.minorStep();return b.majorStep(e).minorStep(e)};b.majorStep=function(e){if(!arguments.length)return[d,f];d=+e[0],f=+e[1];return b};b.minorStep=function(e){if(!arguments.length)return[u,c];u=+e[0],c=+e[1];return b};b.precision=function(e){if(!arguments.length)return y;y=+e;p=ir(a,o,90);h=nr(i,t,y);g=ir(l,s,90);m=nr(r,n,y);return b};return b.majorExtent([[-180,-90+Ee],[180,90-Ee]]).minorExtent([[-180,-80-Ee],[180,80+Ee]])};function ir(t,i,n){var r=e.range(t,i-Ee,n).concat(i);return function(e){return r.map((function(t){return[e,t]}))}}function nr(t,i,n){var r=e.range(t,i-Ee,n).concat(i);return function(e){return r.map((function(t){return[t,e]}))}}function rr(e){return e.source}function or(e){return e.target}e.geo.greatArc=function(){var t=rr,i,n=or,r;function o(){return{type:"LineString",coordinates:[i||t.apply(this,arguments),r||n.apply(this,arguments)]}}o.distance=function(){return e.geo.distance(i||t.apply(this,arguments),r||n.apply(this,arguments))};o.source=function(e){if(!arguments.length)return t;t=e,i=typeof e==="function"?null:e;return o};o.target=function(e){if(!arguments.length)return n;n=e,r=typeof e==="function"?null:e;return o};o.precision=function(){return arguments.length?o:0};return o};e.geo.interpolate=function(e,t){return ar(e[0]*Oe,e[1]*Oe,t[0]*Oe,t[1]*Oe)};function ar(e,t,i,n){var r=Math.cos(t),o=Math.sin(t),a=Math.cos(n),s=Math.sin(n),l=r*Math.cos(e),u=r*Math.sin(e),c=a*Math.cos(i),d=a*Math.sin(i),f=2*Math.asin(Math.sqrt($e(n-t)+r*a*$e(i-e))),p=1/Math.sin(f);var h=f?function(e){var t=Math.sin(e*=f)*p,i=Math.sin(f-e)*p,n=i*l+t*c,r=i*u+t*d,a=i*o+t*s;return[Math.atan2(r,n)*Re,Math.atan2(a,Math.sqrt(n*n+r*r))*Re]}:function(){return[e*Re,t*Re]};h.distance=f;return h}e.geo.length=function(t){sr=0;e.geo.stream(t,lr);return sr};var sr;var lr={sphere:M,point:M,lineStart:ur,lineEnd:M,polygonStart:M,polygonEnd:M};function ur(){var e,t,i;lr.point=function(r,o){e=r*Oe,t=Math.sin(o*=Oe),i=Math.cos(o);lr.point=n};lr.lineEnd=function(){lr.point=lr.lineEnd=M};function n(n,r){var o=Math.sin(r*=Oe),a=Math.cos(r),s=v((n*=Oe)-e),l=Math.cos(s);sr+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=i*o-t*a*l)*s),t*o+i*a*l);e=n,t=o,i=a}}function cr(e,t){function i(t,i){var n=Math.cos(t),r=Math.cos(i),o=e(n*r);return[o*r*Math.sin(t),o*Math.sin(i)]}i.invert=function(e,i){var n=Math.sqrt(e*e+i*i),r=t(n),o=Math.sin(r),a=Math.cos(r);return[Math.atan2(e*o,n*a),Math.asin(n&&i*o/n)]};return i}var dr=cr((function(e){return Math.sqrt(2/(1+e))}),(function(e){return 2*Math.asin(e/2)}));(e.geo.azimuthalEqualArea=function(){return zn(dr)}).raw=dr;var fr=cr((function(e){var t=Math.acos(e);return t&&t/Math.sin(t)}),R);(e.geo.azimuthalEquidistant=function(){return zn(fr)}).raw=fr;function pr(e,t){var i=Math.cos(e),n=function(e){return Math.tan(Te/4+e/2)},r=e===t?Math.sin(e):Math.log(i/Math.cos(t))/Math.log(n(t)/n(e)),o=i*Math.pow(n(e),r)/r;if(!r)return mr;function a(e,t){if(o>0){if(t<-ke+Ee)t=-ke+Ee}else{if(t>ke-Ee)t=ke-Ee}var i=o/Math.pow(n(t),r);return[i*Math.sin(r*e),o-i*Math.cos(r*e)]}a.invert=function(e,t){var i=o-t,n=Ne(r)*Math.sqrt(e*e+i*i);return[Math.atan2(e,i)/r,2*Math.atan(Math.pow(o/n,1/r))-ke]};return a}(e.geo.conicConformal=function(){return wn(pr)}).raw=pr;function hr(e,t){var i=Math.cos(e),n=e===t?Math.sin(e):(i-Math.cos(t))/(t-e),r=i/n+e;if(v(n)<Ee)return qn;function o(e,t){var i=r-t;return[i*Math.sin(n*e),r-i*Math.cos(n*e)]}o.invert=function(e,t){var i=r-t;return[Math.atan2(e,i)/n,r-Ne(n)*Math.sqrt(e*e+i*i)]};return o}(e.geo.conicEquidistant=function(){return wn(hr)}).raw=hr;var gr=cr((function(e){return 1/e}),Math.atan);(e.geo.gnomonic=function(){return zn(gr)}).raw=gr;function mr(e,t){return[e,Math.log(Math.tan(Te/4+t/2))]}mr.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-ke]};function vr(e){var t=zn(e),i=t.scale,n=t.translate,r=t.clipExtent,o;t.scale=function(){var e=i.apply(t,arguments);return e===t?o?t.clipExtent(null):t:e};t.translate=function(){var e=n.apply(t,arguments);return e===t?o?t.clipExtent(null):t:e};t.clipExtent=function(e){var a=r.apply(t,arguments);if(a===t){if(o=e==null){var s=Te*i(),l=n();r([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else if(o){a=null}return a};return t.clipExtent(null)}(e.geo.mercator=function(){return vr(mr)}).raw=mr;var yr=cr((function(){return 1}),Math.asin);(e.geo.orthographic=function(){return zn(yr)}).raw=yr;var br=cr((function(e){return 1/(1+e)}),(function(e){return 2*Math.atan(e)}));(e.geo.stereographic=function(){return zn(br)}).raw=br;function _r(e,t){return[Math.log(Math.tan(Te/4+t/2)),-e]}_r.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-ke]};(e.geo.transverseMercator=function(){var e=vr(_r),t=e.center,i=e.rotate;e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])};e.rotate=function(e){return e?i([e[0],e[1],e.length>2?e[2]+90:90]):(e=i(),[e[0],e[1],e[2]-90])};return i([0,0,90])}).raw=_r;e.geom={};function wr(e){return e[0]}function Cr(e){return e[1]}e.geom.hull=function(e){var t=wr,i=Cr;if(arguments.length)return n(e);function n(e){if(e.length<3)return[];var n=wt(t),r=wt(i),o,a=e.length,s=[],l=[];for(o=0;o<a;o++){s.push([+n.call(this,e[o],o),+r.call(this,e[o],o),o])}s.sort(Er);for(o=0;o<a;o++)l.push([s[o][0],-s[o][1]]);var u=Ar(s),c=Ar(l);var d=c[0]===u[0],f=c[c.length-1]===u[u.length-1],p=[];for(o=u.length-1;o>=0;--o)p.push(e[s[u[o]][2]]);for(o=+d;o<c.length-f;++o)p.push(e[s[c[o]][2]]);return p}n.x=function(e){return arguments.length?(t=e,n):t};n.y=function(e){return arguments.length?(i=e,n):i};return n};function Ar(e){var t=e.length,i=[0,1],n=2;for(var r=2;r<t;r++){while(n>1&&Pe(e[i[n-2]],e[i[n-1]],e[r])<=0)--n;i[n++]=r}return i.slice(0,n)}function Er(e,t){return e[0]-t[0]||e[1]-t[1]}e.geom.polygon=function(e){j(e,xr);return e};var xr=e.geom.polygon.prototype=[];xr.area=function(){var e=-1,t=this.length,i,n=this[t-1],r=0;while(++e<t){i=n;n=this[e];r+=i[1]*n[0]-i[0]*n[1]}return r*.5};xr.centroid=function(e){var t=-1,i=this.length,n=0,r=0,o,a=this[i-1],s;if(!arguments.length)e=-1/(6*this.area());while(++t<i){o=a;a=this[t];s=o[0]*a[1]-a[0]*o[1];n+=(o[0]+a[0])*s;r+=(o[1]+a[1])*s}return[n*e,r*e]};xr.clip=function(e){var t,i=Dr(e),n=-1,r=this.length-Dr(this),o,a,s=this[r-1],l,u,c;while(++n<r){t=e.slice();e.length=0;l=this[n];u=t[(a=t.length-i)-1];o=-1;while(++o<a){c=t[o];if(Tr(c,s,l)){if(!Tr(u,s,l)){e.push(Sr(u,c,s,l))}e.push(c)}else if(Tr(u,s,l)){e.push(Sr(u,c,s,l))}u=c}if(i)e.push(e[0]);s=l}return e};function Tr(e,t,i){return(i[0]-t[0])*(e[1]-t[1])<(i[1]-t[1])*(e[0]-t[0])}function Sr(e,t,i,n){var r=e[0],o=i[0],a=t[0]-r,s=n[0]-o,l=e[1],u=i[1],c=t[1]-l,d=n[1]-u,f=(s*(l-u)-d*(r-o))/(d*a-s*c);return[r+f*a,l+f*c]}function Dr(e){var t=e[0],i=e[e.length-1];return!(t[0]-i[0]||t[1]-i[1])}var kr,Or,Rr,Nr=[],Pr,Ir,Mr=[];function Lr(){no(this);this.edge=this.site=this.circle=null}function Fr(e){var t=Nr.pop()||new Lr;t.site=e;return t}function Gr(e){qr(e);Rr.remove(e);Nr.push(e);no(e)}function $r(e){var t=e.circle,i=t.x,n=t.cy,r={x:i,y:n},o=e.P,a=e.N,s=[e];Gr(e);var l=o;while(l.circle&&v(i-l.circle.x)<Ee&&v(n-l.circle.cy)<Ee){o=l.P;s.unshift(l);Gr(l);l=o}s.unshift(l);qr(l);var u=a;while(u.circle&&v(i-u.circle.x)<Ee&&v(n-u.circle.cy)<Ee){a=u.N;s.push(u);Gr(u);u=a}s.push(u);qr(u);var c=s.length,d;for(d=1;d<c;++d){u=s[d];l=s[d-1];eo(u.edge,l.site,u.site,r)}l=s[0];u=s[c-1];u.edge=Zr(l.site,u.site,null,r);Yr(l);Yr(u)}function Wr(e){var t=e.x,i=e.y,n,r,o,a,s=Rr._;while(s){o=Hr(s,i)-t;if(o>Ee)s=s.L;else{a=t-jr(s,i);if(a>Ee){if(!s.R){n=s;break}s=s.R}else{if(o>-Ee){n=s.P;r=s}else if(a>-Ee){n=s;r=s.N}else{n=r=s}break}}}var l=Fr(e);Rr.insert(n,l);if(!n&&!r)return;if(n===r){qr(n);r=Fr(n.site);Rr.insert(l,r);l.edge=r.edge=Zr(n.site,l.site);Yr(n);Yr(r);return}if(!r){l.edge=Zr(n.site,l.site);return}qr(n);qr(r);var u=n.site,c=u.x,d=u.y,f=e.x-c,p=e.y-d,h=r.site,g=h.x-c,m=h.y-d,v=2*(f*m-p*g),y=f*f+p*p,b=g*g+m*m,_={x:(m*y-p*b)/v+c,y:(f*b-g*y)/v+d};eo(r.edge,u,h,_);l.edge=Zr(u,e,null,_);r.edge=Zr(e,h,null,_);Yr(n);Yr(r)}function Hr(e,t){var i=e.site,n=i.x,r=i.y,o=r-t;if(!o)return n;var a=e.P;if(!a)return-Infinity;i=a.site;var s=i.x,l=i.y,u=l-t;if(!u)return s;var c=s-n,d=1/o-1/u,f=c/u;if(d)return(-f+Math.sqrt(f*f-2*d*(c*c/(-2*u)-l+u/2+r-o/2)))/d+n;return(n+s)/2}function jr(e,t){var i=e.N;if(i)return Hr(i,t);var n=e.site;return n.y===t?n.x:Infinity}function Br(e){this.site=e;this.edges=[]}Br.prototype.prepare=function(){var e=this.edges,t=e.length,i;while(t--){i=e[t].edge;if(!i.b||!i.a)e.splice(t,1)}e.sort(zr);return e.length};function Vr(e){var t=e[0][0],i=e[1][0],n=e[0][1],r=e[1][1],o,a,s,l,u=Or,c=u.length,d,f,p,h,g,m;while(c--){d=u[c];if(!d||!d.prepare())continue;p=d.edges;h=p.length;f=0;while(f<h){m=p[f].end(),s=m.x,l=m.y;g=p[++f%h].start(),o=g.x,a=g.y;if(v(s-o)>Ee||v(l-a)>Ee){p.splice(f,0,new to(Jr(d.site,m,v(s-t)<Ee&&r-l>Ee?{x:t,y:v(o-t)<Ee?a:r}:v(l-r)<Ee&&i-s>Ee?{x:v(a-r)<Ee?o:i,y:r}:v(s-i)<Ee&&l-n>Ee?{x:i,y:v(o-i)<Ee?a:n}:v(l-n)<Ee&&s-t>Ee?{x:v(a-n)<Ee?o:t,y:n}:null),d.site,null));++h}}}}function zr(e,t){return t.angle-e.angle}function Ur(){no(this);this.x=this.y=this.arc=this.site=this.cy=null}function Yr(e){var t=e.P,i=e.N;if(!t||!i)return;var n=t.site,r=e.site,o=i.site;if(n===o)return;var a=r.x,s=r.y,l=n.x-a,u=n.y-s,c=o.x-a,d=o.y-s;var f=2*(l*d-u*c);if(f>=-xe)return;var p=l*l+u*u,h=c*c+d*d,g=(d*p-u*h)/f,m=(l*h-c*p)/f,d=m+s;var v=Mr.pop()||new Ur;v.arc=e;v.site=r;v.x=g+a;v.y=d+Math.sqrt(g*g+m*m);v.cy=d;e.circle=v;var y=null,b=Ir._;while(b){if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(b.L)b=b.L;else{y=b.P;break}}else{if(b.R)b=b.R;else{y=b;break}}}Ir.insert(y,v);if(!y)Pr=v}function qr(e){var t=e.circle;if(t){if(!t.P)Pr=t.N;Ir.remove(t);Mr.push(t);no(t);e.circle=null}}function Xr(e){var t=kr,i=yn(e[0][0],e[0][1],e[1][0],e[1][1]),n=t.length,r;while(n--){r=t[n];if(!Kr(r,e)||!i(r)||v(r.a.x-r.b.x)<Ee&&v(r.a.y-r.b.y)<Ee){r.a=r.b=null;t.splice(n,1)}}}function Kr(e,t){var i=e.b;if(i)return true;var n=e.a,r=t[0][0],o=t[1][0],a=t[0][1],s=t[1][1],l=e.l,u=e.r,c=l.x,d=l.y,f=u.x,p=u.y,h=(c+f)/2,g=(d+p)/2,m,v;if(p===d){if(h<r||h>=o)return;if(c>f){if(!n)n={x:h,y:a};else if(n.y>=s)return;i={x:h,y:s}}else{if(!n)n={x:h,y:s};else if(n.y<a)return;i={x:h,y:a}}}else{m=(c-f)/(p-d);v=g-m*h;if(m<-1||m>1){if(c>f){if(!n)n={x:(a-v)/m,y:a};else if(n.y>=s)return;i={x:(s-v)/m,y:s}}else{if(!n)n={x:(s-v)/m,y:s};else if(n.y<a)return;i={x:(a-v)/m,y:a}}}else{if(d<p){if(!n)n={x:r,y:m*r+v};else if(n.x>=o)return;i={x:o,y:m*o+v}}else{if(!n)n={x:o,y:m*o+v};else if(n.x<r)return;i={x:r,y:m*r+v}}}}e.a=n;e.b=i;return true}function Qr(e,t){this.l=e;this.r=t;this.a=this.b=null}function Zr(e,t,i,n){var r=new Qr(e,t);kr.push(r);if(i)eo(r,e,t,i);if(n)eo(r,t,e,n);Or[e.i].edges.push(new to(r,e,t));Or[t.i].edges.push(new to(r,t,e));return r}function Jr(e,t,i){var n=new Qr(e,null);n.a=t;n.b=i;kr.push(n);return n}function eo(e,t,i,n){if(!e.a&&!e.b){e.a=n;e.l=t;e.r=i}else if(e.l===i){e.b=n}else{e.a=n}}function to(e,t,i){var n=e.a,r=e.b;this.edge=e;this.site=t;this.angle=i?Math.atan2(i.y-t.y,i.x-t.x):e.l===t?Math.atan2(r.x-n.x,n.y-r.y):Math.atan2(n.x-r.x,r.y-n.y)}to.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function io(){this._=null}function no(e){e.U=e.C=e.L=e.R=e.P=e.N=null}io.prototype={insert:function(e,t){var i,n,r;if(e){t.P=e;t.N=e.N;if(e.N)e.N.P=t;e.N=t;if(e.R){e=e.R;while(e.L)e=e.L;e.L=t}else{e.R=t}i=e}else if(this._){e=ao(this._);t.P=null;t.N=e;e.P=e.L=t;i=e}else{t.P=t.N=null;this._=t;i=null}t.L=t.R=null;t.U=i;t.C=true;e=t;while(i&&i.C){n=i.U;if(i===n.L){r=n.R;if(r&&r.C){i.C=r.C=false;n.C=true;e=n}else{if(e===i.R){ro(this,i);e=i;i=e.U}i.C=false;n.C=true;oo(this,n)}}else{r=n.L;if(r&&r.C){i.C=r.C=false;n.C=true;e=n}else{if(e===i.L){oo(this,i);e=i;i=e.U}i.C=false;n.C=true;ro(this,n)}}i=e.U}this._.C=false},remove:function(e){if(e.N)e.N.P=e.P;if(e.P)e.P.N=e.N;e.N=e.P=null;var t=e.U,i,n=e.L,r=e.R,o,a;if(!n)o=r;else if(!r)o=n;else o=ao(r);if(t){if(t.L===e)t.L=o;else t.R=o}else{this._=o}if(n&&r){a=o.C;o.C=e.C;o.L=n;n.U=o;if(o!==r){t=o.U;o.U=e.U;e=o.R;t.L=e;o.R=r;r.U=o}else{o.U=t;t=o;e=o.R}}else{a=e.C;e=o}if(e)e.U=t;if(a)return;if(e&&e.C){e.C=false;return}do{if(e===this._)break;if(e===t.L){i=t.R;if(i.C){i.C=false;t.C=true;ro(this,t);i=t.R}if(i.L&&i.L.C||i.R&&i.R.C){if(!i.R||!i.R.C){i.L.C=false;i.C=true;oo(this,i);i=t.R}i.C=t.C;t.C=i.R.C=false;ro(this,t);e=this._;break}}else{i=t.L;if(i.C){i.C=false;t.C=true;oo(this,t);i=t.L}if(i.L&&i.L.C||i.R&&i.R.C){if(!i.L||!i.L.C){i.R.C=false;i.C=true;ro(this,i);i=t.L}i.C=t.C;t.C=i.L.C=false;oo(this,t);e=this._;break}}i.C=true;e=t;t=t.U}while(!e.C);if(e)e.C=false}};function ro(e,t){var i=t,n=t.R,r=i.U;if(r){if(r.L===i)r.L=n;else r.R=n}else{e._=n}n.U=r;i.U=n;i.R=n.L;if(i.R)i.R.U=i;n.L=i}function oo(e,t){var i=t,n=t.L,r=i.U;if(r){if(r.L===i)r.L=n;else r.R=n}else{e._=n}n.U=r;i.U=n;i.L=n.R;if(i.L)i.L.U=i;n.R=i}function ao(e){while(e.L)e=e.L;return e}function so(e,t){var i=e.sort(lo).pop(),n,r,o;kr=[];Or=new Array(e.length);Rr=new io;Ir=new io;while(true){o=Pr;if(i&&(!o||i.y<o.y||i.y===o.y&&i.x<o.x)){if(i.x!==n||i.y!==r){Or[i.i]=new Br(i);Wr(i);n=i.x,r=i.y}i=e.pop()}else if(o){$r(o.arc)}else{break}}if(t)Xr(t),Vr(t);var a={cells:Or,edges:kr};Rr=Ir=kr=Or=null;return a}function lo(e,t){return t.y-e.y||t.x-e.x}e.geom.voronoi=function(e){var t=wr,i=Cr,n=t,r=i,o=uo;if(e)return a(e);function a(e){var t=new Array(e.length),i=o[0][0],n=o[0][1],r=o[1][0],a=o[1][1];so(s(e),o).cells.forEach((function(o,s){var l=o.edges,u=o.site,c=t[s]=l.length?l.map((function(e){var t=e.start();return[t.x,t.y]})):u.x>=i&&u.x<=r&&u.y>=n&&u.y<=a?[[i,a],[r,a],[r,n],[i,n]]:[];c.point=e[s]}));return t}function s(e){return e.map((function(e,t){return{x:Math.round(n(e,t)/Ee)*Ee,y:Math.round(r(e,t)/Ee)*Ee,i:t}}))}a.links=function(e){return so(s(e)).edges.filter((function(e){return e.l&&e.r})).map((function(t){return{source:e[t.l.i],target:e[t.r.i]}}))};a.triangles=function(e){var t=[];so(s(e)).cells.forEach((function(i,n){var r=i.site,o=i.edges.sort(zr),a=-1,s=o.length,l,u,c=o[s-1].edge,d=c.l===r?c.r:c.l;while(++a<s){l=c;u=d;c=o[a].edge;d=c.l===r?c.r:c.l;if(n<u.i&&n<d.i&&co(r,u,d)<0){t.push([e[n],e[u.i],e[d.i]])}}}));return t};a.x=function(e){return arguments.length?(n=wt(t=e),a):t};a.y=function(e){return arguments.length?(r=wt(i=e),a):i};a.clipExtent=function(e){if(!arguments.length)return o===uo?null:o;o=e==null?uo:e;return a};a.size=function(e){if(!arguments.length)return o===uo?null:o&&o[1];return a.clipExtent(e&&[[0,0],e])};return a};var uo=[[-1e6,-1e6],[1e6,1e6]];function co(e,t,i){return(e.x-i.x)*(t.y-e.y)-(e.x-t.x)*(i.y-e.y)}e.geom.delaunay=function(t){return e.geom.voronoi().triangles(t)};e.geom.quadtree=function(e,t,i,n,r){var o=wr,a=Cr,s;if(s=arguments.length){o=fo;a=po;if(s===3){r=i;n=t;i=t=0}return l(e)}function l(e){var l,u=wt(o),c=wt(a),d,f,p,h,g,m,y,b;if(t!=null){g=t,m=i,y=n,b=r}else{y=b=-(g=m=Infinity);d=[],f=[];h=e.length;if(s)for(p=0;p<h;++p){l=e[p];if(l.x<g)g=l.x;if(l.y<m)m=l.y;if(l.x>y)y=l.x;if(l.y>b)b=l.y;d.push(l.x);f.push(l.y)}else for(p=0;p<h;++p){var _=+u(l=e[p],p),w=+c(l,p);if(_<g)g=_;if(w<m)m=w;if(_>y)y=_;if(w>b)b=w;d.push(_);f.push(w)}}var C=y-g,A=b-m;if(C>A)b=m+C;else y=g+A;function E(e,t,i,n,r,o,a,s){if(isNaN(i)||isNaN(n))return;if(e.leaf){var l=e.x,u=e.y;if(l!=null){if(v(l-i)+v(u-n)<.01){x(e,t,i,n,r,o,a,s)}else{var c=e.point;e.x=e.y=e.point=null;x(e,c,l,u,r,o,a,s);x(e,t,i,n,r,o,a,s)}}else{e.x=i,e.y=n,e.point=t}}else{x(e,t,i,n,r,o,a,s)}}function x(e,t,i,n,r,o,a,s){var l=(r+a)*.5,u=(o+s)*.5,c=i>=l,d=n>=u,f=d<<1|c;e.leaf=false;e=e.nodes[f]||(e.nodes[f]=ho());if(c)r=l;else a=l;if(d)o=u;else s=u;E(e,t,i,n,r,o,a,s)}var T=ho();T.add=function(e){E(T,e,+u(e,++p),+c(e,p),g,m,y,b)};T.visit=function(e){go(e,T,g,m,y,b)};T.find=function(e){return mo(T,e[0],e[1],g,m,y,b)};p=-1;if(t==null){while(++p<h){E(T,e[p],d[p],f[p],g,m,y,b)}--p}else e.forEach(T.add);d=f=e=l=null;return T}l.x=function(e){return arguments.length?(o=e,l):o};l.y=function(e){return arguments.length?(a=e,l):a};l.extent=function(e){if(!arguments.length)return t==null?null:[[t,i],[n,r]];if(e==null)t=i=n=r=null;else t=+e[0][0],i=+e[0][1],n=+e[1][0],r=+e[1][1];return l};l.size=function(e){if(!arguments.length)return t==null?null:[n-t,r-i];if(e==null)t=i=n=r=null;else t=i=0,n=+e[0],r=+e[1];return l};return l};function fo(e){return e.x}function po(e){return e.y}function ho(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function go(e,t,i,n,r,o){if(!e(t,i,n,r,o)){var a=(i+r)*.5,s=(n+o)*.5,l=t.nodes;if(l[0])go(e,l[0],i,n,a,s);if(l[1])go(e,l[1],a,n,r,s);if(l[2])go(e,l[2],i,s,a,o);if(l[3])go(e,l[3],a,s,r,o)}}function mo(e,t,i,n,r,o,a){var s=Infinity,l;(function e(u,c,d,f,p){if(c>o||d>a||f<n||p<r)return;if(h=u.point){var h,g=t-u.x,m=i-u.y,v=g*g+m*m;if(v<s){var y=Math.sqrt(s=v);n=t-y,r=i-y;o=t+y,a=i+y;l=h}}var b=u.nodes,_=(c+f)*.5,w=(d+p)*.5,C=t>=_,A=i>=w;for(var E=A<<1|C,x=E+4;E<x;++E){if(u=b[E&3])switch(E&3){case 0:e(u,c,d,_,w);break;case 1:e(u,_,d,f,w);break;case 2:e(u,c,w,_,p);break;case 3:e(u,_,w,f,p);break}}})(e,n,r,o,a);return l}e.interpolateRgb=vo;function vo(t,i){t=e.rgb(t);i=e.rgb(i);var n=t.r,r=t.g,o=t.b,a=i.r-n,s=i.g-r,l=i.b-o;return function(e){return"#"+ht(Math.round(n+a*e))+ht(Math.round(r+s*e))+ht(Math.round(o+l*e))}}e.interpolateObject=yo;function yo(e,t){var i={},n={},r;for(r in e){if(r in t){i[r]=Ao(e[r],t[r])}else{n[r]=e[r]}}for(r in t){if(!(r in e)){n[r]=t[r]}}return function(e){for(r in i)n[r]=i[r](e);return n}}e.interpolateNumber=bo;function bo(e,t){e=+e,t=+t;return function(i){return e*(1-i)+t*i}}e.interpolateString=_o;function _o(e,t){var i=wo.lastIndex=Co.lastIndex=0,n,r,o,a=-1,s=[],l=[];e=e+"",t=t+"";while((n=wo.exec(e))&&(r=Co.exec(t))){if((o=r.index)>i){o=t.slice(i,o);if(s[a])s[a]+=o;else s[++a]=o}if((n=n[0])===(r=r[0])){if(s[a])s[a]+=r;else s[++a]=r}else{s[++a]=null;l.push({i:a,x:bo(n,r)})}i=Co.lastIndex}if(i<t.length){o=t.slice(i);if(s[a])s[a]+=o;else s[++a]=o}return s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var i=0,n;i<t;++i)s[(n=l[i]).i]=n.x(e);return s.join("")})}var wo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Co=new RegExp(wo.source,"g");e.interpolate=Ao;function Ao(t,i){var n=e.interpolators.length,r;while(--n>=0&&!(r=e.interpolators[n](t,i)));return r}e.interpolators=[function(e,t){var i=typeof t;return(i==="string"?_t.has(t)||/^(#|rgb\(|hsl\()/.test(t)?vo:_o:t instanceof Ue?vo:Array.isArray(t)?Eo:i==="object"&&isNaN(t)?yo:bo)(e,t)}];e.interpolateArray=Eo;function Eo(e,t){var i=[],n=[],r=e.length,o=t.length,a=Math.min(e.length,t.length),s;for(s=0;s<a;++s)i.push(Ao(e[s],t[s]));for(;s<r;++s)n[s]=e[s];for(;s<o;++s)n[s]=t[s];return function(e){for(s=0;s<a;++s)n[s]=i[s](e);return n}}var xo=function(){return R};var To=e.map({linear:xo,poly:Io,quad:function(){return Ro},cubic:function(){return No},sin:function(){return Mo},exp:function(){return Lo},circle:function(){return Fo},elastic:Go,back:$o,bounce:function(){return Wo}});var So=e.map({in:R,out:ko,"in-out":Oo,"out-in":function(e){return Oo(ko(e))}});e.ease=function(e){var i=e.indexOf("-"),n=i>=0?e.slice(0,i):e,r=i>=0?e.slice(i+1):"in";n=To.get(n)||xo;r=So.get(r)||R;return Do(r(n.apply(null,t.call(arguments,1))))};function Do(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function ko(e){return function(t){return 1-e(1-t)}}function Oo(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Ro(e){return e*e}function No(e){return e*e*e}function Po(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,i=t*e;return 4*(e<.5?i:3*(e-t)+i-.75)}function Io(e){return function(t){return Math.pow(t,e)}}function Mo(e){return 1-Math.cos(e*ke)}function Lo(e){return Math.pow(2,10*(e-1))}function Fo(e){return 1-Math.sqrt(1-e*e)}function Go(e,t){var i;if(arguments.length<2)t=.45;if(arguments.length)i=t/Se*Math.asin(1/e);else e=1,i=t/4;return function(n){return 1+e*Math.pow(2,-10*n)*Math.sin((n-i)*Se/t)}}function $o(e){if(!e)e=1.70158;return function(t){return t*t*((e+1)*t-e)}}function Wo(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}e.interpolateHcl=Ho;function Ho(t,i){t=e.hcl(t);i=e.hcl(i);var n=t.h,r=t.c,o=t.l,a=i.h-n,s=i.c-r,l=i.l-o;if(isNaN(s))s=0,r=isNaN(r)?i.c:r;if(isNaN(a))a=0,n=isNaN(n)?i.h:n;else if(a>180)a-=360;else if(a<-180)a+=360;return function(e){return Ze(n+a*e,r+s*e,o+l*e)+""}}e.interpolateHsl=jo;function jo(t,i){t=e.hsl(t);i=e.hsl(i);var n=t.h,r=t.s,o=t.l,a=i.h-n,s=i.s-r,l=i.l-o;if(isNaN(s))s=0,r=isNaN(r)?i.s:r;if(isNaN(a))a=0,n=isNaN(n)?i.h:n;else if(a>180)a-=360;else if(a<-180)a+=360;return function(e){return Xe(n+a*e,r+s*e,o+l*e)+""}}e.interpolateLab=Bo;function Bo(t,i){t=e.lab(t);i=e.lab(i);var n=t.l,r=t.a,o=t.b,a=i.l-n,s=i.a-r,l=i.b-o;return function(e){return ot(n+a*e,r+s*e,o+l*e)+""}}e.interpolateRound=Vo;function Vo(e,t){t-=e;return function(i){return Math.round(e+t*i)}}e.transform=function(t){var i=n.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(e){if(e!=null){i.setAttribute("transform",e);var t=i.transform.baseVal.consolidate()}return new zo(t?t.matrix:Xo)})(t)};function zo(e){var t=[e.a,e.b],i=[e.c,e.d],n=Yo(t),r=Uo(t,i),o=Yo(qo(i,t,-r))||0;if(t[0]*i[1]<i[0]*t[1]){t[0]*=-1;t[1]*=-1;n*=-1;r*=-1}this.rotate=(n?Math.atan2(t[1],t[0]):Math.atan2(-i[0],i[1]))*Re;this.translate=[e.e,e.f];this.scale=[n,o];this.skew=o?Math.atan2(r,o)*Re:0}zo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Uo(e,t){return e[0]*t[0]+e[1]*t[1]}function Yo(e){var t=Math.sqrt(Uo(e,e));if(t){e[0]/=t;e[1]/=t}return t}function qo(e,t,i){e[0]+=i*t[0];e[1]+=i*t[1];return e}var Xo={a:1,b:0,c:0,d:1,e:0,f:0};e.interpolateTransform=Ko;function Ko(t,i){var n=[],r=[],o,a=e.transform(t),s=e.transform(i),l=a.translate,u=s.translate,c=a.rotate,d=s.rotate,f=a.skew,p=s.skew,h=a.scale,g=s.scale;if(l[0]!=u[0]||l[1]!=u[1]){n.push("translate(",null,",",null,")");r.push({i:1,x:bo(l[0],u[0])},{i:3,x:bo(l[1],u[1])})}else if(u[0]||u[1]){n.push("translate("+u+")")}else{n.push("")}if(c!=d){if(c-d>180)d+=360;else if(d-c>180)c+=360;r.push({i:n.push(n.pop()+"rotate(",null,")")-2,x:bo(c,d)})}else if(d){n.push(n.pop()+"rotate("+d+")")}if(f!=p){r.push({i:n.push(n.pop()+"skewX(",null,")")-2,x:bo(f,p)})}else if(p){n.push(n.pop()+"skewX("+p+")")}if(h[0]!=g[0]||h[1]!=g[1]){o=n.push(n.pop()+"scale(",null,",",null,")");r.push({i:o-4,x:bo(h[0],g[0])},{i:o-2,x:bo(h[1],g[1])})}else if(g[0]!=1||g[1]!=1){n.push(n.pop()+"scale("+g+")")}o=r.length;return function(e){var t=-1,i;while(++t<o)n[(i=r[t]).i]=i.x(e);return n.join("")}}function Qo(e,t){t=(t-=e=+e)||1/t;return function(i){return(i-e)/t}}function Zo(e,t){t=(t-=e=+e)||1/t;return function(i){return Math.max(0,Math.min(1,(i-e)/t))}}e.layout={};e.layout.bundle=function(){return function(e){var t=[],i=-1,n=e.length;while(++i<n)t.push(Jo(e[i]));return t}};function Jo(e){var t=e.source,i=e.target,n=ta(t,i),r=[t];while(t!==n){t=t.parent;r.push(t)}var o=r.length;while(i!==n){r.splice(o,0,i);i=i.parent}return r}function ea(e){var t=[],i=e.parent;while(i!=null){t.push(e);e=i;i=i.parent}t.push(e);return t}function ta(e,t){if(e===t)return e;var i=ea(e),n=ea(t),r=i.pop(),o=n.pop(),a=null;while(r===o){a=r;r=i.pop();o=n.pop()}return a}e.layout.chord=function(){var t={},i,n,r,o,a=0,s,l,u;function c(){var t={},c=[],f=e.range(o),p=[],h,g,m,v,y;i=[];n=[];h=0,v=-1;while(++v<o){g=0,y=-1;while(++y<o){g+=r[v][y]}c.push(g);p.push(e.range(o));h+=g}if(s){f.sort((function(e,t){return s(c[e],c[t])}))}if(l){p.forEach((function(e,t){e.sort((function(e,i){return l(r[t][e],r[t][i])}))}))}h=(Se-a*o)/h;g=0,v=-1;while(++v<o){m=g,y=-1;while(++y<o){var b=f[v],_=p[b][y],w=r[b][_],C=g,A=g+=w*h;t[b+"-"+_]={index:b,subindex:_,startAngle:C,endAngle:A,value:w}}n[b]={index:b,startAngle:m,endAngle:g,value:(g-m)/h};g+=a}v=-1;while(++v<o){y=v-1;while(++y<o){var E=t[v+"-"+y],x=t[y+"-"+v];if(E.value||x.value){i.push(E.value<x.value?{source:x,target:E}:{source:E,target:x})}}}if(u)d()}function d(){i.sort((function(e,t){return u((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)}))}t.matrix=function(e){if(!arguments.length)return r;o=(r=e)&&r.length;i=n=null;return t};t.padding=function(e){if(!arguments.length)return a;a=e;i=n=null;return t};t.sortGroups=function(e){if(!arguments.length)return s;s=e;i=n=null;return t};t.sortSubgroups=function(e){if(!arguments.length)return l;l=e;i=null;return t};t.sortChords=function(e){if(!arguments.length)return u;u=e;if(i)d();return t};t.chords=function(){if(!i)c();return i};t.groups=function(){if(!n)c();return n};return t};e.layout.force=function(){var t={},i=e.dispatch("start","tick","end"),n=[1,1],r,o,a=.9,s=sa,l=la,u=-30,c=ua,d=.1,f=.64,p=[],h=[],g,m,v;function y(e){return function(t,i,n,r){if(t.point!==e){var o=t.cx-e.x,a=t.cy-e.y,s=r-i,l=o*o+a*a;if(s*s/f<l){if(l<c){var u=t.charge/l;e.px-=o*u;e.py-=a*u}return true}if(t.point&&l&&l<c){var u=t.pointCharge/l;e.px-=o*u;e.py-=a*u}}return!t.charge}}t.tick=function(){if((o*=.99)<.005){i.end({type:"end",alpha:o=0});return true}var t=p.length,r=h.length,s,l,c,f,b,_,w,C,A;for(l=0;l<r;++l){c=h[l];f=c.source;b=c.target;C=b.x-f.x;A=b.y-f.y;if(_=C*C+A*A){_=o*m[l]*((_=Math.sqrt(_))-g[l])/_;C*=_;A*=_;b.x-=C*(w=f.weight/(b.weight+f.weight));b.y-=A*w;f.x+=C*(w=1-w);f.y+=A*w}}if(w=o*d){C=n[0]/2;A=n[1]/2;l=-1;if(w)while(++l<t){c=p[l];c.x+=(C-c.x)*w;c.y+=(A-c.y)*w}}if(u){aa(s=e.geom.quadtree(p),o,v);l=-1;while(++l<t){if(!(c=p[l]).fixed){s.visit(y(c))}}}l=-1;while(++l<t){c=p[l];if(c.fixed){c.x=c.px;c.y=c.py}else{c.x-=(c.px-(c.px=c.x))*a;c.y-=(c.py-(c.py=c.y))*a}}i.tick({type:"tick",alpha:o})};t.nodes=function(e){if(!arguments.length)return p;p=e;return t};t.links=function(e){if(!arguments.length)return h;h=e;return t};t.size=function(e){if(!arguments.length)return n;n=e;return t};t.linkDistance=function(e){if(!arguments.length)return s;s=typeof e==="function"?e:+e;return t};t.distance=t.linkDistance;t.linkStrength=function(e){if(!arguments.length)return l;l=typeof e==="function"?e:+e;return t};t.friction=function(e){if(!arguments.length)return a;a=+e;return t};t.charge=function(e){if(!arguments.length)return u;u=typeof e==="function"?e:+e;return t};t.chargeDistance=function(e){if(!arguments.length)return Math.sqrt(c);c=e*e;return t};t.gravity=function(e){if(!arguments.length)return d;d=+e;return t};t.theta=function(e){if(!arguments.length)return Math.sqrt(f);f=e*e;return t};t.alpha=function(n){if(!arguments.length)return o;n=+n;if(o){if(n>0)o=n;else o=0}else if(n>0){i.start({type:"start",alpha:o=n});e.timer(t.tick)}return t};t.start=function(){var e,i=p.length,r=h.length,o=n[0],a=n[1],c,d;for(e=0;e<i;++e){(d=p[e]).index=e;d.weight=0}for(e=0;e<r;++e){d=h[e];if(typeof d.source=="number")d.source=p[d.source];if(typeof d.target=="number")d.target=p[d.target];++d.source.weight;++d.target.weight}for(e=0;e<i;++e){d=p[e];if(isNaN(d.x))d.x=f("x",o);if(isNaN(d.y))d.y=f("y",a);if(isNaN(d.px))d.px=d.x;if(isNaN(d.py))d.py=d.y}g=[];if(typeof s==="function")for(e=0;e<r;++e)g[e]=+s.call(this,h[e],e);else for(e=0;e<r;++e)g[e]=s;m=[];if(typeof l==="function")for(e=0;e<r;++e)m[e]=+l.call(this,h[e],e);else for(e=0;e<r;++e)m[e]=l;v=[];if(typeof u==="function")for(e=0;e<i;++e)v[e]=+u.call(this,p[e],e);else for(e=0;e<i;++e)v[e]=u;function f(t,n){if(!c){c=new Array(i);for(s=0;s<i;++s){c[s]=[]}for(s=0;s<r;++s){var o=h[s];c[o.source.index].push(o.target);c[o.target.index].push(o.source)}}var a=c[e],s=-1,l=a.length,u;while(++s<l)if(!isNaN(u=a[s][t]))return u;return Math.random()*n}return t.resume()};t.resume=function(){return t.alpha(.1)};t.stop=function(){return t.alpha(0)};t.drag=function(){if(!r)r=e.behavior.drag().origin(R).on("dragstart.force",ia).on("drag.force",b).on("dragend.force",na);if(!arguments.length)return r;this.on("mouseover.force",ra).on("mouseout.force",oa).call(r)};function b(i){i.px=e.event.x,i.py=e.event.y;t.resume()}return e.rebind(t,i,"on")};function ia(e){e.fixed|=2}function na(e){e.fixed&=~6}function ra(e){e.fixed|=4;e.px=e.x,e.py=e.y}function oa(e){e.fixed&=~4}function aa(e,t,i){var n=0,r=0;e.charge=0;if(!e.leaf){var o=e.nodes,a=o.length,s=-1,l;while(++s<a){l=o[s];if(l==null)continue;aa(l,t,i);e.charge+=l.charge;n+=l.charge*l.cx;r+=l.charge*l.cy}}if(e.point){if(!e.leaf){e.point.x+=Math.random()-.5;e.point.y+=Math.random()-.5}var u=t*i[e.point.index];e.charge+=e.pointCharge=u;n+=u*e.point.x;r+=u*e.point.y}e.cx=n/e.charge;e.cy=r/e.charge}var sa=20,la=1,ua=Infinity;e.layout.hierarchy=function(){var e=ga,t=pa,i=ha;function n(r){var o=[r],a=[],s;r.depth=0;while((s=o.pop())!=null){a.push(s);if((u=t.call(n,s,s.depth))&&(l=u.length)){var l,u,c;while(--l>=0){o.push(c=u[l]);c.parent=s;c.depth=s.depth+1}if(i)s.value=0;s.children=u}else{if(i)s.value=+i.call(n,s,s.depth)||0;delete s.children}}fa(r,(function(t){var n,r;if(e&&(n=t.children))n.sort(e);if(i&&(r=t.parent))r.value+=t.value}));return a}n.sort=function(t){if(!arguments.length)return e;e=t;return n};n.children=function(e){if(!arguments.length)return t;t=e;return n};n.value=function(e){if(!arguments.length)return i;i=e;return n};n.revalue=function(e){if(i){da(e,(function(e){if(e.children)e.value=0}));fa(e,(function(e){var t;if(!e.children)e.value=+i.call(n,e,e.depth)||0;if(t=e.parent)t.value+=e.value}))}return e};return n};function ca(t,i){e.rebind(t,i,"sort","children","value");t.nodes=t;t.links=ma;return t}function da(e,t){var i=[e];while((e=i.pop())!=null){t(e);if((r=e.children)&&(n=r.length)){var n,r;while(--n>=0)i.push(r[n])}}}function fa(e,t){var i=[e],n=[];while((e=i.pop())!=null){n.push(e);if((a=e.children)&&(o=a.length)){var r=-1,o,a;while(++r<o)i.push(a[r])}}while((e=n.pop())!=null){t(e)}}function pa(e){return e.children}function ha(e){return e.value}function ga(e,t){return t.value-e.value}function ma(t){return e.merge(t.map((function(e){return(e.children||[]).map((function(t){return{source:e,target:t}}))})))}e.layout.partition=function(){var t=e.layout.hierarchy(),i=[1,1];function n(e,t,i,r){var o=e.children;e.x=t;e.y=e.depth*r;e.dx=i;e.dy=r;if(o&&(s=o.length)){var a=-1,s,l,u;i=e.value?i/e.value:0;while(++a<s){n(l=o[a],t,u=l.value*i,r);t+=u}}}function r(e){var t=e.children,i=0;if(t&&(o=t.length)){var n=-1,o;while(++n<o)i=Math.max(i,r(t[n]))}return 1+i}function o(e,o){var a=t.call(this,e,o);n(a[0],0,i[0],i[1]/r(a[0]));return a}o.size=function(e){if(!arguments.length)return i;i=e;return o};return ca(o,t)};e.layout.pie=function(){var t=Number,i=va,n=0,r=Se,o=0;function a(s){var l=s.length,u=s.map((function(e,i){return+t.call(a,e,i)})),c=+(typeof n==="function"?n.apply(this,arguments):n),d=(typeof r==="function"?r.apply(this,arguments):r)-c,f=Math.min(Math.abs(d)/l,+(typeof o==="function"?o.apply(this,arguments):o)),p=f*(d<0?-1:1),h=(d-l*p)/e.sum(u),g=e.range(l),m=[],v;if(i!=null)g.sort(i===va?function(e,t){return u[t]-u[e]}:function(e,t){return i(s[e],s[t])});g.forEach((function(e){m[e]={data:s[e],value:v=u[e],startAngle:c,endAngle:c+=v*h+p,padAngle:f}}));return m}a.value=function(e){if(!arguments.length)return t;t=e;return a};a.sort=function(e){if(!arguments.length)return i;i=e;return a};a.startAngle=function(e){if(!arguments.length)return n;n=e;return a};a.endAngle=function(e){if(!arguments.length)return r;r=e;return a};a.padAngle=function(e){if(!arguments.length)return o;o=e;return a};return a};var va={};e.layout.stack=function(){var t=R,i=Aa,n=Ea,r=_a,o=ya,a=ba;function s(l,u){if(!(g=l.length))return l;var c=l.map((function(e,i){return t.call(s,e,i)}));var d=c.map((function(e){return e.map((function(e,t){return[o.call(s,e,t),a.call(s,e,t)]}))}));var f=i.call(s,d,u);c=e.permute(c,f);d=e.permute(d,f);var p=n.call(s,d,u);var h=c[0].length,g,m,v,y;for(v=0;v<h;++v){r.call(s,c[0][v],y=p[v],d[0][v][1]);for(m=1;m<g;++m){r.call(s,c[m][v],y+=d[m-1][v][1],d[m][v][1])}}return l}s.values=function(e){if(!arguments.length)return t;t=e;return s};s.order=function(e){if(!arguments.length)return i;i=typeof e==="function"?e:wa.get(e)||Aa;return s};s.offset=function(e){if(!arguments.length)return n;n=typeof e==="function"?e:Ca.get(e)||Ea;return s};s.x=function(e){if(!arguments.length)return o;o=e;return s};s.y=function(e){if(!arguments.length)return a;a=e;return s};s.out=function(e){if(!arguments.length)return r;r=e;return s};return s};function ya(e){return e.x}function ba(e){return e.y}function _a(e,t,i){e.y0=t;e.y=i}var wa=e.map({"inside-out":function(t){var i=t.length,n,r,o=t.map(xa),a=t.map(Ta),s=e.range(i).sort((function(e,t){return o[e]-o[t]})),l=0,u=0,c=[],d=[];for(n=0;n<i;++n){r=s[n];if(l<u){l+=a[r];c.push(r)}else{u+=a[r];d.push(r)}}return d.reverse().concat(c)},reverse:function(t){return e.range(t.length).reverse()},default:Aa});var Ca=e.map({silhouette:function(e){var t=e.length,i=e[0].length,n=[],r=0,o,a,s,l=[];for(a=0;a<i;++a){for(o=0,s=0;o<t;o++)s+=e[o][a][1];if(s>r)r=s;n.push(s)}for(a=0;a<i;++a){l[a]=(r-n[a])/2}return l},wiggle:function(e){var t=e.length,i=e[0],n=i.length,r,o,a,s,l,u,c,d,f,p=[];p[0]=d=f=0;for(o=1;o<n;++o){for(r=0,s=0;r<t;++r)s+=e[r][o][1];for(r=0,l=0,c=i[o][0]-i[o-1][0];r<t;++r){for(a=0,u=(e[r][o][1]-e[r][o-1][1])/(2*c);a<r;++a){u+=(e[a][o][1]-e[a][o-1][1])/c}l+=u*e[r][o][1]}p[o]=d-=s?l/s*c:0;if(d<f)f=d}for(o=0;o<n;++o)p[o]-=f;return p},expand:function(e){var t=e.length,i=e[0].length,n=1/t,r,o,a,s=[];for(o=0;o<i;++o){for(r=0,a=0;r<t;r++)a+=e[r][o][1];if(a)for(r=0;r<t;r++)e[r][o][1]/=a;else for(r=0;r<t;r++)e[r][o][1]=n}for(o=0;o<i;++o)s[o]=0;return s},zero:Ea});function Aa(t){return e.range(t.length)}function Ea(e){var t=-1,i=e[0].length,n=[];while(++t<i)n[t]=0;return n}function xa(e){var t=1,i=0,n=e[0][1],r,o=e.length;for(;t<o;++t){if((r=e[t][1])>n){i=t;n=r}}return i}function Ta(e){return e.reduce(Sa,0)}function Sa(e,t){return e+t[1]}e.layout.histogram=function(){var t=true,i=Number,n=Oa,r=Da;function o(o,a){var s=[],l=o.map(i,this),u=n.call(this,l,a),c=r.call(this,u,l,a),d,a=-1,f=l.length,p=c.length-1,h=t?1:1/f,g;while(++a<p){d=s[a]=[];d.dx=c[a+1]-(d.x=c[a]);d.y=0}if(p>0){a=-1;while(++a<f){g=l[a];if(g>=u[0]&&g<=u[1]){d=s[e.bisect(c,g,1,p)-1];d.y+=h;d.push(o[a])}}}return s}o.value=function(e){if(!arguments.length)return i;i=e;return o};o.range=function(e){if(!arguments.length)return n;n=wt(e);return o};o.bins=function(e){if(!arguments.length)return r;r=typeof e==="number"?function(t){return ka(t,e)}:wt(e);return o};o.frequency=function(e){if(!arguments.length)return t;t=!!e;return o};return o};function Da(e,t){return ka(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function ka(e,t){var i=-1,n=+e[0],r=(e[1]-n)/t,o=[];while(++i<=t)o[i]=r*i+n;return o}function Oa(t){return[e.min(t),e.max(t)]}e.layout.pack=function(){var t=e.layout.hierarchy().sort(Ra),i=0,n=[1,1],r;function o(e,o){var a=t.call(this,e,o),s=a[0],l=n[0],u=n[1],c=r==null?Math.sqrt:typeof r==="function"?r:function(){return r};s.x=s.y=0;fa(s,(function(e){e.r=+c(e.value)}));fa(s,Ma);if(i){var d=i*(r?1:Math.max(2*s.r/l,2*s.r/u))/2;fa(s,(function(e){e.r+=d}));fa(s,Ma);fa(s,(function(e){e.r-=d}))}Ga(s,l/2,u/2,r?1:1/Math.max(2*s.r/l,2*s.r/u));return a}o.size=function(e){if(!arguments.length)return n;n=e;return o};o.radius=function(e){if(!arguments.length)return r;r=e==null||typeof e==="function"?e:+e;return o};o.padding=function(e){if(!arguments.length)return i;i=+e;return o};return ca(o,t)};function Ra(e,t){return e.value-t.value}function Na(e,t){var i=e._pack_next;e._pack_next=t;t._pack_prev=e;t._pack_next=i;i._pack_prev=t}function Pa(e,t){e._pack_next=t;t._pack_prev=e}function Ia(e,t){var i=t.x-e.x,n=t.y-e.y,r=e.r+t.r;return.999*r*r>i*i+n*n}function Ma(e){if(!(t=e.children)||!(f=t.length))return;var t,i=Infinity,n=-Infinity,r=Infinity,o=-Infinity,a,s,l,u,c,d,f;function p(e){i=Math.min(e.x-e.r,i);n=Math.max(e.x+e.r,n);r=Math.min(e.y-e.r,r);o=Math.max(e.y+e.r,o)}t.forEach(La);a=t[0];a.x=-a.r;a.y=0;p(a);if(f>1){s=t[1];s.x=s.r;s.y=0;p(s);if(f>2){l=t[2];$a(a,s,l);p(l);Na(a,l);a._pack_prev=l;Na(l,s);s=a._pack_next;for(u=3;u<f;u++){$a(a,s,l=t[u]);var h=0,g=1,m=1;for(c=s._pack_next;c!==s;c=c._pack_next,g++){if(Ia(c,l)){h=1;break}}if(h==1){for(d=a._pack_prev;d!==c._pack_prev;d=d._pack_prev,m++){if(Ia(d,l)){break}}}if(h){if(g<m||g==m&&s.r<a.r)Pa(a,s=c);else Pa(a=d,s);u--}else{Na(a,l);s=l;p(l)}}}}var v=(i+n)/2,y=(r+o)/2,b=0;for(u=0;u<f;u++){l=t[u];l.x-=v;l.y-=y;b=Math.max(b,l.r+Math.sqrt(l.x*l.x+l.y*l.y))}e.r=b;t.forEach(Fa)}function La(e){e._pack_next=e._pack_prev=e}function Fa(e){delete e._pack_next;delete e._pack_prev}function Ga(e,t,i,n){var r=e.children;e.x=t+=n*e.x;e.y=i+=n*e.y;e.r*=n;if(r){var o=-1,a=r.length;while(++o<a)Ga(r[o],t,i,n)}}function $a(e,t,i){var n=e.r+i.r,r=t.x-e.x,o=t.y-e.y;if(n&&(r||o)){var a=t.r+i.r,s=r*r+o*o;a*=a;n*=n;var l=.5+(n-a)/(2*s),u=Math.sqrt(Math.max(0,2*a*(n+s)-(n-=s)*n-a*a))/(2*s);i.x=e.x+l*r+u*o;i.y=e.y+l*o-u*r}else{i.x=e.x+n;i.y=e.y}}e.layout.tree=function(){var t=e.layout.hierarchy().sort(null).value(null),i=Wa,n=[1,1],r=null;function o(e,o){var u=t.call(this,e,o),d=u[0],f=a(d);fa(f,s),f.parent.m=-f.z;da(f,l);if(r)da(d,c);else{var p=d,h=d,g=d;da(d,(function(e){if(e.x<p.x)p=e;if(e.x>h.x)h=e;if(e.depth>g.depth)g=e}));var m=i(p,h)/2-p.x,v=n[0]/(h.x+i(h,p)/2+m),y=n[1]/(g.depth||1);da(d,(function(e){e.x=(e.x+m)*v;e.y=e.depth*y}))}return u}function a(e){var t={A:null,children:[e]},i=[t],n;while((n=i.pop())!=null){for(var r=n.children,o,a=0,s=r.length;a<s;++a){i.push((r[a]=o={_:r[a],parent:n,children:(o=r[a].children)&&o.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=o)}}return t.children[0]}function s(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){Va(e);var o=(t[0].z+t[t.length-1].z)/2;if(r){e.z=r.z+i(e._,r._);e.m=e.z-o}else{e.z=o}}else if(r){e.z=r.z+i(e._,r._)}e.parent.A=u(e,r,e.parent.A||n[0])}function l(e){e._.x=e.z+e.parent.m;e.m+=e.parent.m}function u(e,t,n){if(t){var r=e,o=e,a=t,s=r.parent.children[0],l=r.m,u=o.m,c=a.m,d=s.m,f;while(a=ja(a),r=Ha(r),a&&r){s=Ha(s);o=ja(o);o.a=e;f=a.z+c-r.z-l+i(a._,r._);if(f>0){Ba(za(a,e,n),e,f);l+=f;u+=f}c+=a.m;l+=r.m;d+=s.m;u+=o.m}if(a&&!ja(o)){o.t=a;o.m+=c-u}if(r&&!Ha(s)){s.t=r;s.m+=l-d;n=e}}return n}function c(e){e.x*=n[0];e.y=e.depth*n[1]}o.separation=function(e){if(!arguments.length)return i;i=e;return o};o.size=function(e){if(!arguments.length)return r?null:n;r=(n=e)==null?c:null;return o};o.nodeSize=function(e){if(!arguments.length)return r?n:null;r=(n=e)==null?null:c;return o};return ca(o,t)};function Wa(e,t){return e.parent==t.parent?1:2}function Ha(e){var t=e.children;return t.length?t[0]:e.t}function ja(e){var t=e.children,i;return(i=t.length)?t[i-1]:e.t}function Ba(e,t,i){var n=i/(t.i-e.i);t.c-=n;t.s+=i;e.c+=n;t.z+=i;t.m+=i}function Va(e){var t=0,i=0,n=e.children,r=n.length,o;while(--r>=0){o=n[r];o.z+=t;o.m+=t;t+=o.s+(i+=o.c)}}function za(e,t,i){return e.a.parent===t.parent?e.a:i}e.layout.cluster=function(){var t=e.layout.hierarchy().sort(null).value(null),i=Wa,n=[1,1],r=false;function o(e,o){var a=t.call(this,e,o),s=a[0],l,u=0;fa(s,(function(e){var t=e.children;if(t&&t.length){e.x=Ya(t);e.y=Ua(t)}else{e.x=l?u+=i(e,l):0;e.y=0;l=e}}));var c=qa(s),d=Xa(s),f=c.x-i(c,d)/2,p=d.x+i(d,c)/2;fa(s,r?function(e){e.x=(e.x-s.x)*n[0];e.y=(s.y-e.y)*n[1]}:function(e){e.x=(e.x-f)/(p-f)*n[0];e.y=(1-(s.y?e.y/s.y:1))*n[1]});return a}o.separation=function(e){if(!arguments.length)return i;i=e;return o};o.size=function(e){if(!arguments.length)return r?null:n;r=(n=e)==null;return o};o.nodeSize=function(e){if(!arguments.length)return r?n:null;r=(n=e)!=null;return o};return ca(o,t)};function Ua(t){return 1+e.max(t,(function(e){return e.y}))}function Ya(e){return e.reduce((function(e,t){return e+t.x}),0)/e.length}function qa(e){var t=e.children;return t&&t.length?qa(t[0]):e}function Xa(e){var t=e.children,i;return t&&(i=t.length)?Xa(t[i-1]):e}e.layout.treemap=function(){var t=e.layout.hierarchy(),i=Math.round,n=[1,1],r=null,o=Ka,a=false,s,l="squarify",u=.5*(1+Math.sqrt(5));function c(e,t){var i=-1,n=e.length,r,o;while(++i<n){o=(r=e[i]).value*(t<0?0:t);r.area=isNaN(o)||o<=0?0:o}}function d(e){var t=e.children;if(t&&t.length){var i=o(e),n=[],r=t.slice(),a,s=Infinity,u,f=l==="slice"?i.dx:l==="dice"?i.dy:l==="slice-dice"?e.depth&1?i.dy:i.dx:Math.min(i.dx,i.dy),g;c(r,i.dx*i.dy/e.value);n.area=0;while((g=r.length)>0){n.push(a=r[g-1]);n.area+=a.area;if(l!=="squarify"||(u=p(n,f))<=s){r.pop();s=u}else{n.area-=n.pop().area;h(n,f,i,false);f=Math.min(i.dx,i.dy);n.length=n.area=0;s=Infinity}}if(n.length){h(n,f,i,true);n.length=n.area=0}t.forEach(d)}}function f(e){var t=e.children;if(t&&t.length){var i=o(e),n=t.slice(),r,a=[];c(n,i.dx*i.dy/e.value);a.area=0;while(r=n.pop()){a.push(r);a.area+=r.area;if(r.z!=null){h(a,r.z?i.dx:i.dy,i,!n.length);a.length=a.area=0}}t.forEach(f)}}function p(e,t){var i=e.area,n,r=0,o=Infinity,a=-1,s=e.length;while(++a<s){if(!(n=e[a].area))continue;if(n<o)o=n;if(n>r)r=n}i*=i;t*=t;return i?Math.max(t*r*u/i,i/(t*o*u)):Infinity}function h(e,t,n,r){var o=-1,a=e.length,s=n.x,l=n.y,u=t?i(e.area/t):0,c;if(t==n.dx){if(r||u>n.dy)u=n.dy;while(++o<a){c=e[o];c.x=s;c.y=l;c.dy=u;s+=c.dx=Math.min(n.x+n.dx-s,u?i(c.area/u):0)}c.z=true;c.dx+=n.x+n.dx-s;n.y+=u;n.dy-=u}else{if(r||u>n.dx)u=n.dx;while(++o<a){c=e[o];c.x=s;c.y=l;c.dx=u;l+=c.dy=Math.min(n.y+n.dy-l,u?i(c.area/u):0)}c.z=false;c.dy+=n.y+n.dy-l;n.x+=u;n.dx-=u}}function g(e){var i=s||t(e),r=i[0];r.x=0;r.y=0;r.dx=n[0];r.dy=n[1];if(s)t.revalue(r);c([r],r.dx*r.dy/r.value);(s?f:d)(r);if(a)s=i;return i}g.size=function(e){if(!arguments.length)return n;n=e;return g};g.padding=function(e){if(!arguments.length)return r;function t(t){var i=e.call(g,t,t.depth);return i==null?Ka(t):Qa(t,typeof i==="number"?[i,i,i,i]:i)}function i(t){return Qa(t,e)}var n;o=(r=e)==null?Ka:(n=typeof e)==="function"?t:n==="number"?(e=[e,e,e,e],i):i;return g};g.round=function(e){if(!arguments.length)return i!=Number;i=e?Math.round:Number;return g};g.sticky=function(e){if(!arguments.length)return a;a=e;s=null;return g};g.ratio=function(e){if(!arguments.length)return u;u=e;return g};g.mode=function(e){if(!arguments.length)return l;l=e+"";return g};return ca(g,t)};function Ka(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Qa(e,t){var i=e.x+t[3],n=e.y+t[0],r=e.dx-t[1]-t[3],o=e.dy-t[0]-t[2];if(r<0){i+=r/2;r=0}if(o<0){n+=o/2;o=0}return{x:i,y:n,dx:r,dy:o}}e.random={normal:function(e,t){var i=arguments.length;if(i<2)t=1;if(i<1)e=0;return function(){var i,n,r;do{i=Math.random()*2-1;n=Math.random()*2-1;r=i*i+n*n}while(!r||r>1);return e+t*i*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=e.random.normal.apply(e,arguments);return function(){return Math.exp(t())}},bates:function(t){var i=e.random.irwinHall(t);return function(){return i()/t}},irwinHall:function(e){return function(){for(var t=0,i=0;i<e;i++)t+=Math.random();return t}}};e.scale={};function Za(e){var t=e[0],i=e[e.length-1];return t<i?[t,i]:[i,t]}function Ja(e){return e.rangeExtent?e.rangeExtent():Za(e.range())}function es(e,t,i,n){var r=i(e[0],e[1]),o=n(t[0],t[1]);return function(e){return o(r(e))}}function ts(e,t){var i=0,n=e.length-1,r=e[i],o=e[n],a;if(o<r){a=i,i=n,n=a;a=r,r=o,o=a}e[i]=t.floor(r);e[n]=t.ceil(o);return e}function is(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:ns}var ns={floor:R,ceil:R};function rs(t,i,n,r){var o=[],a=[],s=0,l=Math.min(t.length,i.length)-1;if(t[l]<t[0]){t=t.slice().reverse();i=i.slice().reverse()}while(++s<=l){o.push(n(t[s-1],t[s]));a.push(r(i[s-1],i[s]))}return function(i){var n=e.bisect(t,i,1,l)-1;return a[n](o[n](i))}}e.scale.linear=function(){return os([0,1],[0,1],Ao,false)};function os(e,t,i,n){var r,o;function a(){var a=Math.min(e.length,t.length)>2?rs:es,l=n?Zo:Qo;r=a(e,t,l,i);o=a(t,e,l,Ao);return s}function s(e){return r(e)}s.invert=function(e){return o(e)};s.domain=function(t){if(!arguments.length)return e;e=t.map(Number);return a()};s.range=function(e){if(!arguments.length)return t;t=e;return a()};s.rangeRound=function(e){return s.range(e).interpolate(Vo)};s.clamp=function(e){if(!arguments.length)return n;n=e;return a()};s.interpolate=function(e){if(!arguments.length)return i;i=e;return a()};s.ticks=function(t){return us(e,t)};s.tickFormat=function(t,i){return cs(e,t,i)};s.nice=function(t){ss(e,t);return a()};s.copy=function(){return os(e,t,i,n)};return a()}function as(t,i){return e.rebind(t,i,"range","rangeRound","interpolate","clamp")}function ss(e,t){return ts(e,is(ls(e,t)[2]))}function ls(e,t){if(t==null)t=10;var i=Za(e),n=i[1]-i[0],r=Math.pow(10,Math.floor(Math.log(n/t)/Math.LN10)),o=t/n*r;if(o<=.15)r*=10;else if(o<=.35)r*=5;else if(o<=.75)r*=2;i[0]=Math.ceil(i[0]/r)*r;i[1]=Math.floor(i[1]/r)*r+r*.5;i[2]=r;return i}function us(t,i){return e.range.apply(e,ls(t,i))}function cs(t,i,n){var r=ls(t,i);if(n){var o=$t.exec(n);o.shift();if(o[8]==="s"){var a=e.formatPrefix(Math.max(v(r[0]),v(r[1])));if(!o[7])o[7]="."+fs(a.scale(r[2]));o[8]="f";n=e.format(o.join(""));return function(e){return n(a.scale(e))+a.symbol}}if(!o[7])o[7]="."+ps(o[8],r);n=o.join("")}else{n=",."+fs(r[2])+"f"}return e.format(n)}var ds={s:1,g:1,p:1,r:1,e:1};function fs(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function ps(e,t){var i=fs(t[2]);return e in ds?Math.abs(i-fs(Math.max(v(t[0]),v(t[1]))))+ +(e!=="e"):i-(e==="%")*2}e.scale.log=function(){return hs(e.scale.linear().domain([0,1]),10,true,[1,10])};function hs(t,i,n,r){function o(e){return(n?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(i)}function a(e){return n?Math.pow(i,e):-Math.pow(i,-e)}function s(e){return t(o(e))}s.invert=function(e){return a(t.invert(e))};s.domain=function(e){if(!arguments.length)return r;n=e[0]>=0;t.domain((r=e.map(Number)).map(o));return s};s.base=function(e){if(!arguments.length)return i;i=+e;t.domain(r.map(o));return s};s.nice=function(){var e=ts(r.map(o),n?Math:ms);t.domain(e);r=e.map(a);return s};s.ticks=function(){var e=Za(r),t=[],s=e[0],l=e[1],u=Math.floor(o(s)),c=Math.ceil(o(l)),d=i%1?2:i;if(isFinite(c-u)){if(n){for(;u<c;u++)for(var f=1;f<d;f++)t.push(a(u)*f);t.push(a(u))}else{t.push(a(u));for(;u++<c;)for(var f=d-1;f>0;f--)t.push(a(u)*f)}for(u=0;t[u]<s;u++){}for(c=t.length;t[c-1]>l;c--){}t=t.slice(u,c)}return t};s.tickFormat=function(t,i){if(!arguments.length)return gs;if(arguments.length<2)i=gs;else if(typeof i!=="function")i=e.format(i);var r=Math.max(.1,t/s.ticks().length),l=n?(u=1e-12,Math.ceil):(u=-1e-12,Math.floor),u;return function(e){return e/a(l(o(e)+u))<=r?i(e):""}};s.copy=function(){return hs(t.copy(),i,n,r)};return as(s,t)}var gs=e.format(".0e"),ms={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};e.scale.pow=function(){return vs(e.scale.linear(),1,[0,1])};function vs(e,t,i){var n=ys(t),r=ys(1/t);function o(t){return e(n(t))}o.invert=function(t){return r(e.invert(t))};o.domain=function(t){if(!arguments.length)return i;e.domain((i=t.map(Number)).map(n));return o};o.ticks=function(e){return us(i,e)};o.tickFormat=function(e,t){return cs(i,e,t)};o.nice=function(e){return o.domain(ss(i,e))};o.exponent=function(a){if(!arguments.length)return t;n=ys(t=a);r=ys(1/t);e.domain(i.map(n));return o};o.copy=function(){return vs(e.copy(),t,i)};return as(o,e)}function ys(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}e.scale.sqrt=function(){return e.scale.pow().exponent(.5)};e.scale.ordinal=function(){return bs([],{t:"range",a:[[]]})};function bs(t,i){var n,r,o;function a(e){return r[((n.get(e)||(i.t==="range"?n.set(e,t.push(e)):NaN))-1)%r.length]}function s(i,n){return e.range(t.length).map((function(e){return i+n*e}))}a.domain=function(e){if(!arguments.length)return t;t=[];n=new _;var r=-1,o=e.length,s;while(++r<o)if(!n.has(s=e[r]))n.set(s,t.push(s));return a[i.t].apply(a,i.a)};a.range=function(e){if(!arguments.length)return r;r=e;o=0;i={t:"range",a:arguments};return a};a.rangePoints=function(e,n){if(arguments.length<2)n=0;var l=e[0],u=e[1],c=t.length<2?(l=(l+u)/2,0):(u-l)/(t.length-1+n);r=s(l+c*n/2,c);o=0;i={t:"rangePoints",a:arguments};return a};a.rangeRoundPoints=function(e,n){if(arguments.length<2)n=0;var l=e[0],u=e[1],c=t.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(t.length-1+n)|0;r=s(l+Math.round(c*n/2+(u-l-(t.length-1+n)*c)/2),c);o=0;i={t:"rangeRoundPoints",a:arguments};return a};a.rangeBands=function(e,n,l){if(arguments.length<2)n=0;if(arguments.length<3)l=n;var u=e[1]<e[0],c=e[u-0],d=e[1-u],f=(d-c)/(t.length-n+2*l);r=s(c+f*l,f);if(u)r.reverse();o=f*(1-n);i={t:"rangeBands",a:arguments};return a};a.rangeRoundBands=function(e,n,l){if(arguments.length<2)n=0;if(arguments.length<3)l=n;var u=e[1]<e[0],c=e[u-0],d=e[1-u],f=Math.floor((d-c)/(t.length-n+2*l));r=s(c+Math.round((d-c-(t.length-n)*f)/2),f);if(u)r.reverse();o=Math.round(f*(1-n));i={t:"rangeRoundBands",a:arguments};return a};a.rangeBand=function(){return o};a.rangeExtent=function(){return Za(i.a[0])};a.copy=function(){return bs(t,i)};return a.domain(t)}e.scale.category10=function(){return e.scale.ordinal().range(_s)};e.scale.category20=function(){return e.scale.ordinal().range(ws)};e.scale.category20b=function(){return e.scale.ordinal().range(Cs)};e.scale.category20c=function(){return e.scale.ordinal().range(As)};var _s=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ft);var ws=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ft);var Cs=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ft);var As=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ft);e.scale.quantile=function(){return Es([],[])};function Es(t,i){var n;function r(){var r=0,a=i.length;n=[];while(++r<a)n[r-1]=e.quantile(t,r/a);return o}function o(t){if(!isNaN(t=+t))return i[e.bisect(n,t)]}o.domain=function(e){if(!arguments.length)return t;t=e.map(f).filter(p).sort(d);return r()};o.range=function(e){if(!arguments.length)return i;i=e;return r()};o.quantiles=function(){return n};o.invertExtent=function(e){e=i.indexOf(e);return e<0?[NaN,NaN]:[e>0?n[e-1]:t[0],e<n.length?n[e]:t[t.length-1]]};o.copy=function(){return Es(t,i)};return r()}e.scale.quantize=function(){return xs(0,1,[0,1])};function xs(e,t,i){var n,r;function o(t){return i[Math.max(0,Math.min(r,Math.floor(n*(t-e))))]}function a(){n=i.length/(t-e);r=i.length-1;return o}o.domain=function(i){if(!arguments.length)return[e,t];e=+i[0];t=+i[i.length-1];return a()};o.range=function(e){if(!arguments.length)return i;i=e;return a()};o.invertExtent=function(t){t=i.indexOf(t);t=t<0?NaN:t/n+e;return[t,t+1/n]};o.copy=function(){return xs(e,t,i)};return a()}e.scale.threshold=function(){return Ts([.5],[0,1])};function Ts(t,i){function n(n){if(n<=n)return i[e.bisect(t,n)]}n.domain=function(e){if(!arguments.length)return t;t=e;return n};n.range=function(e){if(!arguments.length)return i;i=e;return n};n.invertExtent=function(e){e=i.indexOf(e);return[t[e-1],t[e]]};n.copy=function(){return Ts(t,i)};return n}e.scale.identity=function(){return Ss([0,1])};function Ss(e){function t(e){return+e}t.invert=t;t.domain=t.range=function(i){if(!arguments.length)return e;e=i.map(t);return t};t.ticks=function(t){return us(e,t)};t.tickFormat=function(t,i){return cs(e,t,i)};t.copy=function(){return Ss(e)};return t}e.svg={};function Ds(){return 0}e.svg.arc=function(){var e=Os,t=Rs,i=Ds,n=ks,r=Ns,o=Ps,a=Is;function s(){var s=Math.max(0,+e.apply(this,arguments)),u=Math.max(0,+t.apply(this,arguments)),c=r.apply(this,arguments)-ke,d=o.apply(this,arguments)-ke,f=Math.abs(d-c),p=c>d?0:1;if(u<s)h=u,u=s,s=h;if(f>=De)return l(u,p)+(s?l(s,1-p):"")+"Z";var h,g,m,v,y=0,b=0,_,w,C,A,E,x,T,S,D=[];if(v=(+a.apply(this,arguments)||0)/2){m=n===ks?Math.sqrt(s*s+u*u):+n.apply(this,arguments);if(!p)b*=-1;if(u)b=Me(m/u*Math.sin(v));if(s)y=Me(m/s*Math.sin(v))}if(u){_=u*Math.cos(c+b);w=u*Math.sin(c+b);C=u*Math.cos(d-b);A=u*Math.sin(d-b);var k=Math.abs(d-c-2*b)<=Te?0:1;if(b&&Ms(_,w,C,A)===p^k){var O=(c+d)/2;_=u*Math.cos(O);w=u*Math.sin(O);C=A=null}}else{_=w=0}if(s){E=s*Math.cos(d-y);x=s*Math.sin(d-y);T=s*Math.cos(c+y);S=s*Math.sin(c+y);var R=Math.abs(c-d+2*y)<=Te?0:1;if(y&&Ms(E,x,T,S)===1-p^R){var N=(c+d)/2;E=s*Math.cos(N);x=s*Math.sin(N);T=S=null}}else{E=x=0}if((h=Math.min(Math.abs(u-s)/2,+i.apply(this,arguments)))>.001){g=s<u^p?0:1;var P=T==null?[E,x]:C==null?[_,w]:Sr([_,w],[T,S],[C,A],[E,x]),I=_-P[0],M=w-P[1],L=C-P[0],F=A-P[1],G=1/Math.sin(Math.acos((I*L+M*F)/(Math.sqrt(I*I+M*M)*Math.sqrt(L*L+F*F)))/2),$=Math.sqrt(P[0]*P[0]+P[1]*P[1]);if(C!=null){var W=Math.min(h,(u-$)/(G+1)),H=Ls(T==null?[E,x]:[T,S],[_,w],u,W,p),j=Ls([C,A],[E,x],u,W,p);if(h===W){D.push("M",H[0],"A",W,",",W," 0 0,",g," ",H[1],"A",u,",",u," 0 ",1-p^Ms(H[1][0],H[1][1],j[1][0],j[1][1]),",",p," ",j[1],"A",W,",",W," 0 0,",g," ",j[0])}else{D.push("M",H[0],"A",W,",",W," 0 1,",g," ",j[0])}}else{D.push("M",_,",",w)}if(T!=null){var B=Math.min(h,(s-$)/(G-1)),V=Ls([_,w],[T,S],s,-B,p),z=Ls([E,x],C==null?[_,w]:[C,A],s,-B,p);if(h===B){D.push("L",z[0],"A",B,",",B," 0 0,",g," ",z[1],"A",s,",",s," 0 ",p^Ms(z[1][0],z[1][1],V[1][0],V[1][1]),",",1-p," ",V[1],"A",B,",",B," 0 0,",g," ",V[0])}else{D.push("L",z[0],"A",B,",",B," 0 0,",g," ",V[0])}}else{D.push("L",E,",",x)}}else{D.push("M",_,",",w);if(C!=null)D.push("A",u,",",u," 0 ",k,",",p," ",C,",",A);D.push("L",E,",",x);if(T!=null)D.push("A",s,",",s," 0 ",R,",",1-p," ",T,",",S)}D.push("Z");return D.join("")}function l(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}s.innerRadius=function(t){if(!arguments.length)return e;e=wt(t);return s};s.outerRadius=function(e){if(!arguments.length)return t;t=wt(e);return s};s.cornerRadius=function(e){if(!arguments.length)return i;i=wt(e);return s};s.padRadius=function(e){if(!arguments.length)return n;n=e==ks?ks:wt(e);return s};s.startAngle=function(e){if(!arguments.length)return r;r=wt(e);return s};s.endAngle=function(e){if(!arguments.length)return o;o=wt(e);return s};s.padAngle=function(e){if(!arguments.length)return a;a=wt(e);return s};s.centroid=function(){var i=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,n=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-ke;return[Math.cos(n)*i,Math.sin(n)*i]};return s};var ks="auto";function Os(e){return e.innerRadius}function Rs(e){return e.outerRadius}function Ns(e){return e.startAngle}function Ps(e){return e.endAngle}function Is(e){return e&&e.padAngle}function Ms(e,t,i,n){return(e-i)*t-(t-n)*e>0?0:1}function Ls(e,t,i,n,r){var o=e[0]-t[0],a=e[1]-t[1],s=(r?n:-n)/Math.sqrt(o*o+a*a),l=s*a,u=-s*o,c=e[0]+l,d=e[1]+u,f=t[0]+l,p=t[1]+u,h=(c+f)/2,g=(d+p)/2,m=f-c,v=p-d,y=m*m+v*v,b=i-n,_=c*p-f*d,w=(v<0?-1:1)*Math.sqrt(b*b*y-_*_),C=(_*v-m*w)/y,A=(-_*m-v*w)/y,E=(_*v+m*w)/y,x=(-_*m+v*w)/y,T=C-h,S=A-g,D=E-h,k=x-g;if(T*T+S*S>D*D+k*k)C=E,A=x;return[[C-l,A-u],[C*i/b,A*i/b]]}function Fs(e){var t=wr,i=Cr,n=rn,r=$s,o=r.key,a=.7;function s(o){var s=[],l=[],u=-1,c=o.length,d,f=wt(t),p=wt(i);function h(){s.push("M",r(e(l),a))}while(++u<c){if(n.call(this,d=o[u],u)){l.push([+f.call(this,d,u),+p.call(this,d,u)])}else if(l.length){h();l=[]}}if(l.length)h();return s.length?s.join(""):null}s.x=function(e){if(!arguments.length)return t;t=e;return s};s.y=function(e){if(!arguments.length)return i;i=e;return s};s.defined=function(e){if(!arguments.length)return n;n=e;return s};s.interpolate=function(e){if(!arguments.length)return o;if(typeof e==="function")o=r=e;else o=(r=Gs.get(e)||$s).key;return s};s.tension=function(e){if(!arguments.length)return a;a=e;return s};return s}e.svg.line=function(){return Fs(R)};var Gs=e.map({linear:$s,"linear-closed":Ws,step:Hs,"step-before":js,"step-after":Bs,basis:Xs,"basis-open":Ks,"basis-closed":Qs,bundle:Zs,cardinal:Us,"cardinal-open":Vs,"cardinal-closed":zs,monotone:sl});Gs.forEach((function(e,t){t.key=e;t.closed=/-closed$/.test(e)}));function $s(e){return e.join("L")}function Ws(e){return $s(e)+"Z"}function Hs(e){var t=0,i=e.length,n=e[0],r=[n[0],",",n[1]];while(++t<i)r.push("H",(n[0]+(n=e[t])[0])/2,"V",n[1]);if(i>1)r.push("H",n[0]);return r.join("")}function js(e){var t=0,i=e.length,n=e[0],r=[n[0],",",n[1]];while(++t<i)r.push("V",(n=e[t])[1],"H",n[0]);return r.join("")}function Bs(e){var t=0,i=e.length,n=e[0],r=[n[0],",",n[1]];while(++t<i)r.push("H",(n=e[t])[0],"V",n[1]);return r.join("")}function Vs(e,t){return e.length<4?$s(e):e[1]+Ys(e.slice(1,-1),qs(e,t))}function zs(e,t){return e.length<3?$s(e):e[0]+Ys((e.push(e[0]),e),qs([e[e.length-2]].concat(e,[e[1]]),t))}function Us(e,t){return e.length<3?$s(e):e[0]+Ys(e,qs(e,t))}function Ys(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2){return $s(e)}var i=e.length!=t.length,n="",r=e[0],o=e[1],a=t[0],s=a,l=1;if(i){n+="Q"+(o[0]-a[0]*2/3)+","+(o[1]-a[1]*2/3)+","+o[0]+","+o[1];r=e[1];l=2}if(t.length>1){s=t[1];o=e[l];l++;n+="C"+(r[0]+a[0])+","+(r[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var u=2;u<t.length;u++,l++){o=e[l];s=t[u];n+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}}if(i){var c=e[l];n+="Q"+(o[0]+s[0]*2/3)+","+(o[1]+s[1]*2/3)+","+c[0]+","+c[1]}return n}function qs(e,t){var i=[],n=(1-t)/2,r,o=e[0],a=e[1],s=1,l=e.length;while(++s<l){r=o;o=a;a=e[s];i.push([n*(a[0]-r[0]),n*(a[1]-r[1])])}return i}function Xs(e){if(e.length<3)return $s(e);var t=1,i=e.length,n=e[0],r=n[0],o=n[1],a=[r,r,r,(n=e[1])[0]],s=[o,o,o,n[1]],l=[r,",",o,"L",Js(il,a),",",Js(il,s)];e.push(e[i-1]);while(++t<=i){n=e[t];a.shift();a.push(n[0]);s.shift();s.push(n[1]);nl(l,a,s)}e.pop();l.push("L",n);return l.join("")}function Ks(e){if(e.length<4)return $s(e);var t=[],i=-1,n=e.length,r,o=[0],a=[0];while(++i<3){r=e[i];o.push(r[0]);a.push(r[1])}t.push(Js(il,o)+","+Js(il,a));--i;while(++i<n){r=e[i];o.shift();o.push(r[0]);a.shift();a.push(r[1]);nl(t,o,a)}return t.join("")}function Qs(e){var t,i=-1,n=e.length,r=n+4,o,a=[],s=[];while(++i<4){o=e[i%n];a.push(o[0]);s.push(o[1])}t=[Js(il,a),",",Js(il,s)];--i;while(++i<r){o=e[i%n];a.shift();a.push(o[0]);s.shift();s.push(o[1]);nl(t,a,s)}return t.join("")}function Zs(e,t){var i=e.length-1;if(i){var n=e[0][0],r=e[0][1],o=e[i][0]-n,a=e[i][1]-r,s=-1,l,u;while(++s<=i){l=e[s];u=s/i;l[0]=t*l[0]+(1-t)*(n+u*o);l[1]=t*l[1]+(1-t)*(r+u*a)}}return Xs(e)}function Js(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}var el=[0,2/3,1/3,0],tl=[0,1/3,2/3,0],il=[0,1/6,2/3,1/6];function nl(e,t,i){e.push("C",Js(el,t),",",Js(el,i),",",Js(tl,t),",",Js(tl,i),",",Js(il,t),",",Js(il,i))}function rl(e,t){return(t[1]-e[1])/(t[0]-e[0])}function ol(e){var t=0,i=e.length-1,n=[],r=e[0],o=e[1],a=n[0]=rl(r,o);while(++t<i){n[t]=(a+(a=rl(r=o,o=e[t+1])))/2}n[t]=a;return n}function al(e){var t=[],i,n,r,o,a=ol(e),s=-1,l=e.length-1;while(++s<l){i=rl(e[s],e[s+1]);if(v(i)<Ee){a[s]=a[s+1]=0}else{n=a[s]/i;r=a[s+1]/i;o=n*n+r*r;if(o>9){o=i*3/Math.sqrt(o);a[s]=o*n;a[s+1]=o*r}}}s=-1;while(++s<=l){o=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s]));t.push([o||0,a[s]*o||0])}return t}function sl(e){return e.length<3?$s(e):e[0]+Ys(e,al(e))}e.svg.line.radial=function(){var e=Fs(ll);e.radius=e.x,delete e.x;e.angle=e.y,delete e.y;return e};function ll(e){var t,i=-1,n=e.length,r,o;while(++i<n){t=e[i];r=t[0];o=t[1]-ke;t[0]=r*Math.cos(o);t[1]=r*Math.sin(o)}return e}function ul(e){var t=wr,i=wr,n=0,r=Cr,o=rn,a=$s,s=a.key,l=a,u="L",c=.7;function d(s){var d=[],f=[],p=[],h=-1,g=s.length,m,v=wt(t),y=wt(n),b=t===i?function(){return w}:wt(i),_=n===r?function(){return C}:wt(r),w,C;function A(){d.push("M",a(e(p),c),u,l(e(f.reverse()),c),"Z")}while(++h<g){if(o.call(this,m=s[h],h)){f.push([w=+v.call(this,m,h),C=+y.call(this,m,h)]);p.push([+b.call(this,m,h),+_.call(this,m,h)])}else if(f.length){A();f=[];p=[]}}if(f.length)A();return d.length?d.join(""):null}d.x=function(e){if(!arguments.length)return i;t=i=e;return d};d.x0=function(e){if(!arguments.length)return t;t=e;return d};d.x1=function(e){if(!arguments.length)return i;i=e;return d};d.y=function(e){if(!arguments.length)return r;n=r=e;return d};d.y0=function(e){if(!arguments.length)return n;n=e;return d};d.y1=function(e){if(!arguments.length)return r;r=e;return d};d.defined=function(e){if(!arguments.length)return o;o=e;return d};d.interpolate=function(e){if(!arguments.length)return s;if(typeof e==="function")s=a=e;else s=(a=Gs.get(e)||$s).key;l=a.reverse||a;u=a.closed?"M":"L";return d};d.tension=function(e){if(!arguments.length)return c;c=e;return d};return d}js.reverse=Bs;Bs.reverse=js;e.svg.area=function(){return ul(R)};e.svg.area.radial=function(){var e=ul(ll);e.radius=e.x,delete e.x;e.innerRadius=e.x0,delete e.x0;e.outerRadius=e.x1,delete e.x1;e.angle=e.y,delete e.y;e.startAngle=e.y0,delete e.y0;e.endAngle=e.y1,delete e.y1;return e};e.svg.chord=function(){var e=rr,t=or,i=cl,n=Ns,r=Ps;function o(i,n){var r=a(this,e,i,n),o=a(this,t,i,n);return"M"+r.p0+l(r.r,r.p1,r.a1-r.a0)+(s(r,o)?u(r.r,r.p1,r.r,r.p0):u(r.r,r.p1,o.r,o.p0)+l(o.r,o.p1,o.a1-o.a0)+u(o.r,o.p1,r.r,r.p0))+"Z"}function a(e,t,o,a){var s=t.call(e,o,a),l=i.call(e,s,a),u=n.call(e,s,a)-ke,c=r.call(e,s,a)-ke;return{r:l,a0:u,a1:c,p0:[l*Math.cos(u),l*Math.sin(u)],p1:[l*Math.cos(c),l*Math.sin(c)]}}function s(e,t){return e.a0==t.a0&&e.a1==t.a1}function l(e,t,i){return"A"+e+","+e+" 0 "+ +(i>Te)+",1 "+t}function u(e,t,i,n){return"Q 0,0 "+n}o.radius=function(e){if(!arguments.length)return i;i=wt(e);return o};o.source=function(t){if(!arguments.length)return e;e=wt(t);return o};o.target=function(e){if(!arguments.length)return t;t=wt(e);return o};o.startAngle=function(e){if(!arguments.length)return n;n=wt(e);return o};o.endAngle=function(e){if(!arguments.length)return r;r=wt(e);return o};return o};function cl(e){return e.radius}e.svg.diagonal=function(){var e=rr,t=or,i=dl;function n(n,r){var o=e.call(this,n,r),a=t.call(this,n,r),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];l=l.map(i);return"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}n.source=function(t){if(!arguments.length)return e;e=wt(t);return n};n.target=function(e){if(!arguments.length)return t;t=wt(e);return n};n.projection=function(e){if(!arguments.length)return i;i=e;return n};return n};function dl(e){return[e.x,e.y]}e.svg.diagonal.radial=function(){var t=e.svg.diagonal(),i=dl,n=t.projection;t.projection=function(e){return arguments.length?n(fl(i=e)):i};return t};function fl(e){return function(){var t=e.apply(this,arguments),i=t[0],n=t[1]-ke;return[i*Math.cos(n),i*Math.sin(n)]}}e.svg.symbol=function(){var e=hl,t=pl;function i(i,n){return(ml.get(e.call(this,i,n))||gl)(t.call(this,i,n))}i.type=function(t){if(!arguments.length)return e;e=wt(t);return i};i.size=function(e){if(!arguments.length)return t;t=wt(e);return i};return i};function pl(){return 64}function hl(){return"circle"}function gl(e){var t=Math.sqrt(e/Te);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}var ml=e.map({circle:gl,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*yl)),i=t*yl;return"M0,"+-t+"L"+i+",0"+" 0,"+t+" "+-i+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/vl),i=t*vl/2;return"M0,"+i+"L"+t+","+-i+" "+-t+","+-i+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/vl),i=t*vl/2;return"M0,"+-i+"L"+t+","+i+" "+-t+","+i+"Z"}});e.svg.symbolTypes=ml.keys();var vl=Math.sqrt(3),yl=Math.tan(30*Oe);Y.transition=function(e){var t=El||++Al,i=Dl(e),n=[],r,o,a=xl||{time:Date.now(),ease:Po,delay:0,duration:250};for(var s=-1,l=this.length;++s<l;){n.push(r=[]);for(var u=this[s],c=-1,d=u.length;++c<d;){if(o=u[c])kl(o,c,i,t,a);r.push(o)}}return wl(n,i,t)};Y.interrupt=function(e){return this.each(e==null?bl:_l(Dl(e)))};var bl=_l(Dl());function _l(e){return function(){var t,i;if((t=this[e])&&(i=t[t.active])){if(--t.count)delete t[t.active];else delete this[e];t.active+=.5;i.event&&i.event.interrupt.call(this,this.__data__,i.index)}}}function wl(e,t,i){j(e,Cl);e.namespace=t;e.id=i;return e}var Cl=[],Al=0,El,xl;Cl.call=Y.call;Cl.empty=Y.empty;Cl.node=Y.node;Cl.size=Y.size;e.transition=function(t,i){return t&&t.transition?El?t.transition(i):t:e.selection().transition(t)};e.transition.prototype=Cl;Cl.select=function(e){var t=this.id,i=this.namespace,n=[],r,o,a;e=q(e);for(var s=-1,l=this.length;++s<l;){n.push(r=[]);for(var u=this[s],c=-1,d=u.length;++c<d;){if((a=u[c])&&(o=e.call(a,a.__data__,c,s))){if("__data__"in a)o.__data__=a.__data__;kl(o,c,i,t,a[i][t]);r.push(o)}else{r.push(null)}}}return wl(n,i,t)};Cl.selectAll=function(e){var t=this.id,i=this.namespace,n=[],r,o,a,s,l;e=X(e);for(var u=-1,c=this.length;++u<c;){for(var d=this[u],f=-1,p=d.length;++f<p;){if(a=d[f]){l=a[i][t];o=e.call(a,a.__data__,f,u);n.push(r=[]);for(var h=-1,g=o.length;++h<g;){if(s=o[h])kl(s,h,i,t,l);r.push(s)}}}}return wl(n,i,t)};Cl.filter=function(e){var t=[],i,n,r;if(typeof e!=="function")e=le(e);for(var o=0,a=this.length;o<a;o++){t.push(i=[]);for(var n=this[o],s=0,l=n.length;s<l;s++){if((r=n[s])&&e.call(r,r.__data__,s,o)){i.push(r)}}}return wl(t,this.namespace,this.id)};Cl.tween=function(e,t){var i=this.id,n=this.namespace;if(arguments.length<2)return this.node()[n][i].tween.get(e);return ce(this,t==null?function(t){t[n][i].tween.remove(e)}:function(r){r[n][i].tween.set(e,t)})};function Tl(e,t,i,n){var r=e.id,o=e.namespace;return ce(e,typeof i==="function"?function(e,a,s){e[o][r].tween.set(t,n(i.call(e,e.__data__,a,s)))}:(i=n(i),function(e){e[o][r].tween.set(t,i)}))}Cl.attr=function(t,i){if(arguments.length<2){for(i in t)this.attr(i,t[i]);return this}var n=t=="transform"?Ko:Ao,r=e.ns.qualify(t);function o(){this.removeAttribute(r)}function a(){this.removeAttributeNS(r.space,r.local)}function s(e){return e==null?o:(e+="",function(){var t=this.getAttribute(r),i;return t!==e&&(i=n(t,e),function(e){this.setAttribute(r,i(e))})})}function l(e){return e==null?a:(e+="",function(){var t=this.getAttributeNS(r.space,r.local),i;return t!==e&&(i=n(t,e),function(e){this.setAttributeNS(r.space,r.local,i(e))})})}return Tl(this,"attr."+t,i,r.local?l:s)};Cl.attrTween=function(t,i){var n=e.ns.qualify(t);function r(e,t){var r=i.call(this,e,t,this.getAttribute(n));return r&&function(e){this.setAttribute(n,r(e))}}function o(e,t){var r=i.call(this,e,t,this.getAttributeNS(n.space,n.local));return r&&function(e){this.setAttributeNS(n.space,n.local,r(e))}}return this.tween("attr."+t,n.local?o:r)};Cl.style=function(e,t,i){var n=arguments.length;if(n<3){if(typeof e!=="string"){if(n<2)t="";for(i in e)this.style(i,e[i],t);return this}i=""}function r(){this.style.removeProperty(e)}function a(t){return t==null?r:(t+="",function(){var n=o(this).getComputedStyle(this,null).getPropertyValue(e),r;return n!==t&&(r=Ao(n,t),function(t){this.style.setProperty(e,r(t),i)})})}return Tl(this,"style."+e,t,a)};Cl.styleTween=function(e,t,i){if(arguments.length<3)i="";function n(n,r){var a=t.call(this,n,r,o(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),i)}}return this.tween("style."+e,n)};Cl.text=function(e){return Tl(this,"text",e,Sl)};function Sl(e){if(e==null)e="";return function(){this.textContent=e}}Cl.remove=function(){var e=this.namespace;return this.each("end.transition",(function(){var t;if(this[e].count<2&&(t=this.parentNode))t.removeChild(this)}))};Cl.ease=function(t){var i=this.id,n=this.namespace;if(arguments.length<1)return this.node()[n][i].ease;if(typeof t!=="function")t=e.ease.apply(e,arguments);return ce(this,(function(e){e[n][i].ease=t}))};Cl.delay=function(e){var t=this.id,i=this.namespace;if(arguments.length<1)return this.node()[i][t].delay;return ce(this,typeof e==="function"?function(n,r,o){n[i][t].delay=+e.call(n,n.__data__,r,o)}:(e=+e,function(n){n[i][t].delay=e}))};Cl.duration=function(e){var t=this.id,i=this.namespace;if(arguments.length<1)return this.node()[i][t].duration;return ce(this,typeof e==="function"?function(n,r,o){n[i][t].duration=Math.max(1,e.call(n,n.__data__,r,o))}:(e=Math.max(1,e),function(n){n[i][t].duration=e}))};Cl.each=function(t,i){var n=this.id,r=this.namespace;if(arguments.length<2){var o=xl,a=El;try{El=n;ce(this,(function(e,i,o){xl=e[r][n];t.call(e,e.__data__,i,o)}))}finally{xl=o;El=a}}else{ce(this,(function(o){var a=o[r][n];(a.event||(a.event=e.dispatch("start","end","interrupt"))).on(t,i)}))}return this};Cl.transition=function(){var e=this.id,t=++Al,i=this.namespace,n=[],r,o,a,s;for(var l=0,u=this.length;l<u;l++){n.push(r=[]);for(var o=this[l],c=0,d=o.length;c<d;c++){if(a=o[c]){s=a[i][e];kl(a,c,i,t,{time:s.time,ease:s.ease,delay:s.delay+s.duration,duration:s.duration})}r.push(a)}}return wl(n,i,t)};function Dl(e){return e==null?"__transition__":"__transition_"+e+"__"}function kl(t,i,n,r,o){var a=t[n]||(t[n]={active:0,count:0}),s=a[r];if(!s){var l=o.time;s=a[r]={tween:new _,time:l,delay:o.delay,duration:o.duration,ease:o.ease,index:i};o=null;++a.count;e.timer((function(o){var u=s.delay,c,d,f=Ot,p=[];f.t=u+l;if(u<=o)return h(o-u);f.c=h;function h(n){if(a.active>r)return m();var o=a[a.active];if(o){--a.count;delete a[a.active];o.event&&o.event.interrupt.call(t,t.__data__,o.index)}a.active=r;s.event&&s.event.start.call(t,t.__data__,i);s.tween.forEach((function(e,n){if(n=n.call(t,t.__data__,i)){p.push(n)}}));d=s.ease;c=s.duration;e.timer((function(){f.c=g(n||1)?rn:g;return 1}),0,l)}function g(e){if(a.active!==r)return 1;var n=e/c,o=d(n),l=p.length;while(l>0){p[--l].call(t,o)}if(n>=1){s.event&&s.event.end.call(t,t.__data__,i);return m()}}function m(){if(--a.count)delete a[r];else delete t[n];return 1}}),0,l)}}e.svg.axis=function(){var t=e.scale.linear(),i=Ol,n=6,r=6,o=3,a=[10],s=null,l;function u(u){u.each((function(){var u=e.select(this);var c=this.__chart__||t,d=this.__chart__=t.copy();var f=s==null?d.ticks?d.ticks.apply(d,a):d.domain():s,p=l==null?d.tickFormat?d.tickFormat.apply(d,a):R:l,h=u.selectAll(".tick").data(f,d),g=h.enter().insert("g",".domain").attr("class","tick").style("opacity",Ee),m=e.transition(h.exit()).style("opacity",Ee).remove(),v=e.transition(h.order()).style("opacity",1),y=Math.max(n,0)+o,b;var _=Ja(d),w=u.selectAll(".domain").data([0]),C=(w.enter().append("path").attr("class","domain"),e.transition(w));g.append("line");g.append("text");var A=g.select("line"),E=v.select("line"),x=h.select("text").text(p),T=g.select("text"),S=v.select("text"),D=i==="top"||i==="left"?-1:1,k,O,N,P;if(i==="bottom"||i==="top"){b=Nl,k="x",N="y",O="x2",P="y2";x.attr("dy",D<0?"0em":".71em").style("text-anchor","middle");C.attr("d","M"+_[0]+","+D*r+"V0H"+_[1]+"V"+D*r)}else{b=Pl,k="y",N="x",O="y2",P="x2";x.attr("dy",".32em").style("text-anchor",D<0?"end":"start");C.attr("d","M"+D*r+","+_[0]+"H0V"+_[1]+"H"+D*r)}A.attr(P,D*n);T.attr(N,D*y);E.attr(O,0).attr(P,D*n);S.attr(k,0).attr(N,D*y);if(d.rangeBand){var I=d,M=I.rangeBand()/2;c=d=function(e){return I(e)+M}}else if(c.rangeBand){c=d}else{m.call(b,d,c)}g.call(b,c,d);v.call(b,d,d)}))}u.scale=function(e){if(!arguments.length)return t;t=e;return u};u.orient=function(e){if(!arguments.length)return i;i=e in Rl?e+"":Ol;return u};u.ticks=function(){if(!arguments.length)return a;a=arguments;return u};u.tickValues=function(e){if(!arguments.length)return s;s=e;return u};u.tickFormat=function(e){if(!arguments.length)return l;l=e;return u};u.tickSize=function(e){var t=arguments.length;if(!t)return n;n=+e;r=+arguments[t-1];return u};u.innerTickSize=function(e){if(!arguments.length)return n;n=+e;return u};u.outerTickSize=function(e){if(!arguments.length)return r;r=+e;return u};u.tickPadding=function(e){if(!arguments.length)return o;o=+e;return u};u.tickSubdivide=function(){return arguments.length&&u};return u};var Ol="bottom",Rl={top:1,right:1,bottom:1,left:1};function Nl(e,t,i){e.attr("transform",(function(e){var n=t(e);return"translate("+(isFinite(n)?n:i(e))+",0)"}))}function Pl(e,t,i){e.attr("transform",(function(e){var n=t(e);return"translate(0,"+(isFinite(n)?n:i(e))+")"}))}e.svg.brush=function(){var t=W(f,"brushstart","brush","brushend"),i=null,n=null,r=[0,0],a=[0,0],s,l,u=true,c=true,d=Ml[0];function f(t){t.each((function(){var t=e.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m);var r=t.selectAll(".background").data([0]);r.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var o=t.selectAll(".resize").data(d,R);o.exit().remove();o.enter().append("g").attr("class",(function(e){return"resize "+e})).style("cursor",(function(e){return Il[e]})).append("rect").attr("x",(function(e){return/[ew]$/.test(e)?-3:null})).attr("y",(function(e){return/^[ns]/.test(e)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden");o.style("display",f.empty()?"none":null);var a=e.transition(t),s=e.transition(r),l;if(i){l=Ja(i);s.attr("x",l[0]).attr("width",l[1]-l[0]);h(a)}if(n){l=Ja(n);s.attr("y",l[0]).attr("height",l[1]-l[0]);g(a)}p(a)}))}f.event=function(i){i.each((function(){var i=t.of(this,arguments),n={x:r,y:a,i:s,j:l},o=this.__chart__||n;this.__chart__=n;if(El){e.select(this).transition().each("start.brush",(function(){s=o.i;l=o.j;r=o.x;a=o.y;i({type:"brushstart"})})).tween("brush:brush",(function(){var e=Eo(r,n.x),t=Eo(a,n.y);s=l=null;return function(o){r=n.x=e(o);a=n.y=t(o);i({type:"brush",mode:"resize"})}})).each("end.brush",(function(){s=n.i;l=n.j;i({type:"brush",mode:"resize"});i({type:"brushend"})}))}else{i({type:"brushstart"});i({type:"brush",mode:"resize"});i({type:"brushend"})}}))};function p(e){e.selectAll(".resize").attr("transform",(function(e){return"translate("+r[+/e$/.test(e)]+","+a[+/^s/.test(e)]+")"}))}function h(e){e.select(".extent").attr("x",r[0]);e.selectAll(".extent,.n>rect,.s>rect").attr("width",r[1]-r[0])}function g(e){e.select(".extent").attr("y",a[0]);e.selectAll(".extent,.e>rect,.w>rect").attr("height",a[1]-a[0])}function m(){var d=this,m=e.select(e.event.target),v=t.of(d,arguments),y=e.select(d),b=m.datum(),_=!/^(n|s)$/.test(b)&&i,w=!/^(e|w)$/.test(b)&&n,C=m.classed("extent"),A=_e(d),E,x=e.mouse(d),T;var S=e.select(o(d)).on("keydown.brush",O).on("keyup.brush",R);if(e.event.changedTouches){S.on("touchmove.brush",N).on("touchend.brush",I)}else{S.on("mousemove.brush",N).on("mouseup.brush",I)}y.interrupt().selectAll("*").interrupt();if(C){x[0]=r[0]-x[0];x[1]=a[0]-x[1]}else if(b){var D=+/w$/.test(b),k=+/^n/.test(b);T=[r[1-D]-x[0],a[1-k]-x[1]];x[0]=r[D];x[1]=a[k]}else if(e.event.altKey)E=x.slice();y.style("pointer-events","none").selectAll(".resize").style("display",null);e.select("body").style("cursor",m.style("cursor"));v({type:"brushstart"});N();function O(){if(e.event.keyCode==32){if(!C){E=null;x[0]-=r[1];x[1]-=a[1];C=2}G()}}function R(){if(e.event.keyCode==32&&C==2){x[0]+=r[1];x[1]+=a[1];C=0;G()}}function N(){var t=e.mouse(d),o=false;if(T){t[0]+=T[0];t[1]+=T[1]}if(!C){if(e.event.altKey){if(!E)E=[(r[0]+r[1])/2,(a[0]+a[1])/2];x[0]=r[+(t[0]<E[0])];x[1]=a[+(t[1]<E[1])]}else E=null}if(_&&P(t,i,0)){h(y);o=true}if(w&&P(t,n,1)){g(y);o=true}if(o){p(y);v({type:"brush",mode:C?"move":"resize"})}}function P(e,t,i){var n=Ja(t),o=n[0],d=n[1],f=x[i],p=i?a:r,h=p[1]-p[0],g,m;if(C){o-=f;d-=h+f}g=(i?c:u)?Math.max(o,Math.min(d,e[i])):e[i];if(C){m=(g+=f)+h}else{if(E)f=Math.max(o,Math.min(d,2*E[i]-g));if(f<g){m=g;g=f}else{m=f}}if(p[0]!=g||p[1]!=m){if(i)l=null;else s=null;p[0]=g;p[1]=m;return true}}function I(){N();y.style("pointer-events","all").selectAll(".resize").style("display",f.empty()?"none":null);e.select("body").style("cursor",null);S.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);A();v({type:"brushend"})}}f.x=function(e){if(!arguments.length)return i;i=e;d=Ml[!i<<1|!n];return f};f.y=function(e){if(!arguments.length)return n;n=e;d=Ml[!i<<1|!n];return f};f.clamp=function(e){if(!arguments.length)return i&&n?[u,c]:i?u:n?c:null;if(i&&n)u=!!e[0],c=!!e[1];else if(i)u=!!e;else if(n)c=!!e;return f};f.extent=function(e){var t,o,u,c,d;if(!arguments.length){if(i){if(s){t=s[0],o=s[1]}else{t=r[0],o=r[1];if(i.invert)t=i.invert(t),o=i.invert(o);if(o<t)d=t,t=o,o=d}}if(n){if(l){u=l[0],c=l[1]}else{u=a[0],c=a[1];if(n.invert)u=n.invert(u),c=n.invert(c);if(c<u)d=u,u=c,c=d}}return i&&n?[[t,u],[o,c]]:i?[t,o]:n&&[u,c]}if(i){t=e[0],o=e[1];if(n)t=t[0],o=o[0];s=[t,o];if(i.invert)t=i(t),o=i(o);if(o<t)d=t,t=o,o=d;if(t!=r[0]||o!=r[1])r=[t,o]}if(n){u=e[0],c=e[1];if(i)u=u[1],c=c[1];l=[u,c];if(n.invert)u=n(u),c=n(c);if(c<u)d=u,u=c,c=d;if(u!=a[0]||c!=a[1])a=[u,c]}return f};f.clear=function(){if(!f.empty()){r=[0,0],a=[0,0];s=l=null}return f};f.empty=function(){return!!i&&r[0]==r[1]||!!n&&a[0]==a[1]};return e.rebind(f,t,"on")};var Il={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var Ml=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var Ll=jt.format=yi.timeFormat;var Fl=Ll.utc;var Gl=Fl("%Y-%m-%dT%H:%M:%S.%LZ");Ll.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?$l:Gl;function $l(e){return e.toISOString()}$l.parse=function(e){var t=new Date(e);return isNaN(t)?null:t};$l.toString=Gl.toString;jt.second=Ut((function(e){return new Bt(Math.floor(e/1e3)*1e3)}),(function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)}),(function(e){return e.getSeconds()}));jt.seconds=jt.second.range;jt.seconds.utc=jt.second.utc.range;jt.minute=Ut((function(e){return new Bt(Math.floor(e/6e4)*6e4)}),(function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)}),(function(e){return e.getMinutes()}));jt.minutes=jt.minute.range;jt.minutes.utc=jt.minute.utc.range;jt.hour=Ut((function(e){var t=e.getTimezoneOffset()/60;return new Bt((Math.floor(e/36e5-t)+t)*36e5)}),(function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)}),(function(e){return e.getHours()}));jt.hours=jt.hour.range;jt.hours.utc=jt.hour.utc.range;jt.month=Ut((function(e){e=jt.day(e);e.setDate(1);return e}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e){return e.getMonth()}));jt.months=jt.month.range;jt.months.utc=jt.month.utc.range;function Wl(t,i,n){function r(e){return t(e)}r.invert=function(e){return Hl(t.invert(e))};r.domain=function(e){if(!arguments.length)return t.domain().map(Hl);t.domain(e);return r};function o(t,n){var r=t[1]-t[0],o=r/n,a=e.bisect(jl,o);return a==jl.length?[i.year,ls(t.map((function(e){return e/31536e6})),n)[2]]:!a?[zl,ls(t,n)[2]]:i[o/jl[a-1]<jl[a]/o?a-1:a]}r.nice=function(e,t){var i=r.domain(),n=Za(i),a=e==null?o(n,10):typeof e==="number"&&o(n,e);if(a)e=a[0],t=a[1];function s(i){return!isNaN(i)&&!e.range(i,Hl(+i+1),t).length}return r.domain(ts(i,t>1?{floor:function(t){while(s(t=e.floor(t)))t=Hl(t-1);return t},ceil:function(t){while(s(t=e.ceil(t)))t=Hl(+t+1);return t}}:e))};r.ticks=function(e,t){var i=Za(r.domain()),n=e==null?o(i,10):typeof e==="number"?o(i,e):!e.range&&[{range:e},t];if(n)e=n[0],t=n[1];return e.range(i[0],Hl(+i[1]+1),t<1?1:t)};r.tickFormat=function(){return n};r.copy=function(){return Wl(t.copy(),i,n)};return as(r,t)}function Hl(e){return new Date(e)}var jl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6];var Bl=[[jt.second,1],[jt.second,5],[jt.second,15],[jt.second,30],[jt.minute,1],[jt.minute,5],[jt.minute,15],[jt.minute,30],[jt.hour,1],[jt.hour,3],[jt.hour,6],[jt.hour,12],[jt.day,1],[jt.day,2],[jt.week,1],[jt.month,1],[jt.month,3],[jt.year,1]];var Vl=Ll.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&e.getDate()!=1}],["%b %d",function(e){return e.getDate()!=1}],["%B",function(e){return e.getMonth()}],["%Y",rn]]);var zl={range:function(t,i,n){return e.range(Math.ceil(t/n)*n,+i,n).map(Hl)},floor:R,ceil:R};Bl.year=jt.year;jt.scale=function(){return Wl(e.scale.linear(),Bl,Vl)};var Ul=Bl.map((function(e){return[e[0].utc,e[1]]}));var Yl=Fl.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],["%b %d",function(e){return e.getUTCDate()!=1}],["%B",function(e){return e.getUTCMonth()}],["%Y",rn]]);Ul.year=jt.year.utc;jt.scale.utc=function(){return Wl(e.scale.linear(),Ul,Yl)};e.text=Ct((function(e){return e.responseText}));e.json=function(e,t){return At(e,"application/json",ql,t)};function ql(e){return JSON.parse(e.responseText)}e.html=function(e,t){return At(e,"text/html",Xl,t)};function Xl(e){var t=n.createRange();t.selectNode(n.body);return t.createContextualFragment(e.responseText)}e.xml=Ct((function(e){return e.responseXML}));if(typeof define==="function"&&define.amd)define(e);else if(typeof module==="object"&&module.exports)module.exports=e;this.d3=e}();(function(e){"use strict";var t={version:"0.4.10"};var i,n,r;function o(e){this.owner=e}function a(e,t){if(Object.create){t.prototype=Object.create(e.prototype)}else{var i=function e(){};i.prototype=e.prototype;t.prototype=new i}t.prototype.constructor=t;return t}function s(e){var t=this.internal=new l(this);t.loadConfig(e);t.init();(function e(t,i,n){Object.keys(t).forEach((function(r){i[r]=t[r].bind(n);if(Object.keys(t[r]).length>0){e(t[r],i[r],n)}}))})(i,this,this)}function l(t){var i=this;i.d3=e.d3?e.d3:typeof require!=="undefined"?require("d3"):undefined;i.api=t;i.config=i.getDefaultConfig();i.data={};i.cache={};i.axes={}}t.generate=function(e){return new s(e)};t.chart={fn:s.prototype,internal:{fn:l.prototype,axis:{fn:u.prototype}}};i=t.chart.fn;n=t.chart.internal.fn;r=t.chart.internal.axis.fn;n.init=function(){var e=this,t=e.config;e.initParams();if(t.data_url){e.convertUrlToData(t.data_url,t.data_mimeType,t.data_keys,e.initWithData)}else if(t.data_json){e.initWithData(e.convertJsonToData(t.data_json,t.data_keys))}else if(t.data_rows){e.initWithData(e.convertRowsToData(t.data_rows))}else if(t.data_columns){e.initWithData(e.convertColumnsToData(t.data_columns))}else{throw Error("url or json or rows or columns is required.")}};n.initParams=function(){var e=this,t=e.d3,i=e.config;e.clipId="c3-"+ +new Date+"-clip",e.clipIdForXAxis=e.clipId+"-xaxis",e.clipIdForYAxis=e.clipId+"-yaxis",e.clipIdForGrid=e.clipId+"-grid",e.clipIdForSubchart=e.clipId+"-subchart",e.clipPath=e.getClipPath(e.clipId),e.clipPathForXAxis=e.getClipPath(e.clipIdForXAxis),e.clipPathForYAxis=e.getClipPath(e.clipIdForYAxis);e.clipPathForGrid=e.getClipPath(e.clipIdForGrid),e.clipPathForSubchart=e.getClipPath(e.clipIdForSubchart),e.dragStart=null;e.dragging=false;e.flowing=false;e.cancelClick=false;e.mouseover=false;e.transiting=false;e.color=e.generateColor();e.levelColor=e.generateLevelColor();e.dataTimeFormat=i.data_xLocaltime?t.time.format:t.time.format.utc;e.axisTimeFormat=i.axis_x_localtime?t.time.format:t.time.format.utc;e.defaultAxisTimeFormat=e.axisTimeFormat.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%-m/%-d",function(e){return e.getDay()&&e.getDate()!==1}],["%-m/%-d",function(e){return e.getDate()!==1}],["%-m/%-d",function(e){return e.getMonth()}],["%Y/%-m/%-d",function(){return true}]]);e.hiddenTargetIds=[];e.hiddenLegendIds=[];e.focusedTargetIds=[];e.defocusedTargetIds=[];e.xOrient=i.axis_rotated?"left":"bottom";e.yOrient=i.axis_rotated?i.axis_y_inner?"top":"bottom":i.axis_y_inner?"right":"left";e.y2Orient=i.axis_rotated?i.axis_y2_inner?"bottom":"top":i.axis_y2_inner?"left":"right";e.subXOrient=i.axis_rotated?"left":"bottom";e.isLegendRight=i.legend_position==="right";e.isLegendInset=i.legend_position==="inset";e.isLegendTop=i.legend_inset_anchor==="top-left"||i.legend_inset_anchor==="top-right";e.isLegendLeft=i.legend_inset_anchor==="top-left"||i.legend_inset_anchor==="bottom-left";e.legendStep=0;e.legendItemWidth=0;e.legendItemHeight=0;e.currentMaxTickWidths={x:0,y:0,y2:0};e.rotated_padding_left=30;e.rotated_padding_right=i.axis_rotated&&!i.axis_x_show?0:30;e.rotated_padding_top=5;e.withoutFadeIn={};e.intervalForObserveInserted=undefined;e.axes.subx=t.selectAll([])};n.initChartElements=function(){if(this.initBar){this.initBar()}if(this.initLine){this.initLine()}if(this.initArc){this.initArc()}if(this.initGauge){this.initGauge()}if(this.initText){this.initText()}};n.initWithData=function(t){var i=this,n=i.d3,r=i.config;var o,a,s=true;i.axis=new u(i);if(i.initPie){i.initPie()}if(i.initBrush){i.initBrush()}if(i.initZoom){i.initZoom()}if(!r.bindto){i.selectChart=n.selectAll([])}else if(typeof r.bindto.node==="function"){i.selectChart=r.bindto}else{i.selectChart=n.select(r.bindto)}if(i.selectChart.empty()){i.selectChart=n.select(document.createElement("div")).style("opacity",0);i.observeInserted(i.selectChart);s=false}i.selectChart.html("").classed("c3",true);i.data.xs={};i.data.targets=i.convertDataToTargets(t);if(r.data_filter){i.data.targets=i.data.targets.filter(r.data_filter)}if(r.data_hide){i.addHiddenTargetIds(r.data_hide===true?i.mapToIds(i.data.targets):r.data_hide)}if(r.legend_hide){i.addHiddenLegendIds(r.legend_hide===true?i.mapToIds(i.data.targets):r.legend_hide)}if(i.hasType("gauge")){r.legend_show=false}i.updateSizes();i.updateScales();i.x.domain(n.extent(i.getXDomain(i.data.targets)));i.y.domain(i.getYDomain(i.data.targets,"y"));i.y2.domain(i.getYDomain(i.data.targets,"y2"));i.subX.domain(i.x.domain());i.subY.domain(i.y.domain());i.subY2.domain(i.y2.domain());i.orgXDomain=i.x.domain();if(i.brush){i.brush.scale(i.subX)}if(r.zoom_enabled){i.zoom.scale(i.x)}i.svg=i.selectChart.append("svg").style("overflow","hidden").on("mouseenter",(function(){return r.onmouseover.call(i)})).on("mouseleave",(function(){return r.onmouseout.call(i)}));o=i.svg.append("defs");i.clipChart=i.appendClip(o,i.clipId);i.clipXAxis=i.appendClip(o,i.clipIdForXAxis);i.clipYAxis=i.appendClip(o,i.clipIdForYAxis);i.clipGrid=i.appendClip(o,i.clipIdForGrid);i.clipSubchart=i.appendClip(o,i.clipIdForSubchart);i.updateSvgSize();a=i.main=i.svg.append("g").attr("transform",i.getTranslate("main"));if(i.initSubchart){i.initSubchart()}if(i.initTooltip){i.initTooltip()}if(i.initLegend){i.initLegend()}a.append("text").attr("class",c.text+" "+c.empty).attr("text-anchor","middle").attr("dominant-baseline","middle");i.initRegion();i.initGrid();a.append("g").attr("clip-path",i.clipPath).attr("class",c.chart);if(r.grid_lines_front){i.initGridLines()}i.initEventRect();i.initChartElements();a.insert("rect",r.zoom_privileged?null:"g."+c.regions).attr("class",c.zoomRect).attr("width",i.width).attr("height",i.height).style("opacity",0).on("dblclick.zoom",null);if(r.axis_x_extent){i.brush.extent(i.getDefaultExtent())}i.axis.init();i.updateTargets(i.data.targets);if(s){i.updateDimension();i.config.oninit.call(i);i.redraw({withTransition:false,withTransform:true,withUpdateXDomain:true,withUpdateOrgXDomain:true,withTransitionForAxis:false})}if(e.onresize==null){e.onresize=i.generateResize()}if(e.onresize.add){e.onresize.add((function(){r.onresize.call(i)}));e.onresize.add((function(){i.api.flush()}));e.onresize.add((function(){r.onresized.call(i)}))}i.api.element=i.selectChart.node()};n.smoothLines=function(e,t){var i=this;if(t==="grid"){e.each((function(){var e=i.d3.select(this),t=e.attr("x1"),n=e.attr("x2"),r=e.attr("y1"),o=e.attr("y2");e.attr({x1:Math.ceil(t),x2:Math.ceil(n),y1:Math.ceil(r),y2:Math.ceil(o)})}))}};n.updateSizes=function(){var e=this,t=e.config;var i=e.legend?e.getLegendHeight():0,n=e.legend?e.getLegendWidth():0,r=e.isLegendRight||e.isLegendInset?0:i,o=e.hasArcType(),a=t.axis_rotated||o?0:e.getHorizontalAxisHeight("x"),s=t.subchart_show&&!o?t.subchart_size_height+a:0;e.currentWidth=e.getCurrentWidth();e.currentHeight=e.getCurrentHeight();e.margin=t.axis_rotated?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:o?0:e.getCurrentPaddingRight(),bottom:e.getHorizontalAxisHeight("y")+r+e.getCurrentPaddingBottom(),left:s+(o?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:o?0:e.getCurrentPaddingRight(),bottom:a+s+r+e.getCurrentPaddingBottom(),left:o?0:e.getCurrentPaddingLeft()};e.margin2=t.axis_rotated?{top:e.margin.top,right:NaN,bottom:20+r,left:e.rotated_padding_left}:{top:e.currentHeight-s-r,right:NaN,bottom:a+r,left:e.margin.left};e.margin3={top:0,right:NaN,bottom:0,left:0};if(e.updateSizeForLegend){e.updateSizeForLegend(i,n)}e.width=e.currentWidth-e.margin.left-e.margin.right;e.height=e.currentHeight-e.margin.top-e.margin.bottom;if(e.width<0){e.width=0}if(e.height<0){e.height=0}e.width2=t.axis_rotated?e.margin.left-e.rotated_padding_left-e.rotated_padding_right:e.width;e.height2=t.axis_rotated?e.height:e.currentHeight-e.margin2.top-e.margin2.bottom;if(e.width2<0){e.width2=0}if(e.height2<0){e.height2=0}e.arcWidth=e.width-(e.isLegendRight?n+10:0);e.arcHeight=e.height-(e.isLegendRight?0:10);if(e.hasType("gauge")){e.arcHeight+=e.height-e.getGaugeLabelHeight()}if(e.updateRadius){e.updateRadius()}if(e.isLegendRight&&o){e.margin3.left=e.arcWidth/2+e.radiusExpanded*1.1}};n.updateTargets=function(e){var t=this;t.updateTargetsForText(e);t.updateTargetsForBar(e);t.updateTargetsForLine(e);if(t.hasArcType()&&t.updateTargetsForArc){t.updateTargetsForArc(e)}if(t.updateTargetsForSubchart){t.updateTargetsForSubchart(e)}t.showTargets()};n.showTargets=function(){var e=this;e.svg.selectAll("."+c.target).filter((function(t){return e.isTargetToShow(t.id)})).transition().duration(e.config.transition_duration).style("opacity",1)};n.redraw=function(e,t){var i=this,n=i.main,r=i.d3,o=i.config;var a=i.getShapeIndices(i.isAreaType),s=i.getShapeIndices(i.isBarType),l=i.getShapeIndices(i.isLineType);var u,d,f,p,h,g,m,v,y,b,_,C,A;var E=i.hasArcType();var x,T,S,D,k;var O,R,N;var P,I;var M=i.filterTargetsToShow(i.data.targets),L,F;var G=i.xv.bind(i),$,W;e=e||{};u=w(e,"withY",true);d=w(e,"withSubchart",true);f=w(e,"withTransition",true);g=w(e,"withTransform",false);m=w(e,"withUpdateXDomain",false);v=w(e,"withUpdateOrgXDomain",false);y=w(e,"withTrimXDomain",true);A=w(e,"withUpdateXAxis",m);b=w(e,"withLegend",false);_=w(e,"withEventRect",true);C=w(e,"withDimension",true);p=w(e,"withTransitionForExit",f);h=w(e,"withTransitionForAxis",f);O=f?o.transition_duration:0;R=p?O:0;N=h?O:0;t=t||i.axis.generateTransitions(N);if(b&&o.legend_show){i.updateLegend(i.mapToIds(i.data.targets),e,t)}else if(C){i.updateDimension(true)}if(i.isCategorized()&&M.length===0){i.x.domain([0,i.axes.x.selectAll(".tick").size()])}if(M.length){i.updateXDomain(M,m,v,y);if(!o.axis_x_tick_values){L=i.axis.updateXAxisTickValues(M)}}else{i.xAxis.tickValues([]);i.subXAxis.tickValues([])}if(o.zoom_rescale&&!e.flow){F=i.x.orgDomain()}i.y.domain(i.getYDomain(M,"y",F));i.y2.domain(i.getYDomain(M,"y2",F));if(!o.axis_y_tick_values&&o.axis_y_tick_count){i.yAxis.tickValues(i.axis.generateTickValues(i.y.domain(),o.axis_y_tick_count))}if(!o.axis_y2_tick_values&&o.axis_y2_tick_count){i.y2Axis.tickValues(i.axis.generateTickValues(i.y2.domain(),o.axis_y2_tick_count))}i.axis.redraw(t,E);i.axis.updateLabels(f);if((m||A)&&M.length){if(o.axis_x_tick_culling&&L){i.svg.selectAll("."+c.axisX).each((function(){var e=r.select(this);var t=e.select("path.domain").node().getTotalLength()-(o.axis_x_tick_outer?12:0);var i=[];e.selectAll(".tick text").each((function(e){var t=L.indexOf(e);if(t>=0){i.push({e:this,index:t})}}));i.sort((function(e,t){return e.index-t.index}));if(!o.axis_x_tick_rotate){i.forEach((function(e){var i=e.e.getBoundingClientRect().width/2;var n=r.transform(r.select(e.e.parentNode).attr("transform"));r.select(e.e).style("text-anchor",(function(){if(n.translate[0]<i){return"start"}if(n.translate[0]+i>t){return"end"}return"middle"}))}))}if(i.length>o.axis_x_tick_culling_max){if(o.axis_x_tick_culling_max>1){var n=o.axis_x_tick_culling_max;var a=Math.floor(i.length/n);while(i.length/a>=n+1){n--;a=Math.floor(i.length/n)}var s=Math.floor((i.length-a*(n-1)-1)/2);i.forEach((function(e,t){r.select(e.e).style("display",(t+a-s)%a?"none":"block")}))}else{var l=Math.round(i.length/2);i.forEach((function(e,t){r.select(e.e).style("display",t==l?"block":"none")}))}}else{i.forEach((function(e){r.select(e.e).style("display","block")}))}}))}else{i.svg.selectAll("."+c.axisX+" .tick text").style("display","block")}}x=i.generateDrawArea?i.generateDrawArea(a,false):undefined;T=i.generateDrawBar?i.generateDrawBar(s):undefined;S=i.generateDrawLine?i.generateDrawLine(l,false):undefined;D=i.generateXYForText(a,s,l,true);k=i.generateXYForText(a,s,l,false);if(u){i.subY.domain(i.getYDomain(M,"y"));i.subY2.domain(i.getYDomain(M,"y2"))}i.tooltip.style("display","none");i.updateXgridFocus();n.select("text."+c.text+"."+c.empty).attr("x",i.width/2).attr("y",i.height/2).text(o.data_empty_label_text).transition().style("opacity",M.length?0:1);i.updateGrid(O);i.updateRegion(O);i.updateBar(R);i.updateLine(R);i.updateArea(R);i.updateCircle();if(i.hasDataLabel()){i.updateText(R)}if(i.redrawArc){i.redrawArc(O,R,g)}if(i.redrawSubchart){i.redrawSubchart(d,t,O,R,a,s,l)}n.selectAll("."+c.selectedCircles).filter(i.isBarType.bind(i)).selectAll("circle").remove();if(o.interaction_enabled&&!e.flow&&_){i.redrawEventRect();if(i.updateZoom){i.updateZoom()}}i.updateCircleY();$=(i.config.axis_rotated?i.circleY:i.circleX).bind(i);W=(i.config.axis_rotated?i.circleX:i.circleY).bind(i);if(e.flow){I=i.generateFlow({targets:M,flow:e.flow,duration:e.flow.duration,drawBar:T,drawLine:S,drawArea:x,cx:$,cy:W,xv:G,xForText:D,yForText:k})}if((O||I)&&i.isTabVisible()){r.transition().duration(O).each((function(){var t=[];[i.redrawBar(T,true),i.redrawLine(S,true),i.redrawArea(x,true),i.redrawCircle($,W,true),i.redrawText(D,k,e.flow,true),i.redrawRegion(true),i.redrawGrid(true)].forEach((function(e){e.forEach((function(e){t.push(e)}))}));P=i.generateWait();t.forEach((function(e){P.add(e)}))})).call(P,(function(){if(I){I()}if(o.onrendered){o.onrendered.call(i)}}))}else{i.redrawBar(T);i.redrawLine(S);i.redrawArea(x);i.redrawCircle($,W);i.redrawText(D,k,e.flow);i.redrawRegion();i.redrawGrid();if(o.onrendered){o.onrendered.call(i)}}i.mapToIds(i.data.targets).forEach((function(e){i.withoutFadeIn[e]=true}))};n.updateAndRedraw=function(e){var t=this,i=t.config,n;e=e||{};e.withTransition=w(e,"withTransition",true);e.withTransform=w(e,"withTransform",false);e.withLegend=w(e,"withLegend",false);e.withUpdateXDomain=true;e.withUpdateOrgXDomain=true;e.withTransitionForExit=false;e.withTransitionForTransform=w(e,"withTransitionForTransform",e.withTransition);t.updateSizes();if(!(e.withLegend&&i.legend_show)){n=t.axis.generateTransitions(e.withTransitionForAxis?i.transition_duration:0);t.updateScales();t.updateSvgSize();t.transformAll(e.withTransitionForTransform,n)}t.redraw(e,n)};n.redrawWithoutRescale=function(){this.redraw({withY:false,withSubchart:false,withEventRect:false,withTransitionForAxis:false})};n.isTimeSeries=function(){return this.config.axis_x_type==="timeseries"};n.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0};n.isCustomX=function(){var e=this,t=e.config;return!e.isTimeSeries()&&(t.data_x||_(t.data_xs))};n.isTimeSeriesY=function(){return this.config.axis_y_type==="timeseries"};n.getTranslate=function(e){var t=this,i=t.config,n,r;if(e==="main"){n=v(t.margin.left);r=v(t.margin.top)}else if(e==="context"){n=v(t.margin2.left);r=v(t.margin2.top)}else if(e==="legend"){n=t.margin3.left;r=t.margin3.top}else if(e==="x"){n=0;r=i.axis_rotated?0:t.height}else if(e==="y"){n=0;r=i.axis_rotated?t.height:0}else if(e==="y2"){n=i.axis_rotated?0:t.width;r=i.axis_rotated?1:0}else if(e==="subx"){n=0;r=i.axis_rotated?0:t.height2}else if(e==="arc"){n=t.arcWidth/2;r=t.arcHeight/2}return"translate("+n+","+r+")"};n.initialOpacity=function(e){return e.value!==null&&this.withoutFadeIn[e.id]?1:0};n.initialOpacityForCircle=function(e){return e.value!==null&&this.withoutFadeIn[e.id]?this.opacityForCircle(e):0};n.opacityForCircle=function(e){var t=this.config.point_show?1:0;return d(e.value)?this.isScatterType(e)?.5:t:0};n.opacityForText=function(){return this.hasDataLabel()?1:0};n.xx=function(e){return e?this.x(e.x):null};n.xv=function(e){var t=this,i=e.value;if(t.isTimeSeries()){i=t.parseDate(e.value)}else if(t.isCategorized()&&typeof e.value==="string"){i=t.config.axis_x_categories.indexOf(e.value)}return Math.ceil(t.x(i))};n.yv=function(e){var t=this,i=e.axis&&e.axis==="y2"?t.y2:t.y;return Math.ceil(i(e.value))};n.subxx=function(e){return e?this.subX(e.x):null};n.transformMain=function(e,t){var i=this,n,r,o;if(t&&t.axisX){n=t.axisX}else{n=i.main.select("."+c.axisX);if(e){n=n.transition()}}if(t&&t.axisY){r=t.axisY}else{r=i.main.select("."+c.axisY);if(e){r=r.transition()}}if(t&&t.axisY2){o=t.axisY2}else{o=i.main.select("."+c.axisY2);if(e){o=o.transition()}}(e?i.main.transition():i.main).attr("transform",i.getTranslate("main"));n.attr("transform",i.getTranslate("x"));r.attr("transform",i.getTranslate("y"));o.attr("transform",i.getTranslate("y2"));i.main.select("."+c.chartArcs).attr("transform",i.getTranslate("arc"))};n.transformAll=function(e,t){var i=this;i.transformMain(e,t);if(i.config.subchart_show){i.transformContext(e,t)}if(i.legend){i.transformLegend(e)}};n.updateSvgSize=function(){var e=this,t=e.svg.select(".c3-brush .background");e.svg.attr("width",e.currentWidth).attr("height",e.currentHeight);e.svg.selectAll(["#"+e.clipId,"#"+e.clipIdForGrid]).select("rect").attr("width",e.width).attr("height",e.height);e.svg.select("#"+e.clipIdForXAxis).select("rect").attr("x",e.getXAxisClipX.bind(e)).attr("y",e.getXAxisClipY.bind(e)).attr("width",e.getXAxisClipWidth.bind(e)).attr("height",e.getXAxisClipHeight.bind(e));e.svg.select("#"+e.clipIdForYAxis).select("rect").attr("x",e.getYAxisClipX.bind(e)).attr("y",e.getYAxisClipY.bind(e)).attr("width",e.getYAxisClipWidth.bind(e)).attr("height",e.getYAxisClipHeight.bind(e));e.svg.select("#"+e.clipIdForSubchart).select("rect").attr("width",e.width).attr("height",t.size()?t.attr("height"):0);e.svg.select("."+c.zoomRect).attr("width",e.width).attr("height",e.height);e.selectChart.style("max-height",e.currentHeight+"px")};n.updateDimension=function(e){var t=this;if(!e){if(t.config.axis_rotated){t.axes.x.call(t.xAxis);t.axes.subx.call(t.subXAxis)}else{t.axes.y.call(t.yAxis);t.axes.y2.call(t.y2Axis)}}t.updateSizes();t.updateScales();t.updateSvgSize();t.transformAll(false)};n.observeInserted=function(t){var i=this,n;if(typeof MutationObserver==="undefined"){e.console.error("MutationObserver not defined.");return}n=new MutationObserver((function(r){r.forEach((function(r){if(r.type==="childList"&&r.previousSibling){n.disconnect();i.intervalForObserveInserted=e.setInterval((function(){if(t.node().parentNode){e.clearInterval(i.intervalForObserveInserted);i.updateDimension();i.config.oninit.call(i);i.redraw({withTransform:true,withUpdateXDomain:true,withUpdateOrgXDomain:true,withTransition:false,withTransitionForTransform:false,withLegend:true});t.transition().style("opacity",1)}}),10)}}))}));n.observe(t.node(),{attributes:true,childList:true,characterData:true})};n.generateResize=function(){var e=[];function t(){e.forEach((function(e){e()}))}t.add=function(t){e.push(t)};return t};n.endall=function(e,t){var i=0;e.each((function(){++i})).each("end",(function(){if(! --i){t.apply(this,arguments)}}))};n.generateWait=function(){var e=[],t=function(t,i){var n=setInterval((function(){var t=0;e.forEach((function(e){if(e.empty()){t+=1;return}try{e.transition()}catch(e){t+=1}}));if(t===e.length){clearInterval(n);if(i){i()}}}),10)};t.add=function(t){e.push(t)};return t};n.parseDate=function(t){var i=this,n;if(t instanceof Date){n=t}else if(typeof t==="string"){n=i.dataTimeFormat(i.config.data_xFormat).parse(t)}else if(typeof t==="number"||!isNaN(t)){n=new Date(+t)}if(!n||isNaN(+n)){e.console.error("Failed to parse x '"+t+"' to Date object")}return n};n.isTabVisible=function(){var e;if(typeof document.hidden!=="undefined"){e="hidden"}else if(typeof document.mozHidden!=="undefined"){e="mozHidden"}else if(typeof document.msHidden!=="undefined"){e="msHidden"}else if(typeof document.webkitHidden!=="undefined"){e="webkitHidden"}return document[e]?false:true};n.getDefaultConfig=function(){var e={bindto:"#chart",size_width:undefined,size_height:undefined,padding_left:undefined,padding_right:undefined,padding_top:undefined,padding_bottom:undefined,zoom_enabled:false,zoom_extent:undefined,zoom_privileged:false,zoom_rescale:false,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},interaction_enabled:true,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:undefined,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:true,data_xSort:true,data_idConverter:function(e){return e},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:undefined,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:undefined,data_colors:{},data_hide:false,data_filter:undefined,data_selection_enabled:false,data_selection_grouped:false,data_selection_isselectable:function(){return true},data_selection_multiple:true,data_selection_draggable:false,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:undefined,data_json:undefined,data_rows:undefined,data_columns:undefined,data_mimeType:undefined,data_keys:undefined,data_empty_label_text:"",subchart_show:false,subchart_size_height:60,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:true,legend_hide:false,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:undefined,legend_item_onclick:undefined,legend_item_onmouseover:undefined,legend_item_onmouseout:undefined,legend_equally:false,axis_rotated:false,axis_x_show:true,axis_x_type:"indexed",axis_x_localtime:true,axis_x_categories:[],axis_x_tick_centered:false,axis_x_tick_format:undefined,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:undefined,axis_x_tick_fit:true,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:true,axis_x_tick_multiline:true,axis_x_tick_width:null,axis_x_max:undefined,axis_x_min:undefined,axis_x_padding:{},axis_x_height:undefined,axis_x_extent:undefined,axis_x_label:{},axis_y_show:true,axis_y_type:undefined,axis_y_max:undefined,axis_y_min:undefined,axis_y_inverted:false,axis_y_center:undefined,axis_y_inner:undefined,axis_y_label:{},axis_y_tick_format:undefined,axis_y_tick_outer:true,axis_y_tick_values:null,axis_y_tick_count:undefined,axis_y_tick_time_value:undefined,axis_y_tick_time_interval:undefined,axis_y_padding:{},axis_y_default:undefined,axis_y2_show:false,axis_y2_max:undefined,axis_y2_min:undefined,axis_y2_inverted:false,axis_y2_center:undefined,axis_y2_inner:undefined,axis_y2_label:{},axis_y2_tick_format:undefined,axis_y2_tick_outer:true,axis_y2_tick_values:null,axis_y2_tick_count:undefined,axis_y2_padding:{},axis_y2_default:undefined,grid_x_show:false,grid_x_type:"tick",grid_x_lines:[],grid_y_show:false,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:true,grid_lines_front:true,point_show:true,point_r:2.5,point_focus_expand_enabled:true,point_focus_expand_r:undefined,point_select_r:undefined,line_connectNull:false,line_step_type:"step",bar_width:undefined,bar_width_ratio:.6,bar_width_max:undefined,bar_zerobased:true,area_zerobased:true,pie_label_show:true,pie_label_format:undefined,pie_label_threshold:.05,pie_expand:true,gauge_label_show:true,gauge_label_format:undefined,gauge_expand:true,gauge_min:0,gauge_max:100,gauge_units:undefined,gauge_width:undefined,donut_label_show:true,donut_label_format:undefined,donut_label_threshold:.05,donut_width:undefined,donut_expand:true,donut_title:"",regions:[],tooltip_show:true,tooltip_grouped:true,tooltip_format_title:undefined,tooltip_format_name:undefined,tooltip_format_value:undefined,tooltip_position:undefined,tooltip_contents:function(e,t,i,n){return this.getTooltipContent?this.getTooltipContent(e,t,i,n):""},tooltip_init_show:false,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"}};Object.keys(this.additionalConfig).forEach((function(t){e[t]=this.additionalConfig[t]}),this);return e};n.additionalConfig={};n.loadConfig=function(e){var t=this.config,i,n,r;function o(){var e=n.shift();if(e&&i&&typeof i==="object"&&e in i){i=i[e];return o()}else if(!e){return i}else{return undefined}}Object.keys(t).forEach((function(a){i=e;n=a.split("_");r=o();if(g(r)){t[a]=r}}))};n.getScale=function(e,t,i){return(i?this.d3.time.scale():this.d3.scale.linear()).range([e,t])};n.getX=function(e,t,i,n){var r=this,o=r.getScale(e,t,r.isTimeSeries()),a=i?o.domain(i):o,s;if(r.isCategorized()){n=n||function(){return 0};o=function(e,t){var i=a(e)+n(e);return t?i:Math.ceil(i)}}else{o=function(e,t){var i=a(e);return t?i:Math.ceil(i)}}for(s in a){o[s]=a[s]}o.orgDomain=function(){return a.domain()};if(r.isCategorized()){o.domain=function(e){if(!arguments.length){e=this.orgDomain();return[e[0],e[1]+1]}a.domain(e);return o}}return o};n.getY=function(e,t,i){var n=this.getScale(e,t,this.isTimeSeriesY());if(i){n.domain(i)}return n};n.getYScale=function(e){return this.axis.getId(e)==="y2"?this.y2:this.y};n.getSubYScale=function(e){return this.axis.getId(e)==="y2"?this.subY2:this.subY};n.updateScales=function(){var e=this,t=e.config,i=!e.x;e.xMin=t.axis_rotated?1:0;e.xMax=t.axis_rotated?e.height:e.width;e.yMin=t.axis_rotated?0:e.height;e.yMax=t.axis_rotated?e.width:1;e.subXMin=e.xMin;e.subXMax=e.xMax;e.subYMin=t.axis_rotated?0:e.height2;e.subYMax=t.axis_rotated?e.width2:1;e.x=e.getX(e.xMin,e.xMax,i?undefined:e.x.orgDomain(),(function(){return e.xAxis.tickOffset()}));e.y=e.getY(e.yMin,e.yMax,i?t.axis_y_default:e.y.domain());e.y2=e.getY(e.yMin,e.yMax,i?t.axis_y2_default:e.y2.domain());e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,(function(t){return t%1?0:e.subXAxis.tickOffset()}));e.subY=e.getY(e.subYMin,e.subYMax,i?t.axis_y_default:e.subY.domain());e.subY2=e.getY(e.subYMin,e.subYMax,i?t.axis_y2_default:e.subY2.domain());e.xAxisTickFormat=e.axis.getXAxisTickFormat();e.xAxisTickValues=e.axis.getXAxisTickValues();e.yAxisTickValues=e.axis.getYAxisTickValues();e.y2AxisTickValues=e.axis.getY2AxisTickValues();e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer);e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer);e.yAxis=e.axis.getYAxis(e.y,e.yOrient,t.axis_y_tick_format,e.yAxisTickValues,t.axis_y_tick_outer);e.y2Axis=e.axis.getYAxis(e.y2,e.y2Orient,t.axis_y2_tick_format,e.y2AxisTickValues,t.axis_y2_tick_outer);if(!i){if(e.brush){e.brush.scale(e.subX)}if(t.zoom_enabled){e.zoom.scale(e.x)}}if(e.updateArc){e.updateArc()}};n.getYDomainMin=function(e){var t=this,i=t.config,n=t.mapToIds(e),r=t.getValuesAsIdKeyed(e),o,a,s,l,u,c;if(i.data_groups.length>0){c=t.hasNegativeValueInTargets(e);for(o=0;o<i.data_groups.length;o++){l=i.data_groups[o].filter((function(e){return n.indexOf(e)>=0}));if(l.length===0){continue}s=l[0];if(c&&r[s]){r[s].forEach((function(e,t){r[s][t]=e<0?e:0}))}for(a=1;a<l.length;a++){u=l[a];if(!r[u]){continue}r[u].forEach((function(e,i){if(t.axis.getId(u)===t.axis.getId(s)&&r[s]&&!(c&&+e>0)){r[s][i]+=+e}}))}}}return t.d3.min(Object.keys(r).map((function(e){return t.d3.min(r[e])})))};n.getYDomainMax=function(e){var t=this,i=t.config,n=t.mapToIds(e),r=t.getValuesAsIdKeyed(e),o,a,s,l,u,c;if(i.data_groups.length>0){c=t.hasPositiveValueInTargets(e);for(o=0;o<i.data_groups.length;o++){l=i.data_groups[o].filter((function(e){return n.indexOf(e)>=0}));if(l.length===0){continue}s=l[0];if(c&&r[s]){r[s].forEach((function(e,t){r[s][t]=e>0?e:0}))}for(a=1;a<l.length;a++){u=l[a];if(!r[u]){continue}r[u].forEach((function(e,i){if(t.axis.getId(u)===t.axis.getId(s)&&r[s]&&!(c&&+e<0)){r[s][i]+=+e}}))}}}return t.d3.max(Object.keys(r).map((function(e){return t.d3.max(r[e])})))};n.getYDomain=function(e,t,i){var n=this,r=n.config,o=e.filter((function(e){return n.axis.getId(e.id)===t})),a=i?n.filterByXDomain(o,i):o,s=t==="y2"?r.axis_y2_min:r.axis_y_min,l=t==="y2"?r.axis_y2_max:r.axis_y_max,u=n.getYDomainMin(a),c=n.getYDomainMax(a),f,p,h,g,m,v=t==="y2"?r.axis_y2_center:r.axis_y_center,b,w,C,A,E,x,T=n.hasType("bar",a)&&r.bar_zerobased||n.hasType("area",a)&&r.area_zerobased,S=t==="y2"?r.axis_y2_inverted:r.axis_y_inverted,D=n.hasDataLabel()&&r.axis_rotated,k=n.hasDataLabel()&&!r.axis_rotated;u=d(s)?s:d(l)?u<l?u:l-10:u;c=d(l)?l:d(s)?s<c?c:s+10:c;if(a.length===0){return t==="y2"?n.y2.domain():n.y.domain()}if(isNaN(u)){u=0}if(isNaN(c)){c=u}if(u===c){u<0?c=0:u=0}E=u>=0&&c>=0;x=u<=0&&c<=0;if(d(s)&&E||d(l)&&x){T=false}if(T){if(E){u=0}if(x){c=0}}p=Math.abs(c-u);h=g=m=p*.1;if(typeof v!=="undefined"){b=Math.max(Math.abs(u),Math.abs(c));c=v+b;u=v-b}if(D){w=n.getDataLabelLength(u,c,"width");C=y(n.y.range());A=[w[0]/C,w[1]/C];g+=p*(A[1]/(1-A[0]-A[1]));m+=p*(A[0]/(1-A[0]-A[1]))}else if(k){w=n.getDataLabelLength(u,c,"height");g+=n.axis.convertPixelsToAxisPadding(w[1],p);m+=n.axis.convertPixelsToAxisPadding(w[0],p)}if(t==="y"&&_(r.axis_y_padding)){g=n.axis.getPadding(r.axis_y_padding,"top",g,p);m=n.axis.getPadding(r.axis_y_padding,"bottom",m,p)}if(t==="y2"&&_(r.axis_y2_padding)){g=n.axis.getPadding(r.axis_y2_padding,"top",g,p);m=n.axis.getPadding(r.axis_y2_padding,"bottom",m,p)}if(T){if(E){m=u}if(x){g=-c}}f=n.config.axis_rotated?[u,c]:[u-m,c+g];return S?f.reverse():f};n.getXDomainMin=function(e){var t=this,i=t.config;return g(i.axis_x_min)?t.isTimeSeries()?this.parseDate(i.axis_x_min):i.axis_x_min:t.d3.min(e,(function(e){return t.d3.min(e.values,(function(e){return e.x}))}))};n.getXDomainMax=function(e){var t=this,i=t.config;return g(i.axis_x_max)?t.isTimeSeries()?this.parseDate(i.axis_x_max):i.axis_x_max:t.d3.max(e,(function(e){return t.d3.max(e.values,(function(e){return e.x}))}))};n.getXDomainPadding=function(e){var t=this,i=t.config,n=e[1]-e[0],r,o,a,s;if(t.isCategorized()){o=0}else if(t.hasType("bar")){r=t.getMaxDataCount();o=r>1?n/(r-1)/2:.5}else{o=n*.01}if(typeof i.axis_x_padding==="object"&&_(i.axis_x_padding)){a=d(i.axis_x_padding.left)?i.axis_x_padding.left:o;s=d(i.axis_x_padding.right)?i.axis_x_padding.right:o}else if(typeof i.axis_x_padding==="number"){a=s=i.axis_x_padding}else{a=s=o}return{left:a,right:s}};n.getXDomain=function(e){var t=this,i=[t.getXDomainMin(e),t.getXDomainMax(e)],n=i[0],r=i[1],o=t.getXDomainPadding(i),a=0,s=0;if(n-r===0&&!t.isCategorized()){if(t.isTimeSeries()){n=new Date(n.getTime()*.5);r=new Date(r.getTime()*1.5)}else{n=n===0?1:n*.5;r=r===0?-1:r*1.5}}if(n||n===0){a=t.isTimeSeries()?new Date(n.getTime()-o.left):n-o.left}if(r||r===0){s=t.isTimeSeries()?new Date(r.getTime()+o.right):r+o.right}return[a,s]};n.updateXDomain=function(e,t,i,n,r){var o=this,a=o.config;if(i){o.x.domain(r?r:o.d3.extent(o.getXDomain(e)));o.orgXDomain=o.x.domain();if(a.zoom_enabled){o.zoom.scale(o.x).updateScaleExtent()}o.subX.domain(o.x.domain());if(o.brush){o.brush.scale(o.subX)}}if(t){o.x.domain(r?r:!o.brush||o.brush.empty()?o.orgXDomain:o.brush.extent());if(a.zoom_enabled){o.zoom.scale(o.x).updateScaleExtent()}}if(n){o.x.domain(o.trimXDomain(o.x.orgDomain()))}return o.x.domain()};n.trimXDomain=function(e){var t=this;if(e[0]<=t.orgXDomain[0]){e[1]=+e[1]+(t.orgXDomain[0]-e[0]);e[0]=t.orgXDomain[0]}if(t.orgXDomain[1]<=e[1]){e[0]=+e[0]-(e[1]-t.orgXDomain[1]);e[1]=t.orgXDomain[1]}return e};n.isX=function(e){var t=this,i=t.config;return i.data_x&&e===i.data_x||_(i.data_xs)&&C(i.data_xs,e)};n.isNotX=function(e){return!this.isX(e)};n.getXKey=function(e){var t=this,i=t.config;return i.data_x?i.data_x:_(i.data_xs)?i.data_xs[e]:null};n.getXValuesOfXKey=function(e,t){var i=this,n,r=t&&_(t)?i.mapToIds(t):[];r.forEach((function(t){if(i.getXKey(t)===e){n=i.data.xs[t]}}));return n};n.getIndexByX=function(e){var t=this,i=t.filterByX(t.data.targets,e);return i.length?i[0].index:null};n.getXValue=function(e,t){var i=this;return e in i.data.xs&&i.data.xs[e]&&d(i.data.xs[e][t])?i.data.xs[e][t]:t};n.getOtherTargetXs=function(){var e=this,t=Object.keys(e.data.xs);return t.length?e.data.xs[t[0]]:null};n.getOtherTargetX=function(e){var t=this.getOtherTargetXs();return t&&e<t.length?t[e]:null};n.addXs=function(e){var t=this;Object.keys(e).forEach((function(i){t.config.data_xs[i]=e[i]}))};n.hasMultipleX=function(e){return this.d3.set(Object.keys(e).map((function(t){return e[t]}))).size()>1};n.isMultipleX=function(){return _(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")};n.addName=function(e){var t=this,i;if(e){i=t.config.data_names[e.id];e.name=i?i:e.id}return e};n.getValueOnIndex=function(e,t){var i=e.filter((function(e){return e.index===t}));return i.length?i[0]:null};n.updateTargetX=function(e,t){var i=this;e.forEach((function(e){e.values.forEach((function(n,r){n.x=i.generateTargetX(t[r],e.id,r)}));i.data.xs[e.id]=t}))};n.updateTargetXs=function(e,t){var i=this;e.forEach((function(e){if(t[e.id]){i.updateTargetX([e],t[e.id])}}))};n.generateTargetX=function(e,t,i){var n=this,r;if(n.isTimeSeries()){r=e?n.parseDate(e):n.parseDate(n.getXValue(t,i))}else if(n.isCustomX()&&!n.isCategorized()){r=d(e)?+e:n.getXValue(t,i)}else{r=i}return r};n.cloneTarget=function(e){return{id:e.id,id_org:e.id_org,values:e.values.map((function(e){return{x:e.x,value:e.value,id:e.id}}))}};n.updateXs=function(){var e=this;if(e.data.targets.length){e.xs=[];e.data.targets[0].values.forEach((function(t){e.xs[t.index]=t.x}))}};n.getPrevX=function(e){var t=this.xs[e-1];return typeof t!=="undefined"?t:null};n.getNextX=function(e){var t=this.xs[e+1];return typeof t!=="undefined"?t:null};n.getMaxDataCount=function(){var e=this;return e.d3.max(e.data.targets,(function(e){return e.values.length}))};n.getMaxDataCountTarget=function(e){var t=e.length,i=0,n;if(t>1){e.forEach((function(e){if(e.values.length>i){n=e;i=e.values.length}}))}else{n=t?e[0]:null}return n};n.getEdgeX=function(e){var t=this;return!e.length?[0,0]:[t.d3.min(e,(function(e){return e.values[0].x})),t.d3.max(e,(function(e){return e.values[e.values.length-1].x}))]};n.mapToIds=function(e){return e.map((function(e){return e.id}))};n.mapToTargetIds=function(e){var t=this;return e?p(e)?[e]:e:t.mapToIds(t.data.targets)};n.hasTarget=function(e,t){var i=this.mapToIds(e),n;for(n=0;n<i.length;n++){if(i[n]===t){return true}}return false};n.isTargetToShow=function(e){return this.hiddenTargetIds.indexOf(e)<0};n.isLegendToShow=function(e){return this.hiddenLegendIds.indexOf(e)<0};n.filterTargetsToShow=function(e){var t=this;return e.filter((function(e){return t.isTargetToShow(e.id)}))};n.mapTargetsToUniqueXs=function(e){var t=this;var i=t.d3.set(t.d3.merge(e.map((function(e){return e.values.map((function(e){return+e.x}))})))).values();return t.isTimeSeries()?i.map((function(e){return new Date(+e)})):i.map((function(e){return+e}))};n.addHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.concat(e)};n.removeHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.filter((function(t){return e.indexOf(t)<0}))};n.addHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.concat(e)};n.removeHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.filter((function(t){return e.indexOf(t)<0}))};n.getValuesAsIdKeyed=function(e){var t={};e.forEach((function(e){t[e.id]=[];e.values.forEach((function(i){t[e.id].push(i.value)}))}));return t};n.checkValueInTargets=function(e,t){var i=Object.keys(e),n,r,o;for(n=0;n<i.length;n++){o=e[i[n]].values;for(r=0;r<o.length;r++){if(t(o[r].value)){return true}}}return false};n.hasNegativeValueInTargets=function(e){return this.checkValueInTargets(e,(function(e){return e<0}))};n.hasPositiveValueInTargets=function(e){return this.checkValueInTargets(e,(function(e){return e>0}))};n.isOrderDesc=function(){var e=this.config;return typeof e.data_order==="string"&&e.data_order.toLowerCase()==="desc"};n.isOrderAsc=function(){var e=this.config;return typeof e.data_order==="string"&&e.data_order.toLowerCase()==="asc"};n.orderTargets=function(e){var t=this,i=t.config,n=t.isOrderAsc(),r=t.isOrderDesc();if(n||r){e.sort((function(e,t){var i=function(e,t){return e+Math.abs(t.value)};var r=e.values.reduce(i,0),o=t.values.reduce(i,0);return n?o-r:r-o}))}else if(f(i.data_order)){e.sort(i.data_order)}return e};n.filterByX=function(e,t){return this.d3.merge(e.map((function(e){return e.values}))).filter((function(e){return e.x-t===0}))};n.filterRemoveNull=function(e){return e.filter((function(e){return d(e.value)}))};n.filterByXDomain=function(e,t){return e.map((function(e){return{id:e.id,id_org:e.id_org,values:e.values.filter((function(e){return t[0]<=e.x&&e.x<=t[1]}))}}))};n.hasDataLabel=function(){var e=this.config;if(typeof e.data_labels==="boolean"&&e.data_labels){return true}else if(typeof e.data_labels==="object"&&_(e.data_labels)){return true}return false};n.getDataLabelLength=function(e,t,i){var n=this,r=[0,0],o=1.3;n.selectChart.select("svg").selectAll(".dummy").data([e,t]).enter().append("text").text((function(e){return n.dataLabelFormat(e.id)(e)})).each((function(e,t){r[t]=this.getBoundingClientRect()[i]*o})).remove();return r};n.isNoneArc=function(e){return this.hasTarget(this.data.targets,e.id)},n.isArc=function(e){return"data"in e&&this.hasTarget(this.data.targets,e.data.id)};n.findSameXOfValues=function(e,t){var i,n=e[t].x,r=[];for(i=t-1;i>=0;i--){if(n!==e[i].x){break}r.push(e[i])}for(i=t;i<e.length;i++){if(n!==e[i].x){break}r.push(e[i])}return r};n.findClosestFromTargets=function(e,t){var i=this,n;n=e.map((function(e){return i.findClosest(e.values,t)}));return i.findClosest(n,t)};n.findClosest=function(e,t){var i=this,n=100,r;e.filter((function(e){return e&&i.isBarType(e.id)})).forEach((function(e){var t=i.main.select("."+c.bars+i.getTargetSelectorSuffix(e.id)+" ."+c.bar+"-"+e.index).node();if(!r&&i.isWithinBar(t)){r=e}}));e.filter((function(e){return e&&!i.isBarType(e.id)})).forEach((function(e){var o=i.dist(e,t);if(o<n){n=o;r=e}}));return r};n.dist=function(e,t){var i=this,n=i.config,r=n.axis_rotated?1:0,o=n.axis_rotated?0:1,a=i.circleY(e,e.index),s=i.x(e.x);return Math.pow(s-t[r],2)+Math.pow(a-t[o],2)};n.convertValuesToStep=function(e){var t=[].concat(e),i;if(!this.isCategorized()){return e}for(i=e.length+1;0<i;i--){t[i]=t[i-1]}t[0]={x:t[0].x-1,value:t[0].value,id:t[0].id};t[e.length+1]={x:t[e.length].x+1,value:t[e.length].value,id:t[e.length].id};return t};n.updateDataAttributes=function(e,t){var i=this,n=i.config,r=n["data_"+e];if(typeof t==="undefined"){return r}Object.keys(t).forEach((function(e){r[e]=t[e]}));i.redraw({withLegend:true});return r};n.convertUrlToData=function(e,t,i,n){var r=this,o=t?t:"csv";r.d3.xhr(e,(function(e,t){var a;if(!t){throw new Error(e.responseURL+" "+e.status+" ("+e.statusText+")")}if(o==="json"){a=r.convertJsonToData(JSON.parse(t.response),i)}else if(o==="tsv"){a=r.convertTsvToData(t.response)}else{a=r.convertCsvToData(t.response)}n.call(r,a)}))};n.convertXsvToData=function(e,t){var i=t.parseRows(e),n;if(i.length===1){n=[{}];i[0].forEach((function(e){n[0][e]=null}))}else{n=t.parse(e)}return n};n.convertCsvToData=function(e){return this.convertXsvToData(e,this.d3.csv)};n.convertTsvToData=function(e){return this.convertXsvToData(e,this.d3.tsv)};n.convertJsonToData=function(e,t){var i=this,n=[],r,o;if(t){if(t.x){r=t.value.concat(t.x);i.config.data_x=t.x}else{r=t.value}n.push(r);e.forEach((function(e){var t=[];r.forEach((function(i){var n=h(e[i])?null:e[i];t.push(n)}));n.push(t)}));o=i.convertRowsToData(n)}else{Object.keys(e).forEach((function(t){n.push([t].concat(e[t]))}));o=i.convertColumnsToData(n)}return o};n.convertRowsToData=function(e){var t=e[0],i={},n=[],r,o;for(r=1;r<e.length;r++){i={};for(o=0;o<e[r].length;o++){if(h(e[r][o])){throw new Error("Source data is missing a component at ("+r+","+o+")!")}i[t[o]]=e[r][o]}n.push(i)}return n};n.convertColumnsToData=function(e){var t=[],i,n,r;for(i=0;i<e.length;i++){r=e[i][0];for(n=1;n<e[i].length;n++){if(h(t[n-1])){t[n-1]={}}if(h(e[i][n])){throw new Error("Source data is missing a component at ("+i+","+n+")!")}t[n-1][r]=e[i][n]}}return t};n.convertDataToTargets=function(e,t){var i=this,n=i.config,r=i.d3.keys(e[0]).filter(i.isNotX,i),o=i.d3.keys(e[0]).filter(i.isX,i),a;r.forEach((function(r){var a=i.getXKey(r);if(i.isCustomX()||i.isTimeSeries()){if(o.indexOf(a)>=0){i.data.xs[r]=(t&&i.data.xs[r]?i.data.xs[r]:[]).concat(e.map((function(e){return e[a]})).filter(d).map((function(e,t){return i.generateTargetX(e,r,t)})))}else if(n.data_x){i.data.xs[r]=i.getOtherTargetXs()}else if(_(n.data_xs)){i.data.xs[r]=i.getXValuesOfXKey(a,i.data.targets)}}else{i.data.xs[r]=e.map((function(e,t){return t}))}}));r.forEach((function(e){if(!i.data.xs[e]){throw new Error('x is not defined for id = "'+e+'".')}}));a=r.map((function(t,r){var o=n.data_idConverter(t);return{id:o,id_org:t,values:e.map((function(e,a){var s=i.getXKey(t),l=e[s],u=i.generateTargetX(l,t,a);if(i.isCustomX()&&i.isCategorized()&&r===0&&l){if(a===0){n.axis_x_categories=[]}n.axis_x_categories.push(l)}if(h(e[t])||i.data.xs[t].length<=a){u=undefined}return{x:u,value:e[t]!==null&&!isNaN(e[t])?+e[t]:null,id:o}})).filter((function(e){return g(e.x)}))}}));a.forEach((function(e){var t;if(n.data_xSort){e.values=e.values.sort((function(e,t){var i=e.x||e.x===0?e.x:Infinity,n=t.x||t.x===0?t.x:Infinity;return i-n}))}t=0;e.values.forEach((function(e){e.index=t++}));i.data.xs[e.id].sort((function(e,t){return e-t}))}));if(n.data_type){i.setTargetType(i.mapToIds(a).filter((function(e){return!(e in n.data_types)})),n.data_type)}a.forEach((function(e){i.addCache(e.id_org,e)}));return a};n.load=function(e,t){var i=this;if(e){if(t.filter){e=e.filter(t.filter)}if(t.type||t.types){e.forEach((function(e){var n=t.types&&t.types[e.id]?t.types[e.id]:t.type;i.setTargetType(e.id,n)}))}i.data.targets.forEach((function(t){for(var i=0;i<e.length;i++){if(t.id===e[i].id){t.values=e[i].values;e.splice(i,1);break}}}));i.data.targets=i.data.targets.concat(e)}i.updateTargets(i.data.targets);i.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true});if(t.done){t.done()}};n.loadFromArgs=function(e){var t=this;if(e.data){t.load(t.convertDataToTargets(e.data),e)}else if(e.url){t.convertUrlToData(e.url,e.mimeType,e.keys,(function(i){t.load(t.convertDataToTargets(i),e)}))}else if(e.json){t.load(t.convertDataToTargets(t.convertJsonToData(e.json,e.keys)),e)}else if(e.rows){t.load(t.convertDataToTargets(t.convertRowsToData(e.rows)),e)}else if(e.columns){t.load(t.convertDataToTargets(t.convertColumnsToData(e.columns)),e)}else{t.load(null,e)}};n.unload=function(e,t){var i=this;if(!t){t=function(){}}e=e.filter((function(e){return i.hasTarget(i.data.targets,e)}));if(!e||e.length===0){t();return}i.svg.selectAll(e.map((function(e){return i.selectorTarget(e)}))).transition().style("opacity",0).remove().call(i.endall,t);e.forEach((function(e){i.withoutFadeIn[e]=false;if(i.legend){i.legend.selectAll("."+c.legendItem+i.getTargetSelectorSuffix(e)).remove()}i.data.targets=i.data.targets.filter((function(t){return t.id!==e}))}))};n.categoryName=function(e){var t=this.config;return e<t.axis_x_categories.length?t.axis_x_categories[e]:e};n.initEventRect=function(){var e=this;e.main.select("."+c.chart).append("g").attr("class",c.eventRects).style("fill-opacity",0)};n.redrawEventRect=function(){var e=this,t=e.config,i,n,r=e.isMultipleX();var o=e.main.select("."+c.eventRects).style("cursor",t.zoom_enabled?t.axis_rotated?"ns-resize":"ew-resize":null).classed(c.eventRectsMultiple,r).classed(c.eventRectsSingle,!r);o.selectAll("."+c.eventRect).remove();e.eventRect=o.selectAll("."+c.eventRect);if(r){i=e.eventRect.data([0]);e.generateEventRectsForMultipleXs(i.enter());e.updateEventRect(i)}else{n=e.getMaxDataCountTarget(e.data.targets);o.datum(n?n.values:[]);e.eventRect=o.selectAll("."+c.eventRect);i=e.eventRect.data((function(e){return e}));e.generateEventRectsForSingleX(i.enter());e.updateEventRect(i);i.exit().remove()}};n.updateEventRect=function(e){var t=this,i=t.config,n,r,o,a,s,l;e=e||t.eventRect.data((function(e){return e}));if(t.isMultipleX()){n=0;r=0;o=t.width;a=t.height}else{if((t.isCustomX()||t.isTimeSeries())&&!t.isCategorized()){t.updateXs();s=function(e){var n=t.getPrevX(e.index),r=t.getNextX(e.index);if(n===null&&r===null){return i.axis_rotated?t.height:t.width}if(n===null){n=t.x.domain()[0]}if(r===null){r=t.x.domain()[1]}return Math.max(0,(t.x(r)-t.x(n))/2)};l=function(e){var i=t.getPrevX(e.index),n=t.getNextX(e.index),r=t.data.xs[e.id][e.index];if(i===null&&n===null){return 0}if(i===null){i=t.x.domain()[0]}return(t.x(r)+t.x(i))/2}}else{s=t.getEventRectWidth();l=function(e){return t.x(e.x)-s/2}}n=i.axis_rotated?0:l;r=i.axis_rotated?l:0;o=i.axis_rotated?t.width:s;a=i.axis_rotated?s:t.height}e.attr("class",t.classEvent.bind(t)).attr("x",n).attr("y",r).attr("width",o).attr("height",a)};n.generateEventRectsForSingleX=function(e){var t=this,i=t.d3,n=t.config;e.append("rect").attr("class",t.classEvent.bind(t)).style("cursor",n.data_selection_enabled&&n.data_selection_grouped?"pointer":null).on("mouseover",(function(e){var i=e.index;if(t.dragging||t.flowing){return}if(t.hasArcType()){return}if(n.point_focus_expand_enabled){t.expandCircles(i,null,true)}t.expandBars(i,null,true);t.main.selectAll("."+c.shape+"-"+i).each((function(e){n.data_onmouseover.call(t.api,e)}))})).on("mouseout",(function(e){var i=e.index;if(!t.config){return}if(t.hasArcType()){return}t.hideXGridFocus();t.hideTooltip();t.unexpandCircles();t.unexpandBars();t.main.selectAll("."+c.shape+"-"+i).each((function(e){n.data_onmouseout.call(t.api,e)}))})).on("mousemove",(function(e){var r,o=e.index,a=t.svg.select("."+c.eventRect+"-"+o);if(t.dragging||t.flowing){return}if(t.hasArcType()){return}if(t.isStepType(e)&&t.config.line_step_type==="step-after"&&i.mouse(this)[0]<t.x(t.getXValue(e.id,o))){o-=1}r=t.filterTargetsToShow(t.data.targets).map((function(e){return t.addName(t.getValueOnIndex(e.values,o))}));if(n.tooltip_grouped){t.showTooltip(r,this);t.showXGridFocus(r)}if(n.tooltip_grouped&&(!n.data_selection_enabled||n.data_selection_grouped)){return}t.main.selectAll("."+c.shape+"-"+o).each((function(){i.select(this).classed(c.EXPANDED,true);if(n.data_selection_enabled){a.style("cursor",n.data_selection_grouped?"pointer":null)}if(!n.tooltip_grouped){t.hideXGridFocus();t.hideTooltip();if(!n.data_selection_grouped){t.unexpandCircles(o);t.unexpandBars(o)}}})).filter((function(e){return t.isWithinShape(this,e)})).each((function(e){if(n.data_selection_enabled&&(n.data_selection_grouped||n.data_selection_isselectable(e))){a.style("cursor","pointer")}if(!n.tooltip_grouped){t.showTooltip([e],this);t.showXGridFocus([e]);if(n.point_focus_expand_enabled){t.expandCircles(o,e.id,true)}t.expandBars(o,e.id,true)}}))})).on("click",(function(e){var r=e.index;if(t.hasArcType()||!t.toggleShape){return}if(t.cancelClick){t.cancelClick=false;return}if(t.isStepType(e)&&n.line_step_type==="step-after"&&i.mouse(this)[0]<t.x(t.getXValue(e.id,r))){r-=1}t.main.selectAll("."+c.shape+"-"+r).each((function(e){if(n.data_selection_grouped||t.isWithinShape(this,e)){t.toggleShape(this,e,r);t.config.data_onclick.call(t.api,e,this)}}))})).call(n.data_selection_draggable&&t.drag?i.behavior.drag().origin(Object).on("drag",(function(){t.drag(i.mouse(this))})).on("dragstart",(function(){t.dragstart(i.mouse(this))})).on("dragend",(function(){t.dragend()})):function(){})};n.generateEventRectsForMultipleXs=function(e){var t=this,i=t.d3,n=t.config;function r(){t.svg.select("."+c.eventRect).style("cursor",null);t.hideXGridFocus();t.hideTooltip();t.unexpandCircles();t.unexpandBars()}e.append("rect").attr("x",0).attr("y",0).attr("width",t.width).attr("height",t.height).attr("class",c.eventRect).on("mouseout",(function(){if(!t.config){return}if(t.hasArcType()){return}r()})).on("mousemove",(function(){var e=t.filterTargetsToShow(t.data.targets);var o,a,s,l;if(t.dragging){return}if(t.hasArcType(e)){return}o=i.mouse(this);a=t.findClosestFromTargets(e,o);if(t.mouseover&&(!a||a.id!==t.mouseover.id)){n.data_onmouseout.call(t.api,t.mouseover);t.mouseover=undefined}if(!a){r();return}if(t.isScatterType(a)||!n.tooltip_grouped){s=[a]}else{s=t.filterByX(e,a.x)}l=s.map((function(e){return t.addName(e)}));t.showTooltip(l,this);if(n.point_focus_expand_enabled){t.expandCircles(a.index,a.id,true)}t.expandBars(a.index,a.id,true);t.showXGridFocus(l);if(t.isBarType(a.id)||t.dist(a,o)<100){t.svg.select("."+c.eventRect).style("cursor","pointer");if(!t.mouseover){n.data_onmouseover.call(t.api,a);t.mouseover=a}}})).on("click",(function(){var e=t.filterTargetsToShow(t.data.targets);var r,o;if(t.hasArcType(e)){return}r=i.mouse(this);o=t.findClosestFromTargets(e,r);if(!o){return}if(t.isBarType(o.id)||t.dist(o,r)<100){t.main.selectAll("."+c.shapes+t.getTargetSelectorSuffix(o.id)).selectAll("."+c.shape+"-"+o.index).each((function(){if(n.data_selection_grouped||t.isWithinShape(this,o)){t.toggleShape(this,o,o.index);t.config.data_onclick.call(t.api,o,this)}}))}})).call(n.data_selection_draggable&&t.drag?i.behavior.drag().origin(Object).on("drag",(function(){t.drag(i.mouse(this))})).on("dragstart",(function(){t.dragstart(i.mouse(this))})).on("dragend",(function(){t.dragend()})):function(){})};n.dispatchEvent=function(t,i,n){var r=this,o="."+c.eventRect+(!r.isMultipleX()?"-"+i:""),a=r.main.select(o).node(),s=a.getBoundingClientRect(),l=s.left+(n?n[0]:0),u=s.top+(n?n[1]:0),d=document.createEvent("MouseEvents");d.initMouseEvent(t,true,true,e,0,l,u,l,u,false,false,false,false,0,null);a.dispatchEvent(d)};n.getCurrentWidth=function(){var e=this,t=e.config;return t.size_width?t.size_width:e.getParentWidth()};n.getCurrentHeight=function(){var e=this,t=e.config,i=t.size_height?t.size_height:e.getParentHeight();return i>0?i:320/(e.hasType("gauge")?2:1)};n.getCurrentPaddingTop=function(){var e=this.config;return d(e.padding_top)?e.padding_top:0};n.getCurrentPaddingBottom=function(){var e=this.config;return d(e.padding_bottom)?e.padding_bottom:0};n.getCurrentPaddingLeft=function(e){var t=this,i=t.config;if(d(i.padding_left)){return i.padding_left}else if(i.axis_rotated){return!i.axis_x_show?1:Math.max(m(t.getAxisWidthByAxisId("x",e)),40)}else if(!i.axis_y_show||i.axis_y_inner){return t.axis.getYAxisLabelPosition().isOuter?30:1}else{return m(t.getAxisWidthByAxisId("y",e))}};n.getCurrentPaddingRight=function(){var e=this,t=e.config,i=10,n=e.isLegendRight?e.getLegendWidth()+20:0;if(d(t.padding_right)){return t.padding_right+1}else if(t.axis_rotated){return i+n}else if(!t.axis_y2_show||t.axis_y2_inner){return 2+n+(e.axis.getY2AxisLabelPosition().isOuter?20:0)}else{return m(e.getAxisWidthByAxisId("y2"))+n}};n.getParentRectValue=function(e){var t=this.selectChart.node(),i;while(t&&t.tagName!=="BODY"){try{i=t.getBoundingClientRect()[e]}catch(n){if(e==="width"){i=t.offsetWidth}}if(i){break}t=t.parentNode}return i};n.getParentWidth=function(){return this.getParentRectValue("width")};n.getParentHeight=function(){var e=this.selectChart.style("height");return e.indexOf("px")>0?+e.replace("px",""):0};n.getSvgLeft=function(e){var t=this,i=t.config,n=i.axis_rotated||!i.axis_rotated&&!i.axis_y_inner,r=i.axis_rotated?c.axisX:c.axisY,o=t.main.select("."+r).node(),a=o&&n?o.getBoundingClientRect():{right:0},s=t.selectChart.node().getBoundingClientRect(),l=t.hasArcType(),u=a.right-s.left-(l?0:t.getCurrentPaddingLeft(e));return u>0?u:0};n.getAxisWidthByAxisId=function(e,t){var i=this,n=i.axis.getLabelPositionById(e);return i.axis.getMaxTickWidth(e,t)+(n.isInner?20:40)};n.getHorizontalAxisHeight=function(e){var t=this,i=t.config,n=30;if(e==="x"&&!i.axis_x_show){return 8}if(e==="x"&&i.axis_x_height){return i.axis_x_height}if(e==="y"&&!i.axis_y_show){return i.legend_show&&!t.isLegendRight&&!t.isLegendInset?10:1}if(e==="y2"&&!i.axis_y2_show){return t.rotated_padding_top}if(e==="x"&&!i.axis_rotated&&i.axis_x_tick_rotate){n=30+t.axis.getMaxTickWidth(e)*Math.cos(Math.PI*(90-i.axis_x_tick_rotate)/180)}return n+(t.axis.getLabelPositionById(e).isInner?0:10)+(e==="y2"?-10:0)};n.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())};n.getShapeIndices=function(e){var t=this,i=t.config,n={},r=0,o,a;t.filterTargetsToShow(t.data.targets.filter(e,t)).forEach((function(e){for(o=0;o<i.data_groups.length;o++){if(i.data_groups[o].indexOf(e.id)<0){continue}for(a=0;a<i.data_groups[o].length;a++){if(i.data_groups[o][a]in n){n[e.id]=n[i.data_groups[o][a]];break}}}if(h(n[e.id])){n[e.id]=r++}}));n.__max__=r-1;return n};n.getShapeX=function(e,t,i,n){var r=this,o=n?r.subX:r.x;return function(n){var r=n.id in i?i[n.id]:0;return n.x||n.x===0?o(n.x)-e*(t/2-r):0}};n.getShapeY=function(e){var t=this;return function(i){var n=e?t.getSubYScale(i.id):t.getYScale(i.id);return n(i.value)}};n.getShapeOffset=function(e,t,i){var n=this,r=n.orderTargets(n.filterTargetsToShow(n.data.targets.filter(e,n))),o=r.map((function(e){return e.id}));return function(e,a){var s=i?n.getSubYScale(e.id):n.getYScale(e.id),l=s(0),u=l;r.forEach((function(i){var r=n.isStepType(e)?n.convertValuesToStep(i.values):i.values;if(i.id===e.id||t[i.id]!==t[e.id]){return}if(o.indexOf(i.id)<o.indexOf(e.id)){if(r[a].value*e.value>=0){u+=s(r[a].value)-l}}}));return u}};n.isWithinShape=function(e,t){var i=this,n=i.d3.select(e),r;if(!i.isTargetToShow(t.id)){r=false}else if(e.nodeName==="circle"){r=i.isStepType(t)?i.isWithinStep(e,i.getYScale(t.id)(t.value)):i.isWithinCircle(e,i.pointSelectR(t)*1.5)}else if(e.nodeName==="path"){r=n.classed(c.bar)?i.isWithinBar(e):true}return r};n.getInterpolate=function(e){var t=this;return t.isSplineType(e)?"cardinal":t.isStepType(e)?t.config.line_step_type:"linear"};n.initLine=function(){var e=this;e.main.select("."+c.chart).append("g").attr("class",c.chartLines)};n.updateTargetsForLine=function(e){var t=this,i=t.config,n,r,o=t.classChartLine.bind(t),a=t.classLines.bind(t),s=t.classAreas.bind(t),l=t.classCircles.bind(t),u=t.classFocus.bind(t);n=t.main.select("."+c.chartLines).selectAll("."+c.chartLine).data(e).attr("class",(function(e){return o(e)+u(e)}));r=n.enter().append("g").attr("class",o).style("opacity",0).style("pointer-events","none");r.append("g").attr("class",a);r.append("g").attr("class",s);r.append("g").attr("class",(function(e){return t.generateClass(c.selectedCircles,e.id)}));r.append("g").attr("class",l).style("cursor",(function(e){return i.data_selection_isselectable(e)?"pointer":null}));e.forEach((function(e){t.main.selectAll("."+c.selectedCircles+t.getTargetSelectorSuffix(e.id)).selectAll("."+c.selectedCircle).each((function(t){t.value=e.values[t.index].value}))}))};n.updateLine=function(e){var t=this;t.mainLine=t.main.selectAll("."+c.lines).selectAll("."+c.line).data(t.lineData.bind(t));t.mainLine.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color);t.mainLine.style("opacity",t.initialOpacity.bind(t)).style("shape-rendering",(function(e){return t.isStepType(e)?"crispEdges":""})).attr("transform",null);t.mainLine.exit().transition().duration(e).style("opacity",0).remove()};n.redrawLine=function(e,t){return[(t?this.mainLine.transition():this.mainLine).attr("d",e).style("stroke",this.color).style("opacity",1)]};n.generateDrawLine=function(e,t){var i=this,n=i.config,r=i.d3.svg.line(),o=i.generateGetLinePoints(e,t),a=t?i.getSubYScale:i.getYScale,s=function(e){return(t?i.subxx:i.xx).call(i,e)},l=function(e,t){return n.data_groups.length>0?o(e,t)[0][1]:a.call(i,e.id)(e.value)};r=n.axis_rotated?r.x(l).y(s):r.x(s).y(l);if(!n.line_connectNull){r=r.defined((function(e){return e.value!=null}))}return function(e){var o=n.line_connectNull?i.filterRemoveNull(e.values):e.values,s=t?i.x:i.subX,l=a.call(i,e.id),u=0,c=0,d;if(i.isLineType(e)){if(n.data_regions[e.id]){d=i.lineWithRegions(o,s,l,n.data_regions[e.id])}else{if(i.isStepType(e)){o=i.convertValuesToStep(o)}d=r.interpolate(i.getInterpolate(e))(o)}}else{if(o[0]){u=s(o[0].x);c=l(o[0].value)}d=n.axis_rotated?"M "+c+" "+u:"M "+u+" "+c}return d?d:"M 0 0"}};n.generateGetLinePoints=function(e,t){var i=this,n=i.config,r=e.__max__+1,o=i.getShapeX(0,r,e,!!t),a=i.getShapeY(!!t),s=i.getShapeOffset(i.isLineType,e,!!t),l=t?i.getSubYScale:i.getYScale;return function(e,t){var r=l.call(i,e.id)(0),u=s(e,t)||r,c=o(e),d=a(e);if(n.axis_rotated){if(0<e.value&&d<r||e.value<0&&r<d){d=r}}return[[c,d-(r-u)],[c,d-(r-u)],[c,d-(r-u)],[c,d-(r-u)]]}};n.lineWithRegions=function(e,t,i,n){var r=this,o=r.config,a=-1,s,l,u="M",c,d,f,p,m,v,y,b,_=r.isCategorized()?.5:0,w,C,A=[];function E(e,t){var i;for(i=0;i<t.length;i++){if(t[i].start<e&&e<=t[i].end){return true}}return false}if(g(n)){for(s=0;s<n.length;s++){A[s]={};if(h(n[s].start)){A[s].start=e[0].x}else{A[s].start=r.isTimeSeries()?r.parseDate(n[s].start):n[s].start}if(h(n[s].end)){A[s].end=e[e.length-1].x}else{A[s].end=r.isTimeSeries()?r.parseDate(n[s].end):n[s].end}}}w=o.axis_rotated?function(e){return i(e.value)}:function(e){return t(e.x)};C=o.axis_rotated?function(e){return t(e.x)}:function(e){return i(e.value)};function x(e){return"M"+e[0][0]+" "+e[0][1]+" "+e[1][0]+" "+e[1][1]}if(r.isTimeSeries()){c=function(e,n,r,a){var s=e.x.getTime(),l=n.x-e.x,u=new Date(s+l*r),c=new Date(s+l*(r+a)),d;if(o.axis_rotated){d=[[i(f(r)),t(u)],[i(f(r+a)),t(c)]]}else{d=[[t(u),i(f(r))],[t(c),i(f(r+a))]]}return x(d)}}else{c=function(e,n,r,a){var s;if(o.axis_rotated){s=[[i(f(r),true),t(d(r))],[i(f(r+a),true),t(d(r+a))]]}else{s=[[t(d(r),true),i(f(r))],[t(d(r+a),true),i(f(r+a))]]}return x(s)}}for(s=0;s<e.length;s++){if(h(A)||!E(e[s].x,A)){u+=" "+w(e[s])+" "+C(e[s])}else{d=r.getScale(e[s-1].x+_,e[s].x+_,r.isTimeSeries());f=r.getScale(e[s-1].value,e[s].value);p=t(e[s].x)-t(e[s-1].x);m=i(e[s].value)-i(e[s-1].value);v=Math.sqrt(Math.pow(p,2)+Math.pow(m,2));y=2/v;b=y*2;for(l=y;l<=1;l+=b){u+=c(e[s-1],e[s],l,y)}}a=e[s].x}return u};n.updateArea=function(e){var t=this,i=t.d3;t.mainArea=t.main.selectAll("."+c.areas).selectAll("."+c.area).data(t.lineData.bind(t));t.mainArea.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",(function(){t.orgAreaOpacity=+i.select(this).style("opacity");return 0}));t.mainArea.style("opacity",t.orgAreaOpacity);t.mainArea.exit().transition().duration(e).style("opacity",0).remove()};n.redrawArea=function(e,t){return[(t?this.mainArea.transition():this.mainArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)]};n.generateDrawArea=function(e,t){var i=this,n=i.config,r=i.d3.svg.area(),o=i.generateGetAreaPoints(e,t),a=t?i.getSubYScale:i.getYScale,s=function(e){return(t?i.subxx:i.xx).call(i,e)},l=function(e,t){return n.data_groups.length>0?o(e,t)[0][1]:a.call(i,e.id)(i.getAreaBaseValue(e.id))},u=function(e,t){return n.data_groups.length>0?o(e,t)[1][1]:a.call(i,e.id)(e.value)};r=n.axis_rotated?r.x0(l).x1(u).y(s):r.x(s).y0(l).y1(u);if(!n.line_connectNull){r=r.defined((function(e){return e.value!==null}))}return function(e){var t=n.line_connectNull?i.filterRemoveNull(e.values):e.values,o=0,a=0,s;if(i.isAreaType(e)){if(i.isStepType(e)){t=i.convertValuesToStep(t)}s=r.interpolate(i.getInterpolate(e))(t)}else{if(t[0]){o=i.x(t[0].x);a=i.getYScale(e.id)(t[0].value)}s=n.axis_rotated?"M "+a+" "+o:"M "+o+" "+a}return s?s:"M 0 0"}};n.getAreaBaseValue=function(){return 0};n.generateGetAreaPoints=function(e,t){var i=this,n=i.config,r=e.__max__+1,o=i.getShapeX(0,r,e,!!t),a=i.getShapeY(!!t),s=i.getShapeOffset(i.isAreaType,e,!!t),l=t?i.getSubYScale:i.getYScale;return function(e,t){var r=l.call(i,e.id)(0),u=s(e,t)||r,c=o(e),d=a(e);if(n.axis_rotated){if(0<e.value&&d<r||e.value<0&&r<d){d=r}}return[[c,u],[c,d-(r-u)],[c,d-(r-u)],[c,u]]}};n.updateCircle=function(){var e=this;e.mainCircle=e.main.selectAll("."+c.circles).selectAll("."+c.circle).data(e.lineOrScatterData.bind(e));e.mainCircle.enter().append("circle").attr("class",e.classCircle.bind(e)).attr("r",e.pointR.bind(e)).style("fill",e.color);e.mainCircle.style("opacity",e.initialOpacityForCircle.bind(e));e.mainCircle.exit().remove()};n.redrawCircle=function(e,t,i){var n=this.main.selectAll("."+c.selectedCircle);return[(i?this.mainCircle.transition():this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",e).attr("cy",t),(i?n.transition():n).attr("cx",e).attr("cy",t)]};n.circleX=function(e){return e.x||e.x===0?this.x(e.x):null};n.updateCircleY=function(){var e=this,t,i;if(e.config.data_groups.length>0){t=e.getShapeIndices(e.isLineType),i=e.generateGetLinePoints(t);e.circleY=function(e,t){return i(e,t)[0][1]}}else{e.circleY=function(t){return e.getYScale(t.id)(t.value)}}};n.getCircles=function(e,t){var i=this;return(t?i.main.selectAll("."+c.circles+i.getTargetSelectorSuffix(t)):i.main).selectAll("."+c.circle+(d(e)?"-"+e:""))};n.expandCircles=function(e,t,i){var n=this,r=n.pointExpandedR.bind(n);if(i){n.unexpandCircles()}n.getCircles(e,t).classed(c.EXPANDED,true).attr("r",r)};n.unexpandCircles=function(e){var t=this,i=t.pointR.bind(t);t.getCircles(e).filter((function(){return t.d3.select(this).classed(c.EXPANDED)})).classed(c.EXPANDED,false).attr("r",i)};n.pointR=function(e){var t=this,i=t.config;return t.isStepType(e)?0:f(i.point_r)?i.point_r(e):i.point_r};n.pointExpandedR=function(e){var t=this,i=t.config;return i.point_focus_expand_enabled?i.point_focus_expand_r?i.point_focus_expand_r:t.pointR(e)*1.75:t.pointR(e)};n.pointSelectR=function(e){var t=this,i=t.config;return i.point_select_r?i.point_select_r:t.pointR(e)*4};n.isWithinCircle=function(e,t){var i=this.d3,n=i.mouse(e),r=i.select(e),o=+r.attr("cx"),a=+r.attr("cy");return Math.sqrt(Math.pow(o-n[0],2)+Math.pow(a-n[1],2))<t};n.isWithinStep=function(e,t){return Math.abs(t-this.d3.mouse(e)[1])<30};n.initBar=function(){var e=this;e.main.select("."+c.chart).append("g").attr("class",c.chartBars)};n.updateTargetsForBar=function(e){var t=this,i=t.config,n,r,o=t.classChartBar.bind(t),a=t.classBars.bind(t),s=t.classFocus.bind(t);n=t.main.select("."+c.chartBars).selectAll("."+c.chartBar).data(e).attr("class",(function(e){return o(e)+s(e)}));r=n.enter().append("g").attr("class",o).style("opacity",0).style("pointer-events","none");r.append("g").attr("class",a).style("cursor",(function(e){return i.data_selection_isselectable(e)?"pointer":null}))};n.updateBar=function(e){var t=this,i=t.barData.bind(t),n=t.classBar.bind(t),r=t.initialOpacity.bind(t),o=function(e){return t.color(e.id)};t.mainBar=t.main.selectAll("."+c.bars).selectAll("."+c.bar).data(i);t.mainBar.enter().append("path").attr("class",n).style("stroke",o).style("fill",o);t.mainBar.style("opacity",r);t.mainBar.exit().transition().duration(e).style("opacity",0).remove()};n.redrawBar=function(e,t){return[(t?this.mainBar.transition():this.mainBar).attr("d",e).style("fill",this.color).style("opacity",1)]};n.getBarW=function(e,t){var i=this,n=i.config,r=typeof n.bar_width==="number"?n.bar_width:t?e.tickInterval()*n.bar_width_ratio/t:0;return n.bar_width_max&&r>n.bar_width_max?n.bar_width_max:r};n.getBars=function(e,t){var i=this;return(t?i.main.selectAll("."+c.bars+i.getTargetSelectorSuffix(t)):i.main).selectAll("."+c.bar+(d(e)?"-"+e:""))};n.expandBars=function(e,t,i){var n=this;if(i){n.unexpandBars()}n.getBars(e,t).classed(c.EXPANDED,true)};n.unexpandBars=function(e){var t=this;t.getBars(e).classed(c.EXPANDED,false)};n.generateDrawBar=function(e,t){var i=this,n=i.config,r=i.generateGetBarPoints(e,t);return function(e,t){var i=r(e,t);var o=n.axis_rotated?1:0;var a=n.axis_rotated?0:1;var s="M "+i[0][o]+","+i[0][a]+" "+"L"+i[1][o]+","+i[1][a]+" "+"L"+i[2][o]+","+i[2][a]+" "+"L"+i[3][o]+","+i[3][a]+" "+"z";return s}};n.generateGetBarPoints=function(e,t){var i=this,n=t?i.subXAxis:i.xAxis,r=e.__max__+1,o=i.getBarW(n,r),a=i.getShapeX(o,r,e,!!t),s=i.getShapeY(!!t),l=i.getShapeOffset(i.isBarType,e,!!t),u=t?i.getSubYScale:i.getYScale;return function(e,t){var n=u.call(i,e.id)(0),r=l(e,t)||n,c=a(e),d=s(e);if(i.config.axis_rotated){if(0<e.value&&d<n||e.value<0&&n<d){d=n}}return[[c,r],[c,d-(n-r)],[c+o,d-(n-r)],[c+o,r]]}};n.isWithinBar=function(e){var t=this.d3.mouse(e),i=e.getBoundingClientRect(),n=e.pathSegList.getItem(0),r=e.pathSegList.getItem(1),o=Math.min(n.x,r.x),a=Math.min(n.y,r.y),s=i.width,l=i.height,u=2,c=o-u,d=o+s+u,f=a+l+u,p=a-u;return c<t[0]&&t[0]<d&&p<t[1]&&t[1]<f};n.initText=function(){var e=this;e.main.select("."+c.chart).append("g").attr("class",c.chartTexts);e.mainText=e.d3.selectAll([])};n.updateTargetsForText=function(e){var t=this,i,n,r=t.classChartText.bind(t),o=t.classTexts.bind(t),a=t.classFocus.bind(t);i=t.main.select("."+c.chartTexts).selectAll("."+c.chartText).data(e).attr("class",(function(e){return r(e)+a(e)}));n=i.enter().append("g").attr("class",r).style("opacity",0).style("pointer-events","none");n.append("g").attr("class",o)};n.updateText=function(e){var t=this,i=t.config,n=t.barOrLineData.bind(t),r=t.classText.bind(t);t.mainText=t.main.selectAll("."+c.texts).selectAll("."+c.text).data(n);t.mainText.enter().append("text").attr("class",r).attr("text-anchor",(function(e){return i.axis_rotated?e.value<0?"end":"start":"middle"})).style("stroke","none").style("fill",(function(e){return t.color(e)})).style("fill-opacity",0);t.mainText.text((function(e,i,n){return t.dataLabelFormat(e.id)(e.value,e.id,i,n)}));t.mainText.exit().transition().duration(e).style("fill-opacity",0).remove()};n.redrawText=function(e,t,i,n){return[(n?this.mainText.transition():this.mainText).attr("x",e).attr("y",t).style("fill",this.color).style("fill-opacity",i?0:this.opacityForText.bind(this))]};n.getTextRect=function(e,t){var i=this.d3.select("body").append("div").classed("c3",true),n=i.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),r;n.selectAll(".dummy").data([e]).enter().append("text").classed(t?t:"",true).text(e).each((function(){r=this.getBoundingClientRect()}));i.remove();return r};n.generateXYForText=function(e,t,i,n){var r=this,o=r.generateGetAreaPoints(e,false),a=r.generateGetBarPoints(t,false),s=r.generateGetLinePoints(i,false),l=n?r.getXForText:r.getYForText;return function(e,t){var i=r.isAreaType(e)?o:r.isBarType(e)?a:s;return l.call(r,i(e,t),e,this)}};n.getXForText=function(e,t,i){var n=this,r=i.getBoundingClientRect(),o,a;if(n.config.axis_rotated){a=n.isBarType(t)?4:6;o=e[2][1]+a*(t.value<0?-1:1)}else{o=n.hasType("bar")?(e[2][0]+e[0][0])/2:e[0][0]}if(t.value===null){if(o>n.width){o=n.width-r.width}else if(o<0){o=4}}return o};n.getYForText=function(e,t,i){var n=this,r=i.getBoundingClientRect(),o;if(n.config.axis_rotated){o=(e[0][0]+e[2][0]+r.height*.6)/2}else{o=e[2][1];if(t.value<0){o+=r.height;if(n.isBarType(t)&&n.isSafari()){o-=3}else if(!n.isBarType(t)&&n.isChrome()){o+=3}}else{o+=n.isBarType(t)?-3:-6}}if(t.value===null&&!n.config.axis_rotated){if(o<r.height){o=r.height}else if(o>this.height){o=this.height-4}}return o};n.setTargetType=function(e,t){var i=this,n=i.config;i.mapToTargetIds(e).forEach((function(e){i.withoutFadeIn[e]=t===n.data_types[e];n.data_types[e]=t}));if(!e){n.data_type=t}};n.hasType=function(e,t){var i=this,n=i.config.data_types,r=false;t=t||i.data.targets;if(t&&t.length){t.forEach((function(t){var i=n[t.id];if(i&&i.indexOf(e)>=0||!i&&e==="line"){r=true}}))}else if(Object.keys(n).length){Object.keys(n).forEach((function(t){if(n[t]===e){r=true}}))}else{r=i.config.data_type===e}return r};n.hasArcType=function(e){return this.hasType("pie",e)||this.hasType("donut",e)||this.hasType("gauge",e)};n.isLineType=function(e){var t=this.config,i=p(e)?e:e.id;return!t.data_types[i]||["line","spline","area","area-spline","step","area-step"].indexOf(t.data_types[i])>=0};n.isStepType=function(e){var t=p(e)?e:e.id;return["step","area-step"].indexOf(this.config.data_types[t])>=0};n.isSplineType=function(e){var t=p(e)?e:e.id;return["spline","area-spline"].indexOf(this.config.data_types[t])>=0};n.isAreaType=function(e){var t=p(e)?e:e.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[t])>=0};n.isBarType=function(e){var t=p(e)?e:e.id;return this.config.data_types[t]==="bar"};n.isScatterType=function(e){var t=p(e)?e:e.id;return this.config.data_types[t]==="scatter"};n.isPieType=function(e){var t=p(e)?e:e.id;return this.config.data_types[t]==="pie"};n.isGaugeType=function(e){var t=p(e)?e:e.id;return this.config.data_types[t]==="gauge"};n.isDonutType=function(e){var t=p(e)?e:e.id;return this.config.data_types[t]==="donut"};n.isArcType=function(e){return this.isPieType(e)||this.isDonutType(e)||this.isGaugeType(e)};n.lineData=function(e){return this.isLineType(e)?[e]:[]};n.arcData=function(e){return this.isArcType(e.data)?[e]:[]};n.barData=function(e){return this.isBarType(e)?e.values:[]};n.lineOrScatterData=function(e){return this.isLineType(e)||this.isScatterType(e)?e.values:[]};n.barOrLineData=function(e){return this.isBarType(e)||this.isLineType(e)?e.values:[]};n.initGrid=function(){var e=this,t=e.config,i=e.d3;e.grid=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",c.grid);if(t.grid_x_show){e.grid.append("g").attr("class",c.xgrids)}if(t.grid_y_show){e.grid.append("g").attr("class",c.ygrids)}if(t.grid_focus_show){e.grid.append("g").attr("class",c.xgridFocus).append("line").attr("class",c.xgridFocus)}e.xgrid=i.selectAll([]);if(!t.grid_lines_front){e.initGridLines()}};n.initGridLines=function(){var e=this,t=e.d3;e.gridLines=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",c.grid+" "+c.gridLines);e.gridLines.append("g").attr("class",c.xgridLines);e.gridLines.append("g").attr("class",c.ygridLines);e.xgridLines=t.selectAll([])};n.updateXGrid=function(e){var t=this,i=t.config,n=t.d3,r=t.generateGridData(i.grid_x_type,t.x),o=t.isCategorized()?t.xAxis.tickOffset():0;t.xgridAttr=i.axis_rotated?{x1:0,x2:t.width,y1:function(e){return t.x(e)-o},y2:function(e){return t.x(e)-o}}:{x1:function(e){return t.x(e)+o},x2:function(e){return t.x(e)+o},y1:0,y2:t.height};t.xgrid=t.main.select("."+c.xgrids).selectAll("."+c.xgrid).data(r);t.xgrid.enter().append("line").attr("class",c.xgrid);if(!e){t.xgrid.attr(t.xgridAttr).style("opacity",(function(){return+n.select(this).attr(i.axis_rotated?"y1":"x1")===(i.axis_rotated?t.height:0)?0:1}))}t.xgrid.exit().remove()};n.updateYGrid=function(){var e=this,t=e.config,i=e.yAxis.tickValues()||e.y.ticks(t.grid_y_ticks);e.ygrid=e.main.select("."+c.ygrids).selectAll("."+c.ygrid).data(i);e.ygrid.enter().append("line").attr("class",c.ygrid);e.ygrid.attr("x1",t.axis_rotated?e.y:0).attr("x2",t.axis_rotated?e.y:e.width).attr("y1",t.axis_rotated?0:e.y).attr("y2",t.axis_rotated?e.height:e.y);e.ygrid.exit().remove();e.smoothLines(e.ygrid,"grid")};n.gridTextAnchor=function(e){return e.position?e.position:"end"};n.gridTextDx=function(e){return e.position==="start"?4:e.position==="middle"?0:-4};n.xGridTextX=function(e){return e.position==="start"?-this.height:e.position==="middle"?-this.height/2:0};n.yGridTextX=function(e){return e.position==="start"?0:e.position==="middle"?this.width/2:this.width};n.updateGrid=function(e){var t=this,i=t.main,n=t.config,r,o,a;t.grid.style("visibility",t.hasArcType()?"hidden":"visible");i.select("line."+c.xgridFocus).style("visibility","hidden");if(n.grid_x_show){t.updateXGrid()}t.xgridLines=i.select("."+c.xgridLines).selectAll("."+c.xgridLine).data(n.grid_x_lines);r=t.xgridLines.enter().append("g").attr("class",(function(e){return c.xgridLine+(e["class"]?" "+e["class"]:"")}));r.append("line").style("opacity",0);r.append("text").attr("text-anchor",t.gridTextAnchor).attr("transform",n.axis_rotated?"":"rotate(-90)").attr("dx",t.gridTextDx).attr("dy",-5).style("opacity",0);t.xgridLines.exit().transition().duration(e).style("opacity",0).remove();if(n.grid_y_show){t.updateYGrid()}t.ygridLines=i.select("."+c.ygridLines).selectAll("."+c.ygridLine).data(n.grid_y_lines);o=t.ygridLines.enter().append("g").attr("class",(function(e){return c.ygridLine+(e["class"]?" "+e["class"]:"")}));o.append("line").style("opacity",0);o.append("text").attr("text-anchor",t.gridTextAnchor).attr("transform",n.axis_rotated?"rotate(-90)":"").attr("dx",t.gridTextDx).attr("dy",-5).style("opacity",0);a=t.yv.bind(t);t.ygridLines.select("line").transition().duration(e).attr("x1",n.axis_rotated?a:0).attr("x2",n.axis_rotated?a:t.width).attr("y1",n.axis_rotated?0:a).attr("y2",n.axis_rotated?t.height:a).style("opacity",1);t.ygridLines.select("text").transition().duration(e).attr("x",n.axis_rotated?t.xGridTextX.bind(t):t.yGridTextX.bind(t)).attr("y",a).text((function(e){return e.text})).style("opacity",1);t.ygridLines.exit().transition().duration(e).style("opacity",0).remove()};n.redrawGrid=function(e){var t=this,i=t.config,n=t.xv.bind(t),r=t.xgridLines.select("line"),o=t.xgridLines.select("text");return[(e?r.transition():r).attr("x1",i.axis_rotated?0:n).attr("x2",i.axis_rotated?t.width:n).attr("y1",i.axis_rotated?n:0).attr("y2",i.axis_rotated?n:t.height).style("opacity",1),(e?o.transition():o).attr("x",i.axis_rotated?t.yGridTextX.bind(t):t.xGridTextX.bind(t)).attr("y",n).text((function(e){return e.text})).style("opacity",1)]};n.showXGridFocus=function(e){var t=this,i=t.config,n=e.filter((function(e){return e&&d(e.value)})),r=t.main.selectAll("line."+c.xgridFocus),o=t.xx.bind(t);if(!i.tooltip_show){return}if(t.hasType("scatter")||t.hasArcType()){return}r.style("visibility","visible").data([n[0]]).attr(i.axis_rotated?"y1":"x1",o).attr(i.axis_rotated?"y2":"x2",o);t.smoothLines(r,"grid")};n.hideXGridFocus=function(){this.main.select("line."+c.xgridFocus).style("visibility","hidden")};n.updateXgridFocus=function(){var e=this,t=e.config;e.main.select("line."+c.xgridFocus).attr("x1",t.axis_rotated?0:-10).attr("x2",t.axis_rotated?e.width:-10).attr("y1",t.axis_rotated?-10:0).attr("y2",t.axis_rotated?-10:e.height)};n.generateGridData=function(e,t){var i=this,n=[],r,o,a,s,l=i.main.select("."+c.axisX).selectAll(".tick").size();if(e==="year"){r=i.getXDomain();o=r[0].getFullYear();a=r[1].getFullYear();for(s=o;s<=a;s++){n.push(new Date(s+"-01-01 00:00:00"))}}else{n=t.ticks(10);if(n.length>l){n=n.filter((function(e){return(""+e).indexOf(".")<0}))}}return n};n.getGridFilterToRemove=function(e){return e?function(t){var i=false;[].concat(e).forEach((function(e){if("value"in e&&t.value===e.value||"class"in e&&t["class"]===e["class"]){i=true}}));return i}:function(){return true}};n.removeGridLines=function(e,t){var i=this,n=i.config,r=i.getGridFilterToRemove(e),o=function(e){return!r(e)},a=t?c.xgridLines:c.ygridLines,s=t?c.xgridLine:c.ygridLine;i.main.select("."+a).selectAll("."+s).filter(r).transition().duration(n.transition_duration).style("opacity",0).remove();if(t){n.grid_x_lines=n.grid_x_lines.filter(o)}else{n.grid_y_lines=n.grid_y_lines.filter(o)}};n.initTooltip=function(){var e=this,t=e.config,i;e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",c.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none");if(t.tooltip_init_show){if(e.isTimeSeries()&&p(t.tooltip_init_x)){t.tooltip_init_x=e.parseDate(t.tooltip_init_x);for(i=0;i<e.data.targets[0].values.length;i++){if(e.data.targets[0].values[i].x-t.tooltip_init_x===0){break}}t.tooltip_init_x=i}e.tooltip.html(t.tooltip_contents.call(e,e.data.targets.map((function(i){return e.addName(i.values[t.tooltip_init_x])})),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color));e.tooltip.style("top",t.tooltip_init_position.top).style("left",t.tooltip_init_position.left).style("display","block")}};n.getTooltipContent=function(e,t,i,n){var r=this,o=r.config,a=o.tooltip_format_title||t,s=o.tooltip_format_name||function(e){return e},l=o.tooltip_format_value||i,u,d,f,p,h,g;for(d=0;d<e.length;d++){if(!(e[d]&&(e[d].value||e[d].value===0))){continue}if(!u){f=a?a(e[d].x):e[d].x;u="<table class='"+c.tooltip+"'>"+(f||f===0?"<tr><th colspan='2'>"+f+"</th></tr>":"")}p=l(e[d].value,e[d].ratio,e[d].id,e[d].index);if(p!==undefined){h=s(e[d].name,e[d].ratio,e[d].id,e[d].index);g=r.levelColor?r.levelColor(e[d].value):n(e[d].id);u+="<tr class='"+c.tooltipName+"-"+e[d].id+"'>";u+="<td class='name'><span style='background-color:"+g+"'></span>"+h+"</td>";u+="<td class='value'>"+p+"</td>";u+="</tr>"}}return u+"</table>"};n.tooltipPosition=function(e,t,i,n){var r=this,o=r.config,a=r.d3;var s,l,u,c,d;var f=r.hasArcType(),p=a.mouse(n);if(f){l=(r.width-(r.isLegendRight?r.getLegendWidth():0))/2+p[0];c=r.height/2+p[1]+20}else{s=r.getSvgLeft(true);if(o.axis_rotated){l=s+p[0]+100;u=l+t;d=r.currentWidth-r.getCurrentPaddingRight();c=r.x(e[0].x)+20}else{l=s+r.getCurrentPaddingLeft(true)+r.x(e[0].x)+20;u=l+t;d=s+r.currentWidth-r.getCurrentPaddingRight();c=p[1]+15}if(u>d){l-=u-d+20}if(c+i>r.currentHeight){c-=i+30}}if(c<0){c=0}return{top:c,left:l}};n.showTooltip=function(e,t){var i=this,r=i.config;var o,a,s;var l=i.hasArcType(),u=e.filter((function(e){return e&&d(e.value)})),c=r.tooltip_position||n.tooltipPosition;if(u.length===0||!r.tooltip_show){return}i.tooltip.html(r.tooltip_contents.call(i,e,i.axis.getXAxisTickFormat(),i.getYFormat(l),i.color)).style("display","block");o=i.tooltip.property("offsetWidth");a=i.tooltip.property("offsetHeight");s=c.call(this,u,o,a,t);i.tooltip.style("top",s.top+"px").style("left",s.left+"px")};n.hideTooltip=function(){this.tooltip.style("display","none")};n.initLegend=function(){var e=this;e.legendItemTextBox={};e.legendHasRendered=false;e.legend=e.svg.append("g").attr("transform",e.getTranslate("legend"));if(!e.config.legend_show){e.legend.style("visibility","hidden");e.hiddenLegendIds=e.mapToIds(e.data.targets);return}e.updateLegendWithDefaults()};n.updateLegendWithDefaults=function(){var e=this;e.updateLegend(e.mapToIds(e.data.targets),{withTransform:false,withTransitionForTransform:false,withTransition:false})};n.updateSizeForLegend=function(e,t){var i=this,n=i.config,r={top:i.isLegendTop?i.getCurrentPaddingTop()+n.legend_inset_y+5.5:i.currentHeight-e-i.getCurrentPaddingBottom()-n.legend_inset_y,left:i.isLegendLeft?i.getCurrentPaddingLeft()+n.legend_inset_x+.5:i.currentWidth-t-i.getCurrentPaddingRight()-n.legend_inset_x+.5};i.margin3={top:i.isLegendRight?0:i.isLegendInset?r.top:i.currentHeight-e,right:NaN,bottom:0,left:i.isLegendRight?i.currentWidth-t:i.isLegendInset?r.left:0}};n.transformLegend=function(e){var t=this;(e?t.legend.transition():t.legend).attr("transform",t.getTranslate("legend"))};n.updateLegendStep=function(e){this.legendStep=e};n.updateLegendItemWidth=function(e){this.legendItemWidth=e};n.updateLegendItemHeight=function(e){this.legendItemHeight=e};n.getLegendWidth=function(){var e=this;return e.config.legend_show?e.isLegendRight||e.isLegendInset?e.legendItemWidth*(e.legendStep+1):e.currentWidth:0};n.getLegendHeight=function(){var e=this,t=0;if(e.config.legend_show){if(e.isLegendRight){t=e.currentHeight}else{t=Math.max(20,e.legendItemHeight)*(e.legendStep+1)}}return t};n.opacityForLegend=function(e){return e.classed(c.legendItemHidden)?null:1};n.opacityForUnfocusedLegend=function(e){return e.classed(c.legendItemHidden)?null:.3};n.toggleFocusLegend=function(e,t){var i=this;e=i.mapToTargetIds(e);i.legend.selectAll("."+c.legendItem).filter((function(t){return e.indexOf(t)>=0})).classed(c.legendItemFocused,t).transition().duration(100).style("opacity",(function(){var e=t?i.opacityForLegend:i.opacityForUnfocusedLegend;return e.call(i,i.d3.select(this))}))};n.revertLegend=function(){var e=this,t=e.d3;e.legend.selectAll("."+c.legendItem).classed(c.legendItemFocused,false).transition().duration(100).style("opacity",(function(){return e.opacityForLegend(t.select(this))}))};n.showLegend=function(e){var t=this,i=t.config;if(!i.legend_show){i.legend_show=true;t.legend.style("visibility","visible");if(!t.legendHasRendered){t.updateLegendWithDefaults()}}t.removeHiddenLegendIds(e);t.legend.selectAll(t.selectorLegends(e)).style("visibility","visible").transition().style("opacity",(function(){return t.opacityForLegend(t.d3.select(this))}))};n.hideLegend=function(e){var t=this,i=t.config;if(i.legend_show&&b(e)){i.legend_show=false;t.legend.style("visibility","hidden")}t.addHiddenLegendIds(e);t.legend.selectAll(t.selectorLegends(e)).style("opacity",0).style("visibility","hidden")};n.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}};n.updateLegend=function(e,t,i){var n=this,r=n.config;var o,a,s,l,u,d;var f=4,p=10,h=0,m=0,v=10,y=15;var b,_=0,C={},A={},E={},x=[0],T={},S=0;var D,k;var O,R,N,P;t=t||{};D=w(t,"withTransition",true);k=w(t,"withTransitionForTransform",true);function I(e,t){if(!n.legendItemTextBox[t]){n.legendItemTextBox[t]=n.getTextRect(e.textContent,c.legendItem)}return n.legendItemTextBox[t]}function M(t,i,o){var a=o===0,s=o===e.length-1,l=I(t,i),u=l.width+y+(s&&!(n.isLegendRight||n.isLegendInset)?0:p),c=l.height+f,d=n.isLegendRight||n.isLegendInset?c:u,g=n.isLegendRight||n.isLegendInset?n.getLegendHeight():n.getLegendWidth(),b,w;function D(e,t){if(!t){b=(g-_-d)/2;if(b<v){b=(g-d)/2;_=0;S++}}T[e]=S;x[S]=n.isLegendInset?10:b;C[e]=_;_+=d}if(a){_=0;S=0;h=0;m=0}if(r.legend_show&&!n.isLegendToShow(i)){A[i]=E[i]=T[i]=C[i]=0;return}A[i]=u;E[i]=c;if(!h||u>=h){h=u}if(!m||c>=m){m=c}w=n.isLegendRight||n.isLegendInset?m:h;if(r.legend_equally){Object.keys(A).forEach((function(e){A[e]=h}));Object.keys(E).forEach((function(e){E[e]=m}));b=(g-w*e.length)/2;if(b<v){_=0;S=0;e.forEach((function(e){D(e)}))}else{D(i,true)}}else{D(i)}}if(n.isLegendInset){S=r.legend_inset_step?r.legend_inset_step:e.length;n.updateLegendStep(S)}if(n.isLegendRight){o=function(e){return h*T[e]};l=function(e){return x[T[e]]+C[e]}}else if(n.isLegendInset){o=function(e){return h*T[e]+10};l=function(e){return x[T[e]]+C[e]}}else{o=function(e){return x[T[e]]+C[e]};l=function(e){return m*T[e]}}a=function(e,t){return o(e,t)+14};u=function(e,t){return l(e,t)+9};s=function(e,t){return o(e,t)};d=function(e,t){return l(e,t)-5};b=n.legend.selectAll("."+c.legendItem).data(e).enter().append("g").attr("class",(function(e){return n.generateClass(c.legendItem,e)})).style("visibility",(function(e){return n.isLegendToShow(e)?"visible":"hidden"})).style("cursor","pointer").on("click",(function(e){if(r.legend_item_onclick){r.legend_item_onclick.call(n,e)}else{if(n.d3.event.altKey){n.api.hide();n.api.show(e)}else{n.api.toggle(e);n.isTargetToShow(e)?n.api.focus(e):n.api.revert()}}})).on("mouseover",(function(e){n.d3.select(this).classed(c.legendItemFocused,true);if(!n.transiting&&n.isTargetToShow(e)){n.api.focus(e)}if(r.legend_item_onmouseover){r.legend_item_onmouseover.call(n,e)}})).on("mouseout",(function(e){n.d3.select(this).classed(c.legendItemFocused,false);n.api.revert();if(r.legend_item_onmouseout){r.legend_item_onmouseout.call(n,e)}}));b.append("text").text((function(e){return g(r.data_names[e])?r.data_names[e]:e})).each((function(e,t){M(this,e,t)})).style("pointer-events","none").attr("x",n.isLegendRight||n.isLegendInset?a:-200).attr("y",n.isLegendRight||n.isLegendInset?-200:u);b.append("rect").attr("class",c.legendItemEvent).style("fill-opacity",0).attr("x",n.isLegendRight||n.isLegendInset?s:-200).attr("y",n.isLegendRight||n.isLegendInset?-200:d);b.append("rect").attr("class",c.legendItemTile).style("pointer-events","none").style("fill",n.color).attr("x",n.isLegendRight||n.isLegendInset?a:-200).attr("y",n.isLegendRight||n.isLegendInset?-200:l).attr("width",10).attr("height",10);P=n.legend.select("."+c.legendBackground+" rect");if(n.isLegendInset&&h>0&&P.size()===0){P=n.legend.insert("g","."+c.legendItem).attr("class",c.legendBackground).append("rect")}O=n.legend.selectAll("text").data(e).text((function(e){return g(r.data_names[e])?r.data_names[e]:e})).each((function(e,t){M(this,e,t)}));(D?O.transition():O).attr("x",a).attr("y",u);R=n.legend.selectAll("rect."+c.legendItemEvent).data(e);(D?R.transition():R).attr("width",(function(e){return A[e]})).attr("height",(function(e){return E[e]})).attr("x",s).attr("y",d);N=n.legend.selectAll("rect."+c.legendItemTile).data(e);(D?N.transition():N).style("fill",n.color).attr("x",o).attr("y",l);if(P){(D?P.transition():P).attr("height",n.getLegendHeight()-12).attr("width",h*(S+1)+10)}n.legend.selectAll("."+c.legendItem).classed(c.legendItemHidden,(function(e){return!n.isTargetToShow(e)}));n.updateLegendItemWidth(h);n.updateLegendItemHeight(m);n.updateLegendStep(S);n.updateSizes();n.updateScales();n.updateSvgSize();n.transformAll(k,i);n.legendHasRendered=true};function u(e){o.call(this,e)}a(o,u);u.prototype.init=function e(){var t=this.owner,i=t.config,n=t.main;t.axes.x=n.append("g").attr("class",c.axis+" "+c.axisX).attr("clip-path",t.clipPathForXAxis).attr("transform",t.getTranslate("x")).style("visibility",i.axis_x_show?"visible":"hidden");t.axes.x.append("text").attr("class",c.axisXLabel).attr("transform",i.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this));t.axes.y=n.append("g").attr("class",c.axis+" "+c.axisY).attr("clip-path",i.axis_y_inner?"":t.clipPathForYAxis).attr("transform",t.getTranslate("y")).style("visibility",i.axis_y_show?"visible":"hidden");t.axes.y.append("text").attr("class",c.axisYLabel).attr("transform",i.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this));t.axes.y2=n.append("g").attr("class",c.axis+" "+c.axisY2).attr("transform",t.getTranslate("y2")).style("visibility",i.axis_y2_show?"visible":"hidden");t.axes.y2.append("text").attr("class",c.axisY2Label).attr("transform",i.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))};u.prototype.getXAxis=function e(t,i,n,r,o,a,s){var l=this.owner,u=l.config,c={isCategory:l.isCategorized(),withOuterTick:o,tickMultiline:u.axis_x_tick_multiline,tickWidth:u.axis_x_tick_width,tickTextRotate:s?0:u.axis_x_tick_rotate,withoutTransition:a},d=x(l.d3,c).scale(t).orient(i);if(l.isTimeSeries()&&r){r=r.map((function(e){return l.parseDate(e)}))}d.tickFormat(n).tickValues(r);if(l.isCategorized()){d.tickCentered(u.axis_x_tick_centered);if(b(u.axis_x_tick_culling)){u.axis_x_tick_culling=false}}return d};u.prototype.updateXAxisTickValues=function e(t,i){var n=this.owner,r=n.config,o;if(r.axis_x_tick_fit||r.axis_x_tick_count){o=this.generateTickValues(n.mapTargetsToUniqueXs(t),r.axis_x_tick_count,n.isTimeSeries())}if(i){i.tickValues(o)}else{n.xAxis.tickValues(o);n.subXAxis.tickValues(o)}return o};u.prototype.getYAxis=function e(t,i,n,r,o,a){var s={withOuterTick:o,withoutTransition:a},l=this.owner,u=l.d3,c=l.config,d=x(u,s).scale(t).orient(i).tickFormat(n);if(l.isTimeSeriesY()){d.ticks(u.time[c.axis_y_tick_time_value],c.axis_y_tick_time_interval)}else{d.tickValues(r)}return d};u.prototype.getId=function e(t){var i=this.owner.config;return t in i.data_axes?i.data_axes[t]:"y"};u.prototype.getXAxisTickFormat=function e(){var t=this.owner,i=t.config,n=t.isTimeSeries()?t.defaultAxisTimeFormat:t.isCategorized()?t.categoryName:function(e){return e<0?e.toFixed(0):e};if(i.axis_x_tick_format){if(f(i.axis_x_tick_format)){n=i.axis_x_tick_format}else if(t.isTimeSeries()){n=function(e){return e?t.axisTimeFormat(i.axis_x_tick_format)(e):""}}}return f(n)?function(e){return n.call(t,e)}:n};u.prototype.getTickValues=function e(t,i){return t?t:i?i.tickValues():undefined};u.prototype.getXAxisTickValues=function e(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)};u.prototype.getYAxisTickValues=function e(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)};u.prototype.getY2AxisTickValues=function e(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)};u.prototype.getLabelOptionByAxisId=function e(t){var i=this.owner,n=i.config,r;if(t==="y"){r=n.axis_y_label}else if(t==="y2"){r=n.axis_y2_label}else if(t==="x"){r=n.axis_x_label}return r};u.prototype.getLabelText=function e(t){var i=this.getLabelOptionByAxisId(t);return p(i)?i:i?i.text:null};u.prototype.setLabelText=function e(t,i){var n=this.owner,r=n.config,o=this.getLabelOptionByAxisId(t);if(p(o)){if(t==="y"){r.axis_y_label=i}else if(t==="y2"){r.axis_y2_label=i}else if(t==="x"){r.axis_x_label=i}}else if(o){o.text=i}};u.prototype.getLabelPosition=function e(t,i){var n=this.getLabelOptionByAxisId(t),r=n&&typeof n==="object"&&n.position?n.position:i;return{isInner:r.indexOf("inner")>=0,isOuter:r.indexOf("outer")>=0,isLeft:r.indexOf("left")>=0,isCenter:r.indexOf("center")>=0,isRight:r.indexOf("right")>=0,isTop:r.indexOf("top")>=0,isMiddle:r.indexOf("middle")>=0,isBottom:r.indexOf("bottom")>=0}};u.prototype.getXAxisLabelPosition=function e(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")};u.prototype.getYAxisLabelPosition=function e(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")};u.prototype.getY2AxisLabelPosition=function e(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")};u.prototype.getLabelPositionById=function e(t){return t==="y2"?this.getY2AxisLabelPosition():t==="y"?this.getYAxisLabelPosition():this.getXAxisLabelPosition()};u.prototype.textForXAxisLabel=function e(){return this.getLabelText("x")};u.prototype.textForYAxisLabel=function e(){return this.getLabelText("y")};u.prototype.textForY2AxisLabel=function e(){return this.getLabelText("y2")};u.prototype.xForAxisLabel=function e(t,i){var n=this.owner;if(t){return i.isLeft?0:i.isCenter?n.width/2:n.width}else{return i.isBottom?-n.height:i.isMiddle?-n.height/2:0}};u.prototype.dxForAxisLabel=function e(t,i){if(t){return i.isLeft?"0.5em":i.isRight?"-0.5em":"0"}else{return i.isTop?"-0.5em":i.isBottom?"0.5em":"0"}};u.prototype.textAnchorForAxisLabel=function e(t,i){if(t){return i.isLeft?"start":i.isCenter?"middle":"end"}else{return i.isBottom?"start":i.isMiddle?"middle":"end"}};u.prototype.xForXAxisLabel=function e(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};u.prototype.xForYAxisLabel=function e(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};u.prototype.xForY2AxisLabel=function e(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};u.prototype.dxForXAxisLabel=function e(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};u.prototype.dxForYAxisLabel=function e(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};u.prototype.dxForY2AxisLabel=function e(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};u.prototype.dyForXAxisLabel=function e(){var t=this.owner,i=t.config,n=this.getXAxisLabelPosition();if(i.axis_rotated){return n.isInner?"1.2em":-25-this.getMaxTickWidth("x")}else{return n.isInner?"-0.5em":i.axis_x_height?i.axis_x_height-10:"3em"}};u.prototype.dyForYAxisLabel=function e(){var t=this.owner,i=this.getYAxisLabelPosition();if(t.config.axis_rotated){return i.isInner?"-0.5em":"3em"}else{return i.isInner?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)}};u.prototype.dyForY2AxisLabel=function e(){var t=this.owner,i=this.getY2AxisLabelPosition();if(t.config.axis_rotated){return i.isInner?"1.2em":"-2.2em"}else{return i.isInner?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)}};u.prototype.textAnchorForXAxisLabel=function e(){var t=this.owner;return this.textAnchorForAxisLabel(!t.config.axis_rotated,this.getXAxisLabelPosition())};u.prototype.textAnchorForYAxisLabel=function e(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getYAxisLabelPosition())};u.prototype.textAnchorForY2AxisLabel=function e(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getY2AxisLabelPosition())};u.prototype.getMaxTickWidth=function e(t,i){var n=this.owner,r=n.config,o=0,a,s,l,u,c;if(i&&n.currentMaxTickWidths[t]){return n.currentMaxTickWidths[t]}if(n.svg){a=n.filterTargetsToShow(n.data.targets);if(t==="y"){s=n.y.copy().domain(n.getYDomain(a,"y"));l=this.getYAxis(s,n.yOrient,r.axis_y_tick_format,n.yAxisTickValues,false,true)}else if(t==="y2"){s=n.y2.copy().domain(n.getYDomain(a,"y2"));l=this.getYAxis(s,n.y2Orient,r.axis_y2_tick_format,n.y2AxisTickValues,false,true)}else{s=n.x.copy().domain(n.getXDomain(a));l=this.getXAxis(s,n.xOrient,n.xAxisTickFormat,n.xAxisTickValues,false,true,true);this.updateXAxisTickValues(a,l)}u=n.d3.select("body").append("div").classed("c3",true);c=u.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),c.append("g").call(l).each((function(){n.d3.select(this).selectAll("text").each((function(){var e=this.getBoundingClientRect();if(o<e.width){o=e.width}}));u.remove()}))}n.currentMaxTickWidths[t]=o<=0?n.currentMaxTickWidths[t]:o;return n.currentMaxTickWidths[t]};u.prototype.updateLabels=function e(t){var i=this.owner;var n=i.main.select("."+c.axisX+" ."+c.axisXLabel),r=i.main.select("."+c.axisY+" ."+c.axisYLabel),o=i.main.select("."+c.axisY2+" ."+c.axisY2Label);(t?n.transition():n).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this));(t?r.transition():r).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this));(t?o.transition():o).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))};u.prototype.getPadding=function e(t,i,n,r){if(!d(t[i])){return n}if(t.unit==="ratio"){return t[i]*r}return this.convertPixelsToAxisPadding(t[i],r)};u.prototype.convertPixelsToAxisPadding=function e(t,i){var n=this.owner,r=n.config.axis_rotated?n.width:n.height;return i*(t/r)};u.prototype.generateTickValues=function e(t,i,n){var r=t,o,a,s,l,u,c,d;if(i){o=f(i)?i():i;if(o===1){r=[t[0]]}else if(o===2){r=[t[0],t[t.length-1]]}else if(o>2){l=o-2;a=t[0];s=t[t.length-1];u=(s-a)/(l+1);r=[a];for(c=0;c<l;c++){d=+a+u*(c+1);r.push(n?new Date(d):d)}r.push(s)}}if(!n){r=r.sort((function(e,t){return e-t}))}return r};u.prototype.generateTransitions=function e(t){var i=this.owner,n=i.axes;return{axisX:t?n.x.transition().duration(t):n.x,axisY:t?n.y.transition().duration(t):n.y,axisY2:t?n.y2.transition().duration(t):n.y2,axisSubX:t?n.subx.transition().duration(t):n.subx}};u.prototype.redraw=function e(t,i){var n=this.owner;n.axes.x.style("opacity",i?0:1);n.axes.y.style("opacity",i?0:1);n.axes.y2.style("opacity",i?0:1);n.axes.subx.style("opacity",i?0:1);t.axisX.call(n.xAxis);t.axisY.call(n.yAxis);t.axisY2.call(n.y2Axis);t.axisSubX.call(n.subXAxis)};n.getClipPath=function(t){var i=e.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(i?"":document.URL.split("#")[0])+"#"+t+")"};n.appendClip=function(e,t){return e.append("clipPath").attr("id",t).append("rect")};n.getAxisClipX=function(e){var t=Math.max(30,this.margin.left);return e?-(1+t):-(t-1)};n.getAxisClipY=function(e){return e?-20:-this.margin.top};n.getXAxisClipX=function(){var e=this;return e.getAxisClipX(!e.config.axis_rotated)};n.getXAxisClipY=function(){var e=this;return e.getAxisClipY(!e.config.axis_rotated)};n.getYAxisClipX=function(){var e=this;return e.config.axis_y_inner?-1:e.getAxisClipX(e.config.axis_rotated)};n.getYAxisClipY=function(){var e=this;return e.getAxisClipY(e.config.axis_rotated)};n.getAxisClipWidth=function(e){var t=this,i=Math.max(30,t.margin.left),n=Math.max(30,t.margin.right);return e?t.width+2+i+n:t.margin.left+20};n.getAxisClipHeight=function(e){return(e?this.margin.bottom:this.margin.top+this.height)+20};n.getXAxisClipWidth=function(){var e=this;return e.getAxisClipWidth(!e.config.axis_rotated)};n.getXAxisClipHeight=function(){var e=this;return e.getAxisClipHeight(!e.config.axis_rotated)};n.getYAxisClipWidth=function(){var e=this;return e.getAxisClipWidth(e.config.axis_rotated)+(e.config.axis_y_inner?20:0)};n.getYAxisClipHeight=function(){var e=this;return e.getAxisClipHeight(e.config.axis_rotated)};n.initPie=function(){var e=this,t=e.d3,i=e.config;e.pie=t.layout.pie().value((function(e){return e.values.reduce((function(e,t){return e+t.value}),0)}));if(!i.data_order){e.pie.sort(null)}};n.updateRadius=function(){var e=this,t=e.config,i=t.gauge_width||t.donut_width;e.radiusExpanded=Math.min(e.arcWidth,e.arcHeight)/2;e.radius=e.radiusExpanded*.95;e.innerRadiusRatio=i?(e.radius-i)/e.radius:.6;e.innerRadius=e.hasType("donut")||e.hasType("gauge")?e.radius*e.innerRadiusRatio:0};n.updateArc=function(){var e=this;e.svgArc=e.getSvgArc();e.svgArcExpanded=e.getSvgArcExpanded();e.svgArcExpandedSub=e.getSvgArcExpanded(.98)};n.updateAngle=function(e){var t=this,i=t.config,n=false,r=0,o=i.gauge_min,a=i.gauge_max,s,l;t.pie(t.filterTargetsToShow(t.data.targets)).forEach((function(t){if(!n&&t.data.id===e.data.id){n=true;e=t;e.index=r}r++}));if(isNaN(e.startAngle)){e.startAngle=0}if(isNaN(e.endAngle)){e.endAngle=e.startAngle}if(t.isGaugeType(e.data)){s=Math.PI/(a-o);l=e.value<o?0:e.value<a?e.value-o:a-o;e.startAngle=-1*(Math.PI/2);e.endAngle=e.startAngle+s*l}return n?e:null};n.getSvgArc=function(){var e=this,t=e.d3.svg.arc().outerRadius(e.radius).innerRadius(e.innerRadius),i=function(i,n){var r;if(n){return t(i)}r=e.updateAngle(i);return r?t(r):"M 0 0"};i.centroid=t.centroid;return i};n.getSvgArcExpanded=function(e){var t=this,i=t.d3.svg.arc().outerRadius(t.radiusExpanded*(e?e:1)).innerRadius(t.innerRadius);return function(e){var n=t.updateAngle(e);return n?i(n):"M 0 0"}};n.getArc=function(e,t,i){return i||this.isArcType(e.data)?this.svgArc(e,t):"M 0 0"};n.transformForArcLabel=function(e){var t=this,i=t.updateAngle(e),n,r,o,a,s,l="";if(i&&!t.hasType("gauge")){n=this.svgArc.centroid(i);r=isNaN(n[0])?0:n[0];o=isNaN(n[1])?0:n[1];a=Math.sqrt(r*r+o*o);s=t.radius&&a?(36/t.radius>.375?1.175-36/t.radius:.8)*t.radius/a:0;l="translate("+r*s+","+o*s+")"}return l};n.getArcRatio=function(e){var t=this,i=t.hasType("gauge")?Math.PI:Math.PI*2;return e?(e.endAngle-e.startAngle)/i:null};n.convertToArcData=function(e){return this.addName({id:e.data.id,value:e.value,ratio:this.getArcRatio(e),index:e.index})};n.textForArcLabel=function(e){var t=this,i,n,r,o,a;if(!t.shouldShowArcLabel()){return""}i=t.updateAngle(e);n=i?i.value:null;r=t.getArcRatio(i);o=e.data.id;if(!t.hasType("gauge")&&!t.meetsArcLabelThreshold(r)){return""}a=t.getArcLabelFormat();return a?a(n,r,o):t.defaultArcValueFormat(n,r)};n.expandArc=function(t){var i=this,n;if(i.transiting){n=e.setInterval((function(){if(!i.transiting){e.clearInterval(n);if(i.legend.selectAll(".c3-legend-item-focused").size()>0){i.expandArc(t)}}}),10);return}t=i.mapToTargetIds(t);i.svg.selectAll(i.selectorTargets(t,"."+c.chartArc)).each((function(e){if(!i.shouldExpand(e.data.id)){return}i.d3.select(this).selectAll("path").transition().duration(50).attr("d",i.svgArcExpanded).transition().duration(100).attr("d",i.svgArcExpandedSub).each((function(e){if(i.isDonutType(e.data)){}}))}))};n.unexpandArc=function(e){var t=this;if(t.transiting){return}e=t.mapToTargetIds(e);t.svg.selectAll(t.selectorTargets(e,"."+c.chartArc)).selectAll("path").transition().duration(50).attr("d",t.svgArc);t.svg.selectAll("."+c.arc).style("opacity",1)};n.shouldExpand=function(e){var t=this,i=t.config;return t.isDonutType(e)&&i.donut_expand||t.isGaugeType(e)&&i.gauge_expand||t.isPieType(e)&&i.pie_expand};n.shouldShowArcLabel=function(){var e=this,t=e.config,i=true;if(e.hasType("donut")){i=t.donut_label_show}else if(e.hasType("pie")){i=t.pie_label_show}return i};n.meetsArcLabelThreshold=function(e){var t=this,i=t.config,n=t.hasType("donut")?i.donut_label_threshold:i.pie_label_threshold;return e>=n};n.getArcLabelFormat=function(){var e=this,t=e.config,i=t.pie_label_format;if(e.hasType("gauge")){i=t.gauge_label_format}else if(e.hasType("donut")){i=t.donut_label_format}return i};n.getArcTitle=function(){var e=this;return e.hasType("donut")?e.config.donut_title:""};n.updateTargetsForArc=function(e){var t=this,i=t.main,n,r,o=t.classChartArc.bind(t),a=t.classArcs.bind(t),s=t.classFocus.bind(t);n=i.select("."+c.chartArcs).selectAll("."+c.chartArc).data(t.pie(e)).attr("class",(function(e){return o(e)+s(e.data)}));r=n.enter().append("g").attr("class",o);r.append("g").attr("class",a);r.append("text").attr("dy",t.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")};n.initArc=function(){var e=this;e.arcs=e.main.select("."+c.chart).append("g").attr("class",c.chartArcs).attr("transform",e.getTranslate("arc"));e.arcs.append("text").attr("class",c.chartArcsTitle).style("text-anchor","middle").text(e.getArcTitle())};n.redrawArc=function(e,t,i){var n=this,r=n.d3,o=n.config,a=n.main,s;s=a.selectAll("."+c.arcs).selectAll("."+c.arc).data(n.arcData.bind(n));s.enter().append("path").attr("class",n.classArc.bind(n)).style("fill",(function(e){return n.color(e.data)})).style("cursor",(function(e){return o.interaction_enabled&&o.data_selection_isselectable(e)?"pointer":null})).style("opacity",0).each((function(e){if(n.isGaugeType(e.data)){e.startAngle=e.endAngle=-1*(Math.PI/2)}this._current=e}));s.attr("transform",(function(e){return!n.isGaugeType(e.data)&&i?"scale(0)":""})).style("opacity",(function(e){return e===this._current?0:1})).on("mouseover",o.interaction_enabled?function(e){var t,i;if(n.transiting){return}t=n.updateAngle(e);i=n.convertToArcData(t);n.expandArc(t.data.id);n.api.focus(t.data.id);n.toggleFocusLegend(t.data.id,true);n.config.data_onmouseover(i,this)}:null).on("mousemove",o.interaction_enabled?function(e){var t=n.updateAngle(e),i=n.convertToArcData(t),r=[i];n.showTooltip(r,this)}:null).on("mouseout",o.interaction_enabled?function(e){var t,i;if(n.transiting){return}t=n.updateAngle(e);i=n.convertToArcData(t);n.unexpandArc(t.data.id);n.api.revert();n.revertLegend();n.hideTooltip();n.config.data_onmouseout(i,this)}:null).on("click",o.interaction_enabled?function(e,t){var i=n.updateAngle(e),r=n.convertToArcData(i);if(n.toggleShape){n.toggleShape(this,r,t)}n.config.data_onclick.call(n.api,r,this)}:null).each((function(){n.transiting=true})).transition().duration(e).attrTween("d",(function(e){var t=n.updateAngle(e),i;if(!t){return function(){return"M 0 0"}}if(isNaN(this._current.startAngle)){this._current.startAngle=0}if(isNaN(this._current.endAngle)){this._current.endAngle=this._current.startAngle}i=r.interpolate(this._current,t);this._current=i(0);return function(t){var r=i(t);r.data=e.data;return n.getArc(r,true)}})).attr("transform",i?"scale(1)":"").style("fill",(function(e){return n.levelColor?n.levelColor(e.data.values[0].value):n.color(e.data.id)})).style("opacity",1).call(n.endall,(function(){n.transiting=false}));s.exit().transition().duration(t).style("opacity",0).remove();a.selectAll("."+c.chartArc).select("text").style("opacity",0).attr("class",(function(e){return n.isGaugeType(e.data)?c.gaugeValue:""})).text(n.textForArcLabel.bind(n)).attr("transform",n.transformForArcLabel.bind(n)).style("font-size",(function(e){return n.isGaugeType(e.data)?Math.round(n.radius/5)+"px":""})).transition().duration(e).style("opacity",(function(e){return n.isTargetToShow(e.data.id)&&n.isArcType(e.data)?1:0}));a.select("."+c.chartArcsTitle).style("opacity",n.hasType("donut")||n.hasType("gauge")?1:0);if(n.hasType("gauge")){n.arcs.select("."+c.chartArcsBackground).attr("d",(function(){var e={data:[{value:o.gauge_max}],startAngle:-1*(Math.PI/2),endAngle:Math.PI/2};return n.getArc(e,true,true)}));n.arcs.select("."+c.chartArcsGaugeUnit).attr("dy",".75em").text(o.gauge_label_show?o.gauge_units:"");n.arcs.select("."+c.chartArcsGaugeMin).attr("dx",-1*(n.innerRadius+(n.radius-n.innerRadius)/2)+"px").attr("dy","1.2em").text(o.gauge_label_show?o.gauge_min:"");n.arcs.select("."+c.chartArcsGaugeMax).attr("dx",n.innerRadius+(n.radius-n.innerRadius)/2+"px").attr("dy","1.2em").text(o.gauge_label_show?o.gauge_max:"")}};n.initGauge=function(){var e=this.arcs;if(this.hasType("gauge")){e.append("path").attr("class",c.chartArcsBackground);e.append("text").attr("class",c.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none");e.append("text").attr("class",c.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none");e.append("text").attr("class",c.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none")}};n.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0};n.initRegion=function(){var e=this;e.region=e.main.append("g").attr("clip-path",e.clipPath).attr("class",c.regions)};n.updateRegion=function(e){var t=this,i=t.config;t.region.style("visibility",t.hasArcType()?"hidden":"visible");t.mainRegion=t.main.select("."+c.regions).selectAll("."+c.region).data(i.regions);t.mainRegion.enter().append("g").attr("class",t.classRegion.bind(t)).append("rect").style("fill-opacity",0);t.mainRegion.exit().transition().duration(e).style("opacity",0).remove()};n.redrawRegion=function(e){var t=this,i=t.mainRegion.selectAll("rect"),n=t.regionX.bind(t),r=t.regionY.bind(t),o=t.regionWidth.bind(t),a=t.regionHeight.bind(t);return[(e?i.transition():i).attr("x",n).attr("y",r).attr("width",o).attr("height",a).style("fill-opacity",(function(e){return d(e.opacity)?e.opacity:.1}))]};n.regionX=function(e){var t=this,i=t.config,n,r=e.axis==="y"?t.y:t.y2;if(e.axis==="y"||e.axis==="y2"){n=i.axis_rotated?"start"in e?r(e.start):0:0}else{n=i.axis_rotated?0:"start"in e?t.x(t.isTimeSeries()?t.parseDate(e.start):e.start):0}return n};n.regionY=function(e){var t=this,i=t.config,n,r=e.axis==="y"?t.y:t.y2;if(e.axis==="y"||e.axis==="y2"){n=i.axis_rotated?0:"end"in e?r(e.end):0}else{n=i.axis_rotated?"start"in e?t.x(t.isTimeSeries()?t.parseDate(e.start):e.start):0:0}return n};n.regionWidth=function(e){var t=this,i=t.config,n=t.regionX(e),r,o=e.axis==="y"?t.y:t.y2;if(e.axis==="y"||e.axis==="y2"){r=i.axis_rotated?"end"in e?o(e.end):t.width:t.width}else{r=i.axis_rotated?t.width:"end"in e?t.x(t.isTimeSeries()?t.parseDate(e.end):e.end):t.width}return r<n?0:r-n};n.regionHeight=function(e){var t=this,i=t.config,n=this.regionY(e),r,o=e.axis==="y"?t.y:t.y2;if(e.axis==="y"||e.axis==="y2"){r=i.axis_rotated?t.height:"start"in e?o(e.start):t.height}else{r=i.axis_rotated?"end"in e?t.x(t.isTimeSeries()?t.parseDate(e.end):e.end):t.height:t.height}return r<n?0:r-n};n.isRegionOnX=function(e){return!e.axis||e.axis==="x"};n.drag=function(e){var t=this,i=t.config,n=t.main,r=t.d3;var o,a,s,l,u,d,f,p;if(t.hasArcType()){return}if(!i.data_selection_enabled){return}if(i.zoom_enabled&&!t.zoom.altDomain){return}if(!i.data_selection_multiple){return}o=t.dragStart[0];a=t.dragStart[1];s=e[0];l=e[1];u=Math.min(o,s);d=Math.max(o,s);f=i.data_selection_grouped?t.margin.top:Math.min(a,l);p=i.data_selection_grouped?t.height:Math.max(a,l);n.select("."+c.dragarea).attr("x",u).attr("y",f).attr("width",d-u).attr("height",p-f);n.selectAll("."+c.shapes).selectAll("."+c.shape).filter((function(e){return i.data_selection_isselectable(e)})).each((function(e,i){var n=r.select(this),o=n.classed(c.SELECTED),a=n.classed(c.INCLUDED),s,l,h,g,m,v=false,y;if(n.classed(c.circle)){s=n.attr("cx")*1;l=n.attr("cy")*1;m=t.togglePoint;v=u<s&&s<d&&f<l&&l<p}else if(n.classed(c.bar)){y=A(this);s=y.x;l=y.y;h=y.width;g=y.height;m=t.togglePath;v=!(d<s||s+h<u)&&!(p<l||l+g<f)}else{return}if(v^a){n.classed(c.INCLUDED,!a);n.classed(c.SELECTED,!o);m.call(t,!o,n,e,i)}}))};n.dragstart=function(e){var t=this,i=t.config;if(t.hasArcType()){return}if(!i.data_selection_enabled){return}t.dragStart=e;t.main.select("."+c.chart).append("rect").attr("class",c.dragarea).style("opacity",.1);t.dragging=true};n.dragend=function(){var e=this,t=e.config;if(e.hasArcType()){return}if(!t.data_selection_enabled){return}e.main.select("."+c.dragarea).transition().duration(100).style("opacity",0).remove();e.main.selectAll("."+c.shape).classed(c.INCLUDED,false);e.dragging=false};n.selectPoint=function(e,t,i){var n=this,r=n.config,o=(r.axis_rotated?n.circleY:n.circleX).bind(n),a=(r.axis_rotated?n.circleX:n.circleY).bind(n),s=n.pointSelectR.bind(n);r.data_onselected.call(n.api,t,e.node());n.main.select("."+c.selectedCircles+n.getTargetSelectorSuffix(t.id)).selectAll("."+c.selectedCircle+"-"+i).data([t]).enter().append("circle").attr("class",(function(){return n.generateClass(c.selectedCircle,i)})).attr("cx",o).attr("cy",a).attr("stroke",(function(){return n.color(t)})).attr("r",(function(e){return n.pointSelectR(e)*1.4})).transition().duration(100).attr("r",s)};n.unselectPoint=function(e,t,i){var n=this;n.config.data_onunselected(t,e.node());n.main.select("."+c.selectedCircles+n.getTargetSelectorSuffix(t.id)).selectAll("."+c.selectedCircle+"-"+i).transition().duration(100).attr("r",0).remove()};n.togglePoint=function(e,t,i,n){e?this.selectPoint(t,i,n):this.unselectPoint(t,i,n)};n.selectPath=function(e,t){var i=this;i.config.data_onselected.call(i,t,e.node());e.transition().duration(100).style("fill",(function(){return i.d3.rgb(i.color(t)).brighter(.75)}))};n.unselectPath=function(e,t){var i=this;i.config.data_onunselected.call(i,t,e.node());e.transition().duration(100).style("fill",(function(){return i.color(t)}))};n.togglePath=function(e,t,i,n){e?this.selectPath(t,i,n):this.unselectPath(t,i,n)};n.getToggle=function(e,t){var i=this,n;if(e.nodeName==="circle"){if(i.isStepType(t)){n=function(){}}else{n=i.togglePoint}}else if(e.nodeName==="path"){n=i.togglePath}return n};n.toggleShape=function(e,t,i){var n=this,r=n.d3,o=n.config,a=r.select(e),s=a.classed(c.SELECTED),l=n.getToggle(e,t).bind(n);if(o.data_selection_enabled&&o.data_selection_isselectable(t)){if(!o.data_selection_multiple){n.main.selectAll("."+c.shapes+(o.data_selection_grouped?n.getTargetSelectorSuffix(t.id):"")).selectAll("."+c.shape).each((function(e,t){var i=r.select(this);if(i.classed(c.SELECTED)){l(false,i.classed(c.SELECTED,false),e,t)}}))}a.classed(c.SELECTED,!s);l(!s,a,t,i)}};n.initBrush=function(){var e=this,t=e.d3;e.brush=t.svg.brush().on("brush",(function(){e.redrawForBrush()}));e.brush.update=function(){if(e.context){e.context.select("."+c.brush).call(this)}return this};e.brush.scale=function(t){return e.config.axis_rotated?this.y(t):this.x(t)}};n.initSubchart=function(){var e=this,t=e.config,i=e.context=e.svg.append("g").attr("transform",e.getTranslate("context"));i.style("visibility",t.subchart_show?"visible":"hidden");i.append("g").attr("clip-path",e.clipPathForSubchart).attr("class",c.chart);i.select("."+c.chart).append("g").attr("class",c.chartBars);i.select("."+c.chart).append("g").attr("class",c.chartLines);i.append("g").attr("clip-path",e.clipPath).attr("class",c.brush).call(e.brush);e.axes.subx=i.append("g").attr("class",c.axisX).attr("transform",e.getTranslate("subx")).attr("clip-path",t.axis_rotated?"":e.clipPathForXAxis)};n.updateTargetsForSubchart=function(e){var t=this,i=t.context,n=t.config,r,o,a,s,l=t.classChartBar.bind(t),u=t.classBars.bind(t),d=t.classChartLine.bind(t),f=t.classLines.bind(t),p=t.classAreas.bind(t);if(n.subchart_show){s=i.select("."+c.chartBars).selectAll("."+c.chartBar).data(e).attr("class",l);a=s.enter().append("g").style("opacity",0).attr("class",l);a.append("g").attr("class",u);o=i.select("."+c.chartLines).selectAll("."+c.chartLine).data(e).attr("class",d);r=o.enter().append("g").style("opacity",0).attr("class",d);r.append("g").attr("class",f);r.append("g").attr("class",p);i.selectAll("."+c.brush+" rect").attr(n.axis_rotated?"width":"height",n.axis_rotated?t.width2:t.height2)}};n.updateBarForSubchart=function(e){var t=this;t.contextBar=t.context.selectAll("."+c.bars).selectAll("."+c.bar).data(t.barData.bind(t));t.contextBar.enter().append("path").attr("class",t.classBar.bind(t)).style("stroke","none").style("fill",t.color);t.contextBar.style("opacity",t.initialOpacity.bind(t));t.contextBar.exit().transition().duration(e).style("opacity",0).remove()};n.redrawBarForSubchart=function(e,t,i){(t?this.contextBar.transition().duration(i):this.contextBar).attr("d",e).style("opacity",1)};n.updateLineForSubchart=function(e){var t=this;t.contextLine=t.context.selectAll("."+c.lines).selectAll("."+c.line).data(t.lineData.bind(t));t.contextLine.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color);t.contextLine.style("opacity",t.initialOpacity.bind(t));t.contextLine.exit().transition().duration(e).style("opacity",0).remove()};n.redrawLineForSubchart=function(e,t,i){(t?this.contextLine.transition().duration(i):this.contextLine).attr("d",e).style("opacity",1)};n.updateAreaForSubchart=function(e){var t=this,i=t.d3;t.contextArea=t.context.selectAll("."+c.areas).selectAll("."+c.area).data(t.lineData.bind(t));t.contextArea.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",(function(){t.orgAreaOpacity=+i.select(this).style("opacity");return 0}));t.contextArea.style("opacity",0);t.contextArea.exit().transition().duration(e).style("opacity",0).remove()};n.redrawAreaForSubchart=function(e,t,i){(t?this.contextArea.transition().duration(i):this.contextArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)};n.redrawSubchart=function(e,t,i,n,r,o,a){var s=this,l=s.d3,u=s.config,c,d,f;s.context.style("visibility",u.subchart_show?"visible":"hidden");if(u.subchart_show){if(l.event&&l.event.type==="zoom"){s.brush.extent(s.x.orgDomain()).update()}if(e){if(!s.brush.empty()){s.brush.extent(s.x.orgDomain()).update()}c=s.generateDrawArea(r,true);d=s.generateDrawBar(o,true);f=s.generateDrawLine(a,true);s.updateBarForSubchart(i);s.updateLineForSubchart(i);s.updateAreaForSubchart(i);s.redrawBarForSubchart(d,i,i);s.redrawLineForSubchart(f,i,i);s.redrawAreaForSubchart(c,i,i)}}};n.redrawForBrush=function(){var e=this,t=e.x;e.redraw({withTransition:false,withY:e.config.zoom_rescale,withSubchart:false,withUpdateXDomain:true,withDimension:false});e.config.subchart_onbrush.call(e.api,t.orgDomain())};n.transformContext=function(e,t){var i=this,n;if(t&&t.axisSubX){n=t.axisSubX}else{n=i.context.select("."+c.axisX);if(e){n=n.transition()}}i.context.attr("transform",i.getTranslate("context"));n.attr("transform",i.getTranslate("subx"))};n.getDefaultExtent=function(){var e=this,t=e.config,i=f(t.axis_x_extent)?t.axis_x_extent(e.getXDomain(e.data.targets)):t.axis_x_extent;if(e.isTimeSeries()){i=[e.parseDate(i[0]),e.parseDate(i[1])]}return i};n.initZoom=function(){var e=this,t=e.d3,i=e.config,n;e.zoom=t.behavior.zoom().on("zoomstart",(function(){n=t.event.sourceEvent;e.zoom.altDomain=t.event.sourceEvent.altKey?e.x.orgDomain():null;i.zoom_onzoomstart.call(e.api,t.event.sourceEvent)})).on("zoom",(function(){e.redrawForZoom.call(e)})).on("zoomend",(function(){var r=t.event.sourceEvent;if(r&&n.clientX===r.clientX&&n.clientY===r.clientY){return}e.redrawEventRect();e.updateZoom();i.zoom_onzoomend.call(e.api,e.x.orgDomain())}));e.zoom.scale=function(e){return i.axis_rotated?this.y(e):this.x(e)};e.zoom.orgScaleExtent=function(){var t=i.zoom_extent?i.zoom_extent:[1,10];return[t[0],Math.max(e.getMaxDataCount()/t[1],t[1])]};e.zoom.updateScaleExtent=function(){var t=y(e.x.orgDomain())/y(e.orgXDomain),i=this.orgScaleExtent();this.scaleExtent([i[0]*t,i[1]*t]);return this}};n.updateZoom=function(){var e=this,t=e.config.zoom_enabled?e.zoom:function(){};e.main.select("."+c.zoomRect).call(t).on("dblclick.zoom",null);e.main.selectAll("."+c.eventRect).call(t).on("dblclick.zoom",null)};n.redrawForZoom=function(){var e=this,t=e.d3,i=e.config,n=e.zoom,r=e.x;if(!i.zoom_enabled){return}if(e.filterTargetsToShow(e.data.targets).length===0){return}if(t.event.sourceEvent.type==="mousemove"&&n.altDomain){r.domain(n.altDomain);n.scale(r).updateScaleExtent();return}if(e.isCategorized()&&r.orgDomain()[0]===e.orgXDomain[0]){r.domain([e.orgXDomain[0]-1e-10,r.orgDomain()[1]])}e.redraw({withTransition:false,withY:i.zoom_rescale,withSubchart:false,withEventRect:false,withDimension:false});if(t.event.sourceEvent.type==="mousemove"){e.cancelClick=true}i.zoom_onzoom.call(e.api,r.orgDomain())};n.generateColor=function(){var e=this,t=e.config,i=e.d3,n=t.data_colors,r=_(t.color_pattern)?t.color_pattern:i.scale.category10().range(),o=t.data_color,a=[];return function(e){var t=e.id||e.data&&e.data.id||e,i;if(n[t]instanceof Function){i=n[t](e)}else if(n[t]){i=n[t]}else{if(a.indexOf(t)<0){a.push(t)}i=r[a.indexOf(t)%r.length];n[t]=i}return o instanceof Function?o(i,e):i}};n.generateLevelColor=function(){var e=this,t=e.config,i=t.color_pattern,n=t.color_threshold,r=n.unit==="value",o=n.values&&n.values.length?n.values:[],a=n.max||100;return _(t.color_threshold)?function(e){var t,n,s=i[i.length-1];for(t=0;t<o.length;t++){n=r?e:e*100/a;if(n<o[t]){s=i[t];break}}return s}:null};n.getYFormat=function(e){var t=this,i=e&&!t.hasType("gauge")?t.defaultArcValueFormat:t.yFormat,n=e&&!t.hasType("gauge")?t.defaultArcValueFormat:t.y2Format;return function(e,r,o){var a=t.axis.getId(o)==="y2"?n:i;return a.call(t,e,r)}};n.yFormat=function(e){var t=this,i=t.config,n=i.axis_y_tick_format?i.axis_y_tick_format:t.defaultValueFormat;return n(e)};n.y2Format=function(e){var t=this,i=t.config,n=i.axis_y2_tick_format?i.axis_y2_tick_format:t.defaultValueFormat;return n(e)};n.defaultValueFormat=function(e){return d(e)?+e:""};n.defaultArcValueFormat=function(e,t){return(t*100).toFixed(1)+"%"};n.dataLabelFormat=function(e){var t=this,i=t.config.data_labels,n,r=function(e){return d(e)?+e:""};if(typeof i.format==="function"){n=i.format}else if(typeof i.format==="object"){if(i.format[e]){n=i.format[e]===true?r:i.format[e]}else{n=function(){return""}}}else{n=r}return n};n.hasCaches=function(e){for(var t=0;t<e.length;t++){if(!(e[t]in this.cache)){return false}}return true};n.addCache=function(e,t){this.cache[e]=this.cloneTarget(t)};n.getCaches=function(e){var t=[],i;for(i=0;i<e.length;i++){if(e[i]in this.cache){t.push(this.cloneTarget(this.cache[e[i]]))}}return t};var c=n.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};n.generateClass=function(e,t){return" "+e+" "+e+this.getTargetSelectorSuffix(t)};n.classText=function(e){return this.generateClass(c.text,e.index)};n.classTexts=function(e){return this.generateClass(c.texts,e.id)};n.classShape=function(e){return this.generateClass(c.shape,e.index)};n.classShapes=function(e){return this.generateClass(c.shapes,e.id)};n.classLine=function(e){return this.classShape(e)+this.generateClass(c.line,e.id)};n.classLines=function(e){return this.classShapes(e)+this.generateClass(c.lines,e.id)};n.classCircle=function(e){return this.classShape(e)+this.generateClass(c.circle,e.index)};n.classCircles=function(e){return this.classShapes(e)+this.generateClass(c.circles,e.id)};n.classBar=function(e){return this.classShape(e)+this.generateClass(c.bar,e.index)};n.classBars=function(e){return this.classShapes(e)+this.generateClass(c.bars,e.id)};n.classArc=function(e){return this.classShape(e.data)+this.generateClass(c.arc,e.data.id)};n.classArcs=function(e){return this.classShapes(e.data)+this.generateClass(c.arcs,e.data.id)};n.classArea=function(e){return this.classShape(e)+this.generateClass(c.area,e.id)};n.classAreas=function(e){return this.classShapes(e)+this.generateClass(c.areas,e.id)};n.classRegion=function(e,t){return this.generateClass(c.region,t)+" "+("class"in e?e["class"]:"")};n.classEvent=function(e){return this.generateClass(c.eventRect,e.index)};n.classTarget=function(e){var t=this;var i=t.config.data_classes[e],n="";if(i){n=" "+c.target+"-"+i}return t.generateClass(c.target,e)+n};n.classFocus=function(e){return this.classFocused(e)+this.classDefocused(e)};n.classFocused=function(e){return" "+(this.focusedTargetIds.indexOf(e.id)>=0?c.focused:"")};n.classDefocused=function(e){return" "+(this.defocusedTargetIds.indexOf(e.id)>=0?c.defocused:"")};n.classChartText=function(e){return c.chartText+this.classTarget(e.id)};n.classChartLine=function(e){return c.chartLine+this.classTarget(e.id)};n.classChartBar=function(e){return c.chartBar+this.classTarget(e.id)};n.classChartArc=function(e){return c.chartArc+this.classTarget(e.data.id)};n.getTargetSelectorSuffix=function(e){return e||e===0?("-"+e).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""};n.selectorTarget=function(e,t){return(t||"")+"."+c.target+this.getTargetSelectorSuffix(e)};n.selectorTargets=function(e,t){var i=this;e=e||[];return e.length?e.map((function(e){return i.selectorTarget(e,t)})):null};n.selectorLegend=function(e){return"."+c.legendItem+this.getTargetSelectorSuffix(e)};n.selectorLegends=function(e){var t=this;return e&&e.length?e.map((function(e){return t.selectorLegend(e)})):null};var d=n.isValue=function(e){return e||e===0},f=n.isFunction=function(e){return typeof e==="function"},p=n.isString=function(e){return typeof e==="string"},h=n.isUndefined=function(e){return typeof e==="undefined"},g=n.isDefined=function(e){return typeof e!=="undefined"},m=n.ceil10=function(e){return Math.ceil(e/10)*10},v=n.asHalfPixel=function(e){return Math.ceil(e)+.5},y=n.diffDomain=function(e){return e[1]-e[0]},b=n.isEmpty=function(e){return!e||p(e)&&e.length===0||typeof e==="object"&&Object.keys(e).length===0},_=n.notEmpty=function(e){return Object.keys(e).length>0},w=n.getOption=function(e,t,i){return g(e[t])?e[t]:i},C=n.hasValue=function(e,t){var i=false;Object.keys(e).forEach((function(n){if(e[n]===t){i=true}}));return i},A=n.getPathBox=function(e){var t=e.getBoundingClientRect(),i=[e.pathSegList.getItem(0),e.pathSegList.getItem(1)],n=i[0].x,r=Math.min(i[0].y,i[1].y);return{x:n,y:r,width:t.width,height:t.height}};i.focus=function(e){var t=this.internal,i;e=t.mapToTargetIds(e);i=t.svg.selectAll(t.selectorTargets(e.filter(t.isTargetToShow,t))),this.revert();this.defocus();i.classed(c.focused,true).classed(c.defocused,false);if(t.hasArcType()){t.expandArc(e)}t.toggleFocusLegend(e,true);t.focusedTargetIds=e;t.defocusedTargetIds=t.defocusedTargetIds.filter((function(t){return e.indexOf(t)<0}))};i.defocus=function(e){var t=this.internal,i;e=t.mapToTargetIds(e);i=t.svg.selectAll(t.selectorTargets(e.filter(t.isTargetToShow,t))),i.classed(c.focused,false).classed(c.defocused,true);if(t.hasArcType()){t.unexpandArc(e)}t.toggleFocusLegend(e,false);t.focusedTargetIds=t.focusedTargetIds.filter((function(t){return e.indexOf(t)<0}));t.defocusedTargetIds=e};i.revert=function(e){var t=this.internal,i;e=t.mapToTargetIds(e);i=t.svg.selectAll(t.selectorTargets(e));i.classed(c.focused,false).classed(c.defocused,false);if(t.hasArcType()){t.unexpandArc(e)}if(t.config.legend_show){t.showLegend(e.filter(t.isLegendToShow.bind(t)));t.legend.selectAll(t.selectorLegends(e)).filter((function(){return t.d3.select(this).classed(c.legendItemFocused)})).classed(c.legendItemFocused,false)}t.focusedTargetIds=[];t.defocusedTargetIds=[]};i.show=function(e,t){var i=this.internal,n;e=i.mapToTargetIds(e);t=t||{};i.removeHiddenTargetIds(e);n=i.svg.selectAll(i.selectorTargets(e));n.transition().style("opacity",1,"important").call(i.endall,(function(){n.style("opacity",null).style("opacity",1)}));if(t.withLegend){i.showLegend(e)}i.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true})};i.hide=function(e,t){var i=this.internal,n;e=i.mapToTargetIds(e);t=t||{};i.addHiddenTargetIds(e);n=i.svg.selectAll(i.selectorTargets(e));n.transition().style("opacity",0,"important").call(i.endall,(function(){n.style("opacity",null).style("opacity",0)}));if(t.withLegend){i.hideLegend(e)}i.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true})};i.toggle=function(e,t){var i=this,n=this.internal;n.mapToTargetIds(e).forEach((function(e){n.isTargetToShow(e)?i.hide(e,t):i.show(e,t)}))};i.zoom=function(e){var t=this.internal;if(e){if(t.isTimeSeries()){e=e.map((function(e){return t.parseDate(e)}))}t.brush.extent(e);t.redraw({withUpdateXDomain:true,withY:t.config.zoom_rescale});t.config.zoom_onzoom.call(this,t.x.orgDomain())}return t.brush.extent()};i.zoom.enable=function(e){var t=this.internal;t.config.zoom_enabled=e;t.updateAndRedraw()};i.unzoom=function(){var e=this.internal;e.brush.clear().update();e.redraw({withUpdateXDomain:true})};i.load=function(e){var t=this.internal,i=t.config;if(e.xs){t.addXs(e.xs)}if("classes"in e){Object.keys(e.classes).forEach((function(t){i.data_classes[t]=e.classes[t]}))}if("categories"in e&&t.isCategorized()){i.axis_x_categories=e.categories}if("axes"in e){Object.keys(e.axes).forEach((function(t){i.data_axes[t]=e.axes[t]}))}if("colors"in e){Object.keys(e.colors).forEach((function(t){i.data_colors[t]=e.colors[t]}))}if("cacheIds"in e&&t.hasCaches(e.cacheIds)){t.load(t.getCaches(e.cacheIds),e.done);return}if("unload"in e){t.unload(t.mapToTargetIds(typeof e.unload==="boolean"&&e.unload?null:e.unload),(function(){t.loadFromArgs(e)}))}else{t.loadFromArgs(e)}};i.unload=function(e){var t=this.internal;e=e||{};if(e instanceof Array){e={ids:e}}else if(typeof e==="string"){e={ids:[e]}}t.unload(t.mapToTargetIds(e.ids),(function(){t.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true});if(e.done){e.done()}}))};i.flow=function(e){var t=this.internal,i,n,r=[],o=t.getMaxDataCount(),a,s,l,u,c=0,f=0,p,h;if(e.json){n=t.convertJsonToData(e.json,e.keys)}else if(e.rows){n=t.convertRowsToData(e.rows)}else if(e.columns){n=t.convertColumnsToData(e.columns)}else{return}i=t.convertDataToTargets(n,true);t.data.targets.forEach((function(e){var n=false,o,a;for(o=0;o<i.length;o++){if(e.id===i[o].id){n=true;if(e.values[e.values.length-1]){f=e.values[e.values.length-1].index+1}c=i[o].values.length;for(a=0;a<c;a++){i[o].values[a].index=f+a;if(!t.isTimeSeries()){i[o].values[a].x=f+a}}e.values=e.values.concat(i[o].values);i.splice(o,1);break}}if(!n){r.push(e.id)}}));t.data.targets.forEach((function(e){var i,n;for(i=0;i<r.length;i++){if(e.id===r[i]){f=e.values[e.values.length-1].index+1;for(n=0;n<c;n++){e.values.push({id:e.id,index:f+n,x:t.isTimeSeries()?t.getOtherTargetX(f+n):f+n,value:null})}}}}));if(t.data.targets.length){i.forEach((function(e){var i,n=[];for(i=t.data.targets[0].values[0].index;i<f;i++){n.push({id:e.id,index:i,x:t.isTimeSeries()?t.getOtherTargetX(i):i,value:null})}e.values.forEach((function(e){e.index+=f;if(!t.isTimeSeries()){e.x+=f}}));e.values=n.concat(e.values)}))}t.data.targets=t.data.targets.concat(i);a=t.getMaxDataCount();l=t.data.targets[0];u=l.values[0];if(g(e.to)){c=0;h=t.isTimeSeries()?t.parseDate(e.to):e.to;l.values.forEach((function(e){if(e.x<h){c++}}))}else if(g(e.length)){c=e.length}if(!o){if(t.isTimeSeries()){if(l.values.length>1){p=l.values[l.values.length-1].x-u.x}else{p=u.x-t.getXDomain(t.data.targets)[0]}}else{p=1}s=[u.x-p,u.x];t.updateXDomain(null,true,true,false,s)}else if(o===1){if(t.isTimeSeries()){p=(l.values[l.values.length-1].x-u.x)/2;s=[new Date(+u.x-p),new Date(+u.x+p)];t.updateXDomain(null,true,true,false,s)}}t.updateTargets(t.data.targets);t.redraw({flow:{index:u.index,length:c,duration:d(e.duration)?e.duration:t.config.transition_duration,done:e.done,orgDataCount:o},withLegend:true,withTransition:o>1,withTrimXDomain:false,withUpdateXAxis:true})};n.generateFlow=function(e){var t=this,i=t.config,n=t.d3;return function(){var r=e.targets,o=e.flow,a=e.drawBar,s=e.drawLine,l=e.drawArea,u=e.cx,d=e.cy,f=e.xv,p=e.xForText,h=e.yForText,g=e.duration;var m,v=1,b,_=o.index,w=o.length,C=t.getValueOnIndex(t.data.targets[0].values,_),A=t.getValueOnIndex(t.data.targets[0].values,_+w),E=t.x.domain(),x,T=o.duration||g,S=o.done||function(){},D=t.generateWait();var k=t.xgrid||n.selectAll([]),O=t.xgridLines||n.selectAll([]),R=t.mainRegion||n.selectAll([]),N=t.mainText||n.selectAll([]),P=t.mainBar||n.selectAll([]),I=t.mainLine||n.selectAll([]),M=t.mainArea||n.selectAll([]),L=t.mainCircle||n.selectAll([]);t.flowing=true;t.data.targets.forEach((function(e){e.values.splice(0,w)}));x=t.updateXDomain(r,true,true);if(t.updateXGrid){t.updateXGrid(true)}if(!o.orgDataCount){if(t.data.targets[0].values.length!==1){m=t.x(E[0])-t.x(x[0])}else{if(t.isTimeSeries()){C=t.getValueOnIndex(t.data.targets[0].values,0);A=t.getValueOnIndex(t.data.targets[0].values,t.data.targets[0].values.length-1);m=t.x(C.x)-t.x(A.x)}else{m=y(x)/2}}}else if(o.orgDataCount===1||C.x===A.x){m=t.x(E[0])-t.x(x[0])}else{if(t.isTimeSeries()){m=t.x(E[0])-t.x(x[0])}else{m=t.x(C.x)-t.x(A.x)}}v=y(E)/y(x);b="translate("+m+",0) scale("+v+",1)";t.hideXGridFocus();t.hideTooltip();n.transition().ease("linear").duration(T).each((function(){D.add(t.axes.x.transition().call(t.xAxis));D.add(P.transition().attr("transform",b));D.add(I.transition().attr("transform",b));D.add(M.transition().attr("transform",b));D.add(L.transition().attr("transform",b));D.add(N.transition().attr("transform",b));D.add(R.filter(t.isRegionOnX).transition().attr("transform",b));D.add(k.transition().attr("transform",b));D.add(O.transition().attr("transform",b))})).call(D,(function(){var e,n=[],r=[],o=[];if(w){for(e=0;e<w;e++){n.push("."+c.shape+"-"+(_+e));r.push("."+c.text+"-"+(_+e));o.push("."+c.eventRect+"-"+(_+e))}t.svg.selectAll("."+c.shapes).selectAll(n).remove();t.svg.selectAll("."+c.texts).selectAll(r).remove();t.svg.selectAll("."+c.eventRects).selectAll(o).remove();t.svg.select("."+c.xgrid).remove()}k.attr("transform",null).attr(t.xgridAttr);O.attr("transform",null);O.select("line").attr("x1",i.axis_rotated?0:f).attr("x2",i.axis_rotated?t.width:f);O.select("text").attr("x",i.axis_rotated?t.width:0).attr("y",f);P.attr("transform",null).attr("d",a);I.attr("transform",null).attr("d",s);M.attr("transform",null).attr("d",l);L.attr("transform",null).attr("cx",u).attr("cy",d);N.attr("transform",null).attr("x",p).attr("y",h).style("fill-opacity",t.opacityForText.bind(t));R.attr("transform",null);R.select("rect").filter(t.isRegionOnX).attr("x",t.regionX.bind(t)).attr("width",t.regionWidth.bind(t));if(i.interaction_enabled){t.redrawEventRect()}S();t.flowing=false}))}};i.selected=function(e){var t=this.internal,i=t.d3;return i.merge(t.main.selectAll("."+c.shapes+t.getTargetSelectorSuffix(e)).selectAll("."+c.shape).filter((function(){return i.select(this).classed(c.SELECTED)})).map((function(e){return e.map((function(e){var t=e.__data__;return t.data?t.data:t}))})))};i.select=function(e,t,i){var n=this.internal,r=n.d3,o=n.config;if(!o.data_selection_enabled){return}n.main.selectAll("."+c.shapes).selectAll("."+c.shape).each((function(a,s){var l=r.select(this),u=a.data?a.data.id:a.id,d=n.getToggle(this,a).bind(n),f=o.data_selection_grouped||!e||e.indexOf(u)>=0,p=!t||t.indexOf(s)>=0,h=l.classed(c.SELECTED);if(l.classed(c.line)||l.classed(c.area)){return}if(f&&p){if(o.data_selection_isselectable(a)&&!h){d(true,l.classed(c.SELECTED,true),a,s)}}else if(g(i)&&i){if(h){d(false,l.classed(c.SELECTED,false),a,s)}}}))};i.unselect=function(e,t){var i=this.internal,n=i.d3,r=i.config;if(!r.data_selection_enabled){return}i.main.selectAll("."+c.shapes).selectAll("."+c.shape).each((function(o,a){var s=n.select(this),l=o.data?o.data.id:o.id,u=i.getToggle(this,o).bind(i),d=r.data_selection_grouped||!e||e.indexOf(l)>=0,f=!t||t.indexOf(a)>=0,p=s.classed(c.SELECTED);if(s.classed(c.line)||s.classed(c.area)){return}if(d&&f){if(r.data_selection_isselectable(o)){if(p){u(false,s.classed(c.SELECTED,false),o,a)}}}}))};i.transform=function(e,t){var i=this.internal,n=["pie","donut"].indexOf(e)>=0?{withTransform:true}:null;i.transformTo(t,e,n)};n.transformTo=function(e,t,i){var n=this,r=!n.hasArcType(),o=i||{withTransitionForAxis:r};o.withTransitionForTransform=false;n.transiting=false;n.setTargetType(e,t);n.updateTargets(n.data.targets);n.updateAndRedraw(o)};i.groups=function(e){var t=this.internal,i=t.config;if(h(e)){return i.data_groups}i.data_groups=e;t.redraw();return i.data_groups};i.xgrids=function(e){var t=this.internal,i=t.config;if(!e){return i.grid_x_lines}i.grid_x_lines=e;t.redrawWithoutRescale();return i.grid_x_lines};i.xgrids.add=function(e){var t=this.internal;return this.xgrids(t.config.grid_x_lines.concat(e?e:[]))};i.xgrids.remove=function(e){var t=this.internal;t.removeGridLines(e,true)};i.ygrids=function(e){var t=this.internal,i=t.config;if(!e){return i.grid_y_lines}i.grid_y_lines=e;t.redrawWithoutRescale();return i.grid_y_lines};i.ygrids.add=function(e){var t=this.internal;return this.ygrids(t.config.grid_y_lines.concat(e?e:[]))};i.ygrids.remove=function(e){var t=this.internal;t.removeGridLines(e,false)};i.regions=function(e){var t=this.internal,i=t.config;if(!e){return i.regions}i.regions=e;t.redrawWithoutRescale();return i.regions};i.regions.add=function(e){var t=this.internal,i=t.config;if(!e){return i.regions}i.regions=i.regions.concat(e);t.redrawWithoutRescale();return i.regions};i.regions.remove=function(e){var t=this.internal,i=t.config,n,r,o;e=e||{};n=t.getOption(e,"duration",i.transition_duration);r=t.getOption(e,"classes",[c.region]);o=t.main.select("."+c.regions).selectAll(r.map((function(e){return"."+e})));(n?o.transition().duration(n):o).style("opacity",0).remove();i.regions=i.regions.filter((function(e){var t=false;if(!e["class"]){return true}e["class"].split(" ").forEach((function(e){if(r.indexOf(e)>=0){t=true}}));return!t}));return i.regions};i.data=function(e){var t=this.internal.data.targets;return typeof e==="undefined"?t:t.filter((function(t){return[].concat(e).indexOf(t.id)>=0}))};i.data.shown=function(e){return this.internal.filterTargetsToShow(this.data(e))};i.data.values=function(e){var t,i=null;if(e){t=this.data(e);i=t[0]?t[0].values.map((function(e){return e.value})):null}return i};i.data.names=function(e){this.internal.clearLegendItemTextBoxCache();return this.internal.updateDataAttributes("names",e)};i.data.colors=function(e){return this.internal.updateDataAttributes("colors",e)};i.data.axes=function(e){return this.internal.updateDataAttributes("axes",e)};i.category=function(e,t){var i=this.internal,n=i.config;if(arguments.length>1){n.axis_x_categories[e]=t;i.redraw()}return n.axis_x_categories[e]};i.categories=function(e){var t=this.internal,i=t.config;if(!arguments.length){return i.axis_x_categories}i.axis_x_categories=e;t.redraw();return i.axis_x_categories};i.color=function(e){var t=this.internal;return t.color(e)};i.x=function(e){var t=this.internal;if(arguments.length){t.updateTargetX(t.data.targets,e);t.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true})}return t.data.xs};i.xs=function(e){var t=this.internal;if(arguments.length){t.updateTargetXs(t.data.targets,e);t.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true})}return t.data.xs};i.axis=function(){};i.axis.labels=function(e){var t=this.internal;if(arguments.length){Object.keys(e).forEach((function(i){t.axis.setLabelText(i,e[i])}));t.axis.updateLabels()}};i.axis.max=function(e){var t=this.internal,i=t.config;if(arguments.length){if(typeof e==="object"){if(d(e.x)){i.axis_x_max=e.x}if(d(e.y)){i.axis_y_max=e.y}if(d(e.y2)){i.axis_y2_max=e.y2}}else{i.axis_y_max=i.axis_y2_max=e}t.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true})}else{return{x:i.axis_x_max,y:i.axis_y_max,y2:i.axis_y2_max}}};i.axis.min=function(e){var t=this.internal,i=t.config;if(arguments.length){if(typeof e==="object"){if(d(e.x)){i.axis_x_min=e.x}if(d(e.y)){i.axis_y_min=e.y}if(d(e.y2)){i.axis_y2_min=e.y2}}else{i.axis_y_min=i.axis_y2_min=e}t.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true})}else{return{x:i.axis_x_min,y:i.axis_y_min,y2:i.axis_y2_min}}};i.axis.range=function(e){if(arguments.length){if(g(e.max)){this.axis.max(e.max)}if(g(e.min)){this.axis.min(e.min)}}else{return{max:this.axis.max(),min:this.axis.min()}}};i.legend=function(){};i.legend.show=function(e){var t=this.internal;t.showLegend(t.mapToTargetIds(e));t.updateAndRedraw({withLegend:true})};i.legend.hide=function(e){var t=this.internal;t.hideLegend(t.mapToTargetIds(e));t.updateAndRedraw({withLegend:true})};i.resize=function(e){var t=this.internal,i=t.config;i.size_width=e?e.width:null;i.size_height=e?e.height:null;this.flush()};i.flush=function(){var e=this.internal;e.updateAndRedraw({withLegend:true,withTransition:false,withTransitionForTransform:false})};i.destroy=function(){var t=this.internal;e.clearInterval(t.intervalForObserveInserted);e.onresize=null;t.selectChart.classed("c3",false).html("");Object.keys(t).forEach((function(e){t[e]=null}));return null};i.tooltip=function(){};i.tooltip.show=function(e){var t=this.internal,i,n;if(e.mouse){n=e.mouse}if(e.data){if(t.isMultipleX()){n=[t.x(e.data.x),t.getYScale(e.data.id)(e.data.value)];i=null}else{i=d(e.data.index)?e.data.index:t.getIndexByX(e.data.x)}}else if(typeof e.x!=="undefined"){i=t.getIndexByX(e.x)}else if(typeof e.index!=="undefined"){i=e.index}t.dispatchEvent("mouseover",i,n);t.dispatchEvent("mousemove",i,n)};i.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0)};var E;function x(e,t){var i=e.scale.linear(),n="bottom",r=6,o,a=3,s=null,l,u;var c=0,d=true,f;t=t||{};o=t.withOuterTick?6:0;function p(e,t){e.attr("transform",(function(e){return"translate("+Math.ceil(t(e)+c)+", 0)"}))}function h(e,t){e.attr("transform",(function(e){return"translate(0,"+Math.ceil(t(e))+")"}))}function g(e){var t=e[0],i=e[e.length-1];return t<i?[t,i]:[i,t]}function m(e){var t,i,n=[];if(e.ticks){return e.ticks.apply(e,u)}i=e.domain();for(t=Math.ceil(i[0]);t<i[1];t++){n.push(t)}if(n.length>0&&n[0]>0){n.unshift(n[0]-(n[1]-n[0]))}return n}function v(){var e=i.copy(),n;if(t.isCategory){n=i.domain();e.domain([n[0],n[1]-1])}return e}function y(e){var t=l?l(e):e;return typeof t!=="undefined"?t:""}function b(e){if(E){return E}var t={h:11.5,w:5.5};e.select("text").text(y).each((function(e){var i=this.getBoundingClientRect(),n=y(e),r=i.height,o=n?i.width/n.length:undefined;if(r&&o){t.h=r;t.w=o}})).text("");E=t;return t}function _(i){return t.withoutTransition?i:e.transition(i)}function w(l){l.each((function(){var l=w.g=e.select(this);var u=this.__chart__||i,d=this.__chart__=v();var C=s?s:m(d),A=l.selectAll(".tick").data(C,d),E=A.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),x=A.exit().remove(),T=_(A).style("opacity",1),S,D,k;var O=i.rangeExtent?i.rangeExtent():g(i.range()),R=l.selectAll(".domain").data([0]),N=(R.enter().append("path").attr("class","domain"),_(R));E.append("line");E.append("text");var P=E.select("line"),I=T.select("line"),M=E.select("text"),L=T.select("text");if(t.isCategory){c=Math.ceil((d(1)-d(0))/2);D=f?0:c;k=f?c:0}else{c=D=0}var F,G,$=b(l.select(".tick")),W=[];var H=Math.max(r,0)+a,j=n==="left"||n==="right";function B(e,i){var n=y(e),r,o,a,s=[];if(Object.prototype.toString.call(n)==="[object Array]"){return n}if(!i||i<=0){i=j?95:t.isCategory?Math.ceil(d(C[1])-d(C[0]))-12:110}function l(e,t){o=undefined;for(var n=1;n<t.length;n++){if(t.charAt(n)===" "){o=n}r=t.substr(0,n+1);a=$.w*r.length;if(i<a){return l(e.concat(t.substr(0,o?o:n)),t.slice(o?o+1:n))}}return e.concat(t)}return l(s,n+"")}function V(e,t){var i=$.h;if(t===0){if(n==="left"||n==="right"){i=-((W[e.index]-1)*($.h/2)-3)}else{i=".71em"}}return i}function z(e){var t=i(e)+(f?0:c);return O[0]<t&&t<O[1]?r:0}F=A.select("text");G=F.selectAll("tspan").data((function(e,i){var n=t.tickMultiline?B(e,t.tickWidth):[].concat(y(e));W[i]=n.length;return n.map((function(e){return{index:i,splitted:e}}))}));G.enter().append("tspan");G.exit().remove();G.text((function(e){return e.splitted}));var U=t.tickTextRotate;function Y(e){if(!e){return"middle"}return e>0?"start":"end"}function q(e){if(!e){return""}return"rotate("+e+")"}function X(e){if(!e){return 0}return 8*Math.sin(Math.PI*(e/180))}function K(e){if(!e){return H}return 11.5-2.5*(e/15)*(e>0?1:-1)}switch(n){case"bottom":{S=p;P.attr("y2",r);M.attr("y",H);I.attr("x1",D).attr("x2",D).attr("y2",z);L.attr("x",0).attr("y",K(U)).style("text-anchor",Y(U)).attr("transform",q(U));G.attr("x",0).attr("dy",V).attr("dx",X(U));N.attr("d","M"+O[0]+","+o+"V0H"+O[1]+"V"+o);break}case"top":{S=p;P.attr("y2",-r);M.attr("y",-H);I.attr("x2",0).attr("y2",-r);L.attr("x",0).attr("y",-H);F.style("text-anchor","middle");G.attr("x",0).attr("dy","0em");N.attr("d","M"+O[0]+","+-o+"V0H"+O[1]+"V"+-o);break}case"left":{S=h;P.attr("x2",-r);M.attr("x",-H);I.attr("x2",-r).attr("y1",k).attr("y2",k);L.attr("x",-H).attr("y",c);F.style("text-anchor","end");G.attr("x",-H).attr("dy",V);N.attr("d","M"+-o+","+O[0]+"H0V"+O[1]+"H"+-o);break}case"right":{S=h;P.attr("x2",r);M.attr("x",H);I.attr("x2",r).attr("y2",0);L.attr("x",H).attr("y",0);F.style("text-anchor","start");G.attr("x",H).attr("dy",V);N.attr("d","M"+o+","+O[0]+"H0V"+O[1]+"H"+o);break}}if(d.rangeBand){var Q=d,Z=Q.rangeBand()/2;u=d=function(e){return Q(e)+Z}}else if(u.rangeBand){u=d}else{x.call(S,d)}E.call(S,u);T.call(S,d)}))}w.scale=function(e){if(!arguments.length){return i}i=e;return w};w.orient=function(e){if(!arguments.length){return n}n=e in{top:1,right:1,bottom:1,left:1}?e+"":"bottom";return w};w.tickFormat=function(e){if(!arguments.length){return l}l=e;return w};w.tickCentered=function(e){if(!arguments.length){return f}f=e;return w};w.tickOffset=function(){return c};w.tickInterval=function(){var e,i;if(t.isCategory){e=c*2}else{i=w.g.select("path.domain").node().getTotalLength()-o*2;e=i/w.g.selectAll("line").size()}return e===Infinity?0:e};w.ticks=function(){if(!arguments.length){return u}u=arguments;return w};w.tickCulling=function(e){if(!arguments.length){return d}d=e;return w};w.tickValues=function(e){if(typeof e==="function"){s=function(){return e(i.domain())}}else{if(!arguments.length){return s}s=e}return w};return w}n.isSafari=function(){var t=e.navigator.userAgent;return t.indexOf("Safari")>=0&&t.indexOf("Chrome")<0};n.isChrome=function(){var t=e.navigator.userAgent;return t.indexOf("Chrome")>=0};if(!Function.prototype.bind){Function.prototype.bind=function(e){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var t=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){return i.apply(this instanceof n?this:e,t.concat(Array.prototype.slice.call(arguments)))};n.prototype=this.prototype;r.prototype=new n;return r}}if(typeof define==="function"&&define.amd){define("c3",["d3"],t)}else if("undefined"!==typeof exports&&"undefined"!==typeof module){module.exports=t}else{e.c3=t}})(window);(function(e){e(["jquery","lodash"],(function(e,t){return function(){var i;var n;var r=0;var o={alert:"alert",info:"info",success:"success",warning:"warning"};var a={clear:p,remove:h,alert:s,getContainer:f,info:l,options:{},subscribe:d,success:u,version:"2.0.3",warning:c};return a;function s(e,t,i){return w({type:o.alert,title:e,message:t,options:i})}function l(e,t,i){return w({type:o.info,title:e,message:t,options:i})}function u(e,t,i){return w({type:o.success,title:e,message:t,options:i})}function c(e,t,i){return w({type:o.warning,title:e,message:t,options:i})}function d(e){n=e}function f(t,n){if(!t){t=C()}i=e("#"+t.containerId);if(i.length){return i}if(n){i=v(t)}return i}function p(e){var t=C();if(!i){f(t)}if(!m(e,t)){g(t)}}function h(t){var n=C();if(!i){f(n)}if(t&&e(":focus",t).length===0){A(t);return}if(i.children().length){i.remove()}}function g(t){var n=i.children();for(var r=n.length-1;r>=0;r--){m(e(n[r]),t)}}function m(t,i){if(t&&e(":focus",t).length===0){t[i.hideMethod]({duration:i.hideDuration,easing:i.hideEasing,complete:function(){A(t)}});return true}return false}function v(t){i=e("<div/>").attr("id",t.containerId).addClass(t.positionClass).attr("aria-live","polite").attr("role","alert");i.appendTo(e(t.target));return i}function y(){return{tapToDismiss:false,toastClass:"notification",containerId:"notifications-container",debug:false,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:undefined,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:undefined,extendedTimeOut:1e3,onCloseClick:undefined,positionClass:"notification-below-header",timeOut:5e3,titleClass:"headline",messageClass:"notification-content",closeIcon:"icon icon-times-circle",target:"body",newestOnTop:true}}function b(e){if(!n){return}n(e)}function _(){return this._template||(this._template='<div class="{{= toastClass }} {{= toastClass }}-{{= type }}">'+'<div class="notification-header">'+'<p class="{{= titleClass }}">'+'<i class="icon icon-state-{{= type }}"></i>&nbsp;'+'<span class="text">{{= title }}</span>'+'<i class="js-close close-icon {{= closeIcon }}"></i>'+"</p>"+"</div>"+'<div class="{{= messageClass }}" style="display: none;">{{= message }}</div>'+"</div>")}function w(n){var o=C(),a=e.extend(o,n);if(typeof n.options!=="undefined"){a=e.extend(a,n.options)}r++;i=f(a,true);var s=t.template(_())(a),l=e(s);var u=null,c=l,d=c.find(".js-close"),p={toastId:r,state:"visible",startTime:new Date,options:a};if(a.message){c.find("."+a.messageClass).show()}c.hide();if(a.newestOnTop){i.prepend(c)}else{i.append(c)}c[a.showMethod]({duration:a.showDuration,easing:a.showEasing,complete:a.onShown});if(a.timeOut>0){u=setTimeout(h,a.timeOut)}c.hover(m,g);if(!a.onclick&&a.tapToDismiss){c.click(h)}if(d){d.click((function(e){if(e.stopPropagation){e.stopPropagation()}else if(e.cancelBubble!==undefined&&e.cancelBubble!==true){e.cancelBubble=true}if(a.onCloseClick){a.onCloseClick(e)}h(true)}))}if(a.onclick){c.click((function(){a.onclick();h()}))}b(p);if(a.debug&&console){console.log(p)}return c;function h(t){if(e(":focus",c).length&&!t){return}return c[a.hideMethod]({duration:a.hideDuration,easing:a.hideEasing,complete:function(){A(c);if(a.onHidden&&p.state!=="hidden"){a.onHidden()}p.state="hidden";p.endTime=new Date;b(p)}})}function g(){if(a.timeOut>0||a.extendedTimeOut>0){u=setTimeout(h,a.extendedTimeOut)}}function m(){clearTimeout(u);c.stop(true,true)[a.showMethod]({duration:a.showDuration,easing:a.showEasing})}}function C(){return e.extend({},y(),a.options)}function A(e){if(!i){i=f()}if(e.is(":visible")){return}e.remove();e=null;if(i.children().length===0){i.remove()}}}()}))})(typeof define==="function"&&define.amd?define:function(e,t){if(typeof module!=="undefined"&&module.exports){module.exports=t(require("jquery","lodash"))}else{window["toastr"]=t(window["jQuery"],window["_"])}});(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):e.moment=t()})(this,(function(){"use strict";var e;function t(){return e.apply(null,arguments)}function i(t){e=t}function n(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function r(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e){if(Object.getOwnPropertyNames){return Object.getOwnPropertyNames(e).length===0}else{var t;for(t in e){if(o(e,t)){return false}}return true}}function s(e){return e===void 0}function l(e){return typeof e==="number"||Object.prototype.toString.call(e)==="[object Number]"}function u(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function c(e,t){var i=[],n,r=e.length;for(n=0;n<r;++n){i.push(t(e[n],n))}return i}function d(e,t){for(var i in t){if(o(t,i)){e[i]=t[i]}}if(o(t,"toString")){e.toString=t.toString}if(o(t,"valueOf")){e.valueOf=t.valueOf}return e}function f(e,t,i,n){return Ui(e,t,i,n,true).utc()}function p(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidEra:null,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],era:null,meridiem:null,rfc2822:false,weekdayMismatch:false}}function h(e){if(e._pf==null){e._pf=p()}return e._pf}var g;if(Array.prototype.some){g=Array.prototype.some}else{g=function(e){var t=Object(this),i=t.length>>>0,n;for(n=0;n<i;n++){if(n in t&&e.call(this,t[n],n,t)){return true}}return false}}function m(e){var t=null,i=false,n=e._d&&!isNaN(e._d.getTime());if(n){t=h(e);i=g.call(t.parsedDateParts,(function(e){return e!=null}));n=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);if(e._strict){n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined}}if(Object.isFrozen==null||!Object.isFrozen(e)){e._isValid=n}else{return n}return e._isValid}function v(e){var t=f(NaN);if(e!=null){d(h(t),e)}else{h(t).userInvalidated=true}return t}var y=t.momentProperties=[],b=false;function _(e,t){var i,n,r,o=y.length;if(!s(t._isAMomentObject)){e._isAMomentObject=t._isAMomentObject}if(!s(t._i)){e._i=t._i}if(!s(t._f)){e._f=t._f}if(!s(t._l)){e._l=t._l}if(!s(t._strict)){e._strict=t._strict}if(!s(t._tzm)){e._tzm=t._tzm}if(!s(t._isUTC)){e._isUTC=t._isUTC}if(!s(t._offset)){e._offset=t._offset}if(!s(t._pf)){e._pf=h(t)}if(!s(t._locale)){e._locale=t._locale}if(o>0){for(i=0;i<o;i++){n=y[i];r=t[n];if(!s(r)){e[n]=r}}}return e}function w(e){_(this,e);this._d=new Date(e._d!=null?e._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN)}if(b===false){b=true;t.updateOffset(this);b=false}}function C(e){return e instanceof w||e!=null&&e._isAMomentObject!=null}function A(e){if(t.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+e)}}function E(e,i){var n=true;return d((function(){if(t.deprecationHandler!=null){t.deprecationHandler(null,e)}if(n){var r=[],a,s,l,u=arguments.length;for(s=0;s<u;s++){a="";if(typeof arguments[s]==="object"){a+="\n["+s+"] ";for(l in arguments[0]){if(o(arguments[0],l)){a+=l+": "+arguments[0][l]+", "}}a=a.slice(0,-2)}else{a=arguments[s]}r.push(a)}A(e+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack);n=false}return i.apply(this,arguments)}),i)}var x={};function T(e,i){if(t.deprecationHandler!=null){t.deprecationHandler(e,i)}if(!x[e]){A(i);x[e]=true}}t.suppressDeprecationWarnings=false;t.deprecationHandler=null;function S(e){return typeof Function!=="undefined"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function D(e){var t,i;for(i in e){if(o(e,i)){t=e[i];if(S(t)){this[i]=t}else{this["_"+i]=t}}}this._config=e;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function k(e,t){var i=d({},e),n;for(n in t){if(o(t,n)){if(r(e[n])&&r(t[n])){i[n]={};d(i[n],e[n]);d(i[n],t[n])}else if(t[n]!=null){i[n]=t[n]}else{delete i[n]}}}for(n in e){if(o(e,n)&&!o(t,n)&&r(e[n])){i[n]=d({},i[n])}}return i}function O(e){if(e!=null){this.set(e)}}var R;if(Object.keys){R=Object.keys}else{R=function(e){var t,i=[];for(t in e){if(o(e,t)){i.push(t)}}return i}}var N={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function P(e,t,i){var n=this._calendar[e]||this._calendar["sameElse"];return S(n)?n.call(t,i):n}function I(e,t,i){var n=""+Math.abs(e),r=t-n.length,o=e>=0;return(o?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}var M=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,L=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},G={};function $(e,t,i,n){var r=n;if(typeof n==="string"){r=function(){return this[n]()}}if(e){G[e]=r}if(t){G[t[0]]=function(){return I(r.apply(this,arguments),t[1],t[2])}}if(i){G[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)}}}function W(e){if(e.match(/\[[\s\S]/)){return e.replace(/^\[|\]$/g,"")}return e.replace(/\\/g,"")}function H(e){var t=e.match(M),i,n;for(i=0,n=t.length;i<n;i++){if(G[t[i]]){t[i]=G[t[i]]}else{t[i]=W(t[i])}}return function(i){var r="",o;for(o=0;o<n;o++){r+=S(t[o])?t[o].call(i,e):t[o]}return r}}function j(e,t){if(!e.isValid()){return e.localeData().invalidDate()}t=B(t,e.localeData());F[t]=F[t]||H(t);return F[t](e)}function B(e,t){var i=5;function n(e){return t.longDateFormat(e)||e}L.lastIndex=0;while(i>=0&&L.test(e)){e=e.replace(L,n);L.lastIndex=0;i-=1}return e}var V={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function z(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];if(t||!i){return t}this._longDateFormat[e]=i.match(M).map((function(e){if(e==="MMMM"||e==="MM"||e==="DD"||e==="dddd"){return e.slice(1)}return e})).join("");return this._longDateFormat[e]}var U="Invalid date";function Y(){return this._invalidDate}var q="%d",X=/\d{1,2}/;function K(e){return this._ordinal.replace("%d",e)}var Q={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Z(e,t,i,n){var r=this._relativeTime[i];return S(r)?r(e,t,i,n):r.replace(/%d/i,e)}function J(e,t){var i=this._relativeTime[e>0?"future":"past"];return S(i)?i(t):i.replace(/%s/i,t)}var ee={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function te(e){return typeof e==="string"?ee[e]||ee[e.toLowerCase()]:undefined}function ie(e){var t={},i,n;for(n in e){if(o(e,n)){i=te(n);if(i){t[i]=e[n]}}}return t}var ne={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function re(e){var t=[],i;for(i in e){if(o(e,i)){t.push({unit:i,priority:ne[i]})}}t.sort((function(e,t){return e.priority-t.priority}));return t}var oe=/\d/,ae=/\d\d/,se=/\d{3}/,le=/\d{4}/,ue=/[+-]?\d{6}/,ce=/\d\d?/,de=/\d\d\d\d?/,fe=/\d\d\d\d\d\d?/,pe=/\d{1,3}/,he=/\d{1,4}/,ge=/[+-]?\d{1,6}/,me=/\d+/,ve=/[+-]?\d+/,ye=/Z|[+-]\d\d:?\d\d/gi,be=/Z|[+-]\d\d(?::?\d\d)?/gi,_e=/[+-]?\d+(\.\d{1,3})?/,we=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ce=/^[1-9]\d?/,Ae=/^([1-9]\d|\d)/,Ee;Ee={};function xe(e,t,i){Ee[e]=S(t)?t:function(e,n){return e&&i?i:t}}function Te(e,t){if(!o(Ee,e)){return new RegExp(Se(e))}return Ee[e](t._strict,t._locale)}function Se(e){return De(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,i,n,r){return t||i||n||r})))}function De(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ke(e){if(e<0){return Math.ceil(e)||0}else{return Math.floor(e)}}function Oe(e){var t=+e,i=0;if(t!==0&&isFinite(t)){i=ke(t)}return i}var Re={};function Ne(e,t){var i,n=t,r;if(typeof e==="string"){e=[e]}if(l(t)){n=function(e,i){i[t]=Oe(e)}}r=e.length;for(i=0;i<r;i++){Re[e[i]]=n}}function Pe(e,t){Ne(e,(function(e,i,n,r){n._w=n._w||{};t(e,n._w,n,r)}))}function Ie(e,t,i){if(t!=null&&o(Re,e)){Re[e](t,i._a,i,e)}}function Me(e){return e%4===0&&e%100!==0||e%400===0}var Le=0,Fe=1,Ge=2,$e=3,We=4,He=5,je=6,Be=7,Ve=8;$("Y",0,0,(function(){var e=this.year();return e<=9999?I(e,4):"+"+e}));$(0,["YY",2],0,(function(){return this.year()%100}));$(0,["YYYY",4],0,"year");$(0,["YYYYY",5],0,"year");$(0,["YYYYYY",6,true],0,"year");xe("Y",ve);xe("YY",ce,ae);xe("YYYY",he,le);xe("YYYYY",ge,ue);xe("YYYYYY",ge,ue);Ne(["YYYYY","YYYYYY"],Le);Ne("YYYY",(function(e,i){i[Le]=e.length===2?t.parseTwoDigitYear(e):Oe(e)}));Ne("YY",(function(e,i){i[Le]=t.parseTwoDigitYear(e)}));Ne("Y",(function(e,t){t[Le]=parseInt(e,10)}));function ze(e){return Me(e)?366:365}t.parseTwoDigitYear=function(e){return Oe(e)+(Oe(e)>68?1900:2e3)};var Ue=qe("FullYear",true);function Ye(){return Me(this.year())}function qe(e,i){return function(n){if(n!=null){Ke(this,e,n);t.updateOffset(this,i);return this}else{return Xe(this,e)}}}function Xe(e,t){if(!e.isValid()){return NaN}var i=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?i.getUTCMilliseconds():i.getMilliseconds();case"Seconds":return n?i.getUTCSeconds():i.getSeconds();case"Minutes":return n?i.getUTCMinutes():i.getMinutes();case"Hours":return n?i.getUTCHours():i.getHours();case"Date":return n?i.getUTCDate():i.getDate();case"Day":return n?i.getUTCDay():i.getDay();case"Month":return n?i.getUTCMonth():i.getMonth();case"FullYear":return n?i.getUTCFullYear():i.getFullYear();default:return NaN}}function Ke(e,t,i){var n,r,o,a,s;if(!e.isValid()||isNaN(i)){return}n=e._d;r=e._isUTC;switch(t){case"Milliseconds":return void(r?n.setUTCMilliseconds(i):n.setMilliseconds(i));case"Seconds":return void(r?n.setUTCSeconds(i):n.setSeconds(i));case"Minutes":return void(r?n.setUTCMinutes(i):n.setMinutes(i));case"Hours":return void(r?n.setUTCHours(i):n.setHours(i));case"Date":return void(r?n.setUTCDate(i):n.setDate(i));case"FullYear":break;default:return}o=i;a=e.month();s=e.date();s=s===29&&a===1&&!Me(o)?28:s;void(r?n.setUTCFullYear(o,a,s):n.setFullYear(o,a,s))}function Qe(e){e=te(e);if(S(this[e])){return this[e]()}return this}function Ze(e,t){if(typeof e==="object"){e=ie(e);var i=re(e),n,r=i.length;for(n=0;n<r;n++){this[i[n].unit](e[i[n].unit])}}else{e=te(e);if(S(this[e])){return this[e](t)}}return this}function Je(e,t){return(e%t+t)%t}var et;if(Array.prototype.indexOf){et=Array.prototype.indexOf}else{et=function(e){var t;for(t=0;t<this.length;++t){if(this[t]===e){return t}}return-1}}function tt(e,t){if(isNaN(e)||isNaN(t)){return NaN}var i=Je(t,12);e+=(t-i)/12;return i===1?Me(e)?29:28:31-i%7%2}$("M",["MM",2],"Mo",(function(){return this.month()+1}));$("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)}));$("MMMM",0,0,(function(e){return this.localeData().months(this,e)}));xe("M",ce,Ce);xe("MM",ce,ae);xe("MMM",(function(e,t){return t.monthsShortRegex(e)}));xe("MMMM",(function(e,t){return t.monthsRegex(e)}));Ne(["M","MM"],(function(e,t){t[Fe]=Oe(e)-1}));Ne(["MMM","MMMM"],(function(e,t,i,n){var r=i._locale.monthsParse(e,n,i._strict);if(r!=null){t[Fe]=r}else{h(i).invalidMonth=e}}));var it="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),nt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),rt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ot=we,at=we;function st(e,t){if(!e){return n(this._months)?this._months:this._months["standalone"]}return n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||rt).test(t)?"format":"standalone"][e.month()]}function lt(e,t){if(!e){return n(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}return n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[rt.test(t)?"format":"standalone"][e.month()]}function ut(e,t,i){var n,r,o,a=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(n=0;n<12;++n){o=f([2e3,n]);this._shortMonthsParse[n]=this.monthsShort(o,"").toLocaleLowerCase();this._longMonthsParse[n]=this.months(o,"").toLocaleLowerCase()}}if(i){if(t==="MMM"){r=et.call(this._shortMonthsParse,a);return r!==-1?r:null}else{r=et.call(this._longMonthsParse,a);return r!==-1?r:null}}else{if(t==="MMM"){r=et.call(this._shortMonthsParse,a);if(r!==-1){return r}r=et.call(this._longMonthsParse,a);return r!==-1?r:null}else{r=et.call(this._longMonthsParse,a);if(r!==-1){return r}r=et.call(this._shortMonthsParse,a);return r!==-1?r:null}}}function ct(e,t,i){var n,r,o;if(this._monthsParseExact){return ut.call(this,e,t,i)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(n=0;n<12;n++){r=f([2e3,n]);if(i&&!this._longMonthsParse[n]){this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i");this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")}if(!i&&!this._monthsParse[n]){o="^"+this.months(r,"")+"|^"+this.monthsShort(r,"");this._monthsParse[n]=new RegExp(o.replace(".",""),"i")}if(i&&t==="MMMM"&&this._longMonthsParse[n].test(e)){return n}else if(i&&t==="MMM"&&this._shortMonthsParse[n].test(e)){return n}else if(!i&&this._monthsParse[n].test(e)){return n}}}function dt(e,t){if(!e.isValid()){return e}if(typeof t==="string"){if(/^\d+$/.test(t)){t=Oe(t)}else{t=e.localeData().monthsParse(t);if(!l(t)){return e}}}var i=t,n=e.date();n=n<29?n:Math.min(n,tt(e.year(),i));void(e._isUTC?e._d.setUTCMonth(i,n):e._d.setMonth(i,n));return e}function ft(e){if(e!=null){dt(this,e);t.updateOffset(this,true);return this}else{return Xe(this,"Month")}}function pt(){return tt(this.year(),this.month())}function ht(e){if(this._monthsParseExact){if(!o(this,"_monthsRegex")){mt.call(this)}if(e){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!o(this,"_monthsShortRegex")){this._monthsShortRegex=ot}return this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}}function gt(e){if(this._monthsParseExact){if(!o(this,"_monthsRegex")){mt.call(this)}if(e){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!o(this,"_monthsRegex")){this._monthsRegex=at}return this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}}function mt(){function e(e,t){return t.length-e.length}var t=[],i=[],n=[],r,o,a,s;for(r=0;r<12;r++){o=f([2e3,r]);a=De(this.monthsShort(o,""));s=De(this.months(o,""));t.push(a);i.push(s);n.push(s);n.push(a)}t.sort(e);i.sort(e);n.sort(e);this._monthsRegex=new RegExp("^("+n.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function vt(e,t,i,n,r,o,a){var s;if(e<100&&e>=0){s=new Date(e+400,t,i,n,r,o,a);if(isFinite(s.getFullYear())){s.setFullYear(e)}}else{s=new Date(e,t,i,n,r,o,a)}return s}function yt(e){var t,i;if(e<100&&e>=0){i=Array.prototype.slice.call(arguments);i[0]=e+400;t=new Date(Date.UTC.apply(null,i));if(isFinite(t.getUTCFullYear())){t.setUTCFullYear(e)}}else{t=new Date(Date.UTC.apply(null,arguments))}return t}function bt(e,t,i){var n=7+t-i,r=(7+yt(e,0,n).getUTCDay()-t)%7;return-r+n-1}function _t(e,t,i,n,r){var o=(7+i-n)%7,a=bt(e,n,r),s=1+7*(t-1)+o+a,l,u;if(s<=0){l=e-1;u=ze(l)+s}else if(s>ze(e)){l=e+1;u=s-ze(e)}else{l=e;u=s}return{year:l,dayOfYear:u}}function wt(e,t,i){var n=bt(e.year(),t,i),r=Math.floor((e.dayOfYear()-n-1)/7)+1,o,a;if(r<1){a=e.year()-1;o=r+Ct(a,t,i)}else if(r>Ct(e.year(),t,i)){o=r-Ct(e.year(),t,i);a=e.year()+1}else{a=e.year();o=r}return{week:o,year:a}}function Ct(e,t,i){var n=bt(e,t,i),r=bt(e+1,t,i);return(ze(e)-n+r)/7}$("w",["ww",2],"wo","week");$("W",["WW",2],"Wo","isoWeek");xe("w",ce,Ce);xe("ww",ce,ae);xe("W",ce,Ce);xe("WW",ce,ae);Pe(["w","ww","W","WW"],(function(e,t,i,n){t[n.substr(0,1)]=Oe(e)}));function At(e){return wt(e,this._week.dow,this._week.doy).week}var Et={dow:0,doy:6};function xt(){return this._week.dow}function Tt(){return this._week.doy}function St(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Dt(e){var t=wt(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}$("d",0,"do","day");$("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)}));$("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)}));$("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)}));$("e",0,0,"weekday");$("E",0,0,"isoWeekday");xe("d",ce);xe("e",ce);xe("E",ce);xe("dd",(function(e,t){return t.weekdaysMinRegex(e)}));xe("ddd",(function(e,t){return t.weekdaysShortRegex(e)}));xe("dddd",(function(e,t){return t.weekdaysRegex(e)}));Pe(["dd","ddd","dddd"],(function(e,t,i,n){var r=i._locale.weekdaysParse(e,n,i._strict);if(r!=null){t.d=r}else{h(i).invalidWeekday=e}}));Pe(["d","e","E"],(function(e,t,i,n){t[n]=Oe(e)}));function kt(e,t){if(typeof e!=="string"){return e}if(!isNaN(e)){return parseInt(e,10)}e=t.weekdaysParse(e);if(typeof e==="number"){return e}return null}function Ot(e,t){if(typeof e==="string"){return t.weekdaysParse(e)%7||7}return isNaN(e)?null:e}function Rt(e,t){return e.slice(t,7).concat(e.slice(0,t))}var Nt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Pt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),It="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Mt=we,Lt=we,Ft=we;function Gt(e,t){var i=n(this._weekdays)?this._weekdays:this._weekdays[e&&e!==true&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===true?Rt(i,this._week.dow):e?i[e.day()]:i}function $t(e){return e===true?Rt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Wt(e){return e===true?Rt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ht(e,t,i){var n,r,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(n=0;n<7;++n){o=f([2e3,1]).day(n);this._minWeekdaysParse[n]=this.weekdaysMin(o,"").toLocaleLowerCase();this._shortWeekdaysParse[n]=this.weekdaysShort(o,"").toLocaleLowerCase();this._weekdaysParse[n]=this.weekdays(o,"").toLocaleLowerCase()}}if(i){if(t==="dddd"){r=et.call(this._weekdaysParse,a);return r!==-1?r:null}else if(t==="ddd"){r=et.call(this._shortWeekdaysParse,a);return r!==-1?r:null}else{r=et.call(this._minWeekdaysParse,a);return r!==-1?r:null}}else{if(t==="dddd"){r=et.call(this._weekdaysParse,a);if(r!==-1){return r}r=et.call(this._shortWeekdaysParse,a);if(r!==-1){return r}r=et.call(this._minWeekdaysParse,a);return r!==-1?r:null}else if(t==="ddd"){r=et.call(this._shortWeekdaysParse,a);if(r!==-1){return r}r=et.call(this._weekdaysParse,a);if(r!==-1){return r}r=et.call(this._minWeekdaysParse,a);return r!==-1?r:null}else{r=et.call(this._minWeekdaysParse,a);if(r!==-1){return r}r=et.call(this._weekdaysParse,a);if(r!==-1){return r}r=et.call(this._shortWeekdaysParse,a);return r!==-1?r:null}}}function jt(e,t,i){var n,r,o;if(this._weekdaysParseExact){return Ht.call(this,e,t,i)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(n=0;n<7;n++){r=f([2e3,1]).day(n);if(i&&!this._fullWeekdaysParse[n]){this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i");this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i");this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")}if(!this._weekdaysParse[n]){o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,"");this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")}if(i&&t==="dddd"&&this._fullWeekdaysParse[n].test(e)){return n}else if(i&&t==="ddd"&&this._shortWeekdaysParse[n].test(e)){return n}else if(i&&t==="dd"&&this._minWeekdaysParse[n].test(e)){return n}else if(!i&&this._weekdaysParse[n].test(e)){return n}}}function Bt(e){if(!this.isValid()){return e!=null?this:NaN}var t=Xe(this,"Day");if(e!=null){e=kt(e,this.localeData());return this.add(e-t,"d")}else{return t}}function Vt(e){if(!this.isValid()){return e!=null?this:NaN}var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function zt(e){if(!this.isValid()){return e!=null?this:NaN}if(e!=null){var t=Ot(e,this.localeData());return this.day(this.day()%7?t:t-7)}else{return this.day()||7}}function Ut(e){if(this._weekdaysParseExact){if(!o(this,"_weekdaysRegex")){Xt.call(this)}if(e){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!o(this,"_weekdaysRegex")){this._weekdaysRegex=Mt}return this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}}function Yt(e){if(this._weekdaysParseExact){if(!o(this,"_weekdaysRegex")){Xt.call(this)}if(e){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!o(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=Lt}return this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}function qt(e){if(this._weekdaysParseExact){if(!o(this,"_weekdaysRegex")){Xt.call(this)}if(e){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!o(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=Ft}return this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function Xt(){function e(e,t){return t.length-e.length}var t=[],i=[],n=[],r=[],o,a,s,l,u;for(o=0;o<7;o++){a=f([2e3,1]).day(o);s=De(this.weekdaysMin(a,""));l=De(this.weekdaysShort(a,""));u=De(this.weekdays(a,""));t.push(s);i.push(l);n.push(u);r.push(s);r.push(l);r.push(u)}t.sort(e);i.sort(e);n.sort(e);r.sort(e);this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Kt(){return this.hours()%12||12}function Qt(){return this.hours()||24}$("H",["HH",2],0,"hour");$("h",["hh",2],0,Kt);$("k",["kk",2],0,Qt);$("hmm",0,0,(function(){return""+Kt.apply(this)+I(this.minutes(),2)}));$("hmmss",0,0,(function(){return""+Kt.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)}));$("Hmm",0,0,(function(){return""+this.hours()+I(this.minutes(),2)}));$("Hmmss",0,0,(function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)}));function Zt(e,t){$(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}Zt("a",true);Zt("A",false);function Jt(e,t){return t._meridiemParse}xe("a",Jt);xe("A",Jt);xe("H",ce,Ae);xe("h",ce,Ce);xe("k",ce,Ce);xe("HH",ce,ae);xe("hh",ce,ae);xe("kk",ce,ae);xe("hmm",de);xe("hmmss",fe);xe("Hmm",de);xe("Hmmss",fe);Ne(["H","HH"],$e);Ne(["k","kk"],(function(e,t,i){var n=Oe(e);t[$e]=n===24?0:n}));Ne(["a","A"],(function(e,t,i){i._isPm=i._locale.isPM(e);i._meridiem=e}));Ne(["h","hh"],(function(e,t,i){t[$e]=Oe(e);h(i).bigHour=true}));Ne("hmm",(function(e,t,i){var n=e.length-2;t[$e]=Oe(e.substr(0,n));t[We]=Oe(e.substr(n));h(i).bigHour=true}));Ne("hmmss",(function(e,t,i){var n=e.length-4,r=e.length-2;t[$e]=Oe(e.substr(0,n));t[We]=Oe(e.substr(n,2));t[He]=Oe(e.substr(r));h(i).bigHour=true}));Ne("Hmm",(function(e,t,i){var n=e.length-2;t[$e]=Oe(e.substr(0,n));t[We]=Oe(e.substr(n))}));Ne("Hmmss",(function(e,t,i){var n=e.length-4,r=e.length-2;t[$e]=Oe(e.substr(0,n));t[We]=Oe(e.substr(n,2));t[He]=Oe(e.substr(r))}));function ei(e){return(e+"").toLowerCase().charAt(0)==="p"}var ti=/[ap]\.?m?\.?/i,ii=qe("Hours",true);function ni(e,t,i){if(e>11){return i?"pm":"PM"}else{return i?"am":"AM"}}var ri={calendar:N,longDateFormat:V,invalidDate:U,ordinal:q,dayOfMonthOrdinalParse:X,relativeTime:Q,months:it,monthsShort:nt,week:Et,weekdays:Nt,weekdaysMin:It,weekdaysShort:Pt,meridiemParse:ti};var oi={},ai={},si;function li(e,t){var i,n=Math.min(e.length,t.length);for(i=0;i<n;i+=1){if(e[i]!==t[i]){return i}}return n}function ui(e){return e?e.toLowerCase().replace("_","-"):e}function ci(e){var t=0,i,n,r,o;while(t<e.length){o=ui(e[t]).split("-");i=o.length;n=ui(e[t+1]);n=n?n.split("-"):null;while(i>0){r=fi(o.slice(0,i).join("-"));if(r){return r}if(n&&n.length>=i&&li(o,n)>=i-1){break}i--}t++}return si}function di(e){return!!(e&&e.match("^[^/\\\\]*$"))}function fi(e){var t=null,i;if(oi[e]===undefined&&typeof module!=="undefined"&&module&&module.exports&&di(e)){try{t=si._abbr;i=require;i("./locale/"+e);pi(t)}catch(t){oi[e]=null}}return oi[e]}function pi(e,t){var i;if(e){if(s(t)){i=mi(e)}else{i=hi(e,t)}if(i){si=i}else{if(typeof console!=="undefined"&&console.warn){console.warn("Locale "+e+" not found. Did you forget to load it?")}}}return si._abbr}function hi(e,t){if(t!==null){var i,n=ri;t.abbr=e;if(oi[e]!=null){T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");n=oi[e]._config}else if(t.parentLocale!=null){if(oi[t.parentLocale]!=null){n=oi[t.parentLocale]._config}else{i=fi(t.parentLocale);if(i!=null){n=i._config}else{if(!ai[t.parentLocale]){ai[t.parentLocale]=[]}ai[t.parentLocale].push({name:e,config:t});return null}}}oi[e]=new O(k(n,t));if(ai[e]){ai[e].forEach((function(e){hi(e.name,e.config)}))}pi(e);return oi[e]}else{delete oi[e];return null}}function gi(e,t){if(t!=null){var i,n,r=ri;if(oi[e]!=null&&oi[e].parentLocale!=null){oi[e].set(k(oi[e]._config,t))}else{n=fi(e);if(n!=null){r=n._config}t=k(r,t);if(n==null){t.abbr=e}i=new O(t);i.parentLocale=oi[e];oi[e]=i}pi(e)}else{if(oi[e]!=null){if(oi[e].parentLocale!=null){oi[e]=oi[e].parentLocale;if(e===pi()){pi(e)}}else if(oi[e]!=null){delete oi[e]}}}return oi[e]}function mi(e){var t;if(e&&e._locale&&e._locale._abbr){e=e._locale._abbr}if(!e){return si}if(!n(e)){t=fi(e);if(t){return t}e=[e]}return ci(e)}function vi(){return R(oi)}function yi(e){var t,i=e._a;if(i&&h(e).overflow===-2){t=i[Fe]<0||i[Fe]>11?Fe:i[Ge]<1||i[Ge]>tt(i[Le],i[Fe])?Ge:i[$e]<0||i[$e]>24||i[$e]===24&&(i[We]!==0||i[He]!==0||i[je]!==0)?$e:i[We]<0||i[We]>59?We:i[He]<0||i[He]>59?He:i[je]<0||i[je]>999?je:-1;if(h(e)._overflowDayOfYear&&(t<Le||t>Ge)){t=Ge}if(h(e)._overflowWeeks&&t===-1){t=Be}if(h(e)._overflowWeekday&&t===-1){t=Ve}h(e).overflow=t}return e}var bi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_i=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wi=/Z|[+-]\d\d(?::?\d\d)?/,Ci=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,false],["YYYY",/\d{4}/,false]],Ai=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ei=/^\/?Date\((-?\d+)/i,xi=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ti={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Si(e){var t,i,n=e._i,r=bi.exec(n)||_i.exec(n),o,a,s,l,u=Ci.length,c=Ai.length;if(r){h(e).iso=true;for(t=0,i=u;t<i;t++){if(Ci[t][1].exec(r[1])){a=Ci[t][0];o=Ci[t][2]!==false;break}}if(a==null){e._isValid=false;return}if(r[3]){for(t=0,i=c;t<i;t++){if(Ai[t][1].exec(r[3])){s=(r[2]||" ")+Ai[t][0];break}}if(s==null){e._isValid=false;return}}if(!o&&s!=null){e._isValid=false;return}if(r[4]){if(wi.exec(r[4])){l="Z"}else{e._isValid=false;return}}e._f=a+(s||"")+(l||"");$i(e)}else{e._isValid=false}}function Di(e,t,i,n,r,o){var a=[ki(e),nt.indexOf(t),parseInt(i,10),parseInt(n,10),parseInt(r,10)];if(o){a.push(parseInt(o,10))}return a}function ki(e){var t=parseInt(e,10);if(t<=49){return 2e3+t}else if(t<=999){return 1900+t}return t}function Oi(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Ri(e,t,i){if(e){var n=Pt.indexOf(e),r=new Date(t[0],t[1],t[2]).getDay();if(n!==r){h(i).weekdayMismatch=true;i._isValid=false;return false}}return true}function Ni(e,t,i){if(e){return Ti[e]}else if(t){return 0}else{var n=parseInt(i,10),r=n%100,o=(n-r)/100;return o*60+r}}function Pi(e){var t=xi.exec(Oi(e._i)),i;if(t){i=Di(t[4],t[3],t[2],t[5],t[6],t[7]);if(!Ri(t[1],i,e)){return}e._a=i;e._tzm=Ni(t[8],t[9],t[10]);e._d=yt.apply(null,e._a);e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm);h(e).rfc2822=true}else{e._isValid=false}}function Ii(e){var i=Ei.exec(e._i);if(i!==null){e._d=new Date(+i[1]);return}Si(e);if(e._isValid===false){delete e._isValid}else{return}Pi(e);if(e._isValid===false){delete e._isValid}else{return}if(e._strict){e._isValid=false}else{t.createFromInputFallback(e)}}t.createFromInputFallback=E("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}));function Mi(e,t,i){if(e!=null){return e}if(t!=null){return t}return i}function Li(e){var i=new Date(t.now());if(e._useUTC){return[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]}return[i.getFullYear(),i.getMonth(),i.getDate()]}function Fi(e){var t,i,n=[],r,o,a;if(e._d){return}r=Li(e);if(e._w&&e._a[Ge]==null&&e._a[Fe]==null){Gi(e)}if(e._dayOfYear!=null){a=Mi(e._a[Le],r[Le]);if(e._dayOfYear>ze(a)||e._dayOfYear===0){h(e)._overflowDayOfYear=true}i=yt(a,0,e._dayOfYear);e._a[Fe]=i.getUTCMonth();e._a[Ge]=i.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t){e._a[t]=n[t]=r[t]}for(;t<7;t++){e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t]}if(e._a[$e]===24&&e._a[We]===0&&e._a[He]===0&&e._a[je]===0){e._nextDay=true;e._a[$e]=0}e._d=(e._useUTC?yt:vt).apply(null,n);o=e._useUTC?e._d.getUTCDay():e._d.getDay();if(e._tzm!=null){e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm)}if(e._nextDay){e._a[$e]=24}if(e._w&&typeof e._w.d!=="undefined"&&e._w.d!==o){h(e).weekdayMismatch=true}}function Gi(e){var t,i,n,r,o,a,s,l,u;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){o=1;a=4;i=Mi(t.GG,e._a[Le],wt(Yi(),1,4).year);n=Mi(t.W,1);r=Mi(t.E,1);if(r<1||r>7){l=true}}else{o=e._locale._week.dow;a=e._locale._week.doy;u=wt(Yi(),o,a);i=Mi(t.gg,e._a[Le],u.year);n=Mi(t.w,u.week);if(t.d!=null){r=t.d;if(r<0||r>6){l=true}}else if(t.e!=null){r=t.e+o;if(t.e<0||t.e>6){l=true}}else{r=o}}if(n<1||n>Ct(i,o,a)){h(e)._overflowWeeks=true}else if(l!=null){h(e)._overflowWeekday=true}else{s=_t(i,n,r,o,a);e._a[Le]=s.year;e._dayOfYear=s.dayOfYear}}t.ISO_8601=function(){};t.RFC_2822=function(){};function $i(e){if(e._f===t.ISO_8601){Si(e);return}if(e._f===t.RFC_2822){Pi(e);return}e._a=[];h(e).empty=true;var i=""+e._i,n,r,o,a,s,l=i.length,u=0,c,d;o=B(e._f,e._locale).match(M)||[];d=o.length;for(n=0;n<d;n++){a=o[n];r=(i.match(Te(a,e))||[])[0];if(r){s=i.substr(0,i.indexOf(r));if(s.length>0){h(e).unusedInput.push(s)}i=i.slice(i.indexOf(r)+r.length);u+=r.length}if(G[a]){if(r){h(e).empty=false}else{h(e).unusedTokens.push(a)}Ie(a,r,e)}else if(e._strict&&!r){h(e).unusedTokens.push(a)}}h(e).charsLeftOver=l-u;if(i.length>0){h(e).unusedInput.push(i)}if(e._a[$e]<=12&&h(e).bigHour===true&&e._a[$e]>0){h(e).bigHour=undefined}h(e).parsedDateParts=e._a.slice(0);h(e).meridiem=e._meridiem;e._a[$e]=Wi(e._locale,e._a[$e],e._meridiem);c=h(e).era;if(c!==null){e._a[Le]=e._locale.erasConvertYear(c,e._a[Le])}Fi(e);yi(e)}function Wi(e,t,i){var n;if(i==null){return t}if(e.meridiemHour!=null){return e.meridiemHour(t,i)}else if(e.isPM!=null){n=e.isPM(i);if(n&&t<12){t+=12}if(!n&&t===12){t=0}return t}else{return t}}function Hi(e){var t,i,n,r,o,a,s=false,l=e._f.length;if(l===0){h(e).invalidFormat=true;e._d=new Date(NaN);return}for(r=0;r<l;r++){o=0;a=false;t=_({},e);if(e._useUTC!=null){t._useUTC=e._useUTC}t._f=e._f[r];$i(t);if(m(t)){a=true}o+=h(t).charsLeftOver;o+=h(t).unusedTokens.length*10;h(t).score=o;if(!s){if(n==null||o<n||a){n=o;i=t;if(a){s=true}}}else{if(o<n){n=o;i=t}}}d(e,i||t)}function ji(e){if(e._d){return}var t=ie(e._i),i=t.day===undefined?t.date:t.day;e._a=c([t.year,t.month,i,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)}));Fi(e)}function Bi(e){var t=new w(yi(Vi(e)));if(t._nextDay){t.add(1,"d");t._nextDay=undefined}return t}function Vi(e){var t=e._i,i=e._f;e._locale=e._locale||mi(e._l);if(t===null||i===undefined&&t===""){return v({nullInput:true})}if(typeof t==="string"){e._i=t=e._locale.preparse(t)}if(C(t)){return new w(yi(t))}else if(u(t)){e._d=t}else if(n(i)){Hi(e)}else if(i){$i(e)}else{zi(e)}if(!m(e)){e._d=null}return e}function zi(e){var i=e._i;if(s(i)){e._d=new Date(t.now())}else if(u(i)){e._d=new Date(i.valueOf())}else if(typeof i==="string"){Ii(e)}else if(n(i)){e._a=c(i.slice(0),(function(e){return parseInt(e,10)}));Fi(e)}else if(r(i)){ji(e)}else if(l(i)){e._d=new Date(i)}else{t.createFromInputFallback(e)}}function Ui(e,t,i,o,s){var l={};if(t===true||t===false){o=t;t=undefined}if(i===true||i===false){o=i;i=undefined}if(r(e)&&a(e)||n(e)&&e.length===0){e=undefined}l._isAMomentObject=true;l._useUTC=l._isUTC=s;l._l=i;l._i=e;l._f=t;l._strict=o;return Bi(l)}function Yi(e,t,i,n){return Ui(e,t,i,n,false)}var qi=E("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Yi.apply(null,arguments);if(this.isValid()&&e.isValid()){return e<this?this:e}else{return v()}})),Xi=E("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Yi.apply(null,arguments);if(this.isValid()&&e.isValid()){return e>this?this:e}else{return v()}}));function Ki(e,t){var i,r;if(t.length===1&&n(t[0])){t=t[0]}if(!t.length){return Yi()}i=t[0];for(r=1;r<t.length;++r){if(!t[r].isValid()||t[r][e](i)){i=t[r]}}return i}function Qi(){var e=[].slice.call(arguments,0);return Ki("isBefore",e)}function Zi(){var e=[].slice.call(arguments,0);return Ki("isAfter",e)}var Ji=function(){return Date.now?Date.now():+new Date};var en=["year","quarter","month","week","day","hour","minute","second","millisecond"];function tn(e){var t,i=false,n,r=en.length;for(t in e){if(o(e,t)&&!(et.call(en,t)!==-1&&(e[t]==null||!isNaN(e[t])))){return false}}for(n=0;n<r;++n){if(e[en[n]]){if(i){return false}if(parseFloat(e[en[n]])!==Oe(e[en[n]])){i=true}}}return true}function nn(){return this._isValid}function rn(){return Sn(NaN)}function on(e){var t=ie(e),i=t.year||0,n=t.quarter||0,r=t.month||0,o=t.week||t.isoWeek||0,a=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=tn(t);this._milliseconds=+c+u*1e3+l*6e4+s*1e3*60*60;this._days=+a+o*7;this._months=+r+n*3+i*12;this._data={};this._locale=mi();this._bubble()}function an(e){return e instanceof on}function sn(e){if(e<0){return Math.round(-1*e)*-1}else{return Math.round(e)}}function ln(e,t,i){var n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),o=0,a;for(a=0;a<n;a++){if(i&&e[a]!==t[a]||!i&&Oe(e[a])!==Oe(t[a])){o++}}return o+r}function un(e,t){$(e,0,0,(function(){var e=this.utcOffset(),i="+";if(e<0){e=-e;i="-"}return i+I(~~(e/60),2)+t+I(~~e%60,2)}))}un("Z",":");un("ZZ","");xe("Z",be);xe("ZZ",be);Ne(["Z","ZZ"],(function(e,t,i){i._useUTC=true;i._tzm=dn(be,e)}));var cn=/([\+\-]|\d\d)/gi;function dn(e,t){var i=(t||"").match(e),n,r,o;if(i===null){return null}n=i[i.length-1]||[];r=(n+"").match(cn)||["-",0,0];o=+(r[1]*60)+Oe(r[2]);return o===0?0:r[0]==="+"?o:-o}function fn(e,i){var n,r;if(i._isUTC){n=i.clone();r=(C(e)||u(e)?e.valueOf():Yi(e).valueOf())-n.valueOf();n._d.setTime(n._d.valueOf()+r);t.updateOffset(n,false);return n}else{return Yi(e).local()}}function pn(e){return-Math.round(e._d.getTimezoneOffset())}t.updateOffset=function(){};function hn(e,i,n){var r=this._offset||0,o;if(!this.isValid()){return e!=null?this:NaN}if(e!=null){if(typeof e==="string"){e=dn(be,e);if(e===null){return this}}else if(Math.abs(e)<16&&!n){e=e*60}if(!this._isUTC&&i){o=pn(this)}this._offset=e;this._isUTC=true;if(o!=null){this.add(o,"m")}if(r!==e){if(!i||this._changeInProgress){Nn(this,Sn(e-r,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;t.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?r:pn(this)}}function gn(e,t){if(e!=null){if(typeof e!=="string"){e=-e}this.utcOffset(e,t);return this}else{return-this.utcOffset()}}function mn(e){return this.utcOffset(0,e)}function vn(e){if(this._isUTC){this.utcOffset(0,e);this._isUTC=false;if(e){this.subtract(pn(this),"m")}}return this}function yn(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true)}else if(typeof this._i==="string"){var e=dn(ye,this._i);if(e!=null){this.utcOffset(e)}else{this.utcOffset(0,true)}}return this}function bn(e){if(!this.isValid()){return false}e=e?Yi(e).utcOffset():0;return(this.utcOffset()-e)%60===0}function _n(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function wn(){if(!s(this._isDSTShifted)){return this._isDSTShifted}var e={},t;_(e,this);e=Vi(e);if(e._a){t=e._isUTC?f(e._a):Yi(e._a);this._isDSTShifted=this.isValid()&&ln(e._a,t.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function Cn(){return this.isValid()?!this._isUTC:false}function An(){return this.isValid()?this._isUTC:false}function En(){return this.isValid()?this._isUTC&&this._offset===0:false}var xn=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Tn=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Sn(e,t){var i=e,n=null,r,a,s;if(an(e)){i={ms:e._milliseconds,d:e._days,M:e._months}}else if(l(e)||!isNaN(+e)){i={};if(t){i[t]=+e}else{i.milliseconds=+e}}else if(n=xn.exec(e)){r=n[1]==="-"?-1:1;i={y:0,d:Oe(n[Ge])*r,h:Oe(n[$e])*r,m:Oe(n[We])*r,s:Oe(n[He])*r,ms:Oe(sn(n[je]*1e3))*r}}else if(n=Tn.exec(e)){r=n[1]==="-"?-1:1;i={y:Dn(n[2],r),M:Dn(n[3],r),w:Dn(n[4],r),d:Dn(n[5],r),h:Dn(n[6],r),m:Dn(n[7],r),s:Dn(n[8],r)}}else if(i==null){i={}}else if(typeof i==="object"&&("from"in i||"to"in i)){s=On(Yi(i.from),Yi(i.to));i={};i.ms=s.milliseconds;i.M=s.months}a=new on(i);if(an(e)&&o(e,"_locale")){a._locale=e._locale}if(an(e)&&o(e,"_isValid")){a._isValid=e._isValid}return a}Sn.fn=on.prototype;Sn.invalid=rn;function Dn(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function kn(e,t){var i={};i.months=t.month()-e.month()+(t.year()-e.year())*12;if(e.clone().add(i.months,"M").isAfter(t)){--i.months}i.milliseconds=+t-+e.clone().add(i.months,"M");return i}function On(e,t){var i;if(!(e.isValid()&&t.isValid())){return{milliseconds:0,months:0}}t=fn(t,e);if(e.isBefore(t)){i=kn(e,t)}else{i=kn(t,e);i.milliseconds=-i.milliseconds;i.months=-i.months}return i}function Rn(e,t){return function(i,n){var r,o;if(n!==null&&!isNaN(+n)){T(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");o=i;i=n;n=o}r=Sn(i,n);Nn(this,r,e);return this}}function Nn(e,i,n,r){var o=i._milliseconds,a=sn(i._days),s=sn(i._months);if(!e.isValid()){return}r=r==null?true:r;if(s){dt(e,Xe(e,"Month")+s*n)}if(a){Ke(e,"Date",Xe(e,"Date")+a*n)}if(o){e._d.setTime(e._d.valueOf()+o*n)}if(r){t.updateOffset(e,a||s)}}var Pn=Rn(1,"add"),In=Rn(-1,"subtract");function Mn(e){return typeof e==="string"||e instanceof String}function Ln(e){return C(e)||u(e)||Mn(e)||l(e)||Gn(e)||Fn(e)||e===null||e===undefined}function Fn(e){var t=r(e)&&!a(e),i=false,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,l,u=n.length;for(s=0;s<u;s+=1){l=n[s];i=i||o(e,l)}return t&&i}function Gn(e){var t=n(e),i=false;if(t){i=e.filter((function(t){return!l(t)&&Mn(e)})).length===0}return t&&i}function $n(e){var t=r(e)&&!a(e),i=false,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,l;for(s=0;s<n.length;s+=1){l=n[s];i=i||o(e,l)}return t&&i}function Wn(e,t){var i=e.diff(t,"days",true);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function Hn(e,i){if(arguments.length===1){if(!arguments[0]){e=undefined;i=undefined}else if(Ln(arguments[0])){e=arguments[0];i=undefined}else if($n(arguments[0])){i=arguments[0];e=undefined}}var n=e||Yi(),r=fn(n,this).startOf("day"),o=t.calendarFormat(this,r)||"sameElse",a=i&&(S(i[o])?i[o].call(this,n):i[o]);return this.format(a||this.localeData().calendar(o,this,Yi(n)))}function jn(){return new w(this)}function Bn(e,t){var i=C(e)?e:Yi(e);if(!(this.isValid()&&i.isValid())){return false}t=te(t)||"millisecond";if(t==="millisecond"){return this.valueOf()>i.valueOf()}else{return i.valueOf()<this.clone().startOf(t).valueOf()}}function Vn(e,t){var i=C(e)?e:Yi(e);if(!(this.isValid()&&i.isValid())){return false}t=te(t)||"millisecond";if(t==="millisecond"){return this.valueOf()<i.valueOf()}else{return this.clone().endOf(t).valueOf()<i.valueOf()}}function zn(e,t,i,n){var r=C(e)?e:Yi(e),o=C(t)?t:Yi(t);if(!(this.isValid()&&r.isValid()&&o.isValid())){return false}n=n||"()";return(n[0]==="("?this.isAfter(r,i):!this.isBefore(r,i))&&(n[1]===")"?this.isBefore(o,i):!this.isAfter(o,i))}function Un(e,t){var i=C(e)?e:Yi(e),n;if(!(this.isValid()&&i.isValid())){return false}t=te(t)||"millisecond";if(t==="millisecond"){return this.valueOf()===i.valueOf()}else{n=i.valueOf();return this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()}}function Yn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function qn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Xn(e,t,i){var n,r,o;if(!this.isValid()){return NaN}n=fn(e,this);if(!n.isValid()){return NaN}r=(n.utcOffset()-this.utcOffset())*6e4;t=te(t);switch(t){case"year":o=Kn(this,n)/12;break;case"month":o=Kn(this,n);break;case"quarter":o=Kn(this,n)/3;break;case"second":o=(this-n)/1e3;break;case"minute":o=(this-n)/6e4;break;case"hour":o=(this-n)/36e5;break;case"day":o=(this-n-r)/864e5;break;case"week":o=(this-n-r)/6048e5;break;default:o=this-n}return i?o:ke(o)}function Kn(e,t){if(e.date()<t.date()){return-Kn(t,e)}var i=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(i,"months"),r,o;if(t-n<0){r=e.clone().add(i-1,"months");o=(t-n)/(n-r)}else{r=e.clone().add(i+1,"months");o=(t-n)/(r-n)}return-(i+o)||0}t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Qn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Zn(e){if(!this.isValid()){return null}var t=e!==true,i=t?this.clone().utc():this;if(i.year()<0||i.year()>9999){return j(i,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ")}if(S(Date.prototype.toISOString)){if(t){return this.toDate().toISOString()}else{return new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",j(i,"Z"))}}return j(i,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Jn(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var e="moment",t="",i,n,r,o;if(!this.isLocal()){e=this.utcOffset()===0?"moment.utc":"moment.parseZone";t="Z"}i="["+e+'("]';n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";r="-MM-DD[T]HH:mm:ss.SSS";o=t+'[")]';return this.format(i+n+r+o)}function er(e){if(!e){e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat}var i=j(this,e);return this.localeData().postformat(i)}function tr(e,t){if(this.isValid()&&(C(e)&&e.isValid()||Yi(e).isValid())){return Sn({to:this,from:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function ir(e){return this.from(Yi(),e)}function nr(e,t){if(this.isValid()&&(C(e)&&e.isValid()||Yi(e).isValid())){return Sn({from:this,to:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function rr(e){return this.to(Yi(),e)}function or(e){var t;if(e===undefined){return this._locale._abbr}else{t=mi(e);if(t!=null){this._locale=t}return this}}var ar=E("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){if(e===undefined){return this.localeData()}else{return this.locale(e)}}));function sr(){return this._locale}var lr=1e3,ur=60*lr,cr=60*ur,dr=(365*400+97)*24*cr;function fr(e,t){return(e%t+t)%t}function pr(e,t,i){if(e<100&&e>=0){return new Date(e+400,t,i)-dr}else{return new Date(e,t,i).valueOf()}}function hr(e,t,i){if(e<100&&e>=0){return Date.UTC(e+400,t,i)-dr}else{return Date.UTC(e,t,i)}}function gr(e){var i,n;e=te(e);if(e===undefined||e==="millisecond"||!this.isValid()){return this}n=this._isUTC?hr:pr;switch(e){case"year":i=n(this.year(),0,1);break;case"quarter":i=n(this.year(),this.month()-this.month()%3,1);break;case"month":i=n(this.year(),this.month(),1);break;case"week":i=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":i=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":i=n(this.year(),this.month(),this.date());break;case"hour":i=this._d.valueOf();i-=fr(i+(this._isUTC?0:this.utcOffset()*ur),cr);break;case"minute":i=this._d.valueOf();i-=fr(i,ur);break;case"second":i=this._d.valueOf();i-=fr(i,lr);break}this._d.setTime(i);t.updateOffset(this,true);return this}function mr(e){var i,n;e=te(e);if(e===undefined||e==="millisecond"||!this.isValid()){return this}n=this._isUTC?hr:pr;switch(e){case"year":i=n(this.year()+1,0,1)-1;break;case"quarter":i=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":i=n(this.year(),this.month()+1,1)-1;break;case"week":i=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":i=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":i=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":i=this._d.valueOf();i+=cr-fr(i+(this._isUTC?0:this.utcOffset()*ur),cr)-1;break;case"minute":i=this._d.valueOf();i+=ur-fr(i,ur)-1;break;case"second":i=this._d.valueOf();i+=lr-fr(i,lr)-1;break}this._d.setTime(i);t.updateOffset(this,true);return this}function vr(){return this._d.valueOf()-(this._offset||0)*6e4}function yr(){return Math.floor(this.valueOf()/1e3)}function br(){return new Date(this.valueOf())}function _r(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function wr(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Cr(){return this.isValid()?this.toISOString():null}function Ar(){return m(this)}function Er(){return d({},h(this))}function xr(){return h(this).overflow}function Tr(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}$("N",0,0,"eraAbbr");$("NN",0,0,"eraAbbr");$("NNN",0,0,"eraAbbr");$("NNNN",0,0,"eraName");$("NNNNN",0,0,"eraNarrow");$("y",["y",1],"yo","eraYear");$("y",["yy",2],0,"eraYear");$("y",["yyy",3],0,"eraYear");$("y",["yyyy",4],0,"eraYear");xe("N",Fr);xe("NN",Fr);xe("NNN",Fr);xe("NNNN",Gr);xe("NNNNN",$r);Ne(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,i,n){var r=i._locale.erasParse(e,n,i._strict);if(r){h(i).era=r}else{h(i).invalidEra=e}}));xe("y",me);xe("yy",me);xe("yyy",me);xe("yyyy",me);xe("yo",Wr);Ne(["y","yy","yyy","yyyy"],Le);Ne(["yo"],(function(e,t,i,n){var r;if(i._locale._eraYearOrdinalRegex){r=e.match(i._locale._eraYearOrdinalRegex)}if(i._locale.eraYearOrdinalParse){t[Le]=i._locale.eraYearOrdinalParse(e,r)}else{t[Le]=parseInt(e,10)}}));function Sr(e,i){var n,r,o,a=this._eras||mi("en")._eras;for(n=0,r=a.length;n<r;++n){switch(typeof a[n].since){case"string":o=t(a[n].since).startOf("day");a[n].since=o.valueOf();break}switch(typeof a[n].until){case"undefined":a[n].until=+Infinity;break;case"string":o=t(a[n].until).startOf("day").valueOf();a[n].until=o.valueOf();break}}return a}function Dr(e,t,i){var n,r,o=this.eras(),a,s,l;e=e.toUpperCase();for(n=0,r=o.length;n<r;++n){a=o[n].name.toUpperCase();s=o[n].abbr.toUpperCase();l=o[n].narrow.toUpperCase();if(i){switch(t){case"N":case"NN":case"NNN":if(s===e){return o[n]}break;case"NNNN":if(a===e){return o[n]}break;case"NNNNN":if(l===e){return o[n]}break}}else if([a,s,l].indexOf(e)>=0){return o[n]}}}function kr(e,i){var n=e.since<=e.until?+1:-1;if(i===undefined){return t(e.since).year()}else{return t(e.since).year()+(i-e.offset)*n}}function Or(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){i=this.clone().startOf("day").valueOf();if(n[e].since<=i&&i<=n[e].until){return n[e].name}if(n[e].until<=i&&i<=n[e].since){return n[e].name}}return""}function Rr(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){i=this.clone().startOf("day").valueOf();if(n[e].since<=i&&i<=n[e].until){return n[e].narrow}if(n[e].until<=i&&i<=n[e].since){return n[e].narrow}}return""}function Nr(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){i=this.clone().startOf("day").valueOf();if(n[e].since<=i&&i<=n[e].until){return n[e].abbr}if(n[e].until<=i&&i<=n[e].since){return n[e].abbr}}return""}function Pr(){var e,i,n,r,o=this.localeData().eras();for(e=0,i=o.length;e<i;++e){n=o[e].since<=o[e].until?+1:-1;r=this.clone().startOf("day").valueOf();if(o[e].since<=r&&r<=o[e].until||o[e].until<=r&&r<=o[e].since){return(this.year()-t(o[e].since).year())*n+o[e].offset}}return this.year()}function Ir(e){if(!o(this,"_erasNameRegex")){Hr.call(this)}return e?this._erasNameRegex:this._erasRegex}function Mr(e){if(!o(this,"_erasAbbrRegex")){Hr.call(this)}return e?this._erasAbbrRegex:this._erasRegex}function Lr(e){if(!o(this,"_erasNarrowRegex")){Hr.call(this)}return e?this._erasNarrowRegex:this._erasRegex}function Fr(e,t){return t.erasAbbrRegex(e)}function Gr(e,t){return t.erasNameRegex(e)}function $r(e,t){return t.erasNarrowRegex(e)}function Wr(e,t){return t._eraYearOrdinalRegex||me}function Hr(){var e=[],t=[],i=[],n=[],r,o,a,s,l,u=this.eras();for(r=0,o=u.length;r<o;++r){a=De(u[r].name);s=De(u[r].abbr);l=De(u[r].narrow);t.push(a);e.push(s);i.push(l);n.push(a);n.push(s);n.push(l)}this._erasRegex=new RegExp("^("+n.join("|")+")","i");this._erasNameRegex=new RegExp("^("+t.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}$(0,["gg",2],0,(function(){return this.weekYear()%100}));$(0,["GG",2],0,(function(){return this.isoWeekYear()%100}));function jr(e,t){$(0,[e,e.length],0,t)}jr("gggg","weekYear");jr("ggggg","weekYear");jr("GGGG","isoWeekYear");jr("GGGGG","isoWeekYear");xe("G",ve);xe("g",ve);xe("GG",ce,ae);xe("gg",ce,ae);xe("GGGG",he,le);xe("gggg",he,le);xe("GGGGG",ge,ue);xe("ggggg",ge,ue);Pe(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,i,n){t[n.substr(0,2)]=Oe(e)}));Pe(["gg","GG"],(function(e,i,n,r){i[r]=t.parseTwoDigitYear(e)}));function Br(e){return Xr.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Vr(e){return Xr.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function zr(){return Ct(this.year(),1,4)}function Ur(){return Ct(this.isoWeekYear(),1,4)}function Yr(){var e=this.localeData()._week;return Ct(this.year(),e.dow,e.doy)}function qr(){var e=this.localeData()._week;return Ct(this.weekYear(),e.dow,e.doy)}function Xr(e,t,i,n,r){var o;if(e==null){return wt(this,n,r).year}else{o=Ct(e,n,r);if(t>o){t=o}return Kr.call(this,e,t,i,n,r)}}function Kr(e,t,i,n,r){var o=_t(e,t,i,n,r),a=yt(o.year,0,o.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}$("Q",0,"Qo","quarter");xe("Q",oe);Ne("Q",(function(e,t){t[Fe]=(Oe(e)-1)*3}));function Qr(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}$("D",["DD",2],"Do","date");xe("D",ce,Ce);xe("DD",ce,ae);xe("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}));Ne(["D","DD"],Ge);Ne("Do",(function(e,t){t[Ge]=Oe(e.match(ce)[0])}));var Zr=qe("Date",true);$("DDD",["DDDD",3],"DDDo","dayOfYear");xe("DDD",pe);xe("DDDD",se);Ne(["DDD","DDDD"],(function(e,t,i){i._dayOfYear=Oe(e)}));function Jr(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}$("m",["mm",2],0,"minute");xe("m",ce,Ae);xe("mm",ce,ae);Ne(["m","mm"],We);var eo=qe("Minutes",false);$("s",["ss",2],0,"second");xe("s",ce,Ae);xe("ss",ce,ae);Ne(["s","ss"],He);var to=qe("Seconds",false);$("S",0,0,(function(){return~~(this.millisecond()/100)}));$(0,["SS",2],0,(function(){return~~(this.millisecond()/10)}));$(0,["SSS",3],0,"millisecond");$(0,["SSSS",4],0,(function(){return this.millisecond()*10}));$(0,["SSSSS",5],0,(function(){return this.millisecond()*100}));$(0,["SSSSSS",6],0,(function(){return this.millisecond()*1e3}));$(0,["SSSSSSS",7],0,(function(){return this.millisecond()*1e4}));$(0,["SSSSSSSS",8],0,(function(){return this.millisecond()*1e5}));$(0,["SSSSSSSSS",9],0,(function(){return this.millisecond()*1e6}));xe("S",pe,oe);xe("SS",pe,ae);xe("SSS",pe,se);var io,no;for(io="SSSS";io.length<=9;io+="S"){xe(io,me)}function ro(e,t){t[je]=Oe(("0."+e)*1e3)}for(io="S";io.length<=9;io+="S"){Ne(io,ro)}no=qe("Milliseconds",false);$("z",0,0,"zoneAbbr");$("zz",0,0,"zoneName");function oo(){return this._isUTC?"UTC":""}function ao(){return this._isUTC?"Coordinated Universal Time":""}var so=w.prototype;so.add=Pn;so.calendar=Hn;so.clone=jn;so.diff=Xn;so.endOf=mr;so.format=er;so.from=tr;so.fromNow=ir;so.to=nr;so.toNow=rr;so.get=Qe;so.invalidAt=xr;so.isAfter=Bn;so.isBefore=Vn;so.isBetween=zn;so.isSame=Un;so.isSameOrAfter=Yn;so.isSameOrBefore=qn;so.isValid=Ar;so.lang=ar;so.locale=or;so.localeData=sr;so.max=Xi;so.min=qi;so.parsingFlags=Er;so.set=Ze;so.startOf=gr;so.subtract=In;so.toArray=_r;so.toObject=wr;so.toDate=br;so.toISOString=Zn;so.inspect=Jn;if(typeof Symbol!=="undefined"&&Symbol.for!=null){so[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}}so.toJSON=Cr;so.toString=Qn;so.unix=yr;so.valueOf=vr;so.creationData=Tr;so.eraName=Or;so.eraNarrow=Rr;so.eraAbbr=Nr;so.eraYear=Pr;so.year=Ue;so.isLeapYear=Ye;so.weekYear=Br;so.isoWeekYear=Vr;so.quarter=so.quarters=Qr;so.month=ft;so.daysInMonth=pt;so.week=so.weeks=St;so.isoWeek=so.isoWeeks=Dt;so.weeksInYear=Yr;so.weeksInWeekYear=qr;so.isoWeeksInYear=zr;so.isoWeeksInISOWeekYear=Ur;so.date=Zr;so.day=so.days=Bt;so.weekday=Vt;so.isoWeekday=zt;so.dayOfYear=Jr;so.hour=so.hours=ii;so.minute=so.minutes=eo;so.second=so.seconds=to;so.millisecond=so.milliseconds=no;so.utcOffset=hn;so.utc=mn;so.local=vn;so.parseZone=yn;so.hasAlignedHourOffset=bn;so.isDST=_n;so.isLocal=Cn;so.isUtcOffset=An;so.isUtc=En;so.isUTC=En;so.zoneAbbr=oo;so.zoneName=ao;so.dates=E("dates accessor is deprecated. Use date instead.",Zr);so.months=E("months accessor is deprecated. Use month instead",ft);so.years=E("years accessor is deprecated. Use year instead",Ue);so.zone=E("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",gn);so.isDSTShifted=E("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",wn);function lo(e){return Yi(e*1e3)}function uo(){return Yi.apply(null,arguments).parseZone()}function co(e){return e}var fo=O.prototype;fo.calendar=P;fo.longDateFormat=z;fo.invalidDate=Y;fo.ordinal=K;fo.preparse=co;fo.postformat=co;fo.relativeTime=Z;fo.pastFuture=J;fo.set=D;fo.eras=Sr;fo.erasParse=Dr;fo.erasConvertYear=kr;fo.erasAbbrRegex=Mr;fo.erasNameRegex=Ir;fo.erasNarrowRegex=Lr;fo.months=st;fo.monthsShort=lt;fo.monthsParse=ct;fo.monthsRegex=gt;fo.monthsShortRegex=ht;fo.week=At;fo.firstDayOfYear=Tt;fo.firstDayOfWeek=xt;fo.weekdays=Gt;fo.weekdaysMin=Wt;fo.weekdaysShort=$t;fo.weekdaysParse=jt;fo.weekdaysRegex=Ut;fo.weekdaysShortRegex=Yt;fo.weekdaysMinRegex=qt;fo.isPM=ei;fo.meridiem=ni;function po(e,t,i,n){var r=mi(),o=f().set(n,t);return r[i](o,e)}function ho(e,t,i){if(l(e)){t=e;e=undefined}e=e||"";if(t!=null){return po(e,t,i,"month")}var n,r=[];for(n=0;n<12;n++){r[n]=po(e,n,i,"month")}return r}function go(e,t,i,n){if(typeof e==="boolean"){if(l(t)){i=t;t=undefined}t=t||""}else{t=e;i=t;e=false;if(l(t)){i=t;t=undefined}t=t||""}var r=mi(),o=e?r._week.dow:0,a,s=[];if(i!=null){return po(t,(i+o)%7,n,"day")}for(a=0;a<7;a++){s[a]=po(t,(a+o)%7,n,"day")}return s}function mo(e,t){return ho(e,t,"months")}function vo(e,t){return ho(e,t,"monthsShort")}function yo(e,t,i){return go(e,t,i,"weekdays")}function bo(e,t,i){return go(e,t,i,"weekdaysShort")}function _o(e,t,i){return go(e,t,i,"weekdaysMin")}pi("en",{eras:[{since:"0001-01-01",until:+Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=Oe(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+i}});t.lang=E("moment.lang is deprecated. Use moment.locale instead.",pi);t.langData=E("moment.langData is deprecated. Use moment.localeData instead.",mi);var wo=Math.abs;function Co(){var e=this._data;this._milliseconds=wo(this._milliseconds);this._days=wo(this._days);this._months=wo(this._months);e.milliseconds=wo(e.milliseconds);e.seconds=wo(e.seconds);e.minutes=wo(e.minutes);e.hours=wo(e.hours);e.months=wo(e.months);e.years=wo(e.years);return this}function Ao(e,t,i,n){var r=Sn(t,i);e._milliseconds+=n*r._milliseconds;e._days+=n*r._days;e._months+=n*r._months;return e._bubble()}function Eo(e,t){return Ao(this,e,t,1)}function xo(e,t){return Ao(this,e,t,-1)}function To(e){if(e<0){return Math.floor(e)}else{return Math.ceil(e)}}function So(){var e=this._milliseconds,t=this._days,i=this._months,n=this._data,r,o,a,s,l;if(!(e>=0&&t>=0&&i>=0||e<=0&&t<=0&&i<=0)){e+=To(ko(i)+t)*864e5;t=0;i=0}n.milliseconds=e%1e3;r=ke(e/1e3);n.seconds=r%60;o=ke(r/60);n.minutes=o%60;a=ke(o/60);n.hours=a%24;t+=ke(a/24);l=ke(Do(t));i+=l;t-=To(ko(l));s=ke(i/12);i%=12;n.days=t;n.months=i;n.years=s;return this}function Do(e){return e*4800/146097}function ko(e){return e*146097/4800}function Oo(e){if(!this.isValid()){return NaN}var t,i,n=this._milliseconds;e=te(e);if(e==="month"||e==="quarter"||e==="year"){t=this._days+n/864e5;i=this._months+Do(t);switch(e){case"month":return i;case"quarter":return i/3;case"year":return i/12}}else{t=this._days+Math.round(ko(this._months));switch(e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}}function Ro(e){return function(){return this.as(e)}}var No=Ro("ms"),Po=Ro("s"),Io=Ro("m"),Mo=Ro("h"),Lo=Ro("d"),Fo=Ro("w"),Go=Ro("M"),$o=Ro("Q"),Wo=Ro("y"),Ho=No;function jo(){return Sn(this)}function Bo(e){e=te(e);return this.isValid()?this[e+"s"]():NaN}function Vo(e){return function(){return this.isValid()?this._data[e]:NaN}}var zo=Vo("milliseconds"),Uo=Vo("seconds"),Yo=Vo("minutes"),qo=Vo("hours"),Xo=Vo("days"),Ko=Vo("months"),Qo=Vo("years");function Zo(){return ke(this.days()/7)}var Jo=Math.round,ea={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ta(e,t,i,n,r){return r.relativeTime(t||1,!!i,e,n)}function ia(e,t,i,n){var r=Sn(e).abs(),o=Jo(r.as("s")),a=Jo(r.as("m")),s=Jo(r.as("h")),l=Jo(r.as("d")),u=Jo(r.as("M")),c=Jo(r.as("w")),d=Jo(r.as("y")),f=o<=i.ss&&["s",o]||o<i.s&&["ss",o]||a<=1&&["m"]||a<i.m&&["mm",a]||s<=1&&["h"]||s<i.h&&["hh",s]||l<=1&&["d"]||l<i.d&&["dd",l];if(i.w!=null){f=f||c<=1&&["w"]||c<i.w&&["ww",c]}f=f||u<=1&&["M"]||u<i.M&&["MM",u]||d<=1&&["y"]||["yy",d];f[2]=t;f[3]=+e>0;f[4]=n;return ta.apply(null,f)}function na(e){if(e===undefined){return Jo}if(typeof e==="function"){Jo=e;return true}return false}function ra(e,t){if(ea[e]===undefined){return false}if(t===undefined){return ea[e]}ea[e]=t;if(e==="s"){ea.ss=t-1}return true}function oa(e,t){if(!this.isValid()){return this.localeData().invalidDate()}var i=false,n=ea,r,o;if(typeof e==="object"){t=e;e=false}if(typeof e==="boolean"){i=e}if(typeof t==="object"){n=Object.assign({},ea,t);if(t.s!=null&&t.ss==null){n.ss=t.s-1}}r=this.localeData();o=ia(this,!i,n,r);if(i){o=r.pastFuture(+this,o)}return r.postformat(o)}var aa=Math.abs;function sa(e){return(e>0)-(e<0)||+e}function la(){if(!this.isValid()){return this.localeData().invalidDate()}var e=aa(this._milliseconds)/1e3,t=aa(this._days),i=aa(this._months),n,r,o,a,s=this.asSeconds(),l,u,c,d;if(!s){return"P0D"}n=ke(e/60);r=ke(n/60);e%=60;n%=60;o=ke(i/12);i%=12;a=e?e.toFixed(3).replace(/\.?0+$/,""):"";l=s<0?"-":"";u=sa(this._months)!==sa(s)?"-":"";c=sa(this._days)!==sa(s)?"-":"";d=sa(this._milliseconds)!==sa(s)?"-":"";return l+"P"+(o?u+o+"Y":"")+(i?u+i+"M":"")+(t?c+t+"D":"")+(r||n||e?"T":"")+(r?d+r+"H":"")+(n?d+n+"M":"")+(e?d+a+"S":"")}var ua=on.prototype;ua.isValid=nn;ua.abs=Co;ua.add=Eo;ua.subtract=xo;ua.as=Oo;ua.asMilliseconds=No;ua.asSeconds=Po;ua.asMinutes=Io;ua.asHours=Mo;ua.asDays=Lo;ua.asWeeks=Fo;ua.asMonths=Go;ua.asQuarters=$o;ua.asYears=Wo;ua.valueOf=Ho;ua._bubble=So;ua.clone=jo;ua.get=Bo;ua.milliseconds=zo;ua.seconds=Uo;ua.minutes=Yo;ua.hours=qo;ua.days=Xo;ua.weeks=Zo;ua.months=Ko;ua.years=Qo;ua.humanize=oa;ua.toISOString=la;ua.toString=la;ua.toJSON=la;ua.locale=or;ua.localeData=sr;ua.toIsoString=E("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",la);ua.lang=ar;$("X",0,0,"unix");$("x",0,0,"valueOf");xe("x",ve);xe("X",_e);Ne("X",(function(e,t,i){i._d=new Date(parseFloat(e)*1e3)}));Ne("x",(function(e,t,i){i._d=new Date(Oe(e))}));t.version="2.30.1";i(Yi);t.fn=so;t.min=Qi;t.max=Zi;t.now=Ji;t.utc=f;t.unix=lo;t.months=mo;t.isDate=u;t.locale=pi;t.invalid=v;t.duration=Sn;t.isMoment=C;t.weekdays=yo;t.parseZone=uo;t.localeData=mi;t.isDuration=an;t.monthsShort=vo;t.weekdaysMin=_o;t.defineLocale=hi;t.updateLocale=gi;t.locales=vi;t.weekdaysShort=bo;t.normalizeUnits=te;t.relativeTimeRounding=na;t.relativeTimeThreshold=ra;t.calendarFormat=Wn;t.prototype=so;t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return t}));(function(e,t){"use strict";if(typeof module==="object"&&module.exports){module.exports=t(require("moment"))}else if(typeof define==="function"&&define.amd){define(["moment"],t)}else{t(e.moment)}})(this,(function(e){"use strict";if(e.version===undefined&&e.default){e=e.default}var t="0.5.45",i={},n={},r={},o={},a={},s;if(!e||typeof e.version!=="string"){H("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/")}var l=e.version.split("."),u=+l[0],c=+l[1];if(u<2||u===2&&c<6){H("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+e.version+". See momentjs.com")}function d(e){if(e>96){return e-87}else if(e>64){return e-29}return e-48}function f(e){var t=0,i=e.split("."),n=i[0],r=i[1]||"",o=1,a,s=0,l=1;if(e.charCodeAt(0)===45){t=1;l=-1}for(t;t<n.length;t++){a=d(n.charCodeAt(t));s=60*s+a}for(t=0;t<r.length;t++){o=o/60;a=d(r.charCodeAt(t));s+=a*o}return s*l}function p(e){for(var t=0;t<e.length;t++){e[t]=f(e[t])}}function h(e,t){for(var i=0;i<t;i++){e[i]=Math.round((e[i-1]||0)+e[i]*6e4)}e[t-1]=Infinity}function g(e,t){var i=[],n;for(n=0;n<t.length;n++){i[n]=e[t[n]]}return i}function m(e){var t=e.split("|"),i=t[2].split(" "),n=t[3].split(""),r=t[4].split(" ");p(i);p(n);p(r);h(r,n.length);return{name:t[0],abbrs:g(t[1].split(" "),n),offsets:g(i,n),untils:r,population:t[5]|0}}function v(e){if(e){this._set(m(e))}}function y(e,t){var i=t.length;if(e<t[0]){return 0}else if(i>1&&t[i-1]===Infinity&&e>=t[i-2]){return i-1}else if(e>=t[i-1]){return-1}var n;var r=0;var o=i-1;while(o-r>1){n=Math.floor((r+o)/2);if(t[n]<=e){r=n}else{o=n}}return o}v.prototype={_set:function(e){this.name=e.name;this.abbrs=e.abbrs;this.untils=e.untils;this.offsets=e.offsets;this.population=e.population},_index:function(e){var t=+e,i=this.untils,n;n=y(t,i);if(n>=0){return n}},countries:function(){var e=this.name;return Object.keys(r).filter((function(t){return r[t].zones.indexOf(e)!==-1}))},parse:function(e){var t=+e,i=this.offsets,n=this.untils,r=n.length-1,o,a,s,l;for(l=0;l<r;l++){o=i[l];a=i[l+1];s=i[l?l-1:l];if(o<a&&j.moveAmbiguousForward){o=a}else if(o>s&&j.moveInvalidForward){o=s}if(t<n[l]-o*6e4){return i[l]}}return i[r]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){H("zone.offset has been deprecated in favor of zone.utcOffset");return this.offsets[this._index(e)]},utcOffset:function(e){return this.offsets[this._index(e)]}};function b(e,t){this.name=e;this.zones=t}function _(e){var t=e.toTimeString();var i=t.match(/\([a-z ]+\)/i);if(i&&i[0]){i=i[0].match(/[A-Z]/g);i=i?i.join(""):undefined}else{i=t.match(/[A-Z]{3,5}/g);i=i?i[0]:undefined}if(i==="GMT"){i=undefined}this.at=+e;this.abbr=i;this.offset=e.getTimezoneOffset()}function w(e){this.zone=e;this.offsetScore=0;this.abbrScore=0}w.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.utcOffset(e.at)-e.offset);if(this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr){this.abbrScore++}};function C(e,t){var i,n;while(n=((t.at-e.at)/12e4|0)*6e4){i=new _(new Date(e.at+n));if(i.offset===e.offset){e=i}else{t=i}}return e}function A(){var e=(new Date).getFullYear()-2,t=new _(new Date(e,0,1)),i=t.offset,n=[t],r,o,a,s;for(s=1;s<48;s++){a=new Date(e,s,1).getTimezoneOffset();if(a!==i){o=new _(new Date(e,s,1));r=C(t,o);n.push(r);n.push(new _(new Date(r.at+6e4)));t=o;i=a}}for(s=0;s<4;s++){n.push(new _(new Date(e+s,0,1)));n.push(new _(new Date(e+s,6,1)))}return n}function E(e,t){if(e.offsetScore!==t.offsetScore){return e.offsetScore-t.offsetScore}if(e.abbrScore!==t.abbrScore){return e.abbrScore-t.abbrScore}if(e.zone.population!==t.zone.population){return t.zone.population-e.zone.population}return t.zone.name.localeCompare(e.zone.name)}function x(e,t){var i,n;p(t);for(i=0;i<t.length;i++){n=t[i];a[n]=a[n]||{};a[n][e]=true}}function T(e){var t=e.length,i={},n=[],r={},s,l,u,c;for(s=0;s<t;s++){u=e[s].offset;if(r.hasOwnProperty(u)){continue}c=a[u]||{};for(l in c){if(c.hasOwnProperty(l)){i[l]=true}}r[u]=true}for(s in i){if(i.hasOwnProperty(s)){n.push(o[s])}}return n}function S(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e&&e.length>3){var t=o[k(e)];if(t){return t}H("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(e){}var i=A(),n=i.length,r=T(i),a=[],s,l,u;for(l=0;l<r.length;l++){s=new w(R(r[l]),n);for(u=0;u<n;u++){s.scoreOffsetAt(i[u])}a.push(s)}a.sort(E);return a.length>0?a[0].zone.name:undefined}function D(e){if(!s||e){s=S()}return s}function k(e){return(e||"").toLowerCase().replace(/\//g,"_")}function O(e){var t,n,r,a;if(typeof e==="string"){e=[e]}for(t=0;t<e.length;t++){r=e[t].split("|");n=r[0];a=k(n);i[a]=e[t];o[a]=n;x(a,r[2].split(" "))}}function R(e,t){e=k(e);var r=i[e];var a;if(r instanceof v){return r}if(typeof r==="string"){r=new v(r);i[e]=r;return r}if(n[e]&&t!==R&&(a=R(n[e],R))){r=i[e]=new v;r._set(a);r.name=o[e];return r}return null}function N(){var e,t=[];for(e in o){if(o.hasOwnProperty(e)&&(i[e]||i[n[e]])&&o[e]){t.push(o[e])}}return t.sort()}function P(){return Object.keys(r)}function I(e){var t,i,r,a;if(typeof e==="string"){e=[e]}for(t=0;t<e.length;t++){i=e[t].split("|");r=k(i[0]);a=k(i[1]);n[r]=a;o[r]=i[0];n[a]=r;o[a]=i[1]}}function M(e){var t,i,n,o;if(!e||!e.length)return;for(t=0;t<e.length;t++){o=e[t].split("|");i=o[0].toUpperCase();n=o[1].split(" ");r[i]=new b(i,n)}}function L(e){e=e.toUpperCase();return r[e]||null}function F(e,t){e=L(e);if(!e)return null;var i=e.zones.sort();if(t){return i.map((function(e){var t=R(e);return{name:e,offset:t.utcOffset(new Date)}}))}return i}function G(e){O(e.zones);I(e.links);M(e.countries);j.dataVersion=e.version}function $(e){if(!$.didShowError){$.didShowError=true;H("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")}return!!R(e)}function W(e){var t=e._f==="X"||e._f==="x";return!!(e._a&&e._tzm===undefined&&!t)}function H(e){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(e)}}function j(t){var i=Array.prototype.slice.call(arguments,0,-1),n=arguments[arguments.length-1],r=e.utc.apply(null,i),o;if(!e.isMoment(t)&&W(r)&&(o=R(n))){r.add(o.parse(r),"minutes")}r.tz(n);return r}j.version=t;j.dataVersion="";j._zones=i;j._links=n;j._names=o;j._countries=r;j.add=O;j.link=I;j.load=G;j.zone=R;j.zoneExists=$;j.guess=D;j.names=N;j.Zone=v;j.unpack=m;j.unpackBase60=f;j.needsOffset=W;j.moveInvalidForward=true;j.moveAmbiguousForward=false;j.countries=P;j.zonesForCountry=F;var B=e.fn;e.tz=j;e.defaultZone=null;e.updateOffset=function(t,i){var n=e.defaultZone,r;if(t._z===undefined){if(n&&W(t)&&!t._isUTC&&t.isValid()){t._d=e.utc(t._a)._d;t.utc().add(n.parse(t),"minutes")}t._z=n}if(t._z){r=t._z.utcOffset(t);if(Math.abs(r)<16){r=r/60}if(t.utcOffset!==undefined){var o=t._z;t.utcOffset(-r,i);t._z=o}else{t.zone(r,i)}}};B.tz=function(t,i){if(t){if(typeof t!=="string"){throw new Error("Time zone name must be a string, got "+t+" ["+typeof t+"]")}this._z=R(t);if(this._z){e.updateOffset(this,i)}else{H("Moment Timezone has no data for "+t+". See http://momentjs.com/timezone/docs/#/data-loading/.")}return this}if(this._z){return this._z.name}};function V(e){return function(){if(this._z){return this._z.abbr(this)}return e.call(this)}}function z(e){return function(){this._z=null;return e.apply(this,arguments)}}function U(e){return function(){if(arguments.length>0)this._z=null;return e.apply(this,arguments)}}B.zoneName=V(B.zoneName);B.zoneAbbr=V(B.zoneAbbr);B.utc=z(B.utc);B.local=z(B.local);B.utcOffset=U(B.utcOffset);e.tz.setDefault=function(t){if(u<2||u===2&&c<9){H("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+e.version+".")}e.defaultZone=t?R(t):null;return e};var Y=e.momentProperties;if(Object.prototype.toString.call(Y)==="[object Array]"){Y.push("_z");Y.push("_a")}else if(Y){Y._z=null}G({version:"2024a",zones:["Africa/Abidjan|GMT|0|0||48e5","Africa/Nairobi|EAT|-30|0||47e5","Africa/Algiers|CET|-10|0||26e5","Africa/Lagos|WAT|-10|0||17e6","Africa/Khartoum|CAT|-20|0||51e5","Africa/Cairo|EET EEST|-20 -30|010101010101010|29NW0 1cL0 1cN0 1fz0 1a10 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0|15e6","Africa/Casablanca|+01 +00|-10 0|010101010101010101010101|208q0 e00 2600 gM0 2600 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0 2600 e00 2600|32e5","Europe/Paris|CET CEST|-10 -20|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|11e6","Africa/Johannesburg|SAST|-20|0||84e5","Africa/Juba|EAT CAT|-30 -20|01|24nx0|","Africa/Sao_Tome|WAT GMT|-10 0|01|1XiN0|","Africa/Tripoli|EET|-20|0||11e5","America/Adak|HST HDT|a0 90|01010101010101010101010|1XKc0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|326","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1XKb0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|30e4","America/Santo_Domingo|AST|40|0||29e5","America/Fortaleza|-03|30|0||34e5","America/Asuncion|-03 -04|30 40|01010101010101010101010|1XPD0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0|28e5","America/Panama|EST|50|0||15e5","America/Mexico_City|CST CDT|60 50|010101010|1XVk0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|20e6","America/Managua|CST|60|0||22e5","America/Caracas|-04|40|0||29e5","America/Lima|-05|50|0||11e6","America/Denver|MST MDT|70 60|01010101010101010101010|1XK90 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|26e5","America/Campo_Grande|-03 -04|30 40|01|1XBD0|77e4","America/Chicago|CST CDT|60 50|01010101010101010101010|1XK80 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|92e5","America/Chihuahua|MST MDT CST|70 60 60|010101012|1XVl0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|81e4","America/Ciudad_Juarez|MST MDT CST|70 60 60|010101012010101010101010|1XK90 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1wn0 cm0 EP0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|","America/Phoenix|MST|70|0||42e5","America/Whitehorse|PST PDT MST|80 70 70|01012|1XKa0 1zb0 Op0 1z90|23e3","America/New_York|EST EDT|50 40|01010101010101010101010|1XK70 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|21e6","America/Los_Angeles|PST PDT|80 70|01010101010101010101010|1XKa0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|15e6","America/Halifax|AST ADT|40 30|01010101010101010101010|1XK60 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|39e4","America/Godthab|-03 -02 -01|30 20 10|0101010101212121212121|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 2so0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|17e3","America/Havana|CST CDT|50 40|01010101010101010101010|1XK50 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0|21e5","America/Mazatlan|MST MDT|70 60|010101010|1XVl0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|44e4","America/Metlakatla|PST AKST AKDT|80 90 80|012121212121212121212121|1Xqy0 jB0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|14e2","America/Miquelon|-03 -02|30 20|01010101010101010101010|1XK50 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|61e2","America/Noronha|-02|20|0||30e2","America/Ojinaga|MST MDT CST CDT|70 60 60 50|01010101232323232323232|1XK90 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1wn0 Rc0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|23e3","America/Santiago|-03 -04|30 40|01010101010101010101010|1XVf0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0|62e5","America/Sao_Paulo|-02 -03|20 30|01|1XBC0|20e6","America/Scoresbysund|-01 +00 -02|10 0 20|0101010101020202020202|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 2pA0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|452","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1XK5u 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|11e4","Antarctica/Casey|+11 +08|-b0 -80|0101010101|1XME0 1kr0 12l0 1o01 14kX 1lf1 14kX 1lf1 13bX|10","Asia/Bangkok|+07|-70|0||15e6","Asia/Vladivostok|+10|-a0|0||60e4","Australia/Sydney|AEDT AEST|-b0 -a0|01010101010101010101010|1XV40 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0|40e5","Asia/Tashkent|+05|-50|0||23e5","Pacific/Auckland|NZDT NZST|-d0 -c0|01010101010101010101010|1XV20 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0|14e5","Europe/Istanbul|+03|-30|0||13e6","Antarctica/Troll|+00 +02|0 -20|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|40","Antarctica/Vostok|+07 +05|-70 -50|01|2bnv0|25","Asia/Almaty|+06 +05|-60 -50|01|2bR60|15e5","Asia/Amman|EET EEST +03|-20 -30 -30|010101012|1XRy0 1o00 11A0 1qM0 WM0 1qM0 LA0 1C00|25e5","Asia/Kamchatka|+12|-c0|0||18e4","Asia/Dubai|+04|-40|0||39e5","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1XSm0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0|22e5","Asia/Dhaka|+06|-60|0||16e6","Asia/Kuala_Lumpur|+08|-80|0||71e5","Asia/Kolkata|IST|-5u|0||15e6","Asia/Chita|+09|-90|0||33e4","Asia/Shanghai|CST|-80|0||23e6","Asia/Colombo|+0530|-5u|0||22e5","Asia/Damascus|EET EEST +03|-20 -30 -30|010101012|1XRy0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0|26e5","Europe/Athens|EET EEST|-20 -30|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|35e5","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1XRy0 1on0 11B0 1o00 11A0 1qo0 XA0 1qp0 1cN0 1cL0 1a10 1fz0 17d0 1in0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0|18e5","Asia/Hong_Kong|HKT|-80|0||73e5","Asia/Jakarta|WIB|-70|0||31e6","Asia/Jayapura|WIT|-90|0||26e4","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1XRA0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0|81e4","Asia/Kabul|+0430|-4u|0||46e5","Asia/Karachi|PKT|-50|0||24e6","Asia/Kathmandu|+0545|-5J|0||12e5","Asia/Sakhalin|+11|-b0|0||58e4","Asia/Makassar|WITA|-80|0||15e5","Asia/Manila|PST|-80|0||24e6","Asia/Seoul|KST|-90|0||23e6","Asia/Rangoon|+0630|-6u|0||48e5","Asia/Tehran|+0330 +0430|-3u -4u|010101010|1XOIu 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0|14e6","Asia/Tokyo|JST|-90|0||38e6","Atlantic/Azores|-01 +00|10 0|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|25e4","Europe/Lisbon|WET WEST|0 -10|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|27e5","Atlantic/Cape_Verde|-01|10|0||50e4","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1XV4u 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0|11e5","Australia/Brisbane|AEST|-a0|0||20e5","Australia/Darwin|ACST|-9u|0||12e4","Australia/Eucla|+0845|-8J|0||368","Australia/Lord_Howe|+11 +1030|-b0 -au|01010101010101010101010|1XV30 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1fzu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu|347","Australia/Perth|AWST|-80|0||18e5","Pacific/Easter|-05 -06|50 60|01010101010101010101010|1XVf0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0|30e2","Europe/Dublin|GMT IST|0 -10|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|12e5","Etc/GMT-1|+01|-10|0||","Pacific/Tongatapu|+13|-d0|0||75e3","Pacific/Kiritimati|+14|-e0|0||51e2","Etc/GMT-2|+02|-20|0||","Pacific/Tahiti|-10|a0|0||18e4","Pacific/Niue|-11|b0|0||12e2","Etc/GMT+12|-12|c0|0||","Pacific/Galapagos|-06|60|0||25e3","Etc/GMT+7|-07|70|0||","Pacific/Pitcairn|-08|80|0||56","Pacific/Gambier|-09|90|0||125","Etc/UTC|UTC|0|0||","Europe/London|GMT BST|0 -10|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|10e6","Europe/Chisinau|EET EEST|-20 -30|01010101010101010101010|1XSo0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|67e4","Europe/Moscow|MSK|-30|0||16e6","Europe/Volgograd|+04 MSK|-40 -30|01|249a0|10e5","Pacific/Honolulu|HST|a0|0||37e4","MET|MET MEST|-10 -20|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|","Pacific/Chatham|+1345 +1245|-dJ -cJ|01010101010101010101010|1XV20 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0|600","Pacific/Apia|+14 +13|-e0 -d0|010101|1XV20 1a00 1fA0 1a00 1fA0|37e3","Pacific/Fiji|+13 +12|-d0 -c0|010101|1Xnq0 20o0 pc0 2hc0 bc0|88e4","Pacific/Guam|ChST|-a0|0||17e4","Pacific/Marquesas|-0930|9u|0||86e2","Pacific/Pago_Pago|SST|b0|0||37e2","Pacific/Norfolk|+11 +12|-b0 -c0|0101010101010101010101|219P0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0|25e4"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Algiers|Africa/Tunis","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Khartoum|Africa/Blantyre","Africa/Khartoum|Africa/Bujumbura","Africa/Khartoum|Africa/Gaborone","Africa/Khartoum|Africa/Harare","Africa/Khartoum|Africa/Kigali","Africa/Khartoum|Africa/Lubumbashi","Africa/Khartoum|Africa/Lusaka","Africa/Khartoum|Africa/Maputo","Africa/Khartoum|Africa/Windhoek","Africa/Lagos|Africa/Bangui","Africa/Lagos|Africa/Brazzaville","Africa/Lagos|Africa/Douala","Africa/Lagos|Africa/Kinshasa","Africa/Lagos|Africa/Libreville","Africa/Lagos|Africa/Luanda","Africa/Lagos|Africa/Malabo","Africa/Lagos|Africa/Ndjamena","Africa/Lagos|Africa/Niamey","Africa/Lagos|Africa/Porto-Novo","Africa/Nairobi|Africa/Addis_Ababa","Africa/Nairobi|Africa/Asmara","Africa/Nairobi|Africa/Asmera","Africa/Nairobi|Africa/Dar_es_Salaam","Africa/Nairobi|Africa/Djibouti","Africa/Nairobi|Africa/Kampala","Africa/Nairobi|Africa/Mogadishu","Africa/Nairobi|Indian/Antananarivo","Africa/Nairobi|Indian/Comoro","Africa/Nairobi|Indian/Mayotte","Africa/Tripoli|Europe/Kaliningrad","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Campo_Grande|America/Cuiaba","America/Caracas|America/Boa_Vista","America/Caracas|America/Guyana","America/Caracas|America/La_Paz","America/Caracas|America/Manaus","America/Caracas|America/Porto_Velho","America/Caracas|Brazil/West","America/Caracas|Etc/GMT+4","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Beulah","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Denver|America/Boise","America/Denver|America/Cambridge_Bay","America/Denver|America/Edmonton","America/Denver|America/Inuvik","America/Denver|America/Shiprock","America/Denver|America/Yellowknife","America/Denver|Canada/Mountain","America/Denver|MST7MDT","America/Denver|Navajo","America/Denver|US/Mountain","America/Fortaleza|America/Araguaina","America/Fortaleza|America/Argentina/Buenos_Aires","America/Fortaleza|America/Argentina/Catamarca","America/Fortaleza|America/Argentina/ComodRivadavia","America/Fortaleza|America/Argentina/Cordoba","America/Fortaleza|America/Argentina/Jujuy","America/Fortaleza|America/Argentina/La_Rioja","America/Fortaleza|America/Argentina/Mendoza","America/Fortaleza|America/Argentina/Rio_Gallegos","America/Fortaleza|America/Argentina/Salta","America/Fortaleza|America/Argentina/San_Juan","America/Fortaleza|America/Argentina/San_Luis","America/Fortaleza|America/Argentina/Tucuman","America/Fortaleza|America/Argentina/Ushuaia","America/Fortaleza|America/Bahia","America/Fortaleza|America/Belem","America/Fortaleza|America/Buenos_Aires","America/Fortaleza|America/Catamarca","America/Fortaleza|America/Cayenne","America/Fortaleza|America/Cordoba","America/Fortaleza|America/Jujuy","America/Fortaleza|America/Maceio","America/Fortaleza|America/Mendoza","America/Fortaleza|America/Montevideo","America/Fortaleza|America/Paramaribo","America/Fortaleza|America/Punta_Arenas","America/Fortaleza|America/Recife","America/Fortaleza|America/Rosario","America/Fortaleza|America/Santarem","America/Fortaleza|Antarctica/Palmer","America/Fortaleza|Antarctica/Rothera","America/Fortaleza|Atlantic/Stanley","America/Fortaleza|Etc/GMT+3","America/Godthab|America/Nuuk","America/Halifax|America/Glace_Bay","America/Halifax|America/Goose_Bay","America/Halifax|America/Moncton","America/Halifax|America/Thule","America/Halifax|Atlantic/Bermuda","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/Lima|America/Bogota","America/Lima|America/Eirunepe","America/Lima|America/Guayaquil","America/Lima|America/Porto_Acre","America/Lima|America/Rio_Branco","America/Lima|Brazil/Acre","America/Lima|Etc/GMT+5","America/Los_Angeles|America/Ensenada","America/Los_Angeles|America/Santa_Isabel","America/Los_Angeles|America/Tijuana","America/Los_Angeles|America/Vancouver","America/Los_Angeles|Canada/Pacific","America/Los_Angeles|Mexico/BajaNorte","America/Los_Angeles|PST8PDT","America/Los_Angeles|US/Pacific","America/Managua|America/Belize","America/Managua|America/Costa_Rica","America/Managua|America/El_Salvador","America/Managua|America/Guatemala","America/Managua|America/Regina","America/Managua|America/Swift_Current","America/Managua|America/Tegucigalpa","America/Managua|Canada/Saskatchewan","America/Mazatlan|Mexico/BajaSur","America/Mexico_City|America/Bahia_Banderas","America/Mexico_City|America/Merida","America/Mexico_City|America/Monterrey","America/Mexico_City|Mexico/General","America/New_York|America/Detroit","America/New_York|America/Fort_Wayne","America/New_York|America/Grand_Turk","America/New_York|America/Indiana/Indianapolis","America/New_York|America/Indiana/Marengo","America/New_York|America/Indiana/Petersburg","America/New_York|America/Indiana/Vevay","America/New_York|America/Indiana/Vincennes","America/New_York|America/Indiana/Winamac","America/New_York|America/Indianapolis","America/New_York|America/Iqaluit","America/New_York|America/Kentucky/Louisville","America/New_York|America/Kentucky/Monticello","America/New_York|America/Louisville","America/New_York|America/Montreal","America/New_York|America/Nassau","America/New_York|America/Nipigon","America/New_York|America/Pangnirtung","America/New_York|America/Port-au-Prince","America/New_York|America/Thunder_Bay","America/New_York|America/Toronto","America/New_York|Canada/Eastern","America/New_York|EST5EDT","America/New_York|US/East-Indiana","America/New_York|US/Eastern","America/New_York|US/Michigan","America/Noronha|Atlantic/South_Georgia","America/Noronha|Brazil/DeNoronha","America/Noronha|Etc/GMT+2","America/Panama|America/Atikokan","America/Panama|America/Cancun","America/Panama|America/Cayman","America/Panama|America/Coral_Harbour","America/Panama|America/Jamaica","America/Panama|EST","America/Panama|Jamaica","America/Phoenix|America/Creston","America/Phoenix|America/Dawson_Creek","America/Phoenix|America/Fort_Nelson","America/Phoenix|America/Hermosillo","America/Phoenix|MST","America/Phoenix|US/Arizona","America/Santiago|Chile/Continental","America/Santo_Domingo|America/Anguilla","America/Santo_Domingo|America/Antigua","America/Santo_Domingo|America/Aruba","America/Santo_Domingo|America/Barbados","America/Santo_Domingo|America/Blanc-Sablon","America/Santo_Domingo|America/Curacao","America/Santo_Domingo|America/Dominica","America/Santo_Domingo|America/Grenada","America/Santo_Domingo|America/Guadeloupe","America/Santo_Domingo|America/Kralendijk","America/Santo_Domingo|America/Lower_Princes","America/Santo_Domingo|America/Marigot","America/Santo_Domingo|America/Martinique","America/Santo_Domingo|America/Montserrat","America/Santo_Domingo|America/Port_of_Spain","America/Santo_Domingo|America/Puerto_Rico","America/Santo_Domingo|America/St_Barthelemy","America/Santo_Domingo|America/St_Kitts","America/Santo_Domingo|America/St_Lucia","America/Santo_Domingo|America/St_Thomas","America/Santo_Domingo|America/St_Vincent","America/Santo_Domingo|America/Tortola","America/Santo_Domingo|America/Virgin","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","America/Whitehorse|America/Dawson","America/Whitehorse|Canada/Yukon","Asia/Almaty|Asia/Qostanay","Asia/Bangkok|Antarctica/Davis","Asia/Bangkok|Asia/Barnaul","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Hovd","Asia/Bangkok|Asia/Krasnoyarsk","Asia/Bangkok|Asia/Novokuznetsk","Asia/Bangkok|Asia/Novosibirsk","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Tomsk","Asia/Bangkok|Asia/Vientiane","Asia/Bangkok|Etc/GMT-7","Asia/Bangkok|Indian/Christmas","Asia/Chita|Asia/Dili","Asia/Chita|Asia/Khandyga","Asia/Chita|Asia/Yakutsk","Asia/Chita|Etc/GMT-9","Asia/Chita|Pacific/Palau","Asia/Dhaka|Asia/Bishkek","Asia/Dhaka|Asia/Dacca","Asia/Dhaka|Asia/Kashgar","Asia/Dhaka|Asia/Omsk","Asia/Dhaka|Asia/Thimbu","Asia/Dhaka|Asia/Thimphu","Asia/Dhaka|Asia/Urumqi","Asia/Dhaka|Etc/GMT-6","Asia/Dhaka|Indian/Chagos","Asia/Dubai|Asia/Baku","Asia/Dubai|Asia/Muscat","Asia/Dubai|Asia/Tbilisi","Asia/Dubai|Asia/Yerevan","Asia/Dubai|Etc/GMT-4","Asia/Dubai|Europe/Astrakhan","Asia/Dubai|Europe/Samara","Asia/Dubai|Europe/Saratov","Asia/Dubai|Europe/Ulyanovsk","Asia/Dubai|Indian/Mahe","Asia/Dubai|Indian/Mauritius","Asia/Dubai|Indian/Reunion","Asia/Gaza|Asia/Hebron","Asia/Hong_Kong|Hongkong","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kamchatka|Asia/Anadyr","Asia/Kamchatka|Etc/GMT-12","Asia/Kamchatka|Kwajalein","Asia/Kamchatka|Pacific/Funafuti","Asia/Kamchatka|Pacific/Kwajalein","Asia/Kamchatka|Pacific/Majuro","Asia/Kamchatka|Pacific/Nauru","Asia/Kamchatka|Pacific/Tarawa","Asia/Kamchatka|Pacific/Wake","Asia/Kamchatka|Pacific/Wallis","Asia/Kathmandu|Asia/Katmandu","Asia/Kolkata|Asia/Calcutta","Asia/Kuala_Lumpur|Asia/Brunei","Asia/Kuala_Lumpur|Asia/Choibalsan","Asia/Kuala_Lumpur|Asia/Irkutsk","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Kuala_Lumpur|Asia/Singapore","Asia/Kuala_Lumpur|Asia/Ulaanbaatar","Asia/Kuala_Lumpur|Asia/Ulan_Bator","Asia/Kuala_Lumpur|Etc/GMT-8","Asia/Kuala_Lumpur|Singapore","Asia/Makassar|Asia/Ujung_Pandang","Asia/Rangoon|Asia/Yangon","Asia/Rangoon|Indian/Cocos","Asia/Sakhalin|Asia/Magadan","Asia/Sakhalin|Asia/Srednekolymsk","Asia/Sakhalin|Etc/GMT-11","Asia/Sakhalin|Pacific/Bougainville","Asia/Sakhalin|Pacific/Efate","Asia/Sakhalin|Pacific/Guadalcanal","Asia/Sakhalin|Pacific/Kosrae","Asia/Sakhalin|Pacific/Noumea","Asia/Sakhalin|Pacific/Pohnpei","Asia/Sakhalin|Pacific/Ponape","Asia/Seoul|Asia/Pyongyang","Asia/Seoul|ROK","Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|Asia/Macao","Asia/Shanghai|Asia/Macau","Asia/Shanghai|Asia/Taipei","Asia/Shanghai|PRC","Asia/Shanghai|ROC","Asia/Tashkent|Antarctica/Mawson","Asia/Tashkent|Asia/Aqtau","Asia/Tashkent|Asia/Aqtobe","Asia/Tashkent|Asia/Ashgabat","Asia/Tashkent|Asia/Ashkhabad","Asia/Tashkent|Asia/Atyrau","Asia/Tashkent|Asia/Dushanbe","Asia/Tashkent|Asia/Oral","Asia/Tashkent|Asia/Qyzylorda","Asia/Tashkent|Asia/Samarkand","Asia/Tashkent|Asia/Yekaterinburg","Asia/Tashkent|Etc/GMT-5","Asia/Tashkent|Indian/Kerguelen","Asia/Tashkent|Indian/Maldives","Asia/Tehran|Iran","Asia/Tokyo|Japan","Asia/Vladivostok|Antarctica/DumontDUrville","Asia/Vladivostok|Asia/Ust-Nera","Asia/Vladivostok|Etc/GMT-10","Asia/Vladivostok|Pacific/Chuuk","Asia/Vladivostok|Pacific/Port_Moresby","Asia/Vladivostok|Pacific/Truk","Asia/Vladivostok|Pacific/Yap","Atlantic/Cape_Verde|Etc/GMT+1","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/Lord_Howe|Australia/LHI","Australia/Perth|Australia/West","Australia/Sydney|Antarctica/Macquarie","Australia/Sydney|Australia/ACT","Australia/Sydney|Australia/Canberra","Australia/Sydney|Australia/Currie","Australia/Sydney|Australia/Hobart","Australia/Sydney|Australia/Melbourne","Australia/Sydney|Australia/NSW","Australia/Sydney|Australia/Tasmania","Australia/Sydney|Australia/Victoria","Etc/UTC|Etc/UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UCT","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Athens|Asia/Famagusta","Europe/Athens|Asia/Nicosia","Europe/Athens|EET","Europe/Athens|Europe/Bucharest","Europe/Athens|Europe/Helsinki","Europe/Athens|Europe/Kiev","Europe/Athens|Europe/Kyiv","Europe/Athens|Europe/Mariehamn","Europe/Athens|Europe/Nicosia","Europe/Athens|Europe/Riga","Europe/Athens|Europe/Sofia","Europe/Athens|Europe/Tallinn","Europe/Athens|Europe/Uzhgorod","Europe/Athens|Europe/Vilnius","Europe/Athens|Europe/Zaporozhye","Europe/Chisinau|Europe/Tiraspol","Europe/Dublin|Eire","Europe/Istanbul|Antarctica/Syowa","Europe/Istanbul|Asia/Aden","Europe/Istanbul|Asia/Baghdad","Europe/Istanbul|Asia/Bahrain","Europe/Istanbul|Asia/Istanbul","Europe/Istanbul|Asia/Kuwait","Europe/Istanbul|Asia/Qatar","Europe/Istanbul|Asia/Riyadh","Europe/Istanbul|Etc/GMT-3","Europe/Istanbul|Europe/Minsk","Europe/Istanbul|Turkey","Europe/Lisbon|Atlantic/Canary","Europe/Lisbon|Atlantic/Faeroe","Europe/Lisbon|Atlantic/Faroe","Europe/Lisbon|Atlantic/Madeira","Europe/Lisbon|Portugal","Europe/Lisbon|WET","Europe/London|Europe/Belfast","Europe/London|Europe/Guernsey","Europe/London|Europe/Isle_of_Man","Europe/London|Europe/Jersey","Europe/London|GB","Europe/London|GB-Eire","Europe/Moscow|Europe/Kirov","Europe/Moscow|Europe/Simferopol","Europe/Moscow|W-SU","Europe/Paris|Africa/Ceuta","Europe/Paris|Arctic/Longyearbyen","Europe/Paris|Atlantic/Jan_Mayen","Europe/Paris|CET","Europe/Paris|Europe/Amsterdam","Europe/Paris|Europe/Andorra","Europe/Paris|Europe/Belgrade","Europe/Paris|Europe/Berlin","Europe/Paris|Europe/Bratislava","Europe/Paris|Europe/Brussels","Europe/Paris|Europe/Budapest","Europe/Paris|Europe/Busingen","Europe/Paris|Europe/Copenhagen","Europe/Paris|Europe/Gibraltar","Europe/Paris|Europe/Ljubljana","Europe/Paris|Europe/Luxembourg","Europe/Paris|Europe/Madrid","Europe/Paris|Europe/Malta","Europe/Paris|Europe/Monaco","Europe/Paris|Europe/Oslo","Europe/Paris|Europe/Podgorica","Europe/Paris|Europe/Prague","Europe/Paris|Europe/Rome","Europe/Paris|Europe/San_Marino","Europe/Paris|Europe/Sarajevo","Europe/Paris|Europe/Skopje","Europe/Paris|Europe/Stockholm","Europe/Paris|Europe/Tirane","Europe/Paris|Europe/Vaduz","Europe/Paris|Europe/Vatican","Europe/Paris|Europe/Vienna","Europe/Paris|Europe/Warsaw","Europe/Paris|Europe/Zagreb","Europe/Paris|Europe/Zurich","Europe/Paris|Poland","Pacific/Auckland|Antarctica/McMurdo","Pacific/Auckland|Antarctica/South_Pole","Pacific/Auckland|NZ","Pacific/Chatham|NZ-CHAT","Pacific/Easter|Chile/EasterIsland","Pacific/Galapagos|Etc/GMT+6","Pacific/Gambier|Etc/GMT+9","Pacific/Guam|Pacific/Saipan","Pacific/Honolulu|HST","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Kiritimati|Etc/GMT-14","Pacific/Niue|Etc/GMT+11","Pacific/Pago_Pago|Pacific/Midway","Pacific/Pago_Pago|Pacific/Samoa","Pacific/Pago_Pago|US/Samoa","Pacific/Pitcairn|Etc/GMT+8","Pacific/Tahiti|Etc/GMT+10","Pacific/Tahiti|Pacific/Rarotonga","Pacific/Tongatapu|Etc/GMT-13","Pacific/Tongatapu|Pacific/Enderbury","Pacific/Tongatapu|Pacific/Fakaofo","Pacific/Tongatapu|Pacific/Kanton"],countries:["AD|Europe/Andorra","AE|Asia/Dubai","AF|Asia/Kabul","AG|America/Puerto_Rico America/Antigua","AI|America/Puerto_Rico America/Anguilla","AL|Europe/Tirane","AM|Asia/Yerevan","AO|Africa/Lagos Africa/Luanda","AQ|Antarctica/Casey Antarctica/Davis Antarctica/Mawson Antarctica/Palmer Antarctica/Rothera Antarctica/Troll Antarctica/Vostok Pacific/Auckland Pacific/Port_Moresby Asia/Riyadh Antarctica/McMurdo Antarctica/DumontDUrville Antarctica/Syowa","AR|America/Argentina/Buenos_Aires America/Argentina/Cordoba America/Argentina/Salta America/Argentina/Jujuy America/Argentina/Tucuman America/Argentina/Catamarca America/Argentina/La_Rioja America/Argentina/San_Juan America/Argentina/Mendoza America/Argentina/San_Luis America/Argentina/Rio_Gallegos America/Argentina/Ushuaia","AS|Pacific/Pago_Pago","AT|Europe/Vienna","AU|Australia/Lord_Howe Antarctica/Macquarie Australia/Hobart Australia/Melbourne Australia/Sydney Australia/Broken_Hill Australia/Brisbane Australia/Lindeman Australia/Adelaide Australia/Darwin Australia/Perth Australia/Eucla","AW|America/Puerto_Rico America/Aruba","AX|Europe/Helsinki Europe/Mariehamn","AZ|Asia/Baku","BA|Europe/Belgrade Europe/Sarajevo","BB|America/Barbados","BD|Asia/Dhaka","BE|Europe/Brussels","BF|Africa/Abidjan Africa/Ouagadougou","BG|Europe/Sofia","BH|Asia/Qatar Asia/Bahrain","BI|Africa/Maputo Africa/Bujumbura","BJ|Africa/Lagos Africa/Porto-Novo","BL|America/Puerto_Rico America/St_Barthelemy","BM|Atlantic/Bermuda","BN|Asia/Kuching Asia/Brunei","BO|America/La_Paz","BQ|America/Puerto_Rico America/Kralendijk","BR|America/Noronha America/Belem America/Fortaleza America/Recife America/Araguaina America/Maceio America/Bahia America/Sao_Paulo America/Campo_Grande America/Cuiaba America/Santarem America/Porto_Velho America/Boa_Vista America/Manaus America/Eirunepe America/Rio_Branco","BS|America/Toronto America/Nassau","BT|Asia/Thimphu","BW|Africa/Maputo Africa/Gaborone","BY|Europe/Minsk","BZ|America/Belize","CA|America/St_Johns America/Halifax America/Glace_Bay America/Moncton America/Goose_Bay America/Toronto America/Iqaluit America/Winnipeg America/Resolute America/Rankin_Inlet America/Regina America/Swift_Current America/Edmonton America/Cambridge_Bay America/Inuvik America/Dawson_Creek America/Fort_Nelson America/Whitehorse America/Dawson America/Vancouver America/Panama America/Puerto_Rico America/Phoenix America/Blanc-Sablon America/Atikokan America/Creston","CC|Asia/Yangon Indian/Cocos","CD|Africa/Maputo Africa/Lagos Africa/Kinshasa Africa/Lubumbashi","CF|Africa/Lagos Africa/Bangui","CG|Africa/Lagos Africa/Brazzaville","CH|Europe/Zurich","CI|Africa/Abidjan","CK|Pacific/Rarotonga","CL|America/Santiago America/Punta_Arenas Pacific/Easter","CM|Africa/Lagos Africa/Douala","CN|Asia/Shanghai Asia/Urumqi","CO|America/Bogota","CR|America/Costa_Rica","CU|America/Havana","CV|Atlantic/Cape_Verde","CW|America/Puerto_Rico America/Curacao","CX|Asia/Bangkok Indian/Christmas","CY|Asia/Nicosia Asia/Famagusta","CZ|Europe/Prague","DE|Europe/Zurich Europe/Berlin Europe/Busingen","DJ|Africa/Nairobi Africa/Djibouti","DK|Europe/Berlin Europe/Copenhagen","DM|America/Puerto_Rico America/Dominica","DO|America/Santo_Domingo","DZ|Africa/Algiers","EC|America/Guayaquil Pacific/Galapagos","EE|Europe/Tallinn","EG|Africa/Cairo","EH|Africa/El_Aaiun","ER|Africa/Nairobi Africa/Asmara","ES|Europe/Madrid Africa/Ceuta Atlantic/Canary","ET|Africa/Nairobi Africa/Addis_Ababa","FI|Europe/Helsinki","FJ|Pacific/Fiji","FK|Atlantic/Stanley","FM|Pacific/Kosrae Pacific/Port_Moresby Pacific/Guadalcanal Pacific/Chuuk Pacific/Pohnpei","FO|Atlantic/Faroe","FR|Europe/Paris","GA|Africa/Lagos Africa/Libreville","GB|Europe/London","GD|America/Puerto_Rico America/Grenada","GE|Asia/Tbilisi","GF|America/Cayenne","GG|Europe/London Europe/Guernsey","GH|Africa/Abidjan Africa/Accra","GI|Europe/Gibraltar","GL|America/Nuuk America/Danmarkshavn America/Scoresbysund America/Thule","GM|Africa/Abidjan Africa/Banjul","GN|Africa/Abidjan Africa/Conakry","GP|America/Puerto_Rico America/Guadeloupe","GQ|Africa/Lagos Africa/Malabo","GR|Europe/Athens","GS|Atlantic/South_Georgia","GT|America/Guatemala","GU|Pacific/Guam","GW|Africa/Bissau","GY|America/Guyana","HK|Asia/Hong_Kong","HN|America/Tegucigalpa","HR|Europe/Belgrade Europe/Zagreb","HT|America/Port-au-Prince","HU|Europe/Budapest","ID|Asia/Jakarta Asia/Pontianak Asia/Makassar Asia/Jayapura","IE|Europe/Dublin","IL|Asia/Jerusalem","IM|Europe/London Europe/Isle_of_Man","IN|Asia/Kolkata","IO|Indian/Chagos","IQ|Asia/Baghdad","IR|Asia/Tehran","IS|Africa/Abidjan Atlantic/Reykjavik","IT|Europe/Rome","JE|Europe/London Europe/Jersey","JM|America/Jamaica","JO|Asia/Amman","JP|Asia/Tokyo","KE|Africa/Nairobi","KG|Asia/Bishkek","KH|Asia/Bangkok Asia/Phnom_Penh","KI|Pacific/Tarawa Pacific/Kanton Pacific/Kiritimati","KM|Africa/Nairobi Indian/Comoro","KN|America/Puerto_Rico America/St_Kitts","KP|Asia/Pyongyang","KR|Asia/Seoul","KW|Asia/Riyadh Asia/Kuwait","KY|America/Panama America/Cayman","KZ|Asia/Almaty Asia/Qyzylorda Asia/Qostanay Asia/Aqtobe Asia/Aqtau Asia/Atyrau Asia/Oral","LA|Asia/Bangkok Asia/Vientiane","LB|Asia/Beirut","LC|America/Puerto_Rico America/St_Lucia","LI|Europe/Zurich Europe/Vaduz","LK|Asia/Colombo","LR|Africa/Monrovia","LS|Africa/Johannesburg Africa/Maseru","LT|Europe/Vilnius","LU|Europe/Brussels Europe/Luxembourg","LV|Europe/Riga","LY|Africa/Tripoli","MA|Africa/Casablanca","MC|Europe/Paris Europe/Monaco","MD|Europe/Chisinau","ME|Europe/Belgrade Europe/Podgorica","MF|America/Puerto_Rico America/Marigot","MG|Africa/Nairobi Indian/Antananarivo","MH|Pacific/Tarawa Pacific/Kwajalein Pacific/Majuro","MK|Europe/Belgrade Europe/Skopje","ML|Africa/Abidjan Africa/Bamako","MM|Asia/Yangon","MN|Asia/Ulaanbaatar Asia/Hovd Asia/Choibalsan","MO|Asia/Macau","MP|Pacific/Guam Pacific/Saipan","MQ|America/Martinique","MR|Africa/Abidjan Africa/Nouakchott","MS|America/Puerto_Rico America/Montserrat","MT|Europe/Malta","MU|Indian/Mauritius","MV|Indian/Maldives","MW|Africa/Maputo Africa/Blantyre","MX|America/Mexico_City America/Cancun America/Merida America/Monterrey America/Matamoros America/Chihuahua America/Ciudad_Juarez America/Ojinaga America/Mazatlan America/Bahia_Banderas America/Hermosillo America/Tijuana","MY|Asia/Kuching Asia/Singapore Asia/Kuala_Lumpur","MZ|Africa/Maputo","NA|Africa/Windhoek","NC|Pacific/Noumea","NE|Africa/Lagos Africa/Niamey","NF|Pacific/Norfolk","NG|Africa/Lagos","NI|America/Managua","NL|Europe/Brussels Europe/Amsterdam","NO|Europe/Berlin Europe/Oslo","NP|Asia/Kathmandu","NR|Pacific/Nauru","NU|Pacific/Niue","NZ|Pacific/Auckland Pacific/Chatham","OM|Asia/Dubai Asia/Muscat","PA|America/Panama","PE|America/Lima","PF|Pacific/Tahiti Pacific/Marquesas Pacific/Gambier","PG|Pacific/Port_Moresby Pacific/Bougainville","PH|Asia/Manila","PK|Asia/Karachi","PL|Europe/Warsaw","PM|America/Miquelon","PN|Pacific/Pitcairn","PR|America/Puerto_Rico","PS|Asia/Gaza Asia/Hebron","PT|Europe/Lisbon Atlantic/Madeira Atlantic/Azores","PW|Pacific/Palau","PY|America/Asuncion","QA|Asia/Qatar","RE|Asia/Dubai Indian/Reunion","RO|Europe/Bucharest","RS|Europe/Belgrade","RU|Europe/Kaliningrad Europe/Moscow Europe/Simferopol Europe/Kirov Europe/Volgograd Europe/Astrakhan Europe/Saratov Europe/Ulyanovsk Europe/Samara Asia/Yekaterinburg Asia/Omsk Asia/Novosibirsk Asia/Barnaul Asia/Tomsk Asia/Novokuznetsk Asia/Krasnoyarsk Asia/Irkutsk Asia/Chita Asia/Yakutsk Asia/Khandyga Asia/Vladivostok Asia/Ust-Nera Asia/Magadan Asia/Sakhalin Asia/Srednekolymsk Asia/Kamchatka Asia/Anadyr","RW|Africa/Maputo Africa/Kigali","SA|Asia/Riyadh","SB|Pacific/Guadalcanal","SC|Asia/Dubai Indian/Mahe","SD|Africa/Khartoum","SE|Europe/Berlin Europe/Stockholm","SG|Asia/Singapore","SH|Africa/Abidjan Atlantic/St_Helena","SI|Europe/Belgrade Europe/Ljubljana","SJ|Europe/Berlin Arctic/Longyearbyen","SK|Europe/Prague Europe/Bratislava","SL|Africa/Abidjan Africa/Freetown","SM|Europe/Rome Europe/San_Marino","SN|Africa/Abidjan Africa/Dakar","SO|Africa/Nairobi Africa/Mogadishu","SR|America/Paramaribo","SS|Africa/Juba","ST|Africa/Sao_Tome","SV|America/El_Salvador","SX|America/Puerto_Rico America/Lower_Princes","SY|Asia/Damascus","SZ|Africa/Johannesburg Africa/Mbabane","TC|America/Grand_Turk","TD|Africa/Ndjamena","TF|Asia/Dubai Indian/Maldives Indian/Kerguelen","TG|Africa/Abidjan Africa/Lome","TH|Asia/Bangkok","TJ|Asia/Dushanbe","TK|Pacific/Fakaofo","TL|Asia/Dili","TM|Asia/Ashgabat","TN|Africa/Tunis","TO|Pacific/Tongatapu","TR|Europe/Istanbul","TT|America/Puerto_Rico America/Port_of_Spain","TV|Pacific/Tarawa Pacific/Funafuti","TW|Asia/Taipei","TZ|Africa/Nairobi Africa/Dar_es_Salaam","UA|Europe/Simferopol Europe/Kyiv","UG|Africa/Nairobi Africa/Kampala","UM|Pacific/Pago_Pago Pacific/Tarawa Pacific/Midway Pacific/Wake","US|America/New_York America/Detroit America/Kentucky/Louisville America/Kentucky/Monticello America/Indiana/Indianapolis America/Indiana/Vincennes America/Indiana/Winamac America/Indiana/Marengo America/Indiana/Petersburg America/Indiana/Vevay America/Chicago America/Indiana/Tell_City America/Indiana/Knox America/Menominee America/North_Dakota/Center America/North_Dakota/New_Salem America/North_Dakota/Beulah America/Denver America/Boise America/Phoenix America/Los_Angeles America/Anchorage America/Juneau America/Sitka America/Metlakatla America/Yakutat America/Nome America/Adak Pacific/Honolulu","UY|America/Montevideo","UZ|Asia/Samarkand Asia/Tashkent","VA|Europe/Rome Europe/Vatican","VC|America/Puerto_Rico America/St_Vincent","VE|America/Caracas","VG|America/Puerto_Rico America/Tortola","VI|America/Puerto_Rico America/St_Thomas","VN|Asia/Bangkok Asia/Ho_Chi_Minh","VU|Pacific/Efate","WF|Pacific/Tarawa Pacific/Wallis","WS|Pacific/Apia","YE|Asia/Riyadh Asia/Aden","YT|Africa/Nairobi Indian/Mayotte","ZA|Africa/Johannesburg","ZM|Africa/Maputo Africa/Lusaka","ZW|Africa/Maputo Africa/Harare"]});return e}));(function(e){if(typeof define=="function"&&define.amd)define("picker",["jquery"],e);else if(typeof exports=="object")module.exports=e(require("jquery"));else this.Picker=e(jQuery)})((function(e){var t=e(window);var i=e(document);var n=e(document.documentElement);var r=document.documentElement.style.transition!=null;function o(t,u,c,f){if(!t)return o;var p=false,h={id:t.id||"P"+Math.abs(~~(Math.random()*new Date))},g=c?e.extend(true,{},c.defaults,f):f||{},m=e.extend({},o.klasses(),g.klass),v=e(t),y=function(){return this.start()},b=y.prototype={constructor:y,$node:v,start:function(){if(h&&h.start)return b;h.methods={};h.start=true;h.open=false;h.type=t.type;t.autofocus=t==d();t.readOnly=!g.editable;t.id=t.id||h.id;if(t.type!="text"){t.type="text"}b.component=new c(b,g);b.$root=e('<div class="'+m.picker+'" id="'+t.id+'_root" />');C();b.$holder=e(_()).appendTo(b.$root);A();if(g.formatSubmit){E()}w();if(g.containerHidden)e(g.containerHidden).append(b._hidden);else v.after(b._hidden);if(g.container)e(g.container).append(b.$root);else v.after(b.$root);b.on({start:b.component.onStart,render:b.component.onRender,stop:b.component.onStop,open:b.component.onOpen,close:b.component.onClose,set:b.component.onSet}).on({start:g.onStart,render:g.onRender,stop:g.onStop,open:g.onOpen,close:g.onClose,set:g.onSet});p=a(b.$holder[0]);if(t.autofocus){b.open()}return b.trigger("start").trigger("render")},render:function(t){if(t){b.$holder=e(_());A();b.$root.html(b.$holder)}else b.$root.find("."+m.box).html(b.component.nodes(h.open));return b.trigger("render")},stop:function(){if(!h.start)return b;b.close();if(b._hidden){b._hidden.parentNode.removeChild(b._hidden)}b.$root.remove();v.removeClass(m.input).removeData(u);setTimeout((function(){v.off("."+h.id)}),0);t.type=h.type;t.readOnly=false;b.trigger("stop");h.methods={};h.start=false;return b},open:function(r){if(h.open)return b;v.addClass(m.active);l(t,"expanded",true);setTimeout((function(){b.$root.addClass(m.opened);l(b.$root[0],"hidden",false)}),0);if(r!==false){h.open=true;if(p){n.css("overflow","hidden").css("padding-right","+="+s())}x();i.on("click."+h.id+" focusin."+h.id,(function(e){var i=e.target;if(i!=t&&i!=document&&e.which!=3){b.close(i===b.$holder[0])}})).on("keydown."+h.id,(function(t){var i=t.keyCode,n=b.component.key[i],r=t.target;if(i==27){b.close(true)}else if(r==b.$holder[0]&&(n||i==13)){t.preventDefault();if(n){o._.trigger(b.component.key.go,b,[o._.trigger(n)])}else if(!b.$root.find("."+m.highlighted).hasClass(m.disabled)){b.set("select",b.component.item.highlight);if(g.closeOnSelect){b.close(true)}}}else if(e.contains(b.$root[0],r)&&i==13){t.preventDefault();r.click()}}))}return b.trigger("open")},close:function(e){if(e){if(g.editable){t.focus()}else{b.$holder.off("focus.toOpen").focus();setTimeout((function(){b.$holder.on("focus.toOpen",T)}),0)}}v.removeClass(m.active);l(t,"expanded",false);setTimeout((function(){b.$root.removeClass(m.opened+" "+m.focused);l(b.$root[0],"hidden",true)}),0);if(!h.open)return b;h.open=false;if(p){n.css("overflow","").css("padding-right","-="+s())}i.off("."+h.id);return b.trigger("close")},clear:function(e){return b.set("clear",null,e)},set:function(t,i,n){var r,o,a=e.isPlainObject(t),s=a?t:{};n=a&&e.isPlainObject(i)?i:n||{};if(t){if(!a){s[t]=i}for(r in s){o=s[r];if(r in b.component.item){if(o===undefined)o=null;b.component.set(r,o,n)}if(r=="select"||r=="clear"){v.val(r=="clear"?"":b.get(r,g.format)).trigger("change")}}b.render()}return n.muted?b:b.trigger("set",s)},get:function(e,i){e=e||"value";if(h[e]!=null){return h[e]}if(e=="valueSubmit"){if(b._hidden){return b._hidden.value}e="value"}if(e=="value"){return t.value}if(e in b.component.item){if(typeof i=="string"){var n=b.component.get(e);return n?o._.trigger(b.component.formats.toString,b.component,[i,n]):""}return b.component.get(e)}},on:function(t,i,n){var r,o,a=e.isPlainObject(t),s=a?t:{};if(t){if(!a){s[t]=i}for(r in s){o=s[r];if(n){r="_"+r}h.methods[r]=h.methods[r]||[];h.methods[r].push(o)}}return b},off:function(){var e,t,i=arguments;for(e=0,namesCount=i.length;e<namesCount;e+=1){t=i[e];if(t in h.methods){delete h.methods[t]}}return b},trigger:function(e,t){var i=function(e){var i=h.methods[e];if(i){i.map((function(e){o._.trigger(e,b,[t])}))}};i("_"+e);i(e);return b}};function _(){return o._.node("div",o._.node("div",o._.node("div",o._.node("div",b.component.nodes(h.open),m.box),m.wrap),m.frame),m.holder,'tabindex="-1"')}function w(){v.data(u,b).addClass(m.input).val(v.data("value")?b.get("select",g.format):t.value);if(!g.editable){v.on("focus."+h.id+" click."+h.id,(function(e){e.preventDefault();b.open()})).on("keydown."+h.id,S)}l(t,{haspopup:true,expanded:false,readonly:false,owns:t.id+"_root"})}function C(){l(b.$root[0],"hidden",true)}function A(){b.$holder.on({keydown:S,"focus.toOpen":T,blur:function(){v.removeClass(m.target)},focusin:function(e){b.$root.removeClass(m.focused);e.stopPropagation()},"mousedown click":function(t){var i=t.target;if(i!=b.$holder[0]){t.stopPropagation();if(t.type=="mousedown"&&!e(i).is("input, select, textarea, button, option")){t.preventDefault();b.$holder[0].focus()}}}}).on("click","[data-pick], [data-nav], [data-clear], [data-close]",(function(){var t=e(this),i=t.data(),n=t.hasClass(m.navDisabled)||t.hasClass(m.disabled),r=d();r=r&&(r.type||r.href);if(n||r&&!e.contains(b.$root[0],r)){b.$holder[0].focus()}if(!n&&i.nav){b.set("highlight",b.component.item.highlight,{nav:i.nav})}else if(!n&&"pick"in i){b.set("select",i.pick);if(g.closeOnSelect){b.close(true)}}else if(i.clear){b.clear();if(g.closeOnClear){b.close(true)}}else if(i.close){b.close(true)}}))}function E(){var i;if(g.hiddenName===true){i=t.name;t.name=""}else{i=[typeof g.hiddenPrefix=="string"?g.hiddenPrefix:"",typeof g.hiddenSuffix=="string"?g.hiddenSuffix:"_submit"];i=i[0]+t.name+i[1]}b._hidden=e("<input "+"type=hidden "+'name="'+i+'"'+(v.data("value")||t.value?' value="'+b.get("select",g.formatSubmit)+'"':"")+">")[0];v.on("change."+h.id,(function(){b._hidden.value=t.value?b.get("select",g.formatSubmit):""}))}function x(){if(p&&r){b.$holder.find("."+m.frame).one("transitionend",(function(){b.$holder[0].focus()}))}else{b.$holder[0].focus()}}function T(e){e.stopPropagation();v.addClass(m.target);b.$root.addClass(m.focused);b.open()}function S(e){var t=e.keyCode,i=/^(8|46)$/.test(t);if(t==27){b.close(true);return false}if(t==32||i||!h.open&&b.component.key[t]){e.preventDefault();e.stopPropagation();if(i){b.clear().close()}else{b.open()}}}return new y}o.klasses=function(e){e=e||"picker";return{picker:e,opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",target:e+"__input--target",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}};function a(e){var t,i="position";if(e.currentStyle){t=e.currentStyle[i]}else if(window.getComputedStyle){t=getComputedStyle(e)[i]}return t=="fixed"}function s(){if(n.height()<=t.height()){return 0}var i=e('<div style="visibility:hidden;width:100px" />').appendTo("body");var r=i[0].offsetWidth;i.css("overflow","scroll");var o=e('<div style="width:100%" />').appendTo(i);var a=o[0].offsetWidth;i.remove();return r-a}o._={group:function(e){var t,i="",n=o._.trigger(e.min,e);for(;n<=o._.trigger(e.max,e,[n]);n+=e.i){t=o._.trigger(e.item,e,[n]);i+=o._.node(e.node,t[0],t[1],t[2])}return i},node:function(t,i,n,r){if(!i)return"";i=e.isArray(i)?i.join(""):i;n=n?' class="'+n+'"':"";r=r?" "+r:"";return"<"+t+n+r+">"+i+"</"+t+">"},lead:function(e){return(e<10?"0":"")+e},trigger:function(e,t,i){return typeof e=="function"?e.apply(t,i||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isDate:function(e){return{}.toString.call(e).indexOf("Date")>-1&&this.isInteger(e.getDate())},isInteger:function(e){return{}.toString.call(e).indexOf("Number")>-1&&e%1===0},ariaAttr:c};o.extend=function(t,i){e.fn[t]=function(n,r){var a=this.data(t);if(n=="picker"){return a}if(a&&typeof n=="string"){return o._.trigger(a[n],a,[r])}return this.each((function(){var r=e(this);if(!r.data(t)){new o(this,t,i,n)}}))};e.fn[t].defaults=i.defaults};function l(t,i,n){if(e.isPlainObject(i)){for(var r in i){u(t,r,i[r])}}else{u(t,i,n)}}function u(e,t,i){e.setAttribute((t=="role"?"":"aria-")+t,i)}function c(t,i){if(!e.isPlainObject(t)){t={attribute:i}}i="";for(var n in t){var r=(n=="role"?"":"aria-")+n,o=t[n];i+=o==null?"":r+'="'+t[n]+'"'}return i}function d(){try{return document.activeElement}catch(e){}}return o}));(function(e){if(typeof define=="function"&&define.amd)define(["picker","jquery"],e);else if(typeof exports=="object")module.exports=e(require("./picker.js"),require("jquery"));else e(Picker,jQuery)})((function(e,t){var i=7,n=6,r=e._;function o(e,t){var i=this,n=e.$node[0],r=n.value,o=e.$node.data("value"),a=o||r,s=o?t.formatSubmit:t.format,l=function(){return n.currentStyle?n.currentStyle.direction=="rtl":getComputedStyle(e.$root[0]).direction=="rtl"};i.settings=t;i.$node=e.$node;i.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"};i.item={};i.item.clear=null;i.item.disable=(t.disable||[]).slice(0);i.item.enable=-function(e){return e[0]===true?e.shift():-1}(i.item.disable);i.set("min",t.min).set("max",t.max).set("now");if(a){i.set("select",a,{format:s,defaultValue:true})}else{i.set("select",null).set("highlight",i.item.now)}i.key={40:7,38:-7,39:function(){return l()?-1:1},37:function(){return l()?1:-1},go:function(e){var t=i.item.highlight,n=new Date(t.year,t.month,t.date+e);i.set("highlight",n,{interval:e});this.render()}};e.on("render",(function(){e.$root.find("."+t.klass.selectMonth).on("change",(function(){var i=this.value;if(i){e.set("highlight",[e.get("view").year,i,e.get("highlight").date]);e.$root.find("."+t.klass.selectMonth).trigger("focus")}}));e.$root.find("."+t.klass.selectYear).on("change",(function(){var i=this.value;if(i){e.set("highlight",[i,e.get("view").month,e.get("highlight").date]);e.$root.find("."+t.klass.selectYear).trigger("focus")}}))}),1).on("open",(function(){var n="";if(i.disabled(i.get("now"))){n=":not(."+t.klass.buttonToday+")"}e.$root.find("button"+n+", select").attr("disabled",false)}),1).on("close",(function(){e.$root.find("button, select").attr("disabled",true)}),1)}o.prototype.set=function(e,t,i){var n=this,r=n.item;if(t===null){if(e=="clear")e="select";r[e]=t;return n}r[e=="enable"?"disable":e=="flip"?"enable":e]=n.queue[e].split(" ").map((function(r){t=n[r](e,t,i);return t})).pop();if(e=="select"){n.set("highlight",r.select,i)}else if(e=="highlight"){n.set("view",r.highlight,i)}else if(e.match(/^(flip|min|max|disable|enable)$/)){if(r.select&&n.disabled(r.select)){n.set("select",r.select,i)}if(r.highlight&&n.disabled(r.highlight)){n.set("highlight",r.highlight,i)}}return n};o.prototype.get=function(e){return this.item[e]};o.prototype.create=function(e,i,n){var o,a=this;i=i===undefined?e:i;if(i==-Infinity||i==Infinity){o=i}else if(t.isPlainObject(i)&&r.isInteger(i.pick)){i=i.obj}else if(t.isArray(i)){i=new Date(i[0],i[1],i[2]);i=r.isDate(i)?i:a.create().obj}else if(r.isInteger(i)||r.isDate(i)){i=a.normalize(new Date(i),n)}else{i=a.now(e,i,n)}return{year:o||i.getFullYear(),month:o||i.getMonth(),date:o||i.getDate(),day:o||i.getDay(),obj:o||i,pick:o||i.getTime()}};o.prototype.createRange=function(e,i){var n=this,o=function(e){if(e===true||t.isArray(e)||r.isDate(e)){return n.create(e)}return e};if(!r.isInteger(e)){e=o(e)}if(!r.isInteger(i)){i=o(i)}if(r.isInteger(e)&&t.isPlainObject(i)){e=[i.year,i.month,i.date+e]}else if(r.isInteger(i)&&t.isPlainObject(e)){i=[e.year,e.month,e.date+i]}return{from:o(e),to:o(i)}};o.prototype.withinRange=function(e,t){e=this.createRange(e.from,e.to);return t.pick>=e.from.pick&&t.pick<=e.to.pick};o.prototype.overlapRanges=function(e,t){var i=this;e=i.createRange(e.from,e.to);t=i.createRange(t.from,t.to);return i.withinRange(e,t.from)||i.withinRange(e,t.to)||i.withinRange(t,e.from)||i.withinRange(t,e.to)};o.prototype.now=function(e,t,i){t=new Date;if(i&&i.rel){t.setDate(t.getDate()+i.rel)}return this.normalize(t,i)};o.prototype.navigate=function(e,i,n){var r,o,a,s,l=t.isArray(i),u=t.isPlainObject(i),c=this.item.view;if(l||u){if(u){o=i.year;a=i.month;s=i.date}else{o=+i[0];a=+i[1];s=+i[2]}if(n&&n.nav&&c&&c.month!==a){o=c.year;a=c.month}r=new Date(o,a+(n&&n.nav?n.nav:0),1);o=r.getFullYear();a=r.getMonth();while(new Date(o,a,s).getMonth()!==a){s-=1}i=[o,a,s]}return i};o.prototype.normalize=function(e){e.setHours(0,0,0,0);return e};o.prototype.measure=function(e,t){var i=this;if(!t){t=e=="min"?-Infinity:Infinity}else if(typeof t=="string"){t=i.parse(e,t)}else if(r.isInteger(t)){t=i.now(e,t,{rel:t})}return t};o.prototype.viewset=function(e,t){return this.create([t.year,t.month,1])};o.prototype.validate=function(e,i,n){var o=this,a=i,s=n&&n.interval?n.interval:1,l=o.item.enable===-1,u,c,d=o.item.min,f=o.item.max,p,h,g=l&&o.item.disable.filter((function(e){if(t.isArray(e)){var n=o.create(e).pick;if(n<i.pick)u=true;else if(n>i.pick)c=true}return r.isInteger(e)})).length;if(!n||!n.nav&&!n.defaultValue)if(!l&&o.disabled(i)||l&&o.disabled(i)&&(g||u||c)||!l&&(i.pick<=d.pick||i.pick>=f.pick)){if(l&&!g&&(!c&&s>0||!u&&s<0)){s*=-1}while(o.disabled(i)){if(Math.abs(s)>1&&(i.month<a.month||i.month>a.month)){i=a;s=s>0?1:-1}if(i.pick<=d.pick){p=true;s=1;i=o.create([d.year,d.month,d.date+(i.pick===d.pick?0:-1)])}else if(i.pick>=f.pick){h=true;s=-1;i=o.create([f.year,f.month,f.date+(i.pick===f.pick?0:1)])}if(p&&h){break}i=o.create([i.year,i.month,i.date+s])}}return i};o.prototype.disabled=function(e){var i=this,n=i.item.disable.filter((function(n){if(r.isInteger(n)){return e.day===(i.settings.firstDay?n:n-1)%7}if(t.isArray(n)||r.isDate(n)){return e.pick===i.create(n).pick}if(t.isPlainObject(n)){return i.withinRange(n,e)}}));n=n.length&&!n.filter((function(e){return t.isArray(e)&&e[3]=="inverted"||t.isPlainObject(e)&&e.inverted})).length;return i.item.enable===-1?!n:n||e.pick<i.item.min.pick||e.pick>i.item.max.pick};o.prototype.parse=function(e,t,i){var n=this,o={};if(!t||typeof t!="string"){return t}if(!(i&&i.format)){i=i||{};i.format=n.settings.format}n.formats.toArray(i.format).map((function(e){var i=n.formats[e],a=i?r.trigger(i,n,[t,o]):e.replace(/^!/,"").length;if(i){o[e]=t.substr(0,a)}t=t.substr(a)}));return[o.yyyy||o.yy,+(o.mm||o.m)-1,o.dd||o.d]};o.prototype.formats=function(){function e(e,t,i){var n=e.match(/[^\x00-\x7F]+|\w+/)[0];if(!i.mm&&!i.m){i.m=t.indexOf(n)+1}return n.length}function t(e){return e.match(/\w+/)[0].length}return{d:function(e,t){return e?r.digits(e):t.date},dd:function(e,t){return e?2:r.lead(t.date)},ddd:function(e,i){return e?t(e):this.settings.weekdaysShort[i.day]},dddd:function(e,i){return e?t(e):this.settings.weekdaysFull[i.day]},m:function(e,t){return e?r.digits(e):t.month+1},mm:function(e,t){return e?2:r.lead(t.month+1)},mmm:function(t,i){var n=this.settings.monthsShort;return t?e(t,n,i):n[i.month]},mmmm:function(t,i){var n=this.settings.monthsFull;return t?e(t,n,i):n[i.month]},yy:function(e,t){return e?2:(""+t.year).slice(2)},yyyy:function(e,t){return e?4:t.year},toArray:function(e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,t){var i=this;return i.formats.toArray(e).map((function(e){return r.trigger(i.formats[e],i,[0,t])||e.replace(/^!/,"")})).join("")}}}();o.prototype.isDateExact=function(e,i){var n=this;if(r.isInteger(e)&&r.isInteger(i)||typeof e=="boolean"&&typeof i=="boolean"){return e===i}if((r.isDate(e)||t.isArray(e))&&(r.isDate(i)||t.isArray(i))){return n.create(e).pick===n.create(i).pick}if(t.isPlainObject(e)&&t.isPlainObject(i)){return n.isDateExact(e.from,i.from)&&n.isDateExact(e.to,i.to)}return false};o.prototype.isDateOverlap=function(e,i){var n=this,o=n.settings.firstDay?1:0;if(r.isInteger(e)&&(r.isDate(i)||t.isArray(i))){e=e%7+o;return e===n.create(i).day+1}if(r.isInteger(i)&&(r.isDate(e)||t.isArray(e))){i=i%7+o;return i===n.create(e).day+1}if(t.isPlainObject(e)&&t.isPlainObject(i)){return n.overlapRanges(e,i)}return false};o.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(t.enable==-1?1:-1)};o.prototype.deactivate=function(e,i){var n=this,o=n.item.disable.slice(0);if(i=="flip"){n.flipEnable()}else if(i===false){n.flipEnable(1);o=[]}else if(i===true){n.flipEnable(-1);o=[]}else{i.map((function(e){var i;for(var a=0;a<o.length;a+=1){if(n.isDateExact(e,o[a])){i=true;break}}if(!i){if(r.isInteger(e)||r.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to){o.push(e)}}}))}return o};o.prototype.activate=function(e,i){var n=this,o=n.item.disable,a=o.length;if(i=="flip"){n.flipEnable()}else if(i===true){n.flipEnable(1);o=[]}else if(i===false){n.flipEnable(-1);o=[]}else{i.map((function(e){var i,s,l,u;for(l=0;l<a;l+=1){s=o[l];if(n.isDateExact(s,e)){i=o[l]=null;u=true;break}else if(n.isDateOverlap(s,e)){if(t.isPlainObject(e)){e.inverted=true;i=e}else if(t.isArray(e)){i=e;if(!i[3])i.push("inverted")}else if(r.isDate(e)){i=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]}break}}if(i)for(l=0;l<a;l+=1){if(n.isDateExact(o[l],e)){o[l]=null;break}}if(u)for(l=0;l<a;l+=1){if(n.isDateOverlap(o[l],e)){o[l]=null;break}}if(i){o.push(i)}}))}return o.filter((function(e){return e!=null}))};o.prototype.nodes=function(e){var t=this,o=t.settings,a=t.item,s=a.now,l=a.select,u=a.highlight,c=a.view,d=a.disable,f=a.min,p=a.max,h=function(e,t){if(o.firstDay){e.push(e.shift());t.push(t.shift())}return r.node("thead",r.node("tr",r.group({min:0,max:i-1,i:1,node:"th",item:function(i){return[e[i],o.klass.weekdays,'scope=col title="'+t[i]+'"']}})))}((o.showWeekdaysFull?o.weekdaysFull:o.weekdaysShort).slice(0),o.weekdaysFull.slice(0)),g=function(e){return r.node("div"," ",o.klass["nav"+(e?"Next":"Prev")]+(e&&c.year>=p.year&&c.month>=p.month||!e&&c.year<=f.year&&c.month<=f.month?" "+o.klass.navDisabled:""),"data-nav="+(e||-1)+" "+r.ariaAttr({role:"button",controls:t.$node[0].id+"_table"})+" "+'title="'+(e?o.labelMonthNext:o.labelMonthPrev)+'"')},m=function(){var i=o.showMonthsShort?o.monthsShort:o.monthsFull;if(o.selectMonths){return r.node("select",r.group({min:0,max:11,i:1,node:"option",item:function(e){return[i[e],0,"value="+e+(c.month==e?" selected":"")+(c.year==f.year&&e<f.month||c.year==p.year&&e>p.month?" disabled":"")]}}),o.klass.selectMonth,(e?"":"disabled")+" "+r.ariaAttr({controls:t.$node[0].id+"_table"})+" "+'title="'+o.labelMonthSelect+'"')}return r.node("div",i[c.month],o.klass.month)},v=function(){var i=c.year,n=o.selectYears===true?5:~~(o.selectYears/2);if(n){var a=f.year,s=p.year,l=i-n,u=i+n;if(a>l){u+=a-l;l=a}if(s<u){var d=l-a,h=u-s;l-=d>h?h:d;u=s}return r.node("select",r.group({min:l,max:u,i:1,node:"option",item:function(e){return[e,0,"value="+e+(i==e?" selected":"")]}}),o.klass.selectYear,(e?"":"disabled")+" "+r.ariaAttr({controls:t.$node[0].id+"_table"})+" "+'title="'+o.labelYearSelect+'"')}return r.node("div",i,o.klass.year)};return r.node("div",(o.selectYears?v()+m():m()+v())+g()+g(1),o.klass.header)+r.node("table",h+r.node("tbody",r.group({min:0,max:n-1,i:1,node:"tr",item:function(e){var n=o.firstDay&&t.create([c.year,c.month,1]).day===0?-7:0;return[r.group({min:i*e-c.day+n+1,max:function(){return this.min+i-1},i:1,node:"td",item:function(e){e=t.create([c.year,c.month,e+(o.firstDay?1:0)]);var i=l&&l.pick==e.pick,n=u&&u.pick==e.pick,a=d&&t.disabled(e)||e.pick<f.pick||e.pick>p.pick,h=r.trigger(t.formats.toString,t,[o.format,e]);return[r.node("div",e.date,function(t){t.push(c.month==e.month?o.klass.infocus:o.klass.outfocus);if(s.pick==e.pick){t.push(o.klass.now)}if(i){t.push(o.klass.selected)}if(n){t.push(o.klass.highlighted)}if(a){t.push(o.klass.disabled)}return t.join(" ")}([o.klass.day]),"data-pick="+e.pick+" "+r.ariaAttr({role:"gridcell",label:h,selected:i&&t.$node.val()===h?true:null,activedescendant:n?true:null,disabled:a?true:null})),"",r.ariaAttr({role:"presentation"})]}})]}})),o.klass.table,'id="'+t.$node[0].id+"_table"+'" '+r.ariaAttr({role:"grid",controls:t.$node[0].id,readonly:true}))+r.node("div",r.node("button",o.today,o.klass.buttonToday,"type=button data-pick="+s.pick+(e&&!t.disabled(s)?"":" disabled")+" "+r.ariaAttr({controls:t.$node[0].id}))+r.node("button",o.clear,o.klass.buttonClear,"type=button data-clear=1"+(e?"":" disabled")+" "+r.ariaAttr({controls:t.$node[0].id}))+r.node("button",o.close,o.klass.buttonClose,"type=button data-close=true "+(e?"":" disabled")+" "+r.ariaAttr({controls:t.$node[0].id})),o.klass.footer)};o.defaults=function(e){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",closeOnSelect:true,closeOnClear:true,format:"d mmmm, yyyy",klass:{table:e+"table",header:e+"header",navPrev:e+"nav--prev",navNext:e+"nav--next",navDisabled:e+"nav--disabled",month:e+"month",year:e+"year",selectMonth:e+"select--month",selectYear:e+"select--year",weekdays:e+"weekday",day:e+"day",disabled:e+"day--disabled",selected:e+"day--selected",highlighted:e+"day--highlighted",now:e+"day--today",infocus:e+"day--infocus",outfocus:e+"day--outfocus",footer:e+"footer",buttonClear:e+"button--clear",buttonToday:e+"button--today",buttonClose:e+"button--close"}}}(e.klasses().picker+"__");e.extend("pickadate",o)}));(function(e){if(typeof define=="function"&&define.amd)define(["picker","jquery"],e);else if(typeof exports=="object")module.exports=e(require("./picker.js"),require("jquery"));else e(Picker,jQuery)})((function(e,t){var i=24,n=60,r=12,o=i*n,a=e._;function s(e,t){var i=this,n=e.$node[0].value,r=e.$node.data("value"),o=r||n,a=r?t.formatSubmit:t.format;i.settings=t;i.$node=e.$node;i.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"};i.item={};i.item.clear=null;i.item.interval=t.interval||30;i.item.disable=(t.disable||[]).slice(0);i.item.enable=-function(e){return e[0]===true?e.shift():-1}(i.item.disable);i.set("min",t.min).set("max",t.max).set("now");if(o){i.set("select",o,{format:a})}else{i.set("select",null).set("highlight",i.item.now)}i.key={40:1,38:-1,39:1,37:-1,go:function(e){i.set("highlight",i.item.highlight.pick+e*i.item.interval,{interval:e*i.item.interval});this.render()}};e.on("render",(function(){var i=e.$root.children(),n=i.find("."+t.klass.viewset),r=function(e){return["webkit","moz","ms","o",""].map((function(t){return(t?"-"+t+"-":"")+e}))},o=function(e,t){r("transform").map((function(i){e.css(i,t)}));r("transition").map((function(i){e.css(i,t)}))};if(n.length){o(i,"none");i[0].scrollTop=~~n.position().top-n[0].clientHeight*2;o(i,"")}}),1).on("open",(function(){e.$root.find("button").attr("disabled",false)}),1).on("close",(function(){e.$root.find("button").attr("disabled",true)}),1)}s.prototype.set=function(e,t,i){var n=this,r=n.item;if(t===null){if(e=="clear")e="select";r[e]=t;return n}r[e=="enable"?"disable":e=="flip"?"enable":e]=n.queue[e].split(" ").map((function(r){t=n[r](e,t,i);return t})).pop();if(e=="select"){n.set("highlight",r.select,i)}else if(e=="highlight"){n.set("view",r.highlight,i)}else if(e=="interval"){n.set("min",r.min,i).set("max",r.max,i)}else if(e.match(/^(flip|min|max|disable|enable)$/)){if(r.select&&n.disabled(r.select)){n.set("select",t,i)}if(r.highlight&&n.disabled(r.highlight)){n.set("highlight",t,i)}if(e=="min"){n.set("max",r.max,i)}}return n};s.prototype.get=function(e){return this.item[e]};s.prototype.create=function(e,r,s){var l=this;r=r===undefined?e:r;if(a.isDate(r)){r=[r.getHours(),r.getMinutes()]}if(t.isPlainObject(r)&&a.isInteger(r.pick)){r=r.pick}else if(t.isArray(r)){r=+r[0]*n+ +r[1]}else if(!a.isInteger(r)){r=l.now(e,r,s)}if(e=="max"&&r<l.item.min.pick){r+=o}if(e!="min"&&e!="max"&&(r-l.item.min.pick)%l.item.interval!==0){r+=l.item.interval}r=l.normalize(e,r,s);return{hour:~~(i+r/n)%i,mins:(n+r%n)%n,time:(o+r)%o,pick:r%o}};s.prototype.createRange=function(e,i){var n=this,r=function(e){if(e===true||t.isArray(e)||a.isDate(e)){return n.create(e)}return e};if(!a.isInteger(e)){e=r(e)}if(!a.isInteger(i)){i=r(i)}if(a.isInteger(e)&&t.isPlainObject(i)){e=[i.hour,i.mins+e*n.settings.interval]}else if(a.isInteger(i)&&t.isPlainObject(e)){i=[e.hour,e.mins+i*n.settings.interval]}return{from:r(e),to:r(i)}};s.prototype.withinRange=function(e,t){e=this.createRange(e.from,e.to);return t.pick>=e.from.pick&&t.pick<=e.to.pick};s.prototype.overlapRanges=function(e,t){var i=this;e=i.createRange(e.from,e.to);t=i.createRange(t.from,t.to);return i.withinRange(e,t.from)||i.withinRange(e,t.to)||i.withinRange(t,e.from)||i.withinRange(t,e.to)};s.prototype.now=function(e,t){var i=this.item.interval,r=new Date,o=r.getHours()*n+r.getMinutes(),s=a.isInteger(t),l;o-=o%i;l=t<0&&i*t+o<=-i;o+=e=="min"&&l?0:i;if(s){o+=i*(l&&e!="max"?t+1:t)}return o};s.prototype.normalize=function(e,t){var i=this.item.interval,n=this.item.min&&this.item.min.pick||0;t-=e=="min"?0:(t-n)%i;return t};s.prototype.measure=function(e,r,o){var s=this;if(!r){r=e=="min"?[0,0]:[i-1,n-1]}if(typeof r=="string"){r=s.parse(e,r)}else if(r===true||a.isInteger(r)){r=s.now(e,r,o)}else if(t.isPlainObject(r)&&a.isInteger(r.pick)){r=s.normalize(e,r.pick,o)}return r};s.prototype.validate=function(e,t,i){var n=this,r=i&&i.interval?i.interval:n.item.interval;if(n.disabled(t)){t=n.shift(t,r)}t=n.scope(t);if(n.disabled(t)){t=n.shift(t,r*-1)}return t};s.prototype.disabled=function(e){var i=this,n=i.item.disable.filter((function(n){if(a.isInteger(n)){return e.hour==n}if(t.isArray(n)||a.isDate(n)){return e.pick==i.create(n).pick}if(t.isPlainObject(n)){return i.withinRange(n,e)}}));n=n.length&&!n.filter((function(e){return t.isArray(e)&&e[2]=="inverted"||t.isPlainObject(e)&&e.inverted})).length;return i.item.enable===-1?!n:n||e.pick<i.item.min.pick||e.pick>i.item.max.pick};s.prototype.shift=function(e,t){var i=this,n=i.item.min.pick,r=i.item.max.pick;t=t||i.item.interval;while(i.disabled(e)){e=i.create(e.pick+=t);if(e.pick<=n||e.pick>=r){break}}return e};s.prototype.scope=function(e){var t=this.item.min.pick,i=this.item.max.pick;return this.create(e.pick>i?i:e.pick<t?t:e)};s.prototype.parse=function(e,t,i){var r,o,s,l,u,c=this,d={};if(!t||typeof t!="string"){return t}if(!(i&&i.format)){i=i||{};i.format=c.settings.format}c.formats.toArray(i.format).map((function(e){var i,n=c.formats[e],r=n?a.trigger(n,c,[t,d]):e.replace(/^!/,"").length;if(n){i=t.substr(0,r);d[e]=i.match(/^\d+$/)?+i:i}t=t.substr(r)}));for(l in d){u=d[l];if(a.isInteger(u)){if(l.match(/^(h|hh)$/i)){r=u;if(l=="h"||l=="hh"){r%=12}}else if(l=="i"){o=u}}else if(l.match(/^a$/i)&&u.match(/^p/i)&&("h"in d||"hh"in d)){s=true}}return(s?r+12:r)*n+o};s.prototype.formats={h:function(e,t){return e?a.digits(e):t.hour%r||r},hh:function(e,t){return e?2:a.lead(t.hour%r||r)},H:function(e,t){return e?a.digits(e):""+t.hour%24},HH:function(e,t){return e?a.digits(e):a.lead(t.hour%24)},i:function(e,t){return e?2:a.lead(t.mins)},a:function(e,t){return e?4:o/2>t.time%o?"a.m.":"p.m."},A:function(e,t){return e?2:o/2>t.time%o?"AM":"PM"},toArray:function(e){return e.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(e,t){var i=this;return i.formats.toArray(e).map((function(e){return a.trigger(i.formats[e],i,[0,t])||e.replace(/^!/,"")})).join("")}};s.prototype.isTimeExact=function(e,i){var n=this;if(a.isInteger(e)&&a.isInteger(i)||typeof e=="boolean"&&typeof i=="boolean"){return e===i}if((a.isDate(e)||t.isArray(e))&&(a.isDate(i)||t.isArray(i))){return n.create(e).pick===n.create(i).pick}if(t.isPlainObject(e)&&t.isPlainObject(i)){return n.isTimeExact(e.from,i.from)&&n.isTimeExact(e.to,i.to)}return false};s.prototype.isTimeOverlap=function(e,i){var n=this;if(a.isInteger(e)&&(a.isDate(i)||t.isArray(i))){return e===n.create(i).hour}if(a.isInteger(i)&&(a.isDate(e)||t.isArray(e))){return i===n.create(e).hour}if(t.isPlainObject(e)&&t.isPlainObject(i)){return n.overlapRanges(e,i)}return false};s.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(t.enable==-1?1:-1)};s.prototype.deactivate=function(e,i){var n=this,r=n.item.disable.slice(0);if(i=="flip"){n.flipEnable()}else if(i===false){n.flipEnable(1);r=[]}else if(i===true){n.flipEnable(-1);r=[]}else{i.map((function(e){var i;for(var o=0;o<r.length;o+=1){if(n.isTimeExact(e,r[o])){i=true;break}}if(!i){if(a.isInteger(e)||a.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to){r.push(e)}}}))}return r};s.prototype.activate=function(e,i){var n=this,r=n.item.disable,o=r.length;if(i=="flip"){n.flipEnable()}else if(i===true){n.flipEnable(1);r=[]}else if(i===false){n.flipEnable(-1);r=[]}else{i.map((function(e){var i,s,l,u;for(l=0;l<o;l+=1){s=r[l];if(n.isTimeExact(s,e)){i=r[l]=null;u=true;break}else if(n.isTimeOverlap(s,e)){if(t.isPlainObject(e)){e.inverted=true;i=e}else if(t.isArray(e)){i=e;if(!i[2])i.push("inverted")}else if(a.isDate(e)){i=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]}break}}if(i)for(l=0;l<o;l+=1){if(n.isTimeExact(r[l],e)){r[l]=null;break}}if(u)for(l=0;l<o;l+=1){if(n.isTimeOverlap(r[l],e)){r[l]=null;break}}if(i){r.push(i)}}))}return r.filter((function(e){return e!=null}))};s.prototype.i=function(e,t){return a.isInteger(t)&&t>0?t:this.item.interval};s.prototype.nodes=function(e){var t=this,i=t.settings,n=t.item.select,r=t.item.highlight,o=t.item.view,s=t.item.disable;return a.node("ul",a.group({min:t.item.min.pick,max:t.item.max.pick,i:t.item.interval,node:"li",item:function(e){e=t.create(e);var l=e.pick,u=n&&n.pick==l,c=r&&r.pick==l,d=s&&t.disabled(e),f=a.trigger(t.formats.toString,t,[i.format,e]);return[a.trigger(t.formats.toString,t,[a.trigger(i.formatLabel,t,[e])||i.format,e]),function(e){if(u){e.push(i.klass.selected)}if(c){e.push(i.klass.highlighted)}if(o&&o.pick==l){e.push(i.klass.viewset)}if(d){e.push(i.klass.disabled)}return e.join(" ")}([i.klass.listItem]),"data-pick="+e.pick+" "+a.ariaAttr({role:"option",label:f,selected:u&&t.$node.val()===f?true:null,activedescendant:c?true:null,disabled:d?true:null})]}})+a.node("li",a.node("button",i.clear,i.klass.buttonClear,"type=button data-clear=1"+(e?"":" disabled")+" "+a.ariaAttr({controls:t.$node[0].id})),"",a.ariaAttr({role:"presentation"})),i.klass.list,a.ariaAttr({role:"listbox",controls:t.$node[0].id}))};s.defaults=function(e){return{clear:"Clear",format:"h:i A",interval:30,closeOnSelect:true,closeOnClear:true,klass:{picker:e+" "+e+"--time",holder:e+"__holder",list:e+"__list",listItem:e+"__list-item",disabled:e+"__list-item--disabled",selected:e+"__list-item--selected",highlighted:e+"__list-item--highlighted",viewset:e+"__list-item--viewset",now:e+"__list-item--now",buttonClear:e+"__button--clear"}}}(e.klasses().picker);e.extend("pickatime",s)}));if(![].map){Array.prototype.map=function(e,t){var i=this,n=i.length,r=new Array(n);for(var o=0;o<n;o++){if(o in i){r[o]=e.call(t,i[o],o,i)}}return r}}if(![].filter){Array.prototype.filter=function(e){if(this==null)throw new TypeError;var t=Object(this),i=t.length>>>0;if(typeof e!="function")throw new TypeError;var n=[],r=arguments[1];for(var o=0;o<i;o++){if(o in t){var a=t[o];if(e.call(r,a,o,t))n.push(a)}}return n}}if(![].indexOf){Array.prototype.indexOf=function(e){if(this==null)throw new TypeError;var t=Object(this),i=t.length>>>0;if(i===0)return-1;var n=0;if(arguments.length>1){n=Number(arguments[1]);if(n!=n){n=0}else if(n!==0&&n!=Infinity&&n!=-Infinity){n=(n>0||-1)*Math.floor(Math.abs(n))}}if(n>=i)return-1;var r=n>=0?n:Math.max(i-Math.abs(n),0);for(;r<i;r++){if(r in t&&t[r]===e)return r}return-1}}var nativeSplit=String.prototype.split,compliantExecNpcg=/()??/.exec("")[1]===undefined;String.prototype.split=function(e,t){var i=this;if(Object.prototype.toString.call(e)!=="[object RegExp]"){return nativeSplit.call(i,e,t)}var n=[],r=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),o=0,a,s,l,u;e=new RegExp(e.source,r+"g");i+="";if(!compliantExecNpcg){a=new RegExp("^"+e.source+"$(?!\\s)",r)}t=t===undefined?-1>>>0:t>>>0;while(s=e.exec(i)){l=s.index+s[0].length;if(l>o){n.push(i.slice(o,s.index));if(!compliantExecNpcg&&s.length>1){s[0].replace(a,(function(){for(var e=1;e<arguments.length-2;e++){if(arguments[e]===undefined){s[e]=undefined}}}))}if(s.length>1&&s.index<i.length){Array.prototype.push.apply(n,s.slice(1))}u=s[0].length;o=l;if(n.length>=t){break}}if(e.lastIndex===s.index){e.lastIndex++}}if(o===i.length){if(u||!e.test("")){n.push("")}}else{n.push(i.slice(o))}return n.length>t?n.slice(0,t):n};(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){e(require("jquery"))}else{e(jQuery)}})((function(e){"use strict";function t(e){if(typeof e==="string"){return parseInt(e,10)}else{return~~e}}var i={wheelSpeed:1,wheelPropagation:false,minScrollbarLength:null,maxScrollbarLength:null,useBothWheelAxes:false,useKeyboard:true,suppressScrollX:false,suppressScrollY:false,scrollXMarginOffset:0,scrollYMarginOffset:0,includePadding:false};var n=0;var r=function(){var e=n++;return function(t){var i=".perfect-scrollbar-"+e;if(typeof t==="undefined"){return i}else{return t+i}}};e.fn.perfectScrollbar=function(n,o){return this.each((function(){var a=e.extend(true,{},i);var s=e(this);var l=function(){return!!s};if(typeof n==="object"){e.extend(true,a,n)}else{o=n}if(o==="update"){if(s.data("perfect-scrollbar-update")){s.data("perfect-scrollbar-update")()}return s}else if(o==="destroy"){if(s.data("perfect-scrollbar-destroy")){s.data("perfect-scrollbar-destroy")()}return s}if(s.data("perfect-scrollbar")){return s.data("perfect-scrollbar")}s.addClass("ps-container");var u;var c;var d;var f;var p=s.css("direction")==="rtl";var h=r();var g=this.ownerDocument||document;var m=e("<div class='ps-scrollbar-x-rail'>").appendTo(s);var v=e("<div class='ps-scrollbar-x'>").appendTo(m);var y;var b;var _;var w=t(m.css("bottom"));var C=w===w;var A=C?null:t(m.css("top"));var E=t(m.css("borderLeftWidth"))+t(m.css("borderRightWidth"));var x=e("<div class='ps-scrollbar-y-rail'>").appendTo(s);var T=e("<div class='ps-scrollbar-y'>").appendTo(x);var S;var D;var k;var O=t(x.css("right"));var R=O===O;var N=R?null:t(x.css("left"));var P=t(x.css("borderTopWidth"))+t(x.css("borderBottomWidth"));function I(e,i){var n=e+i;var r=c-D;if(n<0){k=0}else if(n>r){k=r}else{k=n}var o=t(k*(f-c)/(c-D));s.scrollTop(o)}function M(e,i){var n=e+i;var r=u-b;if(n<0){_=0}else if(n>r){_=r}else{_=n}var o=t(_*(d-u)/(u-b));s.scrollLeft(o)}function L(e){if(a.minScrollbarLength){e=Math.max(e,a.minScrollbarLength)}if(a.maxScrollbarLength){e=Math.min(e,a.maxScrollbarLength)}return e}function F(){var e={width:u};if(p){e.left=s.scrollLeft()+u-d}else{e.left=s.scrollLeft()}if(C){e.bottom=w-s.scrollTop()}else{e.top=A+s.scrollTop()}m.css(e);var t={top:s.scrollTop(),height:c};if(R){if(p){t.right=d-s.scrollLeft()-O-T.outerWidth()}else{t.right=O-s.scrollLeft()}}else{if(p){t.left=s.scrollLeft()+u*2-d-N-T.outerWidth()}else{t.left=N+s.scrollLeft()}}x.css(t);v.css({left:_,width:b-E});T.css({top:k,height:D-P})}function G(){s.removeClass("ps-active-x");s.removeClass("ps-active-y");u=a.includePadding?s.innerWidth():s.width();c=a.includePadding?s.innerHeight():s.height();d=s.prop("scrollWidth");f=s.prop("scrollHeight");if(!a.suppressScrollX&&u+a.scrollXMarginOffset<d){y=true;b=L(t(u*u/d));_=t(s.scrollLeft()*(u-b)/(d-u))}else{y=false;b=0;_=0;s.scrollLeft(0)}if(!a.suppressScrollY&&c+a.scrollYMarginOffset<f){S=true;D=L(t(c*c/f));k=t(s.scrollTop()*(c-D)/(f-c))}else{S=false;D=0;k=0;s.scrollTop(0)}if(_>=u-b){_=u-b}if(k>=c-D){k=c-D}F();if(y){s.addClass("ps-active-x")}if(S){s.addClass("ps-active-y")}}function $(){var t;var i;var n=false;v.bind(h("mousedown"),(function(e){i=e.pageX;t=v.position().left;m.addClass("in-scrolling");n=true;e.stopPropagation();e.preventDefault()}));e(g).bind(h("mousemove"),(function(e){if(n){M(t,e.pageX-i);G();e.stopPropagation();e.preventDefault()}}));e(g).bind(h("mouseup"),(function(e){if(n){n=false;m.removeClass("in-scrolling")}}));t=i=null}function W(){var t;var i;var n=false;T.bind(h("mousedown"),(function(e){i=e.pageY;t=T.position().top;n=true;x.addClass("in-scrolling");e.stopPropagation();e.preventDefault()}));e(g).bind(h("mousemove"),(function(e){if(n){I(t,e.pageY-i);G();e.stopPropagation();e.preventDefault()}}));e(g).bind(h("mouseup"),(function(e){if(n){n=false;x.removeClass("in-scrolling")}}));t=i=null}function H(e,t){var i=s.scrollTop();if(e===0){if(!S){return false}if(i===0&&t>0||i>=f-c&&t<0){return!a.wheelPropagation}}var n=s.scrollLeft();if(t===0){if(!y){return false}if(n===0&&e<0||n>=d-u&&e>0){return!a.wheelPropagation}}return true}function j(){var e=false;function t(e){var t=e.originalEvent.deltaX;var i=-1*e.originalEvent.deltaY;if(typeof t==="undefined"||typeof i==="undefined"){t=-1*e.originalEvent.wheelDeltaX/6;i=e.originalEvent.wheelDeltaY/6}if(e.originalEvent.deltaMode&&e.originalEvent.deltaMode===1){t*=10;i*=10}if(t!==t&&i!==i){t=0;i=e.originalEvent.wheelDelta}return[t,i]}function i(i){var n=t(i);var r=n[0];var o=n[1];e=false;if(!a.useBothWheelAxes){s.scrollTop(s.scrollTop()-o*a.wheelSpeed);s.scrollLeft(s.scrollLeft()+r*a.wheelSpeed)}else if(S&&!y){if(o){s.scrollTop(s.scrollTop()-o*a.wheelSpeed)}else{s.scrollTop(s.scrollTop()+r*a.wheelSpeed)}e=true}else if(y&&!S){if(r){s.scrollLeft(s.scrollLeft()+r*a.wheelSpeed)}else{s.scrollLeft(s.scrollLeft()-o*a.wheelSpeed)}e=true}G();e=e||H(r,o);if(e){i.stopPropagation();i.preventDefault()}}if(typeof window.onwheel!=="undefined"){s.bind(h("wheel"),i)}else if(typeof window.onmousewheel!=="undefined"){s.bind(h("mousewheel"),i)}}function B(){var t=false;s.bind(h("mouseenter"),(function(e){t=true}));s.bind(h("mouseleave"),(function(e){t=false}));var i=false;e(g).bind(h("keydown"),(function(n){if(n.isDefaultPrevented&&n.isDefaultPrevented()){return}if(!t){return}var r=document.activeElement?document.activeElement:g.activeElement;while(r.shadowRoot){r=r.shadowRoot.activeElement}if(e(r).is(":input,[contenteditable]")){return}var o=0;var a=0;switch(n.which){case 37:o=-30;break;case 38:a=30;break;case 39:o=30;break;case 40:a=-30;break;case 33:a=90;break;case 32:case 34:a=-90;break;case 35:if(n.ctrlKey){a=-f}else{a=-c}break;case 36:if(n.ctrlKey){a=s.scrollTop()}else{a=c}break;default:return}s.scrollTop(s.scrollTop()-a);s.scrollLeft(s.scrollLeft()+o);i=H(o,a);if(i){n.preventDefault()}}))}function V(){function e(e){e.stopPropagation()}T.bind(h("click"),e);x.bind(h("click"),(function(e){var i=t(D/2);var n=e.pageY-x.offset().top-i;var r=c-D;var o=n/r;if(o<0){o=0}else if(o>1){o=1}s.scrollTop((f-c)*o)}));v.bind(h("click"),e);m.bind(h("click"),(function(e){var i=t(b/2);var n=e.pageX-m.offset().left-i;var r=u-b;var o=n/r;if(o<0){o=0}else if(o>1){o=1}s.scrollLeft((d-u)*o)}))}function z(){function t(){var e=window.getSelection?window.getSelection():document.getSlection?document.getSlection():{rangeCount:0};if(e.rangeCount===0){return null}else{return e.getRangeAt(0).commonAncestorContainer}}var i=null;var n={top:0,left:0};function r(){if(!i){i=setInterval((function(){if(!l()){clearInterval(i);return}s.scrollTop(s.scrollTop()+n.top);s.scrollLeft(s.scrollLeft()+n.left);G()}),50)}}function o(){if(i){clearInterval(i);i=null}m.removeClass("in-scrolling");x.removeClass("in-scrolling")}var a=false;e(g).bind(h("selectionchange"),(function(i){if(e.contains(s[0],t())){a=true}else{a=false;o()}}));e(window).bind(h("mouseup"),(function(e){if(a){a=false;o()}}));e(window).bind(h("mousemove"),(function(e){if(a){var t={x:e.pageX,y:e.pageY};var i=s.offset();var l={left:i.left,right:i.left+s.outerWidth(),top:i.top,bottom:i.top+s.outerHeight()};if(t.x<l.left+3){n.left=-5;m.addClass("in-scrolling")}else if(t.x>l.right-3){n.left=5;m.addClass("in-scrolling")}else{n.left=0}if(t.y<l.top+3){if(l.top+3-t.y<5){n.top=-5}else{n.top=-20}x.addClass("in-scrolling")}else if(t.y>l.bottom-3){if(t.y-l.bottom+3<5){n.top=5}else{n.top=20}x.addClass("in-scrolling")}else{n.top=0}if(n.top===0&&n.left===0){o()}else{r()}}}))}function U(t,i){function n(e,t){s.scrollTop(s.scrollTop()-t);s.scrollLeft(s.scrollLeft()-e);G()}var r={};var o=0;var a={};var u=null;var c=false;var d=false;function f(e){c=true}function p(e){c=false}function g(e){if(e.originalEvent.targetTouches){return e.originalEvent.targetTouches[0]}else{return e.originalEvent}}function m(e){var t=e.originalEvent;if(t.targetTouches&&t.targetTouches.length===1){return true}if(t.pointerType&&t.pointerType!=="mouse"&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){return true}return false}function v(e){if(m(e)){d=true;var t=g(e);r.pageX=t.pageX;r.pageY=t.pageY;o=(new Date).getTime();if(u!==null){clearInterval(u)}e.stopPropagation()}}function y(e){if(!c&&d&&m(e)){var t=g(e);var i={pageX:t.pageX,pageY:t.pageY};var s=i.pageX-r.pageX;var l=i.pageY-r.pageY;n(s,l);r=i;var u=(new Date).getTime();var f=u-o;if(f>0){a.x=s/f;a.y=l/f;o=u}e.stopPropagation();e.preventDefault()}}function b(e){if(!c&&d){d=false;clearInterval(u);u=setInterval((function(){if(!l()){clearInterval(u);return}if(Math.abs(a.x)<.01&&Math.abs(a.y)<.01){clearInterval(u);return}n(a.x*30,a.y*30);a.x*=.8;a.y*=.8}),10)}}if(t){e(window).bind(h("touchstart"),f);e(window).bind(h("touchend"),p);s.bind(h("touchstart"),v);s.bind(h("touchmove"),y);s.bind(h("touchend"),b)}if(i){if(window.PointerEvent){e(window).bind(h("pointerdown"),f);e(window).bind(h("pointerup"),p);s.bind(h("pointerdown"),v);s.bind(h("pointermove"),y);s.bind(h("pointerup"),b)}else if(window.MSPointerEvent){e(window).bind(h("MSPointerDown"),f);e(window).bind(h("MSPointerUp"),p);s.bind(h("MSPointerDown"),v);s.bind(h("MSPointerMove"),y);s.bind(h("MSPointerUp"),b)}}}function Y(){s.bind(h("scroll"),(function(e){G()}))}function q(){s.unbind(h());e(window).unbind(h());e(g).unbind(h());s.data("perfect-scrollbar",null);s.data("perfect-scrollbar-update",null);s.data("perfect-scrollbar-destroy",null);v.remove();T.remove();m.remove();x.remove();s=m=x=v=T=y=S=u=c=d=f=b=_=w=C=A=D=k=O=R=N=p=h=null}var X="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch;var K=window.navigator.msMaxTouchPoints!==null;function Q(){G();Y();$();W();V();z();j();if(X||K){U(X,K)}if(a.useKeyboard){B()}s.data("perfect-scrollbar",s);s.data("perfect-scrollbar-update",G);s.data("perfect-scrollbar-destroy",q)}Q();return s}))}}));(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){module.exports=e}else{e(jQuery)}})((function(e){var t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],n=Array.prototype.slice,r,o;if(e.event.fixHooks){for(var a=t.length;a;){e.event.fixHooks[t[--a]]=e.event.mouseHooks}}var s=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener){for(var t=i.length;t;){this.addEventListener(i[--t],l,false)}}else{this.onmousewheel=l}e.data(this,"mousewheel-line-height",s.getLineHeight(this));e.data(this,"mousewheel-page-height",s.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var e=i.length;e;){this.removeEventListener(i[--e],l,false)}}else{this.onmousewheel=null}},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:true}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}});function l(t){var i=t||window.event,a=n.call(arguments,1),s=0,l=0,d=0,f=0;t=e.event.fix(i);t.type="mousewheel";if("detail"in i){d=i.detail*-1}if("wheelDelta"in i){d=i.wheelDelta}if("wheelDeltaY"in i){d=i.wheelDeltaY}if("wheelDeltaX"in i){l=i.wheelDeltaX*-1}if("axis"in i&&i.axis===i.HORIZONTAL_AXIS){l=d*-1;d=0}s=d===0?l:d;if("deltaY"in i){d=i.deltaY*-1;s=d}if("deltaX"in i){l=i.deltaX;if(d===0){s=l*-1}}if(d===0&&l===0){return}if(i.deltaMode===1){var p=e.data(this,"mousewheel-line-height");s*=p;d*=p;l*=p}else if(i.deltaMode===2){var h=e.data(this,"mousewheel-page-height");s*=h;d*=h;l*=h}f=Math.max(Math.abs(d),Math.abs(l));if(!o||f<o){o=f;if(c(i,f)){o/=40}}if(c(i,f)){s/=40;l/=40;d/=40}s=Math[s>=1?"floor":"ceil"](s/o);l=Math[l>=1?"floor":"ceil"](l/o);d=Math[d>=1?"floor":"ceil"](d/o);t.deltaX=l;t.deltaY=d;t.deltaFactor=o;t.deltaMode=0;a.unshift(t,s,l,d);if(r){clearTimeout(r)}r=setTimeout(u,200);return(e.event.dispatch||e.event.handle).apply(this,a)}function u(){o=null}function c(e,t){return s.settings.adjustOldDeltas&&e.type==="mousewheel"&&t%120===0}}));jQuery.fn.doubleScroll=function(e){var t={contentElement:undefined,scrollCss:{"overflow-x":"auto","overflow-y":"hidden"},contentCss:{"overflow-x":"auto","overflow-y":"hidden"},onlyIfScroll:true,resetOnWindowResize:false,timeToWaitForResize:30};$.extend(true,t,e);$.extend(t,{topScrollBarMarkup:'<div class="doubleScroll-scroll-wrapper" style="height: 20px;"><div class="doubleScroll-scroll" style="height: 20px;"></div></div>',topScrollBarWrapperSelector:".doubleScroll-scroll-wrapper",topScrollBarInnerSelector:".doubleScroll-scroll"});var i=function(e,t){if(t.onlyIfScroll&&e.get(0).scrollWidth<=e.width()){e.prev(t.topScrollBarWrapperSelector).remove();return}var i=e.prev(t.topScrollBarWrapperSelector);if(i.length==0){i=$(t.topScrollBarMarkup);e.before(i);i.css(t.scrollCss);e.css(t.contentCss);i.bind("scroll.doubleScroll",(function(){e.scrollLeft(i.scrollLeft())}));var n=function(){i.scrollLeft(e.scrollLeft())};e.bind("scroll.doubleScroll",n)}var r;if(t.contentElement!==undefined&&e.find(t.contentElement).length!==0){r=e.find(t.contentElement)}else{r=e.find(">:first-child")}$(t.topScrollBarInnerSelector,i).width(r.outerWidth());i.width(e.width());i.scrollLeft(e.scrollLeft())};return this.each((function(){var e=$(this);i(e,t);if(t.resetOnWindowResize){var n;var r=function(n){i(e,t)};$(window).bind("resize.doubleScroll",(function(){clearTimeout(n);n=setTimeout(r,t.timeToWaitForResize)}))}}))};(function(e){if(typeof window==="undefined")return;var t=0,i=false,n=false,r="message",o=r.length,a="[iFrameSizer]",s=a.length,l=null,u=window.requestAnimationFrame,c={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},d={},f=null,p={autoResize:true,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:true,inPageLinks:false,enablePublicMethods:true,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:false,maxHeight:Infinity,maxWidth:Infinity,minHeight:0,minWidth:0,mouseEvents:true,resizeFrom:"parent",scrolling:false,sizeHeight:true,sizeWidth:false,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",onClose:function(){return true},onClosed:function(){},onInit:function(){},onMessage:function(){A("onMessage function not defined")},onMouseEnter:function(){},onMouseLeave:function(){},onResized:function(){},onScroll:function(){return true}};function h(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function g(e,t,i){e.addEventListener(t,i,false)}function m(e,t,i){e.removeEventListener(t,i,false)}function v(){var e=["moz","webkit","o","ms"];var t;for(t=0;t<e.length&&!u;t+=1){u=window[e[t]+"RequestAnimationFrame"]}if(!u){w("setup","RequestAnimationFrame not supported")}else{u=u.bind(window)}}function y(e){var t="Host page: "+e;if(window.top!==window.self){t=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+e:"Nested host page: "+e}return t}function b(e){return a+"["+y(e)+"]"}function _(e){return d[e]?d[e].log:i}function w(e,t){E("log",e,t,_(e))}function C(e,t){E("info",e,t,_(e))}function A(e,t){E("warn",e,t,true)}function E(e,t,i,n){if(true===n&&"object"===typeof window.console){console[e](b(t),i)}}function x(e){function t(){function e(){P(q);O(X);j("onResized",q)}u("Height");u("Width");I(e,q,"init")}function i(){var e=Y.substr(s).split(":");var t=e[1]?parseInt(e[1],10):0;var i=d[e[0]]&&d[e[0]].iframe;var o=getComputedStyle(i);return{iframe:i,id:e[0],height:t+n(o)+r(o),width:e[2],type:e[3]}}function n(e){if(e.boxSizing!=="border-box"){return 0}var t=e.paddingTop?parseInt(e.paddingTop,10):0;var i=e.paddingBottom?parseInt(e.paddingBottom,10):0;return t+i}function r(e){if(e.boxSizing!=="border-box"){return 0}var t=e.borderTopWidth?parseInt(e.borderTopWidth,10):0;var i=e.borderBottomWidth?parseInt(e.borderBottomWidth,10):0;return t+i}function u(e){var t=Number(d[X]["max"+e]),i=Number(d[X]["min"+e]),n=e.toLowerCase(),r=Number(q[n]);w(X,"Checking "+n+" is in range "+i+"-"+t);if(r<i){r=i;w(X,"Set "+n+" to min value")}if(r>t){r=t;w(X,"Set "+n+" to max value")}q[n]=""+r}function c(){function t(){function e(){var e=0,t=false;w(X,"Checking connection is from allowed list of origins: "+n);for(;e<n.length;e++){if(n[e]===i){t=true;break}}return t}function t(){var e=d[X]&&d[X].remoteHost;w(X,"Checking connection is from: "+e);return i===e}return n.constructor===Array?e():t()}var i=e.origin,n=d[X]&&d[X].checkOrigin;if(n&&""+i!=="null"&&!t()){throw new Error("Unexpected message received from: "+i+" for "+q.iframe.id+". Message was: "+e.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.")}return true}function f(){return a===(""+Y).substr(0,s)&&Y.substr(s).split(":")[0]in d}function p(){var e=q.type in{true:1,false:1,undefined:1};if(e){w(X,"Ignoring init message from meta parent page")}return e}function h(e){return Y.substr(Y.indexOf(":")+o+e)}function v(e){w(X,"onMessage passed: {iframe: "+q.iframe.id+", message: "+e+"}");j("onMessage",{iframe:q.iframe,message:JSON.parse(e)});w(X,"--")}function y(){var e=document.body.getBoundingClientRect(),t=q.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:t.height,iframeWidth:t.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(t.top-e.top,10),offsetLeft:parseInt(t.left-e.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth,windowHeight:window.innerHeight,windowWidth:window.innerWidth})}function b(e,t){function i(){M("Send Page Info","pageInfo:"+y(),e,t)}H(i,32,t)}function _(){function e(e,i){function r(){if(d[n]){b(d[n].iframe,n)}else{t()}}["scroll","resize"].forEach((function(t){w(n,e+t+" listener for sendPageInfo");i(window,t,r)}))}function t(){e("Remove ",m)}function i(){e("Add ",g)}var n=X;i();if(d[n]){d[n].stopPageInfo=t}}function E(){if(d[X]&&d[X].stopPageInfo){d[X].stopPageInfo();delete d[X].stopPageInfo}}function x(){var e=true;if(null===q.iframe){A(X,"IFrame ("+q.id+") not found");e=false}return e}function S(e){var t=e.getBoundingClientRect();k(X);return{x:Math.floor(Number(t.left)+Number(l.x)),y:Math.floor(Number(t.top)+Number(l.y))}}function F(e){function t(){l=o;G();w(X,"--")}function i(){return{x:Number(q.width)+r.x,y:Number(q.height)+r.y}}function n(){if(window.parentIFrame){window.parentIFrame["scrollTo"+(e?"Offset":"")](o.x,o.y)}else{A(X,"Unable to scroll to requested position, window.parentIFrame not found")}}var r=e?S(q.iframe):{x:0,y:0},o=i();w(X,"Reposition requested from iFrame (offset x:"+r.x+" y:"+r.y+")");if(window.top!==window.self){n()}else{t()}}function G(){if(false!==j("onScroll",l)){O(X)}else{R()}}function $(e){function t(){var e=S(o);w(X,"Moving to in page link (#"+n+") at x: "+e.x+" y: "+e.y);l={x:e.x,y:e.y};G();w(X,"--")}function i(){if(window.parentIFrame){window.parentIFrame.moveToAnchor(n)}else{w(X,"In page link #"+n+" not found and window.parentIFrame not found")}}var n=e.split("#")[1]||"",r=decodeURIComponent(n),o=document.getElementById(r)||document.getElementsByName(r)[0];if(o){t()}else if(window.top!==window.self){i()}else{w(X,"In page link #"+n+" not found")}}function W(e){var t={};if(Number(q.width)===0&&Number(q.height)===0){var i=h(9).split(":");t={x:i[1],y:i[0]}}else{t={x:q.width,y:q.height}}j(e,{iframe:q.iframe,screenX:Number(t.x),screenY:Number(t.y),type:q.type})}function j(e,t){return T(X,e,t)}function B(){if(d[X]&&d[X].firstRun)U();switch(q.type){case"close":D(q.iframe);break;case"message":v(h(6));break;case"mouseenter":W("onMouseEnter");break;case"mouseleave":W("onMouseLeave");break;case"autoResize":d[X].autoResize=JSON.parse(h(9));break;case"scrollTo":F(false);break;case"scrollToOffset":F(true);break;case"pageInfo":b(d[X]&&d[X].iframe,X);_();break;case"pageInfoStop":E();break;case"inPageLink":$(h(9));break;case"reset":N(q);break;case"init":t();j("onInit",q.iframe);break;default:if(Number(q.width)===0&&Number(q.height)===0){A("Unsupported message received ("+q.type+"), this is likely due to the iframe containing a later "+"version of iframe-resizer than the parent page")}else{t()}}}function V(e){var t=true;if(!d[e]){t=false;A(q.type+" No settings for "+e+". Message was: "+Y)}return t}function z(){for(var e in d){M("iFrame requested init",L(e),d[e].iframe,e)}}function U(){if(d[X]){d[X].firstRun=false}}var Y=e.data,q={},X=null;if("[iFrameResizerChild]Ready"===Y){z()}else if(f()){q=i();X=q.id;if(d[X]){d[X].loaded=true}if(!p()&&V(X)){w(X,"Received: "+Y);if(x()&&c()){B()}}}else{C(X,"Ignored: "+Y)}}function T(e,t,i){var n=null,r=null;if(d[e]){n=d[e][t];if("function"===typeof n){r=n(i)}else{throw new TypeError(t+" on iFrame["+e+"] is not a function")}}return r}function S(e){var t=e.id;delete d[t]}function D(e){var t=e.id;if(T(t,"onClose",t)===false){w(t,"Close iframe cancelled by onClose event");return}w(t,"Removing iFrame: "+t);try{if(e.parentNode){e.parentNode.removeChild(e)}}catch(e){A(e)}T(t,"onClosed",t);w(t,"--");S(e)}function k(t){if(null===l){l={x:window.pageXOffset!==e?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==e?window.pageYOffset:document.documentElement.scrollTop};w(t,"Get page position: "+l.x+","+l.y)}}function O(e){if(null!==l){window.scrollTo(l.x,l.y);w(e,"Set page position: "+l.x+","+l.y);R()}}function R(){l=null}function N(e){function t(){P(e);M("reset","reset",e.iframe,e.id)}w(e.id,"Size reset requested by "+("init"===e.type?"host page":"iFrame"));k(e.id);I(t,e,"reset")}function P(e){function t(t){if(!e.id){w("undefined","messageData id not set");return}e.iframe.style[t]=e[t]+"px";w(e.id,"IFrame ("+o+") "+t+" set to "+e[t]+"px")}function i(t){if(!n&&"0"===e[t]){n=true;w(o,"Hidden iFrame detected, creating visibility listener");j()}}function r(e){t(e);i(e)}var o=e.iframe.id;if(d[o]){if(d[o].sizeHeight){r("height")}if(d[o].sizeWidth){r("width")}}}function I(e,t,i){if(i!==t.type&&u&&!window.jasmine){w(t.id,"Requesting animation frame");u(e)}else{e()}}function M(e,t,i,n,r){function o(){var r=d[n]&&d[n].targetOrigin;w(n,"["+e+"] Sending msg to iframe["+n+"] ("+t+") targetOrigin: "+r);i.contentWindow.postMessage(a+t,r)}function s(){A(n,"["+e+"] IFrame("+n+") not found")}function l(){if(i&&"contentWindow"in i&&null!==i.contentWindow){o()}else{s()}}function u(){function e(){if(d[n]&&!d[n].loaded&&!c){c=true;A(n,"IFrame has not responded within "+d[n].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning.")}}if(!!r&&d[n]&&!!d[n].warningTimeout){d[n].msgTimeout=setTimeout(e,d[n].warningTimeout)}}var c=false;n=n||i.id;if(d[n]){l();u()}}function L(e){return e+":"+d[e].bodyMarginV1+":"+d[e].sizeWidth+":"+d[e].log+":"+d[e].interval+":"+d[e].enablePublicMethods+":"+d[e].autoResize+":"+d[e].bodyMargin+":"+d[e].heightCalculationMethod+":"+d[e].bodyBackground+":"+d[e].bodyPadding+":"+d[e].tolerance+":"+d[e].inPageLinks+":"+d[e].resizeFrom+":"+d[e].widthCalculationMethod+":"+d[e].mouseEvents}function F(e){return typeof e==="number"}function G(n,r){function o(){function e(e){var t=d[T][e];if(Infinity!==t&&0!==t){n.style[e]=F(t)?t+"px":t;w(T,"Set "+e+" = "+n.style[e])}}function t(e){if(d[T]["min"+e]>d[T]["max"+e]){throw new Error("Value for min"+e+" can not be greater than max"+e)}}t("Height");t("Width");e("maxHeight");e("minHeight");e("maxWidth");e("minWidth")}function a(){var e=r&&r.id||p.id+t++;if(null!==document.getElementById(e)){e+=t++}return e}function s(e){if(""===e){n.id=e=a();i=(r||{}).log;w(e,"Added missing iframe ID: "+e+" ("+n.src+")")}return e}function l(){w(T,"IFrame scrolling "+(d[T]&&d[T].scrolling?"enabled":"disabled")+" for "+T);n.style.overflow=false===(d[T]&&d[T].scrolling)?"hidden":"auto";switch(d[T]&&d[T].scrolling){case"omit":break;case true:n.scrolling="yes";break;case false:n.scrolling="no";break;default:n.scrolling=d[T]?d[T].scrolling:"no"}}function u(){if("number"===typeof(d[T]&&d[T].bodyMargin)||"0"===(d[T]&&d[T].bodyMargin)){d[T].bodyMarginV1=d[T].bodyMargin;d[T].bodyMargin=""+d[T].bodyMargin+"px"}}function f(){var e=d[T]&&d[T].firstRun,t=d[T]&&d[T].heightCalculationMethod in c;if(!e&&t){N({iframe:n,height:0,width:0,type:"init"})}}function m(){if(d[T]){d[T].iframe.iFrameResizer={close:D.bind(null,d[T].iframe),removeListeners:S.bind(null,d[T].iframe),resize:M.bind(null,"Window resize","resize",d[T].iframe),moveToAnchor:function(e){M("Move to anchor","moveToAnchor:"+e,d[T].iframe,T)},sendMessage:function(e){e=JSON.stringify(e);M("Send Message","message:"+e,d[T].iframe,T)}}}}function v(t){function i(){M("iFrame.onload",t,n,e,true);f()}function r(e){if(!n.parentNode){return}var t=new e((function(e){e.forEach((function(e){var t=Array.prototype.slice.call(e.removedNodes);t.forEach((function(e){if(e===n){D(n)}}))}))}));t.observe(n.parentNode,{childList:true})}var o=h();if(o){r(o)}g(n,"load",i);M("init",t,n,e,true)}function y(e){if("object"!==typeof e){throw new TypeError("Options is not an object")}}function b(e){for(var t in p){if(Object.prototype.hasOwnProperty.call(p,t)){d[T][t]=Object.prototype.hasOwnProperty.call(e,t)?e[t]:p[t]}}}function _(e){return""===e||null!==e.match(/^(about:blank|javascript:|file:\/\/)/)?"*":e}function C(e){var t=e.split("Callback");if(t.length===2){var i="on"+t[0].charAt(0).toUpperCase()+t[0].slice(1);this[i]=this[e];delete this[e];A(T,"Deprecated: '"+e+"' has been renamed '"+i+"'. The old method will be removed in the next major version.")}}function E(e){e=e||{};d[T]={firstRun:true,iframe:n,remoteHost:n.src&&n.src.split("/").slice(0,3).join("/")};y(e);Object.keys(e).forEach(C,e);b(e);if(d[T]){d[T].targetOrigin=true===d[T].checkOrigin?_(d[T].remoteHost):"*"}}function x(){return T in d&&"iFrameResizer"in n}var T=s(n.id);if(!x()){E(r);l();o();u();v(L(T));m()}else{A(T,"Ignored iFrame, already setup.")}}function $(e,t){if(null===f){f=setTimeout((function(){f=null;e()}),t)}}var W={};function H(e,t,i){if(!W[i]){W[i]=setTimeout((function(){W[i]=null;e()}),t)}}function j(){function e(){function e(e){function t(t){return"0px"===(d[e]&&d[e].iframe.style[t])}function i(e){return null!==e.offsetParent}if(d[e]&&i(d[e].iframe)&&(t("height")||t("width"))){M("Visibility change","resize",d[e].iframe,e)}}Object.keys(d).forEach((function(t){e(t)}))}function t(t){w("window","Mutation observed: "+t[0].target+" "+t[0].type);$(e,16)}function i(){var e=document.querySelector("body"),i={attributes:true,attributeOldValue:false,characterData:true,characterDataOldValue:false,childList:true,subtree:true},r=new n(t);r.observe(e,i)}var n=h();if(n){i()}}function B(e){function t(){z("Window "+e,"resize")}w("window","Trigger event: "+e);$(t,16)}function V(){function e(){z("Tab Visable","resize")}if("hidden"!==document.visibilityState){w("document","Trigger event: Visiblity change");$(e,16)}}function z(e,t){function i(e){return d[e]&&"parent"===d[e].resizeFrom&&d[e].autoResize&&!d[e].firstRun}Object.keys(d).forEach((function(n){if(i(n)){M(e,t,d[n].iframe,n)}}))}function U(){g(window,"message",x);g(window,"resize",(function(){B("resize")}));g(document,"visibilitychange",V);g(document,"-webkit-visibilitychange",V)}function Y(){function t(e,t){function i(){if(!t.tagName){throw new TypeError("Object is not a valid DOM element")}else if("IFRAME"!==t.tagName.toUpperCase()){throw new TypeError("Expected <IFRAME> tag, found <"+t.tagName+">")}}if(t){i();G(t,e);n.push(t)}}function i(e){if(e&&e.enablePublicMethods){A("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}}var n;v();U();return function r(o,a){n=[];i(o);switch(typeof a){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(a||"iframe"),t.bind(e,o));break;case"object":t(o,a);break;default:throw new TypeError("Unexpected data type ("+typeof a+")")}return n}}function q(e){if(!e.fn){C("","Unable to bind to jQuery, it is not fully loaded.")}else if(!e.fn.iFrameResize){e.fn.iFrameResize=function e(t){function i(e,i){G(i,t)}return this.filter("iframe").each(i).end()}}}if(window.jQuery){q(window.jQuery)}if(typeof define==="function"&&define.amd){define([],Y)}else if(typeof module==="object"&&typeof module.exports==="object"){module.exports=Y()}window.iFrameResize=window.iFrameResize||Y()})();!function(e){function t(e){var t=document.createElement("input"),i="on"+e,n=i in t;return n||(t.setAttribute(i,"return;"),n="function"==typeof t[i]),t=null,n}function i(e){var t="text"==e||"tel"==e||"password"==e;if(!t){var i=document.createElement("input");i.setAttribute("type",e),t="text"===i.type,i=null}return t}function n(t,i,r){var o=r.aliases[t];return o?(o.alias&&n(o.alias,void 0,r),e.extend(!0,r,o),e.extend(!0,r,i),!0):!1}function r(t,i){function n(i){function n(e,t,i,n){this.matches=[],this.isGroup=e||!1,this.isOptional=t||!1,this.isQuantifier=i||!1,this.isAlternator=n||!1,this.quantifier={min:1,max:1}}function r(i,n,r){var o=t.definitions[n],a=0==i.matches.length;if(r=void 0!=r?r:i.matches.length,o&&!f){o.placeholder=e.isFunction(o.placeholder)?o.placeholder.call(this,t):o.placeholder;for(var s=o.prevalidator,l=s?s.length:0,u=1;u<o.cardinality;u++){var c=l>=u?s[u-1]:[],d=c.validator,p=c.cardinality;i.matches.splice(r++,0,{fn:d?"string"==typeof d?new RegExp(d):new function(){this.test=d}:new RegExp("."),cardinality:p?p:1,optionality:i.isOptional,newBlockMarker:a,casing:o.casing,def:o.definitionSymbol||n,placeholder:o.placeholder,mask:n})}i.matches.splice(r++,0,{fn:o.validator?"string"==typeof o.validator?new RegExp(o.validator):new function(){this.test=o.validator}:new RegExp("."),cardinality:o.cardinality,optionality:i.isOptional,newBlockMarker:a,casing:o.casing,def:o.definitionSymbol||n,placeholder:o.placeholder,mask:n})}else i.matches.splice(r++,0,{fn:null,cardinality:0,optionality:i.isOptional,newBlockMarker:a,casing:null,def:n,placeholder:void 0,mask:n}),f=!1}for(var o,a,s,l,u,c,d=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})\??|[^.?*+^${[]()|\\]+|./g,f=!1,p=new n,h=[],g=[];o=d.exec(i);)switch(a=o[0],a.charAt(0)){case t.optionalmarker.end:case t.groupmarker.end:if(s=h.pop(),h.length>0){if(l=h[h.length-1],l.matches.push(s),l.isAlternator){u=h.pop();for(var m=0;m<u.matches.length;m++)u.matches[m].isGroup=!1;h.length>0?(l=h[h.length-1],l.matches.push(u)):p.matches.push(u)}}else p.matches.push(s);break;case t.optionalmarker.start:h.push(new n(!1,!0));break;case t.groupmarker.start:h.push(new n(!0));break;case t.quantifiermarker.start:var v=new n(!1,!1,!0);a=a.replace(/[{}]/g,"");var y=a.split(","),b=isNaN(y[0])?y[0]:parseInt(y[0]),_=1==y.length?b:isNaN(y[1])?y[1]:parseInt(y[1]);if(("*"==_||"+"==_)&&(b="*"==_?0:1),v.quantifier={min:b,max:_},h.length>0){var w=h[h.length-1].matches;if(o=w.pop(),!o.isGroup){var C=new n(!0);C.matches.push(o),o=C}w.push(o),w.push(v)}else{if(o=p.matches.pop(),!o.isGroup){var C=new n(!0);C.matches.push(o),o=C}p.matches.push(o),p.matches.push(v)}break;case t.escapeChar:f=!0;break;case t.alternatormarker:h.length>0?(l=h[h.length-1],c=l.matches.pop()):c=p.matches.pop(),c.isAlternator?h.push(c):(u=new n(!1,!1,!1,!0),u.matches.push(c),h.push(u));break;default:if(h.length>0){if(l=h[h.length-1],l.matches.length>0&&!l.isAlternator&&(c=l.matches[l.matches.length-1],c.isGroup&&(c.isGroup=!1,r(c,t.groupmarker.start,0),r(c,t.groupmarker.end))),r(l,a),l.isAlternator){u=h.pop();for(var m=0;m<u.matches.length;m++)u.matches[m].isGroup=!1;h.length>0?(l=h[h.length-1],l.matches.push(u)):p.matches.push(u)}}else p.matches.length>0&&(c=p.matches[p.matches.length-1],c.isGroup&&(c.isGroup=!1,r(c,t.groupmarker.start,0),r(c,t.groupmarker.end))),r(p,a)}return p.matches.length>0&&(c=p.matches[p.matches.length-1],c.isGroup&&(c.isGroup=!1,r(c,t.groupmarker.start,0),r(c,t.groupmarker.end)),g.push(p)),g}function r(r,o){if(void 0==r||""==r)return void 0;if(1==r.length&&0==t.greedy&&0!=t.repeat&&(t.placeholder=""),t.repeat>0||"*"==t.repeat||"+"==t.repeat){var a="*"==t.repeat?0:"+"==t.repeat?1:t.repeat;r=t.groupmarker.start+r+t.groupmarker.end+t.quantifiermarker.start+a+","+t.repeat+t.quantifiermarker.end}var s;return void 0==e.inputmask.masksCache[r]||i===!0?(s={mask:r,maskToken:n(r),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},metadata:o},i!==!0&&(e.inputmask.masksCache[r]=s)):s=e.extend(!0,{},e.inputmask.masksCache[r]),s}function o(e){if(e=e.toString(),t.numericInput){e=e.split("").reverse();for(var i=0;i<e.length;i++)e[i]==t.optionalmarker.start?e[i]=t.optionalmarker.end:e[i]==t.optionalmarker.end?e[i]=t.optionalmarker.start:e[i]==t.groupmarker.start?e[i]=t.groupmarker.end:e[i]==t.groupmarker.end&&(e[i]=t.groupmarker.start);e=e.join("")}return e}var a=void 0;if(e.isFunction(t.mask)&&(t.mask=t.mask.call(this,t)),e.isArray(t.mask)){if(t.mask.length>1){t.keepStatic=void 0==t.keepStatic?!0:t.keepStatic;var s="(";return e.each(t.mask,(function(t,i){s.length>1&&(s+=")|("),s+=o(void 0==i.mask||e.isFunction(i.mask)?i:i.mask)})),s+=")",r(s,t.mask)}t.mask=t.mask.pop()}return t.mask&&(a=void 0==t.mask.mask||e.isFunction(t.mask.mask)?r(o(t.mask),t.mask):r(o(t.mask.mask),t.mask)),a}function o(n,r,o){function a(e,t,i){t=t||0;var n,r,o,a=[],s=0;do{if(e===!0&&d().validPositions[s]){var l=d().validPositions[s];r=l.match,n=l.locator.slice(),a.push(i===!0?l.input:N(s,r))}else o=m(s,n,s-1),r=o.match,n=o.locator.slice(),a.push(N(s,r));s++}while((void 0==ne||ne>s-1)&&null!=r.fn||null==r.fn&&""!=r.def||t>=s);return a.pop(),a}function d(){return r}function f(e){var t=d();t.buffer=void 0,t.tests={},e!==!0&&(t._buffer=void 0,t.validPositions={},t.p=0)}function p(e,t){var i=d(),n=-1,r=i.validPositions;void 0==e&&(e=-1);var o=n,a=n;for(var s in r){var l=parseInt(s);r[l]&&(t||null!=r[l].match.fn)&&(e>=l&&(o=l),l>=e&&(a=l))}return n=-1!=o&&e-o>1||e>a?o:a}function h(t,i,n){if(o.insertMode&&void 0!=d().validPositions[t]&&void 0==n){var r,a=e.extend(!0,{},d().validPositions),s=p();for(r=t;s>=r;r++)delete d().validPositions[r];d().validPositions[t]=i;var l,u=!0,c=d().validPositions;for(r=l=t;s>=r;r++){var f=a[r];if(void 0!=f)for(var h=l,g=-1;h<S()&&(null==f.match.fn&&c[r]&&(c[r].match.optionalQuantifier===!0||c[r].match.optionality===!0)||null!=f.match.fn);){if(null==f.match.fn||!o.keepStatic&&c[r]&&(void 0!=c[r+1]&&b(r+1,c[r].locator.slice(),r).length>1||void 0!=c[r].alternation)?h++:h=D(l),y(h,f.match.def)){u=x(h,f.input,!0,!0)!==!1,l=h;break}if(u=null==f.match.fn,g==h)break;g=h}if(!u)break}if(!u)return d().validPositions=e.extend(!0,{},a),!1}else d().validPositions[t]=i;return!0}function g(e,t,i,n){var r,a=e;d().p=e,void 0!=d().validPositions[e]&&d().validPositions[e].input==o.radixPoint&&(t++,a++);for(r=a;t>r;r++)void 0!=d().validPositions[r]&&(i===!0||0!=o.canClearPosition(d(),r,p(),n,o))&&delete d().validPositions[r];for(f(!0),r=a+1;r<=p();){for(;void 0!=d().validPositions[a];)a++;var s=d().validPositions[a];a>r&&(r=a+1);var l=d().validPositions[r];void 0!=l&&void 0==s?(y(a,l.match.def)&&x(a,l.input,!0)!==!1&&(delete d().validPositions[r],r++),a++):r++}var u=p(),c=S();for(u>=e&&void 0!=d().validPositions[u]&&d().validPositions[u].input==o.radixPoint&&delete d().validPositions[u],r=u+1;c>=r;r++)d().validPositions[r]&&delete d().validPositions[r];f(!0)}function m(e,t,i){var n=d().validPositions[e];if(void 0==n)for(var r=b(e,t,i),a=p(),s=d().validPositions[a]||b(0)[0],l=void 0!=s.alternation?s.locator[s.alternation].toString().split(","):[],u=0;u<r.length&&(n=r[u],!(n.match&&(o.greedy&&n.match.optionalQuantifier!==!0||(n.match.optionality===!1||n.match.newBlockMarker===!1)&&n.match.optionalQuantifier!==!0)&&(void 0==s.alternation||s.alternation!=n.alternation||void 0!=n.locator[s.alternation]&&E(n.locator[s.alternation].toString().split(","),l))));u++);return n}function v(e){return d().validPositions[e]?d().validPositions[e].match:b(e)[0].match}function y(e,t){for(var i=!1,n=b(e),r=0;r<n.length;r++)if(n[r].match&&n[r].match.def==t){i=!0;break}return i}function b(t,i,n,r){function o(i,n,r,a){function l(r,a,p){if(s>1e4)return alert("jquery.inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+d().mask),!0;if(s==t&&void 0==r.matches)return u.push({match:r,locator:a.reverse()}),!0;if(void 0!=r.matches){if(r.isGroup&&p!==!0){if(r=l(i.matches[f+1],a))return!0}else if(r.isOptional){var h=r;if(r=o(r,n,a,p)){var g=u[u.length-1].match,m=0==e.inArray(g,h.matches);if(!m)return!0;c=!0,s=t}}else if(r.isAlternator){var v,y=r,b=[],_=u.slice(),w=a.length,C=n.length>0?n.shift():-1;if(-1==C||"string"==typeof C){var A=s,E=n.slice(),x=[];"string"==typeof C&&(x=C.split(","));for(var T=0;T<y.matches.length;T++){if(u=[],r=l(y.matches[T],[T].concat(a),p)||r,r!==!0&&void 0!=r&&x[x.length-1]<y.matches.length){var S=i.matches.indexOf(r)+1;i.matches.length>S&&(r=l(i.matches[S],[S].concat(a.slice(1,a.length)),p),r&&(x.push(S.toString()),e.each(u,(function(e,t){t.alternation=a.length-1}))))}v=u.slice(),s=A,u=[];for(var D=0;D<E.length;D++)n[D]=E[D];for(var k=0;k<v.length;k++){var O=v[k];O.alternation=O.alternation||w;for(var R=0;R<b.length;R++){var N=b[R];if(O.match.mask==N.match.mask&&("string"!=typeof C||-1!=e.inArray(O.locator[O.alternation].toString(),x))){v.splice(k,1),k--,N.locator[O.alternation]=N.locator[O.alternation]+","+O.locator[O.alternation],N.alternation=O.alternation;break}}}b=b.concat(v)}"string"==typeof C&&(b=e.map(b,(function(t,i){if(isFinite(i)){var n,r=t.alternation,o=t.locator[r].toString().split(",");t.locator[r]=void 0,t.alternation=void 0;for(var a=0;a<o.length;a++)n=-1!=e.inArray(o[a],x),n&&(void 0!=t.locator[r]?(t.locator[r]+=",",t.locator[r]+=o[a]):t.locator[r]=parseInt(o[a]),t.alternation=r);if(void 0!=t.locator[r])return t}}))),u=_.concat(b),s=t,c=u.length>0}else r=y.matches[C]?l(y.matches[C],[C].concat(a),p):!1;if(r)return!0}else if(r.isQuantifier&&p!==!0)for(var P=r,I=n.length>0&&p!==!0?n.shift():0;I<(isNaN(P.quantifier.max)?I+1:P.quantifier.max)&&t>=s;I++){var M=i.matches[e.inArray(P,i.matches)-1];if(r=l(M,[I].concat(a),!0)){var g=u[u.length-1].match;g.optionalQuantifier=I>P.quantifier.min-1;var m=0==e.inArray(g,M.matches);if(m){if(I>P.quantifier.min-1){c=!0,s=t;break}return!0}return!0}}else if(r=o(r,n,a,p))return!0}else s++}for(var f=n.length>0?n.shift():0;f<i.matches.length;f++)if(i.matches[f].isQuantifier!==!0){var p=l(i.matches[f],[f].concat(r),a);if(p&&s==t)return p;if(s>t)break}}var a=d().maskToken,s=i?n:0,l=i||[0],u=[],c=!1;if(r===!0&&d().tests[t])return d().tests[t];if(void 0==i){for(var f,p=t-1;void 0==(f=d().validPositions[p])&&p>-1&&(!d().tests[p]||void 0==(f=d().tests[p][0]));)p--;void 0!=f&&p>-1&&(s=p,l=f.locator.slice())}for(var h=l.shift();h<a.length;h++){var g=o(a[h],l,[h]);if(g&&s==t||s>t)break}return(0==u.length||c)&&u.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:""},locator:[]}),d().tests[t]=e.extend(!0,[],u),d().tests[t]}function _(){return void 0==d()._buffer&&(d()._buffer=a(!1,1)),d()._buffer}function w(){return void 0==d().buffer&&(d().buffer=a(!0,p(),!0)),d().buffer}function C(e,t,i){if(i=i||w().slice(),e===!0)f(),e=0,t=i.length;else for(var n=e;t>n;n++)delete d().validPositions[n],delete d().tests[n];for(var n=e;t>n;n++)i[n]!=o.skipOptionalPartCharacter&&x(n,i[n],!0,!0)}function A(e,t){switch(t.casing){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e}function E(t,i){for(var n=o.greedy?i:i.slice(0,1),r=!1,a=0;a<t.length;a++)if(-1!=e.inArray(t[a],n)){r=!0;break}return r}function x(t,i,n,r){function a(t,i,n,r){var a=!1;return e.each(b(t),(function(s,l){for(var u=l.match,c=i?1:0,m="",v=(w(),u.cardinality);v>c;v--)m+=O(t-(v-1));if(i&&(m+=i),a=null!=u.fn?u.fn.test(m,d(),t,n,o):i!=u.def&&i!=o.skipOptionalPartCharacter||""==u.def?!1:{c:u.def,pos:t},a!==!1){var y=void 0!=a.c?a.c:i;y=y==o.skipOptionalPartCharacter&&null===u.fn?u.def:y;var b=t,_=w();if(void 0!=a.remove&&(e.isArray(a.remove)||(a.remove=[a.remove]),e.each(a.remove.sort((function(e,t){return t-e})),(function(e,t){g(t,t+1,!0)}))),void 0!=a.insert&&(e.isArray(a.insert)||(a.insert=[a.insert]),e.each(a.insert.sort((function(e,t){return e-t})),(function(e,t){x(t.pos,t.c,!0)}))),a.refreshFromBuffer){var E=a.refreshFromBuffer;if(n=!0,C(E===!0?E:E.start,E.end,_),void 0==a.pos&&void 0==a.c)return a.pos=p(),!1;if(b=void 0!=a.pos?a.pos:t,b!=t)return a=e.extend(a,x(b,y,!0)),!1}else if(a!==!0&&void 0!=a.pos&&a.pos!=t&&(b=a.pos,C(t,b),b!=t))return a=e.extend(a,x(b,y,!0)),!1;return 1!=a&&void 0==a.pos&&void 0==a.c?!1:(s>0&&f(!0),h(b,e.extend({},l,{input:A(y,u)}),r)||(a=!1),!1)}})),a}function s(t,i,n,r){for(var a,s,l,u,c=e.extend(!0,{},d().validPositions),h=p();h>=0&&(u=d().validPositions[h],!u||void 0==u.alternation||(a=h,s=d().validPositions[a].alternation,m(a).locator[u.alternation]==u.locator[u.alternation]));h--);if(void 0!=s)for(var g in d().validPositions)if(u=d().validPositions[g],parseInt(g)>parseInt(a)&&void 0!=u.alternation){var v=d().validPositions[a].locator[s].toString().split(","),y=u.locator[s]||v[0];y.length>0&&(y=y.split(",")[0]);for(var b=0;b<v.length;b++)if(y<v[b]){for(var _,w,C=g-1;C>=0;C--)if(_=d().validPositions[C],void 0!=_){w=_.locator[s],_.locator[s]=parseInt(v[b]);break}if(y!=_.locator[s]){for(var A=[],E=g;E<p()+1;E++){var T=d().validPositions[E];T&&null!=T.match.fn&&A.push(T.input),delete d().validPositions[E],delete d().tests[E]}for(f(!0),o.keepStatic=!o.keepStatic,l=!0;A.length>0;){var S=A.shift();if(S!=o.skipOptionalPartCharacter&&!(l=x(p()+1,S,!1,!0)))break}if(_.alternation=s,_.locator[s]=w,l){var D=p(t)+1;l=x(t>D?D:t,i,n,r)}if(o.keepStatic=!o.keepStatic,l)return l;f(),d().validPositions=e.extend(!0,{},c)}}break}return!1}function l(t,i){for(var n=d().validPositions[i],r=n.locator,o=r.length,a=t;i>a;a++)if(!T(a)){var s=b(a),l=s[0],u=-1;e.each(s,(function(e,t){for(var i=0;o>i;i++)t.locator[i]&&E(t.locator[i].toString().split(","),r[i].toString().split(","))&&i>u&&(u=i,l=t)})),h(a,e.extend({},l,{input:l.match.def}),!0)}}n=n===!0;for(var u=w(),c=t-1;c>-1&&!d().validPositions[c];c--);for(c++;t>c;c++)void 0==d().validPositions[c]&&((!T(c)||u[c]!=N(c))&&b(c).length>1||u[c]==o.radixPoint||"0"==u[c]&&e.inArray(o.radixPoint,u)<c)&&a(c,u[c],!0);var v=t,y=!1,_=e.extend(!0,{},d().validPositions);if(v<S()&&(y=a(v,i,n,r),(!n||r)&&y===!1)){var k=d().validPositions[v];if(!k||null!=k.match.fn||k.match.def!=i&&i!=o.skipOptionalPartCharacter){if((o.insertMode||void 0==d().validPositions[D(v)])&&!T(v))for(var R=v+1,P=D(v);P>=R;R++)if(y=a(R,i,n,r),y!==!1){l(v,R),v=R;break}}else y={caret:D(v)}}if(y===!1&&o.keepStatic&&W(u)&&(y=s(t,i,n,r)),y===!0&&(y={pos:v}),e.isFunction(o.postValidation)&&0!=y&&!n){f(!0);var I=o.postValidation(w(),o);if(!I)return f(!0),d().validPositions=e.extend(!0,{},_),!1}return y}function T(e){var t=v(e);if(null!=t.fn)return t.fn;if(!o.keepStatic&&void 0==d().validPositions[e]){for(var i=b(e),n=!0,r=0;r<i.length;r++)if(""!=i[r].match.def&&(void 0==i[r].alternation||i[r].locator[i[r].alternation].length>1)){n=!1;break}return n}return!1}function S(){var e;ne=ie.prop("maxLength"),-1==ne&&(ne=void 0);var t,i=p(),n=d().validPositions[i],r=void 0!=n?n.locator.slice():void 0;for(t=i+1;void 0==n||null!=n.match.fn||null==n.match.fn&&""!=n.match.def;t++)n=m(t,r,t-1),r=n.locator.slice();var o=v(t-1);return e=""!=o.def?t:t-1,void 0==ne||ne>e?e:ne}function D(e){var t=S();if(e>=t)return t;for(var i=e;++i<t&&!T(i)&&(o.nojumps!==!0||o.nojumpsThreshold>i););return i}function k(e){var t=e;if(0>=t)return 0;for(;--t>0&&!T(t););return t}function O(e){return void 0==d().validPositions[e]?N(e):d().validPositions[e].input}function R(t,i,n,r,a){if(r&&e.isFunction(o.onBeforeWrite)){var s=o.onBeforeWrite.call(t,r,i,n,o);if(s){if(s.refreshFromBuffer){var l=s.refreshFromBuffer;C(l===!0?l:l.start,l.end,s.buffer),f(!0),i=w()}n=s.caret||n}}t._valueSet(i.join("")),void 0!=n&&F(t,n),a===!0&&(ae=!0,e(t).trigger("input"))}function N(e,t){if(t=t||v(e),void 0!=t.placeholder)return t.placeholder;if(null==t.fn){if(!o.keepStatic&&void 0==d().validPositions[e]){for(var i=b(e),n=!0,r=0;r<i.length;r++)if(""!=i[r].match.def&&(null!==i[r].match.fn||void 0==i[r].alternation||i[r].locator[i[r].alternation].length>1)){n=!1;break}if(n)return o.placeholder.charAt(e%o.placeholder.length)}return t.def}return o.placeholder.charAt(e%o.placeholder.length)}function P(t,i,n,r){function o(){var e=!1,t=_().slice(l,D(l)).join("").indexOf(s);if(-1!=t&&!T(l)){e=!0;for(var i=_().slice(l,l+t),n=0;n<i.length;n++)if(" "!=i[n]){e=!1;break}}return e}var a=void 0!=r?r.slice():t._valueGet().split(""),s="",l=0;if(f(),d().p=D(-1),i&&t._valueSet(""),!n){var u=_().slice(0,D(-1)).join(""),c=a.join("").match(new RegExp("^"+I(u),"g"));c&&c.length>0&&(a.splice(0,c.length*u.length),l=D(l))}e.each(a,(function(i,r){var a=e.Event("keypress");a.which=r.charCodeAt(0),s+=r;var u=p(void 0,!0),c=d().validPositions[u],f=m(u+1,c?c.locator.slice():void 0,u);if(!o()||n){var h=n?i:null==f.match.fn&&f.match.optionality&&u+1<d().p?u+1:d().p;U.call(t,a,!0,!1,n,h),l=h+1,s=""}else U.call(t,a,!0,!1,!0,u+1)})),i&&R(t,w(),e(t).is(":focus")?D(p(0)):void 0,e.Event("checkval"))}function I(t){return e.inputmask.escapeRegex(t)}function M(t){if(t.data("_inputmask")&&!t.hasClass("hasDatepicker")){var i=[],n=d().validPositions;for(var r in n)n[r].match&&null!=n[r].match.fn&&i.push(n[r].input);var a=(re?i.reverse():i).join(""),s=(re?w().slice().reverse():w()).join("");return e.isFunction(o.onUnMask)&&(a=o.onUnMask.call(t,s,a,o)||a),a}return t[0]._valueGet()}function L(e){if(re&&"number"==typeof e&&(!o.greedy||""!=o.placeholder)){var t=w().length;e=t-e}return e}function F(t,i,n){var r,a=t.jquery&&t.length>0?t[0]:t;if("number"!=typeof i)return a.setSelectionRange?(i=a.selectionStart,n=a.selectionEnd):window.getSelection?(r=window.getSelection().getRangeAt(0),(r.commonAncestorContainer.parentNode==a||r.commonAncestorContainer==a)&&(i=r.startOffset,n=r.endOffset)):document.selection&&document.selection.createRange&&(r=document.selection.createRange(),i=0-r.duplicate().moveStart("character",-1e5),n=i+r.text.length),{begin:L(i),end:L(n)};if(i=L(i),n=L(n),n="number"==typeof n?n:i,e(a).is(":visible")){var s=e(a).css("font-size").replace("px","")*n;if(a.scrollLeft=s>a.scrollWidth?s:0,l||0!=o.insertMode||i!=n||n++,a.setSelectionRange)a.selectionStart=i,a.selectionEnd=n;else if(window.getSelection){if(r=document.createRange(),void 0==a.firstChild){var u=document.createTextNode("");a.appendChild(u)}r.setStart(a.firstChild,i<a._valueGet().length?i:a._valueGet().length),r.setEnd(a.firstChild,n<a._valueGet().length?n:a._valueGet().length),r.collapse(!0);var c=window.getSelection();c.removeAllRanges(),c.addRange(r)}else a.createTextRange&&(r=a.createTextRange(),r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",i),r.select())}}function G(t){var i,n,r=w(),o=r.length,a=p(),s={},l=d().validPositions[a],u=void 0!=l?l.locator.slice():void 0;for(i=a+1;i<r.length;i++)n=m(i,u,i-1),u=n.locator.slice(),s[i]=e.extend(!0,{},n);var c=l&&void 0!=l.alternation?l.locator[l.alternation]:void 0;for(i=o-1;i>a&&(n=s[i],(n.match.optionality||n.match.optionalQuantifier||c&&(c!=s[i].locator[l.alternation]&&null!=n.match.fn||null==n.match.fn&&n.locator[l.alternation]&&E(n.locator[l.alternation].toString().split(","),c.split(","))&&""!=b(i)[0].def))&&r[i]==N(i,n.match));i--)o--;return t?{l:o,def:s[o]?s[o].match:void 0}:o}function $(e){for(var t=G(),i=e.length-1;i>t&&!T(i);i--);return e.splice(t,i+1-t),e}function W(t){if(e.isFunction(o.isComplete))return o.isComplete.call(ie,t,o);if("*"==o.repeat)return void 0;{var i=!1,n=G(!0),r=k(n.l);p()}if(void 0==n.def||n.def.newBlockMarker||n.def.optionality||n.def.optionalQuantifier){i=!0;for(var a=0;r>=a;a++){var s=m(a).match;if(null!=s.fn&&void 0==d().validPositions[a]&&s.optionality!==!0&&s.optionalQuantifier!==!0||null==s.fn&&t[a]!=N(a,s)){i=!1;break}}}return i}function H(e,t){return re?e-t>1||e-t==1&&o.insertMode:t-e>1||t-e==1&&o.insertMode}function j(t){var i=e._data(t).events,n=!1;e.each(i,(function(t,i){e.each(i,(function(t,i){if("inputmask"==i.namespace&&"setvalue"!=i.type){var r=i.handler;i.handler=function(t){if(!(this.disabled||this.readOnly&&!("keydown"==t.type&&t.ctrlKey&&67==t.keyCode||t.keyCode==e.inputmask.keyCode.TAB))){switch(t.type){case"input":if(ae===!0||n===!0)return ae=!1,t.preventDefault();break;case"keydown":oe=!1,n=!1;break;case"keypress":if(oe===!0)return t.preventDefault();oe=!0;break;case"compositionstart":n=!0;break;case"compositionupdate":ae=!0;break;case"compositionend":n=!1}return r.apply(this,arguments)}t.preventDefault()}}}))}))}function B(t){function i(t){if(void 0==e.valHooks[t]||1!=e.valHooks[t].inputmaskpatch){var i=e.valHooks[t]&&e.valHooks[t].get?e.valHooks[t].get:function(e){return e.value},n=e.valHooks[t]&&e.valHooks[t].set?e.valHooks[t].set:function(e,t){return e.value=t,e};e.valHooks[t]={get:function(t){var n=e(t);if(n.data("_inputmask")){if(n.data("_inputmask").opts.autoUnmask)return n.inputmask("unmaskedvalue");var r=i(t),o=n.data("_inputmask"),a=o.maskset,s=a._buffer;return s=s?s.join(""):"",r!=s?r:""}return i(t)},set:function(t,i){var r,o=e(t),a=o.data("_inputmask");return r=n(t,i),a&&o.triggerHandler("setvalue.inputmask"),r},inputmaskpatch:!0}}}function n(){var t=e(this),i=e(this).data("_inputmask");return i?i.opts.autoUnmask?t.inputmask("unmaskedvalue"):a.call(this)!=_().join("")?a.call(this):"":a.call(this)}function r(t){var i=e(this).data("_inputmask");s.call(this,t),i&&e(this).triggerHandler("setvalue.inputmask")}function o(t){e(t).bind("mouseenter.inputmask",(function(t){var i=e(this),n=this,r=n._valueGet();""!=r&&r!=w().join("")&&i.triggerHandler("setvalue.inputmask")}));var i=e._data(t).events,n=i.mouseover;if(n){for(var r=n[n.length-1],o=n.length-1;o>0;o--)n[o]=n[o-1];n[0]=r}}var a,s;if(!t._valueGet){var l;Object.getOwnPropertyDescriptor&&void 0==t.value?(a=function(){return this.textContent},s=function(e){this.textContent=e},Object.defineProperty(t,"value",{get:n,set:r})):((l=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(t,"value"))&&l.configurable,document.__lookupGetter__&&t.__lookupGetter__("value")?(a=t.__lookupGetter__("value"),s=t.__lookupSetter__("value"),t.__defineGetter__("value",n),t.__defineSetter__("value",r)):(a=function(){return t.value},s=function(e){t.value=e},i(t.type),o(t))),t._valueGet=function(e){return re&&e!==!0?a.call(this).split("").reverse().join(""):a.call(this)},t._valueSet=function(e){s.call(this,re?e.split("").reverse().join(""):e)}}}function V(t,i,n,r){function a(){if(o.keepStatic){f(!0);var i,n=[],r=e.extend(!0,{},d().validPositions);for(i=p();i>=0;i--){var a=d().validPositions[i];if(a){if(void 0!=a.alternation&&a.locator[a.alternation]==m(i).locator[a.alternation])break;null!=a.match.fn&&n.push(a.input),delete d().validPositions[i]}}if(i>0)for(;n.length>0;){d().p=D(p());var s=e.Event("keypress");s.which=n.pop().charCodeAt(0),U.call(t,s,!0,!1,!1,d().p)}else d().validPositions=e.extend(!0,{},r)}}if((o.numericInput||re)&&(i==e.inputmask.keyCode.BACKSPACE?i=e.inputmask.keyCode.DELETE:i==e.inputmask.keyCode.DELETE&&(i=e.inputmask.keyCode.BACKSPACE),re)){var s=n.end;n.end=n.begin,n.begin=s}if(i==e.inputmask.keyCode.BACKSPACE&&(n.end-n.begin<1||0==o.insertMode)?n.begin=k(n.begin):i==e.inputmask.keyCode.DELETE&&n.begin==n.end&&(n.end=T(n.end)?n.end+1:D(n.end)+1),g(n.begin,n.end,!1,r),r!==!0){a();var l=p(n.begin);l<n.begin?(-1==l&&f(),d().p=D(l)):d().p=n.begin}}function z(i){var n=this,r=e(n),a=i.keyCode,l=F(n);a==e.inputmask.keyCode.BACKSPACE||a==e.inputmask.keyCode.DELETE||s&&127==a||i.ctrlKey&&88==a&&!t("cut")?(i.preventDefault(),88==a&&(J=w().join("")),V(n,a,l),R(n,w(),d().p,i,J!=w().join("")),n._valueGet()==_().join("")?r.trigger("cleared"):W(w())===!0&&r.trigger("complete"),o.showTooltip&&r.prop("title",d().mask)):a==e.inputmask.keyCode.END||a==e.inputmask.keyCode.PAGE_DOWN?setTimeout((function(){var e=D(p());o.insertMode||e!=S()||i.shiftKey||e--,F(n,i.shiftKey?l.begin:e,e)}),0):a==e.inputmask.keyCode.HOME&&!i.shiftKey||a==e.inputmask.keyCode.PAGE_UP?F(n,0,i.shiftKey?l.begin:0):(o.undoOnEscape&&a==e.inputmask.keyCode.ESCAPE||90==a&&i.ctrlKey)&&i.altKey!==!0?(P(n,!0,!1,J.split("")),r.click()):a!=e.inputmask.keyCode.INSERT||i.shiftKey||i.ctrlKey?0!=o.insertMode||i.shiftKey||(a==e.inputmask.keyCode.RIGHT?setTimeout((function(){var e=F(n);F(n,e.begin)}),0):a==e.inputmask.keyCode.LEFT&&setTimeout((function(){var e=F(n);F(n,re?e.begin+1:e.begin-1)}),0)):(o.insertMode=!o.insertMode,F(n,o.insertMode||l.begin!=S()?l.begin:l.begin-1)),o.onKeyDown.call(this,i,w(),F(n).begin,o),se=-1!=e.inArray(a,o.ignorables)}function U(t,i,n,r,a){var s=this,l=e(s),u=t.which||t.charCode||t.keyCode;if(!(i===!0||t.ctrlKey&&t.altKey)&&(t.ctrlKey||t.metaKey||se))return!0;if(u){46==u&&0==t.shiftKey&&","==o.radixPoint&&(u=44);var c,p=i?{begin:a,end:a}:F(s),g=String.fromCharCode(u),m=H(p.begin,p.end);m&&(d().undoPositions=e.extend(!0,{},d().validPositions),V(s,e.inputmask.keyCode.DELETE,p,!0),p.begin=d().p,o.insertMode||(o.insertMode=!o.insertMode,h(p.begin,r),o.insertMode=!o.insertMode),m=!o.multi),d().writeOutBuffer=!0;var v=re&&!m?p.end:p.begin,y=x(v,g,r);if(y!==!1){if(y!==!0&&(v=void 0!=y.pos?y.pos:v,g=void 0!=y.c?y.c:g),f(!0),void 0!=y.caret)c=y.caret;else{var _=d().validPositions;c=!o.keepStatic&&(void 0!=_[v+1]&&b(v+1,_[v].locator.slice(),v).length>1||void 0!=_[v].alternation)?v+1:D(v)}d().p=c}if(n!==!1){var A=this;if(setTimeout((function(){o.onKeyValidation.call(A,y,o)}),0),d().writeOutBuffer&&y!==!1){var E=w();R(s,E,i?void 0:o.numericInput?k(c):c,t,i!==!0),i!==!0&&setTimeout((function(){W(E)===!0&&l.trigger("complete")}),0)}else m&&(d().buffer=void 0,d().validPositions=d().undoPositions)}else m&&(d().buffer=void 0,d().validPositions=d().undoPositions);if(o.showTooltip&&l.prop("title",d().mask),i&&e.isFunction(o.onBeforeWrite)){var T=o.onBeforeWrite.call(this,t,w(),c,o);if(T&&T.refreshFromBuffer){var S=T.refreshFromBuffer;C(S===!0?S:S.start,S.end,T.buffer),f(!0),T.caret&&(d().p=T.caret)}}t.preventDefault()}}function Y(t){var i=this,n=e(i),r=i._valueGet(!0),a=F(i);if("propertychange"==t.type&&i._valueGet().length<=S())return!0;if("paste"==t.type){var s=r.substr(0,a.begin),l=r.substr(a.end,r.length);s==_().slice(0,a.begin).join("")&&(s=""),l==_().slice(a.end).join("")&&(l=""),window.clipboardData&&window.clipboardData.getData?r=s+window.clipboardData.getData("Text")+l:t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.getData&&(r=s+t.originalEvent.clipboardData.getData("text/plain")+l)}var u=r;if(e.isFunction(o.onBeforePaste)){if(u=o.onBeforePaste.call(i,r,o),u===!1)return t.preventDefault(),!1;u||(u=r)}return P(i,!0,!1,re?u.split("").reverse():u.split("")),n.click(),W(w())===!0&&n.trigger("complete"),!1}function q(t){var i=this;P(i,!0,!1),W(w())===!0&&e(i).trigger("complete"),t.preventDefault()}function X(e){var t=this;J=w().join(""),(""==te||0!=e.originalEvent.data.indexOf(te))&&(ee=F(t))}function K(t){var i=this,n=ee||F(i);0==t.originalEvent.data.indexOf(te)&&(f(),n={begin:0,end:0});var r=t.originalEvent.data;F(i,n.begin,n.end);for(var a=0;a<r.length;a++){var s=e.Event("keypress");s.which=r.charCodeAt(a),oe=!1,se=!1,U.call(i,s)}setTimeout((function(){var e=d().p;R(i,w(),o.numericInput?k(e):e)}),0),te=t.originalEvent.data}function Q(e){}function Z(t){if(ie=e(t),ie.data("_inputmask",{maskset:r,opts:o,isRTL:!1}),o.showTooltip&&ie.prop("title",d().mask),("rtl"==t.dir||o.rightAlign)&&ie.css("text-align","right"),"rtl"==t.dir||o.numericInput){t.dir="ltr",ie.removeAttr("dir");var n=ie.data("_inputmask");n.isRTL=!0,ie.data("_inputmask",n),re=!0}ie.unbind(".inputmask"),(ie.is(":input")&&i(ie.attr("type"))||t.isContentEditable)&&(ie.closest("form").bind("submit",(function(e){J!=w().join("")&&ie.change(),ie[0]._valueGet&&ie[0]._valueGet()==_().join("")&&ie[0]._valueSet(""),o.removeMaskOnSubmit&&ie.inputmask("remove")})).bind("reset",(function(){setTimeout((function(){ie.triggerHandler("setvalue.inputmask")}),0)})),ie.bind("mouseenter.inputmask",(function(){var t=e(this),i=this;!t.is(":focus")&&o.showMaskOnHover&&i._valueGet()!=w().join("")&&R(i,w())})).bind("blur.inputmask",(function(t){var i=e(this),n=this;if(i.data("_inputmask")){var r=n._valueGet(),a=w().slice();le=!0,J!=a.join("")&&setTimeout((function(){i.change(),J=a.join("")}),0),""!=r&&(o.clearMaskOnLostFocus&&(r==_().join("")?a=[]:$(a)),W(a)===!1&&(i.trigger("incomplete"),o.clearIncomplete&&(f(),a=o.clearMaskOnLostFocus?[]:_().slice())),R(n,a,void 0,t))}})).bind("focus.inputmask",(function(t){var i=(e(this),this),n=i._valueGet();o.showMaskOnFocus&&(!o.showMaskOnHover||o.showMaskOnHover&&""==n)&&i._valueGet()!=w().join("")&&R(i,w(),D(p())),J=w().join("")})).bind("mouseleave.inputmask",(function(){var t=e(this),i=this;if(o.clearMaskOnLostFocus){var n=w().slice(),r=i._valueGet();t.is(":focus")||r==t.attr("placeholder")||""==r||(r==_().join("")?n=[]:$(n),R(i,n))}})).bind("click.inputmask",(function(){var t=e(this),i=this;if(t.is(":focus")){var n=F(i);if(n.begin==n.end)if(o.radixFocus&&""!=o.radixPoint&&-1!=e.inArray(o.radixPoint,w())&&(le||w().join("")==_().join("")))F(i,e.inArray(o.radixPoint,w())),le=!1;else{var r=L(n.begin),a=D(p(r));a>r?F(i,T(r)?r:D(r)):F(i,a)}}})).bind("dblclick.inputmask",(function(){var e=this;setTimeout((function(){F(e,0,D(p()))}),0)})).bind(c+".inputmask dragdrop.inputmask drop.inputmask",Y).bind("cut.inputmask",(function(t){ae=!0;var i=this,n=e(i),r=F(i);V(i,e.inputmask.keyCode.DELETE,r),R(i,w(),d().p,t,J!=w().join("")),i._valueGet()==_().join("")&&n.trigger("cleared"),o.showTooltip&&n.prop("title",d().mask)})).bind("complete.inputmask",o.oncomplete).bind("incomplete.inputmask",o.onincomplete).bind("cleared.inputmask",o.oncleared),ie.bind("keydown.inputmask",z).bind("keypress.inputmask",U),u||ie.bind("compositionstart.inputmask",X).bind("compositionupdate.inputmask",K).bind("compositionend.inputmask",Q),"paste"===c&&ie.bind("input.inputmask",q)),ie.bind("setvalue.inputmask",(function(){var t=this,i=t._valueGet();t._valueSet(e.isFunction(o.onBeforeMask)?o.onBeforeMask.call(t,i,o)||i:i),P(t,!0,!1),J=w().join(""),(o.clearMaskOnLostFocus||o.clearIncomplete)&&t._valueGet()==_().join("")&&t._valueSet("")})),B(t);var a=e.isFunction(o.onBeforeMask)?o.onBeforeMask.call(t,t._valueGet(),o)||t._valueGet():t._valueGet();P(t,!0,!1,a.split(""));var s=w().slice();J=s.join("");var l;try{l=document.activeElement}catch(e){}W(s)===!1&&o.clearIncomplete&&f(),o.clearMaskOnLostFocus&&(s.join("")==_().join("")?s=[]:$(s)),R(t,s),l===t&&F(t,D(p())),j(t)}var J,ee,te,ie,ne,re=!1,oe=!1,ae=!1,se=!1,le=!0;if(void 0!=n)switch(n.action){case"isComplete":return ie=e(n.el),r=ie.data("_inputmask").maskset,o=ie.data("_inputmask").opts,W(n.buffer);case"unmaskedvalue":return ie=n.$input,r=ie.data("_inputmask").maskset,o=ie.data("_inputmask").opts,re=n.$input.data("_inputmask").isRTL,M(n.$input);case"mask":J=w().join(""),Z(n.el);break;case"format":ie=e({}),ie.data("_inputmask",{maskset:r,opts:o,isRTL:o.numericInput}),o.numericInput&&(re=!0);var ue=(e.isFunction(o.onBeforeMask)?o.onBeforeMask.call(ie,n.value,o)||n.value:n.value).split("");return P(ie,!1,!1,re?ue.reverse():ue),e.isFunction(o.onBeforeWrite)&&o.onBeforeWrite.call(this,void 0,w(),0,o),n.metadata?{value:re?w().slice().reverse().join(""):w().join(""),metadata:ie.inputmask("getmetadata")}:re?w().slice().reverse().join(""):w().join("");case"isValid":ie=e({}),ie.data("_inputmask",{maskset:r,opts:o,isRTL:o.numericInput}),o.numericInput&&(re=!0);var ue=n.value.split("");P(ie,!1,!0,re?ue.reverse():ue);for(var ce=w(),de=G(),fe=ce.length-1;fe>de&&!T(fe);fe--);return ce.splice(de,fe+1-de),W(ce)&&n.value==ce.join("");case"getemptymask":return ie=e(n.el),r=ie.data("_inputmask").maskset,o=ie.data("_inputmask").opts,_();case"remove":var pe=n.el;ie=e(pe),r=ie.data("_inputmask").maskset,o=ie.data("_inputmask").opts,pe._valueSet(M(ie)),ie.unbind(".inputmask"),ie.removeData("_inputmask");var he;Object.getOwnPropertyDescriptor&&(he=Object.getOwnPropertyDescriptor(pe,"value")),he&&he.get?pe._valueGet&&Object.defineProperty(pe,"value",{get:pe._valueGet,set:pe._valueSet}):document.__lookupGetter__&&pe.__lookupGetter__("value")&&pe._valueGet&&(pe.__defineGetter__("value",pe._valueGet),pe.__defineSetter__("value",pe._valueSet));try{delete pe._valueGet,delete pe._valueSet}catch(e){pe._valueGet=void 0,pe._valueSet=void 0}break;case"getmetadata":if(ie=e(n.el),r=ie.data("_inputmask").maskset,o=ie.data("_inputmask").opts,e.isArray(r.metadata)){for(var ge,me=p(),ve=me;ve>=0;ve--)if(d().validPositions[ve]&&void 0!=d().validPositions[ve].alternation){ge=d().validPositions[ve].alternation;break}return void 0!=ge?r.metadata[d().validPositions[me].locator[ge]]:r.metadata[0]}return r.metadata}}if(void 0===e.fn.inputmask){var a=navigator.userAgent,s=null!==a.match(new RegExp("iphone","i")),l=(null!==a.match(new RegExp("android.*safari.*","i")),null!==a.match(new RegExp("android.*chrome.*","i"))),u=null!==a.match(new RegExp("android.*firefox.*","i")),c=(/Kindle/i.test(a)||/Silk/i.test(a)||/KFTT/i.test(a)||/KFOT/i.test(a)||/KFJWA/i.test(a)||/KFJWI/i.test(a)||/KFSOWI/i.test(a)||/KFTHWA/i.test(a)||/KFTHWI/i.test(a)||/KFAPWA/i.test(a)||/KFAPWI/i.test(a),t("paste")?"paste":t("input")?"input":"propertychange");e.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:null,onKeyDown:e.noop,onBeforeMask:void 0,onBeforePaste:void 0,onBeforeWrite:void 0,onUnMask:void 0,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:e.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",radixFocus:!1,nojumps:!1,nojumpsThreshold:0,keepStatic:void 0,definitions:{9:{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1}},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:void 0,canClearPosition:e.noop,postValidation:void 0},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},masksCache:{},escapeRegex:function(e){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];return e.replace(new RegExp("(\\"+t.join("|\\")+")","gim"),"\\$1")},format:function(t,i,a){var s=e.extend(!0,{},e.inputmask.defaults,i);return n(s.alias,i,s),o({action:"format",value:t,metadata:a},r(s,i&&void 0!==i.definitions),s)},isValid:function(t,i){var a=e.extend(!0,{},e.inputmask.defaults,i);return n(a.alias,i,a),o({action:"isValid",value:t},r(a,i&&void 0!==i.definitions),a)}},e.fn.inputmask=function(t,i){function a(t,i,r){var o=e(t);o.data("inputmask-alias")&&n(o.data("inputmask-alias"),e.extend(!0,{},i),i);for(var a in i){var s=o.data("inputmask-"+a.toLowerCase());void 0!=s&&(s="boolean"==typeof s?s:s.toString(),"mask"==a&&0==s.indexOf("[")?(i[a]=s.replace(/[\s[\]]/g,"").split("','"),i[a][0]=i[a][0].replace("'",""),i[a][i[a].length-1]=i[a][i[a].length-1].replace("'","")):i[a]=s,r&&(r[a]=i[a]))}return i}var s,l=e.extend(!0,{},e.inputmask.defaults,i);if("string"==typeof t)switch(t){case"mask":return n(l.alias,i,l),this.each((function(){return a(this,l),s=r(l,i&&void 0!==i.definitions),void 0==s?this:void o({action:"mask",el:this},s,l)}));case"unmaskedvalue":var u=e(this);return u.data("_inputmask")?o({action:"unmaskedvalue",$input:u}):u.val();case"remove":return this.each((function(){var t=e(this);t.data("_inputmask")&&o({action:"remove",el:this})}));case"getemptymask":return this.data("_inputmask")?o({action:"getemptymask",el:this}):"";case"hasMaskedValue":return this.data("_inputmask")?!this.data("_inputmask").opts.autoUnmask:!1;case"isComplete":return this.data("_inputmask")?o({action:"isComplete",buffer:this[0]._valueGet().split(""),el:this}):!0;case"getmetadata":return this.data("_inputmask")?o({action:"getmetadata",el:this}):void 0;default:return n(l.alias,i,l),n(t,i,l)||(l.mask=t),this.each((function(){return a(this,l),s=r(l,i&&void 0!==i.definitions),void 0==s?this:void o({action:"mask",el:this},s,l)}))}else{if("object"==typeof t)return l=e.extend(!0,{},e.inputmask.defaults,t),n(l.alias,t,l),this.each((function(){return a(this,l),s=r(l,t&&void 0!==t.definitions),void 0==s?this:void o({action:"mask",el:this},s,l)}));if(void 0==t)return this.each((function(){var t=e(this).attr("data-inputmask");if(t&&""!=t)try{t=t.replace(new RegExp("'","g"),'"');var r=e.parseJSON("{"+t+"}");e.extend(!0,r,i),l=e.extend(!0,{},e.inputmask.defaults,r),l=a(this,l),n(l.alias,r,l),l.alias=void 0,e(this).inputmask("mask",l)}catch(e){}if(e(this).attr("data-inputmask-mask")||e(this).attr("data-inputmask-alias")){l=e.extend(!0,{},e.inputmask.defaults,{});var o={};l=a(this,l,o),n(l.alias,o,l),l.alias=void 0,e(this).inputmask("mask",l)}}))}}}return e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.definitions,{h:{validator:"[01][0-9]|2[0-3]",cardinality:2,prevalidator:[{validator:"[0-2]",cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:"[0-5]",cardinality:1}]},d:{validator:"0[1-9]|[12][0-9]|3[01]",cardinality:2,prevalidator:[{validator:"[0-3]",cardinality:1}]},m:{validator:"0[1-9]|1[012]",cardinality:2,prevalidator:[{validator:"[01]",cardinality:1}]},y:{validator:"(19|20)\\d{2}",cardinality:4,prevalidator:[{validator:"[12]",cardinality:1},{validator:"(19|20)",cardinality:2},{validator:"(19|20)\\d",cardinality:3}]}}),e.extend(e.inputmask.defaults.aliases,{"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:new RegExp("[0-3]"),val1:new RegExp("0[1-9]|[12][0-9]|3[01]"),val2pre:function(t){var i=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|[12][0-9]|3[01])"+i+"[01])")},val2:function(t){var i=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|[12][0-9])"+i+"(0[1-9]|1[012]))|(30"+i+"(0[13-9]|1[012]))|(31"+i+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(e,t,i){if(isNaN(e))return!1;var n=parseInt(e.concat(t.toString().slice(e.length))),r=parseInt(e.concat(i.toString().slice(e.length)));return(isNaN(n)?!1:n>=t&&i>=n)||(isNaN(r)?!1:r>=t&&i>=r)},determinebaseyear:function(e,t,i){var n=(new Date).getFullYear();if(e>n)return e;if(n>t){for(var r=t.toString().slice(0,2),o=t.toString().slice(2,4);r+i>t;)r--;var a=r+o;return e>a?e:a}return n},onKeyDown:function(t,i,n,r){var o=e(this);if(t.ctrlKey&&t.keyCode==e.inputmask.keyCode.RIGHT){var a=new Date;o.val(a.getDate().toString()+(a.getMonth()+1).toString()+a.getFullYear().toString()),o.triggerHandler("setvalue.inputmask")}},getFrontValue:function(e,t,i){for(var n=0,r=0,o=0;o<e.length&&"2"!=e.charAt(o);o++){var a=i.definitions[e.charAt(o)];a?(n+=r,r=a.cardinality):r++}return t.join("").substr(n,r)},definitions:{1:{validator:function(e,t,i,n,r){var o=r.regex.val1.test(e);return n||o||e.charAt(1)!=r.separator&&-1=="-./".indexOf(e.charAt(1))||!(o=r.regex.val1.test("0"+e.charAt(0)))?o:(t.buffer[i-1]="0",{refreshFromBuffer:{start:i-1,end:i},pos:i,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){var o=e;isNaN(t.buffer[i+1])||(o+=t.buffer[i+1]);var a=1==o.length?r.regex.val1pre.test(o):r.regex.val1.test(o);if(!n&&!a){if(a=r.regex.val1.test(e+"0"))return t.buffer[i]=e,t.buffer[++i]="0",{pos:i,c:"0"};if(a=r.regex.val1.test("0"+e))return t.buffer[i]="0",i++,{pos:i}}return a},cardinality:1}]},2:{validator:function(e,t,i,n,r){var o=r.getFrontValue(t.mask,t.buffer,r);-1!=o.indexOf(r.placeholder[0])&&(o="01"+r.separator);var a=r.regex.val2(r.separator).test(o+e);if(!n&&!a&&(e.charAt(1)==r.separator||-1!="-./".indexOf(e.charAt(1)))&&(a=r.regex.val2(r.separator).test(o+"0"+e.charAt(0))))return t.buffer[i-1]="0",{refreshFromBuffer:{start:i-1,end:i},pos:i,c:e.charAt(0)};if(r.mask.indexOf("2")==r.mask.length-1&&a){var s=t.buffer.join("").substr(4,4)+e;if(s!=r.leapday)return!0;var l=parseInt(t.buffer.join("").substr(0,4),10);return l%4===0?l%100===0?l%400===0?!0:!1:!0:!1}return a},cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){isNaN(t.buffer[i+1])||(e+=t.buffer[i+1]);var o=r.getFrontValue(t.mask,t.buffer,r);-1!=o.indexOf(r.placeholder[0])&&(o="01"+r.separator);var a=1==e.length?r.regex.val2pre(r.separator).test(o+e):r.regex.val2(r.separator).test(o+e);return n||a||!(a=r.regex.val2(r.separator).test(o+"0"+e))?a:(t.buffer[i]="0",i++,{pos:i})},cardinality:1}]},y:{validator:function(e,t,i,n,r){if(r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear)){var o=t.buffer.join("").substr(0,6);if(o!=r.leapday)return!0;var a=parseInt(e,10);return a%4===0?a%100===0?a%400===0?!0:!1:!0:!1}return!1},cardinality:4,prevalidator:[{validator:function(e,t,i,n,r){var o=r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear);if(!n&&!o){var a=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e+"0").toString().slice(0,1);if(o=r.isInYearRange(a+e,r.yearrange.minyear,r.yearrange.maxyear))return t.buffer[i++]=a.charAt(0),{pos:i};if(a=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e+"0").toString().slice(0,2),o=r.isInYearRange(a+e,r.yearrange.minyear,r.yearrange.maxyear))return t.buffer[i++]=a.charAt(0),t.buffer[i++]=a.charAt(1),{pos:i}}return o},cardinality:1},{validator:function(e,t,i,n,r){var o=r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear);if(!n&&!o){var a=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e).toString().slice(0,2);if(o=r.isInYearRange(e[0]+a[1]+e[1],r.yearrange.minyear,r.yearrange.maxyear))return t.buffer[i++]=a.charAt(1),{pos:i};if(a=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e).toString().slice(0,2),r.isInYearRange(a+e,r.yearrange.minyear,r.yearrange.maxyear)){var s=t.buffer.join("").substr(0,6);if(s!=r.leapday)o=!0;else{var l=parseInt(e,10);o=l%4===0?l%100===0?l%400===0?!0:!1:!0:!1}}else o=!1;if(o)return t.buffer[i-1]=a.charAt(0),t.buffer[i++]=a.charAt(1),t.buffer[i++]=e.charAt(0),{refreshFromBuffer:{start:i-3,end:i},pos:i}}return o},cardinality:2},{validator:function(e,t,i,n,r){return r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(t){var i=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[13-9]|1[012])"+i+"[0-3])|(02"+i+"[0-2])")},val2:function(t){var i=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|1[012])"+i+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+i+"30)|((0[13578]|1[02])"+i+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyDown:function(t,i,n,r){var o=e(this);if(t.ctrlKey&&t.keyCode==e.inputmask.keyCode.RIGHT){var a=new Date;o.val((a.getMonth()+1).toString()+a.getDate().toString()+a.getFullYear().toString()),o.triggerHandler("setvalue.inputmask")}}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyDown:function(t,i,n,r){var o=e(this);if(t.ctrlKey&&t.keyCode==e.inputmask.keyCode.RIGHT){var a=new Date;o.val(a.getFullYear().toString()+(a.getMonth()+1).toString()+a.getDate().toString()),o.triggerHandler("setvalue.inputmask")}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:new RegExp("[012]"),hrs24:new RegExp("2[0-4]|1[3-9]"),hrs:new RegExp("[01][0-9]|2[0-4]"),ampm:new RegExp("^[a|p|A|P][m|M]"),mspre:new RegExp("[0-5]"),ms:new RegExp("[0-5][0-9]")},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(e,t,i,n,r){if("24"==r.hourFormat&&24==parseInt(e,10))return t.buffer[i-1]="0",t.buffer[i]="0",{refreshFromBuffer:{start:i-1,end:i},c:"0"};var o=r.regex.hrs.test(e);if(!n&&!o&&(e.charAt(1)==r.timeseparator||-1!="-.:".indexOf(e.charAt(1)))&&(o=r.regex.hrs.test("0"+e.charAt(0))))return t.buffer[i-1]="0",t.buffer[i]=e.charAt(0),i++,{refreshFromBuffer:{start:i-2,end:i},pos:i,c:r.timeseparator};if(o&&"24"!==r.hourFormat&&r.regex.hrs24.test(e)){var a=parseInt(e,10);return 24==a?(t.buffer[i+5]="a",t.buffer[i+6]="m"):(t.buffer[i+5]="p",t.buffer[i+6]="m"),a-=12,10>a?(t.buffer[i]=a.toString(),t.buffer[i-1]="0"):(t.buffer[i]=a.toString().charAt(1),t.buffer[i-1]=a.toString().charAt(0)),{refreshFromBuffer:{start:i-1,end:i+6},c:t.buffer[i]}}return o},cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){var o=r.regex.hrspre.test(e);return n||o||!(o=r.regex.hrs.test("0"+e))?o:(t.buffer[i]="0",i++,{pos:i})},cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){var o=r.regex.mspre.test(e);return n||o||!(o=r.regex.ms.test("0"+e))?o:(t.buffer[i]="0",i++,{pos:i})},cardinality:1}]},t:{validator:function(e,t,i,n,r){return r.regex.ampm.test(e+"m")},casing:"lower",cardinality:1}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t\\m",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",placeholder:"hh:mm:ss",alias:"datetime",autoUnmask:!1},"hh:mm":{mask:"h:s",placeholder:"hh:mm",alias:"datetime",autoUnmask:!1},date:{alias:"dd/mm/yyyy"},"mm/yyyy":{mask:"1/y",placeholder:"mm/yyyy",leapday:"donotuse",separator:"/",alias:"mm/dd/yyyy"}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.definitions,{A:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,casing:"upper"},"#":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,casing:"upper"}}),e.extend(e.inputmask.defaults.aliases,{url:{mask:"ir",placeholder:"",separator:"",defaultPrefix:"http://",regex:{urlpre1:new RegExp("[fh]"),urlpre2:new RegExp("(ft|ht)"),urlpre3:new RegExp("(ftp|htt)"),urlpre4:new RegExp("(ftp:|http|ftps)"),urlpre5:new RegExp("(ftp:/|ftps:|http:|https)"),urlpre6:new RegExp("(ftp://|ftps:/|http:/|https:)"),urlpre7:new RegExp("(ftp://|ftps://|http://|https:/)"),urlpre8:new RegExp("(ftp://|ftps://|http://|https://)")},definitions:{i:{validator:function(e,t,i,n,r){return!0},cardinality:8,prevalidator:function(){for(var e=[],t=8,i=0;t>i;i++)e[i]=function(){var e=i;return{validator:function(t,i,n,r,o){if(o.regex["urlpre"+(e+1)]){var a,s=t;e+1-t.length>0&&(s=i.buffer.join("").substring(0,e+1-t.length)+""+s);var l=o.regex["urlpre"+(e+1)].test(s);if(!r&&!l){for(n-=e,a=0;a<o.defaultPrefix.length;a++)i.buffer[n]=o.defaultPrefix[a],n++;for(a=0;a<s.length-1;a++)i.buffer[n]=s[a],n++;return{pos:n}}return l}return!1},cardinality:e}}();return e}()},r:{validator:".",cardinality:50}},insertMode:!1,autoUnmask:!1},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function(e,t,i,n,r){return i-1>-1&&"."!=t.buffer[i-1]?(e=t.buffer[i-1]+e,e=i-2>-1&&"."!=t.buffer[i-2]?t.buffer[i-2]+e:"0"+e):e="00"+e,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(e)},cardinality:1}}},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,64}]@*{1,64}[.*{2,64}][.*{2,6}][.*{1,2}]",greedy:!1,onBeforePaste:function(e,t){return e=e.toLowerCase(),e.replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.aliases,{numeric:{mask:function(e){function t(t){for(var i="",n=0;n<t.length;n++)i+=e.definitions[t[n]]?"\\"+t[n]:t[n];return i}if(0!==e.repeat&&isNaN(e.integerDigits)&&(e.integerDigits=e.repeat),e.repeat=0,e.groupSeparator==e.radixPoint&&("."==e.radixPoint?e.groupSeparator=",":","==e.radixPoint?e.groupSeparator=".":e.groupSeparator="")," "===e.groupSeparator&&(e.skipOptionalPartCharacter=void 0),e.autoGroup=e.autoGroup&&""!=e.groupSeparator,e.autoGroup&&("string"==typeof e.groupSize&&isFinite(e.groupSize)&&(e.groupSize=parseInt(e.groupSize)),isFinite(e.integerDigits))){var i=Math.floor(e.integerDigits/e.groupSize),n=e.integerDigits%e.groupSize;e.integerDigits=parseInt(e.integerDigits)+(0==n?i-1:i)}e.placeholder.length>1&&(e.placeholder=e.placeholder.charAt(0)),e.radixFocus=e.radixFocus&&"0"==e.placeholder,e.definitions[";"]=e.definitions["~"];var r=t(e.prefix);return r+="[+]",r+="~{1,"+e.integerDigits+"}",void 0!=e.digits&&(isNaN(e.digits)||parseInt(e.digits)>0)&&(r+=e.digitsOptional?"["+(e.decimalProtect?":":e.radixPoint)+";{"+e.digits+"}]":(e.decimalProtect?":":e.radixPoint)+";{"+e.digits+"}"),""!=e.negationSymbol.back&&(r+="[-]"),r+=t(e.suffix),e.greedy=!1,r},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,groupSeparator:"",radixPoint:".",radixFocus:!0,groupSize:3,autoGroup:!1,allowPlus:!0,allowMinus:!0,negationSymbol:{front:"-",back:""},integerDigits:"+",prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,min:void 0,max:void 0,postFormat:function(t,i,n,r){var o=!1;t.length>=r.suffix.length&&t.join("").indexOf(r.suffix)==t.length-r.suffix.length&&(t.length=t.length-r.suffix.length,o=!0),i=i>=t.length?t.length-1:i<r.prefix.length?r.prefix.length:i;var a=!1,s=t[i];if(""==r.groupSeparator||-1!=e.inArray(r.radixPoint,t)&&i>=e.inArray(r.radixPoint,t)||new RegExp("["+e.inputmask.escapeRegex(r.negationSymbol.front)+"+]").test(s)){if(o)for(var l=0,u=r.suffix.length;u>l;l++)t.push(r.suffix.charAt(l));return{pos:i}}var c=t.slice();s==r.groupSeparator&&(c.splice(i--,1),s=c[i]),n?c[i]="?":c.splice(i,0,"?");var d=c.join(""),f=d;if(d.length>0&&r.autoGroup||n&&-1!=d.indexOf(r.groupSeparator)){var p=e.inputmask.escapeRegex(r.groupSeparator);a=0==d.indexOf(r.groupSeparator),d=d.replace(new RegExp(p,"g"),"");var h=d.split(r.radixPoint);if(d=""==r.radixPoint?d:h[0],d!=r.prefix+"?0"&&d.length>=r.groupSize+r.prefix.length)for(var g=new RegExp("([-+]?[\\d?]+)([\\d?]{"+r.groupSize+"})");g.test(d);)d=d.replace(g,"$1"+r.groupSeparator+"$2"),d=d.replace(r.groupSeparator+r.groupSeparator,r.groupSeparator);""!=r.radixPoint&&h.length>1&&(d+=r.radixPoint+h[1])}a=f!=d,t.length=d.length;for(var l=0,u=d.length;u>l;l++)t[l]=d.charAt(l);var m=e.inArray("?",t);if(n?t[m]=s:t.splice(m,1),!a&&o)for(var l=0,u=r.suffix.length;u>l;l++)t.push(r.suffix.charAt(l));return{pos:m,refreshFromBuffer:a,buffer:t}},onBeforeWrite:function(t,i,n,r){if(t&&"blur"==t.type){var o=i.join(""),a=o.replace(r.prefix,"");if(a=a.replace(r.suffix,""),a=a.replace(new RegExp(e.inputmask.escapeRegex(r.groupSeparator),"g"),""),","===r.radixPoint&&(a=a.replace(e.inputmask.escapeRegex(r.radixPoint),".")),isFinite(a)&&isFinite(r.min)&&parseFloat(a)<parseFloat(r.min))return e.extend(!0,{refreshFromBuffer:!0,buffer:(r.prefix+r.min).split("")},r.postFormat((r.prefix+r.min).split(""),0,!0,r));var s=""!=r.radixPoint?i.join("").split(r.radixPoint):[i.join("")],l=s[0].match(r.regex.integerPart(r)),u=2==s.length?s[1].match(r.regex.integerNPart(r)):void 0;!l||l[0]!=r.negationSymbol.front+"0"&&l[0]!=r.negationSymbol.front&&"+"!=l[0]||void 0!=u&&!u[0].match(/^0+$/)||i.splice(l.index,1);var c=e.inArray(r.radixPoint,i);if(-1!=c&&isFinite(r.digits)&&!r.digitsOptional){for(var d=1;d<=r.digits;d++)(void 0==i[c+d]||i[c+d]==r.placeholder.charAt(0))&&(i[c+d]="0");return{refreshFromBuffer:!0,buffer:i}}}if(r.autoGroup){var f=r.postFormat(i,n-1,!0,r);return f.caret=n<=r.prefix.length?f.pos:f.pos+1,f}},regex:{integerPart:function(t){return new RegExp("["+e.inputmask.escapeRegex(t.negationSymbol.front)+"+]?\\d+")},integerNPart:function(t){return new RegExp("[\\d"+e.inputmask.escapeRegex(t.groupSeparator)+"]+")}},signHandler:function(e,t,i,n,r){if(!n&&r.allowMinus&&"-"===e||r.allowPlus&&"+"===e){var o=t.buffer.join("").match(r.regex.integerPart(r));if(o&&o[0].length>0)return t.buffer[o.index]==("-"===e?"+":r.negationSymbol.front)?"-"==e?""!=r.negationSymbol.back?{pos:o.index,c:r.negationSymbol.front,remove:o.index,caret:i,insert:{pos:t.buffer.length-r.suffix.length-1,c:r.negationSymbol.back}}:{pos:o.index,c:r.negationSymbol.front,remove:o.index,caret:i}:""!=r.negationSymbol.back?{pos:o.index,c:"+",remove:[o.index,t.buffer.length-r.suffix.length-1],caret:i}:{pos:o.index,c:"+",remove:o.index,caret:i}:t.buffer[o.index]==("-"===e?r.negationSymbol.front:"+")?"-"==e&&""!=r.negationSymbol.back?{remove:[o.index,t.buffer.length-r.suffix.length-1],caret:i-1}:{remove:o.index,caret:i-1}:"-"==e?""!=r.negationSymbol.back?{pos:o.index,c:r.negationSymbol.front,caret:i+1,insert:{pos:t.buffer.length-r.suffix.length,c:r.negationSymbol.back}}:{pos:o.index,c:r.negationSymbol.front,caret:i+1}:{pos:o.index,c:e,caret:i+1}}return!1},radixHandler:function(t,i,n,r,o){if(!r&&t===o.radixPoint&&o.digits>0){var a=e.inArray(o.radixPoint,i.buffer),s=i.buffer.join("").match(o.regex.integerPart(o));if(-1!=a&&i.validPositions[a])return i.validPositions[a-1]?{caret:a+1}:{pos:s.index,c:s[0],caret:a+1};if(!s||"0"==s[0]&&s.index+1!=n)return i.buffer[s?s.index:n]="0",{pos:(s?s.index:n)+1}}return!1},leadingZeroHandler:function(t,i,n,r,o){var a=i.buffer.join("").match(o.regex.integerNPart(o)),s=e.inArray(o.radixPoint,i.buffer);if(a&&!r&&(-1==s||s>=n))if(0==a[0].indexOf("0")){n<o.prefix.length&&(n=a.index);var l=e.inArray(o.radixPoint,i._buffer),u=i._buffer&&i.buffer.slice(s).join("")==i._buffer.slice(l).join("")||0==parseInt(i.buffer.slice(s+1).join("")),c=i._buffer&&i.buffer.slice(a.index,s).join("")==i._buffer.slice(o.prefix.length,l).join("")||"0"==i.buffer.slice(a.index,s).join("");if(-1==s||u&&c)return i.buffer.splice(a.index,1),n=n>a.index?n-1:a.index,{pos:n,remove:a.index};if(a.index+1==n||"0"==t)return i.buffer.splice(a.index,1),n=a.index,{pos:n,remove:a.index}}else if("0"===t&&n<=a.index&&a[0]!=o.groupSeparator)return!1;return!0},postValidation:function(t,i){var n=!0,r=t.join(""),o=r.replace(i.prefix,"");return o=o.replace(i.suffix,""),o=o.replace(new RegExp(e.inputmask.escapeRegex(i.groupSeparator),"g"),""),","===i.radixPoint&&(o=o.replace(e.inputmask.escapeRegex(i.radixPoint),".")),o=o.replace(new RegExp("^"+e.inputmask.escapeRegex(i.negationSymbol.front)),"-"),o=o.replace(new RegExp(e.inputmask.escapeRegex(i.negationSymbol.back)+"$"),""),isFinite(o)&&isFinite(i.max)&&(n=parseFloat(o)<=parseFloat(i.max)),n},definitions:{"~":{validator:function(t,i,n,r,o){var a=o.signHandler(t,i,n,r,o);if(!a&&(a=o.radixHandler(t,i,n,r,o),!a&&(a=r?new RegExp("[0-9"+e.inputmask.escapeRegex(o.groupSeparator)+"]").test(t):new RegExp("[0-9]").test(t),a===!0&&(a=o.leadingZeroHandler(t,i,n,r,o),a===!0)))){var s=e.inArray(o.radixPoint,i.buffer);a=o.digitsOptional===!1&&n>s&&!r?{pos:n,remove:n}:{pos:n}}return a},cardinality:1,prevalidator:null},"+":{validator:function(e,t,i,n,r){var o=r.signHandler(e,t,i,n,r);return!o&&(n&&r.allowMinus&&e===r.negationSymbol.front||r.allowMinus&&"-"==e||r.allowPlus&&"+"==e)&&(o="-"==e?""!=r.negationSymbol.back?{pos:i,c:"-"===e?r.negationSymbol.front:"+",caret:i+1,insert:{pos:t.buffer.length,c:r.negationSymbol.back}}:{pos:i,c:"-"===e?r.negationSymbol.front:"+",caret:i+1}:!0),o},cardinality:1,prevalidator:null,placeholder:""},"-":{validator:function(e,t,i,n,r){var o=r.signHandler(e,t,i,n,r);return!o&&n&&r.allowMinus&&e===r.negationSymbol.back&&(o=!0),o},cardinality:1,prevalidator:null,placeholder:""},":":{validator:function(t,i,n,r,o){var a=o.signHandler(t,i,n,r,o);if(!a){var s="["+e.inputmask.escapeRegex(o.radixPoint)+"]";a=new RegExp(s).test(t),a&&i.validPositions[n]&&i.validPositions[n].match.placeholder==o.radixPoint&&(a={caret:n+1})}return a},cardinality:1,prevalidator:null,placeholder:function(e){return e.radixPoint}}},insertMode:!0,autoUnmask:!1,unmaskAsNumber:!1,onUnMask:function(t,i,n){var r=t.replace(n.prefix,"");return r=r.replace(n.suffix,""),r=r.replace(new RegExp(e.inputmask.escapeRegex(n.groupSeparator),"g"),""),n.unmaskAsNumber?(r=r.replace(e.inputmask.escapeRegex.call(this,n.radixPoint),"."),Number(r)):r},isComplete:function(t,i){var n=t.join(""),r=t.slice();if(i.postFormat(r,0,!0,i),r.join("")!=n)return!1;var o=n.replace(i.prefix,"");return o=o.replace(i.suffix,""),o=o.replace(new RegExp(e.inputmask.escapeRegex(i.groupSeparator),"g"),""),","===i.radixPoint&&(o=o.replace(e.inputmask.escapeRegex(i.radixPoint),".")),isFinite(o)},onBeforeMask:function(t,i){if(""!=i.radixPoint&&isFinite(t))t=t.toString().replace(".",i.radixPoint);else{var n=t.match(/,/g),r=t.match(/\./g);r&&n?r.length>n.length?(t=t.replace(/\./g,""),t=t.replace(",",i.radixPoint)):n.length>r.length?(t=t.replace(/,/g,""),t=t.replace(".",i.radixPoint)):t=t.indexOf(".")<t.indexOf(",")?t.replace(/\./g,""):t=t.replace(/,/g,""):t=t.replace(new RegExp(e.inputmask.escapeRegex(i.groupSeparator),"g"),"")}return 0==i.digits&&(-1!=t.indexOf(".")?t=t.substring(0,t.indexOf(".")):-1!=t.indexOf(",")&&(t=t.substring(0,t.indexOf(",")))),t},canClearPosition:function(t,i,n,r,o){var a=t.validPositions[i].input,s=a!=o.radixPoint&&isFinite(a)||i==n||a==o.groupSeparator||a==o.negationSymbol.front||a==o.negationSymbol.back;if(s&&isFinite(a)){var l;if(!r&&t.buffer){l=t.buffer.join("").substr(0,i).match(o.regex.integerNPart(o));var u=i+1,c=null==l||0==parseInt(l[0].replace(new RegExp(e.inputmask.escapeRegex(o.groupSeparator),"g"),""));if(c)for(;t.validPositions[u]&&(t.validPositions[u].input==o.groupSeparator||"0"==t.validPositions[u].input);)delete t.validPositions[u],u++}var d=[];for(var f in t.validPositions)d.push(t.validPositions[f].input);l=d.join("").match(o.regex.integerNPart(o));var p=e.inArray(o.radixPoint,t.buffer);if(l&&(-1==p||p>=i))if(0==l[0].indexOf("0"))s=l.index!=i||-1==p;else{var h=parseInt(l[0].replace(new RegExp(e.inputmask.escapeRegex(o.groupSeparator),"g"),""));-1!=p&&10>h&&"0"==o.placeholder.charAt(0)&&(t.validPositions[i].input="0",t.p=o.prefix.length+1,s=!1)}}return s}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:"0",radixPoint:""}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.aliases,{phone:{url:"phone-codes/phone-codes.js",countrycode:"",mask:function(t){t.definitions["#"]=t.definitions[9];var i=[];return e.ajax({url:t.url,async:!1,dataType:"json",success:function(e){i=e},error:function(e,i,n){alert(n+" - "+t.url)}}),i=i.sort((function(e,t){return(e.mask||e)<(t.mask||t)?-1:1}))},keepStatic:!1,nojumps:!0,nojumpsThreshold:1,onBeforeMask:function(e,t){var i=e.replace(/^0/g,"");return(i.indexOf(t.countrycode)>1||-1==i.indexOf(t.countrycode))&&(i="+"+t.countrycode+i),i}},phonebe:{alias:"phone",url:"phone-codes/phone-be.js",countrycode:"32",nojumpsThreshold:4}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.aliases,{Regex:{mask:"r",greedy:!1,repeat:"*",regex:null,regexTokens:null,tokenizer:/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,quantifierFilter:/[0-9]+[^,]/,isComplete:function(e,t){return new RegExp(t.regex).test(e.join(""))},definitions:{r:{validator:function(t,i,n,r,o){function a(e,t){this.matches=[],this.isGroup=e||!1,this.isQuantifier=t||!1,this.quantifier={min:1,max:1},this.repeaterPart=void 0}function s(){var e,t,i=new a,n=[];for(o.regexTokens=[];e=o.tokenizer.exec(o.regex);)switch(t=e[0],t.charAt(0)){case"(":n.push(new a(!0));break;case")":var r=n.pop();n.length>0?n[n.length-1].matches.push(r):i.matches.push(r);break;case"{":case"+":case"*":var s=new a(!1,!0);t=t.replace(/[{}]/g,"");var l=t.split(","),u=isNaN(l[0])?l[0]:parseInt(l[0]),c=1==l.length?u:isNaN(l[1])?l[1]:parseInt(l[1]);if(s.quantifier={min:u,max:c},n.length>0){var d=n[n.length-1].matches;if(e=d.pop(),!e.isGroup){var r=new a(!0);r.matches.push(e),e=r}d.push(e),d.push(s)}else{if(e=i.matches.pop(),!e.isGroup){var r=new a(!0);r.matches.push(e),e=r}i.matches.push(e),i.matches.push(s)}break;default:n.length>0?n[n.length-1].matches.push(t):i.matches.push(t)}i.matches.length>0&&o.regexTokens.push(i)}function l(t,i){var n=!1;i&&(c+="(",f++);for(var r=0;r<t.matches.length;r++){var o=t.matches[r];if(1==o.isGroup)n=l(o,!0);else if(1==o.isQuantifier){var a=e.inArray(o,t.matches),s=t.matches[a-1],u=c;if(isNaN(o.quantifier.max)){for(;o.repeaterPart&&o.repeaterPart!=c&&o.repeaterPart.length>c.length&&!(n=l(s,!0)););n=n||l(s,!0),n&&(o.repeaterPart=c),c=u+o.quantifier.max}else{for(var d=0,h=o.quantifier.max-1;h>d&&!(n=l(s,!0));d++);c=u+"{"+o.quantifier.min+","+o.quantifier.max+"}"}}else if(void 0!=o.matches)for(var g=0;g<o.length&&!(n=l(o[g],i));g++);else{var m;if("["==o.charAt(0)){m=c,m+=o;for(var v=0;f>v;v++)m+=")";var y=new RegExp("^("+m+")$");n=y.test(p)}else for(var b=0,_=o.length;_>b;b++)if("\\"!=o.charAt(b)){m=c,m+=o.substr(0,b+1),m=m.replace(/\|$/,"");for(var v=0;f>v;v++)m+=")";var y=new RegExp("^("+m+")$");if(n=y.test(p))break}c+=o}if(n)break}return i&&(c+=")",f--),n}null==o.regexTokens&&s();var u=i.buffer.slice(),c="",d=!1,f=0;u.splice(n,0,t);for(var p=u.join(""),h=0;h<o.regexTokens.length;h++){var a=o.regexTokens[h];if(d=l(a,a.isGroup))break}return d},cardinality:1}}}}),e.fn.inputmask}(jQuery);(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){e(require("jquery"))}else{e(window.jQuery)}})((function(e){"use strict";var t=0;e.ajaxTransport("iframe",(function(i){if(i.async){var n=i.initialIframeSrc||"javascript:false;",r,o,a;return{send:function(s,l){r=e('<form style="display:none;"></form>');r.attr("accept-charset",i.formAcceptCharset);a=/\?/.test(i.url)?"&":"?";if(i.type==="DELETE"){i.url=i.url+a+"_method=DELETE";i.type="POST"}else if(i.type==="PUT"){i.url=i.url+a+"_method=PUT";i.type="POST"}else if(i.type==="PATCH"){i.url=i.url+a+"_method=PATCH";i.type="POST"}t+=1;o=e('<iframe src="'+n+'" name="iframe-transport-'+t+'"></iframe>').bind("load",(function(){var t,a=e.isArray(i.paramName)?i.paramName:[i.paramName];o.unbind("load").bind("load",(function(){var t;try{t=o.contents();if(!t.length||!t[0].firstChild){throw new Error}}catch(e){t=undefined}l(200,"success",{iframe:t});e('<iframe src="'+n+'"></iframe>').appendTo(r);window.setTimeout((function(){r.remove()}),0)}));r.prop("target",o.prop("name")).prop("action",i.url).prop("method",i.type);if(i.formData){e.each(i.formData,(function(t,i){e('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(r)}))}if(i.fileInput&&i.fileInput.length&&i.type==="POST"){t=i.fileInput.clone();i.fileInput.after((function(e){return t[e]}));if(i.paramName){i.fileInput.each((function(t){e(this).prop("name",a[t]||i.paramName)}))}r.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data");i.fileInput.removeAttr("form")}r.submit();if(t&&t.length){i.fileInput.each((function(i,n){var r=e(t[i]);e(n).prop("name",r.prop("name")).attr("form",r.attr("form"));r.replaceWith(n)}))}}));r.append(o).appendTo(document.body)},abort:function(){if(o){o.unbind("load").prop("src",n)}if(r){r.remove()}}}}}));e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var i=t&&t[0];return i&&e.isXMLDoc(i)?i:e.parseXML(i.XMLDocument&&i.XMLDocument.xml||e(i.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}));(function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(e){this.el=e;this.dragleave=t(this.dragleave,this);this.dragenter=t(this.dragenter,this);if(this.supportsEventConstructors()){this.first=false;this.second=false;this.el.addEventListener("dragenter",this.dragenter,false);this.el.addEventListener("dragleave",this.dragleave,false)}}e.prototype.dragenter=function(e){if(this.first){return this.second=true}else{this.first=true;return this.el.dispatchEvent(new CustomEvent("dragster:enter",{bubbles:true,cancelable:true,detail:{dataTransfer:e.dataTransfer}}))}};e.prototype.dragleave=function(e){if(this.second){this.second=false}else if(this.first){this.first=false}if(!this.first&&!this.second){return this.el.dispatchEvent(new CustomEvent("dragster:leave",{bubbles:true,cancelable:true,detail:{dataTransfer:e.dataTransfer}}))}};e.prototype.removeListeners=function(){this.el.removeEventListener("dragenter",this.dragenter,false);return this.el.removeEventListener("dragleave",this.dragleave,false)};e.prototype.supportsEventConstructors=function(){try{new CustomEvent("z")}catch(e){return false}return true};e.prototype.reset=function(){this.first=false;return this.second=false};return e}();if(typeof module==="undefined"){window.Dragster=e}else{module.exports=e}}).call(this);(function(){var e;e=function(){function e(e,t){var i;if(t==null){t=[]}i={script:null,ajaxQueue:false,autoUpload:false,classDragOver:"is-dragover",onUploadingFiles:function(e,t){},onSelectFiles:function(e,t){},onSuccessFile:function(e,t,i){},onComplete:function(e,t){},onFileError:function(e,t){},onFileFail:function(e,t){}};this.options=$.extend(i,t);this.files=[];$.each($(e),function(e){return function(t,i){var n,r;n=$(i);r=n.find("input[type=file]");n.data("pos",t);r.on("change",(function(t){var i;i=$(t.currentTarget).prop("files");e.options.onSelectFiles(i,n);e.files[n.data("pos")]=t.target.files;if(e.options.autoUpload){return e.submit(n,t.target.files)}}));return e.initDrag(n)}}(this))}e.prototype.initDrag=function(e){var t;if(this.isAdvancedUpload()){t=false;return e.on("drag dragstart dragend dragover dragenter dragleave drop",(function(e){e.preventDefault();e.stopPropagation()})).on("dragover dragenter",function(t){return function(){e.addClass(t.options.classDragOver)}}(this)).on("dragleave dragend drop",function(t){return function(){e.removeClass(t.options.classDragOver)}}(this)).on("drop",function(i){return function(n){t=n.originalEvent.dataTransfer.files;i.options.onSelectFiles(t,e);if(i.options.autoUpload){return i.submit(e,t)}else{return i.files[e.data("pos")]=t}}}(this))}};e.prototype.startUpload=function(e){var t;t=this.files[e.data("pos")];if(t){return this.submit(e,t)}};e.prototype.submit=function(e,t){var i,n,r,o,a,s,l,u,c,d;if(e.hasClass("is-uploading")){return false}e.addClass("is-uploading");c=t.length;d=1;r=e.find("input[type=file]").attr("name");this.options.onUploadingFiles(d,c);u=[];for(a=o=0,s=t.length;o<s;a=++o){n=t[a];l=new FormData;l.append(r+"[]",n);l.append("position",a);i=this.options.ajaxQueue?$.ajaxQueue:$.ajax;u.push(i({url:this.options.script,type:"POST",data:l,processData:false,contentType:false,cache:false,complete:function(i){return function(){d++;if(d>=c+1){i.options.onComplete(t,e);i.removeFiles(e);return e.removeClass("is-uploading")}else{return i.options.onUploadingFiles(d,c)}}}(this),success:function(t){return function(i){t.options.onSuccessFile(n,i,e)}}(this),fail:function(t){return function(i){t.options.onFileFail(i,e)}}(this),error:function(t){return function(i){t.options.onFileError(i,e)}}(this)}))}return u};e.prototype.removeFiles=function(e){return this.files[e.data("pos")]=null};e.prototype.isAdvancedUpload=function(){var e;e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window};e.prototype.isFormData=function(){return"FormData"in window};e.prototype.isFileReader=function(){return"FileReader"in window};e.prototype.isDraggable=function(){var e;e=document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e};return e}();if(typeof module==="undefined"){window.Dropzone=e}else{module.exports=e}return e}).call(this);window=typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};document=window.document||{};(function(e,t){if(typeof require==="function"&&typeof exports==="object"&&typeof module==="object"){e(require("jquery"))}else if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(t.jQuery)}})((function(e){"use strict";var t=0;var i={};var n={};var r=window.emojione;var o=[];function a(e){if(r){e()}else{o.push(e)}}var s="data:image/gif;base64,R0lGODlhAQABAJH/AP///wAAAMDAwAAAACH5BAEAAAIALAAAAAABAAEAAAICVAEAOw==";var l=[].slice;var u="emojionearea";var c=0;var d="&#8203;";function f(t,n,r){var o=true,a=1;if(n){n=n.toLowerCase();do{var s=a==1?"@"+n:n;if(i[t.id][s]&&i[t.id][s].length){e.each(i[t.id][s],(function(e,i){return o=i.apply(t,r||[])!==false}))}}while(o&&!!a--)}return o}function p(t,i,r,o){o=o||function(t,i){return e(i.currentTarget)};e.each(r,(function(a,s){a=e.isArray(r)?s:a;(n[t.id][s]||(n[t.id][s]=[])).push([i,a,o])}))}function h(e,t,i){var n=r.imageType,o;if(n=="svg"){o=r.imagePathSVG}else{o=r.imagePathPNG}var a="";if(i){a=i.substr(1,i.length-2).replace(/_/g," ").replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))}var s="";if(t.uc_base&&c>4){s=t.uc_base;t=t.uc_output.toUpperCase()}else{s=t}e=e.replace("{name}",i||"").replace("{friendlyName}",a).replace("{img}",o+(c<2?s.toUpperCase():s)+"."+n).replace("{uni}",t);if(i){e=e.replace("{alt}",r.shortnameToUnicode(i))}else{e=e.replace("{alt}",r.convert(t))}return e}function g(e,t,i){return e.replace(/:?\+?[\w_\-]+:?/g,(function(e){e=":"+e.replace(/:$/,"").replace(/^:/,"")+":";var n=r.emojioneList[e];if(n){if(c>4){return h(t,n,e)}else{if(c>3)n=n.unicode;return h(t,n[n.length-1],e)}}return i?"":e}))}function m(e){var t,i;if(window.getSelection){t=window.getSelection();if(t.getRangeAt&&t.rangeCount){i=t.getRangeAt(0);i.deleteContents();var n=document.createElement("div");n.innerHTML=e;var r=document.createDocumentFragment(),o,a;while(o=n.firstChild){a=r.appendChild(o)}i.insertNode(r);if(a){i=i.cloneRange();i.setStartAfter(a);i.collapse(true);t.removeAllRanges();t.addRange(i)}}}else if(document.selection&&document.selection.type!="Control"){document.selection.createRange().pasteHTML(e)}}function v(){return window.emojioneVersion||"3.1.2"}function y(e){return typeof e==="object"}function b(e){var t;if(e.cacheBustParam){t=e.cacheBustParam;if(!y(e["jsEscapeMap"]))return"1.5.2";if(t==="?v=1.2.4")return"2.0.0";if(t==="?v=2.0.1")return"2.1.0";if(t==="?v=2.1.1")return"2.1.1";if(t==="?v=2.1.2")return"2.1.2";if(t==="?v=2.1.3")return"2.1.3";if(t==="?v=2.1.4")return"2.1.4";if(t==="?v=2.2.7")return"2.2.7";return"2.2.7"}else{return e.emojiVersion}}function _(e){switch(e){case"1.5.2":return 0;case"2.0.0":return 1;case"2.1.0":case"2.1.1":return 2;case"2.1.2":return 3;case"2.1.3":case"2.1.4":case"2.2.7":return 4;case"3.0.1":case"3.0.2":case"3.0.3":case"3.0":return 5;case"3.1.0":case"3.1.1":case"3.1.2":case"3.1":default:return 6}}function w(){if(e.fn.emojioneArea&&e.fn.emojioneArea.defaults){return e.fn.emojioneArea.defaults}var t={attributes:{dir:"ltr",spellcheck:false,autocomplete:"off",autocorrect:"off",autocapitalize:"off"},search:true,placeholder:null,emojiPlaceholder:":smiley:",searchPlaceholder:"SEARCH",container:null,hideSource:true,shortnames:true,sprite:true,pickerPosition:"top",filtersPosition:"top",searchPosition:"top",hidePickerOnBlur:true,buttonTitle:"Use the TAB key to insert emoji faster",tones:true,tonesStyle:"bullet",inline:null,saveEmojisAs:"unicode",shortcuts:true,autocomplete:true,autocompleteTones:false,standalone:false,useInternalCDN:true,imageType:"png",recentEmojis:true,textcomplete:{maxCount:15,placement:null}};var i=!r?_(v()):_(b(r));if(i>4){t.filters={tones:{title:"Diversity",emoji:"open_hands raised_hands palms_up_together clap pray thumbsup thumbsdown punch fist left_facing_fist right_facing_fist "+"fingers_crossed v metal love_you_gesture ok_hand point_left point_right point_up_2 point_down point_up raised_hand "+"raised_back_of_hand hand_splayed vulcan wave call_me muscle middle_finger writing_hand selfie nail_care ear "+"nose baby boy girl man woman blond-haired_woman blond-haired_man older_man older_woman "+"man_with_chinese_cap woman_wearing_turban man_wearing_turban woman_police_officer "+"man_police_officer woman_construction_worker man_construction_worker "+"woman_guard man_guard woman_detective man_detective woman_health_worker man_health_worker "+"woman_farmer man_farmer woman_cook man_cook woman_student man_student woman_singer man_singer woman_teacher "+"man_teacher woman_factory_worker man_factory_worker woman_technologist man_technologist woman_office_worker "+"man_office_worker woman_mechanic man_mechanic woman_scientist man_scientist woman_artist man_artist "+"woman_firefighter man_firefighter woman_pilot man_pilot woman_astronaut man_astronaut woman_judge "+"man_judge mrs_claus santa princess prince bride_with_veil man_in_tuxedo angel pregnant_woman "+"breast_feeding woman_bowing man_bowing man_tipping_hand woman_tipping_hand "+"man_gesturing_no woman_gesturing_no man_gesturing_ok woman_gesturing_ok "+"man_raising_hand woman_raising_hand woman_facepalming man_facepalming "+"woman_shrugging man_shrugging man_pouting woman_pouting "+"man_frowning woman_frowning man_getting_haircut woman_getting_haircut "+"man_getting_face_massage woman_getting_face_massage man_in_business_suit_levitating dancer man_dancing "+"woman_walking man_walking woman_running man_running adult child older_adult "+"bearded_person woman_with_headscarf woman_mage man_mage "+"woman_fairy man_fairy woman_vampire man_vampire mermaid merman woman_elf man_elf "+"snowboarder woman_lifting_weights man_lifting_weights woman_cartwheeling "+"man_cartwheeling woman_bouncing_ball man_bouncing_ball "+"woman_playing_handball man_playing_handball woman_golfing man_golfing "+"woman_surfing man_surfing woman_swimming man_swimming woman_playing_water_polo "+"man_playing_water_polo woman_rowing_boat man_rowing_boat "+"horse_racing woman_biking man_biking woman_mountain_biking "+"man_mountain_biking woman_juggling man_juggling "+"woman_in_steamy_room man_in_steamy_room woman_climbing "+"man_climbing woman_in_lotus_position man_in_lotus_position bath person_in_bed"},recent:{icon:"clock3",title:"Recent",emoji:""},smileys_people:{icon:"yum",title:"Smileys & People",emoji:"grinning smiley smile grin laughing sweat_smile joy rofl relaxed blush innocent slight_smile upside_down "+"wink relieved crazy_face star_struck heart_eyes kissing_heart kissing kissing_smiling_eyes kissing_closed_eyes yum "+"stuck_out_tongue_winking_eye stuck_out_tongue_closed_eyes stuck_out_tongue money_mouth hugging nerd sunglasses "+"cowboy smirk unamused disappointed pensive worried face_with_raised_eyebrow face_with_monocle confused slight_frown "+"frowning2 persevere confounded tired_face weary triumph angry rage face_with_symbols_over_mouth "+"no_mouth neutral_face expressionless hushed frowning anguished open_mouth astonished dizzy_face exploding_head flushed scream "+"fearful cold_sweat cry disappointed_relieved drooling_face sob sweat sleepy sleeping rolling_eyes thinking "+"shushing_face face_with_hand_over_mouth lying_face grimacing zipper_mouth face_vomiting nauseated_face sneezing_face mask thermometer_face "+"head_bandage smiling_imp imp japanese_ogre japanese_goblin poop ghost skull skull_crossbones alien space_invader "+"robot jack_o_lantern clown smiley_cat smile_cat joy_cat heart_eyes_cat smirk_cat kissing_cat scream_cat crying_cat_face "+"pouting_cat open_hands raised_hands palms_up_together clap pray handshake thumbsup thumbsdown punch fist left_facing_fist "+"right_facing_fist fingers_crossed v metal love_you_gesture ok_hand point_left point_right point_up_2 point_down point_up "+"raised_hand raised_back_of_hand hand_splayed vulcan wave call_me muscle middle_finger writing_hand selfie "+"nail_care ring lipstick kiss lips tongue ear nose footprints eye eyes speaking_head bust_in_silhouette "+"busts_in_silhouette baby boy girl man woman blond-haired_woman blond_haired_man older_man older_woman "+"man_with_chinese_cap woman_wearing_turban man_wearing_turban woman_police_officer police_officer "+"woman_construction_worker construction_worker woman_guard guard woman_detective detective woman_health_worker "+"man_health_worker woman_farmer man_farmer woman_cook man_cook woman_student man_student woman_singer man_singer "+"woman_teacher man_teacher woman_factory_worker man_factory_worker woman_technologist man_technologist "+"woman_office_worker man_office_worker woman_mechanic man_mechanic woman_scientist man_scientist woman_artist "+"man_artist woman_firefighter man_firefighter woman_pilot man_pilot woman_astronaut man_astronaut woman_judge "+"man_judge mrs_claus santa princess prince bride_with_veil man_in_tuxedo angel pregnant_woman breast_feeding woman_bowing "+"man_bowing woman_tipping_hand man_tipping_hand woman_gesturing_no man_gesturing_no woman_gesturing_ok "+"man_gesturing_ok woman_raising_hand man_raising_hand woman_facepalming man_facepalming woman_shrugging "+"man_shrugging woman_pouting man_pouting woman_frowning man_frowning woman_getting_haircut man_getting_haircut "+"woman_getting_face_massage man_getting_face_massage man_in_business_suit_levitating dancer man_dancing women_with_bunny_ears_partying "+"men_with_bunny_ears_partying woman_walking man_walking woman_running man_running couple two_women_holding_hands "+"two_men_holding_hands couple_with_heart couple_ww couple_mm couplekiss kiss_ww kiss_mm family family_mwg family_mwgb "+"family_mwbb family_mwgg family_wwb family_wwg family_wwgb family_wwbb family_wwgg family_mmb family_mmg family_mmgb "+"family_mmbb family_mmgg family_woman_boy family_woman_girl family_woman_girl_boy family_woman_boy_boy "+"family_woman_girl_girl family_man_boy family_man_girl family_man_girl_boy family_man_boy_boy family_man_girl_girl "+"bearded_person woman_with_headscarf woman_mage man_mage woman_fairy man_fairy woman_vampire man_vampire "+"mermaid merman woman_elf man_elf woman_genie man_genie woman_zombie man_zombie "+"womans_clothes shirt jeans necktie dress bikini kimono high_heel sandal boot mans_shoe athletic_shoe womans_hat "+"tophat mortar_board crown helmet_with_cross school_satchel pouch purse handbag briefcase eyeglasses dark_sunglasses "+"closed_umbrella umbrella2 brain billed_cap scarf gloves coat socks "},animals_nature:{icon:"hamster",title:"Animals & Nature",emoji:"dog cat mouse hamster rabbit fox bear panda_face koala tiger lion_face cow pig pig_nose frog monkey_face see_no_evil "+"hear_no_evil speak_no_evil monkey chicken penguin bird baby_chick hatching_chick hatched_chick duck eagle owl bat wolf boar "+"horse unicorn bee bug butterfly snail shell beetle ant spider spider_web turtle snake lizard scorpion crab squid octopus shrimp "+"tropical_fish fish blowfish dolphin shark whale whale2 crocodile leopard tiger2 water_buffalo ox cow2 deer dromedary_camel camel "+"elephant rhino gorilla racehorse pig2 goat ram sheep dog2 poodle cat2 rooster turkey dove rabbit2 mouse2 rat chipmunk dragon "+"giraffe zebra hedgehog sauropod t_rex cricket dragon_face feet cactus christmas_tree evergreen_tree deciduous_tree palm_tree seedling herb shamrock four_leaf_clover "+"bamboo tanabata_tree leaves fallen_leaf maple_leaf mushroom ear_of_rice bouquet tulip rose wilted_rose sunflower blossom "+"cherry_blossom hibiscus earth_americas earth_africa earth_asia full_moon waning_gibbous_moon last_quarter_moon "+"waning_crescent_moon new_moon waxing_crescent_moon first_quarter_moon waxing_gibbous_moon new_moon_with_face "+"full_moon_with_face sun_with_face first_quarter_moon_with_face last_quarter_moon_with_face crescent_moon dizzy star star2 "+"sparkles zap fire boom comet sunny white_sun_small_cloud partly_sunny white_sun_cloud white_sun_rain_cloud rainbow cloud "+"cloud_rain thunder_cloud_rain cloud_lightning cloud_snow snowman2 snowman snowflake wind_blowing_face dash cloud_tornado "+"fog ocean droplet sweat_drops umbrella "},food_drink:{icon:"pizza",title:"Food & Drink",emoji:"green_apple apple pear tangerine lemon banana watermelon grapes strawberry melon cherries peach pineapple kiwi "+"avocado tomato eggplant cucumber carrot corn hot_pepper potato sweet_potato chestnut peanuts honey_pot croissant "+"bread french_bread cheese egg cooking bacon pancakes fried_shrimp poultry_leg meat_on_bone pizza hotdog hamburger "+"fries stuffed_flatbread taco burrito salad shallow_pan_of_food spaghetti ramen stew fish_cake sushi bento curry "+"rice_ball rice rice_cracker oden dango shaved_ice ice_cream icecream cake birthday custard lollipop candy "+"chocolate_bar popcorn doughnut cookie milk baby_bottle coffee tea sake beer beers champagne_glass wine_glass "+"tumbler_glass cocktail tropical_drink champagne spoon fork_and_knife fork_knife_plate dumpling fortune_cookie "+"takeout_box chopsticks bowl_with_spoon cup_with_straw coconut broccoli pie pretzel cut_of_meat sandwich canned_food"},activity:{icon:"basketball",title:"Activity",emoji:"soccer basketball football baseball tennis volleyball rugby_football 8ball ping_pong badminton goal hockey field_hockey "+"cricket_game golf bow_and_arrow fishing_pole_and_fish boxing_glove martial_arts_uniform ice_skate ski skier snowboarder "+"woman_lifting_weights man_lifting_weights person_fencing women_wrestling men_wrestling woman_cartwheeling "+"man_cartwheeling woman_bouncing_ball man_bouncing_ball woman_playing_handball man_playing_handball woman_golfing "+"man_golfing woman_surfing man_surfing woman_swimming man_swimming woman_playing_water_polo "+"man_playing_water_polo woman_rowing_boat man_rowing_boat horse_racing woman_biking man_biking woman_mountain_biking man_mountain_biking "+"woman_in_steamy_room man_in_steamy_room woman_climbing man_climbing woman_in_lotus_position man_in_lotus_position "+"running_shirt_with_sash medal military_medal first_place second_place "+"third_place trophy rosette reminder_ribbon ticket tickets circus_tent woman_juggling man_juggling performing_arts art "+"clapper microphone headphones musical_score musical_keyboard drum saxophone trumpet guitar violin game_die dart bowling "+"video_game slot_machine sled curling_stone "},travel_places:{icon:"rocket",title:"Travel & Places",emoji:"red_car taxi blue_car bus trolleybus race_car police_car ambulance fire_engine minibus truck articulated_lorry tractor "+"scooter bike motor_scooter motorcycle rotating_light oncoming_police_car oncoming_bus oncoming_automobile oncoming_taxi "+"aerial_tramway mountain_cableway suspension_railway railway_car train mountain_railway monorail bullettrain_side "+"bullettrain_front light_rail steam_locomotive train2 metro tram station helicopter airplane_small airplane "+"airplane_departure airplane_arriving rocket satellite_orbital seat canoe sailboat motorboat speedboat cruise_ship "+"ferry ship anchor construction fuelpump busstop vertical_traffic_light traffic_light map moyai statue_of_liberty "+"fountain tokyo_tower european_castle japanese_castle stadium ferris_wheel roller_coaster carousel_horse beach_umbrella "+"beach island mountain mountain_snow mount_fuji volcano desert camping tent railway_track motorway construction_site "+"factory house house_with_garden homes house_abandoned office department_store post_office european_post_office hospital "+"bank hotel convenience_store school love_hotel wedding classical_building church mosque synagogue kaaba shinto_shrine "+"japan rice_scene park sunrise sunrise_over_mountains stars sparkler fireworks city_sunset city_dusk cityscape "+"night_with_stars milky_way bridge_at_night foggy flying_saucer"},objects:{icon:"bulb",title:"Objects",emoji:"watch iphone calling computer keyboard desktop printer mouse_three_button trackball joystick compression minidisc "+"floppy_disk cd dvd vhs camera camera_with_flash video_camera movie_camera projector film_frames telephone_receiver "+"telephone pager fax tv radio microphone2 level_slider control_knobs stopwatch timer alarm_clock clock hourglass "+"hourglass_flowing_sand satellite battery electric_plug bulb flashlight candle wastebasket oil money_with_wings "+"dollar yen euro pound moneybag credit_card gem scales wrench hammer hammer_pick tools pick nut_and_bolt gear "+"chains gun bomb knife dagger crossed_swords shield smoking coffin urn amphora crystal_ball prayer_beads barber "+"alembic telescope microscope hole pill syringe thermometer toilet potable_water shower bathtub bath bellhop key "+"key2 door couch bed sleeping_accommodation frame_photo shopping_bags shopping_cart gift balloon flags ribbon "+"confetti_ball tada dolls izakaya_lantern wind_chime envelope envelope_with_arrow incoming_envelope e-mail "+"love_letter inbox_tray outbox_tray package label mailbox_closed mailbox mailbox_with_mail mailbox_with_no_mail "+"postbox postal_horn scroll page_with_curl page_facing_up bookmark_tabs bar_chart chart_with_upwards_trend "+"chart_with_downwards_trend notepad_spiral calendar_spiral calendar date card_index card_box ballot_box "+"file_cabinet clipboard file_folder open_file_folder dividers newspaper2 newspaper notebook "+"notebook_with_decorative_cover ledger closed_book green_book blue_book orange_book books book bookmark link "+"paperclip paperclips triangular_ruler straight_ruler pushpin round_pushpin scissors pen_ballpoint pen_fountain "+"black_nib paintbrush crayon pencil pencil2 mag mag_right lock_with_ink_pen closed_lock_with_key lock unlock"},symbols:{icon:"heartpulse",title:"Symbols",emoji:"heart orange_heart yellow_heart green_heart blue_heart purple_heart black_heart broken_heart heart_exclamation two_hearts "+"revolving_hearts heartbeat heartpulse sparkling_heart cupid gift_heart heart_decoration peace cross star_and_crescent "+"om_symbol wheel_of_dharma star_of_david six_pointed_star menorah yin_yang orthodox_cross place_of_worship ophiuchus "+"aries taurus gemini cancer leo virgo libra scorpius sagittarius capricorn aquarius pisces id atom accept radioactive "+"biohazard mobile_phone_off vibration_mode u6709 u7121 u7533 u55b6 u6708 eight_pointed_black_star vs white_flower "+"ideograph_advantage secret congratulations u5408 u6e80 u5272 u7981 a b ab cl o2 sos x o octagonal_sign no_entry "+"name_badge no_entry_sign 100 anger hotsprings no_pedestrians do_not_litter no_bicycles non-potable_water underage "+"no_mobile_phones no_smoking exclamation grey_exclamation question grey_question bangbang interrobang low_brightness "+"high_brightness part_alternation_mark warning children_crossing trident fleur-de-lis beginner recycle "+"white_check_mark u6307 chart sparkle eight_spoked_asterisk negative_squared_cross_mark globe_with_meridians "+"diamond_shape_with_a_dot_inside m cyclone zzz atm wc wheelchair parking u7a7a sa passport_control customs "+"baggage_claim left_luggage mens womens baby_symbol restroom put_litter_in_its_place cinema signal_strength koko "+"symbols information_source abc abcd capital_abcd ng ok up cool new free zero one two three four five six seven "+"eight nine keycap_ten 1234 hash asterisk arrow_forward pause_button play_pause stop_button record_button eject "+"track_next track_previous fast_forward rewind arrow_double_up arrow_double_down arrow_backward arrow_up_small "+"arrow_down_small arrow_right arrow_left arrow_up arrow_down arrow_upper_right arrow_lower_right arrow_lower_left "+"arrow_upper_left arrow_up_down left_right_arrow arrow_right_hook leftwards_arrow_with_hook arrow_heading_up "+"arrow_heading_down twisted_rightwards_arrows repeat repeat_one arrows_counterclockwise arrows_clockwise "+"musical_note notes heavy_plus_sign heavy_minus_sign heavy_division_sign heavy_multiplication_x heavy_dollar_sign "+"currency_exchange tm copyright registered wavy_dash curly_loop loop end back on top soon heavy_check_mark "+"ballot_box_with_check radio_button white_circle black_circle red_circle blue_circle small_red_triangle "+"small_red_triangle_down small_orange_diamond small_blue_diamond large_orange_diamond large_blue_diamond "+"white_square_button black_square_button black_small_square white_small_square black_medium_small_square "+"white_medium_small_square black_medium_square white_medium_square black_large_square white_large_square speaker "+"mute sound loud_sound bell no_bell mega loudspeaker speech_left eye_in_speech_bubble speech_balloon thought_balloon "+"anger_right spades clubs hearts diamonds black_joker flower_playing_cards mahjong clock1 clock2 clock3 clock4 clock5 "+"clock6 clock7 clock8 clock9 clock10 clock11 clock12 clock130 clock230 clock330 clock430 clock530 clock630 "+"clock730 clock830 clock930 clock1030 clock1130 clock1230"},flags:{icon:"flag_gb",title:"Flags",emoji:"flag_white flag_black checkered_flag triangular_flag_on_post rainbow_flag flag_af flag_ax flag_al flag_dz flag_as "+"flag_ad flag_ao flag_ai flag_aq flag_ag flag_ar flag_am flag_aw flag_au flag_at flag_az flag_bs flag_bh flag_bd flag_bb "+"flag_by flag_be flag_bz flag_bj flag_bm flag_bt flag_bo flag_ba flag_bw flag_br flag_io flag_vg flag_bn flag_bg flag_bf "+"flag_bi flag_kh flag_cm flag_ca flag_ic flag_cv flag_bq flag_ky flag_cf flag_td flag_cl flag_cn flag_cx flag_cc flag_co "+"flag_km flag_cg flag_cd flag_ck flag_cr flag_ci flag_hr flag_cu flag_cw flag_cy flag_cz flag_dk flag_dj flag_dm flag_do "+"flag_ec flag_eg flag_sv flag_gq flag_er flag_ee flag_et flag_eu flag_fk flag_fo flag_fj flag_fi flag_fr flag_gf flag_pf "+"flag_tf flag_ga flag_gm flag_ge flag_de flag_gh flag_gi flag_gr flag_gl flag_gd flag_gp flag_gu flag_gt flag_gg flag_gn "+"flag_gw flag_gy flag_ht flag_hn flag_hk flag_hu flag_is flag_in flag_id flag_ir flag_iq flag_ie flag_im flag_il flag_it "+"flag_jm flag_jp crossed_flags flag_je flag_jo flag_kz flag_ke flag_ki flag_xk flag_kw flag_kg flag_la flag_lv flag_lb "+"flag_ls flag_lr flag_ly flag_li flag_lt flag_lu flag_mo flag_mk flag_mg flag_mw flag_my flag_mv flag_ml flag_mt flag_mh "+"flag_mq flag_mr flag_mu flag_yt flag_mx flag_fm flag_md flag_mc flag_mn flag_me flag_ms flag_ma flag_mz flag_mm flag_na "+"flag_nr flag_np flag_nl flag_nc flag_nz flag_ni flag_ne flag_ng flag_nu flag_nf flag_kp flag_mp flag_no flag_om flag_pk "+"flag_pw flag_ps flag_pa flag_pg flag_py flag_pe flag_ph flag_pn flag_pl flag_pt flag_pr flag_qa flag_re flag_ro flag_ru "+"flag_rw flag_ws flag_sm flag_st flag_sa flag_sn flag_rs flag_sc flag_sl flag_sg flag_sx flag_sk flag_si flag_gs flag_sb "+"flag_so flag_za flag_kr flag_ss flag_es flag_lk flag_bl flag_sh flag_kn flag_lc flag_pm flag_vc flag_sd flag_sr flag_sz "+"flag_se flag_ch flag_sy flag_tw flag_tj flag_tz flag_th flag_tl flag_tg flag_tk flag_to flag_tt flag_tn flag_tr flag_tm "+"flag_tc flag_tv flag_vi flag_ug flag_ua flag_ae flag_gb flag_us flag_uy flag_uz flag_vu flag_va flag_ve flag_vn flag_wf "+"flag_eh flag_ye flag_zm flag_zw flag_ac flag_ta flag_bv flag_hm flag_sj flag_um flag_ea flag_cp flag_dg flag_mf "+"united_nations england scotland wales"}}}else{t.filters={tones:{title:"Diversity",emoji:"santa runner surfer swimmer lifter ear nose point_up_2 point_down point_left point_right punch "+"wave ok_hand thumbsup thumbsdown clap open_hands boy girl man woman cop bride_with_veil person_with_blond_hair "+"man_with_gua_pi_mao man_with_turban older_man grandma baby construction_worker princess angel "+"information_desk_person guardsman dancer nail_care massage haircut muscle spy hand_splayed middle_finger "+"vulcan no_good ok_woman bow raising_hand raised_hands person_frowning person_with_pouting_face pray rowboat "+"bicyclist mountain_bicyclist walking bath metal point_up basketball_player fist raised_hand v writing_hand"},recent:{icon:"clock3",title:"Recent",emoji:""},smileys_people:{icon:"yum",title:"Smileys & People",emoji:"grinning grimacing grin joy smiley smile sweat_smile laughing innocent wink blush slight_smile "+"upside_down relaxed yum relieved heart_eyes kissing_heart kissing kissing_smiling_eyes "+"kissing_closed_eyes stuck_out_tongue_winking_eye stuck_out_tongue_closed_eyes stuck_out_tongue "+"money_mouth nerd sunglasses hugging smirk no_mouth neutral_face expressionless unamused rolling_eyes "+"thinking flushed disappointed worried angry rage pensive confused slight_frown frowning2 persevere "+"confounded tired_face weary triumph open_mouth scream fearful cold_sweat hushed frowning anguished "+"cry disappointed_relieved sleepy sweat sob dizzy_face astonished zipper_mouth mask thermometer_face "+"head_bandage sleeping zzz poop smiling_imp imp japanese_ogre japanese_goblin skull ghost alien robot "+"smiley_cat smile_cat joy_cat heart_eyes_cat smirk_cat kissing_cat scream_cat crying_cat_face "+"pouting_cat raised_hands clap wave thumbsup thumbsdown punch fist v ok_hand raised_hand open_hands "+"muscle pray point_up point_up_2 point_down point_left point_right middle_finger hand_splayed metal "+"vulcan writing_hand nail_care lips tongue ear nose eye eyes bust_in_silhouette busts_in_silhouette "+"speaking_head baby boy girl man woman person_with_blond_hair older_man older_woman man_with_gua_pi_mao "+"man_with_turban cop construction_worker guardsman spy santa angel princess bride_with_veil walking "+"runner dancer dancers couple two_men_holding_hands two_women_holding_hands bow information_desk_person "+"no_good ok_woman raising_hand person_with_pouting_face person_frowning haircut massage couple_with_heart "+"couple_ww couple_mm couplekiss kiss_ww kiss_mm family family_mwg family_mwgb family_mwbb family_mwgg "+"family_wwb family_wwg family_wwgb family_wwbb family_wwgg family_mmb family_mmg family_mmgb family_mmbb "+"family_mmgg womans_clothes shirt jeans necktie dress bikini kimono lipstick kiss footprints high_heel "+"sandal boot mans_shoe athletic_shoe womans_hat tophat helmet_with_cross mortar_board crown school_satchel "+"pouch purse handbag briefcase eyeglasses dark_sunglasses ring closed_umbrella"},animals_nature:{icon:"hamster",title:"Animals & Nature",emoji:"dog cat mouse hamster rabbit bear panda_face koala tiger lion_face cow pig pig_nose frog "+"octopus monkey_face see_no_evil hear_no_evil speak_no_evil monkey chicken penguin bird baby_chick "+"hatching_chick hatched_chick wolf boar horse unicorn bee bug snail beetle ant spider scorpion crab "+"snake turtle tropical_fish fish blowfish dolphin whale whale2 crocodile leopard tiger2 water_buffalo "+"ox cow2 dromedary_camel camel elephant goat ram sheep racehorse pig2 rat mouse2 rooster turkey dove "+"dog2 poodle cat2 rabbit2 chipmunk feet dragon dragon_face cactus christmas_tree evergreen_tree "+"deciduous_tree palm_tree seedling herb shamrock four_leaf_clover bamboo tanabata_tree leaves "+"fallen_leaf maple_leaf ear_of_rice hibiscus sunflower rose tulip blossom cherry_blossom bouquet "+"mushroom chestnut jack_o_lantern shell spider_web earth_americas earth_africa earth_asia full_moon "+"waning_gibbous_moon last_quarter_moon waning_crescent_moon new_moon waxing_crescent_moon "+"first_quarter_moon waxing_gibbous_moon new_moon_with_face full_moon_with_face first_quarter_moon_with_face "+"last_quarter_moon_with_face sun_with_face crescent_moon star star2 dizzy sparkles comet sunny "+"white_sun_small_cloud partly_sunny white_sun_cloud white_sun_rain_cloud cloud cloud_rain "+"thunder_cloud_rain cloud_lightning zap fire boom snowflake cloud_snow snowman2 snowman wind_blowing_face "+"dash cloud_tornado fog umbrella2 umbrella droplet sweat_drops ocean"},food_drink:{icon:"pizza",title:"Food & Drink",emoji:"green_apple apple pear tangerine lemon banana watermelon grapes strawberry melon cherries peach "+"pineapple tomato eggplant hot_pepper corn sweet_potato honey_pot bread cheese poultry_leg meat_on_bone "+"fried_shrimp egg hamburger fries hotdog pizza spaghetti taco burrito ramen stew fish_cake sushi bento "+"curry rice_ball rice rice_cracker oden dango shaved_ice ice_cream icecream cake birthday custard candy "+"lollipop chocolate_bar popcorn doughnut cookie beer beers wine_glass cocktail tropical_drink champagne "+"sake tea coffee baby_bottle fork_and_knife fork_knife_plate"},activity:{icon:"basketball",title:"Activity",emoji:"soccer basketball football baseball tennis volleyball rugby_football 8ball golf golfer ping_pong "+"badminton hockey field_hockey cricket ski skier snowboarder ice_skate bow_and_arrow fishing_pole_and_fish "+"rowboat swimmer surfer bath basketball_player lifter bicyclist mountain_bicyclist horse_racing levitate "+"trophy running_shirt_with_sash medal military_medal reminder_ribbon rosette ticket tickets performing_arts "+"art circus_tent microphone headphones musical_score musical_keyboard saxophone trumpet guitar violin "+"clapper video_game space_invader dart game_die slot_machine bowling"},travel_places:{icon:"rocket",title:"Travel & Places",emoji:"red_car taxi blue_car bus trolleybus race_car police_car ambulance fire_engine minibus truck "+"articulated_lorry tractor motorcycle bike rotating_light oncoming_police_car oncoming_bus "+"oncoming_automobile oncoming_taxi aerial_tramway mountain_cableway suspension_railway railway_car "+"train monorail bullettrain_side bullettrain_front light_rail mountain_railway steam_locomotive train2 "+"metro tram station helicopter airplane_small airplane airplane_departure airplane_arriving sailboat "+"motorboat speedboat ferry cruise_ship rocket satellite_orbital seat anchor construction fuelpump busstop "+"vertical_traffic_light traffic_light checkered_flag ship ferris_wheel roller_coaster carousel_horse "+"construction_site foggy tokyo_tower factory fountain rice_scene mountain mountain_snow mount_fuji volcano "+"japan camping tent park motorway railway_track sunrise sunrise_over_mountains desert beach island "+"city_sunset city_dusk cityscape night_with_stars bridge_at_night milky_way stars sparkler fireworks "+"rainbow homes european_castle japanese_castle stadium statue_of_liberty house house_with_garden "+"house_abandoned office department_store post_office european_post_office hospital bank hotel "+"convenience_store school love_hotel wedding classical_building church mosque synagogue kaaba shinto_shrine"},objects:{icon:"bulb",title:"Objects",emoji:"watch iphone calling computer keyboard desktop printer mouse_three_button trackball joystick "+"compression minidisc floppy_disk cd dvd vhs camera camera_with_flash video_camera movie_camera projector "+"film_frames telephone_receiver telephone pager fax tv radio microphone2 level_slider control_knobs "+"stopwatch timer alarm_clock clock hourglass_flowing_sand hourglass satellite battery electric_plug bulb "+"flashlight candle wastebasket oil money_with_wings dollar yen euro pound moneybag credit_card gem scales "+"wrench hammer hammer_pick tools pick nut_and_bolt gear chains gun bomb knife dagger crossed_swords shield "+"smoking skull_crossbones coffin urn amphora crystal_ball prayer_beads barber alembic telescope microscope "+"hole pill syringe thermometer label bookmark toilet shower bathtub key key2 couch sleeping_accommodation "+"bed door bellhop frame_photo map beach_umbrella moyai shopping_bags balloon flags ribbon gift confetti_ball "+"tada dolls wind_chime crossed_flags izakaya_lantern envelope envelope_with_arrow incoming_envelope e-mail "+"love_letter postbox mailbox_closed mailbox mailbox_with_mail mailbox_with_no_mail package postal_horn "+"inbox_tray outbox_tray scroll page_with_curl bookmark_tabs bar_chart chart_with_upwards_trend "+"chart_with_downwards_trend page_facing_up date calendar calendar_spiral card_index card_box ballot_box "+"file_cabinet clipboard notepad_spiral file_folder open_file_folder dividers newspaper2 newspaper notebook "+"closed_book green_book blue_book orange_book notebook_with_decorative_cover ledger books book link "+"paperclip paperclips scissors triangular_ruler straight_ruler pushpin round_pushpin triangular_flag_on_post "+"flag_white flag_black closed_lock_with_key lock unlock lock_with_ink_pen pen_ballpoint pen_fountain "+"black_nib pencil pencil2 crayon paintbrush mag mag_right"},symbols:{icon:"heartpulse",title:"Symbols",emoji:"heart yellow_heart green_heart blue_heart purple_heart broken_heart heart_exclamation two_hearts "+"revolving_hearts heartbeat heartpulse sparkling_heart cupid gift_heart heart_decoration peace cross "+"star_and_crescent om_symbol wheel_of_dharma star_of_david six_pointed_star menorah yin_yang orthodox_cross "+"place_of_worship ophiuchus aries taurus gemini cancer leo virgo libra scorpius sagittarius capricorn "+"aquarius pisces id atom u7a7a u5272 radioactive biohazard mobile_phone_off vibration_mode u6709 u7121 "+"u7533 u55b6 u6708 eight_pointed_black_star vs accept white_flower ideograph_advantage secret congratulations "+"u5408 u6e80 u7981 a b ab cl o2 sos no_entry name_badge no_entry_sign x o anger hotsprings no_pedestrians "+"do_not_litter no_bicycles non-potable_water underage no_mobile_phones exclamation grey_exclamation question "+"grey_question bangbang interrobang 100 low_brightness high_brightness trident fleur-de-lis part_alternation_mark "+"warning children_crossing beginner recycle u6307 chart sparkle eight_spoked_asterisk negative_squared_cross_mark "+"white_check_mark diamond_shape_with_a_dot_inside cyclone loop globe_with_meridians m atm sa passport_control "+"customs baggage_claim left_luggage wheelchair no_smoking wc parking potable_water mens womens baby_symbol "+"restroom put_litter_in_its_place cinema signal_strength koko ng ok up cool new free zero one two three four "+"five six seven eight nine ten 1234 arrow_forward pause_button play_pause stop_button record_button track_next "+"track_previous fast_forward rewind twisted_rightwards_arrows repeat repeat_one arrow_backward arrow_up_small "+"arrow_down_small arrow_double_up arrow_double_down arrow_right arrow_left arrow_up arrow_down arrow_upper_right "+"arrow_lower_right arrow_lower_left arrow_upper_left arrow_up_down left_right_arrow arrows_counterclockwise "+"arrow_right_hook leftwards_arrow_with_hook arrow_heading_up arrow_heading_down hash asterisk information_source "+"abc abcd capital_abcd symbols musical_note notes wavy_dash curly_loop heavy_check_mark arrows_clockwise "+"heavy_plus_sign heavy_minus_sign heavy_division_sign heavy_multiplication_x heavy_dollar_sign currency_exchange "+"copyright registered tm end back on top soon ballot_box_with_check radio_button white_circle black_circle "+"red_circle large_blue_circle small_orange_diamond small_blue_diamond large_orange_diamond large_blue_diamond "+"small_red_triangle black_small_square white_small_square black_large_square white_large_square small_red_triangle_down "+"black_medium_square white_medium_square black_medium_small_square white_medium_small_square black_square_button "+"white_square_button speaker sound loud_sound mute mega loudspeaker bell no_bell black_joker mahjong spades "+"clubs hearts diamonds flower_playing_cards thought_balloon anger_right speech_balloon clock1 clock2 clock3 "+"clock4 clock5 clock6 clock7 clock8 clock9 clock10 clock11 clock12 clock130 clock230 clock330 clock430 "+"clock530 clock630 clock730 clock830 clock930 clock1030 clock1130 clock1230 eye_in_speech_bubble"},flags:{icon:"flag_gb",title:"Flags",emoji:"ac af al dz ad ao ai ag ar am aw au at az bs bh bd bb by be bz bj bm bt bo ba bw br bn bg bf bi "+"cv kh cm ca ky cf td flag_cl cn co km cg flag_cd cr hr cu cy cz dk dj dm do ec eg sv gq er ee et fk fo "+"fj fi fr pf ga gm ge de gh gi gr gl gd gu gt gn gw gy ht hn hk hu is in flag_id ir iq ie il it ci jm jp "+"je jo kz ke ki xk kw kg la lv lb ls lr ly li lt lu mo mk mg mw my mv ml mt mh mr mu mx fm md mc mn me "+"ms ma mz mm na nr np nl nc nz ni ne flag_ng nu kp no om pk pw ps pa pg py pe ph pl pt pr qa ro ru rw "+"sh kn lc vc ws sm st flag_sa sn rs sc sl sg sk si sb so za kr es lk sd sr sz se ch sy tw tj tz th tl "+"tg to tt tn tr flag_tm flag_tm ug ua ae gb us vi uy uz vu va ve vn wf eh ye zm zw re ax ta io bq cx "+"cc gg im yt nf pn bl pm gs tk bv hm sj um ic ea cp dg as aq vg ck cw eu gf tf gp mq mp sx ss tc "}}}return t}function C(t){var i=w();if(t&&t["filters"]){var n=i.filters;e.each(t["filters"],(function(t,i){if(!y(i)||e.isEmptyObject(i)){delete n[t];return}e.each(i,(function(e,i){n[t][e]=i}))}));t["filters"]=n}return e.extend({},i,t)}var A,E;if(window.getSelection&&document.createRange){A=function(e){var t=window.getSelection&&window.getSelection();if(t&&t.rangeCount>0){return t.getRangeAt(0)}};E=function(e,t){var i=document.createRange();i.setStart(t.startContainer,t.startOffset);i.setEnd(t.endContainer,t.endOffset);t=window.getSelection();t.removeAllRanges();t.addRange(i)}}else if(document.selection&&document.body.createTextRange){A=function(e){return document.selection.createRange()};E=function(e,t){var i=document.body.createTextRange();i.moveToElementText(e);i.setStart(t.startContanier,t.startOffset);i.setEnd(t.endContainer,t.endOffset);i.select()}}var x;function T(e,t){return e.replace(x,(function(e){var i=r[c===0?"jsecapeMap":"jsEscapeMap"];if(typeof e!=="undefined"&&e in i){return h(t,i[e],r.toShort(e))}return e}))}function S(e,t){e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/`/g,"&#x60;").replace(/(?:\r\n|\r|\n)/g,"\n").replace(/(\n+)/g,"<div>$1</div>").replace(/\n/g,"<br/>").replace(/<br\/><\/div>/g,"</div>");if(t.shortnames){e=r.shortnameToUnicode(e)}return T(e,t.emojiTemplate).replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/  /g,"&nbsp;&nbsp;")}function D(e,t){e=e.replace(/&#10;/g,"\n").replace(/&#09;/g,"\t").replace(/<img[^>]*alt="([^"]+)"[^>]*>/gi,"$1").replace(/\n|\r/g,"").replace(/<br[^>]*>/gi,"\n").replace(/(?:<(?:div|p|ol|ul|li|pre|code|object)[^>]*>)+/gi,"<div>").replace(/(?:<\/(?:div|p|ol|ul|li|pre|code|object)>)+/gi,"</div>").replace(/\n<div><\/div>/gi,"\n").replace(/<div><\/div>\n/gi,"\n").replace(/(?:<div>)+<\/div>/gi,"\n").replace(/([^\n])<\/div><div>/gi,"$1\n").replace(/(?:<\/div>)+/gi,"</div>").replace(/([^\n])<\/div>([^\n])/gi,"$1\n$2").replace(/<\/div>/gi,"").replace(/([^\n])<div>/gi,"$1\n").replace(/\n<div>/gi,"\n").replace(/<div>\n/gi,"\n\n").replace(/<(?:[^>]+)?>/g,"").replace(new RegExp(d,"g"),"").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x60;/g,"`").replace(/&#60;/g,"<").replace(/&#62;/g,">").replace(/&amp;/g,"&");switch(t.saveEmojisAs){case"image":e=T(e,t.emojiTemplate);break;case"shortname":e=r.toShort(e)}return e}function k(){var e=this,t=e.editor[0].offsetWidth-e.editor[0].clientWidth,i=parseInt(e.button.css("marginRight"));if(i!==t){e.button.css({marginRight:t});if(e.floatingPicker){e.picker.css({right:parseInt(e.picker.css("right"))-i+t})}}}function O(){var t=this;if(!t.sprite&&t.lasyEmoji[0]&&t.lasyEmoji.eq(0).is(".lazy-emoji")){var i=t.picker.offset().top,n=i+t.picker.height()+20;t.lasyEmoji.each((function(){var t=e(this),r=t.offset().top;if(r>i&&r<n){t.attr("src",t.data("src")).removeClass("lazy-emoji")}if(r>n){return false}}));t.lasyEmoji=t.lasyEmoji.filter(".lazy-emoji")}}function R(e,t){return(t?"":".")+u+(e?"-"+e:"")}function N(t){var i=e("<div/>",y(t)?t:{class:R(t,true)});e.each(l.call(arguments).slice(1),(function(t,n){if(e.isFunction(n)){n=n.call(i)}if(n){e(n).appendTo(i)}}));return i}function P(){return localStorage.getItem("recent_emojis")||""}function I(t,i){var n=P();if(!t.recent||t.recent!==n||i){if(n.length){var r=t.scrollArea.is(".skinnable"),o,a;if(!r){o=t.scrollArea.scrollTop();if(i){t.recentCategory.show()}a=t.recentCategory.is(":visible")?t.recentCategory.height():0}var s=g(n,t.emojiBtnTemplate,true).split("|").join("");t.recentCategory.children(".emojibtn").remove();e(s).insertAfter(t.recentCategory.children(".emojionearea-category-title"));t.recentCategory.children(".emojibtn").on("click",(function(){t.trigger("emojibtn.click",e(this))}));t.recentFilter.show();if(!r){t.recentCategory.show();var l=t.recentCategory.height();if(a!==l){t.scrollArea.scrollTop(o+l-a)}}}else{if(t.recentFilter.hasClass("active")){t.recentFilter.removeClass("active").next().addClass("active")}t.recentCategory.hide();t.recentFilter.hide()}t.recent=n}}function M(e,t){var i=P();var n=i.split("|");var r=n.indexOf(t);if(r!==-1){n.splice(r,1)}n.unshift(t);if(n.length>9){n.pop()}localStorage.setItem("recent_emojis",n.join("|"));I(e)}function L(){var e="test";try{localStorage.setItem(e,e);localStorage.removeItem(e);return true}catch(e){return false}}function F(t,i,n){t.options=n=C(n);t.sprite=n.sprite&&c<3;t.inline=n.inline===null?i.is("INPUT"):n.inline;t.shortnames=n.shortnames;t.saveEmojisAs=n.saveEmojisAs;t.standalone=n.standalone;t.emojiTemplate='<img alt="{alt}" class="emojione'+(t.sprite?'-{uni}" src="'+s+'"/>':'emoji" src="{img}"/>');t.emojiTemplateAlt=t.sprite?'<i class="emojione-{uni}"/>':'<img class="emojioneemoji" src="{img}"/>';t.emojiBtnTemplate='<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}">'+t.emojiTemplateAlt+"</i>";t.recentEmojis=n.recentEmojis&&L();var o=n.pickerPosition;t.floatingPicker=o==="top"||o==="bottom";t.source=i;if(i.is(":disabled")||i.is(".disabled")){t.disable()}var a=i.is("TEXTAREA")||i.is("INPUT")?"val":"text",l,h,v,b,_,w,x,T,F,G,$=N("tones",n.tones?function(){this.addClass(R("tones-"+n.tonesStyle,true));for(var t=0;t<=5;t++){this.append(e("<i/>",{class:"btn-tone btn-tone-"+t+(!t?" active":""),"data-skin":t,role:"button"}))}}:null),W=N({class:u+(t.standalone?" "+u+"-standalone ":" ")+(i.attr("class")||""),role:"application"},l=t.editor=N("editor").attr({contenteditable:t.standalone?false:true,placeholder:n.placeholder||i.data("placeholder")||i.attr("placeholder")||"",tabindex:0}),h=t.button=N("button",N("button-open"),N("button-close")).attr("title",n.buttonTitle),v=t.picker=N("picker",N("wrapper",b=N("filters"),n.search?w=N("search-panel",N("search",n.search?function(){t.search=e("<input/>",{placeholder:n.searchPlaceholder||"",type:"text",class:"search"});this.append(t.search)}:null),$):null,G=N("scroll-area",n.tones&&!n.search?N("tones-panel",$):null,x=N("emojis-list")))).addClass(R("picker-position-"+n.pickerPosition,true)).addClass(R("filters-position-"+n.filtersPosition,true)).addClass(R("search-position-"+n.searchPosition,true)).addClass("hidden"));if(n.search){w.addClass(R("with-search",true))}t.searchSel=null;l.data(i.data());e.each(n.attributes,(function(e,t){l.attr(e,t)}));var H=N("category-block").attr({"data-tone":0}).prependTo(x);e.each(n.filters,(function(i,r){var o=0;if(i==="recent"&&!t.recentEmojis){return}if(i!=="tones"){e("<i/>",{class:R("filter",true)+" "+R("filter-"+i,true),"data-filter":i,title:r.title}).wrapInner(g(r.icon,t.emojiTemplateAlt)).appendTo(b)}else if(n.tones){o=5}else{return}do{var a,s=r.emoji.replace(/[\s,;]+/g,"|");if(o===0){a=N("category").attr({name:i,"data-tone":o}).appendTo(H)}else{a=N("category-block").attr({name:i,"data-tone":o}).appendTo(x)}if(o>0){a.hide();s=s.split("|").join("_tone"+o+"|")+"_tone"+o}if(i==="recent"){s=P()}s=g(s,t.sprite?'<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}"><i class="emojione-{uni}"></i></i>':'<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}"><img class="emojioneemoji lazy-emoji" data-src="{img}"/></i>',true).split("|").join("");a.html(s);e('<div class="emojionearea-category-title"/>').text(r.title).prependTo(a)}while(--o>0)}));n.filters=null;if(!t.sprite){t.lasyEmoji=x.find(".lazy-emoji")}_=b.find(R("filter"));_.eq(0).addClass("active");F=x.find(R("category-block"));T=x.find(R("category"));t.recentFilter=_.filter('[data-filter="recent"]');t.recentCategory=T.filter("[name=recent]");t.scrollArea=G;if(n.container){e(n.container).wrapInner(W)}else{W.insertAfter(i)}if(n.hideSource){i.hide()}t.setText(i[a]());i[a](t.getText());k.apply(t);if(t.standalone&&!t.getText().length){var j=e(i).data("emoji-placeholder")||n.emojiPlaceholder;t.setText(j);l.addClass("has-placeholder")}p(t,x.find(".emojibtn"),{click:"emojibtn.click"});p(t,window,{resize:"!resize"});p(t,$.children(),{click:"tone.click"});p(t,[v,h],{mousedown:"!mousedown"},l);p(t,h,{click:"button.click"});p(t,l,{paste:"!paste"},l);p(t,l,["focus","blur"],(function(){return t.stayFocused?false:l}));p(t,v,{mousedown:"picker.mousedown",mouseup:"picker.mouseup",click:"picker.click",keyup:"picker.keyup",keydown:"picker.keydown",keypress:"picker.keypress"});p(t,l,["mousedown","mouseup","click","keyup","keydown","keypress"]);p(t,v.find(".emojionearea-filter"),{click:"filter.click"});p(t,i,{change:"source.change"});if(n.search){p(t,t.search,{keyup:"search.keypress",focus:"search.focus",blur:"search.blur"})}var B=false;G.on("scroll",(function(){if(!B){O.call(t);if(G.is(":not(.skinnable)")){var i=T.eq(0),n=G.offset().top;T.each((function(t,r){if(e(r).offset().top-n>=10){return false}i=e(r)}));var r=_.filter('[data-filter="'+i.attr("name")+'"]');if(r[0]&&!r.is(".active")){_.removeClass("active");r.addClass("active")}}}}));t.on("@filter.click",(function(e){var i=e.is(".active");if(G.is(".skinnable")){if(i)return;$.children().eq(0).click()}B=true;if(!i){_.filter(".active").removeClass("active");e.addClass("active")}var n=T.filter('[name="'+e.data("filter")+'"]').offset().top,r=G.scrollTop(),o=G.offset().top;G.stop().animate({scrollTop:n+r-o-2},200,"swing",(function(){O.call(t);B=false}))})).on("@picker.show",(function(){if(t.recentEmojis){I(t)}O.call(t)})).on("@tone.click",(function(e){$.children().removeClass("active");var i=e.addClass("active").data("skin");if(i){G.addClass("skinnable");F.hide().filter("[data-tone="+i+"]").show();_.removeClass("active")}else{G.removeClass("skinnable");F.hide().filter("[data-tone=0]").show();_.eq(0).click()}O.call(t);if(n.search){t.trigger("search.keypress")}})).on("@button.click",(function(e){if(e.is(".active")){t.hidePicker()}else{t.showPicker();t.searchSel=null}})).on("@!paste",(function(i,n){var r=function(n){var r="caret-"+(new Date).getTime();var o=S(n,t);m(o);m('<i id="'+r+'"></i>');i.scrollTop(s);var a=e("#"+r),l=a.offset().top-i.offset().top,u=i.height();if(s+l>=u||s>l){i.scrollTop(s+l-2*u/3)}a.remove();t.stayFocused=false;k.apply(t);f(t,"paste",[i,n,o])};if(n.originalEvent.clipboardData){var o=n.originalEvent.clipboardData.getData("text/plain");r(o);if(n.preventDefault){n.preventDefault()}else{n.stop()}n.returnValue=false;n.stopPropagation();return false}t.stayFocused=true;m("<span>"+d+"</span>");var a=A(i[0]),s=i.scrollTop(),l=e("<div/>",{contenteditable:true}).css({position:"fixed",left:"-999px",width:"1px",height:"1px",top:"20px",overflow:"hidden"}).appendTo(e("BODY")).focus();window.setTimeout((function(){i.focus();E(i[0],a);var e=D(l.html().replace(/\r\n|\n|\r/g,"<br>"),t);l.remove();r(e)}),200)})).on("@emojibtn.click",(function(e){l.removeClass("has-placeholder");if(t.searchSel!==null){l.focus();E(l[0],t.searchSel);t.searchSel=null}if(t.standalone){l.html(g(e.data("name"),t.emojiTemplate));t.trigger("blur")}else{A(l[0]);m(g(e.data("name"),t.emojiTemplate))}if(t.recentEmojis){M(t,e.data("name"))}t.trigger("search.keypress")})).on("@!resize @keyup @emojibtn.click",k).on("@!mousedown",(function(i,n){if(e(n.target).hasClass("search")){t.stayFocused=true;if(t.searchSel===null){t.searchSel=A(i[0])}}else{if(!W.is(".focused")){i.trigger("focus")}n.preventDefault()}return false})).on("@change",(function(){var e=t.editor.html().replace(/<\/?(?:div|span|p)[^>]*>/gi,"");if(!e.length||/^<br[^>]*>$/i.test(e)){t.editor.html(t.content="")}i[a](t.getText())})).on("@source.change",(function(){t.setText(i[a]());f("change")})).on("@focus",(function(){W.addClass("focused")})).on("@blur",(function(){W.removeClass("focused");if(n.hidePickerOnBlur){t.hidePicker()}var e=t.editor.html();if(t.content!==e){t.content=e;f(t,"change",[t.editor]);i.trigger("blur").trigger("change")}else{i.trigger("blur")}if(n.search){t.search.val("");t.trigger("search.keypress",true)}}));if(n.search){t.on("@search.focus",(function(){t.stayFocused=true;t.search.addClass("focused")})).on("@search.keypress",(function(i){var r=v.find(".emojionearea-filter");var o=n.tones?$.find("i.active").data("skin"):0;var a=t.search.val().replace(/ /g,"_").replace(/"/g,'\\"');if(a&&a.length){if(t.recentFilter.hasClass("active")){t.recentFilter.removeClass("active").next().addClass("active")}t.recentCategory.hide();t.recentFilter.hide();F.each((function(){var t=function(e,t){var i=e.find('.emojibtn[data-name*="'+a+'"]');if(i.length===0){if(e.data("tone")===t){e.hide()}r.filter('[data-filter="'+e.attr("name")+'"]').hide()}else{var n=e.find('.emojibtn:not([data-name*="'+a+'"])');n.hide();i.show();if(e.data("tone")===t){e.show()}r.filter('[data-filter="'+e.attr("name")+'"]').show()}};var i=e(this);if(i.data("tone")===0){T.filter(':not([name="recent"])').each((function(){t(e(this),0)}))}else{t(i,o)}}));if(!B){G.trigger("scroll")}else{O.call(t)}}else{I(t,true);F.filter('[data-tone="'+$.find("i.active").data("skin")+'"]:not([name="recent"])').show();e(".emojibtn",F).show();r.show();O.call(t)}})).on("@search.blur",(function(){t.stayFocused=false;t.search.removeClass("focused");t.trigger("blur")}))}if(n.shortcuts){t.on("@keydown",(function(e,i){if(!i.ctrlKey){if(i.which==9){i.preventDefault();h.click()}else if(i.which==27){i.preventDefault();if(h.is(".active")){t.hidePicker()}}}}))}if(y(n.events)&&!e.isEmptyObject(n.events)){e.each(n.events,(function(e,i){t.on(e.replace(/_/g,"."),i)}))}if(n.autocomplete){var V=function(){var i={maxCount:n.textcomplete.maxCount,placement:n.textcomplete.placement};if(n.shortcuts){i.onKeydown=function(e,t){if(!e.ctrlKey&&e.which==13){return t.KEY_ENTER}}}var o=e.map(r.emojioneList,(function(e,t){return!n.autocompleteTones?/_tone[12345]/.test(t)?null:t:t}));o.sort();l.textcomplete([{id:u,match:/\B(:[\-+\w]*)$/,search:function(t,i){i(e.map(o,(function(e){return e.indexOf(t)===0?e:null})))},template:function(e){return g(e,t.emojiTemplate)+" "+e.replace(/:/g,"")},replace:function(e){return g(e,t.emojiTemplate)},cache:true,index:1}],i);if(n.textcomplete.placement){if(e(l.data("textComplete").option.appendTo).css("position")=="static"){e(l.data("textComplete").option.appendTo).css("position","relative")}}};var z=function(){if(t.disabled){var e=function(){t.off("enabled",e);V()};t.on("enabled",e)}else{V()}};if(e.fn.textcomplete){z()}else{e.ajax({url:"https://cdn.rawgit.com/yuku-t/jquery-textcomplete/v1.3.4/dist/jquery.textcomplete.js",dataType:"script",cache:true,success:z})}}if(t.inline){W.addClass(R("inline",true));t.on("@keydown",(function(e,t){if(t.which==13){t.preventDefault()}}))}if(/firefox/i.test(navigator.userAgent)){document.execCommand("enableObjectResizing",false,false)}t.isReady=true;t.trigger("onLoad",l);t.trigger("ready",l)}var G={defaultBase:"https://cdnjs.cloudflare.com/ajax/libs/emojione/",defaultBase3:"https://cdn.jsdelivr.net/",base:null,isLoading:false};function $(t){var i=v();t=C(t);if(!G.isLoading){if(!r||_(b(r))<2){G.isLoading=true;var n;if(_(i)>5){n=G.defaultBase3+"npm/emojione@"+i}else if(_(i)>4){n=G.defaultBase3+"emojione/"+i}else{n=G.defaultBase+"/"+i}e.ajax({url:n+"/lib/js/emojione.min.js",dataType:"script",cache:true,success:function(){r=window.emojione;i=b(r);c=_(i);var n;if(c>4){G.base=G.defaultBase3+"emojione/assets/"+i;n=G.base+"/sprites/emojione-sprite-"+r.emojiSize+".css"}else{G.base=G.defaultBase+i+"/assets";n=G.base+"/sprites/emojione.sprites.css"}if(t.sprite){if(document.createStyleSheet){document.createStyleSheet(n)}else{e("<link/>",{rel:"stylesheet",href:n}).appendTo("head")}}while(o.length){o.shift().call()}G.isLoading=false}})}else{i=b(r);c=_(i);if(c>4){G.base=G.defaultBase3+"emojione/assets/"+i}else{G.base=G.defaultBase+i+"/assets"}}}a((function(){var e="";if(t.useInternalCDN){if(c>4)e=r.emojiSize+"/";r.imagePathPNG=G.base+"/png/"+e;r.imagePathSVG=G.base+"/svg/"+e;r.imagePathSVGSprites=G.base+"/sprites/emojione.sprites.svg";r.imageType=t.imageType}if(_(i)>4){x=r.regUnicode;r.imageType=t.imageType||"png"}else{x=new RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|("+r.unicodeRegexp+")","gi")}}))}var W=function(e,r){var o=this;$(r);i[o.id=++t]={};n[o.id]={};a((function(){F(o,e,r)}))};function H(t,i){i=i.replace(/^@/,"");var r=t.id;if(n[r][i]){e.each(n[r][i],(function(n,r){e.each(e.isArray(r[0])?r[0]:[r[0]],(function(n,o){e(o).on(r[1],(function(){var n=l.call(arguments),o=e.isFunction(r[2])?r[2].apply(t,[i].concat(n)):r[2];if(o){f(t,i,[o].concat(n))}}))}))}));n[r][i]=null}}W.prototype.on=function(t,n){if(t&&e.isFunction(n)){var r=this;e.each(t.toLowerCase().split(" "),(function(e,t){H(r,t);(i[r.id][t]||(i[r.id][t]=[])).push(n)}))}return this};W.prototype.off=function(t,n){if(t){var r=this.id;e.each(t.toLowerCase().replace(/_/g,".").split(" "),(function(t,o){if(i[r][o]&&!/^@/.test(o)){if(n){e.each(i[r][o],(function(e,t){if(t===n){i[r][o].splice(e,1)}}))}else{i[r][o]=[]}}}))}return this};W.prototype.trigger=function(){var e=l.call(arguments),t=[this].concat(e.slice(0,1));t.push(e.slice(1));return f.apply(this,t)};W.prototype.setFocus=function(){var e=this;a((function(){e.editor.focus()}));return e};W.prototype.setText=function(e){var t=this;a((function(){t.editor.html(S(e,t));t.content=t.editor.html();f(t,"change",[t.editor]);k.apply(t)}));return t};W.prototype.getText=function(){return D(this.editor.html(),this)};W.prototype.showPicker=function(){var e=this;if(e._sh_timer){window.clearTimeout(e._sh_timer)}e.picker.removeClass("hidden");e._sh_timer=window.setTimeout((function(){e.button.addClass("active")}),50);f(e,"picker.show",[e.picker]);return e};W.prototype.hidePicker=function(){var e=this;if(e._sh_timer){window.clearTimeout(e._sh_timer)}e.button.removeClass("active");e._sh_timer=window.setTimeout((function(){e.picker.addClass("hidden")}),500);f(e,"picker.hide",[e.picker]);return e};W.prototype.enable=function(){var e=this;var t=function(){e.disabled=false;e.editor.prop("contenteditable",true);e.button.show();var t=e[e.standalone?"button":"editor"];t.parent().removeClass("emojionearea-disable");f(e,"enabled",[t])};e.isReady?t():e.on("ready",t);return e};W.prototype.disable=function(){var e=this;e.disabled=true;var t=function(){e.editor.prop("contenteditable",false);e.hidePicker();e.button.hide();var t=e[e.standalone?"button":"editor"];t.parent().addClass("emojionearea-disable");f(e,"disabled",[t])};e.isReady?t():e.on("ready",t);return e};e.fn.emojioneArea=function(t){return this.each((function(){if(!!this.emojioneArea)return this.emojioneArea;e.data(this,"emojioneArea",this.emojioneArea=new W(e(this),t));return this.emojioneArea}))};e.fn.emojioneArea.defaults=w();e.fn.emojioneAreaText=function(t){t=C(t);var i=this,n={shortnames:t&&typeof t.shortnames!=="undefined"?t.shortnames:true,emojiTemplate:'<img alt="{alt}" class="emojione'+(t&&t.sprite&&c<3?'-{uni}" src="'+s:'emoji" src="{img}')+'"/>'};$(t);a((function(){i.each((function(){var t=e(this);if(!t.hasClass("emojionearea-text")){t.addClass("emojionearea-text").html(S(t.is("TEXTAREA")||t.is("INPUT")?t.val():t.text(),n))}return t}))}));return this}}),window);(function(e,t){var i="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color outlineColor".split(" "),n=/^([\-+])=\s*(\d+\.?\d*)/,r=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],o=e.Color=function(t,i,n,r){return new e.Color.fn.parse(t,i,n,r)},a={rgba:{cache:"_rgba",props:{red:{idx:0,type:"byte",empty:true},green:{idx:1,type:"byte",empty:true},blue:{idx:2,type:"byte",empty:true},alpha:{idx:3,type:"percent",def:1}}},hsla:{cache:"_hsla",props:{hue:{idx:0,type:"degrees",empty:true},saturation:{idx:1,type:"percent",empty:true},lightness:{idx:2,type:"percent",empty:true}}}},s={byte:{floor:true,min:0,max:255},percent:{min:0,max:1},degrees:{mod:360,floor:true}},l=a.rgba.props,u=o.support={},c,d=e.each;a.hsla.props.alpha=l.alpha;function f(e,t,i){var n=s[t.type]||{},r=t.empty||i;if(r&&e==null){return null}if(t.def&&e==null){return t.def}if(n.floor){e=~~e}else{e=parseFloat(e)}if(e==null||isNaN(e)){return t.def}if(n.mod){e=e%n.mod;return e<0?n.mod+e:e}return n.min>e?n.min:n.max<e?n.max:e}function p(t){var i=o(),n=i._rgba=[];t=t.toLowerCase();d(r,(function(e,r){var o=r.re.exec(t),s=o&&r.parse(o),l,u=r.space||"rgba",c=a[u].cache;if(s){l=i[u](s);i[c]=l[c];n=i._rgba=l._rgba;return false}}));if(n.length!==0){if(Math.max.apply(Math,n)===0){e.extend(n,c.transparent)}return i}if(t=c[t]){return t}}o.fn=o.prototype={constructor:o,parse:function(i,n,r,s){if(i===t){this._rgba=[null,null,null,null];return this}if(i instanceof e||i.nodeType){i=i instanceof e?i.css(n):e(i).css(n);n=t}var u=this,h=e.type(i),g=this._rgba=[],m;if(n!==t){i=[i,n,r,s];h="array"}if(h==="string"){return this.parse(p(i)||c._default)}if(h==="array"){d(l,(function(e,t){g[t.idx]=f(i[t.idx],t)}));return this}if(h==="object"){if(i instanceof o){d(a,(function(e,t){if(i[t.cache]){u[t.cache]=i[t.cache].slice()}}))}else{d(a,(function(e,t){d(t.props,(function(e,n){var r=t.cache;if(!u[r]&&t.to){if(i[e]==null||e==="alpha"){return}u[r]=t.to(u._rgba)}u[r][n.idx]=f(i[e],n,true)}))}))}return this}},is:function(e){var t=o(e),i=true,n=this;d(a,(function(e,r){var o=t[r.cache],a;if(o){a=n[r.cache]||r.to&&r.to(n._rgba)||[];d(r.props,(function(e,t){if(o[t.idx]!=null){i=o[t.idx]===a[t.idx];return i}}))}return i}));return i},_space:function(){var e=[],t=this;d(a,(function(i,n){if(t[n.cache]){e.push(i)}}));return e.pop()},transition:function(e,t){var i=o(e),n=i._space(),r=a[n],l=this[r.cache]||r.to(this._rgba),u=l.slice();i=i[r.cache];d(r.props,(function(e,n){var r=n.idx,o=l[r],a=i[r],c=s[n.type]||{};if(a===null){return}if(o===null){u[r]=a}else{if(c.mod){if(a-o>c.mod/2){o+=c.mod}else if(o-a>c.mod/2){o-=c.mod}}u[n.idx]=f((a-o)*t+o,n)}}));return this[n](u)},blend:function(t){if(this._rgba[3]===1){return this}var i=this._rgba.slice(),n=i.pop(),r=o(t)._rgba;return o(e.map(i,(function(e,t){return(1-n)*r[t]+n*e})))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,(function(e,t){return e==null?t>2?1:0:e}));if(i[3]===1){i.pop();t="rgb("}return t+i.join(",")+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),(function(e,t){if(e==null){e=t>2?1:0}if(t&&t<3){e=Math.round(e*100)+"%"}return e}));if(i[3]===1){i.pop();t="hsl("}return t+i.join(",")+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();if(t){i.push(~~(n*255))}return"#"+e.map(i,(function(e,t){e=(e||0).toString(16);return e.length===1?"0"+e:e})).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}};o.fn.parse.prototype=o.fn;function h(e,t,i){i=(i+1)%1;if(i*6<1){return e+(t-e)*6*i}if(i*2<1){return t}if(i*3<2){return e+(t-e)*(2/3-i)*6}return e}a.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null){return[null,null,null,e[3]]}var t=e[0]/255,i=e[1]/255,n=e[2]/255,r=e[3],o=Math.max(t,i,n),a=Math.min(t,i,n),s=o-a,l=o+a,u=l*.5,c,d;if(a===o){c=0}else if(t===o){c=60*(i-n)/s+360}else if(i===o){c=60*(n-t)/s+120}else{c=60*(t-i)/s+240}if(u===0||u===1){d=u}else if(u<=.5){d=s/l}else{d=s/(2-l)}return[Math.round(c)%360,d,u,r==null?1:r]};a.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null){return[null,null,null,e[3]]}var t=e[0]/360,i=e[1],n=e[2],r=e[3],o=n<=.5?n*(1+i):n+i-n*i,a=2*n-o,s,l,u;return[Math.round(h(a,o,t+1/3)*255),Math.round(h(a,o,t)*255),Math.round(h(a,o,t-1/3)*255),r]};d(a,(function(i,r){var a=r.props,s=r.cache,l=r.to,u=r.from;o.fn[i]=function(i){if(l&&!this[s]){this[s]=l(this._rgba)}if(i===t){return this[s].slice()}var n=e.type(i),r=n==="array"||n==="object"?i:arguments,c=this[s].slice(),p;d(a,(function(e,t){var i=r[n==="object"?e:t.idx];if(i==null){i=c[t.idx]}c[t.idx]=f(i,t)}));if(u){p=o(u(c));p[s]=c;return p}else{return o(c)}};d(a,(function(t,r){if(o.fn[t]){return}o.fn[t]=function(o){var a=e.type(o),s=t==="alpha"?this._hsla?"hsla":"rgba":i,l=this[s](),u=l[r.idx],c;if(a==="undefined"){return u}if(a==="function"){o=o.call(this,u);a=e.type(o)}if(o==null&&r.empty){return this}if(a==="string"){c=n.exec(o);if(c){o=u+parseFloat(c[2])*(c[1]==="+"?1:-1)}}l[r.idx]=o;return this[s](l)}}))}));d(i,(function(t,i){e.cssHooks[i]={set:function(t,n){var r,a,s;if(e.type(n)!=="string"||(r=p(n))){n=o(r||n);if(!u.rgba&&n._rgba[3]!==1){s=i==="backgroundColor"?t.parentNode:t;do{a=e.curCSS(s,"backgroundColor")}while((a===""||a==="transparent")&&(s=s.parentNode)&&s.style);n=n.blend(a&&a!=="transparent"?a:"_default")}n=n.toRgbaString()}t.style[i]=n}};e.fx.step[i]=function(t){if(!t.colorInit){t.start=o(t.elem,i);t.end=o(t.end);t.colorInit=true}e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}}));e((function(){var e=document.createElement("div"),t=e.style;t.cssText="background-color:rgba(1,1,1,.5)";u.rgba=t.backgroundColor.indexOf("rgba")>-1}));c=e.Color.names={aqua:"#00ffff",azure:"#f0ffff",beige:"#f5f5dc",black:"#000000",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",violet:"#800080",red:"#ff0000",silver:"#c0c0c0",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);(function(e){e.Jcrop=function(t,i){var n=e.extend({},e.Jcrop.defaults),r,o=navigator.userAgent.toLowerCase(),a=/msie/.test(o),s=/msie [1-6]\./.test(o);function l(e){return Math.round(e)+"px"}function u(e){return n.baseClass+"-"+e}function c(){return e.fx.step.hasOwnProperty("backgroundColor")}function d(t){var i=e(t).offset();return[i.left,i.top]}function f(e){return[e.pageX-r[0],e.pageY-r[1]]}function p(t){if(typeof t!=="object")t={};n=e.extend(n,t);e.each(["onChange","onSelect","onRelease","onDblClick"],(function(e,t){if(typeof n[t]!=="function")n[t]=function(){}}))}function h(e,t,i){r=d(k);te.setCursor(e==="move"?e:e+"-resize");if(e==="move"){return te.activateHandlers(m(t),w,i)}var n=Z.getFixed();var o=v(e);var a=Z.getCorner(v(o));Z.setPressed(Z.getCorner(o));Z.setCurrent(a);te.activateHandlers(g(e,n),w,i)}function g(e,t){return function(i){if(!n.aspectRatio){switch(e){case"e":i[1]=t.y2;break;case"w":i[1]=t.y2;break;case"n":i[0]=t.x2;break;case"s":i[0]=t.x2;break}}else{switch(e){case"e":i[1]=t.y+1;break;case"w":i[1]=t.y+1;break;case"n":i[0]=t.x+1;break;case"s":i[0]=t.x+1;break}}Z.setCurrent(i);ee.update()}}function m(e){var t=e;ie.watchKeys();return function(e){Z.moveOffset([e[0]-t[0],e[1]-t[1]]);t=e;ee.update()}}function v(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function y(e){return function(t){if(n.disabled){return false}if(e==="move"&&!n.allowMove){return false}r=d(k);q=true;h(e,f(t));t.stopPropagation();t.preventDefault();return false}}function b(e,t,i){var n=e.width(),r=e.height();if(n>t&&t>0){n=t;r=t/e.width()*e.height()}if(r>i&&i>0){r=i;n=i/e.height()*e.width()}z=e.width()/n;U=e.height()/r;e.width(n).height(r)}function _(e){return{x:e.x*z,y:e.y*U,x2:e.x2*z,y2:e.y2*U,w:e.w*z,h:e.h*U}}function w(e){var t=Z.getFixed();if(t.w>n.minSelect[0]&&t.h>n.minSelect[1]){ee.enableHandles();ee.done()}else{ee.release()}te.setCursor(n.allowSelect?"crosshair":"default")}function C(e){if(n.disabled){return false}if(!n.allowSelect){return false}q=true;r=d(k);ee.disableHandles();te.setCursor("crosshair");var t=f(e);Z.setPressed(t);ee.update();te.activateHandlers(A,w,e.type.substring(0,5)==="touch");ie.watchKeys();e.stopPropagation();e.preventDefault();return false}function A(e){Z.setCurrent(e);ee.update()}function E(){var t=e("<div></div>").addClass(u("tracker"));if(a){t.css({opacity:0,backgroundColor:"white"})}return t}if(typeof t!=="object"){t=e(t)[0]}if(typeof i!=="object"){i={}}p(i);var x={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0};var T=e(t),S=true;if(t.tagName=="IMG"){if(T[0].width!=0&&T[0].height!=0){T.width(T[0].width);T.height(T[0].height)}else{var D=new Image;D.src=T[0].src;T.width(D.width);T.height(D.height)}var k=T.clone().removeAttr("id").css(x).show();k.width(T.width());k.height(T.height());T.after(k).hide()}else{k=T.css(x).show();S=false;if(n.shade===null){n.shade=true}}b(k,n.boxWidth,n.boxHeight);var O=k.width(),R=k.height(),N=e("<div />").width(O).height(R).addClass(u("holder")).css({position:"relative",backgroundColor:n.bgColor}).insertAfter(T).append(k);if(n.addClass){N.addClass(n.addClass)}var P=e("<div />"),I=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),M=e("<div />").width("100%").height("100%").css("zIndex",320),L=e("<div />").css({position:"absolute",zIndex:600}).dblclick((function(){var e=Z.getFixed();n.onDblClick.call(ve,e)})).insertBefore(k).append(I,M);if(S){P=e("<img />").attr("src",k.attr("src")).css(x).width(O).height(R),I.append(P)}if(s){L.css({overflowY:"hidden"})}var F=n.boundary;var G=E().width(O+F*2).height(R+F*2).css({position:"absolute",top:l(-F),left:l(-F),zIndex:290}).mousedown(C);var $=n.bgColor,W=n.bgOpacity,H,j,B,V,z,U,Y=true,q,X,K;r=d(k);var Q=function(){function e(){var e={},t=["touchstart","touchmove","touchend"],i=document.createElement("div"),n;try{for(n=0;n<t.length;n++){var r=t[n];r="on"+r;var o=r in i;if(!o){i.setAttribute(r,"return;");o=typeof i[r]=="function"}e[t[n]]=o}return e.touchstart&&e.touchend&&e.touchmove}catch(e){return false}}function t(){if(n.touchSupport===true||n.touchSupport===false)return n.touchSupport;else return e()}return{createDragger:function(e){return function(t){if(n.disabled){return false}if(e==="move"&&!n.allowMove){return false}r=d(k);q=true;h(e,f(Q.cfilter(t)),true);t.stopPropagation();t.preventDefault();return false}},newSelection:function(e){return C(Q.cfilter(e))},cfilter:function(e){e.pageX=e.originalEvent.changedTouches[0].pageX;e.pageY=e.originalEvent.changedTouches[0].pageY;return e},isSupported:e,support:t()}}();var Z=function(){var e=0,t=0,i=0,r=0,o,a;function s(n){n=p(n);i=e=n[0];r=t=n[1]}function l(e){e=p(e);o=e[0]-i;a=e[1]-r;i=e[0];r=e[1]}function u(){return[o,a]}function c(n){var o=n[0],a=n[1];if(0>e+o){o-=o+e}if(0>t+a){a-=a+t}if(R<r+a){a+=R-(r+a)}if(O<i+o){o+=O-(i+o)}e+=o;i+=o;t+=a;r+=a}function d(e){var t=f();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function f(){if(!n.aspectRatio){return g()}var o=n.aspectRatio,a=n.minSize[0]/z,s=n.maxSize[0]/z,l=n.maxSize[1]/U,u=i-e,c=r-t,d=Math.abs(u),f=Math.abs(c),p=d/f,v,y,b,_;if(s===0){s=O*10}if(l===0){l=R*10}if(p<o){y=r;b=f*o;v=u<0?e-b:b+e;if(v<0){v=0;_=Math.abs((v-e)/o);y=c<0?t-_:_+t}else if(v>O){v=O;_=Math.abs((v-e)/o);y=c<0?t-_:_+t}}else{v=i;_=d/o;y=c<0?t-_:t+_;if(y<0){y=0;b=Math.abs((y-t)*o);v=u<0?e-b:b+e}else if(y>R){y=R;b=Math.abs(y-t)*o;v=u<0?e-b:b+e}}if(v>e){if(v-e<a){v=e+a}else if(v-e>s){v=e+s}if(y>t){y=t+(v-e)/o}else{y=t-(v-e)/o}}else if(v<e){if(e-v<a){v=e-a}else if(e-v>s){v=e-s}if(y>t){y=t+(e-v)/o}else{y=t-(e-v)/o}}if(v<0){e-=v;v=0}else if(v>O){e-=v-O;v=O}if(y<0){t-=y;y=0}else if(y>R){t-=y-R;y=R}return m(h(e,t,v,y))}function p(e){if(e[0]<0)e[0]=0;if(e[1]<0)e[1]=0;if(e[0]>O)e[0]=O;if(e[1]>R)e[1]=R;return[Math.round(e[0]),Math.round(e[1])]}function h(e,t,i,n){var r=e,o=i,a=t,s=n;if(i<e){r=i;o=e}if(n<t){a=n;s=t}return[r,a,o,s]}function g(){var n=i-e,o=r-t,a;if(H&&Math.abs(n)>H){i=n>0?e+H:e-H}if(j&&Math.abs(o)>j){r=o>0?t+j:t-j}if(V/U&&Math.abs(o)<V/U){r=o>0?t+V/U:t-V/U}if(B/z&&Math.abs(n)<B/z){i=n>0?e+B/z:e-B/z}if(e<0){i-=e;e-=e}if(t<0){r-=t;t-=t}if(i<0){e-=i;i-=i}if(r<0){t-=r;r-=r}if(i>O){a=i-O;e-=a;i-=a}if(r>R){a=r-R;t-=a;r-=a}if(e>O){a=e-R;r-=a;t-=a}if(t>R){a=t-R;r-=a;t-=a}return m(h(e,t,i,r))}function m(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}return{flipCoords:h,setPressed:s,setCurrent:l,getOffset:u,moveOffset:c,getCorner:d,getFixed:f}}();var J=function(){var t=false,i=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),r={top:u(),left:u().height(R),right:u().height(R),bottom:u()};function o(e,t){r.left.css({height:l(t)});r.right.css({height:l(t)})}function a(){return s(Z.getFixed())}function s(e){r.top.css({left:l(e.x),width:l(e.w),height:l(e.y)});r.bottom.css({top:l(e.y2),left:l(e.x),width:l(e.w),height:l(R-e.y2)});r.right.css({left:l(e.x2),width:l(O-e.x2)});r.left.css({width:l(e.x)})}function u(){return e("<div />").css({position:"absolute",backgroundColor:n.shadeColor||n.bgColor}).appendTo(i)}function c(){if(!t){t=true;i.insertBefore(k);a();ee.setBgOpacity(1,0,1);P.hide();d(n.shadeColor||n.bgColor,1);if(ee.isAwake()){p(n.bgOpacity,1)}else p(1,1)}}function d(e,t){ge(g(),e,t)}function f(){if(t){i.remove();P.show();t=false;if(ee.isAwake()){ee.setBgOpacity(n.bgOpacity,1,1)}else{ee.setBgOpacity(1,1,1);ee.disableHandles()}ge(N,0,1)}}function p(e,r){if(t){if(n.bgFade&&!r){i.animate({opacity:1-e},{queue:false,duration:n.fadeTime})}else i.css({opacity:1-e})}}function h(){n.shade?c():f();if(ee.isAwake())p(n.bgOpacity)}function g(){return i.children()}return{update:a,updateRaw:s,getShades:g,setBgColor:d,enable:c,disable:f,resize:o,refresh:h,opacity:p}}();var ee=function(){var t,i=370,r={},o={},a={},s=false;function c(t){var i=e("<div />").css({position:"absolute",opacity:n.borderOpacity}).addClass(u(t));I.append(i);return i}function d(t,i){var n=e("<div />").mousedown(y(t)).css({cursor:t+"-resize",position:"absolute",zIndex:i}).addClass("ord-"+t);if(Q.support){n.bind("touchstart.jcrop",Q.createDragger(t))}M.append(n);return n}function f(e){var t=n.handleSize,r=d(e,i++).css({opacity:n.handleOpacity}).addClass(u("handle"));if(t){r.width(t).height(t)}return r}function p(e){return d(e,i++).addClass("jcrop-dragbar")}function h(e){var t;for(t=0;t<e.length;t++){a[e[t]]=p(e[t])}}function g(e){var t,i;for(i=0;i<e.length;i++){switch(e[i]){case"n":t="hline";break;case"s":t="hline bottom";break;case"e":t="vline right";break;case"w":t="vline";break}r[e[i]]=c(t)}}function m(e){var t;for(t=0;t<e.length;t++){o[e[t]]=f(e[t])}}function v(e,t){if(!n.shade){P.css({top:l(-t),left:l(-e)})}L.css({top:l(t),left:l(e)})}function b(e,t){L.width(Math.round(e)).height(Math.round(t))}function w(){var e=Z.getFixed();Z.setPressed([e.x,e.y]);Z.setCurrent([e.x2,e.y2]);C()}function C(e){if(t){return A(e)}}function A(e){var i=Z.getFixed();b(i.w,i.h);v(i.x,i.y);if(n.shade)J.updateRaw(i);t||T();if(e){n.onSelect.call(ve,_(i))}else{n.onChange.call(ve,_(i))}}function x(e,i,r){if(!t&&!i)return;if(n.bgFade&&!r){k.animate({opacity:e},{queue:false,duration:n.fadeTime})}else{k.css("opacity",e)}}function T(){L.show();if(n.shade)J.opacity(W);else x(W,true);t=true}function S(){R();L.hide();if(n.shade)J.opacity(1);else x(1);t=false;n.onRelease.call(ve)}function D(){if(s){M.show()}}function O(){s=true;if(n.allowResize){M.show();return true}}function R(){s=false;M.hide()}function N(e){if(e){X=true;R()}else{X=false;O()}}function F(){N(false);w()}if(n.dragEdges&&e.isArray(n.createDragbars))h(n.createDragbars);if(e.isArray(n.createHandles))m(n.createHandles);if(n.drawBorders&&e.isArray(n.createBorders))g(n.createBorders);e(document).bind("touchstart.jcrop-ios",(function(t){if(e(t.currentTarget).hasClass("jcrop-tracker"))t.stopPropagation()}));var G=E().mousedown(y("move")).css({cursor:"move",position:"absolute",zIndex:360});if(Q.support){G.bind("touchstart.jcrop",Q.createDragger("move"))}I.append(G);R();return{updateVisible:C,update:A,release:S,refresh:w,isAwake:function(){return t},setCursor:function(e){G.css("cursor",e)},enableHandles:O,enableOnly:function(){s=true},showHandles:D,disableHandles:R,animMode:N,setBgOpacity:x,done:F}}();var te=function(){var t=function(){},i=function(){},r=n.trackDocument;function o(t){G.css({zIndex:450});if(t)e(document).bind("touchmove.jcrop",c).bind("touchend.jcrop",d);else if(r)e(document).bind("mousemove.jcrop",s).bind("mouseup.jcrop",l)}function a(){G.css({zIndex:290});e(document).unbind(".jcrop")}function s(e){t(f(e));return false}function l(e){e.preventDefault();e.stopPropagation();if(q){q=false;i(f(e));if(ee.isAwake()){n.onSelect.call(ve,_(Z.getFixed()))}a();t=function(){};i=function(){}}return false}function u(e,n,r){q=true;t=e;i=n;o(r);return false}function c(e){t(f(Q.cfilter(e)));return false}function d(e){return l(Q.cfilter(e))}function p(e){G.css("cursor",e)}if(!r){G.mousemove(s).mouseup(l).mouseout(l)}k.before(G);return{activateHandlers:u,setCursor:p}}();var ie=function(){var t=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),i=e("<div />").css({position:"absolute",overflow:"hidden"}).append(t);function r(){if(n.keySupport){}}function o(e){t.hide()}function a(e,t,i){if(n.allowMove){Z.moveOffset([t,i]);ee.updateVisible(true)}e.preventDefault();e.stopPropagation()}function l(e){if(e.ctrlKey||e.metaKey){return true}K=e.shiftKey?true:false;var t=K?10:1;switch(e.keyCode){case 37:a(e,-t,0);break;case 39:a(e,t,0);break;case 38:a(e,0,-t);break;case 40:a(e,0,t);break;case 27:if(n.allowSelect)ee.release();break;case 9:return true}return false}if(n.keySupport){t.keydown(l).blur(o);if(s||!n.fixedSupport){t.css({position:"absolute",left:"-20px"});i.append(t).insertBefore(k)}else{t.insertBefore(k)}t.hide()}return{watchKeys:r}}();function ne(e){N.removeClass().addClass(u("holder")).addClass(e)}function re(e,t){var i=e[0]/z,r=e[1]/U,o=e[2]/z,a=e[3]/U;if(X){return}var s=Z.flipCoords(i,r,o,a),l=Z.getFixed(),u=[l.x,l.y,l.x2,l.y2],c=u,d=n.animationDelay,f=s[0]-u[0],p=s[1]-u[1],h=s[2]-u[2],g=s[3]-u[3],m=0,v=n.swingSpeed;i=c[0];r=c[1];o=c[2];a=c[3];ee.animMode(true);var y;function b(){window.setTimeout(_,d)}var _=function(){return function(){m+=(100-m)/v;c[0]=Math.round(i+m/100*f);c[1]=Math.round(r+m/100*p);c[2]=Math.round(o+m/100*h);c[3]=Math.round(a+m/100*g);if(m>=99.8){m=100}if(m<100){ae(c);b()}else{ee.done();ee.animMode(false);if(typeof t==="function"){t.call(ve)}}}}();b()}function oe(e){ae([e[0]/z,e[1]/U,e[2]/z,e[3]/U]);n.onSelect.call(ve,_(Z.getFixed()));ee.enableHandles()}function ae(e){Z.setPressed([e[0],e[1]]);Z.setCurrent([e[2],e[3]]);ee.update()}function se(){return _(Z.getFixed())}function le(){return Z.getFixed()}function ue(e){p(e);me()}function ce(){n.disabled=true;ee.disableHandles();ee.setCursor("default");te.setCursor("default")}function de(){n.disabled=false;me()}function fe(){ee.done();te.activateHandlers(null,null)}function pe(){N.remove();T.show();T.css("visibility","visible");e(t).removeData("Jcrop")}function he(e,t){ee.release();ce();var i=new Image;i.onload=function(){var r=i.width;var o=i.height;var a=n.boxWidth;var s=n.boxHeight;k.width(r).height(o);k.attr("src",e);P.attr("src",e);b(k,a,s);O=k.width();R=k.height();P.width(O).height(R);G.width(O+F*2).height(R+F*2);N.width(O).height(R);J.resize(O,R);de();if(typeof t==="function"){t.call(ve)}};i.src=e}function ge(e,t,i){var r=t||n.bgColor;if(n.bgFade&&c()&&n.fadeTime&&!i){e.animate({backgroundColor:r},{queue:false,duration:n.fadeTime})}else{e.css("backgroundColor",r)}}function me(e){if(n.allowResize){if(e){ee.enableOnly()}else{ee.enableHandles()}}else{ee.disableHandles()}te.setCursor(n.allowSelect?"crosshair":"default");ee.setCursor(n.allowMove?"move":"default");if(n.hasOwnProperty("trueSize")){z=n.trueSize[0]/O;U=n.trueSize[1]/R}if(n.hasOwnProperty("setSelect")){oe(n.setSelect);ee.done();delete n.setSelect}J.refresh();if(n.bgColor!=$){ge(n.shade?J.getShades():N,n.shade?n.shadeColor||n.bgColor:n.bgColor);$=n.bgColor}if(W!=n.bgOpacity){W=n.bgOpacity;if(n.shade)J.refresh();else ee.setBgOpacity(W)}H=n.maxSize[0]||0;j=n.maxSize[1]||0;B=n.minSize[0]||0;V=n.minSize[1]||0;if(n.hasOwnProperty("outerImage")){k.attr("src",n.outerImage);delete n.outerImage}ee.refresh()}if(Q.support)G.bind("touchstart.jcrop",Q.newSelection);M.hide();me(true);var ve={setImage:he,animateTo:re,setSelect:oe,setOptions:ue,tellSelect:se,tellScaled:le,setClass:ne,disable:ce,enable:de,cancel:fe,release:ee.release,destroy:pe,focus:ie.watchKeys,getBounds:function(){return[O*z,R*U]},getWidgetSize:function(){return[O,R]},getScaleFactor:function(){return[z,U]},getOptions:function(){return n},ui:{holder:N,selection:L}};if(a)N.bind("selectstart",(function(){return false}));T.data("Jcrop",ve);return ve};e.fn.Jcrop=function(t,i){var n;this.each((function(){if(e(this).data("Jcrop")){if(t==="api")return e(this).data("Jcrop");else e(this).data("Jcrop").setOptions(t)}else{if(this.tagName=="IMG")e.Jcrop.Loader(this,(function(){e(this).css({display:"block",visibility:"hidden"});n=e.Jcrop(this,t);if(e.isFunction(i))i.call(n)}));else{e(this).css({display:"block",visibility:"hidden"});n=e.Jcrop(this,t);if(e.isFunction(i))i.call(n)}}}));return this};e.Jcrop.Loader=function(t,i,n){var r=e(t),o=r[0];function a(){if(o.complete){r.unbind(".jcloader");if(e.isFunction(i))i.call(o)}else window.setTimeout(a,50)}r.bind("load.jcloader",a).bind("error.jcloader",(function(t){r.unbind(".jcloader");if(e.isFunction(n))n.call(o)}));if(o.complete&&e.isFunction(i)){r.unbind(".jcloader");i.call(o)}};e.Jcrop.defaults={allowSelect:true,allowMove:true,allowResize:true,trackDocument:true,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:false,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:true,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:true,dragEdges:true,fixedSupport:true,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}})(jQuery);(function(e,t){if(typeof define==="function"&&define.amd){define(["jquery"],t)}else{t(e.jQuery)}})(this,(function(e){"use strict";e.extendext=function(){var t,i,n,r,o,a,s=arguments[0]||{},l=1,u=arguments.length,c=false,d="default";if(typeof s==="boolean"){c=s;s=arguments[l++]||{}}if(typeof s==="string"){d=e([s.toLowerCase(),"default"]).filter(["default","concat","replace","extend"])[0];s=arguments[l++]||{}}if(typeof s!=="object"&&!e.isFunction(s)){s={}}if(l===u){s=this;l--}for(;l<u;l++){if((t=arguments[l])!==null){if(e.isArray(t)&&d!=="default"){a=s&&e.isArray(s)?s:[];switch(d){case"concat":s=a.concat(e.extend(c,[],t));break;case"replace":s=e.extend(c,[],t);break;case"extend":t.forEach((function(t,i){if(typeof t==="object"){var n=e.isArray(t)?[]:{};a[i]=e.extendext(c,d,a[i]||n,t)}else if(a.indexOf(t)===-1){a.push(t)}}));s=a;break}}else{for(i in t){n=s[i];r=t[i];if(s===r){continue}if(c&&r&&(e.isPlainObject(r)||(o=e.isArray(r)))){if(o){o=false;a=n&&e.isArray(n)?n:[]}else{a=n&&e.isPlainObject(n)?n:{}}s[i]=e.extendext(c,d,a,r)}else if(r!==undefined){s[i]=r}}}}}return s}}));(function(){"use strict";var e={version:"1.0.3",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:true,append:true,selfcontained:false,doNotSkipEncoded:false},template:undefined,compile:undefined},t;e.encodeHTMLSource=function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(i,(function(e){return t[e]||e})):""}};t=function(){return this||(0,eval)("this")}();if(typeof module!=="undefined"&&module.exports){module.exports=e}else if(typeof define==="function"&&define.amd){define((function(){return e}))}else{t.doT=e}var i={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},n=/$^/;function r(e,t,i){return(typeof t==="string"?t:t.toString()).replace(e.define||n,(function(t,n,r,o){if(n.indexOf("def.")===0){n=n.substring(4)}if(!(n in i)){if(r===":"){if(e.defineParams)o.replace(e.defineParams,(function(e,t,r){i[n]={arg:t,text:r}}));if(!(n in i))i[n]=o}else{new Function("def","def['"+n+"']="+o)(i)}}return""})).replace(e.use||n,(function(t,n){if(e.useParams)n=n.replace(e.useParams,(function(e,t,n,r){if(i[n]&&i[n].arg&&r){var o=(n+":"+r).replace(/'|\\/g,"_");i.__exp=i.__exp||{};i.__exp[o]=i[n].text.replace(new RegExp("(^|[^\\w$])"+i[n].arg+"([^\\w$])","g"),"$1"+r+"$2");return t+"def.__exp['"+o+"']"}}));var o=new Function("def","return "+n)(i);return o?r(e,o,i):o}))}function o(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}e.template=function(a,s,l){s=s||e.templateSettings;var u=s.append?i.append:i.split,c,d=0,f,p=s.use||s.define?r(s,a,l||{}):a;p=("var out='"+(s.strip?p.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):p).replace(/'|\\/g,"\\$&").replace(s.interpolate||n,(function(e,t){return u.start+o(t)+u.end})).replace(s.encode||n,(function(e,t){c=true;return u.startencode+o(t)+u.end})).replace(s.conditional||n,(function(e,t,i){return t?i?"';}else if("+o(i)+"){out+='":"';}else{out+='":i?"';if("+o(i)+"){out+='":"';}out+='"})).replace(s.iterate||n,(function(e,t,i,n){if(!t)return"';} } out+='";d+=1;f=n||"i"+d;t=o(t);return"';var arr"+d+"="+t+";if(arr"+d+"){var "+i+","+f+"=-1,l"+d+"=arr"+d+".length-1;while("+f+"<l"+d+"){"+i+"=arr"+d+"["+f+"+=1];out+='"})).replace(s.evaluate||n,(function(e,t){return"';"+o(t)+"out+='"}))+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"");if(c){if(!s.selfcontained&&t&&!t._encodeHTML)t._encodeHTML=e.encodeHTMLSource(s.doNotSkipEncoded);p="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+e.encodeHTMLSource.toString()+"("+(s.doNotSkipEncoded||"")+"));"+p}try{return new Function(s.varname,p)}catch(e){if(typeof console!=="undefined")console.log("Could not create a template function: "+p);throw e}};e.compile=function(t,i){return e.template(t,null,i)}})();(function e(t,i){if(typeof exports==="object"&&typeof module==="object")module.exports=i();else if(typeof define==="function"&&define.amd)define([],i);else if(typeof exports==="object")exports["agGrid"]=i();else t["agGrid"]=i()})(this,(function(){return function(e){var t={};function i(n){if(t[n]){return t[n].exports}var r=t[n]={i:n,l:false,exports:{}};e[n].call(r.exports,r,r.exports,i);r.l=true;return r.exports}i.m=e;i.c=t;i.d=function(e,t,n){if(!i.o(e,t)){Object.defineProperty(e,t,{configurable:false,enumerable:true,get:n})}};i.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};i.d(t,"a",t);return t};i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};i.p="";return i(i.s=119)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(1);var r=function(){function e(e,t){this.beans={};this.componentsMappedByName={};this.destroyed=false;if(!e||!e.beans){return}this.contextParams=e;this.logger=t;this.logger.log(">> creating ag-Application Context");this.setupComponents();this.createBeans();var i=n.Utils.mapObject(this.beans,(function(e){return e.beanInstance}));this.wireBeans(i);this.logger.log(">> ag-Application Context ready - component is alive")}e.prototype.setupComponents=function(){var e=this;if(this.contextParams.components){this.contextParams.components.forEach((function(t){return e.addComponent(t)}))}};e.prototype.addComponent=function(e){var t=e.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();var i=t.toUpperCase();this.componentsMappedByName[i]=e.theClass};e.prototype.createComponent=function(e,t){var i=e.nodeName;if(this.componentsMappedByName&&this.componentsMappedByName[i]){var n=new this.componentsMappedByName[i];this.wireBean(n,t);return n}else{return null}};e.prototype.wireBean=function(e,t){if(!e){throw Error("Can't wire to bean since it is null")}this.wireBeans([e],t)};e.prototype.wireBeans=function(e,t){this.autoWireBeans(e);this.methodWireBeans(e);this.preConstruct(e);if(n.Utils.exists(t)){e.forEach(t)}this.postConstruct(e)};e.prototype.createBeans=function(){var e=this;this.contextParams.beans.forEach(this.createBeanEntry.bind(this));if(this.contextParams.overrideBeans){this.contextParams.overrideBeans.forEach(this.createBeanEntry.bind(this))}n.Utils.iterateObject(this.beans,(function(t,i){var n;if(i.bean.__agBeanMetaData&&i.bean.__agBeanMetaData.autowireMethods&&i.bean.__agBeanMetaData.autowireMethods.agConstructor){n=i.bean.__agBeanMetaData.autowireMethods.agConstructor}var r=e.getBeansForParameters(n,i.bean.name);var a=o(i.bean,r);i.beanInstance=a;e.logger.log("bean "+e.getBeanName(a)+" created")}))};e.prototype.createBeanEntry=function(e){var t=e.__agBeanMetaData;if(!t){var i=void 0;if(e.prototype.constructor){i=e.prototype.constructor.name}else{i=""+e}console.error("context item "+i+" is not a bean");return}var n={bean:e,beanInstance:null,beanName:t.beanName};this.beans[t.beanName]=n};e.prototype.autoWireBeans=function(e){var t=this;e.forEach((function(e){return t.autoWireBean(e)}))};e.prototype.methodWireBeans=function(e){var t=this;e.forEach((function(e){if(!e){throw Error("Can't wire to bean since it is null")}return t.methodWireBean(e)}))};e.prototype.autoWireBean=function(e){var t=this;var i=e;var n=function(){var n=i.constructor;if(n.__agBeanMetaData&&n.__agBeanMetaData.agClassAttributes){var o=n.__agBeanMetaData.agClassAttributes;if(!o){return{value:void 0}}var a=r.getBeanName(n);o.forEach((function(i){var n=t.lookupBeanInstance(a,i.beanName,i.optional);e[i.attributeName]=n}))}i=Object.getPrototypeOf(i)?Object.getPrototypeOf(i):null};var r=this;while(i!=null){var o=n();if(typeof o==="object")return o.value}};e.prototype.getBeanName=function(e){if(e.__agBeanMetaData&&e.__agBeanMetaData.beanName){return e.__agBeanMetaData.beanName}var t=e.toString();var i=t.substring(9,t.indexOf("("));return i};e.prototype.methodWireBean=function(e){var t=this;var i;if(e.constructor.__agBeanMetaData&&e.constructor.__agBeanMetaData.autowireMethods){i=e.constructor.__agBeanMetaData.autowireMethods}n.Utils.iterateObject(i,(function(i,n){if(i==="agConstructor"){return}var r=t.getBeanName(e.constructor);var o=t.getBeansForParameters(n,r);e[i].apply(e,o)}))};e.prototype.getBeansForParameters=function(e,t){var i=this;var r=[];if(e){n.Utils.iterateObject(e,(function(e,n){var o=i.lookupBeanInstance(t,n);r[Number(e)]=o}))}return r};e.prototype.lookupBeanInstance=function(e,t,i){if(i===void 0){i=false}if(t==="context"){return this}else if(this.contextParams.seed&&this.contextParams.seed.hasOwnProperty(t)){return this.contextParams.seed[t]}else{var n=this.beans[t];if(n){return n.beanInstance}if(!i){console.error("ag-Grid: unable to find bean reference "+t+" while initialising "+e)}return null}};e.prototype.postConstruct=function(e){e.forEach((function(e){if(e.constructor.__agBeanMetaData&&e.constructor.__agBeanMetaData.postConstructMethods){e.constructor.__agBeanMetaData&&e.constructor.__agBeanMetaData.postConstructMethods.forEach((function(t){return e[t]()}))}}))};e.prototype.preConstruct=function(e){e.forEach((function(e){if(e.constructor.__agBeanMetaData&&e.constructor.__agBeanMetaData.preConstructMethods){e.constructor.__agBeanMetaData.preConstructMethods.forEach((function(t){return e[t]()}))}}))};e.prototype.getBean=function(e){return this.lookupBeanInstance("getBean",e,true)};e.prototype.destroy=function(){if(this.destroyed){return}this.logger.log(">> Shutting down ag-Application Context");n.Utils.iterateObject(this.beans,(function(e,t){var i=t.beanInstance;if(i.constructor.__agBeanMetaData&&i.constructor.__agBeanMetaData.preDestroyMethods){i.constructor.__agBeanMetaData.preDestroyMethods.forEach((function(e){return i[e]()}))}}));this.destroyed=true;this.logger.log(">> ag-Application Context shut down - component is dead")};return e}();t.Context=r;function o(e,t){var i=[null].concat(t);var n=e.bind.apply(e,i);return new n}function a(e,t,i){var n=h(e.constructor);if(!n.postConstructMethods){n.preConstructMethods=[]}n.preConstructMethods.push(t)}t.PreConstruct=a;function s(e,t,i){var n=h(e.constructor);if(!n.postConstructMethods){n.postConstructMethods=[]}n.postConstructMethods.push(t)}t.PostConstruct=s;function l(e,t,i){var n=h(e.constructor);if(!n.preDestroyMethods){n.preDestroyMethods=[]}n.preDestroyMethods.push(t)}t.PreDestroy=l;function u(e){return function(t){var i=h(t);i.beanName=e}}t.Bean=u;function c(e){return function(t,i,n){f(t,e,false,t,i,null)}}t.Autowired=c;function d(e){return function(t,i,n){f(t,e,true,t,i,null)}}t.Optional=d;function f(e,t,i,n,r,o){if(t===null){console.error("ag-Grid: Autowired name should not be null");return}if(typeof o==="number"){console.error("ag-Grid: Autowired should be on an attribute");return}var a=h(e.constructor);if(!a.agClassAttributes){a.agClassAttributes=[]}a.agClassAttributes.push({attributeName:r,beanName:t,optional:i})}function p(e){return function(t,i,n){var r=typeof t=="function"?t:t.constructor;var o;if(typeof n==="number"){var a=void 0;if(i){o=h(r);a=i}else{o=h(r);a="agConstructor"}if(!o.autowireMethods){o.autowireMethods={}}if(!o.autowireMethods[a]){o.autowireMethods[a]={}}o.autowireMethods[a][n]=e}}}t.Qualifier=p;function h(e){if(!e.hasOwnProperty("__agBeanMetaData")){e.__agBeanMetaData={}}return e.__agBeanMetaData}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(9);var r=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;var o=/([^\s,]+)/g;var a="__ag_Grid_Stop_Propagation";var s=function(){function e(){this.timestamp=(new Date).getTime()}e.prototype.print=function(e){var t=(new Date).getTime()-this.timestamp;console.log(e+" = "+t);this.timestamp=(new Date).getTime()};return e}();t.Timer=s;var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var u=/[&<>"']/g;var c=function(){function e(){}e.doOnce=function(e,t){if(this.doOnceFlags[t]){return}e();this.doOnceFlags[t]=true};e.areEventsNear=function(e,t,i){if(i===0){return false}var n=Math.abs(e.clientX-t.clientX);var r=Math.abs(e.clientY-t.clientY);return Math.max(n,r)<=i};e.shallowCompare=function(e,t){if(this.missing(e)&&this.missing(t)){return true}if(this.missing(e)||this.missing(t)){return false}if(e.length!==t.length){return false}for(var i=0;i<e.length;i++){if(e[i]!==t[i]){return false}}return true};e.getNameOfClass=function(e){var t=/function (.{1,})\(/;var i=e.toString();var n=t.exec(i);return n&&n.length>1?n[1]:""};e.values=function(e){var t=[];this.iterateObject(e,(function(e,i){t.push(i)}));return t};e.getValueUsingField=function(e,t,i){if(!t||!e){return}if(!i){return e[t]}else{var n=t.split(".");var r=e;for(var o=0;o<n.length;o++){r=r[n[o]];if(this.missing(r)){return null}}return r}};e.getScrollLeft=function(e,t){var i=e.scrollLeft;if(t){i=Math.abs(i);if(this.isBrowserSafari()||this.isBrowserChrome()){i=e.scrollWidth-e.clientWidth-i}}return i};e.cleanNumber=function(e){if(typeof e==="string"){e=parseInt(e)}if(typeof e==="number"){e=Math.floor(e)}else{e=null}return e};e.setScrollLeft=function(e,t,i){if(i){if(this.isBrowserSafari()||this.isBrowserChrome()){t=e.scrollWidth-e.clientWidth-t}if(this.isBrowserFirefox()){t*=-1}}e.scrollLeft=t};e.iterateNamedNodeMap=function(e,t){if(!e){return}for(var i=0;i<e.length;i++){var n=e[i];t(n.name,n.value)}};e.iterateObject=function(e,t){if(this.missing(e)){return}if(Array.isArray(e)){e.forEach((function(e,i){t(i+"",e)}))}else{var i=Object.keys(e);for(var n=0;n<i.length;n++){var r=i[n];var o=e[r];t(r,o)}}};e.cloneObject=function(e){var t={};var i=Object.keys(e);for(var n=0;n<i.length;n++){var r=i[n];var o=e[r];t[r]=o}return t};e.map=function(e,t){var i=[];for(var n=0;n<e.length;n++){var r=e[n];var o=t(r);i.push(o)}return i};e.mapObject=function(t,i){var n=[];e.iterateObject(t,(function(e,t){n.push(i(t))}));return n};e.forEach=function(e,t){if(!e){return}for(var i=0;i<e.length;i++){var n=e[i];t(n,i)}};e.filter=function(e,t){var i=[];e.forEach((function(e){if(t(e)){i.push(e)}}));return i};e.getAllKeysInObjects=function(e){var t={};e.forEach((function(e){if(e){Object.keys(e).forEach((function(e){return t[e]=null}))}}));return Object.keys(t)};e.mergeDeep=function(t,i){if(this.exists(i)){this.iterateObject(i,(function(i,n){var r=t[i];if(r===n){return}if(typeof r==="object"&&typeof n==="object"){e.mergeDeep(r,n)}else{t[i]=n}}))}};e.assign=function(e){var t=this;var i=[];for(var n=1;n<arguments.length;n++){i[n-1]=arguments[n]}i.forEach((function(i){if(t.exists(i)){t.iterateObject(i,(function(t,i){e[t]=i}))}}));return e};e.parseYyyyMmDdToDate=function(e,t){try{if(!e)return null;if(e.indexOf(t)===-1)return null;var i=e.split(t);if(i.length!=3)return null;return new Date(Number(i[0]),Number(i[1])-1,Number(i[2]))}catch(e){return null}};e.serializeDateToYyyyMmDd=function(t,i){if(!t)return null;return t.getFullYear()+i+e.pad(t.getMonth()+1,2)+i+e.pad(t.getDate(),2)};e.pad=function(e,t){var i=e+"";while(i.length<t)i="0"+i;return i};e.pushAll=function(e,t){if(this.missing(t)||this.missing(e)){return}t.forEach((function(t){return e.push(t)}))};e.createArrayOfNumbers=function(e,t){var i=[];for(var n=e;n<=t;n++){i.push(n)}return i};e.getFunctionParameters=function(e){var t=e.toString().replace(r,"");var i=t.slice(t.indexOf("(")+1,t.indexOf(")")).match(o);if(i===null){return[]}else{return i}};e.find=function(e,t,i){if(e===null||e===undefined){return null}if(!Array.isArray(e)){var n=this.values(e);return this.find(n,t,i)}var r=e;var o;for(var a=0;a<r.length;a++){var s=r[a];if(typeof t==="string"){if(s[t]===i){o=s;break}}else{var l=t;if(l(s)){o=s;break}}}return o};e.toStrings=function(e){return this.map(e,(function(e){if(e===undefined||e===null||!e.toString){return null}else{return e.toString()}}))};e.iterateArray=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];t(n,i)}};e.isNode=function(e){return typeof Node==="function"?e instanceof Node:e&&typeof e==="object"&&typeof e.nodeType==="number"&&typeof e.nodeName==="string"};e.isElement=function(e){return typeof HTMLElement==="function"?e instanceof HTMLElement:e&&typeof e==="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName==="string"};e.isNodeOrElement=function(e){return this.isNode(e)||this.isElement(e)};e.copyNodeList=function(e){var t=e?e.length:0;var i=[];for(var n=0;n<t;n++){i.push(e[n])}return i};e.isEventFromPrintableCharacter=function(i){var r=String.fromCharCode(i.charCode);if(this.isKeyPressed(i,n.Constants.KEY_NEW_LINE)){return false}if(t._.exists(i.key)){var o=i.key.length===1;var a=e.isNumpadDelWithNumlockOnForEdgeOrIe(i);return o||a}else{return e.PRINTABLE_CHARACTERS.indexOf(r)>=0}};e.addChangeListener=function(e,t){e.addEventListener("changed",t);e.addEventListener("paste",t);e.addEventListener("input",t);e.addEventListener("keydown",t);e.addEventListener("keyup",t)};e.makeNull=function(e){var t=e;if(e===null||e===undefined||t===""){return null}else{return e}};e.missing=function(e){return!this.exists(e)};e.missingOrEmpty=function(e){return this.missing(e)||e.length===0};e.missingOrEmptyObject=function(e){return this.missing(e)||Object.keys(e).length===0};e.exists=function(e){if(e===null||e===undefined||e===""){return false}else{return true}};e.firstExistingValue=function(){var e=[];for(var i=0;i<arguments.length;i++){e[i]=arguments[i]}for(var n=0;n<e.length;n++){var r=e[n];if(t._.exists(r))return r}return null};e.anyExists=function(e){if(e){for(var t=0;t<e.length;t++){if(this.exists(e[t])){return true}}}return false};e.existsAndNotEmpty=function(e){return this.exists(e)&&e.length>0};e.removeAllChildren=function(e){if(e){while(e.hasChildNodes()){e.removeChild(e.lastChild)}}};e.removeElement=function(e,t){this.removeFromParent(e.querySelector(t))};e.removeFromParent=function(e){if(e&&e.parentNode){e.parentNode.removeChild(e)}};e.isVisible=function(e){return e.offsetParent!==null};e.loadTemplate=function(e){var t=document.createElement("div");t.innerHTML=e;return t.firstChild};e.appendHtml=function(e,t){if(e.lastChild){e.insertAdjacentHTML("afterbegin",t)}else{e.innerHTML=t}};e.addOrRemoveCssClass=function(e,t,i){if(i){this.addCssClass(e,t)}else{this.removeCssClass(e,t)}};e.callIfPresent=function(e){if(e){e()}};e.addCssClass=function(e,t){var i=this;if(!t||t.length===0){return}if(t.indexOf(" ")>=0){t.split(" ").forEach((function(t){return i.addCssClass(e,t)}));return}if(e.classList){if(!e.classList.contains(t)){e.classList.add(t)}}else{if(e.className&&e.className.length>0){var n=e.className.split(" ");if(n.indexOf(t)<0){n.push(t);e.className=n.join(" ")}}else{e.className=t}}};e.containsClass=function(e,t){if(e.classList){return e.classList.contains(t)}else if(e.className){var i=e.className===t;var n=e.className.indexOf(" "+t+" ")>=0;var r=e.className.indexOf(t+" ")===0;var o=e.className.lastIndexOf(" "+t)===e.className.length-t.length-1;return i||n||r||o}else{return false}};e.getElementAttribute=function(e,t){if(e.attributes){if(e.attributes[t]){var i=e.attributes[t];return i.value}else{return null}}else{return null}};e.offsetHeight=function(e){return e&&e.clientHeight?e.clientHeight:0};e.offsetWidth=function(e){return e&&e.clientWidth?e.clientWidth:0};e.sortNumberArray=function(e){e.sort((function(e,t){return e-t}))};e.removeCssClass=function(e,t){if(e.classList){if(e.classList.contains(t)){e.classList.remove(t)}}else{if(e.className&&e.className.length>0){var i=e.className.split(" ");if(i.indexOf(t)>=0){while(i.indexOf(t)>=0){i.splice(i.indexOf(t),1)}e.className=i.join(" ")}}}};e.removeRepeatsFromArray=function(e,t){if(!e){return}for(var i=e.length-2;i>=0;i--){var n=e[i]===t;var r=e[i+1]===t;if(n&&r){e.splice(i+1,1)}}};e.removeFromArray=function(e,t){if(e.indexOf(t)>=0){e.splice(e.indexOf(t),1)}};e.removeAllFromArray=function(e,t){t.forEach((function(t){if(e.indexOf(t)>=0){e.splice(e.indexOf(t),1)}}))};e.insertIntoArray=function(e,t,i){e.splice(i,0,t)};e.insertArrayIntoArray=function(e,t,i){if(this.missing(e)||this.missing(t)){return}for(var n=t.length-1;n>=0;n--){var r=t[n];this.insertIntoArray(e,r,i)}};e.moveInArray=function(e,t,i){var n=this;t.forEach((function(t){n.removeFromArray(e,t)}));t.slice().reverse().forEach((function(t){n.insertIntoArray(e,t,i)}))};e.defaultComparator=function(e,t,i){if(i===void 0){i=false}var n=e===null||e===undefined;var r=t===null||t===undefined;if(e&&e.toNumber){e=e.toNumber()}if(t&&t.toNumber){t=t.toNumber()}if(n&&r){return 0}if(n){return-1}if(r){return 1}if(typeof e==="string"){if(!i){return o(e,t)}else{try{return e.localeCompare(t)}catch(i){return o(e,t)}}}if(e<t){return-1}else if(e>t){return 1}else{return 0}function o(e,t){return e>t?1:e<t?-1:0}};e.compareArrays=function(e,t){if(this.missing(e)&&this.missing(t)){return true}if(this.missing(e)||this.missing(t)){return false}if(e.length!==t.length){return false}for(var i=0;i<e.length;i++){if(e[i]!==t[i]){return false}}return true};e.ensureDomOrder=function(e,t,i){if(i&&i.nextSibling===t){return}if(i){if(i.nextSibling){e.insertBefore(t,i.nextSibling)}else{e.appendChild(t)}}else{if(e.firstChild){e.insertBefore(t,e.firstChild)}}};e.insertWithDomOrder=function(e,t,i){if(i){if(i.nextSibling){e.insertBefore(t,i.nextSibling)}else{e.appendChild(t)}}else{if(e.firstChild){e.insertBefore(t,e.firstChild)}else{e.appendChild(t)}}};e.insertTemplateWithDomOrder=function(e,t,i){var n;if(i){i.insertAdjacentHTML("afterend",t);n=i.nextSibling}else{if(e.firstChild){e.insertAdjacentHTML("afterbegin",t)}else{e.innerHTML=t}n=e.firstChild}return n};e.every=function(e,t){if(!e||e.length===0){return true}for(var i=0;i<e.length;i++){if(!t(e[i])){return false}}return true};e.toStringOrNull=function(e){if(this.exists(e)&&e.toString){return e.toString()}else{return null}};e.formatWidth=function(e){if(typeof e==="number"){return e+"px"}else{return e}};e.formatNumberTwoDecimalPlacesAndCommas=function(e){if(typeof e!=="number"){return""}return(Math.round(e*100)/100).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")};e.formatNumberCommas=function(e){if(typeof e!=="number"){return""}return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")};e.prependDC=function(e,t){if(this.exists(e.firstChild)){e.insertBefore(t,e.firstChild)}else{e.appendChild(t)}};e.createIcon=function(e,t,i){var n=this.createIconNoSpan(e,t,i);if(n.className.indexOf("ag-icon")>-1){return n}else{var r=document.createElement("span");r.appendChild(n);return r}};e.createIconNoSpan=function(e,t,i){var n;if(i&&i.getColDef().icons){n=i.getColDef().icons[e]}if(!n&&t.getIcons()){n=t.getIcons()[e]}if(n){var r=void 0;if(typeof n==="function"){r=n()}else if(typeof n==="string"){r=n}else{throw"icon from grid options needs to be a string or a function"}if(typeof r==="string"){return this.loadTemplate(r)}else if(this.isNodeOrElement(r)){return r}else{throw"iconRenderer should return back a string or a dom object"}}else{var o=document.createElement("span");var a=this.iconNameClassMap[e];if(!a){throw new Error(e+" did not find class")}o.setAttribute("class","ag-icon ag-icon-"+a);return o}};e.addStylesToElement=function(e,t){var i=this;if(!t){return}Object.keys(t).forEach((function(n){var r=i.hyphenToCamelCase(n);e.style[r]=t[n]}))};e.isHorizontalScrollShowing=function(e){return e.clientWidth<e.scrollWidth};e.isVerticalScrollShowing=function(e){return e.clientHeight<e.scrollHeight};e.getMaxDivHeight=function(){if(!document.body){return-1}var e=1e6;var t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9;var i=this.loadTemplate("<div/>");document.body.appendChild(i);while(true){var n=e*2;i.style.height=n+"px";if(n>t||i.clientHeight!==n){break}else{e=n}}document.body.removeChild(i);return e};e.getScrollbarWidth=function(){var e=document.createElement("div");e.style.visibility="hidden";e.style.width="100px";e.style.msOverflowStyle="scrollbar";document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var i=document.createElement("div");i.style.width="100%";e.appendChild(i);var n=i.offsetWidth;e.parentNode.removeChild(e);return t-n};e.isKeyPressed=function(e,t){var i=e.which||e.keyCode;return i===t};e.setVisible=function(e,t){this.addOrRemoveCssClass(e,"ag-hidden",!t)};e.setHidden=function(e,t){this.addOrRemoveCssClass(e,"ag-visibility-hidden",t)};e.isBrowserIE=function(){if(this.isIE===undefined){this.isIE=false||!!document.documentMode}return this.isIE};e.isBrowserEdge=function(){if(this.isEdge===undefined){this.isEdge=!this.isBrowserIE()&&!!window.StyleMedia}return this.isEdge};e.isBrowserSafari=function(){if(this.isSafari===undefined){var e=window;this.isSafari=Object.prototype.toString.call(e.HTMLElement).indexOf("Constructor")>0||function(e){return e.toString()==="[object SafariRemoteNotification]"}(!e.safari||e.safari.pushNotification)}return this.isSafari};e.isBrowserChrome=function(){if(this.isChrome===undefined){var e=window;this.isChrome=!!e.chrome&&!!e.chrome.webstore}return this.isChrome};e.isBrowserFirefox=function(){if(this.isFirefox===undefined){var e=window;this.isFirefox=typeof e.InstallTrigger!=="undefined"}return this.isFirefox};e.isUserAgentIPad=function(){if(this.isIPad===undefined){this.isIPad=navigator.userAgent.match(/iPad|iPhone/i)!=null}return this.isIPad};e.getTarget=function(e){var t=e;return t.target||t.srcElement};e.isElementInEventPath=function(e,i){if(!i||!e){return false}var n=t._.getEventPath(i);return n.indexOf(e)>=0};e.createEventPath=function(e){var i=[];var n=t._.getTarget(e);while(n){i.push(n);n=n.parentElement}return i};e.addAgGridEventPath=function(e){e.__agGridEventPath=this.getEventPath(e)};e.getEventPath=function(e){var t=e;if(e.deepPath){return e.deepPath()}else if(t.path){return t.path}else if(t.composedPath){return t.composedPath()}else if(t.__agGridEventPath){return t.__agGridEventPath}else{return this.createEventPath(e)}};e.forEachSnapshotFirst=function(e,t){if(e){var i=e.slice(0);i.forEach(t)}};e.getBodyWidth=function(){if(document.body){return document.body.clientWidth}if(window.innerHeight){return window.innerWidth}if(document.documentElement&&document.documentElement.clientWidth){return document.documentElement.clientWidth}return-1};e.getBodyHeight=function(){if(document.body){return document.body.clientHeight}if(window.innerHeight){return window.innerHeight}if(document.documentElement&&document.documentElement.clientHeight){return document.documentElement.clientHeight}return-1};e.setCheckboxState=function(e,t){if(typeof t==="boolean"){e.checked=t;e.indeterminate=false}else{e.indeterminate=true}};e.traverseNodesWithKey=function(e,t){var i=[];n(e);function n(e){e.forEach((function(e){if(e.group||e.hasChildren()){i.push(e.key);var r=i.join("|");t(e,r);n(e.childrenAfterGroup);i.pop()}}))}};e.camelCaseToHyphen=function(e){if(e===null||e===undefined){return null}return e.replace(/([A-Z])/g,(function(e){return"-"+e[0].toLowerCase()}))};e.hyphenToCamelCase=function(e){if(e===null||e===undefined){return null}return e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))};e.cssStyleObjectToMarkup=function(e){var t=this;if(!e){return""}var i=[];this.iterateObject(e,(function(e,n){var r=t.camelCaseToHyphen(e);i.push(r+": "+n+";")}));return i.join(" ")};e.isNumeric=function(e){if(e==="")return false;return!isNaN(parseFloat(e))&&isFinite(e)};e.escape=function(e){if(e===null||e===undefined||!e.replace){return e}return e.replace(u,(function(e){return l[e]}))};e.normalizeWheel=function(e){var t=10;var i=40;var n=800;var r=0;var o=0;var a=0;var s=0;if("detail"in e){o=e.detail}if("wheelDelta"in e){o=-e.wheelDelta/120}if("wheelDeltaY"in e){o=-e.wheelDeltaY/120}if("wheelDeltaX"in e){r=-e.wheelDeltaX/120}if("axis"in e&&e.axis===e.HORIZONTAL_AXIS){r=o;o=0}a=r*t;s=o*t;if("deltaY"in e){s=e.deltaY}if("deltaX"in e){a=e.deltaX}if((a||s)&&e.deltaMode){if(e.deltaMode==1){a*=i;s*=i}else{a*=n;s*=n}}if(a&&!r){r=a<1?-1:1}if(s&&!o){o=s<1?-1:1}return{spinX:r,spinY:o,pixelX:a,pixelY:s}};e.debounce=function(e,t,i){if(i===void 0){i=false}var n;return function(){var r=this,o=arguments;var a=i&&!n;clearTimeout(n);n=setTimeout((function(){n=null;if(!i){e.apply(r,o)}}),t);if(a)e.apply(r,o)}};e.stopPropagationForAgGrid=function(e){e[a]=true};e.isStopPropagationForAgGrid=function(e){return e[a]===true};e.executeInAWhile=function(e){this.executeAfter(e,400)};e.executeNextVMTurn=function(e){this.executeAfter(e,0)};e.executeAfter=function(e,t){if(e.length>0){setTimeout((function(){e.forEach((function(e){return e()}))}),t)}};e.referenceCompare=function(e,t){if(e==null&&t==null)return true;if(e==null&&t)return false;if(e&&t==null)return false;return e===t};e.get=function(t,i,n){if(t==null)return n;if(i.indexOf(".")>-1){var r=i.split(".");var o=r[0];var a=t[o];if(a!=null){return e.get(a,r.slice(1,r.length).join("."),n)}else{return n}}else{var a=t[i];return a!=null?a:n}};e.addSafePassiveEventListener=function(t,i,n){t.addEventListener(i,n,e.passiveEvents.indexOf(i)>-1?{passive:true}:undefined)};e.camelCaseToHumanText=function(e){if(e==null)return null;var t=/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g;var i=e.replace(t,"$1$4 $2$3$5").replace("."," ").split(" ");return i.map((function(e){return e.substring(0,1).toUpperCase()+(e.length>1?e.substring(1,e.length):"")})).join(" ")};e.message=function(e){var t=document.createElement("div");t.innerHTML=e;var i=document.querySelector("#__ag__message");if(!i){var n='<div id="__ag__message" style="display: inline-block; position: absolute; top: 0px; left: 0px; color: white; background-color: black; z-index: 20; padding: 2px; border: 1px solid darkred; height: 200px; overflow-y: auto;"></div>';i=this.loadTemplate(n);if(document.body){document.body.appendChild(i)}}i.appendChild(t)};e.sortRowNodesByOrder=function(e,t){if(!e){return}e.sort((function(e,i){var n=t[e.id];var r=t[i.id];var o=n!==undefined;var a=r!==undefined;var s=o&&a;var l=!o&&!a;if(s){return n-r}else if(l){return e.id>i.id?1:-1}else if(o){return 1}else{return-1}}))};e.fuzzyCheckStrings=function(e,t,i){var n=this;var r={};var o=e.filter((function(e){return!t.some((function(t){return t===e}))}));if(o.length>0){o.forEach((function(e){return r[e]=n.fuzzySuggestions(e,t,i)}))}return r};e.fuzzySuggestions=function(e,i,n){var r=n.slice(0);r.sort((function(i,n){var r=t._.string_similarity(i.toLowerCase(),e.toLowerCase());var o=t._.string_similarity(n.toLowerCase(),e.toLowerCase());return r>o?-1:r===o?0:1}));return r};e.get_bigrams=function(e){var t,i,n,r,o;r=e.toLowerCase();o=new Array(r.length-1);for(t=i=0,n=o.length;i<=n;t=i+=1){o[t]=r.slice(t,t+2)}return o};e.isNumpadDelWithNumlockOnForEdgeOrIe=function(t){if(e.isBrowserEdge()||e.isBrowserIE()){return t.key===e.NUMPAD_DEL_NUMLOCK_ON_KEY&&t.charCode===e.NUMPAD_DEL_NUMLOCK_ON_CHARCODE}return false};e.PRINTABLE_CHARACTERS="qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM1234567890!\"£$%^&*()_+-=[];'#,./\\|<>?:@~{}";e.NUMPAD_DEL_NUMLOCK_ON_KEY="Del";e.NUMPAD_DEL_NUMLOCK_ON_CHARCODE=46;e.doOnceFlags={};e.iconNameClassMap={columnMovePin:"pin",columnMoveAdd:"plus",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"expanded",groupExpanded:"contracted",checkboxChecked:"checkbox-checked",checkboxUnchecked:"checkbox-unchecked",checkboxIndeterminate:"checkbox-indeterminate",checkboxCheckedReadOnly:"checkbox-checked-readonly",checkboxUncheckedReadOnly:"checkbox-unchecked-readonly",checkboxIndeterminateReadOnly:"checkbox-indeterminate-readonly",groupLoading:"loading",menu:"menu",filter:"filter",columns:"columns",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"};e.passiveEvents=["touchstart","touchend","touchmove","touchcancel"];e.string_similarity=function(t,i){var n,r,o,a,s,l,u,c,d,f;if(t.length>0&&i.length>0){l=e.get_bigrams(t);u=e.get_bigrams(i);c=l.length+u.length;n=0;for(r=0,a=l.length;r<a;r++){d=l[r];for(o=0,s=u.length;o<s;o++){f=u[o];if(d===f){n++}}}if(n>0){return 2*n/c}}return 0};return e}();t.Utils=c;var d=function(){function e(e,t){if(e===void 0){e=0}if(t===void 0){t=1}this.nextValue=e;this.step=t}e.prototype.next=function(){var e=this.nextValue;this.nextValue+=this.step;return e};e.prototype.peek=function(){return this.nextValue};e.prototype.skip=function(e){this.nextValue+=e};return e}();t.NumberSequence=d;t._=c;var f;(function(e){e[e["IN_PROGRESS"]=0]="IN_PROGRESS";e[e["RESOLVED"]=1]="RESOLVED"})(f=t.PromiseStatus||(t.PromiseStatus={}));var p=function(){function e(e){this.status=f.IN_PROGRESS;this.resolution=null;this.listOfWaiters=[];e(this.onDone.bind(this),this.onReject.bind(this))}e.all=function(t){return new e((function(e){var i=[];var n=t.length;t.forEach((function(t,r){t.then((function(t){n--;i[r]=t;if(n==0){e(i)}}));i.push(null)}))}))};e.resolve=function(t){return new e((function(e){return e(t)}))};e.external=function(){var t;var i=new e((function(e){t=e}));return{promise:i,resolve:function(e){t(e)}}};e.prototype.then=function(e){if(this.status===f.IN_PROGRESS){this.listOfWaiters.push(e)}else{e(this.resolution)}};e.prototype.firstOneOnly=function(e){if(this.status===f.IN_PROGRESS){if(this.listOfWaiters.length===0){this.listOfWaiters.push(e)}}else{e(this.resolution)}};e.prototype.map=function(t){var i=this;return new e((function(e){i.then((function(i){e(t(i))}))}))};e.prototype.resolveNow=function(e,t){if(this.status==f.IN_PROGRESS)return e;return t(this.resolution)};e.prototype.onDone=function(e){this.status=f.RESOLVED;this.resolution=e;this.listOfWaiters.forEach((function(t){return t(e)}))};e.prototype.onReject=function(e){console.warn("TBI")};return e}();t.Promise=p},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var o=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:true});var a=i(3);var s=i(9);var l=i(62);var u=i(6);var c=i(0);var d=i(7);var f=i(4);var p=i(1);var h=i(41);var g=i(90);var m=i(106);var v=i(25);var y=i(79);var b=25;var _=300;var w=5;var C=5;var A=["ag-fresh","ag-bootstrap","ag-blue","ag-dark","ag-material"];function E(e){return e===true||e==="true"}function x(e,t){if(e>=0){return e}else{return t}}function T(e,t){if(e>0){return e}else{return t}}var S=function(){function e(){this.propertyEventService=new a.EventService;this.domDataKey="__AG_"+Math.random().toString()}t=e;e.prototype.agWire=function(e,t){this.gridOptions.api=e;this.gridOptions.columnApi=t;this.checkForDeprecated()};e.prototype.destroy=function(){this.gridOptions.api=null;this.gridOptions.columnApi=null};e.prototype.init=function(){if(!(this.gridOptions.suppressPropertyNamesCheck===true)){this.checkGridOptionsProperties();this.checkColumnDefProperties()}var e=this.useAsyncEvents();this.eventService.addGlobalListener(this.globalEventHandler.bind(this),e);if(this.isGroupSelectsChildren()&&this.isSuppressParentsInRowNodes()){console.warn("ag-Grid: groupSelectsChildren does not work wth suppressParentsInRowNodes, this selection method needs the part in rowNode to work")}if(this.isGroupSelectsChildren()){if(!this.isRowSelectionMulti()){console.warn("ag-Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense")}if(this.isRowModelServerSide()){console.warn("ag-Grid: group selects children is NOT support for Server Side Row Model. "+"This is because the rows are lazy loaded, so selecting a group is not possible as"+"the grid has no way of knowing what the children are.")}}if(this.isGroupRemoveSingleChildren()&&this.isGroupHideOpenParents()){console.warn("ag-Grid: groupRemoveSingleChildren and groupHideOpenParents do not work with each other, you need to pick one. And don't ask us how to us these together on our support forum either you will get the same answer!")}};e.prototype.checkColumnDefProperties=function(){var e=this;if(this.gridOptions.columnDefs==null)return;this.gridOptions.columnDefs.forEach((function(t){var i=Object.getOwnPropertyNames(t);var n=m.ColDefUtil.ALL_PROPERTIES;e.checkProperties(i,n,n,"colDef","https://www.ag-grid.com/javascript-grid-column-properties/")}))};e.prototype.checkGridOptionsProperties=function(){var e=Object.getOwnPropertyNames(this.gridOptions);var t=g.PropertyKeys.ALL_PROPERTIES;Object.keys(v.Events).forEach((function(e){return t.push(l.ComponentUtil.getCallbackForEvent(v.Events[e]))}));var i=t.concat("api","columnApi");this.checkProperties(e,i,t,"gridOptions","https://www.ag-grid.com/javascript-grid-properties/")};e.prototype.checkProperties=function(e,t,i,n,r){var o=p.Utils.fuzzyCheckStrings(e,t,i);var a=Object.keys(o);a.forEach((function(e){var t=o[e];console.warn("ag-grid: invalid "+n+" property '"+e+"' did you mean any of these: "+t.slice(0,8).join(","))}));if(a.length>0){console.warn("ag-grid: to see all the valid "+n+" properties please check: "+r)}};e.prototype.getDomData=function(e,t){var i=e[this.domDataKey];if(i){return i[t]}else{return undefined}};e.prototype.setDomData=function(e,t,i){var n=e[this.domDataKey];if(p.Utils.missing(n)){n={};e[this.domDataKey]=n}n[t]=i};e.prototype.isEnterprise=function(){return this.enterprise};e.prototype.isRowSelection=function(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"};e.prototype.isRowDeselection=function(){return E(this.gridOptions.rowDeselection)};e.prototype.isRowSelectionMulti=function(){return this.gridOptions.rowSelection==="multiple"};e.prototype.isRowMultiSelectWithClick=function(){return E(this.gridOptions.rowMultiSelectWithClick)};e.prototype.getContext=function(){return this.gridOptions.context};e.prototype.isPivotMode=function(){return E(this.gridOptions.pivotMode)};e.prototype.isPivotTotals=function(){return E(this.gridOptions.pivotTotals)};e.prototype.getPivotColumnGroupTotals=function(){return this.gridOptions.pivotColumnGroupTotals};e.prototype.getPivotRowTotals=function(){return this.gridOptions.pivotRowTotals};e.prototype.isRowModelInfinite=function(){return this.gridOptions.rowModelType===s.Constants.ROW_MODEL_TYPE_INFINITE};e.prototype.isRowModelViewport=function(){return this.gridOptions.rowModelType===s.Constants.ROW_MODEL_TYPE_VIEWPORT};e.prototype.isRowModelServerSide=function(){return this.gridOptions.rowModelType===s.Constants.ROW_MODEL_TYPE_SERVER_SIDE};e.prototype.isRowModelDefault=function(){return p.Utils.missing(this.gridOptions.rowModelType)||this.gridOptions.rowModelType===s.Constants.ROW_MODEL_TYPE_CLIENT_SIDE||this.gridOptions.rowModelType===s.Constants.DEPRECATED_ROW_MODEL_TYPE_NORMAL};e.prototype.isFullRowEdit=function(){return this.gridOptions.editType==="fullRow"};e.prototype.isSuppressFocusAfterRefresh=function(){return E(this.gridOptions.suppressFocusAfterRefresh)};e.prototype.isShowToolPanel=function(){return E(this.gridOptions.showToolPanel)};e.prototype.isToolPanelSuppressValues=function(){return E(this.gridOptions.toolPanelSuppressValues)};e.prototype.isToolPanelSuppressPivots=function(){return E(this.gridOptions.toolPanelSuppressPivots)||this.isTreeData()};e.prototype.isToolPanelSuppressRowGroups=function(){return E(this.gridOptions.toolPanelSuppressRowGroups)||this.isTreeData()};e.prototype.isToolPanelSuppressSideButtons=function(){return E(this.gridOptions.toolPanelSuppressSideButtons)};e.prototype.isToolPanelSuppressPivotMode=function(){return E(this.gridOptions.toolPanelSuppressPivotMode)||this.isTreeData()};e.prototype.isContractColumnSelection=function(){return E(this.gridOptions.contractColumnSelection)};e.prototype.isToolPanelSuppressColumnFilter=function(){return E(this.gridOptions.toolPanelSuppressColumnFilter)};e.prototype.isToolPanelSuppressColumnSelectAll=function(){return E(this.gridOptions.toolPanelSuppressColumnSelectAll)};e.prototype.isToolPanelSuppressColumnExpandAll=function(){return E(this.gridOptions.toolPanelSuppressColumnExpandAll)};e.prototype.isSuppressTouch=function(){return E(this.gridOptions.suppressTouch)};e.prototype.isSuppressRowTransform=function(){return E(this.gridOptions.suppressRowTransform)};e.prototype.useAsyncEvents=function(){return!E(this.gridOptions.suppressAsyncEvents)};e.prototype.isEnableCellChangeFlash=function(){return E(this.gridOptions.enableCellChangeFlash)};e.prototype.isGroupSelectsChildren=function(){var e=E(this.gridOptions.groupSelectsChildren);if(e&&this.isTreeData()){console.warn("ag-Grid: groupSelectsChildren does not work with tree data");return false}else{return e}};e.prototype.isSuppressRowHoverHighlight=function(){return E(this.gridOptions.suppressRowHoverHighlight)};e.prototype.isGroupSelectsFiltered=function(){return E(this.gridOptions.groupSelectsFiltered)};e.prototype.isGroupHideOpenParents=function(){return E(this.gridOptions.groupHideOpenParents)};e.prototype.isGroupMultiAutoColumn=function(){return E(this.gridOptions.groupMultiAutoColumn)||E(this.gridOptions.groupHideOpenParents)};e.prototype.isGroupRemoveSingleChildren=function(){return E(this.gridOptions.groupRemoveSingleChildren)};e.prototype.isGroupRemoveLowestSingleChildren=function(){return E(this.gridOptions.groupRemoveLowestSingleChildren)};e.prototype.isGroupIncludeFooter=function(){return E(this.gridOptions.groupIncludeFooter)};e.prototype.isGroupIncludeTotalFooter=function(){return E(this.gridOptions.groupIncludeTotalFooter)};e.prototype.isGroupSuppressBlankHeader=function(){return E(this.gridOptions.groupSuppressBlankHeader)};e.prototype.isSuppressRowClickSelection=function(){return E(this.gridOptions.suppressRowClickSelection)};e.prototype.isSuppressCellSelection=function(){return E(this.gridOptions.suppressCellSelection)};e.prototype.isSuppressMultiSort=function(){return E(this.gridOptions.suppressMultiSort)};e.prototype.isMultiSortKeyCtrl=function(){return this.gridOptions.multiSortKey==="ctrl"};e.prototype.isGroupSuppressAutoColumn=function(){return E(this.gridOptions.groupSuppressAutoColumn)};e.prototype.isSuppressDragLeaveHidesColumns=function(){return E(this.gridOptions.suppressDragLeaveHidesColumns)};e.prototype.isSuppressScrollOnNewData=function(){return E(this.gridOptions.suppressScrollOnNewData)};e.prototype.isRowDragManaged=function(){return E(this.gridOptions.rowDragManaged)};e.prototype.isSuppressRowDrag=function(){return E(this.gridOptions.suppressRowDrag)};e.prototype.isGridAutoHeight=function(){return E(this.gridOptions.gridAutoHeight)};e.prototype.isSuppressHorizontalScroll=function(){return E(this.gridOptions.suppressHorizontalScroll)};e.prototype.isSuppressLoadingOverlay=function(){return E(this.gridOptions.suppressLoadingOverlay)};e.prototype.isSuppressNoRowsOverlay=function(){return E(this.gridOptions.suppressNoRowsOverlay)};e.prototype.isSuppressFieldDotNotation=function(){return E(this.gridOptions.suppressFieldDotNotation)};e.prototype.getPinnedTopRowData=function(){return this.gridOptions.pinnedTopRowData};e.prototype.getPinnedBottomRowData=function(){return this.gridOptions.pinnedBottomRowData};e.prototype.isFunctionsPassive=function(){return E(this.gridOptions.functionsPassive)};e.prototype.isSuppressTabbing=function(){return E(this.gridOptions.suppressTabbing)};e.prototype.isSuppressChangeDetection=function(){return E(this.gridOptions.suppressChangeDetection)};e.prototype.isSuppressAnimationFrame=function(){return E(this.gridOptions.suppressAnimationFrame)};e.prototype.getQuickFilterText=function(){return this.gridOptions.quickFilterText};e.prototype.isCacheQuickFilter=function(){return E(this.gridOptions.cacheQuickFilter)};e.prototype.isUnSortIcon=function(){return E(this.gridOptions.unSortIcon)};e.prototype.isSuppressMenuHide=function(){return E(this.gridOptions.suppressMenuHide)};e.prototype.isEnterMovesDownAfterEdit=function(){return E(this.gridOptions.enterMovesDownAfterEdit)};e.prototype.isEnterMovesDown=function(){return E(this.gridOptions.enterMovesDown)};e.prototype.getRowStyle=function(){return this.gridOptions.rowStyle};e.prototype.getRowClass=function(){return this.gridOptions.rowClass};e.prototype.getRowStyleFunc=function(){return this.gridOptions.getRowStyle};e.prototype.getRowClassFunc=function(){return this.gridOptions.getRowClass};e.prototype.rowClassRules=function(){return this.gridOptions.rowClassRules};e.prototype.getPopupParent=function(){return this.gridOptions.popupParent};e.prototype.getPostProcessPopupFunc=function(){return this.gridOptions.postProcessPopup};e.prototype.getDoesDataFlowerFunc=function(){return this.gridOptions.doesDataFlower};e.prototype.getPaginationNumberFormatterFunc=function(){return this.gridOptions.paginationNumberFormatter};e.prototype.getChildCountFunc=function(){return this.gridOptions.getChildCount};e.prototype.getDefaultGroupSortComparator=function(){return this.gridOptions.defaultGroupSortComparator};e.prototype.getIsFullWidthCellFunc=function(){return this.gridOptions.isFullWidthCell};e.prototype.getFullWidthCellRendererParams=function(){return this.gridOptions.fullWidthCellRendererParams};e.prototype.isEmbedFullWidthRows=function(){return E(this.gridOptions.embedFullWidthRows)};e.prototype.getBusinessKeyForNodeFunc=function(){return this.gridOptions.getBusinessKeyForNode};e.prototype.getApi=function(){return this.gridOptions.api};e.prototype.getColumnApi=function(){return this.gridOptions.columnApi};e.prototype.isDeltaRowDataMode=function(){return E(this.gridOptions.deltaRowDataMode)};e.prototype.isEnsureDomOrder=function(){return E(this.gridOptions.ensureDomOrder)};e.prototype.isEnableColResize=function(){return E(this.gridOptions.enableColResize)};e.prototype.isSingleClickEdit=function(){return E(this.gridOptions.singleClickEdit)};e.prototype.isSuppressClickEdit=function(){return E(this.gridOptions.suppressClickEdit)};e.prototype.isStopEditingWhenGridLosesFocus=function(){return E(this.gridOptions.stopEditingWhenGridLosesFocus)};e.prototype.getGroupDefaultExpanded=function(){return this.gridOptions.groupDefaultExpanded};e.prototype.getMaxConcurrentDatasourceRequests=function(){return this.gridOptions.maxConcurrentDatasourceRequests};e.prototype.getMaxBlocksInCache=function(){return this.gridOptions.maxBlocksInCache};e.prototype.getCacheOverflowSize=function(){return this.gridOptions.cacheOverflowSize};e.prototype.getPaginationPageSize=function(){return this.gridOptions.paginationPageSize};e.prototype.getCacheBlockSize=function(){return this.gridOptions.cacheBlockSize};e.prototype.getInfiniteInitialRowCount=function(){return this.gridOptions.infiniteInitialRowCount};e.prototype.isPurgeClosedRowNodes=function(){return E(this.gridOptions.purgeClosedRowNodes)};e.prototype.isSuppressPaginationPanel=function(){return E(this.gridOptions.suppressPaginationPanel)};e.prototype.getRowData=function(){return this.gridOptions.rowData};e.prototype.isGroupUseEntireRow=function(){return E(this.gridOptions.groupUseEntireRow)};e.prototype.isEnableRtl=function(){return E(this.gridOptions.enableRtl)};e.prototype.getAutoGroupColumnDef=function(){return this.gridOptions.autoGroupColumnDef};e.prototype.isGroupSuppressRow=function(){return E(this.gridOptions.groupSuppressRow)};e.prototype.getRowGroupPanelShow=function(){return this.gridOptions.rowGroupPanelShow};e.prototype.getPivotPanelShow=function(){return this.gridOptions.pivotPanelShow};e.prototype.isAngularCompileRows=function(){return E(this.gridOptions.angularCompileRows)};e.prototype.isAngularCompileFilters=function(){return E(this.gridOptions.angularCompileFilters)};e.prototype.isAngularCompileHeaders=function(){return E(this.gridOptions.angularCompileHeaders)};e.prototype.isDebug=function(){return E(this.gridOptions.debug)};e.prototype.getColumnDefs=function(){return this.gridOptions.columnDefs};e.prototype.getColumnTypes=function(){return this.gridOptions.columnTypes};e.prototype.getDatasource=function(){return this.gridOptions.datasource};e.prototype.getViewportDatasource=function(){return this.gridOptions.viewportDatasource};e.prototype.getServerSideDatasource=function(){return this.gridOptions.serverSideDatasource};e.prototype.isEnableSorting=function(){return E(this.gridOptions.enableSorting)||E(this.gridOptions.enableServerSideSorting)};e.prototype.isAccentedSort=function(){return E(this.gridOptions.accentedSort)};e.prototype.isEnableCellExpressions=function(){return E(this.gridOptions.enableCellExpressions)};e.prototype.isEnableGroupEdit=function(){return E(this.gridOptions.enableGroupEdit)};e.prototype.isSuppressMiddleClickScrolls=function(){return E(this.gridOptions.suppressMiddleClickScrolls)};e.prototype.isSuppressPreventDefaultOnMouseWheel=function(){return E(this.gridOptions.suppressPreventDefaultOnMouseWheel)};e.prototype.isSuppressColumnVirtualisation=function(){return E(this.gridOptions.suppressColumnVirtualisation)};e.prototype.isSuppressContextMenu=function(){return E(this.gridOptions.suppressContextMenu)};e.prototype.isAllowContextMenuWithControlKey=function(){return E(this.gridOptions.allowContextMenuWithControlKey)};e.prototype.isSuppressCopyRowsToClipboard=function(){return E(this.gridOptions.suppressCopyRowsToClipboard)};e.prototype.isSuppressClipboardPaste=function(){return E(this.gridOptions.suppressClipboardPaste)};e.prototype.isEnableFilter=function(){return E(this.gridOptions.enableFilter)||E(this.gridOptions.enableServerSideFilter)};e.prototype.isPagination=function(){return E(this.gridOptions.pagination)};e.prototype.isSuppressEnterpriseResetOnNewColumns=function(){return E(this.gridOptions.suppressEnterpriseResetOnNewColumns)};e.prototype.getProcessDataFromClipboardFunc=function(){return this.gridOptions.processDataFromClipboard};e.prototype.getBatchUpdateWaitMillis=function(){return p.Utils.exists(this.gridOptions.batchUpdateWaitMillis)?this.gridOptions.batchUpdateWaitMillis:s.Constants.BATCH_WAIT_MILLIS};e.prototype.isEnableServerSideFilter=function(){return this.gridOptions.enableServerSideFilter};e.prototype.isEnableServerSideSorting=function(){return E(this.gridOptions.enableServerSideSorting)};e.prototype.isSuppressMovableColumns=function(){return E(this.gridOptions.suppressMovableColumns)};e.prototype.isAnimateRows=function(){if(this.isEnsureDomOrder()){return false}return E(this.gridOptions.animateRows)};e.prototype.isSuppressColumnMoveAnimation=function(){return E(this.gridOptions.suppressColumnMoveAnimation)};e.prototype.isSuppressAggFuncInHeader=function(){return E(this.gridOptions.suppressAggFuncInHeader)};e.prototype.isSuppressAggAtRootLevel=function(){return E(this.gridOptions.suppressAggAtRootLevel)};e.prototype.isEnableRangeSelection=function(){return E(this.gridOptions.enableRangeSelection)};e.prototype.isSuppressMultiRangeSelection=function(){return E(this.gridOptions.suppressMultiRangeSelection)};e.prototype.isPaginationAutoPageSize=function(){return E(this.gridOptions.paginationAutoPageSize)};e.prototype.isRememberGroupStateWhenNewData=function(){return E(this.gridOptions.rememberGroupStateWhenNewData)};e.prototype.getIcons=function(){return this.gridOptions.icons};e.prototype.getAggFuncs=function(){return this.gridOptions.aggFuncs};e.prototype.getSortingOrder=function(){return this.gridOptions.sortingOrder};e.prototype.getAlignedGrids=function(){return this.gridOptions.alignedGrids};e.prototype.isMasterDetail=function(){var e=this;var t=E(this.gridOptions.masterDetail);p.Utils.doOnce((function(){if(t&&!e.enterprise){console.warn("ag-grid: Master Detail is an Enterprise feature of ag-Grid.")}}),"MasterDetailEnterpriseCheck");return t&&this.enterprise};e.prototype.getIsRowMasterFunc=function(){return this.gridOptions.isRowMaster};e.prototype.getIsRowSelectableFunc=function(){return this.gridOptions.isRowSelectable};e.prototype.getGroupRowRendererParams=function(){return this.gridOptions.groupRowRendererParams};e.prototype.getOverlayLoadingTemplate=function(){return this.gridOptions.overlayLoadingTemplate};e.prototype.getOverlayNoRowsTemplate=function(){return this.gridOptions.overlayNoRowsTemplate};e.prototype.isSuppressAutoSize=function(){return E(this.gridOptions.suppressAutoSize)};e.prototype.isSuppressParentsInRowNodes=function(){return E(this.gridOptions.suppressParentsInRowNodes)};e.prototype.isEnableStatusBar=function(){return E(this.gridOptions.enableStatusBar)};e.prototype.isAlwaysShowStatusBar=function(){return E(this.gridOptions.alwaysShowStatusBar)};e.prototype.isFunctionsReadOnly=function(){return E(this.gridOptions.functionsReadOnly)};e.prototype.isFloatingFilter=function(){return this.gridOptions.floatingFilter};e.prototype.isEnableOldSetFilterModel=function(){return E(this.gridOptions.enableOldSetFilterModel)};e.prototype.getDefaultColDef=function(){return this.gridOptions.defaultColDef};e.prototype.getDefaultColGroupDef=function(){return this.gridOptions.defaultColGroupDef};e.prototype.getDefaultExportParams=function(){return this.gridOptions.defaultExportParams};e.prototype.isSuppressCsvExport=function(){return E(this.gridOptions.suppressCsvExport)};e.prototype.isSuppressExcelExport=function(){return E(this.gridOptions.suppressExcelExport)};e.prototype.isSuppressMakeColumnVisibleAfterUnGroup=function(){return E(this.gridOptions.suppressMakeColumnVisibleAfterUnGroup)};e.prototype.getNodeChildDetailsFunc=function(){return this.gridOptions.getNodeChildDetails};e.prototype.getDataPathFunc=function(){return this.gridOptions.getDataPath};e.prototype.getGroupRowAggNodesFunc=function(){return this.gridOptions.groupRowAggNodes};e.prototype.getContextMenuItemsFunc=function(){return this.gridOptions.getContextMenuItems};e.prototype.getMainMenuItemsFunc=function(){return this.gridOptions.getMainMenuItems};e.prototype.getRowNodeIdFunc=function(){return this.gridOptions.getRowNodeId};e.prototype.getNavigateToNextCellFunc=function(){return this.gridOptions.navigateToNextCell};e.prototype.getTabToNextCellFunc=function(){return this.gridOptions.tabToNextCell};e.prototype.isTreeData=function(){return E(this.gridOptions.treeData)};e.prototype.isValueCache=function(){return E(this.gridOptions.valueCache)};e.prototype.isValueCacheNeverExpires=function(){return E(this.gridOptions.valueCacheNeverExpires)};e.prototype.isAggregateOnlyChangedColumns=function(){return E(this.gridOptions.aggregateOnlyChangedColumns)};e.prototype.getProcessSecondaryColDefFunc=function(){return this.gridOptions.processSecondaryColDef};e.prototype.getProcessSecondaryColGroupDefFunc=function(){return this.gridOptions.processSecondaryColGroupDef};e.prototype.getSendToClipboardFunc=function(){return this.gridOptions.sendToClipboard};e.prototype.getProcessRowPostCreateFunc=function(){return this.gridOptions.processRowPostCreate};e.prototype.getProcessCellForClipboardFunc=function(){return this.gridOptions.processCellForClipboard};e.prototype.getProcessHeaderForClipboardFunc=function(){return this.gridOptions.processHeaderForClipboard};e.prototype.getProcessCellFromClipboardFunc=function(){return this.gridOptions.processCellFromClipboard};e.prototype.getViewportRowModelPageSize=function(){return T(this.gridOptions.viewportRowModelPageSize,w)};e.prototype.getViewportRowModelBufferSize=function(){return x(this.gridOptions.viewportRowModelBufferSize,C)};e.prototype.getPostSortFunc=function(){return this.gridOptions.postSort};e.prototype.getClipboardDeliminator=function(){return p.Utils.exists(this.gridOptions.clipboardDeliminator)?this.gridOptions.clipboardDeliminator:"\t"};e.prototype.setProperty=function(e,t){var i=this.gridOptions;var n=i[e];if(n!==t){i[e]=t;var r={type:e,currentValue:t,previousValue:n};this.propertyEventService.dispatchEvent(r)}};e.prototype.addEventListener=function(e,i){t.checkEventDeprecation(e);this.propertyEventService.addEventListener(e,i)};e.checkEventDeprecation=function(e){if(e===v.Events.DEPRECATED_EVENT_GRID_SIZE_CHANGED){console.warn("ag-Grid: Since ag-Grid v18 event "+v.Events.DEPRECATED_EVENT_GRID_SIZE_CHANGED+" no longer exists.")}if(e==="floatingRowDataChanged"){console.warn("ag-Grid: floatingRowDataChanged is now called pinnedRowDataChanged")}};e.prototype.removeEventListener=function(e,t){this.propertyEventService.removeEventListener(e,t)};e.prototype.getAutoSizePadding=function(){return this.gridOptions.autoSizePadding>0?this.gridOptions.autoSizePadding:20};e.prototype.getHeaderHeight=function(){if(typeof this.gridOptions.headerHeight==="number"){return this.gridOptions.headerHeight}else{return this.specialForNewMaterial(25,"headerHeight")}};e.prototype.getFloatingFiltersHeight=function(){if(typeof this.gridOptions.floatingFiltersHeight==="number"){return this.gridOptions.floatingFiltersHeight}else{return this.specialForNewMaterial(25,"headerHeight")}};e.prototype.getGroupHeaderHeight=function(){if(typeof this.gridOptions.groupHeaderHeight==="number"){return this.gridOptions.groupHeaderHeight}else{return this.getHeaderHeight()}};e.prototype.getPivotHeaderHeight=function(){if(typeof this.gridOptions.pivotHeaderHeight==="number"){return this.gridOptions.pivotHeaderHeight}else{return this.getHeaderHeight()}};e.prototype.getPivotGroupHeaderHeight=function(){if(typeof this.gridOptions.pivotGroupHeaderHeight==="number"){return this.gridOptions.pivotGroupHeaderHeight}else{return this.getGroupHeaderHeight()}};e.prototype.isExternalFilterPresent=function(){if(typeof this.gridOptions.isExternalFilterPresent==="function"){return this.gridOptions.isExternalFilterPresent()}else{return false}};e.prototype.doesExternalFilterPass=function(e){if(typeof this.gridOptions.doesExternalFilterPass==="function"){return this.gridOptions.doesExternalFilterPass(e)}else{return false}};e.prototype.getDocument=function(){var e;if(p.Utils.exists(this.gridOptions.getDocument)){e=this.gridOptions.getDocument()}if(p.Utils.exists(e)){return e}else{return document}};e.prototype.getLayoutInterval=function(){if(typeof this.gridOptions.layoutInterval==="number"){return this.gridOptions.layoutInterval}else{return s.Constants.LAYOUT_INTERVAL}};e.prototype.getMinColWidth=function(){if(this.gridOptions.minColWidth>t.MIN_COL_WIDTH){return this.gridOptions.minColWidth}else{return t.MIN_COL_WIDTH}};e.prototype.getMaxColWidth=function(){if(this.gridOptions.maxColWidth>t.MIN_COL_WIDTH){return this.gridOptions.maxColWidth}else{return null}};e.prototype.getColWidth=function(){if(typeof this.gridOptions.colWidth!=="number"||this.gridOptions.colWidth<t.MIN_COL_WIDTH){return 200}else{return this.gridOptions.colWidth}};e.prototype.getRowBuffer=function(){if(typeof this.gridOptions.rowBuffer==="number"){if(this.gridOptions.rowBuffer<0){console.warn("ag-Grid: rowBuffer should not be negative")}return this.gridOptions.rowBuffer}else{return s.Constants.ROW_BUFFER_SIZE}};e.prototype.getScrollbarWidth=function(){var e=this.gridOptions.scrollbarWidth;if(typeof e!=="number"||e<0){e=p.Utils.getScrollbarWidth()}return e};e.prototype.checkForDeprecated=function(){var e=this.gridOptions;if(e.suppressUnSort){console.warn("ag-grid: as of v1.12.4 suppressUnSort is not used. Please use sortingOrder instead.")}if(e.suppressDescSort){console.warn("ag-grid: as of v1.12.4 suppressDescSort is not used. Please use sortingOrder instead.")}if(e.groupAggFields){console.warn("ag-grid: as of v3 groupAggFields is not used. Please add appropriate agg fields to your columns.")}if(e.groupHidePivotColumns){console.warn("ag-grid: as of v3 groupHidePivotColumns is not used as pivot columns are now called rowGroup columns. Please refer to the documentation")}if(e.groupKeys){console.warn("ag-grid: as of v3 groupKeys is not used. You need to set rowGroupIndex on the columns to group. Please refer to the documentation")}if(typeof e.groupDefaultExpanded==="boolean"){console.warn("ag-grid: groupDefaultExpanded can no longer be boolean. for groupDefaultExpanded=true, use groupDefaultExpanded=9999 instead, to expand all the groups")}if(e.onRowDeselected||e.rowDeselected){console.warn("ag-grid: since version 3.4 event rowDeselected no longer exists, please check the docs")}if(e.rowsAlreadyGrouped){console.warn("ag-grid: since version 3.4 rowsAlreadyGrouped no longer exists, please use getNodeChildDetails() instead")}if(e.groupAggFunction){console.warn("ag-grid: since version 4.3.x groupAggFunction is now called groupRowAggNodes")}if(e.checkboxSelection){console.warn("ag-grid: since version 8.0.x checkboxSelection is not supported as a grid option. "+"If you want this on all columns, use defaultColDef instead and set it there")}if(e.paginationInitialRowCount){console.warn("ag-grid: since version 9.0.x paginationInitialRowCount is now called infiniteInitialRowCount")}if(e.infinitePageSize){console.warn("ag-grid: since version 9.0.x infinitePageSize is now called cacheBlockSize")}if(e.infiniteBlockSize){console.warn("ag-grid: since version 10.0.x infiniteBlockSize is now called cacheBlockSize")}if(e.maxPagesInCache){console.warn("ag-grid: since version 10.0.x maxPagesInCache is now called maxBlocksInCache")}if(e.paginationOverflowSize){console.warn("ag-grid: since version 10.0.x paginationOverflowSize is now called cacheOverflowSize")}if(e.forPrint){console.warn('ag-grid: since version 10.1.x, use property domLayout="forPrint" instead of forPrint=true')}if(e.suppressMenuFilterPanel){console.warn("ag-grid: since version 11.0.x, use property colDef.menuTabs=['generalMenuTab','columnsMenuTab'] instead of suppressMenuFilterPanel=true")}if(e.suppressMenuMainPanel){console.warn("ag-grid: since version 11.0.x, use property colDef.menuTabs=['filterMenuTab','columnsMenuTab'] instead of suppressMenuMainPanel=true")}if(e.suppressMenuColumnPanel){console.warn("ag-grid: since version 11.0.x, use property colDef.menuTabs=['generalMenuTab','filterMenuTab'] instead of suppressMenuColumnPanel=true")}if(e.suppressUseColIdForGroups){console.warn("ag-grid: since version 11.0.x, this is not in use anymore. You should be able to remove it from your definition")}if(e.groupColumnDef){console.warn("ag-grid: since version 11.0.x, groupColumnDef has been renamed, this property is now called autoGroupColumnDef. Please change your configuration accordingly")}if(e.slaveGrids){console.warn("ag-grid: since version 12.x, slaveGrids has been renamed, this property is now called alignedGrids. Please change your configuration accordingly")}if(e.floatingTopRowData){console.warn("ag-grid: since version 12.x, floatingTopRowData is now called pinnedTopRowData")}if(e.floatingBottomRowData){console.warn("ag-grid: since version 12.x, floatingBottomRowData is now called pinnedBottomRowData")}if(e.paginationStartPage){console.warn("ag-grid: since version 12.x, paginationStartPage is gone, please call api.paginationGoToPage("+e.paginationStartPage+") instead.")}if(e.getHeaderCellTemplate){console.warn("ag-grid: since version 15.x, getHeaderCellTemplate is gone, please check the header documentation on how to set header templates.")}if(e.headerCellTemplate){console.warn("ag-grid: since version 15.x, headerCellTemplate is gone, please check the header documentation on how to set header templates.")}if(e.headerCellRenderer){console.warn("ag-grid: since version 15.x, headerCellRenderer is gone, please check the header documentation on how to set header templates.")}if(e.angularCompileHeaders){console.warn("ag-grid: since version 15.x, angularCompileHeaders is gone, please see the getting started for Angular 1 docs to see how to do headers in Angular 1.x.")}if(e.domLayout==="forPrint"){console.warn("ag-grid: since version 18.x, forPrint is no longer supported, as same can be achieved using autoHeight (and set the grid width accordingly). please use autoHeight instead.")}if(e.domLayout==="autoHeight"){console.warn("ag-grid: since version 18.x, domLayout is gone, instead if doing auto-height, set gridAutoHeight=true.");e.gridAutoHeight=true}if(e.pivotTotals){console.warn("ag-grid: since version 18.x, pivotTotals has been removed, instead if using pivotTotals, set pivotColumnGroupTotals='before'|'after'.");e.pivotColumnGroupTotals="before"}if(e.rowModelType==="inMemory"){console.warn("ag-grid: since version 18.x, The In Memory Row Model has been renamed to the Client Side Row Model, set rowModelType='clientSide' instead.");e.rowModelType="clientSide"}if(e.rowModelType==="enterprise"){console.warn("ag-grid: since version 18.x, The Enterprise Row Model has been renamed to the Server Side Row Model, set rowModelType='serverSide' instead.");e.rowModelType="serverSide"}};e.prototype.getLocaleTextFunc=function(){if(this.gridOptions.localeTextFunc){return this.gridOptions.localeTextFunc}var e=this;return function(t,i){var n=e.gridOptions.localeText;if(n&&n[t]){return n[t]}else{return i}}};e.prototype.globalEventHandler=function(e,t){var i=l.ComponentUtil.getCallbackForEvent(e);if(typeof this.gridOptions[i]==="function"){this.gridOptions[i](t)}};e.prototype.getRowHeightAsNumber=function(){var e=this.gridOptions.rowHeight;if(p.Utils.missing(e)){return this.getDefaultRowHeight()}else if(this.isNumeric(this.gridOptions.rowHeight)){return this.gridOptions.rowHeight}else{console.warn("ag-Grid row height must be a number if not using standard row model");return this.getDefaultRowHeight()}};e.prototype.getRowHeightForNode=function(e){if(typeof this.gridOptions.getRowHeight==="function"){var t={node:e,data:e.data,api:this.gridOptions.api,context:this.gridOptions.context};return this.gridOptions.getRowHeight(t)}else if(e.detail&&this.isMasterDetail()){if(this.isNumeric(this.gridOptions.detailRowHeight)){return this.gridOptions.detailRowHeight}else{return _}}else{var i=this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:this.getDefaultRowHeight();if(this.columnController.isAutoRowHeightActive()){var n=this.autoHeightCalculator.getPreferredHeightForRow(e);if(n>i){return n}else{return i}}else{return i}}};e.prototype.isDynamicRowHeight=function(){return typeof this.gridOptions.getRowHeight==="function"};e.prototype.getVirtualItemHeight=function(){return this.specialForNewMaterial(20,"virtualItemHeight")};e.prototype.isNumeric=function(e){return!isNaN(e)&&typeof e==="number"};e.prototype.specialForNewMaterial=function(e,t){var i=this.environment.getTheme();if(i.indexOf("ag-theme")===0){return this.environment.getSassVariable(i,t)}else{return e}};e.prototype.getDefaultRowHeight=function(){return this.specialForNewMaterial(b,"rowHeight")};e.MIN_COL_WIDTH=10;e.PROP_HEADER_HEIGHT="headerHeight";e.PROP_GROUP_REMOVE_SINGLE_CHILDREN="groupRemoveSingleChildren";e.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN="groupRemoveLowestSingleChildren";e.PROP_PIVOT_HEADER_HEIGHT="pivotHeaderHeight";e.PROP_SUPPRESS_CLIPBOARD_PASTE="suppressClipboardPaste";e.PROP_GROUP_HEADER_HEIGHT="groupHeaderHeight";e.PROP_PIVOT_GROUP_HEADER_HEIGHT="pivotGroupHeaderHeight";e.PROP_FLOATING_FILTERS_HEIGHT="floatingFiltersHeight";e.PROP_SUPPRESS_ROW_DRAG="suppressRowDrag";e.PROP_POPUP_PARENT="popupParent";e.PROP_GRID_AUTO_HEIGHT="gridAutoHeight";n([c.Autowired("gridOptions"),r("design:type",Object)],e.prototype,"gridOptions",void 0);n([c.Autowired("columnController"),r("design:type",f.ColumnController)],e.prototype,"columnController",void 0);n([c.Autowired("eventService"),r("design:type",a.EventService)],e.prototype,"eventService",void 0);n([c.Autowired("enterprise"),r("design:type",Boolean)],e.prototype,"enterprise",void 0);n([c.Autowired("frameworkFactory"),r("design:type",Object)],e.prototype,"frameworkFactory",void 0);n([c.Autowired("gridApi"),r("design:type",u.GridApi)],e.prototype,"gridApi",void 0);n([c.Autowired("columnApi"),r("design:type",d.ColumnApi)],e.prototype,"columnApi",void 0);n([c.Autowired("environment"),r("design:type",h.Environment)],e.prototype,"environment",void 0);n([c.Autowired("autoHeightCalculator"),r("design:type",y.AutoHeightCalculator)],e.prototype,"autoHeightCalculator",void 0);n([o(0,c.Qualifier("gridApi")),o(1,c.Qualifier("columnApi")),r("design:type",Function),r("design:paramtypes",[u.GridApi,d.ColumnApi]),r("design:returntype",void 0)],e.prototype,"agWire",null);n([c.PreDestroy,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"destroy",null);n([c.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);e=t=n([c.Bean("gridOptionsWrapper")],e);return e;var t}();t.GridOptionsWrapper=S},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var o=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:true});var a=i(12);var s=i(1);var l=i(0);var u=i(0);var c=i(2);var d=function(){function e(){this.allSyncListeners={};this.allAsyncListeners={};this.globalSyncListeners=[];this.globalAsyncListeners=[];this.asyncFunctionsQueue=[];this.scheduled=false}t=e;e.prototype.setBeans=function(e,t,i){if(i===void 0){i=null}this.logger=e.create("EventService");if(i){var n=t.useAsyncEvents();this.addGlobalListener(i,n)}};e.prototype.getListenerList=function(e,t){var i=t?this.allAsyncListeners:this.allSyncListeners;var n=i[e];if(!n){n=[];i[e]=n}return n};e.prototype.addEventListener=function(e,t,i){if(i===void 0){i=false}var n=this.getListenerList(e,i);if(n.indexOf(t)<0){n.push(t)}};e.prototype.addModalPriorityEventListener=function(e,i,n){if(n===void 0){n=false}this.addEventListener(e+t.PRIORITY,i,n)};e.prototype.addGlobalListener=function(e,t){if(t===void 0){t=false}if(t){this.globalAsyncListeners.push(e)}else{this.globalSyncListeners.push(e)}};e.prototype.removeEventListener=function(e,t,i){if(i===void 0){i=false}var n=this.getListenerList(e,i);s.Utils.removeFromArray(n,t)};e.prototype.removeGlobalListener=function(e,t){if(t===void 0){t=false}if(t){s.Utils.removeFromArray(this.globalAsyncListeners,e)}else{s.Utils.removeFromArray(this.globalSyncListeners,e)}};e.prototype.dispatchEvent=function(e){this.dispatchToListeners(e,true);this.dispatchToListeners(e,false)};e.prototype.dispatchToListeners=function(e,i){var n=this;var r=i?this.globalAsyncListeners:this.globalSyncListeners;var o=e.type;var a=this.getListenerList(o+t.PRIORITY,i);s.Utils.forEachSnapshotFirst(a,(function(t){if(i){n.dispatchAsync((function(){return t(e)}))}else{t(e)}}));var l=this.getListenerList(o,i);s.Utils.forEachSnapshotFirst(l,(function(t){if(i){n.dispatchAsync((function(){return t(e)}))}else{t(e)}}));s.Utils.forEachSnapshotFirst(r,(function(t){if(i){n.dispatchAsync((function(){return t(o,e)}))}else{t(o,e)}}))};e.prototype.dispatchAsync=function(e){this.asyncFunctionsQueue.push(e);if(!this.scheduled){setTimeout(this.flushAsyncQueue.bind(this),0);this.scheduled=true}};e.prototype.flushAsyncQueue=function(){this.scheduled=false;var e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[];e.forEach((function(e){return e()}))};e.PRIORITY="-P1";n([o(0,u.Qualifier("loggerFactory")),o(1,u.Qualifier("gridOptionsWrapper")),o(2,u.Qualifier("globalEventListener")),r("design:type",Function),r("design:paramtypes",[a.LoggerFactory,c.GridOptionsWrapper,Function]),r("design:returntype",void 0)],e.prototype,"setBeans",null);e=t=n([l.Bean("eventService")],e);return e;var t}();t.EventService=d},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var o=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:true});var a=i(1);var s=i(26);var l=i(10);var u=i(2);var c=i(19);var d=i(38);var f=i(48);var p=i(39);var h=i(3);var g=i(31);var m=i(12);var v=i(5);var y=i(32);var b=i(83);var _=i(0);var w=i(53);var C=i(104);var A=i(33);var E=i(6);var x=i(7);var T=function(){function e(){this.primaryHeaderRowCount=0;this.secondaryHeaderRowCount=0;this.secondaryColumnsPresent=false;this.gridHeaderRowCount=0;this.displayedLeftColumns=[];this.displayedRightColumns=[];this.displayedCenterColumns=[];this.allDisplayedColumns=[];this.allDisplayedVirtualColumns=[];this.allDisplayedCenterVirtualColumns=[];this.rowGroupColumns=[];this.valueColumns=[];this.pivotColumns=[];this.ready=false;this.autoGroupsNeedBuilding=false;this.pivotMode=false;this.bodyWidth=0;this.leftWidth=0;this.rightWidth=0;this.bodyWidthDirty=true}e.prototype.init=function(){var e=this.gridOptionsWrapper.isPivotMode();this.suppressColumnVirtualisation=this.gridOptionsWrapper.isSuppressColumnVirtualisation();if(this.isPivotSettingAllowed(e)){this.pivotMode=e}this.usingTreeData=this.gridOptionsWrapper.isTreeData()};e.prototype.isAutoRowHeightActive=function(){return this.autoRowHeightColumns&&this.autoRowHeightColumns.length>0};e.prototype.getAllAutoRowHeightCols=function(){return this.autoRowHeightColumns};e.prototype.setVirtualViewportLeftAndRight=function(){if(this.gridOptionsWrapper.isEnableRtl()){this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth;this.viewportRight=this.bodyWidth-this.scrollPosition}else{this.viewportLeft=this.scrollPosition;this.viewportRight=this.scrollWidth+this.scrollPosition}};e.prototype.getDisplayedColumnsStartingAt=function(e){var t=e;var i=[];while(a.Utils.exists(t)){i.push(t);t=this.getDisplayedColAfter(t)}return i};e.prototype.checkDisplayedVirtualColumns=function(){if(a.Utils.exists(this.displayedCenterColumns)){var e=this.allDisplayedVirtualColumns.map((function(e){return e.getId()})).join("#");this.updateVirtualSets();var t=this.allDisplayedVirtualColumns.map((function(e){return e.getId()})).join("#");if(e!==t){var i={type:v.Events.EVENT_VIRTUAL_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(i)}}};e.prototype.setVirtualViewportPosition=function(e,t){if(e!==this.scrollWidth||t!==this.scrollPosition||this.bodyWidthDirty){this.scrollWidth=e;this.scrollPosition=t;this.bodyWidthDirty=true;this.setVirtualViewportLeftAndRight();if(this.ready){this.checkDisplayedVirtualColumns()}}};e.prototype.isPivotMode=function(){return this.pivotMode};e.prototype.isPivotSettingAllowed=function(e){if(e){if(this.gridOptionsWrapper.isTreeData()){console.warn("ag-Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'");return false}else{return true}}else{return true}};e.prototype.setPivotMode=function(e,t){if(t===void 0){t="api"}if(e===this.pivotMode){return}if(!this.isPivotSettingAllowed(this.pivotMode)){return}this.pivotMode=e;this.updateDisplayedColumns(t);var i={type:v.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(i)};e.prototype.getSecondaryPivotColumn=function(e,t){if(!this.secondaryColumnsPresent){return null}var i=this.getPrimaryColumn(t);var n=null;this.secondaryColumns.forEach((function(t){var r=t.getColDef().pivotKeys;var o=t.getColDef().pivotValueColumn;var s=a.Utils.compareArrays(r,e);var l=o===i;if(s&&l){n=t}}));return n};e.prototype.setBeans=function(e){this.logger=e.create("ColumnController")};e.prototype.setFirstRightAndLastLeftPinned=function(e){var t;var i;if(this.gridOptionsWrapper.isEnableRtl()){t=this.displayedLeftColumns?this.displayedLeftColumns[0]:null;i=this.displayedRightColumns?this.displayedRightColumns[this.displayedRightColumns.length-1]:null}else{t=this.displayedLeftColumns?this.displayedLeftColumns[this.displayedLeftColumns.length-1]:null;i=this.displayedRightColumns?this.displayedRightColumns[0]:null}this.gridColumns.forEach((function(n){n.setLastLeftPinned(n===t,e);n.setFirstRightPinned(n===i,e)}))};e.prototype.autoSizeColumns=function(e,t){var i=this;if(t===void 0){t="api"}var n=[];var r=-1;while(r!==0){r=0;this.actionOnGridColumns(e,(function(e){if(n.indexOf(e)>=0){return}var o=i.autoWidthCalculator.getPreferredWidthForColumn(e);if(o>0){var a=i.normaliseColumnWidth(e,o);e.setActualWidth(a,t);n.push(e);r++}return true}),t)}if(n.length>0){var o={type:v.Events.EVENT_COLUMN_RESIZED,columns:n,column:n.length===1?n[0]:null,finished:true,api:this.gridApi,columnApi:this.columnApi,source:"autosizeColumns"};this.eventService.dispatchEvent(o)}};e.prototype.autoSizeColumn=function(e,t){if(t===void 0){t="api"}this.autoSizeColumns([e],t)};e.prototype.autoSizeAllColumns=function(e){if(e===void 0){e="api"}var t=this.getAllDisplayedColumns();this.autoSizeColumns(t,e)};e.prototype.getColumnsFromTree=function(e){var t=[];i(e);return t;function i(e){for(var n=0;n<e.length;n++){var r=e[n];if(r instanceof l.Column){t.push(r)}else if(r instanceof y.OriginalColumnGroup){i(r.getChildren())}}}};e.prototype.getAllDisplayedColumnGroups=function(){if(this.displayedLeftColumnTree&&this.displayedRightColumnTree&&this.displayedCentreColumnTree){return this.displayedLeftColumnTree.concat(this.displayedCentreColumnTree).concat(this.displayedRightColumnTree)}else{return null}};e.prototype.getPrimaryColumnTree=function(){return this.primaryBalancedTree};e.prototype.getHeaderRowCount=function(){return this.gridHeaderRowCount};e.prototype.getLeftDisplayedColumnGroups=function(){return this.displayedLeftColumnTree};e.prototype.getRightDisplayedColumnGroups=function(){return this.displayedRightColumnTree};e.prototype.getCenterDisplayedColumnGroups=function(){return this.displayedCentreColumnTree};e.prototype.getDisplayedColumnGroups=function(e){switch(e){case l.Column.PINNED_LEFT:return this.getLeftDisplayedColumnGroups();case l.Column.PINNED_RIGHT:return this.getRightDisplayedColumnGroups();default:return this.getCenterDisplayedColumnGroups()}};e.prototype.isColumnDisplayed=function(e){return this.getAllDisplayedColumns().indexOf(e)>=0};e.prototype.getAllDisplayedColumns=function(){return this.allDisplayedColumns};e.prototype.getAllDisplayedVirtualColumns=function(){return this.allDisplayedVirtualColumns};e.prototype.getDisplayedLeftColumnsForRow=function(e){if(!this.colSpanActive){return this.displayedLeftColumns}else{return this.getDisplayedColumnsForRow(e,this.displayedLeftColumns)}};e.prototype.getDisplayedRightColumnsForRow=function(e){if(!this.colSpanActive){return this.displayedRightColumns}else{return this.getDisplayedColumnsForRow(e,this.displayedRightColumns)}};e.prototype.getDisplayedColumnsForRow=function(e,t,i,n){var r=[];var o=null;var a=function(a){var l=t[a];var u=l.getColSpan(e);var c=[l];if(u>1){var d=u-1;for(var f=1;f<=d;f++){c.push(t[a+f])}a+=d}var p;if(i){p=false;c.forEach((function(e){if(i(e))p=true}))}else{p=true}if(p){if(r.length===0&&o){var h=n?n(l):false;if(h){r.push(o)}}r.push(l)}o=l;s=a};var s;for(var l=0;l<t.length;l++){a(l);l=s}return r};e.prototype.getAllDisplayedCenterVirtualColumnsForRow=function(e){var t=this;if(!this.colSpanActive){return this.allDisplayedCenterVirtualColumns}var i=function(e){return e.getLeft()>t.viewportLeft};var n=this.suppressColumnVirtualisation?null:this.isColumnInViewport.bind(this);return this.getDisplayedColumnsForRow(e,this.displayedCenterColumns,n,i)};e.prototype.isColumnInViewport=function(e){var t=e.getLeft();var i=e.getLeft()+e.getActualWidth();var n=t<this.viewportLeft&&i<this.viewportLeft;var r=t>this.viewportRight&&i>this.viewportRight;return!n&&!r};e.prototype.getPinnedLeftContainerWidth=function(){return this.getWidthOfColsInList(this.displayedLeftColumns)};e.prototype.getPinnedRightContainerWidth=function(){return this.getWidthOfColsInList(this.displayedRightColumns)};e.prototype.updatePrimaryColumnList=function(e,t,i,n,r,o){var s=this;if(o===void 0){o="api"}if(a.Utils.missingOrEmpty(e)){return}var l=false;e.forEach((function(e){var r=s.getPrimaryColumn(e);if(!r){return}if(i){if(t.indexOf(r)>=0){return}t.push(r)}else{if(t.indexOf(r)<0){return}a.Utils.removeFromArray(t,r)}n(r);l=true}));if(!l){return}if(this.autoGroupsNeedBuilding){this.updateGridColumns()}this.updateDisplayedColumns(o);var u={type:r,columns:t,column:t.length===1?t[0]:null,api:this.gridApi,columnApi:this.columnApi,source:o};this.eventService.dispatchEvent(u)};e.prototype.setRowGroupColumns=function(e,t){if(t===void 0){t="api"}this.autoGroupsNeedBuilding=true;this.setPrimaryColumnList(e,this.rowGroupColumns,v.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.setRowGroupActive.bind(this),t)};e.prototype.setRowGroupActive=function(e,t,i){if(e===t.isRowGroupActive()){return}t.setRowGroupActive(e,i);if(!e&&!this.gridOptionsWrapper.isSuppressMakeColumnVisibleAfterUnGroup()){t.setVisible(true,i)}};e.prototype.addRowGroupColumn=function(e,t){if(t===void 0){t="api"}this.addRowGroupColumns([e],t)};e.prototype.addRowGroupColumns=function(e,t){if(t===void 0){t="api"}this.autoGroupsNeedBuilding=true;this.updatePrimaryColumnList(e,this.rowGroupColumns,true,this.setRowGroupActive.bind(this,true),v.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,t)};e.prototype.removeRowGroupColumns=function(e,t){if(t===void 0){t="api"}this.autoGroupsNeedBuilding=true;this.updatePrimaryColumnList(e,this.rowGroupColumns,false,this.setRowGroupActive.bind(this,false),v.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,t)};e.prototype.removeRowGroupColumn=function(e,t){if(t===void 0){t="api"}this.removeRowGroupColumns([e],t)};e.prototype.addPivotColumns=function(e,t){if(t===void 0){t="api"}this.updatePrimaryColumnList(e,this.pivotColumns,true,(function(e){return e.setPivotActive(true,t)}),v.Events.EVENT_COLUMN_PIVOT_CHANGED,t)};e.prototype.setPivotColumns=function(e,t){if(t===void 0){t="api"}this.setPrimaryColumnList(e,this.pivotColumns,v.Events.EVENT_COLUMN_PIVOT_CHANGED,(function(e,i){i.setPivotActive(e,t)}),t)};e.prototype.addPivotColumn=function(e,t){if(t===void 0){t="api"}this.addPivotColumns([e],t)};e.prototype.removePivotColumns=function(e,t){if(t===void 0){t="api"}this.updatePrimaryColumnList(e,this.pivotColumns,false,(function(e){return e.setPivotActive(false,t)}),v.Events.EVENT_COLUMN_PIVOT_CHANGED,t)};e.prototype.removePivotColumn=function(e,t){if(t===void 0){t="api"}this.removePivotColumns([e],t)};e.prototype.setPrimaryColumnList=function(e,t,i,n,r){var o=this;t.length=0;if(a.Utils.exists(e)){e.forEach((function(e){var i=o.getPrimaryColumn(e);t.push(i)}))}this.primaryColumns.forEach((function(e){var i=t.indexOf(e)>=0;n(i,e)}));if(this.autoGroupsNeedBuilding){this.updateGridColumns()}this.updateDisplayedColumns(r);var s={type:i,columns:t,column:t.length===1?t[0]:null,api:this.gridApi,columnApi:this.columnApi,source:r};this.eventService.dispatchEvent(s)};e.prototype.setValueColumns=function(e,t){if(t===void 0){t="api"}this.setPrimaryColumnList(e,this.valueColumns,v.Events.EVENT_COLUMN_VALUE_CHANGED,this.setValueActive.bind(this),t)};e.prototype.setValueActive=function(e,t,i){if(e===t.isValueActive()){return}t.setValueActive(e,i);if(e&&!t.getAggFunc()){var n=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(n)}};e.prototype.addValueColumns=function(e,t){if(t===void 0){t="api"}this.updatePrimaryColumnList(e,this.valueColumns,true,this.setValueActive.bind(this,true),v.Events.EVENT_COLUMN_VALUE_CHANGED,t)};e.prototype.addValueColumn=function(e,t){if(t===void 0){t="api"}this.addValueColumns([e],t)};e.prototype.removeValueColumn=function(e,t){if(t===void 0){t="api"}this.removeValueColumns([e],t)};e.prototype.removeValueColumns=function(e,t){if(t===void 0){t="api"}this.updatePrimaryColumnList(e,this.valueColumns,false,this.setValueActive.bind(this,false),v.Events.EVENT_COLUMN_VALUE_CHANGED,t)};e.prototype.normaliseColumnWidth=function(e,t){if(t<e.getMinWidth()){t=e.getMinWidth()}if(e.isGreaterThanMax(t)){t=e.getMaxWidth()}return t};e.prototype.getPrimaryOrGridColumn=function(e){var t=this.getPrimaryColumn(e);if(t){return t}else{return this.getGridColumn(e)}};e.prototype.setColumnWidth=function(e,t,i,n,r){if(r===void 0){r="api"}var o=this.getPrimaryOrGridColumn(e);if(!o){return}var a=[];a.push({width:t,ratios:[1],columns:[o]});if(i){var s=this.getDisplayedColAfter(o);if(!s){return}var l=o.getActualWidth()-t;var u=s.getActualWidth()+l;a.push({width:u,ratios:[1],columns:[s]})}this.resizeColumnSets(a,n,r)};e.prototype.checkMinAndMaxWidthsForSet=function(e){var t=e.columns,i=e.width;var n=0;var r=0;var o=true;t.forEach((function(e){n+=e.getMinWidth();if(e.getMaxWidth()>0){r+=e.getMaxWidth()}else{o=false}}));var a=i>=n;var s=!o||i<=r;return a&&s};e.prototype.resizeColumnSets=function(e,t,i){var n=a.Utils.every(e,this.checkMinAndMaxWidthsForSet.bind(this));if(!n){return}var r=[];var o=[];e.forEach((function(e){var t=e.width,i=e.columns,n=e.ratios;var a={};var s={};i.forEach((function(e){return o.push(e)}));var l=true;var u=0;var c=function(){u++;if(u>1e3){console.error("ag-Grid: infinite loop in resizeColumnSets");return"break"}l=false;var e=[];var r=[];var o=0;var c=t;i.forEach((function(t,i){var l=s[t.getId()];if(l){c-=a[t.getId()]}else{e.push(t);var u=n[i];o+=u;r.push(u)}}));var d=1/o;e.forEach((function(i,r){var o=r===e.length-1;var u;if(o){u=c}else{u=Math.round(n[r]*t*d);c-=u}if(u<i.getMinWidth()){u=i.getMinWidth();s[i.getId()]=true;l=true}else if(i.getMaxWidth()>0&&u>i.getMaxWidth()){u=i.getMaxWidth();s[i.getId()]=true;l=true}a[i.getId()]=u}))};while(l){var d=c();if(d==="break")break}i.forEach((function(e){var t=a[e.getId()];if(e.getActualWidth()!==t){e.setActualWidth(t);r.push(e)}}))}));var s=r.length>0;if(s){this.setLeftValues(i);this.updateBodyWidths();this.checkDisplayedVirtualColumns()}if(s||t){var l={type:v.Events.EVENT_COLUMN_RESIZED,columns:o,column:o.length===1?o[0]:null,finished:t,api:this.gridApi,columnApi:this.columnApi,source:i};this.eventService.dispatchEvent(l)}};e.prototype.setColumnAggFunc=function(e,t,i){if(i===void 0){i="api"}e.setAggFunc(t);var n={type:v.Events.EVENT_COLUMN_VALUE_CHANGED,columns:[e],column:e,api:this.gridApi,columnApi:this.columnApi,source:i};this.eventService.dispatchEvent(n)};e.prototype.moveRowGroupColumn=function(e,t,i){if(i===void 0){i="api"}var n=this.rowGroupColumns[e];this.rowGroupColumns.splice(e,1);this.rowGroupColumns.splice(t,0,n);var r={type:v.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:this.rowGroupColumns,column:this.rowGroupColumns.length===1?this.rowGroupColumns[0]:null,api:this.gridApi,columnApi:this.columnApi,source:i};this.eventService.dispatchEvent(r)};e.prototype.moveColumns=function(e,t,i){if(i===void 0){i="api"}this.columnAnimationService.start();if(t>this.gridColumns.length-e.length){console.warn("ag-Grid: tried to insert columns in invalid location, toIndex = "+t);console.warn("ag-Grid: remember that you should not count the moving columns when calculating the new index");return}var n=this.getGridColumns(e);var r=!this.doesMovePassRules(n,t);if(r){return}a.Utils.moveInArray(this.gridColumns,n,t);this.updateDisplayedColumns(i);var o={type:v.Events.EVENT_COLUMN_MOVED,columns:n,column:n.length===1?n[0]:null,toIndex:t,api:this.gridApi,columnApi:this.columnApi,source:i};this.eventService.dispatchEvent(o);this.columnAnimationService.finish()};e.prototype.doesMovePassRules=function(e,t){var i=this.gridColumns.slice();a.Utils.moveInArray(i,e,t);if(!this.doesMovePassMarryChildren(i)){return false}if(!this.doesMovePassLockedPositions(i)){return false}return true};e.prototype.doesMovePassLockedPositions=function(e){var t=false;var i=true;e.forEach((function(e){if(e.isLockPosition()){if(t){i=false}}else{t=true}}));return i};e.prototype.doesMovePassMarryChildren=function(e){var t=true;this.columnUtils.depthFirstOriginalTreeSearch(this.gridBalancedTree,(function(i){if(!(i instanceof y.OriginalColumnGroup)){return}var n=i;var r=n.getColGroupDef()&&n.getColGroupDef().marryChildren;if(!r){return}var o=[];n.getLeafColumns().forEach((function(t){var i=e.indexOf(t);o.push(i)}));var a=Math.max.apply(Math,o);var s=Math.min.apply(Math,o);var l=a-s;var u=n.getLeafColumns().length-1;if(l>u){t=false}}));return t};e.prototype.moveColumn=function(e,t,i){if(i===void 0){i="api"}this.moveColumns([e],t,i)};e.prototype.moveColumnByIndex=function(e,t,i){if(i===void 0){i="api"}var n=this.gridColumns[e];this.moveColumn(n,t,i)};e.prototype.getBodyContainerWidth=function(){return this.bodyWidth};e.prototype.getContainerWidth=function(e){switch(e){case l.Column.PINNED_LEFT:return this.leftWidth;case l.Column.PINNED_RIGHT:return this.rightWidth;default:return this.bodyWidth}};e.prototype.updateBodyWidths=function(){var e=this.getWidthOfColsInList(this.displayedCenterColumns);var t=this.getWidthOfColsInList(this.displayedLeftColumns);var i=this.getWidthOfColsInList(this.displayedRightColumns);this.bodyWidthDirty=this.bodyWidth!==e;var n=this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i;if(n){this.bodyWidth=e;this.leftWidth=t;this.rightWidth=i;var r={type:v.Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(r)}};e.prototype.getValueColumns=function(){return this.valueColumns?this.valueColumns:[]};e.prototype.getPivotColumns=function(){return this.pivotColumns?this.pivotColumns:[]};e.prototype.isPivotActive=function(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode};e.prototype.getRowGroupColumns=function(){return this.rowGroupColumns?this.rowGroupColumns:[]};e.prototype.getDisplayedCenterColumns=function(){return this.displayedCenterColumns};e.prototype.getDisplayedLeftColumns=function(){return this.displayedLeftColumns};e.prototype.getDisplayedRightColumns=function(){return this.displayedRightColumns};e.prototype.getDisplayedColumns=function(e){switch(e){case l.Column.PINNED_LEFT:return this.getDisplayedLeftColumns();case l.Column.PINNED_RIGHT:return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}};e.prototype.getAllPrimaryColumns=function(){return this.primaryColumns};e.prototype.getAllColumnsForQuickFilter=function(){return this.columnsForQuickFilter};e.prototype.getAllGridColumns=function(){return this.gridColumns};e.prototype.isEmpty=function(){return a.Utils.missingOrEmpty(this.gridColumns)};e.prototype.isRowGroupEmpty=function(){return a.Utils.missingOrEmpty(this.rowGroupColumns)};e.prototype.setColumnVisible=function(e,t,i){if(i===void 0){i="api"}this.setColumnsVisible([e],t,i)};e.prototype.setColumnsVisible=function(e,t,i){var n=this;if(i===void 0){i="api"}this.columnAnimationService.start();this.actionOnGridColumns(e,(function(e){if(e.isVisible()!==t){e.setVisible(t,i);return true}else{return false}}),i,(function(){var e={type:v.Events.EVENT_COLUMN_VISIBLE,visible:t,column:null,columns:null,api:n.gridApi,columnApi:n.columnApi,source:i};return e}));this.columnAnimationService.finish()};e.prototype.setColumnPinned=function(e,t,i){if(i===void 0){i="api"}this.setColumnsPinned([e],t,i)};e.prototype.setColumnsPinned=function(e,t,i){var n=this;if(i===void 0){i="api"}this.columnAnimationService.start();var r;if(t===true||t===l.Column.PINNED_LEFT){r=l.Column.PINNED_LEFT}else if(t===l.Column.PINNED_RIGHT){r=l.Column.PINNED_RIGHT}else{r=null}this.actionOnGridColumns(e,(function(e){if(e.getPinned()!==r){e.setPinned(r);return true}else{return false}}),i,(function(){var e={type:v.Events.EVENT_COLUMN_PINNED,pinned:r,column:null,columns:null,api:n.gridApi,columnApi:n.columnApi,source:i};return e}));this.columnAnimationService.finish()};e.prototype.actionOnGridColumns=function(e,t,i,n){var r=this;if(a.Utils.missingOrEmpty(e)){return}var o=[];e.forEach((function(e){var i=r.getGridColumn(e);if(!i){return}var n=t(i);if(n!==false){o.push(i)}}));if(o.length===0){return}this.updateDisplayedColumns(i);if(a.Utils.exists(n)){var s=n();s.columns=o;s.column=o.length===1?o[0]:null;this.eventService.dispatchEvent(s)}};e.prototype.getDisplayedColBefore=function(e){var t=this.getAllDisplayedColumns();var i=t.indexOf(e);if(i>0){return t[i-1]}else{return null}};e.prototype.getDisplayedColAfter=function(e){var t=this.getAllDisplayedColumns();var i=t.indexOf(e);if(i<t.length-1){return t[i+1]}else{return null}};e.prototype.getDisplayedGroupAfter=function(e){var t=e.getDisplayedLeafColumns()[0];var i=e.getOriginalColumnGroup().getLevel();while(true){t=this.getDisplayedColAfter(t);if(!t){return null}var n=t.getParent();while(n.getOriginalColumnGroup().getLevel()!==i){n=n.getParent()}if(n!==e){return n}}};e.prototype.isPinningLeft=function(){return this.displayedLeftColumns.length>0};e.prototype.isPinningRight=function(){return this.displayedRightColumns.length>0};e.prototype.getPrimaryAndSecondaryAndAutoColumns=function(){var e=this.primaryColumns?this.primaryColumns.slice(0):[];if(a.Utils.exists(this.groupAutoColumns)){this.groupAutoColumns.forEach((function(t){return e.push(t)}))}if(this.secondaryColumnsPresent){this.secondaryColumns.forEach((function(t){return e.push(t)}))}return e};e.prototype.createStateItemFromColumn=function(e){var t=e.isRowGroupActive()?this.rowGroupColumns.indexOf(e):null;var i=e.isPivotActive()?this.pivotColumns.indexOf(e):null;var n=e.isValueActive()?e.getAggFunc():null;return{colId:e.getColId(),hide:!e.isVisible(),aggFunc:n,width:e.getActualWidth(),pivotIndex:i,pinned:e.getPinned(),rowGroupIndex:t}};e.prototype.getColumnState=function(){if(a.Utils.missing(this.primaryColumns)){return[]}var e=this.primaryColumns.map(this.createStateItemFromColumn.bind(this));if(!this.pivotMode){this.orderColumnStateList(e)}return e};e.prototype.orderColumnStateList=function(e){var t=this.gridColumns.map((function(e){return e.getColId()}));e.sort((function(e,i){var n=t.indexOf(e.colId);var r=t.indexOf(i.colId);return n-r}))};e.prototype.resetColumnState=function(e){if(e===void 0){e="api"}var t=this.getColumnsFromTree(this.primaryBalancedTree);var i=[];if(t){t.forEach((function(e){i.push({colId:e.getColId(),aggFunc:e.getColDef().aggFunc,hide:e.getColDef().hide,pinned:e.getColDef().pinned,rowGroupIndex:e.getColDef().rowGroupIndex,pivotIndex:e.getColDef().pivotIndex,width:e.getColDef().width})}))}this.setColumnState(i,e)};e.prototype.setColumnState=function(e,t){var i=this;if(t===void 0){t="api"}if(a.Utils.missingOrEmpty(this.primaryColumns)){return false}this.autoGroupsNeedBuilding=true;var n=this.primaryColumns.slice();this.rowGroupColumns=[];this.valueColumns=[];this.pivotColumns=[];var r=true;var o={};var s={};if(e){e.forEach((function(e){var l=i.getPrimaryColumn(e.colId);if(!l){console.warn("ag-grid: column "+e.colId+" not found");r=false}else{i.syncColumnWithStateItem(l,e,o,s,t);a.Utils.removeFromArray(n,l)}}))}n.forEach(this.syncColumnWithNoState.bind(this));this.rowGroupColumns.sort(this.sortColumnListUsingIndexes.bind(this,o));this.pivotColumns.sort(this.sortColumnListUsingIndexes.bind(this,s));this.updateGridColumns();if(e){var l=e.map((function(e){return e.colId}));this.gridColumns.sort((function(e,t){var i=l.indexOf(e.getId());var n=l.indexOf(t.getId());return i-n}))}this.updateDisplayedColumns(t);var u={type:v.Events.EVENT_COLUMN_EVERYTHING_CHANGED,api:this.gridApi,columnApi:this.columnApi,source:t};this.eventService.dispatchEvent(u);return r};e.prototype.sortColumnListUsingIndexes=function(e,t,i){var n=e[t.getId()];var r=e[i.getId()];return n-r};e.prototype.syncColumnWithNoState=function(e,t){e.setVisible(false,t);e.setAggFunc(null);e.setPinned(null);e.setRowGroupActive(false,t);e.setPivotActive(false,t);e.setValueActive(false,t)};e.prototype.syncColumnWithStateItem=function(e,t,i,n,r){e.setVisible(!t.hide,r);e.setPinned(t.pinned);if(t.width>=this.gridOptionsWrapper.getMinColWidth()){e.setActualWidth(t.width,r)}if(typeof t.aggFunc==="string"){e.setAggFunc(t.aggFunc);e.setValueActive(true,r);this.valueColumns.push(e)}else{if(a.Utils.exists(t.aggFunc)){console.warn("ag-Grid: stateItem.aggFunc must be a string. if using your own aggregation "+"functions, register the functions first before using them in get/set state. This is because it is"+"intended for the column state to be stored and retrieved as simple JSON.")}e.setAggFunc(null);e.setValueActive(false,r)}if(typeof t.rowGroupIndex==="number"){this.rowGroupColumns.push(e);e.setRowGroupActive(true,r);i[e.getId()]=t.rowGroupIndex}else{e.setRowGroupActive(false,r)}if(typeof t.pivotIndex==="number"){this.pivotColumns.push(e);e.setPivotActive(true,r);n[e.getId()]=t.pivotIndex}else{e.setPivotActive(false,r)}};e.prototype.getGridColumns=function(e){return this.getColumns(e,this.getGridColumn.bind(this))};e.prototype.getColumns=function(e,t){var i=[];if(e){e.forEach((function(e){var n=t(e);if(n){i.push(n)}}))}return i};e.prototype.getColumnWithValidation=function(e){var t=this.getPrimaryColumn(e);if(!t){console.warn("ag-Grid: could not find column "+t)}return t};e.prototype.getPrimaryColumn=function(e){return this.getColumn(e,this.primaryColumns)};e.prototype.getGridColumn=function(e){return this.getColumn(e,this.gridColumns)};e.prototype.getColumn=function(e,t){if(!e){return null}for(var i=0;i<t.length;i++){if(this.columnsMatch(t[i],e)){return t[i]}}return this.getAutoColumn(e)};e.prototype.getAutoColumn=function(e){var t=this;if(!a.Utils.exists(this.groupAutoColumns)||a.Utils.missing(this.groupAutoColumns)){return null}return a.Utils.find(this.groupAutoColumns,(function(i){return t.columnsMatch(i,e)}))};e.prototype.columnsMatch=function(e,t){var i=e===t;var n=e.getColDef()===t;var r=e.getColId()==t;return i||n||r};e.prototype.getDisplayNameForColumn=function(e,t,i){if(i===void 0){i=false}var n=this.getHeaderName(e.getColDef(),e,null,null,t);if(i){return this.wrapHeaderNameWithAggFunc(e,n)}else{return n}};e.prototype.getDisplayNameForOriginalColumnGroup=function(e,t,i){var n=t.getColGroupDef();if(n){return this.getHeaderName(n,null,e,t,i)}else{return null}};e.prototype.getDisplayNameForColumnGroup=function(e,t){return this.getDisplayNameForOriginalColumnGroup(e,e.getOriginalColumnGroup(),t)};e.prototype.getHeaderName=function(e,t,i,n,r){var o=e.headerValueGetter;if(o){var s={colDef:e,column:t,columnGroup:i,originalColumnGroup:n,location:r,api:this.gridOptionsWrapper.getApi(),context:this.gridOptionsWrapper.getContext()};if(typeof o==="function"){return o(s)}else if(typeof o==="string"){return this.expressionService.evaluate(o,s)}else{console.warn("ag-grid: headerValueGetter must be a function or a string");return""}}else if(e.headerName!=null){return e.headerName}else if(e.field){return a.Utils.camelCaseToHumanText(e.field)}else{return""}};e.prototype.wrapHeaderNameWithAggFunc=function(e,t){if(this.gridOptionsWrapper.isSuppressAggFuncInHeader()){return t}var i=e.getColDef().pivotValueColumn;var n=a.Utils.exists(i);var r=null;var o;if(n){r=i.getAggFunc();o=true}else{var s=e.isValueActive();var l=this.pivotMode||!this.isRowGroupEmpty();if(s&&l){r=e.getAggFunc();o=true}else{o=false}}if(o){var u=typeof r==="string"?r:"func";var c=this.gridOptionsWrapper.getLocaleTextFunc();var d=c(u,u);return d+"("+t+")"}else{return t}};e.prototype.getColumnGroup=function(e,t){if(!e){return null}if(e instanceof s.ColumnGroup){return e}var i=this.getAllDisplayedColumnGroups();var n=typeof t==="number";var r=null;this.columnUtils.depthFirstAllColumnTreeSearch(i,(function(i){if(i instanceof s.ColumnGroup){var o=i;var a=void 0;if(n){a=e===o.getGroupId()&&t===o.getInstanceId()}else{a=e===o.getGroupId()}if(a){r=o}}}));return r};e.prototype.setColumnDefs=function(e,t){if(t===void 0){t="api"}this.valueCache.expire();this.autoGroupsNeedBuilding=true;var i=this.balancedColumnTreeBuilder.createBalancedColumnGroups(e,true);this.primaryBalancedTree=i.balancedTree;this.primaryHeaderRowCount=i.treeDept+1;this.primaryColumns=this.getColumnsFromTree(this.primaryBalancedTree);this.autoRowHeightColumns=this.primaryColumns.filter((function(e){return e.getColDef().autoHeight}));this.extractRowGroupColumns(t);this.extractPivotColumns(t);this.createValueColumns(t);this.updateGridColumns();this.updateDisplayedColumns(t);this.checkDisplayedVirtualColumns();this.ready=true;var n={type:v.Events.EVENT_COLUMN_EVERYTHING_CHANGED,api:this.gridApi,columnApi:this.columnApi,source:t};this.eventService.dispatchEvent(n);var r={type:v.Events.EVENT_NEW_COLUMNS_LOADED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(r)};e.prototype.isReady=function(){return this.ready};e.prototype.extractRowGroupColumns=function(e){var t=this;this.rowGroupColumns.forEach((function(t){return t.setRowGroupActive(false,e)}));this.rowGroupColumns=[];this.primaryColumns.forEach((function(i){if(typeof i.getColDef().rowGroupIndex==="number"){t.rowGroupColumns.push(i);i.setRowGroupActive(true,e)}}));this.rowGroupColumns.sort((function(e,t){return e.getColDef().rowGroupIndex-t.getColDef().rowGroupIndex}));this.primaryColumns.forEach((function(i){if(i.getColDef().rowGroup){if(t.rowGroupColumns.indexOf(i)>=0){return}t.rowGroupColumns.push(i);i.setRowGroupActive(true,e)}}))};e.prototype.extractPivotColumns=function(e){var t=this;this.pivotColumns.forEach((function(t){return t.setPivotActive(false,e)}));this.pivotColumns=[];this.primaryColumns.forEach((function(i){if(typeof i.getColDef().pivotIndex==="number"){t.pivotColumns.push(i);i.setPivotActive(true,e)}}));this.pivotColumns.sort((function(e,t){return e.getColDef().pivotIndex-t.getColDef().pivotIndex}));this.primaryColumns.forEach((function(i){if(i.getColDef().pivot){if(t.pivotColumns.indexOf(i)>=0){return}t.pivotColumns.push(i);i.setPivotActive(true,e)}}))};e.prototype.resetColumnGroupState=function(e){if(e===void 0){e="api"}var t=[];this.columnUtils.depthFirstOriginalTreeSearch(this.primaryBalancedTree,(function(e){if(e instanceof y.OriginalColumnGroup){var i={groupId:e.getGroupId(),open:e.getColGroupDef().openByDefault};t.push(i)}}));this.setColumnGroupState(t,e)};e.prototype.getColumnGroupState=function(){var e=[];this.columnUtils.depthFirstOriginalTreeSearch(this.gridBalancedTree,(function(t){if(t instanceof y.OriginalColumnGroup){var i=t;e.push({groupId:i.getGroupId(),open:i.isExpanded()})}}));return e};e.prototype.setColumnGroupState=function(e,t){var i=this;if(t===void 0){t="api"}this.columnAnimationService.start();var n=[];e.forEach((function(e){var t=e.groupId;var r=e.open;var o=i.getOriginalColumnGroup(t);if(!o){return}if(o.isExpanded()===r){return}i.logger.log("columnGroupOpened("+o.getGroupId()+","+r+")");o.setExpanded(r);n.push(o)}));this.updateGroupsAndDisplayedColumns(t);n.forEach((function(e){var t={type:v.Events.EVENT_COLUMN_GROUP_OPENED,columnGroup:e,api:i.gridApi,columnApi:i.columnApi};i.eventService.dispatchEvent(t)}));this.columnAnimationService.finish()};e.prototype.setColumnGroupOpened=function(e,t,i){if(i===void 0){i="api"}var n;if(e instanceof y.OriginalColumnGroup){n=e.getId()}else{n=e}this.setColumnGroupState([{groupId:n,open:t}],i)};e.prototype.getOriginalColumnGroup=function(e){if(e instanceof y.OriginalColumnGroup){return e}if(typeof e!=="string"){console.error("ag-Grid: group key must be a string")}var t=null;this.columnUtils.depthFirstOriginalTreeSearch(this.gridBalancedTree,(function(i){if(i instanceof y.OriginalColumnGroup){var n=i;if(n.getId()===e){t=n}}}));return t};e.prototype.calculateColumnsForDisplay=function(){var e=this;var t;if(this.pivotMode&&!this.secondaryColumnsPresent){t=a.Utils.filter(this.gridColumns,(function(t){var i=e.groupAutoColumns&&e.groupAutoColumns.indexOf(t)>=0;var n=e.valueColumns&&e.valueColumns.indexOf(t)>=0;return i||n}))}else{t=a.Utils.filter(this.gridColumns,(function(t){var i=e.groupAutoColumns&&e.groupAutoColumns.indexOf(t)>=0;return i||t.isVisible()}))}return t};e.prototype.checkColSpanActiveInCols=function(e){var t=false;e.forEach((function(e){if(a.Utils.exists(e.getColDef().colSpan)){t=true}}));return t};e.prototype.calculateColumnsForGroupDisplay=function(){var e=this;this.groupDisplayColumns=[];var t=function(t){var i=t.getColDef();if(i&&a.Utils.exists(i.showRowGroup)){e.groupDisplayColumns.push(t)}};this.gridColumns.forEach(t);if(this.groupAutoColumns){this.groupAutoColumns.forEach(t)}};e.prototype.getGroupDisplayColumns=function(){return this.groupDisplayColumns};e.prototype.updateDisplayedColumns=function(e){var t=this.calculateColumnsForDisplay();this.buildDisplayedTrees(t);this.calculateColumnsForGroupDisplay();this.updateGroupsAndDisplayedColumns(e);this.setFirstRightAndLastLeftPinned(e)};e.prototype.isSecondaryColumnsPresent=function(){return this.secondaryColumnsPresent};e.prototype.setSecondaryColumns=function(e,t){if(t===void 0){t="api"}var i=e&&e.length>0;if(!i&&!this.secondaryColumnsPresent){return}if(i){this.processSecondaryColumnDefinitions(e);var n=this.balancedColumnTreeBuilder.createBalancedColumnGroups(e,false);this.secondaryBalancedTree=n.balancedTree;this.secondaryHeaderRowCount=n.treeDept+1;this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree);this.secondaryColumnsPresent=true}else{this.secondaryBalancedTree=null;this.secondaryHeaderRowCount=-1;this.secondaryColumns=null;this.secondaryColumnsPresent=false}this.updateGridColumns();this.updateDisplayedColumns(t)};e.prototype.processSecondaryColumnDefinitions=function(e){var t=this.gridOptionsWrapper.getProcessSecondaryColDefFunc();var i=this.gridOptionsWrapper.getProcessSecondaryColGroupDefFunc();if(!t&&!i){return}n(e);function n(e){e.forEach((function(e){var r=a.Utils.exists(e.children);if(r){var o=e;if(i){i(o)}n(o.children)}else{var s=e;if(t){t(s)}}}))}};e.prototype.updateGridColumns=function(){if(this.gridColsArePrimary){this.lastPrimaryOrder=this.gridColumns}if(this.secondaryColumns){this.gridBalancedTree=this.secondaryBalancedTree.slice();this.gridHeaderRowCount=this.secondaryHeaderRowCount;this.gridColumns=this.secondaryColumns.slice();this.gridColsArePrimary=false}else{this.gridBalancedTree=this.primaryBalancedTree.slice();this.gridHeaderRowCount=this.primaryHeaderRowCount;this.gridColumns=this.primaryColumns.slice();this.gridColsArePrimary=true;this.orderGridColsLikeLastPrimary()}this.putFixedColumnsFirst();this.addAutoGroupToGridColumns();this.setupQuickFilterColumns();this.clearDisplayedColumns();this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns);var e={type:v.Events.EVENT_GRID_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)};e.prototype.orderGridColsLikeLastPrimary=function(){var e=this;if(a.Utils.missing(this.lastPrimaryOrder)){return}var t=false;this.gridColumns.forEach((function(i){if(e.lastPrimaryOrder.indexOf(i)<0){t=true}}));if(t){return}this.gridColumns.sort((function(t,i){var n=e.lastPrimaryOrder.indexOf(t);var r=e.lastPrimaryOrder.indexOf(i);return n-r}))};e.prototype.isPrimaryColumnGroupsPresent=function(){return this.primaryHeaderRowCount>1};e.prototype.setupQuickFilterColumns=function(){if(this.groupAutoColumns){this.columnsForQuickFilter=this.primaryColumns.concat(this.groupAutoColumns)}else{this.columnsForQuickFilter=this.primaryColumns}};e.prototype.putFixedColumnsFirst=function(){var e=this.gridColumns.filter((function(e){return e.isLockPosition()}));var t=this.gridColumns.filter((function(e){return!e.isLockPosition()}));this.gridColumns=e.concat(t)};e.prototype.addAutoGroupToGridColumns=function(){this.createGroupAutoColumnsIfNeeded();if(a.Utils.missing(this.groupAutoColumns)){return}this.gridColumns=this.groupAutoColumns.concat(this.gridColumns);var e=this.balancedColumnTreeBuilder.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.gridBalancedTree=e.concat(this.gridBalancedTree)};e.prototype.clearDisplayedColumns=function(){this.displayedLeftColumnTree=[];this.displayedRightColumnTree=[];this.displayedCentreColumnTree=[];this.displayedLeftHeaderRows={};this.displayedRightHeaderRows={};this.displayedCentreHeaderRows={};this.displayedLeftColumns=[];this.displayedRightColumns=[];this.displayedCenterColumns=[];this.allDisplayedColumns=[];this.allDisplayedVirtualColumns=[]};e.prototype.updateGroupsAndDisplayedColumns=function(e){this.updateOpenClosedVisibilityInColumnGroups();this.updateDisplayedColumnsFromTrees(e);this.updateVirtualSets();this.updateBodyWidths();var t={type:v.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(t)};e.prototype.updateDisplayedColumnsFromTrees=function(e){this.addToDisplayedColumns(this.displayedLeftColumnTree,this.displayedLeftColumns);this.addToDisplayedColumns(this.displayedCentreColumnTree,this.displayedCenterColumns);this.addToDisplayedColumns(this.displayedRightColumnTree,this.displayedRightColumns);this.setupAllDisplayedColumns();this.setLeftValues(e)};e.prototype.setupAllDisplayedColumns=function(){if(this.gridOptionsWrapper.isEnableRtl()){this.allDisplayedColumns=this.displayedRightColumns.concat(this.displayedCenterColumns).concat(this.displayedLeftColumns)}else{this.allDisplayedColumns=this.displayedLeftColumns.concat(this.displayedCenterColumns).concat(this.displayedRightColumns)}};e.prototype.setLeftValues=function(e){this.setLeftValuesOfColumns(e);this.setLeftValuesOfGroups()};e.prototype.setLeftValuesOfColumns=function(e){var t=this;var i=this.primaryColumns.slice(0);var n=this.gridOptionsWrapper.isEnableRtl();[this.displayedLeftColumns,this.displayedRightColumns,this.displayedCenterColumns].forEach((function(r){if(n){var o=t.getWidthOfColsInList(r);r.forEach((function(t){o-=t.getActualWidth();t.setLeft(o,e)}))}else{var s=0;r.forEach((function(t){t.setLeft(s,e);s+=t.getActualWidth()}))}a.Utils.removeAllFromArray(i,r)}));i.forEach((function(t){t.setLeft(null,e)}))};e.prototype.setLeftValuesOfGroups=function(){[this.displayedLeftColumnTree,this.displayedRightColumnTree,this.displayedCentreColumnTree].forEach((function(e){e.forEach((function(e){if(e instanceof s.ColumnGroup){var t=e;t.checkLeft()}}))}))};e.prototype.addToDisplayedColumns=function(e,t){t.length=0;this.columnUtils.depthFirstDisplayedColumnTreeSearch(e,(function(e){if(e instanceof l.Column){t.push(e)}}))};e.prototype.updateDisplayedCenterVirtualColumns=function(){if(this.suppressColumnVirtualisation){this.allDisplayedCenterVirtualColumns=this.displayedCenterColumns}else{this.allDisplayedCenterVirtualColumns=this.filterOutColumnsWithinViewport()}this.allDisplayedVirtualColumns=this.allDisplayedCenterVirtualColumns.concat(this.displayedLeftColumns).concat(this.displayedRightColumns);var e={};this.allDisplayedVirtualColumns.forEach((function(t){e[t.getId()]=true}));return e};e.prototype.getVirtualHeaderGroupRow=function(e,t){var i;switch(e){case l.Column.PINNED_LEFT:i=this.displayedLeftHeaderRows[t];break;case l.Column.PINNED_RIGHT:i=this.displayedRightHeaderRows[t];break;default:i=this.displayedCentreHeaderRows[t];break}if(a.Utils.missing(i)){i=[]}return i};e.prototype.updateDisplayedVirtualGroups=function(e){this.displayedLeftHeaderRows={};this.displayedRightHeaderRows={};this.displayedCentreHeaderRows={};t(this.displayedLeftColumnTree,this.displayedLeftHeaderRows,0);t(this.displayedRightColumnTree,this.displayedRightHeaderRows,0);t(this.displayedCentreColumnTree,this.displayedCentreHeaderRows,0);function t(i,n,r){var o=false;for(var a=0;a<i.length;a++){var s=i[a];var u=void 0;if(s instanceof l.Column){u=e[s.getId()]===true}else{var c=s;u=t(c.getDisplayedChildren(),n,r+1)}if(u){o=true;if(!n[r]){n[r]=[]}n[r].push(s)}}return o}};e.prototype.updateVirtualSets=function(){var e=this.updateDisplayedCenterVirtualColumns();this.updateDisplayedVirtualGroups(e)};e.prototype.filterOutColumnsWithinViewport=function(){return a.Utils.filter(this.displayedCenterColumns,this.isColumnInViewport.bind(this))};e.prototype.sizeColumnsToFit=function(e,t){var i=this;if(t===void 0){t="api"}var n=this.getAllDisplayedColumns();if(e<=0||n.length===0){return}var r=a.Utils.filter(n,(function(e){return e.getColDef().suppressSizeToFit===true}));var o=a.Utils.filter(n,(function(e){return e.getColDef().suppressSizeToFit!==true}));var s=o.slice(0);var l=false;while(!l){l=true;var u=e-this.getWidthOfColsInList(r);if(u<=0){o.forEach((function(e){e.setMinimum(t)}))}else{var c=u/this.getWidthOfColsInList(o);var d=u;for(var f=o.length-1;f>=0;f--){var p=o[f];var h=Math.round(p.getActualWidth()*c);if(h<p.getMinWidth()){p.setMinimum(t);m(p);l=false}else if(p.isGreaterThanMax(h)){p.setActualWidth(p.getMaxWidth(),t);m(p);l=false}else{var g=f===0;if(g){p.setActualWidth(d,t)}else{p.setActualWidth(h,t)}}d-=h}}}this.setLeftValues(t);this.updateBodyWidths();s.forEach((function(e){var t={type:v.Events.EVENT_COLUMN_RESIZED,column:e,columns:[e],finished:true,api:i.gridApi,columnApi:i.columnApi,source:"sizeColumnsToFit"};i.eventService.dispatchEvent(t)}));function m(e){a.Utils.removeFromArray(o,e);r.push(e)}};e.prototype.buildDisplayedTrees=function(e){var t=a.Utils.filter(e,(function(e){return e.getPinned()==="left"}));var i=a.Utils.filter(e,(function(e){return e.getPinned()==="right"}));var n=a.Utils.filter(e,(function(e){return e.getPinned()!=="left"&&e.getPinned()!=="right"}));var r=new b.GroupInstanceIdCreator;this.displayedLeftColumnTree=this.displayedGroupCreator.createDisplayedGroups(t,this.gridBalancedTree,r,this.displayedLeftColumnTree);this.displayedRightColumnTree=this.displayedGroupCreator.createDisplayedGroups(i,this.gridBalancedTree,r,this.displayedRightColumnTree);this.displayedCentreColumnTree=this.displayedGroupCreator.createDisplayedGroups(n,this.gridBalancedTree,r,this.displayedCentreColumnTree)};e.prototype.updateOpenClosedVisibilityInColumnGroups=function(){var e=this.getAllDisplayedColumnGroups();this.columnUtils.depthFirstAllColumnTreeSearch(e,(function(e){if(e instanceof s.ColumnGroup){var t=e;t.calculateDisplayedColumns()}}))};e.prototype.getGroupAutoColumns=function(){return this.groupAutoColumns};e.prototype.createGroupAutoColumnsIfNeeded=function(){if(!this.autoGroupsNeedBuilding){return}this.autoGroupsNeedBuilding=false;var e=(this.rowGroupColumns.length>0||this.usingTreeData)&&!this.gridOptionsWrapper.isGroupSuppressAutoColumn()&&!this.gridOptionsWrapper.isGroupUseEntireRow()&&!this.gridOptionsWrapper.isGroupSuppressRow();if(e){this.groupAutoColumns=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns)}else{this.groupAutoColumns=null}};e.prototype.createValueColumns=function(e){this.valueColumns.forEach((function(t){return t.setValueActive(false,e)}));this.valueColumns=[];for(var t=0;t<this.primaryColumns.length;t++){var i=this.primaryColumns[t];if(i.getColDef().aggFunc){i.setAggFunc(i.getColDef().aggFunc);this.valueColumns.push(i);i.setValueActive(true,e)}}};e.prototype.getWidthOfColsInList=function(e){var t=0;for(var i=0;i<e.length;i++){t+=e[i].getActualWidth()}return t};e.prototype.getGridBalancedTree=function(){return this.gridBalancedTree};n([_.Autowired("gridOptionsWrapper"),r("design:type",u.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([_.Autowired("expressionService"),r("design:type",c.ExpressionService)],e.prototype,"expressionService",void 0);n([_.Autowired("balancedColumnTreeBuilder"),r("design:type",d.BalancedColumnTreeBuilder)],e.prototype,"balancedColumnTreeBuilder",void 0);n([_.Autowired("displayedGroupCreator"),r("design:type",f.DisplayedGroupCreator)],e.prototype,"displayedGroupCreator",void 0);n([_.Autowired("autoWidthCalculator"),r("design:type",p.AutoWidthCalculator)],e.prototype,"autoWidthCalculator",void 0);n([_.Autowired("eventService"),r("design:type",h.EventService)],e.prototype,"eventService",void 0);n([_.Autowired("columnUtils"),r("design:type",g.ColumnUtils)],e.prototype,"columnUtils",void 0);n([_.Autowired("context"),r("design:type",_.Context)],e.prototype,"context",void 0);n([_.Autowired("columnAnimationService"),r("design:type",w.ColumnAnimationService)],e.prototype,"columnAnimationService",void 0);n([_.Autowired("autoGroupColService"),r("design:type",C.AutoGroupColService)],e.prototype,"autoGroupColService",void 0);n([_.Optional("aggFuncService"),r("design:type",Object)],e.prototype,"aggFuncService",void 0);n([_.Optional("valueCache"),r("design:type",A.ValueCache)],e.prototype,"valueCache",void 0);n([_.Autowired("columnApi"),r("design:type",x.ColumnApi)],e.prototype,"columnApi",void 0);n([_.Autowired("gridApi"),r("design:type",E.GridApi)],e.prototype,"gridApi",void 0);n([_.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);n([o(0,_.Qualifier("loggerFactory")),r("design:type",Function),r("design:paramtypes",[m.LoggerFactory]),r("design:returntype",void 0)],e.prototype,"setBeans",null);e=n([_.Bean("columnController")],e);return e}();t.ColumnController=T},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(25);t.Events=n.Events},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(47);var a=i(20);var s=i(18);var l=i(4);var u=i(17);var c=i(2);var d=i(16);var f=i(3);var p=i(9);var h=i(0);var g=i(42);var m=i(24);var v=i(22);var y=i(23);var b=i(1);var _=i(55);var w=i(54);var C=i(29);var A=i(105);var E=i(33);var x=i(58);var T=i(30);var S=i(37);var D=function(){function e(){this.detailGridInfoMap={}}e.prototype.registerGridComp=function(e){this.gridPanel=e};e.prototype.registerHeaderRootComp=function(e){this.headerRootComp=e};e.prototype.init=function(){switch(this.rowModel.getType()){case p.Constants.ROW_MODEL_TYPE_CLIENT_SIDE:this.clientSideRowModel=this.rowModel;break;case p.Constants.ROW_MODEL_TYPE_INFINITE:this.infinitePageRowModel=this.rowModel;break;case p.Constants.ROW_MODEL_TYPE_SERVER_SIDE:this.serverSideRowModel=this.rowModel;break}};e.prototype.__getAlignedGridService=function(){return this.alignedGridsService};e.prototype.addDetailGridInfo=function(e,t){this.detailGridInfoMap[e]=t};e.prototype.removeDetailGridInfo=function(e){this.detailGridInfoMap[e]=undefined};e.prototype.getDetailGridInfo=function(e){return this.detailGridInfoMap[e]};e.prototype.forEachDetailGridInfo=function(e){var t=0;b.Utils.iterateObject(this.detailGridInfoMap,(function(i,n){if(b.Utils.exists(n)){e(n,t);t++}}))};e.prototype.getDataAsCsv=function(e){return this.csvCreator.getDataAsCsv(e)};e.prototype.exportDataAsCsv=function(e){this.csvCreator.exportDataAsCsv(e)};e.prototype.getDataAsExcel=function(e){if(!this.excelCreator){console.warn("ag-Grid: Excel export is only available in ag-Grid Enterprise")}return this.excelCreator.getDataAsExcelXml(e)};e.prototype.exportDataAsExcel=function(e){if(!this.excelCreator){console.warn("ag-Grid: Excel export is only available in ag-Grid Enterprise")}this.excelCreator.exportDataAsExcel(e)};e.prototype.setEnterpriseDatasource=function(e){console.warn("ag-grid: since version 18.x, api.setEnterpriseDatasource() should be replaced with api.setServerSideDatasource()");this.setServerSideDatasource(e)};e.prototype.setServerSideDatasource=function(e){if(this.gridOptionsWrapper.isRowModelServerSide()){this.rowModel.setDatasource(e)}else{console.warn("ag-Grid: you can only use an enterprise datasource when gridOptions.rowModelType is '"+p.Constants.ROW_MODEL_TYPE_SERVER_SIDE+"'")}};e.prototype.setDatasource=function(e){if(this.gridOptionsWrapper.isRowModelInfinite()){this.rowModel.setDatasource(e)}else{console.warn("ag-Grid: you can only use a datasource when gridOptions.rowModelType is '"+p.Constants.ROW_MODEL_TYPE_INFINITE+"'")}};e.prototype.setViewportDatasource=function(e){if(this.gridOptionsWrapper.isRowModelViewport()){this.rowModel.setViewportDatasource(e)}else{console.warn("ag-Grid: you can only use a viewport datasource when gridOptions.rowModelType is '"+p.Constants.ROW_MODEL_TYPE_VIEWPORT+"'")}};e.prototype.setRowData=function(e){if(this.gridOptionsWrapper.isRowModelDefault()){if(this.gridOptionsWrapper.isDeltaRowDataMode()){var t=this.immutableService.createTransactionForRowData(e),i=t[0],n=t[1];this.clientSideRowModel.updateRowData(i,n)}else{this.selectionController.reset();this.clientSideRowModel.setRowData(e)}}else{console.log("cannot call setRowData unless using normal row model")}};e.prototype.setFloatingTopRowData=function(e){console.warn("ag-Grid: since v12, api.setFloatingTopRowData() is now api.setPinnedTopRowData()");this.setPinnedTopRowData(e)};e.prototype.setFloatingBottomRowData=function(e){console.warn("ag-Grid: since v12, api.setFloatingBottomRowData() is now api.setPinnedBottomRowData()");this.setPinnedBottomRowData(e)};e.prototype.getFloatingTopRowCount=function(){console.warn("ag-Grid: since v12, api.getFloatingTopRowCount() is now api.getPinnedTopRowCount()");return this.getPinnedTopRowCount()};e.prototype.getFloatingBottomRowCount=function(){console.warn("ag-Grid: since v12, api.getFloatingBottomRowCount() is now api.getPinnedBottomRowCount()");return this.getPinnedBottomRowCount()};e.prototype.getFloatingTopRow=function(e){console.warn("ag-Grid: since v12, api.getFloatingTopRow() is now api.getPinnedTopRow()");return this.getPinnedTopRow(e)};e.prototype.getFloatingBottomRow=function(e){console.warn("ag-Grid: since v12, api.getFloatingBottomRow() is now api.getPinnedBottomRow()");return this.getPinnedBottomRow(e)};e.prototype.setPinnedTopRowData=function(e){this.pinnedRowModel.setPinnedTopRowData(e)};e.prototype.setPinnedBottomRowData=function(e){this.pinnedRowModel.setPinnedBottomRowData(e)};e.prototype.getPinnedTopRowCount=function(){return this.pinnedRowModel.getPinnedTopRowCount()};e.prototype.getPinnedBottomRowCount=function(){return this.pinnedRowModel.getPinnedBottomRowCount()};e.prototype.getPinnedTopRow=function(e){return this.pinnedRowModel.getPinnedTopRow(e)};e.prototype.getPinnedBottomRow=function(e){return this.pinnedRowModel.getPinnedBottomRow(e)};e.prototype.setColumnDefs=function(e,t){if(t===void 0){t="api"}this.columnController.setColumnDefs(e,t)};e.prototype.expireValueCache=function(){this.valueCache.expire()};e.prototype.getVerticalPixelRange=function(){return this.gridPanel.getVScrollPosition()};e.prototype.refreshToolPanel=function(){if(this.toolPanelComp){this.toolPanelComp.refresh()}};e.prototype.refreshCells=function(e){if(e===void 0){e={}}if(Array.isArray(e)){console.warn("since ag-Grid v11.1, refreshCells() now takes parameters, please see the documentation.");return}this.rowRenderer.refreshCells(e)};e.prototype.flashCells=function(e){if(e===void 0){e={}}this.rowRenderer.flashCells(e)};e.prototype.redrawRows=function(e){if(e===void 0){e={}}if(e&&e.rowNodes){this.rowRenderer.redrawRows(e.rowNodes)}else{this.rowRenderer.redrawAfterModelUpdate()}};e.prototype.timeFullRedraw=function(e){if(e===void 0){e=1}var t=0;var i=0;var n=0;var r=this;o();function o(){var s=(new Date).getTime();r.rowRenderer.redrawAfterModelUpdate();var l=(new Date).getTime();setTimeout((function(){var r=(new Date).getTime();var u=l-s;var c=r-l;console.log("duration:  processing = "+u+"ms, reflow = "+c+"ms");t++;i+=u;n+=c;if(t<e){setTimeout(o,1e3)}else{a()}}),0)}function a(){console.log("tests complete. iteration count = "+t);console.log("average processing = "+i/t+"ms");console.log("average reflow = "+n/t+"ms")}};e.prototype.refreshView=function(){console.warn("ag-Grid: since v11.1, refreshView() is deprecated, please call refreshCells() or redrawRows() instead");this.redrawRows()};e.prototype.refreshRows=function(e){console.warn("since ag-Grid v11.1, refreshRows() is deprecated, please use refreshCells({rowNodes: rows}) or redrawRows({rowNodes: rows}) instead");this.refreshCells({rowNodes:e})};e.prototype.rowDataChanged=function(e){console.log("ag-Grid: rowDataChanged is deprecated, either call refreshView() to refresh everything, or call rowNode.setRowData(newData) to set value on a particular node");this.redrawRows()};e.prototype.softRefreshView=function(){console.error("ag-Grid: since v16, softRefreshView() is no longer supported. Please check the documentation on how to refresh.")};e.prototype.refreshGroupRows=function(){console.warn("ag-Grid: since v11.1, refreshGroupRows() is no longer supported, call refreshCells() instead. "+"Because refreshCells() now does dirty checking, it will only refresh cells that have changed, so it should "+"not be necessary to only refresh the group rows.");this.refreshCells()};e.prototype.setFunctionsReadOnly=function(e){this.gridOptionsWrapper.setProperty("functionsReadOnly",e)};e.prototype.refreshHeader=function(){this.headerRootComp.refreshHeader();this.gridPanel.setBodyAndHeaderHeights()};e.prototype.isAnyFilterPresent=function(){return this.filterManager.isAnyFilterPresent()};e.prototype.isAdvancedFilterPresent=function(){return this.filterManager.isAdvancedFilterPresent()};e.prototype.isQuickFilterPresent=function(){return this.filterManager.isQuickFilterPresent()};e.prototype.getModel=function(){return this.rowModel};e.prototype.onGroupExpandedOrCollapsed=function(e){if(b.Utils.missing(this.clientSideRowModel)){console.log("ag-Grid: cannot call onGroupExpandedOrCollapsed unless using normal row model")}if(b.Utils.exists(e)){console.log("ag-Grid: api.onGroupExpandedOrCollapsed - refreshFromIndex parameter is no longer used, the grid will refresh all rows")}this.clientSideRowModel.refreshModel({step:p.Constants.STEP_MAP})};e.prototype.refreshInMemoryRowModel=function(e){console.warn("ag-grid: since version 18.x, api.refreshInMemoryRowModel() should be replaced with api.refreshClientSideRowModel()");this.refreshClientSideRowModel(e)};e.prototype.refreshClientSideRowModel=function(e){if(b.Utils.missing(this.clientSideRowModel)){console.log("cannot call refreshClientSideRowModel unless using normal row model")}var t=p.Constants.STEP_EVERYTHING;var i={group:p.Constants.STEP_EVERYTHING,filter:p.Constants.STEP_FILTER,map:p.Constants.STEP_MAP,aggregate:p.Constants.STEP_AGGREGATE,sort:p.Constants.STEP_SORT,pivot:p.Constants.STEP_PIVOT};if(b.Utils.exists(e)){t=i[e]}if(b.Utils.missing(t)){console.error("ag-Grid: invalid step "+e+", available steps are "+Object.keys(i).join(", "));return}var n={step:t,keepRenderedRows:true,animate:true,keepEditingRows:true};this.clientSideRowModel.refreshModel(n)};e.prototype.isAnimationFrameQueueEmpty=function(){return this.animationFrameService.isQueueEmpty()};e.prototype.getRowNode=function(e){return this.rowModel.getRowNode(e)};e.prototype.expandAll=function(){if(b.Utils.missing(this.clientSideRowModel)){console.warn("ag-Grid: cannot call expandAll unless using normal row model");return}this.clientSideRowModel.expandOrCollapseAll(true)};e.prototype.collapseAll=function(){if(b.Utils.missing(this.clientSideRowModel)){console.warn("ag-Grid: cannot call collapseAll unless using normal row model");return}this.clientSideRowModel.expandOrCollapseAll(false)};e.prototype.addVirtualRowListener=function(e,t,i){if(typeof e!=="string"){console.log("ag-Grid: addVirtualRowListener is deprecated, please use addRenderedRowListener.")}this.addRenderedRowListener(e,t,i)};e.prototype.addRenderedRowListener=function(e,t,i){if(e==="virtualRowSelected"){console.log("ag-Grid: event virtualRowSelected is deprecated, to register for individual row "+"selection events, add a listener directly to the row node.")}this.rowRenderer.addRenderedRowListener(e,t,i)};e.prototype.setQuickFilter=function(e){this.filterManager.setQuickFilter(e)};e.prototype.selectIndex=function(e,t,i){console.log("ag-Grid: do not use api for selection, call node.setSelected(value) instead");if(i){console.log("ag-Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it")}this.selectionController.selectIndex(e,t)};e.prototype.deselectIndex=function(e,t){if(t===void 0){t=false}console.log("ag-Grid: do not use api for selection, call node.setSelected(value) instead");if(t){console.log("ag-Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it")}this.selectionController.deselectIndex(e)};e.prototype.selectNode=function(e,t,i){if(t===void 0){t=false}if(i===void 0){i=false}console.log("ag-Grid: API for selection is deprecated, call node.setSelected(value) instead");if(i){console.log("ag-Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it")}e.setSelectedParams({newValue:true,clearSelection:!t})};e.prototype.deselectNode=function(e,t){if(t===void 0){t=false}console.log("ag-Grid: API for selection is deprecated, call node.setSelected(value) instead");if(t){console.log("ag-Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it")}e.setSelectedParams({newValue:false})};e.prototype.selectAll=function(){this.selectionController.selectAllRowNodes()};e.prototype.deselectAll=function(){this.selectionController.deselectAllRowNodes()};e.prototype.selectAllFiltered=function(){this.selectionController.selectAllRowNodes(true)};e.prototype.deselectAllFiltered=function(){this.selectionController.deselectAllRowNodes(true)};e.prototype.recomputeAggregates=function(){if(b.Utils.missing(this.clientSideRowModel)){console.warn("cannot call recomputeAggregates unless using normal row model")}console.warn("recomputeAggregates is deprecated, please call api.refreshClientSideRowModel('aggregate') instead");this.clientSideRowModel.refreshModel({step:p.Constants.STEP_AGGREGATE})};e.prototype.sizeColumnsToFit=function(){this.gridPanel.sizeColumnsToFit()};e.prototype.showLoadingOverlay=function(){this.gridPanel.showLoadingOverlay()};e.prototype.showNoRowsOverlay=function(){this.gridPanel.showNoRowsOverlay()};e.prototype.hideOverlay=function(){this.gridPanel.hideOverlay()};e.prototype.isNodeSelected=function(e){console.log("ag-Grid: no need to call api.isNodeSelected(), just call node.isSelected() instead");return e.isSelected()};e.prototype.getSelectedNodesById=function(){console.error("ag-Grid: since version 3.4, getSelectedNodesById no longer exists, use getSelectedNodes() instead");return null};e.prototype.getSelectedNodes=function(){return this.selectionController.getSelectedNodes()};e.prototype.getSelectedRows=function(){return this.selectionController.getSelectedRows()};e.prototype.getBestCostNodeSelection=function(){return this.selectionController.getBestCostNodeSelection()};e.prototype.getRenderedNodes=function(){return this.rowRenderer.getRenderedNodes()};e.prototype.ensureColIndexVisible=function(e){console.warn("ag-Grid: ensureColIndexVisible(index) no longer supported, use ensureColumnVisible(colKey) instead.")};e.prototype.ensureColumnVisible=function(e){this.gridPanel.ensureColumnVisible(e)};e.prototype.ensureIndexVisible=function(e,t){this.gridPanel.ensureIndexVisible(e,t)};e.prototype.ensureNodeVisible=function(e,t){this.gridCore.ensureNodeVisible(e,t)};e.prototype.forEachLeafNode=function(e){if(b.Utils.missing(this.clientSideRowModel)){console.log("cannot call forEachNode unless using normal row model")}this.clientSideRowModel.forEachLeafNode(e)};e.prototype.forEachNode=function(e){this.rowModel.forEachNode(e)};e.prototype.forEachNodeAfterFilter=function(e){if(b.Utils.missing(this.clientSideRowModel)){console.log("cannot call forEachNodeAfterFilter unless using normal row model")}this.clientSideRowModel.forEachNodeAfterFilter(e)};e.prototype.forEachNodeAfterFilterAndSort=function(e){if(b.Utils.missing(this.clientSideRowModel)){console.log("cannot call forEachNodeAfterFilterAndSort unless using normal row model")}this.clientSideRowModel.forEachNodeAfterFilterAndSort(e)};e.prototype.getFilterApiForColDef=function(e){console.warn("ag-grid API method getFilterApiForColDef deprecated, use getFilterApi instead");return this.getFilterInstance(e)};e.prototype.getFilterInstance=function(e){var t=this.columnController.getPrimaryColumn(e);if(t){return this.filterManager.getFilterComponent(t).resolveNow(null,(function(e){return e}))}};e.prototype.getFilterApi=function(e){console.warn("ag-Grid: getFilterApi is deprecated, use getFilterInstance instead");return this.getFilterInstance(e)};e.prototype.destroyFilter=function(e){var t=this.columnController.getPrimaryColumn(e);if(t){return this.filterManager.destroyFilter(t,"filterDestroyed")}};e.prototype.getColumnDef=function(e){var t=this.columnController.getPrimaryColumn(e);if(t){return t.getColDef()}else{return null}};e.prototype.onFilterChanged=function(){this.filterManager.onFilterChanged()};e.prototype.onSortChanged=function(){this.sortController.onSortChanged()};e.prototype.setSortModel=function(e,t){if(t===void 0){t="api"}this.sortController.setSortModel(e,t)};e.prototype.getSortModel=function(){return this.sortController.getSortModel()};e.prototype.setFilterModel=function(e){this.filterManager.setFilterModel(e)};e.prototype.getFilterModel=function(){return this.filterManager.getFilterModel()};e.prototype.getFocusedCell=function(){return this.focusedCellController.getFocusedCell()};e.prototype.clearFocusedCell=function(){return this.focusedCellController.clearFocusedCell()};e.prototype.setFocusedCell=function(e,t,i){this.focusedCellController.setFocusedCell(e,t,i,true)};e.prototype.setSuppressRowDrag=function(e){this.gridOptionsWrapper.setProperty(c.GridOptionsWrapper.PROP_SUPPRESS_ROW_DRAG,e)};e.prototype.setHeaderHeight=function(e){this.gridOptionsWrapper.setProperty(c.GridOptionsWrapper.PROP_HEADER_HEIGHT,e);this.doLayout()};e.prototype.setGridAutoHeight=function(e){this.gridOptionsWrapper.setProperty(c.GridOptionsWrapper.PROP_GRID_AUTO_HEIGHT,e)};e.prototype.getPreferredWidth=function(){return this.gridCore.getPreferredWidth()};e.prototype.setGroupHeaderHeight=function(e){this.gridOptionsWrapper.setProperty(c.GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT,e);this.doLayout()};e.prototype.setFloatingFiltersHeight=function(e){this.gridOptionsWrapper.setProperty(c.GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT,e);this.doLayout()};e.prototype.setPivotGroupHeaderHeight=function(e){this.gridOptionsWrapper.setProperty(c.GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT,e);this.doLayout()};e.prototype.setPivotHeaderHeight=function(e){this.gridOptionsWrapper.setProperty(c.GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT,e);this.doLayout()};e.prototype.showToolPanel=function(e){this.gridCore.showToolPanel(e)};e.prototype.setSuppressClipboardPaste=function(e){this.gridOptionsWrapper.setProperty(c.GridOptionsWrapper.PROP_SUPPRESS_CLIPBOARD_PASTE,e)};e.prototype.isToolPanelShowing=function(){return this.gridCore.isToolPanelShowing()};e.prototype.doLayout=function(){this.gridPanel.checkViewportAndScrolls()};e.prototype.resetRowHeights=function(){if(b.Utils.exists(this.clientSideRowModel)){this.clientSideRowModel.resetRowHeights()}};e.prototype.setGroupRemoveSingleChildren=function(e){this.gridOptionsWrapper.setProperty(c.GridOptionsWrapper.PROP_GROUP_REMOVE_SINGLE_CHILDREN,e)};e.prototype.setGroupRemoveLowestSingleChildren=function(e){this.gridOptionsWrapper.setProperty(c.GridOptionsWrapper.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN,e)};e.prototype.onRowHeightChanged=function(){if(b.Utils.exists(this.clientSideRowModel)){this.clientSideRowModel.onRowHeightChanged()}};e.prototype.getValue=function(e,t){var i=this.columnController.getPrimaryColumn(e);if(b.Utils.missing(i)){i=this.columnController.getGridColumn(e)}if(b.Utils.missing(i)){return null}else{return this.valueService.getValue(i,t)}};e.prototype.addEventListener=function(e,t){var i=this.gridOptionsWrapper.useAsyncEvents();this.eventService.addEventListener(e,t,i)};e.prototype.addGlobalListener=function(e){var t=this.gridOptionsWrapper.useAsyncEvents();this.eventService.addGlobalListener(e,t)};e.prototype.removeEventListener=function(e,t){var i=this.gridOptionsWrapper.useAsyncEvents();this.eventService.removeEventListener(e,t,i)};e.prototype.removeGlobalListener=function(e){var t=this.gridOptionsWrapper.useAsyncEvents();this.eventService.removeGlobalListener(e,t)};e.prototype.dispatchEvent=function(e){this.eventService.dispatchEvent(e)};e.prototype.destroy=function(){this.context.destroy()};e.prototype.resetQuickFilter=function(){this.rowModel.forEachNode((function(e){return e.quickFilterAggregateText=null}))};e.prototype.getRangeSelections=function(){if(this.rangeController){return this.rangeController.getCellRanges()}else{console.warn("ag-Grid: cell range selection is only available in ag-Grid Enterprise");return null}};e.prototype.camelCaseToHumanReadable=function(e){return b.Utils.camelCaseToHumanText(e)};e.prototype.addRangeSelection=function(e){if(!this.rangeController){console.warn("ag-Grid: cell range selection is only available in ag-Grid Enterprise")}this.rangeController.addRange(e)};e.prototype.clearRangeSelection=function(){if(!this.rangeController){console.warn("ag-Grid: cell range selection is only available in ag-Grid Enterprise")}this.rangeController.clearSelection()};e.prototype.copySelectedRowsToClipboard=function(e,t){if(!this.clipboardService){console.warn("ag-Grid: clipboard is only available in ag-Grid Enterprise")}this.clipboardService.copySelectedRowsToClipboard(e,t)};e.prototype.copySelectedRangeToClipboard=function(e){if(!this.clipboardService){console.warn("ag-Grid: clipboard is only available in ag-Grid Enterprise")}this.clipboardService.copySelectedRangeToClipboard(e)};e.prototype.copySelectedRangeDown=function(){if(!this.clipboardService){console.warn("ag-Grid: clipboard is only available in ag-Grid Enterprise")}this.clipboardService.copyRangeDown()};e.prototype.showColumnMenuAfterButtonClick=function(e,t){var i=this.columnController.getPrimaryColumn(e);this.menuFactory.showMenuAfterButtonClick(i,t)};e.prototype.showColumnMenuAfterMouseClick=function(e,t){var i=this.columnController.getPrimaryColumn(e);this.menuFactory.showMenuAfterMouseEvent(i,t)};e.prototype.hidePopupMenu=function(){if(this.contextMenuFactory){this.contextMenuFactory.hideActiveMenu()}this.menuFactory.hideActiveMenu()};e.prototype.setPopupParent=function(e){this.gridOptionsWrapper.setProperty(c.GridOptionsWrapper.PROP_POPUP_PARENT,e)};e.prototype.tabToNextCell=function(){return this.rowRenderer.tabToNextCell(false)};e.prototype.tabToPreviousCell=function(){return this.rowRenderer.tabToNextCell(true)};e.prototype.getCellRendererInstances=function(e){if(e===void 0){e={}}return this.rowRenderer.getCellRendererInstances(e)};e.prototype.getCellEditorInstances=function(e){if(e===void 0){e={}}return this.rowRenderer.getCellEditorInstances(e)};e.prototype.getEditingCells=function(){return this.rowRenderer.getEditingCells()};e.prototype.stopEditing=function(e){if(e===void 0){e=false}this.rowRenderer.stopEditing(e)};e.prototype.startEditingCell=function(e){var t=this.columnController.getGridColumn(e.colKey);if(!t){console.warn("ag-Grid: no column found for "+e.colKey);return}var i={rowIndex:e.rowIndex,floating:e.rowPinned,column:t};var n=new y.GridCell(i);var r=b.Utils.missing(e.rowPinned);if(r){this.gridPanel.ensureIndexVisible(e.rowIndex)}this.rowRenderer.startEditingCell(n,e.keyPress,e.charPress)};e.prototype.addAggFunc=function(e,t){if(this.aggFuncService){this.aggFuncService.addAggFunc(e,t)}};e.prototype.addAggFuncs=function(e){if(this.aggFuncService){this.aggFuncService.addAggFuncs(e)}};e.prototype.clearAggFuncs=function(){if(this.aggFuncService){this.aggFuncService.clear()}};e.prototype.updateRowData=function(e){var t=null;if(this.clientSideRowModel){t=this.clientSideRowModel.updateRowData(e)}else if(this.infinitePageRowModel){this.infinitePageRowModel.updateRowData(e)}else{console.error("ag-Grid: updateRowData() only works with ClientSideRowModel and InfiniteRowModel.")}if(!this.gridOptionsWrapper.isSuppressChangeDetection()){this.rowRenderer.refreshCells()}return t};e.prototype.batchUpdateRowData=function(e,t){if(!this.clientSideRowModel){console.error("ag-Grid: api.batchUpdateRowData() only works with ClientSideRowModel.");return}this.clientSideRowModel.batchUpdateRowData(e,t)};e.prototype.insertItemsAtIndex=function(e,t,i){if(i===void 0){i=false}console.warn("ag-Grid: insertItemsAtIndex() is deprecated, use updateRowData(transaction) instead.");this.updateRowData({add:t,addIndex:e,update:null,remove:null})};e.prototype.removeItems=function(e,t){if(t===void 0){t=false}console.warn("ag-Grid: removeItems() is deprecated, use updateRowData(transaction) instead.");var i=e.map((function(e){return e.data}));this.updateRowData({add:null,addIndex:null,update:null,remove:i})};e.prototype.addItems=function(e,t){if(t===void 0){t=false}console.warn("ag-Grid: addItems() is deprecated, use updateRowData(transaction) instead.");this.updateRowData({add:e,addIndex:null,update:null,remove:null})};e.prototype.refreshVirtualPageCache=function(){console.warn("ag-Grid: refreshVirtualPageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead");this.refreshInfiniteCache()};e.prototype.refreshInfinitePageCache=function(){console.warn("ag-Grid: refreshInfinitePageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead");this.refreshInfiniteCache()};e.prototype.refreshInfiniteCache=function(){if(this.infinitePageRowModel){this.infinitePageRowModel.refreshCache()}else{console.warn("ag-Grid: api.refreshInfiniteCache is only available when rowModelType='infinite'.")}};e.prototype.purgeVirtualPageCache=function(){console.warn("ag-Grid: purgeVirtualPageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead");this.purgeInfinitePageCache()};e.prototype.purgeInfinitePageCache=function(){console.warn("ag-Grid: purgeInfinitePageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead");this.purgeInfiniteCache()};e.prototype.purgeInfiniteCache=function(){if(this.infinitePageRowModel){this.infinitePageRowModel.purgeCache()}else{console.warn("ag-Grid: api.purgeInfiniteCache is only available when rowModelType='infinite'.")}};e.prototype.purgeEnterpriseCache=function(e){console.warn("ag-grid: since version 18.x, api.purgeEnterpriseCache() should be replaced with api.purgeServerSideCache()");this.purgeServerSideCache(e)};e.prototype.purgeServerSideCache=function(e){if(this.serverSideRowModel){this.serverSideRowModel.purgeCache(e)}else{console.warn("ag-Grid: api.purgeServerSideCache is only available when rowModelType='enterprise'.")}};e.prototype.getVirtualRowCount=function(){console.warn("ag-Grid: getVirtualRowCount() is now called getInfiniteRowCount(), please call getInfiniteRowCount() instead");return this.getInfiniteRowCount()};e.prototype.getInfiniteRowCount=function(){if(this.infinitePageRowModel){return this.infinitePageRowModel.getVirtualRowCount()}else{console.warn("ag-Grid: api.getVirtualRowCount is only available when rowModelType='virtual'.")}};e.prototype.isMaxRowFound=function(){if(this.infinitePageRowModel){return this.infinitePageRowModel.isMaxRowFound()}else{console.warn("ag-Grid: api.isMaxRowFound is only available when rowModelType='virtual'.")}};e.prototype.setVirtualRowCount=function(e,t){console.warn("ag-Grid: setVirtualRowCount() is now called setInfiniteRowCount(), please call setInfiniteRowCount() instead");this.setInfiniteRowCount(e,t)};e.prototype.setInfiniteRowCount=function(e,t){if(this.infinitePageRowModel){this.infinitePageRowModel.setVirtualRowCount(e,t)}else{console.warn("ag-Grid: api.setVirtualRowCount is only available when rowModelType='virtual'.")}};e.prototype.getVirtualPageState=function(){console.warn("ag-Grid: getVirtualPageState() is now called getCacheBlockState(), please call getCacheBlockState() instead");return this.getCacheBlockState()};e.prototype.getInfinitePageState=function(){console.warn("ag-Grid: getInfinitePageState() is now called getCacheBlockState(), please call getCacheBlockState() instead");return this.getCacheBlockState()};e.prototype.getCacheBlockState=function(){if(this.infinitePageRowModel){return this.infinitePageRowModel.getBlockState()}else if(this.serverSideRowModel){return this.serverSideRowModel.getBlockState()}else{console.warn("ag-Grid: api.getCacheBlockState() is only available when rowModelType='infinite' or rowModelType='serverSide'.")}};e.prototype.checkGridSize=function(){this.gridPanel.setBodyAndHeaderHeights()};e.prototype.getFirstRenderedRow=function(){console.log("in ag-Grid v12, getFirstRenderedRow() was renamed to getFirstDisplayedRow()");return this.getFirstDisplayedRow()};e.prototype.getFirstDisplayedRow=function(){return this.rowRenderer.getFirstVirtualRenderedRow()};e.prototype.getLastRenderedRow=function(){console.log("in ag-Grid v12, getLastRenderedRow() was renamed to getLastDisplayedRow()");return this.getLastDisplayedRow()};e.prototype.getLastDisplayedRow=function(){return this.rowRenderer.getLastVirtualRenderedRow()};e.prototype.getDisplayedRowAtIndex=function(e){return this.rowModel.getRow(e)};e.prototype.getDisplayedRowCount=function(){return this.rowModel.getRowCount()};e.prototype.paginationIsLastPageFound=function(){return this.paginationProxy.isLastPageFound()};e.prototype.paginationGetPageSize=function(){return this.paginationProxy.getPageSize()};e.prototype.paginationSetPageSize=function(e){this.gridOptionsWrapper.setProperty("paginationPageSize",e)};e.prototype.paginationGetCurrentPage=function(){return this.paginationProxy.getCurrentPage()};e.prototype.paginationGetTotalPages=function(){return this.paginationProxy.getTotalPages()};e.prototype.paginationGetRowCount=function(){return this.paginationProxy.getTotalRowCount()};e.prototype.paginationGoToNextPage=function(){this.paginationProxy.goToNextPage()};e.prototype.paginationGoToPreviousPage=function(){this.paginationProxy.goToPreviousPage()};e.prototype.paginationGoToFirstPage=function(){this.paginationProxy.goToFirstPage()};e.prototype.paginationGoToLastPage=function(){this.paginationProxy.goToLastPage()};e.prototype.paginationGoToPage=function(e){this.paginationProxy.goToPage(e)};n([h.Autowired("immutableService"),r("design:type",A.ImmutableService)],e.prototype,"immutableService",void 0);n([h.Autowired("csvCreator"),r("design:type",o.CsvCreator)],e.prototype,"csvCreator",void 0);n([h.Optional("excelCreator"),r("design:type",Object)],e.prototype,"excelCreator",void 0);n([h.Autowired("gridCore"),r("design:type",g.GridCore)],e.prototype,"gridCore",void 0);n([h.Autowired("rowRenderer"),r("design:type",a.RowRenderer)],e.prototype,"rowRenderer",void 0);n([h.Autowired("filterManager"),r("design:type",s.FilterManager)],e.prototype,"filterManager",void 0);n([h.Autowired("columnController"),r("design:type",l.ColumnController)],e.prototype,"columnController",void 0);n([h.Autowired("selectionController"),r("design:type",u.SelectionController)],e.prototype,"selectionController",void 0);n([h.Autowired("gridOptionsWrapper"),r("design:type",c.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([h.Autowired("valueService"),r("design:type",d.ValueService)],e.prototype,"valueService",void 0);n([h.Autowired("alignedGridsService"),r("design:type",x.AlignedGridsService)],e.prototype,"alignedGridsService",void 0);n([h.Autowired("eventService"),r("design:type",f.EventService)],e.prototype,"eventService",void 0);n([h.Autowired("pinnedRowModel"),r("design:type",T.PinnedRowModel)],e.prototype,"pinnedRowModel",void 0);n([h.Autowired("context"),r("design:type",h.Context)],e.prototype,"context",void 0);n([h.Autowired("rowModel"),r("design:type",Object)],e.prototype,"rowModel",void 0);n([h.Autowired("sortController"),r("design:type",m.SortController)],e.prototype,"sortController",void 0);n([h.Autowired("paginationProxy"),r("design:type",C.PaginationProxy)],e.prototype,"paginationProxy",void 0);n([h.Autowired("focusedCellController"),r("design:type",v.FocusedCellController)],e.prototype,"focusedCellController",void 0);n([h.Optional("rangeController"),r("design:type",Object)],e.prototype,"rangeController",void 0);n([h.Optional("clipboardService"),r("design:type",Object)],e.prototype,"clipboardService",void 0);n([h.Optional("aggFuncService"),r("design:type",Object)],e.prototype,"aggFuncService",void 0);n([h.Autowired("menuFactory"),r("design:type",Object)],e.prototype,"menuFactory",void 0);n([h.Optional("contextMenuFactory"),r("design:type",Object)],e.prototype,"contextMenuFactory",void 0);n([h.Autowired("cellRendererFactory"),r("design:type",_.CellRendererFactory)],e.prototype,"cellRendererFactory",void 0);n([h.Autowired("cellEditorFactory"),r("design:type",w.CellEditorFactory)],e.prototype,"cellEditorFactory",void 0);n([h.Autowired("valueCache"),r("design:type",E.ValueCache)],e.prototype,"valueCache",void 0);n([h.Optional("toolPanelComp"),r("design:type",Object)],e.prototype,"toolPanelComp",void 0);n([h.Autowired("animationFrameService"),r("design:type",S.AnimationFrameService)],e.prototype,"animationFrameService",void 0);n([h.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);e=n([h.Bean("gridApi")],e);return e}();t.GridApi=D},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(4);var a=i(0);var s=function(){function e(){}e.prototype.sizeColumnsToFit=function(e){this.columnController.sizeColumnsToFit(e,"api")};e.prototype.setColumnGroupOpened=function(e,t){this.columnController.setColumnGroupOpened(e,t,"api")};e.prototype.getColumnGroup=function(e,t){return this.columnController.getColumnGroup(e,t)};e.prototype.getOriginalColumnGroup=function(e){return this.columnController.getOriginalColumnGroup(e)};e.prototype.getDisplayNameForColumn=function(e,t){return this.columnController.getDisplayNameForColumn(e,t)};e.prototype.getDisplayNameForColumnGroup=function(e,t){return this.columnController.getDisplayNameForColumnGroup(e,t)};e.prototype.getColumn=function(e){return this.columnController.getPrimaryColumn(e)};e.prototype.setColumnState=function(e){return this.columnController.setColumnState(e,"api")};e.prototype.getColumnState=function(){return this.columnController.getColumnState()};e.prototype.resetColumnState=function(){this.columnController.resetColumnState("api")};e.prototype.getColumnGroupState=function(){return this.columnController.getColumnGroupState()};e.prototype.setColumnGroupState=function(e){this.columnController.setColumnGroupState(e,"api")};e.prototype.resetColumnGroupState=function(){this.columnController.resetColumnGroupState("api")};e.prototype.isPinning=function(){return this.columnController.isPinningLeft()||this.columnController.isPinningRight()};e.prototype.isPinningLeft=function(){return this.columnController.isPinningLeft()};e.prototype.isPinningRight=function(){return this.columnController.isPinningRight()};e.prototype.getDisplayedColAfter=function(e){return this.columnController.getDisplayedColAfter(e)};e.prototype.getDisplayedColBefore=function(e){return this.columnController.getDisplayedColBefore(e)};e.prototype.setColumnVisible=function(e,t){this.columnController.setColumnVisible(e,t,"api")};e.prototype.setColumnsVisible=function(e,t){this.columnController.setColumnsVisible(e,t,"api")};e.prototype.setColumnPinned=function(e,t){this.columnController.setColumnPinned(e,t,"api")};e.prototype.setColumnsPinned=function(e,t){this.columnController.setColumnsPinned(e,t,"api")};e.prototype.getAllColumns=function(){return this.columnController.getAllPrimaryColumns()};e.prototype.getAllGridColumns=function(){return this.columnController.getAllGridColumns()};e.prototype.getDisplayedLeftColumns=function(){return this.columnController.getDisplayedLeftColumns()};e.prototype.getDisplayedCenterColumns=function(){return this.columnController.getDisplayedCenterColumns()};e.prototype.getDisplayedRightColumns=function(){return this.columnController.getDisplayedRightColumns()};e.prototype.getAllDisplayedColumns=function(){return this.columnController.getAllDisplayedColumns()};e.prototype.getAllDisplayedVirtualColumns=function(){return this.columnController.getAllDisplayedVirtualColumns()};e.prototype.moveColumn=function(e,t){if(typeof e==="number"){console.log("ag-Grid: you are using moveColumn(fromIndex, toIndex) - moveColumn takes a column key and a destination index, not two indexes, to move with indexes use moveColumnByIndex(from,to) instead");this.columnController.moveColumnByIndex(e,t,"api")}else{this.columnController.moveColumn(e,t,"api")}};e.prototype.moveColumnByIndex=function(e,t){this.columnController.moveColumnByIndex(e,t,"api")};e.prototype.moveColumns=function(e,t){this.columnController.moveColumns(e,t,"api")};e.prototype.moveRowGroupColumn=function(e,t){this.columnController.moveRowGroupColumn(e,t)};e.prototype.setColumnAggFunc=function(e,t){this.columnController.setColumnAggFunc(e,t)};e.prototype.setColumnWidth=function(e,t,i){if(i===void 0){i=true}this.columnController.setColumnWidth(e,t,false,i)};e.prototype.setPivotMode=function(e){this.columnController.setPivotMode(e)};e.prototype.isPivotMode=function(){return this.columnController.isPivotMode()};e.prototype.getSecondaryPivotColumn=function(e,t){return this.columnController.getSecondaryPivotColumn(e,t)};e.prototype.setValueColumns=function(e){this.columnController.setValueColumns(e,"api")};e.prototype.getValueColumns=function(){return this.columnController.getValueColumns()};e.prototype.removeValueColumn=function(e){this.columnController.removeValueColumn(e,"api")};e.prototype.removeValueColumns=function(e){this.columnController.removeValueColumns(e,"api")};e.prototype.addValueColumn=function(e){this.columnController.addValueColumn(e,"api")};e.prototype.addValueColumns=function(e){this.columnController.addValueColumns(e,"api")};e.prototype.setRowGroupColumns=function(e){this.columnController.setRowGroupColumns(e,"api")};e.prototype.removeRowGroupColumn=function(e){this.columnController.removeRowGroupColumn(e,"api")};e.prototype.removeRowGroupColumns=function(e){this.columnController.removeRowGroupColumns(e,"api")};e.prototype.addRowGroupColumn=function(e){this.columnController.addRowGroupColumn(e,"api")};e.prototype.addRowGroupColumns=function(e){this.columnController.addRowGroupColumns(e,"api")};e.prototype.getRowGroupColumns=function(){return this.columnController.getRowGroupColumns()};e.prototype.setPivotColumns=function(e){this.columnController.setPivotColumns(e,"api")};e.prototype.removePivotColumn=function(e){this.columnController.removePivotColumn(e,"api")};e.prototype.removePivotColumns=function(e){this.columnController.removePivotColumns(e,"api")};e.prototype.addPivotColumn=function(e){this.columnController.addPivotColumn(e,"api")};e.prototype.addPivotColumns=function(e){this.columnController.addPivotColumns(e,"api")};e.prototype.getPivotColumns=function(){return this.columnController.getPivotColumns()};e.prototype.getLeftDisplayedColumnGroups=function(){return this.columnController.getLeftDisplayedColumnGroups()};e.prototype.getCenterDisplayedColumnGroups=function(){return this.columnController.getCenterDisplayedColumnGroups()};e.prototype.getRightDisplayedColumnGroups=function(){return this.columnController.getRightDisplayedColumnGroups()};e.prototype.getAllDisplayedColumnGroups=function(){return this.columnController.getAllDisplayedColumnGroups()};e.prototype.autoSizeColumn=function(e){return this.columnController.autoSizeColumn(e,"api")};e.prototype.autoSizeColumns=function(e){return this.columnController.autoSizeColumns(e,"api")};e.prototype.autoSizeAllColumns=function(){this.columnController.autoSizeAllColumns("api")};e.prototype.setSecondaryColumns=function(e){this.columnController.setSecondaryColumns(e,"api")};e.prototype.columnGroupOpened=function(e,t){console.error("ag-Grid: columnGroupOpened no longer exists, use setColumnGroupOpened");this.setColumnGroupOpened(e,t)};e.prototype.hideColumns=function(e,t){console.error("ag-Grid: hideColumns is deprecated, use setColumnsVisible");this.columnController.setColumnsVisible(e,!t,"api")};e.prototype.hideColumn=function(e,t){console.error("ag-Grid: hideColumn is deprecated, use setColumnVisible");this.columnController.setColumnVisible(e,!t,"api")};e.prototype.setState=function(e){console.error("ag-Grid: setState is deprecated, use setColumnState");return this.setColumnState(e)};e.prototype.getState=function(){console.error("ag-Grid: getState is deprecated, use getColumnState");return this.getColumnState()};e.prototype.resetState=function(){console.error("ag-Grid: resetState is deprecated, use resetColumnState");this.resetColumnState()};e.prototype.getAggregationColumns=function(){console.error("ag-Grid: getAggregationColumns is deprecated, use getValueColumns");return this.columnController.getValueColumns()};e.prototype.removeAggregationColumn=function(e){console.error("ag-Grid: removeAggregationColumn is deprecated, use removeValueColumn");this.columnController.removeValueColumn(e,"api")};e.prototype.removeAggregationColumns=function(e){console.error("ag-Grid: removeAggregationColumns is deprecated, use removeValueColumns");this.columnController.removeValueColumns(e,"api")};e.prototype.addAggregationColumn=function(e){console.error("ag-Grid: addAggregationColumn is deprecated, use addValueColumn");this.columnController.addValueColumn(e,"api")};e.prototype.addAggregationColumns=function(e){console.error("ag-Grid: addAggregationColumns is deprecated, use addValueColumns");this.columnController.addValueColumns(e,"api")};e.prototype.setColumnAggFunction=function(e,t){console.error("ag-Grid: setColumnAggFunction is deprecated, use setColumnAggFunc");this.columnController.setColumnAggFunc(e,t,"api")};e.prototype.getDisplayNameForCol=function(e){console.error("ag-Grid: getDisplayNameForCol is deprecated, use getDisplayNameForColumn");return this.getDisplayNameForColumn(e,null)};n([a.Autowired("columnController"),r("design:type",o.ColumnController)],e.prototype,"columnController",void 0);e=n([a.Bean("columnApi")],e);return e}();t.ColumnApi=s},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:true});var r=i(1);var o=i(13);var a=new r.NumberSequence;var s=function(e){n(t,e);function t(t){var i=e.call(this)||this;i.childComponents=[];i.annotatedEventListeners=[];i.visible=true;i.compId=a.next();if(t){i.setTemplate(t)}return i}t.prototype.getCompId=function(){return this.compId};t.prototype.instantiate=function(e){this.instantiateRecurse(this.getGui(),e)};t.prototype.instantiateRecurse=function(e,t){var i=this;var n=r.Utils.copyNodeList(e.childNodes);n.forEach((function(n){var r=t.createComponent(n,(function(e){var t=i.getAttrLists(n);i.copyAttributesFromNode(t,e.getGui());i.createChildAttributes(t,e);i.addEventListenersToComponent(t,e)}));if(r){i.swapComponentForNode(r,e,n)}else{if(n.childNodes){i.instantiateRecurse(n,t)}if(n instanceof HTMLElement){var o=i.getAttrLists(n);i.addEventListenersToElement(o,n)}}}))};t.prototype.getAttrLists=function(e){var t={bindings:[],events:[],normal:[]};r.Utils.iterateNamedNodeMap(e.attributes,(function(e,i){var n=e.substr(0,1);if(n==="("){var r=e.replace("(","").replace(")","");t.events.push({name:r,value:i})}else if(n==="["){var o=e.replace("[","").replace("]","");t.bindings.push({name:o,value:i})}else{t.normal.push({name:e,value:i})}}));return t};t.prototype.addEventListenersToElement=function(e,t){var i=this;this.addEventListenerCommon(e,(function(e,n){i.addDestroyableEventListener(t,e,n)}))};t.prototype.addEventListenersToComponent=function(e,t){var i=this;this.addEventListenerCommon(e,(function(e,n){i.addDestroyableEventListener(t,e,n)}))};t.prototype.addEventListenerCommon=function(e,t){var i=this;var n=this.getAgComponentMetaData("methods");e.events.forEach((function(e){var o=e.value;var a=r.Utils.find(n,"alias",o);var s=r.Utils.exists(a)?a.methodName:o;var l=i[s];if(typeof l!=="function"){console.warn("ag-Grid: count not find callback "+o);return}var u=r.Utils.hyphenToCamelCase(e.name);t(u,l.bind(i))}))};t.prototype.createChildAttributes=function(e,t){var i=this;var n={};e.normal.forEach((function(e){var t=r.Utils.hyphenToCamelCase(e.name);n[t]=e.value}));e.bindings.forEach((function(e){var t=r.Utils.hyphenToCamelCase(e.name);n[t]=i[e.value]}));t.props=n};t.prototype.copyAttributesFromNode=function(e,t){e.normal.forEach((function(e){t.setAttribute(e.name,e.value)}))};t.prototype.swapComponentForNode=function(e,t,i){var n=e.getGui();t.replaceChild(n,i);t.insertBefore(document.createComment(i.nodeName),n);this.childComponents.push(e);this.swapInComponentForQuerySelectors(e,i)};t.prototype.swapInComponentForQuerySelectors=function(e,t){var i=Object.getPrototypeOf(this);var n=this;while(i!=null){var r=i.__agComponentMetaData;var o=i.constructor.name;if(r&&r[o]&&r[o].querySelectors){r[o].querySelectors.forEach((function(i){if(n[i.attributeName]===t){n[i.attributeName]=e}}))}i=Object.getPrototypeOf(i)}};t.prototype.setTemplate=function(e){var t=r.Utils.loadTemplate(e);this.setTemplateFromElement(t)};t.prototype.setTemplateFromElement=function(e){this.eGui=e;this.eGui.__agComponent=this;this.addAnnotatedEventListeners();this.wireQuerySelectors()};t.prototype.wireQuerySelectors=function(){var e=this;if(!this.eGui){return}var t=Object.getPrototypeOf(this);var i=function(){var i=t.__agComponentMetaData;var r=t.constructor.name;if(i&&i[r]&&i[r].querySelectors){var o=n;i[r].querySelectors.forEach((function(t){var i=e.eGui.querySelector(t.querySelector);if(i){var n=i.__agComponent;if(n){o[t.attributeName]=n}else{o[t.attributeName]=i}}else{}}))}t=Object.getPrototypeOf(t)};var n=this;while(t!=null){i()}};t.prototype.addAnnotatedEventListeners=function(){var e=this;this.removeAnnotatedEventListeners();if(!this.eGui){return}var t=this.getAgComponentMetaData("listenerMethods");if(r.Utils.missingOrEmpty(t)){return}if(!this.annotatedEventListeners){this.annotatedEventListeners=[]}t.forEach((function(t){var i=e[t.methodName].bind(e);e.eGui.addEventListener(t.eventName,i);e.annotatedEventListeners.push({eventName:t.eventName,listener:i})}))};t.prototype.getAgComponentMetaData=function(e){var t=[];var i=Object.getPrototypeOf(this);while(i!=null){var n=i.__agComponentMetaData;var r=i.constructor.name;if(n&&n[r]&&n[r][e]){t=t.concat(n[r][e])}i=Object.getPrototypeOf(i)}return t};t.prototype.removeAnnotatedEventListeners=function(){var e=this;if(!this.annotatedEventListeners){return}if(!this.eGui){return}this.annotatedEventListeners.forEach((function(t){e.eGui.removeEventListener(t.eventName,t.listener)}));this.annotatedEventListeners=null};t.prototype.getGui=function(){return this.eGui};t.prototype.setGui=function(e){this.eGui=e};t.prototype.queryForHtmlElement=function(e){return this.eGui.querySelector(e)};t.prototype.queryForHtmlInputElement=function(e){return this.eGui.querySelector(e)};t.prototype.appendChild=function(e){if(r.Utils.isNodeOrElement(e)){this.eGui.appendChild(e)}else{var t=e;this.eGui.appendChild(t.getGui());this.childComponents.push(t)}};t.prototype.addFeature=function(e,t){e.wireBean(t);if(t.destroy){this.addDestroyFunc(t.destroy.bind(t))}};t.prototype.isVisible=function(){return this.visible};t.prototype.setVisible=function(e){if(e!==this.visible){this.visible=e;r.Utils.addOrRemoveCssClass(this.eGui,"ag-hidden",!e);var i={type:t.EVENT_VISIBLE_CHANGED,visible:this.visible};this.dispatchEvent(i)}};t.prototype.addOrRemoveCssClass=function(e,t){r.Utils.addOrRemoveCssClass(this.eGui,e,t)};t.prototype.destroy=function(){e.prototype.destroy.call(this);this.childComponents.forEach((function(e){return e.destroy()}));this.childComponents.length=0;this.removeAnnotatedEventListeners()};t.prototype.addGuiEventListener=function(e,t){var i=this;this.getGui().addEventListener(e,t);this.addDestroyFunc((function(){return i.getGui().removeEventListener(e,t)}))};t.prototype.addCssClass=function(e){r.Utils.addCssClass(this.getGui(),e)};t.prototype.removeCssClass=function(e){r.Utils.removeCssClass(this.getGui(),e)};t.prototype.getAttribute=function(e){var t=this.getGui();if(t){return t.getAttribute(e)}else{return null}};t.prototype.getRefElement=function(e){return this.queryForHtmlElement('[ref="'+e+'"]')};t.EVENT_VISIBLE_CHANGED="visibleChanged";return t}(o.BeanStub);t.Component=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(){}e.STEP_EVERYTHING=0;e.STEP_FILTER=1;e.STEP_SORT=2;e.STEP_MAP=3;e.STEP_AGGREGATE=4;e.STEP_PIVOT=5;e.ROW_BUFFER_SIZE=10;e.LAYOUT_INTERVAL=500;e.BATCH_WAIT_MILLIS=50;e.EXPORT_TYPE_DRAG_COPY="dragCopy";e.EXPORT_TYPE_CLIPBOARD="clipboard";e.EXPORT_TYPE_EXCEL="excel";e.EXPORT_TYPE_CSV="csv";e.KEY_BACKSPACE=8;e.KEY_TAB=9;e.KEY_NEW_LINE=10;e.KEY_ENTER=13;e.KEY_SHIFT=16;e.KEY_ESCAPE=27;e.KEY_SPACE=32;e.KEY_LEFT=37;e.KEY_UP=38;e.KEY_RIGHT=39;e.KEY_DOWN=40;e.KEY_DELETE=46;e.KEY_A=65;e.KEY_C=67;e.KEY_V=86;e.KEY_D=68;e.KEY_F2=113;e.KEY_PAGE_UP=33;e.KEY_PAGE_DOWN=34;e.KEY_PAGE_HOME=36;e.KEY_PAGE_END=35;e.ROW_MODEL_TYPE_INFINITE="infinite";e.ROW_MODEL_TYPE_VIEWPORT="viewport";e.ROW_MODEL_TYPE_CLIENT_SIDE="clientSide";e.ROW_MODEL_TYPE_SERVER_SIDE="serverSide";e.DEPRECATED_ROW_MODEL_TYPE_NORMAL="normal";e.ALWAYS="always";e.ONLY_WHEN_GROUPING="onlyWhenGrouping";e.PINNED_TOP="top";e.PINNED_BOTTOM="bottom";return e}();t.Constants=n},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(3);var a=i(1);var s=i(0);var l=i(2);var u=i(31);var c=i(7);var d=i(6);var f=function(){function e(e,t,i){this.moving=false;this.menuVisible=false;this.filterActive=false;this.eventService=new o.EventService;this.rowGroupActive=false;this.pivotActive=false;this.aggregationActive=false;this.colDef=e;this.visible=!e.hide;this.sort=e.sort;this.sortedAt=e.sortedAt;this.colId=t;this.primary=i;this.lockPosition=e.lockPosition===true;this.lockPinned=e.lockPinned===true;this.lockVisible=e.lockVisible===true}e.prototype.isLockPosition=function(){return this.lockPosition};e.prototype.isLockVisible=function(){return this.lockVisible};e.prototype.isLockPinned=function(){return this.lockPinned};e.prototype.setParent=function(e){this.parent=e};e.prototype.getParent=function(){return this.parent};e.prototype.initialise=function(){this.setPinned(this.colDef.pinned);var e=this.gridOptionsWrapper.getMinColWidth();var t=this.gridOptionsWrapper.getMaxColWidth();if(this.colDef.minWidth){this.minWidth=this.colDef.minWidth}else{this.minWidth=e}if(this.colDef.maxWidth){this.maxWidth=this.colDef.maxWidth}else{this.maxWidth=t}this.actualWidth=this.columnUtils.calculateColInitialWidth(this.colDef);var i=this.gridOptionsWrapper.isSuppressFieldDotNotation();this.fieldContainsDots=a.Utils.exists(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!i;this.tooltipFieldContainsDots=a.Utils.exists(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!i;this.validate()};e.prototype.isEmptyGroup=function(){return false};e.prototype.isRowGroupDisplayed=function(e){if(a.Utils.missing(this.colDef)||a.Utils.missing(this.colDef.showRowGroup)){return false}var t=this.colDef.showRowGroup===true;var i=this.colDef.showRowGroup===e;return t||i};e.prototype.getUniqueId=function(){return this.getId()};e.prototype.isPrimary=function(){return this.primary};e.prototype.isFilterAllowed=function(){return this.primary&&!this.colDef.suppressFilter};e.prototype.isFieldContainsDots=function(){return this.fieldContainsDots};e.prototype.isTooltipFieldContainsDots=function(){return this.tooltipFieldContainsDots};e.prototype.validate=function(){var e=this.colDef;if(!this.gridOptionsWrapper.isEnterprise()){var t=["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","pivot","pivotIndex","aggFunc"];t.forEach((function(t){if(a.Utils.exists(e[t])){console.warn("ag-Grid: "+t+" is only valid in ag-Grid-Enterprise, your column definition should not have "+t)}}))}if(this.gridOptionsWrapper.isTreeData()){var i=["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","pivot","pivotIndex"];i.forEach((function(t){if(a.Utils.exists(e[t])){console.warn("ag-Grid: "+t+" is not possible when doing tree data, your column definition should not have "+t)}}))}if(a.Utils.exists(this.colDef.width)&&typeof this.colDef.width!=="number"){console.warn("ag-Grid: colDef.width should be a number, not "+typeof this.colDef.width)}if(a.Utils.get(this,"colDef.cellRendererParams.restrictToOneGroup",null)){console.warn("ag-Grid: Since ag-grid 11.0.0 cellRendererParams.restrictToOneGroup is deprecated. You should use showRowGroup")}if(a.Utils.get(this,"colDef.cellRendererParams.keyMap",null)){console.warn("ag-Grid: Since ag-grid 11.0.0 cellRendererParams.keyMap is deprecated. You should use colDef.keyCreator")}if(a.Utils.get(this,"colDef.cellRendererParams.keyMap",null)){console.warn("ag-Grid: Since ag-grid 11.0.0 cellRendererParams.keyMap is deprecated. You should use colDef.keyCreator")}if(e.floatingCellRenderer){console.warn("ag-Grid: since v11, floatingCellRenderer is now pinnedRowCellRenderer");this.colDef.pinnedRowCellRenderer=e.floatingCellRenderer}if(e.floatingRendererFramework){console.warn("ag-Grid: since v11, floatingRendererFramework is now pinnedRowCellRendererFramework");this.colDef.pinnedRowCellRendererFramework=e.floatingRendererFramework}if(e.floatingRendererParams){console.warn("ag-Grid: since v11, floatingRendererParams is now pinnedRowCellRendererParams");this.colDef.pinnedRowCellRendererParams=e.floatingRendererParams}if(e.floatingValueFormatter){console.warn("ag-Grid: since v11, floatingValueFormatter is now pinnedRowValueFormatter");this.colDef.pinnedRowValueFormatter=e.floatingValueFormatter}if(e.cellFormatter){console.warn("ag-Grid: since v12, cellFormatter is now valueFormatter");if(a.Utils.missing(this.colDef.valueFormatter)){this.colDef.valueFormatter=e.cellFormatter}}if(e.headerCellTemplate){console.warn("ag-Grid: since v15, headerCellTemplate is gone, use header component instead.")}if(e.headerCellRenderer){console.warn("ag-Grid: since v15, headerCellRenderer is gone, use header component instead.")}if(e.volatile){console.warn("ag-Grid: since v16, colDef.volatile is gone, please check refresh docs on how to refresh specific cells.")}};e.prototype.addEventListener=function(e,t){this.eventService.addEventListener(e,t)};e.prototype.removeEventListener=function(e,t){this.eventService.removeEventListener(e,t)};e.prototype.createIsColumnFuncParams=function(e){return{node:e,data:e.data,column:this,colDef:this.colDef,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()}};e.prototype.isSuppressNavigable=function(e){if(typeof this.colDef.suppressNavigable==="boolean"){return this.colDef.suppressNavigable}if(typeof this.colDef.suppressNavigable==="function"){var t=this.createIsColumnFuncParams(e);var i=this.colDef.suppressNavigable;return i(t)}return false};e.prototype.isCellEditable=function(e){if(e.group&&!this.gridOptionsWrapper.isEnableGroupEdit()){return false}return this.isColumnFunc(e,this.colDef.editable)};e.prototype.isRowDrag=function(e){return this.isColumnFunc(e,this.colDef.rowDrag)};e.prototype.isCellCheckboxSelection=function(e){return this.isColumnFunc(e,this.colDef.checkboxSelection)};e.prototype.isSuppressPaste=function(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)};e.prototype.isResizable=function(){var e=this.gridOptionsWrapper.isEnableColResize();var t=this.colDef&&this.colDef.suppressResize;return e&&!t};e.prototype.isColumnFunc=function(e,t){if(typeof t==="boolean"){return t}if(typeof t==="function"){var i=this.createIsColumnFuncParams(e);var n=t;return n(i)}return false};e.prototype.setMoving=function(t,i){if(i===void 0){i="api"}this.moving=t;this.eventService.dispatchEvent(this.createColumnEvent(e.EVENT_MOVING_CHANGED,i))};e.prototype.createColumnEvent=function(e,t){return{api:this.gridApi,columnApi:this.columnApi,type:e,column:this,columns:[this],source:t}};e.prototype.isMoving=function(){return this.moving};e.prototype.getSort=function(){return this.sort};e.prototype.setSort=function(t,i){if(i===void 0){i="api"}if(this.sort!==t){this.sort=t;this.eventService.dispatchEvent(this.createColumnEvent(e.EVENT_SORT_CHANGED,i))}};e.prototype.setMenuVisible=function(t,i){if(i===void 0){i="api"}if(this.menuVisible!==t){this.menuVisible=t;this.eventService.dispatchEvent(this.createColumnEvent(e.EVENT_MENU_VISIBLE_CHANGED,i))}};e.prototype.isMenuVisible=function(){return this.menuVisible};e.prototype.isSortAscending=function(){return this.sort===e.SORT_ASC};e.prototype.isSortDescending=function(){return this.sort===e.SORT_DESC};e.prototype.isSortNone=function(){return a.Utils.missing(this.sort)};e.prototype.isSorting=function(){return a.Utils.exists(this.sort)};e.prototype.getSortedAt=function(){return this.sortedAt};e.prototype.setSortedAt=function(e){this.sortedAt=e};e.prototype.setAggFunc=function(e){this.aggFunc=e};e.prototype.getAggFunc=function(){return this.aggFunc};e.prototype.getLeft=function(){return this.left};e.prototype.getOldLeft=function(){return this.oldLeft};e.prototype.getRight=function(){return this.left+this.actualWidth};e.prototype.setLeft=function(t,i){if(i===void 0){i="api"}this.oldLeft=this.left;if(this.left!==t){this.left=t;this.eventService.dispatchEvent(this.createColumnEvent(e.EVENT_LEFT_CHANGED,i))}};e.prototype.isFilterActive=function(){return this.filterActive};e.prototype.setFilterActive=function(t,i){if(i===void 0){i="api"}if(this.filterActive!==t){this.filterActive=t;this.eventService.dispatchEvent(this.createColumnEvent(e.EVENT_FILTER_ACTIVE_CHANGED,i))}this.eventService.dispatchEvent(this.createColumnEvent(e.EVENT_FILTER_CHANGED,i))};e.prototype.setPinned=function(t){if(t===true||t===e.PINNED_LEFT){this.pinned=e.PINNED_LEFT}else if(t===e.PINNED_RIGHT){this.pinned=e.PINNED_RIGHT}else{this.pinned=null}};e.prototype.setFirstRightPinned=function(t,i){if(i===void 0){i="api"}if(this.firstRightPinned!==t){this.firstRightPinned=t;this.eventService.dispatchEvent(this.createColumnEvent(e.EVENT_FIRST_RIGHT_PINNED_CHANGED,i))}};e.prototype.setLastLeftPinned=function(t,i){if(i===void 0){i="api"}if(this.lastLeftPinned!==t){this.lastLeftPinned=t;this.eventService.dispatchEvent(this.createColumnEvent(e.EVENT_LAST_LEFT_PINNED_CHANGED,i))}};e.prototype.isFirstRightPinned=function(){return this.firstRightPinned};e.prototype.isLastLeftPinned=function(){return this.lastLeftPinned};e.prototype.isPinned=function(){return this.pinned===e.PINNED_LEFT||this.pinned===e.PINNED_RIGHT};e.prototype.isPinnedLeft=function(){return this.pinned===e.PINNED_LEFT};e.prototype.isPinnedRight=function(){return this.pinned===e.PINNED_RIGHT};e.prototype.getPinned=function(){return this.pinned};e.prototype.setVisible=function(t,i){if(i===void 0){i="api"}var n=t===true;if(this.visible!==n){this.visible=n;this.eventService.dispatchEvent(this.createColumnEvent(e.EVENT_VISIBLE_CHANGED,i))}};e.prototype.isVisible=function(){return this.visible};e.prototype.getColDef=function(){return this.colDef};e.prototype.getColumnGroupShow=function(){return this.colDef.columnGroupShow};e.prototype.getColId=function(){return this.colId};e.prototype.getId=function(){return this.getColId()};e.prototype.getDefinition=function(){return this.colDef};e.prototype.getActualWidth=function(){return this.actualWidth};e.prototype.createBaseColDefParams=function(e){var t={node:e,data:e.data,colDef:this.colDef,column:this,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};return t};e.prototype.getColSpan=function(e){if(a.Utils.missing(this.colDef.colSpan)){return 1}else{var t=this.createBaseColDefParams(e);var i=this.colDef.colSpan(t);if(i>1){return i}else{return 1}}};e.prototype.getRowSpan=function(e){if(a.Utils.missing(this.colDef.rowSpan)){return 1}else{var t=this.createBaseColDefParams(e);var i=this.colDef.rowSpan(t);if(i>1){return i}else{return 1}}};e.prototype.setActualWidth=function(t,i){if(i===void 0){i="api"}if(this.actualWidth!==t){this.actualWidth=t;this.eventService.dispatchEvent(this.createColumnEvent(e.EVENT_WIDTH_CHANGED,i))}};e.prototype.isGreaterThanMax=function(e){if(this.maxWidth){return e>this.maxWidth}else{return false}};e.prototype.getMinWidth=function(){return this.minWidth};e.prototype.getMaxWidth=function(){return this.maxWidth};e.prototype.setMinimum=function(e){if(e===void 0){e="api"}this.setActualWidth(this.minWidth,e)};e.prototype.setRowGroupActive=function(t,i){if(i===void 0){i="api"}if(this.rowGroupActive!==t){this.rowGroupActive=t;this.eventService.dispatchEvent(this.createColumnEvent(e.EVENT_ROW_GROUP_CHANGED,i))}};e.prototype.isRowGroupActive=function(){return this.rowGroupActive};e.prototype.setPivotActive=function(t,i){if(i===void 0){i="api"}if(this.pivotActive!==t){this.pivotActive=t;this.eventService.dispatchEvent(this.createColumnEvent(e.EVENT_PIVOT_CHANGED,i))}};e.prototype.isPivotActive=function(){return this.pivotActive};e.prototype.isAnyFunctionActive=function(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()};e.prototype.isAnyFunctionAllowed=function(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()};e.prototype.setValueActive=function(t,i){if(i===void 0){i="api"}if(this.aggregationActive!==t){this.aggregationActive=t;this.eventService.dispatchEvent(this.createColumnEvent(e.EVENT_VALUE_CHANGED,i))}};e.prototype.isValueActive=function(){return this.aggregationActive};e.prototype.isAllowPivot=function(){return this.colDef.enablePivot===true};e.prototype.isAllowValue=function(){return this.colDef.enableValue===true};e.prototype.isAllowRowGroup=function(){return this.colDef.enableRowGroup===true};e.prototype.getMenuTabs=function(e){var t=this.getColDef().menuTabs;if(t==null){t=e}return t};e.EVENT_MOVING_CHANGED="movingChanged";e.EVENT_LEFT_CHANGED="leftChanged";e.EVENT_WIDTH_CHANGED="widthChanged";e.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged";e.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged";e.EVENT_VISIBLE_CHANGED="visibleChanged";e.EVENT_FILTER_CHANGED="filterChanged";e.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged";e.EVENT_SORT_CHANGED="sortChanged";e.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged";e.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged";e.EVENT_PIVOT_CHANGED="columnPivotChanged";e.EVENT_VALUE_CHANGED="columnValueChanged";e.PINNED_RIGHT="right";e.PINNED_LEFT="left";e.SORT_ASC="asc";e.SORT_DESC="desc";n([s.Autowired("gridOptionsWrapper"),r("design:type",l.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([s.Autowired("columnUtils"),r("design:type",u.ColumnUtils)],e.prototype,"columnUtils",void 0);n([s.Autowired("frameworkFactory"),r("design:type",Object)],e.prototype,"frameworkFactory",void 0);n([s.Autowired("columnApi"),r("design:type",c.ColumnApi)],e.prototype,"columnApi",void 0);n([s.Autowired("gridApi"),r("design:type",d.GridApi)],e.prototype,"gridApi",void 0);n([s.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"initialise",null);return e}();t.Column=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});function n(e){return o.bind(this,e)}t.QuerySelector=n;function r(e){return o.bind(this,"[ref="+e+"]")}t.RefSelector=r;function o(e,t,i,n){if(e===null){console.error("ag-Grid: QuerySelector selector should not be null");return}if(typeof n==="number"){console.error("ag-Grid: QuerySelector should be on an attribute");return}c(t,"querySelectors",{attributeName:i,querySelector:e})}function a(e){return s.bind(this,e)}t.Listener=a;function s(e,t,i){if(e===null){console.error("ag-Grid: EventListener eventName should not be null");return}c(t,"listenerMethods",{methodName:i,eventName:e})}function l(e){return u.bind(this,e)}t.Method=l;function u(e,t,i){if(e===null){console.error("ag-Grid: EventListener eventName should not be null");return}c(t,"methods",{methodName:i,alias:e})}function c(e,t,i){var n=d(e,e.constructor.name);if(!n[t]){n[t]=[]}n[t].push(i)}function d(e,t){if(!e.__agComponentMetaData){e.__agComponentMetaData={}}if(!e.__agComponentMetaData[t]){e.__agComponentMetaData[t]={}}return e.__agComponentMetaData[t]}},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var o=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:true});var a=i(2);var s=i(0);var l=i(0);var u=function(){function e(){}e.prototype.setBeans=function(e){this.logging=e.isDebug()};e.prototype.create=function(e){return new c(e,this.isLogging.bind(this))};e.prototype.isLogging=function(){return this.logging};n([o(0,l.Qualifier("gridOptionsWrapper")),r("design:type",Function),r("design:paramtypes",[a.GridOptionsWrapper]),r("design:returntype",void 0)],e.prototype,"setBeans",null);e=n([s.Bean("loggerFactory")],e);return e}();t.LoggerFactory=u;var c=function(){function e(e,t){this.name=e;this.isLoggingFunc=t}e.prototype.isLogging=function(){return this.isLoggingFunc()};e.prototype.log=function(e){if(this.isLoggingFunc()){console.log("ag-Grid."+this.name+": "+e)}};return e}();t.Logger=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(3);var r=i(2);var o=i(1);var a=function(){function e(){this.destroyFunctions=[];this.destroyed=false}e.prototype.destroy=function(){this.destroyFunctions.forEach((function(e){return e()}));this.destroyFunctions.length=0;this.destroyed=true;this.dispatchEvent({type:e.EVENT_DESTROYED})};e.prototype.addEventListener=function(e,t){if(!this.localEventService){this.localEventService=new n.EventService}this.localEventService.addEventListener(e,t)};e.prototype.removeEventListener=function(e,t){if(this.localEventService){this.localEventService.removeEventListener(e,t)}};e.prototype.dispatchEventAsync=function(e){var t=this;setTimeout((function(){return t.dispatchEvent(e)}),0)};e.prototype.dispatchEvent=function(e){if(this.localEventService){this.localEventService.dispatchEvent(e)}};e.prototype.addDestroyableEventListener=function(e,t,i){if(this.destroyed){return}if(e instanceof HTMLElement){o._.addSafePassiveEventListener(e,t,i)}else if(e instanceof Window){e.addEventListener(t,i)}else if(e instanceof r.GridOptionsWrapper){e.addEventListener(t,i)}else{e.addEventListener(t,i)}this.destroyFunctions.push((function(){if(e instanceof HTMLElement){e.removeEventListener(t,i)}else if(e instanceof Window){e.removeEventListener(t,i)}else if(e instanceof r.GridOptionsWrapper){e.removeEventListener(t,i)}else{e.removeEventListener(t,i)}}))};e.prototype.isAlive=function(){return!this.destroyed};e.prototype.addDestroyFunc=function(e){if(this.isAlive()){this.destroyFunctions.push(e)}else{e()}};e.EVENT_DESTROYED="destroyed";return e}();t.BeanStub=a},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(3);var a=i(5);var s=i(2);var l=i(17);var u=i(16);var c=i(4);var d=i(7);var f=i(0);var p=i(9);var h=i(1);var g=i(33);var m=i(6);var v=function(){function e(){this.childrenMapped={};this.selectable=true;this.selected=false}e.prototype.setData=function(e){var t=this.data;this.data=e;this.valueCache.onDataChanged();this.updateDataOnDetailNode();this.checkRowSelectable();var i=this.createDataChangedEvent(e,t,false);this.dispatchLocalEvent(i)};e.prototype.updateDataOnDetailNode=function(){if(this.detailNode){this.detailNode.data=this.data}};e.prototype.createDataChangedEvent=function(t,i,n){return{type:e.EVENT_DATA_CHANGED,node:this,oldData:i,newData:t,update:n}};e.prototype.createLocalRowEvent=function(e){return{type:e,node:this}};e.prototype.updateData=function(e){var t=this.data;this.data=e;this.updateDataOnDetailNode();this.checkRowSelectable();this.updateDataOnDetailNode();var i=this.createDataChangedEvent(e,t,true);this.dispatchLocalEvent(i)};e.prototype.getRowIndexString=function(){if(this.rowPinned===p.Constants.PINNED_TOP){return"t-"+this.rowIndex}else if(this.rowPinned===p.Constants.PINNED_BOTTOM){return"b-"+this.rowIndex}else{return this.rowIndex.toString()}};e.prototype.createDaemonNode=function(){var t=new e;this.context.wireBean(t);t.id=this.id;t.data=this.data;t.daemon=true;t.selected=this.selected;t.level=this.level;return t};e.prototype.setDataAndId=function(e,t){var i=h.Utils.exists(this.id)?this.createDaemonNode():null;var n=this.data;this.data=e;this.updateDataOnDetailNode();this.setId(t);this.selectionController.syncInRowNode(this,i);this.checkRowSelectable();var r=this.createDataChangedEvent(e,n,false);this.dispatchLocalEvent(r)};e.prototype.checkRowSelectable=function(){var e=this.gridOptionsWrapper.getIsRowSelectableFunc();var t=e&&h.Utils.exists(this);this.setRowSelectable(t?e(this):true)};e.prototype.setRowSelectable=function(t){if(this.selectable!==t){this.selectable=t;if(this.eventService){this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_SELECTABLE_CHANGED))}}};e.prototype.setId=function(e){var t=this.gridOptionsWrapper.getRowNodeIdFunc();if(t){if(this.data){this.id=t(this.data)}else{this.id=undefined}}else{this.id=e}};e.prototype.isPixelInRange=function(e){return e>=this.rowTop&&e<this.rowTop+this.rowHeight};e.prototype.clearRowTop=function(){this.oldRowTop=this.rowTop;this.setRowTop(null)};e.prototype.setFirstChild=function(t){if(this.firstChild===t){return}this.firstChild=t;if(this.eventService){this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_FIRST_CHILD_CHANGED))}};e.prototype.setLastChild=function(t){if(this.lastChild===t){return}this.lastChild=t;if(this.eventService){this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_LAST_CHILD_CHANGED))}};e.prototype.setChildIndex=function(t){if(this.childIndex===t){return}this.childIndex=t;if(this.eventService){this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_CHILD_INDEX_CHANGED))}};e.prototype.setRowTop=function(t){if(this.rowTop===t){return}this.rowTop=t;if(this.eventService){this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_TOP_CHANGED))}};e.prototype.setDragging=function(t){if(this.dragging===t){return}this.dragging=t;if(this.eventService){this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_DRAGGING_CHANGED))}};e.prototype.setAllChildrenCount=function(t){if(this.allChildrenCount===t){return}this.allChildrenCount=t;if(this.eventService){this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_ALL_CHILDREN_COUNT_CHANGED))}};e.prototype.setRowHeight=function(t){this.rowHeight=t;if(this.eventService){this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_HEIGHT_CHANGED))}};e.prototype.setRowIndex=function(t){this.rowIndex=t;if(this.eventService){this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_ROW_INDEX_CHANGED))}};e.prototype.setUiLevel=function(t){if(this.uiLevel===t){return}this.uiLevel=t;if(this.eventService){this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_UI_LEVEL_CHANGED))}};e.prototype.setExpanded=function(t){if(this.expanded===t){return}this.expanded=t;if(this.eventService){this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_EXPANDED_CHANGED))}var i=this.createGlobalRowEvent(a.Events.EVENT_ROW_GROUP_OPENED);this.mainEventService.dispatchEvent(i)};e.prototype.createGlobalRowEvent=function(e){var t={type:e,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()};return t};e.prototype.dispatchLocalEvent=function(e){if(this.eventService){this.eventService.dispatchEvent(e)}};e.prototype.setDataValue=function(e,t){var i=this.columnController.getPrimaryColumn(e);this.valueService.setValue(this,i,t);this.dispatchCellChangedEvent(i,t)};e.prototype.setGroupValue=function(e,t){var i=this.columnController.getGridColumn(e);if(h.Utils.missing(this.groupData)){this.groupData={}}this.groupData[i.getColId()]=t;this.dispatchCellChangedEvent(i,t)};e.prototype.setAggData=function(e){var t=this;var i=h.Utils.getAllKeysInObjects([this.aggData,e]);this.aggData=e;if(this.eventService){i.forEach((function(e){var i=t.columnController.getGridColumn(e);var n=t.aggData?t.aggData[e]:undefined;t.dispatchCellChangedEvent(i,n)}))}};e.prototype.hasChildren=function(){return this.group||this.childrenAfterGroup&&this.childrenAfterGroup.length>0};e.prototype.isEmptyFillerNode=function(){return this.group&&h.Utils.missingOrEmpty(this.childrenAfterGroup)};e.prototype.dispatchCellChangedEvent=function(t,i){var n={type:e.EVENT_CELL_CHANGED,node:this,column:t,newValue:i};this.dispatchLocalEvent(n)};e.prototype.resetQuickFilterAggregateText=function(){this.quickFilterAggregateText=null};e.prototype.isExpandable=function(){return this.hasChildren()||this.master};e.prototype.isSelected=function(){if(this.footer){return this.sibling.isSelected()}return this.selected};e.prototype.depthFirstSearch=function(e){if(this.childrenAfterGroup){this.childrenAfterGroup.forEach((function(t){return t.depthFirstSearch(e)}))}e(this)};e.prototype.calculateSelectedFromChildren=function(){var e=false;var t=false;var i=false;var n;if(this.childrenAfterGroup){for(var r=0;r<this.childrenAfterGroup.length;r++){var o=this.childrenAfterGroup[r];if(!o.selectable)continue;var a=o.isSelected();switch(a){case true:e=true;break;case false:t=true;break;default:i=true;break}}}if(i){n=undefined}else if(e&&!t){n=true}else if(!e&&t){n=false}else{n=undefined}this.selectThisNode(n)};e.prototype.calculateSelectedFromChildrenBubbleUp=function(){this.calculateSelectedFromChildren();if(this.parent){this.parent.calculateSelectedFromChildrenBubbleUp()}};e.prototype.setSelectedInitialValue=function(e){this.selected=e};e.prototype.setSelected=function(e,t,i){if(t===void 0){t=false}if(i===void 0){i=false}this.setSelectedParams({newValue:e,clearSelection:t,tailingNodeInSequence:i,rangeSelect:false})};e.prototype.isRowPinned=function(){return this.rowPinned===p.Constants.PINNED_TOP||this.rowPinned===p.Constants.PINNED_BOTTOM};e.prototype.setSelectedParams=function(e){var t=this.gridOptionsWrapper.isGroupSelectsChildren();var i=e.newValue===true;var n=e.clearSelection===true;var r=e.tailingNodeInSequence===true;var o=e.rangeSelect===true;var s=t&&e.groupSelectsFiltered===true;if(this.id===undefined){console.warn("ag-Grid: cannot select node until id for node is known");return 0}if(this.rowPinned){console.log("ag-Grid: cannot select pinned rows");return 0}if(this.footer){var l=this.sibling.setSelectedParams(e);return l}if(o){var u=this.selectionController.getLastSelectedNode()!==this;var c=this.gridOptionsWrapper.isRowSelectionMulti();if(u&&c){return this.doRowRangeSelection()}}var d=0;var f=s&&this.group;if(!f){var p=this.selectThisNode(i);if(p){d++}}if(t&&this.group){d+=this.selectChildNodes(i,s)}var h=!r;if(h){if(i&&(n||!this.gridOptionsWrapper.isRowSelectionMulti())){d+=this.selectionController.clearOtherNodes(this)}if(d>0){if(s){this.calculatedSelectedForAllGroupNodes()}else{if(t&&this.parent){this.parent.calculateSelectedFromChildrenBubbleUp()}}var g={type:a.Events.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.mainEventService.dispatchEvent(g)}if(i){this.selectionController.setLastSelectedNode(this)}}return d};e.prototype.doRowRangeSelection=function(){var e=0;var t=this.gridOptionsWrapper.isGroupSelectsChildren();var i=this.selectionController.getLastSelectedNode();var n=this.rowModel.getNodesInRangeForSelection(i,this);n.forEach((function(i){if(i.group&&t){return}var n=i.selectThisNode(true);if(n){e++}}));if(t){this.calculatedSelectedForAllGroupNodes()}var r={type:a.Events.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.mainEventService.dispatchEvent(r);return e};e.prototype.isParentOfNode=function(e){var t=this.parent;while(t){if(t===e){return true}t=t.parent}return false};e.prototype.calculatedSelectedForAllGroupNodes=function(){var e=this.rowModel;e.getTopLevelNodes().forEach((function(e){if(e.group){e.depthFirstSearch((function(e){if(e.group){e.calculateSelectedFromChildren()}}));e.calculateSelectedFromChildren()}}))};e.prototype.selectThisNode=function(t){if(!this.selectable||this.selected===t)return false;this.selected=t;if(this.eventService){this.dispatchLocalEvent(this.createLocalRowEvent(e.EVENT_ROW_SELECTED))}var i=this.createGlobalRowEvent(a.Events.EVENT_ROW_SELECTED);this.mainEventService.dispatchEvent(i);return true};e.prototype.selectChildNodes=function(e,t){var i=t?this.childrenAfterFilter:this.childrenAfterGroup;var n=0;if(h.Utils.missing(i)){return}for(var r=0;r<i.length;r++){n+=i[r].setSelectedParams({newValue:e,clearSelection:false,tailingNodeInSequence:true,groupSelectsFiltered:t})}return n};e.prototype.addEventListener=function(e,t){if(!this.eventService){this.eventService=new o.EventService}this.eventService.addEventListener(e,t)};e.prototype.removeEventListener=function(e,t){this.eventService.removeEventListener(e,t)};e.prototype.onMouseEnter=function(){this.dispatchLocalEvent(this.createLocalRowEvent(e.EVENT_MOUSE_ENTER))};e.prototype.onMouseLeave=function(){this.dispatchLocalEvent(this.createLocalRowEvent(e.EVENT_MOUSE_LEAVE))};e.prototype.getFirstChildOfFirstChild=function(e){var t=this;var i=true;var n=false;var r;while(i&&!n){var o=t.parent;var a=h.Utils.exists(o)&&t.firstChild;if(a){if(o.rowGroupColumn===e){n=true;r=o}}else{i=false}t=o}return n?r:null};e.EVENT_ROW_SELECTED="rowSelected";e.EVENT_DATA_CHANGED="dataChanged";e.EVENT_CELL_CHANGED="cellChanged";e.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged";e.EVENT_MOUSE_ENTER="mouseEnter";e.EVENT_MOUSE_LEAVE="mouseLeave";e.EVENT_HEIGHT_CHANGED="heightChanged";e.EVENT_TOP_CHANGED="topChanged";e.EVENT_FIRST_CHILD_CHANGED="firstChildChanged";e.EVENT_LAST_CHILD_CHANGED="lastChildChanged";e.EVENT_CHILD_INDEX_CHANGED="childIndexChanged";e.EVENT_ROW_INDEX_CHANGED="rowIndexChanged";e.EVENT_EXPANDED_CHANGED="expandedChanged";e.EVENT_SELECTABLE_CHANGED="selectableChanged";e.EVENT_UI_LEVEL_CHANGED="uiLevelChanged";e.EVENT_DRAGGING_CHANGED="draggingChanged";n([f.Autowired("eventService"),r("design:type",o.EventService)],e.prototype,"mainEventService",void 0);n([f.Autowired("gridOptionsWrapper"),r("design:type",s.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([f.Autowired("selectionController"),r("design:type",l.SelectionController)],e.prototype,"selectionController",void 0);n([f.Autowired("columnController"),r("design:type",c.ColumnController)],e.prototype,"columnController",void 0);n([f.Autowired("valueService"),r("design:type",u.ValueService)],e.prototype,"valueService",void 0);n([f.Autowired("rowModel"),r("design:type",Object)],e.prototype,"rowModel",void 0);n([f.Autowired("context"),r("design:type",f.Context)],e.prototype,"context",void 0);n([f.Autowired("valueCache"),r("design:type",g.ValueCache)],e.prototype,"valueCache",void 0);n([f.Autowired("columnApi"),r("design:type",d.ColumnApi)],e.prototype,"columnApi",void 0);n([f.Autowired("gridApi"),r("design:type",m.GridApi)],e.prototype,"gridApi",void 0);return e}();t.RowNode=v},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var o=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:true});var a=i(12);var s=i(0);var l=i(1);var u=i(2);var c=i(40);var d=i(4);var f=i(41);var p;(function(e){e[e["ToolPanel"]=0]="ToolPanel";e[e["HeaderCell"]=1]="HeaderCell";e[e["RowDrag"]=2]="RowDrag"})(p=t.DragSourceType||(t.DragSourceType={}));var h;(function(e){e[e["Up"]=0]="Up";e[e["Down"]=1]="Down"})(h=t.VDirection||(t.VDirection={}));var g;(function(e){e[e["Left"]=0]="Left";e[e["Right"]=1]="Right"})(g=t.HDirection||(t.HDirection={}));var m=function(){function e(){this.dragSourceAndParamsList=[];this.dropTargets=[]}t=e;e.prototype.init=function(){this.ePinnedIcon=l.Utils.createIcon("columnMovePin",this.gridOptionsWrapper,null);this.ePlusIcon=l.Utils.createIcon("columnMoveAdd",this.gridOptionsWrapper,null);this.eHiddenIcon=l.Utils.createIcon("columnMoveHide",this.gridOptionsWrapper,null);this.eMoveIcon=l.Utils.createIcon("columnMoveMove",this.gridOptionsWrapper,null);this.eLeftIcon=l.Utils.createIcon("columnMoveLeft",this.gridOptionsWrapper,null);this.eRightIcon=l.Utils.createIcon("columnMoveRight",this.gridOptionsWrapper,null);this.eGroupIcon=l.Utils.createIcon("columnMoveGroup",this.gridOptionsWrapper,null);this.eAggregateIcon=l.Utils.createIcon("columnMoveValue",this.gridOptionsWrapper,null);this.ePivotIcon=l.Utils.createIcon("columnMovePivot",this.gridOptionsWrapper,null);this.eDropNotAllowedIcon=l.Utils.createIcon("dropNotAllowed",this.gridOptionsWrapper,null)};e.prototype.setBeans=function(e){this.logger=e.create("OldToolPanelDragAndDropService")};e.prototype.getStringType=function(e){switch(e){case p.RowDrag:return"row";case p.HeaderCell:return"headerCell";case p.ToolPanel:return"toolPanel";default:console.warn("ag-Grid: bug - unknown drag type "+e);return null}};e.prototype.addDragSource=function(e,t){if(t===void 0){t=false}var i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this)};this.dragSourceAndParamsList.push({params:i,dragSource:e});this.dragService.addDragSource(i,t)};e.prototype.removeDragSource=function(e){var t=l.Utils.find(this.dragSourceAndParamsList,(function(t){return t.dragSource===e}));if(t){this.dragService.removeDragSource(t.params);l.Utils.removeFromArray(this.dragSourceAndParamsList,t)}};e.prototype.destroy=function(){var e=this;this.dragSourceAndParamsList.forEach((function(t){e.dragService.removeDragSource(t.params)}));this.dragSourceAndParamsList.length=0};e.prototype.nudge=function(){if(this.dragging){this.onDragging(this.eventLastTime,true)}};e.prototype.onDragStart=function(e,t){this.dragging=true;this.dragSource=e;this.eventLastTime=t;this.dragItem=this.dragSource.dragItemCallback();this.lastDropTarget=this.dragSource.dragSourceDropTarget;if(this.dragSource.dragStarted){this.dragSource.dragStarted()}this.createGhost()};e.prototype.onDragStop=function(e){this.eventLastTime=null;this.dragging=false;if(this.dragSource.dragStopped){this.dragSource.dragStopped()}if(this.lastDropTarget&&this.lastDropTarget.onDragStop){var t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,false);this.lastDropTarget.onDragStop(t)}this.lastDropTarget=null;this.dragItem=null;this.removeGhost()};e.prototype.onDragging=function(e,t){var i=this.workOutHDirection(e);var n=this.workOutVDirection(e);this.eventLastTime=e;this.positionGhost(e);var r=l.Utils.find(this.dropTargets,this.isMouseOnDropTarget.bind(this,e));if(r!==this.lastDropTarget){this.leaveLastTargetIfExists(e,i,n,t);this.enterDragTargetIfExists(r,e,i,n,t);this.lastDropTarget=r}else if(r){var o=this.createDropTargetEvent(r,e,i,n,t);r.onDragging(o)}};e.prototype.enterDragTargetIfExists=function(e,t,i,n,r){if(!e){return}var o=this.createDropTargetEvent(e,t,i,n,r);e.onDragEnter(o);this.setGhostIcon(e.getIconName?e.getIconName():null)};e.prototype.leaveLastTargetIfExists=function(e,t,i,n){if(!this.lastDropTarget){return}var r=this.createDropTargetEvent(this.lastDropTarget,e,t,i,n);this.lastDropTarget.onDragLeave(r);this.setGhostIcon(null)};e.prototype.getAllContainersFromDropTarget=function(e){var t=[e.getContainer()];var i=e.getSecondaryContainers?e.getSecondaryContainers():null;if(i){t=t.concat(i)}return t};e.prototype.isMouseOnDropTarget=function(e,t){var i=this.getAllContainersFromDropTarget(t);var n=false;i.forEach((function(t){if(!t){return}var i=t.getBoundingClientRect();if(i.width===0||i.height===0){return}var r=e.clientX>=i.left&&e.clientX<=i.right;var o=e.clientY>=i.top&&e.clientY<=i.bottom;if(r&&o){n=true}}));if(n){var r=t.isInterestedIn(this.dragSource.type);return r}else{return false}};e.prototype.addDropTarget=function(e){this.dropTargets.push(e)};e.prototype.workOutHDirection=function(e){if(this.eventLastTime.clientX>e.clientX){return g.Left}else if(this.eventLastTime.clientX<e.clientX){return g.Right}else{return null}};e.prototype.workOutVDirection=function(e){if(this.eventLastTime.clientY>e.clientY){return h.Up}else if(this.eventLastTime.clientY<e.clientY){return h.Down}else{return null}};e.prototype.createDropTargetEvent=function(e,t,i,n,r){var o=e.getContainer().getBoundingClientRect();var a=t.clientX-o.left;var s=t.clientY-o.top;var l={event:t,x:a,y:s,vDirection:n,hDirection:i,dragSource:this.dragSource,fromNudge:r,dragItem:this.dragItem};return l};e.prototype.positionGhost=function(e){var t=this.eGhost.getBoundingClientRect();var i=t.height;var n=l.Utils.getBodyWidth()-2;var r=l.Utils.getBodyHeight()-2;var o=e.pageY-i/2;var a=e.pageX-30;var s=this.gridOptionsWrapper.getDocument();var u=window.pageYOffset||s.documentElement.scrollTop;var c=window.pageXOffset||s.documentElement.scrollLeft;if(n>0){if(a+this.eGhost.clientWidth>n+c){a=n+c-this.eGhost.clientWidth}}if(a<0){a=0}if(r>0){if(o+this.eGhost.clientHeight>r+u){o=r+u-this.eGhost.clientHeight}}if(o<0){o=0}this.eGhost.style.left=a+"px";this.eGhost.style.top=o+"px"};e.prototype.removeGhost=function(){if(this.eGhost&&this.eGhostParent){this.eGhostParent.removeChild(this.eGhost)}this.eGhost=null};e.prototype.createGhost=function(){this.eGhost=l.Utils.loadTemplate(t.GHOST_TEMPLATE);l.Utils.addCssClass(this.eGhost,this.environment.getTheme());this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon");this.setGhostIcon(null);var e=this.eGhost.querySelector(".ag-dnd-ghost-label");e.innerHTML=this.dragSource.dragItemName;this.eGhost.style.height="25px";this.eGhost.style.top="20px";this.eGhost.style.left="20px";var i=this.gridOptionsWrapper.getDocument();this.eGhostParent=i.querySelector("body");if(!this.eGhostParent){console.warn("ag-Grid: could not find document body, it is needed for dragging columns")}else{this.eGhostParent.appendChild(this.eGhost)}};e.prototype.setGhostIcon=function(e,i){if(i===void 0){i=false}l.Utils.removeAllChildren(this.eGhostIcon);var n;switch(e){case t.ICON_ADD:n=this.ePlusIcon;break;case t.ICON_PINNED:n=this.ePinnedIcon;break;case t.ICON_MOVE:n=this.eMoveIcon;break;case t.ICON_LEFT:n=this.eLeftIcon;break;case t.ICON_RIGHT:n=this.eRightIcon;break;case t.ICON_GROUP:n=this.eGroupIcon;break;case t.ICON_AGGREGATE:n=this.eAggregateIcon;break;case t.ICON_PIVOT:n=this.ePivotIcon;break;case t.ICON_NOT_ALLOWED:n=this.eDropNotAllowedIcon;break;default:n=this.eHiddenIcon;break}this.eGhostIcon.appendChild(n);l.Utils.addOrRemoveCssClass(this.eGhostIcon,"ag-shake-left-to-right",i)};e.ICON_PINNED="pinned";e.ICON_ADD="add";e.ICON_MOVE="move";e.ICON_LEFT="left";e.ICON_RIGHT="right";e.ICON_GROUP="group";e.ICON_AGGREGATE="aggregate";e.ICON_PIVOT="pivot";e.ICON_NOT_ALLOWED="notAllowed";e.GHOST_TEMPLATE='<div class="ag-dnd-ghost">'+'  <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>'+'  <div class="ag-dnd-ghost-label">'+"  </div>"+"</div>";n([s.Autowired("gridOptionsWrapper"),r("design:type",u.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([s.Autowired("dragService"),r("design:type",c.DragService)],e.prototype,"dragService",void 0);n([s.Autowired("environment"),r("design:type",f.Environment)],e.prototype,"environment",void 0);n([s.Autowired("columnController"),r("design:type",d.ColumnController)],e.prototype,"columnController",void 0);n([s.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);n([o(0,s.Qualifier("loggerFactory")),r("design:type",Function),r("design:paramtypes",[a.LoggerFactory]),r("design:returntype",void 0)],e.prototype,"setBeans",null);n([s.PreDestroy,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"destroy",null);e=t=n([s.Bean("dragAndDropService")],e);return e;var t}();t.DragAndDropService=m},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(2);var a=i(19);var s=i(4);var l=i(0);var u=i(1);var c=i(5);var d=i(3);var f=i(33);var p=function(){function e(){this.initialised=false}e.prototype.init=function(){this.cellExpressions=this.gridOptionsWrapper.isEnableCellExpressions();this.initialised=true};e.prototype.getValue=function(e,t,i,n){if(i===void 0){i=false}if(n===void 0){n=false}if(!this.initialised){this.init()}var r=e.getColDef();var o=r.field;var a=e.getId();var s=t.data;var l;var c=t.groupData&&t.groupData[a]!==undefined;var d=!n&&t.aggData&&t.aggData[a]!==undefined;if(i&&r.filterValueGetter){l=this.executeValueGetter(r.filterValueGetter,s,e,t)}else if(c){l=t.groupData[a]}else if(d){l=t.aggData[a]}else if(r.valueGetter){l=this.executeValueGetter(r.valueGetter,s,e,t)}else if(o&&s){l=u._.getValueUsingField(s,o,e.isFieldContainsDots())}else{l=undefined}if(this.cellExpressions&&typeof l==="string"&&l.indexOf("=")===0){var f=l.substring(1);l=this.executeValueGetter(f,s,e,t)}return l};e.prototype.setValue=function(e,t,i){var n=this.columnController.getPrimaryColumn(t);if(!e||!n){return}var r=e.data;if(u._.missing(r)){e.data={}}var o=n.getColDef(),a=o.field,s=o.newValueHandler,l=o.valueSetter;if(u._.missing(a)&&u._.missing(s)&&u._.missing(l)){console.warn("ag-Grid: you need either field or valueSetter set on colDef for editing to work");return}var d={node:e,data:e.data,oldValue:this.getValue(n,e),newValue:i,colDef:n.getColDef(),column:n,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};d.newValue=i;var f;if(u._.exists(s)){f=s(d)}else if(u._.exists(l)){f=this.expressionService.evaluate(l,d)}else{f=this.setValueUsingField(r,a,i,n.isFieldContainsDots())}if(f===undefined){f=true}if(!f){return}e.resetQuickFilterAggregateText();this.valueCache.onDataChanged();d.newValue=this.getValue(n,e);if(typeof n.getColDef().onCellValueChanged==="function"){setTimeout((function(){return n.getColDef().onCellValueChanged(d)}),0)}var p={type:c.Events.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:d.column,api:d.api,colDef:d.colDef,columnApi:d.columnApi,context:d.context,data:e.data,node:e,oldValue:d.oldValue,newValue:d.newValue,value:d.newValue};this.eventService.dispatchEvent(p)};e.prototype.setValueUsingField=function(e,t,i,n){var r;if(!n){e[t]=i}else{var o=t.split(".");var a=e;while(o.length>0&&a){var s=o.shift();if(o.length===0){a[s]=i}else{a=a[s]}}}return!r};e.prototype.executeValueGetter=function(e,t,i,n){var r=i.getId();var o=this.valueCache.getValue(n,r);if(o!==undefined){return o}var a={data:t,node:n,column:i,colDef:i.getColDef(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),getValue:this.getValueCallback.bind(this,n)};var s=this.expressionService.evaluate(e,a);this.valueCache.setValue(n,r,s);return s};e.prototype.getValueCallback=function(e,t){var i=this.columnController.getPrimaryColumn(t);if(i){return this.getValue(i,e)}else{return null}};e.prototype.getKeyForNode=function(e,t){var i=this.getValue(e,t);var n;var r=e.getColDef().keyCreator;if(r){n=r({value:i})}else{n=i}if(typeof n==="string"||n===null||n===undefined){return n}n=String(n);if(n==="[object Object]"){u._.doOnce((function(){console.warn("ag-Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se ag-Grid docs) or b) to toString() on the object to return a key")}),"getKeyForNode - warn about [object,object]")}return n};n([l.Autowired("gridOptionsWrapper"),r("design:type",o.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([l.Autowired("expressionService"),r("design:type",a.ExpressionService)],e.prototype,"expressionService",void 0);n([l.Autowired("columnController"),r("design:type",s.ColumnController)],e.prototype,"columnController",void 0);n([l.Autowired("eventService"),r("design:type",d.EventService)],e.prototype,"eventService",void 0);n([l.Autowired("valueCache"),r("design:type",f.ValueCache)],e.prototype,"valueCache",void 0);n([l.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);e=n([l.Bean("valueService")],e);return e}();t.ValueService=p},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var o=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:true});var a=i(1);var s=i(0);var l=i(0);var u=i(12);var c=i(3);var d=i(5);var f=i(0);var p=i(2);var h=i(0);var g=i(9);var m=i(7);var v=i(6);var y=function(){function e(){}e.prototype.setBeans=function(e){this.logger=e.create("SelectionController");this.reset();if(this.gridOptionsWrapper.isRowModelDefault()){this.eventService.addEventListener(d.Events.EVENT_ROW_DATA_CHANGED,this.reset.bind(this))}else{this.logger.log("dont know what to do here")}};e.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsWrapper.isGroupSelectsChildren();this.eventService.addEventListener(d.Events.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))};e.prototype.setLastSelectedNode=function(e){this.lastSelectedNode=e};e.prototype.getLastSelectedNode=function(){return this.lastSelectedNode};e.prototype.getSelectedNodes=function(){var e=[];a.Utils.iterateObject(this.selectedNodes,(function(t,i){if(i){e.push(i)}}));return e};e.prototype.getSelectedRows=function(){var e=[];a.Utils.iterateObject(this.selectedNodes,(function(t,i){if(i&&i.data){e.push(i.data)}}));return e};e.prototype.removeGroupsFromSelection=function(){var e=this;a.Utils.iterateObject(this.selectedNodes,(function(t,i){if(i&&i.group){e.selectedNodes[i.id]=undefined}}))};e.prototype.updateGroupsFromChildrenSelections=function(){if(this.rowModel.getType()!==g.Constants.ROW_MODEL_TYPE_CLIENT_SIDE){console.warn("updateGroupsFromChildrenSelections not available when rowModel is not normal")}var e=this.rowModel;e.getTopLevelNodes().forEach((function(e){e.depthFirstSearch((function(e){if(e.group){e.calculateSelectedFromChildren()}}))}))};e.prototype.getNodeForIdIfSelected=function(e){return this.selectedNodes[e]};e.prototype.clearOtherNodes=function(e){var t=this;var i={};var n=0;a.Utils.iterateObject(this.selectedNodes,(function(r,o){if(o&&o.id!==e.id){var a=t.selectedNodes[o.id];n+=a.setSelectedParams({newValue:false,clearSelection:false,tailingNodeInSequence:true});if(t.groupSelectsChildren&&o.parent){i[o.parent.id]=o.parent}}}));a.Utils.iterateObject(i,(function(e,t){t.calculateSelectedFromChildren()}));return n};e.prototype.onRowSelected=function(e){var t=e.node;if(this.groupSelectsChildren&&t.group){return}if(t.isSelected()){this.selectedNodes[t.id]=t}else{this.selectedNodes[t.id]=undefined}};e.prototype.syncInRowNode=function(e,t){this.syncInOldRowNode(e,t);this.syncInNewRowNode(e)};e.prototype.syncInOldRowNode=function(e,t){var i=a.Utils.exists(t)&&e.id!==t.id;if(i){var n=a.Utils.exists(this.selectedNodes[t.id]);if(n){this.selectedNodes[t.id]=t}}};e.prototype.syncInNewRowNode=function(e){if(a.Utils.exists(this.selectedNodes[e.id])){e.setSelectedInitialValue(true);this.selectedNodes[e.id]=e}else{e.setSelectedInitialValue(false)}};e.prototype.reset=function(){this.logger.log("reset");this.selectedNodes={};this.lastSelectedNode=null};e.prototype.getBestCostNodeSelection=function(){if(this.rowModel.getType()!==g.Constants.ROW_MODEL_TYPE_CLIENT_SIDE){console.warn("getBestCostNodeSelection is only avilable when using normal row model")}var e=this.rowModel;var t=e.getTopLevelNodes();if(t===null){console.warn("selectAll not available doing rowModel=virtual");return}var i=[];function n(e){for(var t=0,r=e.length;t<r;t++){var o=e[t];if(o.isSelected()){i.push(o)}else{if(o.group&&o.children){n(o.children)}}}}n(t);return i};e.prototype.setRowModel=function(e){this.rowModel=e};e.prototype.isEmpty=function(){var e=0;a.Utils.iterateObject(this.selectedNodes,(function(t,i){if(i){e++}}));return e===0};e.prototype.deselectAllRowNodes=function(e){if(e===void 0){e=false}var t=function(e){return e.selectThisNode(false)};var i=this.rowModel.getType()===g.Constants.ROW_MODEL_TYPE_CLIENT_SIDE;if(e){if(!i){console.error("ag-Grid: selecting just filtered only works with In Memory Row Model");return}var n=this.rowModel;n.forEachNodeAfterFilter(t)}else{a.Utils.iterateObject(this.selectedNodes,(function(e,i){if(i){t(i)}}));this.reset()}if(i&&this.groupSelectsChildren){this.updateGroupsFromChildrenSelections()}var r={type:d.Events.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(r)};e.prototype.selectAllRowNodes=function(e){if(e===void 0){e=false}if(this.rowModel.getType()!==g.Constants.ROW_MODEL_TYPE_CLIENT_SIDE){throw"selectAll only available with normal row model, ie not "+this.rowModel.getType()}var t=this.rowModel;var i=function(e){return e.selectThisNode(true)};if(e){t.forEachNodeAfterFilter(i)}else{t.forEachNode(i)}if(this.rowModel.getType()===g.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&this.groupSelectsChildren){this.updateGroupsFromChildrenSelections()}var n={type:d.Events.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(n)};e.prototype.selectNode=function(e,t){e.setSelectedParams({newValue:true,clearSelection:!t})};e.prototype.deselectIndex=function(e){var t=this.rowModel.getRow(e);this.deselectNode(t)};e.prototype.deselectNode=function(e){e.setSelectedParams({newValue:false,clearSelection:false})};e.prototype.selectIndex=function(e,t){var i=this.rowModel.getRow(e);this.selectNode(i,t)};n([f.Autowired("eventService"),r("design:type",c.EventService)],e.prototype,"eventService",void 0);n([f.Autowired("rowModel"),r("design:type",Object)],e.prototype,"rowModel",void 0);n([f.Autowired("gridOptionsWrapper"),r("design:type",p.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([f.Autowired("columnApi"),r("design:type",m.ColumnApi)],e.prototype,"columnApi",void 0);n([f.Autowired("gridApi"),r("design:type",v.GridApi)],e.prototype,"gridApi",void 0);n([o(0,l.Qualifier("loggerFactory")),r("design:type",Function),r("design:paramtypes",[u.LoggerFactory]),r("design:returntype",void 0)],e.prototype,"setBeans",null);n([h.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);e=n([s.Bean("selectionController")],e);return e}();t.SelectionController=y},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(1);var a=i(2);var s=i(35);var l=i(16);var u=i(4);var c=i(7);var d=i(0);var f=i(3);var p=i(5);var h=i(6);var g=i(27);var m=function(){function e(){this.allFilters={};this.quickFilter=null;this.quickFilterParts=null}t=e;e.prototype.init=function(){this.eventService.addEventListener(p.Events.EVENT_ROW_DATA_CHANGED,this.onNewRowsLoaded.bind(this));this.eventService.addEventListener(p.Events.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this));this.quickFilter=this.parseQuickFilter(this.gridOptionsWrapper.getQuickFilterText());this.setQuickFilterParts();this.checkExternalFilter()};e.prototype.setQuickFilterParts=function(){if(this.quickFilter){this.quickFilterParts=this.quickFilter.split(" ")}else{this.quickFilterParts=null}};e.prototype.setFilterModel=function(e){var t=this;var i=[];if(e){var n=Object.keys(e);o.Utils.iterateObject(this.allFilters,(function(r,a){o.Utils.removeFromArray(n,r);var s=e[r];t.setModelOnFilterWrapper(a.filterPromise,s);i.push(a.filterPromise)}));o.Utils.iterateArray(n,(function(n){var r=t.columnController.getPrimaryColumn(n);if(!r){console.warn("Warning ag-grid setFilterModel - no column found for colId "+n);return}var o=t.getOrCreateFilterWrapper(r);t.setModelOnFilterWrapper(o.filterPromise,e[n]);i.push(o.filterPromise)}))}else{o.Utils.iterateObject(this.allFilters,(function(e,n){t.setModelOnFilterWrapper(n.filterPromise,null);i.push(n.filterPromise)}))}o.Promise.all(i).then((function(e){t.onFilterChanged()}))};e.prototype.setModelOnFilterWrapper=function(e,t){e.then((function(e){if(typeof e.setModel!=="function"){console.warn("Warning ag-grid - filter missing setModel method, which is needed for setFilterModel");return}e.setModel(t)}))};e.prototype.getFilterModel=function(){var e={};o.Utils.iterateObject(this.allFilters,(function(t,i){var n=i.filterPromise;var r=n.resolveNow(null,(function(e){return e}));if(r==null){return null}if(typeof r.getModel!=="function"){console.warn("Warning ag-grid - filter API missing getModel method, which is needed for getFilterModel");return}var a=r.getModel();if(o.Utils.exists(a)){e[t]=a}}));return e};e.prototype.isAdvancedFilterPresent=function(){return this.advancedFilterPresent};e.prototype.setAdvancedFilterPresent=function(){var e=false;o.Utils.iterateObject(this.allFilters,(function(t,i){if(i.filterPromise.resolveNow(false,(function(e){return e.isFilterActive()}))){e=true}}));this.advancedFilterPresent=e};e.prototype.updateFilterFlagInColumns=function(e){o.Utils.iterateObject(this.allFilters,(function(t,i){var n=i.filterPromise.resolveNow(false,(function(e){return e.isFilterActive()}));i.column.setFilterActive(n,e)}))};e.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.advancedFilterPresent||this.externalFilterPresent};e.prototype.doesFilterPass=function(e,t){var i=e.data;var n=Object.keys(this.allFilters);for(var r=0,o=n.length;r<o;r++){var a=n[r];var s=this.allFilters[a];if(s===undefined){continue}var l=s.filterPromise.resolveNow(undefined,(function(e){return e}));if(l===undefined){continue}if(l===t){continue}if(!l.isFilterActive()){continue}if(!l.doesFilterPass){console.error("Filter is missing method doesFilterPass")}var u={node:e,data:i};if(!l.doesFilterPass(u)){return false}}return true};e.prototype.parseQuickFilter=function(e){if(o.Utils.missing(e)||e===""){return null}if(this.gridOptionsWrapper.isRowModelInfinite()){console.warn("ag-grid: cannot do quick filtering when doing virtual paging");return null}return e.toUpperCase()};e.prototype.setQuickFilter=function(e){var t=this.parseQuickFilter(e);if(this.quickFilter!==t){this.quickFilter=t;this.setQuickFilterParts();this.onFilterChanged()}};e.prototype.checkExternalFilter=function(){this.externalFilterPresent=this.gridOptionsWrapper.isExternalFilterPresent()};e.prototype.onFilterChanged=function(){this.setAdvancedFilterPresent();this.updateFilterFlagInColumns("filterChanged");this.checkExternalFilter();o.Utils.iterateObject(this.allFilters,(function(e,t){t.filterPromise.then((function(e){if(e.onAnyFilterChanged){e.onAnyFilterChanged()}}))}));var e={type:p.Events.EVENT_FILTER_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)};e.prototype.isQuickFilterPresent=function(){return this.quickFilter!==null};e.prototype.doesRowPassOtherFilters=function(e,t){return this.doesRowPassFilter(t,e)};e.prototype.doesRowPassQuickFilterNoCache=function(e,t){var i=this;var n=this.columnController.getAllColumnsForQuickFilter();var r=false;n.forEach((function(n){if(r){return}var a=i.getQuickFilterTextForColumn(n,e);if(o.Utils.exists(a)){if(a.indexOf(t)>=0){r=true}}}));return r};e.prototype.doesRowPassQuickFilterCache=function(e,t){if(!e.quickFilterAggregateText){this.aggregateRowForQuickFilter(e)}var i=e.quickFilterAggregateText.indexOf(t)>=0;return i};e.prototype.doesRowPassQuickFilter=function(e){var t=this;var i=true;var n=this.gridOptionsWrapper.isCacheQuickFilter();this.quickFilterParts.forEach((function(r){var o=n?t.doesRowPassQuickFilterCache(e,r):t.doesRowPassQuickFilterNoCache(e,r);if(!o){i=false}}));return i};e.prototype.doesRowPassFilter=function(e,t){if(this.isQuickFilterPresent()){if(!this.doesRowPassQuickFilter(e)){return false}}if(this.externalFilterPresent){if(!this.gridOptionsWrapper.doesExternalFilterPass(e)){return false}}if(this.advancedFilterPresent){if(!this.doesFilterPass(e,t)){return false}}return true};e.prototype.getQuickFilterTextForColumn=function(e,t){var i=this.valueService.getValue(e,t,true);var n;var r=e.getColDef();if(e.getColDef().getQuickFilterText){var o={value:i,node:t,data:t.data,column:e,colDef:r};n=e.getColDef().getQuickFilterText(o)}else{n=i}if(n&&n!==""){return n.toString().toUpperCase()}else{return null}};e.prototype.aggregateRowForQuickFilter=function(e){var i=this;var n=[];var r=this.columnController.getAllColumnsForQuickFilter();r.forEach((function(t){var r=i.getQuickFilterTextForColumn(t,e);if(o.Utils.exists(r)){n.push(r)}}));e.quickFilterAggregateText=n.join(t.QUICK_FILTER_SEPARATOR)};e.prototype.onNewRowsLoaded=function(e){o.Utils.iterateObject(this.allFilters,(function(e,t){t.filterPromise.then((function(e){if(e.onNewRowsLoaded){e.onNewRowsLoaded()}}))}));this.updateFilterFlagInColumns(e);this.setAdvancedFilterPresent()};e.prototype.createValueGetter=function(e){var t=this;return function(i){return t.valueService.getValue(e,i,true)}};e.prototype.getFilterComponent=function(e){var t=this.getOrCreateFilterWrapper(e);return t.filterPromise};e.prototype.getOrCreateFilterWrapper=function(e){var t=this.cachedFilter(e);if(!t){t=this.createFilterWrapper(e);this.allFilters[e.getColId()]=t}return t};e.prototype.cachedFilter=function(e){return this.allFilters[e.getColId()]};e.prototype.createFilterInstance=function(e,t){var i=this;var n="agTextColumnFilter";if(this.gridOptionsWrapper.isEnterprise()){n="agSetColumnFilter"}var r=o.Utils.cloneObject(e.getColDef());var a={type:p.Events.EVENT_FILTER_MODIFIED,api:this.gridApi,columnApi:this.columnApi};var s=this.onFilterChanged.bind(this);var l=function(){return i.eventService.dispatchEvent(a)};var u={column:e,colDef:r,rowModel:this.rowModel,filterChangedCallback:s,filterModifiedCallback:l,valueGetter:this.createValueGetter(e),context:this.gridOptionsWrapper.getContext(),doesRowPassOtherFilter:null,$scope:t};return this.componentResolver.createAgGridComponent(r,u,"filter",{api:this.gridApi,columnApi:this.columnApi,column:e,colDef:r},n,true,(function(e,t){return o.Utils.assign(e,{doesRowPassOtherFilter:i.doesRowPassOtherFilters.bind(i,t)})}))};e.prototype.createFilterWrapper=function(e){var t={column:e,filterPromise:null,scope:null,compiledElement:null,guiPromise:o.Promise.external()};t.scope=this.gridOptionsWrapper.isAngularCompileFilters()?this.$scope.$new():null;t.filterPromise=this.createFilterInstance(e,t.scope);this.putIntoGui(t);return t};e.prototype.putIntoGui=function(e){var t=this;var i=document.createElement("div");i.className="ag-filter";e.filterPromise.then((function(n){var r=n.getGui();if(o.Utils.missing(r)){console.warn("getGui method from filter returned "+r+", it should be a DOM element or an HTML template string.")}if(typeof r==="string"){r=o.Utils.loadTemplate(r)}i.appendChild(r);if(e.scope){var a=t.$compile(i)(e.scope);e.compiledElement=a;setTimeout((function(){return e.scope.$apply()}),0)}e.guiPromise.resolve(i)}))};e.prototype.onNewColumnsLoaded=function(){this.destroy()};e.prototype.destroyFilter=function(e,t){if(t===void 0){t="api"}var i=this.allFilters[e.getColId()];if(i){this.disposeFilterWrapper(i,t);this.onFilterChanged()}};e.prototype.disposeFilterWrapper=function(e,t){var i=this;e.filterPromise.then((function(n){n.setModel(null);if(n.destroy){n.destroy()}e.column.setFilterActive(false,t);if(e.scope){if(e.compiledElement){e.compiledElement.remove()}e.scope.$destroy()}delete i.allFilters[e.column.getColId()]}))};e.prototype.destroy=function(){var e=this;o.Utils.iterateObject(this.allFilters,(function(t,i){e.disposeFilterWrapper(i,"filterDestroyed")}))};e.QUICK_FILTER_SEPARATOR="\n";n([d.Autowired("$compile"),r("design:type",Object)],e.prototype,"$compile",void 0);n([d.Autowired("$scope"),r("design:type",Object)],e.prototype,"$scope",void 0);n([d.Autowired("gridOptionsWrapper"),r("design:type",a.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([d.Autowired("gridCore"),r("design:type",Object)],e.prototype,"gridCore",void 0);n([d.Autowired("popupService"),r("design:type",s.PopupService)],e.prototype,"popupService",void 0);n([d.Autowired("valueService"),r("design:type",l.ValueService)],e.prototype,"valueService",void 0);n([d.Autowired("columnController"),r("design:type",u.ColumnController)],e.prototype,"columnController",void 0);n([d.Autowired("rowModel"),r("design:type",Object)],e.prototype,"rowModel",void 0);n([d.Autowired("eventService"),r("design:type",f.EventService)],e.prototype,"eventService",void 0);n([d.Autowired("enterprise"),r("design:type",Boolean)],e.prototype,"enterprise",void 0);n([d.Autowired("context"),r("design:type",d.Context)],e.prototype,"context",void 0);n([d.Autowired("columnApi"),r("design:type",c.ColumnApi)],e.prototype,"columnApi",void 0);n([d.Autowired("gridApi"),r("design:type",h.GridApi)],e.prototype,"gridApi",void 0);n([d.Autowired("componentResolver"),r("design:type",g.ComponentResolver)],e.prototype,"componentResolver",void 0);n([d.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);n([d.PreDestroy,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"destroy",null);e=t=n([d.Bean("filterManager")],e);return e;var t}();t.FilterManager=m},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var o=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:true});var a=i(12);var s=i(0);var l=i(0);var u=function(){function e(){this.expressionToFunctionCache={}}e.prototype.setBeans=function(e){this.logger=e.create("ExpressionService")};e.prototype.evaluate=function(e,t){if(typeof e==="function"){var i=e;return i(t)}else if(typeof e==="string"){var n=e;return this.evaluateExpression(n,t)}else{console.error("ag-Grid: value should be either a string or a function",e)}};e.prototype.evaluateExpression=function(e,t){try{var i=this.createExpressionFunction(e);var n=i(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.columnApi,t.getValue,t.column,t.columnGroup);return n}catch(t){console.log("Processing of the expression failed");console.log("Expression = "+e);console.log("Exception = "+t);return null}};e.prototype.createExpressionFunction=function(e){if(this.expressionToFunctionCache[e]){return this.expressionToFunctionCache[e]}var t=this.createFunctionBody(e);var i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",t);this.expressionToFunctionCache[e]=i;return i};e.prototype.createFunctionBody=function(e){if(e.indexOf("return")>=0){return e}else{return"return "+e+";"}};n([o(0,l.Qualifier("loggerFactory")),r("design:type",Function),r("design:paramtypes",[a.LoggerFactory]),r("design:returntype",void 0)],e.prototype,"setBeans",null);e=n([s.Bean("expressionService")],e);return e}();t.ExpressionService=u},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var a=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:true});var s=i(1);var l=i(2);var u=i(19);var c=i(49);var d=i(16);var f=i(3);var p=i(50);var h=i(5);var g=i(9);var m=i(34);var v=i(0);var y=i(42);var b=i(7);var _=i(4);var w=i(12);var C=i(22);var A=i(82);var E=i(23);var x=i(13);var T=i(29);var S=i(6);var D=i(30);var k=i(28);var O=i(37);var R=i(57);var N=function(e){n(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.rowCompsByIndex={};t.floatingTopRowComps=[];t.floatingBottomRowComps=[];t.refreshInProgress=false;return t}t.prototype.agWire=function(e){this.logger=e.create("RowRenderer")};t.prototype.registerGridComp=function(e){this.gridPanel=e;this.rowContainers=this.gridPanel.getRowContainers();this.addDestroyableEventListener(this.eventService,h.Events.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this));this.addDestroyableEventListener(this.eventService,h.Events.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this));this.addDestroyableEventListener(this.eventService,h.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this));this.addDestroyableEventListener(this.eventService,h.Events.EVENT_BODY_SCROLL,this.redrawAfterScroll.bind(this));this.addDestroyableEventListener(this.eventService,h.Events.EVENT_BODY_HEIGHT_CHANGED,this.redrawAfterScroll.bind(this));this.redrawAfterModelUpdate()};t.prototype.onPageLoaded=function(e){if(s.Utils.missing(e)){e={type:h.Events.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,animate:false,keepRenderedRows:false,newData:false,newPage:false}}this.onModelUpdated(e)};t.prototype.getAllCellsForColumn=function(e){var t=[];s.Utils.iterateObject(this.rowCompsByIndex,i);s.Utils.iterateObject(this.floatingBottomRowComps,i);s.Utils.iterateObject(this.floatingTopRowComps,i);function i(i,n){var r=n.getCellForCol(e);if(r){t.push(r)}}return t};t.prototype.refreshFloatingRowComps=function(){this.refreshFloatingRows(this.floatingTopRowComps,this.pinnedRowModel.getPinnedTopRowData(),this.rowContainers.floatingTopPinnedLeft,this.rowContainers.floatingTopPinnedRight,this.rowContainers.floatingTop,this.rowContainers.floatingTopFullWidth);this.refreshFloatingRows(this.floatingBottomRowComps,this.pinnedRowModel.getPinnedBottomRowData(),this.rowContainers.floatingBottomPinnedLeft,this.rowContainers.floatingBottomPinnedRight,this.rowContainers.floatingBottom,this.rowContainers.floatingBottomFullWith)};t.prototype.refreshFloatingRows=function(e,t,i,n,r,o){var a=this;e.forEach((function(e){e.destroy()}));e.length=0;if(t){t.forEach((function(t){var s=new p.RowComp(a.$scope,r,i,n,o,t,a.beans,false,false);s.init();e.push(s)}))}this.flushContainers(e)};t.prototype.onPinnedRowDataChanged=function(){this.redrawAfterModelUpdate()};t.prototype.onModelUpdated=function(e){var t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:true};this.redrawAfterModelUpdate(t)};t.prototype.getRenderedIndexesForRowNodes=function(e){var t=[];if(s.Utils.missing(e)){return t}s.Utils.iterateObject(this.rowCompsByIndex,(function(i,n){var r=n.getRowNode();if(e.indexOf(r)>=0){t.push(i)}}));return t};t.prototype.redrawRows=function(e){if(!e||e.length==0){return}var t=this.getRenderedIndexesForRowNodes(e);this.removeRowComps(t);this.redrawAfterModelUpdate({recycleRows:true})};t.prototype.getCellToRestoreFocusToAfterRefresh=function(e){var t=e.suppressKeepFocus?null:this.focusedCellController.getFocusCellToUseAfterRefresh();if(s.Utils.missing(t)){return null}var i=document.activeElement;var n=this.gridOptionsWrapper.getDomData(i,m.CellComp.DOM_DATA_KEY_CELL_COMP);var r=s.Utils.missing(n);if(r){return null}return t};t.prototype.redrawAfterModelUpdate=function(e){if(e===void 0){e={}}this.getLockOnRefresh();var t=this.getCellToRestoreFocusToAfterRefresh(e);this.sizeContainerToPageHeight();this.scrollToTopIfNewData(e);var i=e.recycleRows;var n=e.animate&&this.gridOptionsWrapper.isAnimateRows();var r=this.binRowComps(i);this.redraw(r,n);if(!e.onlyBody){this.refreshFloatingRowComps()}this.restoreFocusedCell(t);this.releaseLockOnRefresh()};t.prototype.scrollToTopIfNewData=function(e){var t=e.newData||e.newPage;var i=this.gridOptionsWrapper.isSuppressScrollOnNewData();if(t&&!i){this.gridPanel.scrollToTop()}};t.prototype.sizeContainerToPageHeight=function(){var e=this.paginationProxy.getCurrentPageHeight();if(e===0){e=1}this.heightScaler.setModelHeight(e);var t=this.heightScaler.getUiContainerHeight();this.rowContainers.body.setHeight(t);this.rowContainers.fullWidth.setHeight(t);this.rowContainers.pinnedLeft.setHeight(t);this.rowContainers.pinnedRight.setHeight(t)};t.prototype.getLockOnRefresh=function(){if(this.refreshInProgress){throw new Error("ag-Grid: cannot get grid to draw rows when it is in the middle of drawing rows. "+"Your code probably called a grid API method while the grid was in the render stage. To overcome "+"this, put the API call into a timeout, eg instead of api.refreshView(), "+"call setTimeout(function(){api.refreshView(),0}). To see what part of your code "+"that caused the refresh check this stacktrace.")}this.refreshInProgress=true};t.prototype.releaseLockOnRefresh=function(){this.refreshInProgress=false};t.prototype.restoreFocusedCell=function(e){if(e){this.focusedCellController.setFocusedCell(e.rowIndex,e.column,e.floating,true)}};t.prototype.stopEditing=function(e){if(e===void 0){e=false}this.forEachRowComp((function(t,i){i.stopEditing(e)}))};t.prototype.forEachCellComp=function(e){this.forEachRowComp((function(t,i){return i.forEachCellComp(e)}))};t.prototype.forEachRowComp=function(e){s.Utils.iterateObject(this.rowCompsByIndex,e);s.Utils.iterateObject(this.floatingTopRowComps,e);s.Utils.iterateObject(this.floatingBottomRowComps,e)};t.prototype.addRenderedRowListener=function(e,t,i){var n=this.rowCompsByIndex[t];if(n){n.addEventListener(e,i)}};t.prototype.flashCells=function(e){if(e===void 0){e={}}this.forEachCellCompFiltered(e.rowNodes,e.columns,(function(e){return e.flashCell()}))};t.prototype.refreshCells=function(e){if(e===void 0){e={}}var t={forceRefresh:e.force,newData:false};this.forEachCellCompFiltered(e.rowNodes,e.columns,(function(e){return e.refreshCell(t)}))};t.prototype.getCellRendererInstances=function(e){var t=[];this.forEachCellCompFiltered(e.rowNodes,e.columns,(function(e){var i=e.getCellRenderer();if(i){t.push(i)}}));return t};t.prototype.getCellEditorInstances=function(e){var t=[];this.forEachCellCompFiltered(e.rowNodes,e.columns,(function(e){var i=e.getCellEditor();if(i){t.push(i)}}));return t};t.prototype.getEditingCells=function(){var e=[];this.forEachCellComp((function(t){if(t.isEditing()){var i=t.getGridCell().getGridCellDef();e.push(i)}}));return e};t.prototype.forEachCellCompFiltered=function(e,t,i){var n=this;var r;if(s.Utils.exists(e)){r={top:{},bottom:{},normal:{}};e.forEach((function(e){if(e.rowPinned===g.Constants.PINNED_TOP){r.top[e.id]=true}else if(e.rowPinned===g.Constants.PINNED_BOTTOM){r.bottom[e.id]=true}else{r.normal[e.id]=true}}))}var o;if(s.Utils.exists(t)){o={};t.forEach((function(e){var t=n.columnController.getGridColumn(e);if(s.Utils.exists(t)){o[t.getId()]=true}}))}var a=function(e){var t=e.getRowNode();var n=t.id;var a=t.rowPinned;if(s.Utils.exists(r)){if(a===g.Constants.PINNED_BOTTOM){if(!r.bottom[n]){return}}else if(a===g.Constants.PINNED_TOP){if(!r.top[n]){return}}else{if(!r.normal[n]){return}}}e.forEachCellComp((function(e){var t=e.getColumn().getId();var n=o&&!o[t];if(n){return}i(e)}))};s.Utils.iterateObject(this.rowCompsByIndex,(function(e,t){a(t)}));if(this.floatingTopRowComps){this.floatingTopRowComps.forEach(a)}if(this.floatingBottomRowComps){this.floatingBottomRowComps.forEach(a)}};t.prototype.destroy=function(){e.prototype.destroy.call(this);var t=Object.keys(this.rowCompsByIndex);this.removeRowComps(t)};t.prototype.binRowComps=function(e){var t=this;var i;var n={};if(e){i=[];s.Utils.iterateObject(this.rowCompsByIndex,(function(e,r){var o=r.getRowNode();if(s.Utils.exists(o.id)){n[o.id]=r;delete t.rowCompsByIndex[e]}else{i.push(e)}}))}else{i=Object.keys(this.rowCompsByIndex)}this.removeRowComps(i);return n};t.prototype.removeRowComps=function(e){var t=this;e.forEach((function(e){var i=t.rowCompsByIndex[e];i.destroy();delete t.rowCompsByIndex[e]}))};t.prototype.redrawAfterScroll=function(){this.getLockOnRefresh();this.redraw(null,false,true);this.releaseLockOnRefresh()};t.prototype.removeRowCompsNotToDraw=function(e){var t={};e.forEach((function(e){return t[e]=true}));var i=Object.keys(this.rowCompsByIndex);var n=s.Utils.filter(i,(function(e){return!t[e]}));this.removeRowComps(n)};t.prototype.calculateIndexesToDraw=function(){var e=this;var t=s.Utils.createArrayOfNumbers(this.firstRenderedRow,this.lastRenderedRow);s.Utils.iterateObject(this.rowCompsByIndex,(function(i,n){var r=Number(i);if(r<e.firstRenderedRow||r>e.lastRenderedRow){if(e.keepRowBecauseEditing(n)){t.push(r)}}}));t.sort((function(e,t){return e-t}));return t};t.prototype.redraw=function(e,t,i){var n=this;if(t===void 0){t=false}if(i===void 0){i=false}this.heightScaler.update();this.workOutFirstAndLastRowsToRender();var r=this.calculateIndexesToDraw();this.removeRowCompsNotToDraw(r);var o=[];var a=[];r.forEach((function(r){var l=n.createOrUpdateRowComp(r,e,t,i);if(s.Utils.exists(l)){a.push(l);s.Utils.pushAll(o,l.getAndClearNextVMTurnFunctions())}}));this.flushContainers(a);s.Utils.executeNextVMTurn(o);if(i&&!this.gridOptionsWrapper.isSuppressAnimationFrame()){this.beans.taskQueue.addP2Task(this.destroyRowComps.bind(this,e,t))}else{this.destroyRowComps(e,t)}this.checkAngularCompile()};t.prototype.flushContainers=function(e){s.Utils.iterateObject(this.rowContainers,(function(e,t){if(t){t.flushRowTemplates()}}));e.forEach((function(e){return e.afterFlush()}))};t.prototype.onDisplayedColumnsChanged=function(){var e=this.columnController.isPinningLeft();var t=this.columnController.isPinningRight();var i=this.pinningLeft!==e||t!==this.pinningRight;if(i){this.pinningLeft=e;this.pinningRight=t;if(this.gridOptionsWrapper.isEmbedFullWidthRows()){this.redrawFullWidthEmbeddedRows()}}};t.prototype.redrawFullWidthEmbeddedRows=function(){var e=[];s.Utils.iterateObject(this.rowCompsByIndex,(function(t,i){if(i.isFullWidth()){var n=i.getRowNode().rowIndex;e.push(n.toString())}}));this.refreshFloatingRowComps();this.removeRowComps(e);this.redrawAfterScroll()};t.prototype.createOrUpdateRowComp=function(e,t,i,n){var r;var o=this.rowCompsByIndex[e];if(!o){r=this.paginationProxy.getRow(e);if(s.Utils.exists(r)&&s.Utils.exists(t)&&t[r.id]){o=t[r.id];t[r.id]=null}}var a=!o;if(a){if(!r){r=this.paginationProxy.getRow(e)}if(s.Utils.exists(r)){o=this.createRowComp(r,i,n)}else{return}}else{o.ensureDomOrder()}this.rowCompsByIndex[e]=o;return o};t.prototype.destroyRowComps=function(e,t){var i=[];s.Utils.iterateObject(e,(function(e,n){if(!n){return}n.destroy(t);s.Utils.pushAll(i,n.getAndClearDelayedDestroyFunctions())}));s.Utils.executeInAWhile(i)};t.prototype.checkAngularCompile=function(){var e=this;if(this.gridOptionsWrapper.isAngularCompileRows()){setTimeout((function(){e.$scope.$apply()}),0)}};t.prototype.workOutFirstAndLastRowsToRender=function(){var e;var t;if(!this.paginationProxy.isRowsToRender()){e=0;t=-1}else{var i=this.paginationProxy.getPageFirstRow();var n=this.paginationProxy.getPageLastRow();var r=this.paginationProxy?this.paginationProxy.getPixelOffset():0;var o=this.heightScaler.getOffset();var a=this.gridPanel.getVScrollPosition();var s=a.top;var l=a.bottom;var u=s+r+o;var c=l+r+o;var d=this.paginationProxy.getRowIndexAtPixel(u);var f=this.paginationProxy.getRowIndexAtPixel(c);var p=this.gridOptionsWrapper.getRowBuffer();d=d-p;f=f+p;if(d<i){d=i}if(f>n){f=n}e=d;t=f}var g=e!==this.firstRenderedRow;var m=t!==this.lastRenderedRow;if(g||m){this.firstRenderedRow=e;this.lastRenderedRow=t;var v={type:h.Events.EVENT_VIEWPORT_CHANGED,firstRow:e,lastRow:t,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(v)}};t.prototype.getFirstVirtualRenderedRow=function(){return this.firstRenderedRow};t.prototype.getLastVirtualRenderedRow=function(){return this.lastRenderedRow};t.prototype.keepRowBecauseEditing=function(e){var t=false;var i=true;var n=e.getRowNode();var r=this.focusedCellController.isRowNodeFocused(n);var o=e.isEditing();var a=r||o;if(!a){return t}var s=this.paginationProxy.isRowPresent(n);return s?i:t};t.prototype.createRowComp=function(e,t,i){var n=i&&!this.gridOptionsWrapper.isSuppressAnimationFrame();var r=new p.RowComp(this.$scope,this.rowContainers.body,this.rowContainers.pinnedLeft,this.rowContainers.pinnedRight,this.rowContainers.fullWidth,e,this.beans,t,n);r.init();return r};t.prototype.getRenderedNodes=function(){var e=this.rowCompsByIndex;return Object.keys(e).map((function(t){return e[t].getRowNode()}))};t.prototype.navigateToNextCell=function(e,t,i,n){var r=i;while(true){r=this.cellNavigationService.getNextCellToFocus(t,r);if(s.Utils.missing(r)){break}var o=this.gridOptionsWrapper.isGroupUseEntireRow();if(o){var a=this.paginationProxy.getRow(r.rowIndex);if(!a.group){break}}else{break}}if(n){var l=this.gridOptionsWrapper.getNavigateToNextCellFunc();if(s.Utils.exists(l)){var u={key:t,previousCellDef:i,nextCellDef:r?r.getGridCellDef():null,event:e};var c=l(u);if(s.Utils.exists(c)){r=new E.GridCell(c)}else{r=null}}}if(!r){return}this.ensureCellVisible(r);this.focusedCellController.setFocusedCell(r.rowIndex,r.column,r.floating,true);if(this.rangeController){var d=new E.GridCell({rowIndex:r.rowIndex,floating:r.floating,column:r.column});this.rangeController.setRangeToCell(d)}};t.prototype.ensureCellVisible=function(e){if(s.Utils.missing(e.floating)){this.gridPanel.ensureIndexVisible(e.rowIndex)}if(!e.column.isPinned()){this.gridPanel.ensureColumnVisible(e.column)}this.gridPanel.horizontallyScrollHeaderCenterAndFloatingCenter();this.animationFrameService.flushAllFrames()};t.prototype.startEditingCell=function(e,t,i){var n=this.getComponentForCell(e);if(n){n.startRowOrCellEdit(t,i)}};t.prototype.getComponentForCell=function(e){var t;switch(e.floating){case g.Constants.PINNED_TOP:t=this.floatingTopRowComps[e.rowIndex];break;case g.Constants.PINNED_BOTTOM:t=this.floatingBottomRowComps[e.rowIndex];break;default:t=this.rowCompsByIndex[e.rowIndex];break}if(!t){return null}var i=t.getRenderedCellForColumn(e.column);return i};t.prototype.onTabKeyDown=function(e,t){var i=t.shiftKey;var n=this.moveToCellAfter(e,i);if(n){t.preventDefault()}};t.prototype.tabToNextCell=function(e){var t=this.focusedCellController.getFocusedCell();if(s.Utils.missing(t)){return false}var i=this.getComponentForCell(t);if(s.Utils.missing(i)){return false}var n=this.moveToCellAfter(i,e);return n};t.prototype.moveToCellAfter=function(e,t){var i=e.isEditing();var n;if(i){if(this.gridOptionsWrapper.isFullRowEdit()){n=this.moveToNextEditingRow(e,t)}else{n=this.moveToNextEditingCell(e,t)}}else{n=this.moveToNextCellNotEditing(e,t)}return n};t.prototype.moveToNextEditingCell=function(e,t){var i=e.getGridCell();e.stopEditing();var n=this.findNextCellToFocusOn(i,t,true);var r=s.Utils.exists(n);if(r){n.startEditingIfEnabled(null,null,true);n.focusCell(false)}return r};t.prototype.moveToNextEditingRow=function(e,t){var i=e.getGridCell();var n=this.findNextCellToFocusOn(i,t,true);var r=s.Utils.exists(n);if(r){this.moveEditToNextCellOrRow(e,n)}return r};t.prototype.moveToNextCellNotEditing=function(e,t){var i=e.getGridCell();var n=this.findNextCellToFocusOn(i,t,false);var r=s.Utils.exists(n);if(r){n.focusCell(true)}return r};t.prototype.moveEditToNextCellOrRow=function(e,t){var i=e.getGridCell();var n=t.getGridCell();var r=i.rowIndex===n.rowIndex&&i.floating===n.floating;if(r){e.setFocusOutOnEditor();t.setFocusInOnEditor()}else{var o=e.getRenderedRow();var a=t.getRenderedRow();e.setFocusOutOnEditor();o.stopEditing();a.startRowEditing();t.setFocusInOnEditor()}t.focusCell()};t.prototype.findNextCellToFocusOn=function(e,t,i){var n=e;while(true){n=this.cellNavigationService.getNextTabbedCell(n,t);var r=this.gridOptionsWrapper.getTabToNextCellFunc();if(s.Utils.exists(r)){var o={backwards:t,editing:i,previousCellDef:e.getGridCellDef(),nextCellDef:n?n.getGridCellDef():null};var a=r(o);if(s.Utils.exists(a)){n=new E.GridCell(a)}else{n=null}}if(!n){return null}if(i){var l=this.paginationProxy.getRow(n.rowIndex);var u=n.column.isCellEditable(l);if(!u){continue}}var c=s.Utils.missing(n.floating);if(c){this.gridPanel.ensureIndexVisible(n.rowIndex)}if(!n.column.isPinned()){this.gridPanel.ensureColumnVisible(n.column)}this.gridPanel.horizontallyScrollHeaderCenterAndFloatingCenter();this.animationFrameService.flushAllFrames();var d=this.getComponentForCell(n);if(s.Utils.missing(d)){continue}if(d.isSuppressNavigable()){continue}if(this.rangeController){var f=new E.GridCell({rowIndex:n.rowIndex,floating:n.floating,column:n.column});this.rangeController.setRangeToCell(f)}return d}};r([v.Autowired("paginationProxy"),o("design:type",T.PaginationProxy)],t.prototype,"paginationProxy",void 0);r([v.Autowired("columnController"),o("design:type",_.ColumnController)],t.prototype,"columnController",void 0);r([v.Autowired("gridOptionsWrapper"),o("design:type",l.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([v.Autowired("gridCore"),o("design:type",y.GridCore)],t.prototype,"gridCore",void 0);r([v.Autowired("$scope"),o("design:type",Object)],t.prototype,"$scope",void 0);r([v.Autowired("expressionService"),o("design:type",u.ExpressionService)],t.prototype,"expressionService",void 0);r([v.Autowired("templateService"),o("design:type",c.TemplateService)],t.prototype,"templateService",void 0);r([v.Autowired("valueService"),o("design:type",d.ValueService)],t.prototype,"valueService",void 0);r([v.Autowired("eventService"),o("design:type",f.EventService)],t.prototype,"eventService",void 0);r([v.Autowired("pinnedRowModel"),o("design:type",D.PinnedRowModel)],t.prototype,"pinnedRowModel",void 0);r([v.Autowired("context"),o("design:type",v.Context)],t.prototype,"context",void 0);r([v.Autowired("loggerFactory"),o("design:type",w.LoggerFactory)],t.prototype,"loggerFactory",void 0);r([v.Autowired("focusedCellController"),o("design:type",C.FocusedCellController)],t.prototype,"focusedCellController",void 0);r([v.Autowired("cellNavigationService"),o("design:type",A.CellNavigationService)],t.prototype,"cellNavigationService",void 0);r([v.Autowired("columnApi"),o("design:type",b.ColumnApi)],t.prototype,"columnApi",void 0);r([v.Autowired("gridApi"),o("design:type",S.GridApi)],t.prototype,"gridApi",void 0);r([v.Autowired("beans"),o("design:type",k.Beans)],t.prototype,"beans",void 0);r([v.Autowired("heightScaler"),o("design:type",R.HeightScaler)],t.prototype,"heightScaler",void 0);r([v.Autowired("animationFrameService"),o("design:type",O.AnimationFrameService)],t.prototype,"animationFrameService",void 0);r([v.Optional("rangeController"),o("design:type",Object)],t.prototype,"rangeController",void 0);r([a(0,v.Qualifier("loggerFactory")),o("design:type",Function),o("design:paramtypes",[w.LoggerFactory]),o("design:returntype",void 0)],t.prototype,"agWire",null);r([v.PreDestroy,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"destroy",null);t=r([v.Bean("rowRenderer")],t);return t}(x.BeanStub);t.RowRenderer=N},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(91);var s=i(2);var l=i(122);var u=i(18);var c=i(27);var d=i(1);var f=i(124);var p=i(6);var h=i(7);var g;(function(e){e[e["AG_GRID"]=0]="AG_GRID";e[e["FRAMEWORK"]=1]="FRAMEWORK"})(g||(g={}));var m=function(){function e(){}t=e;e.prototype.newDateComponent=function(e){return this.componentResolver.createAgGridComponent(this.gridOptions,e,"dateComponent",{api:this.gridApi,columnApi:this.columnApi},"agDateInput")};e.prototype.newHeaderComponent=function(e){return this.componentResolver.createAgGridComponent(e.column.getColDef(),e,"headerComponent",{api:this.gridApi,columnApi:this.columnApi,column:e.column,colDef:e.column.getColDef()},"agColumnHeader")};e.prototype.newHeaderGroupComponent=function(e){return this.componentResolver.createAgGridComponent(e.columnGroup.getColGroupDef(),e,"headerGroupComponent",{api:this.gridApi,columnApi:this.columnApi},"agColumnGroupHeader")};e.prototype.newFloatingFilterWrapperComponent=function(e,i){var n=this;var r=e.getColDef();if(r.suppressFilter){return this.newEmptyFloatingFilterWrapperComponent(e)}var o;if(!r.filter){o=this.gridOptionsWrapper.isEnterprise()?"agSetColumnFloatingFilter":"agTextColumnFloatingFilter"}else if(typeof r.filter==="string"&&Object.keys(t.filterToFloatingFilterNames).indexOf(r.filter)>-1){o=t.filterToFloatingFilterNames[r.filter]}var s={column:e,colDef:r,api:this.gridApi,columnApi:this.columnApi};var u=this.componentResolver.createAgGridComponent(r,i,"floatingFilterComponent",s,o,false);var c={column:e,floatingFilterComp:u,suppressFilterButton:this.componentResolver.mergeParams(r,"floatingFilterComponent",s,i).suppressFilterButton};if(!u){var f=this.getFilterComponentPrototype(r);if(f&&!f.component.prototype.getModelAsString){return this.newEmptyFloatingFilterWrapperComponent(e)}var p=i.currentParentModel;i.currentParentModel=function(){var t=n.filterManager.getFilterComponent(e);return t.resolveNow(null,(function(e){return e.getModelAsString?e.getModelAsString(p()):null}))};c.floatingFilterComp=d.Promise.resolve(this.componentResolver.createInternalAgGridComponent(a.ReadModelAsStringFloatingFilterComp,i))}return this.componentResolver.createInternalAgGridComponent(l.FloatingFilterWrapperComp,c)};e.prototype.newFullWidthGroupRowInnerCellRenderer=function(e){return this.componentResolver.createAgGridComponent(this.gridOptions,e,"groupRowInnerRenderer",e,null,false)};e.prototype.newCellRenderer=function(e,t){return this.componentResolver.createAgGridComponent(e,t,"cellRenderer",t,null,false)};e.prototype.newInnerCellRenderer=function(e,t){return this.componentResolver.createAgGridComponent(e,t,"innerRenderer",t,null)};e.prototype.newFullRowGroupRenderer=function(e){return this.componentResolver.createAgGridComponent(this.gridOptionsWrapper,e,"fullWidthCellRenderer",e,null)};e.prototype.newOverlayWrapperComponent=function(){return this.componentResolver.createInternalAgGridComponent(f.OverlayWrapperComponent,null)};e.prototype.newLoadingOverlayComponent=function(){return this.componentResolver.createAgGridComponent(this.gridOptions,null,"loadingOverlayComponent",{api:this.gridApi,columnApi:this.columnApi},"agLoadingOverlay")};e.prototype.newNoRowsOverlayComponent=function(){return this.componentResolver.createAgGridComponent(this.gridOptions,null,"noRowsOverlayComponent",{api:this.gridApi,columnApi:this.columnApi},"agNoRowsOverlay")};e.prototype.getFilterComponentPrototype=function(e){return this.componentResolver.getComponentToUse(e,"filter",{api:this.gridApi,columnApi:this.columnApi,colDef:e})};e.prototype.newEmptyFloatingFilterWrapperComponent=function(e){var t={column:e,floatingFilterComp:null};return this.componentResolver.createInternalAgGridComponent(l.EmptyFloatingFilterWrapperComp,t)};e.filterToFloatingFilterNames={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"};n([o.Autowired("componentResolver"),r("design:type",c.ComponentResolver)],e.prototype,"componentResolver",void 0);n([o.Autowired("gridOptions"),r("design:type",Object)],e.prototype,"gridOptions",void 0);n([o.Autowired("gridApi"),r("design:type",p.GridApi)],e.prototype,"gridApi",void 0);n([o.Autowired("columnApi"),r("design:type",h.ColumnApi)],e.prototype,"columnApi",void 0);n([o.Autowired("gridOptionsWrapper"),r("design:type",s.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.Autowired("filterManager"),r("design:type",u.FilterManager)],e.prototype,"filterManager",void 0);e=t=n([o.Bean("componentRecipes")],e);return e;var t}();t.ComponentRecipes=m},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(3);var s=i(5);var l=i(2);var u=i(7);var c=i(4);var d=i(1);var f=i(23);var p=i(6);var h=i(34);var g=function(){function e(){}e.prototype.init=function(){this.eventService.addEventListener(s.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearFocusedCell.bind(this));this.eventService.addEventListener(s.Events.EVENT_COLUMN_EVERYTHING_CHANGED,this.clearFocusedCell.bind(this));this.eventService.addEventListener(s.Events.EVENT_COLUMN_GROUP_OPENED,this.clearFocusedCell.bind(this));this.eventService.addEventListener(s.Events.EVENT_COLUMN_MOVED,this.clearFocusedCell.bind(this));this.eventService.addEventListener(s.Events.EVENT_COLUMN_PINNED,this.clearFocusedCell.bind(this));this.eventService.addEventListener(s.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearFocusedCell.bind(this));this.eventService.addEventListener(s.Events.EVENT_COLUMN_VISIBLE,this.clearFocusedCell.bind(this))};e.prototype.clearFocusedCell=function(){this.focusedCell=null;this.onCellFocused(false)};e.prototype.getFocusedCell=function(){return this.focusedCell};e.prototype.getFocusCellToUseAfterRefresh=function(){if(this.gridOptionsWrapper.isSuppressFocusAfterRefresh()){return null}if(!this.focusedCell){return null}var e=this.getGridCellForDomElement(document.activeElement);if(!e){return null}return this.focusedCell};e.prototype.getGridCellForDomElement=function(e){var t=e;while(t){var i=this.gridOptionsWrapper.getDomData(t,h.CellComp.DOM_DATA_KEY_CELL_COMP);if(i){return i.getGridCell()}t=t.parentNode}return null};e.prototype.setFocusedCell=function(e,t,i,n){if(n===void 0){n=false}var r=d.Utils.makeNull(this.columnController.getGridColumn(t));this.focusedCell=new f.GridCell({rowIndex:e,floating:d.Utils.makeNull(i),column:r});this.onCellFocused(n)};e.prototype.isCellFocused=function(e){if(d.Utils.missing(this.focusedCell)){return false}return this.focusedCell.column===e.column&&this.isRowFocused(e.rowIndex,e.floating)};e.prototype.isRowNodeFocused=function(e){return this.isRowFocused(e.rowIndex,e.rowPinned)};e.prototype.isAnyCellFocused=function(){return!!this.focusedCell};e.prototype.isRowFocused=function(e,t){if(d.Utils.missing(this.focusedCell)){return false}var i=d.Utils.makeNull(t);return this.focusedCell.rowIndex===e&&this.focusedCell.floating===i};e.prototype.onCellFocused=function(e){var t={type:s.Events.EVENT_CELL_FOCUSED,forceBrowserFocus:e,rowIndex:null,column:null,floating:null,api:this.gridApi,columnApi:this.columnApi,rowPinned:null};if(this.focusedCell){t.rowIndex=this.focusedCell.rowIndex;t.column=this.focusedCell.column;t.rowPinned=this.focusedCell.floating}this.eventService.dispatchEvent(t)};n([o.Autowired("eventService"),r("design:type",a.EventService)],e.prototype,"eventService",void 0);n([o.Autowired("gridOptionsWrapper"),r("design:type",l.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.Autowired("columnController"),r("design:type",c.ColumnController)],e.prototype,"columnController",void 0);n([o.Autowired("columnApi"),r("design:type",u.ColumnApi)],e.prototype,"columnApi",void 0);n([o.Autowired("gridApi"),r("design:type",p.GridApi)],e.prototype,"gridApi",void 0);n([o.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);e=n([o.Bean("focusedCellController")],e);return e}();t.FocusedCellController=g},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(1);var r=i(64);var o=function(){function e(e){this.rowIndex=e.rowIndex;this.column=e.column;this.floating=n.Utils.makeNull(e.floating)}e.prototype.getGridCellDef=function(){return{rowIndex:this.rowIndex,column:this.column,floating:this.floating}};e.prototype.getGridRow=function(){return new r.GridRow(this.rowIndex,this.floating)};e.prototype.toString=function(){return"rowIndex = "+this.rowIndex+", floating = "+this.floating+", column = "+(this.column?this.column.getId():null)};e.prototype.createId=function(){return this.rowIndex+"."+this.floating+"."+this.column.getId()};e.prototype.equals=function(e){var t=this.column===e.column;var i=this.floating===e.floating;var n=this.rowIndex===e.rowIndex;return t&&i&&n};return e}();t.GridCell=o},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(10);var a=i(0);var s=i(2);var l=i(7);var u=i(4);var c=i(3);var d=i(5);var f=i(0);var p=i(1);var h=i(6);var g=function(){function e(){}t=e;e.prototype.progressSort=function(e,t,i){if(i===void 0){i="api"}var n=this.getNextSortDirection(e);this.setSortForColumn(e,n,t,i)};e.prototype.setSortForColumn=function(e,t,i,n){if(n===void 0){n="api"}if(t!==o.Column.SORT_ASC&&t!==o.Column.SORT_DESC){t=null}e.setSort(t,n);if(e.getSort()){var r=Number((new Date).valueOf());e.setSortedAt(r)}else{e.setSortedAt(null)}var a=i&&!this.gridOptionsWrapper.isSuppressMultiSort();if(!a){this.clearSortBarThisColumn(e,n)}this.dispatchSortChangedEvents()};e.prototype.onSortChanged=function(){this.dispatchSortChangedEvents()};e.prototype.dispatchSortChangedEvents=function(){var e={type:d.Events.EVENT_SORT_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)};e.prototype.clearSortBarThisColumn=function(e,t){this.columnController.getPrimaryAndSecondaryAndAutoColumns().forEach((function(i){if(!(i===e)){i.setSort(null,t)}}))};e.prototype.getNextSortDirection=function(e){var i;if(e.getColDef().sortingOrder){i=e.getColDef().sortingOrder}else if(this.gridOptionsWrapper.getSortingOrder()){i=this.gridOptionsWrapper.getSortingOrder()}else{i=t.DEFAULT_SORTING_ORDER}if(!Array.isArray(i)||i.length<=0){console.warn("ag-grid: sortingOrder must be an array with at least one element, currently it's "+i);return}var n=i.indexOf(e.getSort());var r=n<0;var o=n==i.length-1;var a;if(r||o){a=i[0]}else{a=i[n+1]}if(t.DEFAULT_SORTING_ORDER.indexOf(a)<0){console.warn("ag-grid: invalid sort type "+a);return null}return a};e.prototype.getSortModel=function(){var e=this.getColumnsWithSortingOrdered();return p.Utils.map(e,(function(e){return{colId:e.getColId(),sort:e.getSort()}}))};e.prototype.setSortModel=function(e,t){var i=this;if(t===void 0){t="api"}if(!this.gridOptionsWrapper.isEnableSorting()){console.warn("ag-grid: You are setting the sort model on a grid that does not have sorting enabled");return}var n=e&&e.length>0;var r=this.columnController.getPrimaryAndSecondaryAndAutoColumns();r.forEach((function(r){var o=null;var a=-1;if(n&&!r.getColDef().suppressSorting){for(var s=0;s<e.length;s++){var l=e[s];if(typeof l.colId==="string"&&typeof r.getColId()==="string"&&i.compareColIds(l,r)){o=l.sort;a=s}}}if(o){r.setSort(o,t);r.setSortedAt(a)}else{r.setSort(null,t);r.setSortedAt(null)}}));this.dispatchSortChangedEvents()};e.prototype.compareColIds=function(e,t){return e.colId===t.getColId()};e.prototype.getColumnsWithSortingOrdered=function(){var e=this.columnController.getPrimaryAndSecondaryAndAutoColumns();var t=p.Utils.filter(e,(function(e){return!!e.getSort()}));t.sort((function(e,t){return e.sortedAt-t.sortedAt}));return t};e.prototype.getSortForRowController=function(){var e=this.getColumnsWithSortingOrdered();return p.Utils.map(e,(function(e){var t=e.getSort()===o.Column.SORT_ASC;return{inverter:t?1:-1,column:e}}))};e.DEFAULT_SORTING_ORDER=[o.Column.SORT_ASC,o.Column.SORT_DESC,null];n([a.Autowired("gridOptionsWrapper"),r("design:type",s.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([a.Autowired("columnController"),r("design:type",u.ColumnController)],e.prototype,"columnController",void 0);n([a.Autowired("eventService"),r("design:type",c.EventService)],e.prototype,"eventService",void 0);n([a.Autowired("columnApi"),r("design:type",l.ColumnApi)],e.prototype,"columnApi",void 0);n([a.Autowired("gridApi"),r("design:type",h.GridApi)],e.prototype,"gridApi",void 0);e=t=n([f.Bean("sortController")],e);return e;var t}();t.SortController=g},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(){}e.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged";e.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded";e.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged";e.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged";e.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged";e.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged";e.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged";e.EVENT_COLUMN_MOVED="columnMoved";e.EVENT_COLUMN_VISIBLE="columnVisible";e.EVENT_COLUMN_PINNED="columnPinned";e.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened";e.EVENT_COLUMN_RESIZED="columnResized";e.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged";e.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged";e.EVENT_ROW_GROUP_OPENED="rowGroupOpened";e.EVENT_ROW_DATA_CHANGED="rowDataChanged";e.EVENT_ROW_DATA_UPDATED="rowDataUpdated";e.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged";e.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged";e.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged";e.EVENT_MODEL_UPDATED="modelUpdated";e.EVENT_PASTE_START="pasteStart";e.EVENT_PASTE_END="pasteEnd";e.EVENT_CELL_CLICKED="cellClicked";e.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked";e.EVENT_CELL_MOUSE_DOWN="cellMouseDown";e.EVENT_CELL_CONTEXT_MENU="cellContextMenu";e.EVENT_CELL_VALUE_CHANGED="cellValueChanged";e.EVENT_ROW_VALUE_CHANGED="rowValueChanged";e.EVENT_CELL_FOCUSED="cellFocused";e.EVENT_ROW_SELECTED="rowSelected";e.EVENT_SELECTION_CHANGED="selectionChanged";e.EVENT_CELL_MOUSE_OVER="cellMouseOver";e.EVENT_CELL_MOUSE_OUT="cellMouseOut";e.EVENT_FILTER_CHANGED="filterChanged";e.EVENT_FILTER_MODIFIED="filterModified";e.EVENT_SORT_CHANGED="sortChanged";e.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved";e.EVENT_ROW_CLICKED="rowClicked";e.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked";e.EVENT_GRID_READY="gridReady";e.DEPRECATED_EVENT_GRID_SIZE_CHANGED="gridSizeChanged";e.EVENT_VIEWPORT_CHANGED="viewportChanged";e.EVENT_DRAG_STARTED="dragStarted";e.EVENT_DRAG_STOPPED="dragStopped";e.EVENT_ROW_EDITING_STARTED="rowEditingStarted";e.EVENT_ROW_EDITING_STOPPED="rowEditingStopped";e.EVENT_CELL_EDITING_STARTED="cellEditingStarted";e.EVENT_CELL_EDITING_STOPPED="cellEditingStopped";e.EVENT_BODY_SCROLL="bodyScroll";e.EVENT_ANIMATION_QUEUE_EMPTY="animationQueueEmpty";e.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged";e.EVENT_PAGINATION_CHANGED="paginationChanged";e.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged";e.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged";e.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged";e.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged";e.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged";e.EVENT_FLASH_CELLS="flashCells";e.EVENT_ROW_DRAG_ENTER="rowDragEnter";e.EVENT_ROW_DRAG_MOVE="rowDragMove";e.EVENT_ROW_DRAG_LEAVE="rowDragLeave";e.EVENT_ROW_DRAG_END="rowDragEnd";e.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest";e.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest";e.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest";e.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest";return e}();t.Events=n},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(10);var a=i(3);var s=i(0);var l=i(2);var u=i(7);var c=i(6);var d=function(){function e(e,t,i){this.displayedChildren=[];this.localEventService=new a.EventService;this.groupId=t;this.instanceId=i;this.originalColumnGroup=e}e.createUniqueId=function(e,t){return e+"_"+t};e.prototype.reset=function(){this.parent=null;this.children=null;this.displayedChildren=null};e.prototype.getParent=function(){return this.parent};e.prototype.setParent=function(e){this.parent=e};e.prototype.getUniqueId=function(){return e.createUniqueId(this.groupId,this.instanceId)};e.prototype.isEmptyGroup=function(){return this.displayedChildren.length===0};e.prototype.isMoving=function(){var e=this.getOriginalColumnGroup().getLeafColumns();if(!e||e.length===0){return false}var t=true;e.forEach((function(e){if(!e.isMoving()){t=false}}));return t};e.prototype.checkLeft=function(){this.displayedChildren.forEach((function(t){if(t instanceof e){t.checkLeft()}}));if(this.displayedChildren.length>0){if(this.gridOptionsWrapper.isEnableRtl()){var t=this.displayedChildren[this.displayedChildren.length-1];var i=t.getLeft();this.setLeft(i)}else{var n=this.displayedChildren[0].getLeft();this.setLeft(n)}}else{this.setLeft(null)}};e.prototype.getLeft=function(){return this.left};e.prototype.getOldLeft=function(){return this.oldLeft};e.prototype.setLeft=function(t){this.oldLeft=t;if(this.left!==t){this.left=t;this.localEventService.dispatchEvent(this.createAgEvent(e.EVENT_LEFT_CHANGED))}};e.prototype.createAgEvent=function(e){return{type:e}};e.prototype.addEventListener=function(e,t){this.localEventService.addEventListener(e,t)};e.prototype.removeEventListener=function(e,t){this.localEventService.removeEventListener(e,t)};e.prototype.getGroupId=function(){return this.groupId};e.prototype.getInstanceId=function(){return this.instanceId};e.prototype.isChildInThisGroupDeepSearch=function(t){var i=false;this.children.forEach((function(n){if(t===n){i=true}if(n instanceof e){if(n.isChildInThisGroupDeepSearch(t)){i=true}}}));return i};e.prototype.getActualWidth=function(){var e=0;if(this.displayedChildren){this.displayedChildren.forEach((function(t){e+=t.getActualWidth()}))}return e};e.prototype.isResizable=function(){if(!this.displayedChildren){return false}var e=false;this.displayedChildren.forEach((function(t){if(t.isResizable()){e=true}}));return e};e.prototype.getMinWidth=function(){var e=0;this.displayedChildren.forEach((function(t){e+=t.getMinWidth()}));return e};e.prototype.addChild=function(e){if(!this.children){this.children=[]}this.children.push(e)};e.prototype.getDisplayedChildren=function(){return this.displayedChildren};e.prototype.getLeafColumns=function(){var e=[];this.addLeafColumns(e);return e};e.prototype.getDisplayedLeafColumns=function(){var e=[];this.addDisplayedLeafColumns(e);return e};e.prototype.getDefinition=function(){return this.originalColumnGroup.getColGroupDef()};e.prototype.getColGroupDef=function(){return this.originalColumnGroup.getColGroupDef()};e.prototype.isPadding=function(){return this.originalColumnGroup.isPadding()};e.prototype.isExpandable=function(){return this.originalColumnGroup.isExpandable()};e.prototype.isExpanded=function(){return this.originalColumnGroup.isExpanded()};e.prototype.setExpanded=function(e){this.originalColumnGroup.setExpanded(e)};e.prototype.addDisplayedLeafColumns=function(t){this.displayedChildren.forEach((function(i){if(i instanceof o.Column){t.push(i)}else if(i instanceof e){i.addDisplayedLeafColumns(t)}}))};e.prototype.addLeafColumns=function(t){this.children.forEach((function(i){if(i instanceof o.Column){t.push(i)}else if(i instanceof e){i.addLeafColumns(t)}}))};e.prototype.getChildren=function(){return this.children};e.prototype.getColumnGroupShow=function(){return this.originalColumnGroup.getColumnGroupShow()};e.prototype.getOriginalColumnGroup=function(){return this.originalColumnGroup};e.prototype.calculateDisplayedColumns=function(){var t=this;this.displayedChildren=[];if(!this.originalColumnGroup.isExpandable()){this.displayedChildren=this.children}else{this.children.forEach((function(i){var n=i.getColumnGroupShow();switch(n){case e.HEADER_GROUP_SHOW_OPEN:if(t.originalColumnGroup.isExpanded()){t.displayedChildren.push(i)}break;case e.HEADER_GROUP_SHOW_CLOSED:if(!t.originalColumnGroup.isExpanded()){t.displayedChildren.push(i)}break;default:t.displayedChildren.push(i);break}}))}this.localEventService.dispatchEvent(this.createAgEvent(e.EVENT_DISPLAYED_CHILDREN_CHANGED))};e.HEADER_GROUP_SHOW_OPEN="open";e.HEADER_GROUP_SHOW_CLOSED="closed";e.EVENT_LEFT_CHANGED="leftChanged";e.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged";n([s.Autowired("gridOptionsWrapper"),r("design:type",l.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([s.Autowired("columnApi"),r("design:type",u.ColumnApi)],e.prototype,"columnApi",void 0);n([s.Autowired("gridApi"),r("design:type",c.GridApi)],e.prototype,"gridApi",void 0);return e}();t.ColumnGroup=d},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(2);var s=i(1);var l=i(66);var u=i(76);var c=i(77);var d;(function(e){e[e["AG_GRID"]=0]="AG_GRID";e[e["FRAMEWORK"]=1]="FRAMEWORK"})(d=t.ComponentType||(t.ComponentType={}));var f;(function(e){e[e["DEFAULT"]=0]="DEFAULT";e[e["REGISTERED_BY_NAME"]=1]="REGISTERED_BY_NAME";e[e["HARDCODED"]=2]="HARDCODED"})(f=t.ComponentSource||(t.ComponentSource={}));var p=function(){function e(){}e.prototype.getComponentToUse=function(e,t,i,n){var r=null;var o=null;var a=null;var l=null;var u;if(e!=null){var c=e[t];if(c!=null){if(typeof c==="string"){r=c}else if(this.agComponentUtils.doesImplementIComponent(c)){o=c}else{a=c}}l=e[t+"Framework"];u=e[t+"Selector"]}if(o&&l||r&&l||a&&l){throw Error("ag-grid: you are trying to specify: "+t+" twice as a component.")}if(l&&!this.frameworkComponentWrapper){throw Error("ag-grid: you are specifying a framework component but you are not using a framework version of ag-grid for : "+t)}if(u&&(r||o||a||l)){throw Error("ag-grid: you can't specify both, the selector and the component of ag-grid for : "+t)}if(l){return{type:d.FRAMEWORK,component:l,source:f.HARDCODED,dynamicParams:null}}if(o){return{type:d.AG_GRID,component:o,source:f.HARDCODED,dynamicParams:null}}if(a){return this.agComponentUtils.adaptFunction(t,a,d.AG_GRID,f.HARDCODED)}if(u){var p=u(i);if(p!=null){if(p.component==null){p.component=n}var h=this.resolveByName(t,p.component);return s._.assign(h,{dynamicParams:p.params})}}var g;if(r){g=r}else{g=n}return g==null?null:this.resolveByName(t,g)};e.prototype.resolveByName=function(e,t){var i=t!=null?t:e;var n=this.componentProvider.retrieve(i);if(n==null)return null;if(n.type==d.FRAMEWORK){return{component:n.component,type:d.FRAMEWORK,source:f.REGISTERED_BY_NAME,dynamicParams:null}}if(this.agComponentUtils.doesImplementIComponent(n.component)){return{component:n.component,type:d.AG_GRID,source:n.source==l.RegisteredComponentSource.REGISTERED?f.REGISTERED_BY_NAME:f.DEFAULT,dynamicParams:null}}return this.agComponentUtils.adaptFunction(e,n.component,n.type,n.source==l.RegisteredComponentSource.REGISTERED?f.REGISTERED_BY_NAME:f.DEFAULT)};e.prototype.mergeParams=function(e,t,i,n,r){if(r===void 0){r=null}var o=e?e[t+"Params"]:null;var a={};s._.mergeDeep(a,i);if(o!=null){var l=null;if(typeof o==="function"){l=o(n)}else{l=o}s._.mergeDeep(a,l)}s._.mergeDeep(a,r);if(!a.api){a.api=this.gridOptions.api}return a};e.prototype.createAgGridComponent=function(e,t,i,n,r,o,a){if(o===void 0){o=true}var l=e==null?this.gridOptions:e;var u=this.newAgGridComponent(l,i,n,r,o);if(!u)return null;var c=this.mergeParams(l,i,t,n,u[1]);c.agGridReact=this.context.getBean("agGridReact")?s._.cloneObject(this.context.getBean("agGridReact")):{};c.frameworkComponentWrapper=this.context.getBean("frameworkComponentWrapper")?this.context.getBean("frameworkComponentWrapper"):{};var d=this.initialiseComponent(u[0],c,a);if(d==null){return s.Promise.resolve(u[0])}else{var f=d;return f.map((function(e){return u[0]}))}};e.prototype.createInternalAgGridComponent=function(e,t,i){var n=new e;this.initialiseComponent(n,t,i);return n};e.prototype.newAgGridComponent=function(e,t,i,n,r){if(r===void 0){r=true}var o=this.getComponentToUse(e,t,i,n);if(!o||!o.component){if(r){console.error("Error creating component "+t+"=>"+n)}return null}if(o.type===d.AG_GRID){return[new o.component,o.dynamicParams]}var a=o.component;var s=this.componentMetadataProvider.retrieve(t);return[this.frameworkComponentWrapper.wrap(a,s.mandatoryMethodList,s.optionalMethodList,n),o.dynamicParams]};e.prototype.initialiseComponent=function(e,t,i){this.context.wireBean(e);if(i==null){return e.init(t)}else{return e.init(i(t,e))}};n([o.Autowired("gridOptions"),r("design:type",Object)],e.prototype,"gridOptions",void 0);n([o.Autowired("gridOptionsWrapper"),r("design:type",a.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.Autowired("context"),r("design:type",o.Context)],e.prototype,"context",void 0);n([o.Autowired("agComponentUtils"),r("design:type",u.AgComponentUtils)],e.prototype,"agComponentUtils",void 0);n([o.Autowired("componentMetadataProvider"),r("design:type",c.ComponentMetadataProvider)],e.prototype,"componentMetadataProvider",void 0);n([o.Autowired("componentProvider"),r("design:type",l.ComponentProvider)],e.prototype,"componentProvider",void 0);n([o.Optional("frameworkComponentWrapper"),r("design:type",Object)],e.prototype,"frameworkComponentWrapper",void 0);e=n([o.Bean("componentResolver")],e);return e}();t.ComponentResolver=p},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(7);var s=i(4);var l=i(6);var u=i(2);var c=i(19);var d=i(20);var f=i(49);var p=i(16);var h=i(3);var g=i(53);var m=i(22);var v=i(54);var y=i(55);var b=i(35);var _=i(56);var w=i(43);var C=i(73);var A=i(45);var E=i(29);var x=i(37);var T=i(27);var S=i(15);var D=i(24);var k=i(18);var O=i(57);var R=function(){function e(){}e.prototype.registerGridComp=function(e){this.gridPanel=e};e.prototype.postConstruct=function(){this.doingMasterDetail=this.gridOptionsWrapper.isMasterDetail()};n([o.Autowired("paginationProxy"),r("design:type",E.PaginationProxy)],e.prototype,"paginationProxy",void 0);n([o.Autowired("context"),r("design:type",o.Context)],e.prototype,"context",void 0);n([o.Autowired("columnApi"),r("design:type",a.ColumnApi)],e.prototype,"columnApi",void 0);n([o.Autowired("gridApi"),r("design:type",l.GridApi)],e.prototype,"gridApi",void 0);n([o.Autowired("gridOptionsWrapper"),r("design:type",u.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.Autowired("expressionService"),r("design:type",c.ExpressionService)],e.prototype,"expressionService",void 0);n([o.Autowired("rowRenderer"),r("design:type",d.RowRenderer)],e.prototype,"rowRenderer",void 0);n([o.Autowired("$compile"),r("design:type",Object)],e.prototype,"$compile",void 0);n([o.Autowired("templateService"),r("design:type",f.TemplateService)],e.prototype,"templateService",void 0);n([o.Autowired("valueService"),r("design:type",p.ValueService)],e.prototype,"valueService",void 0);n([o.Autowired("eventService"),r("design:type",h.EventService)],e.prototype,"eventService",void 0);n([o.Autowired("columnController"),r("design:type",s.ColumnController)],e.prototype,"columnController",void 0);n([o.Autowired("columnAnimationService"),r("design:type",g.ColumnAnimationService)],e.prototype,"columnAnimationService",void 0);n([o.Optional("rangeController"),r("design:type",Object)],e.prototype,"rangeController",void 0);n([o.Autowired("focusedCellController"),r("design:type",m.FocusedCellController)],e.prototype,"focusedCellController",void 0);n([o.Optional("contextMenuFactory"),r("design:type",Object)],e.prototype,"contextMenuFactory",void 0);n([o.Autowired("cellEditorFactory"),r("design:type",v.CellEditorFactory)],e.prototype,"cellEditorFactory",void 0);n([o.Autowired("cellRendererFactory"),r("design:type",y.CellRendererFactory)],e.prototype,"cellRendererFactory",void 0);n([o.Autowired("popupService"),r("design:type",b.PopupService)],e.prototype,"popupService",void 0);n([o.Autowired("cellRendererService"),r("design:type",_.CellRendererService)],e.prototype,"cellRendererService",void 0);n([o.Autowired("valueFormatterService"),r("design:type",w.ValueFormatterService)],e.prototype,"valueFormatterService",void 0);n([o.Autowired("stylingService"),r("design:type",C.StylingService)],e.prototype,"stylingService",void 0);n([o.Autowired("columnHoverService"),r("design:type",A.ColumnHoverService)],e.prototype,"columnHoverService",void 0);n([o.Autowired("enterprise"),r("design:type",Boolean)],e.prototype,"enterprise",void 0);n([o.Autowired("componentResolver"),r("design:type",T.ComponentResolver)],e.prototype,"componentResolver",void 0);n([o.Autowired("animationFrameService"),r("design:type",x.AnimationFrameService)],e.prototype,"taskQueue",void 0);n([o.Autowired("dragAndDropService"),r("design:type",S.DragAndDropService)],e.prototype,"dragAndDropService",void 0);n([o.Autowired("sortController"),r("design:type",D.SortController)],e.prototype,"sortController",void 0);n([o.Autowired("filterManager"),r("design:type",k.FilterManager)],e.prototype,"filterManager",void 0);n([o.Autowired("heightScaler"),r("design:type",O.HeightScaler)],e.prototype,"heightScaler",void 0);n([o.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"postConstruct",null);e=n([o.Bean("beans")],e);return e}();t.Beans=R},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(13);var s=i(3);var l=i(5);var u=i(1);var c=i(0);var d=i(2);var f=i(36);var p=i(17);var h=i(7);var g=i(6);var m=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.registerGridComp=function(e){this.gridPanel=e;this.addDestroyableEventListener(this.eventService,l.Events.EVENT_BODY_HEIGHT_CHANGED,this.onBodyHeightChanged.bind(this));this.addDestroyableEventListener(this.eventService,l.Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this));this.checkPageSize()};t.prototype.notActive=function(){return!this.gridOptionsWrapper.isPaginationAutoPageSize()};t.prototype.onScrollVisibilityChanged=function(){this.checkPageSize()};t.prototype.onBodyHeightChanged=function(){this.checkPageSize()};t.prototype.checkPageSize=function(){if(this.notActive()){return}var e=this.gridOptionsWrapper.getRowHeightAsNumber();var t=this.gridPanel.getBodyHeight();if(this.scrollVisibleService.isBodyHorizontalScrollShowing()){t=t-this.gridOptionsWrapper.getScrollbarWidth()}if(t>0){var i=Math.floor(t/e);this.gridOptionsWrapper.setProperty("paginationPageSize",i)}};r([c.Autowired("eventService"),o("design:type",s.EventService)],t.prototype,"eventService",void 0);r([c.Autowired("gridOptionsWrapper"),o("design:type",d.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([c.Autowired("scrollVisibleService"),o("design:type",f.ScrollVisibleService)],t.prototype,"scrollVisibleService",void 0);t=r([c.Bean("paginationAutoPageSizeService")],t);return t}(a.BeanStub);t.PaginationAutoPageSizeService=m;var v=function(e){n(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.currentPage=0;t.topRowIndex=0;t.bottomRowIndex=0;t.pixelOffset=0;return t}t.prototype.postConstruct=function(){this.active=this.gridOptionsWrapper.isPagination();this.addDestroyableEventListener(this.eventService,l.Events.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this));this.addDestroyableEventListener(this.gridOptionsWrapper,"paginationPageSize",this.onModelUpdated.bind(this));this.onModelUpdated()};t.prototype.isLastRowFound=function(){return this.rowModel.isLastRowFound()};t.prototype.onModelUpdated=function(e){this.setIndexesAndBounds();var t={type:l.Events.EVENT_PAGINATION_CHANGED,animate:e?e.animate:false,newData:e?e.newData:false,newPage:e?e.newPage:false,keepRenderedRows:e?e.keepRenderedRows:false,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(t)};t.prototype.goToPage=function(e){if(!this.active){return}if(this.currentPage===e){return}this.currentPage=e;var t={type:l.Events.EVENT_MODEL_UPDATED,animate:false,keepRenderedRows:false,newData:false,newPage:true,api:this.gridApi,columnApi:this.columnApi};this.onModelUpdated(t)};t.prototype.getPixelOffset=function(){return this.pixelOffset};t.prototype.getRow=function(e){return this.rowModel.getRow(e)};t.prototype.getRowNode=function(e){return this.rowModel.getRowNode(e)};t.prototype.getRowIndexAtPixel=function(e){return this.rowModel.getRowIndexAtPixel(e)};t.prototype.getCurrentPageHeight=function(){if(u._.missing(this.topRowBounds)||u._.missing(this.bottomRowBounds)){return 0}return this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop};t.prototype.isRowPresent=function(e){if(!this.rowModel.isRowPresent(e)){return false}var t=e.rowIndex>=this.topRowIndex&&e.rowIndex<=this.bottomRowIndex;return t};t.prototype.isEmpty=function(){return this.rowModel.isEmpty()};t.prototype.isRowsToRender=function(){return this.rowModel.isRowsToRender()};t.prototype.getNodesInRangeForSelection=function(e,t){return this.rowModel.getNodesInRangeForSelection(e,t)};t.prototype.forEachNode=function(e){return this.rowModel.forEachNode(e)};t.prototype.getType=function(){return this.rowModel.getType()};t.prototype.getRowBounds=function(e){return this.rowModel.getRowBounds(e)};t.prototype.getPageFirstRow=function(){return this.pageSize*this.currentPage};t.prototype.getPageLastRow=function(){var e=this.pageSize*(this.currentPage+1)-1;var t=this.rowModel.getPageLastRow();if(t>e){return e}else{return t}};t.prototype.getRowCount=function(){return this.rowModel.getRowCount()};t.prototype.goToPageWithIndex=function(e){if(!this.active){return}var t=Math.floor(e/this.pageSize);this.goToPage(t)};t.prototype.getTotalRowCount=function(){return this.rowModel.getPageLastRow()+1};t.prototype.isLastPageFound=function(){return this.rowModel.isLastRowFound()};t.prototype.getCurrentPage=function(){return this.currentPage};t.prototype.goToNextPage=function(){this.goToPage(this.currentPage+1)};t.prototype.goToPreviousPage=function(){this.goToPage(this.currentPage-1)};t.prototype.goToFirstPage=function(){this.goToPage(0)};t.prototype.goToLastPage=function(){var e=this.rowModel.getPageLastRow()+1;var t=Math.floor(e/this.pageSize);this.goToPage(t)};t.prototype.getPageSize=function(){return this.pageSize};t.prototype.getTotalPages=function(){return this.totalPages};t.prototype.setPageSize=function(){this.pageSize=this.gridOptionsWrapper.getPaginationPageSize();if(!(this.pageSize>=1)){this.pageSize=100}};t.prototype.setIndexesAndBounds=function(){if(this.active){this.setPageSize();var e=this.getTotalRowCount();this.totalPages=Math.floor((e-1)/this.pageSize)+1;if(this.currentPage>=this.totalPages){this.currentPage=this.totalPages-1}if(!u._.isNumeric(this.currentPage)||this.currentPage<0){this.currentPage=0}this.topRowIndex=this.pageSize*this.currentPage;this.bottomRowIndex=this.pageSize*(this.currentPage+1)-1;var t=this.rowModel.getPageLastRow();if(this.bottomRowIndex>t){this.bottomRowIndex=t}}else{this.pageSize=this.rowModel.getPageLastRow()+1;this.totalPages=1;this.currentPage=0;this.topRowIndex=0;this.bottomRowIndex=this.rowModel.getPageLastRow()}this.topRowBounds=this.rowModel.getRowBounds(this.topRowIndex);this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomRowIndex);this.pixelOffset=u._.exists(this.topRowBounds)?this.topRowBounds.rowTop:0};r([c.Autowired("rowModel"),o("design:type",Object)],t.prototype,"rowModel",void 0);r([c.Autowired("eventService"),o("design:type",s.EventService)],t.prototype,"eventService",void 0);r([c.Autowired("gridOptionsWrapper"),o("design:type",d.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([c.Autowired("selectionController"),o("design:type",p.SelectionController)],t.prototype,"selectionController",void 0);r([c.Autowired("columnApi"),o("design:type",h.ColumnApi)],t.prototype,"columnApi",void 0);r([c.Autowired("gridApi"),o("design:type",g.GridApi)],t.prototype,"gridApi",void 0);r([c.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"postConstruct",null);t=r([c.Bean("paginationProxy")],t);return t}(a.BeanStub);t.PaginationProxy=v},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(2);var a=i(14);var s=i(0);var l=i(3);var u=i(0);var c=i(5);var d=i(0);var f=i(9);var p=i(1);var h=i(7);var g=i(6);var m=function(){function e(){}e.prototype.init=function(){this.setPinnedTopRowData(this.gridOptionsWrapper.getPinnedTopRowData());this.setPinnedBottomRowData(this.gridOptionsWrapper.getPinnedBottomRowData())};e.prototype.isEmpty=function(e){var t=e===f.Constants.PINNED_TOP?this.pinnedTopRows:this.pinnedBottomRows;return p.Utils.missingOrEmpty(t)};e.prototype.isRowsToRender=function(e){return!this.isEmpty(e)};e.prototype.getRowAtPixel=function(e,t){var i=t===f.Constants.PINNED_TOP?this.pinnedTopRows:this.pinnedBottomRows;if(p.Utils.missingOrEmpty(i)){return 0}for(var n=0;n<i.length;n++){var r=i[n];var o=r.rowTop+r.rowHeight-1;if(o>=e){return n}}return i.length-1};e.prototype.setPinnedTopRowData=function(e){this.pinnedTopRows=this.createNodesFromData(e,true);var t={type:c.Events.EVENT_PINNED_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(t)};e.prototype.setPinnedBottomRowData=function(e){this.pinnedBottomRows=this.createNodesFromData(e,false);var t={type:c.Events.EVENT_PINNED_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(t)};e.prototype.createNodesFromData=function(e,t){var i=this;var n=[];if(e){var r=0;e.forEach((function(e,o){var s=new a.RowNode;i.context.wireBean(s);s.data=e;s.rowPinned=t?f.Constants.PINNED_TOP:f.Constants.PINNED_BOTTOM;s.setRowTop(r);s.setRowHeight(i.gridOptionsWrapper.getRowHeightForNode(s));s.setRowIndex(o);r+=s.rowHeight;n.push(s)}))}return n};e.prototype.getPinnedTopRowData=function(){return this.pinnedTopRows};e.prototype.getPinnedBottomRowData=function(){return this.pinnedBottomRows};e.prototype.getPinnedTopTotalHeight=function(){return this.getTotalHeight(this.pinnedTopRows)};e.prototype.getPinnedTopRowCount=function(){return this.pinnedTopRows?this.pinnedTopRows.length:0};e.prototype.getPinnedBottomRowCount=function(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0};e.prototype.getPinnedTopRow=function(e){return this.pinnedTopRows[e]};e.prototype.getPinnedBottomRow=function(e){return this.pinnedBottomRows[e]};e.prototype.forEachPinnedTopRow=function(e){if(p.Utils.missingOrEmpty(this.pinnedTopRows)){return}this.pinnedTopRows.forEach(e)};e.prototype.forEachPinnedBottomRow=function(e){if(p.Utils.missingOrEmpty(this.pinnedBottomRows)){return}this.pinnedBottomRows.forEach(e)};e.prototype.getPinnedBottomTotalHeight=function(){return this.getTotalHeight(this.pinnedBottomRows)};e.prototype.getTotalHeight=function(e){if(!e||e.length===0){return 0}else{var t=e[e.length-1];return t.rowTop+t.rowHeight}};n([u.Autowired("gridOptionsWrapper"),r("design:type",o.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([u.Autowired("eventService"),r("design:type",l.EventService)],e.prototype,"eventService",void 0);n([u.Autowired("context"),r("design:type",s.Context)],e.prototype,"context",void 0);n([u.Autowired("columnApi"),r("design:type",h.ColumnApi)],e.prototype,"columnApi",void 0);n([u.Autowired("gridApi"),r("design:type",g.GridApi)],e.prototype,"gridApi",void 0);n([d.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);e=n([s.Bean("pinnedRowModel")],e);return e}();t.PinnedRowModel=m},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(2);var a=i(26);var s=i(32);var l=i(0);var u=i(0);var c=function(){function e(){}e.prototype.calculateColInitialWidth=function(e){if(!e.width){return this.gridOptionsWrapper.getColWidth()}else if(e.width<this.gridOptionsWrapper.getMinColWidth()){return this.gridOptionsWrapper.getMinColWidth()}else{return e.width}};e.prototype.getOriginalPathForColumn=function(e,t){var i=[];var n=false;r(t,0);if(n){return i}else{return null}function r(t,o){for(var a=0;a<t.length;a++){if(n){return}var l=t[a];if(l instanceof s.OriginalColumnGroup){var u=l;r(u.getChildren(),o+1);i[o]=l}else{if(l===e){n=true}}}}};e.prototype.depthFirstOriginalTreeSearch=function(e,t){var i=this;if(!e){return}e.forEach((function(e){if(e instanceof s.OriginalColumnGroup){i.depthFirstOriginalTreeSearch(e.getChildren(),t)}t(e)}))};e.prototype.depthFirstAllColumnTreeSearch=function(e,t){var i=this;if(!e){return}e.forEach((function(e){if(e instanceof a.ColumnGroup){i.depthFirstAllColumnTreeSearch(e.getChildren(),t)}t(e)}))};e.prototype.depthFirstDisplayedColumnTreeSearch=function(e,t){var i=this;if(!e){return}e.forEach((function(e){if(e instanceof a.ColumnGroup){i.depthFirstDisplayedColumnTreeSearch(e.getDisplayedChildren(),t)}t(e)}))};n([u.Autowired("gridOptionsWrapper"),r("design:type",o.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);e=n([l.Bean("columnUtils")],e);return e}();t.ColumnUtils=c},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(26);var a=i(10);var s=i(3);var l=i(0);var u=i(7);var c=i(6);var d=function(){function e(e,t,i,n){this.localEventService=new s.EventService;this.expandable=false;this.colGroupDef=e;this.groupId=t;this.expanded=e&&!!e.openByDefault;this.padding=i;this.level=n}e.prototype.getLevel=function(){return this.level};e.prototype.isVisible=function(){if(this.children){return this.children.some((function(e){return e.isVisible()}))}else{return false}};e.prototype.isPadding=function(){return this.padding};e.prototype.setExpanded=function(t){this.expanded=t;var i={type:e.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(i)};e.prototype.isExpandable=function(){return this.expandable};e.prototype.isExpanded=function(){return this.expanded};e.prototype.getGroupId=function(){return this.groupId};e.prototype.getId=function(){return this.getGroupId()};e.prototype.setChildren=function(e){this.children=e};e.prototype.getChildren=function(){return this.children};e.prototype.getColGroupDef=function(){return this.colGroupDef};e.prototype.getLeafColumns=function(){var e=[];this.addLeafColumns(e);return e};e.prototype.addLeafColumns=function(t){if(!this.children){return}this.children.forEach((function(i){if(i instanceof a.Column){t.push(i)}else if(i instanceof e){i.addLeafColumns(t)}}))};e.prototype.getColumnGroupShow=function(){if(!this.padding){return this.colGroupDef.columnGroupShow}else{return this.children[0].getColumnGroupShow()}};e.prototype.setupExpandable=function(){var e=this;this.setExpandable();this.getLeafColumns().forEach((function(t){return t.addEventListener(a.Column.EVENT_VISIBLE_CHANGED,e.onColumnVisibilityChanged.bind(e))}))};e.prototype.setExpandable=function(){var t=false;var i=false;var n=false;for(var r=0,a=this.children.length;r<a;r++){var s=this.children[r];if(!s.isVisible()){continue}var l=s.getColumnGroupShow();if(l===o.ColumnGroup.HEADER_GROUP_SHOW_OPEN){t=true;n=true}else if(l===o.ColumnGroup.HEADER_GROUP_SHOW_CLOSED){i=true;n=true}else{t=true;i=true}}var u=t&&i&&n;if(this.expandable!==u){this.expandable=u;var c={type:e.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(c)}};e.prototype.onColumnVisibilityChanged=function(){this.setExpandable()};e.prototype.addEventListener=function(e,t){this.localEventService.addEventListener(e,t)};e.prototype.removeEventListener=function(e,t){this.localEventService.removeEventListener(e,t)};e.EVENT_EXPANDED_CHANGED="expandedChanged";e.EVENT_EXPANDABLE_CHANGED="expandableChanged";n([l.Autowired("columnApi"),r("design:type",u.ColumnApi)],e.prototype,"columnApi",void 0);n([l.Autowired("gridApi"),r("design:type",c.GridApi)],e.prototype,"gridApi",void 0);return e}();t.OriginalColumnGroup=d},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(2);var s=function(){function e(){this.cacheVersion=0}e.prototype.init=function(){this.active=this.gridOptionsWrapper.isValueCache();this.neverExpires=this.gridOptionsWrapper.isValueCacheNeverExpires()};e.prototype.onDataChanged=function(){if(this.neverExpires){return}this.expire()};e.prototype.expire=function(){this.cacheVersion++};e.prototype.setValue=function(e,t,i){if(this.active){if(e.__cacheVersion!==this.cacheVersion){e.__cacheVersion=this.cacheVersion;e.__cacheData={}}e.__cacheData[t]=i}};e.prototype.getValue=function(e,t){var i=this.active&&e.__cacheVersion===this.cacheVersion&&e.__cacheData[t]!==undefined;if(i){return e.__cacheData[t]}else{return undefined}};n([o.Autowired("gridOptionsWrapper"),r("design:type",a.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);e=n([o.Bean("valueCache")],e);return e}();t.ValueCache=s},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:true});var r=i(1);var o=i(10);var a=i(14);var s=i(9);var l=i(5);var u=i(23);var c=i(8);var d=i(65);var f=i(121);var p=function(e){n(t,e);function t(t,i,n,r,o,a){var s=e.call(this)||this;s.editingCell=false;s.cellEditorVersion=0;s.cellRendererVersion=0;s.scope=t;s.beans=i;s.column=n;s.rowNode=r;s.rowComp=o;s.autoHeightCell=a;s.createGridCellVo();s.rangeSelectionEnabled=i.enterprise&&i.gridOptionsWrapper.isEnableRangeSelection();s.cellFocused=s.beans.focusedCellController.isCellFocused(s.gridCell);s.firstRightPinned=s.column.isFirstRightPinned();s.lastLeftPinned=s.column.isLastLeftPinned();if(s.rangeSelectionEnabled){s.rangeCount=s.beans.rangeController.getCellRangeCount(s.gridCell)}s.getValueAndFormat();s.setUsingWrapper();s.chooseCellRenderer();s.setupColSpan();s.rowSpan=s.column.getRowSpan(s.rowNode);return s}t.prototype.getCreateTemplate=function(){var e=[];var t=this.column;var i=this.getCellWidth();var n=t.getLeft();var o=this.getInitialValueToRender();var a=r._.get(this.column,"colDef.template",null)?o:r._.escape(o);this.tooltip=this.getToolTip();var s=r._.escape(this.tooltip);var l=r._.escape(t.getId());var u;var c;var d=this.preProcessStylesFromColDef();var f=this.getInitialCssClasses();var p=this.getStylesForRowSpanning();if(this.usingWrapper){u='<span ref="eCellWrapper" class="ag-cell-wrapper"><span ref="eCellValue" class="ag-cell-value">';c="</span></span>"}e.push("<div");e.push(' tabindex="-1"');e.push(' role="gridcell"');e.push(' comp-id="'+this.getCompId()+'" ');e.push(' col-id="'+l+'"');e.push(' class="'+f.join(" ")+'"');e.push(s?' title="'+s+'"':"");e.push(' style="width: '+i+"px; left: "+n+"px; "+d+" "+p+'" >');e.push(u);e.push(a);e.push(c);e.push("</div>");return e.join("")};t.prototype.getStylesForRowSpanning=function(){if(this.rowSpan===1){return""}var e=this.beans.gridOptionsWrapper.getRowHeightAsNumber();var t=e*this.rowSpan;return"height: "+t+"px; z-index: 1;"};t.prototype.afterAttached=function(){var e='[comp-id="'+this.getCompId()+'"]';var t=this.eParentRow.querySelector(e);this.setGui(t);this.addDomData();this.populateTemplate();this.attachCellRenderer();this.angular1Compile();this.addDestroyableEventListener(this.beans.eventService,l.Events.EVENT_CELL_FOCUSED,this.onCellFocused.bind(this));this.addDestroyableEventListener(this.beans.eventService,l.Events.EVENT_FLASH_CELLS,this.onFlashCells.bind(this));this.addDestroyableEventListener(this.beans.eventService,l.Events.EVENT_COLUMN_HOVER_CHANGED,this.onColumnHover.bind(this));this.addDestroyableEventListener(this.rowNode,a.RowNode.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this));this.addDestroyableEventListener(this.rowNode,a.RowNode.EVENT_CELL_CHANGED,this.onCellChanged.bind(this));this.addDestroyableEventListener(this.column,o.Column.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this));this.addDestroyableEventListener(this.column,o.Column.EVENT_WIDTH_CHANGED,this.onWidthChanged.bind(this));this.addDestroyableEventListener(this.column,o.Column.EVENT_FIRST_RIGHT_PINNED_CHANGED,this.onFirstRightPinnedChanged.bind(this));this.addDestroyableEventListener(this.column,o.Column.EVENT_LAST_LEFT_PINNED_CHANGED,this.onLastLeftPinnedChanged.bind(this));if(this.rangeSelectionEnabled){this.addDestroyableEventListener(this.beans.eventService,l.Events.EVENT_RANGE_SELECTION_CHANGED,this.onRangeSelectionChanged.bind(this))}};t.prototype.onColumnHover=function(){var e=this.beans.columnHoverService.isHovered(this.column);r._.addOrRemoveCssClass(this.getGui(),"ag-column-hover",e)};t.prototype.onCellChanged=function(e){var t=e.column===this.column;if(t){this.refreshCell({})}};t.prototype.getCellLeft=function(){var e;if(this.beans.gridOptionsWrapper.isEnableRtl()&&this.colsSpanning){e=this.colsSpanning[this.colsSpanning.length-1]}else{e=this.column}return e.getLeft()};t.prototype.getCellWidth=function(){if(this.colsSpanning){var e=0;this.colsSpanning.forEach((function(t){return e+=t.getActualWidth()}));return e}else{return this.column.getActualWidth()}};t.prototype.onFlashCells=function(e){var t=this.gridCell.createId();var i=e.cells[t];if(i){this.animateCell("highlight")}};t.prototype.setupColSpan=function(){if(r._.missing(this.column.getColDef().colSpan)){return}this.addDestroyableEventListener(this.beans.eventService,l.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this));this.addDestroyableEventListener(this.beans.eventService,l.Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this));this.colsSpanning=this.getColSpanningList()};t.prototype.getColSpanningList=function(){var e=this.column.getColSpan(this.rowNode);var t=[];if(e===1){t.push(this.column)}else{var i=this.column;var n=this.column.getPinned();for(var o=0;o<e;o++){t.push(i);i=this.beans.columnController.getDisplayedColAfter(i);if(r._.missing(i)){break}if(n!==i.getPinned()){break}}}return t};t.prototype.onDisplayColumnsChanged=function(){var e=this.getColSpanningList();if(!r._.compareArrays(this.colsSpanning,e)){this.colsSpanning=e;this.onWidthChanged();this.onLeftChanged()}};t.prototype.getInitialCssClasses=function(){var e=["ag-cell","ag-cell-not-inline-editing"];if(!this.autoHeightCell){e.push("ag-cell-with-height")}var t=!this.beans.gridOptionsWrapper.isSuppressCellSelection();if(t){e.push(this.cellFocused?"ag-cell-focus":"ag-cell-no-focus")}else{e.push("ag-cell-no-focus")}if(this.firstRightPinned){e.push("ag-cell-first-right-pinned")}if(this.lastLeftPinned){e.push("ag-cell-last-left-pinned")}if(this.beans.columnHoverService.isHovered(this.column)){e.push("ag-column-hover")}r._.pushAll(e,this.preProcessClassesFromColDef());r._.pushAll(e,this.preProcessCellClassRules());r._.pushAll(e,this.getRangeClasses());if(!this.usingWrapper){e.push("ag-cell-value")}return e};t.prototype.getInitialValueToRender=function(){if(this.usingCellRenderer){if(typeof this.cellRendererGui==="string"){return this.cellRendererGui}else{return""}}var e=this.column.getColDef();if(e.template){return e.template}else if(e.templateUrl){var t=this.beans.templateService.getTemplate(e.templateUrl,this.refreshCell.bind(this,true));if(t){return t}else{return""}}else{return this.getValueToUse()}};t.prototype.getRenderedRow=function(){return this.rowComp};t.prototype.isSuppressNavigable=function(){return this.column.isSuppressNavigable(this.rowNode)};t.prototype.getCellRenderer=function(){return this.cellRenderer};t.prototype.getCellEditor=function(){return this.cellEditor};t.prototype.refreshCell=function(e){if(this.editingCell){return}var t=e&&e.newData;var i=e&&e.suppressFlash||this.column.getColDef().suppressCellFlash;var n=e&&e.forceRefresh;var r=this.value;this.getValueAndFormat();var o=!this.valuesAreEqual(r,this.value);var a=n||o;if(a){var s=void 0;if(t||i){s=false}else{s=this.attemptCellRendererRefresh()}if(!s){this.replaceContentsAfterRefresh()}if(!i){var l=this.beans.gridOptionsWrapper.isEnableCellChangeFlash()||this.column.getColDef().enableCellChangeFlash;if(l){this.flashCell()}}this.postProcessStylesFromColDef();this.postProcessClassesFromColDef()}this.refreshToolTip();this.postProcessCellClassRules()};t.prototype.flashCell=function(){this.animateCell("data-changed")};t.prototype.animateCell=function(e){var t="ag-cell-"+e;var i="ag-cell-"+e+"-animation";var n=this.getGui();r._.addCssClass(n,t);r._.removeCssClass(n,i);setTimeout((function(){r._.removeCssClass(n,t);r._.addCssClass(n,i);setTimeout((function(){r._.removeCssClass(n,i)}),1e3)}),500)};t.prototype.replaceContentsAfterRefresh=function(){r._.removeAllChildren(this.eParentOfValue);if(this.cellRenderer&&this.cellRenderer.destroy){this.cellRenderer.destroy()}this.cellRenderer=null;this.cellRendererGui=null;this.putDataIntoCellAfterRefresh();this.angular1Compile()};t.prototype.angular1Compile=function(){if(this.beans.gridOptionsWrapper.isAngularCompileRows()){var e=this.getGui();var t=this.beans.$compile(e)(this.scope);this.addDestroyFunc((function(){t.remove()}))}};t.prototype.postProcessStylesFromColDef=function(){var e=this.processStylesFromColDef();if(e){r._.addStylesToElement(this.getGui(),e)}};t.prototype.preProcessStylesFromColDef=function(){var e=this.processStylesFromColDef();return r._.cssStyleObjectToMarkup(e)};t.prototype.processStylesFromColDef=function(){var e=this.column.getColDef();if(e.cellStyle){var t=void 0;if(typeof e.cellStyle==="function"){var i={value:this.value,data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,$scope:this.scope,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi()};var n=e.cellStyle;t=n(i)}else{t=e.cellStyle}return t}};t.prototype.postProcessClassesFromColDef=function(){var e=this;this.processClassesFromColDef((function(t){return r._.addCssClass(e.getGui(),t)}))};t.prototype.preProcessClassesFromColDef=function(){var e=[];this.processClassesFromColDef((function(t){return e.push(t)}));return e};t.prototype.processClassesFromColDef=function(e){this.beans.stylingService.processStaticCellClasses(this.column.getColDef(),{value:this.value,data:this.rowNode.data,node:this.rowNode,colDef:this.column.getColDef(),rowIndex:this.rowNode.rowIndex,$scope:this.scope,api:this.beans.gridOptionsWrapper.getApi(),context:this.beans.gridOptionsWrapper.getContext()},e)};t.prototype.putDataIntoCellAfterRefresh=function(){var e=this.column.getColDef();if(e.template){this.eParentOfValue.innerHTML=e.template}else if(e.templateUrl){var t=this.beans.templateService.getTemplate(e.templateUrl,this.refreshCell.bind(this,true));if(t){this.eParentOfValue.innerHTML=t}}else if(this.usingCellRenderer){this.attachCellRenderer()}else{var i=this.getValueToUse();if(i!==null&&i!==undefined){this.eParentOfValue.innerText=i}}};t.prototype.attemptCellRendererRefresh=function(){if(r._.missing(this.cellRenderer)||r._.missing(this.cellRenderer.refresh)){return false}var e=this.createCellRendererParams();var t=this.cellRenderer.refresh(e);return t===true||t===undefined};t.prototype.refreshToolTip=function(){var e=this.getToolTip();if(this.tooltip!==e){this.tooltip=e;if(r._.exists(e)){var t=r._.escape(this.tooltip);this.eParentOfValue.setAttribute("title",t)}else{this.eParentOfValue.removeAttribute("title")}}};t.prototype.valuesAreEqual=function(e,t){var i=this.column.getColDef();var n=i?i.equals:null;if(n){return n(e,t)}else{return e===t}};t.prototype.getToolTip=function(){var e=this.column.getColDef();var t=this.rowNode.data;if(e.tooltipField&&r._.exists(t)){return r._.getValueUsingField(t,e.tooltipField,this.column.isTooltipFieldContainsDots())}else if(e.tooltip){return e.tooltip({value:this.value,valueFormatted:this.valueFormatted,data:this.rowNode.data,node:this.rowNode,colDef:this.column.getColDef(),api:this.beans.gridOptionsWrapper.getApi(),$scope:this.scope,context:this.beans.gridOptionsWrapper.getContext(),rowIndex:this.gridCell.rowIndex})}else{return null}};t.prototype.processCellClassRules=function(e,t){this.beans.stylingService.processClassRules(this.column.getColDef().cellClassRules,{value:this.value,data:this.rowNode.data,node:this.rowNode,colDef:this.column.getColDef(),rowIndex:this.gridCell.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),$scope:this.scope,context:this.beans.gridOptionsWrapper.getContext()},e,t)};t.prototype.postProcessCellClassRules=function(){var e=this;this.processCellClassRules((function(t){r._.addCssClass(e.getGui(),t)}),(function(t){r._.removeCssClass(e.getGui(),t)}))};t.prototype.preProcessCellClassRules=function(){var e=[];this.processCellClassRules((function(t){e.push(t)}),(function(e){}));return e};t.prototype.setUsingWrapper=function(){var e=this.column.getColDef();if(this.rowNode.rowPinned){this.usingWrapper=false;this.includeSelectionComponent=false;this.includeRowDraggingComponent=false;return}var t=typeof e.checkboxSelection==="function";var i=typeof e.rowDrag==="function";this.includeSelectionComponent=t||e.checkboxSelection===true;this.includeRowDraggingComponent=i||e.rowDrag===true;this.usingWrapper=this.includeRowDraggingComponent||this.includeSelectionComponent};t.prototype.chooseCellRenderer=function(){var e=this.column.getColDef();if(e.template||e.templateUrl){this.usingCellRenderer=false;return}var t=this.createCellRendererParams();var i=this.beans.componentResolver.getComponentToUse(e,"cellRenderer",t,null);var n=this.beans.componentResolver.getComponentToUse(e,"pinnedRowCellRenderer",t,null);if(n&&this.rowNode.rowPinned){this.cellRendererType="pinnedRowCellRenderer";this.usingCellRenderer=true}else if(i){this.cellRendererType="cellRenderer";this.usingCellRenderer=true}else{this.usingCellRenderer=false}};t.prototype.createCellRendererInstance=function(){var e=this.createCellRendererParams();this.cellRendererVersion++;var t=this.afterCellRendererCreated.bind(this,this.cellRendererVersion);this.beans.componentResolver.createAgGridComponent(this.column.getColDef(),e,this.cellRendererType,e,null).then(t)};t.prototype.afterCellRendererCreated=function(e,t){if(e!==this.cellRendererVersion){if(t.destroy){t.destroy()}return}this.cellRenderer=t;this.cellRendererGui=this.cellRenderer.getGui();if(r._.missing(this.cellRendererGui)){return}if(!this.editingCell){this.eParentOfValue.appendChild(this.cellRendererGui)}};t.prototype.attachCellRenderer=function(){if(!this.usingCellRenderer){return}this.createCellRendererInstance()};t.prototype.createCellRendererParams=function(){var e=this;var t={value:this.value,valueFormatted:this.valueFormatted,getValue:this.getValue.bind(this),setValue:function(t){e.beans.valueService.setValue(e.rowNode,e.column,t)},formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,colDef:this.column.getColDef(),column:this.column,$scope:this.scope,rowIndex:this.gridCell.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.eParentOfValue,addRowCompListener:this.rowComp?this.rowComp.addEventListener.bind(this.rowComp):null,addRenderedRowListener:function(t,i){console.warn("ag-Grid: since ag-Grid .v11, params.addRenderedRowListener() is now params.addRowCompListener()");if(e.rowComp){e.rowComp.addEventListener(t,i)}}};return t};t.prototype.formatValue=function(e){var t=this.beans.valueFormatterService.formatValue(this.column,this.rowNode,this.scope,e);var i=t!==null&&t!==undefined;return i?t:e};t.prototype.getValueToUse=function(){var e=this.valueFormatted!==null&&this.valueFormatted!==undefined;return e?this.valueFormatted:this.value};t.prototype.getValueAndFormat=function(){this.value=this.getValue();this.valueFormatted=this.beans.valueFormatterService.formatValue(this.column,this.rowNode,this.scope,this.value)};t.prototype.getValue=function(){var e=this.rowNode.leafGroup&&this.beans.columnController.isPivotMode();var t=this.rowNode.group&&this.rowNode.expanded&&!this.rowNode.footer&&!e;if(t&&this.beans.gridOptionsWrapper.isGroupIncludeFooter()){return this.beans.valueService.getValue(this.column,this.rowNode,false,true)}else{return this.beans.valueService.getValue(this.column,this.rowNode)}};t.prototype.onMouseEvent=function(e,t){if(r._.isStopPropagationForAgGrid(t)){return}switch(e){case"click":this.onCellClicked(t);break;case"mousedown":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}};t.prototype.dispatchCellContextMenuEvent=function(e){var t=this.column.getColDef();var i=this.createEvent(e,l.Events.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(i);if(t.onCellContextMenu){setTimeout((function(){return t.onCellContextMenu(i)}),0)}};t.prototype.createEvent=function(e,t){var i={node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridApi,columnApi:this.beans.columnApi,rowPinned:this.rowNode.rowPinned,event:e,type:t,rowIndex:this.rowNode.rowIndex};if(this.scope){i.$scope=this.scope}return i};t.prototype.onMouseOut=function(e){var t=this.createEvent(e,l.Events.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(t);this.beans.columnHoverService.clearMouseOver()};t.prototype.onMouseOver=function(e){var t=this.createEvent(e,l.Events.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(t);this.beans.columnHoverService.setMouseOver([this.column])};t.prototype.onCellDoubleClicked=function(e){var t=this.column.getColDef();var i=this.createEvent(e,l.Events.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(i);if(typeof t.onCellDoubleClicked==="function"){setTimeout((function(){return t.onCellDoubleClicked(i)}),0)}var n=!this.beans.gridOptionsWrapper.isSingleClickEdit()&&!this.beans.gridOptionsWrapper.isSuppressClickEdit();if(n){this.startRowOrCellEdit()}};t.prototype.startRowOrCellEdit=function(e,t){if(this.beans.gridOptionsWrapper.isFullRowEdit()){this.rowComp.startRowEditing(e,t,this)}else{this.startEditingIfEnabled(e,t,true)}};t.prototype.isCellEditable=function(){return this.column.isCellEditable(this.rowNode)};t.prototype.startEditingIfEnabled=function(e,t,i){if(e===void 0){e=null}if(t===void 0){t=null}if(i===void 0){i=false}if(!this.isCellEditable()){return}if(this.editingCell){return}this.editingCell=true;this.cellEditorVersion++;var n=this.afterCellEditorCreated.bind(this,this.cellEditorVersion);var o=this.createCellEditorParams(e,t,i);this.beans.cellEditorFactory.createCellEditor(this.column.getColDef(),o).then(n);var a=r._.missing(this.cellEditor);if(a&&i){this.focusCell(true)}};t.prototype.afterCellEditorCreated=function(e,t){var i=e!==this.cellEditorVersion;if(i||!this.editingCell){if(t.destroy){t.destroy()}return}if(t.isCancelBeforeStart&&t.isCancelBeforeStart()){if(t.destroy){t.destroy()}this.editingCell=false;return}if(!t.getGui){console.warn("ag-Grid: cellEditor for column "+this.column.getId()+" is missing getGui() method");if(t.render){console.warn("ag-Grid: we found 'render' on the component, are you trying to set a React renderer but added it as colDef.cellEditor instead of colDef.cellEditorFmk?")}if(t.destroy){t.destroy()}this.editingCell=false;return}this.cellEditor=t;this.cellEditorInPopup=t.isPopup&&t.isPopup();this.setInlineEditingClass();if(this.cellEditorInPopup){this.addPopupCellEditor()}else{this.addInCellEditor()}if(t.afterGuiAttached){t.afterGuiAttached()}var n=this.createEvent(null,l.Events.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(n)};t.prototype.addInCellEditor=function(){r._.removeAllChildren(this.getGui());this.getGui().appendChild(this.cellEditor.getGui());this.angular1Compile()};t.prototype.addPopupCellEditor=function(){var e=this;var t=this.cellEditor.getGui();this.hideEditorPopup=this.beans.popupService.addAsModalPopup(t,true,(function(){e.onPopupEditorClosed()}));this.beans.popupService.positionPopupOverComponent({column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),ePopup:t,keepWithinBounds:true});this.angular1Compile()};t.prototype.onPopupEditorClosed=function(){if(this.editingCell){this.stopRowOrCellEdit();if(this.beans.focusedCellController.isCellFocused(this.gridCell)){this.focusCell(true)}}};t.prototype.setInlineEditingClass=function(){var e=this.editingCell&&!this.cellEditorInPopup;var t=this.editingCell&&this.cellEditorInPopup;r._.addOrRemoveCssClass(this.getGui(),"ag-cell-inline-editing",e);r._.addOrRemoveCssClass(this.getGui(),"ag-cell-not-inline-editing",!e);r._.addOrRemoveCssClass(this.getGui(),"ag-cell-popup-editing",t);r._.addOrRemoveCssClass(this.getGui().parentNode,"ag-row-inline-editing",e);r._.addOrRemoveCssClass(this.getGui().parentNode,"ag-row-not-inline-editing",!e)};t.prototype.createCellEditorParams=function(e,t,i){var n={value:this.getValue(),keyPress:e,charPress:t,column:this.column,rowIndex:this.gridCell.rowIndex,node:this.rowNode,api:this.beans.gridOptionsWrapper.getApi(),cellStartedEdit:i,columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),$scope:this.scope,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)};return n};t.prototype.stopEditingAndFocus=function(e){if(e===void 0){e=false}this.stopRowOrCellEdit();this.focusCell(true);if(!e){this.navigateAfterEdit()}};t.prototype.parseValue=function(e){var t={node:this.rowNode,data:this.rowNode.data,oldValue:this.value,newValue:e,colDef:this.column.getColDef(),column:this.column,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()};var i=this.column.getColDef().valueParser;return r._.exists(i)?this.beans.expressionService.evaluate(i,t):e};t.prototype.focusCell=function(e){if(e===void 0){e=false}this.beans.focusedCellController.setFocusedCell(this.gridCell.rowIndex,this.column,this.rowNode.rowPinned,e)};t.prototype.setFocusInOnEditor=function(){if(this.editingCell){if(this.cellEditor&&this.cellEditor.focusIn){this.cellEditor.focusIn()}else{this.focusCell(true)}}};t.prototype.isEditing=function(){return this.editingCell};t.prototype.onKeyDown=function(e){var t=e.which||e.keyCode;if(this.doesUserWantToCancelKeyboardEvent(e)){return}switch(t){case s.Constants.KEY_ENTER:this.onEnterKeyDown();break;case s.Constants.KEY_F2:this.onF2KeyDown();break;case s.Constants.KEY_ESCAPE:this.onEscapeKeyDown();break;case s.Constants.KEY_TAB:this.onTabKeyDown(e);break;case s.Constants.KEY_BACKSPACE:case s.Constants.KEY_DELETE:this.onBackspaceOrDeleteKeyPressed(t);break;case s.Constants.KEY_DOWN:case s.Constants.KEY_UP:case s.Constants.KEY_RIGHT:case s.Constants.KEY_LEFT:this.onNavigationKeyPressed(e,t);break}};t.prototype.doesUserWantToCancelKeyboardEvent=function(e){var t=this.column.getColDef().suppressKeyboardEvent;if(r._.missing(t)){return false}else{var i={event:e,editing:this.editingCell,column:this.column,api:this.beans.gridOptionsWrapper.getApi(),node:this.rowNode,data:this.rowNode.data,colDef:this.column.getColDef(),context:this.beans.gridOptionsWrapper.getContext(),columnApi:this.beans.gridOptionsWrapper.getColumnApi()};return t(i)}};t.prototype.setFocusOutOnEditor=function(){if(this.editingCell&&this.cellEditor&&this.cellEditor.focusOut){this.cellEditor.focusOut()}};t.prototype.onNavigationKeyPressed=function(e,t){if(this.editingCell){this.stopRowOrCellEdit()}if(e.shiftKey&&this.rangeSelectionEnabled){this.onShiftRangeSelect(t)}else{this.beans.rowRenderer.navigateToNextCell(e,t,this.gridCell,true)}e.preventDefault()};t.prototype.onShiftRangeSelect=function(e){var t=this.beans.rangeController.extendRangeInDirection(this.gridCell,e);if(!t){return}var i=this.beans.rangeController.getCellRanges();if(r._.missing(i)||i.length!==1){return}var n=i[0].end;this.beans.rowRenderer.ensureCellVisible(n)};t.prototype.onTabKeyDown=function(e){if(this.beans.gridOptionsWrapper.isSuppressTabbing()){return}this.beans.rowRenderer.onTabKeyDown(this,e)};t.prototype.onBackspaceOrDeleteKeyPressed=function(e){if(!this.editingCell){this.startRowOrCellEdit(e)}};t.prototype.onEnterKeyDown=function(){if(this.editingCell||this.rowComp.isEditing()){this.stopEditingAndFocus()}else{if(this.beans.gridOptionsWrapper.isEnterMovesDown()){this.beans.rowRenderer.navigateToNextCell(null,s.Constants.KEY_DOWN,this.gridCell,false)}else{this.startRowOrCellEdit(s.Constants.KEY_ENTER)}}};t.prototype.navigateAfterEdit=function(){var e=this.beans.gridOptionsWrapper.isFullRowEdit();if(e){return}var t=this.beans.gridOptionsWrapper.isEnterMovesDownAfterEdit();if(t){this.beans.rowRenderer.navigateToNextCell(null,s.Constants.KEY_DOWN,this.gridCell,false)}};t.prototype.onF2KeyDown=function(){if(!this.editingCell){this.startRowOrCellEdit(s.Constants.KEY_F2)}};t.prototype.onEscapeKeyDown=function(){if(this.editingCell){this.stopRowOrCellEdit(true);this.focusCell(true)}};t.prototype.onKeyPress=function(e){var t=r._.getTarget(e);var i=t!==this.getGui();if(i){return}if(!this.editingCell){var n=String.fromCharCode(e.charCode);if(n===" "){this.onSpaceKeyPressed(e)}else{if(r._.isEventFromPrintableCharacter(e)){this.startRowOrCellEdit(null,n);e.preventDefault()}}}};t.prototype.onSpaceKeyPressed=function(e){if(!this.editingCell&&this.beans.gridOptionsWrapper.isRowSelection()){var t=this.rowNode.isSelected();this.rowNode.setSelected(!t)}e.preventDefault()};t.prototype.onMouseDown=function(e){this.focusCell(false);if(this.beans.rangeController){var t=this.gridCell;if(e.shiftKey){this.beans.rangeController.extendRangeToCell(t)}else{var i=this.beans.rangeController.isCellInAnyRange(t);if(!i){var n=e.ctrlKey||e.metaKey;this.beans.rangeController.setRangeToCell(t,n)}}}var r=this.createEvent(e,l.Events.EVENT_CELL_MOUSE_DOWN);this.beans.eventService.dispatchEvent(r)};t.prototype.isDoubleClickOnIPad=function(){if(!r._.isUserAgentIPad()){return false}var e=(new Date).getTime();var t=e-this.lastIPadMouseClickEvent<200;this.lastIPadMouseClickEvent=e;return t};t.prototype.onCellClicked=function(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e);e.preventDefault();return}var t=this.createEvent(e,l.Events.EVENT_CELL_CLICKED);this.beans.eventService.dispatchEvent(t);var i=this.column.getColDef();if(i.onCellClicked){setTimeout((function(){return i.onCellClicked(t)}),0)}var n=this.beans.gridOptionsWrapper.isSingleClickEdit()&&!this.beans.gridOptionsWrapper.isSuppressClickEdit();if(n){this.startRowOrCellEdit()}this.doIeFocusHack()};t.prototype.doIeFocusHack=function(){if(r._.isBrowserIE()||r._.isBrowserEdge()){if(r._.missing(document.activeElement)||document.activeElement===document.body){this.getGui().focus()}}};t.prototype.createGridCellVo=function(){var e={rowIndex:this.rowNode.rowIndex,floating:this.rowNode.rowPinned,column:this.column};this.gridCell=new u.GridCell(e)};t.prototype.getGridCell=function(){return this.gridCell};t.prototype.getParentRow=function(){return this.eParentRow};t.prototype.setParentRow=function(e){this.eParentRow=e};t.prototype.getColumn=function(){return this.column};t.prototype.detach=function(){this.eParentRow.removeChild(this.getGui())};t.prototype.destroy=function(){e.prototype.destroy.call(this);if(this.cellEditor&&this.cellEditor.destroy){this.cellEditor.destroy();this.cellEditor=null}if(this.cellRenderer&&this.cellRenderer.destroy){this.cellRenderer.destroy();this.cellRenderer=null}};t.prototype.onLeftChanged=function(){var e=this.getCellLeft();this.getGui().style.left=e+"px"};t.prototype.onWidthChanged=function(){var e=this.getCellWidth();this.getGui().style.width=e+"px"};t.prototype.getRangeClasses=function(){var e=[];if(!this.rangeSelectionEnabled){return e}if(this.rangeCount!==0){e.push("ag-cell-range-selected")}if(this.rangeCount===1){e.push("ag-cell-range-selected-1")}if(this.rangeCount===2){e.push("ag-cell-range-selected-2")}if(this.rangeCount===3){e.push("ag-cell-range-selected-3")}if(this.rangeCount>=4){e.push("ag-cell-range-selected-4")}return e};t.prototype.onRowIndexChanged=function(){this.createGridCellVo();this.onCellFocused();this.onRangeSelectionChanged()};t.prototype.onRangeSelectionChanged=function(){if(!this.beans.enterprise){return}var e=this.beans.rangeController.getCellRangeCount(this.gridCell);var t=this.getGui();if(this.rangeCount!==e){r._.addOrRemoveCssClass(t,"ag-cell-range-selected",e!==0);r._.addOrRemoveCssClass(t,"ag-cell-range-selected-1",e===1);r._.addOrRemoveCssClass(t,"ag-cell-range-selected-2",e===2);r._.addOrRemoveCssClass(t,"ag-cell-range-selected-3",e===3);r._.addOrRemoveCssClass(t,"ag-cell-range-selected-4",e>=4);this.rangeCount=e}};t.prototype.onFirstRightPinnedChanged=function(){var e=this.column.isFirstRightPinned();if(this.firstRightPinned!==e){this.firstRightPinned=e;r._.addOrRemoveCssClass(this.getGui(),"ag-cell-first-right-pinned",e)}};t.prototype.onLastLeftPinnedChanged=function(){var e=this.column.isLastLeftPinned();if(this.lastLeftPinned!==e){this.lastLeftPinned=e;r._.addOrRemoveCssClass(this.getGui(),"ag-cell-last-left-pinned",e)}};t.prototype.populateTemplate=function(){if(this.usingWrapper){this.eParentOfValue=this.getRefElement("eCellValue");this.eCellWrapper=this.getRefElement("eCellWrapper");if(this.includeRowDraggingComponent){this.addRowDragging()}if(this.includeSelectionComponent){this.addSelectionCheckbox()}}else{this.eParentOfValue=this.getGui()}};t.prototype.addRowDragging=function(){if(!this.beans.gridOptionsWrapper.isRowModelDefault()){r._.doOnce((function(){return console.warn("ag-Grid: row dragging is only allowed in the In Memory Row Model")}),"CellComp.addRowDragging");return}if(this.beans.gridOptionsWrapper.isPagination()){r._.doOnce((function(){return console.warn("ag-Grid: row dragging is not possible when doing pagination")}),"CellComp.addRowDragging");return}var e=new f.RowDragComp(this.rowNode,this.column,this.getValueToUse(),this.beans);this.addFeature(this.beans.context,e);this.eCellWrapper.insertBefore(e.getGui(),this.eParentOfValue)};t.prototype.addSelectionCheckbox=function(){var e=new d.CheckboxSelectionComponent;this.beans.context.wireBean(e);var t=this.column.getColDef().checkboxSelection;t=typeof t==="function"?t:null;e.init({rowNode:this.rowNode,column:this.column,visibleFunc:t});this.addDestroyFunc((function(){return e.destroy()}));this.eCellWrapper.insertBefore(e.getGui(),this.eParentOfValue)};t.prototype.addDomData=function(){var e=this;var i=this.getGui();this.beans.gridOptionsWrapper.setDomData(i,t.DOM_DATA_KEY_CELL_COMP,this);this.addDestroyFunc((function(){return e.beans.gridOptionsWrapper.setDomData(i,t.DOM_DATA_KEY_CELL_COMP,null)}))};t.prototype.onCellFocused=function(e){var t=this.beans.focusedCellController.isCellFocused(this.gridCell);if(t!==this.cellFocused){var i=!this.beans.gridOptionsWrapper.isSuppressCellSelection();if(i){r._.addOrRemoveCssClass(this.getGui(),"ag-cell-focus",t);r._.addOrRemoveCssClass(this.getGui(),"ag-cell-no-focus",!t)}this.cellFocused=t}if(t&&e&&e.forceBrowserFocus){this.getGui().focus()}var n=this.beans.gridOptionsWrapper.isFullRowEdit();if(!t&&!n&&this.editingCell){this.stopRowOrCellEdit()}};t.prototype.stopRowOrCellEdit=function(e){if(e===void 0){e=false}if(this.beans.gridOptionsWrapper.isFullRowEdit()){this.rowComp.stopRowEditing(e)}else{this.stopEditing(e)}};t.prototype.stopEditing=function(e){if(e===void 0){e=false}if(!this.editingCell){return}if(!this.cellEditor){this.editingCell=false;return}var t=false;var i;if(!e){var n=this.cellEditor.isCancelAfterEnd&&this.cellEditor.isCancelAfterEnd();if(!n){i=this.cellEditor.getValue();t=true}}this.editingCell=false;if(this.cellEditor.destroy){this.cellEditor.destroy()}this.cellEditor=null;if(this.cellEditorInPopup){this.hideEditorPopup();this.hideEditorPopup=null}else{r._.removeAllChildren(this.getGui());if(this.usingWrapper){this.getGui().appendChild(this.eCellWrapper)}else{if(this.cellRenderer){var o=this.cellRendererGui;if(o){this.getGui().appendChild(o)}}}}this.setInlineEditingClass();if(t){this.rowNode.setDataValue(this.column,i);this.getValueAndFormat()}this.refreshCell({forceRefresh:true,suppressFlash:true});var a=this.createEvent(null,l.Events.EVENT_CELL_EDITING_STOPPED);this.beans.eventService.dispatchEvent(a)};t.DOM_DATA_KEY_CELL_COMP="cellComp";return t}(c.Component);t.CellComp=p},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(1);var a=i(9);var s=i(0);var l=i(42);var u=i(2);var c=i(41);var d=function(){function e(){this.activePopupElements=[]}e.prototype.getPopupParent=function(){var e=this.gridOptionsWrapper.getPopupParent();if(e){return e}else{return this.gridCore.getRootGui()}};e.prototype.positionPopupForMenu=function(e){var t=e.eventSource.getBoundingClientRect();var i=this.getPopupParent().getBoundingClientRect();var n=t.top-i.top;n=this.keepYWithinBounds(e,n);var r=e.ePopup.clientWidth>0?e.ePopup.clientWidth:200;var o=i.right-i.left;var a=o-r;var s;if(this.gridOptionsWrapper.isEnableRtl()){s=u();if(s<0){s=l()}if(s>a){s=0}}else{s=l();if(s>a){s=u()}if(s<0){s=0}}e.ePopup.style.left=s+"px";e.ePopup.style.top=n+"px";function l(){return t.right-i.left-2}function u(){return t.left-i.left-r}};e.prototype.positionPopupUnderMouseEvent=function(e){var t=this.getPopupParent().getBoundingClientRect();this.positionPopup({ePopup:e.ePopup,x:e.mouseEvent.clientX-t.left,y:e.mouseEvent.clientY-t.top,keepWithinBounds:true});this.callPostProcessPopup(e.ePopup,null,e.mouseEvent,e.type,e.column,e.rowNode)};e.prototype.positionPopupUnderComponent=function(e){var t=e.eventSource.getBoundingClientRect();var i=this.getPopupParent().getBoundingClientRect();this.positionPopup({ePopup:e.ePopup,minWidth:e.minWidth,nudgeX:e.nudgeX,nudgeY:e.nudgeY,x:t.left-i.left,y:t.top-i.top+t.height,keepWithinBounds:e.keepWithinBounds});this.callPostProcessPopup(e.ePopup,e.eventSource,null,e.type,e.column,e.rowNode)};e.prototype.callPostProcessPopup=function(e,t,i,n,r,o){var a=this.gridOptionsWrapper.getPostProcessPopupFunc();if(a){var s={column:r,rowNode:o,ePopup:e,type:n,eventSource:t,mouseEvent:i};a(s)}};e.prototype.positionPopupOverComponent=function(e){var t=e.eventSource.getBoundingClientRect();var i=this.getPopupParent().getBoundingClientRect();this.positionPopup({ePopup:e.ePopup,minWidth:e.minWidth,nudgeX:e.nudgeX,nudgeY:e.nudgeY,x:t.left-i.left,y:t.top-i.top,keepWithinBounds:e.keepWithinBounds});this.callPostProcessPopup(e.ePopup,e.eventSource,null,e.type,e.column,e.rowNode)};e.prototype.positionPopup=function(e){var t=e.x;var i=e.y;if(e.nudgeX){t+=e.nudgeX}if(e.nudgeY){i+=e.nudgeY}if(e.keepWithinBounds){t=this.keepXWithinBounds(e,t);i=this.keepYWithinBounds(e,i)}e.ePopup.style.left=t+"px";e.ePopup.style.top=i+"px"};e.prototype.keepYWithinBounds=function(e,t){var i=this.getPopupParent().getBoundingClientRect();var n;if(e.ePopup.clientHeight>0){n=e.ePopup.clientHeight}else{n=200}var r=i.bottom-i.top;var o=r-n-5;if(t>o){return o}else if(t<0){return 0}else{return t}};e.prototype.keepXWithinBounds=function(e,t){var i=this.getPopupParent().getBoundingClientRect();var n;if(e.minWidth>0){n=e.minWidth}else if(e.ePopup.clientWidth>0){n=e.ePopup.clientWidth}else{n=200}var r=i.right-i.left;var o=r-n-5;if(t>o){return o}else if(t<0){return 0}else{return t}};e.prototype.addAsModalPopup=function(e,t,i,n){var r=this;var s=this.gridOptionsWrapper.getDocument();if(!s){console.warn("ag-grid: could not find the body of the document, document.body is empty");return}e.style.top="0px";e.style.left="0px";var l=o.Utils.isVisible(e);if(l){return}var u=this.getPopupParent();var c=document.createElement("div");o.Utils.addCssClass(c,this.environment.getTheme());c.appendChild(e);u.appendChild(c);this.activePopupElements.push(e);var d=false;var f=function(e){var t=e.which||e.keyCode;if(t===a.Constants.KEY_ESCAPE){g(null)}};var p=function(e){g(e)};var h=function(e){g(null,e)};var g=function(t,a){if(r.isEventFromCurrentPopup(t,a,e)){return}if(r.isEventSameChainAsOriginalEvent(n,t,a)){return}if(d){return}d=true;u.removeChild(c);o.Utils.removeFromArray(r.activePopupElements,e);s.removeEventListener("keydown",f);s.removeEventListener("click",p);s.removeEventListener("touchstart",h);s.removeEventListener("contextmenu",p);if(i){i()}};setTimeout((function(){if(t){s.addEventListener("keydown",f)}s.addEventListener("click",p);s.addEventListener("touchstart",h);s.addEventListener("contextmenu",p)}),0);return g};e.prototype.isEventFromCurrentPopup=function(e,t,i){var n=e?e:t;if(n){var r=this.activePopupElements.indexOf(i);for(var a=r;a<this.activePopupElements.length;a++){var s=this.activePopupElements[a];if(o.Utils.isElementInEventPath(s,n)){return true}}}return false};e.prototype.isEventSameChainAsOriginalEvent=function(e,t,i){var n;if(t){n=t}else if(i){n=i.touches[0]}if(n&&e){var r=Math.abs(e.screenX-t.screenX)<5;var o=Math.abs(e.screenY-t.screenY)<5;if(r&&o){return true}}return false};n([s.Autowired("gridCore"),r("design:type",l.GridCore)],e.prototype,"gridCore",void 0);n([s.Autowired("gridOptionsWrapper"),r("design:type",u.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([s.Autowired("environment"),r("design:type",c.Environment)],e.prototype,"environment",void 0);e=n([s.Bean("popupService")],e);return e}();t.PopupService=d},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(3);var s=i(5);var l=i(4);var u=i(7);var c=i(6);var d=i(2);var f=function(){function e(){}e.prototype.setScrollsVisible=function(e){var t=this.bodyHorizontalScrollShowing!==e.bodyHorizontalScrollShowing||this.leftVerticalScrollShowing!==e.leftVerticalScrollShowing||this.rightVerticalScrollShowing!==e.rightVerticalScrollShowing;if(t){this.bodyHorizontalScrollShowing=e.bodyHorizontalScrollShowing;this.leftVerticalScrollShowing=e.leftVerticalScrollShowing;this.rightVerticalScrollShowing=e.rightVerticalScrollShowing;var i={type:s.Events.EVENT_SCROLL_VISIBILITY_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(i)}};e.prototype.isBodyHorizontalScrollShowing=function(){return this.bodyHorizontalScrollShowing};e.prototype.isLeftVerticalScrollShowing=function(){return this.leftVerticalScrollShowing};e.prototype.isRightVerticalScrollShowing=function(){return this.rightVerticalScrollShowing};n([o.Autowired("eventService"),r("design:type",a.EventService)],e.prototype,"eventService",void 0);n([o.Autowired("columnController"),r("design:type",l.ColumnController)],e.prototype,"columnController",void 0);n([o.Autowired("columnApi"),r("design:type",u.ColumnApi)],e.prototype,"columnApi",void 0);n([o.Autowired("gridApi"),r("design:type",c.GridApi)],e.prototype,"gridApi",void 0);n([o.Autowired("gridOptionsWrapper"),r("design:type",d.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);e=n([o.Bean("scrollVisibleService")],e);return e}();t.ScrollVisibleService=f},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(123);var s=i(2);var l=i(25);var u=i(3);var c=function(){function e(){this.p1Tasks=new a.LinkedList;this.p2Tasks=new a.LinkedList;this.ticking=false}e.prototype.registerGridComp=function(e){this.gridPanel=e};e.prototype.init=function(){this.useAnimationFrame=!this.gridOptionsWrapper.isSuppressAnimationFrame()};e.prototype.verifyAnimationFrameOn=function(e){if(this.useAnimationFrame===false){console.warn("ag-Grid: AnimationFrameService."+e+" called but animation frames are off")}};e.prototype.addP1Task=function(e){this.verifyAnimationFrameOn("addP1Task");this.p1Tasks.add(e);this.schedule()};e.prototype.addP2Task=function(e){this.verifyAnimationFrameOn("addP2Task");this.p2Tasks.add(e);this.schedule()};e.prototype.executeFrame=function(e){this.verifyAnimationFrameOn("executeFrame");var t=(new Date).getTime();var i=(new Date).getTime()-t;var n=true;var r=e<=0;while(r||i<e){if(n){n=this.gridPanel.executeFrame()}else if(!this.p1Tasks.isEmpty()){var o=this.p1Tasks.remove();o()}else if(!this.p2Tasks.isEmpty()){var o=this.p2Tasks.remove();o()}else{break}i=(new Date).getTime()-t}if(n||!this.p1Tasks.isEmpty()||!this.p2Tasks.isEmpty()){this.requestFrame()}else{this.stopTicking()}};e.prototype.stopTicking=function(){this.ticking=false;var e={type:l.Events.EVENT_ANIMATION_QUEUE_EMPTY,columnApi:this.gridOptionsWrapper.getColumnApi(),api:this.gridOptionsWrapper.getApi()};this.eventService.dispatchEvent(e)};e.prototype.flushAllFrames=function(){if(!this.useAnimationFrame){return}this.executeFrame(-1)};e.prototype.schedule=function(){if(!this.useAnimationFrame){return}if(!this.ticking){this.ticking=true;this.requestFrame()}};e.prototype.requestFrame=function(){var e=this.executeFrame.bind(this,60);if(window.requestAnimationFrame){window.requestAnimationFrame(e)}else if(window.webkitRequestAnimationFrame){window.webkitRequestAnimationFrame(e)}else{setTimeout(e,0)}};e.prototype.isQueueEmpty=function(){return this.ticking};n([o.Autowired("gridOptionsWrapper"),r("design:type",s.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.Autowired("eventService"),r("design:type",u.EventService)],e.prototype,"eventService",void 0);n([o.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);e=n([o.Bean("animationFrameService")],e);return e}();t.AnimationFrameService=c},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var o=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:true});var a=i(2);var s=i(12);var l=i(31);var u=i(107);var c=i(32);var d=i(10);var f=i(0);var p=i(1);var h=i(134);var g=function(){function e(){}e.prototype.setBeans=function(e){this.logger=e.create("BalancedColumnTreeBuilder")};e.prototype.createForAutoGroups=function(e,t){var i=this;var n=[];e.forEach((function(e){var r=i.createAutoGroupTreeItem(t,e);n.push(r)}));return n};e.prototype.createAutoGroupTreeItem=function(e,t){var i=this.findDept(e);var n=t;for(var r=i-1;r>=0;r--){var o=new c.OriginalColumnGroup(null,"FAKE_PATH_"+t.getId()+"}_"+r,true,r);this.context.wireBean(o);o.setChildren([n]);n=o}return n};e.prototype.findDept=function(e){var t=0;var i=e;while(i&&i[0]&&i[0]instanceof c.OriginalColumnGroup){t++;i=i[0].getChildren()}return t};e.prototype.createBalancedColumnGroups=function(e,t){var i=new u.ColumnKeyCreator;var n=this.recursivelyCreateColumns(e,0,i,t);var r=this.findMaxDept(n,0);this.logger.log("Number of levels for grouped columns is "+r);var o=this.balanceColumnTree(n,0,r,i);this.columnUtils.depthFirstOriginalTreeSearch(o,(function(e){if(e instanceof c.OriginalColumnGroup){e.setupExpandable()}}));return{balancedTree:o,treeDept:r}};e.prototype.balanceColumnTree=function(e,t,i,n){var r=this;var o=[];e.forEach((function(e){if(e instanceof c.OriginalColumnGroup){var a=e;var s=r.balanceColumnTree(a.getChildren(),t+1,i,n);a.setChildren(s);o.push(a)}else{var l=e;for(var u=i-1;u>=t;u--){var d=n.getUniqueKey(null,null);var f=r.createMergedColGroupDef(null);var p=new c.OriginalColumnGroup(f,d,true,t);r.context.wireBean(p);p.setChildren([l]);l=p}o.push(l)}}));return o};e.prototype.findMaxDept=function(e,t){var i=t;for(var n=0;n<e.length;n++){var r=e[n];if(r instanceof c.OriginalColumnGroup){var o=r;var a=this.findMaxDept(o.getChildren(),t+1);if(i<a){i=a}}}return i};e.prototype.recursivelyCreateColumns=function(e,t,i,n){var r=this;var o=[];if(!e){return o}e.forEach((function(e){var a;if(r.isColumnGroup(e)){a=r.createColumnGroup(i,n,e,t)}else{a=r.createColumn(i,n,e)}o.push(a)}));return o};e.prototype.createColumnGroup=function(e,t,i,n){var r=this.createMergedColGroupDef(i);var o=e.getUniqueKey(r.groupId,null);var a=new c.OriginalColumnGroup(r,o,false,n);this.context.wireBean(a);var s=this.recursivelyCreateColumns(r.children,n+1,e,t);a.setChildren(s);return a};e.prototype.createMergedColGroupDef=function(e){var t={};p.Utils.assign(t,this.gridOptionsWrapper.getDefaultColGroupDef());p.Utils.assign(t,e);this.checkForDeprecatedItems(t);return t};e.prototype.createColumn=function(e,t,i){var n=this.mergeColDefs(i);this.checkForDeprecatedItems(n);var r=e.getUniqueKey(n.colId,n.field);var o=new d.Column(n,r,t);this.context.wireBean(o);return o};e.prototype.mergeColDefs=function(e){var t={};p.Utils.assign(t,this.gridOptionsWrapper.getDefaultColDef());if(e.type){this.assignColumnTypes(e,t)}p.Utils.assign(t,e);return t};e.prototype.assignColumnTypes=function(e,t){var i;if(e.type instanceof Array){var n=e.type.some((function(e){return typeof e!=="string"}));if(n){console.warn("ag-grid: if colDef.type is supplied an array it should be of type 'string[]'")}else{i=e.type}}else if(typeof e.type==="string"){i=e.type.split(",")}else{console.warn("ag-grid: colDef.type should be of type 'string' | 'string[]'");return}var r=p.Utils.assign({},this.gridOptionsWrapper.getColumnTypes(),h.DefaultColumnTypes);i.forEach((function(e){var i=r[e.trim()];if(i){p.Utils.assign(t,i)}else{console.warn("ag-grid: colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes")}}))};e.prototype.checkForDeprecatedItems=function(e){if(e){var t=e;if(t.group!==undefined){console.warn("ag-grid: colDef.group is invalid, please check documentation on how to do grouping as it changed in version 3")}if(t.headerGroup!==undefined){console.warn("ag-grid: colDef.headerGroup is invalid, please check documentation on how to do grouping as it changed in version 3")}if(t.headerGroupShow!==undefined){console.warn("ag-grid: colDef.headerGroupShow is invalid, should be columnGroupShow, please check documentation on how to do grouping as it changed in version 3")}if(t.suppressRowGroup!==undefined){console.warn("ag-grid: colDef.suppressRowGroup is deprecated, please use colDef.type instead")}if(t.suppressAggregation!==undefined){console.warn("ag-grid: colDef.suppressAggregation is deprecated, please use colDef.type instead")}if(t.suppressRowGroup||t.suppressAggregation){console.warn("ag-grid: colDef.suppressAggregation and colDef.suppressRowGroup are deprecated, use allowRowGroup, allowPivot and allowValue instead")}if(t.displayName){console.warn("ag-grid: Found displayName "+t.displayName+", please use headerName instead, displayName is deprecated.");t.headerName=t.displayName}}};e.prototype.isColumnGroup=function(e){return e.children!==undefined};n([f.Autowired("gridOptionsWrapper"),r("design:type",a.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([f.Autowired("columnUtils"),r("design:type",l.ColumnUtils)],e.prototype,"columnUtils",void 0);n([f.Autowired("context"),r("design:type",f.Context)],e.prototype,"context",void 0);n([o(0,f.Qualifier("loggerFactory")),r("design:type",Function),r("design:paramtypes",[s.LoggerFactory]),r("design:returntype",void 0)],e.prototype,"setBeans",null);e=n([f.Bean("balancedColumnTreeBuilder")],e);return e}();t.BalancedColumnTreeBuilder=g},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(20);var a=i(0);var s=i(2);var l=i(100);var u=function(){function e(){}e.prototype.registerGridComp=function(e){this.gridPanel=e};e.prototype.registerHeaderRootComp=function(e){this.headerRootComp=e};e.prototype.getPreferredWidthForColumn=function(e){var t=this.getHeaderCellForColumn(e);if(!t){return-1}var i=document.createElement("span");i.style.position="fixed";var n=this.gridPanel.getBodyContainer();n.appendChild(i);this.putRowCellsIntoDummyContainer(e,i);this.cloneItemIntoDummy(t,i);var r=i.offsetWidth;n.removeChild(i);var o=this.gridOptionsWrapper.getAutoSizePadding();return r+o};e.prototype.getHeaderCellForColumn=function(e){var t=null;this.headerRootComp.forEachHeaderElement((function(i){if(i instanceof l.HeaderWrapperComp){var n=i;if(n.getColumn()===e){t=n}}}));return t?t.getGui():null};e.prototype.putRowCellsIntoDummyContainer=function(e,t){var i=this;var n=this.rowRenderer.getAllCellsForColumn(e);n.forEach((function(e){return i.cloneItemIntoDummy(e,t)}))};e.prototype.cloneItemIntoDummy=function(e,t){var i=e.cloneNode(true);i.style.width="";i.style.position="static";i.style.left="";var n=document.createElement("div");n.style.display="table-row";n.appendChild(i);t.appendChild(n)};n([a.Autowired("rowRenderer"),r("design:type",o.RowRenderer)],e.prototype,"rowRenderer",void 0);n([a.Autowired("gridOptionsWrapper"),r("design:type",s.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);e=n([a.Bean("autoWidthCalculator")],e);return e}();t.AutoWidthCalculator=u},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(12);var s=i(1);var l=i(3);var u=i(5);var c=i(2);var d=i(7);var f=i(6);var p=function(){function e(){this.onMouseUpListener=this.onMouseUp.bind(this);this.onMouseMoveListener=this.onMouseMove.bind(this);this.onTouchEndListener=this.onTouchUp.bind(this);this.onTouchMoveListener=this.onTouchMove.bind(this);this.dragEndFunctions=[];this.dragSources=[]}e.prototype.init=function(){this.logger=this.loggerFactory.create("DragService")};e.prototype.destroy=function(){this.dragSources.forEach(this.removeListener.bind(this));this.dragSources.length=0};e.prototype.removeListener=function(e){var t=e.dragSource.eElement;var i=e.mouseDownListener;t.removeEventListener("mousedown",i);if(e.touchEnabled){var n=e.touchStartListener;t.removeEventListener("touchstart",n,{passive:true})}};e.prototype.removeDragSource=function(e){var t=s.Utils.find(this.dragSources,(function(t){return t.dragSource===e}));if(!t){return}this.removeListener(t);s.Utils.removeFromArray(this.dragSources,t)};e.prototype.setNoSelectToBody=function(e){var t=this.gridOptionsWrapper.getDocument();var i=t.querySelector("body");if(s.Utils.exists(i)){s.Utils.addOrRemoveCssClass(i,"ag-body-no-select",e)}};e.prototype.addDragSource=function(e,t){if(t===void 0){t=false}var i=this.onMouseDown.bind(this,e);e.eElement.addEventListener("mousedown",i);var n=null;var r=this.gridOptionsWrapper.isSuppressTouch();var o=t&&!r;if(o){n=this.onTouchStart.bind(this,e);e.eElement.addEventListener("touchstart",n,{passive:false})}this.dragSources.push({dragSource:e,mouseDownListener:i,touchStartListener:n,touchEnabled:t})};e.prototype.onTouchStart=function(e,t){var i=this;this.currentDragParams=e;this.dragging=false;var n=t.touches[0];this.touchLastTime=n;this.touchStart=n;t.preventDefault();e.eElement.addEventListener("touchmove",this.onTouchMoveListener,{passive:true});e.eElement.addEventListener("touchend",this.onTouchEndListener,{passive:true});e.eElement.addEventListener("touchcancel",this.onTouchEndListener,{passive:true});this.dragEndFunctions.push((function(){e.eElement.removeEventListener("touchmove",i.onTouchMoveListener,{passive:true});e.eElement.removeEventListener("touchend",i.onTouchEndListener,{passive:true});e.eElement.removeEventListener("touchcancel",i.onTouchEndListener,{passive:true})}));if(e.dragStartPixels===0){this.onCommonMove(n,this.touchStart)}};e.prototype.onMouseDown=function(e,t){var i=this;if(e.skipMouseEvent){if(e.skipMouseEvent(t)){return}}if(t._alreadyProcessedByDragService){return}t._alreadyProcessedByDragService=true;if(t.button!==0){return}this.currentDragParams=e;this.dragging=false;this.mouseEventLastTime=t;this.mouseStartEvent=t;var n=this.gridOptionsWrapper.getDocument();n.addEventListener("mousemove",this.onMouseMoveListener);n.addEventListener("mouseup",this.onMouseUpListener);this.dragEndFunctions.push((function(){n.removeEventListener("mousemove",i.onMouseMoveListener);n.removeEventListener("mouseup",i.onMouseUpListener)}));if(e.dragStartPixels===0){this.onMouseMove(t)}};e.prototype.isEventNearStartEvent=function(e,t){var i=s.Utils.exists(this.currentDragParams.dragStartPixels)?this.currentDragParams.dragStartPixels:4;return s.Utils.areEventsNear(e,t,i)};e.prototype.getFirstActiveTouch=function(e){for(var t=0;t<e.length;t++){var i=e[t].identifier===this.touchStart.identifier;if(i){return e[t]}}return null};e.prototype.onCommonMove=function(e,t){if(!this.dragging){var i=!this.dragging&&this.isEventNearStartEvent(e,t);if(i){return}else{this.dragging=true;var n={type:u.Events.EVENT_DRAG_STARTED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(n);this.currentDragParams.onDragStart(t);this.setNoSelectToBody(true)}}this.currentDragParams.onDragging(e)};e.prototype.onTouchMove=function(e){var t=this.getFirstActiveTouch(e.touches);if(!t){return}this.onCommonMove(t,this.touchStart)};e.prototype.onMouseMove=function(e){this.onCommonMove(e,this.mouseStartEvent)};e.prototype.onTouchUp=function(e){var t=this.getFirstActiveTouch(e.changedTouches);if(!t){t=this.touchLastTime}this.onUpCommon(t)};e.prototype.onMouseUp=function(e){this.onUpCommon(e)};e.prototype.onUpCommon=function(e){if(this.dragging){this.dragging=false;this.currentDragParams.onDragStop(e);var t={type:u.Events.EVENT_DRAG_STOPPED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(t)}this.setNoSelectToBody(false);this.mouseStartEvent=null;this.mouseEventLastTime=null;this.touchStart=null;this.touchLastTime=null;this.currentDragParams=null;this.dragEndFunctions.forEach((function(e){return e()}));this.dragEndFunctions.length=0};n([o.Autowired("loggerFactory"),r("design:type",a.LoggerFactory)],e.prototype,"loggerFactory",void 0);n([o.Autowired("eventService"),r("design:type",l.EventService)],e.prototype,"eventService",void 0);n([o.Autowired("gridOptionsWrapper"),r("design:type",c.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.Autowired("columnApi"),r("design:type",d.ColumnApi)],e.prototype,"columnApi",void 0);n([o.Autowired("gridApi"),r("design:type",f.GridApi)],e.prototype,"gridApi",void 0);n([o.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);n([o.PreDestroy,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"destroy",null);e=n([o.Bean("dragService")],e);return e}();t.DragService=p},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=["fresh","dark","blue","bootstrap","material","balham-dark","balham"];var s=a.concat(a.map((function(e){return"theme-"+e})));var l=new RegExp("ag-("+s.join("|")+")");var u=8;var c=4;var d=4;var f={"ag-theme-material":{headerHeight:u*7,virtualItemHeight:u*5,rowHeight:u*6},"ag-theme-classic":{headerHeight:25,virtualItemHeight:c*5,rowHeight:25},"ag-theme-balham":{headerHeight:d*8,virtualItemHeight:d*7,rowHeight:d*7}};var p=function(){function e(){this.sassVariables={}}e.prototype.loadSassVariables=function(){};e.prototype.getSassVariable=function(e,t){if(e=="ag-theme-material"){return f["ag-theme-material"][t]}else if(e=="ag-theme-balham"||e=="ag-theme-balham-dark"){return f["ag-theme-balham"][t]}return f["ag-theme-classic"][t]};e.prototype.getTheme=function(){var e;var t=this.eGridDiv;while(t!=document.documentElement&&e==null){e=t.className.match(l);t=t.parentElement;if(t==null){break}}if(e){return e[0]}else{return"ag-fresh"}};n([o.Autowired("eGridDiv"),r("design:type",HTMLElement)],e.prototype,"eGridDiv",void 0);e=n([o.Bean("environment")],e);return e}();t.Environment=p},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(2);var s=i(7);var l=i(4);var u=i(20);var c=i(18);var d=i(3);var f=i(78);var p=i(12);var h=i(35);var g=i(1);var m=i(0);var v=i(22);var y=i(8);var b=i(6);var _=i(11);var w=function(e){n(t,e);function t(){return e.call(this)||this}i=t;t.prototype.init=function(){var e=this;this.logger=this.loggerFactory.create("GridCore");var t=this.enterprise?i.TEMPLATE_ENTERPRISE:i.TEMPLATE_NORMAL;this.setTemplate(t);this.instantiate(this.context);if(this.enterprise){this.toolPanelComp.registerGridComp(this.gridPanel);this.statusBar.registerGridPanel(this.gridPanel)}this.gridOptionsWrapper.addEventListener(a.GridOptionsWrapper.PROP_GRID_AUTO_HEIGHT,this.addLayoutClass.bind(this));this.addLayoutClass();this.showToolPanel(this.gridOptionsWrapper.isShowToolPanel());this.eGridDiv.appendChild(this.getGui());this.addDestroyFunc((function(){e.eGridDiv.removeChild(e.getGui())}));if(this.$scope){var n=this.$scope.$watch(this.quickFilterOnScope,(function(t){return e.filterManager.setQuickFilter(t)}));this.addDestroyFunc(n)}this.addRtlSupport();this.finished=false;this.addDestroyFunc((function(){return e.finished=true}));this.logger.log("ready")};t.prototype.addLayoutClass=function(){var e=this.gridOptionsWrapper.isGridAutoHeight();this.addOrRemoveCssClass("ag-layout-auto-height",e);this.addOrRemoveCssClass("ag-layout-normal",!e);this.addOrRemoveCssClass("ag-scrolls",!e)};t.prototype.getPreferredWidth=function(){var e=this.columnController.getBodyContainerWidth()+this.columnController.getPinnedLeftContainerWidth()+this.columnController.getPinnedRightContainerWidth();var t=this.toolPanelComp?this.toolPanelComp.getPreferredWidth():0;return e+t};t.prototype.addRtlSupport=function(){var e=this.gridOptionsWrapper.isEnableRtl()?"ag-rtl":"ag-ltr";g.Utils.addCssClass(this.getGui(),e)};t.prototype.getRootGui=function(){return this.getGui()};t.prototype.showToolPanel=function(e){if(!this.toolPanelComp){if(e){console.warn("ag-Grid: toolPanel is only available in ag-Grid Enterprise")}return}this.toolPanelComp.showToolPanel(e)};t.prototype.isToolPanelShowing=function(){return this.toolPanelComp.isToolPanelShowing()};t.prototype.destroy=function(){e.prototype.destroy.call(this);this.logger.log("Grid DOM removed")};t.prototype.ensureNodeVisible=function(e,t){if(t===void 0){t="top"}if(this.doingVirtualPaging){throw"Cannot use ensureNodeVisible when doing virtual paging, as we cannot check rows that are not in memory"}var i=this.rowModel.getPageLastRow()+1;var n=typeof e==="function";var r=-1;for(var o=0;o<i;o++){var a=this.rowModel.getRow(o);if(n){if(e(a)){r=o;break}}else{if(e===a||e===a.data){r=o;break}}}if(r>=0){this.gridPanel.ensureIndexVisible(r,t)}};t.TEMPLATE_NORMAL='<div class="ag-root-wrapper">\n            <div class="ag-root-wrapper-body">\n                <ag-grid-comp ref="gridPanel"></ag-grid-comp>\n            </div>\n            <ag-pagination></ag-pagination>\n        </div>';t.TEMPLATE_ENTERPRISE='<div class="ag-root-wrapper">\n            <ag-header-column-drop></ag-header-column-drop>\n            <div class="ag-root-wrapper-body">\n                <ag-grid-comp ref="gridPanel"></ag-grid-comp>\n                <ag-tool-panel ref="toolPanel"></ag-tool-panel>\n            </div>\n            <ag-status-bar ref="statusBar"></ag-status-bar>\n            <ag-pagination></ag-pagination>\n        </div>';r([m.Autowired("enterprise"),o("design:type",Boolean)],t.prototype,"enterprise",void 0);r([m.Autowired("gridOptions"),o("design:type",Object)],t.prototype,"gridOptions",void 0);r([m.Autowired("gridOptionsWrapper"),o("design:type",a.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([m.Autowired("rowModel"),o("design:type",Object)],t.prototype,"rowModel",void 0);r([m.Autowired("frameworkFactory"),o("design:type",Object)],t.prototype,"frameworkFactory",void 0);r([m.Autowired("columnController"),o("design:type",l.ColumnController)],t.prototype,"columnController",void 0);r([m.Autowired("rowRenderer"),o("design:type",u.RowRenderer)],t.prototype,"rowRenderer",void 0);r([m.Autowired("filterManager"),o("design:type",c.FilterManager)],t.prototype,"filterManager",void 0);r([m.Autowired("eventService"),o("design:type",d.EventService)],t.prototype,"eventService",void 0);r([m.Autowired("eGridDiv"),o("design:type",HTMLElement)],t.prototype,"eGridDiv",void 0);r([m.Autowired("$scope"),o("design:type",Object)],t.prototype,"$scope",void 0);r([m.Autowired("quickFilterOnScope"),o("design:type",String)],t.prototype,"quickFilterOnScope",void 0);r([m.Autowired("popupService"),o("design:type",h.PopupService)],t.prototype,"popupService",void 0);r([m.Autowired("focusedCellController"),o("design:type",v.FocusedCellController)],t.prototype,"focusedCellController",void 0);r([m.Autowired("context"),o("design:type",m.Context)],t.prototype,"context",void 0);r([m.Autowired("loggerFactory"),o("design:type",p.LoggerFactory)],t.prototype,"loggerFactory",void 0);r([m.Autowired("columnApi"),o("design:type",s.ColumnApi)],t.prototype,"columnApi",void 0);r([m.Autowired("gridApi"),o("design:type",b.GridApi)],t.prototype,"gridApi",void 0);r([m.Optional("rowGroupCompFactory"),o("design:type",Object)],t.prototype,"rowGroupCompFactory",void 0);r([m.Optional("pivotCompFactory"),o("design:type",Object)],t.prototype,"pivotCompFactory",void 0);r([_.RefSelector("statusBar"),o("design:type",Object)],t.prototype,"statusBar",void 0);r([_.RefSelector("gridPanel"),o("design:type",f.GridPanel)],t.prototype,"gridPanel",void 0);r([_.RefSelector("toolPanel"),o("design:type",Object)],t.prototype,"toolPanelComp",void 0);r([m.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"init",null);r([m.PreDestroy,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"destroy",null);t=i=r([m.Bean("gridCore"),o("design:paramtypes",[])],t);return t;var i}(y.Component);t.GridCore=w},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(2);var s=i(19);var l=function(){function e(){}e.prototype.formatValue=function(e,t,i,n){var r;var o=e.getColDef();if(t&&t.rowPinned){r=o.pinnedRowValueFormatter?o.pinnedRowValueFormatter:o.valueFormatter}else{r=o.valueFormatter}var a=null;if(r){var s={value:n,node:t,data:t?t.data:null,colDef:e.getColDef(),column:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};s.$scope=i;a=this.expressionService.evaluate(r,s)}else if(o.refData){return o.refData[n]}if((a===null||a===undefined)&&Array.isArray(n)){a=n.join(", ")}return a};n([o.Autowired("gridOptionsWrapper"),r("design:type",a.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.Autowired("expressionService"),r("design:type",s.ExpressionService)],e.prototype,"expressionService",void 0);e=n([o.Bean("valueFormatterService")],e);return e}();t.ValueFormatterService=l},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(0);var s=i(1);var l=i(2);var u=i(34);var c=function(){function e(){this.gridInstanceId=t.gridInstanceSequence.next()}t=e;e.prototype.init=function(){this.stampDomElementWithGridInstance()};e.prototype.stampDomElementWithGridInstance=function(){this.eGridDiv[t.GRID_DOM_KEY]=this.gridInstanceId};e.prototype.getRenderedCellForEvent=function(e){var t=s.Utils.getTarget(e);while(t){var i=this.gridOptionsWrapper.getDomData(t,u.CellComp.DOM_DATA_KEY_CELL_COMP);if(i){return i}t=t.parentElement}return null};e.prototype.isEventFromThisGrid=function(e){var i=s.Utils.getEventPath(e);for(var n=0;n<i.length;n++){var r=i[n];var o=r[t.GRID_DOM_KEY];if(s.Utils.exists(o)){var a=o===this.gridInstanceId;return a}}return false};e.prototype.getGridCellForEvent=function(e){var t=this.getRenderedCellForEvent(e);return t?t.getGridCell():null};e.gridInstanceSequence=new s.NumberSequence;e.GRID_DOM_KEY="__ag_grid_instance";n([a.Autowired("gridOptionsWrapper"),r("design:type",l.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([a.Autowired("eGridDiv"),r("design:type",HTMLElement)],e.prototype,"eGridDiv",void 0);n([o.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);e=t=n([o.Bean("mouseEventService")],e);return e;var t}();t.MouseEventService=c},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(3);var s=i(0);var l=i(5);var u=i(13);var c=i(7);var d=i(6);var f=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.setMouseOver=function(e){this.selectedColumns=e;var t={type:l.Events.EVENT_COLUMN_HOVER_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(t)};t.prototype.clearMouseOver=function(){this.selectedColumns=null;var e={type:l.Events.EVENT_COLUMN_HOVER_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)};t.prototype.isHovered=function(e){return this.selectedColumns&&this.selectedColumns.indexOf(e)>=0};r([s.Autowired("eventService"),o("design:type",a.EventService)],t.prototype,"eventService",void 0);r([s.Autowired("columnApi"),o("design:type",c.ColumnApi)],t.prototype,"columnApi",void 0);r([s.Autowired("gridApi"),o("design:type",d.GridApi)],t.prototype,"gridApi",void 0);t=r([s.Bean("columnHoverService")],t);return t}(u.BeanStub);t.ColumnHoverService=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(3);var r=i(1);var o=function(){function e(e,t){if(t===void 0){t=false}var i=this;this.destroyFuncs=[];this.touching=false;this.eventService=new n.EventService;this.eElement=e;this.preventMouseClick=t;var r=this.onTouchStart.bind(this);var o=this.onTouchMove.bind(this);var a=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",r,{passive:true});this.eElement.addEventListener("touchmove",o,{passive:true});this.eElement.addEventListener("touchend",a,{passive:false});this.destroyFuncs.push((function(){i.eElement.addEventListener("touchstart",r,{passive:true});i.eElement.addEventListener("touchmove",o,{passive:true});i.eElement.addEventListener("touchend",a,{passive:false})}))}e.prototype.getActiveTouch=function(e){for(var t=0;t<e.length;t++){var i=e[t].identifier===this.touchStart.identifier;if(i){return e[t]}}return null};e.prototype.addEventListener=function(e,t){this.eventService.addEventListener(e,t)};e.prototype.removeEventListener=function(e,t){this.eventService.removeEventListener(e,t)};e.prototype.onTouchStart=function(t){var i=this;if(this.touching){return}this.touchStart=t.touches[0];this.touching=true;this.moved=false;var n=this.touchStart;setTimeout((function(){var r=i.touchStart===n;if(i.touching&&r&&!i.moved){i.moved=true;var o={type:e.EVENT_LONG_TAP,touchStart:i.touchStart,touchEvent:t};i.eventService.dispatchEvent(o)}}),500)};e.prototype.onTouchMove=function(e){if(!this.touching){return}var t=this.getActiveTouch(e.touches);if(!t){return}var i=!r.Utils.areEventsNear(t,this.touchStart,4);if(i){this.moved=true}};e.prototype.onTouchEnd=function(t){if(!this.touching){return}if(!this.moved){var i={type:e.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(i);this.checkForDoubleTap();if(this.preventMouseClick){t.preventDefault()}}this.touching=false};e.prototype.checkForDoubleTap=function(){var t=(new Date).getTime();if(this.lastTapTime>0){var i=t-this.lastTapTime;if(i>e.DOUBLE_TAP_MILLIS){var n={type:e.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(n);this.lastTapTime=null}else{this.lastTapTime=t}}else{this.lastTapTime=t}};e.prototype.destroy=function(){this.destroyFuncs.forEach((function(e){return e()}))};e.EVENT_TAP="tap";e.EVENT_DOUBLE_TAP="doubleTap";e.EVENT_LONG_TAP="longTap";e.DOUBLE_TAP_MILLIS=500;return e}();t.TouchListener=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(0);var s=i(63);var l=i(84);var u=i(4);var c=i(16);var d=i(2);var f=i(9);var p=i(1);var h="\r\n";var g=function(e){n(t,e);function t(t,i,n,r,o,a,s){var l=e.call(this,t,i,n,r,o)||this;l.suppressQuotes=a;l.columnSeparator=s;l.result="";l.lineOpened=false;return l}t.prototype.prepare=function(e){};t.prototype.addCustomHeader=function(e){if(!e)return;this.result+=e+h};t.prototype.addCustomFooter=function(e){if(!e)return;this.result+=e+h};t.prototype.onNewHeaderGroupingRow=function(){if(this.lineOpened)this.result+=h;return{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}};t.prototype.onNewHeaderGroupingRowColumn=function(e,t,i){if(t!=0){this.result+=this.columnSeparator}this.result+=e;for(var n=1;n<=i;n++){this.result+=this.columnSeparator+this.putInQuotes("",this.suppressQuotes)}this.lineOpened=true};t.prototype.onNewHeaderRow=function(){if(this.lineOpened)this.result+=h;return{onColumn:this.onNewHeaderRowColumn.bind(this)}};t.prototype.onNewHeaderRowColumn=function(e,t,i){if(t!=0){this.result+=this.columnSeparator}this.result+=this.putInQuotes(this.extractHeaderValue(e),this.suppressQuotes);this.lineOpened=true};t.prototype.onNewBodyRow=function(){if(this.lineOpened)this.result+=h;return{onColumn:this.onNewBodyRowColumn.bind(this)}};t.prototype.onNewBodyRowColumn=function(e,t,i){if(t!=0){this.result+=this.columnSeparator}this.result+=this.putInQuotes(this.extractRowCellValue(e,t,f.Constants.EXPORT_TYPE_CSV,i),this.suppressQuotes);this.lineOpened=true};t.prototype.putInQuotes=function(e,t){if(t){return e}if(e===null||e===undefined){return'""'}var i;if(typeof e==="string"){i=e}else if(typeof e.toString==="function"){i=e.toString()}else{console.warn("unknown value type during csv conversion");i=""}var n=i.replace(/"/g,'""');return'"'+n+'"'};t.prototype.parse=function(){return this.result};return t}(s.BaseGridSerializingSession);t.CsvSerializingSession=g;var m=function(){function e(){}e.prototype.setBeans=function(e){this.beans=e};e.prototype.export=function(e){if(this.isExportSuppressed()){console.warn("ag-grid: Export canceled. Export is not allowed as per your configuration.");return""}var t=this.getMergedParamsAndData(e),i=t.mergedParams,n=t.data;var r=i&&i.fileName&&i.fileName.length!==0;var o=r?i.fileName:this.getDefaultFileName();if(o.indexOf(".")===-1){o=o+"."+this.getDefaultFileExtension()}this.beans.downloader.download(o,n,this.getMimeType());return n};e.prototype.getData=function(e){return this.getMergedParamsAndData(e).data};e.prototype.getMergedParamsAndData=function(e){var t=this.mergeDefaultParams(e);var i=this.beans.gridSerializer.serialize(this.createSerializingSession(t),t);return{mergedParams:t,data:i}};e.prototype.mergeDefaultParams=function(e){var t=this.beans.gridOptionsWrapper.getDefaultExportParams();var i={};p._.assign(i,t);p._.assign(i,e);return i};return e}();t.BaseCreator=m;var v=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.postConstruct=function(){this.setBeans({downloader:this.downloader,gridSerializer:this.gridSerializer,gridOptionsWrapper:this.gridOptionsWrapper})};t.prototype.exportDataAsCsv=function(e){return this.export(e)};t.prototype.getDataAsCsv=function(e){return this.getData(e)};t.prototype.getMimeType=function(){return"text/csv;charset=utf-8;"};t.prototype.getDefaultFileName=function(){return"export.csv"};t.prototype.getDefaultFileExtension=function(){return"csv"};t.prototype.createSerializingSession=function(e){return new g(this.columnController,this.valueService,this.gridOptionsWrapper,e?e.processCellCallback:null,e?e.processHeaderCallback:null,e&&e.suppressQuotes,e&&e.columnSeparator||",")};t.prototype.isExportSuppressed=function(){return this.gridOptionsWrapper.isSuppressCsvExport()};r([a.Autowired("columnController"),o("design:type",u.ColumnController)],t.prototype,"columnController",void 0);r([a.Autowired("valueService"),o("design:type",c.ValueService)],t.prototype,"valueService",void 0);r([a.Autowired("downloader"),o("design:type",l.Downloader)],t.prototype,"downloader",void 0);r([a.Autowired("gridSerializer"),o("design:type",s.GridSerializer)],t.prototype,"gridSerializer",void 0);r([a.Autowired("gridOptionsWrapper"),o("design:type",d.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([a.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"postConstruct",null);t=r([a.Bean("csvCreator")],t);return t}(m);t.CsvCreator=v},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(31);var a=i(26);var s=i(32);var l=i(0);var u=i(1);var c=i(0);var d=function(){function e(){}e.prototype.createDisplayedGroups=function(e,t,i,n){var r=this;var o=[];var a;var s;var l=this.mapOldGroupsById(n);e.forEach((function(e){var n=r.getOriginalPathForColumn(t,e);var u=[];var c=!s;for(var d=0;d<n.length;d++){if(c||n[d]!==s[d]){var f=r.createColumnGroup(n[d],i,l);u[d]=f;if(d==0){o.push(f)}else{u[d-1].addChild(f)}}else{u[d]=a[d]}}var p=u.length===0;if(p){o.push(e)}else{var h=u[u.length-1];h.addChild(e)}a=u;s=n}));this.setupParentsIntoColumns(o,null);return o};e.prototype.createColumnGroup=function(e,t,i){var n=e.getGroupId();var r=t.getInstanceIdForKey(n);var o=a.ColumnGroup.createUniqueId(n,r);var s=i[o];if(s&&s.getOriginalColumnGroup()!==e){s=null}if(u.Utils.exists(s)){s.reset()}else{s=new a.ColumnGroup(e,n,r);this.context.wireBean(s)}return s};e.prototype.mapOldGroupsById=function(e){var t={};var i=function(e){e.forEach((function(e){if(e instanceof a.ColumnGroup){var n=e;t[e.getUniqueId()]=n;i(n.getChildren())}}))};if(e){i(e)}return t};e.prototype.setupParentsIntoColumns=function(e,t){var i=this;e.forEach((function(e){e.setParent(t);if(e instanceof a.ColumnGroup){var n=e;i.setupParentsIntoColumns(n.getChildren(),n)}}))};e.prototype.getOriginalPathForColumn=function(e,t){var i=[];var n=false;r(e,0);if(n){return i}else{console.log("could not get path");return null}function r(e,o){for(var a=0;a<e.length;a++){if(n){return}var l=e[a];if(l instanceof s.OriginalColumnGroup){var u=l;r(u.getChildren(),o+1);i[o]=l}else{if(l===t){n=true}}}}};n([c.Autowired("columnUtils"),r("design:type",o.ColumnUtils)],e.prototype,"columnUtils",void 0);n([c.Autowired("context"),r("design:type",l.Context)],e.prototype,"context",void 0);e=n([l.Bean("displayedGroupCreator")],e);return e}();t.DisplayedGroupCreator=d},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(0);var s=function(){function e(){this.templateCache={};this.waitingCallbacks={}}e.prototype.getTemplate=function(e,t){var i=this.templateCache[e];if(i){return i}var n=this.waitingCallbacks[e];var r=this;if(!n){n=[];this.waitingCallbacks[e]=n;var o=new XMLHttpRequest;o.onload=function(){r.handleHttpResult(this,e)};o.open("GET",e);o.send()}if(t){n.push(t)}return null};e.prototype.handleHttpResult=function(e,t){if(e.status!==200||e.response===null){console.warn("Unable to get template error "+e.status+" - "+t);return}this.templateCache[t]=e.response||e.responseText;var i=this.waitingCallbacks[t];for(var n=0;n<i.length;n++){var r=i[n];r()}if(this.$scope){var o=this;setTimeout((function(){o.$scope.$apply()}),0)}};n([a.Autowired("$scope"),r("design:type",Object)],e.prototype,"$scope",void 0);e=n([o.Bean("templateService")],e);return e}();t.TemplateService=s},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(1);var s=i(34);var l=i(14);var u=i(2);var c=i(10);var d=i(5);var f=i(0);var p=i(8);var h=i(11);var g=function(e){n(t,e);function t(){return e.call(this,t.TEMPLATE)||this}t.prototype.init=function(e){var t=a._.createIconNoSpan("groupLoading",this.gridOptionsWrapper,null);this.eLoadingIcon.appendChild(t);var i=this.gridOptionsWrapper.getLocaleTextFunc();this.eLoadingText.innerText=i("loadingOoo","Loading")};t.prototype.refresh=function(e){return false};t.TEMPLATE='<div class="ag-stub-cell">\n            <span class="ag-loading-icon" ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" ref="eLoadingText"></span>\n        </div>';r([f.Autowired("gridOptionsWrapper"),o("design:type",u.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([h.RefSelector("eLoadingIcon"),o("design:type",HTMLElement)],t.prototype,"eLoadingIcon",void 0);r([h.RefSelector("eLoadingText"),o("design:type",HTMLElement)],t.prototype,"eLoadingText",void 0);return t}(p.Component);t.LoadingCellRenderer=g;var m=function(e){n(t,e);function t(t,i,n,r,o,a,s,l,u){var c=e.call(this)||this;c.eAllRowContainers=[];c.active=true;c.columnRefreshPending=false;c.cellComps={};c.createSecondPassFuncs=[];c.removeFirstPassFuncs=[];c.removeSecondPassFuncs=[];c.initialised=false;c.parentScope=t;c.beans=s;c.bodyContainerComp=i;c.pinnedLeftContainerComp=n;c.pinnedRightContainerComp=r;c.fullWidthContainerComp=o;c.rowNode=a;c.rowIsEven=c.rowNode.rowIndex%2===0;c.paginationPage=c.beans.paginationProxy.getCurrentPage();c.useAnimationFrameForCreate=u;c.setAnimateFlags(l);return c}t.prototype.init=function(){var e=this;this.rowFocused=this.beans.focusedCellController.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);this.scope=this.createChildScopeOrNull(this.rowNode.data);this.setupRowContainers();this.addListeners();if(this.slideRowIn){this.createSecondPassFuncs.push((function(){e.onTopChanged()}))}if(this.fadeRowIn){this.createSecondPassFuncs.push((function(){e.eAllRowContainers.forEach((function(e){return a._.removeCssClass(e,"ag-opacity-zero")}))}))}};t.prototype.createTemplate=function(e,t){if(t===void 0){t=null}var i=[];var n=this.rowNode.rowHeight;var r=this.getInitialRowClasses(t).join(" ");var o=a._.escape(this.rowNode.id);var s=this.preProcessStylesFromGridOptions();var l=this.getRowBusinessKey();var u=a._.escape(l);var c=this.getInitialRowTopStyle();i.push("<div");i.push(' role="row"');i.push(' row-index="'+this.rowNode.getRowIndexString()+'"');i.push(o?' row-id="'+o+'"':"");i.push(l?' row-business-key="'+u+'"':"");i.push(' comp-id="'+this.getCompId()+'"');i.push(' class="'+r+'"');i.push(' style="height: '+n+"px; "+c+" "+s+'">');i.push(e);i.push("</div>");return i.join("")};t.prototype.getCellForCol=function(e){var t=this.cellComps[e.getColId()];if(t){return t.getGui()}else{return null}};t.prototype.afterFlush=function(){if(!this.initialised){this.initialised=true;this.executeProcessRowPostCreateFunc()}};t.prototype.executeProcessRowPostCreateFunc=function(){var e=this.beans.gridOptionsWrapper.getProcessRowPostCreateFunc();if(e){var t={eRow:this.eBodyRow,ePinnedLeftRow:this.ePinnedLeftRow,ePinnedRightRow:this.ePinnedRightRow,node:this.rowNode,api:this.beans.gridOptionsWrapper.getApi(),rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()};e(t)}};t.prototype.getInitialRowTopStyle=function(){var e=this.slideRowIn?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop;var t=this.applyPaginationOffset(e);var i=this.beans.heightScaler.getRealPixelPosition(t);if(this.beans.gridOptionsWrapper.isSuppressRowTransform()){return"top: "+i+"px; "}else{return"transform: translateY("+i+"px); "}};t.prototype.getRowBusinessKey=function(){if(typeof this.beans.gridOptionsWrapper.getBusinessKeyForNodeFunc()==="function"){var e=this.beans.gridOptionsWrapper.getBusinessKeyForNodeFunc()(this.rowNode);return e}};t.prototype.lazyCreateCells=function(e,t){if(this.active){var i=this.createCells(e);t.innerHTML=i.template;this.callAfterRowAttachedOnCells(i.cellComps,t)}};t.prototype.createRowContainer=function(e,t,i){var n=this;var r;if(this.useAnimationFrameForCreate){r={cellComps:[],template:""}}else{r=this.createCells(t)}var o=this.createTemplate(r.template);e.appendRowTemplate(o,(function(){var o=e.getRowElement(n.getCompId());n.afterRowAttached(e,o);i(o);if(n.useAnimationFrameForCreate){n.beans.taskQueue.addP1Task(n.lazyCreateCells.bind(n,t,o))}else{n.callAfterRowAttachedOnCells(r.cellComps,o)}}))};t.prototype.createChildScopeOrNull=function(e){if(this.beans.gridOptionsWrapper.isAngularCompileRows()){var t=this.parentScope.$new();t.data=e;t.rowNode=this.rowNode;t.context=this.beans.gridOptionsWrapper.getContext();this.addDestroyFunc((function(){t.$destroy();t.data=null;t.rowNode=null;t.context=null}));return t}else{return null}};t.prototype.setupRowContainers=function(){var e=this.beans.gridOptionsWrapper.getIsFullWidthCellFunc();var i=e?e(this.rowNode):false;var n=this.beans.doingMasterDetail&&this.rowNode.detail;var r=this.rowNode.group&&this.beans.gridOptionsWrapper.isGroupUseEntireRow();if(this.rowNode.stub){this.createFullWidthRows(t.LOADING_CELL_RENDERER,t.LOADING_CELL_RENDERER_COMP_NAME)}else if(n){this.createFullWidthRows(t.DETAIL_CELL_RENDERER,t.DETAIL_CELL_RENDERER_COMP_NAME)}else if(i){this.createFullWidthRows(t.FULL_WIDTH_CELL_RENDERER,null)}else if(r){this.createFullWidthRows(t.GROUP_ROW_RENDERER,t.GROUP_ROW_RENDERER_COMP_NAME)}else{this.setupNormalRowContainers()}};t.prototype.setupNormalRowContainers=function(){var e=this;var t=this.beans.columnController.getAllDisplayedCenterVirtualColumnsForRow(this.rowNode);this.createRowContainer(this.bodyContainerComp,t,(function(t){return e.eBodyRow=t}));var i=this.beans.columnController.getDisplayedLeftColumnsForRow(this.rowNode);var n=this.beans.columnController.getDisplayedRightColumnsForRow(this.rowNode);this.createRowContainer(this.pinnedRightContainerComp,n,(function(t){return e.ePinnedRightRow=t}));this.createRowContainer(this.pinnedLeftContainerComp,i,(function(t){return e.ePinnedLeftRow=t}))};t.prototype.createFullWidthRows=function(e,t){var i=this;this.fullWidthRow=true;this.fullWidthRowEmbedded=this.beans.gridOptionsWrapper.isEmbedFullWidthRows();if(this.fullWidthRowEmbedded){this.createFullWidthRowContainer(this.bodyContainerComp,null,null,e,t,(function(e){i.eFullWidthRowBody=e}),(function(e){i.fullWidthRowComponentBody=e}));this.createFullWidthRowContainer(this.pinnedLeftContainerComp,c.Column.PINNED_LEFT,"ag-cell-last-left-pinned",e,t,(function(e){i.eFullWidthRowLeft=e}),(function(e){i.fullWidthRowComponentLeft=e}));this.createFullWidthRowContainer(this.pinnedRightContainerComp,c.Column.PINNED_RIGHT,"ag-cell-first-right-pinned",e,t,(function(e){i.eFullWidthRowRight=e}),(function(e){i.fullWidthRowComponentRight=e}))}else{this.createFullWidthRowContainer(this.fullWidthContainerComp,null,null,e,t,(function(e){i.eFullWidthRow=e}),(function(e){i.fullWidthRowComponent=e}))}};t.prototype.setAnimateFlags=function(e){if(e){var t=a._.exists(this.rowNode.oldRowTop);this.slideRowIn=t;this.fadeRowIn=!t}else{this.slideRowIn=false;this.fadeRowIn=false}};t.prototype.isEditing=function(){return this.editingRow};t.prototype.stopRowEditing=function(e){this.stopEditing(e)};t.prototype.isFullWidth=function(){return this.fullWidthRow};t.prototype.addListeners=function(){this.addDestroyableEventListener(this.rowNode,l.RowNode.EVENT_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this));this.addDestroyableEventListener(this.rowNode,l.RowNode.EVENT_ROW_SELECTED,this.onRowSelected.bind(this));this.addDestroyableEventListener(this.rowNode,l.RowNode.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this));this.addDestroyableEventListener(this.rowNode,l.RowNode.EVENT_TOP_CHANGED,this.onTopChanged.bind(this));this.addDestroyableEventListener(this.rowNode,l.RowNode.EVENT_EXPANDED_CHANGED,this.onExpandedChanged.bind(this));this.addDestroyableEventListener(this.rowNode,l.RowNode.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this));this.addDestroyableEventListener(this.rowNode,l.RowNode.EVENT_CELL_CHANGED,this.onRowNodeCellChanged.bind(this));this.addDestroyableEventListener(this.rowNode,l.RowNode.EVENT_DRAGGING_CHANGED,this.onRowNodeDraggingChanged.bind(this));var e=this.beans.eventService;this.addDestroyableEventListener(e,d.Events.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this));this.addDestroyableEventListener(e,d.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this));this.addDestroyableEventListener(e,d.Events.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this));this.addDestroyableEventListener(e,d.Events.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this));this.addDestroyableEventListener(e,d.Events.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this));this.addDestroyableEventListener(e,d.Events.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this));this.addDestroyableEventListener(e,d.Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this))};t.prototype.onGridColumnsChanged=function(){var e=Object.keys(this.cellComps);this.removeRenderedCells(e)};t.prototype.onRowNodeDataChanged=function(e){this.forEachCellComp((function(t){return t.refreshCell({suppressFlash:!e.update,newData:!e.update})}));this.onRowSelected();this.postProcessCss()};t.prototype.onRowNodeCellChanged=function(e){this.postProcessCss()};t.prototype.postProcessCss=function(){this.postProcessStylesFromGridOptions();this.postProcessClassesFromGridOptions();this.postProcessRowClassRules();this.postProcessRowDragging()};t.prototype.onRowNodeDraggingChanged=function(){this.postProcessRowDragging()};t.prototype.postProcessRowDragging=function(){var e=this.rowNode.dragging;this.eAllRowContainers.forEach((function(t){return a._.addOrRemoveCssClass(t,"ag-row-dragging",e)}))};t.prototype.onExpandedChanged=function(){if(this.rowNode.group&&!this.rowNode.footer){var e=this.rowNode.expanded;this.eAllRowContainers.forEach((function(t){return a._.addOrRemoveCssClass(t,"ag-row-group-expanded",e)}));this.eAllRowContainers.forEach((function(t){return a._.addOrRemoveCssClass(t,"ag-row-group-contracted",!e)}))}};t.prototype.onDisplayedColumnsChanged=function(){if(!this.fullWidthRow){this.refreshCells()}};t.prototype.destroyFullWidthComponents=function(){if(this.fullWidthRowComponent){if(this.fullWidthRowComponent.destroy){this.fullWidthRowComponent.destroy()}this.fullWidthRowComponent=null}if(this.fullWidthRowComponentBody){if(this.fullWidthRowComponentBody.destroy){this.fullWidthRowComponentBody.destroy()}this.fullWidthRowComponent=null}if(this.fullWidthRowComponentLeft){if(this.fullWidthRowComponentLeft.destroy){this.fullWidthRowComponentLeft.destroy()}this.fullWidthRowComponentLeft=null}if(this.fullWidthRowComponentRight){if(this.fullWidthRowComponentRight.destroy){this.fullWidthRowComponentRight.destroy()}this.fullWidthRowComponent=null}};t.prototype.getContainerForCell=function(e){switch(e){case c.Column.PINNED_LEFT:return this.ePinnedLeftRow;case c.Column.PINNED_RIGHT:return this.ePinnedRightRow;default:return this.eBodyRow}};t.prototype.onVirtualColumnsChanged=function(){if(!this.fullWidthRow){this.refreshCells()}};t.prototype.onColumnResized=function(){if(!this.fullWidthRow){this.refreshCells()}};t.prototype.refreshCells=function(){if(this.beans.gridOptionsWrapper.isSuppressAnimationFrame()){this.refreshCellsInAnimationFrame()}else{if(this.columnRefreshPending){return}this.beans.taskQueue.addP1Task(this.refreshCellsInAnimationFrame.bind(this))}};t.prototype.refreshCellsInAnimationFrame=function(){if(!this.active){return}this.columnRefreshPending=false;var e=this.beans.columnController.getAllDisplayedCenterVirtualColumnsForRow(this.rowNode);var t=this.beans.columnController.getDisplayedLeftColumnsForRow(this.rowNode);var i=this.beans.columnController.getDisplayedRightColumnsForRow(this.rowNode);this.insertCellsIntoContainer(this.eBodyRow,e);this.insertCellsIntoContainer(this.ePinnedLeftRow,t);this.insertCellsIntoContainer(this.ePinnedRightRow,i);var n=Object.keys(this.cellComps);e.forEach((function(e){return a._.removeFromArray(n,e.getId())}));t.forEach((function(e){return a._.removeFromArray(n,e.getId())}));i.forEach((function(e){return a._.removeFromArray(n,e.getId())}));n=a._.filter(n,this.isCellEligibleToBeRemoved.bind(this));this.removeRenderedCells(n)};t.prototype.removeRenderedCells=function(e){var t=this;e.forEach((function(e){var i=t.cellComps[e];if(a._.missing(i)){return}i.detach();i.destroy();t.cellComps[e]=null}))};t.prototype.isCellEligibleToBeRemoved=function(e){var t=this.beans.columnController.getAllDisplayedColumns();var i=true;var n=false;var r=this.cellComps[e];if(!r){return i}if(this.isCellInWrongRow(r)){return i}var o=r.isEditing();var a=this.beans.focusedCellController.isCellFocused(r.getGridCell());var s=o||a;if(s){var l=r.getColumn();var u=t.indexOf(l)>=0;return u?n:i}else{return i}};t.prototype.ensureCellInCorrectContainer=function(e){var t=e.getGui();var i=e.getColumn();var n=i.getPinned();var r=this.getContainerForCell(n);var o=e.getParentRow();var a=o!==r;if(a){if(o){o.removeChild(t)}r.appendChild(t);e.setParentRow(r)}};t.prototype.isCellInWrongRow=function(e){var t=e.getColumn();var i=this.getContainerForCell(t.getPinned());var n=e.getParentRow();return n!==i};t.prototype.insertCellsIntoContainer=function(e,t){var i=this;if(!e){return}var n=[];var r=[];t.forEach((function(t){var o=t.getId();var a=i.cellComps[o];if(a){i.ensureCellInCorrectContainer(a)}else{i.createNewCell(t,e,n,r)}}));if(n.length>0){a._.appendHtml(e,n.join(""));this.callAfterRowAttachedOnCells(r,e)}};t.prototype.addDomData=function(e){var i=this.beans.gridOptionsWrapper;i.setDomData(e,t.DOM_DATA_KEY_RENDERED_ROW,this);this.addDestroyFunc((function(){i.setDomData(e,t.DOM_DATA_KEY_RENDERED_ROW,null)}))};t.prototype.createNewCell=function(e,t,i,n){var r=new s.CellComp(this.scope,this.beans,e,this.rowNode,this,false);var o=r.getCreateTemplate();i.push(o);n.push(r);this.cellComps[e.getId()]=r;r.setParentRow(t)};t.prototype.onMouseEvent=function(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break}};t.prototype.createRowEvent=function(e,t){return{type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),event:t}};t.prototype.createRowEventWithSource=function(e,t){var i=this.createRowEvent(e,t);i.source=this;return i};t.prototype.onRowDblClick=function(e){if(a._.isStopPropagationForAgGrid(e)){return}var t=this.createRowEventWithSource(d.Events.EVENT_ROW_DOUBLE_CLICKED,e);this.beans.eventService.dispatchEvent(t)};t.prototype.onRowClick=function(e){var t=a._.isStopPropagationForAgGrid(e);if(t){return}var i=this.createRowEventWithSource(d.Events.EVENT_ROW_CLICKED,e);this.beans.eventService.dispatchEvent(i);var n=e.ctrlKey||e.metaKey;var r=e.shiftKey;if(this.rowNode.group){return}if(this.rowNode.rowPinned){return}if(!this.beans.gridOptionsWrapper.isRowSelection()){return}if(this.beans.gridOptionsWrapper.isSuppressRowClickSelection()){return}var o=this.beans.gridOptionsWrapper.isRowMultiSelectWithClick();var s=this.beans.gridOptionsWrapper.isRowDeselection();if(this.rowNode.isSelected()){if(o){this.rowNode.setSelectedParams({newValue:false})}else if(n){if(s){this.rowNode.setSelectedParams({newValue:false})}}else{this.rowNode.setSelectedParams({newValue:true,clearSelection:true})}}else{var l=o?false:!n;this.rowNode.setSelectedParams({newValue:true,clearSelection:l,rangeSelect:r})}};t.prototype.createFullWidthRowContainer=function(e,t,i,n,r,o,a){var s=this;var l=this.createTemplate("",i);e.appendRowTemplate(l,(function(){var i=e.getRowElement(s.getCompId());var l=s.createFullWidthParams(i,t);var u=function(e){if(s.isAlive()){var t=e.getGui();i.appendChild(t);a(e)}else{if(e.destroy){e.destroy()}}};s.beans.componentResolver.createAgGridComponent(null,l,n,l,r).then(u);s.afterRowAttached(e,i);o(i);s.angular1Compile(i)}))};t.prototype.angular1Compile=function(e){if(this.scope){this.beans.$compile(e)(this.scope)}};t.prototype.createFullWidthParams=function(e,t){var i={fullWidth:true,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,$scope:this.scope,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this)};return i};t.prototype.getInitialRowClasses=function(e){var t=[];if(a._.exists(e)){t.push(e)}t.push("ag-row");t.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus");if(this.fadeRowIn){t.push("ag-opacity-zero")}if(this.rowIsEven){t.push("ag-row-even")}else{t.push("ag-row-odd")}if(this.rowNode.isSelected()){t.push("ag-row-selected")}if(this.rowNode.group){t.push("ag-row-group");t.push("ag-row-level-"+this.rowNode.level);if(this.rowNode.footer){t.push("ag-row-footer")}}else{if(this.rowNode.parent){t.push("ag-row-level-"+(this.rowNode.parent.level+1))}else{t.push("ag-row-level-0")}}if(this.rowNode.stub){t.push("ag-row-stub")}if(this.fullWidthRow){t.push("ag-full-width-row")}if(this.rowNode.group&&!this.rowNode.footer){t.push(this.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")}if(this.rowNode.dragging){t.push("ag-row-dragging")}a._.pushAll(t,this.processClassesFromGridOptions());a._.pushAll(t,this.preProcessRowClassRules());return t};t.prototype.preProcessRowClassRules=function(){var e=[];this.processRowClassRules((function(t){e.push(t)}),(function(e){}));return e};t.prototype.processRowClassRules=function(e,t){this.beans.stylingService.processClassRules(this.beans.gridOptionsWrapper.rowClassRules(),{value:undefined,colDef:undefined,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),$scope:this.scope,context:this.beans.gridOptionsWrapper.getContext()},e,t)};t.prototype.stopEditing=function(e){if(e===void 0){e=false}this.forEachCellComp((function(t){t.stopEditing(e)}));if(this.editingRow){if(!e){var t=this.createRowEvent(d.Events.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(t)}this.setEditingRow(false)}};t.prototype.setEditingRow=function(e){this.editingRow=e;this.eAllRowContainers.forEach((function(t){return a._.addOrRemoveCssClass(t,"ag-row-editing",e)}));var t=e?this.createRowEvent(d.Events.EVENT_ROW_EDITING_STARTED):this.createRowEvent(d.Events.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(t)};t.prototype.startRowEditing=function(e,t,i){if(e===void 0){e=null}if(t===void 0){t=null}if(i===void 0){i=null}if(this.editingRow){return}this.forEachCellComp((function(n){var r=n===i;if(r){n.startEditingIfEnabled(e,t,r)}else{n.startEditingIfEnabled(null,null,r)}}));this.setEditingRow(true)};t.prototype.forEachCellComp=function(e){a._.iterateObject(this.cellComps,(function(t,i){if(i){e(i)}}))};t.prototype.postProcessClassesFromGridOptions=function(){var e=this;var t=this.processClassesFromGridOptions();if(t){t.forEach((function(t){e.eAllRowContainers.forEach((function(e){return a._.addCssClass(e,t)}))}))}};t.prototype.postProcessRowClassRules=function(){var e=this;this.processRowClassRules((function(t){e.eAllRowContainers.forEach((function(e){return a._.addCssClass(e,t)}))}),(function(t){e.eAllRowContainers.forEach((function(e){return a._.removeCssClass(e,t)}))}))};t.prototype.processClassesFromGridOptions=function(){var e=[];var t=function(t){if(typeof t==="string"){e.push(t)}else if(Array.isArray(t)){t.forEach((function(t){return e.push(t)}))}};var i=this.beans.gridOptionsWrapper.getRowClass();if(i){if(typeof i==="function"){console.warn("ag-Grid: rowClass should not be a function, please use getRowClass instead");return}t(i)}var n=this.beans.gridOptionsWrapper.getRowClassFunc();if(n){var r={node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi()};var o=n(r);t(o)}return e};t.prototype.preProcessStylesFromGridOptions=function(){var e=this.processStylesFromGridOptions();return a._.cssStyleObjectToMarkup(e)};t.prototype.postProcessStylesFromGridOptions=function(){var e=this.processStylesFromGridOptions();this.eAllRowContainers.forEach((function(t){return a._.addStylesToElement(t,e)}))};t.prototype.processStylesFromGridOptions=function(){var e=this.beans.gridOptionsWrapper.getRowStyle();if(e&&typeof e==="function"){console.log("ag-Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}var t=this.beans.gridOptionsWrapper.getRowStyleFunc();var i;if(t){var n={data:this.rowNode.data,node:this.rowNode,api:this.beans.gridOptionsWrapper.getApi(),context:this.beans.gridOptionsWrapper.getContext(),$scope:this.scope};i=t(n)}return a._.assign({},e,i)};t.prototype.createCells=function(e){var t=this;var i=[];var n=[];e.forEach((function(e){var r=new s.CellComp(t.scope,t.beans,e,t.rowNode,t,false);var o=r.getCreateTemplate();i.push(o);n.push(r);t.cellComps[e.getId()]=r}));var r={template:i.join(""),cellComps:n};return r};t.prototype.onRowSelected=function(){var e=this.rowNode.isSelected();this.eAllRowContainers.forEach((function(t){return a._.addOrRemoveCssClass(t,"ag-row-selected",e)}))};t.prototype.callAfterRowAttachedOnCells=function(e,t){var i=this;e.forEach((function(e){e.setParentRow(t);e.afterAttached();if(i.editingRow){e.startEditingIfEnabled()}}))};t.prototype.afterRowAttached=function(e,t){var i=this;this.addDomData(t);this.removeSecondPassFuncs.push((function(){e.removeRowElement(t)}));this.removeFirstPassFuncs.push((function(){if(a._.exists(i.rowNode.rowTop)){var e=i.roundRowTopToBounds(i.rowNode.rowTop);i.setRowTop(e)}else{a._.addCssClass(t,"ag-opacity-zero")}}));this.eAllRowContainers.push(t);if(this.useAnimationFrameForCreate){this.beans.taskQueue.addP1Task(this.addHoverFunctionality.bind(this,t))}else{this.addHoverFunctionality(t)}};t.prototype.addHoverFunctionality=function(e){var t=this;if(!this.active){return}this.addDestroyableEventListener(e,"mouseenter",(function(){return t.rowNode.onMouseEnter()}));this.addDestroyableEventListener(e,"mouseleave",(function(){return t.rowNode.onMouseLeave()}));this.addDestroyableEventListener(this.rowNode,l.RowNode.EVENT_MOUSE_ENTER,(function(){if(!t.beans.gridOptionsWrapper.isSuppressRowHoverHighlight()){a._.addCssClass(e,"ag-row-hover")}}));this.addDestroyableEventListener(this.rowNode,l.RowNode.EVENT_MOUSE_LEAVE,(function(){a._.removeCssClass(e,"ag-row-hover")}))};t.prototype.roundRowTopToBounds=function(e){var t=this.beans.gridPanel.getVScrollPosition();var i=this.applyPaginationOffset(t.top,true)-100;var n=this.applyPaginationOffset(t.bottom,true)+100;if(e<i){return i}else if(e>n){return n}else{return e}};t.prototype.onRowHeightChanged=function(){if(a._.exists(this.rowNode.rowHeight)){var e=this.rowNode.rowHeight+"px";this.eAllRowContainers.forEach((function(t){return t.style.height=e}))}};t.prototype.addEventListener=function(t,i){if(t==="renderedRowRemoved"||t==="rowRemoved"){t=d.Events.EVENT_VIRTUAL_ROW_REMOVED;console.warn("ag-Grid: Since version 11, event renderedRowRemoved is now called "+d.Events.EVENT_VIRTUAL_ROW_REMOVED)}e.prototype.addEventListener.call(this,t,i)};t.prototype.removeEventListener=function(t,i){if(t==="renderedRowRemoved"||t==="rowRemoved"){t=d.Events.EVENT_VIRTUAL_ROW_REMOVED;console.warn("ag-Grid: Since version 11, event renderedRowRemoved and rowRemoved is now called "+d.Events.EVENT_VIRTUAL_ROW_REMOVED)}e.prototype.removeEventListener.call(this,t,i)};t.prototype.destroy=function(t){if(t===void 0){t=false}e.prototype.destroy.call(this);this.active=false;this.destroyFullWidthComponents();if(t){this.removeFirstPassFuncs.forEach((function(e){return e()}));this.removeSecondPassFuncs.push(this.destroyContainingCells.bind(this))}else{this.destroyContainingCells();var i=this.getAndClearDelayedDestroyFunctions();i.forEach((function(e){return e()}))}var n=this.createRowEvent(d.Events.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(n);this.beans.eventService.dispatchEvent(n)};t.prototype.destroyContainingCells=function(){this.forEachCellComp((function(e){return e.destroy()}));this.destroyFullWidthComponents()};t.prototype.getAndClearDelayedDestroyFunctions=function(){var e=this.removeSecondPassFuncs;this.removeSecondPassFuncs=[];return e};t.prototype.onCellFocusChanged=function(){var e=this.beans.focusedCellController.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);if(e!==this.rowFocused){this.eAllRowContainers.forEach((function(t){return a._.addOrRemoveCssClass(t,"ag-row-focus",e)}));this.eAllRowContainers.forEach((function(t){return a._.addOrRemoveCssClass(t,"ag-row-no-focus",!e)}));this.rowFocused=e}if(!e&&this.editingRow){this.stopEditing(false)}};t.prototype.onPaginationChanged=function(){var e=this.beans.paginationProxy.getCurrentPage();if(this.paginationPage!==e){this.paginationPage=e;this.onTopChanged()}};t.prototype.onTopChanged=function(){this.setRowTop(this.rowNode.rowTop)};t.prototype.applyPaginationOffset=function(e,t){if(t===void 0){t=false}if(this.rowNode.isRowPinned()){return e}else{var i=this.beans.paginationProxy.getPixelOffset();if(t){return e+i}else{return e-i}}};t.prototype.setRowTop=function(e){if(a._.exists(e)){var t=this.applyPaginationOffset(e);var i=this.beans.heightScaler.getRealPixelPosition(t);var n=i+"px";if(this.beans.gridOptionsWrapper.isSuppressRowTransform()){this.eAllRowContainers.forEach((function(e){return e.style.top=""+n}))}else{this.eAllRowContainers.forEach((function(e){return e.style.transform="translateY("+n+")"}))}}};t.prototype.getAndClearNextVMTurnFunctions=function(){var e=this.createSecondPassFuncs;this.createSecondPassFuncs=[];return e};t.prototype.getRowNode=function(){return this.rowNode};t.prototype.getRenderedCellForColumn=function(e){return this.cellComps[e.getColId()]};t.prototype.onRowIndexChanged=function(){this.onCellFocusChanged();this.updateRowIndexes()};t.prototype.updateRowIndexes=function(){var e=this.rowNode.getRowIndexString();var t=this.rowNode.rowIndex%2===0;var i=this.rowIsEven!==t;if(i){this.rowIsEven=t}this.eAllRowContainers.forEach((function(n){n.setAttribute("row-index",e);if(i){a._.addOrRemoveCssClass(n,"ag-row-even",t);a._.addOrRemoveCssClass(n,"ag-row-odd",!t)}}))};t.prototype.ensureDomOrder=function(){var e=this.getBodyRowElement();if(e){this.bodyContainerComp.ensureDomOrder(e)}var t=this.getPinnedLeftRowElement();if(t){this.pinnedLeftContainerComp.ensureDomOrder(t)}var i=this.getPinnedRightRowElement();if(i){this.pinnedRightContainerComp.ensureDomOrder(i)}var n=this.getFullWidthRowElement();if(n){this.fullWidthContainerComp.ensureDomOrder(n)}};t.prototype.getPinnedLeftRowElement=function(){return this.ePinnedLeftRow?this.ePinnedLeftRow:this.eFullWidthRowLeft};t.prototype.getPinnedRightRowElement=function(){return this.ePinnedRightRow?this.ePinnedRightRow:this.eFullWidthRowRight};t.prototype.getBodyRowElement=function(){return this.eBodyRow?this.eBodyRow:this.eFullWidthRowBody};t.prototype.getFullWidthRowElement=function(){return this.eFullWidthRow};t.DOM_DATA_KEY_RENDERED_ROW="renderedRow";t.FULL_WIDTH_CELL_RENDERER="fullWidthCellRenderer";t.GROUP_ROW_RENDERER="groupRowRenderer";t.GROUP_ROW_RENDERER_COMP_NAME="agGroupRowRenderer";t.LOADING_CELL_RENDERER="loadingCellRenderer";t.LOADING_CELL_RENDERER_COMP_NAME="agLoadingCellRenderer";t.DETAIL_CELL_RENDERER="detailCellRenderer";t.DETAIL_CELL_RENDERER_COMP_NAME="agDetailCellRenderer";return t}(p.Component);t.RowComp=m},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(8);var s=i(11);var l=i(0);var u=i(2);var c=i(1);var d;(function(e){e[e["MAIN"]=0]="MAIN";e[e["CONDITION"]=1]="CONDITION"})(d=t.FilterConditionType||(t.FilterConditionType={}));var f={loadingOoo:"Loading...",equals:"Equals",notEqual:"Not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"In range",lessThanOrEqual:"Less than or equals",greaterThanOrEqual:"Greater than or equals",filterOoo:"Filter...",contains:"Contains",notContains:"Not contains",startsWith:"Starts with",endsWith:"Ends with",searchOoo:"Search...",selectAll:"Select All",applyFilter:"Apply Filter",clearFilter:"Clear Filter"};var p=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.init=function(e){this.filterParams=e;this.defaultFilter=this.filterParams.defaultOption;if(this.filterParams.filterOptions&&!this.defaultFilter){if(this.filterParams.filterOptions.lastIndexOf(t.EQUALS)<0){this.defaultFilter=this.filterParams.filterOptions[0]}}this.customInit();this.filter=this.defaultFilter;this.filterCondition=this.defaultFilter;this.clearActive=e.clearButton===true;this.applyActive=e.applyButton===true||e.apply===true;this.newRowsActionKeep=e.newRowsAction==="keep";this.setTemplate(this.generateTemplate());c._.setVisible(this.eApplyButton,this.applyActive);if(this.applyActive){this.addDestroyableEventListener(this.eApplyButton,"click",this.filterParams.filterChangedCallback)}c._.setVisible(this.eClearButton,this.clearActive);if(this.clearActive){this.addDestroyableEventListener(this.eClearButton,"click",this.onClearButton.bind(this))}var i=this.applyActive||this.clearActive;c._.setVisible(this.eButtonsPanel,i);this.instantiate(this.context);this.initialiseFilterBodyUi(d.MAIN);this.refreshFilterBodyUi(d.MAIN)};t.prototype.onClearButton=function(){this.setModel(null);this.onFilterChanged()};t.prototype.floatingFilter=function(e){if(e!==""){var t=this.modelFromFloatingFilter(e);this.setModel(t)}else{this.resetState()}this.onFilterChanged()};t.prototype.onNewRowsLoaded=function(){if(!this.newRowsActionKeep){this.resetState()}};t.prototype.getModel=function(){if(this.isFilterActive()){if(!this.isFilterConditionActive(d.CONDITION)){return this.serialize(d.MAIN)}else{return{condition1:this.serialize(d.MAIN),condition2:this.serialize(d.CONDITION),operator:this.conditionValue}}}else{return null}};t.prototype.getNullableModel=function(){if(!this.isFilterConditionActive(d.CONDITION)){return this.serialize(d.MAIN)}else{return{condition1:this.serialize(d.MAIN),condition2:this.serialize(d.CONDITION),operator:this.conditionValue}}};t.prototype.setModel=function(e){if(e){if(!e.operator){this.resetState();this.parse(e,d.MAIN)}else{var t=e;this.parse(t.condition1,d.MAIN);this.parse(t.condition2,d.CONDITION);this.conditionValue=t.operator}}else{this.resetState()}this.redrawCondition();this.refreshFilterBodyUi(d.MAIN);this.refreshFilterBodyUi(d.CONDITION)};t.prototype.doOnFilterChanged=function(e){if(e===void 0){e=false}this.filterParams.filterModifiedCallback();var t=this.applyActive&&e;var i=!this.applyActive;var n=i||t;if(n){this.filterParams.filterChangedCallback()}this.refreshFilterBodyUi(d.MAIN);this.refreshFilterBodyUi(d.CONDITION);return n};t.prototype.onFilterChanged=function(e){if(e===void 0){e=false}this.doOnFilterChanged(e);this.redrawCondition();this.refreshFilterBodyUi(d.MAIN);this.refreshFilterBodyUi(d.CONDITION)};t.prototype.redrawCondition=function(){var e=this;var t=this.eFilterBodyWrapper.querySelector(".ag-filter-condition");if(!t&&this.isFilterActive()&&this.acceptsBooleanLogic()){this.eConditionWrapper=c._.loadTemplate(this.createConditionTemplate(d.CONDITION));this.eFilterBodyWrapper.appendChild(this.eConditionWrapper);this.wireQuerySelectors();var i=this.refreshOperatorUi(),n=i.andButton,r=i.orButton;this.addDestroyableEventListener(n,"change",(function(){e.conditionValue="AND";e.onFilterChanged()}));this.addDestroyableEventListener(r,"change",(function(){e.conditionValue="OR";e.onFilterChanged()}));this.initialiseFilterBodyUi(d.CONDITION)}else if(t&&!this.isFilterActive()){this.eFilterBodyWrapper.removeChild(this.eConditionWrapper);this.eConditionWrapper=null}else{this.refreshFilterBodyUi(d.CONDITION);if(this.eConditionWrapper){this.refreshOperatorUi()}}};t.prototype.refreshOperatorUi=function(){var e=this.eConditionWrapper.querySelector(".and");var t=this.eConditionWrapper.querySelector(".or");this.conditionValue=this.conditionValue==null?"AND":this.conditionValue;e.checked=this.conditionValue==="AND";t.checked=this.conditionValue==="OR";return{andButton:e,orButton:t}};t.prototype.onFloatingFilterChanged=function(e){var t=e;if(t==null){this.setModel(null)}else if(!this.isFilterConditionActive(d.CONDITION)){this.setModel(t?t.model:null)}else{var i={condition1:t.model,condition2:this.serialize(d.CONDITION),operator:this.conditionValue};this.setModel(i)}return this.doOnFilterChanged(t?t.apply:false)};t.prototype.generateFilterHeader=function(e){return""};t.prototype.generateTemplate=function(){var e=this.translate.bind(this);var t=this.createConditionBody(d.MAIN);var i=!this.acceptsBooleanLogic()?t:this.wrapCondition(t);return"<div>\n                    <div class='ag-filter-body-wrapper'>"+i+'</div>\n                    <div class="ag-filter-apply-panel" id="applyPanel">\n                        <button type="button" id="clearButton">'+e("clearFilter")+'</button>\n                        <button type="button" id="applyButton">'+e("applyFilter")+"</button>\n                    </div>\n                </div>"};t.prototype.acceptsBooleanLogic=function(){return false};t.prototype.wrapCondition=function(e){if(!this.isFilterActive())return e;return""+e+this.createConditionTemplate(d.CONDITION)};t.prototype.createConditionTemplate=function(e){return'<div class="ag-filter-condition">\n            <input id="andId" type="radio" class="and" name="booleanLogic" value="AND" checked="checked" /><label style="display: inline" for="andId">AND</label>\n            <input id="orId" type="radio" class="or" name="booleanLogic" value="OR" /><label style="display: inline" for="orId">OR</label>\n            <div>'+this.createConditionBody(e)+"</div>\n        </div>"};t.prototype.createConditionBody=function(e){var t=this.bodyTemplate(e);return this.generateFilterHeader(e)+t};t.prototype.translate=function(e){var t=this.gridOptionsWrapper.getLocaleTextFunc();return t(e,f[e])};t.prototype.getDebounceMs=function(e){if(e.applyButton&&e.debounceMs){console.warn("ag-Grid: debounceMs is ignored when applyButton = true");return 0}return e.debounceMs!=null?e.debounceMs:500};t.EQUALS="equals";t.NOT_EQUAL="notEqual";t.LESS_THAN="lessThan";t.LESS_THAN_OR_EQUAL="lessThanOrEqual";t.GREATER_THAN="greaterThan";t.GREATER_THAN_OR_EQUAL="greaterThanOrEqual";t.IN_RANGE="inRange";t.CONTAINS="contains";t.NOT_CONTAINS="notContains";t.STARTS_WITH="startsWith";t.ENDS_WITH="endsWith";r([s.QuerySelector("#applyPanel"),o("design:type",HTMLElement)],t.prototype,"eButtonsPanel",void 0);r([s.QuerySelector(".ag-filter-body-wrapper"),o("design:type",HTMLElement)],t.prototype,"eFilterBodyWrapper",void 0);r([s.QuerySelector("#applyButton"),o("design:type",HTMLElement)],t.prototype,"eApplyButton",void 0);r([s.QuerySelector("#clearButton"),o("design:type",HTMLElement)],t.prototype,"eClearButton",void 0);r([l.Autowired("context"),o("design:type",l.Context)],t.prototype,"context",void 0);r([l.Autowired("gridOptionsWrapper"),o("design:type",u.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);return t}(a.Component);t.BaseFilter=p;var h=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.doesFilterPass=function(e){var t=this.individualFilterPasses(e,d.MAIN);if(this.eTypeConditionSelector==null){return t}var i=this.individualFilterPasses(e,d.CONDITION);return this.conditionValue==="AND"?t&&i:t||i};t.prototype.init=function(t){e.prototype.init.call(this,t);this.suppressAndOrCondition=t.suppressAndOrCondition};t.prototype.customInit=function(){if(!this.defaultFilter){this.defaultFilter=this.getDefaultType()}};t.prototype.acceptsBooleanLogic=function(){return this.suppressAndOrCondition!==true};t.prototype.generateFilterHeader=function(e){var t=this;var i=this.getApplicableFilterTypes();var n=this.filterParams.filterOptions;var r=n?n:i;var o=r.map((function(e){var i=t.translate(e);return'<option value="'+e+'">'+i+"</option>"}));var a=o.length==1?"disabled":"";var s=e==d.MAIN?"filterType":"filterConditionType";return o.length<=0?"":'<div>\n                <select class="ag-filter-select" id="'+s+'" '+a+">\n                    "+o.join("")+"\n                </select>\n            </div>"};t.prototype.initialiseFilterBodyUi=function(e){var t=this;if(e===d.MAIN){this.setFilterType(this.filter,e);this.addDestroyableEventListener(this.eTypeSelector,"change",(function(){return t.onFilterTypeChanged(e)}))}else{this.setFilterType(this.filterCondition,e);this.addDestroyableEventListener(this.eTypeConditionSelector,"change",(function(){return t.onFilterTypeChanged(e)}))}};t.prototype.onFilterTypeChanged=function(e){if(e===d.MAIN){this.filter=this.eTypeSelector.value}else{this.filterCondition=this.eTypeConditionSelector.value}this.refreshFilterBodyUi(e);if(this.isFilterActive()){this.onFilterChanged()}};t.prototype.isFilterActive=function(){var e=this.filterValues(d.MAIN);if(this.filter===p.IN_RANGE){var t=e;return t[0]!=null&&t[1]!=null}else{return e!=null}};t.prototype.setFilterType=function(e,t){if(t===d.MAIN){this.filter=e;if(!this.eTypeSelector)return;this.eTypeSelector.value=e}else{this.filterCondition=e;if(!this.eTypeConditionSelector)return;this.eTypeConditionSelector.value=e}};t.prototype.isFilterConditionActive=function(e){return this.filterValues(e)!=null};r([s.QuerySelector("#filterType"),o("design:type",HTMLSelectElement)],t.prototype,"eTypeSelector",void 0);r([s.QuerySelector("#filterConditionType"),o("design:type",HTMLSelectElement)],t.prototype,"eTypeConditionSelector",void 0);return t}(p);t.ComparableBaseFilter=h;var g=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.nullComparator=function(e){var t=this;return function(i,n){if(n==null){var r=t.translateNull(e);if(t.filter===p.EQUALS){return r?0:1}if(t.filter===p.GREATER_THAN){return r?1:-1}if(t.filter===p.GREATER_THAN_OR_EQUAL){return r?1:-1}if(t.filter===p.LESS_THAN_OR_EQUAL){return r?-1:1}if(t.filter===p.LESS_THAN){return r?-1:1}if(t.filter===p.NOT_EQUAL){return r?1:0}}var o=t.comparator();return o(i,n)}};t.prototype.getDefaultType=function(){return p.EQUALS};t.prototype.translateNull=function(e){var i=e.indexOf("greater")>-1?"greaterThan":e.indexOf("lessThan")>-1?"lessThan":"equals";if(this.filterParams.nullComparator&&this.filterParams.nullComparator[i]){return this.filterParams.nullComparator[i]}return t.DEFAULT_NULL_COMPARATOR[i]};t.prototype.individualFilterPasses=function(e,t){return this.doIndividualFilterPasses(e,t,t===d.MAIN?this.filter:this.filterCondition)};t.prototype.doIndividualFilterPasses=function(e,t,i){var n=this.filterParams.valueGetter(e.node);var r=this.nullComparator(i);var o=this.filterValues(t);var a=Array.isArray(o)?o[0]:o;if(a==null){return t===d.MAIN?true:this.conditionValue==="AND"}var s=r(a,n);if(i===p.EQUALS){return s===0}if(i===p.GREATER_THAN){return s>0}if(i===p.GREATER_THAN_OR_EQUAL){return s>=0}if(i===p.LESS_THAN_OR_EQUAL){return s<=0}if(i===p.LESS_THAN){return s<0}if(i===p.NOT_EQUAL){return s!=0}var l=r(o[1],n);if(i===p.IN_RANGE){if(!this.filterParams.inRangeInclusive){return s>0&&l<0}else{return s>=0&&l<=0}}throw new Error("Unexpected type of filter!: "+i)};t.DEFAULT_NULL_COMPARATOR={equals:false,lessThan:false,greaterThan:false};return t}(h);t.ScalarBaseFilter=g},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:true});var r=i(1);var o=i(10);var a=i(13);var s=function(e){n(t,e);function t(t,i,n,r){var o=e.call(this)||this;o.columnOrGroup=t;o.eCell=i;o.colsSpanning=r;o.beans=n;return o}t.prototype.setColsSpanning=function(e){this.colsSpanning=e;this.onLeftChanged()};t.prototype.getColumnOrGroup=function(){if(this.beans.gridOptionsWrapper.isEnableRtl()&&this.colsSpanning){return this.colsSpanning[this.colsSpanning.length-1]}else{return this.columnOrGroup}};t.prototype.init=function(){this.addDestroyableEventListener(this.columnOrGroup,o.Column.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this));this.setLeftFirstTime()};t.prototype.setLeftFirstTime=function(){var e=this.beans.gridOptionsWrapper.isSuppressColumnMoveAnimation();var t=r.Utils.exists(this.columnOrGroup.getOldLeft());var i=this.beans.columnAnimationService.isActive()&&t&&!e;if(i){this.animateInLeft()}else{this.onLeftChanged()}};t.prototype.animateInLeft=function(){var e=this;var t=this.getColumnOrGroup().getLeft();var i=this.getColumnOrGroup().getOldLeft();this.setLeft(i);this.actualLeft=t;this.beans.columnAnimationService.executeNextVMTurn((function(){if(e.actualLeft===t){e.setLeft(t)}}))};t.prototype.onLeftChanged=function(){this.actualLeft=this.getColumnOrGroup().getLeft();this.setLeft(this.actualLeft)};t.prototype.setLeft=function(e){if(r.Utils.exists(e)){this.eCell.style.left=e+"px"}};return t}(a.BeanStub);t.SetLeftFeature=s},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(2);var s=function(){function e(){this.executeNextFuncs=[];this.executeLaterFuncs=[];this.active=false;this.animationThreadCount=0}e.prototype.registerGridComp=function(e){this.gridPanel=e};e.prototype.isActive=function(){return this.active};e.prototype.start=function(){if(this.active){return}if(this.gridOptionsWrapper.isSuppressColumnMoveAnimation()){return}if(this.gridOptionsWrapper.isEnableRtl()){return}this.ensureAnimationCssClassPresent();this.active=true};e.prototype.finish=function(){if(!this.active){return}this.flush();this.active=false};e.prototype.executeNextVMTurn=function(e){if(this.active){this.executeNextFuncs.push(e)}else{e()}};e.prototype.executeLaterVMTurn=function(e){if(this.active){this.executeLaterFuncs.push(e)}else{e()}};e.prototype.ensureAnimationCssClassPresent=function(){var e=this;this.animationThreadCount++;var t=this.animationThreadCount;this.gridPanel.setColumnMovingCss(true);this.executeLaterFuncs.push((function(){if(e.animationThreadCount===t){e.gridPanel.setColumnMovingCss(false)}}))};e.prototype.flush=function(){var e=this.executeNextFuncs;this.executeNextFuncs=[];var t=this.executeLaterFuncs;this.executeLaterFuncs=[];if(e.length===0&&t.length===0){return}setTimeout((function(){return e.forEach((function(e){return e()}))}),0);setTimeout((function(){return t.forEach((function(e){return e()}))}),300)};n([o.Autowired("gridOptionsWrapper"),r("design:type",a.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);e=n([o.Bean("columnAnimationService")],e);return e}();t.ColumnAnimationService=s},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(69);var s=i(2);var l=i(27);var u=function(){function e(){}e.prototype.init=function(){};e.prototype.addCellEditor=function(e,t){console.warn("ag-grid: since v13.3.1 this method is not supported anymore. If you want to register your own editor check the docs: https://www.ag-grid.com/javascript-grid-cell-editor/")};e.prototype.createCellEditor=function(e,t){var i=this;var n=this.componentResolver.createAgGridComponent(e,t,"cellEditor",{api:t.api,columnApi:t.columnApi,node:t.node,data:t.node.data,rowIndex:t.rowIndex,column:t.column,colDef:t.column.getColDef()},"agCellEditor");return n.map((function(e){var n=e.isPopup&&e.isPopup();if(!n){return e}if(i.gridOptionsWrapper.isFullRowEdit()){console.warn("ag-Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both "+"- either turn off fullRowEdit, or stop using popup editors.")}var r=new a.PopupEditorWrapper(e);i.context.wireBean(r);r.init(t);return r}))};n([o.Autowired("context"),r("design:type",o.Context)],e.prototype,"context",void 0);n([o.Autowired("componentResolver"),r("design:type",l.ComponentResolver)],e.prototype,"componentResolver",void 0);n([o.Autowired("gridOptionsWrapper"),r("design:type",s.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);e=n([o.Bean("cellEditorFactory")],e);return e}();t.CellEditorFactory=u},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(1);var s=i(2);var l=i(3);var u=i(19);var c=i(70);var d=i(71);var f=i(72);var p=function(){function e(){this.cellRendererMap={}}t=e;e.prototype.init=function(){this.cellRendererMap[t.ANIMATE_SLIDE]=c.AnimateSlideCellRenderer;this.cellRendererMap[t.ANIMATE_SHOW_CHANGE]=d.AnimateShowChangeCellRenderer;this.cellRendererMap[t.GROUP]=f.GroupCellRenderer};e.prototype.addCellRenderer=function(e,t){this.cellRendererMap[e]=t};e.prototype.getCellRenderer=function(e){var t=this.cellRendererMap[e];if(a.Utils.missing(t)){console.warn("ag-Grid: unable to find cellRenderer for key "+e);return null}return t};e.ANIMATE_SLIDE="animateSlide";e.ANIMATE_SHOW_CHANGE="animateShowChange";e.GROUP="group";n([o.Autowired("gridOptionsWrapper"),r("design:type",s.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.Autowired("expressionService"),r("design:type",u.ExpressionService)],e.prototype,"expressionService",void 0);n([o.Autowired("eventService"),r("design:type",l.EventService)],e.prototype,"eventService",void 0);n([o.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);e=t=n([o.Bean("cellRendererFactory")],e);return e;var t}();t.CellRendererFactory=p},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(21);var s=i(27);var l=i(1);var u=i(2);var c=function(){function e(){}e.prototype.useCellRenderer=function(e,t,i){var n=this;var r=this.componentRecipes.newCellRenderer(e,i);if(r!=null){r.then((function(e){if(e==null){t.innerText=i.valueFormatted!=null?i.valueFormatted:i.value}else{n.bindToHtml(r,t)}}))}else{t.innerText=i.valueFormatted!=null?i.valueFormatted:i.value}return r};e.prototype.useFilterCellRenderer=function(e,t,i){var n=this.componentRecipes.newCellRenderer(e.filterParams,i);if(n!=null){this.bindToHtml(n,t)}else{if(i.valueFormatted==null&&i.value==null){var r=this.gridOptionsWrapper.getLocaleTextFunc();t.innerText="("+r("blanks","Blanks")+")"}else{t.innerText=i.valueFormatted!=null?i.valueFormatted:i.value}}return n};e.prototype.useRichSelectCellRenderer=function(e,t,i){var n=this.componentRecipes.newCellRenderer(e.cellEditorParams,i);if(n!=null){this.bindToHtml(n,t)}else{t.innerText=i.valueFormatted!=null?i.valueFormatted:i.value}return n};e.prototype.useInnerCellRenderer=function(e,t,i,n){var r=this;var o=null;var a=this.componentResolver.getComponentToUse(e,"innerRenderer",null);if(a&&a.component!=null&&a.source!=s.ComponentSource.DEFAULT){o=this.componentRecipes.newInnerCellRenderer(e,n)}else{var u=this.componentResolver.getComponentToUse(t,"cellRenderer",null);if(u&&u.source!=s.ComponentSource.DEFAULT){o=this.componentRecipes.newCellRenderer(t,n)}else if(u&&u.source==s.ComponentSource.DEFAULT&&l._.get(t,"cellRendererParams.innerRenderer",null)){o=this.componentRecipes.newInnerCellRenderer(t.cellRendererParams,n)}else{o=this.componentRecipes.newCellRenderer({},n)}}if(o!=null){o.then((function(e){if(e==null){i.innerText=n.valueFormatted!=null?n.valueFormatted:n.value;return}r.bindToHtml(o,i)}))}else{i.innerText=n.valueFormatted!=null?n.valueFormatted:n.value}return o};e.prototype.useFullWidthGroupRowInnerCellRenderer=function(e,t){var i=this.componentRecipes.newFullWidthGroupRowInnerCellRenderer(t);if(i!=null){this.bindToHtml(i,e)}else{e.innerText=t.valueFormatted!=null?t.valueFormatted:t.value}return i};e.prototype.bindToHtml=function(e,t){e.then((function(e){var i=e.getGui();if(i!=null){if(typeof i=="object"){t.appendChild(i)}else{t.innerHTML=i}}}));return e};n([o.Autowired("componentRecipes"),r("design:type",a.ComponentRecipes)],e.prototype,"componentRecipes",void 0);n([o.Autowired("componentResolver"),r("design:type",s.ComponentResolver)],e.prototype,"componentResolver",void 0);n([o.Autowired("gridOptionsWrapper"),r("design:type",u.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);e=n([o.Bean("cellRendererService")],e);return e}();t.CellRendererService=c},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(13);var s=i(0);var l=i(3);var u=i(25);var c=i(1);var d=function(e){n(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.scrollY=0;t.uiBodyHeight=0;return t}t.prototype.postConstruct=function(){this.addDestroyableEventListener(this.eventService,u.Events.EVENT_BODY_HEIGHT_CHANGED,this.update.bind(this));this.scrollBarWidth=c._.getScrollbarWidth();this.maxDivHeight=c._.getMaxDivHeight()};t.prototype.registerGridComp=function(e){this.gridPanel=e};t.prototype.isScaling=function(){return this.scaling};t.prototype.getOffset=function(){return this.offset};t.prototype.update=function(){if(!this.scaling){return}var e=this.gridPanel.getVScrollPosition().top;var t=this.getUiBodyHeight();var i=e!==this.scrollY||t!==this.uiBodyHeight;if(i){this.scrollY=e;this.uiBodyHeight=t;this.calculateOffset()}};t.prototype.calculateOffset=function(){this.uiContainerHeight=this.maxDivHeight;this.pixelsToShave=this.modelHeight-this.uiContainerHeight;this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;var e=this.scrollY/this.maxScrollY;this.setOffset(e*this.pixelsToShave)};t.prototype.clearOffset=function(){this.uiContainerHeight=this.modelHeight;this.pixelsToShave=0;this.setOffset(0)};t.prototype.setOffset=function(e){var t=typeof e==="number"?Math.floor(e):null;if(this.offset!==t){this.offset=t;this.eventService.dispatchEvent({type:u.Events.EVENT_HEIGHT_SCALE_CHANGED})}};t.prototype.setModelHeight=function(e){this.modelHeight=e;this.scaling=this.maxDivHeight>0&&e>this.maxDivHeight;if(this.scaling){this.calculateOffset()}else{this.clearOffset()}};t.prototype.getUiContainerHeight=function(){return this.uiContainerHeight};t.prototype.getRealPixelPosition=function(e){var t=e-this.offset;return t};t.prototype.getUiBodyHeight=function(){var e=this.gridPanel.getVScrollPosition();var t=e.bottom-e.top;if(this.gridPanel.isHorizontalScrollShowing()){t-=this.scrollBarWidth}return t};t.prototype.getScrollPositionForPixel=function(e){if(this.pixelsToShave<=0){return e}else{var t=this.modelHeight-this.getUiBodyHeight();var i=e/t;var n=this.maxScrollY*i;return n}};r([s.Autowired("eventService"),o("design:type",l.EventService)],t.prototype,"eventService",void 0);r([s.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"postConstruct",null);t=r([s.Bean("heightScaler")],t);return t}(a.BeanStub);t.HeightScaler=d},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var o=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:true});var a=i(2);var s=i(4);var l=i(3);var u=i(12);var c=i(5);var d=i(0);var f=i(0);var p=i(0);var h=i(0);var g=function(){function e(){this.consuming=false}e.prototype.setBeans=function(e){this.logger=e.create("AlignedGridsService")};e.prototype.registerGridComp=function(e){this.gridPanel=e};e.prototype.init=function(){this.eventService.addEventListener(c.Events.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this));this.eventService.addEventListener(c.Events.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this));this.eventService.addEventListener(c.Events.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this));this.eventService.addEventListener(c.Events.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this));this.eventService.addEventListener(c.Events.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this));this.eventService.addEventListener(c.Events.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))};e.prototype.fireEvent=function(e){if(this.consuming){return}var t=this.gridOptionsWrapper.getAlignedGrids();if(t){t.forEach((function(t){if(t.api){var i=t.api.__getAlignedGridService();e(i)}}))}};e.prototype.onEvent=function(e){this.consuming=true;e();this.consuming=false};e.prototype.fireColumnEvent=function(e){this.fireEvent((function(t){t.onColumnEvent(e)}))};e.prototype.fireScrollEvent=function(e){if(e.direction!=="horizontal"){return}this.fireEvent((function(t){t.onScrollEvent(e)}))};e.prototype.onScrollEvent=function(e){var t=this;this.onEvent((function(){t.gridPanel.setHorizontalScrollPosition(e.left)}))};e.prototype.getMasterColumns=function(e){var t=[];if(e.columns){e.columns.forEach((function(e){t.push(e)}))}else if(e.column){t.push(e.column)}return t};e.prototype.getColumnIds=function(e){var t=[];if(e.columns){e.columns.forEach((function(e){t.push(e.getColId())}))}else if(e.columns){t.push(e.column.getColId())}return t};e.prototype.onColumnEvent=function(e){var t=this;this.onEvent((function(){switch(e.type){case c.Events.EVENT_COLUMN_MOVED:case c.Events.EVENT_COLUMN_VISIBLE:case c.Events.EVENT_COLUMN_PINNED:case c.Events.EVENT_COLUMN_RESIZED:var i=e;t.processColumnEvent(i);break;case c.Events.EVENT_COLUMN_GROUP_OPENED:var n=e;t.processGroupOpenedEvent(n);break;case c.Events.EVENT_COLUMN_PIVOT_CHANGED:console.warn("ag-Grid: pivoting is not supported with aligned grids. "+"You can only use one of these features at a time in a grid.");break}}))};e.prototype.processGroupOpenedEvent=function(e){var t=e.columnGroup;var i;if(t){var n=t.getGroupId();i=this.columnController.getOriginalColumnGroup(n)}if(t&&!i){return}this.logger.log("onColumnEvent-> processing "+event+" expanded = "+t.isExpanded());this.columnController.setColumnGroupOpened(i,t.isExpanded(),"alignedGridChanged")};e.prototype.processColumnEvent=function(e){var t=this;var i=e.column;var n;if(i){n=this.columnController.getPrimaryColumn(i.getColId())}if(i&&!n){return}var r=this.getColumnIds(e);var o=this.getMasterColumns(e);switch(e.type){case c.Events.EVENT_COLUMN_MOVED:var a=e;this.logger.log("onColumnEvent-> processing "+e.type+" toIndex = "+a.toIndex);this.columnController.moveColumns(r,a.toIndex,"alignedGridChanged");break;case c.Events.EVENT_COLUMN_VISIBLE:var s=e;this.logger.log("onColumnEvent-> processing "+e.type+" visible = "+s.visible);this.columnController.setColumnsVisible(r,s.visible,"alignedGridChanged");break;case c.Events.EVENT_COLUMN_PINNED:var l=e;this.logger.log("onColumnEvent-> processing "+e.type+" pinned = "+l.pinned);this.columnController.setColumnsPinned(r,l.pinned,"alignedGridChanged");break;case c.Events.EVENT_COLUMN_RESIZED:var u=e;o.forEach((function(i){t.logger.log("onColumnEvent-> processing "+e.type+" actualWidth = "+i.getActualWidth());t.columnController.setColumnWidth(i.getColId(),i.getActualWidth(),false,u.finished,"alignedGridChanged")}));break}};n([p.Autowired("gridOptionsWrapper"),r("design:type",a.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([p.Autowired("columnController"),r("design:type",s.ColumnController)],e.prototype,"columnController",void 0);n([p.Autowired("eventService"),r("design:type",l.EventService)],e.prototype,"eventService",void 0);n([o(0,f.Qualifier("loggerFactory")),r("design:type",Function),r("design:paramtypes",[u.LoggerFactory]),r("design:returntype",void 0)],e.prototype,"setBeans",null);n([h.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);e=n([d.Bean("alignedGridsService")],e);return e}();t.AlignedGridsService=g},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(2);var a=i(0);var s=i(40);var l=function(){function e(){}e.prototype.addResizeBar=function(e){var t=this;var i={dragStartPixels:0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e)};this.dragService.addDragSource(i,true);var n=function(){return t.dragService.removeDragSource(i)};return n};e.prototype.onDragStart=function(e,t){this.draggingStarted=true;this.dragStartX=t.clientX;this.setResizeIcons();var i=t instanceof MouseEvent?t.shiftKey===true:false;e.onResizeStart(i)};e.prototype.setResizeIcons=function(){this.oldBodyCursor=this.eGridDiv.style.cursor;this.oldMsUserSelect=this.eGridDiv.style.msUserSelect;this.oldWebkitUserSelect=this.eGridDiv.style.webkitUserSelect;this.eGridDiv.style.cursor="col-resize";this.eGridDiv.style.msUserSelect="none";this.eGridDiv.style.webkitUserSelect="none"};e.prototype.onDragStop=function(e,t){e.onResizeEnd(this.resizeAmount);this.resetIcons()};e.prototype.resetIcons=function(){this.eGridDiv.style.cursor=this.oldBodyCursor;this.eGridDiv.style.msUserSelect=this.oldMsUserSelect;this.eGridDiv.style.webkitUserSelect=this.oldWebkitUserSelect};e.prototype.onDragging=function(e,t){this.resizeAmount=t.clientX-this.dragStartX;e.onResizing(this.resizeAmount)};n([a.Autowired("gridOptionsWrapper"),r("design:type",o.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([a.Autowired("dragService"),r("design:type",s.DragService)],e.prototype,"dragService",void 0);n([a.Autowired("eGridDiv"),r("design:type",HTMLElement)],e.prototype,"eGridDiv",void 0);e=n([a.Bean("horizontalResizeService")],e);return e}();t.HorizontalResizeService=l},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(8);var s=i(11);var l=i(1);var u=i(0);var c=i(2);var d=function(e){n(t,e);function t(){var t=e.call(this)||this;t.selected=false;t.readOnly=false;t.passive=false;return t}t.prototype.preConstruct=function(){this.setTemplate(t.TEMPLATE)};t.prototype.postConstruct=function(){this.loadIcons();this.updateIcons();if(this.props.label){this.eLabel.innerText=this.props.label}};t.prototype.loadIcons=function(){l.Utils.removeAllChildren(this.eChecked);l.Utils.removeAllChildren(this.eUnchecked);l.Utils.removeAllChildren(this.eIndeterminate);if(this.readOnly){this.eChecked.appendChild(l.Utils.createIconNoSpan("checkboxCheckedReadOnly",this.gridOptionsWrapper,null));this.eUnchecked.appendChild(l.Utils.createIconNoSpan("checkboxUncheckedReadOnly",this.gridOptionsWrapper,null));this.eIndeterminate.appendChild(l.Utils.createIconNoSpan("checkboxIndeterminateReadOnly",this.gridOptionsWrapper,null))}else{this.eChecked.appendChild(l.Utils.createIconNoSpan("checkboxChecked",this.gridOptionsWrapper,null));this.eUnchecked.appendChild(l.Utils.createIconNoSpan("checkboxUnchecked",this.gridOptionsWrapper,null));this.eIndeterminate.appendChild(l.Utils.createIconNoSpan("checkboxIndeterminate",this.gridOptionsWrapper,null))}};t.prototype.onClick=function(e){l.Utils.addAgGridEventPath(e);if(!this.readOnly){this.toggle()}};t.prototype.getNextValue=function(){if(this.selected===undefined){return true}else{return!this.selected}};t.prototype.setPassive=function(e){this.passive=e};t.prototype.setReadOnly=function(e){this.readOnly=e;this.loadIcons()};t.prototype.isReadOnly=function(){return this.readOnly};t.prototype.isSelected=function(){return this.selected};t.prototype.toggle=function(){var e=this.getNextValue();if(this.passive){var i={type:t.EVENT_CHANGED,selected:e};this.dispatchEvent(i)}else{this.setSelected(e)}};t.prototype.setSelected=function(e){if(this.selected===e){return}if(e===true){this.selected=true}else if(e===false){this.selected=false}else{this.selected=undefined}this.updateIcons();var i={type:t.EVENT_CHANGED,selected:this.selected};this.dispatchEvent(i)};t.prototype.updateIcons=function(){l.Utils.setVisible(this.eChecked,this.selected===true);l.Utils.setVisible(this.eUnchecked,this.selected===false);l.Utils.setVisible(this.eIndeterminate,this.selected===undefined)};t.EVENT_CHANGED="change";t.TEMPLATE='<span class="ag-checkbox" role="presentation">'+'  <span class="ag-checkbox-checked" role="presentation"></span>'+'  <span class="ag-checkbox-unchecked" role="presentation"></span>'+'  <span class="ag-checkbox-indeterminate" role="presentation"></span>'+'  <span class="ag-checkbox-label" role="presentation"></span>'+"</span>";r([u.Autowired("gridOptionsWrapper"),o("design:type",c.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([s.QuerySelector(".ag-checkbox-checked"),o("design:type",HTMLElement)],t.prototype,"eChecked",void 0);r([s.QuerySelector(".ag-checkbox-unchecked"),o("design:type",HTMLElement)],t.prototype,"eUnchecked",void 0);r([s.QuerySelector(".ag-checkbox-indeterminate"),o("design:type",HTMLElement)],t.prototype,"eIndeterminate",void 0);r([s.QuerySelector(".ag-checkbox-label"),o("design:type",HTMLElement)],t.prototype,"eLabel",void 0);r([u.PreConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"preConstruct",null);r([u.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"postConstruct",null);r([s.Listener("click"),o("design:type",Function),o("design:paramtypes",[MouseEvent]),o("design:returntype",void 0)],t.prototype,"onClick",null);return t}(a.Component);t.AgCheckbox=d},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:true});var r=i(1);var o=i(14);var a=i(13);var s=function(e){n(t,e);function t(i,n){var r=e.call(this)||this;r.version=0;r.state=t.STATE_DIRTY;r.rowNodeCacheParams=n;r.blockNumber=i;r.startRow=i*n.blockSize;r.endRow=r.startRow+n.blockSize;return r}t.prototype.isAnyNodeOpen=function(e){var t=false;this.forEachNodeCallback((function(e){if(e.expanded){t=true}}),e);return t};t.prototype.forEachNodeCallback=function(e,t){for(var i=this.startRow;i<this.endRow;i++){if(i<t){var n=this.getRowUsingLocalIndex(i);e(n,i)}}};t.prototype.forEachNode=function(e,t,i,n){this.forEachNodeCallback((function(i){e(i,t.next());if(n&&i.childrenCache){i.childrenCache.forEachNodeDeep(e,t)}}),i)};t.prototype.forEachNodeDeep=function(e,t,i){this.forEachNode(e,t,i,true)};t.prototype.forEachNodeShallow=function(e,t,i){this.forEachNode(e,t,i,false)};t.prototype.getVersion=function(){return this.version};t.prototype.getLastAccessed=function(){return this.lastAccessed};t.prototype.getRowUsingLocalIndex=function(e,t){if(t===void 0){t=false}if(!t){this.lastAccessed=this.rowNodeCacheParams.lastAccessedSequence.next()}var i=e-this.startRow;return this.rowNodes[i]};t.prototype.init=function(e){this.beans=e;this.createRowNodes()};t.prototype.getStartRow=function(){return this.startRow};t.prototype.getEndRow=function(){return this.endRow};t.prototype.getBlockNumber=function(){return this.blockNumber};t.prototype.setDirty=function(){this.version++;this.state=t.STATE_DIRTY};t.prototype.setDirtyAndPurge=function(){this.setDirty();this.rowNodes.forEach((function(e){e.setData(null)}))};t.prototype.getState=function(){return this.state};t.prototype.setRowNode=function(e,t){var i=e-this.startRow;this.rowNodes[i]=t};t.prototype.setBlankRowNode=function(e){var t=e-this.startRow;var i=this.createBlankRowNode(e);this.rowNodes[t]=i;return i};t.prototype.setNewData=function(e,t){var i=this.setBlankRowNode(e);this.setDataAndId(i,t,this.startRow+e);return i};t.prototype.createBlankRowNode=function(e){var t=new o.RowNode;this.beans.context.wireBean(t);t.setRowHeight(this.rowNodeCacheParams.rowHeight);return t};t.prototype.createRowNodes=function(){this.rowNodes=[];for(var e=0;e<this.rowNodeCacheParams.blockSize;e++){var t=this.startRow+e;var i=this.createBlankRowNode(t);this.rowNodes.push(i)}};t.prototype.load=function(){this.state=t.STATE_LOADING;this.loadFromDatasource()};t.prototype.pageLoadFailed=function(){this.state=t.STATE_FAILED;var e={type:t.EVENT_LOAD_COMPLETE,success:false,page:this,lastRow:null};this.dispatchEvent(e)};t.prototype.populateWithRowData=function(e){var t=this;var i=[];this.rowNodes.forEach((function(n,r){var o=e[r];if(n.stub){i.push(n)}t.setDataAndId(n,o,t.startRow+r)}));if(i.length>0){this.beans.rowRenderer.redrawRows(i)}};t.prototype.destroy=function(){e.prototype.destroy.call(this);this.rowNodes.forEach((function(e){if(e.childrenCache){e.childrenCache.destroy();e.childrenCache=null}e.clearRowTop()}))};t.prototype.pageLoaded=function(e,i,n){if(e===this.version){this.state=t.STATE_LOADED;this.populateWithRowData(i)}n=r.Utils.cleanNumber(n);var o={type:t.EVENT_LOAD_COMPLETE,success:true,page:this,lastRow:n};this.dispatchEvent(o)};t.EVENT_LOAD_COMPLETE="loadComplete";t.STATE_DIRTY="dirty";t.STATE_LOADING="loading";t.STATE_LOADED="loaded";t.STATE_FAILED="failed";return t}(a.BeanStub);t.RowNodeBlock=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(5);var r=i(90);var o=i(1);var a=i(2);var s=function(){function e(){}e.getEventCallbacks=function(){if(!e.EVENT_CALLBACKS){e.EVENT_CALLBACKS=[];e.EVENT_CALLBACKS_NO_PREFIX=[];e.EVENTS.forEach((function(t){e.EVENT_CALLBACKS.push(e.getCallbackForEvent(t));e.EVENT_CALLBACKS_NO_PREFIX.push(t)}))}return e.EVENT_CALLBACKS};e.copyAttributesToGridOptions=function(t,i,n){if(n===void 0){n=false}l(i);if(typeof t!=="object"){t={}}var r=t;e.ARRAY_PROPERTIES.concat(e.STRING_PROPERTIES).concat(e.OBJECT_PROPERTIES).concat(e.FUNCTION_PROPERTIES).forEach((function(e){if(typeof i[e]!=="undefined"){r[e]=i[e]}}));e.BOOLEAN_PROPERTIES.forEach((function(t){if(typeof i[t]!=="undefined"){r[t]=e.toBoolean(i[t])}}));e.NUMBER_PROPERTIES.forEach((function(t){if(typeof i[t]!=="undefined"){r[t]=e.toNumber(i[t])}}));e.getEventCallbacks().forEach((function(e){if(typeof i[e]!=="undefined"){r[e]=i[e]}}));if(!n){e.EVENT_CALLBACKS_NO_PREFIX.forEach((function(t){var n=e.getCallbackForEvent(t);if(typeof i[t]!=="undefined"||typeof i[n]!=="undefined"){a.GridOptionsWrapper.checkEventDeprecation(t)}}))}return t};e.getCallbackForEvent=function(e){if(!e||e.length<2){return e}else{return"on"+e[0].toUpperCase()+e.substr(1)}};e.processOnChange=function(t,i,r,a){if(!t){return}l(t);var s=i;e.ARRAY_PROPERTIES.concat(e.OBJECT_PROPERTIES).concat(e.STRING_PROPERTIES).forEach((function(e){if(t[e]){s[e]=t[e].currentValue}}));e.BOOLEAN_PROPERTIES.forEach((function(i){if(t[i]){s[i]=e.toBoolean(t[i].currentValue)}}));e.NUMBER_PROPERTIES.forEach((function(i){if(t[i]){s[i]=e.toNumber(t[i].currentValue)}}));e.getEventCallbacks().forEach((function(e){if(t[e]){s[e]=t[e].currentValue}}));if(t.showToolPanel){r.showToolPanel(e.toBoolean(t.showToolPanel.currentValue))}if(t.quickFilterText){r.setQuickFilter(t.quickFilterText.currentValue)}if(t.rowData){r.setRowData(t.rowData.currentValue)}if(t.pinnedTopRowData){r.setPinnedTopRowData(t.pinnedTopRowData.currentValue)}if(t.pinnedBottomRowData){r.setPinnedBottomRowData(t.pinnedBottomRowData.currentValue)}if(t.columnDefs){r.setColumnDefs(t.columnDefs.currentValue,"gridOptionsChanged")}if(t.datasource){r.setDatasource(t.datasource.currentValue)}if(t.headerHeight){r.setHeaderHeight(e.toNumber(t.headerHeight.currentValue))}if(t.paginationPageSize){r.paginationSetPageSize(e.toNumber(t.paginationPageSize.currentValue))}if(t.pivotMode){a.setPivotMode(e.toBoolean(t.pivotMode.currentValue))}if(t.groupRemoveSingleChildren){r.setGroupRemoveSingleChildren(e.toBoolean(t.groupRemoveSingleChildren.currentValue))}if(t.suppressRowDrag){r.setSuppressRowDrag(e.toBoolean(t.suppressRowDrag.currentValue))}if(t.gridAutoHeight){r.setGridAutoHeight(e.toBoolean(t.gridAutoHeight.currentValue))}if(t.suppressClipboardPaste){r.setSuppressClipboardPaste(e.toBoolean(t.suppressClipboardPaste.currentValue))}var u={type:n.Events.EVENT_COMPONENT_STATE_CHANGED,api:i.api,columnApi:i.columnApi};o.Utils.iterateObject(t,(function(e,t){u[e]=t}));r.dispatchEvent(u)};e.toBoolean=function(e){if(typeof e==="boolean"){return e}else if(typeof e==="string"){return e.toUpperCase()==="TRUE"||e==""}else{return false}};e.toNumber=function(e){if(typeof e==="number"){return e}else if(typeof e==="string"){return Number(e)}else{return undefined}};e.EVENTS=[];e.STRING_PROPERTIES=r.PropertyKeys.STRING_PROPERTIES;e.OBJECT_PROPERTIES=r.PropertyKeys.OBJECT_PROPERTIES;e.ARRAY_PROPERTIES=r.PropertyKeys.ARRAY_PROPERTIES;e.NUMBER_PROPERTIES=r.PropertyKeys.NUMBER_PROPERTIES;e.BOOLEAN_PROPERTIES=r.PropertyKeys.BOOLEAN_PROPERTIES;e.FUNCTION_PROPERTIES=r.PropertyKeys.FUNCTION_PROPERTIES;e.ALL_PROPERTIES=r.PropertyKeys.ALL_PROPERTIES;return e}();t.ComponentUtil=s;o.Utils.iterateObject(n.Events,(function(e,t){s.EVENTS.push(t)}));function l(e){if(e.rowDeselected||e.onRowDeselected){console.warn("ag-grid: as of v3.4 rowDeselected no longer exists. Please check the docs.")}}},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(4);var s=i(9);var l=i(1);var u=i(17);var c=i(2);var d=i(48);var f=i(38);var p=i(83);var h=i(26);var g=i(30);var m=function(){function e(e,t,i,n,r,o){this.columnController=e;this.valueService=t;this.gridOptionsWrapper=i;this.processCellCallback=n;this.processHeaderCallback=r;this.cellAndHeaderEscaper=o}e.prototype.extractHeaderValue=function(e){var t=this.getHeaderName(this.processHeaderCallback,e);if(t===null||t===undefined){t=""}return this.cellAndHeaderEscaper?this.cellAndHeaderEscaper(t):t};e.prototype.extractRowCellValue=function(e,t,i,n){var r=this.columnController.getRowGroupColumns().length>0;var o;if(n.group&&r&&t===0){o=this.createValueForGroupNode(n)}else{o=this.valueService.getValue(e,n)}o=this.processCell(n,e,o,this.processCellCallback,i);if(o===null||o===undefined){o=""}return this.cellAndHeaderEscaper?this.cellAndHeaderEscaper(o):o};e.prototype.getHeaderName=function(e,t){if(e){return e({column:t,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()})}else{return this.columnController.getDisplayNameForColumn(t,"csv",true)}};e.prototype.createValueForGroupNode=function(e){var t=[e.key];while(e.parent){e=e.parent;t.push(e.key)}return t.reverse().join(" -> ")};e.prototype.processCell=function(e,t,i,n,r){if(n){return n({column:t,node:e,value:i,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),type:r})}else{return i}};return e}();t.BaseGridSerializingSession=m;var v=function(){function e(){}e.prototype.serialize=function(e,t){var i=function(){return false};var n=t&&t.skipGroups;var r=t&&t.skipHeader;var o=t&&t.columnGroups;var a=t&&t.skipFooters;var u=t&&t.skipPinnedTop;var c=t&&t.skipPinnedBottom;var d=t&&t.customHeader;var f=t&&t.customFooter;var h=t&&t.allColumns;var g=t&&t.onlySelected;var m=t&&t.columnKeys;var v=t&&t.onlySelectedAllPages;var y=t&&t.shouldRowBeSkipped||i;var b=this.gridOptionsWrapper.getApi();var _=this.gridOptionsWrapper.getContext();var w=this.columnController.isPivotMode();var C=this.rowModel.getType()===s.Constants.ROW_MODEL_TYPE_CLIENT_SIDE;var A=!C&&g;var E;if(l.Utils.existsAndNotEmpty(m)){E=this.columnController.getGridColumns(m)}else if(h&&!w){E=this.columnController.getAllPrimaryColumns()}else{E=this.columnController.getAllDisplayedColumns()}if(!E||E.length===0){return""}e.prepare(E);if(d){e.addCustomHeader(t.customHeader)}if(o){var x=new p.GroupInstanceIdCreator;var T=this.displayedGroupCreator.createDisplayedGroups(E,this.columnController.getGridBalancedTree(),x);this.recursivelyAddHeaderGroups(T,e)}if(!r){var S=e.onNewHeaderRow();E.forEach((function(e,t){S.onColumn(e,t,null)}))}this.pinnedRowModel.forEachPinnedTopRow(k);if(w){if(this.rowModel.forEachPivotNode){this.rowModel.forEachPivotNode(k)}else{this.rowModel.forEachNode(k)}}else{if(v||A){var D=this.selectionController.getSelectedNodes();D.forEach((function(e){k(e)}))}else{if(C){this.rowModel.forEachNodeAfterFilterAndSort(k)}else{this.rowModel.forEachNode(k)}}}this.pinnedRowModel.forEachPinnedBottomRow(k);if(f){e.addCustomFooter(t.customFooter)}function k(t){if(n&&t.group){return}if(a&&t.footer){return}if(g&&!t.isSelected()){return}if(u&&t.rowPinned==="top"){return}if(c&&t.rowPinned==="bottom"){return}var i=t.level===-1;if(i&&!t.leafGroup){return}var r=y({node:t,api:b,context:_});if(r)return;var o=e.onNewBodyRow();E.forEach((function(e,i){o.onColumn(e,i,t)}))}return e.parse()};e.prototype.recursivelyAddHeaderGroups=function(e,t){var i=[];e.forEach((function(e){var t=e;if(!t.getChildren)return;t.getChildren().forEach((function(e){return i.push(e)}))}));if(e.length>0&&e[0]instanceof h.ColumnGroup){this.doAddHeaderHeader(t,e)}if(i&&i.length>0){this.recursivelyAddHeaderGroups(i,t)}};e.prototype.doAddHeaderHeader=function(e,t){var i=this;var n=e.onNewHeaderGroupingRow();var r=0;t.forEach((function(e){var t=e;var o=t.getDefinition();var a=i.columnController.getDisplayNameForColumnGroup(t,"header");n.onColumn(a,r++,t.getLeafColumns().length-1)}))};n([o.Autowired("displayedGroupCreator"),r("design:type",d.DisplayedGroupCreator)],e.prototype,"displayedGroupCreator",void 0);n([o.Autowired("columnController"),r("design:type",a.ColumnController)],e.prototype,"columnController",void 0);n([o.Autowired("rowModel"),r("design:type",Object)],e.prototype,"rowModel",void 0);n([o.Autowired("pinnedRowModel"),r("design:type",g.PinnedRowModel)],e.prototype,"pinnedRowModel",void 0);n([o.Autowired("selectionController"),r("design:type",u.SelectionController)],e.prototype,"selectionController",void 0);n([o.Autowired("balancedColumnTreeBuilder"),r("design:type",f.BalancedColumnTreeBuilder)],e.prototype,"balancedColumnTreeBuilder",void 0);n([o.Autowired("gridOptionsWrapper"),r("design:type",c.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);e=n([o.Bean("gridSerializer")],e);return e}();t.GridSerializer=v;var y;(function(e){e[e["HEADER_GROUPING"]=0]="HEADER_GROUPING";e[e["HEADER"]=1]="HEADER";e[e["BODY"]=2]="BODY"})(y=t.RowType||(t.RowType={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(9);var r=i(1);var o=i(23);var a=function(){function e(e,t){this.rowIndex=e;this.floating=r.Utils.makeNull(t)}e.prototype.isFloatingTop=function(){return this.floating===n.Constants.PINNED_TOP};e.prototype.isFloatingBottom=function(){return this.floating===n.Constants.PINNED_BOTTOM};e.prototype.isNotFloating=function(){return!this.isFloatingBottom()&&!this.isFloatingTop()};e.prototype.equals=function(e){return this.rowIndex===e.rowIndex&&this.floating===e.floating};e.prototype.toString=function(){return"rowIndex = "+this.rowIndex+", floating = "+this.floating};e.prototype.getGridCell=function(e){var t={rowIndex:this.rowIndex,floating:this.floating,column:e};return new o.GridCell(t)};e.prototype.before=function(e){var t=e.floating;switch(this.floating){case n.Constants.PINNED_TOP:if(t!==n.Constants.PINNED_TOP){return true}break;case n.Constants.PINNED_BOTTOM:if(t!==n.Constants.PINNED_BOTTOM){return false}break;default:if(r.Utils.exists(t)){if(t===n.Constants.PINNED_TOP){return false}else{return true}}break}return this.rowIndex<e.rowIndex};return e}();t.GridRow=a},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(8);var s=i(14);var l=i(1);var u=i(0);var c=i(2);var d=i(5);var f=i(3);var p=i(6);var h=i(7);var g=function(e){n(t,e);function t(){return e.call(this,'<span class="ag-selection-checkbox"/>')||this}t.prototype.createAndAddIcons=function(){this.eCheckedIcon=l.Utils.createIconNoSpan("checkboxChecked",this.gridOptionsWrapper,this.column);this.eUncheckedIcon=l.Utils.createIconNoSpan("checkboxUnchecked",this.gridOptionsWrapper,this.column);this.eIndeterminateIcon=l.Utils.createIconNoSpan("checkboxIndeterminate",this.gridOptionsWrapper,this.column);var e=this.getGui();e.appendChild(this.eCheckedIcon);e.appendChild(this.eUncheckedIcon);e.appendChild(this.eIndeterminateIcon)};t.prototype.onDataChanged=function(){this.onSelectionChanged()};t.prototype.onSelectableChanged=function(){this.showOrHideSelect()};t.prototype.onSelectionChanged=function(){var e=this.rowNode.isSelected();l.Utils.setVisible(this.eCheckedIcon,e===true);l.Utils.setVisible(this.eUncheckedIcon,e===false);l.Utils.setVisible(this.eIndeterminateIcon,typeof e!=="boolean")};t.prototype.onCheckedClicked=function(){var e=this.gridOptionsWrapper.isGroupSelectsFiltered();var t=this.rowNode.setSelectedParams({newValue:false,groupSelectsFiltered:e});return t};t.prototype.onUncheckedClicked=function(e){var t=this.gridOptionsWrapper.isGroupSelectsFiltered();var i=this.rowNode.setSelectedParams({newValue:true,rangeSelect:e.shiftKey,groupSelectsFiltered:t});return i};t.prototype.onIndeterminateClicked=function(e){var t=this.onUncheckedClicked(e);if(t===0){this.onCheckedClicked()}};t.prototype.init=function(e){this.rowNode=e.rowNode;this.column=e.column;this.createAndAddIcons();this.onSelectionChanged();this.addGuiEventListener("click",(function(e){return l.Utils.stopPropagationForAgGrid(e)}));this.addGuiEventListener("dblclick",(function(e){return l.Utils.stopPropagationForAgGrid(e)}));this.addDestroyableEventListener(this.eCheckedIcon,"click",this.onCheckedClicked.bind(this));this.addDestroyableEventListener(this.eUncheckedIcon,"click",this.onUncheckedClicked.bind(this));this.addDestroyableEventListener(this.eIndeterminateIcon,"click",this.onIndeterminateClicked.bind(this));this.addDestroyableEventListener(this.rowNode,s.RowNode.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this));this.addDestroyableEventListener(this.rowNode,s.RowNode.EVENT_DATA_CHANGED,this.onDataChanged.bind(this));this.addDestroyableEventListener(this.rowNode,s.RowNode.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this));this.isRowSelectableFunc=this.gridOptionsWrapper.getIsRowSelectableFunc();var t=this.isRowSelectableFunc||this.checkboxCallbackExists();if(t){this.addDestroyableEventListener(this.eventService,d.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelect.bind(this));this.showOrHideSelect()}};t.prototype.showOrHideSelect=function(){var e=this.rowNode.selectable;if(e&&this.checkboxCallbackExists()){e=this.column.isCellCheckboxSelection(this.rowNode)}this.setVisible(e)};t.prototype.checkboxCallbackExists=function(){var e=this.column?this.column.getColDef():null;return e&&typeof e.checkboxSelection==="function"};r([u.Autowired("gridOptionsWrapper"),o("design:type",c.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([u.Autowired("eventService"),o("design:type",f.EventService)],t.prototype,"eventService",void 0);r([u.Autowired("gridApi"),o("design:type",p.GridApi)],t.prototype,"gridApi",void 0);r([u.Autowired("columnApi"),o("design:type",h.ColumnApi)],t.prototype,"columnApi",void 0);return t}(a.Component);t.CheckboxSelectionComponent=g},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(67);var a=i(0);var s=i(68);var l=i(125);var u=i(126);var c=i(91);var d=i(27);var f=i(72);var p=i(71);var h=i(70);var g=i(50);var m=i(75);var v=i(92);var y=i(93);var b=i(94);var _=i(95);var w=i(96);var C=i(127);var A=i(128);var E=i(1);var x;(function(e){e[e["DEFAULT"]=0]="DEFAULT";e[e["REGISTERED"]=1]="REGISTERED"})(x=t.RegisteredComponentSource||(t.RegisteredComponentSource={}));var T=function(){function e(){this.agGridDefaults={agDateInput:s.DefaultDateComponent,agColumnHeader:l.HeaderComp,agColumnGroupHeader:u.HeaderGroupComp,agSetColumnFloatingFilter:c.SetFloatingFilterComp,agTextColumnFloatingFilter:c.TextFloatingFilterComp,agNumberColumnFloatingFilter:c.NumberFloatingFilterComp,agDateColumnFloatingFilter:c.DateFloatingFilterComp,agAnimateShowChangeCellRenderer:p.AnimateShowChangeCellRenderer,agAnimateSlideCellRenderer:h.AnimateSlideCellRenderer,agGroupCellRenderer:f.GroupCellRenderer,agGroupRowRenderer:f.GroupCellRenderer,agLoadingCellRenderer:g.LoadingCellRenderer,agCellEditor:o.TextCellEditor,agTextCellEditor:o.TextCellEditor,agSelectCellEditor:m.SelectCellEditor,agPopupTextCellEditor:v.PopupTextCellEditor,agPopupSelectCellEditor:y.PopupSelectCellEditor,agLargeTextCellEditor:b.LargeTextCellEditor,agTextColumnFilter:_.TextFilter,agNumberColumnFilter:w.NumberFilter,agDateColumnFilter:s.DateFilter,agLoadingOverlay:C.LoadingOverlayComponent,agNoRowsOverlay:A.NoRowsOverlayComponent};this.agDeprecatedNames={set:{newComponentName:"agSetColumnFilter",propertyHolder:"filter"},text:{newComponentName:"agTextColumnFilter",propertyHolder:"filter"},number:{newComponentName:"agNumberColumnFilter",propertyHolder:"filter"},date:{newComponentName:"agDateColumnFilter",propertyHolder:"filter"},group:{newComponentName:"agGroupCellRenderer",propertyHolder:"cellRenderer"},animateShowChange:{newComponentName:"agAnimateShowChangeCellRenderer",propertyHolder:"cellRenderer"},animateSlide:{newComponentName:"agAnimateSlideCellRenderer",propertyHolder:"cellRenderer"},select:{newComponentName:"agSelectCellEditor",propertyHolder:"cellEditor"},largeText:{newComponentName:"agLargeTextCellEditor",propertyHolder:"cellEditor"},popupSelect:{newComponentName:"agPopupSelectCellEditor",propertyHolder:"cellEditor"},popupText:{newComponentName:"agPopupTextCellEditor",propertyHolder:"cellEditor"},richSelect:{newComponentName:"agRichSelectCellEditor",propertyHolder:"cellEditor"},headerComponent:{newComponentName:"agColumnHeader",propertyHolder:"headerComponent"}};this.jsComponents={};this.frameworkComponents={}}e.prototype.init=function(){var e=this;if(this.gridOptions.components!=null){Object.keys(this.gridOptions.components).forEach((function(t){e.registerComponent(t,e.gridOptions.components[t])}))}if(this.gridOptions.frameworkComponents!=null){Object.keys(this.gridOptions.frameworkComponents).forEach((function(t){e.registerFwComponent(t,e.gridOptions.frameworkComponents[t])}))}};e.prototype.registerDefaultComponent=function(e,t,i){if(i===void 0){i=true}var n=this.translateIfDeprecated(e);if(this.agGridDefaults[n]){console.error("Trying to overwrite a default component. You should call registerComponent");return}this.agGridDefaults[n]=t};e.prototype.registerComponent=function(e,t){var i=this.translateIfDeprecated(e);if(this.frameworkComponents[i]){console.error("Trying to register a component that you have already registered for frameworks: "+i);return}this.jsComponents[i]=t};e.prototype.registerFwComponent=function(e,t){var i=this.translateIfDeprecated(e);if(this.jsComponents[i]){console.error("Trying to register a component that you have already registered for plain javascript: "+i);return}this.frameworkComponents[i]=t};e.prototype.retrieve=function(e){var t=this.translateIfDeprecated(e);if(this.frameworkComponents[t]){return{type:d.ComponentType.FRAMEWORK,component:this.frameworkComponents[t],source:x.REGISTERED}}if(this.jsComponents[t]){return{type:d.ComponentType.AG_GRID,component:this.jsComponents[t],source:x.REGISTERED}}if(this.agGridDefaults[t]){return this.agGridDefaults[t]?{type:d.ComponentType.AG_GRID,component:this.agGridDefaults[t],source:x.DEFAULT}:null}if(Object.keys(this.agGridDefaults).indexOf(t)<0){console.warn("ag-grid: Looking for component ["+t+"] but it wasn't found.")}return null};e.prototype.translateIfDeprecated=function(e){var t=this.agDeprecatedNames[e];if(t!=null){E._.doOnce((function(){console.warn("ag-grid. Since v15.0 component names have been renamed to be namespaced. You should rename "+t.propertyHolder+":"+e+" to "+t.propertyHolder+":"+t.newComponentName)}),"DEPREACTE_COMPONENT_"+e);return t.newComponentName}return e};n([a.Autowired("gridOptions"),r("design:type",Object)],e.prototype,"gridOptions",void 0);n([a.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);e=n([a.Bean("componentProvider")],e);return e}();t.ComponentProvider=T},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:true});var r=i(9);var o=i(8);var a=i(1);var s=function(e){n(t,e);function t(){return e.call(this,t.TEMPLATE)||this}t.prototype.init=function(e){this.params=e;var t=this.getGui();var i;if(e.cellStartedEdit){this.focusAfterAttached=true;var n=e.keyPress===r.Constants.KEY_BACKSPACE||e.keyPress===r.Constants.KEY_DELETE;if(n){i=""}else if(e.charPress){i=e.charPress}else{i=this.getStartValue(e);if(e.keyPress!==r.Constants.KEY_F2){this.highlightAllOnFocus=true}}}else{this.focusAfterAttached=false;i=this.getStartValue(e)}if(a.Utils.exists(i)){t.value=i}this.addDestroyableEventListener(t,"keydown",(function(e){var t=e.keyCode===r.Constants.KEY_LEFT||e.keyCode===r.Constants.KEY_RIGHT||e.keyCode===r.Constants.KEY_UP||e.keyCode===r.Constants.KEY_DOWN||e.keyCode===r.Constants.KEY_PAGE_DOWN||e.keyCode===r.Constants.KEY_PAGE_UP||e.keyCode===r.Constants.KEY_PAGE_HOME||e.keyCode===r.Constants.KEY_PAGE_END;if(t){e.stopPropagation();var i=e.keyCode===r.Constants.KEY_PAGE_UP;var n=e.keyCode===r.Constants.KEY_PAGE_DOWN;if(i||n){e.preventDefault()}}}))};t.prototype.afterGuiAttached=function(){if(!this.focusAfterAttached){return}var e=this.getGui();e.focus();if(this.highlightAllOnFocus){e.select()}else{var t=e.value?e.value.length:0;if(t>0){e.setSelectionRange(t,t)}}};t.prototype.focusIn=function(){var e=this.getGui();e.focus();e.select()};t.prototype.getValue=function(){var e=this.getGui();return this.params.parseValue(e.value)};t.prototype.getStartValue=function(e){var t=e.useFormatter||e.column.getColDef().refData;return t?e.formatValue(e.value):e.value};t.TEMPLATE='<input class="ag-cell-edit-input" type="text"/>';return t}(o.Component);t.TextCellEditor=s},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(8);var s=i(11);var l=i(1);var u=i(51);var c=i(0);var d=i(21);var f=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.modelFromFloatingFilter=function(e){return{dateFrom:e,dateTo:this.getDateTo(),type:this.filter,filterType:"date"}};t.prototype.getApplicableFilterTypes=function(){return[u.BaseFilter.EQUALS,u.BaseFilter.GREATER_THAN,u.BaseFilter.LESS_THAN,u.BaseFilter.NOT_EQUAL,u.BaseFilter.IN_RANGE]};t.prototype.bodyTemplate=function(e){var t=e==u.FilterConditionType.MAIN?"filterDateFromPanel":"filterDateFromConditionPanel";var i=e==u.FilterConditionType.MAIN?"filterDateToPanel":"filterDateToConditionPanel";return'<div class="ag-filter-body">\n                    <div class="ag-filter-date-from" id="'+t+'">\n                    </div>\n                    <div class="ag-filter-date-to" id="'+i+'">\n                    </div>\n                </div>'};t.prototype.initialiseFilterBodyUi=function(t){e.prototype.initialiseFilterBodyUi.call(this,t);this.createComponents(t);if(t===u.FilterConditionType.MAIN){this.setDateFrom_date(this.dateFrom,u.FilterConditionType.MAIN);this.setDateTo_date(this.dateTo,u.FilterConditionType.MAIN);this.setFilterType(this.filterCondition,u.FilterConditionType.MAIN)}else{this.setDateFrom_date(this.dateFromCondition,u.FilterConditionType.CONDITION);this.setDateTo_date(this.dateToCondition,u.FilterConditionType.CONDITION);this.setFilterType(this.filterCondition,u.FilterConditionType.CONDITION)}};t.prototype.createComponents=function(e){var t=this;var i={onDateChanged:function(){t.onDateChanged(e)},filterParams:this.filterParams};this.componentRecipes.newDateComponent(i).then((function(i){if(e===u.FilterConditionType.MAIN){t.dateToComponent=i}else{t.dateToConditionComponent=i}var n=i.getGui();if(e===u.FilterConditionType.MAIN){t.eDateToPanel.appendChild(n);if(t.dateToComponent.afterGuiAttached){t.dateToComponent.afterGuiAttached()}}else{t.eDateToConditionPanel.appendChild(n);if(t.dateToConditionComponent.afterGuiAttached){t.dateToConditionComponent.afterGuiAttached()}}}));this.componentRecipes.newDateComponent(i).then((function(i){if(e===u.FilterConditionType.MAIN){t.dateFromComponent=i}else{t.dateFromConditionComponent=i}var n=i.getGui();if(e===u.FilterConditionType.MAIN){t.eDateFromPanel.appendChild(n);if(t.dateFromComponent.afterGuiAttached){t.dateFromComponent.afterGuiAttached()}}else{t.eDateFromConditionPanel.appendChild(n);if(t.dateFromConditionComponent.afterGuiAttached){t.dateFromConditionComponent.afterGuiAttached()}}}))};t.prototype.onDateChanged=function(e){if(e===u.FilterConditionType.MAIN){this.dateFrom=t.removeTimezone(this.dateFromComponent.getDate());this.dateTo=t.removeTimezone(this.dateToComponent.getDate())}else{this.dateFromCondition=t.removeTimezone(this.dateFromComponent.getDate());this.dateToCondition=t.removeTimezone(this.dateToComponent.getDate())}this.onFilterChanged()};t.prototype.refreshFilterBodyUi=function(e){var t;var i;if(e===u.FilterConditionType.MAIN){t=this.eDateToPanel;i=this.filter}else{t=this.eDateToConditionPanel;i=this.filterCondition}if(!t)return;var n=i===u.BaseFilter.IN_RANGE;l.Utils.setVisible(t,n)};t.prototype.comparator=function(){return this.filterParams.comparator?this.filterParams.comparator:this.defaultComparator.bind(this)};t.prototype.defaultComparator=function(e,t){var i=t;if(i<e){return-1}if(i>e){return 1}return t!=null?0:-1};t.prototype.serialize=function(e){var t=e===u.FilterConditionType.MAIN?this.dateToComponent:this.dateToConditionComponent;var i=e===u.FilterConditionType.MAIN?this.dateFromComponent:this.dateFromConditionComponent;var n=e===u.FilterConditionType.MAIN?this.filter:this.filterCondition;return{dateTo:l.Utils.serializeDateToYyyyMmDd(t.getDate(),"-"),dateFrom:l.Utils.serializeDateToYyyyMmDd(i.getDate(),"-"),type:n?n:this.defaultFilter,filterType:"date"}};t.prototype.filterValues=function(e){if(e===u.FilterConditionType.MAIN){if(!this.dateFromComponent)return null;return this.filter!==u.BaseFilter.IN_RANGE?this.dateFromComponent.getDate():[this.dateFromComponent.getDate(),this.dateToComponent.getDate()]}if(!this.dateFromConditionComponent)return null;return this.filterCondition!==u.BaseFilter.IN_RANGE?this.dateFromConditionComponent.getDate():[this.dateFromConditionComponent.getDate(),this.dateToConditionComponent.getDate()]};t.prototype.getDateFrom=function(){return l.Utils.serializeDateToYyyyMmDd(this.dateFromComponent.getDate(),"-")};t.prototype.getDateTo=function(){return l.Utils.serializeDateToYyyyMmDd(this.dateToComponent.getDate(),"-")};t.prototype.getFilterType=function(){return this.filter};t.prototype.setDateFrom=function(e,t){var i=l.Utils.parseYyyyMmDdToDate(e,"-");this.setDateFrom_date(i,t)};t.prototype.setDateFrom_date=function(e,t){if(t===u.FilterConditionType.MAIN){this.dateFrom=e;if(!this.dateFromComponent)return;this.dateFromComponent.setDate(this.dateFrom)}else{this.dateFromCondition=e;if(!this.dateFromConditionComponent)return;this.dateFromConditionComponent.setDate(this.dateFromCondition)}};t.prototype.setDateTo=function(e,t){var i=l.Utils.parseYyyyMmDdToDate(e,"-");this.setDateTo_date(i,t)};t.prototype.setDateTo_date=function(e,t){if(t===u.FilterConditionType.MAIN){this.dateTo=e;if(!this.dateToComponent)return;this.dateToComponent.setDate(this.dateTo)}else{this.dateToCondition=e;if(!this.dateToConditionComponent)return;this.dateToConditionComponent.setDate(this.dateToCondition)}};t.prototype.resetState=function(){this.setDateFrom(null,u.FilterConditionType.MAIN);this.setDateTo(null,u.FilterConditionType.MAIN);this.setFilterType(this.defaultFilter,u.FilterConditionType.MAIN);this.setDateFrom(null,u.FilterConditionType.CONDITION);this.setDateTo(null,u.FilterConditionType.CONDITION);this.setFilterType(this.defaultFilter,u.FilterConditionType.MAIN)};t.prototype.parse=function(e,t){this.setDateFrom(e.dateFrom,t);this.setDateTo(e.dateTo,t);this.setFilterType(e.type,t)};t.prototype.setType=function(e,t){this.setFilterType(e,t)};t.removeTimezone=function(e){if(!e){return null}return new Date(e.getFullYear(),e.getMonth(),e.getDate())};r([c.Autowired("componentRecipes"),o("design:type",d.ComponentRecipes)],t.prototype,"componentRecipes",void 0);r([s.QuerySelector("#filterDateFromPanel"),o("design:type",HTMLElement)],t.prototype,"eDateFromPanel",void 0);r([s.QuerySelector("#filterDateFromConditionPanel"),o("design:type",HTMLElement)],t.prototype,"eDateFromConditionPanel",void 0);r([s.QuerySelector("#filterDateToPanel"),o("design:type",HTMLElement)],t.prototype,"eDateToPanel",void 0);r([s.QuerySelector("#filterDateToConditionPanel"),o("design:type",HTMLElement)],t.prototype,"eDateToConditionPanel",void 0);return t}(u.ScalarBaseFilter);t.DateFilter=f;var p=function(e){n(t,e);function t(){return e.call(this,'<input class="ag-filter-filter" type="text" placeholder="yyyy-mm-dd">')||this}t.prototype.init=function(e){this.eDateInput=this.getGui();if(l.Utils.isBrowserChrome()||e.filterParams.browserDatePicker){if(l.Utils.isBrowserIE()){console.warn("ag-grid: browserDatePicker is specified to true, but it is not supported in IE 11, reverting to plain text date picker")}else{this.eDateInput.type="date"}}this.listener=e.onDateChanged;this.addGuiEventListener("input",this.listener)};t.prototype.getDate=function(){return l.Utils.parseYyyyMmDdToDate(this.eDateInput.value,"-")};t.prototype.setDate=function(e){this.eDateInput.value=l.Utils.serializeDateToYyyyMmDd(e,"-")};return t}(a.Component);t.DefaultDateComponent=p},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(8);var s=i(0);var l=i(2);var u=function(e){n(t,e);function t(t){var i=e.call(this,'<div class="ag-popup-editor" tabindex="-1"/>')||this;i.getGuiCalledOnChild=false;i.cellEditor=t;return i}t.prototype.onKeyDown=function(e){this.params.onKeyDown(e)};t.prototype.getGui=function(){if(!this.getGuiCalledOnChild){this.appendChild(this.cellEditor.getGui());this.getGuiCalledOnChild=true}return e.prototype.getGui.call(this)};t.prototype.init=function(i){var n=this;this.params=i;this.gridOptionsWrapper.setDomData(this.getGui(),t.DOM_KEY_POPUP_EDITOR_WRAPPER,true);this.addDestroyFunc((function(){if(n.cellEditor.destroy){n.cellEditor.destroy()}}));this.addDestroyableEventListener(e.prototype.getGui.call(this),"keydown",this.onKeyDown.bind(this))};t.prototype.afterGuiAttached=function(){if(this.cellEditor.afterGuiAttached){this.cellEditor.afterGuiAttached()}};t.prototype.getValue=function(){return this.cellEditor.getValue()};t.prototype.isPopup=function(){return true};t.prototype.isCancelBeforeStart=function(){if(this.cellEditor.isCancelBeforeStart){return this.cellEditor.isCancelBeforeStart()}};t.prototype.isCancelAfterEnd=function(){if(this.cellEditor.isCancelAfterEnd){return this.cellEditor.isCancelAfterEnd()}};t.prototype.focusIn=function(){if(this.cellEditor.focusIn){this.cellEditor.focusIn()}};t.prototype.focusOut=function(){if(this.cellEditor.focusOut){this.cellEditor.focusOut()}};t.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper";r([s.Autowired("gridOptionsWrapper"),o("design:type",l.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);return t}(a.Component);t.PopupEditorWrapper=u},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:true});var r=i(1);var o=i(8);var a=function(e){n(t,e);function t(){var i=e.call(this,t.TEMPLATE)||this;i.refreshCount=0;i.eCurrent=i.queryForHtmlElement(".ag-value-slide-current");return i}t.prototype.init=function(e){this.params=e;this.refresh(e)};t.prototype.addSlideAnimation=function(){var e=this;this.refreshCount++;var t=this.refreshCount;if(this.ePrevious){this.getGui().removeChild(this.ePrevious)}this.ePrevious=r.Utils.loadTemplate('<span class="ag-value-slide-previous ag-value-slide-out"></span>');this.ePrevious.innerHTML=this.eCurrent.innerHTML;this.getGui().insertBefore(this.ePrevious,this.eCurrent);setTimeout((function(){if(t!==e.refreshCount){return}r.Utils.addCssClass(e.ePrevious,"ag-value-slide-out-end")}),50);setTimeout((function(){if(t!==e.refreshCount){return}e.getGui().removeChild(e.ePrevious);e.ePrevious=null}),3e3)};t.prototype.refresh=function(e){var t=e.value;if(r.Utils.missing(t)){t=""}if(t===this.lastValue){return}this.addSlideAnimation();this.lastValue=t;if(r.Utils.exists(e.valueFormatted)){this.eCurrent.innerHTML=e.valueFormatted}else if(r.Utils.exists(e.value)){this.eCurrent.innerHTML=t}else{this.eCurrent.innerHTML=""}return true};t.TEMPLATE="<span>"+'<span class="ag-value-slide-current"></span>'+"</span>";return t}(o.Component);t.AnimateSlideCellRenderer=a},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:true});var r=i(1);var o=i(8);var a="&#65514;";var s="&#65516;";var l=function(e){n(t,e);function t(){var i=e.call(this,t.TEMPLATE)||this;i.refreshCount=0;return i}t.prototype.init=function(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value");this.eDelta=this.queryForHtmlElement(".ag-value-change-delta");this.refresh(e)};t.prototype.showDelta=function(e,t){var i=Math.abs(t);var n=e.formatValue(i);var o=r.Utils.exists(n)?n:i;var l=t>=0;if(l){this.eDelta.innerHTML=a+o}else{this.eDelta.innerHTML=s+o}r.Utils.addOrRemoveCssClass(this.eDelta,"ag-value-change-delta-up",l);r.Utils.addOrRemoveCssClass(this.eDelta,"ag-value-change-delta-down",!l)};t.prototype.setTimerToRemoveDelta=function(){var e=this;this.refreshCount++;var t=this.refreshCount;setTimeout((function(){if(t===e.refreshCount){e.hideDeltaValue()}}),2e3)};t.prototype.hideDeltaValue=function(){r.Utils.removeCssClass(this.eValue,"ag-value-change-value-highlight");this.eDelta.innerHTML=""};t.prototype.refresh=function(e){var t=e.value;if(t===this.lastValue){return}if(r.Utils.exists(e.valueFormatted)){this.eValue.innerHTML=e.valueFormatted}else if(r.Utils.exists(e.value)){this.eValue.innerHTML=t}else{this.eValue.innerHTML=""}if(typeof t==="number"&&typeof this.lastValue==="number"){var i=t-this.lastValue;this.showDelta(e,i)}if(this.lastValue){r.Utils.addCssClass(this.eValue,"ag-value-change-value-highlight")}this.setTimerToRemoveDelta();this.lastValue=t;return true};t.TEMPLATE="<span>"+'<span class="ag-value-change-delta"></span>'+'<span class="ag-value-change-value"></span>'+"</span>";return t}(o.Component);t.AnimateShowChangeCellRenderer=l},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(2);var s=i(19);var l=i(3);var u=i(9);var c=i(1);var d=i(0);var f=i(8);var p=i(14);var h=i(56);var g=i(43);var m=i(65);var v=i(4);var y=i(10);var b=i(11);var _=i(44);var w=function(e){n(t,e);function t(){return e.call(this,t.TEMPLATE)||this}t.prototype.init=function(e){this.params=e;if(this.gridOptionsWrapper.isGroupIncludeTotalFooter()){this.assignBlankValueToGroupFooterCell(e)}var t=this.isEmbeddedRowMismatch();var i=e.value==null;this.cellIsBlank=t||i;if(this.cellIsBlank){return}this.setupDragOpenParents();this.addExpandAndContract();this.addCheckboxIfNeeded();this.addValueElement();this.setupIndent()};t.prototype.assignBlankValueToGroupFooterCell=function(e){if(!e.value&&e.node.level==-1){e.value=""}};t.prototype.isEmbeddedRowMismatch=function(){if(this.params.fullWidth&&this.gridOptionsWrapper.isEmbedFullWidthRows()){var e=this.params.pinned===y.Column.PINNED_LEFT;var t=this.params.pinned===y.Column.PINNED_RIGHT;var i=!e&&!t;if(this.gridOptionsWrapper.isEnableRtl()){if(this.columnController.isPinningLeft()){return!t}else{return!i}}else{if(this.columnController.isPinningLeft()){return!e}else{return!i}}}else{return false}};t.prototype.setIndent=function(){if(this.gridOptionsWrapper.isGroupHideOpenParents()){return}var e=this.params;var t=e.node;var i=t.uiLevel;var n=e.padding>=0;if(n){this.setPaddingDeprecatedWay(i,e.padding);return}if(this.indentClass){this.removeCssClass(this.indentClass)}this.indentClass="ag-row-group-indent-"+i;this.addCssClass(this.indentClass)};t.prototype.setPaddingDeprecatedWay=function(e,t){c.Utils.doOnce((function(){return console.warn("ag-Grid: since v14.2, configuring padding for groupCellRenderer should be done with Sass variables and themes. Please see the ag-Grid documentation page for Themes, in particular the property $row-group-indent-size.")}),"groupCellRenderer->doDeprecatedWay");var i=e*t;if(this.gridOptionsWrapper.isEnableRtl()){this.getGui().style.paddingRight=i+"px"}else{this.getGui().style.paddingLeft=i+"px"}};t.prototype.setupIndent=function(){var e=this.params.node;var t=this.params.suppressPadding;if(!t){this.addDestroyableEventListener(e,p.RowNode.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this));this.setIndent()}};t.prototype.addValueElement=function(){var e=this.params;var t=this.displayedGroup;if(t.footer){this.createFooterCell()}else if(t.hasChildren()||c.Utils.get(e.colDef,"cellRendererParams.innerRenderer",null)||c.Utils.get(e.colDef,"cellRendererParams.innerRendererFramework",null)){this.createGroupCell();if(t.hasChildren()){this.addChildCount()}}else{this.createLeafCell()}};t.prototype.createFooterCell=function(){var e;var t=this.params.footerValueGetter;if(t){var i=c.Utils.cloneObject(this.params);i.value=this.params.value;if(typeof t==="function"){e=t(i)}else if(typeof t==="string"){e=this.expressionService.evaluate(t,i)}else{console.warn("ag-Grid: footerValueGetter should be either a function or a string (expression)")}}else{e="Total "+this.params.value}this.eValue.innerHTML=e};t.prototype.createGroupCell=function(){var e=this;var t=this.params;var i=this.displayedGroup.rowGroupColumn;var n=i?i:t.column;var r=this.params.value;var o=n?this.valueFormatterService.formatValue(n,t.node,t.scope,r):null;t.valueFormatted=o;var a;if(t.fullWidth==true){a=this.cellRendererService.useFullWidthGroupRowInnerCellRenderer(this.eValue,t)}else{a=this.cellRendererService.useInnerCellRenderer(this.params.colDef.cellRendererParams,n.getColDef(),this.eValue,t)}if(a){a.then((function(t){e.innerCellRenderer=t}))}};t.prototype.addChildCount=function(){if(this.params.suppressCount){return}this.addDestroyableEventListener(this.displayedGroup,p.RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this));this.updateChildCount()};t.prototype.updateChildCount=function(){var e=this.displayedGroup.allChildrenCount;this.eChildCount.innerHTML=e>=0?"("+e+")":""};t.prototype.createLeafCell=function(){if(c.Utils.exists(this.params.value)){this.eValue.innerHTML=this.params.valueFormatted?this.params.valueFormatted:this.params.value}};t.prototype.isUserWantsSelected=function(){var e=this.params.checkbox;if(typeof e==="function"){return e(this.params)}else{return e===true}};t.prototype.addCheckboxIfNeeded=function(){var e=this.displayedGroup;var t=this.isUserWantsSelected()&&!e.footer&&!e.rowPinned&&!e.detail;if(t){var i=new m.CheckboxSelectionComponent;this.context.wireBean(i);i.init({rowNode:e,column:this.params.column});this.eCheckbox.appendChild(i.getGui());this.addDestroyFunc((function(){return i.destroy()}))}};t.prototype.addExpandAndContract=function(){var e=this.params;var t=e.eGridCell;var i=c.Utils.createIconNoSpan("groupExpanded",this.gridOptionsWrapper,null);var n=c.Utils.createIconNoSpan("groupContracted",this.gridOptionsWrapper,null);this.eExpanded.appendChild(i);this.eContracted.appendChild(n);this.addDestroyableEventListener(this.eExpanded,"click",this.onExpandClicked.bind(this));this.addDestroyableEventListener(this.eContracted,"click",this.onExpandClicked.bind(this));this.addDestroyableEventListener(t,"keydown",this.onKeyDown.bind(this));this.addDestroyableEventListener(e.node,p.RowNode.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this));this.showExpandAndContractIcons();this.addDestroyableEventListener(this.displayedGroup,p.RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.onAllChildrenCountChanged.bind(this));if(!this.gridOptionsWrapper.isEnableGroupEdit()&&this.isExpandable()&&!e.suppressDoubleClickExpand){this.addDestroyableEventListener(t,"dblclick",this.onCellDblClicked.bind(this))}};t.prototype.onAllChildrenCountChanged=function(){this.showExpandAndContractIcons();this.setIndent()};t.prototype.onKeyDown=function(e){if(c.Utils.isKeyPressed(e,u.Constants.KEY_ENTER)){var t=this.params.column.isCellEditable(this.params.node);if(t){return}e.preventDefault();this.onExpandOrContract()}};t.prototype.setupDragOpenParents=function(){var e=this.params.column;var t=this.params.node;if(!this.gridOptionsWrapper.isGroupHideOpenParents()){this.draggedFromHideOpenParents=false}else if(!t.hasChildren()){this.draggedFromHideOpenParents=true}else{var i=t.rowGroupColumn;this.draggedFromHideOpenParents=!e.isRowGroupDisplayed(i.getId())}if(this.draggedFromHideOpenParents){var n=t.parent;while(true){if(c.Utils.missing(n)){break}if(n.rowGroupColumn&&e.isRowGroupDisplayed(n.rowGroupColumn.getId())){this.displayedGroup=n;break}n=n.parent}}if(c.Utils.missing(this.displayedGroup)){this.displayedGroup=t}};t.prototype.onExpandClicked=function(e){if(c.Utils.isStopPropagationForAgGrid(e)){return}c.Utils.stopPropagationForAgGrid(e);this.onExpandOrContract()};t.prototype.onCellDblClicked=function(e){if(c.Utils.isStopPropagationForAgGrid(e)){return}var t=c.Utils.isElementInEventPath(this.eExpanded,e)||c.Utils.isElementInEventPath(this.eContracted,e);if(!t){this.onExpandOrContract()}};t.prototype.onExpandOrContract=function(){var e=this.displayedGroup;e.setExpanded(!e.expanded);if(this.gridOptionsWrapper.isGroupIncludeFooter()){this.params.api.redrawRows({rowNodes:[e]})}};t.prototype.isExpandable=function(){var e=this.params.node;var t=this.columnController.isPivotMode()&&e.leafGroup;return this.draggedFromHideOpenParents||e.isExpandable()&&!e.footer&&!t};t.prototype.showExpandAndContractIcons=function(){var e=this.params.node;if(this.isExpandable()){var t=this.draggedFromHideOpenParents?true:e.expanded;c.Utils.setVisible(this.eContracted,!t);c.Utils.setVisible(this.eExpanded,t)}else{c.Utils.setVisible(this.eExpanded,false);c.Utils.setVisible(this.eContracted,false)}var i=this.displayedGroup;var n=this.columnController.isPivotMode()&&i.leafGroup;var r=!i.isExpandable();var o=i.footer||r||n;this.addOrRemoveCssClass("ag-row-group-leaf-indent",o)};t.prototype.destroy=function(){e.prototype.destroy.call(this);if(this.innerCellRenderer&&this.innerCellRenderer.destroy){this.innerCellRenderer.destroy()}};t.prototype.refresh=function(){return false};t.TEMPLATE="<span>"+'<span class="ag-group-expanded" ref="eExpanded"></span>'+'<span class="ag-group-contracted" ref="eContracted"></span>'+'<span class="ag-group-checkbox" ref="eCheckbox"></span>'+'<span class="ag-group-value" ref="eValue"></span>'+'<span class="ag-group-child-count" ref="eChildCount"></span>'+"</span>";r([d.Autowired("gridOptionsWrapper"),o("design:type",a.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([d.Autowired("expressionService"),o("design:type",s.ExpressionService)],t.prototype,"expressionService",void 0);r([d.Autowired("eventService"),o("design:type",l.EventService)],t.prototype,"eventService",void 0);r([d.Autowired("cellRendererService"),o("design:type",h.CellRendererService)],t.prototype,"cellRendererService",void 0);r([d.Autowired("valueFormatterService"),o("design:type",g.ValueFormatterService)],t.prototype,"valueFormatterService",void 0);r([d.Autowired("context"),o("design:type",d.Context)],t.prototype,"context",void 0);r([d.Autowired("columnController"),o("design:type",v.ColumnController)],t.prototype,"columnController",void 0);r([d.Autowired("mouseEventService"),o("design:type",_.MouseEventService)],t.prototype,"mouseEventService",void 0);r([b.RefSelector("eExpanded"),o("design:type",HTMLElement)],t.prototype,"eExpanded",void 0);r([b.RefSelector("eContracted"),o("design:type",HTMLElement)],t.prototype,"eContracted",void 0);r([b.RefSelector("eCheckbox"),o("design:type",HTMLElement)],t.prototype,"eCheckbox",void 0);r([b.RefSelector("eValue"),o("design:type",HTMLElement)],t.prototype,"eValue",void 0);r([b.RefSelector("eChildCount"),o("design:type",HTMLElement)],t.prototype,"eChildCount",void 0);return t}(f.Component);t.GroupCellRenderer=w},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(19);var s=function(){function e(){}e.prototype.processAllCellClasses=function(e,t,i,n){this.processClassRules(e.cellClassRules,t,i,n);this.processStaticCellClasses(e,t,i)};e.prototype.processClassRules=function(e,t,i,n){if(typeof e==="object"&&e!==null){var r=Object.keys(e);for(var o=0;o<r.length;o++){var a=r[o];var s=e[a];var l=void 0;if(typeof s==="string"){l=this.expressionService.evaluate(s,t)}else if(typeof s==="function"){l=s(t)}if(l){i(a)}else if(n){n(a)}}}};e.prototype.processStaticCellClasses=function(e,t,i){var n=e.cellClass;if(n){var r=void 0;if(typeof e.cellClass==="function"){var o=e.cellClass;r=o(t)}else{r=e.cellClass}if(typeof r==="string"){i(r)}else if(Array.isArray(r)){r.forEach((function(e){i(e)}))}}};n([o.Autowired("expressionService"),r("design:type",a.ExpressionService)],e.prototype,"expressionService",void 0);e=n([o.Bean("stylingService")],e);return e}();t.StylingService=s},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(13);var s=i(0);var l=i(45);var u=function(e){n(t,e);function t(t,i){var n=e.call(this)||this;n.columns=t;n.addMouseHoverListeners(i);return n}t.prototype.addMouseHoverListeners=function(e){this.addDestroyableEventListener(e,"mouseout",this.onMouseOut.bind(this));this.addDestroyableEventListener(e,"mouseover",this.onMouseOver.bind(this))};t.prototype.onMouseOut=function(){this.columnHoverService.clearMouseOver()};t.prototype.onMouseOver=function(){this.columnHoverService.setMouseOver(this.columns)};r([s.Autowired("columnHoverService"),o("design:type",l.ColumnHoverService)],t.prototype,"columnHoverService",void 0);return t}(a.BeanStub);t.HoverFeature=u},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(8);var s=i(1);var l=i(9);var u=i(0);var c=i(2);var d=i(43);var f=function(e){n(t,e);function t(){var t=e.call(this,'<div class="ag-cell-edit-input"><select class="ag-cell-edit-input"/></div>')||this;t.eSelect=t.getGui().querySelector("select");return t}t.prototype.init=function(e){var t=this;this.focusAfterAttached=e.cellStartedEdit;if(s.Utils.missing(e.values)){console.log("ag-Grid: no values found for select cellEditor");return}e.values.forEach((function(i){var n=document.createElement("option");n.value=i;var r=t.valueFormatterService.formatValue(e.column,null,null,i);var o=r!==null&&r!==undefined;n.text=o?r:i;if(e.value===i){n.selected=true}t.eSelect.appendChild(n)}));if(!this.gridOptionsWrapper.isFullRowEdit()){this.addDestroyableEventListener(this.eSelect,"change",(function(){return e.stopEditing()}))}this.addDestroyableEventListener(this.eSelect,"keydown",(function(e){var t=e.keyCode===l.Constants.KEY_UP||e.keyCode===l.Constants.KEY_DOWN;if(t){e.stopPropagation()}}));this.addDestroyableEventListener(this.eSelect,"mousedown",(function(e){e.stopPropagation()}))};t.prototype.afterGuiAttached=function(){if(this.focusAfterAttached){this.eSelect.focus()}};t.prototype.focusIn=function(){this.eSelect.focus()};t.prototype.getValue=function(){return this.eSelect.value};r([u.Autowired("gridOptionsWrapper"),o("design:type",c.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([u.Autowired("valueFormatterService"),o("design:type",d.ValueFormatterService)],t.prototype,"valueFormatterService",void 0);return t}(a.Component);t.SelectCellEditor=f},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(77);var s=i(1);var l=function(){function e(){}e.prototype.adaptFunction=function(e,t,i,n){if(t==null)return{component:null,type:i,source:n,dynamicParams:null};var r=this.componentMetadataProvider.retrieve(e);if(r&&r.functionAdapter){return{type:i,component:r.functionAdapter(t),source:n,dynamicParams:null}}return null};e.prototype.adaptCellRendererFunction=function(e){var t=function(){function t(){}t.prototype.refresh=function(e){return false};t.prototype.getGui=function(){var t=e(this.params);var i=typeof t;if(i==="string"||i==="number"||i==="boolean"){return s._.loadTemplate("<span>"+t+"</span>")}else{return t}};t.prototype.init=function(e){this.params=e};return t}();return t};e.prototype.doesImplementIComponent=function(e){if(!e)return false;return e.prototype&&"getGui"in e.prototype};n([o.Autowired("componentMetadataProvider"),r("design:type",a.ComponentMetadataProvider)],e.prototype,"componentMetadataProvider",void 0);e=n([o.Bean("agComponentUtils")],e);return e}();t.AgComponentUtils=l},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(76);var s=function(){function e(){}e.prototype.postConstruct=function(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},headerComponent:{mandatoryMethodList:[],optionalMethodList:[]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"]},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},pinnedRowCellRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowInnerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","afterGuiAttached"]},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","afterGuiAttached"]}}};e.prototype.retrieve=function(e){return this.componentMetaData[e]};n([o.Autowired("agComponentUtils"),r("design:type",a.AgComponentUtils)],e.prototype,"agComponentUtils",void 0);n([o.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"postConstruct",null);e=n([o.Bean("componentMetadataProvider")],e);return e}();t.ComponentMetadataProvider=s},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(1);var s=i(129);var l=i(2);var u=i(4);var c=i(7);var d=i(20);var f=i(0);var p=i(3);var h=i(5);var g=i(40);var m=i(9);var v=i(17);var y=i(47);var b=i(44);var _=i(22);var w=i(36);var C=i(130);var A=i(29);var E=i(69);var x=i(58);var T=i(30);var S=i(6);var D=i(37);var k=i(50);var O=i(97);var R=i(16);var N=i(46);var P=i(21);var I=i(15);var M=i(131);var L=i(57);var F=i(8);var G=i(79);var $=i(53);var W=i(39);var H=i(28);var j=i(11);var B=i(80);var V='<div class="ag-root ag-font-style" role="grid">\n        <ag-header-root ref="headerRoot"></ag-header-root>\n        <div class="ag-floating-top" ref="eTop" role="presentation">\n            <div class="ag-pinned-left-floating-top" ref="eLeftTop" role="presentation"></div>\n            <div class="ag-floating-top-viewport" ref="eTopViewport" role="presentation">\n                <div class="ag-floating-top-container" ref="eTopContainer" role="presentation"></div>\n            </div>\n            <div class="ag-pinned-right-floating-top" ref="eRightTop" role="presentation"></div>\n            <div class="ag-floating-top-full-width-container" ref="eTopFullWidthContainer" role="presentation"></div>\n        </div>\n        <div class="ag-body" ref="eBody" role="presentation">\n            <div class="ag-pinned-left-cols-viewport-wrapper" ref="eLeftViewportWrapper" role="presentation">\n                <div class="ag-pinned-left-cols-viewport" ref="eLeftViewport" role="presentation">\n                    <div class="ag-pinned-left-cols-container" ref="eLeftContainer" role="presentation"></div>\n                </div>\n            </div>\n            <div class="ag-body-viewport-wrapper" role="presentation">\n                <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">\n                    <div class="ag-body-container" ref="eBodyContainer" role="presentation"></div>\n                </div>\n            </div>\n            <div class="ag-pinned-right-cols-viewport-wrapper" ref="eRightViewportWrapper" role="presentation">\n                <div class="ag-pinned-right-cols-viewport" ref="eRightViewport" role="presentation">\n                    <div class="ag-pinned-right-cols-container" ref="eRightContainer" role="presentation"></div>\n                </div>\n            </div>\n            <div class="ag-full-width-viewport-wrapper" ref="eFullWidthViewportWrapper" role="presentation">\n                <div class="ag-full-width-viewport" ref="eFullWidthViewport" role="presentation">\n                    <div class="ag-full-width-container" ref="eFullWidthContainer" role="presentation"></div>\n                </div>\n            </div>\n        </div>\n        <div class="ag-floating-bottom" ref="eBottom" role="presentation">\n            <div class="ag-pinned-left-floating-bottom" ref="eLeftBottom" role="presentation"></div>\n            <div class="ag-floating-bottom-viewport" ref="eBottomViewport" role="presentation">\n                <div class="ag-floating-bottom-container" ref="eBottomContainer" role="presentation"></div>\n            </div>\n            <div class="ag-pinned-right-floating-bottom" ref="eRightBottom" role="presentation"></div>\n            <div class="ag-floating-bottom-full-width-container" ref="eBottomFullWidthContainer" role="presentation"></div>\n        </div>\n        <div class="ag-overlay" ref="eOverlay"></div>\n    </div>';var z=function(e){n(t,e);function t(){var t=e.call(this,V)||this;t.scrollLeft=-1;t.nextScrollLeft=-1;t.scrollTop=-1;t.nextScrollTop=-1;t.verticalRedrawNeeded=false;return t}t.prototype.getVScrollPosition=function(){var e={top:this.eBodyViewport.scrollTop,bottom:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetHeight};return e};t.prototype.getHScrollPosition=function(){var e={left:this.eBodyViewport.scrollLeft,right:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetWidth};return e};t.prototype.destroy=function(){e.prototype.destroy.call(this)};t.prototype.onRowDataChanged=function(){this.showOrHideOverlay()};t.prototype.showOrHideOverlay=function(){if(this.paginationProxy.isEmpty()&&!this.gridOptionsWrapper.isSuppressNoRowsOverlay()){this.showNoRowsOverlay()}else{this.hideOverlay()}};t.prototype.onNewColumnsLoaded=function(){if(this.columnController.isReady()&&!this.paginationProxy.isEmpty()){this.hideOverlay()}};t.prototype.init=function(){this.instantiate(this.context);this.scrollWidth=this.gridOptionsWrapper.getScrollbarWidth();this.enableRtl=this.gridOptionsWrapper.isEnableRtl();this.useAnimationFrame=!this.gridOptionsWrapper.isSuppressAnimationFrame();this.scrollClipWidth=this.scrollWidth>0?this.scrollWidth:20;this.suppressScrollOnFloatingRow();this.setupRowAnimationCssClass();this.buildRowContainerComponents();this.addEventListeners();this.addDragListeners();this.addScrollListener();if(this.gridOptionsWrapper.isSuppressHorizontalScroll()){this.eBodyViewport.style.overflowX="hidden"}this.setupOverlay();if(this.gridOptionsWrapper.isRowModelDefault()&&!this.gridOptionsWrapper.getRowData()){this.showLoadingOverlay()}this.setPinnedContainersVisible();this.setBodyAndHeaderHeights();this.disableBrowserDragging();this.addShortcutKeyListeners();this.addMouseListeners();this.addKeyboardEvents();this.addBodyViewportListener();this.addStopEditingWhenGridLosesFocus();this.mockContextMenuForIPad();this.addRowDragListener();if(this.$scope){this.addAngularApplyCheck()}this.onDisplayedColumnsWidthChanged();this.gridApi.registerGridComp(this);this.alignedGridsService.registerGridComp(this);this.headerRootComp.registerGridComp(this);this.animationFrameService.registerGridComp(this);this.navigationService.registerGridComp(this);this.heightScaler.registerGridComp(this);this.autoHeightCalculator.registerGridComp(this);this.columnAnimationService.registerGridComp(this);this.autoWidthCalculator.registerGridComp(this);this.paginationAutoPageSizeService.registerGridComp(this);this.beans.registerGridComp(this);this.rowRenderer.registerGridComp(this);if(this.rangeController){this.rangeController.registerGridComp(this)}var e=s.observeResize(this.eBodyViewport,this.checkViewportAndScrolls.bind(this));this.addDestroyFunc((function(){return e()}))};t.prototype.setColumnMovingCss=function(e){this.addOrRemoveCssClass("ag-column-moving",e)};t.prototype.setupOverlay=function(){this.overlayWrapper=this.componentRecipes.newOverlayWrapperComponent();this.eOverlay=this.queryForHtmlElement('[ref="eOverlay"]');this.overlayWrapper.hideOverlay(this.eOverlay)};t.prototype.addRowDragListener=function(){var e=new M.RowDragFeature(this.eBody,this);this.context.wireBean(e);this.dragAndDropService.addDropTarget(e)};t.prototype.addStopEditingWhenGridLosesFocus=function(){var e=this;if(this.gridOptionsWrapper.isStopEditingWhenGridLosesFocus()){this.addDestroyableEventListener(this.eBody,"focusout",(function(t){var i=t.relatedTarget;var n=false;var r=i;while(a.Utils.exists(r)&&!n){var o=!!e.gridOptionsWrapper.getDomData(r,E.PopupEditorWrapper.DOM_KEY_POPUP_EDITOR_WRAPPER);var s=e.eBody==r;n=o||s;r=r.parentNode}if(!n){e.rowRenderer.stopEditing()}}))}};t.prototype.addAngularApplyCheck=function(){var e=this;var t=false;var i=function(){if(t){return}t=true;setTimeout((function(){t=false;e.$scope.$apply()}),0)};this.addDestroyableEventListener(this.eventService,h.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,i);this.addDestroyableEventListener(this.eventService,h.Events.EVENT_VIRTUAL_COLUMNS_CHANGED,i)};t.prototype.disableBrowserDragging=function(){this.getGui().addEventListener("dragstart",(function(e){if(e.target instanceof HTMLImageElement){e.preventDefault();return false}}))};t.prototype.addEventListeners=function(){this.addDestroyableEventListener(this.eventService,h.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this));this.addDestroyableEventListener(this.eventService,h.Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this));this.addDestroyableEventListener(this.eventService,h.Events.EVENT_PINNED_ROW_DATA_CHANGED,this.setBodyAndHeaderHeights.bind(this));this.addDestroyableEventListener(this.eventService,h.Events.EVENT_ROW_DATA_CHANGED,this.onRowDataChanged.bind(this));this.addDestroyableEventListener(this.eventService,h.Events.EVENT_ROW_DATA_UPDATED,this.onRowDataChanged.bind(this));this.addDestroyableEventListener(this.eventService,h.Events.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this));this.addDestroyableEventListener(this.gridOptionsWrapper,l.GridOptionsWrapper.PROP_HEADER_HEIGHT,this.setBodyAndHeaderHeights.bind(this));this.addDestroyableEventListener(this.gridOptionsWrapper,l.GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT,this.setBodyAndHeaderHeights.bind(this));this.addDestroyableEventListener(this.gridOptionsWrapper,l.GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT,this.setBodyAndHeaderHeights.bind(this));this.addDestroyableEventListener(this.gridOptionsWrapper,l.GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT,this.setBodyAndHeaderHeights.bind(this));this.addDestroyableEventListener(this.gridOptionsWrapper,l.GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT,this.setBodyAndHeaderHeights.bind(this))};t.prototype.addDragListeners=function(){var e=this;if(!this.gridOptionsWrapper.isEnableRangeSelection()||a.Utils.missing(this.rangeController)){return}var t=[this.eLeftContainer,this.eRightContainer,this.eBodyContainer,this.eTop,this.eBottom];t.forEach((function(t){var i={eElement:t,onDragStart:e.rangeController.onDragStart.bind(e.rangeController),onDragStop:e.rangeController.onDragStop.bind(e.rangeController),onDragging:e.rangeController.onDragging.bind(e.rangeController),skipMouseEvent:function(e){return e.shiftKey}};e.dragService.addDragSource(i);e.addDestroyFunc((function(){return e.dragService.removeDragSource(i)}))}))};t.prototype.addMouseListeners=function(){var e=this;var t=["click","mousedown","dblclick","contextmenu","mouseover","mouseout"];t.forEach((function(t){var i=e.processMouseEvent.bind(e,t);e.eAllCellContainers.forEach((function(n){return e.addDestroyableEventListener(n,t,i)}))}))};t.prototype.addKeyboardEvents=function(){var e=this;var t=["keydown","keypress"];t.forEach((function(t){var i=e.processKeyboardEvent.bind(e,t);e.eAllCellContainers.forEach((function(n){e.addDestroyableEventListener(n,t,i)}))}))};t.prototype.addBodyViewportListener=function(){var e=this;var t=function(t){var i=a.Utils.getTarget(t);if(i===e.eBodyViewport||i===e.eLeftViewport||i===e.eRightViewport){e.onContextMenu(t,null,null,null,null);e.preventDefaultOnContextMenu(t)}};this.addDestroyableEventListener(this.eBodyViewport,"contextmenu",t);this.addDestroyableEventListener(this.eRightViewport,"contextmenu",t);this.addDestroyableEventListener(this.eLeftViewport,"contextmenu",t)};t.prototype.getBodyClientRect=function(){if(this.eBody){return this.eBody.getBoundingClientRect()}};t.prototype.getRowForEvent=function(e){var t=a.Utils.getTarget(e);while(t){var i=this.gridOptionsWrapper.getDomData(t,k.RowComp.DOM_DATA_KEY_RENDERED_ROW);if(i){return i}t=t.parentElement}return null};t.prototype.processKeyboardEvent=function(e,t){var i=this.mouseEventService.getRenderedCellForEvent(t);if(!i){return}switch(e){case"keydown":var n=this.navigationService.handlePageScrollingKey(t);if(!n){i.onKeyDown(t)}break;case"keypress":i.onKeyPress(t);break}};t.prototype.scrollToTop=function(){this.eBodyViewport.scrollTop=0};t.prototype.processMouseEvent=function(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)){return}if(a.Utils.isStopPropagationForAgGrid(t)){return}var i=this.getRowForEvent(t);var n=this.mouseEventService.getRenderedCellForEvent(t);if(e==="contextmenu"){this.handleContextMenuMouseEvent(t,null,i,n)}else{if(n){n.onMouseEvent(e,t)}if(i){i.onMouseEvent(e,t)}}this.preventDefaultOnContextMenu(t)};t.prototype.mockContextMenuForIPad=function(){var e=this;if(!a.Utils.isUserAgentIPad()){return}this.eAllCellContainers.forEach((function(t){var i=new N.TouchListener(t);var n=function(t){var i=e.getRowForEvent(t.touchEvent);var n=e.mouseEventService.getRenderedCellForEvent(t.touchEvent);e.handleContextMenuMouseEvent(null,t.touchEvent,i,n)};e.addDestroyableEventListener(i,N.TouchListener.EVENT_LONG_TAP,n);e.addDestroyFunc((function(){return i.destroy()}))}))};t.prototype.handleContextMenuMouseEvent=function(e,t,i,n){var r=i?i.getRowNode():null;var o=n?n.getColumn():null;var a=null;if(o){var s=e?e:t;n.dispatchCellContextMenuEvent(s);a=this.valueService.getValue(o,r)}this.onContextMenu(e,t,r,o,a)};t.prototype.onContextMenu=function(e,t,i,n,r){if(!this.gridOptionsWrapper.isAllowContextMenuWithControlKey()){if(e&&(e.ctrlKey||e.metaKey)){return}}if(this.contextMenuFactory&&!this.gridOptionsWrapper.isSuppressContextMenu()){var o=e?e:t.touches[0];this.contextMenuFactory.showMenu(i,n,r,o);var a=e?e:t;a.preventDefault()}};t.prototype.preventDefaultOnContextMenu=function(e){if(this.gridOptionsWrapper.isSuppressMiddleClickScrolls()&&e.which===2){e.preventDefault()}};t.prototype.addShortcutKeyListeners=function(){var e=this;this.eAllCellContainers.forEach((function(t){t.addEventListener("keydown",(function(t){var i=e.mouseEventService.getRenderedCellForEvent(t);if(i&&i.isEditing()){return}if(!e.mouseEventService.isEventFromThisGrid(t)){return}if(t.ctrlKey||t.metaKey){switch(t.which){case m.Constants.KEY_A:return e.onCtrlAndA(t);case m.Constants.KEY_C:return e.onCtrlAndC(t);case m.Constants.KEY_V:return e.onCtrlAndV(t);case m.Constants.KEY_D:return e.onCtrlAndD(t)}}}))}))};t.prototype.onCtrlAndA=function(e){if(this.rangeController&&this.paginationProxy.isRowsToRender()){var t=void 0;var i=void 0;var n=void 0;if(this.pinnedRowModel.isEmpty(m.Constants.PINNED_TOP)){i=null}else{i=m.Constants.PINNED_TOP}if(this.pinnedRowModel.isEmpty(m.Constants.PINNED_BOTTOM)){n=null;t=this.paginationProxy.getTotalRowCount()-1}else{n=m.Constants.PINNED_BOTTOM;t=this.pinnedRowModel.getPinnedBottomRowData().length-1}var r=this.columnController.getAllDisplayedColumns();if(a.Utils.missingOrEmpty(r)){return}this.rangeController.setRange({rowStart:0,floatingStart:i,rowEnd:t,floatingEnd:n,columnStart:r[0],columnEnd:r[r.length-1]})}e.preventDefault();return false};t.prototype.onCtrlAndC=function(e){if(!this.clipboardService){return}var t=this.focusedCellController.getFocusedCell();this.clipboardService.copyToClipboard();e.preventDefault();if(t){this.focusedCellController.setFocusedCell(t.rowIndex,t.column,t.floating,true)}return false};t.prototype.onCtrlAndV=function(e){if(!this.enterprise){return}if(this.gridOptionsWrapper.isSuppressClipboardPaste()){return}this.clipboardService.pasteFromClipboard();return false};t.prototype.onCtrlAndD=function(e){if(!this.enterprise){return}this.clipboardService.copyRangeDown();e.preventDefault();return false};t.prototype.ensureIndexVisible=function(e,t){if(this.gridOptionsWrapper.isGridAutoHeight()){return}var i=this.paginationProxy.getTotalRowCount();if(typeof e!=="number"||e<0||e>=i){console.warn("invalid row index for ensureIndexVisible: "+e);return}this.paginationProxy.goToPageWithIndex(e);var n=this.paginationProxy.getRow(e);var r=this.paginationProxy.getPixelOffset();var o=n.rowTop-r;var a=o+n.rowHeight;var s=this.getVScrollPosition();var l=this.heightScaler.getOffset();var u=s.top+l;var c=s.bottom+l;if(this.isHorizontalScrollShowing()){c-=this.scrollWidth}var d=c-u;var f=null;var p=this.heightScaler.getScrollPositionForPixel(o);var h=this.heightScaler.getScrollPositionForPixel(a-d);var g=(p+h)/2;if(g>o){g=o}var m=u>o;var v=c<a;if(t==="top"){f=p}else if(t==="bottom"){f=h}else if(t==="middle"){f=g}else if(m){f=p}else if(v){f=h}if(f!==null){this.eBodyViewport.scrollTop=f;this.rowRenderer.redrawAfterScroll()}};t.prototype.getCenterWidth=function(){return this.eBodyViewport.clientWidth};t.prototype.isHorizontalScrollShowing=function(){return a.Utils.isHorizontalScrollShowing(this.eBodyViewport)};t.prototype.isVerticalScrollShowing=function(){return a.Utils.isVerticalScrollShowing(this.eBodyViewport)};t.prototype.checkViewportAndScrolls=function(){this.updateScrollVisibleService();this.checkBodyHeight();this.onHorizontalViewportChanged();this.setPinnedLeftWidth();this.setPinnedRightWidth();this.setBottomPaddingOnPinned();this.hideVerticalScrollOnCenter();this.hideFullWidthViewportScrollbars()};t.prototype.updateScrollVisibleService=function(){var e={bodyHorizontalScrollShowing:false,leftVerticalScrollShowing:false,rightVerticalScrollShowing:false};if(this.enableRtl&&this.columnController.isPinningLeft()){e.leftVerticalScrollShowing=a.Utils.isVerticalScrollShowing(this.eLeftViewport)}if(!this.enableRtl&&this.columnController.isPinningRight()){e.rightVerticalScrollShowing=a.Utils.isVerticalScrollShowing(this.eRightViewport)}e.bodyHorizontalScrollShowing=this.isHorizontalScrollShowing();this.scrollVisibleService.setScrollsVisible(e)};t.prototype.setBottomPaddingOnPinned=function(){if(this.scrollWidth<=0){return}if(this.isHorizontalScrollShowing()){this.eRightContainer.style.marginBottom=this.scrollWidth+"px";this.eLeftContainer.style.marginBottom=this.scrollWidth+"px"}else{this.eRightContainer.style.marginBottom="";this.eLeftContainer.style.marginBottom=""}};t.prototype.hideFullWidthViewportScrollbars=function(){var e=this.scrollClipWidth>0?this.scrollWidth+"px":"";this.eFullWidthViewportWrapper.style.paddingBottom=this.isHorizontalScrollShowing()?e:"";var t=this.isVerticalScrollShowing();if(this.enableRtl){this.eFullWidthViewportWrapper.style.marginLeft=t?e:"";this.eFullWidthViewport.style.marginLeft=t?"-"+e:""}else{this.eFullWidthViewportWrapper.style.width=t?"calc(100% - "+e+")":"";this.eFullWidthViewport.style.width=t?"calc(100% + "+e+")":""}};t.prototype.ensureColumnVisible=function(e){var t=this.columnController.getGridColumn(e);if(!t){return}if(t.isPinned()){console.warn("calling ensureIndexVisible on a "+t.getPinned()+" pinned column doesn't make sense for column "+t.getColId());return}if(!this.columnController.isColumnDisplayed(t)){console.warn("column is not currently visible");return}var i=t.getLeft();var n=i+t.getActualWidth();var r=this.eBodyViewport.clientWidth;var o=this.getBodyViewportScrollLeft();var a=this.columnController.getBodyContainerWidth();var s;var l;if(this.enableRtl){s=a-o-r;l=a-o}else{s=o;l=r+o}var u=s>i;var c=l<n;var d=r<t.getActualWidth();var f=u||d;var p=c;if(f){if(this.enableRtl){var h=a-r-i;this.setBodyViewportScrollLeft(h)}else{this.setBodyViewportScrollLeft(i)}}else if(p){if(this.enableRtl){var h=a-n;this.setBodyViewportScrollLeft(h)}else{var h=n-r;this.setBodyViewportScrollLeft(h)}}else{}this.onHorizontalViewportChanged()};t.prototype.showLoadingOverlay=function(){this.overlayWrapper.showLoadingOverlay(this.eOverlay)};t.prototype.showNoRowsOverlay=function(){this.overlayWrapper.showNoRowsOverlay(this.eOverlay)};t.prototype.hideOverlay=function(){this.overlayWrapper.hideOverlay(this.eOverlay)};t.prototype.getWidthForSizeColsToFit=function(){var e=this.eBody.clientWidth;var t=this.isVerticalScrollShowing();if(t){e-=this.scrollWidth}return e};t.prototype.sizeColumnsToFit=function(e){var t=this;var i=this.getWidthForSizeColsToFit();if(i>0){this.columnController.sizeColumnsToFit(i,"sizeColumnsToFit")}else{if(e===undefined){setTimeout((function(){t.sizeColumnsToFit(100)}),0)}else if(e===100){setTimeout((function(){t.sizeColumnsToFit(500)}),100)}else if(e===500){setTimeout((function(){t.sizeColumnsToFit(-1)}),500)}else{console.log("ag-Grid: tried to call sizeColumnsToFit() but the grid is coming back with "+"zero width, maybe the grid is not visible yet on the screen?")}}};t.prototype.getBodyContainer=function(){return this.eBodyContainer};t.prototype.getDropTargetBodyContainers=function(){return[this.eBodyViewport,this.eTopViewport,this.eBottomViewport]};t.prototype.getDropTargetLeftContainers=function(){return[this.eLeftViewport,this.eLeftBottom,this.eLeftTop]};t.prototype.getDropTargetRightContainers=function(){return[this.eRightViewport,this.eRightBottom,this.eRightTop]};t.prototype.buildRowContainerComponents=function(){var e=this;this.eAllCellContainers=[this.eLeftContainer,this.eRightContainer,this.eBodyContainer,this.eTop,this.eBottom,this.eFullWidthContainer];this.rowContainerComponents={body:new C.RowContainerComponent({eContainer:this.eBodyContainer,eViewport:this.eBodyViewport}),fullWidth:new C.RowContainerComponent({eContainer:this.eFullWidthContainer,hideWhenNoChildren:true,eViewport:this.eFullWidthViewport}),pinnedLeft:new C.RowContainerComponent({eContainer:this.eLeftContainer,eViewport:this.eLeftViewport}),pinnedRight:new C.RowContainerComponent({eContainer:this.eRightContainer,eViewport:this.eRightViewport}),floatingTop:new C.RowContainerComponent({eContainer:this.eTopContainer}),floatingTopPinnedLeft:new C.RowContainerComponent({eContainer:this.eLeftTop}),floatingTopPinnedRight:new C.RowContainerComponent({eContainer:this.eRightTop}),floatingTopFullWidth:new C.RowContainerComponent({eContainer:this.eTopFullWidthContainer,hideWhenNoChildren:true}),floatingBottom:new C.RowContainerComponent({eContainer:this.eBottomContainer}),floatingBottomPinnedLeft:new C.RowContainerComponent({eContainer:this.eLeftBottom}),floatingBottomPinnedRight:new C.RowContainerComponent({eContainer:this.eRightBottom}),floatingBottomFullWith:new C.RowContainerComponent({eContainer:this.eBottomFullWidthContainer,hideWhenNoChildren:true})};a.Utils.iterateObject(this.rowContainerComponents,(function(t,i){if(i){e.context.wireBean(i)}}))};t.prototype.setupRowAnimationCssClass=function(){var e=this;var t=function(){var t=e.gridOptionsWrapper.isAnimateRows()&&!e.heightScaler.isScaling();a.Utils.addOrRemoveCssClass(e.eBody,"ag-row-animation",t);a.Utils.addOrRemoveCssClass(e.eBody,"ag-row-no-animation",!t)};t();this.addDestroyableEventListener(this.eventService,h.Events.EVENT_HEIGHT_SCALE_CHANGED,t)};t.prototype.suppressScrollOnFloatingRow=function(){var e=this;var t=function(){return e.eTopViewport.scrollLeft=0};var i=function(){return e.eTopViewport.scrollLeft=0};this.addDestroyableEventListener(this.eTopViewport,"scroll",t);this.addDestroyableEventListener(this.eBottomViewport,"scroll",i)};t.prototype.getRowContainers=function(){return this.rowContainerComponents};t.prototype.onDisplayedColumnsChanged=function(){this.setPinnedContainersVisible();this.setBodyAndHeaderHeights();this.onHorizontalViewportChanged()};t.prototype.onDisplayedColumnsWidthChanged=function(){this.setWidthsOfContainers();this.onHorizontalViewportChanged();if(this.enableRtl){this.horizontallyScrollHeaderCenterAndFloatingCenter()}};t.prototype.setWidthsOfContainers=function(){this.setCenterWidth();this.setPinnedLeftWidth();this.setPinnedRightWidth()};t.prototype.setCenterWidth=function(){var e=this.columnController.getBodyContainerWidth()+"px";this.eBodyContainer.style.width=e;this.eBottomContainer.style.width=e;this.eTopContainer.style.width=e};t.prototype.setPinnedLeftWidth=function(){var e=this.columnController.getPinnedLeftContainerWidth();var t=e+this.scrollWidth;var i=e+this.scrollClipWidth;var n;var r;if(a.Utils.isVerticalScrollShowing(this.eLeftViewport)){if(this.enableRtl){n=t;r=t}else{n=i;r=e}}else{n=e;r=e}this.setElementWidth(this.eLeftViewportWrapper,r);this.setElementWidth(this.eLeftViewport,n);this.setElementWidth(this.eLeftContainer,e);this.setElementWidth(this.eLeftBottom,r);this.setElementWidth(this.eLeftTop,r)};t.prototype.setPinnedRightWidth=function(){var e=this.columnController.getPinnedRightContainerWidth();var t=e+this.scrollWidth;var i=e+this.scrollClipWidth;var n;var r;if(a.Utils.isVerticalScrollShowing(this.eRightViewport)){if(!this.enableRtl){n=t;r=t}else{n=i;r=e}}else{n=e;r=e}this.setElementWidth(this.eRightViewportWrapper,r);this.setElementWidth(this.eRightViewport,n);this.setElementWidth(this.eRightContainer,e);this.setElementWidth(this.eRightBottom,r);this.setElementWidth(this.eRightTop,r)};t.prototype.setElementWidth=function(e,t){e.style.width=t+"px";e.style.minWidth=t+"px"};t.prototype.setPinnedContainersVisible=function(){var e=false;var t=this.columnController.isPinningLeft();if(t!==this.pinningLeft){this.pinningLeft=t;this.headerRootComp.setLeftVisible(t);a.Utils.setVisible(this.eLeftViewportWrapper,t);e=true;if(t){this.eLeftViewport.scrollTop=this.eBodyViewport.scrollTop}}var i=this.columnController.isPinningRight();if(i!==this.pinningRight){this.pinningRight=i;this.headerRootComp.setRightVisible(i);a.Utils.setVisible(this.eRightViewportWrapper,i);if(i){this.eRightViewport.scrollTop=this.eBodyViewport.scrollTop}e=true}if(e){this.hideVerticalScrollOnCenter();this.setPinnedLeftWidth();this.setPinnedRightWidth()}};t.prototype.hideVerticalScrollOnCenter=function(){var e=this.enableRtl?this.columnController.isPinningLeft():this.columnController.isPinningRight();var t=a.Utils.isVerticalScrollShowing(this.eBodyViewport);var i=e&&t;var n=i?"-"+this.scrollClipWidth+"px":"";if(this.enableRtl){this.eBodyViewport.style.marginLeft=n}else{this.eBodyViewport.style.marginRight=n}};t.prototype.checkBodyHeight=function(){var e=this.eBody.clientHeight;if(this.bodyHeight!==e){this.bodyHeight=e;var t={type:h.Events.EVENT_BODY_HEIGHT_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(t)}};t.prototype.setBodyAndHeaderHeights=function(){var e=this.columnController.getHeaderRowCount();var t;var i=0;var n;var r;if(!this.columnController.isPivotMode()){if(this.gridOptionsWrapper.isFloatingFilter()){e++}i=this.gridOptionsWrapper.isFloatingFilter()?1:0;n=this.gridOptionsWrapper.getGroupHeaderHeight();r=this.gridOptionsWrapper.getHeaderHeight()}else{i=0;n=this.gridOptionsWrapper.getPivotGroupHeaderHeight();r=this.gridOptionsWrapper.getPivotHeaderHeight()}var o=1+i;var a=e-o;t=i*this.gridOptionsWrapper.getFloatingFiltersHeight();t+=a*n;t+=r;this.headerRootComp.setHeight(t);var s=this.pinnedRowModel.getPinnedTopTotalHeight();var l=this.pinnedRowModel.getPinnedBottomTotalHeight();this.eTop.style.minHeight=s+"px";this.eTop.style.height=s+"px";this.eBottom.style.minHeight=l+"px";this.eBottom.style.height=l+"px";this.checkBodyHeight()};t.prototype.getBodyHeight=function(){return this.bodyHeight};t.prototype.setHorizontalScrollPosition=function(e){this.eBodyViewport.scrollLeft=e;if(this.nextScrollLeft!==e){this.nextScrollLeft=e;this.doHorizontalScroll()}};t.prototype.setVerticalScrollPosition=function(e){this.eBodyViewport.scrollTop=e};t.prototype.scrollHorizontally=function(e){var t=this.eBodyViewport.scrollLeft;this.setHorizontalScrollPosition(t+e);var i=this.eBodyViewport.scrollLeft;return i-t};t.prototype.scrollVertically=function(e){var t=this.eBodyViewport.scrollTop;this.setVerticalScrollPosition(t+e);var i=this.eBodyViewport.scrollTop;return i-t};t.prototype.addScrollListener=function(){var e=this;this.addDestroyableEventListener(this.eBodyViewport,"scroll",(function(){e.onBodyHorizontalScroll();e.onAnyBodyScroll(e.eBodyViewport)}));this.addDestroyableEventListener(this.eRightViewport,"scroll",this.onAnyBodyScroll.bind(this,this.eRightViewport));this.addDestroyableEventListener(this.eLeftViewport,"scroll",this.onAnyBodyScroll.bind(this,this.eLeftViewport));this.addDestroyableEventListener(this.eFullWidthViewport,"scroll",this.onAnyBodyScroll.bind(this,this.eFullWidthViewport))};t.prototype.onAnyBodyScroll=function(e){var t=(new Date).getTime();var i=t-this.lastVScrollTime;var n=e!==this.lastVScrollElement&&i<500;if(n){return}this.lastVScrollElement=e;this.lastVScrollTime=t;var r=e.scrollTop;if(this.useAnimationFrame){if(this.nextScrollTop!==r){this.nextScrollTop=r;this.animationFrameService.schedule()}}else{if(r!==this.scrollTop){this.scrollTop=r;this.synchroniseVerticalScrollPositions(r);this.redrawRowsAfterScroll()}}};t.prototype.onBodyHorizontalScroll=function(){var e=this.eBodyViewport.scrollLeft;if(this.nextScrollLeft!==e){this.nextScrollLeft=e;if(this.useAnimationFrame){this.animationFrameService.schedule()}else{this.doHorizontalScroll()}}};t.prototype.doHorizontalScroll=function(){this.scrollLeft=this.nextScrollLeft;var e={type:h.Events.EVENT_BODY_SCROLL,api:this.gridApi,columnApi:this.columnApi,direction:"horizontal",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(e);this.horizontallyScrollHeaderCenterAndFloatingCenter();this.onHorizontalViewportChanged()};t.prototype.executeFrame=function(){if(this.scrollLeft!==this.nextScrollLeft){this.doHorizontalScroll();return true}else if(this.scrollTop!==this.nextScrollTop){this.scrollTop=this.nextScrollTop;this.synchroniseVerticalScrollPositions(this.scrollTop);this.verticalRedrawNeeded=true;return true}else if(this.verticalRedrawNeeded){this.redrawRowsAfterScroll();this.verticalRedrawNeeded=false;return true}else{return false}};t.prototype.redrawRowsAfterScroll=function(){var e={type:h.Events.EVENT_BODY_SCROLL,direction:"vertical",api:this.gridApi,columnApi:this.columnApi,left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(e)};t.prototype.onHorizontalViewportChanged=function(){var e=this.eBodyViewport.clientWidth;var t=this.getBodyViewportScrollLeft();this.columnController.setVirtualViewportPosition(e,t)};t.prototype.getBodyViewportScrollLeft=function(){return a.Utils.getScrollLeft(this.eBodyViewport,this.enableRtl)};t.prototype.setBodyViewportScrollLeft=function(e){a.Utils.setScrollLeft(this.eBodyViewport,e,this.enableRtl)};t.prototype.horizontallyScrollHeaderCenterAndFloatingCenter=function(){var e=this.getBodyViewportScrollLeft();var t=this.enableRtl?e:-e;this.headerRootComp.setHorizontalScroll(t);this.eBottomContainer.style.left=t+"px";this.eTopContainer.style.left=t+"px"};t.prototype.synchroniseVerticalScrollPositions=function(e){if(this.lastVScrollElement!==this.eBodyViewport){this.eBodyViewport.scrollTop=e}if(this.lastVScrollElement!==this.eLeftViewport&&this.pinningLeft){this.eLeftViewport.scrollTop=e}if(this.lastVScrollElement!==this.eRightViewport&&this.pinningRight){this.eRightViewport.scrollTop=e}if(this.lastVScrollElement!==this.eFullWidthViewport){this.eFullWidthViewport.scrollTop=e}this.rowContainerComponents.body.setVerticalScrollPosition(e);this.rowContainerComponents.pinnedLeft.setVerticalScrollPosition(e);this.rowContainerComponents.pinnedRight.setVerticalScrollPosition(e);this.rowContainerComponents.fullWidth.setVerticalScrollPosition(e);this.redrawRowsAfterScroll()};t.prototype.addScrollEventListener=function(e){this.eBodyViewport.addEventListener("scroll",e)};t.prototype.removeScrollEventListener=function(e){this.eBodyViewport.removeEventListener("scroll",e)};r([f.Autowired("alignedGridsService"),o("design:type",x.AlignedGridsService)],t.prototype,"alignedGridsService",void 0);r([f.Autowired("gridOptionsWrapper"),o("design:type",l.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([f.Autowired("columnController"),o("design:type",u.ColumnController)],t.prototype,"columnController",void 0);r([f.Autowired("rowRenderer"),o("design:type",d.RowRenderer)],t.prototype,"rowRenderer",void 0);r([f.Autowired("pinnedRowModel"),o("design:type",T.PinnedRowModel)],t.prototype,"pinnedRowModel",void 0);r([f.Autowired("eventService"),o("design:type",p.EventService)],t.prototype,"eventService",void 0);r([f.Autowired("context"),o("design:type",f.Context)],t.prototype,"context",void 0);r([f.Autowired("animationFrameService"),o("design:type",D.AnimationFrameService)],t.prototype,"animationFrameService",void 0);r([f.Autowired("navigationService"),o("design:type",O.NavigationService)],t.prototype,"navigationService",void 0);r([f.Autowired("autoHeightCalculator"),o("design:type",G.AutoHeightCalculator)],t.prototype,"autoHeightCalculator",void 0);r([f.Autowired("columnAnimationService"),o("design:type",$.ColumnAnimationService)],t.prototype,"columnAnimationService",void 0);r([f.Autowired("autoWidthCalculator"),o("design:type",W.AutoWidthCalculator)],t.prototype,"autoWidthCalculator",void 0);r([f.Autowired("paginationAutoPageSizeService"),o("design:type",A.PaginationAutoPageSizeService)],t.prototype,"paginationAutoPageSizeService",void 0);r([f.Autowired("beans"),o("design:type",H.Beans)],t.prototype,"beans",void 0);r([f.Autowired("paginationProxy"),o("design:type",A.PaginationProxy)],t.prototype,"paginationProxy",void 0);r([f.Autowired("columnApi"),o("design:type",c.ColumnApi)],t.prototype,"columnApi",void 0);r([f.Autowired("gridApi"),o("design:type",S.GridApi)],t.prototype,"gridApi",void 0);r([f.Autowired("dragService"),o("design:type",g.DragService)],t.prototype,"dragService",void 0);r([f.Autowired("selectionController"),o("design:type",v.SelectionController)],t.prototype,"selectionController",void 0);r([f.Autowired("csvCreator"),o("design:type",y.CsvCreator)],t.prototype,"csvCreator",void 0);r([f.Autowired("mouseEventService"),o("design:type",b.MouseEventService)],t.prototype,"mouseEventService",void 0);r([f.Autowired("focusedCellController"),o("design:type",_.FocusedCellController)],t.prototype,"focusedCellController",void 0);r([f.Autowired("$scope"),o("design:type",Object)],t.prototype,"$scope",void 0);r([f.Autowired("scrollVisibleService"),o("design:type",w.ScrollVisibleService)],t.prototype,"scrollVisibleService",void 0);r([f.Autowired("frameworkFactory"),o("design:type",Object)],t.prototype,"frameworkFactory",void 0);r([f.Autowired("valueService"),o("design:type",R.ValueService)],t.prototype,"valueService",void 0);r([f.Autowired("componentRecipes"),o("design:type",P.ComponentRecipes)],t.prototype,"componentRecipes",void 0);r([f.Autowired("dragAndDropService"),o("design:type",I.DragAndDropService)],t.prototype,"dragAndDropService",void 0);r([f.Autowired("heightScaler"),o("design:type",L.HeightScaler)],t.prototype,"heightScaler",void 0);r([f.Autowired("enterprise"),o("design:type",Boolean)],t.prototype,"enterprise",void 0);r([f.Optional("rangeController"),o("design:type",Object)],t.prototype,"rangeController",void 0);r([f.Optional("contextMenuFactory"),o("design:type",Object)],t.prototype,"contextMenuFactory",void 0);r([f.Optional("clipboardService"),o("design:type",Object)],t.prototype,"clipboardService",void 0);r([j.RefSelector("eBody"),o("design:type",HTMLElement)],t.prototype,"eBody",void 0);r([j.RefSelector("eBodyViewport"),o("design:type",HTMLElement)],t.prototype,"eBodyViewport",void 0);r([j.RefSelector("eBodyContainer"),o("design:type",HTMLElement)],t.prototype,"eBodyContainer",void 0);r([j.RefSelector("eLeftContainer"),o("design:type",HTMLElement)],t.prototype,"eLeftContainer",void 0);r([j.RefSelector("eRightContainer"),o("design:type",HTMLElement)],t.prototype,"eRightContainer",void 0);r([j.RefSelector("eFullWidthViewportWrapper"),o("design:type",HTMLElement)],t.prototype,"eFullWidthViewportWrapper",void 0);r([j.RefSelector("eFullWidthViewport"),o("design:type",HTMLElement)],t.prototype,"eFullWidthViewport",void 0);r([j.RefSelector("eFullWidthContainer"),o("design:type",HTMLElement)],t.prototype,"eFullWidthContainer",void 0);r([j.RefSelector("eLeftViewport"),o("design:type",HTMLElement)],t.prototype,"eLeftViewport",void 0);r([j.RefSelector("eLeftViewportWrapper"),o("design:type",HTMLElement)],t.prototype,"eLeftViewportWrapper",void 0);r([j.RefSelector("eRightViewport"),o("design:type",HTMLElement)],t.prototype,"eRightViewport",void 0);r([j.RefSelector("eRightViewportWrapper"),o("design:type",HTMLElement)],t.prototype,"eRightViewportWrapper",void 0);r([j.RefSelector("eTop"),o("design:type",HTMLElement)],t.prototype,"eTop",void 0);r([j.RefSelector("eLeftTop"),o("design:type",HTMLElement)],t.prototype,"eLeftTop",void 0);r([j.RefSelector("eRightTop"),o("design:type",HTMLElement)],t.prototype,"eRightTop",void 0);r([j.RefSelector("eTopContainer"),o("design:type",HTMLElement)],t.prototype,"eTopContainer",void 0);r([j.RefSelector("eTopViewport"),o("design:type",HTMLElement)],t.prototype,"eTopViewport",void 0);r([j.RefSelector("eTopFullWidthContainer"),o("design:type",HTMLElement)],t.prototype,"eTopFullWidthContainer",void 0);r([j.RefSelector("eBottom"),o("design:type",HTMLElement)],t.prototype,"eBottom",void 0);r([j.RefSelector("eLeftBottom"),o("design:type",HTMLElement)],t.prototype,"eLeftBottom",void 0);r([j.RefSelector("eRightBottom"),o("design:type",HTMLElement)],t.prototype,"eRightBottom",void 0);r([j.RefSelector("eBottomContainer"),o("design:type",HTMLElement)],t.prototype,"eBottomContainer",void 0);r([j.RefSelector("eBottomViewport"),o("design:type",HTMLElement)],t.prototype,"eBottomViewport",void 0);r([j.RefSelector("eBottomFullWidthContainer"),o("design:type",HTMLElement)],t.prototype,"eBottomFullWidthContainer",void 0);r([j.RefSelector("headerRoot"),o("design:type",B.HeaderRootComp)],t.prototype,"headerRootComp",void 0);r([f.PreDestroy,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"destroy",null);r([f.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"init",null);return t}(F.Component);t.GridPanel=z},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(28);var s=i(34);var l=i(4);var u=i(1);var c=function(){function e(){}e.prototype.registerGridComp=function(e){this.gridPanel=e};e.prototype.getPreferredHeightForRow=function(e){var t=this;if(!this.eDummyContainer){this.eDummyContainer=document.createElement("div");u._.addCssClass(this.eDummyContainer,"ag-row ag-row-no-focus")}var i=this.gridPanel.getBodyContainer();i.appendChild(this.eDummyContainer);var n=[];var r=this.columnController.getAllAutoRowHeightCols();console.log();r.forEach((function(i){var r=new s.CellComp(t.$scope,t.beans,i,e,null,true);r.setParentRow(t.eDummyContainer);n.push(r)}));var o=n.map((function(e){return e.getCreateTemplate()})).join(" ");this.eDummyContainer.innerHTML=o;n.forEach((function(e){return e.afterAttached()}));var a=0;for(var l=0;l<this.eDummyContainer.children.length;l++){var c=this.eDummyContainer.children[l];if(c.offsetHeight>a){a=c.offsetHeight}}i.removeChild(this.eDummyContainer);n.forEach((function(e){e.detach();e.destroy()}));u._.removeAllChildren(this.eDummyContainer);return a};n([o.Autowired("beans"),r("design:type",a.Beans)],e.prototype,"beans",void 0);n([o.Autowired("$scope"),r("design:type",Object)],e.prototype,"$scope",void 0);n([o.Autowired("columnController"),r("design:type",l.ColumnController)],e.prototype,"columnController",void 0);e=n([o.Bean("autoHeightCalculator")],e);return e}();t.AutoHeightCalculator=c},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(2);var s=i(4);var l=i(10);var u=i(0);var c=i(98);var d=i(3);var f=i(5);var p=i(36);var h=i(8);var g=i(11);var m=i(1);var v=i(6);var y=i(39);var b=function(e){n(t,e);function t(){return e.call(this,t.TEMPLATE)||this}t.prototype.registerGridComp=function(e){this.gridPanel=e;this.centerContainer.registerGridComp(e);this.pinnedLeftContainer.registerGridComp(e);this.pinnedRightContainer.registerGridComp(e)};t.prototype.postConstruct=function(){var e=this;this.gridApi.registerHeaderRootComp(this);this.autoWidthCalculator.registerHeaderRootComp(this);this.centerContainer=new c.HeaderContainer(this.eHeaderContainer,this.eHeaderViewport,null);this.childContainers=[this.centerContainer];this.pinnedLeftContainer=new c.HeaderContainer(this.ePinnedLeftHeader,null,l.Column.PINNED_LEFT);this.pinnedRightContainer=new c.HeaderContainer(this.ePinnedRightHeader,null,l.Column.PINNED_RIGHT);this.childContainers.push(this.pinnedLeftContainer);this.childContainers.push(this.pinnedRightContainer);this.childContainers.forEach((function(t){return e.context.wireBean(t)}));this.eventService.addEventListener(f.Events.EVENT_COLUMN_VALUE_CHANGED,this.refreshHeader.bind(this));this.eventService.addEventListener(f.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this));this.addPreventHeaderScroll();if(this.columnController.isReady()){this.refreshHeader()}};t.prototype.setHorizontalScroll=function(e){this.eHeaderContainer.style.left=e+"px"};t.prototype.forEachHeaderElement=function(e){this.childContainers.forEach((function(t){return t.forEachHeaderElement(e)}))};t.prototype.destroy=function(){this.childContainers.forEach((function(e){return e.destroy()}))};t.prototype.refreshHeader=function(){this.childContainers.forEach((function(e){return e.refresh()}))};t.prototype.onPivotModeChanged=function(){var e=this.columnController.isPivotMode();m.Utils.addOrRemoveCssClass(this.getGui(),"ag-pivot-on",e);m.Utils.addOrRemoveCssClass(this.getGui(),"ag-pivot-off",!e)};t.prototype.setHeight=function(e){this.getGui().style.height=e+"px";this.getGui().style.minHeight=e+"px"};t.prototype.addPreventHeaderScroll=function(){var e=this;this.addDestroyableEventListener(this.eHeaderViewport,"scroll",(function(){var t=e.eHeaderViewport.scrollLeft;if(t!==0){e.gridPanel.scrollHorizontally(t);e.eHeaderViewport.scrollLeft=0}}))};t.prototype.setLeftVisible=function(e){m.Utils.setVisible(this.ePinnedLeftHeader,e)};t.prototype.setRightVisible=function(e){m.Utils.setVisible(this.ePinnedRightHeader,e)};t.TEMPLATE='<div class="ag-header" role="row">\n            <div class="ag-pinned-left-header" ref="ePinnedLeftHeader" role="presentation"></div>\n            <div class="ag-header-viewport" ref="eHeaderViewport" role="presentation">\n                <div class="ag-header-container" ref="eHeaderContainer" role="presentation"></div>\n            </div>\n            <div class="ag-pinned-right-header" ref="ePinnedRightHeader" role="presentation"></div>\n        </div>';r([g.RefSelector("ePinnedLeftHeader"),o("design:type",HTMLElement)],t.prototype,"ePinnedLeftHeader",void 0);r([g.RefSelector("ePinnedRightHeader"),o("design:type",HTMLElement)],t.prototype,"ePinnedRightHeader",void 0);r([g.RefSelector("eHeaderContainer"),o("design:type",HTMLElement)],t.prototype,"eHeaderContainer",void 0);r([g.RefSelector("eHeaderViewport"),o("design:type",HTMLElement)],t.prototype,"eHeaderViewport",void 0);r([u.Autowired("gridOptionsWrapper"),o("design:type",a.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([u.Autowired("columnController"),o("design:type",s.ColumnController)],t.prototype,"columnController",void 0);r([u.Autowired("context"),o("design:type",u.Context)],t.prototype,"context",void 0);r([u.Autowired("eventService"),o("design:type",d.EventService)],t.prototype,"eventService",void 0);r([u.Autowired("scrollVisibleService"),o("design:type",p.ScrollVisibleService)],t.prototype,"scrollVisibleService",void 0);r([u.Autowired("gridApi"),o("design:type",v.GridApi)],t.prototype,"gridApi",void 0);r([u.Autowired("autoWidthCalculator"),o("design:type",y.AutoWidthCalculator)],t.prototype,"autoWidthCalculator",void 0);r([u.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"postConstruct",null);r([u.PreDestroy,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"destroy",null);return t}(h.Component);t.HeaderRootComp=b},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(1);var r=function(){function e(){}e.addHeaderClassesFromColDef=function(e,t,i,r,o){if(n.Utils.missing(e)){return}this.addColumnClassesFromCollDef(e.headerClass,e,t,i,r,o)};e.addToolPanelClassesFromColDef=function(e,t,i,r,o){if(n.Utils.missing(e)){return}this.addColumnClassesFromCollDef(e.toolPanelClass,e,t,i,r,o)};e.addColumnClassesFromCollDef=function(e,t,i,r,o,a){if(n.Utils.missing(e)){return}var s;if(typeof e==="function"){var l={colDef:t,column:o,columnGroup:a,context:r.getContext(),api:r.getApi()};var u=e;s=u(l)}else{s=e}if(typeof s==="string"){n.Utils.addCssClass(i,s)}else if(Array.isArray(s)){s.forEach((function(e){n.Utils.addCssClass(i,e)}))}};return e}();t.CssClassApplier=r},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(9);var s=i(4);var l=i(1);var u=i(64);var c=i(23);var d=i(2);var f=i(30);var p=function(){function e(){}e.prototype.getNextCellToFocus=function(e,t){var i=t;var n=false;while(!n){switch(e){case a.Constants.KEY_UP:i=this.getCellAbove(i);break;case a.Constants.KEY_DOWN:i=this.getCellBelow(i);break;case a.Constants.KEY_RIGHT:if(this.gridOptionsWrapper.isEnableRtl()){i=this.getCellToLeft(i)}else{i=this.getCellToRight(i)}break;case a.Constants.KEY_LEFT:if(this.gridOptionsWrapper.isEnableRtl()){i=this.getCellToRight(i)}else{i=this.getCellToLeft(i)}break;default:console.log("ag-Grid: unknown key for navigation "+e);i=null;break}if(i){n=this.isCellGoodToFocusOn(i)}else{n=true}}return i};e.prototype.isCellGoodToFocusOn=function(e){var t=e.column;var i;switch(e.floating){case a.Constants.PINNED_TOP:i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case a.Constants.PINNED_BOTTOM:i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex);break}var n=t.isSuppressNavigable(i);return!n};e.prototype.getCellToLeft=function(e){var t=this.columnController.getDisplayedColBefore(e.column);if(!t){return null}else{var i={rowIndex:e.rowIndex,column:t,floating:e.floating};return new c.GridCell(i)}};e.prototype.getCellToRight=function(e){var t=this.columnController.getDisplayedColAfter(e.column);if(!t){return null}else{var i={rowIndex:e.rowIndex,column:t,floating:e.floating};return new c.GridCell(i)}};e.prototype.getRowBelow=function(e){if(this.isLastRowInContainer(e)){if(e.isFloatingBottom()){return null}else if(e.isNotFloating()){if(this.pinnedRowModel.isRowsToRender(a.Constants.PINNED_BOTTOM)){return new u.GridRow(0,a.Constants.PINNED_BOTTOM)}else{return null}}else{if(this.rowModel.isRowsToRender()){return new u.GridRow(0,null)}else if(this.pinnedRowModel.isRowsToRender(a.Constants.PINNED_BOTTOM)){return new u.GridRow(0,a.Constants.PINNED_BOTTOM)}else{return null}}}else{return new u.GridRow(e.rowIndex+1,e.floating)}};e.prototype.getCellBelow=function(e){var t=this.getRowBelow(e.getGridRow());if(t){var i={rowIndex:t.rowIndex,column:e.column,floating:t.floating};return new c.GridCell(i)}else{return null}};e.prototype.isLastRowInContainer=function(e){if(e.isFloatingTop()){var t=this.pinnedRowModel.getPinnedTopRowData().length-1;return t<=e.rowIndex}else if(e.isFloatingBottom()){var i=this.pinnedRowModel.getPinnedBottomRowData().length-1;return i<=e.rowIndex}else{var n=this.rowModel.getPageLastRow();return n<=e.rowIndex}};e.prototype.getRowAbove=function(e){if(e.rowIndex===0){if(e.isFloatingTop()){return null}else if(e.isNotFloating()){if(this.pinnedRowModel.isRowsToRender(a.Constants.PINNED_TOP)){return this.getLastFloatingTopRow()}else{return null}}else{if(this.rowModel.isRowsToRender()){return this.getLastBodyCell()}else if(this.pinnedRowModel.isRowsToRender(a.Constants.PINNED_TOP)){return this.getLastFloatingTopRow()}else{return null}}}else{return new u.GridRow(e.rowIndex-1,e.floating)}};e.prototype.getCellAbove=function(e){var t=this.getRowAbove(e.getGridRow());if(t){var i={rowIndex:t.rowIndex,column:e.column,floating:t.floating};return new c.GridCell(i)}else{return null}};e.prototype.getLastBodyCell=function(){var e=this.rowModel.getPageLastRow();return new u.GridRow(e,null)};e.prototype.getLastFloatingTopRow=function(){var e=this.pinnedRowModel.getPinnedTopRowData().length-1;return new u.GridRow(e,a.Constants.PINNED_TOP)};e.prototype.getNextTabbedCell=function(e,t){if(t){return this.getNextTabbedCellBackwards(e)}else{return this.getNextTabbedCellForwards(e)}};e.prototype.getNextTabbedCellForwards=function(e){var t=this.columnController.getAllDisplayedColumns();var i=e.rowIndex;var n=e.floating;var r=this.columnController.getDisplayedColAfter(e.column);if(!r){r=t[0];var o=this.getRowBelow(e.getGridRow());if(l.Utils.missing(o)){return}i=o.rowIndex;n=o.floating}var a={rowIndex:i,column:r,floating:n};return new c.GridCell(a)};e.prototype.getNextTabbedCellBackwards=function(e){var t=this.columnController.getAllDisplayedColumns();var i=e.rowIndex;var n=e.floating;var r=this.columnController.getDisplayedColBefore(e.column);if(!r){r=t[t.length-1];var o=this.getRowAbove(e.getGridRow());if(l.Utils.missing(o)){return}i=o.rowIndex;n=o.floating}var a={rowIndex:i,column:r,floating:n};return new c.GridCell(a)};n([o.Autowired("columnController"),r("design:type",s.ColumnController)],e.prototype,"columnController",void 0);n([o.Autowired("rowModel"),r("design:type",Object)],e.prototype,"rowModel",void 0);n([o.Autowired("pinnedRowModel"),r("design:type",f.PinnedRowModel)],e.prototype,"pinnedRowModel",void 0);n([o.Autowired("gridOptionsWrapper"),r("design:type",d.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);e=n([o.Bean("cellNavigationService")],e);return e}();t.CellNavigationService=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(){this.existingIds={}}e.prototype.getInstanceIdForKey=function(e){var t=this.existingIds[e];var i;if(typeof t!=="number"){i=0}else{i=t+1}this.existingIds[e]=i;return i};return e}();t.GroupInstanceIdCreator=n},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};Object.defineProperty(t,"__esModule",{value:true});var r=i(0);var o=function(){function e(){}e.prototype.download=function(e,t,i){var n=new Blob(["\ufeff",t],{type:i});if(window.navigator.msSaveOrOpenBlob){window.navigator.msSaveOrOpenBlob(n,e)}else{var r=document.createElement("a");r.href=window.URL.createObjectURL(n);r.download=e;document.body.appendChild(r);r.click();document.body.removeChild(r)}};e=n([r.Bean("downloader")],e);return e}();t.Downloader=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(2);var r=i(17);var o=i(7);var a=i(4);var s=i(20);var l=i(80);var u=i(18);var c=i(16);var d=i(3);var f=i(78);var p=i(6);var h=i(38);var g=i(48);var m=i(19);var v=i(49);var y=i(35);var b=i(12);var _=i(31);var w=i(39);var C=i(59);var A=i(0);var E=i(47);var x=i(42);var T=i(108);var S=i(15);var D=i(40);var k=i(24);var O=i(22);var R=i(44);var N=i(82);var P=i(1);var I=i(109);var M=i(111);var L=i(113);var F=i(54);var G=i(5);var $=i(114);var W=i(116);var H=i(55);var j=i(56);var B=i(43);var V=i(60);var z=i(117);var U=i(36);var Y=i(84);var q=i(118);var X=i(63);var K=i(73);var Q=i(45);var Z=i(53);var J=i(112);var ee=i(110);var te=i(138);var ie=i(104);var ne=i(29);var re=i(105);var oe=i(9);var ae=i(33);var se=i(139);var le=i(58);var ue=i(30);var ce=i(27);var de=i(21);var fe=i(66);var pe=i(76);var he=i(77);var ge=i(28);var me=i(41);var ve=i(37);var ye=i(97);var be=i(57);var _e=i(86);var we=i(79);var Ce=i(140);var Ae=function(){function e(t,i,G){if(!t){console.error("ag-Grid: no div element provided to the grid")}if(!i){console.error("ag-Grid: no gridOptions provided to the grid")}var $=this.getRowModelClass(i);var W=P.Utils.exists(e.enterpriseBeans);var oe=G?G.frameworkFactory:null;if(P.Utils.missing(oe)){oe=new z.BaseFrameworkFactory}var Ae=[];if(e.enterpriseBeans){Ae=Ae.concat(e.enterpriseBeans)}if(e.frameworkBeans){Ae=Ae.concat(e.frameworkBeans)}var Ee={enterprise:W,gridOptions:i,eGridDiv:t,$scope:G?G.$scope:null,$compile:G?G.$compile:null,quickFilterOnScope:G?G.quickFilterOnScope:null,globalEventListener:G?G.globalEventListener:null,frameworkFactory:oe};if(G&&G.seedBeanInstances){P.Utils.assign(Ee,G.seedBeanInstances)}var xe=[{componentName:"AgCheckbox",theClass:V.AgCheckbox},{componentName:"AgGridComp",theClass:f.GridPanel},{componentName:"AgHeaderRoot",theClass:l.HeaderRootComp},{componentName:"AgPagination",theClass:Ce.PaginationComp}];if(e.enterpriseComponents){xe=xe.concat(e.enterpriseComponents)}var Te={overrideBeans:Ae,seed:Ee,beans:[$,ge.Beans,ne.PaginationAutoPageSizeService,p.GridApi,fe.ComponentProvider,pe.AgComponentUtils,he.ComponentMetadataProvider,fe.ComponentProvider,ce.ComponentResolver,de.ComponentRecipes,be.HeightScaler,we.AutoHeightCalculator,H.CellRendererFactory,C.HorizontalResizeService,ue.PinnedRowModel,D.DragService,g.DisplayedGroupCreator,d.EventService,n.GridOptionsWrapper,r.SelectionController,u.FilterManager,a.ColumnController,ne.PaginationProxy,s.RowRenderer,m.ExpressionService,h.BalancedColumnTreeBuilder,E.CsvCreator,Y.Downloader,q.XmlFactory,X.GridSerializer,v.TemplateService,ye.NavigationService,y.PopupService,ae.ValueCache,c.ValueService,le.AlignedGridsService,b.LoggerFactory,_.ColumnUtils,w.AutoWidthCalculator,y.PopupService,x.GridCore,T.StandardMenuFactory,S.DragAndDropService,o.ColumnApi,O.FocusedCellController,R.MouseEventService,N.CellNavigationService,I.FilterStage,M.SortStage,L.FlattenStage,ee.FilterService,te.RowNodeFactory,F.CellEditorFactory,j.CellRendererService,B.ValueFormatterService,K.StylingService,U.ScrollVisibleService,Q.ColumnHoverService,Z.ColumnAnimationService,J.SortService,_e.SelectableService,ie.AutoGroupColService,re.ImmutableService,se.ChangeDetectionService,me.Environment,ve.AnimationFrameService,k.SortController],components:xe,debug:!!i.debug};var Se=function(){return Te.debug};this.context=new A.Context(Te,new b.Logger("Context",Se));this.setColumnsAndData();this.dispatchGridReadyEvent(i);if(i.debug){console.log("ag-Grid -> initialised successfully, enterprise = "+W)}}e.setEnterpriseBeans=function(t,i){this.enterpriseBeans=t;P.Utils.iterateObject(i,(function(t,i){return e.RowModelClasses[t]=i}))};e.setEnterpriseComponents=function(e){this.enterpriseComponents=e};e.setFrameworkBeans=function(e){this.frameworkBeans=e};e.prototype.setColumnsAndData=function(){var e=this.context.getBean("gridOptionsWrapper");var t=this.context.getBean("columnController");var i=this.context.getBean("rowModel");var n=e.getColumnDefs();var r=e.getRowData();var o=P.Utils.missing(n)&&P.Utils.missing(r);if(o){return}if(P.Utils.exists(n)){t.setColumnDefs(n,"gridInitializing")}if(P.Utils.exists(r)&&i.getType()===oe.Constants.ROW_MODEL_TYPE_CLIENT_SIDE){var a=i;a.setRowData(r)}};e.prototype.dispatchGridReadyEvent=function(e){var t=this.context.getBean("eventService");var i={type:G.Events.EVENT_GRID_READY,api:e.api,columnApi:e.columnApi};t.dispatchEvent(i)};e.prototype.getRowModelClass=function(t){var i=t.rowModelType;i=i==="enterprise"?oe.Constants.ROW_MODEL_TYPE_SERVER_SIDE:i;if(P.Utils.exists(i)){var n=e.RowModelClasses[i];if(P.Utils.exists(n)){return n}else{if(i==="normal"){console.warn("ag-Grid: normal rowModel deprecated. Should now be called client side row model instead.");return W.ClientSideRowModel}console.error("ag-Grid: could not find matching row model for rowModelType "+i);if(i===oe.Constants.ROW_MODEL_TYPE_VIEWPORT){console.error("ag-Grid: rowModelType viewport is only available in ag-Grid Enterprise")}if(i===oe.Constants.ROW_MODEL_TYPE_SERVER_SIDE){console.error("ag-Grid: rowModelType server side is only available in ag-Grid Enterprise")}}}return W.ClientSideRowModel};e.prototype.destroy=function(){this.context.destroy()};e.RowModelClasses={infinite:$.InfiniteRowModel,clientSide:W.ClientSideRowModel};return e}();t.Grid=Ae},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(1);var s=i(2);var l=function(){function e(){}e.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsWrapper.isGroupSelectsChildren();this.isRowSelectableFunc=this.gridOptionsWrapper.getIsRowSelectableFunc()};e.prototype.updateSelectableAfterGrouping=function(e){if(this.isRowSelectableFunc){var t=function(e){return e.childrenAfterGroup};this.recurseDown(e.childrenAfterGroup,t)}};e.prototype.updateSelectableAfterFiltering=function(e){if(this.isRowSelectableFunc){var t=function(e){return e.childrenAfterFilter};this.recurseDown(e.childrenAfterGroup,t)}};e.prototype.recurseDown=function(e,t){var i=this;e.forEach((function(e){if(!e.group){return}if(e.hasChildren()){i.recurseDown(t(e),t)}var n;if(i.groupSelectsChildren){var r=a._.find(t(e),"selectable",true);n=a._.exists(r)}else{n=i.isRowSelectableFunc(e)}e.setRowSelectable(n)}))};n([o.Autowired("gridOptionsWrapper"),r("design:type",s.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);e=n([o.Bean("selectableService")],e);return e}();t.SelectableService=l},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:true});var r=i(1);var o=i(13);var a=i(61);var s=function(e){n(t,e);function t(t){var i=e.call(this)||this;i.maxRowFound=false;i.blocks={};i.blockCount=0;i.virtualRowCount=t.initialRowCount;i.cacheParams=t;return i}t.prototype.destroy=function(){var t=this;e.prototype.destroy.call(this);this.forEachBlockInOrder((function(e){return t.destroyBlock(e)}))};t.prototype.init=function(){var e=this;this.active=true;this.addDestroyFunc((function(){return e.active=false}))};t.prototype.isActive=function(){return this.active};t.prototype.getVirtualRowCount=function(){return this.virtualRowCount};t.prototype.hack_setVirtualRowCount=function(e){this.virtualRowCount=e};t.prototype.isMaxRowFound=function(){return this.maxRowFound};t.prototype.onPageLoaded=function(e){this.cacheParams.rowNodeBlockLoader.loadComplete();this.checkBlockToLoad();if(!this.isActive()){return}this.logger.log("onPageLoaded: page = "+e.page.getBlockNumber()+", lastRow = "+e.lastRow);if(e.success){this.checkVirtualRowCount(e.page,e.lastRow)}};t.prototype.purgeBlocksIfNeeded=function(e){var t=this;if(r.Utils.missing(this.cacheParams.maxBlocksInCache)){return}if(this.blockCount<=this.cacheParams.maxBlocksInCache){return}var i=[];this.forEachBlockInOrder((function(t){if(t===e){return}i.push(t)}));i.sort((function(e,t){return t.getLastAccessed()-e.getLastAccessed()}));var n=this.cacheParams.maxBlocksInCache-1;i.splice(0,n);i.forEach((function(e){if(e.isAnyNodeOpen(t.virtualRowCount)){return}t.removeBlockFromCache(e)}))};t.prototype.postCreateBlock=function(e){e.addEventListener(a.RowNodeBlock.EVENT_LOAD_COMPLETE,this.onPageLoaded.bind(this));this.setBlock(e.getBlockNumber(),e);this.purgeBlocksIfNeeded(e);this.checkBlockToLoad()};t.prototype.removeBlockFromCache=function(e){if(!e){return}this.destroyBlock(e)};t.prototype.checkBlockToLoad=function(){this.cacheParams.rowNodeBlockLoader.checkBlockToLoad()};t.prototype.checkVirtualRowCount=function(e,t){if(typeof t==="number"&&t>=0){this.virtualRowCount=t;this.maxRowFound=true;this.onCacheUpdated()}else if(!this.maxRowFound){var i=(e.getBlockNumber()+1)*this.cacheParams.blockSize;var n=i+this.cacheParams.overflowSize;if(this.virtualRowCount<n){this.virtualRowCount=n;this.onCacheUpdated()}else if(this.cacheParams.dynamicRowHeight){this.onCacheUpdated()}}};t.prototype.setVirtualRowCount=function(e,t){this.virtualRowCount=e;if(r.Utils.exists(t)){this.maxRowFound=t}if(!this.maxRowFound){if(this.virtualRowCount%this.cacheParams.blockSize===0){this.virtualRowCount++}}this.onCacheUpdated()};t.prototype.forEachNodeDeep=function(e,t){var i=this;this.forEachBlockInOrder((function(n){n.forEachNodeDeep(e,t,i.virtualRowCount)}))};t.prototype.forEachBlockInOrder=function(e){var t=this.getBlockIdsSorted();this.forEachBlockId(t,e)};t.prototype.forEachBlockInReverseOrder=function(e){var t=this.getBlockIdsSorted().reverse();this.forEachBlockId(t,e)};t.prototype.forEachBlockId=function(e,t){var i=this;e.forEach((function(e){var n=i.blocks[e];t(n,e)}))};t.prototype.getBlockIdsSorted=function(){var e=function(e,t){return e-t};var t=Object.keys(this.blocks).map((function(e){return parseInt(e)})).sort(e);return t};t.prototype.getBlock=function(e){return this.blocks[e]};t.prototype.setBlock=function(e,t){this.blocks[e]=t;this.blockCount++;this.cacheParams.rowNodeBlockLoader.addBlock(t)};t.prototype.destroyBlock=function(e){delete this.blocks[e.getBlockNumber()];e.destroy();this.blockCount--;this.cacheParams.rowNodeBlockLoader.removeBlock(e)};t.prototype.onCacheUpdated=function(){if(this.isActive()){var e={type:t.EVENT_CACHE_UPDATED};this.dispatchEvent(e)}};t.prototype.purgeCache=function(){var e=this;this.forEachBlockInOrder((function(t){return e.removeBlockFromCache(t)}));this.onCacheUpdated()};t.prototype.getRowNodesInRange=function(e,t){var i=this;var n=[];var o=-1;var a=false;var s=new r.NumberSequence;if(r.Utils.missing(e)){a=true}var l=false;this.forEachBlockInOrder((function(r,u){if(l)return;if(a&&o+1!==u){l=true;return}o=u;r.forEachNodeShallow((function(i){var r=i===e||i===t;if(a||r){n.push(i)}if(r){a=!a}}),s,i.virtualRowCount)}));var u=l||a;return u?[]:n};t.EVENT_CACHE_UPDATED="cacheUpdated";return t}(o.BeanStub);t.RowNodeCache=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(14);var r=i(1);var o=function(){function e(t,i,n,r,o){this.nextId=0;this.allNodesMap={};this.rootNode=t;this.gridOptionsWrapper=i;this.context=n;this.eventService=r;this.columnController=o;this.rootNode.group=true;this.rootNode.level=-1;this.rootNode.id=e.ROOT_NODE_ID;this.rootNode.allLeafChildren=[];this.rootNode.childrenAfterGroup=[];this.rootNode.childrenAfterSort=[];this.rootNode.childrenAfterFilter=[];this.postConstruct()}e.prototype.postConstruct=function(){this.getNodeChildDetails=this.gridOptionsWrapper.getNodeChildDetailsFunc();this.suppressParentsInRowNodes=this.gridOptionsWrapper.isSuppressParentsInRowNodes();this.doesDataFlower=this.gridOptionsWrapper.getDoesDataFlowerFunc();this.isRowMasterFunc=this.gridOptionsWrapper.getIsRowMasterFunc();this.doingLegacyTreeData=r.Utils.exists(this.getNodeChildDetails);this.doingMasterDetail=this.gridOptionsWrapper.isMasterDetail()};e.prototype.getCopyOfNodesMap=function(){var e=r.Utils.cloneObject(this.allNodesMap);return e};e.prototype.getRowNode=function(e){return this.allNodesMap[e]};e.prototype.setRowData=function(t){this.rootNode.childrenAfterFilter=null;this.rootNode.childrenAfterGroup=null;this.rootNode.childrenAfterSort=null;this.rootNode.childrenMapped=null;this.nextId=0;this.allNodesMap={};if(!t){this.rootNode.allLeafChildren=[];this.rootNode.childrenAfterGroup=[];return}var i=this.recursiveFunction(t,null,e.TOP_LEVEL);if(this.doingLegacyTreeData){this.rootNode.childrenAfterGroup=i;this.setLeafChildren(this.rootNode)}else{this.rootNode.allLeafChildren=i}};e.prototype.updateRowData=function(e,t){var i=this;if(this.isLegacyTreeData()){return null}var n=e.add,o=e.addIndex,a=e.remove,s=e.update;var l={remove:[],update:[],add:[]};if(r.Utils.exists(n)){var u=typeof o==="number"&&o>=0;if(u){n.reverse().forEach((function(e){var t=i.addRowNode(e,o);l.add.push(t)}))}else{n.forEach((function(e){var t=i.addRowNode(e);l.add.push(t)}))}}if(r.Utils.exists(a)){a.forEach((function(e){var t=i.updatedRowNode(e,false);if(t){l.remove.push(t)}}))}if(r.Utils.exists(s)){s.forEach((function(e){var t=i.updatedRowNode(e,true);if(t){l.update.push(t)}}))}if(t){r.Utils.sortRowNodesByOrder(this.rootNode.allLeafChildren,t)}return l};e.prototype.addRowNode=function(t,i){var n=this.createNode(t,null,e.TOP_LEVEL);if(r.Utils.exists(i)){r.Utils.insertIntoArray(this.rootNode.allLeafChildren,n,i)}else{this.rootNode.allLeafChildren.push(n)}return n};e.prototype.updatedRowNode=function(e,t){var i=this.gridOptionsWrapper.getRowNodeIdFunc();var n;if(r.Utils.exists(i)){var o=i(e);n=this.allNodesMap[o];if(!n){console.error("ag-Grid: could not find row id="+o+", data item was not found for this id");return null}}else{n=r.Utils.find(this.rootNode.allLeafChildren,(function(t){return t.data===e}));if(!n){console.error("ag-Grid: could not find data item as object was not found",e);return null}}if(t){n.updateData(e)}else{n.setSelected(false);n.clearRowTop();r.Utils.removeFromArray(this.rootNode.allLeafChildren,n);this.allNodesMap[n.id]=undefined}return n};e.prototype.recursiveFunction=function(e,t,i){var n=this;if(typeof e==="string"){console.warn("ag-Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first");return}var r=[];e.forEach((function(e){var o=n.createNode(e,t,i);r.push(o)}));return r};e.prototype.createNode=function(e,t,i){var o=new n.RowNode;this.context.wireBean(o);var a=this.gridOptionsWrapper.isTreeData();var s=!a&&r.Utils.exists(this.getNodeChildDetails);var l=s?this.getNodeChildDetails(e):null;if(l&&l.group){o.group=true;o.childrenAfterGroup=this.recursiveFunction(l.children,o,i+1);o.expanded=l.expanded===true;o.field=l.field;o.key=l.key;o.canFlower=o.master;this.setLeafChildren(o)}else{o.group=false;if(a){o.master=false;o.expanded=false}else{if(this.doesDataFlower){o.master=this.doesDataFlower(e)}else if(this.doingMasterDetail){if(this.isRowMasterFunc){o.master=this.isRowMasterFunc(e)}else{o.master=true}}else{o.master=false}var u=this.columnController.getRowGroupColumns();var c=u?u.length:0;var d=i+c;o.expanded=o.master?this.isExpanded(d):false}}o.canFlower=o.master;if(t&&!this.suppressParentsInRowNodes){o.parent=t}o.level=i;o.setDataAndId(e,this.nextId.toString());this.allNodesMap[o.id]=o;this.nextId++;return o};e.prototype.isExpanded=function(e){var t=this.gridOptionsWrapper.getGroupDefaultExpanded();if(t===-1){return true}else{return e<t}};e.prototype.setLeafChildren=function(e){e.allLeafChildren=[];if(e.childrenAfterGroup){e.childrenAfterGroup.forEach((function(t){if(t.group){if(t.allLeafChildren){t.allLeafChildren.forEach((function(t){return e.allLeafChildren.push(t)}))}}else{e.allLeafChildren.push(t)}}))}};e.prototype.insertItemsAtIndex=function(t,i){if(this.isLegacyTreeData()){return null}var n=this.rootNode.allLeafChildren;if(t>n.length){console.warn("ag-Grid: invalid index "+t+", max index is "+n.length);return}var o=[];for(var a=i.length-1;a>=0;a--){var s=i[a];var l=this.createNode(s,null,e.TOP_LEVEL);r.Utils.insertIntoArray(n,l,t);o.push(l)}return o.length>0?o:null};e.prototype.addItems=function(e){var t=this.rootNode.allLeafChildren;return this.insertItemsAtIndex(t.length,e)};e.prototype.isLegacyTreeData=function(){var e=r.Utils.exists(this.gridOptionsWrapper.getNodeChildDetailsFunc());if(e){console.warn("ag-Grid: adding and removing rows is not supported when using nodeChildDetailsFunc, ie it is not "+"supported for legacy tree data. Please see the docs on the new preferred way of providing tree data that works with delta updates.");return true}else{return false}};e.TOP_LEVEL=0;e.ROOT_NODE_ID="ROOT_NODE_ID";return e}();t.ClientSideNodeManager=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e){this.active=true;this.nodeIdsToBoolean={};this.nodeIdsToColumns={};this.keepingColumns=e}e.prototype.setInactive=function(){this.active=false};e.prototype.isActive=function(){return this.active};e.prototype.addParentNode=function(e,t){var i=this;this.validateActive();var n=e;while(n){this.nodeIdsToBoolean[n.id]=true;if(this.keepingColumns&&t){if(!this.nodeIdsToColumns[n.id]){this.nodeIdsToColumns[n.id]={}}t.forEach((function(e){return i.nodeIdsToColumns[n.id][e.getId()]=true}))}n=n.parent}};e.prototype.isInPath=function(e){this.validateActive();return this.nodeIdsToBoolean[e.id]};e.prototype.getValueColumnsForNode=function(e,t){this.validateActive();if(!this.keepingColumns){return t}var i=this.nodeIdsToColumns[e.id];var n=t.filter((function(e){return i[e.getId()]}));return n};e.prototype.getNotValueColumnsForNode=function(e,t){this.validateActive();if(!this.keepingColumns){return null}var i=this.nodeIdsToColumns[e.id];var n=t.filter((function(e){return!i[e.getId()]}));return n};e.prototype.validateActive=function(){if(!this.active){throw"ag-Grid: tried to work on an invalid changed path"}};return e}();t.ChangedPath=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(){}e.STRING_PROPERTIES=["sortingOrder","rowClass","rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","quickFilterText","rowModelType","editType","domLayout","clipboardDeliminator","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals"];e.OBJECT_PROPERTIES=["components","frameworkComponents","rowStyle","context","autoGroupColumnDef","groupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultExportParams","columnTypes","rowClassRules","detailGridOptions","detailCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent"];e.ARRAY_PROPERTIES=["slaveGrids","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData"];e.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","colWidth","headerHeight","groupHeaderHeight","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","minColWidth","maxColWidth","viewportRowModelPageSize","viewportRowModelBufferSize","layoutInterval","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","scrollbarWidth","paginationStartPage","infiniteBlockSize","batchUpdateWaitMillis"];e.BOOLEAN_PROPERTIES=["toolPanelSuppressRowGroups","toolPanelSuppressValues","toolPanelSuppressPivots","toolPanelSuppressPivotMode","toolPanelSuppressSideButtons","toolPanelSuppressColumnFilter","toolPanelSuppressColumnSelectAll","toolPanelSuppressColumnExpandAll","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellSelection","suppressHorizontalScroll","debug","enableColResize","enableCellExpressions","enableSorting","enableServerSideSorting","enableFilter","enableServerSideFilter","angularCompileRows","angularCompileFilters","angularCompileHeaders","groupSuppressAutoColumn","groupSelectsChildren","groupIncludeFooter","groupIncludeTotalFooter","groupUseEntireRow","groupSuppressRow","groupSuppressBlankHeader","forPrint","suppressMenuHide","rowDeselection","unSortIcon","suppressMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","suppressParentsInRowNodes","showToolPanel","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","pivotPanelShow","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","suppressMenuFilterPanel","suppressMenuMainPanel","suppressMenuColumnPanel","enableStatusBar","alwaysShowStatusBar","rememberGroupStateWhenNewData","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressUseColIdForGroups","suppressCopyRowsToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragManaged","suppressRowDrag","enableGroupEdit","embedFullWidthRows","suppressTabbing","suppressPaginationPanel","floatingFilter","groupHideOpenParents","groupMultiAutoColumn","pagination","stopEditingWhenGridLosesFocus","paginationAutoPageSize","suppressScrollOnNewData","purgeClosedRowNodes","cacheQuickFilter","deltaRowDataMode","ensureDomOrder","accentedSort","pivotTotals","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","treeData","masterDetail","suppressMultiRangeSelection","enterMovesDownAfterEdit","enterMovesDown","suppressPropertyNamesCheck","rowMultiSelectWithClick","contractColumnSelection","suppressEnterpriseResetOnNewColumns","enableOldSetFilterModel","suppressRowHoverHighlight","gridAutoHeight","suppressRowTransform","suppressClipboardPaste"];e.FUNCTION_PROPERTIES=["localeTextFunc","groupRowInnerRenderer","groupRowInnerRendererFramework","dateComponent","dateComponentFramework","groupRowRenderer","groupRowRendererFramework","isExternalFilterPresent","getRowHeight","doesExternalFilterPass","getRowClass","getRowStyle","getRowClassRules","traverseNode","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getNodeChildDetails","groupRowAggNodes","getRowNodeId","isFullWidthCell","fullWidthCellRenderer","fullWidthCellRendererFramework","doesDataFlower","processSecondaryColDef","processSecondaryColGroupDef","getBusinessKeyForNode","sendToClipboard","navigateToNextCell","tabToNextCell","getDetailRowData","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","loadingOverlayComponent","loadingOverlayComponentFramework","noRowsOverlayComponent","noRowsOverlayComponentFramework","detailCellRenderer","detailCellRendererFramework","onGridReady","defaultGroupSortComparator","isRowMaster","isRowSelectable","postSort","processHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard"];e.ALL_PROPERTIES=e.ARRAY_PROPERTIES.concat(e.OBJECT_PROPERTIES).concat(e.STRING_PROPERTIES).concat(e.NUMBER_PROPERTIES).concat(e.FUNCTION_PROPERTIES).concat(e.BOOLEAN_PROPERTIES);return e}();t.PropertyKeys=n},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(0);var s=i(68);var l=i(11);var u=i(1);var c=i(21);var d=i(8);var f=i(9);var p=function(e){n(t,e);function t(){var t=e.call(this,'<div><input  ref="eColumnFloatingFilter" class="ag-floating-filter-input"></div>')||this;t.lastKnownModel=null;return t}t.prototype.init=function(e){this.onFloatingFilterChanged=e.onFloatingFilterChanged;this.currentParentModel=e.currentParentModel;var t=e.debounceMs!=null?e.debounceMs:500;var i=u._.debounce(this.syncUpWithParentFilter.bind(this),t);this.addDestroyableEventListener(this.eColumnFloatingFilter,"input",i);this.addDestroyableEventListener(this.eColumnFloatingFilter,"keypress",i);this.addDestroyableEventListener(this.eColumnFloatingFilter,"keydown",i);var n=e.column.getDefinition();if(n.filterParams&&n.filterParams.filterOptions&&n.filterParams.filterOptions.length===1&&n.filterParams.filterOptions[0]==="inRange"){this.eColumnFloatingFilter.readOnly=true}};t.prototype.onParentModelChanged=function(e,t){if(t!=null){this.eColumnFloatingFilter.value=this.parseAsText(t.condition1)+" "+t.operator+" "+this.parseAsText(t.condition2);this.eColumnFloatingFilter.readOnly=true;this.lastKnownModel=null;this.eColumnFloatingFilter.title=this.eColumnFloatingFilter.value;this.eColumnFloatingFilter.style.cursor="default";return}else{this.eColumnFloatingFilter.readOnly=false}if(this.equalModels(this.lastKnownModel,e)){if(!this.lastKnownModel&&!e){this.eColumnFloatingFilter.value=""}return}this.lastKnownModel=e;var i=this.asFloatingFilterText(e);if(i===this.eColumnFloatingFilter.value){return}this.eColumnFloatingFilter.value=i;this.eColumnFloatingFilter.title=""};t.prototype.syncUpWithParentFilter=function(e){var t=this.asParentModel();if(this.equalModels(this.lastKnownModel,t)){return}var i=null;if(u._.isKeyPressed(e,f.Constants.KEY_ENTER)){i=this.onFloatingFilterChanged({model:t,apply:true})}else{i=this.onFloatingFilterChanged({model:t,apply:false})}if(i){this.lastKnownModel=t}};t.prototype.equalModels=function(e,t){if(u._.referenceCompare(e,t)){return true}if(!e||!t){return false}if(Array.isArray(e)||Array.isArray(t)){return false}return u._.referenceCompare(e.type,t.type)&&u._.referenceCompare(e.filter,t.filter)&&u._.referenceCompare(e.filterTo,t.filterTo)&&u._.referenceCompare(e.filterType,t.filterType)};r([l.RefSelector("eColumnFloatingFilter"),o("design:type",HTMLInputElement)],t.prototype,"eColumnFloatingFilter",void 0);return t}(d.Component);t.InputTextFloatingFilterComp=p;var h=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.asFloatingFilterText=function(e){if(!e){return""}return e.filter};t.prototype.asParentModel=function(){var e=this.currentParentModel();return{type:e.type,filter:this.eColumnFloatingFilter.value,filterType:"text"}};t.prototype.parseAsText=function(e){return this.asFloatingFilterText(e)};return t}(p);t.TextFloatingFilterComp=h;var g=function(e){n(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.lastKnownModel=null;return t}t.prototype.init=function(e){this.onFloatingFilterChanged=e.onFloatingFilterChanged;this.currentParentModel=e.currentParentModel;var t=e.debounceMs!=null?e.debounceMs:500;var i=u._.debounce(this.onDateChanged.bind(this),t);var n={onDateChanged:i,filterParams:e.column.getColDef().filterParams};this.dateComponentPromise=this.componentRecipes.newDateComponent(n);var r=u._.loadTemplate("<div></div>");this.dateComponentPromise.then((function(e){r.appendChild(e.getGui())}));this.setTemplateFromElement(r)};t.prototype.onDateChanged=function(){var e=this.currentParentModel();var t=this.asParentModel();if(this.equalModels(e,t)){return}this.onFloatingFilterChanged({model:t,apply:true});this.lastKnownModel=t};t.prototype.equalModels=function(e,t){if(u._.referenceCompare(e,t)){return true}if(!e||!t){return false}if(Array.isArray(e)||Array.isArray(t)){return false}return u._.referenceCompare(e.type,t.type)&&u._.referenceCompare(e.dateFrom,t.dateFrom)&&u._.referenceCompare(e.dateTo,t.dateTo)&&u._.referenceCompare(e.filterType,t.filterType)};t.prototype.asParentModel=function(){var e=this.currentParentModel();var t=this.dateComponentPromise.resolveNow(null,(function(e){return e.getDate()}));var i=u._.serializeDateToYyyyMmDd(s.DateFilter.removeTimezone(t),"-");return{type:e.type,dateFrom:i,dateTo:e?e.dateTo:null,filterType:"date"}};t.prototype.onParentModelChanged=function(e){this.lastKnownModel=e;this.dateComponentPromise.then((function(t){if(!e||!e.dateFrom){t.setDate(null);return}t.setDate(u._.parseYyyyMmDdToDate(e.dateFrom,"-"))}))};r([a.Autowired("componentRecipes"),o("design:type",c.ComponentRecipes)],t.prototype,"componentRecipes",void 0);return t}(d.Component);t.DateFloatingFilterComp=g;var m=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.asFloatingFilterText=function(e){var t=this.currentParentModel();if(e==null&&t==null){return""}if(e==null&&t!=null&&t.type!=="inRange"){this.eColumnFloatingFilter.readOnly=false;return""}if(t!=null&&t.type==="inRange"){this.eColumnFloatingFilter.readOnly=true;return this.parseAsText(t)}this.eColumnFloatingFilter.readOnly=false;return this.parseAsText(e)};t.prototype.parseAsText=function(e){if(e.type&&e.type==="inRange"){var t=this.asNumber(e.filter);var i=this.asNumber(e.filterTo);return(t?t+"":"")+"-"+(i?i+"":"")}var n=this.asNumber(e.filter);return n!=null?n+"":""};t.prototype.asParentModel=function(){var e=this.currentParentModel();var t=this.asNumber(this.eColumnFloatingFilter.value);var i=this.eColumnFloatingFilter.value;var n=null;if(t==null&&i===""){n=null}else if(t==null){n=e.filter}else{n=t}return{type:e.type,filter:n,filterTo:!e?null:e.filterTo,filterType:"number"}};t.prototype.asNumber=function(e){if(e==null){return null}if(e===""){return null}var t=Number(e);var i=!u._.isNumeric(t);return i?null:t};return t}(p);t.NumberFloatingFilterComp=m;var v=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.init=function(t){e.prototype.init.call(this,t);this.eColumnFloatingFilter.readOnly=true};t.prototype.asFloatingFilterText=function(e){this.eColumnFloatingFilter.readOnly=true;if(!e)return"";var t=e instanceof Array?e:e.values;if(t.length===0){return""}var i=t.length>10?t.slice(0,10).concat("..."):t;return"("+t.length+") "+i.join(",")};t.prototype.parseAsText=function(e){return this.asFloatingFilterText(e)};t.prototype.asParentModel=function(){if(this.eColumnFloatingFilter.value==null||this.eColumnFloatingFilter.value===""){return{values:[],filterType:"set"}}return{values:this.eColumnFloatingFilter.value.split(","),filterType:"set"}};t.prototype.equalModels=function(e,t){return false};return t}(p);t.SetFloatingFilterComp=v;var y=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.init=function(t){e.prototype.init.call(this,t);this.eColumnFloatingFilter.readOnly=true};t.prototype.onParentModelChanged=function(e){this.eColumnFloatingFilter.value=this.asFloatingFilterText(this.currentParentModel())};t.prototype.asFloatingFilterText=function(e){return e};t.prototype.parseAsText=function(e){return e};t.prototype.asParentModel=function(){return null};return t}(p);t.ReadModelAsStringFloatingFilterComp=y},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:true});var r=i(67);var o=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.isPopup=function(){return true};return t}(r.TextCellEditor);t.PopupTextCellEditor=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:true});var r=i(75);var o=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.isPopup=function(){return true};return t}(r.SelectCellEditor);t.PopupSelectCellEditor=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:true});var r=i(8);var o=i(9);var a=i(1);var s=function(e){n(t,e);function t(){return e.call(this,t.TEMPLATE)||this}t.prototype.init=function(e){this.params=e;this.focusAfterAttached=e.cellStartedEdit;this.textarea=document.createElement("textarea");this.textarea.maxLength=e.maxLength?e.maxLength:"200";this.textarea.cols=e.cols?e.cols:"60";this.textarea.rows=e.rows?e.rows:"10";if(a.Utils.exists(e.value)){this.textarea.value=e.value.toString()}this.getGui().querySelector(".ag-large-textarea").appendChild(this.textarea);this.addGuiEventListener("keydown",this.onKeyDown.bind(this))};t.prototype.onKeyDown=function(e){var t=e.which||e.keyCode;if(t==o.Constants.KEY_LEFT||t==o.Constants.KEY_UP||t==o.Constants.KEY_RIGHT||t==o.Constants.KEY_DOWN||e.shiftKey&&t==o.Constants.KEY_ENTER){e.stopPropagation()}};t.prototype.afterGuiAttached=function(){if(this.focusAfterAttached){this.textarea.focus()}};t.prototype.getValue=function(){return this.textarea.value};t.prototype.isPopup=function(){return true};t.TEMPLATE='<div class="ag-large-text" tabindex="0">'+'<div class="ag-large-textarea"></div>'+"</div>";return t}(r.Component);t.LargeTextCellEditor=s},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(1);var s=i(51);var l=i(11);var u=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.getDefaultType=function(){return s.BaseFilter.CONTAINS};t.prototype.customInit=function(){this.comparator=this.filterParams.textCustomComparator?this.filterParams.textCustomComparator:t.DEFAULT_COMPARATOR;this.formatter=this.filterParams.textFormatter?this.filterParams.textFormatter:this.filterParams.caseSensitive==true?t.DEFAULT_FORMATTER:t.DEFAULT_LOWERCASE_FORMATTER;e.prototype.customInit.call(this)};t.prototype.modelFromFloatingFilter=function(e){return{type:this.filter,filter:e,filterType:"text"}};t.prototype.getApplicableFilterTypes=function(){return[s.BaseFilter.EQUALS,s.BaseFilter.NOT_EQUAL,s.BaseFilter.STARTS_WITH,s.BaseFilter.ENDS_WITH,s.BaseFilter.CONTAINS,s.BaseFilter.NOT_CONTAINS]};t.prototype.bodyTemplate=function(e){var t=this.translate.bind(this);var i=e==s.FilterConditionType.MAIN?"filterText":"filterConditionText";return'<div class="ag-filter-body">\n            <input class="ag-filter-filter" id='+i+' type="text" placeholder="'+t("filterOoo","Filter...")+'"/>\n        </div>'};t.prototype.initialiseFilterBodyUi=function(t){e.prototype.initialiseFilterBodyUi.call(this,t);this.addFilterChangedListener(t);this.setFilter(this.filterConditionText,s.FilterConditionType.CONDITION);this.setFilterType(this.filterCondition,s.FilterConditionType.CONDITION)};t.prototype.addFilterChangedListener=function(e){var t=this;var i=e===s.FilterConditionType.MAIN?this.eFilterTextField:this.eFilterConditionTextField;var n=this.getDebounceMs(this.filterParams);var r=a.Utils.debounce((function(){return t.onFilterTextFieldChanged(e)}),n);this.addDestroyableEventListener(i,"input",r)};t.prototype.refreshFilterBodyUi=function(e){if(this.eFilterConditionTextField){this.addFilterChangedListener(s.FilterConditionType.CONDITION)}};t.prototype.afterGuiAttached=function(){this.eFilterTextField.focus()};t.prototype.filterValues=function(e){return e===s.FilterConditionType.MAIN?this.filterText:this.filterConditionText};t.prototype.individualFilterPasses=function(e,t){var i=t==s.FilterConditionType.MAIN?this.filterText:this.filterConditionText;var n=t==s.FilterConditionType.MAIN?this.filter:this.filterCondition;if(!i){return t===s.FilterConditionType.MAIN?true:this.conditionValue==="AND"}else{return this.checkIndividualFilter(e,n,i)}};t.prototype.checkIndividualFilter=function(e,t,i){var n=this.filterParams.valueGetter(e.node);if(!n){return t===s.BaseFilter.NOT_EQUAL||t===s.BaseFilter.NOT_CONTAINS}var r=this.formatter(n);return this.comparator(t,r,i)};t.prototype.onFilterTextFieldChanged=function(e){var t=e===s.FilterConditionType.MAIN?this.eFilterTextField.value:this.eFilterConditionTextField.value;var i=e===s.FilterConditionType.MAIN?this.filterText:this.filterConditionText;var n=a.Utils.makeNull(t);if(n&&n.trim()===""){n=null}if(i!==n){var r=n&&this.filterParams.caseSensitive!=true?n.toLowerCase():n;var o=i&&this.filterParams.caseSensitive!=true?i.toLowerCase():i;if(e===s.FilterConditionType.MAIN){this.filterText=this.formatter(n)}else{this.filterConditionText=this.formatter(n)}if(o!==r){this.onFilterChanged()}}};t.prototype.setFilter=function(e,t){e=a.Utils.makeNull(e);if(t===s.FilterConditionType.MAIN){if(e){this.filterText=this.formatter(e);if(!this.eFilterTextField)return;this.eFilterTextField.value=e}else{this.filterText=null;if(!this.eFilterTextField)return;this.eFilterTextField.value=null}}else{if(e){this.filterConditionText=this.formatter(e);if(!this.eFilterConditionTextField)return;this.eFilterConditionTextField.value=e}else{this.filterConditionText=null;if(!this.eFilterConditionTextField)return;this.eFilterConditionTextField.value=null}}};t.prototype.getFilter=function(){return this.filterText};t.prototype.resetState=function(){this.setFilter(null,s.FilterConditionType.MAIN);this.setFilterType(this.defaultFilter,s.FilterConditionType.MAIN);this.setFilter(null,s.FilterConditionType.CONDITION);this.setFilterType(this.defaultFilter,s.FilterConditionType.CONDITION)};t.prototype.serialize=function(e){var t=e===s.FilterConditionType.MAIN?this.filter:this.filterCondition;var i=e===s.FilterConditionType.MAIN?this.filterText:this.filterConditionText;return{type:t?t:this.defaultFilter,filter:i,filterType:"text"}};t.prototype.parse=function(e,t){this.setFilterType(e.type,t);this.setFilter(e.filter,t)};t.prototype.setType=function(e,t){this.setFilterType(e,t)};t.DEFAULT_FORMATTER=function(e){return e};t.DEFAULT_LOWERCASE_FORMATTER=function(e){if(e==null){return null}return e.toString().toLowerCase()};t.DEFAULT_COMPARATOR=function(e,i,n){switch(e){case t.CONTAINS:return i.indexOf(n)>=0;case t.NOT_CONTAINS:return i.indexOf(n)===-1;case t.EQUALS:return i===n;case t.NOT_EQUAL:return i!=n;case t.STARTS_WITH:return i.indexOf(n)===0;case t.ENDS_WITH:var r=i.lastIndexOf(n);return r>=0&&r===i.length-n.length;default:console.warn("invalid filter type "+e);return false}};r([l.QuerySelector("#filterText"),o("design:type",HTMLInputElement)],t.prototype,"eFilterTextField",void 0);r([l.QuerySelector("#filterConditionText"),o("design:type",HTMLInputElement)],t.prototype,"eFilterConditionTextField",void 0);return t}(s.ComparableBaseFilter);t.TextFilter=u},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(1);var s=i(11);var l=i(51);var u=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.modelFromFloatingFilter=function(e){return{type:this.filter,filter:Number(e),filterTo:this.filterNumberTo,filterType:"number"}};t.prototype.getApplicableFilterTypes=function(){return[l.BaseFilter.EQUALS,l.BaseFilter.NOT_EQUAL,l.BaseFilter.LESS_THAN,l.BaseFilter.LESS_THAN_OR_EQUAL,l.BaseFilter.GREATER_THAN,l.BaseFilter.GREATER_THAN_OR_EQUAL,l.BaseFilter.IN_RANGE]};t.prototype.bodyTemplate=function(e){var t=this.translate.bind(this);var i=e==l.FilterConditionType.MAIN?"filterText":"filterConditionText";var n=e==l.FilterConditionType.MAIN?"filterNumberToPanel":"filterNumberToPanelCondition";var r=e==l.FilterConditionType.MAIN?"filterToText":"filterToConditionText";return'<div class="ag-filter-body">\n            <div>\n                <input class="ag-filter-filter" id="'+i+'" type="text" placeholder="'+t("filterOoo")+'"/>\n            </div>\n             <div class="ag-filter-number-to" id="'+n+'">\n                <input class="ag-filter-filter" id="'+r+'" type="text" placeholder="'+t("filterOoo")+'"/>\n            </div>\n        </div>'};t.prototype.initialiseFilterBodyUi=function(t){e.prototype.initialiseFilterBodyUi.call(this,t);if(t===l.FilterConditionType.MAIN){this.eFilterTextField=this.queryForHtmlInputElement("#filterText");this.addFilterChangedEventListeners(t,this.eFilterTextField,this.eFilterToTextField)}else{this.eFilterTextConditionField=this.queryForHtmlInputElement("#filterConditionText");this.addFilterChangedEventListeners(t,this.eFilterTextConditionField,this.eFilterToConditionText);this.setFilter(this.filterNumberCondition,l.FilterConditionType.CONDITION);this.setFilterTo(this.filterNumberConditionTo,l.FilterConditionType.CONDITION);this.setFilterType(this.filterCondition,l.FilterConditionType.CONDITION)}};t.prototype.addFilterChangedEventListeners=function(e,t,i){var n=this;var r=this.getDebounceMs(this.filterParams);var o=a.Utils.debounce((function(){return n.onTextFieldsChanged(e,t,i)}),r);this.addDestroyableEventListener(t,"input",o);this.addDestroyableEventListener(i,"input",o)};t.prototype.afterGuiAttached=function(){this.eFilterTextField.focus()};t.prototype.comparator=function(){return function(e,t){if(e===t){return 0}if(e<t){return 1}if(e>t){return-1}}};t.prototype.onTextFieldsChanged=function(e,t,i){var n=this.stringToFloat(t.value);var r=this.stringToFloat(i.value);if(e===l.FilterConditionType.MAIN){if(this.filterNumber!==n||this.filterNumberTo!==r){this.filterNumber=n;this.filterNumberTo=r;this.onFilterChanged()}}else{if(this.filterNumberCondition!==n||this.filterNumberConditionTo!==r){this.filterNumberCondition=n;this.filterNumberConditionTo=r;this.onFilterChanged()}}};t.prototype.filterValues=function(e){if(e===l.FilterConditionType.MAIN){return this.filter!==l.BaseFilter.IN_RANGE?this.asNumber(this.filterNumber):[this.asNumber(this.filterNumber),this.asNumber(this.filterNumberTo)]}return this.filterCondition!==l.BaseFilter.IN_RANGE?this.asNumber(this.filterNumberCondition):[this.asNumber(this.filterNumberCondition),this.asNumber(this.filterNumberConditionTo)]};t.prototype.asNumber=function(e){return a.Utils.isNumeric(e)?e:null};t.prototype.stringToFloat=function(e){var t=a.Utils.makeNull(e);if(t&&t.trim()===""){t=null}var i;if(t!==null&&t!==undefined){i=parseFloat(t)}else{i=null}return i};t.prototype.setFilter=function(e,t){e=a.Utils.makeNull(e);if(e!==null&&!(typeof e==="number")){e=parseFloat(e)}if(t===l.FilterConditionType.MAIN){this.filterNumber=e;if(!this.eFilterTextField)return;this.eFilterTextField.value=e}else{this.filterNumberCondition=e;if(!this.eFilterTextConditionField)return;this.eFilterTextConditionField.value=e}};t.prototype.setFilterTo=function(e,t){e=a.Utils.makeNull(e);if(e!==null&&!(typeof e==="number")){e=parseFloat(e)}if(t===l.FilterConditionType.MAIN){this.filterNumberTo=e;if(!this.eFilterToTextField)return;this.eFilterToTextField.value=e}else{this.filterNumberConditionTo=e;if(!this.eFilterToConditionText)return;this.eFilterToConditionText.value=e}};t.prototype.getFilter=function(e){return e===l.FilterConditionType.MAIN?this.filterNumber:this.filterNumberCondition};t.prototype.serialize=function(e){var t=e===l.FilterConditionType.MAIN?this.filter:this.filterCondition;var i=e===l.FilterConditionType.MAIN?this.filterNumber:this.filterNumberCondition;var n=e===l.FilterConditionType.MAIN?this.filterNumberTo:this.filterNumberConditionTo;return{type:t?t:this.defaultFilter,filter:i,filterTo:n,filterType:"number"}};t.prototype.parse=function(e,t){this.setFilterType(e.type,t);this.setFilter(e.filter,t);this.setFilterTo(e.filterTo,t)};t.prototype.refreshFilterBodyUi=function(e){var i=e===l.FilterConditionType.MAIN?this.filter:this.filterCondition;var n=e===l.FilterConditionType.MAIN?this.eNumberToPanel:this.eNumberToConditionPanel;if(!n)return;var r=i===t.IN_RANGE;a.Utils.setVisible(n,r)};t.prototype.resetState=function(){this.setFilterType(this.defaultFilter,l.FilterConditionType.MAIN);this.setFilter(null,l.FilterConditionType.MAIN);this.setFilterTo(null,l.FilterConditionType.MAIN);this.setFilterType(this.defaultFilter,l.FilterConditionType.CONDITION);this.setFilter(null,l.FilterConditionType.CONDITION);this.setFilterTo(null,l.FilterConditionType.CONDITION)};t.prototype.setType=function(e,t){this.setFilterType(e,t)};t.LESS_THAN="lessThan";r([s.QuerySelector("#filterNumberToPanel"),o("design:type",HTMLElement)],t.prototype,"eNumberToPanel",void 0);r([s.QuerySelector("#filterNumberToPanelCondition"),o("design:type",HTMLElement)],t.prototype,"eNumberToConditionPanel",void 0);r([s.QuerySelector("#filterToText"),o("design:type",HTMLInputElement)],t.prototype,"eFilterToTextField",void 0);r([s.QuerySelector("#filterToConditionText"),o("design:type",HTMLInputElement)],t.prototype,"eFilterToConditionText",void 0);return t}(l.ScalarBaseFilter);t.NumberFilter=u},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(23);var s=i(9);var l=i(44);var u=i(29);var c=i(22);var d=i(1);var f=i(37);var p=i(4);var h=i(2);var g=function(){function e(){}e.prototype.init=function(){this.scrollWidth=this.gridOptionsWrapper.getScrollbarWidth()};e.prototype.registerGridComp=function(e){this.gridPanel=e};e.prototype.handlePageScrollingKey=function(e){var t=e.which||e.keyCode;var i=e.altKey;var n=e.ctrlKey;var r=this.mouseEventService.getGridCellForEvent(e).getGridCellDef();if(!r){return false}var o=false;switch(t){case s.Constants.KEY_PAGE_HOME:case s.Constants.KEY_PAGE_END:if(!n&&!i){this.onHomeOrEndKey(t);o=true}break;case s.Constants.KEY_LEFT:case s.Constants.KEY_RIGHT:if(n&&!i){this.onCtrlLeftOrRight(t,r);o=true}break;case s.Constants.KEY_UP:case s.Constants.KEY_DOWN:if(n&&!i){this.onCtrlUpOrDown(t,r);o=true}break;case s.Constants.KEY_PAGE_DOWN:if(!n&&!i){this.onPageDown(r);o=true}break;case s.Constants.KEY_PAGE_UP:if(!n&&!i){this.onPageUp(r);o=true}break}if(o){e.preventDefault()}return o};e.prototype.onPageDown=function(e){var t=this.gridPanel.getVScrollPosition();var i=t.bottom-t.top;if(this.gridPanel.isHorizontalScrollShowing()){i-=this.scrollWidth}var n=this.paginationProxy.getPixelOffset();var r=t.top+i;var o=this.paginationProxy.getRowIndexAtPixel(r+n);var a=o;var s=this.paginationProxy.getRow(e.rowIndex).rowTop;var l=s+i-n;var u=this.paginationProxy.getRowIndexAtPixel(l+n);var c=this.paginationProxy.getPageLastRow();if(u>c){u=c}if(a>c){a=c}this.navigateTo(a,"top",null,u,e.column)};e.prototype.onPageUp=function(e){var t=this.gridPanel.getVScrollPosition();var i=t.bottom-t.top;if(this.gridPanel.isHorizontalScrollShowing()){i-=this.scrollWidth}var n=this.paginationProxy.getPixelOffset();var r=t.top;var o=this.paginationProxy.getRowIndexAtPixel(r+n);var a=o;var s=this.paginationProxy.getRow(e.rowIndex);var l=s.rowTop+s.rowHeight-i-n;var u=this.paginationProxy.getRowIndexAtPixel(l+n);var c=this.paginationProxy.getPageFirstRow();if(u<c){u=c}if(a<c){a=c}this.navigateTo(a,"bottom",null,u,e.column)};e.prototype.navigateTo=function(e,t,i,n,r){if(d._.exists(i)){this.gridPanel.ensureColumnVisible(i)}if(d._.exists(e)){this.gridPanel.ensureIndexVisible(e,t)}this.animationFrameService.flushAllFrames();this.focusedCellController.setFocusedCell(n,r,null,true);if(this.rangeController){var o=new a.GridCell({rowIndex:n,floating:null,column:r});this.rangeController.setRangeToCell(o)}};e.prototype.onCtrlUpOrDown=function(e,t){var i=e===s.Constants.KEY_UP;var n=i?0:this.paginationProxy.getPageLastRow();this.navigateTo(n,null,t.column,n,t.column)};e.prototype.onCtrlLeftOrRight=function(e,t){var i=e===s.Constants.KEY_LEFT;var n=this.columnController.getAllDisplayedColumns();var r=i?n[0]:n[n.length-1];this.navigateTo(t.rowIndex,null,r,t.rowIndex,r)};e.prototype.onHomeOrEndKey=function(e){var t=e===s.Constants.KEY_PAGE_HOME;var i=this.columnController.getAllDisplayedColumns();var n=t?i[0]:i[i.length-1];var r=t?0:this.paginationProxy.getPageLastRow();this.navigateTo(r,null,n,r,n)};n([o.Autowired("mouseEventService"),r("design:type",l.MouseEventService)],e.prototype,"mouseEventService",void 0);n([o.Autowired("paginationProxy"),r("design:type",u.PaginationProxy)],e.prototype,"paginationProxy",void 0);n([o.Autowired("focusedCellController"),r("design:type",c.FocusedCellController)],e.prototype,"focusedCellController",void 0);n([o.Autowired("animationFrameService"),r("design:type",f.AnimationFrameService)],e.prototype,"animationFrameService",void 0);n([o.Optional("rangeController"),r("design:type",Object)],e.prototype,"rangeController",void 0);n([o.Autowired("columnController"),r("design:type",p.ColumnController)],e.prototype,"columnController",void 0);n([o.Autowired("gridOptionsWrapper"),r("design:type",h.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);e=n([o.Bean("navigationService")],e);return e}();t.NavigationService=g},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(1);var a=i(2);var s=i(0);var l=i(15);var u=i(4);var c=i(3);var d=i(5);var f=i(99);var p=i(101);var h=i(10);var g=i(36);var m=function(){function e(e,t,i){this.headerRowComps=[];this.eContainer=e;this.pinned=i;this.eViewport=t}e.prototype.registerGridComp=function(e){this.setupDragAndDrop(e)};e.prototype.forEachHeaderElement=function(e){this.headerRowComps.forEach((function(t){return t.forEachHeaderElement(e)}))};e.prototype.init=function(){this.scrollWidth=this.gridOptionsWrapper.getScrollbarWidth();this.eventService.addEventListener(d.Events.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this));this.eventService.addEventListener(d.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this));this.eventService.addEventListener(d.Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this));this.eventService.addEventListener(d.Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this));this.eventService.addEventListener(d.Events.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this));this.eventService.addEventListener(d.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this))};e.prototype.onColumnRowGroupChanged=function(){this.onGridColumnsChanged()};e.prototype.onColumnValueChanged=function(){this.onGridColumnsChanged()};e.prototype.onColumnResized=function(){this.setWidthOfPinnedContainer()};e.prototype.onDisplayedColumnsChanged=function(){this.setWidthOfPinnedContainer()};e.prototype.onScrollVisibilityChanged=function(){this.setWidthOfPinnedContainer()};e.prototype.setWidthOfPinnedContainer=function(){var e=this.pinned===h.Column.PINNED_LEFT;var t=this.pinned===h.Column.PINNED_RIGHT;if(e||t){var i=e?this.columnController.getPinnedLeftContainerWidth():this.columnController.getPinnedRightContainerWidth();var n=e?this.scrollVisibleService.isLeftVerticalScrollShowing():this.scrollVisibleService.isRightVerticalScrollShowing();if(n){i+=this.scrollWidth}this.eContainer.style.width=i+"px"}};e.prototype.destroy=function(){this.removeHeaderRowComps()};e.prototype.onGridColumnsChanged=function(){this.removeHeaderRowComps();this.createHeaderRowComps()};e.prototype.refresh=function(){this.onGridColumnsChanged()};e.prototype.setupDragAndDrop=function(e){var t=this.eViewport?this.eViewport:this.eContainer;var i=new p.BodyDropTarget(this.pinned,t);this.context.wireBean(i);i.registerGridComp(e)};e.prototype.removeHeaderRowComps=function(){this.headerRowComps.forEach((function(e){e.destroy()}));this.headerRowComps.length=0;o.Utils.removeAllChildren(this.eContainer)};e.prototype.createHeaderRowComps=function(){var e=this.columnController.getHeaderRowCount();for(var t=0;t<e;t++){var i=t!==e-1;var n=i?f.HeaderRowType.COLUMN_GROUP:f.HeaderRowType.COLUMN;var r=new f.HeaderRowComp(t,n,this.pinned,this.dropTarget);this.context.wireBean(r);this.headerRowComps.push(r);this.eContainer.appendChild(r.getGui())}var o=this.gridOptionsWrapper.isFloatingFilter()&&!this.columnController.isPivotMode();if(o){var r=new f.HeaderRowComp(e,f.HeaderRowType.FLOATING_FILTER,this.pinned,this.dropTarget);this.context.wireBean(r);this.headerRowComps.push(r);this.eContainer.appendChild(r.getGui())}};n([s.Autowired("gridOptionsWrapper"),r("design:type",a.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([s.Autowired("context"),r("design:type",s.Context)],e.prototype,"context",void 0);n([s.Autowired("$scope"),r("design:type",Object)],e.prototype,"$scope",void 0);n([s.Autowired("dragAndDropService"),r("design:type",l.DragAndDropService)],e.prototype,"dragAndDropService",void 0);n([s.Autowired("columnController"),r("design:type",u.ColumnController)],e.prototype,"columnController",void 0);n([s.Autowired("eventService"),r("design:type",c.EventService)],e.prototype,"eventService",void 0);n([s.Autowired("scrollVisibleService"),r("design:type",g.ScrollVisibleService)],e.prototype,"scrollVisibleService",void 0);n([s.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);return e}();t.HeaderContainer=m},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(8);var s=i(0);var l=i(2);var u=i(4);var c=i(10);var d=i(3);var f=i(5);var p=i(1);var h=i(100);var g=i(133);var m=i(18);var v=i(21);var y=i(6);var b;(function(e){e[e["COLUMN_GROUP"]=0]="COLUMN_GROUP";e[e["COLUMN"]=1]="COLUMN";e[e["FLOATING_FILTER"]=2]="FLOATING_FILTER"})(b=t.HeaderRowType||(t.HeaderRowType={}));var _=function(e){n(t,e);function t(t,i,n,r){var o=e.call(this,'<div class="ag-header-row" role="presentation"/>')||this;o.headerComps={};o.dept=t;o.type=i;o.pinned=n;o.dropTarget=r;return o}t.prototype.forEachHeaderElement=function(e){var t=this;Object.keys(this.headerComps).forEach((function(i){e(t.headerComps[i])}))};t.prototype.destroy=function(){var t=Object.keys(this.headerComps);this.removeAndDestroyChildComponents(t);e.prototype.destroy.call(this)};t.prototype.removeAndDestroyChildComponents=function(e){var t=this;e.forEach((function(e){var i=t.headerComps[e];t.getGui().removeChild(i.getGui());if(i.destroy){i.destroy()}delete t.headerComps[e]}))};t.prototype.onRowHeightChanged=function(){var e=this.columnController.getHeaderRowCount();var t=[];var i=0;var n;var r;if(!this.columnController.isPivotMode()){if(this.gridOptionsWrapper.isFloatingFilter()){e++}i=this.gridOptionsWrapper.isFloatingFilter()?1:0;n=this.gridOptionsWrapper.getGroupHeaderHeight();r=this.gridOptionsWrapper.getHeaderHeight()}else{i=0;n=this.gridOptionsWrapper.getPivotGroupHeaderHeight();r=this.gridOptionsWrapper.getPivotHeaderHeight()}var o=1+i;var a=e-o;for(var s=0;s<a;s++){t.push(n)}t.push(r);for(var s=0;s<i;s++){t.push(this.gridOptionsWrapper.getFloatingFiltersHeight())}var l=0;for(var s=0;s<this.dept;s++){l+=t[s]}this.getGui().style.top=l+"px";this.getGui().style.height=t[this.dept]+"px"};t.prototype.init=function(){this.onRowHeightChanged();this.onVirtualColumnsChanged();this.setWidth();this.addDestroyableEventListener(this.gridOptionsWrapper,l.GridOptionsWrapper.PROP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this));this.addDestroyableEventListener(this.gridOptionsWrapper,l.GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT,this.onRowHeightChanged.bind(this));this.addDestroyableEventListener(this.gridOptionsWrapper,l.GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this));this.addDestroyableEventListener(this.gridOptionsWrapper,l.GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this));this.addDestroyableEventListener(this.gridOptionsWrapper,l.GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT,this.onRowHeightChanged.bind(this));this.addDestroyableEventListener(this.eventService,f.Events.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this));this.addDestroyableEventListener(this.eventService,f.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this));this.addDestroyableEventListener(this.eventService,f.Events.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this));this.addDestroyableEventListener(this.eventService,f.Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this))};t.prototype.onColumnResized=function(){this.setWidth()};t.prototype.setWidth=function(){var e=this.columnController.getContainerWidth(this.pinned)+"px";this.getGui().style.width=e};t.prototype.onGridColumnsChanged=function(){this.removeAndDestroyAllChildComponents()};t.prototype.removeAndDestroyAllChildComponents=function(){var e=Object.keys(this.headerComps);this.removeAndDestroyChildComponents(e)};t.prototype.onDisplayedColumnsChanged=function(){this.onVirtualColumnsChanged();this.setWidth()};t.prototype.onVirtualColumnsChanged=function(){var e=this;var t=Object.keys(this.headerComps);var i=this.columnController.getVirtualHeaderGroupRow(this.pinned,this.type==b.FLOATING_FILTER?this.dept-1:this.dept);var n=this.gridOptionsWrapper.isEnsureDomOrder();var r;i.forEach((function(i){if(i.isEmptyGroup()){return}var o=i.getUniqueId();var a=e.getGui();var s=t.indexOf(o)>=0;var l;var u;if(s){p.Utils.removeFromArray(t,o);l=e.headerComps[o];u=l.getGui();if(n){p.Utils.ensureDomOrder(a,u,r)}r=u}else{l=e.createHeaderComp(i);e.headerComps[o]=l;u=l.getGui();if(n){p.Utils.insertWithDomOrder(a,u,r)}else{a.appendChild(u)}r=u}}));this.removeAndDestroyChildComponents(t)};t.prototype.createHeaderComp=function(e){var t;switch(this.type){case b.COLUMN:t=new h.HeaderWrapperComp(e,this.dropTarget,this.pinned);break;case b.COLUMN_GROUP:t=new g.HeaderGroupWrapperComp(e,this.dropTarget,this.pinned);break;case b.FLOATING_FILTER:var i=e;t=this.createFloatingFilterWrapper(i);break}this.context.wireBean(t);return t};t.prototype.createFloatingFilterWrapper=function(e){var t=this;var i=this.createFloatingFilterParams(e);var n=this.componentRecipes.newFloatingFilterWrapperComponent(e,i);this.addDestroyableEventListener(e,c.Column.EVENT_FILTER_CHANGED,(function(){var i=t.filterManager.getFilterComponent(e);n.onParentModelChanged(i.resolveNow(null,(function(e){return e.getModel()})))}));var r=this.filterManager.cachedFilter(e);if(r){var o=this.filterManager.getFilterComponent(e);n.onParentModelChanged(o.resolveNow(null,(function(e){return e.getModel()})))}return n};t.prototype.createFloatingFilterParams=function(e){var t=this;var i={api:this.gridApi,column:e,currentParentModel:function(){var i=t.filterManager.getFilterComponent(e);var n=i.resolveNow(null,(function(e){return e.getNullableModel?e.getNullableModel():e.getModel()}));return n.operator!=null?n.condition1:n},onFloatingFilterChanged:function(i){var n;var r=new p.Promise((function(e){n=e}));var o=t.filterManager.getFilterComponent(e);o.then((function(e){if(e.onFloatingFilterChanged){var r=e.onFloatingFilterChanged(i);n(r)}else{e.setModel(i);t.filterManager.onFilterChanged();n(true)}}));return r.resolveNow(true,(function(e){return e}))},suppressFilterButton:false};return i};r([s.Autowired("gridOptionsWrapper"),o("design:type",l.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([s.Autowired("gridApi"),o("design:type",y.GridApi)],t.prototype,"gridApi",void 0);r([s.Autowired("columnController"),o("design:type",u.ColumnController)],t.prototype,"columnController",void 0);r([s.Autowired("context"),o("design:type",s.Context)],t.prototype,"context",void 0);r([s.Autowired("eventService"),o("design:type",d.EventService)],t.prototype,"eventService",void 0);r([s.Autowired("filterManager"),o("design:type",m.FilterManager)],t.prototype,"filterManager",void 0);r([s.Autowired("componentRecipes"),o("design:type",v.ComponentRecipes)],t.prototype,"componentRecipes",void 0);r([s.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"init",null);return t}(a.Component);t.HeaderRowComp=_},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(8);var s=i(0);var l=i(10);var u=i(1);var c=i(15);var d=i(7);var f=i(4);var p=i(59);var h=i(2);var g=i(81);var m=i(52);var v=i(6);var y=i(24);var b=i(3);var _=i(21);var w=i(60);var C=i(11);var A=i(132);var E=i(5);var x=i(45);var T=i(28);var S=i(74);var D=i(46);var k=function(e){n(t,e);function t(i,n,r){var o=e.call(this,t.TEMPLATE)||this;o.column=i;o.dragSourceDropTarget=n;o.pinned=r;return o}t.prototype.getColumn=function(){return this.column};t.prototype.init=function(){this.instantiate(this.context);var e=this.columnController.getDisplayNameForColumn(this.column,"header",true);var t=this.gridOptionsWrapper.isEnableSorting()&&!this.column.getColDef().suppressSorting;var i=this.menuFactory.isMenuEnabled(this.column)&&!this.column.getColDef().suppressMenu;this.appendHeaderComp(e,t,i);this.setupWidth();this.setupMovingCss();this.setupTooltip();this.setupResize();this.setupMenuClass();this.setupSortableClass(t);this.addColumnHoverListener();this.addFeature(this.context,new S.HoverFeature([this.column],this.getGui()));this.addDestroyableEventListener(this.column,l.Column.EVENT_FILTER_ACTIVE_CHANGED,this.onFilterChanged.bind(this));this.onFilterChanged();this.addFeature(this.context,new A.SelectAllFeature(this.cbSelectAll,this.column));var n=new m.SetLeftFeature(this.column,this.getGui(),this.beans);n.init();this.addDestroyFunc(n.destroy.bind(n));this.addAttributes();g.CssClassApplier.addHeaderClassesFromColDef(this.column.getColDef(),this.getGui(),this.gridOptionsWrapper,this.column,null)};t.prototype.addColumnHoverListener=function(){this.addDestroyableEventListener(this.eventService,E.Events.EVENT_COLUMN_HOVER_CHANGED,this.onColumnHover.bind(this));this.onColumnHover()};t.prototype.onColumnHover=function(){var e=this.columnHoverService.isHovered(this.column);u.Utils.addOrRemoveCssClass(this.getGui(),"ag-column-hover",e)};t.prototype.setupSortableClass=function(e){if(e){var t=this.getGui();u.Utils.addCssClass(t,"ag-header-cell-sortable")}};t.prototype.onFilterChanged=function(){var e=this.column.isFilterActive();u.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-filtered",e)};t.prototype.appendHeaderComp=function(e,t,i){var n=this;var r={column:this.column,displayName:e,enableSorting:t,enableMenu:i,showColumnMenu:function(e){n.gridApi.showColumnMenuAfterButtonClick(n.column,e)},progressSort:function(e){n.sortController.progressSort(n.column,!!e,"uiColumnSorted")},setSort:function(e,t){n.sortController.setSortForColumn(n.column,e,!!t,"uiColumnSorted")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};var o=this.afterHeaderCompCreated.bind(this,e);this.componentRecipes.newHeaderComponent(r).then(o)};t.prototype.afterHeaderCompCreated=function(e,t){this.appendChild(t);this.setupMove(t.getGui(),e);if(t.destroy){this.addDestroyFunc(t.destroy.bind(t))}};t.prototype.onColumnMovingChanged=function(){if(this.column.isMoving()){u.Utils.addCssClass(this.getGui(),"ag-header-cell-moving")}else{u.Utils.removeCssClass(this.getGui(),"ag-header-cell-moving")}};t.prototype.setupMove=function(e,t){var i=this;var n=this.gridOptionsWrapper.isSuppressMovableColumns()||this.column.getColDef().suppressMovable||this.column.isLockPosition();if(n){return}if(e){var r={type:c.DragSourceType.HeaderCell,eElement:e,dragItemCallback:function(){return i.createDragItem()},dragItemName:t,dragSourceDropTarget:this.dragSourceDropTarget,dragStarted:function(){return i.column.setMoving(true,"uiColumnMoved")},dragStopped:function(){return i.column.setMoving(false,"uiColumnMoved")}};this.dragAndDropService.addDragSource(r,true);this.addDestroyFunc((function(){return i.dragAndDropService.removeDragSource(r)}))}};t.prototype.createDragItem=function(){var e={};e[this.column.getId()]=this.column.isVisible();return{columns:[this.column],visibleState:e}};t.prototype.setupResize=function(){var e=this;var t=this.column.getColDef();if(!this.eResize){return}if(!this.column.isResizable()){u.Utils.removeFromParent(this.eResize);return}var i=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,false),onResizeEnd:this.onResizing.bind(this,true)});this.addDestroyFunc(i);var n=!this.gridOptionsWrapper.isSuppressAutoSize()&&!t.suppressAutoSize;if(n){this.addDestroyableEventListener(this.eResize,"dblclick",(function(){e.columnController.autoSizeColumn(e.column,"uiColumnResized")}));var r=new D.TouchListener(this.eResize);this.addDestroyableEventListener(r,D.TouchListener.EVENT_DOUBLE_TAP,(function(){e.columnController.autoSizeColumn(e.column,"uiColumnResized")}));this.addDestroyFunc(r.destroy.bind(r))}};t.prototype.onResizing=function(e,t){var i=this.normaliseResizeAmount(t);var n=this.resizeStartWidth+i;this.columnController.setColumnWidth(this.column,n,this.resizeWithShiftKey,e,"uiColumnDragged")};t.prototype.onResizeStart=function(e){this.resizeStartWidth=this.column.getActualWidth();this.resizeWithShiftKey=e};t.prototype.setupTooltip=function(){var e=this.column.getColDef();if(e.headerTooltip){this.getGui().title=e.headerTooltip}};t.prototype.setupMovingCss=function(){this.addDestroyableEventListener(this.column,l.Column.EVENT_MOVING_CHANGED,this.onColumnMovingChanged.bind(this));this.onColumnMovingChanged()};t.prototype.addAttributes=function(){this.getGui().setAttribute("col-id",this.column.getColId())};t.prototype.setupWidth=function(){this.addDestroyableEventListener(this.column,l.Column.EVENT_WIDTH_CHANGED,this.onColumnWidthChanged.bind(this));this.onColumnWidthChanged()};t.prototype.setupMenuClass=function(){this.addDestroyableEventListener(this.column,l.Column.EVENT_MENU_VISIBLE_CHANGED,this.onMenuVisible.bind(this));this.onColumnWidthChanged()};t.prototype.onMenuVisible=function(){this.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};t.prototype.onColumnWidthChanged=function(){this.getGui().style.width=this.column.getActualWidth()+"px"};t.prototype.normaliseResizeAmount=function(e){var t=e;if(this.gridOptionsWrapper.isEnableRtl()){if(this.pinned!==l.Column.PINNED_LEFT){t*=-1}}else{if(this.pinned===l.Column.PINNED_RIGHT){t*=-1}}return t};t.TEMPLATE='<div class="ag-header-cell" role="presentation" >'+'<div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>'+'<ag-checkbox ref="cbSelectAll" class="ag-header-select-all" role="presentation"></ag-checkbox>'+"</div>";r([s.Autowired("gridOptionsWrapper"),o("design:type",h.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([s.Autowired("dragAndDropService"),o("design:type",c.DragAndDropService)],t.prototype,"dragAndDropService",void 0);r([s.Autowired("columnController"),o("design:type",f.ColumnController)],t.prototype,"columnController",void 0);r([s.Autowired("horizontalResizeService"),o("design:type",p.HorizontalResizeService)],t.prototype,"horizontalResizeService",void 0);r([s.Autowired("context"),o("design:type",s.Context)],t.prototype,"context",void 0);r([s.Autowired("menuFactory"),o("design:type",Object)],t.prototype,"menuFactory",void 0);r([s.Autowired("gridApi"),o("design:type",v.GridApi)],t.prototype,"gridApi",void 0);r([s.Autowired("columnApi"),o("design:type",d.ColumnApi)],t.prototype,"columnApi",void 0);r([s.Autowired("sortController"),o("design:type",y.SortController)],t.prototype,"sortController",void 0);r([s.Autowired("eventService"),o("design:type",b.EventService)],t.prototype,"eventService",void 0);r([s.Autowired("componentRecipes"),o("design:type",_.ComponentRecipes)],t.prototype,"componentRecipes",void 0);r([s.Autowired("columnHoverService"),o("design:type",x.ColumnHoverService)],t.prototype,"columnHoverService",void 0);r([s.Autowired("beans"),o("design:type",T.Beans)],t.prototype,"beans",void 0);r([C.RefSelector("eResize"),o("design:type",HTMLElement)],t.prototype,"eResize",void 0);r([C.RefSelector("cbSelectAll"),o("design:type",w.AgCheckbox)],t.prototype,"cbSelectAll",void 0);r([s.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"init",null);return t}(a.Component);t.HeaderWrapperComp=k},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(15);var a=i(0);var s=i(102);var l=i(10);var u=i(103);var c=i(4);var d;(function(e){e[e["ColumnMove"]=0]="ColumnMove";e[e["Pivot"]=1]="Pivot"})(d||(d={}));var f=function(){function e(e,t){this.dropListeners={};this.pinned=e;this.eContainer=t}e.prototype.registerGridComp=function(e){this.gridPanel=e;this.moveColumnController.registerGridComp(e);switch(this.pinned){case l.Column.PINNED_LEFT:this.eSecondaryContainers=this.gridPanel.getDropTargetLeftContainers();break;case l.Column.PINNED_RIGHT:this.eSecondaryContainers=this.gridPanel.getDropTargetRightContainers();break;default:this.eSecondaryContainers=this.gridPanel.getDropTargetBodyContainers();break}};e.prototype.isInterestedIn=function(e){return e===o.DragSourceType.HeaderCell||e===o.DragSourceType.ToolPanel};e.prototype.getSecondaryContainers=function(){return this.eSecondaryContainers};e.prototype.getContainer=function(){return this.eContainer};e.prototype.init=function(){this.moveColumnController=new s.MoveColumnController(this.pinned,this.eContainer);this.context.wireBean(this.moveColumnController);var e=new u.BodyDropPivotTarget(this.pinned);this.context.wireBean(e);this.dropListeners[d.ColumnMove]=this.moveColumnController;this.dropListeners[d.Pivot]=e;this.dragAndDropService.addDropTarget(this)};e.prototype.getIconName=function(){return this.currentDropListener.getIconName()};e.prototype.getDropType=function(e){if(this.columnController.isPivotMode()){if(e.dragSource.type===o.DragSourceType.ToolPanel){return d.Pivot}else{return d.ColumnMove}}else{return d.ColumnMove}};e.prototype.onDragEnter=function(e){var t=this.getDropType(e);this.currentDropListener=this.dropListeners[t];this.currentDropListener.onDragEnter(e)};e.prototype.onDragLeave=function(e){this.currentDropListener.onDragLeave(e)};e.prototype.onDragging=function(e){this.currentDropListener.onDragging(e)};e.prototype.onDragStop=function(e){this.currentDropListener.onDragStop(e)};n([a.Autowired("context"),r("design:type",a.Context)],e.prototype,"context",void 0);n([a.Autowired("dragAndDropService"),r("design:type",o.DragAndDropService)],e.prototype,"dragAndDropService",void 0);n([a.Autowired("columnController"),r("design:type",c.ColumnController)],e.prototype,"columnController",void 0);n([a.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);return e}();t.BodyDropTarget=f},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(12);var s=i(4);var l=i(10);var u=i(1);var c=i(15);var d=i(2);var f=function(){function e(e,t){this.needToMoveLeft=false;this.needToMoveRight=false;this.pinned=e;this.eContainer=t;this.centerContainer=!u.Utils.exists(e)}e.prototype.registerGridComp=function(e){this.gridPanel=e};e.prototype.init=function(){this.logger=this.loggerFactory.create("MoveColumnController")};e.prototype.getIconName=function(){return this.pinned?c.DragAndDropService.ICON_PINNED:c.DragAndDropService.ICON_MOVE};e.prototype.onDragEnter=function(e){var t=e.dragItem.columns;var i=e.dragSource.type===c.DragSourceType.ToolPanel;if(i){this.setColumnsVisible(t,true,"uiColumnDragged")}else{var n=e.dragItem.visibleState;var r=t.filter((function(e){return n[e.getId()]}));this.setColumnsVisible(r,true,"uiColumnDragged")}this.setColumnsPinned(t,this.pinned,"uiColumnDragged");this.onDragging(e,true)};e.prototype.onDragLeave=function(e){var t=!this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns()&&!e.fromNudge;if(t){var i=e.dragSource.dragItemCallback();var n=i.columns;this.setColumnsVisible(n,false,"uiColumnDragged")}this.ensureIntervalCleared()};e.prototype.setColumnsVisible=function(e,t,i){if(i===void 0){i="api"}if(e){var n=e.filter((function(e){return!e.isLockVisible()}));this.columnController.setColumnsVisible(n,t,i)}};e.prototype.setColumnsPinned=function(e,t,i){if(i===void 0){i="api"}if(e){var n=e.filter((function(e){return!e.isLockPinned()}));this.columnController.setColumnsPinned(n,t,i)}};e.prototype.onDragStop=function(){this.ensureIntervalCleared()};e.prototype.normaliseX=function(e){var t=this.gridOptionsWrapper.isEnableRtl();if(t){var i=this.eContainer.clientWidth;e=i-e}var n=this.centerContainer;if(n){e+=this.gridPanel.getBodyViewportScrollLeft()}return e};e.prototype.checkCenterForScrolling=function(e){if(this.centerContainer){var t=this.gridPanel.getBodyViewportScrollLeft();var i=t+this.gridPanel.getCenterWidth();if(this.gridOptionsWrapper.isEnableRtl()){this.needToMoveRight=e<t+50;this.needToMoveLeft=e>i-50}else{this.needToMoveLeft=e<t+50;this.needToMoveRight=e>i-50}if(this.needToMoveLeft||this.needToMoveRight){this.ensureIntervalStarted()}else{this.ensureIntervalCleared()}}};e.prototype.onDragging=function(e,t){var i=this;if(t===void 0){t=false}this.lastDraggingEvent=e;if(u.Utils.missing(e.hDirection)){return}var n=this.normaliseX(e.x);if(!t){this.checkCenterForScrolling(n)}var r=this.normaliseDirection(e.hDirection);var o=e.dragSource.type;var a=e.dragSource.dragItemCallback().columns;a=a.filter((function(e){if(e.isLockPinned()){return e.getPinned()==i.pinned}else{return true}}));this.attemptMoveColumns(o,a,r,n,t)};e.prototype.normaliseDirection=function(e){if(this.gridOptionsWrapper.isEnableRtl()){switch(e){case c.HDirection.Left:return c.HDirection.Right;case c.HDirection.Right:return c.HDirection.Left;default:console.error("ag-Grid: Unknown direction "+e)}}else{return e}};e.prototype.calculateOldIndex=function(e){var t=this.columnController.getAllGridColumns();var i=[];e.forEach((function(e){return i.push(t.indexOf(e))}));u.Utils.sortNumberArray(i);var n=i[0];var r=i[i.length-1];var o=r-n;var a=o!==i.length-1;return a?null:n};e.prototype.attemptMoveColumns=function(e,t,i,n,r){var o=i===c.HDirection.Left;var a=i===c.HDirection.Right;var s=this.calculateValidMoves(t,a,n);var l=this.calculateOldIndex(t);for(var u=0;u<s.length;u++){var d=s[u];var f=l!==null&&!r;if(e==c.DragSourceType.HeaderCell){f=l!==null}if(f){if(o&&d>=l){continue}if(a&&d<=l){continue}}if(!this.columnController.doesMovePassRules(t,d)){continue}this.columnController.moveColumns(t,d,"uiColumnDragged");return}};e.prototype.calculateValidMoves=function(e,t,i){var n=this.columnController.getDisplayedColumns(this.pinned);var r=this.columnController.getAllGridColumns();var o=function(t){return e.indexOf(t)>=0};var a=function(t){return e.indexOf(t)<0};var s=n.filter(o);var l=n.filter(a);var c=r.filter(a);var d=0;var f=i;if(t){var p=0;s.forEach((function(e){return p+=e.getActualWidth()}));f-=p}for(var h=0;h<l.length;h++){var g=l[h];f-=g.getActualWidth();if(f<0){break}d++}if(t){d++}var m;if(d>0){var v=l[d-1];m=c.indexOf(v)+1}else{m=0}var y=[m];var b=r[m];while(u.Utils.exists(b)&&this.isColumnHidden(n,b)){m++;y.push(m);b=r[m]}return y};e.prototype.isColumnHidden=function(e,t){return e.indexOf(t)<0};e.prototype.ensureIntervalStarted=function(){if(!this.movingIntervalId){this.intervalCount=0;this.failedMoveAttempts=0;this.movingIntervalId=setInterval(this.moveInterval.bind(this),100);if(this.needToMoveLeft){this.dragAndDropService.setGhostIcon(c.DragAndDropService.ICON_LEFT,true)}else{this.dragAndDropService.setGhostIcon(c.DragAndDropService.ICON_RIGHT,true)}}};e.prototype.ensureIntervalCleared=function(){if(this.moveInterval){clearInterval(this.movingIntervalId);this.movingIntervalId=null;this.dragAndDropService.setGhostIcon(c.DragAndDropService.ICON_MOVE)}};e.prototype.moveInterval=function(){var e;this.intervalCount++;e=10+this.intervalCount*5;if(e>100){e=100}var t;if(this.needToMoveLeft){t=this.gridPanel.scrollHorizontally(-e)}else if(this.needToMoveRight){t=this.gridPanel.scrollHorizontally(e)}if(t!==0){this.onDragging(this.lastDraggingEvent);this.failedMoveAttempts=0}else{this.failedMoveAttempts++;var i=this.lastDraggingEvent.dragItem.columns;var n=i.filter((function(e){return!e.isLockPinned()}));if(n.length>0){this.dragAndDropService.setGhostIcon(c.DragAndDropService.ICON_PINNED);if(this.failedMoveAttempts>7){var r=this.needToMoveLeft?l.Column.PINNED_LEFT:l.Column.PINNED_RIGHT;this.setColumnsPinned(n,r,"uiColumnDragged");this.dragAndDropService.nudge()}}}};n([o.Autowired("loggerFactory"),r("design:type",a.LoggerFactory)],e.prototype,"loggerFactory",void 0);n([o.Autowired("columnController"),r("design:type",s.ColumnController)],e.prototype,"columnController",void 0);n([o.Autowired("dragAndDropService"),r("design:type",c.DragAndDropService)],e.prototype,"dragAndDropService",void 0);n([o.Autowired("gridOptionsWrapper"),r("design:type",d.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);return e}();t.MoveColumnController=f},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(15);var a=i(4);var s=i(0);var l=i(2);var u=function(){function e(e){this.columnsToAggregate=[];this.columnsToGroup=[];this.columnsToPivot=[];this.pinned=e}e.prototype.onDragEnter=function(e){var t=this;this.clearColumnsList();if(this.gridOptionsWrapper.isFunctionsReadOnly()){return}var i=e.dragItem.columns;i.forEach((function(e){if(!e.isPrimary()){return}if(e.isAnyFunctionActive()){return}if(e.isAllowValue()){t.columnsToAggregate.push(e)}else if(e.isAllowRowGroup()){t.columnsToGroup.push(e)}else if(e.isAllowRowGroup()){t.columnsToPivot.push(e)}}))};e.prototype.getIconName=function(){var e=this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length;if(e>0){return this.pinned?o.DragAndDropService.ICON_PINNED:o.DragAndDropService.ICON_MOVE}else{return null}};e.prototype.onDragLeave=function(e){this.clearColumnsList()};e.prototype.clearColumnsList=function(){this.columnsToAggregate.length=0;this.columnsToGroup.length=0;this.columnsToPivot.length=0};e.prototype.onDragging=function(e){};e.prototype.onDragStop=function(e){if(this.columnsToAggregate.length>0){this.columnController.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop")}if(this.columnsToGroup.length>0){this.columnController.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop")}if(this.columnsToPivot.length>0){this.columnController.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}};n([s.Autowired("columnController"),r("design:type",a.ColumnController)],e.prototype,"columnController",void 0);n([s.Autowired("gridOptionsWrapper"),r("design:type",l.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);return e}();t.BodyDropPivotTarget=u},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(10);var s=i(2);var l=i(1);var u=i(4);var c=i(38);var d=function(){function e(){}t=e;e.prototype.createAutoGroupColumns=function(e){var t=this;var i=[];var n=this.gridOptionsWrapper.isTreeData();var r=this.gridOptionsWrapper.isGroupMultiAutoColumn();if(n&&r){console.log("ag-Grid: you cannot mix groupMultiAutoColumn with treeData, only one column can be used to display groups when doing tree data");r=false}if(r){e.forEach((function(e,n){i.push(t.createOneAutoGroupColumn(e,n))}))}else{i.push(this.createOneAutoGroupColumn(null))}return i};e.prototype.createOneAutoGroupColumn=function(e,i){var n=this.generateDefaultColDef(e);var r;if(e){r=t.GROUP_AUTO_COLUMN_ID+"-"+e.getId()}else{r=t.GROUP_AUTO_COLUMN_BUNDLE_ID}var o=this.gridOptionsWrapper.getAutoGroupColumnDef();l._.mergeDeep(n,o);n=this.balancedColumnTreeBuilder.mergeColDefs(n);n.colId=r;if(!this.gridOptionsWrapper.isTreeData()){var s=l._.missing(n.field)&&l._.missing(n.valueGetter)&&l._.missing(n.filterValueGetter);if(s){n.suppressFilter=true}}if(i>0){n.headerCheckboxSelection=false}var u=new a.Column(n,r,true);this.context.wireBean(u);return u};e.prototype.generateDefaultColDef=function(e){var t=this.gridOptionsWrapper.getLocaleTextFunc();var i={headerName:t("group","Group"),cellRenderer:"agGroupCellRenderer"};if(e){var n=e.getColDef();l._.assign(i,{headerName:this.columnController.getDisplayNameForColumn(e,"header"),headerValueGetter:n.headerValueGetter});if(n.cellRenderer){l._.assign(i,{cellRendererParams:{innerRenderer:n.cellRenderer,innerRendererParams:n.cellRendererParams}})}i.showRowGroup=e.getColId()}else{i.showRowGroup=true}return i};e.GROUP_AUTO_COLUMN_ID="ag-Grid-AutoColumn";e.GROUP_AUTO_COLUMN_BUNDLE_ID=t.GROUP_AUTO_COLUMN_ID;n([o.Autowired("gridOptionsWrapper"),r("design:type",s.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.Autowired("context"),r("design:type",o.Context)],e.prototype,"context",void 0);n([o.Autowired("columnController"),r("design:type",u.ColumnController)],e.prototype,"columnController",void 0);n([o.Autowired("balancedColumnTreeBuilder"),r("design:type",c.BalancedColumnTreeBuilder)],e.prototype,"balancedColumnTreeBuilder",void 0);e=t=n([o.Bean("autoGroupColService")],e);return e;var t}();t.AutoGroupColService=d},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(9);var s=i(1);var l=i(2);var u=function(){function e(){}e.prototype.postConstruct=function(){if(this.rowModel.getType()===a.Constants.ROW_MODEL_TYPE_CLIENT_SIDE){this.clientSideRowModel=this.rowModel}};e.prototype.createTransactionForRowData=function(e){if(s._.missing(this.clientSideRowModel)){console.error("ag-Grid: ImmutableService only works with ClientSideRowModel");return}var t=this.gridOptionsWrapper.getRowNodeIdFunc();if(s._.missing(t)){console.error("ag-Grid: ImmutableService requires getRowNodeId() callback to be implemented, your row data need IDs!");return}var i={remove:[],update:[],add:[]};var n=this.clientSideRowModel.getCopyOfNodesMap();var r={};if(s._.exists(e)){e.forEach((function(e,o){var a=t(e);var s=n[a];r[a]=o;if(s){var l=s.data!==e;if(l){i.update.push(e)}n[a]=undefined}else{i.add.push(e)}}))}s._.iterateObject(n,(function(e,t){if(t){i.remove.push(t.data)}}));return[i,r]};n([o.Autowired("rowModel"),r("design:type",Object)],e.prototype,"rowModel",void 0);n([o.Autowired("gridOptionsWrapper"),r("design:type",l.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"postConstruct",null);e=n([o.Bean("immutableService")],e);return e}();t.ImmutableService=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(){}e.STRING_PROPERTIES=["headerName","columnGroupShow","headerClass","toolPanelClass","headerValueGetter","pivotKeys","groupId","colId","sort","field","type","tooltipField","headerTooltip","cellClass","showRowGroup","template","templateUrl","filter","aggFunc","cellRenderer","cellEditor","pinned"];e.OBJECT_PROPERTIES=["headerGroupComponent","headerGroupComponentFramework","headerGroupComponentParams","cellStyle","cellRendererParams","cellEditorFramework","cellEditorParams","pinnedRowCellRendererFramework","pinnedRowCellRendererParams","filterFramework","filterParams","pivotValueColumn","headerComponent","headerComponentFramework","headerComponentParams","floatingFilterComponent","floatingFilterComponentParams","floatingFilterComponentFramework","refData"];e.ARRAY_PROPERTIES=["children","sortingOrder","allowedAggFuncs","menuTabs","pivotTotalColumnIds","cellClassRules","icons"];e.NUMBER_PROPERTIES=["sortedAt","width","minWidth","maxWidth","rowGroupIndex","pivotIndex"];e.BOOLEAN_PROPERTIES=["suppressCellFlash","suppressToolPanel","openByDefault","marryChildren","hide","rowGroup","pivot","checkboxSelection","headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","suppressMenu","suppressSorting","suppressMovable","suppressFilter","lockPosition","lockVisible","lockPinned","unSortIcon","suppressSizeToFit","suppressResize","suppressAutoSize","enableRowGroup","enablePivot","enableValue","editable","suppressPaste","suppressNavigable","enableCellChangeFlash","rowDrag","autoHeight"];e.FUNCTION_PROPERTIES=["valueGetter","valueSetter","filterValueGetter","keyCreator","cellRenderer","cellRendererFramework","pinnedRowCellRenderer","valueFormatter","pinnedRowValueFormatter","valueParser","comparator","equals","pivotComparator","suppressKeyboardEvent","colSpan","rowSpan","getQuickFilterText","newValueHandler","onCellValueChanged","onCellClicked","onCellDoubleClicked","onCellContextMenu","tooltip","cellRendererSelector","cellEditorSelector"];e.ALL_PROPERTIES=e.ARRAY_PROPERTIES.concat(e.OBJECT_PROPERTIES).concat(e.STRING_PROPERTIES).concat(e.NUMBER_PROPERTIES).concat(e.FUNCTION_PROPERTIES).concat(e.BOOLEAN_PROPERTIES);return e}();t.ColDefUtil=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(1);var r=function(){function e(){this.existingKeys=[]}e.prototype.getUniqueKey=function(e,t){e=n.Utils.toStringOrNull(e);var i=0;while(true){var r=void 0;if(e){r=e;if(i!==0){r+="_"+i}}else if(t){r=t;if(i!==0){r+="_"+i}}else{r=""+i}if(this.existingKeys.indexOf(r)<0){this.existingKeys.push(r);return r}i++}};return e}();t.ColumnKeyCreator=r},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(18);var s=i(1);var l=i(35);var u=i(2);var c=i(3);var d=function(){function e(){}e.prototype.hideActiveMenu=function(){if(this.hidePopup){this.hidePopup()}};e.prototype.showMenuAfterMouseEvent=function(e,t){var i=this;this.showPopup(e,(function(n){i.popupService.positionPopupUnderMouseEvent({column:e,type:"columnMenu",mouseEvent:t,ePopup:n})}))};e.prototype.showMenuAfterButtonClick=function(e,t){var i=this;this.showPopup(e,(function(n){i.popupService.positionPopupUnderComponent({type:"columnMenu",eventSource:t,ePopup:n,keepWithinBounds:true,column:e})}))};e.prototype.showPopup=function(e,t){var i=this;var n=this.filterManager.getOrCreateFilterWrapper(e);var r=document.createElement("div");s.Utils.addCssClass(r,"ag-menu");n.guiPromise.promise.then((function(e){r.appendChild(e)}));var o;var a=function(e){if(e.direction==="horizontal"){o()}};this.eventService.addEventListener("bodyScroll",a);var l=function(){i.eventService.removeEventListener("bodyScroll",a);e.setMenuVisible(false,"contextMenu")};o=this.popupService.addAsModalPopup(r,true,l);t(r);n.filterPromise.then((function(e){if(e.afterGuiAttached){var t={hidePopup:o};e.afterGuiAttached(t)}}));this.hidePopup=o;e.setMenuVisible(true,"contextMenu")};e.prototype.isMenuEnabled=function(e){return this.gridOptionsWrapper.isEnableFilter()&&e.isFilterAllowed()};n([o.Autowired("eventService"),r("design:type",c.EventService)],e.prototype,"eventService",void 0);n([o.Autowired("filterManager"),r("design:type",a.FilterManager)],e.prototype,"filterManager",void 0);n([o.Autowired("popupService"),r("design:type",l.PopupService)],e.prototype,"popupService",void 0);n([o.Autowired("gridOptionsWrapper"),r("design:type",u.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);e=n([o.Bean("menuFactory")],e);return e}();t.StandardMenuFactory=d},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(2);var s=i(110);var l=i(86);var u=function(){function e(){}e.prototype.execute=function(e){var t=e.rowNode;if(this.gridOptionsWrapper.isEnableServerSideFilter()){this.filterService.filter(t,false)}else{this.filterService.filterAccordingToColumnState(t)}this.selectableService.updateSelectableAfterFiltering(t)};n([o.Autowired("gridOptionsWrapper"),r("design:type",a.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.Autowired("selectableService"),r("design:type",l.SelectableService)],e.prototype,"selectableService",void 0);n([o.Autowired("filterService"),r("design:type",s.FilterService)],e.prototype,"filterService",void 0);e=n([o.Bean("filterStage")],e);return e}();t.FilterStage=u},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(18);var s=i(2);var l=function(){function e(){}e.prototype.postConstruct=function(){this.doingTreeData=this.gridOptionsWrapper.isTreeData()};e.prototype.filterAccordingToColumnState=function(e){var t=this.filterManager.isAnyFilterPresent();this.filter(e,t)};e.prototype.filter=function(e,t){var i=this;if(e.hasChildren()){e.childrenAfterGroup.forEach((function(e){return i.filter(e,t)}));if(t){e.childrenAfterFilter=e.childrenAfterGroup.filter((function(e){var t=e.childrenAfterFilter&&e.childrenAfterFilter.length>0;var n=e.data&&i.filterManager.doesRowPassFilter(e);return t||n}))}else{e.childrenAfterFilter=e.childrenAfterGroup}this.setAllChildrenCount(e)}else{e.childrenAfterFilter=e.childrenAfterGroup;e.setAllChildrenCount(null)}};e.prototype.setAllChildrenCountTreeData=function(e){var t=0;e.childrenAfterFilter.forEach((function(e){t++;t+=e.allChildrenCount}));e.setAllChildrenCount(t)};e.prototype.setAllChildrenCountGridGrouping=function(e){var t=0;e.childrenAfterFilter.forEach((function(e){if(e.group){t+=e.allChildrenCount}else{t++}}));e.setAllChildrenCount(t)};e.prototype.setAllChildrenCount=function(e){if(this.doingTreeData){this.setAllChildrenCountTreeData(e)}else{this.setAllChildrenCountGridGrouping(e)}};n([o.Autowired("filterManager"),r("design:type",a.FilterManager)],e.prototype,"filterManager",void 0);n([o.Autowired("gridOptionsWrapper"),r("design:type",s.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"postConstruct",null);e=n([o.Bean("filterService")],e);return e}();t.FilterService=l},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(2);var s=i(112);var l=function(){function e(){}e.prototype.execute=function(e){if(this.gridOptionsWrapper.isEnableServerSideSorting()){this.sortService.sort(e.rowNode,null)}else{this.sortService.sortAccordingToColumnsState(e.rowNode)}};n([o.Autowired("gridOptionsWrapper"),r("design:type",a.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.Autowired("sortService"),r("design:type",s.SortService)],e.prototype,"sortService",void 0);e=n([o.Bean("sortStage")],e);return e}();t.SortStage=l},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(24);var s=i(1);var l=i(16);var u=i(2);var c=i(4);var d=function(){function e(){}e.prototype.init=function(){this.postSortFunc=this.gridOptionsWrapper.getPostSortFunc()};e.prototype.sortAccordingToColumnsState=function(e){var t=this.sortController.getSortForRowController();this.sort(e,t)};e.prototype.sort=function(e,t){var i=this;e.childrenAfterSort=e.childrenAfterFilter.slice(0);this.pullDownDataForHideOpenParents(e,true);var n=s._.exists(t)&&t.length>0;if(n){var r=e.childrenAfterSort.map((function(e,t){return{currentPos:t,rowNode:e}}));r.sort(this.compareRowNodes.bind(this,t));e.childrenAfterSort=r.map((function(e){return e.rowNode}))}this.updateChildIndexes(e);this.pullDownDataForHideOpenParents(e,false);e.childrenAfterFilter.forEach((function(e){if(e.hasChildren()){i.sort(e,t)}}));if(this.postSortFunc){this.postSortFunc(e.childrenAfterSort)}};e.prototype.compareRowNodes=function(e,t,i){var n=t.rowNode;var r=i.rowNode;for(var o=0,a=e.length;o<a;o++){var l=e[o];var u=l.inverter===-1;var c=this.getValue(n,l.column);var d=this.getValue(r,l.column);var f=void 0;if(l.column.getColDef().comparator){f=l.column.getColDef().comparator(c,d,n,r,u)}else{f=s._.defaultComparator(c,d,this.gridOptionsWrapper.isAccentedSort())}if(f!==0){return f*l.inverter}}return t.currentPos-i.currentPos};e.prototype.getValue=function(e,t){return this.valueService.getValue(t,e)};e.prototype.updateChildIndexes=function(e){if(s._.missing(e.childrenAfterSort)){return}e.childrenAfterSort.forEach((function(t,i){var n=i===0;var r=i===e.childrenAfterSort.length-1;t.setFirstChild(n);t.setLastChild(r);t.setChildIndex(i)}))};e.prototype.pullDownDataForHideOpenParents=function(e,t){var i=this;if(s._.missing(e.childrenAfterSort)){return}if(!this.gridOptionsWrapper.isGroupHideOpenParents()){return}e.childrenAfterSort.forEach((function(e){var n=i.columnController.getGroupDisplayColumns();n.forEach((function(n){var r=n.getColDef().showRowGroup;if(typeof r!=="string"){console.error("ag-Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}var o=r;var a=i.columnController.getPrimaryColumn(o);var s=a===e.rowGroupColumn;if(s){return}if(t){e.setGroupValue(n.getId(),null)}else{var l=e.getFirstChildOfFirstChild(a);if(l){e.setGroupValue(n.getId(),l.key)}}}))}))};n([o.Autowired("sortController"),r("design:type",a.SortController)],e.prototype,"sortController",void 0);n([o.Autowired("columnController"),r("design:type",c.ColumnController)],e.prototype,"columnController",void 0);n([o.Autowired("valueService"),r("design:type",l.ValueService)],e.prototype,"valueService",void 0);n([o.Autowired("gridOptionsWrapper"),r("design:type",u.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);e=n([o.Bean("sortService")],e);return e}();t.SortService=d},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(0);var a=i(14);var s=i(1);var l=i(2);var u=i(17);var c=i(3);var d=i(4);var f=function(){function e(){}e.prototype.execute=function(e){var t=e.rowNode;var i=[];var n={value:0};var r=this.columnController.isPivotMode();var o=r&&t.leafGroup;var a=o?[t]:t.childrenAfterSort;this.resetRowTops(t);this.recursivelyAddToRowsToDisplay(a,i,n,r,0);var s=!o&&this.gridOptionsWrapper.isGroupIncludeTotalFooter();if(s){this.ensureFooterNodeExists(t);this.addRowNodeToRowsToDisplay(t.sibling,i,n,0)}return i};e.prototype.resetRowTops=function(e){e.clearRowTop();if(e.hasChildren()){if(e.childrenAfterGroup){for(var t=0;t<e.childrenAfterGroup.length;t++){this.resetRowTops(e.childrenAfterGroup[t])}}if(e.sibling){e.sibling.clearRowTop()}}};e.prototype.recursivelyAddToRowsToDisplay=function(e,t,i,n,r){if(s.Utils.missingOrEmpty(e)){return}var o=this.gridOptionsWrapper.isGroupSuppressRow();var a=this.gridOptionsWrapper.isGroupHideOpenParents();var l=this.gridOptionsWrapper.isGroupRemoveSingleChildren();var u=!l&&this.gridOptionsWrapper.isGroupRemoveLowestSingleChildren();for(var c=0;c<e.length;c++){var d=e[c];var f=d.hasChildren();var p=o&&f;var h=n&&!f;var g=l&&f&&d.childrenAfterGroup.length===1;var m=u&&f&&d.leafGroup&&d.childrenAfterGroup.length===1;var v=n&&d.leafGroup;var y=a&&d.expanded&&!v;var b=!h&&!p&&!y&&!g&&!m;if(b){this.addRowNodeToRowsToDisplay(d,t,i,r)}if(n&&d.leafGroup){continue}if(f){var _=g||m;if(d.expanded||_){var w=_?r:r+1;this.recursivelyAddToRowsToDisplay(d.childrenAfterSort,t,i,n,w);if(this.gridOptionsWrapper.isGroupIncludeFooter()){this.ensureFooterNodeExists(d);this.addRowNodeToRowsToDisplay(d.sibling,t,i,r)}}else{}}else if(d.master&&d.expanded){var C=this.createDetailNode(d);this.addRowNodeToRowsToDisplay(C,t,i,r)}}};e.prototype.addRowNodeToRowsToDisplay=function(e,t,i,n){t.push(e);if(s.Utils.missing(e.rowHeight)){var r=this.gridOptionsWrapper.getRowHeightForNode(e);e.setRowHeight(r)}e.setUiLevel(n);e.setRowTop(i.value);e.setRowIndex(t.length-1);i.value+=e.rowHeight};e.prototype.ensureFooterNodeExists=function(e){if(s.Utils.exists(e.sibling)){return}var t=new a.RowNode;this.context.wireBean(t);Object.keys(e).forEach((function(i){t[i]=e[i]}));t.footer=true;t.rowTop=null;t.oldRowTop=null;if(s.Utils.exists(t.id)){t.id="rowGroupFooter_"+t.id}t.sibling=e;e.sibling=t};e.prototype.createDetailNode=function(e){if(s.Utils.exists(e.detailNode)){return e.detailNode}else{var t=new a.RowNode;this.context.wireBean(t);t.detail=true;t.flower=t.detail;t.parent=e;if(s.Utils.exists(e.id)){t.id="detail_"+e.id}t.data=e.data;t.level=e.level+1;e.detailNode=t;e.childFlower=e.detailNode;return t}};n([o.Autowired("gridOptionsWrapper"),r("design:type",l.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([o.Autowired("selectionController"),r("design:type",u.SelectionController)],e.prototype,"selectionController",void 0);n([o.Autowired("eventService"),r("design:type",c.EventService)],e.prototype,"eventService",void 0);n([o.Autowired("context"),r("design:type",o.Context)],e.prototype,"context",void 0);n([o.Autowired("columnController"),r("design:type",d.ColumnController)],e.prototype,"columnController",void 0);e=n([o.Bean("flattenStage")],e);return e}();t.FlattenStage=f},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(1);var s=i(2);var l=i(0);var u=i(3);var c=i(17);var d=i(5);var f=i(24);var p=i(18);var h=i(9);var g=i(136);var m=i(13);var v=i(87);var y=i(115);var b=i(6);var _=i(7);var w=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.getRowBounds=function(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}};t.prototype.init=function(){var e=this;if(!this.gridOptionsWrapper.isRowModelInfinite()){return}this.rowHeight=this.gridOptionsWrapper.getRowHeightAsNumber();this.addEventListeners();this.setDatasource(this.gridOptionsWrapper.getDatasource());this.addDestroyFunc((function(){return e.destroyCache()}))};t.prototype.destroyDatasource=function(){if(this.datasource&&this.datasource.destroy){this.datasource.destroy()}this.datasource=null};t.prototype.isLastRowFound=function(){return this.infiniteCache?this.infiniteCache.isMaxRowFound():false};t.prototype.addEventListeners=function(){this.addDestroyableEventListener(this.eventService,d.Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this));this.addDestroyableEventListener(this.eventService,d.Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this));this.addDestroyableEventListener(this.eventService,d.Events.EVENT_COLUMN_EVERYTHING_CHANGED,this.onColumnEverything.bind(this))};t.prototype.onFilterChanged=function(){if(this.gridOptionsWrapper.isEnableServerSideFilter()){this.reset()}};t.prototype.onSortChanged=function(){if(this.gridOptionsWrapper.isEnableServerSideSorting()){this.reset()}};t.prototype.onColumnEverything=function(){if(this.gridOptionsWrapper.isEnableServerSideSorting()){this.reset()}};t.prototype.destroy=function(){e.prototype.destroy.call(this)};t.prototype.getType=function(){return h.Constants.ROW_MODEL_TYPE_INFINITE};t.prototype.setDatasource=function(e){this.destroyDatasource();this.datasource=e;if(e){this.checkForDeprecated();this.reset()}};t.prototype.checkForDeprecated=function(){var e=this.datasource;if(a.Utils.exists(e.maxConcurrentRequests)){console.error("ag-Grid: since version 5.1.x, maxConcurrentRequests is replaced with grid property maxConcurrentDatasourceRequests")}if(a.Utils.exists(e.maxPagesInCache)){console.error("ag-Grid: since version 5.1.x, maxPagesInCache is replaced with grid property maxPagesInPaginationCache")}if(a.Utils.exists(e.overflowSize)){console.error("ag-Grid: since version 5.1.x, overflowSize is replaced with grid property paginationOverflowSize")}if(a.Utils.exists(e.blockSize)){console.error("ag-Grid: since version 5.1.x, pageSize/blockSize is replaced with grid property infinitePageSize")}};t.prototype.isEmpty=function(){return a.Utils.missing(this.infiniteCache)};t.prototype.isRowsToRender=function(){return a.Utils.exists(this.infiniteCache)};t.prototype.getNodesInRangeForSelection=function(e,t){return this.infiniteCache.getRowNodesInRange(e,t)};t.prototype.reset=function(){if(a.Utils.missing(this.datasource)){return}var e=a.Utils.exists(this.gridOptionsWrapper.getRowNodeIdFunc());if(!e){this.selectionController.reset()}this.resetCache();var t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)};t.prototype.createModelUpdatedEvent=function(){return{type:d.Events.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,newPage:false,newData:false,keepRenderedRows:false,animate:false}};t.prototype.resetCache=function(){this.destroyCache();var e=this.gridOptionsWrapper.getMaxConcurrentDatasourceRequests();this.rowNodeBlockLoader=new y.RowNodeBlockLoader(e);this.context.wireBean(this.rowNodeBlockLoader);var t={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,maxConcurrentRequests:e,overflowSize:this.gridOptionsWrapper.getCacheOverflowSize(),initialRowCount:this.gridOptionsWrapper.getInfiniteInitialRowCount(),maxBlocksInCache:this.gridOptionsWrapper.getMaxBlocksInCache(),blockSize:this.gridOptionsWrapper.getCacheBlockSize(),rowHeight:this.gridOptionsWrapper.getRowHeightAsNumber(),lastAccessedSequence:new a.NumberSequence};if(!(t.maxConcurrentRequests>=1)){t.maxConcurrentRequests=2}if(!(t.blockSize>=1)){t.blockSize=100}if(!(t.initialRowCount>=1)){t.initialRowCount=0}if(!(t.overflowSize>=1)){t.overflowSize=1}this.infiniteCache=new g.InfiniteCache(t);this.context.wireBean(this.infiniteCache);this.infiniteCache.addEventListener(v.RowNodeCache.EVENT_CACHE_UPDATED,this.onCacheUpdated.bind(this))};t.prototype.destroyCache=function(){if(this.infiniteCache){this.infiniteCache.destroy();this.infiniteCache=null}if(this.rowNodeBlockLoader){this.rowNodeBlockLoader.destroy();this.rowNodeBlockLoader=null}};t.prototype.onCacheUpdated=function(){var e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)};t.prototype.getRow=function(e){return this.infiniteCache?this.infiniteCache.getRow(e):null};t.prototype.getRowNode=function(e){var t=null;this.forEachNode((function(i){if(i.id===e){t=i}}));return t};t.prototype.forEachNode=function(e){if(this.infiniteCache){this.infiniteCache.forEachNodeDeep(e,new a.NumberSequence)}};t.prototype.getCurrentPageHeight=function(){return this.getRowCount()*this.rowHeight};t.prototype.getRowIndexAtPixel=function(e){if(this.rowHeight!==0){var t=Math.floor(e/this.rowHeight);if(t>this.getPageLastRow()){return this.getPageLastRow()}else{return t}}else{return 0}};t.prototype.getPageFirstRow=function(){return 0};t.prototype.getPageLastRow=function(){return this.infiniteCache?this.infiniteCache.getVirtualRowCount()-1:0};t.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getVirtualRowCount():0};t.prototype.updateRowData=function(e){if(a.Utils.exists(e.remove)||a.Utils.exists(e.update)){console.warn("ag-Grid: updateRowData for InfiniteRowModel does not support remove or update, only add");return}if(a.Utils.missing(e.addIndex)){console.warn("ag-Grid: updateRowData for InfiniteRowModel requires add and addIndex to be set");return}if(this.infiniteCache){this.infiniteCache.insertItemsAtIndex(e.addIndex,e.add)}};t.prototype.isRowPresent=function(e){return false};t.prototype.refreshCache=function(){if(this.infiniteCache){this.infiniteCache.refreshCache()}};t.prototype.purgeCache=function(){if(this.infiniteCache){this.infiniteCache.purgeCache()}};t.prototype.getVirtualRowCount=function(){if(this.infiniteCache){return this.infiniteCache.getVirtualRowCount()}else{return null}};t.prototype.isMaxRowFound=function(){if(this.infiniteCache){return this.infiniteCache.isMaxRowFound()}};t.prototype.setVirtualRowCount=function(e,t){if(this.infiniteCache){this.infiniteCache.setVirtualRowCount(e,t)}};t.prototype.getBlockState=function(){if(this.rowNodeBlockLoader){return this.rowNodeBlockLoader.getBlockState()}else{return null}};r([l.Autowired("gridOptionsWrapper"),o("design:type",s.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([l.Autowired("filterManager"),o("design:type",p.FilterManager)],t.prototype,"filterManager",void 0);r([l.Autowired("sortController"),o("design:type",f.SortController)],t.prototype,"sortController",void 0);r([l.Autowired("selectionController"),o("design:type",c.SelectionController)],t.prototype,"selectionController",void 0);r([l.Autowired("eventService"),o("design:type",u.EventService)],t.prototype,"eventService",void 0);r([l.Autowired("context"),o("design:type",l.Context)],t.prototype,"context",void 0);r([l.Autowired("gridApi"),o("design:type",b.GridApi)],t.prototype,"gridApi",void 0);r([l.Autowired("columnApi"),o("design:type",_.ColumnApi)],t.prototype,"columnApi",void 0);r([l.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"init",null);r([l.PreDestroy,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"destroyDatasource",null);r([l.PreDestroy,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"destroy",null);t=r([l.Bean("rowModel")],t);return t}(m.BeanStub);t.InfiniteRowModel=w},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var o=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:true});var a=i(61);var s=i(12);var l=i(0);var u=i(1);var c=function(){function e(e){this.activeBlockLoadsCount=0;this.blocks=[];this.active=true;this.maxConcurrentRequests=e}e.prototype.setBeans=function(e){this.logger=e.create("RowNodeBlockLoader")};e.prototype.addBlock=function(e){this.blocks.push(e)};e.prototype.removeBlock=function(e){u._.removeFromArray(this.blocks,e)};e.prototype.destroy=function(){this.active=false};e.prototype.loadComplete=function(){this.activeBlockLoadsCount--};e.prototype.checkBlockToLoad=function(){if(!this.active){return}this.printCacheStatus();if(this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.logger.log("checkBlockToLoad: max loads exceeded");return}var e=null;this.blocks.forEach((function(t){if(t.getState()===a.RowNodeBlock.STATE_DIRTY){e=t}}));if(e){e.load();this.activeBlockLoadsCount++;this.logger.log("checkBlockToLoad: loading page "+e.getBlockNumber());this.printCacheStatus()}else{this.logger.log("checkBlockToLoad: no pages to load")}};e.prototype.getBlockState=function(){var e={};this.blocks.forEach((function(t){var i=t.getNodeIdPrefix();var n={blockNumber:t.getBlockNumber(),startRow:t.getStartRow(),endRow:t.getEndRow(),pageStatus:t.getState()};if(u._.exists(i)){e[i+t.getBlockNumber()]=n}else{e[t.getBlockNumber()]=n}}));return e};e.prototype.printCacheStatus=function(){if(this.logger.isLogging()){this.logger.log("printCacheStatus: activePageLoadsCount = "+this.activeBlockLoadsCount+","+(" blocks = "+JSON.stringify(this.getBlockState())))}};n([o(0,l.Qualifier("loggerFactory")),r("design:type",Function),r("design:paramtypes",[s.LoggerFactory]),r("design:returntype",void 0)],e.prototype,"setBeans",null);return e}();t.RowNodeBlockLoader=c},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(1);var a=i(9);var s=i(2);var l=i(7);var u=i(4);var c=i(18);var d=i(14);var f=i(3);var p=i(5);var h=i(0);var g=i(17);var m=i(88);var v=i(89);var y=i(16);var b=i(33);var _=i(6);var w;(function(e){e[e["Normal"]=0]="Normal";e[e["AfterFilter"]=1]="AfterFilter";e[e["AfterFilterAndSort"]=2]="AfterFilterAndSort";e[e["PivotNodes"]=3]="PivotNodes"})(w||(w={}));var C=function(){function e(){}e.prototype.init=function(){var e=this.refreshModel.bind(this,{step:a.Constants.STEP_EVERYTHING});this.eventService.addModalPriorityEventListener(p.Events.EVENT_COLUMN_EVERYTHING_CHANGED,e);this.eventService.addModalPriorityEventListener(p.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,e);this.eventService.addModalPriorityEventListener(p.Events.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this));this.eventService.addModalPriorityEventListener(p.Events.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:a.Constants.STEP_PIVOT}));this.eventService.addModalPriorityEventListener(p.Events.EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this));this.eventService.addModalPriorityEventListener(p.Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this));this.eventService.addModalPriorityEventListener(p.Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this));this.eventService.addModalPriorityEventListener(p.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,e);var t=this.refreshModel.bind(this,{step:a.Constants.STEP_MAP,keepRenderedRows:true,animate:true});this.gridOptionsWrapper.addEventListener(s.GridOptionsWrapper.PROP_GROUP_REMOVE_SINGLE_CHILDREN,t);this.gridOptionsWrapper.addEventListener(s.GridOptionsWrapper.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN,t);this.rootNode=new d.RowNode;this.nodeManager=new m.ClientSideNodeManager(this.rootNode,this.gridOptionsWrapper,this.context,this.eventService,this.columnController);this.context.wireBean(this.rootNode)};e.prototype.ensureRowAtPixel=function(e,t){var i=this.getRowIndexAtPixel(t);var n=this.getRow(i);if(n===e){return false}o.Utils.removeFromArray(this.rootNode.allLeafChildren,e);o.Utils.insertIntoArray(this.rootNode.allLeafChildren,e,i);this.refreshModel({step:a.Constants.STEP_EVERYTHING,keepRenderedRows:true,animate:true,keepEditingRows:true});return true};e.prototype.isLastRowFound=function(){return true};e.prototype.getRowCount=function(){if(this.rowsToDisplay){return this.rowsToDisplay.length}else{return 0}};e.prototype.getRowBounds=function(e){if(o.Utils.missing(this.rowsToDisplay)){return null}var t=this.rowsToDisplay[e];if(t){return{rowTop:t.rowTop,rowHeight:t.rowHeight}}else{return null}};e.prototype.onRowGroupOpened=function(){var e=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:a.Constants.STEP_MAP,keepRenderedRows:true,animate:e})};e.prototype.onFilterChanged=function(){var e=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:a.Constants.STEP_FILTER,keepRenderedRows:true,animate:e})};e.prototype.onSortChanged=function(){if(this.gridOptionsWrapper.isEnableServerSideSorting()){return}var e=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:a.Constants.STEP_SORT,keepRenderedRows:true,animate:e,keepEditingRows:true})};e.prototype.getType=function(){return a.Constants.ROW_MODEL_TYPE_CLIENT_SIDE};e.prototype.onValueChanged=function(){if(this.columnController.isPivotActive()){this.refreshModel({step:a.Constants.STEP_PIVOT})}else{this.refreshModel({step:a.Constants.STEP_AGGREGATE})}};e.prototype.createChangePath=function(e){var t=this.columnController.getValueColumns();var i=o.Utils.missingOrEmpty(t);var n=o.Utils.missingOrEmpty(e);var r=new v.ChangedPath(false);if(i||n){r.setInactive()}return r};e.prototype.refreshModel=function(e){var t=this;var i=this.createChangePath(e.rowNodeTransactions);switch(e.step){case a.Constants.STEP_EVERYTHING:this.doRowGrouping(e.groupState,e.rowNodeTransactions,e.rowNodeOrder,i);case a.Constants.STEP_FILTER:this.doFilter();case a.Constants.STEP_PIVOT:this.doPivot(i);case a.Constants.STEP_AGGREGATE:this.doAggregate(i);case a.Constants.STEP_SORT:this.doSort();case a.Constants.STEP_MAP:this.doRowsToDisplay()}var n={type:p.Events.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:false};this.eventService.dispatchEvent(n);if(this.$scope){setTimeout((function(){t.$scope.$apply()}),0)}};e.prototype.isEmpty=function(){var e;var t=o.Utils.exists(this.gridOptionsWrapper.getNodeChildDetailsFunc());if(t){e=o.Utils.missing(this.rootNode.childrenAfterGroup)||this.rootNode.childrenAfterGroup.length===0}else{e=o.Utils.missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0}var i=o.Utils.missing(this.rootNode)||e||!this.columnController.isReady();return i};e.prototype.isRowsToRender=function(){return o.Utils.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0};e.prototype.getNodesInRangeForSelection=function(e,t){var i=!t;var n=false;var r;var o=[];var a=this.gridOptionsWrapper.isGroupSelectsChildren();this.forEachNodeAfterFilterAndSort((function(s){var l=i&&!n;if(!i){if(s===t||s===e){i=true}}var u=s.group&&a;if(!u){var c=i&&!n;var d=s.isParentOfNode(r);if(c||d){o.push(s)}}if(l){if(s===t||s===e){n=true;if(s===t){r=t}else{r=e}}}}));return o};e.prototype.setDatasource=function(e){console.error("ag-Grid: should never call setDatasource on clientSideRowController")};e.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null};e.prototype.getRootNode=function(){return this.rootNode};e.prototype.getRow=function(e){return this.rowsToDisplay[e]};e.prototype.isRowPresent=function(e){return this.rowsToDisplay.indexOf(e)>=0};e.prototype.getVirtualRowCount=function(){console.warn("ag-Grid: rowModel.getVirtualRowCount() is not longer a function, use rowModel.getRowCount() instead");return this.getPageLastRow()};e.prototype.getPageFirstRow=function(){return 0};e.prototype.getPageLastRow=function(){if(this.rowsToDisplay){return this.rowsToDisplay.length-1}else{return 0}};e.prototype.getRowIndexAtPixel=function(e){if(this.isEmpty()){return-1}var t=0;var i=this.rowsToDisplay.length-1;if(e<=0){return 0}var n=this.rowsToDisplay[this.rowsToDisplay.length-1];if(n.rowTop<=e){return this.rowsToDisplay.length-1}while(true){var r=Math.floor((t+i)/2);var o=this.rowsToDisplay[r];if(this.isRowInPixel(o,e)){return r}else if(o.rowTop<e){t=r+1}else if(o.rowTop>e){i=r-1}}};e.prototype.isRowInPixel=function(e,t){var i=e.rowTop;var n=e.rowTop+e.rowHeight;var r=i<=t&&n>t;return r};e.prototype.getCurrentPageHeight=function(){if(this.rowsToDisplay&&this.rowsToDisplay.length>0){var e=this.rowsToDisplay[this.rowsToDisplay.length-1];var t=e.rowTop+e.rowHeight;return t}else{return 0}};e.prototype.forEachLeafNode=function(e){if(this.rootNode.allLeafChildren){this.rootNode.allLeafChildren.forEach((function(t,i){return e(t,i)}))}};e.prototype.forEachNode=function(e){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterGroup,e,w.Normal,0)};e.prototype.forEachNodeAfterFilter=function(e){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterFilter,e,w.AfterFilter,0)};e.prototype.forEachNodeAfterFilterAndSort=function(e){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterSort,e,w.AfterFilterAndSort,0)};e.prototype.forEachPivotNode=function(e){this.recursivelyWalkNodesAndCallback([this.rootNode],e,w.PivotNodes,0)};e.prototype.recursivelyWalkNodesAndCallback=function(e,t,i,n){if(e){for(var r=0;r<e.length;r++){var o=e[r];t(o,n++);if(o.hasChildren()){var a=void 0;switch(i){case w.Normal:a=o.childrenAfterGroup;break;case w.AfterFilter:a=o.childrenAfterFilter;break;case w.AfterFilterAndSort:a=o.childrenAfterSort;break;case w.PivotNodes:a=!o.leafGroup?o.childrenAfterSort:null;break}if(a){n=this.recursivelyWalkNodesAndCallback(a,t,i,n)}}}}return n};e.prototype.doAggregate=function(e){if(this.aggregationStage){this.aggregationStage.execute({rowNode:this.rootNode,changedPath:e})}};e.prototype.expandOrCollapseAll=function(e){var t=this.gridOptionsWrapper.isTreeData();if(this.rootNode){i(this.rootNode.childrenAfterGroup)}function i(n){if(!n){return}n.forEach((function(n){var r=t?o.Utils.exists(n.childrenAfterGroup):n.group;if(r){n.expanded=e;i(n.childrenAfterGroup)}}))}this.refreshModel({step:a.Constants.STEP_MAP})};e.prototype.doSort=function(){this.sortStage.execute({rowNode:this.rootNode})};e.prototype.doRowGrouping=function(e,t,i,n){var r=this;var a=o.Utils.exists(this.gridOptionsWrapper.getNodeChildDetailsFunc());if(a){return}if(this.groupStage){if(o.Utils.exists(t)){t.forEach((function(e){r.groupStage.execute({rowNode:r.rootNode,rowNodeTransaction:e,rowNodeOrder:i,changedPath:n})}))}else{this.selectionController.removeGroupsFromSelection();this.groupStage.execute({rowNode:this.rootNode,changedPath:n});this.restoreGroupState(e)}if(this.gridOptionsWrapper.isGroupSelectsChildren()){this.selectionController.updateGroupsFromChildrenSelections()}}else{this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren}};e.prototype.restoreGroupState=function(e){if(!e){return}o.Utils.traverseNodesWithKey(this.rootNode.childrenAfterGroup,(function(t,i){if(typeof e[i]==="boolean"){t.expanded=e[i]}}))};e.prototype.doFilter=function(){this.filterStage.execute({rowNode:this.rootNode})};e.prototype.doPivot=function(e){if(this.pivotStage){this.pivotStage.execute({rowNode:this.rootNode,changedPath:e})}};e.prototype.getGroupState=function(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsWrapper.isRememberGroupStateWhenNewData()){return null}var e={};o.Utils.traverseNodesWithKey(this.rootNode.childrenAfterGroup,(function(t,i){return e[i]=t.expanded}));return e};e.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()};e.prototype.getRowNode=function(e){return this.nodeManager.getRowNode(e)};e.prototype.setRowData=function(e){var t=this.getGroupState();this.nodeManager.setRowData(e);var i={type:p.Events.EVENT_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(i);this.refreshModel({step:a.Constants.STEP_EVERYTHING,groupState:t,newData:true})};e.prototype.batchUpdateRowData=function(e,t){var i=this;if(!this.rowDataTransactionBatch){this.rowDataTransactionBatch=[];var n=this.gridOptionsWrapper.getBatchUpdateWaitMillis();setTimeout((function(){i.executeBatchUpdateRowData();i.rowDataTransactionBatch=null}),n)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})};e.prototype.executeBatchUpdateRowData=function(){var e=this;this.valueCache.onDataChanged();var t=[];var i=[];this.rowDataTransactionBatch.forEach((function(n){var r=e.nodeManager.updateRowData(n.rowDataTransaction,null);i.push(r);if(n.callback){t.push(n.callback.bind(r))}}));this.commonUpdateRowData(i);if(t.length>0){setTimeout((function(){t.forEach((function(e){return e()}))}),0)}};e.prototype.updateRowData=function(e,t){this.valueCache.onDataChanged();var i=this.nodeManager.updateRowData(e,t);this.commonUpdateRowData([i],t);return i};e.prototype.commonUpdateRowData=function(e,t){this.refreshModel({step:a.Constants.STEP_EVERYTHING,rowNodeTransactions:e,rowNodeOrder:t,keepRenderedRows:true,animate:true,keepEditingRows:true});var i={type:p.Events.EVENT_ROW_DATA_UPDATED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(i)};e.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})};e.prototype.onRowHeightChanged=function(){this.refreshModel({step:a.Constants.STEP_MAP,keepRenderedRows:true,keepEditingRows:true})};e.prototype.resetRowHeights=function(){this.forEachNode((function(e){return e.setRowHeight(null)}));this.onRowHeightChanged()};n([h.Autowired("gridOptionsWrapper"),r("design:type",s.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([h.Autowired("columnController"),r("design:type",u.ColumnController)],e.prototype,"columnController",void 0);n([h.Autowired("filterManager"),r("design:type",c.FilterManager)],e.prototype,"filterManager",void 0);n([h.Autowired("$scope"),r("design:type",Object)],e.prototype,"$scope",void 0);n([h.Autowired("selectionController"),r("design:type",g.SelectionController)],e.prototype,"selectionController",void 0);n([h.Autowired("eventService"),r("design:type",f.EventService)],e.prototype,"eventService",void 0);n([h.Autowired("context"),r("design:type",h.Context)],e.prototype,"context",void 0);n([h.Autowired("valueService"),r("design:type",y.ValueService)],e.prototype,"valueService",void 0);n([h.Autowired("valueCache"),r("design:type",b.ValueCache)],e.prototype,"valueCache",void 0);n([h.Autowired("columnApi"),r("design:type",l.ColumnApi)],e.prototype,"columnApi",void 0);n([h.Autowired("gridApi"),r("design:type",_.GridApi)],e.prototype,"gridApi",void 0);n([h.Autowired("filterStage"),r("design:type",Object)],e.prototype,"filterStage",void 0);n([h.Autowired("sortStage"),r("design:type",Object)],e.prototype,"sortStage",void 0);n([h.Autowired("flattenStage"),r("design:type",Object)],e.prototype,"flattenStage",void 0);n([h.Optional("groupStage"),r("design:type",Object)],e.prototype,"groupStage",void 0);n([h.Optional("aggregationStage"),r("design:type",Object)],e.prototype,"aggregationStage",void 0);n([h.Optional("pivotStage"),r("design:type",Object)],e.prototype,"pivotStage",void 0);n([h.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"init",null);e=n([h.Bean("rowModel")],e);return e}();t.ClientSideRowModel=C},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(){}e.prototype.dateComponent=function(e){return e.dateComponent};e.prototype.colDefFloatingCellRenderer=function(e){return e.pinnedRowCellRenderer};e.prototype.colDefCellRenderer=function(e){return e.cellRenderer};e.prototype.colDefCellEditor=function(e){return e.cellEditor};e.prototype.colDefFilter=function(e){return e.filter};e.prototype.gridOptionsFullWidthCellRenderer=function(e){return e.fullWidthCellRenderer};e.prototype.gridOptionsGroupRowRenderer=function(e){return e.groupRowRenderer};e.prototype.gridOptionsGroupRowInnerRenderer=function(e){return e.groupRowInnerRenderer};e.prototype.setTimeout=function(e,t){setTimeout(e,t)};return e}();t.BaseFrameworkFactory=n},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};Object.defineProperty(t,"__esModule",{value:true});var r=i(0);var o="\r\n";var a=function(){function e(){}e.prototype.createXml=function(e,t){var i=this;var n="";if(e.properties){if(e.properties.prefixedAttributes){e.properties.prefixedAttributes.forEach((function(e){Object.keys(e.map).forEach((function(r){n+=i.returnAttributeIfPopulated(e.prefix+r,e.map[r],t)}))}))}if(e.properties.rawMap){Object.keys(e.properties.rawMap).forEach((function(r){n+=i.returnAttributeIfPopulated(r,e.properties.rawMap[r],t)}))}}var r="<"+e.name+n;if(!e.children&&e.textNode==null){return r+"/>"+o}if(e.textNode!=null){return r+">"+e.textNode+"</"+e.name+">"+o}r+=">"+o;e.children.forEach((function(e){r+=i.createXml(e,t)}));return r+"</"+e.name+">"+o};e.prototype.returnAttributeIfPopulated=function(e,t,i){if(!t){return""}var n=t;if(typeof t==="boolean"){if(i){n=i(t)}}n='"'+n+'"';return" "+e+"="+n};e=n([r.Bean("xmlFactory")],e);return e}();t.XmlFactory=a},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:true});var n=typeof e==="undefined"?{}:e;n.HTMLElement=typeof HTMLElement==="undefined"?{}:HTMLElement;n.HTMLButtonElement=typeof HTMLButtonElement==="undefined"?{}:HTMLButtonElement;n.HTMLSelectElement=typeof HTMLSelectElement==="undefined"?{}:HTMLSelectElement;n.HTMLInputElement=typeof HTMLInputElement==="undefined"?{}:HTMLInputElement;n.Node=typeof Node==="undefined"?{}:Node;n.MouseEvent=typeof MouseEvent==="undefined"?{}:MouseEvent;var r=i(38);t.BalancedColumnTreeBuilder=r.BalancedColumnTreeBuilder;var o=i(4);t.ColumnController=o.ColumnController;var a=i(107);t.ColumnKeyCreator=a.ColumnKeyCreator;var s=i(31);t.ColumnUtils=s.ColumnUtils;var l=i(48);t.DisplayedGroupCreator=l.DisplayedGroupCreator;var u=i(83);t.GroupInstanceIdCreator=u.GroupInstanceIdCreator;var c=i(62);t.ComponentUtil=c.ComponentUtil;var d=i(106);t.ColDefUtil=d.ColDefUtil;var f=i(66);t.ComponentProvider=f.ComponentProvider;var p=i(135);t.initialiseAgGridWithAngular1=p.initialiseAgGridWithAngular1;var h=i(141);t.initialiseAgGridWithWebComponents=h.initialiseAgGridWithWebComponents;var g=i(13);t.BeanStub=g.BeanStub;var m=i(0);t.Context=m.Context;t.Autowired=m.Autowired;t.PostConstruct=m.PostConstruct;t.PreConstruct=m.PreConstruct;t.Optional=m.Optional;t.Bean=m.Bean;t.Qualifier=m.Qualifier;t.PreDestroy=m.PreDestroy;var v=i(11);t.QuerySelector=v.QuerySelector;t.Listener=v.Listener;t.RefSelector=v.RefSelector;var y=i(15);t.DragAndDropService=y.DragAndDropService;t.DragSourceType=y.DragSourceType;t.HDirection=y.HDirection;t.VDirection=y.VDirection;var b=i(40);t.DragService=b.DragService;var _=i(10);t.Column=_.Column;var w=i(26);t.ColumnGroup=w.ColumnGroup;var C=i(23);t.GridCell=C.GridCell;var A=i(64);t.GridRow=A.GridRow;var E=i(32);t.OriginalColumnGroup=E.OriginalColumnGroup;var x=i(14);t.RowNode=x.RowNode;var T=i(51);t.BaseFilter=T.BaseFilter;var S=i(68);t.DateFilter=S.DateFilter;var D=i(18);t.FilterManager=D.FilterManager;var k=i(96);t.NumberFilter=k.NumberFilter;var O=i(95);t.TextFilter=O.TextFilter;var R=i(78);t.GridPanel=R.GridPanel;var N=i(36);t.ScrollVisibleService=N.ScrollVisibleService;var P=i(44);t.MouseEventService=P.MouseEventService;var I=i(103);t.BodyDropPivotTarget=I.BodyDropPivotTarget;var M=i(101);t.BodyDropTarget=M.BodyDropTarget;var L=i(81);t.CssClassApplier=L.CssClassApplier;var F=i(98);t.HeaderContainer=F.HeaderContainer;var G=i(80);t.HeaderRootComp=G.HeaderRootComp;var $=i(99);t.HeaderRowComp=$.HeaderRowComp;var W=i(59);t.HorizontalResizeService=W.HorizontalResizeService;var H=i(102);t.MoveColumnController=H.MoveColumnController;var j=i(108);t.StandardMenuFactory=j.StandardMenuFactory;var B=i(142);t.TabbedLayout=B.TabbedLayout;var V=i(143);t.VerticalStack=V.VerticalStack;var z=i(144);t.simpleHttpRequest=z.simpleHttpRequest;var U=i(94);t.LargeTextCellEditor=U.LargeTextCellEditor;var Y=i(69);t.PopupEditorWrapper=Y.PopupEditorWrapper;var q=i(93);t.PopupSelectCellEditor=q.PopupSelectCellEditor;var X=i(92);t.PopupTextCellEditor=X.PopupTextCellEditor;var K=i(75);t.SelectCellEditor=K.SelectCellEditor;var Q=i(67);t.TextCellEditor=Q.TextCellEditor;var Z=i(71);t.AnimateShowChangeCellRenderer=Z.AnimateShowChangeCellRenderer;var J=i(70);t.AnimateSlideCellRenderer=J.AnimateSlideCellRenderer;var ee=i(72);t.GroupCellRenderer=ee.GroupCellRenderer;var te=i(52);t.SetLeftFeature=te.SetLeftFeature;var ie=i(39);t.AutoWidthCalculator=ie.AutoWidthCalculator;var ne=i(54);t.CellEditorFactory=ne.CellEditorFactory;var re=i(55);t.CellRendererFactory=re.CellRendererFactory;var oe=i(56);t.CellRendererService=oe.CellRendererService;var ae=i(65);t.CheckboxSelectionComponent=ae.CheckboxSelectionComponent;var se=i(34);t.CellComp=se.CellComp;var le=i(50);t.RowComp=le.RowComp;var ue=i(20);t.RowRenderer=ue.RowRenderer;var ce=i(43);t.ValueFormatterService=ce.ValueFormatterService;var de=i(109);t.FilterStage=de.FilterStage;var fe=i(113);t.FlattenStage=fe.FlattenStage;var pe=i(111);t.SortStage=pe.SortStage;var he=i(30);t.PinnedRowModel=he.PinnedRowModel;var ge=i(116);t.ClientSideRowModel=ge.ClientSideRowModel;var me=i(89);t.ChangedPath=me.ChangedPath;var ve=i(88);t.ClientSideNodeManager=ve.ClientSideNodeManager;var ye=i(114);t.InfiniteRowModel=ye.InfiniteRowModel;var be=i(61);t.RowNodeBlock=be.RowNodeBlock;var _e=i(115);t.RowNodeBlockLoader=_e.RowNodeBlockLoader;var we=i(87);t.RowNodeCache=we.RowNodeCache;var Ce=i(73);t.StylingService=Ce.StylingService;var Ae=i(60);t.AgCheckbox=Ae.AgCheckbox;var Ee=i(8);t.Component=Ee.Component;var xe=i(35);t.PopupService=xe.PopupService;var Te=i(46);t.TouchListener=Te.TouchListener;var Se=i(117);t.BaseFrameworkFactory=Se.BaseFrameworkFactory;var De=i(82);t.CellNavigationService=De.CellNavigationService;var ke=i(58);t.AlignedGridsService=ke.AlignedGridsService;var Oe=i(9);t.Constants=Oe.Constants;var Re=i(47);t.CsvCreator=Re.CsvCreator;t.BaseCreator=Re.BaseCreator;var Ne=i(84);t.Downloader=Ne.Downloader;var Pe=i(85);t.Grid=Pe.Grid;var Ie=i(6);t.GridApi=Ie.GridApi;var Me=i(25);t.Events=Me.Events;var Le=i(22);t.FocusedCellController=Le.FocusedCellController;var Fe=i(145);t.defaultGroupComparator=Fe.defaultGroupComparator;var Ge=i(2);t.GridOptionsWrapper=Ge.GridOptionsWrapper;var $e=i(3);t.EventService=$e.EventService;var We=i(86);t.SelectableService=We.SelectableService;var He=i(42);t.GridCore=He.GridCore;var je=i(12);t.Logger=je.Logger;var Be=i(17);t.SelectionController=Be.SelectionController;var Ve=i(24);t.SortController=Ve.SortController;var ze=i(49);t.TemplateService=ze.TemplateService;var Ue=i(1);t.Utils=Ue.Utils;t.NumberSequence=Ue.NumberSequence;t._=Ue._;t.Promise=Ue.Promise;var Ye=i(16);t.ValueService=Ye.ValueService;var qe=i(19);t.ExpressionService=qe.ExpressionService;var Xe=i(118);t.XmlFactory=Xe.XmlFactory;var Ke=i(63);t.GridSerializer=Ke.GridSerializer;t.BaseGridSerializingSession=Ke.BaseGridSerializingSession;t.RowType=Ke.RowType;var Qe=i(12);t.LoggerFactory=Qe.LoggerFactory;var Ze=i(7);t.ColumnApi=Ze.ColumnApi;var Je=i(146);t.BaseComponentWrapper=Je.BaseComponentWrapper;var et=i(41);t.Environment=et.Environment}).call(t,i(120))},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(1,eval)("this")}catch(e){if(typeof window==="object")i=window}e.exports=i},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(8);var s=i(0);var l=i(14);var u=i(15);var c=i(25);var d=i(1);var f=i(13);var p=function(e){n(t,e);function t(t,i,n,r){var o=e.call(this,'<span class="ag-row-drag"></span>')||this;o.rowNode=t;o.column=i;o.cellValue=n;o.beans=r;return o}t.prototype.postConstruct=function(){this.addDragSource();this.checkCompatibility();if(this.beans.gridOptionsWrapper.isRowDragManaged()){this.addFeature(this.beans.context,new g(this,this.beans,this.rowNode,this.column))}else{this.addFeature(this.beans.context,new h(this,this.beans,this.rowNode,this.column))}};t.prototype.checkCompatibility=function(){var e=this.beans.gridOptionsWrapper.isRowDragManaged();var t=this.beans.gridOptionsWrapper.isTreeData();if(t&&e){d._.doOnce((function(){return console.warn("ag-Grid: If using row drag with tree data, you cannot have rowDragManaged=true")}),"RowDragComp.managedAndTreeData")}};t.prototype.addDragSource=function(){var e=this;var t={rowNode:this.rowNode};var i={type:u.DragSourceType.RowDrag,eElement:this.getGui(),dragItemName:this.cellValue,dragItemCallback:function(){return t},dragStartPixels:0};this.beans.dragAndDropService.addDragSource(i,true);this.addDestroyFunc((function(){return e.beans.dragAndDropService.removeDragSource(i)}))};r([s.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"postConstruct",null);return t}(a.Component);t.RowDragComp=p;var h=function(e){n(t,e);function t(t,i,n,r){var o=e.call(this)||this;o.parent=t;o.beans=i;o.column=r;o.rowNode=n;return o}t.prototype.postConstruct=function(){this.addDestroyableEventListener(this.beans.gridOptionsWrapper,"suppressRowDrag",this.onSuppressRowDrag.bind(this));this.addDestroyableEventListener(this.rowNode,l.RowNode.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this));this.addDestroyableEventListener(this.rowNode,l.RowNode.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this));this.workOutVisibility()};t.prototype.onSuppressRowDrag=function(){this.workOutVisibility()};t.prototype.workOutVisibility=function(){var e=this.beans.gridOptionsWrapper.isSuppressRowDrag();if(e){this.parent.setVisible(false)}else{var t=this.column.isRowDrag(this.rowNode);this.parent.setVisible(t)}};r([s.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"postConstruct",null);return t}(f.BeanStub);var g=function(e){n(t,e);function t(t,i,n,r){var o=e.call(this)||this;o.parent=t;o.beans=i;o.column=r;o.rowNode=n;return o}t.prototype.postConstruct=function(){this.addDestroyableEventListener(this.beans.eventService,c.Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this));this.addDestroyableEventListener(this.beans.eventService,c.Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this));this.addDestroyableEventListener(this.beans.eventService,c.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this));this.addDestroyableEventListener(this.rowNode,l.RowNode.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this));this.addDestroyableEventListener(this.rowNode,l.RowNode.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this));this.addDestroyableEventListener(this.beans.gridOptionsWrapper,"suppressRowDrag",this.onSuppressRowDrag.bind(this));this.updateSortActive();this.updateFilterActive();this.updateRowGroupActive();this.workOutVisibility()};t.prototype.updateRowGroupActive=function(){var e=this.beans.columnController.getRowGroupColumns();this.rowGroupActive=!d._.missingOrEmpty(e)};t.prototype.onRowGroupChanged=function(){this.updateRowGroupActive();this.workOutVisibility()};t.prototype.updateSortActive=function(){var e=this.beans.sortController.getSortModel();this.sortActive=!d._.missingOrEmpty(e)};t.prototype.onSortChanged=function(){this.updateSortActive();this.workOutVisibility()};t.prototype.updateFilterActive=function(){this.filterActive=this.beans.filterManager.isAnyFilterPresent()};t.prototype.onFilterChanged=function(){this.updateFilterActive();this.workOutVisibility()};t.prototype.onSuppressRowDrag=function(){this.workOutVisibility()};t.prototype.workOutVisibility=function(){var e=this.sortActive||this.filterActive||this.rowGroupActive;var t=this.beans.gridOptionsWrapper.isSuppressRowDrag();var i=e||t;if(i){this.parent.setVisible(false)}else{var n=this.column.isRowDrag(this.rowNode);this.parent.setVisible(n)}};r([s.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"postConstruct",null);return t}(f.BeanStub)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(0);var s=i(10);var l=i(1);var u=i(52);var c=i(8);var d=i(11);var f=i(2);var p=i(28);var h=i(74);var g=i(5);var m=i(3);var v=i(45);var y=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.init=function(e){this.column=e.column;var t=l._.loadTemplate('<div class="ag-header-cell" aria-hidden="true"><div class="ag-floating-filter-body" aria-hidden="true"></div></div>');this.enrichBody(t);this.setTemplateFromElement(t);this.setupWidth();this.addColumnHoverListener();this.addFeature(this.context,new h.HoverFeature([this.column],this.getGui()));var i=new u.SetLeftFeature(this.column,this.getGui(),this.beans);i.init();this.addDestroyFunc(i.destroy.bind(i))};t.prototype.addColumnHoverListener=function(){this.addDestroyableEventListener(this.eventService,g.Events.EVENT_COLUMN_HOVER_CHANGED,this.onColumnHover.bind(this));this.onColumnHover()};t.prototype.onColumnHover=function(){var e=this.columnHoverService.isHovered(this.column);l._.addOrRemoveCssClass(this.getGui(),"ag-column-hover",e)};t.prototype.setupWidth=function(){this.addDestroyableEventListener(this.column,s.Column.EVENT_WIDTH_CHANGED,this.onColumnWidthChanged.bind(this));this.onColumnWidthChanged()};t.prototype.onColumnWidthChanged=function(){this.getGui().style.width=this.column.getActualWidth()+"px"};r([a.Autowired("context"),o("design:type",a.Context)],t.prototype,"context",void 0);r([a.Autowired("columnHoverService"),o("design:type",v.ColumnHoverService)],t.prototype,"columnHoverService",void 0);r([a.Autowired("eventService"),o("design:type",m.EventService)],t.prototype,"eventService",void 0);r([a.Autowired("beans"),o("design:type",p.Beans)],t.prototype,"beans",void 0);return t}(c.Component);t.BaseFilterWrapperComp=y;var b=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.init=function(t){this.floatingFilterCompPromise=t.floatingFilterComp;this.suppressFilterButton=t.suppressFilterButton;e.prototype.init.call(this,t);this.addEventListeners()};t.prototype.addEventListeners=function(){if(!this.suppressFilterButton&&this.eButtonShowMainFilter){this.addDestroyableEventListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this))}};t.prototype.enrichBody=function(e){var t=this;this.floatingFilterCompPromise.then((function(i){var n=e.querySelector(".ag-floating-filter-body");var r=i.getGui();if(t.suppressFilterButton){n.appendChild(r);l._.removeCssClass(n,"ag-floating-filter-body");l._.addCssClass(n,"ag-floating-filter-full-body")}else{n.appendChild(r);e.appendChild(l._.loadTemplate('<div class="ag-floating-filter-button" aria-hidden="true">\n                        <button type="button" ref="eButtonShowMainFilter"></button>\n                </div>'));var o=l._.createIconNoSpan("filter",t.gridOptionsWrapper,t.column);e.querySelector("button").appendChild(o)}if(i.afterGuiAttached){i.afterGuiAttached()}t.wireQuerySelectors();t.addEventListeners()}))};t.prototype.onParentModelChanged=function(e){var t=undefined;var i=null;if(e&&e.operator){t=e;i=t.condition1}else{i=e}this.floatingFilterCompPromise.then((function(e){e.onParentModelChanged(i,t)}))};t.prototype.showParentFilter=function(){this.menuFactory.showMenuAfterButtonClick(this.column,this.eButtonShowMainFilter,"filterMenuTab",["filterMenuTab"])};r([d.RefSelector("eButtonShowMainFilter"),o("design:type",HTMLInputElement)],t.prototype,"eButtonShowMainFilter",void 0);r([a.Autowired("menuFactory"),o("design:type",Object)],t.prototype,"menuFactory",void 0);r([a.Autowired("gridOptionsWrapper"),o("design:type",f.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);return t}(y);t.FloatingFilterWrapperComp=b;var _=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.enrichBody=function(e){};t.prototype.onParentModelChanged=function(e){};return t}(y);t.EmptyFloatingFilterWrapperComp=_},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(){this.first=null;this.last=null}e.prototype.add=function(e){var t={item:e,next:null};if(this.last){this.last.next=t}else{this.first=t}this.last=t};e.prototype.remove=function(){var e=this.first;if(e){this.first=e.next;if(!this.first){this.last=null}}return e.item};e.prototype.isEmpty=function(){return!this.first};return e}();t.LinkedList=n;var r=function(){function e(){}return e}()},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(1);var s=i(2);var l=i(0);var u=i(8);var c=i(21);var d=function(e){n(t,e);function t(){return e.call(this)||this}t.prototype.init=function(){};t.prototype.showLoadingOverlay=function(e){var i=this;this.setTemplate(t.LOADING_WRAPPER_OVERLAY_TEMPLATE);this.componentRecipes.newLoadingOverlayComponent().then((function(e){var t=i.getRefElement("loadingOverlayWrapper");a.Utils.removeAllChildren(t);t.appendChild(e.getGui())}));this.showOverlay(e,this.getGui())};t.prototype.showNoRowsOverlay=function(e){var i=this;this.setTemplate(t.NO_ROWS_WRAPPER_OVERLAY_TEMPLATE);this.componentRecipes.newNoRowsOverlayComponent().then((function(e){var t=i.getRefElement("noRowsOverlayWrapper");a.Utils.removeAllChildren(t);t.appendChild(e.getGui())}));this.showOverlay(e,this.getGui())};t.prototype.hideOverlay=function(e){a.Utils.removeAllChildren(e);a.Utils.setVisible(e,false)};t.prototype.showOverlay=function(e,t){if(t){a.Utils.removeAllChildren(e);a.Utils.setVisible(e,true);e.appendChild(t)}else{console.warn("ag-Grid: unknown overlay");this.hideOverlay(e)}};t.LOADING_WRAPPER_OVERLAY_TEMPLATE='<div class="ag-overlay-panel" role="presentation">'+'<div class="ag-overlay-wrapper ag-overlay-loading-wrapper" ref="loadingOverlayWrapper">[OVERLAY_TEMPLATE]</div>'+"</div>";t.NO_ROWS_WRAPPER_OVERLAY_TEMPLATE='<div class="ag-overlay-panel" role="presentation">'+'<div class="ag-overlay-wrapper ag-overlay-no-rows-wrapper" ref="noRowsOverlayWrapper">[OVERLAY_TEMPLATE]</div>'+"</div>";r([l.Autowired("gridOptionsWrapper"),o("design:type",s.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([l.Autowired("componentRecipes"),o("design:type",c.ComponentRecipes)],t.prototype,"componentRecipes",void 0);return t}(u.Component);t.OverlayWrapperComponent=d},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(8);var s=i(10);var l=i(1);var u=i(0);var c=i(2);var d=i(24);var f=i(46);var p=i(3);var h=i(11);var g=i(5);var m=function(e){n(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.lastMovingChanged=0;return t}t.prototype.init=function(e){var i=l.Utils.firstExistingValue(e.template,t.TEMPLATE);this.setTemplate(i);this.params=e;this.setupTap();this.setupIcons(e.column);this.setupMenu();this.setupSort();this.setupFilterIcon();this.setupText(e.displayName)};t.prototype.setupText=function(e){if(this.eText){this.eText.innerHTML=e}};t.prototype.setupIcons=function(e){this.addInIcon("sortAscending",this.eSortAsc,e);this.addInIcon("sortDescending",this.eSortDesc,e);this.addInIcon("sortUnSort",this.eSortNone,e);this.addInIcon("menu",this.eMenu,e);this.addInIcon("filter",this.eFilter,e)};t.prototype.addInIcon=function(e,t,i){if(t==null)return;var n=l.Utils.createIconNoSpan(e,this.gridOptionsWrapper,i);t.appendChild(n)};t.prototype.setupTap=function(){var e=this;if(this.gridOptionsWrapper.isSuppressTouch()){return}var t=new f.TouchListener(this.getGui());if(this.params.enableMenu){var i=function(t){e.gridOptionsWrapper.getApi().showColumnMenuAfterMouseClick(e.params.column,t.touchStart)};this.addDestroyableEventListener(t,f.TouchListener.EVENT_LONG_TAP,i)}if(this.params.enableSorting){var n=function(){e.sortController.progressSort(e.params.column,false,"uiColumnSorted")};this.addDestroyableEventListener(t,f.TouchListener.EVENT_TAP,n)}this.addDestroyFunc((function(){return t.destroy()}))};t.prototype.setupMenu=function(){var e=this;if(!this.eMenu){return}var t=!this.params.enableMenu||l.Utils.isUserAgentIPad();if(t){l.Utils.removeFromParent(this.eMenu);return}this.eMenu.addEventListener("click",(function(){return e.showMenu(e.eMenu)}));if(!this.gridOptionsWrapper.isSuppressMenuHide()){this.eMenu.style.opacity="0";this.addGuiEventListener("mouseover",(function(){e.eMenu.style.opacity="1"}));this.addGuiEventListener("mouseout",(function(){e.eMenu.style.opacity="0"}))}var i=this.eMenu.style;i["transition"]="opacity 0.2s, border 0.2s";i["-webkit-transition"]="opacity 0.2s, border 0.2s"};t.prototype.showMenu=function(e){this.menuFactory.showMenuAfterButtonClick(this.params.column,e)};t.prototype.removeSortIcons=function(){l.Utils.removeFromParent(this.eSortAsc);l.Utils.removeFromParent(this.eSortDesc);l.Utils.removeFromParent(this.eSortNone);l.Utils.removeFromParent(this.eSortOrder)};t.prototype.setupSort=function(){var e=this;var t=this.params.enableSorting;if(!t){this.removeSortIcons();return}var i=this.gridOptionsWrapper.isMultiSortKeyCtrl();this.addDestroyableEventListener(this.params.column,s.Column.EVENT_MOVING_CHANGED,(function(){e.lastMovingChanged=(new Date).getTime()}));if(this.eLabel){this.addDestroyableEventListener(this.eLabel,"click",(function(t){var n=e.params.column.isMoving();var r=(new Date).getTime();var o=r-e.lastMovingChanged<50;var a=n||o;if(!a){var s=i?t.ctrlKey||t.metaKey:t.shiftKey;e.params.progressSort(s)}else{console.log("kipping sort cos of moving "+e.lastMovingChanged)}}))}this.addDestroyableEventListener(this.params.column,s.Column.EVENT_SORT_CHANGED,this.onSortChanged.bind(this));this.onSortChanged();this.addDestroyableEventListener(this.eventService,g.Events.EVENT_SORT_CHANGED,this.setMultiSortOrder.bind(this));this.setMultiSortOrder()};t.prototype.onSortChanged=function(){l.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-sorted-asc",this.params.column.isSortAscending());l.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-sorted-desc",this.params.column.isSortDescending());l.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-sorted-none",this.params.column.isSortNone());if(this.eSortAsc){l.Utils.addOrRemoveCssClass(this.eSortAsc,"ag-hidden",!this.params.column.isSortAscending())}if(this.eSortDesc){l.Utils.addOrRemoveCssClass(this.eSortDesc,"ag-hidden",!this.params.column.isSortDescending())}if(this.eSortNone){var e=!this.params.column.getColDef().unSortIcon&&!this.gridOptionsWrapper.isUnSortIcon();l.Utils.addOrRemoveCssClass(this.eSortNone,"ag-hidden",e||!this.params.column.isSortNone())}};t.prototype.setMultiSortOrder=function(){if(!this.eSortOrder){return}var e=this.params.column;var t=this.sortController.getColumnsWithSortingOrdered();var i=t.indexOf(e);var n=t.length>1;var r=e.isSorting()&&n;l.Utils.setVisible(this.eSortOrder,r);if(i>=0){this.eSortOrder.innerHTML=(i+1).toString()}else{this.eSortOrder.innerHTML=""}};t.prototype.setupFilterIcon=function(){if(!this.eFilter){return}this.addDestroyableEventListener(this.params.column,s.Column.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this));this.onFilterChanged()};t.prototype.onFilterChanged=function(){var e=this.params.column.isFilterActive();l.Utils.addOrRemoveCssClass(this.eFilter,"ag-hidden",!e)};t.TEMPLATE='<div class="ag-cell-label-container" role="presentation">'+'  <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>'+'  <div ref="eLabel" class="ag-header-cell-label" role="presentation">'+'    <span ref="eText" class="ag-header-cell-text" role="columnheader"></span>'+'    <span ref="eFilter" class="ag-header-icon ag-filter-icon" aria-hidden="true"></span>'+'    <span ref="eSortOrder" class="ag-header-icon ag-sort-order" aria-hidden="true"></span>'+'    <span ref="eSortAsc" class="ag-header-icon ag-sort-ascending-icon" aria-hidden="true"></span>'+'    <span ref="eSortDesc" class="ag-header-icon ag-sort-descending-icon" aria-hidden="true"></span>'+'    <span ref="eSortNone" class="ag-header-icon ag-sort-none-icon" aria-hidden="true"></span>'+"  </div>"+"</div>";r([u.Autowired("gridOptionsWrapper"),o("design:type",c.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([u.Autowired("sortController"),o("design:type",d.SortController)],t.prototype,"sortController",void 0);r([u.Autowired("menuFactory"),o("design:type",Object)],t.prototype,"menuFactory",void 0);r([u.Autowired("eventService"),o("design:type",p.EventService)],t.prototype,"eventService",void 0);r([h.RefSelector("eFilter"),o("design:type",HTMLElement)],t.prototype,"eFilter",void 0);r([h.RefSelector("eSortAsc"),o("design:type",HTMLElement)],t.prototype,"eSortAsc",void 0);r([h.RefSelector("eSortDesc"),o("design:type",HTMLElement)],t.prototype,"eSortDesc",void 0);r([h.RefSelector("eSortNone"),o("design:type",HTMLElement)],t.prototype,"eSortNone",void 0);r([h.RefSelector("eSortOrder"),o("design:type",HTMLElement)],t.prototype,"eSortOrder",void 0);r([h.RefSelector("eMenu"),o("design:type",HTMLElement)],t.prototype,"eMenu",void 0);r([h.RefSelector("eLabel"),o("design:type",HTMLElement)],t.prototype,"eLabel",void 0);r([h.RefSelector("eText"),o("design:type",HTMLElement)],t.prototype,"eText",void 0);return t}(a.Component);t.HeaderComp=m},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(8);var s=i(1);var l=i(4);var u=i(2);var c=i(0);var d=i(46);var f=i(11);var p=i(32);var h=function(e){n(t,e);function t(){return e.call(this,t.TEMPLATE)||this}t.prototype.init=function(e){this.params=e;this.setupLabel();this.addGroupExpandIcon();this.setupExpandIcons()};t.prototype.setupExpandIcons=function(){var e=this;this.addInIcon("columnGroupOpened","agOpened");this.addInIcon("columnGroupClosed","agClosed");var t=function(t){if(s.Utils.isStopPropagationForAgGrid(t)){return}var i=!e.params.columnGroup.isExpanded();e.columnController.setColumnGroupOpened(e.params.columnGroup.getOriginalColumnGroup(),i,"uiColumnExpanded")};this.addTouchAndClickListeners(this.eCloseIcon,t);this.addTouchAndClickListeners(this.eOpenIcon,t);var i=function(e){s.Utils.stopPropagationForAgGrid(e)};this.addDestroyableEventListener(this.eCloseIcon,"dblclick",i);this.addDestroyableEventListener(this.eOpenIcon,"dblclick",i);this.addDestroyableEventListener(this.getGui(),"dblclick",t);this.updateIconVisibility();var n=this.params.columnGroup.getOriginalColumnGroup();this.addDestroyableEventListener(n,p.OriginalColumnGroup.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this));this.addDestroyableEventListener(n,p.OriginalColumnGroup.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))};t.prototype.addTouchAndClickListeners=function(e,t){var i=new d.TouchListener(this.eCloseIcon);this.addDestroyableEventListener(i,d.TouchListener.EVENT_TAP,t);this.addDestroyFunc((function(){return i.destroy()}));this.addDestroyableEventListener(e,"click",t)};t.prototype.updateIconVisibility=function(){var e=this.params.columnGroup;if(e.isExpandable()){var t=this.params.columnGroup.isExpanded();s.Utils.setVisible(this.eOpenIcon,!t);s.Utils.setVisible(this.eCloseIcon,t)}else{s.Utils.setVisible(this.eOpenIcon,false);s.Utils.setVisible(this.eCloseIcon,false)}};t.prototype.addInIcon=function(e,t){var i=s.Utils.createIconNoSpan(e,this.gridOptionsWrapper,null);this.getRefElement(t).appendChild(i)};t.prototype.addGroupExpandIcon=function(){if(!this.params.columnGroup.isExpandable()){s.Utils.setVisible(this.eOpenIcon,false);s.Utils.setVisible(this.eCloseIcon,false);return}};t.prototype.setupLabel=function(){if(this.params.displayName&&this.params.displayName!==""){var e=this.getRefElement("agLabel");e.innerHTML=this.params.displayName}};t.TEMPLATE='<div class="ag-header-group-cell-label" ref="agContainer">'+'<span ref="agLabel" class="ag-header-group-text"></span>'+'<span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>'+'<span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>'+"</div>";r([c.Autowired("columnController"),o("design:type",l.ColumnController)],t.prototype,"columnController",void 0);r([c.Autowired("gridOptionsWrapper"),o("design:type",u.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([f.RefSelector("agOpened"),o("design:type",HTMLElement)],t.prototype,"eOpenIcon",void 0);r([f.RefSelector("agClosed"),o("design:type",HTMLElement)],t.prototype,"eCloseIcon",void 0);return t}(a.Component);t.HeaderGroupComp=h},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(2);var s=i(0);var l=i(8);var u=function(e){n(t,e);function t(){return e.call(this)||this}t.prototype.init=function(e){var i=this.gridOptionsWrapper.getOverlayLoadingTemplate()?this.gridOptionsWrapper.getOverlayLoadingTemplate():t.DEFAULT_LOADING_OVERLAY_TEMPLATE;var n=this.gridOptionsWrapper.getLocaleTextFunc();var r=i.replace("[LOADING...]",n("loadingOoo","Loading..."));this.setTemplate(r)};t.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span class="ag-overlay-loading-center">[LOADING...]</span>';r([s.Autowired("gridOptionsWrapper"),o("design:type",a.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);return t}(l.Component);t.LoadingOverlayComponent=u},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(2);var s=i(0);var l=i(8);var u=function(e){n(t,e);function t(){return e.call(this)||this}t.prototype.init=function(e){var i=this.gridOptionsWrapper.getOverlayNoRowsTemplate()?this.gridOptionsWrapper.getOverlayNoRowsTemplate():t.DEFAULT_NO_ROWS_TEMPLATE;var n=this.gridOptionsWrapper.getLocaleTextFunc();var r=i.replace("[NO_ROWS_TO_SHOW]",n("noRowsToShow","No Rows To Show"));this.setTemplate(r)};t.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>';r([s.Autowired("gridOptionsWrapper"),o("design:type",a.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);return t}(l.Component);t.NoRowsOverlayComponent=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){if(typeof requestAnimationFrame==="function"){return requestAnimationFrame.bind(window)}return function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)}}();var r=2;var o=function(e,t){var i=false;var o=false;var a=0;function s(){if(i){i=false;e()}if(o){u()}}function l(){n(s)}function u(){var e=Date.now();if(i){if(e-a<r){return}o=true}else{i=true;o=false;setTimeout(l,t)}a=e}return u};var a=20;var s=typeof MutationObserver!=="undefined";var l=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||window};var u=m(0,0,0,0);function c(e){return parseFloat(e)||0}function d(e,t,i){var n=[t,i];return n.reduce((function(t,i){var n=e.getPropertyValue("border-"+i+"-width");return t+c(n)}),0)}function f(e){var t=["top","right","bottom","left"];var i={top:null,left:null,right:null,bottom:null};for(var n=0,r=t;n<r.length;n+=1){var o=r[n];var a=e.getPropertyValue("padding-"+o);i[o]=c(a)}return i}function p(e){var t=e.clientWidth;var i=e.clientHeight;if(!t&&!i){return u}var n=l(e).getComputedStyle(e);var r=f(n);var o=r.left+r.right;var a=r.top+r.bottom;var s=c(n.width);var p=c(n.height);if(n.boxSizing==="border-box"){if(Math.round(s+o)!==t){s-=d(n,"left","right")+o}if(Math.round(p+a)!==i){p-=d(n,"top","bottom")+a}}var h=Math.round(s+o)-t;var g=Math.round(p+a)-i;if(Math.abs(h)!==1){s-=h}if(Math.abs(g)!==1){p-=g}return m(r.left,r.top,s,p)}function h(e){return p(e)}function g(e){var t=e.x;var i=e.y;var n=e.width;var r=e.height;var o=window.DOMRectReadOnly?window.DOMRectReadOnly:Object;var a=Object.create(o.prototype);y(a,{x:t,y:i,width:n,height:r,top:i,right:t+n,bottom:r+i,left:t});return a}function m(e,t,i,n){return{x:e,y:t,width:i,height:n}}var v=function(){function e(){this.connected_=false;this.mutationEventsAdded_=false;this.mutationsObserver_=null;this.observers_=[];this.callback_=null;this.refresh=o(this.refresh.bind(this),a)}e.prototype.addObserver=function(e){if(this.observers_.indexOf(e)==-1){this.observers_.push(e)}if(!this.connected_){this.connect_()}};e.prototype.removeObserver=function(e){var t=this.observers_;var i=t.indexOf(e);if(i>-1){t.splice(i,1)}if(!t.length&&this.connected_){this.disconnect_()}};e.prototype.refresh=function(){var e=this.updateObservers_();if(e){this.refresh()}};e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.hasActive()}));e.forEach((function(e){return e.broadcastActive()}));return e.length>0};e.prototype.connect_=function(){if(this.connected_){return}window.addEventListener("resize",this.refresh);if(s){this.mutationsObserver_=new MutationObserver(this.refresh);this.mutationsObserver_.observe(document,{attributes:true,childList:true,characterData:true,subtree:true})}else{document.addEventListener("DOMSubtreeModified",this.refresh);this.mutationEventsAdded_=true}this.connected_=true};e.prototype.disconnect_=function(){if(!this.connected_){return}window.removeEventListener("resize",this.refresh);if(this.mutationsObserver_){this.mutationsObserver_.disconnect()}if(this.mutationEventsAdded_){document.removeEventListener("DOMSubtreeModified",this.refresh)}this.mutationsObserver_=null;this.mutationEventsAdded_=false;this.connected_=false};e.getInstance=function(){if(!this.instance_){this.instance_=new e}return this.instance_};e.instance_=null;return e}();var y=function(e,t){for(var i=0,n=Object.keys(t);i<n.length;i+=1){var r=n[i];Object.defineProperty(e,r,{value:t[r],enumerable:false,writable:false,configurable:true})}return e};var b=function(){function e(e){this.target=e;this.broadcastWidth=0;this.broadcastHeight=0;this.contentRect_=null;this.contentRect_=m(0,0,0,0)}e.prototype.isActive=function(){var e=h(this.target);this.contentRect_=e;return e.width!==this.broadcastWidth||e.height!==this.broadcastHeight};e.prototype.broadcastRect=function(){var e=this.contentRect_;this.broadcastWidth=e.width;this.broadcastHeight=e.height;return e};return e}();var _=function(){function e(e,t,i){this.observation=null;this.callback_=null;this.controller_=null;this.callbackCtx_=null;this.observation=null;if(typeof e!=="function"){throw new TypeError("The callback provided as parameter 1 is not a function.")}this.callback_=e;this.controller_=t;this.callbackCtx_=i}e.prototype.observe=function(e){this.observation=new b(e);this.controller_.addObserver(this);this.controller_.refresh()};e.prototype.disconnect=function(){this.observation=null;this.controller_.removeObserver(this)};e.prototype.broadcastActive=function(){if(!this.hasActive()){return}var e=this.callbackCtx_;this.callback_.call(e,{target:this.observation.target,contentRect:g(this.observation.broadcastRect())},e)};e.prototype.hasActive=function(){return this.observation.isActive()};return e}();var w=function(){function e(e){var t=v.getInstance();var i=new _(e,t,this);this.observer_=i}e.prototype.observe=function(e){this.observer_.observe(e)};e.prototype.disconnect=function(){this.observer_.disconnect()};return e}();function C(e,t){if(window.ResizeObserver){var i=new window.ResizeObserver((function(e,i){for(var n=0,r=e;n<r.length;n++){var o=r[n];t(o)}}));i.observe(e);return function e(){i.disconnect()}}else{var n=new w((function(e){t(e)}));n.observe(e);return function e(){n.disconnect()}}}t.observeResize=C},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(1);var a=i(0);var s=i(2);var l=function(){function e(e){this.childCount=0;this.rowTemplatesToAdd=[];this.afterGuiAttachedCallbacks=[];this.eContainer=e.eContainer;this.eViewport=e.eViewport;this.hideWhenNoChildren=e.hideWhenNoChildren}e.prototype.setVerticalScrollPosition=function(e){this.scrollTop=e};e.prototype.postConstruct=function(){this.domOrder=this.gridOptionsWrapper.isEnsureDomOrder();this.checkVisibility()};e.prototype.getRowElement=function(e){return this.eContainer.querySelector('[comp-id="'+e+'"]')};e.prototype.setHeight=function(e){this.eContainer.style.height=e+"px"};e.prototype.flushRowTemplates=function(){if(this.rowTemplatesToAdd.length!==0){var e=this.rowTemplatesToAdd.join("");o.Utils.appendHtml(this.eContainer,e);this.rowTemplatesToAdd.length=0}this.afterGuiAttachedCallbacks.forEach((function(e){return e()}));this.afterGuiAttachedCallbacks.length=0;this.lastPlacedElement=null};e.prototype.appendRowTemplate=function(e,t){if(this.domOrder){this.lastPlacedElement=o.Utils.insertTemplateWithDomOrder(this.eContainer,e,this.lastPlacedElement)}else{this.rowTemplatesToAdd.push(e)}this.afterGuiAttachedCallbacks.push(t);this.childCount++;this.checkVisibility()};e.prototype.ensureDomOrder=function(e){if(this.domOrder){o.Utils.ensureDomOrder(this.eContainer,e,this.lastPlacedElement);this.lastPlacedElement=e}};e.prototype.removeRowElement=function(e){this.eContainer.removeChild(e);this.childCount--;this.checkVisibility()};e.prototype.checkVisibility=function(){if(!this.hideWhenNoChildren){return}var e=this.eViewport?this.eViewport:this.eContainer;var t=this.childCount>0;if(this.visible!==t){this.visible=t;o.Utils.setVisible(e,t);if(t&&this.eViewport){this.eViewport.scrollTop=this.scrollTop}}};n([a.Autowired("gridOptionsWrapper"),r("design:type",s.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([a.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"postConstruct",null);return e}();t.RowContainerComponent=l},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(15);var a=i(0);var s=i(22);var l=i(2);var u=i(3);var c=i(25);var d=function(){function e(e,t){this.eContainer=e;this.gridPanel=t}e.prototype.postConstruct=function(){if(this.gridOptionsWrapper.isRowModelDefault()){this.clientSideRowModel=this.rowModel}};e.prototype.getContainer=function(){return this.eContainer};e.prototype.isInterestedIn=function(e){return e===o.DragSourceType.RowDrag};e.prototype.getIconName=function(){return o.DragAndDropService.ICON_MOVE};e.prototype.onDragEnter=function(e){this.dispatchEvent(c.Events.EVENT_ROW_DRAG_ENTER,e);this.dragAndDropService.setGhostIcon(o.DragAndDropService.ICON_MOVE);e.dragItem.rowNode.setDragging(true);this.onEnterOrDragging(e)};e.prototype.onDragging=function(e){this.onEnterOrDragging(e)};e.prototype.onEnterOrDragging=function(e){this.dispatchEvent(c.Events.EVENT_ROW_DRAG_MOVE,e);this.lastDraggingEvent=e;var t=this.normaliseForScroll(e.y);var i=this.gridOptionsWrapper.isRowDragManaged();if(i){this.doManagedDrag(e,t)}this.checkCenterForScrolling(t)};e.prototype.doManagedDrag=function(e,t){var i=e.dragItem.rowNode;var n=this.clientSideRowModel.ensureRowAtPixel(i,t);if(n){this.focusedCellController.clearFocusedCell();if(this.rangeController){this.rangeController.clearSelection()}}};e.prototype.normaliseForScroll=function(e){var t=!this.gridOptionsWrapper.isGridAutoHeight();if(t){var i=this.gridPanel.getVScrollPosition();return e+i.top}else{return e}};e.prototype.checkCenterForScrolling=function(e){var t=this.gridPanel.getVScrollPosition();this.needToMoveUp=e<t.top+50;this.needToMoveDown=e>t.bottom-50;if(this.needToMoveUp||this.needToMoveDown){this.ensureIntervalStarted()}else{this.ensureIntervalCleared()}};e.prototype.ensureIntervalStarted=function(){if(!this.movingIntervalId){this.intervalCount=0;this.movingIntervalId=setInterval(this.moveInterval.bind(this),100)}};e.prototype.ensureIntervalCleared=function(){if(this.moveInterval){clearInterval(this.movingIntervalId);this.movingIntervalId=null}};e.prototype.moveInterval=function(){var e;this.intervalCount++;e=10+this.intervalCount*5;if(e>100){e=100}var t;if(this.needToMoveDown){t=this.gridPanel.scrollVertically(e)}else if(this.needToMoveUp){t=this.gridPanel.scrollVertically(-e)}if(t!==0){this.onDragging(this.lastDraggingEvent)}};e.prototype.dispatchEvent=function(e,t){var i=this.normaliseForScroll(t.y);var n=-1;var r=null;var a=i>this.rowModel.getCurrentPageHeight();if(!a){n=this.rowModel.getRowIndexAtPixel(i);r=this.rowModel.getRow(n)}var s;switch(t.vDirection){case o.VDirection.Down:s="down";break;case o.VDirection.Up:s="up";break;default:s=null;break}var l={type:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),event:t.event,node:t.dragItem.rowNode,overIndex:n,overNode:r,y:i,vDirection:s};this.eventService.dispatchEvent(l)};e.prototype.onDragLeave=function(e){this.dispatchEvent(c.Events.EVENT_ROW_DRAG_LEAVE,e);this.stopDragging(e)};e.prototype.onDragStop=function(e){this.dispatchEvent(c.Events.EVENT_ROW_DRAG_END,e);this.stopDragging(e)};e.prototype.stopDragging=function(e){this.ensureIntervalCleared();e.dragItem.rowNode.setDragging(false)};n([a.Autowired("dragAndDropService"),r("design:type",o.DragAndDropService)],e.prototype,"dragAndDropService",void 0);n([a.Autowired("rowModel"),r("design:type",Object)],e.prototype,"rowModel",void 0);n([a.Autowired("focusedCellController"),r("design:type",s.FocusedCellController)],e.prototype,"focusedCellController",void 0);n([a.Autowired("gridOptionsWrapper"),r("design:type",l.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([a.Optional("rangeController"),r("design:type",Object)],e.prototype,"rangeController",void 0);n([a.Autowired("eventService"),r("design:type",u.EventService)],e.prototype,"eventService",void 0);n([a.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],e.prototype,"postConstruct",null);return e}();t.RowDragFeature=d},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(60);var s=i(13);var l=i(0);var u=i(7);var c=i(6);var d=i(5);var f=i(3);var p=i(9);var h=i(17);var g=i(2);var m=function(e){n(t,e);function t(t,i){var n=e.call(this)||this;n.cbSelectAllVisible=false;n.processingEventFromCheckbox=false;n.cbSelectAll=t;n.column=i;var r=i.getColDef();n.filteredOnly=r?!!r.headerCheckboxSelectionFilteredOnly:false;return n}t.prototype.postConstruct=function(){this.showOrHideSelectAll();this.addDestroyableEventListener(this.eventService,d.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelectAll.bind(this));this.addDestroyableEventListener(this.eventService,d.Events.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this));this.addDestroyableEventListener(this.eventService,d.Events.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this));this.addDestroyableEventListener(this.cbSelectAll,a.AgCheckbox.EVENT_CHANGED,this.onCbSelectAll.bind(this))};t.prototype.showOrHideSelectAll=function(){this.cbSelectAllVisible=this.isCheckboxSelection();this.cbSelectAll.setVisible(this.cbSelectAllVisible);if(this.cbSelectAllVisible){this.checkRightRowModelType();this.updateStateOfCheckbox()}};t.prototype.onModelChanged=function(){if(!this.cbSelectAllVisible){return}this.updateStateOfCheckbox()};t.prototype.onSelectionChanged=function(){if(!this.cbSelectAllVisible){return}this.updateStateOfCheckbox()};t.prototype.getNextCheckboxState=function(e){if(e.selected===0&&e.notSelected===0){return false}else if(e.selected>0&&e.notSelected>0){return null}else if(e.selected>0){return true}else{return false}};t.prototype.updateStateOfCheckbox=function(){if(this.processingEventFromCheckbox){return}this.processingEventFromCheckbox=true;var e=this.getSelectionCount();var t=this.getNextCheckboxState(e);this.cbSelectAll.setSelected(t);this.processingEventFromCheckbox=false};t.prototype.getSelectionCount=function(){var e=0;var t=0;var i=function(i){if(i.isSelected()){e++}else if(!i.selectable){}else{t++}};if(this.filteredOnly){this.gridApi.forEachNodeAfterFilter(i)}else{this.gridApi.forEachNode(i)}return{notSelected:t,selected:e}};t.prototype.checkRightRowModelType=function(){var e=this.rowModel.getType();var t=e===p.Constants.ROW_MODEL_TYPE_CLIENT_SIDE;if(!t){console.log("ag-Grid: selectAllCheckbox is only available if using normal row model, you are using "+e)}};t.prototype.onCbSelectAll=function(){if(this.processingEventFromCheckbox){return}if(!this.cbSelectAllVisible){return}var e=this.cbSelectAll.isSelected();if(e){this.selectionController.selectAllRowNodes(this.filteredOnly)}else{this.selectionController.deselectAllRowNodes(this.filteredOnly)}};t.prototype.isCheckboxSelection=function(){var e=this.column.getColDef().headerCheckboxSelection;if(typeof e==="function"){var t=e;e=t({column:this.column,colDef:this.column.getColDef(),columnApi:this.columnApi,api:this.gridApi})}if(e){if(this.gridOptionsWrapper.isRowModelServerSide()){console.warn("headerCheckboxSelection is not supported for Server Side Row Model");return false}if(this.gridOptionsWrapper.isRowModelInfinite()){console.warn("headerCheckboxSelection is not supported for Infinite Row Model");return false}if(this.gridOptionsWrapper.isRowModelViewport()){console.warn("headerCheckboxSelection is not supported for Viewport Row Model");return false}return true}else{return false}};r([l.Autowired("gridApi"),o("design:type",c.GridApi)],t.prototype,"gridApi",void 0);r([l.Autowired("columnApi"),o("design:type",u.ColumnApi)],t.prototype,"columnApi",void 0);r([l.Autowired("eventService"),o("design:type",f.EventService)],t.prototype,"eventService",void 0);r([l.Autowired("rowModel"),o("design:type",Object)],t.prototype,"rowModel",void 0);r([l.Autowired("selectionController"),o("design:type",h.SelectionController)],t.prototype,"selectionController",void 0);r([l.Autowired("gridOptionsWrapper"),o("design:type",g.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([l.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"postConstruct",null);return t}(s.BeanStub);t.SelectAllFeature=m},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(8);var s=i(10);var l=i(1);var u=i(26);var c=i(7);var d=i(4);var f=i(2);var p=i(59);var h=i(0);var g=i(81);var m=i(15);var v=i(52);var y=i(6);var b=i(21);var _=i(28);var w=i(74);var C=function(e){n(t,e);function t(i,n,r){var o=e.call(this,t.TEMPLATE)||this;o.childColumnsDestroyFuncs=[];o.columnGroup=i;o.dragSourceDropTarget=n;o.pinned=r;return o}t.prototype.postConstruct=function(){g.CssClassApplier.addHeaderClassesFromColDef(this.columnGroup.getColGroupDef(),this.getGui(),this.gridOptionsWrapper,null,this.columnGroup);var e=this.columnController.getDisplayNameForColumnGroup(this.columnGroup,"header");this.appendHeaderGroupComp(e);this.setupResize();this.addClasses();this.setupWidth();this.addAttributes();this.setupMovingCss();this.setupTooltip();this.addFeature(this.context,new w.HoverFeature(this.columnGroup.getOriginalColumnGroup().getLeafColumns(),this.getGui()));var t=new v.SetLeftFeature(this.columnGroup,this.getGui(),this.beans);t.init();this.addDestroyFunc(t.destroy.bind(t))};t.prototype.setupMovingCss=function(){var e=this;var t=this.columnGroup.getOriginalColumnGroup();var i=t.getLeafColumns();i.forEach((function(t){e.addDestroyableEventListener(t,s.Column.EVENT_MOVING_CHANGED,e.onColumnMovingChanged.bind(e))}));this.onColumnMovingChanged()};t.prototype.setupTooltip=function(){var e=this.columnGroup.getColGroupDef();if(e&&e.headerTooltip){this.getGui().title=e.headerTooltip}};t.prototype.onColumnMovingChanged=function(){if(this.columnGroup.isMoving()){l.Utils.addCssClass(this.getGui(),"ag-header-cell-moving")}else{l.Utils.removeCssClass(this.getGui(),"ag-header-cell-moving")}};t.prototype.addAttributes=function(){this.getGui().setAttribute("col-id",this.columnGroup.getUniqueId())};t.prototype.appendHeaderGroupComp=function(e){var t=this;var i={displayName:e,columnGroup:this.columnGroup,setExpanded:function(e){t.columnController.setColumnGroupOpened(t.columnGroup.getOriginalColumnGroup(),e,"gridInitializing")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};if(!e){var n=this.columnGroup.getLeafColumns();e=n?n[0].getColDef().headerName:""}var r=this.afterHeaderCompCreated.bind(this,e);this.componentRecipes.newHeaderGroupComponent(i).then(r)};t.prototype.afterHeaderCompCreated=function(e,t){this.appendChild(t);this.setupMove(t.getGui(),e);if(t.destroy){this.addDestroyFunc(t.destroy.bind(t))}};t.prototype.addClasses=function(){if(this.columnGroup.isPadding()){this.addCssClass("ag-header-group-cell-no-group")}else{this.addCssClass("ag-header-group-cell-with-group")}};t.prototype.setupMove=function(e,t){var i=this;if(!e){return}if(this.isSuppressMoving()){return}var n=this.columnGroup.getOriginalColumnGroup().getLeafColumns();if(e){var r={type:m.DragSourceType.HeaderCell,eElement:e,dragItemName:t,dragItemCallback:this.getDragItemForGroup.bind(this),dragSourceDropTarget:this.dragSourceDropTarget,dragStarted:function(){return n.forEach((function(e){return e.setMoving(true,"uiColumnDragged")}))},dragStopped:function(){return n.forEach((function(e){return e.setMoving(false,"uiColumnDragged")}))}};this.dragAndDropService.addDragSource(r,true);this.addDestroyFunc((function(){return i.dragAndDropService.removeDragSource(r)}))}};t.prototype.getDragItemForGroup=function(){var e=this.columnGroup.getOriginalColumnGroup().getLeafColumns();var t={};e.forEach((function(e){return t[e.getId()]=e.isVisible()}));var i=[];this.columnController.getAllDisplayedColumns().forEach((function(t){if(e.indexOf(t)>=0){i.push(t);l.Utils.removeFromArray(e,t)}}));e.forEach((function(e){return i.push(e)}));return{columns:i,visibleState:t}};t.prototype.isSuppressMoving=function(){var e=false;this.columnGroup.getLeafColumns().forEach((function(t){if(t.getColDef().suppressMovable||t.isLockPosition()){e=true}}));var t=e||this.gridOptionsWrapper.isSuppressMovableColumns();return t};t.prototype.setupWidth=function(){this.addListenersToChildrenColumns();this.addDestroyableEventListener(this.columnGroup,u.ColumnGroup.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this));this.onWidthChanged();this.addDestroyFunc(this.destroyListenersOnChildrenColumns.bind(this))};t.prototype.onDisplayedChildrenChanged=function(){this.addListenersToChildrenColumns();this.onWidthChanged()};t.prototype.addListenersToChildrenColumns=function(){var e=this;this.destroyListenersOnChildrenColumns();var t=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach((function(i){i.addEventListener(s.Column.EVENT_WIDTH_CHANGED,t);i.addEventListener(s.Column.EVENT_VISIBLE_CHANGED,t);e.childColumnsDestroyFuncs.push((function(){i.removeEventListener(s.Column.EVENT_WIDTH_CHANGED,t);i.removeEventListener(s.Column.EVENT_VISIBLE_CHANGED,t)}))}))};t.prototype.destroyListenersOnChildrenColumns=function(){this.childColumnsDestroyFuncs.forEach((function(e){return e()}));this.childColumnsDestroyFuncs=[]};t.prototype.onWidthChanged=function(){this.getGui().style.width=this.columnGroup.getActualWidth()+"px"};t.prototype.setupResize=function(){var e=this;this.eHeaderCellResize=this.getRefElement("agResize");if(!this.columnGroup.isResizable()){l.Utils.removeFromParent(this.eHeaderCellResize);return}var t=this.horizontalResizeService.addResizeBar({eResizeBar:this.eHeaderCellResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,false),onResizeEnd:this.onResizing.bind(this,true)});this.addDestroyFunc(t);if(!this.gridOptionsWrapper.isSuppressAutoSize()){this.eHeaderCellResize.addEventListener("dblclick",(function(t){var i=[];e.columnGroup.getDisplayedLeafColumns().forEach((function(e){if(!e.getColDef().suppressAutoSize){i.push(e.getColId())}}));if(i.length>0){e.columnController.autoSizeColumns(i,"uiColumnResized")}}))}};t.prototype.onResizeStart=function(e){var t=this;var i=this.columnGroup.getDisplayedLeafColumns();this.resizeCols=l.Utils.filter(i,(function(e){return e.isResizable()}));this.resizeStartWidth=0;this.resizeCols.forEach((function(e){return t.resizeStartWidth+=e.getActualWidth()}));this.resizeRatios=[];this.resizeCols.forEach((function(e){return t.resizeRatios.push(e.getActualWidth()/t.resizeStartWidth)}));var n=null;if(e){n=this.columnController.getDisplayedGroupAfter(this.columnGroup)}if(n){var r=n.getDisplayedLeafColumns();this.resizeTakeFromCols=l.Utils.filter(r,(function(e){return e.isResizable()}));this.resizeTakeFromStartWidth=0;this.resizeTakeFromCols.forEach((function(e){return t.resizeTakeFromStartWidth+=e.getActualWidth()}));this.resizeTakeFromRatios=[];this.resizeTakeFromCols.forEach((function(e){return t.resizeTakeFromRatios.push(e.getActualWidth()/t.resizeTakeFromStartWidth)}))}else{this.resizeTakeFromCols=null;this.resizeTakeFromStartWidth=null;this.resizeTakeFromRatios=null}};t.prototype.onResizing=function(e,t){var i=[];var n=this.normaliseDragChange(t);i.push({columns:this.resizeCols,ratios:this.resizeRatios,width:this.resizeStartWidth+n});if(this.resizeTakeFromCols){i.push({columns:this.resizeTakeFromCols,ratios:this.resizeTakeFromRatios,width:this.resizeTakeFromStartWidth-n})}this.columnController.resizeColumnSets(i,e,"uiColumnDragged")};t.prototype.normaliseDragChange=function(e){var t=e;if(this.gridOptionsWrapper.isEnableRtl()){if(this.pinned!==s.Column.PINNED_LEFT){t*=-1}}else{if(this.pinned===s.Column.PINNED_RIGHT){t*=-1}}return t};t.TEMPLATE='<div class="ag-header-group-cell">'+'<div ref="agResize" class="ag-header-cell-resize"></div>'+"</div>";r([h.Autowired("gridOptionsWrapper"),o("design:type",f.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([h.Autowired("columnController"),o("design:type",d.ColumnController)],t.prototype,"columnController",void 0);r([h.Autowired("horizontalResizeService"),o("design:type",p.HorizontalResizeService)],t.prototype,"horizontalResizeService",void 0);r([h.Autowired("dragAndDropService"),o("design:type",m.DragAndDropService)],t.prototype,"dragAndDropService",void 0);r([h.Autowired("context"),o("design:type",h.Context)],t.prototype,"context",void 0);r([h.Autowired("componentRecipes"),o("design:type",b.ComponentRecipes)],t.prototype,"componentRecipes",void 0);r([h.Autowired("gridApi"),o("design:type",y.GridApi)],t.prototype,"gridApi",void 0);r([h.Autowired("columnApi"),o("design:type",c.ColumnApi)],t.prototype,"columnApi",void 0);r([h.Autowired("beans"),o("design:type",_.Beans)],t.prototype,"beans",void 0);r([h.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"postConstruct",null);return t}(a.Component);t.HeaderGroupWrapperComp=C},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DefaultColumnTypes={numericColumn:{headerClass:"ag-numeric-header",cellClass:"ag-numeric-cell"}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(85);function r(e){var t=e.module("agGrid",[]);t.directive("agGrid",(function(){return{restrict:"A",controller:["$element","$scope","$compile","$attrs",o],scope:true}}))}t.initialiseAgGridWithAngular1=r;function o(e,t,i,r){var o;var a;var s=r.agGrid;a=s+".quickFilterText";o=t.$eval(s);if(!o){console.warn("WARNING - grid options for ag-Grid not found. Please ensure the attribute ag-grid points to a valid object on the scope");return}var l=e[0];var u={$scope:t,$compile:i,quickFilterOnScope:a};var c=new n.Grid(l,o,u);t.$on("$destroy",(function(){c.destroy();c=null}))}},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var a=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:true});var s=i(0);var l=i(3);var u=i(5);var c=i(12);var d=i(137);var f=i(87);var p=i(6);var h=i(7);var g=function(e){n(t,e);function t(t){return e.call(this,t)||this}t.prototype.setBeans=function(e){this.logger=e.create("InfiniteCache")};t.prototype.init=function(){e.prototype.init.call(this);this.getRow(0)};t.prototype.moveItemsDown=function(e,t,i){var n=e.getStartRow();var r=e.getEndRow();var o=t+i;for(var a=r-1;a>=n;a--){if(a<o){continue}var s=a-i;var l=this.getRow(s,true);if(l){e.setRowNode(a,l)}else{e.setBlankRowNode(a);e.setDirty()}}};t.prototype.insertItems=function(e,t,i){var n=e.getStartRow();var r=e.getEndRow();var o=[];for(var a=0;a<i.length;a++){var s=t+a;var l=s>=n&&s<r;if(l){var u=i[a];var c=e.setNewData(s,u);o.push(c)}}return o};t.prototype.insertItemsAtIndex=function(e,t){var i=this;var n=[];this.forEachBlockInReverseOrder((function(r){var o=r.getEndRow();if(o<=e){return}i.moveItemsDown(r,e,t.length);var a=i.insertItems(r,e,t);a.forEach((function(e){return n.push(e)}))}));if(this.isMaxRowFound()){this.hack_setVirtualRowCount(this.getVirtualRowCount()+t.length)}this.onCacheUpdated();var r={type:u.Events.EVENT_ROW_DATA_UPDATED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(r)};t.prototype.getRow=function(e,t){if(t===void 0){t=false}var i=Math.floor(e/this.cacheParams.blockSize);var n=this.getBlock(i);if(!n){if(t){return null}else{n=this.createBlock(i)}}return n.getRow(e)};t.prototype.createBlock=function(e){var t=new d.InfiniteBlock(e,this.cacheParams);this.context.wireBean(t);this.postCreateBlock(t);return t};t.prototype.refreshCache=function(){this.forEachBlockInOrder((function(e){return e.setDirty()}));this.checkBlockToLoad()};r([s.Autowired("eventService"),o("design:type",l.EventService)],t.prototype,"eventService",void 0);r([s.Autowired("context"),o("design:type",s.Context)],t.prototype,"context",void 0);r([s.Autowired("columnApi"),o("design:type",h.ColumnApi)],t.prototype,"columnApi",void 0);r([s.Autowired("gridApi"),o("design:type",p.GridApi)],t.prototype,"gridApi",void 0);r([a(0,s.Qualifier("loggerFactory")),o("design:type",Function),o("design:paramtypes",[c.LoggerFactory]),o("design:returntype",void 0)],t.prototype,"setBeans",null);r([s.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"init",null);return t}(f.RowNodeCache);t.InfiniteCache=g},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(1);var s=i(2);var l=i(0);var u=i(61);var c=i(20);var d=function(e){n(t,e);function t(t,i){var n=e.call(this,t,i)||this;n.cacheParams=i;return n}t.prototype.createBlankRowNode=function(t){var i=e.prototype.createBlankRowNode.call(this,t);i.uiLevel=0;this.setIndexAndTopOnRowNode(i,t);return i};t.prototype.setDataAndId=function(e,t,i){if(a.Utils.exists(t)){e.setDataAndId(t,i.toString())}else{e.setDataAndId(undefined,undefined)}};t.prototype.setRowNode=function(t,i){e.prototype.setRowNode.call(this,t,i);this.setIndexAndTopOnRowNode(i,t)};t.prototype.init=function(){e.prototype.init.call(this,{context:this.context,rowRenderer:this.rowRenderer})};t.prototype.getNodeIdPrefix=function(){return null};t.prototype.getRow=function(e){return this.getRowUsingLocalIndex(e)};t.prototype.setIndexAndTopOnRowNode=function(e,t){e.setRowIndex(t);e.rowTop=this.cacheParams.rowHeight*t};t.prototype.loadFromDatasource=function(){var e=this;var t={startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this),sortModel:this.cacheParams.sortModel,filterModel:this.cacheParams.filterModel,context:this.gridOptionsWrapper.getContext()};if(a.Utils.missing(this.cacheParams.datasource.getRows)){console.warn("ag-Grid: datasource is missing getRows method");return}var i=a.Utils.getFunctionParameters(this.cacheParams.datasource.getRows);if(i.length>1){console.warn("ag-grid: It looks like your paging datasource is of the old type, taking more than one parameter.");console.warn("ag-grid: From ag-grid 1.9.0, now the getRows takes one parameter. See the documentation for details.")}setTimeout((function(){e.cacheParams.datasource.getRows(t)}),0)};r([l.Autowired("gridOptionsWrapper"),o("design:type",s.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([l.Autowired("context"),o("design:type",l.Context)],t.prototype,"context",void 0);r([l.Autowired("rowRenderer"),o("design:type",c.RowRenderer)],t.prototype,"rowRenderer",void 0);r([l.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"init",null);return t}(u.RowNodeBlock);t.InfiniteBlock=d},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var r=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var o=i(14);var a=i(88);var s=i(2);var l=i(3);var u=i(0);var c=i(4);var d=function(){function e(){}e.prototype.create=function(e){var t=new o.RowNode;var i=new a.ClientSideNodeManager(t,this.gridOptionsWrapper,this.context,this.eventService,this.columnController);this.context.wireBean(t);i.setRowData(e);return t};n([u.Autowired("gridOptionsWrapper"),r("design:type",s.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0);n([u.Autowired("eventService"),r("design:type",l.EventService)],e.prototype,"eventService",void 0);n([u.Autowired("context"),r("design:type",u.Context)],e.prototype,"context",void 0);n([u.Autowired("columnController"),r("design:type",c.ColumnController)],e.prototype,"columnController",void 0);e=n([u.Bean("rowNodeFactory")],e);return e}();t.RowNodeFactory=d},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(0);var s=i(2);var l=i(89);var u=i(20);var c=i(3);var d=i(9);var f=i(13);var p=i(5);var h=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.init=function(){if(this.rowModel.getType()===d.Constants.ROW_MODEL_TYPE_CLIENT_SIDE){this.clientSideRowModel=this.rowModel}this.addDestroyableEventListener(this.eventService,p.Events.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))};t.prototype.onCellValueChanged=function(e){this.doChangeDetection(e.node,e.column)};t.prototype.doChangeDetection=function(e,t){if(this.gridOptionsWrapper.isSuppressChangeDetection()){return}if(this.clientSideRowModel&&!e.isRowPinned()){var i=this.gridOptionsWrapper.isAggregateOnlyChangedColumns();var n=new l.ChangedPath(i);n.addParentNode(e.parent,[t]);this.clientSideRowModel.doAggregate(n)}this.rowRenderer.refreshCells()};r([a.Autowired("gridOptionsWrapper"),o("design:type",s.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([a.Autowired("rowModel"),o("design:type",Object)],t.prototype,"rowModel",void 0);r([a.Autowired("rowRenderer"),o("design:type",u.RowRenderer)],t.prototype,"rowRenderer",void 0);r([a.Autowired("eventService"),o("design:type",c.EventService)],t.prototype,"eventService",void 0);r([a.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"init",null);t=r([a.Bean("changeDetectionService")],t);return t}(f.BeanStub);t.ChangeDetectionService=h},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return function(t,i){e(t,i);function n(){this.constructor=t}t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();var r=this&&this.__decorate||function(e,t,i,n){var r=arguments.length,o=r<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(r<3?a(o):r>3?a(t,i,o):a(t,i))||o;return r>3&&o&&Object.defineProperty(t,i,o),o};var o=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:true});var a=i(8);var s=i(0);var l=i(2);var u=i(11);var c=i(1);var d=i(3);var f=i(5);var p=i(20);var h=i(29);var g=function(e){n(t,e);function t(){return e.call(this)||this}t.prototype.postConstruct=function(){this.setTemplate(this.getTemplate());var e=this.gridOptionsWrapper.isPagination();var t=e&&!this.gridOptionsWrapper.isSuppressPaginationPanel();if(!t){this.setVisible(false);return}this.addDestroyableEventListener(this.eventService,f.Events.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this));this.addDestroyableEventListener(this.btFirst,"click",this.onBtFirst.bind(this));this.addDestroyableEventListener(this.btLast,"click",this.onBtLast.bind(this));this.addDestroyableEventListener(this.btNext,"click",this.onBtNext.bind(this));this.addDestroyableEventListener(this.btPrevious,"click",this.onBtPrevious.bind(this));this.onPaginationChanged()};t.prototype.onPaginationChanged=function(){this.enableOrDisableButtons();this.updateRowLabels();this.setCurrentPageLabel();this.setTotalLabels()};t.prototype.setCurrentPageLabel=function(){var e=this.paginationProxy.getTotalPages()>0;var t=this.paginationProxy.getCurrentPage();var i=e?t+1:0;this.lbCurrent.innerHTML=this.formatNumber(i)};t.prototype.formatNumber=function(e){var t=this.gridOptionsWrapper.getPaginationNumberFormatterFunc();if(t){return t({value:e})}else{return c._.formatNumberCommas(e)}};t.prototype.getTemplate=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc();var t=e("page","Page");var i=e("to","to");var n=e("of","of");var r=e("first","First");var o=e("previous","Previous");var a=e("next","Next");var s=e("last","Last");return'<div class="ag-paging-panel ag-font-style">\n                <span ref="eSummaryPanel" class="ag-paging-row-summary-panel">\n                    <span ref="lbFirstRowOnPage"></span> '+i+' <span ref="lbLastRowOnPage"></span> '+n+' <span ref="lbRecordCount"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel">\n                    <button type="button" class="ag-paging-button" ref="btFirst">'+r+'</button>\n                    <button type="button" class="ag-paging-button" ref="btPrevious">'+o+"</button>\n                    "+t+' <span ref="lbCurrent"></span> '+n+' <span ref="lbTotal"></span>\n                    <button type="button" class="ag-paging-button" ref="btNext">'+a+'</button>\n                    <button type="button" class="ag-paging-button" ref="btLast">'+s+"</button>\n                </span>\n            </div>"};t.prototype.onBtNext=function(){this.paginationProxy.goToNextPage()};t.prototype.onBtPrevious=function(){this.paginationProxy.goToPreviousPage()};t.prototype.onBtFirst=function(){this.paginationProxy.goToFirstPage()};t.prototype.onBtLast=function(){this.paginationProxy.goToLastPage()};t.prototype.enableOrDisableButtons=function(){var e=this.paginationProxy.getCurrentPage();var t=this.paginationProxy.isLastPageFound();var i=this.paginationProxy.getTotalPages();var n=e===0;this.btPrevious.disabled=n;this.btFirst.disabled=n;var r=this.isZeroPagesToDisplay();var o=t&&e===i-1;var a=o||r;this.btNext.disabled=a;var s=!t||r||e===i-1;this.btLast.disabled=s};t.prototype.updateRowLabels=function(){var e=this.paginationProxy.getCurrentPage();var t=this.paginationProxy.getPageSize();var i=this.paginationProxy.isLastPageFound();var n=this.paginationProxy.isLastPageFound()?this.paginationProxy.getTotalRowCount():null;var r;var o;if(this.isZeroPagesToDisplay()){r=0;o=0}else{r=t*e+1;o=r+t-1;if(i&&o>n){o=n}}this.lbFirstRowOnPage.innerHTML=this.formatNumber(r);this.lbLastRowOnPage.innerHTML=this.formatNumber(o)};t.prototype.isZeroPagesToDisplay=function(){var e=this.paginationProxy.isLastPageFound();var t=this.paginationProxy.getTotalPages();return e&&t===0};t.prototype.setTotalLabels=function(){var e=this.paginationProxy.isLastPageFound();var t=this.paginationProxy.getTotalPages();var i=this.paginationProxy.isLastPageFound()?this.paginationProxy.getTotalRowCount():null;if(e){this.lbTotal.innerHTML=this.formatNumber(t);this.lbRecordCount.innerHTML=this.formatNumber(i)}else{var n=this.gridOptionsWrapper.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=n;this.lbRecordCount.innerHTML=n}};r([s.Autowired("gridOptionsWrapper"),o("design:type",l.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0);r([s.Autowired("eventService"),o("design:type",d.EventService)],t.prototype,"eventService",void 0);r([s.Autowired("paginationProxy"),o("design:type",h.PaginationProxy)],t.prototype,"paginationProxy",void 0);r([s.Autowired("rowRenderer"),o("design:type",p.RowRenderer)],t.prototype,"rowRenderer",void 0);r([u.RefSelector("btFirst"),o("design:type",HTMLButtonElement)],t.prototype,"btFirst",void 0);r([u.RefSelector("btPrevious"),o("design:type",HTMLButtonElement)],t.prototype,"btPrevious",void 0);r([u.RefSelector("btNext"),o("design:type",HTMLButtonElement)],t.prototype,"btNext",void 0);r([u.RefSelector("btLast"),o("design:type",HTMLButtonElement)],t.prototype,"btLast",void 0);r([u.RefSelector("lbRecordCount"),o("design:type",Object)],t.prototype,"lbRecordCount",void 0);r([u.RefSelector("lbFirstRowOnPage"),o("design:type",Object)],t.prototype,"lbFirstRowOnPage",void 0);r([u.RefSelector("lbLastRowOnPage"),o("design:type",Object)],t.prototype,"lbLastRowOnPage",void 0);r([u.RefSelector("eSummaryPanel"),o("design:type",Object)],t.prototype,"eSummaryPanel",void 0);r([u.RefSelector("lbCurrent"),o("design:type",Object)],t.prototype,"lbCurrent",void 0);r([u.RefSelector("lbTotal"),o("design:type",Object)],t.prototype,"lbTotal",void 0);r([s.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"postConstruct",null);return t}(a.Component);t.PaginationComp=g},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(62);var r=i(85);var o=false;function a(){console.warn("ag-grid: initialiseAgGridWithWebComponents is deprecated. Please use the ag-grid-webcomponent dependency instead. ");if(o){return}o=true;if(typeof document==="undefined"||!document.registerElement){console.error("ag-Grid: unable to find document.registerElement() function, unable to initialise ag-Grid as a Web Component")}var e=Object.create(HTMLElement.prototype);n.ComponentUtil.ALL_PROPERTIES.forEach((function(t){Object.defineProperty(e,t,{set:function(e){this.__agGridSetProperty(t,e)},get:function(){return this.__agGridGetProperty(t)},enumerable:true,configurable:true})}));var t=e;t.__agGridSetProperty=function(e,t){if(!this.__attributes){this.__attributes={}}this.__attributes[e]=t;var i={};i[e]={currentValue:t};this.onChange(i)};t.onChange=function(e){if(this._initialised){n.ComponentUtil.processOnChange(e,this._gridOptions,this.api,this.columnApi)}};t.__agGridGetProperty=function(e){if(!this.__attributes){this.__attributes={}}return this.__attributes[e]};t.setGridOptions=function(e){var t=this.globalEventListener.bind(this);this._gridOptions=n.ComponentUtil.copyAttributesToGridOptions(e,this);var i={globalEventListener:t};this._agGrid=new r.Grid(this,this._gridOptions,i);this.api=e.api;this.columnApi=e.columnApi;this._initialised=true};t.createdCallback=function(){for(var e=0;e<this.attributes.length;e++){var t=this.attributes[e];this.setPropertyFromAttribute(t)}};t.setPropertyFromAttribute=function(e){var t=s(e.nodeName);var i=e.nodeValue;if(n.ComponentUtil.ALL_PROPERTIES.indexOf(t)>=0){this[t]=i}};t.attachedCallback=function(e){};t.detachedCallback=function(e){};t.attributeChangedCallback=function(e){var t=this.attributes[e];this.setPropertyFromAttribute(t)};t.globalEventListener=function(e,t){var i=e.toLowerCase();var n=new Event(i);var r=n;r.agGridDetails=t;this.dispatchEvent(n);var o="on"+i;if(typeof this[o]==="function"){this[o](n)}};document.registerElement("ag-grid",{prototype:e})}t.initialiseAgGridWithWebComponents=a;function s(e){if(typeof e==="string"){var t=e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}));return t}else{return e}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(1);var r=function(){function e(t){var i=this;this.items=[];this.params=t;this.eGui=document.createElement("div");this.eGui.innerHTML=e.TEMPLATE;this.eHeader=this.eGui.querySelector('[ref="tabHeader"]');this.eBody=this.eGui.querySelector('[ref="tabBody"]');n.Utils.addCssClass(this.eGui,t.cssClass);if(t.items){t.items.forEach((function(e){return i.addItem(e)}))}}e.prototype.setAfterAttachedParams=function(e){this.afterAttachedParams=e};e.prototype.getMinWidth=function(){var e=document.createElement("span");e.style.position="fixed";this.eGui.appendChild(e);var t=0;this.items.forEach((function(i){n.Utils.removeAllChildren(e);var r=i.tabbedItem.bodyPromise.resolveNow(null,(function(e){return e.cloneNode(true)}));if(r==null){return}e.appendChild(r);if(t<e.offsetWidth){t=e.offsetWidth}}));this.eGui.removeChild(e);return t};e.prototype.showFirstItem=function(){if(this.items.length>0){this.showItemWrapper(this.items[0])}};e.prototype.addItem=function(e){var t=document.createElement("span");t.appendChild(e.title);n.Utils.addCssClass(t,"ag-tab");this.eHeader.appendChild(t);var i={tabbedItem:e,eHeaderButton:t};this.items.push(i);t.addEventListener("click",this.showItemWrapper.bind(this,i))};e.prototype.showItem=function(e){var t=n.Utils.find(this.items,(function(t){return t.tabbedItem===e}));if(t){this.showItemWrapper(t)}};e.prototype.showItemWrapper=function(e){var t=this;if(this.params.onItemClicked){this.params.onItemClicked({item:e.tabbedItem})}if(this.activeItem===e){n.Utils.callIfPresent(this.params.onActiveItemClicked);return}n.Utils.removeAllChildren(this.eBody);e.tabbedItem.bodyPromise.then((function(e){t.eBody.appendChild(e)}));if(this.activeItem){n.Utils.removeCssClass(this.activeItem.eHeaderButton,"ag-tab-selected")}n.Utils.addCssClass(e.eHeaderButton,"ag-tab-selected");this.activeItem=e;if(e.tabbedItem.afterAttachedCallback){e.tabbedItem.afterAttachedCallback(this.afterAttachedParams)}};e.prototype.getGui=function(){return this.eGui};e.TEMPLATE="<div>"+'<div ref="tabHeader" class="ag-tab-header"></div>'+'<div ref="tabBody" class="ag-tab-body"></div>'+"</div>";return e}();t.TabbedLayout=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(){this.isLayoutPanel=true;this.childPanels=[];this.eGui=document.createElement("div");this.eGui.style.height="100%"}e.prototype.addPanel=function(e,t){var i;if(e.isLayoutPanel){this.childPanels.push(e);i=e.getGui()}else{i=e}if(t){i.style.height=t}this.eGui.appendChild(i)};e.prototype.getGui=function(){return this.eGui};e.prototype.doLayout=function(){for(var e=0;e<this.childPanels.length;e++){this.childPanels[e].doLayout()}};return e}();t.VerticalStack=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(1);function r(e){return new n.Promise((function(t){var i=new XMLHttpRequest;i.open("GET",e.url);i.send();i.onreadystatechange=function(){if(i.readyState==4&&i.status==200){var e=JSON.parse(i.responseText);t(e)}}}))}t.simpleHttpRequest=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(1);function r(e,t,i,r,o){if(o===void 0){o=false}console.warn("ag-Grid: Since ag-grid 11.0.0 defaultGroupComparator is not necessary. You can remove this from your colDef");var a=n.Utils.exists(i)&&i.group;var s=n.Utils.exists(r)&&r.group;var l=a&&s;var u=!a&&!s;if(l){return n.Utils.defaultComparator(i.key,r.key,o)}else if(u){return n.Utils.defaultComparator(e,t,o)}else if(a){return 1}else{return-1}}t.defaultGroupComparator=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(){}e.prototype.wrap=function(e,t,i,n){var r=this;var o=this.createWrapper(e,n);t.forEach((function(e){r.createMethod(o,e,true)}));if(i){i.forEach((function(e){r.createMethod(o,e,false)}))}return o};e.prototype.createMethod=function(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))};e.prototype.createMethodProxy=function(e,t,i){return function(){if(e.hasMethod(t)){return e.callMethod(t,arguments)}if(i){console.warn("ag-Grid: Framework component is missing the method "+t+"()")}return null}};return e}();t.BaseComponentWrapper=n}])}));(function(){var e=function(t){var i={};_.each(t,(function(t,n){if(_.isPlainObject(t)){_.each(e(t),(function(e,t){i[n+"."+t]=e}))}else{i[n]=t}}));return i};$.i18n.load(e(window.I18n));window.t=function(){return $.i18n._.apply($.i18n,Array.prototype.slice.call(arguments))}})();AGN=window.AGN||(window.AGN={});AGN.Lib=window.AGN.Lib||(window.AGN.Lib={});AGN.Lib.WM=window.AGN.Lib.WM||(window.AGN.Lib.WM={});AGN.Opt=window.AGN.Opt||(window.AGN.Opt={});AGN.Opt.Fields=window.AGN.Opt.Fields||(window.AGN.Opt.Fields={});AGN.Opt.Forms=window.AGN.Opt.Forms||(window.AGN.Opt.Forms={});AGN.Opt.Controllers=window.AGN.Opt.Controllers||(window.AGN.Opt.Controllers={});AGN.Opt.Templates=window.AGN.Opt.Templates||(window.AGN.Opt.Templates={});AGN.Opt.TableCellRenderers=window.AGN.Opt.TableCellRenderers||(window.AGN.Opt.TableCellRenderers={});AGN.Opt.Table=window.AGN.Opt.Table||(window.AGN.Opt.Table={comparators:{}});AGN.Opt.TableHeaderComponents=window.AGN.Opt.TableHeaderComponents||(window.AGN.Opt.TableHeaderComponents={});AGN.Opt.Charts=window.AGN.Opt.Charts||(window.AGN.Opt.Charts={});AGN.Opt.Validators=window.AGN.Opt.Validators||(window.AGN.Opt.Validators={});AGN.Opt.Components=window.AGN.Opt.Components||(window.AGN.Opt.Components={});AGN.url=function(e,t){if(window.agnResolveRelativeUrl){if(e&&e.charAt(0)==="/"){e=e.substring(1)}return window.agnResolveRelativeUrl(e,t)}else{console.error("window.agnResolveRelativeUrl is not defined");return e}};AGN.isIE=/MSIE|Trident/.test(window.navigator.userAgent);AGN.runAll=function(e){AGN.Lib.CoreInitializer.autorun(e);AGN.Lib.DomInitializer.autorun(e)};(function(){if(!Array.prototype.find){Object.defineProperty(Array.prototype,"find",{value:function(e){"use strict";if(this==null){throw new TypeError("Array.prototype.find called on null or undefined")}if(typeof e!=="function"){throw new TypeError("predicate must be a function")}var t=Object(this);var i=t.length>>>0;var n=arguments[1];var r;for(var o=0;o<i;o++){r=t[o];if(e.call(n,r,o,t)){return r}}return undefined}})}if(!Array.prototype.findIndex){Object.defineProperty(Array.prototype,"findIndex",{value:function(e){"use strict";if(this==null){throw new TypeError("Array.prototype.findIndex called on null or undefined")}if(typeof e!=="function"){throw new TypeError("predicate must be a function")}var t=Object(this);var i=t.length>>>0;var n=arguments[1];var r;for(var o=0;o<i;o++){r=t[o];if(e.call(n,r,o,t)){return o}}return-1},enumerable:false,configurable:false,writable:false})}if(!Array.prototype.includes){Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(this==null){throw new TypeError('"this" is null or not defined')}var i=Object(this);var n=i.length>>>0;if(n===0){return false}var r=t|0;var o=Math.max(r>=0?r:n-Math.abs(r),0);function a(e,t){return e===t||typeof e==="number"&&typeof t==="number"&&isNaN(e)&&isNaN(t)}while(o<n){if(a(i[o],e)){return true}o++}return false}})}})();(function(){var e=$.ui.dialog.prototype._allowInteraction;$.ui.dialog.prototype._allowInteraction=function(t){var i=$(t.target);if(i.closest(".cke_dialog").length||i.closest(".cke_panel_frame").length){return true}return e.apply(this,arguments)}})();if(Function.prototype.bind&&window.console&&typeof console.log=="object"){["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach((function(e){console[e]=this.bind(console[e],console)}),Function.prototype.call)}(function(e,t){if(typeof exports=="object"){module.exports=t(e)}else if(typeof define=="function"&&define.amd){define([],t.bind(e,e))}else{t(e)}})(typeof global!="undefined"?global:this,(function(e){if(e.CSS&&e.CSS.escape){return e.CSS.escape}var t=function(e){if(arguments.length==0){throw new TypeError("`CSS.escape` requires an argument.")}var t=String(e);var i=t.length;var n=-1;var r;var o="";var a=t.charCodeAt(0);while(++n<i){r=t.charCodeAt(n);if(r==0){o+="�";continue}if(r>=1&&r<=31||r==127||n==0&&r>=48&&r<=57||n==1&&r>=48&&r<=57&&a==45){o+="\\"+r.toString(16)+" ";continue}if(n==0&&i==1&&r==45){o+="\\"+t.charAt(n);continue}if(r>=128||r==45||r==95||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122){o+=t.charAt(n);continue}o+="\\"+t.charAt(n)}return o};if(!e.CSS){e.CSS={}}e.CSS.escape=t;return t}));(function(e){e.fn.modal.Constructor.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keydown.dismiss.bs.modal",e.proxy((function(t){setTimeout(e.proxy((function(){t.which==27&&this.hide()}),this),100)}),this))}else if(!this.isShown){this.$element.off("keydown.dismiss.bs.modal")}}})(jQuery);(function(){jQuery.browser=e().browser;function e(){var e=navigator.userAgent.toLowerCase();var t=/(msie) ([\w.]+)/;var i=/(webkit)[ \/]([\w.]+)/;var n=/(opera)(?:.*version)?[ \/]([\w.]+)/;var r=/(mozilla)(?:.*? rv:([\w.]+))?/;var o=i.exec(e)||n.exec(e)||t.exec(e)||e.indexOf("compatible")<0&&r.exec(e)||[];return{browser:o[1]||"",version:o[2]||"0"}}})(jQuery);(function(e){e.extend(true,e.fn.dirty.prototype,{checkValues:function(t){var i=this;var n=false;this.form.find("select").each((function(t,r){var o=e(r);var a=i.isSelectFieldDirty(o);o.data(i.statuses.dataIsDirty,a);n|=a}));this.form.find("input, textarea").each((function(t,r){var o=i.isRadioOrCheckbox(r);var a=i.isFileInput(r);var s=e(r);var l;if(o){l=i.isCheckboxDirty(s)}else if(a){l=i.isFileInputDirty(s)}else{if(!s.is(".select2-input[placeholder]")){l=i.isFieldDirty(s)}}s.data(i.statuses.dataIsDirty,l);n|=l}));if(n){i.setDirty()}else{i.setClean()}},saveInitialValues:function(){var t=this;this.form.find("input, select, textarea").each((function(i,n){var r=e(n);if(r.attr("id")||r.attr("name")){r.attr("id",r.prop("tagName"+"__"+i))}var o=t.isRadioOrCheckbox(n);var a=t.isFileInput(n);if(o){var s=e(n).is(":checked")?"checked":"unchecked";r.data(t.statuses.dataInitialValue,s)}else if(a){r.data(t.statuses.dataInitialValue,JSON.stringify(n.files))}else{r.data(t.statuses.dataInitialValue,r.val()||"")}}))},backupData:function(){var t=this;var i={};t.form.find("input, select, textarea").each((function(n,r){var o=e(r);var a=o.attr("id")||o.attr("name");var s={};s[t.statuses.dataInitialValue]=o.data(t.statuses.dataInitialValue);s[t.statuses.dataIsDirty]=o.data(t.statuses.dataIsDirty);i[a]=s}));return i},restoreData:function(t){var i=this;if(t){i.form.find("input, select, textarea").each((function(n,r){var o=e(r);var a=o.attr("id")||o.attr("name");var s=t[a];if(s){o.data(i.statuses.dataInitialValue,s[i.statuses.dataInitialValue]);o.data(i.statuses.dataIsDirty,s[i.statuses.dataIsDirty])}}))}i.checkValues()},isSelectFieldDirty:function(e){var t=this;var i=e.data(t.statuses.dataInitialValue)||"";var n=e.val()||"";return!_.isEqual(n,i)},resetForm:function(){var t=this;this.form.find("select").each((function(i,n){var r=e(n);var o=r.data(t.statuses.dataInitialValue);if(r.data("select2")){r.select2("val",o)}else{r.val(o)}}));this.form.find("input, textarea").each((function(i,n){var r=e(n);var o=t.isRadioOrCheckbox(n);var a=t.isFileInput(n);if(o){var s=r.data(t.statuses.dataInitialValue);var l=s==="checked";r.prop("checked",l)}if(a){n.value="";e(n).data(t.statuses.dataInitialValue,JSON.stringify(n.files))}else{var u=r.data(t.statuses.dataInitialValue);r.val(u)}}));this.checkValues()}})})(jQuery);(function(e){if(e.fn.all){console.error("$.fn.all is already defined")}else{e.fn.extend({all:function(e){return this.filter(e).add(this.find(e))}})}if(e.fn.exists){console.error("$.fn.exists is already defined")}else{e.fn.extend({exists:function(){return this.length>0}})}if(e.fn.json){console.error("$.fn.json is already defined")}else{e.fn.extend({json:function(){return JSON.parse(this.html())}})}e.expr[":"].truncated=function(e){return e.scrollWidth-e.clientWidth>1||e.scrollHeight-e.clientHeight>2};e.expr[":"].truncatedAlt=function(e){const t=e.cloneNode(true);t.style.width="auto";t.style.height="auto";t.style.position="fixed";t.style.overflow="visible";t.style.whiteSpace="nowrap";t.style.visibility="hidden";e.parentElement.appendChild(t);try{const i=t.getBoundingClientRect().width;const n=e.getBoundingClientRect().width;return i>n}finally{t.remove()}}})(jQuery);(function(e){e.fn.extend({ensureLoad:function(t){return this.each((function(){if(this.complete){t.call(this)}else{e(this).on("load",t)}}))}})})(jQuery);$.extend(true,$.inputmask.defaults.aliases,{datetime:{regex:{quartspre:new RegExp("0|1|3|4"),quartspost:new RegExp("00|15|30|45"),halfspre:new RegExp("0|3"),halfspost:new RegExp("00|30")},definitions:{q:{validator:function(e,t,i,n,r){var o=r.regex.quartspost.test(e);if(!n&&!o){if(r.regex.quartspost.test(e[0]+"5")){return{c:"5"}}else{return{c:"0"}}}return true},cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){var o=r.regex.quartspre.test(e);o=false;if(!n&&!o){var a=parseInt(e+"0"),s=["00","15","30","45"],l=100,u,c;for(var d=0;d<s.length;d++){var f=s[d];parsedNum=parseInt(f);if(Math.abs(parsedNum-a)<l){l=Math.abs(parsedNum-a);u=f}}c={caret:i+2,insert:[{pos:i,c:u[0]},{pos:i+1,c:u[1]}]};return c}return true},cardinality:1}]},u:{validator:function(e,t,i,n,r){var o=r.regex.halfspost.test(e);if(!n&&!o){return{c:"0"}}return true},cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){var o=r.regex.halfspre.test(e);o=false;if(!n&&!o){var a=parseInt(e+"0"),s=["00","30"],l=100,u,c;for(var d=0;d<s.length;d++){var f=s[d];parsedNum=parseInt(f);if(Math.abs(parsedNum-a)<l){l=Math.abs(parsedNum-a);u=f}}c={caret:i+2,insert:[{pos:i,c:u[0]},{pos:i+1,c:u[1]}]};return c}return true},cardinality:1}]}}},"h:quarts t":{mask:"h:q t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:quarts":{mask:"h:q",placeholder:"hh:mm",alias:"datetime",hourFormat:"24"},"h:halfs t":{mask:"h:u t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:halfs":{mask:"h:u",placeholder:"hh:mm",alias:"datetime",hourFormat:"24"},"h:00 t":{mask:"h:00 t\\m",placeholder:"hh:00 xm",alias:"datetime",hourFormat:"12"},"h:00":{mask:"h:00",placeholder:"hh:00",alias:"datetime",hourFormat:"24"}});$.fn.serializeObject=function(){var e={};$.each(this.serializeArray(),(function(){if(e[this.name]){if(!e[this.name].push){e[this.name]=[e[this.name]]}e[this.name].push(this.value||"")}else{e[this.name]=this.value||""}}));return e};$.fn.serializeFormDataObject=function(){var e=this.serializeObject();this.find("input[type=file]").each((function(){if(!$(this).is(":disabled")&&this.name){var t=this.files;if(t.length==0){t=[new File([],"",{type:"application/octet-stream"})]}if(e[this.name]){var i=e[this.name];if($.isArray(i)){e[this.name]=i.concat(t)}else{e[this.name]=[i].concat(t)}}else{if(t.length>1){e[this.name]=t}else{e[this.name]=t[0]}}}}));return e};(function(e){if(e.fn.style){console.error("$.fn.style is already defined")}else{e.fn.extend({style:function(t,i,n){if(i===undefined){return this.css(t)}if(e.isFunction(i)){this.each((function(){if(this.style){var e=i.call(this,this.style.getPropertyValue(t));this.style.setProperty(t,e,n)}}))}else{this.each((function(){if(this.style){this.style.setProperty(t,i,n)}}))}}})}})(jQuery);(function(e){if(String.prototype.trim){e.trim=function(e){return e==null?"":(e+"").trim()}}})(jQuery);$.widget("ui.dialog",$.extend({},$.ui.dialog.prototype,{_title:function(e){if(!this.options.title){e.html("&#160;")}e.html(this.options.title)}}));AGN.Opt.Components.JsPlumbFixedBezierConnector=function(e){var t=jsPlumb.Connectors.AbstractConnector.apply(this,arguments);this.type="FixedBezierConnector";this._compute=function(e){var i=e.anchorOrientation==="opposite"?2:1.5;t.addSegment(this,"Bezier",{x1:e.tx,y1:e.ty,x2:e.sx,y2:e.sy,cp1x:e.tx+e.to[0]*e.w/i,cp1y:e.ty+e.to[1]*e.h/i,cp2x:e.sx+e.so[0]*e.w/i,cp2y:e.sy+e.so[1]*e.h/i})}};_.templateSettings={evaluate:/\{\{(.+?)\}\}/g,interpolate:/\{\{=(.+?)\}\}/g,escape:/\{\{-(.+?)\}\}/g};jQuery.extend(jQuery.fn.pickadate.defaults,{monthsFull:t("date.monthsFull"),monthsShort:t("date.monthsShort"),weekdaysFull:t("date.weekdaysFull"),weekdaysShort:t("date.weekdaysShort"),labelMonthNext:t("date.nextMonth"),labelMonthPrev:t("date.prevMonth"),labelMonthSelect:t("date.selectMonth"),labelYearSelect:t("date.selectYear"),today:t("defaults.today"),clear:t("defaults.delete"),close:t("defaults.close"),firstDay:t("date.firstDayOfWeek"),format:t("date.format"),hiddenName:true});jQuery.extend(jQuery.fn.pickatime.defaults,{clear:t("defaults.delete"),format:t("time.format"),hiddenName:true});window.onpopstate=function(){window.location.reload()};jQuery.extend($.fn.select2.defaults,{formatNoMatches:function(e){return t("selects.noMatches",e)},formatInputTooShort:function(e,i){return t("selects.errors.inputTooShort",i)},formatInputTooLong:function(e,i){return t("selects.errors.inputTooLong",i)},formatSelectionTooBig:function(e){return t("selects.errors.selectionTooBig",e)},formatLoadMore:function(e){return t("selects.loadMore")},formatSearching:function(){return t("selects.loadMore")},formatAjaxError:function(){return t("selects.errors.ajax")},formatMatches:function(e){if(e>1){return t("selects.matches",e)}else{return t("selects.matchesSing",e)}}});(function(){if(!String.prototype.startsWith){String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e}}if(!String.prototype.endsWith){String.prototype.endsWith=function(e,t){if(t===undefined||t>this.length){t=this.length}return this.substring(t-e.length,t)===e}}if(!String.prototype.includes){String.prototype.includes=function(e,t){"use strict";if(typeof t!=="number"){t=0}if(t+e.length>this.length){return false}else{return this.indexOf(e,t)!==-1}}}})();!function(e,t){"function"==typeof define&&define.amd?define([],(function(){return e.svg4everybody=t()})):"object"==typeof exports?module.exports=t():e.svg4everybody=t()}(this,(function(){function e(e,t){if(t){var i=!e.getAttribute("viewBox")&&t.getAttribute("viewBox"),n=document.createDocumentFragment(),r=t.cloneNode(!0);for(i&&e.setAttribute("viewBox",i);r.childNodes.length;){n.appendChild(r.firstChild)}e.appendChild(n)}}function t(t){t.onreadystatechange=function(){if(4===t.readyState){var i=document.createElement("x");i.innerHTML=t.responseText,t.s.splice(0).map((function(t){e(t[0],i.querySelector("#"+t[1].replace(/(\W)/g,"\\$1")))}))}},t.onreadystatechange()}function i(i){function n(){for(var i;i=r[0];){var u=i.parentNode;if(u&&/svg/i.test(u.nodeName)){var c=i.getAttribute("xlink:href");if(o&&(!a||a(c,u,i))){var d=c.split("#"),f=d[0],p=d[1];if(u.removeChild(i),f.length){var h=l[f]=l[f]||new XMLHttpRequest;h.s||(h.s=[],h.open("GET",f),h.send()),h.s.push([u,p]),t(h)}else{e(u,document.getElementById(p))}}}}s(n,17)}i=i||{};var r=document.getElementsByTagName("use"),o="polyfill"in i?i.polyfill:/\bEdge\/12\b|\bTrident\/[567]\b|\bVersion\/7.0 Safari\b/.test(navigator.userAgent)||(navigator.userAgent.match(/AppleWebKit\/(\d+)/)||[])[1]<537,a=i.validate,s=window.requestAnimationFrame||setTimeout,l={};o&&n()}return i}));AGN.Opt.Templates["modal"]='<div class="modal">   <div class="modal-dialog {{= modalClass }}">     <div class="modal-content">       <div class="modal-header">         <button type="button" class="close-icon close" data-dismiss="modal">           <i aria-hidden="true" class="icon icon-times-circle"></i>         </button>         <h4 class="modal-title">{{= title }}</h4>       </div>       <div class="modal-body">         {{= content }}       </div>     </div>   </div> </div>';AGN.Opt.Templates["csrf-error"]='    <div class="backdrop backdrop-error js-close-error" style="position: fixed; top: 0; left: 0; bottom: 0; right:0; z-index: 1100; background-color: rgba(0,0,0,0.5)">        <div class="notification notification-alert" style="position: fixed; top: 50%; left: 50%; width: 420px; margin: -80px 0 0 -210px; z-index: 1101;">            <div class="notification-header">                <p class="headline">                    <i class="icon icon-state-alert"></i>                    <span class="text">{{= headline }}</span>                    <i class="icon icon-times-circle close-icon js-close-error"></i>                </p>            </div>            <div class="notification-content">                <p>{{= content }}</p>                <a href="#" class="btn btn-regular btn-primary vspace-top-10" onclick="location.reload();">                    <i class="icon icon-repeat"></i>                    <span class="text">{{= reload }}</span>                </a>            </div>        </div>    </div>';AGN.Opt.Templates["modal-yes-no-cancel"]='<div class="modal">   <div class="modal-dialog">     <div class="modal-content">       <form action="{{= action }}" method="{{= method }}">         <div class="modal-header">           <button type="button" class="close-icon close" data-dismiss="modal">             <i aria-hidden="true" class="icon icon-times-circle"></i>           </button>           <h4 class="modal-title">{{= title }}</h4>         </div>         <div class="modal-body">           {{= content }}         </div>         <div class="modal-footer">           <div class="btn-group">             <button type="button" class="btn btn-default btn-large js-confirm-negative" data-dismiss="modal">               <i class="icon icon-times"></i>               <span class="text">{{= t(\'defaults.no\') }}</span>             </button>             <button type="button" class="btn btn-primary btn-large js-confirm-positive" data-dismiss="modal">               <i class="icon icon-check"></i>               <span class="text">{{= t(\'defaults.yes\') }}</span>             </button>           </div>         </div>       </form>     </div>   </div> </div>';AGN.Opt.Templates["modal-yes-no-cancel-save-choice"]='<div class="modal">   <div class="modal-dialog {{= modalClass }}">     <div class="modal-content">       <div class="modal-header">         <button type="button" class="close-icon close" data-dismiss="modal">           <i aria-hidden="true" class="icon icon-times-circle"></i>         </button>         <h4 class="modal-title">{{= title }}</h4>       </div>       <div class="modal-body">         <div class="form-group">           <div class="col-sm-12">           {{= content }}           </div>         </div>         <div class="form-group">           <div class="col-sm-8">             <label class="control-label-left">               {{ if(!choiceContent) { }}                 {{= t(\'defaults.remember.choice\') }}               {{ } else { }}                 {{= choiceContent }}               {{ } }}             </label>           </div>           <div class="col-sm-4">             <label class="toggle">               <input type="checkbox" name="confirm-save-choice">               <div class="toggle-control"></div>             </label>           </div>         </div>       </div>       <div class="modal-footer">         <div class="btn-group">           <button type="button" class="btn btn-default btn-large pull-left" data-confirm-negative="cancel" data-dismiss="modal">             <i class="icon icon-times"></i>             <span class="text">{{= t(\'defaults.cancel\') }}</span>           </button>           <button type="button" class="btn btn-default btn-large" data-confirm-negative="no" data-dismiss="modal">             <i class="icon icon-times"></i>             <span class="text">{{= t(\'defaults.no\') }}</span>           </button>           <button type="button" class="btn btn-primary btn-large" data-confirm-positive="yes" data-dismiss="modal">             <i class="icon icon-check"></i>             <span class="text">{{= t(\'defaults.yes\') }}</span>           </button>         </div>       </div>     </div>   </div> </div>';AGN.Opt.Templates["error"]='<div class="backdrop backdrop-error js-close-error overlay-box">     <div class="notification notification-alert overlay-content">         <div class="notification-header">             <p class="headline">                 <i class="icon icon-state-alert"></i>                 <span class="text">{{= headline }}</span>                 <i class="icon icon-times-circle close-icon js-close-error"></i>             </p>         </div>         <div class="notification-content">             <p>{{= text }}</p>             <button type="button" class="btn btn-regular btn-primary vspace-top-10" onclick="location.reload();">                 <i class="icon icon-repeat"></i>                 <span class="text">{{= reload }}</span>             </button>         </div>     </div> </div>';AGN.Opt.Templates["permission-denied"]='<div class="backdrop backdrop-error js-close-error overlay-box">     <div class="notification notification-alert overlay-content">         <div class="notification-header">             <p class="headline">                 <i class="icon icon-state-alert"></i>                 <span class="text">{{= title }}</span>                 <i class="icon icon-times-circle close-icon js-close-error"></i>             </p>         </div>         <div class="notification-content">             <p>{{= text }}</p>             <button type="button" class="btn btn-regular btn-primary vspace-top-10 vspace-bottom-10 js-close-error" style="float: right">                 <i class="icon icon-check"></i>                 <span class="text">{{= btn }}</span>             </button>         </div>     </div> </div>';AGN.Opt.Templates["autosave-restore"]='<div class="modal">   <div class="modal-dialog {{= modalClass }}">     <div class="modal-content">       <div class="modal-header">         <button type="button" class="close-icon close" data-dismiss="modal">           <i aria-hidden="true" class="icon icon-times-circle"></i>         </button>         <h4 class="modal-title">{{= title }}</h4>       </div>       <div class="modal-body">         {{= content }}       </div>       <div class="modal-footer">         <div class="btn-group">           <button type="button" class="btn btn-default btn-large js-confirm-negative" data-dismiss="modal">             <i class="icon icon-times"></i>             <span class="text">{{= negative }}</span>           </button>           <button type="button" class="btn btn-primary btn-large js-confirm-positive" data-dismiss="modal">             <i class="icon icon-check"></i>             <span class="text">{{= positive }}</span>           </button>         </div>       </div>     </div>   </div> </div>';AGN.Opt.Templates["tooltip-template"]='<div class="tooltip {{= tooltipStyle }}" role="tooltip">   <div class="tooltip-arrow {{= arrowStyle }}"></div>   <div class="tooltip-inner {{= innerStyle }}"></div> </div>';AGN.Opt.Templates["tooltip-message-with-title"]='<div class="helper-popup-header">{{= title }}</div> <div class="helper-popup-content">{{= content }}</div>';AGN.Opt.Templates["tooltip-message-just-content"]='<div class="helper-popup-content">{{= content }}</div>';AGN.Opt.Templates["table-controls-top"]='{{ if (showRecordsCount || pagination) { }} <div class="table-controls clearfix">   {{ if (showRecordsCount) { }}   <div class="table-control pull-left">     <div class="well">{{= t(\'tables.range\', itemStart, itemEnd, itemTotal) }}</div>   </div>   {{ } }}  <div class="table-control pull-left" id="filtersDescription"></div>   {{ if (pagination) { }}   <div class="table-control pull-right">     <ul class="pagination">       <li class="js-data-table-first-page {{= currentPage == 1 ? \'disabled\' : \'\' }}">         <span><i class="icon icon-angle-double-left"></i> {{= t(\'tables.first\') }}</span>       </li>       <li class="js-data-table-prev-page {{= currentPage == 1 ? \'disabled\' : \'\' }}">         <span><i class="icon icon-angle-left"></i> {{= t(\'tables.previous\') }}</span>       </li>       {{ _.each(pageSelects, function(page) { }}       <li class="{{= page == currentPage ? \'active\' : \'js-data-table-page\' }}" data-page="{{= page - 1 }}">         <span>{{= page }}</span>       </li>       {{ }) }}       <li class="js-data-table-next-page {{= currentPage == totalPages ? \'disabled\' : \'\' }}">         <span>{{= t(\'tables.next\') }} <i class="icon icon-angle-right"></i></span>       </li>       <li class="js-data-table-last-page {{= currentPage == totalPages ? \'disabled\' : \'\' }}">         <span>{{= t(\'tables.last\') }} <i class="icon icon-angle-double-right"></i></span>       </li>     </ul>   </div>   {{ } }}  </div>{{ } }}';AGN.Opt.Templates["table-controls-bottom"]="<div class=\"table-controls clearfix\">   {{ if (showRecordsCount) { }}   <div class=\"table-control pull-left\">     <div class=\"well\">{{= t('tables.range', itemStart, itemEnd, itemTotal) }}</div>   </div>   {{ } }}   {{ if (pagination) { }}   <div class=\"table-control pull-right\">     <ul class=\"pagination\">       <li class=\"js-data-table-first-page {{= currentPage == 1 ? 'disabled' : '' }}\">         <span><i class=\"icon icon-angle-double-left\"></i> {{= t('tables.first') }}</span>       </li>       <li class=\"js-data-table-prev-page {{= currentPage == 1 ? 'disabled' : '' }}\">         <span><i class=\"icon icon-angle-left\"></i> {{= t('tables.previous') }}</span>       </li>       {{ _.each(pageSelects, function(page) { }}        <li class=\"{{= page == currentPage ? 'active' : 'js-data-table-page' }}\" data-page=\"{{= page - 1 }}\">         <span>{{= page }}</span>       </li>       {{ }) }}       <li class=\"js-data-table-next-page {{= currentPage == totalPages ? 'disabled' : '' }}\">         <span>{{= t('tables.next') }} <i class=\"icon icon-angle-right\"></i></span>       </li>       <li class=\"js-data-table-last-page {{= currentPage == totalPages ? 'disabled' : '' }}\">         <span>{{= t('tables.last') }} <i class=\"icon icon-angle-double-right\"></i></span>       </li>     </ul>   </div>   {{ } }} </div>";AGN.Opt.Templates["session-expired"]='<div class="backdrop backdrop-warning overlay-box" id="session-expired-overlay">     <div class="notification notification-warning overlay-content">         <div class="notification-header">             <p class="headline">                 <i class="icon icon-state-alert"></i>                 <span class="text">{{= t(\'logon.session.expired\') }}</span>             </p>         </div>         <div class="notification-content">             <div class="form-group">               {{= t(\'logon.session.notification\') }}             </div>            <div class="form-group">               <a href="{{= AGN.url("/logonOld.action", true) }}">                 {{= t(\'defaults.relogin\') }}               </a>             </div>        </div>     </div> </div>';AGN.Opt.Templates["datetime-picker"]='<div class="row">  <div class="col-sm-8">     <div class="input-group">       <div class="input-group-controls">         <input type="text" id="{{- property }}_date" class="form-control datepicker-input js-datepicker" {{- extraAttrs }}           data-value="{{- date}}" data-datepicker-options="format: {{- dateFormat}}"/>       </div>       <div class="input-group-btn">         <button type="button" class="btn btn-regular btn-toggle js-open-datepicker" tabindex="-1">           <i class="icon icon-calendar-o"></i>         </button>       </div>     </div>   </div>   <div class="col-sm-4">     <div class="input-group">       <div class="input-group-controls">         <input type="text" id="{{- property }}_time" class="form-control js-timepicker" value="{{- time}}" {{- extraAttrs }}              data-timepicker-options="mask: \'h:s\'"/>       </div>       <div class="input-group-addon">         <span class="addon"><i class="icon icon-clock-o"></i></span>       </div>     </div>   </div> </div>';AGN.Opt.Templates["trackablelink-extension-table-row"]='<tr data-extension-row="{{- index}}">     <td>         <input type="text" class="form-control" data-extension-name value="{{- name}}"/>     </td>     <td>         <input type="text" class="form-control" data-extension-value value="{{- value}}"/>     </td>     <td class="table-actions">         {{ if (name == "" && value == "") { }}             <a href="#" class="btn btn-regular btn-primary" data-extension-add id="newExtensionBtn">                 <i class="icon icon-plus"></i>             </a>         {{ } else { }}             <a href="#" class="btn btn-regular btn-alert" data-extension-delete>                 <i class="icon icon-trash-o"></i>             </a>         {{ } }}     </td> </tr>';AGN.Opt.Templates["mailing-param-row"]='  <tr data-param-row="{{- index}}">       <td>           <input type="text" value="{{- name}}" data-param-name class="form-control" data-action="param-enterdown" {{ isChangeable ? print("") : print("readonly") }} />       </td>       <td>           <input type="text" value="{{- value}}" data-param-value class="form-control" data-action="param-enterdown" {{ isChangeable ? print("") : print("readonly") }} />       </td>       <td>           <input type="text" value="{{- description}}" data-param-description class="form-control" data-action="param-enterdown" {{ isChangeable ? print("") : print("readonly") }} />       </td>       {{ if (isChangeable) { }}       <td class="table-actions">         {{ if (name == "" && value == "") { }}             <a href="#" class="btn btn-regular btn-primary" data-action="add-param-row" id="newParamBtn">                 <i class="icon icon-plus"></i>             </a>         {{ } else { }}             <a href="#" class="btn btn-regular btn-alert" data-action="delete-param-row">                 <i class="icon icon-trash-o"></i>             </a>         {{ } }}       </td>       {{ } }}   </tr>';AGN.Opt.Templates["mailing-reference-content-item"]='   <div class="form-group">       <div class="col-sm-4">           <label class="control-label" for="input-{{- name }}">{{- name }}</label>       </div>       <div class="col-sm-8">           <div class="input-group-controls">               <input type="text" class="form-control" name="referenceContentSettings.items" value="{{- value }}" {{ disable ? print("disabled") : print("")}} id="input-{{- name }}"/>           </div>           <div class="input-group-btn">               <button type="button" class="btn btn-regular btn-alert" {{ disable ? print("disabled") : print("")}}                       data-action="delete-reference-content-item">                   <i class="icon icon-trash-o"></i>               </button>           </div>       </div>   </div>';(function(){if(window.agnTimeZoneId){moment.tz.setDefault(window.agnTimeZoneId)}})();(function(e,t){if(typeof define=="function"&&define.amd){define(["jquery","dot/doT","jquery-extendext"],t)}else if(typeof module==="object"&&module.exports){module.exports=t(require("jquery"),require("dot/doT"),require("jquery-extendext"))}else{t(e.jQuery,e.doT)}})(this,(function(e,i){"use strict";var n=function(t,a){t[0].queryBuilder=this;this.$el=t;this.settings=e.extendext(true,"replace",{},n.DEFAULTS,a);this.model=new o;this.status={id:null,generated_id:false,group_id:0,rule_id:0,has_optgroup:false,has_operator_optgroup:false};this.filters=this.settings.filters;this.icons=this.settings.icons;this.operators=this.settings.operators;this.templates=this.settings.templates;this.plugins=this.settings.plugins;this.lang=null;if(n.regional["en"]===undefined){r.error("Config",'"i18n/en.js" not loaded.')}this.lang=e.extendext(true,"replace",{},n.regional["en"],n.regional[this.settings.lang_code],this.settings.lang);if(this.settings.allow_groups===false){this.settings.allow_groups=0}else if(this.settings.allow_groups===true){this.settings.allow_groups=-1}Object.keys(this.templates).forEach((function(e){if(!this.templates[e]){this.templates[e]=n.templates[e]}if(typeof this.templates[e]=="string"){this.templates[e]=i.template(this.templates[e])}}),this);if(!this.$el.attr("id")){this.$el.attr("id","qb_"+Math.floor(Math.random()*99999));this.status.generated_id=true}this.status.id=this.$el.attr("id");this.$el.addClass("query-builder form-inline");this.filters=this.checkFilters(this.filters);this.operators=this.checkOperators(this.operators);this.bindEvents();this.initPlugins()};e.extend(n.prototype,{trigger:function(t){var i=new e.Event(this._tojQueryEvent(t),{builder:this});this.$el.triggerHandler(i,Array.prototype.slice.call(arguments,1));return i},change:function(t,i){var n=new e.Event(this._tojQueryEvent(t,true),{builder:this,value:i});this.$el.triggerHandler(n,Array.prototype.slice.call(arguments,2));return n.value},on:function(e,t){this.$el.on(this._tojQueryEvent(e),t);return this},off:function(e,t){this.$el.off(this._tojQueryEvent(e),t);return this},once:function(e,t){this.$el.one(this._tojQueryEvent(e),t);return this},_tojQueryEvent:function(e,t){return e.split(" ").map((function(e){return e+".queryBuilder"+(t?".filter":"")})).join(" ")}});n.types={string:"string",integer:"number",double:"number",date:"datetime",time:"datetime",datetime:"datetime",boolean:"boolean"};n.inputs=["text","number","textarea","radio","checkbox","select"];n.modifiable_options=["display_errors","allow_groups","allow_empty","default_condition","default_filter"];n.selectors={group_container:".rules-group-container",rule_container:".rule-container",filter_container:".rule-filter-container",operator_container:".rule-operator-container",value_container:".rule-value-container",error_container:".error-container",condition_container:".rules-group-header .group-conditions",rule_header:".rule-header",group_header:".rules-group-header",group_actions:".group-actions",rule_actions:".rule-actions",rules_list:".rules-group-body>.rules-list",group_btns:".btn",group_condition:".rules-group-header [name$=_cond]",rule_filter:".rule-filter-container [name$=_filter]",rule_operator:".rule-operator-container [name$=_operator]",rule_value:".rule-value-container :input:not(.icon-help)",add_rule:"[data-add=rule]",delete_rule:"[data-delete=rule]",add_group:"[data-add=group]",delete_group:"[data-delete=group]"};n.templates={};n.regional={};n.OPERATORS={equal:{type:"equal",nb_inputs:1,multiple:false,apply_to:["string","number","datetime","boolean"]},not_equal:{type:"not_equal",nb_inputs:1,multiple:false,apply_to:["string","number","datetime","boolean"]},in:{type:"in",nb_inputs:1,multiple:true,apply_to:["string","number","datetime"]},not_in:{type:"not_in",nb_inputs:1,multiple:true,apply_to:["string","number","datetime"]},less:{type:"less",nb_inputs:1,multiple:false,apply_to:["number","datetime"]},less_or_equal:{type:"less_or_equal",nb_inputs:1,multiple:false,apply_to:["number","datetime"]},greater:{type:"greater",nb_inputs:1,multiple:false,apply_to:["number","datetime"]},greater_or_equal:{type:"greater_or_equal",nb_inputs:1,multiple:false,apply_to:["number","datetime"]},between:{type:"between",nb_inputs:2,multiple:false,apply_to:["number","datetime"]},not_between:{type:"not_between",nb_inputs:2,multiple:false,apply_to:["number","datetime"]},begins_with:{type:"begins_with",nb_inputs:1,multiple:false,apply_to:["string"]},not_begins_with:{type:"not_begins_with",nb_inputs:1,multiple:false,apply_to:["string"]},contains:{type:"contains",nb_inputs:1,multiple:false,apply_to:["string"]},not_contains:{type:"not_contains",nb_inputs:1,multiple:false,apply_to:["string"]},ends_with:{type:"ends_with",nb_inputs:1,multiple:false,apply_to:["string"]},not_ends_with:{type:"not_ends_with",nb_inputs:1,multiple:false,apply_to:["string"]},is_empty:{type:"is_empty",nb_inputs:0,multiple:false,apply_to:["string"]},is_not_empty:{type:"is_not_empty",nb_inputs:0,multiple:false,apply_to:["string"]},is_null:{type:"is_null",nb_inputs:0,multiple:false,apply_to:["string","number","datetime","boolean"]},is_not_null:{type:"is_not_null",nb_inputs:0,multiple:false,apply_to:["string","number","datetime","boolean"]}};n.DEFAULTS={filters:[],plugins:[],sort_filters:false,display_errors:true,allow_groups:-1,allow_empty:false,conditions:["AND","OR"],default_condition:"AND",inputs_separator:" , ",select_placeholder:"------",display_empty_filter:true,default_filter:null,optgroups:{},default_rule_flags:{filter_readonly:false,operator_readonly:false,value_readonly:false,no_delete:false},default_group_flags:{condition_readonly:false,no_add_rule:false,no_add_group:false,no_delete:false},templates:{group:null,rule:null,filterSelect:null,operatorSelect:null,ruleValueSelect:null},lang_code:"en",lang:{},operators:["equal","not_equal","in","not_in","less","less_or_equal","greater","greater_or_equal","between","not_between","begins_with","not_begins_with","contains","not_contains","ends_with","not_ends_with","is_empty","is_not_empty","is_null","is_not_null"],icons:{add_group:"glyphicon glyphicon-plus-sign",add_rule:"glyphicon glyphicon-plus",remove_group:"glyphicon glyphicon-remove",remove_rule:"glyphicon glyphicon-remove",error:"glyphicon glyphicon-warning-sign"}};n.plugins={};n.defaults=function(t){if(typeof t=="object"){e.extendext(true,"replace",n.DEFAULTS,t)}else if(typeof t=="string"){if(typeof n.DEFAULTS[t]=="object"){return e.extend(true,{},n.DEFAULTS[t])}else{return n.DEFAULTS[t]}}else{return e.extend(true,{},n.DEFAULTS)}};n.define=function(e,t,i){n.plugins[e]={fct:t,def:i||{}}};n.extend=function(t){e.extend(n.prototype,t)};n.prototype.initPlugins=function(){if(!this.plugins){return}if(e.isArray(this.plugins)){var t={};this.plugins.forEach((function(e){t[e]=null}));this.plugins=t}Object.keys(this.plugins).forEach((function(t){if(t in n.plugins){this.plugins[t]=e.extend(true,{},n.plugins[t].def,this.plugins[t]||{});n.plugins[t].fct.call(this,this.plugins[t])}else{r.error("Config",'Unable to find plugin "{0}"',t)}}),this)};n.prototype.getPluginOptions=function(e,t){var i;if(this.plugins&&this.plugins[e]){i=this.plugins[e]}else if(n.plugins[e]){i=n.plugins[e].def}if(i){if(t){return i[t]}else{return i}}else{r.error("Config",'Unable to find plugin "{0}"',e)}};n.prototype.init=function(e){this.trigger("afterInit");if(e){this.setRules(e);delete this.settings.rules}else{this.setRoot(true)}};n.prototype.checkFilters=function(e){var t=[];if(!e||e.length===0){r.error("Config","Missing filters list")}e.forEach((function(e,i){if(!e.id){r.error("Config","Missing filter {0} id",i)}if(t.indexOf(e.id)!=-1){r.error("Config",'Filter "{0}" already defined',e.id)}t.push(e.id);if(!e.type){e.type="string"}else if(!n.types[e.type]){r.error("Config",'Invalid type "{0}"',e.type)}if(!e.input){e.input=n.types[e.type]==="number"?"number":"text"}else if(typeof e.input!="function"&&n.inputs.indexOf(e.input)==-1){r.error("Config",'Invalid input "{0}"',e.input)}if(e.operators){e.operators.forEach((function(e){if(typeof e!="string"){r.error("Config","Filter operators must be global operators types (string)")}}))}if(!e.field){e.field=e.id}if(!e.label){e.label=e.field}if(!e.optgroup){e.optgroup=null}else{this.status.has_optgroup=true;if(!this.settings.optgroups[e.optgroup]){this.settings.optgroups[e.optgroup]=e.optgroup}}switch(e.input){case"radio":case"checkbox":if(!e.values||e.values.length<1){r.error("Config",'Missing filter "{0}" values',e.id)}break;case"select":var o=[];e.has_optgroup=false;r.iterateOptions(e.values,function(t,i,n){o.push({value:t,label:i,optgroup:n||null});if(n){e.has_optgroup=true;if(!this.settings.optgroups[n]){this.settings.optgroups[n]=n}}}.bind(this));if(e.has_optgroup){e.values=r.groupSort(o,"optgroup")}else{e.values=o}if(e.placeholder){if(e.placeholder_value===undefined){e.placeholder_value=-1}e.values.forEach((function(t){if(t.value==e.placeholder_value){r.error("Config",'Placeholder of filter "{0}" overlaps with one of its values',e.id)}}))}break}}),this);if(this.settings.sort_filters){if(typeof this.settings.sort_filters=="function"){e.sort(this.settings.sort_filters)}else{var i=this;e.sort((function(e,t){return i.translate(e.label).localeCompare(i.translate(t.label))}))}}if(this.status.has_optgroup){e=r.groupSort(e,"optgroup")}return e};n.prototype.checkOperators=function(t){var i=[];t.forEach((function(o,a){if(typeof o=="string"){if(!n.OPERATORS[o]){r.error("Config",'Unknown operator "{0}"',o)}t[a]=o=e.extendext(true,"replace",{},n.OPERATORS[o])}else{if(!o.type){r.error("Config",'Missing "type" for operator {0}',a)}if(n.OPERATORS[o.type]){t[a]=o=e.extendext(true,"replace",{},n.OPERATORS[o.type],o)}if(o.nb_inputs===undefined||o.apply_to===undefined){r.error("Config",'Missing "nb_inputs" and/or "apply_to" for operator "{0}"',o.type)}}if(i.indexOf(o.type)!=-1){r.error("Config",'Operator "{0}" already defined',o.type)}i.push(o.type);if(!o.optgroup){o.optgroup=null}else{this.status.has_operator_optgroup=true;if(!this.settings.optgroups[o.optgroup]){this.settings.optgroups[o.optgroup]=o.optgroup}}}),this);if(this.status.has_operator_optgroup){t=r.groupSort(t,"optgroup")}return t};n.prototype.bindEvents=function(){var t=this;var i=n.selectors;this.$el.on("change.queryBuilder",i.group_condition,(function(){if(e(this).is(":checked")){var n=e(this).closest(i.group_container);t.getModel(n).condition=e(this).val()}}));this.$el.on("change.queryBuilder",i.rule_filter,(function(){var n=e(this).closest(i.rule_container);t.getModel(n).filter=t.getFilterById(e(this).val())}));this.$el.on("change.queryBuilder",i.rule_operator,(function(){var n=e(this).closest(i.rule_container);t.getModel(n).operator=t.getOperatorByType(e(this).val())}));this.$el.on("click.queryBuilder",i.add_rule,(function(){var n=e(this).closest(i.group_container);t.addRule(t.getModel(n))}));this.$el.on("click.queryBuilder",i.delete_rule,(function(){var n=e(this).closest(i.rule_container);t.deleteRule(t.getModel(n))}));if(this.settings.allow_groups!==0){this.$el.on("click.queryBuilder",i.add_group,(function(){var n=e(this).closest(i.group_container);t.addGroup(t.getModel(n))}));this.$el.on("click.queryBuilder",i.delete_group,(function(){var n=e(this).closest(i.group_container);t.deleteGroup(t.getModel(n))}))}this.model.on({drop:function(e,i){i.$el.remove();t.refreshGroupsConditions()},add:function(e,i,r,o){if(o===0){r.$el.prependTo(i.$el.find(">"+n.selectors.rules_list))}else{r.$el.insertAfter(i.rules[o-1].$el)}t.refreshGroupsConditions()},move:function(e,i,r,o){i.$el.detach();if(o===0){i.$el.prependTo(r.$el.find(">"+n.selectors.rules_list))}else{i.$el.insertAfter(r.rules[o-1].$el)}t.refreshGroupsConditions()},update:function(e,i,n,r,o){if(i instanceof l){switch(n){case"error":t.updateError(i);break;case"flags":t.applyRuleFlags(i);break;case"filter":t.updateRuleFilter(i,o);break;case"operator":t.updateRuleOperator(i,o);break;case"value":t.updateRuleValue(i,o);break}}else{switch(n){case"error":t.updateError(i);break;case"flags":t.applyGroupFlags(i);break;case"condition":t.updateGroupCondition(i,o);break}}}})};n.prototype.setRoot=function(t,i,r){t=t===undefined||t===true;var o=this.nextGroupId();var a=e(this.getGroupTemplate(o,1));a.find(n.selectors.group_btns).addClass(this.settings.readonly?"disabled":"");this.$el.append(a);this.model.root=new s(null,a);this.model.root.model=this.model;this.model.root.data=i;this.model.root.flags=e.extend({},this.settings.default_group_flags,r);this.model.root.condition=this.settings.default_condition;this.trigger("afterAddGroup",this.model.root);if(t){this.addRule(this.model.root)}return this.model.root};n.prototype.addGroup=function(t,i,n,r){i=i===undefined||i===true;var o=t.level+1;var a=this.trigger("beforeAddGroup",t,i,o);if(a.isDefaultPrevented()){return null}var s=this.nextGroupId();var l=e(this.getGroupTemplate(s,o));var u=t.addGroup(l);u.data=n;u.flags=e.extend({},this.settings.default_group_flags,r);u.condition=this.settings.default_condition;this.trigger("afterAddGroup",u);this.trigger("rulesChanged");if(i){this.addRule(u)}return u};n.prototype.deleteGroup=function(e){if(e.isRoot()){return false}var t=this.trigger("beforeDeleteGroup",e);if(t.isDefaultPrevented()){return false}var i=true;e.each("reverse",(function(e){i&=this.deleteRule(e)}),(function(e){i&=this.deleteGroup(e)}),this);if(i){e.drop();this.trigger("afterDeleteGroup");this.trigger("rulesChanged")}return i};n.prototype.updateGroupCondition=function(t,i){t.$el.find(">"+n.selectors.group_condition).each((function(){var i=e(this);i.prop("checked",i.val()===t.condition);i.parent().toggleClass("active",i.val()===t.condition)}));this.trigger("afterUpdateGroupCondition",t,i);this.trigger("rulesChanged")};n.prototype.refreshGroupsConditions=function(){(function e(t){if(!t.flags||t.flags&&!t.flags.condition_readonly){t.$el.find(">"+n.selectors.group_condition).prop("disabled",t.rules.length<=1).parent().toggleClass("disabled",t.rules.length<=1)}t.each(null,(function(t){e(t)}),this)})(this.model.root)};n.prototype.addRule=function(t,i,n){var r=this.trigger("beforeAddRule",t);if(r.isDefaultPrevented()){return null}var o=this.nextRuleId();var a=e(this.getRuleTemplate(o));var s=t.addRule(a);s.data=i;s.flags=e.extend({},this.settings.default_rule_flags,n);this.trigger("afterAddRule",s);this.trigger("rulesChanged");this.createRuleFilters(s);if(this.settings.default_filter||!this.settings.display_empty_filter){s.filter=this.change("getDefaultFilter",this.getFilterById(this.settings.default_filter||this.filters[0].id),s)}return s};n.prototype.deleteRule=function(e){if(e.flags.no_delete){return false}var t=this.trigger("beforeDeleteRule",e);if(t.isDefaultPrevented()){return false}e.drop();this.trigger("afterDeleteRule");this.trigger("rulesChanged");return true};n.prototype.createRuleFilters=function(t){var i=this.change("getRuleFilters",this.filters,t);var r=e(this.getRuleFilterSelect(t,i));t.$el.find(n.selectors.filter_container).html(r);this.trigger("afterCreateRuleFilters",t);this.applyRuleFlags(t)};n.prototype.createRuleOperators=function(t){var i=t.$el.find(n.selectors.operator_container).empty();if(!t.filter){return}var r=this.getOperators(t.filter);var o=e(this.getRuleOperatorSelect(t,r));i.html(o);if(t.filter.default_operator){t.__.operator=this.getOperatorByType(t.filter.default_operator)}else{t.__.operator=r[0]}t.$el.find(n.selectors.rule_operator).val(t.operator.type);this.trigger("afterCreateRuleOperators",t,r);this.applyRuleFlags(t)};n.prototype.createRuleInput=function(t){var i=t.$el.find(n.selectors.value_container).empty();t.__.value=undefined;if(!t.filter||!t.operator||t.operator.nb_inputs===0){return}var r=this;var o=e();var a=t.filter;for(var s=0;s<t.operator.nb_inputs;s++){var l=e(this.getRuleInput(t,s));if(s>0)i.append(this.settings.inputs_separator);i.append(l);o=o.add(l)}i.css("display","");o.on("change "+(a.input_event||""),(function(){if(!t._updating_input){t._updating_value=true;t.value=r.getRuleInputValue(t);t._updating_value=false}}));if(a.plugin){o[a.plugin](a.plugin_config||{})}this.trigger("afterCreateRuleInput",t);if(a.default_value!==undefined){t.value=a.default_value}else{t._updating_value=true;t.value=r.getRuleInputValue(t);t._updating_value=false}this.applyRuleFlags(t)};n.prototype.updateRuleFilter=function(e,t){this.createRuleOperators(e);this.createRuleInput(e);e.$el.find(n.selectors.rule_filter).val(e.filter?e.filter.id:"-1");if(t&&e.filter&&t.id!==e.filter.id){e.data=undefined}this.trigger("afterUpdateRuleFilter",e,t);this.trigger("rulesChanged")};n.prototype.updateRuleOperator=function(e,t){var i=e.$el.find(n.selectors.value_container);if(!e.operator||e.operator.nb_inputs===0){i.hide();e.__.value=undefined}else{i.css("display","");if(i.is(":empty")||!t||e.operator.nb_inputs!==t.nb_inputs||e.operator.optgroup!==t.optgroup){this.createRuleInput(e)}}if(e.operator){e.$el.find(n.selectors.rule_operator).val(e.operator.type);e.__.value=this.getRuleInputValue(e)}this.trigger("afterUpdateRuleOperator",e,t);this.trigger("rulesChanged")};n.prototype.updateRuleValue=function(e,t){if(!e._updating_value){this.setRuleInputValue(e,e.value)}this.trigger("afterUpdateRuleValue",e,t);this.trigger("rulesChanged")};n.prototype.applyRuleFlags=function(e){var t=e.flags;var i=n.selectors;e.$el.find(i.rule_filter).prop("disabled",t.filter_readonly);e.$el.find(i.rule_operator).prop("disabled",t.operator_readonly);e.$el.find(i.rule_value).prop("disabled",t.value_readonly);if(t.no_delete){e.$el.find(i.delete_rule).remove()}this.trigger("afterApplyRuleFlags",e)};n.prototype.applyGroupFlags=function(e){var t=e.flags;var i=n.selectors;e.$el.find(">"+i.group_condition).prop("disabled",t.condition_readonly).parent().toggleClass("readonly",t.condition_readonly);if(t.no_add_rule){e.$el.find(i.add_rule).remove()}if(t.no_add_group){e.$el.find(i.add_group).remove()}if(t.no_delete){e.$el.find(i.delete_group).remove()}this.trigger("afterApplyGroupFlags",e)};n.prototype.clearErrors=function(e){e=e||this.model.root;if(!e){return}e.error=null;if(e instanceof s){e.each((function(e){e.error=null}),(function(e){this.clearErrors(e)}),this)}};n.prototype.updateError=function(e){if(this.settings.display_errors){if(e.error===null){e.$el.removeClass("has-error")}else{var t=this.translate("errors",e.error[0]);t=r.fmt(t,e.error.slice(1));t=this.change("displayError",t,e.error,e);e.$el.addClass("has-error").find(n.selectors.error_container).eq(0).attr("title",t)}}};n.prototype.triggerValidationError=function(t,i,n){if(!e.isArray(i)){i=[i]}var r=this.trigger("validationError",t,i,n);if(!r.isDefaultPrevented()){t.error=i}};n.prototype.destroy=function(){this.trigger("beforeDestroy");if(this.status.generated_id){this.$el.removeAttr("id")}this.clear();this.model=null;this.$el.off(".queryBuilder").removeClass("query-builder").removeData("queryBuilder");delete this.$el[0].queryBuilder};n.prototype.reset=function(){var t=this.trigger("beforeReset");if(t.isDefaultPrevented()){return}this.status.group_id=1;this.status.rule_id=0;this.model.root.empty();this.model.root.data=undefined;this.model.root.flags=e.extend({},this.settings.default_group_flags);this.model.root.condition=this.settings.default_condition;this.addRule(this.model.root);this.trigger("afterReset");this.trigger("rulesChanged")};n.prototype.clear=function(){var e=this.trigger("beforeClear");if(e.isDefaultPrevented()){return}this.status.group_id=0;this.status.rule_id=0;if(this.model.root){this.model.root.drop();this.model.root=null}this.trigger("afterClear");this.trigger("rulesChanged")};n.prototype.setOptions=function(t){e.each(t,function(e,t){if(n.modifiable_options.indexOf(e)!==-1){this.settings[e]=t}}.bind(this))};n.prototype.getModel=function(t){if(!t){return this.model.root}else if(t instanceof a){return t}else{return e(t).data("queryBuilderModel")}};n.prototype.validate=function(t){t=e.extend({skip_empty:false},t);this.clearErrors();var i=this;var n=function e(n){var r=0;var o=0;n.each((function(e){if(!e.filter&&t.skip_empty){return}if(!e.filter){i.triggerValidationError(e,"no_filter",null);o++;return}if(!e.operator){i.triggerValidationError(e,"no_operator",null);o++;return}if(e.operator.nb_inputs!==0){var n=i.validateValue(e,e.value);if(n!==true){i.triggerValidationError(e,n,e.value);o++;return}}r++}),(function(t){var i=e(t);if(i===true){r++}else if(i===false){o++}}));if(o>0){return false}else if(r===0&&!n.isRoot()&&t.skip_empty){return null}else if(r===0&&(!i.settings.allow_empty||!n.isRoot())){i.triggerValidationError(n,"empty_group",null);return false}return true}(this.model.root);return this.change("validate",n)};n.prototype.getRules=function(t){t=e.extend({get_flags:false,allow_invalid:false,skip_empty:false},t);var i=this.validate(t);if(!i&&!t.allow_invalid){return null}var n=this;var r=function i(r){var o={condition:r.condition,rules:[]};if(r.data){o.data=e.extendext(true,"replace",{},r.data)}if(t.get_flags){var a=n.getGroupFlags(r.flags,t.get_flags==="all");if(!e.isEmptyObject(a)){o.flags=a}}r.each((function(i){if(!i.filter&&t.skip_empty){return}var r=null;if(!i.operator||i.operator.nb_inputs!==0){r=i.value}var a={id:i.filter?i.filter.id:null,field:i.filter?i.filter.field:null,type:i.filter?i.filter.type:null,input:i.filter?i.filter.input:null,operator:i.operator?i.operator.type:null,value:r};if(i.filter&&i.filter.data||i.data){a.data=e.extendext(true,"replace",{},i.filter.data,i.data)}if(t.get_flags){var s=n.getRuleFlags(i.flags,t.get_flags==="all");if(!e.isEmptyObject(s)){a.flags=s}}o.rules.push(n.change("ruleToJson",a,i))}),(function(e){var n=i(e);if(n.rules.length!==0||!t.skip_empty){o.rules.push(n)}}),this);return n.change("groupToJson",o,r)}(this.model.root);r.valid=i;return this.change("getRules",r)};n.prototype.setRules=function(t,i){i=e.extend({allow_invalid:false},i);if(e.isArray(t)){t={condition:this.settings.default_condition,rules:t}}if(!t||!t.rules||t.rules.length===0&&!this.settings.allow_empty){r.error("RulesParse","Incorrect data object passed")}this.clear();this.setRoot(false,t.data,this.parseGroupFlags(t));t=this.change("setRules",t,i);var n=this;(function e(t,o){if(o===null){return}if(t.condition===undefined){t.condition=n.settings.default_condition}else if(n.settings.conditions.indexOf(t.condition)==-1){r.error(!i.allow_invalid,"UndefinedCondition",'Invalid condition "{0}"',t.condition);t.condition=n.settings.default_condition}o.condition=t.condition;t.rules.forEach((function(t){var a;if(t.rules!==undefined){if(n.settings.allow_groups!==-1&&n.settings.allow_groups<o.level){r.error(!i.allow_invalid,"RulesParse","No more than {0} groups are allowed",n.settings.allow_groups);n.reset()}else{a=n.addGroup(o,false,t.data,n.parseGroupFlags(t));if(a===null){return}e(t,a)}}else{if(!t.empty){if(t.id===undefined){r.error(!i.allow_invalid,"RulesParse","Missing rule field id");t.empty=true}if(t.operator===undefined){t.operator="equal"}}a=n.addRule(o,t.data,n.parseRuleFlags(t));if(a===null){return}if(!t.empty){a.filter=n.getFilterById(t.id,!i.allow_invalid)}if(a.filter){a.operator=n.getOperatorByType(t.operator,!i.allow_invalid);if(!a.operator){a.operator=n.getOperators(a.filter)[0]}}if(a.operator&&a.operator.nb_inputs!==0){if(t.value!==undefined){a.value=t.value}else if(a.filter.default_value!==undefined){a.value=a.filter.default_value}}if(n.change("jsonToRule",a,t)!=a){r.error("RulesParse","Plugin tried to change rule reference")}}}));if(n.change("jsonToGroup",o,t)!=o){r.error("RulesParse","Plugin tried to change group reference")}})(t,this.model.root);this.trigger("afterSetRules")};n.prototype.validateValue=function(e,t){var i=e.filter.validation||{};var n=true;if(i.callback){n=i.callback.call(this,t,e)}else{n=this._validateValue(e,t)}return this.change("validateValue",n,t,e)};n.prototype._validateValue=function(t,i){var o=t.filter;var a=t.operator;var s=o.validation||{};var l=true;var u,c;if(t.operator.nb_inputs===1){i=[i]}for(var d=0;d<a.nb_inputs;d++){if(!a.multiple&&e.isArray(i[d])&&i[d].length>1){l=["operator_not_multiple",a.type,this.translate("operators",a.type)];break}switch(o.input){case"radio":if(i[d]===undefined||i[d].length===0){if(!s.allow_empty_value){l=["radio_empty"]}break}break;case"checkbox":if(i[d]===undefined||i[d].length===0){if(!s.allow_empty_value){l=["checkbox_empty"]}break}break;case"select":if(i[d]===undefined||i[d].length===0||o.placeholder&&i[d]==o.placeholder_value){if(!s.allow_empty_value){l=["select_empty"]}break}break;default:c=e.isArray(i[d])?i[d]:[i[d]];for(var f=0;f<c.length;f++){switch(n.types[o.type]){case"string":if(c[f]===undefined||c[f].length===0){if(!s.allow_empty_value){l=["string_empty"]}break}if(s.min!==undefined){if(c[f].length<parseInt(s.min)){l=[this.getValidationMessage(s,"min","string_exceed_min_length"),s.min];break}}if(s.max!==undefined){if(c[f].length>parseInt(s.max)){l=[this.getValidationMessage(s,"max","string_exceed_max_length"),s.max];break}}if(s.format){if(typeof s.format=="string"){s.format=new RegExp(s.format)}if(!s.format.test(c[f])){l=[this.getValidationMessage(s,"format","string_invalid_format"),s.format];break}}break;case"number":if(c[f]===undefined||c[f].length===0){if(!s.allow_empty_value){l=["number_nan"]}break}if(isNaN(c[f])){l=["number_nan"];break}if(o.type=="integer"){if(parseInt(c[f])!=c[f]){l=["number_not_integer"];break}}else{if(parseFloat(c[f])!=c[f]){l=["number_not_double"];break}}if(s.min!==undefined){if(c[f]<parseFloat(s.min)){l=[this.getValidationMessage(s,"min","number_exceed_min"),s.min];break}}if(s.max!==undefined){if(c[f]>parseFloat(s.max)){l=[this.getValidationMessage(s,"max","number_exceed_max"),s.max];break}}if(s.step!==undefined&&s.step!=="any"){var p=(c[f]/s.step).toPrecision(14);if(parseInt(p)!=p){l=[this.getValidationMessage(s,"step","number_wrong_step"),s.step];break}}break;case"datetime":if(c[f]===undefined||c[f].length===0){if(!s.allow_empty_value){l=["datetime_empty"]}break}if(s.format){if(!("moment"in window)){r.error("MissingLibrary","MomentJS is required for Date/Time validation. Get it here http://momentjs.com")}var h=moment(c[f],s.format);if(!h.isValid()){l=[this.getValidationMessage(s,"format","datetime_invalid"),s.format];break}else{if(s.min){if(h<moment(s.min,s.format)){l=[this.getValidationMessage(s,"min","datetime_exceed_min"),s.min];break}}if(s.max){if(h>moment(s.max,s.format)){l=[this.getValidationMessage(s,"max","datetime_exceed_max"),s.max];break}}}}break;case"boolean":if(c[f]===undefined||c[f].length===0){if(!s.allow_empty_value){l=["boolean_not_valid"]}break}u=(""+c[f]).trim().toLowerCase();if(u!=="true"&&u!=="false"&&u!=="1"&&u!=="0"&&c[f]!==1&&c[f]!==0){l=["boolean_not_valid"];break}}if(l!==true){break}}}if(l!==true){break}}if((t.operator.type==="between"||t.operator.type==="not_between")&&i.length===2){switch(n.types[o.type]){case"number":if(i[0]>i[1]){l=["number_between_invalid",i[0],i[1]]}break;case"datetime":if(s.format){if(!("moment"in window)){r.error("MissingLibrary","MomentJS is required for Date/Time validation. Get it here http://momentjs.com")}if(moment(i[0],s.format).isAfter(moment(i[1],s.format))){l=["datetime_between_invalid",i[0],i[1]]}}break}}return l};n.prototype.nextGroupId=function(){return this.status.id+"_group_"+this.status.group_id++};n.prototype.nextRuleId=function(){return this.status.id+"_rule_"+this.status.rule_id++};n.prototype.getOperators=function(e){if(typeof e=="string"){e=this.getFilterById(e)}var t=[];for(var i=0,r=this.operators.length;i<r;i++){if(e.operators){if(e.operators.indexOf(this.operators[i].type)==-1){continue}}else if(this.operators[i].apply_to.indexOf(n.types[e.type])==-1){continue}t.push(this.operators[i])}if(e.operators){t.sort((function(t,i){return e.operators.indexOf(t.type)-e.operators.indexOf(i.type)}))}return this.change("getOperators",t,e)};n.prototype.getFilterById=function(e,t){if(e=="-1"){return null}for(var i=0,n=this.filters.length;i<n;i++){if(this.filters[i].id==e){return this.filters[i]}}r.error(t!==false,"UndefinedFilter",'Undefined filter "{0}"',e);return null};n.prototype.getOperatorByType=function(e,t){if(e=="-1"){return null}for(var i=0,n=this.operators.length;i<n;i++){if(this.operators[i].type==e){return this.operators[i]}}r.error(t!==false,"UndefinedOperator",'Undefined operator "{0}"',e);return null};n.prototype.getRuleInputValue=function(t){var i=t.filter;var o=t.operator;var a=[];if(i.valueGetter){a=i.valueGetter.call(this,t)}else{var s=t.$el.find(n.selectors.value_container);for(var l=0;l<o.nb_inputs;l++){var u=r.escapeElementId(t.id+"_value_"+l);var c;switch(i.input){case"radio":a.push(s.find("[name="+u+"]:checked").val());break;case"checkbox":c=[];s.find("[name="+u+"]:checked").each((function(){c.push(e(this).val())}));a.push(c);break;case"select":if(i.multiple){c=[];s.find("[name="+u+"] option:selected").each((function(){c.push(e(this).val())}));a.push(c)}else{a.push(s.find("[name="+u+"] option:selected").val())}break;default:a.push(s.find("[name="+u+"]").val())}}a=a.map((function(t){if(o.multiple&&i.value_separator&&typeof t=="string"){t=t.split(i.value_separator)}if(e.isArray(t)){return t.map((function(e){return r.changeType(e,i.type)}))}else{return r.changeType(t,i.type)}}));if(o.nb_inputs===1){a=a[0]}if(i.valueParser){a=i.valueParser.call(this,t,a)}}return this.change("getRuleValue",a,t)};n.prototype.setRuleInputValue=function(t,i){var o=t.filter;var a=t.operator;if(!o||!a){return}t._updating_input=true;if(o.valueSetter){o.valueSetter.call(this,t,i)}else{var s=t.$el.find(n.selectors.value_container);if(a.nb_inputs==1){i=[i]}for(var l=0;l<a.nb_inputs;l++){var u=r.escapeElementId(t.id+"_value_"+l);switch(o.input){case"radio":s.find("[name="+u+'][value="'+i[l]+'"]').prop("checked",true).trigger("change");break;case"checkbox":if(!e.isArray(i[l])){i[l]=[i[l]]}i[l].forEach((function(e){s.find("[name="+u+'][value="'+e+'"]').prop("checked",true).trigger("change")}));break;default:if(a.multiple&&o.value_separator&&e.isArray(i[l])){i[l]=i[l].join(o.value_separator)}s.find("[name="+u+"]").val(i[l]).trigger("change");break}}}t._updating_input=false};n.prototype.parseRuleFlags=function(t){var i=e.extend({},this.settings.default_rule_flags);if(t.readonly){e.extend(i,{header_readonly:true,filter_readonly:true,operator_readonly:true,value_readonly:true,no_delete:true,no_sortable:true})}if(t.flags){e.extend(i,t.flags)}return this.change("parseRuleFlags",i,t)};n.prototype.getRuleFlags=function(t,i){if(i){return e.extend({},t)}else{var n={};e.each(this.settings.default_rule_flags,(function(e,i){if(t[e]!==i){n[e]=t[e]}}));return n}};n.prototype.parseGroupFlags=function(t){var i=e.extend({},this.settings.default_group_flags);if(t.readonly){e.extend(i,{condition_readonly:true,no_add_rule:true,no_add_group:true,no_delete:true})}if(t.flags){e.extend(i,t.flags)}return this.change("parseGroupFlags",i,t)};n.prototype.getGroupFlags=function(t,i){if(i){return e.extend({},t)}else{var n={};e.each(this.settings.default_group_flags,(function(e,i){if(t[e]!==i){n[e]=t[e]}}));return n}};n.prototype.translate=function(e,t){if(!t){t=e;e=undefined}var i;if(typeof t==="object"){i=t[this.settings.lang_code]||t["en"]}else{i=(e?this.lang[e]:this.lang)[t]||t}return this.change("translate",i,t,e)};n.prototype.getValidationMessage=function(e,t,i){return e.messages&&e.messages[t]||i};n.templates.group='<div id="{{= it.group_id }}" class="rules-group-container">   <div class="rules-group-header">     <div class="btn-group pull-right group-actions">       <button type="button" class="btn btn-xs btn-success" data-add="rule">         <i class="{{= it.icons.add_rule }}"></i> {{= it.translate("add_rule") }}       </button>       {{? it.settings.allow_groups===-1 || it.settings.allow_groups>=it.level }}         <button type="button" class="btn btn-xs btn-success" data-add="group">           <i class="{{= it.icons.add_group }}"></i> {{= it.translate("add_group") }}         </button>       {{?}}       {{? it.level>1 }}         <button type="button" class="btn btn-xs btn-danger" data-delete="group">           <i class="{{= it.icons.remove_group }}"></i> {{= it.translate("delete_group") }}         </button>       {{?}}     </div>     <div class="btn-group group-conditions">       {{~ it.conditions: condition }}         <label class="btn btn-xs btn-primary">           <input type="radio" name="{{= it.group_id }}_cond" value="{{= condition }}"> {{= it.translate("conditions", condition) }}         </label>       {{~}}     </div>     {{? it.settings.display_errors }}       <div class="error-container"><i class="{{= it.icons.error }}"></i></div>     {{?}}   </div>   <div class=rules-group-body>     <div class=rules-list></div>   </div> </div>';n.templates.rule='<div id="{{= it.rule_id }}" class="rule-container">   <div class="rule-header">     <div class="btn-group pull-right rule-actions">       <button type="button" class="btn btn-xs btn-danger" data-delete="rule">         <i class="{{= it.icons.remove_rule }}"></i> {{= it.translate("delete_rule") }}       </button>     </div>   </div>   {{? it.settings.display_errors }}     <div class="error-container"><i class="{{= it.icons.error }}"></i></div>   {{?}}   <div class="rule-filter-container"></div>   <div class="rule-operator-container"></div>   <div class="rule-value-container"></div> </div>';n.templates.filterSelect='{{ var optgroup = null; }} <select class="form-control" name="{{= it.rule.id }}_filter">   {{? it.settings.display_empty_filter }}     <option value="-1">{{= it.settings.select_placeholder }}</option>   {{?}}   {{~ it.filters: filter }}     {{? optgroup !== filter.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = filter.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= filter.id }}" {{? filter.icon}}data-icon="{{= filter.icon}}"{{?}}>{{= it.translate(filter.label) }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>';n.templates.operatorSelect='{{? it.operators.length === 1 }} <span> {{= it.translate("operators", it.operators[0].type) }} </span> {{?}} {{ var optgroup = null; }} <select class="form-control {{? it.operators.length === 1 }}hide{{?}}" name="{{= it.rule.id }}_operator">   {{~ it.operators: operator }}     {{? optgroup !== operator.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = operator.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= operator.type }}" {{? operator.icon}}data-icon="{{= operator.icon}}"{{?}}>{{= it.translate("operators", operator.type) }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>';n.templates.ruleValueSelect='{{ var optgroup = null; }} <select class="form-control" name="{{= it.name }}" {{? it.rule.filter.multiple }}multiple{{?}}>   {{? it.rule.filter.placeholder }}     <option value="{{= it.rule.filter.placeholder_value }}" disabled selected>{{= it.rule.filter.placeholder }}</option>   {{?}}   {{~ it.rule.filter.values: entry }}     {{? optgroup !== entry.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = entry.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= entry.value }}">{{= entry.label }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>';n.prototype.getGroupTemplate=function(e,t){var i=this.templates.group({builder:this,group_id:e,level:t,conditions:this.settings.conditions,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getGroupTemplate",i,t)};n.prototype.getRuleTemplate=function(e){var t=this.templates.rule({builder:this,rule_id:e,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleTemplate",t)};n.prototype.getRuleFilterSelect=function(e,t){var i=this.templates.filterSelect({builder:this,rule:e,filters:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleFilterSelect",i,e,t)};n.prototype.getRuleOperatorSelect=function(e,t){var i=this.templates.operatorSelect({builder:this,rule:e,operators:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleOperatorSelect",i,e,t)};n.prototype.getRuleValueSelect=function(e,t){var i=this.templates.ruleValueSelect({builder:this,name:e,rule:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleValueSelect",i,e,t)};n.prototype.getRuleInput=function(e,t){var i=e.filter;var n=e.filter.validation||{};var o=e.id+"_value_"+t;var a=i.vertical?" class=block":"";var s="";if(typeof i.input=="function"){s=i.input.call(this,e,o)}else{switch(i.input){case"radio":case"checkbox":r.iterateOptions(i.values,(function(e,t){s+="<label"+a+'><input type="'+i.input+'" name="'+o+'" value="'+e+'"> '+t+"</label> "}));break;case"select":s=this.getRuleValueSelect(o,e);break;case"textarea":s+='<textarea class="form-control" name="'+o+'"';if(i.size)s+=' cols="'+i.size+'"';if(i.rows)s+=' rows="'+i.rows+'"';if(n.min!==undefined)s+=' minlength="'+n.min+'"';if(n.max!==undefined)s+=' maxlength="'+n.max+'"';if(i.placeholder)s+=' placeholder="'+i.placeholder+'"';s+="></textarea>";break;case"number":s+='<input class="form-control" type="number" name="'+o+'"';if(n.step!==undefined)s+=' step="'+n.step+'"';if(n.min!==undefined)s+=' min="'+n.min+'"';if(n.max!==undefined)s+=' max="'+n.max+'"';if(i.placeholder)s+=' placeholder="'+i.placeholder+'"';if(i.size)s+=' size="'+i.size+'"';s+=">";break;default:s+='<input class="form-control" type="text" name="'+o+'"';if(i.placeholder)s+=' placeholder="'+i.placeholder+'"';if(i.type==="string"&&n.min!==undefined)s+=' minlength="'+n.min+'"';if(i.type==="string"&&n.max!==undefined)s+=' maxlength="'+n.max+'"';if(i.size)s+=' size="'+i.size+'"';s+=">"}}return this.change("getRuleInput",s,e,o)};var r={};n.utils=r;r.iterateOptions=function(t,i){if(t){if(e.isArray(t)){t.forEach((function(t){if(e.isPlainObject(t)){if("value"in t){i(t.value,t.label||t.value,t.optgroup)}else{e.each(t,(function(e,t){i(e,t);return false}))}}else{i(t,t)}}))}else{e.each(t,(function(e,t){i(e,t)}))}}};r.fmt=function(e,t){if(!Array.isArray(t)){t=Array.prototype.slice.call(arguments,1)}return e.replace(/{([0-9]+)}/g,(function(e,i){return t[parseInt(i)]}))};r.error=function(){var e=0;var t=typeof arguments[e]==="boolean"?arguments[e++]:true;var i=arguments[e++];var n=arguments[e++];var o=Array.isArray(arguments[e])?arguments[e]:Array.prototype.slice.call(arguments,e);if(t){var a=new Error(r.fmt(n,o));a.name=i+"Error";a.args=o;throw a}else{console.error(i+"Error: "+r.fmt(n,o))}};r.changeType=function(e,t){if(e===""||e===undefined){return undefined}switch(t){case"integer":if(typeof e==="string"&&!/^-?\d+$/.test(e)){return e}return parseInt(e);case"double":if(typeof e==="string"&&!/^-?\d+\.?\d*$/.test(e)){return e}return parseFloat(e);case"boolean":if(typeof e==="string"&&!/^(0|1|true|false){1}$/i.test(e)){return e}return e===true||e===1||e.toLowerCase()==="true"||e==="1";default:return e}};r.escapeString=function(e){if(typeof e!="string"){return e}return e.replace(/[\0\n\r\b\\\'\"]/g,(function(e){switch(e){case"\0":return"\\0";case"\n":return"\\n";case"\r":return"\\r";case"\b":return"\\b";default:return"\\"+e}})).replace(/\t/g,"\\t").replace(/\x1a/g,"\\Z")};r.escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")};r.escapeElementId=function(e){return e?e.replace(/(\\)?([:.\[\],])/g,(function(e,t,i){return t?e:"\\"+i})):e};r.groupSort=function(e,t){var i=[];var n=[];e.forEach((function(e){var r;if(e[t]){r=i.lastIndexOf(e[t]);if(r==-1){r=i.length}else{r++}}else{r=i.length}i.splice(r,0,e[t]);n.splice(r,0,e)}));return n};r.defineModelProperties=function(t,i){i.forEach((function(i){Object.defineProperty(t.prototype,i,{enumerable:true,get:function(){return this.__[i]},set:function(t){var n=this.__[i]!==null&&typeof this.__[i]=="object"?e.extend({},this.__[i]):this.__[i];this.__[i]=t;if(this.model!==null){this.model.trigger("update",this,i,t,n)}}})}))};function o(){this.root=null;this.$=e(this)}e.extend(o.prototype,{trigger:function(t){var i=new e.Event(t);this.$.triggerHandler(i,Array.prototype.slice.call(arguments,1));return i},on:function(){this.$.on.apply(this.$,Array.prototype.slice.call(arguments));return this},off:function(){this.$.off.apply(this.$,Array.prototype.slice.call(arguments));return this},once:function(){this.$.one.apply(this.$,Array.prototype.slice.call(arguments));return this}});var a=function(e,t){if(!(this instanceof a)){return new a(e,t)}Object.defineProperty(this,"__",{value:{}});t.data("queryBuilderModel",this);this.__.level=1;this.__.error=null;this.__.flags={};this.__.data=undefined;this.$el=t;this.id=t[0].id;this.model=null;this.parent=e};r.defineModelProperties(a,["level","error","data","flags"]);Object.defineProperty(a.prototype,"parent",{enumerable:true,get:function(){return this.__.parent},set:function(e){this.__.parent=e;this.level=e===null?1:e.level+1;this.model=e===null?null:e.model}});a.prototype.isRoot=function(){return this.level===1};a.prototype.getPos=function(){if(this.isRoot()){return-1}else{return this.parent.getNodePos(this)}};a.prototype.drop=function(){var e=this.model;if(!!this.parent){this.parent.removeNode(this)}this.$el.removeData("queryBuilderModel");if(e!==null){e.trigger("drop",this)}};a.prototype.moveAfter=function(e){if(!this.isRoot()){this.move(e.parent,e.getPos()+1)}};a.prototype.moveAtBegin=function(e){if(!this.isRoot()){if(e===undefined){e=this.parent}this.move(e,0)}};a.prototype.moveAtEnd=function(e){if(!this.isRoot()){if(e===undefined){e=this.parent}this.move(e,e.length()===0?0:e.length()-1)}};a.prototype.move=function(e,t){if(!this.isRoot()){if(typeof e==="number"){t=e;e=this.parent}this.parent.removeNode(this);e.insertNode(this,t,false);if(this.model!==null){this.model.trigger("move",this,e,t)}}};var s=function(e,t){if(!(this instanceof s)){return new s(e,t)}a.call(this,e,t);this.rules=[];this.__.condition=null};s.prototype=Object.create(a.prototype);s.prototype.constructor=s;r.defineModelProperties(s,["condition"]);s.prototype.empty=function(){this.each("reverse",(function(e){e.drop()}),(function(e){e.drop()}))};s.prototype.drop=function(){this.empty();a.prototype.drop.call(this)};s.prototype.length=function(){return this.rules.length};s.prototype.insertNode=function(e,t,i){if(t===undefined){t=this.length()}this.rules.splice(t,0,e);e.parent=this;if(i&&this.model!==null){this.model.trigger("add",this,e,t)}return e};s.prototype.addGroup=function(e,t){return this.insertNode(new s(this,e),t,true)};s.prototype.addRule=function(e,t){return this.insertNode(new l(this,e),t,true)};s.prototype.removeNode=function(e){var t=this.getNodePos(e);if(t!==-1){e.parent=null;this.rules.splice(t,1)}};s.prototype.getNodePos=function(e){return this.rules.indexOf(e)};s.prototype.each=function(e,t,i,n){if(typeof e!=="boolean"&&typeof e!=="string"){n=i;i=t;t=e;e=false}n=n===undefined?null:n;var r=e?this.rules.length-1:0;var o=e?0:this.rules.length-1;var a=e?-1:1;var l=function(){return e?r>=o:r<=o};var u=false;for(;l();r+=a){if(this.rules[r]instanceof s){if(!!i){u=i.call(n,this.rules[r])===false}}else if(!!t){u=t.call(n,this.rules[r])===false}if(u){break}}return!u};s.prototype.contains=function(e,t){if(this.getNodePos(e)!==-1){return true}else if(!t){return false}else{return!this.each((function(){return true}),(function(t){return!t.contains(e,true)}))}};var l=function(e,t){if(!(this instanceof l)){return new l(e,t)}a.call(this,e,t);this._updating_value=false;this._updating_input=false;this.__.filter=null;this.__.operator=null;this.__.value=undefined};l.prototype=Object.create(a.prototype);l.prototype.constructor=l;r.defineModelProperties(l,["filter","operator","value"]);l.prototype.isRoot=function(){return false};n.Group=s;n.Rule=l;e.fn.queryBuilder=function(e){if(this.length===0){r.error("Config","No target defined")}if(this.length>1){r.error("Config","Unable to initialize on multiple target")}var t=this.data("queryBuilder");var i=typeof e=="object"&&e||{};if(!t&&e=="destroy"){return this}if(!t){var o=new n(this,i);this.data("queryBuilder",o);o.init(i.rules)}if(typeof e=="string"){return t[e].apply(t,Array.prototype.slice.call(arguments,1))}return this};e.fn.queryBuilder.constructor=n;e.fn.queryBuilder.defaults=n.defaults;e.fn.queryBuilder.extend=n.extend;e.fn.queryBuilder.define=n.define;e.fn.queryBuilder.regional=n.regional;n.define("bt-checkbox",(function(e){if(e.font=="glyphicons"){this.$el.addClass("bt-checkbox-glyphicons")}this.on("getRuleInput.filter",(function(t,i,n){var o=i.filter;if((o.input==="radio"||o.input==="checkbox")&&!o.plugin){t.value="";if(!o.colors){o.colors={}}if(o.color){o.colors._def_=o.color}var a=o.vertical?' style="display:block"':"";var s=0;r.iterateOptions(o.values,(function(i,r){var l=o.colors[i]||o.colors._def_||e.color;var u=n+"_"+s++;t.value+="<div"+a+' class="'+o.input+" "+o.input+"-"+l+'">   <input type="'+o.input+'" name="'+n+'" id="'+u+'" value="'+i+'">   <label for="'+u+'">'+r+"</label> </div>"}))}}))}),{font:"glyphicons",color:"default"});n.define("bt-selectpicker",(function(t){if(!e.fn.selectpicker||!e.fn.selectpicker.Constructor){r.error("MissingLibrary",'Bootstrap Select is required to use "bt-selectpicker" plugin. Get it here: http://silviomoreto.github.io/bootstrap-select')}var i=n.selectors;this.on("afterCreateRuleFilters",(function(e,n){n.$el.find(i.rule_filter).removeClass("form-control").selectpicker(t)}));this.on("afterCreateRuleOperators",(function(e,n){n.$el.find(i.rule_operator).removeClass("form-control").selectpicker(t)}));this.on("afterUpdateRuleFilter",(function(e,t){t.$el.find(i.rule_filter).selectpicker("render")}));this.on("afterUpdateRuleOperator",(function(e,t){t.$el.find(i.rule_operator).selectpicker("render")}));this.on("beforeDeleteRule",(function(e,t){t.$el.find(i.rule_filter).selectpicker("destroy");t.$el.find(i.rule_operator).selectpicker("destroy")}))}),{container:"body",style:"btn-inverse btn-xs",width:"auto",showIcon:false});n.define("bt-tooltip-errors",(function(t){if(!e.fn.tooltip||!e.fn.tooltip.Constructor||!e.fn.tooltip.Constructor.prototype.fixTitle){r.error("MissingLibrary",'Bootstrap Tooltip is required to use "bt-tooltip-errors" plugin. Get it here: http://getbootstrap.com')}var i=this;this.on("getRuleTemplate.filter getGroupTemplate.filter",(function(t){var i=e(t.value);i.find(n.selectors.error_container).attr("data-toggle","tooltip");t.value=i.prop("outerHTML")}));this.model.on("update",(function(e,r,o){if(o=="error"&&i.settings.display_errors){r.$el.find(n.selectors.error_container).eq(0).tooltip(t).tooltip("hide").tooltip("fixTitle")}}))}),{placement:"right"});n.extend({setFilters:function(e,t){var i=this;if(t===undefined){t=e;e=false}t=this.checkFilters(t);t=this.change("setFilters",t);var o=t.map((function(e){return e.id}));if(!e){(function e(t){t.each((function(e){if(e.filter&&o.indexOf(e.filter.id)===-1){r.error("ChangeFilter",'A rule is using filter "{0}"',e.filter.id)}}),e)})(this.model.root)}this.filters=t;(function e(t){t.each(true,(function(e){if(e.filter&&o.indexOf(e.filter.id)===-1){e.drop();i.trigger("rulesChanged")}else{i.createRuleFilters(e);e.$el.find(n.selectors.rule_filter).val(e.filter?e.filter.id:"-1");i.trigger("afterUpdateRuleFilter",e)}}),e)})(this.model.root);if(this.settings.plugins){if(this.settings.plugins["unique-filter"]){this.updateDisabledFilters()}if(this.settings.plugins["bt-selectpicker"]){this.$el.find(n.selectors.rule_filter).selectpicker("render")}}if(this.settings.default_filter){try{this.getFilterById(this.settings.default_filter)}catch(e){this.settings.default_filter=null}}this.trigger("afterSetFilters",t)},addFilter:function(t,i){if(i===undefined||i=="#end"){i=this.filters.length}else if(i=="#start"){i=0}if(!e.isArray(t)){t=[t]}var n=e.extend(true,[],this.filters);if(parseInt(i)==i){Array.prototype.splice.apply(n,[i,0].concat(t))}else{if(this.filters.some((function(e,t){if(e.id==i){i=t+1;return true}}))){Array.prototype.splice.apply(n,[i,0].concat(t))}else{Array.prototype.push.apply(n,t)}}this.setFilters(n)},removeFilter:function(t,i){var n=e.extend(true,[],this.filters);if(typeof t==="string"){t=[t]}n=n.filter((function(e){return t.indexOf(e.id)===-1}));this.setFilters(i,n)}});n.define("chosen-selectpicker",(function(t){if(!e.fn.chosen){r.error("MissingLibrary",'chosen is required to use "chosen-selectpicker" plugin. Get it here: https://github.com/harvesthq/chosen')}if(this.settings.plugins["bt-selectpicker"]){r.error("Conflict","bt-selectpicker is already selected as the dropdown plugin. Please remove chosen-selectpicker from the plugin list")}var i=n.selectors;this.on("afterCreateRuleFilters",(function(e,n){n.$el.find(i.rule_filter).removeClass("form-control").chosen(t)}));this.on("afterCreateRuleOperators",(function(e,n){n.$el.find(i.rule_operator).removeClass("form-control").chosen(t)}));this.on("afterUpdateRuleFilter",(function(e,t){t.$el.find(i.rule_filter).trigger("chosen:updated")}));this.on("afterUpdateRuleOperator",(function(e,t){t.$el.find(i.rule_operator).trigger("chosen:updated")}));this.on("beforeDeleteRule",(function(e,t){t.$el.find(i.rule_filter).chosen("destroy");t.$el.find(i.rule_operator).chosen("destroy")}))}));n.define("filter-description",(function(t){if(t.mode==="inline"){this.on("afterUpdateRuleFilter afterUpdateRuleOperator",(function(i,n){var r=n.$el.find("p.filter-description");var o=i.builder.getFilterDescription(n.filter,n);if(!o){r.hide()}else{if(r.length===0){r=e('<p class="filter-description"></p>');r.appendTo(n.$el)}else{r.css("display","")}r.html('<i class="'+t.icon+'"></i> '+o)}}))}else if(t.mode==="popover"){if(!e.fn.popover||!e.fn.popover.Constructor||!e.fn.popover.Constructor.prototype.fixTitle){r.error("MissingLibrary",'Bootstrap Popover is required to use "filter-description" plugin. Get it here: http://getbootstrap.com')}this.on("afterUpdateRuleFilter afterUpdateRuleOperator",(function(i,r){var o=r.$el.find("button.filter-description");var a=i.builder.getFilterDescription(r.filter,r);if(!a){o.hide();if(o.data("bs.popover")){o.popover("hide")}}else{if(o.length===0){o=e('<button type="button" class="btn btn-xs btn-info filter-description" data-toggle="popover"><i class="'+t.icon+'"></i></button>');o.prependTo(r.$el.find(n.selectors.rule_actions));o.popover({placement:"left",container:"body",html:true});o.on("mouseout",(function(){o.popover("hide")}))}else{o.css("display","")}o.data("bs.popover").options.content=a;if(o.attr("aria-describedby")){o.popover("show")}}}))}else if(t.mode==="bootbox"){if(!("bootbox"in window)){r.error("MissingLibrary",'Bootbox is required to use "filter-description" plugin. Get it here: http://bootboxjs.com')}this.on("afterUpdateRuleFilter afterUpdateRuleOperator",(function(i,r){var o=r.$el.find("button.filter-description");var a=i.builder.getFilterDescription(r.filter,r);if(!a){o.hide()}else{if(o.length===0){o=e('<button type="button" class="btn btn-xs btn-info filter-description" data-toggle="bootbox"><i class="'+t.icon+'"></i></button>');o.prependTo(r.$el.find(n.selectors.rule_actions));o.on("click",(function(){bootbox.alert(o.data("description"))}))}else{o.css("display","")}o.data("description",a)}}))}}),{icon:"glyphicon glyphicon-info-sign",mode:"popover"});n.extend({getFilterDescription:function(e,t){if(!e){return undefined}else if(typeof e.description=="function"){return e.description.call(this,t)}else{return e.description}}});n.define("invert",(function(t){var i=this;var r=n.selectors;this.on("afterInit",(function(){i.$el.on("click.queryBuilder","[data-invert=group]",(function(){var n=e(this).closest(r.group_container);i.invert(i.getModel(n),t)}));if(t.display_rules_button&&t.invert_rules){i.$el.on("click.queryBuilder","[data-invert=rule]",(function(){var n=e(this).closest(r.rule_container);i.invert(i.getModel(n),t)}))}}));if(!t.disable_template){this.on("getGroupTemplate.filter",(function(n){var o=e(n.value);o.find(r.condition_container).after('<button type="button" class="btn btn-xs btn-default" data-invert="group">'+'<i class="'+t.icon+'"></i> '+i.translate("invert")+"</button>");n.value=o.prop("outerHTML")}));if(t.display_rules_button&&t.invert_rules){this.on("getRuleTemplate.filter",(function(n){var o=e(n.value);o.find(r.rule_actions).prepend('<button type="button" class="btn btn-xs btn-default" data-invert="rule">'+'<i class="'+t.icon+'"></i> '+i.translate("invert")+"</button>");n.value=o.prop("outerHTML")}))}}}),{icon:"glyphicon glyphicon-random",recursive:true,invert_rules:true,display_rules_button:false,silent_fail:false,disable_template:false});n.defaults({operatorOpposites:{equal:"not_equal",not_equal:"equal",in:"not_in",not_in:"in",less:"greater_or_equal",less_or_equal:"greater",greater:"less_or_equal",greater_or_equal:"less",between:"not_between",not_between:"between",begins_with:"not_begins_with",not_begins_with:"begins_with",contains:"not_contains",not_contains:"contains",ends_with:"not_ends_with",not_ends_with:"ends_with",is_empty:"is_not_empty",is_not_empty:"is_empty",is_null:"is_not_null",is_not_null:"is_null"},conditionOpposites:{AND:"OR",OR:"AND"}});n.extend({invert:function(t,i){if(!(t instanceof a)){if(!this.model.root)return;i=t;t=this.model.root}if(typeof i!="object")i={};if(i.recursive===undefined)i.recursive=true;if(i.invert_rules===undefined)i.invert_rules=true;if(i.silent_fail===undefined)i.silent_fail=false;if(i.trigger===undefined)i.trigger=true;if(t instanceof s){if(this.settings.conditionOpposites[t.condition]){t.condition=this.settings.conditionOpposites[t.condition]}else if(!i.silent_fail){r.error("InvertCondition",'Unknown inverse of condition "{0}"',t.condition)}if(i.recursive){var n=e.extend({},i,{trigger:false});t.each((function(e){if(i.invert_rules){this.invert(e,n)}}),(function(e){this.invert(e,n)}),this)}}else if(t instanceof l){if(t.operator&&!t.filter.no_invert){if(this.settings.operatorOpposites[t.operator.type]){var o=this.settings.operatorOpposites[t.operator.type];if(!t.filter.operators||t.filter.operators.indexOf(o)!=-1){t.operator=this.getOperatorByType(o)}}else if(!i.silent_fail){r.error("InvertOperator",'Unknown inverse of operator "{0}"',t.operator.type)}}}if(i.trigger){this.trigger("afterInvert",t,i);this.trigger("rulesChanged")}}});n.defaults({mongoOperators:{equal:function(e){return e[0]},not_equal:function(e){return{$ne:e[0]}},in:function(e){return{$in:e}},not_in:function(e){return{$nin:e}},less:function(e){return{$lt:e[0]}},less_or_equal:function(e){return{$lte:e[0]}},greater:function(e){return{$gt:e[0]}},greater_or_equal:function(e){return{$gte:e[0]}},between:function(e){return{$gte:e[0],$lte:e[1]}},not_between:function(e){return{$lt:e[0],$gt:e[1]}},begins_with:function(e){return{$regex:"^"+r.escapeRegExp(e[0])}},not_begins_with:function(e){return{$regex:"^(?!"+r.escapeRegExp(e[0])+")"}},contains:function(e){return{$regex:r.escapeRegExp(e[0])}},not_contains:function(e){return{$regex:"^((?!"+r.escapeRegExp(e[0])+").)*$",$options:"s"}},ends_with:function(e){return{$regex:r.escapeRegExp(e[0])+"$"}},not_ends_with:function(e){return{$regex:"(?<!"+r.escapeRegExp(e[0])+")$"}},is_empty:function(e){return""},is_not_empty:function(e){return{$ne:""}},is_null:function(e){return null},is_not_null:function(e){return{$ne:null}}},mongoRuleOperators:{$eq:function(e){return{val:e,op:e===null?"is_null":e===""?"is_empty":"equal"}},$ne:function(e){e=e.$ne;return{val:e,op:e===null?"is_not_null":e===""?"is_not_empty":"not_equal"}},$regex:function(e){e=e.$regex;if(e.slice(0,4)=="^(?!"&&e.slice(-1)==")"){return{val:e.slice(4,-1),op:"not_begins_with"}}else if(e.slice(0,5)=="^((?!"&&e.slice(-5)==").)*$"){return{val:e.slice(5,-5),op:"not_contains"}}else if(e.slice(0,4)=="(?<!"&&e.slice(-2)==")$"){return{val:e.slice(4,-2),op:"not_ends_with"}}else if(e.slice(-1)=="$"){return{val:e.slice(0,-1),op:"ends_with"}}else if(e.slice(0,1)=="^"){return{val:e.slice(1),op:"begins_with"}}else{return{val:e,op:"contains"}}},between:function(e){return{val:[e.$gte,e.$lte],op:"between"}},not_between:function(e){return{val:[e.$lt,e.$gt],op:"not_between"}},$in:function(e){return{val:e.$in,op:"in"}},$nin:function(e){return{val:e.$nin,op:"not_in"}},$lt:function(e){return{val:e.$lt,op:"less"}},$lte:function(e){return{val:e.$lte,op:"less_or_equal"}},$gt:function(e){return{val:e.$gt,op:"greater"}},$gte:function(e){return{val:e.$gte,op:"greater_or_equal"}}}});n.extend({getMongo:function(e){e=e===undefined?this.getRules():e;if(!e){return null}var t=this;return function e(i){if(!i.condition){i.condition=t.settings.default_condition}if(["AND","OR"].indexOf(i.condition.toUpperCase())===-1){r.error("UndefinedMongoCondition",'Unable to build MongoDB query with condition "{0}"',i.condition)}if(!i.rules){return{}}var n=[];i.rules.forEach((function(i){if(i.rules&&i.rules.length>0){n.push(e(i))}else{var o=t.settings.mongoOperators[i.operator];var a=t.getOperatorByType(i.operator);if(o===undefined){r.error("UndefinedMongoOperator",'Unknown MongoDB operation for operator "{0}"',i.operator)}if(a.nb_inputs!==0){if(!(i.value instanceof Array)){i.value=[i.value]}}var s=t.change("getMongoDBField",i.field,i);var l={};l[s]=o.call(t,i.value);n.push(t.change("ruleToMongo",l,i,i.value,o))}}));var o={};o["$"+i.condition.toLowerCase()]=n;return t.change("groupToMongo",o,i)}(e)},getRulesFromMongo:function(e){if(e===undefined||e===null){return null}var t=this;e=t.change("parseMongoNode",e);if("rules"in e&&"condition"in e){return e}if("id"in e&&"operator"in e&&"value"in e){return{condition:this.settings.default_condition,rules:[e]}}var i=t.getMongoCondition(e);if(!i){r.error("MongoParse","Invalid MongoDB query format")}return function e(i,n){var o=i[n];var a=[];o.forEach((function(i){i=t.change("parseMongoNode",i);if("rules"in i&&"condition"in i){a.push(i);return}if("id"in i&&"operator"in i&&"value"in i){a.push(i);return}var n=t.getMongoCondition(i);if(n){a.push(e(i,n))}else{var o=Object.keys(i)[0];var s=i[o];var l=t.getMongoOperator(s);if(l===undefined){r.error("MongoParse","Invalid MongoDB query format")}var u=t.settings.mongoRuleOperators[l];if(u===undefined){r.error("UndefinedMongoOperator",'JSON Rule operation unknown for operator "{0}"',l)}var c=u.call(t,s);var d=t.getMongoDBFieldID(o,s);var f=t.change("mongoToRule",{id:d,field:o,operator:c.op,value:c.val},i);a.push(f)}}));return t.change("mongoToGroup",{condition:n.replace("$","").toUpperCase(),rules:a},i)}(e,i)},setRulesFromMongo:function(e){this.setRules(this.getRulesFromMongo(e))},getMongoDBFieldID:function(e,t){var i=this.filters.filter((function(t){return t.field===e}));var n;if(i.length===1){n=i[0].id}else{n=this.change("getMongoDBFieldID",e,t)}return n},getMongoOperator:function(e){if(e!==null&&typeof e==="object"){if(e.$gte!==undefined&&e.$lte!==undefined){return"between"}if(e.$lt!==undefined&&e.$gt!==undefined){return"not_between"}var t=Object.keys(e).filter(function(e){return!!this.settings.mongoRuleOperators[e]}.bind(this));if(t.length===1){return t[0]}}else{return"$eq"}},getMongoCondition:function(e){var t=Object.keys(e);for(var i=0,n=t.length;i<n;i++){if(t[i].toLowerCase()==="$or"||t[i].toLowerCase()==="$and"){return t[i]}}}});n.define("not-group",(function(t){var i=this;this.on("afterInit",(function(){i.$el.on("click.queryBuilder","[data-not=group]",(function(){var t=e(this).closest(n.selectors.group_container);var r=i.getModel(t);r.not=!r.not}));i.model.on("update",(function(e,t,n){if(t instanceof s&&n==="not"){i.updateGroupNot(t)}}))}));this.on("afterAddGroup",(function(e,t){t.__.not=false}));if(!t.disable_template){this.on("getGroupTemplate.filter",(function(r){var o=e(r.value);o.find(n.selectors.condition_container).prepend('<button type="button" class="btn btn-xs btn-default" data-not="group">'+'<i class="'+t.icon_unchecked+'"></i> '+i.translate("NOT")+"</button>");r.value=o.prop("outerHTML")}))}this.on("groupToJson.filter",(function(e,t){e.value.not=t.not}));this.on("jsonToGroup.filter",(function(e,t){e.value.not=!!t.not}));this.on("groupToSQL.filter",(function(e,t){if(t.not){e.value="NOT ( "+e.value+" )"}}));this.on("parseSQLNode.filter",(function(e){if(e.value.name&&e.value.name.toUpperCase()=="NOT"){e.value=e.value.arguments.value[0];if(["AND","OR"].indexOf(e.value.operation.toUpperCase())===-1){e.value=new SQLParser.nodes.Op(i.settings.default_condition,e.value,null)}e.value.not=true}}));this.on("sqlGroupsDistinct.filter",(function(e,t,i,n){if(i.not&&n>0){e.value=true}}));this.on("sqlToGroup.filter",(function(e,t){e.value.not=!!t.not}));this.on("groupToMongo.filter",(function(e,t){var i="$"+t.condition.toLowerCase();if(t.not&&e.value[i]){e.value={$nor:[e.value]}}}));this.on("parseMongoNode.filter",(function(e){var t=Object.keys(e.value);if(t[0]=="$nor"){e.value=e.value[t[0]][0];e.value.not=true}}));this.on("mongoToGroup.filter",(function(e,t){e.value.not=!!t.not}))}),{icon_unchecked:"glyphicon glyphicon-unchecked",icon_checked:"glyphicon glyphicon-check",disable_template:false});r.defineModelProperties(s,["not"]);n.selectors.group_not=n.selectors.group_header+" [data-not=group]";n.extend({updateGroupNot:function(e){var t=this.plugins["not-group"];e.$el.find(">"+n.selectors.group_not).toggleClass("active",e.not).find("i").attr("class",e.not?t.icon_checked:t.icon_unchecked);this.trigger("afterUpdateGroupNot",e);this.trigger("rulesChanged")}});n.define("sortable",(function(t){if(!("interact"in window)){r.error("MissingLibrary",'interact.js is required to use "sortable" plugin. Get it here: http://interactjs.io')}if(t.default_no_sortable!==undefined){r.error(false,"Config",'Sortable plugin : "default_no_sortable" options is deprecated, use standard "default_rule_flags" and "default_group_flags" instead');this.settings.default_rule_flags.no_sortable=this.settings.default_group_flags.no_sortable=t.default_no_sortable}interact.dynamicDrop(true);interact.pointerMoveTolerance(10);var i;var o;var a;var l;this.on("afterAddRule afterAddGroup",(function(r,c){if(c==i){return}var d=r.builder;if(t.inherit_no_sortable&&c.parent&&c.parent.flags.no_sortable){c.flags.no_sortable=true}if(t.inherit_no_drop&&c.parent&&c.parent.flags.no_drop){c.flags.no_drop=true}if(!c.flags.no_sortable){interact(c.$el[0]).draggable({allowFrom:n.selectors.drag_handle,onstart:function(t){l=false;a=d.getModel(t.target);o=a.$el.clone().appendTo(a.$el.parent()).width(a.$el.outerWidth()).addClass("dragging");var n=e('<div class="rule-placeholder">&nbsp;</div>').height(a.$el.outerHeight());i=a.parent.addRule(n,a.getPos());a.$el.hide()},onmove:function(e){o[0].style.top=e.clientY-15+"px";o[0].style.left=e.clientX-15+"px"},onend:function(t){if(t.dropzone){u(a,e(t.relatedTarget),d);l=true}o.remove();o=undefined;i.drop();i=undefined;a.$el.css("display","");d.trigger("afterMove",a);d.trigger("rulesChanged")}})}if(!c.flags.no_drop){interact(c.$el[0]).dropzone({accept:n.selectors.rule_and_group_containers,ondragenter:function(t){u(i,e(t.target),d)},ondrop:function(t){if(!l){u(a,e(t.target),d)}}});if(c instanceof s){interact(c.$el.find(n.selectors.group_header)[0]).dropzone({accept:n.selectors.rule_and_group_containers,ondragenter:function(t){u(i,e(t.target),d)},ondrop:function(t){if(!l){u(a,e(t.target),d)}}})}}}));this.on("beforeDeleteRule beforeDeleteGroup",(function(e,t){if(!e.isDefaultPrevented()){interact(t.$el[0]).unset();if(t instanceof s){interact(t.$el.find(n.selectors.group_header)[0]).unset()}}}));this.on("afterApplyRuleFlags afterApplyGroupFlags",(function(e,t){if(t.flags.no_sortable){t.$el.find(".drag-handle").remove()}}));if(!t.disable_template){this.on("getGroupTemplate.filter",(function(i,r){if(r>1){var o=e(i.value);o.find(n.selectors.condition_container).after('<div class="drag-handle"><i class="'+t.icon+'"></i></div>');i.value=o.prop("outerHTML")}}));this.on("getRuleTemplate.filter",(function(i){var r=e(i.value);r.find(n.selectors.rule_header).after('<div class="drag-handle"><i class="'+t.icon+'"></i></div>');i.value=r.prop("outerHTML")}))}}),{inherit_no_sortable:true,inherit_no_drop:true,icon:"glyphicon glyphicon-sort",disable_template:false});n.selectors.rule_and_group_containers=n.selectors.rule_container+", "+n.selectors.group_container;n.selectors.drag_handle=".drag-handle";n.defaults({default_rule_flags:{no_sortable:false,no_drop:false},default_group_flags:{no_sortable:false,no_drop:false}});function u(e,t,i){var r,o;var a=n.selectors;r=t.closest(a.rule_container);if(r.length){o="moveAfter"}if(!o){r=t.closest(a.group_header);if(r.length){r=t.closest(a.group_container);o="moveAtBegin"}}if(!o){r=t.closest(a.group_container);if(r.length){o="moveAtEnd"}}if(o){e[o](i.getModel(r));if(i&&e instanceof l){i.setRuleInputValue(e,e.value)}}}n.define("sql-support",(function(e){}),{boolean_as_integer:true});n.defaults({sqlOperators:{equal:{op:"= ?"},not_equal:{op:"!= ?"},in:{op:"IN(?)",sep:", "},not_in:{op:"NOT IN(?)",sep:", "},less:{op:"< ?"},less_or_equal:{op:"<= ?"},greater:{op:"> ?"},greater_or_equal:{op:">= ?"},between:{op:"BETWEEN ?",sep:" AND "},not_between:{op:"NOT BETWEEN ?",sep:" AND "},begins_with:{op:"LIKE(?)",mod:"{0}%"},not_begins_with:{op:"NOT LIKE(?)",mod:"{0}%"},contains:{op:"LIKE(?)",mod:"%{0}%"},not_contains:{op:"NOT LIKE(?)",mod:"%{0}%"},ends_with:{op:"LIKE(?)",mod:"%{0}"},not_ends_with:{op:"NOT LIKE(?)",mod:"%{0}"},is_empty:{op:"= ''"},is_not_empty:{op:"!= ''"},is_null:{op:"IS NULL"},is_not_null:{op:"IS NOT NULL"}},sqlRuleOperator:{"=":function(e){return{val:e,op:e===""?"is_empty":"equal"}},"!=":function(e){return{val:e,op:e===""?"is_not_empty":"not_equal"}},LIKE:function(e){if(e.slice(0,1)=="%"&&e.slice(-1)=="%"){return{val:e.slice(1,-1),op:"contains"}}else if(e.slice(0,1)=="%"){return{val:e.slice(1),op:"ends_with"}}else if(e.slice(-1)=="%"){return{val:e.slice(0,-1),op:"begins_with"}}else{r.error("SQLParse",'Invalid value for LIKE operator "{0}"',e)}},"NOT LIKE":function(e){if(e.slice(0,1)=="%"&&e.slice(-1)=="%"){return{val:e.slice(1,-1),op:"not_contains"}}else if(e.slice(0,1)=="%"){return{val:e.slice(1),op:"not_ends_with"}}else if(e.slice(-1)=="%"){return{val:e.slice(0,-1),op:"not_begins_with"}}else{r.error("SQLParse",'Invalid value for NOT LIKE operator "{0}"',e)}},IN:function(e){return{val:e,op:"in"}},"NOT IN":function(e){return{val:e,op:"not_in"}},"<":function(e){return{val:e,op:"less"}},"<=":function(e){return{val:e,op:"less_or_equal"}},">":function(e){return{val:e,op:"greater"}},">=":function(e){return{val:e,op:"greater_or_equal"}},BETWEEN:function(e){return{val:e,op:"between"}},"NOT BETWEEN":function(e){return{val:e,op:"not_between"}},IS:function(e){if(e!==null){r.error("SQLParse","Invalid value for IS operator")}return{val:null,op:"is_null"}},"IS NOT":function(e){if(e!==null){r.error("SQLParse","Invalid value for IS operator")}return{val:null,op:"is_not_null"}}},sqlStatements:{question_mark:function(){var e=[];return{add:function(t,i){e.push(i);return"?"},run:function(){return e}}},numbered:function(e){if(!e||e.length>1)e="$";var t=0;var i=[];return{add:function(n,r){i.push(r);t++;return e+t},run:function(){return i}}},named:function(e){if(!e||e.length>1)e=":";var t={};var i={};return{add:function(n,r){if(!t[n.field])t[n.field]=1;var o=n.field+"_"+t[n.field]++;i[o]=r;return e+o},run:function(){return i}}}},sqlRuleStatement:{question_mark:function(e){var t=0;return{parse:function(i){return i=="?"?e[t++]:i},esc:function(e){return e.replace(/\?/g,"'?'")}}},numbered:function(e,t){if(!t||t.length>1)t="$";var i=new RegExp("^\\"+t+"[0-9]+$");var n=new RegExp("\\"+t+"([0-9]+)","g");return{parse:function(t){return i.test(t)?e[t.slice(1)-1]:t},esc:function(e){return e.replace(n,"'"+(t=="$"?"$$":t)+"$1'")}}},named:function(e,t){if(!t||t.length>1)t=":";var i=new RegExp("^\\"+t);var n=new RegExp("\\"+t+"("+Object.keys(e).join("|")+")","g");return{parse:function(t){return i.test(t)?e[t.slice(1)]:t},esc:function(e){return e.replace(n,"'"+(t=="$"?"$$":t)+"$1'")}}}}});n.extend({getSQL:function(e,t,i){i=i===undefined?this.getRules():i;if(!i){return null}t=!!t?"\n":" ";var n=this.getPluginOptions("sql-support","boolean_as_integer");if(e===true){e="question_mark"}if(typeof e=="string"){var o=c(e);e=this.settings.sqlStatements[o[1]](o[2])}var a=this;var s=function i(o){if(!o.condition){o.condition=a.settings.default_condition}if(["AND","OR"].indexOf(o.condition.toUpperCase())===-1){r.error("UndefinedSQLCondition",'Unable to build SQL query with condition "{0}"',o.condition)}if(!o.rules){return""}var s=[];o.rules.forEach((function(o){if(o.rules&&o.rules.length>0){s.push("("+t+i(o)+t+")"+t)}else{var l=a.settings.sqlOperators[o.operator];var u=a.getOperatorByType(o.operator);var c="";if(l===undefined){r.error("UndefinedSQLOperator",'Unknown SQL operation for operator "{0}"',o.operator)}if(u.nb_inputs!==0){if(!(o.value instanceof Array)){o.value=[o.value]}o.value.forEach((function(t,i){if(i>0){c+=l.sep}if(o.type=="boolean"&&n){t=t?1:0}else if(!e&&o.type!=="integer"&&o.type!=="double"&&o.type!=="boolean"){t=r.escapeString(t)}if(l.mod){t=r.fmt(l.mod,t)}if(e){c+=e.add(o,t)}else{if(typeof t=="string"){t="'"+t+"'"}c+=t}}))}var d=function(e){return l.op.replace("?",(function(){return e}))};var f=a.change("getSQLField",o.field,o);var p=f+" "+d(c);s.push(a.change("ruleToSQL",p,o,c,d))}}));var l=s.join(" "+o.condition+t);return a.change("groupToSQL",l,o)}(i);if(e){return{sql:s,params:e.run()}}else{return{sql:s}}},getRulesFromSQL:function(t,i){if(!("SQLParser"in window)){r.error("MissingLibrary","SQLParser is required to parse SQL queries. Get it here https://github.com/mistic100/sql-parser")}var n=this;if(typeof t=="string"){t={sql:t}}if(i===true)i="question_mark";if(typeof i=="string"){var o=c(i);i=this.settings.sqlRuleStatement[o[1]](t.params,o[2])}if(i){t.sql=i.esc(t.sql)}if(t.sql.toUpperCase().indexOf("SELECT")!==0){t.sql="SELECT * FROM table WHERE "+t.sql}var a=SQLParser.parse(t.sql);if(!a.where){r.error("SQLParse","No WHERE clause found")}var s=n.change("parseSQLNode",a.where.conditions);if("rules"in s&&"condition"in s){return s}if("id"in s&&"operator"in s&&"value"in s){return{condition:this.settings.default_condition,rules:[s]}}var l=n.change("sqlToGroup",{condition:this.settings.default_condition,rules:[]},s);var u=l;(function t(o,a){if(o===null){return}o=n.change("parseSQLNode",o);if("rules"in o&&"condition"in o){u.rules.push(o);return}if("id"in o&&"operator"in o&&"value"in o){u.rules.push(o);return}if(!("left"in o)||!("right"in o)||!("operation"in o)){r.error("SQLParse","Unable to parse WHERE clause")}if(["AND","OR"].indexOf(o.operation.toUpperCase())!==-1){var s=n.change("sqlGroupsDistinct",a>0&&u.condition!=o.operation.toUpperCase(),u,o,a);if(s){var l=n.change("sqlToGroup",{condition:n.settings.default_condition,rules:[]},o);u.rules.push(l);u=l}u.condition=o.operation.toUpperCase();a++;var c=u;t(o.left,a);u=c;t(o.right,a)}else{if(e.isPlainObject(o.right.value)){r.error("SQLParse","Value format not supported for {0}.",o.left.value)}var d;if(e.isArray(o.right.value)){d=o.right.value.map((function(e){return e.value}))}else{d=o.right.value}if(i){if(e.isArray(d)){d=d.map(i.parse)}else{d=i.parse(d)}}var f=o.operation.toUpperCase();if(f=="<>"){f="!="}var p=n.settings.sqlRuleOperator[f];if(p===undefined){r.error("UndefinedSQLOperator",'Invalid SQL operation "{0}".',o.operation)}var h=p.call(this,d,o.operation);var g;if("values"in o.left){g=o.left.values.join(".")}else if("value"in o.left){g=o.left.value}else{r.error("SQLParse","Cannot find field name in {0}",JSON.stringify(o.left))}var m=n.getSQLFieldID(g,d);var v=n.change("sqlToRule",{id:m,field:g,operator:h.op,value:h.val},o);u.rules.push(v)}})(s,0);return l},setRulesFromSQL:function(e,t){this.setRules(this.getRulesFromSQL(e,t))},getSQLFieldID:function(e,t){var i=this.filters.filter((function(t){return t.field.toLowerCase()===e.toLowerCase()}));var n;if(i.length===1){n=i[0].id}else{n=this.change("getSQLFieldID",e,t)}return n}});function c(e){var t=e.match(/(question_mark|numbered|named)(?:\((.)\))?/);if(!t)t=[null,"question_mark",undefined];return t}n.define("unique-filter",(function(){this.status.used_filters={};this.on("afterUpdateRuleFilter",this.updateDisabledFilters);this.on("afterDeleteRule",this.updateDisabledFilters);this.on("afterCreateRuleFilters",this.applyDisabledFilters);this.on("afterReset",this.clearDisabledFilters);this.on("afterClear",this.clearDisabledFilters);this.on("getDefaultFilter.filter",(function(e,t){var i=e.builder;i.updateDisabledFilters();if(e.value.id in i.status.used_filters){var n=i.filters.some((function(n){if(!(n.id in i.status.used_filters)||i.status.used_filters[n.id].length>0&&i.status.used_filters[n.id].indexOf(t.parent)===-1){e.value=n;return true}}));if(!n){r.error(false,"UniqueFilter","No more non-unique filters available");e.value=undefined}}}))}));n.extend({updateDisabledFilters:function(e){var t=e?e.builder:this;t.status.used_filters={};if(!t.model){return}(function e(i){i.each((function(e){if(e.filter&&e.filter.unique){if(!t.status.used_filters[e.filter.id]){t.status.used_filters[e.filter.id]=[]}if(e.filter.unique=="group"){t.status.used_filters[e.filter.id].push(e.parent)}}}),(function(t){e(t)}))})(t.model.root);t.applyDisabledFilters(e)},clearDisabledFilters:function(e){var t=e?e.builder:this;t.status.used_filters={};t.applyDisabledFilters(e)},applyDisabledFilters:function(t){var i=t?t.builder:this;i.$el.find(n.selectors.filter_container+" option").prop("disabled",false);e.each(i.status.used_filters,(function(e,t){if(t.length===0){i.$el.find(n.selectors.filter_container+' option[value="'+e+'"]:not(:selected)').prop("disabled",true)}else{t.forEach((function(t){t.each((function(t){t.$el.find(n.selectors.filter_container+' option[value="'+e+'"]:not(:selected)').prop("disabled",true)}))}))}}));if(i.settings.plugins&&i.settings.plugins["bt-selectpicker"]){i.$el.find(n.selectors.rule_filter).selectpicker("render")}}});n.regional["en"]={__locale:"English (en)",__author:'Damien "Mistic" Sorel, http://www.strangeplanet.fr',add_rule:t("querybuilder.common.add_rule"),add_group:t("querybuilder.common.add_group"),delete_rule:t("querybuilder.common.delete_rule"),delete_group:t("querybuilder.common.delete_group"),conditions:{AND:t("querybuilder.conditions.AND"),OR:t("querybuilder.conditions.OR")},operators:{equal:t("querybuilder.operators.equal"),not_equal:t("querybuilder.operators.not_equal"),in:t("querybuilder.operators.in"),not_in:t("querybuilder.operators.not_in"),less:t("querybuilder.operators.less"),less_or_equal:t("querybuilder.operators.less_or_equal"),greater:t("querybuilder.operators.greater"),greater_or_equal:t("querybuilder.operators.greater_or_equal"),between:t("querybuilder.operators.between"),not_between:t("querybuilder.operators.not_between"),begins_with:t("querybuilder.operators.begins_with"),not_begins_with:t("querybuilder.operators.not_begins_with"),contains:t("querybuilder.operators.contains"),not_contains:t("querybuilder.operators.not_contains"),ends_with:t("querybuilder.operators.ends_with"),not_ends_with:t("querybuilder.operators.not_ends_with"),is_empty:t("querybuilder.operators.is_empty"),is_not_empty:t("querybuilder.operators.is_not_empty"),is_null:t("querybuilder.operators.is_null"),is_not_null:t("querybuilder.operators.is_not_null"),before:t("querybuilder.operators.before"),after:t("querybuilder.operators.after"),like:"Like",not_like:"Not like"},errors:{no_filter:t("querybuilder.errors.no_filter"),empty_group:t("querybuilder.errors.empty_group"),radio_empty:t("querybuilder.errors.radio_empty"),checkbox_empty:t("querybuilder.errors.checkbox_empty"),select_empty:t("querybuilder.errors.select_empty"),string_empty:t("querybuilder.errors.string_empty"),string_exceed_min_length:t("querybuilder.errors.string_exceed_min_length"),string_exceed_max_length:t("querybuilder.errors.string_exceed_max_length"),string_invalid_format:t("querybuilder.errors.string_invalid_format"),number_nan:t("querybuilder.errors.number_nan"),number_not_integer:t("querybuilder.errors.number_not_integer"),number_not_double:t("querybuilder.errors.number_not_double"),number_exceed_min:t("querybuilder.errors.number_exceed_min"),number_exceed_max:t("querybuilder.errors.number_exceed_max"),number_wrong_step:t("querybuilder.errors.number_wrong_step"),number_between_invalid:"Invalid values, {0} is greater than {1}",datetime_empty:t("querybuilder.errors.datetime_empty"),datetime_invalid:t("querybuilder.errors.datetime_invalid"),datetime_exceed_min:t("querybuilder.errors.datetime_exceed_min"),datetime_exceed_max:t("querybuilder.errors.datetime_exceed_max"),datetime_between_invalid:"Invalid values, {0} is greater than {1}",boolean_not_valid:t("querybuilder.errors.boolean_not_valid"),operator_not_multiple:t("querybuilder.errors.operator_not_multiple")},invert:t("querybuilder.common.invert"),NOT:"NOT"};n.defaults({lang_code:"en"});return n}));(function(){var e;e=function(e,t,i){var n=this;t=_.bind(t,this);if(i&&i.exists()){i=i.first()}else{i=$(document)}_.each(e,(function(e,r){i.on(r,e,(function(e,i){n.event=e;n.trigger=r;n.el=$(this);n.data=i;t();var o=$(n.event.target);if(o.is("a")||o.parent("a").length===1){n.event.preventDefault()}}))}))};e.new=function(t,i,n){new e(t,i,n)};e.translate=function(e){var t={};_.each(e,(function(e,i){e=e.split(/,\s?/);e=_.map(e,(function(e){return'[data-action="'+e+'"]'})).join(", ");t[i]=e}));return t};AGN.Lib.Action=e})();(function(){function e(e,i,n){var r=AGN.Lib.Storage.get("autosave#"+e);if(r){var o=i?i(r.values,r.timestamp):r.values;if(o){var a=AGN.Lib.Template.text("autosave-restore",{modalClass:"",title:t("autosave.confirm.title"),content:t("autosave.confirm.question",new Date(r.timestamp).toLocaleString(window.adminLocale,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),negative:t("autosave.discard"),positive:t("autosave.restore")});var s=AGN.Lib.Confirm.create(a).done((function(){n(o===true?r.values:o,r.timestamp);AGN.Lib.Messages(t("autosave.success.title"),t("autosave.success.message"),"success")})).always((function(){AGN.Lib.Storage.delete("autosave#"+e)}));return s.promise()}else{AGN.Lib.Storage.delete("autosave#"+e)}}return $.Deferred().reject().promise()}function i(e,t,i){var n=function(){var i=t();if(i){AGN.Lib.Storage.set("autosave#"+e,{timestamp:(new Date).getTime(),values:i})}return i!==false};if(i>0){var r=setInterval((function(){n()||clearInterval(r)}),i*1e3)}var o=function(){n()||$(document).unbind("ajax:unauthorized",o)};$(document).on("ajax:unauthorized",o)}AGN.Lib.AutoSave={initialize:function(t,n,r,o,a){var s=e(t,r,o);i(t,n,a);return s}}})();(function(){AGN.Lib.Breadcrumbs={truncate:function(t){$.each(t.find(".breadcrumbs.js-ellipsis"),(function(t,i){var n=$(i);var r=n.children("li");n.find("*").removeClass("breadcrumb-element-small");r.removeClass("abbreviated");r.css({"min-width":"","max-width":""});r.show();if(e(n)){return}n.find("*").addClass("breadcrumb-element-small");if(e(n)){return}var o=[];var a=n.parent().width();$.each(r,(function(e,t){var i=$(t);if(i.hasClass("js-ellipsis")){var n=i.html();i.html("&hellip;");var r=i.outerWidth(true);i.html(n);var s=i.outerWidth(true);var l=r<s?r:s;i.addClass("abbreviated");var u=i.outerWidth(true);i.removeClass("abbreviated");o.unshift({$item:i,width:s,minimumWidth:l+1,minimumWidthAbbreviated:l+(u-s)+1})}else{a-=i.outerWidth(true)}}));var s=o.length-1;for(var l=0;l<=s;l++){var u=o[l];var c=u.$item;u.width=c.outerWidth(true);if(u.width>a){var d;if(l==s){d=u.minimumWidth}else{c.addClass("abbreviated");d=u.minimumWidthAbbreviated;for(var f=l+1;f<=s;f++){o[f].$item.hide()}}if(d>a&&l>0){c.hide();var p=o[l-1];var h=p.$item;h.addClass("abbreviated");if(h.outerWidth(true)-p.width>a){h.css("max-width",p.width+a)}}else{c.css("max-width",a)}break}else{a-=u.width}}}))}};function e(e){var t=e.parent().width();var i=0;e.children("li").each((function(){i+=$(this).outerWidth(true)}));return Math.floor(i)<=Math.floor(t)}})();(function(){function e(e,t){try{navigator.clipboard.writeText(e).then((function(){t(true)}),(function(){t(false)}))}catch(e){console.warn(e);t(false)}}function t(e,t){var i=true;try{var n=$("<input>");$("body").append(n);n.val(e);n.select();document.execCommand("copy");n.remove()}catch(e){console.warn(e);i=false}if(t){t(i)}}AGN.Lib.Clipboard={set:function(i,n){e(i,(function(e){if(e){if(n){n(i,true)}}else{t(i,(function(e){if(n){n(i,e)}}))}}))}}})();(function(){var e;e=function(e,t){this.$modal=e;this.deferred=t||$.Deferred()};e.get=function(t){var i=e.getWrapper(t);return i.data("_confirm")};e.create=function(t,i){var n,r=AGN.Lib.Modal.create(t);n=new e(r,i);r.data("_confirm",n);return n.promise()};e.from=function(t){return e.createFromTemplate({},t)};e.createFromTemplate=function(t,i,n){var r,o=AGN.Lib.Modal.createFromTemplate(t,i);r=new e(o,n);o.data("_confirm",r);return r.promise()};e.request=function(t){var i=$.Deferred();var n;if(_.isString(t)){n=$.get(t)}else{n=t}n.done((function(t){var n=$(t),r=n.all(".modal");if(r.length===1){var o=new e(r,i);r.data("_confirm",o);AGN.Lib.Modal.create(r)}else{AGN.Lib.Page.render(t);i.reject()}})).fail((function(){i.reject()}));return i.promise()};e.getWrapper=function(e){var t;t=$(e.data("confirm-target"));if(t.length==0){t=e.closest(".modal")}return t};e.prototype.promise=function(){return this.deferred.promise()};e.prototype.positive=function(e){this.deferred.resolve(e);this.$modal.modal("hide");this.$modal.remove()};e.prototype.negative=function(e){this.deferred.reject(e);this.$modal.modal("hide");this.$modal.remove()};AGN.Lib.Confirm=e})();(function(){AGN.Lib.ContextMenu={create:function(t){$.each(t,(function(t,i){$.contextMenu({selector:t,build:function(t,n){return e(i,t,n)}})}))}};function e(e,t,i){if(e.shown===false||_.isFunction(e.shown)&&e.shown(t,i)===false){return false}var n=e.items;if(_.isFunction(n)){n=n(t,i)}var r={};var o=0;$.each(n,(function(e,n){if(!_.isFunction(n.shown)||n.shown(t,i)!==false){var a=r[e]={name:n.name,icon:n.icon};if(_.isFunction(n.disabled)){a.disabled=n.disabled(t,i)===true}else if(n.disabled===true){a.disabled=true}if(_.isFunction(n.clicked)){a.callback=function(e,i){n.clicked(t,e,i)}}o++}}));return o?{items:r}:false}})();(function(){var e;e=function(e){e=_.bind(e,this);e()};e.prototype.addAction=function(e,t){AGN.Lib.Action.new(AGN.Lib.Action.translate(e),t)};e.prototype.addInitializer=function(e,t){AGN.Lib.CoreInitializer.new(e,t)};e.prototype.addDomInitializer=function(e,t){AGN.Lib.DomInitializer.new(e,t)};e.prototype.runInitializer=function(e){AGN.Lib.CoreInitializer.run(e)};e.new=function(e,t){AGN.Opt.Controllers[e]=t};e.init=function(e){if(!e){e=$(document)}e.all("[data-controller]").each((function(){var e=$(this),t=AGN.Opt.Controllers[e.data("controller")];if(t){new AGN.Lib.Controller(t);AGN.Opt.Controllers[e.data("controller")]=undefined}}))};AGN.Lib.Controller=e})();(function(){var e={};function t(t){var i=null;var n;if(arguments.length>2){i=arguments[1];n=arguments[2]}else{n=arguments[1]}if(_.isFunction(n)){e["key#"+t]={name:t,handler:n,dependencies:i}}else{console.error("Handler must be a function")}}function i(t,n,r,o){var a="key#"+n.name;if(r[a]){return}if(Array.isArray(n.dependencies)&&n.dependencies.length){o.push(n.name);n.dependencies.forEach((function(n){var a=e["key#"+n];if(a){if(o.includes(n)){var s=o.map((function(e){return"`"+e+"`"})).join(" => ");console.error("Cyclic initializer dependency detected ("+s+" => `"+n+"`)");return}i(t,a,r,o)}else{console.error("Unknown initializer dependency: `"+name+"`")}}));o.pop()}try{n.handler.call(n.handler,t)}catch(e){console.error(e)}r[a]=true}function n(t){var n={};var r=[];$.each(e,(function(e,o){i(t,o,n,r)}))}function r(t,i){if(Array.isArray(t)){t.forEach((function(e){r(e,i)}))}else{var n=e["key#"+t];if(n){n.handler.call(n.handler,i);return true}else{console.error("Unknown initializer: `"+t+"`");return false}}}AGN.Lib.CoreInitializer={autorun:n,run:r,new:t}})();(function(){function e(){if(i()){return AGN.Lib.Storage.readCookie(window.csrfCookieName)}return""}function t(){return window.csrfParameterName}function i(){return window.csrfHeaderName&&t()&&window.csrfCookieName}function n(t,n){if(i()&&n!=="GET"){const i=e();t.setRequestHeader(window.csrfHeaderName,i)}}function r(t,n){if(!i()){return t}if(!t){t=$(document)}else if(!(t instanceof $)){t=$("<div>").append(t)}const r=e();const o=t.find('input[name="'+window.csrfParameterName+'"]');_.each(o,(function(e){$(e).val(r)}));if(n){return t.html()}}AGN.Lib.CSRF={readActualToken:e,isProtectionEnabled:i,setTokenToReqHeader:n,getParameterName:t,updateTokenInDOM:r}})();(function(){var e={};e.get=function(t){var i=t.data("provider"),n=t.data("provider-src"),r;switch(i){case"opt":r=e.opt(n);break;case"remote":r=e.remote(n);break;default:break}return r};e.opt=function(e){var t=$.Deferred();if(AGN.Opt[e]){setTimeout((function(){t.resolve(AGN.Opt[e])}),100)}else{setTimeout((function(){t.reject()}),100)}return t};e.remote=function(e){return $.get(e)};AGN.Lib.DataProvider=e})();(function(){var e;e={MONTH_NAMES:["January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAY_NAMES:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat"],LZ:function(e){return(e<0||e>9?"":"0")+e},compareDates:function(t,i,n,r){var o=e.parseFormat(t,i);var a=e.parseFormat(n,r);if(o==0||a==0)return-1;else if(o>a)return 1;return 0},format:function(t,i){i=i+"";var n="";var r=0;var o="";var a="";var s=t.getYear()+"";var l=t.getMonth()+1;var u=t.getDate();var c=t.getDay();var d=t.getHours();var f=t.getMinutes();var p=t.getSeconds();var h,g,m,v,y,b,_,w,C,A,E,d,x,T,S,D;var k=new Object;if(s.length<4){s=""+(s-0+1900)}k["y"]=""+s;k["yyyy"]=s;k["yy"]=s.substring(2,4);k["M"]=l;k["MM"]=e.LZ(l);k["MMM"]=e.MONTH_NAMES[l-1];k["NNN"]=e.MONTH_NAMES[l+11];k["d"]=u;k["dd"]=e.LZ(u);k["E"]=e.DAY_NAMES[c+7];k["EE"]=e.DAY_NAMES[c];k["H"]=d;k["HH"]=e.LZ(d);if(d==0){k["h"]=12}else if(d>12){k["h"]=d-12}else{k["h"]=d}k["hh"]=e.LZ(k["h"]);if(d>11){k["K"]=d-12}else{k["K"]=d}k["k"]=d+1;k["KK"]=e.LZ(k["K"]);k["kk"]=e.LZ(k["k"]);if(d>11){k["a"]="PM"}else{k["a"]="AM"}k["m"]=f;k["mm"]=e.LZ(f);k["s"]=p;k["ss"]=e.LZ(p);while(r<i.length){o=i.charAt(r);a="";while(i.charAt(r)==o&&r<i.length)a+=i.charAt(r++);if(k[a]!=null)n+=k[a];else n+=a}return n},_isInteger:function(e){var t="1234567890";for(var i=0;i<e.length;i++)if(t.indexOf(e.charAt(i))==-1)return false;return true},_getInt:function(t,i,n,r){for(var o=r;o>=n;o--){var a=t.substring(i,i+o);if(a.length<n)return null;if(e._isInteger(a))return a}return null},parseFormat:function(t,i){t=t+"";i=i+"";var n=0;var r=0;var o="";var a="";var s="";var l,u;var c=new Date;var d=c.getYear();var f=c.getMonth()+1;var p=1;var h=c.getHours();var g=c.getMinutes();var m=c.getSeconds();var v="";while(r<i.length){o=i.charAt(r);a="";while(i.charAt(r)==o&&r<i.length)a+=i.charAt(r++);if(a=="yyyy"||a=="yy"||a=="y"){if(a=="yyyy")l=4;u=4;if(a=="yy")l=2;u=2;if(a=="y")l=2;u=4;d=e._getInt(t,n,l,u);if(d==null)return 0;n+=d.length;if(d.length==2){if(d>70)d=1900+(d-0);else d=2e3+(d-0)}}else if(a=="MMM"||a=="NNN"){f=0;for(var y=0;y<e.MONTH_NAMES.length;y++){var b=e.MONTH_NAMES[y];if(t.substring(n,n+b.length).toLowerCase()==b.toLowerCase()){if(a=="MMM"||a=="NNN"&&y>11){f=y+1;if(f>12)f-=12;n+=b.length;break}}}if(f<1||f>12)return 0}else if(a=="EE"||a=="E"){for(var y=0;y<e.DAY_NAMES.length;y++){var _=e.DAY_NAMES[y];if(t.substring(n,n+_.length).toLowerCase()==_.toLowerCase()){n+=_.length;break}}}else if(a=="MM"||a=="M"){f=e._getInt(t,n,a.length,2);if(f==null||f<1||f>12)return 0;n+=f.length}else if(a=="dd"||a=="d"){p=e._getInt(t,n,a.length,2);if(p==null||p<1||p>31)return 0;n+=p.length}else if(a=="hh"||a=="h"){h=e._getInt(t,n,a.length,2);if(h==null||h<1||h>12)return 0;n+=h.length}else if(a=="HH"||a=="H"){h=e._getInt(t,n,a.length,2);if(h==null||h<0||h>23)return 0;n+=h.length}else if(a=="KK"||a=="K"){h=e._getInt(t,n,a.length,2);if(h==null||h<0||h>11)return 0;n+=h.length}else if(a=="kk"||a=="k"){h=e._getInt(t,n,a.length,2);if(h==null||h<1||h>24)return 0;n+=h.length;h--}else if(a=="mm"||a=="m"){g=e._getInt(t,n,a.length,2);if(g==null||g<0||g>59)return 0;n+=g.length}else if(a=="ss"||a=="s"){m=e._getInt(t,n,a.length,2);if(m==null||m<0||m>59)return 0;n+=m.length}else if(a=="a"){if(t.substring(n,n+2).toLowerCase()=="am")v="AM";else if(t.substring(n,n+2).toLowerCase()=="pm")v="PM";else return 0;n+=2}else{if(t.substring(n,n+a.length)!=a)return 0;else n+=a.length}}if(n!=t.length)return 0;if(f==2){if(d%4==0&&d%100!=0||d%400==0){if(p>29)return 0}else if(p>28){return 0}}if(f==4||f==6||f==9||f==11)if(p>30)return 0;if(h<12&&v=="PM")h=h-0+12;else if(h>11&&v=="AM")h-=12;var w=new Date(d,f-1,p,h,g,m);return w},parse:function(t,i){if(i){return e.parseFormat(t,i)}else{var n=arguments.length==2?arguments[1]:false;var r=new Array("y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d");var o=new Array("M/d/y","M-d-y","M.d.y","MMM-d","M/d","M-d");var a=new Array("d/M/y","d-M-y","d.M.y","d-MMM","d/M","d-M");var s=[r,n?a:o,n?o:a];var l=null;for(var u=0;u<s.length;u++){var c=s[u];for(var d=0;d<c.length;d++){l=e.parseFormat(t,c[d]);if(l!=0)return new Date(l)}}return null}},toArray:function(e,t){if(e&&e.getMonth){return[e.getFullYear(),e.getMonth(),e.getDate()]}else{return t}}};AGN.Lib.DateFormat=e})();(function(){var e='script[type="application/json"]';var t="config:";var i={};function n(i,n){this.el=i;if(i.is(e)){this.config=i.json()}else{var r=i.find("script#"+CSS.escape(t+n));if(r.exists()){var o=r.attr("type");if(!o||o==="application/json"){this.config=r.json()}else{console.error("Unexpected config script type: `"+o+"`")}}}}n.prototype.addAction=function(e,t){AGN.Lib.Action.new(AGN.Lib.Action.translate(e),t,this.el)};function r(e){var t=e;if(!t){t=$(document)}t.all("[data-initializer]").each((function(){var t=$(this);o(t.data("initializer"),t,e)}))}function o(e,t,r){var o=i["key#"+e];if(o){var a=o.call(new n(t,e),t,r);if(a===false){i["key#"+e]=undefined}return true}else{return false}}function a(e,t){if(i["key#"+e]){var n=t;if(!n){n=$(document)}n.all('[data-initializer="'+CSS.escape(e)+'"]').each((function(){o(e,$(this),t)}))}}function s(e,t){if(_.isFunction(t)){i["key#"+e]=t}else{console.error("Handler must be a function")}}AGN.Lib.DomInitializer={autorun:r,run:o,try:a,new:s}})();(function(){var e,t,i,n,r;e=function(e){var t=this,i,n,r,o;this.el=$(e);o=!!this.el.attr("readonly");this.isFullHeight=!!this.el.data("full-height-editor");this.height=parseInt(this.el.attr("rows")||15)*15;i=this.el.attr("id")+"Editor";n=$("#"+i);if(n.length===1){r=i;var a=n.data("full-height-editor");n.css("height",a?"100%":this.height+"px")}else{r=_.uniqueId("Editor");n=$('<div id="'+r+'" class="form-control"></div>');n.css("height",this.isFullHeight?"100%":this.height+"px");n.insertAfter($(this.el))}this.el.hide();this.editor=ace.edit(r);this.editor.setReadOnly(o);this.editor.getSession().setValue(this.el.val());this.editor.getSession().on("change",(function(e){t.el.val(t.editor.getSession().getValue());t.el.trigger("editor:change")}));this.langTools=ace.require("ace/ext/language_tools");this.decorate();if(this.el.hasClass("js-editor-validate")){this.editor.getSession().setUseWorker(true)}if(this.el.hasClass("js-editor-wrap")){this.editor.getSession().setUseWrapMode(true)}t.el.trigger("editor:create")};e.get=function(e){var o=e.data("_editor");if(o){return o}if(e.hasClass("js-editor")){o=new t(e)}else if(e.hasClass("js-editor-text")){o=new i(e)}else if(e.hasClass("js-editor-eql")){o=new n(e)}else if(e.hasClass("js-editor-css")){o=new r(e)}e.data("_editor",o);return o};e.all=function(){return _.map($(".js-editor, .js-editor-text, .js-editor-eql, .js-editor-css"),(function(t){return e.get($(t))}))};e.prototype.decorate=function(){if($("body").hasClass("dark-theme")){this.editor.setTheme("ace/theme/idle_fingers")}else{this.editor.setTheme("ace/theme/chrome")}this.editor.session.setUseWrapMode(true);this.editor.session.setWrapLimitRange(null,null);this.editor.setBehavioursEnabled(true);this.editor.setShowPrintMargin(false);this.editor.session.setUseSoftTabs(true);this.editor.getSession().setUseWorker(false);this.editor.setOptions({enableBasicAutocompletion:true,enableSnippets:true,enableLiveAutocompletion:true,minLines:20})};e.prototype.resize=function(){this.editor.resize()};e.prototype.val=function(e){if(typeof e!=="undefined"){this.editor.getSession().setValue(e)}else{return this.editor.getSession().getValue()}};t=function(t){e.apply(this,t)};t.prototype=Object.create(e.prototype);t.prototype.constructor=t;t.prototype.decorate=function(){e.prototype.decorate.call(this);this.editor.getSession().setMode("ace/mode/html")};i=function(t){e.apply(this,t)};i.prototype=Object.create(e.prototype);i.prototype.constructor=i;i.prototype.decorate=function(){if($("body").hasClass("dark-theme")){this.editor.setTheme("ace/theme/idle_fingers")}else{this.editor.setTheme("ace/theme/chrome")}this.editor.session.setUseWrapMode(false);this.editor.session.setWrapLimitRange(null,null);this.editor.setBehavioursEnabled(true);this.editor.setShowPrintMargin(false);this.editor.session.setUseSoftTabs(true);this.editor.getSession().setUseWorker(false);this.editor.setOptions({enableBasicAutocompletion:false,enableSnippets:false,enableLiveAutocompletion:false,minLines:20});this.editor.getSession().setMode("ace/mode/text")};n=function(t){e.apply(this,t)};n.prototype=Object.create(e.prototype);n.prototype.constructor=n;n.prototype.decorate=function(){if($("body").hasClass("dark-theme")){this.editor.setTheme("ace/theme/idle_fingers")}else{this.editor.setTheme("ace/theme/chrome")}this.editor.session.setUseWrapMode(false);this.editor.session.setWrapLimitRange(null,null);this.editor.setBehavioursEnabled(true);this.editor.setShowPrintMargin(false);this.editor.session.setUseSoftTabs(true);this.editor.getSession().setUseWorker(false);this.langTools.setCompleters([this.langTools.keyWordCompleter,this.langTools.snippetCompleter]);this.editor.setOptions({enableBasicAutocompletion:true,enableSnippets:false,enableLiveAutocompletion:true,minLines:20});ace.config.loadModule("ace/ext/eql_constructions_tokens");ace.config.loadModule("ace/ext/eql_constructions_basic");ace.config.loadModule("ace/ext/eql_constructions_extended");this.editor.getSession().setMode("ace/mode/eql")};r=function(t){e.apply(this,t)};r.prototype=Object.create(e.prototype);r.prototype.constructor=r;r.prototype.decorate=function(){e.prototype.decorate.call(this);this.editor.getSession().setMode("ace/mode/css")};AGN.Lib.Editor=e;AGN.Lib.EditorHtml=t;AGN.Lib.EditorText=i;AGN.Lib.EditorEql=n;AGN.Lib.EditorCss=r})();(function(){var e;e=function(e){var t=$(e),i=t.find("[data-equalizer-watch]:visible"),n=t.data("equalizer"),r=parseInt(t.data("equalizer-min"))||0,o=parseInt(t.data("equalizer-max"))||1e4,a,s;if(i.length==0){return}if(i.length==1&&n=="min"){o=r}i.css({height:"",overflow:"","overflow-y":""});a=_.map(i,(function(e){return $(e).outerHeight(false)}));if(n=="min"){s=Math.min.apply(null,a)}else{s=Math.max.apply(null,a)}if(s<r){s=r}if(s>o){s=o}i.css({height:s,overflow:"hidden","overflow-y":"auto"})};AGN.Lib.Equalizer=e})();(function(){function e(){}e.defaults=function(){return[{active:false,time:""}]};e.create=function(t,i){t=$.extend(e.defaults()[0],t);if(i){return AGN.Lib.Template.dom("schedule-extended-time-wrapper",{scheduleElement:t})}else{return AGN.Lib.Template.dom("schedule-time-wrapper",{scheduleElement:t})}};e.get=function(e){return e.closest(".schedule-time-wrapper")};function t(e){var i=this;if(!e.exists()){e=t.create({})}i.$rowWrapper=e}t.prototype.toJson=function(){var e=this;var i=e.$rowWrapper.find("select[name=dayOfTheWeek]").val();var n=_.map(e.$rowWrapper.find(".schedule-time-wrapper"),(function(e){var t=$(e).find(".time-checkbox");var i=!t.is(":disabled")&&t.is(":checked"),n=$(e).find(".time-input").val();return{active:i,time:n}}));var r=e.$rowWrapper.find(".hour-checkbox");var o={active:r.is(":checked")&&!r.is(":disabled"),interval:e.$rowWrapper.find("select.hour-select").val()};return $.extend(t.defaults(),{weekDay:i,scheduledTime:n,scheduledInterval:o})};t.prototype.addSchedule=function(t){var i=this,n=i.$rowWrapper;var r=e.create(t,true);n.find(".schedule-settings-wrapper").append(r);AGN.runAll(r);n.trigger("row:add-schedule")};t.prototype.removeSchedule=function(t){e.get(t).remove();this.$rowWrapper.trigger("row:remove-schedule")};t.prototype.hourCheckboxToggle=function(e){var t=e.attr("disables"),i=e.is(":checked");this.$rowWrapper.find(t).prop("disabled",i)};t.prototype.timeCheckboxToggle=function(e){var t=e.attr("disables"),i=e.is(":checked"),n=this.$rowWrapper.find(".time-checkbox"),r=this.$rowWrapper.find(".hour-checkbox"),o;for(var a=0;a<n.length;a++){var s=n[a];if(e[0]!==s&&$(s).is(":checked")){o=true;break}}if(!r.is(":disabled")||!o){this.$rowWrapper.find(t).prop("disabled",i)}};t.prototype.getAllScheduleTimes=function(){var e=this.toJson();var t=[];e.scheduledTime.forEach((function(e){if(e.active){t.push(parseInt(e.time.replace(":","")))}}));return t};t.prototype.isValidTimeIntervals=function(){var e=new a;var t=this.getAllScheduleTimes();return e.valid(t)};t.prototype.showTimeScheduleErrors=function(e){var t=this.$rowWrapper.find(".schedule-time-wrapper");var i=$('<div class="form-control-feedback-message js-form-error-msg">'+e+"</div>");_.each(t,(function(e){var t=$(e);if(!t.find(".js-form-error-msg").exists()){t.find(".time-input").after(i.clone());t.addClass("has-alert has-feedback js-form-error")}}))};t.prototype.hideTimeScheduleErrors=function(){var e=this.$rowWrapper.find(".schedule-time-wrapper");e.find(".js-form-error-msg").remove();e.removeClass("has-alert has-feedback js-form-error")};t.defaults=function(){return{weekDay:"",scheduledInterval:{active:false,interval:""},scheduledTime:[{active:false,time:""}]}};t.get=function(e){var i;if(e.hasClass("tr.l-time-schedule-row")){i=e}else{i=e.closest("tr.l-time-schedule-row")}return new t(i)};t.create=function(e){e=$.extend(t.defaults(),e);var i=AGN.Lib.Template.dom("schedule-day-row",{entry:e});var n=new t(i);i.on("row:add-schedule",(function(){var e=i.find(".schedule-time-wrapper");var t=e.length>1;i.find('[data-action="remove-schedule"]').closest(".input-group-addon").toggleClass("hidden",!t);i.find(".interval-reminder").toggleClass("hidden",!t);var r=i.find(".hour-checkbox");n.hourCheckboxToggle(r);var o=i.find(".time-checkbox");n.timeCheckboxToggle(o)}));i.on("row:remove-schedule",(function(){var e=i.find(".schedule-time-wrapper");var t=e.length>1;i.find('[data-action="remove-schedule"]').closest(".input-group-addon").toggleClass("hidden",!t);i.find(".interval-reminder").toggleClass("hidden",!t);if(e.length===0){n.addSchedule()}}));return i};t.deserialize=function(e){return t.create(e)};function i(e){var t=this;if(!e.exists()){e=i.create({})}t.$rowWrapper=e}i.prototype.toJson=function(){var e=this;var t=e.$rowWrapper.find("input[name=type]:checked").val();var n=undefined;var r=undefined;if(t=="TYPE_MONTHLY"){r=e.$rowWrapper.find("select[name=dayOfTheMonth]").val()}else{n=e.$rowWrapper.find("select[name=dayOfTheWeek]").val()}var o=_.map(e.$rowWrapper.find(".schedule-time-wrapper"),(function(e){var t=$(e).find(".time-checkbox");var i=true;if(t.exists()){i=!t.is(":disabled")&&t.is(":checked")}var n=$(e).find(".time-input").val();return{active:i,time:n}}));return $.extend(i.defaults(),{type:t,weekDay:n,monthDay:r,scheduledTime:o})};i.prototype.addSchedule=function(t){var i=this,n=i.$rowWrapper;var r=e.create(t);n.find(".schedule-settings-wrapper").append(r);AGN.runAll(r);n.trigger("row:add-schedule")};i.prototype.removeSchedule=function(t){e.get(t).remove();this.$rowWrapper.trigger("row:remove-schedule")};i.defaults=function(){return{type:"1",weekDay:"",monthDay:"",scheduledTime:[{active:false,time:""}]}};i.deserialize=function(e,t){var o=$.extend(i.defaults(),e);o.type=n(e.type);o.monthDay=r(e.monthDay);return i.create(o)};function n(e){switch(e){case"TYPE_MONTHLY":return 2;case"TYPE_WEEKLY":default:return 1}}function r(e){switch(e){case"TYPE_MONTHLY_FIRST":return 1;case"TYPE_MONTHLY_15TH":return 15;case"TYPE_MONTHLY_LAST":return 99;default:return 1}}i.get=function(e){var t;if(e.hasClass("tr.l-time-schedule-row")){t=e}else{t=e.closest("tr.l-time-schedule-row")}return new i(t)};i.create=function(e){e=$.extend(i.defaults(),e);var t=AGN.Lib.Template.dom("schedule-period-row",{entry:e});var n=new i(t);t.on("row:add-schedule",(function(){var e=t.find(".schedule-time-wrapper");if(e.length>1){t.find('[data-action="remove-schedule"]').closest(".input-group-addon").removeClass("hidden")}}));t.on("row:remove-schedule",(function(){var e=t.find(".schedule-time-wrapper");if(e.length<2){t.find('[data-action="remove-schedule"]').closest(".input-group-addon").addClass("hidden")}if(e.length===0){n.addSchedule()}}));return t};function o(e){var t=this;t.$container=e.find("table tbody");t.$container.on("scheduler:add-day",(function(){var e=t.$container.find(".l-time-schedule-row");if(e.length>1){t.$container.find('[data-action="remove-day"]').removeClass("hidden")}}));t.$container.on("scheduler:remove-day",(function(){var e=t.$container.find(".l-time-schedule-row");if(e.length<=1){e.find('[data-action="remove-day"]').addClass("hidden")}}))}o.prototype.clean=function(){this.$container.find("tr.l-time-schedule-row").remove()};o.prototype.deleteRow=function(e){this.deleteRowByNeedle(e.$rowWrapper)};o.prototype.deleteRowByNeedle=function(e){this.$container.find(e).remove();this.$container.trigger("scheduler:remove-day")};o.prototype.addRow=function(e){if(e){this.$container.append(e);AGN.runAll(e);this.$container.trigger("scheduler:add-day",e);e.trigger("row:add-schedule",e)}};o.prototype.addEmptyDayRow=function(){this.addRow(t.create())};o.prototype.addEmptyPeriodRow=function(){this.addRow(i.create())};o.prototype.getAllDayRows=function(){var e=this.$container.find("tr.l-time-schedule-row");return _.map(e,(function(e){return t.get($(e))}))};o.prototype.getAllPeriodRows=function(){var e=this.$container.find("tr.l-time-schedule-row");return _.map(e,(function(e){return i.get($(e))}))};o.prototype.getSubmissionJson=function(e){var t={};if(e=="day"){t=_.map(this.getAllDayRows(),(function(e){return e.toJson()}))}else if(e=="period"){t=_.map(this.getAllPeriodRows(),(function(e){return e.toJson()}))}return JSON.stringify(t)};function a(e){var t=100;if(e){t=Number(e)}this.intervalPad=t}a.prototype.valid=function(e){var t=this.intervalPad;return e.every(a.hasCorrectInterval,t)};a.hasCorrectInterval=function(e,t,i){var n=this;var r=true;i.splice(t,1);i.forEach((function(t){if(Math.abs(t-e)<n){r=false}}));return r};AGN.Lib.ScheduleTimeTable=o;AGN.Lib.ScheduleTimeTable.DayRow=t,AGN.Lib.ScheduleTimeTable.PeriodRow=i})();(function(){var e,i,n,r,o,a,s,l,u,c,d;e=function(e){this.el=e};e.create=function(t){var i,n=t.data("field");i=AGN.Opt.Fields[n]||e;return new i(t)};e.prototype.valid=function(){return true};e.prototype.errors=function(){return[]};e.prototype.onSubmit=function(){};AGN.Lib.Field=e;i=function(t){e.apply(this,[t]);var i=this.el.find("[data-field-validator]");this.$target=i;this.validatorName=i.data("field-validator");var n=i.data("validator-options");this.options=n?AGN.Lib.Helpers.objFromString(n)||{}:{}};i.prototype=Object.create(e.prototype);i.prototype.constructor=i;i.prototype.valid=function(){var e=AGN.Lib.Validator.get(this.validatorName);if(e&&this.$target.exists()){return e.valid(this.$target,this.options)}else{console.debug("Validator `"+this.validatorName+"` doesn't exist");return true}};i.prototype.errors=function(){var e=AGN.Lib.Validator.get(this.validatorName);if(e&&this.$target.exists()){return e.errors(this.$target,this.options)}else{console.debug("Validator `"+this.validatorName+"` doesn't exist");return[]}};AGN.Lib.CustomField=i;AGN.Opt.Fields["validator"]=i;n=function(t){e.apply(this,[t]);var i=this;this.$source=this.el.find(".js-double-select-trigger");this.$target=this.el.find(".js-double-select-target");this.$source.on("change",(function(){i.$target.val([]);i.update()}));AGN.Lib.DataProvider.get(t).done((function(e){i.options=e;i.update()}))};n.prototype=Object.create(e.prototype);n.prototype.constructor=n;n.prototype.update=function(){var e=this.$source.find("option:selected").val(),t=this.$target.find("option:selected").val(),i='{{ _.forEach(opts, function(name, value) { }}<option value="{{- value }}" {{- ( value == valueSelected ) ? "selected" : "" }}>{{- name }}</option>{{ }); }}';i=_.template(i)({opts:this.options[e],valueSelected:t});this.$target.html(i);AGN.runAll(this.el)};AGN.Lib.DoubleSelectField=n;AGN.Opt.Fields["double-select"]=n;r=function(t){e.apply(this,[t]);var i=this;this.$source=this.el.find("[data-field-vis]");this.$source.on("change",(function(){i.update()}));i.update()};r.prototype=Object.create(e.prototype);r.prototype.constructor=r;r.prototype._updateSelects=function(){var e=this;_.each(this.$source.filter("select"),(function(t){e._toggleFields($(t).find(":selected"))}))};r.prototype._updateDefaults=function(){var e=this;_.each(this.el.find("[data-field-vis-default]"),(function(t){e._toggleFields($(t))}))};r.prototype._updateCheckboxes=function(){var e=this;_.each(this.$source.filter(":checked"),(function(t){e._toggleFields($(t))}))};r.prototype._toggleFields=function(e){var t,i;if(e.is(":disabled")&&!e.is("[data-field-vis-nondisabled]")){return}t=e.data("field-vis-hide");i=e.data("field-vis-show");_.each(this.el.find(t),(function(t){e=$(t);e.all(":input").each((function(){var e=$(this);if(!e.prop("disabled")){e.data("field-disabled",true);e.prop("disabled",true)}}));e.hide();if(e.data("select2")){e.select2("container").hide();e.select2("enable",false)}if(e.is("option")){e.prop("disabled",true);AGN.Lib.CoreInitializer.run("select",e.parents("select"))}}));_.each(this.el.find(i),(function(t){e=$(t);e.all(":input").each((function(){var e=$(this);if(e.data("field-disabled")){e.prop("disabled",false);e.removeData("field-disabled")}}));e.show();if(e.data("select2")){e.select2("container").show();e.select2("enable",true)}if(e.is("option")){e.prop("disabled",false);AGN.Lib.CoreInitializer.run("select",e.parents("select"))}}))};r.prototype.update=function(){this._updateDefaults();this._updateSelects();this._updateCheckboxes()};AGN.Lib.ToggleVisField=r;AGN.Opt.Fields["toggle-vis"]=r;c=function(t){e.apply(this,[t]);this.$target=this.el.find("[data-field-required]")};c.prototype=Object.create(e.prototype);c.prototype.constructor=c;c.prototype.valid=function(){if(this.$target.exists()){return $.trim(this.$target.val())}else{return true}};c.prototype.errors=function(){var e=[];if(this.valid())return e;e.push({field:this.$target,msg:t("fields.required.errors.missing")});return e};AGN.Lib.RequiredField=c;AGN.Opt.Fields["required"]=c;o=function(t){e.apply(this,[t]);var i=this;this.$strength=this.el.find(".js-password-strength");this.$strengthIndicator=this.el.find(".js-password-strength-indicator");this.$match=this.el.find(".js-password-match");this.$matchIndicator=this.el.find(".js-password-match-indicator");this.$strength.on("keyup",(function(){i.updateStrength();i.updateMatch()}));this.$match.on("keyup",(function(){i.updateMatch()}))};o.prototype=Object.create(e.prototype);o.prototype.constructor=o;o.prototype.match=function(){return this.$strength.val()==this.$match.val()};o.prototype.safe=function(){return this._getSecurityIssues().length===0};o.prototype._getSecurityIssues=function(){var e=[];var i=this,n=this.$strength.val();if(n.length==0)return e;var r=this.$strength.attr("data-rule");var o=AGN.Lib.PasswordPolicies.find_password_policy(r);var a=o(n);if(a!=null&&a.length>0){e.push(t("fields.password.errors.unsafe"));for(var s=0;s<a.length;s++){e.push(t(a[s]))}}return e};o._getRule=function(e){var t=8;var i=["[a-z]","[A-Z]","[0-9]","[^a-zA-Z0-9]"];switch(e){case"LENGTH_8_MIXED":t=8;i=["[a-z]","[A-Z]","[0-9]","[^a-zA-Z0-9]"];break;case"LENGTH_12_SIMPLE":t=12;i=["."];break;case"WEBSERVICE":t=32;i=["."];break;default:console.log("Don't know password policy '"+name+"'");return false}return{minLength:t,checks:i}};o.prototype.passesCheck=function(e,t){if(e.match(t)){return true}return false};o.prototype.valid=function(){if(this.$match.length==0)return true;return this.match()&&this.safe()};o.prototype.errors=function(){var e=this,i=[];if(this.valid())return i;if(!this.match()){i.push({field:this.$match,msg:t("fields.password.errors.notMatching")})}var n=this._getSecurityIssues();if(n.length>0){n.forEach((function(t){i.push({field:e.$strength,msg:t})}))}return i};o.prototype.resetStrength=function(){var e=AGN.Lib.Form.get(this.el);e.cleanErrors(this.$strengthIndicator.parents(".form-group"));this.$strengthIndicator.addClass("hidden");this.$strengthIndicator.removeClass("state-alert");this.$strengthIndicator.removeClass("state-success");this.$strengthIndicator.html("")};o.prototype.resetMatch=function(){var e=AGN.Lib.Form.get(this.el);e.cleanErrors(this.$matchIndicator.parents(".form-group"));this.$matchIndicator.addClass("hidden");this.$matchIndicator.removeClass("state-success");this.$matchIndicator.removeClass("state-alert");this.$matchIndicator.html("")};o.prototype.updateStrength=function(){this.resetStrength();if(this.$strength.val().length==0){return}this.$strengthIndicator.removeClass("hidden");if(this.safe()){this.$strengthIndicator.addClass("state-success");this.$strengthIndicator.html(t("fields.password.successHtml",t("fields.password.safe")))}else{this.$strengthIndicator.addClass("state-alert");this.$strengthIndicator.html(t("fields.password.unsuccessHtml",t("fields.password.unsafe")))}};o.prototype.updateMatch=function(){this.resetMatch();if(this.$match.val().length==0){return}this.$matchIndicator.removeClass("hidden");if(this.match()){this.$matchIndicator.addClass("state-success");this.$matchIndicator.html(t("fields.password.successHtml",t("fields.password.matches")))}else{this.$matchIndicator.addClass("state-alert");this.$matchIndicator.html(t("fields.password.unsuccessHtml",t("fields.password.matchesNot")))}};AGN.Lib.PasswordField=o;AGN.Opt.Fields["password"]=o;a=function(t){e.apply(this,[t]);this.$source=this.el.find("[data-field-split]");this.targets=this.$source.data("field-split").split(/,\s?/);this.rule=new RegExp(this.$source.data("field-split-rule"))};a.prototype=Object.create(e.prototype);a.prototype.constructor=a;a.prototype.valid=function(){var e,t=AGN.Lib.Form.get(this.el);e=this.$source.val().split(this.rule);_.each(this.targets,(function(i,n){t.setValueOnce(i,e[n])}));return true};AGN.Lib.ValueSplitField=a;AGN.Opt.Fields["split"]=a;s=function(t){var i=this;e.apply(this,[t]);this.$filters=this.el.find("[data-field-filter]");this.$filters.on("change",(function(){i.update()}));i.position();i.update()};s.prototype=Object.create(e.prototype);s.prototype.constructor=s;s.prototype.position=function(){var e;e=$(this.el.data("filter-target"));this.el.detach();this.el.appendTo(e);e.parents("table").hide();e.parents("table").show()};s.prototype.isEnabled=function(){return this.$filters.get().some((function(e){var t=$(e);if(t.is("input")){var i=t.attr("type");if(i=="text"||i=="number"||i=="password"){return!!t.val()}}return!!t.serialize()}))};s.prototype.isDisabled=function(){return!this.isEnabled()};s.prototype.update=function(){if(this.isEnabled()){this.el.addClass("filter-active")}else{this.el.removeClass("filter-active")}};AGN.Lib.FilterField=s;AGN.Opt.Fields["filter"]=s;l=function(t){var i=this;e.apply(this,[t]);this.$filterMin=this.el.find("[data-filter-date-min]");this.$filterMax=this.el.find("[data-filter-date-max]");this.$filters=this.el.find("[data-filter-date-min],[data-filter-date-max]");this.$filterMin.on("change",(function(){var e=i.$filterMax.data("pickadate");e.set("min",i.$filterMin.val())}));this.$filterMax.on("change",(function(){var e=i.$filterMin.data("pickadate");e.set("max",i.$filterMax.val())}));this.$filters.on("change",(function(){i.update()}));i.position();i.update()};l.prototype=Object.create(s.prototype);l.prototype.constructor=l;l.prototype.isEnabled=function(){return _.some(this.$filters,(function(e){return $(e).val()!=""}))};AGN.Lib.DateFilterField=l;AGN.Opt.Fields["date-filter"]=l;u=function(t){var i=this;e.apply(this,[t]);this.$source=this.el.find("[data-field-date-split]");this.$source.on("change",(function(){i.update()}))};u.prototype=Object.create(e.prototype);u.prototype.constructor=u;u.prototype.update=function(){var e=null;var t=this.$source.val();if(t){e=new Date(parseInt(t))}var i=this.el.find("[data-date-split-target]");i.each((function(){var t=$(this);var i=t.attr("data-date-split-target");if(e&&i){switch(i.toUpperCase()){case"MILLISECONDS":t.val(e.getMilliseconds());break;case"SECONDS":t.val(e.getSeconds());break;case"MINUTES":t.val(e.getMinutes());break;case"HOURS":t.val(e.getHours());break;case"DAY":t.val(e.getDate());break;case"MONTH":t.val(e.getMonth()+1);break;case"YEAR":t.val(e.getFullYear());break;default:t.val(e.toJSON())}}else{t.val("")}}))};AGN.Lib.DateSplitField=u;AGN.Opt.Fields["date-split"]=u;d=function(t){if(t.data("agn:date-time-field")){return t.data("agn:date-time-field")}e.apply(this,[t]);var i=$(this.el);this.propertyName=i.data("property");this.options=_.extend({},AGN.Lib.Helpers.objFromString(i.data("field-options")));var n=this.options.value||this.options.defaultValue||"";this.dateFormat=this.options.dateFormat||"dd.mm.yyyy";var r=this;y(i,this.propertyName,n,this.dateFormat);i.on("change",(function(){r.setDateTimeFieldValue(r.propertyName,r.dateFormat,r.options.defaultSubmitTime)}));t.data("agn:date-time-field",this)};d.prototype=Object.create(e.prototype);d.prototype.constructor=d;d.prototype.onSubmit=function(){this.setDateTimeFieldValue()};d.prototype.setDateTimeFieldValue=function(){var e=this.propertyName.replace(/([:.\[\],=@])/g,"\\$1");var t=$("#"+e+"_date");var i=$("#"+e+"_time");$('[name="'+this.propertyName+'"]').val(f(t,i,this.dateFormat,this.options.defaultSubmitTime))};AGN.Lib.DateTimeField=d;AGN.Opt.Fields["datetime"]=d;function f(e,t,i,n){var r=t?t.val():"";r=r?r.replaceAll("_","0"):p(n);return e.val()?h(e.pickadate("picker"),r,i):""}function p(e){if(e!==""&&!e){return"00:00"}if(e==="now"){return moment().format("HH:mm")}return e}function h(e,t,i){return e.get("select",i)+(g(t)?" "+t:"")}function g(e){return/^(\d{2}):(\d{2})$/.test(e)}function m(e){if(e){return e.split(" ")[0]}return""}function v(e){if(e){var t=e.split(" ");if(t.length==2){return t[1]}}return""}function y(e,t,i,n){var r=document.createElement("input");r.type="hidden";r.name=t;r.value=i;const o=e.data("field-extra-attributes");e.append(_.template(AGN.Opt.Templates["datetime-picker"])({date:m(i),time:v(i),property:t,dateFormat:n,extraAttrs:o||""}));e.append(r);AGN.runAll(e)}})();(function(){var e=_.template('<div class="form-group email-list-manager-row" data-action="change-trigger">'+'        <div class="col-sm-12">'+'            <div class="input-group">'+'                <div class="input-group-controls">'+'                    <input type="text" value="{{= value}}" class="form-control" size="42" maxlength="99"/>'+"                </div>"+'                <div class="input-group-btn">'+'                    <button type="button" class="btn btn-regular btn-primary email-list-manager-add-btn" data-action="create-email">'+'                        <i class="icon icon-plus"></i>'+"                    </button>"+"                </div>"+"            </div>"+"        </div>"+"    </div>");var t=_.template('<button type="button" class="btn btn-regular btn-alert email-list-manager-delete-btn" data-action="delete-email">'+'        <i class="icon icon-trash-o"></i>'+"    </button>");function i(t,i,n){this.scope=t;this.data=i;this.options=$.extend({rowTemplate:e,rowSelector:".email-list-manager-row",addBtnSelector:".email-list-manager-add-btn",deleteBtnSelector:".email-list-manager-delete-btn",rowDataMapper:function(e){return{value:e}}},n);var o=this;_.each(o.data,(function(e){r(o.scope,e,null,o.options)}))}i.initialize=function(e,t,n){return new i(e,t,n)};i.prototype.createRowAfter=function(e){var t=this;r(t.scope,"",$(e),t.options)};i.prototype.deleteRow=function(e){$(e).closest(this.options.rowSelector).remove();n(this.scope,this.options)};i.prototype.getJsonData=function(){var e=[];_.each(this.scope.find(this.options.rowSelector+" input"),(function(t){var i=t.value;if(i.trim()!==""){e.push(i)}}));return e};function n(e,i){var n=e.find(i.rowSelector);if(n.length===1){var r=n.find(i.deleteBtnSelector);r.remove()}else{_.each(n,(function(e){var n=$(e);var r=n.find(i.deleteBtnSelector);if(!r.exists()){n.find(".input-group-btn").append(t({}))}}))}}function r(e,t,i,r){var o=r.rowTemplate(r.rowDataMapper(t));if(i&&i.exists()){i.closest(r.rowSelector).after(o)}else{e.append(o)}n(e,r)}AGN.Lib.EmailsListManager=i})();(function(){var e,i=AGN.Lib.Field,n=AGN.Lib.CSRF,r;r=function(e){this.group=e;this.$controls=$()};r.prototype._collect=function(e){var t=$("[data-controls-group]");if(e==="*"){return t}if(e){return t.filter((function(){return e===$(this).attr("data-controls-group")}))}else{return $()}};r.prototype.collect=function(){if(this.group){this.$controls=this._collect(this.group).filter((function(){var e=$(this);return!e.prop("disabled")&&!e.hasClass("disabled")}))}};r.prototype.setDisabled=function(e){if(e===false){this.$controls.removeClass("disabled");this.$controls.prop("disabled",false)}else{this.$controls.addClass("disabled");this.$controls.prop("disabled",true)}};e=function(e){this.$form=e;this.form=e[0];this._abort=null;this._data={};this._dataNextRequest={};this.fields=[];this.validatorName=null;this.validatorOptions=null;this.dirtyChecking=e.is("[data-form-dirty-checking]");this.editable=!e.is("[data-editable]")||!!e.data("editable");this.url=e.attr("action");this.urlNextRequest=null;this.method=e.attr("method");this.isMultipart="multipart/form-data"==(e.attr("enctype")||"").toLowerCase();this.isCustomLoader=e.is("[data-custom-loader]");this.controlsToDisable=new r(e.attr("data-disable-controls"));if(e.is("[data-custom-loader]")){this.isCustomLoader=e.attr("data-custom-loader")!=="false"}else{this.isCustomLoader=false}this.initFields();this.initValidator();this.handleMessages($("body"),true);if(this.dirtyChecking){o(e)}if(!this.editable){e.find(":input, button").prop("disabled",true)}};function o(e){e.dirty({preventLeaving:true,leavingMessage:t("grid.layout.leaveQuestion")});window.onbeforeunload=function(){if(!e.dirty("isDirty")===true){AGN.Lib.Loader.show()}}}e.get=function(t){var i,n,r,o;i=e.getWrapper(t);o=i.data("_form");if(!o){r=i.data("form");n=AGN.Opt.Forms[r]||AGN.Lib.Form;o=new n(i);i.data("_form",o)}return o};e.getWrapper=function(e){var t;t=$(e.data("form-target"));if(t.length==0){t=e.closest("form")}return t};e.prototype.valid=function(e){var t=$.Event("validation");e=_.merge({},this.validatorOptions,e);this.$form.trigger(t,e);if(t.isDefaultPrevented()){return false}var i=_.every(this.fields,(function(e){return e.valid()}));if(this.validatorName){var n=AGN.Lib.Validator.get(this.validatorName);if(n){return n.valid(this,e,i)}}return i};e.prototype.validate=function(e){if(this.valid(e)){return true}else{this.handleErrors();return false}};e.prototype.get$=function(){return this.$form};e.prototype.getAction=function(){if(this.urlNextRequest){var e=this.urlNextRequest;this.urlNextRequest=null;return e}return this.url};e.prototype.setActionOnce=function(e){this.urlNextRequest=e};e.prototype.errors=function(){var e=[];_.each(this.fields,(function(t){e=e.concat(t.errors())}));if(this.validatorName){var t=AGN.Lib.Validator.get(this.validatorName);if(t){e=e.concat(t.errors(this,this.validatorOptions))}}return e};e.prototype.setValue=function(e,t){var i=this.form[e];if(typeof i==="object"){$(i).val([t]);$(i).trigger("change")}else{if(typeof t==="undefined"){delete this._data[e]}else{this._data[e]=t}}};e.prototype.setValueOnce=function(e,t){if(typeof t==="undefined"){delete this._dataNextRequest[e]}else{this._dataNextRequest[e]=t}};e.prototype.getValue=function(e){var t=this.form[e];if(typeof t==="object"){return t.value}else{return this._data[e]}};e.prototype.data=function(){if(this.isMultipart){var e=new FormData;var t=this.$form.serializeFormDataObject();$.each(this._data,(function(e,i){if(!t.hasOwnProperty(e)){t[e]=i}}));$.each(this._dataNextRequest,(function(e,i){t[e]=i}));$.each(t,(function(t,i){if($.isArray(i)){$.each(i,(function(i,n){e.append(t,n)}))}else{e.append(t,i)}}));return e}else{return _.merge({},this._data,this.$form.serializeObject(),this._dataNextRequest)}};e.prototype.params=function(){return $.param(this.data(),true)};e.prototype.jqxhr=function(){var t=this,i=$.ajaxSettings.xhr(),n,r=$.Deferred();this.$form.trigger("form:submit");var o={url:this.getAction(),method:this.method,loader:this.loader(),xhr:function(){return i}};if(this.isMultipart){o.data=this.data();o.enctype="multipart/form-data";o.processData=false;o.contentType=false}else{o.data=this.params()}if(this.isCustomLoader){var a=function(e){var i=true;if(e.lengthComputable){i=(e.loaded/e.total*100).toFixed(1)}t.$form.trigger("form:progress",{loaded:e.loaded,total:e.total,progress:i})};if("upload"in i){o.xhr=function(){i.upload.onprogress=a;return i}}else{o.xhrFields={onprogress:a}}}if(typeof i.abort==="function"){this._abort=function(){i.abort()}}n=$.ajax(o);this._dataNextRequest={};this.setLoaderShown(true);r.always((function(){t.setLoaderShown(false)}));n.done((function(t){var i=$(t),n,o,a;n=i.filter('[data-form="polling"]').add(i.find('[data-form="polling"]'));if(n.length==1){o=e.get(n);a=o.jqhxr();a.done((function(){r.resolve.apply(this,arguments);var e=$("body");var i=$("<div></div>");i.html(t);i.find('script[data-message][type="text/html"]').appendTo(e);i.find('script[data-message][type="text/javascript"]').each((function(){try{eval.call(window,$(this).html())}catch(e){}}));i.remove()}));a.fail((function(){r.reject.apply(this,arguments)}))}else{r.resolve(t)}}));n.fail((function(){r.reject.apply(this,arguments)}));return r.promise()};e.prototype._submit=function(){var e,t=this;this.setLoaderShown(true);e=this.jqxhr();e.done((function(e){t.setLoaderShown(false);t.updateHtml(e);t.$form.trigger("submitted",e);if(t.dirtyChecking){a(t.$form)}}));return e};function a(e){const t=$("body").has(e).length===0;if(t){e.dirty("destroy")}else{e.dirty("setAsClean")}}e.prototype._submitStatic=function(){var e=this.data(),t;if(n.isProtectionEnabled()){e[n.getParameterName()]=n.readActualToken()}t=$('<form method="'+this.method+'" action="'+this.getAction()+'"></form>');_.each(e,(function(e,i){if(_.isArray(e)){var n=$('<select multiple name="'+i+'"></select>');_.each(e,(function(e){var t=$('<option selected="selected"></option>');t.val(e);t.appendTo(n)}));n.appendTo(t)}else{var r=$('<input type="hidden" name="'+i+'"/>');r.val(e);r.appendTo(t)}}));t.appendTo($("body"));t.submit();t.remove();this._dataNextRequest={}};e.prototype._submitAction=function(e){this.setValue("previousAction",this.getValue("actionList"));this.setValueOnce("action",e);return this.submit()};e.prototype._submitEvent=function(){var e=$.Event("submission");this.$form.trigger(e);if(!e.isDefaultPrevented()){this.$form.trigger("submitted");this._dataNextRequest={}}};e.prototype._submitConfirm=function(e){this.setValue("previousAction",this.getValue("actionList"));this.setValueOnce("action",e);var t=this.jqxhr();var i=this;t.done((function(e){i.$form.trigger("submitted",e)}));return t};e.prototype.submit=function(e){var t=0;_.each(this.fields,(function(e){e.onSubmit()}));var i={};if((e=="confirm"||e=="action")&&(typeof arguments[1]==="number"||typeof arguments[1]==="string")){t=arguments[1];i=arguments[2]}else{i=arguments[1]}if(this.valid(i)){this.cleanErrors()}else{this.handleErrors();return false}switch(e){case"static":return this._submitStatic();case"confirm":return this._submitConfirm(t);case"action":return this._submitAction(t);case"event":return this._submitEvent();default:return this._submit()}};e.prototype.revertAction=function(){};e.prototype.reset=function(){this.$form.trigger("reset")};e.prototype.abort=function(){this.$form.trigger("form:abort");if(this._abort){this._abort();this._abort=null}};e.prototype.bulkUpdate=function(e,t){if(e){this.$form.find('[name^="'+e+'"]').prop("checked",t)}else{this.$form.find(".js-bulk-ids").prop("checked",t)}};e.prototype.handleMessages=function(e,t){const i=this;if(!(e instanceof $)){e=$(e)}e.all('script[data-message][type="text/html"]').each((function(){const e=$(this);const t=e.text();const n=e.data("message");if(t&&n){i.showFieldError(n,t,false)}}));if(t===true){return}const n=e.filter("script[data-message]").add(e.find("script[data-message]"));_.each(n,(function(e){$("body").append(e)}))};e.prototype.initFields=function(e){var t=this;if(!e){e=this.$form}t.fields.length=0;_.each(e.find("[data-field]"),(function(e){t.fields.push(i.create($(e)))}))};e.prototype.initValidator=function(){this.validatorName=this.$form.data("validator");var e=this.$form.data("validator-options");this.validatorOptions=e?AGN.Lib.Helpers.objFromString(e):null};e.prototype.updateHtml=function(e){var t,i=$(e);if(this.$form.attr("id")){t=$(e).filter("#"+this.$form.attr("id")).add(i.find("#"+this.$form.attr("id")))}else if(this.$form.attr("name")){t=$(e).filter('[name="'+this.$form.attr("name")+'"]').add(i.find('[name="'+this.$form.attr("name")+'"]'))}else{t=$(e).filter("form").add(i.find("form"))}this.$form.html(t.html());this.handleMessages(e);this.initFields();this.initValidator();AGN.Lib.Controller.init(this.$form);AGN.runAll(this.$form)};e.prototype.loader=function(){var e=this;return{show:function(){e.controlsToDisable.collect();e.controlsToDisable.setDisabled(true);e.setLoaderShown(true)},hide:function(){e.controlsToDisable.setDisabled(false);e.setLoaderShown(false)}}};e.prototype.setLoaderShown=function(e){if(this.isCustomLoader){if(e){this.$form.trigger("form:loadershow")}else{this.$form.trigger("form:loaderhide")}}else{if(e){AGN.Lib.Loader.show()}else{AGN.Lib.Loader.hide()}}};e.prototype.cleanErrors=function(e){if(!e){e=this.$form.find(".js-form-error")}_.each(e,(function(e){var t=$(e);t.removeClass("has-alert has-feedback js-form-error");t.find(".js-form-error-ind").remove();t.find(".js-form-error-msg").remove()}))};function s(e,t){var i=e;var n=e.data("_editor");var r=e.data("emojioneArea");var o=e.closest('[data-field="datetime"]').length;var a=true;if(n){n=n.editor;if(n.container){a=false;i=$(n.container)}}else if(r){if(r.editor){a=false;i=r.editor.parent()}}else{if(i.is("select")){a=false;if(i.is(".input-group .input-group-controls .js-select")){i=i.closest(".input-group")}}}if(a){const e=i.next("span[class*='icon-state-']");if(e){e.hide()}if(!o){i.after('<span class="icon icon-state-alert form-control-feedback js-form-error-ind"></span>')}}i.parent().append('<div class="form-control-feedback-message js-form-error-msg">'+t+"</div>")}e.prototype.handleErrors=function(){var e=[];this.cleanErrors();var t=this.errors().filter((function(e){return e.field&&e.field.length>0}));_.each(t,(function(e){var t=e.field;l(t);s(t,e.msg)}));_.each(this.errors(),(function(t){var i=t.field;if(i.data("select2")){e.push(i.parent().find(".select2-container").offset().top)}else if(i.data("_editor")&&i.data("_editor").editor){var n=i.data("_editor").editor;e.push($(n.container).offset().top)}else{e.push(i.offset().top)}}));var i=false;var n=this.$form.closest(".modal");if(!n.exists()){n=$('.tile-content[data-sizing="scroll"]');if(n.exists()){i=true}}if(!n.exists()){n=$(document)}if(n.find(".popover.support-popover").exists()){return}var r=this.$form.offset().top;var o;if(i){o=_.sortBy(e)[0]+n.scrollTop()-n.offset().top-25}else{o=_.sortBy(e)[0]-r-25}n.scrollTop(o)};e.prototype.cleanFieldError=function(e){if(this.form[e]){this.cleanFieldError$($(this.form[e]))}};e.prototype.cleanFieldError$=function(e){var t=e.closest(".js-form-error");t.removeClass("has-alert has-feedback js-form-error");t.find(".js-form-error-ind").remove();t.find(".js-form-error-msg").remove()};e.prototype.showFieldError=function(e,t,i){if(this.form[e]){this.showFieldError$($(this.form[e]),t,i)}};e.prototype.showFieldError$=function(e,t,i){var n=e.parents(".form-group");n.addClass("has-alert has-feedback js-form-error");n.find(".js-form-error-ind").remove();n.find(".js-form-error-msg").remove();s(e,t);if(i!==true){var r=this.$form.closest("[data-sizing=scroll], .modal").first();if(r.exists()){var o=$(".has-alert").first();r.animate({scrollTop:o.offset().top-r.offset().top+r.scrollTop()})}else{r=$(document);r.scrollTop(e.offset().top-125)}}};AGN.Lib.Form=e;function l(e){var t=e.closest("td");if(t.length&&t.parents(".table-form").length){t.addClass("has-alert js-form-error")}else{e.parents(".form-group").addClass("has-alert has-feedback js-form-error")}}})();(function(){var e;e=function(e){this.$el=e};e.prototype.update=function(e){this.config=e;this.draw()};e.prototype.template=function(){var e=this.config;return _.template('<div class="grid-stage center-block" style="width: {{= viewWidth}} px; height: {{= viewHeight }}px;">'+'<svg class="grid-view center-block" viewBox="0 0 {{= viewWidth }} {{= viewHeight }}" style="width: {{= viewWidth }}px; height: {{= viewHeight }}px">'+'<g class="grid-columns"></g>'+"</svg>"+"</div>")({viewWidth:e.templateWidth,viewHeight:100})};e.prototype.data=function(){var e=[],t=this.config;_.times(t.columnNum,(function(i){e.push({type:"gutter",width:t.gutter/2,offset:_.reduce(e,(function(e,t){return e+t.width}),0)});e.push({type:"col",width:t.columnWidth,offset:_.reduce(e,(function(e,t){return e+t.width}),0)});e.push({type:"gutter",width:t.gutter/2,offset:_.reduce(e,(function(e,t){return e+t.width}),0)})}));return e};e.prototype.draw=function(){var e;this.$el.html(this.template());e=d3.select(this.$el.find(".grid-columns")[0]).selectAll("g").data(this.data()).enter().append("g").attr("transform",(function(e,t){return"translate("+e.offset+",0)"}));e.append("rect").attr("class",(function(e){return"grid-view-"+e.type})).attr("width",(function(e){return e.width})).attr("height",100)};AGN.Lib.GridView=e})();(function(){var e;e=function(e){this.$el=e};e.prototype.update=function(e){this.config=e;this.draw()};e.prototype.template=function(){var e=this.config;return _.template('<div class="grid-stage center-block" style="width: {{= viewWidth }}"px"; height: {{= viewHeight }}px;">'+'<svg class="column-view center-block" viewBox="0 0 {{= viewWidth }} {{= viewHeight }}" style="width: {{= viewWidth }}px; height: {{= viewHeight }}px">'+'<g class="grid-columns"></g>'+"</svg>"+"</div>")({viewWidth:e.templateWidth,viewHeight:e.columnNum*35-5})};e.prototype.data=function(){var e=this.config,t=[];_.times(e.columnNum,(function(i){var n=[];n.push({type:"gutter",width:e.gutter/2,offset:0});n.push({type:"col",width:(i+1)*e.columnWidth+i*e.gutter,offset:_.reduce(n,(function(e,t){return e+t.width}),0)});n.push({type:"gutter",width:e.gutter/2,offset:_.reduce(n,(function(e,t){return e+t.width}),0)});_.times(e.columnNum-(i+1),(function(t){n.push({type:"gutter",width:e.gutter/2,offset:_.reduce(n,(function(e,t){return e+t.width}),0)});n.push({type:"empty-col",width:e.columnWidth,offset:_.reduce(n,(function(e,t){return e+t.width}),0)});n.push({type:"gutter",width:e.gutter/2,offset:_.reduce(n,(function(e,t){return e+t.width}),0)})}));t.push(n)}));return t};e.prototype.draw=function(){var e=this.config,t,i;this.$el.html(this.template());i=d3.select(this.$el.find(".grid-columns")[0]).selectAll(".row").data(this.data()).enter().append("g").attr("class","row").attr("transform",(function(e,t){return"translate(0,"+t*35+")"}));t=i.selectAll(".col").data((function(e){return e})).enter().append("g").attr("class","col").attr("transform",(function(e){return"translate("+e.offset+",0)"}));t.append("rect").attr("class",(function(e){return"column-view-"+e.type})).attr("width",(function(e){return e.width})).attr("height",30);i.append("text").attr("class","column-view-text").attr("x",e.gutter/2+10).attr("y",20).text((function(t,i){return _.template("{{= width }}px / {{= perc }}%")({width:t[1].width,perc:Math.floor(100*(i+1)/e.columnNum)})}))};AGN.Lib.GridColumnView=e})();(function(){var e;var t='<div class="popover" role="tooltip">'+'<div class="arrow"></div>'+'<h3 class="popover-title"></h3>'+'<div class="popover-content popover-scrollable"></div>'+"</div>";e=function(e){var t=AGN.url(e.data("help")),i=this,n;this.el=e;n=$.get(t);n.done((function(e){i.config=$(e);i.popoverInteractive();i.show()}))};e.show=function(t){var i;i=t.data("_help");if(i){i.show();return}i=new e(t);t.data("_help",i)};e.prototype.show=function(){this.el.popover("show")};e.prototype.getConfig=function(e){var t=this.config.find(e).text();return t.replace("<![CDATA[","").replace("]]>","")};e.prototype.popover=function(){if(!this.config){return}this.el.popover("destroy");AGN.Lib.Popover.new(this.el,{template:t,title:this.getConfig("title"),content:this.getConfig("content"),html:true,trigger:this.el.data("trigger")||"focus"})};e.prototype.popoverInteractive=function(){if(!this.config){return}this.el.popover("destroy");var e=AGN.Lib.Popover.new(this.el,{template:t,title:this.getConfig("title"),content:this.getConfig("content"),html:true,trigger:"manual"});var i=this.el;var n=e.tip();n.attr("tabindex",0);n.css("outline","none");var r=null;var o=function(){r=setTimeout((function(){e.hide()}),100)};var a=function(){clearTimeout(r)};n.focusout(o);i.focusout(o);n.focusin(a);i.focusin(a);i.on("shown.bs.popover",(function(){var e=n.children(".popover-content");var t=e.css("min-width");var i=e.outerWidth();e.css("min-width","100%");e.css("min-width",e.outerWidth());if(i>e.outerWidth()){e.css("min-width",t||"0px")}}))};AGN.Lib.Help=e})();(function(){AGN.Lib.Helpers={paramsFromUrl:function(e){var t={};var i;if(e){i=e.indexOf("?")}else{return t}if(i==-1)return t;var n=e.substring(i+1);var r=n.split("&");for(var o=0;o<r.length;o++){var a=r[o].split("=");t[a[0]]=a[1]}return t},objFromString:function(optsAsString){var optsArray,optsSplitRegex=/,\s*(?=(?:[^'\\]*(?:\\.|'(?:[^'\\]*\\.)*[^'\\]*'))*[^']*$)/m,tupleSplitRegex=/:\s*(?=(?:[^'\\]*(?:\\.|'(?:[^'\\]*\\.)*[^'\\]*'))*[^']*$)/m,floatRegex=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,arrayRegex=/^\s?\[.*?\]$/i;opts={};if(optsAsString===""||optsAsString===undefined){return opts}optsArray=optsAsString.split(optsSplitRegex);_.forEach(optsArray,(function(opt){var tup=opt.split(tupleSplitRegex),name,value;tup=_.filter(tup);name=tup[0].replace(/^'([^]*?)'$/m,"$1");name=name.replace(/\\/,"");value=tup[1];if(typeof value==="undefined"){value=""}if(value=="true"){value=true}else if(value=="false"){value=false}else if(floatRegex.test(value)){value=parseFloat(value)}else if(arrayRegex.test(value)){value=value.replace(/\[|\]/g,"");value=value.split(/\s+/);value=_.map(value,(function(v){if(/^\'(.*?)\'$/.test(v)){return v.replace(/^\'(.*?)\'$/g,"$1")}else{return eval(v)}}))}else{value=value.replace(/^'(.*?)'$/m,"$1");value=value.replace(/\\/,"")}opts[name]=value}));return opts},disableCSSAnimations:function(){var e=$('<style class="disable-animation">* { -webkit-transition: none !important; -o-transition: none !important; transition: none !important; }</style>');$("body").append(e)},enableCSSAnimations:function(){window.setTimeout((function(){$(".disable-animation").remove()}),10)},clearFormField:function(e){var t=$("<form></form>");var i=$("<div></div>");i.insertAfter(e);t.append(e);t.get(0).reset();e.insertBefore(i);i.remove()},renameFile:function(e,t){Object.defineProperty(e,"name",{writable:true,value:t})},formatBytes:function(e,t){if(e==0)return"0 Bytes";if(e==1)return"1 Byte";if(e==-1)return"-1 Byte";var e=Math.abs(e);if(t&&t.toLowerCase()&&t.toLowerCase()=="iec"){var i=Math.pow(2,10);var n=["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]}else{var i=Math.pow(10,3);var n=["Bytes","kB","MB","GB","TB","PB","EB","ZB","YB"]}var r=Math.floor(Math.log(e)/Math.log(i));var o=e/Math.pow(i,r);if(e<0){o*=-1}if(o>=99.995||r==0){return o.toFixed(0)+" "+n[r]}else{return o.toFixed(2)+" "+n[r]}},pad:function(e,t,i){i=i||"0";var n=e+"";if(n.length<t){return new Array(t-n.length+1).join(i)+n}else{return n}},caching:function(e,t){var i=false;var n;if(arguments.length>1){e=_.bind.apply(null,Array.prototype.slice.call(arguments))}return function(){if(!i){i=true;n=e()}return n}},replaceAgnTags:function(e,t){try{return e.replace(/\[(agn[A-Z0-9]+)(?:[^'"\]]|'.*?'|".*?")+]/g,(function(e,i){var n=$("<"+e.substring(1,e.length-1)+">")[0];if(n instanceof HTMLElement){var r=n.attributes;var o={};for(var a=0;a<r.length;a++){var s=r[a];o[s.nodeName]=s.nodeValue}return t({name:i,attributes:o},e)}return e}))}catch(e){}return e},escapeAgnTags:function(e){try{if(e){return e.replace(/\[agn[A-Z0-9]+(?:[^'"\]]|'.*?'|".*?")+]/g,(function(e){if(e.includes("'")||e.includes('"')){return _.escape(e)}else{return e}}))}}catch(e){}return e},unescapeAgnTags:function(e){try{if(e){return e.replace(/\[agn[A-Z0-9]+(?:(?!&#39;|&quot;)[^'"\]]|=\s*&#39;.*?&#39;|=\s*&quot;.*?&quot;)*]/g,(function(e){return _.unescape(e)}))}}catch(e){}return e},isValidEmail:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())},isUrl:function(e){const t=/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=!$]*)$/;return t.test(e)}}})();(function(){var e;e=function(e){var t,i=this;i.el=e;i.url=e.data("load");i.interval=parseInt(e.data("load-interval"));i.target=e.data("load-target");if(i.interval){t=function(){i.load()};i._interval=window.setInterval(t,i.interval)}i.el.removeAttr("data-load")};e.load=function(t,i){var n;n=t.data("_load");if(n){n.load();return}if(t.is(":hidden")&&i!==true){return}n=new e(t);n.load();t.data("_load",n)};e.get=function(e){return e.data("_load")};e.prototype.stop=function(){window.clearInterval(this._interval)};e.prototype.load=function(){var e,t=this;if(t.loading){return}t.loading=true;e=$.get(t.url);e.always((function(){if(t.interval){t.loading=false}}));e.fail((function(){t.stop()}));e.done((function(e){var i=$(e),n,r;r=i.all("[data-load-stop]");if(r.length!=0){t.stop()}if(!t.target){n=e}else if(t.target=="body"){n=/<body[^>]*>((.|[\n\r])*)<\/body>/im.exec(e)[1]}else{n=i.all(t.target)}t.el.html(n);AGN.Lib.Controller.init(t.el);AGN.runAll(t.el)}))};AGN.Lib.Load=e})();(function(){var e={},t,i=0,n=false;e.show=function(){window.clearTimeout(t);if(!n){i+=1;$(".loader").show()}else{n=false}};e.hide=function(){i-=1;if(i<=0){t=window.setTimeout((function(){$(".loader").hide()}),5);i=0}};e.prevent=function(){n=true};AGN.Lib.Loader=e})();(function(){var e,t=AGN.Lib.Form;e=function(e){t.apply(this,[e]);AGN.Lib.Loader.show();this.submit()};e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.prototype.jqxhr=function(){var e=this,t=$.Deferred();this.$form.trigger("form:submit");window.setTimeout((function(){var i=$.ajax({url:e.url,method:e.method,data:e.params(),loader:e.loader()});i.done((function(e){t.resolve.apply(this,arguments)}))}),parseInt(this.$form.data("polling-interval")));return t.promise()};e.prototype.submit=function(){var e,t=this;e=this.jqxhr();e.done((function(e){t.updateHtml(e)}));return e};e.prototype.updateHtml=function(e){var t,i=$(e);t=i.filter('[data-form="loading"]').add(i.find('[data-form="loading"]'));if(t.length==1){this.$form.html(t.html());AGN.runAll(this.$form);this.submit()}else{AGN.Lib.Loader.hide();AGN.Lib.Page.render(e)}};AGN.Lib.LoadingForm=e;AGN.Opt.Forms["loading"]=e})();(function(){var e;e={init:function(){var e=AGN.Lib.Storage.get("menu_state")||"close";if(e=="open"){this.openDirectly()}else{this.closeDirectly()}this.updateInits()},isOpen:function(){return $("body").hasClass("menu-is-active")},openDirectly:function(){AGN.Lib.Helpers.disableCSSAnimations();this.open();AGN.Lib.Helpers.enableCSSAnimations()},closeDirectly:function(){AGN.Lib.Helpers.disableCSSAnimations();this.close();AGN.Lib.Helpers.enableCSSAnimations()},close:function(){AGN.Lib.Storage.set("menu_state","close");$("body").removeClass("menu-is-active");this.updateInits()},open:function(){AGN.Lib.Storage.set("menu_state","open");$("body").addClass("menu-is-active");this.updateInits()},updateInits:function(){window.setTimeout((function(){AGN.Lib.CoreInitializer.run(["truncate","scrollable","dropdown-expand"])}),600)}};AGN.Lib.Menu=e})();(function(){var Messages=function(e,t,i,n,r){var o,a,s={timeout:{success:3e3,warning:3e3}};if(!i){i="info"}if(r===null){r=true}a=s["timeout"][i||"info"]||0;_.each($(".notification"),(function(i){var n=$(i),r,o;r=n.data("message-head");o=n.data("message-content");if(e===r&&t===o){n.remove()}}));o=toastr[i](e,t,{timeOut:a,extendedTimeOut:a,onCloseClick:n,newestOnTop:r});o.data("message-head",e);o.data("message-content",t);AGN.Lib.Controller.init(o);AGN.runAll(o)};var displayMessages=function(e,t,i){t.forEach((function(t){Messages(e,t,i)}))};var hideMessages=function(){_.each($(".notification"),(function(e){e.remove()}))};var JsonMessages=function(e,i){if(!!i){hideMessages()}if(e){if(e.success){displayMessages(t("defaults.success"),e.success,"success")}if(e.warning){displayMessages(t("defaults.warning"),e.warning,"warning")}if(e.alert){displayMessages(t("defaults.error"),e.alert,"alert")}if(e.fields){e.fields.forEach((function(e){const t=$("form").filter((function(){return!!$(this)[0][e.name]}));if(t.exists()){AGN.Lib.Form.get($(t[0])).showFieldError(e.name,e.message)}}))}}};var RenderMessages=function($resp){$resp.all('script[data-message][type="text/html"]').appendTo($(document.body));$resp.all('script[data-message][type="text/javascript"]').each((function(){try{eval($(this).html())}catch(e){console.debug(e)}}))};AGN.Lib.Messages=Messages;AGN.Lib.JsonMessages=JsonMessages;AGN.Lib.RenderMessages=RenderMessages})();(function(){var e={};function t(t){var i="key#"+t;var n=e[i];var r=Array.prototype.slice.call(arguments,1);if(n){e[i]=n.filter((function(e){return e.apply(this,r)!==false}))}}function i(t,i){var n="key#"+t;if($.isFunction(i)){if(!e[n]){e[n]=[]}e[n].push(i)}else{console.error("Callback must be a function")}}function n(t,i){if(arguments.length){var n="key#"+t;if(arguments.length>1){e[n]=e[n].filter((function(e){return e!==i}))}else{e[n]=[]}}}AGN.Lib.Messaging={send:t,subscribe:i,unsubscribe:n}})();(function(){var e;e=function(){};e.create=function(e,t){var i=null,n=null;if(e instanceof $){n=e}else{n=$(e)}var r=n.filter(".modal");var o=n.filter("script");if(r){i=$(r[0]);i.data("_modal",t);o.each((function(){$(this).appendTo(i)}));i=i.modal();AGN.Lib.Controller.init(i);AGN.runAll(i)}return i};e.createFromTemplate=function(t,i){i=AGN.Opt.Templates[i]||AGN.Opt.Templates["modal"];return e.create(_.template(i)(t),t)};e.get=function(t){var i=e.getWrapper(t);return i.data("_modal")};e.getWrapper=function(e){return e.closest(".modal")};AGN.Lib.Modal=e})();(function(){var e=AGN.Lib.Confirm,t={};function i(e){if(e){e=e.toUpperCase();switch(e){case"CONNECT":case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"POST":case"PUT":return e}}return"GET"}t.render=function(i,n){if(/<\s*\/\s*body\s*>/i.test(i)){var r=new DOMParser;var o=r.parseFromString(i,"text/html");if(n!==false&&o.head){var a=$(o.head).data("origin-uri");if(a){n=a}}if(n){window.history.pushState({},"",n)}var s=$(document).scrollTop();setTimeout((function(){AGN.Lib.Controller.init();AGN.runAll();$(document).scrollTop(s)}),100);document.body=o.body;document.title=o.title;var l=$(document.body);l.find("script").each((function(e,t){var i=$(t);if(i.attr("src")){var n=$("<script><\/script>");$.each(t.attributes,(function(){if(this.specified){n.attr(this.name,this.value)}}));try{n.appendTo(l)}catch(e){console.debug(e)}}else if(i.attr("type")=="text/javascript"){try{eval.call(window,i.html())}catch(e){console.debug(e)}}}))}else{var u=$(i);var c=u.filter(".modal");if(c.exists()){var d=$.Deferred();AGN.Lib.RenderMessages(u);e.create(u);d.resolve(e.get(u));return d.promise()}else{c=u.all("script[data-load]");if(c.exists()){return t.reload(c.data("load"),true).done((function(){AGN.Lib.RenderMessages(u)}))}else{AGN.Lib.RenderMessages(u)}}}};t.reload=function(e,n,r){if(n){e=e||window.location.href;var o=$.Deferred();$.ajax(e,{method:i(r)}).done((function(i){var n=t.render(i,e);if(n){n.done(o.resolve).fail(o.reject)}else{o.resolve()}})).fail((function(){o.reject()}));return o.promise()}else{if(e&&e!=window.location.href){window.location.assign(e)}else{window.location.reload(true)}return null}};AGN.Lib.Page=t})();(function(){var e={};var t=function(e){var t=[];if(e.length<8){t.push("password.error.too_short_min8")}if(!e.match("[a-z]")){t.push("password.error.no_lower_case")}if(!e.match("[A-Z]")){t.push("password.error.no_upper_case")}if(!e.match("[0-9]")){t.push("password.error.no_digits")}if(!e.match("[^a-zA-Z0-9]")){t.push("password.error.no_special")}return t};var i=function(e){if(e.length<12){return["password.error.too_short_min12"]}else{return null}};var n=function(e){if(e.length<32){return["password.error.too_short_min32"]}else{return null}};var r=function(e){return["password.error.generic_error"]};var o=[];a("LENGTH_8_MIXED",t);a("LENGTH_12_SIMPLE",i);a("WEBSERVICE",n);function a(e,t){o.push({name:e,fn:t})}e.find_password_policy=function(e){for(var t=0;t<o.length;t++){if(o[t].name==e){return o[t].fn}}return r};AGN.Lib.PasswordPolicies=e})();(function(){var e,t=AGN.Lib.Page,i=AGN.Lib.Form;e=function(e){i.apply(this,[e])};e.prototype=Object.create(i.prototype);e.prototype.constructor=e;e.prototype.jqhxr=function(){var e=this,t=$.Deferred();this.$form.trigger("form:submit");window.setTimeout((function(){var i=$.ajax({url:e.url,method:e.method,data:e.params(),loader:e.loader()});i.done((function(i){var n=$(i);var r=n.all('[data-form="polling"]');if(r.length==1){e.$form.data("polling-interval",r.data("polling-interval"));e.jqhxr().done((function(){t.resolve.apply(this,arguments)}))}else{t.resolve.apply(this,arguments)}}))}),parseInt(this.$form.data("polling-interval")));return t.promise()};e.prototype.submit=function(){var e,t=this;AGN.Lib.Loader.show();e=this.jqxhr();e.done((function(e){AGN.Lib.Loader.hide();t.updateHtml(e)}));return e};e.prototype.updateHtml=function(e){var i,n=$(e),r=this.$form.data("render");if(r=="page"){t.render(e)}else{if(this.$form.attr("id")){i=n.all("#"+this.$form.attr("id"))}else if(this.$form.attr("name")){i=n.all('[name="'+this.$form.attr("name")+'"]')}else{i=n.all("form")}setTimeout((function(){AGN.Lib.Controller.init();AGN.runAll()}),100);this.handleMessages(e);this.$form.replaceWith(i)}};AGN.Lib.PollingForm=e;AGN.Opt.Forms["polling"]=e})();(function(e){var t={};var i=function(t,i){var n=e(t);var r=e(i);var o=e(window).scrollTop();var a=e(window).outerHeight();var s=r.outerHeight();var l=r.offset().top-o;var u=l+s;if(n.outerHeight()<=l){return"top"}return a-u>l?"bottom":"top"};t.new=function(t,n){if(t.length!==1){return false}t.popover(e.extend({container:"body",placement:i},n));var r=t.data("bs.popover");if(n&&n.enableAgnRunAll){t.on("shown.bs.popover",(function(){var e=r.tip();AGN.Lib.Controller.init(e);AGN.runAll(e)}))}return r};t.get=function(e){if(e.length!==1){return null}var t=e.data("bs.popover");if(t){return t}return e.closest("div.popover").data("bs.popover")};t.remove=function(e){if(e.length!==1){return false}e.popover("destroy");return true};t.validate=function(){e(".popover").each((function(){var t=e(this).data("bs.popover");if(t&&t.$element){if(!e.contains(document.body,t.$element[0])){t.destroy()}}}))};AGN.Lib.Popover=t})(jQuery);(function(){var e,t=AGN.Lib.Form,i=AGN.Lib.Page;e=function(e){t.apply(this,[e]);this.resourceSelector=e.data("resource-selector")};e.prototype=Object.create(t.prototype);e.prototype.getResourceSelector=function(){if(this.resourceSelectorNextRequest){var e=this.resourceSelectorNextRequest;this.resourceSelectorNextRequest=null;return e}return this.resourceSelector};e.prototype.setResourceSelectorOnce=function(e){this.resourceSelectorNextRequest=e};e.prototype.updateHtml=function(e){var t=this.getResourceSelector();if(t){var n=$(e);var r=$(t);var o=n.all(t);if(r.length==1&&o.length==1){var a=false;if(r[0]==this.$form[0]||$.contains(r[0],this.$form[0])){a=true}r.html(o.html());this.handleMessages(n);if(a){this.initFields();this.initValidator()}AGN.Lib.Controller.init(r);AGN.runAll(r)}else{i.render(e);this.handleMessages(e,true)}}else{i.render(e);this.handleMessages(e,true)}};AGN.Lib.ResourceForm=e;AGN.Opt.Forms["resource"]=e})();(function(){var e,t=AGN.Lib.Form;e=function(e){t.apply(this,[e])};e.prototype=Object.create(t.prototype);e.prototype.updateHtml=function(e){var t=$(e).find("[data-form-content]"),i=this.$form.find("[data-form-content]");i.html(t.html());this.handleMessages(e);this.initFields(i);AGN.Lib.Controller.init(i);AGN.runAll(i);i.trigger("scrollTo",i)};AGN.Lib.SearchForm=e;AGN.Opt.Forms["search"]=e})();(function(){var e;e=function(e){this.$select=e;this.select=e[0];this.api=function(){args=Array.prototype.slice.call(arguments,0);e.select2.apply(e,args)}};e.get=function(t){var i,n;i=t;n=i.data("_select");if(!n){n=new e(i);i.data("_select",n)}return n};e.prototype.map=function(){var e=this;return _.reduce(e.values(),(function(t,i){t[i]=e.$select.find("option[value='"+i+"']").html();return t}),{})};e.prototype.values=function(){return _.map(this.$select.find("option"),(function(e){return $(e).val()}))};e.prototype.hasOption=function(e){const t=this.values();return t.indexOf(e)!==-1};e.prototype.clear=function(){this.api("val","")};e.prototype.selectNext=function(){const e=this.values();const t=this.getSelectedValue();const i=e.indexOf(t)+1;if(i<e.length){this.selectValue(e[i])}};e.prototype.selectValue=function(e){this.api("val",e)};e.prototype.getFirstValue=function(){return this.$select.find("option:first").val()};e.prototype.selectFirstValue=function(){this.api("val",this.getFirstValue())};e.prototype.selectValueOrSelectFirst=function(e){var t=false,i=this.values();if(!_.isArray(e)){e=[e]}t=_.every(e,(function(e){return i.indexOf(e+"")!=-1}));if(t&&e.length!=0){this.selectValue(e)}else{this.selectFirstValue()}};e.prototype.resetOptions=function(){this.$select.html("")};e.prototype.setOptions=function(e){var t;t=_.reduce(e,(function(e,t){e+='<option value="'+t.id+'">'+t.text+"</option>";return e}),"");this.$select.html(t)};e.prototype.addFormattedOption=function(e){this.$select.append(e)};e.prototype.getSelectedValue=function(){var e=this.$select.val();return e?e:""};AGN.Lib.Select=e})();(function(){var e,t=AGN.Lib.Form;var i=AGN.Lib.CSRF;e=function(e){t.apply(this,[e])};e.prototype=Object.create(t.prototype);e.prototype.jqxhr=function(){return this.form.submit()};e.prototype.submit=function(){var e=this,t=_.merge({},this._data,this._dataNextRequest);if(!this.valid()){this.handleErrors();return false}this.$form.trigger("form:submit");if(i.isProtectionEnabled()){e.$form.find('[name="'+i.getParameterName()+'"]').val(i.readActualToken())}_.each(t,(function(t,i){var n=$('<input type="hidden" name="'+i+'"/>');n.val(t);n.appendTo(e.$form)}));this._dataNextRequest={};this.$form.submit();return $.Deferred().promise()};AGN.Lib.StaticForm=e;AGN.Opt.Forms["static"]=e})();(function(e){var t,i,n,r,o,a,s,l;l=function(e){function t(e,t,i){var n,r;if(i){n=new Date;n.setTime(n.getTime()+i*24*60*60*1e3);r="; expires="+n.toGMTString()}else{r=""}document.cookie=e+"="+t+r+"; path=/"}function i(i){i=JSON.stringify(i);if(e=="session"){window.name=i}else{t("localStorage",i,365)}}function n(){if(e=="session"){window.name=""}else{t("localStorage","",365)}}function r(){var t=e=="session"?window.name:a("localStorage");try{return JSON.parse(t)}catch(e){console.warn("Could not parse storage data: "+t+" cause: "+e)}return{}}var o=r();return{length:0,clear:function(){o={};this.length=0;n()},getItem:function(e,t){if(t===true){var i=r();return i[e]===undefined?null:i[e]}else{return o[e]===undefined?null:o[e]}},key:function(e){var t=0;for(var i in o){if(t==e)return i;else t++}return null},removeItem:function(e){delete o[e];this.length--;i(o)},setItem:function(e,t){o[e]=t+"";this.length++;i(o)}}};a=function(e){var t=e+"=",i=document.cookie.split(";"),n,r;for(n=0;n<i.length;n++){r=i[n];while(r.charAt(0)==" "){r=r.substring(1,r.length)}if(r.indexOf(t)==0){return r.substring(t.length,r.length)}}return null};try{if(!window.localStorage){s=new l("local")}else{s=window.localStorage}}catch(e){s=new l("local")}t=function(e){try{var t=s.getItem(p(e));if(t){return JSON.parse(t)}}catch(t){console.warn("Could not get Storage key: "+e+" cause: "+t)}return undefined};i=function(e,t){try{t=JSON.stringify(t);s.setItem(p(e),t)}catch(i){console.warn("Could not set Storage key:value "+e+":"+t+" cause: "+i)}};n=function(e){try{s.removeItem(p(e))}catch(t){console.warn("Could not remove Storage key:"+e+" cause: "+t)}};r=function(t){t.each((function(){var t=e(this);if(t.is("[data-stored-field]")&&(t.is("input")||t.is("select"))){u(t)}else{t.find("[data-stored-field]").each((function(){u(e(this))}))}}))};o=function(t){var i=false;t.each((function(){var t=e(this);if(t.is("[data-stored-field]")&&(t.is("input")||t.is("select"))){if(c(t)){i=true}}else{t.find("[data-stored-field]").each((function(){if(c(e(this))){i=true}}))}}));return i};function u(e){var t=e.data("stored-field")|"";var n=e.prop("name");if(n!=undefined){var r=undefined;if(e.prop("type")=="checkbox"){r=e.is(":checked")}else if(e.is("input")||e.is("select")){r=e.val()}if(r!=undefined){i(f(n,t),r)}}}function c(n){var r=n.data("stored-field")|"";var o=false;var a=n.prop("name");if(a!=undefined){var s=n.prop("type")||n.prop("type");var l=t(f(a,r));if(l===undefined){l=t(d(a,r));if(l===undefined){return false}i(f(a,r),l)}if(s=="radio"){if(n.val()!==l&&n.is(":checked")){n.prop("checked",false);return true}else if(n.val()==l&&!n.is(":checked")){n.prop("checked",true);return true}}else if(s=="checkbox"){if(n.prop("checked")!==l){n.prop("checked",l);o=true}}else if(s=="select-one"){var u=false;n.find("option").each((function(){if(e(this).val()==l){u=true;return false}}));if(u&&n.val()!==l){n.val(l).change();o=true}}else if(s=="select-multiple"){var c=[];var p=n.value();n.find("option").each((function(){var t=e(this);e.each(l,(function(e,i){if(t.val()==i){c.push(i)}}))}));c.sort();p.sort();var h=true;if(c.length!=p.length)h=false;for(var g=0;g<c.length;++g){if(c[g]!==p[g])h=false}if(!h){n.val(c).change();o=true}}else if(s=="textarea"||s=="text"){if(n.val()!==l){n.val(l);o=true}}}return o}function d(e,t){var i="stored_field_";if(e){i=i+e}if(t){i=i+"_"+t;return i}return undefined}function f(e,t){var i=d(e,t);if(i){return p(i)}else{return i}}function p(e){if(window.adminId){return window.adminId+"-"+e}return e}AGN.Lib.Storage={get:t,set:i,delete:n,readCookie:a,saveChosenFields:r,restoreChosenFields:o}})(jQuery);(function(){var e=AGN.Lib.Storage;var t,i,n,r;t=function(t){var n=t.data("toggle-tab"),o=r(t,n),a=e.get("toggle_tab"+o)||{},s=$(n);if(typeof s.data("tab-show")!=="undefined"){a.hidden=false;s.data("tab-show",undefined)}if(typeof s.data("tab-hide")!=="undefined"){a.hidden=true;s.data("tab-hide",undefined)}if(a.hidden===false||a.hidden!==true&&s.is(":visible")){i(t)}};i=function(t){var i=t.parents("ul").find("[data-toggle-tab]").not(t),o=t.data("toggle-tab"),a=r(t,o),s=$(o),l=t.find(".tab-toggle"),u=$(t.data("extends-tab"));_.each(i,(function(e){n($(e))}));t.parent().addClass("active");l.removeClass("icon-angle-down").addClass("icon-angle-up");s.removeClass("hidden");u.removeClass("hidden");s.trigger("tile:show");e.set("toggle_tab"+a,{hidden:false});AGN.Lib.CoreInitializer.run("load",s)};n=function(t){var i=t.data("toggle-tab"),n=r(t,i),o=t.find(".tab-toggle");t.parent().removeClass("active");o.removeClass("icon-angle-up").addClass("icon-angle-down");$(i).addClass("hidden");$(i).trigger("tile:hide");e.set("toggle_tab"+n,{hidden:true})};toggle=function(e){var t=e.data("toggle-tab"),r=$(t);if(r.is(":visible")){n(e)}else{i(e)}};r=function(e,t){var i=e.data("tab-group");if(i){return"/"+i}else{return t}};AGN.Lib.Tab={init:t,show:i,hide:n,toggle:toggle}})();(function(){var e=AGN.Lib.Popover;var i,n;n='<div class="pagination-top"></div>'+'<div class="ag-theme-bootstrap" style="height: calc(100% - 106px); width: 100%"></div>'+'<div class="pagination-bottom"></div>';i=function(i,a,s,l){var u=this;this.$el=i;this.$el.html(n);this.$el.data("_table",u);this.$paginationTop=this.$el.find(".pagination-top");this.$paginationBottom=this.$el.find(".pagination-bottom");a.forEach((function(e){if(e.cellRenderer){e.cellRenderer=AGN.Opt.TableCellRenderers[e.cellRenderer]}if(e.headerComponent){e.headerComponent=AGN.Opt.TableHeaderComponents[e.headerComponent]}if(e.comparator){e.comparator=AGN.Opt.Table["comparators"][e.comparator]}}));this.gridOptions=_.merge({autoSizePadding:4,columnDefs:a,enableSorting:true,accentedSort:true,enableFilter:true,enableColResize:true,pagination:true,showRecordsCount:true,filtersDescription:{enabled:false,templateName:"",templateParams:{}},paginationPageSize:100,rowSelection:"multiple",unSortIcon:true,onCellClicked:function(e){switch(e.colDef.cellAction){case"select":e.node.setSelected(!e.node.isSelected());break;case"goTo":var t=e.data.show;if(t){if(e.event.ctrlKey){window.open(t,"_blank")}else{window.location.href=t}}break}},onCellMouseOver:function(e){if(e.colDef.textInPopoverIfTruncated===true){var t=e.event.target,i=t.clientWidth<t.scrollWidth;if(i){o(e).show()}}},onCellMouseOut:function(t){if(t.colDef.textInPopoverIfTruncated===true){var i=e.get($(t.event.target));if(i){i.hide()}}},suppressRowClickSelection:true,headerHeight:41,rowHeight:34,suppressPaginationPanel:true,onPaginationChanged:function(){u.renderPagination();r.call(u)},defaultColDef:{headerComponentParams:{template:'<div class="ag-cell-label-container" role="presentation">'+'  <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button"></span>'+'  <div ref="eLabel" class="ag-header-cell-label" role="presentation">'+'    <span ref="eSortAsc" class="ag-header-icon ag-sort-ascending-icon" ></span>'+'    <span ref="eSortDesc" class="ag-header-icon ag-sort-descending-icon" ></span>'+'    <span ref="eSortNone" class="ag-header-icon ag-sort-none-icon" ></span>'+'    <span ref="eText" class="ag-header-cell-text" role="columnheader"></span>'+'    <span ref="eFilter" class="ag-header-icon ag-filter-icon"></span>'+'    <span ref="eSortOrder" class="ag-header-icon ag-sort-order" ></span>'+"  </div>"+"</div>"},filterParams:{clearButton:true}},columnTypes:{numberColumn:{width:83,filter:"agNumberColumnFilter",comparator:AGN.Lib.TableNumberComparator},dateColumn:{filter:AGN.Lib.TableDateFilter},setColumn:{filter:AGN.Lib.TableSetFilter},bulkSelectColumn:{headerName:"",editable:false,checkboxSelection:true,headerCheckboxSelection:true,headerComponent:AGN.Opt.TableHeaderComponents["NoLabelHeader"],suppressResize:true,suppressMenu:true,suppressSorting:true,cellAction:"select",suppressSizeToFit:true,cellStyle:{textAlign:"center"}},deleteColumn:{headerName:"",editable:false,suppressResize:true,suppressMenu:true,suppressSorting:true,cellAction:null,cellRenderer:AGN.Opt.TableCellRenderers["DeleteCellRenderer"],suppressSizeToFit:true,"button-tooltip":t("defaults.delete")},textCaseInsensitiveColumn:{comparator:AGN.Lib.TableCaseInsensitiveComparator}},icons:{menu:'<i class="icon icon-filter"/>',filter:'<i class="icon icon-filter"/>',columns:'<i class="icon icon-handshake-o"/>',sortAscending:'<i class="icon icon-sort-asc"/>',sortDescending:'<i class="icon icon-sort-desc"/>',checkboxChecked:'<i class="icon icon-check-square-o"/>',checkboxUnchecked:'<i class="icon icon-square-o"/>',checkboxIndeterminate:'<i class="icon icon-square-o"/>',checkboxCheckedReadOnly:'<i class="icon icon-check-square-o"/>',checkboxUncheckedReadOnly:'<i class="icon icon-square-o"/>',checkboxIndeterminateReadOnly:'<i class="icon icon-square-o"/>',sortUnSort:'<i class="icon-fa5 icon-fa5-sort"/>'},localeText:window.I18n.tables},l||{});if(!this.gridOptions.showRecordsCount&&!this.gridOptions.pagination){this.$el.find(".ag-theme-bootstrap").height(this.gridOptions.autoHeight?"auto":this.$el.parent().height())}this.grid=new agGrid.Grid(this.$el.find(".ag-theme-bootstrap").get(0),this.gridOptions);this.api=this.gridOptions.api;this.columnApi=this.gridOptions.columnApi;this.api.setRowData(s);this.redraw()};i.prototype.renderPagination=function(){var e=this.api,t,i,n,r,o=AGN.Lib.Template.prepare("table-controls-top");paginationBottomTemplate=AGN.Lib.Template.prepare("table-controls-bottom");if(!e){return}t=e.paginationGetCurrentPage()+1;i=e.paginationGetTotalPages();n=[t];_.times(5,(function(e){if(t-(e+1)>0){n.unshift(t-(e+1))}if(t+(e+1)<=i){n.push(t+(e+1))}}));r={pagination:this.gridOptions.pagination,showRecordsCount:this.gridOptions.showRecordsCount,currentPage:t,totalPages:i,itemStart:e.paginationGetPageSize()*(t-1)+1,itemEnd:t==i?e.paginationGetRowCount():e.paginationGetPageSize()*t,itemTotal:e.paginationGetRowCount(),pageSelects:n};this.$paginationTop.html(o(r));var a=this.gridOptions.filtersDescription;if(a.enabled&&a.templateName){this.$paginationTop.find("#filtersDescription").html(AGN.Lib.Template.text(a.templateName),a.templateParams)}this.$paginationBottom.html(paginationBottomTemplate(r));this.api.redrawRows()};function r(){if(this.gridOptions.readonlyRowMessage){this.api.forEachNode((e=>{if(e.data.readonly){const t=$(".ag-body-container [row-id="+e.id+"]");if(t.length){t.addClass("readonly");AGN.Lib.Tooltip.createTip(t,this.gridOptions.readonlyRowMessage)}}}))}}i.prototype.redraw=function(){var e=this.columnApi.getAllDisplayedColumns().filter((function(e){return e.getColDef().suppressSizeToFit===true})).map((function(e){return e.getColId()}));if(e.length){this.columnApi.autoSizeColumns(e)}this.api.sizeColumnsToFit();r.call(this)};i.get=function(e){var t,n;t=i.getWrapper(e);n=t.data("_table");return n};i.getWrapper=function(e){var t;t=$(e.data("table-body"));if(t.length==0){t=e.closest(".js-data-table-body")}return t};AGN.Lib.Table=i;function o(t){var i=$(t.event.target),n=e.get(i);if(!n){return e.new(i,{trigger:"manual",container:"body",content:t.value})}return n}})();(function(){var e;e=function(){};e.getComplexityColor=function(e){var t;if(e<10){t="green"}else if(e>=10&&e<17){t="yellow"}else{t="red"}return t};AGN.Lib.TargetGroup=e})();(function(){const e=AGN.Lib.CSRF;const t=AGN.Opt.Templates;function i(e){if(e in t){const i=_.template(t[e]);return n(i)}throw new Error("There's no template `"+e+"` registered")}function n(t){return function(){const i=t.apply(this,arguments);return e.updateTokenInDOM(i,true)}}function r(e,t){return i(e)(t)}function o(e,t){return $(r(e,t))}AGN.Lib.Template={prepare:i,text:r,dom:o}})();(function(){const e=AGN.Lib.Storage;var t,i,n,r,o;t=function(t){const i=t.data("toggle-tile"),n=e.get("toggle_tile"+i);if(!n){const e=t.data("toggle-tile-default-state");if(typeof e!=="undefined"){if(e==="open"){a(t,false)}else{s(t,false)}}return}if(n.hidden){o(t)}else{r(t)}};i=function(e){const t=$(e.data("toggle-tile"));if(t.hasClass("hidden")){r(e)}else{o(e)}};r=function(e){a(e,true)};function a(t,i){const n=t.find(".icon"),r=t.data("toggle-tile"),o=$(r);o.removeClass("hidden");n.addClass("icon-angle-up");n.removeClass("icon-angle-down");if(i){e.set("toggle_tile"+r,{hidden:false})}AGN.Lib.CoreInitializer.run("load",o)}n=function(e){return e.closest(".tile").find("[data-toggle-tile]")};o=function(e){s(e,true)};function s(t,i){const n=t.find(".icon"),r=t.data("toggle-tile");$(r).addClass("hidden");n.addClass("icon-angle-down");n.removeClass("icon-angle-up");if(i){e.set("toggle_tile"+r,{hidden:true})}}AGN.Lib.Tile={toggle:i,init:t,show:r,hide:o,trigger:n}})();(function(){var e={},t=AGN.Lib.Template,i=AGN.Lib.Helpers;var n=function(){var e=t.prepare("tooltip-message-with-title");var i=t.prepare("tooltip-message-just-content");return function(t,n){if(t){return e({title:t,content:n})}return i({content:n})}}();var r=function(){var e=t.prepare("tooltip-template");return function(t,i,n){return e({tooltipStyle:t,arrowStyle:i,innerStyle:n})}}();function o(e,t){return{title:e,container:"body",template:r(t)}}function a(e,t,i){return{title:n(e,t),container:"body",html:true,placement:"auto top",template:r(i,"helper-popup-arrow","helper-popup")}}e.options=function(e){var n={};if(e.is("[data-tooltip]")){var r=e.data("tooltip");var s=e.data("tooltip-src");if(s){r=t.text(s,{element:e})}n=o(r,e.data("tooltip-style"))}else if(e.is("[data-tooltip-help]")){n=a(e.data("tooltip-help"),e.data("tooltip-help-text"),e.data("tooltip-style"))}return $.extend(n,i.objFromString(e.data("tooltip-options")))};e.create=function(t,i){e.remove(t);t.bsTooltip(i);t.on({"dragstart.tooltip":function(){t.bsTooltip("hide");t.bsTooltip("disable")},"dragstop.tooltip":function(){t.bsTooltip("enable")}});t.on("remove",(function(){e.remove(t)}))};e.remove=function(e){e.bsTooltip("hide");e.bsTooltip("destroy");e.off("dragstart.tooltip dragstop.tooltip")};e.setEnabled=function(e,t){if(t||t===undefined){e.bsTooltip("enable")}else{e.bsTooltip("hide");e.bsTooltip("disable")}};e.setShown=function(e,t){if(t||t===undefined){e.bsTooltip("show")}else{e.bsTooltip("hide")}};e.createTip=function(t,i,n){e.create(t,o(i,n))};e.createHelpTip=function(t,i,n,r){e.create(t,a(i,n,r))};AGN.Lib.Tooltip=e})();(function(){var e=AGN.Lib.Action;var t;var i;var n;t=function(){};t.prototype.load=function(e,t){n=t;i=_.template(AGN.Opt.Templates["trackablelink-extension-table-row"]);_.each(e,(function(e,t){r(t,e.name,e.value)}));o("","")};t.prototype.collect=function(){if(n&&n.length){return _.map(n.find("[data-extension-row]"),(function(e){var t=$(e);return{name:l(t),value:u(t)}})).filter((function(e){return e.name&&e.value}))}return[]};e.new({click:"[data-extension-add]",enterdown:"[data-extension-row]"},(function(){this.event.preventDefault();if(a("","")){s();o("","")}n.find("[data-extension-name]:last").focus()}));e.new({click:"[data-extension-delete]"},(function(){var e=this.el.closest("tr");e.remove()}));e.new({click:"[data-add-default-extensions]"},(function(){var e=n.find("tr:last");if(l(e)==""&&u(e)==""){e.remove()}else{s()}_.each(AGN.Opt.DefaultExtensions,(function(e){o(e.name,e.value)}));o("","")}));function r(e,t,r){if(a(t,r)){n.append(i({index:e,name:t,value:r}))}}function o(e,t){var i=n.find("[data-extension-row]:last-child").data("extension-row")||0;r(++i,e,t)}function a(e,t){var i=true;_.each(n.find("[data-extension-row]"),(function(n){var r=$(n);if(i){if(l(r)==e&&u(r)==t){i=false}}}));return i}function s(){var e=n.find("#newExtensionBtn");e.after("<a href='#' class='btn btn-regular btn-alert' data-extension-delete>"+"<i class='icon icon-trash-o'></i></a>");e.remove()}function l(e){return e.find("[data-extension-name]").val()}function u(e){return e.find("[data-extension-value]").val()}AGN.Lib.TrackableLinkExtensions=t})();(function(){AGN.Lib.Truncate={run:function(e,t){var i,n;i=e.width();n=_.reduce(e.children().not(t),(function(e,t){return e+$(t).outerWidth(true)}),0);n=n+($(t).outerWidth(true)-$(t).outerWidth());n=n*.05>5?1.05*n:n+5;n=n>i?i:n;e.children(t).css({"max-width":i-n+"px",overflow:"hidden"})}}})();(function(){var e;e=function(e){if(e.init){e.init();delete e.init}return $.extend(this,e)};e.exists=function(e){return AGN.Opt.Validators.hasOwnProperty(e)};e.get=function(t){return e.exists(t)?AGN.Opt.Validators[t]:null};e.new=function(t,i){if(e.exists(t)){console.debug("Validator with name `"+t+"` was overridden")}var n=new e(i);AGN.Opt.Validators[t]=n;return n};e.prototype.valid=function(){return true};e.prototype.errors=function(){return[]};AGN.Lib.Validator=e})();(function(){var e,t,i;e=function(){var e=$("[data-view]:checked"),t=AGN.Lib.Storage.get("view_"+e.data("view"));if(t){$('[data-view][value="'+t.view+'"]').prop("checked",true)}else{t={view:e.val()}}i(t.view)};t=function(e){var t=e.val();i(t);AGN.Lib.Storage.set("view_"+e.data("view"),{view:t})};i=function(e){_.each($("[data-view-"+e+"]"),(function(t){var i=$(t);i.attr("class",i.data("view-"+e))}));$(window).trigger("resize");AGN.Lib.CoreInitializer.run("load");if($("#preview").length){s(e)}};function n(){$("#preview-contents").css("height","");$(".mailing-preview-wrapper").css("overflow-y","")}function r(e){e.css({"flex-grow":"1","overflow-y":"auto"})}function o(e){var t=$(".tile").first().offset().top;$('[data-load-target="#preview"]').parent().css({position:"sticky",top:(e?15:t)+"px"})}function a(e){return e.length&&e.find("iframe").length}function s(e){var t=$("#gt-wrapper").exists();var i=$(".mailing-preview-wrapper");if(!i.length&&t){i=$("#preview").find(".tile-content-padded")}if(a(i)){if(e==="block"){n(i)}else if(e==="split"){i.css("height","0px");o(t);l(i,t);r(i,t);i.css("height","")}}}function l(e,t){var i=e.parent();i.css({display:"flex","flex-direction":"column",height:"calc(100vh - "+Math.ceil(i.offset().top-$(window).scrollTop()+(t?45:10))+"px)","min-height":"200px"})}AGN.Lib.View={init:e,trigger:t}})();(function(){var e=AGN.Lib.Storage;var t={};t.get=function(t){var i="web-storage#"+$.trim(t);try{return e.get(i)}catch(e){console.error(e)}return null};t.set=function(t,i){e.set("web-storage#"+$.trim(t),i)};t.extend=function(e,i){var n=t.get(e);if(n!=null){n=$.extend(n,i)}else{n=i}t.set(e,n);return n};AGN.Lib.WebStorage=t})();(function(){var e={actionbased_mailing:{icons:{inactive:"icon_actionbased_mailing_g.png",active:"icon_actionbased_mailing_l.png",dialog:"icon_actionbased_mailing_s.png"},anchors:[[.07,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},mailing_mediatype_sms:{icons:{inactive:"icon_sms_g.png",active:"icon_sms_l.png",dialog:"icon_sms_s.png"},anchors:[[.07,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},mailing_mediatype_post:{icons:{inactive:"icon_post_g.png",active:"icon_post_l.png",dialog:"icon_post_s.png"},anchors:[[.07,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},archive:{icons:{inactive:"icon_archive_g.png",active:"icon_archive_l.png",dialog:"icon_archive_s.png"},anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.8,0,1]]},datebased_mailing:{icons:{inactive:"icon_datebased_mailing_g.png",active:"icon_datebased_mailing_l.png",dialog:"icon_datebased_mailing_s.png"},anchors:[[.07,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},deadline:{icons:{inactive:"icon_deadline_g.png",active:"icon_deadline_l.png",dialog:"icon_deadline_s.png"},anchors:[[.1,.5,-1,0],[.5,.05,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},decision:{icons:{inactive:"icon_decision_g.png",active:"icon_decision_l.png",dialog:"icon_decision_s.png"},anchors:[[.06,.5,-1,0],[.5,.06,0,-1],[.94,.5,1,0],[.5,.94,0,1]]},export:{icons:{inactive:"icon_export_g.png",active:"icon_export_l.png",dialog:"icon_export_s.png"},anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},followup_mailing:{icons:{inactive:"icon_followup_mailing_g.png",active:"icon_followup_mailing_l.png",dialog:"icon_followup_mailing_s.png"},anchors:[[.04,.5,-1,0],[.5,.2,0,-1],[.96,.5,1,0],[.5,.8,0,1]]},form:{icons:{inactive:"icon_form_g.png",active:"icon_form_l.png",dialog:"icon_form_s.png"},anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},import:{icons:{inactive:"icon_import_g.png",active:"icon_import_l.png",dialog:"icon_import_s.png"},anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},mailing:{icons:{inactive:"icon_mailing_g.png",active:"icon_mailing_l.png",dialog:"icon_mailing_s.png"},anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},ownWorkflow:{icons:{inactive:"icon_ownWorkflow_g.png",active:"icon_ownWorkflow_l.png",dialog:"icon_ownWorkflow_s.png"},anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},parameter:{icons:{inactive:"icon_parameter_g.png",active:"icon_parameter_l.png",dialog:"icon_parameter_s.png"},anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},recipient:{icons:{inactive:"icon_recipient_g.png",active:"icon_recipient_l.png",dialog:"icon_recipient_s.png"},anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},scABTest:{icons:{inactive:"icon_scABTest_g.png",active:"icon_scABTest_l.png",dialog:"icon_scABTest_s.png"},anchors:[[.1,.5,-1,0],[.5,.15,0,-1],[.9,.5,1,0],[.5,.85,0,1]]},scBirthday:{icons:{inactive:"icon_scBirthday_g.png",active:"icon_scBirthday_l.png",dialog:"icon_scBirthday_s.png"},anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.85,0,1]]},scDOI:{icons:{inactive:"icon_scDOI_g.png",active:"icon_scDOI_l.png",dialog:"icon_scDOI_s.png"},anchors:[[.3,.5,-1,0],[.5,.04,0,-1],[.72,.5,1,0],[.5,.96,0,1]]},start:{icons:{inactive:"icon_start_g.png",active:"icon_start_l.png",dialog:"icon_start_s.png"},anchors:[[0,.5,-1,0],[.5,.15,0,-1],[1,.5,1,0],[.5,.85,0,1]]},stop:{icons:{inactive:"icon_start_g.png",active:"icon_stop_l.png",dialog:"icon_start_s.png"},anchors:[[0,.5,-1,0],[.5,.15,0,-1],[1,.5,1,0],[.5,.85,0,1]]}};var t={"*":{deadline:function(e,t){return!t.connections.incoming.some((function(e){return e.source.getType()==="import"}))},mailing:function(e,t){return t.connections.incoming.length===0},datebased_mailing:function(e,t){return t.connections.incoming.length===0}},start:{recipient:true,form:true,import:true,export:true},stop:false,decision:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,mailing_mediatype_sms:true,mailing_mediatype_post:true,actionbased_mailing:true,datebased_mailing:true,followup_mailing:true,mailing:true},parameter:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,mailing_mediatype_sms:true,mailing_mediatype_post:true,actionbased_mailing:true,datebased_mailing:true,followup_mailing:true,mailing:true},deadline:{decision:true,parameter:true,recipient:true,archive:true,mailing_mediatype_sms:true,mailing_mediatype_post:true,actionbased_mailing:true,datebased_mailing:true,followup_mailing:true,mailing:true,import:true,export:true},recipient:{decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,mailing_mediatype_sms:true,mailing_mediatype_post:true,actionbased_mailing:true,datebased_mailing:true,followup_mailing:true,mailing:true,import:true,export:true},actionbased_mailing:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,import:true,export:true},datebased_mailing:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,import:true,export:true},followup_mailing:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,import:true,export:true},mailing:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,import:true,export:true},mailing_mediatype_sms:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,import:true,export:true},mailing_mediatype_post:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,import:true,export:true},archive:{decision:true,parameter:true,deadline:true,recipient:true,actionbased_mailing:true,mailing_mediatype_sms:true,mailing_mediatype_post:true,datebased_mailing:true,followup_mailing:true,mailing:true,import:true,export:true},form:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,actionbased_mailing:true,mailing_mediatype_sms:true,mailing_mediatype_post:true,datebased_mailing:true,followup_mailing:true,mailing:true,import:true,export:true},import:{deadline:function(e){return e.connections.outgoing.length===0}},export:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,actionbased_mailing:true,mailing_mediatype_sms:true,mailing_mediatype_post:true,datebased_mailing:true,followup_mailing:true,mailing:true,import:true,export:true,archive:true,form:true}};AGN.Lib.WM.Definitions={KEY_ENTER:13,KEY_SHIFT:16,KEY_CTRL:17,KEY_SPACE:32,KEY_DELETE:46,MOUSE_BUTTON_LEFT:0,MOUSE_BUTTON_MIDDLE:1,DEFAULT_DRAG_MODE:0,GRID_CELL_DRAG_MODE:1,BOTTOM:"BOTTOM",LEFT:"LEFT",RIGHT:"RIGHT",TOP:"TOP",NODE_ANIMATION_DROPPED:"animate-dropped",NODE_ANIMATION_AUTO_DROPPED:"animate-auto-dropped",Z_INDEX_VIEW_PORT:10,Z_INDEX_ICON_PANEL:50,Z_INDEX_DRAGGABLE_BUTTON:60,Z_INDEX_ICON_TITLES_CONTAINER:5,Z_INDEX_CONNECTION_OVERLAY:9,Z_INDEX_ICON:10,Z_INDEX_CONNECTION_HOVER:11,Z_INDEX_CONNECTION_OVERLAY_HOVER:12,Z_INDEX_ICON_HOVER:13,Z_INDEX_ICON_TITLE_HOVER:19,Z_INDEX_DRAGGED_ICON_NODE:20,Z_INDEX_JSPLUMB_DRAG_OPTIONS:25,Z_INDEX_NAVIGATOR_GLOBE:30,Z_INDEX_NAVIGATOR_ARROWS:31,Z_INDEX_CONTEXT_MENU:40,CANVAS_DEFAULT_GRID_SIZE:20,CANVAS_GRID_SIZE:20,NODE_SIZE:64,NODE_MIN_MARGIN:.1,TITLE_WIDTH:94,MINIMAP_PADDING:2,DEFAULT_AUTO_ALIGN_STEP_X:5,GRID_AUTO_ALIGN_STEP_X:2,AUTO_ALIGN_STEP_X:5,AUTO_ALIGN_EXTRA_STEP_X:.5,DEFAULT_AUTO_ALIGN_STEP_Y:6,GRID_AUTO_ALIGN_STEP_Y:2,AUTO_ALIGN_STEP_Y:6,AUTO_ALIGN_STEP_BETWEEN_GROUPS:2,AUTO_DROP_STEP_X:4,AUTO_DROP_STEP_Y:3,MIN_ZOOM:.5,MAX_ZOOM:1.5,DEFAULT_ZOOM:1,ZOOM_STEP:.1,NAVIGATION_STEP:100,MAX_UNDO_STEPS:17,CONNECTION_COLOR:"#61B7CF",CONNECTION_THICKNESS:3,CONNECTION_OUTLINE_COLOR:"transparent",CONNECTION_OUTLINE_WIDTH:4,CONNECTION_HOVER_COLOR:"#216477",CONNECTION_ARROW_SIZE:10,NODE_TYPE_START:"start",NODE_TYPE_STOP:"stop",NODE_TYPE_DECISION:"decision",NODE_TYPE_DEADLINE:"deadline",NODE_TYPE_PARAMETER:"parameter",NODE_TYPE_RECIPIENT:"recipient",NODE_TYPE_ARCHIVE:"archive",NODE_TYPE_FORM:"form",NODE_TYPE_MAILING:"mailing",NODE_TYPE_OWN_WORKFLOW:"ownWorkflow",NODE_TYPE_SC_BIRTHDAY:"scBirthday",NODE_TYPE_SC_DOI:"scDOI",NODE_TYPE_SC_ABTEST:"scABTest",NODE_TYPE_ACTION_BASED_MAILING:"actionbased_mailing",NODE_TYPE_MAILING_MEDIATYPE_SMS:"mailing_mediatype_sms",NODE_TYPE_MAILING_MEDIATYPE_POST:"mailing_mediatype_post",NODE_TYPE_DATE_BASED_MAILING:"datebased_mailing",NODE_TYPE_FOLLOWUP_MAILING:"followup_mailing",NODE_TYPE_IMPORT:"import",NODE_TYPE_EXPORT:"export",NODE_TYPES_MAILING:["mailing","followup_mailing","actionbased_mailing","datebased_mailing","mailing_mediatype_sms","mailing_mediatype_post"],NODE_TYPES_IMPORT_EXPORT:["import","export"],NODE_TYPE_START_ID:0,NODE_TYPE_STOP_ID:1,NODE_TYPE_DECISION_ID:2,NODE_TYPE_DEADLINE_ID:3,NODE_TYPE_PARAMETER_ID:4,NODE_TYPE_RECIPIENT_ID:6,NODE_TYPE_ARCHIVE_ID:7,NODE_TYPE_FORM_ID:8,NODE_TYPE_MAILING_ID:9,NODE_TYPE_OWN_WORKFLOW_ID:10,NODE_TYPE_SC_BIRTHDAY_ID:11,NODE_TYPE_SC_DOI_ID:12,NODE_TYPE_SC_ABTEST_ID:13,NODE_TYPE_ACTION_BASED_MAILING_ID:14,NODE_TYPE_DATE_BASED_MAILING_ID:15,NODE_TYPE_FOLLOWUP_MAILING_ID:16,NODE_TYPE_IMPORT_ID:17,NODE_TYPE_EXPORT_ID:18,NODE_TYPE_MAILING_MEDIATYPE_SMS_ID:19,NODE_TYPE_MAILING_MEDIATYPE_POST_ID:20,MAILING_PARAM_MAILING_LIST:1,MAILING_PARAM_TARGET_GROUPS:2,MAILING_PARAM_ARCHIVE:3,MAILING_PARAM_LIST_SPLIT:4,MAILING_PARAM_PLANNED_DATE:5,MAILING_PARAM_SEND_DATE:6,MAILING_PARAM_ALTGS:7,DEPENDENCY_TYPE_ARCHIVE:1,DEPENDENCY_TYPE_AUTO_EXPORT:2,DEPENDENCY_TYPE_AUTO_IMPORT:3,DEPENDENCY_TYPE_MAILING_DELIVERY:4,DEPENDENCY_TYPE_MAILING_LINK:5,DEPENDENCY_TYPE_MAILING_REFERENCE:6,DEPENDENCY_TYPE_MAILINGLIST:7,DEPENDENCY_TYPE_PROFILE_FIELD:8,DEPENDENCY_TYPE_PROFILE_FIELD_HISTORY:9,DEPENDENCY_TYPE_TARGET_GROUP:11,DEPENDENCY_TYPE_USER_FORM:12,GENDER_PROFILE_FIELD:"gender",FIELD_TYPE_DATE:"date",SPLIT_DEFAULT_PARAMETERS:[5,10,15,20,25,30,33,40,50],TITLE_MAX_TARGETS:2,PDF_SIZE:"A4",PDF_ORIENTATION:"landscape",PAGE_DIMENSIONS:{A4:{width:800,height:1360}},ICONS_CONFIG:e,CONNECTION_CONSTRAINTS:t,NODE_POPOVER_TEMPLATE:'<div class="popover popover-wide" role="tooltip" ><div class="arrow"></div><div class="popover-content" style="width: auto; height: auto; max-width: 300px; max-height: 350px; overflow: auto;"></div></div>',EMPTY_OPTION_PLACEHOLDER:"--"}})();(function(){var e=AGN.Lib.WM.Definitions,i=AGN.Lib.Helpers,n=AGN.Lib.DateFormat;AGN.Lib.WM.Utils={checkActivation:function(i){var n=$("#workflow-status").val();if(e.constants.initialWorkflowStatus===e.constants.statusActive&&(n===e.constants.statusActive||n===e.constants.statusTesting)){if(i){AGN.Lib.Messages(t("workflow.defaults.error"),t("error.workflow.saveActivatedWorkflow"),"alert")}return true}else{return false}},getConfigData:function(e){return i.objFromString(e.data("config"))},mapAsOptionsHtml:function(e){var t="";Object.keys(e).forEach((function(i){var n='value="'+i+'"';t+="<option "+n+">"+e[i]+"</option>"}));return t},arrayAsOptionsHtml:function(e){var t="";e.forEach((function(e){var i='value="'+e.id+'"';var n=e.data;if(n){Object.keys(n).forEach((function(e){i+=" data-"+e+'="'+n[e].replace('"',"&quot;")+'"'}))}var r=e.text.replace("<","&lt;").replace(">","&gt;");t+="<option "+i+">"+r+"</option>"}));return t}};AGN.Lib.WM.DateTimeUtils={toDateTime:function(e,t,i){var n=null;if(!!e&&e.getMonth){n=new Date(e);if(!!t&&t!==0){n.setHours(t)}if(!!i&&i!==0){n.setMinutes(i)}}return n},getDateTimeValue:function(e,t,i){var n=this.toDateTime(e,t,i);return n!=null?n.getTime():null},getDateTimeStr:function(e,t,i,r){if(!e||!e.getMonth){return""}t=t||e.getHours();i=i||e.getMinutes();var o=this.toDateTime(e,t,i);if(!!o){return n.format(o,r)}else{return""}},getDateStr:function(e,t){return this.getDateTimeStr(e,null,null,t)}}})();(function(){function e(e){this.rules=e}e.prototype.isConstraint=function(e){return _.isBoolean(e)||_.isFunction(e)};e.prototype.evaluate=function(e,t,i){if(e===true||e===false){return e}if(_.isFunction(e)){return e(t,i)}return undefined};e.prototype.getRulesToCheck=function(e,t){return[{from:e.type,to:[t.type,"*"]},{from:"*",to:[t.type,"*"]}]};e.prototype.getRelevantConstraints=function(e,t){var i=this.isConstraint;var n=this.getRulesToCheck(e,t);var r=this.rules;var o=[];n.forEach((function(e){var t=true;if(_.has(r,e.from)){var n=r[e.from];if(i(n)){o.push(n);t=false}else{e.to.forEach((function(a){if(_.has(r[e.from],a)){n=r[e.from][a];if(i(n)){o.push(n);t=false}}}))}}if(t&&e.from!="*"){o.push(false)}}));return o};e.prototype.check=function(e,t){var i=this.getRelevantConstraints(e,t);var n=false;for(var r=0;r<i.length;r++){if(this.evaluate(i[r],e,t)){n=true}else{return false}}return n};AGN.Lib.WM.ConnectionConstraints=e})();(function(){var e=AGN.Lib.WM.DateTimeUtils,t=AGN.Lib.Template,i=AGN.Lib.WM.Definitions,n=AGN.Lib.Popover;function r(e,t){this.id=null;this.x=0;this.y=0;this.type=e;this.title="";this.overlayTitle="";this.overlayImage={image:"",title:"",visible:false};this.filled=false;this.editable=true;this.expandable=false;this.dependent=false;this.inRecipientsChain=false;this.anchors=i.ICONS_CONFIG[e].anchors;this.data=t;this.$element=r.create$(e);this.$element.data("agn:node",this);this.$connectionButton=this.$element.find(".node-connect-button");this.$titleDiv=r.createTitleDiv$();this.$titleSpan=this.$titleDiv.find(".icon-title-span");this.$overlayTitle=this.$element.find(".icon-overlay-title");this.$overlayImage=this.$element.find(".icon-overlay-image img");this.nodePopover=new o(this);this.lastTitleAnchor=i.BOTTOM}r.restore=function(e){var t=e.get$().data("agn:node");if(!t){e.get$().data("agn:node",e)}return e};r.get=function(e){if(e instanceof HTMLElement){e=$(e)}if(!e.is(".node")){e=e.closest(".node")}return e.data("agn:node")};r.isDecisionNode=function(e){return e.getType()===i.NODE_TYPE_DECISION};r.isMailingNode=function(e){if(!e){return false}return i.NODE_TYPES_MAILING.includes(e.getType())};r.isBranchingDecisionNode=function(e){if(r.isDecisionNode(e)){var t=e.getData();if(t.decisionType===i.constants.decisionTypeDecision){return true}}return false};r.isDecisionBranchesOrderFromPositiveToNegative=function(e,t,i){if(t.y<=e.y&&i.y<=e.y){if(t.y<i.y){return true}else if(i.y<t.y){return false}else{return t.x<i.x}}else if(t.y>e.y&&i.y>e.y){return t.x>i.x}else{return t.y<i.y}};r.getDecisionBranches=function(e){if(e.length===2){var t=r.getPosition(e[0].source.get$());var i=r.getPosition(e[0].target.get$());var n=r.getPosition(e[1].target.get$());if(this.isDecisionBranchesOrderFromPositiveToNegative(t,i,n)){return{positive:e[0],negative:e[1]}}else{return{positive:e[1],negative:e[0]}}}return null};r.isCommented=function(e){return!!_.trim(e.getComment())};r.isSelected=function(e){return e.hasClass("ui-selected")};r.setSelected=function(e,t){return e.toggleClass("ui-selected",!!t)};r.isChainSource=function(e){return e.hasClass("chain-mode-source")};r.setChainSource=function(e,t){e.toggleClass("chain-mode-source",!!t)};r.getAnchors=function(e){var t=r.get(e);if(t){return t.getAnchors()}return i.ICONS_CONFIG[e.data("type")].anchors};r.getAnchorsInUse=function(e){var t={};e.forEach((function(e){var n=e.anchor.getOrientation();if(n[0]>0){t[i.RIGHT]=true}else if(n[0]<0){t[i.LEFT]=true}else if(n[1]>0){t[i.BOTTOM]=true}else if(n[1]<0){t[i.TOP]=true}}));return t};r.getPosition=function(e){var t=e.position();return{x:t.left,y:t.top}};r.getBox=function(e){var t=e.position();var i=e[0].getBoundingClientRect();return{minX:t.left,minY:t.top,maxX:t.left+i.width,maxY:t.top+i.height}};r.isInRegion=function(e,t){var i=r.getBox(e);return(i.minX>=t.minX&&i.minX<=t.maxX||i.maxX>=t.minX&&i.maxX<=t.maxX)&&(i.minY>=t.minY&&i.minY<=t.maxY||i.maxY>=t.minY&&i.maxY<=t.maxY)};r.getCollisionBox=function(e){var t=r.getAnchors(e);var n=e.position();var o=e[0].getBoundingClientRect();var a=(t[0][0]-i.NODE_MIN_MARGIN)*o.width;var s=(t[1][1]-i.NODE_MIN_MARGIN)*o.height;var l=(1-t[2][0]-i.NODE_MIN_MARGIN)*o.width;var u=(1-t[3][1]-i.NODE_MIN_MARGIN)*o.height;return{minX:n.left+a,minY:n.top+s,maxX:n.left+o.width-l,maxY:n.top+o.height-u}};r.detectBoxCollision=function(e,t){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)};r.create$=function(){var e=null;return function(n){if(e==null){e=t.prepare("workflow-node")}return $(e({icons:i.ICONS_CONFIG[n].icons}))}}();r.createDraggable$=function(){var e=null;return function(n){if(e==null){e=t.prepare("workflow-draggable-node")}return $(e({type:n,icons:i.ICONS_CONFIG[n].icons}))}}();r.createTitleDiv$=function(){var e=null;return function(){if(e==null){e=t.prepare("workflow-icon-title")}return $(e({}))}}();r.create=function(e){var t={iconComment:""};var i=new r(e,t);switch(e){case"scABTest":case"scBirthday":case"scDOI":i.setFilled(true);i.setExpandable(true);t.copyContent=true;t.created=false;break;case"ownWorkflow":i.setExpandable(true);t.ownWorkflowId=0;t.copyContent=true;t.created=false;break;case"start":t.startType=null;t.date=null;t.hour=0;t.minute=0;t.sendReminder=false;t.remindAdminId=0;t.remindAtOnce=false;t.scheduleReminder=false;t.remindSpecificDate=false;t.remindDate=new Date;t.remindHour=0;t.remindMinute=0;t.event=null;t.reaction=null;t.mailingId=0;t.profileField="";t.dateProfileField="";t.dateFieldOperator=1;t.dateFieldValue="";t.useRules=false;t.rules=[];t.executeOnce=true;t.comment="";t.recipients="";t.adminTimezone="";break;case"stop":t.endType=null;t.date=null;t.hour=0;t.minute=0;t.sendReminder=false;t.remindAdminId=0;t.remindAtOnce=false;t.scheduleReminder=false;t.remindSpecificDate=false;t.remindDate=new Date;t.remindHour=0;t.remindMinute=0;t.event=null;t.reaction=null;t.mailingId=0;t.profileField="";t.useRules=false;t.rules=[];t.executeOnce=true;t.comment="";t.recipients="";t.adminTimezone="";break;case"decision":t.decisionType=null;t.decisionCriteria=null;t.reaction=null;t.mailingId=0;t.linkId=0;t.profileField="";t.aoDecisionCriteria=null;t.threshold="";t.decisionDate=new Date;t.rules=[];t.includeVetoed=true;break;case"deadline":t.deadlineType=null;t.date=new Date;t.timeUnit=null;t.delayValue=0;t.hour=0;t.minute=0;t.useTime=false;break;case"parameter":t.value=0;break;case"recipient":i.setDependent(false);t.mailinglistId=0;t.targets=[];t.altgs=[];t.targetsOption=null;break;case"archive":t.campaignId=0;t.archived=false;break;case"form":t.userFormId=0;t.formType="form";break;case"mailing":t.mailingId=0;t.skipEmptyBlocks=true;t.doubleCheck=true;break;case"actionbased_mailing":case"datebased_mailing":case"mailing_mediatype_sms":case"mailing_mediatype_post":t.mailingId=0;break;case"followup_mailing":t.baseMailingId=0;t.mailingId=0;t.decisionCriterion="OPENED";break;case"import":case"export":t.importexportId=0;t.errorTolerant=false;break}return i};r.isExpandableType=function(e){switch(e){case"scABTest":case"scBirthday":case"scDOI":case"ownWorkflow":return true;default:return false}};r.deserialize=function(e){var t=$.extend({},e);var i=new r(e.type,t);i.setId(e.id);i.setCoordinates(e.x,e.y);i.setComment(e.iconComment);i.setFilled(e.filled);i.setEditable(e.editable);if(["ownWorkflow","scBirthday","scDOI","scABTest"].includes(e.type)){i.setExpandable(true)}if(r.isMailingNode(i)&&t.mailingId){$.get(AGN.url("/mailing/"+t.mailingId+"/name.action")).done((t=>i.setTitle(t?t:e.iconTitle)))}else{i.setTitle(e.iconTitle)}delete t["id"];delete t["x"];delete t["y"];delete t["type"];delete t["iconTitle"];delete t["filled"];delete t["editable"];["date","remindDate","decisionDate"].forEach((function(e){if(t[e]){var i=t[e].toString();if(i.includes("-")){var n=i.split("-");t[e]=new Date(n[0],n[1]-1,n[2])}else{t[e]=new Date(t[e])}}}));return i};r.deserializeConnections=function(e,t){var i=[];e.forEach((function(e){var n=t[e.id];if(n instanceof r){if(e.connections){e.connections.forEach((function(e){var o=t[e.targetIconId];if(o instanceof r){i.push({source:n,target:o})}}))}}}));return i};r.toMap=function(e){var t={};e.forEach((function(e){t[e.getId()]=e}));return t};r.prototype.appendTo=function(e,t,i){this.$container=e;this.$titlesContainer=t;if(i){this.$element.addClass(i)}e.append(this.$element);t.append(this.$titleDiv);this.$titleDiv.toggleClass("expandable",this.$titleSpan.height()>this.$titleDiv.height())};r.prototype.isAppended=function(){return!!this.$container};r.prototype.get$=function(){return this.$element};r.prototype.getId=function(){return this.id};r.prototype.setId=function(e){this.id=e;this.$element.prop("id",e)};r.prototype.getX=function(){return this.x};r.prototype.getY=function(){return this.y};r.prototype.getCoordinates=function(){return{x:this.x,y:this.y}};r.prototype.setCoordinates=function(e,t){this.x=e;this.y=t;this.$element.css("left",e*i.CANVAS_GRID_SIZE);this.$element.css("top",t*i.CANVAS_GRID_SIZE)};r.prototype.updateCoordinates=function(e){var t=r.getPosition(this.$element);this.x=t.x/e/i.CANVAS_GRID_SIZE;this.y=t.y/e/i.CANVAS_GRID_SIZE};r.prototype.getType=function(){return this.type};r.prototype.setType=function(e){this.type=e};r.prototype.getTitle=function(){return this.title};r.prototype.setTitle=function(e){this.title=e;if(e){this.$titleSpan.text(e);this.positionTitle(this.lastTitleAnchor);this.$titleDiv.toggleClass("expandable",this.$titleSpan.height()>this.$titleDiv.height())}this.setTitleEnabled(!!e)};r.prototype.setTitleEnabled=function(e){this.$titleDiv.toggle(!!e&&!!this.title)};r.prototype.setTitleExpanded=function(e){this.$titleDiv.toggleClass("expanded",!!e);if(this.isAppended()){if(e){this.$titleDiv.appendTo(this.$container)}else{this.$titleDiv.appendTo(this.$titlesContainer)}}};r.prototype.positionTitle=function(e){this.lastTitleAnchor=e;var t=this.x*i.CANVAS_GRID_SIZE;var n=t+i.NODE_SIZE;var r=this.y*i.CANVAS_GRID_SIZE;var o=r+i.NODE_SIZE;switch(e){case i.BOTTOM:this.$titleDiv.css({top:o,left:t+(i.NODE_SIZE-i.TITLE_WIDTH)/2,transform:"none"});break;case i.LEFT:this.$titleDiv.css({top:(r+o)/2,left:t-i.TITLE_WIDTH,transform:"translateY(-50%)"});break;case i.RIGHT:this.$titleDiv.css({top:(r+o)/2,left:n,transform:"translateY(-50%)"});break;case i.TOP:this.$titleDiv.css({top:r,left:t+(i.NODE_SIZE-i.TITLE_WIDTH)/2,transform:"translateY(-100%)"});break;default:return}};r.prototype.getOverlayTitle=function(){return this.overlayTitle};r.prototype.setOverlayTitle=function(e){this.overlayTitle=e;this.$overlayTitle.text(_.trim(e))};r.prototype.getOverlayImage=function(){return this.overlayImage};r.prototype.setOverlayImage=function(e){this.overlayImage=$.extend({image:"",title:"",visible:false},e);var t=!!_.trim(this.overlayImage.image)?i.constants.imagePath+"/"+_.trim(this.overlayImage.image):"";this.$overlayImage.prop("src",t);this.$overlayImage.prop("title",this.overlayImage.title);if(this.overlayImage.visible){this.$overlayImage.show()}else{this.$overlayImage.hide()}};r.prototype.getComment=function(){return this.comment};r.prototype.setComment=function(e){this.comment=this.data.iconComment=e;this.$element.toggleClass("icon-commented",!!_.trim(e))};r.prototype.updateCommentLabels=function(){this.$element.toggleClass("icon-commented",!!_.trim(this.comment))};r.prototype.setFootnote=function(e){if(e>0){this.$element.attr("comment-footnote",e)}else{this.$element.removeAttr("comment-footnote")}};r.prototype.isFilled=function(){return this.filled};r.prototype.setFilled=function(e){this.filled=e;this.$element.toggleClass("active",e)};r.prototype.isEditable=function(){return this.editable};r.prototype.setEditable=function(e){this.editable=e};r.prototype.isExpandable=function(){return this.expandable};r.prototype.setExpandable=function(e){this.expandable=e};r.prototype.isDependent=function(){return this.dependent};r.prototype.setDependent=function(e){this.dependent=e};r.prototype.isInRecipientsChain=function(){return this.inRecipientsChain};r.prototype.setInRecipientsChain=function(e){this.inRecipientsChain=e};r.prototype.getAnchors=function(){return this.anchors};r.prototype.setAnchors=function(e){this.anchors=e};r.prototype.getData=function(){return this.data};r.prototype.setData=function(e){this.data=e};r.prototype.setInteractionEnabled=function(e){this.$connectionButton.toggle(!!e)};r.prototype.removePopover=function(){this.nodePopover.remove()};r.prototype.setPopoverEnabled=function(e){if(!e){this.nodePopover._hidePopover(true)}this.nodePopover.setEnabled(e)};r.prototype.setPopoverShown=function(e){if(e){this.nodePopover.show()}else{this.nodePopover.hide()}};r.prototype.setHovered=function(e){this.setPopoverShown(e);this.setTitleExpanded(e)};r.prototype.remove=function(){this.nodePopover.remove();this.$element.remove();this.$titleDiv.remove();this.$container=null;this.$titlesContainer=null};r.prototype.serialize=function(){var t=$.extend({},this.data,{id:this.id,x:this.x,y:this.y,type:this.type,filled:this.filled,editable:this.editable,iconTitle:this.title});if("date"in t&&"hour"in t&&"minute"in t){t.date=e.getDateTimeValue(t.date,t.hour,t.minute)}if("remindDate"in t&&"remindHour"in t&&"remindMinute"in t){t.remindDate=e.getDateTimeValue(t.remindDate,t.remindHour,t.remindMinute)}if("decisionDate"in t){t.decisionDate=e.getDateTimeValue(t.decisionDate)}return t};function o(e){if(e instanceof r){this.node=e}else{this.node=r.get(e)}this.popover=undefined;this.timeoutId=undefined;this.isEnabled=true}o.prototype.remove=function(){if(this.popover){this.popover.hide()}n.remove(this.node.get$());this.popover=null};o.destroyAll=function(){$("[rel=popover]").each((function(e,t){r.get($(t)).removePopover()}));$(".popover").remove()};o.prototype.initPopover=function(){var e=this;e.deferred=false;e.content=null;var t=n.new(e.node.get$(),{trigger:"manual",html:true,template:i.NODE_POPOVER_TEMPLATE,content:function(){return e.getPopoverContent()}});if(e.isEnabled){t.enable()}else{t.disable()}var r=t.tip();r.on({mouseenter:function(){e._showPopover()},mouseleave:function(){e._hidePopover(true)}});return t};o.prototype.show=function(){o.destroyAll();this.popover=this.initPopover();if(this.popover.hasContent()&&this.popover.enabled){this._showPopover()}};o.prototype.hide=function(e){this._hidePopover(e)};o.prototype.getPopoverContent=function(){const e=this;var t=this.node;var i="";var n=o.getThumbnail(t);if(n&&!_.isEmpty(n.src)){i+='<img src="'+n.src+'" style="width: 100%; height: 100%;" />'}if(r.isCommented(t)){i+="<div>"+t.getComment()+"</div>"}if(i&&e.deferred===false){this.deferred=$.Deferred();var a=$("<div></div>");a.css({position:"fixed",visibility:"hidden"});a.html(i);$elements=a.children();$(document.body).append(a);this.deferred.done((function(){$elements.detach();a.remove();e.content=$elements}));var s=$elements.find("img").add($elements.filter("img")).filter((function(){return this.complete?null:this}));if(s.length>0){e.deferred.done((function(){if(e.popover){e.popover.setContent();if(t.get$().is(":hover")){e._showPopover()}}}));var l=function(){var e=true;for(var t=0;t<s.length;t++){var i=s[t];if(i){if(i.complete){$(i).off("load error");s[t]=null}else{e=false}}}return e};for(var u=0;u<s.length;u++){$(s[u]).on("load error",(function(){if(l()){e.deferred.resolve()}}))}}else{e.deferred.resolve()}}return this.content};o.getThumbnail=function(e){if(r.isMailingNode(e)&&e.getData().mailingId>0){return o.getMailingThumbnail(e.getData().mailingId)}return""};o.getMailingThumbnail=_.memoize((function(e){var t="";$.ajax({url:AGN.url("/workflow/mailing/"+e+"/thumbnail.action"),async:false,success:function(e){if(e>0){t=new Image;t.src=AGN.url("/sc?compID="+e)}}});return t}));o.prototype._stopHiding=function(){if(this.timeoutId){clearTimeout(this.timeoutId);this.timeoutId=undefined}};o.prototype._showPopover=function(){this._stopHiding();this.popover.show()};o.prototype._hidePopover=function(e){this._stopHiding();if(!this.popover){return}if(e===true){if(this.popover){this.popover.hide()}}else{var t=this;this.timeoutId=setTimeout((function(){t._hidePopover(true)}),200)}};o.prototype.setEnabled=function(e){this.isEnabled=e;if(!this.popover){return}if(e){this.popover.enable()}else{this.popover.disable()}};AGN.Lib.WM.NodePopover=o;AGN.Lib.WM.Node=r})();(function(){var e=AGN.Lib.WM.Node;function t(t){this.id=t.getId();this.node=t;this.position=e.getPosition(t.get$());this.box=e.getBox(t.get$());this.connections={incoming:[],outgoing:[]}}t.nodesToVertices=function(e){return e.map((function(e){return new t(e)}))};t.verticesToMap=function(e){var t={};e.forEach((function(e){t[e.id]=e}));return t};t.verticesFrom=function(e,i){var n=t.nodesToVertices(e);var r=t.verticesToMap(n);i.forEach((function(e){var t,i;if("sourceId"in e){t=r[e.sourceId];i=r[e.targetId]}else{t=r[e.source.getId()];i=r[e.target.getId()]}t.connections.outgoing.push(i);i.connections.incoming.push(t)}));return n};t.compareByPosition=function(e,t){var i=e.box;var n=t.box;if(i.minX==n.minX){return i.minY-n.minY}return i.minX-n.minX};t.filterUnvisited=function(e,t){return e.filter((function(e){if(t[e.id]){return false}else{t[e.id]=true;return true}}))};t.getDecisionBranches=function(t){var i=t.connections.outgoing.map((function(e){return{source:t.node,target:e.node,targetVertex:e}}));var n=e.getDecisionBranches(i);if(n){return{positive:n.positive.targetVertex,negative:n.negative.targetVertex}}return null};t.getIncomingChains=function(e){var t={};var n=[];i([],e,t,n);return n};t.getOutgoingChains=function(e){var t={};var i=[];n([],e,t,i);return i};t.prototype.getNode=function(){return this.node};t.prototype.siblings=function(){return this.connections.incoming.concat(this.connections.outgoing)};t.prototype.rightSiblingsOrdered=function(){var i=this.connections.outgoing;if(e.isBranchingDecisionNode(this.node)){var n=t.getDecisionBranches(this);if(n){return[n.positive,n.negative]}}return i.sort((function(e,t){return e.node.getY()-t.node.getY()}))};function i(e,t,n,r){if(n[t.id]){r.push(e)}else{e.push(t.node);var o=t.connections.incoming;if(o.length){n[t.id]=true;if(o.length==1){i(e,o[0],n,r)}else{o.forEach((function(t){i(e.slice(),t,n,r)}))}n[t.id]=false}else{r.push(e)}}}function n(e,t,i,r){if(i[t.id]){r.push(e)}else{e.push(t.node);var o=t.connections.outgoing;if(o.length){i[t.id]=true;if(o.length==1){n(e,o[0],i,r)}else{o.forEach((function(t){n(e.slice(),t,i,r)}))}i[t.id]=false}else{r.push(e)}}}AGN.Lib.WM.Vertex=t})();(function(){var e=AGN.Lib.WM.Vertex;function t(e){this.vertices=e;this.box=e.map((function(e){return e.box})).reduce((function(e,t){return{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}}))}t.detectGroups=function(e){var i=[];var n={};e.forEach((function(e){var r=t.detectGroup(e,n);if(r){i.push(r)}}));return i.sort(t.compareByPosition)};t.detectGroup=function(e,i){if(i[e.id]){return null}var n=[];var r=e.siblings();n.push(e);i[e.id]=true;while(r.length){r=_.flatMap(r,(function(e){if(i[e.id]){return[]}else{n.push(e);i[e.id]=true;return e.siblings()}}))}return new t(n)};t.compareByPosition=function(e,t){var i=e.box.minX+e.box.maxX-(t.box.minX+t.box.maxX);if(i==0){return e.box.minY+e.box.maxY-(t.box.minY+t.box.maxY)}return i};t.prototype.getNodes=function(){return this.vertices.map((function(e){return e.getNode()}))};t.prototype.getStartingVertices=function(){var t=this.vertices.filter((function(e){return e.connections.incoming.length==0}));if(t.length){return t.sort(e.compareByPosition)}var i=this.vertices.reduce((function(t,i){var n=t.connections.outgoing.length/t.connections.incoming.length;var r=i.connections.outgoing.length/i.connections.incoming.length;if(n==r){return e.compareByPosition(t,i)>=0?t:i}return n>r?t:i}));return[i]};AGN.Lib.WM.VertexGroup=t})();(function(){var e=AGN.Lib.WM.Definitions,i=AGN.Lib.WM.DateTimeUtils;var n={};var r=function(){};function o(e,t,i){if(t<=0){return""}if(_.isEmpty(n[e])){$.ajax({url:AGN.url(i),async:false}).done((function(t){n[e]=_.extend({},t)}))}var r=n[e][t];return!!r?r:""}r.getWebFormName=function(e){return o("form",e,"/workflow/ajax/getWebFormNames.action")};r.getTargetName=function(e){return o("target",e,"/workflow/ajax/getTargetNames.action")};r.getMailingName=function(e){return o("mailing",e,"/workflow/ajax/getMailingNames.action")};r.getArchiveName=function(e){return o("archive",e,"/workflow/ajax/getArchiveNames.action")};r.getAutoExportName=function(e){return o("autoExport",e,"/workflow/ajax/getAutoExportNames.action")};r.getAutoImportName=function(e){return o("autoImport",e,"/workflow/ajax/getAutoImportNames.action")};r.getMailinglistName=function(e){return o("mailinglist",e,"/workflow/ajax/getMailinglistNames.action")};function a(t){switch(t){case e.constants.reactionOpened:return"reaction_opened.png";case e.constants.reactionNotOpened:return"reaction_notopened.png";case e.constants.reactionClicked:return"reaction_clicked.png";case e.constants.reactionNotClicked:return"reaction_notclicked.png";case e.constants.reactionBought:return"reaction_bought.png";case e.constants.reactionNotBought:return"reaction_notbought.png";case e.constants.reactionChangeOfProfile:return"reaction_profilechange.png";case e.constants.reactionWaitingForConfirm:return"reaction_wfc.png";case e.constants.reactionOptIn:return"reaction_optin.png";case e.constants.reactionOptOut:return"reaction_optout.png";case e.constants.reactionClickedLink:return"reaction_clicked.png";case e.constants.reactionOpenedAndClicked:return"reaction_profilechange.png";case e.constants.reactionOpenedOrClicked:return"reaction_profilechange.png"}}function s(i){switch(i){case e.constants.reactionOpened:return t("workflow.reaction.opened");case e.constants.reactionNotOpened:return t("workflow.reaction.not_opened");case e.constants.reactionClicked:return t("workflow.reaction.clicked");case e.constants.reactionNotClicked:return t("workflow.reaction.not_clicked");case e.constants.reactionBought:return t("workflow.reaction.bought");case e.constants.reactionNotBought:return t("workflow.reaction.not_bought");case e.constants.reactionChangeOfProfile:return t("workflow.reaction.change_of_profile");case e.constants.reactionWaitingForConfirm:return t("workflow.reaction.waiting_for_confirm");case e.constants.reactionOptIn:return t("workflow.reaction.opt_in");case e.constants.reactionOptOut:return t("workflow.reaction.opt_out");case e.constants.reactionClickedLink:return t("workflow.reaction.clicked_on_link");case e.constants.reactionOpenedAndClicked:return t("workflow.reaction.opened_and_clicked");case e.constants.reactionOpenedOrClicked:return t("workflow.reaction.opened_or_clicked")}}function l(i,n){if(i>1){switch(n){case e.constants.deadlineTimeUnitMinute:return t("workflow.deadline.minutes");case e.constants.deadlineTimeUnitHour:return t("workflow.defaults.hours");case e.constants.deadlineTimeUnitDay:return t("workflow.defaults.days");case e.constants.deadlineTimeUnitWeek:return t("workflow.defaults.weeks");case e.constants.deadlineTimeUnitMonth:return t("workflow.defaults.months")}}else{switch(n){case e.constants.deadlineTimeUnitMinute:return t("workflow.deadline.minute");case e.constants.deadlineTimeUnitHour:return t("workflow.defaults.hour");case e.constants.deadlineTimeUnitDay:return t("workflow.defaults.day");case e.constants.deadlineTimeUnitWeek:return t("workflow.defaults.week");case e.constants.deadlineTimeUnitMonth:return t("workflow.defaults.month")}}}function u(i){switch(i){case e.constants.decisionAOCriteriaClickRate:return t("workflow.defaults.ckickrate");case e.constants.decisionAOCriteriaOpenrate:return t("workflow.opening_rate");default:return t("workflow.statistic.revenue")}}function c(e){switch(Number(e)){case 1:return")";case 0:return""}}function d(e){switch(Number(e)){case 1:return"(";case 0:return""}}function f(t,i){if(t&&e.GENDER_PROFILE_FIELD===t.toLowerCase()){return e.constants.genderOptions[!i?0:i]}else{return _.isEmpty(i)?"":i}}function p(i,n){var r="";n.forEach((function(t){r+=(_.isEmpty(r)?"":" "+t.chainOperator+" ")+d(t.parenthesisOpened)+i+" "+e.constants.operatorsMap[t.primaryOperator]+" "+f(i,t.primaryValue)+c(t.parenthesisClosed)}));return t("workflow.start.rule")+(!!r?": "+r:"")}function h(i,n){var o=[];for(var a=0;a<e.TITLE_MAX_TARGETS&&a<i.length;a++){o.push(r.getTargetName(i[a]))}var s=", ";if(e.constants.targetOptions[n]){s=" "+e.constants.targetOptions[n]+" "}if(i.length>e.TITLE_MAX_TARGETS){return o.join(s)+" "+t("defaults.andMore",i.length-e.TITLE_MAX_TARGETS)+"..."}else{return o.join(s)}}function g(t,n,r){if(t){if(arguments.length===1){return i.getDateStr(t,e.constants.localeDateTimePattern)}else{return i.getDateTimeStr(t,n,r,e.constants.localeDateTimePattern)}}else{return""}}function m(e,t){return e+" "+l(e,t)}function v(e,i){return t("workflow.reaction.title")+": "+s(e)+",\n"+t("workflow.defaults.mailing")+": "+r.getMailingName(i)}function y(e,i,n){var r=u(e)+(_.isEmpty(i)?"":": "+i)+"\n";if(!!n){r+=t("workflow.defaults.date")+": "+g(n)}return r}function b(t,i,n){return t+" "+e.constants.operatorsMap[i]+(!n?"":" "+n)}function w(e,t,i){if(e){if(t){return t+" ("+s(i)+") "+e}else{return e}}}function C(e,i,n,o){var a="";if(o){a+=t("workflow.mailinglist.short")+": "+r.getMailinglistName(e)}if(!_.isEmpty(i)){if(!_.isEmpty(a)){a+="\n"}a+=t("workflow.target.short")+": "+h(i,n)}return a}r.positionTitle=function(t,i){if(i[e.BOTTOM]){if(i[e.LEFT]){if(i[e.RIGHT]){if(i[e.TOP]){t.positionTitle(e.BOTTOM)}else{t.positionTitle(e.TOP)}}else{t.positionTitle(e.RIGHT)}}else{t.positionTitle(e.LEFT)}}else{t.positionTitle(e.BOTTOM)}};var A=function(i){var n=i.startType;var r="";if(e.constants.startTypeDate===n){r=t("workflow.start.start_date")+":\n"+g(i.date,i.hour,i.minute)}else if(e.constants.startTypeEvent===n){var o=i.event;if(e.constants.startEventReaction===o){r=t("workflow.start.start_event")+":\n"+s(i.reaction)+": ("+g(i.date,i.hour,i.minute)+")"}else if(e.constants.startEventDate===o){r=t("workflow.start.start_event")+":\n"+b(i.dateProfileField,i.dateFieldOperator,i.dateFieldValue)+":\n"+"("+g(i.date,i.hour,i.minute)+")"}}return r};var E=function(i,n,r){var o=i.endType;var a="";if(e.constants.endTypeDate===o){a=t("workflow.stop.end_date")+":\n"+g(i.date,i.hour,i.minute)}else if(e.constants.endTypeAutomatic===o){a=r?t("workflow.stop.automatic_end"):t("workflow.stop.open_end")}return a};var x=function(i){var n=i.deadlineType;var r="";if(e.constants.deadlineTypeFixedDeadline===n){r=t("workflow.deadline.title")+":\n"+g(i.date,i.hour,i.minute)}else if(e.constants.deadlineTypeDelay===n){r=t("workflow.defaults.delay")+":\n"+m(i.delayValue,i.timeUnit)}return r};var T=function(i){var n=i.decisionType;var r="";if(e.constants.decisionTypeAutoOptimization===n){r=t("workflow.mailing.autooptimization")+":\n"+y(i.aoDecisionCriteria,i.threshold,i.decisionDate)}else{if(e.constants.decisionReaction===i.decisionCriteria){r=t("workflow.decision")+",\n"+v(i.reaction,i.mailingId)}else{r=t("workflow.decision")+",\n"+p(i.profileField,i.rules)}}return r};var S=function(e,t){var i,n;var o=t.getTitle();i=r.getMailingName(e.baseMailingId)||"?";n=r.getMailingName(e.mailingId)||"?";var a=w(n,i,e.decisionCriterion);if(a){o=a}return o};var D={title:function(e){return r.getMailingName(e.mailingId)}};var k={"*":{overlayImage:{},overlayTitle:"",title:""},start:{title:A,isImageAvailable:function(t){return e.constants.startTypeEvent===t.startType&&e.constants.startEventReaction===t.event},overlayImage:function(e){if(this.isImageAvailable(e)){return{visible:true,image:a(e.reaction),title:s(e.reaction)}}else{return{}}}},stop:{title:E},deadline:{title:x},parameter:{title:"",overlayTitle:function(e){return e.value}},decision:{title:T,branches:{title:function(){return{positive:t("workflow.defaults.yes"),negative:t("workflow.defaults.no")}}}},recipient:{title:function(e,t){return C(e.mailinglistId,e.targets,e.targetsOption,!t.isInRecipientsChain())}},archive:{title:function(e){return r.getArchiveName(e.campaignId)}},form:{title:function(e){return r.getWebFormName(e.userFormId)}},mailing:D,mailing_mediatype_sms:D,mailing_mediatype_post:D,actionbased_mailing:D,datebased_mailing:D,followup_mailing:{title:S},import:{title:function(e){return r.getAutoImportName(e.importexportId)}},export:{title:function(e){return r.getAutoExportName(e.importexportId)}}};function O(t){var i=t.getType();if(e.NODE_TYPES_MAILING.includes(i)||e.NODE_TYPES_IMPORT_EXPORT.includes(i)){return!!t.getTitle()}return false}r.getDecisionBranchesLabels=function(){return k.decision.branches.title()};r.updateTitle=function(e,t,i){if(!i&&O(e)){return}if(!e.isFilled()){e.setTitle("");e.setOverlayImage({});e.setOverlayTitle("");return}e.setTitle(P(e,t));e.setOverlayImage(R(e));e.setOverlayTitle(N(e))};function R(e){return I(e.getType(),"overlayImage",e.getData())}function N(e){return I(e.getType(),"overlayTitle",e.getData())}function P(e,t){return I(e.getType(),"title",e.getData(),e,t)}function I(e,t){var i=k[e];if(!i.hasOwnProperty(t)){i=k["*"]}var n=i[t];var r=Array.prototype.slice.call(arguments,2);return _.isFunction(n)?n.apply(i,r):n}AGN.Lib.WM.NodeTitleHelper=r})();(function(){var e=AGN.Lib.WM.Node,t=AGN.Lib.WM.Definitions;var i=function(e,t,i){this.minimap=e;this.$element=e.$container.find(t);this.scale=1};i.prototype.setScale=function(e){this.scale=e};i.prototype.getScale=function(){return this.scale};i.prototype.getPosition=function(){var e=this.$element.position();return{x:e.left,y:e.top}};i.prototype.update=function(){this.reset();var e=this.minimap.getPureIconsBox();var i=t.MINIMAP_PADDING*2;var n=e.maxX-e.minX+i;var r=e.maxY-e.minY+i;var o=(this.minimap.getWidth()-i)/n;var a=(this.minimap.getHeight()-i)/r;this.setScale(Math.min(o,a));var s=-e.minX*this.scale+t.MINIMAP_PADDING;var l=-e.minY*this.scale+t.MINIMAP_PADDING;this.$element.css({transform:"scale("+this.scale+")",width:n,height:r,left:s,top:l});this.renderIcons()};i.prototype.renderIcons=function(){var e=this;this.minimap.getPureIconsPosition().forEach((function(i){var n=$('<div class="miniview-element"></div>').css({width:t.NODE_SIZE,height:t.NODE_SIZE,left:i.x,top:i.y});e.$element.append(n)}))};i.prototype.reset=function(){this.scale=1;this.$element.css({transform:"scale(1)",width:0,height:0,left:0,top:0});this.$element.html("")};var n=function(e,t,i){this.minimap=e;this.$element=e.get$().find(t);this.onDrag=_.isFunction(i.onPannerDrag)?i.onPannerDrag:_.noop;this.containment=$.extend({mode:"",padding:0},i.containment);this.containmentBox=null;var n=this;var r=0;var o=0;this.$element.draggable({start:function(e,t){r=t.position.left;o=t.position.top;if(!n.containmentBox){n.containmentBox=n.getContainmentBox(n.containment)}},drag:function(e,t){var i=n.getScale();if(n.containmentBox){var a=t.position.left;var s=t.position.top;if(a<n.containmentBox.minX){t.position.left=n.containmentBox.minX}else if(a>n.containmentBox.maxX){t.position.left=n.containmentBox.maxX}if(s<n.containmentBox.minY){t.position.top=n.containmentBox.minY}else if(s>n.containmentBox.maxY){t.position.top=n.containmentBox.maxY}}var l=(r-t.position.left)/i;var u=(o-t.position.top)/i;r=t.position.left;o=t.position.top;n.onDrag.call(n,l,u)}})};n.prototype.getContainmentBox=function(e){if(!e.mode||e.mode=="none"){return undefined}var t=this.minimap.get$();var i=this.getScaledWidth();var n=this.getScaledHeight();if(e.mode=="panner-box"){return{minX:-i+e.padding,maxX:t.width()-e.padding,minY:-n+e.padding,maxY:t.height()-e.padding}}else if(e.mode=="minimap-box"){return{minX:e.padding,maxX:Math.max(0,t.width()-i)-e.padding,minY:e.padding,maxY:Math.max(0,t.height()-n)-e.padding}}return undefined};n.prototype.getScale=function(){return this.minimap.getMiniCanvasScale()/this.minimap.getCanvasZoom()};n.prototype.getScaledWidth=function(){return this.getWidth()*this.getScale()};n.prototype.getScaledHeight=function(){return this.getHeight()*this.getScale()};n.prototype.getWidth=function(){return this.$element.width()};n.prototype.getHeight=function(){return this.$element.height()};n.prototype.update=function(){var e=this.minimap.getCanvasParent$();var i=e.width();var n=e.height();var r=i+t.MINIMAP_PADDING*2;var o=n+t.MINIMAP_PADDING*2;this.$element.css({width:r,height:o});this.containmentBox=this.getContainmentBox(this.containment);this.updatePosition()};n.prototype.updatePosition=function(){var e=this.minimap.getCanvasPosition();var t=this.minimap.getMiniCanvasPosition();var i=this.getScale();var n=-e.x*i+t.x;var r=-e.y*i+t.y;this.$element.css({transform:"scale("+i+")",left:n,top:r})};var r=function(e,t){this.$container=$("#minimap");this.canvas=e;this.$collapseBtn=this.$container.find(".minimap-collapse");this.miniCanvas=new i(this,".minimap-canvas",t);this.miniPanner=new n(this,".minimap-panner",t);this.enabled=false;var r=this;this.$container.on("click",".minimap-panner, .minimap-collapse",(function(e){e.preventFocusOnArea=true}));this.$collapseBtn.on("click",(function(e){r.collapseMinimap()}));this.$container.on("click",(function(e){if(e.preventFocusOnArea){return}var t=r.$container[0].getBoundingClientRect();var i=e.clientX-t.left;var n=e.clientY-t.top;r.focusOnClickedArea(i,n)}))};r.prototype.get$=function(){return this.$container};r.prototype.getWidth=function(){return this.get$().width()};r.prototype.getHeight=function(){return this.get$().height()};r.prototype.moveCanvasTo=function(e,t){this.canvas.moveTo(e,t)};r.prototype.getCanvas$=function(){return this.canvas.get$()};r.prototype.getCanvasParent$=function(){return this.canvas.get$().parent()};r.prototype.focusOnClickedArea=function(e,t){var i=this.getMiniCanvasPosition();var n=this.getMiniPannerScale();var r=(e-i.x)/n;var o=(t-i.y)/n;var a=this.getMiniPannerCenter();var s=this.getCanvasZoom();var l=(r-a.x)*s;var u=(o-a.y)*s;this.moveCanvasTo(-l,-u)};r.prototype.collapseMinimap=function(){this.$container.toggleClass("minimap-collapsed");this.updateMinimap()};r.prototype.getIcons=function(){return this.canvas.getIcons()};r.prototype.getPureIconsPosition=function(){var t=this.getCanvasZoom();return this.getIcons().map((function(i){var n=e.getPosition(i);return{x:n.x/t,y:n.y/t}}))};r.prototype.getPureIconsBox=function(){return this.canvas.getPureIconsBox()};r.prototype.getMiniCanvasScale=function(){return this.miniCanvas.getScale()};r.prototype.getMiniCanvasPosition=function(){return this.miniCanvas.getPosition()};r.prototype.getMiniPannerScale=function(){return this.miniCanvas.getScale()};r.prototype.getMiniPannerCenter=function(){return{x:this.miniPanner.getWidth()/2,y:this.miniPanner.getHeight()/2}};r.prototype.getCanvasZoom=function(){return this.canvas.getZoom()};r.prototype.getCanvasPosition=function(){return this.canvas.getPosition()};r.prototype.updateMinimap=function(){if(this.enabled){this.miniCanvas.update();this.miniPanner.update()}};r.prototype.onPanZoom=function(){if(this.enabled){this.miniPanner.updatePosition()}};r.prototype.setEnabled=function(e){this.enabled=e;if(e){this.updateMinimap();this.get$().show()}else{this.get$().hide()}};AGN.Lib.WM.Minimap=r})();(function(){var e=AGN.Lib.WM.Definitions,t=AGN.Lib.WM.Node,i=AGN.Lib.WM.Minimap;var n=function(t){var n=this;this.$canvas=t;this.mouseWheelZoomEnabled=false;this.panningEnabled=false;this.zoomEventHandler=null;this.moveEventHandler=null;this.ignoreNextZoomEvent=false;this.minimap=new i(this,{containment:{mode:"panner-box",padding:5},onPannerDrag:function(e,t){if(e||t){var i=n.getPosition();n.moveTo(i.x+e,i.y+t)}}});this.panzoom=panzoom(t[0],{minZoom:e.MIN_ZOOM,maxZoom:e.MAX_ZOOM,initialZoom:e.DEFAULT_ZOOM,disableKeyboardInteraction:true,smoothScroll:false,onDoubleClick:function(){return false},beforeWheel:function(){return!n.mouseWheelZoomEnabled},beforeMouseDown:function(){return!n.panningEnabled}});this.panzoom.on("zoom",(function(){if(n.zoomEventHandler){if(n.ignoreNextZoomEvent){n.ignoreNextZoomEvent=false}else{n.zoomEventHandler.call(null,n.getZoom());n.minimap.onPanZoom()}}}));this.panzoom.on("pan",(function(){n.minimap.onPanZoom();if(n.moveEventHandler){n.moveEventHandler.call(null,n.getPosition())}}))};n.prototype.get$=function(){return this.$canvas};n.prototype.setMinimapEnabled=function(e){this.minimap.setEnabled(e)};n.prototype.updateMinimap=function(){this.minimap.updateMinimap()};n.prototype.setPanningEnabled=function(e){this.panningEnabled=!!e};n.prototype.setMouseWheelZoomEnabled=function(e){this.mouseWheelZoomEnabled=e};n.prototype.getZoom=function(){var e=this.panzoom.getTransform();return e.scale};n.prototype.getPosition=function(){var e=this.panzoom.getTransform();return{x:e.x,y:e.y}};n.prototype.getVisibleArea=function(){var e=this.$canvas.parent();var t=e.width();var i=e.height();var n=this.panzoom.getTransform();return{minX:-n.x/n.scale,minY:-n.y/n.scale,maxX:(t-n.x)/n.scale,maxY:(i-n.y)/n.scale}};n.prototype.moveTo=function(e,t){this.panzoom.moveTo(e,t)};n.prototype.setZoom=function(e){var t=this.panzoom.getTransform();this.ignoreNextZoomEvent=true;this.panzoom.zoomAbs(t.x,t.y,e);this.minimap.onPanZoom()};n.prototype.setOnZoom=function(e){this.zoomEventHandler=e};n.prototype.setOnMove=function(e){this.moveEventHandler=e};n.prototype.getCanvasParent$=function(){return this.get$().parent()};n.prototype.getIcons=function(){var e=[];this.get$().children(".node").each((function(t,i){e.push($(i))}));return e};n.prototype.getPureIconsBox=function(){var i=this.getIcons();var n=this.getZoom();if(i.length){var r=i.map((function(e){return t.getBox(e)})).reduce((function(e,t,i){return{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}}));return{minX:r.minX/n-e.CANVAS_GRID_SIZE,minY:r.minY/n-e.CANVAS_GRID_SIZE,maxX:r.maxX/n+e.CANVAS_GRID_SIZE,maxY:r.maxY/n+e.CANVAS_GRID_SIZE}}else{var o=this.getCanvasParent$();return{minX:-e.CANVAS_GRID_SIZE,minY:-e.CANVAS_GRID_SIZE,maxX:o.width()/n+e.CANVAS_GRID_SIZE,maxY:o.height()/n+e.CANVAS_GRID_SIZE}}};n.prototype.fitPdfPage=function(t,i){var n=this.getPureIconsBox();var r=n.maxX-n.minX+e.NODE_MIN_MARGIN;var o=n.maxY-n.minY+e.NODE_MIN_MARGIN;if(!e.PAGE_DIMENSIONS[t]){return}var a=e.PAGE_DIMENSIONS[t];var s=i=="landscape";var l=s?a.height:a.width;var u=s?a.width:a.height;var c=0;var d=0;var f=1;if(r>l||o>u){if(r/o<l/u){f=u/o}else{f=l/r}}if(n.minX<0){c=-n.minX*f}if(n.minY<0){d=-n.minY*f}var p="matrix("+f+", 0, 0, "+f+", "+c+", "+d+")";var h="left top 0";this.getCanvasParent$().css({transform:p,"-webkit-transform":p,"transform-origin":h,"-webkit-transform-origin":h,"backface-visibility":"hidden","-webkit-backface-visibility":"hidden",overflow:"visible"})};AGN.Lib.WM.Canvas=n})();(function(){var e=AGN.Lib.WM.Definitions,i=AGN.Lib.Confirm;var n={Activation:r,Deactivation:o,confirmSaveBeforePdfGenerating:u,confirmTestingStartStop:c,confirmMailingDataTransfer:a,confirmOwnWorkflowExpanding:s,createAutoOpt:l,confirmCopy:d};function r(e,i,n){var r=$("#activating-campaign-dialog");if(!n){$("#activating-campaign-mailings").html(i)}r.css("visibility","visible");r.show();var o=$("#activating-campaign-activate-button");o.off("click");o.on("click",(function(){e();r.dialog("close");return false}));r.dialog({open:function(){var e=r.parent().find(".ui-dialog-title");e.empty();e.append('<span class="dialog-title-image">'+t(n?"workflow.activating.unpauseTitle":"workflow.activating.title")+"</span>");e.find(".dialog-title-image").css("padding-left","0px")},modal:true,resizable:false,width:650,minHeight:0,close:function(){return false}})}function o(e){var i=$("#inactivating-campaign-dialog");i.css("visibility","visible");i.show();var n=$("#inactivating-campaign-inactivate-button");n.off("click");n.on("click",(function(){e();i.dialog("close");return false}));i.dialog({open:function(){var e=i.parent().find(".ui-dialog-title");e.empty();e.append('<span class="dialog-title-image">'+t("workflow.inactivating.title")+"</span>");e.find(".dialog-title-image").css("padding-left","0px")},modal:true,resizable:false,width:650,minHeight:0,close:function(){return false}})}function a(t){return i.createFromTemplate({Def:e,paramsToAsk:t},"mailing-data-transfer-modal")}function s(){return i.createFromTemplate({},"own-workflow-expanding-modal")}function l(){return i.createFromTemplate({},"create-auto-opt-modal")}function u(e,i){var n=$("#workflow-save-before-pdf-dialog");var r=$("#save-before-pdf-btn-cancel");r.off("click");r.on("click",(function(){n.dialog("close");return false}));if(!_.isFunction(e)){e=_.noop}var o=$("#save-before-pdf-btn-save");o.off("click");o.on("click",(function(){e();n.dialog("close");return false}));$("#workflow-save-before-pdf-dialog .dialog-message").html(i);n.dialog({title:'<span class="dialog-fat-title">'+t("workflow.pdf.save_campaign")+"</span>",dialogClass:"no-close",width:650,modal:true,resizable:false,close:function(){return false}})}function c(t){return i.createFromTemplate({startTesting:t,shortname:e.shortname},"testing-modal")}function d(e){return i.createFromTemplate({hasContent:e===true},"workflow-copy-modal")}AGN.Lib.WM.Dialogs=n})();(function(){var e=AGN.Lib.WM.Definitions,t=AGN.Lib.WM.Node;var i={};i.loadSample=function(t,i,r){if([e.NODE_TYPE_SC_ABTEST,e.NODE_TYPE_SC_BIRTHDAY,e.NODE_TYPE_SC_DOI].includes(t)){$.ajax({url:AGN.url("/workflow/getSampleWorkflowContent.action"),async:false,data:{type:t,gridEnabled:i},success:n(r)})}else{console.error("Unknown sample type: "+t)}};i.loadAutoOptSample=function(e,t,i){$.get(AGN.url("/workflow/autoOptWorkflowSample.action"),{mailingsCount:e,gridEnabled:t}).done(n(i))};i.loadOwnWorkflow=function(e,t,i){$.ajax({url:AGN.url("/workflow/getWorkflowContent.action"),async:false,data:{workflowId:e,isWithContent:t},success:n(i)})};i.removeStartStop=function(t,i,n,r){if(n||r){var o=[];var a=t.filter((function(t){var i=t.getType();if(n&&i===e.NODE_TYPE_START||r&&i===e.NODE_TYPE_STOP){o.push(t);return false}else{return true}}));if(a.length<t.length){Array.prototype.splice.apply(t,[0,t.length].concat(a));var s=i.filter((function(e){return!(o.includes(e.source)||o.includes(e.target))}));if(s.length<i.length){Array.prototype.splice.apply(i,[0,i.length].concat(s))}}}};i.adjustPositions=function(e,t,i,n){var o=0,a=0;if(n){var s=r(e);o=s.getX();a=s.getY()}else{var l=0,u=0,c=0,d=0;var f=true;e.forEach((function(e){if(f){l=u=e.getX();c=d=e.getY();f=false}else{l=Math.min(l,e.getX());u=Math.max(u,e.getX());c=Math.min(c,e.getY());d=Math.max(d,e.getY())}}));o=Math.round((l+u)/2);a=Math.round((c+d)/2)}e.forEach((function(e){e.setCoordinates(t+e.getX()-o,i+e.getY()-a)}))};function n(e){return function(i){var n=i.map(t.deserialize);var r=t.deserializeConnections(i,t.toMap(n));e.call(null,n,r)}}function r(t){var i=t.filter((function(t){return e.NODE_TYPE_START==t.getType()}));if(i.length==0){i=t}if(i.length>1){return i.reduce((function(e,t){if(e.getX()==t.getX()){return e.getY()<t.getY()?e:t}else{return e.getX()<t.getX()?e:t}}))}else{return i[0]}}AGN.Lib.WM.Snippets=i})();(function(){var e=AGN.Lib.WM.Definitions,t=AGN.Lib.WM.Node;var i=".js-draggable-button";function n(e,i){var n=t.getCollisionBox(i.helper);return e.some((function(e){return t.detectBoxCollision(n,e)}))}function r(r){this.enabled=!!r.enabled;this.$buttons=$(i);var o=this;this.$buttons.each((function(){var i=$(this);var a=[];i.draggable({revert:true,revertDuration:0,zIndex:e.Z_INDEX_DRAGGABLE_BUTTON,disabled:!o.enabled,cursorAt:function(){var e=this.helper[0].getBoundingClientRect();return[e.width/2-1,e.height/2]},appendTo:"#canvas",helper:function(){return t.createDraggable$(i.data("type"))},start:function(){a=r.getOccupiesAreas.call(o);r.onStart.call(o)},stop:function(){r.onStop.call(o)},drag:function(t,i){var s=r.getZoom.call(o);i.position.left=Math.round(i.position.left/s/e.CANVAS_GRID_SIZE)*e.CANVAS_GRID_SIZE;i.position.top=Math.round(i.position.top/s/e.CANVAS_GRID_SIZE)*e.CANVAS_GRID_SIZE;i.helper.toggleClass("js-collision-detected",n(a,i,s))}}).on("dblclick",(function(){if(o.enabled){r.onDrop.call(o,i.data("type"))}}))}));$("#viewPort").droppable({accept:i,tolerance:"fit",drop:function(t,i){if(i.helper.hasClass("js-collision-detected")){return}var n=r.getZoom.call(o);var a=$("#canvas").offset();var s=Math.round((i.offset.left-a.left)/n);var l=Math.round((i.offset.top-a.top)/n);r.onDrop.call(o,i.helper.data("type"),{x:Math.round(s/e.CANVAS_GRID_SIZE),y:Math.round(l/e.CANVAS_GRID_SIZE)})}})}r.prototype.setEnabled=function(e){this.enabled=!!e;this.$buttons.draggable("option","disabled",!e)};AGN.Lib.WM.DraggableButtons=r})();(function(){var e=AGN.Lib.WM.Definitions,t=AGN.Lib.WM.Vertex,i=AGN.Lib.WM.VertexGroup;function n(e,t){this.layers=e;this.height=t}n.fromVertexGroup=function(e){var i=[];var r={};var o=t.filterUnvisited(e.getStartingVertices(),r);var a=0;while(o.length){a=Math.max(a,o.length);i.push(o);o=_.flatMap(o,(function(e){return t.filterUnvisited(e.rightSiblingsOrdered(),r)}))}return new n(i,a)};n.prototype.align=function(t,i){var n=null;this.layers.forEach((function(r){var o=Math.max(Math.round(e.AUTO_ALIGN_STEP_Y*(i-r.length)/2),1);if(n){var a=Math.abs(n.length-r.length);if(a>1){t+=Math.round(e.AUTO_ALIGN_EXTRA_STEP_X*a)}}r.forEach((function(i){i.node.setCoordinates(t,o);o+=e.AUTO_ALIGN_STEP_Y}));t+=e.AUTO_ALIGN_STEP_X;n=r}));return t};function r(t){var r=i.detectGroups(t).map((function(e){return n.fromVertexGroup(e)}));var o=0;r.forEach((function(e){o=Math.max(o,e.height)}));var a=1;r.forEach((function(t){a=t.align(a,o);a+=e.AUTO_ALIGN_STEP_BETWEEN_GROUPS}))}AGN.Lib.WM.AutoAlignment={align:r}})();(function(){var e=AGN.Lib.WM.Definitions,t=AGN.Lib.WM.Node;function i(e){this.maxLength=e;this._undoStack=[];this._transactionStack=[];this._transaction=false}i.prototype.add=function(e){while(this._undoStack.length>=this.maxLength){this._undoStack.shift()}this._undoStack.push(e)};i.prototype.pop=function(){return this._undoStack.pop()};i.prototype.addOperation=function(e){this._transactionStack.push(e)};i.prototype.isEmpty=function(){return _.isEmpty(this._undoStack)};i.prototype.startTransaction=function(){this._transaction=true};i.prototype.endTransaction=function(){this.flush();this._transaction=false};i.prototype.flush=function(){if(!_.isEmpty(this._transactionStack)){this.add(this._transactionStack)}this._transactionStack=[]};i.prototype.isTransactionStarted=function(){return this._transaction===true};function n(t,n){this.editor=t;this.undoOperations={nodeAdded:this.undoAddNode,nodeDeleted:this.undoDeleteNode,nodeMoved:this.undoMoveNode,nodeDataUpdated:this.undoSaveNodeData,connectionCreated:this.undoCreateConnection,connectionDeleted:this.undoDeleteConnection};this.manualStart=false;this.undoStack=new i(e.MAX_UNDO_STEP);this.onChange=_.isFunction(n.onChange)?n.onChange:_.noop}n.prototype.undoAddNode=function(e){this.editor.deleteNode(e)};n.prototype.undoDeleteNode=function(e){if(e instanceof t){this.editor.add(t.restore(e))}else{this.editor.add(t.get(e))}};n.prototype.undoCreateConnection=function(e){this.editor.deleteConnectionBetween(e.source,e.target)};n.prototype.undoDeleteConnection=function(e){this.editor.connect(t.get(e.source),t.get(e.target))};n.prototype.undoMoveNode=function(e){var t=this.editor.getZoom();var i=this;e.forEach((function(e){e.node.setTitleEnabled(false)}));this.editor.batch((function(){e.forEach((function(e){var n=e.coordinates;var r=e.node;if(i.editor.getCurrentDragMode()!==e.dragMode){i.editor.convertCoordinates(n)}r.setCoordinates(n.x,n.y);r.updateCoordinates(t)}));i.editor.updateOverlays();i.editor.positionTitles();i.editor.updateMinimap()}));e.forEach((function(e){e.node.setTitleEnabled(true)}))};n.prototype.undoSaveNodeData=function(e,i){i=i instanceof t?i:t.get(i);e=e instanceof t?e:t.get(e);e.setTitle(i.getTitle());e.setOverlayTitle(i.getOverlayTitle());e.setOverlayImage(i.getOverlayImage());e.setComment(i.getComment());e.setFilled(i.isFilled());e.setDependent(i.isDependent());e.setInRecipientsChain(i.isInRecipientsChain());e.setData(i.getData());this.editor.positionTitles()};n.prototype.canUndo=function(){return!this.undoStack.isEmpty()};n.prototype.startTransaction=function(){this.manualStart=true;this.undoStack.startTransaction()};n.prototype.endTransaction=function(){this.undoStack.endTransaction();this.onChange();this.manualStart=false};n.prototype.transaction=function(e){if(_.isFunction(e)){if(!this.undoStack.isTransactionStarted()){this.manualStart=false;this.undoStack.startTransaction()}e.call();if(!this.manualStart){this.undoStack.endTransaction()}this.onChange()}};n.prototype.operation=function(e){if(this.undoStack.isTransactionStarted()){var t=[].slice.call(arguments);t.shift();this.undoStack.addOperation({operation:e,args:t})}};n.prototype.undo=function(){if(this.canUndo()){var e=this.undoStack.pop();var t=function(e,t){var i=e.operation;var n=t.operation;var r=["nodeAdded","nodeDeleted","nodeDataUpdated"];var o=["connectionCreated","connectionDeleted"];if(o.includes(i)&&r.includes(n)){return 1}if(r.includes(i)&&o.includes(n)){return-1}return 0};var i=this;this.editor.batch((function(){e.sort(t).forEach((function(e){var t=i.undoOperations[e.operation];if(t){t.apply(i,e.args)}}))}));this.onChange()}};AGN.Lib.WM.UndoManager=n})();(function(){var e=AGN.Lib.WM.Definitions,t=AGN.Lib.Select;var i=function(){var i={};this.editors=[];this.curEditor;this.curEditingNode;this.getCurrentNode=function(){return this.curEditingNode};this.getCurrentNodeId=function(){return this.curEditingNode.getId()};this.getCurrentNodeAnchorsInUse=function(){if(i.getNodeAnchorsInUse){return i.getNodeAnchorsInUse(this.curEditingNode)}return{}};this.getCurrentEditor=function(){return this.curEditor};this.assignOptions=function(e){$.extend(i,e)};this.registerEditor=function(e,t){return this.editors[e]=t};this.isPausedWorkflow=function(){return $("#workflow-status").val()===e.constants.statusPaused};this._notAllowedToChangeDuringPause=function(t){return this.isPausedWorkflow()&&!_.union(e.NODE_TYPES_MAILING,[e.NODE_TYPE_STOP]).includes(t.getType())};this.showEditDialog=function(t,i){var r=this;var o=t.getType();this.curEditingNode=t;this.curEditor=this.editors[o];this.curEditor.fillEditor(t);this.getEditorPanel(o).dialog({open:function(a){var s=$(this);var l=s.parent().find(".ui-dialog-title");l.empty();l.append($('<span class="dialog-title-image">'+r.curEditor.getTitle()+"</span>"));l.find(".dialog-title-image").attr("data-type",o);if(o==e.NODE_TYPE_RECIPIENT){s.parent().find(".recipient-editor-select").prop("disabled",t.isDependent()||t.isInRecipientsChain())}$(a.target).find(".js-datepicker").each((function(e,t){var i=$(t).pickadate("picker");i.set("select",i.get("select"))}));if(i||r._notAllowedToChangeDuringPause(r.curEditingNode)){n($(a.target))}},close:function(){if(r.curEditor.closeEditor){r.curEditor.closeEditor()}},width:650,height:"auto",minHeight:"auto",modal:true,resizable:false})};this.showIconCommentDialog=function(e){var t=this;this.curEditingNode=e;this.curEditor=this.editors["icon-comment"];this.curEditor.fillEditor(e);this.getEditorPanel("icon-comment").dialog({open:function(){t.getEditorPanel("icon-comment").parent().find(".ui-dialog-titlebar").hide()},width:300,height:"auto",minHeight:"auto",modal:true,resizable:false,fluid:true,position:{my:"left top",at:"left bottom",of:e.get$()}})};this.saveIconComment=function(e){var t=this;i.getUndoManager().transaction((function(){var n=t.curEditingNode;i.getUndoManager().operation("nodeDataUpdated",n,_.cloneDeep(n));n.setComment(e);i.onChange(n)}))};this.saveCurrentEditorWithUndo=function(e,t){var n=this;_.defer((function(){i.getUndoManager().startTransaction();n.saveCurrentEditor(e,t,(function(){i.getUndoManager().endTransaction()}))}))};this.saveCurrentEditor=function(e,t,n){n=_.isFunction(n)?n:_.noop;var r=this;var o=this.curEditingNode;i.getUndoManager().operation("nodeDataUpdated",o,_.cloneDeep(o),r.curEditor);var a=r.curEditor.saveEditor();if(!e){r.cancelEditor()}if(r.isNodeIsMailing(o)){var s=a.mailingId;if(t){t.checkDifferentMailingLists(s,(function(i){r.mailingSpecificSave(e,i,a,t);n()}),(function(i){r.curEditor.storedMailingContent=i;r.curEditor.storedMailingId=s;r.curEditor.storedLeaveOpen=e;r.curEditor.storedEditorData=a;t.initOneMailinglistWarningDialog(t);n()}))}}else{$.extend(o.getData(),a);if(!o.isFilled()){o.setFilled(true)}if(o.isFilled()&&_.isFunction(r.curEditor.isSetFilledAllowed)){if(!r.curEditor.isSetFilledAllowed()){o.setFilled(false)}}if(i.supplement){i.supplement(o)}if(i.onChange){i.onChange(o)}n()}};this.resave=function(e){var t=this.curEditingNode;var i=this.curEditor;try{this.curEditingNode=e;this.curEditor=this.editors[e.getType()];this.curEditor.fillEditor(e);this.saveCurrentEditor()}finally{this.curEditingNode=t;this.curEditor=i}};this.modify=function(e,t){i.getUndoManager().operation("nodeDataUpdated",e,_.cloneDeep(e));t(e);if(i.onChange){i.onChange(e)}};this.isNodeIsMailing=function(t){return e.NODE_TYPES_MAILING.includes(t.getType())};this.mailingSpecificSave=function(e,t,n,r){var o=this;var a=this.curEditingNode;var s=a.getData();$.extend(s,n);if(a.isFilled()&&_.isFunction(o.curEditor.isSetFilledAllowed)){if(!o.curEditor.isSetFilledAllowed()){a.setFilled(false)}}if(i.supplement){i.supplement(a,r,t)}if(i.onChange){i.onChange(a)}};this.mailingSpecificSaveAfterMailinglistCheckModal=function(e){this.curEditor.storedMailingContent.mailinglistId=e.configuredMailingData.mailinglistId;this.mailingSpecificSave(this.curEditor.storedLeaveOpen,this.curEditor.storedMailingContent,this.curEditor.storedEditorData,e)};this.cancelEditor=function(){var e=this.curEditingNode.getType();var t=this.getEditorPanel(e);if(t.dialog("instance")){t.dialog("close")}};this.getEditorPanel=function(e){var t=e=="stop"?"start":e;return $("#"+t+"-editor")};this.formToObject=function(e){var t=$('form[name="'+e+'"]').serializeArray();var i={};$.each(t,(function(){if(this.name.indexOf("[")!=-1){var e=this.name.substring(0,this.name.indexOf("["));if(i[e]==undefined){i[e]=[]}var t=this.name.substring(this.name.indexOf("[")+1,this.name.indexOf("]"));if(i[e][t]==undefined){i[e][t]={}}if(this.name.indexOf(".")!=-1){var n=this.name.substring(this.name.indexOf(".")+1);i[e][t][n]=this.value}else{i[e][t]=this.value}}else{i[this.name]=this.value||""}}));$('form[name="'+e+'"] [type="checkbox"]').each((function(){i[this.name]=$(this).prop("checked")}));return i};this.fillFormFromObject=function(e,t,i,n){if(typeof t==="string"){this.fillFormFromObjectItem(e,i,i,t||n)}else{for(var r in t){if(t.hasOwnProperty(r)){var o=t[r];if(!o&&n&&n[r]){o=n[r]}this.fillFormFromObjectItem(e,i,r,o)}}}};this.fillFormFromObjectItem=function(e,t,i,n){if(Object.prototype.toString.call(n)==="[object Array]"){for(var r=0;r<n.length;r++){this.fillFormFromObject(e,n[r],i+"["+r+"]"+".")}}else{var o=$('form[name="'+e+'"] [name="'+t+i+'"]');var a=o.attr("type");switch(a){case"checkbox":o.prop("checked",Boolean(n));break;case"radio":o.filter('[value="'+n+'"]').prop("checked",true);break;default:var s=o.prop("tagName");switch(s){case"SELECT":o.val(n);this.initSelectWithValueOrChooseFirst(o,n);break;default:o.val(n)}}}};this.processForward=function(e,t,i,n){var r=[];r.push("nodeId="+this.curEditingNode.getId());r.push("elementId="+encodeURIComponent(t));if(!!n){r.push(n)}var o={forwardName:e,forwardParams:r.join(";")};if(this.curEditor.safeToSave){this.saveCurrentEditor()}i(false,o)};this.getFirstOptionValue=function(e){return t.get(e).getFirstValue()};this.resetSelect=function(e){t.get(e).clear()};this.initSelectWithFirstValue=function(e){t.get(e).selectFirstValue()};this.initSelectWithValueOrChooseFirst=function(e,i){t.get(e).selectValueOrSelectFirst(i)};this.getNodesByTypes=function(e){if(i.getNodesByTypes){return i.getNodesByTypes(e)}return[]};this.getNodesByType=function(e){return this.getNodesByTypes([e])};this.getNodesByIncomingConnections=function(e){if(i.getNodesByIncomingConnections){return i.getNodesByIncomingConnections(e)}return[]};this.getNodesByOutgoingConnections=function(e){if(i.getNodesByOutgoingConnections){return i.getNodesByOutgoingConnections(e)}return[]};this.getFirstIncomingChain=function(){if(this.curEditingNode&&i.getFirstIncomingChain){return i.getFirstIncomingChain(this.curEditingNode)}return[]};this.forEachPreviousNode=function(e){var t=this;if(this.curEditingNode&&i.forEachPreviousNode){return i.forEachPreviousNode(this.curEditingNode,(function(i){return e.call(t,i)}))}return[]};this.deleteNode=function(e){if(i.deleteNodeById){i.deleteNodeById(e)}};this.openNode=function(e,t){if(i.editNode){i.editNode(e,t)}}};function n(e){e.find(".disable-for-active").each((function(e,t){$(t).attr("disabled",true)}));e.find(".hide-for-active").each((function(e,t){$(t).hide()}));e.find(':input:enabled[type!="hidden"]').not(":button, .select2, .js-select, .js-datepicker").each((function(e,t){if($(t).prop("type")=="radio"||$(t).prop("type")=="checkbox"){$(t).attr("disabled",true)}else{$(t).attr("readonly",true)}}));e.find(":input:enabled.select2, :input:enabled.js-select, .select2-container").not(".disabled, :disabled").each((function(e,t){if($(t).prop("type")=="text"||$(t).is("input, select")){$(t).attr("disabled",true)}else{$(t).select2("disable")}}));e.find(".js-datepicker").each((function(e,t){$(t).attr("disabled",true)}))}AGN.Lib.WM.EditorsHelper=new i})();(function(){var e=AGN.Lib.WM.Definitions,i=AGN.Lib.WM.Node,n=AGN.Lib.WM.EditorsHelper,r=AGN.Lib.WM.Utils,o=AGN.Lib.WM.Dialogs;var a=function(a,s){this.MAILING_TYPE_ACTIONBASED=1;this.MAILING_TYPE_DATEBASED=2;this.MAILING_TYPE_FOLLOWUP=3;this.node={};this.mailingsStatus="all";this.defaultMailingsSort=a.defaultMailingsSort;this.defaultMailingsOrder=a.defaultMailingsOrder;this.mailingsSort=this.defaultMailingsSort;this.mailingsOrder=this.defaultMailingsOrder;this.formNameJId='form[name="'+a.form+'"]';this.containerId=a.container;this.mailingType=a.mailingType;this.mediaType=a.mediaType;this.mediatypes=a.mediatypes;this.mailingTypesForLoading=a.mailingTypesForLoading;this.statusName=a.mailingStatus;this.selectName=a.selectName;this.selectNameJId="select[name="+a.selectName+"]";this.mailingId=0;this.showCreateEditLinks=a.showCreateEditLinks;this.$dropdown=null;if(a.$dropdown){this.$dropdown=a.$dropdown}this.isChangeDecisionOptions=a.isFollowUpBaseMailing;this.followUpContainer=a.followUpContainer;this.advertisingAdditionalOptions=a.advertisingAdditionalOptions;this.nodesChain=[];this.mailingData={};this.configuredMailingData=null;var l=this;this.fillEditorBase=function(e){this.node=e;if(r.checkActivation()){this.mailingsStatus="all"}else{this.mailingsStatus=$(this.formNameJId).find("input[checked=checked]").val()||"all"}this.mailingsSort=this.defaultMailingsSort;this.mailingsOrder=this.defaultMailingsOrder;this.cleanOptions();this.hideSendSettings();this.changeDecisionOptionsSet($(this.containerId),this.isChangeDecisionOptions)};this.cleanOptions=function(){this.setDefaultSortOptions();$(this.containerId+" #"+this.statusName+"_all").attr("checked","checked");this.activateInputs();this.setSelectMailingOptions(this.node.data[this.selectName]);this.getMailingsByWorkStatus(this.mailingsStatus,this.mailingsSort,this.mailingsOrder,this.node.data.mailingId)};this.setDefaultSortOptions=function(){this.mailingsSort=this.defaultMailingsSort;this.mailingsOrder=this.defaultMailingsOrder;$(this.containerId+" .arrowUp").hide();$(this.containerId+" .arrowDown").hide();$(this.containerId+" #shortname_sort").attr("press",1);$(this.containerId+" #change_date_sort").attr("press",2);if(this.mailingType==this.MAILING_TYPE_ACTIONBASED||this.mailingType==this.MAILING_TYPE_DATEBASED){$(this.containerId+" #shortname_sort .arrowUp").show()}else{$(this.containerId+" #change_date_sort .arrowDown").show()}};this.onMailingsStatusChange=function(e){this.setSelectMailingOptions(0);this.getMailingsByWorkStatus(e,this.mailingsSort,this.mailingsOrder);this.changeDecisionOptionsSet($(this.containerId),this.isChangeDecisionOptions)};this.onMailingSelectChange=function(e){this.setSelectMailingOptions(e);this.changeDecisionOptionsSet($(this.containerId),this.isChangeDecisionOptions)};this.changeDecisionOptionsSet=function(e,t){if(t){var i=this.mailingId;var n=$(e.find(this.followUpContainer));var r=this.advertisingAdditionalOptions;$(n.find(".advertisingOption")).remove();if(i){$.ajax({type:"POST",url:AGN.url("/mailing/ajax/"+i+"/isAdvertisingContentType.action")}).done((function(e){if(e&&e.success){var t=AGN.Lib.Template.text("followupAdvertisingOptions",{items:r});n.append(t)}}))}}};this.onMailingSortClick=function(e,t){$(this.containerId+" .arrowUp").hide();$(this.containerId+" .arrowDown").hide();var i=$(this.containerId+" .sort");var n=this.containerId+" #"+e+"_sort";var r=$(n);var o=$(n+" .arrowUp");var a=$(n+" .arrowDown");var s=r.attr("press");var l=$(this.formNameJId+" "+this.selectNameJId).val();if(!s){i.attr("press",2);r.attr("press",2);o.show();this.mailingsOrder="ASC"}else{switch(s){case"1":r.attr("press",2);a.show();this.mailingsOrder="DESC";break;case"2":r.attr("press",1);o.show();this.mailingsOrder="ASC";break}}this.getMailingsByWorkStatus(this.mailingsStatus,t,this.mailingsOrder,l)};this.setMailingId=function(e){this.mailingId=e;if(this.$dropdown){if(this.mailingId>0){this.$dropdown.show()}else{this.$dropdown.hide()}}};this.setSelectMailingOptions=function(e){this.setMailingId(e);if(this.showCreateEditLinks){this.setMailingLinks(e)}};this.setMailingLinks=function(e){var i="";if(e!="0"){if(!r.checkActivation()){i='<a href="#" data-action="mailing-editor-edit">'+t("workflow.mailing.edit_mailing_link")+"</a> "}else{const n=AGN.url("/mailing/"+e+"/settings.action");i='<a href="'+n+'">'+t("workflow.mailing.edit_mailing_link")+"</a>"}}else{i=""+'<a href="#" class="setting-mailing-left" data-action="mailing-editor-new"> '+t("workflow.mailing.new")+"</a>"}var n=$(this.containerId+" #mailing_create_edit_link");n.html("");n.append(i)};this.showSecurityQuestion=function(){this.setSecurityQuestion();this.setIsUsedInCMAttr();if(this.isSentMailing(this.mailingIsSent)||this.mailingIsUsedInCM){var e=this.getSelectedMailingOption();$(this.containerId+"-security-dialog").dialog({title:'<span class="dialog-fat-title">'+e.html()+"</span>",dialogClass:"no-close",open:function(e,t){},width:650,modal:true,resizable:false});return false}return true};this.isSentMailing=function(e){return e=="mailing.status.sent"||e=="mailing.status.scheduled"||e=="mailing.status.norecipients"};this.cancelSecurityDialog=function(){$(this.containerId+"-security-dialog").dialog("close")};this.getMailingsByWorkStatus=function(e,i,r,o){var a=this;var s=$(this.formNameJId+" "+this.selectNameJId);s.attr("readonly","readonly");$.ajax({url:AGN.url("/workflow/getMailingsByWorkStatus.action"),data:{mailingTypes:this.mailingTypesForLoading.join(","),mediatypes:this.mediatypes?this.mediatypes.join(","):"",status:e,sort:i,order:r},success:function(l){s.empty();s.append($("<option></option>",{value:0,text:t("workflow.defaults.no_mailing")}));l.forEach((function(e){var t=$("<option></option>",{value:e.MAILING_ID,text:e.SHORTNAME,selected:o==e.MAILING_ID});if(a.isSentMailing(e.WORK_STATUS)){t.css("color","#808080")}t.attr({status:e.WORK_STATUS,senddate:e.SENDDATE});t.data({status:e.WORK_STATUS,"send-date":e.SENDDATE,"dependent-campaigns":e.USEDINWORKFLOWS||""});s.append(t)}));s.removeAttr("readonly");a.mailingsStatus=e;a.mailingsSort=i;a.mailingsOrder=r;s.val(a.mailingId);n.initSelectWithValueOrChooseFirst(s,a.mailingId)}})};this.disableInputs=function(){$(this.containerId+' [name="'+this.statusName+'"]').attr("disabled","disabled")};this.activateInputs=function(){$(this.containerId+' [name="'+this.statusName+'"]').removeAttr("disabled")};this.setNodeFields=function(){this.node.setFilled(parseInt(this.mailingId,10)>0)};this.setSecurityQuestion=function(){var e=this.getSelectedMailingOption();this.mailingIsSent="";if(parseInt(this.mailingId,10)>0){this.mailingIsSent=e.data("status")}};this.setIsUsedInCMAttr=function(){var t=this.getSelectedMailingOption();var i=t.data("dependent-campaigns");var n=t.val();this.mailingIsUsedInCM=false;if(parseInt(this.mailingId,10)>0&&n==this.mailingId&&i){var r=e.workflowId||0;if(i>0){if(r>0){this.mailingIsUsedInCM=r!==i}else{this.mailingIsUsedInCM=true}}}};this.getSelectedMailingOption=function(){return $(this.formNameJId+" "+this.selectNameJId+" option[value="+this.mailingId+"]")};this.getSelectedDecisionOption=function(){var e="decisionCriterion";var t=$(this.formNameJId+' select[name="'+e+'"]').val();return $(this.formNameJId+' select[name="'+e+'"] option[value='+t+"]")};this.createNewMailing=function(e){h({node:this.node,successCallback:u,forwardName:e,mailingEditorBase:this})};var u=function(e,i,r){if(!e.hasMailingList){$(r.containerId+" .editor-error-messages").html(t("error.workflow.notAddedMailingList"));$(r.containerId+" .editor-error-messages").css("display","block")}else{var o=[];o.push("mailingType="+r.mailingType);if(r.mediaType){o.push("mediaType="+r.mediaType)}if(r.mailingType==r.MAILING_TYPE_FOLLOWUP){o.push("workflowFollowUpParentMailing="+r.node.data.baseMailingId);o.push("workflowFollowUpDecisionCriterion="+r.node.data.decisionCriterion)}n.processForward(i,r.formNameJId+" "+r.selectNameJId,s,o.join(";"))}};this.processCopyAndEditMailingForward=function(e,t,i,r){$("#forwardTargetItemId").val(e);var o=[];o.push("mailingType="+l.mailingType);if(this.mailingType==this.MAILING_TYPE_FOLLOWUP){o.push("workflowFollowUpParentMailing="+this.node.data.baseMailingId);o.push("workflowFollowUpDecisionCriterion="+this.node.data.decisionCriterion)}if(o.length>0){n.processForward(t,i+" "+r,s,o.join(";"))}else{n.processForward(t,i+" "+r,s)}};this.editMailing=function(e){this.processCopyAndEditMailingForward(this.mailingId,e,this.formNameJId,this.selectNameJId)};this.copyMailing=function(e){this.processCopyAndEditMailingForward(this.mailingId,e,this.formNameJId,this.selectNameJId)};this.trySupplementChain=function(e,t,i){if(e.length>0){this.configuredMailingData=c(e);this.nodesChain=e;this.mailingData=t;var n=d(l,true);if(n.length){o.confirmMailingDataTransfer(n).done((function(e){l.transferMailingData(e);l.supplementChain(i)})).fail((function(){l.transferMailingData();l.supplementChain(i)}))}else{l.supplementChain(i)}}};this.checkDifferentMailingLists=function(t,i,r){var o=this;p(t).then((function(t){var a=n.getFirstIncomingChain();o.configuredMailingData=c(a);o.nodesChain=a;o.mailingData=t;var s=0;a.forEach((function(t){if(t.getType()==e.NODE_TYPE_MAILING){s++}}));var l=o.configuredMailingData.mailinglistId;if(s>1&&l!=0&&l!=t.mailinglistId){r(t)}else{i(t)}}))};var c=function(t){var i={parameterValue:0,campaignId:0,mailinglistId:0,targets:[],date:null};for(var n=t.length-1;n>=0;n--){var r=t[n];var o=r.getData();switch(r.getType()){case e.NODE_TYPE_PARAMETER:i.parameterValue=o.value;break;case e.NODE_TYPE_ARCHIVE:i.campaignId=o.campaignId;break;case e.NODE_TYPE_RECIPIENT:if(i.mailinglistId==0){i.mailinglistId=o.mailinglistId}if(o.targets!==null){o.targets.forEach((function(e){if(!i.targets.includes(e)){i.targets.push(parseInt(e))}}))}break;case e.NODE_TYPE_START:if(o.date){i.date=C(o.date);i.date.setHours(o.hour);i.date.setMinutes(o.minute)}else{i.date=null}break;case e.NODE_TYPE_DEADLINE:if(o.deadlineType==e.constants.deadlineTypeFixedDeadline){if(o.date){i.date=C(o.date);i.date.setHours(o.hour);i.date.setMinutes(o.minute)}else{i.date=null}}else if(o.deadlineType==e.constants.deadlineTypeDelay){if(i.date!=null){if(o.timeUnit==e.constants.deadlineTimeUnitMinute){i.date.setMinutes(i.date.getMinutes()+parseInt(o.delayValue))}else if(o.timeUnit==e.constants.deadlineTimeUnitHour){i.date.setHours(i.date.getHours()+parseInt(o.delayValue))}else if(o.timeUnit==e.constants.deadlineTimeUnitDay){i.date.setDate(i.date.getDate()+parseInt(o.delayValue));if(o.useTime||o.useTime=="true"){i.date.setMinutes(i.date.getMinutes()+parseInt(o.minute));i.date.setHours(i.date.getHours()+parseInt(o.hour))}}}}break}}return i};var d=function(t,i){var n=t.configuredMailingData;var r=t.mailingData;var o=[];var a=[];var s=[];if(r.mailinglistId==0){s.push(e.MAILING_PARAM_MAILING_LIST)}else{if(n.mailinglistId==0){o.push(e.MAILING_PARAM_MAILING_LIST)}else{if(n.mailinglistId!=r.mailinglistId){if(i){a.push(e.MAILING_PARAM_MAILING_LIST)}else{o.push(e.MAILING_PARAM_MAILING_LIST)}}}}var l=n.targets;var u=r.targetGroupIds;if(u==null||u.length==0){s.push(e.MAILING_PARAM_TARGET_GROUPS)}else{if(l==null||l.length==0){o.push(e.MAILING_PARAM_TARGET_GROUPS)}else{if(!A(n,r)){if(i){a.push(e.MAILING_PARAM_TARGET_GROUPS)}else{o.push(e.MAILING_PARAM_TARGET_GROUPS)}}}}if(e.constants.isAltgExtended){var c=n.altgs;var d=r.altgIds;if(d==null||d.length==0){s.push(e.MAILING_PARAM_ALTGS)}else{if(c==null||c.length==0){o.push(e.MAILING_PARAM_ALTGS)}else{if(!E(n,r)){if(i){a.push(e.MAILING_PARAM_TARGET_GROUPS)}else{o.push(e.MAILING_PARAM_TARGET_GROUPS)}}}}}var p=t.getParameterValue(r.splitBase,r.splitPart);if(p==null){s.push(e.MAILING_PARAM_LIST_SPLIT)}else{if(n.parameterValue==0){o.push(e.MAILING_PARAM_LIST_SPLIT)}else{if(n.parameterValue!=p){if(i){a.push(e.MAILING_PARAM_LIST_SPLIT)}else{o.push(e.MAILING_PARAM_LIST_SPLIT)}}}}if(r.campaignId==0){s.push(e.MAILING_PARAM_ARCHIVE)}else{if(n.campaignId==0){o.push(e.MAILING_PARAM_ARCHIVE)}else{if(n.campaignId!=r.campaignId){if(i){a.push(e.MAILING_PARAM_ARCHIVE)}else{o.push(e.MAILING_PARAM_ARCHIVE)}}}}var h=n.date;var g=w(r);var m=b(r);if(g==null&&m==null){s.push(e.MAILING_PARAM_PLANNED_DATE)}else{if(h==null){if(g!=null){o.push(e.MAILING_PARAM_PLANNED_DATE)}else{o.push(e.MAILING_PARAM_SEND_DATE)}}else{if(C(g)>C(h)){if(i){a.push(e.MAILING_PARAM_PLANNED_DATE)}else{o.push(e.MAILING_PARAM_PLANNED_DATE)}}else if(g&&C(g)<C(h)){s.push(e.MAILING_PARAM_PLANNED_DATE)}if(m>h){if(i){a.push(e.MAILING_PARAM_SEND_DATE)}else{o.push(e.MAILING_PARAM_SEND_DATE)}}else if(m&&m<h){s.push(e.MAILING_PARAM_SEND_DATE)}}}f(t,s);return i?a:o};var f=function(t,i){var n=t.configuredMailingData;var r=t.mailingData;for(var o=0;o<i.length;o++){switch(i[o]){case e.MAILING_PARAM_MAILING_LIST:r.mailinglistId=n.mailinglistId;break;case e.MAILING_PARAM_TARGET_GROUPS:r.targetGroupIds=n.targets;break;case e.MAILING_PARAM_ALTGS:r.altgIds=n.altgs;break;case e.MAILING_PARAM_ARCHIVE:r.campaignId=n.campaignId;break;case e.MAILING_PARAM_LIST_SPLIT:r.splitBase="";r.splitPart="";break;case e.MAILING_PARAM_PLANNED_DATE:var a=C(n.date);if(a){r.planDate=a.getTime()}else{r.planDate=0}break;case e.MAILING_PARAM_SEND_DATE:r.sendDate=C(n.date);if(n.date){r.sendHour=n.date.getHours();r.sendMinute=n.date.getMinutes()}break}}};var p=function(e){return new Promise((function(t){_.defer((function(){$.ajax({url:AGN.url("/workflow/mailing/"+e+"/info.action"),success:function(e){t(e)}})}))}))};var h=function(t){var i=t.node||n.curEditingNode;var r=t.successCallback;var o=t.forwardName;function a(t){var i=0;n.curEditingNode=t;n.forEachPreviousNode((function(t){if(t.type===e.NODE_TYPE_RECIPIENT){i=t.data.mailinglistId;return false}}));return i>0}r({hasMailingList:a(i)},o,t.mailingEditorBase)};this.transferMailingData=function(e){if(e){f(l,e)}else{f(l,d(l,true))}};this.supplementChain=function(t){var i=d(this,false);var r=this.mailingData;var o=this.configuredMailingData;var a=this.nodesChain;var s=false;var u=false;for(var c=1;c<a.length;c++){if(e.NODE_TYPES_MAILING.includes(a[c].getType())){a.splice(c+1);u=true;break}}if(!u){if(i.includes(e.MAILING_PARAM_PLANNED_DATE)||i.includes(e.MAILING_PARAM_SEND_DATE)){if(e.NODE_TYPE_START==a[a.length-1].getType()){s=true}else{var f=n.getNodesByType(e.NODE_TYPE_START);if(f.length==0&&r.mailingType!=this.MAILING_TYPE_ACTIONBASED&&r.mailingType!=this.MAILING_TYPE_DATEBASED){s=true}}if(s){this.supplementSingleNode(e.NODE_TYPE_START,(function(t){var a=t.getData();if(i.includes(e.MAILING_PARAM_PLANNED_DATE)){a.date=w(r);var s=o.date;if(s){a.hour=s.getHours();a.minute=s.getMinutes()}n.resave(t)}else if(i.includes(e.MAILING_PARAM_SEND_DATE)){a.date=b(r);a.hour=a.date.getHours();a.minute=a.date.getMinutes()}}))}}}if(i.includes(e.MAILING_PARAM_LIST_SPLIT)){this.supplementSingleNode(e.NODE_TYPE_PARAMETER,(function(e){var t=e.getData();t.value=l.getParameterValue(r.splitBase,r.splitPart)}))}if(i.includes(e.MAILING_PARAM_ARCHIVE)){this.supplementSingleNode(e.NODE_TYPE_ARCHIVE,(function(e){var t=e.getData();t.campaignId=r.campaignId}))}if(i.includes(e.MAILING_PARAM_MAILING_LIST)||i.includes(e.MAILING_PARAM_TARGET_GROUPS)){this.supplementSingleNode(e.NODE_TYPE_RECIPIENT,(function(t){var n=t.getData();if(i.includes(e.MAILING_PARAM_MAILING_LIST)){n.mailinglistId=r.mailinglistId;t.setDependent(true)}if(i.includes(e.MAILING_PARAM_TARGET_GROUPS)){n.targets=r.targetGroupIds;if(e.constants.isAltgExtended){n.targetsOption="ONE_TARGET_REQUIRED"}else{n.targetsOption=e.constants.accessLimitTargetId>0?"ALL_TARGETS_REQUIRED":"ONE_TARGET_REQUIRED"}}if(e.constants.isAltgExtended){if(i.includes(e.MAILING_PARAM_ALTGS)){n.altgs=r.altgIds}}}))}if(!s&&(i.includes(e.MAILING_PARAM_PLANNED_DATE)||i.includes(e.MAILING_PARAM_SEND_DATE))){this.supplementSingleNode(e.NODE_TYPE_DEADLINE,(function(t){var n=t.getData();if(i.includes(e.MAILING_PARAM_PLANNED_DATE)){n.date=w(r);var a=o.date;if(a){n.date.setHours(a.getHours());n.date.setMinutes(a.getMinutes())}}else if(i.includes(e.MAILING_PARAM_SEND_DATE)){n.date=b(r)}n.deadlineType=e.constants.deadlineTypeFixedDeadline;n.hour=n.date.getHours();n.minute=n.date.getMinutes()}))}t(a)};this.supplementSingleNode=function(t,i){var n;switch(t){case e.NODE_TYPE_START:n=false;break;case e.NODE_TYPE_PARAMETER:n=[];break;case e.NODE_TYPE_ARCHIVE:n=[e.NODE_TYPE_PARAMETER];break;case e.NODE_TYPE_RECIPIENT:n=[e.NODE_TYPE_PARAMETER,e.NODE_TYPE_ARCHIVE];break;case e.NODE_TYPE_DEADLINE:n=[e.NODE_TYPE_PARAMETER,e.NODE_TYPE_ARCHIVE,e.NODE_TYPE_RECIPIENT];break;default:console.error("Unexpected supplement node type: "+t);return}if(!g(t,i)){m(t,n,i)}};var g=function(e,t){var i=l.nodesChain;for(var r=1;r<i.length;r++){var o=i[r];if(e==o.getType()){t(o);n.resave(o);return true}}return false};var m=function(e,t,n){var r=l.nodesChain;var o=i.create(e);n(o);if(t===false){r.push(o)}else{for(var a=1;a<r.length;a++){var s=r[a];if(!t.includes(s.getType())){r.splice(a,0,o);return}}r.push(o)}};this.closeOneMailinglistWarningDialog=function(){$(this.containerId+"-oneMailinglistWarning-dialog").dialog("close")};this.acceptOneMailinglistPerCampaign=function(){this.closeOneMailinglistWarningDialog();n.mailingSpecificSaveAfterMailinglistCheckModal(l)};this.validateEditor=function(e){var i=$(this.containerId+" .editor-error-messages");i.html("");i.css("display","none");var r=false;if($(this.containerId+" .delivery-settings").length){var o=$(this.containerId+' [name="maxRecipients"]').val();if(parseInt(o)!=o){i.html(t("error.workflow.wrongMaxRecipientsFormat"));r=true}else if(parseInt(o)<0){i.html(t("error.workflow.maxRecipientsLessThanZero"));r=true}else if(parseInt(o)>1e9){i.html(t("error.workflow.maxRecipientsTooBig"));r=true}}var a=$(this.formNameJId+" "+this.selectNameJId);if(a.val()<=0){if(i.html()!=""){i.html(i.html()+"<br>")}i.html(i.html()+t("error.workflow.noMailing"));r=true}if(!r){if(e){e()}else{n.saveCurrentEditor()}}else{i.css("display","block")}};this.toggleSendSettings=function(e){if($("#sendSettings_"+e).css("display")=="none"){$("#sendSettingsToggle_"+e).removeClass("toggle_closed");$("#sendSettingsToggle_"+e).addClass("toggle_open")}else{$("#sendSettingsToggle_"+e).removeClass("toggle_open");$("#sendSettingsToggle_"+e).addClass("toggle_closed")}$("#sendSettings_"+e).toggle("blind",200)};this.hideSendSettings=function(){$(".wm-mailing-send-settings-link").removeClass("toggle_open");$(".wm-mailing-send-settings-link").addClass("toggle_closed");$(".wm-mailing-send-settings").css("display","none")};this.getParameterValue=function(e,t){if(e.length>4){for(var i=0;i<e.length/2;i++){if(i+1==t){return e.substring(i*2,(i+1)*2)}}}else{for(var i=0;i<e.length/2;i++){if(e.substring(i*2,(i+1)*2)==t){return e.substring(i*2,(i+1)*2)}}}return null};this.initOneMailinglistWarningDialog=function(e){$(e.containerId+"-oneMailinglistWarning-dialog").dialog({title:'<span class="dialog-fat-title">'+e.getSelectedMailingOption().html()+"</span>",dialogClass:"no-close",width:350,modal:true,resizable:false})};var v=function(e){return e.sendDate!=undefined&&e.sendDate!=null&&e.sendHour!=null&&e.sendMinute!=null};var y=function(e){return e.planDate>0};var b=function(e){if(v(e)){return new Date(e.sendDate+"T"+e.sendHour+":"+e.sendMinute+":00")}return null};var w=function(e){if(y(e)){return new Date(e.planDate)}return null};var C=function(e){if(e==null){return null}else{return new Date(e.getFullYear(),e.getMonth(),e.getDate())}};var A=function(e,t){var i=e.targets;var n=t.targetGroupIds;if(i==null&&n==null){return true}if(i.length!=n.length){return false}for(var r=0;r<n.length;r++){if(!x(i,n[r])){return false}}return true};var E=function(e,t){var i=e.altgs;var n=t.altgIds;if(i==null&&n==null){return true}if(i.length!=n.length){return false}for(var r=0;r<n.length;r++){if(!x(i,n[r])){return false}}return true};var x=function(e,t){return e.indexOf(t)!=-1}};AGN.Lib.WM.MailingEditorHelper=a})();(function(){var e=AGN.Lib.WM.EditorsHelper;AGN.Lib.WM.MailingSelector=function(i,n,r,o){this.formNameJId='form[name="'+i+'"]';this.container=n;this.selectNameJId="select[name="+r+"]";this.defaultSortField="date";this.mailingId=0;this.noMailingOption=o;this.cleanOptions=function(e){if(e==undefined){e=0}$(this.container+" .sort").prop("press",e);this.onMailingSortClick(this.defaultSortField)};this.onMailingSelectChange=function(e){};this.onMailingSortClick=function(e){$(this.container+" .arrowUp").hide();$(this.container+" .arrowDown").hide();var t=$(this.container+" .sort");var i=this.container+" #"+e+"_sort";var n=$(i);var r=$(i+" .arrowUp");var o=$(i+" .arrowDown");var a=parseInt(n.prop("press"));var s="asc";t.prop("press",0);switch(a){case 0:n.prop("press",1);r.show();s="asc";break;case 1:n.attr("press",2);o.show();s="desc";break;case 2:n.prop("press",1);r.show();s="asc";break}this.getAllMailingSorted(e,s)};this.setMailingId=function(e){this.mailingId=e};this.getAllMailingSorted=function(i,n){var r=this;var o=$(this.formNameJId+" "+this.selectNameJId);var a=o.val();if(a!=null){r.mailingId=a}o.attr("readonly","readonly");$.ajax({type:"GET",url:AGN.url("/workflow/getAllMailingSorted.action"),data:{sortField:i,sortDirection:n},success:function(i){o.html("");if(r.noMailingOption){o.append('<option value="0">'+t("workflow.defaults.no_mailing")+"</option>")}for(var n=0;n<i.length;n++){o.append("<option "+' value="'+i[n].mailingID+'">'+i[n].shortname+"</option>")}o.removeAttr("readonly");if(r.mailingId==0&&r.noMailingOption==false&&i.length>0){o.val(i[0].mailingID)}else{o.val(r.mailingId)}e.initSelectWithValueOrChooseFirst(o,o.val())}})};this.getSelectedMailingOption=function(){return $(this.formNameJId+" "+this.selectNameJId+" option[value="+this.mailingId+"]")}}})();(function(){var e=AGN.Lib.WM.Definitions,i=AGN.Lib.WM.Node,n=AGN.Lib.WM.Vertex,r=AGN.Lib.WM.VertexGroup,o=AGN.Lib.WM.NodeTitleHelper,a=AGN.Lib.WM.Canvas,s=AGN.Lib.WM.ConnectionConstraints,l=AGN.Lib.WM.DraggableButtons,u=AGN.Lib.WM.AutoAlignment,c=AGN.Lib.WM.UndoManager,d=AGN.Lib.WM.EditorsHelper,f=AGN.Lib.WM.Dialogs,p=AGN.Lib.WM.Snippets,h=AGN.Lib.ContextMenu,g=AGN.Lib.Helpers,m=AGN.Lib.WM.Utils;var v={blurInputFields:function(){if(document.activeElement&&$(document.activeElement).is("input, textarea")){document.activeElement.blur()}},setConnectionLabel:function(e,t){if(t){var i=e.origin.getOverlay("label");if(i){i.setLabel(t);i.show()}else{e.origin.addOverlay(["Label",{location:.5,id:"label",cssClass:"connection-label",label:t}])}}else{e.origin.hideOverlay("label")}},setDeleteButtonEnabled:function(e){$("#deleteButton").toggleClass("disabled",!e);$("#deleteItem").prop("disabled",!e)},setUndoButtonEnabled:function(e){$("#undoButton").toggleClass("disabled",!e);$("#undoItem").prop("disabled",!e)}};function y(t,n,r){this.$viewport=$("#viewPort");this.$gridBackground=$("#grid-background");this.$container=$("#canvas");this.$titlesContainer=this.$container.find("#icon-titles-container");this.canvas=new a(this.$container);this.canvasZoomHandler=null;this.instance=jsPlumb.getInstance(y.defaults(this.$container));this.editable=!!t;this.lastAllocatedId=0;this.drag=null;this.chainModeEnabled=false;this.multiConnectionEnabled=false;this.scale=1;this.dragMode=e.DEFAULT_DRAG_MODE;var o=this;this.updateBackgroundCellSize(this.scale);this.canvas.setOnZoom((function(e){o.instance.setZoom(e);if(o.canvasZoomHandler){o.canvasZoomHandler.call(null,e);o.updateBackgroundCellSize(e);o.moveGridBackground(o.canvas.getPosition())}}));this.canvas.setOnMove((function(e){o.moveGridBackground(e)}));this.draggableButtons=new l({enabled:!!t,getZoom:function(){return o.getZoom()},getOccupiesAreas:function(){return o.getNodes$().get().map((function(e){return i.getCollisionBox($(e))}))},onStart:function(){},onStop:function(){},onDrop:function(e,t){o.newNode(e,t)}});this.$viewport.selectable({filter:".node",distance:10,disabled:!this.editable,start:function(){$("#selection-backdrop").show()},stop:function(){$("#selection-backdrop").hide()},selected:function(e,t){o.instance.addToDragSelection(t.selected);o.onSelectionChanged()},unselected:function(e,t){o.instance.removeFromDragSelection(t.unselected);o.onSelectionChanged()}});this.$viewport.on("mousedown",(function(e){if(["canvas","viewPort","icon-titles-container"].includes(e.target.id)||$.contains(o.$titlesContainer[0],e.target)){o.deselectAll()}v.blurInputFields()}));this.instance.bind("connection",(function(e){o.undoManager.operation("connectionCreated",e);o.autofillStopNodesIfPossible();o.autoConvertMailingNodesTypeIfPossible();o.updateOverlays();o.positionTitles();o.processRecipientsChains()}));this.instance.bind("connectionDetached",(function(e){o.undoManager.operation("connectionDeleted",e);o.autofillStopNodesIfPossible();o.autoConvertMailingNodesTypeIfPossible();o.updateOverlays();o.positionTitles();o.processRecipientsChains()}));this.instance.bind("mousedown",(function(t,i){if(o.editable&&i.button===e.MOUSE_BUTTON_MIDDLE){_.defer((function(){o.undoManager.transaction((function(){o.deleteConnection(t)}))}))}v.blurInputFields()}));this.instance.bind("beforeDrag",(function(){o.undoManager.startTransaction()}));this.instance.bind("connectionDragStop",(function(){o.undoManager.endTransaction()}));this.instance.bind("connectionDrag",(function(e){o.deselectAll();if(e.source){var t=$(e.source);o.setNodeSelected(t,true);if(o.isChainMode()){i.setChainSource(t,true)}}}));this.instance.bind("beforeDrop",(function(e){var t=i.get(document.getElementById(e.sourceId));var n=i.get(document.getElementById(e.targetId));var r=o.connect(t,n,true);if(r){return true}if(r===false){workflowNotAllowedConnectionDialogHandler.showDialog()}return false}));this.$footnotesContainer=$("#footnotes-container ol");this.isFootnotesEnabled=r;this.undoManager=new c(this,{onChange:function(){v.setUndoButtonEnabled(this.canUndo());o.processRecipientsChains();o.autofillStopNodesIfPossible();o.autoConvertMailingNodesTypeIfPossible()}});d.assignOptions({getUndoManager:function(){return o.getUndoManager()},getNodesByTypes:function(e){return o.getNodesByTypes(e)},getNodesByIncomingConnections:function(e){return o.getNodeIncomingConnections(e).map((function(e){return e.source}))},getNodesByOutgoingConnections:function(e){return o.getNodeOutgoingConnections(e).map((function(e){return e.target}))},getFirstIncomingChain:function(e){return o.getFirstIncomingChain(e)},forEachPreviousNode:function(e,t){return o.forEachPreviousNode(e,t)},getNodeAnchorsInUse:function(e){return o.getAnchorsInUse(e)},onChange:function(e){o.updateNodeTitle(e,true);o.updateFootnotes();o.updateMinimap()},supplement:function(e){o.supplement.apply(o,arguments)},editNode:function(e,t){alert("Missing editorsHelper.editNode")},deleteNodeById:function(e){alert("Missing editorsHelper.deleteNodeById")}});if(n){h.create(y.contextMenuOptions(o))}}y.defaults=function(t){return{Container:t,Anchor:[[0,.5,-1,0],[.5,0,0,-1],[1,.5,1,0],[.5,1,0,1]],DragOptions:{cursor:"pointer",zIndex:e.Z_INDEX_JSPLUMB_DRAG_OPTIONS},Endpoint:"Blank",Connector:["FixedBezierConnector"],PaintStyle:{stroke:e.CONNECTION_COLOR,strokeWidth:e.CONNECTION_THICKNESS,outlineStroke:e.CONNECTION_OUTLINE_COLOR,outlineWidth:e.CONNECTION_OUTLINE_WIDTH},HoverPaintStyle:{stroke:e.CONNECTION_HOVER_COLOR,strokeWidth:e.CONNECTION_THICKNESS,outlineStroke:e.CONNECTION_OUTLINE_COLOR,outlineWidth:e.CONNECTION_OUTLINE_WIDTH},ConnectionOverlays:[["Arrow",{id:"arrow",visible:true,location:1,width:e.CONNECTION_ARROW_SIZE,length:e.CONNECTION_ARROW_SIZE}]]}};y.contextMenuOptions=function(e){return{".jtk-connector":{shown:function(){return e.editable},items:{delete:{name:t("workflow.defaults.delete"),icon:"delete",disabled:function(t){return!e.canDeleteConnection(e.getConnectionByConnector$(t))},clicked:function(t){e.undoManager.transaction((function(){var i=e.getConnectionByConnector$(t);e.deleteConnection(i.origin)}))}}}},".node":{shown:function(){return true},items:{connect:{name:t("workflow.connect"),icon:"connect",shown:function(){return e.editable&&e.getSelectionSize()>1},clicked:function(){e.undoManager.transaction((function(){if(e.getSelectionSize()==2&&e.multiConnectionEnabled){e.connectBetweenSelected()}else{e.connectSelected()}}))}},disconnect:{name:t("workflow.disconnect"),icon:"disconnect",shown:function(){return e.editable&&e.getSelectionSize()>1},clicked:function(){e.undoManager.transaction((function(){e.disconnectSelected()}))}},edit:{name:t("workflow.defaults.edit"),icon:"edit",shown:function(){return e.getSelectionSize()<=1},clicked:function(t){e.editIcon(i.get(t))},disabled:function(e){return!i.get(e).isEditable()}},delete:{name:t("workflow.defaults.delete"),icon:"delete",clicked:function(){e.undoManager.transaction((function(){e.deleteSelected()}))},disabled:function(){return!e.editable}},comment:{name:t("workflow.defaults.comment"),icon:"comment",clicked:function(t){e.editIconComment(i.get(t))},disabled:function(){return!e.editable}}}}}};y.prototype.updateFootnotes=_.throttle((function(){this.forEachNode((function(e){e.setFootnote(-1)}));this.$footnotesContainer.html("");if(this.isFootnotesEnabled){var e=this;var t=1;this.forEachNode((function(n){if(i.isCommented(n)){e.$footnotesContainer.append('<li id="#fn:'+t+'">'+n.getComment()+"</li>");n.setFootnote(t);t++}}))}}),150);y.prototype.moveGridBackground=function(e){const t=this.calculateBackgroundOffsetDelta(e.x);const i=this.calculateBackgroundOffsetDelta(e.y);this.$gridBackground.css({left:"-"+t+"px",top:"-"+i+"px",width:"calc(100% + "+t+"px)",height:"calc(100% + "+i+"px)"})};y.prototype.calculateBackgroundOffsetDelta=function(t){if(t<=0){return t*-1}const i=e.NODE_SIZE*this.scale;const n=t/i%1;return i-i*n};y.prototype.isActionBasedWorkflow=function(){return this.getNodes().some((function(t){return t.getType()===e.NODE_TYPE_ACTION_BASED_MAILING}))};y.prototype.isDateBasedWorkflow=function(){return this.getNodes().some((function(t){return t.getType()===e.NODE_TYPE_DATE_BASED_MAILING}))};y.prototype.isNormalWorkflow=function(){return!this.isActionBasedWorkflow()&&!this.isDateBasedWorkflow()};y.prototype.getNodes$=function(){return this.$container.find(".node")};y.prototype.getNodes=function(){return this.getNodes$().get().map((function(e){return i.get(e)}))};y.prototype.getVertices=function(){return n.verticesFrom(this.getNodes(),this.instance.getAllConnections())};y.prototype.getNodesByTypes=function(e){return this.getNodes().filter((function(t){return e.includes(t.type)}))};y.prototype.forEachNode$=function(e){var t=this.getNodes$();var i=this;t.each((function(){e.call(i,$(this))}))};y.prototype.forEachNode=function(e){var t=this;this.forEachNode$((function(n){e.call(t,i.get(n))}))};y.prototype.forEachPreviousNode=function(e,t){var i=this.getConnections();var n=i.filter((function(t){return t.target===e})).map((function(e){return e.source}));var r={};while(n.length){for(var o=0;o<n.length;o++){var a=n[o];var s=a.getId();var l=t.call(this,a);if(l===false){return}r[s]=true}n=i.filter((function(e){if(n.includes(e.target)){var t=e.source.getId();if(r[t]){return false}else{r[t]=true;return true}}else{return false}})).map((function(e){return e.source}))}};y.prototype.getNodeIncomingChains=function(e){var t=this.getVertices();var i=t.find((function(t){return t.node==e}));var r=[];if(i){return n.getIncomingChains(i)}return r};y.prototype.getNodeOutgoingChains=function(e){var t=this.getVertices();var i=t.find((function(t){return t.node==e}));var r=[];if(i){return n.getOutgoingChains(i)}return r};y.prototype.getFirstOutgoingChain=function(e){const t=this.getNodeOutgoingChains(e);if(t.length){return t[0]}return[]};y.prototype.getFirstIncomingChain=function(e){var t=this.getNodeIncomingChains(e);if(t.length){return t[0]}return[]};y.prototype.getNodeIncomingConnections=function(e){return this.getConnections((function(t){return i.get(t.target)===e}))};y.prototype.getNodeOutgoingConnections=function(e){return this.getConnections((function(t){return i.get(t.source)===e}))};y.prototype.getNodeConnections=function(e){return this.getConnections((function(t){return i.get(t.source)===e||i.get(t.target)===e}))};y.prototype.hasNodeIncomingConnections=function(e){return this.instance.getAllConnections().some((function(t){return i.get(t.target)===e}))};y.prototype.hasNodeOutgoingConnections=function(e){return this.instance.getAllConnections().some((function(t){return i.get(t.source)===e}))};y.prototype.hasConnection=function(e){return this.instance.getAllConnections().some((function(t){return e.call(null,{origin:t,source:i.get(t.source),target:i.get(t.target)})}))};y.prototype.getConnections=function(e){var t=this.instance.getAllConnections();if(e){t=t.filter(e)}return t.map((function(e){return{origin:e,source:i.get(e.source),target:i.get(e.target)}}))};y.prototype.getConnectionByConnector$=function(e){return this.getConnections((function(t){return t.canvas==e[0]}))[0]};y.prototype.getConnectionBetween=function(e,t){return this.getConnections((function(i){return $(i.source).is(e)&&$(i.target).is(t)}))[0]};y.prototype.recycle=function(){this.instance.reset();this.$container.empty()};y.prototype.batch=function(){this.instance.batch.apply(this.instance,arguments)};y.prototype.newNode=function(t,n){var r=this;if(this.editable){if(i.isExpandableType(t)){const i=e.workflowId===0&&r._isInInitialState();switch(t){case e.NODE_TYPE_SC_BIRTHDAY:case e.NODE_TYPE_SC_DOI:if(e.workflowId===0&&this._isInInitialState()){this.deleteAllNodes()}this.newSnippetFromSample(t,n);break;case e.NODE_TYPE_SC_ABTEST:f.createAutoOpt().done((function(e){if(i){r.deleteAllNodes()}p.loadAutoOptSample(e,r.isGridDisplayed(),(function(e,t){r.newSnippet(e,t,n)}))}));break;case e.NODE_TYPE_OWN_WORKFLOW:f.confirmOwnWorkflowExpanding().done((function(e){if(i){r.deleteAllNodes()}r.newSnippetFromOwnWorkflow(e.workflowId,e.copyContent,n)}));break}}else{var o=i.create(t);var a=e.NODE_ANIMATION_DROPPED;if(!n){n=this.pickNewNodePosition();a=e.NODE_ANIMATION_AUTO_DROPPED}o.setCoordinates(n.x,n.y);this.undoManager.transaction((function(){r.add(o,a);r.supplement(o)}))}}};y.prototype._isInInitialState=function(){return e.intialSchema===this.serializeIcons()};y.prototype.newSnippetFromSample=function(e,t){var i=this;p.loadSample(e,this.isGridDisplayed(),(function(e,n){i.newSnippet(e,n,t)}))};y.prototype.newSnippetFromOwnWorkflow=function(e,t,i){var n=this;p.loadOwnWorkflow(e,t,(function(e,t){if(n.isGridDisplayed()){e.forEach((function(e){n.convertNodeCoordinates(e)}))}n.newSnippet(e,t,i)}))};y.prototype.newSnippet=function(t,i,n){var r=this;var o=n?e.NODE_ANIMATION_DROPPED:e.NODE_ANIMATION_AUTO_DROPPED;var a=this.getNodesByTypes([e.NODE_TYPE_START]).length>0;var s=this.getNodesByTypes([e.NODE_TYPE_STOP]).length>0;p.removeStartStop(t,i,a,s);if(n){p.adjustPositions(t,n.x,n.y,true)}else{n=this.getCenterPosition();p.adjustPositions(t,n.x,n.y,false)}this.undoManager.transaction((function(){r.batch((function(){var e=r.allocateIds(t.length);r.allocateSpaceForSnippet(t);t.forEach((function(t,i){t.setId(e[i]);r.add(t,o)}));i.forEach((function(e){r.connect(e.source,e.target)}))}))}))};y.prototype.allocateId=function(){return this.allocateIds(1)[0]};y.prototype.allocateIds=function(e){var t=[];var i={};this.forEachNode((function(e){i[e.getId()]=true}));while(e>0){do{this.lastAllocatedId++}while(i[this.lastAllocatedId]);t.push(this.lastAllocatedId);e--}return t};y.prototype._findMaxNodeId=function(){var e=0;this.forEachNode((function(t){if(t.getId()>e){e=t.getId()}}));return e};y.prototype.pickNewNodePosition=function(){var t=this.canvas.getVisibleArea();var i=Math.ceil(t.minY/e.CANVAS_GRID_SIZE);var n=Math.floor(t.maxY/e.CANVAS_GRID_SIZE)-(e.AUTO_DROP_STEP_Y>>1);var r=[];var o;this.forEachNode((function(t){var i=t.getCoordinates();r.push({minX:i.x-e.AUTO_DROP_STEP_X+1,minY:i.y-e.AUTO_DROP_STEP_Y+1,maxX:i.x+e.AUTO_DROP_STEP_X-1,maxY:i.y+e.AUTO_DROP_STEP_Y-1})}));var a=function(e,t){if(t<i||t>n){return false}var o=!r.some((function(i){return!(e<i.minX||e>i.maxX||t<i.minY||t>i.maxY)}));if(o){return{x:e,y:t}}return false};var s=function(){for(var e=0;e+1<arguments.length;e+=2){var t=a(arguments[e],arguments[e+1]);if(t){return t}}return false};var l=Math.round((t.minX+t.maxX-e.NODE_SIZE)/2/e.CANVAS_GRID_SIZE);var u=Math.round((t.minY+t.maxY-e.NODE_SIZE)/2/e.CANVAS_GRID_SIZE);o=s(l,u);if(o){return o}var c=l;var d=l;var f=u;var p=u;var h=0;while(true){o=s(c-e.AUTO_DROP_STEP_X,u,l,f-e.AUTO_DROP_STEP_Y,l,p+e.AUTO_DROP_STEP_Y,d+e.AUTO_DROP_STEP_X,u);if(o){return o}for(var g=1;g<=h;g++){var m=g*e.AUTO_DROP_STEP_X;var v=g*e.AUTO_DROP_STEP_Y;o=s(c-e.AUTO_DROP_STEP_X,u-v,c-e.AUTO_DROP_STEP_X,u+v,l-m,f-e.AUTO_DROP_STEP_Y,l+m,f-e.AUTO_DROP_STEP_Y,l-m,p+e.AUTO_DROP_STEP_Y,l+m,p+e.AUTO_DROP_STEP_Y,d+e.AUTO_DROP_STEP_X,u-v,d+e.AUTO_DROP_STEP_X,u+v);if(o){return o}}o=s(c-e.AUTO_DROP_STEP_X,f-e.AUTO_DROP_STEP_Y,c-e.AUTO_DROP_STEP_X,p+e.AUTO_DROP_STEP_Y,d+e.AUTO_DROP_STEP_X,f-e.AUTO_DROP_STEP_Y,d+e.AUTO_DROP_STEP_X,p+e.AUTO_DROP_STEP_Y);if(o){return o}c-=e.AUTO_DROP_STEP_X;d+=e.AUTO_DROP_STEP_X;f-=e.AUTO_DROP_STEP_Y;p+=e.AUTO_DROP_STEP_Y;h++}};y.prototype.getCenterPosition=function(){var t=this.canvas.getVisibleArea();var i=Math.round((t.minX+t.maxX-e.NODE_SIZE)/2/e.CANVAS_GRID_SIZE);var n=Math.round((t.minY+t.maxY-e.NODE_SIZE)/2/e.CANVAS_GRID_SIZE);return{x:i,y:n}};y.prototype.getLinkedFilledStartNodes=function(t){return _.compact(this.getNodeIncomingChains(t).map((function(t){return _.find(t,(function(t){return t.getType()===e.NODE_TYPE_START}))}))).filter((function(e){return e.isFilled()}))};y.prototype.isAutoOptimizationDecisionAllowed=function(t){const i=this.getLinkedFilledStartNodes(t);if(i.length===0){return true}return i.every((function(t){return e.constants.startTypeEvent!==t.data.startType}))};y.prototype.isAllLinkedFilledStartsHasDateType=function(t){const i=this.getLinkedFilledStartNodes(t);return!!i.length&&i.every((function(t){return e.constants.startTypeDate===t.data.startType}))};y.prototype.autofillStopNodesIfPossible=function(){const t=this;this.getNodesByTypes([e.NODE_TYPE_STOP]).forEach((function(e){t.autofillAutomaticEndIfPossible(e)}))};y.prototype.autofillAutomaticEndIfPossible=function(t){if(!this.isAllLinkedFilledStartsHasDateType(t)){return}t.data.endType=e.constants.endTypeAutomatic;t.setFilled(true);this.updateNodeTitle(t,true)};y.prototype._possibleToAutoConvertMailingsTypeToActionBased=function(t){const i=this.getLinkedFilledStartNodes(t);return!!i.length&&i.every((function(t){return e.constants.startTypeEvent===t.data.startType&&"EVENT_REACTION"===t.data.event}))};y.prototype._possibleToAutoConvertMailingsTypeToDateBased=function(t){const i=this.getLinkedFilledStartNodes(t);return!!i.length&&i.every((function(t){return e.constants.startTypeEvent===t.data.startType&&"EVENT_DATE"===t.data.event}))};y.prototype.autoConvertMailingNodesTypeIfPossible=function(){const t=this;const i=[e.NODE_TYPE_MAILING,e.NODE_TYPE_ACTION_BASED_MAILING,e.NODE_TYPE_DATE_BASED_MAILING];this.getNodesByTypes(i).forEach((function(e){const i=t._getAutoConvertedMailingTypeIfPossible(e);if(e.type===i){return}e.type=i;if(e.isFilled()){e.data.mailingId=0;e.setFilled(false);t.updateNodeTitle(e,true)}t._updateNodeImages(e)}))};y.prototype._getAutoConvertedMailingTypeIfPossible=function(t){if(this.isAllLinkedFilledStartsHasDateType(t)){return e.NODE_TYPE_MAILING}if(this._possibleToAutoConvertMailingsTypeToActionBased(t)){return e.NODE_TYPE_ACTION_BASED_MAILING}if(this._possibleToAutoConvertMailingsTypeToDateBased(t)){return e.NODE_TYPE_DATE_BASED_MAILING}return t.type};y.prototype.allocateSpaceForSnippet=function(t){var i=this;function n(t,i){var n=t.getCoordinates();var r=i.getCoordinates();return Math.abs(n.x-r.x)<e.AUTO_DROP_STEP_X&&Math.abs(n.y-r.y)<e.AUTO_DROP_STEP_Y}function o(e,t){return e.some((function(e){return t.some((function(t){return n(e,t)}))}))}function a(e){var t=0,i=0,n=0,r=0;e.forEach((function(e){t=Math.min(t,e.getX());i=Math.max(i,e.getX());n=Math.min(n,e.getY());r=Math.max(r,e.getY())}));return{x:(i-t)/2,y:(r-n)/2}}function s(t,i){if(Math.abs(t.x-i.x)>=Math.abs(t.y-i.y)){return t.x<i.x?{x:-e.AUTO_DROP_STEP_X,y:0}:{x:e.AUTO_DROP_STEP_X,y:0}}else{return t.y<i.y?{x:0,y:-e.AUTO_DROP_STEP_Y}:{x:0,y:e.AUTO_DROP_STEP_Y}}}function l(e,t){e.forEach((function(e){var i=e.getCoordinates();e.setCoordinates(i.x+t.x,i.y+t.y)}))}if(t.length){var u=this.getNodes();var c=u.map((function(e){return{node:e,coordinates:e.getCoordinates(),dragMode:i.getCurrentDragMode()}}));var d=a(t);var f=r.detectGroups(this.getVertices()).map((function(e){var t=e.getNodes();return{nodes:t,moveDirection:s(a(t),d)}}));f.forEach((function(e){if(o(e.nodes,t)){var i=e.moveDirection;var n=e.nodes.slice(0);var r=t.slice(0);var a=f.filter((function(t){return t!==e}));do{l(n,i);var s;do{s=false;a=a.filter((function(e){if(o(n,e.nodes)){if(e.moveDirection.x==i.x&&e.moveDirection.y==i.y){l(e.nodes,i);Array.prototype.push.apply(n,e.nodes);s=true}else{Array.prototype.push.apply(r,e.nodes)}return false}else{return true}}))}while(s)}while(o(n,r))}}));c=c.filter((function(e){var t=e.node.getCoordinates();var i=e.coordinates;return t.x!=i.x||t.y!=i.y}));if(c.length){this.undoManager.operation("nodeMoved",c)}}};y.prototype.allocateSpaceForSupplement=function(t,i){var n=[];var r=function(e,t){return!n.some((function(i){return!(e<i.minX||e>i.maxX||t<i.minY||t>i.maxY)}))};this.forEachNode((function(t){var i=t.getCoordinates();n.push({minX:i.x-e.AUTO_DROP_STEP_X+1,minY:i.y-e.AUTO_DROP_STEP_Y+1,maxX:i.x+e.AUTO_DROP_STEP_X-1,maxY:i.y+e.AUTO_DROP_STEP_Y-1})}));var o=0;var a=0;switch(i){case e.LEFT:default:o=-1;break;case e.RIGHT:o=+1;break;case e.TOP:a=-1;break;case e.BOTTOM:a=+1;break}var s=t.getX()+e.AUTO_DROP_STEP_X*o;var l=t.getY()+e.AUTO_DROP_STEP_Y*a;while(!r(s,l)){s+=o;l+=a}return{x:s,y:l}};y.prototype.allocateSpaceForIncomingSupplement=function(t){var i=this.getAnchorsInUse(t);var n=e.LEFT;if(!i[e.LEFT]&&i[e.TOP]){n=e.TOP}return this.allocateSpaceForSupplement(t,n)};y.prototype.allocateSpaceForOutgoingSupplement=function(t){var i=this.getAnchorsInUse(t);var n=e.RIGHT;if(!i[e.RIGHT]&&i[e.BOTTOM]){n=e.BOTTOM}return this.allocateSpaceForSupplement(t,n)};y.prototype.add=function(t,n){var r=this;var o=t.get$();if(!t.getId()){t.setId(this.allocateId())}t.appendTo(this.$container,this.$titlesContainer,n);t.setInteractionEnabled(this.editable);t.updateCommentLabels();this.instance.makeTarget(o,{anchor:t.getAnchors()});this.instance.makeSource(o,{anchor:t.getAnchors(),filter:".node-connect-button img"});this.initDraggableOptions(o);var a;o.on({mousedown:function(n){if(n.button===e.MOUSE_BUTTON_MIDDLE){if(r.editable){r.undoManager.transaction((function(){r.deleteNode(o)}))}}else{t.wasDragging=false;a=i.isSelected(o);if(!a){if(r.isChainMode()){if(!r.isChainSourceSelected()){r.setNodeSelected(o,true);i.setChainSource(o,true)}else{var s=r.getChainSource();_.defer((function(){r.undoManager.transaction((function(){var e=r.connect(i.get(s),t);if(e){r.deselectAll();r.setNodeSelected(o,true);i.setChainSource(o,true)}else if(e===false){workflowNotAllowedConnectionDialogHandler.showDialog()}}))}))}}else if(!n.shiftKey&&!n.ctrlKey){r.deselectAll();r.setNodeSelected(o,true)}else{r.setNodeSelected(o,true)}}}v.blurInputFields()},mouseup:function(e){if(a&&!t.wasDragging){if(r.isChainMode()){r.setNodeSelected(o,false);i.setChainSource(o,false)}else if(e.shiftKey||e.ctrlKey){r.setNodeSelected(o,false)}else{r.deselectAll();r.setNodeSelected(o,true)}}},dblclick:function(){r.editIcon(t)},mouseenter:function(){t.setHovered(true)},mouseleave:function(){t.setHovered(false)}});this.undoManager.operation("nodeAdded",t);this.updateMinimap();this.updateFootnotes()};y.prototype.supplement=function(t,n,r){var o=this;if(t.isFilled()){if(e.NODE_TYPES_MAILING.includes(t.getType())&&!d.isPausedWorkflow()){const e=this._findFinalParameterNode(t);if(e){this._fillOptimizationFinalMailingIfPossible(e)}n.trySupplementChain(this.getFirstIncomingChain(t),r,(function(e){o.batch((function(){var t=e[0];for(var i=1;i<e.length;i++){var n=e[i];if(n.isAppended()){t=n}else{for(var r=i;r<e.length;r++){var a=e[r];if(a.isAppended()){o.deleteConnectionBetween(a.get$(),t.get$());t=a;i=r;break}}}}for(var i=1;i<e.length;i++){var n=e[i];if(!n.isAppended()){var s=e[i-1];var l=o.allocateSpaceForIncomingSupplement(s);n.setCoordinates(l.x,l.y);o.add(n);o.connect(n,s);if(i+1<e.length&&e[i+1].isAppended()){o.connect(e[i+1],n)}d.resave(n)}}}))}));this.autoConvertMailingNodesTypeIfPossible()}else if(e.NODE_TYPE_RECIPIENT==t.getType()){this.processRecipientsChains()}else if(e.NODE_TYPE_PARAMETER===t.getType()){const e=o._findFinalParameterNode(t);if(e){const i=o._findTestMailingsParamsNodes(e);const n=t.getData().value;o._setParameterNodesValue(i,n);const r=n*i.length;d.modify(e,(function(e){e.setFilled(true);e.setEditable(false);e.getData().value=100-r}))}}else if(e.NODE_TYPE_START==t.getType()){this.autofillStopNodesIfPossible();this.autoConvertMailingNodesTypeIfPossible()}}else{if(e.NODE_TYPE_IMPORT==t.getType()){var a=!this.hasNodeOutgoingConnections(t);if(a){var s=i.create(e.NODE_TYPE_DEADLINE);var l=this.allocateSpaceForOutgoingSupplement(t);s.setCoordinates(l.x,l.y);this.add(s);this.connect(t,s)}}}};y.prototype.isAutoOptimizationWorkflow=function(t){const i=this._findFinalParameterNode(t);if(!i){return false}const n=this._findOptimizationFinalMailingNode(i);if(!n){return false}const r=this.getFirstIncomingChain(i).find((function(t){return t.getType()===e.NODE_TYPE_DECISION}));return!!r&&r.data.decisionType===e.constants.decisionTypeAutoOptimization};y.prototype.getParametersOptions=function(t){const i=this._findFinalParameterNode(t);var n=e.SPLIT_DEFAULT_PARAMETERS;if(i){const e=this._findTestMailingsParamsNodes(i);const t=e.length+1;const r=Math.floor(100/t);n=n.filter((function(e){return e<=r}))}return n.map((function(e){return{id:e,text:e}}))};y.prototype._fillOptimizationFinalMailingIfPossible=function(e){if(!this._isAllOptimizationTestMailingsFilled(e)){return}const t=this._findOptimizationFinalMailingNode(e);const i=t.getTitle();d.modify(t,(function(e){e.setFilled(true)}));t.setTitle(i)};y.prototype._findFinalParameterNode=function(t){const i=this.getNodeOutgoingChains(t);for(var n=0;n<i.length;n++){const t=i[n];const r=t.find((function(t,i){return i>0&&e.NODE_TYPE_PARAMETER===t.getType()}));if(r){return r}}return null};y.prototype._findTestMailingsParamsNodes=function(t){const i=[];this.getNodeIncomingChains(t).forEach((function(t){const n=t.find((function(t,i){return i>0&&e.NODE_TYPE_PARAMETER===t.getType()}));if(n){i.push(n)}}));return i};y.prototype._findOptimizationFinalMailingNode=function(t){const i=this.getFirstOutgoingChain(t);return i.find((function(t){return t.getType()===e.NODE_TYPE_MAILING&&!t.isEditable()}))};y.prototype._isAllOptimizationTestMailingsFilled=function(t){const i=this._findTestMailingsParamsNodes(t);for(var n=0;n<i.length;n++){const t=i[n];const r=this.getFirstOutgoingChain(t);if(r.length<=1){return false}const o=r[1];if(o.getType()!==e.NODE_TYPE_MAILING||!o.isFilled()||!o.isEditable()){return false}}return true};y.prototype._setParameterNodesValue=function(e,t){e.forEach((function(e){d.modify(e,(function(e){e.setFilled(true);e.getData().value=t}))}))};y.prototype.processRecipientsChains=_.debounce((function(){var t=this._findInitialRecipientsNodes();var i=this;t.forEach((function(t){t.setInRecipientsChain(false);i.updateNodeTitle(t);var n=i.getNodeOutgoingChains(t);n.forEach((function(n){var r=1;for(;r<n.length;++r){var o=n[r];if(o.type!=e.NODE_TYPE_RECIPIENT){break}o.data.mailinglistId=t.data.mailinglistId;o.setInRecipientsChain(true);i.updateNodeTitle(o)}}))}))}),150);y.prototype._findInitialRecipientsNodes=function(){var t=this.getNodesByTypes([e.NODE_TYPE_RECIPIENT]);var i=this.getConnections();var n=[];i.filter((function(t){return t.target.type==e.NODE_TYPE_RECIPIENT&&t.source.type==e.NODE_TYPE_RECIPIENT})).forEach((function(e){n.push(e.target.id)}));return t.filter((function(e){return!n.includes(e.id)}))};y.prototype.getAnchorsInUse=function(e){var t=e.get$();return i.getAnchorsInUse(this.instance.getEndpoints(t[0]))};y.prototype.positionTitle=function(e){o.positionTitle(e,this.getAnchorsInUse(e))};y.prototype.updateNodeTitle=function(e,t){var i=this.isNormalWorkflow();o.updateTitle(e,i,t);this.positionTitle(e)};y.prototype.updateNodeTitles=_.throttle((function(e){var t=this;var i=this.isNormalWorkflow();this.forEachNode((function(n){o.updateTitle(n,i,e);t.positionTitle(n)}))}),150);y.prototype.positionTitles=_.throttle((function(){var e=this;this.forEachNode((function(t){e.positionTitle(t)}))}),150);y.prototype.setMinimapEnabled=function(e){this.canvas.setMinimapEnabled(e)};y.prototype.updateMinimap=_.debounce((function(){this.canvas.updateMinimap()}),100);y.prototype.isChainSourceSelected=function(){return this.$container.find(".node.chain-mode-source").exists()};y.prototype.getChainSource=function(){return this.$container.find(".node.chain-mode-source")};y.prototype.setNodeSelected=function(e,t){if(t){this.instance.addToDragSelection(e)}else{this.instance.removeFromDragSelection(e)}i.setSelected(e,!!t);this.onSelectionChanged()};y.prototype.isConnectionPossible=function(e,t){if(e instanceof i&&t instanceof i){if(e===t){return false}return!this.hasConnection((function(i){return i.source===e&&i.target===t||i.source===t&&i.target===e}))}return false};y.prototype._updateNodeImages=function(t){const i=e.ICONS_CONFIG[t.type].icons;t.get$().find(".active-node-image").attr("src",e.constants.imagePath+i.active);t.get$().find(".inactive-node-image").attr("src",e.constants.imagePath+i.inactive)};y.prototype.isConnectionAllowed=function(t,i){var n=new s(e.CONNECTION_CONSTRAINTS);var r=this;var o={node:t,type:t.getType(),connections:{}};var a={node:i,type:i.getType(),connections:{}};Object.defineProperty(o.connections,"incoming",{get:g.caching(r.getNodeIncomingConnections,r,t)});Object.defineProperty(o.connections,"outgoing",{get:g.caching(r.getNodeOutgoingConnections,r,t)});Object.defineProperty(a.connections,"incoming",{get:g.caching(r.getNodeIncomingConnections,r,i)});Object.defineProperty(a.connections,"outgoing",{get:g.caching(r.getNodeOutgoingConnections,r,i)});if(o.type==e.NODE_TYPE_STOP&&!this.hasNodeIncomingConnections(t)){o.type=e.NODE_TYPE_START;o.node.type=e.NODE_TYPE_START;r._updateNodeImages(o.node)}if(a.type==e.NODE_TYPE_START&&!this.hasNodeOutgoingConnections(i)){a.type=e.NODE_TYPE_STOP;a.node.type=e.NODE_TYPE_STOP;r._updateNodeImages(a.node)}return n.check(o,a)};y.prototype.connect=function(t,i,n){if(this.isConnectionPossible(t,i)){if(!this.isConnectionAllowed(t,i)){return false}if(t.getType()===e.NODE_TYPE_STOP){t.setType(e.NODE_TYPE_START)}if(i.getType()===e.NODE_TYPE_START){i.setType(e.NODE_TYPE_STOP)}if(n!==true){this.instance.connect({source:t.get$(),target:i.get$()})}return true}else{return null}};y.prototype.deselectAll=function(){this.$container.find(".node.ui-selected").removeClass("ui-selected");this.instance.clearDragSelection();this.clearSelectedSource();this.onSelectionChanged()};y.prototype.clearSelectedSource=function(){this.$container.find(".node.chain-mode-source").removeClass("chain-mode-source")};y.prototype.alignAll=function(){var e=this;var t=this.getNodes();var i={};t.forEach((function(e){i[e.getId()]=e.getCoordinates()}));this.batch((function(){u.align(e.getVertices())}));var n=t.filter((function(e){var t=i[e.getId()];return t.x!=e.getX()||t.y!=e.getY()})).map((function(t){return{node:t,coordinates:i[t.getId()],dragMode:e.getCurrentDragMode()}}));if(n.length){e.undoManager.transaction((function(){e.undoManager.operation("nodeMoved",n)}));this.positionTitles();this.updateMinimap()}};y.prototype.deleteSelected=function(){this.deleteNodes(this.getSelectedNodes())};y.prototype.deleteNode=function(t){var n=this;if(t instanceof i){}else{t=i.get(t)}if(t.isAppended()){var r=[t];switch(t.getType()){case e.NODE_TYPE_IMPORT:this.getNodeOutgoingConnections(t).forEach((function(t){if(e.NODE_TYPE_DEADLINE==t.target.getType()){r.push(t.target)}}));break;case e.NODE_TYPE_DEADLINE:this.getNodeIncomingConnections(t).forEach((function(t){if(e.NODE_TYPE_IMPORT==t.source.getType()){r.push(t.source)}}));break}r.forEach((function(e){n.undoManager.operation("nodeDeleted",e);n.instance.remove(e.get$());e.remove()}));this.onSelectionChanged();this.positionTitles();this.updateFootnotes();this.updateMinimap()}};y.prototype.deleteAllNodes=function(){this.deleteNodes(this.getNodes())};y.prototype.deleteNodes=function(e){var t=this;this.undoManager.transaction((function(){t.batch((function(){e.forEach((function(e){t.deleteNode(e)}))}))}))};y.prototype.disconnectSelected=function(){this.disconnectNodes(this.getSelectedNodes())};y.prototype.disconnectNode=function(e){var t=this;this.getNodeConnections(e).forEach((function(e){t.deleteConnection(e)}))};y.prototype.disconnectNodes=function(e){var t=this;this.batch((function(){e.forEach((function(e){t.disconnectNode(e)}))}))};y.prototype.canDeleteConnection=function(t){var n,r;if(t.origin){n=t.source;r=t.target}else{n=i.get(t.source);r=i.get(t.target)}return!(e.NODE_TYPE_IMPORT==n.getType()&&e.NODE_TYPE_DEADLINE==r.getType())};y.prototype.deleteConnection=function(e){if(this.canDeleteConnection(e)){if(e.origin){this.instance.deleteConnection(e.origin)}else{this.instance.deleteConnection(e)}return true}return false};y.prototype.deleteConnectionBetween=function(e,t){var i=this.getConnectionBetween(e,t);if(i){this.deleteConnection(i)}};y.prototype.connectSelected=function(){return this.connectNodes(this.getSelectedNodes())};y.prototype.connectBetweenSelected=function(){var e=this.getSelectedNodes$();if(e.length>=2){return this.connectNodes(this.getNodesBetweenSelected(e[0],e[1]))}else{return false}};y.prototype.getNodesBetweenSelected=function(e,t){var n=i.getBox(e);var r=i.getBox(t);var o={minX:Math.min(n.minX,r.minX),maxX:Math.max(n.maxX,r.maxX),minY:Math.min(n.minY,r.minY),maxY:Math.max(n.maxY,r.maxY)};return this.getNodes().filter((function(e){return i.isInRegion(e.get$(),o)}))};y.prototype.connectNodes=function(e){var t=this;var i=e.sort((function(e,t){return e.getX()<t.getX()?-1:e.getX()>t.getX()?1:e.getY()<t.getY()?-1:e.getY()>t.getY()?1:0}));var n=false;this.undoManager.transaction((function(){t.batch((function(){for(var e=0;e<i.length-1;e++){if(t.connect(i[e],i[e+1])){n=true}}}))}));return n};y.prototype.getSelectedNodes$=function(){var e=[];this.$container.find(".node.ui-selected").each((function(t,i){e.push($(i))}));return e};y.prototype.getSelectedNodes=function(){return this.getSelectedNodes$().map((function(e){return i.get(e)}))};y.prototype.getSelectionSize=function(){return this.$container.find(".node.ui-selected").length};y.prototype.onSelectionChanged=function(){v.setDeleteButtonEnabled(this.getSelectionSize()>0)};y.prototype.setOnInitialized=function(e){const t=this;const i=function(){e.apply(this);t.lastAllocatedId=t._findMaxNodeId()};this.instance.ready(i)};y.prototype.setOnZoom=function(e){this.canvasZoomHandler=e};y.prototype.setEditable=function(e){e=!!e;if(this.editable!==e){this.editable=e;this.draggableButtons.setEnabled(e);this.$viewport.selectable(e?"enable":"disable");this.forEachNode((function(t){t.setInteractionEnabled(e)}))}};y.prototype.getZoom=function(){return this.instance.getZoom()};y.prototype.setZoom=function(e){this.scale=e;this.canvas.setZoom(e);this.instance.setZoom(e);this.updateBackgroundCellSize(e);this.moveGridBackground(this.canvas.getPosition())};y.prototype.toggleGrid=function(){this.changeGridBackgroundVisibility();this.dragMode=this.isGridDisplayed()?e.GRID_CELL_DRAG_MODE:e.DEFAULT_DRAG_MODE;this.adaptToNewDragMode()};y.prototype.changeGridBackgroundVisibility=function(){this.$gridBackground.toggleClass("hidden")};y.prototype.convertNodeCoordinates=function(e){const t=e.getCoordinates();this.convertCoordinates(t);e.setCoordinates(t.x,t.y)};y.prototype.convertCoordinates=function(t){const i=e.NODE_SIZE/e.CANVAS_DEFAULT_GRID_SIZE;if(this.getCurrentDragMode()===e.GRID_CELL_DRAG_MODE){t.x=t.x/i;t.y=t.y/i}else{t.x=t.x*i;t.y=t.y*i}};y.prototype.adaptToNewDragMode=function(){this.adaptPropertiesToDragMode();const e=this;this.getNodes$().each((function(){e.instance.destroyDraggable(this);e.initDraggableOptions($(this))}));this.forEachNode((function(t){e.convertNodeCoordinates(t)}))};y.prototype.adaptPropertiesToDragMode=function(){if(this.getCurrentDragMode()===e.GRID_CELL_DRAG_MODE){e.CANVAS_GRID_SIZE=e.NODE_SIZE;e.AUTO_ALIGN_STEP_X=e.GRID_AUTO_ALIGN_STEP_X;e.AUTO_ALIGN_STEP_Y=e.GRID_AUTO_ALIGN_STEP_Y}else{e.CANVAS_GRID_SIZE=e.CANVAS_DEFAULT_GRID_SIZE;e.AUTO_ALIGN_STEP_X=e.DEFAULT_AUTO_ALIGN_STEP_X;e.AUTO_ALIGN_STEP_Y=e.DEFAULT_AUTO_ALIGN_STEP_Y}};y.prototype.initDraggableOptions=function(t){const n=this;const r=i.get($(t));this.instance.draggable(t,{distance:e.CANVAS_GRID_SIZE/2,grid:[e.CANVAS_GRID_SIZE,e.CANVAS_GRID_SIZE],rightButtonCanDrag:false,canDrag:function(){return n.editable},start:function(){r.wasDragging=true;if(n.drag==null){var e=[];var o=[];r.setPopoverEnabled(false);n.forEachNode$((function(t){if(i.isSelected(t)){e.push(t);i.get(t).setTitleEnabled(false)}else{o.push(i.getCollisionBox(t))}}));n.drag={lead:t,selected:e,unselected:o}}},stop:function(){n.drag.lead.removeClass("js-no-drop");n.drag.selected.forEach((function(e){i.get(e).setTitleEnabled(true);e.removeClass("js-collision-detected")}));r.setPopoverEnabled(true)},drag:function(){if(n.drag&&t==n.drag.lead){var e=false;n.drag.selected.forEach((function(t){var r=i.getCollisionBox(t);var o=n.drag.unselected.some((function(e){return i.detectBoxCollision(e,r)}));t.toggleClass("js-collision-detected",o);if(o){e=true}}));n.drag.lead.toggleClass("js-no-drop",e)}},revert:function(){if(n.drag){var e=false;n.undoManager.transaction((function(){var t=n.getZoom();e=n.drag.selected.some((function(e){var t=i.getCollisionBox(e);return n.drag.unselected.some((function(e){return i.detectBoxCollision(e,t)}))}));if(!e){n.undoManager.operation("nodeMoved",n.drag.selected.map((function(e){var t=i.get(e);return{node:t,coordinates:t.getCoordinates(),dragMode:n.getCurrentDragMode()}})));n.drag.selected.forEach((function(e){i.get(e).updateCoordinates(t)}))}n.drag=null;n.updateOverlays();n.positionTitles();n.updateMinimap()}));return e}else{return false}}})};y.prototype.getCurrentDragMode=function(){return this.dragMode};y.prototype.isGridDisplayed=function(){return!this.$gridBackground.hasClass("hidden")};y.prototype.updateBackgroundCellSize=function(t){const i=e.NODE_SIZE*t;this.$gridBackground.css("background-size",i+"px "+i+"px")};y.prototype.setPanningEnabled=function(e){this.canvas.setPanningEnabled(e);this.$viewport.toggleClass("js-panning",!!e);if(e){this.$viewport.selectable("disable")}else if(this.editable){this.$viewport.selectable("enable")}};y.prototype.setMouseWheelZoomEnabled=function(e){this.canvas.setMouseWheelZoomEnabled(e)};y.prototype.setMultiConnectionEnabled=function(e){this.multiConnectionEnabled=e};y.prototype.setChainModeEnabled=function(e){this.chainModeEnabled=e;this.clearSelectedSource();if(e){var t=this.getSelectedNodes$().shift();if(t){this.deselectAll();this.setNodeSelected(t,true);i.setChainSource(t,true)}}};y.prototype.isChainMode=function(){return this.chainModeEnabled===true};y.prototype.updateOverlays=_.debounce((function(){this.forEachNode((function(e){if(i.isDecisionNode(e)){this.updateDecisionBranchesOverlays(e)}}))}),100);y.prototype.updateDecisionBranchesOverlays=function(e){var t=this.getNodeOutgoingConnections(e);if(i.isBranchingDecisionNode(e)){var n=i.getDecisionBranches(t);if(n){var r=o.getDecisionBranchesLabels();v.setConnectionLabel(n.positive,r.positive);v.setConnectionLabel(n.negative,r.negative)}else{t.forEach((function(e){v.setConnectionLabel(e,"?")}))}}else{t.forEach((function(e){v.setConnectionLabel(e,false)}))}};y.prototype.editIcon=function(e){if(this.drag==null){if(e){if(e.editable){this.deselectAll();d.showEditDialog(e,m.checkActivation(!i.isMailingNode(e)))}}else{var t=this.getSelectedNodes$();if(t.length==1){this.deselectAll();const e=i.get(t[0]);d.showEditDialog(e,m.checkActivation(!i.isMailingNode(e)))}}}};y.prototype.editIconComment=function(e){d.showIconCommentDialog(e)};y.prototype.serializeIcons=function(){var e=this.getNodes().map((function(e){return e.serialize()}));var t={};this.getConnections().forEach((function(e){var i=t[e.source.id];if(!i){i=[]}i.push(e);t[e.source.id]=i}));e.forEach((function(e){var i=t[e.id];if(i){e.connections=i.map((function(e){return{targetIconId:e.target.id}}))}else{e.connections=[]}}));return JSON.stringify(e)};y.prototype.undo=function(){this.undoManager.undo()};y.prototype.getUndoManager=function(){return this.undoManager};y.prototype.enlargeEditor=function(e,t){var i=this;var n=_.isFunction(e)?e:_.noop;var r=_.isFunction(t)?t:_.noop;var o=AGN.Lib.Confirm.createFromTemplate({},"enlarged-editor-template");$("#modalCampaignEditorContainer").append($("#campaignEditorBody"));i.$viewport.selectable("option","appendTo","#modalCampaignEditorContainer");o.done(n).fail(r).always((function(){$("#pageCampaignEditorContainer").append($("#campaignEditorBody"));i.$viewport.selectable("option","appendTo","body")}))};y.prototype.hasUnsavedChanges=function(){return this.getUndoManager().canUndo()};y.prototype.fitPdfPage=function(){this.canvas.fitPdfPage(e.PDF_SIZE,e.PDF_ORIENTATION)};AGN.Lib.WM.Editor=y})();agGrid.BaseFilter.prototype.generateTemplate=function(){var e=this.translate.bind(this);var t=this.createConditionBody(0);var i=!this.acceptsBooleanLogic()?t:this.wrapCondition(t);return"<div>\n                    <div class='ag-filter-body-wrapper'>"+i+'</div>\n                    <div class="ag-filter-apply-panel" id="applyPanel">\n                        <a href="#" id="clearButton">'+e("clearFilter")+'</a>\n                        <button type="button" id="applyButton">'+e("applyFilter")+"</button>\n                    </div>\n                </div>"};agGrid.BaseFilter.prototype.createConditionTemplate=function(e){return'<div class="ag-filter-condition">\n            <div class="ag-filter-condition-type radio"><label class="" for="andId"><input id="andId" type="radio" class="and" name="booleanLogic" value="AND" checked="checked" /> AND</label>\n            <label  class="" for="orId"><input id="orId" type="radio" class="or" name="booleanLogic" value="OR" /> OR</label></div>\n            <div>'+this.createConditionBody(e)+"</div>\n        </div>"};agGrid.TextFilter.prototype.bodyTemplate=function(e){var t=this.translate.bind(this);var i=e==0?"filterText":"filterConditionText";return'<div class="ag-filter-body">\n            <input class="ag-filter-filter form-control" id='+i+' type="text" placeholder="'+t("filterOoo","Filter...")+'"/>\n        </div>'};agGrid.TextFilter.prototype.generateFilterHeader=function(e){var t=this;var i=this.getApplicableFilterTypes();var n=this.filterParams.filterOptions;var r=n?n:i;var o=r.map((function(e){var i=t.translate(e);return'<option value="'+e+'">'+i+"</option>"}));var a=o.length==1?"disabled":"";var s=e==0?"filterType":"filterConditionType";return o.length<=0?"":'<div>\n                <select class="ag-filter-select form-control" id="'+s+'" '+a+">\n                    "+o.join("")+"\n                </select>\n            </div>"};agGrid.NumberFilter.prototype.bodyTemplate=function(e){var t=this.translate.bind(this);var i=e==0?"filterText":"filterConditionText";var n=e==0?"filterNumberToPanel":"filterNumberToPanelCondition";var r=e==0?"filterToText":"filterToConditionText";return'<div class="ag-filter-body">\n            <div>\n                <input class="ag-filter-filter form-control" id="'+i+'" type="text" placeholder="'+t("filterOoo")+'"/>\n            </div>\n             <div class="ag-filter-number-to" id="'+n+'">\n                <input class="ag-filter-filter form-control" id="'+r+'" type="text" placeholder="'+t("filterOoo")+'"/>\n            </div>\n        </div>'};agGrid.NumberFilter.prototype.generateFilterHeader=agGrid.TextFilter.prototype.generateFilterHeader;agGrid.TextFilter.prototype.createConditionTemplate=function(e){return'<div class="ag-filter-condition">\n            <div class="ag-filter-condition-type radio"><label class="" for="andId"><input id="andId" type="radio" class="and" name="booleanLogic" value="AND" checked="checked" /> AND</label>\n            <label  class="" for="orId"><input id="orId" type="radio" class="or" name="booleanLogic" value="OR" /> OR</label></div>\n            <div>'+this.createConditionBody(e)+"</div>\n        </div>"};(function(){function e(e,t){if(typeof e==="string"&&typeof t==="string"){return e.toLowerCase().localeCompare(t.toLowerCase())}return e.localeCompare(t)}AGN.Lib.TableCaseInsensitiveComparator=e})();(function(){var e=function(){};function t(e,t){if(e.value){if(!e.valueFormatted){e.valueFormatted=moment(e.value).format(t)}return e.valueFormatted}else{return""}}e.prototype.init=function(e){this.eGui=AGN.Lib.TableCellWrapper(e.data.show);if(e.optionDateFormat){this.format=e.optionDateFormat}else{this.format="DD.MM.YYYY";if(e.optionShowTime){if(e.optionShowSeconds){this.format+=" HH:mm:ss"}else{this.format+=" HH:mm"}}}this.eGui.innerHTML=t(e,this.format)};e.prototype.getGui=function(){return this.eGui};e.prototype.refresh=function(e){this.eGui.innerHTML=t(e,this.format);return true};e.prototype.destroy=function(){};AGN.Opt.TableCellRenderers["DateCellRenderer"]=e})();(function(){var e=function(){};e.prototype.init=function(e){this.eGui=document.createElement("div");this.eGui.innerHTML='<div class="ag-filter">'+"  <div>"+'    <div class="ag-filter-body-wrapper">'+'      <div class="ag-filter-body">'+'        <label class="">'+t("tables.from")+"</label>"+'        <input class="ag-filter-filter form-control js-datepicker js-datepicker-right" id="filterBegin" type="text" placeholder="">'+"      </div>"+'      <div class="ag-filter-body">'+'        <label class="">'+t("tables.till")+"</label>"+'        <input class="ag-filter-filter form-control js-datepicker js-datepicker-right" id="filterEnd" type="text" placeholder="">'+"      </div>"+"    </div>"+'    <div class="ag-filter-apply-panel" id="applyPanel">'+'      <a href="#" id="clearFilter" class="">'+t("tables.clearFilter")+"</a>"+"    </div>"+"  </div>"+"</div>";this.filterBegin=$(this.eGui).find("#filterBegin");this.filterEnd=$(this.eGui).find("#filterEnd");this.beginDate=undefined;this.endDate=undefined;this.clearFilter=$(this.eGui).find("#clearFilter");this.filterBegin.on("change",this.filterBeginChanged.bind(this));this.filterEnd.on("change",this.filterEndChanged.bind(this));this.clearFilter.on("click",this.filterClear.bind(this));AGN.Lib.CoreInitializer.run("pickadate",$(this.eGui));this.filterActive=false;this.filterChangedCallback=e.filterChangedCallback;this.valueGetter=e.valueGetter};e.prototype.afterGuiAttached=function(){};e.prototype.destroy=function(){this.filterBegin.off("change",this.filterBeginChanged.bind(this));this.filterEnd.off("change",this.filterEndChanged.bind(this));this.clearFilter.off("click",this.filterClear.bind(this))};e.prototype.filterBeginChanged=function(){var e=this.filterEnd.data("pickadate");e.set("min",this.filterBegin.val());this.beginDate=this.filterBegin.data("pickadate").get("select").pick;this.filterActive=this.beginDate||this.endDate;this.filterChangedCallback()};e.prototype.filterEndChanged=function(){var e=this.filterBegin.data("pickadate");e.set("max",this.filterEnd.val());this.endDate=this.filterEnd.data("pickadate").get("select").pick;this.filterActive=this.beginDate||this.endDate;this.filterChangedCallback()};e.prototype.filterClear=function(){var e,t;this.filterEnd.val(undefined);this.filterBegin.val(undefined);this.beginDate=undefined;this.endDate=undefined;t=this.filterEnd.data("pickadate");t.set("min",false);e=this.filterBegin.data("pickadate");e.set("max",false);this.filterActive=false;this.filterChangedCallback()};e.prototype.getGui=function(){return this.eGui};e.prototype.doesFilterPass=function(e){var t=this.valueGetter(e.node);if(!this.beginDate&&!this.endDate){return true}if(!t){return false}if(this.beginDate&&this.endDate){return t>=this.beginDate&&t<=this.endDate}if(this.beginDate){return t>=this.beginDate}if(this.endDate){return t<=this.endDate}};e.prototype.parseDate=function(e){if(!e){return}return moment(e,t("date.format").toUpperCase()).valueOf()};e.prototype.isFilterActive=function(){return this.filterActive};e.prototype.getModel=function(){};e.prototype.setModel=function(){};AGN.Lib.TableDateFilter=e})();(function(){var e=AGN.Lib.Table,t=AGN.Lib.Confirm,i=AGN.Lib.Page,n=AGN.Lib.Tooltip,r=function(){};function o(e){return e.valueFormatted?e.valueFormatted:e.value}r.prototype.init=function(r){r.eGridCell.classList.add("ag-cell-table-actions");this.eGui=document.createElement("div");this.eGui.innerHTML='<button type="button" class="btn btn-regular btn-alert"><i class="icon icon-trash-o"></i></button>';this.eButton=this.eGui.querySelector(".btn");if(r.colDef["button-tooltip"]){n.createTip($(this.eButton),r.colDef["button-tooltip"])}var a=o(r);if(a){this.eButton.setAttribute("href",a)}else{this.eGui.style.visibility="hidden"}this.eventListener=function(n){var a=this;$.get(o(r)).done((function(n){var o=$(n),s;s=o.all(".modal");if(s.length==1){t.create(n).done((function(t){var i=$(t);e.get($(a)).api.updateRowData({remove:[r.data]});AGN.Lib.RenderMessages(i)}))}else{i.render(n)}}));n.preventDefault();return false};this.eButton.addEventListener("click",this.eventListener)};r.prototype.getGui=function(){return this.eGui};r.prototype.refresh=function(e){var t=o(e);this.eGui.style.visibility=t?"visible":"hidden";this.eButton.dataset.url=t;return true};r.prototype.destroy=function(){this.eButton.removeEventListener("click",this.eventListener)};AGN.Opt.TableCellRenderers["DeleteCellRenderer"]=r})();var cachedTemplates=[];(function(){var e=AGN.Lib.Template;var t=function(){};t.prototype.init=function(t){this.eGui=AGN.Lib.TableCellWrapper(t.data.show);var i;var n=t.templateName;if(cachedTemplates[n]){i=cachedTemplates[n]}else{i=e.prepare(n);cachedTemplates[n]=i}this.eGui.innerHTML=i({value:t.value,entry:t.data})};t.prototype.getGui=function(){return this.eGui};t.prototype.refresh=function(){return false};t.prototype.destroy=function(){};AGN.Opt.TableCellRenderers["MustacheTemplateCellRender"]=t})();(function(){var e=function(){};e.prototype.init=function(e){this.agParams=e;this.eGui=document.createComment("No label")};e.prototype.getGui=function(){return this.eGui};e.prototype.destroy=function(){};AGN.Opt.TableHeaderComponents["NoLabelHeader"]=e})();(function(){var e=function(){};e.prototype.init=function(e){this.gui=AGN.Lib.TableCellWrapper(e.data.show);var t=document.createElement("div");if(e.value){t.innerHTML=e.value}t.style.cssText="text-overflow: ellipsis;"+"overflow: hidden;";this.gui.appendChild(t)};e.prototype.getGui=function(){return this.gui};e.prototype.refresh=function(){return false};AGN.Opt.TableCellRenderers["NotEscapedStringCellRenderer"]=e})();(function(){function e(e,t,i,n,r){e=parseFloat(e);t=parseFloat(t);if(isNaN(e)||isNaN(t)){if(!isNaN(e)){return r?+1:-1}if(!isNaN(t)){return r?-1:+1}return 0}return e-t}AGN.Lib.TableNumberComparator=e})();(function(){var e=AGN.Lib.Table,t=AGN.Lib.Confirm,i=AGN.Lib.Page,n=function(){};function r(e){if(e.deliveryHistoryEnabled){return AGN.url("/recipient/"+e.recipientId+"/mailing/"+e.data.mailingId+"/deliveryHistory.action")}else{return""}}n.prototype.init=function(e){this.eGui=document.createElement("div");var n=r(e);if(!n){this.eGui.innerHTML=e.value}else{e.eGridCell.classList.add("ag-cell-table-actions");this.eGui.innerHTML='<button type="button" class="btn btn-regular "><i class="icon icon-share-square-o"></i><span>'+e.value+"</span></button>";this.eButton=this.eGui.querySelector(".btn");this.eButton.setAttribute("href",n);this.eventListener=function(n){var o=r(e);if(o){$.get(o).done((function(e){var n=$(e),r;r=n.all(".modal");if(r.length==1){t.create(e)}else{i.render(e)}}));n.preventDefault();return false}};this.eButton.addEventListener("click",this.eventListener)}};n.prototype.getGui=function(){return this.eGui};n.prototype.refresh=function(e){if(this.eButton){this.eButton.dataset.url=r(e)}return true};n.prototype.destroy=function(){if(this.eButton){this.eButton.removeEventListener("click",this.eventListener)}};AGN.Opt.TableCellRenderers["RecipientDeliveryInfoRenderer"]=n})();(function(){var e=AGN.Lib.Confirm,t=AGN.Lib.Page,i=function(){};function n(e){if(e.deliveryHistoryEnabled){return AGN.url("/recipient/"+e.recipientId+"/mailing/"+e.data.mailingId+"/successfulDeliveryHistory.action")}else{return""}}i.prototype.init=function(i){this.eGui=document.createElement("div");var r=n(i);if(!r){this.eGui.innerHTML=i.value}else{i.eGridCell.classList.add("ag-cell-table-actions");this.eGui.innerHTML='<button type="button" class="btn btn-regular "><i class="icon icon-share-square-o"></i><span>'+i.value+"</span></button>";this.eButton=this.eGui.querySelector(".btn");this.eButton.setAttribute("href",r);this.eventListener=function(r){var o=n(i);if(o){$.get(o).done((function(i){var n=$(i),r;r=n.all(".modal");if(r.length==1){e.create(i)}else{t.render(i)}}));r.preventDefault();return false}};this.eButton.addEventListener("click",this.eventListener)}};i.prototype.getGui=function(){return this.eGui};i.prototype.refresh=function(e){if(this.eButton){this.eButton.dataset.url=n(e)}return true};i.prototype.destroy=function(){if(this.eButton){this.eButton.removeEventListener("click",this.eventListener)}};AGN.Opt.TableCellRenderers["RecipientSuccessDeliveryInfoRenderer"]=i})();(function(){var e=function(){};e.prototype.init=function(e){this.column=e.colDef.field;this.values=_.sortBy(_.uniq(_.map(e.rowModel.rowsToDisplay,(function(t){return t.data[e.colDef.field]}))));this.labels=_.extend({},e.labels);this.eGui=document.createElement("div");this.eGui.innerHTML='<div class="ag-filter">'+"  <div>"+'    <div class="ag-filter-body-wrapper">'+this.buildOptions()+"    </div>"+'    <div class="ag-filter-apply-panel" id="applyPanel">'+'      <a href="#" id="clearFilter" class="">'+t("tables.clearFilter")+"</a>"+"    </div>"+"  </div>"+"</div>";this.checkBoxes=$(this.eGui).find("input");this.checkedBoxes=[];this.clearFilter=$(this.eGui).find("#clearFilter");this.checkBoxes.on("change",this.checkBoxesChanged.bind(this));this.clearFilter.on("click",this.filterClear.bind(this));this.filterActive=false;this.filterChangedCallback=e.filterChangedCallback;this.valueGetter=e.valueGetter};e.prototype.buildOptions=function(){var e=this.labels;return _.map(this.values,(function(t){var i=e.hasOwnProperty(t)?e[t]:t;return'<div class="ag-filter-body">'+'  <label class="">'+'    <input class="" type="checkbox" value="'+t+'">'+"    "+i+"  </label>"+"</div>"})).join("\n")};e.prototype.afterGuiAttached=function(){};e.prototype.destroy=function(){this.checkBoxes.off("change",this.checkBoxesChanged.bind(this));this.clearFilter.off("click",this.filterClear.bind(this))};e.prototype.checkBoxesChanged=function(){this.valuesFiltered=_.map(_.filter(this.checkBoxes,{checked:true}),(function(e){return e.value}));this.filterActive=this.valuesFiltered.length!==0;this.filterChangedCallback()};e.prototype.filterClear=function(){this.checkBoxes.removeAttr("checked");this.valuesFiltered=[];this.filterActive=false;this.filterChangedCallback()};e.prototype.getGui=function(){return this.eGui};e.prototype.doesFilterPass=function(e){var t=this.valueGetter(e.node);return _.includes(this.valuesFiltered,t)};e.prototype.isFilterActive=function(){return this.filterActive};e.prototype.getModel=function(){};e.prototype.setModel=function(){};AGN.Lib.TableSetFilter=e})();(function(){var e=function(){};e.prototype.init=function(e){this.gui=AGN.Lib.TableCellWrapper(e.data.show);var t=document.createElement("div");if(e.value){t.appendChild(document.createTextNode(e.value))}t.style.cssText="text-overflow: ellipsis;"+"overflow: hidden;";this.gui.appendChild(t)};e.prototype.getGui=function(){return this.gui};e.prototype.refresh=function(){return false};AGN.Opt.TableCellRenderers["StringCellRenderer"]=e})();(function(){AGN.Lib.TableCellWrapper=function(e){if(e){var t=document.createElement("a");t.href=e;t.style.cssText="display: block;"+"height: 33px;"+"margin:  -8px -6px;"+"padding: 8px 6px;";return t}else{return document.createElement("div")}}})();(function(){var e=function(){};e.prototype.init=function(e){this.eGui=AGN.Lib.TableCellWrapper(e.data.show);var i="";if(e.value.endTypeId===1){i=t("workflow.stop.automatic_end")}else if(e.value.endTypeId===2){i=e.value.date}this.eGui.innerHTML=i};e.prototype.getGui=function(){return this.eGui};e.prototype.refresh=function(e){return false};e.prototype.destroy=function(){};AGN.Opt.TableCellRenderers["WorkflowEndCellRenderer"]=e})();(function(){var e=function(){};e.prototype.init=function(e){this.eGui=AGN.Lib.TableCellWrapper(e.data.show);var i="";if(e.value.startTypeId===1){i=' <span class="badge badge-campaigntype-actionbased">\n'+'              <i class="icon icon-gear"></i>\n'+"              <strong>"+t("workflow.start.action_based")+"</strong>\n"+"         </span>"}else if(e.value.startTypeId===2){i='<span class="badge badge-campaigntype-datebased">\n'+'              <i class="icon icon-calendar-o"></i>\n'+"              <strong>"+t("workflow.start.date_based")+"</strong>\n"+"        </span>"}else{i=e.value.date}this.eGui.innerHTML=i};e.prototype.getGui=function(){return this.eGui};e.prototype.refresh=function(e){return false};e.prototype.destroy=function(){};AGN.Opt.TableCellRenderers["WorkflowStartCellRenderer"]=e})();(function(){var e=function(){};e.prototype.init=function(e){this.eGui=AGN.Lib.TableCellWrapper(e.data.show);if(e.value){var i=e.value.name;this.eGui.innerHTML='<span class="status-badge campaign.status.'+i+'"></span> '+t("workflow.status."+i)}};e.prototype.getGui=function(){return this.eGui};e.prototype.refresh=function(e){return false};e.prototype.destroy=function(){};AGN.Opt.TableCellRenderers["WorkflowStatusCellRenderer"]=e})();(function(){AGN.Lib.FormBuilder=AGN.Lib.FormBuilder||{};AGN.Lib.FormBuilder.Utils={pushControl:function(e,t){if(!Array.isArray(e)){return}e.push((function(e){var i=function(e){var i=e.prototype.constructor;function n(){return i.apply(this,arguments)}n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:true,configurable:true}});n.__proto__=e;if(t.build){n.prototype.build=t.build}if(t.onRender){n.prototype.onRender=t.onRender}Object.defineProperty(n,"definition",{get:t.definition});return n}(e);e.register(t.newControlName,i);return i}))}}})();(function(){AGN.Lib.FormBuilder=AGN.Lib.FormBuilder||{};AGN.Lib.FormBuilder.EmmControls={mediapool:function(e){return{newControlName:"mediapool",build:function(){return{field:this.markup("img",null,{}),layout:"agnMediapool"}},onRender:function(i){if(this.preview){var n=$(i.target).parents(".form-field").find(".field-label");n.html(t("userform.formBuilder.mediapoolImage")+": "+e.options.mediapoolImages[this.config.image])}var r=$(this.element);r.attr("src",this.config.image).attr("alt",this.config.alt);if(this.config.width){r.attr("width",this.config.width)}if(this.config.height){r.attr("height",this.config.height)}},definition:function(){return{i18n:{default:t("userform.formBuilder.mediapoolImage")}}}}},nextform:function(){return{newControlName:"formName",build:function(){return{field:this.markup("input",null,{name:"agnFN",type:"hidden"}),layout:"hidden"}},onRender:function(e){if(this.preview){var i=$(e.target).parents(".form-field").find(".field-label");i.html(t("userform.formBuilder.nextForm")+": "+this.config.formName)}$(this.element).attr("value",this.config.formName)},definition:function(){return{i18n:{default:t("userform.formBuilder.nextForm")}}}}}}})();(function(){AGN.Lib.FormBuilder=AGN.Lib.FormBuilder||{};var e={agnCTOKEN:t("userform.formBuilder.tooltips.agnCTOKEN"),agnUID:t("userform.formBuilder.tooltips.agnUID")};const i=2;const n={gender:[{selected:true,label:"Gender Male",value:0},{selected:false,label:"Gender Female",value:1}]};var r=["agnCTOKEN","agnUID","agnMAILINGLIST","agnSUBSCRIBE"];AGN.Lib.FormBuilder.Templates={default:function(){return{onRender:o}},hidden:function(){return{onRender:a}},dateForRender:function(e){var t=this;var i=(this.config.className||"")+" js-datepicker";var n=$.extend({},this.config,{"data-datepicker-options":"format: 'yyyy/mm/dd', formatSubmit: 'yyyy/mm/dd'",className:i});return{field:t.markup("input",null,n),onRender:function(t){var i=$(t.target);i.append('<input type="hidden" name="'+e.name+'_format" value="'+"yyyy/MM/dd"+'">')}}}};function o(e){var t=$(e.target).parents(".form-field"),i=this.config.emmField,n=t.data("currentEmmField"),r=!n,o=i!==n;if(r){t.data("currentEmmField",i)}else if(o){t.data("currentEmmField",i);l(t,this.config,i,n)}}function a(e){var t=this.config.id.replace("-preview","");var i=$(e.target);var n=i.parents(".form-field").find(".form-elements");var a=n.find(".emmField-wrap");if(r.includes(t)){a.hide()}else{a.show()}if(!r.includes(t)){o.apply(this,arguments)}var l=i.parents(".form-field").find(".tooltip-element");s(l,t)}function s(t,i){var n=e[i];if(!n){t.hide();return}t.attr("tooltip",n);t.show()}function l(e,t,i,n){const r=e.find(".form-elements"),o=r.find('input[name="value"]'),a=r.find('input[name="name"]'),s=i!=="none";var l=s?"$!customerData."+i:"",c=s?i:"";o.val(l);a.val(c);if(s){a.prop("disabled",true)}else{a.prop("disabled",false)}if(t.type==="select"){u(i,n,e,t)}}function u(e,t,n,r){const o=p(e);if(o.length>=i){const t={values:o,name:e};c(n,r,t)}else if(p(t).length>0){const t={values:[],name:e};c(n,r,t)}}function c(e,t,i){const n=e.parents(".js-form-builder");const r=n.data("formBuilder");r.actions.removeField(e.prop("id"));f((function(){const o=_.mergeWith(t,i,(function(e,t){return _.isArray(t)?t:undefined}));r.actions.addField(o,d(e,n))}));f((function(){r.actions.toggleFieldEdit(r.actions.getCurrentFieldId())}))}function d(e,t){var i=0;_.each(t.find(".form-field"),(function(t,n){if($(t).prop("id")===e.prop("id")){i=n}}));return i}function f(e){window.setTimeout((function(){e()}),0)}function p(e){const t=n[e];return t?t:[]}})();(function(){var e=AGN.Lib.FormBuilder.Utils;var i=AGN.Lib.FormBuilder.EmmControls;var n=AGN.Lib.FormBuilder.Templates;var r="<html>\n"+"    <head>\n"+'        <script type="text/javascript" src="'+AGN.url("/js/lib/jquery/jquery-3.5.1.js",true)+'"><\/script>\n'+'        <script type="text/javascript" src="'+AGN.url("/assets/js/vendor/pickadate-3.5.6.js",true)+'"><\/script>\n'+'        <script type="text/javascript" src="'+AGN.url("/assets/js/vendor/pickadate-3.5.6.date.js",true)+'"><\/script>\n'+'        <script type="text/javascript" src="'+AGN.url("/js/lib/formbuilder/generated-form.js",true)+'"><\/script>\n'+'        <link rel="stylesheet" href="'+AGN.url("/assets/form.css",true)+'">'+"        {{ if (cssUrl) { }}\n"+'        <link rel="stylesheet" href="{{- cssUrl }}">\n'+"        {{ } }}\n"+"    </head>\n"+"    <body>\n"+'        <div class="container" style="margin-top: 50px;">\n'+'            <form action="form.action">\n'+"                {{= generatedHTML}}\n"+"            </form>\n"+"        </div>\n"+"    </body>\n"+"</html>";var o=AGN.Lib.Confirm;var a;var s=["required","label","description","name","className","placeholder","value"];a=function(e,t){this.options=$.extend({},t);var i=this;i.$el=$(e);i.$target=$(this.$el.data("target"));i.initCustomControls();i.builder=i.$el.formBuilder(a.getBuilderDefaultOptions(i));i.defered=$.Deferred();if(i.options.data){i.setJson(i.options.data)}i.builder.promise.then((function(){i.builder=i.$el.data("formBuilder");i.defered.resolve()}))};a.getBuilderDefaultOptions=function(e){return{roles:{},disabledAttrs:["access","description"],disableFields:["file","autocomplete"],defaultFields:a.defaultFields(e),disabledActionButtons:["data","save"],actionButtons:[{id:"downloadHtml",className:"btn btn-info",label:t("workflow.reaction.download"),type:"button",events:{click:function(){e.downloadHtml.bind(e)()}}},{id:"generateHtml",className:"btn btn-success",label:t("userform.formBuilder.generateHtml"),type:"button",events:{click:function(){e.generateHtmlToTarget.bind(e)()}}}],editOnAdd:true,typeUserDisabledAttrs:{formName:s,mediapool:s,text:["subtype"],textarea:["subtype"]},typeUserAttrs:u(e),layoutTemplates:{agnMediapool:function(){return document.createElement("span")}},fields:[{type:"text"},{type:"hidden"},{type:"select"},{type:"radio-group"},{type:"checkbox-group"},{type:"number"},{type:"textarea"},{type:"date"}],templates:{text:n.default,hidden:n.hidden,textarea:n.default,date:n.default,select:n.default,"radio-group":n.default,"checkbox-group":n.default,number:n.default},controls:e.controls,i18n:{locale:window.adminLocale,location:AGN.url("/js/lib/formbuilder/translation/")},controlOrder:["header","paragraph","mediapool","","text","date","textarea","number","","select","radio-group","checkbox-group","","hidden","formName","button"],inputSets:a.getDefaultPresetsConfig(e)}};a.defaultFields=function(e){return[{type:"hidden",name:"agnCTOKEN",value:e.options.companyToken},{type:"hidden",name:"agnUID",value:"$!agnUID"}]};a.getDefaultPresetsConfig=function(e){return[{label:c(t("userform.formBuilder.template.subscribe")),name:"subscribe",fields:[{type:"hidden",name:"agnCTOKEN",value:e.options.companyToken,label:" "},{type:"hidden",name:"agnMAILINGLIST",value:"",label:" "},{type:"hidden",name:"agnSUBSCRIBE",value:"1",label:" "},{type:"hidden",name:"agnUID",value:"$!agnUID",label:" "},{type:"text",name:"firstname",value:"$!customerData.firstname",emmField:"firstname",label:"Firstname:"},{type:"text",name:"lastname",value:"$!customerData.lastname",emmField:"lastname",label:"Lastname:"},{type:"text",name:"email",value:"$!customerData.email",emmField:"email",label:"Email:"},{type:"button",subtype:"submit",style:"primary",label:"Subscribe"},{type:"formName",label:" "}]},{label:c(t("userform.formBuilder.template.unsubscribe")),name:"unsubscribe",fields:[{type:"hidden",name:"agnCTOKEN",value:e.options.companyToken,label:" "},{type:"formName",label:" "},{type:"hidden",name:"agnUID",value:"$!agnUID",label:" "},{type:"button",subtype:"submit",style:"primary",label:"Unsubscribe"}]},{label:c(t("userform.formBuilder.template.profile_change")),name:"profile_change",fields:[{type:"hidden",name:"agnCTOKEN",value:e.options.companyToken,label:" "},{type:"hidden",name:"agnUID",value:"$!agnUID",label:" "},{type:"formName",label:" "},{type:"text",name:"firstname",value:"$!customerData.firstname",emmField:"firstname",label:"Firstname:"},{type:"text",name:"lastname",value:"$!customerData.lastname",emmField:"lastname",label:"Lastname:"},{type:"text",name:"email",value:"$!customerData.email",emmField:"email",label:"Email:"},{type:"button",subtype:"submit",style:"primary",label:"Subscribe"}]},{label:c(t("userform.formBuilder.template.other")),name:"other",fields:[{type:"hidden",name:"agnCTOKEN",value:e.options.companyToken,label:" "},{type:"hidden",name:"agnUID",value:"$!agnUID",label:" "}]}]};a.get=function(e,t){var i=$(e);var n=i.data("_form-builder");if(n){return n}n=new a(e,t);i.data("_form-builder",n);return n};a.isCreated=function(e){return!!$(e).data("_form-builder")};a.prototype.initCustomControls=function(){this.controls=[];e.pushControl(this.controls,i.mediapool(this));e.pushControl(this.controls,i.nextform(this))};a.prototype.generateHtml=function(){var e=this.builder.actions.getData();var t=this.options.cssUrl;var i=$("<form/>");i.formRender({formData:e,controls:this.controls,templates:{date:n.dateForRender}});var o;if(r){o=_.template(r)({generatedHTML:i.html(),cssUrl:t})}else{o=i.html()}i.remove();o=d(o);return o};a.prototype.generateHtmlToTarget=function(){var e=this;var t=this.$target;if(!t){return}var i=AGN.Lib.Editor.get(t);if(!i){return}var n=this.options.confirmationModal;if(!n||!i.val()){l(e,i);return}o.from("warning-html-generation-modal").done((function(){l(e,i)}))};a.prototype.downloadHtml=function(){var e=this.generateHtml();var t=window.btoa(e);var i="Generated form.txt";if(this.options.formName){i=this.options.formName+".txt"}var n=document.createElement("a");n.setAttribute("href","data:application/octet-stream;charset=utf-8;base64,"+t);n.setAttribute("download",i);n.style.display="none";document.body.appendChild(n);n.click();document.body.removeChild(n)};a.prototype.getJson=function(){return this.builder.actions.getData("json",false)};a.prototype.getData=function(){return this.builder.actions.getData()};a.prototype.setJson=function(e){var t=this;t.defered.done((function(){return t.builder.actions.setData(e)}))};a.prototype.promise=function(){return this.defered.promise()};a.prototype.getInitJson=function(){return JSON.stringify(this.options.data)};a.prototype.isChanged=function(){var e=this;if(e.options.data){return e.getInitJson()!==e.getJson()}else{return _.isEqual(e.getData(),a.defaultFields(e))}};function l(e,i){i.val(e.generateHtml());AGN.Lib.Messages(t("defaults.success"),t("userform.formBuilder.success.htmlGenerated"),"success")}function u(e){var i={formName:{formName:{label:t("userform.formBuilder.formName"),options:e.options.namesJson.reduce((function(e,t){e[t]=t;return e}),{})}},mediapool:{image:{label:t("userform.formBuilder.mediapoolImage"),options:e.options.mediapoolImages},alt:{label:t("userform.formBuilder.imageAlt"),value:""},width:{label:t("userform.formBuilder.imageWidth"),value:0},height:{label:t("userform.formBuilder.imageHeight"),value:0}},date:{emmField:{label:t("userform.formBuilder.emmField"),options:e.options.dateProfileFields}},number:{emmField:{label:t("userform.formBuilder.emmField"),options:e.options.numberProfileFields}},select:{emmField:{label:t("userform.formBuilder.emmField"),options:e.options.profileFieldsForSelect}}};var n=["text","hidden","textarea","radio-group","checkbox-group"];n.forEach((function(n){i[n]={emmField:{label:t("userform.formBuilder.emmField"),options:e.options.textProfileFields}}}));return i}function c(e){return t("userform.formBuilder.template.template")+": "+e}function d(e){if(!e||e.length<=0){return e}return e.replace(/<\/.*?>/g,"$&\n")}AGN.Lib.FormBuilder.FormBuilder=a})();AGN.Lib.DomInitializer.new("account-data",(function(){var e=$("#account-data .account-initials");var t=e.next(".account-data-infobox");e.popover({trigger:"hover",container:"body",html:true,content:t.html()})}));AGN.Lib.CoreInitializer.new("ace",(function(e){if(!e){e=$(document)}_.each(e.find(".js-editor, .js-editor-text, .js-editor-eql, .js-editor-css"),(function(e){AGN.Lib.Editor.get($(e))}))}));(function(){AGN.Lib.CoreInitializer.new("checkbox-hider",(function(r){if(!r){r=$(document)}_.each(r.find("[data-show-by-checkbox]"),(function(i){var n=$(i);var r=$(n.data("show-by-checkbox"));t(n,r,true);e(n,r,true)}));_.each(r.find("[data-hide-by-checkbox]"),(function(i){var n=$(i);var r=$(n.data("hide-by-checkbox"));t(n,r,false);e(n,r,false)}));_.each(r.find("[data-show-by-select]"),(function(e){var t=$(e);var r=$(t.data("show-by-select"));var o=t.data("show-by-select-values");if(r&&o){var a=o.toString().split(",");for(var s=0;s<a.length;s++){a[s]=a[s].trim()}n(t,r,a,true);i(t,r,a,true)}}));_.each(r.find("[data-hide-by-select]"),(function(e){var t=$(e);var r=$(t.data("hide-by-select"));var o=t.data("hide-by-select-values");if(r&&o){var a=o.toString().split(",");for(var s=0;s<a.length;s++){a[s]=a[s].trim()}n(t,r,a,false);i(t,r,a,false)}}))}));function e(e,i,n){i.change((function(){t(e,i,n)}))}function t(e,t,i){if(i){if(t.is(":checked")){e.removeClass("hidden")}else{e.addClass("hidden")}}else{if(!t.is(":checked")){e.removeClass("hidden")}else{e.addClass("hidden")}}}function i(e,t,i,r){t.change((function(){n(e,t,i,r)}))}function n(e,t,i,n){var r=t.val();var o=false;for(var a=0;a<i.length;a++){if(i[a]==r){o=true;break}}var s,l;if(n){s=function(){e.removeClass("hidden")};l=function(){e.addClass("hidden")}}else{s=function(){e.addClass("hidden")};l=function(){e.removeClass("hidden")}}o?s():l()}})();(function(){var e=AGN.Lib.AutoSave;function t(e,t){var i=e.attr("id"),n=e.data("_editor");if(window.CKEDITOR&&CKEDITOR.instances[i]){CKEDITOR.instances[i].setData(t)}else if(n){n.val(t)}else{e.val(t)}}AGN.Lib.CoreInitializer.new("auto-save",["ace"],(function(i){if(!i){i=$(document)}_.each(i.find("[data-autosave-scope]"),(function(i){var n=$(i);var r=n.data("autosave-scope");var o=n.data("autosave-period");var a=n.all("[data-autosave]");if(a.length>0){function s(){a=a.filter((function(e,t){return document.body.contains(t)}));if(a.length>0){var e={};_.each(a,(function(t){var i=$(t);e["value#"+i.data("autosave")]=i.val()}));return e}return false}function l(e){var i=$.map(a,(function(i){var n=$(i);var r="value#"+n.data("autosave");if(r in e){var o=n.val();var a=e[r];if(o!=a){if(n.is("[data-autorestore]")){t(n,a)}else{return{target:n,value:a}}}return null}}));if(i.length>0){return i}return false}function u(e){_.each(e,(function(e){t(e.target,e.value)}))}e.initialize(r,s,l,u,o)}}))}))})();AGN.Lib.DomInitializer.new("autosubmit",(function(e){setTimeout((function(){AGN.Lib.Form.get(e).submit()}),100)}));AGN.Lib.DomInitializer.new("calendar-table",(function(){var e=this.config;AGN.Lib.CalendarService.setUp(e);window.setInterval(AGN.Lib.CalendarService.checkProgress,500);if(AGN.Lib.CalendarService.getMonthMode()){AGN.Lib.CalendarService.generateMonthCalendar(AGN.Lib.CalendarService.getCurMonth(),AGN.Lib.CalendarService.getCurYear())}else{AGN.Lib.CalendarService.generateWeekCalendar(AGN.Lib.CalendarService.getCurMonth(),AGN.Lib.CalendarService.getCurYear(),AGN.Lib.CalendarService.getCurDay())}AGN.Lib.CalendarService.generateUnsentMailingsTable();var t=AGN.Lib.Action;t.new({click:"#dateTimePicker"},(function(){this.event.stopPropagation()}));t.new({click:"#dateTimePickerButton"},(function(){this.event.stopPropagation()}));t.new({click:".js-calendar-navigate-previous"},(function(){AGN.Lib.CalendarService.prevEntry();this.event.preventDefault();return false}));t.new({click:".js-calendar-navigate-next"},(function(){AGN.Lib.CalendarService.nextEntry();this.event.preventDefault();return false}));t.new({click:".js-calendar-navigate-today"},(function(){AGN.Lib.CalendarService.jumpToday();this.event.preventDefault();return false}));t.new({click:".js-calendar-view-month"},(function(){AGN.Lib.CalendarService.toggleDateSelectionMode("SELECT_MONTH");this.event.preventDefault();return false}));t.new({click:".js-calendar-view-week"},(function(){AGN.Lib.CalendarService.toggleDateSelectionMode("SELECT_WEEK");this.event.preventDefault();return false}));t.new({click:".js-calendar-list-unsent"},(function(){AGN.Lib.CalendarService.generateUnsentMailingsTable();this.event.preventDefault();return false}));t.new({click:".js-calendar-list-planned"},(function(){AGN.Lib.CalendarService.generatePlannedMailingsTable();this.event.preventDefault();return false}));t.new({click:"#comment-save-button"},(function(){AGN.Lib.ReminderService.reminder.onSave()}));t.new({click:".calendar-comments-add"},(function(){var t=this.el,i;i=t.parents(".calendar-day-container").data("date");AGN.Lib.CalendarService.showCommentDialog(AGN.Lib.ReminderService.getNewReminder(i,e));return false}));t.new({click:".calendar-comments-toggle"},(function(){var e=this.el,t;t=e.parents(".calendar-day-container").data("date");AGN.Lib.CalendarService.toggleComment(t);return false}));t.new({change:".js-calendar-toggle-all-comments"},(function(){if(this.el.prop("checked")){$(".calendar-table").find(".calendar-comment").show()}else{$(".calendar-table").find(".calendar-comment").hide()}AGN.Lib.CalendarService.adjustSidebarHeight()}));t.new({change:"#scheduleReminder"},(function(){AGN.Lib.ReminderService.onScheduleChanged()}));t.new({change:"#isDeadline"},(function(){AGN.Lib.ReminderService.onDeadlineChanged()}));t.new({change:"#month_list, #month_list_year, #weeks_list"},(function(){AGN.Lib.CalendarService.showDate()}));t.new({click:".show-more-mailings"},(function(){AGN.Lib.CalendarService.updateDayMailings(this.el)}));t.new({change:"#weeks_list_year"},(function(){AGN.Lib.CalendarService.createWeeksList(this.el[0])}));t.new({change:'#reminderDetails input[name="userType"]'},(function(){var e=this.el[0];AGN.Lib.ReminderService.onUserTypeChanged(e.value)}));this.addAction({mouseover:"mailing-popup"},(function(){var e=this.el,t=$("#popup-"+e.data("mailing-id"));if(t.exists()){var i=$(window).scrollTop();var n=t.outerHeight();var r=15;var o=e.offset().top;var a=o+e.outerHeight();var s=o-i-r;var l=i+$(window).outerHeight()-a;var u;if(n<=s||s>l){u=o-r-n;t.addClass("top");t.removeClass("bottom")}else{u=a+r;t.addClass("bottom");t.removeClass("top")}t.css({top:u,left:e.offset().left+e.outerWidth()/2-t.outerWidth()/2});t.css("z-index","1500");t.css("display","block")}}));this.addAction({mouseout:"mailing-popup"},(function(){var e=this.el.data("mailing-id");$("#popup-"+e).css("display","none")}))}));(function(){var e;e=function(){var e=0;var i;var n;var r;var o;var a;var s;var l;var u;var c;var d;var f;var p;var h;var g;var m;var v;var y;var b;var w;var C;var A;var E=-1;var x=t("date.monthsFull");var T=new Date;T.setHours(0,0,0,0);var S=T.getMonth();var D=T.getFullYear();var k=T.getDate();var O=true;var R=false;var N={};var P="MONTH";var I=[];var M=0;var L=false;var F=0;function G(){return O}this.getMonthMode=G;function W(){return e}this.getDayWidth=W;function H(){return S}this.getCurMonth=H;function j(){return D}this.getCurYear=j;function B(){return k}this.getCurDay=B;function V(t){e=t}this.setDayWidth=V;function z(e){i=e.localeDatePattern;n=new Date(e.currentServerTime);r=e.firstDayOfWeek;o=T.getWeek(r);a=e.pushStatusSent;s=e.pushStatusScheduled;u=e.adminName;l=e.secondsBeforeWaitMessage;c=e.urls.CALENDAR_UNSENT_MAILINGS;d=e.urls.CALENDAR_PLANNED_MAILINGS;f=e.urls.CALENDAR_MAILINGS_LIST;p=e.urls.CALENDAR_MAILINGS_MOVE;h=e.urls.CALENDAR_PUSHES_LIST;g=e.urls.CALENDAR_PUSHES_MOVE;m=e.urls.CALENDAR_AUTO_OPTIMIZATION;v=e.urls.CALENDAR_COMMENT_LIST;y=e.urls.CALENDAR_COMMENT_SAVE;b=e.urls.CALENDAR_COMMENT_REMOVE;w=e.urls.MAILING_VIEW;C=e.urls.MAILING_STATISTICS_VIEW;A=e.isStatisticsViewPermitted;E=e.showALlMailingsPerDay?-1:5}this.setUp=z;function U(e){if(e=="SELECT_MONTH"){$("#linkSelectByMonth").toggleClass("active");$("#linkSelectByWeek").toggleClass("active");$("#dateSelectByMonth").css("display","inline");$("#dateSelectByWeek").css("display","none");ae(e);P="MONTH"}if(e=="SELECT_WEEK"){$("#linkSelectByMonth").toggleClass("active");$("#linkSelectByWeek").toggleClass("active");$("#dateSelectByMonth").css("display","none");$("#dateSelectByWeek").css("display","inline");Je($("#weeks_list_year")[0]);ae(e);P="WEEK"}}this.toggleDateSelectionMode=U;function Y(){if(L){M+=.5;if(M>=l){$("#calendar-wait-notification").show()}}else{M=0}}this.checkProgress=Y;function q(){L=true;F++}this.startProgress=q;function X(){F--;if(F<=0){F=0;L=false;$("#calendar-wait-notification").hide()}}this.stopProgress=X;function K(e,t){N={};var i=new Date(t,e,1);var n=oe(e+1,t);var o=i.getDay()-r;if(o<0){o=7+o}var a=Math.ceil((n+o)/7);var s=new Date(t,e,1-o);var l=new Date(t,e,1+a*7);i=new Date(s);for(var u=0;u<a;u++){var c="row-"+(u+1);$("#calendar-container").append('<tr id="'+c+'">'+'<td class="calendar-week-number-cell">'+i.getWeek(r)+"</td>"+"</tr>");for(var d=0;d<7;d++){var f=i.getMonth()!=e;pe(i,i.getDate(),"",true,c,f);i.setDate(i.getDate()+1)}}$("#calendar-days").html(x[e]+" "+t);je(s,l);Pe(s,l,E);$e(s,l);We(s,l);Te();rt();Se();Ze(e,t)}this.generateMonthCalendar=K;function Q(e,t,n){var a=6048e5;N={};var s=new Date(t,e,n);var l=s.getDay();s.setDate(n-s.getDay()-1+r);var u=new Date(s.getFullYear(),s.getMonth(),s.getDate());u.setDate(u.getDate()+1);o=u.getWeek(r);if(e==0&&n==1&&u.getWeek(r)!=1){u.setTime(u.getTime()+a);s.setTime(s.getTime()+a)}$("#calendar-container").append('<tr id="week-row"></tr>');$("#week-row").append('<td class="calendar-week-number-cell">'+u.getWeek(r)+"</td>");for(var c=0;c<=6;c++){s.setDate(s.getDate()+1);pe(s,AGN.Lib.DateFormat.format(s,i),"calendar-week-day-container",false,"week-row",false)}$("#calendar-days").html(AGN.Lib.DateFormat.format(u,i)+" - "+AGN.Lib.DateFormat.format(s,i));je(u,s);Pe(u,s,E);$e(u,s);We(u,s);Te();Se();Qe(e,t,n)}this.generateWeekCalendar=Q;function Z(e,t){var i;e.draggable({stack:t,revert:"invalid",distance:20,start:function(){i=$("#popup-"+e.prop("id"));i.hide();i.detach();re()},stop:function(){$("#calendar-popup-holder").append(i)}})}function J(e){Z(e,".calendar-mail-label")}this.addMailingDragging=J;function ee(e){Z(e,".calendar-comment")}this.addCommentDragging=ee;function te(){$(".calendar-comments-toggle").css("visibility","hidden");$(".calendar-day-container").has(".calendar-comment").each((function(){$(this).find(".calendar-comments-toggle").css("visibility","visible")}));Se()}this.checkHideCommentIconsVisibility=te;function ie(){Ve()}this.generateUnsentMailingsTable=ie;function ne(){ze()}this.generatePlannedMailingsTable=ne;function re(){var e;if(document.selection&&document.selection.empty){document.selection.empty()}else if(window.getSelection){e=window.getSelection();if(e&&e.removeAllRanges)e.removeAllRanges()}}this.clearSelection=re;function oe(e,t){return new Date(t,e,0).getDate()}this.daysInMonth=oe;function ae(e){var t=e=="SELECT_MONTH";if(t&&O||!t&&!O){if(O){Ze(S,D)}else{Qe(S,D,k)}return}se();if(t){var i=new Date(D,S,k);i.setDate(i.getDate()+7);if(o==1&&D<i.getFullYear()){S=0;D++;k=1}K(S,D);O=true;R=false}else{Q(S,D,k);O=false;R=true}}this.changeCalendarMode=ae;function se(){$("#calendar-container").empty();$("#calendar-popup-holder").empty();$(".calendar-mail-label").remove()}this.removeCurrentCalendar=se;function le(){if(O){de()}else{ce(true)}}this.prevEntry=le;function ue(){if(O){fe()}else{ce(false)}}this.nextEntry=ue;function ce(e){var t=e?-7:7;se();var i=new Date(D,S,k);i.setDate(i.getDate()+t);k=i.getDate();S=i.getMonth();D=i.getFullYear();i.setDate(i.getDate()+t);var n=$("#month_list_year option");var r=Number(n[n.length-1].value);var o=Number(n[0].value);if(i.getFullYear()<r){Ye()}if(i.getFullYear()>o){Ue()}Q(S,D,k)}this.switchWeek=ce;function de(){se();S--;if(S<0){S=11;D--}var e=$("#month_list_year option");var t=Number(e[e.length-1].value);if(D<t){Ye()}K(S,D)}this.prevMonth=de;function fe(){se();S++;if(S>11){S=0;D++}var e=$("#month_list_year option");var t=Number(e[0].value);if(D>t){Ue()}K(S,D)}this.nextMonth=fe;function pe(e,t,i,n,r,o){var a="";var s="";if(o){a="calendar-another-month-day"}else{var l=new Date(e.getFullYear(),e.getMonth(),e.getDate());if(l.getTime()==T.getTime()){a="calendar-current-day"}if(l.getDay()==0||l.getDay()==6){a+=" calendar-weekend-day";s=" calendar-weekend-day-label"}}var u=tt(new Date(e.getFullYear(),e.getMonth(),e.getDate()));var c="day-"+u;$("#"+r).append('<td id="'+c+'" data-date="'+u+'" class="calendar-day-container '+i+" "+a+'"></td>');$("#"+c).append('<div class="calendar-day-label'+s+'" id="label-'+c+'"></div>');$("#label-"+c).append(t);ge(c);if(n){he(c)}N[c]=!n}this.addDayToCalendar=pe;function he(e){$("#label-"+e).append('<button type="button" class="calendar-comments-toggle" title="'+t("calendar.title.show_hide_comment")+'"><i class="icon icon-comments"></i></button>');$("#"+e+" .calendar-comments-toggle").css("visibility","hidden")}this.addCommentsShowButton=he;function ge(e){$("#"+"label-"+e).append('<button type="button" class="calendar-comments-add" title="'+t("calendar.title.new_comment")+'"><i class="icon icon-plus"></i></button>');$("#"+"label-"+e+" .calendar-comments-add").css("visibility","hidden");$("#"+e).mouseover((function(){if(!$("#"+e).hasClass("calendar-another-month-day")){$("#"+"label-"+e+" .calendar-comments-add").css("visibility","visible")}}));$("#"+e).mouseout((function(){$("#"+"label-"+e+" .calendar-comments-add").css("visibility","hidden")}))}this.addDayPopup=ge;function me(e){if(N["day-"+e]){$("#day-"+e+" .calendar-comment").hide()}else{$("#day-"+e+" .calendar-comment").show()}N["day-"+e]=!N["day-"+e];Se()}this.toggleComment=me;function ve(e){if(e==""){$("#calendar-comment-error").html(t("calendar.error.empty_comment"));return false}if(ot(e)>1e3){$("#calendar-comment-error").html(t("calendar.error.long_comment"));return false}return true}this.validateComment=ve;function ye(e){if(e){var t=e.split(/[,; \t\n]+/);var i=[];for(var n=0;n<t.length;n++){if(t[n]){i.push(t[n])}}return i}else{return[]}}this.parseRecipients=ye;function be(e){if(!e||e.length==0){$("#calendar-comment-error").html(t("calendar.error.empty_recipient_list"));return false}var i=e.join(",");if(ot(i)>2e3){$("#calendar-comment-error").html(t("calendar.error.long_recipient_list"));return false}var n=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;for(var r=0;r<e.length;r++){if(!n.test(e[r])){$("#calendar-comment-error").html(t("calendar.error.invalid_email")+" "+e[r]);return false}}return true}this.validateEmails=be;function _e(e){AGN.Lib.Modal.create($("#calendar-dialog-modal-template").html());AGN.Lib.ReminderService.fillCommentDialog(e);$("#calendar-comment-error").html("");AGN.Lib.ReminderService.updateVisibility()}this.showCommentDialog=_e;function we(e){var i="comment-"+e.id;var n="day-"+e.getDateAsString();var r=e.text.replace(/\n/g,"<br>");var o=$("#"+n);var a=$("#"+i);if(a.exists()||!o.exists()){return}a=$('<div id="'+i+'" data-comment-id="'+e.id+'" class="calendar-mail-label calendar-comment">'+'<span class="calendar-badge comment-badge">'+'<span class="comment-text-content">'+r+"</span>"+"</span>"+"</div>");if(!N[n]){a.css("display","none")}o.append(a);var s=$("#calendar-popup-holder");s.append('<input type="hidden" id="deadline-'+i+'" name="'+i+'" value="'+e.isDeadline+'"/>');s.append('<input type="hidden" id="notified-'+i+'" name="'+i+'" value="'+e.isNotified+'"/>');s.append('<input type="hidden" id="emm-user-type-'+i+'" name="'+i+'" value="'+e.isEmmUserType+'"/>');s.append('<input type="hidden" id="notify-admin-id-'+i+'" name="'+i+'" value="'+e.notifyAdminId+'"/>');s.append('<input type="hidden" id="recipients-'+i+'" name="'+i+'" value="'+e.recipients+'"/>');s.append('<input type="hidden" id="plannedSendDate-'+i+'" name="'+i+'" value="'+e.getPlannedSendDateAsString()+'"/>');a.dblclick((function(){AGN.Lib.CalendarService.showCommentDialog(AGN.Lib.ReminderService.getReminder(i,e.currentAdminName))}));var l=$('<button type="button" id="remove-'+i+'" class="calendar-comments-remove"><i class="icon icon-trash-o"></i></button>');a.find(".comment-badge").append(l);l.attr("title",t("calendar.title.delete_comment"));l.on("click",(function(){$("#deadline-"+i).remove();$("#popup-"+i).remove();a.remove();Ne(i);te();Se();return false}));a.mouseover((function(){l.css("display","block")}));a.mouseout((function(){l.css("display","none")}));ee(a);Ce(e.id,r)}this.addComment=we;function Ce(e,i){$("#calendar-popup-holder").append('<div class="calendar-mail-popup" id="popup-comment-'+e+'"></div>');$("#popup-comment-"+e).append('<div class="arrow"></div>');$("#popup-comment-"+e).append('<div class="calendar-mail-popup-header">'+t("calendar.common.comment")+"</div>");$("#popup-comment-"+e).append('<div class="calendar-mail-popup-content"><p class="comment-text-content">'+i+"</p></div>");$("#popup-comment-"+e).css("display","none");$("#popup-comment-"+e).css("word-wrap","break-word");$("#comment-"+e).mouseover((function(){var t=$("#popup-comment-"+e),i=$(this);var n=i.offset().top-$(window).scrollTop(),r=i.outerHeight(),o=t.outerHeight(),a=15,s=i.offset().top+r+a;if(o+a<n){s=i.offset().top-o-a;t.addClass("top");t.removeClass("bottom")}else{t.addClass("bottom");t.removeClass("top")}t.css({top:s,left:i.offset().left+i.outerWidth()/2-t.outerWidth()/2});t.css("z-index","1500");t.css("display","block")}));$("#comment-"+e).mouseout((function(){$("#popup-comment-"+e).css("display","none")}))}function Ae(e,t,i){var n=e.data("date");if(!N["day-"+n]&&!$(".js-calendar-toggle-all-comments").prop("checked")){t.hide()}e.append(t);Re(AGN.Lib.ReminderService.getReminder("comment-"+i,u));Se();te()}function Ee(e,t,i){var r=e.data("date");if(t.attr("sent")!="true"){var o=t.data("time");var a=nt(r,o);if(a>=n){if(t.attr("planned")=="true"){var s=t.find("a");if(s.hasClass("calendar-mailing-status-planned-in-past")){var l="calendar-"+t.attr("workstatus").replace(/\./g,"-");s.addClass(l).removeClass("calendar-mailing-status-planned-in-past")}}var u=new Date(a);u.setHours(u.getHours()-3);if(u<n){o=null;t.data("time",null)}var c=e.find(".calendar-mail-label");var d=false;if(o){$(c.get().reverse()).each((function(){var e=$(this);var i=e.data("time");if(i&&i<o){e.after(t);d=true}}))}if(!d){var f=c.filter("[data-mailing-id]").last();if(f.length){f.after(t);d=true}else{e.append(t)}}Se();De(i,r)}}}function xe(e,t,i){var n=e.data("date");switch(t.data("status")){case a:return;case s:if(nt(n,"00:00")<T){return}break}var r=e.find(".calendar-mail-label").filter("[data-push-id]").last();if(r.length){r.after(t)}else{e.append(t)}ke(i,n)}function Te(){$(".calendar-day-container").droppable({hoverClass:"calendar-day-hover",drop:function(e,t){var i=$(this);var n="UNKNOWN";var r=t.draggable.data("comment-id");if(r){n="COMMENT"}else{r=t.draggable.data("mailing-id");if(r){n="MAILING"}else{r=t.draggable.data("push-id");if(r){n="PUSH"}}}if(n=="UNKNOWN"){return}t.draggable.css({top:"",left:""});switch(n){case"COMMENT":Ae(i,t.draggable,r);break;case"MAILING":Ee(i,t.draggable,r);break;case"PUSH":xe(i,t.draggable,r);break}}})}function Se(){var e=$("#calendar-table").height();$(".calendar-sidebar").css({"max-height":e+"px"})}this.adjustSidebarHeight=Se;function De(e,t){return $.ajax({type:"POST",url:p,data:{mailingId:e,date:t}})}function ke(e,t){return $.ajax({type:"POST",url:g,data:{pushId:e,date:t}})}function Oe(e){var t="comment-"+e.id;var i=$("#"+t);$("#deadline-"+t).val(e.isDeadline);$("#emm-user-type-"+t).val(e.isEmmUserType);$("#notify-admin-id-"+t).val(e.notifyAdminId);$("#recipients-"+t).val(e.recipients);var n=e.text.replace(/\n/g,"<br>");ee(i);i.find(".comment-text-content").html(n);$("#popup-"+t+" .comment-text-content").html(n);$("#plannedSendDate-"+t).val(e.getPlannedSendDateAsString())}function Re(e){$.ajax({type:"POST",url:y,data:{commentId:e.id,date:e.getDateAsString(),comment:e.text,deadline:e.isDeadline,sendNow:e.isSendNow,emmUserType:e.isEmmUserType,notifyAdminId:e.notifyAdminId,recipients:e.recipients,notified:e.isNotified,plannedSendDate:e.getPlannedSendDateAsString()},success:function(t){if(typeof t.commentId=="undefined"){AGN.Lib.Page.render(t)}else{e.isSendNow=false;if(e.id==0){e.id=t.commentId;we(e);te()}else{Oe(e)}}}})}this.saveCommentDB=Re;function Ne(e){$.ajax({type:"POST",url:b,data:{commentId:AGN.Lib.ReminderService.getReminderIdFromTag(e)}})}this.removeCommentDB=Ne;function Pe(e,t,i){e=tt(e);t=tt(t);q();$.ajax({type:"GET",url:f,data:{startDate:e,endDate:t,limit:i+1}}).done((function(e){$.each(e,(function(e,t){Me(t,i)}));Se()})).always(X)}function Ie(e){var t=e.closest(".calendar-day-container");var i=nt(t.data("date"),"");e.remove();Pe(i,i,-1)}this.updateDayMailings=Ie;this.getMailings=Pe;function Me(e,i){var n=$("#day-"+e.sendDate);var r=$("#"+e.mailingId);if(i>0&&n.find(".calendar-mail-label").length>=i){if(!n.find(".show-more-mailings").exists()){n.append("<div class='calendar-mail-label'>"+"<button type='button' class='calendar-badge btn-primary show-more-mailings' style='width: 100%;'>"+t("defaults.showMore")+"</button></div>")}return}if(n.exists()&&!r.exists()){var o;var a=Le(e);if(e.plannedInPast){o="calendar-mailing-status-planned-in-past"}else{o="calendar-"+e.workstatus.replace(".","-")}var s={sent:e.sent,planned:e.planned,mailingId:e.mailingId,statusClass:o,mailingLink:a,workstatus:e.workstatus,shortname:e.shortname,sendTime:e.sendTime};r=AGN.Lib.Template.dom("calendar-mail-link",s);n.append(r);s.subject=e.subject;s.mailsSent=e.mailsSent;s.previewImage=Fe(e.preview_component,e.isOnlyPostType);s.popupClass=e.preview_component?"":"calendar-mail-popup-preview-missing";s.emptyWorkstatus=!e.workstatus.trim();s.openers=e.openers;s.clickers=e.clickers;s.workstatusIn=e.workstatusIn;var l=AGN.Lib.Template.dom("calendar-mail-popup",s);$("#calendar-popup-holder").append(l);AGN.Lib.CalendarService.addMailingDragging(r)}}function Le(e){var t;if(e.sent&&e.workstatus!="mailing.status.test"&&A){t=C.replace(":mailingId:",e.mailingId)}else{t=w.replace(":mailingId:",e.mailingId)}return t}function Fe(e,t){var i;if(t){i=AGN.url("/assets/core/images/facelift/post_thumbnail.jpg")}else if(e){i=AGN.url("/sc?compID="+e)}else{i=AGN.url("/assets/core/images/facelift/no_preview.svg")}return i}function Ge(e){switch(e.status){case a:return e.sendDate;case s:return e.startDate;default:return tt(it(e.plannedFor))}}function $e(e,t){q();$.ajax({type:"GET",url:h,data:{startDate:tt(e),endDate:tt(t)}}).done((function(e){var t=AGN.Lib.Template.prepare("calendar-planned-push-notification");$.each(e,(function(e,i){var n=$(t(i));$("#day-"+Ge(i)).append(n);J(n)}));Se()})).always(X)}function We(e,t){q();$.ajax({type:"GET",url:m,data:{startDate:tt(e),endDate:tt(t)},success:function(e){var t=AGN.Lib.Template.prepare("calendar-auto-optimization");$.each(e,(function(e,i){var n=$(t({optimizationId:i.campaignID,shortname:i.shortname,linkUrl:He(i),status:i.autoOptimizationStatus}));$("#day-"+i.sendDate).append(n)}));Se()}}).always(X)}function He(e){if(e.workflowId==0){return"optimization/"+e.id+"/view.action"}else{return"workflow/"+e.workflowId+"/view.action"}}function je(e,t){$.ajax({type:"GET",url:v,data:{startDate:tt(e),endDate:tt(t)},success:function(e){$.each(e,(function(e,t){Be(t)}));AGN.Lib.CalendarService.checkHideCommentIconsVisibility();rt();Se()}})}function Be(e){var t=_.cloneDeep(AGN.Lib.ReminderService.reminder);var i=e.recipients.adminId;t.id=e.commentId;t.setDate(e.date);t.text=e.comment;t.notifyAdminId=i;t.isEmmUserType=i!=0;t.currentAdminName=e.adminName;t.isDeadline=e.deadline;t.isNotified=e.notified;t.setPlannedSendDate(e.plannedSendDates);t.recipients=e.recipients.value;AGN.Lib.CalendarService.addComment(t)}function Ve(){$.ajax({type:"GET",url:c,success:function(e){$(".calendar-sidebar-content").html(e);Se();AGN.Lib.CoreInitializer.run(["tooltip","scrollable"],$(".calendar-wrapper"))}})}function ze(){$.ajax({type:"GET",url:d,success:function(e){$(".calendar-sidebar-content").html(e);Se();AGN.Lib.CoreInitializer.run(["tooltip","scrollable"],$(".calendar-wrapper"))}})}function Ue(){var e=$("#month_list_year option");var t=$("#weeks_list_year option");var i=Number(e[e.length-1].value);for(var n=0;n<e.length;n++){var r=Number(e[n].value)+1;e[n].text=r;e[n].value=r;t[n].text=r;t[n].value=r}e[e.length]=new Option(i,i);t[t.length]=new Option(i,i)}function Ye(){var e=$("#month_list_year option");var t=$("#weeks_list_year option");var i=Number(e[e.length-1].value)-1;e[e.length]=new Option(i,i);t[t.length]=new Option(i,i)}function qe(){var e;if(P=="MONTH"){var t=$("#month_list option:selected").val();var i=$("#month_list_year option:selected").val();var n=new Date(i,t,1);strDate=AGN.Lib.DateFormat.format(n,getDateFormat());e=$("#month_list_year option:selected").index()}if(P=="WEEK"){var r=$("#weeks_list option:selected").val();for(var o in I){if(!I.hasOwnProperty(o))continue;if(I[o].number==r){strDate=AGN.Lib.DateFormat.format(I[o].firstDay,getDateFormat());break}}e=$("#weeks_list_year option:selected").index()}if(e==0){Ue()}Xe(strDate)}this.showDate=qe;function Xe(e){var t=AGN.Lib.DateFormat.parseFormat(e,getDateFormat());S=t.getMonth();D=t.getFullYear();k=t.getDate();se();if(O){K(S,D)}else{Q(S,D,k)}}this.jumpToDate=Xe;function Ke(){var e=AGN.Lib.DateFormat.format(new Date,getDateFormat());Xe(e)}this.jumpToday=Ke;function Qe(e,t,i){var n=6048e5;var o=new Date(t,e,i);o.setDate(i-o.getDay()-1+r);var a=new Date(o.getFullYear(),o.getMonth(),o.getDate());a.setDate(a.getDate()+1);if(e==0&&i==1&&a.getWeek(r)!=1){a.setTime(a.getTime()+n)}var s=a.getWeek(r);if(s==1){var l=new Date(a.valueOf()+n);if(a.getFullYear()!=l.getFullYear()){t=l.getFullYear()}}$("#weeks_list_year")[0].selectedIndex=$("#weeks_list_year option[value = "+t+"]")[0].index;Je($("#weeks_list_year")[0]);$("#weeks_list")[0].selectedIndex=$("#weeks_list option[value = "+s+"]")[0].index;$("#weeks_list_year").select2({minimumResultsForSearch:-1});$("#weeks_list").select2({minimumResultsForSearch:-1})}function Ze(e,t){$("#month_list_year")[0].selectedIndex=$("#month_list_year option[value = "+t+"]")[0].index;$("#month_list")[0].selectedIndex=$("#month_list option[value = "+e+"]")[0].index;$("#month_list").select2({minimumResultsForSearch:-1});$("#month_list_year").select2({minimumResultsForSearch:-1})}function Je(e){I=[];var t;var n=6048e5;var o=e.options[e.selectedIndex].value;var a=new Date(o,11,31);var s=new Date(o,0,1);s.setDate(1-s.getDay()-1+r);s.setDate(s.getDate()+1);var l=new Date(s.getFullYear(),s.getMonth(),s.getDate());l.setTime(s.getTime()+n-864e5);if(s.getWeek(r)!=1){s.setTime(s.getTime()+n);l.setTime(l.getTime()+n)}do{t=new Object;t.number=s.getWeek(r);t.firstDay=new Date(s.getFullYear(),s.getMonth(),s.getDate());t.lastDay=new Date(l.getFullYear(),l.getMonth(),l.getDate());I.push(t);s.setTime(s.getTime()+n);l.setTime(l.getTime()+n)}while(s.getWeek(r)!=1&&s.getFullYear()==o);$("#weeks_list option").remove();for(var u in I){if(!I.hasOwnProperty(u))continue;var c=document.createElement("option");var d=AGN.Lib.DateFormat.format(I[u].firstDay,i);var f=AGN.Lib.DateFormat.format(I[u].lastDay,i);c.value=I[u].number;c.innerHTML=I[u].number+" : "+d+" - "+f;$("#weeks_list").append(c)}}this.createWeeksList=Je;function et(e,t){var i=e+"";while(i.length<t)i="0"+i;return i}function tt(e){var t=et(e.getDate(),2);var i=et(e.getMonth()+1,2);var n=e.getFullYear();return t+"-"+i+"-"+n}function it(e){if(e){var t=e[0];var i=e[1]-1;var n=e[2];return new Date(t,i,n)}return null}function nt(e,t){var i=e.match(/^(\d\d)-(\d\d)-(\d{4})$/);if(i){var n=i[1];var r=i[2]-1;var o=i[3];if(t){i=t.match(/^(\d\d):(\d\d)$/);if(i){var a=i[1];var s=i[2];return new Date(o,r,n,a,s)}}return new Date(o,r,n)}return null}function rt(){if($(".js-calendar-toggle-all-comments").prop("checked")){$(".calendar-table .calendar-comment").show()}}this.setAllCommentsCheckState=rt;function ot(e){var t=encodeURI(e);if(t.indexOf("%")!=-1){var i=t.split("%").length-1;if(i==0)i++;var n=t.length-i*3;i=i+n}else{i=t.length}return i}};AGN.Lib.CalendarService=new e;var i={showDiv:function(e){$("div#calendar-dialog-modal div#"+e).css("display","block")},hideDiv:function(e){$("div#calendar-dialog-modal div#"+e).css("display","none")},updateVisibility:function(){this.onScheduleChanged();this.onDeadlineChanged()},onDeadlineChanged:function(){if($("#isDeadline:checked").val()){$("#remindDate").prop("disabled",false);$("#remindTime").prop("disabled",false);$(".js-open-datepicker").prop("disabled",false);$(".js-open-timepicker").prop("disabled",false)}else{$("#remindDate").prop("disabled",true);$("#remindTime").prop("disabled",true);$(".js-open-datepicker").prop("disabled",true);$(".js-open-timepicker").prop("disabled",true)}return false},onUserTypeChanged:function(e){if(e==this.reminder.recipientEmm){$("#emmUsers").show();$("#customRecipients").hide()}else{$("#customRecipients").show();$("#emmUsers").hide()}},onScheduleChanged:function(){if($("#scheduleReminder:checked").val()){$("#admin-for-notify").prop("disabled",false);this.showDiv("reminderDetails")}else{$("#admin-for-notify").prop("disabled",true);this.hideDiv("reminderDetails")}return false},reminder:{isDeadline:false,isSendNow:false,isEmmUserType:true,recipientEmm:1,recipientCustom:2,defaultDate:{date:"",hours:8,minutes:0},plannedSendDate:{date:"",hours:8,minutes:0},getDateAsString:function(){return $.datepicker.formatDate("dd-mm-yy",this.defaultDate.date)},setDate:function(e){this.defaultDate.date=$.datepicker.parseDate("dd-mm-yy",e);this.plannedSendDate.date=$.datepicker.parseDate("dd-mm-yy",e);this.plannedSendDate.hours=this.defaultDate.hours;this.plannedSendDate.minutes=this.defaultDate.minutes},getPlannedSendDateAsString:function(){return $.datepicker.formatDate("dd-mm-yy",this.plannedSendDate.date)+(this.plannedSendDate.hours<10?" 0":" ")+this.plannedSendDate.hours.toString()+(this.plannedSendDate.minutes<10?":0":":")+this.plannedSendDate.minutes.toString()},setPlannedSendDate:function(e){var t=e.split(" ");this.plannedSendDate.date=$.datepicker.parseDate("dd-mm-yy",t[0]);var i=t[1].split(":");this.plannedSendDate.hours=parseInt(i[0]);this.plannedSendDate.minutes=parseInt(i[1])},getScheduleReminder:function(){return this.isDeadline||this.isSendNow},getRemindCalendarDate:function(){if(this.defaultDate.date.toString()==this.plannedSendDate.date.toString()&&this.defaultDate.hours==this.plannedSendDate.hours&&this.defaultDate.minutes==this.plannedSendDate.minutes){return true}else{return false}},onSave:function(){i.saveReminder(i.reminder)}},getNewReminder:function(e,i){this.reminder.id=0;this.reminder.setDate(e);this.reminder.text="";this.reminder.isEmmUserType=true;this.reminder.notifyAdminId=i.adminId;this.reminder.recipients="";this.reminder.currentAdminName=i.adminName;this.reminder.isDeadline=false;this.reminder.isNotified=false;this.reminder.title=t("calendar.common.new_comment");this.reminder.recipientEmm=i.recipientEmm;this.reminder.recipientCustom=i.recipientCustom;return this.reminder},getReminder:function(e,i){var n=$("#"+e+" .comment-text-content").html()+"";this.reminder.id=this.getReminderIdFromTag(e);this.reminder.setDate(this.getDateFromTag($("#"+e).parent().attr("id")));this.reminder.text=n.replace(/<br>/gi,"\n");this.reminder.isEmmUserType=$("#emm-user-type-"+e).val()=="true";this.reminder.notifyAdminId=$("#notify-admin-id-"+e).val();this.reminder.recipients=$("#recipients-"+e).val();this.reminder.currentAdminName=i;this.reminder.isDeadline=$("#deadline-"+e).val()=="true";this.reminder.isNotified=$("#notified-"+e).val()=="true";this.reminder.setPlannedSendDate($("#plannedSendDate-"+e).val());this.reminder.title=t("calendar.common.edit_comment");return this.reminder},fillCommentDialog:function(e){var t=$("#calendar-dialog-modal");t.find(".modal-title").html(e.title);t.find("#comment-text").val(e.text);t.find('#reminderDetails input[name="userType"][value='+(e.isEmmUserType?e.recipientEmm:e.recipientCustom)+"]").prop("checked",true).trigger("change");t.find("#admin-for-notify").val(e.notifyAdminId);AGN.Lib.Select.get(t.find("#admin-for-notify")).selectValueOrSelectFirst(e.notifyAdminId);t.find("#recipients-text").val(e.recipients);t.find("#isDeadline").prop("checked",e.isDeadline);t.find("#isSendNow").prop("checked",e.isSendNow);t.find("#scheduleReminder").prop("checked",e.getScheduleReminder());t.find("#remindDate").pickadate("picker").set("select",e.plannedSendDate.date);t.find("#remindTime").val(e.plannedSendDate.hours+":"+e.plannedSendDate.minutes)},saveReminder:function(e){var t=$("#comment-text").val();if(AGN.Lib.CalendarService.validateComment(t)){var i=$("#isEmmUserType").prop("checked");var n=AGN.Lib.CalendarService.parseRecipients($("#recipients-text").val());if(i||AGN.Lib.CalendarService.validateEmails(n)){$("#calendar-dialog-modal").modal("hide");e.text=t;e.isEmmUserType=i;if(i){e.notifyAdminId=$("#admin-for-notify").val();e.recipients=""}else{e.notifyAdminId=0;e.recipients=n.join(",")}e.isSendNow=$("#isSendNow").prop("checked");e.isDeadline=$("#isDeadline").prop("checked");if($("#isDeadline").prop("checked")&&$("#scheduleReminder").prop("checked")){var r=$("#remindDate").pickadate("picker"),o=$("#remindTime");e.plannedSendDate.date=AGN.Lib.DateFormat.parseFormat(r.get("select","dd-mm-yyyy"),"dd-MM-yyyy");e.plannedSendDate.hours=o.val().substring(0,2);e.plannedSendDate.minutes=o.val().substring(3,5)}else{e.plannedSendDate.date=e.defaultDate.date;e.plannedSendDate.hours=e.defaultDate.hours;e.plannedSendDate.minutes=e.defaultDate.minutes}AGN.Lib.CalendarService.saveCommentDB(e)}}},getDateFromTag:function(e){return e.substr(e.indexOf("-")+1)},getReminderIdFromTag:function(e){return e.substr(e.indexOf("-")+1)}};AGN.Lib.ReminderService=i})();AGN.Lib.CoreInitializer.new("colorpicker",(function(e){if(!e){e=$(document)}e.find(".js-colorpicker").each((function(){$(this).colorpicker({format:"hex",container:true})}))}));(function(){var e={URL:undefined,reactorChartData:{bindto:"#reactor-type-chart",data:{columns:[],type:"donut",order:null},color:{pattern:["#008F00","#92D050","#CCCDCD","#F43536"]},legend:{position:"right"}},rebuyChartData:{bindto:"#rebuy-rate-chart",data:{columns:[],type:"gauge"},color:{pattern:["#0071B9"]}},revenueChartData:{bindto:"#revenue-chart",data:{columns:[],type:"bar",labels:{show:true,format:function(e,t,i,n){return e}},color:function(e,t){return e}},tooltip:{show:false},axis:{rotated:true,x:{show:false},y:{show:false,min:0,max:150}},legend:{show:false},bar:{width:{ratio:.7}}},progressChartData:{bindto:"#progress-of-used-devices-chart",onrendered:function(){d3.selectAll("#progress-of-used-devices-chart").selectAll(".c3-axis.c3-axis-x").selectAll(".tick text").style("text-anchor","start")},data:{columns:[],groups:[["windows","mac","android","ios","other"]],types:{reactions:"spline"},axes:{reactions:"y2"},names:{},type:"bar",x:"date",xFormat:"%m/%d/%Y",order:null},axis:{x:{type:"timeseries",tick:{culling:true,format:"%m/%d/%Y"}},y:{padding:{top:10},tick:{format:function(e){return e+" %"}}},y2:{show:true,min:0}},bar:{width:{ratio:.5}},tooltip:{format:{value:function(e,t,i){if(i==="reactions"){return e}return e+" %"}}},color:{pattern:["#0071B9","#4C9BCE","#99C6E3","#CCE3F1","#CCCDCD","#555555"]}},devicesChartData:{bindto:"#devices-reacted-on-chart",data:{columns:[],type:"donut",order:null,names:{}},legend:{position:"right"},color:{pattern:["#0071B9","#4C9BCE","#99C6E3","#CCE3F1","#CCCDCD"]}}};var t={reactorChartData:{size:{width:400,height:350}},rebuyChartData:{size:{width:400,height:250}},revenueChartData:{size:{width:350,height:275}},progressChartData:{size:{width:860,height:350}},devicesChartData:{size:{width:400,height:350}}};var i={reactorChartData:{size:{width:350,height:250}},rebuyChartData:{size:{width:250,height:200}},revenueChartData:{size:{width:300,height:250}},progressChartData:{size:{width:550,height:250}},devicesChartData:{size:{width:350,height:250}}};var n=[];var r=null;var o=false;AGN.Lib.RecipientStatsData=e;AGN.Lib.DomInitializer.new("company-insights",(function(){a();s();$("input[type=radio][name=progressOfUsedPeriod]").change((function(){if(this.value=="dates"){$("#progressOfUsedDates").removeClass("hidden")}else{$("#progressOfUsedDates").addClass("hidden")}}));$("#refreshProgressOfUsedDevices").on("click",(function(){s()}));o=g();$(window).resize((function(){if(r!=null)clearTimeout(r);r=setTimeout((function(){var e=g();if(o!=e){o=e;u()}}),200)}))}));function a(){$.ajax({type:"GET",url:AGN.url("/recipient/chart/ajaxStatistic.action"),success:function(e){if(e){c(e["reactorType"],e["notAvailable"]);d(e["rebuyTitle"],e["rebuyRate"],e["notAvailable"]);f(e["revenue"],e["notAvailable"]);m(e);AGN.Lib.CoreInitializer.run("equalizer")}}})}function s(){var e={};var t=$("input[name=progressOfUsedPeriod]:checked").val();if(t=="month"){e["byMonth"]=true}else if(t=="dates"){e["from"]=$("#progressOfUsedFrom").val();e["till"]=$("#progressOfUsedTill").val()}$.ajax({type:"GET",url:AGN.url("/recipient/chart/progressOfUsedDevices.action"),data:e,success:function(e){p(e);AGN.Lib.CoreInitializer.run("equalizer")}})}function l(r){var o=e[r+"Data"];if(o==undefined){return}var a=g()?t:i;var s=a[r+"Data"];$.extend(true,o,s);$("#"+r).removeClass("hidden");c3.generate(o);if(n.indexOf(r)==-1){n.push(r)}}function u(){n.forEach((function(e){l(e)}))}function c(t,i){if(t===undefined){return}var n=[];var r=false;for(var o in t){if(t.hasOwnProperty(o)){n.push([o,t[o]]);if(t[o]>0){r=true}}}if(!r){n=[[i,100]];e.reactorChartData.color.pattern=["#CCCDCD"]}else{if(n.length==4){e.reactorChartData.color.pattern=["#008F00","#92D050","#CCCDCD","#F43536"]}else{e.reactorChartData.color.pattern=["#92D050","#CCCDCD","#F43536"]}}e.reactorChartData.data.columns=n;l("reactorChart")}function d(t,i,n){if(i===undefined){return}if(i>0){e.rebuyChartData.data.columns=[[t,h(i)]]}else{e.rebuyChartData.gauge={};e.rebuyChartData.gauge.label={};e.rebuyChartData.gauge.label.format=function(e,t){return n};e.rebuyChartData.gauge.label.show=false;e.rebuyChartData.data.columns=[[n,0]]}l("rebuyChart")}function f(t,i){if(t===undefined){return}var n=["#0071B9","#4C9BCE","#99C6E3","#CCCDCD"];var r=[];var o=[""];var a=[];var s=[];var u=0;var c=0;var d=false;for(var f in t){if(t.hasOwnProperty(f)){var p=t[f];r.push(f);if(p>0){d=true;a.push(p);u+=p}else{a.push(0)}}}if(d){var h=g()?70:60;var m=false;for(var v=0;v<a.length;v++){s[v]=Math.round(a[v]/u*100);c+=s[v];if(s[v]>=70){m=true}}if(c!=100){s[s.length-1]+=100-c}for(v=0;v<s.length;v++){o.push(25+(m?s[v]*h/100:s[v]))}e.revenueChartData.data.labels.format=function(e,t,i,n){return s[i]+"% "+r[i]}}else{for(v=0;v<r.length;v++){o.push(50);s[v]=25}e.revenueChartData.data.labels.format=function(e,t,n,r){return i}}e.revenueChartData.data.columns=[o];e.revenueChartData.data.color=function(e,t){if(t.value!=undefined){return n[t.index]}return e};l("revenueChart")}function p(t){if(t===undefined||t["usedDevicesByPeriods"]===undefined||t["usedDevices"]===undefined){return}var i={windows:t["windowsTitle"],mac:t["macTitle"],android:t["androidTitle"],ios:t["iosTitle"],other:t["otherTitle"],reactions:t["numberOfReactions"]};var n=t["usedDevices"];var r=[];var o=[];o.push({name:"windows",count:n["windows"]});o.push({name:"mac",count:n["mac"]});o.push({name:"android",count:n["android"]});o.push({name:"ios",count:n["ios"]});o.sort((function(e,t){return t.count-e.count}));for(var a=0;a<o.length;a++){r.push([i[o[a].name],o[a].count])}r.push([t["otherTitle"],n["other"]]);e.devicesChartData.data.columns=r;e.devicesChartData.data.names=i;l("devicesChart");var s=[];var u=[];for(var c=0;c<o.length;c++){u[o[c].name]=c;s.push([o[c].name])}s.push(["other"],["reactions"],["date"]);for(var d=0;d<t["usedDevicesByPeriods"].length;d++){var f=t["usedDevicesByPeriods"][d];var p=f["windows"];var g=f["mac"];var m=f["android"];var v=f["ios"];var y=f["other"];var b=p+g+m+v+y;s[u["windows"]].push(h(p/b));s[u["mac"]].push(h(g/b));s[u["android"]].push(h(m/b));s[u["ios"]].push(h(v/b));s[4].push(h(y/b));s[5].push(b);s[6].push(f["date"])}e.progressChartData.data.columns=s;e.progressChartData.data.names=i;e.progressChartData.data.xFormat=t["dateFormat"];e.progressChartData.axis.x.min=t["min"];e.progressChartData.axis.x.max=t["max"];e.progressChartData.axis.x.tick.format=t["dateFormat"];l("progressChart")}function h(e){return Math.round(1e3*e)/10}function g(){return $(window).width()>=1600}function m(e){C(e["favoriteOpeningDays"]);A(e["favoriteOpeningHours"]);v(e["ctr"]);y(e["conversion"]);b(e["pageImpressions"]);_(e["pageImpressionsPerVisit"]);w(e["pageImpressionsPerBuy"])}function v(e){$("#ctr-val").text(e.toString().replace(".",","))}function y(e){if(e!=0){$("#conversion-val").text(e.toString().replace(".",","))}else{$("#conversion-val").text("---");$("#conversion-val").parent().find(".l-stat-sign").text("")}}function b(e){if(e!=0){$("#pi-val").text(e.toString().replace(",","."))}else{$("#pi-val").text("---");$("#pi-val").parent().find(".l-stat-sign").text("")}}function _(e){if(e!=0){$("#pi-visit-val").text(e.toString().replace(",","."))}else{$("#pi-visit-val").text("---");$("#pi-visit-val").parent().find(".l-stat-sign").text("")}}function w(e){if(e!=0){$("#pi-buy-val").text(e.toString().replace(",","."))}else{$("#pi-buy-val").text("---");$("#pi-buy-val").parent().find(".l-stat-sign").text("")}}function C(e){var t=$("#favOpeningDays").find(".stat-fav-day");E(e,t)}function A(e){var t=$("#favOpeningHours").find(".stat-fav-time");E(e,t)}function E(e,t){var i=t.closest(".l-stat-content").find("hr");var n=0;var r=x(e);$.each(e,(function(e,o){t.find(".l-stat-name").text(e);t.find(".l-stat-val").text(o);n++;if(n<r){var a=t.clone();a.insertAfter(i);t=a;if(n<r-1){i=i.clone();i.insertAfter(t)}}}))}function x(e){var t=0;$.each(e,(function(e,i){t++}));return t}})();AGN.Lib.DomInitializer.new("connection-speed-test",(function(){var e=this.config.SLOW_CONNECTION_THRESHOLD_KBPS;var i=this.config.SPEED_TEST_RESOURCE_SIZE;var n=300;var r=6e4;var o=false;var a=false;var s=false;var l;function u(e){return e.indexOf("/connectionSpeedTest")>=0||e.indexOf("/connectionSpeed")>=0}$(document).ajaxSend((function(e,t,i){if(!u(i.url)){if(s){o=true}a=true;if(i.url.indexOf("/lock.action")<0){f()}}else{s=true;o=false;l=Date.now()}}));$(document).ajaxStop((function(){a=false}));function c(){var e=true;$("img").each((function(t,i){if(!i.complete){e=false}}));return e}function d(){if(a){setTimeout(d,2e3)}else{if(c()){p()}}}var f=_.throttle((function(){d()}),r);function p(){AGN.Lib.Loader.prevent();$.ajax({type:"GET",url:AGN.url("/connectionSpeed/test.action")+"?cacheKiller="+Date.now(),timeout:1e4}).done((function(e){if(!o){h()}s=false})).fail((function(e,t){if(t==="timeout"){g(0);s=false}}))}function h(){var e=(Date.now()-l)/1e3;var t=(i+n)*8/e;var r=m(t);g(r)}function g(i){var n=i>e;var r=$("#internet-indicator");r.data("tooltip",n?t("defaults.ok"):i+" Kbit/s");AGN.Lib.CoreInitializer.run("tooltip",r.parent());r.find("i").css("color",n?"#109e4d":"#ffa300")}function m(e){return(e/1e3).toFixed(2)}window.addEventListener("offline",(function(){g(0)}));return false}));AGN.Lib.CoreInitializer.new("csrf",(function(e){if(!e){e=$(document)}e.find('meta[name="_csrf_header"]').each((function(){window.csrfHeaderName=$(this).attr("content");window.csrfCookieName=window.csrfHeaderName}));e.find('meta[name="_csrf_parameter"]').each((function(){window.csrfParameterName=$(this).attr("content")}))}));(function(){AGN.Lib.CoreInitializer.new("dark-theme",(function(){if($("body").hasClass("dark-theme")){$("iframe").each((function(){var e=$(this);e.on("load.iframe",(function(){e.contents().find("body").addClass("dark-theme")}))}))}}))})();(function(){var e;e={data:{chartsColors:["#0071b9","#009999","#92d050","#41641a","#ffc000"],statChartData:{columnTitles:[],c3data:{bindto:".js-stat-chart",data:{columns:[],type:"bar",labels:true},axis:{x:{tick:{centered:true,fit:true,format:function(t){return e.data.statChartData.columnTitles[t]}}}},legend:{show:false},tooltip:{format:{title:function(){return null},name:function(t,i,n,r){return e.data.statChartData.columnTitles[r]},value:function(e,t,i,n){return e}}},padding:{right:25}},build:function(e,t){this.columnTitles=e;var i=t.slice(0);i.unshift("values");this.c3data.data.columns=[i];return this.c3data}},clickChartData:{c3data:{bindto:".js-click-chart",data:{rows:[],type:"donut"},size:{height:150},donut:{title:"",label:{show:false},width:15},legend:{position:"right"},tooltip:{show:false}},build:function(t,i,n){this.c3data.donut.title=t;this.c3data.data.rows=[i,n];var r={};for(var o=0;o<i.length;o++){r[i[o]]=e.data.chartsColors[o]}this.c3data.data.colors=r;return this.c3data}},viewChartData:{c3data:{bindto:".js-view-chart",data:{rows:[],type:"donut"},size:{height:150},donut:{title:"",label:{show:false},width:15},legend:{position:"right"},tooltip:{show:false}},build:function(t,i,n){this.c3data.donut.title=t;this.c3data.data.rows=[i,n];var r={};for(var o=0;o<i.length;o++){r[i[o]]=e.data.chartsColors[o]}this.c3data.data.colors=r;return this.c3data}}},updateCharts:function(t){jQuery.ajax({type:"GET",url:AGN.url("/dashboard/statistics.action"),data:{mailingId:t},success:function(t){var i;var n;var r;t=_.merge({common:[["no Data","0"]],clickers:[["no Data","0"]],clickersPercent:[0],openers:[["no Data","0"]],openersPercent:[0]},t);i=[];n=[];for(var o=0;o<t["common"].length;o++){var a=parseInt(t["common"][o][1]);i.push(t["common"][o][0]);n.push(a)}c3.generate(e.data.statChartData.build(i,n));i=[];n=[];r=0;for(var o=0;o<t["clickers"].length;o++){var a=e.roundTo(t["clickers"][o][1]*100,1);i.push(t["clickers"][o][0]);n.push(a);r+=a}if(!isNaN(r)&&r>0){for(var o=0;o<n.length;o++){i[o]+=" "+e.roundTo(100*n[o]/r,1)+"%"}}var s=e.roundTo(t["clickersPercent"][0]*100,1)+"%*";c3.generate(e.data.clickChartData.build(s,i,n));i=[];n=[];r=0;for(var o=0;o<t["openers"].length;o++){var a=e.roundTo(t["openers"][o][1]*100,1);i.push(t["openers"][o][0]);n.push(a);r+=a}if(!isNaN(r)&&r>0){for(var o=0;o<n.length;o++){i[o]+=" "+e.roundTo(100*n[o]/r,1)+"%"}}var l=e.roundTo(t["openersPercent"][0]*100,1)+"%*";c3.generate(e.data.viewChartData.build(l,i,n));AGN.Lib.CoreInitializer.run("equalizer")}})},roundTo:function(e,t){return parseFloat(e).toFixed(t)*1}};AGN.Lib.DashboardStatisticsService=e})();(function(){var e=AGN.Lib.Helpers;AGN.Lib.CoreInitializer.new("pickadate",(function(t){if(!t){t=$(document)}_.each(t.find(".js-datepicker"),(function(t){var i=$(t),n,r,o={editable:true,min:new Date(0,0,0),max:new Date(9999,11,31),maxFor:undefined,minFor:undefined,klass:{holder:"datepicker__holder picker__holder"+(i.hasClass("js-datepicker-right")?" datepicker__holder-right":"")}};r=_.merge({},o,e.objFromString(i.data("datepicker-options")));n=i.pickadate("picker");if(n&&n.get("start")){return}$(t).pickadate(r);n=i.pickadate("picker");n.on("open",(function(){this.$node.parents(".input-group").find(".js-open-datepicker").addClass("is-active")}));n.on("close",(function(){this.$node.parents(".input-group").find(".js-open-datepicker").removeClass("is-active")}));if(r.maxFor){i.on("change",(function(){var e=$(this).val()||r.min;if(e){$(r.maxFor).pickadate("picker").set("max",e)}}))}if(r.minFor){i.on("change",(function(){var e=$(this).val()||r.max;if(e){$(r.minFor).pickadate("picker").set("min",e)}}))}var a=true;i.on("change",(function(){if(a){var e=$(this);var t=e.pickadate("picker");try{a=false;if(e.val()){t.set("select",e.val())}else{t.set("clear")}}finally{a=true}}}))}));_.each(t.find(".js-timepicker"),(function(t){var i=$(t),n,r,o={mask:"h:halfs",oncomplete:function(){i.trigger("timepicker:complete")},onincomplete:function(){i.trigger("timepicker:incomplete")}};n=_.merge({},o,e.objFromString(i.data("timepicker-options")));r=n.mask;delete n.mask;i.inputmask(r,n);i.attr("placeholder",i.data("_inputmask").opts.placeholder)}))}))})();AGN.Lib.CoreInitializer.new("delegate",(function(e){if(!e){e=$(document)}e.all("[data-delegate]").each((function(){var e=$(this),t=e.data("delegate"),i=e.data("delegate-events")||"click";e.on(i,(function(e){var i=$(t);if(i.length>0){i.trigger($.Event(e))}}))}))}));(function(){var e=AGN.Lib.Helpers;AGN.Lib.CoreInitializer.new("display-dimensions",(function(t){if(!t){t=$(document)}_.each(t.find("[data-display-dimensions]"),(function(t){var i=$(t),n=e.objFromString(i.data("display-dimensions"))["scope"],r=i.parents(n),o=r.find("[data-dimensions]");i.ensureLoad((function(){var e=t.naturalWidth,i=t.naturalHeight;o.html(e+" x "+i+" px")}))}))}))})();AGN.Lib.CoreInitializer.new("dragster",(function(e){if(!e){e=$(document)}e.find(".dropzone").each((function(){new Dragster(this)}))}));AGN.Lib.CoreInitializer.new("dropdown-expand",(function(e){if(!e){e=$(document)}_.each(e.find("[data-dropdown-expand]"),(function(e){var t,i,n=$(e),r=n.find(".dropdown-menu"),o=n.data("dropdown-expand"),a=$(o),s=[];n.removeClass("hidden");r.html("");t=a.parent().width();i=a.children().filter(n).outerWidth(true)+15;_.each(a.siblings(),(function(e){var i=$(e);t=t-i.outerWidth(true)}));n.addClass("hidden");_.reduce(a.children().not(n),(function(e,i){var o=$(i);o.removeClass("hidden");e=e+o.outerWidth(true);if(e>=t){n.removeClass("hidden");r.append(o.clone());o.addClass("hidden")}return e}),i)}))}));AGN.Lib.CoreInitializer.new("dropzone",(function(){Dropzone.autoDiscover=false}));AGN.Lib.CoreInitializer.new("emoji",(function(e){if(!e){e=$(document)}e.all("[data-emoji]").each((function(){$(this).emojioneArea({placeholder:null})}))}));(function(){var e=AGN.Lib.Equalizer;AGN.Lib.CoreInitializer.new("equalizer",(function(t){if(!t){t=$(document)}window.setTimeout((function(){t.find("[data-equalizer]").each((function(){e($(this))}))}),1)}))})();(function(){var e=AGN.Lib.Form;AGN.Lib.CoreInitializer.new("form",["select"],(function(i){if(!i){i=$(document)}i.find("form input[type=text], form input[type=password]").on("keyup keypress",(function(e){var t=e.keyCode||e.which;if(t===13){e.preventDefault();return false}}));var n=i.all("form[data-form-focus]").first();if(n.exists()){setTimeout((function(){var e=n.find('[name="'+n.data("form-focus")+'"]');if(e.exists()&&!e.is(":disabled")&&!e.is(":hidden")){t(e)}}),10)}_.each(i.find("form"),(function(t){e.get($(t))}))}));function t(t){var i;var n=25;var r=e.get(t).$form;var o=t.closest("[data-sizing=scroll], .modal").first();if(!o.length){o=$(document);i=t.offset().top-r.offset().top-n}else{i=t.offset().top-o.offset().top+o.scrollTop()-n}t.trigger("focus");o.scrollTop(i)}})();AGN.Lib.DomInitializer.new("formbuilder",(function(e){var t=AGN.Lib.Tooltip;if(!e){e=$(document)}var i=this.config;var n=$("script#"+CSS.escape("config:formbuilderCommon")+'[type="application/json"]');if(n.length===1){i=$.extend(n.json(),i)}_.each(e.find(".js-form-builder"),(function(e){AGN.Lib.FormBuilder.FormBuilder.get(e,i).promise().then((function(){var i=$(e);i.find(".form-actions button").each((function(){var e=$(this);t.create(e,{title:e.text()})}))}))}));_.each(e.find(".modal-js-form-builder"),(function(e){var t=$(e).attr("data-target-formbuilder");if(!t){return}var n=$(t);if(!n){return}var r=AGN.Lib.FormBuilder.FormBuilder.get(n);AGN.Lib.FormBuilder.FormBuilder.get(e,i).setJson(r.getJson())}))}));AGN.Lib.CoreInitializer.new("icons-defs",(function(e){if(!e){e=$(document)}_.each(e.find("[data-icon]"),(function(e){var t=$(e);var i=AGN.url("assets/icons-defs.svg#"+t.data("icon"),true);t.html('<svg viewBox="0 0 45 45"><use xlink:href="'+i+'"/></svg>')}));svg4everybody()}));AGN.Lib.CoreInitializer.new("iframe",(function(e){if(!e){e=$(document)}e.find("iframe:not(.js-fixed-iframe)").each((function(){var e=this,t=$(this);if(t.hasClass("js-simple-iframe")){var i=t.parent(),n=i.parent(),r=parseInt(t.data("max-width")),o=parseInt(t.data("height-extra"))||10,a=t.data("media-query"),s=!!window.sidebar,l,u;l=function(){var i=e.contentDocument?e.contentDocument:e.contentWindow.document,n=i.body,l=i.documentElement,c,d;if(a){d=r}else{d=Math.max(n.scrollWidth,n.offsetWidth,l.clientWidth,l.scrollWidth,l.offsetWidth)}c=Math.min(n.scrollHeight,n.offsetHeight,l.clientHeight,l.scrollHeight,l.offsetHeight);t.height(c);c=Math.max(n.scrollHeight,n.offsetHeight,l.clientHeight,l.scrollHeight,l.offsetHeight);c+=o;t.height(c);if(t.data("max-width")!=="100%"){t.width(d)}if(a&&s){t.contents().find("body").css("overflow","hidden")}u()};u=function(){n.width("auto");if(t.data("max-width")!=="100%"){if(t.width()>r&&r>n.width()){i.width(t.width())}else{i.width(Math.min(r,n.width()))}}if(!a){i.doubleScroll();i.parent().doubleScroll();$(".doubleScroll-scroll-wrapper").css("margin","0 auto")}};t.off("load.iframe");t.on("load.iframe",(function(){window.setTimeout((function(){l();var t=$(e.contentDocument.body);if(typeof t.imagesLoaded==="function"){t.imagesLoaded().progress(_.throttle(l,100)).always(l)}$(window).off("viewportChanged.iframe",u);$(window).on("viewportChanged.iframe",u)}),50)}))}else{t.on("load.iframe",(function(){window.setTimeout((function(){t.iFrameResize({heightCalculationMethod:"grow",enablePublicMethods:true})}),50)}))}}))}));AGN.Lib.CoreInitializer.new("image-editor",(function(e){if(!e){e=$(document)}_.each(e.find("#editor-canvas"),(function(e){var t=e.getContext("2d");var i=new Image;i.src=$("#editor-img").attr("src");$("#editor-result").val("");i.onload=function(){var e=i.width;var n=i.height;t.canvas.width=e;t.canvas.height=n;t.drawImage(i,0,0,e,n);$("#l-editor-img-width").attr("value",e);$("#l-editor-img-height").attr("value",n);$("#l-editor-img-percent").attr("value",100);var r=e+$("#l-img-editor-tools").width()+10;$("#l-img-editor").css("min-width",r);var o=$("#editor-img").data("content-type");var a=t.canvas.toDataURL(o);$("#editor-result").attr("value",a)}}))}));(function(){var e=AGN.Lib.Helpers;AGN.Lib.CoreInitializer.new("input-mask",(function(t){if(!t){t=$(document)}_.each(t.find(".js-inputmask"),(function(t){var i=$(t);var n;var r;n=_.merge({},e.objFromString(i.data("inputmask-options")));r=n.mask;delete n.mask;i.inputmask(r,n)}))}))})();$.fn.queryBuilder.defaults({templates:{group:'<dl id="{{= it.group_id }}" class="rules-group-container">   <dt class="rules-group-header">     <div class="btn-group pull-right group-actions">       <button type="button" class="btn btn-xs btn-primary" data-add="rule">         <i class="{{= it.icons.add_rule }}"></i> {{= it.translate("add_rule") }}       </button>       {{? it.settings.allow_groups===-1 || it.settings.allow_groups>=it.level }}         <button type="button" class="btn btn-xs btn-primary" data-add="group">           <i class="{{= it.icons.add_group }}"></i> {{= it.translate("add_group") }}         </button>       {{?}}       {{? it.level>1 }}         <button type="button" class="btn btn-xs btn-alert" data-delete="group">           <i class="{{= it.icons.remove_group }}"></i> {{= it.translate("delete_group") }}         </button>       {{?}}     </div>     <div class="btn-group group-conditions">       {{~ it.conditions: condition }}         <label class="btn btn-xs btn-primary">           <input type="radio" name="{{= it.group_id }}_cond" value="{{= condition }}"> {{= it.translate("conditions", condition) }}         </label>       {{~}}     </div>     {{? it.settings.display_errors }}       <div class="error-container"><i class="{{= it.icons.error }}"></i></div>     {{?}}   </dt>   <dd class=rules-group-body>     <ul class=rules-list></ul>   </dd> </dl>'}});$.fn.queryBuilder.defaults({templates:{rule:'<li id="{{= it.rule_id }}" class="rule-container">   <div class="rule-header clearfix">     <div class="btn-group pull-right rule-actions">       <button type="button" class="btn btn-regular btn-alert" data-delete="rule">         <i class="{{= it.icons.remove_rule }}"></i>       </button>     </div>     <div class="rule-operator-conditions-container pull-right"></div>   </div>   {{? it.settings.display_errors }}     <div class="error-container"><i class="{{= it.icons.error }}"></i></div>   {{?}}   <div class="rule-filter-container"></div>   <div class="rule-operator-container"></div>   <div class="rule-value-container"></div> </li>'}});$.fn.queryBuilder.defaults({templates:{filterSelect:'{{ var optgroup = null; }} <select class="form-control js-select" name="{{= it.rule.id }}_filter">   {{? it.settings.display_empty_filter }}     <option value="-1">{{= it.settings.select_placeholder }}</option>   {{?}}   {{~ it.filters: filter }}     {{? optgroup !== filter.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = filter.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= filter.id }}">{{= it.translate(filter.label) }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>'}});$.fn.queryBuilder.defaults({templates:{ruleValueSelect:'{{ var optgroup = null; }} <select class="form-control js-select" name="{{= it.name }}" {{? it.rule.filter.multiple }}multiple{{?}}>   {{? it.rule.filter.placeholder }}     <option value="{{= it.rule.filter.placeholder_value }}" disabled selected>{{= it.rule.filter.placeholder }}</option>   {{?}}   {{~ it.rule.filter.values: entry }}     {{? optgroup !== entry.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = entry.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= entry.value }}">{{= entry.label }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>'}});$.fn.queryBuilder.defaults({icons:{add_group:"icon icon-plus-circle",add_rule:"icon icon-plus",remove_group:"icon icon-times",remove_rule:"icon icon-trash",error:"icon icon-exclamation-triangle"}});(function(){var e=AGN.Lib.Load;AGN.Lib.CoreInitializer.new("load",(function(t){if(!t){t=$(document)}_.each(t.find("[data-load]"),(function(t){window.setTimeout((function(){e.load($(t))}),100)}))}))})();AGN.Lib.DomInitializer.new("logon-complete",(function(e){var t=AGN.Lib.Form.get(e);var i={};window.adminId=this.config.adminId;if(this.config){$.each(this.config.webStorageBundleNames,(function(e,t){try{var n=AGN.Lib.Storage.get("web-storage#"+t);if(n!=null){i[t]=n}}catch(e){console.error(e)}}));var n=AGN.Lib.Storage.get("login-page")||{};n.isFrameShown=!!this.config.isFrameShown;AGN.Lib.Storage.set("login-page",n)}t.setValue("webStorageJson",JSON.stringify(i));t.submit()}));(function(){var e=30;function i(){return AGN.Lib.Storage.get("login-page")||{}}function n(e){AGN.Lib.Storage.set("login-page",e)}function r(){var t=i();if(t){if(t.notificationDismissExpiration){return t.notificationDismissExpiration<=Date.now()}}var n=localStorage.getItem("closedDate");if(n){var r=new Date;var o=new Date(n);o.setDate(o.getDate()+e);return r-o>0}return true}function o(){var t=i();var r=new Date;r.setDate(r.getDate()+e);t.notificationDismissExpiration=r.getTime();n(t)}function a(){return i().isFrameShown==false}AGN.Lib.DomInitializer.new("logon",(function(e){e.toggleClass("l-hide-frame",a());e.removeClass("hidden");if(r()&&this.config.SHOW_TAB_HINT===true){var i=t("defaults.info");var n=t("logon.info.multiple_tabs");AGN.Lib.Messages(i,n,"info",o,false)}}))})();(function(){var e=45e3;var i=3*60*6e4;AGN.Opt.Components.MailingContentLock={manageLock:function(n,r,o){if(n>0&&r){var a=Date.now();var s;var l=function(){if(a+i>Date.now()){$.ajax({url:AGN.url("/mailing/ajax/"+n+"/lock.action"),type:"POST",success:function(e){if(e.success!==true){clearInterval(s)}},statusCode:{404:function(){clearInterval(s)}}})}else{clearInterval(s);$(document).trigger("ajax:unauthorized");$.ajax({url:AGN.url("/logout.action"),type:"POST",success:function(){$("body").append(AGN.Lib.Template.text("session-expired"))}})}};s=setInterval(l,e);return true}else{AGN.Lib.Modal.createFromTemplate({modalClass:"",title:t("defaults.warning"),content:t("error.mailing.exclusiveLockingFailed",o)},"modal");return false}}}})();AGN.Lib.DomInitializer.new("mailing-content-overview",(function(e,t){var i=this.config;if(!t){var n=AGN.Lib.Storage.get("mailings-content-dynNameID");if(n){var r=$("tr[data-dyn-name-id='"+n.dynNameID+"']");if(r.exists()){var o=r.position().top;setTimeout((function(){$("body").scrollTop(o)}),1);AGN.Lib.Storage.set("mailings-content-dynNameID",{dynNameID:0})}}}var a=$("#myDatePicker");if(a.exists()){a.pickadate("picker").on({set:function(e){if("select"in e){var t=new Date(e.select);$("#startDay").val(t.getDate());$("#startMonth").val(t.getMonth()+1);$("#startYear").val(t.getFullYear())}else{$("#startDay").val(0);$("#startMonth").val(0);$("#startYear").val(0)}}});var s=$("#myTimePicker");s.on("timepicker:complete",(function(){var e=s.val();$("#startHour").val(e.substr(0,2));$("#startMinute").val(e.substring(3,5))}));s.on("timepicker:incomplete",(function(){$("#startHour").val(0);$("#startMinute").val(0)}))}if(!i.isEditableMailing||!AGN.Opt.Components.MailingContentLock.manageLock(i.mailingId,i.isMailingExclusiveLockingAcquired,i.anotherLockingUserName)){var l=$('[data-controls-group="editing"]');l.prop("disabled",true);l.addClass("disabled")}}));AGN.Lib.DomInitializer.new("mailing-content-view",(function(e){AGN.Lib.Storage.set("mailings-content-dynNameID",{dynNameID:e.data("dyn-name-id")})}));AGN.Lib.Controller.new("mailing-followup-options",(function(){var e;var t="";var i=[];this.addDomInitializer("mailing-followup-options",(function(){e=$("#followUpType");t=$("#lightWeightMailingList");i=this.config.additionalOptions;r();t.on("change",(function(){r()}))}));var n=function(){return AGN.Lib.Template.text("followupAdvertisingOptions",{items:i})};var r=function(){var i=AGN.Lib.Select.get(t).getSelectedValue();e.children(".advertisingOption").remove();if(i){$.ajax({type:"POST",url:AGN.url("/mailing/ajax/"+i+"/isAdvertisingContentType.action")}).done((function(t){if(t&&t.success){e.append(n())}}))}}}));AGN.Lib.DomInitializer.new("mailing-overview-filters",(function(){$("#filtersDescription").html(AGN.Lib.Template.text("mailing-overview-filters",this.config));$("#mailing").after($("#mailings-overviewPreview"))}));AGN.Lib.DomInitializer.new("mailing-overview-table",(function(e){e.removeClass("hidden")}));AGN.Lib.DomInitializer.new("mediapool-image-pick",(function(e){var i=e.find("#mediapool-image-pick-options");var n=e.find("#mediapool-browser-results");var r=e.find(".modal-body");var o=e.find("#mpFilterKeywords");var a=e.find("#mpFilterCategory");var s=e.find("#mpSortCriteria");var l=e.find("#mpIsAscendingSortOrder");var u=AGN.Lib.Template.prepare("mediapool-browser-results-template");var c=AGN.Lib.Select.get(a);function d(e){var t=e.data("image-id");if(t>0){var i=f.images.find((function(e){return e.id===t}));return i||{id:t}}return null}var f=i.json();var p=null;if(f.images){n.html(u({results:f.images,fullListSize:f.fullListSize}))}if(e.is("[load-filters-on-init]")){g()}if(e.is("[load-images-on-init]")){h()}function h(){r.addClass("ui-modal-loading");$.ajax({type:"POST",url:f.urls.MEDIAPOOL_SEARCH,data:{categoryId:a.val(),keywords:o.val(),sortCriteria:s.val(),isAscendingSortOrder:l.val()}}).done((function(e){var t=e.fullListSize;var i=e.partialList;n.html(u({results:i,fullListSize:t}));f.images=i;p=null})).fail((function(){n.html(u({results:[],fullListSize:0}));f.images=[];p=null})).always((function(){r.removeClass("ui-modal-loading")}))}function g(){$.ajax({type:"GET",url:f.urls.FILTERS_JSON}).done((function(e){_.each(e.categories,(function(e){c.addFormattedOption('<option value="'+e.id+'" data-id="'+e.id+'" data-parent-id="'+e.parentId+'">'+e.shortname+"</option>")}))}))}this.addAction({click:"mpSearchImages",enterdown:"mpFilterKeywords"},h);this.addAction({dblclick:"mpSelectImage"},(function(){var t=d(this.el);if(t){AGN.Lib.Confirm.get(e).positive(t)}}));this.addAction({click:"mpSelectImage"},(function(){if(p){p.removeClass("active")}p=this.el;p.addClass("active")}));this.addAction({click:"mpAcceptImage"},(function(){if(p){var i=d(p);if(i){AGN.Lib.Confirm.get(e).positive(i)}}else{AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")}}))}));AGN.Lib.CoreInitializer.new("menu",(function(){AGN.Lib.Menu.init()}));(function(){var e={data:{chartsColors:["#26b98a"],statChartData:{columnTitles:[],c3data:{bindto:"#barchart-message-stats",data:{columns:[],type:"bar",labels:true},axis:{x:{tick:{centered:true,fit:true,format:function(t){return e.data.statChartData.columnTitles[t]}}},y:{show:false}},legend:{show:false},tooltip:{format:{title:function(){return null},name:function(t,i,n,r){return e.data.statChartData.columnTitles[r]},value:function(e,t,i,n){return e}}},padding:{right:25,left:25}},build:function(e){this.columnTitles.push(e.shift());e.unshift("values");this.c3data.data.columns=[e];return this.c3data}}},updateChart:function(t){$.ajax({type:"GET",url:t,success:function(t){c3.generate(e.data.statChartData.build(t));AGN.Lib.CoreInitializer.run("equalizer")}})}};AGN.Lib.MessageStatisticsService=e;AGN.Lib.DomInitializer.new("message-stat",(function(t){var i=AGN.Lib.Helpers.objFromString(t.data("config"));if(i&&i.url){e.updateChart(i.url)}}))})();(function(){AGN.Lib.DomInitializer.new("news-editor-period",(function(t){e(t)}));function e(e){if(!e){e=$(document)}var i=[];_.each(e.find(".js-datepicker"),(function(e){var t=$(e);if(t.hasClass("js-datepicker-period-start")){if(!(t.attr("datepicker-period-id")in i)){i[t.attr("datepicker-period-id")]={startEl:null,endEl:null}}i[t.attr("datepicker-period-id")].startEl=t}if(t.hasClass("js-datepicker-period-end")){if(!(t.attr("datepicker-period-id")in i)){i[t.attr("datepicker-period-id")]={startEl:null,endEl:null}}i[t.attr("datepicker-period-id")].endEl=t}}));for(var n=0;n<i.length;n++){t(i[n].startEl.pickadate("picker"),i[n].endEl.pickadate("picker"))}}function t(e,t){var i=e;var n=t;if(i.get("value")){n.set("min",i.get("select"))}if(n.get("value")){i.set("max",n.get("select"))}i.on("set",(function(e){if(e.select){n.set("min",i.get("select"))}else if("clear"in e){n.set("min",false)}}));n.on("set",(function(e){if(e.select){i.set("max",n.get("select"))}else if("clear"in e){i.set("max",false)}}))}})();(function(){var e={data:{chartsColors:["#0071b9","#009999","#92d050","#41641a","#ffc000"],browserChartData:{c3data:{bindto:"#notificationGlobalBrowserStat",data:{rows:[],type:"donut"},donut:{label:{show:true}},legend:{position:"right"},tooltip:{show:false}},build:function(t,i){this.c3data.data.rows=[t,i];var n={};for(var r=0;r<t.length;r++){n[t[r]]=e.data.chartsColors[r]}this.c3data.data.colors=n;return this.c3data}}},roundTo:function(e,t){return parseFloat(e).toFixed(t)*1},updateChart:function(t){$.ajax({type:"GET",url:t,success:function(t){if(t&&(t.warning&&t.warning.length>0)){AGN.Lib.JsonMessages(t,true)}else{var i=[];var n=[];var r=0;for(key in t){var o=e.roundTo(t[key]*100,1);i.push(key);n.push(o);r+=o}if(!isNaN(r)&&r>0){for(var a=0;a<n.length;a++){i[a]+=" "+e.roundTo(100*n[a]/r,1)+"%"}}c3.generate(e.data.browserChartData.build(i,n));AGN.Lib.CoreInitializer.run("equalizer")}}})}};AGN.Lib.GLobalNotificationBrowserStatService=e;AGN.Lib.DomInitializer.new("notification-global-browser-stat",(function(e){var t=AGN.Lib.Helpers.objFromString(e.data("config"));if(t&&t.url){AGN.Lib.GLobalNotificationBrowserStatService.updateChart(t.url)}}))})();(function(){var e={data:{chartColors:["#0071b9","#006600","#b30000"],globalProgressChartData:{columnTitles:[],c3data:{bindto:"#notificationGlobalProgressStat",data:{x:"x",columns:[]},axis:{x:{type:"category",tick:{centered:true,fit:false}}},padding:{right:25}},build:function(t,i,n,r){this.c3data.data.columns=[t,i,n,r];var o={};o[i[0]]=e.data.chartColors[0];o[n[0]]=e.data.chartColors[1];o[r[0]]=e.data.chartColors[2];this.c3data.data.colors=o;return this.c3data}}},updateChart:function(t){var i=["x"];var n=[];var r=[];var o=[];var a=$("#selectMode").val();var s=$("#selectMonth").val();var l=$("#selectYear").val();var u=$("#startDay").val();var c=$("#endDay").val();$.ajax({type:"GET",url:t,data:{dateMode:a,selectMonth:s,selectYear:l,startDay:u,endDay:c},success:function(t){if(t&&t.warning&&t.warning.length>0){AGN.Lib.JsonMessages(t,true)}else{for(objIndex in t){var a=t[objIndex];for(objKey in a){if(objIndex==0&&objKey!="time"){if(n.length==0){n.push(objKey)}else if(r.length==0){r.push(objKey)}else if(o.length==0){o.push(objKey)}}var s=a[objKey];if(objKey=="time"){i.push(s)}else if(objKey==n[0]){n.push(s)}else if(objKey==r[0]){r.push(s)}else if(objKey==o[0]){o.push(s)}}}c3.generate(e.data.globalProgressChartData.build(i,n,r,o));AGN.Lib.CoreInitializer.run("equalizer")}}})}};AGN.Lib.GLobalNotificationProgressStatService=e;AGN.Lib.DomInitializer.new("notification-global-progress-stat",(function(e){var t=AGN.Lib.Helpers.objFromString(e.data("config"));if(t&&t.url){AGN.Lib.GLobalNotificationProgressStatService.updateChart(t.url)}}))})();(function(){var e={data:{chartsColors:["#0071b9","#92D050","#41641A"],statusChartData:{columnTitles:[],c3data:{bindto:"#notificationGlobalStatusStat",data:{columns:[],type:"bar",labels:true,color:function(t,i){return e.data.chartsColors[i.index]}},axis:{x:{tick:{centered:true,fit:true,format:function(t){return e.data.statusChartData.columnTitles[t]}}},y:{show:false}},legend:{show:false},tooltip:{format:{title:function(){return null},name:function(t,i,n,r){return e.data.statusChartData.columnTitles[r]},value:function(e,t,i,n){return e}}},padding:{right:25,left:25}},build:function(e,t){this.columnTitles=e;var i=t.slice(0);i.unshift("values");this.c3data.data.columns=[i];return this.c3data}}},updateChart:function(t){$.ajax({type:"GET",url:t,success:function(t){if(t&&t.warning&&t.warning.length>0){AGN.Lib.JsonMessages(t,true)}else{var i=[];var n=[];for(key in t){i.push(key);n.push(t[key])}c3.generate(e.data.statusChartData.build(i,n));AGN.Lib.CoreInitializer.run("equalizer")}}})}};AGN.Lib.GLobalNotificationStatusStatService=e;AGN.Lib.DomInitializer.new("notification-global-status-stat",(function(e){var t=AGN.Lib.Helpers.objFromString(e.data("config"));if(t&&t.url){AGN.Lib.GLobalNotificationStatusStatService.updateChart(t.url)}}))})();AGN.Lib.CoreInitializer.new("push-notification-preview",(function(e){if(!e){e=$(document)}_.each(e.find(".push-notification-preview-button"),(function(e){function t(e){e.prop("disabled",true);e.parent().attr("data-tooltip",e.parent().attr("data-tooltip-if-disabled"))}var i=$(e);var n=i.data("notification-form");if(Notification.permission=="denied"){t(i)}else{i.on("click",(function(){function e(){var e=$("#"+n);var t=e.find("#pushTitle");var i=e.find("#pushContent");var r=e.find("#pushIcon");var o=e.find("#pushLink");var a=t?t.val():"";var s=i?i.val():"";var l=r?r.val():"";var u=o?o.val():"";var c={body:s,icon:l};var d=new Notification(a,c);d.onclick=function(e){e.preventDefault();window.open(u,"_blank")}}if(Notification.permission!="granted"){Notification.requestPermission((function(n){if(n=="granted"){e()}else if(n=="denied"){t(i)}}))}else{e()}}))}}))}));(function(){var e={data:{chartsColors:["#0071b9"],statChartData:{columnTitles:[],c3data:{bindto:"#barchart-notification-stats",data:{columns:[],type:"bar",labels:true},axis:{x:{tick:{centered:true,fit:true,format:function(t){return e.data.statChartData.columnTitles[t]}}}},legend:{show:false},tooltip:{format:{title:function(){return null},name:function(t,i,n,r){return e.data.statChartData.columnTitles[r]},value:function(e,t,i,n){return e}}},padding:{right:25}},build:function(e,t){this.columnTitles=e;var i=t.slice(0);i.unshift("values");this.c3data.data.columns=[i];return this.c3data}},progressChartData:{c3data:{bindto:"#progresschart-notification-stats",data:{x:"x",columns:[]},axis:{x:{type:"category",tick:{fit:false}}},zoom:{enabled:true,rescale:true},subchart:{show:true},padding:{right:25}},build:function(e,t,i){this.c3data.data.columns=[e,t,i];return this.c3data}}},updateCharts:function(e,n){$.ajax({type:"GET",url:n,data:{pushID:e},success:function(e){t(e["common"]);i(e["viewsclicks"]);AGN.Lib.CoreInitializer.run("equalizer")}})}};AGN.Lib.NotificationStatService=e;AGN.Lib.DomInitializer.new("notification-stats",(function(e){var t=AGN.Lib.Helpers.objFromString(e.data("config"));if(t&&t.pushId&&t.url){AGN.Lib.NotificationStatService.updateCharts(t.pushId,t.url)}}));function t(t){var i=[];var n=[];for(var r in t){if(t.hasOwnProperty(r)){i.push(r);n.push(t[r])}}c3.generate(e.data.statChartData.build(i,n))}function i(t){var i=["x"];var n=[];var r=[];for(objIndex in t){var o=t[objIndex];for(var a in o){if(o.hasOwnProperty(a)){if(objIndex==0&&a!="time"){if(n.length==0){n.push(a)}else if(r.length==0){r.push(a)}}if(a=="time"){i.push(o[a])}else if(n[0]==a){n.push(o[a])}else if(r[0]==a){r.push(o[a])}}}}c3.generate(e.data.progressChartData.build(i,n,r))}})();AGN.Lib.CoreInitializer.new("polling-form",(function(e){if(!e){e=$(document)}e.find('[data-form="polling"]').each((function(){AGN.Lib.Form.get($(this)).submit()}))}));AGN.Lib.CoreInitializer.new("popover-validate",(function(){AGN.Lib.Popover.validate()}));(function(){AGN.Lib.CoreInitializer.new("target-group-query-builder-extend",(function(){if(window.queryBuilderIsExtended){return}window.queryBuilderIsExtended=true;var r=2;var o={};function a(e,t){if(Math.sign(e)===-1){t.push("sub")}else{t.push("add")}}function s(e,t,i){if(i){if(i==="sub"){t="-"+Math.abs(t)}else{t="+"+Math.abs(t)}}e.$el.find("#date-filter").val(t)}var l=$.fn.queryBuilder;var u=l.constructor;var c=u.prototype.init;var d=u.prototype.validate;var f=u.prototype.bindEvents;o=u.utils;var p=u.selectors;Object.assign(p,{rule_include_empty:".rule-include-empty[name*=_include_empty]",rule_operator_conditions_container:".rule-operator-conditions-container",rule_header_inputs:".rule-header :input"});o.defineModelProperties(u.Rule,["includeEmpty"]);l.extend({init:function(e){this.on("afterCreateRuleInput",(function(e,t){var i=e.builder.optionsByType[t.filter.type];if(i){var n=i.postCreate;if(n&&typeof n==="function"){n.call(e.builder,t,i)}}}));this.on("afterUpdateRuleOperator",(function(e,t){var i=e.builder.optionsByType[t.filter.type];if(i){var n=i.postOperatorUpdate;if(n&&typeof n==="function"){n.call(e.builder,t,i)}}}));this.setupInitialRule(e);return c.call(this,e)},isEmptyOrInitial:function(e){if(!e||!e.rules||!e.rules.length){return true}if(e.rules.length===1&&(e.rules[0].initialRule||e.rules[0].empty)){return true}return false},setupInitialRule:function(e){if(this.isEmptyOrInitial(e)){this.initialRule=true;e.rules=[{initialRule:true,empty:true}]}else{this.initialRule=false}},optionsByType:{date:{availableFormats:function(e){if(e&&e.type&&(e.type=="before"||e.type=="after")){return["YYYYMMDD"]}return["DD.MM.YYYY","YYYYMMDD","DDMMYYYY","MMDD","DDMM","DD","MM","YYYY"]},input:function(i,n){return $('<div class="qb-input-label">'+'<label class="checkbox-inline">'+'<input name="today" type="checkbox">'+'<span class="text">'+t("defaults.today")+"</span>"+"</label>"+"</div>"+'<div class="qb-input-element date-filter">'+'<input class="form-control" type="text" id="date-filter"/>'+"</div>"+'<div class="qb-input-label" id="date-offset-label" style="display: none;">'+'<div class="form-badge qb-input-inner">'+t("defaults.days")+"</div>"+"</div>"+'<div class="qb-input-label">'+'<div class="qb-input-inner">'+t("date.formats.label")+"</div>"+"</div>"+'<div class="qb-input-element">'+'<select class="form-control" id="date-format">'+e(n.availableFormats(n.operator))+"</select>"+"</div>"+'<div class="qb-input-label">'+'<div class="qb-input-inner">'+'<button type="button" class="icon icon-help" data-help="help_'+this.settings.helpLanguage+'/targets/DateFormat.xml"></button>'+"</div>"+"</div>")},postCreate:function(e){var t=e.$el.find("input[name=today]");var n=e.$el.find("#date-offset-label");var r=e.$el.find("#date-filter");var o=e.$el.find("#date-format");var a=function(){var a=t.prop("checked");n.toggle(a);r.off("change.offset keyup.offset");if(!e._updating_input){e._updating_value=true;if(a){r.val("+0")}else{r.val(i(new Date,o.val()))}e._updating_value=false}if(a){r.on("change.offset keyup.offset",(function(e){var t=r.val();if(t){var i=parseInt(t);if(!isNaN(i)){var n=(i<0?"":"+")+i;if(n!=t){r.val(n)}}}else if(e.type==="change"){r.val("+0")}}))}};t.on("change",a)},postOperatorUpdate:function(t,i){var n=t.$el.find("#date-format");n.html(e(i.availableFormats(t.operator)));n.change();n.trigger("change-date-format")},valueSetter:function(e,t){var i=t.slice(0);var n=e.$el.find("input[name=today]");var o=e.$el.find("#date-offset-label");var a=e.$el.find("#date-format");var l=false,u,c,d;if(t.length>r){if(i.shift()==="today"){l=true}d=i.shift();u=i.shift();c=i.shift()}else{d=i.shift();if(d==="today"){l=true;d="+0"}c=i.shift()}o.toggle(l);s(e,d,u);a.val(c);n.prop("checked",l).change()},valueGetter:function(e){var t=[],i=e.$el.find("#date-filter").val(),n=e.$el.find("#date-format").val(),r=e.$el.find("input[name=today]").is(":checked");if(r){t.push("today");t.push(i);a(i,t)}else{t.push(i)}t.push(n);return t},validate:function(e){if(e.length==2){var t=e[0];var i=e[1];if(t){if("today"!=t&&i){return n(t,i.toUpperCase())?true:["invalid_format"]}else{return true}}else{return["empty_date"]}}else if(e.length==4){var r=e[1];if(!r||r!=parseInt(r)){return["invalid_expression"]}}return true}}},clearInitialRuleSettings:function(){var e=this;e.initialRule=false;$(".initial-rule").removeClass("initial-rule")},isInitial:function(e){if(e.length===1&&e[0].$el.hasClass("initial-rule")){return true}if(this.initialRule&&e.length===1){e[0].$el.addClass("initial-rule");return true}return false},validate:function(e){var t=this;var i=t.model.root.rules;var n=_.clone(e);n=$.extend({skip_filter_validation:true,skip_empty:false},n);if(n.skip_filter_validation){n.skip_empty=true}if(this.isInitial(i)){t.clearErrors();return true}t.clearInitialRuleSettings();return d.call(this,n)},getRuleInput:function(e,t){var i=e.filter;var n=e.filter.validation||{};var r=e.id+"_value_"+t;var a=i.vertical?" class=block":"";var s="";if(typeof i.input==="function"){s=i.input.call(this,e,r)}else if(typeof e.operator.input==="function"){s=e.operator.input.call(this,e,r)}else if(this.optionsByType[e.filter.type]&&typeof this.optionsByType[e.filter.type].input==="function"){s=this.optionsByType[e.filter.type].input.call(this,e,this.optionsByType[e.filter.type],r)}else{switch(i.input){case"radio":case"checkbox":o.iterateOptions(i.values,(function(e,t){s+="<label"+a+'><input type="'+i.input+'" name="'+r+'" value="'+e+'"> '+t+"</label> "}));break;case"select":s=this.getRuleValueSelect(r,e);break;case"textarea":s+='<textarea class="form-control" name="'+r+'"';if(i.size)s+=' cols="'+i.size+'"';if(i.rows)s+=' rows="'+i.rows+'"';if(n.min!==undefined)s+=' minlength="'+n.min+'"';if(n.max!==undefined)s+=' maxlength="'+n.max+'"';if(i.placeholder)s+=' placeholder="'+i.placeholder+'"';s+="></textarea>";break;case"number":s+='<input class="form-control" type="number" name="'+r+'"';if(n.step!==undefined)s+=' step="'+n.step+'"';if(n.min!==undefined)s+=' min="'+n.min+'"';if(n.max!==undefined)s+=' max="'+n.max+'"';if(i.placeholder)s+=' placeholder="'+i.placeholder+'"';if(i.size)s+=' size="'+i.size+'"';s+=">";break;default:s+='<input class="form-control" type="text" name="'+r+'"';if(i.placeholder)s+=' placeholder="'+i.placeholder+'"';if(i.type==="string"&&n.min!==undefined)s+=' minlength="'+n.min+'"';if(i.type==="string"&&n.max!==undefined)s+=' maxlength="'+n.max+'"';if(i.size)s+=' size="'+i.size+'"';s+=">"}}return this.change("getRuleInput",s,e,r)},getRuleValueSelect:function(e,t){var i=this.templates.ruleValueSelect({builder:this,name:e,rule:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleValueSelect",i,e,t)},updateRuleOperator:function(e,t){var i=e.$el.find(p.value_container);if(!e.operator||e.operator.nb_inputs===0){i.hide();e.__.value=undefined}else{i.css("display","");if(i.is(":empty")||!t||typeof t.input==="function"||typeof e.operator.input==="function"||e.operator.nb_inputs!==t.nb_inputs||e.operator.optgroup!==t.optgroup){this.createRuleInput(e)}}if(e.operator){e.$el.find(p.rule_operator).val(e.operator.type);e.__.value=this.getRuleInputValue(e);this.createExtendedOperatorConditions(e)}this.trigger("afterUpdateRuleOperator",e,t);this.trigger("rulesChanged")},createExtendedOperatorConditions:function(e){var i=this;var n=e.$el.find(p.rule_operator_conditions_container);if(e.operator.type==="not_equal"){e.includeEmpty=true;var r=$('<div class="qb-input-label">'+'<label class="checkbox-inline">'+'<input type="checkbox" class="rule-include-empty" name="'+e.id+'_include_empty" checked="checked"/>'+'<span class="text">'+t("querybuilder.common.include_empty")+"</span>"+"</label>"+"</div>");n.html(r);var o=r.find(p.rule_include_empty);o.on("change",(function(){e.includeEmpty=i.getRuleIncludeEmptyValue(e)}));e.$el.find(p.rule_header_inputs).prop("disabled",e.flags.header_readonly)}else{e.includeEmpty=false;n.html("")}},createRuleOperators:function(e){var t=e.$el.find(p.operator_container).empty();if(!e.filter){return}var i=this.getOperators(e.filter);if(!e.filter.skipOperator){var n=$(this.getRuleOperatorSelect(e,i));t.html(n)}if(e.filter.default_operator){e.__.operator=this.getOperatorByType(e.filter.default_operator)}else{e.__.operator=i[0]}e.$el.find(p.rule_operator).val(e.operator.type);this.trigger("afterCreateRuleOperators",e,i);this.applyRuleFlags(e)},createRuleInput:function(e){var t=e.$el.find(p.value_container).empty();e.__.value=undefined;if(!e.filter||!e.operator||e.operator.nb_inputs===0){return}var i=this;var n=$();var r=e.filter;for(var o=0;o<e.operator.nb_inputs;o++){var a=$(this.getRuleInput(e,o));if(r.canBeNegated){var s=i.getNegateInput();t.prepend(s);n=n.add(s)}if(o>0)t.append(this.settings.inputs_separator);t.append(a);if(typeof r.values==="function"){r.values.call(this,a)}n=n.add(a)}t.css("display","");n.on("change "+(r.input_event||""),(function(){if(!e._updating_input){e._updating_value=true;e.negated=i.getNegateValue(e);e.value=i.getRuleInputValue(e);e._updating_value=false}}));if(r.plugin){n[r.plugin](r.plugin_config||{})}this.trigger("afterCreateRuleInput",e);if(r.default_value!==undefined){e.value=r.default_value}else{e._updating_value=true;e.negated=i.getNegateValue(e);e.value=i.getRuleInputValue(e);e._updating_value=false}this.applyRuleFlags(e)},setRuleInputValue:function(e,t){var i=e.filter;var n=e.operator;if(!i||!n){return}e._updating_input=true;if(i.valueSetter){i.valueSetter.call(this,e,t)}else if(typeof e.operator.valueSetter==="function"){e.operator.valueSetter.call(this,e,t)}else if(this.optionsByType[e.filter.type]&&typeof this.optionsByType[e.filter.type].valueSetter==="function"){this.optionsByType[e.filter.type].valueSetter.call(this,e,t)}else{var r=e.$el.find(p.value_container);if(n.nb_inputs===1){t=[t]}for(var a=0;a<n.nb_inputs;a++){var s=o.escapeElementId(e.id+"_value_"+a);switch(i.input){case"radio":r.find("[name="+s+'][value="'+t[a]+'"]').prop("checked",true).trigger("change");break;case"checkbox":if(!$.isArray(t[a])){t[a]=[t[a]]}t[a].forEach((function(e){r.find("[name="+s+'][value="'+e+'"]').prop("checked",true).trigger("change")}));break;default:if(n.multiple&&i.value_separator&&$.isArray(t[a])){t[a]=t[a].join(i.value_separator)}r.find("[name="+s+"]").val(t[a]).trigger("change");break}}}this.setNegated(e);e._updating_input=false},getRuleInputValue:function(e){var t=e.filter;var i=e.operator;var n=[];if(t.valueGetter){n=t.valueGetter.call(this,e)}else if(typeof e.operator.valueGetter==="function"){n=e.operator.valueGetter.call(this,e)}else if(this.optionsByType[e.filter.type]&&typeof this.optionsByType[e.filter.type].valueGetter==="function"){n=this.optionsByType[e.filter.type].valueGetter.call(this,e)}else{var r=e.$el.find(p.value_container);for(var a=0;a<i.nb_inputs;a++){var s=o.escapeElementId(e.id+"_value_"+a);var l;switch(t.input){case"radio":n.push(r.find("[name="+s+"]:checked").val());break;case"checkbox":l=[];r.find("[name="+s+"]:checked").each((function(){l.push($(this).val())}));n.push(l);break;case"select":if(t.multiple){l=[];r.find("[name="+s+"] option:selected").each((function(){l.push($(this).val())}));n.push(l)}else{n.push(r.find("[name="+s+"] option:selected").val())}break;default:n.push(r.find("[name="+s+"]").val())}}n=n.map((function(e){if(i.multiple&&t.value_separator&&typeof e=="string"){e=e.split(t.value_separator)}if($.isArray(e)){return e.map((function(e){return o.changeType(e,t.type)}))}else{return o.changeType(e,t.type)}}));if(i.nb_inputs===1){n=n[0]}if(t.valueParser){n=t.valueParser.call(this,e,n)}}return this.change("getRuleValue",n,e)},getRuleIncludeEmptyValue:function(e){return e.$el.find(p.rule_include_empty).is(":checked")},validateValue:function(e,t){var i=e.filter.validation||{};var n=true;if(i.callback){n=i.callback.call(this,t,e)}else if(typeof e.operator.validate==="function"){n=e.operator.validate.call(this,t,e)}else if(this.optionsByType[e.filter.type]&&typeof this.optionsByType[e.filter.type].validate==="function"){n=this.optionsByType[e.filter.type].validate.call(this,t,e)}else{n=this._validateValue(e,t)}return this.change("validateValue",n,t,e)},getRules:function(e){e=$.extend({get_flags:false,allow_invalid:false,skip_empty:false},e);var t=this.validate(e);if(!t&&!e.allow_invalid){return null}var i=this;var n=function t(n){var r={condition:n.condition,rules:[]};if(n.data){r.data=$.extendext(true,"replace",{},n.data)}if(e.get_flags){var o=i.getGroupFlags(n.flags,e.get_flags==="all");if(!$.isEmptyObject(o)){r.flags=o}}n.each((function(t){if(!t.filter&&e.skip_empty){return}var n=null;if(!t.operator||t.operator.nb_inputs!==0){n=t.value}var o={id:t.filter?t.filter.id:null,field:t.filter?t.filter.field:null,type:t.filter?t.filter.type:null,input:t.filter?t.filter.input:null,operator:t.operator?t.operator.type:null,value:n,includeEmpty:t.includeEmpty};if(t.filter&&t.filter.data||t.data){o.data=$.extendext(true,"replace",{},t.filter.data,t.data)}if(t.filter&&t.filter.canBeNegated){o.negated=t.negated}if(e.get_flags){var a=i.getRuleFlags(t.flags,e.get_flags==="all");if(!$.isEmptyObject(a)){o.flags=a}}r.rules.push(i.change("ruleToJson",o,t))}),(function(i){var n=t(i);if(n.rules.length!==0||!e.skip_empty){r.rules.push(n)}}),this);return i.change("groupToJson",r,n)}(this.model.root);n.valid=t;return this.change("getRules",n)},setRules:function(e,t){t=$.extend({allow_invalid:false},t);this.setupInitialRule(e);if($.isArray(e)){e={condition:this.settings.default_condition,rules:e}}if(!e||!e.rules||e.rules.length===0&&!this.settings.allow_empty){o.error("RulesParse","Incorrect data object passed")}this.clear();this.setRoot(false,e.data,this.parseGroupFlags(e));this.applyGroupFlags(this.model.root);e=this.change("setRules",e,t);var i=this;(function e(n,r){if(r===null){return}if(n.condition===undefined){n.condition=i.settings.default_condition}else if(i.settings.conditions.indexOf(n.condition)==-1){o.error(!t.allow_invalid,"UndefinedCondition",'Invalid condition "{0}"',n.condition);n.condition=i.settings.default_condition}r.condition=n.condition;n.rules.forEach((function(n){var a;if(n.rules!==undefined){if(i.settings.allow_groups!==-1&&i.settings.allow_groups<r.level){o.error(!t.allow_invalid,"RulesParse","No more than {0} groups are allowed",i.settings.allow_groups);i.reset()}else{a=i.addGroup(r,false,n.data,i.parseGroupFlags(n));if(a===null){return}i.applyGroupFlags(a);e(n,a)}}else{if(!n.empty){if(n.id===undefined){o.error(!t.allow_invalid,"RulesParse","Missing rule field id");n.empty=true}if(n.operator===undefined){n.operator="equal"}}a=i.addRule(r,n.data,i.parseRuleFlags(n));if(a===null){return}if(n.id){if(!n.empty){a.filter=i.getFilterById(n.id,!t.allow_invalid)}if(a.filter){a.operator=i.getOperatorByType(n.operator,!t.allow_invalid);if(!a.operator){a.operator=i.getOperators(a.filter)[0]}}a.negated=n.negated;if(a.operator&&a.operator.nb_inputs!==0){a.includeEmpty=!!n.includeEmpty;if(n.value!==undefined){a.value=n.value}else if(a.filter.default_value!==undefined){a.value=a.filter.default_value}}}if(i.change("jsonToRule",a,n)!=a){o.error("RulesParse","Plugin tried to change rule reference")}}}));if(i.change("jsonToGroup",r,n)!=r){o.error("RulesParse","Plugin tried to change group reference")}})(e,this.model.root);this.validate();this.trigger("afterSetRules")},getNegateValue:function(e){var t=e.$el.find("select.negate"),i;if(t.length!==0){i=t.val()==="true"}return i},getNegateInput:function(){var e='<div class="qb-input-negate">'+'<select class="form-control negate">'+'<option value="false">'+t("defaults.yes")+"</option>"+'<option value="true">'+t("defaults.no")+"</option>"+"</select>"+"</div>";return $(e)},setNegated:function(e){var t=e.$el.find("select.negate");if(t.length!==0){t.val(""+e.negated)}},displayError:function(e){if(this.settings.display_errors){if(e.error===null){e.$el.removeClass("has-error")}else{var t=this.translate("errors",e.error[0]);t=this.constructor.utils.fmt(t,e.error.slice(1));t=this.change("displayError",t,e.error,e);e.$el.addClass("has-error").find(this.constructor.selectors.error_container).eq(0).attr("data-tooltip",t);AGN.Lib.CoreInitializer.run("tooltip",e.$el)}}},bindEvents:function(){f.call(this);var e=this;this.model.on("update",(function(t,i,n){if(i instanceof u.Rule&&n==="includeEmpty"){e.updateRuleIncludeEmpty(i)}}))},findRuleByField:function(e,t,i){var n=function(e){return e.hasOwnProperty("rules")};if(n(e)){var r=this;return e.rules.find((function(e){if(n(e)){return i?r.findRuleByField(e,i):false}else{return e.field&&e.field===t}}))}else{return e.field&&e.field===t}},deleteRuleByField:function(e,t,i){var n=this;if(!e){e=n.model.root;if(!e){return}}var r=false;e.each("reverse",(function(e){if(e&&e.filter&&e.filter.id==t){r&=n.deleteRule(n.getModel(e.$el))}}),(function(e){r&=n.deleteRuleByField(e,t,i)}),n);return!!r},setOrReplaceRule:function(e,t,i){if(!e){e=this.getRules({allow_invalid:true,skip_empty:true})}if(t&&t.id){var n=this.findRuleByField(e,t.id,i);if(n){$.extend(n,t)}else{e.rules.push(t)}this.setRules(e);return true}else{return false}},containsNotEmptyRule:function(e){var t=this;var i=t.getModel(e);if(i.rules&&i.rules.length){return i.rules.every((function(e){if(e.hasOwnProperty("rules")){return t.containsNotEmptyRule(e)}else{return!!e.filter}}))}else{return!!i.filter}}});u.prototype.updateRuleIncludeEmpty=function(e){var t=e.$el.find(p.rule_include_empty);t.prop("checked",e.includeEmpty);this.trigger("rulesChanged")}}));function e(e){var i=[];e.forEach((function(e){var n=$("<option />");n.text(t("date.formats."+e));n.val(e);i.push($("<div/>").append(n).html())}));return i.join("")}function i(e,t){return t.replace("DD",AGN.Lib.Helpers.pad(e.getDate(),2)).replace("MM",AGN.Lib.Helpers.pad(e.getMonth()+1,2)).replace("YYYY",AGN.Lib.Helpers.pad(e.getFullYear(),4))}function n(e,t){if(!e){return false}var i=o(t);if(i){for(var n=0;n<i.length;n++){var r=i[n];if(r.isDigitFragment){if(r.isLenient){var a=e.match("^\\d{1,"+r.lexeme.length+"}");if(a){e=e.substring(a[0].length)}else{return false}}else{if(e.length<r.lexeme.length){return false}if(!e.substr(0,r.lexeme.length).match(/^\d+$/)){return false}e=e.substring(r.lexeme.length)}}else{if(e.startsWith(r.lexeme)){e=e.substring(r.lexeme.length)}else{return false}}}return!e}return false}function r(e){var t=["DD","MM","YYYY",".","-","_"];if(e){for(var i=0;i<t.length;i++){if(e.startsWith(t[i])){return t[i]}}}return false}function o(e){var t=["DD","MM","YYYY"];var i=[];while(e){var n=r(e);if(n){var o=false;var a=false;if(t.includes(n)){o=true;a=true;if(i.length){var s=i[i.length-1];if(s.isDigitFragment){s.isLenient=false;a=false}}}i.push({lexeme:n,isDigitFragment:o,isLenient:a})}else{return false}e=e.substring(n.length)}return i.length?i:false}})();(function(){var e="---";var i=.01;var n="< 1";var r=.001;var o={HIGH_PERFORMER:"#008F00",OPPORTUNITY:"#92D050",LEAD:"#CCCDCD",SLEEPER:"#F43536"};var a=500;var s=150;var l="poor-dog";var u="question-mark";var c="rising-star";var d="cash-cow";AGN.Lib.DomInitializer.new("recipient-insights",(function(){var e=this.config;var i=this.config.insightsData;$.i18n.load(e.translations);h(i.weekdayReactionRankData);g(i.hourReactionRankData);v(i.mailingsRevenueRatingData,e.mailingUriPattern,e.localeLanguage);y(i.reactionsInProgressData);b(i.reactionDeviceRankData);w(i.mailingReactionPercentageData);C(i.customerRevenueData);A(i.customerPerformanceData);E(i.pageImpressionsData);this.addAction({change:"selectReactionProgressPeriodType"},(function(){$("#reactionProgressPeriodDates").toggleClass("hidden","CUSTOM"!==this.el.val())}));this.addAction({click:"selectReactionProgressPeriod"},(function(){var i=$('input[name="reactionProgressPeriod"]:checked');var n,r;switch(i.val()){case"YEAR":case"MONTH":n=i.data("min");r=i.data("max");break;case"CUSTOM":n=$("#reactionProgressMinDate").val();r=$("#reactionProgressMaxDate").val();break;default:console.error("Unexpected period type: `"+i.val()+"`");return}if(n&&r){$.ajax(e.urls.reactionsInProgress,{type:"GET",data:{customerId:e.customerId,min:n,max:r}}).done((function(e){y(e)}))}else{AGN.Lib.Messages(t("defaults.error"),t("defaults.error"),"alert")}}))}));function f(e){var t=["data1"];var i=[];var n=0;$.each(e.values,(function(r,o){if(o>n){n=o}t.push(o);i.push(e.percentages[r])}));return{values:t,percentages:i,maxValue:n}}function p(e,t){$(e.axes.x[0]).find(".tick text").attr("y",(function(e,i){return parseInt(i||0)+t}))}function h(e){e=f(e);var i=t("recipient.reaction.day");var n=t("date.weekdaysShort");c3.generate({bindto:"#reaction-weekday-chart",onrendered:function(){p(this,10)},size:{height:200},data:{type:"bar",columns:[e.values],labels:{format:{data1:function(t,i,n){return e.percentages[n]+"%"}}},color:function(t,i){return i.value===e.maxValue?"#0071b9":"#eaeaea"}},bar:{width:{ratio:.88}},legend:{show:false},tooltip:{format:{name:function(){return i}}},axis:{x:{type:"category",categories:n,tick:{outer:false}},y:{show:false,padding:{top:20,bottom:20}}}})}function g(e){e=f(e);var t=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24];c3.generate({bindto:"#reaction-hour-chart",onrendered:function(){p(this,10)},size:{height:200},data:{type:"bar",columns:[e.values],labels:{format:{data1:function(t,i,n){return e.percentages[n]+"%"}}},color:function(t,i){return i.value===e.maxValue?"#0071b9":"#eaeaea"},onmouseover:function(e){this.internal.mainText.style("visibility",(function(t){return e.index===t.index?"visible":"hidden"}))},onmouseout:function(e){this.internal.mainText.filter((function(t){return e.index===t.index})).style("visibility","hidden")}},bar:{width:{ratio:.7}},legend:{show:false},tooltip:{show:false},axis:{x:{type:"category",categories:t,tick:{multiline:false,centered:true,outer:false}},y:{show:false,padding:{top:20,bottom:20}}}})}function m(e){var t;if(e==="de"){var i=d3.locale({decimal:",",thousands:".",grouping:[3],currency:[""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});t=i.numberFormat}else{t=d3.format}return function(e){return[{text:e.date,classes:"l-revenue-date"},{text:t(",.2f")(e.revenue),classes:"l-revenue-value"},{text:e.name,mailingId:e.mailingId,classes:"l-revenue-name"}]}}function v(e,i,n){var r=[{title:t("mailing.senddate"),criterion:"timestamp",sorting:false},{title:t("statistic.revenue"),criterion:"revenue",sorting:false},{title:t("Mailing"),criterion:"name",sorting:false}];var o=m(n);var a=function(e){if(e.sorting==="asc"){return"icon icon-arrow-down"}else if(e.sorting==="desc"){return"icon icon-arrow-up"}return"hidden"};var s=$.noop;var l=d3.select("#mailings-revenue-rating-table").append("table");var u=l.append("thead").append("tr").selectAll("th").data(r).enter().append("th");u.append("span").on("click",(function(e){s(e)})).attr("class","clickable unselectable").html((function(e){return e.title+"&nbsp;"}));var c=u.append("i").attr("class",a);if(e.length){var d=l.append("tbody").selectAll("tr").data(e).enter().append("tr");var f=d.selectAll("td").data(o).enter().append("td").attr("class",(function(e){return e.classes}));f.filter((function(e){return!e.mailingId})).text((function(e){return e.text}));f.filter((function(e){return e.mailingId>0})).append("a").attr("href",(function(e){return i.replace(":mailing-id:",e.mailingId)})).attr("title",(function(e){return e.text})).text((function(e){return e.text}));s=function(e){c.attr("class",(function(t){if(t===e){t.sorting=t.sorting==="asc"?"desc":"asc"}else{t.sorting=false}return a(t)}));var t=e.sorting==="desc"?d3.descending:d3.ascending;d.sort((function(i,n){return t(i[e.criterion],n[e.criterion])}))}}else{d=l.append("tbody").append("tr").append("td").attr("colspan",3).attr("class","l-revenue-unavailable").text(t("recipient.chart.not_available"))}}function y(e){var i=t("statistic.reactions");var n=t("statistic.impressions");var r=t("statistic.revenue");var o={};o[i]="#99c6e3";o[n]="#f43536";o[r]="#0071b9";var a=[];var s=[i];var l=[n];var u=[r];var c=false;var d=false;$.each(e.values,(function(e,t){a.push(e);s.push(t.reactions);l.push(t.impressions);u.push(t.revenues);if(t.impressions>0){c=true}if(t.revenues>0){d=true}}));var f=[s];var h={reactions:"area"};if(c){f.push(l);h.impressions="area"}if(d){f.push(u);h.revenues="bar"}var g=e.mailingNames;var m=a.length;var v=3;if(m<60){v=5}else if(m<100){v=4}c3.generate({bindto:"#reaction-progress-chart",onrendered:function(){p(this,10)},size:{height:200},data:{columns:f,types:h,color:function(e,t){return o[t.id?t.id:t]||e}},tooltip:{format:{title:function(t){var i=a[t];var n=e.values[i].mailingIds;if(n.length){return g[n[0]]}else{return i}}}},bar:{width:10},point:{r:v},axis:{x:{type:"category",categories:a,height:40,tick:{multiline:false,centered:true,outer:false,culling:true}},y:{show:false}}})}function b(e){var i=["#0071B9","#009BFF","#64C3FF","#00558A","#92D050"];var n=[];var r={};var o={};var a={};$.each(e,(function(e,s){var l="data"+e;n.push([l,s.value]);r[l]=t(s.deviceClass);o[l]=s.percentage;a[l]=i[e]}));c3.generate({bindto:"#reaction-device-chart",size:{height:200},data:{columns:n,type:"donut",names:r,color:function(e,t){return a[t.id?t.id:t]||e}},donut:{label:{format:function(e,t,i){return o[i]+"%"}}},legend:{position:"right"},tooltip:{format:{value:function(e,t,i){return e+" ("+o[i]+"%)"}}}})}function _(t,r){var o=$(t);var a=o.find(".l-kpi-value");var s=o.find(".l-kpi-sign");if(r>0){if(r<i){a.text(n)}else{a.text(d3.round(r,2))}}else{a.text(e)}s.toggle(r>0)}function w(e){_("#reactionTypeKpi",e.percentage.percentage);$("#reactionGradeIcon").css("color",x(e.grade))}function C(e){_("#revenueSumKpi",e.value);_("#revenueAvgKpi",e.average);$("#revenueIcon").addClass(T(e.value))}function A(e){if(e.clicks.percentage>0){_("#performanceClicksKpi",e.clicks.percentage)}else{_("#performanceClicksKpi",e.clicks.value>0?r:0)}_("#performanceRevenueKpi",e.revenue)}function E(e){_("#impressionsByClickKpi",e.perClick);_("#impressionsByVisitKpi",e.perVisit);_("#impressionsByBuyKpi",e.perBuy)}function x(e){return o[e]||"inherit"}function T(e){if(e>=a){return d}else{if(e>=s){return c}else{if(e>0){return u}else{return l}}}}})();(function(){AGN.Lib.DomInitializer.new("recipient-report-initializer",(function(t){e(t)}));function e(e){if(!$("body").hasClass("dark-theme")){return}var i=e.find("iframe");i.on("load.iframe",(function(){t(i)}));i.ready((function(){t(i)}))}function t(e){var t=e.contents().find("body");var i=t.find("center");if(i.length){t.css("background","#303030");i.css("background","#303030")}else{e.contents().find("body").css("color","#ffffff")}}})();AGN.Lib.CoreInitializer.new("relative-href",(function(e){if(!e){e=$(document)}e.find("a[data-relative]").each((function(){var e=$(this);e.attr("href",AGN.url(e.attr("href")));e.removeAttr("data-relative")}))}));(function(){AGN.Lib.CoreInitializer.new("scrollable",(function(e){if(!e){e=$(document)}_.each(e.find(".js-scrollable"),(function(e){var t=$(e);t.perfectScrollbar("destroy");t.perfectScrollbar({wheelSpeed:5,scrollXMarginOffset:1})}))}))})();(function(){var e=AGN.Lib.Popover,t=AGN.Lib.Template,i=AGN.Lib.Page;AGN.Lib.CoreInitializer.new("select",["template"],(function(n){if(!n){n=$(document)}_.each(n.all("select"),(function(n){var r=$(n);var o=r.data("result-template");if(r.data("select2")){r.select2("destroy")}var a={placeholder:r.attr("placeholder"),minimumResultsForSearch:10};if(!r.hasClass("js-select")&&!r.hasClass("js-select-tags")){a.minimumResultsForSearch=-1}if(r.hasClass("js-select-tags")){a.inlineTags=true}if(r.is("[data-sort]")){if(r.data("sort")==="alphabetic"){a.sortResults=function(e,t,i){return e.sort((function(e,t){if($(e.element).is("[data-fix-position]")){return-1}else if($(t.element).is("[data-fix-position]")){return 1}return e.text.toLowerCase().localeCompare(t.text.toLowerCase())}))}}}if(r.prop("multiple")){var s=r.data("selection-template");a.minimumResultsForSearch=1;if(s){var l=t.prepare(s);a.formatSelection=function(e){return l({element:e.element[0],isLocked:e.locked,isDisabled:e.disabled,text:e.text,value:e.id})}}else{a.formatSelection=function(e){if(e.element&&e.element.length===1){var t=$(e.element).data("url");if(t){return $("<a></a>",{href:t,text:e.text,click:function(){i.reload(t)}})}}return e.text}}}if(o){var u=t.prepare(o);a.formatResult=function(e){return u({element:e.element[0],isLocked:e.locked,isDisabled:e.disabled,text:e.text,value:e.id})}}else if(r.hasClass("js-option-popovers")){a.formatResult=function(t,i,n,r){var o='<span style="white-space: nowrap;">'+r(t.text)+"</span>";e.new(i,{trigger:"hover",delay:{show:300,hide:100},html:true,template:'<div class="popover popover-wide" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',content:o});return o};r.on("select2-close",(function(){e.validate()}))}var c=a.formatSelection;a.formatSelection=function(e){var t=e.text;if(t){e.text=t.trim()}if(c instanceof Function){return c.apply(this,arguments)}return $.fn.select2.defaults.formatSelection.apply(this,arguments)};r.select2(a);var d=r.find("option[data-exclusive]");if(d.length>0){r.on("select2-selecting",(function(e){var t=r.find("option[value='"+e.val+"'][data-exclusive]");if(t.exists()){var i=false;r.find("option:selected").not(t).each((function(){i=true;$(this).removeAttr("selected")}));if(i){r.trigger("change")}}else{i=false;r.find("option:selected[data-exclusive]").each((function(){i=true;$(this).removeAttr("selected")}));if(i){r.trigger("change")}}}))}}))}))})();AGN.Lib.DomInitializer.new("session-timer",(function(){var e=10*60*1e3;var t=5*1e3;var i=401;var n=501;var r=this.config;var o=this.config.sessionInfoUrl;var a=this.config.creationTime;var s=this.config.lastAccessedTime;var l=this.config.maxInactiveInterval;var u;var c=false;var d=true;var f=false;var p;if(r&&a&&s&&l){u=l*1e3+Date.now();h()}function h(){setInterval((function(){var i=Date.now();var n=u>i?u-i:0;if(!p){p=new _}if((!d||n<=e)&&!c&&!f){p.showTimerBlock(n)}if(!f&&!c&&u+t>i&&u<i){p.showLoading()}if(!c&&!f&&u+t<i){g()}}),1e3)}function g(){$.ajax({url:o,global:false,beforeSend:m,success:v,error:y,complete:b})}function m(){f=true}function v(e){if(!!e){l=e.maxInactiveInterval;u=Date.now()+e.maxInactiveInterval*1e3;c=false}else{c=true;p.showSessionExpired()}}function y(e){if(e.status===i){c=true;p.showSessionExpired()}}function b(){f=false;d=false}$(document).ajaxComplete((function(e,t){if(!e.preventSessionTimer&&!c&&!f&&(t.status!==i&&t.status<n)){u=l*1e3+Date.now()}e.preventSessionTimer=true}));var _=function(){var e=this;e.timerLayout=$("#session-time-layout");e.timeField=$("#session-time-field");e.isSessionExpiredNotification=false;e.refreshIconClass="icon icon-refresh icon-spin"};_.prototype.showTimerBlock=function(e){var t=this;t.timerLayout.show();t.printTimerText(e)};_.prototype.showSessionExpired=function(){var e=this;e.printTimerText(0);if(!e.isSessionExpiredNotification){$("body").append(AGN.Lib.Template.text("session-expired"));e.isSessionExpiredNotification=true}};_.prototype.showLoading=function(){var e=this;var t='<i class="'+e.refreshIconClass+'"></i>';e.changeTimeFieldContent(t)};_.prototype.printTimerText=function(e){var t=this;var i="00:00";if(e>0){var n=new Date(e);i=n.getMinutes()>0?d3.format("02")(n.getUTCMinutes())+":":"00:";i+=n.getSeconds()>0?d3.format("02")(n.getUTCSeconds()):"00"}t.changeTimeFieldContent(i)};_.prototype.changeTimeFieldContent=function(e){this.timeField.html(e)};return false}));AGN.Lib.CoreInitializer.new("sizing",(function(e){if(!e){e=$(document)}var t=$(window).height();_.each(e.find('[data-sizing="container"]'),(function(e){var i=$(e),n=i.find('[data-sizing="top"]'),r=i.find('[data-sizing="bottom"]'),o=i.find('[data-sizing="scroll"]'),a,s,l,u,c;a=i.offset().top;s=_.reduce(_.map(n,(function(e){return $(e).outerHeight()})),(function(e,t){return e+t}))||0;l=_.reduce(_.map(r,(function(e){return $(e).outerHeight()})),(function(e,t){return e+t}))||0;c=i.data("sizing-offset")||20;u=t-a-s-l-c;_.each(o,(function(e){var t=$(e),i;i=t.data("sizing-offset")||0;t.css({height:u-i,"overflow-y":"auto"});t.trigger("scrollTo")}))}))}));(function(){var e=AGN.Lib.Helpers;AGN.Lib.CoreInitializer.new("slider",(function(t){if(!t){t=$(document)}_.each(t.find(".js-slider"),(function(t){var i=$(t),n,r;n={handle:"round",min:0,max:101};r=_.merge({},n,e.objFromString(i.data("slider-options")));i.slider(r)}))}))})();AGN.Lib.CoreInitializer.new("sync",["ace"],(function(e){if(!e){e=$(document)}_.each(e.find("[data-sync]"),(function(e){var t=$(e),i=$(t.data("sync")),n=t.data("_editor");if(n){n.val(i.val())}else{t.val(i.val())}}))}));(function(){var e=AGN.Lib.Tab;AGN.Lib.CoreInitializer.new("tab-toggle",(function(t){if(!t){t=$(document)}_.each(t.find("[data-toggle-tab]"),(function(t){e.init($(t))}))}))})();AGN.Lib.CoreInitializer.new("table-responsive-wrap",(function(e){if(!e){e=$(document)}e.find(".table-wrapper:not(.table-overflow-visible) table").wrap('<div class="table-responsive" />');e.find(".table-wrapper.table-overflow-visible table").wrap('<div class="table-responsive" style="overflow: visible;" />')}));(function(){var e=AGN.Lib.Popover;function t(e){var t=e.find(".js-row-show");if(t.length!==1){return}e.data("link",t.attr("href"));t.remove();_.each(e.prop("cells"),(function(e){var i=$(e);if(i.find("a,input,select,textarea,button").length!==0){return}i.addClass("table-link");if(i.contents().length===0){i.html('<a href="'+t.attr("href")+'">&nbsp;</a>')}else{i.contents().wrapAll('<a href="'+t.attr("href")+'"></a>')}}))}function i(t){var i=t.find(".js-row-popover");if(i.length!==1){return}var n=false;var r=null;var o=function(){if(n===false){n=$.Deferred();var e=i.children();if(e.length==0){var o=$("<div></div>");o.css({position:"fixed",visibility:"hidden"});o.html(i.html());e=o.children();$(document.body).append(o);n.done((function(){e.detach();o.remove()}))}n.done((function(){r=e}));var a=e.find("img").add(e.filter("img")).filter((function(){return this.complete?null:this}));if(a.length>0){n.done((function(){var e=t.data("bs.popover");if(e){e.setContent();if(t.is(":hover")){t.popover("show")}}}));var s=function(){var e=true;for(var t=0;t<a.length;t++){var i=a[t];if(i){if(i.complete){$(i).off("load error");a[t]=null}else{e=false}}}return e};for(var l=0;l<a.length;l++){$(a[l]).on("load error",(function(){if(s()){n.resolve()}}))}}else{n.resolve()}}return r};e.new(t,{trigger:"hover",delay:{show:300,hide:100},html:true,content:o})}AGN.Lib.CoreInitializer.new("table-row-actions",(function(e){if(!e){e=$(document)}e.find(".js-table").each((function(){_.each(this.rows,(function(e){var n=$(e);t(n);i(n)}))}))}))})();(function(){var e=AGN.Lib.Table;AGN.Lib.CoreInitializer.new("table",(function(t){if(!t){t=$(document)}t.all(".js-data-table").each((function(){var t=$(this);var i=t.find(".js-data-table-body");var n=t.data("table");if(i.exists()&&n){var r=$("script#"+CSS.escape(n)),o,a;if(r.exists()){o=r.json();if(i.data("web-storage")){a=_.merge(AGN.Lib.WebStorage.get(i.data("web-storage"))||{},o.options||{})}else{a=o.options||{}}new e(i,o.columns,o.data,a)}}}))}))})();AGN.Lib.DomInitializer.new("targetgroup-overview-filters",(function(){$("#filtersDescription").html(AGN.Lib.Template.text("targetgroup-overview-filters",this.config))}));(function(){var e={header_readonly:true,filter_readonly:true,condition_readonly:true,operator_readonly:true,value_readonly:true,no_delete:true,no_add_rule:true,no_sortable:true,no_add_group:true};AGN.Lib.DomInitializer.new("target-group-query-builder",(function(i){var n=AGN.Lib.Form.getWrapper(i);var r="#targetgroup-querybuilder";var o=$(r);var a=this.config.mailTrackingAvailable;var s=this.config.isTargetGroupLocked;var l=this.config.helpLanguage;var u=navigator.userAgent.match("MSIE 10.0;");var c=this;_.each(o,(function(e){var t=$(e);var i=A();var n=h(c.config.queryBuilderFilters,{mail_tracking_available:a});var r=C(JSON.parse(c.config.queryBuilderRules),s);t.queryBuilder({filters:n,allow_empty:true,operators:i,helpLanguage:l,readonly:s,plugins:{sortable:{inherit_no_drop:true,inherit_no_sortable:true,icon:"icon icon-arrows-alt"}},rules:r});if(!u){AGN.Lib.CoreInitializer.run("select",t)}t.on("afterSetRules.queryBuilder afterUpdateRuleFilter.queryBuilder afterCreateRuleFilters.queryBuilder afterAddRule.querybuilder",(function(e){if(!u){AGN.Lib.CoreInitializer.run("select",$(this))}}));t.on("link-values-set",(function(e){if(!u){AGN.Lib.CoreInitializer.run("select",$(e.target))}}));t.on("mailing-values-set values-set ",(function(e){if(!u){AGN.Lib.CoreInitializer.run("select",$(e.target))}}));t.on("change-date-format",(function(e){if(!u){AGN.Lib.CoreInitializer.run("select",$(e.target))}}));t.on("enterdown","input",(function(e){return false}))}));n.off().on("validation",(function(e,t){t=$.extend({ignore_qb_validation:false,skip_empty:false},t);_.each($(r),(function(i){var n=$(i);var r=n.prop("queryBuilder");if(!d(e,r,t,n)){return false}}))}));function d(e,t,i,n){t.clearInitialRuleSettings();if(i.ignore_qb_validation){return true}else if(t.validate({skip_filter_validation:false,skip_empty:i.skip_empty})){n.find("#queryBuilderRules").val(f(t,i.skip_empty));return true}else{n.trigger("qb:invalidrules");e.preventDefault();return false}}function f(e,t){return JSON.stringify(e.getRules({allow_invalid:true,skip_empty:t}))}function p(e,t){if(!u&&e.is("select")){AGN.Lib.Select.get(e).selectValueOrSelectFirst(t)}else{e.val(t)}}function h(e,t){if(e===null){e=[{id:"?",label:"?",type:"string"}]}else{var i={};e=e.filter((function(e){if(i[e.id]){return false}i[e.id]=true;return true}))}m(e,t);return $.extend([],e)}function g(t){if(t){t.flags=e;_.each(t.rules,(function(t){t.flags=e;if(t.hasOwnProperty("condition")){g(t)}}))}return t}function m(e,i){i=$.extend({mail_tracking_available:false},i);var n=function(e){var t=$('<select class="form-control qb-input-element-select mailings js-select"></select>');t.attr("id",e.id);return t};var o=function(e){var t=$('<select class="form-control qb-input-element-select auto-imports js-select"></select>');t.attr("id",e.id);return t};var a=function(e){return e.$el.find(".mailings :selected").val()};var s=function(e){return e.$el.find(".auto-imports :selected").val()};var l=function(e){var t={},i={},n=-1;$(r).on("values-set",e,(function(r){if($.isEmptyObject(i)){p($(r.target),n)}else{var o=$(r.target).attr("id"),a=i[o],s=a?a.$el.find(e):$(r.target);p(s,t[o]||n)}}));return function(n,r){var o=n.$el.find(e);t[n.id]=r;i[n.id]=n;p(o,r)}};var u=l("select.mailings");var c=l("select.auto-imports");var d={"finished auto-import":{type:"string",input_event:"values-setup-finished",input:o,values:function(e){y(e).done((function(){e.trigger("values-setup-finished")}))},valueSetter:c,valueGetter:s,canBeNegated:true,skipOperator:true},"received mailing":{type:"string",input_event:"values-setup-finished",input:n,values:function(e){v(e).done((function(){e.trigger("values-setup-finished")}))},valueSetter:u,valueGetter:a,canBeNegated:true,skipOperator:true},"opened mailing":{type:"string",input_event:"values-setup-finished",input:n,values:function(e){v(e).done((function(){e.trigger("values-setup-finished")}))},valueSetter:u,valueGetter:a,canBeNegated:i.mail_tracking_available,skipOperator:true},"clicked in mailing":{type:"string",input_event:"values-setup-finished",valueSelector:function(e,t){var i=["mailingID","linkID"];return e+"_"+i[t]},input:function(e){return $('<div class="qb-input-element-select">'+'<select class="form-control js-select mailings" data-rule-id="'+e.id+'" id="'+e.filter.valueSelector(e.id,0)+'" ></select>'+"</div>"+'<div class="qb-input-label">'+'<div class="qb-input-inner">Links</div>'+"</div>"+'<div class="qb-input-element-select">'+'<select class="form-control js-select links" data-rule-id="'+e.id+'" id="'+e.filter.valueSelector(e.id,1)+'" ></select>'+"</div>")},values:function(e){var i=e.find(".mailings");var n=AGN.Lib.Select.get(i);i.change((function(){var i=n.getSelectedValue();w(i,(function(i){var n=e.find(".links");var r=AGN.Lib.Select.get(n);var o=[{id:-1,text:t("querybuilder.common.anyLink")}];$.each(i,(function(e,t){o.push({id:t.id,text:t.url})}));r.setOptions(o);n.trigger("link-values-set")}))}));v(i,(function(e){var t=[];e.forEach((function(e){t.push({id:e.mailingID,text:e.shortname})}));n.setOptions(t);i.trigger("mailing-values-set")}))},valueGetter:function(e){var t=0,i=1,n=[];n[t]=e.$el.find("#"+e.filter.valueSelector(e.id,t)).val();n[i]=e.$el.find("#"+e.filter.valueSelector(e.id,i)).val();return n},valueSetter:function(){var e=0,t=1,i={},n={};var o=function(e,t){i[e.id]=t;n[e.id]=e};$(r).on("mailing-values-set",(function(t){var r=$(t.target),o=r.data("rule-id"),a=n[o],s;if(a){s=a.$el.find(".mailings");p(s,i[o][e]);s.trigger("change")}else{p(r);r.trigger("change")}}));$(r).on("link-values-set",(function(e){var r=$(e.target).data("rule-id"),o=n[r],a;if(o){a=o.$el.find(".links");p(a,i[r][t]||-1)}else{a=$(e.target);p(a)}a.trigger("values-setup-finished")}));return o}(),validation:{callback:function(e){return e.every((function(e){return e}))||["string_empty"]}},canBeNegated:i.mail_tracking_available,skipOperator:true},"revenue by mailing":{type:"string",input_event:"values-setup-finished",input:n,values:function(e){v(e).done((function(){e.trigger("values-setup-finished")}))},valueSetter:u,valueGetter:a,canBeNegated:i.mail_tracking_available,skipOperator:true}};if(!i.mail_tracking_available){delete d["received mailing"]}e.forEach((function(e){var t=d[e.id];if(t){$.extend(e,t)}}))}function v(e,t){var i=t||function(t){var i=AGN.Lib.Select.get(e);var n=[];t.forEach((function(e){n.push({id:e.mailingID,text:e.shortname})}));i.setOptions(n);e.trigger("values-set")};return $.ajax({type:"GET",url:AGN.url("/workflow/getAllMailingSorted.action"),data:{sortField:"date",sortDirection:"desc"},success:i})}function y(e,t){var i=t||function(t){t.forEach((function(t){e.append($("<option>",{text:t.shortname,value:t.autoImportId}))}));e.trigger("values-set")};return $.ajax({type:"POST",url:AGN.url("/autoimport.do"),data:{method:"listJson"},success:i})}function b(e,t){e.forEach((function(e){var i=$("<option>");i.text(e.shortname);i.val(e.mailingID);t.append(i)}))}function w(e,t){$.ajax({url:AGN.url("/mailing/ajax/"+e+"/links.action"),success:t})}function C(e,t){if(t){e=g(e)}return $.extend({},e)}function A(){return[{type:"equal",apply_to:["string","number","datetime"]},{type:"not_equal",apply_to:["string","number","datetime"]},{type:"less",apply_to:["string","number"]},{type:"less_or_equal",apply_to:["string","number"]},{type:"greater",apply_to:["string","number"]},{type:"greater_or_equal",apply_to:["string","number"]},{type:"like",nb_inputs:1,apply_to:["string"]},{type:"not_like",nb_inputs:1,apply_to:["string"]},{type:"contains",nb_inputs:1,apply_to:["string"]},{type:"not_contains",nb_inputs:1,apply_to:["string"]},{type:"begins_with",nb_inputs:1,apply_to:["string"]},{type:"not_begins_with",nb_inputs:1,apply_to:["string"]},{type:"mod",nb_inputs:1,apply_to:["number"],valueSelectors:["#first","#operator select","#second"],valueGetter:function(e){var t=[];e.operator.valueSelectors.forEach((function(i){t.push(e.$el.find(i).val())}));return t},valueSetter:function(e,t){e.operator.valueSelectors.forEach((function(i,n){e.$el.find(i).val(t[n])}))},input:function(e){var t=this.operators.filter((function(e){return e.type!=="mod"&&e.apply_to.includes("number")}));var i=this.getRuleOperatorSelect(e,t);return""+"<div class='qb-input-element'>"+"<input class='form-control' id='first' type='number'/>"+"</div>"+"<div class='qb-input-element' id='operator'>"+i+"</div>"+"<div class='qb-input-element'>"+"<input class='form-control' id='second' type='number'/>"+"</div>"},validate:function(e){return e.every((function(e){return e}))||["string_empty"]}},{type:"is_empty",nb_inputs:0,apply_to:["string","number","datetime"]},{type:"is_not_empty",nb_inputs:0,apply_to:["string","number","datetime"]},{type:"before",nb_inputs:1,apply_to:["datetime"]},{type:"after",nb_inputs:1,apply_to:["datetime"]}]}}))})();AGN.Lib.Controller.new("targets-list",(function(){this.addAction({change:"check-favorites"},(function(){AGN.Lib.Loader.prevent();$.ajax({type:"GET",url:AGN.url(e(this.el))})}));function e(e){var t=e.data("target-id");var i=e.is(":checked");return"/target/"+t+"/"+(i?"addToFavorites":"removeFromFavorites")+".action"}this.addAction({change:"check-admin-favorites"},(function(){AGN.Lib.Loader.prevent();const e=this.el.data("target-id");const t=this.el.is(":checked");$.ajax({type:t?"POST":"DELETE",url:AGN.url("/target/"+e+"/favorite.action")})}))}));AGN.Lib.CoreInitializer.new("template",(function(e){if(!e){e=$(document)}e.find('script[type="text/x-mustache-template"]').each((function(){var e=$(this);var t=e.attr("id");if(t){AGN.Opt.Templates[t]=e.html()}}))}));(function(){var e=AGN.Lib.Tile;AGN.Lib.CoreInitializer.new("tile-toggle",(function(t){if(!t){t=$(document)}_.each(t.find("[data-toggle-tile]"),(function(t){e.init($(t))}))}))})();(function(){var e=AGN.Lib.Tooltip;AGN.Lib.CoreInitializer.new("tooltip",(function(t){if(!t){t=$(document)}$(".tooltip").remove();t.find("[data-tooltip], [data-tooltip-help]").each((function(){var t=$(this);e.create(t,e.options(t))}))}))})();(function(){var e=AGN.Lib.Truncate.run;var t=AGN.Lib.Breadcrumbs.truncate;AGN.Lib.CoreInitializer.new("truncate",(function(i){if(!i){i=$(document)}setTimeout((function(){_.each(i.find(".l-header"),(function(i){var n=$(i);e(n,".header-nav");t(n.find(".header-nav"))}))}),50)}))})();AGN.Lib.DomInitializer.new("upload",(function(e){var t=AGN.Lib.Template,i=AGN.Lib.Form;var n=e.find("[data-upload-dropzone]").first();var r=(n.exists()?n:e).find("[data-upload]");var o=e.find("[data-upload-add]");var a=o.find("[data-upload-add-template]");var s=e.find("[data-upload-progress]");var l=s.find("[data-upload-progress-template]");var u;var c;var d=r.prop("name")||"";var f=d.includes("[]");var p=!r.exists()||r.is("[multiple]");var h;var g=[];if(r.exists()||n.exists()){x();u=t.prepare(a.data("upload-add-template"));c=t.prepare(l.data("upload-progress-template"));r.prop("name","");h=i.get(r.exists()?r:n);if(n.exists()){new Dropzone(n,{classDragOver:"drag-over",onSelectFiles:function(e){y(e)}})}else{r.on("change",(function(){y(r.prop("files"))}))}var m=h.get$();m.on("form:loadershow",(function(){l.html(c({currentProgress:true}));s.removeClass("hidden")}));m.on("form:loaderhide",(function(){s.addClass("hidden");o.removeClass("hidden")}));m.on("form:submit",(function(){o.addClass("hidden")}));m.on("form:abort",(function(){if(g.length){o.removeClass("hidden");_()}}));m.on("form:progress",(function(e,t){l.html(c({currentProgress:t.progress}))}));m.on("submitted",(function(){E();v()}));e.on("upload:reset",(function(){E();v();e.trigger("reset-upload",m)}));e.on("click","a[data-upload-reset], button[data-upload-reset]",(function(){E();v();e.trigger("reset-upload",m)}))}function v(){w();g=[];x()}function y(e){if(e&&e.length>0){var t=false;var i;if(p){for(var n=0;n<e.length;n++){i=e[n];if(C(i,g.length)){g.push(i);A(i);t=true}}}else{i=e[0];if(C(i,0)){E();v();g=[i];A(i);t=true}}if(t){x();_()}}}function b(e){return d.replace("[]","["+e+"]")}function _(){if(f){g.forEach((function(e,t){h.setValueOnce(b(t+1),e)}))}else{h.setValueOnce(d,g.slice(0))}}function w(){if(f){g.forEach((function(e,t){h.setValueOnce(b(t+1),undefined)}))}else{h.setValueOnce(d,undefined)}}function C(t,i){var n=$.Event("upload:add");e.trigger(n,{file:t,index:i});return!n.isDefaultPrevented()}function A(e){var t=!e.id?"hidden":"";var i={file:e,count:g.length,filename:e.name,size:e.size,id:e.id?e.id:0,duplicationErrorHidden:t,preview:undefined};if(/^image/.test(e.type)){var n=new FileReader;n.onloadend=function(){i.preview=this.result;o.removeClass("hidden");AGN.runAll($(u(i)).appendTo(a));h.initFields()};n.readAsDataURL(e)}else{i.preview=undefined;o.removeClass("hidden");AGN.runAll($(u(i)).appendTo(a));h.initFields()}}function E(){o.addClass("hidden");a.empty();h.initFields()}function x(){e.data("upload-selection",g.slice(0))}}));(function(){AGN.Lib.DomInitializer.new("user-activity-log-period",(function(t){e(t)}));function e(e){if(!e){e=$(document)}var i=[];_.each(e.find(".js-datepicker"),(function(e){var t=$(e);if(t.hasClass("js-datepicker-period-start")){if(!(t.attr("datepicker-period-id")in i)){i[t.attr("datepicker-period-id")]={startEl:null,endEl:null}}i[t.attr("datepicker-period-id")].startEl=t}if(t.hasClass("js-datepicker-period-end")){if(!(t.attr("datepicker-period-id")in i)){i[t.attr("datepicker-period-id")]={startEl:null,endEl:null}}i[t.attr("datepicker-period-id")].endEl=t}}));for(var n=0;n<i.length;n++){t(i[n].startEl.pickadate("picker"),i[n].endEl.pickadate("picker"))}}function t(e,t){var i=e;var n=t;if(i.get("value")){n.set("min",i.get("select"))}if(n.get("value")){i.set("max",n.get("select"))}i.on("set",(function(e){if(e.select){n.set("min",i.get("select"))}else if("clear"in e){n.set("min",false)}}));n.on("set",(function(e){if(e.select){i.set("max",n.get("select"))}else if("clear"in e){i.set("max",false)}}))}})();AGN.Lib.CoreInitializer.new("view",(function(){AGN.Lib.View.init()}));AGN.Lib.DomInitializer.new("web-storage-persist",(function(){if(this.config){$.each(this.config,(function(e,t){var i="web-storage#"+$.trim(e);var n=null;try{n=AGN.Lib.Storage.get(i)}catch(e){console.error(e)}if(n!=null){AGN.Lib.Storage.set(i,$.extend(n,t))}else{AGN.Lib.Storage.set(i,t)}}))}}));AGN.Lib.DomInitializer.new("workflow-pause-timer",(function(){const e=this.config.workflowId;const i=this.config.pauseTime;const n=this.config.defaultExpirationHours;const r=this.config.expirationHours>0?this.config.expirationHours:n;const o=r*60*60*1e3;const a=$("#workflow-pause-timer-text");const s=setInterval((function(){l()}),1e3);l();function l(){a.html(c())}function u(){return o-(Date.now()-i)}function c(){const e=u();if(e<=0){if(s){clearInterval(s)}d();return'<i class="icon icon-refresh icon-spin"></i> '+t("workflow.activating.auto")}const i=new Date(e);return(i.getHours()>0?d3.format("01")(i.getUTCHours())+":":"")+(i.getMinutes()>0?d3.format("02")(i.getUTCMinutes())+":":"00:")+(i.getSeconds()>0?d3.format("02")(i.getUTCSeconds()):"00")}function d(){return $.post(AGN.url("/workflow/"+e+"/autoUnpause.action")).done((function(t){if(t.success===true){AGN.Lib.Page.reload(AGN.url("/workflow/"+e+"/view.action"))}else{AGN.Lib.JsonMessages(t.popups)}})).fail((function(){AGN.Lib.Messages(t("Error"),t("defaults.error"),"alert")}))}return false}));(function(){var e=AGN.Lib.Loader,i=AGN.Lib.Template,n=AGN.Lib.Page,r=AGN.Lib.CSRF;var o={initialize:function(t){if(t.loader===true||t.loader===undefined){t.loader={show:function(){e.show()},hide:function(){e.hide()}}}},show:function(e){var t=e.loader;if(t&&t.show){try{t.show()}catch(e){console.error(e)}}},hide:function(e){var t=e.loader;if(t&&t.hide){try{t.hide()}catch(e){console.error(e)}}}};$.ajaxPrefilter((function(e){o.initialize(e)}));$(document).ajaxSend((function(e,t,i){o.show(i);r.setTokenToReqHeader(t,i.type)}));$(document).ajaxComplete((function(e,t,i){o.hide(i);r.updateTokenInDOM()}));$(document).ajaxError((function(e,r,a){o.hide(a);if(r.readyState==0||r.status==0){return}if(a.statusCode&&r.status in a.statusCode){return}var s;if(r.status==401){var l=$.Event("ajax:unauthorized");$(document).trigger(l);if(!l.isDefaultPrevented()&&r.responseText){n.render(r.responseText)}}else if(r.status==403){if(r.responseText){if(/<\s*\/\s*body\s*>/i.test(r.responseText)){var u=new DOMParser;var c=u.parseFromString(r.responseText,"text/html").querySelector("#csrf-error-page");if($(c).length){var d=i.text("csrf-error",{headline:t("messages.permission.denied.title"),content:t("messages.error.csrf"),reload:t("messages.error.reload")});$("body").append(d);return}}}s=i.text("permission-denied",{title:t("messages.permission.denied.title"),text:t("messages.permission.denied.text"),btn:t("defaults.ok")});$("body").append(s)}else{var f=true;if(r.responseText){try{var p=$(r.responseText);var h=p.filter("#error-message");var g=p.filter("#error-page");var m=p.all("[data-message]");if(g.exists()){}else if(h.exists()){if(h.is('script[type="text/x-mustache-template"]')){$("body").append(_.template(h.html()))}else{$("body").append(h)}f=false}else if(m.exists()){n.render(r.responseText);f=false}}catch(e){console.debug(e)}}if(f){s=i.text("error",{headline:t("messages.error.headline"),text:t("messages.error.text"),reload:t("messages.error.reload")});$("body").append(s)}}}));$(document).on("click","a[data-ajax], a.js-ajax",(function(e){var t=$(this);e.preventDefault();n.reload(t.attr("href"),true,t.data("ajax"))}));$(document).on("click","[data-prevent-load]",(function(){e.prevent()}));window.onbeforeunload=function(){e.show()}})();(function(){$(document).on("click","[data-toggle-checkboxes]",(function(e){const t=$(this);const i=t.data("toggle-checkboxes");const n=t.closest(".tile-header").find("[data-toggle-tile]").data("toggle-tile");_.each($(n+" [type=checkbox]:enabled"),(function(e){const t=i=="on"?true:false;$(e).prop("checked",t)}));e.preventDefault()}));$(document).on("click","[data-toggle-checkboxes-all]",(function(e){const t=$(this).data("toggle-checkboxes-all");_.each($(".checkboxes-content [type=checkbox]:enabled"),(function(e){const i=t=="on"?true:false;$(e).prop("checked",i)}));e.preventDefault()}))})();(function(){var e=AGN.Lib.Action;e.new({click:"[data-clone]"},(function(){var e=this.el.data("clone"),t=this.el.data("clone-target"),i=parseInt(this.el.data("clone-count")),n,r;i+=1;this.el.data("clone-count",i);n=AGN.Lib.Template.text(e,{count:i});r=$(t).append(n);AGN.runAll(r)}));$(document).on("click","a[data-clone]",(function(e){e.preventDefault()}))})();(function(){var e=AGN.Lib.Form,t=AGN.Lib.Confirm,i=AGN.Lib.Action,n=AGN.Lib.Page;i.new({click:"[data-confirm], .js-confirm"},(function(){var e;e=$.get(this.el.attr("href"));e.done((function(e){var i=$(e),r;r=i.filter(".modal").add(i.find(".modal"));if(r.length!=1){n.render(e);return}t.create(e).done((function(e){n.render(e)}))}));this.event.preventDefault()}));$(document).on("click","[data-confirm-positive], .js-confirm-positive",(function(){var i=$(this),n=t.get(i),r=e.getWrapper(i);if(n){var o=n.$modal.find('[name="confirm-save-choice"]');if(r.exists()){const t=e.get(r);if(i.is("[data-url]")){t.setActionOnce(i.data("url"))}t.jqxhr().done((function(e){n.positive(e)}))}else{const e=n.$modal.find('[name="confirm-choice"]');if(e.exists()){n.positive(e.val());return}if(o.exists()){n.positive({code:i.data("confirm-positive"),saveChoice:o[0].checked})}else{n.positive(i.data("confirm-positive"))}}}}));$(document).on("click","[data-confirm-negative], .js-confirm-negative",(function(){var e=$(this),i=t.get(e);if(i){var n=i.$modal.find('[name="confirm-save-choice"]');if(n.exists()){i.negative({code:e.data("confirm-negative"),saveChoice:n[0].checked})}else{i.negative(e.data("confirm-negative"))}}}))})();(function(){var e=AGN.Lib.Action,i=AGN.Lib.Clipboard,n=AGN.Lib.Tooltip;e.new({click:"[data-copyable]"},(function(){var e=undefined;if(this.el.is("[data-copyable-value]")){e=this.el.data("copyable-value")}else{var r=this.el.data("copyable-target");var o;if(r){o=$(r)}else{o=this.el}if(o.exists()){e=o.val()}}if(e!==undefined){var a=this.el;i.set(e,(function(e,i){if(i){n.create(a,{title:t("clipboard.copied.tooltip"),trigger:"manual"});n.setShown(a);var r=a.data("tooltip-timeout-id");if(r){clearTimeout(r)}var o=setTimeout((function(){n.remove(a);a.removeData("tooltip-timeout-id")}),2500);a.data("tooltip-timeout-id",o)}}))}}))})();(function(){var e=AGN.Lib.Table,i=AGN.Lib.WebStorage;$(document).on("click",".js-data-table-first-page",(function(t){e.get($(this)).api.paginationGoToFirstPage()}));$(document).on("click",".js-data-table-prev-page",(function(t){e.get($(this)).api.paginationGoToPreviousPage()}));$(document).on("click",".js-data-table-page",(function(t){e.get($(this)).api.paginationGoToPage($(this).data("page"))}));$(document).on("click",".js-data-table-next-page",(function(t){e.get($(this)).api.paginationGoToNextPage()}));$(document).on("click",".js-data-table-last-page",(function(t){e.get($(this)).api.paginationGoToLastPage()}));$(document).on("click",".js-data-table-paginate",(function(t){var n=$(this);var r=n.data("page-size");var o=e.get(n).api;o.paginationSetPageSize(r);n.closest(".dropdown-menu").trigger("click");var a=n.data("web-storage");if(a){i.extend(a,{paginationPageSize:parseInt(r)})}}));$(window).on("viewportChanged",(function(e){$(document).all(".js-data-table-body").each((function(){AGN.Lib.Table.get($(this)).redraw()}))}));$(document).on("click",".js-data-table-bulk-delete",(function(e){var t=$(this);n(t,false)}));function n(t){var i=t.data("bulk-field")||"id";var n=t.data("bulk-request-field")||"bulkIds";var o=e.get(t).api;var a=o.getSelectedRows();var s=a.map((function(e){return e[i]}));var l={};l[n]=s;r(s,t.data("bulk-url"),l).done((function(){o.updateRowData({remove:a})}))}function r(e,i,n){var r=$.Deferred();if(e&&e.length){var o=$.ajax(i,{method:"POST",traditional:false,data:n}).fail((function(){r.reject()}));AGN.Lib.Confirm.request(o).then(r.resolve,r.reject)}else{r.reject();AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")}return r.promise()}})();$(document).ready((function(){window.AGN.Lib.Controller.init();window.AGN.runAll()}));(function(){$(document).on("dragster:enter",(function(e){var t=$(e.target);if(!t.is("[data-upload-dropzone]")){t.addClass("drag-over")}}));$(document).on("dragster:leave",(function(e){var t=$(e.target);if(!t.is("[data-upload-dropzone]")){t.removeClass("drag-over")}}))})();(function(){$(document).on("click",".dropdown-menu *",(function(e){$target=$(e.target);if($target.hasClass("js-dropdown-open")){e.preventDropdownClose=true}if($target.parent(".js-dropdown-open").length==1){e.preventDropdownClose=true}if($target.is("button"))return;if($target.is("a"))return;if($target.parent("a").length==1)return;if($target.parent("button").length==1)return;if($target.hasClass("js-dropdown-close"))return;if($target.parent(".js-dropdown-close").length==1)return;e.preventDropdownClose=true}))})();$(document).on("click",".js-close-error",(function(e){if(!$(e.target).hasClass("js-close-error")){return}$(this).closest(".backdrop").remove()}));(function(){var e=AGN.Lib.Action,t=AGN.Lib.Form,i=AGN.Lib.Confirm,n=AGN.Lib.Helpers;e.new({click:"[data-form-change]"},(function(){t.get(this.el).setValueOnce("numberOfRowsChanged",true)}));e.new({click:"[data-form-bulk]"},(function(){var e=this.el.data("form-bulk"),i=this.el.prop("checked");t.get(this.el).bulkUpdate(e,i)}));e.new({click:"a[data-form-set], button[data-form-set]",change:"select[data-form-set], input[data-form-set]"},(function(){var e=n.objFromString(this.el.data("form-set")),i=t.get(this.el);_.forEach(e,(function(e,t){i.setValueOnce(t,e)}))}));e.new({click:"a[data-form-url], button[data-form-url]",change:"select[data-form-url], input[data-form-url]"},(function(){t.get(this.el).setActionOnce(this.el.data("form-url"))}));e.new({click:"a[data-form-resource], button[data-form-resource]",change:"select[data-form-resource], input[data-form-resource]"},(function(){var e=t.get(this.el);if(e instanceof AGN.Lib.ResourceForm){e.setResourceSelectorOnce(this.el.data("form-resource"))}}));e.new({click:"a[data-form-persist], button[data-form-persist]",change:"select[data-form-persist], input[data-form-persist]"},(function(){var e=n.objFromString(this.el.data("form-persist")),i=t.get(this.el);_.forEach(e,(function(e,t){i.setValue(t,e)}))}));e.new({click:"a[data-form-reset], button[data-form-reset]"},(function(){t.get(this.el).reset()}));e.new({click:"a[data-form-abort], button[data-form-abort]"},(function(){t.get(this.el).abort()}));e.new({click:"[data-form-confirm]"},(function(){var e=this.el.data("form-confirm"),n=t.get(this.el),r;r=n.submit("confirm",e);r.done((function(e){var t=$(e),r;r=t.filter(".modal").add(t.find(".modal"));if(r.length!=1){n.updateHtml(e);return}i.create(e).done((function(e){n.updateHtml(e)})).fail(n.revertAction)}))}));e.new({click:"a[data-form-action], button[data-form-action]",change:"select[data-form-action], input[data-form-action]"},(function(){var e=this.el.data("form-action"),i=t.get(this.el),n;setTimeout((function(){n=i.submit("action",e)}),5)}));e.new({click:"a[data-form-submit], button[data-form-submit]",change:"select[data-form-submit], input[data-form-submit]"},(function(){var e=this;setTimeout((function(){t.get(e.el).submit()}),5)}));e.new({click:"a[data-form-submit-static], button[data-form-submit-static]",change:"select[data-form-submit-static], input[data-form-submit-static]"},(function(){var e=this;setTimeout((function(){t.get(e.el).submit("static")}),5)}));e.new({click:"a[data-form-submit-event], button[data-form-submit-event]",change:"select[data-form-submit-event], input[data-form-submit-event]"},(function(){var e=this;setTimeout((function(){t.get(e.el).submit("event")}),5)}));e.new({submit:"[data-form]"},(function(){var e=this;if(this.el.data("form")!="static"){this.event.preventDefault();setTimeout((function(){t.get(e.el).submit()}),5)}}));function r(e){var t=e.keyCode||e.which;if(t===13){return true}if(t===229&&e.originalEvent){var i=e.originalEvent.code;if(i==="Enter"||i==="NumpadEnter"){return true}}return false}e.new({keydown:'input[type="text"], input[type="password"], input[type="number"]'},(function(){if(r(this.event)){var e=$.Event("enterdown");this.el.trigger(e);if(e.isDefaultPrevented()){return}var i=this.el.parents("form");if(i.exists()){if(i.is("[data-form]")){var n=t.get(i);if(i.is("[data-action]")){n.submit("event")}else{n.submit()}}else{i.submit()}}}}))})();(function(){var e=AGN.Lib.Help;$(document).on("click","[data-help]",(function(t){e.show($(this));t.preventDefault()}))})();(function(){$(document).on("click","label",(function(e){var t=$(this),i,n;i=$("#"+t.attr("for"));n=i.data("select2");if(i.length==1&&n){setTimeout((function(){if(!n.opened()){n.open()}}),0)}}))})();(function(){var e=window.history;$(document).on("click",'a[href^="#"]',(function(e){if(e.isDefaultPrevented()){return}e.preventDefault();t($(this).attr("href"))}));$(document).on("click","[data-one-time]",(function(){var e=$(this);setTimeout((function(){e.attr("disabled","disabled");if(e.is("a")){e.removeAttr("href")}}),1)}));function t(t){if(t==="#"){return}var i=window.location.href;var n=i.indexOf("#");if(n>=0){i=i.substring(0,n)}e.replaceState(e.state||{},document.title,i+t)}})();(function(){var e=AGN.Lib.Action,t=AGN.Lib.Menu;e.new({click:".menu-close"},(function(){t.close()}));e.new({click:".menu-open"},(function(){t.open()}));e.new({click:".menu-open"},(function(){t.open()}));$(document).on("click","main",(function(){if(t.isOpen()){t.close()}}));$(document).on("")})();(function(){var e=AGN.Lib.Action,t=AGN.Lib.Messages;e.new({click:"[data-msg]"},(function(){var e=this.el.data("msg"),i=this.el.data("msg-content"),n=this.el.data("msg-type");if(this.el.data("msg-system")==="system"){var r=$(document);if(r.find(".notification-info").is(":visible")){return false}else{t(e,i,n)}}else{t(e,i,n)}}));$(document).on("click","a[data-msg]",(function(e){e.preventDefault()}))})();(function(){var e=AGN.Lib.Action,t=AGN.Lib.Modal,i=AGN.Lib.Helpers;e.new({click:"[data-modal]"},(function(){var e=this.el.data("modal"),n=i.objFromString(this.el.data("modal-set"));t.createFromTemplate(n,e)}));$(document).on("hidden.bs.modal",".modal",(function(){var e=$(this);e.trigger("modal:close");setTimeout((function(){e.remove()}),100)}));$.fn.modal.Constructor.prototype.enforceFocus=function(){var e=this;$(document).on("focusin.modal",(function(t){if(e.$element[0]!==t.target&&!e.$element.has(t.target).length&&$(t.target.parentNode).hasClass("cke_contents cke_reset")){e.$element.focus()}}))}})();(function(){var e=AGN.Lib.Action;e.new({click:"[data-password]"},(function(){var e=this.el.data("password"),t=this.el.data("password-toggle"),i=$(e);this.el.data("password-toggle",this.el.text());this.el.text(t);if(i.prop("type")==="password"){i.prop("type","text")}else{i.prop("type","password")}this.event.preventDefault()}))})();(function(){$(document).on("click",".js-open-datepicker",(function(e){var t=$(this),i=t.parents(".input-group").find(".js-datepicker"),n=i.pickadate("picker");n.open()}));$(document).on("click",".js-datepicker",(function(e){var t=$(this),i=t.pickadate("picker");i.open();t.focus()}))})();(function(){$(document).on("click",'[data-dismiss="popover"]',(function(){var e=AGN.Lib.Popover.get($(this));if(e){e.hide()}}))})();(function(){var e=AGN.Lib.Action;e.new({click:"[data-popup]"},(function(){var e=this.el.data("popup"),t=window.location.href,i=t.substring(0,t.lastIndexOf("/"));if(!e||e.indexOf("://")<=0){e=i+"/"+e}window.open(e,"help","width=800,height=600,left=0,top=0,scrollbars=yes")}));$(document).on("click","a[data-modal]",(function(e){e.preventDefault()}));$(document).on("hidden.bs.modal",".modal",(function(){var e=$(this);e.trigger("modal:close");setTimeout((function(){e.remove()}),100)}))})();(function(){var e,t;e=function(){if(t){clearTimeout(t)}t=setTimeout((function(){AGN.Lib.CoreInitializer.run(["equalizer","truncate","sizing","scrollable","dropdown-expand"]);_.each(AGN.Lib.Editor.all(),(function(e){e.resize()}));$(window).trigger("viewportChanged")}),500)};$(window).on("resize",e)})();(function(){var e=AGN.Lib.Action,t=AGN.Lib.Popover,i=AGN.Lib.Template,n=AGN.Lib.Helpers;var r='<div class="modal-backdrop in" style="opacity: 0.2;"></div>';var o='<div class="popover bottom support-popover" style="width: 600px; margin-top: 16px;"><div class="popover-content popover-tile"></div></div>';function a(){var e=window.location;var t=[".action",".do"];var i,n,r;if(e.origin&&e.pathname){var o=(e.pathname+"").replace(/;jsessionid=[a-z0-9]+/i,"");for(i=0;i<t.length;i++){n=t[i];r=o.indexOf(n);if(r>0){o=o.substring(0,r+n.length)}}return e.origin+o+e.search+e.hash}else{var a=(e.href+"").replace(/;jsessionid=[a-z0-9]+/i,"");for(i=0;i<t.length;i++){n=t[i];r=a.indexOf(n);if(r>0){var s=r+n.length;var l=a.indexOf("?",s);if(l<0){l=a.indexOf("#",s)}if(l>0){return a.substring(0,s)+a.substring(l)}else{return a.substring(0,s)}}}}return a}e.new({click:"[data-support-type]"},(function(){var e=this;var s=e.el.data("support-type");var l={supportType:s,subject:"",subjectChangeable:true,page:a()};var u=_.merge({},l,n.objFromString(e.el.data("support-options")));if(s=="PROBLEM"||s=="FEATURE"||s=="ERROR"){var c=$("#support-select-button");t.remove(c);var d=$(r);d.appendTo("body");var f=t.new(c,{trigger:"manual",template:o,html:true,sanitize:false,enableAgnRunAll:true,content:i.text("support-popover-template",u)});f.show();d.on("click",(function(){f.hide()}));c.on("hidden.bs.popover",(function(){d.remove()}))}}))})();(function(){var e=AGN.Lib.Action;var t=AGN.Lib.FormBuilder.FormBuilder;e.new({"click change":"[data-sync-from]"},(function(){var e=this.el.data("sync-from").split(/,\s?/),i=this.el.data("sync-to").split(/,\s?/);_.each(e,(function(e,n){var r=$(e),o=$(i[n]),a=r.val(),s=o.attr("id"),l=o.data("_editor"),u=o.data("select2");if(window.CKEDITOR&&CKEDITOR.instances[s]){CKEDITOR.instances[s].setData(a)}else if(l){l.val(a)}else if(u){o.select2("val",a)}else if(t.isCreated("#"+s)){t.get("#"+s).setJson(t.get(e).getJson())}else{o.val(a)}}))}));$(document).on("click","a[data-sync-from]",(function(e){e.preventDefault()}))})();(function(){var e=AGN.Lib.Tile,t=AGN.Lib.Tab,i=AGN.Lib.Form;$(document).on("click","[data-toggle-tab]",(function(n){var r=$(this),o=e.trigger(r),a=r.data("toggle-tab-method")||"show";if(r.is("[data-form-submit]")){var s=i.getWrapper(r);if(s.exists()&&!i.get(s).valid()){n.preventDefault();return false}}e.show(o);t[a](r);n.preventDefault();return false}))})();(function(){var e=AGN.Lib.Form,t=AGN.Lib.Confirm,i=AGN.Lib.Helpers,n=AGN.Lib.Page;$(document).on("click",".js-table a, .js-table input, .js-table select, .js-table button, .js-table .js-checkable, .js-table .disabled",(function(e){e.preventViewLoad=true}));$(document).on("click",".js-table-sort",(function(t){var r=$(this),o=r.children("a"),a=$(t.target),s=o.attr("href");if(a[0]!=o[0]){return}if(e.getWrapper(r).exists()){var l=e.get(r);var u=i.paramsFromUrl(s);_.each(u,(function(e,t){l.setValue(t,e)}));l.submit()}else{$.get(s).done((function(e){n.render(e,false)}))}t.preventDefault()}));$(document).on("click",".js-table-paginate",(function(t){var n=$(this),r=n.attr("href"),o=e.get(n),a=i.paramsFromUrl(r);_.each(a,(function(e,t){o.setValue(t,e)}));o.submit();t.preventDefault();var s=n.closest(".tile");if(s.exists()){var l=s.offset().top;if(window.scrollY>l){window.scrollTo(0,l-150)}}else{window.scrollTo(0,0)}}));$(document).on("click",".js-row-delete",(function(i){var n=$(this),r=n.is("button")?n.data("url"):n.attr("href"),o=e.get(n),a;if(r){a=$.get(r);a.done((function(e){var i=$(e),r;r=i.filter(".modal").add(i.find(".modal"));if(r.length!=1){o.updateHtml(e);return}t.create(e).done((function(e){n.closest("tr").remove();o.updateHtml(e)}))}))}i.preventDefault()}));$(document).on("click",".js-table tr",(function(e){var t=$(this),i;if(e.preventViewLoad){return}i=t.data("link");if(typeof i!=="undefined"){window.location.href=i}}));$(document).on("click",'.js-checkable label, .js-checkable input[type="checkbox"], .js-checkable input[type="radio"]',(function(e){e.stopPropagation()}));$(document).on("click",".js-checkable",(function(e){var t=$(this),i,n;i=t.find('input[type="checkbox"], input[type="radio"]');if(i.length){_.each(i,(function(e){n=$(e);if(!n.prop("disabled")){n.prop("checked",!n.prop("checked"));n.trigger("change")}}))}}));$(document).on("click",".disabled",(function(e){e.preventDefault()}))})();(function(){var e=AGN.Lib.Tile;$(document).on("click","[data-toggle-tile]",(function(t){e.toggle($(this));t.preventDefault()}));$(document).on("click","[data-toggle-tile-all]",(function(t){var i=$(this).data("toggle-tile-all");_.each($("[data-toggle-tile]"),(function(n){var r=$(n);if(i=="expand"){e.show(r)}else{e.hide(r)}t.preventDefault()}))}))})();(()=>{$(document).on("change","[data-toggle-usability]",(function(){var e=$(this),t=e.data("toggle-usability"),i=$(document).find(t);_.each(i,(function(e){var t=$(e);if(t.prop("disabled")){t.prop("disabled",false)}else{t.prop("disabled",true)}}))}))})();(function(){var e=AGN.Lib.Tooltip;$(window).on("load",(function(){var t=$("body");if(AGN.isIE){t.on("DOMNodeInserted","[data-tooltip], [data-tooltip-help]",(function(t){var i=$(t.target);e.create(i,e.options(i))}))}else{t.on("DOMNodeInserted",(function(t){$(t.target).all("[data-tooltip], [data-tooltip-help]").each((function(){var t=$(this);e.create(t,e.options(t))}))}))}}))})();(function(){var e=AGN.Lib.Action,t=AGN.Lib.View;e.new({change:"[data-view]"},(function(){t.trigger(this.el);this.el.trigger("click.bs.dropdown.data-api")}))})();(function(){var e=AGN.Lib.Form,t=AGN.Lib.Editor;$(document).on("tile:show",(function(e){var t=$(e.target);var i=t.find(".js-wysiwyg");var r=i.attr("id");if(i.length===1){var o=s(i);window.createEditorExt(r,o.width,o.height,o.browseMailingId,o.isFullHtml,o.isFullHeight,o.allowExternalScript);if(o.isFullHeight){CKEDITOR.instances[r].on("instanceReady",n(i))}}}));$(document).on("tile:hide modal:close",(function(e){$(e.target).find(".js-wysiwyg").each((function(){if(CKEDITOR.instances[$(this).attr("id")]){CKEDITOR.instances[$(this).attr("id")].updateElement()}if(a($(this))){$(window).off("resize."+o($(this)))}t.get($(this)).val($(this).val());window.removeEditor($(this).attr("id"))}))}));$(document).on("form:submit",(function(e){var t=$(e.target).find(".js-wysiwyg");if(t.length>0&&window.removeAllEditors){window.removeAllEditors()}}));function i(t){var i=t.data("browse-mailing-id");if(!!i){return i}var n=t.data("form-target");var r=!!n?$(n):null;if(!r||r.length===0){return null}var o=e.get(r);i=o.getValue("mailingID");if(!i){i=o.getValue("mailingId")}return i}function n(e){return function(t){var i=e.parent().width();var n=e.parent().height();t.editor.resize(i,n);t.editor.resresize_enabledze=false;$(window).on("resize."+o(e),r(e))}}var r=function(e){return function(){var t=e.parent();CKEDITOR.instances[e.attr("id")].resize(t.width(),t.height())}};var o=function(e){return"ck-editor-"+e.attr("id")};var a=function(e){return!!e.data("full-height-editor")};var s=function(e){var t={};t.isFullHtml=!!e.data("full-tags");t.isFullHeight=a(e);t.browseMailingId=i(e);t.height=t.isFullHeight?0:e.height();t.width=t.isFullHeight?e.parent().width():"100%";t.allowExternalScript=false;return _.extend(t,AGN.Lib.Helpers.objFromString(e.data("editor-options")))}})();AGN.Lib.Validator.new("action",{valid:function(e,t,i){return i&&!this.errors(e,t).length},errors:function(e,t){var i=[];if($("#serviceMailOperation").length)this.validateSendServiceOperation(i);return i},validateSendServiceOperation:function(e){validateEmailList($("input[id$=toAddress]"),e,"triggerManager.operation.serviceMail.error.recipientAddress");validateEmail($("input[id$=fromAddress]"),e,"triggerManager.operation.serviceMail.error.senderAddress");validateEmail($("input[id$=replyAddress]"),e,"triggerManager.operation.serviceMail.error.replyAddress");validateSubject($("input[id$=subjectLine]"),e)}});function validateEmailList(e,i,n){e.each((function(e,r){var o=$(r);var a=getEmailsFromField(o);if(!a||!isValidEmailList(a)){i.push({field:o,msg:t(n)})}else{o.val(a.join(","))}}))}function validateEmail(e,i,n){e.each((function(e,r){var o=$(r);var a=o.val().trim();if(!isValidEmail(a)){i.push({field:o,msg:t(n)})}else{o.val(a)}}))}function validateSubject(e,i){e.each((function(e,n){var r=$(n);var o=r.val().trim();if(!o||o.length<3){i.push({field:r,msg:t("triggerManager.operation.serviceMail.error.subjectToShort")})}else if(o&&o.length>200){i.push({field:r,msg:t("triggerManager.operation.serviceMail.error.subjectToLong")})}else{r.val(o)}}))}function getEmailsFromField(e){var t=e.val();var i=t.trim()&&t.trim().split(/[ ,|]+/);_.map(i,_.trim);return i}function isValidEmailList(e){for(var t=0;t<e.length;t++){if(!isValidEmail(e[t])){return false}}return true}function isValidEmail(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}(function(){AGN.Lib.Validator.new("export/form",{valid:function(e,t){return!this.errors(e,t).length},errors:function(t,i){var n=[];e(n);return n}});function e(e){var t=[];_.each($("#columnMappings tbody").find("[data-column-mapping-row]"),(function(o){var a=$(o);var s=a.find("[data-column-name]");var l=r(s);i(s,e);n(l,t,e,s);t.push(l.toLowerCase())}))}function i(e,i){var n=r(e);if(!e.is(":last-child")&&n.length<3||e.is(":last-child")&&n&&n.length<3){i.push({field:e,msg:t("export.columnMapping.error.nameToShort")});return}if(!e.is(":last-child")&&!/^[a-zA-Z0-9_]{3,}$/.test(n)||e.is(":last-child")&&n&&!/^[a-zA-Z0-9_]{3,}$/.test(n)){i.push({field:e,msg:t("export.columnMapping.error.invalidColName")})}}function n(e,i,n,r){if(e&&i.indexOf(e.toLowerCase())>=0){n.push({field:r,msg:t("export.columnMapping.error.duplicate")})}if(o().indexOf(e.toLowerCase())>=0){n.push({field:r,msg:t("export.columnMapping.error.exist")})}}function r(e){return e.val().trim()}function o(){return $.map($('select[name="userColumns"] option'),(function(e){return e.value.toLowerCase()}))}})();AGN.Lib.CoreInitializer.new("import-profile-mappings-validator",(function(){const e="dd.mm.yyyy";const i="do-not-import-column";var n;AGN.Lib.Validator.new("import-profile-mappings/form",{init:function(){const e=$("#config\\:import-profile-mappings-validator");n=e.exists()?e.json():{}},valid:function(e,t){return!this.errors(e,t).length},errors:function(e,t){const i=[];if($("#columnMappings").length){c(i)}return i}});function r(e){const t=e.simpleDataType.toLowerCase();if(t==="float"||t==="numeric"){return e.numericPrecision+e.numericScale}return e.characterLength}function o(e,t){return t.length<=r(e)}function a(e){var t=e.val();if(t[0]=="'"&&t[t.length-1]=="'"){t=t.substring(1,t.length-1)}return t}function s(e,n){const s=a(e);if(s&&f(e)!==i){const i=d(e);const a=i.simpleDataType.toLowerCase();if(i.columnName==="email"&&!AGN.Lib.Helpers.isValidEmail(s)){n.push({field:e,msg:t("import.columnMapping.error.invalidEmail")})}else if(a==="date"||a==="datetime"){if(h(e.val().trim())){return}l(a,s,n,e)}else if(!p(a,s)){n.push({field:e,msg:t("import.columnMapping.error.type",a)})}else if(!o(i,s)){n.push({field:e,msg:t("import.columnMapping.error.length",r(i))})}}}function l(i,n,r,o){if(!n||!p(i,n)){r.push({field:o,msg:t("import.columnMapping.error.dateFormat",i==="datetime"?e+" hh:mm":e)})}}function u(e){const t=$("[name=default-value-new]");if(f(t)!==i&&!b()){s(t,e)}}function c(e){_.each($("#columnMappings tbody").find("[data-mapping-defaultValue]"),(function(t){s($(t),e)}));u(e)}function d(e){return n.columns[f(e)]}function f(e){return e.attr("name")==="default-value-new"?$("#database-column-new").val():e.closest("tr").find("[data-mapping-db-column]").first().val()}function p(e,t){switch(e){case"numeric":case"float":case"double":return v(t);case"integer":return y(t);case"date":return g(t);case"datetime":return m(t);default:return true}}function h(e){return/^(now|now\(\)|sysdate|sysdate\(\)|current_timestamp|current_timestamp\(\)|today)\s*([+\-]\s*\d+\s*)?$/im.test(e)}function g(t){return moment(t,e.toUpperCase(),true).isValid()}function m(e){const t=e.split(" ");return g(t[0])&&/^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/.test(t[1])}function v(e){return!isNaN(parseFloat(e))&&isFinite(e)}function y(e){return/^-?\d+$/.test(e)}function b(){const e=$("[data-action=change-date-input]");return e.length&&e.is(":checked")}}));AGN.Lib.Validator.new("length",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=e.val();var r=[];if(n){if(i.min>=0&&n.length<i.min){r.push({field:e,msg:t("fields.errors.string_exceed_min_length",i.min)})}else if(i.max>=0&&n.length>i.max){r.push({field:e,msg:t("fields.errors.string_exceed_max_length",i.max)})}}else if(i.min>0||i.required===true){r.push({field:e,msg:t("fields.required.errors.missing")})}return r}});AGN.Lib.Validator.new("logon-new-password/form",{valid:function(){return!this.errors().length},errors:function(){var e=[];var i=$("#password");var n=$("#password-repeat");var r=i.val();if(!$.trim(r)){e.push({field:i,msg:t("fields.required.errors.missing")})}else if(r!=n.val()){e.push({field:n,msg:t("fields.password.errors.notMatching")})}return e}});AGN.Lib.Validator.new("mailing-priorities/form",{valid:function(){if($("#priorityCount").val()>0){return true}AGN.Lib.Messages(t("defaults.error"),t("error.mailing.invalidPriorityCount"),"alert");return false},errors:function(){return[]}});AGN.Lib.Validator.new("mailinglist-exist",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=e.val();var r=AGN.Lib.Validator.get("required-id").errors(e,i);if(r&&r.length<=0&&i&&n&&i.removedMailinglistId==n.trim()){r.push({field:e,msg:t("fields.mailinglist.errors.removed")})}return r}});AGN.Lib.Validator.new("max-length-validator",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=e.val();var r=[];if(e.hasClass("js-wysiwyg")&&!n){n=$("#cke_"+e.attr("id")).find("iframe").contents().find("body").text()}if(n){if(n.length>i.max){r.push({field:e,msg:t("fields.errors.contentLengthExceedsLimit",i.max)})}}else if(i.required===true){r.push({field:e,msg:t("fields.required.errors.missing")})}return r}});(function(){AGN.Lib.Validator.new("number",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=[];if(i.excludeHidden&&e.is(":hidden")){return[]}var r=e.val();if(r){var o=i.float===true?parseFloat(r):parseInt(r);if(isNaN(o)){n.push({field:e,msg:t("fields.errors.number_nan")})}else{if(o<i.min){n.push({field:e,msg:t("fields.errors.number_exceed_min",i.min-1)})}else if(o>i.max){n.push({field:e,msg:t("fields.errors.number_exceed_max",i.max)})}else if(i.strict===true){if($.trim(r)!==o.toString()){if(i.float===true){n.push({field:e,msg:t("fields.errors.number_not_double")})}else{n.push({field:e,msg:t("fields.errors.number_not_integer")})}}}}}else if(i.required===true){n.push({field:e,msg:t("fields.required.errors.missing")})}return n}})})();AGN.Lib.Validator.new("phone-number",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=$.trim(e.val());var r=[];var o=0;var a=1;var s=3;var l=4;var u=5;var c=6;if(n){var d=o;var f=false;var p=false;var h=0;for(var g=0;g<n.length;g++){var m=n.charAt(g);if(m>="0"&&m<="9"){h++;d=s}else if(m=="."||m=="-"||m=="/"){if(d==s||d==c){d=l}else{f=true;break}}else if(m=="("){if(p){f=true;break}d=u;p=true}else if(m==")"){if(d==s&&p){d=c;p=false}else{f=true;break}}else if(m=="+"){if(d==o){d=a}else{f=true;break}}else if(!/\s/.test(m)){f=true;break}}if(f||p||h<3||h>20){r.push({field:e,msg:t("fields.errors.phone_number_invalid")})}}else if(i.required===true){r.push({field:e,msg:t("fields.required.errors.missing")})}return r}});(function(){AGN.Lib.Validator.new("reference-table/form",{valid:function(e,t){return!this.errors(e,t).length},errors:function(t,i){var n=[];var r=$('[name="shortname"]');var o=$('[name="keyColumn"]');if(r.length)e(r,n,5,i.isVoucher?27:29,new RegExp("^[a-z]*$","i"),"referenceTables.table.error.name");if(o.length)e(o,n,3,30,/^(?![0-9_])[a-z0-9_]*$/,"referenceTables.table.error.keyColumn");return n}});function e(e,t,r,o,a,s){if(!i(e,t,r,o)){return}n(e,t,a,s)}function i(e,t,i,n){var r=AGN.Lib.Validator.get("length").errors(e,{min:i,max:n,required:true});if(r.length){r.forEach((function(e){t.push(e)}));return false}return true}function n(e,i,n,r){if(!e.val().match(n)){i.push({field:e,msg:t(r)})}}})();AGN.Lib.Validator.new("reject-script-element",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=[];var r=(new DOMParser).parseFromString(e.val(),"text/html").querySelector("script");if(r){n.push({field:e,msg:t("fields.errors.illegal_script_element")})}return n}});AGN.Lib.Validator.new("required-id",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){if(e.data("select2")&&!e.parent().find(".select2-container").is(":visible")){return[]}var n=e.val();var r=parseInt(n);var o=[];if(isNaN(r)||r.toString()!==n.toString().trim()||r<=0&&i.positive!==false){o.push({field:e,msg:t("fields.required.errors.missing")})}return o}});AGN.Lib.Validator.new("unique-mobile-base",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=AGN.Lib.Select.get(e).getSelectedValue();var r=e.attr("id");var o=[];if(!this.isUniqueMobileBase(n,r)){o.push({field:e,msg:t("fields.mediapool.errors.mobile_base_duplicate")})}return o},isUniqueMobileBase:function(e,t){if(e==""){return true}var i=$("[id^=image-mobile-base]:not(#"+t+")").filter((function(){var t=$(this);return AGN.Lib.Select.get(t).getSelectedValue()===e}));return i.length===0}});AGN.Lib.Validator.new("upload-file/form",{valid:function(e,i){var n=true;var r=$('[data-initializer="upload"]');if(r.exists()&&r.data("upload-selection").length<1){AGN.Lib.Messages(t("defaults.error"),t("error.upload.file"),"alert");n=false}return n&&!this.errors(e,i).length},errors:function(e,i){const n="error.workflow.shortName";const r="fields.required.errors.missing";var o=[{field:$("#name"),minLength:{val:3,msgKey:n},maxLength:99},{field:$("#firstName"),minLength:{val:3,msgKey:n},maxLength:99},{field:$("#phone"),minLength:{val:3,msgKey:r},maxLength:99},{field:$("#email"),maxLength:99,regexpRules:[{regexp:/\S+@\S+\.\S{2,}/,message:t("error.upload.email")}]}];var a=[];o.forEach((function(e){var i=e.field;var n=i.val();if(!n||n.length<1){a.push({field:i,msg:t(r)});return}if(e.minLength&&n.length<e.minLength.val){a.push({field:i,msg:t(e.minLength.msgKey)});return}if(e.maxLength&&n.length>e.maxLength){a.push({field:i,msg:t("fields.errors.contentLengthExceedsLimit",e.maxLength)});return}if(e.regexpRules&&e.regexpRules.length>0){for(var o=0;o<e.regexpRules.length;++o){var s=e.regexpRules[o];if(!n.match(s.regexp)){a.push({field:i,msg:s.message});return}}}}));return a}});AGN.Lib.Validator.new("userform-edit/form",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=[];var r=$('[name="formName"]');if(!r.val().match(/^[a-zA-Z0-9-_]+$/gi)){n.push({field:r,msg:t("userform.error.invalid_name")})}this.validateUrlFields(n);this.validateTemplateField(n,$("#successTemplate"),"SUCCESS");this.validateTemplateField(n,$("#errorTemplate"),"ERROR");return n},validateUrlFields(e){var i=$("#successURL");var n=$("#errorURL");if($('[name="successSettings.useUrl"]:checked').val()==="true"&&!AGN.Lib.Helpers.isUrl(i.val())){e.push({field:i,msg:t("userform.error.invalid_successUrl")})}if($('[name="errorSettings.useUrl"]:checked').val()==="true"&&!AGN.Lib.Helpers.isUrl(n.val())){e.push({field:n,msg:t("userform.error.invalid_errorUrl")})}},validateTemplateField:function(e,i,n){if($('[name="'+n.toLowerCase()+'Settings.useUrl"]:checked').val()!=="true"&&!i.val().trim()){e.push({field:i,msg:t("userform.error.invalid_"+n.toLowerCase()+"Html")})}if(!this.validateDirectives(e,i)){return false}if(!this.validateHrefPattern(e,i,n)){return false}},validateDirectives:function(e,i){var n=i.val().match(/#(?:include|parse)/gi);if(n){e.push({field:i,msg:t("userform.error.illegal_directive",n.join(", "))});return false}return true},validateHrefPattern:function(e,i,n){var r=i.val();var o=r.search(/\shref\s*=\s*(["'])\s/gi);if(o!=-1){var a=r.slice(0,o).match(/\r?\n/g).length+1;e.push({field:i,msg:t("userform.error.invalid_link",n,a)});return false}return true}});AGN.Lib.Controller.new("action-view",(function(){var e=[];var i;var n={};const r=AGN.Lib.Select;function o(){var e=this;e.$container=$("#module-list");e.$container.on("remove-module",(function(){var t=e.$container.find("[data-action-module] .headline span.module-count");$.each(t,(function(e,t){$(t).html(e+1+".")}))}));e.$container.on("add-new-module",(function(){var t=e.$container.find("[data-action-module]");var i=t.last();i.find(".headline span.module-count").html(t.length+".")}))}o.prototype.clean=function(){this.$container.empty()};o.prototype.getNextIndex=function(){var e=this.$container.find("[data-module-content");var t=0;if(e.length>0){var i=e.last().data("module-content");t=i+1}return t};o.prototype.addModule=function(e){if(e&&e.type){var i=this;e.index=i.getNextIndex();var n=AGN.Lib.Template.dom("common-module-data",{moduleName:t("triggerManager.operation."+e.type)});var r=AGN.Lib.Template.text("module-"+e.type,e.getParameters());n.filter(".inline-tile").append(r);i.$container.append(n);AGN.runAll(n);i.$container.trigger("add-new-module")}};o.prototype.deleteModule=function(t){if(t>=0){var i=this.$container.find("[data-module-content="+t+"]");var n=i.parent("[data-action-module]");var r=n.next(".tile-separator");n.remove();r.remove();this.$container.trigger("remove-module");e=e.filter((function(e){return e.index!==t}))}};o.prototype.toJson=function(){var e=[];this.$container.find("[data-module-content]").each((function(t,i){e.push(a.toJson($(i),t))}));return e};o.prototype.getSubmissionJson=function(){var e=this;return JSON.stringify(e.toJson())};function a(e,t,i){this.type=e;this.index=i||0;this.id=t.id||0;this.data=$.extend(a.defaults(e),t)}a.defaults=function(e){var t={};switch(e){case"ActivateDoubleOptIn":t.forAllLists=false;t.mediaTypeCode=0;break;case"ContentView":t.tagName="";break;case"ExecuteScript":t.script="";break;case"GetArchiveList":t.campaignID=0;break;case"GetArchiveMailing":t.expireDate=null;break;case"GetCustomer":t.loadAlways=false;break;case"IdentifyCustomer":t.keyColumn="";t.passColumn="";break;case"SendMailing":t.mailingID=0;t.delayMinutes=0;t.bcc="";t.userStatusesOption=1;break;case"ServiceMail":t.toAddress="";t.fromAddress="";t.replyAddress="";t.subjectLine="";t.mailtype=0;t.textMail="";t.htmlMail="";break;case"SubscribeCustomer":t.doubleCheck=false;t.keyColumn="";t.doubleOptIn=false;break;case"UnsubscribeCustomer":t.mailinglistIds=[];t.allMailinglistsSelected=false;t.additionalMailinglists=false;break;case"UpdateCustomer":t.useTrack=false;t.columnName="";t.updateValue="";t.updateType=1;t.trackingPointId=-1;break}t.readonly=false;return t};a.toJson=function(e,t){var i={};i.index=t;e.find('[name^="modules[]"]').each((function(e,t){var n=$(t);var o=n.prop("name")||"";var a=o.replace("modules[].","");var s="";if(n.is("select")){s=r.get(n).getSelectedValue()}else if(n.is("input")&&n.prop("type")==="checkbox"){s=n.prop("checked")}else{s=n.val()}i[a]=s}));return $.extend(a.defaults(i.type),i)};a.prototype.getParameters=function(){var e={type:this.type,index:this.index,id:this.id};return _.merge({},this.data,e)};a.create=function(e){return new a(e,{})};a.deserialize=function(e,t){var i=n[e.operationType];return new a(i,e,t)};this.addDomInitializer("action-view",(function(){var e=$(this.el);var t=AGN.Lib.Form.get(e);t.loader().show();var r=this.config;n=this.config.operationTypes;i=new o;i.clean();var s=[];if(r.modules){s=JSON.parse(r.modules).map((function(e,t){return a.deserialize(e,t)}))}s.forEach((function(e){i.addModule(e)}));t.initFields();e.removeClass("hidden");t.loader().hide()}));function s(t){return e.filter((function(e){return e.type===t}))}this.addAction({click:"add-new-module"},(function(){var t=$(this.el);var n=_.merge({},{},AGN.Lib.Helpers.objFromString(t.data("config")));var o=$(n.moduleTypeSelector);var l=a.create(o.val());if(l.type==="SendMailing"){if(s("ActivateDoubleOptIn").length>0){l.data.userStatusesOption=0}}i.addModule(l);e.push(l);AGN.Lib.Form.get(t).initFields();if(l.type==="ActivateDoubleOptIn"){const e=s("SendMailing");e.forEach((function(e){const t="#module-"+e.index+"-userStatusesOption";const i=$(t);r.get(i).selectFirstValue()}))}}));this.addAction({click:"action-delete-module"},(function(){var e=$(this.el);i.deleteModule(e.data("property-id"))}));this.addAction({submission:"save-action-data"},(function(){var e=AGN.Lib.Form.get($(this.el));e.setValueOnce("modulesSchema",i.getSubmissionJson());e.submit()}));this.addDomInitializer("update-customer-module",(function(){var e=$(this.el);var t=e.find('[data-action="toggle-if-first"]:checked');l(e,t.exists())}));this.addAction({click:"toggle-if-first"},(function(){var e=$(this.el);l(e,e.prop("checked"))}));function l(e,t){var i=$(e.closest("[data-action-module]"));var n=i.find("[data-useTrack-trackingPointId]");var r=i.find("[data-useTrack-updateValue]");if(!n.exists()){r.show();return}if(i.index()===0){if(t){n.show();r.hide()}else{n.hide();r.show()}}}}));AGN.Lib.Controller.new("admin-enabling",(function(){this.addAction({click:"save-approved-mailing-lists"},(function(){var t=this.el;var i=AGN.Lib.Form.getWrapper(t);e(i);var n=AGN.Lib.Form.get(i);n.submit().done((function(e){if(e.success===true){AGN.Lib.JsonMessages(e.popups,true);AGN.Lib.Modal.getWrapper(t).modal("hide")}else{AGN.Lib.JsonMessages(e.popups,true)}}))}));function e(e){$("input[name*='disabledMailinglistsIds']").remove();t("mailinglist").each((function(){$("<input>").attr({type:"hidden",name:"disabledMailinglistsIds",value:$(this).data("mailinglist")}).appendTo(e)}))}function t(e){if(e){return $("input:checkbox:not(:checked)[data-enabling="+e+"]")}else{return $("input:checkbox:not(:checked)[data-enabling]")}}}));AGN.Lib.Controller.new("ai-text-generation",(function(){const e=AGN.Lib.Form;const i=AGN.Lib.Select;var n;var r;this.addDomInitializer("ai-text-generation",(function(){n=this.el.closest(".modal");o();const e=i.get(this.el.find("[id^='ai-language']"));if(e.hasOption(window.adminLocale)){e.selectValue(window.adminLocale)}}));function o(){n.on("modal:enlarged",(function(e,t){u(n,t)}));n.on("modal:enlarged:apply",(function(e,t){u(t,n)}));n.on("saveDynTag",(function(e,t){const i=$("#tab-content-ai-text-generation");if(i.is(":visible")){if(r){const e=AGN.Lib.Confirm.createFromTemplate({dynTagName:t.name},"mailing-ai-text-generation-apply-question");e.done((function(){const e=$.Event("saveDynTagContent");n.trigger(e,[r]);r=null}))}else{n.modal("toggle")}e.preventDefault()}}))}this.addAction({enterdown:"skip-form-submit"},(function(){this.event.preventDefault()}));this.addAction({click:"generateText"},(function(){const i=e.get(this.el);const n=this.el.closest(".tile, .modal");const o=this.el;if(a(i,n)){const e=c(n);$.post(AGN.url("/mailing/content/generateText.action"),e).done((function(e){r=e.data;d(e.data,n);o.find(".text").text(t("ai.regenerateText"))})).fail((function(){AGN.Lib.Messages(t("Error"),t("defaults.error"),"alert")}))}}));function a(e,i){var n=true;var r=i.find("[id^='ai-numberOfWords']");var o=i.find("[id^='ai-content-description']");const a=AGN.Lib.Validator.get("number").errors(r,{min:1,required:true});if(a.length>0){n=false;a.forEach((function(t,i){e.showFieldError(r.attr("name"),t.msg)}))}else{e.cleanFieldError(r.attr("name"))}if(!$.trim(o.val())){n=false;e.showFieldError(o.attr("name"),t("fields.required.errors.missing"))}else{e.cleanFieldError(o.attr("name"))}return n}this.addAction({click:"assumeGeneratedText"},(function(){const e=this.el.closest(".tile, .modal");const t=e.find(".ai-generated-text").val();if(e.is(".modal")){AGN.Lib.Confirm.get(this.el).positive(t)}else{const i=e.data("tab-id");s(i);l(t,e,i)}}));function s(e){const t=$('[data-toggle-tab*="wysiwyg'+e+'"]');if(t.exists()){t.trigger("click");return}const i=$('[data-toggle-tab*="html'+e+'"]');if(i.exists()){i.trigger("click")}}function l(e,t,i){const n=t.parent().parent().find(".js-wysiwyg");if($("#tab-content-wysiwyg").is(":visible")||$("[id^='tab-grid-wysiwyg"+i+"']").is(":visible")){var r=CKEDITOR.instances[n.attr("id")];if(r.status==="ready"){r.setData(e)}else{r.on("instanceReady",(function(t){t.editor.setData(e)}))}}if($("#contentEditor").is(":visible")||$("[id^='tab-grid-html"+i+"']").is(":visible")){ace.edit(n.attr("name")+"Editor").setValue(e)}}function u(e,t){const i=c(e);f(t,i);const n=e.find(".ai-generated-text").val();if(n){d(n,t)}}function c(e){return{language:e.find('[id^="ai-language"]').val(),numberOfWords:e.find('[id^="ai-numberOfWords"]').val(),tonality:e.find('[id^="ai-tonality"]').val(),contentDescription:e.find('[id^="ai-content-description"]').val()}}function d(e,t){t.find(".ai-generated-text").val(e);t.find("#ai-assume-generated-text").removeClass("hidden")}function f(e,t){if(t){i.get(e.find("#ai-language")).selectValue(t.language);e.find("#ai-numberOfWords").val(t.numberOfWords);i.get(e.find("#ai-tonality")).selectValue(t.tonality);e.find("#ai-content-description").val(t.contentDescription)}}}));AGN.Lib.Controller.new("allowed-profile-field-values",(function(){var e=this;this.addInitializer("allowed-values",(function(t){if(!t){t=$(document)}var i=t.find('[data-controller="allowed-profile-field-values"]');if(i.length==0){return}e.container=i.find("table .js-allowed-value").first().parent()}));this.addAction({click:"addNewValue"},(function(){var t=e.getRow(this.el);var i=e.getField(t).val();t.remove();e.appendRow(false,i);e.appendRow(true)}));this.addAction({click:"deleteValue"},(function(){e.getRow(this.el).remove()}));this.appendRow=function(e,t){var i=AGN.Lib.Template.dom("allowed-value-new-row",{isLastRow:e});if(t){this.getField(i).val(t)}this.container.append(i)};this.getRow=function(e){return e.closest("tr.js-allowed-value")};this.getField=function(e){return e.find('input[name="allowedValues"]')}}));AGN.Lib.Controller.new("auto-import-export",(function(){var e;var i;this.addDomInitializer("auto-export",(function(){e=this.config.urls.checkConnection;n()}));function n(){const e=$("#edit-profile-btn");const t=$("#add-profile-btn");const i=$("#export-profile").val();const n=parseInt(i)>0;t.toggle(!n);e.toggle(n).attr("href",AGN.url("/export/"+i+"/view.action"))}this.addDomInitializer("auto-import",(function(){e=this.config.urls.checkConnection;i=this.config.isWorkflowDriven;if(h()){r(this.config.contentSourceIdentifier)}}));function r(e){const t=AGN.Lib.Select.get($("#contentSourceId"));if(t.hasOption(e)){t.selectValue(e)}}this.addInitializer("optionsChangeable",(function(){if($("#recipient-autoimport-csvdescription").length){$('[data-action="options-availability"][value="ReferenceTable"]').prop("disabled",false)}}));this.addAction({click:"select-customer-fields"},(function(){AGN.Lib.Modal.createFromTemplate({},"modal-select-customer-fields");$("#modalSelectedProfileFields").select2("val",$("#selectedProfileFields").val())}));this.addAction({click:"save-selected-customer-fields"},(function(){$("#selectedProfileFields").select2("val",$("#modalSelectedProfileFields").val())}));this.addAction({change:"select-export-profile"},(function(){n()}));this.addAction({click:"check-connection"},(function(){const t=AGN.Lib.Form.get(this.el);$.ajax(e,{type:"POST",dataType:"html",enctype:"multipart/form-data",processData:false,contentType:false,data:t.data()}).done((function(e){AGN.Lib.Page.render(e)}))}));var o={},a=false;this.addDomInitializer("import-profile-mailing-lists",(function(){const e=this.config;a=e.isAutoImportNew;o=e.profileMailinglists;const t=$('[name="importProfileId"]').val();s(t,a)}));this.addAction({change:"change-import-profile"},(function(){const e=AGN.Lib.Select.get($(this.el)).getSelectedValue();s(e,a)}));const s=function(e,t){if(t){const t=o[e];$('input[type=checkbox][name^="mailinglists"]').prop("checked",false);_.each(t,(function(e){$('input[type=checkbox][name="mailinglists['+e+']"]').prop("checked",true)}))}};const l=AGN.Lib.ScheduleTimeTable,u=AGN.Lib.ScheduleTimeTable.DayRow;function c(e){const t=e.closest("[data-controller]");return t.data("_schedule_table")}function d(e,t){const i=e.closest("[data-controller]");i.data("_schedule_table",t)}this.addDomInitializer("auto-import-export-scheduler",(function(){const e=$(this.el);const t=this.config;const i=t.intervalAsJson||[];const n=$("#tile-importexport-schedule-time");const r=new l(n);d(e,r);var o=[];if(!_.isEmpty(i)){o=JSON.parse(i).map((function(e){return u.deserialize(e)}))}o.forEach((function(e){r.addRow(e)}));if(o.length===0){r.addEmptyDayRow()}const a=AGN.Lib.Form.get(e);a.initFields();if(!a.editable){n.find(":input, button").prop("disabled",true);n.find("a").attr("disabled","disabled")}}));this.addAction({click:"add-day"},(function(){c($(this.el)).addEmptyDayRow()}));this.addAction({click:"remove-day"},(function(){const e=$(this.el);c(e).deleteRow(u.get($(this.el)))}));this.addAction({click:"add-schedule"},(function(){u.get($(this.el)).addSchedule()}));this.addAction({click:"remove-schedule"},(function(){u.get($(this.el)).removeSchedule($(this.el))}));this.addAction({click:"time-checkbox-toggle"},(function(){const e=$(this.el);const t=u.get(e);t.timeCheckboxToggle(e)}));this.addAction({click:"hour-checkbox-toggle"},(function(){const e=$(this.el);const t=u.get(e);t.hourCheckboxToggle(e)}));this.addAction({change:"validate-changes"},(function(){const e=$(this.el);const t=u.get(e);f(t)}));function f(e){if(e.isValidTimeIntervals()){e.hideTimeScheduleErrors();return true}else{e.showTimeScheduleErrors(t("error.delay.60"));return false}}this.addAction({submission:"save-scheduler-data"},(function(){const e=$(this.el);const t=c(e);const i=t.getAllDayRows().every((function(e){return f(e)}));if(i){const e=AGN.Lib.Form.get($(this.el));e.setValueOnce("intervalAsJson",t.getSubmissionJson("day"));e.submit()}}));this.addAction({click:"save-auto-import"},(function(){const e=$("#recipient-autoimport-form");const t=c(e);const n=t.getAllDayRows().every((function(e){return f(e)}));if(n){const n=AGN.Lib.Form.get(e);const o=t.getSubmissionJson("day");var r=p();if(i){n.setValue("intervalAsJson",o);if(r.length){n.setValue("contentSourceID",r[0]);n.setValue("contentSourceType",r[1])}}else{n.setValueOnce("intervalAsJson",o);if(r.length){n.setValueOnce("contentSourceID",r[0]);n.setValueOnce("contentSourceType",r[1])}}n.submit()}}));function p(){if(h()){const e=$("#contentSourceId").val();return e?e.split("/"):[]}return[]}function h(){const e=$("#contentSourceId");return e.exists()}function g(e){const t=e.closest("[data-controller]");return t.data("_export_type_handler")}function m(e,t){const i=e.closest("[data-controller]");i.data("_export_type_handler",t)}this.addDomInitializer("mailing-options-attribute-resolver",(function(){const e=$(this.el);m(e,new v(e,this.config))}));function v(e,t){if(!e.exists()){console.error("ExportTypeHandler could not instantiate, element is not defined");return false}this.$element=e;this.exportType=t.exportType||"";this.mailingType=t.mailingType||-1;const i=$('input[name="'+t.oneTimeOption+'"]');this.$oneTimeCheckbox=i;this.initialOneTimeValues={checked:i.is(":checked"),disabled:i.is(":disabled")};this.toggleOneTimeCheckbox()}v.prototype.isAfterMailingDeliveryType=function(){return this.exportType=="Mailing"&&this.mailingType==0};v.prototype.resolve=function(e,t){this.exportType=e||"";this.mailingType=t||-1;this.toggleOneTimeCheckbox()};v.prototype.toggleOneTimeCheckbox=function(){const e=this.isAfterMailingDeliveryType();const t=this.initialOneTimeValues.checked;const i=this.initialOneTimeValues.disabled;this.$oneTimeCheckbox.prop("checked",e||t);this.$oneTimeCheckbox.prop("disabled",e||i)};this.addAction({change:"change-mailing-type"},(function(){const e=$(this.el);const t=AGN.Lib.Select.get(e).getSelectedValue();var i;if($("#exportType").is("select")){i=AGN.Lib.Select.get($("#exportType select")).getSelectedValue()}else{i=$("#exportType [type=radio]:checked").val()}g(e).resolve(i,t)}));this.addAction({change:"export-type-resolver"},(function(){const e=$(this.el);var t;if($("#exportType").is("select")){t=AGN.Lib.Select.get($("#exportType select")).getSelectedValue()}else{t=e.find("[type=radio]:checked").val()}const i=AGN.Lib.Select.get($("#exportMailing select")).getSelectedValue();g(e).resolve(t,i)}))}));AGN.Lib.Controller.new("available-building-blocks",(function(){var e;var t;var i;function n(){e={};t={}}this.addDomInitializer("available-building-blocks",(function(){n();var t=this.el;i=AGN.Lib.Form.get(t);if(this.config.changedBlockStatus){e=JSON.parse(this.config.changedBlockStatus)}}));this.addDomInitializer("available-building-blocks-table",(function(){var i=this.config.divContainerList;_.each(i,(function(i){var n=i.id;var r=i.active;if(n in t){if(n in e){$("input:checkbox[data-block-id="+n+"]").prop("checked",!!e[n])}}else{t[n]=r}}));r()}));this.addAction({click:"update-changed-data"},(function(){var e=this.el;r();o();i.setActionOnce(e.data("form-url"));i.setResourceSelectorOnce(e.data("form-resource"));i.submit()}));this.addAction({change:"change-activation"},(function(){var i=this.el;var n=i.data("block-id");var r=i.is(":checked");if(r==t[n]){if(n in e){delete e[n]}}else{e[n]=r}}));this.addAction({change:"activate-all"},(function(){var e=this.el;var t=$("input:checkbox[data-block-id]");t.prop("checked",e.is(":checked"));t.change()}));function r(){var e=$(i.form).find(".table-controls .well");e.first().html(e.last().html())}this.updateTableControls=r;function o(){if(!!i){i.setValue("changedBlockStatusJson",JSON.stringify(e,(function(e,t){if(t!=null){return t}})))}}this.updateFormData=o}));AGN.Lib.Controller.new("birt-reports",(function(){var e={},i=0,n=[],r=[],o=[],a,s,l;this.addDomInitializer("birt-reports",(function(){e=this.config;s=e.constant.MAILING_ID;a=e.constant.AFTER_MAILING_TYPE_ID;n=e.filtered.FILTER_ARCHIVE;r=e.filtered.FILTER_MAILINGLIST;o=e.filtered.FILTER_TARGET;i=e.reportType;l=this.el}));function u(){_.each($(e.reportSettingsId).find("[data-toggle-tab]"),(function(e){var t=$(e);var i=t.data("toggle-tab");if(i.endsWith(s)){t.trigger("click");return}t.parent("li").addClass("disabled");AGN.Lib.Tab.hide($(i))}))}function c(){_.each($(e.reportSettingsId).find("[data-toggle-tab]"),(function(e){$(e).parent("li").removeClass("disabled")}))}AGN.Lib.Action.new({change:"input[type=radio][name=type]"},(function(){var e=$(this.el).val();var t=e==a;if(t){u()}else if(i==a){c()}i=e;return false}));this.addDomInitializer("report-settings",(function(){var e=this.el;var t=this.config;new d(e,t)}));var d=function(e,t){var i=this;this.container=e;this.config=t;this.settingsType=t.settingsType;this.select=AGN.Lib.Select.get(e.find(t.selectors.filterBlockId));this.mailingSelect=AGN.Lib.Select.get(e.find(t.selectors.normalMailing));i.init(t);e.find(t.selectors.mailingType).on("change",(function(e){i.handleMailingTypeChanges($(e.target))}));e.find(t.selectors.mailingFilter).on("change",(function(e){i.handleMailingFilterChanges($(e.target))}));e.find(t.selectors.filterBlockId).on("change",(function(e){i.handleMailingFilterValueChanges($(e.target))}))};d.prototype.init=function(e){var t=e.data.mailingType;var i=e.data.mailingFilter;var n=e.data.predefineMailing;var r=e.data.selectedMailings;const o=this.updateAllComparisonDependentFields(t,i,n,r);o.done((function(){l.dirty("setAsClean")}))};d.prototype.handleMailingTypeChanges=function(e){var t=this;var i=t.getMailingFilter();var n=t.getMailingFilterValue();t.updateNormalMailingField(e.val(),i,n)};d.prototype.handleMailingFilterChanges=function(e){var t=this;var i=t.getMailingType();t.updateAllComparisonDependentFields(i,e.val())};d.prototype.handleMailingFilterValueChanges=function(e){var t=this;var i=t.getMailingFilter();var n=t.getMailingType();t.updateNormalMailingField(n,i,e.val())};d.prototype.updateAllComparisonDependentFields=function(e,t,i,a){var s=this;s.select.resetOptions();if(t>0){var l=[];if(t==1){l=n}else if(t==2){l=r}else if(t==4){l=o}_.each(l,(function(e){s.select.addFormattedOption('<option value="'+e.id+'">'+e.shortname+"</option>")}));s.select.selectValueOrSelectFirst(i);i=s.select.getSelectedValue()}return s.updateNormalMailingField(e,t,i,a)};d.prototype.updateNormalMailingField=function(t,i,n,r){const o=$.Deferred();var a=this;a.mailingSelect.resetOptions();if(a.settingsType==e.constant.COMPARISON_SETTINGS&&t==2||a.settingsType==e.constant.MAILING_SETTINGS&&t==3){$.ajax({type:"GET",url:e.urls.FILTERED_MAILING_URL,data:{type:i,value:n?n:0,mailingType:e.constant.NORMAL_MAILING_TYPE}}).done((function(e){_.each(e,(function(e){a.mailingSelect.addFormattedOption('<option value="'+e.id+'">'+e.shortname+"</option>")}));a.mailingSelect.selectValue(r?r:"");o.resolve()}))}return o.promise()};d.prototype.getMailingFilter=function(){var e=this.container.find(this.config.selectors.mailingFilter);return parseInt(e.val())|0};d.prototype.getMailingFilterValue=function(){var e=this.select.getSelectedValue();return parseInt(e)|0};d.prototype.getMailingType=function(){var e=this.container.find(this.config.selectors.mailingType+":checked");return parseInt(e.val())|0};this.addAction({click:"confirm-deactivate-deliveries"},(function(){AGN.Lib.Confirm.createFromTemplate({action:AGN.url("/statistics/report/"+e.reportId+"/deactivateAllDeliveries.action"),method:"POST",title:t("birtreport.deactivateAll"),content:t("birtreport.deactivateAllQuestion")},"modal-yes-no-cancel").done((function(e){AGN.Lib.Form.get($("#birtreportForm")).updateHtml(e)}))}))}));AGN.Lib.Controller.new("blacklist-list",(function(){var e;this.addDomInitializer("blacklist-list-init",(function(){e=this.el}));this.addAction({click:"saveBlacklist"},(function(){var t=this.el;var i=AGN.Lib.Form.get(t);var n=t.data("url");$.ajax(n,{type:"POST",data:{email:e.find("#new-entry-email").val(),reason:e.find("#new-entry-reason").val()},success:function(e){if(e.success===true){i.submit().done((function(){AGN.Lib.JsonMessages(e.popups,true)}))}else if(e.popups){AGN.Lib.JsonMessages(e.popups,true)}else{AGN.Lib.RenderMessages($(e))}}})}))}));AGN.Lib.Controller.new("edit-modal-blacklist-list",(function(){this.addAction({click:"saveChanges"},(function(){var e=this.el;var t=AGN.Lib.Form.get(e);t.submit().done((function(t){if(t.success===true){AGN.Lib.Form.get($("#blacklistListView")).submit().done((function(){AGN.Lib.JsonMessages(t.popups,true)}));AGN.Lib.Modal.getWrapper(e).modal("hide")}else if(t.popups){AGN.Lib.JsonMessages(t.popups,true)}else{AGN.Lib.RenderMessages($(t))}}))}))}));AGN.Lib.Controller.new("email-list-controller",(function(){var e="";var t=" ";var i;var n=function(){var i=[""];var n=$('input[name="'+e+'"]').val();if(n){i=n.split(t)}return i};var r=function(){var n=i.getJsonData();$('input[name="'+e+'"]').val(n.join(t))};this.addDomInitializer("email-list-initializer",(function(){var r=$(this.el);e=r.data("target-field")||"";t=r.data("data-emails-separator")||t;i=AGN.Lib.EmailsListManager.initialize(r,n())}));this.addAction({click:"delete-email"},(function(){i.deleteRow($(this.el));r()}));this.addAction({click:"create-email"},(function(){i.createRowAfter($(this.el));r()}));this.addAction({change:"change-trigger"},(function(){r()}))}));AGN.Lib.Controller.new("company-view",(function(){this.addAction({click:"create-postal-field"},(function(){const e=this.el.attr("href");const t=AGN.Lib.Form.get(this.el);t.jqxhr().done((function(t){AGN.Lib.Page.reload(e)}))}));this.addAction({change:"change-password-expire"},(function(){this.el.find('[data-default-password-expire-option="false"]').remove()}))}));AGN.Lib.Controller.new("content-source-view",(function(){var e=AGN.Lib.Select;var i=AGN.Lib.Template;var n;var r;var o=[];var a;var s;var l=[];var u;function c(e,t){this.address=t;this.contentBlockName="";this.targetGroup=0;this.index=e}c.create=function(e,t){return new c(e,t)};this.addDomInitializer("content-source-view",(function(){r=$("#urlsContainer");n=AGN.Lib.Form.get($("#content-source-form"));u=$("#resource-type").val();o=[];d();if(this.config.urlResources){f(this.config.urlResources)}a=this.config.urls.linkForSettings;s=this.config.htmlSourcesAllowed}));function d(){var e=$("#dynamic-container");r.empty();e.empty();if(u==="HTML"&&s){var t=$(i.text("add-url-btn",{}));e.append(t)}else if(u==="XML"){var n=$(i.text("xml-source-url"));e.append(n)}}this.addAction({change:"change-resource-type"},(function(){u=this.el.val();d();o=[]}));function f(e){if(u==="XML"){if(e.length>0){$("#xml-url-address").val(e[0].url)}}else if(u==="HTML"){_.each(e,(function(e){var t=p(e);var n=$(i.text("html-source-url",{index:t.index,address:t.address}));var o=n.find("button[data-action='configure-url']");var a=n.find("input[data-source-url]");A(n,".content-block-info",e.contentBlockName,".content-name-value",e.contentBlockName);A(n,".target-group-info",e.targetGroupName,".target-group-value",e.targetGroupName);r.append(n);v(a,o)}))}}function p(e){var t=c.create(o.length);t.address=e.url;t.contentBlockName=e.contentBlockName;t.targetGroup=e.targetGroup;o.push(t);return t}this.addDomInitializer("content-sources-mailings",(function(){l=this.config;var e=$("#mailing-name");h(e);g(e)}));function h(e){l.forEach((function(t){var i=$("<option>",{value:t.name,text:t.name});e.append(i)}))}function g(t){var i=$("#content-block-name");t.on("change",(function(){i.empty();m($(this).val(),i);e.get(i).selectFirstValue()}))}function m(e,t){var i=l.find((function(t){return t.name===e}));i.blocks.forEach((function(e){var i=$("<option>",{value:e,text:e});t.append(i)}))}this.addAction({click:"add-url-resource"},(function(){var e=o.length;var t=$(i.text("html-source-url",{index:e,address:""}));var n=t.find("button[data-action='configure-url']");var a=t.find("input[data-source-url]");r.append(t);n.hide();v(a,n);o.push(c.create(e))}));function v(e,t){if(e&&t){e.on("change keyup paste",(function(){if($(this).val()){t.show()}else{t.hide()}}))}}this.addAction({click:"configure-url"},(function(){var e=this.el.closest(".form-group");var t=e.find(".form-control");var i=e.data("url-index");var n={url:t.val(),index:i};var r=o.find((function(e){return e.index===i}));y(n,r)}));this.addAction({click:"remove-url"},(function(){var e=this.el.closest(".form-group");var t=e.data("url-index");e.remove();o=o.filter((function(e){return e.index!==t}))}));function y(e,t){var i=$.get(a);i.done((function(i){var r=_.template(i)(e);n.updateHtml(r);b(t);w()}))}function b(e){var t=$('div[data-modal-index="'+e.index+'"]');if(e.contentBlockName){var i=t.find("#content-block-name");var n=i.find("option:first-child");n.val(e.contentBlockName);n.text(e.contentBlockName);i.change()}if(e.targetGroup>0){var r=t.find("#target-group-select");r.find("option[value="+e.targetGroup+"]").attr("selected","selected");r.change()}}function w(){$("[data-confirm-positive]").on("click",(function(){var e=$(this).closest(".modal");var t=e.data("modal-index");var i=o.find((function(e){return e.index===t}));var r=e.find("#target-group-select");i.targetGroup=r.val();i.contentBlockName=e.find("#content-block-name").val();C(i,r);n.handleErrors()}))}function C(e,t){var i=$("div[data-url-index='"+e.index+"']");var n=t.find("option:selected").text();A(i,".content-block-info",e.contentBlockName,".content-name-value",e.contentBlockName);A(i,".target-group-info",e.targetGroup,".target-group-value",n)}function A(e,t,i,n,r){var o=e.find(t);if(i){o.find(n).text(r);o.show()}else{o.hide()}}this.addAction({submission:"content-source-save"},(function(){n.initFields();E();if(n.valid()){_.each(o,(function(e,t){var i=e.targetGroup?e.targetGroup:0;n.setValue("urls["+t+"].url",e.address);n.setValue("urls["+t+"].contentBlockName",e.contentBlockName);n.setValue("urls["+t+"].targetGroup",i)}))}n.submit()}));function E(){if(u==="XML"){var e=c.create(0,$("#xml-url-address").val());o=[];o.push(e)}else if(u==="HTML"){x()}}function x(){_.each(r.find("[data-source-url]"),(function(e){var t=$(e);var i=t.closest(".form-group").data("url-index");var n=o.find((function(e){return e.index===i}));n.address=t.val()}))}AGN.Lib.Validator.new("mailing-content-block",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=[];var r=e.closest(".form-group").data("url-index");var a=o.find((function(e){return e.index===r}));if(!a.contentBlockName){n.push({field:e,msg:t("contentSource.error.block_not_set")})}return n}})}));AGN.Lib.Controller.new("custom-thumbnail-view",(function(){this.addAction({change:"use-custom-thumbnail"},(function(){var e=$("#customThumbnailFile");e.prop("name",this.el.is(":checked")?"customThumbnailFile":"")}));this.addAction({change:"custom-thumbnail-image"},(function(){var t=this.el;var i=t.prop("files");if(i&&i.length){var n=i[0];if(n.type=="image"||n.type.match("image/.*")){var r=new FileReader;r.onload=function(i){e(t,n.name,i.target.result)};r.readAsDataURL(n)}else{AGN.Lib.Helpers.clearFormField(t);e(t,"","")}}else{e(t,"","")}}));function e(e,t,i){var n;n=e.data("preview-name");if(n){$(n).text(t)}n=e.data("preview-image");if(n){if(i){$(n).prop("src",i)}else{$(n).each((function(){var e=$(this);e.prop("src",e.data("no-preview-src")||"")}))}}}}));AGN.Lib.Controller.new("device-statistic",(function(){var e,t,i,n;this.addDomInitializer("device-statistic-initializer",(function(){var r=this.config;var o=r.activeStatisticId;e=r.HTML_URL;t=r.htmlBlockSelector;i=r.exportBlockSelector;n=r.typeFieldName;_.each($('[data-action="switch-device-tab"]'),(function(e){if($(e).data("type")===o){$(e).trigger("click")}}))}));this.addAction({click:"switch-device-tab"},(function(){var e=$(this.el).data("type");$(t).find("iframe").attr("src",o(e));$(i).html(r(e));$('[name="'+n+'"]').val(e)}));function r(e){return AGN.Lib.Template.text("statistic-csv-view",{type:e})}function o(t){return e.replace("{stat-type}",t)}}));AGN.Lib.Controller.new("emc-template-preview-controller",(function(){this.addDomInitializer("emc-template-preview-initializer",(function(){if($('[name="view-state"]').length){e()}}));function e(){$("#preview").find(".tile-header").removeAttr("data-sizing");$("#content_wrapper").removeAttr("data-sizing");$("#previewTabsMenu").replaceWith('<h2 class="headline">'+t("defaults.previewMode")+"</h2>")}}));AGN.Lib.Controller.new("emm-activeness",(function(){function e(e,t,i){e[t]=i;r(e)}function i(e,t){delete e[t];r(e)}function n(e){for(var t in e){delete e[t]}r(e)}function r(e){var t=$('[data-action="save"]');var i=0;for(var n in e){if(e.hasOwnProperty(n)){i++;break}}if(i>0){t.removeClass("disabled")}else{t.addClass("disabled")}}this.addAction({click:"save"},(function(){var e=$(this.el);var i=AGN.Lib.Form.get(e);var r=e.closest("[data-controller]");var s=r.data("_states")||{};if(i&&i.form){for(var l in s){if(s.hasOwnProperty(l)){i.setValueOnce("activeness["+l+"]",s[l])}}i.submit()}else{var u=AGN.Lib.Table.get(e);if(u){var c=[];$.ajax(e.data("form-url"),{method:"POST",traditional:false,data:{activeness:s}}).done((function(e){if(e&&e.success===true){c=o(u,s)}else{c=a(u,s)}AGN.Lib.JsonMessages(e.popups)})).fail((function(){c=a(u,s);AGN.Lib.Messages(t("Error"),t("defaults.error"),"alert")})).always((function(){u.api.updateRowData({update:c});n(s)}))}}}));function o(e,t){s(e,t,false)}function a(e,t){s(e,t,true)}function s(e,t,i){var n=[];e.api.forEachNodeAfterFilterAndSort((function(e,r){var o=e.data.id;if(t.hasOwnProperty(o)){var a=i?!t[o]:t[o];e.data.activeStatus=a?"ACTIVE":"INACTIVE";n.push(e.data)}}));return n}this.addAction({change:"toggle-active"},(function(){var t=$(this.el);var n=t.closest("[data-controller]");var r=n.data("_states")||{};var o=t.data("item-id");var a=t.is(":checked");if(a==t.data("initial-state")){i(r,o)}else{e(r,o,a)}n.data("_states",r)}))}));AGN.Lib.Controller.new("enlarged-content-editor-controller",(function(){var e=AGN.Lib.Modal;var i=AGN.Lib.Confirm;var n;this.addDomInitializer("enlarged-content-editor-initializer",(function(t){var i=e.get(t);n=i.content;l(i.editorType);r()}));function r(){if(s()==="html"){c()}else{d()}}this.addAction({click:"updateContent"},(function(){var e=$(this.el);var t=i.get(e);t.positive(o());$("#enlarged_content_modal").modal("toggle")}));var o=function(){return{content:a(),editorType:s()}};var a=function(){var e=$("#tab-enlargedContent-wysiwyg");var t=$("#enlargedContentEditor");if(e.is(":visible")){var i=CKEDITOR.instances["enlargedContent"];return i.getData()}if(t.is(":visible")){var n=ace.edit("enlargedContentEditor");return n.getValue()}};var s=function(){var e=$("#tab-enlargedContent-wysiwyg");if(e.is(":visible")){return"wysiwyg"}var t=$("#enlargedContentEditor");if(t.is(":visible")){return"html"}return""};var l=function(e){if(!e||e===""){return}var t=$('[data-toggle-tab$="'+e+'"]');if(t){t.trigger("click")}};const u=function(e){const i=e.val().length;$('[data-enlarged-char-counter-for="'+e.attr("id")+'"]').find("span:first").text(t("fields.content.charactersEntered",i))};this.addAction({"editor:create":"count-enlarged-textarea-chars","editor:change":"count-enlarged-textarea-chars"},(function(){u(this.el)}));this.addAction({click:"hide-enlarged-char-counter"},(function(){d()}));this.addAction({click:"show-enlarged-char-counter"},(function(){c()}));function c(){$("[data-enlarged-char-counter-for]").first().show()}function d(){$("[data-enlarged-char-counter-for]").first().hide()}}));AGN.Lib.Controller.new("export-view",(function(){var e;var t;var i;var n;this.addDomInitializer("export-view",(function(){e=this.config.adminHasOwnColumnPermission;i=this.config.bounceUserStatusCode;p();if(e){r(f(this.config.customColumns))}}));this.addAction({click:"save"},(function(){h()}));this.addAction({click:"evaluate"},(function(){h()}));this.addAction({change:"add-bounce-col-to-choose"},p);this.addAction({click:"add-column-mapping",enterdown:"mapping-enterdown"},(function(){var e=AGN.Lib.Form.get($("#exportForm"));var t=u().find("[data-column-name]");this.event.preventDefault();if(e.valid({})){if(t.val()){e.cleanErrors();l();s("","");u().find("[data-column-name]").focus()}else{t.focus()}}else{e.handleErrors()}}));this.addAction({click:"delete-column-mapping"},(function(){this.el.closest("tr").remove()}));function r(e){n=$("#columnMappings tbody");t=AGN.Lib.Template.prepare("column-mapping-table-row");_.each(e,(function(e){s(e.dbColumn,e.defaultValue)}));s("","");if(!AGN.Lib.Form.get($("#exportForm")).editable){n.find(":input, button").prop("disabled",true);n.find("a").attr("disabled","disabled")}}function o(e){return e.find("[data-column-name]").val().trim()}function a(e){return e.find("[data-column-value]").val().trim()}function s(e,i){n.append(t({name:e,value:i}))}function l(){var e=n.find('[data-action="add-column-mapping"]');e.after("<a href='#' class='btn btn-regular btn-alert' data-action='delete-column-mapping'>"+"<i class='icon icon-trash-o'></i></a>");e.remove()}function u(){return n.find("[data-column-mapping-row]:last-child")}function c(){var e=[];_.each(n.find("[data-column-mapping-row]"),(function(t){var i=$(t);var n=o(i);if(n){e.push([n,a(i)])}}));return e}function d(e){_.each(c(),(function(t,i){e.setValue("customColumns["+i+"].dbColumn",t[0]);e.setValue("customColumns["+i+"].defaultValue",t[1])}))}function f(e){return e.sort((function(e,t){if(e.dbColumn<t.dbColumn){return-1}if(e.dbColumn>t.dbColumn){return 1}return 0}))}function p(){var e=$("#mailing-bounce-column-option");var t=$("#recipient-export-recipientstatus").find(":selected").val();if(t==i){e.removeAttr("disabled")}else{var n=$('[name="userColumns"]');var r=n.val();var o=r.filter((function(e){return e!="mailing_bounce"}));n.val(o);n.trigger("change");e.attr("disabled","disabled")}}function h(){var e=AGN.Lib.Form.get($("#exportForm"));if(e.valid({})){d(e);e.submit()}else{e.handleErrors()}}}));AGN.Lib.Controller.new("facebook-leadads",(function(){var e=AGN_FACEBOOK.Login,i=AGN_FACEBOOK.LeadAds,n=AGN_FACEBOOK.SDK,r=AGN.Lib.Select;var o={};this.addDomInitializer("facebook-leadads",(function(){o=this.config;AGN.Lib.Storage.delete("fblst_"+o.FACEBOOK_LEADADS_APP_ID);n.load_sdk(o.FACEBOOK_LEADADS_APP_ID,d)}));var a=function(e){$("#mailinglistId").prop("disabled",!e)};var s=function(e){$("#doiMailingId").prop("disabled",!e)};var l=function(e){$('[data-action="connect-page"]').prop("disabled",!e)};var u=function(){$('[data-action="authorized-info"]:not(.hidden)').addClass("hidden")};var c=function(){$('[data-action="authorized-info"].hidden').removeClass("hidden")};var d=function(){var n=function(e){var n=function(){AGN.Lib.Messages(t("defaults.error"),t("messages.error.reload"),"alert")};f();i.list_manageable_pages(e,o.URL.LIST_FACEBOOK_PAGE_BINDINGS_AJAX_URL,"#facebook-pages-table",n)};e.attach_login_function(".facebook-login-btn",n,"pages_read_engagement, leads_retrieval");f()};var f=function(){e.doByLoginStatus(null,(function(){$(".facebook-login-btn").show()}));e.doByLoginStatus(h,p)};var p=function(){r.get($("#mailinglistId")).selectFirstValue();a(false);s(false);l(false);u()};var h=function(e){c();a(true);i.list_manageable_pages(e,o.URL.LIST_FACEBOOK_PAGE_BINDINGS_AJAX_URL,"#facebook-pages-table");$('[data-action="connect-page"]').data("fbAccessToken",e);i.renew_page_access_tokens(e,o.URL.RENEW_FACEBOOK_PAGE_ACCESS_TOKENS_AJAX_URL,(function(e){var i=JSON.parse(e);if(i.count>0){AGN.Lib.Messages(t("defaults.success"),t("facebook.leadAds.renewedPageAccessTokens",i.count),"success")}}))};this.addAction({change:"mailinglist-change"},(function(){l(false);s(false);var e=$(this.el);var t=r.get(e).getSelectedValue();g(t);s(t!==0)}));var g=function(e){var i=r.get($('[data-action="doi-mailing-change"]'));i.resetOptions();i.setOptions([{id:0,text:"---"}]);i.selectFirstValue();if(e!==0){s(false);$.ajax({url:o.URL.LIST_ACTIONBASED_AJAX_URL,type:"GET",data:{mailinglist:e},success:function(e){if(e){var t=_.map(e.mailings,(function(e){console.log("mailing "+e.id+": "+e.shortname);return{id:e.id,text:e.shortname}}));t.unshift({id:0,text:"---"});i.setOptions(t);i.selectFirstValue()}},error:function(e,i,n){console.log("status = "+i+", error = "+n);AGN.Lib.Messages(t("defaults.error"),t("messages.error.reload"),"alert")},statusCode:{500:function(){if(!!onError){onError()}}}})}};this.addAction({change:"doi-mailing-change"},(function(){var e=$(this.el);var t=r.get(e).getSelectedValue();l(t!==0)}));this.addAction({click:"connect-page"},(function(){var e=$(this.el);var n=e.data("fbAccessToken");var a=function(){i.list_manageable_pages(n,o.URL.LIST_FACEBOOK_PAGE_BINDINGS_AJAX_URL,"#facebook-pages-table");AGN.Lib.Messages(t("defaults.success"),t("defaults.saved"),"success")};var s=r.get($('[data-action="mailinglist-change"]')).getSelectedValue();var l=r.get($('[data-action="doi-mailing-change"]')).getSelectedValue();i.connect_pages(n,o.URL.CONNECT_FACEBOOK_PAGE_BINDINGS_AJAX_URL,"#facebook-pages-table",s,l,a,null,(function(e){if(!!e){e.page_names.forEach((function(e){AGN.Lib.Messages(t("facebook.leadAds.error.already_bound_to_other_company"),e,"alert")}))}}))}))}));AGN.Lib.Controller.new("form-trackable-link",(function(){var e;AGN.Opt.DefaultExtensions={};this.addDomInitializer("trackable-link-extensions",(function(){var t=this.config;AGN.Opt.DefaultExtensions=t.defaultExtensions;e=AGN.Lib.Template.prepare("extensions-table-row");l(t.extensions)}));this.addAction({submission:"bulk-save"},(function(){var e=$("#userFormTrackableLinksForm");var t=AGN.Lib.Form.get(e);u(t,"commonExtensions");t.submit()}));this.addAction({submission:"save"},(function(){var e=$("#userFormTrackableLinkForm");var t=AGN.Lib.Form.get(e);u(t,"extensions");t.submit()}));this.addAction({click:"add-default-extensions"},(function(){_.each(AGN.Opt.DefaultExtensions,(function(e){s(e.name,e.value,true)}))}));this.addAction({click:"add-extension"},(function(){s("","")}));this.addAction({click:"delete-extension"},(function(){var e=$(this.el).data("property-id");o(e)}));this.addAction({click:"delete-all-extensions"},(function(){a()}));function t(e){return e.find("[data-extension-name]").val()}function i(e){return e.find("[data-extension-value]").val()}function n(e,n){var r=true;_.each($("[data-extension-row]"),(function(o){var a=$(o);if(r){if(t(a)==e&&i(a)==n){r=false}}}));return r}function r(t,i,r){var o=$("#extensions-table tbody");if(n(i,r)){o.append(e({index:t,name:i,value:r}))}}function o(e){$('[data-extension-row="'+e+'"]').remove()}function a(){$("[data-extension-row]").remove()}function s(e,t){var i=$("#extensions-table tbody [data-extension-row]:last-child").data("extension-row")||0;r(++i,e,t)}function l(e){$("#extensions-table tbody").html("");_.each(e,(function(e,t){r(t,e.name,e.value)}))}function u(e,n){_.each($("[data-extension-row]"),(function(r,o){var a=$(r);e.setValueOnce(n+"["+o+"].name",t(a));e.setValueOnce(n+"["+o+"].value",i(a))}))}}));AGN.Lib.Controller.new("grid-building-block-defaults",(function(){var e=AGN.Lib.Confirm,i=AGN.Lib.Form,n=AGN.Lib.Page,r=AGN.Lib.Helpers;var o;this.addDomInitializer("grid-building-block-defaults",(function(){o=this.config;$("img[id^=preview]").each((function(){var e=$(this);var t=e.attr("src");if(t){var i=p(t);if(i!==t){e.attr("src",$.trim(i))}}e.style("display","")}));a()}));function a(){o.placeholders.filter((function(e){return e.placeholderType===o.CHECK_PLACEHOLDER_TYPE})).forEach((function(e){const t=$('<div id="'+e.placeholderId+'-children" class="col-sm-offset-1 col-sm-11" data-show-by-checkbox="#content-'+e.placeholderId+'"></div>');t.insertAfter($("#content-"+e.placeholderId).closest(".form-group"));e.options.split(",").forEach((function(e){t.append($(".ph-"+e))}))}));AGN.Lib.CoreInitializer.run("checkbox-hider",$("#defaultsForm"))}function s(e){var t=e.closest("[data-placeholder-id]");if(t.exists()){return parseInt(t.data("placeholder-id"))}else{return 0}}function l(e){var t=$("#file-"+e);if(t.exists()){return!!t.val()}else{return false}}function u(e,t){var i=e.prop("files");var n=$("#content-"+t);var o=$("#image-category-"+t).closest(".form-group");if(i&&i.length){var a=i[0];if(a.type==="image"||a.type.match("image/.*")){var s=new FileReader;s.onload=function(e){o.removeClass("hidden");f(t,e.target.result,a.name,a.name)};s.readAsDataURL(a)}else{o.addClass("hidden");r.clearFormField(e);f(t)}}else{o.addClass("hidden");f(t)}n.val("")}function c(t){e.request(o.urls.MEDIAPOOL_IMAGE_PICK).done((function(e){$("#content-"+t).val(e.id);r.clearFormField($("#file-"+t));f(t,e.src,e.name,e.title)}))}function d(e){var t=$("#file-"+e);var i=$("#file-name-"+e);var n=$("#content-"+e);var a=$("#preview-"+e);r.clearFormField(t);i.text("");n.val("");a.attr("src",o.noPreviewImageLink)}function f(e,t,i,n){var r=$("#preview-"+e);var a=$("#file-name-"+e);if(r.attr("src")!==t){r.attr("src",t||o.noPreviewImageLink)}r.attr("title",n||"");a.text(i||"")}function p(e){return r.replaceAgnTags(e,(function(e,t){if(e.name==="agnIMAGE"&&e.attributes["name"]){if(!e.attributes["source"]||e.attributes["source"]==="mediapool"||e.attributes["source"]==="mediapoolbg"){return o.imageByFilenameSrcPattern.replace(":filename:",encodeURIComponent(e.attributes["name"]))}}return t}))}var h=_.throttle((function(e,t){var i=$("#preview-"+e);if(i.attr("src")!==t){if(t){i.attr("src",$.trim(p(t)))}else{i.attr("src",t||o.noPreviewImageLink)}}}),300);function g(){var e=$.Deferred();var n=[];var a=$("#defaultsForm");var l=i.get(a);var u=true;a.find("input[type=file]").each((function(){var e=$(this);var i=s(e);var r=$("#image-category-"+i);var o=e.prop("files");if(o&&o.length){var a=r.val();if(a>0){n.push({placeholderId:i,image:o[0],categoryId:a});l.cleanFieldError$(r)}else{u=false;l.showFieldError$(r,t("error.grid.noCategorySelected"))}}else{l.cleanFieldError$(r)}}));if(u){if(n.length){var c=new FormData;n.forEach((function(e,t){c.append("images["+t+"].file",e.image);c.append("images["+t+"].fileName",e.image.name);c.append("images["+t+"].title",e.image.name);c.append("images["+t+"].categoryId",e.categoryId)}));$.ajax(o.urls.MEDIAPOOL_IMAGE,{type:"POST",dataType:"json",accepts:["application/json"],enctype:"multipart/form-data",processData:false,contentType:false,data:c}).done((function(t){if(t.success===true){t.data.forEach((function(e,t){var i=n[t].placeholderId;$("#content-"+i).val(e);r.clearFormField($("#file-"+i))}));e.resolve()}else{AGN.Lib.JsonMessages(t.popups);e.reject()}})).fail((function(){e.reject()}))}else{e.resolve()}}else{e.reject()}return e.promise()}this.addAction({click:"delete"},(function(){var t=$.post(o.urls.CONFIRM_DELETE);return e.request(t).done((function(e){if(e.success===true){n.reload(o.urls.BACK,true).done((function(){AGN.Lib.JsonMessages(e.popups)}))}else{AGN.Lib.JsonMessages(e.popups)}}))}));this.addAction({click:"chooseImage"},(function(){var e=s(this.el);if(e>0){if(l(e)){$("#file-"+e).trigger("click")}else{c(e)}}}));this.addAction({click:"showMediapoolDialog"},(function(){var e=s(this.el);if(e>0){c(e)}}));this.addAction({change:"chooseImageFile"},(function(){var e=s(this.el);if(e>0){u(this.el,e)}}));this.addAction({click:"deleteImage"},(function(){var e=s(this.el);if(e>0){d(e)}}));this.addAction({change:"previewImageLink",keyup:"previewImageLink",mouseup:"previewImageLink"},(function(){var e=s(this.el);if(e>0){h(e,$.trim(this.el.val()))}}));this.addAction({click:"chooseImageLink"},(function(){var e=s(this.el);if(e>0){$("#content-"+e).trigger("focus")}}));this.addAction({click:"save"},(function(){g().done((function(){$("#defaultsForm").submit()}))}))}));AGN.Lib.Controller.new("grid-building-block",(function(){var e=AGN.Lib.Confirm,t=AGN.Lib.Page;var i;this.addDomInitializer("grid-building-block",(function(){i=this.config}));this.addAction({click:"delete"},(function(){var n=$.post(i.urls.CONFIRM_DELETE);return e.request(n).done((function(e){if(e.success===true){t.reload(i.urls.BACK,true).done((function(){AGN.Lib.JsonMessages(e.popups)}))}else{AGN.Lib.JsonMessages(e.popups)}}))}))}));AGN.Lib.Controller.new("grid-building-blocks-new",(function(){var e=AGN.Lib.Confirm,i=AGN.Lib.Form;var n;var r={setSaveButtonEnabled:function(e){var t=$("#save-button");if(e){t.removeClass("disabled")}else{t.addClass("disabled")}},getActivenessToggles:function(){return $("#containers").find("input.js-activeness-toggle")},getActivenessTogglesMap:function(){var e={};r.getActivenessToggles().each((function(){var t=$(this);e[t.data("container-id")]=t}));return e},getActivenessTogglesStateMap:function(){var e={};r.getActivenessToggles().each((function(){var t=$(this);e[t.data("container-id")]=t.prop("checked")}));return e},getBulkIds:function(){var e=[];$("#containers").find(".js-bulk-ids:checked").each((function(){var t=parseInt($(this).val());if(t>0){e.push(t)}}));return e.length?e:null},resetBulkIds:function(){$("#containers").find(".js-bulk-ids").prop("checked",false)}};function o(){this.map={}}o.prototype.include=function(e,t){this.map[e]=t};o.prototype.exclude=function(e){delete this.map[e]};o.prototype.excludeAll=function(e){for(var t=0;t<e.length;t++){delete this.map[e[t]]}};o.prototype.clear=function(){this.map={}};o.prototype.size=function(){return Object.keys(this.map).length};o.prototype.get=function(){return _.clone(this.map)};function a(e,t){var i={};if(arguments.length<2){t=true}else{t=!!t}for(var o=0;o<e.length;o++){i[e[o]]=t}return s(i).done((function(i){if(i.success===true){var o=r.getActivenessTogglesMap();for(var a=0;a<e.length;a++){var s=e[a];o[s].prop("checked",t);n.activenessInitialStateMap[s]=t}n.activenessChangeMap.excludeAll(e);r.resetBulkIds();r.setSaveButtonEnabled(n.activenessChangeMap.size()>0)}}))}function s(e){return $.post(n.urls.SET_ACTIVENESS,{activeness:e}).done((function(e){AGN.Lib.JsonMessages(e.popups)}))}function l(t){var i=$.post(n.urls.CONFIRM_DELETE.replace(":containerId:",t));return e.request(i).done((function(e){AGN.Lib.JsonMessages(e.popups)}))}function u(t){var i=$.ajax(n.urls.CONFIRM_BULK_DELETE,{method:"POST",traditional:true,data:{bulkIds:t}});return e.request(i).done((function(e){AGN.Lib.JsonMessages(e.popups)}))}this.addDomInitializer("grid-building-blocks-new",(function(){n=this.config;if(location.hash){var e=parseInt(location.hash.substr(1));if(e>0){var t=$("#containers");var i=t.find('[data-container-id="'+e+'"]').closest("tr");if(i.exists()){var a=i.position().top;t.scrollTop(a-10)}}}n.activenessChangeMap=new o;n.activenessInitialStateMap=r.getActivenessTogglesStateMap()}));this.addAction({click:"save"},(function(){var e=i.get(this.el);s(n.activenessChangeMap.get()).done((function(t){if(t.success===true){n.activenessChangeMap.clear();n.activenessInitialStateMap=r.getActivenessTogglesStateMap();r.setSaveButtonEnabled(false);e.submit()}}))}));this.addAction({change:"toggle-activated"},(function(){var e=$(this.el);var t=e.data("container-id");var i=e.is(":checked");if(n.activenessInitialStateMap[t]==i){n.activenessChangeMap.exclude(t)}else{n.activenessChangeMap.include(t,i)}r.setSaveButtonEnabled(n.activenessChangeMap.size()>0)}));this.addAction({click:"delete-building-block"},(function(){var e=this.el.data("container-id");var t=i.get(this.el);if(e>0){l(e).done((function(e){if(e.success===true){t.submit()}}))}}));this.addAction({click:"bulk-delete"},(function(){var e=r.getBulkIds();var n=i.get(this.el);if(e){u(e).done((function(e){if(e.success===true){n.submit()}}))}else{AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")}}));this.addAction({click:"bulk-export"},(function(){const e=r.getBulkIds();const o=i.get(this.el);if(e){o.setActionOnce(n.urls.BULK_EXPORT);o.setValueOnce("bulkIds",e);o.submit("static")}else{AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")}}));this.addAction({click:"bulk-activate"},(function(){var e=r.getBulkIds();var n=i.get(this.el);if(e){a(e,true).done((function(e){if(e.success===true){n.submit()}}))}else{AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")}}));this.addAction({click:"bulk-deactivate"},(function(){var e=r.getBulkIds();var n=i.get(this.el);if(e){a(e,false).done((function(e){if(e.success===true){n.submit()}}))}else{AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")}}));this.addAction({click:"back"},(function(){history.back()}))}));AGN.Lib.Controller.new("grid-edit",(function(){const e=this,t=AGN.Lib.Form;this.addDomInitializer("grid-edit",(function(){e.isGridInUse=this.config.isGridInUse;e.maxColumnsCount=this.config.maxColumnsCount;e.gridView=new AGN.Lib.GridView($("[data-grid-view]"));e.gridColumnView=new AGN.Lib.GridColumnView($("[data-column-view]"));e.updateViews()}));this.addAction({submission:"createTemplate"},(function(){$("#templateCreationForm").submit()}));this.addAction({submission:"saveGrid"},(function(){const e=$("#gridForm");t.get(e).submit()}));this.addAction({change:"updateColnum"},(function(){e.validateRequiredNumber(this.el,1,e.maxColumnsCount);$('[name="columnWidth"]').val(e.calculateColumnWidth());e.updateViews()}));this.addAction({change:"updateTemplateWidth"},(function(){e.validateRequiredNumber(this.el,50,2e3);$('[name="columnWidth"]').val(e.calculateColumnWidth());e.updateViews()}));this.addAction({change:"updateColumnWidth"},(function(){e.validateRequiredNumber(this.el,10,2e3);$('[name="templateWidth"]').val(e.calculateTemplateWidth());e.updateViews()}));this.addAction({change:"updateGutterWidth"},(function(){e.validateRequiredNumber(this.el,0,500);$('[name="columnWidth"]').val(e.calculateColumnWidth());e.updateViews()}));this.addAction({click:"enableEditing"},(function(){$(this.el).hide();$('[name="gridName"]').prop("disabled",false);if(!e.isGridInUse){$.each(["columnNum","columnWidth","gutter","templateWidth"],(function(e,t){const i=$('[name="'+t+'"]');i.prop("disabled",false);i.attr("type","number")}))}$("#createTemplateButton").addClass("hidden");$("#saveAndCreateTemplateButton").removeClass("hidden");$("#gridForm").attr("data-action","saveGrid")}));this.addAction({click:"back"},(function(){window.history.back()}));this.validateRequiredNumber=function(e,t,i){const n=parseInt(e.val());if(n!=e.val()||n<t){e.val(t)}if(n>i){e.val(i)}};this.updateViews=function(){const t={columnNum:this.columnNum(),columnWidth:this.columnWidth(),gutter:this.gutterWidth(),templateWidth:this.templateWidth()};e.gridView.update(t);e.gridColumnView.update(t)};this.calculateColumnWidth=function(){return Math.floor(this.templateWidth()/this.columnNum()-this.gutterWidth())};this.calculateTemplateWidth=function(){return Math.ceil((this.columnWidth()+this.gutterWidth())*this.columnNum())};this.columnNum=function(){return parseInt($('[name="columnNum"]').val())};this.columnWidth=function(){return parseInt($('[name="columnWidth"]').val())};this.gutterWidth=function(){return parseInt($('[name="gutter"]').val())};this.templateWidth=function(){return parseInt($('[name="templateWidth"]').val())}}));AGN.Lib.Controller.new("grid-layout-view",(function(){var e=AGN.Lib.Template,i=AGN.Lib.Tooltip,n=AGN.Lib.Popover,r=AGN.Lib.Modal,o=AGN.Lib.Confirm,a=AGN.Lib.Form,s=AGN.Lib.Action,l=AGN.Lib.Load,u=AGN.Lib.Helpers,c=AGN.Lib.Select,d=AGN.Lib.AutoSave;var f;var p=-1;var h=0;var g=500;var m=80;var v=30;var y=10;var b=2;var w=0;var C=1;var A=2;var E=3;var x='<div class="popover popover-wide" role="tooltip" style="margin-top: -5px;"><div class="popover-content"></div><div class="bottom-space"></div></div>';var T="Text";var S="Placeholder";var D="TocArea";var k="TocPlaceholder";var O="Label";var R="Text";var N="Link";var P="Image";var I="ImageLink";var M="Select";var L="Color";var F="Check";var G="Multi";var W="Id";var H="Name";var j="toc_";var B="";var V="e";var z="w";var U="n";var Y="s";var q=false;var X=0;var K=2;var Q=3;var Z={setShown:function(e,t){if(t){e.removeClass("hidden")}else{e.addClass("hidden")}},setTooltip:function(e,t){e.data("tooltip",t);i.createTip(e,t)},removeTooltip:function(e){i.remove(e)},checkHoverState:function(e){if(e.is(":hover")){e.trigger("mouseleave").trigger("mouseenter")}},setLoading:function(e){$("#editor-progress").toggle(!!e);$("#disabled-save-button").toggle(!!e);$("#save-button").toggle(!e);$("#navbar-disabled-save-button").toggle(!!e);$("#navbar-save-button").toggle(!e)},setEditable:function(e){$("#save-button").toggle(!!e);$("#navbar-save-button").toggle(!!e);$("#building-blocks-search").toggleClass("disabled",!e);$("#update-text-version").toggle(!!e);$("#grid-tile-content").toggleClass("translucent",!e);if(e){$("#visibleTargets").select2("enabled")}else{$("#visibleTargets").select2("disable")}},setTargetId:function(e){$("#visibleTargets").select2("val",e)},getAvailableTargetIds:function(){return $("#visibleTargets").children("option").get().map((function(e){return parseInt($(e).val())}))},setAvailableTargetIds:function(e){var i=this.getAvailableTargetIds();var n=$("#visibleTargets");n.empty();e.push({id:p,name:t("filter.reset")});_.sortBy(e,(function(e){if(e.id>h){return i.indexOf(parseInt(e.id))}else if(e.id==h){return 1e6}else{return 1000001}})).forEach((function(e){$("<option></option>").val(e.id).text(e.name).appendTo(n)}))},imagesAdjusted:function(e,t){var i=$.Deferred();var n=undefined,r=undefined;if(t===true){n=e.outerWidth();r=e.outerHeight()}var o=function(){var t=e.outerWidth(),o=e.outerHeight();if(n!==t||r!==o){n=t;r=o;i.notify()}};e.imagesLoaded().progress(o).always(o);return i.promise()},getHeightAccurate:function(e){return e[0].getBoundingClientRect().height},getResizeHandleDirection:function(e){if(e.hasClass("ui-resizable-ne")){return new ce("ne")}if(e.hasClass("ui-resizable-se")){return new ce("se")}if(e.hasClass("ui-resizable-nw")){return new ce("nw")}if(e.hasClass("ui-resizable-sw")){return new ce("sw")}if(e.hasClass("ui-resizable-e")){return new ce("e")}if(e.hasClass("ui-resizable-w")){return new ce("w")}if(e.hasClass("ui-resizable-n")){return new ce("n")}if(e.hasClass("ui-resizable-s")){return new ce("s")}console.error("Invalid resizing direction handle");return new ce("")}};window.onbeforeunload=function(e){if($('[data-controller="grid-layout-view"]').exists()){var i=t("grid.layout.leaveQuestion");e=e||window.event;if(f&&f.isChanged()){if(e){e.returnValue=i}return i}}AGN.Lib.Loader.show()};this.addDomInitializer("grid-layout-view",(function(e){if(!f){f=new ee}var t=e.json();q=t.IS_BASIC_LB;var i=function(e){var i=$.extend(t,{children:e.children});f.setup(i);f.setChanged(true)};var n=d.initialize("template-components/"+t.templateId,_.bind(f.getDataForAutoSave,f),_.bind(f.checkIfDataRestoreNeeded,f),i,0);n.fail((function(){f.setup(t)}));f.controlRssBtn()}));this.addDomInitializer("available-building-blocks-menu",(function(e){var t=$("#div-containers-cache");var i={};t.children("[data-container-id]").each((function(){var e=$(this);var t=new ue(e.json());i[t.getContainerId()]=t}));e.find("[data-building-block]").each((function(){var e=$(this);var t=e.data("container-id");var n=i[t];if(n){re.set(e,n);if(f.isEditable()){e.draggable(ue.draggableOptions())}}}));t.remove()}));this.addDomInitializer("mailing-building-blocks-menu",(function(e){const t=$("#mailing-div-containers-cache");const i={};t.children("[data-child-id]").each((function(){const e=$(this);const t=new re(e.json());i[t.getId()]=t}));e.find("[data-building-block]").each((function(){const e=$(this);const t=e.data("child-id");const n=i[t];if(n){re.set(e,n);if(f.isEditable()){e.draggable(ue.draggableOptions())}}}));t.remove()}));this.addAction({click:"clear-recycle-bin"},(function(){if(!f.isEditable()){return}const e=f.getRecycledChildren();if(e.length){$.ajax(this.el.attr("href"),{method:"POST",traditional:true,data:{children:e}}).done((function(e){if(e.success){f.clearRecycleBin()}}))}else{f.clearRecycleBin()}}));this.addAction({change:"visibleTargets"},(function(){if(f.isEditable()){f.setTargetId(parseInt(this.el.val()))}}));this.addAction({"select2-open":"visibleTargets"},(function(){if(f.isEditable()){var e=this.el;var t=e.select2("dropdown").find(".select2-results");t.css("overflow","hidden");t.children(".select2-result").each((function(){var e=$(this);if(e.data("select2-data").id>0){e.addClass("sortable")}}));t.sortable({items:".select2-result.sortable",containment:"parent",tolerance:"pointer",distance:5,opacity:.4,cursor:"move",start:function(e,t){t.item.removeClass("select2-result-selectable")},stop:function(e,t){t.item.addClass("select2-result-selectable")},update:function(e,t){var i=t.item.data("select2-data");var n=t.item.prev();var r=t.item.next();if(n.length){var o=n.data("select2-data");$(o.element[0]).after($(i.element[0]))}else if(r.length){var a=r.data("select2-data");$(a.element[0]).before($(i.element[0]))}f.setLayeringByTargets(Z.getAvailableTargetIds())}})}}));this.addAction({"select2-close":"visibleTargets"},(function(){if(f.isEditable()){this.el.select2("dropdown").find(".select2-results").sortable("destroy")}}));this.addAction({change:"setTemplateReleased"},(function(){if(f.isEditable()){$("#is-released").val(this.el.is(":checked")?"true":"false");f.setChanged(true)}}));this.addAction({click:"toggleGutter"},(function(){if(f.isEditable()){var e=ye.get(this.el);e.setGuttered(!e.isGuttered());f.setChanged(true);f.adjust()}}));this.addAction({click:"insertRow"},(function(){if(f.isEditable()){f.addRowBefore(ye.get(this.el))}}));this.addAction({click:"addRow"},(function(){if(f.isEditable()){f.addRow()}}));this.addAction({click:"deleteRow"},(function(){if(f.isEditable()){f.removeRow(ye.get(this.el))}}));this.addAction({click:"edit"},(function(){if(f.isEditable()){const e=re.get(this.el);if(e){f.editChild(e)}}}));this.addAction({click:"clone"},(function(){if(f.isEditable()){var e=re.get(this.el);if(e){f.cloneChild(e)}}}));this.addAction({click:"remove"},(function(){if(f.isEditable()){var e=re.get(this.el);if(e){f.removeChild(e)}}}));this.addAction({change:"previewImageSrc",keyup:"previewImageSrc",mouseup:"previewImageSrc"},(function(){if(f.isEditable()){_e.get(this.el).updateImageSrc(this.el)}}));this.addAction({change:"chooseImageFile"},(function(){if(f.isEditable()){_e.get(this.el).updateImage(this.el,false)}}));this.addAction({change:"changeImageCategory"},(function(){if(f.isEditable()){const e=this.el.data("placeholder-id");_e.get(this.el).syncImageCategories(e,this.el.val())}}));this.addAction({change:"chooseMobileImageFile"},(function(){if(f.isEditable()){_e.get(this.el).updateImage(this.el,true)}}));this.addAction({click:"chooseImage"},(function(){if(f.isEditable()){var e=this.el.data("placeholder-id");_e.get(this.el).chooseImage(e)}}));this.addAction({click:"deleteImage"},(function(){if(f.isEditable()){const e=this.el.data("placeholder-id");_e.get(this.el).deleteImage(e,false)}}));this.addAction({click:"deleteMobileImage"},(function(){if(f.isEditable()){const e=this.el.data("placeholder-id");_e.get(this.el).deleteImage(e,true)}}));this.addAction({click:"showMediapoolDialog"},(function(){if(f.isEditable()){var e=this.el.data("placeholder-id");_e.get(this.el).showMediapoolDialog(e)}}));this.addAction({submission:"saveChildContents"},(function(){if(f.isEditable()){_e.get(this.el).save(a.get(this.el))}}));$(document).on("ckeditor-save",(function(){const e=a.get($("#child-save-button"));e.submit("event")}));this.addAction({change:"changeContentPool"},(function(){const e=$("#content-pool-stub");const t=$("#availableMailingsBuildingBlocksArea");const i=parseInt(this.el.val());if(i>0){const e="/mailing/{mailingId}/buildingBlocks.action".replace("{mailingId}",i);t.removeData();t.attr("data-load",AGN.url(e));l.load(t,true)}else{t.empty()}Z.setShown(e,i===0)}));this.addAction({submission:"save-content"},(function(){if(f.isEditable()){var e=false;if(f.isTextVersionGenerationAllowed()){var t=$("#update-text-version input:checked");e=t.length>0}f.saveMadeChoice(e);f.save(e)}}));this.addAction({click:"import-from-content-source"},(function(){(new J).import()}));function J(){J.prototype.import=function(){const e=this;this.getRssChildrenToReplaceWithNewContent().forEach((function(t){e._importContent(t)}))};J.prototype.getRssChildrenToReplaceWithNewContent=function(){return _.union(this._getRssImportedStartChildren(),this.getRssTemplateChildren())};J.prototype._importContent=function(e){if(e.containsMultiPh()){this._fillChildWithRssContent(e)}else{this._replicateRssChild(e)}};J.prototype._fillChildWithRssContent=function(e){$.get(AGN.url("/layoutbuilder/container/"+e.getContainerId()+"/rss.action")).done((function(t){e.data.content[e.getMultiPh().id]=t;const i=e.data;f.saveChild(e,i.name,i.targetId,i.isTocItem,i.interestGroup,i.content)}))};J.prototype._replicateRssChild=function(e){const t=this;$.get(AGN.url("/layoutbuilder/container/"+e.getContainerId()+"/replicateRss.action")).done((function(i){t.insertRssChildren(t.getRssChildrenFromSamples(i),e)}))};J.prototype.insertRssChildren=function(e,t){if(!e.length){return}var i=t.getColumn();var n=t.getRow();f.replaceChildren(t,e[0]);e.slice(1).forEach((function(e){e.setColumn(i);e.setRow(n);const t=f.cloneChild(e);i=t.getColumn();n=t.getRow()}))};J.prototype.getRssChildrenFromSamples=function(e){return e.map((function(e){return new ue(e).instantiate()}))};J.prototype.getImportedRssChildren=function(){return _.groupBy(f.children.active().children.filter((function(e){return e.isRssImportedChild()})),(function(e){return e.data.type||e.data.container.type}))};J.prototype.getRssTemplateChildren=function(){return f.children.active().children.filter((function(e){return e.isRssTemplateChild()}))};J.prototype._removeRssChildrenAndGetPlaceholder=function(e){e.slice(1).forEach((function(e){const t=e.getRow();f.removeChild(e);if(ye.isEmpty(t)){f.removeRow(f.grid.getRow(t))}}));return e[0]};J.prototype._getRssImportedStartChildren=function(){const e=this;return _.map(this.getImportedRssChildren(),(function(t){return e._removeRssChildrenAndGetPlaceholder(t)}))}}s.new({"form:loadershow":"form"},(function(){Z.setLoading(true)}));s.new({"form:loaderhide":"form"},(function(){Z.setLoading(false)}));function ee(){var e=this;this.templateId=0;this.targetId=p;this.targets=new te;this.categories=new ie;this.children=new ne([]);this.imageUriPattern="{image-id}";this.imageByFilenameUriPattern=":filename:";this.watcher=new ge;this.removedChildren=[];this.adjust=_.throttle(this.adjust,200);this.watcher.promise().progress((function(){e.adjust(false)}))}ee.prototype.setup=function(e){e=$.extend({templateId:0,targetId:p,grid:{},children:[],imageUriPattern:"{image-id}",imageByFilenameUriPattern:":filename:",noPreviewImageLink:"#",mobileImagePrefix:"mobile_",isTextVersionGenerationAllowed:false,isEmptyTextVersion:false,targets:[],interestGroups:[],categories:[],translations:{},urls:{},actions:{}},e);$.i18n.load(e.translations);this.changesNotSaved=false;this.templateId=e.templateId;this.targetId=e.targetId;this.imageUriPattern=e.imageUriPattern;this.imageByFilenameUriPattern=e.imageByFilenameUriPattern;this.noPreviewImageLink=e.noPreviewImageLink;this.textVersionGenerationAllowed=e.isTextVersionGenerationAllowed;this.emptyTextVersion=e.isEmptyTextVersion;this.noImageLink=e.noImageLink;this.targets=new te(e.targets);this.interestGroups=e.interestGroups;this.categories=new ie(e.categories);this.children=new ne(e.children);this.urls=e.urls;this.actions=e.actions;this.mailingId=e.mailingId;this.mobileSuffix="-mobile";this.mobileImagePrefix=e.mobileImagePrefix;var t=this.children.active();this.grid=new ve(e.grid,Math.max(1,t.calculateRowsCount()));t.rebuildStatic({imageUriPattern:this.imageUriPattern,imageByFilenameUriPattern:this.imageByFilenameUriPattern,noImageLink:this.noImageLink});t.adjustLayering();this.updateAvailableTargets();if(this.mailingId>0){this.editable=AGN.Opt.Components.MailingContentLock.manageLock(this.mailingId,e.isMailingExclusiveLockingAcquired,e.anotherLockingUserName)}else{this.editable=true}Z.setTargetId(this.targetId);this.setTargetId(this.targetId);if(this.editable){this.setupInteractions();this.updateRecycleBin();this.restoreUpdateTextVersionCheckbox(e.mailingId);Z.setLoading(false)}else{t.each((function(e){e.setDraggable(false);e.setControlsEnabled(false);e.setResizable(false)}));Z.setLoading(false);Z.setEditable(false)}var i=$("#availableBuildingBlocksArea");var n="/layoutbuilder/template/{templateId}/activeBuildingBlocks.action".replace("{templateId}",this.templateId);i.attr("data-load",AGN.url(n));l.load(i,true)};ee.prototype.restoreUpdateTextVersionCheckbox=function(){$("#update-text-version").attr("checked",this.getMadeChoice())};ee.prototype.setupInteractions=function(){var e=this;this.children.recycled().each((function(e){e.setRows(1);e.setColumns(1)}));function t(t,i){e.children.active().matching(e.targetId).each((function(e){if(e!==t){e.setControlsEnabled(i);if(!e.isContainerDeleted()){e.setResizable(i)}if(e.data.container.modeEdit===K||e.data.container.modeEdit===Q){e.setResizable(false)}}}))}this.grid.setOnResizingStarted((function(e){t(e,false)}));this.grid.setOnResizingStopped((function(i){t(i,true);e.children.active().stick(i.getArea())}));var i=null;this.grid.setOnAreaHovered((function(t){var n=e.children.active().matching(e.targetId);if(t){n=n.select((function(e){return e.isInArea(t)}));if(i){i.each((function(e){if(!n.contains(e)){e.setHighlighted(false)}}))}n.setHighlighted(true);i=n}else{n.setHighlighted(false);i=null}}));this.grid.setOnDrop((function(t,i,n){var r=e.children.active();var o=false;if(!r.contains(t)){o=true;if(t instanceof ue){t=t.instantiate();e.children.add(t)}else if(t.isRecycled()){t.setRecycled(false);e.updateRecycleBin()}else{t=t.clone();e.children.add(t)}if(e.targetId!==p){t.setTargetId(e.targetId)}r=e.children.active();if(!t.isToc()){t.rebuild({imageUriPattern:e.imageUriPattern,imageByFilenameUriPattern:e.imageByFilenameUriPattern,noImageLink:e.noImageLink})}}t.setArea(n);r.active().stick(n);r.matching(e.targetId).rebuildToc({imageUriPattern:this.imageUriPattern,imageByFilenameUriPattern:this.imageByFilenameUriPattern,noImageLink:this.noImageLink});t.adjustSize(e.grid);t.adjustCoordinates(e.grid);if(o){var a=t.data.container.modeEdit;t.setShown(true);if(a===K||a===Q){t.setDraggable(false);t.setResizable(false)}e.adjust();e.watcher.bind(r.matching(e.targetId).pulse())}else{e.adjust()}e.updateAvailableTargets();e.setChanged(true)}));$("#children").on("dblclick","[data-building-block]",(function(e){var t=$(e.target);if(t.is("button")||t.is(".ui-resizable-handle")||t.closest("button").exists()){return}var i=$(this);var n=re.get(i);var r=n.data.container.modeEdit;if(n){if(r===X||r===K){f.editChild(n)}}}))};ee.prototype.updateAvailableTargets=function(){var e=this.children.active();var t=this.targets;var i=e.collectTargetIds();var n=[];e.groups().forEach((function(e){var t={};e.sort((function(e,t){return e.getZ()-t.getZ()})).forEach((function(e,i){t[e.getTargetId()]=i}));n.push(t)}));i.sort((function(e,t){var i=0;n.forEach((function(n){if(e in n&&t in n){var r=n[e]-n[t];if(r<0){i++}else if(r>0){i--}}}));return i}));Z.setAvailableTargetIds(i.map((function(e){return{id:e,name:t.name(e)}})));if(i.indexOf(this.targetId)<0){this.targetId=p}Z.setTargetId(this.targetId)};ee.prototype.getTemplateId=function(){return this.templateId};ee.prototype.isTextVersionGenerationAllowed=function(){return this.textVersionGenerationAllowed};ee.prototype.saveMadeChoice=function(e){AGN.Lib.WebStorage.set("updateTextVersion_"+this.mailingId,e)};ee.prototype.getMadeChoice=function(){return AGN.Lib.WebStorage.get("updateTextVersion_"+this.mailingId)};ee.prototype.isEmptyTextVersion=function(){return this.emptyTextVersion};ee.prototype.isChanged=function(){return this.changesNotSaved};ee.prototype.isEditable=function(){return this.editable};ee.prototype.setChanged=function(e){if(!!e){this.controlRssBtn()}this.changesNotSaved=!!e};ee.prototype.getGrid=function(){return this.grid};ee.prototype.getTargetName=function(e){return this.targets.name(e)};ee.prototype.setTargetId=function(e){var t=this.children.active();this.targetId=e;t.unmatching(this.targetId).setShown(false);t=t.matching(this.targetId);t.rebuildToc({imageUriPattern:this.imageUriPattern,imageByFilenameUriPattern:this.imageByFilenameUriPattern,noImageLink:this.noImageLink});t.setShown(true);this.adjust();this.watcher.bind(t.pulse())};ee.prototype.setLayeringByTargets=function(e){var t=false;this.children.active().groups().forEach((function(i){if(i.length>1){ne.make(i).setLayeringByTargets(e);t=true}}));if(t){this.updateToc(true)}this.setChanged(true);this.adjust(false)};ee.prototype.setChildrenControlsEnabled=function(e){this.children.active().matching(this.targetId).setControlsEnabled(e)};ee.prototype.updateToc=function(e){var t=this.children.active().matching(this.targetId);if(t.rebuildToc({imageUriPattern:this.imageUriPattern,imageByFilenameUriPattern:this.imageByFilenameUriPattern,noImageLink:this.noImageLink})&&e){this.adjustSizes(t);this.adjustCoordinates(t)}};ee.prototype.adjustSizes=function(e){if(e===undefined){e=this.children.active().matching(this.targetId)}e.adjustSizes(this.grid);this.grid.adjustRows(e)};ee.prototype.adjustCoordinates=function(e){if(e===undefined){e=this.children.active().matching(this.targetId)}this.grid.adjustSidebars();e.adjustCoordinates(this.grid)};ee.prototype.adjustLayering=function(e){var t=this;if(e===undefined){e=this.children.active().matching(this.targetId)}var i=e.groupsMap();this.grid.each((function(e,n){e.each((function(e,r){var o=n+1+":"+(r+1);var a=ne.make(i[o]);if(a.size()>1){var s=1;a.setBorderHighlighted(true);a.each(((e,t)=>{e.setShown(t===0)}));e.setLayeringIndex(s);e.setOnLayeringRotate((function(){t.setChanged(true);s=s%a.size()+1;a.rotateLayering();this.setLayeringIndex(s);t.updateToc(true);t.adjust(false)}))}else{a.setBorderHighlighted(false);a.each((function(e){e.setShown(true)}));e.setLayeringIndex(null);e.setOnLayeringRotate(null);t.adjust(false)}}))}))};ee.prototype.adjust=function(e){var t=this.children.active().matching(this.targetId);if(e!==false){this.adjustLayering(t)}this.adjustSizes(t);this.adjustCoordinates(t)};ee.prototype.addRowBefore=function(e,t){var i=this.grid.addRowBefore(e);var n=this.children.active();var r=false;n.each((function(e){var t=e.getRows();var n=e.getRow();var o=n+t-1;if(i<=n){e.setRow(n+1)}else if(i>n&&i<=o){r=true;e.setRows(t+1)}}));if(t!==false){if(r){this.adjust()}else{this.adjustCoordinates(n.matching(this.targetId))}}this.setChanged(true)};ee.prototype.addRowAfter=function(e){if(!this.isEditable()){return}if(this.grid.rows.indexOf(e)==this.grid.getRows()-1){this.addRow()}else{const t=this.grid.rows.indexOf(e);this.addRowBefore(this.grid.rows[t+1])}};ee.prototype.addRow=function(e){this.grid.addRow();if(e!==false){this.grid.adjustSidebars()}this.setChanged(true)};ee.prototype.removeRow=function(e){var t=this.grid.removeRow(e);var i=this.children.active();var n=false;var r=false;i.each((function(e){var i=e.getRows();var o=e.getRow();var a=o+i-1;if(t>=o&&t<=a){if(i>1){e.setRows(i-1);r=true}else{e.setRecycled(true);n=true}}else if(t<o){e.setRow(o-1)}}));if(n){i=this.children.active().matching(this.targetId);i.rebuildToc({imageUriPattern:this.imageUriPattern,imageByFilenameUriPattern:this.imageByFilenameUriPattern,noImageLink:this.noImageLink});this.adjust();this.watcher.bind(i.pulse());this.updateAvailableTargets();this.updateRecycleBin()}else if(r){this.adjust()}else{this.adjustCoordinates()}this.setChanged(true)};ee.prototype.removeChild=function(e){if(this.children.contains(e)){e.setRecycled(true);this.updateToc(false);this.adjust();this.updateAvailableTargets();this.updateRecycleBin();this.setChanged(true)}};ee.prototype.cloneChild=function(e){var t=this;var i=this.grid.getColumns();var n=this.children.active();function r(e,t,n){var r=[];var o={};e.each((function(e){var i=e.getColumn();if(t===e.getRow()&&i>=n){r.push(e);var a=e.getColumns();o[i]=Math.min(o[i]||i,i);for(var s=1;s<a;s++){o[i+s]=i}}}));var a=_.groupBy(r,(function(e){var t=e.getColumn();while(o[t]&&o[t]!==t){t=o[t]}return t}));var s=[];for(var l=n;l<=i;l++){if(o[l]){var u=a[l];if(u){s.push(u)}}else{s.push([])}}return s}function o(e){var t=0;e.forEach((function(e){if(e.length===0){t++}}));return t}function a(e,t){function n(e,t){var n=null,r=null;e.forEach((function(e){var t=e.getColumn();var i=t+e.getColumns()-1;n=Math.min(n||t,t);r=Math.max(r||i,i)}));var o=0;if(r+t>i){o=i+1-n-t;t=t+o}e.forEach((function(e){var n=e.getColumn()+t;if(n>i){e.setRow(e.getRow()+1);e.setColumn(n-i)}else{e.setColumn(n)}}));return o}for(var r=0;r<e.length&&t>0;r++){var o=e[r];if(o.length>0){t+=n(o,t)}else{t--}}}function s(e){var i=t.grid.getRow(e);if(i){t.addRowBefore(i,false)}else{t.addRow(false)}}function l(e,t,n){var l=t.getRow();var u=t.getColumns();var c=t.getColumn()+u;var d=r(e,l,c);var f=i-c+1;if(f>=u){if(o(d)>=u){a(d,u)}else{s(l+1);a(d,u)}n.setRow(l);n.setColumn(c)}else{s(l+1);a(d,f+u);n.setRow(l+1);n.setColumn(1)}}var u=e.clone();l(n,e,u);u.rebuild({imageUriPattern:this.imageUriPattern,imageByFilenameUriPattern:this.imageByFilenameUriPattern,noImageLink:this.noImageLink});u.setShown(true);this.children.add(u);this.updateToc(false);this.watcher.bind(this.children.active().matching(this.targetId).pulse());this.adjust();this.setChanged(true);return u};ee.prototype.replaceChildren=function(e,t){this.removeChild(e);t.setRow(e.getRow());t.setColumn(e.getColumn());t.rebuild({imageUriPattern:this.imageUriPattern,imageByFilenameUriPattern:this.imageByFilenameUriPattern,noImageLink:this.noImageLink});t.setShown(true);this.children.add(t);this.updateToc(false);this.watcher.bind(this.children.active().matching(this.targetId).pulse());this.adjust();this.setChanged(true)};ee.prototype.editChild=function(e){if(this.isEditable()){var t=this.imageByFilenameUriPattern;var i={child:{name:e.getName(),containerName:e.getContainerName(),isToc:e.isToc(),isSortable:e.isSortable(),interestGroup:e.getInterestGroup(),targetId:e.getTargetId(),asTocItem:e.asTocItem(),placeholders:e.getPlaceholders()},targets:this.targets.list(),interestGroups:this.interestGroups.slice(),categories:this.categories.list(),imageUriPattern:this.imageUriPattern,noPreviewImageLink:this.noPreviewImageLink,noImageLink:this.noImageLink,urls:this.urls,mailingId:this.mailingId,mobileSuffix:this.mobileSuffix,mobileImagePrefix:this.mobileImagePrefix,resolveAgnImageTags:function(e){if(e){return $.trim(re.resolveAgnImageTags(e,t))}else{return e}}};if(e.isToc()){i.child.toc=this.children.active().asTocItems(false)}if(e.containsMultiPh()){const t=e.getMultiPh();const n=e.containsMultiPh()&&e.data.content[t.id];if(n){const n=[];re.collectPlaceholders(t.markup,e.data.content,n,{},null);const r=n.map((function(e){return e.id}));i.child.placeholders=i.child.placeholders.filter((function(e){return r.indexOf(e.id)<0}))}}_e.create(e,i)}};ee.prototype.saveChild=function(e,t,i,n,r,o,a){e.setName(t);e.setTargetId(i);e.setTocItem(n);e.setInterestGroup(r);e.setContent(o);if(e.isToc()){this.children.active().each((function(e){var t=a[e.getId()];if(t===true||t===false){e.setTocItem(t)}}));this.updateToc(false)}else{e.rebuild({imageUriPattern:this.imageUriPattern,imageByFilenameUriPattern:this.imageByFilenameUriPattern,noImageLink:this.noImageLink});if(e.isTocItem()||n||!e.isMatching(this.targetId)){this.updateToc(false)}}if(!e.isMatching(this.targetId)){e.setShown(false);this.watcher.bind(this.children.active().matching(this.targetId).pulse())}this.adjust();this.setChanged(true);this.updateAvailableTargets()};ee.prototype.controlRssBtn=function(){$('[data-action="import-from-content-source"]').toggle(this.children.containsRssChildren())};ee.prototype.updateRecycleBin=function(){var t=$("#recyclebin-content");var i=$("#recyclebin-stub");var n=$("#recycle-bin-clear-btn");this.children.sort((function(e,t){if(e.isRecycled()===t.isRecycled()){return 0}return e.isRecycled()?1:-1}));var r=this.children.recycled().get();Z.setShown(i,r.length===0);Z.setShown(n,r.length>0);var o=e.dom("recyclebin-table",{children:r.map((function(e){return{name:e.getName()||e.getContainerName(),id:e.getId(),containerId:e.getContainerId()}}))});t.html(o);o.find("[data-building-block]").each((function(e){var t=$(this);t.draggable(ue.draggableOptions());re.set(t,r[e])}))};ee.prototype.getGuttersAsString=function(){var e=[];this.grid.each((function(t){e.push(t.isGuttered()?"1":"0")}));return e.join("|")};ee.prototype.getChildrenAsSubmittable=function(){var e=this.children.active().groups();var t=[];var i=Z.getAvailableTargetIds();e.forEach((function(e){e=_.sortBy(e,(function(e){return i.indexOf(e.getTargetId())}));var n=0;e.forEach((function(e){e.setZ(n++);t.push(e.asSubmittable())}))}));return t};ee.prototype.validateOverlaps=function(){var e=this.children.active().select((function(e){return e.getRows()>1})).get();for(var t=0;t<e.length;t++){var i=e[t];var n=i.getRow();var r=n+i.getRows()-1;for(var o=t+1;o<e.length;o++){var a=e[o];var s=a.getRow();var l=s+a.getRows()-1;if(s>n&&s<=r&&l>r||s<n&&l>=n&&l<r){var u=i.getColumn();var c=u+i.getColumns()-1;var d=a.getColumn();var f=d+a.getColumns()-1;if(d>c||f<u){return false}}}}return true};ee.prototype.save=function(e){if(this.validateOverlaps()){var i=$("#gridTemplateForm");var n=a.get(i);this.setChanged(false);n.setValue("forceGenerateTextVersion",e===true);n.setValue("rowGutters",this.getGuttersAsString());n.setValue("childrenJson",JSON.stringify(this.getChildrenAsSubmittable()));n.setValue("removedChildren",this.removedChildren);n.submit("resource")}else{AGN.Lib.Messages(t("defaults.error"),t("error.template.invalidVerticalSpanning"),"alert")}};ee.prototype.checkIfDataRestoreNeeded=function(e){var t=this.getChildrenData();var i=e.children;if(t.length!==i.length){return true}return JSON.stringify(t)!==JSON.stringify(i)};ee.prototype.getDataForAutoSave=function(){return{children:this.getChildrenData()}};ee.prototype.getChildrenData=function(){return this.children.children.map((function(e){return e.data}))};ee.prototype.clearEmptyAddedOnTheFlyRows=function(){const e=this;this.grid.each((function(t){t.preventAddOnTheFly=false;if(t.isEmptyRowAddedOnTheFly){e.removeRow(t)}}))};ee.prototype.processAddedOnTheFlyRows=function(e){const t=this;this.grid.rows.filter((function(t){return t.isAllowedToAppendNewRowOnTheFly(e.pageX,e.pageY)})).forEach((function(e){t.appendRowOnTheFlyAfter(e)}))};ee.prototype.appendRowOnTheFlyAfter=function(e){this.clearEmptyAddedOnTheFlyRows();this.addRowAfter(e);const t=this.grid.rows[f.grid.rows.indexOf(e)+1];t.animateAppearance();t.isEmptyRowAddedOnTheFly=true;e.preventAddOnTheFly=true};ee.prototype.clearRecycleBin=function(){const e=this;const t=this.children.recycled();t.each((function(t){if(t.getId()>0){e.removedChildren.push(t.getId())}}));this.children.removeChilds(t.get());this.updateRecycleBin()};ee.prototype.getRecycledChildren=function(){const e=this.children.recycled().get();return e.map((function(e){return e.getId()})).filter((function(e){return e>0}))};function te(e){var t={};if(e){this.data=e.slice();this.data.forEach((function(e){t[e.id]=e.name}))}else{this.data=[]}this.map=t}te.prototype.name=function(e){return this.map[e==p?h:e]};te.prototype.list=function(){return this.data.slice()};function ie(e){var t={};if(e){this.data=e.slice();this.data.forEach((function(e){t[e.id]=e.name}))}else{this.data=[]}this.map=t}ie.prototype.name=function(e){return this.map[e]};ie.prototype.list=function(){return this.data.slice()};function ne(e){if(e[0]instanceof re){this.children=e.slice()}else{this.children=e.sort((function(e,t){if(e.z===t.z){if(e.columns===t.columns){return e.column-t.column}return t.columns-e.columns}return e.z-t.z})).map((function(e){return new re(e)}))}}ne.make=function(e){return new ne(e||[])};ne.prototype.get=function(){return this.children.slice()};ne.prototype.size=function(){return this.children.length};ne.prototype.each=function(e){this.children.forEach(e)};ne.prototype.sort=function(e){this.children.sort(e)};ne.prototype.contains=function(e){return this.children.indexOf(e)>=0};ne.prototype.containsToc=function(){for(var e=0;e<this.children.length;e++){if(this.children[e].isToc()){return true}}return false};ne.prototype.matching=function(e){return this.select((function(t){return t.isMatching(e)}))};ne.prototype.unmatching=function(e){return this.select((function(t){return!t.isMatching(e)}))};ne.prototype.containsRssChildren=function(){return this.active().children.some((function(e){return e.isRssImportedChild()||e.isRssTemplateChild()}))};ne.prototype.active=function(){return this.select((function(e){return!e.isRecycled()}))};ne.prototype.recycled=function(){return this.select((function(e){return e.isRecycled()}))};ne.prototype.select=function(e){return new ne(this.children.filter(e))};ne.prototype.removeChilds=function(e){this.children=this.children.filter((function(t){return e.indexOf(t)===-1}))};ne.prototype.add=function(e){e.setZ(this.active().calculateMaxZ()+1);this.children.push(e)};ne.prototype.groupsMap=function(){var e={};var t=_.groupBy(this.children,(function(e){return e.getRow()}));$.each(t,(function(t,i){var n={};i.forEach((function(e){var t=e.getColumns();if(t>1){var i=e.getColumn();for(var r=1;r<t;r++){n[i+r]=i}}}));i.forEach((function(i){var r=i.getColumn();while(n[r]){r=n[r]}var o=t+":"+r;if(e[o]===undefined){e[o]=[]}e[o].push(i)}))}));return e};ne.prototype.groups=function(){var e=[];var t=this.groupsMap();$.each(t,(function(t,i){if(i.length){e.push(i)}}));return e};ne.prototype.collectTargetIds=function(){var e={};this.each((function(t){e[t.getTargetId()]=true}));return Object.keys(e).sort()};ne.prototype.calculateMaxZ=function(){return this.children.reduce((function(e,t){return Math.max(t.getZ(),e)}),0)};ne.prototype.calculateRowsCount=function(){return this.children.reduce((function(e,t){return Math.max(t.getRow()+t.getRows()-1,e)}),0)};ne.prototype.setShown=function(e){this.children.forEach((function(t){t.setShown(e);var i=t.data.container.modeEdit;if(i===K||i===Q){t.setDraggable(false);t.setResizable(false)}}))};ne.prototype.setBorderHighlighted=function(e){this.children.forEach((function(t){t.setBorderHighlighted(e)}))};ne.prototype.setHighlighted=function(e){this.children.forEach((function(t){t.setHighlighted(e)}))};ne.prototype.setControlsEnabled=function(e){this.children.forEach((function(t){t.setControlsEnabled(e);if(!t.isContainerDeleted()){t.setResizable(e)}t.checkHoverState()}))};ne.prototype.asTocItems=function(e){var t;if(e){t=_.map(this.groupsMap(),(function(e){return _.maxBy(e,(function(e){return e.getZ()}))}))}else{t=this.children.slice()}var i=t.sort((function(e,t){if(e.getRow()===t.getRow()){if(e.getColumn()===t.getColumn()){return t.getZ()-e.getZ()}return e.getColumn()-t.getColumn()}return e.getRow()-t.getRow()})).map((function(e){return e.asTocItem()})).filter((function(e){return!!e}));if(e){return i.filter((function(e){return e.isEnabled}))}return i};ne.prototype.pulse=function(){var e=this.children.map((function(e){return e.pulse()}));return e};ne.prototype.rebuildStatic=function(e){this.each((function(t){if(!t.isToc()){t.rebuild(e)}}))};ne.prototype.rebuildToc=function(e){var t=this;var i=false;this.each((function(n){if(n.isToc()){n.rebuild($.extend({},e,{toc:t.asTocItems(true)}));i=true}}));return i};ne.prototype.rotateLayering=function(){var e=this.children.slice().sort((function(e,t){return e.getZ()-t.getZ()}));var t=e.map((function(e){return e.getZ()}));e.forEach((function(e,i){e.setShown(i===t.length-2);e.setZ(t[(i+1)%t.length])}))};ne.prototype.setLayeringByTargets=function(e){var t=this.children.slice().sort((function(e,t){return t.getZ()-e.getZ()}));var i=t.map((function(e){return e.getZ()}));_.sortBy(t,(function(t){return e.indexOf(t.getTargetId())})).forEach((function(e,t){e.setShown(t===0);e.setZ(i[t])}))};ne.prototype.stick=function(e){this.children.forEach((function(t){if(t.isInArea(e)){t.setArea(e)}}))};ne.prototype.adjustLayering=function(){var e=this.children.length;this.children.forEach((function(t){t.setZ(--e)}))};ne.prototype.adjustSizes=function(e){this.children.forEach((function(t){t.adjustSize(e)}))};ne.prototype.adjustCoordinates=function(e){this.children.forEach((function(t){t.adjustCoordinates(e)}))};function re(e){var t={id:0,name:"",targetId:0,row:0,column:0,rows:1,columns:1,z:0,isTocItem:false,isRecycled:false,interestGroup:"",container:{id:0,name:"",isToc:false,isSortable:false,markup:[],content:{},tocItemPlaceholderId:0,type:"",filter:""},content:undefined};this.data=_.merge(t,e);if(this.data.content===undefined){this.data.content=_.clone(this.data.container.content)}this.capsule=new fe(this);var i=e.container.modeEdit;if(this.isContainerDeleted()||i===K||i===Q){this.setDraggable(false);this.setResizable(false)}}re.get=function(e){return e.data("agn:child")};re.set=function(e,t){e.data("agn:child",t)};re.resolveAgnImageTags=function(e,t){return u.replaceAgnTags(e,(function(e,i){if(e.name==="agnIMAGE"&&e.attributes["name"]){if(!e.attributes["source"]||e.attributes["source"]==="mediapool"||e.attributes["source"]==="mediapoolbg"){return t.replace(":filename:",encodeURIComponent(e.attributes["name"]))}}return i}))};re.render=function(e,t,i){var n="";e.forEach((function(e){switch(e.type){case T:if(e.value){n+=re.resolveAgnImageTags(e.value,i.imageByFilenameUriPattern)}else{n+=e.value}break;case S:var r=t[e.id];if(e.markup&&!(e.placeholderType===G&&r)){if(ae(e,r)){n+=re.render(e.markup,t,i)}}else{switch(e.placeholderType){case O:case R:case N:case L:case M:case F:case G:if(r){n+=$.trim(re.resolveAgnImageTags(r,i.imageByFilenameUriPattern))}break;case I:if(r){n+=$.trim(re.resolveAgnImageTags(r,i.imageByFilenameUriPattern))}else{n+=i.noImageLink}break;case P:n+=parseInt(r)>0?i.imageUriPattern.replace("{image-id}",r):i.noImageLink;break;default:console.error("Unknown placeholder type: "+e.placeholderType)}}break;case D:i.toc.forEach((function(r){n+=re.render(e.markup,t,$.extend({tocItem:r},i))}));break;case k:switch(e.placeholderType){case W:n+=j+i.tocItem.id;break;case H:n+=i.tocItem.name;break;default:console.error("Unknown TOC placeholder type: "+e.placeholderType)}break;default:console.error("Unknown span type: "+e.type)}}));return u.escapeAgnTags(n)};re.collectPlaceholders=function(e,t,i,n,r){e.forEach((function(e){switch(e.type){case S:if((!r||r.call(r,e))&&!_.has(e.options,"showByValue")){if(n[e.id]===undefined){i.push({id:e.id,type:e.placeholderType,name:e.name,value:t[e.id],options:e.options,help:e.help});n[e.id]=true}}case D:if(e.markup){re.collectPlaceholders(e.markup,t,i,n,r)}break}}))};re.draggableOptions=function(){return{stack:"#children .div-container",revert:"invalid",distance:20,cursor:"move",opacity:.4,start:function(){f.setChildrenControlsEnabled(false)},stop:function(){f.setChildrenControlsEnabled(true)}}};re.resizableOptions=function(e){var t=false;return{handles:"ne, se, sw, nw, w, n, e, s",autoHide:true,create:function(){t=new de(e,f.getGrid())},start:function(i,n){if(t===false){t=new de(e,f.getGrid())}var r=$(i.originalEvent.target);e.setControlsEnabled(false);e.capsule.setResizingEnabled(true);t.start(Z.getResizeHandleDirection(r))},stop:function(i,n){t.stop(n.size.width,n.size.height);e.capsule.setResizingEnabled(false);e.setControlsEnabled(true);e.checkHoverState();f.updateToc(false);f.adjust();f.setChanged(true)},resize:function(e,i){t.resize(i.size.width,i.size.height)}}};re.prototype.asSubmittable=function(){return{id:this.data.id,containerId:this.data.container.id,name:this.data.name,targetId:this.data.targetId,interestGroup:this.data.container.isSortable?this.data.interestGroup||"":"",type:this.data.container.type,filter:this.data.container.filter,row:this.data.row,column:this.data.column,rows:this.data.rows,columns:this.data.columns,content:$.extend({},this.data.content),isTocItem:this.data.isTocItem}};re.prototype.get$=function(){return this.capsule.get$()};re.prototype.getId=function(){return this.data.id};re.prototype.getName=function(){return this.data.name};re.prototype.getContainerName=function(){return this.data.container.name};re.prototype.setName=function(e){this.data.name=e||""};re.prototype.getContainerId=function(){return this.data.container.id};re.prototype.isRecycled=function(){return this.data.isRecycled};re.prototype.setRecycled=function(e){if(e){this.setShown(false);this.setRows(1);this.setColumns(1);this.capsule.recycle();this.data.isRecycled=true}else{this.data.isRecycled=false}};re.prototype.isInArea=function(e){return!this.isNotInArea(e)};re.prototype.isNotInArea=function(e){var t=e.column,i=t+e.columns-1;var n=e.row,r=n+e.rows-1;var o=this.data.column;var a=o+this.data.columns-1;var s=this.data.row;var l=s+this.data.rows-1;return Math.max(o,a)<t||Math.min(o,a)>i||Math.max(s,l)<n||Math.min(s,l)>r};re.prototype.isMatching=function(e){if(e===p||this.data.targetId===h){return true}return this.data.targetId===e};re.prototype.isToc=function(){return this.data.container.isToc};re.prototype.modeEdit=function(){return this.data.container.modeEdit};re.prototype.isTocItem=function(){return this.data.isTocItem};re.prototype.setTocItem=function(e){this.data.isTocItem=!!e};re.prototype.isSortable=function(){return this.data.container.isSortable};re.prototype.getInterestGroup=function(){if(this.isSortable()){return this.data.interestGroup||""}else{return""}};re.prototype.setInterestGroup=function(e){if(this.isSortable()){this.data.interestGroup=e||""}else{this.data.interestGroup=""}};re.prototype.getTargetId=function(){return this.data.targetId};re.prototype.setTargetId=function(e){this.data.targetId=e>=0?e:h;this.capsule.updateControls()};re.prototype.getRow=function(){return this.data.row};re.prototype.setRow=function(e){return this.data.row=e};re.prototype.getColumn=function(){return this.data.column};re.prototype.setColumn=function(e){this.data.column=e};re.prototype.getZ=function(){return this.capsule.getZ()};re.prototype.setZ=function(e){this.capsule.setZ(e)};re.prototype.getRows=function(){return this.data.rows};re.prototype.setRows=function(e){this.data.rows=e};re.prototype.getColumns=function(){return this.data.columns};re.prototype.setColumns=function(e){this.data.columns=e};re.prototype.getArea=function(){return ve.area(this.data.row,this.data.column,this.data.rows,this.data.columns)};re.prototype.setArea=function(e){this.setRow(e.row);this.setColumn(e.column);this.setRows(e.rows);this.setColumns(e.columns)};re.prototype.getHeight=function(){return this.capsule.getHeight()};re.prototype.setShown=function(e){this.capsule.setShown(e);if(!this.isContainerDeleted()){this.setDraggable(e);this.setResizable(e)}};re.prototype.setBorderHighlighted=function(e){this.capsule.setBorderHighlighted(e)};re.prototype.setHighlighted=function(e){this.capsule.setHighlighted(e)};re.prototype.setSize=function(e,t){this.capsule.setSize(e,t)};re.prototype.setCoordinates=function(e){this.capsule.setCoordinates(e)};re.prototype.setControlsEnabled=function(e){this.capsule.setControlsEnabled(e)};re.prototype.checkHoverState=function(){Z.checkHoverState(this.capsule.get$())};re.prototype.adjustSize=function(e,t){this.setSize(e.getWidthForSpans(this.getColumns()),t||"auto")};re.prototype.adjustHeight=function(e){this.capsule.adjustHeight(e)};re.prototype.adjustCoordinates=function(e){this.setCoordinates(e.getCoordinates(this.getRow(),this.getColumn()))};re.prototype.setDraggable=function(e){var t=this.capsule.get$();if(e){t.draggable(re.draggableOptions())}else{try{t.draggable("destroy")}catch(e){}}};re.prototype.setResizable=function(e){var t=this.capsule.get$();if(e){t.resizable(re.resizableOptions(this))}else{try{t.resizable("destroy")}catch(e){}}};re.prototype.getPlaceholders=function(e){var t=this.data.content;var i=[];var n={};var r=undefined;if(e){r=function(t){return t.placeholderType===e}}re.collectPlaceholders(this.data.container.markup,t,i,n,r);i.sort((function(e,t){return e.name.localeCompare(t.name)}));return oe(i)};re.prototype.containsMultiPh=function(){return!!this.getMultiPh()};re.prototype.getMultiPh=function(){return this.data.container.markup.filter((function(e){return e.placeholderType===G}))[0]};function oe(e){const t=new Map(e.filter((function(e){return e.type===F})).map((function(t){return[t.id,t.options.split(",").map((function(t){return e.find((function(e){return t==e.id}))}))]})));const i=Array.from(t.values()).flat();const n=[];e.filter((function(e){return!i.includes(e)})).forEach((function(e){n.push(e);if(e.type===F){const i=t.get(e.id);i.forEach((function(e){n.push(e)}))}}));return n}function ae(e,t){if(!t){return e.placeholderType===G}if(e.placeholderType!==M){return true}return se(e,t)}function se(e,t){return!_.has(e.options,"showByValue")||le(e.options,t)}function le(e,t){return e.showByValue===t}re.prototype.setContent=function(e){$.extend(this.data.content,e)};re.prototype.asTocItem=function(){var e=this.data.container.tocItemPlaceholderId;if(e>0){var t=this.data.content;var i=[];var n={};function r(t){return t.id===e}re.collectPlaceholders(this.data.container.markup,t,i,n,r);if(i.length){var o=i[0];return{id:this.data.id,name:t[o.id]||"",placeholderName:o.name,isEnabled:this.data.isTocItem}}}return null};re.prototype.rebuild=function(e){this.capsule.embrace(re.render(this.data.container.markup,this.data.content,e))};re.prototype.pulse=function(){return this.capsule.pulse()};re.prototype.clone=function(){var e=new re(this.data);e.data.id=0;return e};re.prototype.isContainerDeleted=function(){return this.data.container.isDeleted};re.prototype.isRssTemplateChild=function(){return!!(this.data.container.type&&this.data.container.type.startsWith("rss:contentSourceId="))};re.prototype.isRssImportedChild=function(){const e="rss:import";return!!(this.data.container.type&&this.data.container.type.startsWith(e))||!!(this.data.type&&this.data.type.startsWith(e))};function ue(e){this.data=$.extend({id:0,name:"",isToc:false,markup:[],content:{}},e)}ue.draggableOptions=function(){return{stack:"#children .div-container",revert:"invalid",distance:20,helper:"clone",appendTo:"body",containment:"window",zIndex:g,refreshPositions:true,start:function(e,t){t.helper.width($(this).width());f.setChildrenControlsEnabled(false)},stop:function(e,t){t.helper.width("auto");f.setChildrenControlsEnabled(true);f.clearEmptyAddedOnTheFlyRows()},drag:function(e,t){f.processAddedOnTheFlyRows(e)}}};ue.prototype.getContainerId=function(){return this.data.id};ue.prototype.getRows=function(){return 1};ue.prototype.getColumns=function(){return 1};ue.prototype.isToc=function(){return this.data.isToc};ue.prototype.instantiate=function(){return new re({name:this.data.name,container:this.data})};function ce(e){this.horizontal=B;this.vertical=B;for(var t=0;t<e.length;t++){var i=e.charAt(t).toLowerCase();switch(i){case V:case z:if(this.horizontal===B){this.horizontal=i}else{console.error("Ambiguous direction code: "+e)}break;case U:case Y:if(this.vertical===B){this.vertical=i}else{console.error("Ambiguous direction code: "+e)}break;default:console.error("Unknown direction code: "+i)}}}ce.prototype.isHorizontal=function(){return this.horizontal!==B};ce.prototype.isVertical=function(){return this.vertical!==B};ce.prototype.isEast=function(){return this.horizontal===V};ce.prototype.isWest=function(){return this.horizontal===z};ce.prototype.isNorth=function(){return this.vertical===U};ce.prototype.isSouth=function(){return this.vertical===Y};function de(e,t){var i=e.get$();this.child=e;this.$child=i;this.grid=t}de.prototype.setupConstraints=function(){this.setConstraints(this.grid.getConstraints(this.child,this.direction))};de.prototype.setConstraints=function(e){this.$child.resizable({minWidth:e.minWidth,maxWidth:e.maxWidth,minHeight:e.minHeight,maxHeight:e.maxHeight})};de.prototype.getArea=function(e,t){return this.grid.getArea(this.child,this.direction,e,t)};de.prototype.start=function(e){this.direction=e;this.area={row:this.child.getRow(),column:this.child.getColumn(),rows:this.child.getRows(),columns:this.child.getColumns()};this.z=this.child.getZ();this.setupConstraints();this.grid.setAreaHovered(this.area);this.grid.startResizing(this.child);this.child.setZ(g)};de.prototype.resize=function(e,t){var i=this.getArea(e,t);if(i.row!==this.area.row||i.column!==this.area.column||i.rows!==this.area.rows||i.columns!==this.area.columns){this.area=i;this.grid.setAreaHovered(i)}};de.prototype.stop=function(e,t){this.area=this.getArea(e,t);this.child.setZ(this.z);this.child.setRow(this.area.row);this.child.setColumn(this.area.column);this.child.setRows(this.area.rows);this.child.setColumns(this.area.columns);this.grid.setAreaHovered(null);this.grid.stopResizing(this.child);this.child.adjustSize(this.grid);this.child.adjustCoordinates(this.grid)};function fe(t){var i=this;var n=$.Deferred();var r=e.dom("div-sandbox");this.promise=n.promise();this.watcher=new ge;this.$capsule=r;this.$content=fe.stub();if(t.isContainerDeleted()){this.showIsDeleted()}r.find("iframe").on("load",(function(){var e=$(this).contents().get(0);$(e.head).append(fe.style());$(e.body).append(i.$content);i.watcher.bind(Z.imagesAdjusted(i.$content));n.resolveWith(i)}));r.appendTo("#children");re.set(r,t);this.controls=new he(r)}fe.stub=function(){return $('<div class="div-container"></div>')};fe.css=function(){return $("#template-styles").html()};fe.style=function(){return $("<style/>",{html:this.css()})};fe.prototype.get$=function(){return this.$capsule};fe.prototype.updateControls=function(){this.controls.update()};fe.prototype.setControlsEnabled=function(e){this.controls.setEnabled(e)};fe.prototype.ready=function(e){if(e!==undefined){this.promise.done(e)}return this.promise.state()==="resolved"};fe.prototype.pulse=function(){return this.watcher.promise()};fe.prototype.embrace=function(e){var t=$(e).filter("*");if(this.ready()){this.$content.replaceWith(t);this.$content=t;var i=this.$capsule.outerWidth();if(i>0){this.setSize(i,"auto")}this.watcher.bind(Z.imagesAdjusted(t,true))}else{this.$content=t}};fe.prototype.recycle=function(){var e=this;this.setShown(false);this.ready((function(){var t=fe.stub();e.watcher.bind(false);e.$content.replaceWith(t);e.$content=t}))};fe.prototype.getZ=function(){return this.$capsule.css("z-index")};fe.prototype.setZ=function(e){this.$capsule.css("z-index",e)};fe.prototype.setShown=function(e){Z.setShown(this.$capsule,e)};fe.prototype.setBorderHighlighted=function(e){if(e){this.$capsule.addClass("highlight-border")}else{this.$capsule.removeClass("highlight-border")}};fe.prototype.setHighlighted=function(e){if(e){this.$capsule.addClass("highlight-cont")}else{this.$capsule.removeClass("highlight-cont")}};fe.prototype.setCoordinates=function(e){this.$capsule.offset(e)};fe.prototype.setSize=function(e,t){if(!q){this.$content.outerWidth(e)}this.$capsule.outerWidth(e);if(this.ready()){this.$content.style("width",(function(e){return e}),"important");this.$content.style("height","auto","important");if(t==="auto"){t=this.$content.outerHeight()}this.$capsule.outerHeight(t)}else{if(t==="auto"){this.$capsule.outerHeight(m)}else{this.$capsule.outerHeight(t)}}};fe.prototype.adjustHeight=function(e){this.$capsule.outerHeight(e)};fe.prototype.getHeight=function(){if(this.ready()){return Z.getHeightAccurate(this.$content)}else{return m}};fe.prototype.setResizingEnabled=function(e){if(e){this.$capsule.css("box-sizing","content-box");this.$capsule.css("opacity",.4);this.$content.style("width","100%","important");this.$content.style("height","100%","important")}else{this.$capsule.css("box-sizing","");this.$capsule.css("opacity","")}};fe.prototype.showIsDeleted=function(){var e=this.$capsule.find(".div-sandbox-overlay");e.addClass("deleted");var n=$('<div class="delete-badge" data-tooltip="'+t("grid.container.deleted")+'">'+' <i class="icon-fa5 icon-trash"/><span class="text">!</span>'+"</div>");i.create(n,i.options(n));e.append(n)};function pe(e){this.child=e}pe.prototype.getOptions=function(){return{targetName:f.getTargetName(this.child.getTargetId()),isToc:this.child.isToc(),containerDeleted:this.child.isContainerDeleted(),containerModeEdit:this.child.modeEdit()}};pe.prototype.createControls=function(t){var i=e.dom(t,this.getOptions());re.set(i.find("[data-action]"),this.child);AGN.runAll(i);return i};pe.prototype.createInlineControls=function(){return this.createControls("child-controls")};pe.prototype.createPopoverControls=function(){return this.createControls("child-popover-controls")};function he(e){var t=this;var i=re.get(e);this.$capsule=e;this.factory=new pe(i);this.timeoutId=null;this.state=C;this.update();e.on("mouseenter",(function(){t.show()}));e.on("mouseleave",(function(){t.hide()}))}he.popoverOptions=function(e){return{trigger:"manual",html:true,template:x,content:function(){return e.getPopoverContent()}}};he.prototype.stopHiding=function(){if(this.timeoutId){clearTimeout(this.timeoutId);this.timeoutId=undefined;return true}return false};he.prototype.popoverShow=function(){if(!this.stopHiding()){this.popover.show()}this.state=A};he.prototype.popoverHide=function(e){this.stopHiding();if(e===true){this.popover.hide();this.state=C}else{var t=this;this.timeoutId=setTimeout((function(){t.popoverHide(true)}),200)}};he.prototype.inlineShow=function(){this.$inlineControls.show();this.state=E};he.prototype.inlineHide=function(){this.$inlineControls.hide();this.state=C};he.prototype.show=function(){if(this.state===w){return}if(this.$inlineControls.height()<this.$capsule.height()){if(this.state===A){this.popoverHide(true)}this.inlineShow()}else{if(this.state===E){this.inlineHide()}this.popoverShow()}};he.prototype.hide=function(e){switch(this.state){case E:this.inlineHide();break;case A:this.popoverHide(e);break}};he.prototype.setEnabled=function(e){if(e){if(this.state===w){this.state=C}}else{this.hide(true);this.state=w}};he.prototype.update=function(){if(this.$inlineControls){this.$inlineControls.remove()}this.$inlineControls=this.factory.createInlineControls();this.$capsule.append(this.$inlineControls);if(this.popover){this.popover.destroy()}if(this.$popoverControls){this.$popoverControls=undefined}this.popover=n.new(this.$capsule,he.popoverOptions(this));var e=this.popover.tip();var t=this;e.on("mouseenter",(function(){t.popoverShow()}));e.on("mouseleave",(function(){t.popoverHide()}));if(this.state===E||this.state===A){this.show()}};he.prototype.getPopoverContent=function(){if(this.$popoverControls===undefined){this.$popoverControls=this.factory.createPopoverControls();var e=this.$popoverControls.find("[data-action]");re.set(e,this.child);var t=this;e.on("click",(function(){t.popoverHide(true)}))}var i=this.$popoverControls.clone(true);AGN.runAll(i);return i};he.prototype.remove=function(){this.state=w;this.stopHiding();this.popover.destroy();this.$popoverControls=undefined;this.$inlineControls.remove();this.$inlineControls=undefined};function ge(){this.deferred=$.Deferred();this.callback=null}ge.prototype.promise=function(){return this.deferred.promise()};ge.prototype.bind=function(e){var t=this;if(e===false){t.callback=null}else{var i=t.callback=function(){if(t.callback===i){t.deferred.notifyWith(this,arguments)}};if($.isArray(e)){e.forEach((function(e){e.progress(i)}))}else{e.progress(i)}}};var me={};me.make=function(e,t){me.adjustChildren(e,t);t.forEach((function(t){t.adjustHeight(e.getHeightForSpans(t.getRow(),t.getColumn(),t.getRows(),t.getColumns()))}))};me.getChildrenProjections=function(e,t){var i=[];e.each((function(e){i.push({row:e,projections:[]})}));var n=[];t.forEach((function(e){var t=[];var r={child:e,height:e.getHeight(),spans:t};var o=e.getRow();var a=o+e.getRows()-1;for(var s=o;s<=a;s++){var l={cascade:r,height:0,margin:0,adjusted:false};t.push(l);i[s-1].projections.push(l)}n.push(r)}));$.each(i,(function(t,i){var n=e.getRowMargin(i.row.isGuttered());$.each(i.projections,(function(e,t){t.margin=n}))}));$.each(n,(function(e,t){me.adjustCascade(t)}));return i};me.adjustCascade=function(e){var t=Math.max(e.height,y);var i=0;var n=e.spans;var r=[];for(var o=0;o<n.length;o++){var a=n[o];if(a.adjusted===false){a.height=y;r.push(a)}i+=a.height;if(i+a.margin>=t){for(o=o+1;o<n.length;o++){n[o].height=0}break}if(o+1<n.length){i+=a.margin}}var s=t-i;if(s>0&&r.length){var l=s/r.length;$.each(r,(function(e,t){t.height+=l}))}};me.adjustChildren=function(e,t){$.each(me.getChildrenProjections(e,t),(function(e,t){var i=t.projections;if(i.length){var n=0;var r=0;$.each(i,(function(e,t){if(t.height>n){n=t.height;r=e}}));if(n===0){n=m}$.each(i,(function(e,t){t.adjusted=true;if(e!==r){t.height=n;me.adjustCascade(t.cascade)}}));t.row.setHeight(n)}else{t.row.setHeight(m)}}))};function ve(e,t){this.$template=$("#template");this.columns=e.columns;this.rows=[];this.gap=e.gap;this.columnWidth=e.columnWidth;this.callbacks={};this.hoveredDroppable=null;for(var i=1;i<=t;i++){var n=this.createRow(e.gutters[i-1]);this.$template.append(n.get$());this.rows.push(n)}this.adjustSidebars()}ve.area=function(e,t,i,n){return{row:e,column:t,rows:i,columns:n}};ve.prototype.createRow=function(e){var t=new ye(this.columns,e);var i=this;t.setOnHoverChange((function(e,n,r,o){var a=i.rows.indexOf(t)+1;if(a>0){if(o){i.setAreaHovered(ve.area(a,r,n.getRows(),n.getColumns()));i.hoveredDroppable=e}else if(i.hoveredDroppable===e){i.setAreaHovered(false)}}else{i.setAreaHovered(false)}}));t.setOnDrop((function(e,n,r){if(i.callbacks.onDrop){var o=i.rows.indexOf(t)+1;if(o>0){var a=e.getRows();var s=i.getRows()-o+1;if(a>s){a=s}var l=e.getColumns();var u=i.getColumns()-r+1;if(l>u){l=u}i.callbacks.onDrop.call(i,e,n,ve.area(o,r,a,l))}}}));return t};ve.prototype.each=function(e){this.rows.forEach(e)};ve.prototype.getRows=function(){return this.rows.length};ve.prototype.getColumns=function(){return this.columns};ve.prototype.getRow=function(e){return this.rows[e-1]||null};ve.prototype.getDroppable=function(e,t){var i=this.getRow(e);if(i){return i.getDroppable(t)}return null};ve.prototype.getRowMargin=function(e){return b+(e?this.gap:0)};ve.prototype.getCoordinates=function(e,t){return this.getDroppable(e,t).getCoordinates()};ve.prototype.getConstraints=function(e,t){return $.extend(this.getWidthConstraints(e,t),this.getHeightConstraints(e,t))};ve.prototype.getWidthConstraints=function(e,t){var i=e.getColumn();var n=e.getColumns();var r=this.getWidthForSpans(1);var o;if(t.isHorizontal()){if(t.isEast()){o=this.getWidthForSpans(this.getColumns()-i+1)}else{o=this.getWidthForSpans(i+n-1)}}else{o=r}return{minWidth:r,maxWidth:o}};ve.prototype.getHeightConstraints=function(e,t){var i=e.getColumns();var n=e.getColumn();var r=n+i-1;var o=e.getRows();var a=e.getRow();var s=a+o-1;var l,u;if(t.isVertical()){if(t.isSouth()){l=this.getMinHeightConstraint(a,n,1,i);s=this.getRows();if(t.isHorizontal()){if(t.isEast()){r=this.getColumns()}else{n=1}}}else{l=this.getMinHeightConstraint(s,n,1,i);a=1}u=this.getMaxHeightConstraint(a,n,s-a+1,r-n+1)}else{l=u=e.getHeight()}return{minHeight:Math.min(l,e.getHeight()),maxHeight:u}};ve.prototype.getWidthForSpans=function(e){if(q){return this.columnWidth}return this.columnWidth*e+this.gap*(e-1)};ve.prototype.getHeightForSpans=function(e,t,i,n,r){var o=this;if(r===undefined){r=function(e,t){return e.getHeight()>t.getHeight()?e:t}}function a(e){return o.rows[e-1].getDroppables().slice(t-1,t+n-1).reduce(r)}var s=e;var l=e+i-1;if(s===l){return a(s).getHeight()}else{var u=a(s).get$();var c=a(l).get$();return c.position().top-u.position().top+c.outerHeight()}};ve.prototype.getMinHeightConstraint=function(e,t,i,n){function r(e,t){return e.getHeight()<t.getHeight()?e:t}return this.getHeightForSpans(e,t,i,n,r)};ve.prototype.getMaxHeightConstraint=function(e,t,i,n){function r(e,t){return e.getHeight()>t.getHeight()?e:t}return this.getHeightForSpans(e,t,i,n,r)};ve.prototype.getArea=function(e,t,i,n){var r=this;var o,a;if(t.isHorizontal()){a=Math.ceil(i/(this.columnWidth+this.gap));if(t.isEast()){o=e.getColumn()}else{o=e.getColumn()+e.getColumns()-a}}else{o=e.getColumn();a=e.getColumns()}function s(e){var t=r.rows[e-1];if(t){return t.getDroppables().slice(o-1,o+a-1).reduce((function(e,t){return e.getHeight()>t.getHeight()?e:t}))}else{return null}}function l(e){return e.get$().position().top}var u,c;if(t.isVertical()){var d,f;c=1;if(t.isSouth()){u=e.getRow();d=s(u);while(f=s(u+c)){if(n>l(f)-l(d)){c++}else{break}}}else{u=e.getRow()+e.getRows()-1;f=s(u);while(d=s(u-1)){if(n>l(f)-l(d)+f.getHeight()-d.getHeight()){u--;c++}else{break}}}}else{u=e.getRow();c=e.getRows()}return ve.area(u,o,c,a)};ve.prototype.setAreaHovered=function(e){if(e){this.each((function(t,i){if(i>=e.row-1&&i<=e.row-1+e.rows-1){t.setHovered(true,e.column,e.column+e.columns-1)}else{t.setHovered(false)}}))}else{this.each((function(e){e.setHovered(false)}))}if(this.callbacks.onAreaHovered){this.callbacks.onAreaHovered.call(this,e)}};ve.prototype.startResizing=function(e){if(this.callbacks.onResizingStarted){this.callbacks.onResizingStarted.call(this,e)}};ve.prototype.stopResizing=function(e){if(this.callbacks.onResizingStopped){this.callbacks.onResizingStopped.call(this,e)}};ve.prototype.adjustRows=function(e){me.make(this,e.get())};ve.prototype.getDroppables=function(){var e=[];var t=this.gap;this.each((function(i,n){var r=(i.isGuttered()?t:0)+b;i.each((function(t,i){e.push({droppable:t,row:n+1,column:i+1,marginBottom:r})}))}));return e};ve.prototype.adjustSidebars=function(){var e=[];$.each(this.rows,(function(t,i){var n=i.get$();var r=parseInt(n.css("marginTop"));var o=n.position().top;var a=n.outerHeight(true);e[t]={top:o+r/2,middle:o+r+(a-r)/2}}));$.each(this.rows,(function(t,i){var n=e[t];var r=e[t+1];i.setRemoveButtonShown(true);i.setInsertButtonShown(true);i.setGutterButtonShown(!q&&!!r);if(!q&&r){i.adjustGutterButton(r.top-v/2)}if(t===0){i.adjustInsertButton(0);i.adjustRemoveButton(r?(r.top-v/2)/2:n.middle)}else{i.adjustInsertButton(n.top-v/2);i.adjustRemoveButton(n.middle-v/2)}}))};ve.prototype.addRowBefore=function(e){var t=this.rows.indexOf(e);if(t>=0){var i=true;if(t>0){i=this.rows[t-1].isGuttered()}var n=this.createRow(i);this.rows[t].get$().before(n.get$());this.rows.splice(t,0,n)}return t+1};ve.prototype.addRow=function(){if(this.rows.length>0){this.rows[this.rows.length-1].setGuttered(true)}var e=this.createRow(true);this.$template.append(e.get$());this.rows.push(e);return this.rows.length};ve.prototype.removeRow=function(e){var t=this.rows.indexOf(e);if(t>=0){this.rows[t].remove();this.rows.splice(t,1)}return t+1};ve.prototype.setOnDrop=function(e){this.callbacks.onDrop=e};ve.prototype.setOnAreaHovered=function(e){this.callbacks.onAreaHovered=e};ve.prototype.setOnResizingStarted=function(e){this.callbacks.onResizingStarted=e};ve.prototype.setOnResizingStopped=function(e){this.callbacks.onResizingStopped=e};function ye(i,n){this.$row=e.dom("droppables-row");this.$gutterButton=e.dom("toggle-gutter-button");this.$removeButton=e.dom("remove-row-button");this.$insertButton=e.dom("insert-row-button");this.$row.data("agn:row",this);this.$gutterButton.data("agn:row",this);this.$removeButton.data("agn:row",this);this.$insertButton.data("agn:row",this);this.droppables=[];this.callbacks={};for(var r=1;r<=i;r++){var o=this.createDroppable();this.droppables.push(o);this.$row.append(o.get$())}this.setGuttered(n);this.$gutterButton.appendTo("#sidebar-gutters");this.$removeButton.appendTo("#sidebar-actions");this.$insertButton.appendTo("#sidebar-actions");Z.setTooltip(this.$removeButton,t("grid.row.delete"));Z.setTooltip(this.$insertButton,t("grid.row.add"))}ye.get=function(e){return e.data("agn:row")};ye.prototype._isPointerAtAddOnTheFlyPosition=function(e,t){const i=this.$row;const n=10;const r=i.offset().top;const o=i.offset().left;const a=i.outerHeight();const s=i.outerWidth();const l=r+a;const u=this.isGuttered()?f.grid.gap:1;return e>o&&e<o+s&&(t>l-n&&t<l+u+n)};ye.prototype.isAllowedToAppendNewRowOnTheFly=function(e,t){return this._isPointerAtAddOnTheFlyPosition(e,t)&&(!this.preventAddOnTheFly&&!this.isEmptyRowAddedOnTheFly)};ye.prototype.animateAppearance=function(){const e=this.$row;const t=e.clone(true);e.hide().after(t);t.show().addClass("container-row-animated");t.one("animationend",(function(){e.show();t.remove()}))};ye.prototype.createDroppable=function(){var e=new be(this);var t=this;e.setOnHoverChange((function(e,i){if(t.callbacks.onHoverChange){var n=this;var r=t.droppables.indexOf(n)+1;if(r>0){t.callbacks.onHoverChange.call(t,n,e,r,i)}}}));e.setOnDrop((function(e){if(t.callbacks.onDrop){var i=this;var n=t.droppables.indexOf(i)+1;if(n>0){t.callbacks.onDrop.call(t,e,i,n)}}}));return e};ye.isEmpty=function(e){return!f.children.active().children.some((t=>t.getRow()>=e&&t.getRow()+t.getRows()-1<=e))};ye.prototype.get$=function(){return this.$row};ye.prototype.each=function(e){this.droppables.forEach(e)};ye.prototype.getDroppables=function(){return this.droppables.slice()};ye.prototype.getDroppable=function(e){return this.droppables[e-1]||null};ye.prototype.setHeight=function(e){if(e>0){e=Math.max(e,y)}else{e=m}this.droppables.forEach((function(t){t.setHeight(e)}))};ye.prototype.isGuttered=function(){return this.$row.hasClass("guttered")};ye.prototype.setGuttered=function(e){if(e){this.$row.addClass("guttered");Z.setTooltip(this.$gutterButton,t("grid.gutter.hide"));this.$gutterButton.find("#show-spacing-icon").hide();this.$gutterButton.find("#hide-spacing-icon").show()}else{this.$row.removeClass("guttered");Z.setTooltip(this.$gutterButton,t("grid.gutter.show"));this.$gutterButton.find("#show-spacing-icon").show();this.$gutterButton.find("#hide-spacing-icon").hide()}};ye.prototype.setHovered=function(e,t,i){if(t===undefined){this.droppables.forEach((function(t){t.setHovered(e)}))}else{if(i===undefined){i=t}this.droppables.forEach((function(n,r){var o=r+1;if(t<=o&&o<=i){n.setHovered(e)}else{n.setHovered(!e)}}))}};ye.prototype.remove=function(){this.droppables.forEach((function(e){e.remove()}));this.droppables=[];this.$row.remove();Z.removeTooltip(this.$gutterButton);this.$gutterButton.remove();Z.removeTooltip(this.$removeButton);this.$removeButton.remove();Z.removeTooltip(this.$insertButton);this.$insertButton.remove();this.callbacks.onDrop=undefined};ye.prototype.adjustGutterButton=function(e){this.$gutterButton.css("top",e)};ye.prototype.setGutterButtonShown=function(e){Z.setShown(this.$gutterButton,e)};ye.prototype.adjustRemoveButton=function(e){this.$removeButton.css("top",e)};ye.prototype.setRemoveButtonShown=function(e){Z.setShown(this.$removeButton,e)};ye.prototype.adjustInsertButton=function(e){this.$insertButton.css("top",e)};ye.prototype.setInsertButtonShown=function(e){Z.setShown(this.$insertButton,e)};ye.prototype.setOnHoverChange=function(e){this.callbacks.onHoverChange=e};ye.prototype.setOnDrop=function(e){this.callbacks.onDrop=e};function be(t){this.$droppable=e.dom("droppable");this.$droppable.data("agn:droppable",this);this.$droppable.droppable(be.options(this));this.row=t;this.callbacks={}}be.get=function(e){return e.data("agn:droppable")};be.options=function(e){return{accept:"[data-building-block]",tolerance:"pointer",deactivate:function(){e.setHovered(false);if(e.callbacks.onHoverChange){e.callbacks.onHoverChange(false)}},drop:function(t,i){e.setHovered(false);if(e.callbacks.onDrop){e.callbacks.onDrop(re.get(i.draggable))}e.row.isEmptyRowAddedOnTheFly=false},over:function(t,i){if(e.callbacks.onHoverChange){e.callbacks.onHoverChange(re.get(i.draggable),true)}else{e.setHovered(true)}},out:function(t,i){if(e.callbacks.onHoverChange){e.callbacks.onHoverChange(re.get(i.draggable),false)}else{e.setHovered(false)}}}};be.prototype.get$=function(){return this.$droppable};be.prototype.getCoordinates=function(){return this.$droppable.offset()};be.prototype.getRow=function(){return this.row};be.prototype.getHeight=function(){return Z.getHeightAccurate(this.$droppable)};be.prototype.setHeight=function(e){this.$droppable.outerHeight(e)};be.prototype.setHovered=function(e){if(e){this.$droppable.addClass("container-hover-accept")}else{this.$droppable.removeClass("container-hover-accept")}};be.prototype.setLayeringIndex=function(t){if(t>0){if(this.$rotationButton){this.$rotationButton.css("visibility","");this.$rotationButton.find(".layer-number").text(t)}else{var i=this;this.$rotationButton=e.dom("child-z-index-button",{index:t});if(f.isEditable()){this.$rotationButton.on("click",(function(){if(i.callbacks.onLayeringRotate){i.callbacks.onLayeringRotate()}}))}this.$droppable.append(this.$rotationButton)}}else{if(this.$rotationButton){this.$rotationButton.css("visibility","hidden")}}};be.prototype.remove=function(){this.$droppable.droppable("destroy");if(this.$rotationButton){this.$rotationButton.remove();this.$rotationButton=undefined}this.$droppable.remove();this.callbacks.onDrop=undefined;this.callbacks.onHoverChange=undefined;this.callbacks.onLayeringRotate=undefined};be.prototype.setOnDrop=function(e){var t=this;this.callbacks.onDrop=function(i){e.call(t,i)}};be.prototype.setOnHoverChange=function(e){var t=this;this.callbacks.onHoverChange=function(i,n){e.call(t,i,n)}};be.prototype.setOnLayeringRotate=function(e){if(e){var t=this;this.callbacks.onLayeringRotate=function(){e.call(t)}}else{this.callbacks.onLayeringRotate=undefined}};function _e(e,t,i){const n=this;this.$modal=e;this.child=t;this.options=i;const r=t.getPlaceholders(P);const o=[];r.forEach((function(e){const t=parseInt(e.value);if(t>0){o.push(t)}}));if(o.length>0){$.ajax(this.options.urls.MEDIAPOOL_LOAD_ELEMENTS,{type:"POST",dataType:"json",traditional:true,contentType:"application/json",data:JSON.stringify(o)}).done((function(e){r.forEach((function(t){const i=parseInt(t.value);if(i>0){const r=e[i];$("#image-category-id-"+t.id).select2("val",r.categoryId);n.updateImagePreview(t.id,r.src,r.name,r.title);if(r.mobileSrc){const e=n.buildMobilePlaceholder(t.id);n.updateImagePreview(e,r.mobileSrc,r.mobileName,r.mobileTitle);n.changeImageControlsState(e,true);n.changeMobileImageBlockVisibility(e,true)}}}))}))}we(t,e);this.updateImageSrcPreview=_.throttle(this.updateImageSrcPreview,300)}function we(e,t){e.getPlaceholders(F).filter((function(e){return e})).forEach((function(e){const t=$('<div id="'+e.id+'-children" class="col-sm-offset-1 col-sm-11" data-show-by-checkbox="#content-'+e.id+'"></div>');t.insertAfter($("#content-"+e.id).closest(".form-group"));e.options.split(",").forEach((function(e){t.append($(".ph-"+e))}))}));AGN.Lib.CoreInitializer.run("checkbox-hider",t)}_e.get=function(e){var t=e.data("agn:child-dialog");if(t){return t}return e.closest(".modal").data("agn:child-dialog")};_e.create=function(e,t){var i=r.createFromTemplate(t,"div-editing-dialog");i.data("agn:child-dialog",new _e(i,e,t))};_e.prototype.updateImageSrc=function(e){var t=e.data("placeholder-id");var i=$.trim(e.val());this.updateImageSrcPreview(t,i)};_e.prototype.updateImageSrcPreview=function(e,t){var i=$("#preview-"+e);if(i.attr("src")!==t){i.attr("src",this.options.resolveAgnImageTags(t)||this.options.noPreviewImageLink)}};_e.prototype.updateImage=function(e,t){const i=e.data("placeholder-id");const n=e.prop("files");const r=$("#content-"+i);if(n&&n.length){const r=n[0];if(r.type==="image"||r.type.match("image/.*")){const e=new FileReader;const n=this;if(t){const e=i.replace(this.options.mobileSuffix,"");const t=$("#image-name-"+e).text();u.renameFile(r,this.options.mobileImagePrefix+t)}else{const e=this.buildMobilePlaceholder(i);this.changeMobileImageBlockVisibility(e,true);this.updateImagePreview(e)}e.onload=function(e){n.updateImagePreview(i,e.target.result,r.name,r.name)};e.readAsDataURL(r)}else{u.clearFormField(e);this.updateImagePreview(i)}}else{this.updateImagePreview(i)}r.val("")};_e.prototype.syncImageCategories=function(e,t){const i=$("#content-"+e).val();const n=this._findPlaceholdersWithImage(i);n.forEach((function(e){const i=$("#image-category-id-"+e.id);c.get(i).selectValue(t)}))};_e.prototype._findPlaceholdersWithImage=function(e){return this.child.getPlaceholders(P).filter((function(t){return e==$("#content-"+t.id).val()}))};_e.prototype.updateImagePreview=function(e,t,i,n){var r=$("#preview-"+e);var o=$("#image-name-"+e);if(r.attr("src")!==t){r.attr("src",t||this.options.noPreviewImageLink)}r.attr("title",n||"");o.text(i||"")};_e.prototype.changeMobileImageBlockVisibility=function(e,t){const i=$("#image-block-"+e);if(t){i.removeClass("hidden")}else{i.addClass("hidden")}};_e.prototype.chooseImage=function(e){var t=$("#file-"+e);if(t.val()){t.trigger("click")}else{this.showMediapoolDialog(e)}};_e.prototype.deleteImage=function(e,t){this.clearImageData(e);if(!t){const t=this.buildMobilePlaceholder(e);this.clearImageData(t);this.changeImageControlsState(t,false);this.changeMobileImageBlockVisibility(t,false)}};_e.prototype.clearImageData=function(e){var t=$("#file-"+e);var i=$("#image-name-"+e);var n=$("#content-"+e);var r=$("#preview-"+e);u.clearFormField(t);i.text("");n.val("");r.attr("src",this.options.noPreviewImageLink)};_e.prototype.showMediapoolDialog=function(e){const t=this;o.request(this.options.urls.MEDIAPOOL_IMAGE_PICK).done((function(i){const n=t.buildMobilePlaceholder(e);t.loadMobileAlternative(i.id).then((function(e){$("#content-"+n).val(e.id);t.updateImagePreview(n,e.src,e.name,e.title);t.changeImageControlsState(n,true)})).catch((function(){t.updateImagePreview(n);t.changeImageControlsState(n,false)})).finally((function(){u.clearFormField($("#file-"+n));t.changeMobileImageBlockVisibility(n,true)}));var r=i.categoryId;const o=t._findPlaceholdersWithImage(i.id);if(o.length>0){r=$("#image-category-id-"+o[0].id).val()}$("#content-"+e).val(i.id);c.get($("#image-category-id-"+e)).selectValue(r);u.clearFormField($("#file-"+e));t.updateImagePreview(e,i.src,i.name,i.title)}))};_e.prototype.changeImageControlsState=function(e,t){const i=$("#preview-"+e);$("#image-delete-button-"+e).find(".btn").prop("disabled",t);$("#choose-image-btn-"+e).prop("disabled",t);i.toggleClass("clickable",!t);i.attr("data-action",t?"":"chooseImage")};_e.prototype.loadMobileAlternative=function(e){return new Promise((function(t,i){$.ajax({url:AGN.url("/mediapool/content/images/mobile-alternative/"+e+"/load.action"),type:"GET",success:function(e){t(e)},error:function(){i()},statusCode:{404:function(){i()}}})}))};_e.prototype.validate=function(e){var t=this.validateImageCategories(e);var i=this.validateImageFormats(e);return t&&i&&this.validateHtml()};_e.prototype.validateHtml=function(){var e={};this.child.getPlaceholders().forEach((function(t){if(t.type!==P){var i=$("#content-"+t.id).val();if($.trim(i)){e[t.name]=i}}}));if(Object.keys(e).length<=0){return true}var t=false;$.ajax({type:"POST",url:AGN.url("/layoutbuilder/template/"+f.getTemplateId()+"/validateHtml.action"),contentType:"application/json",async:false,data:JSON.stringify({htmlPlaceholders:e})}).done((function(e){AGN.Lib.JsonMessages(e.popups,true);t=!!e.success}));return t};_e.prototype.validateImageCategories=function(e){var i=true;this.child.getPlaceholders(P).forEach((function(n){var r=n.id;var o=$("#image-category-id-"+r).val();if(o<=0){var a=!!$("#file-"+r).val();var s=$("#content-"+r).val();if(a||parseInt(s)>0){i=false;e.showFieldError("image-category-id-"+r,t("error.grid.noCategorySelected"))}}}));return i};_e.prototype.validateImageFormats=function(e){var i=true;function n(e){var t=e.match(/[^.\\/]\.([^.\\/]+)$/);if(t){var i=t[1].toUpperCase();return i in{GIF:1,JPG:1,JPEG:1,PNG:1,SVG:1,ICO:1}}return false}this.child.getPlaceholders(P).forEach((function(r){var o=r.id;var a=$("#file-"+o).val();if(a&&!n(a)){i=false;e.showFieldError("content-"+o,t("grid.divchild.format.error"))}}));return i};_e.prototype.updateImagesCategories=function(){var e=this;var t=$.Deferred();var i=[];this.child.getPlaceholders(P).forEach((function(e){var t=e.id;var n=parseInt($("#content-"+t).val());if(n>0){i.push({imageId:n,categoryId:$("#image-category-id-"+t).val()})}}));if(i.length){var n={};i.forEach((function(e){n[e.imageId]=e.categoryId}));$.ajax(e.options.urls.MEDIAPOOL_SET_CATEGORIES,{type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(n)}).done((function(){t.resolve()})).fail((function(){t.reject()}))}else{t.resolve()}return t.promise()};_e.prototype.uploadImages=function(e){const t=this;const i=$.Deferred();const n=[];this.child.getPlaceholders(P).forEach((function(e){const i=e.id;const r=t.buildMobilePlaceholder(i);const o=$("#file-"+i).prop("files");const a=$("#file-"+r).prop("files");if(o&&o.length){n.push({placeholderId:i,image:o[0],categoryId:$("#image-category-id-"+i).val()})}if(a&&a.length){n.push({placeholderId:r,image:a[0],categoryId:$("#image-category-id-"+i).val()})}}));if(n.length){const e=new FormData;n.forEach((function(t,i){e.append("images["+i+"].file",t.image);e.append("images["+i+"].fileName",t.image.name);e.append("images["+i+"].title",t.image.name);e.append("images["+i+"].categoryId",t.categoryId)}));$.ajax(t.options.urls.MEDIAPOOL_IMAGE,{type:"POST",dataType:"json",enctype:"multipart/form-data",processData:false,contentType:false,data:e}).done((function(e){AGN.Lib.JsonMessages(e.popups);if(e.data){e.data.forEach((function(e,t){if(e>0){const i=n[t].placeholderId;$("#content-"+i).val(e);u.clearFormField($("#file-"+i))}}))}if(e.success===true){i.resolve()}else{i.reject()}})).fail((function(){i.reject()}))}else{i.resolve()}return i.promise()};_e.prototype.buildMobilePlaceholder=function(e){return e+this.options.mobileSuffix};_e.prototype.save=function(e){var t=this;this.updateCkditorsValues();if(this.validate(e)){var i=this.$modal;var n=this.child;var r=this.$modal.find(".modal-body");var o=$("#child-save-button");r.addClass("ui-modal-loading");r.scrollTop(0);o.prop("disabled",true);this.updateImagesCategories(e).then((function(){return t.uploadImages(e)})).always((function(){r.removeClass("ui-modal-loading");o.prop("disabled",false)})).done((function(){var e={};var t=n.getPlaceholders();i.find(".js-wysiwyg").each((function(){var e=$(this);var t=e.attr("id");if(CKEDITOR.instances[t]){CKEDITOR.instances[t].updateElement()}AGN.Lib.Editor.get(e).val(e.val());window.removeEditor(t)}));t.forEach((function(t){const i=t.id;const n=$("#content-"+i);e[i]=t.type===F?n.prop("checked")?"checked":"":e[i]=n.val()}));var r=$("#child-title").val();var o=parseInt($("#target-group-id").val());var a=$("#is-toc-enabled").is(":checked");var s=$("#is-interest-sortable").is(":checked")?$("#interest-group").val():"";i.modal("hide");if(n.isToc()){var l={};$("input.js-is-toc-item").each((function(){var e=$(this);l[e.data("child-id")]=e.is(":checked")}));f.saveChild(n,r,o,a,s,e,l)}else{f.saveChild(n,r,o,a,s,e)}}))}};_e.prototype.updateCkditorsValues=function(){this.$modal.find(".js-wysiwyg").each((function(){var e=CKEDITOR.instances[$(this).attr("id")];if(e){e.updateElement()}}))}}));AGN.Lib.Controller.new("grid-overview",(function(){var e;this.addDomInitializer("grid-overview",(function(t){e=this.config;t.all(".card[data-grid-id]").each((function(){var t=$(this);var i=e.grids[parseInt(t.data("grid-id"))];var n=[],r=165/90,o=1e3,a=o/r,s=i.columnWidth*o/i.templateWidth,l=i.gutter*o/i.templateWidth,u;if(t.find("svg").exists()){return}t.find(".js-grid").append('<svg class="grid-preview" viewBox="0 0 '+o+" "+a+'"></svg>');_.times(i.columnNum,(function(e){n.push({type:"gutter",width:l/2});n.push({type:"col",width:s});n.push({type:"gutter",width:l/2})}));_.reduce(n,(function(e,t){t.xPos=e;return e+t.width}),0);u=d3.select(t.find("svg")[0]).selectAll("g").data(n).enter().append("g").attr("transform",(function(e){return"translate("+e.xPos+",0)"}));u.append("rect").attr("class",(function(e){return"grid-preview-"+e.type})).attr("width",(function(e){return e.width})).attr("height",a)}))}));this.addAction({click:"back"},(function(){history.back()}));this.addAction({click:"pick"},(function(){var t=e.grids[this.el.data("grid-id")];if(t){$.ajax(t.viewLink,{method:"POST",data:{newTemplateName:e.newTemplateName}}).done((function(e){AGN.Lib.Page.render(e)}))}}));this.addAction({submission:"createNewGrid"},(function(){var i=this.el;var n=AGN.Lib.Form.get(i);var r=i.find("#newGridName");$.ajax(e.urls.CHECK_NAME,{type:"GET",data:{name:r.val()}}).done((function(e){if(e.used){n.showFieldError("newGridName",t("fields.name.errors.name_in_use"))}else{n.submit("static")}}))}))}));AGN.Lib.Controller.new("grid-template-settings",(function(){var e=[];this.addDomInitializer("grid-template-settings",(function(){e=$("#targetGroupSelect").val()||[];t(e.length>1)}));this.addAction({change:"selectTargetGroups"},(function(){var i=this.el.val()||[];if(i.length>1&&e.length<=1){$("#recipientHasToBeInAllTargets").prop("checked",true)}t(i.length>1);e=i}));function t(e){$("#target-mode-box").toggle(e);$("#regular-targets-box").toggleClass("border rounded p-2",e)}}));AGN.Lib.Controller.new("grid-template",(function(){var e;var i;var n=new f;var r=AGN.Lib.Storage;var o;var a;var s;this.addDomInitializer("grid-template",(function(){var t=this.config;i=this.el;e=new d(i,t)}));this.addDomInitializer("grid-template-css",(function(){o=this.config.templateId;a=this.config.previewWidths;s=this.config.previewMediaQueries;const e=$('[name="previewSize"]');r.restoreChosenFields(e);if(e.is(":checked")===false){e.filter("[value=1]").prop("checked",true)}l()}));function l(){const e=$(".template-preview-wrapper");e.empty();var t=$("#layoutPreviewForm");var i=parseInt($("input[name=previewSize]:checked").val());var n=a[i]+2;e.append('<div>           <div id="layout-preview-container" class="center-block">               <iframe name="layoutPreviewFrame" id="layoutPreviewFrame"                     class="mailing-preview-frame js-simple-iframe" border="0"                     data-max-width="'+n+'" data-media-query="'+s[i]+'"                     style="width:'+n+'px;">                   Your Browser does not support IFRAMEs, please update!               </iframe>           </div>       </div>');AGN.Lib.CoreInitializer.run("iframe");c(t,i);t.submit()}function u(){$("#layoutPreviewForm").find('input[name="css"]').val($("#cssContents").val())}this.addAction({click:"update-css-preview"},(function(){r.saveChosenFields($("input[name=previewSize]:checked"));u();l()}));function c(e,t){const i=e.find('input[name="previewSize"]');if(i.length>0){i.remove()}e.append('<input type="hidden" name="previewSize" value="'+t+'" />')}this.addAction({submission:"grid-template-validation"},(function(){e.validateTemplateName(i.find("#newTemplateName"))}));this.addAction({click:"back"},(function(){history.back()}));this.addAction({click:"delete"},(function(){var e=this;var t=e.el;var i="";if(t.prop("tagName")=="A"){i=t.prop("href")}else{i=t.data("url")}var n=$.get(i);n.done((function(e){var t=$(e),n;n=t.filter(".modal").add(t.find(".modal"));if(n.length!=1){AGN.Lib.Page.render(e,i);return}AGN.Lib.Confirm.create(e).done((function(e){AGN.Lib.Page.render(e,i)}))}));e.event.preventDefault();return false}));function d(e,t){this.templateNameValidationUrl=t.templateNameValidationUrl;this.form=AGN.Lib.Form.get(e)}d.prototype.validateTemplateName=function(e){var i=e.val();var n=this.form;var r=this.templateNameValidationUrl;if(i==""){n.showFieldError("newTemplateName",t("fields.required.errors.missing"))}else{$.ajax({type:"GET",url:r,data:{newTemplateName:i}}).done((function(e){if(e===true){n.submit("static")}else{n.showFieldError("newTemplateName",t("fields.name.errors.name_in_use"))}}))}};this.addAction({click:"update-preview"},(function(){var e=this.el;n.updateInputValue(e.data("target-form"),e.data("content-type"))}));function f(){this.contentTypes={css:{inputSelector:'input[name="css"]',contentId:"#cssContents"},outerHtml:{inputSelector:'input[name="outerHtml"]',contentId:"#templateOuterHTML"},styles:{inputSelector:'input[name^="styles["]',getContentSelector:function(e){return'input[name="'+e+'"]'}}}}f.updateFields=function(e,t,i){var n=$("form").not("#"+i.attr("id"));_.each(n.find(e),(function(e){var n=$(e);var r=n.val();i.find(t(n.attr("name"))).val(r)}))};f.updateField=function(e,t,i){i.find(e).val(t)};f.prototype.updateInputValue=function(e,t){var i=this.contentTypes[t];var n=$(e);if(t=="styles"&&i&&n){f.updateFields(i.inputSelector,i.getContentSelector,n)}else if(i&&n){var r=$(i.contentId).val();f.updateField(i.inputSelector,r,n)}if(n.is("[data-outer-template-form]")){AGN.Lib.Form.get(n).submit()}else{n.submit()}}}));AGN.Lib.Controller.new("image-editor",(function(){var e=AGN.Lib.Confirm,t=AGN.Lib.Template;var i,n;var r=0,o=0;var a=false;var s=false;function l(e){i=e.x;n=e.y;r=e.w;o=e.h}this.addDomInitializer("img-editor-init",(function(){a=false;s=false;$("#editor-result").prop("disabled",true)}));this.addAction({click:"editCategory"},(function(){e.create(t.text("modal-element-category-select",{categoryId:$("#category-id").val()})).done((function(e){if(e&&e.categoryId){$("#category-id").val(e.categoryId)}}))}));this.addAction({click:"cropImage"},(function(){u();if(s){d();c();s=false}else{$("#editor-canvas").Jcrop({onChange:l,onSelect:l,bgOpacity:1});$("#editor-crop-btn").addClass("btn-primary");s=true}}));this.addAction({click:"saveCrop"},(function(){u();var e=document.getElementById("editor-canvas");var t=e.getContext("2d");var a=new Image;a.src=$("#editor-img").attr("src");if(r>1&&o>1){a.onload=function(){e.width=r;e.height=o;t.save();t.drawImage(a,i,n,r,o,0,0,r,o);t.restore();var s=$("#editor-img").data("content-type");var l=e.toDataURL(s);$("#editor-img").attr("src",l);$("#editor-canvas").css("width",r);$("#editor-canvas").css("height",o);$("#l-editor-img-width").attr("value",r);$("#l-editor-img-height").attr("value",o);c();d()}}}));this.addAction({click:"rotateImage"},(function(){d();u();var e=document.getElementById("editor-canvas");var t=e.getContext("2d");var i=$("#editor-img").data("content-type");var n=e.toDataURL(i);var r=new Image;r.src=n;$("#editor-img").attr("src",n);r.onload=function(){var i=e.width;var n=e.height;e.width=n;e.height=i;i=e.width;n=e.height;t.save();t.translate(i,n/i);t.rotate(Math.PI/2);t.drawImage(r,0,0);t.restore();c()}}));this.addAction({input:"changeSize"},(function(){d();var e=document.getElementById("editor-canvas");var t=e.getContext("2d");var i=new Image;i.src=$("#editor-img").attr("src");i.onload=function(){var n=$("#l-editor-img-width").val();var r=$("#l-editor-img-height").val();var o=i.width;var s=i.height;if(a){if($("#l-editor-img-width").is(":focus")){var l=n/o;r=Math.round(l*s);$("#l-editor-img-height").attr("value",r)}else if($("#l-editor-img-height").is(":focus")){var l=r/s;n=Math.round(l*o);$("#l-editor-img-width").attr("value",n)}}e.width=n;e.height=r;t.save();t.drawImage(i,0,0,n,r);t.restore();c()}}));this.addAction({input:"pcChangeSize"},(function(){d();var e=document.getElementById("editor-canvas");var t=e.getContext("2d");var i=new Image;i.src=$("#editor-img").attr("src");i.onload=function(){var n=$("#l-editor-img-percent").val();var r=i.width;var o=i.height;var a=Math.round(r*(n/100));var s=Math.round(o*(n/100));$("#l-editor-img-height").attr("value",s);$("#l-editor-img-width").attr("value",a);e.width=a;e.height=s;t.save();t.drawImage(i,0,0,a,s);t.restore();c()}}));this.addAction({click:"blockSizes"},(function(){if(a){a=false;$("#editor-lock-btn").removeClass("btn-primary")}else{a=true;$("#editor-lock-btn").addClass("btn-primary")}}));function u(){var e=document.getElementById("editor-canvas");var t=$("#editor-img").data("content-type");var i=e.toDataURL(t);$("#editor-img").attr("src",i)}function c(){var e=document.getElementById("editor-canvas");var t=$("#editor-img").data("content-type");var i=e.toDataURL(t);var n=$("#editor-result");var r=i.indexOf(",");if(r>=0){i=i.substring(r+1)}if(n.val()!=i){n.val(i);n.prop("disabled",false)}var o=e.width+$("#l-img-editor-tools").width()+10;$("#l-img-editor").css("min-width",o)}function d(){var e=$("#editor-canvas").data("Jcrop");if(typeof e!="undefined"){$("#editor-canvas").appendTo("#canvas-editor-area");$("#editor-canvas").removeAttr("style");e.destroy()}$("#editor-crop-btn").removeClass("btn-primary");s=false;r=0;o=0}}));AGN.Lib.Controller.new("import-profile-mappings",(function(){const e="do-not-import-column";const i=AGN.Lib.Template;const n=AGN.Lib.Form;const r=AGN.Lib.CoreInitializer;var o;var a;var s;var l;var u=[];var c;var d;var f;this.addDomInitializer("import-profile-mappings",(function(){o=this.config;d=$("#upload-file-container");f=$("#content-container");p(o.columnMappings);s=n.get(this.el);s.initFields()}));function p(e){a=$("#columnMappings tbody");a.html("");l=i.prepare("column-mapping-table-row");for(var t=0;t<e.length;t++){const i=e[t];h(t,i.id,i.fileColumn,i.databaseColumn,i.mandatory,i.encrypted,i.defaultValue)}I();x();u=L()}function h(e,t,i,n,o,s,u){const c=l({index:e,id:t,fileColumn:i,databaseColumn:n,mandatory:o,encrypted:s,defaultValue:u});a.append(c);const d=$('[data-mapping-row="'+e+'"]').find("[data-mapping-db-column]");r.run("select",d)}this.addAction({click:"upload"},(function(){const e=n.get(this.el);const t=$("#uploadFile").prop("files")[0];$.ajax(o.urls.UPLOAD,{type:"POST",dataType:"json",enctype:"multipart/form-data",processData:false,contentType:false,data:e.data()}).done((function(e){if(e.success===true){p(g(e.data));const n=i.dom("uploaded-file-selected",{fileName:t.name});d.hide();n.insertAfter(d);f.removeClass("hidden")}else{AGN.Lib.JsonMessages(e.popups)}}))}));function g(e){const t=m(false);const i=t.filter((function(e){return!e.fileColumn}));const n=[];for(var r=0;r<e.length;r++){const i=e[r];const o=t.findIndex((function(e){return e.fileColumn===i.fileColumn}));if(o===-1){n.push(i)}else{n.push(t[o])}}return[].concat(n,i)}this.addAction({click:"delete-file"},(function(){const e=$.post(AGN.url("/recipient/import/file/delete.action"));e.done((function(){$("#uploaded-file-container").remove();$("#uploadFile").val("");d.show()}))}));this.addAction({submission:"save-mappings"},(function(){const e=n.get(this.el);_.each(m(true),(function(t,i){e.setValueOnce("columnsMappings["+i+"].id",t.id);e.setValueOnce("columnsMappings["+i+"].fileColumn",t.fileColumn);e.setValueOnce("columnsMappings["+i+"].databaseColumn",t.databaseColumn);e.setValueOnce("columnsMappings["+i+"].mandatory",t.mandatory);e.setValueOnce("columnsMappings["+i+"].encrypted",t.encrypted);e.setValueOnce("columnsMappings["+i+"].defaultValue",t.defaultValue)}));e.submit()}));function m(t){if(!a||!a.length){return[]}const i=_.map(a.find("[data-mapping-row]"),(function(e){const t=$(e);return{id:v(t,"id"),fileColumn:v(t,"fileColumn"),databaseColumn:v(t,"db-column"),mandatory:v(t,"mandatory"),encrypted:v(t,"encrypted"),defaultValue:v(t,"defaultValue")}}));if(t){const t=w();if(t.databaseColumn&&t.databaseColumn!==e){i.push(t)}}return i}function v(e,t){const i=e.find("[data-mapping-"+t+"]");if(i.is(":checkbox")){return i.is(":checked")}return i.val()}this.addAction({change:"change-new-col-name"},(function(){if(c&&c!==e){S(c)}const t=this.el.find(":selected").val();c=t;T(t);N(t)}));this.addAction({change:"change-exist-col-name"},(function(){const e=M();if(e){S(e);T(this.el.val());u=L()}}));this.addAction({click:"delete-mapping"},(function(){y(this.el)}));this.addAction({click:"bulk-delete"},(function(){_.each($(".column-checkbox:checkbox:checked"),(function(e){y($(e))}))}));function y(t){const i=t.closest("tr");const n=v(i,"db-column");i.remove();if(n&&n!==e){S(n)}}this.addAction({click:"add-mapping"},(function(){if(!s.valid({})){s.handleErrors();return}s.cleanErrors();const e=w();if(b(e)){AGN.Lib.Messages(t("defaults.error"),t("export.columnMapping.error.duplicate"),"alert");return}this.el.closest("tr").remove();const i=A()+1;h(i,e.id,e.fileColumn,e.databaseColumn,e.mandatory,e.encrypted,e.defaultValue);I();x()}));function b(t){if(t.databaseColumn===e){return false}const i=m(false);return i.some((function(e){return e.fileColumn===t.databaseColumn||e.databaseColumn===t.databaseColumn}))}function w(){const e=$("#encrypted-new");const t=e?e.is(":checked"):false;return{id:0,fileColumn:"",databaseColumn:$("#database-column-new").val(),mandatory:$("#mandatory-new").is(":checked"),encrypted:t,defaultValue:C()}}function C(){if($("[data-action=change-date-input]").is(":checked")){const e=parseInt($("#daysCount").val()||0);const t=e===0?"":e>0?"+"+e:e;return"CURRENT_TIMESTAMP"+t}return $("[name=default-value-new]").val()}function A(){return $("[data-mapping-row]").last().data("mapping-row")}this.addAction({change:"change-date-input"},(function(){$("#dateInput").toggle(!this.el.is(":checked"));$("#daysInput").toggle(this.el.is(":checked"));E($("#daysCount"))}));function E(e){e.on("change.offset keyup.offset",(function(t){const i=e.val();if(i){const t=parseInt(i);if(!isNaN(t)){const n=(t<0?"":"+")+t;if(n!=i){e.val(n)}}else{e.val(i.replace(/[^\d+-]/g,""))}}else if(t.type==="change"){e.val("+0")}}))}function x(){_.each(a.find("[data-mapping-db-column]"),(function(e){T($(e).val())}))}function T(e){_.each(a.find("[data-mapping-db-column]"),(function(t){D($(t),e)}));D($("#database-column-new"),e)}function S(e){_.each(a.find("[data-mapping-db-column]"),(function(t){k($(t),e)}));k($("#database-column-new"),e)}function D(t,i){if(t.val()!==i&&i!==e){t.find('[value="'+i+'"]').remove()}}function k(e,t){if(e.val()!==t){e.append($("<option>",{value:t,text:t}))}}function O(e,t){if(t==="date"){AGN.runAll(e)}else if(t==="datetime"){s.initFields()}}function R(e){const t=o.columns[e].simpleDataType.toLowerCase();switch(t){case"date":case"datetime":return t;default:return"text"}}function N(e){const t=R(e);const i=$("[name=default-value-new]");const n=i.val();const r=i.closest("td");if(r.children().first().data("type")!==t){r.empty();r.append(P(t,n));O(r,t)}}function P(e,t){switch(e){case"date":case"datetime":return i.text("date-def-val-input",{withTime:e==="datetime",val:t});default:return i.text("text-def-val-input")}}function I(){a.append(i.text("new-mapping-row"));r.run("select",$("#database-column-new"))}function M(){const e=L();return u.filter((function(t){return e.indexOf(t)<0}))[0]}function L(){const e=[];_.each(a.find("[data-mapping-db-column]"),(function(t){e.push($(t).val())}));return e}}));AGN.Lib.Controller.new("import-profile",(function(){var e;var i;var n=false;var r;this.addAction({click:"save"},(function(){if(m(d(v()))){const e=AGN.Lib.Form.get($("#importProfileForm"));b(e);e.setValue("isGenderSectionFocused",n);e.submit()}}));this.addDomInitializer("import-profile-view",(function(){r=this.config.isAllowedToShowMailinglists;$("#importProfileForm").on("click change",(function(e){const t=$(e.target);n=(t.is("input")||t.is("select")||t.is("button")||t.parent().is("button"))&&t.parents("#recipient-import-gender-settings").length>0}));u(w(this.config.genderMappings));C()}));this.addAction({change:"new-recipients-action-select"},(function(){C()}));this.addAction({click:"add-gender-mapping",enterdown:"gender-enterdown"},(function(){this.event.preventDefault();if(g()){h();p("","");v().find("[data-gender-text-value]").focus()}}));this.addAction({click:"delete-gender-mapping"},(function(){this.el.closest("tr").remove()}));const o=function(e){$("#mailinglists").toggleClass("hidden",!e);$("#mailinglists-to-show").toggleClass("hidden",e)};this.addDomInitializer("allMailinglists-checkbox",(function(){C()}));this.addAction({change:"mode-select-change"},(function(){const e=$("#all-mailinglists-wrapper").is(":visible");if(!e&&$("#allMalinglistsCheckbox").is(":checked")){$("#allMalinglistsCheckbox").click()}}));this.addAction({change:"allMailinglists-checkbox"},(function(){a($(this.el).is(":checked"))}));const a=function(e){$('#mailinglists [type="checkbox"]').prop("disabled",e)};function s(e){const t=$("#allMalinglistsCheckbox");if(e){t.attr("checked",false);$("#all-mailinglists-wrapper").hide()}else{$("#all-mailinglists-wrapper").show()}t.attr("disabled",e||!r)}function l(e){o(!e);a($("#allMalinglistsCheckbox").is(":checked")||!r||e)}function u(t){i=$("#recipient-import-gender-settings tbody");e=AGN.Lib.Template.prepare("gender-settings-table-row");_.each(t,(function(e){p(e[0],e[1])}));p("","")}function c(e){const t=e.find("[data-gender-text-value]");if(t.is("input")){return t.val().trim()}else{return t.text().trim()}}function d(e){const t=c(e);const i=t.length?t.split(","):[];return new Set(_.without(_.map(i,_.trim),""))}function f(e){const t=e.find("[data-gender-int-value]");return t.is("select")?t.val():t.text()[0]}function p(n,r){if(r===0||r){r+=" ("+t("import.gender.short."+r)+")"}else{r=""}i.append(e({intValue:r,textValues:n}));AGN.Lib.CoreInitializer.run("select",i.find("[data-gender-int-value]:last-child"))}function h(){const e=i.find('[data-action="add-gender-mapping"]');e.after("<a href='#' class='btn btn-regular btn-alert' data-action='delete-gender-mapping'>"+"<i class='icon icon-trash-o'></i></a>");e.remove()}function g(){const e=d(v());if(e.size<1){AGN.Lib.Messages(t("defaults.error"),t("import.gender.error.empty"),"alert");return false}return m(e)}function m(e){const n=i.find("[data-gender-settings-row]").toArray();for(var r=0;r<n.length-1;r++){if(_.intersection(Array.from(e),Array.from(d($(n[r])))).length){AGN.Lib.Messages(t("defaults.error"),t("import.gender.error.duplicate"),"alert");return false}}return true}function v(){return i.find("[data-gender-settings-row]:last-child")}function y(){const e={};_.each(i.find("[data-gender-settings-row]"),(function(t){const i=$(t);const n=c(i);const r=f(i);if(n.length){e[r]=!e.hasOwnProperty(r)?n:e[r]+", "+n}}));return e}function b(e){_.each(y(),(function(t,i){e.setValue("genderMapping["+i+"]",t)}))}function w(e){if(!e){e=""}const t=[];Object.keys(e).forEach((function(i){t.push([i,e[i]])}));t.sort((function(e,t){return e[1]-t[1]}));return t}function C(){const e=$("#import_actionnewrecipients");const t=e.length&&e.val()>0;s(t);l(t)}}));AGN.Lib.Controller.new("logon-password-change",(function(){this.addAction({click:"showPasswordChangeForm"},(function(){$("#suggestion-view").addClass("hidden");$("#submission-view").removeClass("hidden")}))}));AGN.Lib.Controller.new("mailing-upload-attachment",(function(){this.addDomInitializer("mailing-upload-attachment",(function(){e()}));this.addAction({change:"use-pdf"},(function(){i($(this.elem).prop("checked"))}));this.addAction({change:"change-attachment-file"},(function(){t(false)}));this.addAction({change:"change-upload-file"},(function(){t(true)}));function e(){$("#attachment").val("");$("#attachmentName").val("");$("#backgroundAttachment").val("");$("#targetId").select2("val",0);AGN.Lib.Select.get($("#type")).selectFirstValue()}function t(e){var t="";if(e){t=$("#pdfUploadId").select2("val")}else{var i=$("#attachment").prop("files");if(i&&i.length){t=i[0].name}}$("#attachmentName").val(t)}function i(i){e();t(i)}}));AGN.Lib.Controller.new("mailing-content-controller",(function(){const e=AGN.Lib.Confirm;const i=AGN.Lib.Template;const n=AGN.Lib.Storage;var r;var o;var a;var s;var l;var u;var c;this.addDomInitializer("mailing-content-initializer",(function(){c=$("#table_body");o=i.prepare("mailing-content-table-entry-template");a=this.config.isMailingExclusiveLockingAcquired;s=this.config.isEditableMailing;l=this.config.isContentGenerationAllowed;const e=this.config.dynTagsMap;const t=this.config.targetGroupList;const n=this.config.interestGroupList;const u=this.config.dynTagNames;r=new y(e,t,n,u);f();p()}));this.addDomInitializer("gridTemplate-textContent-initializer",(function(){c=$("#textModulesTable");u=this.config.templateId;s=true;l=this.config.isContentGenerationAllowed;a=true;o=i.prepare("gridTemplate-textContent-tableRow-template");r=new y(this.config.dynTags,this.config.targets,[],[]);f()}));this.addAction({click:"createContentEditorModal"},(function(){const i=parseInt(this.el.data("dyn-name-id"));if(i>0){$.ajax({url:AGN.url("/mailing/content/name/{id}/view.action".replace("{id}",i.toString())),method:"GET",dataType:"json",success:function(t){const i=new b(t);const n=r.isHtmlContentBlock(i.name);const o=e.createFromTemplate({dynTag:i,targetGroups:_.cloneDeep(r.targetGroups),interestGroups:_.cloneDeep(r.interestGroups),saveUrl:AGN.url("/mailing/content/save.action"),DynTagObject:b,isFullHtmlTags:i.name=="HTML-Version",showHTMLEditor:n,isEditableMailing:s,isContentGenerationAllowed:l},"content-editor-template");o.done((function(e){r.setDynTag(e);g(e);d()}))},statusCode:{404:function(){AGN.Lib.Messages(t("defaults.error"),t("defaults.error"),"alert")}}})}}));this.addAction({click:"createGridTemplateTextContentEditorModal"},(function(){const i=parseInt(this.el.data("dyn-name-id"));if(i>0){$.ajax({url:AGN.url("/layoutbuilder/template/"+u+"/textModules/"+i+"/view.action"),method:"GET",dataType:"json",success:function(t){const i=new b(t);const n=r.isHtmlContentBlock(i.name);const o=e.createFromTemplate({dynTag:i,targetGroups:_.cloneDeep(r.targetGroups),interestGroups:_.cloneDeep(r.interestGroups),saveUrl:AGN.url("/layoutbuilder/template/"+u+"/textModules/update.action"),DynTagObject:b,isFullHtmlTags:i.name=="HTML-Version",showHTMLEditor:n,isEditableMailing:s,isContentGenerationAllowed:l},"content-editor-template");o.done((function(e){r.setDynTag(e);g(e)}))},statusCode:{404:function(){AGN.Lib.Messages(t("defaults.error"),t("defaults.error"),"alert")}}})}}));const d=function(){const e=AGN.Lib.Form.get($("#preview"));e.setValue("reload",false);e.setResourceSelectorOnce("#preview");e.submit()};const f=function(){r.dynTags.forEach((function(e){c.append(m(e))}))};const p=function(){const e=$("#content-source-select");if(!e){return}const t="web-storage#last-content-source";const i=n.get(t);if(i){if(h(i.id,e)){e.val(i.id);e.change()}else{n.delete(t)}}};const h=function(e,t){var i=false;t.find("option").each((function(){if(this.value===e){i=true;return false}}));return i};const g=function(e){const t=m(e);c.find('[data-dyn-name-id="'+e.id+'"]').replaceWith(t)};const m=function(e){const t=e.contentBlocks.map((function(e){return v(e)}),[]);const i=e.contentBlocks.map((function(e){return e.content.length>35?e.content.substring(0,35)+"...":e.content}),[]);return o({id:e.id,name:e.name,targetGroups:t,contents:i,editable:!!a})};const v=function(e){var i=t("mailing.default.target_group_name");if(e.targetId>0){const n=r.getTargetGroupById(e.targetId);const o=n.deleted?t("mailing.default.target_group_deleted"):n.id;i=n.targetName+" ("+o+")"}return i};const y=function e(i,n,r,o){this.dynTags=Object.entries(i).map((function(e){return new b(e[1])}),[]);this.interestGroups=_.cloneDeep(r);this.interestGroups.unshift({column:"",shortname:t("mailing.default.interest_group_name")});this.targetGroups=_.cloneDeep(n);this.targetGroups.unshift({id:0,targetName:t("mailing.default.target_group_name")});this.targetGroupsMap=n.reduce((function(e,t){e[t.id]=t;return e}),{});this.dynTagNames=o;this.isHtmlContentBlock=function(e){if(typeof o!="undefined"&&o!=null&&o.length!=null&&o.length>0){return o.includes(e)}return false};this.getDynTagById=function(e){const t=this.dynTags.filter((function(t){return t.id===e}));return t[0]};this.setDynTag=function(e){const t=this.getDynTagById(e.id);const i=this.dynTags.indexOf(t);if(i>-1){this.dynTags[i]=e.clone()}};this.getTargetGroupById=function(e){return this.targetGroupsMap[e]||{id:0,targetName:t("mailing.default.target_group_name")}}};const b=function(e){this.id=e.id||0;this.name=e.dynName===undefined?e.name:e.dynName;this.mailingId=e.mailingID===undefined?e.mailingId:e.mailingID;this.interestGroup=this.interestGroup||"";this.interestGroup=e.interestValue===undefined?e.interestGroup:e.dynInterestGroup;if(e.contentBlocks){this.contentBlocks=e.contentBlocks.map((function(e){return new w(e)}))}else{this.contentBlocks=Object.entries(e.dynContent).map((function(e){return new w(e[1])}))}this.contentBlocks.__proto__.swap=function(e,t){const i=this[e];this[e]=this[t];this[t]=i;return this};const t={id:0,index:0,targetId:0,content:""};this.getContentBlockByTargetId=function(e){const t=this.contentBlocks.filter((function(t){return t.targetId===e}));return t[0]};this.getContentBlockById=function(e){const t=this.contentBlocks.filter((function(t){return t.uniqueId===e}));return t[0]};this.createNewContentBlock=function(){const e=new w(t);e.index=this.contentBlocks.length;this.contentBlocks.push(e);i(this.contentBlocks);return e};this.moveUpContentBlock=function(e){const t=this.getContentBlockById(e);if(t.index>1){this.contentBlocks.swap(t.index-1,t.index-2);i(this.contentBlocks)}};this.moveDownContentBlock=function(e){const t=this.getContentBlockById(e);if(t.index<this.contentBlocks.length){this.contentBlocks.swap(t.index-1,t.index);i(this.contentBlocks)}};this.setFirstContentBlock=function(e){const t=this.getContentBlockById(e);if(t.index>1){const e=this.contentBlocks.splice(t.index-1,1);this.contentBlocks=e.concat(this.contentBlocks);i(this.contentBlocks)}};this.setLastContentBlock=function(e){const t=this.getContentBlockById(e);if(t.index<this.contentBlocks.length){const e=this.contentBlocks.splice(t.index-1,1);this.contentBlocks=this.contentBlocks.concat(e);i(this.contentBlocks)}};this.changeTargetGroup=function(e,t){const i=this.getContentBlockById(e);i.targetId=t;return i};this.changeInterestGroup=function(e){this.interestGroup=e};this.changeContent=function(e,t){const i=this.getContentBlockById(e);i.content=t||"";return i};this.changeOrder=function(e){const t=function(e){return function(t){return e.getContentBlockById(parseInt(t))}};this.contentBlocks=e.map(t(this));i(this.contentBlocks)};this.remove=function(e){const t=this.getContentBlockById(e);const n=this.contentBlocks.indexOf(t);if(n>-1){this.contentBlocks.splice(n,1);i(this.contentBlocks)}};this.removeAll=function(){this.contentBlocks=[]};this.clone=function(){return new b(this)};const i=function(e){e.forEach((function(e,t){e.index=t+1}))}};const w=function(e){if(typeof w.uniqueIdCounter==="undefined"){w.uniqueIdCounter=0}this.uniqueId=++w.uniqueIdCounter;this.id=e.id;this.index=e.dynOrder===undefined?e.index:e.dynOrder;this.content=e.dynContent===undefined?e.content:e.dynContent;this.targetId=e.targetID===undefined?e.targetId:e.targetID}}));AGN.Lib.Controller.new("mailing-content-editor-controller",(function(){const e=AGN.Lib.Modal;const i=AGN.Lib.Confirm;const n=AGN.Lib.Template;const r=AGN.Lib.AutoSave;var o;var a;var s;var l;var u;var c;var d;var f;var p;var h;var g;var m;var v;var y=".mailingContentNamespace";var b=".l-mailing-content-entry";var _="content_entry_";this.addDomInitializer("mailing-content-editor-initializer",(function(t){var i=e.get(t);o=i.dynTag;a=i.targetGroups;s=i.saveUrl;l=i.DynTagObject;u=i.showHTMLEditor;c=i.isEditableMailing;d=i.isContentGenerationAllowed;f=$("#content_area");p=$("#ordered_area");h=$("#target_groups");g=$("#interest_groups");m=$("#editable_area");v=n.prepare("mailing-content-entry-template");D();T();S();I(o);F(o.interestGroup);if(o.contentBlocks.length>0){var y=o.contentBlocks[0];X(y,false)}else{K()}L();G();var b=function(){var e=Array();N();var t=o.contentBlocks;Array.prototype.forEach.call(t,(function(t){e.push({targetGroupId:t.targetId,content:t.content,uniqueId:t.uniqueId})}));return e};var C=function(e){var t;o.removeAll();j();Array.prototype.forEach.call(e,(function(e){var i=p.find(".l-stub");var n=o.createNewContentBlock();n.uniqueId=e.uniqueId;n.content=e.content;n.targetId=e.targetGroupId;var r=z(n.targetId);var a=v({name:r.targetName,id:_+n.uniqueId});i.before(a);Z();t=n}));if(t){X(t);O(k())}};var A=function(e){return e.length!==o.contentBlocks.length||!o.contentBlocks.every((function(t){return e.some((function(e){return e.targetGroupId===t.targetId&&e.content===t.content}))}))};r.initialize("mailing-components/"+o.mailingId+"/"+o.id,b,A,C,0);w()}));function w(){if(k()==="html"){ee()}else{te()}}this.addAction({click:"selectContentEntry"},(function(){var e=$(this.el);var t=Y(e);var i=o.getContentBlockById(t);X(i)}));this.addAction({click:"deleteContentEntry"},(function(){this.event.stopPropagation();var e=$(this.el).parent();var t=Y(e);var i=e.next(b);i=i.length>0?i:e.prev(b);o.remove(t);e.remove();if(o.contentBlocks.length>0){var n=Y(i);var r=o.getContentBlockById(n);X(r)}else{X();Q()}}));this.addAction({click:"createEnlargedContentEditorModal"},(function(){N();var e=B();if(e){var t=o.getContentBlockById(e);var n=i.createFromTemplate({content:t.content,selectedContentBlock:e,editorType:k(),isFullHtmlTags:o.name=="HTML-Version",showHTMLEditor:u,isEditableMailing:c,isContentGenerationAllowed:d},"enlarged-content-editor-template");const r=$("#content_modal");const a=$("#enlarged_content_modal");r.trigger("modal:enlarged",[a]);n.done((function(t){r.trigger("modal:enlarged:apply",[a]);var i=o.changeContent(e,t.content);R(i.content);O(t.editorType)}))}}));this.addAction({click:"addDynContent"},(function(){K()}));this.addAction({click:"saveDynTag"},(function(){const e=$.Event("saveDynTag");this.el.closest(".modal").trigger(e,[o]);if(!e.isDefaultPrevented()){C()}}));function C(){N();if(A()){const e=$('[data-action="saveDynTag"]');$.ajax({type:"POST",url:s,dataType:"json",contentType:"application/json",data:JSON.stringify(o),success:function(t){var n=i.get(e);AGN.Lib.JsonMessages(t.popups,true);if(t.success){n.positive(new l(t.data));q()}}})}}var A=function(){var e=o.contentBlocks.map((function(e){return e.targetId})).filter((function(e,t,i){return i.indexOf(e,t+1)>-1}),[]);if(e.length){AGN.Lib.Messages(t("Error"),t("mailing.validation.target_group_duplicated"),"alert");return false}if(u){var i=o.contentBlocks.find((function(e){return(new DOMParser).parseFromString(e,"text/html").querySelector("script")}));if(i){AGN.Lib.Messages(t("Error"),t("fields.error.illegal_script_element"),"alert");return false}}var n=o.contentBlocks.filter((function(e){return e.targetId===0}),[]);if(n.length!==o.contentBlocks.length){if(n.length&&n[0].index<o.contentBlocks.length){AGN.Lib.Messages(t("Error"),t("mailing.validation.all_recipients_not_last"),"alert");return false}}return true};var E=function(){var e=H();var t=e.prev(b);if(t.length!==0){e.insertBefore(t);o.moveUpContentBlock(Y(e))}};var x=function(){var e=H();var t=e.next(b);if(t.length!==0){e.insertAfter(t);o.moveDownContentBlock(Y(e))}};var T=function(){const e=$("#content_modal");e.on("saveDynTagContent",(function(e,t){P(t);C()}))};var S=function(){var e=27;var t=38;var i=40;$(document).off("keydown"+y);$(document).on("keydown"+y,(function(n){n.stopPropagation();switch(n.which){case e:q();break;case t:E();break;case i:x();break;default:return}}))};var D=function(){f.sortable({opacity:.4,delay:100,scroll:true,scrollSensitivity:40,scrollSpeed:15,cursor:"move",items:b,helper:"clone",containment:p,appendTo:p,start:function(e,t){t.item.css("cursor","move")},stop:function(e,t){t.item.removeAttr("style");var i=$(e.target);var n=i.sortable("toArray");var r=n.map((function(e){return e.replace(_,"")}));o.changeOrder(r)}})};var k=function(){var e=$("#tab-content-wysiwyg");if(e.is(":visible")){return"wysiwyg"}var t=$("#contentEditor");if(t.is(":visible")){return"html"}const i=$("#tab-content-ai-text-generation");if(i.is(":visible")){return"ai-text-generation"}return""};var O=function(e){if(!e||e===""){return}var t=$('[data-toggle-tab$="'+e+'"]');if(t){t.trigger("click")}};var R=function(e,t){const i=$("#tab-content-wysiwyg");const n=$("#contentEditor");const r=$("#tab-content-ai-text-generation");if(i.is(":visible")){var o=CKEDITOR.instances["content"];if(o.status==="ready"){o.setData(e)}else{o.on("instanceReady",(function(t){t.editor.setData(e)}))}}if(n.is(":visible")){var a;if(t===false){a=1}else{a=null}var s=ace.edit("contentEditor");if($("body").hasClass("dark-theme")){s.setTheme("ace/theme/idle_fingers")}s.setValue(e,a)}if(r.is(":visible")){r.closest("form").find(".js-wysiwyg").val(e)}};var N=function(){var e=B();if(e>0){var t=$("#tab-content-wysiwyg");var i=$("#contentEditor");var n;if(t.is(":visible")){var r=CKEDITOR.instances["content"];n=r.getData()}if(i.is(":visible")){var a=ace.edit("contentEditor");if($("body").hasClass("dark-theme")){a.setTheme("ace/theme/idle_fingers")}n=a.getValue()}if(n!==undefined){o.changeContent(e,n)}}};var P=function(e){const t=B();if(t>0){o.changeContent(t,e)}};var I=function(e){e.contentBlocks.forEach((function(e){var t=p.find(".l-stub");var i=z(e.targetId);var n=v({name:i.targetName,id:_+e.uniqueId});t.before(n)}))};var M=function(e){h.val(e).trigger("change")};var L=function(){h.off("change"+y);h.on("change"+y,(function(e){var t=parseInt($(e.target).val());var i=B();if(i>0){var n=o.changeTargetGroup(i,t);W(n)}}))};var F=function(e){g.val(e).trigger("change")};var G=function(){g.off("change"+y);g.on("change"+y,(function(e){var t=$(e.target).val();o.changeInterestGroup(t)}))};var W=function(e){var t=U(e.uniqueId);if(t.length>0){var i=z(e.targetId);t.find(".l-name").children().text(i.targetName)}};var H=function(){return p.find(b+".selected")};var j=function(){p.find(b).remove()};var B=function(){var e=H();if(e.length>0){return Y(e)}};var V=function(e){p.children().removeClass("selected");var t=U(e,p);t.addClass("selected")};var z=function(e){var t=a.filter((function(t){return t.id===e}));return t[0]};var U=function(e,t){t=t?t:$(document);return t.find("#"+_+e)};var Y=function(e){return parseInt(e.attr("id").replace(_,""))};var q=function(){$(".modal").modal("toggle")};var X=function(e,t){N();if(e!==undefined){V(e.uniqueId);R(e.content,t);M(e.targetId)}else{R("");M(0)}};var K=function(){var e=p.find(".l-stub");var t=o.createNewContentBlock();var i=z(t.targetId);var n=v({name:i.targetName,id:_+t.uniqueId});e.before(n);Z();X(t)};var Q=function(){if(m.is(":visible")){m.hide()}};var Z=function(){if(m.is(":hidden")){m.show()}};const J=function(e){const i=e.val().length;$('[data-char-counter-for="'+e.attr("id")+'"]').find("span:first").text(t("fields.content.charactersEntered",i))};this.addAction({"editor:create":"count-textarea-chars","editor:change":"count-textarea-chars",input:"count-textarea-chars"},(function(){J(this.el)}));this.addAction({click:"hide-char-counter"},(function(){te()}));this.addAction({click:"show-char-counter"},(function(){ee()}));function ee(){$("[data-char-counter-for]").first().show()}function te(){$("[data-char-counter-for]").first().hide()}$(document).on("ckeditor-save",(function(){C()}))}));AGN.Lib.Controller.new("mailing-overview",(function(){const e=AGN.Lib.Form;var t="dd.MM.yyyy";this.addDomInitializer("mailing-overview",(function(){t=this.config.adminDateFormat}));this.addAction({click:"restore"},(function(){const t=e.get(this.el);$.ajax(this.el.attr("href"),{method:"POST",data:t.data()}).done((function(e){t.updateHtml(e)}))}));this.addAction({click:"bulk-restore"},(function(){const t=e.get(this.el);$.ajax(AGN.url("/mailing/bulkRestore.action"),{method:"POST",data:t.data()}).done((function(e){t.updateHtml(e)}))}));this.addAction({click:"send-date-filter-period"},(function(){o(this.el);$("#filterSendDateBegin").val(n());$("#filterSendDateEnd").val(r());i($("input[name='sendDatePeriod']:checked").length>0)}));this.addAction({click:"reset-send-date-filter"},(function(){$("#filterSendDateBegin").val("");$("#filterSendDateEnd").val("");$('input[name="sendDatePeriod"]:checked').removeAttr("checked");i(false)}));function i(e){const t=$("#filterSendDateBegin");const i=$("#filterSendDateEnd");t.get(0).toggleAttribute("readonly",e);i.get(0).toggleAttribute("readonly",e);t.toggleClass("js-datepicker",!e);i.toggleClass("js-datepicker",!e)}function n(){const e=$("input[name='sendDatePeriod']:checked").val();if(!e){return""}const i=new Date;i.setDate(i.getDate()-e);return AGN.Lib.DateFormat.format(i,t)}function r(){return $("input[name='sendDatePeriod']:checked").length?AGN.Lib.DateFormat.format(new Date,t):""}function o(e){if(e.is(":checked")){const t="input:checkbox[name='"+e.attr("name")+"']";$(t).prop("checked",false);e.prop("checked",true)}else{e.prop("checked",false)}}}));AGN.Lib.Controller.new("mailing-parameter-list-search",(function(){this.addDomInitializer("mailing-parameter-list-search",(function(){var t=this.config;var i=t.mailingId;var n=t.paramQuery;var r=$("#param-search-field");var o=$("#mailing-search-field");new e(r,"paramQuery",n,false);new e(o,"mailingId",i,true)}));function e(e,i,n,r){var o=n;var a={results:[]};var s=e;s.select2({openOnEnter:true,minimumInputLength:1,initSelection:function(e,t){},id:function(e){if(r){return e.mailingID}return o},formatResult:function(e){return'<div style="box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);">'+'<div class="row">'+'<div class="col-sm-6">'+t("fields.mailing.parameter")+"</div>"+'<div class="col-sm-6">'+e.name+"</div>"+"</div>"+'<div class="row">'+'<div class="col-sm-6">'+t("fields.mailing.description")+"</div>"+'<div class="col-sm-6">'+e.description+"</div>"+"</div>"+'<div class="row">'+'<div class="col-sm-6">'+t("fields.mailing.for_mailing")+"</div>"+'<div class="col-sm-6">'+e.mailingID+"</div>"+"</div>"+'<div class="row">'+'<div class="col-sm-6">'+t("fields.mailing.change_date")+"</div>"+'<div class="col-sm-6  ">'+new Date(e.changeDate).toLocaleDateString()+"</div>"+"</div>"+"</div>"},formatSelection:function(e){if(r){return e.mailingID}AGN.Lib.Page.reload(AGN.url("/mailing/parameters/"+e.mailingInfoID+"/view.action"),true)},ajax:{url:AGN.url("/mailing/parameters/search.action"),data:function(e){var t={};o=e;u(o,s);t[i]=e;return t},results:function(e){var t=0;e.forEach((function(e){e.id=t++}));a={results:e};return a},cache:true}});s.on("select2-open",(function(){l(o,s)}));function l(e,t){var i=e||"";t.select2("search",i)}function u(e,t){var i=e||"";var n=t.select2("container").find(".select2-chosen");t.select2("val",i);n.text(i)}u(n,s)}}));AGN.Lib.Controller.new("mailing-parameters",(function(){var e=0;this.addDomInitializer("mailing-parameters",(function(){var t=this.config;e=t.maxIndex}));this.addAction({click:"add-mailing-parameter"},(function(){var t=$("#mailingParamsTable tr:last");var i=AGN.Lib.Template.text("mailing-param-row-new",{key:++e});t.after(i);var n=t.find("#newMailingParameterBtn");n.after('<a href="#" class="btn btn-regular btn-alert" data-action="remove-mailing-parameter" id="removeMailingParameterBtn"> <i class="icon icon-trash-o"></i> </a>');n.remove()}));this.addAction({click:"remove-mailing-parameter"},(function(){var e=this.el.closest("tr");e.remove()}))}));AGN.Lib.Controller.new("mailing-params",(function(){var e=_.template(AGN.Opt.Templates["mailing-param-row"]);var t;var i=false;var n;this.addDomInitializer("mailing-params",(function(){t=$("#mailingParamsTable tbody");i=this.config.isChangeable;n=this.config.params;r(n);const e=$("#mailingSettingsForm");e.dirty("setAsClean");e.dirty("refreshEvents")}));function r(e){_.each(e,(function(e,t){c(t,e.name,e.value,e.description)}));if(i){f("","","")}}function o(){if(p("","")){h();f("","","")}}function a(e){if(!e.is("[data-param-description]")){return e.closest("td").next().find("input:text")}var i=e.closest("tr").find("[data-param-name]");if(!i.val()){return i}if(!e.is('[data-action="param-enterdown"]:last')){return e.closest("tr").next().find("input:text:first")}o();return t.find("[data-param-name]:last")}this.addAction({enterdown:"param-enterdown"},(function(){this.event.preventDefault();a(this.el).focus()}));this.addAction({click:"add-param-row"},(function(){this.event.preventDefault();o();t.find("[data-param-name]:last").focus()}));function s(){const e=n.map((function(e){const t=_.omit(e,"mailingID","mailingInfoID","changeDate");Object.keys(t).forEach((function(e){if(t[e]===null){t[e]=""}}));return t}));return JSON.stringify(e)!==JSON.stringify(AGN.Opt.collectMailinParams())}this.addAction({click:"delete-param-row"},(function(){this.el.closest("tr").remove();$("#mailingSettingsForm").dirty("setAsDirty");u()}));this.addAction({change:"param-enterdown"},(function(){u()}));function l(){return $("#mailingSettingsForm").dirty("showDirtyFields").filter((function(e,t){return!$(t).closest("[data-param-row]").length})).length===0}function u(){const e=$("#mailingSettingsForm");if(l()&&!s()){e.dirty("setAsClean")}}function c(n,r,o,a){if(p(r,o)){t.append(e({index:n,name:r,value:o,description:a,isChangeable:i}))}}function d(){return t.find("[data-param-row]:last-child")}function f(e,t,i){var n=d().data("param-row")||0;c(++n,e,t,i)}function p(e,i){var n=true;_.each(t.find("[data-param-row]"),(function(t){var r=$(t);if(n){if(g(r,"name")==e&&g(r,"value")==i){n=false}}}));return n}function h(){var e=t.find("#newParamBtn");e.after("<a href='#' class='btn btn-regular btn-alert' data-action='delete-param-row'>"+"<i class='icon icon-trash-o'></i></a>");e.remove()}function g(e,t){return e.find("[data-param-"+t+"]").val()}}));AGN.Lib.Controller.new("mailing-predelivery",(function(){var e={aol:"aolonelinespam",yahoo:"yahoospam",gmailnew:"gmailnewspam",ol2003:"ol2003spam"};this.addAction({change:"adjustSpamProvider"},(function(){var t=$(this.el);var i=e[t.attr("name")];if(!i){return}var n=$('[name="'+i+'"]');if(t.prop("checked")){n.prop("disabled",false)}else{n.prop("disabled",true);n.prop("checked",false)}}));this.addInitializer("readjustSpamProviders",(function(){_.each(e,(function(e,t){var i=$("[name="+t+"]");if(i.length===0){return}var n=$('[name="'+e+'"]');if(i.prop("checked")){n.prop("disabled",false)}else{n.prop("disabled",true);n.prop("checked",false)}}))}));function t(e,t){var i=e.closest(".list-group").find('input[type="checkbox"]:enabled');i.prop("checked",t);i.trigger("change")}this.addAction({click:"toggle-checkboxes-on"},(function(){t($(this.el),true)}));this.addAction({click:"toggle-checkboxes-off"},(function(){t($(this.el),false)}))}));AGN.Lib.Controller.new("mailing-preview",(function(){var e=AGN.Lib.Form,i=AGN.Lib.Messages,n=AGN.Lib.Helpers,r=AGN.Lib.Select,o=AGN.Lib.Storage;var a,s;var l;var u=false;this.addDomInitializer("mailing-preview",(function(t){var i=this.config;a=i.RECIPIENT_MODE;s=i.TARGET_MODE;l=i.MAILING_ID;f();var n=e.get($("#container-preview"));if(n.getValue("reload")=="false"){n.setValue("reload",true);n.submit().done((function(){$("[data-stored-field]").on("change",(function(){var e=$(this);o.saveChosenFields(e);u=u||h(e.prop("name"))}));n.initFields();n.initValidator();AGN.Lib.CoreInitializer.run("view");g()}))}}));this.addAction({click:"refresh-preview"},(function(){u=false;d()}));this.addAction({change:"change-stored-header-data"},(function(){if(u){u=false;d()}}));this.addAction({change:"change-header-data"},(function(){d()}));this.addAction({click:"toggle-tab-recipientMode"},(function(){c(a)}));this.addAction({click:"toggle-tab-targetGroupMode"},(function(){c(s)}));function c(e){var t=$('[name="modeTypeId"]');if(t.exists()){t.val(e);t.trigger("change")}}function d(t){var i=e.get($("#preview"));if(t&&typeof t=="function"){t(i)}i.setValue("reload",false);i.setResourceSelectorOnce("#preview");i.submit()}function f(){var e=false;$("[data-stored-field]").each((function(){var t=$(this),i=t.prop("name");if(!h(i)){if(o.restoreChosenFields(t)){e=true}}}));p();o.restoreChosenFields($("[name='modeTypeId']"));o.restoreChosenFields($("[name='customerATID']"));o.restoreChosenFields($("[name='customerEmail']"));o.restoreChosenFields($("[name='targetGroupId']"))}function p(){var e=o.get("toggle_tab#preview-targetModeContent");if(e&&!e.hidden){$("[name='modeTypeId']").val(s);o.saveChosenFields($("[name='modeTypeId']"))}var t=o.get("toggle_tab#preview-recipientModeContent");if(t&&!t.hidden){$("[name='modeTypeId']").val(a);o.saveChosenFields($("[name='modeTypeId']"))}}function h(e){if(!e){return false}return e=="customerATID"||e=="customerEmail"||e=="modeTypeId"||e=="targetGroupId"}function g(){m();y()}this.addAction({click:"change-preview-customer-options"},(function(){y()}));function m(){const e=v();if(!e.exists()){return}const t=e.val().length<=0;$("#personalized-test-run-container").toggleClass("hidden",t)}function v(){return $("#personalized-test-recipients")}function y(){const e=b();const t=r.get(v()).getSelectedValue().indexOf(e)===-1;$('[data-action="add-to-personalized-test-run"]').toggle(!!t)}function b(){if(w()){return $("#customerEmail").val()}return $('[name="customerATID"]').find(":selected").data("email")}function w(){return $('[name="useCustomerEmail"]:checked').val()!=="false"}function C(){return new Promise((function(e,r){var o=b();if(!n.isValidEmail(o)){i(t("defaults.error"),t("defaults.invalidEmail"),"alert");return}$.get(AGN.url("/mailing/preview/"+l+"/isRecipient.action"),{email:o}).done((function(t){if(t.success){e(o)}else{AGN.Lib.JsonMessages(t.popups,true);r()}}))}))}this.addAction({input:"change-personalized-test-recipients",change:"change-personalized-test-recipients"},(function(){g()}));this.addAction({click:"add-to-personalized-test-run"},(function(){C().then((function(e){const t=v();const i=r.get(t);if(!i.hasOption(e)){t.append($("<option>",{value:e,text:e}))}t.val(_.union(t.val(),[e]));AGN.Lib.CoreInitializer.run("select",t);g()}))}));this.addAction({click:"personalized-test-run"},(function(){const e=v();const t=e.val();$.post(AGN.url("/mailing/send/"+l+"/personalized-test.action"),{mailingTestRecipients:t}).done((function(t){if(t&&t.success===true){e.val([]);AGN.Lib.CoreInitializer.run("select",e);m()}AGN.Lib.JsonMessages(t.popups,true)}))}))}));AGN.Lib.Controller.new("mailing-priorities",(function(){var e=AGN.Lib.Template,t=AGN.Lib.Helpers,i=AGN.Lib.DateFormat;var n=2;var r=0;var o,a,s,l,u;var c;var d;var f;var p;function h(){var e=1;var t=10;s.children(".l-mailing-entry").each((function(){var i=$(this);var r=0;if(i.data("type")==n){r=t;e=t;t+=10}else{r=e;if(e>t){t=Math.round(e/10)*10}}e++;i.find(".l-badge .badge").text(r)}))}function g(e){var t=[];s.children(".l-mailing-entry").each((function(){var e=$(this).data("id");if(e>0){t.push(e)}}));return e?t.join(e):t}function m(){var e=0;s.children(".l-mailing-entry").each((function(){if($(this).data("id")>0){e++}}));return e}function v(e){var t=g(";");var i=a.val();if(d==null&&f==null||e){d=t;f=i;if(i>0){o.prop("disabled",true)}else{var n=m();a.val(n);o.prop("disabled",!n)}}else{o.prop("disabled",t==d&&i==f)}}function y(){$("#datebased-container, #normal-container, #ordered-area").find(".l-mailing-entry").remove()}function b(e,t){return i.toArray(i.parse(e),t)}function w(e){return t.pad(e[0],4)+"-"+t.pad(parseInt(e[1])+1,2)+"-"+t.pad(e[2],2)}function C(e,t,i,n){var r=_.clone(e);if(!!t){r[0]=e[0]+t}if(!!i){r[1]=e[1]+i}if(!!n){r[2]=e[2]+n}return r}function A(){return _.reduce(_.keys(c),(function(e,t){return e<t?e:t}))}var E=function(e){var t=[];var i=_.clone(e);_.keys(c).forEach((function(e){c[e].forEach((function(e){if(e.mailingType==n&&!i.includes(e.id)){var r=_.clone(e);i.push(r.id);t.push(e)}}))}));return t};function x(e){var t=c[e]||[];t=t.filter((function(e){return e.mailingType!=n||e.mailingType==n&&e.priority>0}));var i=t.map((function(e){return e.id}));return _.union(t,E(i),"id").sort((function(e,t){return e.priority>t.priority?1:-1}))}function T(e){var t=x(e);y();S(t);v(true)}function S(e){if(e&&e.length){e.forEach((function(e){D(e);var t=p(e);var i=e.priority;var o=e.mailingType;if(i){s.find(".l-stub").before(t)}else{if(o==n){l.find(".l-stub").before(t)}if(o==r){u.find(".l-stub").before(t)}}}))}}function D(e){var t="normal-mailing-icon";if(e.mailingType==n){t="datebase-mailing-icon"}e.iconClass=t}var k=function(e,t){var i=e===l.attr("id");var o=e===u.attr("id");var a=e===s.attr("id");return a||i&&t==n||o&&t==r};var O=function(e,t){if(t){e.parent().addClass("highlight")}else{e.parent().removeClass("highlight")}};var R=function(e){for(var t in e){var i=c[e[t]].find((function(e){return e.mailingType==n}));if(!!i){return e[t]}}return""};var N=function(e){var t=[true];var i=b(R(e));var n=!i?e:e.filter((function(e){return e<i}));n.forEach((function(e){var i=b(e);if(i){t.push(i)}}));if(!!i){t.push({from:i,to:C(i,50)})}return t};var P=function(e){var i=$("#date-picker");var n=_.keys(e).sort();if(n.length){var r=N(n,e);i.pickadate(_.merge({editable:true,disable:r,klass:{input:"picker__input js-datepicker",holder:"datepicker__holder picker__holder datepicker__holder-right"}},t.objFromString(i.data("datepicker-options"))));var o=i.pickadate("picker");if(!o.get("select")){o.set("select",b(A()))}}else{i.pickadate({editable:false})}i.trigger("change")};function I(t){o=$("#save-button");a=$("#priorityCount");s=$("#ordered-area");l=$("#datebased-container");u=$("#normal-container");c=t.mailingsMap;p=e.prepare("draggable-mailing-entry")}this.addDomInitializer("mailing-priorities",(function(){var e=this;I(e.config);var t=$(".l-content-area");$(".priority-container").sortable({opacity:.4,connectWith:".priority-container",items:".l-mailing-entry",helper:"clone",containment:t,appendTo:t,update:function(){if(this.id===s.attr("id")){h();v()}},out:function(){O($(this),false)},over:function(e,t){O($(e.target),false);O($(this),true)},start:function(){O($(this),true)},stop:function(){O($(this),false)},receive:function(e,t){var i=t.item.data("type");var n=e.target.id;if(!k(n,i)){t.sender.sortable("cancel")}}});P(c)}));this.addAction({click:"back"},(function(){window.history.back()}));this.addAction({click:"save"},(function(){var e=AGN.Lib.Form.get(this.el);e.setValueOnce("prioritizedIds",g());e.submit()}));this.addAction({change:"priorityCount"},(function(){v()}));this.addAction({change:"change-date"},(function(){var e=this.el.pickadate("picker").get("select");if(e){T(w([e.year,e.month,e.date]))}else{T()}}))}));AGN.Lib.Controller.new("reference-content-settings",(function(){var e=AGN.Lib.Template;var i=false;var n=false;var r;var o=[];var a=[];var s;function l(e){$("#tile-mailingReferenceContent").toggleClass("hidden",!e)}function u(){var e=$("#referenceTableSelect");var t=e.children("option:selected");$("#keyColumnText").val(t.exists()?t.data("key-column"):"")}function c(e,t){return $(r({name:"Item"+e,value:t,disable:n}))}function d(e){var t=c(o.length+1,e);$("#reference-content-items").append(t);o.push(t)}this.addDomInitializer("reference-content-settings",(function(){s=$("#mailingSettingsForm");u();r=e.prepare("mailing-reference-content-item");i=this.config.isAvailable;n=this.config.disable;o=[];if(i){if($.isArray(this.config.items)){this.config.items.forEach((function(e){d(e)}));a=this.config.items.slice()}l(this.config.isEnabled)}else{l(false)}s.dirty("setAsClean");s.dirty("refreshEvents")}));this.addAction({change:"enable-reference-content"},(function(){if(i){l(this.el.prop("checked"))}else{AGN.Lib.Messages(t("defaults.warning"),t("mailing.default.item_referencetable_warning"),"warning");$(this.el).prop("checked",false).trigger("change.dirty")}}));this.addAction({change:"select-reference-table"},(function(){u()}));this.addAction({click:"add-reference-content-item"},(function(){d("");s.dirty("setAsDirty")}));this.addAction({click:"delete-reference-content-item"},(function(){var e=this.el.closest(".form-group")[0];var t=o.findIndex((function(t){return t[0]==e}));while(t+1<o.length){var i=o[t].find("input");var n=o[t+1].find("input");i.val(n.val());t++}o[t].remove();o.pop();var r=a.length===o.length&&a.every((function(e){return o.includes(e)}));if(!r){s.dirty("setAsDirty")}}))}));AGN.Lib.Controller.new("mailing-send",(function(){const e=AGN.Lib.Form,i=AGN.Lib.Modal,n=AGN.Lib.Confirm,r=AGN.Lib.Page,o=AGN.Lib.Template;const a="RECIPIENT";const s="TARGET";const l="SEND_TO_SELF";const u={disableSendButtons:function(){$("#test-send-controls-group #adminSendButton").addClass("disabled");$("#test-send-controls-group #testSendButton").addClass("disabled")},enableSendButtons:function(){$("#test-send-controls-group #adminSendButton").removeClass("disabled");$("#test-send-controls-group #testSendButton").removeClass("disabled")},hideGreenMarks:function(){$(".transmission-mark").remove();$("#recipient-add-btn, .recipient-remove-btn").removeClass("hidden")},updateWorkStatus:function(e,t){const i=$(o.text("mailing-workstatus-icon",{workstatus:e,tooltip:t}));$("#workstatus-icon").replaceWith(i)}};this.addAction({click:"configure-delivery-mailing-size-warning"},(function(){const e=this.el;n.createFromTemplate({},"warning-mailing-size-modal").done((function(){e.prop("disabled",true);r.reload(e.data("url"))}))}));this.addAction({click:"configure-delivery-mailing-size-error"},(function(){i.createFromTemplate({},"error-mailing-size-modal")}));this.addAction({click:"resume-sending"},(function(){const e=this.el;const t=e.data("link");const i=$.post(t);i.done((function(t){r.render(t);e.closest(".form-group").remove()}))}));this.addAction({click:"configure-delivery"},(function(){this.el.prop("disabled",true);r.reload(this.el.data("url"),true);this.el.prop("disabled",false)}));this.addAction({click:"start-delivery"},(function(){if($("#test-run-options").val()==a){var i=true;$('input[name="mailingTestRecipients"]').each((function(){const e=$(this).val();if(e&&e.trim()){i=false}}));if(i){AGN.Lib.Messages(t("defaults.error"),t("error.enterEmailAddresses"),"alert");return}}u.disableSendButtons();const n=e.get(this.el);n.setActionOnce(this.el.data("url"));n.submit()}));this.addAction({click:"recipients-row-remove"},(function(){var t,i,n=this.el.closest("tr"),r=$('[name="statusmailRecipients"]');n.remove();i=$('[name^="statusmailRecipient_"]');t=_.map(i,(function(e){return $(e).val()}));r.val(t.join(" "));e.get(this.el).submit()}));this.addAction({click:"recipients-row-add",keydown:"recipients-row-field"},(function(){if(this.event.type=="keydown"&&this.event.keyCode!=13){return}var t,i=$("#newStatusMail"),n=$('[name^="statusmailRecipient_"]'),r=$('[name="statusmailRecipients"]');t=_.map(n,(function(e){return $(e).val()}));t.push(i.val());r.val(t.join(" "));e.get(this.el).submit().done((function(){$("#newStatusMail").trigger("focus")}))}));this.addInitializer("statusmailRecipients",(function(e){var t,i=$('[name="statusmailRecipients"]'),n=$("#statusEmailContainer");$(".js-recipients-row").remove();if(i.val()==""){return}t=i.val()||"";t=t.split(" ");_.each(t,(function(e){if(e==""){return}n.prepend(o.text("recipients-row",{email:e}))}))}));this.addDomInitializer("delivery-status-view",(function(){if(!this.config.isTransmissionRunning){u.hideGreenMarks()}const e=this.config.workStatus;const t=this.config.workStatusTooltip;if(e&&t){u.updateWorkStatus(e,t)}}));this.addAction({click:"add-test-recipient",enterdown:"new-test-recipient"},(function(){this.event.preventDefault();const e=this.el.closest("tr");const t=this.el.is("input")?this.el:e.find("input");const i=o.dom("test-recipient-row",{value:t.val()||""});e.before(i);t.val("");AGN.runAll(i);t.focus();p(false)}));this.addAction({input:"new-test-recipient"},(function(){p(false)}));this.addAction({input:"edit-test-recipient",enterdown:"edit-test-recipient"},(function(){this.event.preventDefault();p(false)}));this.addAction({input:"edit-test-run-target-name"},(function(){p(false)}));this.addAction({enterdown:"edit-test-run-target-name"},(function(){this.event.preventDefault()}));this.addAction({click:"remove-test-recipient"},(function(){const e=this.el.closest("tr");e.remove();p(false)}));var c;this.addDomInitializer("test-run-recipients",(function(){c=JSON.parse(this.config?this.config.approvalOptions:"[]");d();$("#get-approval-switch").on("change",(function(){d()}));f();$("#test-run-options").on("change",(function(){f()}))}));function d(){const e=$("#get-approval-switch").prop("checked");const t=$("#test-run-options");t.find("option:not([value='"+c.join("']):not([value='")+"']").attr("disabled",e);if(e&&c.indexOf(t.val())===-1){t.val(t.find("option:not(:disabled):first").val()).trigger("change")}}function f(){const e=$("#test-run-options");if(!e.length){return}const t=e.val()==a;const i=e.val()==s;const n=e.val()==l;const r=!t||!$("#save-target-toggle").prop("checked");$("#test-recipients-table").toggleClass("hidden",!t);$("#adminSendButton").toggleClass("hidden",t||i||n);$("#testTargetSaveButton").toggleClass("hidden",r);$("#test-run-target-name-input").toggleClass("hidden",r);$("#adminTargetGroupSelect").prop("disabled",!i);$("#test-recipients-table input").prop("disabled",!t)}function p(e){const t=$("#testTargetSaveButton");const i=t.find("i");if(e){i.hide()}t.toggleClass("btn-primary",!e,500);t.toggleClass("btn-success",e,500);if(e){t.css({cursor:"not-allowed","pointer-events":"none"})}else{t.css({cursor:"","pointer-events":""})}i.toggleClass("icon-save",!e);i.toggleClass("icon-check",e);i.show(500)}function h(){const t=$('input[name="targetName"]');const i=AGN.Lib.Validator.get("length").errors(t,{min:3,required:true});const n=e.get(t);if(!i.length){n.cleanErrors();return true}i.forEach((function(e){n.showFieldError$(t,e.msg)}));return false}function g(){$.ajax({type:"POST",url:AGN.url("/mailing/send/test/saveTarget.action"),data:{mailingTestRecipients:m(),targetName:$('input[name="targetName"]').val().trim()}}).done((function(e){if(e.success===true){p(true)}else{AGN.Lib.JsonMessages(e.popups)}}))}this.addAction({click:"save-target-for-test-run"},(function(){if(!h()){return}g()}));function m(){return $('input[name="mailingTestRecipients"]').map((function(){return this.value.trim()})).get().filter((function(e){return e}))}function v(e){const t=AGN.Lib.Form.get(e);t.initFields()}this.addAction({change:"prioritization-toggle"},(function(){y($(this.el),"isPrioritizationDisallowed")}));this.addAction({change:"encrypted-send-toggle"},(function(){y($(this.el),"isEncryptedSend")}));this.addAction({change:"sendStatusOnErrorOnly-toggle"},(function(){y($(this.el),"statusOnErrorEnabled")}));function y(e,i){const n=e.prop("checked");e.prop("disabled",true);function r(){e.prop("checked",!n);AGN.Lib.Messages(t("defaults.error"),t("defaults.error"),"alert")}const o={};o[i]=e.is(":checked");$.ajax({type:"POST",url:e.data("url"),data:o}).done((function(e){if(e&&e.success){AGN.Lib.Messages(t("defaults.success"),t("defaults.saved"),"success")}else{r()}})).fail(r).always((function(){e.prop("disabled",false)}))}AGN.Lib.Controller.new("mailing-deletion-modal",(function(){this.addDomInitializer("mailing-deletion-modal",(function(){this.el.find(".js-confirm-positive").on("click",(function(){const e=$("#delivery-status-box");if(e.exists()){AGN.Lib.Load.get(e).stop()}}))}))}))}));AGN.Lib.Controller.new("delivery-settings-view",(function(){this.addDomInitializer("delivery-settings-view",(function(){var e;if(this.config.adminLocale==="en_US"){e=","}else{e="."}const t=$("#maxRecipients");t.val("");t.focusout((function(){if($(this).val()==="0"){t.val("")}}));$("#sendBtn").mousedown((function(){if(t.val()===""){t.val("0")}}));_.each($(".commaSplitLabel"),(function(t){const i=$(t);const n=i.text().replace(/\B(?=(\d{3})+(?!\d))/g,e);i.text(n)}))}))}));AGN.Lib.Controller.new("mailing-settings-view",(function(){var e=AGN.Lib.Form;var i=0;var n;var r=false;var o=[];var a;var s=0;var l;var u=false;var c=function(){var e=$("#target-mode-desc");if($("[name='targetMode']:checked").val()==n.TARGET_MODE_OR){e.text(t("mailing.default.targetmode_or"))}else{e.text(t("mailing.default.targetmode_and"))}};var d=function(){var e=$("#mailingParamsTable tbody");if(e&&e.length){return _.map(e.find("[data-param-row]"),(function(e){var t=$(e);return{name:B(t,"name"),value:B(t,"value"),description:B(t,"description")}})).filter((function(e){return e.name||e.value||e.description}))}return[]};const f=function(e){if(!e.length){return}const i=e.val().length;$('[data-char-counter-for="'+e.attr("id")+'"]').find("span:first").text(t("fields.content.charactersEntered",i))};this.addDomInitializer("mailing-settings-view",(function(){n=this.config;o=$("#targetGroupIds").val()||[];$("#targetModeAndBtn").closest(".form-group").toggle(o.length>1);a=$("#settingsGeneralMailingList");a.select2("readonly",false);if(s>0){s=a.select2("val",s)}if(n.selectedRemovedMailinglistId){p()}S(n.mailingType);if(!n.isMailingGrid||n.mailingId||n.isCopying){M()}m();c();h();if($("#email-tile").length){f($("#emailSubject"));f($("#pre-header"))}AGN.Opt.collectMailinParams=d}));function p(){var i=e.get($("#mailingSettingsForm"));i.showFieldError("mailinglistId",t("fields.mailinglist.errors.removed"),true)}function h(){if(i>0){var e=$("#gt-wrapper");if(e.exists()){e.animate({scrollTop:i},50)}else{$(document).scrollTop(i+50)}}else{var t=$("#mailingSettingsForm").find('[name="shortname"]');if($(t).exists()){$(t).focus()}}i=0}function g(e){var t=e.dirty("showDirtyFields");if(t.length>0){var i=t.filter((function(e,t){var i=$(t);return!(i.prop("readonly")===true||i.is(":disabled")||i.prop("type")==="hidden")}));return i.length===0}else{return false}}function m(){const e=$("#mailingSettingsForm");e.dirty("destroy");e.dirty({preventLeaving:true,leavingMessage:t("grid.layout.leaveQuestion"),onDirty:function(){if(g(e)&&!u){e.dirty("setAsClean")}}});if(g(e)&&!u){e.dirty("setAsClean")}u=false}window.onbeforeunload=function(){if(!$("#mailingSettingsForm").dirty("isDirty")===true){AGN.Lib.Loader.show()}};this.addAction({change:"selectTargetGroups"},(function(){var e=this.el.val()||[];var t=$("#targetModeAndBtn");var i=t.closest(".form-group");if(e.length>1&&o.length<=1){t.prop("checked",true)}i.toggle(e.length>1);o=e}));function v(e){var t={};e.forEach((function(e){var i=$(e);if(i.exists()&&i.closest(".form-group").is(":visible")&&!i.prop("disabled")){var n=i.prop("name");var r=i.val();if(n){t[n]=r}}}));return t}this.addAction({click:"calculateRecipients"},(function(){if(n){l=b();$.ajax({type:"POST",url:AGN.url("/mailing/ajax/"+n.mailingId+"/calculateRecipients.action"),traditional:true,data:l}).always((function(e){if(e&&e.success===true){w(e.count)}else{w("?");AGN.Lib.Messages(t("defaults.error"),t("defaults.error"),"alert")}}))}}));this.addAction({change:"change-mailing-settings"},(function(){r=true;y()}));function y(){if(!l){return}const e=b();if(!_.isEqual(e,l)){l=null;w("?")}}function b(){const e=["#settingsGeneralMailingList","#settingsTargetgroupsListSplit","#settingsTargetgroupsListSplitPart","#lightWeightMailingList","#assignTargetGroups","#targetGroupIds","#altgIds","#followUpType"];return $.extend(v(e),{changeMailing:r,targetMode:$('[name="targetMode"]:checked').val(),isWmSplit:n.wmSplit})}function w(e){const t=$("#calculatedRecipientsBadge");t.text(e)}this.addAction({change:"set-parent-mail-mailinglist"},(function(){A()}));this.addAction({change:"scroll-to"},(function(){var e=C(this.el);i=Math.round(e)}));function C(e){var t=e.closest(".tile");if(t.exists()){return t.position().top}else{return e.position().top}}this.addAction({change:"change-general-mailing-type"},(function(){var e=this;var t=e.el.val();a.select2("readonly",false);if(s>0){a.select2("val",s)}S(t)}));this.addAction({change:"save-mailing-list-id"},(function(){const i=this.el.select2("val");const r=$("#settingsGeneralMailType").val();if(!E(r)){s=i}if(n.selectedRemovedMailinglistId){a.find('option[value="'+n.selectedRemovedMailinglistId+'"]').remove();var o=e.get($(this.el));o.cleanFieldError("mailinglistId")}const l=n.mailinglists.find((function(e){return e.id==i}));if(l){if(l.senderEmail){$("#emailSenderMail").val(l.senderEmail).trigger("change")}if(l.replyEmail){$("#emailReplyEmail").val(l.replyEmail)}if(l.senderEmail&&l.replyEmail){AGN.Lib.Messages(t("defaults.info"),t("mailing.default.sender_and_reply_emails_changed"),"info")}else if(l.senderEmail){AGN.Lib.Messages(t("defaults.info"),t("mailing.default.sender_email_changed"),"info")}else if(l.replyEmail){AGN.Lib.Messages(t("defaults.info"),t("mailing.default.reply_email_changed"),"info")}}}));this.addAction({change:"change-target-mode"},c);function A(){var e=$("#lightWeightMailingList").val();var t=$("#parentmailing-"+e+"-mailinglist").attr("data-mailing-list-id");a.select2("val",t);a.select2("readonly",true)}var E=function(e){return n.FOLLOWUP_MAILING_TYPE==e};var x=function(e){return n.ACTIONBASED_MAILING_TYPE==e};var T=function(e){return n.DATEBASED_MAILING_TYPE==e};function S(e){var t=false;if(n.followUpAllowed){if(E(e)){A();t=true}D(t,"#followUpControls")}D(T(e),"#mailing-bcc-recipients");var i=x(e)?n.campaignEnableTargetGroups:true;D(i,"#mailingTargets")}function D(e,t){var i=$(t);if(i){if(e){i.removeClass("hidden");i.show()}else{i.hide()}}}this.addAction({change:"change-mediatype"},(function(){var e=$(this.el);var t=k(e);N(e,t);M()}));function k(e){return e.find("input:checkbox:first").is(":checked")}function O(){var e=$("#tile-mediaTypes").find(".list-group");var t=R();e.empty();t.forEach((function(t){e.append(t)}))}function R(){return $("#tile-mediaTypes").find(".list-group li").toArray().sort((function(e,t){var i=$(e);var n=$(t);if(!k(i)&&k(n))return 1;if(k(i)&&!k(n))return-1;return i.data("priority")-n.data("priority")}))}function N(e,t){O();L(e,t)}function P(){if(n.isMailingGrid){return}const e=$("#tile-mediaTypes").find('[data-mediatype="email"]');if(!k(e)){$("#frame-tile").remove();$("#email-tile").remove()}}function I(){const e=$("#frame-tile").length&&$("#email-tile").length;if(!e){const e=$("#email-tile-template").html();const t=$("#frame-tile-template").html();const i=$("#base-info-tile");i.after(e);i.after(t)}}function M(){I();P();var e=$("#mediatypes-tile");$("#tile-mediaTypes").find(".list-group li").toArray().filter((function(e){return $(e).data("mediatype")!=="email"&&$(e).data("mediatype")!=="post"})).reverse().forEach((function(t){var i=$(t);var n=i.data("mediatype");$("#"+n+"-tile").remove();if(k(i)){var r=AGN.Lib.Template.dom(n+"-tile-template");e.after(r)}}));AGN.Lib.Form.get($("#mailingSettingsForm")).initFields();AGN.Lib.CoreInitializer.run("tab-toggle");AGN.Lib.CoreInitializer.run("ace");AGN.Lib.CoreInitializer.run("select")}function L(e,t){if(t){e.find("label").after("          <div class='list-group-item-controls'>              <a href='#' data-action='prioritise-mediatype-down'>                <i class='icon icon-chevron-circle-down'></i>              </a>              <a href='#' data-action='prioritise-mediatype-up'>               <i class='icon icon-chevron-circle-up'></i>              </a>          </div>      ")}else{e.find(".list-group-item-controls").remove()}}this.addAction({click:"prioritise-mediatype-up"},(function(){H($(this.el).closest("li"),true)}));this.addAction({click:"prioritise-mediatype-down"},(function(){H($(this.el).closest("li"),false)}));function F(e){var t=e.prev();var i=e.attr("data-priority");e.attr("data-priority",t.attr("data-priority"));t.attr("data-priority",i);t.before(e)}function G(e){var t=e.next();var i=e.attr("data-priority");e.attr("data-priority",t.attr("data-priority"));t.attr("data-priority",i);t.after(e)}function W(e,t){return t&&e.prev().length||!t&&e.next().length&&k(e.next())}function H(t,i){var n=e.getWrapper(t);u=true;if(W(t,i)){if(i){F(t)}else{G(t)}n.dirty("setAsDirty");M()}}this.addAction({submission:"save"},(function(){const t=e.get(this.el);$("#tile-mediaTypes").find(".list-group li").toArray().forEach((function(e){const i=$(e);const n=i.data("mediatype");t.setValueOnce(n+"Mediatype.priority",i.data("priority"))}));j(t);t.submit()}));function j(e){_.each(d(),(function(t,i){e.setValueOnce("params["+i+"].name",t.name);e.setValueOnce("params["+i+"].value",t.value);e.setValueOnce("params["+i+"].description",t.description)}))}function B(e,t){return e.find("[data-param-"+t+"]").val()}this.addAction({input:"count-text-chars",textarea:"count-text-chars","editor:create":"count-textarea-chars","editor:change":"count-textarea-chars"},(function(){f(this.el)}))}));AGN.Lib.Controller.new("mailing-styles",(function(){function e(){const e=$("form#mailingStylesForm");const t=$("form#mailingPreviewForm");const i=e.find('input[name^="styles["]');$.each(i,(function(e,i){const n=$(i);const r=n.attr("name");const o=t.find('input[name="'+r+'"]');o.val(n.val())}));t.submit()}this.addAction({submission:"updatePreview"},(function(){e()}));this.addAction({click:"updateMailingPreview"},(function(){e()}));this.addAction({click:"saveMailingStyles"},(function(){$("form#mailingStylesForm").submit()}))}));AGN.Lib.Controller.new("mailinglist-list",(function(){var e=null;function i(){var e=$(".js-data-table-body");if(e.exists()){var t=e.data("_table");if(t&&t.api){return t.api}}return null}function n(i){var n=$.Deferred();if(i&&i.length){var r=$.ajax(e.urls.MAILINGLIST_BULK_DELETE,{method:"POST",traditional:true,data:{bulkIds:i}}).fail((function(){n.reject()}));AGN.Lib.Confirm.request(r).done((function(e){AGN.Lib.Page.render(e)})).then(n.resolve,n.reject)}else{n.reject();AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")}return n.promise()}this.addDomInitializer("mailinglist-list",(function(){e=this.config}));this.addAction({click:"bulk-delete"},(function(){var e=i();if(e){var t=e.getSelectedRows();var r=t.map((function(e){return e.id}));n(r).done((function(){e.updateRowData({remove:t})}))}}))}));AGN.Lib.Controller.new("manage-table-import",(function(){const e=AGN.Lib.Form;var t="#new-default-column-format";var i="#new-default-column-value";var n="#new-default-column-encrypted";var r=".manage-tables-mapping-row";var o=AGN.Lib.Template;var a=null;var s;var l;this.addDomInitializer("manage-table-import",(function(){a=this.config;u(a.mappings)}));this.addAction({click:"add-default-column"},(function(){var e=$(r).length;var s=$(t).val(),l=$(i).val(),u=!!$(n).prop("checked"),c=$("#new-default-column-type").val();if("value"===c&&!(l.startsWith("'")&&l.endsWith("'"))){l="'"+l+"'"}var d=o.dom("manage-tables-import-row",{index:e,targetColumns:a.importColumns,format:s,value:l,encrypted:u});$("#manage-tables-tbody").append(d);$(t).val("");$(i).val("");$(n).prop("checked",false)}));this.addAction({click:"delete-mapping-row"},(function(){var e=this.el,t=e.parents(r),i=e.parents("tbody");t.remove();h(i.find(r))}));this.addAction({click:"create-mapping"},(function(){const t=e.get(this.el);$.ajax(a.urls.CREATE_MAPPINGS,{type:"POST",dataType:"json",enctype:"multipart/form-data",processData:false,contentType:false,data:t.data()}).done((function(e){if(e.success===true){u(e.data);AGN.Lib.JsonMessages(e.popups)}else{AGN.Lib.JsonMessages(e.popups)}}))}));this.addAction({click:"import-data"},(function(){const t=this.el.data("url");const i=e.get($("#form"));i.setActionOnce(t);p(i)}));function u(e){s=$("#manage-tables-tbody");s.html("");l=o.prepare("column-mapping-table-row");for(var t=0;t<e.length;t++){const i=e[t];f(t,i.id,i.sourceColumn,i.targetColumn,i.mandatory,i.encrypted,i.format,i.defaultValue)}}function c(){if(!s||!s.length){return[]}return _.map(s.find("[data-mapping-row]"),(function(e){const t=$(e);return{sourceColumn:d(t,"fileColumn"),targetColumn:d(t,"db-column"),mandatory:d(t,"mandatory"),encrypted:d(t,"encrypted"),defaultValue:d(t,"defaultValue"),format:d(t,"format")}}))}function d(e,t){const i=e.find("[data-mapping-"+t+"]");if(i.is(":checkbox")){return i.is(":checked")}return i.val()}function f(e,t,i,n,r,o,a,u){const c=l({index:e,id:t,fileColumn:i,databaseColumn:n,mandatory:r,encrypted:o,format:a,defaultValue:u});s.append(c);const d=$('[data-mapping-row="'+e+'"]').find("[data-mapping-db-column]");AGN.Lib.CoreInitializer.run("select",d)}this.addAction({submission:"save"},(function(){const t=e.get(this.el);p(t)}));function p(e){_.each(c(),(function(t,i){e.setValueOnce("mappings["+i+"].sourceColumn",t.sourceColumn);e.setValueOnce("mappings["+i+"].targetColumn",t.targetColumn);e.setValueOnce("mappings["+i+"].mandatory",t.mandatory);e.setValueOnce("mappings["+i+"].encrypted",t.encrypted);e.setValueOnce("mappings["+i+"].defaultValue",t.defaultValue);e.setValueOnce("mappings["+i+"].format",t.format)}));e.submit()}function h(e){var t=0;e.each((function(){var e=$(this);var i=e.find('[name*="mappings["]');i.each((function(){var e=$(this);var i=e.attr("name");i=i.replace(/mappings\[\d+]/g,"mappings["+t+"]");e.attr("name",i)}));t++}))}}));AGN.Lib.Controller.new("manage-tables-viewfield",(function(){var e="true";this.addAction({change:"typeFieldChangeAction"},(function(){var t=$("#nullable");if(this.el.val()==="DATE"||this.el.val()==="DATETIME"){e=t.val();t.val("true")}else{t.val(e)}}))}));AGN.Lib.Controller.new("mediapool-element-category-select",(function(){var e=AGN.Lib.Confirm,t=AGN.Lib.Helpers,i=AGN.Lib.Select;this.addDomInitializer("mediapool-element-category-select",(function(e){var n=t.objFromString(e.data("config"));if(n&&n.categoryId){i.get($("#mediapool-file-category-id")).selectValueOrSelectFirst(n.categoryId)}}));this.addAction({change:"selectCategory"},(function(){var e=this.el.parents(".form-group");e.removeClass("has-alert has-feedback js-form-error");e.find(".js-form-error-msg").addClass("hidden")}));this.addAction({click:"applyCategory"},(function(){var t=$("#mediapool-file-category-id");var i=parseInt(t.val());if(i>0){e.get(this.el).positive({categoryId:i})}else{var n=t.parents(".form-group");n.addClass("has-alert has-feedback js-form-error");n.find(".js-form-error-msg").removeClass("hidden")}}))}));AGN.Lib.Controller.new("mediapool-overview",(function(){var e=AGN.Lib.Helpers;var i=AGN.Lib.Template;var n=AGN.Lib.Confirm;var r=AGN.Lib.Form;var o=AGN.Lib.Page;var a;var s;var l;function u(e){var t=i.dom("modal-replace-image",e);t.find("form").data("selected-file",e.file);if(e.preview){t.find("#replacement-preview").prop("src",e.preview)}return n.create(t)}function c(e,t){e.all("input, textarea, select, button").prop("disabled",!t)}function d(){$("#duplication-update-fields:not(.hidden)").addClass("hidden")}this.addDomInitializer("mediapool-overview",(function(){s={};a=this.config}));this.addAction({click:"replace-image"},(function(){l=this.el.data("replacement-element-data");var t=$("#replacement-image");e.clearFormField(t);t.trigger("click")}));this.addAction({click:"toggle-overwrite-existing-data"},(function(){var e=this.el;var t=$(e).is(":checked");var i=$(e).closest("table").find('[data-action="change-overwriting-state"]');i.prop("checked",t);i.trigger("change")}));this.addAction({change:"change-overwriting-state"},(function(){var e=$(this.el);var t=e.is(":checked");var i="";var n="";var r=parseInt(e.prop("id").replace("overwrite-",""));var o=$('[name="images['+r+'].id"]').val();if(t&&s[o]){var a=s[o];i=a.title;n=a.categoryId}$("#image-title-"+r).val(i);var l=$("#image-category-id"+r);if(l.data("select2")){l.select2("val",n)}var u=$('[id^="duplication-error-"]:not([hidden])').find('[id^="overwrite-"]:not(:checked)');$("#updateAllData").prop("checked",u.length===0)}));this.addAction({change:"replacement-image"},(function(){d();var e=this.el;var t=e.prop("files");if(t&&t.length&&l){var i=new FileReader;var n=t[0];i.onload=function(e){if(l){u({image:l,file:n,preview:e.target.result})}};i.readAsDataURL(n)}}));this.addAction({"reset-upload":"mediapool-upload-image"},(function(){d()}));this.addAction({"upload:add":"mediapool-upload-image"},(function(){var e=this.data;var t=!$("#duplication-update-fields").hasClass("hidden");f(e.file.name,(function(i){e.file.id=i.data?i.data.id:null;t=!!i.data||t}));if(t){$("#updateAllData").prop("checked",false);$("#duplication-update-fields").removeClass("hidden")}}));function f(e,t){function i(e){if(e.data){s[e.data.id]=e.data}t(e)}$.ajax(a.urls.VERIFY_IMAGE_URL,{data:JSON.stringify({imageName:e}),contentType:"application/json",async:false,type:"POST",success:i})}this.addAction({submission:"submit-image-save"},(function(){var e=this.el;var t=r.get(e);var i=t._dataNextRequest;this.event.preventDefault();var n=1;var o=true;for(key in i){var a=$("[name='images["+n+"].fileName']").val();var s=$("[id='overwrite-"+n+"']").is(":checked");f(a,(function(e){if(e.data&&!s){o=false;$("[name='images["+n+"].id']").val(e.data.id);$("[id='duplication-error-"+n+"']").removeAttr("hidden")}else if(!s){$("[id='duplication-error-"+n+"']").hide()}}));n++}if(o){t.submit()}}));this.addAction({submission:"submit-image-replace"},(function(){var e=this.el;var t=r.get(e);var i=new FormData;$.each(t.data(),(function(e,t){i.append(e,t)}));i.append("file",this.el.data("selected-file"));c(e,false);$.ajax(t.getAction(),{type:"POST",dataType:"html",enctype:"multipart/form-data",processData:false,contentType:false,data:i}).always((function(){c(e,true)})).done((function(e){o.render(e,false)}))}));this.addAction({click:"change-category-bulk"},(function(){var e=this.el.data("form-url");var o=r.get(this.el);var a=o.data();if(!a||!a.bulkId||!a.bulkId.length){AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert");return}n.create(i.text("modal-element-category-select",{categoryId:null})).done((function(t){if(t&&t.categoryId){o.setActionOnce(e);o.setValueOnce("categoryId",t.categoryId);o.submit()}}))}));this.addAction({change:"change-mobile-base"},(function(){var t=$(this.el);var i=e.objFromString(t.data("config"));var n=$("#file-name-"+i.count);var r=i.initialValue;var o=AGN.Lib.Select.get(t).getSelectedValue();var a=o&&o.length>0;var s=a?i.mobilePrefix+o:r;n.val(s);n.prop("readonly",a)}));this.addDomInitializer("ai-images-generation",(function(){p({isFirstRow:true});h({isFirstRow:true})}));function p(e){const t=i.dom("ai-image-generation-important-objects-row",e);$("#important-objects-table").find("tbody").append(t);AGN.runAll(t)}function h(e){const t=i.dom("ai-image-generation-filter-row",e);$("#ai-image-filters-table").find("tbody").append(t);AGN.runAll(t);AGN.Lib.Field.create(t)}this.addAction({change:"disable-important-objects"},(function(){const e=$("#important-objects-table");g(this.el,e)}));this.addAction({click:"add-important-object"},(function(){const e=this.el.closest("[data-important-object-row]");const t=C(e);const i=e.find(":input");i.each((function(){const e=$(this);e.val("").trigger("change");const t=e.closest(".js-colorpicker");if(t.exists()){t.data("colorpicker").updateComponent("transparent")}}));p(_.extend({isFirstRow:false},t))}));this.addAction({click:"remove-important-object"},(function(){this.el.closest("[data-important-object-row]").remove()}));this.addAction({change:"disable-image-generation-filters"},(function(){const e=$("#ai-image-filters-table");g(this.el,e);disable-image-generation-filters}));function g(e,t){const i=!e.is(":checked");t.toggleClass("disabled",i);t.find(":input, button").prop("disabled",i)}this.addAction({click:"add-generation-filter"},(function(){const e=this.el.closest("[data-image-generation-filter-row]");const t=A(e);h(_.extend({isFirstRow:false},t))}));this.addAction({click:"remove-generation-filter"},(function(){this.el.closest("[data-image-generation-filter-row]").remove()}));this.addAction({click:"generate-ai-image"},(function(){const e=r.get(this.el);v(e);y(e);e.jqxhr().done((function(e){if(e.success){m(e.data.remainingGenerationsCount);const t=$("#ai-generated-image");t.attr("src",e.data.url);t.removeClass("hidden");$("#save-generated-img-btn").removeClass("hidden")}else{AGN.Lib.JsonMessages(e.popups)}}))}));function m(e){if(e<=0){$("#remaining-generations-text").text(t(`mediapool.imageGeneration.limitExceeded`));$("#generate-btn").remove()}else{$("#remaining-generations-text").text(t(`mediapool.imageGeneration.remainingGenerations`,e))}}function v(e){b().forEach((function(t,i){Object.keys(t).forEach((function(n){e.setValueOnce("importantObjects["+i+"]"+"."+n,t[n])}))}))}function y(e){const t=_.groupBy(w(),"name");_.forEach(t,(function(t,i){const n=_.map(t,"value");e.setValueOnce("filters["+i+"]",n)}))}this.addAction({click:"save-generated-ai-image"},(function(){const e=$("#ai-generated-image").attr("src");$.post(AGN.url("/mediapool/content/images/saveGenerated.action"),{url:e}).done((function(e){o.render(e)}))}));function b(){if($("#important-objects-table").hasClass("disabled")){return[]}return $("[data-important-object-row]:not(:first)").map((function(){return C($(this))})).get()}function w(){if($("#ai-image-filters-table").hasClass("disabled")){return[]}return $("[data-image-generation-filter-row]:not(:first)").map((function(){return A($(this))})).get()}function C(e){return{objects:e.find("[data-row-objects]").val(),objectColors:e.find("[data-row-objects-colours]").val(),amount:e.find("[data-row-amount]").val(),layout:e.find("[data-row-layout]").val()}}function A(e){return{name:e.find("[data-row-filter-name]").val(),value:e.find("[data-row-filter-value]").val()}}}));AGN.Lib.Controller.new("news-editor",(function(){var e=AGN.Lib.Template;var t=["de","en"];var i=0;this.addDomInitializer("news-editor-init",(function(){var e=$('input[name="newsId"]').val();var t=$(".existent-news");if(t&&t.length>0&&e==0){$(t).each((function(){var e=$(this).find(".existent-news-language").val();var t=$(this).find(".existent-news-title").val();var i=$(this).find(".existent-news-content").val();n(e,t,i);o();r();$(this).remove()}))}else if(e==0){n(u(),"","");o();r()}}));this.addAction({click:"addNewsContent"},(function(){n(u(),"","");o();r()}));this.addAction({click:"removeNewsContent"},(function(){var e=$(this.el).closest(".l-news-content-block");$(e).remove();o();r();a()}));this.addAction({change:"changeLanguage"},(function(){a()}));function n(t,n,r){if(t!=""){var o=e.dom("news-content-template-row",{lang:t,index:i,title:n,content:r});if($("#news-content-editor > .l-news-content-block").length==0){$("#news-content-editor").append('<div class="tile-separator"></div>')}o.appendTo("#news-content-editor");AGN.runAll(o);a();i++}}function r(){var e=l();var i=$("#news-content-editor > .l-news-content-block").last().find("input[name='index']").val();if(t.length==e.length){$("#add-news-"+i).hide()}else{$("#add-news-"+i).show()}}function o(){var e=$("#news-content-editor > .l-news-content-block");$("button[id^='add-news-']").hide();var t=$(e).first().find("input[name='index']").val();if(e.length==1){$("#delete-news-"+t).hide()}else{$("#delete-news-"+t).show()}}function a(){var e=s();$("#news-content-editor > .l-news-content-block").find("select.news-language").each((function(){$("option",this).not(":selected").remove();var t=$(this);$.each(e,(function(e,i){$(t).append($("<option>",{value:i,text:i}))}))}))}function s(){var e=[];var i=l();$.each(t,(function(t,n){if($.inArray(n,i)==-1){e.push(n)}}));return e}function l(){var e=$("#news-content-editor > .l-news-content-block").find("select.news-language").find("option:selected");return e.map((function(){return $(this).val()})).toArray()}function u(){var e=l();var i="";if(e.length==0){i=t[0]}else{$.each(t,(function(t,n){if(e.indexOf(n)<0){i=n;return false}}))}return i}}));AGN.Lib.Controller.new("notification-global-stat",(function(){this.addAction({change:"selectReportType"},(function(){var e=$("#globalStatInfo");switch(this.el.val()){case"STATUS":n(false,true,false);e.show();break;case"BROWSER":n(false,false,true);e.hide();break;case"PROGRESS":n(true,false,false);e.show();break}}));this.addAction({click:"close"},(function(){var e=$("#notifications-container");e.fadeOut("slow",(function(){e.remove()}))}));this.addAction({click:"refreshStat"},(function(){r()}));this.addAction({change:"select-month"},(function(){r()}));this.addAction({change:"select-year"},(function(){r()}));this.addAction({click:"weekProgressStat"},(function(){$("#selectMode").val("WEEK");e(false,false);r();i(true,false,false)}));this.addAction({click:"monthProgressStat"},(function(){$("#selectMode").val("MONTH");e(true,false);$("#refreshStat").show();i(false,true,false);r()}));this.addAction({click:"dateRangeProgressStat"},(function(){$("#selectMode").val("RANGE");e(false,true);$("#refreshStat").show();i(false,false,true);r()}));this.addAction({change:"end-date-change"},(function(){var e=$("#startDay").val();var t=$("#endDay").val();$("#startDay").pickadate("picker").set("max",t);$("#endDay").pickadate("picker").set("min",e);r()}));this.addAction({change:"start-date-change"},(function(){var e=$("#startDay").val();var t=$("#endDay").val();$("#startDay").pickadate("picker").set("max",t);$("#endDay").pickadate("picker").set("min",e);r()}));function e(e,t){$("#month-progress-stat").hide();$("#daterange-progress-stat").hide();if(e){$("#month-progress-stat").show()}if(t){$("#daterange-progress-stat").show()}}function i(e,t,i){$("#weekProgressStat").removeClass("active");$("#monthProgressStat").removeClass("active");$("#dateRangeProgressStat").removeClass("active");if(e){$("#weekProgressStat").addClass("active")}if(t){$("#monthProgressStat").addClass("active")}if(i){$("#dateRangeProgressStat").addClass("active")}}function n(e,t,i){$("#notificationGlobalStatusStat").hide();$("#notificationGlobalBrowserStat").hide();$("#notificationGlobalProgressStat").hide();if(e){AGN.Lib.DomInitializer.try("notification-global-progress-stat");$("#notificationGlobalProgressStat").show();$("#dateSelectMode").show();$("#dateModeControls").show()}if(t){AGN.Lib.DomInitializer.try("notification-global-status-stat");$("#notificationGlobalStatusStat").show();$("#dateSelectMode").hide();$("#dateModeControls").hide()}if(i){AGN.Lib.DomInitializer.try("notification-global-browser-stat");$("#notificationGlobalBrowserStat").show();$("#dateSelectMode").hide();$("#dateModeControls").hide()}}function r(){$("#notifications-container").remove();if(o()){if($("#monthProgressStat").attr("class")=="active"||$("#dateRangeProgressStat").attr("class")=="active"){AGN.Lib.DomInitializer.try("notification-global-progress-stat")}}}function o(){if($("#dateRangeProgressStat").attr("class")=="active"){var e=$("#startDay").val();var t=$("#endDay").val();if(a(e)||a(t)){s();return false}if(new Date(e).getTime()>new Date(t).getTime()){s();return false}}return true}function a(e){return typeof e==="undefined"||e==""}function s(){AGN.Lib.Messages(t("defaults.error"),t("error.statistic.period_format"),"alert");setTimeout((function(){var e=$("#notifications-container");e.fadeOut("slow",(function(){e.remove()}))}),7e3)}}));AGN.Lib.Controller.new("notification-schedule",(function(){var e,t,i,n;this.addDomInitializer("notification-schedule",(function(r){e=r.find("#startDate");t=r.find("#endDate");i=r.find("#startTime");n=r.find("#endTime");e.pickadate("picker").on("set",o);i.on("change",o);t.pickadate("picker").on("set",d);n.on("change",d)}));function r(){var t=e.pickadate("get","select");return t&&new Date(t.obj)}function o(){var e=t.pickadate("picker");var n=r();e.off("set");if(n){var o=c(n);l(n,o);s(o);u(i.val())}else{l(true,false);s(null);u(null)}e.on("set",d)}function a(){var e=r();if(e){l(e,c(e))}else{l(true,false)}}function s(e){var i=t.pickadate("picker");if(e){i.set("select",e)}else{i.clear()}}function l(e,i){var n=t.pickadate("picker");n.set("min",e);n.set("max",i);n.set("select",n.get("select"))}function u(e){n.val(e)}function c(e){var t=new Date(e);t.setDate(t.getDate()+28);return t}function d(){t.removeClass("enableable");n.removeClass("enableable");t.pickadate("off","set");n.unbind("change");e.pickadate("off","set");e.pickadate("picker").on("set",a);i.unbind("change");i.on("change",a)}}));AGN.Lib.Controller.new("notification-settings",(function(){this.addAction({"editor:create":"content","editor:change":"content"},(function(){var e=this.el.val().length;$("#contentSize").text(t("fields.content.charactersEntered",e))}))}));AGN.Lib.Controller.new("preview-header-new",(function(){var e=this;this.addInitializer("set-preview-customer-options",(function(){var e=$('[name="useCustomerEmail"]:checked').val()=="true";$('[name="customerEmail"]').prop("disabled",!e);$("#btnCustomEmailRefresh").prop("disabled",!e);$('select[name="customerID"]').prop("disabled",e)}));this.addAction({change:"change-preview-customer-options"},(function(){e.runInitializer("set-preview-customer-options")}))}));AGN.Lib.Controller.new("profile-field-view",(function(){const e=AGN.Lib.Form;var t;this.addDomInitializer("profile-field-view",(function(){t=this.config}));this.addAction({submission:"submit-profile-field-save"},(function(){const i=this.el;const n=$("span[class*='icon-state-']");i.find(n).each((function(){const e=$(this);e.show();e.closest(".form-group").addClass("has-feedback")}));const r=e.get(i);if(t.targetUrl){r.setValueOnce("targetUrl",t.targetUrl)}r.submit()}))}));AGN.Lib.Controller.new("recipient-import-errors-edit",(function(){const e=AGN.Lib.Page;this.addDomInitializer("recipient-import-errors-edit",(function(){if(t()){e.reload(AGN.url("/recipient/import/chooseMethod.action?cancelImport=true"))}else{window.onbeforeunload=function(){return"If you leave the page, the import will be canceled automatically!"}}}));function t(){if(typeof performance==="undefined"||typeof performance.getEntriesByType!=="function"){return false}const e=performance.getEntriesByType("navigation");if(e.length>0){return e[0].type==="reload"&&e[0].name===window.location.href}return false}this.addAction({submission:"save-errors"},(function(){i();const e=AGN.Lib.Form.get(this.el);e.submit("static")}));this.addAction({click:"ignore-errors"},(function(){i();e.reload(AGN.url("/recipient/import/errors/ignore.action"))}));this.addAction({click:"cancel"},(function(){i();e.reload(AGN.url("/recipient/import/cancel.action"))}));function i(){window.onbeforeunload=null}}));AGN.Lib.Controller.new("recipient-import-view",(function(){this.addAction({click:"delete-file"},(function(){const e=$.post(AGN.url("/recipient/import/file/delete.action"));e.done((function(){$("#uploaded-file-container").remove();$("#uploadFile").removeClass("hidden").prop("disabled",false)}))}));this.addDomInitializer("recipient-import-view",(function(){const e=this.config.attachmentCsvFileID;if(e>0){const e=$("#useCsvUpload");e.prop("checked",true);e.trigger("change")}}))}));AGN.Lib.Controller.new("recipient-list",(function(){var e=AGN.Lib.Action,i=AGN.Lib.Modal,n=AGN.Lib.Form,r=AGN.Lib.Messages,o=AGN.Lib.Storage;const a="_advanced";const s="-1";var l={};var u=false;var c;var d;var f;e.new({"qb:invalidrules":"#targetgroup-querybuilder"},(function(){r(t("defaults.error"),t("querybuilder.errors.invalid_definition"),"alert")}));this.addDomInitializer("recipient-list",(function(){p(this.config,false)}));this.addDomInitializer("recipient-duplicate-list",(function(){p(this,true)}));this.addAction({enterdown:"search-recipient"},(function(){u=true}));function p(e,t){d=$("#basicSearch");f=$("#advancedSearch");d.on("click",(function(){m()}));f.on("click",(function(){v()}));if(!y()){c=$("#tab-basicSearch").find('[data-action="change-mailinglist-id"]').val();m()}if(y()){c=$("#tab-advancedSearch").find('[data-action="change-mailinglist-id"]').val();v()}if(t){h()}else{g(e)}w()}function h(){var e=$("#recipientForm").find(".table-controls .well");e.first().html(e.last().html())}function g(e){u=false;if(e&&e.initialRules){l=$.extend({},JSON.parse(e.initialRules))}var t=$("#targetgroup-querybuilder");t.on("change",(function(){$("#target-group-save-button").toggleClass("hidden",!S())}));t.on("afterClear.queryBuilder",(function(){$("#target-group-save-button").toggleClass("hidden",true)}));t.on("afterReset.queryBuilder "+"afterDeleteGroup.queryBuilder "+"afterDeleteRule.queryBuilder "+"afterSetRules.queryBuilder "+"afterUpdateRuleFilter.queryBuilder",(function(e){$("#target-group-save-button").toggleClass("hidden",!S())}))}function m(){$("input[name=advancedSearch]").val(false);b();C(true,true);C(false,false)}function v(){$("input[name=advancedSearch]").val(true);C(false,true);C(true,false)}function y(){return!d.hasClass("tab active")&&f.hasClass("tab active")}this.addAction({validation:"search-recipient"},(function(){if(u){var e=this.data;this.data=_.merge({},e,{ignore_qb_validation:false,skip_empty:false})}else if(this.data&&this.data.ignore_qb_validation){b()}}));this.addAction({submission:"search-recipient"},(function(){if(u){var e=$("input[name=advancedSearch]").val();if(e==true){E()}else{A()}x($(this.el),{ignore_qb_validation:false})}}));function b(){var e=T();if(e){e.clearErrors();e.setRules(l);E()}}this.addAction({click:"target-group-save"},(function(){var e=T();if(e){e.clearErrors()}var t=n.get($(this.el));var r=t.validate(_.merge({},t.validatorOptions,{ignore_qb_validation:false,skip_empty:false}));if(r){i.createFromTemplate({},"target-group-save")}}));function w(){const e=c===s;if(e||!y()){$("#search_recipient_type").prop("disabled",e);$("#search_recipient_state").prop("disabled",e)}if(e||y()){$("#search_recipient_type_advanced").prop("disabled",e);$("#search_recipient_state_advanced").prop("disabled",e)}}this.addAction({change:"change-target-group"},(function(){var e=$("#search_targetgroup").val();$("#search_targetgroup_advanced").select2("val",e)}));this.addAction({change:"change-recipient-type"},(function(){var e=$("#search_recipient_type").val();$("#search_recipient_type_advanced").select2("val",e)}));this.addAction({change:"change-user-status"},(function(){var e=$("#search_recipient_state").val();$("#search_recipient_state_advanced").select2("val",e)}));this.addAction({change:"change-target-group-advanced"},(function(){var e=$("#search_targetgroup_advanced").val();$("#search_targetgroup").select2("val",e)}));this.addAction({change:"change-recipient-type-advanced"},(function(){var e=$("#search_recipient_type_advanced").val();$("#search_recipient_type").select2("val",e)}));this.addAction({change:"change-user-status-advanced"},(function(){var e=$("#search_recipient_state_advanced").val();$("#search_recipient_state").select2("val",e)}));this.addAction({click:"choose-advanced-search"},(function(){if(A()){x($(this.el),{ignore_qb_validation:false})}}));this.addAction({click:"toggle-recipient-tab"},(function(){var e=$(this.el);var t=$('[data-action="toggle-recipient-tab"]');_.each(t,(function(e){o.set("toggle_tab"+$(e).data("tab-id"),{hidden:true})}));o.set("toggle_tab"+e.data("tab-id"),{hidden:false});var i=e.data("url");if(!!i){window.location.href=i}}));this.addAction({click:"reset-search"},(function(){$("#search_first_name").val("");$("#search_name").val("");$("#search_email").val("");$("#search_mailinglist").select2("val",0);$("#search_targetgroup").select2("val",0);$("#search_recipient_type").select2("val","");$("#search_recipient_state").select2("val",0);$("#search_mailinglist_advanced").select2("val",0);$("#search_targetgroup_advanced").select2("val",0);$("#search_recipient_type_advanced").select2("val","");$("#search_recipient_state_advanced").select2("val",0);D();x($(this.el),{ignore_qb_validation:false})}));this.addAction({click:"createNewTarget"},(function(){var e=T();if(e){e.clearErrors()}var t=n.get($(this.el));var i=t.validate(_.merge({},t.validatorOptions,{ignore_qb_validation:false,skip_empty:false}));if(i){AGN.Lib.Confirm.createFromTemplate({rules:t.get$().find('[name="searchQueryBuilderRules"]').val()},"new-targetgroup-modal").done((function(e){t.updateHtml(e)}))}}));this.addAction({change:"change-mailinglist-id"},(function(){c=$(this.el).select2("val");w()}));this.addAction({click:"refresh-basic-search"},(function(){A();x($(this.el),{ignore_qb_validation:false})}));this.addAction({click:"refresh-advanced-search"},(function(){E();x($(this.el),{ignore_qb_validation:false})}));function C(e,t){const i=e?a:"";const n=["#search_mailinglist","#search_altg","#search_targetgroup"];if(c!==s||t){n.push("#search_recipient_type","#search_recipient_state")}n.forEach((function(e){$(e+i).prop("disabled",t)}))}function A(){var e={firstname:$("#search_first_name").val().trim(),lastname:$("#search_name").val().trim(),email:$("#search_email").val().trim()};var t=Object.keys(e).map((function(t){return{id:t,value:e[t],operator:"like"}}));return O(t,true)}function E(){var e=k(["firstname","lastname","email"]);$("#search_first_name").val(e.firstname);$("#search_name").val(e.lastname);$("#search_email").val(e.email)}function x(e,t){var i=n.get(e);i.submit("",_.merge({ignore_qb_validation:true,skip_empty:true},i.validatorOptions,t))}function T(){return $("#targetgroup-querybuilder").prop("queryBuilder")}function S(){var e=T();if(e){return e.containsNotEmptyRule()}else{return false}}function D(){var e=T();if(e){e.clearErrors();return e.reset()}else{return false}}function k(e){var t=T();var i={};if(t){var n=t.getRules({allow_invalid:true,skip_empty:true});e.forEach((function(e){var r=t.findRuleByField(n,e,true);i[e]=r?r.value:""}))}return i}function O(e,t){var i=T();if(i){return e.reduce((function(e,n){var r=i.getRules({allow_invalid:true,skip_empty:true});if(n.id){if(n.value){return i.setOrReplaceRule(r,n,t)===true||e}else{return i.deleteRuleByField(null,n.id,t)===true||e}}else{return e}}),false)}else{return false}}}));AGN.Lib.Controller.new("recipient-statistics-view",(function(){this.addAction({change:"type-change"},(function(){const e=this.el;var t=e.find("option:selected");const i=$("#mailinglist-select");if(t.is("[data-mailinglist-required]")&&i.val()==="0"){AGN.Lib.Select.get(i).selectNext()}AGN.Lib.Form.get(e).submit()}))}));AGN.Lib.Controller.new("recipient-view",(function(){var e="OK";var i="USED";var n="BLACKLISTED";var r=AGN.Lib.Form,o=AGN.Lib.Confirm,a=AGN.Lib.Template,s=AGN.Lib.Tile;var l;var u=false;var c;this.addDomInitializer("recipient-view",(function(o){var a=r.get(o);var s=this;c=this.config;l=new f(s.config.urls.CHECK_ADDRESS,(function(r){var o=r.status;switch(o){case e:a.cleanFieldError("email");break;case i:var l=s.config.urls.EXISTING_USER_URL_PATTERN.replace(":recipientID:",r.recipientID);var u='<div style="display: flex; width: 100%; justify-content: space-between; align-items: center;">'+t("error.inUse")+'<a href="'+l+'" class="btn btn-regular btn-inverse">'+t("recipient.existing.btn")+"</a>"+"</div>";a.showFieldError("email",u,true);break;case n:a.showFieldError("email",t("error.isBlacklisted"),true);break}}));$("#recipient-email").on("change input",_.debounce((function(){l.check($(this).val())}),300));d()}));this.addAction({mouseleave:"toggleSaveAndBack"},(function(){var e=this.el;var t=e.parent();setTimeout((function(){if(!u&&!e.is(":hover")){t.removeClass("open")}}),400)}));this.addAction({mouseenter:"toggleSaveAndBack"},(function(){this.el.parent().addClass("open")}));this.addAction({mouseenter:"toggleSubmenuSaveAndBack"},(function(){u=true}));this.addAction({mouseleave:"toggleSubmenuSaveAndBack"},(function(){u=false;this.el.closest(".dropdown").removeClass("open")}));this.addAction({submission:"recipient-save"},(function(){var e=r.get(this.el);var i=$("#recipient-email").val();this.event.preventDefault();var n=function(){$.post(c.urls.CHECK_MATCH_ALTG,e.params()).done((function(t){if(t.popups&&t.popups.alert&&t.popups.alert.length>0){AGN.Lib.JsonMessages(t.popups)}else if(!t.success||t.success.length===0){o.create(a.text("hide-recipient-confirmation-modal")).done((function(){e.setActionOnce(c.urls.SAVE_AND_BACK_TO_LIST);e.submit()}))}else{e.submit()}})).fail((function(){e.submit()}))};if(l&&i&&i.trim()){l.jqxhr(i.trim()).done((function(e){if(e.isBlacklisted===true){o.create(a.text("email-confirmation-modal",{question:t("recipient.blacklisted.question")})).done((function(){if(e.inUse===true){o.create(a.text("email-confirmation-modal",{question:t("recipient.duplicate.question")})).done(n)}else{n()}}))}else if(e.inUse===true){o.create(a.text("email-confirmation-modal",{question:t("recipient.duplicate.question")})).done(n)}else{n()}})).fail(n)}else{n()}}));function d(){$(".not-allowed-usertype").each((function(){const e=$(this);if(e.prop("selected")){e.parent("select").prop("disabled",true)}else{e.prop("disabled",true)}}))}function f(e,t){this.url=e;this.running=false;this.callback=$.isFunction(t)?t:$.noop;this.lastAddress=null;this.lastResult=null;this.scheduledCheck=null}f.prototype.jqxhr=function(e){return $.get(this.url,{email:e})};f.prototype.scheduleCheck=function(t){var r=this;if(r.scheduledCheck){clearTimeout(r.scheduledCheck)}if(r.running){r.scheduledCheck=setTimeout((function(){r.scheduleCheck(t)}),300)}else{r.running=true;r.lastAddress=null;r.lastResult=null;try{r.jqxhr(t).always((function(){r.running=false})).done((function(o){r.lastAddress=t;r.lastResult={status:o.isBlacklisted===true?n:o.inUse===true?i:e,recipientID:o.existingRecipientId||0};r.report()}))}catch(e){r.running=false}}};f.prototype.check=function(t){t=t?t.trim():"";if(t){if(this.lastAddress==t){this.report()}else{this.scheduleCheck(t)}}else{this.report(e)}};f.prototype.report=function(e){if(arguments.length){this.callback.call(null,e)}else{if(this.lastAddress){this.report(this.lastResult)}}}}));AGN.Lib.Controller.new("reference-table-settings-modal",(function(){$(document).on("shown.bs.modal",".modal[reference-table-settings-modal]",(function(){var e=$(this).find("input[data-associated-with], select[data-associated-with]");e.each((function(){var e=$(this);var t=$(e.data("associated-with"));if(e.is(":checkbox")){e.prop("checked",t.val()==="true")}else{e.val(t.val())}}))}));this.addAction({click:"apply-button"},(function(){var e=$(this.el);var t=AGN.Lib.Form.get(e);var i=t.validate();if(i){var n=e.closest(".modal").find("input[data-associated-with], select[data-associated-with]");n.each((function(){var e=$(this);var t=$(e.data("associated-with"));if(e.is(":checkbox")){t.val(e.prop("checked"))}else{t.val(e.val())}}));AGN.Lib.Modal.getWrapper(e).modal("hide")}}))}));AGN.Lib.Controller.new("sidemenu",(function(){var e=20;var t=AGN.Lib.WebStorage;var i=500;var n=400;var r=1e3/3;this.addAction({mouseenter:"activateSubmenu"},(function(){var e=$(this.el).find(".menu-item");var t=e.next(".submenu");var i=t.find(".subitems");$(".submenu.open").not(t).each((function(){o($(this))}));if(!f()){clearTimeout(e.data("closeTimerId"));t.addClass("open");var n=t.find(".arrow");a(n,t,e);l(n,t,e);e.data("openTimerId",setTimeout((function(){if(t.is(".open")){i.addClass("open")}}),r))}}));this.addAction({click:"switch-to-new-design"},(function(){const e=this.el;$.post(AGN.url("/ui-design/switch.action")).done((function(){e.prop("disabled",true);window.setTimeout((function(){AGN.Lib.Page.reload(e.data("switch-url"))}),500)})).fail((function(){e.prop("checked",!e.prop("checked"))}))}));this.addAction({mouseleave:"activateSubmenu"},(function(){var e=$(this.el).find(".menu-item");var t=e.next(".submenu");var r=t.find(".subitems");if(!f()){clearTimeout(e.data("openTimerId"));var a=r.is(".open")?i:n;e.data("closeTimerId",setTimeout((function(){o(t)}),a))}}));this.addAction({click:"expandMenu"},(function(){if(f()){c()}else{u()}$(window).trigger("viewportChanged")}));function o(e){e.removeClass("open");e.find(".subitems").removeClass("open")}function a(t,i,n){var r=i.find(".submenu-header");var o=n.scrollTop()+n.offset().top+n.outerHeight()/2-r.outerHeight()/2;var a=n.offset().left+n.outerWidth()+t.outerWidth();var l=$(window);var u=r.outerHeight()+s(i);if(o+u>l.height()+l.scrollTop()){o=l.height()+l.scrollTop()-u-e}if(o-l.scrollTop()<0){o=l.scrollTop()}i.offset({top:o,left:a})}function s(e){return e.find(".subitems").find("li").first().height()*e.find(".subitems").find("li").length}function l(e,t,i){var n=i.offset().top+i.outerHeight()/2-e.outerHeight()/2;e.offset({top:n,left:e.offset().left})}function u(){d(true);$("body").addClass("wide-sidebar")}function c(){d(false);$("body").removeClass("wide-sidebar")}function d(e){if(e!==true){e=false}t.set("is-wide-sidebar",{value:e});$.ajax(AGN.url("/sidebar/ajax/setIsWide.action"),{type:"GET",data:{isWide:e}})}function f(){return $("body").hasClass("wide-sidebar")}}));AGN.Lib.Controller.new("support",(function(){var e=AGN.Lib.Form,i=AGN.Lib.Popover,n=AGN.Lib.JsonMessages;function r(){var e=$("#support-mail-text").val();var i=0;if(e){i=e.length}$("#support-message-length").text(t("fields.content.charactersEntered",i))}this.addDomInitializer("support",(function(){r();$("#support-mail-text").on("change input",_.throttle((function(){r()}),100))}));this.addAction({submission:"send-support-request"},(function(){this.event.preventDefault();e.get(this.el).submit()}));this.addAction({submitted:"send-support-request"},(function(){if(this.data.success){var e=i.get(this.el);if(e){e.hide()}}n(this.data.popups)}))}));AGN.Lib.Controller.new("target-create-mailinglist",(function(){this.addAction({click:"select-mediatype"},(function(){var e=this.el.closest("form");var t=e.find("#createMailinglistOkBtn");if(!e.find('input:checked[name="mediatypes"]').length){t.attr("disabled","disabled")}else{t.removeAttr("disabled")}}))}));AGN.Lib.Controller.new("target-scheduler",(function(){var e=AGN.Lib.ScheduleTimeTable,t=AGN.Lib.ScheduleTimeTable.PeriodRow;var i;this.addAction({submission:"save-scheduler-data"},(function(){var e=AGN.Lib.Form.get($(this.el));e.setValueOnce("intervalAsJson",i.getSubmissionJson("period"));e.submit()}));this.addDomInitializer("target-scheduler-init",(function(n){var r=n.json();if(i){i.clean()}i=new e($("#tile-schedule-time"));var o=[];if(r.intervalAsJson){o=JSON.parse(r.intervalAsJson).map((function(e){return t.deserialize(e)}))}o.forEach((function(e){i.addRow(e)}));if(o.length===0){i.addEmptyPeriodRow()}var a=AGN.Lib.Form.get(n);a.initFields()}))}));AGN.Lib.Controller.new("target-group-view",(function(e){var i=AGN.Lib.Action,n=AGN.Lib.Form,r=AGN.Lib.Editor;i.new({"qb:invalidrules":"#targetgroup-querybuilder"},(function(){AGN.Lib.Messages(t("defaults.error"),t("querybuilder.errors.general"),"alert")}));this.addDomInitializer("target-group-view",(function(){var e=$(this.el);$("[data-toggle-tab]").on("click",(function(t){var i=n.get(e).validate({skip_empty:true});if(!i){t.preventDefault();return false}}));if(this.config.errorPositionDetails){a(this.config.errorPositionDetails)}}));this.addAction({click:"switch-tab-viewEQL"},(function(){var e=this.el,t=AGN.Lib.Form.get($(e));t.setValueOnce("viewFormat","EQL");t.submit("",{skip_empty:true})}));this.addAction({click:"switch-tab-viewQB"},(function(){var e=this.el,t=AGN.Lib.Form.get($(e));t.setValueOnce("viewFormat","QUERY_BUILDER");const i=t.submit("",{skip_empty:true});i.done((function(e){o(e);AGN.Lib.Tab.show($("#eql-editor-tab-trigger"));$("#eql-alert").remove();$("#eql").before(s(e.popups.alert[0]))}))}));this.addAction({submission:"save-target"},(function(){n.get(this.el).submit(this.el.data("submit-type")).done(o)}));function o(e){if(e.success){return}a(e.data);AGN.Lib.JsonMessages(e.popups)}function a(e){const t=r.get($("#eql")).editor;t.focus();t.gotoLine(e.line,e.column)}function s(e){return'<ul = id="eql-alert">'+'         <div class="tile">'+'             <li class="tile-notification tile-notification-alert">'+e+"</li>"+"         </div>"+"    </ul>"}}));AGN.Lib.Controller.new("template-css",(function(){this.addAction({click:"updatePreview"},(function(){var e=$("#layoutPreviewForm");e.find('input[name="css"]').val($("#cssContents").val());e.submit()}));this.addAction({click:"saveLayoutCss"},(function(){var e=AGN.Lib.Form.get($("#gridTemplateForm"));var t=$('#save-css-approve-modal-form select[name="templatesToUpdate"]').val();var i=e.getValue("templateId");if(i){t.push(i)}e.setValueOnce("bulkIds",t);e.submit()}))}));AGN.Lib.Controller.new("template-outer-html-edit",(function(){this.addAction({click:"updatePreview"},(function(){var e=$("#layoutPreviewForm");e.find('input[name="outerHTML"]').val($("#templateOuterHTML").val());e.submit()}));this.addAction({click:"saveOuterHTML"},(function(){$("#gridTemplateForm").submit()}))}));AGN.Lib.Controller.new("template-styles",(function(){function e(){var e=$("form#gridTemplateForm");var t=$("form#layoutPreviewForm");var i=e.find('input[name^="styles."]');$.each(i,(function(e,i){var n=$(i);var r=n.attr("name");var o=t.find('input[name="'+r+'"]');o.val(n.val())}));t.submit()}this.addAction({submission:"updatePreview"},(function(){e()}));this.addAction({click:"updateLayoutPreview"},(function(){e()}));this.addAction({click:"saveLayoutStyles"},(function(){$("form#gridTemplateForm").submit()}))}));AGN.Lib.Controller.new("trackable-link-list",(function(){var e;var t;AGN.Opt.DefaultExtensions={};var i=new AGN.Lib.TrackableLinkExtensions;var n;this.addDomInitializer("trackable-link-list",(function(){t=this.config.KEEP_UNCHANGED;n=this.config.SAVE_ALL_URL;AGN.Opt.DefaultExtensions=this.config.defaultExtensions;if(this.config.scrollToLinkId){r($("#link-"+this.config.scrollToLinkId))}}));this.addDomInitializer("trackable-link-extensions",(function(){i.load(this.config.extensions,s())}));AGN.Lib.Action.new({change:"[id^=link-], #tile-trackableLinkEditAll"},(function(){e=this.el.attr("id")}));this.addAction({scrollTo:"scroll-to"},(function(){if(e){r($(this.el).find("#"+e))}}));this.addAction({click:"save-bulk-actions",enterdown:"description-enterdown, bulkActionExtensionsEnterdown"},(function(){var e=AGN.Lib.Form.get($("#trackableLinkForm"));var t=$("#bulkActionsForm").serializeFormDataObject();e._data={};$.each(t,(function(t,i){e.setValue(t,i)}));e.setValue("modifyAllLinksExtensions",false);o(e);e.setActionOnce(n);e.submit();AGN.Lib.Modal.getWrapper(this.el).modal("hide")}));this.addAction({click:"save",enterdown:"settingsExtensionsEnterdown"},(function(){this.event.preventDefault();var e=AGN.Lib.Form.get($("#trackableLinkForm"));e._data={};e.setValue("modifyBulkLinksExtensions",false);a(e);o(e);e.setActionOnce(n);e.submit()}));function r(e){if(e&&e.length>0){var t=e.closest('[data-sizing="scroll"]');if(t.length>0){var i=t.find(":first-child").offset().top;var n=e.offset().top;t.scrollTop(0);t.scrollTop(n-i)}}}function o(e){_.each(i.collect(),(function(t,i){e.setValue("extensions["+i+"].name",t.name);e.setValue("extensions["+i+"].value",t.value)}))}function a(e){e.setValue("bulkUsage",t);e.setValue("bulkAction",t);e.setValue("bulkDeepTracking",t);e.setValue("bulkStatic",t)}function s(){return l()?$("#bulkActionExtensions tbody"):$("#settingsExtensions tbody")}function l(){return $(".modal").is(":visible")}}));AGN.Lib.Controller.new("trackable-link",(function(){var e=this;var t=new AGN.Lib.TrackableLinkExtensions;this.addDomInitializer("trackable-link-extensions",(function(){t.load(this.config.extensions,$("#extensions tbody"))}));this.addAction({click:"save"},(function(){this.event.preventDefault();var e=AGN.Lib.Form.get($("#trackableLinkForm"));i(e);e.submit("static")}));function i(e){_.each(t.collect(),(function(t,i){e.setValue("extensions["+i+"].name",t.name);e.setValue("extensions["+i+"].value",t.value)}))}this.addAction({change:"link-details-trackable"},(function(){e.runInitializer("trackableAction")}));this.addInitializer("trackableAction",(function(e){var t=$('[data-action="link-details-trackable"] :selected');var i=$("#linkAction");i.prop("disabled",i.prop("disabled")||t.val()==0)}))}));AGN.Lib.Controller.new("userform-view",(function(){var e=AGN.Lib.FormBuilder.FormBuilder;var i=AGN.Lib.Editor;var n=AGN.Lib.Confirm;var r;var o=0;this.addDomInitializer("userform-view",(function(){var e=this.config;r=e.actionURLPattern;o=e.formId;$("#userFormForm").dirty()}));this.addAction({click:"activate-and-test"},(function(){const e=this.el;const t=e.attr("href");n.createFromTemplate({},"userform-activate-and-test").done((function(){$.post(AGN.url("/webform/"+o+"/activate.action")).done((function(i){AGN.Lib.JsonMessages(i.popups,true);if(i.success){$("#is-active-switch").prop("checked",true);e.removeAttr("data-action");window.open(t,"_blank")}}))}))}));this.addAction({change:"change-intro-action"},(function(){var e=$("#startActionLink");var t=this.el.val();c(e,t)}));this.addAction({change:"change-final-action"},(function(){var e=$("#finalActionLink");var t=this.el.val();c(e,t)}));this.addAction({click:"check-velocity-script"},(function(){var e=$(this.el);var t=AGN.Lib.Helpers.objFromString(e.data("action-options"));u(t.type)}));this.addAction({click:"saveUserForm"},(function(){var e=s("successFormBuilder");var t=s("errorFormBuilder");var i=e&&a("successTemplate");var r=t&&a("errorTemplate");if(i||r){n.createFromTemplate({needSuccessCodeChoose:i,needErrorCodeChoose:r},"warning-save-different-tabs")}else{var o=e?"FORM_BUILDER":"HTML";var u=t?"FORM_BUILDER":"HTML";l(o,u)}}));this.addAction({click:"save-specific-code-mode"},(function(){var e=$("#choose-code-format-modal-form");var t=e.find('[name="success_template_mode"]:checked').val();var i=e.find('[name="error_template_mode"]:checked').val();l(t,i)}));this.addAction({change:"formTestRecipient"},(function(){var e=$("#formTestLink");var t=$("#formTestRecipient");e.attr("href",t.val())}));function a(e){var t=CKEDITOR.instances[e];if(t){t.updateElement()}return $("#userFormForm").dirty("isFieldDirty",$("#"+e))}function s(t){if(e.isCreated("#"+t)){return e.get("#"+t).isChanged()}return false}function l(t,n){var r=AGN.Lib.Form.get($("form#userFormForm"));if(e.isCreated("#successFormBuilder")){var o=e.get("#successFormBuilder");if(t==="FORM_BUILDER"){i.get($("#successTemplate")).val(o.generateHtml())}var a=o.getJson();r.setValueOnce("successSettings.formBuilderJson",a);var s=$("#successFormBuilder").find("input:enabled,select:enabled");s.prop("disabled",true)}if(e.isCreated("#errorFormBuilder")){var l=e.get("#errorFormBuilder");if(n==="FORM_BUILDER"){i.get($("#errorTemplate")).val(l.generateHtml())}var u=l.getJson();r.setValueOnce("errorSettings.formBuilderJson",u);var c=$("#errorFormBuilder").find("input:enabled,select:enabled");c.prop("disabled",true)}r.submit();if(s){s.prop("disabled",false)}if(c){c.prop("disabled",false)}}function u(e){var i=AGN.Lib.Editor.get($("#"+e+"Template")).val();if(i.match(/#(?:set|include|macro|parse|if|foreach)/gi)){AGN.Lib.Messages(t("defaults.error"),t("userform.error.velocity_not_allowed"),"alert");var n=$('[data-toggle-tab="#tab-'+e+'-template-html"]');if(n){n.trigger("click")}}}function c(e,t){if(e.exists()){if(t>0){e.attr("href",r.replace(":action-ID:",t));e.removeClass("hidden")}else{e.attr("href","#");e.addClass("hidden")}}}}));AGN.Lib.Controller.new("user|groups-permissions",(function(){var e;this.addDomInitializer("user|groups-permissions",(function(){e=this.config.permissionCategories.map((function(e){return e.subCategories})).flatMap((function(e){return Object.values(e)})).flatMap((function(e){return e.permissions}))}));this.addAction({click:"reset-filter"},(function(){$("#permission-filter").val("").trigger("change");l();u()}));function t(t){e.filter((function(e){return i(e,t)})).forEach((function(e){$('[id="'+e.name+'"]').closest("li").show()}))}this.addAction({click:"apply-filter"},(function(){var e=$("#permission-filter").val();if(!e.length){return}c();t(e);s()}));function i(e,t){var i=false;t.forEach((function(t){if(n(t)(e)){i=true}}));return i}function n(e){switch(e){case"granted":return function(e){return e.granted};case"grantedForUser":return function(e){return e.granted&&!e.showInfoTooltip};case"grantedByGroup":return function(e){return e.showInfoTooltip};case"grantable":return function(e){return!e.granted&&e.changeable};case"notGrantable":return function(e){return!e.granted&&!e.changeable};case"new":return function(e){return e.recent};default:return function(){return true}}}function r(){$(".sub-category-header").each((function(){return $(this).show()}))}function o(){a().each((function(){this.show()}))}function a(){return $(".permission-categories-tile").map((function(){return $(this)}))}function s(){l();a().each((function(){this.toggle(this.has(".list-group-item:visible").length>0)}));$(".sub-category-header").each((function(){return $(this).toggle($(this).next("div").find("li:visible").length>0)}))}function l(){o();r()}function u(){$(".list-group-item").each((function(){$(this).show()}))}function c(){$(".list-group-item").each((function(){$(this).hide()}))}}));AGN.Lib.Controller.new("workflow-list",(function(){var e=null;function i(){var e=$(".js-data-table-body");if(e.exists()){var t=e.data("_table");if(t&&t.api){return t.api}}return null}this.addDomInitializer("workflow-list",(function(){e=this.config}));function n(e,i){var n=$.Deferred();if(e&&e.length){var r=$.ajax(i,{method:"POST",traditional:true,data:{bulkIds:e}}).fail((function(){n.reject()}));AGN.Lib.Confirm.request(r).then(n.resolve,n.reject)}else{n.reject();AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")}return n.promise()}this.addAction({click:"bulk-delete"},(function(){var t=i();if(t){var r=t.getSelectedRows();var o=r.map((function(e){return e.id}));n(o,e.urls.WORKFLOW_BULK_DELETE).done((function(){t.updateRowData({remove:r})}))}}));this.addAction({click:"bulk-deactivate"},(function(){var t=i();if(t){var r=t.getSelectedRows();var o=t.getSelectedNodes();var a=r.map((function(e){return e.id}));n(a,e.urls.WORKFLOW_BULK_DEACTIVATE).done((function(){o.forEach((function(e){e.setDataValue("status",{name:"inactive",messageKey:"default.status.inActive"})}));t.refreshClientSideRowModel("filter");t.deselectAll()}))}}))}));AGN.Lib.Controller.new("workflow-view",(function(){var e=AGN.Lib.WM.Definitions,i=AGN.Lib.WM.Editor,n=AGN.Lib.WM.Node,r=AGN.Lib.WM.EditorsHelper,o=AGN.Lib.WM.MailingEditorHelper,a=AGN.Lib.WM.Dialogs,s=AGN.Lib.WM.MailingSelector,l=AGN.Lib.Confirm,u=AGN.Lib.Template,c=AGN.Lib.WM.Utils,d=AGN.Lib.Select,f=AGN.Lib.WM.DateTimeUtils,p=AGN.Lib.Form;var h=this;var g;if(!jsPlumb.Connectors["FixedBezierConnector"]){jsPlumbUtil.extend(AGN.Opt.Components.JsPlumbFixedBezierConnector,jsPlumb.Connectors.AbstractConnector);jsPlumb.Connectors["FixedBezierConnector"]=AGN.Opt.Components.JsPlumbFixedBezierConnector}this.addDomInitializer("workflow-view",(function(){var t=this.config;e.constants=t.constants;e.workflowId=t.workflowId;e.shortname=t.shortname;var r=t.icons.map(n.deserialize);var o=n.deserializeConnections(t.icons,n.toMap(r));if(g){g.recycle()}g=new i(t.isEditable!==false,t.isContextMenuEnabled!==false,t.isFootnotesEnabled===true);g.setOnInitialized((function(){g.batch((function(){r.forEach((function(e){g.add(e)}));o.forEach((function(e){g.connect(e.source,e.target)}))}));g.updateNodeTitles();g.updateFootnotes();if(e.workflowId===0){e.intialSchema=g.serializeIcons()}}));g.setMinimapEnabled(t.isMinimapEnabled!==false);var a=$("#slider");if(a.exists()){a.slider({min:e.MIN_ZOOM,max:e.MAX_ZOOM,value:e.DEFAULT_ZOOM,step:e.ZOOM_STEP,create:function(){var t=$(this).slider("instance");g.setZoom(e.DEFAULT_ZOOM);g.setOnZoom((function(e){t.value(e)}))},slide:function(e,t){g.setZoom(t.value)}})}if(t.fitPdfPage===true){g.fitPdfPage()}window.waitStatus=t.initializerFinishStatus||""}));this.addDomInitializer("mailing-data-transfer-modal",(function(e){var t=e.find("input[data-mailing-param]");var i=e.find("#transferAllSettings");var n={};var r=[];t.on("change",(function(){var e=$(this);var o=e.data("mailing-param");if(e.prop("checked")){n[o]=true}else{delete n[o]}r=Object.keys(n);i.prop("checked",r.length==t.length)}));i.on("change",(function(){var e=i.prop("checked");t.prop("checked",e);if(e){t.each((function(){n[$(this).data("mailing-param")]=true}));r=Object.keys(n)}else{n={};r=[]}}));this.addAction({click:"transfer-mailing-data"},(function(){l.get(e).positive(r)}))}));this.addDomInitializer("own-workflow-expanding-modal",(function(e){var t=e.find("#workflow-select");var i=e.find('input[name="copyContent"]');this.addAction({click:"expand-own-workflow"},(function(){l.get(e).positive({workflowId:t.val(),copyContent:i.filter(":checked").val()=="true"})}))}));this.addDomInitializer("icon-comment-editor-initializer",(function(){var e=r.registerEditor("icon-comment",{formName:"iconCommentForm",safeToSave:true,fillEditor:function(e){$("#iconComment").val(e.getComment())},saveEditor:function(){r.saveIconComment($("#iconComment").val());this.cancelEditor()},cancelEditor:function(){$("#icon-comment-editor").dialog("close");return false}});h.addAction({click:"icon-comment-editor-save"},(function(){e.saveEditor()}));h.addAction({click:"icon-comment-editor-cancel"},(function(){e.cancelEditor()}))}));this.addDomInitializer("parameter-editor-initializer",(function(){r.registerEditor("parameter",{formName:"parameterForm",getTitle:function(){return t("workflow.parameter")},fillEditor:function(e){var t=$('form[name="'+this.formName+'"]');d.get(t.find("select[name=value]")).setOptions(g.getParametersOptions(e));var i=e.getData();t.submit(false);t.get(0).reset();r.fillFormFromObject(this.formName,i,"")},saveEditor:function(){return r.formToObject(this.formName)}});h.addAction({click:"parameter-editor-save"},(function(){r.saveCurrentEditorWithUndo()}))}));this.addDomInitializer("deadline-editor-initializer",(function(){var i=r.registerEditor("deadline",{panelIds:["fixedDeadlinePanel","delayDeadlinePanel"],timeUnitIds:["deadlineTimeUnitMinute","deadlineTimeUnitHour","deadlineTimeUnitDay","deadlineTimeUnitWeek","deadlineTimeUnitMonth"],formName:"deadlineForm",getDefaultDelayData:function(t){var i={};if(t===e.constants.deadlineTypeDelay&&this.isPrecededByImportIcon){i={timeUnit:e.constants.deadlineTimeUnitHour,delayValue:e.constants.defaultImportDelayLimit}}return i},getTitle:function(){return t("workflow.deadline.title")},fillEditor:function(e){var t=e.getData();$("#deadline-editor").find(".editor-error-messages").css("display","none");this.isPrecededByImportIcon=this.checkPrecededByImportIcon(e);var i=$('form[name="'+this.formName+'"]');i.submit(false);$('form[name="'+this.formName+'"] #deadlineDate').pickadate("picker").set("select",this.dateAsUTC(t.date||new Date));this.fillDelayData(i,t);$('form[name="'+this.formName+'"] #time').val(("0"+t.hour).slice(-2)+":"+("0"+t.minute).slice(-2))},fillDelayData:function(e,t){e.get(0).reset();var i=$('form[name="'+this.formName+'"] input[name="deadlineType"]:checked').val();var n=this.getDefaultDelayData(i);r.fillFormFromObject(this.formName,t,"",n);this.updateVisibility();var o=t.delayValue||n.delayValue;r.initSelectWithValueOrChooseFirst($('form[name="'+this.formName+'"] select[name="delayValue"]'),o)},saveEditor:function(){var e=r.formToObject(this.formName);var t=$('form[name="'+this.formName+'"] #time').val();e.date=$('form[name="'+this.formName+'"] #deadlineDate').pickadate("picker").get("select").obj;e.hour=t.substring(0,2);e.minute=t.substring(3,5);return e},updateVisibility:function(){var t=$('form[name="'+this.formName+'"]');var i=t.find('input[name="deadlineType"]:checked').val();if(this.checkPresentNodeOfType([e.NODE_TYPE_ACTION_BASED_MAILING,e.NODE_TYPE_DATE_BASED_MAILING])){t.find("input#typeFixedDeadline").parent().parent().parent().hide();t.find('input[value="'+e.constants.deadlineTypeDelay+'"]').prop("checked",true);i=e.constants.deadlineTypeDelay}else{t.find("input#typeFixedDeadline").parent().parent().parent().show()}if(i===e.constants.deadlineTypeDelay){this.switchPanelsVisibility("delayDeadlinePanel");this.switchTimeContainerVisibility(false);var n=t.find('select[name="timeUnit"]').val();switch(n){case e.constants.deadlineTimeUnitMinute:this.switchTimeUnitsVisibility("deadlineTimeUnitMinute");break;case e.constants.deadlineTimeUnitHour:this.switchTimeUnitsVisibility("deadlineTimeUnitHour");break;case e.constants.deadlineTimeUnitDay:this.switchTimeUnitsVisibility("deadlineTimeUnitDay");this.switchTimeContainerVisibility(true);$("#deadlineTimeHelp").removeAttr("style");break;case e.constants.deadlineTimeUnitWeek:this.switchTimeUnitsVisibility("deadlineTimeUnitWeek");break;case e.constants.deadlineTimeUnitMonth:this.switchTimeUnitsVisibility("deadlineTimeUnitMonth");break}t.find('input[name="useTime"]').css("display","inline")}else if(i===e.constants.deadlineTypeFixedDeadline){this.switchPanelsVisibility("fixedDeadlinePanel");this.switchTimeContainerVisibility(true);this.hideDiv("deadlineTimeHelp");t.find('input[name="useTime"]').css("display","none")}},switchPanelsVisibility:function(e){var t=this;this.panelIds.forEach((function(i){if(i!==e){t.hideDiv(i)}}));this.showDiv(e)},switchTimeUnitsVisibility:function(e){var t=this;this.timeUnitIds.forEach((function(i){if(i!==e){t.hideDiv(i);$("#"+i+" select").removeAttr("name")}}));this.showDiv(e);$("#"+e+" select").attr("name","delayValue")},switchTimeContainerVisibility:function(e){var t=this;if(e){t.showDiv("deadlineTimeContainer")}else{t.hideDiv("deadlineTimeContainer")}},hideAllItems:function(e){var t=this;e.forEach((function(e){t.hideDiv(e)}))},validateEditor:function(){var i=true;var n=e.constants.defaultImportDelayLimit;if(this.isPrecededByImportIcon){var o=$('form[name="'+this.formName+'"]');var a=o.find('input[name="deadlineType"]:checked').val();if(a===e.constants.deadlineTypeDelay){var s=o.find('select[name="timeUnit"]').val();if(s===e.constants.deadlineTimeUnitMinute){i=false}else if(s===e.constants.deadlineTimeUnitHour){if($("#deadlineTimeUnitHour select").val()<n){i=false}}}}if(i){r.saveCurrentEditorWithUndo()}else{var l=$("#deadline-editor").find(".editor-error-messages");l.html(t("error.workflow.deadlineIsTooShortForImport",n));l.css("display","block")}},onTimeChanged:function(){var t=$('form[name="'+this.formName+'"]');var i=t.find('input[name="deadlineType"]:checked').val();var n=t.find('select[name="timeUnit"]').val();if(i==e.constants.deadlineTypeDelay&&n==e.constants.deadlineTimeUnitDay){t.find('input[name="useTime"]').prop("checked",true)}},hideDiv:function(e){$('form[name="'+this.formName+'"] #'+e).css("display","none")},showDiv:function(e){$('form[name="'+this.formName+'"] #'+e).css("display","block")},dateAsUTC:function(e){if(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))}else{return null}},checkPresentNodeOfType:function(e){return r.getNodesByTypes(e).length>0},checkPrecededByImportIcon:function(t){return r.getNodesByIncomingConnections(t).some((function(t){return e.NODE_TYPE_IMPORT==t.getType()}))}});h.addAction({change:"deadline-editor-update"},(function(){i.updateVisibility()}));h.addAction({change:"deadline-editor-time-change"},(function(){i.onTimeChanged()}));h.addAction({click:"deadline-editor-save"},(function(){i.validateEditor()}))}));this.addDomInitializer("archive-editor-initializer",(function(){var i=r.registerEditor("archive",{formName:"archiveForm",safeToSave:true,getTitle:function(){return t("workflow.mailing.archive")},createNewArchive:function(){r.processForward(e.constants.forwardArchiveCreate,"#settings_general_campaign",m)},fillEditor:function(e){var t=$('form[name="'+this.formName+'"]');var i=e.getData();t.submit(false);t.get(0).reset();r.fillFormFromObject(this.formName,i,"")},saveEditor:function(){return r.formToObject(this.formName)}});h.addAction({click:"archive-editor-new"},(function(){i.createNewArchive()}))}));this.addDomInitializer("recipient-editor-initializer",(function(){var i=e.constants.isAltgExtended;var n=r.registerEditor("recipient",{formName:"recipientForm",targetSelector:"#recipientTargetSelect",altgSelector:"#recipientAltgSelect",safeToSave:true,getTargetFieldSelect:function(){return new d($(this.targetSelector).select2({formatSelection:function(e){if($(e.element).data("editable")){return'<a href="#" class="btn-link-light" '+'data-action="recipient-editor-target-edit" data-target-id="'+e.id+'">'+e.text+"</a>"}else{return e.text}}}))},getAltgFieldSelect:function(){return new d($(this.altgSelector).select2({formatSelection:function(e){return e.text}}))},createNewTarget:function(){r.processForward(e.constants.forwardTargetGroupCreate,this.targetSelector,m)},editTarget:function(t){$("#forwardTargetItemId").val(t);r.processForward(e.constants.forwardTargetGroupEdit,this.targetSelector,m)},getTitle:function(){return t("workflow.recipient")},fillEditor:function(t){var n=t.getData();if(!i){if(e.constants.accessLimitTargetId>0){n.targets=_.union([e.constants.accessLimitTargetId],n.targets);n.targetsOption="ALL_TARGETS_REQUIRED"}}var o=$('form[name="'+this.formName+'"]');o.submit(false);o.get(0).reset();r.fillFormFromObject(this.formName,n,"");this.getTargetFieldSelect().selectValue(n.targets);if(i){this.getAltgFieldSelect().selectValue(n.altgs)}},saveEditor:function(){var e=r.formToObject(this.formName);e.targets=this.getTargetFieldSelect().getSelectedValue();if(i){e.altgs=this.getAltgFieldSelect().getSelectedValue()}return e}});h.addAction({click:"recipient-editor-create-new-target"},(function(){n.createNewTarget()}));h.addAction({click:"recipient-editor-save"},(function(){if(i){var e=AGN.Lib.Form.get($("#"+n.formName));if(e.valid({})){e.cleanErrors();r.saveCurrentEditorWithUndo()}else{e.handleErrors()}}else{r.saveCurrentEditorWithUndo()}}));h.addAction({click:"recipient-editor-target-edit"},(function(){n.editTarget(this.el.data("target-id"))}))}));this.addDomInitializer("export-editor-initializer",(function(){var i=this.config;var n=r.registerEditor("export",{formName:"exportForm",safeToSave:true,getTitle:function(){return t("auto_export")},createNewAutoExport:function(){r.processForward(e.constants.forwardAutoExportCreate,'form[name="'+this.formName+'"] select[name=importexportId]',m)},editAutoExport:function(){var t=$('form[name="'+this.formName+'"] select[name=importexportId]');var i=t.val();$("#forwardTargetItemId").val(i);r.processForward(e.constants.forwardAutoExportEdit,'form[name="'+this.formName+'"] select[name=importexportId]',m)},fillEditor:function(e){var n=$("#export-editor .editor-error-messages");var o=$('form[name="'+this.formName+'"]');var a=e.getData();o.submit(false);o.get(0).reset();r.fillFormFromObject(this.formName,a,"");this.addLinks();if(i.isDisabled=="true"){n.html(t("error.workflow.autoExportPermission"));n.css("display","block")}else{n.css("display","none")}},validateEditor:function(){var i=$("#export-editor .editor-error-messages");var n=$('form[name="'+this.formName+'"] select[name=importexportId]');if(n.val()>0){$.ajax({url:AGN.url("/workflow/validateDependency.action"),data:{workflowId:e.workflowId||0,type:e.DEPENDENCY_TYPE_AUTO_EXPORT,entityId:n.val()}}).done((function(e){if(e.valid===true){r.saveCurrentEditorWithUndo()}else{i.html(t("error.workflow.autoExportInUse"));i.css("display","block")}})).fail((function(){i.html(t("Error"));i.css("display","block")}))}else{i.html(t("error.workflow.noExport"));i.css("display","block")}},onChange:function(){this.addLinks()},addLinks:function(){var e=$('form[name="'+this.formName+'"] select[name=importexportId]');var t=e.val();if(t>0){$("#export-editor #editAutoExportLink").css("display","block");$("#export-editor #createAutoExportLink").css("display","none")}else{$("#export-editor #createAutoExportLink").css("display","block");$("#export-editor #editAutoExportLink").css("display","none")}},saveEditor:function(){return r.formToObject(this.formName)},isSetFilledAllowed:function(){var e=$('form[name="'+this.formName+'"] select[name=importexportId]');var t=e.find(":selected");return!(e.val()==0||t.data("is-available")!=true)}});h.addAction({change:"export-editor-change"},(function(){n.onChange()}));h.addAction({click:"export-editor-new"},(function(){n.createNewAutoExport()}));h.addAction({click:"export-editor-autoexport"},(function(){n.editAutoExport()}));h.addAction({click:"export-editor-save"},(function(){n.validateEditor()}))}));this.addDomInitializer("import-editor-initializer",(function(){var i=this.config;var n=r.registerEditor("import",{formName:"importForm",safeToSave:true,getTitle:function(){return t("auto_import")},createNewAutoImport:function(){r.processForward(e.constants.forwardAutoImportCreate,"#importexportId",m)},editAutoImport:function(){var t=$('form[name="'+this.formName+'"] select[name=importexportId]');var i=t.val();$("#forwardTargetItemId").val(i);r.processForward(e.constants.forwardAutoImportEdit,'form[name="'+this.formName+'"] select[name=importexportId]',m)},fillEditor:function(e){var n=$("#import-editor .editor-error-messages");var o=$('form[name="'+this.formName+'"]');var a=e.getData();o.submit(false);o.get(0).reset();r.fillFormFromObject(this.formName,a,"");this.addLinks();if(i.isDisabled=="true"){n.html(t("error.workflow.autoImportPermission"));n.css("display","block")}else{n.css("display","none")}},validateEditor:function(){var i=$("#import-editor .editor-error-messages");var n=$('form[name="'+this.formName+'"] select[name=importexportId]');if(n.val()>0){$.ajax({url:AGN.url("/workflow/validateDependency.action"),data:{workflowId:e.workflowId||0,type:e.DEPENDENCY_TYPE_AUTO_IMPORT,entityId:n.val()}}).done((function(e){if(e.valid===true){r.saveCurrentEditorWithUndo()}else{i.html(t("error.workflow.autoImportInUse"));i.css("display","block")}})).fail((function(){i.html(t("Error"));i.css("display","block")}))}else{i.html(t("error.workflow.noImport"));i.css("display","block")}},onChange:function(){this.addLinks()},addLinks:function(){var e=$('form[name="'+this.formName+'"] select[name=importexportId]');var t=e.val();if(t>0){$("#import-editor #editAutoImportLink").css("display","block");$("#import-editor #createAutoImportLink").css("display","none")}else{$("#import-editor #createAutoImportLink").css("display","block");$("#import-editor #editAutoImportLink").css("display","none")}},saveEditor:function(){return r.formToObject(this.formName)},isSetFilledAllowed:function(){var e=$('form[name="'+this.formName+'"] select[name=importexportId]');var t=e.find(":selected");return!(e.val()==0||t.data("is-available")!=true)}});h.addAction({change:"import-editor-change"},(function(){n.onChange()}));h.addAction({click:"import-editor-new"},(function(){n.createNewAutoImport()}));h.addAction({click:"import-editor-update"},(function(){n.editAutoImport()}));h.addAction({click:"import-editor-save"},(function(){n.validateEditor()}))}));this.addDomInitializer("start-editor-initializer",(function(){var i=this.config;var n=new s(i.form,i.container,i.selectedName,i.noMailingOption);var o=i.profileFields;var a=i.isBigData;var l={rulesNumber:0,isStartEditor:false,timePattern:/^(\d{2}):(\d{2})$/,getTitle:function(){return this.isStartEditor?t("workflow.start.title"):t("workflow.stop.title")},getStartStopDate:function(t){t=t||r.formToObject("startForm");var i=$('form[name="startForm"]');var n=null;if(this.isStartEditor){switch(t.startType){case e.constants.startTypeDate:n=i.find("#startDate").pickadate("picker");break;case e.constants.startTypeEvent:n=i.find("#executionDate").pickadate("picker");break}}else if(t.endType==e.constants.endTypeDate){n=i.find("#startDate").pickadate("picker")}if(n){var o=n.get("select");if(o){return o.obj}}return null},generateReminderComment:function(){var e=$('#workflowForm input[name="workflow.shortname"]').val();var n=f.getDateStr(this.getStartStopDate(),i.localeDatePattern);return(this.isStartEditor?t("workflow.start.reminder_text"):t("workflow.stop.reminder_text")).replace(/:campaignName/g,e).replace(/:startDate/g,n).replace(/:endDate/g,n)},fillEditor:function(o){var a=o.getData();var s=o.getType();this.isStartEditor=s=="start";const l=this.isStartEditor&&(o.data.startType===e.constants.startTypeEvent||!g.isAutoOptimizationWorkflow(o));this.updateEditorType(this.isStartEditor,l);var u=$('form[name="startForm"]');u.submit(false);u.find(".rule-row").each((function(){$(this).remove()}));u.find("#remindCalendarDateTitle").text(this.isStartEditor?t("workflow.start.start_date"):t("workflow.stop.end_date"));if(a.rules!=undefined){for(var c=0;c<a.rules.length;c++){var d=a.rules[c];this.createRuleRow(c,d)}this.rulesNumber=a.rules.length}u.get(0).reset();a.adminTimezone=i.adminTimezone;a.sendReminder=a.scheduleReminder;r.fillFormFromObject("startForm",a,"");n.setMailingId(a.mailingId);n.cleanOptions(1);var f=new Date;u.find("#startDate").pickadate("picker").set("select",this.dateAsUTC(a.date!=undefined?a.date:f));u.find("#executionDate").pickadate("picker").set("select",this.dateAsUTC(a.date!=undefined?a.date:f));u.find("#remindDate").pickadate("picker").set("select",this.dateAsUTC(a.remindDate!=undefined?a.remindDate:f));if(a.date!=undefined){u.find("#startTime").val(this.formatTime(a.hour,a.minute));u.find("#remindTime").val(this.formatTime(a.remindHour,a.remindMinute))}else{this.setCurrentTime()}this.updateChainFieldsVisibility();this.updateVisibility();this.updateOperatorsAvailability();if(a.startType==e.constants.startTypeEvent&&a.event==e.constants.startEventReaction&&a.reaction==e.constants.reactionClickedLink&&a.mailingId!=0&&a.mailingId!=null){this.onMailingSelectChange(a.mailingId,a.linkId)}if(!a.comment){u.find("#reminderComment").val(this.generateReminderComment())}var h;if(a.recipients!=""){h=2}else{h=1}$('#start-editor input[name="userType"][value='+h+"]").prop("checked",true).trigger("change");$("#start-editor .editor-error-messages").css("display","none");p.get(u).cleanErrors();if(!this.isStartEditor&&g.isAllLinkedFilledStartsHasDateType(o)){this.hideDiv("end-date-radio")}else{this.showDiv("end-date-radio")}},saveEditor:function(){var e=r.formToObject("startForm");e.date=this.getStartStopDate(e);if(e.date==null){e.date=new Date;e.date.setHours(0);e.date.setMinutes(0);e.date.setSeconds(0);e.date.setMilliseconds(0)}var t;var n=$('form[name="startForm"] #startTime').val();if(t=this.timePattern.exec(n)){e.hour=t[1];e.minute=t[2]}else{e.hour=0;e.minute=0}e.scheduleReminder=e.sendReminder;var o=$('form[name="startForm"] #remindTime').val();if(t=this.timePattern.exec(o)){e.remindHour=t[1];e.remindMinute=t[2]}else{e.remindHour=0;e.remindMinute=0}if($('input[name="remindSpecificDate"]:checked').val()=="true"){e.remindDate=$('form[name="startForm"] #remindDate').pickadate("picker").get("select").obj}else{e.remindDate=e.date;e.remindHour=0;e.remindMinute=0}if(e.rules==undefined){e.rules=[]}if(e.linkId==undefined||e.linkId==null){e.linkId=0}if(e.dateFieldOperator!=i.equelsOperatorCode){e.dateFieldOperator=i.equelsOperatorCode}if(e.userType==2){e.remindAdminId=0;e.recipients=$.trim(e.recipients).toLowerCase().split(/[,;\s\n\r]+/).filter((function(e){return!!e})).join(", ")}else{e.recipients=""}delete e.userType;return e},validateEditorInternal:function(i){var n=this;var r=true;var o=$("#start-editor .editor-error-messages");var s=$('form[name="startForm"]');var l=this.isStartEditor?s.find('input[name="startType"]:checked').val():s.find('input[name="endType"]:checked').val();if(this.isStartEditor&&l==e.constants.startTypeEvent){c();d()}if(this.isStartEditor&&l==e.constants.startTypeDate||!this.isStartEditor&&l==e.constants.endTypeDate){d()}if(r&&s.find("#sendReminder").is(":checked")){var u=s.find('input[name="userType"]:checked').val();if(u==2){f()}}return r;function c(){var l=s.find('select[name="event"]').val();switch(l){case e.constants.startEventDate:var u=s.find("#executionDate").pickadate("picker").get("select").obj;if(u){var c=s.find("#startTime").val();if(!n.timePattern.test(c)){r=false}}else{r=false}var d=s.find("#dateFieldValue");if(!$.trim(d.val())){r=false;if(i){o.html(t("error.workflow.startDateOmitted"));o.css("display","block")}}const l=s.find("#dateProfileField");if(!$.trim(l.val())){r=false;if(i){p.get(l).showFieldError("dateProfileField",t("fields.required.errors.missing"))}}break;case e.constants.startEventReaction:var f=s.find('select[name="reaction"]').val();switch(f){case e.constants.reactionClickedLink:const n=s.find('select[name="linkId"]').val();if(!n||parseInt(n,10)<=0){r=false;if(i){o.html(t("error.workflow.noLinkSelected"));o.css("display","block")}}case e.constants.reactionOpened:case e.constants.reactionClicked:const l=s.find('select[name="mailingId"]').val();if(parseInt(l,10)<=0){r=false;if(i){o.html(t("error.workflow.noMailing"));o.css("display","block")}}break;case e.constants.reactionChangeOfProfile:if(typeof a!="undefined"&&a==true){var h=s.find('select[name="profileField"]').val();if(!h){r=false}}const u=s.find("#startProfileField");if(!$.trim(u.val())){r=false;if(i){p.get(u).showFieldError("profileField",t("fields.required.errors.missing"))}}break;case e.constants.reactionWaitingForConfirm:case e.constants.reactionOptIn:case e.constants.reactionOptOut:break;default:r=false;break}break}}function d(){var e=s.find("#startDate").pickadate("picker").get("select").obj;if(e){var t=s.find("#startTime").val();if(!n.timePattern.test(t)){r=false}}else{r=false}}function f(){var e=$.trim(s.find('textarea[name="recipients"]').val()).split(/[,;\s\n\r]+/).filter((function(e){return!!e}));if(!e.length){if(i){r=false;o.html(t("error.workflow.emptyRecipientList"));o.css("display","block")}}}},validateEditor:function(){if(this.validateEditorInternal(true)){r.saveCurrentEditorWithUndo()}},isSetFilledAllowed:function(){return this.validateEditorInternal(false)},setCurrentTime:function(){var e=this;$.ajax({type:"GET",url:AGN.url("/workflow/getCurrentAdminTime.action"),success:function(t){$('form[name="startForm"] #startTime').val(e.formatTime(t.hour,t.minute));$('form[name="startForm"] #remindTime').val(e.formatTime(t.remindHour,t.remindMinute))}})},updateEditorType:function(i,n){var r=$("#startStopType");r.empty();if(i){r.append(u.text("start-types",{showStartEventTab:n}));$("#eventReaction").html(t("workflow.start.reaction_based"));$("#eventDate").html(t("workflow.start.date_based"))}else{r.append(u.text("stop-types"));if(this.checkPresentNodeOfType([e.NODE_TYPE_ACTION_BASED_MAILING,e.NODE_TYPE_DATE_BASED_MAILING])){$("#endTypeActiomaticLabel").html(t("workflow.stop.open_end"))}else{$("#endTypeActiomaticLabel").html(t("workflow.stop.automatic_end"))}}},onRulesChanged:function(){var e=0;$('form[name="startForm"] #profileFieldAddedRules tr').each((function(){var t=$(this);var i=t.attr("id");var n=i.substring(5);var r=$("#"+i);r.find(".rule-field").attr("name",(function(t,i){return i?i.replace(n,e+""):""}));r.find(".delete-rule").attr("data-rule-index",(function(t,i){return i==n?e:i}));t.attr("id","rule_"+e);e++}));this.updateChainFieldsVisibility()},updateChainFieldsVisibility:function(){if(this.rulesNumber>0){$('form[name="startForm"] [name="rules[0].chainOperator"]').css("visibility","hidden");$('form[name="startForm"] #newRule_chainOperator').css("visibility","visible")}else{$('form[name="startForm"] #newRule_chainOperator').css("visibility","hidden")}},updateOperatorsAvailability:function(){var e=$('form[name="startForm"] select[name="profileField"]').val();var t=o[e];$('form[name="startForm"] select.primary-operator').each((function(){var e=$(this);e.children("option").prop("disabled",(function(){var e=$(this).data("types");if(e=="*"||!e){return false}return e.split(/[\s,]+/).indexOf(t)==-1}));AGN.Lib.CoreInitializer.run("select",e);if(e.val()==null){r.initSelectWithFirstValue(e)}}))},addRule:function(){var t=$('form[name="startForm"]');var i={chainOperator:t.find("#newRule_chainOperator").val(),parenthesisOpened:t.find("#newRule_parenthesisOpened").val(),primaryOperator:t.find("#newRule_primaryOperator").val(),primaryValue:t.find("#newRule_primaryValue").val(),parenthesisClosed:t.find("#newRule_parenthesisClosed").val()};this.createRuleRow(this.rulesNumber,i);r.fillFormFromObject("startForm",i,"rules["+this.rulesNumber+"].");this.rulesNumber++;if($("#newRule_primaryOperator").val()==e.constants.operatorIs){$("#newRule_primaryValue").parents("td").replaceWith(this.createSimpleNewRuleValueField())}this.updateChainFieldsVisibility();this.updateOperatorsAvailability();t.find("#profileFieldRuleAdd select").each((function(){r.initSelectWithFirstValue($(this))}));t.find("#profileFieldRuleAdd input").each((function(){$(this).val("")}))},removeRuleRow:function(e){$('form[name="startForm"] #rule_'+e).remove();this.rulesNumber--;this.onRulesChanged()},createRuleRow:function(i,n){var r=$('form[name="startForm"] #profileFieldAddedRules');var o=this.createSimpleRuleValueField(i);var a=c.arrayAsOptionsHtml(e.constants.operators);if(this.curProfileField&&this.curProfileField.toLowerCase()==e.GENDER_PROFILE_FIELD){o=this.createGenderSelect()}else if(n.primaryOperator==e.constants.operatorIs){o=this.createIsOperatorSelect()}r.append('<tr class="rule-row" id="rule_'+i+'">'+'<td><select name="rules['+i+'].chainOperator" class="rule-field">'+'<option value="'+e.constants.chainOperatorAnd+'">'+t("workflow.defaults.and")+"</option>"+'<option value="'+e.constants.chainOperatorOr+'">'+t("workflow.defaults.or")+"</option>"+"</select></td>"+'<td><select name="rules['+i+'].parenthesisOpened" class="parentheses-opened rule-field">'+'<option value="0">&nbsp</option>'+'<option value="1">(</option>'+"</select></td>"+'<td><select name="rules['+i+'].primaryOperator" class="primary-operator rule-field" data-action="start-rule-operator-change">'+a+"</select></td>"+o+'<td><select name="rules['+i+'].parenthesisClosed" class="parenthesis-closed rule-field">'+'<option value="0">&nbsp</option>'+'<option value="1">)</option>'+"</select></td>"+'<td><a class="mailing_delete delete-rule btn btn-regular btn-alert" href="#" data-action="start-editor-rule-remove" data-rule-index="'+i+'"><i class="icon icon-minus-circle"></i></a></td>'+"</tr>");this.addRuleProperties($("#rule_"+i+" .primary-value"),i);AGN.runAll(r)},onStartTypeChanged:function(){var t=this.isStartEditor?$('form[name="startForm"] input[name="startType"]:checked').val():$('form[name="startForm"] input[name="endType"]:checked').val();if(this.isStartEditor&&t==e.constants.startTypeDate||!this.isStartEditor&&t==e.constants.endTypeDate){this.toggleFormat();this.hideDiv("startEventPanel");this.showDiv("startDatePanel");this.showDiv("startIconTime");this.showDiv("startRemindAdmin")}else if(this.isStartEditor&&t==e.constants.startTypeEvent){this.hideDiv("startDatePanel");this.showDiv("startEventPanel");this.showDiv("startIconTime");this.showDiv("startRemindAdmin");this.onStartEventChanged()}else if(this.isStartEditor&&t==e.constants.startTypeOpen||!this.isStartEditor&&t==e.constants.endTypeAutomatic){this.hideDiv("startDatePanel");this.hideDiv("startEventPanel");this.hideDiv("startIconTime");this.hideDiv("startRemindAdmin")}},onStartEventChanged:function(){var t=$("#startEvent").val();if(t==e.constants.startEventReaction){this.toggleFormat();this.hideDiv("dateStartPanel");this.showDiv("reactionStartPanel");this.onExecutionChanged();this.onProfileFieldChanged()}else if(t==e.constants.startEventDate){this.toggleFormat();this.hideDiv("reactionStartPanel");this.showDiv("dateStartPanel");this.hideDiv("executionDateLabel");this.showDiv("firstExecutionDateLabel");$("#startIconDateFormat").insertAfter("#startIconDateFieldOperator");this.showDiv("startIconDateFormat")}},toggleFormat:function(){var t,i,n,r,o;return function(){n=n||$("select#startEvent");i=i||$("input#typeEvent");t=t||$("input#startTime");r=i.prop("checked");o=n.val()==e.constants.startEventDate;i.prop("checked")&&o?t.inputmask("h:00"):t.inputmask("h:s")}}(),onRuleModeChanged:function(){var e=$('input[name="useRules"]:checked').val();if(e=="false"){this.hideDiv("profileFieldRules")}else{this.showDiv("profileFieldRules")}},onProfileFieldChanged:function(){var t=$('form[name="startForm"] select[name="profileField"]').val();var i=o[t];if(i&&i.toLowerCase()==e.FIELD_TYPE_DATE){$("#startIconDateFormat").insertAfter("#reactionProfileField");this.showDiv("startIconDateFormat")}else{this.hideDiv("startIconDateFormat")}this.updateOperatorsAvailability()},getRuleIndex:function(e){return e.attr("id").substring(5)},onRuleOperatorChanged:function(t){if(this.curProfileField&&this.curProfileField.toLowerCase()==e.GENDER_PROFILE_FIELD){return}var i=t.closest("tr");var n=i.attr("id")?this.getRuleIndex(i):null;if(t.val()==e.constants.operatorIs){var r=$(this.createIsOperatorSelect());i.find(".primary-value").parents("td").replaceWith(r);AGN.Lib.CoreInitializer.run("select",r)}else if(i.find(".primary-value").hasClass("null-select")){var o;if(n==null){o=this.createSimpleNewRuleValueField()}else{o=this.createSimpleRuleValueField(n)}i.find(".primary-value").parents("td").replaceWith(o)}if(n==null){this.addNewRuleProperties(i.find(".primary-value"))}else{this.addRuleProperties(i.find(".primary-value"),n)}},createGenderSelect:function(){var t=c.mapAsOptionsHtml(e.constants.genderOptions);return'<td><select class="primary-value form-control">'+t+"</select></td>"},createIsOperatorSelect:function(){return'<td><select class="primary-value null-select form-control">'+'<option value="NULL">NULL</option>'+'<option value="NOT_NULL">NOT NULL</option>'+"</select></td>"},createSimpleRuleValueField:function(e){return'<td><input name="rules['+e+'].primaryValue" type="text" class="primary-value rule-field form-control"/></td>'},createSimpleNewRuleValueField:function(){return'<td><input id="newRule_primaryValue" type="text" class="primary-value form-control"/></td>'},addRuleProperties:function(e,t){e.filter("select, input").attr("name","rules["+t+"].primaryValue").addClass("rule-field")},addNewRuleProperties:function(e){e.filter("select, input").attr("id","newRule_primaryValue")},onExecutionChanged:function(){var e=$('input[name="executeOnce"]:checked').val();if(e=="false"){this.hideDiv("executionDateLabel");this.showDiv("firstExecutionDateLabel")}else{this.hideDiv("firstExecutionDateLabel");this.showDiv("executionDateLabel")}},onReactionChanged:function(){var t=$('form[name="startForm"] #startReaction').val();if(t==e.constants.reactionOpened||t==e.constants.reactionNotOpened||t==e.constants.reactionClicked||t==e.constants.reactionNotClicked||t==e.constants.reactionBought||t==e.constants.reactionNotBought||t==e.constants.reactionClickedLink){this.hideDiv("reactionStartProfile");this.showDiv("reactionStartMailing")}else if(t==e.constants.reactionChangeOfProfile){this.hideDiv("reactionStartMailing");this.showDiv("reactionStartProfile")}else{this.hideDiv("reactionStartMailing");this.hideDiv("reactionStartProfile")}if(t==e.constants.reactionClickedLink){this.showDiv("reactionStartMailingLink")}else{this.hideDiv("reactionStartMailingLink")}},onReminderChanged:function(){if($('input[name="sendReminder"]:checked').val()){$('form[name="startForm"]').find("#reminderComment").val(this.generateReminderComment());this.showDiv("reminderDetails")}else{this.hideDiv("reminderDetails")}return false},onScheduleReminderDateChanged:function(){if($('form[name="startForm"] input[name="remindSpecificDate"]:checked').val()=="true"){this.showDiv("dateTimePicker")}else{this.hideDiv("dateTimePicker")}return false},onMailingSelectChange:function(t,i){var n=$('form[name="startForm"] select[name="linkId"]');var o=parseInt(t,10);if(o>0){n.attr("readonly","readonly");$.ajax({url:AGN.url("/mailing/ajax/"+o+"/links.action"),success:function(t){n.empty();n.append($("<option></option>",{value:"",text:e.EMPTY_OPTION_PLACEHOLDER}));$.each(t,(function(e,t){n.append($("<option></option>",{value:t.id,text:t.url}))}));n.removeAttr("readonly");if(i!=null&&i!=undefined){n.val(i);r.initSelectWithValueOrChooseFirst(n,i)}else{r.initSelectWithFirstValue(n)}}})}else{n.empty()}},updateVisibility:function(){this.onStartTypeChanged();this.onStartEventChanged();this.onReactionChanged();this.onRuleModeChanged();this.onExecutionChanged();this.onReminderChanged();this.onScheduleReminderDateChanged()},hideDiv:function(e){$('form[name="startForm"] #'+e).css("display","none")},showDiv:function(e){$('form[name="startForm"] #'+e).css("display","")},dateAsUTC:function(e){if(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))}else{return null}},formatTime:function(e,t){var i=0;var n=0;e=parseInt(e,10);if(e>=0){i=e}t=parseInt(t,10);if(t>=0){n=t}return(i<10?"0"+i:i)+":"+(n<10?"0"+n:n)},checkPresentNodeOfType:function(e){return r.getNodesByTypes(e).length>0}};r.registerEditor("start",l);r.registerEditor("stop",l);h.addAction({change:"start-editor-execution-changed"},(function(){l.onExecutionChanged()}));h.addAction({change:"start-editor-event-changed"},(function(){l.onStartEventChanged()}));h.addAction({change:"start-editor-type-changed"},(function(){l.onStartTypeChanged()}));h.addAction({change:"start-editor-rule-changed"},(function(){l.onRuleModeChanged()}));h.addAction({change:"start-editor-reaction-changed"},(function(){l.onReactionChanged()}));h.addAction({change:"start-editor-profile-field-changed"},(function(){l.onProfileFieldChanged()}));h.addAction({click:"start-editor-add-rule"},(function(){l.addRule()}));h.addAction({click:"start-editor-reminder-changed"},(function(){l.onReminderChanged()}));h.addAction({click:"start-editor-schedule-reminder-date-changed"},(function(){l.onScheduleReminderDateChanged()}));h.addAction({click:"start-editor-validate"},(function(){l.validateEditor()}));h.addAction({click:"start-editor-mailing-sort-date"},(function(){n.onMailingSortClick("date")}));h.addAction({change:"start-editor-mailing-select"},(function(){l.onMailingSelectChange(this.el.val())}));h.addAction({click:"start-editor-mailing-sort-shortname"},(function(){n.onMailingSortClick("shortname")}))}));this.addDomInitializer("decision-editor-initializer",(function(){var i=this.config;var n=i.profileFields;var o=new s(i.form,i.container,i.selectName,i.noMailingOption);var a;var l=r.registerEditor("decision",{rulesNumber:0,rulePrefix:"decision_",prevProfileField:"",curProfileField:"",getTitle:function(){return t("workflow.decision")},fillEditor:function(t){var i=$('form[name="decisionForm"]');a=0;var n=t.getData();i.submit(false);i.find(".rule-row").each((function(){$(this).remove()}));this.curProfileField=n.profileField;this.possibleToUseAutoOptimization=g.isAutoOptimizationDecisionAllowed(t);if(n.rules!=undefined){for(var s=0;s<n.rules.length;s++){var l=n.rules[s];this.createRuleRow(s,l)}this.rulesNumber=n.rules.length}i.get(0).reset();if(n.profileField){n.profileField=n.profileField.toLowerCase()}r.fillFormFromObject("decisionForm",n,"");o.setMailingId(n.mailingId);o.cleanOptions(1);if(n.decisionDate==undefined){n.decisionDate=new Date}var u=i.find("#decisionDate");var c=i.find("#decisionTime");if(this.checkPresentNodeOfType([e.NODE_TYPE_ACTION_BASED_MAILING,e.NODE_TYPE_DATE_BASED_MAILING])){u.parent().parent().parent().parent().hide();c.parent().parent().parent().parent().hide()}else{u.parent().parent().parent().parent().show();c.parent().parent().parent().parent().show();u.pickadate("picker").set("select",this.dateAsUTC(n.decisionDate));c.val(("0"+n.decisionDate.getHours()).slice(-2)+":"+("0"+n.decisionDate.getMinutes()).slice(-2))}this.updateChainFieldsVisibility();this.updateVisibility();this.updateDateFormatVisibility();this.updateOperatorsAvailability();if(n.decisionType==e.constants.decisionTypeDecision&&n.decisionCriteria==e.constants.decisionReaction&&n.reaction==e.constants.reactionClickedLink&&(n.mailingId!=0&&n.mailingId!=null)){this.onMailingSelectChange(n.mailingId,n.linkId)}else{r.resetSelect(i.find('select[name="linkId"]'))}$("#decision-editor .editor-error-messages").css("display","none");p.get(i).cleanErrors()},saveEditor:function(){var t=r.formToObject("decisionForm");if(t.decisionCriteria==e.constants.decisionProfileField&&a!=0){t.mailingId=a}a=0;if(t.rules==undefined){t.rules=[]}if(!t.threshold){t.threshold=""}if(this.checkPresentNodeOfType([e.NODE_TYPE_ACTION_BASED_MAILING,e.NODE_TYPE_DATE_BASED_MAILING])){t.decisionDate=null}else{var i=$('form[name="decisionForm"]');t.decisionDate=i.find("#decisionDate").pickadate("picker").get("select").obj;var n=i.find("#decisionTime").val();t.decisionDate.setHours(n.substring(0,2));t.decisionDate.setMinutes(n.substring(3,5))}return t},validateEditor:function(){var n=$('form[name="decisionForm"]');var o=$("#decision-editor .editor-error-messages");var a=n.find('input[name="decisionType"]:checked').val();var s=$("#decisionCriteria").val();var l=n.find('select[name="mailingId"]').val();var u=n.find('select[name="linkId"]').val();var c=n.find('select[name="reaction"]').val();var d=n.find('input[name="threshold"]').val();if(a==e.constants.decisionTypeDecision&&s==e.constants.decisionReaction&&l==0){o.html(t("error.workflow.noMailing"));o.css("display","block")}else if(a==e.constants.decisionTypeDecision&&s==e.constants.decisionReaction&&c==e.constants.reactionClickedLink&&(u==0||u==null)){o.html(t("error.workflow.noLinkSelected"));o.css("display","block")}else if(a==e.constants.decisionTypeDecision&&s==e.constants.decisionProfileField){if(i.isMailtrackingActive=="true"){const e=n.find("#decisionProfileField");if(!$.trim(e.val())){p.get(n).showFieldError("profileField",t("fields.required.errors.missing"))}else{r.saveCurrentEditorWithUndo()}}}else if(a==e.constants.decisionTypeAutoOptimization){if(d){var f=parseInt(d,10);if(f&&f>0){r.saveCurrentEditorWithUndo()}else{o.html(t("error.workflow.noValidThreshold"));o.css("display","block")}}else{r.saveCurrentEditorWithUndo()}}else{r.saveCurrentEditorWithUndo()}},onTypeChanged:function(){var i=$('form[name="decisionForm"] input[name="decisionType"]:checked').val();if(!this.possibleToUseAutoOptimization&&i===e.constants.decisionTypeAutoOptimization){const i=$("#decision-editor .editor-error-messages");i.html(t("error.workflow.autoOptimizationDecisionForbidden"));i.css("display","block");$('form[name="decisionForm"] input[name="decisionType"]').filter(':radio[value="'+e.constants.decisionTypeDecision+'"]').prop("checked",true);return}if(i==e.constants.decisionTypeDecision){this.hideDecisionFormDiv("autoOptimizationPanel");this.showDecisionFormDiv("decisionPanel")}else if(i==e.constants.decisionTypeAutoOptimization){this.hideDecisionFormDiv("decisionPanel");this.showDecisionFormDiv("autoOptimizationPanel")}this.updateVisibilityOfRuleMailingReceived()},onDecisionReactionChanged:function(){var t=$('form[name="decisionForm"] select[name="reaction"]').val();if(t==e.constants.reactionClickedLink){this.showDecisionFormDiv("reactionLinkPanel");var i=$('form[name="decisionForm"] select[name="mailingId"]').val();this.onMailingSelectChange(i,0)}else{this.hideDecisionFormDiv("reactionLinkPanel")}},onCriteriaChanged:function(){var t=$('form[name="decisionForm"] select[name="decisionCriteria"]').val();if(t==e.constants.decisionReaction){this.hideDecisionFormDiv("decisionProfileFieldPanel");this.showDecisionFormDiv("decisionReactionPanel")}else if(t==e.constants.decisionProfileField){this.hideDecisionFormDiv("decisionReactionPanel");this.showDecisionFormDiv("decisionProfileFieldPanel")}this.updateVisibilityOfRuleMailingReceived()},onMailingSelectChange:function(t,i){var n=$('form[name="decisionForm"] select[name="linkId"]');var o=parseInt(t,10);if(o>0){n.attr("readonly","readonly");$.ajax({url:AGN.url("/mailing/ajax/"+o+"/links.action"),success:function(t){n.empty();n.append($("<option></option>",{value:"",text:e.EMPTY_OPTION_PLACEHOLDER}));$.each(t,(function(e,t){n.append($("<option></option>",{value:t.id,text:t.url}))}));n.removeAttr("readonly");if(i!=null&&i!=undefined){n.val(i);r.initSelectWithValueOrChooseFirst(n,i)}else{r.initSelectWithFirstValue(n)}}})}else{n.empty()}},onRuleOperatorChanged:function(t){if(this.curProfileField&&this.curProfileField.toLowerCase()==e.GENDER_PROFILE_FIELD){return}var i=t.closest("tr");var n=i.attr("id")?this.getRuleIndex(i):null;if(t.val()==e.constants.operatorIs){var r=$(this.createIsOperatorSelect());i.find(".primary-value").parents("td").replaceWith(r);AGN.Lib.CoreInitializer.run("select",r)}else if(i.find(".primary-value").hasClass("null-select")){var o;if(n==null){o=this.createSimpleNewRuleValueField()}else{o=this.createSimpleRuleValueField(n)}i.find(".primary-value").parents("td").replaceWith(o)}if(n==null){this.addNewRuleProperties(i.find(".primary-value"))}else{this.addRuleProperties(i.find(".primary-value"),n)}},getRuleIndex:function(e){return e.attr("id").substring(14)},onProfileFieldChanged:function(){var t=$('form[name="decisionForm"]');var i=t.find('select[name="profileField"]').val();this.curProfileField=i;var n=this;if(i&&i.toLowerCase()==e.GENDER_PROFILE_FIELD){$("#decisionProfileFieldRules .primary-value").each((function(){$(this).parents("td").remove()}));t.find(".rule-row").each((function(){var e=n.getRuleIndex($(this));$(this).find(".decision-rule-operator").parents("td").after(n.createGenderSelect());n.addRuleProperties($(this).find(".primary-value"),e)}));$("#decision_newRule_primaryOperator").parents("td").after(this.createGenderSelect());this.addNewRuleProperties($("#decisionProfileFieldRuleAdd .primary-value"))}else if(this.prevProfileField&&this.prevProfileField.toLowerCase()==e.GENDER_PROFILE_FIELD){$("#decisionProfileFieldRules .primary-value").each((function(){$(this).parents("td").remove()}));t.find(".rule-row").each((function(){var t=n.getRuleIndex($(this));if($(this).find(".decision-rule-operator").val()==e.constants.operatorIs){$(this).find(".primary-value").parents("td").remove();$(this).find("select").parents("td").after(n.createIsOperatorSelect());n.addRuleProperties($(this).find(".primary-value"),t)}else{$(this).find(".decision-rule-operator").parents("td").after(n.createSimpleRuleValueField(t))}}));if($("#decision_newRule_primaryOperator").val()==e.constants.operatorIs){$("#decisionProfileFieldRuleAdd").find("select").parents("td").after(this.createIsOperatorSelect());this.addNewRuleProperties($("#decisionProfileFieldRuleAdd .primaryValue"))}else{$("#decision_newRule_primaryOperator").parents("td").after(this.createSimpleNewRuleValueField())}}this.updateDateFormatVisibility();this.updateOperatorsAvailability();this.prevProfileField=i},updateDateFormatVisibility:function(){var t=$('form[name="decisionForm"] select[name="profileField"]').val();var i=n[t];if(i&&i.toLowerCase()==e.FIELD_TYPE_DATE){this.showDecisionFormDiv("decisionDateFormat")}else{this.hideDecisionFormDiv("decisionDateFormat")}},updateOperatorsAvailability:function(){var t=$('form[name="decisionForm"]');var i=t.find('select[name="profileField"]').val();var o=n[i];t.find("select.decision-rule-operator").each((function(){var t=$(this);t.children("option").prop("disabled",(function(){var t=$(this).data("types");if(i&&i.toLowerCase()==e.GENDER_PROFILE_FIELD){return this.text!="="&&this.text!="!="}if(t=="*"||!t){return false}return t.split(/[\s,]+/).indexOf(o)==-1}));AGN.Lib.CoreInitializer.run("select",t);if(t.val()==null){r.initSelectWithFirstValue(t)}}))},onRulesChanged:function(){var e=0;var t=this;$('form[name="decisionForm"] #decisionProfileFieldAddedRules .rule-row').each((function(){var i=$(this);var n=i.attr("id");var r=t.getRuleIndex(i);var o=$("#"+n);o.find(".rule-field").attr("name",(function(t,i){return i?i.replace(r,e+""):""}));o.find(".delete-rule").attr("data-rule-index",(function(t,i){return i==r?e:i}));i.attr("id","decision_rule_"+e);e++}));this.updateChainFieldsVisibility()},updateChainFieldsVisibility:function(){var e=$('form[name="decisionForm"]');if(this.rulesNumber>0){e.find('[name="rules[0].chainOperator"]').css("visibility","hidden");e.find("#decision_newRule_chainOperator").css("visibility","visible")}else{e.find("#decision_newRule_chainOperator").css("visibility","hidden")}},addRule:function(){var t=$('form[name="decisionForm"]');var i={chainOperator:t.find("#decision_newRule_chainOperator").val(),parenthesisOpened:t.find("#decision_newRule_parenthesisOpened").val(),primaryOperator:t.find("#decision_newRule_primaryOperator").val(),primaryValue:t.find("#decision_newRule_primaryValue").val(),parenthesisClosed:t.find("#decision_newRule_parenthesisClosed").val()};this.createRuleRow(this.rulesNumber,i);r.fillFormFromObject("decisionForm",i,"rules["+this.rulesNumber+"].");this.rulesNumber++;if($("#decision_newRule_primaryOperator").val()==e.constants.operatorIs){$("#decision_newRule_primaryValue").parents("td").replaceWith(this.createSimpleNewRuleValueField())}this.updateChainFieldsVisibility();this.updateOperatorsAvailability();t.find("#decisionProfileFieldRuleAdd select").each((function(){r.initSelectWithFirstValue($(this))}));t.find("#decisionProfileFieldRuleAdd input").each((function(){$(this).val("")}))},removeRuleRow:function(e){$('form[name="decisionForm"] #decision_rule_'+e).remove();this.rulesNumber--;this.onRulesChanged()},createRuleRow:function(i,n){var r=$('form[name="decisionForm"]');var o=this.createSimpleRuleValueField(i);var a=c.arrayAsOptionsHtml(e.constants.operators);if(this.curProfileField&&this.curProfileField.toLowerCase()==e.GENDER_PROFILE_FIELD){o=this.createGenderSelect()}else if(n.primaryOperator==e.constants.operatorIs){o=this.createIsOperatorSelect()}r.find("#decisionProfileFieldAddedRules").append('<tr class="rule-row" id="decision_rule_'+i+'">'+'<td><select name="rules['+i+'].chainOperator" class="rule-field">'+'<option value="'+e.constants.chainOperatorAnd+'">'+t("workflow.defaults.and")+"</option>"+'<option value="'+e.constants.chainOperatorOr+'">'+t("workflow.defaults.or")+"</option>"+"</select></td>"+'<td><select name="rules['+i+'].parenthesisOpened" class="parentheses-opened rule-field">'+'<option value="0">&nbsp</option>'+'<option value="1">(</option>'+"</select></td>"+'<td><select name="rules['+i+'].primaryOperator" class="decision-rule-operator rule-field" data-action="decision-rule-operator-change">'+a+"</select></td>"+o+'<td><select name="rules['+i+'].parenthesisClosed" class="parenthesis-closed rule-field">'+'<option value="0">&nbsp</option>'+'<option value="1">)</option>'+"</select></td>"+'<td><a class="mailing_delete delete-rule btn btn-regular btn-alert" href="#" data-action="decision-editor-rule-remove" data-rule-index="'+i+'"><i class="icon icon-minus-circle"></i></a></td>'+"</tr>");this.addRuleProperties($("#decision_rule_"+i+" .primary-value"),i);AGN.runAll(r.find("#decisionProfileFieldAddedRules"))},createGenderSelect:function(){var t=c.mapAsOptionsHtml(e.constants.genderOptions);return'<td><select class="primary-value form-control">'+t+"</select></td>"},createIsOperatorSelect:function(){return'<td><select class="primary-value null-select form-control">'+'<option value="NULL">NULL</option>'+'<option value="NOT_NULL">NOT NULL</option>'+"</select></td>"},createSimpleRuleValueField:function(e){return'<td><input name="rules['+e+'].primaryValue" type="text" class="primary-value rule-field form-control"/></td>'},createSimpleNewRuleValueField:function(){return'<td><input id="decision_newRule_primaryValue" type="text" class="primary-value form-control"/></td>'},addRuleProperties:function(e,t){e.filter("select, input").attr("name","rules["+t+"].primaryValue").addClass("rule-field")},addNewRuleProperties:function(e){e.filter("select, input").attr("id","decision_newRule_primaryValue")},updateVisibility:function(){this.onTypeChanged();this.onDecisionReactionChanged();this.onCriteriaChanged()},hideDecisionFormDiv:function(e){$('form[name="decisionForm"] #'+e).css("display","none")},showDecisionFormDiv:function(e){$('form[name="decisionForm"] #'+e).css("display","block")},updateVisibilityOfRuleMailingReceived:function(){var t=$('form[name="decisionForm"] input[name="decisionType"]:checked').val();if(t==e.constants.decisionTypeAutoOptimization){this.hideDecisionFormDiv("ruleMailingReceivedWrapper")}else if(t==e.constants.decisionTypeDecision){var i=$('form[name="decisionForm"] select[name="decisionCriteria"]').val();if(i==e.constants.decisionReaction){this.hideDecisionFormDiv("ruleMailingReceivedWrapper")}else if(i==e.constants.decisionProfileField){this.hideDecisionFormDiv("ruleMailingReceivedWrapper");var n=this.showDecisionFormDiv;r.forEachPreviousNode((function(t){if(e.NODE_TYPES_MAILING.includes(t.getType())){var i=t.getData();a=i.mailingId;n("ruleMailingReceivedWrapper");return false}}))}}},dateAsUTC:function(e){if(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))}else{return null}},checkPresentNodeOfType:function(e){return r.getNodesByTypes(e).length>0}});h.addAction({click:"decision-editor-mailing-sort-shortname"},(function(){o.onMailingSortClick("shortname")}));h.addAction({click:"decision-editor-mailing-sort-date"},(function(){o.onMailingSortClick("date")}));h.addAction({change:"decision-editor-mailing-select"},(function(){l.onMailingSelectChange(this.el.val())}));h.addAction({change:"decision-rule-operator-change"},(function(){l.onRuleOperatorChanged(this.el)}));h.addAction({click:"decision-editor-rule-remove"},(function(){l.removeRuleRow(this.el.data("rule-index"))}));h.addAction({click:"decision-editor-rule-add"},(function(){l.addRule()}));h.addAction({change:"decision-editor-type-change"},(function(){l.onTypeChanged()}));h.addAction({change:"decision-editor-criteria-change"},(function(){l.onCriteriaChanged()}));h.addAction({change:"decision-editor-reaction-change"},(function(){l.onDecisionReactionChanged()}));h.addAction({click:"decision-editor-save"},(function(){l.validateEditor()}));h.addAction({change:"decision-editor-profile-field-change"},(function(){l.onProfileFieldChanged()}))}));this.addDomInitializer("mailing-editor-initializer",(function(){var i=this.config;var n=new o(i,m);var a=r.registerEditor("mailing",{formName:"mailingForm",safeToSave:true,getTitle:function(){return t("workflow.defaults.mailing")},fillEditor:function(e){var t=$('form[name="'+this.formName+'"]');var i=e.getData();t.submit(false);t.get(0).reset();r.fillFormFromObject(this.formName,i,"");n.fillEditorBase(e);$("#mailing-editor .editor-error-messages").css("display","none")},createNewMailing:function(){n.createNewMailing(e.constants.forwardMailingCreate)},editMailing:function(){n.editMailing(e.constants.forwardMailingEdit)},copyMailing:function(){n.copyMailing(e.constants.forwardMailingCopy)},saveEditor:function(){n.setNodeFields();n.disableInputs();return r.formToObject(this.formName)},saveWithCheckStatus:function(){var e=n.showSecurityQuestion();if(e){r.saveCurrentEditorWithUndo(false,n)}}});h.addAction({click:"mailing-editor-save"},(function(){n.validateEditor(a.saveWithCheckStatus)}));h.addAction({click:"mailing-editor-base-close"},(function(){n.closeOneMailinglistWarningDialog()}));h.addAction({click:"mailing-editor-base-accept"},(function(){n.acceptOneMailinglistPerCampaign()}));h.addAction({click:"mailing-editor-base-sort-shortname"},(function(){n.onMailingSortClick("shortname","shortname")}));h.addAction({click:"mailing-editor-base-sort-data"},(function(){var e=c.getConfigData(this.el);n.onMailingSortClick("shortname",e.sortByDate)}));h.addAction({change:"mailing-editor-base-status-change"},(function(){n.onMailingsStatusChange(this.el.val())}));h.addAction({change:"mailing-editor-base-select-change"},(function(){n.onMailingSelectChange(this.el.val())}));h.addAction({click:"mailing-editor-base-secure-cancel"},(function(){n.cancelSecurityDialog()}));h.addAction({click:"mailing-editor-base-toggle-settings"},(function(){var e=c.getConfigData(this.el);n.toggleSendSettings(e.editorId)}))}));this.addDomInitializer("followup-mailing-editor-initializer",(function(){var i=this.config.baseMailingData;var n=this.config.followupMailingData;i.$dropdown=$("#followup-m-editor");var a=new o(i,m);var s=new o(n,m);a.selectedFollowUpMailingId=0;a.findPreviousMailingIds=function(){var t=[];r.forEachPreviousNode((function(i){var n=i.getType();if(e.NODE_TYPES_MAILING.includes(n)&&e.NODE_TYPE_FOLLOWUP_MAILING!=n){t.push(i.getId())}}));return t};a.getMailingsByWorkStatus=function(e,i,n,o){var a=this;var s=$(this.formNameJId+" "+this.selectNameJId);var l=_.uniq(this.findPreviousMailingIds()).toString();s.attr("readonly","readonly");$.ajax({url:AGN.url("/workflow/getMailingsByWorkStatus.action"),data:{mailingTypes:this.mailingTypesForLoading.join(","),status:e,sort:i,order:n,mailingId:this.selectedFollowUpMailingId,parentMailingId:$(this.formNameJId+" "+this.selectNameJId).val(),mailingStatus:"W",takeMailsForPeriod:true,mailingsInCampaign:l},success:function(l){s.html("");s.append('<option value="0">'+t("workflow.defaults.no_mailing")+"</option>");for(var u=0;u<l.length;u++){var c=l[u];var d="";var f="";if(c.WORK_STATUS=="mailing.status.sent"||c.WORK_STATUS=="mailing.status.norecipients"){d="style='color: #808080;'"}if(o==c.MAILING_ID){f="selected"}s.append("<option "+d+" value='"+c.MAILING_ID+"' status='"+c.WORK_STATUS+"' senddate='"+c.SENDDATE+"' "+f+">"+c.SHORTNAME+"</option>")}s.removeAttr("readonly");a.mailingsStatus=e;a.mailingsSort=i;a.mailingsOrder=n;s.val(a.mailingId);r.initSelectWithValueOrChooseFirst(s,a.mailingId)}})};s.onMailingSelectChange=function(e){a.selectedFollowUpMailingId=e;this.setSelectMailingOptions(e)};var l=r.registerEditor("followup_mailing",{formName:"followupMailingForm",safeToSave:false,getTitle:function(){return t("workflow.mailing.followup")},fillEditor:function(e){var i=$('form[name="'+this.formName+'"]');var o=$("#followup_mailing-editor .editor-error-messages");s.fillEditorBase(e);a.fillEditorBase(e);i.submit(false);i.get(0).reset();r.fillFormFromObject(this.formName,e.getData(),"");if(n.disableFollowup=="true"){o.html(t("error.workflow.followupPermission"));o.css("display","block");a.disableInputs()}else{o.css("display","none")}},createNewMailing:function(){var t=a.node.getData();t.baseMailingId=a.getSelectedMailingOption().val();t.decisionCriterion=a.getSelectedDecisionOption().val();s.createNewMailing(e.constants.forwardMailingCreate)},editMailing:function(){var t=a.node.getData();t.baseMailingId=a.getSelectedMailingOption().val();t.decisionCriterion=a.getSelectedDecisionOption().val();s.editMailing(e.constants.forwardMailingEdit)},copyMailing:function(){var t=a.node.getData();t.baseMailingId=a.getSelectedMailingOption().val();t.decisionCriterion=a.getSelectedDecisionOption().val();s.copyMailing(e.constants.forwardMailingCopy)},saveEditor:function(){a.disableInputs();s.disableInputs();this.setNodeFields();return r.formToObject(this.formName)},saveWithCheckStatus:function(){var e=s.showSecurityQuestion();if(e){r.saveCurrentEditorWithUndo(false,s)}},validateEditor:function(e){var i=$(a.formNameJId+" "+a.selectNameJId);var n=$(s.formNameJId+" "+s.selectNameJId);if(i.val()>0&&n.val()>0){if(e){e()}else{r.saveCurrentEditorWithUndo()}}else{var o=$("#followup_mailing-editor").find(".editor-error-messages");o.html(t("error.workflow.noMailing"));o.css("display","block")}},setNodeFields:function(){a.node.setFilled(parseInt(a.mailingId,10)>0&&parseInt(s.mailingId,10)>0)}});h.addAction({click:"followup-mailing-editor-base-sort-shortname"},(function(){s.onMailingSortClick("shortname","shortname")}));h.addAction({click:"followup-mailing-editor-base-sort-data"},(function(){var e=c.getConfigData(this.el);s.onMailingSortClick("shortname",e.sortByDate)}));h.addAction({change:"followup-mailing-editor-base-status-change"},(function(){s.onMailingsStatusChange(this.el.val())}));h.addAction({change:"followup-mailing-editor-base-select-change"},(function(){s.onMailingSelectChange(this.el.val())}));h.addAction({click:"followup-base-mailing-editor-base-sort-shortname"},(function(){a.onMailingSortClick("shortname","shortname")}));h.addAction({click:"followup-base-mailing-editor-base-sort-data"},(function(){var e=c.getConfigData(this.el);a.onMailingSortClick("shortname",e.sortByDate)}));h.addAction({change:"followup-base-mailing-editor-base-status-change"},(function(){a.onMailingsStatusChange(this.el.val())}));h.addAction({change:"followup-base-mailing-editor-base-select-change"},(function(){a.onMailingSelectChange(this.el.val())}));h.addAction({click:"followup-base-mailing-editor-base-secure-cancel"},(function(){s.cancelSecurityDialog()}));h.addAction({click:"followup-mailing-editor-base-secure-cancel"},(function(){s.cancelSecurityDialog()}));h.addAction({click:"followup-mailing-editor-save"},(function(){l.validateEditor(l.saveWithCheckStatus)}))}));this.addDomInitializer("mailing_mediatype_sms-editor-initializer",(function(){const i=this.config;const n=new o(i,m);const a=r.registerEditor("mailing_mediatype_sms",{formName:"smsMailingForm",safeToSave:false,getTitle:function(){return t("workflow.mailing.mediatype_sms")},fillEditor:function(e){const t=$('form[name="'+this.formName+'"]');t.submit(false);t.get(0).reset();r.fillFormFromObject(this.formName,e.getData(),"");n.fillEditorBase(e);$("#mailing_mediatype_sms-editor .editor-error-messages").css("display","none")},createNewMailing:function(){n.createNewMailing(e.constants.forwardMailingCreate)},editMailing:function(){n.editMailing(e.constants.forwardMailingEdit)},saveEditor:function(){n.setNodeFields();n.disableInputs();return r.formToObject(this.formName)},saveWithCheckStatus:function(){const e=n.showSecurityQuestion();if(e){r.saveCurrentEditorWithUndo(false,n)}},copyMailing:function(){n.copyMailing(e.constants.forwardMailingCopy)}});h.addAction({click:"sms-mailing-editor-save"},(function(){n.validateEditor(a.saveWithCheckStatus)}));h.addAction({click:"action-mailing-editor-base-sort-shortname"},(function(){n.onMailingSortClick("shortname","shortname")}));h.addAction({click:"action-mailing-editor-base-sort-data"},(function(){const e=c.getConfigData(this.el);n.onMailingSortClick("shortname",e.sortByDate)}));h.addAction({change:"action-mailing-editor-base-status-change"},(function(){n.onMailingsStatusChange(this.el.val())}));h.addAction({change:"action-mailing-editor-base-select-change"},(function(){n.onMailingSelectChange(this.el.val())}));h.addAction({click:"action-mailing-editor-base-secure-cancel"},(function(){n.cancelSecurityDialog()}))}));this.addDomInitializer("mailing_mediatype_post-editor-initializer",(function(){const i=this.config;const n=new o(i,m);const a=r.registerEditor("mailing_mediatype_post",{formName:"postMailingForm",safeToSave:false,getTitle:function(){return t("workflow.mailing.mediatype_post")},fillEditor:function(e){const t=$('form[name="'+this.formName+'"]');t.submit(false);t.get(0).reset();r.fillFormFromObject(this.formName,e.getData(),"");n.fillEditorBase(e);$("#mailing_mediatype_post-editor .editor-error-messages").css("display","none")},createNewMailing:function(){n.createNewMailing(e.constants.forwardMailingCreate)},editMailing:function(){n.editMailing(e.constants.forwardMailingEdit)},saveEditor:function(){n.setNodeFields();n.disableInputs();return r.formToObject(this.formName)},saveWithCheckStatus:function(){const e=n.showSecurityQuestion();if(e){r.saveCurrentEditorWithUndo(false,n)}},copyMailing:function(){n.copyMailing(e.constants.forwardMailingCopy)}});h.addAction({click:"post-mailing-editor-save"},(function(){n.validateEditor(a.saveWithCheckStatus)}));h.addAction({click:"action-mailing-editor-base-sort-shortname"},(function(){n.onMailingSortClick("shortname","shortname")}));h.addAction({click:"action-mailing-editor-base-sort-data"},(function(){const e=c.getConfigData(this.el);n.onMailingSortClick("shortname",e.sortByDate)}));h.addAction({change:"action-mailing-editor-base-status-change"},(function(){n.onMailingsStatusChange(this.el.val())}));h.addAction({change:"action-mailing-editor-base-select-change"},(function(){n.onMailingSelectChange(this.el.val())}));h.addAction({click:"action-mailing-editor-base-secure-cancel"},(function(){n.cancelSecurityDialog()}))}));this.addDomInitializer("action-mailing-editor-initializer",(function(){var i=this.config;var n=new o(i,m);var a=r.registerEditor("actionbased_mailing",{formName:"actionbasedMailingForm",safeToSave:false,getTitle:function(){return t("workflow.mailing.action_based")},fillEditor:function(e){var t=$('form[name="'+this.formName+'"]');t.submit(false);t.get(0).reset();r.fillFormFromObject(this.formName,e.getData(),"");n.fillEditorBase(e);$("#actionbased_mailing-editor .editor-error-messages").css("display","none")},createNewMailing:function(){n.createNewMailing(e.constants.forwardMailingCreate)},editMailing:function(){n.editMailing(e.constants.forwardMailingEdit)},saveEditor:function(){n.setNodeFields();n.disableInputs();return r.formToObject(this.formName)},saveWithCheckStatus:function(){var e=n.showSecurityQuestion();if(e){r.saveCurrentEditorWithUndo(false,n)}},copyMailing:function(){n.copyMailing(e.constants.forwardMailingCopy)}});h.addAction({click:"action-mailing-editor-save"},(function(){n.validateEditor(a.saveWithCheckStatus)}));h.addAction({click:"action-mailing-editor-base-sort-shortname"},(function(){n.onMailingSortClick("shortname","shortname")}));h.addAction({click:"action-mailing-editor-base-sort-data"},(function(){var e=c.getConfigData(this.el);n.onMailingSortClick("shortname",e.sortByDate)}));h.addAction({change:"action-mailing-editor-base-status-change"},(function(){n.onMailingsStatusChange(this.el.val())}));h.addAction({change:"action-mailing-editor-base-select-change"},(function(){n.onMailingSelectChange(this.el.val())}));h.addAction({click:"action-mailing-editor-base-secure-cancel"},(function(){n.cancelSecurityDialog()}))}));this.addDomInitializer("date-mailing-initializer",(function(){var i=this.config;var n=new o(i,m);var a=r.registerEditor("datebased_mailing",{formName:"datebasedMailingForm",safeToSave:false,getTitle:function(){return t("workflow.mailing.date_based")},fillEditor:function(e){var t=$('form[name="'+this.formName+'"]');t.submit(false);t.get(0).reset();r.fillFormFromObject(this.formName,e.getData(),"");n.fillEditorBase(e);$("#datebased_mailing-editor .editor-error-messages").css("display","none")},saveEditor:function(){n.setNodeFields();n.disableInputs();return r.formToObject(this.formName)},createNewMailing:function(){n.createNewMailing(e.constants.forwardMailingCreate)},editMailing:function(){n.editMailing(e.constants.forwardMailingEdit)},saveWithCheckStatus:function(){var e=n.showSecurityQuestion();if(e){r.saveCurrentEditorWithUndo(false,n)}},copyMailing:function(){n.copyMailing(e.constants.forwardMailingCopy)}});h.addAction({click:"date-mailing-editor-base-sort-shortname"},(function(){n.onMailingSortClick("shortname","shortname")}));h.addAction({click:"date-mailing-editor-base-sort-data"},(function(){var e=c.getConfigData(this.el);n.onMailingSortClick("shortname",e.sortByDate)}));h.addAction({change:"date-mailing-editor-base-status-change"},(function(){n.onMailingsStatusChange(this.el.val())}));h.addAction({change:"date-mailing-editor-base-select-change"},(function(){n.onMailingSelectChange(this.el.val())}));h.addAction({click:"date-mailing-editor-base-secure-cancel"},(function(){n.cancelSecurityDialog()}));h.addAction({click:"date-mailing-editor-save"},(function(){n.validateEditor(a.saveWithCheckStatus)}))}));this.addAction({click:"mailing-editor-copy"},(function(){r.getCurrentEditor().copyMailing()}));this.addAction({click:"mailing-editor-new"},(function(){r.getCurrentEditor().createNewMailing()}));this.addAction({click:"mailing-editor-edit"},(function(){r.getCurrentEditor().editMailing()}));this.addAction({click:"editor-save-current"},(function(){r.saveCurrentEditorWithUndo()}));this.addAction({click:"editor-cancel"},(function(){r.cancelEditor()}));this.addAction({click:"chain-mode"},(function(){if(g.isChainMode()||g.connectSelected()){g.setChainModeEnabled(false)}else{g.setChainModeEnabled(true)}$(this.el).toggleClass("button-selected",g.isChainMode())}));this.addAction({click:"delete-selected"},(function(){g.deleteSelected()}));this.addAction({click:"align-all"},(function(){g.alignAll()}));this.addAction({click:"zoom-in"},(function(){var t=$("#slider").slider("instance");t.value(t.value()+e.ZOOM_STEP);g.setZoom(t.value())}));this.addAction({click:"zoom-out"},(function(){var t=$("#slider").slider("instance");t.value(t.value()-e.ZOOM_STEP);g.setZoom(t.value())}));this.addAction({click:"reset-zoom"},(function(){g.setZoom(e.DEFAULT_ZOOM);$("#slider").slider("value",e.DEFAULT_ZOOM)}));this.addAction({change:"show-grid"},(function(){g.toggleGrid()}));this.addAction({click:"workflow-save"},(function(){A(true,{})}));this.addAction({click:"workflow-copy"},(function(){var t=e.workflowId;var i=g.getNodes().some((function(e){return e.isFilled()}));a.confirmCopy(i).done((function(e){window.location.href=AGN.url("/workflow/copy.action"+"?workflowId="+t+"&isWithContent="+(e==true));return false}))}));this.addAction({change:"workflow-view-change-status"},(function(){if($("#workflow_active").is(":checked")){$("#workflow-status").val(e.constants.statusActive)}else{$("#workflow-status").val(e.constants.statusInactive)}}));this.addAction({click:"evaluate-statistic",change:"change-statistic"},(function(){const e=$("#statistic-iframe");e.removeClass("hidden");e.attr("src",$("#stat-url").val())}));this.addAction({click:"undo"},(function(){g.undo()}));this.addAction({click:"create-workflow-enlarged-editor-modal"},(function(){g.enlargeEditor((function(){m(true)}))}));this.addAction({click:"workflow-generate-pdf"},(function(){var i=e.workflowId<=0||!e.shortname;var n=g.hasUnsavedChanges();if(i||n){var r="";if(i){r=t("workflow.pdf.save_new_campaign")}else if(n){r=t("workflow.pdf.save_modified_campaign")}a.confirmSaveBeforePdfGenerating((function(){m(true)}),r)}else{window.location.href=AGN.url("/workflow/"+e.workflowId+"/generatePDF.action");AGN.Lib.Loader.hide()}}));this.addAction({click:"workflow-dry-run"},(function(){var t=false;var i=e.constants.statusOpen;if(e.constants.initialWorkflowStatus!=e.constants.statusTesting){t=true;i=e.constants.statusTesting}a.confirmTestingStartStop(t).done((function(){var e=$("#workflow_active");e.prop("disabled",true);A(true,{status:i})}))}));this.addAction({click:"workflow-pause"},(function(){A(true,{status:e.constants.statusPaused})}));this.addAction({click:"workflow-unpause"},(function(){w(true,{status:e.constants.statusActive})}));this.addAction({click:"workflow-activate"},(function(){v(true,{status:e.constants.statusActive})}));this.addAction({click:"workflow-deactivate"},(function(){C(true,{status:e.constants.statusInactive})}));$(window).on("resize viewportChanged",(function(){if(g){g.updateMinimap()}}));$(document).on("keydown",(function(t){if(t.target&&!$(t.target).is("input, textarea")){switch(t.keyCode){case e.KEY_SPACE:g.setPanningEnabled(true);break;case e.KEY_SHIFT:g.setMultiConnectionEnabled(true);break;case e.KEY_CTRL:g.setMouseWheelZoomEnabled(true);break}}}));$(document).on("keyup",(function(t){if(t.target&&!$(t.target).is("input, textarea")){switch(t.keyCode){case e.KEY_DELETE:g.deleteSelected();break;case e.KEY_SPACE:g.setPanningEnabled(false);break;case e.KEY_SHIFT:g.setMultiConnectionEnabled(false);break;case e.KEY_ENTER:g.editIcon();break;case e.KEY_CTRL:g.setMouseWheelZoomEnabled(false);break}}}));function m(t,i){var n=$("#workflow_active").is(":checked");var r=e.constants.initialWorkflowStatus;var o=r===e.constants.statusActive&&!n;var a=r!==e.constants.statusActive&&n;if(o||!c.checkActivation(true)){if(a){v(t,i)}else if(o){C(t,i)}else{A(t,i)}}}function v(t,i){a.Activation((function(){g.getNodesByTypes([e.NODE_TYPE_START]).filter(y).forEach(b);A(t,i)}),E().join("<br/>"))}function y(e){const t=_.clone(e.data.date);if(!t){return false}t.setHours(e.data.hour);t.setMinutes(e.data.minute);t.setSeconds(0);return t<=new Date}function b(e){const t=$.ajax({url:AGN.url("/workflow/getCurrentAdminTime.action"),async:false}).responseJSON||{};const i=t.hour;const n=t.minute;if(!i||!n){return}e.data.date=new Date;const r=e.data.date;r.setHours(parseInt(i,10));r.setMinutes(parseInt(n,10));r.setSeconds(r.getSeconds()>55?r.getSeconds()+120:r.getSeconds()+60);e.data.hour=r.getHours();e.data.minute=r.getMinutes();g.updateNodeTitle(e,true);AGN.Lib.Form.get($("form#workflowForm")).setValueOnce("startTimeAdjusted",true)}function w(e,t){a.Activation((function(){A(e,t)}),{},true)}function C(e,t){a.Deactivation((function(){A(e,t)}))}function A(e,t){var i=function(){var e=AGN.Lib.Form.get($("form#workflowForm"));t=$.extend({},t);Object.keys(t).forEach((function(i){e.setValueOnce(i,t[i])}));if(g.isGridDisplayed()){g.toggleGrid()}e.setValueOnce("workflowSchema",g.serializeIcons());e.setValueOnce("editorPositionLeft",-1);e.setValueOnce("editorPositionTop",-1);e.submit("static")};if(e){x().done(i)}else{i()}}function E(){return g.getNodesByTypes(e.NODE_TYPES_MAILING).map((function(e){return e.getTitle()}))}function x(){var e=$.Deferred();if($("#name").val().length<3){AGN.Lib.Messages(t("workflow.defaults.error"),t("error.workflow.shortName"),"alert");e.reject()}else{if(T()){return l.create(u.text("mailing-types-replace-modal"))}else{e.resolve()}}return e.promise()}function T(){var t=g.getNodes();var i="UNKNOWN";var n={};for(var r=0;r<t.length;r++){var o=t[r];if(o.type===e.NODE_TYPE_START&&o.filled){var a="UNKNOWN";switch(o.data.startType){case e.constants.startTypeDate:a="DATE";break;case e.constants.startTypeEvent:switch(o.event){case e.constants.startEventDate:a="RULE";break;case e.constants.startEventReaction:a="REACTION";break}break}if(i!==a){if(i==="UNKNOWN"){i=a}else{return false}}}switch(o.type){case e.NODE_TYPE_MAILING:case e.NODE_TYPE_FOLLOWUP_MAILING:case e.NODE_TYPE_MAILING_MEDIATYPE_SMS:case e.NODE_TYPE_MAILING_MEDIATYPE_POST:n["DATE"]=true;break;case e.NODE_TYPE_ACTION_BASED_MAILING:n["REACTION"]=true;break;case e.NODE_TYPE_DATE_BASED_MAILING:n["RULE"]=true;break}}if(i!=="UNKNOWN"){n=Object.keys(n);if(n.length===1){if(i!==n[0]){return true}}else{if(n.length>1){return true}}}return false}this.addDomInitializer("open-edit-icon-initializer",(function(t){var i=t.json();var r=i.nodeId;var o=i.elementValue;if(r){var a=n.get($("#"+r));if(a&&o){switch(a.type){case e.NODE_TYPE_MAILING:case e.NODE_TYPE_ACTION_BASED_MAILING:case e.NODE_TYPE_MAILING_MEDIATYPE_SMS:case e.NODE_TYPE_MAILING_MEDIATYPE_POST:case e.NODE_TYPE_DATE_BASED_MAILING:case e.NODE_TYPE_FOLLOWUP_MAILING:a.data.mailingId=o;break;case e.NODE_TYPE_RECIPIENT:if(o!="0"&&$.inArray(o,a.data.targets)==-1){a.data.targets.push(o)}break;case e.NODE_TYPE_ARCHIVE:a.data.campaignId=o;break;case e.NODE_TYPE_IMPORT:case e.NODE_TYPE_EXPORT:a.data.importexportId=o;break;default:console.debug("Unknown node type")}g.editIcon(a)}}}))}));AGN.Lib.Controller.new("wysiwyg-agn-tags",(function(){var e=AGN.Lib.Template,t=AGN.Lib.Select,i=AGN.Lib.Confirm;var n;var r;var o={};var a={};o["agnFULLVIEW"]=function(){const e=$("#agn-tag-name").children("option:selected");const t=e.val();if(!t){return}if(!$("#createLinkToggle").prop("checked")){return"["+t+"]"}var i=$("#tagLinkText").val();if(!i){i="fullview"}return'<a href="['+t+']">'+i+"</a>"};o["agnWEBVIEW"]=o["agnFULLVIEW"];o["agnFORM"]=function(){var e=$("#agn-tag-name").children("option:selected");var t=e.val(),i=e.data("attributes");if(!t){return}var n=$("#createLinkToggle").prop("checked")===true;if(n){var r=$("#tagLinkText").val();if(!r){var o=i.findIndex((function(e){return e.name==="name"}));if(o>-1){r=$("#agn-tag-attribute-"+o).val()}}if(r){return'<a href="['+t+u(i)+']">'+r+"</a>"}}return"["+t+u(i)+"]"};a["agnFORM"]=function(){var e=$("#createLinkToggle");if(e.prop("checked")!==true){$("#tagLinkParams").hide()}e.on("change",(function(){var e=$(this).prop("checked");if(e===false){$("#tagLinkParams").hide()}else{$("#tagLinkParams").show()}}))};a["agnFULLVIEW"]=a["agnFORM"];a["agnWEBVIEW"]=a["agnFULLVIEW"];function s(t,i){var o=$("#agn-tag-attributes");o.empty();if(i&&i.length>0){i.forEach((function(e,t){switch(e.type){case"SELECT":o.append(n({index:t,name:e.name,options:e.options}));break;case"TEXT":o.append(r({index:t,name:e.name}));break}}))}try{const i=e.dom(t+"-extended-attributes");if(i){o.append(i)}}catch(e){}AGN.runAll(o)}function l(){var e=$("#agn-tag-name").children("option:selected");var t=e.val();if(t){return"["+t+u(e.data("attributes"))+"]"}else{return null}}function u(e){var t="";if(e&&e.length>0){e.forEach((function(e,i){var n=$("#agn-tag-attribute-"+i);t+=" "+e.name+'="'+_.escape(n.val())+'"'}))}return t}this.addDomInitializer("wysiwyg-agn-tags",(function(){n=e.prepare("agn-tag-select-attribute");r=e.prepare("agn-tag-text-attribute");var i=$("#agn-tag-name");this.config.forEach((function(e){var t=$("<option>",{value:e.name,text:e.name});i.append(t);t.data("attributes",e.attributes)}));t.get(i).selectFirstValue();i.trigger("change")}));this.addAction({change:"select-agn-tag"},(function(){var e=this.el.children("option:selected");s(e.val(),e.data("attributes"));var t=e.val(),i=a[t];if(i){i()}}));this.addAction({click:"insert-agn-tag"},(function(){var e=$("#agn-tag-name").val();var t=o[e];var n;if(t){n=t()}else{n=l()}if(n){i.get(this.el).positive(n)}}))}));AGN.Lib.Controller.new("wysiwyg-image-browser",(function(){var e;var t=r("CKEditorFuncNum");var i=r("mailingID");this.addDomInitializer("wysiwyg-image-browser",(function(){e=this.config;n()}));this.addAction({click:"submit-image"},(function(){var e=$("li[image-tab-name].active").attr("image-tab-name");if(e==="mediapool"){a()}else{o()}}));this.addAction({change:"update-image"},(function(){n()}));this.addAction({click:"close-window"},(function(){window.close()}));function n(){var e=l();var t=$("#other-images-tab .image-preview");var i=$("#other-images-tab .no_image_message");if(!e||!e.length){i.show();t.hide()}else{t.attr("src",s(e));t.show();i.hide()}return 1}function r(e){var t=new RegExp("(?:[?&]|&amp;)"+e+"=([^&]+)","i");var i=window.location.search.match(t);return i&&i.length>1?i[1]:""}function o(){var e=s(l());window.opener.CKEDITOR.tools.callFunction(t,e);window.close()}function a(){var e=document.querySelector('[data-action="mpSelectImage"].active');if(e){var i=e.querySelector("img").getAttribute("src");window.opener.CKEDITOR.tools.callFunction(t,i);window.close()}}function s(t){if(t.substr(0,4).toLowerCase()!=="http"){return e.rdirDomain+"/image?ci="+e.companyId+"&mi="+i+"&name="+encodeURIComponent(t)}return encodeURI(t)}function l(){return $('#other-images-tab [data-action="update-image"]').val()}}));AGN.Lib.Controller.new("dashboard",(function(){var e=this;var t;var i;var n,r;this.addDomInitializer("dashboard-news-counters",(function(){var e=this.config;n=e.newsDateUrl;r=e.newsCountersUrl;$.ajax({url:r}).done((function(e){if(!!e["counters"]){t=e["counters"];u();if(c("MESSAGE")&&!$(".modal-news").exists()){s()}}}))}));this.addDomInitializer("dashboard-statistics",(function(){i=this.config;if(i.mailingId>0){o(i.mailingId)}}));this.addAction({click:"open-mailing-statistics"},(function(){if(i.mailingId>0){AGN.Lib.Page.reload(i.mailingStatisticsLinkPattern.replace(":mailing-id:",i.mailingId))}}));this.addAction({change:"update-template-links"},(function(){e.runInitializer("UpdateDashboardTemplateLinks")}));this.addAction({change:"statistics-select-mailing"},(function(){i.mailingId=this.el.val();o(i.mailingId);return false}));function o(e){jQuery.ajax({type:"GET",url:i.urls.STATISTICS,data:{mailingId:e},success:function(e){var t;var i;var n;e=_.merge({common:[["no Data","0"]],clickers:[["no Data","0"]],clickersPercent:[0],openers:[["no Data","0"]],openersPercent:[0]},e);t=[];i=[];for(var r=0;r<e["common"].length;r++){var o=parseInt(e["common"][r][1]);t.push(e["common"][r][0]);i.push(o)}c3.generate(AGN.Lib.DashboardStatisticsService.data.statChartData.build(t,i));t=[];i=[];n=0;for(var r=0;r<e["clickers"].length;r++){var o=a(e["clickers"][r][1]*100,1);t.push(e["clickers"][r][0]);i.push(o);n+=o}if(!isNaN(n)&&n>0){for(var r=0;r<i.length;r++){t[r]+=" "+a(100*i[r]/n,1)+"%"}}var s=a(e["clickersPercent"][0]*100,1)+"%*";c3.generate(AGN.Lib.DashboardStatisticsService.data.clickChartData.build(s,t,i));t=[];i=[];n=0;for(var r=0;r<e["openers"].length;r++){var o=a(e["openers"][r][1]*100,1);t.push(e["openers"][r][0]);i.push(o);n+=o}if(!isNaN(n)&&n>0){for(var r=0;r<i.length;r++){t[r]+=" "+a(100*i[r]/n,1)+"%"}}var l=a(e["openersPercent"][0]*100,1)+"%*";c3.generate(AGN.Lib.DashboardStatisticsService.data.viewChartData.build(l,t,i));AGN.Lib.CoreInitializer.run("equalizer")}})}function a(e,t){return parseFloat(e).toFixed(t)*1}this.addAction({click:"showNewsPopup"},(function(){s()}));this.addAction({click:"chooseNewsType"},(function(){var e=this.el.parent().data("news-type");l(e)}));function s(){var e="MESSAGE";var i=0;var n=d("MESSAGE");if(n<1){var r=false;for(var o in t){if(t.hasOwnProperty(o)){var a=c(o);if(a>i){i=a;e=o;r=true}}}if(!r){for(o in t){if(t.hasOwnProperty(o)){a=d(o);if(a>i){i=a;e=o}}}}}AGN.Lib.Modal.createFromTemplate({openedNewsType:e},"modal-news");$("#buttonNewsCounter").text("");$(".l-news-menu-item").each((function(e){var t=$(this);var i=c(t.data("news-type"));if(i>0){t.find(".l-news-menu-counter").text(i)}else{t.find(".l-news-menu-counter").html("&nbsp;")}if($(this).hasClass("active")){l(t.data("news-type"))}}));u()}function l(e){if(c(e)>0){$("#newsCounter"+e).html("&nbsp;");$.ajax({url:n,data:{type:e}});t[e]["unreadCount"]=0;u()}}Number.isInteger=Number.isInteger||function(e){return typeof e==="number"&&isFinite(e)&&Math.floor(e)===e};function u(){var e=c("NEWS");var t=$("#buttonNewsCounter");var i=t.parent();var n="5px";var r="5px";var o="";if(e>0){i.removeClass("hidden");n="4px";r="4px";o=e}else{i.addClass("hidden")}i.parent().css("padding-top",n);i.parent().css("padding-bottom",r);t.text(o);return e}function c(e){if(!!t&&!!t[e]&&Number.isInteger(t[e]["unreadCount"])){return t[e]["unreadCount"]}return 0}function d(e){if(!!t&&!!t[e]&&Number.isInteger(t[e]["availableCount"])){return t[e]["availableCount"]}return 0}this.addInitializer("UpdateDashboardTemplateLinks",(function(e){if(!e){e=$(document)}var t=e.find(".js-template-link"),i=$('[data-action="update-template-links"]').val();_.each(t,(function(e){var t=$(e),n=t.attr("href");n=n.replace(/templateID=\d+/,"templateID="+i);t.attr("href",n)}))}));this.addInitializer("EndlessScroll",(function(e){if(!e){e=$(document)}var t=e.find(".js-endless-scroll");if(t.length<1){return}t.each((function(e){var t=1;var i=$(this);i.endlessScroll({pagesToKeep:null,fireOnce:true,fireDelay:1e3,loader:"",insertAfter:".js-endless-scroll .js-endless-scroll-content",ceaseFire:function(){return i.find(".message-list-item-last").length!==0},callback:function(){var e;AGN.Lib.Loader.prevent();e=$.ajax({method:"GET",url:i.data("url"),data:{page:t+1}});i.find(".js-endless-scroll-content").append('<div class="message-list-loader"><i class="icon icon-refresh icon-spin"></i></div>');e.done((function(e){t+=1;i.find(".js-endless-scroll-content").append(e);i.find(".message-list-loader").remove();AGN.Lib.CoreInitializer.run("icons-defs",i)}));return e}})}))}));this.addAction({click:"copy-recent-mailing"},(function(){p(this,"/mailing/{mailing-id}/copy.action")}));this.addAction({click:"edit-recent-mailing"},(function(){p(this,"/mailing/{mailing-id}/settings.action")}));this.addAction({click:"open-recent-mailing-statistic"},(function(){p(this,"/statistics/mailing/{mailing-id}/view.action")}));this.addAction({click:"delete-recent-mailing"},(function(){this.event.preventDefault();const e=$(this.el);$.ajax({url:AGN.url("/mailing/"+f(this)+"/confirmDelete.action"),data:{fromPage:"dashboard"}}).done((function(t){AGN.Lib.RenderMessages($(t));AGN.Lib.Confirm.create(t).done((function(t){e.closest("li").remove();AGN.Lib.Form.get(e).updateHtml(t)}))}))}));function f(e){return $(e.el).parent().data("mailing-id")}function p(e,t){e.event.preventDefault();const i=f(e);AGN.Lib.Page.reload(AGN.url(t.replace("{mailing-id}",i)))}}));(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.interact=e()}})((function(){var e,t,i;return function e(t,i,n){function r(a,s){if(!i[a]){if(!t[a]){var l=typeof require=="function"&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[a]={exports:{}};t[a][0].call(c.exports,(function(e){var i=t[a][1][e];return r(i?i:e)}),c,c.exports,e,t,i,n)}return i[a].exports}var o=typeof require=="function"&&require;for(var a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e,t,i){"use strict";if(typeof window==="undefined"){t.exports=function(t){e("./src/utils/window").init(t);return e("./src/index")}}else{t.exports=e("./src/index")}},{"./src/index":19,"./src/utils/window":52}],2:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=e("./utils/extend.js");function o(e,t){for(var i=0;i<t.length;i++){var n;n=t[i];var r=n;if(e.immediatePropagationStopped){break}r(e)}}var a=function(){function e(t){n(this,e);this.options=r({},t||{})}e.prototype.fire=function e(t){var i=void 0;var n="on"+t.type;var r=this.global;if(i=this[t.type]){o(t,i)}if(this[n]){this[n](t)}if(!t.propagationStopped&&r&&(i=r[t.type])){o(t,i)}};e.prototype.on=function e(t,i){if(this[t]){this[t].push(i)}else{this[t]=[i]}};e.prototype.off=function e(t,i){var n=this[t];var r=n?n.indexOf(i):-1;if(r!==-1){n.splice(r,1)}if(n&&n.length===0||!i){this[t]=undefined}};return e}();t.exports=a},{"./utils/extend.js":41}],3:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=e("./utils/extend");var o=e("./utils/getOriginXY");var a=e("./defaultOptions");var s=e("./utils/Signals").new();var l=function(){function e(t,i,l,u,c,d){var f=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;n(this,e);var p=t.target;var h=(p&&p.options||a).deltaSource;var g=o(p,c,l);var m=u==="start";var v=u==="end";var y=m?t.startCoords:t.curCoords;var b=t.prevEvent;c=c||t.element;var _=r({},y.page);var w=r({},y.client);_.x-=g.x;_.y-=g.y;w.x-=g.x;w.y-=g.y;this.ctrlKey=i.ctrlKey;this.altKey=i.altKey;this.shiftKey=i.shiftKey;this.metaKey=i.metaKey;this.button=i.button;this.buttons=i.buttons;this.target=c;this.currentTarget=c;this.relatedTarget=d||null;this.preEnd=f;this.type=l+(u||"");this.interaction=t;this.interactable=p;this.t0=m?t.downTimes[t.downTimes.length-1]:b.t0;var C={interaction:t,event:i,action:l,phase:u,element:c,related:d,page:_,client:w,coords:y,starting:m,ending:v,deltaSource:h,iEvent:this};s.fire("set-xy",C);if(v){this.pageX=b.pageX;this.pageY=b.pageY;this.clientX=b.clientX;this.clientY=b.clientY}else{this.pageX=_.x;this.pageY=_.y;this.clientX=w.x;this.clientY=w.y}this.x0=t.startCoords.page.x-g.x;this.y0=t.startCoords.page.y-g.y;this.clientX0=t.startCoords.client.x-g.x;this.clientY0=t.startCoords.client.y-g.y;s.fire("set-delta",C);this.timeStamp=y.timeStamp;this.dt=t.pointerDelta.timeStamp;this.duration=this.timeStamp-this.t0;this.speed=t.pointerDelta[h].speed;this.velocityX=t.pointerDelta[h].vx;this.velocityY=t.pointerDelta[h].vy;this.swipe=v||u==="inertiastart"?this.getSwipe():null;s.fire("new",C)}e.prototype.getSwipe=function e(){var t=this.interaction;if(t.prevEvent.speed<600||this.timeStamp-t.prevEvent.timeStamp>150){return null}var i=180*Math.atan2(t.prevEvent.velocityY,t.prevEvent.velocityX)/Math.PI;var n=22.5;if(i<0){i+=360}var r=135-n<=i&&i<225+n;var o=225-n<=i&&i<315+n;var a=!r&&(315-n<=i||i<45+n);var s=!o&&45-n<=i&&i<135+n;return{up:o,down:s,left:r,right:a,angle:i,speed:t.prevEvent.speed,velocity:{x:t.prevEvent.velocityX,y:t.prevEvent.velocityY}}};e.prototype.preventDefault=function e(){};e.prototype.stopImmediatePropagation=function e(){this.immediatePropagationStopped=this.propagationStopped=true};e.prototype.stopPropagation=function e(){this.propagationStopped=true};return e}();s.on("set-delta",(function(e){var t=e.iEvent,i=e.interaction,n=e.starting,r=e.deltaSource;var o=n?t:i.prevEvent;if(r==="client"){t.dx=t.clientX-o.clientX;t.dy=t.clientY-o.clientY}else{t.dx=t.pageX-o.pageX;t.dy=t.pageY-o.pageY}}));l.signals=s;t.exports=l},{"./defaultOptions":18,"./utils/Signals":34,"./utils/extend":41,"./utils/getOriginXY":42}],4:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=e("./utils/clone");var o=e("./utils/is");var a=e("./utils/events");var s=e("./utils/extend");var l=e("./actions/base");var u=e("./scope");var c=e("./Eventable");var d=e("./defaultOptions");var f=e("./utils/Signals").new();var p=e("./utils/domUtils"),h=p.getElementRect,g=p.nodeContains,m=p.trySelector,v=p.matchesSelector;var y=e("./utils/window"),b=y.getWindow;var _=e("./utils/arr"),w=_.contains;var C=e("./utils/browser"),A=C.wheelEvent;u.interactables=[];var E=function(){function e(t,i){n(this,e);i=i||{};this.target=t;this.events=new c;this._context=i.context||u.document;this._win=b(m(t)?this._context:t);this._doc=this._win.document;f.fire("new",{target:t,options:i,interactable:this,win:this._win});u.addDocument(this._doc,this._win);u.interactables.push(this);this.set(i)}e.prototype.setOnEvents=function e(t,i){var n="on"+t;if(o.function(i.onstart)){this.events[n+"start"]=i.onstart}if(o.function(i.onmove)){this.events[n+"move"]=i.onmove}if(o.function(i.onend)){this.events[n+"end"]=i.onend}if(o.function(i.oninertiastart)){this.events[n+"inertiastart"]=i.oninertiastart}return this};e.prototype.setPerAction=function e(t,i){for(var n in i){if(n in d[t]){if(o.object(i[n])){this.options[t][n]=r(this.options[t][n]||{});s(this.options[t][n],i[n]);if(o.object(d.perAction[n])&&"enabled"in d.perAction[n]){this.options[t][n].enabled=i[n].enabled===false?false:true}}else if(o.bool(i[n])&&o.object(d.perAction[n])){this.options[t][n].enabled=i[n]}else if(i[n]!==undefined){this.options[t][n]=i[n]}}}};e.prototype.getRect=function e(t){t=t||this.target;if(o.string(this.target)&&!o.element(t)){t=this._context.querySelector(this.target)}return h(t)};e.prototype.rectChecker=function e(t){if(o.function(t)){this.getRect=t;return this}if(t===null){delete this.options.getRect;return this}return this.getRect};e.prototype._backCompatOption=function e(t,i){if(m(i)||o.object(i)){this.options[t]=i;for(var n=0;n<l.names.length;n++){var r;r=l.names[n];var a=r;this.options[a][t]=i}return this}return this.options[t]};e.prototype.origin=function e(t){return this._backCompatOption("origin",t)};e.prototype.deltaSource=function e(t){if(t==="page"||t==="client"){this.options.deltaSource=t;return this}return this.options.deltaSource};e.prototype.context=function e(){return this._context};e.prototype.inContext=function e(t){return this._context===t.ownerDocument||g(this._context,t)};e.prototype.fire=function e(t){this.events.fire(t);return this};e.prototype._onOffMultiple=function e(t,i,n,r){if(o.string(i)&&i.search(" ")!==-1){i=i.trim().split(/ +/)}if(o.array(i)){for(var a=0;a<i.length;a++){var s;s=i[a];var l=s;this[t](l,n,r)}return true}if(o.object(i)){for(var u in i){this[t](u,i[u],n)}return true}};e.prototype.on=function t(i,n,r){if(this._onOffMultiple("on",i,n,r)){return this}if(i==="wheel"){i=A}if(w(e.eventTypes,i)){this.events.on(i,n)}else if(o.string(this.target)){a.addDelegate(this.target,this._context,i,n,r)}else{a.add(this.target,i,n,r)}return this};e.prototype.off=function t(i,n,r){if(this._onOffMultiple("off",i,n,r)){return this}if(i==="wheel"){i=A}if(w(e.eventTypes,i)){this.events.off(i,n)}else if(o.string(this.target)){a.removeDelegate(this.target,this._context,i,n,r)}else{a.remove(this.target,i,n,r)}return this};e.prototype.set=function t(i){if(!o.object(i)){i={}}this.options=r(d.base);var n=r(d.perAction);for(var a in l.methodDict){var s=l.methodDict[a];this.options[a]=r(d[a]);this.setPerAction(a,n);this[s](i[a])}for(var u=0;u<e.settingsMethods.length;u++){var c;c=e.settingsMethods[u];var p=c;this.options[p]=d.base[p];if(p in i){this[p](i[p])}}f.fire("set",{options:i,interactable:this});return this};e.prototype.unset=function e(){a.remove(this.target,"all");if(o.string(this.target)){for(var t in a.delegatedEvents){var i=a.delegatedEvents[t];if(i.selectors[0]===this.target&&i.contexts[0]===this._context){i.selectors.splice(0,1);i.contexts.splice(0,1);i.listeners.splice(0,1);if(!i.selectors.length){i[t]=null}}a.remove(this._context,t,a.delegateListener);a.remove(this._context,t,a.delegateUseCapture,true)}}else{a.remove(this,"all")}f.fire("unset",{interactable:this});u.interactables.splice(u.interactables.indexOf(this),1);for(var n=0;n<(u.interactions||[]).length;n++){var r;r=(u.interactions||[])[n];var s=r;if(s.target===this&&s.interacting()&&!s._ending){s.stop()}}return u.interact};return e}();u.interactables.indexOfElement=function e(t,i){i=i||u.document;for(var n=0;n<this.length;n++){var r=this[n];if(r.target===t&&r._context===i){return n}}return-1};u.interactables.get=function e(t,i,n){var r=this[this.indexOfElement(t,i&&i.context)];return r&&(o.string(t)||n||r.inContext(t))?r:null};u.interactables.forEachMatch=function(e,t){for(var i=0;i<this.length;i++){var n;n=this[i];var r=n;var a=void 0;if((o.string(r.target)?o.element(e)&&v(e,r.target):e===r.target)&&r.inContext(e)){a=t(r)}if(a!==undefined){return a}}};E.eventTypes=u.eventTypes=[];E.signals=f;E.settingsMethods=["deltaSource","origin","preventDefault","rectChecker"];t.exports=E},{"./Eventable":2,"./actions/base":6,"./defaultOptions":18,"./scope":33,"./utils/Signals":34,"./utils/arr":35,"./utils/browser":36,"./utils/clone":37,"./utils/domUtils":39,"./utils/events":40,"./utils/extend":41,"./utils/is":46,"./utils/window":52}],5:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=e("./scope");var o=e("./utils");var a=e("./utils/events");var s=e("./utils/browser");var l=e("./utils/domObjects");var u=e("./utils/interactionFinder");var c=e("./utils/Signals").new();var d={};var f=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer"];var p=0;r.interactions=[];var h=function(){function e(t){var i=t.pointerType;n(this,e);this.target=null;this.element=null;this.prepared={name:null,axis:null,edges:null};this.pointers=[];this.pointerIds=[];this.downTargets=[];this.downTimes=[];this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0};this.downEvent=null;this.downPointer={};this._eventTarget=null;this._curEventTarget=null;this.prevEvent=null;this.pointerIsDown=false;this.pointerWasMoved=false;this._interacting=false;this._ending=false;this.pointerType=i;c.fire("new",this);r.interactions.push(this)}e.prototype.pointerDown=function e(t,i,n){var r=this.updatePointer(t,i,true);c.fire("down",{pointer:t,event:i,eventTarget:n,pointerIndex:r,interaction:this})};e.prototype.start=function e(t,i,n){if(this.interacting()||!this.pointerIsDown||this.pointerIds.length<(t.name==="gesture"?2:1)){return}if(r.interactions.indexOf(this)===-1){r.interactions.push(this)}o.copyAction(this.prepared,t);this.target=i;this.element=n;c.fire("action-start",{interaction:this,event:this.downEvent})};e.prototype.pointerMove=function t(i,n,r){if(!this.simulation){this.updatePointer(i);o.setCoords(this.curCoords,this.pointers)}var a=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y;var s=void 0;var l=void 0;if(this.pointerIsDown&&!this.pointerWasMoved){s=this.curCoords.client.x-this.startCoords.client.x;l=this.curCoords.client.y-this.startCoords.client.y;this.pointerWasMoved=o.hypot(s,l)>e.pointerMoveTolerance}var u={pointer:i,pointerIndex:this.getPointerIndex(i),event:n,eventTarget:r,dx:s,dy:l,duplicate:a,interaction:this,interactingBeforeMove:this.interacting()};if(!a){o.setCoordDeltas(this.pointerDelta,this.prevCoords,this.curCoords)}c.fire("move",u);if(!a){if(this.interacting()){this.doMove(u)}if(this.pointerWasMoved){o.copyCoords(this.prevCoords,this.curCoords)}}};e.prototype.doMove=function e(t){t=o.extend({pointer:this.pointers[0],event:this.prevEvent,eventTarget:this._eventTarget,interaction:this},t||{});c.fire("before-action-move",t);if(!this._dontFireMove){c.fire("action-move",t)}this._dontFireMove=false};e.prototype.pointerUp=function e(t,i,n,r){var o=this.getPointerIndex(t);c.fire(/cancel$/i.test(i.type)?"cancel":"up",{pointer:t,pointerIndex:o,event:i,eventTarget:n,curEventTarget:r,interaction:this});if(!this.simulation){this.end(i)}this.pointerIsDown=false;this.removePointer(t,i)};e.prototype.end=function e(t){this._ending=true;t=t||this.prevEvent;if(this.interacting()){c.fire("action-end",{event:t,interaction:this})}this.stop();this._ending=false};e.prototype.currentAction=function e(){return this._interacting?this.prepared.name:null};e.prototype.interacting=function e(){return this._interacting};e.prototype.stop=function e(){c.fire("stop",{interaction:this});if(this._interacting){c.fire("stop-active",{interaction:this});c.fire("stop-"+this.prepared.name,{interaction:this})}this.target=this.element=null;this._interacting=false;this.prepared.name=this.prevEvent=null};e.prototype.getPointerIndex=function e(t){if(this.pointerType==="mouse"||this.pointerType==="pen"){return 0}return this.pointerIds.indexOf(o.getPointerId(t))};e.prototype.updatePointer=function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:i&&/(down|start)$/i.test(i.type);var r=o.getPointerId(t);var a=this.getPointerIndex(t);if(a===-1){a=this.pointerIds.length;this.pointerIds[a]=r}if(n){c.fire("update-pointer-down",{pointer:t,event:i,down:n,pointerId:r,pointerIndex:a,interaction:this})}this.pointers[a]=t;return a};e.prototype.removePointer=function e(t,i){var n=this.getPointerIndex(t);if(n===-1){return}c.fire("remove-pointer",{pointer:t,event:i,pointerIndex:n,interaction:this});this.pointers.splice(n,1);this.pointerIds.splice(n,1);this.downTargets.splice(n,1);this.downTimes.splice(n,1)};e.prototype._updateEventTargets=function e(t,i){this._eventTarget=t;this._curEventTarget=i};return e}();for(var g=0;g<f.length;g++){var m=f[g];d[m]=v(m)}function v(e){return function(t){var i=o.getPointerType(t);var n=o.getEventTargets(t),a=n[0],l=n[1];var c=[];if(s.supportsTouch&&/touch/.test(t.type)){p=(new Date).getTime();for(var d=0;d<t.changedTouches.length;d++){var f;f=t.changedTouches[d];var g=f;var m=g;var v=u.search(m,t.type,a);c.push([m,v||new h({pointerType:i})])}}else{var y=false;if(!s.supportsPointerEvent&&/mouse/.test(t.type)){for(var b=0;b<r.interactions.length&&!y;b++){y=r.interactions[b].pointerType!=="mouse"&&r.interactions[b].pointerIsDown}y=y||(new Date).getTime()-p<500||t.timeStamp===0}if(!y){var _=u.search(t,t.type,a);if(!_){_=new h({pointerType:i})}c.push([t,_])}}for(var w=0;w<c.length;w++){var C=c[w];var A=C[0];var E=C[1];E._updateEventTargets(a,l);E[e](A,t,a,l)}}}function y(e){for(var t=0;t<r.interactions.length;t++){var i;i=r.interactions[t];var n=i;n.end(e);c.fire("endall",{event:e,interaction:n})}}var b={};var _=s.pEventTypes;if(l.PointerEvent){b[_.down]=d.pointerDown;b[_.move]=d.pointerMove;b[_.up]=d.pointerUp;b[_.cancel]=d.pointerUp}else{b.mousedown=d.pointerDown;b.mousemove=d.pointerMove;b.mouseup=d.pointerUp;b.touchstart=d.pointerDown;b.touchmove=d.pointerMove;b.touchend=d.pointerUp;b.touchcancel=d.pointerUp}b.blur=y;function w(e,t){var i=e.doc;var n=t.indexOf("add")===0?a.add:a.remove;for(var o in r.delegatedEvents){n(i,o,a.delegateListener);n(i,o,a.delegateUseCapture,true)}for(var l in b){n(i,l,b[l],s.isIOS?{passive:false}:undefined)}}c.on("update-pointer-down",(function(e){var t=e.interaction,i=e.pointer,n=e.pointerId,r=e.pointerIndex,a=e.event,s=e.eventTarget,l=e.down;t.pointerIds[r]=n;t.pointers[r]=i;if(l){t.pointerIsDown=true}if(!t.interacting()){o.setCoords(t.startCoords,t.pointers);o.copyCoords(t.curCoords,t.startCoords);o.copyCoords(t.prevCoords,t.startCoords);t.downEvent=a;t.downTimes[r]=t.curCoords.timeStamp;t.downTargets[r]=s||a&&o.getEventTargets(a)[0];t.pointerWasMoved=false;o.pointerExtend(t.downPointer,i)}}));r.signals.on("add-document",w);r.signals.on("remove-document",w);h.pointerMoveTolerance=1;h.doOnInteractions=v;h.endAll=y;h.signals=c;h.docEvents=b;r.endAllInteractions=y;t.exports=h},{"./scope":33,"./utils":44,"./utils/Signals":34,"./utils/browser":36,"./utils/domObjects":38,"./utils/events":40,"./utils/interactionFinder":45}],6:[function(e,t,i){"use strict";var n=e("../Interaction");var r=e("../InteractEvent");var o={firePrepared:a,names:[],methodDict:{}};n.signals.on("action-start",(function(e){var t=e.interaction,i=e.event;t._interacting=true;a(t,i,"start")}));n.signals.on("action-move",(function(e){var t=e.interaction,i=e.event,n=e.preEnd;a(t,i,"move",n);if(!t.interacting()){return false}}));n.signals.on("action-end",(function(e){var t=e.interaction,i=e.event;a(t,i,"end")}));function a(e,t,i,n){var o=e.prepared.name;var a=new r(e,t,o,i,e.element,null,n);e.target.fire(a);e.prevEvent=a}t.exports=o},{"../InteractEvent":3,"../Interaction":5}],7:[function(e,t,i){"use strict";var n=e("./base");var r=e("../utils");var o=e("../InteractEvent");var a=e("../Interactable");var s=e("../Interaction");var l=e("../defaultOptions");var u={defaults:{enabled:false,mouseButtons:null,origin:null,snap:null,restrict:null,inertia:null,autoScroll:null,startAxis:"xy",lockAxis:"xy"},checker:function e(t,i,n){var r=n.options.drag;return r.enabled?{name:"drag",axis:r.lockAxis==="start"?r.startAxis:r.lockAxis}:null},getCursor:function e(){return"move"}};s.signals.on("before-action-move",(function(e){var t=e.interaction;if(t.prepared.name!=="drag"){return}var i=t.prepared.axis;if(i==="x"){t.curCoords.page.y=t.startCoords.page.y;t.curCoords.client.y=t.startCoords.client.y;t.pointerDelta.page.speed=Math.abs(t.pointerDelta.page.vx);t.pointerDelta.client.speed=Math.abs(t.pointerDelta.client.vx);t.pointerDelta.client.vy=0;t.pointerDelta.page.vy=0}else if(i==="y"){t.curCoords.page.x=t.startCoords.page.x;t.curCoords.client.x=t.startCoords.client.x;t.pointerDelta.page.speed=Math.abs(t.pointerDelta.page.vy);t.pointerDelta.client.speed=Math.abs(t.pointerDelta.client.vy);t.pointerDelta.client.vx=0;t.pointerDelta.page.vx=0}}));o.signals.on("new",(function(e){var t=e.iEvent,i=e.interaction;if(t.type!=="dragmove"){return}var n=i.prepared.axis;if(n==="x"){t.pageY=i.startCoords.page.y;t.clientY=i.startCoords.client.y;t.dy=0}else if(n==="y"){t.pageX=i.startCoords.page.x;t.clientX=i.startCoords.client.x;t.dx=0}}));a.prototype.draggable=function(e){if(r.is.object(e)){this.options.drag.enabled=e.enabled===false?false:true;this.setPerAction("drag",e);this.setOnEvents("drag",e);if(/^(xy|x|y|start)$/.test(e.lockAxis)){this.options.drag.lockAxis=e.lockAxis}if(/^(xy|x|y)$/.test(e.startAxis)){this.options.drag.startAxis=e.startAxis}return this}if(r.is.bool(e)){this.options.drag.enabled=e;if(!e){this.ondragstart=this.ondragstart=this.ondragend=null}return this}return this.options.drag};n.drag=u;n.names.push("drag");r.merge(a.eventTypes,["dragstart","dragmove","draginertiastart","draginertiaresume","dragend"]);n.methodDict.drag="draggable";l.drag=u.defaults;t.exports=u},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":44,"./base":6}],8:[function(e,t,i){"use strict";var n=e("./base");var r=e("../utils");var o=e("../scope");var a=e("../interact");var s=e("../InteractEvent");var l=e("../Interactable");var u=e("../Interaction");var c=e("../defaultOptions");var d={defaults:{enabled:false,accept:null,overlap:"pointer"}};var f=false;u.signals.on("action-start",(function(e){var t=e.interaction,i=e.event;if(t.prepared.name!=="drag"){return}t.activeDrops.dropzones=[];t.activeDrops.elements=[];t.activeDrops.rects=[];t.dropEvents=null;if(!t.dynamicDrop){g(t.activeDrops,t.element)}var n=t.prevEvent;var r=v(t,i,n);if(r.activate){h(t.activeDrops,r.activate)}}));s.signals.on("new",(function(e){var t=e.interaction,i=e.iEvent,n=e.event;if(i.type!=="dragmove"&&i.type!=="dragend"){return}var r=t.element;var o=i;var a=m(o,n,r);t.dropTarget=a.dropzone;t.dropElement=a.element;t.dropEvents=v(t,n,o)}));u.signals.on("action-move",(function(e){var t=e.interaction;if(t.prepared.name!=="drag"){return}y(t,t.dropEvents)}));u.signals.on("action-end",(function(e){var t=e.interaction;if(t.prepared.name==="drag"){y(t,t.dropEvents)}}));u.signals.on("stop-drag",(function(e){var t=e.interaction;t.activeDrops={dropzones:null,elements:null,rects:null};t.dropEvents=null}));function p(e,t){var i=[];var n=[];for(var a=0;a<o.interactables.length;a++){var s;s=o.interactables[a];var l=s;if(!l.options.drop.enabled){continue}var u=l.options.drop.accept;if(r.is.element(u)&&u!==t||r.is.string(u)&&!r.matchesSelector(t,u)){continue}var c=r.is.string(l.target)?l._context.querySelectorAll(l.target):[l.target];for(var d=0;d<c.length;d++){var f;f=c[d];var p=f;if(p!==t){i.push(l);n.push(p)}}}return{elements:n,dropzones:i}}function h(e,t){var i=void 0;for(var n=0;n<e.dropzones.length;n++){var r=e.dropzones[n];var o=e.elements[n];if(o!==i){t.target=o;r.fire(t)}i=o}}function g(e,t){var i=p(e,t);e.dropzones=i.dropzones;e.elements=i.elements;e.rects=[];for(var n=0;n<e.dropzones.length;n++){e.rects[n]=e.dropzones[n].getRect(e.elements[n])}}function m(e,t,i){var n=e.interaction;var o=[];if(f){g(n.activeDrops,i)}for(var a=0;a<n.activeDrops.dropzones.length;a++){var s=n.activeDrops.dropzones[a];var l=n.activeDrops.elements[a];var u=n.activeDrops.rects[a];o.push(s.dropCheck(e,t,n.target,i,l,u)?l:null)}var c=r.indexOfDeepestElement(o);return{dropzone:n.activeDrops.dropzones[c]||null,element:n.activeDrops.elements[c]||null}}function v(e,t,i){var n={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};var o={dragEvent:i,interaction:e,target:e.dropElement,dropzone:e.dropTarget,relatedTarget:i.target,draggable:i.interactable,timeStamp:i.timeStamp};if(e.dropElement!==e.prevDropElement){if(e.prevDropTarget){n.leave=r.extend({type:"dragleave"},o);i.dragLeave=n.leave.target=e.prevDropElement;i.prevDropzone=n.leave.dropzone=e.prevDropTarget}if(e.dropTarget){n.enter={dragEvent:i,interaction:e,target:e.dropElement,dropzone:e.dropTarget,relatedTarget:i.target,draggable:i.interactable,timeStamp:i.timeStamp,type:"dragenter"};i.dragEnter=e.dropElement;i.dropzone=e.dropTarget}}if(i.type==="dragend"&&e.dropTarget){n.drop=r.extend({type:"drop"},o);i.dropzone=e.dropTarget;i.relatedTarget=e.dropElement}if(i.type==="dragstart"){n.activate=r.extend({type:"dropactivate"},o);n.activate.target=null;n.activate.dropzone=null}if(i.type==="dragend"){n.deactivate=r.extend({type:"dropdeactivate"},o);n.deactivate.target=null;n.deactivate.dropzone=null}if(i.type==="dragmove"&&e.dropTarget){n.move=r.extend({dragmove:i,type:"dropmove"},o);i.dropzone=e.dropTarget}return n}function y(e,t){var i=e.activeDrops,n=e.prevDropTarget,r=e.dropTarget,o=e.dropElement;if(t.leave){n.fire(t.leave)}if(t.move){r.fire(t.move)}if(t.enter){r.fire(t.enter)}if(t.drop){r.fire(t.drop)}if(t.deactivate){h(i,t.deactivate)}e.prevDropTarget=r;e.prevDropElement=o}l.prototype.dropzone=function(e){if(r.is.object(e)){this.options.drop.enabled=e.enabled===false?false:true;if(r.is.function(e.ondrop)){this.events.ondrop=e.ondrop}if(r.is.function(e.ondropactivate)){this.events.ondropactivate=e.ondropactivate}if(r.is.function(e.ondropdeactivate)){this.events.ondropdeactivate=e.ondropdeactivate}if(r.is.function(e.ondragenter)){this.events.ondragenter=e.ondragenter}if(r.is.function(e.ondragleave)){this.events.ondragleave=e.ondragleave}if(r.is.function(e.ondropmove)){this.events.ondropmove=e.ondropmove}if(/^(pointer|center)$/.test(e.overlap)){this.options.drop.overlap=e.overlap}else if(r.is.number(e.overlap)){this.options.drop.overlap=Math.max(Math.min(1,e.overlap),0)}if("accept"in e){this.options.drop.accept=e.accept}if("checker"in e){this.options.drop.checker=e.checker}return this}if(r.is.bool(e)){this.options.drop.enabled=e;if(!e){this.ondragenter=this.ondragleave=this.ondrop=this.ondropactivate=this.ondropdeactivate=null}return this}return this.options.drop};l.prototype.dropCheck=function(e,t,i,n,o,a){var s=false;if(!(a=a||this.getRect(o))){return this.options.drop.checker?this.options.drop.checker(e,t,s,this,o,i,n):false}var l=this.options.drop.overlap;if(l==="pointer"){var u=r.getOriginXY(i,n,"drag");var c=r.getPageXY(e);c.x+=u.x;c.y+=u.y;var d=c.x>a.left&&c.x<a.right;var f=c.y>a.top&&c.y<a.bottom;s=d&&f}var p=i.getRect(n);if(p&&l==="center"){var h=p.left+p.width/2;var g=p.top+p.height/2;s=h>=a.left&&h<=a.right&&g>=a.top&&g<=a.bottom}if(p&&r.is.number(l)){var m=Math.max(0,Math.min(a.right,p.right)-Math.max(a.left,p.left))*Math.max(0,Math.min(a.bottom,p.bottom)-Math.max(a.top,p.top));var v=m/(p.width*p.height);s=v>=l}if(this.options.drop.checker){s=this.options.drop.checker(e,t,s,this,o,i,n)}return s};l.signals.on("unset",(function(e){var t=e.interactable;t.dropzone(false)}));l.settingsMethods.push("dropChecker");u.signals.on("new",(function(e){e.dropTarget=null;e.dropElement=null;e.prevDropTarget=null;e.prevDropElement=null;e.dropEvents=null;e.activeDrops={dropzones:[],elements:[],rects:[]}}));u.signals.on("stop",(function(e){var t=e.interaction;t.dropTarget=t.dropElement=t.prevDropTarget=t.prevDropElement=null}));a.dynamicDrop=function(e){if(r.is.bool(e)){f=e;return a}return f};r.merge(l.eventTypes,["dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop"]);n.methodDict.drop="dropzone";c.drop=d.defaults;t.exports=d},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../interact":21,"../scope":33,"../utils":44,"./base":6}],9:[function(e,t,i){"use strict";var n=e("./base");var r=e("../utils");var o=e("../InteractEvent");var a=e("../Interactable");var s=e("../Interaction");var l=e("../defaultOptions");var u={defaults:{enabled:false,origin:null,restrict:null},checker:function e(t,i,n,r,o){if(o.pointerIds.length>=2){return{name:"gesture"}}return null},getCursor:function e(){return""}};o.signals.on("new",(function(e){var t=e.iEvent,i=e.interaction;if(t.type!=="gesturestart"){return}t.ds=0;i.gesture.startDistance=i.gesture.prevDistance=t.distance;i.gesture.startAngle=i.gesture.prevAngle=t.angle;i.gesture.scale=1}));o.signals.on("new",(function(e){var t=e.iEvent,i=e.interaction;if(t.type!=="gesturemove"){return}t.ds=t.scale-i.gesture.scale;i.target.fire(t);i.gesture.prevAngle=t.angle;i.gesture.prevDistance=t.distance;if(t.scale!==Infinity&&t.scale!==null&&t.scale!==undefined&&!isNaN(t.scale)){i.gesture.scale=t.scale}}));a.prototype.gesturable=function(e){if(r.is.object(e)){this.options.gesture.enabled=e.enabled===false?false:true;this.setPerAction("gesture",e);this.setOnEvents("gesture",e);return this}if(r.is.bool(e)){this.options.gesture.enabled=e;if(!e){this.ongesturestart=this.ongesturestart=this.ongestureend=null}return this}return this.options.gesture};o.signals.on("set-delta",(function(e){var t=e.interaction,i=e.iEvent,n=e.action,a=e.event,s=e.starting,l=e.ending,u=e.deltaSource;if(n!=="gesture"){return}var c=t.pointers;i.touches=[c[0],c[1]];if(s){i.distance=r.touchDistance(c,u);i.box=r.touchBBox(c);i.scale=1;i.ds=0;i.angle=r.touchAngle(c,undefined,u);i.da=0}else if(l||a instanceof o){i.distance=t.prevEvent.distance;i.box=t.prevEvent.box;i.scale=t.prevEvent.scale;i.ds=i.scale-1;i.angle=t.prevEvent.angle;i.da=i.angle-t.gesture.startAngle}else{i.distance=r.touchDistance(c,u);i.box=r.touchBBox(c);i.scale=i.distance/t.gesture.startDistance;i.angle=r.touchAngle(c,t.gesture.prevAngle,u);i.ds=i.scale-t.gesture.prevScale;i.da=i.angle-t.gesture.prevAngle}}));s.signals.on("new",(function(e){e.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0}}));n.gesture=u;n.names.push("gesture");r.merge(a.eventTypes,["gesturestart","gesturemove","gestureend"]);n.methodDict.gesture="gesturable";l.gesture=u.defaults;t.exports=u},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":44,"./base":6}],10:[function(e,t,i){"use strict";var n=e("./base");var r=e("../utils");var o=e("../utils/browser");var a=e("../InteractEvent");var s=e("../Interactable");var l=e("../Interaction");var u=e("../defaultOptions");var c=o.supportsTouch||o.supportsPointerEvent?20:10;var d={defaults:{enabled:false,mouseButtons:null,origin:null,snap:null,restrict:null,inertia:null,autoScroll:null,square:false,preserveAspectRatio:false,axis:"xy",margin:NaN,edges:null,invert:"none"},checker:function e(t,i,n,o,a,s){if(!s){return null}var l=r.extend({},a.curCoords.page);var u=n.options;if(u.resize.enabled){var d=u.resize;var p={left:false,right:false,top:false,bottom:false};if(r.is.object(d.edges)){for(var h in p){p[h]=f(h,d.edges[h],l,a._eventTarget,o,s,d.margin||c)}p.left=p.left&&!p.right;p.top=p.top&&!p.bottom;if(p.left||p.right||p.top||p.bottom){return{name:"resize",edges:p}}}else{var g=u.resize.axis!=="y"&&l.x>s.right-c;var m=u.resize.axis!=="x"&&l.y>s.bottom-c;if(g||m){return{name:"resize",axes:(g?"x":"")+(m?"y":"")}}}}return null},cursors:o.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"},getCursor:function e(t){if(t.axis){return d.cursors[t.name+t.axis]}else if(t.edges){var i="";var n=["top","bottom","left","right"];for(var r=0;r<4;r++){if(t.edges[n[r]]){i+=n[r]}}return d.cursors[i]}}};a.signals.on("new",(function(e){var t=e.iEvent,i=e.interaction;if(t.type!=="resizestart"||!i.prepared.edges){return}var n=i.target.getRect(i.element);var o=i.target.options.resize;if(o.square||o.preserveAspectRatio){var a=r.extend({},i.prepared.edges);a.top=a.top||a.left&&!a.bottom;a.left=a.left||a.top&&!a.right;a.bottom=a.bottom||a.right&&!a.top;a.right=a.right||a.bottom&&!a.left;i.prepared._linkedEdges=a}else{i.prepared._linkedEdges=null}if(o.preserveAspectRatio){i.resizeStartAspectRatio=n.width/n.height}i.resizeRects={start:n,current:r.extend({},n),inverted:r.extend({},n),previous:r.extend({},n),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}};t.rect=i.resizeRects.inverted;t.deltaRect=i.resizeRects.delta}));a.signals.on("new",(function(e){var t=e.iEvent,i=e.phase,n=e.interaction;if(i!=="move"||!n.prepared.edges){return}var o=n.target.options.resize;var a=o.invert;var s=a==="reposition"||a==="negate";var l=n.prepared.edges;var u=n.resizeRects.start;var c=n.resizeRects.current;var d=n.resizeRects.inverted;var f=n.resizeRects.delta;var p=r.extend(n.resizeRects.previous,d);var h=l;var g=t.dx;var m=t.dy;if(o.preserveAspectRatio||o.square){var v=o.preserveAspectRatio?n.resizeStartAspectRatio:1;l=n.prepared._linkedEdges;if(h.left&&h.bottom||h.right&&h.top){m=-g/v}else if(h.left||h.right){m=g/v}else if(h.top||h.bottom){g=m*v}}if(l.top){c.top+=m}if(l.bottom){c.bottom+=m}if(l.left){c.left+=g}if(l.right){c.right+=g}if(s){r.extend(d,c);if(a==="reposition"){var y=void 0;if(d.top>d.bottom){y=d.top;d.top=d.bottom;d.bottom=y}if(d.left>d.right){y=d.left;d.left=d.right;d.right=y}}}else{d.top=Math.min(c.top,u.bottom);d.bottom=Math.max(c.bottom,u.top);d.left=Math.min(c.left,u.right);d.right=Math.max(c.right,u.left)}d.width=d.right-d.left;d.height=d.bottom-d.top;for(var b in d){f[b]=d[b]-p[b]}t.edges=n.prepared.edges;t.rect=d;t.deltaRect=f}));s.prototype.resizable=function(e){if(r.is.object(e)){this.options.resize.enabled=e.enabled===false?false:true;this.setPerAction("resize",e);this.setOnEvents("resize",e);if(/^x$|^y$|^xy$/.test(e.axis)){this.options.resize.axis=e.axis}else if(e.axis===null){this.options.resize.axis=u.resize.axis}if(r.is.bool(e.preserveAspectRatio)){this.options.resize.preserveAspectRatio=e.preserveAspectRatio}else if(r.is.bool(e.square)){this.options.resize.square=e.square}return this}if(r.is.bool(e)){this.options.resize.enabled=e;if(!e){this.onresizestart=this.onresizestart=this.onresizeend=null}return this}return this.options.resize};function f(e,t,i,n,o,a,s){if(!t){return false}if(t===true){var l=r.is.number(a.width)?a.width:a.right-a.left;var u=r.is.number(a.height)?a.height:a.bottom-a.top;if(l<0){if(e==="left"){e="right"}else if(e==="right"){e="left"}}if(u<0){if(e==="top"){e="bottom"}else if(e==="bottom"){e="top"}}if(e==="left"){return i.x<(l>=0?a.left:a.right)+s}if(e==="top"){return i.y<(u>=0?a.top:a.bottom)+s}if(e==="right"){return i.x>(l>=0?a.right:a.left)-s}if(e==="bottom"){return i.y>(u>=0?a.bottom:a.top)-s}}if(!r.is.element(n)){return false}return r.is.element(t)?t===n:r.matchesUpTo(n,t,o)}l.signals.on("new",(function(e){e.resizeAxes="xy"}));a.signals.on("set-delta",(function(e){var t=e.interaction,i=e.iEvent,n=e.action;if(n!=="resize"||!t.resizeAxes){return}var r=t.target.options;if(r.resize.square){if(t.resizeAxes==="y"){i.dx=i.dy}else{i.dy=i.dx}i.axes="xy"}else{i.axes=t.resizeAxes;if(t.resizeAxes==="x"){i.dy=0}else if(t.resizeAxes==="y"){i.dx=0}}}));n.resize=d;n.names.push("resize");r.merge(s.eventTypes,["resizestart","resizemove","resizeinertiastart","resizeinertiaresume","resizeend"]);n.methodDict.resize="resizable";u.resize=d.defaults;t.exports=d},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":44,"../utils/browser":36,"./base":6}],11:[function(e,t,i){"use strict";var n=e("./utils/raf");var r=e("./utils/window").getWindow;var o=e("./utils/is");var a=e("./utils/domUtils");var s=e("./Interaction");var l=e("./defaultOptions");var u={defaults:{enabled:false,container:null,margin:60,speed:300},interaction:null,i:null,x:0,y:0,isScrolling:false,prevTime:0,start:function e(t){u.isScrolling=true;n.cancel(u.i);u.interaction=t;u.prevTime=(new Date).getTime();u.i=n.request(u.scroll)},stop:function e(){u.isScrolling=false;n.cancel(u.i)},scroll:function e(){var t=u.interaction.target.options[u.interaction.prepared.name].autoScroll;var i=t.container||r(u.interaction.element);var a=(new Date).getTime();var s=(a-u.prevTime)/1e3;var l=t.speed*s;if(l>=1){if(o.window(i)){i.scrollBy(u.x*l,u.y*l)}else if(i){i.scrollLeft+=u.x*l;i.scrollTop+=u.y*l}u.prevTime=a}if(u.isScrolling){n.cancel(u.i);u.i=n.request(u.scroll)}},check:function e(t,i){var n=t.options;return n[i].autoScroll&&n[i].autoScroll.enabled},onInteractionMove:function e(t){var i=t.interaction,n=t.pointer;if(!(i.interacting()&&u.check(i.target,i.prepared.name))){return}if(i.simulation){u.x=u.y=0;return}var s=void 0;var l=void 0;var c=void 0;var d=void 0;var f=i.target.options[i.prepared.name].autoScroll;var p=f.container||r(i.element);if(o.window(p)){d=n.clientX<u.margin;s=n.clientY<u.margin;l=n.clientX>p.innerWidth-u.margin;c=n.clientY>p.innerHeight-u.margin}else{var h=a.getElementClientRect(p);d=n.clientX<h.left+u.margin;s=n.clientY<h.top+u.margin;l=n.clientX>h.right-u.margin;c=n.clientY>h.bottom-u.margin}u.x=l?1:d?-1:0;u.y=c?1:s?-1:0;if(!u.isScrolling){u.margin=f.margin;u.speed=f.speed;u.start(i)}}};s.signals.on("stop-active",(function(){u.stop()}));s.signals.on("action-move",u.onInteractionMove);l.perAction.autoScroll=u.defaults;t.exports=u},{"./Interaction":5,"./defaultOptions":18,"./utils/domUtils":39,"./utils/is":46,"./utils/raf":50,"./utils/window":52}],12:[function(e,t,i){"use strict";var n=e("../Interactable");var r=e("../actions/base");var o=e("../utils/is");var a=e("../utils/domUtils");var s=e("../utils"),l=s.warnOnce;n.prototype.getAction=function(e,t,i,n){var r=this.defaultActionChecker(e,t,i,n);if(this.options.actionChecker){return this.options.actionChecker(e,t,r,this,n,i)}return r};n.prototype.ignoreFrom=l((function(e){return this._backCompatOption("ignoreFrom",e)}),"Interactable.ignoreForm() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue}).");n.prototype.allowFrom=l((function(e){return this._backCompatOption("allowFrom",e)}),"Interactable.allowForm() has been deprecated. Use Interactble.draggable({allowFrom: newValue}).");n.prototype.testIgnore=function(e,t,i){if(!e||!o.element(i)){return false}if(o.string(e)){return a.matchesUpTo(i,e,t)}else if(o.element(e)){return a.nodeContains(e,i)}return false};n.prototype.testAllow=function(e,t,i){if(!e){return true}if(!o.element(i)){return false}if(o.string(e)){return a.matchesUpTo(i,e,t)}else if(o.element(e)){return a.nodeContains(e,i)}return false};n.prototype.testIgnoreAllow=function(e,t,i){return!this.testIgnore(e.ignoreFrom,t,i)&&this.testAllow(e.allowFrom,t,i)};n.prototype.actionChecker=function(e){if(o.function(e)){this.options.actionChecker=e;return this}if(e===null){delete this.options.actionChecker;return this}return this.options.actionChecker};n.prototype.styleCursor=function(e){if(o.bool(e)){this.options.styleCursor=e;return this}if(e===null){delete this.options.styleCursor;return this}return this.options.styleCursor};n.prototype.defaultActionChecker=function(e,t,i,n){var o=this.getRect(n);var a=t.buttons||{0:1,1:4,3:8,4:16}[t.button];var s=null;for(var l=0;l<r.names.length;l++){var u;u=r.names[l];var c=u;if(i.pointerIsDown&&/mouse|pointer/.test(i.pointerType)&&(a&this.options[c].mouseButtons)===0){continue}s=r[c].checker(e,t,this,n,i,o);if(s){return s}}}},{"../Interactable":4,"../actions/base":6,"../utils":44,"../utils/domUtils":39,"../utils/is":46}],13:[function(e,t,i){"use strict";var n=e("../interact");var r=e("../Interactable");var o=e("../Interaction");var a=e("../actions/base");var s=e("../defaultOptions");var l=e("../scope");var u=e("../utils");var c=e("../utils/Signals").new();e("./InteractableMethods");var d={signals:c,withinInteractionLimit:m,maxInteractions:Infinity,defaults:{perAction:{manualStart:false,max:Infinity,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}},setActionDefaults:function e(t){u.extend(t.defaults,d.defaults.perAction)},validateAction:f};o.signals.on("down",(function(e){var t=e.interaction,i=e.pointer,n=e.event,r=e.eventTarget;if(t.interacting()){return}var o=h(t,i,n,r);g(t,o)}));o.signals.on("move",(function(e){var t=e.interaction,i=e.pointer,n=e.event,r=e.eventTarget;if(t.pointerType!=="mouse"||t.pointerIsDown||t.interacting()){return}var o=h(t,i,n,r);g(t,o)}));o.signals.on("move",(function(e){var t=e.interaction,i=e.event;if(!t.pointerIsDown||t.interacting()||!t.pointerWasMoved||!t.prepared.name){return}c.fire("before-start",e);var n=t.target;if(t.prepared.name&&n){if(n.options[t.prepared.name].manualStart||!m(n,t.element,t.prepared)){t.stop(i)}else{t.start(t.prepared,n,t.element)}}}));function f(e,t,i,n){if(u.is.object(e)&&t.testIgnoreAllow(t.options[e.name],i,n)&&t.options[e.name].enabled&&m(t,i,e)){return e}return null}function p(e,t,i,n,r,o){for(var a=0,s=n.length;a<s;a++){var l=n[a];var u=r[a];var c=f(l.getAction(t,i,e,u),l,u,o);if(c){return{action:c,target:l,element:u}}}return{}}function h(e,t,i,n){var r=[];var o=[];var a=n;function s(e){r.push(e);o.push(a)}while(u.is.element(a)){r=[];o=[];l.interactables.forEachMatch(a,s);var c=p(e,t,i,r,o,n);if(c.action&&!c.target.options[c.action.name].manualStart){return c}a=u.parentNode(a)}return{}}function g(e,t){var i=t.action,n=t.target,r=t.element;i=i||{};if(e.target&&e.target.options.styleCursor){e.target._doc.documentElement.style.cursor=""}e.target=n;e.element=r;u.copyAction(e.prepared,i);if(n&&n.options.styleCursor){var o=i?a[i.name].getCursor(i):"";e.target._doc.documentElement.style.cursor=o}c.fire("prepared",{interaction:e})}o.signals.on("stop",(function(e){var t=e.interaction;var i=t.target;if(i&&i.options.styleCursor){i._doc.documentElement.style.cursor=""}}));function m(e,t,i){var n=e.options;var r=n[i.name].max;var o=n[i.name].maxPerElement;var a=0;var s=0;var u=0;if(!(r&&o&&d.maxInteractions)){return}for(var c=0;c<l.interactions.length;c++){var f;f=l.interactions[c];var p=f;var h=p.prepared.name;if(!p.interacting()){continue}a++;if(a>=d.maxInteractions){return false}if(p.target!==e){continue}s+=h===i.name|0;if(s>=r){return false}if(p.element===t){u++;if(h!==i.name||u>=o){return false}}}return d.maxInteractions>0}n.maxInteractions=function(e){if(u.is.number(e)){d.maxInteractions=e;return n}return d.maxInteractions};r.settingsMethods.push("styleCursor");r.settingsMethods.push("actionChecker");r.settingsMethods.push("ignoreFrom");r.settingsMethods.push("allowFrom");s.base.actionChecker=null;s.base.styleCursor=true;u.extend(s.perAction,d.defaults.perAction);t.exports=d},{"../Interactable":4,"../Interaction":5,"../actions/base":6,"../defaultOptions":18,"../interact":21,"../scope":33,"../utils":44,"../utils/Signals":34,"./InteractableMethods":12}],14:[function(e,t,i){"use strict";var n=e("./base");var r=e("../scope");var o=e("../utils/is");var a=e("../utils/domUtils"),s=a.parentNode;n.setActionDefaults(e("../actions/drag"));n.signals.on("before-start",(function(e){var t=e.interaction,i=e.eventTarget,a=e.dx,u=e.dy;if(t.prepared.name!=="drag"){return}var c=Math.abs(a);var d=Math.abs(u);var f=t.target.options.drag;var p=f.startAxis;var h=c>d?"x":c<d?"y":"xy";t.prepared.axis=f.lockAxis==="start"?h[0]:f.lockAxis;if(h!=="xy"&&p!=="xy"&&p!==h){t.prepared.name=null;var g=i;var m=function e(r){if(r===t.target){return}var o=t.target.options.drag;if(!o.manualStart&&r.testIgnoreAllow(o,g,i)){var a=r.getAction(t.downPointer,t.downEvent,t,g);if(a&&a.name==="drag"&&l(h,r)&&n.validateAction(a,r,g,i)){return r}}};while(o.element(g)){var v=r.interactables.forEachMatch(g,m);if(v){t.prepared.name="drag";t.target=v;t.element=g;break}g=s(g)}}}));function l(e,t){if(!t){return false}var i=t.options.drag.startAxis;return e==="xy"||i==="xy"||i===e}},{"../actions/drag":7,"../scope":33,"../utils/domUtils":39,"../utils/is":46,"./base":13}],15:[function(e,t,i){"use strict";e("./base").setActionDefaults(e("../actions/gesture"))},{"../actions/gesture":9,"./base":13}],16:[function(e,t,i){"use strict";var n=e("./base");var r=e("../Interaction");n.defaults.perAction.hold=0;n.defaults.perAction.delay=0;r.signals.on("new",(function(e){e.autoStartHoldTimer=null}));n.signals.on("prepared",(function(e){var t=e.interaction;var i=o(t);if(i>0){t.autoStartHoldTimer=setTimeout((function(){t.start(t.prepared,t.target,t.element)}),i)}}));r.signals.on("move",(function(e){var t=e.interaction,i=e.duplicate;if(t.pointerWasMoved&&!i){clearTimeout(t.autoStartHoldTimer)}}));n.signals.on("before-start",(function(e){var t=e.interaction;var i=o(t);if(i>0){t.prepared.name=null}}));function o(e){var t=e.prepared&&e.prepared.name;if(!t){return null}var i=e.target.options;return i[t].hold||i[t].delay}t.exports={getHoldDuration:o}},{"../Interaction":5,"./base":13}],17:[function(e,t,i){"use strict";e("./base").setActionDefaults(e("../actions/resize"))},{"../actions/resize":10,"./base":13}],18:[function(e,t,i){"use strict";t.exports={base:{accept:null,preventDefault:"auto",deltaSource:"page"},perAction:{origin:{x:0,y:0},inertia:{enabled:false,resistance:10,minSpeed:100,endSpeed:10,allowResume:true,smoothEndDuration:300}}}},{}],19:[function(e,t,i){"use strict";e("./inertia");e("./modifiers/snap");e("./modifiers/restrict");e("./pointerEvents/base");e("./pointerEvents/holdRepeat");e("./pointerEvents/interactableTargets");e("./autoStart/hold");e("./actions/gesture");e("./actions/resize");e("./actions/drag");e("./actions/drop");e("./modifiers/snapSize");e("./modifiers/restrictEdges");e("./modifiers/restrictSize");e("./autoStart/gesture");e("./autoStart/resize");e("./autoStart/drag");e("./interactablePreventDefault.js");e("./autoScroll");t.exports=e("./interact")},{"./actions/drag":7,"./actions/drop":8,"./actions/gesture":9,"./actions/resize":10,"./autoScroll":11,"./autoStart/drag":14,"./autoStart/gesture":15,"./autoStart/hold":16,"./autoStart/resize":17,"./inertia":20,"./interact":21,"./interactablePreventDefault.js":22,"./modifiers/restrict":24,"./modifiers/restrictEdges":25,"./modifiers/restrictSize":26,"./modifiers/snap":27,"./modifiers/snapSize":28,"./pointerEvents/base":30,"./pointerEvents/holdRepeat":31,"./pointerEvents/interactableTargets":32}],20:[function(e,t,i){"use strict";var n=e("./InteractEvent");var r=e("./Interaction");var o=e("./modifiers/base");var a=e("./utils");var s=e("./utils/raf");r.signals.on("new",(function(e){e.inertiaStatus={active:false,smoothEnd:false,allowResume:false,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,lambda_v0:0,one_ve_v0:0,i:null};e.boundInertiaFrame=function(){return u.apply(e)};e.boundSmoothEndFrame=function(){return c.apply(e)}}));r.signals.on("down",(function(e){var t=e.interaction,i=e.event,l=e.pointer,u=e.eventTarget;var c=t.inertiaStatus;if(c.active){var d=u;while(a.is.element(d)){if(d===t.element){s.cancel(c.i);c.active=false;t.simulation=null;t.updatePointer(l);a.setCoords(t.curCoords,t.pointers);var f={interaction:t};r.signals.fire("before-action-move",f);r.signals.fire("action-resume",f);var p=new n(t,i,t.prepared.name,"inertiaresume",t.element);t.target.fire(p);t.prevEvent=p;o.resetStatuses(t.modifierStatuses);a.copyCoords(t.prevCoords,t.curCoords);break}d=a.parentNode(d)}}}));r.signals.on("up",(function(e){var t=e.interaction,i=e.event;var r=t.inertiaStatus;if(!t.interacting()||r.active){return}var u=t.target;var c=u&&u.options;var d=c&&t.prepared.name&&c[t.prepared.name].inertia;var f=(new Date).getTime();var p={};var h=a.extend({},t.curCoords.page);var g=t.pointerDelta.client.speed;var m=false;var v=void 0;var y=d&&d.enabled&&t.prepared.name!=="gesture"&&i!==r.startEvent;var b=y&&f-t.curCoords.timeStamp<50&&g>d.minSpeed&&g>d.endSpeed;var _={interaction:t,pageCoords:h,statuses:p,preEnd:true,requireEndOnly:true};if(y&&!b){o.resetStatuses(p);v=o.setAll(_);if(v.shouldMove&&v.locked){m=true}}if(!(b||m)){return}a.copyCoords(r.upCoords,t.curCoords);t.pointers[0]=r.startEvent=new n(t,i,t.prepared.name,"inertiastart",t.element);r.t0=f;r.active=true;r.allowResume=d.allowResume;t.simulation=r;u.fire(r.startEvent);if(b){r.vx0=t.pointerDelta.client.vx;r.vy0=t.pointerDelta.client.vy;r.v0=g;l(t,r);a.extend(h,t.curCoords.page);h.x+=r.xe;h.y+=r.ye;o.resetStatuses(p);v=o.setAll(_);r.modifiedXe+=v.dx;r.modifiedYe+=v.dy;r.i=s.request(t.boundInertiaFrame)}else{r.smoothEnd=true;r.xe=v.dx;r.ye=v.dy;r.sx=r.sy=0;r.i=s.request(t.boundSmoothEndFrame)}}));r.signals.on("stop-active",(function(e){var t=e.interaction;var i=t.inertiaStatus;if(i.active){s.cancel(i.i);i.active=false;t.simulation=null}}));function l(e,t){var i=e.target.options[e.prepared.name].inertia;var n=i.resistance;var r=-Math.log(i.endSpeed/t.v0)/n;t.x0=e.prevEvent.pageX;t.y0=e.prevEvent.pageY;t.t0=t.startEvent.timeStamp/1e3;t.sx=t.sy=0;t.modifiedXe=t.xe=(t.vx0-r)/n;t.modifiedYe=t.ye=(t.vy0-r)/n;t.te=r;t.lambda_v0=n/t.v0;t.one_ve_v0=1-i.endSpeed/t.v0}function u(){d(this);a.setCoordDeltas(this.pointerDelta,this.prevCoords,this.curCoords);var e=this.inertiaStatus;var t=this.target.options[this.prepared.name].inertia;var i=t.resistance;var n=(new Date).getTime()/1e3-e.t0;if(n<e.te){var r=1-(Math.exp(-i*n)-e.lambda_v0)/e.one_ve_v0;if(e.modifiedXe===e.xe&&e.modifiedYe===e.ye){e.sx=e.xe*r;e.sy=e.ye*r}else{var o=a.getQuadraticCurvePoint(0,0,e.xe,e.ye,e.modifiedXe,e.modifiedYe,r);e.sx=o.x;e.sy=o.y}this.doMove();e.i=s.request(this.boundInertiaFrame)}else{e.sx=e.modifiedXe;e.sy=e.modifiedYe;this.doMove();this.end(e.startEvent);e.active=false;this.simulation=null}a.copyCoords(this.prevCoords,this.curCoords)}function c(){d(this);var e=this.inertiaStatus;var t=(new Date).getTime()-e.t0;var i=this.target.options[this.prepared.name].inertia.smoothEndDuration;if(t<i){e.sx=a.easeOutQuad(t,0,e.xe,i);e.sy=a.easeOutQuad(t,0,e.ye,i);this.pointerMove(e.startEvent,e.startEvent);e.i=s.request(this.boundSmoothEndFrame)}else{e.sx=e.xe;e.sy=e.ye;this.pointerMove(e.startEvent,e.startEvent);this.end(e.startEvent);e.smoothEnd=e.active=false;this.simulation=null}}function d(e){var t=e.inertiaStatus;if(!t.active){return}var i=t.upCoords.page;var n=t.upCoords.client;a.setCoords(e.curCoords,[{pageX:i.x+t.sx,pageY:i.y+t.sy,clientX:n.x+t.sx,clientY:n.y+t.sy}])}},{"./InteractEvent":3,"./Interaction":5,"./modifiers/base":23,"./utils":44,"./utils/raf":50}],21:[function(e,t,i){"use strict";var n=e("./utils/browser");var r=e("./utils/events");var o=e("./utils");var a=e("./scope");var s=e("./Interactable");var l=e("./Interaction");var u={};function c(e,t){var i=a.interactables.get(e,t);if(!i){i=new s(e,t);i.events.global=u}return i}c.isSet=function(e,t){return a.interactables.indexOfElement(e,t&&t.context)!==-1};c.on=function(e,t,i){if(o.is.string(e)&&e.search(" ")!==-1){e=e.trim().split(/ +/)}if(o.is.array(e)){for(var n=0;n<e.length;n++){var l;l=e[n];var d=l;c.on(d,t,i)}return c}if(o.is.object(e)){for(var f in e){c.on(f,e[f],t)}return c}if(o.contains(s.eventTypes,e)){if(!u[e]){u[e]=[t]}else{u[e].push(t)}}else{r.add(a.document,e,t,{options:i})}return c};c.off=function(e,t,i){if(o.is.string(e)&&e.search(" ")!==-1){e=e.trim().split(/ +/)}if(o.is.array(e)){for(var n=0;n<e.length;n++){var l;l=e[n];var d=l;c.off(d,t,i)}return c}if(o.is.object(e)){for(var f in e){c.off(f,e[f],t)}return c}if(!o.contains(s.eventTypes,e)){r.remove(a.document,e,t,i)}else{var p=void 0;if(e in u&&(p=u[e].indexOf(t))!==-1){u[e].splice(p,1)}}return c};c.debug=function(){return a};c.getPointerAverage=o.pointerAverage;c.getTouchBBox=o.touchBBox;c.getTouchDistance=o.touchDistance;c.getTouchAngle=o.touchAngle;c.getElementRect=o.getElementRect;c.getElementClientRect=o.getElementClientRect;c.matchesSelector=o.matchesSelector;c.closest=o.closest;c.supportsTouch=function(){return n.supportsTouch};c.supportsPointerEvent=function(){return n.supportsPointerEvent};c.stop=function(e){for(var t=a.interactions.length-1;t>=0;t--){a.interactions[t].stop(e)}return c};c.pointerMoveTolerance=function(e){if(o.is.number(e)){l.pointerMoveTolerance=e;return c}return l.pointerMoveTolerance};c.addDocument=a.addDocument;c.removeDocument=a.removeDocument;a.interact=c;t.exports=c},{"./Interactable":4,"./Interaction":5,"./scope":33,"./utils":44,"./utils/browser":36,"./utils/events":40}],22:[function(e,t,i){"use strict";var n=e("./Interactable");var r=e("./Interaction");var o=e("./scope");var a=e("./utils/is");var s=e("./utils/events");var l=e("./utils/browser");var u=e("./utils/domUtils"),c=u.nodeContains,d=u.matchesSelector;n.prototype.preventDefault=function(e){if(/^(always|never|auto)$/.test(e)){this.options.preventDefault=e;return this}if(a.bool(e)){this.options.preventDefault=e?"always":"never";return this}return this.options.preventDefault};n.prototype.checkAndPreventDefault=function(e){var t=this.options.preventDefault;if(t==="never"){return}if(t==="always"){e.preventDefault();return}if(s.supportsPassive&&/^touch(start|move)$/.test(e.type)&&!l.isIOS){return}if(/^(mouse|pointer|touch)*(down|start)/i.test(e.type)){return}if(a.element(e.target)&&d(e.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")){return}e.preventDefault()};function f(e){var t=e.interaction,i=e.event;if(t.target){t.target.checkAndPreventDefault(i)}}var p=["down","move","up","cancel"];for(var h=0;h<p.length;h++){var g=p[h];r.signals.on(g,f)}r.docEvents.dragstart=function e(t){for(var i=0;i<o.interactions.length;i++){var n;n=o.interactions[i];var r=n;if(r.element&&(r.element===t.target||c(r.element,t.target))){r.target.checkAndPreventDefault(t);return}}}},{"./Interactable":4,"./Interaction":5,"./scope":33,"./utils/browser":36,"./utils/domUtils":39,"./utils/events":40,"./utils/is":46}],23:[function(e,t,i){"use strict";var n=e("../InteractEvent");var r=e("../Interaction");var o=e("../utils/extend");var a={names:[],setOffsets:function e(t){var i=t.interaction,n=t.pageCoords;var r=i.target,o=i.element,s=i.startOffset;var l=r.getRect(o);if(l){s.left=n.x-l.left;s.top=n.y-l.top;s.right=l.right-n.x;s.bottom=l.bottom-n.y;if(!("width"in l)){l.width=l.right-l.left}if(!("height"in l)){l.height=l.bottom-l.top}}else{s.left=s.top=s.right=s.bottom=0}t.rect=l;t.interactable=r;t.element=o;for(var u=0;u<a.names.length;u++){var c;c=a.names[u];var d=c;t.options=r.options[i.prepared.name][d];if(!t.options){continue}i.modifierOffsets[d]=a[d].setOffset(t)}},setAll:function e(t){var i=t.interaction,n=t.statuses,r=t.preEnd,l=t.requireEndOnly;var u={dx:0,dy:0,changed:false,locked:false,shouldMove:true};t.modifiedCoords=o({},t.pageCoords);for(var c=0;c<a.names.length;c++){var d;d=a.names[c];var f=d;var p=a[f];var h=i.target.options[i.prepared.name][f];if(!s(h,r,l)){continue}t.status=t.status=n[f];t.options=h;t.offset=t.interaction.modifierOffsets[f];p.set(t);if(t.status.locked){t.modifiedCoords.x+=t.status.dx;t.modifiedCoords.y+=t.status.dy;u.dx+=t.status.dx;u.dy+=t.status.dy;u.locked=true}}u.shouldMove=!t.status||!u.locked||t.status.changed;return u},resetStatuses:function e(t){for(var i=0;i<a.names.length;i++){var n;n=a.names[i];var r=n;var o=t[r]||{};o.dx=o.dy=0;o.modifiedX=o.modifiedY=NaN;o.locked=false;o.changed=true;t[r]=o}return t},start:function e(t,i){var n=t.interaction;var r={interaction:n,pageCoords:(i==="action-resume"?n.curCoords:n.startCoords).page,startOffset:n.startOffset,statuses:n.modifierStatuses,preEnd:false,requireEndOnly:false};a.setOffsets(r);a.resetStatuses(r.statuses);r.pageCoords=o({},n.startCoords.page);n.modifierResult=a.setAll(r)},beforeMove:function e(t){var i=t.interaction,n=t.preEnd,r=t.interactingBeforeMove;var o=a.setAll({interaction:i,preEnd:n,pageCoords:i.curCoords.page,statuses:i.modifierStatuses,requireEndOnly:false});if(!o.shouldMove&&r){i._dontFireMove=true}i.modifierResult=o},end:function e(t){var i=t.interaction,n=t.event;for(var r=0;r<a.names.length;r++){var o;o=a.names[r];var l=o;var u=i.target.options[i.prepared.name][l];if(s(u,true,true)){i.doMove({event:n,preEnd:true});break}}},setXY:function e(t){var i=t.iEvent,n=t.interaction;var r=o({},t);for(var s=0;s<a.names.length;s++){var l=a.names[s];r.options=n.target.options[n.prepared.name][l];if(!r.options){continue}var u=a[l];r.status=n.modifierStatuses[l];i[l]=u.modifyCoords(r)}}};r.signals.on("new",(function(e){e.startOffset={left:0,right:0,top:0,bottom:0};e.modifierOffsets={};e.modifierStatuses=a.resetStatuses({});e.modifierResult=null}));r.signals.on("action-start",a.start);r.signals.on("action-resume",a.start);r.signals.on("before-action-move",a.beforeMove);r.signals.on("action-end",a.end);n.signals.on("set-xy",a.setXY);function s(e,t,i){return e&&e.enabled&&(t||!e.endOnly)&&(!i||e.endOnly)}t.exports=a},{"../InteractEvent":3,"../Interaction":5,"../utils/extend":41}],24:[function(e,t,i){"use strict";var n=e("./base");var r=e("../utils");var o=e("../defaultOptions");var a={defaults:{enabled:false,endOnly:false,restriction:null,elementRect:null},setOffset:function e(t){var i=t.rect,n=t.startOffset,r=t.options;var o=r&&r.elementRect;var a={};if(i&&o){a.left=n.left-i.width*o.left;a.top=n.top-i.height*o.top;a.right=n.right-i.width*(1-o.right);a.bottom=n.bottom-i.height*(1-o.bottom)}else{a.left=a.top=a.right=a.bottom=0}return a},set:function e(t){var i=t.modifiedCoords,n=t.interaction,o=t.status,a=t.options;if(!a){return o}var l=o.useStatusXY?{x:o.x,y:o.y}:r.extend({},i);var u=s(a.restriction,n,l);if(!u){return o}o.dx=0;o.dy=0;o.locked=false;var c=u;var d=l.x;var f=l.y;var p=n.modifierOffsets.restrict;if("x"in u&&"y"in u){d=Math.max(Math.min(c.x+c.width-p.right,l.x),c.x+p.left);f=Math.max(Math.min(c.y+c.height-p.bottom,l.y),c.y+p.top)}else{d=Math.max(Math.min(c.right-p.right,l.x),c.left+p.left);f=Math.max(Math.min(c.bottom-p.bottom,l.y),c.top+p.top)}o.dx=d-l.x;o.dy=f-l.y;o.changed=o.modifiedX!==d||o.modifiedY!==f;o.locked=!!(o.dx||o.dy);o.modifiedX=d;o.modifiedY=f},modifyCoords:function e(t){var i=t.page,n=t.client,r=t.status,o=t.phase,a=t.options;var s=a&&a.elementRect;if(a&&a.enabled&&!(o==="start"&&s&&r.locked)){if(r.locked){i.x+=r.dx;i.y+=r.dy;n.x+=r.dx;n.y+=r.dy;return{dx:r.dx,dy:r.dy}}}},getRestrictionRect:s};function s(e,t,i){if(r.is.function(e)){return r.resolveRectLike(e,t.target,t.element,[i.x,i.y,t])}else{return r.resolveRectLike(e,t.target,t.element)}}n.restrict=a;n.names.push("restrict");o.perAction.restrict=a.defaults;t.exports=a},{"../defaultOptions":18,"../utils":44,"./base":23}],25:[function(e,t,i){"use strict";var n=e("./base");var r=e("../utils");var o=e("../utils/rect");var a=e("../defaultOptions");var s=e("../actions/resize");var l=e("./restrict"),u=l.getRestrictionRect;var c={top:+Infinity,left:+Infinity,bottom:-Infinity,right:-Infinity};var d={top:-Infinity,left:-Infinity,bottom:+Infinity,right:+Infinity};var f={defaults:{enabled:false,endOnly:false,min:null,max:null,offset:null},setOffset:function e(t){var i=t.interaction,n=t.startOffset,o=t.options;if(!o){return r.extend({},n)}var a=u(o.offset,i,i.startCoords.page);if(a){return{top:n.top+a.y,left:n.left+a.x,bottom:n.bottom+a.y,right:n.right+a.x}}return n},set:function e(t){var i=t.modifiedCoords,n=t.interaction,a=t.status,s=t.offset,l=t.options;var f=n.prepared.linkedEdges||n.prepared.edges;if(!n.interacting()||!f){return}var p=a.useStatusXY?{x:a.x,y:a.y}:r.extend({},i);var h=o.xywhToTlbr(u(l.inner,n,p))||c;var g=o.xywhToTlbr(u(l.outer,n,p))||d;var m=p.x;var v=p.y;a.dx=0;a.dy=0;a.locked=false;if(f.top){v=Math.min(Math.max(g.top+s.top,p.y),h.top+s.top)}else if(f.bottom){v=Math.max(Math.min(g.bottom-s.bottom,p.y),h.bottom-s.bottom)}if(f.left){m=Math.min(Math.max(g.left+s.left,p.x),h.left+s.left)}else if(f.right){m=Math.max(Math.min(g.right-s.right,p.x),h.right-s.right)}a.dx=m-p.x;a.dy=v-p.y;a.changed=a.modifiedX!==m||a.modifiedY!==v;a.locked=!!(a.dx||a.dy);a.modifiedX=m;a.modifiedY=v},modifyCoords:function e(t){var i=t.page,n=t.client,r=t.status,o=t.phase,a=t.options;if(a&&a.enabled&&!(o==="start"&&r.locked)){if(r.locked){i.x+=r.dx;i.y+=r.dy;n.x+=r.dx;n.y+=r.dy;return{dx:r.dx,dy:r.dy}}}},noInner:c,noOuter:d,getRestrictionRect:u};n.restrictEdges=f;n.names.push("restrictEdges");a.perAction.restrictEdges=f.defaults;s.defaults.restrictEdges=f.defaults;t.exports=f},{"../actions/resize":10,"../defaultOptions":18,"../utils":44,"../utils/rect":51,"./base":23,"./restrict":24}],26:[function(e,t,i){"use strict";var n=e("./base");var r=e("./restrictEdges");var o=e("../utils");var a=e("../utils/rect");var s=e("../defaultOptions");var l=e("../actions/resize");var u={width:-Infinity,height:-Infinity};var c={width:+Infinity,height:+Infinity};var d={defaults:{enabled:false,endOnly:false,min:null,max:null},setOffset:function e(t){var i=t.interaction;return i.startOffset},set:function e(t){var i=t.interaction,n=t.options;var s=i.prepared.linkedEdges||i.prepared.edges;if(!i.interacting()||!s){return}var l=a.xywhToTlbr(i.resizeRects.inverted);var d=a.tlbrToXywh(r.getRestrictionRect(n.min,i))||u;var f=a.tlbrToXywh(r.getRestrictionRect(n.max,i))||c;t.options={enabled:n.enabled,endOnly:n.endOnly,inner:o.extend({},r.noInner),outer:o.extend({},r.noOuter)};if(s.top){t.options.inner.top=l.bottom-d.height;t.options.outer.top=l.bottom-f.height}else if(s.bottom){t.options.inner.bottom=l.top+d.height;t.options.outer.bottom=l.top+f.height}if(s.left){t.options.inner.left=l.right-d.width;t.options.outer.left=l.right-f.width}else if(s.right){t.options.inner.right=l.left+d.width;t.options.outer.right=l.left+f.width}r.set(t)},modifyCoords:r.modifyCoords};n.restrictSize=d;n.names.push("restrictSize");s.perAction.restrictSize=d.defaults;l.defaults.restrictSize=d.defaults;t.exports=d},{"../actions/resize":10,"../defaultOptions":18,"../utils":44,"../utils/rect":51,"./base":23,"./restrictEdges":25}],27:[function(e,t,i){"use strict";var n=e("./base");var r=e("../interact");var o=e("../utils");var a=e("../defaultOptions");var s={defaults:{enabled:false,endOnly:false,range:Infinity,targets:null,offsets:null,relativePoints:null},setOffset:function e(t){var i=t.interaction,n=t.interactable,r=t.element,a=t.rect,s=t.startOffset,l=t.options;var u=[];var c=o.rectToXY(o.resolveRectLike(l.origin));var d=c||o.getOriginXY(n,r,i.prepared.name);l=l||n.options[i.prepared.name].snap||{};var f=void 0;if(l.offset==="startCoords"){f={x:i.startCoords.page.x-d.x,y:i.startCoords.page.y-d.y}}else{var p=o.resolveRectLike(l.offset,n,r,[i]);f=o.rectToXY(p)||{x:0,y:0}}if(a&&l.relativePoints&&l.relativePoints.length){for(var h=0;h<l.relativePoints.length;h++){var g;g=l.relativePoints[h];var m=g;var v=m.x;var y=m.y;u.push({x:s.left-a.width*v+f.x,y:s.top-a.height*y+f.y})}}else{u.push(f)}return u},set:function e(t){var i=t.interaction,n=t.modifiedCoords,r=t.status,a=t.options,s=t.offset;var l=[];var u=void 0;var c=void 0;var d=void 0;if(r.useStatusXY){c={x:r.x,y:r.y}}else{var f=o.getOriginXY(i.target,i.element,i.prepared.name);c=o.extend({},n);c.x-=f.x;c.y-=f.y}r.realX=c.x;r.realY=c.y;var p=a.targets?a.targets.length:0;for(var h=0;h<s.length;h++){var g;g=s[h];var m=g;var v=m.x;var y=m.y;var b=c.x-v;var _=c.y-y;for(var w=0;w<(a.targets||[]).length;w++){var C;C=(a.targets||[])[w];var A=C;if(o.is.function(A)){u=A(b,_,i)}else{u=A}if(!u){continue}l.push({x:o.is.number(u.x)?u.x+v:b,y:o.is.number(u.y)?u.y+y:_,range:o.is.number(u.range)?u.range:a.range})}}var E={target:null,inRange:false,distance:0,range:0,dx:0,dy:0};for(d=0,p=l.length;d<p;d++){u=l[d];var x=u.range;var T=u.x-c.x;var S=u.y-c.y;var D=o.hypot(T,S);var k=D<=x;if(x===Infinity&&E.inRange&&E.range!==Infinity){k=false}if(!E.target||(k?E.inRange&&x!==Infinity?D/x<E.distance/E.range:x===Infinity&&E.range!==Infinity||D<E.distance:!E.inRange&&D<E.distance)){E.target=u;E.distance=D;E.range=x;E.inRange=k;E.dx=T;E.dy=S;r.range=x}}var O=void 0;if(E.target){O=r.modifiedX!==E.target.x||r.modifiedY!==E.target.y;r.modifiedX=E.target.x;r.modifiedY=E.target.y}else{O=true;r.modifiedX=NaN;r.modifiedY=NaN}r.dx=E.dx;r.dy=E.dy;r.changed=O||E.inRange&&!r.locked;r.locked=E.inRange},modifyCoords:function e(t){var i=t.page,n=t.client,r=t.status,o=t.phase,a=t.options;var s=a&&a.relativePoints;if(a&&a.enabled&&!(o==="start"&&s&&s.length)){if(r.locked){i.x+=r.dx;i.y+=r.dy;n.x+=r.dx;n.y+=r.dy}return{range:r.range,locked:r.locked,x:r.modifiedX,y:r.modifiedY,realX:r.realX,realY:r.realY,dx:r.dx,dy:r.dy}}}};r.createSnapGrid=function(e){return function(t,i){var n=e.limits||{left:-Infinity,right:Infinity,top:-Infinity,bottom:Infinity};var r=0;var a=0;if(o.is.object(e.offset)){r=e.offset.x;a=e.offset.y}var s=Math.round((t-r)/e.x);var l=Math.round((i-a)/e.y);var u=Math.max(n.left,Math.min(n.right,s*e.x+r));var c=Math.max(n.top,Math.min(n.bottom,l*e.y+a));return{x:u,y:c,range:e.range}}};n.snap=s;n.names.push("snap");a.perAction.snap=s.defaults;t.exports=s},{"../defaultOptions":18,"../interact":21,"../utils":44,"./base":23}],28:[function(e,t,i){"use strict";var n=e("./base");var r=e("./snap");var o=e("../defaultOptions");var a=e("../actions/resize");var s=e("../utils/");var l={defaults:{enabled:false,endOnly:false,range:Infinity,targets:null,offsets:null},setOffset:function e(t){var i=t.interaction,n=t.options;var o=i.prepared.edges;if(!o){return}t.options={relativePoints:[{x:o.left?0:1,y:o.top?0:1}],origin:{x:0,y:0},offset:"self",range:n.range};var a=r.setOffset(t);t.options=n;return a},set:function e(t){var i=t.interaction,n=t.options,o=t.offset,a=t.modifiedCoords;var l=s.extend({},a);var u=l.x-o[0].x;var c=l.y-o[0].y;t.options=s.extend({},n);t.options.targets=[];for(var d=0;d<(n.targets||[]).length;d++){var f;f=(n.targets||[])[d];var p=f;var h=void 0;if(s.is.function(p)){h=p(u,c,i)}else{h=p}if(!h){continue}if("width"in h&&"height"in h){h.x=h.width;h.y=h.height}t.options.targets.push(h)}r.set(t)},modifyCoords:function e(t){var i=t.options;t.options=s.extend({},i);t.options.enabled=i.enabled;t.options.relativePoints=[null];r.modifyCoords(t)}};n.snapSize=l;n.names.push("snapSize");o.perAction.snapSize=l.defaults;a.defaults.snapSize=l.defaults;t.exports=l},{"../actions/resize":10,"../defaultOptions":18,"../utils/":44,"./base":23,"./snap":27}],29:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=e("../utils/pointerUtils");t.exports=function(){function e(t,i,o,a,s){n(this,e);r.pointerExtend(this,o);if(o!==i){r.pointerExtend(this,i)}this.interaction=s;this.timeStamp=(new Date).getTime();this.originalEvent=o;this.type=t;this.pointerId=r.getPointerId(i);this.pointerType=r.getPointerType(i);this.target=a;this.currentTarget=null;if(t==="tap"){var l=s.getPointerIndex(i);this.dt=this.timeStamp-s.downTimes[l];var u=this.timeStamp-s.tapTime;this.double=!!(s.prevTap&&s.prevTap.type!=="doubletap"&&s.prevTap.target===this.target&&u<500)}else if(t==="doubletap"){this.dt=i.timeStamp-s.tapTime}}e.prototype.subtractOrigin=function e(t){var i=t.x,n=t.y;this.pageX-=i;this.pageY-=n;this.clientX-=i;this.clientY-=n;return this};e.prototype.addOrigin=function e(t){var i=t.x,n=t.y;this.pageX+=i;this.pageY+=n;this.clientX+=i;this.clientY+=n;return this};e.prototype.preventDefault=function e(){this.originalEvent.preventDefault()};e.prototype.stopPropagation=function e(){this.propagationStopped=true};e.prototype.stopImmediatePropagation=function e(){this.immediatePropagationStopped=this.propagationStopped=true};return e}()},{"../utils/pointerUtils":49}],30:[function(e,t,i){"use strict";var n=e("./PointerEvent");var r=e("../Interaction");var o=e("../utils");var a=e("../defaultOptions");var s=e("../utils/Signals").new();var l=["down","up","cancel"];var u=["down","up","cancel"];var c={PointerEvent:n,fire:d,collectEventTargets:f,signals:s,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:["down","move","up","cancel","tap","doubletap","hold"]};function d(e){var t=e.interaction,i=e.pointer,r=e.event,a=e.eventTarget,l=e.type,u=l===undefined?e.pointerEvent.type:l,c=e.targets,p=c===undefined?f(e):c,h=e.pointerEvent,g=h===undefined?new n(u,i,r,a,t):h;var m={interaction:t,pointer:i,event:r,eventTarget:a,targets:p,type:u,pointerEvent:g};for(var v=0;v<p.length;v++){var y=p[v];for(var b in y.props||{}){g[b]=y.props[b]}var _=o.getOriginXY(y.eventable,y.element);g.subtractOrigin(_);g.eventable=y.eventable;g.currentTarget=y.element;y.eventable.fire(g);g.addOrigin(_);if(g.immediatePropagationStopped||g.propagationStopped&&v+1<p.length&&p[v+1].element!==g.currentTarget){break}}s.fire("fired",m);if(u==="tap"){var w=g.double?d({interaction:t,pointer:i,event:r,eventTarget:a,type:"doubletap"}):g;t.prevTap=w;t.tapTime=w.timeStamp}return g}function f(e){var t=e.interaction,i=e.pointer,n=e.event,r=e.eventTarget,a=e.type;var l=t.getPointerIndex(i);if(a==="tap"&&(t.pointerWasMoved||!(t.downTargets[l]&&t.downTargets[l]===r))){return[]}var u=o.getPath(r);var c={interaction:t,pointer:i,event:n,eventTarget:r,type:a,path:u,targets:[],element:null};for(var d=0;d<u.length;d++){var f;f=u[d];var p=f;c.element=p;s.fire("collect-targets",c)}if(a==="hold"){c.targets=c.targets.filter((function(e){return e.eventable.options.holdDuration===t.holdTimers[l].duration}))}return c.targets}r.signals.on("update-pointer-down",(function(e){var t=e.interaction,i=e.pointerIndex;t.holdTimers[i]={duration:Infinity,timeout:null}}));r.signals.on("remove-pointer",(function(e){var t=e.interaction,i=e.pointerIndex;t.holdTimers.splice(i,1)}));r.signals.on("move",(function(e){var t=e.interaction,i=e.pointer,n=e.event,r=e.eventTarget,o=e.duplicateMove;var a=t.getPointerIndex(i);if(!o&&(!t.pointerIsDown||t.pointerWasMoved)){if(t.pointerIsDown){clearTimeout(t.holdTimers[a].timeout)}d({interaction:t,pointer:i,event:n,eventTarget:r,type:"move"})}}));r.signals.on("down",(function(e){var t=e.interaction,i=e.pointer,n=e.event,r=e.eventTarget,a=e.pointerIndex;var l=t.holdTimers[a];var u=o.getPath(r);var c={interaction:t,pointer:i,event:n,eventTarget:r,type:"hold",targets:[],path:u,element:null};for(var f=0;f<u.length;f++){var p;p=u[f];var h=p;c.element=h;s.fire("collect-targets",c)}if(!c.targets.length){return}var g=Infinity;for(var m=0;m<c.targets.length;m++){var v;v=c.targets[m];var y=v;var b=y.eventable.options.holdDuration;if(b<g){g=b}}l.duration=g;l.timeout=setTimeout((function(){d({interaction:t,eventTarget:r,pointer:i,event:n,type:"hold"})}),g)}));r.signals.on("up",(function(e){var t=e.interaction,i=e.pointer,n=e.event,r=e.eventTarget;if(!t.pointerWasMoved){d({interaction:t,eventTarget:r,pointer:i,event:n,type:"tap"})}}));var p=["up","cancel"];for(var h=0;h<p.length;h++){var g=p[h];r.signals.on(g,(function(e){var t=e.interaction,i=e.pointerIndex;if(t.holdTimers[i]){clearTimeout(t.holdTimers[i].timeout)}}))}function m(e){return function(t){var i=t.interaction,n=t.pointer,r=t.event,o=t.eventTarget;d({interaction:i,eventTarget:o,pointer:n,event:r,type:e})}}for(var v=0;v<l.length;v++){r.signals.on(l[v],m(u[v]))}r.signals.on("new",(function(e){e.prevTap=null;e.tapTime=0;e.holdTimers=[]}));a.pointerEvents=c.defaults;t.exports=c},{"../Interaction":5,"../defaultOptions":18,"../utils":44,"../utils/Signals":34,"./PointerEvent":29}],31:[function(e,t,i){"use strict";var n=e("./base");var r=e("../Interaction");n.signals.on("new",l);n.signals.on("fired",u);var o=["move","up","cancel","endall"];for(var a=0;a<o.length;a++){var s=o[a];r.signals.on(s,c)}function l(e){var t=e.pointerEvent;if(t.type!=="hold"){return}t.count=(t.count||0)+1}function u(e){var t=e.interaction,i=e.pointerEvent,r=e.eventTarget,o=e.targets;if(i.type!=="hold"||!o.length){return}var a=o[0].eventable.options.holdRepeatInterval;if(a<=0){return}t.holdIntervalHandle=setTimeout((function(){n.fire({interaction:t,eventTarget:r,type:"hold",pointer:i,event:i})}),a)}function c(e){var t=e.interaction;if(t.holdIntervalHandle){clearInterval(t.holdIntervalHandle);t.holdIntervalHandle=null}}n.defaults.holdRepeatInterval=0;n.types.push("holdrepeat");t.exports={onNew:l,onFired:u,endHoldRepeat:c}},{"../Interaction":5,"./base":30}],32:[function(e,t,i){"use strict";var n=e("./base");var r=e("../Interactable");var o=e("../utils/is");var a=e("../scope");var s=e("../utils/extend");var l=e("../utils/arr"),u=l.merge;n.signals.on("collect-targets",(function(e){var t=e.targets,i=e.element,n=e.type,r=e.eventTarget;a.interactables.forEachMatch(i,(function(e){var a=e.events;var s=a.options;if(a[n]&&o.element(i)&&e.testIgnoreAllow(s,i,r)){t.push({element:i,eventable:a,props:{interactable:e}})}}))}));r.signals.on("new",(function(e){var t=e.interactable;t.events.getRect=function(e){return t.getRect(e)}}));r.signals.on("set",(function(e){var t=e.interactable,i=e.options;s(t.events.options,n.defaults);s(t.events.options,i)}));u(r.eventTypes,n.types);r.prototype.pointerEvents=function(e){s(this.events.options,e);return this};var c=r.prototype._backCompatOption;r.prototype._backCompatOption=function(e,t){var i=c.call(this,e,t);if(i===this){this.events.options[e]=t}return i};r.settingsMethods.push("pointerEvents")},{"../Interactable":4,"../scope":33,"../utils/arr":35,"../utils/extend":41,"../utils/is":46,"./base":30}],33:[function(e,t,i){"use strict";var n=e("./utils");var r=e("./utils/events");var o=e("./utils/Signals").new();var a=e("./utils/window"),s=a.getWindow;var l={signals:o,events:r,utils:n,document:e("./utils/domObjects").document,documents:[],addDocument:function e(t,i){if(n.contains(l.documents,t)){return false}i=i||s(t);l.documents.push(t);r.documents.push(t);if(t!==l.document){r.add(i,"unload",l.onWindowUnload)}o.fire("add-document",{doc:t,win:i})},removeDocument:function e(t,i){var n=l.documents.indexOf(t);i=i||s(t);r.remove(i,"unload",l.onWindowUnload);l.documents.splice(n,1);r.documents.splice(n,1);o.fire("remove-document",{win:i,doc:t})},onWindowUnload:function e(){l.removeDocument(this.document,this)}};t.exports=l},{"./utils":44,"./utils/Signals":34,"./utils/domObjects":38,"./utils/events":40,"./utils/window":52}],34:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(){n(this,e);this.listeners={}}e.prototype.on=function e(t,i){if(!this.listeners[t]){this.listeners[t]=[i];return}this.listeners[t].push(i)};e.prototype.off=function e(t,i){if(!this.listeners[t]){return}var n=this.listeners[t].indexOf(i);if(n!==-1){this.listeners[t].splice(n,1)}};e.prototype.fire=function e(t,i){var n=this.listeners[t];if(!n){return}for(var r=0;r<n.length;r++){var o;o=n[r];var a=o;if(a(i,t)===false){return}}};return e}();r.new=function(){return new r};t.exports=r},{}],35:[function(e,t,i){"use strict";function n(e,t){return e.indexOf(t)!==-1}function r(e,t){for(var i=0;i<t.length;i++){var n;n=t[i];var r=n;e.push(r)}return e}t.exports={contains:n,merge:r}},{}],36:[function(e,t,i){"use strict";var n=e("./window"),r=n.window;var o=e("./is");var a=e("./domObjects");var s=a.Element;var l=r.navigator;var u={supportsTouch:!!("ontouchstart"in r||o.function(r.DocumentTouch)&&a.document instanceof r.DocumentTouch),supportsPointerEvent:!!a.PointerEvent,isIOS:/iP(hone|od|ad)/.test(l.platform),isIOS7:/iP(hone|od|ad)/.test(l.platform)&&/OS 7[^\d]/.test(l.appVersion),isIe9:/MSIE 9/.test(l.userAgent),prefixedMatchesSelector:"matches"in s.prototype?"matches":"webkitMatchesSelector"in s.prototype?"webkitMatchesSelector":"mozMatchesSelector"in s.prototype?"mozMatchesSelector":"oMatchesSelector"in s.prototype?"oMatchesSelector":"msMatchesSelector",pEventTypes:a.PointerEvent?a.PointerEvent===r.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,wheelEvent:"onmousewheel"in a.document?"mousewheel":"wheel"};u.isOperaMobile=l.appName==="Opera"&&u.supportsTouch&&l.userAgent.match("Presto");t.exports=u},{"./domObjects":38,"./is":46,"./window":52}],37:[function(e,t,i){"use strict";var n=e("./is");t.exports=function e(t){var i={};for(var r in t){if(n.plainObject(t[r])){i[r]=e(t[r])}else{i[r]=t[r]}}return i}},{"./is":46}],38:[function(e,t,i){"use strict";var n={};var r=e("./window").window;function o(){}n.document=r.document;n.DocumentFragment=r.DocumentFragment||o;n.SVGElement=r.SVGElement||o;n.SVGSVGElement=r.SVGSVGElement||o;n.SVGElementInstance=r.SVGElementInstance||o;n.Element=r.Element||o;n.HTMLElement=r.HTMLElement||n.Element;n.Event=r.Event;n.Touch=r.Touch||o;n.PointerEvent=r.PointerEvent||r.MSPointerEvent;t.exports=n},{"./window":52}],39:[function(e,t,i){"use strict";var n=e("./window");var r=e("./browser");var o=e("./is");var a=e("./domObjects");var s={nodeContains:function e(t,i){while(i){if(i===t){return true}i=i.parentNode}return false},closest:function e(t,i){while(o.element(t)){if(s.matchesSelector(t,i)){return t}t=s.parentNode(t)}return null},parentNode:function e(t){var i=t.parentNode;if(o.docFrag(i)){while((i=i.host)&&o.docFrag(i)){continue}return i}return i},matchesSelector:function e(t,i){if(n.window!==n.realWindow){i=i.replace(/\/deep\//g," ")}return t[r.prefixedMatchesSelector](i)},indexOfDeepestElement:function e(t){var i=[];var n=[];var r=void 0;var o=t[0];var s=o?0:-1;var l=void 0;var u=void 0;var c=void 0;var d=void 0;for(c=1;c<t.length;c++){r=t[c];if(!r||r===o){continue}if(!o){o=r;s=c;continue}if(r.parentNode===r.ownerDocument){continue}else if(o.parentNode===r.ownerDocument){o=r;s=c;continue}if(!i.length){l=o;while(l.parentNode&&l.parentNode!==l.ownerDocument){i.unshift(l);l=l.parentNode}}if(o instanceof a.HTMLElement&&r instanceof a.SVGElement&&!(r instanceof a.SVGSVGElement)){if(r===o.parentNode){continue}l=r.ownerSVGElement}else{l=r}n=[];while(l.parentNode!==l.ownerDocument){n.unshift(l);l=l.parentNode}d=0;while(n[d]&&n[d]===i[d]){d++}var f=[n[d-1],n[d],i[d]];u=f[0].lastChild;while(u){if(u===f[1]){o=r;s=c;i=[];break}else if(u===f[2]){break}u=u.previousSibling}}return s},matchesUpTo:function e(t,i,n){while(o.element(t)){if(s.matchesSelector(t,i)){return true}t=s.parentNode(t);if(t===n){return s.matchesSelector(t,i)}}return false},getActualElement:function e(t){return t instanceof a.SVGElementInstance?t.correspondingUseElement:t},getScrollXY:function e(t){t=t||n.window;return{x:t.scrollX||t.document.documentElement.scrollLeft,y:t.scrollY||t.document.documentElement.scrollTop}},getElementClientRect:function e(t){var i=t instanceof a.SVGElement?t.getBoundingClientRect():t.getClientRects()[0];return i&&{left:i.left,right:i.right,top:i.top,bottom:i.bottom,width:i.width||i.right-i.left,height:i.height||i.bottom-i.top}},getElementRect:function e(t){var i=s.getElementClientRect(t);if(!r.isIOS7&&i){var o=s.getScrollXY(n.getWindow(t));i.left+=o.x;i.right+=o.x;i.top+=o.y;i.bottom+=o.y}return i},getPath:function e(t){var i=[];while(t){i.push(t);t=s.parentNode(t)}return i},trySelector:function e(t){if(!o.string(t)){return false}a.document.querySelector(t);return true}};t.exports=s},{"./browser":36,"./domObjects":38,"./is":46,"./window":52}],40:[function(e,t,i){"use strict";var n=e("./is");var r=e("./domUtils");var o=e("./pointerUtils");var a=e("./pointerExtend");var s=e("./window"),l=s.window;var u=e("./arr"),c=u.contains;var d=[];var f=[];var p={};var h=[];var g=function(){var e=false;l.document.createElement("div").addEventListener("test",null,{get capture(){e=true}});return e}();function m(e,t,i,n){var r=A(n);var o=d.indexOf(e);var a=f[o];if(!a){a={events:{},typeCount:0};o=d.push(e)-1;f.push(a)}if(!a.events[t]){a.events[t]=[];a.typeCount++}if(!c(a.events[t],i)){e.addEventListener(t,i,g?r:!!r.capture);a.events[t].push(i)}}function v(e,t,i,n){var r=A(n);var o=d.indexOf(e);var a=f[o];if(!a||!a.events){return}if(t==="all"){for(t in a.events){if(a.events.hasOwnProperty(t)){v(e,t,"all")}}return}if(a.events[t]){var s=a.events[t].length;if(i==="all"){for(var l=0;l<s;l++){v(e,t,a.events[t][l],r)}return}else{for(var u=0;u<s;u++){if(a.events[t][u]===i){e.removeEventListener("on"+t,i,g?r:!!r.capture);a.events[t].splice(u,1);break}}}if(a.events[t]&&a.events[t].length===0){a.events[t]=null;a.typeCount--}}if(!a.typeCount){f.splice(o,1);d.splice(o,1)}}function y(e,t,i,n,r){var o=A(r);if(!p[i]){p[i]={selectors:[],contexts:[],listeners:[]};for(var a=0;a<h.length;a++){var s=h[a];m(s,i,_);m(s,i,w,true)}}var l=p[i];var u=void 0;for(u=l.selectors.length-1;u>=0;u--){if(l.selectors[u]===e&&l.contexts[u]===t){break}}if(u===-1){u=l.selectors.length;l.selectors.push(e);l.contexts.push(t);l.listeners.push([])}l.listeners[u].push([n,!!o.capture,o.passive])}function b(e,t,i,n,r){var o=A(r);var a=p[i];var s=false;var l=void 0;if(!a){return}for(l=a.selectors.length-1;l>=0;l--){if(a.selectors[l]===e&&a.contexts[l]===t){var u=a.listeners[l];for(var c=u.length-1;c>=0;c--){var d=u[c],f=d[0],h=d[1],g=d[2];if(f===n&&h===!!o.capture&&g===o.passive){u.splice(c,1);if(!u.length){a.selectors.splice(l,1);a.contexts.splice(l,1);a.listeners.splice(l,1);v(t,i,_);v(t,i,w,true);if(!a.selectors.length){p[i]=null}}s=true;break}}if(s){break}}}}function _(e,t){var i=A(t);var s={};var l=p[e.type];var u=o.getEventTargets(e),c=u[0];var d=c;a(s,e);s.originalEvent=e;s.preventDefault=C;while(n.element(d)){for(var f=0;f<l.selectors.length;f++){var h=l.selectors[f];var g=l.contexts[f];if(r.matchesSelector(d,h)&&r.nodeContains(g,c)&&r.nodeContains(g,d)){var m=l.listeners[f];s.currentTarget=d;for(var v=0;v<m.length;v++){var y=m[v],b=y[0],_=y[1],w=y[2];if(_===!!i.capture&&w===i.passive){b(s)}}}}d=r.parentNode(d)}}function w(e){return _.call(this,e,true)}function C(){this.originalEvent.preventDefault()}function A(e){return n.object(e)?e:{capture:e}}t.exports={add:m,remove:v,addDelegate:y,removeDelegate:b,delegateListener:_,delegateUseCapture:w,delegatedEvents:p,documents:h,supportsOptions:g,_elements:d,_targets:f}},{"./arr":35,"./domUtils":39,"./is":46,"./pointerExtend":48,"./pointerUtils":49,"./window":52}],41:[function(e,t,i){"use strict";t.exports=function e(t,i){for(var n in i){t[n]=i[n]}return t}},{}],42:[function(e,t,i){"use strict";var n=e("./rect"),r=n.resolveRectLike,o=n.rectToXY;t.exports=function(e,t,i){var n=e.options[i];var a=n&&n.origin;var s=a||e.options.origin;var l=r(s,e,t,[e&&t]);return o(l)||{x:0,y:0}}},{"./rect":51}],43:[function(e,t,i){"use strict";t.exports=function(e,t){return Math.sqrt(e*e+t*t)}},{}],44:[function(e,t,i){"use strict";var n=e("./extend");var r=e("./window");var o={warnOnce:function e(t,i){var n=false;return function(){if(!n){r.window.console.warn(i);n=true}return t.apply(this,arguments)}},_getQBezierValue:function e(t,i,n,r){var o=1-t;return o*o*i+2*o*t*n+t*t*r},getQuadraticCurvePoint:function e(t,i,n,r,a,s,l){return{x:o._getQBezierValue(l,t,n,a),y:o._getQBezierValue(l,i,r,s)}},easeOutQuad:function e(t,i,n,r){t/=r;return-n*t*(t-2)+i},copyAction:function e(t,i){t.name=i.name;t.axis=i.axis;t.edges=i.edges;return t},is:e("./is"),extend:n,hypot:e("./hypot"),getOriginXY:e("./getOriginXY")};n(o,e("./arr"));n(o,e("./domUtils"));n(o,e("./pointerUtils"));n(o,e("./rect"));t.exports=o},{"./arr":35,"./domUtils":39,"./extend":41,"./getOriginXY":42,"./hypot":43,"./is":46,"./pointerUtils":49,"./rect":51,"./window":52}],45:[function(e,t,i){"use strict";var n=e("../scope");var r=e("./index");var o={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function e(t,i,n){var a=r.getPointerType(t);var s=r.getPointerId(t);var l={pointer:t,pointerId:s,pointerType:a,eventType:i,eventTarget:n};for(var u=0;u<o.methodOrder.length;u++){var c;c=o.methodOrder[u];var d=c;var f=o[d](l);if(f){return f}}},simulationResume:function e(t){var i=t.pointerType,o=t.eventType,a=t.eventTarget;if(!/down|start/i.test(o)){return null}for(var s=0;s<n.interactions.length;s++){var l;l=n.interactions[s];var u=l;var c=a;if(u.simulation&&u.simulation.allowResume&&u.pointerType===i){while(c){if(c===u.element){return u}c=r.parentNode(c)}}}return null},mouseOrPen:function e(t){var i=t.pointerId,o=t.pointerType,a=t.eventType;if(o!=="mouse"&&o!=="pen"){return null}var s=void 0;for(var l=0;l<n.interactions.length;l++){var u;u=n.interactions[l];var c=u;if(c.pointerType===o){if(c.simulation&&!r.contains(c.pointerIds,i)){continue}if(c.interacting()){return c}else if(!s){s=c}}}if(s){return s}for(var d=0;d<n.interactions.length;d++){var f;f=n.interactions[d];var p=f;if(p.pointerType===o&&!(/down/i.test(a)&&p.simulation)){return p}}return null},hasPointer:function e(t){var i=t.pointerId;for(var o=0;o<n.interactions.length;o++){var a;a=n.interactions[o];var s=a;if(r.contains(s.pointerIds,i)){return s}}},idle:function e(t){var i=t.pointerType;for(var r=0;r<n.interactions.length;r++){var o;o=n.interactions[r];var a=o;if(a.pointerIds.length===1){var s=a.target;if(s&&!s.options.gesture.enabled){continue}}else if(a.pointerIds.length>=2){continue}if(!a.interacting()&&i===a.pointerType){return a}}return null}};t.exports=o},{"../scope":33,"./index":44}],46:[function(e,t,i){"use strict";var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var r=e("./window");var o=e("./isWindow");var a={array:function e(){},window:function e(t){return t===r.window||o(t)},docFrag:function e(t){return a.object(t)&&t.nodeType===11},object:function e(t){return!!t&&(typeof t==="undefined"?"undefined":n(t))==="object"},function:function e(t){return typeof t==="function"},number:function e(t){return typeof t==="number"},bool:function e(t){return typeof t==="boolean"},string:function e(t){return typeof t==="string"},element:function e(t){if(!t||(typeof t==="undefined"?"undefined":n(t))!=="object"){return false}var i=r.getWindow(t)||r.window;return/object|function/.test(n(i.Element))?t instanceof i.Element:t.nodeType===1&&typeof t.nodeName==="string"},plainObject:function e(t){return a.object(t)&&t.constructor.name==="Object"}};a.array=function(e){return a.object(e)&&typeof e.length!=="undefined"&&a.function(e.splice)};t.exports=a},{"./isWindow":47,"./window":52}],47:[function(e,t,i){"use strict";t.exports=function(e){return!!(e&&e.Window)&&e instanceof e.Window}},{}],48:[function(e,t,i){"use strict";function n(e,i){for(var n in i){var r=t.exports.prefixedPropREs;var o=false;for(var a in r){if(n.indexOf(a)===0&&r[a].test(n)){o=true;break}}if(!o&&typeof i[n]!=="function"){e[n]=i[n]}}return e}n.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/};t.exports=n},{}],49:[function(e,t,i){"use strict";var n=e("./hypot");var r=e("./browser");var o=e("./domObjects");var a=e("./domUtils");var s=e("./domObjects");var l=e("./is");var u=e("./pointerExtend");var c={copyCoords:function e(t,i){t.page=t.page||{};t.page.x=i.page.x;t.page.y=i.page.y;t.client=t.client||{};t.client.x=i.client.x;t.client.y=i.client.y;t.timeStamp=i.timeStamp},setCoordDeltas:function e(t,i,r){t.page.x=r.page.x-i.page.x;t.page.y=r.page.y-i.page.y;t.client.x=r.client.x-i.client.x;t.client.y=r.client.y-i.client.y;t.timeStamp=r.timeStamp-i.timeStamp;var o=Math.max(t.timeStamp/1e3,.001);t.page.speed=n(t.page.x,t.page.y)/o;t.page.vx=t.page.x/o;t.page.vy=t.page.y/o;t.client.speed=n(t.client.x,t.page.y)/o;t.client.vx=t.client.x/o;t.client.vy=t.client.y/o},isNativePointer:function e(t){return t instanceof o.Event||t instanceof o.Touch},getXY:function e(t,i,n){n=n||{};t=t||"page";n.x=i[t+"X"];n.y=i[t+"Y"];return n},getPageXY:function e(t,i){i=i||{};if(r.isOperaMobile&&c.isNativePointer(t)){c.getXY("screen",t,i);i.x+=window.scrollX;i.y+=window.scrollY}else{c.getXY("page",t,i)}return i},getClientXY:function e(t,i){i=i||{};if(r.isOperaMobile&&c.isNativePointer(t)){c.getXY("screen",t,i)}else{c.getXY("client",t,i)}return i},getPointerId:function e(t){return l.number(t.pointerId)?t.pointerId:t.identifier},setCoords:function e(t,i,n){var r=i.length>1?c.pointerAverage(i):i[0];var o={};c.getPageXY(r,o);t.page.x=o.x;t.page.y=o.y;c.getClientXY(r,o);t.client.x=o.x;t.client.y=o.y;t.timeStamp=l.number(n)?n:(new Date).getTime()},pointerExtend:u,getTouchPair:function e(t){var i=[];if(l.array(t)){i[0]=t[0];i[1]=t[1]}else{if(t.type==="touchend"){if(t.touches.length===1){i[0]=t.touches[0];i[1]=t.changedTouches[0]}else if(t.touches.length===0){i[0]=t.changedTouches[0];i[1]=t.changedTouches[1]}}else{i[0]=t.touches[0];i[1]=t.touches[1]}}return i},pointerAverage:function e(t){var i={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0};for(var n=0;n<t.length;n++){var r;r=t[n];var o=r;for(var a in i){i[a]+=o[a]}}for(var s in i){i[s]/=t.length}return i},touchBBox:function e(t){if(!t.length&&!(t.touches&&t.touches.length>1)){return}var i=c.getTouchPair(t);var n=Math.min(i[0].pageX,i[1].pageX);var r=Math.min(i[0].pageY,i[1].pageY);var o=Math.max(i[0].pageX,i[1].pageX);var a=Math.max(i[0].pageY,i[1].pageY);return{x:n,y:r,left:n,top:r,width:o-n,height:a-r}},touchDistance:function e(t,i){var r=i+"X";var o=i+"Y";var a=c.getTouchPair(t);var s=a[0][r]-a[1][r];var l=a[0][o]-a[1][o];return n(s,l)},touchAngle:function e(t,i,n){var r=n+"X";var o=n+"Y";var a=c.getTouchPair(t);var s=a[1][r]-a[0][r];var l=a[1][o]-a[0][o];var u=180*Math.atan2(l,s)/Math.PI;return u},getPointerType:function e(t){return l.string(t.pointerType)?t.pointerType:l.number(t.pointerType)?[undefined,undefined,"touch","pen","mouse"][t.pointerType]:/touch/.test(t.type)||t instanceof s.Touch?"touch":"mouse"},getEventTargets:function e(t){var i=l.function(t.composedPath)?t.composedPath():t.path;return[a.getActualElement(i?i[0]:t.target),a.getActualElement(t.currentTarget)]}};t.exports=c},{"./browser":36,"./domObjects":38,"./domUtils":39,"./hypot":43,"./is":46,"./pointerExtend":48}],50:[function(e,t,i){"use strict";var n=e("./window"),r=n.window;var o=["ms","moz","webkit","o"];var a=0;var s=void 0;var l=void 0;for(var u=0;u<o.length&&!r.requestAnimationFrame;u++){s=r[o[u]+"RequestAnimationFrame"];l=r[o[u]+"CancelAnimationFrame"]||r[o[u]+"CancelRequestAnimationFrame"]}if(!s){s=function e(t){var i=(new Date).getTime();var n=Math.max(0,16-(i-a));var r=setTimeout((function(){t(i+n)}),n);a=i+n;return r}}if(!l){l=function e(t){clearTimeout(t)}}t.exports={request:s,cancel:l}},{"./window":52}],51:[function(e,t,i){"use strict";var n=e("./extend");var r=e("./is");var o=e("./domUtils"),a=o.closest,s=o.parentNode,l=o.getElementRect;var u={getStringOptionResult:function e(t,i,n){if(!r.string(t)){return null}if(t==="parent"){t=s(n)}else if(t==="self"){t=i.getRect(n)}else{t=a(n,t)}return t},resolveRectLike:function e(t,i,n,o){t=u.getStringOptionResult(t,i,n)||t;if(r.function(t)){t=t.apply(null,o)}if(r.element(t)){t=l(t)}return t},rectToXY:function e(t){return t&&{x:"x"in t?t.x:t.left,y:"y"in t?t.y:t.top}},xywhToTlbr:function e(t){if(t&&!("left"in t&&"top"in t)){t=n({},t);t.left=t.x||0;t.top=t.y||0;t.right=t.right||t.left+t.width;t.bottom=t.bottom||t.top+t.height}return t},tlbrToXywh:function e(t){if(t&&!("x"in t&&"y"in t)){t=n({},t);t.x=t.left||0;t.top=t.top||0;t.width=t.width||t.right-t.x;t.height=t.height||t.bottom-t.y}return t}};t.exports=u},{"./domUtils":39,"./extend":41,"./is":46}],52:[function(e,t,i){"use strict";var n=t.exports;var r=e("./isWindow");function o(e){n.realWindow=e;var t=e.document.createTextNode("");if(t.ownerDocument!==e.document&&typeof e.wrap==="function"&&e.wrap(t)===t){e=e.wrap(e)}n.window=e}if(typeof window==="undefined"){n.window=undefined;n.realWindow=undefined}else{o(window)}n.getWindow=function e(t){if(r(t)){return t}var i=t.ownerDocument||t;return i.defaultView||i.parentWindow||n.window};n.init=o},{"./isWindow":47}]},{},[1])(1)}));"undefined"==typeof jQuery.migrateMute&&(jQuery.migrateMute=!0),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],(function(t){return e(t,window)})):"object"==typeof module&&module.exports?module.exports=e(require("jquery"),window):e(jQuery,window)}((function(e,t){"use strict";function i(t){return 0<=function(e,t){for(var i=/^(\d+)\.(\d+)\.(\d+)/,n=i.exec(e)||[],r=i.exec(t)||[],o=1;o<=3;o++){if(+r[o]<+n[o])return 1;if(+n[o]<+r[o])return-1}return 0}(e.fn.jquery,t)}e.migrateVersion="3.3.2",t.console&&t.console.log&&(e&&i("3.0.0")||t.console.log("JQMIGRATE: jQuery 3.0.0+ REQUIRED"),e.migrateWarnings&&t.console.log("JQMIGRATE: Migrate plugin loaded multiple times"),t.console.log("JQMIGRATE: Migrate is installed"+(e.migrateMute?"":" with logging active")+", version "+e.migrateVersion));var n={};function r(i){var r=t.console;e.migrateDeduplicateWarnings&&n[i]||(n[i]=!0,e.migrateWarnings.push(i),r&&r.warn&&!e.migrateMute&&(r.warn("JQMIGRATE: "+i),e.migrateTrace&&r.trace&&r.trace()))}function o(e,t,i,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return r(n),i},set:function(e){r(n),i=e}})}function a(e,t,i,n){e[t]=function(){return r(n),i.apply(this,arguments)}}e.migrateDeduplicateWarnings=!0,e.migrateWarnings=[],void 0===e.migrateTrace&&(e.migrateTrace=!0),e.migrateReset=function(){n={},e.migrateWarnings.length=0},"BackCompat"===t.document.compatMode&&r("jQuery is not compatible with Quirks Mode");var s,l,u,c={},d=e.fn.init,f=e.find,p=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,h=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,g=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;for(s in e.fn.init=function(e){var t=Array.prototype.slice.call(arguments);return"string"==typeof e&&"#"===e&&(r("jQuery( '#' ) is not a valid selector"),t[0]=[]),d.apply(this,t)},e.fn.init.prototype=e.fn,e.find=function(e){var i=Array.prototype.slice.call(arguments);if("string"==typeof e&&p.test(e))try{t.document.querySelector(e)}catch(n){e=e.replace(h,(function(e,t,i,n){return"["+t+i+'"'+n+'"]'}));try{t.document.querySelector(e),r("Attribute selector with '#' must be quoted: "+i[0]),i[0]=e}catch(e){r("Attribute selector with '#' was not fixed: "+i[0])}}return f.apply(this,i)},f)Object.prototype.hasOwnProperty.call(f,s)&&(e.find[s]=f[s]);a(e.fn,"size",(function(){return this.length}),"jQuery.fn.size() is deprecated and removed; use the .length property"),a(e,"parseJSON",(function(){return JSON.parse.apply(null,arguments)}),"jQuery.parseJSON is deprecated; use JSON.parse"),a(e,"holdReady",e.holdReady,"jQuery.holdReady is deprecated"),a(e,"unique",e.uniqueSort,"jQuery.unique is deprecated; use jQuery.uniqueSort"),o(e.expr,"filters",e.expr.pseudos,"jQuery.expr.filters is deprecated; use jQuery.expr.pseudos"),o(e.expr,":",e.expr.pseudos,"jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos"),i("3.1.1")&&a(e,"trim",(function(e){return null==e?"":(e+"").replace(g,"")}),"jQuery.trim is deprecated; use String.prototype.trim"),i("3.2.0")&&(a(e,"nodeName",(function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}),"jQuery.nodeName is deprecated"),a(e,"isArray",Array.isArray,"jQuery.isArray is deprecated; use Array.isArray")),i("3.3.0")&&(a(e,"isNumeric",(function(e){var t=typeof e;return("number"==t||"string"==t)&&!isNaN(e-parseFloat(e))}),"jQuery.isNumeric() is deprecated"),e.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){c["[object "+t+"]"]=t.toLowerCase()})),a(e,"type",(function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[Object.prototype.toString.call(e)]||"object":typeof e}),"jQuery.type is deprecated"),a(e,"isFunction",(function(e){return"function"==typeof e}),"jQuery.isFunction() is deprecated"),a(e,"isWindow",(function(e){return null!=e&&e===e.window}),"jQuery.isWindow() is deprecated")),e.ajax&&(l=e.ajax,u=/(=)\?(?=&|$)|\?\?/,e.ajax=function(){var e=l.apply(this,arguments);return e.promise&&(a(e,"success",e.done,"jQXHR.success is deprecated and removed"),a(e,"error",e.fail,"jQXHR.error is deprecated and removed"),a(e,"complete",e.always,"jQXHR.complete is deprecated and removed")),e},i("4.0.0")||e.ajaxPrefilter("+json",(function(e){!1!==e.jsonp&&(u.test(e.url)||"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&u.test(e.data))&&r("JSON-to-JSONP auto-promotion is deprecated")})));var m=e.fn.removeAttr,v=e.fn.toggleClass,y=/\S+/g;function b(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))}e.fn.removeAttr=function(t){var i=this;return e.each(t.match(y),(function(t,n){e.expr.match.bool.test(n)&&(r("jQuery.fn.removeAttr no longer sets boolean properties: "+n),i.prop(n,!1))})),m.apply(this,arguments)};var _,w=!(e.fn.toggleClass=function(t){return void 0!==t&&"boolean"!=typeof t?v.apply(this,arguments):(r("jQuery.fn.toggleClass( boolean ) is deprecated"),this.each((function(){var i=this.getAttribute&&this.getAttribute("class")||"";i&&e.data(this,"__className__",i),this.setAttribute&&this.setAttribute("class",!i&&!1!==t&&e.data(this,"__className__")||"")})))}),C=/^[a-z]/,A=/^(?:Border(?:Top|Right|Bottom|Left)?(?:Width|)|(?:Margin|Padding)?(?:Top|Right|Bottom|Left)?|(?:Min|Max)?(?:Width|Height))$/;e.swap&&e.each(["height","width","reliableMarginRight"],(function(t,i){var n=e.cssHooks[i]&&e.cssHooks[i].get;n&&(e.cssHooks[i].get=function(){var e;return w=!0,e=n.apply(this,arguments),w=!1,e})})),e.swap=function(e,t,i,n){var o,a,s={};for(a in w||r("jQuery.swap() is undocumented and deprecated"),t)s[a]=e.style[a],e.style[a]=t[a];for(a in o=i.apply(e,n||[]),t)e.style[a]=s[a];return o},i("3.4.0")&&"undefined"!=typeof Proxy&&(e.cssProps=new Proxy(e.cssProps||{},{set:function(){return r("JQMIGRATE: jQuery.cssProps is deprecated"),Reflect.set.apply(this,arguments)}})),e.cssNumber||(e.cssNumber={}),_=e.fn.css,e.fn.css=function(t,i){var n,o,a=this;return t&&"object"==typeof t&&!Array.isArray(t)?(e.each(t,(function(t,i){e.fn.css.call(a,t,i)})),this):("number"==typeof i&&(n=b(t),o=n,C.test(o)&&A.test(o[0].toUpperCase()+o.slice(1))||e.cssNumber[n]||r('Number-typed values are deprecated for jQuery.fn.css( "'+t+'", value )')),_.apply(this,arguments))};var E,x,T,S,D=e.data;e.data=function(t,i,n){var o,a,s;if(i&&"object"==typeof i&&2===arguments.length){for(s in o=e.hasData(t)&&D.call(this,t),a={},i)s!==b(s)?(r("jQuery.data() always sets/gets camelCased names: "+s),o[s]=i[s]):a[s]=i[s];return D.call(this,t,a),i}return i&&"string"==typeof i&&i!==b(i)&&(o=e.hasData(t)&&D.call(this,t))&&i in o?(r("jQuery.data() always sets/gets camelCased names: "+i),2<arguments.length&&(o[i]=n),o[i]):D.apply(this,arguments)},e.fx&&(T=e.Tween.prototype.run,S=function(e){return e},e.Tween.prototype.run=function(){1<e.easing[this.easing].length&&(r("'jQuery.easing."+this.easing.toString()+"' should use only one argument"),e.easing[this.easing]=S),T.apply(this,arguments)},E=e.fx.interval||13,x="jQuery.fx.interval is deprecated",t.requestAnimationFrame&&Object.defineProperty(e.fx,"interval",{configurable:!0,enumerable:!0,get:function(){return t.document.hidden||r(x),E},set:function(e){r(x),E=e}}));var k=e.fn.load,O=e.event.add,R=e.event.fix;e.event.props=[],e.event.fixHooks={},o(e.event.props,"concat",e.event.props.concat,"jQuery.event.props.concat() is deprecated and removed"),e.event.fix=function(t){var i,n=t.type,o=this.fixHooks[n],a=e.event.props;if(a.length){r("jQuery.event.props are deprecated and removed: "+a.join());while(a.length)e.event.addProp(a.pop())}if(o&&!o._migrated_&&(o._migrated_=!0,r("jQuery.event.fixHooks are deprecated and removed: "+n),(a=o.props)&&a.length))while(a.length)e.event.addProp(a.pop());return i=R.call(this,t),o&&o.filter?o.filter(i,t):i},e.event.add=function(e,i){return e===t&&"load"===i&&"complete"===t.document.readyState&&r("jQuery(window).on('load'...) called after load event occurred"),O.apply(this,arguments)},e.each(["load","unload","error"],(function(t,i){e.fn[i]=function(){var e=Array.prototype.slice.call(arguments,0);return"load"===i&&"string"==typeof e[0]?k.apply(this,e):(r("jQuery.fn."+i+"() is deprecated"),e.splice(0,0,i),arguments.length?this.on.apply(this,e):(this.triggerHandler.apply(this,e),this))}})),e.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,i){e.fn[i]=function(e,t){return r("jQuery.fn."+i+"() event shorthand is deprecated"),0<arguments.length?this.on(i,null,e,t):this.trigger(i)}})),e((function(){e(t.document).triggerHandler("ready")})),e.event.special.ready={setup:function(){this===t.document&&r("'ready' event is deprecated")}},e.fn.extend({bind:function(e,t,i){return r("jQuery.fn.bind() is deprecated"),this.on(e,null,t,i)},unbind:function(e,t){return r("jQuery.fn.unbind() is deprecated"),this.off(e,null,t)},delegate:function(e,t,i,n){return r("jQuery.fn.delegate() is deprecated"),this.on(t,e,i,n)},undelegate:function(e,t,i){return r("jQuery.fn.undelegate() is deprecated"),1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return r("jQuery.fn.hover() is deprecated"),this.on("mouseenter",e).on("mouseleave",t||e)}});function N(e){var i=t.document.implementation.createHTMLDocument("");return i.body.innerHTML=e,i.body&&i.body.innerHTML}function P(e){var t=e.replace(I,"<$1></$2>");t!==e&&N(e)!==N(t)&&r("HTML tags must be properly nested and closed: "+e)}var I=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,M=e.htmlPrefilter;e.UNSAFE_restoreLegacyHtmlPrefilter=function(){e.htmlPrefilter=function(e){return P(e),e.replace(I,"<$1></$2>")}},e.htmlPrefilter=function(e){return P(e),M(e)};var L,F=e.fn.offset;e.fn.offset=function(){var e=this[0];return!e||e.nodeType&&e.getBoundingClientRect?F.apply(this,arguments):(r("jQuery.fn.offset() requires a valid DOM element"),arguments.length?this:void 0)},e.ajax&&(L=e.param,e.param=function(t,i){var n=e.ajaxSettings&&e.ajaxSettings.traditional;return void 0===i&&n&&(r("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),i=n),L.call(this,t,i)});var G,$,W=e.fn.andSelf||e.fn.addBack;return e.fn.andSelf=function(){return r("jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()"),W.apply(this,arguments)},e.Deferred&&(G=e.Deferred,$=[["resolve","done",e.Callbacks("once memory"),e.Callbacks("once memory"),"resolved"],["reject","fail",e.Callbacks("once memory"),e.Callbacks("once memory"),"rejected"],["notify","progress",e.Callbacks("memory"),e.Callbacks("memory")]],e.Deferred=function(t){var i=G(),n=i.promise();return i.pipe=n.pipe=function(){var t=arguments;return r("deferred.pipe() is deprecated"),e.Deferred((function(r){e.each($,(function(e,o){var a="function"==typeof t[e]&&t[e];i[o[1]]((function(){var e=a&&a.apply(this,arguments);e&&"function"==typeof e.promise?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o[0]+"With"](this===n?r.promise():this,a?[e]:arguments)}))})),t=null})).promise()},t&&t.call(i,i),i},e.Deferred.exceptionHook=G.exceptionHook),e}));