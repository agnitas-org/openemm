/* ==========================================================================
   Emm JS - nightly build 24-07-2025
   ========================================================================== */

/* License
   ========================================================================== */

/**
 * EMM License to be added
 *
 **/



/* Libraries
   ========================================================================== */

/**
 * jQuery JavaScript Library v3.5.1
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * (c) 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Licensed under MIT (http://jquery.org/license)
 *
 * http://jquery.com
 **/

/**
 * Lo-Dash 4.17.21 (Custom Build)
 *
 * Build: `lodash -o ./dist/lodash.compat.js`
 *
 * Based on Underscore.js 1.8.3
 * Licensed under MIT (http://underscorejs.org/LICENSE)
 * (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 *
 * (c) 2012-2013 The Dojo Foundation http://dojofoundation.org/
 * Licensed under MIT (http://lodash.com/license)
 *
 * https://lodash.com/
 **/

 /**
 * D3.js 3.5.5
 *
 * Licensed under MIT (https://github.com/mbostock/d3/blob/master/LICENSE)
 * (c) 2010-2015, Michael Bostock
 *
 * http://d3js.org/
 **/

  /**
 * C3.js 0.4.10
 *
 * Licensed under MIT (https://github.com/masayuki0812/c3/blob/master/LICENSE)
 * (c) 2013 Masayuki Tanaka
 *
 * http://c3js.org/
 **/

/**
 * jQuery Plugins
 *
 * jquery-i18n v1.1.1
 * Licensed under MIT
 * (c) 2010 Dave Perrett
 * https://github.com/recurser/jquery-i18n
 *
 * jquery-migrate v3.3.2
 * Licensed under MIT
 * (c) 2005, 2013 jQuery Foundation, Inc. and other contributors
 * https://github.com/jquery/jquery-migrate
 *
 * jquery-select2 v3.5.2
 * Licensed under Apache License, Version 2.0 & GNU General Public License version 2
 * (c) 2012 Igor Vaynberg
 * https://ivaynberg.github.io/select2/
 *
 * jquery-mousewheel v3.1.9
 * Licensed under MIT
 * (c) 2013 Brandon Aaron
 * http://brandon.aaron.sh
 *
 * jquery-perfect-scrollbar v0.5.7
 * Licensed under MIT
 * (c) 2012, 2014 Hyunje Alex Jun and other contributors
 * https://noraesae.github.io/perfect-scrollbar/
 *
 * jquery DoubleScroll v0.4
 * Dual licensed under the MIT and GPL licenses
 * (c) Pawel Suwala, Antoine Vianey
 * https://github.com/avianey/jqDoubleScroll
 *
 * jquery Endless Scroll
 * Dual licensed under the MIT and GPL licenses
 * (c) 2008-2012 Fred Wu
 * https://github.com/fredwu/jquery-endless-scroll
 *
 * jQuery File Upload Plugin
 * Licensed under the MIT license
 * (c) 2010, Sebastian Tschan
 * https://github.com/blueimp/jQuery-File-Upload
 **/

/**
 * Bootstrap Components v3.4.1
 *
 * dropdown.js
 * modal.js
 * popover.js
 * tooltip.js
 *
 * (c) 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 *
 * http://getbootstrap.com/
 **/

/**
 * Bootstrap Extensions
 *
 * bootstrap-slider v4.8.1
 * Licensed under MIT
 * (c) 2015 Kyle Kemp, Rohit Kalkur, and contributors
 *
 * bootstrap-colorpicker v2.5.2
 * Licensed under Apache License v2.0
 * (c) 2012 Stefan Petre
 *
 **/

/**
 * jQuery UI v1.13.1
 *
 * core.js, widget.js, mouse.js, position.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, draggable.js, droppable.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js, menu.js, progressbar.js, resizable.js, selectable.js, selectmenu.js, slider.js, sortable.js, spinner.js, tabs.js, tooltip.js
 *
 * (c) 2014 jQuery Foundation and other contributors
 * Licensed under MIT
 *
 * http://jqueryui.com
 **/

/**
 * Pickadate v3.5.6
 *
 * date.js
 * time.js
 * legacy.js
 *
 * (c) 2014 Amsul, http://amsul.ca
 * Licensed under https://github.com/amsul/pickadate.js/blob/3.5.6/LICENSE.md
 *
 * https://amsul.github.io/pickadate.js
 **/

/**
 * Ace Editor
 *
 * Distributed under the BSD license:

 * Copyright (c) 2010, Ajax.org B.V.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of Ajax.org B.V. nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * http://ace.c9.io/
 **/

/**
 * iFrame Resizer v4.3.2
 *
 * (c) 2014 David J. Bradshaw - dave@bradshaw.net
 * Licensed under MIT
 *
 * https://davidjbradshaw.github.io/iframe-resizer/
 **/

/**
 * Toastr (modified version)
 *
 * (c) 2012-2014 John Papa and Hans Fjällemark
 * Licensed under MIT
 *
 * https://github.com/CodeSeven/toastr
 **/

/**
 * EmojiOne Area v v3.4.1
 *
 * EmojiOneArea is released under the MIT license.
 *
 * Copyright (c) 2015-2017 Andrey Izman <izmanw@gmail.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

(function(e,t){"use strict";if(typeof module==="object"&&typeof module.exports==="object"){module.exports=e.document?t(e,true):function(e){if(!e.document){throw new Error("jQuery requires a window with a document")}return t(e)}}else{t(e)}})(typeof window!=="undefined"?window:this,(function(e,t){"use strict";var i=[];var n=Object.getPrototypeOf;var r=i.slice;var o=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)};var s=i.push;var a=i.indexOf;var l={};var c=l.toString;var d=l.hasOwnProperty;var u=d.toString;var h=u.call(Object);var p={};var f=function e(t){return typeof t==="function"&&typeof t.nodeType!=="number"&&typeof t.item!=="function"};var g=function e(t){return t!=null&&t===t.window};var m=e.document;var v={type:true,src:true,nonce:true,noModule:true};function b(e,t,i){i=i||m;var n,r,o=i.createElement("script");o.text=e;if(t){for(n in v){r=t[n]||t.getAttribute&&t.getAttribute(n);if(r){o.setAttribute(n,r)}}}i.head.appendChild(o).parentNode.removeChild(o)}function y(e){if(e==null){return e+""}return typeof e==="object"||typeof e==="function"?l[c.call(e)]||"object":typeof e}var w="3.5.1",C=function(e,t){return new C.fn.init(e,t)};C.fn=C.prototype={jquery:w,constructor:C,length:0,toArray:function(){return r.call(this)},get:function(e){if(e==null){return r.call(this)}return e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=C.merge(this.constructor(),e);t.prevObject=this;return t},each:function(e){return C.each(this,e)},map:function(e){return this.pushStack(C.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(C.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:i.sort,splice:i.splice};C.extend=C.fn.extend=function(){var e,t,i,n,r,o,s=arguments[0]||{},a=1,l=arguments.length,c=false;if(typeof s==="boolean"){c=s;s=arguments[a]||{};a++}if(typeof s!=="object"&&!f(s)){s={}}if(a===l){s=this;a--}for(;a<l;a++){if((e=arguments[a])!=null){for(t in e){n=e[t];if(t==="__proto__"||s===n){continue}if(c&&n&&(C.isPlainObject(n)||(r=Array.isArray(n)))){i=s[t];if(r&&!Array.isArray(i)){o=[]}else if(!r&&!C.isPlainObject(i)){o={}}else{o=i}r=false;s[t]=C.extend(c,o,n)}else if(n!==undefined){s[t]=n}}}}return s};C.extend({expando:"jQuery"+(w+Math.random()).replace(/\D/g,""),isReady:true,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;if(!e||c.call(e)!=="[object Object]"){return false}t=n(e);if(!t){return true}i=d.call(t,"constructor")&&t.constructor;return typeof i==="function"&&u.call(i)===h},isEmptyObject:function(e){var t;for(t in e){return false}return true},globalEval:function(e,t,i){b(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,n=0;if(_(e)){i=e.length;for(;n<i;n++){if(t.call(e[n],n,e[n])===false){break}}}else{for(n in e){if(t.call(e[n],n,e[n])===false){break}}}return e},makeArray:function(e,t){var i=t||[];if(e!=null){if(_(Object(e))){C.merge(i,typeof e==="string"?[e]:e)}else{s.call(i,e)}}return i},inArray:function(e,t,i){return t==null?-1:a.call(t,e,i)},merge:function(e,t){var i=+t.length,n=0,r=e.length;for(;n<i;n++){e[r++]=t[n]}e.length=r;return e},grep:function(e,t,i){var n,r=[],o=0,s=e.length,a=!i;for(;o<s;o++){n=!t(e[o],o);if(n!==a){r.push(e[o])}}return r},map:function(e,t,i){var n,r,s=0,a=[];if(_(e)){n=e.length;for(;s<n;s++){r=t(e[s],s,i);if(r!=null){a.push(r)}}}else{for(s in e){r=t(e[s],s,i);if(r!=null){a.push(r)}}}return o(a)},guid:1,support:p});if(typeof Symbol==="function"){C.fn[Symbol.iterator]=i[Symbol.iterator]}C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){l["[object "+t+"]"]=t.toLowerCase()}));function _(e){var t=!!e&&"length"in e&&e.length,i=y(e);if(f(e)||g(e)){return false}return i==="array"||t===0||typeof t==="number"&&t>0&&t-1 in e}var S=function(e){var t,i,n,r,o,s,a,l,c,d,u,h,p,f,g,m,v,b,y,w="sizzle"+1*new Date,C=e.document,_=0,S=0,A=le(),x=le(),E=le(),T=le(),D=function(e,t){if(e===t){u=true}return 0},M={}.hasOwnProperty,k=[],P=k.pop,R=k.push,I=k.push,O=k.slice,N=function(e,t){var i=0,n=e.length;for(;i<n;i++){if(e[i]===t){return i}}return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|"+"ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",$="(?:\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",G="\\["+F+"*("+$+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+$+"))|)"+F+"*\\]",B=":("+$+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+G+")*)|"+".*"+")\\)|)",H=new RegExp(F+"+","g"),z=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),W=new RegExp("^"+F+"*,"+F+"*"),V=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),j=new RegExp(F+"|>"),U=new RegExp(B),Y=new RegExp("^"+$+"$"),q={ID:new RegExp("^#("+$+")"),CLASS:new RegExp("^\\.("+$+")"),TAG:new RegExp("^("+$+"|[*])"),ATTR:new RegExp("^"+G),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},K=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\([^\\r\\n\\f])","g"),ie=function(e,t){var i="0x"+e.slice(1)-65536;return t?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,i&1023|56320)},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,re=function(e,t){if(t){if(e==="\0"){return"�"}return e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" "}return"\\"+e},oe=function(){h()},se=we((function(e){return e.disabled===true&&e.nodeName.toLowerCase()==="fieldset"}),{dir:"parentNode",next:"legend"});try{I.apply(k=O.call(C.childNodes),C.childNodes);k[C.childNodes.length].nodeType}catch(e){I={apply:k.length?function(e,t){R.apply(e,O.call(t))}:function(e,t){var i=e.length,n=0;while(e[i++]=t[n++]){}e.length=i-1}}}function ae(e,t,n,r){var o,a,c,d,u,f,v,b=t&&t.ownerDocument,C=t?t.nodeType:9;n=n||[];if(typeof e!=="string"||!e||C!==1&&C!==9&&C!==11){return n}if(!r){h(t);t=t||p;if(g){if(C!==11&&(u=J.exec(e))){if(o=u[1]){if(C===9){if(c=t.getElementById(o)){if(c.id===o){n.push(c);return n}}else{return n}}else{if(b&&(c=b.getElementById(o))&&y(t,c)&&c.id===o){n.push(c);return n}}}else if(u[2]){I.apply(n,t.getElementsByTagName(e));return n}else if((o=u[3])&&i.getElementsByClassName&&t.getElementsByClassName){I.apply(n,t.getElementsByClassName(o));return n}}if(i.qsa&&!T[e+" "]&&(!m||!m.test(e))&&(C!==1||t.nodeName.toLowerCase()!=="object")){v=e;b=t;if(C===1&&(j.test(e)||V.test(e))){b=ee.test(e)&&ve(t.parentNode)||t;if(b!==t||!i.scope){if(d=t.getAttribute("id")){d=d.replace(ne,re)}else{t.setAttribute("id",d=w)}}f=s(e);a=f.length;while(a--){f[a]=(d?"#"+d:":scope")+" "+ye(f[a])}v=f.join(",")}try{I.apply(n,b.querySelectorAll(v));return n}catch(t){T(e,true)}finally{if(d===w){t.removeAttribute("id")}}}}}return l(e.replace(z,"$1"),t,n,r)}function le(){var e=[];function t(i,r){if(e.push(i+" ")>n.cacheLength){delete t[e.shift()]}return t[i+" "]=r}return t}function ce(e){e[w]=true;return e}function de(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return false}finally{if(t.parentNode){t.parentNode.removeChild(t)}t=null}}function ue(e,t){var i=e.split("|"),r=i.length;while(r--){n.attrHandle[i[r]]=t}}function he(e,t){var i=t&&e,n=i&&e.nodeType===1&&t.nodeType===1&&e.sourceIndex-t.sourceIndex;if(n){return n}if(i){while(i=i.nextSibling){if(i===t){return-1}}}return e?1:-1}function pe(e){return function(t){var i=t.nodeName.toLowerCase();return i==="input"&&t.type===e}}function fe(e){return function(t){var i=t.nodeName.toLowerCase();return(i==="input"||i==="button")&&t.type===e}}function ge(e){return function(t){if("form"in t){if(t.parentNode&&t.disabled===false){if("label"in t){if("label"in t.parentNode){return t.parentNode.disabled===e}else{return t.disabled===e}}return t.isDisabled===e||t.isDisabled!==!e&&se(t)===e}return t.disabled===e}else if("label"in t){return t.disabled===e}return false}}function me(e){return ce((function(t){t=+t;return ce((function(i,n){var r,o=e([],i.length,t),s=o.length;while(s--){if(i[r=o[s]]){i[r]=!(n[r]=i[r])}}}))}))}function ve(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}i=ae.support={};o=ae.isXML=function(e){var t=e.namespaceURI,i=(e.ownerDocument||e).documentElement;return!K.test(t||i&&i.nodeName||"HTML")};h=ae.setDocument=function(e){var t,r,s=e?e.ownerDocument||e:C;if(s==p||s.nodeType!==9||!s.documentElement){return p}p=s;f=p.documentElement;g=!o(p);if(C!=p&&(r=p.defaultView)&&r.top!==r){if(r.addEventListener){r.addEventListener("unload",oe,false)}else if(r.attachEvent){r.attachEvent("onunload",oe)}}i.scope=de((function(e){f.appendChild(e).appendChild(p.createElement("div"));return typeof e.querySelectorAll!=="undefined"&&!e.querySelectorAll(":scope fieldset div").length}));i.attributes=de((function(e){e.className="i";return!e.getAttribute("className")}));i.getElementsByTagName=de((function(e){e.appendChild(p.createComment(""));return!e.getElementsByTagName("*").length}));i.getElementsByClassName=Q.test(p.getElementsByClassName);i.getById=de((function(e){f.appendChild(e).id=w;return!p.getElementsByName||!p.getElementsByName(w).length}));if(i.getById){n.filter["ID"]=function(e){var t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}};n.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&g){var i=t.getElementById(e);return i?[i]:[]}}}else{n.filter["ID"]=function(e){var t=e.replace(te,ie);return function(e){var i=typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id");return i&&i.value===t}};n.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&g){var i,n,r,o=t.getElementById(e);if(o){i=o.getAttributeNode("id");if(i&&i.value===e){return[o]}r=t.getElementsByName(e);n=0;while(o=r[n++]){i=o.getAttributeNode("id");if(i&&i.value===e){return[o]}}}return[]}}}n.find["TAG"]=i.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!=="undefined"){return t.getElementsByTagName(e)}else if(i.qsa){return t.querySelectorAll(e)}}:function(e,t){var i,n=[],r=0,o=t.getElementsByTagName(e);if(e==="*"){while(i=o[r++]){if(i.nodeType===1){n.push(i)}}return n}return o};n.find["CLASS"]=i.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!=="undefined"&&g){return t.getElementsByClassName(e)}};v=[];m=[];if(i.qsa=Q.test(p.querySelectorAll)){de((function(e){var t;f.appendChild(e).innerHTML="<a id='"+w+"'></a>"+"<select id='"+w+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(e.querySelectorAll("[msallowcapture^='']").length){m.push("[*^$]="+F+"*(?:''|\"\")")}if(!e.querySelectorAll("[selected]").length){m.push("\\["+F+"*(?:value|"+L+")")}if(!e.querySelectorAll("[id~="+w+"-]").length){m.push("~=")}t=p.createElement("input");t.setAttribute("name","");e.appendChild(t);if(!e.querySelectorAll("[name='']").length){m.push("\\["+F+"*name"+F+"*="+F+"*(?:''|\"\")")}if(!e.querySelectorAll(":checked").length){m.push(":checked")}if(!e.querySelectorAll("a#"+w+"+*").length){m.push(".#.+[+~]")}e.querySelectorAll("\\\f");m.push("[\\r\\n\\f]")}));de((function(e){e.innerHTML="<a href='' disabled='disabled'></a>"+"<select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden");e.appendChild(t).setAttribute("name","D");if(e.querySelectorAll("[name=d]").length){m.push("name"+F+"*[*^$|!~]?=")}if(e.querySelectorAll(":enabled").length!==2){m.push(":enabled",":disabled")}f.appendChild(e).disabled=true;if(e.querySelectorAll(":disabled").length!==2){m.push(":enabled",":disabled")}e.querySelectorAll("*,:x");m.push(",.*:")}))}if(i.matchesSelector=Q.test(b=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector)){de((function(e){i.disconnectedMatch=b.call(e,"*");b.call(e,"[s!='']:x");v.push("!=",B)}))}m=m.length&&new RegExp(m.join("|"));v=v.length&&new RegExp(v.join("|"));t=Q.test(f.compareDocumentPosition);y=t||Q.test(f.contains)?function(e,t){var i=e.nodeType===9?e.documentElement:e,n=t&&t.parentNode;return e===n||!!(n&&n.nodeType===1&&(i.contains?i.contains(n):e.compareDocumentPosition&&e.compareDocumentPosition(n)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};D=t?function(e,t){if(e===t){u=true;return 0}var n=!e.compareDocumentPosition-!t.compareDocumentPosition;if(n){return n}n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1;if(n&1||!i.sortDetached&&t.compareDocumentPosition(e)===n){if(e==p||e.ownerDocument==C&&y(C,e)){return-1}if(t==p||t.ownerDocument==C&&y(C,t)){return 1}return d?N(d,e)-N(d,t):0}return n&4?-1:1}:function(e,t){if(e===t){u=true;return 0}var i,n=0,r=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!r||!o){return e==p?-1:t==p?1:r?-1:o?1:d?N(d,e)-N(d,t):0}else if(r===o){return he(e,t)}i=e;while(i=i.parentNode){s.unshift(i)}i=t;while(i=i.parentNode){a.unshift(i)}while(s[n]===a[n]){n++}return n?he(s[n],a[n]):s[n]==C?-1:a[n]==C?1:0};return p};ae.matches=function(e,t){return ae(e,null,null,t)};ae.matchesSelector=function(e,t){h(e);if(i.matchesSelector&&g&&!T[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t))){try{var n=b.call(e,t);if(n||i.disconnectedMatch||e.document&&e.document.nodeType!==11){return n}}catch(e){T(t,true)}}return ae(t,p,null,[e]).length>0};ae.contains=function(e,t){if((e.ownerDocument||e)!=p){h(e)}return y(e,t)};ae.attr=function(e,t){if((e.ownerDocument||e)!=p){h(e)}var r=n.attrHandle[t.toLowerCase()],o=r&&M.call(n.attrHandle,t.toLowerCase())?r(e,t,!g):undefined;return o!==undefined?o:i.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null};ae.escape=function(e){return(e+"").replace(ne,re)};ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};ae.uniqueSort=function(e){var t,n=[],r=0,o=0;u=!i.detectDuplicates;d=!i.sortStable&&e.slice(0);e.sort(D);if(u){while(t=e[o++]){if(t===e[o]){r=n.push(o)}}while(r--){e.splice(n[r],1)}}d=null;return e};r=ae.getText=function(e){var t,i="",n=0,o=e.nodeType;if(!o){while(t=e[n++]){i+=r(t)}}else if(o===1||o===9||o===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){i+=r(e)}}}else if(o===3||o===4){return e.nodeValue}return i};n=ae.selectors={cacheLength:50,createPseudo:ce,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(te,ie);e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){ae.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+(e[7]+e[8]||e[3]==="odd")}else if(e[3]){ae.error(e[0])}return e},PSEUDO:function(e){var t,i=!e[6]&&e[2];if(q["CHILD"].test(e[0])){return null}if(e[3]){e[2]=e[4]||e[5]||""}else if(i&&U.test(i)&&(t=s(i,true))&&(t=i.indexOf(")",i.length-t)-i.length)){e[0]=e[0].slice(0,t);e[2]=i.slice(0,t)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(te,ie).toLowerCase();return e==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=A[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&A(e,(function(e){return t.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!=="undefined"&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(n){var r=ae.attr(n,e);if(r==null){return t==="!="}if(!t){return true}r+="";return t==="="?r===i:t==="!="?r!==i:t==="^="?i&&r.indexOf(i)===0:t==="*="?i&&r.indexOf(i)>-1:t==="$="?i&&r.slice(-i.length)===i:t==="~="?(" "+r.replace(H," ")+" ").indexOf(i)>-1:t==="|="?r===i||r.slice(0,i.length+1)===i+"-":false}},CHILD:function(e,t,i,n,r){var o=e.slice(0,3)!=="nth",s=e.slice(-4)!=="last",a=t==="of-type";return n===1&&r===0?function(e){return!!e.parentNode}:function(t,i,l){var c,d,u,h,p,f,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),b=!l&&!a,y=false;if(m){if(o){while(g){h=t;while(h=h[g]){if(a?h.nodeName.toLowerCase()===v:h.nodeType===1){return false}}f=g=e==="only"&&!f&&"nextSibling"}return true}f=[s?m.firstChild:m.lastChild];if(s&&b){h=m;u=h[w]||(h[w]={});d=u[h.uniqueID]||(u[h.uniqueID]={});c=d[e]||[];p=c[0]===_&&c[1];y=p&&c[2];h=p&&m.childNodes[p];while(h=++p&&h&&h[g]||(y=p=0)||f.pop()){if(h.nodeType===1&&++y&&h===t){d[e]=[_,p,y];break}}}else{if(b){h=t;u=h[w]||(h[w]={});d=u[h.uniqueID]||(u[h.uniqueID]={});c=d[e]||[];p=c[0]===_&&c[1];y=p}if(y===false){while(h=++p&&h&&h[g]||(y=p=0)||f.pop()){if((a?h.nodeName.toLowerCase()===v:h.nodeType===1)&&++y){if(b){u=h[w]||(h[w]={});d=u[h.uniqueID]||(u[h.uniqueID]={});d[e]=[_,y]}if(h===t){break}}}}}y-=r;return y===n||y%n===0&&y/n>=0}}},PSEUDO:function(e,t){var i,r=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);if(r[w]){return r(t)}if(r.length>1){i=[e,e,"",t];return n.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,i){var n,o=r(e,t),s=o.length;while(s--){n=N(e,o[s]);e[n]=!(i[n]=o[s])}})):function(e){return r(e,0,i)}}return r}},pseudos:{not:ce((function(e){var t=[],i=[],n=a(e.replace(z,"$1"));return n[w]?ce((function(e,t,i,r){var o,s=n(e,null,r,[]),a=e.length;while(a--){if(o=s[a]){e[a]=!(t[a]=o)}}})):function(e,r,o){t[0]=e;n(t,null,o,i);t[0]=null;return!i.pop()}})),has:ce((function(e){return function(t){return ae(e,t).length>0}})),contains:ce((function(e){e=e.replace(te,ie);return function(t){return(t.textContent||r(t)).indexOf(e)>-1}})),lang:ce((function(e){if(!Y.test(e||"")){ae.error("unsupported lang: "+e)}e=e.replace(te,ie).toLowerCase();return function(t){var i;do{if(i=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang")){i=i.toLowerCase();return i===e||i.indexOf(e+"-")===0}}while((t=t.parentNode)&&t.nodeType===1);return false}})),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(false),disabled:ge(true),checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return!n.pseudos["empty"](e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:me((function(){return[0]})),last:me((function(e,t){return[t-1]})),eq:me((function(e,t,i){return[i<0?i+t:i]})),even:me((function(e,t){var i=0;for(;i<t;i+=2){e.push(i)}return e})),odd:me((function(e,t){var i=1;for(;i<t;i+=2){e.push(i)}return e})),lt:me((function(e,t,i){var n=i<0?i+t:i>t?t:i;for(;--n>=0;){e.push(n)}return e})),gt:me((function(e,t,i){var n=i<0?i+t:i;for(;++n<t;){e.push(n)}return e}))}};n.pseudos["nth"]=n.pseudos["eq"];for(t in{radio:true,checkbox:true,file:true,password:true,image:true}){n.pseudos[t]=pe(t)}for(t in{submit:true,reset:true}){n.pseudos[t]=fe(t)}function be(){}be.prototype=n.filters=n.pseudos;n.setFilters=new be;s=ae.tokenize=function(e,t){var i,r,o,s,a,l,c,d=x[e+" "];if(d){return t?0:d.slice(0)}a=e;l=[];c=n.preFilter;while(a){if(!i||(r=W.exec(a))){if(r){a=a.slice(r[0].length)||a}l.push(o=[])}i=false;if(r=V.exec(a)){i=r.shift();o.push({value:i,type:r[0].replace(z," ")});a=a.slice(i.length)}for(s in n.filter){if((r=q[s].exec(a))&&(!c[s]||(r=c[s](r)))){i=r.shift();o.push({value:i,type:s,matches:r});a=a.slice(i.length)}}if(!i){break}}return t?a.length:a?ae.error(e):x(e,l).slice(0)};function ye(e){var t=0,i=e.length,n="";for(;t<i;t++){n+=e[t].value}return n}function we(e,t,i){var n=t.dir,r=t.next,o=r||n,s=i&&o==="parentNode",a=S++;return t.first?function(t,i,r){while(t=t[n]){if(t.nodeType===1||s){return e(t,i,r)}}return false}:function(t,i,l){var c,d,u,h=[_,a];if(l){while(t=t[n]){if(t.nodeType===1||s){if(e(t,i,l)){return true}}}}else{while(t=t[n]){if(t.nodeType===1||s){u=t[w]||(t[w]={});d=u[t.uniqueID]||(u[t.uniqueID]={});if(r&&r===t.nodeName.toLowerCase()){t=t[n]||t}else if((c=d[o])&&c[0]===_&&c[1]===a){return h[2]=c[2]}else{d[o]=h;if(h[2]=e(t,i,l)){return true}}}}}return false}}function Ce(e){return e.length>1?function(t,i,n){var r=e.length;while(r--){if(!e[r](t,i,n)){return false}}return true}:e[0]}function _e(e,t,i){var n=0,r=t.length;for(;n<r;n++){ae(e,t[n],i)}return i}function Se(e,t,i,n,r){var o,s=[],a=0,l=e.length,c=t!=null;for(;a<l;a++){if(o=e[a]){if(!i||i(o,n,r)){s.push(o);if(c){t.push(a)}}}}return s}function Ae(e,t,i,n,r,o){if(n&&!n[w]){n=Ae(n)}if(r&&!r[w]){r=Ae(r,o)}return ce((function(o,s,a,l){var c,d,u,h=[],p=[],f=s.length,g=o||_e(t||"*",a.nodeType?[a]:a,[]),m=e&&(o||!t)?Se(g,h,e,a,l):g,v=i?r||(o?e:f||n)?[]:s:m;if(i){i(m,v,a,l)}if(n){c=Se(v,p);n(c,[],a,l);d=c.length;while(d--){if(u=c[d]){v[p[d]]=!(m[p[d]]=u)}}}if(o){if(r||e){if(r){c=[];d=v.length;while(d--){if(u=v[d]){c.push(m[d]=u)}}r(null,v=[],c,l)}d=v.length;while(d--){if((u=v[d])&&(c=r?N(o,u):h[d])>-1){o[c]=!(s[c]=u)}}}}else{v=Se(v===s?v.splice(f,v.length):v);if(r){r(null,s,v,l)}else{I.apply(s,v)}}}))}function xe(e){var t,i,r,o=e.length,s=n.relative[e[0].type],a=s||n.relative[" "],l=s?1:0,d=we((function(e){return e===t}),a,true),u=we((function(e){return N(t,e)>-1}),a,true),h=[function(e,i,n){var r=!s&&(n||i!==c)||((t=i).nodeType?d(e,i,n):u(e,i,n));t=null;return r}];for(;l<o;l++){if(i=n.relative[e[l].type]){h=[we(Ce(h),i)]}else{i=n.filter[e[l].type].apply(null,e[l].matches);if(i[w]){r=++l;for(;r<o;r++){if(n.relative[e[r].type]){break}}return Ae(l>1&&Ce(h),l>1&&ye(e.slice(0,l-1).concat({value:e[l-2].type===" "?"*":""})).replace(z,"$1"),i,l<r&&xe(e.slice(l,r)),r<o&&xe(e=e.slice(r)),r<o&&ye(e))}h.push(i)}}return Ce(h)}function Ee(e,t){var i=t.length>0,r=e.length>0,o=function(o,s,a,l,d){var u,f,m,v=0,b="0",y=o&&[],w=[],C=c,S=o||r&&n.find["TAG"]("*",d),A=_+=C==null?1:Math.random()||.1,x=S.length;if(d){c=s==p||s||d}for(;b!==x&&(u=S[b])!=null;b++){if(r&&u){f=0;if(!s&&u.ownerDocument!=p){h(u);a=!g}while(m=e[f++]){if(m(u,s||p,a)){l.push(u);break}}if(d){_=A}}if(i){if(u=!m&&u){v--}if(o){y.push(u)}}}v+=b;if(i&&b!==v){f=0;while(m=t[f++]){m(y,w,s,a)}if(o){if(v>0){while(b--){if(!(y[b]||w[b])){w[b]=P.call(l)}}}w=Se(w)}I.apply(l,w);if(d&&!o&&w.length>0&&v+t.length>1){ae.uniqueSort(l)}}if(d){_=A;c=C}return y};return i?ce(o):o}a=ae.compile=function(e,t){var i,n=[],r=[],o=E[e+" "];if(!o){if(!t){t=s(e)}i=t.length;while(i--){o=xe(t[i]);if(o[w]){n.push(o)}else{r.push(o)}}o=E(e,Ee(r,n));o.selector=e}return o};l=ae.select=function(e,t,i,r){var o,l,c,d,u,h=typeof e==="function"&&e,p=!r&&s(e=h.selector||e);i=i||[];if(p.length===1){l=p[0]=p[0].slice(0);if(l.length>2&&(c=l[0]).type==="ID"&&t.nodeType===9&&g&&n.relative[l[1].type]){t=(n.find["ID"](c.matches[0].replace(te,ie),t)||[])[0];if(!t){return i}else if(h){t=t.parentNode}e=e.slice(l.shift().value.length)}o=q["needsContext"].test(e)?0:l.length;while(o--){c=l[o];if(n.relative[d=c.type]){break}if(u=n.find[d]){if(r=u(c.matches[0].replace(te,ie),ee.test(l[0].type)&&ve(t.parentNode)||t)){l.splice(o,1);e=r.length&&ye(l);if(!e){I.apply(i,r);return i}break}}}}(h||a(e,p))(r,t,!g,i,!t||ee.test(e)&&ve(t.parentNode)||t);return i};i.sortStable=w.split("").sort(D).join("")===w;i.detectDuplicates=!!u;h();i.sortDetached=de((function(e){return e.compareDocumentPosition(p.createElement("fieldset"))&1}));if(!de((function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"}))){ue("type|href|height|width",(function(e,t,i){if(!i){return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}}))}if(!i.attributes||!de((function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""}))){ue("value",(function(e,t,i){if(!i&&e.nodeName.toLowerCase()==="input"){return e.defaultValue}}))}if(!de((function(e){return e.getAttribute("disabled")==null}))){ue(L,(function(e,t,i){var n;if(!i){return e[t]===true?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}}))}return ae}(e);C.find=S;C.expr=S.selectors;C.expr[":"]=C.expr.pseudos;C.uniqueSort=C.unique=S.uniqueSort;C.text=S.getText;C.isXMLDoc=S.isXML;C.contains=S.contains;C.escapeSelector=S.escape;var A=function(e,t,i){var n=[],r=i!==undefined;while((e=e[t])&&e.nodeType!==9){if(e.nodeType===1){if(r&&C(e).is(i)){break}n.push(e)}}return n};var x=function(e,t){var i=[];for(;e;e=e.nextSibling){if(e.nodeType===1&&e!==t){i.push(e)}}return i};var E=C.expr.match.needsContext;function T(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function M(e,t,i){if(f(t)){return C.grep(e,(function(e,n){return!!t.call(e,n,e)!==i}))}if(t.nodeType){return C.grep(e,(function(e){return e===t!==i}))}if(typeof t!=="string"){return C.grep(e,(function(e){return a.call(t,e)>-1!==i}))}return C.filter(t,e,i)}C.filter=function(e,t,i){var n=t[0];if(i){e=":not("+e+")"}if(t.length===1&&n.nodeType===1){return C.find.matchesSelector(n,e)?[n]:[]}return C.find.matches(e,C.grep(t,(function(e){return e.nodeType===1})))};C.fn.extend({find:function(e){var t,i,n=this.length,r=this;if(typeof e!=="string"){return this.pushStack(C(e).filter((function(){for(t=0;t<n;t++){if(C.contains(r[t],this)){return true}}})))}i=this.pushStack([]);for(t=0;t<n;t++){C.find(e,r[t],i)}return n>1?C.uniqueSort(i):i},filter:function(e){return this.pushStack(M(this,e||[],false))},not:function(e){return this.pushStack(M(this,e||[],true))},is:function(e){return!!M(this,typeof e==="string"&&E.test(e)?C(e):e||[],false).length}});var k,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,R=C.fn.init=function(e,t,i){var n,r;if(!e){return this}i=i||k;if(typeof e==="string"){if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3){n=[null,e,null]}else{n=P.exec(e)}if(n&&(n[1]||!t)){if(n[1]){t=t instanceof C?t[0]:t;C.merge(this,C.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:m,true));if(D.test(n[1])&&C.isPlainObject(t)){for(n in t){if(f(this[n])){this[n](t[n])}else{this.attr(n,t[n])}}}return this}else{r=m.getElementById(n[2]);if(r){this[0]=r;this.length=1}return this}}else if(!t||t.jquery){return(t||i).find(e)}else{return this.constructor(t).find(e)}}else if(e.nodeType){this[0]=e;this.length=1;return this}else if(f(e)){return i.ready!==undefined?i.ready(e):e(C)}return C.makeArray(e,this)};R.prototype=C.fn;k=C(m);var I=/^(?:parents|prev(?:Until|All))/,O={children:true,contents:true,next:true,prev:true};C.fn.extend({has:function(e){var t=C(e,this),i=t.length;return this.filter((function(){var e=0;for(;e<i;e++){if(C.contains(this,t[e])){return true}}}))},closest:function(e,t){var i,n=0,r=this.length,o=[],s=typeof e!=="string"&&C(e);if(!E.test(e)){for(;n<r;n++){for(i=this[n];i&&i!==t;i=i.parentNode){if(i.nodeType<11&&(s?s.index(i)>-1:i.nodeType===1&&C.find.matchesSelector(i,e))){o.push(i);break}}}}return this.pushStack(o.length>1?C.uniqueSort(o):o)},index:function(e){if(!e){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof e==="string"){return a.call(C(e),this[0])}return a.call(this,e.jquery?e[0]:e)},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function N(e,t){while((e=e[t])&&e.nodeType!==1){}return e}C.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return A(e,"parentNode")},parentsUntil:function(e,t,i){return A(e,"parentNode",i)},next:function(e){return N(e,"nextSibling")},prev:function(e){return N(e,"previousSibling")},nextAll:function(e){return A(e,"nextSibling")},prevAll:function(e){return A(e,"previousSibling")},nextUntil:function(e,t,i){return A(e,"nextSibling",i)},prevUntil:function(e,t,i){return A(e,"previousSibling",i)},siblings:function(e){return x((e.parentNode||{}).firstChild,e)},children:function(e){return x(e.firstChild)},contents:function(e){if(e.contentDocument!=null&&n(e.contentDocument)){return e.contentDocument}if(T(e,"template")){e=e.content||e}return C.merge([],e.childNodes)}},(function(e,t){C.fn[e]=function(i,n){var r=C.map(this,t,i);if(e.slice(-5)!=="Until"){n=i}if(n&&typeof n==="string"){r=C.filter(n,r)}if(this.length>1){if(!O[e]){C.uniqueSort(r)}if(I.test(e)){r.reverse()}}return this.pushStack(r)}}));var L=/[^\x20\t\r\n\f]+/g;function F(e){var t={};C.each(e.match(L)||[],(function(e,i){t[i]=true}));return t}C.Callbacks=function(e){e=typeof e==="string"?F(e):C.extend({},e);var t,i,n,r,o=[],s=[],a=-1,l=function(){r=r||e.once;n=t=true;for(;s.length;a=-1){i=s.shift();while(++a<o.length){if(o[a].apply(i[0],i[1])===false&&e.stopOnFalse){a=o.length;i=false}}}if(!e.memory){i=false}t=false;if(r){if(i){o=[]}else{o=""}}},c={add:function(){if(o){if(i&&!t){a=o.length-1;s.push(i)}(function t(i){C.each(i,(function(i,n){if(f(n)){if(!e.unique||!c.has(n)){o.push(n)}}else if(n&&n.length&&y(n)!=="string"){t(n)}}))})(arguments);if(i&&!t){l()}}return this},remove:function(){C.each(arguments,(function(e,t){var i;while((i=C.inArray(t,o,i))>-1){o.splice(i,1);if(i<=a){a--}}}));return this},has:function(e){return e?C.inArray(e,o)>-1:o.length>0},empty:function(){if(o){o=[]}return this},disable:function(){r=s=[];o=i="";return this},disabled:function(){return!o},lock:function(){r=s=[];if(!i&&!t){o=i=""}return this},locked:function(){return!!r},fireWith:function(e,i){if(!r){i=i||[];i=[e,i.slice?i.slice():i];s.push(i);if(!t){l()}}return this},fire:function(){c.fireWith(this,arguments);return this},fired:function(){return!!n}};return c};function $(e){return e}function G(e){throw e}function B(e,t,i,n){var r;try{if(e&&f(r=e.promise)){r.call(e).done(t).fail(i)}else if(e&&f(r=e.then)){r.call(e,t,i)}else{t.apply(undefined,[e].slice(n))}}catch(e){i.apply(undefined,[e])}}C.extend({Deferred:function(t){var i=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){o.done(arguments).fail(arguments);return this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return C.Deferred((function(t){C.each(i,(function(i,n){var r=f(e[n[4]])&&e[n[4]];o[n[1]]((function(){var e=r&&r.apply(this,arguments);if(e&&f(e.promise)){e.promise().progress(t.notify).done(t.resolve).fail(t.reject)}else{t[n[0]+"With"](this,r?[e]:arguments)}}))}));e=null})).promise()},then:function(t,n,r){var o=0;function s(t,i,n,r){return function(){var a=this,l=arguments,c=function(){var e,c;if(t<o){return}e=n.apply(a,l);if(e===i.promise()){throw new TypeError("Thenable self-resolution")}c=e&&(typeof e==="object"||typeof e==="function")&&e.then;if(f(c)){if(r){c.call(e,s(o,i,$,r),s(o,i,G,r))}else{o++;c.call(e,s(o,i,$,r),s(o,i,G,r),s(o,i,$,i.notifyWith))}}else{if(n!==$){a=undefined;l=[e]}(r||i.resolveWith)(a,l)}},d=r?c:function(){try{c()}catch(e){if(C.Deferred.exceptionHook){C.Deferred.exceptionHook(e,d.stackTrace)}if(t+1>=o){if(n!==G){a=undefined;l=[e]}i.rejectWith(a,l)}}};if(t){d()}else{if(C.Deferred.getStackHook){d.stackTrace=C.Deferred.getStackHook()}e.setTimeout(d)}}}return C.Deferred((function(e){i[0][3].add(s(0,e,f(r)?r:$,e.notifyWith));i[1][3].add(s(0,e,f(t)?t:$));i[2][3].add(s(0,e,f(n)?n:G))})).promise()},promise:function(e){return e!=null?C.extend(e,r):r}},o={};C.each(i,(function(e,t){var s=t[2],a=t[5];r[t[1]]=s.add;if(a){s.add((function(){n=a}),i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock)}s.add(t[3].fire);o[t[0]]=function(){o[t[0]+"With"](this===o?undefined:this,arguments);return this};o[t[0]+"With"]=s.fireWith}));r.promise(o);if(t){t.call(o,o)}return o},when:function(e){var t=arguments.length,i=t,n=Array(i),o=r.call(arguments),s=C.Deferred(),a=function(e){return function(i){n[e]=this;o[e]=arguments.length>1?r.call(arguments):i;if(! --t){s.resolveWith(n,o)}}};if(t<=1){B(e,s.done(a(i)).resolve,s.reject,!t);if(s.state()==="pending"||f(o[i]&&o[i].then)){return s.then()}}while(i--){B(o[i],a(i),s.reject)}return s.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(t,i){if(e.console&&e.console.warn&&t&&H.test(t.name)){e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)}};C.readyException=function(t){e.setTimeout((function(){throw t}))};var z=C.Deferred();C.fn.ready=function(e){z.then(e).catch((function(e){C.readyException(e)}));return this};C.extend({isReady:false,readyWait:1,ready:function(e){if(e===true?--C.readyWait:C.isReady){return}C.isReady=true;if(e!==true&&--C.readyWait>0){return}z.resolveWith(m,[C])}});C.ready.then=z.then;function W(){m.removeEventListener("DOMContentLoaded",W);e.removeEventListener("load",W);C.ready()}if(m.readyState==="complete"||m.readyState!=="loading"&&!m.documentElement.doScroll){e.setTimeout(C.ready)}else{m.addEventListener("DOMContentLoaded",W);e.addEventListener("load",W)}var V=function(e,t,i,n,r,o,s){var a=0,l=e.length,c=i==null;if(y(i)==="object"){r=true;for(a in i){V(e,t,a,i[a],true,o,s)}}else if(n!==undefined){r=true;if(!f(n)){s=true}if(c){if(s){t.call(e,n);t=null}else{c=t;t=function(e,t,i){return c.call(C(e),i)}}}if(t){for(;a<l;a++){t(e[a],i,s?n:n.call(e[a],a,t(e[a],i)))}}}if(r){return e}if(c){return t.call(e)}return l?t(e[0],i):o};var j=/^-ms-/,U=/-([a-z])/g;function Y(e,t){return t.toUpperCase()}function q(e){return e.replace(j,"ms-").replace(U,Y)}var K=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function X(){this.expando=C.expando+X.uid++}X.uid=1;X.prototype={cache:function(e){var t=e[this.expando];if(!t){t={};if(K(e)){if(e.nodeType){e[this.expando]=t}else{Object.defineProperty(e,this.expando,{value:t,configurable:true})}}}return t},set:function(e,t,i){var n,r=this.cache(e);if(typeof t==="string"){r[q(t)]=i}else{for(n in t){r[q(n)]=t[n]}}return r},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][q(t)]},access:function(e,t,i){if(t===undefined||t&&typeof t==="string"&&i===undefined){return this.get(e,t)}this.set(e,t,i);return i!==undefined?i:t},remove:function(e,t){var i,n=e[this.expando];if(n===undefined){return}if(t!==undefined){if(Array.isArray(t)){t=t.map(q)}else{t=q(t);t=t in n?[t]:t.match(L)||[]}i=t.length;while(i--){delete n[t[i]]}}if(t===undefined||C.isEmptyObject(n)){if(e.nodeType){e[this.expando]=undefined}else{delete e[this.expando]}}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!C.isEmptyObject(t)}};var Z=new X;var Q=new X;var J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e){if(e==="true"){return true}if(e==="false"){return false}if(e==="null"){return null}if(e===+e+""){return+e}if(J.test(e)){return JSON.parse(e)}return e}function ie(e,t,i){var n;if(i===undefined&&e.nodeType===1){n="data-"+t.replace(ee,"-$&").toLowerCase();i=e.getAttribute(n);if(typeof i==="string"){try{i=te(i)}catch(e){}Q.set(e,t,i)}else{i=undefined}}return i}C.extend({hasData:function(e){return Q.hasData(e)||Z.hasData(e)},data:function(e,t,i){return Q.access(e,t,i)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,i){return Z.access(e,t,i)},_removeData:function(e,t){Z.remove(e,t)}});C.fn.extend({data:function(e,t){var i,n,r,o=this[0],s=o&&o.attributes;if(e===undefined){if(this.length){r=Q.get(o);if(o.nodeType===1&&!Z.get(o,"hasDataAttrs")){i=s.length;while(i--){if(s[i]){n=s[i].name;if(n.indexOf("data-")===0){n=q(n.slice(5));ie(o,n,r[n])}}}Z.set(o,"hasDataAttrs",true)}}return r}if(typeof e==="object"){return this.each((function(){Q.set(this,e)}))}return V(this,(function(t){var i;if(o&&t===undefined){i=Q.get(o,e);if(i!==undefined){return i}i=ie(o,e);if(i!==undefined){return i}return}this.each((function(){Q.set(this,e,t)}))}),null,t,arguments.length>1,null,true)},removeData:function(e){return this.each((function(){Q.remove(this,e)}))}});C.extend({queue:function(e,t,i){var n;if(e){t=(t||"fx")+"queue";n=Z.get(e,t);if(i){if(!n||Array.isArray(i)){n=Z.access(e,t,C.makeArray(i))}else{n.push(i)}}return n||[]}},dequeue:function(e,t){t=t||"fx";var i=C.queue(e,t),n=i.length,r=i.shift(),o=C._queueHooks(e,t),s=function(){C.dequeue(e,t)};if(r==="inprogress"){r=i.shift();n--}if(r){if(t==="fx"){i.unshift("inprogress")}delete o.stop;r.call(e,s,o)}if(!n&&o){o.empty.fire()}},_queueHooks:function(e,t){var i=t+"queueHooks";return Z.get(e,i)||Z.access(e,i,{empty:C.Callbacks("once memory").add((function(){Z.remove(e,[t+"queue",i])}))})}});C.fn.extend({queue:function(e,t){var i=2;if(typeof e!=="string"){t=e;e="fx";i--}if(arguments.length<i){return C.queue(this[0],e)}return t===undefined?this:this.each((function(){var i=C.queue(this,e,t);C._queueHooks(this,e);if(e==="fx"&&i[0]!=="inprogress"){C.dequeue(this,e)}}))},dequeue:function(e){return this.each((function(){C.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=C.Deferred(),o=this,s=this.length,a=function(){if(! --n){r.resolveWith(o,[o])}};if(typeof e!=="string"){t=e;e=undefined}e=e||"fx";while(s--){i=Z.get(o[s],e+"queueHooks");if(i&&i.empty){n++;i.empty.add(a)}}a();return r.promise(t)}});var ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var re=new RegExp("^(?:([+-])=|)("+ne+")([a-z%]*)$","i");var oe=["Top","Right","Bottom","Left"];var se=m.documentElement;var ae=function(e){return C.contains(e.ownerDocument,e)},le={composed:true};if(se.getRootNode){ae=function(e){return C.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument}}var ce=function(e,t){e=t||e;return e.style.display==="none"||e.style.display===""&&ae(e)&&C.css(e,"display")==="none"};function de(e,t,i,n){var r,o,s=20,a=n?function(){return n.cur()}:function(){return C.css(e,t,"")},l=a(),c=i&&i[3]||(C.cssNumber[t]?"":"px"),d=e.nodeType&&(C.cssNumber[t]||c!=="px"&&+l)&&re.exec(C.css(e,t));if(d&&d[3]!==c){l=l/2;c=c||d[3];d=+l||1;while(s--){C.style(e,t,d+c);if((1-o)*(1-(o=a()/l||.5))<=0){s=0}d=d/o}d=d*2;C.style(e,t,d+c);i=i||[]}if(i){d=+d||+l||0;r=i[1]?d+(i[1]+1)*i[2]:+i[2];if(n){n.unit=c;n.start=d;n.end=r}}return r}var ue={};function he(e){var t,i=e.ownerDocument,n=e.nodeName,r=ue[n];if(r){return r}t=i.body.appendChild(i.createElement(n));r=C.css(t,"display");t.parentNode.removeChild(t);if(r==="none"){r="block"}ue[n]=r;return r}function pe(e,t){var i,n,r=[],o=0,s=e.length;for(;o<s;o++){n=e[o];if(!n.style){continue}i=n.style.display;if(t){if(i==="none"){r[o]=Z.get(n,"display")||null;if(!r[o]){n.style.display=""}}if(n.style.display===""&&ce(n)){r[o]=he(n)}}else{if(i!=="none"){r[o]="none";Z.set(n,"display",i)}}}for(o=0;o<s;o++){if(r[o]!=null){e[o].style.display=r[o]}}return e}C.fn.extend({show:function(){return pe(this,true)},hide:function(){return pe(this)},toggle:function(e){if(typeof e==="boolean"){return e?this.show():this.hide()}return this.each((function(){if(ce(this)){C(this).show()}else{C(this).hide()}}))}});var fe=/^(?:checkbox|radio)$/i;var ge=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i;var me=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=m.createDocumentFragment(),t=e.appendChild(m.createElement("div")),i=m.createElement("input");i.setAttribute("type","radio");i.setAttribute("checked","checked");i.setAttribute("name","t");t.appendChild(i);p.checkClone=t.cloneNode(true).cloneNode(true).lastChild.checked;t.innerHTML="<textarea>x</textarea>";p.noCloneChecked=!!t.cloneNode(true).lastChild.defaultValue;t.innerHTML="<option></option>";p.option=!!t.lastChild})();var ve={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead;ve.th=ve.td;if(!p.option){ve.optgroup=ve.option=[1,"<select multiple='multiple'>","</select>"]}function be(e,t){var i;if(typeof e.getElementsByTagName!=="undefined"){i=e.getElementsByTagName(t||"*")}else if(typeof e.querySelectorAll!=="undefined"){i=e.querySelectorAll(t||"*")}else{i=[]}if(t===undefined||t&&T(e,t)){return C.merge([e],i)}return i}function ye(e,t){var i=0,n=e.length;for(;i<n;i++){Z.set(e[i],"globalEval",!t||Z.get(t[i],"globalEval"))}}var we=/<|&#?\w+;/;function Ce(e,t,i,n,r){var o,s,a,l,c,d,u=t.createDocumentFragment(),h=[],p=0,f=e.length;for(;p<f;p++){o=e[p];if(o||o===0){if(y(o)==="object"){C.merge(h,o.nodeType?[o]:o)}else if(!we.test(o)){h.push(t.createTextNode(o))}else{s=s||u.appendChild(t.createElement("div"));a=(ge.exec(o)||["",""])[1].toLowerCase();l=ve[a]||ve._default;s.innerHTML=l[1]+C.htmlPrefilter(o)+l[2];d=l[0];while(d--){s=s.lastChild}C.merge(h,s.childNodes);s=u.firstChild;s.textContent=""}}}u.textContent="";p=0;while(o=h[p++]){if(n&&C.inArray(o,n)>-1){if(r){r.push(o)}continue}c=ae(o);s=be(u.appendChild(o),"script");if(c){ye(s)}if(i){d=0;while(o=s[d++]){if(me.test(o.type||"")){i.push(o)}}}}return u}var _e=/^key/,Se=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ae=/^([^.]*)(?:\.(.+)|)/;function xe(){return true}function Ee(){return false}function Te(e,t){return e===De()===(t==="focus")}function De(){try{return m.activeElement}catch(e){}}function Me(e,t,i,n,r,o){var s,a;if(typeof t==="object"){if(typeof i!=="string"){n=n||i;i=undefined}for(a in t){Me(e,a,i,n,t[a],o)}return e}if(n==null&&r==null){r=i;n=i=undefined}else if(r==null){if(typeof i==="string"){r=n;n=undefined}else{r=n;n=i;i=undefined}}if(r===false){r=Ee}else if(!r){return e}if(o===1){s=r;r=function(e){C().off(e);return s.apply(this,arguments)};r.guid=s.guid||(s.guid=C.guid++)}return e.each((function(){C.event.add(this,t,r,n,i)}))}C.event={global:{},add:function(e,t,i,n,r){var o,s,a,l,c,d,u,h,p,f,g,m=Z.get(e);if(!K(e)){return}if(i.handler){o=i;i=o.handler;r=o.selector}if(r){C.find.matchesSelector(se,r)}if(!i.guid){i.guid=C.guid++}if(!(l=m.events)){l=m.events=Object.create(null)}if(!(s=m.handle)){s=m.handle=function(t){return typeof C!=="undefined"&&C.event.triggered!==t.type?C.event.dispatch.apply(e,arguments):undefined}}t=(t||"").match(L)||[""];c=t.length;while(c--){a=Ae.exec(t[c])||[];p=g=a[1];f=(a[2]||"").split(".").sort();if(!p){continue}u=C.event.special[p]||{};p=(r?u.delegateType:u.bindType)||p;u=C.event.special[p]||{};d=C.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&C.expr.match.needsContext.test(r),namespace:f.join(".")},o);if(!(h=l[p])){h=l[p]=[];h.delegateCount=0;if(!u.setup||u.setup.call(e,n,f,s)===false){if(e.addEventListener){e.addEventListener(p,s)}}}if(u.add){u.add.call(e,d);if(!d.handler.guid){d.handler.guid=i.guid}}if(r){h.splice(h.delegateCount++,0,d)}else{h.push(d)}C.event.global[p]=true}},remove:function(e,t,i,n,r){var o,s,a,l,c,d,u,h,p,f,g,m=Z.hasData(e)&&Z.get(e);if(!m||!(l=m.events)){return}t=(t||"").match(L)||[""];c=t.length;while(c--){a=Ae.exec(t[c])||[];p=g=a[1];f=(a[2]||"").split(".").sort();if(!p){for(p in l){C.event.remove(e,p+t[c],i,n,true)}continue}u=C.event.special[p]||{};p=(n?u.delegateType:u.bindType)||p;h=l[p]||[];a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)");s=o=h.length;while(o--){d=h[o];if((r||g===d.origType)&&(!i||i.guid===d.guid)&&(!a||a.test(d.namespace))&&(!n||n===d.selector||n==="**"&&d.selector)){h.splice(o,1);if(d.selector){h.delegateCount--}if(u.remove){u.remove.call(e,d)}}}if(s&&!h.length){if(!u.teardown||u.teardown.call(e,f,m.handle)===false){C.removeEvent(e,p,m.handle)}delete l[p]}}if(C.isEmptyObject(l)){Z.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,o,s,a=new Array(arguments.length),l=C.event.fix(e),c=(Z.get(this,"events")||Object.create(null))[l.type]||[],d=C.event.special[l.type]||{};a[0]=l;for(t=1;t<arguments.length;t++){a[t]=arguments[t]}l.delegateTarget=this;if(d.preDispatch&&d.preDispatch.call(this,l)===false){return}s=C.event.handlers.call(this,l,c);t=0;while((r=s[t++])&&!l.isPropagationStopped()){l.currentTarget=r.elem;i=0;while((o=r.handlers[i++])&&!l.isImmediatePropagationStopped()){if(!l.rnamespace||o.namespace===false||l.rnamespace.test(o.namespace)){l.handleObj=o;l.data=o.data;n=((C.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a);if(n!==undefined){if((l.result=n)===false){l.preventDefault();l.stopPropagation()}}}}}if(d.postDispatch){d.postDispatch.call(this,l)}return l.result},handlers:function(e,t){var i,n,r,o,s,a=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!(e.type==="click"&&e.button>=1)){for(;c!==this;c=c.parentNode||this){if(c.nodeType===1&&!(e.type==="click"&&c.disabled===true)){o=[];s={};for(i=0;i<l;i++){n=t[i];r=n.selector+" ";if(s[r]===undefined){s[r]=n.needsContext?C(r,this).index(c)>-1:C.find(r,this,null,[c]).length}if(s[r]){o.push(n)}}if(o.length){a.push({elem:c,handlers:o})}}}}c=this;if(l<t.length){a.push({elem:c,handlers:t.slice(l)})}return a},addProp:function(e,t){Object.defineProperty(C.Event.prototype,e,{enumerable:true,configurable:true,get:f(t)?function(){if(this.originalEvent){return t(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[e]}},set:function(t){Object.defineProperty(this,e,{enumerable:true,configurable:true,writable:true,value:t})}})},fix:function(e){return e[C.expando]?e:new C.Event(e)},special:{load:{noBubble:true},click:{setup:function(e){var t=this||e;if(fe.test(t.type)&&t.click&&T(t,"input")){ke(t,"click",xe)}return false},trigger:function(e){var t=this||e;if(fe.test(t.type)&&t.click&&T(t,"input")){ke(t,"click")}return true},_default:function(e){var t=e.target;return fe.test(t.type)&&t.click&&T(t,"input")&&Z.get(t,"click")||T(t,"a")}},beforeunload:{postDispatch:function(e){if(e.result!==undefined&&e.originalEvent){e.originalEvent.returnValue=e.result}}}}};function ke(e,t,i){if(!i){if(Z.get(e,t)===undefined){C.event.add(e,t,xe)}return}Z.set(e,t,false);C.event.add(e,t,{namespace:false,handler:function(e){var n,o,s=Z.get(this,t);if(e.isTrigger&1&&this[t]){if(!s.length){s=r.call(arguments);Z.set(this,t,s);n=i(this,t);this[t]();o=Z.get(this,t);if(s!==o||n){Z.set(this,t,false)}else{o={}}if(s!==o){e.stopImmediatePropagation();e.preventDefault();return o.value}}else if((C.event.special[t]||{}).delegateType){e.stopPropagation()}}else if(s.length){Z.set(this,t,{value:C.event.trigger(C.extend(s[0],C.Event.prototype),s.slice(1),this)});e.stopImmediatePropagation()}}})}C.removeEvent=function(e,t,i){if(e.removeEventListener){e.removeEventListener(t,i)}};C.Event=function(e,t){if(!(this instanceof C.Event)){return new C.Event(e,t)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===false?xe:Ee;this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target;this.currentTarget=e.currentTarget;this.relatedTarget=e.relatedTarget}else{this.type=e}if(t){C.extend(this,t)}this.timeStamp=e&&e.timeStamp||Date.now();this[C.expando]=true};C.Event.prototype={constructor:C.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe;if(e&&!this.isSimulated){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe;if(e&&!this.isSimulated){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};C.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,char:true,code:true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function(e){var t=e.button;if(e.which==null&&_e.test(e.type)){return e.charCode!=null?e.charCode:e.keyCode}if(!e.which&&t!==undefined&&Se.test(e.type)){if(t&1){return 1}if(t&2){return 3}if(t&4){return 2}return 0}return e.which}},C.event.addProp);C.each({focus:"focusin",blur:"focusout"},(function(e,t){C.event.special[e]={setup:function(){ke(this,e,Te);return false},trigger:function(){ke(this,e);return true},delegateType:t}}));C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){C.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,o=e.handleObj;if(!r||r!==n&&!C.contains(n,r)){e.type=o.origType;i=o.handler.apply(this,arguments);e.type=t}return i}}}));C.fn.extend({on:function(e,t,i,n){return Me(this,e,t,i,n)},one:function(e,t,i,n){return Me(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj){n=e.handleObj;C(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler);return this}if(typeof e==="object"){for(r in e){this.off(r,t,e[r])}return this}if(t===false||typeof t==="function"){i=t;t=undefined}if(i===false){i=Ee}return this.each((function(){C.event.remove(this,e,i,t)}))}});var Pe=/<script|<style|<link/i,Re=/checked\s*(?:[^=]|=\s*.checked.)/i,Ie=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Oe(e,t){if(T(e,"table")&&T(t.nodeType!==11?t:t.firstChild,"tr")){return C(e).children("tbody")[0]||e}return e}function Ne(e){e.type=(e.getAttribute("type")!==null)+"/"+e.type;return e}function Le(e){if((e.type||"").slice(0,5)==="true/"){e.type=e.type.slice(5)}else{e.removeAttribute("type")}return e}function Fe(e,t){var i,n,r,o,s,a,l;if(t.nodeType!==1){return}if(Z.hasData(e)){o=Z.get(e);l=o.events;if(l){Z.remove(t,"handle events");for(r in l){for(i=0,n=l[r].length;i<n;i++){C.event.add(t,r,l[r][i])}}}}if(Q.hasData(e)){s=Q.access(e);a=C.extend({},s);Q.set(t,a)}}function $e(e,t){var i=t.nodeName.toLowerCase();if(i==="input"&&fe.test(e.type)){t.checked=e.checked}else if(i==="input"||i==="textarea"){t.defaultValue=e.defaultValue}}function Ge(e,t,i,n){t=o(t);var r,s,a,l,c,d,u=0,h=e.length,g=h-1,m=t[0],v=f(m);if(v||h>1&&typeof m==="string"&&!p.checkClone&&Re.test(m)){return e.each((function(r){var o=e.eq(r);if(v){t[0]=m.call(this,r,o.html())}Ge(o,t,i,n)}))}if(h){r=Ce(t,e[0].ownerDocument,false,e,n);s=r.firstChild;if(r.childNodes.length===1){r=s}if(s||n){a=C.map(be(r,"script"),Ne);l=a.length;for(;u<h;u++){c=r;if(u!==g){c=C.clone(c,true,true);if(l){C.merge(a,be(c,"script"))}}i.call(e[u],c,u)}if(l){d=a[a.length-1].ownerDocument;C.map(a,Le);for(u=0;u<l;u++){c=a[u];if(me.test(c.type||"")&&!Z.access(c,"globalEval")&&C.contains(d,c)){if(c.src&&(c.type||"").toLowerCase()!=="module"){if(C._evalUrl&&!c.noModule){C._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},d)}}else{b(c.textContent.replace(Ie,""),c,d)}}}}}}return e}function Be(e,t,i){var n,r=t?C.filter(t,e):e,o=0;for(;(n=r[o])!=null;o++){if(!i&&n.nodeType===1){C.cleanData(be(n))}if(n.parentNode){if(i&&ae(n)){ye(be(n,"script"))}n.parentNode.removeChild(n)}}return e}C.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var n,r,o,s,a=e.cloneNode(true),l=ae(e);if(!p.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!C.isXMLDoc(e)){s=be(a);o=be(e);for(n=0,r=o.length;n<r;n++){$e(o[n],s[n])}}if(t){if(i){o=o||be(e);s=s||be(a);for(n=0,r=o.length;n<r;n++){Fe(o[n],s[n])}}else{Fe(e,a)}}s=be(a,"script");if(s.length>0){ye(s,!l&&be(e,"script"))}return a},cleanData:function(e){var t,i,n,r=C.event.special,o=0;for(;(i=e[o])!==undefined;o++){if(K(i)){if(t=i[Z.expando]){if(t.events){for(n in t.events){if(r[n]){C.event.remove(i,n)}else{C.removeEvent(i,n,t.handle)}}}i[Z.expando]=undefined}if(i[Q.expando]){i[Q.expando]=undefined}}}}});C.fn.extend({detach:function(e){return Be(this,e,true)},remove:function(e){return Be(this,e)},text:function(e){return V(this,(function(e){return e===undefined?C.text(this):this.empty().each((function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=e}}))}),null,e,arguments.length)},append:function(){return Ge(this,arguments,(function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Oe(this,e);t.appendChild(e)}}))},prepend:function(){return Ge(this,arguments,(function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Oe(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ge(this,arguments,(function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}}))},after:function(){return Ge(this,arguments,(function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}}))},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){if(e.nodeType===1){C.cleanData(be(e,false));e.textContent=""}}return this},clone:function(e,t){e=e==null?false:e;t=t==null?e:t;return this.map((function(){return C.clone(this,e,t)}))},html:function(e){return V(this,(function(e){var t=this[0]||{},i=0,n=this.length;if(e===undefined&&t.nodeType===1){return t.innerHTML}if(typeof e==="string"&&!Pe.test(e)&&!ve[(ge.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;i<n;i++){t=this[i]||{};if(t.nodeType===1){C.cleanData(be(t,false));t.innerHTML=e}}t=0}catch(e){}}if(t){this.empty().append(e)}}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ge(this,arguments,(function(t){var i=this.parentNode;if(C.inArray(this,e)<0){C.cleanData(be(this));if(i){i.replaceChild(t,this)}}}),e)}});C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){C.fn[e]=function(e){var i,n=[],r=C(e),o=r.length-1,a=0;for(;a<=o;a++){i=a===o?this:this.clone(true);C(r[a])[t](i);s.apply(n,i.get())}return this.pushStack(n)}}));var He=new RegExp("^("+ne+")(?!px)[a-z%]+$","i");var ze=function(t){var i=t.ownerDocument.defaultView;if(!i||!i.opener){i=e}return i.getComputedStyle(t)};var We=function(e,t,i){var n,r,o={};for(r in t){o[r]=e.style[r];e.style[r]=t[r]}n=i.call(e);for(r in t){e.style[r]=o[r]}return n};var Ve=new RegExp(oe.join("|"),"i");(function(){function t(){if(!d){return}c.style.cssText="position:absolute;left:-11111px;width:60px;"+"margin-top:1px;padding:0;border:0";d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;"+"margin:auto;border:1px;padding:1px;"+"width:60%;top:1%";se.appendChild(c).appendChild(d);var t=e.getComputedStyle(d);n=t.top!=="1%";l=i(t.marginLeft)===12;d.style.right="60%";s=i(t.right)===36;r=i(t.width)===36;d.style.position="absolute";o=i(d.offsetWidth/3)===12;se.removeChild(c);d=null}function i(e){return Math.round(parseFloat(e))}var n,r,o,s,a,l,c=m.createElement("div"),d=m.createElement("div");if(!d.style){return}d.style.backgroundClip="content-box";d.cloneNode(true).style.backgroundClip="";p.clearCloneStyle=d.style.backgroundClip==="content-box";C.extend(p,{boxSizingReliable:function(){t();return r},pixelBoxStyles:function(){t();return s},pixelPosition:function(){t();return n},reliableMarginLeft:function(){t();return l},scrollboxSize:function(){t();return o},reliableTrDimensions:function(){var t,i,n,r;if(a==null){t=m.createElement("table");i=m.createElement("tr");n=m.createElement("div");t.style.cssText="position:absolute;left:-11111px";i.style.height="1px";n.style.height="9px";se.appendChild(t).appendChild(i).appendChild(n);r=e.getComputedStyle(i);a=parseInt(r.height)>3;se.removeChild(t)}return a}})})();function je(e,t,i){var n,r,o,s,a=e.style;i=i||ze(e);if(i){s=i.getPropertyValue(t)||i[t];if(s===""&&!ae(e)){s=C.style(e,t)}if(!p.pixelBoxStyles()&&He.test(s)&&Ve.test(t)){n=a.width;r=a.minWidth;o=a.maxWidth;a.minWidth=a.maxWidth=a.width=s;s=i.width;a.width=n;a.minWidth=r;a.maxWidth=o}}return s!==undefined?s+"":s}function Ue(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}var Ye=["Webkit","Moz","ms"],qe=m.createElement("div").style,Ke={};function Xe(e){var t=e[0].toUpperCase()+e.slice(1),i=Ye.length;while(i--){e=Ye[i]+t;if(e in qe){return e}}}function Ze(e){var t=C.cssProps[e]||Ke[e];if(t){return t}if(e in qe){return e}return Ke[e]=Xe(e)||e}var Qe=/^(none|table(?!-c[ea]).+)/,Je=/^--/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"};function it(e,t,i){var n=re.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function nt(e,t,i,n,r,o){var s=t==="width"?1:0,a=0,l=0;if(i===(n?"border":"content")){return 0}for(;s<4;s+=2){if(i==="margin"){l+=C.css(e,i+oe[s],true,r)}if(!n){l+=C.css(e,"padding"+oe[s],true,r);if(i!=="padding"){l+=C.css(e,"border"+oe[s]+"Width",true,r)}else{a+=C.css(e,"border"+oe[s]+"Width",true,r)}}else{if(i==="content"){l-=C.css(e,"padding"+oe[s],true,r)}if(i!=="margin"){l-=C.css(e,"border"+oe[s]+"Width",true,r)}}}if(!n&&o>=0){l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-a-.5))||0}return l}function rt(e,t,i){var n=ze(e),r=!p.boxSizingReliable()||i,o=r&&C.css(e,"boxSizing",false,n)==="border-box",s=o,a=je(e,t,n),l="offset"+t[0].toUpperCase()+t.slice(1);if(He.test(a)){if(!i){return a}a="auto"}if((!p.boxSizingReliable()&&o||!p.reliableTrDimensions()&&T(e,"tr")||a==="auto"||!parseFloat(a)&&C.css(e,"display",false,n)==="inline")&&e.getClientRects().length){o=C.css(e,"boxSizing",false,n)==="border-box";s=l in e;if(s){a=e[l]}}a=parseFloat(a)||0;return a+nt(e,t,i||(o?"border":"content"),s,n,a)+"px"}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=je(e,"opacity");return i===""?"1":i}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,gridArea:true,gridColumn:true,gridColumnEnd:true,gridColumnStart:true,gridRow:true,gridRowEnd:true,gridRowStart:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{},style:function(e,t,i,n){if(!e||e.nodeType===3||e.nodeType===8||!e.style){return}var r,o,s,a=q(t),l=Je.test(t),c=e.style;if(!l){t=Ze(a)}s=C.cssHooks[t]||C.cssHooks[a];if(i!==undefined){o=typeof i;if(o==="string"&&(r=re.exec(i))&&r[1]){i=de(e,t,r);o="number"}if(i==null||i!==i){return}if(o==="number"&&!l){i+=r&&r[3]||(C.cssNumber[a]?"":"px")}if(!p.clearCloneStyle&&i===""&&t.indexOf("background")===0){c[t]="inherit"}if(!s||!("set"in s)||(i=s.set(e,i,n))!==undefined){if(l){c.setProperty(t,i)}else{c[t]=i}}}else{if(s&&"get"in s&&(r=s.get(e,false,n))!==undefined){return r}return c[t]}},css:function(e,t,i,n){var r,o,s,a=q(t),l=Je.test(t);if(!l){t=Ze(a)}s=C.cssHooks[t]||C.cssHooks[a];if(s&&"get"in s){r=s.get(e,true,i)}if(r===undefined){r=je(e,t,n)}if(r==="normal"&&t in tt){r=tt[t]}if(i===""||i){o=parseFloat(r);return i===true||isFinite(o)?o||0:r}return r}});C.each(["height","width"],(function(e,t){C.cssHooks[t]={get:function(e,i,n){if(i){return Qe.test(C.css(e,"display"))&&(!e.getClientRects().length||!e.getBoundingClientRect().width)?We(e,et,(function(){return rt(e,t,n)})):rt(e,t,n)}},set:function(e,i,n){var r,o=ze(e),s=!p.scrollboxSize()&&o.position==="absolute",a=s||n,l=a&&C.css(e,"boxSizing",false,o)==="border-box",c=n?nt(e,t,n,l,o):0;if(l&&s){c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-nt(e,t,"border",false,o)-.5)}if(c&&(r=re.exec(i))&&(r[3]||"px")!=="px"){e.style[t]=i;i=C.css(e,t)}return it(e,i,c)}}}));C.cssHooks.marginLeft=Ue(p.reliableMarginLeft,(function(e,t){if(t){return(parseFloat(je(e,"marginLeft"))||e.getBoundingClientRect().left-We(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"}}));C.each({margin:"",padding:"",border:"Width"},(function(e,t){C.cssHooks[e+t]={expand:function(i){var n=0,r={},o=typeof i==="string"?i.split(" "):[i];for(;n<4;n++){r[e+oe[n]+t]=o[n]||o[n-2]||o[0]}return r}};if(e!=="margin"){C.cssHooks[e+t].set=it}}));C.fn.extend({css:function(e,t){return V(this,(function(e,t,i){var n,r,o={},s=0;if(Array.isArray(t)){n=ze(e);r=t.length;for(;s<r;s++){o[t[s]]=C.css(e,t[s],false,n)}return o}return i!==undefined?C.style(e,t,i):C.css(e,t)}),e,t,arguments.length>1)}});function ot(e,t,i,n,r){return new ot.prototype.init(e,t,i,n,r)}C.Tween=ot;ot.prototype={constructor:ot,init:function(e,t,i,n,r,o){this.elem=e;this.prop=i;this.easing=r||C.easing._default;this.options=t;this.start=this.now=this.cur();this.end=n;this.unit=o||(C.cssNumber[i]?"":"px")},cur:function(){var e=ot.propHooks[this.prop];return e&&e.get?e.get(this):ot.propHooks._default.get(this)},run:function(e){var t,i=ot.propHooks[this.prop];if(this.options.duration){this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration)}else{this.pos=t=e}this.now=(this.end-this.start)*t+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(i&&i.set){i.set(this)}else{ot.propHooks._default.set(this)}return this}};ot.prototype.init.prototype=ot.prototype;ot.propHooks={_default:{get:function(e){var t;if(e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null){return e.elem[e.prop]}t=C.css(e.elem,e.prop,"");return!t||t==="auto"?0:t},set:function(e){if(C.fx.step[e.prop]){C.fx.step[e.prop](e)}else if(e.elem.nodeType===1&&(C.cssHooks[e.prop]||e.elem.style[Ze(e.prop)]!=null)){C.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}};ot.propHooks.scrollTop=ot.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"};C.fx=ot.prototype.init;C.fx.step={};var st,at,lt=/^(?:toggle|show|hide)$/,ct=/queueHooks$/;function dt(){if(at){if(m.hidden===false&&e.requestAnimationFrame){e.requestAnimationFrame(dt)}else{e.setTimeout(dt,C.fx.interval)}C.fx.tick()}}function ut(){e.setTimeout((function(){st=undefined}));return st=Date.now()}function ht(e,t){var i,n=0,r={height:e};t=t?1:0;for(;n<4;n+=2-t){i=oe[n];r["margin"+i]=r["padding"+i]=e}if(t){r.opacity=r.width=e}return r}function pt(e,t,i){var n,r=(mt.tweeners[t]||[]).concat(mt.tweeners["*"]),o=0,s=r.length;for(;o<s;o++){if(n=r[o].call(i,t,e)){return n}}}function ft(e,t,i){var n,r,o,s,a,l,c,d,u="width"in t||"height"in t,h=this,p={},f=e.style,g=e.nodeType&&ce(e),m=Z.get(e,"fxshow");if(!i.queue){s=C._queueHooks(e,"fx");if(s.unqueued==null){s.unqueued=0;a=s.empty.fire;s.empty.fire=function(){if(!s.unqueued){a()}}}s.unqueued++;h.always((function(){h.always((function(){s.unqueued--;if(!C.queue(e,"fx").length){s.empty.fire()}}))}))}for(n in t){r=t[n];if(lt.test(r)){delete t[n];o=o||r==="toggle";if(r===(g?"hide":"show")){if(r==="show"&&m&&m[n]!==undefined){g=true}else{continue}}p[n]=m&&m[n]||C.style(e,n)}}l=!C.isEmptyObject(t);if(!l&&C.isEmptyObject(p)){return}if(u&&e.nodeType===1){i.overflow=[f.overflow,f.overflowX,f.overflowY];c=m&&m.display;if(c==null){c=Z.get(e,"display")}d=C.css(e,"display");if(d==="none"){if(c){d=c}else{pe([e],true);c=e.style.display||c;d=C.css(e,"display");pe([e])}}if(d==="inline"||d==="inline-block"&&c!=null){if(C.css(e,"float")==="none"){if(!l){h.done((function(){f.display=c}));if(c==null){d=f.display;c=d==="none"?"":d}}f.display="inline-block"}}}if(i.overflow){f.overflow="hidden";h.always((function(){f.overflow=i.overflow[0];f.overflowX=i.overflow[1];f.overflowY=i.overflow[2]}))}l=false;for(n in p){if(!l){if(m){if("hidden"in m){g=m.hidden}}else{m=Z.access(e,"fxshow",{display:c})}if(o){m.hidden=!g}if(g){pe([e],true)}h.done((function(){if(!g){pe([e])}Z.remove(e,"fxshow");for(n in p){C.style(e,n,p[n])}}))}l=pt(g?m[n]:0,n,h);if(!(n in m)){m[n]=l.start;if(g){l.end=l.start;l.start=0}}}}function gt(e,t){var i,n,r,o,s;for(i in e){n=q(i);r=t[n];o=e[i];if(Array.isArray(o)){r=o[1];o=e[i]=o[0]}if(i!==n){e[n]=o;delete e[i]}s=C.cssHooks[n];if(s&&"expand"in s){o=s.expand(o);delete e[n];for(i in o){if(!(i in e)){e[i]=o[i];t[i]=r}}}else{t[n]=r}}}function mt(e,t,i){var n,r,o=0,s=mt.prefilters.length,a=C.Deferred().always((function(){delete l.elem})),l=function(){if(r){return false}var t=st||ut(),i=Math.max(0,c.startTime+c.duration-t),n=i/c.duration||0,o=1-n,s=0,l=c.tweens.length;for(;s<l;s++){c.tweens[s].run(o)}a.notifyWith(e,[c,o,i]);if(o<1&&l){return i}if(!l){a.notifyWith(e,[c,1,0])}a.resolveWith(e,[c]);return false},c=a.promise({elem:e,props:C.extend({},t),opts:C.extend(true,{specialEasing:{},easing:C.easing._default},i),originalProperties:t,originalOptions:i,startTime:st||ut(),duration:i.duration,tweens:[],createTween:function(t,i){var n=C.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);c.tweens.push(n);return n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(r){return this}r=true;for(;i<n;i++){c.tweens[i].run(1)}if(t){a.notifyWith(e,[c,1,0]);a.resolveWith(e,[c,t])}else{a.rejectWith(e,[c,t])}return this}}),d=c.props;gt(d,c.opts.specialEasing);for(;o<s;o++){n=mt.prefilters[o].call(c,e,d,c.opts);if(n){if(f(n.stop)){C._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)}return n}}C.map(d,pt,c);if(f(c.opts.start)){c.opts.start.call(e,c)}c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always);C.fx.timer(C.extend(l,{elem:e,anim:c,queue:c.opts.queue}));return c}C.Animation=C.extend(mt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);de(i.elem,e,re.exec(t),i);return i}]},tweener:function(e,t){if(f(e)){t=e;e=["*"]}else{e=e.match(L)}var i,n=0,r=e.length;for(;n<r;n++){i=e[n];mt.tweeners[i]=mt.tweeners[i]||[];mt.tweeners[i].unshift(t)}},prefilters:[ft],prefilter:function(e,t){if(t){mt.prefilters.unshift(e)}else{mt.prefilters.push(e)}}});C.speed=function(e,t,i){var n=e&&typeof e==="object"?C.extend({},e):{complete:i||!i&&t||f(e)&&e,duration:e,easing:i&&t||t&&!f(t)&&t};if(C.fx.off){n.duration=0}else{if(typeof n.duration!=="number"){if(n.duration in C.fx.speeds){n.duration=C.fx.speeds[n.duration]}else{n.duration=C.fx.speeds._default}}}if(n.queue==null||n.queue===true){n.queue="fx"}n.old=n.complete;n.complete=function(){if(f(n.old)){n.old.call(this)}if(n.queue){C.dequeue(this,n.queue)}};return n};C.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=C.isEmptyObject(e),o=C.speed(t,i,n),s=function(){var t=mt(this,C.extend({},e),o);if(r||Z.get(this,"finish")){t.stop(true)}};s.finish=s;return r||o.queue===false?this.each(s):this.queue(o.queue,s)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop;t(i)};if(typeof e!=="string"){i=t;t=e;e=undefined}if(t){this.queue(e||"fx",[])}return this.each((function(){var t=true,r=e!=null&&e+"queueHooks",o=C.timers,s=Z.get(this);if(r){if(s[r]&&s[r].stop){n(s[r])}}else{for(r in s){if(s[r]&&s[r].stop&&ct.test(r)){n(s[r])}}}for(r=o.length;r--;){if(o[r].elem===this&&(e==null||o[r].queue===e)){o[r].anim.stop(i);t=false;o.splice(r,1)}}if(t||!i){C.dequeue(this,e)}}))},finish:function(e){if(e!==false){e=e||"fx"}return this.each((function(){var t,i=Z.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],o=C.timers,s=n?n.length:0;i.finish=true;C.queue(this,e,[]);if(r&&r.stop){r.stop.call(this,true)}for(t=o.length;t--;){if(o[t].elem===this&&o[t].queue===e){o[t].anim.stop(true);o.splice(t,1)}}for(t=0;t<s;t++){if(n[t]&&n[t].finish){n[t].finish.call(this)}}delete i.finish}))}});C.each(["toggle","show","hide"],(function(e,t){var i=C.fn[t];C.fn[t]=function(e,n,r){return e==null||typeof e==="boolean"?i.apply(this,arguments):this.animate(ht(t,true),e,n,r)}}));C.each({slideDown:ht("show"),slideUp:ht("hide"),slideToggle:ht("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){C.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}));C.timers=[];C.fx.tick=function(){var e,t=0,i=C.timers;st=Date.now();for(;t<i.length;t++){e=i[t];if(!e()&&i[t]===e){i.splice(t--,1)}}if(!i.length){C.fx.stop()}st=undefined};C.fx.timer=function(e){C.timers.push(e);C.fx.start()};C.fx.interval=13;C.fx.start=function(){if(at){return}at=true;dt()};C.fx.stop=function(){at=null};C.fx.speeds={slow:600,fast:200,_default:400};C.fn.delay=function(t,i){t=C.fx?C.fx.speeds[t]||t:t;i=i||"fx";return this.queue(i,(function(i,n){var r=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(r)}}))};(function(){var e=m.createElement("input"),t=m.createElement("select"),i=t.appendChild(m.createElement("option"));e.type="checkbox";p.checkOn=e.value!=="";p.optSelected=i.selected;e=m.createElement("input");e.value="t";e.type="radio";p.radioValue=e.value==="t"})();var vt,bt=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return V(this,C.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){C.removeAttr(this,e)}))}});C.extend({attr:function(e,t,i){var n,r,o=e.nodeType;if(o===3||o===8||o===2){return}if(typeof e.getAttribute==="undefined"){return C.prop(e,t,i)}if(o!==1||!C.isXMLDoc(e)){r=C.attrHooks[t.toLowerCase()]||(C.expr.match.bool.test(t)?vt:undefined)}if(i!==undefined){if(i===null){C.removeAttr(e,t);return}if(r&&"set"in r&&(n=r.set(e,i,t))!==undefined){return n}e.setAttribute(t,i+"");return i}if(r&&"get"in r&&(n=r.get(e,t))!==null){return n}n=C.find.attr(e,t);return n==null?undefined:n},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&t==="radio"&&T(e,"input")){var i=e.value;e.setAttribute("type",t);if(i){e.value=i}return t}}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(L);if(r&&e.nodeType===1){while(i=r[n++]){e.removeAttribute(i)}}}});vt={set:function(e,t,i){if(t===false){C.removeAttr(e,i)}else{e.setAttribute(i,i)}return i}};C.each(C.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=bt[t]||C.find.attr;bt[t]=function(e,t,n){var r,o,s=t.toLowerCase();if(!n){o=bt[s];bt[s]=r;r=i(e,t,n)!=null?s:null;bt[s]=o}return r}}));var yt=/^(?:input|select|textarea|button)$/i,wt=/^(?:a|area)$/i;C.fn.extend({prop:function(e,t){return V(this,C.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[C.propFix[e]||e]}))}});C.extend({prop:function(e,t,i){var n,r,o=e.nodeType;if(o===3||o===8||o===2){return}if(o!==1||!C.isXMLDoc(e)){t=C.propFix[t]||t;r=C.propHooks[t]}if(i!==undefined){if(r&&"set"in r&&(n=r.set(e,i,t))!==undefined){return n}return e[t]=i}if(r&&"get"in r&&(n=r.get(e,t))!==null){return n}return e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");if(t){return parseInt(t,10)}if(yt.test(e.nodeName)||wt.test(e.nodeName)&&e.href){return 0}return-1}}},propFix:{for:"htmlFor",class:"className"}});if(!p.optSelected){C.propHooks.selected={get:function(e){var t=e.parentNode;if(t&&t.parentNode){t.parentNode.selectedIndex}return null},set:function(e){var t=e.parentNode;if(t){t.selectedIndex;if(t.parentNode){t.parentNode.selectedIndex}}}}}C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){C.propFix[this.toLowerCase()]=this}));function Ct(e){var t=e.match(L)||[];return t.join(" ")}function _t(e){return e.getAttribute&&e.getAttribute("class")||""}function St(e){if(Array.isArray(e)){return e}if(typeof e==="string"){return e.match(L)||[]}return[]}C.fn.extend({addClass:function(e){var t,i,n,r,o,s,a,l=0;if(f(e)){return this.each((function(t){C(this).addClass(e.call(this,t,_t(this)))}))}t=St(e);if(t.length){while(i=this[l++]){r=_t(i);n=i.nodeType===1&&" "+Ct(r)+" ";if(n){s=0;while(o=t[s++]){if(n.indexOf(" "+o+" ")<0){n+=o+" "}}a=Ct(n);if(r!==a){i.setAttribute("class",a)}}}}return this},removeClass:function(e){var t,i,n,r,o,s,a,l=0;if(f(e)){return this.each((function(t){C(this).removeClass(e.call(this,t,_t(this)))}))}if(!arguments.length){return this.attr("class","")}t=St(e);if(t.length){while(i=this[l++]){r=_t(i);n=i.nodeType===1&&" "+Ct(r)+" ";if(n){s=0;while(o=t[s++]){while(n.indexOf(" "+o+" ")>-1){n=n.replace(" "+o+" "," ")}}a=Ct(n);if(r!==a){i.setAttribute("class",a)}}}}return this},toggleClass:function(e,t){var i=typeof e,n=i==="string"||Array.isArray(e);if(typeof t==="boolean"&&n){return t?this.addClass(e):this.removeClass(e)}if(f(e)){return this.each((function(i){C(this).toggleClass(e.call(this,i,_t(this),t),t)}))}return this.each((function(){var t,r,o,s;if(n){r=0;o=C(this);s=St(e);while(t=s[r++]){if(o.hasClass(t)){o.removeClass(t)}else{o.addClass(t)}}}else if(e===undefined||i==="boolean"){t=_t(this);if(t){Z.set(this,"__className__",t)}if(this.setAttribute){this.setAttribute("class",t||e===false?"":Z.get(this,"__className__")||"")}}}))},hasClass:function(e){var t,i,n=0;t=" "+e+" ";while(i=this[n++]){if(i.nodeType===1&&(" "+Ct(_t(i))+" ").indexOf(t)>-1){return true}}return false}});var At=/\r/g;C.fn.extend({val:function(e){var t,i,n,r=this[0];if(!arguments.length){if(r){t=C.valHooks[r.type]||C.valHooks[r.nodeName.toLowerCase()];if(t&&"get"in t&&(i=t.get(r,"value"))!==undefined){return i}i=r.value;if(typeof i==="string"){return i.replace(At,"")}return i==null?"":i}return}n=f(e);return this.each((function(i){var r;if(this.nodeType!==1){return}if(n){r=e.call(this,i,C(this).val())}else{r=e}if(r==null){r=""}else if(typeof r==="number"){r+=""}else if(Array.isArray(r)){r=C.map(r,(function(e){return e==null?"":e+""}))}t=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,r,"value")===undefined){this.value=r}}))}});C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return t!=null?t:Ct(C.text(e))}},select:{get:function(e){var t,i,n,r=e.options,o=e.selectedIndex,s=e.type==="select-one",a=s?null:[],l=s?o+1:r.length;if(o<0){n=l}else{n=s?o:0}for(;n<l;n++){i=r[n];if((i.selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!T(i.parentNode,"optgroup"))){t=C(i).val();if(s){return t}a.push(t)}}return a},set:function(e,t){var i,n,r=e.options,o=C.makeArray(t),s=r.length;while(s--){n=r[s];if(n.selected=C.inArray(C.valHooks.option.get(n),o)>-1){i=true}}if(!i){e.selectedIndex=-1}return o}}}});C.each(["radio","checkbox"],(function(){C.valHooks[this]={set:function(e,t){if(Array.isArray(t)){return e.checked=C.inArray(C(e).val(),t)>-1}}};if(!p.checkOn){C.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}}));p.focusin="onfocusin"in e;var xt=/^(?:focusinfocus|focusoutblur)$/,Et=function(e){e.stopPropagation()};C.extend(C.event,{trigger:function(t,i,n,r){var o,s,a,l,c,u,h,p,v=[n||m],b=d.call(t,"type")?t.type:t,y=d.call(t,"namespace")?t.namespace.split("."):[];s=p=a=n=n||m;if(n.nodeType===3||n.nodeType===8){return}if(xt.test(b+C.event.triggered)){return}if(b.indexOf(".")>-1){y=b.split(".");b=y.shift();y.sort()}c=b.indexOf(":")<0&&"on"+b;t=t[C.expando]?t:new C.Event(b,typeof t==="object"&&t);t.isTrigger=r?2:3;t.namespace=y.join(".");t.rnamespace=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;t.result=undefined;if(!t.target){t.target=n}i=i==null?[t]:C.makeArray(i,[t]);h=C.event.special[b]||{};if(!r&&h.trigger&&h.trigger.apply(n,i)===false){return}if(!r&&!h.noBubble&&!g(n)){l=h.delegateType||b;if(!xt.test(l+b)){s=s.parentNode}for(;s;s=s.parentNode){v.push(s);a=s}if(a===(n.ownerDocument||m)){v.push(a.defaultView||a.parentWindow||e)}}o=0;while((s=v[o++])&&!t.isPropagationStopped()){p=s;t.type=o>1?l:h.bindType||b;u=(Z.get(s,"events")||Object.create(null))[t.type]&&Z.get(s,"handle");if(u){u.apply(s,i)}u=c&&s[c];if(u&&u.apply&&K(s)){t.result=u.apply(s,i);if(t.result===false){t.preventDefault()}}}t.type=b;if(!r&&!t.isDefaultPrevented()){if((!h._default||h._default.apply(v.pop(),i)===false)&&K(n)){if(c&&f(n[b])&&!g(n)){a=n[c];if(a){n[c]=null}C.event.triggered=b;if(t.isPropagationStopped()){p.addEventListener(b,Et)}n[b]();if(t.isPropagationStopped()){p.removeEventListener(b,Et)}C.event.triggered=undefined;if(a){n[c]=a}}}}return t.result},simulate:function(e,t,i){var n=C.extend(new C.Event,i,{type:e,isSimulated:true});C.event.trigger(n,null,t)}});C.fn.extend({trigger:function(e,t){return this.each((function(){C.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];if(i){return C.event.trigger(e,t,i,true)}}});if(!p.focusin){C.each({focus:"focusin",blur:"focusout"},(function(e,t){var i=function(e){C.event.simulate(t,e.target,C.event.fix(e))};C.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,r=Z.access(n,t);if(!r){n.addEventListener(e,i,true)}Z.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,r=Z.access(n,t)-1;if(!r){n.removeEventListener(e,i,true);Z.remove(n,t)}else{Z.access(n,t,r)}}}}))}var Tt=e.location;var Dt={guid:Date.now()};var Mt=/\?/;C.parseXML=function(t){var i;if(!t||typeof t!=="string"){return null}try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){i=undefined}if(!i||i.getElementsByTagName("parsererror").length){C.error("Invalid XML: "+t)}return i};var kt=/\[\]$/,Pt=/\r?\n/g,Rt=/^(?:submit|button|image|reset|file)$/i,It=/^(?:input|select|textarea|keygen)/i;function Ot(e,t,i,n){var r;if(Array.isArray(t)){C.each(t,(function(t,r){if(i||kt.test(e)){n(e,r)}else{Ot(e+"["+(typeof r==="object"&&r!=null?t:"")+"]",r,i,n)}}))}else if(!i&&y(t)==="object"){for(r in t){Ot(e+"["+r+"]",t[r],i,n)}}else{n(e,t)}}C.param=function(e,t){var i,n=[],r=function(e,t){var i=f(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(i==null?"":i)};if(e==null){return""}if(Array.isArray(e)||e.jquery&&!C.isPlainObject(e)){C.each(e,(function(){r(this.name,this.value)}))}else{for(i in e){Ot(i,e[i],t,r)}}return n.join("&")};C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&It.test(this.nodeName)&&!Rt.test(e)&&(this.checked||!fe.test(e))})).map((function(e,t){var i=C(this).val();if(i==null){return null}if(Array.isArray(i)){return C.map(i,(function(e){return{name:t.name,value:e.replace(Pt,"\r\n")}}))}return{name:t.name,value:i.replace(Pt,"\r\n")}})).get()}});var Nt=/%20/g,Lt=/#.*$/,Ft=/([?&])_=[^&]*/,$t=/^(.*?):[ \t]*([^\r\n]*)$/gm,Gt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Bt=/^(?:GET|HEAD)$/,Ht=/^\/\//,zt={},Wt={},Vt="*/".concat("*"),jt=m.createElement("a");jt.href=Tt.href;function Ut(e){return function(t,i){if(typeof t!=="string"){i=t;t="*"}var n,r=0,o=t.toLowerCase().match(L)||[];if(f(i)){while(n=o[r++]){if(n[0]==="+"){n=n.slice(1)||"*";(e[n]=e[n]||[]).unshift(i)}else{(e[n]=e[n]||[]).push(i)}}}}}function Yt(e,t,i,n){var r={},o=e===Wt;function s(a){var l;r[a]=true;C.each(e[a]||[],(function(e,a){var c=a(t,i,n);if(typeof c==="string"&&!o&&!r[c]){t.dataTypes.unshift(c);s(c);return false}else if(o){return!(l=c)}}));return l}return s(t.dataTypes[0])||!r["*"]&&s("*")}function qt(e,t){var i,n,r=C.ajaxSettings.flatOptions||{};for(i in t){if(t[i]!==undefined){(r[i]?e:n||(n={}))[i]=t[i]}}if(n){C.extend(true,e,n)}return e}function Kt(e,t,i){var n,r,o,s,a=e.contents,l=e.dataTypes;while(l[0]==="*"){l.shift();if(n===undefined){n=e.mimeType||t.getResponseHeader("Content-Type")}}if(n){for(r in a){if(a[r]&&a[r].test(n)){l.unshift(r);break}}}if(l[0]in i){o=l[0]}else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}if(!s){s=r}}o=o||s}if(o){if(o!==l[0]){l.unshift(o)}return i[o]}}function Xt(e,t,i,n){var r,o,s,a,l,c={},d=e.dataTypes.slice();if(d[1]){for(s in e.converters){c[s.toLowerCase()]=e.converters[s]}}o=d.shift();while(o){if(e.responseFields[o]){i[e.responseFields[o]]=t}if(!l&&n&&e.dataFilter){t=e.dataFilter(t,e.dataType)}l=o;o=d.shift();if(o){if(o==="*"){o=l}else if(l!=="*"&&l!==o){s=c[l+" "+o]||c["* "+o];if(!s){for(r in c){a=r.split(" ");if(a[1]===o){s=c[l+" "+a[0]]||c["* "+a[0]];if(s){if(s===true){s=c[r]}else if(c[r]!==true){o=a[0];d.unshift(a[1])}break}}}}if(s!==true){if(s&&e.throws){t=s(t)}else{try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+o}}}}}}}return{state:"success",data:t}}C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:"GET",isLocal:Gt.test(Tt.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(e,t){return t?qt(qt(e,C.ajaxSettings),t):qt(C.ajaxSettings,e)},ajaxPrefilter:Ut(zt),ajaxTransport:Ut(Wt),ajax:function(t,i){if(typeof t==="object"){i=t;t=undefined}i=i||{};var n,r,o,s,a,l,c,d,u,h,p=C.ajaxSetup({},i),f=p.context||p,g=p.context&&(f.nodeType||f.jquery)?C(f):C.event,v=C.Deferred(),b=C.Callbacks("once memory"),y=p.statusCode||{},w={},_={},S="canceled",A={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s){s={};while(t=$t.exec(o)){s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2])}}t=s[e.toLowerCase()+" "]}return t==null?null:t.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(e,t){if(c==null){e=_[e.toLowerCase()]=_[e.toLowerCase()]||e;w[e]=t}return this},overrideMimeType:function(e){if(c==null){p.mimeType=e}return this},statusCode:function(e){var t;if(e){if(c){A.always(e[A.status])}else{for(t in e){y[t]=[y[t],e[t]]}}}return this},abort:function(e){var t=e||S;if(n){n.abort(t)}x(0,t);return this}};v.promise(A);p.url=((t||p.url||Tt.href)+"").replace(Ht,Tt.protocol+"//");p.type=i.method||i.type||p.method||p.type;p.dataTypes=(p.dataType||"*").toLowerCase().match(L)||[""];if(p.crossDomain==null){l=m.createElement("a");try{l.href=p.url;l.href=l.href;p.crossDomain=jt.protocol+"//"+jt.host!==l.protocol+"//"+l.host}catch(e){p.crossDomain=true}}if(p.data&&p.processData&&typeof p.data!=="string"){p.data=C.param(p.data,p.traditional)}Yt(zt,p,i,A);if(c){return A}d=C.event&&p.global;if(d&&C.active++===0){C.event.trigger("ajaxStart")}p.type=p.type.toUpperCase();p.hasContent=!Bt.test(p.type);r=p.url.replace(Lt,"");if(!p.hasContent){h=p.url.slice(r.length);if(p.data&&(p.processData||typeof p.data==="string")){r+=(Mt.test(r)?"&":"?")+p.data;delete p.data}if(p.cache===false){r=r.replace(Ft,"$1");h=(Mt.test(r)?"&":"?")+"_="+Dt.guid+++h}p.url=r+h}else if(p.data&&p.processData&&(p.contentType||"").indexOf("application/x-www-form-urlencoded")===0){p.data=p.data.replace(Nt,"+")}if(p.ifModified){if(C.lastModified[r]){A.setRequestHeader("If-Modified-Since",C.lastModified[r])}if(C.etag[r]){A.setRequestHeader("If-None-Match",C.etag[r])}}if(p.data&&p.hasContent&&p.contentType!==false||i.contentType){A.setRequestHeader("Content-Type",p.contentType)}A.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+(p.dataTypes[0]!=="*"?", "+Vt+"; q=0.01":""):p.accepts["*"]);for(u in p.headers){A.setRequestHeader(u,p.headers[u])}if(p.beforeSend&&(p.beforeSend.call(f,A,p)===false||c)){return A.abort()}S="abort";b.add(p.complete);A.done(p.success);A.fail(p.error);n=Yt(Wt,p,i,A);if(!n){x(-1,"No Transport")}else{A.readyState=1;if(d){g.trigger("ajaxSend",[A,p])}if(c){return A}if(p.async&&p.timeout>0){a=e.setTimeout((function(){A.abort("timeout")}),p.timeout)}try{c=false;n.send(w,x)}catch(e){if(c){throw e}x(-1,e)}}function x(t,i,s,l){var u,h,m,w,_,S=i;if(c){return}c=true;if(a){e.clearTimeout(a)}n=undefined;o=l||"";A.readyState=t>0?4:0;u=t>=200&&t<300||t===304;if(s){w=Kt(p,A,s)}if(!u&&C.inArray("script",p.dataTypes)>-1){p.converters["text script"]=function(){}}w=Xt(p,w,A,u);if(u){if(p.ifModified){_=A.getResponseHeader("Last-Modified");if(_){C.lastModified[r]=_}_=A.getResponseHeader("etag");if(_){C.etag[r]=_}}if(t===204||p.type==="HEAD"){S="nocontent"}else if(t===304){S="notmodified"}else{S=w.state;h=w.data;m=w.error;u=!m}}else{m=S;if(t||!S){S="error";if(t<0){t=0}}}A.status=t;A.statusText=(i||S)+"";if(u){v.resolveWith(f,[h,S,A])}else{v.rejectWith(f,[A,S,m])}A.statusCode(y);y=undefined;if(d){g.trigger(u?"ajaxSuccess":"ajaxError",[A,p,u?h:m])}b.fireWith(f,[A,S]);if(d){g.trigger("ajaxComplete",[A,p]);if(! --C.active){C.event.trigger("ajaxStop")}}}return A},getJSON:function(e,t,i){return C.get(e,t,i,"json")},getScript:function(e,t){return C.get(e,undefined,t,"script")}});C.each(["get","post"],(function(e,t){C[t]=function(e,i,n,r){if(f(i)){r=r||n;n=i;i=undefined}return C.ajax(C.extend({url:e,type:t,dataType:r,data:i,success:n},C.isPlainObject(e)&&e))}}));C.ajaxPrefilter((function(e){var t;for(t in e.headers){if(t.toLowerCase()==="content-type"){e.contentType=e.headers[t]||""}}}));C._evalUrl=function(e,t,i){return C.ajax({url:e,type:"GET",dataType:"script",cache:true,async:false,global:false,converters:{"text script":function(){}},dataFilter:function(e){C.globalEval(e,t,i)}})};C.fn.extend({wrapAll:function(e){var t;if(this[0]){if(f(e)){e=e.call(this[0])}t=C(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){t.insertBefore(this[0])}t.map((function(){var e=this;while(e.firstElementChild){e=e.firstElementChild}return e})).append(this)}return this},wrapInner:function(e){if(f(e)){return this.each((function(t){C(this).wrapInner(e.call(this,t))}))}return this.each((function(){var t=C(this),i=t.contents();if(i.length){i.wrapAll(e)}else{t.append(e)}}))},wrap:function(e){var t=f(e);return this.each((function(i){C(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(e){this.parent(e).not("body").each((function(){C(this).replaceWith(this.childNodes)}));return this}});C.expr.pseudos.hidden=function(e){return!C.expr.pseudos.visible(e)};C.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)};C.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Zt={0:200,1223:204},Qt=C.ajaxSettings.xhr();p.cors=!!Qt&&"withCredentials"in Qt;p.ajax=Qt=!!Qt;C.ajaxTransport((function(t){var i,n;if(p.cors||Qt&&!t.crossDomain){return{send:function(r,o){var s,a=t.xhr();a.open(t.type,t.url,t.async,t.username,t.password);if(t.xhrFields){for(s in t.xhrFields){a[s]=t.xhrFields[s]}}if(t.mimeType&&a.overrideMimeType){a.overrideMimeType(t.mimeType)}if(!t.crossDomain&&!r["X-Requested-With"]){r["X-Requested-With"]="XMLHttpRequest"}for(s in r){a.setRequestHeader(s,r[s])}i=function(e){return function(){if(i){i=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null;if(e==="abort"){a.abort()}else if(e==="error"){if(typeof a.status!=="number"){o(0,"error")}else{o(a.status,a.statusText)}}else{o(Zt[a.status]||a.status,a.statusText,(a.responseType||"text")!=="text"||typeof a.responseText!=="string"?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders())}}}};a.onload=i();n=a.onerror=a.ontimeout=i("error");if(a.onabort!==undefined){a.onabort=n}else{a.onreadystatechange=function(){if(a.readyState===4){e.setTimeout((function(){if(i){n()}}))}}}i=i("abort");try{a.send(t.hasContent&&t.data||null)}catch(e){if(i){throw e}}},abort:function(){if(i){i()}}}}}));C.ajaxPrefilter((function(e){if(e.crossDomain){e.contents.script=false}}));C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){C.globalEval(e);return e}}});C.ajaxPrefilter("script",(function(e){if(e.cache===undefined){e.cache=false}if(e.crossDomain){e.type="GET"}}));C.ajaxTransport("script",(function(e){if(e.crossDomain||e.scriptAttrs){var t,i;return{send:function(n,r){t=C("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove();i=null;if(e){r(e.type==="error"?404:200,e.type)}});m.head.appendChild(t[0])},abort:function(){if(i){i()}}}}}));var Jt=[],ei=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Jt.pop()||C.expando+"_"+Dt.guid++;this[e]=true;return e}});C.ajaxPrefilter("json jsonp",(function(t,i,n){var r,o,s,a=t.jsonp!==false&&(ei.test(t.url)?"url":typeof t.data==="string"&&(t.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&ei.test(t.data)&&"data");if(a||t.dataTypes[0]==="jsonp"){r=t.jsonpCallback=f(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback;if(a){t[a]=t[a].replace(ei,"$1"+r)}else if(t.jsonp!==false){t.url+=(Mt.test(t.url)?"&":"?")+t.jsonp+"="+r}t.converters["script json"]=function(){if(!s){C.error(r+" was not called")}return s[0]};t.dataTypes[0]="json";o=e[r];e[r]=function(){s=arguments};n.always((function(){if(o===undefined){C(e).removeProp(r)}else{e[r]=o}if(t[r]){t.jsonpCallback=i.jsonpCallback;Jt.push(r)}if(s&&f(o)){o(s[0])}s=o=undefined}));return"script"}}));p.createHTMLDocument=function(){var e=m.implementation.createHTMLDocument("").body;e.innerHTML="<form></form><form></form>";return e.childNodes.length===2}();C.parseHTML=function(e,t,i){if(typeof e!=="string"){return[]}if(typeof t==="boolean"){i=t;t=false}var n,r,o;if(!t){if(p.createHTMLDocument){t=m.implementation.createHTMLDocument("");n=t.createElement("base");n.href=m.location.href;t.head.appendChild(n)}else{t=m}}r=D.exec(e);o=!i&&[];if(r){return[t.createElement(r[1])]}r=Ce([e],t,o);if(o&&o.length){C(o).remove()}return C.merge([],r.childNodes)};C.fn.load=function(e,t,i){var n,r,o,s=this,a=e.indexOf(" ");if(a>-1){n=Ct(e.slice(a));e=e.slice(0,a)}if(f(t)){i=t;t=undefined}else if(t&&typeof t==="object"){r="POST"}if(s.length>0){C.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done((function(e){o=arguments;s.html(n?C("<div>").append(C.parseHTML(e)).find(n):e)})).always(i&&function(e,t){s.each((function(){i.apply(this,o||[e.responseText,t,e])}))})}return this};C.expr.pseudos.animated=function(e){return C.grep(C.timers,(function(t){return e===t.elem})).length};C.offset={setOffset:function(e,t,i){var n,r,o,s,a,l,c,d=C.css(e,"position"),u=C(e),h={};if(d==="static"){e.style.position="relative"}a=u.offset();o=C.css(e,"top");l=C.css(e,"left");c=(d==="absolute"||d==="fixed")&&(o+l).indexOf("auto")>-1;if(c){n=u.position();s=n.top;r=n.left}else{s=parseFloat(o)||0;r=parseFloat(l)||0}if(f(t)){t=t.call(e,i,C.extend({},a))}if(t.top!=null){h.top=t.top-a.top+s}if(t.left!=null){h.left=t.left-a.left+r}if("using"in t){t.using.call(e,h)}else{if(typeof h.top==="number"){h.top+="px"}if(typeof h.left==="number"){h.left+="px"}u.css(h)}}};C.fn.extend({offset:function(e){if(arguments.length){return e===undefined?this:this.each((function(t){C.offset.setOffset(this,e,t)}))}var t,i,n=this[0];if(!n){return}if(!n.getClientRects().length){return{top:0,left:0}}t=n.getBoundingClientRect();i=n.ownerDocument.defaultView;return{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}},position:function(){if(!this[0]){return}var e,t,i,n=this[0],r={top:0,left:0};if(C.css(n,"position")==="fixed"){t=n.getBoundingClientRect()}else{t=this.offset();i=n.ownerDocument;e=n.offsetParent||i.documentElement;while(e&&(e===i.body||e===i.documentElement)&&C.css(e,"position")==="static"){e=e.parentNode}if(e&&e!==n&&e.nodeType===1){r=C(e).offset();r.top+=C.css(e,"borderTopWidth",true);r.left+=C.css(e,"borderLeftWidth",true)}}return{top:t.top-r.top-C.css(n,"marginTop",true),left:t.left-r.left-C.css(n,"marginLeft",true)}},offsetParent:function(){return this.map((function(){var e=this.offsetParent;while(e&&C.css(e,"position")==="static"){e=e.offsetParent}return e||se}))}});C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i="pageYOffset"===t;C.fn[e]=function(n){return V(this,(function(e,n,r){var o;if(g(e)){o=e}else if(e.nodeType===9){o=e.defaultView}if(r===undefined){return o?o[t]:e[n]}if(o){o.scrollTo(!i?r:o.pageXOffset,i?r:o.pageYOffset)}else{e[n]=r}}),e,n,arguments.length)}}));C.each(["top","left"],(function(e,t){C.cssHooks[t]=Ue(p.pixelPosition,(function(e,i){if(i){i=je(e,t);return He.test(i)?C(e).position()[t]+"px":i}}))}));C.each({Height:"height",Width:"width"},(function(e,t){C.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,n){C.fn[n]=function(r,o){var s=arguments.length&&(i||typeof r!=="boolean"),a=i||(r===true||o===true?"margin":"border");return V(this,(function(t,i,r){var o;if(g(t)){return n.indexOf("outer")===0?t["inner"+e]:t.document.documentElement["client"+e]}if(t.nodeType===9){o=t.documentElement;return Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])}return r===undefined?C.css(t,i,a):C.style(t,i,r,a)}),t,s?r:undefined,s)}}))}));C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){C.fn[t]=function(e){return this.on(t,e)}}));C.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});C.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),(function(e,t){C.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}));var ti=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;C.proxy=function(e,t){var i,n,o;if(typeof t==="string"){i=e[t];t=e;e=i}if(!f(e)){return undefined}n=r.call(arguments,2);o=function(){return e.apply(t||this,n.concat(r.call(arguments)))};o.guid=e.guid=e.guid||C.guid++;return o};C.holdReady=function(e){if(e){C.readyWait++}else{C.ready(true)}};C.isArray=Array.isArray;C.parseJSON=JSON.parse;C.nodeName=T;C.isFunction=f;C.isWindow=g;C.camelCase=q;C.type=y;C.now=Date.now;C.isNumeric=function(e){var t=C.type(e);return(t==="number"||t==="string")&&!isNaN(e-parseFloat(e))};C.trim=function(e){return e==null?"":(e+"").replace(ti,"")};if(typeof define==="function"&&define.amd){define("jquery",[],(function(){return C}))}var ii=e.jQuery,ni=e.$;C.noConflict=function(t){if(e.$===C){e.$=ni}if(t&&e.jQuery===C){e.jQuery=ii}return C};if(typeof t==="undefined"){e.jQuery=e.$=C}return C}));(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})((function(e){"use strict";e.ui=e.ui||{};var t=e.ui.version="1.14.1";var i=0;var n=Array.prototype.hasOwnProperty;var r=Array.prototype.slice;e.cleanData=function(t){return function(i){var n,r,o;for(o=0;(r=i[o])!=null;o++){n=e._data(r,"events");if(n&&n.remove){e(r).triggerHandler("remove")}}t(i)}}(e.cleanData);e.widget=function(t,i,n){var r,o,s;var a={};var l=t.split(".")[0];t=t.split(".")[1];if(t==="__proto__"||t==="constructor"){return e.error("Invalid widget name: "+t)}var c=l+"-"+t;if(!n){n=i;i=e.Widget}if(Array.isArray(n)){n=e.extend.apply(null,[{}].concat(n))}e.expr.pseudos[c.toLowerCase()]=function(t){return!!e.data(t,c)};e[l]=e[l]||{};r=e[l][t];o=e[l][t]=function(e,t){if(!this||!this._createWidget){return new o(e,t)}if(arguments.length){this._createWidget(e,t)}};e.extend(o,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]});s=new i;s.options=e.widget.extend({},s.options);e.each(n,(function(e,t){if(typeof t!=="function"){a[e]=t;return}a[e]=function(){function n(){return i.prototype[e].apply(this,arguments)}function r(t){return i.prototype[e].apply(this,t)}return function(){var e=this._super;var i=this._superApply;var o;this._super=n;this._superApply=r;o=t.apply(this,arguments);this._super=e;this._superApply=i;return o}}()}));o.prototype=e.widget.extend(s,{widgetEventPrefix:r?s.widgetEventPrefix||t:t},a,{constructor:o,namespace:l,widgetName:t,widgetFullName:c});if(r){e.each(r._childConstructors,(function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,o,i._proto)}));delete r._childConstructors}else{i._childConstructors.push(o)}e.widget.bridge(t,o);return o};e.widget.extend=function(t){var i=r.call(arguments,1);var o=0;var s=i.length;var a;var l;for(;o<s;o++){for(a in i[o]){l=i[o][a];if(n.call(i[o],a)&&l!==undefined){if(e.isPlainObject(l)){t[a]=e.isPlainObject(t[a])?e.widget.extend({},t[a],l):e.widget.extend({},l)}else{t[a]=l}}}}return t};e.widget.bridge=function(t,i){var n=i.prototype.widgetFullName||t;e.fn[t]=function(o){var s=typeof o==="string";var a=r.call(arguments,1);var l=this;if(s){if(!this.length&&o==="instance"){l=undefined}else{this.each((function(){var i;var r=e.data(this,n);if(o==="instance"){l=r;return false}if(!r){return e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+o+"'")}if(typeof r[o]!=="function"||o.charAt(0)==="_"){return e.error("no such method '"+o+"' for "+t+" widget instance")}i=r[o].apply(r,a);if(i!==r&&i!==undefined){l=i&&i.jquery?l.pushStack(i.get()):i;return false}}))}}else{if(a.length){o=e.widget.extend.apply(null,[o].concat(a))}this.each((function(){var t=e.data(this,n);if(t){t.option(o||{});if(t._init){t._init()}}else{e.data(this,n,new i(o,this))}}))}return l}};e.Widget=function(){};e.Widget._childConstructors=[];e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:false,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0];this.element=e(n);this.uuid=i++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=e();this.hoverable=e();this.focusable=e();this.classesElementLookup={};if(n!==this){e.data(n,this.widgetFullName,this);this._on(true,this.element,{remove:function(e){if(e.target===n){this.destroy()}}});this.document=e(n.style?n.ownerDocument:n.document||n);this.window=e(this.document[0].defaultView||this.document[0].parentWindow)}this.options=e.widget.extend({},this.options,this._getCreateOptions(),t);this._create();if(this.options.disabled){this._setOptionDisabled(this.options.disabled)}this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy();e.each(this.classesElementLookup,(function(e,i){t._removeClass(i,e)}));this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n=t;var r;var o;var s;if(arguments.length===0){return e.widget.extend({},this.options)}if(typeof t==="string"){n={};r=t.split(".");t=r.shift();if(r.length){o=n[t]=e.widget.extend({},this.options[t]);for(s=0;s<r.length-1;s++){o[r[s]]=o[r[s]]||{};o=o[r[s]]}t=r.pop();if(arguments.length===1){return o[t]===undefined?null:o[t]}o[t]=i}else{if(arguments.length===1){return this.options[t]===undefined?null:this.options[t]}n[t]=i}}this._setOptions(n);return this},_setOptions:function(e){var t;for(t in e){this._setOption(t,e[t])}return this},_setOption:function(e,t){if(e==="classes"){this._setOptionClasses(t)}this.options[e]=t;if(e==="disabled"){this._setOptionDisabled(t)}return this},_setOptionClasses:function(t){var i,n,r;for(i in t){r=this.classesElementLookup[i];if(t[i]===this.options.classes[i]||!r||!r.length){continue}n=e(r.get());this._removeClass(r,i);n.addClass(this._classes({element:n,keys:i,classes:t,add:true}))}},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e);if(e){this._removeClass(this.hoverable,null,"ui-state-hover");this._removeClass(this.focusable,null,"ui-state-focus")}},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_classes:function(t){var i=[];var n=this;t=e.extend({element:this.element,classes:this.options.classes||{}},t);function r(){var i=[];t.element.each((function(t,r){var o=e.map(n.classesElementLookup,(function(e){return e})).some((function(e){return e.is(r)}));if(!o){i.push(r)}}));n._on(e(i),{remove:"_untrackClassesElement"})}function o(o,s){var a,l;for(l=0;l<o.length;l++){a=n.classesElementLookup[o[l]]||e();if(t.add){r();a=e(e.uniqueSort(a.get().concat(t.element.get())))}else{a=e(a.not(t.element).get())}n.classesElementLookup[o[l]]=a;i.push(o[l]);if(s&&t.classes[o[l]]){i.push(t.classes[o[l]])}}}if(t.keys){o(t.keys.match(/\S+/g)||[],true)}if(t.extra){o(t.extra.match(/\S+/g)||[])}return i.join(" ")},_untrackClassesElement:function(t){var i=this;e.each(i.classesElementLookup,(function(n,r){if(e.inArray(t.target,r)!==-1){i.classesElementLookup[n]=e(r.not(t.target).get())}}));this._off(e(t.target))},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,false)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,true)},_toggleClass:function(e,t,i,n){n=typeof n==="boolean"?n:i;var r=typeof e==="string"||e===null,o={extra:r?t:i,keys:r?e:t,element:r?this.element:e,add:n};o.element.toggleClass(this._classes(o),n);return this},_on:function(t,i,n){var r;var o=this;if(typeof t!=="boolean"){n=i;i=t;t=false}if(!n){n=i;i=this.element;r=this.widget()}else{i=r=e(i);this.bindings=this.bindings.add(i)}e.each(n,(function(n,s){function a(){if(!t&&(o.options.disabled===true||e(this).hasClass("ui-state-disabled"))){return}return(typeof s==="string"?o[s]:s).apply(o,arguments)}if(typeof s!=="string"){a.guid=s.guid=s.guid||a.guid||e.guid++}var l=n.match(/^([\w:-]*)\s*(.*)$/);var c=l[1]+o.eventNamespace;var d=l[2];if(d){r.on(c,d,a)}else{i.on(c,a)}}))},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;t.off(i);this.bindings=e(this.bindings.not(t).get());this.focusable=e(this.focusable.not(t).get());this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return(typeof e==="string"?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,i,n){var r,o;var s=this.options[t];n=n||{};i=e.Event(i);i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase();i.target=this.element[0];o=i.originalEvent;if(o){for(r in o){if(!(r in i)){i[r]=o[r]}}}this.element.trigger(i,n);return!(typeof s==="function"&&s.apply(this.element[0],[i].concat(n))===false||i.isDefaultPrevented())}};e.each({show:"fadeIn",hide:"fadeOut"},(function(t,i){e.Widget.prototype["_"+t]=function(n,r,o){if(typeof r==="string"){r={effect:r}}var s;var a=!r?t:r===true||typeof r==="number"?i:r.effect||i;r=r||{};if(typeof r==="number"){r={duration:r}}else if(r===true){r={}}s=!e.isEmptyObject(r);r.complete=o;if(r.delay){n.delay(r.delay)}if(s&&e.effects&&e.effects.effect[a]){n[t](r)}else if(a!==t&&n[a]){n[a](r.duration,r.easing,o)}else{n.queue((function(i){e(this)[t]();if(o){o.call(n[0])}i()}))}}}));var o=e.widget;(function(){var t,i=Math.max,n=Math.abs,r=/left|center|right/,o=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,c=e.fn.position;function d(e,t,i){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?i/100:1)]}function u(t,i){return parseInt(e.css(t,i),10)||0}function h(e){return e!=null&&e===e.window}function p(e){var t=e[0];if(t.nodeType===9){return{width:e.width(),height:e.height(),offset:{top:0,left:0}}}if(h(t)){return{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}}if(t.preventDefault){return{width:0,height:0,offset:{top:t.pageY,left:t.pageX}}}return{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}e.position={scrollbarWidth:function(){if(t!==undefined){return t}var i,n,r=e("<div style="+"'display:block;position:absolute;width:200px;height:200px;overflow:hidden;'>"+"<div style='height:300px;width:auto;'></div></div>"),o=r.children()[0];e("body").append(r);i=o.offsetWidth;r.css("overflow","scroll");n=o.offsetWidth;if(i===n){n=r[0].clientWidth}r.remove();return t=i-n},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),r=i==="scroll"||i==="auto"&&t.width<t.element[0].scrollWidth,o=n==="scroll"||n==="auto"&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=h(i[0]),r=!!i[0]&&i[0].nodeType===9,o=!n&&!r;return{element:i,isWindow:n,isDocument:r,offset:o?e(t).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}};e.fn.position=function(t){if(!t||!t.of){return c.apply(this,arguments)}t=e.extend({},t);var l,h,f,g,m,v,b=typeof t.of==="string"?e(document).find(t.of):e(t.of),y=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(y),C=(t.collision||"flip").split(" "),_={};v=p(b);if(b[0].preventDefault){t.at="left top"}h=v.width;f=v.height;g=v.offset;m=e.extend({},g);e.each(["my","at"],(function(){var e=(t[this]||"").split(" "),i,n;if(e.length===1){e=r.test(e[0])?e.concat(["center"]):o.test(e[0])?["center"].concat(e):["center","center"]}e[0]=r.test(e[0])?e[0]:"center";e[1]=o.test(e[1])?e[1]:"center";i=s.exec(e[0]);n=s.exec(e[1]);_[this]=[i?i[0]:0,n?n[0]:0];t[this]=[a.exec(e[0])[0],a.exec(e[1])[0]]}));if(C.length===1){C[1]=C[0]}if(t.at[0]==="right"){m.left+=h}else if(t.at[0]==="center"){m.left+=h/2}if(t.at[1]==="bottom"){m.top+=f}else if(t.at[1]==="center"){m.top+=f/2}l=d(_.at,h,f);m.left+=l[0];m.top+=l[1];return this.each((function(){var r,o,s=e(this),a=s.outerWidth(),c=s.outerHeight(),p=u(this,"marginLeft"),v=u(this,"marginTop"),S=a+p+u(this,"marginRight")+w.width,A=c+v+u(this,"marginBottom")+w.height,x=e.extend({},m),E=d(_.my,s.outerWidth(),s.outerHeight());if(t.my[0]==="right"){x.left-=a}else if(t.my[0]==="center"){x.left-=a/2}if(t.my[1]==="bottom"){x.top-=c}else if(t.my[1]==="center"){x.top-=c/2}x.left+=E[0];x.top+=E[1];r={marginLeft:p,marginTop:v};e.each(["left","top"],(function(i,n){if(e.ui.position[C[i]]){e.ui.position[C[i]][n](x,{targetWidth:h,targetHeight:f,elemWidth:a,elemHeight:c,collisionPosition:r,collisionWidth:S,collisionHeight:A,offset:[l[0]+E[0],l[1]+E[1]],my:t.my,at:t.at,within:y,elem:s})}}));if(t.using){o=function(e){var r=g.left-x.left,o=r+h-a,l=g.top-x.top,d=l+f-c,u={target:{element:b,left:g.left,top:g.top,width:h,height:f},element:{element:s,left:x.left,top:x.top,width:a,height:c},horizontal:o<0?"left":r>0?"right":"center",vertical:d<0?"top":l>0?"bottom":"middle"};if(h<a&&n(r+o)<h){u.horizontal="center"}if(f<c&&n(l+d)<f){u.vertical="middle"}if(i(n(r),n(o))>i(n(l),n(d))){u.important="horizontal"}else{u.important="vertical"}t.using.call(this,e,u)}}s.offset(e.extend(x,{using:o}))}))};e.ui.position={fit:{left:function(e,t){var n=t.within,r=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,s=e.left-t.collisionPosition.marginLeft,a=r-s,l=s+t.collisionWidth-o-r,c;if(t.collisionWidth>o){if(a>0&&l<=0){c=e.left+a+t.collisionWidth-o-r;e.left+=a-c}else if(l>0&&a<=0){e.left=r}else{if(a>l){e.left=r+o-t.collisionWidth}else{e.left=r}}}else if(a>0){e.left+=a}else if(l>0){e.left-=l}else{e.left=i(e.left-s,e.left)}},top:function(e,t){var n=t.within,r=n.isWindow?n.scrollTop:n.offset.top,o=t.within.height,s=e.top-t.collisionPosition.marginTop,a=r-s,l=s+t.collisionHeight-o-r,c;if(t.collisionHeight>o){if(a>0&&l<=0){c=e.top+a+t.collisionHeight-o-r;e.top+=a-c}else if(l>0&&a<=0){e.top=r}else{if(a>l){e.top=r+o-t.collisionHeight}else{e.top=r}}}else if(a>0){e.top+=a}else if(l>0){e.top-=l}else{e.top=i(e.top-s,e.top)}}},flip:{left:function(e,t){var i=t.within,r=i.offset.left+i.scrollLeft,o=i.width,s=i.isWindow?i.scrollLeft:i.offset.left,a=e.left-t.collisionPosition.marginLeft,l=a-s,c=a+t.collisionWidth-o-s,d=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,u=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,f;if(l<0){p=e.left+d+u+h+t.collisionWidth-o-r;if(p<0||p<n(l)){e.left+=d+u+h}}else if(c>0){f=e.left-t.collisionPosition.marginLeft+d+u+h-s;if(f>0||n(f)<c){e.left+=d+u+h}}},top:function(e,t){var i=t.within,r=i.offset.top+i.scrollTop,o=i.height,s=i.isWindow?i.scrollTop:i.offset.top,a=e.top-t.collisionPosition.marginTop,l=a-s,c=a+t.collisionHeight-o-s,d=t.my[1]==="top",u=d?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],f,g;if(l<0){g=e.top+u+h+p+t.collisionHeight-o-r;if(g<0||g<n(l)){e.top+=u+h+p}}else if(c>0){f=e.top-t.collisionPosition.marginTop+u+h+p-s;if(f>0||n(f)<c){e.top+=u+h+p}}}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments);e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments);e.ui.position.fit.top.apply(this,arguments)}}}})();var s=e.ui.position;var a=e.extend(e.expr.pseudos,{data:e.expr.createPseudo((function(t){return function(i){return!!e.data(i,t)}}))});var l=e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",(function(e){e.preventDefault()}))}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});var c=e;var d="backgroundColor borderBottomColor borderLeftColor borderRightColor "+"borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",u={},h=u.toString,p=/^([\-+])=\s*(\d+\.?\d*)/,f=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),e[4]?(parseInt(e[4],16)/255).toFixed(2):1]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),e[4]?(parseInt(e[4]+e[4],16)/255).toFixed(2):1]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],g=c.Color=function(e,t,i,n){return new c.Color.fn.parse(e,t,i,n)},m={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},v={byte:{floor:true,max:255},percent:{max:1},degrees:{mod:360,floor:true}},b,y=c.each;y(m,(function(e,t){t.cache="_"+e;t.props.alpha={idx:3,type:"percent",def:1}}));c.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){u["[object "+t+"]"]=t.toLowerCase()}));function w(e){if(e==null){return e+""}return typeof e==="object"?u[h.call(e)]||"object":typeof e}function C(e,t,i){var n=v[t.type]||{};if(e==null){return i||!t.def?null:t.def}e=n.floor?~~e:parseFloat(e);if(n.mod){return(e+n.mod)%n.mod}return Math.min(n.max,Math.max(0,e))}function _(e){var t=g(),i=t._rgba=[];e=e.toLowerCase();y(f,(function(n,r){var o,s=r.re.exec(e),a=s&&r.parse(s),l=r.space||"rgba";if(a){o=t[l](a);t[m[l].cache]=o[m[l].cache];i=t._rgba=o._rgba;return false}}));if(i.length){if(i.join()==="0,0,0,0"){c.extend(i,b.transparent)}return t}return b[e]}g.fn=c.extend(g.prototype,{parse:function(e,t,i,n){if(e===undefined){this._rgba=[null,null,null,null];return this}if(e.jquery||e.nodeType){e=c(e).css(t);t=undefined}var r=this,o=w(e),s=this._rgba=[];if(t!==undefined){e=[e,t,i,n];o="array"}if(o==="string"){return this.parse(_(e)||b._default)}if(o==="array"){y(m.rgba.props,(function(t,i){s[i.idx]=C(e[i.idx],i)}));return this}if(o==="object"){if(e instanceof g){y(m,(function(t,i){if(e[i.cache]){r[i.cache]=e[i.cache].slice()}}))}else{y(m,(function(t,i){var n=i.cache;y(i.props,(function(t,o){if(!r[n]&&i.to){if(t==="alpha"||e[t]==null){return}r[n]=i.to(r._rgba)}r[n][o.idx]=C(e[t],o,true)}));if(r[n]&&c.inArray(null,r[n].slice(0,3))<0){if(r[n][3]==null){r[n][3]=1}if(i.from){r._rgba=i.from(r[n])}}}))}return this}},is:function(e){var t=g(e),i=true,n=this;y(m,(function(e,r){var o,s=t[r.cache];if(s){o=n[r.cache]||r.to&&r.to(n._rgba)||[];y(r.props,(function(e,t){if(s[t.idx]!=null){i=s[t.idx]===o[t.idx];return i}}))}return i}));return i},_space:function(){var e=[],t=this;y(m,(function(i,n){if(t[n.cache]){e.push(i)}}));return e.pop()},transition:function(e,t){var i=g(e),n=i._space(),r=m[n],o=this.alpha()===0?g("transparent"):this,s=o[r.cache]||r.to(o._rgba),a=s.slice();i=i[r.cache];y(r.props,(function(e,n){var r=n.idx,o=s[r],l=i[r],c=v[n.type]||{};if(l===null){return}if(o===null){a[r]=l}else{if(c.mod){if(l-o>c.mod/2){o+=c.mod}else if(o-l>c.mod/2){o-=c.mod}}a[r]=C((l-o)*t+o,n)}}));return this[n](a)},blend:function(e){if(this._rgba[3]===1){return this}var t=this._rgba.slice(),i=t.pop(),n=g(e)._rgba;return g(c.map(t,(function(e,t){return(1-i)*n[t]+i*e})))},toRgbaString:function(){var e="rgba(",t=c.map(this._rgba,(function(e,t){if(e!=null){return e}return t>2?1:0}));if(t[3]===1){t.pop();e="rgb("}return e+t.join(", ")+")"},toHslaString:function(){var e="hsla(",t=c.map(this.hsla(),(function(e,t){if(e==null){e=t>2?1:0}if(t&&t<3){e=Math.round(e*100)+"%"}return e}));if(t[3]===1){t.pop();e="hsl("}return e+t.join(", ")+")"},toHexString:function(e){var t=this._rgba.slice(),i=t.pop();if(e){t.push(~~(i*255))}return"#"+c.map(t,(function(e){return("0"+(e||0).toString(16)).substr(-2)})).join("")},toString:function(){return this.toRgbaString()}});g.fn.parse.prototype=g.fn;function S(e,t,i){i=(i+1)%1;if(i*6<1){return e+(t-e)*i*6}if(i*2<1){return t}if(i*3<2){return e+(t-e)*(2/3-i)*6}return e}m.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null){return[null,null,null,e[3]]}var t=e[0]/255,i=e[1]/255,n=e[2]/255,r=e[3],o=Math.max(t,i,n),s=Math.min(t,i,n),a=o-s,l=o+s,c=l*.5,d,u;if(s===o){d=0}else if(t===o){d=60*(i-n)/a+360}else if(i===o){d=60*(n-t)/a+120}else{d=60*(t-i)/a+240}if(a===0){u=0}else if(c<=.5){u=a/l}else{u=a/(2-l)}return[Math.round(d)%360,u,c,r==null?1:r]};m.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null){return[null,null,null,e[3]]}var t=e[0]/360,i=e[1],n=e[2],r=e[3],o=n<=.5?n*(1+i):n+i-n*i,s=2*n-o;return[Math.round(S(s,o,t+1/3)*255),Math.round(S(s,o,t)*255),Math.round(S(s,o,t-1/3)*255),r]};y(m,(function(e,t){var i=t.props,n=t.cache,r=t.to,o=t.from;g.fn[e]=function(e){if(r&&!this[n]){this[n]=r(this._rgba)}if(e===undefined){return this[n].slice()}var t,s=w(e),a=s==="array"||s==="object"?e:arguments,l=this[n].slice();y(i,(function(e,t){var i=a[s==="object"?e:t.idx];if(i==null){i=l[t.idx]}l[t.idx]=C(i,t)}));if(o){t=g(o(l));t[n]=l;return t}else{return g(l)}};y(i,(function(t,i){if(g.fn[t]){return}g.fn[t]=function(n){var r,o,s,a,l=w(n);if(t==="alpha"){a=this._hsla?"hsla":"rgba"}else{a=e}r=this[a]();o=r[i.idx];if(l==="undefined"){return o}if(l==="function"){n=n.call(this,o);l=w(n)}if(n==null&&i.empty){return this}if(l==="string"){s=p.exec(n);if(s){n=o+parseFloat(s[2])*(s[1]==="+"?1:-1)}}r[i.idx]=n;return this[a](r)}}))}));g.hook=function(e){var t=e.split(" ");y(t,(function(e,t){c.cssHooks[t]={set:function(e,i){var n;if(i!=="transparent"&&(w(i)!=="string"||(n=_(i)))){i=g(n||i);i=i.toRgbaString()}e.style[t]=i}};c.fx.step[t]=function(e){if(!e.colorInit){e.start=g(e.elem,t);e.end=g(e.end);e.colorInit=true}c.cssHooks[t].set(e.elem,e.start.transition(e.end,e.pos))}}))};g.hook(d);c.cssHooks.borderColor={expand:function(e){var t={};y(["Top","Right","Bottom","Left"],(function(i,n){t["border"+n+"Color"]=e}));return t}};b=c.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};var A="ui-effects-",x="ui-effects-style",E="ui-effects-animated";e.effects={effect:{}};(function(){var t=["add","remove","toggle"],i={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(t,i){e.fx.step[i]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr){c.style(e.elem,i,e.end);e.setAttr=true}}}));function n(e){return e.replace(/-([\da-z])/gi,(function(e,t){return t.toUpperCase()}))}function r(e){var t,i,r=e.ownerDocument.defaultView.getComputedStyle(e),o={};i=r.length;while(i--){t=r[i];if(typeof r[t]==="string"){o[n(t)]=r[t]}}return o}function o(t,n){var r={},o,s;for(o in n){s=n[o];if(t[o]!==s){if(!i[o]){if(e.fx.step[o]||!isNaN(parseFloat(s))){r[o]=s}}}}return r}e.effects.animateClass=function(i,n,s,a){var l=e.speed(n,s,a);return this.queue((function(){var n=e(this),s=n.attr("class")||"",a,c=l.children?n.find("*").addBack():n;c=c.map((function(){var t=e(this);return{el:t,start:r(this)}}));a=function(){e.each(t,(function(e,t){if(i[t]){n[t+"Class"](i[t])}}))};a();c=c.map((function(){this.end=r(this.el[0]);this.diff=o(this.start,this.end);return this}));n.attr("class",s);c=c.map((function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:false,complete:function(){i.resolve(t)}});this.el.animate(this.diff,n);return i.promise()}));e.when.apply(e,c.get()).done((function(){a();e.each(arguments,(function(){var t=this.el;e.each(this.diff,(function(e){t.css(e,"")}))}));l.complete.call(n[0])}))}))};e.fn.extend({addClass:function(t){return function(i,n,r,o){return n?e.effects.animateClass.call(this,{add:i},n,r,o):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,r,o){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,r,o):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,n,r,o,s){if(typeof n==="boolean"||n===undefined){if(!r){return t.apply(this,arguments)}else{return e.effects.animateClass.call(this,n?{add:i}:{remove:i},r,o,s)}}else{return e.effects.animateClass.call(this,{toggle:i},n,r,o)}}}(e.fn.toggleClass),switchClass:function(t,i,n,r,o){return e.effects.animateClass.call(this,{add:i,remove:t},n,r,o)}})})();(function(){if(e.expr&&e.expr.pseudos&&e.expr.pseudos.animated){e.expr.pseudos.animated=function(t){return function(i){return!!e(i).data(E)||t(i)}}(e.expr.pseudos.animated)}if(e.uiBackCompat===true){e.extend(e.effects,{save:function(e,t){var i=0,n=t.length;for(;i<n;i++){if(t[i]!==null){e.data(A+t[i],e[0].style[t[i]])}}},restore:function(e,t){var i,n=0,r=t.length;for(;n<r;n++){if(t[n]!==null){i=e.data(A+t[n]);e.css(t[n],i)}}},setMode:function(e,t){if(t==="toggle"){t=e.is(":hidden")?"show":"hide"}return t},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper")){return t.parent()}var i={width:t.outerWidth(true),height:t.outerHeight(true),float:t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(e){o=document.body}t.wrap(n);if(t[0]===o||e.contains(t[0],o)){e(o).trigger("focus")}n=t.parent();if(t.css("position")==="static"){n.css({position:"relative"});t.css({position:"relative"})}else{e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")});e.each(["top","left","bottom","right"],(function(e,n){i[n]=t.css(n);if(isNaN(parseInt(i[n],10))){i[n]="auto"}}));t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}t.css(r);return n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;if(t.parent().is(".ui-effects-wrapper")){t.parent().replaceWith(t);if(t[0]===i||e.contains(t[0],i)){e(i).trigger("focus")}}return t}})}e.extend(e.effects,{version:"1.14.1",define:function(t,i,n){if(!n){n=i;i="effect"}e.effects.effect[t]=n;e.effects.effect[t].mode=i;return n},scaledDimensions:function(e,t,i){if(t===0){return{height:0,width:0,outerHeight:0,outerWidth:0}}var n=i!=="horizontal"?(t||100)/100:1,r=i!=="vertical"?(t||100)/100:1;return{height:e.height()*r,width:e.width()*n,outerHeight:e.outerHeight()*r,outerWidth:e.outerWidth()*n}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(e,t,i){var n=e.queue();if(t>1){n.splice.apply(n,[1,0].concat(n.splice(t,i)))}e.dequeue()},saveStyle:function(e){e.data(x,e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data(x)||"";e.removeData(x)},mode:function(e,t){var i=e.is(":hidden");if(t==="toggle"){t=i?"show":"hide"}if(i?t==="hide":t==="show"){t="none"}return t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createPlaceholder:function(t){var i,n=t.css("position"),r=t.position();t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight());if(/^(static|relative)/.test(n)){n="absolute";i=e("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder");t.data(A+"placeholder",i)}t.css({position:n,left:r.left,top:r.top});return i},removePlaceholder:function(e){var t=A+"placeholder",i=e.data(t);if(i){i.remove();e.removeData(t)}},cleanUp:function(t){e.effects.restoreStyle(t);e.effects.removePlaceholder(t)},setTransition:function(t,i,n,r){r=r||{};e.each(i,(function(e,i){var o=t.cssUnit(i);if(o[0]>0){r[i]=o[0]*n+o[1]}}));return r}});function t(t,i,n,r){if(e.isPlainObject(t)){i=t;t=t.effect}t={effect:t};if(i==null){i={}}if(typeof i==="function"){r=i;n=null;i={}}if(typeof i==="number"||e.fx.speeds[i]){r=n;n=i;i={}}if(typeof n==="function"){r=n;n=null}if(i){e.extend(t,i)}n=n||i.duration;t.duration=e.fx.off?0:typeof n==="number"?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default;t.complete=r||i.complete;return t}function i(t){if(!t||typeof t==="number"||e.fx.speeds[t]){return true}if(typeof t==="string"&&!e.effects.effect[t]){return true}if(typeof t==="function"){return true}if(typeof t==="object"&&!t.effect){return true}return false}e.fn.extend({effect:function(){var i=t.apply(this,arguments),n=e.effects.effect[i.effect],r=n.mode,o=i.queue,s=o||"fx",a=i.complete,l=i.mode,c=[],d=function(t){var i=e(this),n=e.effects.mode(i,l)||r;i.data(E,true);c.push(n);if(r&&(n==="show"||n===r&&n==="hide")){i.show()}if(!r||n!=="none"){e.effects.saveStyle(i)}if(typeof t==="function"){t()}};if(e.fx.off||!n){if(l){return this[l](i.duration,a)}else{return this.each((function(){if(a){a.call(this)}}))}}function u(t){var o=e(this);function s(){o.removeData(E);e.effects.cleanUp(o);if(i.mode==="hide"){o.hide()}d()}function d(){if(typeof a==="function"){a.call(o[0])}if(typeof t==="function"){t()}}i.mode=c.shift();if(e.uiBackCompat===true&&!r){if(o.is(":hidden")?l==="hide":l==="show"){o[l]();d()}else{n.call(o[0],i,d)}}else{if(i.mode==="none"){o[l]();d()}else{n.call(o[0],i,s)}}}return o===false?this.each(d).each(u):this.queue(s,d).queue(s,u)},show:function(e){return function(n){if(i(n)){return e.apply(this,arguments)}else{var r=t.apply(this,arguments);r.mode="show";return this.effect.call(this,r)}}}(e.fn.show),hide:function(e){return function(n){if(i(n)){return e.apply(this,arguments)}else{var r=t.apply(this,arguments);r.mode="hide";return this.effect.call(this,r)}}}(e.fn.hide),toggle:function(e){return function(n){if(i(n)||typeof n==="boolean"){return e.apply(this,arguments)}else{var r=t.apply(this,arguments);r.mode="toggle";return this.effect.call(this,r)}}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];e.each(["em","px","%","pt"],(function(e,t){if(i.indexOf(t)>0){n=[parseFloat(i),t]}}));return n},cssClip:function(e){if(e){return this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)")}return n(this.css("clip"),this)},transfer:function(t,i){var n=e(this),r=e(t.to),o=r.css("position")==="fixed",s=e("body"),a=o?s.scrollTop():0,l=o?s.scrollLeft():0,c=r.offset(),d={top:c.top-a,left:c.left-l,height:r.innerHeight(),width:r.innerWidth()},u=n.offset(),h=e("<div class='ui-effects-transfer'></div>");h.appendTo("body").addClass(t.className).css({top:u.top-a,left:u.left-l,height:n.innerHeight(),width:n.innerWidth(),position:o?"fixed":"absolute"}).animate(d,t.duration,t.easing,(function(){h.remove();if(typeof i==="function"){i()}}))}});function n(e,t){var i=t.outerWidth(),n=t.outerHeight(),r=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,o=r.exec(e)||["",0,i,n,0];return{top:parseFloat(o[1])||0,right:o[2]==="auto"?i:parseFloat(o[2]),bottom:o[3]==="auto"?n:parseFloat(o[3]),left:parseFloat(o[4])||0}}e.fx.step.clip=function(t){if(!t.clipInit){t.start=e(t.elem).cssClip();if(typeof t.end==="string"){t.end=n(t.end,t.elem)}t.clipInit=true}e(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}})();(function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],(function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}));e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,i=4;while(e<((t=Math.pow(2,--i))-1)/11){}return 1/Math.pow(4,3-i)-7.5625*Math.pow((t*3-2)/22-e,2)}});e.each(t,(function(t,i){e.easing["easeIn"+t]=i;e.easing["easeOut"+t]=function(e){return 1-i(1-e)};e.easing["easeInOut"+t]=function(e){return e<.5?i(e*2)/2:1-i(e*-2+2)/2}}))})();var T=e.effects;var D=e.effects.define("blind","hide",(function(t,i){var n={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},r=e(this),o=t.direction||"up",s=r.cssClip(),a={clip:e.extend({},s)},l=e.effects.createPlaceholder(r);a.clip[n[o][0]]=a.clip[n[o][1]];if(t.mode==="show"){r.cssClip(a.clip);if(l){l.css(e.effects.clipToBox(a))}a.clip=s}if(l){l.animate(e.effects.clipToBox(a),t.duration,t.easing)}r.animate(a,{queue:false,duration:t.duration,easing:t.easing,complete:i})}));var M=e.effects.define("bounce",(function(t,i){var n,r,o,s=e(this),a=t.mode,l=a==="hide",c=a==="show",d=t.direction||"up",u=t.distance,h=t.times||5,p=h*2+(c||l?1:0),f=t.duration/p,g=t.easing,m=d==="up"||d==="down"?"top":"left",v=d==="up"||d==="left",b=0,y=s.queue().length;e.effects.createPlaceholder(s);o=s.css(m);if(!u){u=s[m==="top"?"outerHeight":"outerWidth"]()/3}if(c){r={opacity:1};r[m]=o;s.css("opacity",0).css(m,v?-u*2:u*2).animate(r,f,g)}if(l){u=u/Math.pow(2,h-1)}r={};r[m]=o;for(;b<h;b++){n={};n[m]=(v?"-=":"+=")+u;s.animate(n,f,g).animate(r,f,g);u=l?u*2:u/2}if(l){n={opacity:0};n[m]=(v?"-=":"+=")+u;s.animate(n,f,g)}s.queue(i);e.effects.unshift(s,y,p+1)}));var k=e.effects.define("clip","hide",(function(t,i){var n,r={},o=e(this),s=t.direction||"vertical",a=s==="both",l=a||s==="horizontal",c=a||s==="vertical";n=o.cssClip();r.clip={top:c?(n.bottom-n.top)/2:n.top,right:l?(n.right-n.left)/2:n.right,bottom:c?(n.bottom-n.top)/2:n.bottom,left:l?(n.right-n.left)/2:n.left};e.effects.createPlaceholder(o);if(t.mode==="show"){o.cssClip(r.clip);r.clip=n}o.animate(r,{queue:false,duration:t.duration,easing:t.easing,complete:i})}));var P=e.effects.define("drop","hide",(function(t,i){var n,r=e(this),o=t.mode,s=o==="show",a=t.direction||"left",l=a==="up"||a==="down"?"top":"left",c=a==="up"||a==="left"?"-=":"+=",d=c==="+="?"-=":"+=",u={opacity:0};e.effects.createPlaceholder(r);n=t.distance||r[l==="top"?"outerHeight":"outerWidth"](true)/2;u[l]=c+n;if(s){r.css(u);u[l]=d+n;u.opacity=1}r.animate(u,{queue:false,duration:t.duration,easing:t.easing,complete:i})}));var R=e.effects.define("explode","hide",(function(t,i){var n,r,o,s,a,l,c=t.pieces?Math.round(Math.sqrt(t.pieces)):3,d=c,u=e(this),h=t.mode,p=h==="show",f=u.show().css("visibility","hidden").offset(),g=Math.ceil(u.outerWidth()/d),m=Math.ceil(u.outerHeight()/c),v=[];function b(){v.push(this);if(v.length===c*d){y()}}for(n=0;n<c;n++){s=f.top+n*m;l=n-(c-1)/2;for(r=0;r<d;r++){o=f.left+r*g;a=r-(d-1)/2;u.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-r*g,top:-n*m}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g,height:m,left:o+(p?a*g:0),top:s+(p?l*m:0),opacity:p?0:1}).animate({left:o+(p?0:a*g),top:s+(p?0:l*m),opacity:p?1:0},t.duration||500,t.easing,b)}}function y(){u.css({visibility:"visible"});e(v).remove();i()}}));var I=e.effects.define("fade","toggle",(function(t,i){var n=t.mode==="show";e(this).css("opacity",n?0:1).animate({opacity:n?1:0},{queue:false,duration:t.duration,easing:t.easing,complete:i})}));var O=e.effects.define("fold","hide",(function(t,i){var n=e(this),r=t.mode,o=r==="show",s=r==="hide",a=t.size||15,l=/([0-9]+)%/.exec(a),c=!!t.horizFirst,d=c?["right","bottom"]:["bottom","right"],u=t.duration/2,h=e.effects.createPlaceholder(n),p=n.cssClip(),f={clip:e.extend({},p)},g={clip:e.extend({},p)},m=[p[d[0]],p[d[1]]],v=n.queue().length;if(l){a=parseInt(l[1],10)/100*m[s?0:1]}f.clip[d[0]]=a;g.clip[d[0]]=a;g.clip[d[1]]=0;if(o){n.cssClip(g.clip);if(h){h.css(e.effects.clipToBox(g))}g.clip=p}n.queue((function(i){if(h){h.animate(e.effects.clipToBox(f),u,t.easing).animate(e.effects.clipToBox(g),u,t.easing)}i()})).animate(f,u,t.easing).animate(g,u,t.easing).queue(i);e.effects.unshift(n,v,4)}));var N=e.effects.define("highlight","show",(function(t,i){var n=e(this),r={backgroundColor:n.css("backgroundColor")};if(t.mode==="hide"){r.opacity=0}e.effects.saveStyle(n);n.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(r,{queue:false,duration:t.duration,easing:t.easing,complete:i})}));var L=e.effects.define("size",(function(t,i){var n,r,o,s=e(this),a=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],d=t.mode,u=d!=="effect",h=t.scale||"both",p=t.origin||["middle","center"],f=s.css("position"),g=s.position(),m=e.effects.scaledDimensions(s),v=t.from||m,b=t.to||e.effects.scaledDimensions(s,0);e.effects.createPlaceholder(s);if(d==="show"){o=v;v=b;b=o}r={from:{y:v.height/m.height,x:v.width/m.width},to:{y:b.height/m.height,x:b.width/m.width}};if(h==="box"||h==="both"){if(r.from.y!==r.to.y){v=e.effects.setTransition(s,l,r.from.y,v);b=e.effects.setTransition(s,l,r.to.y,b)}if(r.from.x!==r.to.x){v=e.effects.setTransition(s,c,r.from.x,v);b=e.effects.setTransition(s,c,r.to.x,b)}}if(h==="content"||h==="both"){if(r.from.y!==r.to.y){v=e.effects.setTransition(s,a,r.from.y,v);b=e.effects.setTransition(s,a,r.to.y,b)}}if(p){n=e.effects.getBaseline(p,m);v.top=(m.outerHeight-v.outerHeight)*n.y+g.top;v.left=(m.outerWidth-v.outerWidth)*n.x+g.left;b.top=(m.outerHeight-b.outerHeight)*n.y+g.top;b.left=(m.outerWidth-b.outerWidth)*n.x+g.left}delete v.outerHeight;delete v.outerWidth;s.css(v);if(h==="content"||h==="both"){l=l.concat(["marginTop","marginBottom"]).concat(a);c=c.concat(["marginLeft","marginRight"]);s.find("*[width]").each((function(){var i=e(this),n=e.effects.scaledDimensions(i),o={height:n.height*r.from.y,width:n.width*r.from.x,outerHeight:n.outerHeight*r.from.y,outerWidth:n.outerWidth*r.from.x},s={height:n.height*r.to.y,width:n.width*r.to.x,outerHeight:n.height*r.to.y,outerWidth:n.width*r.to.x};if(r.from.y!==r.to.y){o=e.effects.setTransition(i,l,r.from.y,o);s=e.effects.setTransition(i,l,r.to.y,s)}if(r.from.x!==r.to.x){o=e.effects.setTransition(i,c,r.from.x,o);s=e.effects.setTransition(i,c,r.to.x,s)}if(u){e.effects.saveStyle(i)}i.css(o);i.animate(s,t.duration,t.easing,(function(){if(u){e.effects.restoreStyle(i)}}))}))}s.animate(b,{queue:false,duration:t.duration,easing:t.easing,complete:function(){var t=s.offset();if(b.opacity===0){s.css("opacity",v.opacity)}if(!u){s.css("position",f==="static"?"relative":f).offset(t);e.effects.saveStyle(s)}i()}})}));var F=e.effects.define("scale",(function(t,i){var n=e(this),r=t.mode,o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:r!=="effect"?0:100),s=e.extend(true,{from:e.effects.scaledDimensions(n),to:e.effects.scaledDimensions(n,o,t.direction||"both"),origin:t.origin||["middle","center"]},t);if(t.fade){s.from.opacity=1;s.to.opacity=0}e.effects.effect.size.call(this,s,i)}));var $=e.effects.define("puff","hide",(function(t,i){var n=e.extend(true,{},t,{fade:true,percent:parseInt(t.percent,10)||150});e.effects.effect.scale.call(this,n,i)}));var G=e.effects.define("pulsate","show",(function(t,i){var n=e(this),r=t.mode,o=r==="show",s=r==="hide",a=o||s,l=(t.times||5)*2+(a?1:0),c=t.duration/l,d=0,u=1,h=n.queue().length;if(o||!n.is(":visible")){n.css("opacity",0).show();d=1}for(;u<l;u++){n.animate({opacity:d},c,t.easing);d=1-d}n.animate({opacity:d},c,t.easing);n.queue(i);e.effects.unshift(n,h,l+1)}));var B=e.effects.define("shake",(function(t,i){var n=1,r=e(this),o=t.direction||"left",s=t.distance||20,a=t.times||3,l=a*2+1,c=Math.round(t.duration/l),d=o==="up"||o==="down"?"top":"left",u=o==="up"||o==="left",h={},p={},f={},g=r.queue().length;e.effects.createPlaceholder(r);h[d]=(u?"-=":"+=")+s;p[d]=(u?"+=":"-=")+s*2;f[d]=(u?"-=":"+=")+s*2;r.animate(h,c,t.easing);for(;n<a;n++){r.animate(p,c,t.easing).animate(f,c,t.easing)}r.animate(p,c,t.easing).animate(h,c/2,t.easing).queue(i);e.effects.unshift(r,g,l+1)}));var H=e.effects.define("slide","show",(function(t,i){var n,r,o=e(this),s={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},a=t.mode,l=t.direction||"left",c=l==="up"||l==="down"?"top":"left",d=l==="up"||l==="left",u=t.distance||o[c==="top"?"outerHeight":"outerWidth"](true),h={};e.effects.createPlaceholder(o);n=o.cssClip();r=o.position()[c];h[c]=(d?-1:1)*u+r;h.clip=o.cssClip();h.clip[s[l][1]]=h.clip[s[l][0]];if(a==="show"){o.cssClip(h.clip);o.css(c,h[c]);h.clip=n;h[c]=r}o.animate(h,{queue:false,duration:t.duration,easing:t.easing,complete:i})}));var T;if(e.uiBackCompat===true){T=e.effects.define("transfer",(function(t,i){e(this).transfer(t,i)}))}var z=T;e.ui.focusable=function(t,i){var n,r,o,s,a,l=t.nodeName.toLowerCase();if("area"===l){n=t.parentNode;r=n.name;if(!t.href||!r||n.nodeName.toLowerCase()!=="map"){return false}o=e("img[usemap='#"+r+"']");return o.length>0&&o.is(":visible")}if(/^(input|select|textarea|button|object)$/.test(l)){s=!t.disabled;if(s){a=e(t).closest("fieldset")[0];if(a){s=!a.disabled}}}else if("a"===l){s=t.href||i}else{s=i}return s&&e(t).is(":visible")&&e(t).css("visibility")==="visible"};e.extend(e.expr.pseudos,{focusable:function(t){return e.ui.focusable(t,e.attr(t,"tabindex")!=null)}});var W=e.ui.focusable;var V=e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout((function(){var i=t.data("ui-form-reset-instances");e.each(i,(function(){this.refresh()}))}))},_bindFormResetHandler:function(){this.form=e(this.element.prop("form"));if(!this.form.length){return}var t=this.form.data("ui-form-reset-instances")||[];if(!t.length){this.form.on("reset.ui-form-reset",this._formResetHandler)}t.push(this);this.form.data("ui-form-reset-instances",t)},_unbindFormResetHandler:function(){if(!this.form.length){return}var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1);if(t.length){this.form.data("ui-form-reset-instances",t)}else{this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};if(!e.escapeSelector){e.escapeSelector=function(e){return CSS.escape(e+"")}}if(!e.fn.even||!e.fn.odd){e.fn.extend({even:function(){return this.filter((function(e){return e%2===0}))},odd:function(){return this.filter((function(e){return e%2===1}))}})}var j=e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};var U=e.fn.labels=function(){var e,t,i,n,r;if(!this.length){return this.pushStack([])}if(this[0].labels&&this[0].labels.length){return this.pushStack(this[0].labels)}n=this.eq(0).parents("label");i=this.attr("id");if(i){e=this.eq(0).parents().last();r=e.add(e.length?e.siblings():this.siblings());t="label[for='"+CSS.escape(i)+"']";n=n.add(r.find(t).addBack(t))}return this.pushStack(n)};var Y=e.fn.scrollParent=function(t){var i=this.css("position"),n=i==="absolute",r=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter((function(){var t=e(this);if(n&&t.css("position")==="static"){return false}return r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))})).eq(0);return i==="fixed"||!o.length?e(this[0].ownerDocument||document):o};var q=e.extend(e.expr.pseudos,{tabbable:function(t){var i=e.attr(t,"tabindex"),n=i!=null;return(!n||i>=0)&&e.ui.focusable(t,n)}});var K=e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each((function(){if(!this.id){this.id="ui-id-"+ ++e}}))}}(),removeUniqueId:function(){return this.each((function(){if(/^ui-id-\d+$/.test(this.id)){e(this).removeAttr("id")}}))}});var X=e.widget("ui.accordion",{version:"1.14.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:false,event:"click",header:function(e){return e.find("> li > :first-child").add(e.find("> :not(li)").filter((function(e){return e%2===0})))},heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e();this._addClass("ui-accordion","ui-widget ui-helper-reset");this.element.attr("role","tablist");if(!t.collapsible&&(t.active===false||t.active==null)){t.active=0}this._processPanels();if(t.active<0){t.active+=this.headers.length}this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:!this.active.length?e():this.active.next()}},_createIcons:function(){var t,i,n=this.options.icons;if(n){t=e("<span>");this._addClass(t,"ui-accordion-header-icon","ui-icon "+n.header);t.prependTo(this.headers);i=this.active.children(".ui-accordion-header-icon");this._removeClass(i,n.header)._addClass(i,null,n.activeHeader)._addClass(this.headers,"ui-accordion-icons")}},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons");this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeAttr("role");this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId();this._destroyIcons();e=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId();if(this.options.heightStyle!=="content"){e.css("height","")}},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="event"){if(this.options.event){this._off(this.headers,this.options.event)}this._setupEvents(t)}this._super(e,t);if(e==="collapsible"&&!t&&this.options.active===false){this._activate(0)}if(e==="icons"){this._destroyIcons();if(t){this._createIcons()}}},_setOptionDisabled:function(e){this._super(e);this.element.attr("aria-disabled",e);this._toggleClass(null,"ui-state-disabled",!!e)},_keydown:function(t){if(t.altKey||t.ctrlKey){return}var i=e.ui.keyCode,n=this.headers.length,r=this.headers.index(t.target),o=false;switch(t.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(r+1)%n];break;case i.LEFT:case i.UP:o=this.headers[(r-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[n-1];break}if(o){e(t.target).attr("tabIndex",-1);e(o).attr("tabIndex",0);e(o).trigger("focus");t.preventDefault()}},_panelKeyDown:function(t){if(t.keyCode===e.ui.keyCode.UP&&t.ctrlKey){e(t.currentTarget).prev().trigger("focus")}},refresh:function(){var t=this.options;this._processPanels();if(t.active===false&&t.collapsible===true||!this.headers.length){t.active=false;this.active=e()}else if(t.active===false){this._activate(0)}else if(this.active.length&&!e.contains(this.element[0],this.active[0])){if(this.headers.length===this.headers.find(".ui-state-disabled").length){t.active=false;this.active=e()}else{this._activate(Math.max(0,t.active-1))}}else{t.active=this.headers.index(this.active)}this._destroyIcons();this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;if(typeof this.options.header==="function"){this.headers=this.options.header(this.element)}else{this.headers=this.element.find(this.options.header)}this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default");this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide();this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content");if(t){this._off(e.not(this.headers));this._off(t.not(this.panels))}},_refresh:function(){var t,i=this.options,n=i.heightStyle,r=this.element.parent();this.active=this._findActive(i.active);this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed");this._addClass(this.active.next(),"ui-accordion-content-active");this.active.next().show();this.headers.attr("role","tab").each((function(){var t=e(this),i=t.uniqueId().attr("id"),n=t.next(),r=n.uniqueId().attr("id");t.attr("aria-controls",r);n.attr("aria-labelledby",i)})).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex",0)}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"})}this._createIcons();this._setupEvents(i.event);if(n==="fill"){t=r.height();this.element.siblings(":visible").each((function(){var i=e(this),n=i.css("position");if(n==="absolute"||n==="fixed"){return}t-=i.outerHeight(true)}));this.headers.each((function(){t-=e(this).outerHeight(true)}));this.headers.next().each((function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")}else if(n==="auto"){t=0;this.headers.next().each((function(){var i=e(this).is(":visible");if(!i){e(this).show()}t=Math.max(t,e(this).css("height","").height());if(!i){e(this).hide()}})).height(t)}},_activate:function(t){var i=this._findActive(t)[0];if(i===this.active[0]){return}i=i||this.active[0];this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop})},_findActive:function(t){return typeof t==="number"?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};if(t){e.each(t.split(" "),(function(e,t){i[t]="_eventHandler"}))}this._off(this.headers.add(this.headers.next()));this._on(this.headers,i);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(t){var i,n,r=this.options,o=this.active,s=e(t.currentTarget),a=s[0]===o[0],l=a&&r.collapsible,c=l?e():s.next(),d=o.next(),u={oldHeader:o,oldPanel:d,newHeader:l?e():s,newPanel:c};t.preventDefault();if(a&&!r.collapsible||this._trigger("beforeActivate",t,u)===false){return}r.active=l?false:this.headers.index(s);this.active=a?e():s;this._toggle(u);this._removeClass(o,"ui-accordion-header-active","ui-state-active");if(r.icons){i=o.children(".ui-accordion-header-icon");this._removeClass(i,null,r.icons.activeHeader)._addClass(i,null,r.icons.header)}if(!a){this._removeClass(s,"ui-accordion-header-collapsed")._addClass(s,"ui-accordion-header-active","ui-state-active");if(r.icons){n=s.children(".ui-accordion-header-icon");this._removeClass(n,null,r.icons.header)._addClass(n,null,r.icons.activeHeader)}this._addClass(s.next(),"ui-accordion-content-active")}},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=i;this.prevHide=n;if(this.options.animate){this._animate(i,n,t)}else{n.hide();i.show();this._toggleComplete(t)}n.attr({"aria-hidden":"true"});n.prev().attr({"aria-selected":"false","aria-expanded":"false"});if(i.length&&n.length){n.prev().attr({tabIndex:-1,"aria-expanded":"false"})}else if(i.length){this.headers.filter((function(){return parseInt(e(this).attr("tabIndex"),10)===0})).attr("tabIndex",-1)}i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,i){var n,r,o,s=this,a=0,l=e.css("box-sizing"),c=e.length&&(!t.length||e.index()<t.index()),d=this.options.animate||{},u=c&&d.down||d,h=function(){s._toggleComplete(i)};if(typeof u==="number"){o=u}if(typeof u==="string"){r=u}r=r||u.easing||d.easing;o=o||u.duration||d.duration;if(!t.length){return e.animate(this.showProps,o,r,h)}if(!e.length){return t.animate(this.hideProps,o,r,h)}n=e.show().outerHeight();t.animate(this.hideProps,{duration:o,easing:r,step:function(e,t){t.now=Math.round(e)}});e.hide().animate(this.showProps,{duration:o,easing:r,complete:h,step:function(e,i){i.now=Math.round(e);if(i.prop!=="height"){if(l==="content-box"){a+=i.now}}else if(s.options.heightStyle!=="content"){i.now=Math.round(n-t.outerHeight()-a);a=0}}})},_toggleComplete:function(e){var t=e.oldPanel,i=t.prev();this._removeClass(t,"ui-accordion-content-active");this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed");this._trigger("activate",null,e)}});var Z=e.widget("ui.menu",{version:"1.14.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.lastMousePosition={x:null,y:null};this.element.uniqueId().attr({role:this.options.role,tabIndex:0});this._addClass("ui-menu","ui-widget ui-widget-content");this._on({"mousedown .ui-menu-item":function(e){e.preventDefault();this._activateItem(e)},"click .ui-menu-item":function(t){var i=e(t.target);var n=e(this.document[0].activeElement);if(!this.mouseHandled&&i.not(".ui-state-disabled").length){this.select(t);if(!t.isPropagationStopped()){this.mouseHandled=true}if(i.has(".ui-menu").length){this.expand(t)}else if(!this.element.is(":focus")&&n.closest(".ui-menu").length){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer)}}}},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this._menuItems().first();if(!t){this.focus(e,i)}},blur:function(t){this._delay((function(){var i=!e.contains(this.element[0],this.document[0].activeElement);if(i){this.collapseAll(t)}}))},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(e){if(this._closeOnDocumentClick(e)){this.collapseAll(e,true)}this.mouseHandled=false}})},_activateItem:function(t){if(this.previousFilter){return}if(t.clientX===this.lastMousePosition.x&&t.clientY===this.lastMousePosition.y){return}this.lastMousePosition={x:t.clientX,y:t.clientY};var i=e(t.target).closest(".ui-menu-item"),n=e(t.currentTarget);if(i[0]!==n[0]){return}if(n.is(".ui-state-active")){return}this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active");this.focus(t,n)},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),i=t.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled "+"tabIndex").removeUniqueId().show();i.children().each((function(){var t=e(this);if(t.data("ui-menu-submenu-caret")){t.remove()}}))},_keydown:function(t){var i,n,r,o,s=true;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(t)}break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=false;n=this.previousFilter||"";o=false;r=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode);clearTimeout(this.filterTimer);if(r===n){o=true}else{r=n+r}i=this._filterMenuItems(r);i=o&&i.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):i;if(!i.length){r=String.fromCharCode(t.keyCode);i=this._filterMenuItems(r)}if(i.length){this.focus(t,i);this.previousFilter=r;this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)}else{delete this.previousFilter}}if(s){t.preventDefault()}},_activate:function(e){if(this.active&&!this.active.is(".ui-state-disabled")){if(this.active.children("[aria-haspopup='true']").length){this.expand(e)}else{this.select(e)}}},refresh:function(){var t,i,n,r,o,s=this,a=this.options.icons.submenu,l=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length);n=l.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),i=t.prev(),n=e("<span>").data("ui-menu-submenu-caret",true);s._addClass(n,"ui-menu-icon","ui-icon "+a);i.attr("aria-haspopup","true").prepend(n);t.attr("aria-labelledby",i.attr("id"))}));this._addClass(n,"ui-menu","ui-widget ui-widget-content ui-front");t=l.add(this.element);i=t.find(this.options.items);i.not(".ui-menu-item").each((function(){var t=e(this);if(s._isDivider(t)){s._addClass(t,"ui-menu-divider","ui-widget-content")}}));r=i.not(".ui-menu-item, .ui-menu-divider");o=r.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()});this._addClass(r,"ui-menu-item")._addClass(o,"ui-menu-item-wrapper");i.filter(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!e.contains(this.element[0],this.active[0])){this.blur()}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if(e==="icons"){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e);this.element.attr("aria-disabled",String(e));this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var i,n,r;this.blur(e,e&&e.type==="focus");this._scrollIntoView(t);this.active=t.first();n=this.active.children(".ui-menu-item-wrapper");this._addClass(n,null,"ui-state-active");if(this.options.role){this.element.attr("aria-activedescendant",n.attr("id"))}r=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper");this._addClass(r,null,"ui-state-active");if(e&&e.type==="keydown"){this._close()}else{this.timer=this._delay((function(){this._close()}),this.delay)}i=t.children(".ui-menu");if(i.length&&e&&/^mouse/.test(e.type)){this._startOpening(i)}this.activeMenu=t.parent();this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,r,o,s,a;if(this._hasScroll()){i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0;n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0;r=t.offset().top-this.activeMenu.offset().top-i-n;o=this.activeMenu.scrollTop();s=this.activeMenu.height();a=t.outerHeight();if(r<0){this.activeMenu.scrollTop(o+r)}else if(r+a>s){this.activeMenu.scrollTop(o+r-s+a)}}},blur:function(e,t){if(!t){clearTimeout(this.timer)}if(!this.active){return}this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active");this._trigger("blur",e,{item:this.active});this.active=null},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true"){return}this.timer=this._delay((function(){this._close();this._open(e)}),this.delay)},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true");t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer);this.timer=this._delay((function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));if(!n.length){n=this.element}this._close(n);this.blur(t);this._removeClass(n.find(".ui-state-active"),null,"ui-state-active");this.activeMenu=n}),i?0:this.delay)},_close:function(e){if(!e){e=this.active?this.active.parent():this.element}e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(t&&t.length){this._close();this.focus(e,t)}},expand:function(e){var t=this.active&&this._menuItems(this.active.children(".ui-menu")).first();if(t&&t.length){this._open(t.parent());this._delay((function(){this.focus(e,t)}))}},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_menuItems:function(e){return(e||this.element).find(this.options.items).filter(".ui-menu-item")},_move:function(e,t,i){var n;if(this.active){if(e==="first"||e==="last"){n=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").last()}else{n=this.active[e+"All"](".ui-menu-item").first()}}if(!n||!n.length||!this.active){n=this._menuItems(this.activeMenu)[t]()}this.focus(i,n)},nextPage:function(t){var i,n,r;if(!this.active){this.next(t);return}if(this.isLastItem()){return}if(this._hasScroll()){n=this.active.offset().top;r=this.element.innerHeight();if(e.fn.jquery.indexOf("3.2.")===0){r+=this.element[0].offsetHeight-this.element.outerHeight()}this.active.nextAll(".ui-menu-item").each((function(){i=e(this);return i.offset().top-n-r<0}));this.focus(t,i)}else{this.focus(t,this._menuItems(this.activeMenu)[!this.active?"first":"last"]())}},previousPage:function(t){var i,n,r;if(!this.active){this.next(t);return}if(this.isFirstItem()){return}if(this._hasScroll()){n=this.active.offset().top;r=this.element.innerHeight();if(e.fn.jquery.indexOf("3.2.")===0){r+=this.element[0].offsetHeight-this.element.outerHeight()}this.active.prevAll(".ui-menu-item").each((function(){i=e(this);return i.offset().top-n+r>0}));this.focus(t,i)}else{this.focus(t,this._menuItems(this.activeMenu).first())}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(t,true)}this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return n.test(String.prototype.trim.call(e(this).children(".ui-menu-item-wrapper").text()))}))}});e.widget("ui.autocomplete",{version:"1.14.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var t,i,n,r=this.element[0].nodeName.toLowerCase(),o=r==="textarea",s=r==="input";this.isMultiLine=o||!s&&this.element.prop("contentEditable")==="true";this.valueMethod=this.element[o||s?"val":"text"];this.isNewMenu=true;this._addClass("ui-autocomplete-input");this.element.attr("autocomplete","off");this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly")){t=true;n=true;i=true;return}t=false;n=false;i=false;var o=e.ui.keyCode;switch(r.keyCode){case o.PAGE_UP:t=true;this._move("previousPage",r);break;case o.PAGE_DOWN:t=true;this._move("nextPage",r);break;case o.UP:t=true;this._keyEvent("previous",r);break;case o.DOWN:t=true;this._keyEvent("next",r);break;case o.ENTER:if(this.menu.active){t=true;r.preventDefault();this.menu.select(r)}break;case o.TAB:if(this.menu.active){this.menu.select(r)}break;case o.ESCAPE:if(this.menu.element.is(":visible")){if(!this.isMultiLine){this._value(this.term)}this.close(r);r.preventDefault()}break;default:i=true;this._searchTimeout(r);break}},keypress:function(n){if(t){t=false;if(!this.isMultiLine||this.menu.element.is(":visible")){n.preventDefault()}return}if(i){return}var r=e.ui.keyCode;switch(n.keyCode){case r.PAGE_UP:this._move("previousPage",n);break;case r.PAGE_DOWN:this._move("nextPage",n);break;case r.UP:this._keyEvent("previous",n);break;case r.DOWN:this._keyEvent("next",n);break}},input:function(e){if(n){n=false;e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(e){clearTimeout(this.searching);this.close(e);this._change(e)}});this._initSource();this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._addClass(this.menu.element,"ui-autocomplete","ui-front");this._on(this.menu.element,{mousedown:function(e){e.preventDefault()},menufocus:function(t,i){var n,r;if(this.isNewMenu){this.isNewMenu=false;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur();this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));return}}r=i.item.data("ui-autocomplete-item");if(false!==this._trigger("focus",t,{item:r})){if(t.originalEvent&&/^key/.test(t.originalEvent.type)){this._value(r.value)}}n=i.item.attr("aria-label")||r.value;if(n&&String.prototype.trim.call(n).length){clearTimeout(this.liveRegionTimer);this.liveRegionTimer=this._delay((function(){this.liveRegion.html(e("<div>").text(n))}),100)}},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.trigger("focus");this.previous=n}if(false!==this._trigger("select",e,{item:i})){this._value(i.value)}this.term=this._value();this.close(e);this.selectedItem=i}});this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t);if(e==="source"){this._initSource()}if(e==="appendTo"){this.menu.element.appendTo(this._appendTo())}if(e==="disabled"&&t&&this.xhr){this.xhr.abort()}},_isEventTargetInWidget:function(t){var i=this.menu.element[0];return t.target===this.element[0]||t.target===i||e.contains(i,t.target)},_closeOnClickOutside:function(e){if(!this._isEventTargetInWidget(e)){this.close()}},_appendTo:function(){var t=this.options.appendTo;if(t){t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)}if(!t||!t[0]){t=this.element.closest(".ui-front, dialog")}if(!t.length){t=this.document[0].body}return t},_initSource:function(){var t,i,n=this;if(Array.isArray(this.options.source)){t=this.options.source;this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}}else if(typeof this.options.source==="string"){i=this.options.source;this.source=function(t,r){if(n.xhr){n.xhr.abort()}n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){r(e)},error:function(){r([])}})}}else{this.source=this.options.source}},_searchTimeout:function(e){clearTimeout(this.searching);this.searching=this._delay((function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),n=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(!t||t&&!i&&!n){this.selectedItem=null;this.search(null,e)}}),this.options.delay)},search:function(e,t){e=e!=null?e:this._value();this.term=this._value();if(e.length<this.options.minLength){return this.close(t)}if(this._trigger("search",t)===false){return}return this._search(e)},_search:function(e){this.pending++;this._addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:e},this._response())},_response:function(){var e=++this.requestIndex;return function(t){if(e===this.requestIndex){this.__response(t)}this.pending--;if(!this.pending){this._removeClass("ui-autocomplete-loading")}}.bind(this)},__response:function(e){if(e){e=this._normalize(e)}this._trigger("response",null,{content:e});if(!this.options.disabled&&e&&e.length&&!this.cancelSearch){this._suggest(e);this._trigger("open")}else{this._close()}},close:function(e){this.cancelSearch=true;this._close(e)},_close:function(e){this._off(this.document,"mousedown");if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",e)}},_change:function(e){if(this.previous!==this._value()){this._trigger("change",e,{item:this.selectedItem})}},_normalize:function(t){if(t.length&&t[0].label&&t[0].value){return t}return e.map(t,(function(t){if(typeof t==="string"){return{label:t,value:t}}return e.extend({},t,{label:t.label||t.value,value:t.value||t.label})}))},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t);this.isNewMenu=true;this.menu.refresh();i.show();this._resizeMenu();i.position(e.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next()}this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,(function(e,i){n._renderItemData(t,i)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<div>").text(i.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){if(!this.isMultiLine){this._value(this.term)}this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(e,t);t.preventDefault()}}});e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,(function(e){return n.test(e.label||e.value||e)}))}});e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return}if(t&&t.length){i=this.options.messages.results(t.length)}else{i=this.options.messages.noResults}clearTimeout(this.liveRegionTimer);this.liveRegionTimer=this._delay((function(){this.liveRegion.html(e("<div>").text(i))}),100)}});var Q=e.ui.autocomplete;var J=/ui-corner-([a-z]){2,6}/g;var ee=e.widget("ui.controlgroup",{version:"1.14.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:true,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar");this.refresh()},_destroy:function(){this._callChildMethod("destroy");this.childWidgets.removeData("ui-controlgroup-data");this.element.removeAttr("role");if(this.options.items.controlgroupLabel){this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()}},_initWidgets:function(){var t=this,i=[];e.each(this.options.items,(function(n,r){var o;var s={};if(!r){return}if(n==="controlgroupLabel"){o=t.element.find(r);o.each((function(){var t=e(this);if(t.children(".ui-controlgroup-label-contents").length){return}t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}));t._addClass(o,null,"ui-widget ui-widget-content ui-state-default");i=i.concat(o.get());return}if(!e.fn[n]){return}if(t["_"+n+"Options"]){s=t["_"+n+"Options"]("middle")}else{s={classes:{}}}t.element.find(r).each((function(){var r=e(this);var o=r[n]("instance");var a=e.widget.extend({},s);if(n==="button"&&r.parent(".ui-spinner").length){return}if(!o){o=r[n]()[n]("instance")}if(o){a.classes=t._resolveClassesValues(a.classes,o)}r[n](a);var l=r[n]("widget");e.data(l[0],"ui-controlgroup-data",o?o:r[n]("instance"));i.push(l[0])}))}));this.childWidgets=e(e.uniqueSort(i));this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each((function(){var i=e(this),n=i.data("ui-controlgroup-data");if(n&&n[t]){n[t]()}}))},_updateCornerClass:function(e,t){var i="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all";var n=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,i);this._addClass(e,null,n)},_buildSimpleOptions:function(e,t){var i=this.options.direction==="vertical";var n={classes:{}};n.classes[t]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[e];return n},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");t.classes["ui-spinner-up"]="";t.classes["ui-spinner-down"]="";return t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t=this.options.direction==="vertical";return{width:t?"auto":false,classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(t,i){var n={};e.each(t,(function(e){var r=i.options.classes[e]||"";r=String.prototype.trim.call(r.replace(J,""));n[e]=(r+" "+t[e]).replace(/\s+/g," ")}));return n},_setOption:function(e,t){if(e==="direction"){this._removeClass("ui-controlgroup-"+this.options.direction)}this._super(e,t);if(e==="disabled"){this._callChildMethod(t?"disable":"enable");return}this.refresh()},refresh:function(){var t,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction);if(this.options.direction==="horizontal"){this._addClass(null,"ui-helper-clearfix")}this._initWidgets();t=this.childWidgets;if(this.options.onlyVisible){t=t.filter(":visible")}if(t.length){e.each(["first","last"],(function(e,n){var r=t[n]().data("ui-controlgroup-data");if(r&&i["_"+r.widgetName+"Options"]){var o=i["_"+r.widgetName+"Options"](t.length===1?"only":n);o.classes=i._resolveClassesValues(o.classes,r);r.element[r.widgetName](o)}else{i._updateCornerClass(t[n](),n)}}));this._callChildMethod("refresh")}}});e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.14.1",options:{disabled:null,label:null,icon:true,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,i,n;var r=this._super()||{};this._readType();i=this.element.labels();this.label=e(i[i.length-1]);if(!this.label.length){e.error("No label found for checkboxradio widget")}this.originalLabel="";n=this.label.contents().not(this.element[0]);if(n.length){this.originalLabel+=n.clone().wrapAll("<div></div>").parent().html()}if(this.originalLabel){r.label=this.originalLabel}t=this.element[0].disabled;if(t!=null){r.disabled=t}return r},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler();if(this.options.disabled==null){this.options.disabled=this.element[0].disabled}this._setOption("disabled",this.options.disabled);this._addClass("ui-checkboxradio","ui-helper-hidden-accessible");this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget");if(this.type==="radio"){this._addClass(this.label,"ui-checkboxradio-radio-label")}if(this.options.label&&this.options.label!==this.originalLabel){this._updateLabel()}else if(this.originalLabel){this.options.label=this.originalLabel}this._enhance();if(e){this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active")}this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type;if(t!=="input"||!/radio|checkbox/.test(this.type)){e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)}},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t;var i=this.element[0].name;var n="input[name='"+CSS.escape(i)+"']";if(!i){return e([])}if(this.form.length){t=e(this.form[0].elements).filter(n)}else{t=e(n).filter((function(){return e(e(this).prop("form")).length===0}))}return t.not(this.element)},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t);if(this.options.icon&&this.type==="checkbox"){this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t)}if(this.type==="radio"){this._getRadioGroup().each((function(){var t=e(this).checkboxradio("instance");if(t){t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")}}))}},_destroy:function(){this._unbindFormResetHandler();if(this.icon){this.icon.remove();this.iconSpace.remove()}},_setOption:function(e,t){if(e==="label"&&!t){return}this._super(e,t);if(e==="disabled"){this._toggleClass(this.label,null,"ui-state-disabled",t);this.element[0].disabled=t;return}this.refresh()},_updateIcon:function(t){var i="ui-icon ui-icon-background ";if(this.options.icon){if(!this.icon){this.icon=e("<span>");this.iconSpace=e("<span> </span>");this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")}if(this.type==="checkbox"){i+=t?"ui-icon-check ui-state-checked":"ui-icon-blank";this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")}else{i+="ui-icon-blank"}this._addClass(this.icon,"ui-checkboxradio-icon",i);if(!t){this._removeClass(this.icon,null,"ui-icon-check ui-state-checked")}this.icon.prependTo(this.label).after(this.iconSpace)}else if(this.icon!==undefined){this.icon.remove();this.iconSpace.remove();delete this.icon}},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);if(this.icon){e=e.not(this.icon[0])}if(this.iconSpace){e=e.not(this.iconSpace[0])}e.remove();this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e);this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e);if(this.options.label!==null){this._updateLabel()}if(t!==this.options.disabled){this._setOptions({disabled:t})}}}]);var te=e.ui.checkboxradio;e.widget("ui.button",{version:"1.14.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:true},_getCreateOptions:function(){var e,t=this._super()||{};this.isInput=this.element.is("input");e=this.element[0].disabled;if(e!=null){t.disabled=e}this.originalLabel=this.isInput?this.element.val():this.element.html();if(this.originalLabel){t.label=this.originalLabel}return t},_create:function(){if(!this.option.showLabel&!this.options.icon){this.options.showLabel=true}if(this.options.disabled==null){this.options.disabled=this.element[0].disabled||false}this.hasTitle=!!this.element.attr("title");if(this.options.label&&this.options.label!==this.originalLabel){if(this.isInput){this.element.val(this.options.label)}else{this.element.html(this.options.label)}}this._addClass("ui-button","ui-widget");this._setOption("disabled",this.options.disabled);this._enhance();if(this.element.is("a")){this._on({keyup:function(t){if(t.keyCode===e.ui.keyCode.SPACE){t.preventDefault();if(this.element[0].click){this.element[0].click()}else{this.element.trigger("click")}}}})}},_enhance:function(){if(!this.element.is("button")){this.element.attr("role","button")}if(this.options.icon){this._updateIcon("icon",this.options.icon);this._updateTooltip()}},_updateTooltip:function(){this.title=this.element.attr("title");if(!this.options.showLabel&&!this.title){this.element.attr("title",this.options.label)}},_updateIcon:function(t,i){var n=t!=="iconPosition",r=n?this.options.iconPosition:i,o=r==="top"||r==="bottom";if(!this.icon){this.icon=e("<span>");this._addClass(this.icon,"ui-button-icon","ui-icon");if(!this.options.showLabel){this._addClass("ui-button-icon-only")}}else if(n){this._removeClass(this.icon,null,this.options.icon)}if(n){this._addClass(this.icon,null,i)}this._attachIcon(r);if(o){this._addClass(this.icon,null,"ui-widget-icon-block");if(this.iconSpace){this.iconSpace.remove()}}else{if(!this.iconSpace){this.iconSpace=e("<span> </span>");this._addClass(this.iconSpace,"ui-button-icon-space")}this._removeClass(this.icon,null,"ui-wiget-icon-block");this._attachIconSpace(r)}},_destroy:function(){this.element.removeAttr("role");if(this.icon){this.icon.remove()}if(this.iconSpace){this.iconSpace.remove()}if(!this.hasTitle){this.element.removeAttr("title")}},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=e.showLabel===undefined?this.options.showLabel:e.showLabel,i=e.icon===undefined?this.options.icon:e.icon;if(!t&&!i){e.showLabel=true}this._super(e)},_setOption:function(e,t){if(e==="icon"){if(t){this._updateIcon(e,t)}else if(this.icon){this.icon.remove();if(this.iconSpace){this.iconSpace.remove()}}}if(e==="iconPosition"){this._updateIcon(e,t)}if(e==="showLabel"){this._toggleClass("ui-button-icon-only",null,!t);this._updateTooltip()}if(e==="label"){if(this.isInput){this.element.val(t)}else{this.element.html(t);if(this.icon){this._attachIcon(this.options.iconPosition);this._attachIconSpace(this.options.iconPosition)}}}this._super(e,t);if(e==="disabled"){this._toggleClass(null,"ui-state-disabled",t);this.element[0].disabled=t;if(t){this.element.trigger("blur")}}},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");if(e!==this.options.disabled){this._setOptions({disabled:e})}this._updateTooltip()}});if(e.uiBackCompat===true){e.widget("ui.button",e.ui.button,{options:{text:true,icons:{primary:null,secondary:null}},_create:function(){if(this.options.showLabel&&!this.options.text){this.options.showLabel=this.options.text}if(!this.options.showLabel&&this.options.text){this.options.text=this.options.showLabel}if(!this.options.icon&&(this.options.icons.primary||this.options.icons.secondary)){if(this.options.icons.primary){this.options.icon=this.options.icons.primary}else{this.options.icon=this.options.icons.secondary;this.options.iconPosition="end"}}else if(this.options.icon){this.options.icons.primary=this.options.icon}this._super()},_setOption:function(e,t){if(e==="text"){this._super("showLabel",t);return}if(e==="showLabel"){this.options.text=t}if(e==="icon"){this.options.icons.primary=t}if(e==="icons"){if(t.primary){this._super("icon",t.primary);this._super("iconPosition","beginning")}else if(t.secondary){this._super("icon",t.secondary);this._super("iconPosition","end")}}this._superApply(arguments)}});e.fn.button=function(t){return function(i){var n=typeof i==="string";var r=Array.prototype.slice.call(arguments,1);var o=this;if(n){if(!this.length&&i==="instance"){o=undefined}else{this.each((function(){var t;var n=e(this).attr("type");var s=n!=="checkbox"&&n!=="radio"?"button":"checkboxradio";var a=e.data(this,"ui-"+s);if(i==="instance"){o=a;return false}if(!a){return e.error("cannot call methods on button"+" prior to initialization; "+"attempted to call method '"+i+"'")}if(typeof a[i]!=="function"||i.charAt(0)==="_"){return e.error("no such method '"+i+"' for button"+" widget instance")}t=a[i].apply(a,r);if(t!==a&&t!==undefined){o=t&&t.jquery?o.pushStack(t.get()):t;return false}}))}}else{if(r.length){i=e.widget.extend.apply(null,[i].concat(r))}this.each((function(){var n=e(this).attr("type");var r=n!=="checkbox"&&n!=="radio"?"button":"checkboxradio";var o=e.data(this,"ui-"+r);if(o){o.option(i||{});if(o._init){o._init()}}else{if(r==="button"){t.call(e(this),i);return}e(this).checkboxradio(e.extend({icon:false},i))}}))}return o}}(e.fn.button);e.fn.buttonset=function(){if(!e.ui.controlgroup){e.error("Controlgroup widget missing")}if(arguments[0]==="option"&&arguments[1]==="items"&&arguments[2]){return this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]])}if(arguments[0]==="option"&&arguments[1]==="items"){return this.controlgroup.apply(this,[arguments[0],"items.button"])}if(typeof arguments[0]==="object"&&arguments[0].items){arguments[0].items={button:arguments[0].items}}return this.controlgroup.apply(this,arguments)}}var ie=e.ui.button;e.extend(e.ui,{datepicker:{version:"1.14.1"}});var ne;function re(e){var t,i;while(e.length&&e[0]!==document){t=e.css("position");if(t==="absolute"||t==="relative"||t==="fixed"){i=parseInt(e.css("zIndex"),10);if(!isNaN(i)&&i!==0){return i}}e=e.parent()}return 0}function oe(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:"",selectMonthLabel:"Select month",selectYearLabel:"Select year"};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,onUpdateDatepicker:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};e.extend(this._defaults,this.regional[""]);this.regional.en=e.extend(true,{},this.regional[""]);this.regional["en-US"]=e.extend(true,{},this.regional.en);this.dpDiv=se(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}e.extend(oe.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){le(this._defaults,e||{});return this},_attachDatepicker:function(t,i){var n,r,o;n=t.nodeName.toLowerCase();r=n==="div"||n==="span";if(!t.id){this.uuid+=1;t.id="dp"+this.uuid}o=this._newInst(e(t),r);o.settings=e.extend({},i||{});if(n==="input"){this._connectDatepicker(t,o)}else if(r){this._inlineDatepicker(t,o)}},_newInst:function(t,i){var n=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:!i?this.dpDiv:se(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]);i.trigger=e([]);if(n.hasClass(this.markerClassName)){return}this._attachments(n,i);n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp);this._autoSize(i);e.data(t,"datepicker",i);if(i.settings.disabled){this._disableDatepicker(t)}},_attachments:function(t,i){var n,r,o,s=this._get(i,"appendText"),a=this._get(i,"isRTL");if(i.append){i.append.remove()}if(s){i.append=e("<span>").addClass(this._appendClass).text(s);t[a?"before":"after"](i.append)}t.off("focus",this._showDatepicker);if(i.trigger){i.trigger.remove()}n=this._get(i,"showOn");if(n==="focus"||n==="both"){t.on("focus",this._showDatepicker)}if(n==="button"||n==="both"){r=this._get(i,"buttonText");o=this._get(i,"buttonImage");if(this._get(i,"buttonImageOnly")){i.trigger=e("<img>").addClass(this._triggerClass).attr({src:o,alt:r,title:r})}else{i.trigger=e("<button type='button'>").addClass(this._triggerClass);if(o){i.trigger.html(e("<img>").attr({src:o,alt:r,title:r}))}else{i.trigger.text(r)}}t[a?"before":"after"](i.trigger);i.trigger.on("click",(function(){if(e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]){e.datepicker._hideDatepicker()}else if(e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]){e.datepicker._hideDatepicker();e.datepicker._showDatepicker(t[0])}else{e.datepicker._showDatepicker(t[0])}return false}))}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,r,o=new Date(2009,12-1,20),s=this._get(e,"dateFormat");if(s.match(/[DM]/)){t=function(e){i=0;n=0;for(r=0;r<e.length;r++){if(e[r].length>i){i=e[r].length;n=r}}return n};o.setMonth(t(this._get(e,s.match(/MM/)?"monthNames":"monthNamesShort")));o.setDate(t(this._get(e,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())}e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(t,i){var n=e(t);if(n.hasClass(this.markerClassName)){return}n.addClass(this.markerClassName).append(i.dpDiv);e.data(t,"datepicker",i);this._setDate(i,this._getDefaultDate(i),true);this._updateDatepicker(i);this._updateAlternate(i);if(i.settings.disabled){this._disableDatepicker(t)}i.dpDiv.css("display","block")},_dialogDatepicker:function(t,i,n,r,o){var s,a,l,c,d,u=this._dialogInst;if(!u){this.uuid+=1;s="dp"+this.uuid;this._dialogInput=e("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.on("keydown",this._doKeyDown);e("body").append(this._dialogInput);u=this._dialogInst=this._newInst(this._dialogInput,false);u.settings={};e.data(this._dialogInput[0],"datepicker",u)}le(u.settings,r||{});i=i&&i.constructor===Date?this._formatDate(u,i):i;this._dialogInput.val(i);this._pos=o?o.length?o:[o.pageX,o.pageY]:null;if(!this._pos){a=document.documentElement.clientWidth;l=document.documentElement.clientHeight;c=document.documentElement.scrollLeft||document.body.scrollLeft;d=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[a/2-100+c,l/2-150+d]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");u.settings.onSelect=n;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if(e.blockUI){e.blockUI(this.dpDiv)}e.data(this._dialogInput[0],"datepicker",u);return this},_destroyDatepicker:function(t){var i,n=e(t),r=e.data(t,"datepicker");if(!n.hasClass(this.markerClassName)){return}i=t.nodeName.toLowerCase();e.removeData(t,"datepicker");if(i==="input"){r.append.remove();r.trigger.remove();n.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)}else if(i==="div"||i==="span"){n.removeClass(this.markerClassName).empty()}e.datepicker._hideDatepicker();if(ne===r){ne=null;this._curInst=null}},_enableDatepicker:function(t){var i,n,r=e(t),o=e.data(t,"datepicker");if(!r.hasClass(this.markerClassName)){return}i=t.nodeName.toLowerCase();if(i==="input"){t.disabled=false;o.trigger.filter("button").each((function(){this.disabled=false})).end().filter("img").css({opacity:"1.0",cursor:""})}else if(i==="div"||i==="span"){n=r.children("."+this._inlineClass);n.children().removeClass("ui-state-disabled");n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false)}this._disabledInputs=e.map(this._disabledInputs,(function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,n,r=e(t),o=e.data(t,"datepicker");if(!r.hasClass(this.markerClassName)){return}i=t.nodeName.toLowerCase();if(i==="input"){t.disabled=true;o.trigger.filter("button").each((function(){this.disabled=true})).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(i==="div"||i==="span"){n=r.children("."+this._inlineClass);n.children().addClass("ui-state-disabled");n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true)}this._disabledInputs=e.map(this._disabledInputs,(function(e){return e===t?null:e}));this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e){return false}for(var t=0;t<this._disabledInputs.length;t++){if(this._disabledInputs[t]===e){return true}}return false},_getInst:function(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,n){var r,o,s,a,l=this._getInst(t);if(arguments.length===2&&typeof i==="string"){return i==="defaults"?e.extend({},e.datepicker._defaults):l?i==="all"?e.extend({},l.settings):this._get(l,i):null}r=i||{};if(typeof i==="string"){r={};r[i]=n}if(l){if(this._curInst===l){this._hideDatepicker()}o=this._getDateDatepicker(t,true);s=this._getMinMaxDate(l,"min");a=this._getMinMaxDate(l,"max");le(l.settings,r);if(s!==null&&r.dateFormat!==undefined&&r.minDate===undefined){l.settings.minDate=this._formatDate(l,s)}if(a!==null&&r.dateFormat!==undefined&&r.maxDate===undefined){l.settings.maxDate=this._formatDate(l,a)}if("disabled"in r){if(r.disabled){this._disableDatepicker(t)}else{this._enableDatepicker(t)}}this._attachments(e(t),l);this._autoSize(l);this._setDate(l,o);this._updateAlternate(l);this._updateDatepicker(l)}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);if(t){this._updateDatepicker(t)}},_setDateDatepicker:function(e,t){var i=this._getInst(e);if(i){this._setDate(i,t);this._updateDatepicker(i);this._updateAlternate(i)}},_getDateDatepicker:function(e,t){var i=this._getInst(e);if(i&&!i.inline){this._setDateFromField(i,t)}return i?this._getDate(i):null},_doKeyDown:function(t){var i,n,r,o=e.datepicker._getInst(t.target),s=true,a=o.dpDiv.is(".ui-datepicker-rtl");o._keyEvent=true;if(e.datepicker._datepickerShowing){switch(t.keyCode){case 9:e.datepicker._hideDatepicker();s=false;break;case 13:r=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",o.dpDiv);if(r[0]){e.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,r[0])}i=e.datepicker._get(o,"onSelect");if(i){n=e.datepicker._formatDate(o);i.apply(o.input?o.input[0]:null,[n,o])}else{e.datepicker._hideDatepicker()}return false;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 35:if(t.ctrlKey||t.metaKey){e.datepicker._clearDate(t.target)}s=t.ctrlKey||t.metaKey;break;case 36:if(t.ctrlKey||t.metaKey){e.datepicker._gotoToday(t.target)}s=t.ctrlKey||t.metaKey;break;case 37:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,a?+1:-1,"D")}s=t.ctrlKey||t.metaKey;if(t.originalEvent.altKey){e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M")}break;case 38:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,-7,"D")}s=t.ctrlKey||t.metaKey;break;case 39:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,a?-1:+1,"D")}s=t.ctrlKey||t.metaKey;if(t.originalEvent.altKey){e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M")}break;case 40:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,+7,"D")}s=t.ctrlKey||t.metaKey;break;default:s=false}}else if(t.keyCode===36&&t.ctrlKey){e.datepicker._showDatepicker(this)}else{s=false}if(s){t.preventDefault();t.stopPropagation()}},_doKeyPress:function(t){var i,n,r=e.datepicker._getInst(t.target);if(e.datepicker._get(r,"constrainInput")){i=e.datepicker._possibleChars(e.datepicker._get(r,"dateFormat"));n=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode);return t.ctrlKey||t.metaKey||(n<" "||!i||i.indexOf(n)>-1)}},_doKeyUp:function(t){var i,n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal){try{i=e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n));if(i){e.datepicker._setDateFromField(n);e.datepicker._updateAlternate(n);e.datepicker._updateDatepicker(n)}}catch(e){}}return true},_showDatepicker:function(t){t=t.target||t;if(t.nodeName.toLowerCase()!=="input"){t=e("input",t.parentNode)[0]}if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t){return}var i,n,r,o,s,a,l;i=e.datepicker._getInst(t);if(e.datepicker._curInst&&e.datepicker._curInst!==i){e.datepicker._curInst.dpDiv.stop(true,true);if(i&&e.datepicker._datepickerShowing){e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])}}n=e.datepicker._get(i,"beforeShow");r=n?n.apply(t,[t,i]):{};if(r===false){return}le(i.settings,r);i.lastVal=null;e.datepicker._lastInput=t;e.datepicker._setDateFromField(i);if(e.datepicker._inDialog){t.value=""}if(!e.datepicker._pos){e.datepicker._pos=e.datepicker._findPos(t);e.datepicker._pos[1]+=t.offsetHeight}o=false;e(t).parents().each((function(){o|=e(this).css("position")==="fixed";return!o}));s={left:e.datepicker._pos[0],top:e.datepicker._pos[1]};e.datepicker._pos=null;i.dpDiv.empty();i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});e.datepicker._updateDatepicker(i);s=e.datepicker._checkOffset(i,s,o);i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!i.inline){a=e.datepicker._get(i,"showAnim");l=e.datepicker._get(i,"duration");i.dpDiv.css("z-index",re(e(t))+1);e.datepicker._datepickerShowing=true;if(e.effects&&e.effects.effect[a]){i.dpDiv.show(a,e.datepicker._get(i,"showOptions"),l)}else{i.dpDiv[a||"show"](a?l:null)}if(e.datepicker._shouldFocusInput(i)){i.input.trigger("focus")}e.datepicker._curInst=i}},_updateDatepicker:function(t){this.maxRows=4;ne=t;t.dpDiv.empty().append(this._generateHTML(t));this._attachHandlers(t);var i,n=this._getNumberOfMonths(t),r=n[1],o=17,s=t.dpDiv.find("."+this._dayOverClass+" a"),a=e.datepicker._get(t,"onUpdateDatepicker");if(s.length>0){ae.apply(s.get(0))}t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(r>1){t.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",o*r+"em")}t.dpDiv[(n[0]!==1||n[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)){t.input.trigger("focus")}if(t.yearshtml){i=t.yearshtml;setTimeout((function(){if(i===t.yearshtml&&t.yearshtml){t.dpDiv.find("select.ui-datepicker-year").first().replaceWith(t.yearshtml)}i=t.yearshtml=null}),0)}if(a){a.apply(t.input?t.input[0]:null,[t])}},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")},_checkOffset:function(t,i,n){var r=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),s=t.input?t.input.outerWidth():0,a=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:e(document).scrollTop());i.left-=this._get(t,"isRTL")?r-s:0;i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0;i.top-=n&&i.top===t.input.offset().top+a?e(document).scrollTop():0;i.left-=Math.min(i.left,i.left+r>l&&l>r?Math.abs(i.left+r-l):0);i.top-=Math.min(i.top,i.top+o>c&&c>o?Math.abs(o+a):0);return i},_findPos:function(t){var i,n=this._getInst(t),r=this._get(n,"isRTL");while(t&&(t.type==="hidden"||t.nodeType!==1||e.expr.pseudos.hidden(t))){t=t[r?"previousSibling":"nextSibling"]}i=e(t).offset();return[i.left,i.top]},_hideDatepicker:function(t){var i,n,r,o,s=this._curInst;if(!s||t&&s!==e.data(t,"datepicker")){return}if(this._datepickerShowing){i=this._get(s,"showAnim");n=this._get(s,"duration");r=function(){e.datepicker._tidyDialog(s)};if(e.effects&&e.effects.effect[i]){s.dpDiv.hide(i,e.datepicker._get(s,"showOptions"),n,r)}else{s.dpDiv[i==="slideDown"?"slideUp":i==="fadeIn"?"fadeOut":"hide"](i?n:null,r)}if(!i){r()}this._datepickerShowing=false;o=this._get(s,"onClose");if(o){o.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(e.blockUI){e.unblockUI();e("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(!e.datepicker._curInst){return}var i=e(t.target),n=e.datepicker._getInst(i[0]);if(i[0].id!==e.datepicker._mainDivId&&i.parents("#"+e.datepicker._mainDivId).length===0&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&!(e.datepicker._inDialog&&e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==n){e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var r=e(t),o=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0])){return}this._adjustInstDate(o,i,n);this._updateDatepicker(o)},_gotoToday:function(t){var i,n=e(t),r=this._getInst(n[0]);if(this._get(r,"gotoCurrent")&&r.currentDay){r.selectedDay=r.currentDay;r.drawMonth=r.selectedMonth=r.currentMonth;r.drawYear=r.selectedYear=r.currentYear}else{i=new Date;r.selectedDay=i.getDate();r.drawMonth=r.selectedMonth=i.getMonth();r.drawYear=r.selectedYear=i.getFullYear()}this._notifyChange(r);this._adjustDate(n)},_selectMonthYear:function(t,i,n){var r=e(t),o=this._getInst(r[0]);o["selected"+(n==="M"?"Month":"Year")]=o["draw"+(n==="M"?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10);this._notifyChange(o);this._adjustDate(r)},_selectDay:function(t,i,n,r){var o,s=e(t);if(e(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])){return}o=this._getInst(s[0]);o.selectedDay=o.currentDay=parseInt(e("a",r).attr("data-date"));o.selectedMonth=o.currentMonth=i;o.selectedYear=o.currentYear=n;this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,r=e(t),o=this._getInst(r[0]);i=i!=null?i:this._formatDate(o);if(o.input){o.input.val(i)}this._updateAlternate(o);n=this._get(o,"onSelect");if(n){n.apply(o.input?o.input[0]:null,[i,o])}else if(o.input){o.input.trigger("change")}if(o.inline){this._updateDatepicker(o)}else{this._hideDatepicker();this._lastInput=o.input[0];if(typeof o.input[0]!=="object"){o.input.trigger("focus")}this._lastInput=null}},_updateAlternate:function(t){var i,n,r,o=this._get(t,"altField");if(o){i=this._get(t,"altFormat")||this._get(t,"dateFormat");n=this._getDate(t);r=this.formatDate(i,n,this._getFormatConfig(t));e(document).find(o).val(r)}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());i.setDate(i.getDate()+4-(i.getDay()||7));t=i.getTime();i.setMonth(0);i.setDate(1);return Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,n){if(t==null||i==null){throw"Invalid arguments"}i=typeof i==="object"?i.toString():i+"";if(i===""){return null}var r,o,s,a=0,l=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,c=typeof l!=="string"?l:(new Date).getFullYear()%100+parseInt(l,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,u=(n?n.dayNames:null)||this._defaults.dayNames,h=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,p=(n?n.monthNames:null)||this._defaults.monthNames,f=-1,g=-1,m=-1,v=-1,b=false,y,w=function(e){var i=r+1<t.length&&t.charAt(r+1)===e;if(i){r++}return i},C=function(e){var t=w(e),n=e==="@"?14:e==="!"?20:e==="y"&&t?4:e==="o"?3:2,r=e==="y"?n:1,o=new RegExp("^\\d{"+r+","+n+"}"),s=i.substring(a).match(o);if(!s){throw"Missing number at position "+a}a+=s[0].length;return parseInt(s[0],10)},_=function(t,n,r){var o=-1,s=e.map(w(t)?r:n,(function(e,t){return[[t,e]]})).sort((function(e,t){return-(e[1].length-t[1].length)}));e.each(s,(function(e,t){var n=t[1];if(i.substr(a,n.length).toLowerCase()===n.toLowerCase()){o=t[0];a+=n.length;return false}}));if(o!==-1){return o+1}else{throw"Unknown name at position "+a}},S=function(){if(i.charAt(a)!==t.charAt(r)){throw"Unexpected literal at position "+a}a++};for(r=0;r<t.length;r++){if(b){if(t.charAt(r)==="'"&&!w("'")){b=false}else{S()}}else{switch(t.charAt(r)){case"d":m=C("d");break;case"D":_("D",d,u);break;case"o":v=C("o");break;case"m":g=C("m");break;case"M":g=_("M",h,p);break;case"y":f=C("y");break;case"@":y=new Date(C("@"));f=y.getFullYear();g=y.getMonth()+1;m=y.getDate();break;case"!":y=new Date((C("!")-this._ticksTo1970)/1e4);f=y.getFullYear();g=y.getMonth()+1;m=y.getDate();break;case"'":if(w("'")){S()}else{b=true}break;default:S()}}}if(a<i.length){s=i.substr(a);if(!/^\s+/.test(s)){throw"Extra/unparsed characters found in date: "+s}}if(f===-1){f=(new Date).getFullYear()}else if(f<100){f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(f<=c?0:-100)}if(v>-1){g=1;m=v;do{o=this._getDaysInMonth(f,g-1);if(m<=o){break}g++;m-=o}while(true)}y=this._daylightSavingAdjust(new Date(f,g-1,m));if(y.getFullYear()!==f||y.getMonth()+1!==g||y.getDate()!==m){throw"Invalid date"}return y},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7,formatDate:function(e,t,i){if(!t){return""}var n,r=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=n+1<e.length&&e.charAt(n+1)===t;if(i){n++}return i},c=function(e,t,i){var n=""+t;if(l(e)){while(n.length<i){n="0"+n}}return n},d=function(e,t,i,n){return l(e)?n[t]:i[t]},u="",h=false;if(t){for(n=0;n<e.length;n++){if(h){if(e.charAt(n)==="'"&&!l("'")){h=false}else{u+=e.charAt(n)}}else{switch(e.charAt(n)){case"d":u+=c("d",t.getDate(),2);break;case"D":u+=d("D",t.getDay(),r,o);break;case"o":u+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=c("m",t.getMonth()+1,2);break;case"M":u+=d("M",t.getMonth(),s,a);break;case"y":u+=l("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=t.getTime()*1e4+this._ticksTo1970;break;case"'":if(l("'")){u+="'"}else{h=true}break;default:u+=e.charAt(n)}}}}return u},_possibleChars:function(e){var t,i="",n=false,r=function(i){var n=t+1<e.length&&e.charAt(t+1)===i;if(n){t++}return n};for(t=0;t<e.length;t++){if(n){if(e.charAt(t)==="'"&&!r("'")){n=false}else{i+=e.charAt(t)}}else{switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":if(r("'")){i+="'"}else{n=true}break;default:i+=e.charAt(t)}}}return i},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal){return}var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,r=this._getDefaultDate(e),o=r,s=this._getFormatConfig(e);try{o=this.parseDate(i,n,s)||r}catch(e){n=t?"":n}e.selectedDay=o.getDate();e.drawMonth=e.selectedMonth=o.getMonth();e.drawYear=e.selectedYear=o.getFullYear();e.currentDay=n?o.getDate():0;e.currentMonth=n?o.getMonth():0;e.currentYear=n?o.getFullYear():0;this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var r=function(e){var t=new Date;t.setDate(t.getDate()+e);return t},o=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(e){}var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,r=n.getFullYear(),o=n.getMonth(),s=n.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(i);while(l){switch(l[2]||"d"){case"d":case"D":s+=parseInt(l[1],10);break;case"w":case"W":s+=parseInt(l[1],10)*7;break;case"m":case"M":o+=parseInt(l[1],10);s=Math.min(s,e.datepicker._getDaysInMonth(r,o));break;case"y":case"Y":r+=parseInt(l[1],10);s=Math.min(s,e.datepicker._getDaysInMonth(r,o));break}l=a.exec(i)}return new Date(r,o,s)},s=i==null||i===""?n:typeof i==="string"?o(i):typeof i==="number"?isNaN(i)?n:r(i):new Date(i.getTime());s=s&&s.toString()==="Invalid Date"?n:s;if(s){s.setHours(0);s.setMinutes(0);s.setSeconds(0);s.setMilliseconds(0)}return this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){if(!e){return null}e.setHours(e.getHours()>12?e.getHours()+2:0);return e},_setDate:function(e,t,i){var n=!t,r=e.selectedMonth,o=e.selectedYear,s=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=s.getDate();e.drawMonth=e.selectedMonth=e.currentMonth=s.getMonth();e.drawYear=e.selectedYear=e.currentYear=s.getFullYear();if((r!==e.selectedMonth||o!==e.selectedYear)&&!i){this._notifyChange(e)}this._adjustInstDate(e);if(e.input){e.input.val(n?"":this._formatDate(e))}},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()===""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map((function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){e.datepicker._selectMonthYear(n,this,"M");return false},selectYear:function(){e.datepicker._selectMonthYear(n,this,"Y");return false}};e(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])}))},_generateHTML:function(t){var i,n,r,o,s,a,l,c,d,u,h,p,f,g,m,v,b,y,w,C,_,S,A,x,E,T,D,M,k,P,R,I,O,N,L,F,$,G,B,H=new Date,z=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),W=this._get(t,"isRTL"),V=this._get(t,"showButtonPanel"),j=this._get(t,"hideIfNoPrevNext"),U=this._get(t,"navigationAsDateFormat"),Y=this._getNumberOfMonths(t),q=this._get(t,"showCurrentAtPos"),K=this._get(t,"stepMonths"),X=Y[0]!==1||Y[1]!==1,Z=this._daylightSavingAdjust(!t.currentDay?new Date(9999,9,9):new Date(t.currentYear,t.currentMonth,t.currentDay)),Q=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),ee=t.drawMonth-q,te=t.drawYear;if(ee<0){ee+=12;te--}if(J){i=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-Y[0]*Y[1]+1,J.getDate()));i=Q&&i<Q?Q:i;while(this._daylightSavingAdjust(new Date(te,ee,1))>i){ee--;if(ee<0){ee=11;te--}}}t.drawMonth=ee;t.drawYear=te;n=this._get(t,"prevText");n=!U?n:this.formatDate(n,this._daylightSavingAdjust(new Date(te,ee-K,1)),this._getFormatConfig(t));if(this._canAdjustMonth(t,-1,te,ee)){r=e("<a>").attr({class:"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:n}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(W?"e":"w")).text(n))[0].outerHTML}else if(j){r=""}else{r=e("<a>").attr({class:"ui-datepicker-prev ui-corner-all ui-state-disabled",title:n}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(W?"e":"w")).text(n))[0].outerHTML}o=this._get(t,"nextText");o=!U?o:this.formatDate(o,this._daylightSavingAdjust(new Date(te,ee+K,1)),this._getFormatConfig(t));if(this._canAdjustMonth(t,+1,te,ee)){s=e("<a>").attr({class:"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:o}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(W?"w":"e")).text(o))[0].outerHTML}else if(j){s=""}else{s=e("<a>").attr({class:"ui-datepicker-next ui-corner-all ui-state-disabled",title:o}).append(e("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+(W?"w":"e")).text(o))[0].outerHTML}a=this._get(t,"currentText");l=this._get(t,"gotoCurrent")&&t.currentDay?Z:z;a=!U?a:this.formatDate(a,l,this._getFormatConfig(t));c="";if(!t.inline){c=e("<button>").attr({type:"button",class:"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide","data-event":"click"}).text(this._get(t,"closeText"))[0].outerHTML}d="";if(V){d=e("<div class='ui-datepicker-buttonpane ui-widget-content'>").append(W?c:"").append(this._isInRange(t,l)?e("<button>").attr({type:"button",class:"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(a):"").append(W?"":c)[0].outerHTML}u=parseInt(this._get(t,"firstDay"),10);u=isNaN(u)?0:u;h=this._get(t,"showWeek");p=this._get(t,"dayNames");f=this._get(t,"dayNamesMin");g=this._get(t,"monthNames");m=this._get(t,"monthNamesShort");v=this._get(t,"beforeShowDay");b=this._get(t,"showOtherMonths");y=this._get(t,"selectOtherMonths");w=this._getDefaultDate(t);C="";for(S=0;S<Y[0];S++){A="";this.maxRows=4;for(x=0;x<Y[1];x++){E=this._daylightSavingAdjust(new Date(te,ee,t.selectedDay));T=" ui-corner-all";D="";if(X){D+="<div class='ui-datepicker-group";if(Y[1]>1){switch(x){case 0:D+=" ui-datepicker-group-first";T=" ui-corner-"+(W?"right":"left");break;case Y[1]-1:D+=" ui-datepicker-group-last";T=" ui-corner-"+(W?"left":"right");break;default:D+=" ui-datepicker-group-middle";T="";break}}D+="'>"}D+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&S===0?W?s:r:"")+(/all|right/.test(T)&&S===0?W?r:s:"")+this._generateMonthYearHeader(t,ee,te,Q,J,S>0||x>0,g,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";M=h?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"";for(_=0;_<7;_++){k=(_+u)%7;M+="<th scope='col'"+((_+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+p[k]+"'>"+f[k]+"</span></th>"}D+=M+"</tr></thead><tbody>";P=this._getDaysInMonth(te,ee);if(te===t.selectedYear&&ee===t.selectedMonth){t.selectedDay=Math.min(t.selectedDay,P)}R=(this._getFirstDayOfMonth(te,ee)-u+7)%7;I=Math.ceil((R+P)/7);O=X?this.maxRows>I?this.maxRows:I:I;this.maxRows=O;N=this._daylightSavingAdjust(new Date(te,ee,1-R));for(L=0;L<O;L++){D+="<tr>";F=!h?"":"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(N)+"</td>";for(_=0;_<7;_++){$=v?v.apply(t.input?t.input[0]:null,[N]):[true,""];G=N.getMonth()!==ee;B=G&&!y||!$[0]||Q&&N<Q||J&&N>J;F+="<td class='"+((_+u+6)%7>=5?" ui-datepicker-week-end":"")+(G?" ui-datepicker-other-month":"")+(N.getTime()===E.getTime()&&ee===t.selectedMonth&&t._keyEvent||w.getTime()===N.getTime()&&w.getTime()===E.getTime()?" "+this._dayOverClass:"")+(B?" "+this._unselectableClass+" ui-state-disabled":"")+(G&&!b?"":" "+$[1]+(N.getTime()===Z.getTime()?" "+this._currentClass:"")+(N.getTime()===z.getTime()?" ui-datepicker-today":""))+"'"+((!G||b)&&$[2]?" title='"+$[2].replace(/'/g,"&#39;")+"'":"")+(B?"":" data-handler='selectDay' data-event='click' data-month='"+N.getMonth()+"' data-year='"+N.getFullYear()+"'")+">"+(G&&!b?"&#xa0;":B?"<span class='ui-state-default'>"+N.getDate()+"</span>":"<a class='ui-state-default"+(N.getTime()===z.getTime()?" ui-state-highlight":"")+(N.getTime()===Z.getTime()?" ui-state-active":"")+(G?" ui-priority-secondary":"")+"' href='#' aria-current='"+(N.getTime()===Z.getTime()?"true":"false")+"' data-date='"+N.getDate()+"'>"+N.getDate()+"</a>")+"</td>";N.setDate(N.getDate()+1);N=this._daylightSavingAdjust(N)}D+=F+"</tr>"}ee++;if(ee>11){ee=0;te++}D+="</tbody></table>"+(X?"</div>"+(Y[0]>0&&x===Y[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");A+=D}C+=A}C+=d;t._keyEvent=false;return C},_generateMonthYearHeader:function(e,t,i,n,r,o,s,a){var l,c,d,u,h,p,f,g,m=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),b=this._get(e,"showMonthAfterYear"),y=this._get(e,"selectMonthLabel"),w=this._get(e,"selectYearLabel"),C="<div class='ui-datepicker-title'>",_="";if(o||!m){_+="<span class='ui-datepicker-month'>"+s[t]+"</span>"}else{l=n&&n.getFullYear()===i;c=r&&r.getFullYear()===i;_+="<select class='ui-datepicker-month' aria-label='"+y+"' data-handler='selectMonth' data-event='change'>";for(d=0;d<12;d++){if((!l||d>=n.getMonth())&&(!c||d<=r.getMonth())){_+="<option value='"+d+"'"+(d===t?" selected='selected'":"")+">"+a[d]+"</option>"}}_+="</select>"}if(!b){C+=_+(o||!(m&&v)?"&#xa0;":"")}if(!e.yearshtml){e.yearshtml="";if(o||!v){C+="<span class='ui-datepicker-year'>"+i+"</span>"}else{u=this._get(e,"yearRange").split(":");h=(new Date).getFullYear();p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t};f=p(u[0]);g=Math.max(f,p(u[1]||""));f=n?Math.max(f,n.getFullYear()):f;g=r?Math.min(g,r.getFullYear()):g;e.yearshtml+="<select class='ui-datepicker-year' aria-label='"+w+"' data-handler='selectYear' data-event='change'>";for(;f<=g;f++){e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>"}e.yearshtml+="</select>";C+=e.yearshtml;e.yearshtml=null}}C+=this._get(e,"yearSuffix");if(b){C+=(o||!(m&&v)?"&#xa0;":"")+_}C+="</div>";return C},_adjustInstDate:function(e,t,i){var n=e.selectedYear+(i==="Y"?t:0),r=e.selectedMonth+(i==="M"?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(n,r))+(i==="D"?t:0),s=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,r,o)));e.selectedDay=s.getDate();e.drawMonth=e.selectedMonth=s.getMonth();e.drawYear=e.selectedYear=s.getFullYear();if(i==="M"||i==="Y"){this._notifyChange(e)}},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),r=i&&t<i?i:t;return n&&r>n?n:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");if(t){t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])}},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t==="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var r=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(i,n+(t<0?t:r[0]*r[1]),1));if(t<0){o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth()))}return this._isInRange(e,o)},_isInRange:function(e,t){var i,n,r=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),s=null,a=null,l=this._get(e,"yearRange");if(l){i=l.split(":");n=(new Date).getFullYear();s=parseInt(i[0],10);a=parseInt(i[1],10);if(i[0].match(/[+\-].*/)){s+=n}if(i[1].match(/[+\-].*/)){a+=n}}return(!r||t.getTime()>=r.getTime())&&(!o||t.getTime()<=o.getTime())&&(!s||t.getFullYear()>=s)&&(!a||t.getFullYear()<=a)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");t=typeof t!=="string"?t:(new Date).getFullYear()%100+parseInt(t,10);return{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){if(!t){e.currentDay=e.selectedDay;e.currentMonth=e.selectedMonth;e.currentYear=e.selectedYear}var r=t?typeof t==="object"?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}});function se(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",i,(function(){e(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){e(this).removeClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){e(this).removeClass("ui-datepicker-next-hover")}})).on("mouseover",i,ae)}function ae(){if(!e.datepicker._isDisabledDatepicker(ne.inline?ne.dpDiv.parent()[0]:ne.input[0])){e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");e(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){e(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){e(this).addClass("ui-datepicker-next-hover")}}}function le(t,i){e.extend(t,i);for(var n in i){if(i[n]==null){t[n]=i[n]}}return t}e.fn.datepicker=function(t){if(!this.length){return this}if(!e.datepicker.initialized){e(document).on("mousedown",e.datepicker._checkExternalClick);e.datepicker.initialized=true}if(e("#"+e.datepicker._mainDivId).length===0){e("body").append(e.datepicker.dpDiv)}var i=Array.prototype.slice.call(arguments,1);if(typeof t==="string"&&(t==="isDisabled"||t==="getDate"||t==="widget")){return e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))}if(t==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))}return this.each((function(){if(typeof t==="string"){e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i))}else{e.datepicker._attachDatepicker(this,t)}}))};e.datepicker=new oe;e.datepicker.initialized=false;e.datepicker.uuid=(new Date).getTime();e.datepicker.version="1.14.1";var ce=e.datepicker;var de=false;e(document).on("mouseup",(function(){de=false}));var ue=e.widget("ui.mouse",{version:"1.14.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).on("click."+this.widgetName,(function(i){if(true===e.data(i.target,t.widgetName+".preventClickEvent")){e.removeData(i.target,t.widgetName+".preventClickEvent");i.stopImmediatePropagation();return false}}));this.started=false},_mouseDestroy:function(){this.element.off("."+this.widgetName);if(this._mouseMoveDelegate){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(t){if(de){return}this._mouseMoved=false;if(this._mouseStarted){this._mouseUp(t)}this._mouseDownEvent=t;var i=this,n=t.which===1,r=typeof this.options.cancel==="string"?e(t.target).closest(this.options.cancel).length:false;if(!n||r||!this._mouseCapture(t)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=true}),this.options.delay)}if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==false;if(!this._mouseStarted){t.preventDefault();return true}}if(true===e.data(t.target,this.widgetName+".preventClickEvent")){e.removeData(t.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(e){return i._mouseMove(e)};this._mouseUpDelegate=function(e){return i._mouseUp(e)};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);t.preventDefault();de=true;return true},_mouseMove:function(e){if(this._mouseMoved&&!e.which){if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey){this.ignoreMissingWhich=true}else if(!this.ignoreMissingWhich){return this._mouseUp(e)}}if(e.which||e.button){this._mouseMoved=true}if(this._mouseStarted){this._mouseDrag(e);return e.preventDefault()}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==false;if(this._mouseStarted){this._mouseDrag(e)}else{this._mouseUp(e)}}return!this._mouseStarted},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(t.target===this._mouseDownEvent.target){e.data(t.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(t)}if(this._mouseDelayTimer){clearTimeout(this._mouseDelayTimer);delete this._mouseDelayTimer}this.ignoreMissingWhich=false;de=false;t.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}});var he=e.ui.plugin={add:function(t,i,n){var r,o=e.ui[t].prototype;for(r in n){o.plugins[r]=o.plugins[r]||[];o.plugins[r].push([i,n[r]])}},call:function(e,t,i,n){var r,o=e.plugins[t];if(!o){return}if(!n&&(!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)){return}for(r=0;r<o.length;r++){if(e.options[o[r][0]]){o[r][1].apply(e.element,i)}}}};e.widget("ui.draggable",e.ui.mouse,{version:"1.14.1",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative()}if(this.options.addClasses){this._addClass("ui-draggable")}this._setHandleClassName();this._mouseInit()},_setOption:function(e,t){this._super(e,t);if(e==="handle"){this._removeHandleClassName();this._setHandleClassName()}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return}this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;if(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0){return false}this.handle=this._getHandle(t);if(!this.handle){return false}this._blurActiveElement(t);this._blockFrames(i.iframeFix===true?"iframe":i.iframeFix);return true},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map((function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]}))},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_blurActiveElement:function(t){var i=this.document[0].activeElement,n=e(t.target);if(n.closest(i).length){return}e(i).trigger("blur")},_mouseStart:function(t){var i=this.options;this.helper=this._createHelper(t);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();if(e.ui.ddmanager){e.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter((function(){return e(this).css("position")==="fixed"})).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(t);this.originalPosition=this.position=this._generatePosition(t,false);this.originalPageX=t.pageX;this.originalPageY=t.pageY;if(i.cursorAt){this._adjustOffsetFromHelper(i.cursorAt)}this._setContainment();if(this._trigger("start",t)===false){this._clear();return false}this._cacheHelperProportions();if(e.ui.ddmanager&&!i.dropBehaviour){e.ui.ddmanager.prepareOffsets(this,t)}this._mouseDrag(t,true);if(e.ui.ddmanager){e.ui.ddmanager.dragStart(this,t)}return true},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset()}this.position=this._generatePosition(t,true);this.positionAbs=this._convertPositionTo("absolute");if(!i){var n=this._uiHash();if(this._trigger("drag",t,n)===false){this._mouseUp(new e.Event("mouseup",t));return false}this.position=n.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if(e.ui.ddmanager){e.ui.ddmanager.drag(this,t)}return false},_mouseStop:function(t){var i=this,n=false;if(e.ui.ddmanager&&!this.options.dropBehaviour){n=e.ui.ddmanager.drop(this,t)}if(this.dropped){n=this.dropped;this.dropped=false}if(this.options.revert==="invalid"&&!n||this.options.revert==="valid"&&n||this.options.revert===true||typeof this.options.revert==="function"&&this.options.revert.call(this.element,n)){e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){if(i._trigger("stop",t)!==false){i._clear()}}))}else{if(this._trigger("stop",t)!==false){this._clear()}}return false},_mouseUp:function(t){this._unblockFrames();if(e.ui.ddmanager){e.ui.ddmanager.dragStop(this,t)}if(this.handleElement.is(t.target)){this.element.trigger("focus")}return e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp(new e.Event("mouseup",{target:this.element[0]}))}else{this._clear()}return this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:true},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var i=this.options,n=typeof i.helper==="function",r=n?e(i.helper.apply(this.element[0],[t])):i.helper==="clone"?this.element.clone().removeAttr("id"):this.element;if(!r.parents("body").length){r.appendTo(i.appendTo==="parent"?this.element[0].parentNode:i.appendTo)}if(n&&r[0]===this.element[0]){this._setPositionRelative()}if(r[0]!==this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))){r.css("position","absolute")}return r},_setPositionRelative:function(){if(!/^(?:r|a|f)/.test(this.element.css("position"))){this.element[0].style.position="relative"}},_adjustOffsetFromHelper:function(e){if(typeof e==="string"){e=e.split(" ")}if(Array.isArray(e)){e={left:+e[0],top:+e[1]||0}}if("left"in e){this.offset.click.left=e.left+this.margins.left}if("right"in e){this.offset.click.left=this.helperProportions.width-e.right+this.margins.left}if("top"in e){this.offset.click.top=e.top+this.margins.top}if("bottom"in e){this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top}},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft();t.top+=this.scrollParent.scrollTop()}if(this._isRootNode(this.offsetParent[0])){t={top:0,left:0}}return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0}}var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(!t?this.scrollParent.scrollTop():0),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(!t?this.scrollParent.scrollLeft():0)}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,r=this.options,o=this.document[0];this.relativeContainer=null;if(!r.containment){this.containment=null;return}if(r.containment==="window"){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(r.containment==="document"){this.containment=[0,0,e(o).width()-this.helperProportions.width-this.margins.left,(e(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(r.containment.constructor===Array){this.containment=r.containment;return}if(r.containment==="parent"){r.containment=this.helper[0].parentNode}i=e(r.containment);n=i[0];if(!n){return}t=/(scroll|auto)/.test(i.css("overflow"));this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=i},_convertPositionTo:function(e,t){if(!t){t=this.position}var i=e==="absolute"?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-(this.cssPosition==="fixed"?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-(this.cssPosition==="fixed"?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,r,o,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;if(!a||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}}if(t){if(this.containment){if(this.relativeContainer){n=this.relativeContainer.offset();i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]}else{i=this.containment}if(e.pageX-this.offset.click.left<i[0]){l=i[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<i[1]){c=i[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>i[2]){l=i[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>i[3]){c=i[3]+this.offset.click.top}}if(s.grid){r=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY;c=i?r-this.offset.click.top>=i[1]||r-this.offset.click.top>i[3]?r:r-this.offset.click.top>=i[1]?r-s.grid[1]:r+s.grid[1]:r;o=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX;l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-s.grid[0]:o+s.grid[0]:o}if(s.axis==="y"){l=this.originalPageX}if(s.axis==="x"){c=this.originalPageY}}return{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy()}},_trigger:function(t,i,n){n=n||this._uiHash();e.ui.plugin.call(this,t,[i,n,this],true);if(/^(drag|start|stop)/.test(t)){this.positionAbs=this._convertPositionTo("absolute");n.offset=this.positionAbs}return e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,n){var r=e.extend({},i,{item:n.element});n.sortables=[];e(n.options.connectToSortable).each((function(){var i=e(this).sortable("instance");if(i&&!i.options.disabled){n.sortables.push(i);i.refreshPositions();i._trigger("activate",t,r)}}))},stop:function(t,i,n){var r=e.extend({},i,{item:n.element});n.cancelHelperRemoval=false;e.each(n.sortables,(function(){var e=this;if(e.isOver){e.isOver=0;n.cancelHelperRemoval=true;e.cancelHelperRemoval=false;e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")};e._mouseStop(t);e.options.helper=e.options._helper}else{e.cancelHelperRemoval=true;e._trigger("deactivate",t,r)}}))},drag:function(t,i,n){e.each(n.sortables,(function(){var r=false,o=this;o.positionAbs=n.positionAbs;o.helperProportions=n.helperProportions;o.offset.click=n.offset.click;if(o._intersectsWith(o.containerCache)){r=true;e.each(n.sortables,(function(){this.positionAbs=n.positionAbs;this.helperProportions=n.helperProportions;this.offset.click=n.offset.click;if(this!==o&&this._intersectsWith(this.containerCache)&&e.contains(o.element[0],this.element[0])){r=false}return r}))}if(r){if(!o.isOver){o.isOver=1;n._parent=i.helper.parent();o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",true);o.options._helper=o.options.helper;o.options.helper=function(){return i.helper[0]};t.target=o.currentItem[0];o._mouseCapture(t,true);o._mouseStart(t,true,true);o.offset.click.top=n.offset.click.top;o.offset.click.left=n.offset.click.left;o.offset.parent.left-=n.offset.parent.left-o.offset.parent.left;o.offset.parent.top-=n.offset.parent.top-o.offset.parent.top;n._trigger("toSortable",t);n.dropped=o.element;e.each(n.sortables,(function(){this.refreshPositions()}));n.currentItem=n.element;o.fromOutside=n}if(o.currentItem){o._mouseDrag(t);i.position=o.position}}else{if(o.isOver){o.isOver=0;o.cancelHelperRemoval=true;o.options._revert=o.options.revert;o.options.revert=false;o._trigger("out",t,o._uiHash(o));o._mouseStop(t,true);o.options.revert=o.options._revert;o.options.helper=o.options._helper;if(o.placeholder){o.placeholder.remove()}i.helper.appendTo(n._parent);n._refreshOffsets(t);i.position=n._generatePosition(t,true);n._trigger("fromSortable",t);n.dropped=false;e.each(n.sortables,(function(){this.refreshPositions()}))}}}))}});e.ui.plugin.add("draggable","cursor",{start:function(t,i,n){var r=e("body"),o=n.options;if(r.css("cursor")){o._cursor=r.css("cursor")}r.css("cursor",o.cursor)},stop:function(t,i,n){var r=n.options;if(r._cursor){e("body").css("cursor",r._cursor)}}});e.ui.plugin.add("draggable","opacity",{start:function(t,i,n){var r=e(i.helper),o=n.options;if(r.css("opacity")){o._opacity=r.css("opacity")}r.css("opacity",o.opacity)},stop:function(t,i,n){var r=n.options;if(r._opacity){e(i.helper).css("opacity",r._opacity)}}});e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){if(!i.scrollParentNotHidden){i.scrollParentNotHidden=i.helper.scrollParent(false)}if(i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML"){i.overflowOffset=i.scrollParentNotHidden.offset()}},drag:function(t,i,n){var r=n.options,o=false,s=n.scrollParentNotHidden[0],a=n.document[0];if(s!==a&&s.tagName!=="HTML"){if(!r.axis||r.axis!=="x"){if(n.overflowOffset.top+s.offsetHeight-t.pageY<r.scrollSensitivity){s.scrollTop=o=s.scrollTop+r.scrollSpeed}else if(t.pageY-n.overflowOffset.top<r.scrollSensitivity){s.scrollTop=o=s.scrollTop-r.scrollSpeed}}if(!r.axis||r.axis!=="y"){if(n.overflowOffset.left+s.offsetWidth-t.pageX<r.scrollSensitivity){s.scrollLeft=o=s.scrollLeft+r.scrollSpeed}else if(t.pageX-n.overflowOffset.left<r.scrollSensitivity){s.scrollLeft=o=s.scrollLeft-r.scrollSpeed}}}else{if(!r.axis||r.axis!=="x"){if(t.pageY-e(a).scrollTop()<r.scrollSensitivity){o=e(a).scrollTop(e(a).scrollTop()-r.scrollSpeed)}else if(e(window).height()-(t.pageY-e(a).scrollTop())<r.scrollSensitivity){o=e(a).scrollTop(e(a).scrollTop()+r.scrollSpeed)}}if(!r.axis||r.axis!=="y"){if(t.pageX-e(a).scrollLeft()<r.scrollSensitivity){o=e(a).scrollLeft(e(a).scrollLeft()-r.scrollSpeed)}else if(e(window).width()-(t.pageX-e(a).scrollLeft())<r.scrollSensitivity){o=e(a).scrollLeft(e(a).scrollLeft()+r.scrollSpeed)}}}if(o!==false&&e.ui.ddmanager&&!r.dropBehaviour){e.ui.ddmanager.prepareOffsets(n,t)}}});e.ui.plugin.add("draggable","snap",{start:function(t,i,n){var r=n.options;n.snapElements=[];e(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each((function(){var t=e(this),i=t.offset();if(this!==n.element[0]){n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})}}))},drag:function(t,i,n){var r,o,s,a,l,c,d,u,h,p,f=n.options,g=f.snapTolerance,m=i.offset.left,v=m+n.helperProportions.width,b=i.offset.top,y=b+n.helperProportions.height;for(h=n.snapElements.length-1;h>=0;h--){l=n.snapElements[h].left-n.margins.left;c=l+n.snapElements[h].width;d=n.snapElements[h].top-n.margins.top;u=d+n.snapElements[h].height;if(v<l-g||m>c+g||y<d-g||b>u+g||!e.contains(n.snapElements[h].item.ownerDocument,n.snapElements[h].item)){if(n.snapElements[h].snapping){if(n.options.snap.release){n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[h].item}))}}n.snapElements[h].snapping=false;continue}if(f.snapMode!=="inner"){r=Math.abs(d-y)<=g;o=Math.abs(u-b)<=g;s=Math.abs(l-v)<=g;a=Math.abs(c-m)<=g;if(r){i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top}if(o){i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top}if(s){i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left}if(a){i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left}}p=r||o||s||a;if(f.snapMode!=="outer"){r=Math.abs(d-b)<=g;o=Math.abs(u-y)<=g;s=Math.abs(l-m)<=g;a=Math.abs(c-v)<=g;if(r){i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top}if(o){i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top}if(s){i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left}if(a){i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left}}if(!n.snapElements[h].snapping&&(r||o||s||a||p)){if(n.options.snap.snap){n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[h].item}))}}n.snapElements[h].snapping=r||o||s||a||p}}});e.ui.plugin.add("draggable","stack",{start:function(t,i,n){var r,o=n.options,s=e.makeArray(e(o.stack)).sort((function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)}));if(!s.length){return}r=parseInt(e(s[0]).css("zIndex"),10)||0;e(s).each((function(t){e(this).css("zIndex",r+t)}));this.css("zIndex",r+s.length)}});e.ui.plugin.add("draggable","zIndex",{start:function(t,i,n){var r=e(i.helper),o=n.options;if(r.css("zIndex")){o._zIndex=r.css("zIndex")}r.css("zIndex",o.zIndex)},stop:function(t,i,n){var r=n.options;if(r._zIndex){e(i.helper).css("zIndex",r._zIndex)}}});var pe=e.ui.draggable;e.widget("ui.resizable",e.ui.mouse,{version:"1.14.1",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,i){var n,r=false,o=e(t).css("overflow");if(o==="hidden"){return false}if(o==="scroll"){return true}n=i&&i==="left"?"scrollLeft":"scrollTop";if(t[n]>0){return true}try{t[n]=1;r=t[n]>0;t[n]=0}catch(e){}return r},_create:function(){var t,i=this.options,n=this;this._addClass("ui-resizable");e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap(e("<div class='ui-wrapper'></div>").css({overflow:"hidden",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")};this.element.css(t);this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this._proportionallyResize()}this._setupHandles();if(i.autoHide){e(this.element).on("mouseenter",(function(){if(i.disabled){return}n._removeClass("ui-resizable-autohide");n._handles.show()})).on("mouseleave",(function(){if(i.disabled){return}if(!n.resizing){n._addClass("ui-resizable-autohide");n._handles.hide()}}))}this._mouseInit()},_destroy:function(){this._mouseDestroy();this._addedHandles.remove();var t,i=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable")};if(this.elementIsWrapper){i(this.element);t=this.element;this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t);t.remove()}this.originalElement.css("resize",this.originalResizeStyle);i(this.originalElement);return this},_setOption:function(e,t){this._super(e,t);switch(e){case"handles":this._removeHandles();this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!t;break;default:break}},_setupHandles:function(){var t=this.options,i,n,r,o,s,a=this;this.handles=t.handles||(!e(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=e();this._addedHandles=e();if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}r=this.handles.split(",");this.handles={};for(n=0;n<r.length;n++){i=String.prototype.trim.call(r[n]);o="ui-resizable-"+i;s=e("<div>");this._addClass(s,"ui-resizable-handle "+o);s.css({zIndex:t.zIndex});this.handles[i]=".ui-resizable-"+i;if(!this.element.children(this.handles[i]).length){this.element.append(s);this._addedHandles=this._addedHandles.add(s)}}}this._renderAxis=function(t){var i,n,r,o;t=t||this.element;for(i in this.handles){if(this.handles[i].constructor===String){this.handles[i]=this.element.children(this.handles[i]).first().show()}else if(this.handles[i].jquery||this.handles[i].nodeType){this.handles[i]=e(this.handles[i]);this._on(this.handles[i],{mousedown:a._mouseDown})}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){n=e(this.handles[i],this.element);o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth();r=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");t.css(r,o);this._proportionallyResize()}this._handles=this._handles.add(this.handles[i])}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",(function(){if(!a.resizing){if(this.className){s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}a.axis=s&&s[1]?s[1]:"se"}}));if(t.autoHide){this._handles.hide();this._addClass("ui-resizable-autohide")}},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(t){var i,n,r=false;for(i in this.handles){n=e(this.handles[i])[0];if(n===t.target||e.contains(n,t.target)){r=true}}return!this.options.disabled&&r},_mouseStart:function(t){var i,n,r,o,s=this.options,a=this.element;this.resizing=true;this._renderProxy();i=this._num(this.helper.css("left"));n=this._num(this.helper.css("top"));if(s.containment){i+=e(s.containment).scrollLeft()||0;n+=e(s.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:i,top:n};if(!this._helper){o=this._calculateAdjustedElementDimensions(a)}this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width,height:o.height};this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:o.width,height:o.height};this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()};this.originalPosition={left:i,top:n};this.originalMousePosition={left:t.pageX,top:t.pageY};this.aspectRatio=typeof s.aspectRatio==="number"?s.aspectRatio:this.originalSize.width/this.originalSize.height||1;r=e(".ui-resizable-"+this.axis).css("cursor");e("body").css("cursor",r==="auto"?this.axis+"-resize":r);this._addClass("ui-resizable-resizing");this._propagate("start",t);return true},_mouseDrag:function(t){var i,n,r=this.originalMousePosition,o=this.axis,s=t.pageX-r.left||0,a=t.pageY-r.top||0,l=this._change[o];this._updatePrevProperties();if(!l){return false}i=l.apply(this,[t,s,a]);this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey){i=this._updateRatio(i,t)}i=this._respectSize(i,t);this._updateCache(i);this._propagate("resize",t);n=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!e.isEmptyObject(n)){this._updatePrevProperties();this._trigger("resize",t,this.ui());this._applyChanges()}return false},_mouseStop:function(t){this.resizing=false;var i,n,r,o,s,a,l,c=this.options,d=this;if(this._helper){i=this._proportionallyResizeElements;n=i.length&&/textarea/i.test(i[0].nodeName);r=n&&this._hasScroll(i[0],"left")?0:d.sizeDiff.height;o=n?0:d.sizeDiff.width;s={width:d.helper.width()-o,height:d.helper.height()-r};a=parseFloat(d.element.css("left"))+(d.position.left-d.originalPosition.left)||null;l=parseFloat(d.element.css("top"))+(d.position.top-d.originalPosition.top)||null;if(!c.animate){this.element.css(e.extend(s,{top:l,left:a}))}d.helper.height(d.size.height);d.helper.width(d.size.width);if(this._helper&&!c.animate){this._proportionallyResize()}}e("body").css("cursor","auto");this._removeClass("ui-resizable-resizing");this._propagate("stop",t);if(this._helper){this.helper.remove()}return false},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};if(this.position.top!==this.prevPosition.top){e.top=this.position.top+"px"}if(this.position.left!==this.prevPosition.left){e.left=this.position.left+"px"}this.helper.css(e);if(this.size.width!==this.prevSize.width){e.width=this.size.width+"px";this.helper.width(e.width)}if(this.size.height!==this.prevSize.height){e.height=this.size.height+"px";this.helper.height(e.height)}return e},_updateVirtualBoundaries:function(e){var t,i,n,r,o,s=this.options;o={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:Infinity,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:Infinity};if(this._aspectRatio||e){t=o.minHeight*this.aspectRatio;n=o.minWidth/this.aspectRatio;i=o.maxHeight*this.aspectRatio;r=o.maxWidth/this.aspectRatio;if(t>o.minWidth){o.minWidth=t}if(n>o.minHeight){o.minHeight=n}if(i<o.maxWidth){o.maxWidth=i}if(r<o.maxHeight){o.maxHeight=r}}this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset();if(this._isNumber(e.left)){this.position.left=e.left}if(this._isNumber(e.top)){this.position.top=e.top}if(this._isNumber(e.height)){this.size.height=e.height}if(this._isNumber(e.width)){this.size.width=e.width}},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;if(this._isNumber(e.height)){e.width=e.height*this.aspectRatio}else if(this._isNumber(e.width)){e.height=e.width/this.aspectRatio}if(n==="sw"){e.left=t.left+(i.width-e.width);e.top=null}if(n==="nw"){e.top=t.top+(i.height-e.height);e.left=t.left+(i.width-e.width)}return e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,r=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,s=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);if(o){e.width=t.minWidth}if(s){e.height=t.minHeight}if(n){e.width=t.maxWidth}if(r){e.height=t.maxHeight}if(o&&c){e.left=a-t.minWidth}if(n&&c){e.left=a-t.maxWidth}if(s&&d){e.top=l-t.minHeight}if(r&&d){e.top=l-t.maxHeight}if(!e.width&&!e.height&&!e.left&&e.top){e.top=null}else if(!e.width&&!e.height&&!e.top&&e.left){e.left=null}return e},_getPaddingPlusBorderDimensions:function(e){var t=0,i=[],n=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],r=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];for(;t<4;t++){i[t]=parseFloat(n[t])||0;i[t]+=parseFloat(r[t])||0}return{height:i[0]+i[2],width:i[1]+i[3]}},_calculateAdjustedElementDimensions:function(e){var t,i,n,r=e.get(0);if(e.css("box-sizing")!=="content-box"||!this._hasScroll(r)&&!this._hasScroll(r,"left")){return{height:parseFloat(e.css("height")),width:parseFloat(e.css("width"))}}t=parseFloat(r.style.width);i=parseFloat(r.style.height);n=this._getPaddingPlusBorderDimensions(e);t=isNaN(t)?this._getElementTheoreticalSize(e,n,"width"):t;i=isNaN(i)?this._getElementTheoreticalSize(e,n,"height"):i;return{height:i,width:t}},_getElementTheoreticalSize:function(e,t,i){var n=Math.max(0,Math.ceil(e.get(0)["offset"+i[0].toUpperCase()+i.slice(1)]-t[i]-.5))||0;return n},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return}var e,t=0,i=this.helper||this.element;for(;t<this._proportionallyResizeElements.length;t++){e=this._proportionallyResizeElements[t];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(e)}e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e("<div></div>").css({overflow:"hidden"});this._addClass(this.helper,this._helper);this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize,r=this.originalPosition;return{top:r.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]);if(t!=="resize"){this._trigger(t,i,this.ui())}},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),n=i.options,r=i._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),s=o&&i._hasScroll(r[0],"left")?0:i.sizeDiff.height,a=o?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-s},c=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,d=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,d&&c?{top:d,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};if(r&&r.length){e(r[0]).css({width:n.width,height:n.height})}i._updateCache(n);i._propagate("resize",t)}})}});e.ui.plugin.add("resizable","containment",{start:function(){var t,i,n,r,o,s,a,l=e(this).resizable("instance"),c=l.options,d=l.element,u=c.containment,h=u instanceof e?u.get(0):/parent/.test(u)?d.parent().get(0):u;if(!h){return}l.containerElement=e(h);if(/document/.test(u)||u===document){l.containerOffset={left:0,top:0};l.containerPosition={left:0,top:0};l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}}else{t=e(h);i=[];e(["Top","Right","Left","Bottom"]).each((function(e,n){i[e]=l._num(t.css("padding"+n))}));l.containerOffset=t.offset();l.containerPosition=t.position();l.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]};n=l.containerOffset;r=l.containerSize.height;o=l.containerSize.width;s=l._hasScroll(h,"left")?h.scrollWidth:o;a=l._hasScroll(h)?h.scrollHeight:r;l.parentData={element:h,left:n.left,top:n.top,width:s,height:a}}},resize:function(t){var i,n,r,o,s=e(this).resizable("instance"),a=s.options,l=s.containerOffset,c=s.position,d=s._aspectRatio||t.shiftKey,u={top:0,left:0},h=s.containerElement,p=true;if(h[0]!==document&&/static/.test(h.css("position"))){u=l}if(c.left<(s._helper?l.left:0)){s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-u.left);if(d){s.size.height=s.size.width/s.aspectRatio;p=false}s.position.left=a.helper?l.left:0}if(c.top<(s._helper?l.top:0)){s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top);if(d){s.size.width=s.size.height*s.aspectRatio;p=false}s.position.top=s._helper?l.top:0}r=s.containerElement.get(0)===s.element.parent().get(0);o=/relative|absolute/.test(s.containerElement.css("position"));if(r&&o){s.offset.left=s.parentData.left+s.position.left;s.offset.top=s.parentData.top+s.position.top}else{s.offset.left=s.element.offset().left;s.offset.top=s.element.offset().top}i=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-u.left:s.offset.left-l.left));n=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-u.top:s.offset.top-l.top));if(i+s.size.width>=s.parentData.width){s.size.width=s.parentData.width-i;if(d){s.size.height=s.size.width/s.aspectRatio;p=false}}if(n+s.size.height>=s.parentData.height){s.size.height=s.parentData.height-n;if(d){s.size.width=s.size.height*s.aspectRatio;p=false}}if(!p){s.position.left=s.prevPosition.left;s.position.top=s.prevPosition.top;s.size.width=s.prevSize.width;s.size.height=s.prevSize.height}},stop:function(){var t=e(this).resizable("instance"),i=t.options,n=t.containerOffset,r=t.containerPosition,o=t.containerElement,s=e(t.helper),a=s.offset(),l=s.outerWidth()-t.sizeDiff.width,c=s.outerHeight()-t.sizeDiff.height;if(t._helper&&!i.animate&&/relative/.test(o.css("position"))){e(this).css({left:a.left-r.left-n.left,width:l,height:c})}if(t._helper&&!i.animate&&/static/.test(o.css("position"))){e(this).css({left:a.left-r.left-n.left,width:l,height:c})}}});e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each((function(){var i=e(this),n=t._calculateAdjustedElementDimensions(i);i.data("ui-resizable-alsoresize",{width:n.width,height:n.height,left:parseFloat(i.css("left")),top:parseFloat(i.css("top"))})}))},resize:function(t,i){var n=e(this).resizable("instance"),r=n.options,o=n.originalSize,s=n.originalPosition,a={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0};e(r.alsoResize).each((function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),r={},o=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,(function(e,t){var i=(n[t]||0)+(a[t]||0);if(i&&i>=0){r[t]=i||null}}));t.css(r)}))},stop:function(){e(this).removeData("ui-resizable-alsoresize")}});e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.size;t.ghost=t.originalElement.clone();t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0});t._addClass(t.ghost,"ui-resizable-ghost");if(e.uiBackCompat===true&&typeof t.options.ghost==="string"){t.ghost.addClass(this.options.ghost)}t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");if(t.ghost){t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})}},stop:function(){var t=e(this).resizable("instance");if(t.ghost&&t.helper){t.helper.get(0).removeChild(t.ghost.get(0))}}});e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),n=i.options,r=i.size,o=i.originalSize,s=i.originalPosition,a=i.axis,l=typeof n.grid==="number"?[n.grid,n.grid]:n.grid,c=l[0]||1,d=l[1]||1,u=Math.round((r.width-o.width)/c)*c,h=Math.round((r.height-o.height)/d)*d,p=o.width+u,f=o.height+h,g=n.maxWidth&&n.maxWidth<p,m=n.maxHeight&&n.maxHeight<f,v=n.minWidth&&n.minWidth>p,b=n.minHeight&&n.minHeight>f;n.grid=l;if(v){p+=c}if(b){f+=d}if(g){p-=c}if(m){f-=d}if(/^(se|s|e)$/.test(a)){i.size.width=p;i.size.height=f}else if(/^(ne)$/.test(a)){i.size.width=p;i.size.height=f;i.position.top=s.top-h}else if(/^(sw)$/.test(a)){i.size.width=p;i.size.height=f;i.position.left=s.left-u}else{if(f-d<=0||p-c<=0){t=i._getPaddingPlusBorderDimensions(this)}if(f-d>0){i.size.height=f;i.position.top=s.top-h}else{f=d-t.height;i.size.height=f;i.position.top=s.top+o.height-f}if(p-c>0){i.size.width=p;i.position.left=s.left-u}else{p=c-t.width;i.size.width=p;i.position.left=s.left+o.width-p}}}});var fe=e.ui.resizable;e.widget("ui.dialog",{version:"1.14.1",options:{appendTo:"body",autoOpen:true,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:true,closeText:"Close",draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;if(i<0){e(this).css("top",t.top-i)}}},resizable:true,show:null,title:null,uiDialogTitleHeadingLevel:0,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions:{maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");if(this.options.title==null&&this.originalTitle!=null){this.options.title=this.originalTitle}if(this.options.disabled){this.options.disabled=false}this._createWrapper();this.element.show().removeAttr("title").appendTo(this.uiDialog);this._addClass("ui-dialog-content","ui-widget-content");this._createTitlebar();this._createButtonPane();if(this.options.draggable&&e.fn.draggable){this._makeDraggable()}if(this.options.resizable&&e.fn.resizable){this._makeResizable()}this._isOpen=false;this._trackFocus()},_init:function(){if(this.options.autoOpen){this.open()}},_appendTo:function(){var t=this.options.appendTo;if(t&&(t.jquery||t.nodeType)){return e(t)}return this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().css(this.originalCss).detach();this.uiDialog.remove();if(this.originalTitle){this.element.attr("title",this.originalTitle)}e=t.parent.children().eq(t.index);if(e.length&&e[0]!==this.element[0]){e.before(this.element)}else{t.parent.append(this.element)}},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i=this;if(!this._isOpen||this._trigger("beforeClose",t)===false){return}this._isOpen=false;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();if(!this.opener.filter(":focusable").trigger("focus").length){e(this.document[0].activeElement).trigger("blur")}this._hide(this.uiDialog,this.options.hide,(function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var n=false,r=this.uiDialog.siblings(".ui-front:visible").map((function(){return+e(this).css("z-index")})).get(),o=Math.max.apply(null,r);if(o>=+this.uiDialog.css("z-index")){this.uiDialog.css("z-index",o+1);n=true}if(n&&!i){this._trigger("focus",t)}return n},open:function(){var t=this;if(this._isOpen){if(this._moveToTop()){this._focusTabbable()}return}this._isOpen=true;this.opener=e(this.document[0].activeElement);this._size();this._position();this._createOverlay();this._moveToTop(null,true);if(this.overlay){this.overlay.css("z-index",this.uiDialog.css("z-index")-1)}this._show(this.uiDialog,this.options.show,(function(){t._focusTabbable();t._trigger("focus")}));this._makeFocusTarget();this._trigger("open")},_focusTabbable:function(){var e=this._focusedElement;if(!e){e=this.element.find("[autofocus]")}if(!e.length){e=this.element.find(":tabbable")}if(!e.length){e=this.uiDialogButtonPane.find(":tabbable")}if(!e.length){e=this.uiDialogTitlebarClose.filter(":tabbable")}if(!e.length){e=this.uiDialog}e.eq(0).trigger("focus")},_restoreTabbableFocus:function(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);if(!i){this._focusTabbable()}},_keepFocus:function(e){e.preventDefault();this._restoreTabbableFocus()},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog","aria-modal":this.options.modal?"true":null}).appendTo(this._appendTo());this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front");this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE){t.preventDefault();this.close(t);return}if(t.keyCode!==e.ui.keyCode.TAB||t.isDefaultPrevented()){return}var i=this.uiDialog.find(":tabbable"),n=i.first(),r=i.last();if((t.target===r[0]||t.target===this.uiDialog[0])&&!t.shiftKey){this._delay((function(){n.trigger("focus")}));t.preventDefault()}else if((t.target===n[0]||t.target===this.uiDialog[0])&&t.shiftKey){this._delay((function(){r.trigger("focus")}));t.preventDefault()}},mousedown:function(e){if(this._moveToTop(e)){this._focusTabbable()}}});if(!this.element.find("[aria-describedby]").length){this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})}},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>");this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix");this._on(this.uiDialogTitlebar,{mousedown:function(t){if(!e(t.target).closest(".ui-dialog-titlebar-close")){this.uiDialog.trigger("focus")}}});this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:false}).appendTo(this.uiDialogTitlebar);this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close");this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault();this.close(e)}});var i=Number.isInteger(this.options.uiDialogTitleHeadingLevel)&&this.options.uiDialogTitleHeadingLevel>0&&this.options.uiDialogTitleHeadingLevel<=6?"h"+this.options.uiDialogTitleHeadingLevel:"span";t=e("<"+i+">").uniqueId().prependTo(this.uiDialogTitlebar);this._addClass(t,"ui-dialog-title");this._title(t);this.uiDialogTitlebar.prependTo(this.uiDialog);this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){if(this.options.title){e.text(this.options.title)}else{e.html("&#160;")}},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>");this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix");this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane);this._addClass(this.uiButtonSet,"ui-dialog-buttonset");this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if(e.isEmptyObject(i)||Array.isArray(i)&&!i.length){this._removeClass(this.uiDialog,"ui-dialog-buttons");return}e.each(i,(function(i,n){var r,o;n=typeof n==="function"?{click:n,text:i}:n;n=e.extend({type:"button"},n);r=n.click;o={icon:n.icon,iconPosition:n.iconPosition,showLabel:n.showLabel,icons:n.icons,text:n.text};delete n.click;delete n.icon;delete n.iconPosition;delete n.showLabel;delete n.icons;if(typeof n.text==="boolean"){delete n.text}e("<button></button>",n).button(o).appendTo(t.uiButtonSet).on("click",(function(){r.apply(t.element[0],arguments)}))}));this._addClass(this.uiDialog,"ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){var t=this,i=this.options;function n(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,r){t._addClass(e(this),"ui-dialog-dragging");t._blockFrames();t._trigger("dragStart",i,n(r))},drag:function(e,i){t._trigger("drag",e,n(i))},stop:function(r,o){var s=o.offset.left-t.document.scrollLeft(),a=o.offset.top-t.document.scrollTop();i.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" "+"top"+(a>=0?"+":"")+a,of:t.window};t._removeClass(e(this),"ui-dialog-dragging");t._unblockFrames();t._trigger("dragStop",r,n(o))}})},_makeResizable:function(){var t=this,i=this.options,n=i.resizable,r=this.uiDialog.css("position"),o=typeof n==="string"?n:"n,e,s,w,se,sw,ne,nw";function s(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:o,start:function(i,n){t._addClass(e(this),"ui-dialog-resizing");t._blockFrames();t._trigger("resizeStart",i,s(n))},resize:function(e,i){t._trigger("resize",e,s(i))},stop:function(n,r){var o=t.uiDialog.offset(),a=o.left-t.document.scrollLeft(),l=o.top-t.document.scrollTop();i.height=t.uiDialog.height();i.width=t.uiDialog.width();i.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" "+"top"+(l>=0?"+":"")+l,of:t.window};t._removeClass(e(this),"ui-dialog-resizing");t._unblockFrames();t._trigger("resizeStop",n,s(r))}}).css("position",r)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget();this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);if(i!==-1){t.splice(i,1)}},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");if(!e){e=[];this.document.data("ui-dialog-instances",e)}return e},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");if(!e){this.uiDialog.show()}this.uiDialog.position(this.options.position);if(!e){this.uiDialog.hide()}},_setOptions:function(t){var i=this,n=false,r={};e.each(t,(function(e,t){i._setOption(e,t);if(e in i.sizeRelatedOptions){n=true}if(e in i.resizableRelatedOptions){r[e]=t}}));if(n){this._size();this._position()}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option",r)}},_setOption:function(t,i){var n,r,o=this.uiDialog;if(t==="disabled"){return}this._super(t,i);if(t==="appendTo"){this.uiDialog.appendTo(this._appendTo())}if(t==="buttons"){this._createButtons()}if(t==="closeText"){this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()})}if(t==="draggable"){n=o.is(":data(ui-draggable)");if(n&&!i){o.draggable("destroy")}if(!n&&i){this._makeDraggable()}}if(t==="position"){this._position()}if(t==="resizable"){r=o.is(":data(ui-resizable)");if(r&&!i){o.resizable("destroy")}if(r&&typeof i==="string"){o.resizable("option","handles",i)}if(!r&&i!==false){this._makeResizable()}}if(t==="title"){this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))}if(t==="modal"){o.attr("aria-modal",i?"true":null)}},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(n.minWidth>n.width){n.width=n.minWidth}e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight();t=Math.max(0,n.minHeight-e);i=typeof n.maxHeight==="number"?Math.max(0,n.maxHeight-e):"none";if(n.height==="auto"){this.element.css({minHeight:t,maxHeight:i,height:"auto"})}else{this.element.height(Math.max(0,n.height-e))}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map((function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]}))},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_allowInteraction:function(t){if(e(t.target).closest(".ui-dialog").length){return true}return!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(!this.options.modal){return}var t=true;this._delay((function(){t=false}));if(!this.document.data("ui-dialog-overlays")){this.document.on("focusin.ui-dialog",function(e){if(t){return}var i=this._trackingInstances()[0];if(!i._allowInteraction(e)){e.preventDefault();i._focusTabbable()}}.bind(this))}this.overlay=e("<div>").appendTo(this._appendTo());this._addClass(this.overlay,null,"ui-widget-overlay ui-front");this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)},_destroyOverlay:function(){if(!this.options.modal){return}if(this.overlay){var e=this.document.data("ui-dialog-overlays")-1;if(!e){this.document.off("focusin.ui-dialog");this.document.removeData("ui-dialog-overlays")}else{this.document.data("ui-dialog-overlays",e)}this.overlay.remove();this.overlay=null}}});if(e.uiBackCompat===true){e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super();this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){if(e==="dialogClass"){this.uiDialog.removeClass(this.options.dialogClass).addClass(t)}this._superApply(arguments)}})}var ge=e.ui.dialog;e.widget("ui.droppable",{version:"1.14.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:true,greedy:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,t=this.options,i=t.accept;this.isover=false;this.isout=true;this.accept=typeof i==="function"?i:function(e){return e.is(i)};this.proportions=function(){if(arguments.length){e=arguments[0]}else{return e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}}};this._addToManager(t.scope);if(t.addClasses){this._addClass("ui-droppable")}},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[];e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){var t=0;for(;t<e.length;t++){if(e[t]===this){e.splice(t,1)}}},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,i){if(t==="accept"){this.accept=typeof i==="function"?i:function(e){return e.is(i)}}else if(t==="scope"){var n=e.ui.ddmanager.droppables[this.options.scope];this._splice(n);this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this._addActiveClass();if(i){this._trigger("activate",t,this.ui(i))}},_deactivate:function(t){var i=e.ui.ddmanager.current;this._removeActiveClass();if(i){this._trigger("deactivate",t,this.ui(i))}},_over:function(t){var i=e.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],i.currentItem||i.element)){this._addHoverClass();this._trigger("over",t,this.ui(i))}},_out:function(t){var i=e.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],i.currentItem||i.element)){this._removeHoverClass();this._trigger("out",t,this.ui(i))}},_drop:function(t,i){var n=i||e.ui.ddmanager.current,r=false;if(!n||(n.currentItem||n.element)[0]===this.element[0]){return false}this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each((function(){var i=e(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===n.options.scope&&i.accept.call(i.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t)){r=true;return false}}));if(r){return false}if(this.accept.call(this.element[0],n.currentItem||n.element)){this._removeActiveClass();this._removeHoverClass();this._trigger("drop",t,this.ui(n));return this.element}return false},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});e.ui.intersect=function(){function e(e,t,i){return e>=t&&e<t+i}return function(t,i,n,r){if(!i.offset){return false}var o=(t.positionAbs||t.position.absolute).left+t.margins.left,s=(t.positionAbs||t.position.absolute).top+t.margins.top,a=o+t.helperProportions.width,l=s+t.helperProportions.height,c=i.offset.left,d=i.offset.top,u=c+i.proportions().width,h=d+i.proportions().height;switch(n){case"fit":return c<=o&&a<=u&&d<=s&&l<=h;case"intersect":return c<o+t.helperProportions.width/2&&a-t.helperProportions.width/2<u&&d<s+t.helperProportions.height/2&&l-t.helperProportions.height/2<h;case"pointer":return e(r.pageY,d,i.proportions().height)&&e(r.pageX,c,i.proportions().width);case"touch":return(s>=d&&s<=h||l>=d&&l<=h||s<d&&l>h)&&(o>=c&&o<=u||a>=c&&a<=u||o<c&&a>u);default:return false}}}();e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var n,r,o=e.ui.ddmanager.droppables[t.options.scope]||[],s=i?i.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<o.length;n++){if(o[n].options.disabled||t&&!o[n].accept.call(o[n].element[0],t.currentItem||t.element)){continue}for(r=0;r<a.length;r++){if(a[r]===o[n].element[0]){o[n].proportions().height=0;continue e}}o[n].visible=o[n].element.css("display")!=="none";if(!o[n].visible){continue}if(s==="mousedown"){o[n]._activate.call(o[n],i)}o[n].offset=o[n].element.offset();o[n].proportions({width:o[n].element[0].offsetWidth,height:o[n].element[0].offsetHeight})}},drop:function(t,i){var n=false;e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),(function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,i)){n=this._drop.call(this,i)||n}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)){this.isout=true;this.isover=false;this._deactivate.call(this,i)}}));return n},dragStart:function(t,i){t.element.parentsUntil("body").on("scroll.droppable",(function(){if(!t.options.refreshPositions){e.ui.ddmanager.prepareOffsets(t,i)}}))},drag:function(t,i){if(t.options.refreshPositions){e.ui.ddmanager.prepareOffsets(t,i)}e.each(e.ui.ddmanager.droppables[t.options.scope]||[],(function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var n,r,o,s=e.ui.intersect(t,this,this.options.tolerance,i),a=!s&&this.isover?"isout":s&&!this.isover?"isover":null;if(!a){return}if(this.options.greedy){r=this.options.scope;o=this.element.parents(":data(ui-droppable)").filter((function(){return e(this).droppable("instance").options.scope===r}));if(o.length){n=e(o[0]).droppable("instance");n.greedyChild=a==="isover"}}if(n&&a==="isover"){n.isover=false;n.isout=true;n._out.call(n,i)}this[a]=true;this[a==="isout"?"isover":"isout"]=false;this[a==="isover"?"_over":"_out"].call(this,i);if(n&&a==="isout"){n.isout=false;n.isover=true;n._over.call(n,i)}}))},dragStop:function(t,i){t.element.parentsUntil("body").off("scroll.droppable");if(!t.options.refreshPositions){e.ui.ddmanager.prepareOffsets(t,i)}}};if(e.uiBackCompat===true){e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:false,activeClass:false},_addActiveClass:function(){this._super();if(this.options.activeClass){this.element.addClass(this.options.activeClass)}},_removeActiveClass:function(){this._super();if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}},_addHoverClass:function(){this._super();if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}},_removeHoverClass:function(){this._super();if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}}})}var me=e.ui.droppable;var ve=e.widget("ui.progressbar",{version:"1.14.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.attr({role:"progressbar","aria-valuemin":this.min});this._addClass("ui-progressbar","ui-widget ui-widget-content");this.valueDiv=e("<div>").appendTo(this.element);this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header");this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow");this.valueDiv.remove()},value:function(e){if(e===undefined){return this.options.value}this.options.value=this._constrainedValue(e);this._refreshValue()},_constrainedValue:function(e){if(e===undefined){e=this.options.value}this.indeterminate=e===false;if(typeof e!=="number"){e=0}return this.indeterminate?false:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value;this._super(e);this.options.value=this._constrainedValue(t);this._refreshValue()},_setOption:function(e,t){if(e==="max"){t=Math.max(this.min,t)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e);this.element.attr("aria-disabled",e);this._toggleClass(null,"ui-state-disabled",!!e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(i.toFixed(0)+"%");this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate);if(this.indeterminate){this.element.removeAttr("aria-valuenow");if(!this.overlayDiv){this.overlayDiv=e("<div>").appendTo(this.valueDiv);this._addClass(this.overlayDiv,"ui-progressbar-overlay")}}else{this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t});if(this.overlayDiv){this.overlayDiv.remove();this.overlayDiv=null}}if(this.oldValue!==t){this.oldValue=t;this._trigger("change")}if(t===this.options.max){this._trigger("complete")}}});var be=e.widget("ui.selectable",e.ui.mouse,{version:"1.14.1",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t=this;this._addClass("ui-selectable");this.dragged=false;this.refresh=function(){t.elementPos=e(t.element[0]).offset();t.selectees=e(t.options.filter,t.element[0]);t._addClass(t.selectees,"ui-selectee");t.selectees.each((function(){var i=e(this),n=i.offset(),r=this.getBoundingClientRect(),o={left:n.left-t.elementPos.left,top:n.top-t.elementPos.top};e.data(this,"selectable-item",{element:this,$element:i,left:o.left,top:o.top,right:o.left+r.width,bottom:o.top+r.height,startselected:false,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})}))};this.refresh();this._mouseInit();this.helper=e("<div>");this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item");this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY];this.elementPos=e(this.element[0]).offset();if(this.options.disabled){return}this.selectees=e(n.filter,this.element[0]);this._trigger("start",t);e(n.appendTo).append(this.helper);this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0});if(n.autoRefresh){this.refresh()}this.selectees.filter(".ui-selected").each((function(){var n=e.data(this,"selectable-item");n.startselected=true;if(!t.metaKey&&!t.ctrlKey){i._removeClass(n.$element,"ui-selected");n.selected=false;i._addClass(n.$element,"ui-unselecting");n.unselecting=true;i._trigger("unselecting",t,{unselecting:n.element})}}));e(t.target).parents().addBack().each((function(){var n,r=e.data(this,"selectable-item");if(r){n=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected");i._removeClass(r.$element,n?"ui-unselecting":"ui-selected")._addClass(r.$element,n?"ui-selecting":"ui-unselecting");r.unselecting=!n;r.selecting=n;r.selected=n;if(n){i._trigger("selecting",t,{selecting:r.element})}else{i._trigger("unselecting",t,{unselecting:r.element})}return false}}))},_mouseDrag:function(t){this.dragged=true;if(this.options.disabled){return}var i,n=this,r=this.options,o=this.opos[0],s=this.opos[1],a=t.pageX,l=t.pageY;if(o>a){i=a;a=o;o=i}if(s>l){i=l;l=s;s=i}this.helper.css({left:o,top:s,width:a-o,height:l-s});this.selectees.each((function(){var i=e.data(this,"selectable-item"),c=false,d={};if(!i||i.element===n.element[0]){return}d.left=i.left+n.elementPos.left;d.right=i.right+n.elementPos.left;d.top=i.top+n.elementPos.top;d.bottom=i.bottom+n.elementPos.top;if(r.tolerance==="touch"){c=!(d.left>a||d.right<o||d.top>l||d.bottom<s)}else if(r.tolerance==="fit"){c=d.left>o&&d.right<a&&d.top>s&&d.bottom<l}if(c){if(i.selected){n._removeClass(i.$element,"ui-selected");i.selected=false}if(i.unselecting){n._removeClass(i.$element,"ui-unselecting");i.unselecting=false}if(!i.selecting){n._addClass(i.$element,"ui-selecting");i.selecting=true;n._trigger("selecting",t,{selecting:i.element})}}else{if(i.selecting){if((t.metaKey||t.ctrlKey)&&i.startselected){n._removeClass(i.$element,"ui-selecting");i.selecting=false;n._addClass(i.$element,"ui-selected");i.selected=true}else{n._removeClass(i.$element,"ui-selecting");i.selecting=false;if(i.startselected){n._addClass(i.$element,"ui-unselecting");i.unselecting=true}n._trigger("unselecting",t,{unselecting:i.element})}}if(i.selected){if(!t.metaKey&&!t.ctrlKey&&!i.startselected){n._removeClass(i.$element,"ui-selected");i.selected=false;n._addClass(i.$element,"ui-unselecting");i.unselecting=true;n._trigger("unselecting",t,{unselecting:i.element})}}}}));return false},_mouseStop:function(t){var i=this;this.dragged=false;e(".ui-unselecting",this.element[0]).each((function(){var n=e.data(this,"selectable-item");i._removeClass(n.$element,"ui-unselecting");n.unselecting=false;n.startselected=false;i._trigger("unselected",t,{unselected:n.element})}));e(".ui-selecting",this.element[0]).each((function(){var n=e.data(this,"selectable-item");i._removeClass(n.$element,"ui-selecting")._addClass(n.$element,"ui-selected");n.selecting=false;n.selected=true;n.startselected=true;i._trigger("selected",t,{selected:n.element})}));this._trigger("stop",t);this.helper.remove();return false}});var ye=e.widget("ui.selectmenu",[e.ui.formResetMixin,{version:"1.14.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:false,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"};this._drawButton();this._drawMenu();this._bindFormResetHandler();this._rendered=false;this.menuItems=e()},_drawButton:function(){var t,i=this,n=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button);this._on(this.labels,{click:function(e){this.button.trigger("focus");e.preventDefault()}});this.element.hide();this.button=e("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element);this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget");t=e("<span>").appendTo(this.button);this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button);this.buttonItem=this._renderButtonItem(n).appendTo(this.button);if(this.options.width!==false){this._resizeButton()}this._on(this.button,this._buttonEvents);this.button.one("focusin",(function(){if(!i._rendered){i._refreshMenu()}}))},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=e("<div>").append(this.menu);this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front");this.menuWrap.appendTo(this._appendTo());this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(e,i){e.preventDefault();t._select(i.item.data("ui-selectmenu-item"),e)},focus:function(e,i){var n=i.item.data("ui-selectmenu-item");if(t.focusIndex!=null&&n.index!==t.focusIndex){t._trigger("focus",e,{item:n});if(!t.isOpen){t._select(n,e)}}t.focusIndex=n.index;t.button.attr("aria-activedescendant",t.menuItems.eq(n.index).attr("id"))}}).menu("instance");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return false};this.menuInstance._isDivider=function(){return false}},refresh:function(){this._refreshMenu();this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{}));if(this.options.width===null){this._resizeButton()}},_refreshMenu:function(){var e,t=this.element.find("option");this.menu.empty();this._parseOptions(t);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper");this._rendered=true;if(!t.length){return}e=this._getSelectedItem();this.menuInstance.focus(null,e);this._setAria(e.data("ui-selectmenu-item"));this._setOption("disabled",this.element.prop("disabled"))},open:function(e){if(this.options.disabled){return}if(!this._rendered){this._refreshMenu()}else{this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active");this.menuInstance.focus(null,this._getSelectedItem())}if(!this.menuItems.length){return}this.isOpen=true;this._toggleAttr();this._resizeMenu();this._position();this._on(this.document,this._documentClick);this._trigger("open",e)},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){if(!this.isOpen){return}this.isOpen=false;this._toggleAttr();this.range=null;this._off(this.document);this._trigger("close",e)},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var i=e("<span>");this._setText(i,t.label);this._addClass(i,"ui-selectmenu-text");return i},_renderMenu:function(t,i){var n=this,r="";e.each(i,(function(i,o){var s;if(o.optgroup!==r){s=e("<li>",{text:o.optgroup});n._addClass(s,"ui-selectmenu-optgroup","ui-menu-divider"+(o.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""));s.appendTo(t);r=o.optgroup}n._renderItemData(t,o)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var n=e("<li>"),r=e("<div>",{title:i.element.attr("title")});if(i.disabled){this._addClass(n,null,"ui-state-disabled")}if(i.hidden){n.prop("hidden",true)}else{this._setText(r,i.label)}return n.append(r).appendTo(t)},_setText:function(e,t){if(t){e.text(t)}else{e.html("&#160;")}},_move:function(e,t){var i,n,r=".ui-menu-item";if(this.isOpen){i=this.menuItems.eq(this.focusIndex).parent("li")}else{i=this.menuItems.eq(this.element[0].selectedIndex).parent("li");r+=":not(.ui-state-disabled)"}if(e==="first"||e==="last"){n=i[e==="first"?"prevAll":"nextAll"](r).eq(-1)}else{n=i[e+"All"](r).eq(0)}if(n.length){this.menuInstance.focus(t,n)}},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;if(!this.range){return}e=window.getSelection();e.removeAllRanges();e.addRange(this.range)},_documentClick:{mousedown:function(t){if(!this.isOpen){return}if(!e(t.target).closest(".ui-selectmenu-menu, #"+CSS.escape(this.ids.button)).length){this.close(t)}}},_buttonEvents:{mousedown:function(){var e=window.getSelection();if(e.rangeCount){this.range=e.getRangeAt(0)}},click:function(e){this._setSelection();this._toggle(e)},keydown:function(t){var i=true;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t);i=false;break;case e.ui.keyCode.ENTER:if(this.isOpen){this._selectFocusedItem(t)}break;case e.ui.keyCode.UP:if(t.altKey){this._toggle(t)}else{this._move("prev",t)}break;case e.ui.keyCode.DOWN:if(t.altKey){this._toggle(t)}else{this._move("next",t)}break;case e.ui.keyCode.SPACE:if(this.isOpen){this._selectFocusedItem(t)}else{this._toggle(t)}break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t);i=false}if(i){t.preventDefault()}}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex).parent("li");if(!t.hasClass("ui-state-disabled")){this._select(t.data("ui-selectmenu-item"),e)}},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index;this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(e));this._setAria(e);this._trigger("select",t,{item:e});if(e.index!==i){this._trigger("change",t,{item:e})}this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t});this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){if(e==="icons"){var i=this.button.find("span.ui-icon");this._removeClass(i,null,this.options.icons.button)._addClass(i,null,t.button)}this._super(e,t);if(e==="appendTo"){this.menuWrap.appendTo(this._appendTo())}if(e==="width"){this._resizeButton()}},_setOptionDisabled:function(e){this._super(e);this.menuInstance.option("disabled",e);this.button.attr("aria-disabled",e);this._toggleClass(this.button,null,"ui-state-disabled",e);this.element.prop("disabled",e);if(e){this.button.attr("tabindex",-1);this.close()}else{this.button.attr("tabindex",0)}},_appendTo:function(){var t=this.options.appendTo;if(t){t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)}if(!t||!t[0]){t=this.element.closest(".ui-front, dialog")}if(!t.length){t=this.document[0].body}return t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen);this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;if(e===false){this.button.css("width","");return}if(e===null){e=this.element.show().outerWidth();this.element.hide()}this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()))},_getCreateOptions:function(){var e=this._super();e.disabled=this.element.prop("disabled");return e},_parseOptions:function(t){var i=this,n=[];t.each((function(t,r){n.push(i._parseOption(e(r),t))}));this.items=n},_parseOption:function(e,t){var i=e.parent("optgroup");return{element:e,index:t,value:e.val(),label:e.text(),hidden:i.prop("hidden")||e.prop("hidden"),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||e.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler();this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.labels.attr("for",this.ids.element)}}]);var we=e.widget("ui.slider",e.ui.mouse,{version:"1.14.1",widgetEventPrefix:"slide",options:{animate:false,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content");this._refresh();this._animateOff=false},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var t,i,n=this.options,r=this.element.find(".ui-slider-handle"),o="<span tabindex='0'></span>",s=[];i=n.values&&n.values.length||1;if(r.length>i){r.slice(i).remove();r=r.slice(0,i)}for(t=r.length;t<i;t++){s.push(o)}this.handles=r.add(e(s.join("")).appendTo(this.element));this._addClass(this.handles,"ui-slider-handle","ui-state-default");this.handle=this.handles.eq(0);this.handles.each((function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)}))},_createRange:function(){var t=this.options;if(t.range){if(t.range===true){if(!t.values){t.values=[this._valueMin(),this._valueMin()]}else if(t.values.length&&t.values.length!==2){t.values=[t.values[0],t.values[0]]}else if(Array.isArray(t.values)){t.values=t.values.slice(0)}}if(!this.range||!this.range.length){this.range=e("<div>").appendTo(this.element);this._addClass(this.range,"ui-slider-range")}else{this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max");this.range.css({left:"",bottom:""})}if(t.range==="min"||t.range==="max"){this._addClass(this.range,"ui-slider-range-"+t.range)}}else{if(this.range){this.range.remove()}this.range=null}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();if(this.range){this.range.remove()}this._mouseDestroy()},_mouseCapture:function(t){var i,n,r,o,s,a,l,c,d=this,u=this.options;if(u.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();i={x:t.pageX,y:t.pageY};n=this._normValueFromMouse(i);r=this._valueMax()-this._valueMin()+1;this.handles.each((function(t){var i=Math.abs(n-d.values(t));if(r>i||r===i&&(t===d._lastChangedValue||d.values(t)===u.min)){r=i;o=e(this);s=t}}));a=this._start(t,s);if(a===false){return false}this._mouseSliding=true;this._handleIndex=s;this._addClass(o,null,"ui-state-active");o.trigger("focus");l=o.offset();c=!e(t.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(t,s,n)}this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);this._slide(e,this._handleIndex,i);return false},_mouseStop:function(e){this._removeClass(this.handles,null,"ui-state-active");this._mouseSliding=false;this._stop(e,this._handleIndex);this._change(e,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,r,o;if(this.orientation==="horizontal"){t=this.elementSize.width;i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{t=this.elementSize.height;i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}n=i/t;if(n>1){n=1}if(n<0){n=0}if(this.orientation==="vertical"){n=1-n}r=this._valueMax()-this._valueMin();o=this._valueMin()+n*r;return this._trimAlignValue(o)},_uiHash:function(e,t,i){var n={handle:this.handles[e],handleIndex:e,value:t!==undefined?t:this.value()};if(this._hasMultipleValues()){n.value=t!==undefined?t:this.values(e);n.values=i||this.values()}return n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,i){var n,r,o=this.value(),s=this.values();if(this._hasMultipleValues()){r=this.values(t?0:1);o=this.values(t);if(this.options.values.length===2&&this.options.range===true){i=t===0?Math.min(r,i):Math.max(r,i)}s[t]=i}if(i===o){return}n=this._trigger("slide",e,this._uiHash(t,i,s));if(n===false){return}if(this._hasMultipleValues()){this.values(t,i)}else{this.value(i)}},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){this._lastChangedValue=t;this._trigger("change",e,this._uiHash(t))}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e);this._refreshValue();this._change(null,0);return}return this._value()},values:function(e,t){var i,n,r;if(arguments.length>1){this.options.values[e]=this._trimAlignValue(t);this._refreshValue();this._change(null,e);return}if(arguments.length){if(Array.isArray(arguments[0])){i=this.options.values;n=arguments[0];for(r=0;r<i.length;r+=1){i[r]=this._trimAlignValue(n[r]);this._change(null,r)}this._refreshValue()}else{if(this._hasMultipleValues()){return this._values(e)}else{return this.value()}}}else{return this._values()}},_setOption:function(e,t){var i,n=0;if(e==="range"&&this.options.range===true){if(t==="min"){this.options.value=this._values(0);this.options.values=null}else if(t==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null}}if(Array.isArray(this.options.values)){n=this.options.values.length}this._super(e,t);switch(e){case"orientation":this._detectOrientation();this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation);this._refreshValue();if(this.options.range){this._refreshRange(t)}this.handles.css(t==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=n-1;i>=0;i--){this._change(null,i)}this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break}},_setOptionDisabled:function(e){this._super(e);this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;e=this._trimAlignValue(e);return e},_values:function(e){var t,i,n;if(arguments.length){t=this.options.values[e];t=this._trimAlignValue(t);return t}else if(this._hasMultipleValues()){i=this.options.values.slice();for(n=0;n<i.length;n+=1){i[n]=this._trimAlignValue(i[n])}return i}else{return[]}},_trimAlignValue:function(e){if(e<=this._valueMin()){return this._valueMin()}if(e>=this._valueMax()){return this._valueMax()}var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;if(Math.abs(i)*2>=t){n+=i>0?t:-t}return parseFloat(n.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step,n=Math.round((e-t)/i)*i;e=n+t;if(e>this.options.max){e-=i}this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);if(this.options.min!==null){e=Math.max(e,this._precisionOf(this.options.min))}return e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return i===-1?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){if(e==="vertical"){this.range.css({width:"",left:""})}if(e==="horizontal"){this.range.css({height:"",bottom:""})}},_refreshValue:function(){var t,i,n,r,o,s=this.options.range,a=this.options,l=this,c=!this._animateOff?a.animate:false,d={};if(this._hasMultipleValues()){this.handles.each((function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100;d[l.orientation==="horizontal"?"left":"bottom"]=i+"%";e(this).stop(1,1)[c?"animate":"css"](d,a.animate);if(l.options.range===true){if(l.orientation==="horizontal"){if(n===0){l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate)}if(n===1){l.range[c?"animate":"css"]({width:i-t+"%"},{queue:false,duration:a.animate})}}else{if(n===0){l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate)}if(n===1){l.range[c?"animate":"css"]({height:i-t+"%"},{queue:false,duration:a.animate})}}}t=i}))}else{n=this.value();r=this._valueMin();o=this._valueMax();i=o!==r?(n-r)/(o-r)*100:0;d[this.orientation==="horizontal"?"left":"bottom"]=i+"%";this.handle.stop(1,1)[c?"animate":"css"](d,a.animate);if(s==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate)}if(s==="max"&&this.orientation==="horizontal"){this.range.stop(1,1)[c?"animate":"css"]({width:100-i+"%"},a.animate)}if(s==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate)}if(s==="max"&&this.orientation==="vertical"){this.range.stop(1,1)[c?"animate":"css"]({height:100-i+"%"},a.animate)}}},_handleEvents:{keydown:function(t){var i,n,r,o,s=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=true;this._addClass(e(t.target),null,"ui-state-active");i=this._start(t,s);if(i===false){return}}break}o=this.options.step;if(this._hasMultipleValues()){n=r=this.values(s)}else{n=r=this.value()}switch(t.keyCode){case e.ui.keyCode.HOME:r=this._valueMin();break;case e.ui.keyCode.END:r=this._valueMax();break;case e.ui.keyCode.PAGE_UP:r=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax()){return}r=this._trimAlignValue(n+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin()){return}r=this._trimAlignValue(n-o);break}this._slide(t,s,r)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(t,i);this._change(t,i);this._removeClass(e(t.target),null,"ui-state-active")}}}});var Ce=e.widget("ui.sortable",e.ui.mouse,{version:"1.14.1",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&e<t+i},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true},_setOption:function(e,t){this._super(e,t);if(e==="handle"){this._setHandleClassName()}},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");e.each(this.items,(function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")}))},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--){this.items[e].item.removeData(this.widgetName+"-item")}return this},_mouseCapture:function(t,i){var n=null,r=false,o=this;if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(t);e(t.target).parents().each((function(){if(e.data(this,o.widgetName+"-item")===o){n=e(this);return false}}));if(e.data(t.target,o.widgetName+"-item")===o){n=e(t.target)}if(!n){return false}if(this.options.handle&&!i){e(this.options.handle,n).find("*").addBack().each((function(){if(this===t.target){r=true}}));if(!r){return false}}this.currentItem=n;this._removeCurrentsFromItems();return true},_mouseStart:function(t,i,n){var r,o,s=this.options;this.currentContainer=this;this.refreshPositions();this.appendTo=e(s.appendTo!=="parent"?s.appendTo:this.currentItem.parent());this.helper=this._createHelper(t);this._cacheHelperProportions();this._cacheMargins();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");if(s.cursorAt){this._adjustOffsetFromHelper(s.cursorAt)}this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();this.scrollParent=this.placeholder.scrollParent();e.extend(this.offset,{parent:this._getParentOffset()});if(s.containment){this._setContainment()}if(s.cursor&&s.cursor!=="auto"){o=this.document.find("body");this._storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(o)}if(s.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",s.zIndex)}if(s.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",s.opacity)}if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",t,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!n){for(r=this.containers.length-1;r>=0;r--){this.containers[r]._trigger("activate",t,this._uiHash(this))}}if(e.ui.ddmanager){e.ui.ddmanager.current=this}if(e.ui.ddmanager&&!s.dropBehaviour){e.ui.ddmanager.prepareOffsets(this,t)}this.dragging=true;this._addClass(this.helper,"ui-sortable-helper");if(!this.helper.parent().is(this.appendTo)){this.helper.detach().appendTo(this.appendTo);this.offset.parent=this._getParentOffset()}this.position=this.originalPosition=this._generatePosition(t);this.originalPageX=t.pageX;this.originalPageY=t.pageY;this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute");this._mouseDrag(t);return true},_scroll:function(e){var t=this.options,i=false;if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<t.scrollSensitivity){this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+t.scrollSpeed}else if(e.pageY-this.overflowOffset.top<t.scrollSensitivity){this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-t.scrollSpeed}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<t.scrollSensitivity){this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+t.scrollSpeed}else if(e.pageX-this.overflowOffset.left<t.scrollSensitivity){this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-t.scrollSpeed}}else{if(e.pageY-this.document.scrollTop()<t.scrollSensitivity){i=this.document.scrollTop(this.document.scrollTop()-t.scrollSpeed)}else if(this.window.height()-(e.pageY-this.document.scrollTop())<t.scrollSensitivity){i=this.document.scrollTop(this.document.scrollTop()+t.scrollSpeed)}if(e.pageX-this.document.scrollLeft()<t.scrollSensitivity){i=this.document.scrollLeft(this.document.scrollLeft()-t.scrollSpeed)}else if(this.window.width()-(e.pageX-this.document.scrollLeft())<t.scrollSensitivity){i=this.document.scrollLeft(this.document.scrollLeft()+t.scrollSpeed)}}return i},_mouseDrag:function(t){var i,n,r,o,s=this.options;this.position=this._generatePosition(t);this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}if(s.scroll){if(this._scroll(t)!==false){this._refreshItemPositions(true);if(e.ui.ddmanager&&!s.dropBehaviour){e.ui.ddmanager.prepareOffsets(this,t)}}}this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()};for(i=this.items.length-1;i>=0;i--){n=this.items[i];r=n.item[0];o=this._intersectsWithPointer(n);if(!o){continue}if(n.instance!==this.currentContainer){continue}if(r!==this.currentItem[0]&&this.placeholder[o===1?"next":"prev"]()[0]!==r&&!e.contains(this.placeholder[0],r)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],r):true)){this.direction=o===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(n)){this._rearrange(t,n)}else{break}this._trigger("change",t,this._uiHash());break}}this._contactContainers(t);if(e.ui.ddmanager){e.ui.ddmanager.drag(this,t)}this._trigger("sort",t,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(t,i){if(!t){return}if(e.ui.ddmanager&&!this.options.dropBehaviour){e.ui.ddmanager.drop(this,t)}if(this.options.revert){var n=this,r=this.placeholder.offset(),o=this.options.axis,s={};if(!o||o==="x"){s.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)}if(!o||o==="y"){s.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)}this.reverting=true;e(this.helper).animate(s,parseInt(this.options.revert,10)||500,(function(){n._clear(t)}))}else{this._clear(t,i)}return false},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null}));if(this.options.helper==="original"){this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}for(var t=this.containers.length-1;t>=0;t--){this.containers[t]._trigger("deactivate",null,this._uiHash(this));if(this.containers[t].containerCache.over){this.containers[t]._trigger("out",null,this._uiHash(this));this.containers[t].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}e.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){e(this.domPosition.prev).after(this.currentItem)}else{e(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];t=t||{};e(i).each((function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);if(i){n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}}));if(!n.length&&t.key){n.push(t.key+"=")}return n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];t=t||{};i.each((function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}));return n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,o=e.left,s=o+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,d=this.offset.click.left,u=this.options.axis==="x"||n+c>a&&n+c<l,h=this.options.axis==="y"||t+d>o&&t+d<s,p=u&&h;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]){return p}else{return o<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&r-this.helperProportions.height/2<l}},_intersectsWithPointer:function(e){var t,i,n=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),r=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),o=n&&r;if(!o){return false}t=this.dragDirection.vertical;i=this.dragDirection.horizontal;return this.floating?i==="right"||t==="down"?2:1:t&&(t==="down"?2:1)},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this.dragDirection.vertical,r=this.dragDirection.horizontal;if(this.floating&&r){return r==="right"&&i||r==="left"&&!i}else{return n&&(n==="down"&&t||n==="up"&&!t)}},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){this._refreshItems(e);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,n,r,o,s=[],a=[],l=this._connectWith();if(l&&t){for(i=l.length-1;i>=0;i--){r=e(l[i],this.document[0]);for(n=r.length-1;n>=0;n--){o=e.data(r[n],this.widgetFullName);if(o&&o!==this&&!o.options.disabled){a.push([typeof o.options.items==="function"?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o])}}}}a.push([typeof this.options.items==="function"?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function c(){s.push(this)}for(i=a.length-1;i>=0;i--){a[i][0].each(c)}return e(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,(function(e){for(var i=0;i<t.length;i++){if(t[i]===e.item[0]){return false}}return true}))},_refreshItems:function(t){this.items=[];this.containers=[this];var i,n,r,o,s,a,l,c,d=this.items,u=[[typeof this.options.items==="function"?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready){for(i=h.length-1;i>=0;i--){r=e(h[i],this.document[0]);for(n=r.length-1;n>=0;n--){o=e.data(r[n],this.widgetFullName);if(o&&o!==this&&!o.options.disabled){u.push([typeof o.options.items==="function"?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]);this.containers.push(o)}}}}for(i=u.length-1;i>=0;i--){s=u[i][1];a=u[i][0];for(n=0,c=a.length;n<c;n++){l=e(a[n]);l.data(this.widgetName+"-item",s);d.push({item:l,instance:s,width:0,height:0,left:0,top:0})}}},_refreshItemPositions:function(t){var i,n,r,o;for(i=this.items.length-1;i>=0;i--){n=this.items[i];if(this.currentContainer&&n.instance!==this.currentContainer&&n.item[0]!==this.currentItem[0]){continue}r=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item;if(!t){n.width=r.outerWidth();n.height=r.outerHeight()}o=r.offset();n.left=o.left;n.top=o.top}},refreshPositions:function(e){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}this._refreshItemPositions(e);var t,i;if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(t=this.containers.length-1;t>=0;t--){i=this.containers[t].element.offset();this.containers[t].containerCache.left=i.left;this.containers[t].containerCache.top=i.top;this.containers[t].containerCache.width=this.containers[t].element.outerWidth();this.containers[t].containerCache.height=this.containers[t].element.outerHeight()}}return this},_createPlaceholder:function(t){t=t||this;var i,n,r=t.options;if(!r.placeholder||r.placeholder.constructor===String){i=r.placeholder;n=t.currentItem[0].nodeName.toLowerCase();r.placeholder={element:function(){var r=e("<"+n+">",t.document[0]);t._addClass(r,"ui-sortable-placeholder",i||t.currentItem[0].className)._removeClass(r,"ui-sortable-helper");if(n==="tbody"){t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(r))}else if(n==="tr"){t._createTrPlaceholder(t.currentItem,r)}else if(n==="img"){r.attr("src",t.currentItem.attr("src"))}if(!i){r.css("visibility","hidden")}return r},update:function(e,o){if(i&&!r.forcePlaceholderSize){return}if(!o.height()||r.forcePlaceholderSize&&(n==="tbody"||n==="tr")){o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10))}if(!o.width()){o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}}}}t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem));t.currentItem.after(t.placeholder);r.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var n=this;t.children().each((function(){e("<td>&#160;</td>",n.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)}))},_contactContainers:function(t){var i,n,r,o,s,a,l,c,d,u,h=null,p=null;for(i=this.containers.length-1;i>=0;i--){if(e.contains(this.currentItem[0],this.containers[i].element[0])){continue}if(this._intersectsWith(this.containers[i].containerCache)){if(h&&e.contains(this.containers[i].element[0],h.element[0])){continue}h=this.containers[i];p=i}else{if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",t,this._uiHash(this));this.containers[i].containerCache.over=0}}}if(!h){return}if(this.containers.length===1){if(!this.containers[p].containerCache.over){this.containers[p]._trigger("over",t,this._uiHash(this));this.containers[p].containerCache.over=1}}else{r=1e4;o=null;d=h.floating||this._isFloating(this.currentItem);s=d?"left":"top";a=d?"width":"height";u=d?"pageX":"pageY";for(n=this.items.length-1;n>=0;n--){if(!e.contains(this.containers[p].element[0],this.items[n].item[0])){continue}if(this.items[n].item[0]===this.currentItem[0]){continue}l=this.items[n].item.offset()[s];c=false;if(t[u]-l>this.items[n][a]/2){c=true}if(Math.abs(t[u]-l)<r){r=Math.abs(t[u]-l);o=this.items[n];this.direction=c?"up":"down"}}if(!o&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[p]){if(!this.currentContainer.containerCache.over){this.containers[p]._trigger("over",t,this._uiHash());this.currentContainer.containerCache.over=1}return}if(o){this._rearrange(t,o,null,true)}else{this._rearrange(t,null,this.containers[p].element,true)}this._trigger("change",t,this._uiHash());this.containers[p]._trigger("change",t,this._uiHash(this));this.currentContainer=this.containers[p];this.options.placeholder.update(this.currentContainer,this.placeholder);this.scrollParent=this.placeholder.scrollParent();if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this.containers[p]._trigger("over",t,this._uiHash(this));this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=typeof i.helper==="function"?e(i.helper.apply(this.element[0],[t,this.currentItem])):i.helper==="clone"?this.currentItem.clone():this.currentItem;if(!n.parents("body").length){this.appendTo[0].appendChild(n[0])}if(n[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!n[0].style.width||i.forceHelperSize){n.width(this.currentItem.width())}if(!n[0].style.height||i.forceHelperSize){n.height(this.currentItem.height())}return n},_adjustOffsetFromHelper:function(e){if(typeof e==="function"){e=e.call(this)}if(typeof e==="string"){e=e.split(" ")}if(Array.isArray(e)){e={left:+e[0],top:+e[1]||0}}if("left"in e){this.offset.click.left=e.left+this.margins.left}if("right"in e){this.offset.click.left=this.helperProportions.width-e.right+this.margins.left}if("top"in e){this.offset.click.top=e.top+this.margins.top}if("bottom"in e){this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft();t.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===this.document[0].body){t={top:0,left:0}}return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,r=this.options;if(r.containment==="parent"){r.containment=this.helper[0].parentNode}if(r.containment==="document"||r.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,r.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(r.containment==="document"?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(r.containment)){t=e(r.containment)[0];i=e(r.containment).offset();n=e(t).css("overflow")!=="hidden";this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){if(!i){i=this.position}var n=t==="absolute"?1:-1,r=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,o=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():o?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*n}},_generatePosition:function(t){var i,n,r=this.options,o=t.pageX,s=t.pageY,a=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(a[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(t.pageX-this.offset.click.left<this.containment[0]){o=this.containment[0]+this.offset.click.left}if(t.pageY-this.offset.click.top<this.containment[1]){s=this.containment[1]+this.offset.click.top}if(t.pageX-this.offset.click.left>this.containment[2]){o=this.containment[2]+this.offset.click.left}if(t.pageY-this.offset.click.top>this.containment[3]){s=this.containment[3]+this.offset.click.top}}if(r.grid){i=this.originalPageY+Math.round((s-this.originalPageY)/r.grid[1])*r.grid[1];s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-r.grid[1]:i+r.grid[1]:i;n=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0];o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-r.grid[0]:n+r.grid[0]:n}}return{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,i,n){if(i){i[0].appendChild(this.placeholder[0])}else{t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling)}this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay((function(){if(r===this.counter){this.refreshPositions(!n)}}))},_clear:function(e,t){this.reverting=false;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS){if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static"){this._storedCSS[i]=""}}this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!t){n.push((function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}))}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t){n.push((function(e){this._trigger("update",e,this._uiHash())}))}if(this!==this.currentContainer){if(!t){n.push((function(e){this._trigger("remove",e,this._uiHash())}));n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer));n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))}}function r(e,t,i){return function(n){i._trigger(e,n,t._uiHash(t))}}for(i=this.containers.length-1;i>=0;i--){if(!t){n.push(r("deactivate",this,this.containers[i]))}if(this.containers[i].containerCache.over){n.push(r("out",this,this.containers[i]));this.containers[i].containerCache.over=0}}if(this._storedStylesheet){this._storedStylesheet.remove();this._storedStylesheet=null}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false;if(!t){this._trigger("beforeStop",e,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null}if(!t){for(i=0;i<n.length;i++){n[i].call(this,e)}this._trigger("stop",e,this._uiHash())}this.fromOutside=false;return!this.cancelHelperRemoval},_trigger:function(){if(e.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}});function _e(e){return function(){var t=this.element.val();e.apply(this,arguments);this._refresh();if(t!==this.element.val()){this._trigger("change")}}}e.widget("ui.spinner",{version:"1.14.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);if(this.value()!==""){this._value(this.element.val(),true)}this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t=this._super();var i=this.element;e.each(["min","max","step"],(function(e,n){var r=i.attr(n);if(r!=null&&r.length){t[n]=r}}));return t},_events:{keydown:function(e){if(this._start(e)&&this._keydown(e)){e.preventDefault()}},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){this._stop();this._refresh();if(this.previous!==this.element.val()){this._trigger("change",e)}},mousewheel:function(e,t){var i=this.document[0].activeElement;var n=this.element[0]===i;if(!n||!t){return}if(!this.spinning&&!this._start(e)){return false}this._spin((t>0?1:-1)*this.options.step,e);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay((function(){if(this.spinning){this._stop(e)}}),100);e.preventDefault()},"mousedown .ui-spinner-button":function(t){var i;i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();function n(){var e=this.element[0]===this.document[0].activeElement;if(!e){this.element.trigger("focus");this.previous=i}}t.preventDefault();n.call(this);if(this._start(t)===false){return}this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(!e(t.currentTarget).hasClass("ui-state-active")){return}if(this._start(t)===false){return false}this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance();this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content");this._addClass("ui-spinner-input");this.element.attr("role","spinbutton");this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",true).button({classes:{"ui-button":""}});this._removeClass(this.buttons,"ui-corner-all");this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up");this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down");this.buttons.first().button({icon:this.options.icons.up,showLabel:false});this.buttons.last().button({icon:this.options.icons.down,showLabel:false});if(this.buttons.height()>Math.ceil(this.uiSpinner.height()*.5)&&this.uiSpinner.height()>0){this.uiSpinner.height(this.uiSpinner.height())}},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:this._repeat(null,1,t);return true;case n.DOWN:this._repeat(null,-1,t);return true;case n.PAGE_UP:this._repeat(null,i.page,t);return true;case n.PAGE_DOWN:this._repeat(null,-i.page,t);return true}return false},_start:function(e){if(!this.spinning&&this._trigger("start",e)===false){return false}if(!this.counter){this.counter=1}this.spinning=true;return true},_repeat:function(e,t,i){e=e||500;clearTimeout(this.timer);this.timer=this._delay((function(){this._repeat(40,t,i)}),e);this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;if(!this.counter){this.counter=1}i=this._adjustValue(i+e*this._increment(this.counter));if(!this.spinning||this._trigger("spin",t,{value:i})!==false){this._value(i);this.counter++}},_increment:function(e){var t=this.options.incremental;if(t){return typeof t==="function"?t(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1)}return 1},_precision:function(){var e=this._precisionOf(this.options.step);if(this.options.min!==null){e=Math.max(e,this._precisionOf(this.options.min))}return e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return i===-1?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;t=n.min!==null?n.min:0;i=e-t;i=Math.round(i/n.step)*n.step;e=t+i;e=parseFloat(e.toFixed(this._precision()));if(n.max!==null&&e>n.max){return n.max}if(n.min!==null&&e<n.min){return n.min}return e},_stop:function(e){if(!this.spinning){return}clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("stop",e)},_setOption:function(e,t){var i,n,r;if(e==="culture"||e==="numberFormat"){i=this._parse(this.element.val());this.options[e]=t;this.element.val(this._format(i));return}if(e==="max"||e==="min"||e==="step"){if(typeof t==="string"){t=this._parse(t)}}if(e==="icons"){n=this.buttons.first().find(".ui-icon");this._removeClass(n,null,this.options.icons.up);this._addClass(n,null,t.up);r=this.buttons.last().find(".ui-icon");this._removeClass(r,null,this.options.icons.down);this._addClass(r,null,t.down)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e);this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!e);this.element.prop("disabled",!!e);this.buttons.button(e?"disable":"enable")},_setOptions:_e((function(e){this._super(e)})),_parse:function(e){if(typeof e==="string"&&e!==""){e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e}return e===""||isNaN(e)?null:e},_format:function(e){if(e===""){return""}return window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();if(e===null){return false}return e===this._adjustValue(e)},_value:function(e,t){var i;if(e!==""){i=this._parse(e);if(i!==null){if(!t){i=this._adjustValue(i)}e=this._format(i)}}this.element.val(e);this._refresh()},_destroy:function(){this.element.prop("disabled",false).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:_e((function(e){this._stepUp(e)})),_stepUp:function(e){if(this._start()){this._spin((e||1)*this.options.step);this._stop()}},stepDown:_e((function(e){this._stepDown(e)})),_stepDown:function(e){if(this._start()){this._spin((e||1)*-this.options.step);this._stop()}},pageUp:_e((function(e){this._stepUp((e||1)*this.options.page)})),pageDown:_e((function(e){this._stepDown((e||1)*this.options.page)})),value:function(e){if(!arguments.length){return this._parse(this.element.val())}_e(this._value).call(this,e)},widget:function(){return this.uiSpinner}});if(e.uiBackCompat===true){e.widget("ui.spinner",e.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}})}var Se=e.ui.spinner;e.widget("ui.tabs",{version:"1.14.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,n;i=t.href.replace(e,"");n=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(e){}try{n=decodeURIComponent(n)}catch(e){}return t.hash.length>1&&i===n}}(),_create:function(){var t=this,i=this.options;this.running=false;this._addClass("ui-tabs","ui-widget ui-widget-content");this._toggleClass("ui-tabs-collapsible",null,i.collapsible);this._processTabs();i.active=this._initialActive();if(Array.isArray(i.disabled)){i.disabled=e.uniqueSort(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),(function(e){return t.tabs.index(e)})))).sort()}if(this.options.active!==false&&this.anchors.length){this.active=this._findActive(i.active)}else{this.active=e()}this._refresh();if(this.active.length){this.load(i.active)}},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,n=decodeURIComponent(location.hash.substring(1));if(t===null){if(n){this.tabs.each((function(i,r){if(e(r).attr("aria-controls")===n){t=i;return false}}))}if(t===null){t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))}if(t===null||t===-1){t=this.tabs.length?0:false}}if(t!==false){t=this.tabs.index(this.tabs.eq(t));if(t===-1){t=i?false:0}}if(!i&&t===false&&this.anchors.length){t=0}return t},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?e():this._getPanelForTab(this.active)}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),r=true;if(this._handlePageNav(t)){return}switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:r=false;n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:t.preventDefault();clearTimeout(this.activating);this._activate(n);return;case e.ui.keyCode.ENTER:t.preventDefault();clearTimeout(this.activating);this._activate(n===this.options.active?false:n);return;default:return}t.preventDefault();clearTimeout(this.activating);n=this._focusNextTab(n,r);if(!t.ctrlKey&&!t.metaKey){i.attr("aria-selected","false");this.tabs.eq(n).attr("aria-selected","true");this.activating=this._delay((function(){this.option("active",n)}),this.delay)}},_panelKeydown:function(t){if(this._handlePageNav(t)){return}if(t.ctrlKey&&t.keyCode===e.ui.keyCode.UP){t.preventDefault();this.active.trigger("focus")}},_handlePageNav:function(t){if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true}if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true}},_findNextTab:function(t,i){var n=this.tabs.length-1;function r(){if(t>n){t=0}if(t<0){t=n}return t}while(e.inArray(r(),this.options.disabled)!==-1){t=i?t+1:t-1}return t},_focusNextTab:function(e,t){e=this._findNextTab(e,t);this.tabs.eq(e).trigger("focus");return e},_setOption:function(e,t){if(e==="active"){this._activate(t);return}this._super(e,t);if(e==="collapsible"){this._toggleClass("ui-tabs-collapsible",null,t);if(!t&&this.options.active===false){this._activate(0)}}if(e==="event"){this._setupEvents(t)}if(e==="heightStyle"){this._setupHeightStyle(t)}},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),(function(e){return i.index(e)}));this._processTabs();if(t.active===false||!this.anchors.length){t.active=false;this.active=e()}else if(this.active.length&&!e.contains(this.tablist[0],this.active[0])){if(this.tabs.length===t.disabled.length){t.active=false;this.active=e()}else{this._activate(this._findNextTab(Math.max(0,t.active-1),false))}}else{t.active=this.tabs.index(this.active)}this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});if(!this.active.length){this.tabs.eq(0).attr("tabIndex",0)}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});this._addClass(this.active,"ui-tabs-active","ui-state-active");this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})}},_processTabs:function(){var t=this,i=this.tabs,n=this.anchors,r=this.panels;this.tablist=this._getList().attr("role","tablist");this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header");this.tablist.on("mousedown"+this.eventNamespace,"> li",(function(t){if(e(this).is(".ui-state-disabled")){t.preventDefault()}}));this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1});this._addClass(this.tabs,"ui-tabs-tab","ui-state-default");this.anchors=this.tabs.map((function(){return e("a",this)[0]})).attr({tabIndex:-1});this._addClass(this.anchors,"ui-tabs-anchor");this.panels=e();this.anchors.each((function(i,n){var r,o,s,a=e(n).uniqueId().attr("id"),l=e(n).closest("li"),c=l.attr("aria-controls");if(t._isLocal(n)){r=decodeURIComponent(n.hash);s=r.substring(1);o=t.element.find("#"+CSS.escape(s))}else{s=l.attr("aria-controls")||e({}).uniqueId()[0].id;r="#"+s;o=t.element.find(r);if(!o.length){o=t._createPanel(s);o.insertAfter(t.panels[i-1]||t.tablist)}o.attr("aria-live","polite")}if(o.length){t.panels=t.panels.add(o)}if(c){l.data("ui-tabs-aria-controls",c)}l.attr({"aria-controls":s,"aria-labelledby":a});o.attr("aria-labelledby",a)}));this.panels.attr("role","tabpanel");this._addClass(this.panels,"ui-tabs-panel","ui-widget-content");if(i){this._off(i.not(this.tabs));this._off(n.not(this.anchors));this._off(r.not(this.panels))}},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).data("ui-tabs-destroy",true)},_setOptionDisabled:function(t){var i,n,r;if(Array.isArray(t)){if(!t.length){t=false}else if(t.length===this.anchors.length){t=true}}for(r=0;n=this.tabs[r];r++){i=e(n);if(t===true||e.inArray(r,t)!==-1){i.attr("aria-disabled","true");this._addClass(i,null,"ui-state-disabled")}else{i.removeAttr("aria-disabled");this._removeClass(i,null,"ui-state-disabled")}}this.options.disabled=t;this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,t===true)},_setupEvents:function(t){var i={};if(t){e.each(t.split(" "),(function(e,t){i[t]="_eventHandler"}))}this._off(this.anchors.add(this.tabs).add(this.panels));this._on(true,this.anchors,{click:function(e){e.preventDefault()}});this._on(this.anchors,i);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();if(t==="fill"){i=n.height();i-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each((function(){var t=e(this),n=t.css("position");if(n==="absolute"||n==="fixed"){return}i-=t.outerHeight(true)}));this.element.children().not(this.panels).each((function(){i-=e(this).outerHeight(true)}));this.panels.each((function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")}else if(t==="auto"){i=0;this.panels.each((function(){i=Math.max(i,e(this).height("").height())})).height(i)}},_eventHandler:function(t){var i=this.options,n=this.active,r=e(t.currentTarget),o=r.closest("li"),s=o[0]===n[0],a=s&&i.collapsible,l=a?e():this._getPanelForTab(o),c=!n.length?e():this._getPanelForTab(n),d={oldTab:n,oldPanel:c,newTab:a?e():o,newPanel:l};t.preventDefault();if(o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||s&&!i.collapsible||this._trigger("beforeActivate",t,d)===false){return}i.active=a?false:this.tabs.index(o);this.active=s?e():o;if(this.xhr){this.xhr.abort()}if(!c.length&&!l.length){e.error("jQuery UI Tabs: Mismatching fragment identifier.")}if(l.length){this.load(this.tabs.index(o),t)}this._toggle(t,d)},_toggle:function(t,i){var n=this,r=i.newPanel,o=i.oldPanel;this.running=true;function s(){n.running=false;n._trigger("activate",t,i)}function a(){n._addClass(i.newTab.closest("li"),"ui-tabs-active","ui-state-active");if(r.length&&n.options.show){n._show(r,n.options.show,s)}else{r.show();s()}}if(o.length&&this.options.hide){this._hide(o,this.options.hide,(function(){n._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active");a()}))}else{this._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active");o.hide();a()}o.attr("aria-hidden","true");i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});if(r.length&&o.length){i.oldTab.attr("tabIndex",-1)}else if(r.length){this.tabs.filter((function(){return e(this).attr("tabIndex")===0})).attr("tabIndex",-1)}r.attr("aria-hidden","false");i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);if(n[0]===this.active[0]){return}if(!n.length){n=this.active}i=n.find(".ui-tabs-anchor")[0];this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop})},_findActive:function(t){return t===false?e():this.tabs.eq(t)},_getIndex:function(e){if(typeof e==="string"){e=this.anchors.index(this.anchors.filter("[href$='"+CSS.escape(e)+"']"))}return e},_destroy:function(){if(this.xhr){this.xhr.abort()}this.tablist.removeAttr("role").off(this.eventNamespace);this.anchors.removeAttr("role tabIndex").removeUniqueId();this.tabs.add(this.panels).each((function(){if(e.data(this,"ui-tabs-destroy")){e(this).remove()}else{e(this).removeAttr("role tabIndex "+"aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}}));this.tabs.each((function(){var t=e(this),i=t.data("ui-tabs-aria-controls");if(i){t.attr("aria-controls",i).removeData("ui-tabs-aria-controls")}else{t.removeAttr("aria-controls")}}));this.panels.show();if(this.options.heightStyle!=="content"){this.panels.css("height","")}},enable:function(t){var i=this.options.disabled;if(i===false){return}if(t===undefined){i=false}else{t=this._getIndex(t);if(Array.isArray(i)){i=e.map(i,(function(e){return e!==t?e:null}))}else{i=e.map(this.tabs,(function(e,i){return i!==t?i:null}))}}this._setOptionDisabled(i)},disable:function(t){var i=this.options.disabled;if(i===true){return}if(t===undefined){i=true}else{t=this._getIndex(t);if(e.inArray(t,i)!==-1){return}if(Array.isArray(i)){i=e.merge([t],i).sort()}else{i=[t]}}this._setOptionDisabled(i)},load:function(t,i){t=this._getIndex(t);var n=this,r=this.tabs.eq(t),o=r.find(".ui-tabs-anchor"),s=this._getPanelForTab(r),a={tab:r,panel:s},l=function(e,t){if(t==="abort"){n.panels.stop(false,true)}n._removeClass(r,"ui-tabs-loading");s.removeAttr("aria-busy");if(e===n.xhr){delete n.xhr}};if(this._isLocal(o[0])){return}this.xhr=e.ajax(this._ajaxSettings(o,i,a));if(this.xhr.statusText!=="canceled"){this._addClass(r,"ui-tabs-loading");s.attr("aria-busy","true");this.xhr.done((function(e,t,r){s.html(e);n._trigger("load",i,a);l(r,t)})).fail((function(e,t){l(e,t)}))}},_ajaxSettings:function(t,i,n){var r=this;return{url:t.attr("href"),beforeSend:function(t,o){return r._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:o},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find("#"+CSS.escape(i))}});if(e.uiBackCompat===true){e.widget("ui.tabs",e.ui.tabs,{_processTabs:function(){this._superApply(arguments);this._addClass(this.tabs,"ui-tab")}})}var Ae=e.ui.tabs;e.widget("ui.tooltip",{version:"1.14.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=e(this).attr("title");return e("<a>").text(t).html()},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,track:false,close:null,open:null},_addDescribedBy:function(e,t){var i=(e.attr("aria-describedby")||"").split(/\s+/);i.push(t);e.data("ui-tooltip-id",t).attr("aria-describedby",String.prototype.trim.call(i.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),r=e.inArray(i,n);if(r!==-1){n.splice(r,1)}t.removeData("ui-tooltip-id");n=String.prototype.trim.call(n.join(" "));if(n){t.attr("aria-describedby",n)}else{t.removeAttr("aria-describedby")}},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this.disabledTitles=e([])},_setOption:function(t,i){var n=this;this._super(t,i);if(t==="content"){e.each(this.tooltips,(function(e,t){n._updateContent(t.element)}))}},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var t=this;e.each(this.tooltips,(function(i,n){var r=e.Event("blur");r.target=r.currentTarget=n.element[0];t.close(r,true)}));this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter((function(){var t=e(this);if(t.is("[title]")){return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}})))},_enable:function(){this.disabledTitles.each((function(){var t=e(this);if(t.data("ui-tooltip-title")){t.attr("title",t.data("ui-tooltip-title"))}}));this.disabledTitles=e([])},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);if(!n.length||n.data("ui-tooltip-id")){return}if(n.attr("title")){n.data("ui-tooltip-title",n.attr("title"))}n.data("ui-tooltip-open",true);if(t&&t.type==="mouseover"){n.parents().each((function(){var t=e(this),n;if(t.data("ui-tooltip-open")){n=e.Event("blur");n.target=n.currentTarget=this;i.close(n,true)}if(t.attr("title")){t.uniqueId();i.parents[this.id]={element:this,title:t.attr("title")};t.attr("title","")}}))}this._registerCloseHandlers(t,n);this._updateContent(n,t)},_updateContent:function(e,t){var i,n=this.options.content,r=this,o=t?t.type:null;if(typeof n==="string"||n.nodeType||n.jquery){return this._open(t,e,n)}i=n.call(e[0],(function(i){if(!e.data("ui-tooltip-open")){return}if(t){t.type=o}r._open(t,e,i)}));if(i){this._open(t,e,i)}},_open:function(t,i,n){var r,o,s,a,l=e.extend({},this.options.position);if(!n){return}r=this._find(i);if(r){r.tooltip.find(".ui-tooltip-content").html(n);return}if(i.is("[title]")){if(t&&t.type==="mouseover"){i.attr("title","")}else{i.removeAttr("title")}}r=this._tooltip(i);o=r.tooltip;this._addDescribedBy(i,o.attr("id"));o.find(".ui-tooltip-content").html(n);this.liveRegion.children().hide();a=e("<div>").html(o.find(".ui-tooltip-content").html());a.removeAttr("name").find("[name]").removeAttr("name");a.removeAttr("id").find("[id]").removeAttr("id");a.appendTo(this.liveRegion);function c(e){l.of=e;if(o.is(":hidden")){return}o.position(l)}if(this.options.track&&t&&/^mouse/.test(t.type)){this._on(this.document,{mousemove:c});c(t)}else{o.position(e.extend({of:i},this.options.position))}o.hide();this._show(o,this.options.show);if(this.options.track&&this.options.show&&this.options.show.delay){s=this.delayedShow=setInterval((function(){if(o.is(":visible")){c(l.of);clearInterval(s)}}),13)}this._trigger("open",t,{tooltip:o})},_registerCloseHandlers:function(t,i){var n={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=i[0];this.close(n,true)}}};if(i[0]!==this.element[0]){n.remove=function(){var e=this._find(i);if(e){this._removeTooltip(e.tooltip)}}}if(!t||t.type==="mouseover"){n.mouseleave="close"}if(!t||t.type==="focusin"){n.focusout="close"}this._on(true,i,n)},close:function(t){var i,n=this,r=e(t?t.currentTarget:this.element),o=this._find(r);if(!o){r.removeData("ui-tooltip-open");return}i=o.tooltip;if(o.closing){return}clearInterval(this.delayedShow);if(r.data("ui-tooltip-title")&&!r.attr("title")){r.attr("title",r.data("ui-tooltip-title"))}this._removeDescribedBy(r);o.hiding=true;i.stop(true);this._hide(i,this.options.hide,(function(){n._removeTooltip(e(this))}));r.removeData("ui-tooltip-open");this._off(r,"mouseleave focusout keyup");if(r[0]!==this.element[0]){this._off(r,"remove")}this._off(this.document,"mousemove");if(t&&t.type==="mouseleave"){e.each(this.parents,(function(t,i){e(i.element).attr("title",i.title);delete n.parents[t]}))}o.closing=true;this._trigger("close",t,{tooltip:i});if(!o.hiding){o.closing=false}},_tooltip:function(t){var i=e("<div>").attr("role","tooltip"),n=e("<div>").appendTo(i),r=i.uniqueId().attr("id");this._addClass(n,"ui-tooltip-content");this._addClass(i,"ui-tooltip","ui-widget ui-widget-content");i.appendTo(this._appendTo(t));return this.tooltips[r]={element:t,tooltip:i}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){clearInterval(this.delayedShow);e.remove();delete this.tooltips[e.attr("id")]},_appendTo:function(e){var t=e.closest(".ui-front, dialog");if(!t.length){t=this.document[0].body}return t},_destroy:function(){var t=this;e.each(this.tooltips,(function(i,n){var r=e.Event("blur"),o=n.element;r.target=r.currentTarget=o[0];t.close(r,true);e("#"+i).remove();if(o.data("ui-tooltip-title")){if(!o.attr("title")){o.attr("title",o.data("ui-tooltip-title"))}o.removeData("ui-tooltip-title")}}));this.liveRegion.remove()}});if(e.uiBackCompat===true){e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);if(this.options.tooltipClass){e.tooltip.addClass(this.options.tooltipClass)}return e}})}var xe=e.ui.tooltip}));(function(){var e;var t="4.17.21";var i=200;var n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",r="Expected a function",o="Invalid `variable` option passed into `_.template`";var s="__lodash_hash_undefined__";var a=500;var l="__lodash_placeholder__";var c=1,d=2,u=4;var h=1,p=2;var f=1,g=2,m=4,v=8,b=16,y=32,w=64,C=128,_=256,S=512;var A=30,x="...";var E=800,T=16;var D=1,M=2,k=3;var P=1/0,R=9007199254740991,I=17976931348623157e292,O=0/0;var N=4294967295,L=N-1,F=N>>>1;var $=[["ary",C],["bind",f],["bindKey",g],["curry",v],["curryRight",b],["flip",S],["partial",y],["partialRight",w],["rearg",_]];var G="[object Arguments]",B="[object Array]",H="[object AsyncFunction]",z="[object Boolean]",W="[object Date]",V="[object DOMException]",j="[object Error]",U="[object Function]",Y="[object GeneratorFunction]",q="[object Map]",K="[object Number]",X="[object Null]",Z="[object Object]",Q="[object Promise]",J="[object Proxy]",ee="[object RegExp]",te="[object Set]",ie="[object String]",ne="[object Symbol]",re="[object Undefined]",oe="[object WeakMap]",se="[object WeakSet]";var ae="[object ArrayBuffer]",le="[object DataView]",ce="[object Float32Array]",de="[object Float64Array]",ue="[object Int8Array]",he="[object Int16Array]",pe="[object Int32Array]",fe="[object Uint8Array]",ge="[object Uint8ClampedArray]",me="[object Uint16Array]",ve="[object Uint32Array]";var be=/\b__p \+= '';/g,ye=/\b(__p \+=) '' \+/g,we=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var Ce=/&(?:amp|lt|gt|quot|#39);/g,_e=/[&<>"']/g,Se=RegExp(Ce.source),Ae=RegExp(_e.source);var xe=/<%-([\s\S]+?)%>/g,Ee=/<%([\s\S]+?)%>/g,Te=/<%=([\s\S]+?)%>/g;var De=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Me=/^\w*$/,ke=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var Pe=/[\\^$.*+?()[\]{}|]/g,Re=RegExp(Pe.source);var Ie=/^\s+/;var Oe=/\s/;var Ne=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Le=/\{\n\/\* \[wrapped with (.+)\] \*/,Fe=/,? & /;var $e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var Ge=/[()=,{}\[\]\/\s]/;var Be=/\\(\\)?/g;var He=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var ze=/\w*$/;var We=/^[-+]0x[0-9a-f]+$/i;var Ve=/^0b[01]+$/i;var je=/^\[object .+?Constructor\]$/;var Ue=/^0o[0-7]+$/i;var Ye=/^(?:0|[1-9]\d*)$/;var qe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;var Ke=/($^)/;var Xe=/['\n\r\u2028\u2029\\]/g;var Ze="\\ud800-\\udfff",Qe="\\u0300-\\u036f",Je="\\ufe20-\\ufe2f",et="\\u20d0-\\u20ff",tt=Qe+Je+et,it="\\u2700-\\u27bf",nt="a-z\\xdf-\\xf6\\xf8-\\xff",rt="\\xac\\xb1\\xd7\\xf7",ot="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",st="\\u2000-\\u206f",at=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lt="A-Z\\xc0-\\xd6\\xd8-\\xde",ct="\\ufe0e\\ufe0f",dt=rt+ot+st+at;var ut="['’]",ht="["+Ze+"]",pt="["+dt+"]",ft="["+tt+"]",gt="\\d+",mt="["+it+"]",vt="["+nt+"]",bt="[^"+Ze+dt+gt+it+nt+lt+"]",yt="\\ud83c[\\udffb-\\udfff]",wt="(?:"+ft+"|"+yt+")",Ct="[^"+Ze+"]",_t="(?:\\ud83c[\\udde6-\\uddff]){2}",St="[\\ud800-\\udbff][\\udc00-\\udfff]",At="["+lt+"]",xt="\\u200d";var Et="(?:"+vt+"|"+bt+")",Tt="(?:"+At+"|"+bt+")",Dt="(?:"+ut+"(?:d|ll|m|re|s|t|ve))?",Mt="(?:"+ut+"(?:D|LL|M|RE|S|T|VE))?",kt=wt+"?",Pt="["+ct+"]?",Rt="(?:"+xt+"(?:"+[Ct,_t,St].join("|")+")"+Pt+kt+")*",It="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ot="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Nt=Pt+kt+Rt,Lt="(?:"+[mt,_t,St].join("|")+")"+Nt,Ft="(?:"+[Ct+ft+"?",ft,_t,St,ht].join("|")+")";var $t=RegExp(ut,"g");var Gt=RegExp(ft,"g");var Bt=RegExp(yt+"(?="+yt+")|"+Ft+Nt,"g");var Ht=RegExp([At+"?"+vt+"+"+Dt+"(?="+[pt,At,"$"].join("|")+")",Tt+"+"+Mt+"(?="+[pt,At+Et,"$"].join("|")+")",At+"?"+Et+"+"+Dt,At+"+"+Mt,Ot,It,gt,Lt].join("|"),"g");var zt=RegExp("["+xt+Ze+tt+ct+"]");var Wt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Vt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"];var jt=-1;var Ut={};Ut[ce]=Ut[de]=Ut[ue]=Ut[he]=Ut[pe]=Ut[fe]=Ut[ge]=Ut[me]=Ut[ve]=true;Ut[G]=Ut[B]=Ut[ae]=Ut[z]=Ut[le]=Ut[W]=Ut[j]=Ut[U]=Ut[q]=Ut[K]=Ut[Z]=Ut[ee]=Ut[te]=Ut[ie]=Ut[oe]=false;var Yt={};Yt[G]=Yt[B]=Yt[ae]=Yt[le]=Yt[z]=Yt[W]=Yt[ce]=Yt[de]=Yt[ue]=Yt[he]=Yt[pe]=Yt[q]=Yt[K]=Yt[Z]=Yt[ee]=Yt[te]=Yt[ie]=Yt[ne]=Yt[fe]=Yt[ge]=Yt[me]=Yt[ve]=true;Yt[j]=Yt[U]=Yt[oe]=false;var qt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"};var Kt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var Xt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};var Zt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var Qt=parseFloat,Jt=parseInt;var ei=typeof global=="object"&&global&&global.Object===Object&&global;var ti=typeof self=="object"&&self&&self.Object===Object&&self;var ii=ei||ti||Function("return this")();var ni=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var ri=ni&&typeof module=="object"&&module&&!module.nodeType&&module;var oi=ri&&ri.exports===ni;var si=oi&&ei.process;var ai=function(){try{var e=ri&&ri.require&&ri.require("util").types;if(e){return e}return si&&si.binding&&si.binding("util")}catch(e){}}();var li=ai&&ai.isArrayBuffer,ci=ai&&ai.isDate,di=ai&&ai.isMap,ui=ai&&ai.isRegExp,hi=ai&&ai.isSet,pi=ai&&ai.isTypedArray;function fi(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function gi(e,t,i,n){var r=-1,o=e==null?0:e.length;while(++r<o){var s=e[r];t(n,s,i(s),e)}return n}function mi(e,t){var i=-1,n=e==null?0:e.length;while(++i<n){if(t(e[i],i,e)===false){break}}return e}function vi(e,t){var i=e==null?0:e.length;while(i--){if(t(e[i],i,e)===false){break}}return e}function bi(e,t){var i=-1,n=e==null?0:e.length;while(++i<n){if(!t(e[i],i,e)){return false}}return true}function yi(e,t){var i=-1,n=e==null?0:e.length,r=0,o=[];while(++i<n){var s=e[i];if(t(s,i,e)){o[r++]=s}}return o}function wi(e,t){var i=e==null?0:e.length;return!!i&&Ri(e,t,0)>-1}function Ci(e,t,i){var n=-1,r=e==null?0:e.length;while(++n<r){if(i(t,e[n])){return true}}return false}function _i(e,t){var i=-1,n=e==null?0:e.length,r=Array(n);while(++i<n){r[i]=t(e[i],i,e)}return r}function Si(e,t){var i=-1,n=t.length,r=e.length;while(++i<n){e[r+i]=t[i]}return e}function Ai(e,t,i,n){var r=-1,o=e==null?0:e.length;if(n&&o){i=e[++r]}while(++r<o){i=t(i,e[r],r,e)}return i}function xi(e,t,i,n){var r=e==null?0:e.length;if(n&&r){i=e[--r]}while(r--){i=t(i,e[r],r,e)}return i}function Ei(e,t){var i=-1,n=e==null?0:e.length;while(++i<n){if(t(e[i],i,e)){return true}}return false}var Ti=Li("length");function Di(e){return e.split("")}function Mi(e){return e.match($e)||[]}function ki(e,t,i){var n;i(e,(function(e,i,r){if(t(e,i,r)){n=i;return false}}));return n}function Pi(e,t,i,n){var r=e.length,o=i+(n?1:-1);while(n?o--:++o<r){if(t(e[o],o,e)){return o}}return-1}function Ri(e,t,i){return t===t?cn(e,t,i):Pi(e,Oi,i)}function Ii(e,t,i,n){var r=i-1,o=e.length;while(++r<o){if(n(e[r],t)){return r}}return-1}function Oi(e){return e!==e}function Ni(e,t){var i=e==null?0:e.length;return i?Bi(e,t)/i:O}function Li(t){return function(i){return i==null?e:i[t]}}function Fi(t){return function(i){return t==null?e:t[i]}}function $i(e,t,i,n,r){r(e,(function(e,r,o){i=n?(n=false,e):t(i,e,r,o)}));return i}function Gi(e,t){var i=e.length;e.sort(t);while(i--){e[i]=e[i].value}return e}function Bi(t,i){var n,r=-1,o=t.length;while(++r<o){var s=i(t[r]);if(s!==e){n=n===e?s:n+s}}return n}function Hi(e,t){var i=-1,n=Array(e);while(++i<e){n[i]=t(i)}return n}function zi(e,t){return _i(t,(function(t){return[t,e[t]]}))}function Wi(e){return e?e.slice(0,pn(e)+1).replace(Ie,""):e}function Vi(e){return function(t){return e(t)}}function ji(e,t){return _i(t,(function(t){return e[t]}))}function Ui(e,t){return e.has(t)}function Yi(e,t){var i=-1,n=e.length;while(++i<n&&Ri(t,e[i],0)>-1){}return i}function qi(e,t){var i=e.length;while(i--&&Ri(t,e[i],0)>-1){}return i}function Ki(e,t){var i=e.length,n=0;while(i--){if(e[i]===t){++n}}return n}var Xi=Fi(qt);var Zi=Fi(Kt);function Qi(e){return"\\"+Zt[e]}function Ji(t,i){return t==null?e:t[i]}function en(e){return zt.test(e)}function tn(e){return Wt.test(e)}function nn(e){var t,i=[];while(!(t=e.next()).done){i.push(t.value)}return i}function rn(e){var t=-1,i=Array(e.size);e.forEach((function(e,n){i[++t]=[n,e]}));return i}function on(e,t){return function(i){return e(t(i))}}function sn(e,t){var i=-1,n=e.length,r=0,o=[];while(++i<n){var s=e[i];if(s===t||s===l){e[i]=l;o[r++]=i}}return o}function an(e){var t=-1,i=Array(e.size);e.forEach((function(e){i[++t]=e}));return i}function ln(e){var t=-1,i=Array(e.size);e.forEach((function(e){i[++t]=[e,e]}));return i}function cn(e,t,i){var n=i-1,r=e.length;while(++n<r){if(e[n]===t){return n}}return-1}function dn(e,t,i){var n=i+1;while(n--){if(e[n]===t){return n}}return n}function un(e){return en(e)?gn(e):Ti(e)}function hn(e){return en(e)?mn(e):Di(e)}function pn(e){var t=e.length;while(t--&&Oe.test(e.charAt(t))){}return t}var fn=Fi(Xt);function gn(e){var t=Bt.lastIndex=0;while(Bt.test(e)){++t}return t}function mn(e){return e.match(Bt)||[]}function vn(e){return e.match(Ht)||[]}var bn=function Oe($e){$e=$e==null?ii:yn.defaults(ii.Object(),$e,yn.pick(ii,Vt));var Ze=$e.Array,Qe=$e.Date,Je=$e.Error,et=$e.Function,tt=$e.Math,it=$e.Object,nt=$e.RegExp,rt=$e.String,ot=$e.TypeError;var st=Ze.prototype,at=et.prototype,lt=it.prototype;var ct=$e["__core-js_shared__"];var dt=at.toString;var ut=lt.hasOwnProperty;var ht=0;var pt=function(){var e=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var ft=lt.toString;var gt=dt.call(it);var mt=ii._;var vt=nt("^"+dt.call(ut).replace(Pe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var bt=oi?$e.Buffer:e,yt=$e.Symbol,wt=$e.Uint8Array,Ct=bt?bt.allocUnsafe:e,_t=on(it.getPrototypeOf,it),St=it.create,At=lt.propertyIsEnumerable,xt=st.splice,Et=yt?yt.isConcatSpreadable:e,Tt=yt?yt.iterator:e,Dt=yt?yt.toStringTag:e;var Mt=function(){try{var e=Ys(it,"defineProperty");e({},"",{});return e}catch(e){}}();var kt=$e.clearTimeout!==ii.clearTimeout&&$e.clearTimeout,Pt=Qe&&Qe.now!==ii.Date.now&&Qe.now,Rt=$e.setTimeout!==ii.setTimeout&&$e.setTimeout;var It=tt.ceil,Ot=tt.floor,Nt=it.getOwnPropertySymbols,Lt=bt?bt.isBuffer:e,Ft=$e.isFinite,Bt=st.join,Ht=on(it.keys,it),zt=tt.max,Wt=tt.min,qt=Qe.now,Kt=$e.parseInt,Xt=tt.random,Zt=st.reverse;var ei=Ys($e,"DataView"),ti=Ys($e,"Map"),ni=Ys($e,"Promise"),ri=Ys($e,"Set"),si=Ys($e,"WeakMap"),ai=Ys(it,"create");var Ti=si&&new si;var Di={};var Fi=Ra(ei),cn=Ra(ti),gn=Ra(ni),mn=Ra(ri),bn=Ra(si);var wn=yt?yt.prototype:e,Cn=wn?wn.valueOf:e,_n=wn?wn.toString:e;function Sn(e){if(xd(e)&&!ld(e)&&!(e instanceof Tn)){if(e instanceof En){return e}if(ut.call(e,"__wrapped__")){return Oa(e)}}return new En(e)}var An=function(){function t(){}return function(i){if(!Ad(i)){return{}}if(St){return St(i)}t.prototype=i;var n=new t;t.prototype=e;return n}}();function xn(){}function En(t,i){this.__wrapped__=t;this.__actions__=[];this.__chain__=!!i;this.__index__=0;this.__values__=e}Sn.templateSettings={escape:xe,evaluate:Ee,interpolate:Te,variable:"",imports:{_:Sn}};Sn.prototype=xn.prototype;Sn.prototype.constructor=Sn;En.prototype=An(xn.prototype);En.prototype.constructor=En;function Tn(e){this.__wrapped__=e;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=N;this.__views__=[]}function Dn(){var e=new Tn(this.__wrapped__);e.__actions__=rs(this.__actions__);e.__dir__=this.__dir__;e.__filtered__=this.__filtered__;e.__iteratees__=rs(this.__iteratees__);e.__takeCount__=this.__takeCount__;e.__views__=rs(this.__views__);return e}function Mn(){if(this.__filtered__){var e=new Tn(this);e.__dir__=-1;e.__filtered__=true}else{e=this.clone();e.__dir__*=-1}return e}function kn(){var e=this.__wrapped__.value(),t=this.__dir__,i=ld(e),n=t<0,r=i?e.length:0,o=Qs(0,r,this.__views__),s=o.start,a=o.end,l=a-s,c=n?a:s-1,d=this.__iteratees__,u=d.length,h=0,p=Wt(l,this.__takeCount__);if(!i||!n&&r==l&&p==l){return Go(e,this.__actions__)}var f=[];e:while(l--&&h<p){c+=t;var g=-1,m=e[c];while(++g<u){var v=d[g],b=v.iteratee,y=v.type,w=b(m);if(y==M){m=w}else if(!w){if(y==D){continue e}else{break e}}}f[h++]=m}return f}Tn.prototype=An(xn.prototype);Tn.prototype.constructor=Tn;function Pn(e){var t=-1,i=e==null?0:e.length;this.clear();while(++t<i){var n=e[t];this.set(n[0],n[1])}}function Rn(){this.__data__=ai?ai(null):{};this.size=0}function In(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t}function On(t){var i=this.__data__;if(ai){var n=i[t];return n===s?e:n}return ut.call(i,t)?i[t]:e}function Nn(t){var i=this.__data__;return ai?i[t]!==e:ut.call(i,t)}function Ln(t,i){var n=this.__data__;this.size+=this.has(t)?0:1;n[t]=ai&&i===e?s:i;return this}Pn.prototype.clear=Rn;Pn.prototype["delete"]=In;Pn.prototype.get=On;Pn.prototype.has=Nn;Pn.prototype.set=Ln;function Fn(e){var t=-1,i=e==null?0:e.length;this.clear();while(++t<i){var n=e[t];this.set(n[0],n[1])}}function $n(){this.__data__=[];this.size=0}function Gn(e){var t=this.__data__,i=dr(t,e);if(i<0){return false}var n=t.length-1;if(i==n){t.pop()}else{xt.call(t,i,1)}--this.size;return true}function Bn(t){var i=this.__data__,n=dr(i,t);return n<0?e:i[n][1]}function Hn(e){return dr(this.__data__,e)>-1}function zn(e,t){var i=this.__data__,n=dr(i,e);if(n<0){++this.size;i.push([e,t])}else{i[n][1]=t}return this}Fn.prototype.clear=$n;Fn.prototype["delete"]=Gn;Fn.prototype.get=Bn;Fn.prototype.has=Hn;Fn.prototype.set=zn;function Wn(e){var t=-1,i=e==null?0:e.length;this.clear();while(++t<i){var n=e[t];this.set(n[0],n[1])}}function Vn(){this.size=0;this.__data__={hash:new Pn,map:new(ti||Fn),string:new Pn}}function jn(e){var t=js(this,e)["delete"](e);this.size-=t?1:0;return t}function Un(e){return js(this,e).get(e)}function Yn(e){return js(this,e).has(e)}function qn(e,t){var i=js(this,e),n=i.size;i.set(e,t);this.size+=i.size==n?0:1;return this}Wn.prototype.clear=Vn;Wn.prototype["delete"]=jn;Wn.prototype.get=Un;Wn.prototype.has=Yn;Wn.prototype.set=qn;function Kn(e){var t=-1,i=e==null?0:e.length;this.__data__=new Wn;while(++t<i){this.add(e[t])}}function Xn(e){this.__data__.set(e,s);return this}function Zn(e){return this.__data__.has(e)}Kn.prototype.add=Kn.prototype.push=Xn;Kn.prototype.has=Zn;function Qn(e){var t=this.__data__=new Fn(e);this.size=t.size}function Jn(){this.__data__=new Fn;this.size=0}function er(e){var t=this.__data__,i=t["delete"](e);this.size=t.size;return i}function tr(e){return this.__data__.get(e)}function ir(e){return this.__data__.has(e)}function nr(e,t){var n=this.__data__;if(n instanceof Fn){var r=n.__data__;if(!ti||r.length<i-1){r.push([e,t]);this.size=++n.size;return this}n=this.__data__=new Wn(r)}n.set(e,t);this.size=n.size;return this}Qn.prototype.clear=Jn;Qn.prototype["delete"]=er;Qn.prototype.get=tr;Qn.prototype.has=ir;Qn.prototype.set=nr;function rr(e,t){var i=ld(e),n=!i&&ad(e),r=!i&&!n&&pd(e),o=!i&&!n&&!r&&Bd(e),s=i||n||r||o,a=s?Hi(e.length,rt):[],l=a.length;for(var c in e){if((t||ut.call(e,c))&&!(s&&(c=="length"||r&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||sa(c,l)))){a.push(c)}}return a}function or(t){var i=t.length;return i?t[bo(0,i-1)]:e}function sr(e,t){return Ma(rs(e),mr(t,0,e.length))}function ar(e){return Ma(rs(e))}function lr(t,i,n){if(n!==e&&!rd(t[i],n)||n===e&&!(i in t)){fr(t,i,n)}}function cr(t,i,n){var r=t[i];if(!(ut.call(t,i)&&rd(r,n))||n===e&&!(i in t)){fr(t,i,n)}}function dr(e,t){var i=e.length;while(i--){if(rd(e[i][0],t)){return i}}return-1}function ur(e,t,i,n){_r(e,(function(e,r,o){t(n,e,i(e),o)}));return n}function hr(e,t){return e&&os(t,_u(t),e)}function pr(e,t){return e&&os(t,Su(t),e)}function fr(e,t,i){if(t=="__proto__"&&Mt){Mt(e,t,{configurable:true,enumerable:true,value:i,writable:true})}else{e[t]=i}}function gr(t,i){var n=-1,r=i.length,o=Ze(r),s=t==null;while(++n<r){o[n]=s?e:mu(t,i[n])}return o}function mr(t,i,n){if(t===t){if(n!==e){t=t<=n?t:n}if(i!==e){t=t>=i?t:i}}return t}function vr(t,i,n,r,o,s){var a,l=i&c,h=i&d,p=i&u;if(n){a=o?n(t,r,o,s):n(t)}if(a!==e){return a}if(!Ad(t)){return t}var f=ld(t);if(f){a=ta(t);if(!l){return rs(t,a)}}else{var g=Zs(t),m=g==U||g==Y;if(pd(t)){return qo(t,l)}if(g==Z||g==G||m&&!o){a=h||m?{}:ia(t);if(!l){return h?as(t,pr(a,t)):ss(t,hr(a,t))}}else{if(!Yt[g]){return o?t:{}}a=na(t,g,l)}}s||(s=new Qn);var v=s.get(t);if(v){return v}s.set(t,a);if(Fd(t)){t.forEach((function(e){a.add(vr(e,i,n,e,t,s))}))}else if(Ed(t)){t.forEach((function(e,r){a.set(r,vr(e,i,n,r,t,s))}))}var b=p?h?Bs:Gs:h?Su:_u;var y=f?e:b(t);mi(y||t,(function(e,r){if(y){r=e;e=t[r]}cr(a,r,vr(e,i,n,r,t,s))}));return a}function br(e){var t=_u(e);return function(i){return yr(i,e,t)}}function yr(t,i,n){var r=n.length;if(t==null){return!r}t=it(t);while(r--){var o=n[r],s=i[o],a=t[o];if(a===e&&!(o in t)||!s(a)){return false}}return true}function wr(t,i,n){if(typeof t!="function"){throw new ot(r)}return xa((function(){t.apply(e,n)}),i)}function Cr(e,t,n,r){var o=-1,s=wi,a=true,l=e.length,c=[],d=t.length;if(!l){return c}if(n){t=_i(t,Vi(n))}if(r){s=Ci;a=false}else if(t.length>=i){s=Ui;a=false;t=new Kn(t)}e:while(++o<l){var u=e[o],h=n==null?u:n(u);u=r||u!==0?u:0;if(a&&h===h){var p=d;while(p--){if(t[p]===h){continue e}}c.push(u)}else if(!s(t,h,r)){c.push(u)}}return c}var _r=ds(Pr);var Sr=ds(Rr,true);function Ar(e,t){var i=true;_r(e,(function(e,n,r){i=!!t(e,n,r);return i}));return i}function xr(t,i,n){var r=-1,o=t.length;while(++r<o){var s=t[r],a=i(s);if(a!=null&&(l===e?a===a&&!Gd(a):n(a,l))){var l=a,c=s}}return c}function Er(t,i,n,r){var o=t.length;n=qd(n);if(n<0){n=-n>o?0:o+n}r=r===e||r>o?o:qd(r);if(r<0){r+=o}r=n>r?0:Kd(r);while(n<r){t[n++]=i}return t}function Tr(e,t){var i=[];_r(e,(function(e,n,r){if(t(e,n,r)){i.push(e)}}));return i}function Dr(e,t,i,n,r){var o=-1,s=e.length;i||(i=oa);r||(r=[]);while(++o<s){var a=e[o];if(t>0&&i(a)){if(t>1){Dr(a,t-1,i,n,r)}else{Si(r,a)}}else if(!n){r[r.length]=a}}return r}var Mr=us();var kr=us(true);function Pr(e,t){return e&&Mr(e,t,_u)}function Rr(e,t){return e&&kr(e,t,_u)}function Ir(e,t){return yi(t,(function(t){return Cd(e[t])}))}function Or(t,i){i=Vo(i,t);var n=0,r=i.length;while(t!=null&&n<r){t=t[Pa(i[n++])]}return n&&n==r?t:e}function Nr(e,t,i){var n=t(e);return ld(e)?n:Si(n,i(e))}function Lr(t){if(t==null){return t===e?re:X}return Dt&&Dt in it(t)?qs(t):ya(t)}function Fr(e,t){return e>t}function $r(e,t){return e!=null&&ut.call(e,t)}function Gr(e,t){return e!=null&&t in it(e)}function Br(e,t,i){return e>=Wt(t,i)&&e<zt(t,i)}function Hr(t,i,n){var r=n?Ci:wi,o=t[0].length,s=t.length,a=s,l=Ze(s),c=Infinity,d=[];while(a--){var u=t[a];if(a&&i){u=_i(u,Vi(i))}c=Wt(u.length,c);l[a]=!n&&(i||o>=120&&u.length>=120)?new Kn(a&&u):e}u=t[0];var h=-1,p=l[0];e:while(++h<o&&d.length<c){var f=u[h],g=i?i(f):f;f=n||f!==0?f:0;if(!(p?Ui(p,g):r(d,g,n))){a=s;while(--a){var m=l[a];if(!(m?Ui(m,g):r(t[a],g,n))){continue e}}if(p){p.push(g)}d.push(f)}}return d}function zr(e,t,i,n){Pr(e,(function(e,r,o){t(n,i(e),r,o)}));return n}function Wr(t,i,n){i=Vo(i,t);t=Ca(t,i);var r=t==null?t:t[Pa(ol(i))];return r==null?e:fi(r,t,n)}function Vr(e){return xd(e)&&Lr(e)==G}function jr(e){return xd(e)&&Lr(e)==ae}function Ur(e){return xd(e)&&Lr(e)==W}function Yr(e,t,i,n,r){if(e===t){return true}if(e==null||t==null||!xd(e)&&!xd(t)){return e!==e&&t!==t}return qr(e,t,i,n,Yr,r)}function qr(e,t,i,n,r,o){var s=ld(e),a=ld(t),l=s?B:Zs(e),c=a?B:Zs(t);l=l==G?Z:l;c=c==G?Z:c;var d=l==Z,u=c==Z,p=l==c;if(p&&pd(e)){if(!pd(t)){return false}s=true;d=false}if(p&&!d){o||(o=new Qn);return s||Bd(e)?Ns(e,t,i,n,r,o):Ls(e,t,l,i,n,r,o)}if(!(i&h)){var f=d&&ut.call(e,"__wrapped__"),g=u&&ut.call(t,"__wrapped__");if(f||g){var m=f?e.value():e,v=g?t.value():t;o||(o=new Qn);return r(m,v,i,n,o)}}if(!p){return false}o||(o=new Qn);return Fs(e,t,i,n,r,o)}function Kr(e){return xd(e)&&Zs(e)==q}function Xr(t,i,n,r){var o=n.length,s=o,a=!r;if(t==null){return!s}t=it(t);while(o--){var l=n[o];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t)){return false}}while(++o<s){l=n[o];var c=l[0],d=t[c],u=l[1];if(a&&l[2]){if(d===e&&!(c in t)){return false}}else{var f=new Qn;if(r){var g=r(d,u,c,t,i,f)}if(!(g===e?Yr(u,d,h|p,r,f):g)){return false}}}return true}function Zr(e){if(!Ad(e)||ua(e)){return false}var t=Cd(e)?vt:je;return t.test(Ra(e))}function Qr(e){return xd(e)&&Lr(e)==ee}function Jr(e){return xd(e)&&Zs(e)==te}function eo(e){return xd(e)&&Sd(e.length)&&!!Ut[Lr(e)]}function to(e){if(typeof e=="function"){return e}if(e==null){return kh}if(typeof e=="object"){return ld(e)?ao(e[0],e[1]):so(e)}return Wh(e)}function io(e){if(!pa(e)){return Ht(e)}var t=[];for(var i in it(e)){if(ut.call(e,i)&&i!="constructor"){t.push(i)}}return t}function no(e){if(!Ad(e)){return ba(e)}var t=pa(e),i=[];for(var n in e){if(!(n=="constructor"&&(t||!ut.call(e,n)))){i.push(n)}}return i}function ro(e,t){return e<t}function oo(e,t){var i=-1,n=dd(e)?Ze(e.length):[];_r(e,(function(e,r,o){n[++i]=t(e,r,o)}));return n}function so(e){var t=Us(e);if(t.length==1&&t[0][2]){return ga(t[0][0],t[0][1])}return function(i){return i===e||Xr(i,e,t)}}function ao(t,i){if(la(t)&&fa(i)){return ga(Pa(t),i)}return function(n){var r=mu(n,t);return r===e&&r===i?bu(n,t):Yr(i,r,h|p)}}function lo(t,i,n,r,o){if(t===i){return}Mr(i,(function(s,a){o||(o=new Qn);if(Ad(s)){co(t,i,a,n,lo,r,o)}else{var l=r?r(Sa(t,a),s,a+"",t,i,o):e;if(l===e){l=s}lr(t,a,l)}}),Su)}function co(t,i,n,r,o,s,a){var l=Sa(t,n),c=Sa(i,n),d=a.get(c);if(d){lr(t,n,d);return}var u=s?s(l,c,n+"",t,i,a):e;var h=u===e;if(h){var p=ld(c),f=!p&&pd(c),g=!p&&!f&&Bd(c);u=c;if(p||f||g){if(ld(l)){u=l}else if(ud(l)){u=rs(l)}else if(f){h=false;u=qo(c,true)}else if(g){h=false;u=Jo(c,true)}else{u=[]}}else if(Od(c)||ad(c)){u=l;if(ad(l)){u=Zd(l)}else if(!Ad(l)||Cd(l)){u=ia(c)}}else{h=false}}if(h){a.set(c,u);o(u,c,r,s,a);a["delete"](c)}lr(t,n,u)}function uo(t,i){var n=t.length;if(!n){return}i+=i<0?n:0;return sa(i,n)?t[i]:e}function ho(e,t,i){if(t.length){t=_i(t,(function(e){if(ld(e)){return function(t){return Or(t,e.length===1?e[0]:e)}}return e}))}else{t=[kh]}var n=-1;t=_i(t,Vi(Vs()));var r=oo(e,(function(e,i,r){var o=_i(t,(function(t){return t(e)}));return{criteria:o,index:++n,value:e}}));return Gi(r,(function(e,t){return ts(e,t,i)}))}function po(e,t){return fo(e,t,(function(t,i){return bu(e,i)}))}function fo(e,t,i){var n=-1,r=t.length,o={};while(++n<r){var s=t[n],a=Or(e,s);if(i(a,s)){Ao(o,Vo(s,e),a)}}return o}function go(e){return function(t){return Or(t,e)}}function mo(e,t,i,n){var r=n?Ii:Ri,o=-1,s=t.length,a=e;if(e===t){t=rs(t)}if(i){a=_i(e,Vi(i))}while(++o<s){var l=0,c=t[o],d=i?i(c):c;while((l=r(a,d,l,n))>-1){if(a!==e){xt.call(a,l,1)}xt.call(e,l,1)}}return e}function vo(e,t){var i=e?t.length:0,n=i-1;while(i--){var r=t[i];if(i==n||r!==o){var o=r;if(sa(r)){xt.call(e,r,1)}else{Lo(e,r)}}}return e}function bo(e,t){return e+Ot(Xt()*(t-e+1))}function yo(e,t,i,n){var r=-1,o=zt(It((t-e)/(i||1)),0),s=Ze(o);while(o--){s[n?o:++r]=e;e+=i}return s}function wo(e,t){var i="";if(!e||t<1||t>R){return i}do{if(t%2){i+=e}t=Ot(t/2);if(t){e+=e}}while(t);return i}function Co(e,t){return Ea(wa(e,t,kh),e+"")}function _o(e){return or(Hu(e))}function So(e,t){var i=Hu(e);return Ma(i,mr(t,0,i.length))}function Ao(t,i,n,r){if(!Ad(t)){return t}i=Vo(i,t);var o=-1,s=i.length,a=s-1,l=t;while(l!=null&&++o<s){var c=Pa(i[o]),d=n;if(c==="__proto__"||c==="constructor"||c==="prototype"){return t}if(o!=a){var u=l[c];d=r?r(u,c,l):e;if(d===e){d=Ad(u)?u:sa(i[o+1])?[]:{}}}cr(l,c,d);l=l[c]}return t}var xo=!Ti?kh:function(e,t){Ti.set(e,t);return e};var Eo=!Mt?kh:function(e,t){return Mt(e,"toString",{configurable:true,enumerable:false,value:Eh(t),writable:true})};function To(e){return Ma(Hu(e))}function Do(e,t,i){var n=-1,r=e.length;if(t<0){t=-t>r?0:r+t}i=i>r?r:i;if(i<0){i+=r}r=t>i?0:i-t>>>0;t>>>=0;var o=Ze(r);while(++n<r){o[n]=e[n+t]}return o}function Mo(e,t){var i;_r(e,(function(e,n,r){i=t(e,n,r);return!i}));return!!i}function ko(e,t,i){var n=0,r=e==null?n:e.length;if(typeof t=="number"&&t===t&&r<=F){while(n<r){var o=n+r>>>1,s=e[o];if(s!==null&&!Gd(s)&&(i?s<=t:s<t)){n=o+1}else{r=o}}return r}return Po(e,t,kh,i)}function Po(t,i,n,r){var o=0,s=t==null?0:t.length;if(s===0){return 0}i=n(i);var a=i!==i,l=i===null,c=Gd(i),d=i===e;while(o<s){var u=Ot((o+s)/2),h=n(t[u]),p=h!==e,f=h===null,g=h===h,m=Gd(h);if(a){var v=r||g}else if(d){v=g&&(r||p)}else if(l){v=g&&p&&(r||!f)}else if(c){v=g&&p&&!f&&(r||!m)}else if(f||m){v=false}else{v=r?h<=i:h<i}if(v){o=u+1}else{s=u}}return Wt(s,L)}function Ro(e,t){var i=-1,n=e.length,r=0,o=[];while(++i<n){var s=e[i],a=t?t(s):s;if(!i||!rd(a,l)){var l=a;o[r++]=s===0?0:s}}return o}function Io(e){if(typeof e=="number"){return e}if(Gd(e)){return O}return+e}function Oo(e){if(typeof e=="string"){return e}if(ld(e)){return _i(e,Oo)+""}if(Gd(e)){return _n?_n.call(e):""}var t=e+"";return t=="0"&&1/e==-P?"-0":t}function No(e,t,n){var r=-1,o=wi,s=e.length,a=true,l=[],c=l;if(n){a=false;o=Ci}else if(s>=i){var d=t?null:Ms(e);if(d){return an(d)}a=false;o=Ui;c=new Kn}else{c=t?[]:l}e:while(++r<s){var u=e[r],h=t?t(u):u;u=n||u!==0?u:0;if(a&&h===h){var p=c.length;while(p--){if(c[p]===h){continue e}}if(t){c.push(h)}l.push(u)}else if(!o(c,h,n)){if(c!==l){c.push(h)}l.push(u)}}return l}function Lo(e,t){t=Vo(t,e);e=Ca(e,t);return e==null||delete e[Pa(ol(t))]}function Fo(e,t,i,n){return Ao(e,t,i(Or(e,t)),n)}function $o(e,t,i,n){var r=e.length,o=n?r:-1;while((n?o--:++o<r)&&t(e[o],o,e)){}return i?Do(e,n?0:o,n?o+1:r):Do(e,n?o+1:0,n?r:o)}function Go(e,t){var i=e;if(i instanceof Tn){i=i.value()}return Ai(t,(function(e,t){return t.func.apply(t.thisArg,Si([e],t.args))}),i)}function Bo(e,t,i){var n=e.length;if(n<2){return n?No(e[0]):[]}var r=-1,o=Ze(n);while(++r<n){var s=e[r],a=-1;while(++a<n){if(a!=r){o[r]=Cr(o[r]||s,e[a],t,i)}}}return No(Dr(o,1),t,i)}function Ho(t,i,n){var r=-1,o=t.length,s=i.length,a={};while(++r<o){var l=r<s?i[r]:e;n(a,t[r],l)}return a}function zo(e){return ud(e)?e:[]}function Wo(e){return typeof e=="function"?e:kh}function Vo(e,t){if(ld(e)){return e}return la(e,t)?[e]:ka(Jd(e))}var jo=Co;function Uo(t,i,n){var r=t.length;n=n===e?r:n;return!i&&n>=r?t:Do(t,i,n)}var Yo=kt||function(e){return ii.clearTimeout(e)};function qo(e,t){if(t){return e.slice()}var i=e.length,n=Ct?Ct(i):new e.constructor(i);e.copy(n);return n}function Ko(e){var t=new e.constructor(e.byteLength);new wt(t).set(new wt(e));return t}function Xo(e,t){var i=t?Ko(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}function Zo(e){var t=new e.constructor(e.source,ze.exec(e));t.lastIndex=e.lastIndex;return t}function Qo(e){return Cn?it(Cn.call(e)):{}}function Jo(e,t){var i=t?Ko(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function es(t,i){if(t!==i){var n=t!==e,r=t===null,o=t===t,s=Gd(t);var a=i!==e,l=i===null,c=i===i,d=Gd(i);if(!l&&!d&&!s&&t>i||s&&a&&c&&!l&&!d||r&&a&&c||!n&&c||!o){return 1}if(!r&&!s&&!d&&t<i||d&&n&&o&&!r&&!s||l&&n&&o||!a&&o||!c){return-1}}return 0}function ts(e,t,i){var n=-1,r=e.criteria,o=t.criteria,s=r.length,a=i.length;while(++n<s){var l=es(r[n],o[n]);if(l){if(n>=a){return l}var c=i[n];return l*(c=="desc"?-1:1)}}return e.index-t.index}function is(e,t,i,n){var r=-1,o=e.length,s=i.length,a=-1,l=t.length,c=zt(o-s,0),d=Ze(l+c),u=!n;while(++a<l){d[a]=t[a]}while(++r<s){if(u||r<o){d[i[r]]=e[r]}}while(c--){d[a++]=e[r++]}return d}function ns(e,t,i,n){var r=-1,o=e.length,s=-1,a=i.length,l=-1,c=t.length,d=zt(o-a,0),u=Ze(d+c),h=!n;while(++r<d){u[r]=e[r]}var p=r;while(++l<c){u[p+l]=t[l]}while(++s<a){if(h||r<o){u[p+i[s]]=e[r++]}}return u}function rs(e,t){var i=-1,n=e.length;t||(t=Ze(n));while(++i<n){t[i]=e[i]}return t}function os(t,i,n,r){var o=!n;n||(n={});var s=-1,a=i.length;while(++s<a){var l=i[s];var c=r?r(n[l],t[l],l,n,t):e;if(c===e){c=t[l]}if(o){fr(n,l,c)}else{cr(n,l,c)}}return n}function ss(e,t){return os(e,Ks(e),t)}function as(e,t){return os(e,Xs(e),t)}function ls(e,t){return function(i,n){var r=ld(i)?gi:ur,o=t?t():{};return r(i,e,Vs(n,2),o)}}function cs(t){return Co((function(i,n){var r=-1,o=n.length,s=o>1?n[o-1]:e,a=o>2?n[2]:e;s=t.length>3&&typeof s=="function"?(o--,s):e;if(a&&aa(n[0],n[1],a)){s=o<3?e:s;o=1}i=it(i);while(++r<o){var l=n[r];if(l){t(i,l,r,s)}}return i}))}function ds(e,t){return function(i,n){if(i==null){return i}if(!dd(i)){return e(i,n)}var r=i.length,o=t?r:-1,s=it(i);while(t?o--:++o<r){if(n(s[o],o,s)===false){break}}return i}}function us(e){return function(t,i,n){var r=-1,o=it(t),s=n(t),a=s.length;while(a--){var l=s[e?a:++r];if(i(o[l],l,o)===false){break}}return t}}function hs(e,t,i){var n=t&f,r=gs(e);function o(){var t=this&&this!==ii&&this instanceof o?r:e;return t.apply(n?i:this,arguments)}return o}function ps(t){return function(i){i=Jd(i);var n=en(i)?hn(i):e;var r=n?n[0]:i.charAt(0);var o=n?Uo(n,1).join(""):i.slice(1);return r[t]()+o}}function fs(e){return function(t){return Ai(Ch(qu(t).replace($t,"")),e,"")}}function gs(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=An(e.prototype),n=e.apply(i,t);return Ad(n)?n:i}}function ms(t,i,n){var r=gs(t);function o(){var s=arguments.length,a=Ze(s),l=s,c=Ws(o);while(l--){a[l]=arguments[l]}var d=s<3&&a[0]!==c&&a[s-1]!==c?[]:sn(a,c);s-=d.length;if(s<n){return Ts(t,i,ys,o.placeholder,e,a,d,e,e,n-s)}var u=this&&this!==ii&&this instanceof o?r:t;return fi(u,this,a)}return o}function vs(t){return function(i,n,r){var o=it(i);if(!dd(i)){var s=Vs(n,3);i=_u(i);n=function(e){return s(o[e],e,o)}}var a=t(i,n,r);return a>-1?o[s?i[a]:a]:e}}function bs(t){return $s((function(i){var n=i.length,o=n,s=En.prototype.thru;if(t){i.reverse()}while(o--){var a=i[o];if(typeof a!="function"){throw new ot(r)}if(s&&!l&&zs(a)=="wrapper"){var l=new En([],true)}}o=l?o:n;while(++o<n){a=i[o];var c=zs(a),d=c=="wrapper"?Hs(a):e;if(d&&da(d[0])&&d[1]==(C|v|y|_)&&!d[4].length&&d[9]==1){l=l[zs(d[0])].apply(l,d[3])}else{l=a.length==1&&da(a)?l[c]():l.thru(a)}}return function(){var e=arguments,t=e[0];if(l&&e.length==1&&ld(t)){return l.plant(t).value()}var r=0,o=n?i[r].apply(this,e):t;while(++r<n){o=i[r].call(this,o)}return o}}))}function ys(t,i,n,r,o,s,a,l,c,d){var u=i&C,h=i&f,p=i&g,m=i&(v|b),y=i&S,w=p?e:gs(t);function _(){var e=arguments.length,f=Ze(e),g=e;while(g--){f[g]=arguments[g]}if(m){var v=Ws(_),b=Ki(f,v)}if(r){f=is(f,r,o,m)}if(s){f=ns(f,s,a,m)}e-=b;if(m&&e<d){var C=sn(f,v);return Ts(t,i,ys,_.placeholder,n,f,C,l,c,d-e)}var S=h?n:this,A=p?S[t]:t;e=f.length;if(l){f=_a(f,l)}else if(y&&e>1){f.reverse()}if(u&&c<e){f.length=c}if(this&&this!==ii&&this instanceof _){A=w||gs(A)}return A.apply(S,f)}return _}function ws(e,t){return function(i,n){return zr(i,e,t(n),{})}}function Cs(t,i){return function(n,r){var o;if(n===e&&r===e){return i}if(n!==e){o=n}if(r!==e){if(o===e){return r}if(typeof n=="string"||typeof r=="string"){n=Oo(n);r=Oo(r)}else{n=Io(n);r=Io(r)}o=t(n,r)}return o}}function _s(e){return $s((function(t){t=_i(t,Vi(Vs()));return Co((function(i){var n=this;return e(t,(function(e){return fi(e,n,i)}))}))}))}function Ss(t,i){i=i===e?" ":Oo(i);var n=i.length;if(n<2){return n?wo(i,t):i}var r=wo(i,It(t/un(i)));return en(i)?Uo(hn(r),0,t).join(""):r.slice(0,t)}function As(e,t,i,n){var r=t&f,o=gs(e);function s(){var t=-1,a=arguments.length,l=-1,c=n.length,d=Ze(c+a),u=this&&this!==ii&&this instanceof s?o:e;while(++l<c){d[l]=n[l]}while(a--){d[l++]=arguments[++t]}return fi(u,r?i:this,d)}return s}function xs(t){return function(i,n,r){if(r&&typeof r!="number"&&aa(i,n,r)){n=r=e}i=Yd(i);if(n===e){n=i;i=0}else{n=Yd(n)}r=r===e?i<n?1:-1:Yd(r);return yo(i,n,r,t)}}function Es(e){return function(t,i){if(!(typeof t=="string"&&typeof i=="string")){t=Xd(t);i=Xd(i)}return e(t,i)}}function Ts(t,i,n,r,o,s,a,l,c,d){var u=i&v,h=u?a:e,p=u?e:a,b=u?s:e,C=u?e:s;i|=u?y:w;i&=~(u?w:y);if(!(i&m)){i&=~(f|g)}var _=[t,i,o,b,h,C,p,l,c,d];var S=n.apply(e,_);if(da(t)){Aa(S,_)}S.placeholder=r;return Ta(S,t,i)}function Ds(e){var t=tt[e];return function(e,i){e=Xd(e);i=i==null?0:Wt(qd(i),292);if(i&&Ft(e)){var n=(Jd(e)+"e").split("e"),r=t(n[0]+"e"+(+n[1]+i));n=(Jd(r)+"e").split("e");return+(n[0]+"e"+(+n[1]-i))}return t(e)}}var Ms=!(ri&&1/an(new ri([,-0]))[1]==P)?$h:function(e){return new ri(e)};function ks(e){return function(t){var i=Zs(t);if(i==q){return rn(t)}if(i==te){return ln(t)}return zi(t,e(t))}}function Ps(t,i,n,o,s,a,l,c){var d=i&g;if(!d&&typeof t!="function"){throw new ot(r)}var u=o?o.length:0;if(!u){i&=~(y|w);o=s=e}l=l===e?l:zt(qd(l),0);c=c===e?c:qd(c);u-=s?s.length:0;if(i&w){var h=o,p=s;o=s=e}var m=d?e:Hs(t);var C=[t,i,n,o,s,h,p,a,l,c];if(m){va(C,m)}t=C[0];i=C[1];n=C[2];o=C[3];s=C[4];c=C[9]=C[9]===e?d?0:t.length:zt(C[9]-u,0);if(!c&&i&(v|b)){i&=~(v|b)}if(!i||i==f){var _=hs(t,i,n)}else if(i==v||i==b){_=ms(t,i,c)}else if((i==y||i==(f|y))&&!s.length){_=As(t,i,n,o)}else{_=ys.apply(e,C)}var S=m?xo:Aa;return Ta(S(_,C),t,i)}function Rs(t,i,n,r){if(t===e||rd(t,lt[n])&&!ut.call(r,n)){return i}return t}function Is(t,i,n,r,o,s){if(Ad(t)&&Ad(i)){s.set(i,t);lo(t,i,e,Is,s);s["delete"](i)}return t}function Os(t){return Od(t)?e:t}function Ns(t,i,n,r,o,s){var a=n&h,l=t.length,c=i.length;if(l!=c&&!(a&&c>l)){return false}var d=s.get(t);var u=s.get(i);if(d&&u){return d==i&&u==t}var f=-1,g=true,m=n&p?new Kn:e;s.set(t,i);s.set(i,t);while(++f<l){var v=t[f],b=i[f];if(r){var y=a?r(b,v,f,i,t,s):r(v,b,f,t,i,s)}if(y!==e){if(y){continue}g=false;break}if(m){if(!Ei(i,(function(e,t){if(!Ui(m,t)&&(v===e||o(v,e,n,r,s))){return m.push(t)}}))){g=false;break}}else if(!(v===b||o(v,b,n,r,s))){g=false;break}}s["delete"](t);s["delete"](i);return g}function Ls(e,t,i,n,r,o,s){switch(i){case le:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset){return false}e=e.buffer;t=t.buffer;case ae:if(e.byteLength!=t.byteLength||!o(new wt(e),new wt(t))){return false}return true;case z:case W:case K:return rd(+e,+t);case j:return e.name==t.name&&e.message==t.message;case ee:case ie:return e==t+"";case q:var a=rn;case te:var l=n&h;a||(a=an);if(e.size!=t.size&&!l){return false}var c=s.get(e);if(c){return c==t}n|=p;s.set(e,t);var d=Ns(a(e),a(t),n,r,o,s);s["delete"](e);return d;case ne:if(Cn){return Cn.call(e)==Cn.call(t)}}return false}function Fs(t,i,n,r,o,s){var a=n&h,l=Gs(t),c=l.length,d=Gs(i),u=d.length;if(c!=u&&!a){return false}var p=c;while(p--){var f=l[p];if(!(a?f in i:ut.call(i,f))){return false}}var g=s.get(t);var m=s.get(i);if(g&&m){return g==i&&m==t}var v=true;s.set(t,i);s.set(i,t);var b=a;while(++p<c){f=l[p];var y=t[f],w=i[f];if(r){var C=a?r(w,y,f,i,t,s):r(y,w,f,t,i,s)}if(!(C===e?y===w||o(y,w,n,r,s):C)){v=false;break}b||(b=f=="constructor")}if(v&&!b){var _=t.constructor,S=i.constructor;if(_!=S&&("constructor"in t&&"constructor"in i)&&!(typeof _=="function"&&_ instanceof _&&typeof S=="function"&&S instanceof S)){v=false}}s["delete"](t);s["delete"](i);return v}function $s(t){return Ea(wa(t,e,qa),t+"")}function Gs(e){return Nr(e,_u,Ks)}function Bs(e){return Nr(e,Su,Xs)}var Hs=!Ti?$h:function(e){return Ti.get(e)};function zs(e){var t=e.name+"",i=Di[t],n=ut.call(Di,t)?i.length:0;while(n--){var r=i[n],o=r.func;if(o==null||o==e){return r.name}}return t}function Ws(e){var t=ut.call(Sn,"placeholder")?Sn:e;return t.placeholder}function Vs(){var e=Sn.iteratee||Ph;e=e===Ph?to:e;return arguments.length?e(arguments[0],arguments[1]):e}function js(e,t){var i=e.__data__;return ca(t)?i[typeof t=="string"?"string":"hash"]:i.map}function Us(e){var t=_u(e),i=t.length;while(i--){var n=t[i],r=e[n];t[i]=[n,r,fa(r)]}return t}function Ys(t,i){var n=Ji(t,i);return Zr(n)?n:e}function qs(t){var i=ut.call(t,Dt),n=t[Dt];try{t[Dt]=e;var r=true}catch(e){}var o=ft.call(t);if(r){if(i){t[Dt]=n}else{delete t[Dt]}}return o}var Ks=!Nt?Yh:function(e){if(e==null){return[]}e=it(e);return yi(Nt(e),(function(t){return At.call(e,t)}))};var Xs=!Nt?Yh:function(e){var t=[];while(e){Si(t,Ks(e));e=_t(e)}return t};var Zs=Lr;if(ei&&Zs(new ei(new ArrayBuffer(1)))!=le||ti&&Zs(new ti)!=q||ni&&Zs(ni.resolve())!=Q||ri&&Zs(new ri)!=te||si&&Zs(new si)!=oe){Zs=function(t){var i=Lr(t),n=i==Z?t.constructor:e,r=n?Ra(n):"";if(r){switch(r){case Fi:return le;case cn:return q;case gn:return Q;case mn:return te;case bn:return oe}}return i}}function Qs(e,t,i){var n=-1,r=i.length;while(++n<r){var o=i[n],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Wt(t,e+s);break;case"takeRight":e=zt(e,t-s);break}}return{start:e,end:t}}function Js(e){var t=e.match(Le);return t?t[1].split(Fe):[]}function ea(e,t,i){t=Vo(t,e);var n=-1,r=t.length,o=false;while(++n<r){var s=Pa(t[n]);if(!(o=e!=null&&i(e,s))){break}e=e[s]}if(o||++n!=r){return o}r=e==null?0:e.length;return!!r&&Sd(r)&&sa(s,r)&&(ld(e)||ad(e))}function ta(e){var t=e.length,i=new e.constructor(t);if(t&&typeof e[0]=="string"&&ut.call(e,"index")){i.index=e.index;i.input=e.input}return i}function ia(e){return typeof e.constructor=="function"&&!pa(e)?An(_t(e)):{}}function na(e,t,i){var n=e.constructor;switch(t){case ae:return Ko(e);case z:case W:return new n(+e);case le:return Xo(e,i);case ce:case de:case ue:case he:case pe:case fe:case ge:case me:case ve:return Jo(e,i);case q:return new n;case K:case ie:return new n(e);case ee:return Zo(e);case te:return new n;case ne:return Qo(e)}}function ra(e,t){var i=t.length;if(!i){return e}var n=i-1;t[n]=(i>1?"& ":"")+t[n];t=t.join(i>2?", ":" ");return e.replace(Ne,"{\n/* [wrapped with "+t+"] */\n")}function oa(e){return ld(e)||ad(e)||!!(Et&&e&&e[Et])}function sa(e,t){var i=typeof e;t=t==null?R:t;return!!t&&(i=="number"||i!="symbol"&&Ye.test(e))&&(e>-1&&e%1==0&&e<t)}function aa(e,t,i){if(!Ad(i)){return false}var n=typeof t;if(n=="number"?dd(i)&&sa(t,i.length):n=="string"&&t in i){return rd(i[t],e)}return false}function la(e,t){if(ld(e)){return false}var i=typeof e;if(i=="number"||i=="symbol"||i=="boolean"||e==null||Gd(e)){return true}return Me.test(e)||!De.test(e)||t!=null&&e in it(t)}function ca(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function da(e){var t=zs(e),i=Sn[t];if(typeof i!="function"||!(t in Tn.prototype)){return false}if(e===i){return true}var n=Hs(i);return!!n&&e===n[0]}function ua(e){return!!pt&&pt in e}var ha=ct?Cd:qh;function pa(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||lt;return e===i}function fa(e){return e===e&&!Ad(e)}function ga(t,i){return function(n){if(n==null){return false}return n[t]===i&&(i!==e||t in it(n))}}function ma(e){var t=Bc(e,(function(e){if(i.size===a){i.clear()}return e}));var i=t.cache;return t}function va(e,t){var i=e[1],n=t[1],r=i|n,o=r<(f|g|C);var s=n==C&&i==v||n==C&&i==_&&e[7].length<=t[8]||n==(C|_)&&t[7].length<=t[8]&&i==v;if(!(o||s)){return e}if(n&f){e[2]=t[2];r|=i&f?0:m}var a=t[3];if(a){var c=e[3];e[3]=c?is(c,a,t[4]):a;e[4]=c?sn(e[3],l):t[4]}a=t[5];if(a){c=e[5];e[5]=c?ns(c,a,t[6]):a;e[6]=c?sn(e[5],l):t[6]}a=t[7];if(a){e[7]=a}if(n&C){e[8]=e[8]==null?t[8]:Wt(e[8],t[8])}if(e[9]==null){e[9]=t[9]}e[0]=t[0];e[1]=r;return e}function ba(e){var t=[];if(e!=null){for(var i in it(e)){t.push(i)}}return t}function ya(e){return ft.call(e)}function wa(t,i,n){i=zt(i===e?t.length-1:i,0);return function(){var e=arguments,r=-1,o=zt(e.length-i,0),s=Ze(o);while(++r<o){s[r]=e[i+r]}r=-1;var a=Ze(i+1);while(++r<i){a[r]=e[r]}a[i]=n(s);return fi(t,this,a)}}function Ca(e,t){return t.length<2?e:Or(e,Do(t,0,-1))}function _a(t,i){var n=t.length,r=Wt(i.length,n),o=rs(t);while(r--){var s=i[r];t[r]=sa(s,n)?o[s]:e}return t}function Sa(e,t){if(t==="constructor"&&typeof e[t]==="function"){return}if(t=="__proto__"){return}return e[t]}var Aa=Da(xo);var xa=Rt||function(e,t){return ii.setTimeout(e,t)};var Ea=Da(Eo);function Ta(e,t,i){var n=t+"";return Ea(e,ra(n,Ia(Js(n),i)))}function Da(t){var i=0,n=0;return function(){var r=qt(),o=T-(r-n);n=r;if(o>0){if(++i>=E){return arguments[0]}}else{i=0}return t.apply(e,arguments)}}function Ma(t,i){var n=-1,r=t.length,o=r-1;i=i===e?r:i;while(++n<i){var s=bo(n,o),a=t[s];t[s]=t[n];t[n]=a}t.length=i;return t}var ka=ma((function(e){var t=[];if(e.charCodeAt(0)===46){t.push("")}e.replace(ke,(function(e,i,n,r){t.push(n?r.replace(Be,"$1"):i||e)}));return t}));function Pa(e){if(typeof e=="string"||Gd(e)){return e}var t=e+"";return t=="0"&&1/e==-P?"-0":t}function Ra(e){if(e!=null){try{return dt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ia(e,t){mi($,(function(i){var n="_."+i[0];if(t&i[1]&&!wi(e,n)){e.push(n)}}));return e.sort()}function Oa(e){if(e instanceof Tn){return e.clone()}var t=new En(e.__wrapped__,e.__chain__);t.__actions__=rs(e.__actions__);t.__index__=e.__index__;t.__values__=e.__values__;return t}function Na(t,i,n){if(n?aa(t,i,n):i===e){i=1}else{i=zt(qd(i),0)}var r=t==null?0:t.length;if(!r||i<1){return[]}var o=0,s=0,a=Ze(It(r/i));while(o<r){a[s++]=Do(t,o,o+=i)}return a}function La(e){var t=-1,i=e==null?0:e.length,n=0,r=[];while(++t<i){var o=e[t];if(o){r[n++]=o}}return r}function Fa(){var e=arguments.length;if(!e){return[]}var t=Ze(e-1),i=arguments[0],n=e;while(n--){t[n-1]=arguments[n]}return Si(ld(i)?rs(i):[i],Dr(t,1))}var $a=Co((function(e,t){return ud(e)?Cr(e,Dr(t,1,ud,true)):[]}));var Ga=Co((function(t,i){var n=ol(i);if(ud(n)){n=e}return ud(t)?Cr(t,Dr(i,1,ud,true),Vs(n,2)):[]}));var Ba=Co((function(t,i){var n=ol(i);if(ud(n)){n=e}return ud(t)?Cr(t,Dr(i,1,ud,true),e,n):[]}));function Ha(t,i,n){var r=t==null?0:t.length;if(!r){return[]}i=n||i===e?1:qd(i);return Do(t,i<0?0:i,r)}function za(t,i,n){var r=t==null?0:t.length;if(!r){return[]}i=n||i===e?1:qd(i);i=r-i;return Do(t,0,i<0?0:i)}function Wa(e,t){return e&&e.length?$o(e,Vs(t,3),true,true):[]}function Va(e,t){return e&&e.length?$o(e,Vs(t,3),true):[]}function ja(e,t,i,n){var r=e==null?0:e.length;if(!r){return[]}if(i&&typeof i!="number"&&aa(e,t,i)){i=0;n=r}return Er(e,t,i,n)}function Ua(e,t,i){var n=e==null?0:e.length;if(!n){return-1}var r=i==null?0:qd(i);if(r<0){r=zt(n+r,0)}return Pi(e,Vs(t,3),r)}function Ya(t,i,n){var r=t==null?0:t.length;if(!r){return-1}var o=r-1;if(n!==e){o=qd(n);o=n<0?zt(r+o,0):Wt(o,r-1)}return Pi(t,Vs(i,3),o,true)}function qa(e){var t=e==null?0:e.length;return t?Dr(e,1):[]}function Ka(e){var t=e==null?0:e.length;return t?Dr(e,P):[]}function Xa(t,i){var n=t==null?0:t.length;if(!n){return[]}i=i===e?1:qd(i);return Dr(t,i)}function Za(e){var t=-1,i=e==null?0:e.length,n={};while(++t<i){var r=e[t];n[r[0]]=r[1]}return n}function Qa(t){return t&&t.length?t[0]:e}function Ja(e,t,i){var n=e==null?0:e.length;if(!n){return-1}var r=i==null?0:qd(i);if(r<0){r=zt(n+r,0)}return Ri(e,t,r)}function el(e){var t=e==null?0:e.length;return t?Do(e,0,-1):[]}var tl=Co((function(e){var t=_i(e,zo);return t.length&&t[0]===e[0]?Hr(t):[]}));var il=Co((function(t){var i=ol(t),n=_i(t,zo);if(i===ol(n)){i=e}else{n.pop()}return n.length&&n[0]===t[0]?Hr(n,Vs(i,2)):[]}));var nl=Co((function(t){var i=ol(t),n=_i(t,zo);i=typeof i=="function"?i:e;if(i){n.pop()}return n.length&&n[0]===t[0]?Hr(n,e,i):[]}));function rl(e,t){return e==null?"":Bt.call(e,t)}function ol(t){var i=t==null?0:t.length;return i?t[i-1]:e}function sl(t,i,n){var r=t==null?0:t.length;if(!r){return-1}var o=r;if(n!==e){o=qd(n);o=o<0?zt(r+o,0):Wt(o,r-1)}return i===i?dn(t,i,o):Pi(t,Oi,o,true)}function al(t,i){return t&&t.length?uo(t,qd(i)):e}var ll=Co(cl);function cl(e,t){return e&&e.length&&t&&t.length?mo(e,t):e}function dl(e,t,i){return e&&e.length&&t&&t.length?mo(e,t,Vs(i,2)):e}function ul(t,i,n){return t&&t.length&&i&&i.length?mo(t,i,e,n):t}var hl=$s((function(e,t){var i=e==null?0:e.length,n=gr(e,t);vo(e,_i(t,(function(e){return sa(e,i)?+e:e})).sort(es));return n}));function pl(e,t){var i=[];if(!(e&&e.length)){return i}var n=-1,r=[],o=e.length;t=Vs(t,3);while(++n<o){var s=e[n];if(t(s,n,e)){i.push(s);r.push(n)}}vo(e,r);return i}function fl(e){return e==null?e:Zt.call(e)}function gl(t,i,n){var r=t==null?0:t.length;if(!r){return[]}if(n&&typeof n!="number"&&aa(t,i,n)){i=0;n=r}else{i=i==null?0:qd(i);n=n===e?r:qd(n)}return Do(t,i,n)}function ml(e,t){return ko(e,t)}function vl(e,t,i){return Po(e,t,Vs(i,2))}function bl(e,t){var i=e==null?0:e.length;if(i){var n=ko(e,t);if(n<i&&rd(e[n],t)){return n}}return-1}function yl(e,t){return ko(e,t,true)}function wl(e,t,i){return Po(e,t,Vs(i,2),true)}function Cl(e,t){var i=e==null?0:e.length;if(i){var n=ko(e,t,true)-1;if(rd(e[n],t)){return n}}return-1}function _l(e){return e&&e.length?Ro(e):[]}function Sl(e,t){return e&&e.length?Ro(e,Vs(t,2)):[]}function Al(e){var t=e==null?0:e.length;return t?Do(e,1,t):[]}function xl(t,i,n){if(!(t&&t.length)){return[]}i=n||i===e?1:qd(i);return Do(t,0,i<0?0:i)}function El(t,i,n){var r=t==null?0:t.length;if(!r){return[]}i=n||i===e?1:qd(i);i=r-i;return Do(t,i<0?0:i,r)}function Tl(e,t){return e&&e.length?$o(e,Vs(t,3),false,true):[]}function Dl(e,t){return e&&e.length?$o(e,Vs(t,3)):[]}var Ml=Co((function(e){return No(Dr(e,1,ud,true))}));var kl=Co((function(t){var i=ol(t);if(ud(i)){i=e}return No(Dr(t,1,ud,true),Vs(i,2))}));var Pl=Co((function(t){var i=ol(t);i=typeof i=="function"?i:e;return No(Dr(t,1,ud,true),e,i)}));function Rl(e){return e&&e.length?No(e):[]}function Il(e,t){return e&&e.length?No(e,Vs(t,2)):[]}function Ol(t,i){i=typeof i=="function"?i:e;return t&&t.length?No(t,e,i):[]}function Nl(e){if(!(e&&e.length)){return[]}var t=0;e=yi(e,(function(e){if(ud(e)){t=zt(e.length,t);return true}}));return Hi(t,(function(t){return _i(e,Li(t))}))}function Ll(t,i){if(!(t&&t.length)){return[]}var n=Nl(t);if(i==null){return n}return _i(n,(function(t){return fi(i,e,t)}))}var Fl=Co((function(e,t){return ud(e)?Cr(e,t):[]}));var $l=Co((function(e){return Bo(yi(e,ud))}));var Gl=Co((function(t){var i=ol(t);if(ud(i)){i=e}return Bo(yi(t,ud),Vs(i,2))}));var Bl=Co((function(t){var i=ol(t);i=typeof i=="function"?i:e;return Bo(yi(t,ud),e,i)}));var Hl=Co(Nl);function zl(e,t){return Ho(e||[],t||[],cr)}function Wl(e,t){return Ho(e||[],t||[],Ao)}var Vl=Co((function(t){var i=t.length,n=i>1?t[i-1]:e;n=typeof n=="function"?(t.pop(),n):e;return Ll(t,n)}));function jl(e){var t=Sn(e);t.__chain__=true;return t}function Ul(e,t){t(e);return e}function Yl(e,t){return t(e)}var ql=$s((function(t){var i=t.length,n=i?t[0]:0,r=this.__wrapped__,o=function(e){return gr(e,t)};if(i>1||this.__actions__.length||!(r instanceof Tn)||!sa(n)){return this.thru(o)}r=r.slice(n,+n+(i?1:0));r.__actions__.push({func:Yl,args:[o],thisArg:e});return new En(r,this.__chain__).thru((function(t){if(i&&!t.length){t.push(e)}return t}))}));function Kl(){return jl(this)}function Xl(){return new En(this.value(),this.__chain__)}function Zl(){if(this.__values__===e){this.__values__=Ud(this.value())}var t=this.__index__>=this.__values__.length,i=t?e:this.__values__[this.__index__++];return{done:t,value:i}}function Ql(){return this}function Jl(t){var i,n=this;while(n instanceof xn){var r=Oa(n);r.__index__=0;r.__values__=e;if(i){o.__wrapped__=r}else{i=r}var o=r;n=n.__wrapped__}o.__wrapped__=t;return i}function ec(){var t=this.__wrapped__;if(t instanceof Tn){var i=t;if(this.__actions__.length){i=new Tn(this)}i=i.reverse();i.__actions__.push({func:Yl,args:[fl],thisArg:e});return new En(i,this.__chain__)}return this.thru(fl)}function tc(){return Go(this.__wrapped__,this.__actions__)}var ic=ls((function(e,t,i){if(ut.call(e,i)){++e[i]}else{fr(e,i,1)}}));function nc(t,i,n){var r=ld(t)?bi:Ar;if(n&&aa(t,i,n)){i=e}return r(t,Vs(i,3))}function rc(e,t){var i=ld(e)?yi:Tr;return i(e,Vs(t,3))}var oc=vs(Ua);var sc=vs(Ya);function ac(e,t){return Dr(mc(e,t),1)}function lc(e,t){return Dr(mc(e,t),P)}function cc(t,i,n){n=n===e?1:qd(n);return Dr(mc(t,i),n)}function dc(e,t){var i=ld(e)?mi:_r;return i(e,Vs(t,3))}function uc(e,t){var i=ld(e)?vi:Sr;return i(e,Vs(t,3))}var hc=ls((function(e,t,i){if(ut.call(e,i)){e[i].push(t)}else{fr(e,i,[t])}}));function pc(e,t,i,n){e=dd(e)?e:Hu(e);i=i&&!n?qd(i):0;var r=e.length;if(i<0){i=zt(r+i,0)}return $d(e)?i<=r&&e.indexOf(t,i)>-1:!!r&&Ri(e,t,i)>-1}var fc=Co((function(e,t,i){var n=-1,r=typeof t=="function",o=dd(e)?Ze(e.length):[];_r(e,(function(e){o[++n]=r?fi(t,e,i):Wr(e,t,i)}));return o}));var gc=ls((function(e,t,i){fr(e,i,t)}));function mc(e,t){var i=ld(e)?_i:oo;return i(e,Vs(t,3))}function vc(t,i,n,r){if(t==null){return[]}if(!ld(i)){i=i==null?[]:[i]}n=r?e:n;if(!ld(n)){n=n==null?[]:[n]}return ho(t,i,n)}var bc=ls((function(e,t,i){e[i?0:1].push(t)}),(function(){return[[],[]]}));function yc(e,t,i){var n=ld(e)?Ai:$i,r=arguments.length<3;return n(e,Vs(t,4),i,r,_r)}function wc(e,t,i){var n=ld(e)?xi:$i,r=arguments.length<3;return n(e,Vs(t,4),i,r,Sr)}function Cc(e,t){var i=ld(e)?yi:Tr;return i(e,Hc(Vs(t,3)))}function _c(e){var t=ld(e)?or:_o;return t(e)}function Sc(t,i,n){if(n?aa(t,i,n):i===e){i=1}else{i=qd(i)}var r=ld(t)?sr:So;return r(t,i)}function Ac(e){var t=ld(e)?ar:To;return t(e)}function xc(e){if(e==null){return 0}if(dd(e)){return $d(e)?un(e):e.length}var t=Zs(e);if(t==q||t==te){return e.size}return io(e).length}function Ec(t,i,n){var r=ld(t)?Ei:Mo;if(n&&aa(t,i,n)){i=e}return r(t,Vs(i,3))}var Tc=Co((function(e,t){if(e==null){return[]}var i=t.length;if(i>1&&aa(e,t[0],t[1])){t=[]}else if(i>2&&aa(t[0],t[1],t[2])){t=[t[0]]}return ho(e,Dr(t,1),[])}));var Dc=Pt||function(){return ii.Date.now()};function Mc(e,t){if(typeof t!="function"){throw new ot(r)}e=qd(e);return function(){if(--e<1){return t.apply(this,arguments)}}}function kc(t,i,n){i=n?e:i;i=t&&i==null?t.length:i;return Ps(t,C,e,e,e,e,i)}function Pc(t,i){var n;if(typeof i!="function"){throw new ot(r)}t=qd(t);return function(){if(--t>0){n=i.apply(this,arguments)}if(t<=1){i=e}return n}}var Rc=Co((function(e,t,i){var n=f;if(i.length){var r=sn(i,Ws(Rc));n|=y}return Ps(e,n,t,i,r)}));var Ic=Co((function(e,t,i){var n=f|g;if(i.length){var r=sn(i,Ws(Ic));n|=y}return Ps(t,n,e,i,r)}));function Oc(t,i,n){i=n?e:i;var r=Ps(t,v,e,e,e,e,e,i);r.placeholder=Oc.placeholder;return r}function Nc(t,i,n){i=n?e:i;var r=Ps(t,b,e,e,e,e,e,i);r.placeholder=Nc.placeholder;return r}function Lc(t,i,n){var o,s,a,l,c,d,u=0,h=false,p=false,f=true;if(typeof t!="function"){throw new ot(r)}i=Xd(i)||0;if(Ad(n)){h=!!n.leading;p="maxWait"in n;a=p?zt(Xd(n.maxWait)||0,i):a;f="trailing"in n?!!n.trailing:f}function g(i){var n=o,r=s;o=s=e;u=i;l=t.apply(r,n);return l}function m(e){u=e;c=xa(y,i);return h?g(e):l}function v(e){var t=e-d,n=e-u,r=i-t;return p?Wt(r,a-n):r}function b(t){var n=t-d,r=t-u;return d===e||n>=i||n<0||p&&r>=a}function y(){var e=Dc();if(b(e)){return w(e)}c=xa(y,v(e))}function w(t){c=e;if(f&&o){return g(t)}o=s=e;return l}function C(){if(c!==e){Yo(c)}u=0;o=d=s=c=e}function _(){return c===e?l:w(Dc())}function S(){var t=Dc(),n=b(t);o=arguments;s=this;d=t;if(n){if(c===e){return m(d)}if(p){Yo(c);c=xa(y,i);return g(d)}}if(c===e){c=xa(y,i)}return l}S.cancel=C;S.flush=_;return S}var Fc=Co((function(e,t){return wr(e,1,t)}));var $c=Co((function(e,t,i){return wr(e,Xd(t)||0,i)}));function Gc(e){return Ps(e,S)}function Bc(e,t){if(typeof e!="function"||t!=null&&typeof t!="function"){throw new ot(r)}var i=function(){var n=arguments,r=t?t.apply(this,n):n[0],o=i.cache;if(o.has(r)){return o.get(r)}var s=e.apply(this,n);i.cache=o.set(r,s)||o;return s};i.cache=new(Bc.Cache||Wn);return i}Bc.Cache=Wn;function Hc(e){if(typeof e!="function"){throw new ot(r)}return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function zc(e){return Pc(2,e)}var Wc=jo((function(e,t){t=t.length==1&&ld(t[0])?_i(t[0],Vi(Vs())):_i(Dr(t,1),Vi(Vs()));var i=t.length;return Co((function(n){var r=-1,o=Wt(n.length,i);while(++r<o){n[r]=t[r].call(this,n[r])}return fi(e,this,n)}))}));var Vc=Co((function(t,i){var n=sn(i,Ws(Vc));return Ps(t,y,e,i,n)}));var jc=Co((function(t,i){var n=sn(i,Ws(jc));return Ps(t,w,e,i,n)}));var Uc=$s((function(t,i){return Ps(t,_,e,e,e,i)}));function Yc(t,i){if(typeof t!="function"){throw new ot(r)}i=i===e?i:qd(i);return Co(t,i)}function qc(e,t){if(typeof e!="function"){throw new ot(r)}t=t==null?0:zt(qd(t),0);return Co((function(i){var n=i[t],r=Uo(i,0,t);if(n){Si(r,n)}return fi(e,this,r)}))}function Kc(e,t,i){var n=true,o=true;if(typeof e!="function"){throw new ot(r)}if(Ad(i)){n="leading"in i?!!i.leading:n;o="trailing"in i?!!i.trailing:o}return Lc(e,t,{leading:n,maxWait:t,trailing:o})}function Xc(e){return kc(e,1)}function Zc(e,t){return Vc(Wo(t),e)}function Qc(){if(!arguments.length){return[]}var e=arguments[0];return ld(e)?e:[e]}function Jc(e){return vr(e,u)}function ed(t,i){i=typeof i=="function"?i:e;return vr(t,u,i)}function td(e){return vr(e,c|u)}function id(t,i){i=typeof i=="function"?i:e;return vr(t,c|u,i)}function nd(e,t){return t==null||yr(e,t,_u(t))}function rd(e,t){return e===t||e!==e&&t!==t}var od=Es(Fr);var sd=Es((function(e,t){return e>=t}));var ad=Vr(function(){return arguments}())?Vr:function(e){return xd(e)&&ut.call(e,"callee")&&!At.call(e,"callee")};var ld=Ze.isArray;var cd=li?Vi(li):jr;function dd(e){return e!=null&&Sd(e.length)&&!Cd(e)}function ud(e){return xd(e)&&dd(e)}function hd(e){return e===true||e===false||xd(e)&&Lr(e)==z}var pd=Lt||qh;var fd=ci?Vi(ci):Ur;function gd(e){return xd(e)&&e.nodeType===1&&!Od(e)}function md(e){if(e==null){return true}if(dd(e)&&(ld(e)||typeof e=="string"||typeof e.splice=="function"||pd(e)||Bd(e)||ad(e))){return!e.length}var t=Zs(e);if(t==q||t==te){return!e.size}if(pa(e)){return!io(e).length}for(var i in e){if(ut.call(e,i)){return false}}return true}function vd(e,t){return Yr(e,t)}function bd(t,i,n){n=typeof n=="function"?n:e;var r=n?n(t,i):e;return r===e?Yr(t,i,e,n):!!r}function yd(e){if(!xd(e)){return false}var t=Lr(e);return t==j||t==V||typeof e.message=="string"&&typeof e.name=="string"&&!Od(e)}function wd(e){return typeof e=="number"&&Ft(e)}function Cd(e){if(!Ad(e)){return false}var t=Lr(e);return t==U||t==Y||t==H||t==J}function _d(e){return typeof e=="number"&&e==qd(e)}function Sd(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=R}function Ad(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function xd(e){return e!=null&&typeof e=="object"}var Ed=di?Vi(di):Kr;function Td(e,t){return e===t||Xr(e,t,Us(t))}function Dd(t,i,n){n=typeof n=="function"?n:e;return Xr(t,i,Us(i),n)}function Md(e){return Id(e)&&e!=+e}function kd(e){if(ha(e)){throw new Je(n)}return Zr(e)}function Pd(e){return e===null}function Rd(e){return e==null}function Id(e){return typeof e=="number"||xd(e)&&Lr(e)==K}function Od(e){if(!xd(e)||Lr(e)!=Z){return false}var t=_t(e);if(t===null){return true}var i=ut.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&dt.call(i)==gt}var Nd=ui?Vi(ui):Qr;function Ld(e){return _d(e)&&e>=-R&&e<=R}var Fd=hi?Vi(hi):Jr;function $d(e){return typeof e=="string"||!ld(e)&&xd(e)&&Lr(e)==ie}function Gd(e){return typeof e=="symbol"||xd(e)&&Lr(e)==ne}var Bd=pi?Vi(pi):eo;function Hd(t){return t===e}function zd(e){return xd(e)&&Zs(e)==oe}function Wd(e){return xd(e)&&Lr(e)==se}var Vd=Es(ro);var jd=Es((function(e,t){return e<=t}));function Ud(e){if(!e){return[]}if(dd(e)){return $d(e)?hn(e):rs(e)}if(Tt&&e[Tt]){return nn(e[Tt]())}var t=Zs(e),i=t==q?rn:t==te?an:Hu;return i(e)}function Yd(e){if(!e){return e===0?e:0}e=Xd(e);if(e===P||e===-P){var t=e<0?-1:1;return t*I}return e===e?e:0}function qd(e){var t=Yd(e),i=t%1;return t===t?i?t-i:t:0}function Kd(e){return e?mr(qd(e),0,N):0}function Xd(e){if(typeof e=="number"){return e}if(Gd(e)){return O}if(Ad(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ad(t)?t+"":t}if(typeof e!="string"){return e===0?e:+e}e=Wi(e);var i=Ve.test(e);return i||Ue.test(e)?Jt(e.slice(2),i?2:8):We.test(e)?O:+e}function Zd(e){return os(e,Su(e))}function Qd(e){return e?mr(qd(e),-R,R):e===0?e:0}function Jd(e){return e==null?"":Oo(e)}var eu=cs((function(e,t){if(pa(t)||dd(t)){os(t,_u(t),e);return}for(var i in t){if(ut.call(t,i)){cr(e,i,t[i])}}}));var tu=cs((function(e,t){os(t,Su(t),e)}));var iu=cs((function(e,t,i,n){os(t,Su(t),e,n)}));var nu=cs((function(e,t,i,n){os(t,_u(t),e,n)}));var ru=$s(gr);function ou(e,t){var i=An(e);return t==null?i:hr(i,t)}var su=Co((function(t,i){t=it(t);var n=-1;var r=i.length;var o=r>2?i[2]:e;if(o&&aa(i[0],i[1],o)){r=1}while(++n<r){var s=i[n];var a=Su(s);var l=-1;var c=a.length;while(++l<c){var d=a[l];var u=t[d];if(u===e||rd(u,lt[d])&&!ut.call(t,d)){t[d]=s[d]}}}return t}));var au=Co((function(t){t.push(e,Is);return fi(Tu,e,t)}));function lu(e,t){return ki(e,Vs(t,3),Pr)}function cu(e,t){return ki(e,Vs(t,3),Rr)}function du(e,t){return e==null?e:Mr(e,Vs(t,3),Su)}function uu(e,t){return e==null?e:kr(e,Vs(t,3),Su)}function hu(e,t){return e&&Pr(e,Vs(t,3))}function pu(e,t){return e&&Rr(e,Vs(t,3))}function fu(e){return e==null?[]:Ir(e,_u(e))}function gu(e){return e==null?[]:Ir(e,Su(e))}function mu(t,i,n){var r=t==null?e:Or(t,i);return r===e?n:r}function vu(e,t){return e!=null&&ea(e,t,$r)}function bu(e,t){return e!=null&&ea(e,t,Gr)}var yu=ws((function(e,t,i){if(t!=null&&typeof t.toString!="function"){t=ft.call(t)}e[t]=i}),Eh(kh));var wu=ws((function(e,t,i){if(t!=null&&typeof t.toString!="function"){t=ft.call(t)}if(ut.call(e,t)){e[t].push(i)}else{e[t]=[i]}}),Vs);var Cu=Co(Wr);function _u(e){return dd(e)?rr(e):io(e)}function Su(e){return dd(e)?rr(e,true):no(e)}function Au(e,t){var i={};t=Vs(t,3);Pr(e,(function(e,n,r){fr(i,t(e,n,r),e)}));return i}function xu(e,t){var i={};t=Vs(t,3);Pr(e,(function(e,n,r){fr(i,n,t(e,n,r))}));return i}var Eu=cs((function(e,t,i){lo(e,t,i)}));var Tu=cs((function(e,t,i,n){lo(e,t,i,n)}));var Du=$s((function(e,t){var i={};if(e==null){return i}var n=false;t=_i(t,(function(t){t=Vo(t,e);n||(n=t.length>1);return t}));os(e,Bs(e),i);if(n){i=vr(i,c|d|u,Os)}var r=t.length;while(r--){Lo(i,t[r])}return i}));function Mu(e,t){return Pu(e,Hc(Vs(t)))}var ku=$s((function(e,t){return e==null?{}:po(e,t)}));function Pu(e,t){if(e==null){return{}}var i=_i(Bs(e),(function(e){return[e]}));t=Vs(t);return fo(e,i,(function(e,i){return t(e,i[0])}))}function Ru(t,i,n){i=Vo(i,t);var r=-1,o=i.length;if(!o){o=1;t=e}while(++r<o){var s=t==null?e:t[Pa(i[r])];if(s===e){r=o;s=n}t=Cd(s)?s.call(t):s}return t}function Iu(e,t,i){return e==null?e:Ao(e,t,i)}function Ou(t,i,n,r){r=typeof r=="function"?r:e;return t==null?t:Ao(t,i,n,r)}var Nu=ks(_u);var Lu=ks(Su);function Fu(e,t,i){var n=ld(e),r=n||pd(e)||Bd(e);t=Vs(t,4);if(i==null){var o=e&&e.constructor;if(r){i=n?new o:[]}else if(Ad(e)){i=Cd(o)?An(_t(e)):{}}else{i={}}}(r?mi:Pr)(e,(function(e,n,r){return t(i,e,n,r)}));return i}function $u(e,t){return e==null?true:Lo(e,t)}function Gu(e,t,i){return e==null?e:Fo(e,t,Wo(i))}function Bu(t,i,n,r){r=typeof r=="function"?r:e;return t==null?t:Fo(t,i,Wo(n),r)}function Hu(e){return e==null?[]:ji(e,_u(e))}function zu(e){return e==null?[]:ji(e,Su(e))}function Wu(t,i,n){if(n===e){n=i;i=e}if(n!==e){n=Xd(n);n=n===n?n:0}if(i!==e){i=Xd(i);i=i===i?i:0}return mr(Xd(t),i,n)}function Vu(t,i,n){i=Yd(i);if(n===e){n=i;i=0}else{n=Yd(n)}t=Xd(t);return Br(t,i,n)}function ju(t,i,n){if(n&&typeof n!="boolean"&&aa(t,i,n)){i=n=e}if(n===e){if(typeof i=="boolean"){n=i;i=e}else if(typeof t=="boolean"){n=t;t=e}}if(t===e&&i===e){t=0;i=1}else{t=Yd(t);if(i===e){i=t;t=0}else{i=Yd(i)}}if(t>i){var r=t;t=i;i=r}if(n||t%1||i%1){var o=Xt();return Wt(t+o*(i-t+Qt("1e-"+((o+"").length-1))),i)}return bo(t,i)}var Uu=fs((function(e,t,i){t=t.toLowerCase();return e+(i?Yu(t):t)}));function Yu(e){return wh(Jd(e).toLowerCase())}function qu(e){e=Jd(e);return e&&e.replace(qe,Xi).replace(Gt,"")}function Ku(t,i,n){t=Jd(t);i=Oo(i);var r=t.length;n=n===e?r:mr(qd(n),0,r);var o=n;n-=i.length;return n>=0&&t.slice(n,o)==i}function Xu(e){e=Jd(e);return e&&Ae.test(e)?e.replace(_e,Zi):e}function Zu(e){e=Jd(e);return e&&Re.test(e)?e.replace(Pe,"\\$&"):e}var Qu=fs((function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}));var Ju=fs((function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}));var eh=ps("toLowerCase");function th(e,t,i){e=Jd(e);t=qd(t);var n=t?un(e):0;if(!t||n>=t){return e}var r=(t-n)/2;return Ss(Ot(r),i)+e+Ss(It(r),i)}function ih(e,t,i){e=Jd(e);t=qd(t);var n=t?un(e):0;return t&&n<t?e+Ss(t-n,i):e}function nh(e,t,i){e=Jd(e);t=qd(t);var n=t?un(e):0;return t&&n<t?Ss(t-n,i)+e:e}function rh(e,t,i){if(i||t==null){t=0}else if(t){t=+t}return Kt(Jd(e).replace(Ie,""),t||0)}function oh(t,i,n){if(n?aa(t,i,n):i===e){i=1}else{i=qd(i)}return wo(Jd(t),i)}function sh(){var e=arguments,t=Jd(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var ah=fs((function(e,t,i){return e+(i?"_":"")+t.toLowerCase()}));function lh(t,i,n){if(n&&typeof n!="number"&&aa(t,i,n)){i=n=e}n=n===e?N:n>>>0;if(!n){return[]}t=Jd(t);if(t&&(typeof i=="string"||i!=null&&!Nd(i))){i=Oo(i);if(!i&&en(t)){return Uo(hn(t),0,n)}}return t.split(i,n)}var ch=fs((function(e,t,i){return e+(i?" ":"")+wh(t)}));function dh(e,t,i){e=Jd(e);i=i==null?0:mr(qd(i),0,e.length);t=Oo(t);return e.slice(i,i+t.length)==t}function uh(t,i,n){var r=Sn.templateSettings;if(n&&aa(t,i,n)){i=e}t=Jd(t);i=iu({},i,r,Rs);var s=iu({},i.imports,r.imports,Rs),a=_u(s),l=ji(s,a);var c,d,u=0,h=i.interpolate||Ke,p="__p += '";var f=nt((i.escape||Ke).source+"|"+h.source+"|"+(h===Te?He:Ke).source+"|"+(i.evaluate||Ke).source+"|$","g");var g="//# sourceURL="+(ut.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++jt+"]")+"\n";t.replace(f,(function(e,i,n,r,o,s){n||(n=r);p+=t.slice(u,s).replace(Xe,Qi);if(i){c=true;p+="' +\n__e("+i+") +\n'"}if(o){d=true;p+="';\n"+o+";\n__p += '"}if(n){p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"}u=s+e.length;return e}));p+="';\n";var m=ut.call(i,"variable")&&i.variable;if(!m){p="with (obj) {\n"+p+"\n}\n"}else if(Ge.test(m)){throw new Je(o)}p=(d?p.replace(be,""):p).replace(ye,"$1").replace(we,"$1;");p="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(c?", __e = _.escape":"")+(d?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=_h((function(){return et(a,g+"return "+p).apply(e,l)}));v.source=p;if(yd(v)){throw v}return v}function hh(e){return Jd(e).toLowerCase()}function ph(e){return Jd(e).toUpperCase()}function fh(t,i,n){t=Jd(t);if(t&&(n||i===e)){return Wi(t)}if(!t||!(i=Oo(i))){return t}var r=hn(t),o=hn(i),s=Yi(r,o),a=qi(r,o)+1;return Uo(r,s,a).join("")}function gh(t,i,n){t=Jd(t);if(t&&(n||i===e)){return t.slice(0,pn(t)+1)}if(!t||!(i=Oo(i))){return t}var r=hn(t),o=qi(r,hn(i))+1;return Uo(r,0,o).join("")}function mh(t,i,n){t=Jd(t);if(t&&(n||i===e)){return t.replace(Ie,"")}if(!t||!(i=Oo(i))){return t}var r=hn(t),o=Yi(r,hn(i));return Uo(r,o).join("")}function vh(t,i){var n=A,r=x;if(Ad(i)){var o="separator"in i?i.separator:o;n="length"in i?qd(i.length):n;r="omission"in i?Oo(i.omission):r}t=Jd(t);var s=t.length;if(en(t)){var a=hn(t);s=a.length}if(n>=s){return t}var l=n-un(r);if(l<1){return r}var c=a?Uo(a,0,l).join(""):t.slice(0,l);if(o===e){return c+r}if(a){l+=c.length-l}if(Nd(o)){if(t.slice(l).search(o)){var d,u=c;if(!o.global){o=nt(o.source,Jd(ze.exec(o))+"g")}o.lastIndex=0;while(d=o.exec(u)){var h=d.index}c=c.slice(0,h===e?l:h)}}else if(t.indexOf(Oo(o),l)!=l){var p=c.lastIndexOf(o);if(p>-1){c=c.slice(0,p)}}return c+r}function bh(e){e=Jd(e);return e&&Se.test(e)?e.replace(Ce,fn):e}var yh=fs((function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}));var wh=ps("toUpperCase");function Ch(t,i,n){t=Jd(t);i=n?e:i;if(i===e){return tn(t)?vn(t):Mi(t)}return t.match(i)||[]}var _h=Co((function(t,i){try{return fi(t,e,i)}catch(e){return yd(e)?e:new Je(e)}}));var Sh=$s((function(e,t){mi(t,(function(t){t=Pa(t);fr(e,t,Rc(e[t],e))}));return e}));function Ah(e){var t=e==null?0:e.length,i=Vs();e=!t?[]:_i(e,(function(e){if(typeof e[1]!="function"){throw new ot(r)}return[i(e[0]),e[1]]}));return Co((function(i){var n=-1;while(++n<t){var r=e[n];if(fi(r[0],this,i)){return fi(r[1],this,i)}}}))}function xh(e){return br(vr(e,c))}function Eh(e){return function(){return e}}function Th(e,t){return e==null||e!==e?t:e}var Dh=bs();var Mh=bs(true);function kh(e){return e}function Ph(e){return to(typeof e=="function"?e:vr(e,c))}function Rh(e){return so(vr(e,c))}function Ih(e,t){return ao(e,vr(t,c))}var Oh=Co((function(e,t){return function(i){return Wr(i,e,t)}}));var Nh=Co((function(e,t){return function(i){return Wr(e,i,t)}}));function Lh(e,t,i){var n=_u(t),r=Ir(t,n);if(i==null&&!(Ad(t)&&(r.length||!n.length))){i=t;t=e;e=this;r=Ir(t,_u(t))}var o=!(Ad(i)&&"chain"in i)||!!i.chain,s=Cd(e);mi(r,(function(i){var n=t[i];e[i]=n;if(s){e.prototype[i]=function(){var t=this.__chain__;if(o||t){var i=e(this.__wrapped__),r=i.__actions__=rs(this.__actions__);r.push({func:n,args:arguments,thisArg:e});i.__chain__=t;return i}return n.apply(e,Si([this.value()],arguments))}}}));return e}function Fh(){if(ii._===this){ii._=mt}return this}function $h(){}function Gh(e){e=qd(e);return Co((function(t){return uo(t,e)}))}var Bh=_s(_i);var Hh=_s(bi);var zh=_s(Ei);function Wh(e){return la(e)?Li(Pa(e)):go(e)}function Vh(t){return function(i){return t==null?e:Or(t,i)}}var jh=xs();var Uh=xs(true);function Yh(){return[]}function qh(){return false}function Kh(){return{}}function Xh(){return""}function Zh(){return true}function Qh(e,t){e=qd(e);if(e<1||e>R){return[]}var i=N,n=Wt(e,N);t=Vs(t);e-=N;var r=Hi(n,t);while(++i<e){t(i)}return r}function Jh(e){if(ld(e)){return _i(e,Pa)}return Gd(e)?[e]:rs(ka(Jd(e)))}function ep(e){var t=++ht;return Jd(e)+t}var tp=Cs((function(e,t){return e+t}),0);var ip=Ds("ceil");var np=Cs((function(e,t){return e/t}),1);var rp=Ds("floor");function op(t){return t&&t.length?xr(t,kh,Fr):e}function sp(t,i){return t&&t.length?xr(t,Vs(i,2),Fr):e}function ap(e){return Ni(e,kh)}function lp(e,t){return Ni(e,Vs(t,2))}function cp(t){return t&&t.length?xr(t,kh,ro):e}function dp(t,i){return t&&t.length?xr(t,Vs(i,2),ro):e}var up=Cs((function(e,t){return e*t}),1);var hp=Ds("round");var pp=Cs((function(e,t){return e-t}),0);function fp(e){return e&&e.length?Bi(e,kh):0}function gp(e,t){return e&&e.length?Bi(e,Vs(t,2)):0}Sn.after=Mc;Sn.ary=kc;Sn.assign=eu;Sn.assignIn=tu;Sn.assignInWith=iu;Sn.assignWith=nu;Sn.at=ru;Sn.before=Pc;Sn.bind=Rc;Sn.bindAll=Sh;Sn.bindKey=Ic;Sn.castArray=Qc;Sn.chain=jl;Sn.chunk=Na;Sn.compact=La;Sn.concat=Fa;Sn.cond=Ah;Sn.conforms=xh;Sn.constant=Eh;Sn.countBy=ic;Sn.create=ou;Sn.curry=Oc;Sn.curryRight=Nc;Sn.debounce=Lc;Sn.defaults=su;Sn.defaultsDeep=au;Sn.defer=Fc;Sn.delay=$c;Sn.difference=$a;Sn.differenceBy=Ga;Sn.differenceWith=Ba;Sn.drop=Ha;Sn.dropRight=za;Sn.dropRightWhile=Wa;Sn.dropWhile=Va;Sn.fill=ja;Sn.filter=rc;Sn.flatMap=ac;Sn.flatMapDeep=lc;Sn.flatMapDepth=cc;Sn.flatten=qa;Sn.flattenDeep=Ka;Sn.flattenDepth=Xa;Sn.flip=Gc;Sn.flow=Dh;Sn.flowRight=Mh;Sn.fromPairs=Za;Sn.functions=fu;Sn.functionsIn=gu;Sn.groupBy=hc;Sn.initial=el;Sn.intersection=tl;Sn.intersectionBy=il;Sn.intersectionWith=nl;Sn.invert=yu;Sn.invertBy=wu;Sn.invokeMap=fc;Sn.iteratee=Ph;Sn.keyBy=gc;Sn.keys=_u;Sn.keysIn=Su;Sn.map=mc;Sn.mapKeys=Au;Sn.mapValues=xu;Sn.matches=Rh;Sn.matchesProperty=Ih;Sn.memoize=Bc;Sn.merge=Eu;Sn.mergeWith=Tu;Sn.method=Oh;Sn.methodOf=Nh;Sn.mixin=Lh;Sn.negate=Hc;Sn.nthArg=Gh;Sn.omit=Du;Sn.omitBy=Mu;Sn.once=zc;Sn.orderBy=vc;Sn.over=Bh;Sn.overArgs=Wc;Sn.overEvery=Hh;Sn.overSome=zh;Sn.partial=Vc;Sn.partialRight=jc;Sn.partition=bc;Sn.pick=ku;Sn.pickBy=Pu;Sn.property=Wh;Sn.propertyOf=Vh;Sn.pull=ll;Sn.pullAll=cl;Sn.pullAllBy=dl;Sn.pullAllWith=ul;Sn.pullAt=hl;Sn.range=jh;Sn.rangeRight=Uh;Sn.rearg=Uc;Sn.reject=Cc;Sn.remove=pl;Sn.rest=Yc;Sn.reverse=fl;Sn.sampleSize=Sc;Sn.set=Iu;Sn.setWith=Ou;Sn.shuffle=Ac;Sn.slice=gl;Sn.sortBy=Tc;Sn.sortedUniq=_l;Sn.sortedUniqBy=Sl;Sn.split=lh;Sn.spread=qc;Sn.tail=Al;Sn.take=xl;Sn.takeRight=El;Sn.takeRightWhile=Tl;Sn.takeWhile=Dl;Sn.tap=Ul;Sn.throttle=Kc;Sn.thru=Yl;Sn.toArray=Ud;Sn.toPairs=Nu;Sn.toPairsIn=Lu;Sn.toPath=Jh;Sn.toPlainObject=Zd;Sn.transform=Fu;Sn.unary=Xc;Sn.union=Ml;Sn.unionBy=kl;Sn.unionWith=Pl;Sn.uniq=Rl;Sn.uniqBy=Il;Sn.uniqWith=Ol;Sn.unset=$u;Sn.unzip=Nl;Sn.unzipWith=Ll;Sn.update=Gu;Sn.updateWith=Bu;Sn.values=Hu;Sn.valuesIn=zu;Sn.without=Fl;Sn.words=Ch;Sn.wrap=Zc;Sn.xor=$l;Sn.xorBy=Gl;Sn.xorWith=Bl;Sn.zip=Hl;Sn.zipObject=zl;Sn.zipObjectDeep=Wl;Sn.zipWith=Vl;Sn.entries=Nu;Sn.entriesIn=Lu;Sn.extend=tu;Sn.extendWith=iu;Lh(Sn,Sn);Sn.add=tp;Sn.attempt=_h;Sn.camelCase=Uu;Sn.capitalize=Yu;Sn.ceil=ip;Sn.clamp=Wu;Sn.clone=Jc;Sn.cloneDeep=td;Sn.cloneDeepWith=id;Sn.cloneWith=ed;Sn.conformsTo=nd;Sn.deburr=qu;Sn.defaultTo=Th;Sn.divide=np;Sn.endsWith=Ku;Sn.eq=rd;Sn.escape=Xu;Sn.escapeRegExp=Zu;Sn.every=nc;Sn.find=oc;Sn.findIndex=Ua;Sn.findKey=lu;Sn.findLast=sc;Sn.findLastIndex=Ya;Sn.findLastKey=cu;Sn.floor=rp;Sn.forEach=dc;Sn.forEachRight=uc;Sn.forIn=du;Sn.forInRight=uu;Sn.forOwn=hu;Sn.forOwnRight=pu;Sn.get=mu;Sn.gt=od;Sn.gte=sd;Sn.has=vu;Sn.hasIn=bu;Sn.head=Qa;Sn.identity=kh;Sn.includes=pc;Sn.indexOf=Ja;Sn.inRange=Vu;Sn.invoke=Cu;Sn.isArguments=ad;Sn.isArray=ld;Sn.isArrayBuffer=cd;Sn.isArrayLike=dd;Sn.isArrayLikeObject=ud;Sn.isBoolean=hd;Sn.isBuffer=pd;Sn.isDate=fd;Sn.isElement=gd;Sn.isEmpty=md;Sn.isEqual=vd;Sn.isEqualWith=bd;Sn.isError=yd;Sn.isFinite=wd;Sn.isFunction=Cd;Sn.isInteger=_d;Sn.isLength=Sd;Sn.isMap=Ed;Sn.isMatch=Td;Sn.isMatchWith=Dd;Sn.isNaN=Md;Sn.isNative=kd;Sn.isNil=Rd;Sn.isNull=Pd;Sn.isNumber=Id;Sn.isObject=Ad;Sn.isObjectLike=xd;Sn.isPlainObject=Od;Sn.isRegExp=Nd;Sn.isSafeInteger=Ld;Sn.isSet=Fd;Sn.isString=$d;Sn.isSymbol=Gd;Sn.isTypedArray=Bd;Sn.isUndefined=Hd;Sn.isWeakMap=zd;Sn.isWeakSet=Wd;Sn.join=rl;Sn.kebabCase=Qu;Sn.last=ol;Sn.lastIndexOf=sl;Sn.lowerCase=Ju;Sn.lowerFirst=eh;Sn.lt=Vd;Sn.lte=jd;Sn.max=op;Sn.maxBy=sp;Sn.mean=ap;Sn.meanBy=lp;Sn.min=cp;Sn.minBy=dp;Sn.stubArray=Yh;Sn.stubFalse=qh;Sn.stubObject=Kh;Sn.stubString=Xh;Sn.stubTrue=Zh;Sn.multiply=up;Sn.nth=al;Sn.noConflict=Fh;Sn.noop=$h;Sn.now=Dc;Sn.pad=th;Sn.padEnd=ih;Sn.padStart=nh;Sn.parseInt=rh;Sn.random=ju;Sn.reduce=yc;Sn.reduceRight=wc;Sn.repeat=oh;Sn.replace=sh;Sn.result=Ru;Sn.round=hp;Sn.runInContext=Oe;Sn.sample=_c;Sn.size=xc;Sn.snakeCase=ah;Sn.some=Ec;Sn.sortedIndex=ml;Sn.sortedIndexBy=vl;Sn.sortedIndexOf=bl;Sn.sortedLastIndex=yl;Sn.sortedLastIndexBy=wl;Sn.sortedLastIndexOf=Cl;Sn.startCase=ch;Sn.startsWith=dh;Sn.subtract=pp;Sn.sum=fp;Sn.sumBy=gp;Sn.template=uh;Sn.times=Qh;Sn.toFinite=Yd;Sn.toInteger=qd;Sn.toLength=Kd;Sn.toLower=hh;Sn.toNumber=Xd;Sn.toSafeInteger=Qd;Sn.toString=Jd;Sn.toUpper=ph;Sn.trim=fh;Sn.trimEnd=gh;Sn.trimStart=mh;Sn.truncate=vh;Sn.unescape=bh;Sn.uniqueId=ep;Sn.upperCase=yh;Sn.upperFirst=wh;Sn.each=dc;Sn.eachRight=uc;Sn.first=Qa;Lh(Sn,function(){var e={};Pr(Sn,(function(t,i){if(!ut.call(Sn.prototype,i)){e[i]=t}}));return e}(),{chain:false});Sn.VERSION=t;mi(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Sn[e].placeholder=Sn}));mi(["drop","take"],(function(t,i){Tn.prototype[t]=function(n){n=n===e?1:zt(qd(n),0);var r=this.__filtered__&&!i?new Tn(this):this.clone();if(r.__filtered__){r.__takeCount__=Wt(n,r.__takeCount__)}else{r.__views__.push({size:Wt(n,N),type:t+(r.__dir__<0?"Right":"")})}return r};Tn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}));mi(["filter","map","takeWhile"],(function(e,t){var i=t+1,n=i==D||i==k;Tn.prototype[e]=function(e){var t=this.clone();t.__iteratees__.push({iteratee:Vs(e,3),type:i});t.__filtered__=t.__filtered__||n;return t}}));mi(["head","last"],(function(e,t){var i="take"+(t?"Right":"");Tn.prototype[e]=function(){return this[i](1).value()[0]}}));mi(["initial","tail"],(function(e,t){var i="drop"+(t?"":"Right");Tn.prototype[e]=function(){return this.__filtered__?new Tn(this):this[i](1)}}));Tn.prototype.compact=function(){return this.filter(kh)};Tn.prototype.find=function(e){return this.filter(e).head()};Tn.prototype.findLast=function(e){return this.reverse().find(e)};Tn.prototype.invokeMap=Co((function(e,t){if(typeof e=="function"){return new Tn(this)}return this.map((function(i){return Wr(i,e,t)}))}));Tn.prototype.reject=function(e){return this.filter(Hc(Vs(e)))};Tn.prototype.slice=function(t,i){t=qd(t);var n=this;if(n.__filtered__&&(t>0||i<0)){return new Tn(n)}if(t<0){n=n.takeRight(-t)}else if(t){n=n.drop(t)}if(i!==e){i=qd(i);n=i<0?n.dropRight(-i):n.take(i-t)}return n};Tn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};Tn.prototype.toArray=function(){return this.take(N)};Pr(Tn.prototype,(function(t,i){var n=/^(?:filter|find|map|reject)|While$/.test(i),r=/^(?:head|last)$/.test(i),o=Sn[r?"take"+(i=="last"?"Right":""):i],s=r||/^find/.test(i);if(!o){return}Sn.prototype[i]=function(){var i=this.__wrapped__,a=r?[1]:arguments,l=i instanceof Tn,c=a[0],d=l||ld(i);var u=function(e){var t=o.apply(Sn,Si([e],a));return r&&h?t[0]:t};if(d&&n&&typeof c=="function"&&c.length!=1){l=d=false}var h=this.__chain__,p=!!this.__actions__.length,f=s&&!h,g=l&&!p;if(!s&&d){i=g?i:new Tn(this);var m=t.apply(i,a);m.__actions__.push({func:Yl,args:[u],thisArg:e});return new En(m,h)}if(f&&g){return t.apply(this,a)}m=this.thru(u);return f?r?m.value()[0]:m.value():m}}));mi(["pop","push","shift","sort","splice","unshift"],(function(e){var t=st[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Sn.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var r=this.value();return t.apply(ld(r)?r:[],e)}return this[i]((function(i){return t.apply(ld(i)?i:[],e)}))}}));Pr(Tn.prototype,(function(e,t){var i=Sn[t];if(i){var n=i.name+"";if(!ut.call(Di,n)){Di[n]=[]}Di[n].push({name:t,func:i})}}));Di[ys(e,g).name]=[{name:"wrapper",func:e}];Tn.prototype.clone=Dn;Tn.prototype.reverse=Mn;Tn.prototype.value=kn;Sn.prototype.at=ql;Sn.prototype.chain=Kl;Sn.prototype.commit=Xl;Sn.prototype.next=Zl;Sn.prototype.plant=Jl;Sn.prototype.reverse=ec;Sn.prototype.toJSON=Sn.prototype.valueOf=Sn.prototype.value=tc;Sn.prototype.first=Sn.prototype.head;if(Tt){Sn.prototype[Tt]=Ql}return Sn};var yn=bn();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){ii._=yn;define((function(){return yn}))}else if(ri){(ri.exports=yn)._=yn;ni._=yn}else{ii._=yn}}).call(this);(function(e){var t=Array.prototype.slice;var i={dict:null,load:function(t){if(this.dict!==null){e.extend(this.dict,t)}else{this.dict=t}},_:function(e){dict=this.dict;if(dict&&dict.hasOwnProperty(e)){e=dict[e]}args=t.call(arguments);args[0]=e;return this.printf.apply(this,args)},printf:function(i,n){if(arguments.length<2)return i;n=e.isArray(n)?n:t.call(arguments,1);return i.replace(/([^%]|^)%(?:(\d+)\$)?s/g,(function(e,t,i){if(i){return t+n[parseInt(i)-1]}return t+n.shift()})).replace(/%%s/g,"%s")}};e.fn._t=function(t,n){return e(this).html(i._.apply(i,arguments))};e.i18n=i})(jQuery);(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports=="object"&&typeof module=="object"){module.exports=e(require("jquery"))}else{e(jQuery)}})((function(e,t){"use strict";var i={beforeShow:p,move:p,change:p,show:p,hide:p,color:false,flat:false,showInput:false,allowEmpty:false,showButtons:true,clickoutFiresChange:true,showInitial:false,showPalette:false,showPaletteOnly:false,hideAfterPaletteSelect:false,togglePaletteOnly:false,showSelectionPalette:true,localStorageKey:false,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:false,className:"",containerClassName:"",replacerClassName:"",showAlpha:false,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:false,offset:null},n=[],r=!!/msie/i.exec(window.navigator.userAgent),o=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div");var i=t.style;i.cssText="background-color:rgba(0,0,0,.5)";return e(i.backgroundColor,"rgba")||e(i.backgroundColor,"hsla")}(),s=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),a=function(){var e="";if(r){for(var t=1;t<=6;t++){e+="<div class='sp-"+t+"'></div>"}}return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function l(t,i,n,r){var s=[];for(var a=0;a<t.length;a++){var l=t[a];if(l){var c=tinycolor(l);var d=c.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";d+=tinycolor.equals(i,l)?" sp-thumb-active":"";var u=c.toString(r.preferredFormat||"rgb");var h=o?"background-color:"+c.toRgbString():"filter:"+c.toFilter();s.push('<span title="'+u+'" data-color="'+c.toRgbString()+'" class="'+d+'"><span class="sp-thumb-inner" style="'+h+';"></span></span>')}else{var p="sp-clear-display";s.push(e("<div />").append(e('<span data-color="" style="background-color:transparent;" class="'+p+'"></span>').attr("title",r.noColorSelectedText)).html())}}return"<div class='sp-cf "+n+"'>"+s.join("")+"</div>"}function c(){for(var e=0;e<n.length;e++){if(n[e]){n[e].hide()}}}function d(t,n){var r=e.extend({},i,t);r.callbacks={move:g(r.move,n),change:g(r.change,n),show:g(r.show,n),hide:g(r.hide,n),beforeShow:g(r.beforeShow,n)};return r}function u(i,u){var p=d(u,i),g=p.flat,y=p.showSelectionPalette,w=p.localStorageKey,C=p.theme,_=p.callbacks,S=v(Ue,10),A=false,x=false,E=0,T=0,D=0,M=0,k=0,P=0,R=0,I=0,O=0,N=0,L=0,F=1,$=[],G=[],B={},H=p.selectionPalette.slice(0),z=p.maxSelectionSize,W="sp-dragging",V=null;var j=i.ownerDocument,U=j.body,Y=e(i),q=false,K=e(a,j).addClass(C),X=K.find(".sp-picker-container"),Z=K.find(".sp-color"),Q=K.find(".sp-dragger"),J=K.find(".sp-hue"),ee=K.find(".sp-slider"),te=K.find(".sp-alpha-inner"),ie=K.find(".sp-alpha"),ne=K.find(".sp-alpha-handle"),re=K.find(".sp-input"),oe=K.find(".sp-palette"),se=K.find(".sp-initial"),ae=K.find(".sp-cancel"),le=K.find(".sp-clear"),ce=K.find(".sp-choose"),de=K.find(".sp-palette-toggle"),ue=Y.is("input"),he=ue&&Y.attr("type")==="color"&&b(),pe=ue&&!g,fe=pe?e(s).addClass(C).addClass(p.className).addClass(p.replacerClassName):e([]),ge=pe?fe:Y,me=fe.find(".sp-preview-inner"),ve=p.color||ue&&Y.val(),be=false,ye=p.preferredFormat,we=!p.showButtons||p.clickoutFiresChange,Ce=!ve,_e=p.allowEmpty&&!he;function Se(){if(p.showPaletteOnly){p.showPalette=true}de.text(p.showPaletteOnly?p.togglePaletteMoreText:p.togglePaletteLessText);if(p.palette){$=p.palette.slice(0);G=e.isArray($[0])?$:[$];B={};for(var t=0;t<G.length;t++){for(var i=0;i<G[t].length;i++){var n=tinycolor(G[t][i]).toRgbString();B[n]=true}}}K.toggleClass("sp-flat",g);K.toggleClass("sp-input-disabled",!p.showInput);K.toggleClass("sp-alpha-enabled",p.showAlpha);K.toggleClass("sp-clear-enabled",_e);K.toggleClass("sp-buttons-disabled",!p.showButtons);K.toggleClass("sp-palette-buttons-disabled",!p.togglePaletteOnly);K.toggleClass("sp-palette-disabled",!p.showPalette);K.toggleClass("sp-palette-only",p.showPaletteOnly);K.toggleClass("sp-initial-disabled",!p.showInitial);K.addClass(p.className).addClass(p.containerClassName);Ue()}function Ae(){if(r){K.find("*:not(input)").attr("unselectable","on")}Se();if(pe){Y.after(fe).hide()}if(!_e){le.hide()}if(g){Y.after(K).hide()}else{var t=p.appendTo==="parent"?Y.parent():e(p.appendTo);if(t.length!==1){t=e("body")}t.append(K)}xe();ge.on("click.spectrum touchstart.spectrum",(function(t){if(!q){Ie()}t.stopPropagation();if(!e(t.target).is("input")){t.preventDefault()}}));if(Y.is(":disabled")||p.disabled===true){Xe()}K.click(f);re.change(Re);re.on("paste",(function(){setTimeout(Re,1)}));re.keydown((function(e){if(e.keyCode==13){Re()}}));ae.text(p.cancelText);ae.on("click.spectrum",(function(e){e.stopPropagation();e.preventDefault();$e();Fe()}));le.attr("title",p.clearText);le.on("click.spectrum",(function(e){e.stopPropagation();e.preventDefault();Ce=true;ze();if(g){je(true)}}));ce.text(p.chooseText);ce.on("click.spectrum",(function(e){e.stopPropagation();e.preventDefault();if(r&&re.is(":focus")){re.trigger("change")}if(He()){je(true);Fe()}}));de.text(p.showPaletteOnly?p.togglePaletteMoreText:p.togglePaletteLessText);de.on("click.spectrum",(function(e){e.stopPropagation();e.preventDefault();p.showPaletteOnly=!p.showPaletteOnly;if(!p.showPaletteOnly&&!g){K.css("left","-="+(X.outerWidth(true)+5))}Se()}));m(ie,(function(e,t,i){F=e/P;Ce=false;if(i.shiftKey){F=Math.round(F*10)/10}ze()}),ke,Pe);m(J,(function(e,t){O=parseFloat(t/M);Ce=false;if(!p.showAlpha){F=1}ze()}),ke,Pe);m(Z,(function(e,t,i){if(!i.shiftKey){V=null}else if(!V){var n=N*E;var r=T-L*T;var o=Math.abs(e-n)>Math.abs(t-r);V=o?"x":"y"}var s=!V||V==="x";var a=!V||V==="y";if(s){N=parseFloat(e/E)}if(a){L=parseFloat((T-t)/T)}Ce=false;if(!p.showAlpha){F=1}ze()}),ke,Pe);if(!!ve){Ge(ve);We();ye=p.preferredFormat||tinycolor(ve).format;Ee(ve)}else{We()}if(g){Oe()}function i(t){if(t.data&&t.data.ignore){Ge(e(t.target).closest(".sp-thumb-el").data("color"));ze()}else{Ge(e(t.target).closest(".sp-thumb-el").data("color"));ze();if(p.hideAfterPaletteSelect){je(true);Fe()}else{je()}}return false}var n=r?"mousedown.spectrum":"click.spectrum touchstart.spectrum";oe.on(n,".sp-thumb-el",i);se.on(n,".sp-thumb-el:nth-child(1)",{ignore:true},i)}function xe(){if(w&&window.localStorage){try{var t=window.localStorage[w].split(",#");if(t.length>1){delete window.localStorage[w];e.each(t,(function(e,t){Ee(t)}))}}catch(e){}try{H=window.localStorage[w].split(";")}catch(e){}}}function Ee(t){if(y){var i=tinycolor(t).toRgbString();if(!B[i]&&e.inArray(i,H)===-1){H.push(i);while(H.length>z){H.shift()}}if(w&&window.localStorage){try{window.localStorage[w]=H.join(";")}catch(e){}}}}function Te(){var e=[];if(p.showPalette){for(var t=0;t<H.length;t++){var i=tinycolor(H[t]).toRgbString();if(!B[i]){e.push(H[t])}}}return e.reverse().slice(0,p.maxSelectionSize)}function De(){var t=Be();var i=e.map(G,(function(e,i){return l(e,t,"sp-palette-row sp-palette-row-"+i,p)}));xe();if(H){i.push(l(Te(),t,"sp-palette-row sp-palette-row-selection",p))}oe.html(i.join(""))}function Me(){if(p.showInitial){var e=be;var t=Be();se.html(l([e,t],t,"sp-palette-row-initial",p))}}function ke(){if(T<=0||E<=0||M<=0){Ue()}x=true;K.addClass(W);V=null;Y.trigger("dragstart.spectrum",[Be()])}function Pe(){x=false;K.removeClass(W);Y.trigger("dragstop.spectrum",[Be()])}function Re(){var e=re.val();if((e===null||e==="")&&_e){Ge(null);ze();je()}else{var t=tinycolor(e);if(t.isValid()){Ge(t);ze();je()}else{re.addClass("sp-validation-error")}}}function Ie(){if(A){Fe()}else{Oe()}}function Oe(){var t=e.Event("beforeShow.spectrum");if(A){Ue();return}Y.trigger(t,[Be()]);if(_.beforeShow(Be())===false||t.isDefaultPrevented()){return}c();A=true;e(j).on("keydown.spectrum",Ne);e(j).on("click.spectrum",Le);e(window).on("resize.spectrum",S);fe.addClass("sp-active");K.removeClass("sp-hidden");Ue();We();be=Be();Me();_.show(be);Y.trigger("show.spectrum",[be])}function Ne(e){if(e.keyCode===27){Fe()}}function Le(e){if(e.button==2){return}if(x){return}if(we){je(true)}else{$e()}Fe()}function Fe(){if(!A||g){return}A=false;e(j).off("keydown.spectrum",Ne);e(j).off("click.spectrum",Le);e(window).off("resize.spectrum",S);fe.removeClass("sp-active");K.addClass("sp-hidden");_.hide(Be());Y.trigger("hide.spectrum",[Be()])}function $e(){Ge(be,true);je(true)}function Ge(e,t){if(tinycolor.equals(e,Be())){We();return}var i,n;if(!e&&_e){Ce=true}else{Ce=false;i=tinycolor(e);n=i.toHsv();O=n.h%360/360;N=n.s;L=n.v;F=n.a}We();if(i&&i.isValid()&&!t){ye=p.preferredFormat||i.getFormat()}}function Be(e){e=e||{};if(_e&&Ce){return null}return tinycolor.fromRatio({h:O,s:N,v:L,a:Math.round(F*1e3)/1e3},{format:e.format||ye})}function He(){return!re.hasClass("sp-validation-error")}function ze(){We();_.move(Be());Y.trigger("move.spectrum",[Be()])}function We(){re.removeClass("sp-validation-error");Ve();var e=tinycolor.fromRatio({h:O,s:1,v:1});Z.css("background-color",e.toHexString());var t=ye;if(F<1&&!(F===0&&t==="name")){if(t==="hex"||t==="hex3"||t==="hex6"||t==="name"){t="rgb"}}var i=Be({format:t}),n="";me.removeClass("sp-clear-display");me.css("background-color","transparent");if(!i&&_e){me.addClass("sp-clear-display")}else{var s=i.toHexString(),a=i.toRgbString();if(o||i.alpha===1){me.css("background-color",a)}else{me.css("background-color","transparent");me.css("filter",i.toFilter())}if(p.showAlpha){var l=i.toRgb();l.a=0;var c=tinycolor(l).toRgbString();var d="linear-gradient(left, "+c+", "+s+")";if(r){te.css("filter",tinycolor(c).toFilter({gradientType:1},s))}else{te.css("background","-webkit-"+d);te.css("background","-moz-"+d);te.css("background","-ms-"+d);te.css("background","linear-gradient(to right, "+c+", "+s+")")}}n=i.toString(t)}if(p.showInput){re.val(n)}if(p.showPalette){De()}Me()}function Ve(){var e=N;var t=L;if(_e&&Ce){ne.hide();ee.hide();Q.hide()}else{ne.show();ee.show();Q.show();var i=e*E;var n=T-t*T;i=Math.max(-D,Math.min(E-D,i-D));n=Math.max(-D,Math.min(T-D,n-D));Q.css({top:n+"px",left:i+"px"});var r=F*P;ne.css({left:r-R/2+"px"});var o=O*M;ee.css({top:o-I+"px"})}}function je(e){var t=Be(),i="",n=!tinycolor.equals(t,be);if(t){i=t.toString(ye);Ee(t)}if(ue){Y.val(i)}if(e&&n){_.change(t);Y.trigger("change",[t])}}function Ue(){if(!A){return}E=Z.width();T=Z.height();D=Q.height();k=J.width();M=J.height();I=ee.height();P=ie.width();R=ne.width();if(!g){K.css("position","absolute");if(p.offset){K.offset(p.offset)}else{K.offset(h(K,ge))}}Ve();if(p.showPalette){De()}Y.trigger("reflow.spectrum")}function Ye(){Y.show();ge.off("click.spectrum touchstart.spectrum");K.remove();fe.remove();n[Qe.id]=null}function qe(i,n){if(i===t){return e.extend({},p)}if(n===t){return p[i]}p[i]=n;if(i==="preferredFormat"){ye=p.preferredFormat}Se()}function Ke(){q=false;Y.attr("disabled",false);ge.removeClass("sp-disabled")}function Xe(){Fe();q=true;Y.attr("disabled",true);ge.addClass("sp-disabled")}function Ze(e){p.offset=e;Ue()}Ae();var Qe={show:Oe,hide:Fe,toggle:Ie,reflow:Ue,option:qe,enable:Ke,disable:Xe,offset:Ze,set:function(e){Ge(e);je()},get:Be,destroy:Ye,container:K};Qe.id=n.push(Qe)-1;return Qe}function h(t,i){var n=0;var r=t.outerWidth();var o=t.outerHeight();var s=i.outerHeight();var a=t[0].ownerDocument;var l=a.documentElement;var c=l.clientWidth+e(a).scrollLeft();var d=l.clientHeight+e(a).scrollTop();var u=i.offset();var h=u.left;var p=u.top;p+=s;h-=Math.min(h,h+r>c&&c>r?Math.abs(h+r-c):0);p-=Math.min(p,p+o>d&&d>o?Math.abs(o+s-n):n);return{top:p,bottom:u.bottom,left:h,right:u.right,width:u.width,height:u.height}}function p(){}function f(e){e.stopPropagation()}function g(e,t){var i=Array.prototype.slice;var n=i.call(arguments,2);return function(){return e.apply(t,n.concat(i.call(arguments)))}}function m(t,i,n,o){i=i||function(){};n=n||function(){};o=o||function(){};var s=document;var a=false;var l={};var c=0;var d=0;var u="ontouchstart"in window;var h={};h["selectstart"]=p;h["dragstart"]=p;h["touchmove mousemove"]=f;h["touchend mouseup"]=m;function p(e){if(e.stopPropagation){e.stopPropagation()}if(e.preventDefault){e.preventDefault()}e.returnValue=false}function f(e){if(a){if(r&&s.documentMode<9&&!e.button){return m()}var n=e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0];var o=n&&n.pageX||e.pageX;var h=n&&n.pageY||e.pageY;var f=Math.max(0,Math.min(o-l.left,d));var g=Math.max(0,Math.min(h-l.top,c));if(u){p(e)}i.apply(t,[f,g,e])}}function g(i){var r=i.which?i.which==3:i.button==2;if(!r&&!a){if(n.apply(t,arguments)!==false){a=true;c=e(t).height();d=e(t).width();l=e(t).offset();e(s).on(h);e(s.body).addClass("sp-dragging");f(i);p(i)}}}function m(){if(a){e(s).off(h);e(s.body).removeClass("sp-dragging");setTimeout((function(){o.apply(t,arguments)}),0)}a=false}e(t).on("touchstart mousedown",g)}function v(e,t,i){var n;return function(){var r=this,o=arguments;var s=function(){n=null;e.apply(r,o)};if(i)clearTimeout(n);if(i||!n)n=setTimeout(s,t)}}function b(){return e.fn.spectrum.inputTypeColorSupport()}var y="spectrum.id";e.fn.spectrum=function(t,i){if(typeof t=="string"){var r=this;var o=Array.prototype.slice.call(arguments,1);this.each((function(){var i=n[e(this).data(y)];if(i){var s=i[t];if(!s){throw new Error("Spectrum: no such method: '"+t+"'")}if(t=="get"){r=i.get()}else if(t=="container"){r=i.container}else if(t=="option"){r=i.option.apply(i,o)}else if(t=="destroy"){i.destroy();e(this).removeData(y)}else{s.apply(i,o)}}}));return r}return this.spectrum("destroy").each((function(){var i=e.extend({},e(this).data(),t);var n=u(this,i);e(this).data(y,n.id)}))};e.fn.spectrum.load=true;e.fn.spectrum.loadOpts={};e.fn.spectrum.draggable=m;e.fn.spectrum.defaults=i;e.fn.spectrum.inputTypeColorSupport=function t(){if(typeof t._cachedResult==="undefined"){var i=e("<input type='color'/>")[0];t._cachedResult=i.type==="color"&&i.value!==""}return t._cachedResult};e.spectrum={};e.spectrum.localization={};e.spectrum.palettes={};e.fn.spectrum.processNativeColorInputs=function(){var t=e("input[type=color]");if(t.length&&!b()){t.spectrum({preferredFormat:"hex6"})}};(function(){var e=/^[\s,#]+/,t=/\s+$/,i=0,n=Math,r=n.round,o=n.min,s=n.max,a=n.random;var l=function(e,t){e=e?e:"";t=t||{};if(e instanceof l){return e}if(!(this instanceof l)){return new l(e,t)}var n=c(e);this._originalInput=e;this._r=n.r;this._g=n.g;this._b=n.b;this._a=n.a;this._roundA=r(1e3*this._a)/1e3;this._format=t.format||n.format;this._gradientType=t.gradientType;if(this._r<1){this._r=r(this._r)}if(this._g<1){this._g=r(this._g)}if(this._b<1){this._b=r(this._b)}this._ok=n.ok;this._tc_id=i++};l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},setAlpha:function(e){this._a=I(e);this._roundA=r(1e3*this._a)/1e3;return this},toHsv:function(){var e=p(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=p(this._r,this._g,this._b);var t=r(e.h*360),i=r(e.s*100),n=r(e.v*100);return this._a==1?"hsv("+t+", "+i+"%, "+n+"%)":"hsva("+t+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=u(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=u(this._r,this._g,this._b);var t=r(e.h*360),i=r(e.s*100),n=r(e.l*100);return this._a==1?"hsl("+t+", "+i+"%, "+n+"%)":"hsla("+t+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return g(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return m(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:r(this._r),g:r(this._g),b:r(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+r(this._r)+", "+r(this._g)+", "+r(this._b)+")":"rgba("+r(this._r)+", "+r(this._g)+", "+r(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:r(O(this._r,255)*100)+"%",g:r(O(this._g,255)*100)+"%",b:r(O(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+r(O(this._r,255)*100)+"%, "+r(O(this._g,255)*100)+"%, "+r(O(this._b,255)*100)+"%)":"rgba("+r(O(this._r,255)*100)+"%, "+r(O(this._g,255)*100)+"%, "+r(O(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){if(this._a===0){return"transparent"}if(this._a<1){return false}return P[g(this._r,this._g,this._b,true)]||false},toFilter:function(e){var t="#"+m(this._r,this._g,this._b,this._a);var i=t;var n=this._gradientType?"GradientType = 1, ":"";if(e){var r=l(e);i=r.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+i+")"},toString:function(e){var t=!!e;e=e||this._format;var i=false;var n=this._a<1&&this._a>=0;var r=!t&&n&&(e==="hex"||e==="hex6"||e==="hex3"||e==="name");if(r){if(e==="name"&&this._a===0){return this.toName()}return this.toRgbString()}if(e==="rgb"){i=this.toRgbString()}if(e==="prgb"){i=this.toPercentageRgbString()}if(e==="hex"||e==="hex6"){i=this.toHexString()}if(e==="hex3"){i=this.toHexString(true)}if(e==="hex8"){i=this.toHex8String()}if(e==="name"){i=this.toName()}if(e==="hsl"){i=this.toHslString()}if(e==="hsv"){i=this.toHsvString()}return i||this.toHexString()},_applyModification:function(e,t){var i=e.apply(null,[this].concat([].slice.call(t)));this._r=i._r;this._g=i._g;this._b=i._b;this.setAlpha(i._a);return this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(C,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(v,arguments)},saturate:function(){return this._applyModification(b,arguments)},greyscale:function(){return this._applyModification(y,arguments)},spin:function(){return this._applyModification(S,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(D,arguments)},complement:function(){return this._applyCombination(A,arguments)},monochromatic:function(){return this._applyCombination(M,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}};l.fromRatio=function(e,t){if(typeof e=="object"){var i={};for(var n in e){if(e.hasOwnProperty(n)){if(n==="a"){i[n]=e[n]}else{i[n]=B(e[n])}}}e=i}return l(e,t)};function c(e){var t={r:0,g:0,b:0};var i=1;var n=false;var r=false;if(typeof e=="string"){e=V(e)}if(typeof e=="object"){if(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")){t=d(e.r,e.g,e.b);n=true;r=String(e.r).substr(-1)==="%"?"prgb":"rgb"}else if(e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")){e.s=B(e.s);e.v=B(e.v);t=f(e.h,e.s,e.v);n=true;r="hsv"}else if(e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")){e.s=B(e.s);e.l=B(e.l);t=h(e.h,e.s,e.l);n=true;r="hsl"}if(e.hasOwnProperty("a")){i=e.a}}i=I(i);return{ok:n,format:e.format||r,r:o(255,s(t.r,0)),g:o(255,s(t.g,0)),b:o(255,s(t.b,0)),a:i}}function d(e,t,i){return{r:O(e,255)*255,g:O(t,255)*255,b:O(i,255)*255}}function u(e,t,i){e=O(e,255);t=O(t,255);i=O(i,255);var n=s(e,t,i),r=o(e,t,i);var a,l,c=(n+r)/2;if(n==r){a=l=0}else{var d=n-r;l=c>.5?d/(2-n-r):d/(n+r);switch(n){case e:a=(t-i)/d+(t<i?6:0);break;case t:a=(i-e)/d+2;break;case i:a=(e-t)/d+4;break}a/=6}return{h:a,s:l,l:c}}function h(e,t,i){var n,r,o;e=O(e,360);t=O(t,100);i=O(i,100);function s(e,t,i){if(i<0)i+=1;if(i>1)i-=1;if(i<1/6)return e+(t-e)*6*i;if(i<1/2)return t;if(i<2/3)return e+(t-e)*(2/3-i)*6;return e}if(t===0){n=r=o=i}else{var a=i<.5?i*(1+t):i+t-i*t;var l=2*i-a;n=s(l,a,e+1/3);r=s(l,a,e);o=s(l,a,e-1/3)}return{r:n*255,g:r*255,b:o*255}}function p(e,t,i){e=O(e,255);t=O(t,255);i=O(i,255);var n=s(e,t,i),r=o(e,t,i);var a,l,c=n;var d=n-r;l=n===0?0:d/n;if(n==r){a=0}else{switch(n){case e:a=(t-i)/d+(t<i?6:0);break;case t:a=(i-e)/d+2;break;case i:a=(e-t)/d+4;break}a/=6}return{h:a,s:l,v:c}}function f(e,t,i){e=O(e,360)*6;t=O(t,100);i=O(i,100);var r=n.floor(e),o=e-r,s=i*(1-t),a=i*(1-o*t),l=i*(1-(1-o)*t),c=r%6,d=[i,a,s,s,l,i][c],u=[l,i,i,a,s,s][c],h=[s,s,l,i,i,a][c];return{r:d*255,g:u*255,b:h*255}}function g(e,t,i,n){var o=[G(r(e).toString(16)),G(r(t).toString(16)),G(r(i).toString(16))];if(n&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)){return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)}return o.join("")}function m(e,t,i,n){var o=[G(H(n)),G(r(e).toString(16)),G(r(t).toString(16)),G(r(i).toString(16))];return o.join("")}l.equals=function(e,t){if(!e||!t){return false}return l(e).toRgbString()==l(t).toRgbString()};l.random=function(){return l.fromRatio({r:a(),g:a(),b:a()})};function v(e,t){t=t===0?0:t||10;var i=l(e).toHsl();i.s-=t/100;i.s=N(i.s);return l(i)}function b(e,t){t=t===0?0:t||10;var i=l(e).toHsl();i.s+=t/100;i.s=N(i.s);return l(i)}function y(e){return l(e).desaturate(100)}function w(e,t){t=t===0?0:t||10;var i=l(e).toHsl();i.l+=t/100;i.l=N(i.l);return l(i)}function C(e,t){t=t===0?0:t||10;var i=l(e).toRgb();i.r=s(0,o(255,i.r-r(255*-(t/100))));i.g=s(0,o(255,i.g-r(255*-(t/100))));i.b=s(0,o(255,i.b-r(255*-(t/100))));return l(i)}function _(e,t){t=t===0?0:t||10;var i=l(e).toHsl();i.l-=t/100;i.l=N(i.l);return l(i)}function S(e,t){var i=l(e).toHsl();var n=(r(i.h)+t)%360;i.h=n<0?360+n:n;return l(i)}function A(e){var t=l(e).toHsl();t.h=(t.h+180)%360;return l(t)}function x(e){var t=l(e).toHsl();var i=t.h;return[l(e),l({h:(i+120)%360,s:t.s,l:t.l}),l({h:(i+240)%360,s:t.s,l:t.l})]}function E(e){var t=l(e).toHsl();var i=t.h;return[l(e),l({h:(i+90)%360,s:t.s,l:t.l}),l({h:(i+180)%360,s:t.s,l:t.l}),l({h:(i+270)%360,s:t.s,l:t.l})]}function T(e){var t=l(e).toHsl();var i=t.h;return[l(e),l({h:(i+72)%360,s:t.s,l:t.l}),l({h:(i+216)%360,s:t.s,l:t.l})]}function D(e,t,i){t=t||6;i=i||30;var n=l(e).toHsl();var r=360/i;var o=[l(e)];for(n.h=(n.h-(r*t>>1)+720)%360;--t;){n.h=(n.h+r)%360;o.push(l(n))}return o}function M(e,t){t=t||6;var i=l(e).toHsv();var n=i.h,r=i.s,o=i.v;var s=[];var a=1/t;while(t--){s.push(l({h:n,s:r,v:o}));o=(o+a)%1}return s}l.mix=function(e,t,i){i=i===0?0:i||50;var n=l(e).toRgb();var r=l(t).toRgb();var o=i/100;var s=o*2-1;var a=r.a-n.a;var c;if(s*a==-1){c=s}else{c=(s+a)/(1+s*a)}c=(c+1)/2;var d=1-c;var u={r:r.r*c+n.r*d,g:r.g*c+n.g*d,b:r.b*c+n.b*d,a:r.a*o+n.a*(1-o)};return l(u)};l.readability=function(e,t){var i=l(e);var n=l(t);var r=i.toRgb();var o=n.toRgb();var s=i.getBrightness();var a=n.getBrightness();var c=Math.max(r.r,o.r)-Math.min(r.r,o.r)+Math.max(r.g,o.g)-Math.min(r.g,o.g)+Math.max(r.b,o.b)-Math.min(r.b,o.b);return{brightness:Math.abs(s-a),color:c}};l.isReadable=function(e,t){var i=l.readability(e,t);return i.brightness>125&&i.color>500};l.mostReadable=function(e,t){var i=null;var n=0;var r=false;for(var o=0;o<t.length;o++){var s=l.readability(e,t[o]);var a=s.brightness>125&&s.color>500;var c=3*(s.brightness/125)+s.color/500;if(a&&!r||a&&r&&c>n||!a&&!r&&c>n){r=a;n=c;i=l(t[o])}}return i};var k=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var P=l.hexNames=R(k);function R(e){var t={};for(var i in e){if(e.hasOwnProperty(i)){t[e[i]]=i}}return t}function I(e){e=parseFloat(e);if(isNaN(e)||e<0||e>1){e=1}return e}function O(e,t){if(F(e)){e="100%"}var i=$(e);e=o(t,s(0,parseFloat(e)));if(i){e=parseInt(e*t,10)/100}if(n.abs(e-t)<1e-6){return 1}return e%t/parseFloat(t)}function N(e){return o(1,s(0,e))}function L(e){return parseInt(e,16)}function F(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function $(e){return typeof e==="string"&&e.indexOf("%")!=-1}function G(e){return e.length==1?"0"+e:""+e}function B(e){if(e<=1){e=e*100+"%"}return e}function H(e){return Math.round(parseFloat(e)*255).toString(16)}function z(e){return L(e)/255}var W=function(){var e="[-\\+]?\\d+%?";var t="[-\\+]?\\d*\\.\\d+%?";var i="(?:"+t+")|(?:"+e+")";var n="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";var r="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+r),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function V(i){i=i.replace(e,"").replace(t,"").toLowerCase();var n=false;if(k[i]){i=k[i];n=true}else if(i=="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}var r;if(r=W.rgb.exec(i)){return{r:r[1],g:r[2],b:r[3]}}if(r=W.rgba.exec(i)){return{r:r[1],g:r[2],b:r[3],a:r[4]}}if(r=W.hsl.exec(i)){return{h:r[1],s:r[2],l:r[3]}}if(r=W.hsla.exec(i)){return{h:r[1],s:r[2],l:r[3],a:r[4]}}if(r=W.hsv.exec(i)){return{h:r[1],s:r[2],v:r[3]}}if(r=W.hsva.exec(i)){return{h:r[1],s:r[2],v:r[3],a:r[4]}}if(r=W.hex8.exec(i)){return{a:z(r[1]),r:L(r[2]),g:L(r[3]),b:L(r[4]),format:n?"name":"hex8"}}if(r=W.hex6.exec(i)){return{r:L(r[1]),g:L(r[2]),b:L(r[3]),format:n?"name":"hex"}}if(r=W.hex3.exec(i)){return{r:L(r[1]+""+r[1]),g:L(r[2]+""+r[2]),b:L(r[3]+""+r[3]),format:n?"name":"hex"}}return false}window.tinycolor=l})();e((function(){if(e.fn.spectrum.load){e.fn.spectrum.processNativeColorInputs()}}))}));(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof module==="object"&&module.exports){module.exports=function(t,i){if(i===undefined){if(typeof window!=="undefined"){i=require("jquery")}else{i=require("jquery")(t)}}e(i);return i}}else{e(jQuery)}})((function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd){var t=e.fn.select2.amd}var t;(function(){if(!t||!t.requirejs){if(!t){t={}}else{i=t}var e,i,n;(function(t){var r,o,s,a,l={},c={},d={},u={},h=Object.prototype.hasOwnProperty,p=[].slice,f=/\.js$/;function g(e,t){return h.call(e,t)}function m(e,t){var i,n,r,o,s,a,l,c,u,h,p,g,m=t&&t.split("/"),v=d.map,b=v&&v["*"]||{};if(e){e=e.split("/");s=e.length-1;if(d.nodeIdCompat&&f.test(e[s])){e[s]=e[s].replace(f,"")}if(e[0].charAt(0)==="."&&m){g=m.slice(0,m.length-1);e=g.concat(e)}for(u=0;u<e.length;u++){p=e[u];if(p==="."){e.splice(u,1);u-=1}else if(p===".."){if(u===0||u===1&&e[2]===".."||e[u-1]===".."){continue}else if(u>0){e.splice(u-1,2);u-=2}}}e=e.join("/")}if((m||b)&&v){i=e.split("/");for(u=i.length;u>0;u-=1){n=i.slice(0,u).join("/");if(m){for(h=m.length;h>0;h-=1){r=v[m.slice(0,h).join("/")];if(r){r=r[n];if(r){o=r;a=u;break}}}}if(o){break}if(!l&&b&&b[n]){l=b[n];c=u}}if(!o&&l){o=l;a=c}if(o){i.splice(0,a,o);e=i.join("/")}}return e}function v(e,i){return function(){var n=p.call(arguments,0);if(typeof n[0]!=="string"&&n.length===1){n.push(null)}return o.apply(t,n.concat([e,i]))}}function b(e){return function(t){return m(t,e)}}function y(e){return function(t){l[e]=t}}function w(e){if(g(c,e)){var i=c[e];delete c[e];u[e]=true;r.apply(t,i)}if(!g(l,e)&&!g(u,e)){throw new Error("No "+e)}return l[e]}function C(e){var t,i=e?e.indexOf("!"):-1;if(i>-1){t=e.substring(0,i);e=e.substring(i+1,e.length)}return[t,e]}function _(e){return e?C(e):[]}s=function(e,t){var i,n=C(e),r=n[0],o=t[1];e=n[1];if(r){r=m(r,o);i=w(r)}if(r){if(i&&i.normalize){e=i.normalize(e,b(o))}else{e=m(e,o)}}else{e=m(e,o);n=C(e);r=n[0];e=n[1];if(r){i=w(r)}}return{f:r?r+"!"+e:e,n:e,pr:r,p:i}};function S(e){return function(){return d&&d.config&&d.config[e]||{}}}a={require:function(e){return v(e)},exports:function(e){var t=l[e];if(typeof t!=="undefined"){return t}else{return l[e]={}}},module:function(e){return{id:e,uri:"",exports:l[e],config:S(e)}}};r=function(e,i,n,r){var o,d,h,p,f,m,b=[],C=typeof n,S;r=r||e;m=_(r);if(C==="undefined"||C==="function"){i=!i.length&&n.length?["require","exports","module"]:i;for(f=0;f<i.length;f+=1){p=s(i[f],m);d=p.f;if(d==="require"){b[f]=a.require(e)}else if(d==="exports"){b[f]=a.exports(e);S=true}else if(d==="module"){o=b[f]=a.module(e)}else if(g(l,d)||g(c,d)||g(u,d)){b[f]=w(d)}else if(p.p){p.p.load(p.n,v(r,true),y(d),{});b[f]=l[d]}else{throw new Error(e+" missing "+d)}}h=n?n.apply(l[e],b):undefined;if(e){if(o&&o.exports!==t&&o.exports!==l[e]){l[e]=o.exports}else if(h!==t||!S){l[e]=h}}}else if(e){l[e]=n}};e=i=o=function(e,i,n,l,c){if(typeof e==="string"){if(a[e]){return a[e](i)}return w(s(e,_(i)).f)}else if(!e.splice){d=e;if(d.deps){o(d.deps,d.callback)}if(!i){return}if(i.splice){e=i;i=n;n=null}else{e=t}}i=i||function(){};if(typeof n==="function"){n=l;l=c}if(l){r(t,e,i,n)}else{setTimeout((function(){r(t,e,i,n)}),4)}return o};o.config=function(e){return o(e)};e._defined=l;n=function(e,t,i){if(typeof e!=="string"){throw new Error("See almond README: incorrect module build, no module name")}if(!t.splice){i=t;t=[]}if(!g(l,e)&&!g(c,e)){c[e]=[e,t,i]}};n.amd={jQuery:true}})();t.requirejs=e;t.require=i;t.define=n}})();t.define("almond",(function(){}));t.define("jquery",[],(function(){var t=e||$;if(t==null&&console&&console.error){console.error("Select2: An instance of jQuery or a jQuery-compatible library was not "+"found. Make sure that you are including jQuery before Select2 on your "+"web page.")}return t}));t.define("select2/utils",["jquery"],(function(e){var t={};t.Extend=function(e,t){var i={}.hasOwnProperty;function n(){this.constructor=e}for(var r in t){if(i.call(t,r)){e[r]=t[r]}}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e};function i(e){var t=e.prototype;var i=[];for(var n in t){var r=t[n];if(typeof r!=="function"){continue}if(n==="constructor"){continue}i.push(n)}return i}t.Decorate=function(e,t){var n=i(t);var r=i(e);function o(){var i=Array.prototype.unshift;var n=t.prototype.constructor.length;var r=e.prototype.constructor;if(n>0){i.call(arguments,e.prototype.constructor);r=t.prototype.constructor}r.apply(this,arguments)}t.displayName=e.displayName;function s(){this.constructor=o}o.prototype=new s;for(var a=0;a<r.length;a++){var l=r[a];o.prototype[l]=e.prototype[l]}var c=function(e){var i=function(){};if(e in o.prototype){i=o.prototype[e]}var n=t.prototype[e];return function(){var e=Array.prototype.unshift;e.call(arguments,i);return n.apply(this,arguments)}};for(var d=0;d<n.length;d++){var u=n[d];o.prototype[u]=c(u)}return o};var n=function(){this.listeners={}};n.prototype.on=function(e,t){this.listeners=this.listeners||{};if(e in this.listeners){this.listeners[e].push(t)}else{this.listeners[e]=[t]}};n.prototype.trigger=function(e){var t=Array.prototype.slice;var i=t.call(arguments,1);this.listeners=this.listeners||{};if(i==null){i=[]}if(i.length===0){i.push({})}i[0]._type=e;if(e in this.listeners){this.invoke(this.listeners[e],t.call(arguments,1))}if("*"in this.listeners){this.invoke(this.listeners["*"],arguments)}};n.prototype.invoke=function(e,t){for(var i=0,n=e.length;i<n;i++){e[i].apply(this,t)}};t.Observable=n;t.generateChars=function(e){var t="";for(var i=0;i<e;i++){var n=Math.floor(Math.random()*36);t+=n.toString(36)}return t};t.bind=function(e,t){return function(){e.apply(t,arguments)}};t._convertData=function(e){for(var t in e){var i=t.split("-");var n=e;if(i.length===1){continue}for(var r=0;r<i.length;r++){var o=i[r];o=o.substring(0,1).toLowerCase()+o.substring(1);if(!(o in n)){n[o]={}}if(r==i.length-1){n[o]=e[t]}n=n[o]}delete e[t]}return e};t.hasScroll=function(t,i){var n=e(i);var r=i.style.overflowX;var o=i.style.overflowY;if(r===o&&(o==="hidden"||o==="visible")){return false}if(r==="scroll"||o==="scroll"){return true}return n.innerHeight()<i.scrollHeight||n.innerWidth()<i.scrollWidth};t.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};if(typeof e!=="string"){return e}return String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))};t.__cache={};var r=0;t.GetUniqueElementId=function(e){var i=e.getAttribute("data-select2-id");if(i!=null){return i}if(e.id){i="select2-data-"+e.id}else{i="select2-data-"+(++r).toString()+"-"+t.generateChars(4)}e.setAttribute("data-select2-id",i);return i};t.StoreData=function(e,i,n){var r=t.GetUniqueElementId(e);if(!t.__cache[r]){t.__cache[r]={}}t.__cache[r][i]=n};t.GetData=function(i,n){var r=t.GetUniqueElementId(i);if(n){if(t.__cache[r]){if(t.__cache[r][n]!=null){return t.__cache[r][n]}return e(i).data(n)}return e(i).data(n)}else{return t.__cache[r]}};t.RemoveData=function(e){var i=t.GetUniqueElementId(e);if(t.__cache[i]!=null){delete t.__cache[i]}e.removeAttribute("data-select2-id")};t.copyNonInternalCssClasses=function(e,t){var i;var n=e.getAttribute("class").trim().split(/\s+/);n=n.filter((function(e){return e.indexOf("select2-")===0}));var r=t.getAttribute("class").trim().split(/\s+/);r=r.filter((function(e){return e.indexOf("select2-")!==0}));var o=n.concat(r);e.setAttribute("class",o.join(" "))};return t}));t.define("select2/results",["jquery","./utils"],(function(e,t){function i(e,t,n){this.$element=e;this.data=n;this.options=t;i.__super__.constructor.call(this)}t.Extend(i,t.Observable);i.prototype.render=function(){var t=e('<ul class="select2-results__options" role="listbox"></ul>');if(this.options.get("multiple")){t.attr("aria-multiselectable","true")}this.$results=t;return t};i.prototype.clear=function(){this.$results.empty()};i.prototype.displayMessage=function(t){var i=this.options.get("escapeMarkup");this.clear();this.hideLoading();var n=e('<li role="alert" aria-live="assertive"'+' class="select2-results__option"></li>');var r=this.options.get("translations").get(t.message);n.append(i(r(t.args)));n[0].className+=" select2-results__message";this.$results.append(n)};i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()};i.prototype.append=function(e){this.hideLoading();var t=[];if(e.results==null||e.results.length===0){if(this.$results.children().length===0){this.trigger("results:message",{message:"noResults"})}return}e.results=this.sort(e.results);for(var i=0;i<e.results.length;i++){var n=e.results[i];var r=this.option(n);t.push(r)}this.$results.append(t)};i.prototype.position=function(e,t){var i=t.find(".select2-results");i.append(e)};i.prototype.sort=function(e){var t=this.options.get("sorter");return t(e)};i.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option--selectable");var t=e.filter(".select2-results__option--selected");if(t.length>0){t.first().trigger("mouseenter")}else{e.first().trigger("mouseenter")}this.ensureHighlightVisible()};i.prototype.setClasses=function(){var i=this;this.data.current((function(n){var r=n.map((function(e){return e.id.toString()}));var o=i.$results.find(".select2-results__option--selectable");o.each((function(){var i=e(this);var n=t.GetData(this,"data");var o=""+n.id;if(n.element!=null&&n.element.selected||n.element==null&&r.indexOf(o)>-1){this.classList.add("select2-results__option--selected");i.attr("aria-selected","true")}else{this.classList.remove("select2-results__option--selected");i.attr("aria-selected","false")}}))}))};i.prototype.showLoading=function(e){this.hideLoading();var t=this.options.get("translations").get("searching");var i={disabled:true,loading:true,text:t(e)};var n=this.option(i);n.className+=" loading-results";this.$results.prepend(n)};i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()};i.prototype.option=function(i){var n=document.createElement("li");n.classList.add("select2-results__option");n.classList.add("select2-results__option--selectable");var r={role:"option"};var o=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;if(i.element!=null&&o.call(i.element,":disabled")||i.element==null&&i.disabled){r["aria-disabled"]="true";n.classList.remove("select2-results__option--selectable");n.classList.add("select2-results__option--disabled")}if(i.id==null){n.classList.remove("select2-results__option--selectable")}if(i._resultId!=null){n.id=i._resultId}if(i.title){n.title=i.title}if(i.children){r.role="group";r["aria-label"]=i.text;n.classList.remove("select2-results__option--selectable");n.classList.add("select2-results__option--group")}for(var s in r){var a=r[s];n.setAttribute(s,a)}if(i.children){var l=e(n);var c=document.createElement("strong");c.className="select2-results__group";this.template(i,c);var d=[];for(var u=0;u<i.children.length;u++){var h=i.children[u];var p=this.option(h);d.push(p)}var f=e("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});f.append(d);l.append(c);l.append(f)}else{this.template(i,n)}t.StoreData(n,"data",i);return n};i.prototype.bind=function(i,n){var r=this;var o=i.id+"-results";this.$results.attr("id",o);i.on("results:all",(function(e){r.clear();r.append(e.data);if(i.isOpen()){r.setClasses();r.highlightFirstItem()}}));i.on("results:append",(function(e){r.append(e.data);if(i.isOpen()){r.setClasses()}}));i.on("query",(function(e){r.hideMessages();r.showLoading(e)}));i.on("select",(function(){if(!i.isOpen()){return}r.setClasses();if(r.options.get("scrollAfterSelect")){r.highlightFirstItem()}}));i.on("unselect",(function(){if(!i.isOpen()){return}r.setClasses();if(r.options.get("scrollAfterSelect")){r.highlightFirstItem()}}));i.on("open",(function(){r.$results.attr("aria-expanded","true");r.$results.attr("aria-hidden","false");r.setClasses();r.ensureHighlightVisible()}));i.on("close",(function(){r.$results.attr("aria-expanded","false");r.$results.attr("aria-hidden","true");r.$results.removeAttr("aria-activedescendant")}));i.on("results:toggle",(function(){var e=r.getHighlightedResults();if(e.length===0){return}e.trigger("mouseup")}));i.on("results:select",(function(){var e=r.getHighlightedResults();if(e.length===0){return}var i=t.GetData(e[0],"data");if(e.hasClass("select2-results__option--selected")){r.trigger("close",{})}else{r.trigger("select",{data:i})}}));i.on("results:previous",(function(){var e=r.getHighlightedResults();var t=r.$results.find(".select2-results__option--selectable");var i=t.index(e);if(i<=0){return}var n=i-1;if(e.length===0){n=0}var o=t.eq(n);o.trigger("mouseenter");var s=r.$results.offset().top;var a=o.offset().top;var l=r.$results.scrollTop()+(a-s);if(n===0){r.$results.scrollTop(0)}else if(a-s<0){r.$results.scrollTop(l)}}));i.on("results:next",(function(){var e=r.getHighlightedResults();var t=r.$results.find(".select2-results__option--selectable");var i=t.index(e);var n=i+1;if(n>=t.length){return}var o=t.eq(n);o.trigger("mouseenter");var s=r.$results.offset().top+r.$results.outerHeight(false);var a=o.offset().top+o.outerHeight(false);var l=r.$results.scrollTop()+a-s;if(n===0){r.$results.scrollTop(0)}else if(a>s){r.$results.scrollTop(l)}}));i.on("results:focus",(function(e){e.element[0].classList.add("select2-results__option--highlighted");e.element[0].setAttribute("aria-selected","true")}));i.on("results:message",(function(e){r.displayMessage(e)}));if(e.fn.mousewheel){this.$results.on("mousewheel",(function(e){var t=r.$results.scrollTop();var i=r.$results.get(0).scrollHeight-t+e.deltaY;var n=e.deltaY>0&&t-e.deltaY<=0;var o=e.deltaY<0&&i<=r.$results.height();if(n){r.$results.scrollTop(0);e.preventDefault();e.stopPropagation()}else if(o){r.$results.scrollTop(r.$results.get(0).scrollHeight-r.$results.height());e.preventDefault();e.stopPropagation()}}))}this.$results.on("mouseup",".select2-results__option--selectable",(function(i){var n=e(this);var o=t.GetData(this,"data");if(n.hasClass("select2-results__option--selected")){if(r.options.get("multiple")){r.trigger("unselect",{originalEvent:i,data:o})}else{r.trigger("close",{})}return}r.trigger("select",{originalEvent:i,data:o})}));this.$results.on("mouseenter",".select2-results__option--selectable",(function(i){var n=t.GetData(this,"data");r.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false");r.trigger("results:focus",{data:n,element:e(this)})}))};i.prototype.getHighlightedResults=function(){var e=this.$results.find(".select2-results__option--highlighted");return e};i.prototype.destroy=function(){this.$results.remove()};i.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(e.length===0){return}var t=this.$results.find(".select2-results__option--selectable");var i=t.index(e);var n=this.$results.offset().top;var r=e.offset().top;var o=this.$results.scrollTop()+(r-n);var s=r-n;o-=e.outerHeight(false)*2;if(i<=2){this.$results.scrollTop(0)}else if(s>this.$results.outerHeight()||s<0){this.$results.scrollTop(o)}};i.prototype.template=function(t,i){var n=this.options.get("templateResult");var r=this.options.get("escapeMarkup");var o=n(t,i);if(o==null){i.style.display="none"}else if(typeof o==="string"){i.innerHTML=r(o)}else{e(i).append(o)}};return i}));t.define("select2/keys",[],(function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return e}));t.define("select2/selection/base",["jquery","../utils","../keys"],(function(e,t,i){function n(e,t){this.$element=e;this.options=t;n.__super__.constructor.call(this)}t.Extend(n,t.Observable);n.prototype.render=function(){var i=e('<span class="select2-selection" role="combobox" '+' aria-haspopup="true" aria-expanded="false">'+"</span>");this._tabindex=0;if(t.GetData(this.$element[0],"old-tabindex")!=null){this._tabindex=t.GetData(this.$element[0],"old-tabindex")}else if(this.$element.attr("tabindex")!=null){this._tabindex=this.$element.attr("tabindex")}i.attr("title",this.$element.attr("title"));i.attr("tabindex",this._tabindex);i.attr("aria-disabled","false");this.$selection=i;return i};n.prototype.bind=function(e,t){var n=this;var r=e.id+"-results";this.container=e;this.$selection.on("focus",(function(e){n.trigger("focus",e)}));this.$selection.on("blur",(function(e){n._handleBlur(e)}));this.$selection.on("keydown",(function(e){n.trigger("keypress",e);if(e.which===i.SPACE){e.preventDefault()}}));e.on("results:focus",(function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)}));e.on("selection:update",(function(e){n.update(e.data)}));e.on("open",(function(){n.$selection.attr("aria-expanded","true");n.$selection.attr("aria-owns",r);n._attachCloseHandler(e)}));e.on("close",(function(){n.$selection.attr("aria-expanded","false");n.$selection.removeAttr("aria-activedescendant");n.$selection.removeAttr("aria-owns");n.$selection.trigger("focus");n._detachCloseHandler(e)}));e.on("enable",(function(){n.$selection.attr("tabindex",n._tabindex);n.$selection.attr("aria-disabled","false")}));e.on("disable",(function(){n.$selection.attr("tabindex","-1");n.$selection.attr("aria-disabled","true")}))};n.prototype._handleBlur=function(t){var i=this;window.setTimeout((function(){if(document.activeElement==i.$selection[0]||e.contains(i.$selection[0],document.activeElement)){return}i.trigger("blur",t)}),1)};n.prototype._attachCloseHandler=function(i){e(document.body).on("mousedown.select2."+i.id,(function(i){var n=e(i.target);var r=n.closest(".select2");var o=e(".select2.select2-container--open");o.each((function(){if(this==r[0]){return}var e=t.GetData(this,"element");e.select2("close")}))}))};n.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)};n.prototype.position=function(e,t){var i=t.find(".selection");i.append(e)};n.prototype.destroy=function(){this._detachCloseHandler(this.container)};n.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")};n.prototype.isEnabled=function(){return!this.isDisabled()};n.prototype.isDisabled=function(){return this.options.get("disabled")};return n}));t.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(e,t,i,n){function r(){r.__super__.constructor.apply(this,arguments)}i.Extend(r,t);r.prototype.render=function(){var e=r.__super__.render.call(this);e[0].classList.add("select2-selection--single");e.html('<span class="select2-selection__rendered"></span>'+'<span class="select2-selection__arrow" role="presentation">'+'<b role="presentation"></b>'+"</span>");return e};r.prototype.bind=function(e,t){var i=this;r.__super__.bind.apply(this,arguments);var n=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n).attr("role","textbox").attr("aria-readonly","true");this.$selection.attr("aria-labelledby",n);this.$selection.attr("aria-controls",n);this.$selection.on("mousedown",(function(e){if(e.which!==1){return}i.trigger("toggle",{originalEvent:e})}));this.$selection.on("focus",(function(e){}));this.$selection.on("blur",(function(e){}));e.on("focus",(function(t){if(!e.isOpen()){i.$selection.trigger("focus")}}))};r.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty();e.removeAttr("title")};r.prototype.display=function(e,t){var i=this.options.get("templateSelection");var n=this.options.get("escapeMarkup");return n(i(e,t))};r.prototype.selectionContainer=function(){return e("<span></span>")};r.prototype.update=function(e){if(e.length===0){this.clear();return}var t=e[0];var i=this.$selection.find(".select2-selection__rendered");var n=this.display(t,i);i.empty().append(n);var r=t.title||t.text;if(r){i.attr("title",r)}else{i.removeAttr("title")}};return r}));t.define("select2/selection/multiple",["jquery","./base","../utils"],(function(e,t,i){function n(e,t){n.__super__.constructor.apply(this,arguments)}i.Extend(n,t);n.prototype.render=function(){var e=n.__super__.render.call(this);e[0].classList.add("select2-selection--multiple");e.html('<ul class="select2-selection__rendered"></ul>');return e};n.prototype.bind=function(t,r){var o=this;n.__super__.bind.apply(this,arguments);var s=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",s);this.$selection.on("click",(function(e){o.trigger("toggle",{originalEvent:e})}));this.$selection.on("click",".select2-selection__choice__remove",(function(t){if(o.isDisabled()){return}var n=e(this);var r=n.parent();var s=i.GetData(r[0],"data");o.trigger("unselect",{originalEvent:t,data:s})}));this.$selection.on("keydown",".select2-selection__choice__remove",(function(e){if(o.isDisabled()){return}e.stopPropagation()}))};n.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty();e.removeAttr("title")};n.prototype.display=function(e,t){var i=this.options.get("templateSelection");var n=this.options.get("escapeMarkup");return n(i(e,t))};n.prototype.selectionContainer=function(){var t=e('<li class="select2-selection__choice">'+'<button type="button" class="select2-selection__choice__remove" '+'tabindex="-1">'+'<span aria-hidden="true">&times;</span>'+"</button>"+'<span class="select2-selection__choice__display"></span>'+"</li>");return t};n.prototype.update=function(e){this.clear();if(e.length===0){return}var t=[];var n=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-";for(var r=0;r<e.length;r++){var o=e[r];var s=this.selectionContainer();var a=this.display(o,s);var l=n+i.generateChars(4)+"-";if(o.id){l+=o.id}else{l+=i.generateChars(4)}s.find(".select2-selection__choice__display").append(a).attr("id",l);var c=o.title||o.text;if(c){s.attr("title",c)}var d=this.options.get("translations").get("removeItem");var u=s.find(".select2-selection__choice__remove");u.attr("title",d());u.attr("aria-label",d());u.attr("aria-describedby",l);i.StoreData(s[0],"data",o);t.push(s)}var h=this.$selection.find(".select2-selection__rendered");h.append(t)};return n}));t.define("select2/selection/placeholder",[],(function(){function e(e,t,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));e.call(this,t,i)}e.prototype.normalizePlaceholder=function(e,t){if(typeof t==="string"){t={id:"",text:t}}return t};e.prototype.createPlaceholder=function(e,t){var i=this.selectionContainer();i.html(this.display(t));i[0].classList.add("select2-selection__placeholder");i[0].classList.remove("select2-selection__choice");var n=t.title||t.text||i.text();this.$selection.find(".select2-selection__rendered").attr("title",n);return i};e.prototype.update=function(e,t){var i=t.length==1&&t[0].id!=this.placeholder.id;var n=t.length>1;if(n||i){return e.call(this,t)}this.clear();var r=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(r)};return e}));t.define("select2/selection/allowClear",["jquery","../keys","../utils"],(function(e,t,i){function n(){}n.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i);if(this.placeholder==null){if(this.options.get("debug")&&window.console&&console.error){console.error("Select2: The `allowClear` option should be used in combination "+"with the `placeholder` option.")}}this.$selection.on("mousedown",".select2-selection__clear",(function(e){n._handleClear(e)}));t.on("keypress",(function(e){n._handleKeyboardClear(e,t)}))};n.prototype._handleClear=function(e,t){if(this.isDisabled()){return}var n=this.$selection.find(".select2-selection__clear");if(n.length===0){return}t.stopPropagation();var r=i.GetData(n[0],"data");var o=this.$element.val();this.$element.val(this.placeholder.id);var s={data:r};this.trigger("clear",s);if(s.prevented){this.$element.val(o);return}for(var a=0;a<r.length;a++){s={data:r[a]};this.trigger("unselect",s);if(s.prevented){this.$element.val(o);return}}this.$element.trigger("input").trigger("change");this.trigger("toggle",{})};n.prototype._handleKeyboardClear=function(e,i,n){if(n.isOpen()){return}if(i.which==t.DELETE||i.which==t.BACKSPACE){this._handleClear(i)}};n.prototype.update=function(t,n){t.call(this,n);this.$selection.find(".select2-selection__clear").remove();this.$selection[0].classList.remove("select2-selection--clearable");if(this.$selection.find(".select2-selection__placeholder").length>0||n.length===0){return}var r=this.$selection.find(".select2-selection__rendered").attr("id");var o=this.options.get("translations").get("removeAllItems");var s=e('<button type="button" class="select2-selection__clear" tabindex="-1">'+'<span aria-hidden="true">&times;</span>'+"</button>");s.attr("title",o());s.attr("aria-label",o());s.attr("aria-describedby",r);i.StoreData(s[0],"data",n);this.$selection.prepend(s);this.$selection[0].classList.add("select2-selection--clearable")};return n}));t.define("select2/selection/search",["jquery","../utils","../keys"],(function(e,t,i){function n(e,t,i){e.call(this,t,i)}n.prototype.render=function(t){var i=this.options.get("translations").get("search");var n=e('<span class="select2-search select2-search--inline">'+'<textarea class="select2-search__field"'+' type="search" tabindex="-1"'+' autocorrect="off" autocapitalize="none"'+' spellcheck="false" role="searchbox" aria-autocomplete="list" >'+"</textarea>"+"</span>");this.$searchContainer=n;this.$search=n.find("textarea");this.$search.prop("autocomplete",this.options.get("autocomplete"));this.$search.attr("aria-label",i());var r=t.call(this);this._transferTabIndex();r.append(this.$searchContainer);return r};n.prototype.bind=function(e,n,r){var o=this;var s=n.id+"-results";var a=n.id+"-container";e.call(this,n,r);o.$search.attr("aria-describedby",a);n.on("open",(function(){o.$search.attr("aria-controls",s);o.$search.trigger("focus")}));n.on("close",(function(){o.$search.val("");o.resizeSearch();o.$search.removeAttr("aria-controls");o.$search.removeAttr("aria-activedescendant");o.$search.trigger("focus")}));n.on("enable",(function(){o.$search.prop("disabled",false);o._transferTabIndex()}));n.on("disable",(function(){o.$search.prop("disabled",true)}));n.on("focus",(function(e){o.$search.trigger("focus")}));n.on("results:focus",(function(e){if(e.data._resultId){o.$search.attr("aria-activedescendant",e.data._resultId)}else{o.$search.removeAttr("aria-activedescendant")}}));this.$selection.on("focusin",".select2-search--inline",(function(e){o.trigger("focus",e)}));this.$selection.on("focusout",".select2-search--inline",(function(e){o._handleBlur(e)}));this.$selection.on("keydown",".select2-search--inline",(function(e){e.stopPropagation();o.trigger("keypress",e);o._keyUpPrevented=e.isDefaultPrevented();var n=e.which;if(n===i.BACKSPACE&&o.$search.val()===""){var r=o.$selection.find(".select2-selection__choice").last();if(r.length>0){var s=t.GetData(r[0],"data");o.searchRemoveChoice(s);e.preventDefault()}}}));this.$selection.on("click",".select2-search--inline",(function(e){if(o.$search.val()){e.stopPropagation()}}));var l=document.documentMode;var c=l&&l<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(e){if(c){o.$selection.off("input.search input.searchcheck");return}o.$selection.off("keyup.search")}));this.$selection.on("keyup.search input.search",".select2-search--inline",(function(e){if(c&&e.type==="input"){o.$selection.off("input.search input.searchcheck");return}var t=e.which;if(t==i.SHIFT||t==i.CTRL||t==i.ALT){return}if(t==i.TAB){return}o.handleSearch(e)}))};n.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")};n.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)};n.prototype.update=function(e,t){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");e.call(this,t);this.resizeSearch();if(i){this.$search.trigger("focus")}};n.prototype.handleSearch=function(){this.resizeSearch();if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=false};n.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t});this.$search.val(t.text);this.handleSearch()};n.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="100%";if(this.$search.attr("placeholder")===""){var t=this.$search.val().length+1;e=t*.75+"em"}this.$search.css("width",e)};return n}));t.define("select2/selection/selectionCss",["../utils"],(function(e){function t(){}t.prototype.render=function(t){var i=t.call(this);var n=this.options.get("selectionCssClass")||"";if(n.indexOf(":all:")!==-1){n=n.replace(":all:","");e.copyNonInternalCssClasses(i[0],this.$element[0])}i.addClass(n);return i};return t}));t.define("select2/selection/eventRelay",["jquery"],(function(e){function t(){}t.prototype.bind=function(t,i,n){var r=this;var o=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"];var s=["opening","closing","selecting","unselecting","clearing"];t.call(this,i,n);i.on("*",(function(t,i){if(o.indexOf(t)===-1){return}i=i||{};var n=e.Event("select2:"+t,{params:i});r.$element.trigger(n);if(s.indexOf(t)===-1){return}i.prevented=n.isDefaultPrevented()}))};return t}));t.define("select2/translation",["jquery","require"],(function(e,t){function i(e){this.dict=e||{}}i.prototype.all=function(){return this.dict};i.prototype.get=function(e){return this.dict[e]};i.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)};i._cache={};i.loadPath=function(e){if(!(e in i._cache)){var n=t(e);i._cache[e]=n}return new i(i._cache[e])};return i}));t.define("select2/diacritics",[],(function(){var e={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Œ":"OE","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","œ":"oe","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ώ":"ω","ς":"σ","’":"'"};return e}));t.define("select2/data/base",["../utils"],(function(e){function t(e,i){t.__super__.constructor.call(this)}e.Extend(t,e.Observable);t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")};t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")};t.prototype.bind=function(e,t){};t.prototype.destroy=function(){};t.prototype.generateResultId=function(t,i){var n=t.id+"-result-";n+=e.generateChars(4);if(i.id!=null){n+="-"+i.id.toString()}else{n+="-"+e.generateChars(4)}return n};return t}));t.define("select2/data/select",["./base","../utils","jquery"],(function(e,t,i){function n(e,t){this.$element=e;this.options=t;n.__super__.constructor.call(this)}t.Extend(n,e);n.prototype.current=function(e){var t=this;var n=Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),(function(e){return t.item(i(e))}));e(n)};n.prototype.select=function(e){var t=this;e.selected=true;if(e.element!=null&&e.element.tagName.toLowerCase()==="option"){e.element.selected=true;this.$element.trigger("input").trigger("change");return}if(this.$element.prop("multiple")){this.current((function(i){var n=[];e=[e];e.push.apply(e,i);for(var r=0;r<e.length;r++){var o=e[r].id;if(n.indexOf(o)===-1){n.push(o)}}t.$element.val(n);t.$element.trigger("input").trigger("change")}))}else{var i=e.id;this.$element.val(i);this.$element.trigger("input").trigger("change")}};n.prototype.unselect=function(e){var t=this;if(!this.$element.prop("multiple")){return}e.selected=false;if(e.element!=null&&e.element.tagName.toLowerCase()==="option"){e.element.selected=false;this.$element.trigger("input").trigger("change");return}this.current((function(i){var n=[];for(var r=0;r<i.length;r++){var o=i[r].id;if(o!==e.id&&n.indexOf(o)===-1){n.push(o)}}t.$element.val(n);t.$element.trigger("input").trigger("change")}))};n.prototype.bind=function(e,t){var i=this;this.container=e;e.on("select",(function(e){i.select(e.data)}));e.on("unselect",(function(e){i.unselect(e.data)}))};n.prototype.destroy=function(){this.$element.find("*").each((function(){t.RemoveData(this)}))};n.prototype.query=function(e,t){var n=[];var r=this;var o=this.$element.children();o.each((function(){if(this.tagName.toLowerCase()!=="option"&&this.tagName.toLowerCase()!=="optgroup"){return}var t=i(this);var o=r.item(t);var s=r.matches(e,o);if(s!==null){n.push(s)}}));t({results:n})};n.prototype.addOptions=function(e){this.$element.append(e)};n.prototype.option=function(e){var n;if(e.children){n=document.createElement("optgroup");n.label=e.text}else{n=document.createElement("option");if(n.textContent!==undefined){n.textContent=e.text}else{n.innerText=e.text}}if(e.id!==undefined){n.value=e.id}if(e.disabled){n.disabled=true}if(e.selected){n.selected=true}if(e.title){n.title=e.title}var r=this._normalizeItem(e);r.element=n;t.StoreData(n,"data",r);return i(n)};n.prototype.item=function(e){var n={};n=t.GetData(e[0],"data");if(n!=null){return n}var r=e[0];if(r.tagName.toLowerCase()==="option"){n={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")}}else if(r.tagName.toLowerCase()==="optgroup"){n={text:e.prop("label"),children:[],title:e.prop("title")};var o=e.children("option");var s=[];for(var a=0;a<o.length;a++){var l=i(o[a]);var c=this.item(l);s.push(c)}n.children=s}n=this._normalizeItem(n);n.element=e[0];t.StoreData(e[0],"data",n);return n};n.prototype._normalizeItem=function(e){if(e!==Object(e)){e={id:e,text:e}}e=i.extend({},{text:""},e);var t={selected:false,disabled:false};if(e.id!=null){e.id=e.id.toString()}if(e.text!=null){e.text=e.text.toString()}if(e._resultId==null&&e.id&&this.container!=null){e._resultId=this.generateResultId(this.container,e)}return i.extend({},t,e)};n.prototype.matches=function(e,t){var i=this.options.get("matcher");return i(e,t)};return n}));t.define("select2/data/array",["./select","../utils","jquery"],(function(e,t,i){function n(e,t){this._dataToConvert=t.get("data")||[];n.__super__.constructor.call(this,e,t)}t.Extend(n,e);n.prototype.bind=function(e,t){n.__super__.bind.call(this,e,t);this.addOptions(this.convertToOptions(this._dataToConvert))};n.prototype.select=function(e){var t=this.$element.find("option").filter((function(t,i){return i.value==e.id.toString()}));if(t.length===0){t=this.option(e);this.addOptions(t)}n.__super__.select.call(this,e)};n.prototype.convertToOptions=function(e){var t=this;var n=this.$element.find("option");var r=n.map((function(){return t.item(i(this)).id})).get();var o=[];function s(e){return function(){return i(this).val()==e.id}}for(var a=0;a<e.length;a++){var l=this._normalizeItem(e[a]);if(r.indexOf(l.id)>=0){var c=n.filter(s(l));var d=this.item(c);var u=i.extend(true,{},l,d);var h=this.option(u);c.replaceWith(h);continue}var p=this.option(l);if(l.children){var f=this.convertToOptions(l.children);p.append(f)}o.push(p)}return o};return n}));t.define("select2/data/ajax",["./array","../utils","jquery"],(function(e,t,i){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax"));if(this.ajaxOptions.processResults!=null){this.processResults=this.ajaxOptions.processResults}n.__super__.constructor.call(this,e,t)}t.Extend(n,e);n.prototype._applyDefaults=function(e){var t={data:function(e){return i.extend({},e,{q:e.term})},transport:function(e,t,n){var r=i.ajax(e);r.then(t);r.fail(n);return r}};return i.extend({},t,e,true)};n.prototype.processResults=function(e){return e};n.prototype.query=function(e,t){var n=[];var r=this;if(this._request!=null){if(typeof this._request.abort==="function"){this._request.abort()}this._request=null}var o=i.extend({type:"GET"},this.ajaxOptions);if(typeof o.url==="function"){o.url=o.url.call(this.$element,e)}if(typeof o.data==="function"){o.data=o.data.call(this.$element,e)}function s(){var i=o.transport(o,(function(i){var n=r.processResults(i,e);if(r.options.get("debug")&&window.console&&console.error){if(!n||!n.results||!Array.isArray(n.results)){console.error("Select2: The AJAX results did not return an array in the "+"`results` key of the response.")}}t(n)}),(function(){if("status"in i&&(i.status===0||i.status==="0")){return}r.trigger("results:message",{message:"errorLoading"})}));r._request=i}if(this.ajaxOptions.delay&&e.term!=null){if(this._queryTimeout){window.clearTimeout(this._queryTimeout)}this._queryTimeout=window.setTimeout(s,this.ajaxOptions.delay)}else{s()}};return n}));t.define("select2/data/tags",["jquery"],(function(e){function t(e,t,i){var n=i.get("tags");var r=i.get("createTag");if(r!==undefined){this.createTag=r}var o=i.get("insertTag");if(o!==undefined){this.insertTag=o}e.call(this,t,i);if(Array.isArray(n)){for(var s=0;s<n.length;s++){var a=n[s];var l=this._normalizeItem(a);var c=this.option(l);this.$element.append(c)}}}t.prototype.query=function(e,t,i){var n=this;this._removeOldTags();if(t.term==null||t.page!=null){e.call(this,t,i);return}function r(e,o){var s=e.results;for(var a=0;a<s.length;a++){var l=s[a];var c=l.children!=null&&!r({results:l.children},true);var d=(l.text||"").toUpperCase();var u=(t.term||"").toUpperCase();var h=d===u;if(h||c){if(o){return false}e.data=s;i(e);return}}if(o){return true}var p=n.createTag(t);if(p!=null){var f=n.option(p);f.attr("data-select2-tag","true");n.addOptions([f]);n.insertTag(s,p)}e.results=s;i(e)}e.call(this,t,r)};t.prototype.createTag=function(e,t){if(t.term==null){return null}var i=t.term.trim();if(i===""){return null}return{id:i,text:i}};t.prototype.insertTag=function(e,t,i){t.unshift(i)};t.prototype._removeOldTags=function(t){var i=this.$element.find("option[data-select2-tag]");i.each((function(){if(this.selected){return}e(this).remove()}))};return t}));t.define("select2/data/tokenizer",["jquery"],(function(e){function t(e,t,i){var n=i.get("tokenizer");if(n!==undefined){this.tokenizer=n}e.call(this,t,i)}t.prototype.bind=function(e,t,i){e.call(this,t,i);this.$search=t.dropdown.$search||t.selection.$search||i.find(".select2-search__field")};t.prototype.query=function(t,i,n){var r=this;function o(t){var i=r._normalizeItem(t);var n=r.$element.find("option").filter((function(){return e(this).val()===i.id}));if(!n.length){var o=r.option(i);o.attr("data-select2-tag",true);r._removeOldTags();r.addOptions([o])}s(i)}function s(e){r.trigger("select",{data:e})}i.term=i.term||"";var a=this.tokenizer(i,this.options,o);if(a.term!==i.term){if(this.$search.length){this.$search.val(a.term);this.$search.trigger("focus")}i.term=a.term}t.call(this,i,n)};t.prototype.tokenizer=function(t,i,n,r){var o=n.get("tokenSeparators")||[];var s=i.term;var a=0;var l=this.createTag||function(e){return{id:e.term,text:e.term}};while(a<s.length){var c=s[a];if(o.indexOf(c)===-1){a++;continue}var d=s.substr(0,a);var u=e.extend({},i,{term:d});var h=l(u);if(h==null){a++;continue}r(h);s=s.substr(a+1)||"";a=0}return{term:s}};return t}));t.define("select2/data/minimumInputLength",[],(function(){function e(e,t,i){this.minimumInputLength=i.get("minimumInputLength");e.call(this,t,i)}e.prototype.query=function(e,t,i){t.term=t.term||"";if(t.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}});return}e.call(this,t,i)};return e}));t.define("select2/data/maximumInputLength",[],(function(){function e(e,t,i){this.maximumInputLength=i.get("maximumInputLength");e.call(this,t,i)}e.prototype.query=function(e,t,i){t.term=t.term||"";if(this.maximumInputLength>0&&t.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}});return}e.call(this,t,i)};return e}));t.define("select2/data/maximumSelectionLength",[],(function(){function e(e,t,i){this.maximumSelectionLength=i.get("maximumSelectionLength");e.call(this,t,i)}e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i);t.on("select",(function(){n._checkIfMaximumSelected()}))};e.prototype.query=function(e,t,i){var n=this;this._checkIfMaximumSelected((function(){e.call(n,t,i)}))};e.prototype._checkIfMaximumSelected=function(e,t){var i=this;this.current((function(e){var n=e!=null?e.length:0;if(i.maximumSelectionLength>0&&n>=i.maximumSelectionLength){i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}});return}if(t){t()}}))};return e}));t.define("select2/dropdown",["jquery","./utils"],(function(e,t){function i(e,t){this.$element=e;this.options=t;i.__super__.constructor.call(this)}t.Extend(i,t.Observable);i.prototype.render=function(){var t=e('<span class="select2-dropdown">'+'<span class="select2-results"></span>'+"</span>");t.attr("dir",this.options.get("dir"));this.$dropdown=t;return t};i.prototype.bind=function(){};i.prototype.position=function(e,t){};i.prototype.destroy=function(){this.$dropdown.remove()};return i}));t.define("select2/dropdown/search",["jquery"],(function(e){function t(){}t.prototype.render=function(t){var i=t.call(this);var n=this.options.get("translations").get("search");var r=e('<span class="select2-search select2-search--dropdown">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocorrect="off" autocapitalize="none"'+' spellcheck="false" role="searchbox" aria-autocomplete="list" />'+"</span>");this.$searchContainer=r;this.$search=r.find("input");this.$search.prop("autocomplete",this.options.get("autocomplete"));this.$search.attr("aria-label",n());i.prepend(r);return i};t.prototype.bind=function(t,i,n){var r=this;var o=i.id+"-results";t.call(this,i,n);this.$search.on("keydown",(function(e){r.trigger("keypress",e);r._keyUpPrevented=e.isDefaultPrevented()}));this.$search.on("input",(function(t){e(this).off("keyup")}));this.$search.on("keyup input",(function(e){r.handleSearch(e)}));i.on("open",(function(){r.$search.attr("tabindex",0);r.$search.attr("aria-controls",o);r.$search.trigger("focus");window.setTimeout((function(){r.$search.trigger("focus")}),0)}));i.on("close",(function(){r.$search.attr("tabindex",-1);r.$search.removeAttr("aria-controls");r.$search.removeAttr("aria-activedescendant");r.$search.val("");r.$search.trigger("blur")}));i.on("focus",(function(){if(!i.isOpen()){r.$search.trigger("focus")}}));i.on("results:all",(function(e){if(e.query.term==null||e.query.term===""){var t=r.showSearch(e);if(t){r.$searchContainer[0].classList.remove("select2-search--hide")}else{r.$searchContainer[0].classList.add("select2-search--hide")}}}));i.on("results:focus",(function(e){if(e.data._resultId){r.$search.attr("aria-activedescendant",e.data._resultId)}else{r.$search.removeAttr("aria-activedescendant")}}))};t.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=false};t.prototype.showSearch=function(e,t){return true};return t}));t.define("select2/dropdown/hidePlaceholder",[],(function(){function e(e,t,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));e.call(this,t,i,n)}e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results);e.call(this,t)};e.prototype.normalizePlaceholder=function(e,t){if(typeof t==="string"){t={id:"",text:t}}return t};e.prototype.removePlaceholder=function(e,t){var i=t.slice(0);for(var n=t.length-1;n>=0;n--){var r=t[n];if(this.placeholder.id===r.id){i.splice(n,1)}}return i};return e}));t.define("select2/dropdown/infiniteScroll",["jquery"],(function(e){function t(e,t,i,n){this.lastParams={};e.call(this,t,i,n);this.$loadingMore=this.createLoadingMore();this.loading=false}t.prototype.append=function(e,t){this.$loadingMore.remove();this.loading=false;e.call(this,t);if(this.showLoadingMore(t)){this.$results.append(this.$loadingMore);this.loadMoreIfNeeded()}};t.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i);t.on("query",(function(e){n.lastParams=e;n.loading=true}));t.on("query:append",(function(e){n.lastParams=e;n.loading=true}));this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))};t.prototype.loadMoreIfNeeded=function(){var t=e.contains(document.documentElement,this.$loadingMore[0]);if(this.loading||!t){return}var i=this.$results.offset().top+this.$results.outerHeight(false);var n=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(false);if(i+50>=n){this.loadMore()}};t.prototype.loadMore=function(){this.loading=true;var t=e.extend({},{page:1},this.lastParams);t.page++;this.trigger("query:append",t)};t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more};t.prototype.createLoadingMore=function(){var t=e("<li "+'class="select2-results__option select2-results__option--load-more"'+'role="option" aria-disabled="true"></li>');var i=this.options.get("translations").get("loadingMore");t.html(i(this.lastParams));return t};return t}));t.define("select2/dropdown/attachBody",["jquery","../utils"],(function(e,t){function i(t,i,n){this.$dropdownParent=e(n.get("dropdownParent")||document.body);t.call(this,i,n)}i.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i);t.on("open",(function(){n._showDropdown();n._attachPositioningHandler(t);n._bindContainerResultHandlers(t)}));t.on("close",(function(){n._hideDropdown();n._detachPositioningHandler(t)}));this.$dropdownContainer.on("mousedown",(function(e){e.stopPropagation()}))};i.prototype.destroy=function(e){e.call(this);this.$dropdownContainer.remove()};i.prototype.position=function(e,t,i){t.attr("class",i.attr("class"));t[0].classList.remove("select2");t[0].classList.add("select2-container--open");t.css({position:"absolute",top:-999999});this.$container=i};i.prototype.render=function(t){var i=e("<span></span>");var n=t.call(this);i.append(n);this.$dropdownContainer=i;return i};i.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()};i.prototype._bindContainerResultHandlers=function(e,t){if(this._containerResultsHandlersBound){return}var i=this;t.on("results:all",(function(){i._positionDropdown();i._resizeDropdown()}));t.on("results:append",(function(){i._positionDropdown();i._resizeDropdown()}));t.on("results:message",(function(){i._positionDropdown();i._resizeDropdown()}));t.on("select",(function(){i._positionDropdown();i._resizeDropdown()}));t.on("unselect",(function(){i._positionDropdown();i._resizeDropdown()}));this._containerResultsHandlersBound=true};i.prototype._attachPositioningHandler=function(i,n){var r=this;var o="scroll.select2."+n.id;var s="resize.select2."+n.id;var a="orientationchange.select2."+n.id;var l=this.$container.parents().filter(t.hasScroll);l.each((function(){t.StoreData(this,"select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})}));l.on(o,(function(i){var n=t.GetData(this,"select2-scroll-position");e(this).scrollTop(n.y)}));e(window).on(o+" "+s+" "+a,(function(e){r._positionDropdown();r._resizeDropdown()}))};i.prototype._detachPositioningHandler=function(i,n){var r="scroll.select2."+n.id;var o="resize.select2."+n.id;var s="orientationchange.select2."+n.id;var a=this.$container.parents().filter(t.hasScroll);a.off(r);e(window).off(r+" "+o+" "+s)};i.prototype._positionDropdown=function(){var t=e(window);var i=this.$dropdown[0].classList.contains("select2-dropdown--above");var n=this.$dropdown[0].classList.contains("select2-dropdown--below");var r=null;var o=this.$container.offset();o.bottom=o.top+this.$container.outerHeight(false);var s={height:this.$container.outerHeight(false)};s.top=o.top;s.bottom=o.top+s.height;var a={height:this.$dropdown.outerHeight(false)};var l={top:t.scrollTop(),bottom:t.scrollTop()+t.height()};var c=l.top<o.top-a.height;var d=l.bottom>o.bottom+a.height;var u={left:o.left,top:s.bottom};var h=this.$dropdownParent;if(h.css("position")==="static"){h=h.offsetParent()}var p={top:0,left:0};if(e.contains(document.body,h[0])||h[0].isConnected){p=h.offset()}u.top-=p.top;u.left-=p.left;if(!i&&!n){r="below"}if(!d&&c&&!i){r="above"}else if(!c&&d&&i){r="below"}if(r=="above"||i&&r!=="below"){u.top=s.top-p.top-a.height}if(r!=null){this.$dropdown[0].classList.remove("select2-dropdown--below");this.$dropdown[0].classList.remove("select2-dropdown--above");this.$dropdown[0].classList.add("select2-dropdown--"+r);this.$container[0].classList.remove("select2-container--below");this.$container[0].classList.remove("select2-container--above");this.$container[0].classList.add("select2-container--"+r)}this.$dropdownContainer.css(u)};i.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(false)+"px"};if(this.options.get("dropdownAutoWidth")){e.minWidth=e.width;e.position="relative";e.width="auto"}this.$dropdown.css(e)};i.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()};return i}));t.define("select2/dropdown/minimumResultsForSearch",[],(function(){function e(t){var i=0;for(var n=0;n<t.length;n++){var r=t[n];if(r.children){i+=e(r.children)}else{i++}}return i}function t(e,t,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch");if(this.minimumResultsForSearch<0){this.minimumResultsForSearch=Infinity}e.call(this,t,i,n)}t.prototype.showSearch=function(t,i){if(e(i.data.results)<this.minimumResultsForSearch){return false}return t.call(this,i)};return t}));t.define("select2/dropdown/selectOnClose",["../utils"],(function(e){function t(){}t.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i);t.on("close",(function(e){n._handleSelectOnClose(e)}))};t.prototype._handleSelectOnClose=function(t,i){if(i&&i.originalSelect2Event!=null){var n=i.originalSelect2Event;if(n._type==="select"||n._type==="unselect"){return}}var r=this.getHighlightedResults();if(r.length<1){return}var o=e.GetData(r[0],"data");if(o.element!=null&&o.element.selected||o.element==null&&o.selected){return}this.trigger("select",{data:o})};return t}));t.define("select2/dropdown/closeOnSelect",[],(function(){function e(){}e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i);t.on("select",(function(e){n._selectTriggered(e)}));t.on("unselect",(function(e){n._selectTriggered(e)}))};e.prototype._selectTriggered=function(e,t){var i=t.originalEvent;if(i&&(i.ctrlKey||i.metaKey)){return}this.trigger("close",{originalEvent:i,originalSelect2Event:t})};return e}));t.define("select2/dropdown/dropdownCss",["../utils"],(function(e){function t(){}t.prototype.render=function(t){var i=t.call(this);var n=this.options.get("dropdownCssClass")||"";if(n.indexOf(":all:")!==-1){n=n.replace(":all:","");e.copyNonInternalCssClasses(i[0],this.$element[0])}i.addClass(n);return i};return t}));t.define("select2/dropdown/tagsSearchHighlight",["../utils"],(function(e){function t(){}t.prototype.highlightFirstItem=function(t){var i=this.$results.find(".select2-results__option--selectable"+":not(.select2-results__option--selected)");if(i.length>0){var n=i.first();var r=e.GetData(n[0],"data");var o=r.element;if(o&&o.getAttribute){if(o.getAttribute("data-select2-tag")==="true"){n.trigger("mouseenter");return}}}t.call(this)};return t}));t.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum;var i="Please delete "+t+" character";if(t!=1){i+="s"}return i},inputTooShort:function(e){var t=e.minimum-e.input.length;var i="Please enter "+t+" or more characters";return i},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";if(e.maximum!=1){t+="s"}return t},noResults:function(){return"No results found"},searching:function(){return"Searching…"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}}));t.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],(function(e,t,i,n,r,o,s,a,l,c,d,u,h,p,f,g,m,v,b,y,w,C,_,S,A,x,E,T,D,M,k){function P(){this.reset()}P.prototype.apply=function(d){d=e.extend(true,{},this.defaults,d);if(d.dataAdapter==null){if(d.ajax!=null){d.dataAdapter=f}else if(d.data!=null){d.dataAdapter=p}else{d.dataAdapter=h}if(d.minimumInputLength>0){d.dataAdapter=c.Decorate(d.dataAdapter,v)}if(d.maximumInputLength>0){d.dataAdapter=c.Decorate(d.dataAdapter,b)}if(d.maximumSelectionLength>0){d.dataAdapter=c.Decorate(d.dataAdapter,y)}if(d.tags){d.dataAdapter=c.Decorate(d.dataAdapter,g)}if(d.tokenSeparators!=null||d.tokenizer!=null){d.dataAdapter=c.Decorate(d.dataAdapter,m)}}if(d.resultsAdapter==null){d.resultsAdapter=t;if(d.ajax!=null){d.resultsAdapter=c.Decorate(d.resultsAdapter,S)}if(d.placeholder!=null){d.resultsAdapter=c.Decorate(d.resultsAdapter,_)}if(d.selectOnClose){d.resultsAdapter=c.Decorate(d.resultsAdapter,E)}if(d.tags){d.resultsAdapter=c.Decorate(d.resultsAdapter,M)}}if(d.dropdownAdapter==null){if(d.multiple){d.dropdownAdapter=w}else{var u=c.Decorate(w,C);d.dropdownAdapter=u}if(d.minimumResultsForSearch!==0){d.dropdownAdapter=c.Decorate(d.dropdownAdapter,x)}if(d.closeOnSelect){d.dropdownAdapter=c.Decorate(d.dropdownAdapter,T)}if(d.dropdownCssClass!=null){d.dropdownAdapter=c.Decorate(d.dropdownAdapter,D)}d.dropdownAdapter=c.Decorate(d.dropdownAdapter,A)}if(d.selectionAdapter==null){if(d.multiple){d.selectionAdapter=n}else{d.selectionAdapter=i}if(d.placeholder!=null){d.selectionAdapter=c.Decorate(d.selectionAdapter,r)}if(d.allowClear){d.selectionAdapter=c.Decorate(d.selectionAdapter,o)}if(d.multiple){d.selectionAdapter=c.Decorate(d.selectionAdapter,s)}if(d.selectionCssClass!=null){d.selectionAdapter=c.Decorate(d.selectionAdapter,a)}d.selectionAdapter=c.Decorate(d.selectionAdapter,l)}d.language=this._resolveLanguage(d.language);d.language.push("en");var k=[];for(var P=0;P<d.language.length;P++){var R=d.language[P];if(k.indexOf(R)===-1){k.push(R)}}d.language=k;d.translations=this._processTranslations(d.language,d.debug);return d};P.prototype.reset=function(){function t(e){function t(e){return u[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function i(n,r){if(n.term==null||n.term.trim()===""){return r}if(r.children&&r.children.length>0){var o=e.extend(true,{},r);for(var s=r.children.length-1;s>=0;s--){var a=r.children[s];var l=i(n,a);if(l==null){o.children.splice(s,1)}}if(o.children.length>0){return o}return i(n,o)}var c=t(r.text).toUpperCase();var d=t(n.term).toUpperCase();if(c.indexOf(d)>-1){return r}return null}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:true,debug:false,dropdownAutoWidth:false,escapeMarkup:c.escapeMarkup,language:{},matcher:i,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:false,scrollAfterSelect:false,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}};P.prototype.applyFromElement=function(e,t){var i=e.language;var n=this.defaults.language;var r=t.prop("lang");var o=t.closest("[lang]").prop("lang");var s=Array.prototype.concat.call(this._resolveLanguage(r),this._resolveLanguage(i),this._resolveLanguage(n),this._resolveLanguage(o));e.language=s;return e};P.prototype._resolveLanguage=function(t){if(!t){return[]}if(e.isEmptyObject(t)){return[]}if(e.isPlainObject(t)){return[t]}var i;if(!Array.isArray(t)){i=[t]}else{i=t}var n=[];for(var r=0;r<i.length;r++){n.push(i[r]);if(typeof i[r]==="string"&&i[r].indexOf("-")>0){var o=i[r].split("-");var s=o[0];n.push(s)}}return n};P.prototype._processTranslations=function(t,i){var n=new d;for(var r=0;r<t.length;r++){var o=new d;var s=t[r];if(typeof s==="string"){try{o=d.loadPath(s)}catch(e){try{s=this.defaults.amdLanguageBase+s;o=d.loadPath(s)}catch(e){if(i&&window.console&&console.warn){console.warn('Select2: The language file for "'+s+'" could '+"not be automatically loaded. A fallback will be used instead.")}}}}else if(e.isPlainObject(s)){o=new d(s)}else{o=s}n.extend(o)}return n};P.prototype.set=function(t,i){var n=e.camelCase(t);var r={};r[n]=i;var o=c._convertData(r);e.extend(true,this.defaults,o)};var R=new P;return R}));t.define("select2/options",["jquery","./defaults","./utils"],(function(e,t,i){function n(e,i){this.options=e;if(i!=null){this.fromElement(i)}if(i!=null){this.options=t.applyFromElement(this.options,i)}this.options=t.apply(this.options)}n.prototype.fromElement=function(t){var n=["select2"];if(this.options.multiple==null){this.options.multiple=t.prop("multiple")}if(this.options.disabled==null){this.options.disabled=t.prop("disabled")}if(this.options.autocomplete==null&&t.prop("autocomplete")){this.options.autocomplete=t.prop("autocomplete")}if(this.options.dir==null){if(t.prop("dir")){this.options.dir=t.prop("dir")}else if(t.closest("[dir]").prop("dir")){this.options.dir=t.closest("[dir]").prop("dir")}else{this.options.dir="ltr"}}t.prop("disabled",this.options.disabled);t.prop("multiple",this.options.multiple);if(i.GetData(t[0],"select2Tags")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-select2-tags` attribute has been changed to "+'use the `data-data` and `data-tags="true"` attributes and will be '+"removed in future versions of Select2.")}i.StoreData(t[0],"data",i.GetData(t[0],"select2Tags"));i.StoreData(t[0],"tags",true)}if(i.GetData(t[0],"ajaxUrl")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-ajax-url` attribute has been changed to "+"`data-ajax--url` and support for the old attribute will be removed"+" in future versions of Select2.")}t.attr("ajax--url",i.GetData(t[0],"ajaxUrl"));i.StoreData(t[0],"ajax-Url",i.GetData(t[0],"ajaxUrl"))}var r={};function o(e,t){return t.toUpperCase()}for(var s=0;s<t[0].attributes.length;s++){var a=t[0].attributes[s].name;var l="data-";if(a.substr(0,l.length)==l){var c=a.substring(l.length);var d=i.GetData(t[0],c);var u=c.replace(/-([a-z])/g,o);r[u]=d}}if(e.fn.jquery&&e.fn.jquery.substr(0,2)=="1."&&t[0].dataset){r=e.extend(true,{},t[0].dataset,r)}var h=e.extend(true,{},i.GetData(t[0]),r);h=i._convertData(h);for(var p in h){if(n.indexOf(p)>-1){continue}if(e.isPlainObject(this.options[p])){e.extend(this.options[p],h[p])}else{this.options[p]=h[p]}}return this};n.prototype.get=function(e){return this.options[e]};n.prototype.set=function(e,t){this.options[e]=t};return n}));t.define("select2/core",["jquery","./options","./utils","./keys"],(function(e,t,i,n){var r=function(e,n){if(i.GetData(e[0],"select2")!=null){i.GetData(e[0],"select2").destroy()}this.$element=e;this.id=this._generateId(e);n=n||{};this.options=new t(n,e);r.__super__.constructor.call(this);var o=e.attr("tabindex")||0;i.StoreData(e[0],"old-tabindex",o);e.attr("tabindex","-1");var s=this.options.get("dataAdapter");this.dataAdapter=new s(e,this.options);var a=this.render();this._placeContainer(a);var l=this.options.get("selectionAdapter");this.selection=new l(e,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,a);var c=this.options.get("dropdownAdapter");this.dropdown=new c(e,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,a);var d=this.options.get("resultsAdapter");this.results=new d(e,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);var u=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current((function(e){u.trigger("selection:update",{data:e})}));e[0].classList.add("select2-hidden-accessible");e.attr("aria-hidden","true");this._syncAttributes();i.StoreData(e[0],"select2",this);e.data("select2",this)};i.Extend(r,i.Observable);r.prototype._generateId=function(e){var t="";if(e.attr("id")!=null){t=e.attr("id")}else if(e.attr("name")!=null){t=e.attr("name")+"-"+i.generateChars(2)}else{t=i.generateChars(4)}t=t.replace(/(:|\.|\[|\]|,)/g,"");t="select2-"+t;return t};r.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));if(t!=null){e.css("width",t)}};r.prototype._resolveWidth=function(e,t){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(t=="resolve"){var n=this._resolveWidth(e,"style");if(n!=null){return n}return this._resolveWidth(e,"element")}if(t=="element"){var r=e.outerWidth(false);if(r<=0){return"auto"}return r+"px"}if(t=="style"){var o=e.attr("style");if(typeof o!=="string"){return null}var s=o.split(";");for(var a=0,l=s.length;a<l;a=a+1){var c=s[a].replace(/\s/g,"");var d=c.match(i);if(d!==null&&d.length>=1){return d[1]}}return null}if(t=="computedstyle"){var u=window.getComputedStyle(e[0]);return u.width}return t};r.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)};r.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",(function(){e.dataAdapter.current((function(t){e.trigger("selection:update",{data:t})}))}));this.$element.on("focus.select2",(function(t){e.trigger("focus",t)}));this._syncA=i.bind(this._syncAttributes,this);this._syncS=i.bind(this._syncSubtree,this);this._observer=new window.MutationObserver((function(t){e._syncA();e._syncS(t)}));this._observer.observe(this.$element[0],{attributes:true,childList:true,subtree:false})};r.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",(function(t,i){e.trigger(t,i)}))};r.prototype._registerSelectionEvents=function(){var e=this;var t=["toggle","focus"];this.selection.on("toggle",(function(){e.toggleDropdown()}));this.selection.on("focus",(function(t){e.focus(t)}));this.selection.on("*",(function(i,n){if(t.indexOf(i)!==-1){return}e.trigger(i,n)}))};r.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",(function(t,i){e.trigger(t,i)}))};r.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",(function(t,i){e.trigger(t,i)}))};r.prototype._registerEvents=function(){var e=this;this.on("open",(function(){e.$container[0].classList.add("select2-container--open")}));this.on("close",(function(){e.$container[0].classList.remove("select2-container--open")}));this.on("enable",(function(){e.$container[0].classList.remove("select2-container--disabled")}));this.on("disable",(function(){e.$container[0].classList.add("select2-container--disabled")}));this.on("blur",(function(){e.$container[0].classList.remove("select2-container--focus")}));this.on("query",(function(t){if(!e.isOpen()){e.trigger("open",{})}this.dataAdapter.query(t,(function(i){e.trigger("results:all",{data:i,query:t})}))}));this.on("query:append",(function(t){this.dataAdapter.query(t,(function(i){e.trigger("results:append",{data:i,query:t})}))}));this.on("keypress",(function(t){var i=t.which;if(e.isOpen()){if(i===n.ESC||i===n.UP&&t.altKey){e.close(t);t.preventDefault()}else if(i===n.ENTER||i===n.TAB){e.trigger("results:select",{});t.preventDefault()}else if(i===n.SPACE&&t.ctrlKey){e.trigger("results:toggle",{});t.preventDefault()}else if(i===n.UP){e.trigger("results:previous",{});t.preventDefault()}else if(i===n.DOWN){e.trigger("results:next",{});t.preventDefault()}}else{if(i===n.ENTER||i===n.SPACE||i===n.DOWN&&t.altKey){e.open();t.preventDefault()}}}))};r.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));if(this.isDisabled()){if(this.isOpen()){this.close()}this.trigger("disable",{})}else{this.trigger("enable",{})}};r.prototype._isChangeMutation=function(e){var t=this;if(e.addedNodes&&e.addedNodes.length>0){for(var i=0;i<e.addedNodes.length;i++){var n=e.addedNodes[i];if(n.selected){return true}}}else if(e.removedNodes&&e.removedNodes.length>0){return true}else if(Array.isArray(e)){return e.some((function(e){return t._isChangeMutation(e)}))}return false};r.prototype._syncSubtree=function(e){var t=this._isChangeMutation(e);var i=this;if(t){this.dataAdapter.current((function(e){i.trigger("selection:update",{data:e})}))}};r.prototype.trigger=function(e,t){var i=r.__super__.trigger;var n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(t===undefined){t={}}if(e in n){var o=n[e];var s={prevented:false,name:e,args:t};i.call(this,o,s);if(s.prevented){t.prevented=true;return}}i.call(this,e,t)};r.prototype.toggleDropdown=function(){if(this.isDisabled()){return}if(this.isOpen()){this.close()}else{this.open()}};r.prototype.open=function(){if(this.isOpen()){return}if(this.isDisabled()){return}this.trigger("query",{})};r.prototype.close=function(e){if(!this.isOpen()){return}this.trigger("close",{originalEvent:e})};r.prototype.isEnabled=function(){return!this.isDisabled()};r.prototype.isDisabled=function(){return this.options.get("disabled")};r.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")};r.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")};r.prototype.focus=function(e){if(this.hasFocus()){return}this.$container[0].classList.add("select2-container--focus");this.trigger("focus",{})};r.prototype.enable=function(e){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("enable")` method has been deprecated and will'+' be removed in later Select2 versions. Use $element.prop("disabled")'+" instead.")}if(e==null||e.length===0){e=[true]}var t=!e[0];this.$element.prop("disabled",t)};r.prototype.data=function(){if(this.options.get("debug")&&arguments.length>0&&window.console&&console.warn){console.warn('Select2: Data can no longer be set using `select2("data")`. You '+"should consider setting the value instead using `$element.val()`.")}var e=[];this.dataAdapter.current((function(t){e=t}));return e};r.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("val")` method has been deprecated and will be'+" removed in later Select2 versions. Use $element.val() instead.")}if(e==null||e.length===0){return this.$element.val()}var t=e[0];if(Array.isArray(t)){t=t.map((function(e){return e.toString()}))}this.$element.val(t).trigger("input").trigger("change")};r.prototype.destroy=function(){i.RemoveData(this.$container[0]);this.$container.remove();this._observer.disconnect();this._observer=null;this._syncA=null;this._syncS=null;this.$element.off(".select2");this.$element.attr("tabindex",i.GetData(this.$element[0],"old-tabindex"));this.$element[0].classList.remove("select2-hidden-accessible");this.$element.attr("aria-hidden","false");i.RemoveData(this.$element[0]);this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null};r.prototype.render=function(){var t=e('<span class="select2 select2-container">'+'<span class="selection"></span>'+'<span class="dropdown-wrapper" aria-hidden="true"></span>'+"</span>");t.attr("dir",this.options.get("dir"));this.$container=t;this.$container[0].classList.add("select2-container--"+this.options.get("theme"));i.StoreData(t[0],"element",this.$element);return t};return r}));t.define("jquery-mousewheel",["jquery"],(function(e){return e}));t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],(function(e,t,i,n,r){if(e.fn.select2==null){var o=["open","close","destroy"];e.fn.select2=function(t){t=t||{};if(typeof t==="object"){this.each((function(){var n=e.extend(true,{},t);var r=new i(e(this),n)}));return this}else if(typeof t==="string"){var n;var s=Array.prototype.slice.call(arguments,1);this.each((function(){var e=r.GetData(this,"select2");if(e==null&&window.console&&console.error){console.error("The select2('"+t+"') method was called on an "+"element that is not using Select2.")}n=e[t].apply(e,s)}));if(o.indexOf(t)>-1){return this}return n}else{throw new Error("Invalid arguments for Select2: "+t)}}}if(e.fn.select2.defaults==null){e.fn.select2.defaults=n}return i}));return{define:t.define,require:t.require}}();var i=t.require("jquery.select2");e.fn.select2.amd=t;return i}));(function(e){e.fn.select2ToTree=function(i){var n=e.extend({},i);if(n.treeData){t(n.treeData,this)}n._templateResult=n.templateResult;n.templateResult=function(t,i){var r=t.text;if(typeof n._templateResult==="function"){r=n._templateResult(t,i)}var o=e("<span class='item-label'></span>").append(r);if(t.element){var s=t.element;i.setAttribute("data-val",s.value);if(s.className)i.className+=" "+s.className;if(s.getAttribute("data-pup")){i.setAttribute("data-pup",s.getAttribute("data-pup"))}if(e(i).hasClass("non-leaf")){return e.merge(e('<span class="expand-collapse" onmouseup="expColMouseupHandler(event);"></span>'),o)}}return o};window.expColMouseupHandler=function(e){r(e.target||e.srcElement);e.stopPropagation?e.stopPropagation():e.cancelBubble=true;e.preventDefault?e.preventDefault():e.returnValue=false};var o=this.select2(n);o.on("select2:open",(function(e){var t=o.data("select2");t.$dropdown.addClass("s2-to-tree");t.$dropdown.removeClass("searching-result");var i=t.$dropdown.find(".select2-search__field").add(t.$container.find(".select2-search__field"));i.off("input",s);i.on("input",s)}));function s(t){var i=o.data("select2");if(e(this).val().trim().length>0){i.$dropdown.addClass("searching-result")}else{i.$dropdown.removeClass("searching-result")}}return o};function t(t,i){function r(e,t){var i=e;for(var n=0;n<t.length;n++){var r=t[n];if(i[r]){i=i[r];continue}return"MISSING"}return i}function o(s,a,l){var c;if(t.labelFld&&t.labelFld.split(".").length>1){c=t.labelFld.split(".")}var d;if(t.valFld&&t.valFld.split(".").length>1){d=t.valFld.split(".")}for(var u=0;u<s.length;u++){var h=s[u]||{};var p=e("<option></option>");if(c){p.text(r(h,c))}else{p.text(h[t.labelFld||"text"])}if(d){p.val(r(h,d))}else{p.val(h[t.valFld||"id"])}if(h[t.selFld||"selected"]&&String(h[t.selFld||"selected"])==="true"){p.prop("selected",h[t.selFld||"selected"])}if(p.val()===""){p.prop("disabled",true);p.val(n())}p.addClass("l"+a);if(l)p.attr("data-pup",l);i.append(p);var f=h[t.incFld||"inc"];if(f&&f.length>0){p.addClass("non-leaf");o(f,a+1,p.val())}}}o(t.dataArr,1,"");if(t.dftVal)i.val(t.dftVal)}var i=1;function n(){return"autoUniqueVal_"+i++}function r(t){e(t.parentNode).toggleClass("opened");o(t.parentNode)}function o(t){var i=t;var n=e(t).parent(".select2-results__options");var r=true;do{var s=(e(i).attr("data-pup")||"").replace(/'/g,"\\'");i=null;if(s){var a=n.find(".select2-results__option[data-val='"+s+"']");if(a.length>0){if(!a.eq(0).hasClass("opened")){e(t).removeClass("showme");r=false;break}i=a[0]}}}while(i);if(r)e(t).addClass("showme");var l=(e(t).attr("data-val")||"").replace(/'/g,"\\'");n.find(".select2-results__option[data-pup='"+l+"']").each((function(){o(this)}))}})(jQuery);var EndlessScroll;EndlessScroll=function(){var e;t.name="EndlessScroll";e={bottomPixels:50,fireOnce:true,fireDelay:150,loader:"Loading...",content:"",insertAfter:"div:last",intervalFrequency:250,resetCounter:function(){return false},callback:function(){return true},ceaseFire:function(){return false}};function t(t,i){var n=this;this.options=$.extend({},e,i);this.firing=true;this.fired=false;this.fireSequence=0;this.didScroll=false;this.isScrollable=true;this.target=t;this.targetId="";this.content="";this.innerWrap=$(".endless_scroll_inner_wrap",this.target);if(this.options.data){this.options.content=this.options.data}$(t).scroll((function(){n.didScroll=true;n.target=t;return n.targetId=$(n.target).attr("id")}))}t.prototype.run=function(){var e=this;return setInterval((function(){if(e.shouldTryFiring()){e.didScroll=false;if(e.ceaseFireWhenNecessary()){return}if(e.shouldBeFiring()){e.resetFireSequenceWhenNecessary();e.acknowledgeFiring();e.insertLoader();if(e.hasContent()){e.showContent();e.fireCallback();e.delayFireingWhenNecessary()}return e.removeLoader()}}}),this.options.intervalFrequency)};t.prototype.shouldTryFiring=function(){return this.didScroll&&this.firing===true};t.prototype.ceaseFireWhenNecessary=function(){if(this.options.ceaseFire.apply(this.target,[this.fireSequence])){this.firing=false;return true}else{return false}};t.prototype.wrapContainer=function(){if(this.innerWrap.length===0){return this.innerWrap=$(this.target).wrapInner('<div class="endless_scroll_inner_wrap" />').find(".endless_scroll_inner_wrap")}};t.prototype.isScrollableOrNot=function(){if(this.target===document||this.target===window){return this.isScrollable=$(document).height()-$(window).height()<=$(window).scrollTop()+this.options.bottomPixels}else{this.wrapContainer();return this.isScrollable=this.innerWrap.length>0&&this.innerWrap.height()-$(this.target).height()<=$(this.target).scrollTop()+this.options.bottomPixels}};t.prototype.shouldBeFiring=function(){this.isScrollableOrNot();return this.isScrollable&&(this.options.fireOnce===false||this.options.fireOnce===true&&this.fired!==true)};t.prototype.resetFireSequenceWhenNecessary=function(){if(this.options.resetCounter.apply(this.target)===true){return this.fireSequence=0}};t.prototype.acknowledgeFiring=function(){this.fired=true;return this.fireSequence++};t.prototype.insertLoader=function(){return $(this.options.insertAfter).after('<div class="endless_scroll_loader_'+this.targetId+' endless_scroll_loader">'+this.options.loader+"</div>")};t.prototype.removeLoader=function(){return $(".endless_scroll_loader_"+this.targetId).fadeOut((function(){return $(this).remove()}))};t.prototype.hasContent=function(){if(typeof this.options.content==="function"){this.content=this.options.content.apply(this.target,[this.fireSequence])}else{this.content=this.options.content}return this.content!==false};t.prototype.showContent=function(){$(this.options.insertAfter).after('<div id="endless_scroll_content">'+this.content+"</div>");return $("#endless_scroll_content").hide().fadeIn(250,(function(){return $(this).removeAttr("id")}))};t.prototype.fireCallback=function(){return this.options.callback.apply(this.target,[this.fireSequence])};t.prototype.delayFireingWhenNecessary=function(){var e=this;if(this.options.fireDelay>0){$("body").after('<div id="endless_scroll_marker"></div>');return $("#endless_scroll_marker").fadeTo(this.options.fireDelay,1,(function(){$("#endless_scroll_marker").remove();return e.fired=false}))}else{return this.fired=false}};return t}();(function(e){return e.fn.endlessScroll=function(e){return new EndlessScroll(this,e).run()}})(jQuery);(function(e){var t=[];var i="dirty";var n="clean";var r="dirtyInitialValue";var o="isDirty";var s=function(e){var i;t.forEach((function(t){if(t.id===e){i=t}}));return i};const a=function(e){t=t.filter((function(t){return t!==e}));e.isDirty=false};var l=function(t){t.form.on("submit",(function(){t.submitting=true}));if(t.options.preventLeaving){e(window).on("beforeunload",(function(e){if(t.isDirty&&!t.submitting){e.preventDefault();return t.options.leavingMessage}}))}};var c=function(e){e.form.find("input, select, textarea").on("change.dirty click.dirty keyup.dirty keydown.dirty blur.dirty",(function(t){e.checkValues(t)}));e.form.on("dirty",(function(){e.options.onDirty()}));e.form.on("clean",(function(){e.options.onClean()}))};var d=function(e){e.form.find("input, select, textarea").off("change.dirty click.dirty keyup.dirty keydown.dirty blur.dirty");e.form.off("dirty");e.form.off("clean")};var u=function(i,r){this.form=i;this.isDirty=false;this.options=r;this.history=[n,n];this.id=e(i).attr("id");t.push(this)};u.prototype={init:function(){this.saveInitialValues();this.setEvents()},statuses:{dirty:i,clean:n,dataInitialValue:r,dataIsDirty:o},isRadioOrCheckbox:function(t){return e(t).is(":radio, :checkbox")},isFileInput:function(t){return e(t).is(":file")},saveInitialValues:function(){var t=this;this.form.find("input, select, textarea").each((function(i,n){var o=t.isRadioOrCheckbox(n);var s=t.isFileInput(n);if(o){var a=e(n).is(":checked")?"checked":"unchecked";e(n).data(r,a)}else if(s){e(n).data(r,JSON.stringify(n.files))}else{e(n).data(r,e(n).val()||"")}}))},refreshEvents:function(){var e=this;d(e);c(e)},showDirtyFields:function(){var t=this;return t.form.find("input, select, textarea").filter((function(t,i){return e(i).data(o)}))},setEvents:function(){var e=this;l(e);c(e)},isFieldDirty:function(e){var t=e.data(r);if(t==null){t=""}var i=e.val();if(i==null){i=""}var n=/^(true|false)$/i;var o=n.test(t)&&n.test(i);if(o){var s=new RegExp("^"+t+"$","i");return!s.test(i)}return i!==t},isFileInputDirty:function(e){var t=e.data(r);var i=e[0];var n=JSON.stringify(i.files);return n!==t},isCheckboxDirty:function(e){var t=e.data(r);var i=e.is(":checked")?"checked":"unchecked";return t!==i},checkValues:function(t){var i=this;var n=false;this.form.find("input, select, textarea").each((function(t,r){var s=i.isRadioOrCheckbox(r);var a=i.isFileInput(r);var l=e(r);var c;if(s){c=i.isCheckboxDirty(l)}else if(a){c=i.isFileInputDirty(l)}else{c=i.isFieldDirty(l)}l.data(o,c);n|=c}));if(n){i.setDirty()}else{i.setClean()}},setDirty:function(){this.isDirty=true;this.history[0]=this.history[1];this.history[1]=i;if(this.options.fireEventsOnEachChange||this.wasJustClean()){this.form.trigger("dirty")}},setClean:function(){this.isDirty=false;this.history[0]=this.history[1];this.history[1]=n;if(this.options.fireEventsOnEachChange||this.wasJustDirty()){this.form.trigger("clean")}},wasJustDirty:function(){return this.history[0]===i},wasJustClean:function(){return this.history[0]===n},setAsClean:function(){this.saveInitialValues();this.setClean()},setAsDirty:function(){this.saveInitialValues();this.setDirty()},resetForm:function(){var t=this;this.form.find("input, select, textarea").each((function(i,n){var o=e(n);var s=t.isRadioOrCheckbox(n);var a=t.isFileInput(n);if(s){var l=o.data(r);var c=l==="checked";o.prop("checked",c)}if(a){n.value="";e(n).data(r,JSON.stringify(n.files))}else{var d=o.data(r);o.val(d)}}));this.checkValues()}};e.fn.dirty=function(t){if(typeof t==="string"){var i=s(e(this).attr("id"));if(!i){return null}if(/^(isDirty|isClean|refreshEvents|resetForm|setAsClean|setAsDirty|showDirtyFields|destroy)$/i.test(t)){var n=t.toLowerCase();switch(n){case"isclean":return!i.isDirty;case"isdirty":return i.isDirty;case"refreshevents":return i.refreshEvents();case"resetform":return i.resetForm();case"setasclean":return i.setAsClean();case"setasdirty":return i.setAsDirty();case"showdirtyfields":return i.showDirtyFields();case"destroy":return a(i)}}else{return i[t].apply(i,Array.prototype.slice.call(arguments,1))}}else{return this.each((function(i,n){t=e.extend({},e.fn.dirty.defaults,t);var r=new u(e(n),t);r.init()}))}};e.fn.dirty.singleton=s;e.fn.dirty.defaults={preventLeaving:false,leavingMessage:"There are unsaved changes on this page which will be discarded if you continue.",onDirty:e.noop,onClean:e.noop,fireEventsOnEachChange:false};e.fn.dirty.extend=function(t){e.extend(u.prototype,t)};e.fn.dirty.constructor=u;e.fn.dirty.prototype=u.prototype})(jQuery);(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):(e=typeof globalThis!=="undefined"?globalThis:e||self,e.bootstrap=t())})(this,(function(){"use strict";const e=new Map;const t={set(t,i,n){if(!e.has(t)){e.set(t,new Map)}const r=e.get(t);if(!r.has(i)&&r.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`);return}r.set(i,n)},get(t,i){if(e.has(t)){return e.get(t).get(i)||null}return null},remove(t,i){if(!e.has(t)){return}const n=e.get(t);n.delete(i);if(n.size===0){e.delete(t)}}};const i=1e6;const n=1e3;const r="transitionend";const o=e=>{if(e&&window.CSS&&window.CSS.escape){e=e.replace(/#([^\s"#']+)/g,((e,t)=>`#${CSS.escape(t)}`))}return e};const s=e=>{if(e===null||e===undefined){return`${e}`}return Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()};const a=e=>{do{e+=Math.floor(Math.random()*i)}while(document.getElementById(e));return e};const l=e=>{if(!e){return 0}let{transitionDuration:t,transitionDelay:i}=window.getComputedStyle(e);const r=Number.parseFloat(t);const o=Number.parseFloat(i);if(!r&&!o){return 0}t=t.split(",")[0];i=i.split(",")[0];return(Number.parseFloat(t)+Number.parseFloat(i))*n};const c=e=>{e.dispatchEvent(new Event(r))};const d=e=>{if(!e||typeof e!=="object"){return false}if(typeof e.jquery!=="undefined"){e=e[0]}return typeof e.nodeType!=="undefined"};const u=e=>{if(d(e)){return e.jquery?e[0]:e}if(typeof e==="string"&&e.length>0){return document.querySelector(o(e))}return null};const h=e=>{if(!d(e)||e.getClientRects().length===0){return false}const t=getComputedStyle(e).getPropertyValue("visibility")==="visible";const i=e.closest("details:not([open])");if(!i){return t}if(i!==e){const t=e.closest("summary");if(t&&t.parentNode!==i){return false}if(t===null){return false}}return t};const p=e=>{if(!e||e.nodeType!==Node.ELEMENT_NODE){return true}if(e.classList.contains("disabled")){return true}if(typeof e.disabled!=="undefined"){return e.disabled}return e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false"};const f=e=>{if(!document.documentElement.attachShadow){return null}if(typeof e.getRootNode==="function"){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}if(e instanceof ShadowRoot){return e}if(!e.parentNode){return null}return f(e.parentNode)};const g=()=>{};const m=e=>{e.offsetHeight};const v=()=>{if(window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")){return window.jQuery}return null};const b=[];const y=e=>{if(document.readyState==="loading"){if(!b.length){document.addEventListener("DOMContentLoaded",(()=>{for(const e of b){e()}}))}b.push(e)}else{e()}};const w=()=>document.documentElement.dir==="rtl";const C=e=>{y((()=>{const t=v();if(t){const i=e.NAME;const n=t.fn[i];t.fn[i]=e.jQueryInterface;t.fn[i].Constructor=e;t.fn[i].noConflict=()=>{t.fn[i]=n;return e.jQueryInterface}}}))};const _=(e,t=[],i=e)=>typeof e==="function"?e(...t):i;const S=(e,t,i=true)=>{if(!i){_(e);return}const n=5;const o=l(t)+n;let s=false;const a=({target:i})=>{if(i!==t){return}s=true;t.removeEventListener(r,a);_(e)};t.addEventListener(r,a);setTimeout((()=>{if(!s){c(t)}}),o)};const A=(e,t,i,n)=>{const r=e.length;let o=e.indexOf(t);if(o===-1){return!i&&n?e[r-1]:e[0]}o+=i?1:-1;if(n){o=(o+r)%r}return e[Math.max(0,Math.min(o,r-1))]};const x=/[^.]*(?=\..*)\.|.*/;const E=/\..*/;const T=/::\d+$/;const D={};let M=1;const k={mouseenter:"mouseover",mouseleave:"mouseout"};const P=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function R(e,t){return t&&`${t}::${M++}`||e.uidEvent||M++}function I(e){const t=R(e);e.uidEvent=t;D[t]=D[t]||{};return D[t]}function O(e,t){return function i(n){W(n,{delegateTarget:e});if(i.oneOff){z.off(e,n.type,t)}return t.apply(e,[n])}}function N(e,t,i){return function n(r){const o=e.querySelectorAll(t);for(let{target:s}=r;s&&s!==this;s=s.parentNode){for(const a of o){if(a!==s){continue}W(r,{delegateTarget:s});if(n.oneOff){z.off(e,r.type,t,i)}return i.apply(s,[r])}}}}function L(e,t,i=null){return Object.values(e).find((e=>e.callable===t&&e.delegationSelector===i))}function F(e,t,i){const n=typeof t==="string";const r=n?i:t||i;let o=H(e);if(!P.has(o)){o=e}return[n,r,o]}function $(e,t,i,n,r){if(typeof t!=="string"||!e){return}let[o,s,a]=F(t,i,n);if(t in k){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget)){return e.call(this,t)}};s=e(s)}const l=I(e);const c=l[a]||(l[a]={});const d=L(c,s,o?i:null);if(d){d.oneOff=d.oneOff&&r;return}const u=R(s,t.replace(x,""));const h=o?N(e,i,s):O(e,s);h.delegationSelector=o?i:null;h.callable=s;h.oneOff=r;h.uidEvent=u;c[u]=h;e.addEventListener(a,h,o)}function G(e,t,i,n,r){const o=L(t[i],n,r);if(!o){return}e.removeEventListener(i,o,Boolean(r));delete t[i][o.uidEvent]}function B(e,t,i,n){const r=t[i]||{};for(const[o,s]of Object.entries(r)){if(o.includes(n)){G(e,t,i,s.callable,s.delegationSelector)}}}function H(e){e=e.replace(E,"");return k[e]||e}const z={on(e,t,i,n){$(e,t,i,n,false)},one(e,t,i,n){$(e,t,i,n,true)},off(e,t,i,n){if(typeof t!=="string"||!e){return}const[r,o,s]=F(t,i,n);const a=s!==t;const l=I(e);const c=l[s]||{};const d=t.startsWith(".");if(typeof o!=="undefined"){if(!Object.keys(c).length){return}G(e,l,s,o,r?i:null);return}if(d){for(const i of Object.keys(l)){B(e,l,i,t.slice(1))}}for(const[i,n]of Object.entries(c)){const r=i.replace(T,"");if(!a||t.includes(r)){G(e,l,s,n.callable,n.delegationSelector)}}},trigger(e,t,i){if(typeof t!=="string"||!e){return null}const n=v();const r=H(t);const o=t!==r;let s=null;let a=true;let l=true;let c=false;if(o&&n){s=n.Event(t,i);n(e).trigger(s);a=!s.isPropagationStopped();l=!s.isImmediatePropagationStopped();c=s.isDefaultPrevented()}const d=W(new Event(t,{bubbles:a,cancelable:true}),i);if(c){d.preventDefault()}if(l){e.dispatchEvent(d)}if(d.defaultPrevented&&s){s.preventDefault()}return d}};function W(e,t={}){for(const[i,n]of Object.entries(t)){try{e[i]=n}catch(t){Object.defineProperty(e,i,{configurable:true,get(){return n}})}}return e}function V(e){if(e==="true"){return true}if(e==="false"){return false}if(e===Number(e).toString()){return Number(e)}if(e===""||e==="null"){return null}if(typeof e!=="string"){return e}try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function j(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}const U={setDataAttribute(e,t,i){e.setAttribute(`data-bs-${j(t)}`,i)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${j(t)}`)},getDataAttributes(e){if(!e){return{}}const t={};const i=Object.keys(e.dataset).filter((e=>e.startsWith("bs")&&!e.startsWith("bsConfig")));for(const n of i){let i=n.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length);t[i]=V(e.dataset[n])}return t},getDataAttribute(e,t){return V(e.getAttribute(`data-bs-${j(t)}`))}};class Y{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){e=this._mergeConfigObj(e);e=this._configAfterMerge(e);this._typeCheckConfig(e);return e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const i=d(t)?U.getDataAttribute(t,"config"):{};return{...this.constructor.Default,...typeof i==="object"?i:{},...d(t)?U.getDataAttributes(t):{},...typeof e==="object"?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[i,n]of Object.entries(t)){const t=e[i];const r=d(t)?"element":s(t);if(!new RegExp(n).test(r)){throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${r}" but expected type "${n}".`)}}}}const q="5.3.3";class K extends Y{constructor(e,i){super();e=u(e);if(!e){return}this._element=e;this._config=this._getConfig(i);t.set(this._element,this.constructor.DATA_KEY,this)}dispose(){t.remove(this._element,this.constructor.DATA_KEY);z.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this)){this[e]=null}}_queueCallback(e,t,i=true){S(e,t,i)}_getConfig(e){e=this._mergeConfigObj(e,this._element);e=this._configAfterMerge(e);this._typeCheckConfig(e);return e}static getInstance(e){return t.get(u(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,typeof t==="object"?t:null)}static get VERSION(){return q}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const X=e=>{let t=e.getAttribute("data-bs-target");if(!t||t==="#"){let i=e.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith(".")){return null}if(i.includes("#")&&!i.startsWith("#")){i=`#${i.split("#")[1]}`}t=i&&i!=="#"?i.trim():null}return t?t.split(",").map((e=>o(e))).join(","):null};const Z={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter((e=>e.matches(t)))},parents(e,t){const i=[];let n=e.parentNode.closest(t);while(n){i.push(n);n=n.parentNode.closest(t)}return i},prev(e,t){let i=e.previousElementSibling;while(i){if(i.matches(t)){return[i]}i=i.previousElementSibling}return[]},next(e,t){let i=e.nextElementSibling;while(i){if(i.matches(t)){return[i]}i=i.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((e=>`${e}:not([tabindex^="-"])`)).join(",");return this.find(t,e).filter((e=>!p(e)&&h(e)))},getSelectorFromElement(e){const t=X(e);if(t){return Z.findOne(t)?t:null}return null},getElementFromSelector(e){const t=X(e);return t?Z.findOne(t):null},getMultipleElementsFromSelector(e){const t=X(e);return t?Z.find(t):[]}};const Q=(e,t="hide")=>{const i=`click.dismiss${e.EVENT_KEY}`;const n=e.NAME;z.on(document,i,`[data-bs-dismiss="${n}"]`,(function(i){if(["A","AREA"].includes(this.tagName)){i.preventDefault()}if(p(this)){return}const r=Z.getElementFromSelector(this)||this.closest(`.${n}`);const o=e.getOrCreateInstance(r);o[t]()}))};const J="alert";const ee="bs.alert";const te=`.${ee}`;const ie=`close${te}`;const ne=`closed${te}`;const re="fade";const oe="show";class se extends K{static get NAME(){return J}close(){const e=z.trigger(this._element,ie);if(e.defaultPrevented){return}this._element.classList.remove(oe);const t=this._element.classList.contains(re);this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove();z.trigger(this._element,ne);this.dispose()}static jQueryInterface(e){return this.each((function(){const t=se.getOrCreateInstance(this);if(typeof e!=="string"){return}if(t[e]===undefined||e.startsWith("_")||e==="constructor"){throw new TypeError(`No method named "${e}"`)}t[e](this)}))}}Q(se,"close");C(se);const ae="button";const le="bs.button";const ce=`.${le}`;const de=".data-api";const ue="active";const he='[data-bs-toggle="button"]';const pe=`click${ce}${de}`;class fe extends K{static get NAME(){return ae}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(ue))}static jQueryInterface(e){return this.each((function(){const t=fe.getOrCreateInstance(this);if(e==="toggle"){t[e]()}}))}}z.on(document,pe,he,(e=>{e.preventDefault();const t=e.target.closest(he);const i=fe.getOrCreateInstance(t);i.toggle()}));C(fe);const ge="swipe";const me=".bs.swipe";const ve=`touchstart${me}`;const be=`touchmove${me}`;const ye=`touchend${me}`;const we=`pointerdown${me}`;const Ce=`pointerup${me}`;const _e="touch";const Se="pen";const Ae="pointer-event";const xe=40;const Ee={endCallback:null,leftCallback:null,rightCallback:null};const Te={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class De extends Y{constructor(e,t){super();this._element=e;if(!e||!De.isSupported()){return}this._config=this._getConfig(t);this._deltaX=0;this._supportPointerEvents=Boolean(window.PointerEvent);this._initEvents()}static get Default(){return Ee}static get DefaultType(){return Te}static get NAME(){return ge}dispose(){z.off(this._element,me)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}if(this._eventIsPointerPenTouch(e)){this._deltaX=e.clientX}}_end(e){if(this._eventIsPointerPenTouch(e)){this._deltaX=e.clientX-this._deltaX}this._handleSwipe();_(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=xe){return}const t=e/this._deltaX;this._deltaX=0;if(!t){return}_(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){if(this._supportPointerEvents){z.on(this._element,we,(e=>this._start(e)));z.on(this._element,Ce,(e=>this._end(e)));this._element.classList.add(Ae)}else{z.on(this._element,ve,(e=>this._start(e)));z.on(this._element,be,(e=>this._move(e)));z.on(this._element,ye,(e=>this._end(e)))}}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===Se||e.pointerType===_e)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Me="carousel";const ke="bs.carousel";const Pe=`.${ke}`;const Re=".data-api";const Ie="ArrowLeft";const Oe="ArrowRight";const Ne=500;const Le="next";const Fe="prev";const $e="left";const Ge="right";const Be=`slide${Pe}`;const He=`slid${Pe}`;const ze=`keydown${Pe}`;const We=`mouseenter${Pe}`;const Ve=`mouseleave${Pe}`;const je=`dragstart${Pe}`;const Ue=`load${Pe}${Re}`;const Ye=`click${Pe}${Re}`;const qe="carousel";const Ke="active";const Xe="slide";const Ze="carousel-item-end";const Qe="carousel-item-start";const Je="carousel-item-next";const et="carousel-item-prev";const tt=".active";const it=".carousel-item";const nt=tt+it;const rt=".carousel-item img";const ot=".carousel-indicators";const st="[data-bs-slide], [data-bs-slide-to]";const at='[data-bs-ride="carousel"]';const lt={[Ie]:Ge,[Oe]:$e};const ct={interval:5e3,keyboard:true,pause:"hover",ride:false,touch:true,wrap:true};const dt={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ut extends K{constructor(e,t){super(e,t);this._interval=null;this._activeElement=null;this._isSliding=false;this.touchTimeout=null;this._swipeHelper=null;this._indicatorsElement=Z.findOne(ot,this._element);this._addEventListeners();if(this._config.ride===qe){this.cycle()}}static get Default(){return ct}static get DefaultType(){return dt}static get NAME(){return Me}next(){this._slide(Le)}nextWhenVisible(){if(!document.hidden&&h(this._element)){this.next()}}prev(){this._slide(Fe)}pause(){if(this._isSliding){c(this._element)}this._clearInterval()}cycle(){this._clearInterval();this._updateInterval();this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){if(!this._config.ride){return}if(this._isSliding){z.one(this._element,He,(()=>this.cycle()));return}this.cycle()}to(e){const t=this._getItems();if(e>t.length-1||e<0){return}if(this._isSliding){z.one(this._element,He,(()=>this.to(e)));return}const i=this._getItemIndex(this._getActive());if(i===e){return}const n=e>i?Le:Fe;this._slide(n,t[e])}dispose(){if(this._swipeHelper){this._swipeHelper.dispose()}super.dispose()}_configAfterMerge(e){e.defaultInterval=e.interval;return e}_addEventListeners(){if(this._config.keyboard){z.on(this._element,ze,(e=>this._keydown(e)))}if(this._config.pause==="hover"){z.on(this._element,We,(()=>this.pause()));z.on(this._element,Ve,(()=>this._maybeEnableCycle()))}if(this._config.touch&&De.isSupported()){this._addTouchEventListeners()}}_addTouchEventListeners(){for(const e of Z.find(rt,this._element)){z.on(e,je,(e=>e.preventDefault()))}const e=()=>{if(this._config.pause!=="hover"){return}this.pause();if(this.touchTimeout){clearTimeout(this.touchTimeout)}this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),Ne+this._config.interval)};const t={leftCallback:()=>this._slide(this._directionToOrder($e)),rightCallback:()=>this._slide(this._directionToOrder(Ge)),endCallback:e};this._swipeHelper=new De(this._element,t)}_keydown(e){if(/input|textarea/i.test(e.target.tagName)){return}const t=lt[e.key];if(t){e.preventDefault();this._slide(this._directionToOrder(t))}}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement){return}const t=Z.findOne(tt,this._indicatorsElement);t.classList.remove(Ke);t.removeAttribute("aria-current");const i=Z.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);if(i){i.classList.add(Ke);i.setAttribute("aria-current","true")}}_updateInterval(){const e=this._activeElement||this._getActive();if(!e){return}const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding){return}const i=this._getActive();const n=e===Le;const r=t||A(this._getItems(),i,n,this._config.wrap);if(r===i){return}const o=this._getItemIndex(r);const s=t=>z.trigger(this._element,t,{relatedTarget:r,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:o});const a=s(Be);if(a.defaultPrevented){return}if(!i||!r){return}const l=Boolean(this._interval);this.pause();this._isSliding=true;this._setActiveIndicatorElement(o);this._activeElement=r;const c=n?Qe:Ze;const d=n?Je:et;r.classList.add(d);m(r);i.classList.add(c);r.classList.add(c);const u=()=>{r.classList.remove(c,d);r.classList.add(Ke);i.classList.remove(Ke,d,c);this._isSliding=false;s(He)};this._queueCallback(u,i,this._isAnimated());if(l){this.cycle()}}_isAnimated(){return this._element.classList.contains(Xe)}_getActive(){return Z.findOne(nt,this._element)}_getItems(){return Z.find(it,this._element)}_clearInterval(){if(this._interval){clearInterval(this._interval);this._interval=null}}_directionToOrder(e){if(w()){return e===$e?Fe:Le}return e===$e?Le:Fe}_orderToDirection(e){if(w()){return e===Fe?$e:Ge}return e===Fe?Ge:$e}static jQueryInterface(e){return this.each((function(){const t=ut.getOrCreateInstance(this,e);if(typeof e==="number"){t.to(e);return}if(typeof e==="string"){if(t[e]===undefined||e.startsWith("_")||e==="constructor"){throw new TypeError(`No method named "${e}"`)}t[e]()}}))}}z.on(document,Ye,st,(function(e){const t=Z.getElementFromSelector(this);if(!t||!t.classList.contains(qe)){return}e.preventDefault();const i=ut.getOrCreateInstance(t);const n=this.getAttribute("data-bs-slide-to");if(n){i.to(n);i._maybeEnableCycle();return}if(U.getDataAttribute(this,"slide")==="next"){i.next();i._maybeEnableCycle();return}i.prev();i._maybeEnableCycle()}));z.on(window,Ue,(()=>{const e=Z.find(at);for(const t of e){ut.getOrCreateInstance(t)}}));C(ut);const ht="collapse";const pt="bs.collapse";const ft=`.${pt}`;const gt=".data-api";const mt=`show${ft}`;const vt=`shown${ft}`;const bt=`hide${ft}`;const yt=`hidden${ft}`;const wt=`click${ft}${gt}`;const Ct="show";const _t="collapse";const St="collapsing";const At="collapsed";const xt=`:scope .${_t} .${_t}`;const Et="collapse-horizontal";const Tt="width";const Dt="height";const Mt=".collapse.show, .collapse.collapsing";const kt='[data-bs-toggle="collapse"]';const Pt={parent:null,toggle:true};const Rt={parent:"(null|element)",toggle:"boolean"};class It extends K{constructor(e,t){super(e,t);this._isTransitioning=false;this._triggerArray=[];const i=Z.find(kt);for(const e of i){const t=Z.getSelectorFromElement(e);const i=Z.find(t).filter((e=>e===this._element));if(t!==null&&i.length){this._triggerArray.push(e)}}this._initializeChildren();if(!this._config.parent){this._addAriaAndCollapsedClass(this._triggerArray,this._isShown())}if(this._config.toggle){this.toggle()}}static get Default(){return Pt}static get DefaultType(){return Rt}static get NAME(){return ht}toggle(){if(this._isShown()){this.hide()}else{this.show()}}show(){if(this._isTransitioning||this._isShown()){return}let e=[];if(this._config.parent){e=this._getFirstLevelChildren(Mt).filter((e=>e!==this._element)).map((e=>It.getOrCreateInstance(e,{toggle:false})))}if(e.length&&e[0]._isTransitioning){return}const t=z.trigger(this._element,mt);if(t.defaultPrevented){return}for(const t of e){t.hide()}const i=this._getDimension();this._element.classList.remove(_t);this._element.classList.add(St);this._element.style[i]=0;this._addAriaAndCollapsedClass(this._triggerArray,true);this._isTransitioning=true;const n=()=>{this._isTransitioning=false;this._element.classList.remove(St);this._element.classList.add(_t,Ct);this._element.style[i]="";z.trigger(this._element,vt)};const r=i[0].toUpperCase()+i.slice(1);const o=`scroll${r}`;this._queueCallback(n,this._element,true);this._element.style[i]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()){return}const e=z.trigger(this._element,bt);if(e.defaultPrevented){return}const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`;m(this._element);this._element.classList.add(St);this._element.classList.remove(_t,Ct);for(const e of this._triggerArray){const t=Z.getElementFromSelector(e);if(t&&!this._isShown(t)){this._addAriaAndCollapsedClass([e],false)}}this._isTransitioning=true;const i=()=>{this._isTransitioning=false;this._element.classList.remove(St);this._element.classList.add(_t);z.trigger(this._element,yt)};this._element.style[t]="";this._queueCallback(i,this._element,true)}_isShown(e=this._element){return e.classList.contains(Ct)}_configAfterMerge(e){e.toggle=Boolean(e.toggle);e.parent=u(e.parent);return e}_getDimension(){return this._element.classList.contains(Et)?Tt:Dt}_initializeChildren(){if(!this._config.parent){return}const e=this._getFirstLevelChildren(kt);for(const t of e){const e=Z.getElementFromSelector(t);if(e){this._addAriaAndCollapsedClass([t],this._isShown(e))}}}_getFirstLevelChildren(e){const t=Z.find(xt,this._config.parent);return Z.find(e,this._config.parent).filter((e=>!t.includes(e)))}_addAriaAndCollapsedClass(e,t){if(!e.length){return}for(const i of e){i.classList.toggle(At,!t);i.setAttribute("aria-expanded",t)}}static jQueryInterface(e){const t={};if(typeof e==="string"&&/show|hide/.test(e)){t.toggle=false}return this.each((function(){const i=It.getOrCreateInstance(this,t);if(typeof e==="string"){if(typeof i[e]==="undefined"){throw new TypeError(`No method named "${e}"`)}i[e]()}}))}}z.on(document,wt,kt,(function(e){if(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A"){e.preventDefault()}for(const e of Z.getMultipleElementsFromSelector(this)){It.getOrCreateInstance(e,{toggle:false}).toggle()}}));C(It);var Ot="top";var Nt="bottom";var Lt="right";var Ft="left";var $t="auto";var Gt=[Ot,Nt,Lt,Ft];var Bt="start";var Ht="end";var zt="clippingParents";var Wt="viewport";var Vt="popper";var jt="reference";var Ut=Gt.reduce((function(e,t){return e.concat([t+"-"+Bt,t+"-"+Ht])}),[]);var Yt=[].concat(Gt,[$t]).reduce((function(e,t){return e.concat([t,t+"-"+Bt,t+"-"+Ht])}),[]);var qt="beforeRead";var Kt="read";var Xt="afterRead";var Zt="beforeMain";var Qt="main";var Jt="afterMain";var ei="beforeWrite";var ti="write";var ii="afterWrite";var ni=[qt,Kt,Xt,Zt,Qt,Jt,ei,ti,ii];function ri(e){return e?(e.nodeName||"").toLowerCase():null}function oi(e){if(e==null){return window}if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t?t.defaultView||window:window}return e}function si(e){var t=oi(e).Element;return e instanceof t||e instanceof Element}function ai(e){var t=oi(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function li(e){if(typeof ShadowRoot==="undefined"){return false}var t=oi(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function ci(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var i=t.styles[e]||{};var n=t.attributes[e]||{};var r=t.elements[e];if(!ai(r)||!ri(r)){return}Object.assign(r.style,i);Object.keys(n).forEach((function(e){var t=n[e];if(t===false){r.removeAttribute(e)}else{r.setAttribute(e,t===true?"":t)}}))}))}function di(e){var t=e.state;var i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,i.popper);t.styles=i;if(t.elements.arrow){Object.assign(t.elements.arrow.style,i.arrow)}return function(){Object.keys(t.elements).forEach((function(e){var n=t.elements[e];var r=t.attributes[e]||{};var o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:i[e]);var s=o.reduce((function(e,t){e[t]="";return e}),{});if(!ai(n)||!ri(n)){return}Object.assign(n.style,s);Object.keys(r).forEach((function(e){n.removeAttribute(e)}))}))}}const ui={name:"applyStyles",enabled:true,phase:"write",fn:ci,effect:di,requires:["computeStyles"]};function hi(e){return e.split("-")[0]}var pi=Math.max;var fi=Math.min;var gi=Math.round;function mi(){var e=navigator.userAgentData;if(e!=null&&e.brands&&Array.isArray(e.brands)){return e.brands.map((function(e){return e.brand+"/"+e.version})).join(" ")}return navigator.userAgent}function vi(){return!/^((?!chrome|android).)*safari/i.test(mi())}function bi(e,t,i){if(t===void 0){t=false}if(i===void 0){i=false}var n=e.getBoundingClientRect();var r=1;var o=1;if(t&&ai(e)){r=e.offsetWidth>0?gi(n.width)/e.offsetWidth||1:1;o=e.offsetHeight>0?gi(n.height)/e.offsetHeight||1:1}var s=si(e)?oi(e):window,a=s.visualViewport;var l=!vi()&&i;var c=(n.left+(l&&a?a.offsetLeft:0))/r;var d=(n.top+(l&&a?a.offsetTop:0))/o;var u=n.width/r;var h=n.height/o;return{width:u,height:h,top:d,right:c+u,bottom:d+h,left:c,x:c,y:d}}function yi(e){var t=bi(e);var i=e.offsetWidth;var n=e.offsetHeight;if(Math.abs(t.width-i)<=1){i=t.width}if(Math.abs(t.height-n)<=1){n=t.height}return{x:e.offsetLeft,y:e.offsetTop,width:i,height:n}}function wi(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t)){return true}else if(i&&li(i)){var n=t;do{if(n&&e.isSameNode(n)){return true}n=n.parentNode||n.host}while(n)}return false}function Ci(e){return oi(e).getComputedStyle(e)}function _i(e){return["table","td","th"].indexOf(ri(e))>=0}function Si(e){return((si(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ai(e){if(ri(e)==="html"){return e}return e.assignedSlot||e.parentNode||(li(e)?e.host:null)||Si(e)}function xi(e){if(!ai(e)||Ci(e).position==="fixed"){return null}return e.offsetParent}function Ei(e){var t=/firefox/i.test(mi());var i=/Trident/i.test(mi());if(i&&ai(e)){var n=Ci(e);if(n.position==="fixed"){return null}}var r=Ai(e);if(li(r)){r=r.host}while(ai(r)&&["html","body"].indexOf(ri(r))<0){var o=Ci(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none"){return r}else{r=r.parentNode}}return null}function Ti(e){var t=oi(e);var i=xi(e);while(i&&_i(i)&&Ci(i).position==="static"){i=xi(i)}if(i&&(ri(i)==="html"||ri(i)==="body"&&Ci(i).position==="static")){return t}return i||Ei(e)||t}function Di(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Mi(e,t,i){return pi(e,fi(t,i))}function ki(e,t,i){var n=Mi(e,t,i);return n>i?i:n}function Pi(){return{top:0,right:0,bottom:0,left:0}}function Ri(e){return Object.assign({},Pi(),e)}function Ii(e,t){return t.reduce((function(t,i){t[i]=e;return t}),{})}var Oi=function e(t,i){t=typeof t==="function"?t(Object.assign({},i.rects,{placement:i.placement})):t;return Ri(typeof t!=="number"?t:Ii(t,Gt))};function Ni(e){var t;var i=e.state,n=e.name,r=e.options;var o=i.elements.arrow;var s=i.modifiersData.popperOffsets;var a=hi(i.placement);var l=Di(a);var c=[Ft,Lt].indexOf(a)>=0;var d=c?"height":"width";if(!o||!s){return}var u=Oi(r.padding,i);var h=yi(o);var p=l==="y"?Ot:Ft;var f=l==="y"?Nt:Lt;var g=i.rects.reference[d]+i.rects.reference[l]-s[l]-i.rects.popper[d];var m=s[l]-i.rects.reference[l];var v=Ti(o);var b=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0;var y=g/2-m/2;var w=u[p];var C=b-h[d]-u[f];var _=b/2-h[d]/2+y;var S=Mi(w,_,C);var A=l;i.modifiersData[n]=(t={},t[A]=S,t.centerOffset=S-_,t)}function Li(e){var t=e.state,i=e.options;var n=i.element,r=n===void 0?"[data-popper-arrow]":n;if(r==null){return}if(typeof r==="string"){r=t.elements.popper.querySelector(r);if(!r){return}}if(!wi(t.elements.popper,r)){return}t.elements.arrow=r}const Fi={name:"arrow",enabled:true,phase:"main",fn:Ni,effect:Li,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function $i(e){return e.split("-")[1]}var Gi={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Bi(e,t){var i=e.x,n=e.y;var r=t.devicePixelRatio||1;return{x:gi(i*r)/r||0,y:gi(n*r)/r||0}}function Hi(e){var t;var i=e.popper,n=e.popperRect,r=e.placement,o=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,u=e.isFixed;var h=s.x,p=h===void 0?0:h,f=s.y,g=f===void 0?0:f;var m=typeof d==="function"?d({x:p,y:g}):{x:p,y:g};p=m.x;g=m.y;var v=s.hasOwnProperty("x");var b=s.hasOwnProperty("y");var y=Ft;var w=Ot;var C=window;if(c){var _=Ti(i);var S="clientHeight";var A="clientWidth";if(_===oi(i)){_=Si(i);if(Ci(_).position!=="static"&&a==="absolute"){S="scrollHeight";A="scrollWidth"}}_=_;if(r===Ot||(r===Ft||r===Lt)&&o===Ht){w=Nt;var x=u&&_===C&&C.visualViewport?C.visualViewport.height:_[S];g-=x-n.height;g*=l?1:-1}if(r===Ft||(r===Ot||r===Nt)&&o===Ht){y=Lt;var E=u&&_===C&&C.visualViewport?C.visualViewport.width:_[A];p-=E-n.width;p*=l?1:-1}}var T=Object.assign({position:a},c&&Gi);var D=d===true?Bi({x:p,y:g},oi(i)):{x:p,y:g};p=D.x;g=D.y;if(l){var M;return Object.assign({},T,(M={},M[w]=b?"0":"",M[y]=v?"0":"",M.transform=(C.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",M))}return Object.assign({},T,(t={},t[w]=b?g+"px":"",t[y]=v?p+"px":"",t.transform="",t))}function zi(e){var t=e.state,i=e.options;var n=i.gpuAcceleration,r=n===void 0?true:n,o=i.adaptive,s=o===void 0?true:o,a=i.roundOffsets,l=a===void 0?true:a;var c={placement:hi(t.placement),variation:$i(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};if(t.modifiersData.popperOffsets!=null){t.styles.popper=Object.assign({},t.styles.popper,Hi(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))}if(t.modifiersData.arrow!=null){t.styles.arrow=Object.assign({},t.styles.arrow,Hi(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:false,roundOffsets:l})))}t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Wi={name:"computeStyles",enabled:true,phase:"beforeWrite",fn:zi,data:{}};var Vi={passive:true};function ji(e){var t=e.state,i=e.instance,n=e.options;var r=n.scroll,o=r===void 0?true:r,s=n.resize,a=s===void 0?true:s;var l=oi(t.elements.popper);var c=[].concat(t.scrollParents.reference,t.scrollParents.popper);if(o){c.forEach((function(e){e.addEventListener("scroll",i.update,Vi)}))}if(a){l.addEventListener("resize",i.update,Vi)}return function(){if(o){c.forEach((function(e){e.removeEventListener("scroll",i.update,Vi)}))}if(a){l.removeEventListener("resize",i.update,Vi)}}}const Ui={name:"eventListeners",enabled:true,phase:"write",fn:function e(){},effect:ji,data:{}};var Yi={left:"right",right:"left",bottom:"top",top:"bottom"};function qi(e){return e.replace(/left|right|bottom|top/g,(function(e){return Yi[e]}))}var Ki={start:"end",end:"start"};function Xi(e){return e.replace(/start|end/g,(function(e){return Ki[e]}))}function Zi(e){var t=oi(e);var i=t.pageXOffset;var n=t.pageYOffset;return{scrollLeft:i,scrollTop:n}}function Qi(e){return bi(Si(e)).left+Zi(e).scrollLeft}function Ji(e,t){var i=oi(e);var n=Si(e);var r=i.visualViewport;var o=n.clientWidth;var s=n.clientHeight;var a=0;var l=0;if(r){o=r.width;s=r.height;var c=vi();if(c||!c&&t==="fixed"){a=r.offsetLeft;l=r.offsetTop}}return{width:o,height:s,x:a+Qi(e),y:l}}function en(e){var t;var i=Si(e);var n=Zi(e);var r=(t=e.ownerDocument)==null?void 0:t.body;var o=pi(i.scrollWidth,i.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0);var s=pi(i.scrollHeight,i.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0);var a=-n.scrollLeft+Qi(e);var l=-n.scrollTop;if(Ci(r||i).direction==="rtl"){a+=pi(i.clientWidth,r?r.clientWidth:0)-o}return{width:o,height:s,x:a,y:l}}function tn(e){var t=Ci(e),i=t.overflow,n=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+r+n)}function nn(e){if(["html","body","#document"].indexOf(ri(e))>=0){return e.ownerDocument.body}if(ai(e)&&tn(e)){return e}return nn(Ai(e))}function rn(e,t){var i;if(t===void 0){t=[]}var n=nn(e);var r=n===((i=e.ownerDocument)==null?void 0:i.body);var o=oi(n);var s=r?[o].concat(o.visualViewport||[],tn(n)?n:[]):n;var a=t.concat(s);return r?a:a.concat(rn(Ai(s)))}function on(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function sn(e,t){var i=bi(e,false,t==="fixed");i.top=i.top+e.clientTop;i.left=i.left+e.clientLeft;i.bottom=i.top+e.clientHeight;i.right=i.left+e.clientWidth;i.width=e.clientWidth;i.height=e.clientHeight;i.x=i.left;i.y=i.top;return i}function an(e,t,i){return t===Wt?on(Ji(e,i)):si(t)?sn(t,i):on(en(Si(e)))}function ln(e){var t=rn(Ai(e));var i=["absolute","fixed"].indexOf(Ci(e).position)>=0;var n=i&&ai(e)?Ti(e):e;if(!si(n)){return[]}return t.filter((function(e){return si(e)&&wi(e,n)&&ri(e)!=="body"}))}function cn(e,t,i,n){var r=t==="clippingParents"?ln(e):[].concat(t);var o=[].concat(r,[i]);var s=o[0];var a=o.reduce((function(t,i){var r=an(e,i,n);t.top=pi(r.top,t.top);t.right=fi(r.right,t.right);t.bottom=fi(r.bottom,t.bottom);t.left=pi(r.left,t.left);return t}),an(e,s,n));a.width=a.right-a.left;a.height=a.bottom-a.top;a.x=a.left;a.y=a.top;return a}function dn(e){var t=e.reference,i=e.element,n=e.placement;var r=n?hi(n):null;var o=n?$i(n):null;var s=t.x+t.width/2-i.width/2;var a=t.y+t.height/2-i.height/2;var l;switch(r){case Ot:l={x:s,y:t.y-i.height};break;case Nt:l={x:s,y:t.y+t.height};break;case Lt:l={x:t.x+t.width,y:a};break;case Ft:l={x:t.x-i.width,y:a};break;default:l={x:t.x,y:t.y}}var c=r?Di(r):null;if(c!=null){var d=c==="y"?"height":"width";switch(o){case Bt:l[c]=l[c]-(t[d]/2-i[d]/2);break;case Ht:l[c]=l[c]+(t[d]/2-i[d]/2);break}}return l}function un(e,t){if(t===void 0){t={}}var i=t,n=i.placement,r=n===void 0?e.placement:n,o=i.strategy,s=o===void 0?e.strategy:o,a=i.boundary,l=a===void 0?zt:a,c=i.rootBoundary,d=c===void 0?Wt:c,u=i.elementContext,h=u===void 0?Vt:u,p=i.altBoundary,f=p===void 0?false:p,g=i.padding,m=g===void 0?0:g;var v=Ri(typeof m!=="number"?m:Ii(m,Gt));var b=h===Vt?jt:Vt;var y=e.rects.popper;var w=e.elements[f?b:h];var C=cn(si(w)?w:w.contextElement||Si(e.elements.popper),l,d,s);var _=bi(e.elements.reference);var S=dn({reference:_,element:y,strategy:"absolute",placement:r});var A=on(Object.assign({},y,S));var x=h===Vt?A:_;var E={top:C.top-x.top+v.top,bottom:x.bottom-C.bottom+v.bottom,left:C.left-x.left+v.left,right:x.right-C.right+v.right};var T=e.modifiersData.offset;if(h===Vt&&T){var D=T[r];Object.keys(E).forEach((function(e){var t=[Lt,Nt].indexOf(e)>=0?1:-1;var i=[Ot,Nt].indexOf(e)>=0?"y":"x";E[e]+=D[i]*t}))}return E}function hn(e,t){if(t===void 0){t={}}var i=t,n=i.placement,r=i.boundary,o=i.rootBoundary,s=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,c=l===void 0?Yt:l;var d=$i(n);var u=d?a?Ut:Ut.filter((function(e){return $i(e)===d})):Gt;var h=u.filter((function(e){return c.indexOf(e)>=0}));if(h.length===0){h=u}var p=h.reduce((function(t,i){t[i]=un(e,{placement:i,boundary:r,rootBoundary:o,padding:s})[hi(i)];return t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}function pn(e){if(hi(e)===$t){return[]}var t=qi(e);return[Xi(e),t,Xi(t)]}function fn(e){var t=e.state,i=e.options,n=e.name;if(t.modifiersData[n]._skip){return}var r=i.mainAxis,o=r===void 0?true:r,s=i.altAxis,a=s===void 0?true:s,l=i.fallbackPlacements,c=i.padding,d=i.boundary,u=i.rootBoundary,h=i.altBoundary,p=i.flipVariations,f=p===void 0?true:p,g=i.allowedAutoPlacements;var m=t.options.placement;var v=hi(m);var b=v===m;var y=l||(b||!f?[qi(m)]:pn(m));var w=[m].concat(y).reduce((function(e,i){return e.concat(hi(i)===$t?hn(t,{placement:i,boundary:d,rootBoundary:u,padding:c,flipVariations:f,allowedAutoPlacements:g}):i)}),[]);var C=t.rects.reference;var _=t.rects.popper;var S=new Map;var A=true;var x=w[0];for(var E=0;E<w.length;E++){var T=w[E];var D=hi(T);var M=$i(T)===Bt;var k=[Ot,Nt].indexOf(D)>=0;var P=k?"width":"height";var R=un(t,{placement:T,boundary:d,rootBoundary:u,altBoundary:h,padding:c});var I=k?M?Lt:Ft:M?Nt:Ot;if(C[P]>_[P]){I=qi(I)}var O=qi(I);var N=[];if(o){N.push(R[D]<=0)}if(a){N.push(R[I]<=0,R[O]<=0)}if(N.every((function(e){return e}))){x=T;A=false;break}S.set(T,N)}if(A){var L=f?3:1;var F=function e(t){var i=w.find((function(e){var i=S.get(e);if(i){return i.slice(0,t).every((function(e){return e}))}}));if(i){x=i;return"break"}};for(var $=L;$>0;$--){var G=F($);if(G==="break")break}}if(t.placement!==x){t.modifiersData[n]._skip=true;t.placement=x;t.reset=true}}const gn={name:"flip",enabled:true,phase:"main",fn:fn,requiresIfExists:["offset"],data:{_skip:false}};function mn(e,t,i){if(i===void 0){i={x:0,y:0}}return{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function vn(e){return[Ot,Lt,Nt,Ft].some((function(t){return e[t]>=0}))}function bn(e){var t=e.state,i=e.name;var n=t.rects.reference;var r=t.rects.popper;var o=t.modifiersData.preventOverflow;var s=un(t,{elementContext:"reference"});var a=un(t,{altBoundary:true});var l=mn(s,n);var c=mn(a,r,o);var d=vn(l);var u=vn(c);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u};t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}const yn={name:"hide",enabled:true,phase:"main",requiresIfExists:["preventOverflow"],fn:bn};function wn(e,t,i){var n=hi(e);var r=[Ft,Ot].indexOf(n)>=0?-1:1;var o=typeof i==="function"?i(Object.assign({},t,{placement:e})):i,s=o[0],a=o[1];s=s||0;a=(a||0)*r;return[Ft,Lt].indexOf(n)>=0?{x:a,y:s}:{x:s,y:a}}function Cn(e){var t=e.state,i=e.options,n=e.name;var r=i.offset,o=r===void 0?[0,0]:r;var s=Yt.reduce((function(e,i){e[i]=wn(i,t.rects,o);return e}),{});var a=s[t.placement],l=a.x,c=a.y;if(t.modifiersData.popperOffsets!=null){t.modifiersData.popperOffsets.x+=l;t.modifiersData.popperOffsets.y+=c}t.modifiersData[n]=s}const _n={name:"offset",enabled:true,phase:"main",requires:["popperOffsets"],fn:Cn};function Sn(e){var t=e.state,i=e.name;t.modifiersData[i]=dn({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const An={name:"popperOffsets",enabled:true,phase:"read",fn:Sn,data:{}};function xn(e){return e==="x"?"y":"x"}function En(e){var t=e.state,i=e.options,n=e.name;var r=i.mainAxis,o=r===void 0?true:r,s=i.altAxis,a=s===void 0?false:s,l=i.boundary,c=i.rootBoundary,d=i.altBoundary,u=i.padding,h=i.tether,p=h===void 0?true:h,f=i.tetherOffset,g=f===void 0?0:f;var m=un(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:d});var v=hi(t.placement);var b=$i(t.placement);var y=!b;var w=Di(v);var C=xn(w);var _=t.modifiersData.popperOffsets;var S=t.rects.reference;var A=t.rects.popper;var x=typeof g==="function"?g(Object.assign({},t.rects,{placement:t.placement})):g;var E=typeof x==="number"?{mainAxis:x,altAxis:x}:Object.assign({mainAxis:0,altAxis:0},x);var T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null;var D={x:0,y:0};if(!_){return}if(o){var M;var k=w==="y"?Ot:Ft;var P=w==="y"?Nt:Lt;var R=w==="y"?"height":"width";var I=_[w];var O=I+m[k];var N=I-m[P];var L=p?-A[R]/2:0;var F=b===Bt?S[R]:A[R];var $=b===Bt?-A[R]:-S[R];var G=t.elements.arrow;var B=p&&G?yi(G):{width:0,height:0};var H=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Pi();var z=H[k];var W=H[P];var V=Mi(0,S[R],B[R]);var j=y?S[R]/2-L-V-z-E.mainAxis:F-V-z-E.mainAxis;var U=y?-S[R]/2+L+V+W+E.mainAxis:$+V+W+E.mainAxis;var Y=t.elements.arrow&&Ti(t.elements.arrow);var q=Y?w==="y"?Y.clientTop||0:Y.clientLeft||0:0;var K=(M=T==null?void 0:T[w])!=null?M:0;var X=I+j-K-q;var Z=I+U-K;var Q=Mi(p?fi(O,X):O,I,p?pi(N,Z):N);_[w]=Q;D[w]=Q-I}if(a){var J;var ee=w==="x"?Ot:Ft;var te=w==="x"?Nt:Lt;var ie=_[C];var ne=C==="y"?"height":"width";var re=ie+m[ee];var oe=ie-m[te];var se=[Ot,Ft].indexOf(v)!==-1;var ae=(J=T==null?void 0:T[C])!=null?J:0;var le=se?re:ie-S[ne]-A[ne]-ae+E.altAxis;var ce=se?ie+S[ne]+A[ne]-ae-E.altAxis:oe;var de=p&&se?ki(le,ie,ce):Mi(p?le:re,ie,p?ce:oe);_[C]=de;D[C]=de-ie}t.modifiersData[n]=D}const Tn={name:"preventOverflow",enabled:true,phase:"main",fn:En,requiresIfExists:["offset"]};function Dn(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Mn(e){if(e===oi(e)||!ai(e)){return Zi(e)}else{return Dn(e)}}function kn(e){var t=e.getBoundingClientRect();var i=gi(t.width)/e.offsetWidth||1;var n=gi(t.height)/e.offsetHeight||1;return i!==1||n!==1}function Pn(e,t,i){if(i===void 0){i=false}var n=ai(t);var r=ai(t)&&kn(t);var o=Si(t);var s=bi(e,r,i);var a={scrollLeft:0,scrollTop:0};var l={x:0,y:0};if(n||!n&&!i){if(ri(t)!=="body"||tn(o)){a=Mn(t)}if(ai(t)){l=bi(t,true);l.x+=t.clientLeft;l.y+=t.clientTop}else if(o){l.x=Qi(o)}}return{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function Rn(e){var t=new Map;var i=new Set;var n=[];e.forEach((function(e){t.set(e.name,e)}));function r(e){i.add(e.name);var o=[].concat(e.requires||[],e.requiresIfExists||[]);o.forEach((function(e){if(!i.has(e)){var n=t.get(e);if(n){r(n)}}}));n.push(e)}e.forEach((function(e){if(!i.has(e.name)){r(e)}}));return n}function In(e){var t=Rn(e);return ni.reduce((function(e,i){return e.concat(t.filter((function(e){return e.phase===i})))}),[])}function On(e){var t;return function(){if(!t){t=new Promise((function(i){Promise.resolve().then((function(){t=undefined;i(e())}))}))}return t}}function Nn(e){var t=e.reduce((function(e,t){var i=e[t.name];e[t.name]=i?Object.assign({},i,t,{options:Object.assign({},i.options,t.options),data:Object.assign({},i.data,t.data)}):t;return e}),{});return Object.keys(t).map((function(e){return t[e]}))}var Ln={placement:"bottom",modifiers:[],strategy:"absolute"};function Fn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++){t[i]=arguments[i]}return!t.some((function(e){return!(e&&typeof e.getBoundingClientRect==="function")}))}function $n(e){if(e===void 0){e={}}var t=e,i=t.defaultModifiers,n=i===void 0?[]:i,r=t.defaultOptions,o=r===void 0?Ln:r;return function e(t,i,r){if(r===void 0){r=o}var s={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ln,o),modifiersData:{},elements:{reference:t,popper:i},attributes:{},styles:{}};var a=[];var l=false;var c={state:s,setOptions:function e(r){var a=typeof r==="function"?r(s.options):r;u();s.options=Object.assign({},o,s.options,a);s.scrollParents={reference:si(t)?rn(t):t.contextElement?rn(t.contextElement):[],popper:rn(i)};var l=In(Nn([].concat(n,s.options.modifiers)));s.orderedModifiers=l.filter((function(e){return e.enabled}));d();return c.update()},forceUpdate:function e(){if(l){return}var t=s.elements,i=t.reference,n=t.popper;if(!Fn(i,n)){return}s.rects={reference:Pn(i,Ti(n),s.options.strategy==="fixed"),popper:yi(n)};s.reset=false;s.placement=s.options.placement;s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<s.orderedModifiers.length;r++){if(s.reset===true){s.reset=false;r=-1;continue}var o=s.orderedModifiers[r],a=o.fn,d=o.options,u=d===void 0?{}:d,h=o.name;if(typeof a==="function"){s=a({state:s,options:u,name:h,instance:c})||s}}},update:On((function(){return new Promise((function(e){c.forceUpdate();e(s)}))})),destroy:function e(){u();l=true}};if(!Fn(t,i)){return c}c.setOptions(r).then((function(e){if(!l&&r.onFirstUpdate){r.onFirstUpdate(e)}}));function d(){s.orderedModifiers.forEach((function(e){var t=e.name,i=e.options,n=i===void 0?{}:i,r=e.effect;if(typeof r==="function"){var o=r({state:s,name:t,instance:c,options:n});var l=function e(){};a.push(o||l)}}))}function u(){a.forEach((function(e){return e()}));a=[]}return c}}var Gn=$n();var Bn=[Ui,An,Wi,ui];var Hn=$n({defaultModifiers:Bn});var zn=[Ui,An,Wi,ui,_n,gn,Tn,Fi,yn];var Wn=$n({defaultModifiers:zn});const Vn=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Jt,afterRead:Xt,afterWrite:ii,applyStyles:ui,arrow:Fi,auto:$t,basePlacements:Gt,beforeMain:Zt,beforeRead:qt,beforeWrite:ei,bottom:Nt,clippingParents:zt,computeStyles:Wi,createPopper:Wn,createPopperBase:Gn,createPopperLite:Hn,detectOverflow:un,end:Ht,eventListeners:Ui,flip:gn,hide:yn,left:Ft,main:Qt,modifierPhases:ni,offset:_n,placements:Yt,popper:Vt,popperGenerator:$n,popperOffsets:An,preventOverflow:Tn,read:Kt,reference:jt,right:Lt,start:Bt,top:Ot,variationPlacements:Ut,viewport:Wt,write:ti},Symbol.toStringTag,{value:"Module"}));const jn="dropdown";const Un="bs.dropdown";const Yn=`.${Un}`;const qn=".data-api";const Kn="Escape";const Xn="Tab";const Zn="ArrowUp";const Qn="ArrowDown";const Jn=2;const er=`hide${Yn}`;const tr=`hidden${Yn}`;const ir=`show${Yn}`;const nr=`shown${Yn}`;const rr=`click${Yn}${qn}`;const or=`keydown${Yn}${qn}`;const sr=`keyup${Yn}${qn}`;const ar="show";const lr="dropup";const cr="dropend";const dr="dropstart";const ur="dropup-center";const hr="dropdown-center";const pr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)';const fr=`${pr}.${ar}`;const gr=".dropdown-menu";const mr=".navbar";const vr=".navbar-nav";const br=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)";const yr=w()?"top-end":"top-start";const wr=w()?"top-start":"top-end";const Cr=w()?"bottom-end":"bottom-start";const _r=w()?"bottom-start":"bottom-end";const Sr=w()?"left-start":"right-start";const Ar=w()?"right-start":"left-start";const xr="top";const Er="bottom";const Tr={autoClose:true,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"};const Dr={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Mr extends K{constructor(e,t){super(e,t);this._popper=null;this._parent=this._element.parentNode;this._menu=Z.next(this._element,gr)[0]||Z.prev(this._element,gr)[0]||Z.findOne(gr,this._parent);this._inNavbar=this._detectNavbar()}static get Default(){return Tr}static get DefaultType(){return Dr}static get NAME(){return jn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(p(this._element)||this._isShown()){return}const e={relatedTarget:this._element};const t=z.trigger(this._element,ir,e);if(t.defaultPrevented){return}this._createPopper();if("ontouchstart"in document.documentElement&&!this._parent.closest(vr)){for(const e of[].concat(...document.body.children)){z.on(e,"mouseover",g)}}this._element.focus();this._element.setAttribute("aria-expanded",true);this._menu.classList.add(ar);this._element.classList.add(ar);z.trigger(this._element,nr,e)}hide(){if(p(this._element)||!this._isShown()){return}const e={relatedTarget:this._element};this._completeHide(e)}dispose(){if(this._popper){this._popper.destroy()}super.dispose()}update(){this._inNavbar=this._detectNavbar();if(this._popper){this._popper.update()}}_completeHide(e){const t=z.trigger(this._element,er,e);if(t.defaultPrevented){return}if("ontouchstart"in document.documentElement){for(const e of[].concat(...document.body.children)){z.off(e,"mouseover",g)}}if(this._popper){this._popper.destroy()}this._menu.classList.remove(ar);this._element.classList.remove(ar);this._element.setAttribute("aria-expanded","false");U.removeDataAttribute(this._menu,"popper");z.trigger(this._element,tr,e)}_getConfig(e){e=super._getConfig(e);if(typeof e.reference==="object"&&!d(e.reference)&&typeof e.reference.getBoundingClientRect!=="function"){throw new TypeError(`${jn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`)}return e}_createPopper(){if(typeof Vn==="undefined"){throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)")}let e=this._element;if(this._config.reference==="parent"){e=this._parent}else if(d(this._config.reference)){e=u(this._config.reference)}else if(typeof this._config.reference==="object"){e=this._config.reference}const t=this._getPopperConfig();this._popper=Wn(e,this._menu,t)}_isShown(){return this._menu.classList.contains(ar)}_getPlacement(){const e=this._parent;if(e.classList.contains(cr)){return Sr}if(e.classList.contains(dr)){return Ar}if(e.classList.contains(ur)){return xr}if(e.classList.contains(hr)){return Er}const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";if(e.classList.contains(lr)){return t?wr:yr}return t?_r:Cr}_detectNavbar(){return this._element.closest(mr)!==null}_getOffset(){const{offset:e}=this._config;if(typeof e==="string"){return e.split(",").map((e=>Number.parseInt(e,10)))}if(typeof e==="function"){return t=>e(t,this._element)}return e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};if(this._inNavbar||this._config.display==="static"){U.setDataAttribute(this._menu,"popper","static");e.modifiers=[{name:"applyStyles",enabled:false}]}return{...e,..._(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:t}){const i=Z.find(br,this._menu).filter((e=>h(e)));if(!i.length){return}A(i,t,e===Qn,!i.includes(t)).focus()}static jQueryInterface(e){return this.each((function(){const t=Mr.getOrCreateInstance(this,e);if(typeof e!=="string"){return}if(typeof t[e]==="undefined"){throw new TypeError(`No method named "${e}"`)}t[e]()}))}static clearMenus(e){if(e.button===Jn||e.type==="keyup"&&e.key!==Xn){return}const t=Z.find(fr);for(const i of t){const t=Mr.getInstance(i);if(!t||t._config.autoClose===false){continue}const n=e.composedPath();const r=n.includes(t._menu);if(n.includes(t._element)||t._config.autoClose==="inside"&&!r||t._config.autoClose==="outside"&&r){continue}if(t._menu.contains(e.target)&&(e.type==="keyup"&&e.key===Xn||/input|select|option|textarea|form/i.test(e.target.tagName))){continue}const o={relatedTarget:t._element};if(e.type==="click"){o.clickEvent=e}t._completeHide(o)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName);const i=e.key===Kn;const n=[Zn,Qn].includes(e.key);if(!n&&!i){return}if(t&&!i){return}e.preventDefault();const r=this.matches(pr)?this:Z.prev(this,pr)[0]||Z.next(this,pr)[0]||Z.findOne(pr,e.delegateTarget.parentNode);const o=Mr.getOrCreateInstance(r);if(n){e.stopPropagation();o.show();o._selectMenuItem(e);return}if(o._isShown()){e.stopPropagation();o.hide();r.focus()}}}z.on(document,or,pr,Mr.dataApiKeydownHandler);z.on(document,or,gr,Mr.dataApiKeydownHandler);z.on(document,rr,Mr.clearMenus);z.on(document,sr,Mr.clearMenus);z.on(document,rr,pr,(function(e){e.preventDefault();Mr.getOrCreateInstance(this).toggle()}));C(Mr);const kr="backdrop";const Pr="fade";const Rr="show";const Ir=`mousedown.bs.${kr}`;const Or={className:"modal-backdrop",clickCallback:null,isAnimated:false,isVisible:true,rootElement:"body"};const Nr={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Lr extends Y{constructor(e){super();this._config=this._getConfig(e);this._isAppended=false;this._element=null}static get Default(){return Or}static get DefaultType(){return Nr}static get NAME(){return kr}show(e){if(!this._config.isVisible){_(e);return}this._append();const t=this._getElement();if(this._config.isAnimated){m(t)}t.classList.add(Rr);this._emulateAnimation((()=>{_(e)}))}hide(e){if(!this._config.isVisible){_(e);return}this._getElement().classList.remove(Rr);this._emulateAnimation((()=>{this.dispose();_(e)}))}dispose(){if(!this._isAppended){return}z.off(this._element,Ir);this._element.remove();this._isAppended=false}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className;if(this._config.isAnimated){e.classList.add(Pr)}this._element=e}return this._element}_configAfterMerge(e){e.rootElement=u(e.rootElement);return e}_append(){if(this._isAppended){return}const e=this._getElement();this._config.rootElement.append(e);z.on(e,Ir,(()=>{_(this._config.clickCallback)}));this._isAppended=true}_emulateAnimation(e){S(e,this._getElement(),this._config.isAnimated)}}const Fr="focustrap";const $r="bs.focustrap";const Gr=`.${$r}`;const Br=`focusin${Gr}`;const Hr=`keydown.tab${Gr}`;const zr="Tab";const Wr="forward";const Vr="backward";const jr={autofocus:true,trapElement:null};const Ur={autofocus:"boolean",trapElement:"element"};class Yr extends Y{constructor(e){super();this._config=this._getConfig(e);this._isActive=false;this._lastTabNavDirection=null}static get Default(){return jr}static get DefaultType(){return Ur}static get NAME(){return Fr}activate(){if(this._isActive){return}if(this._config.autofocus){this._config.trapElement.focus()}z.off(document,Gr);z.on(document,Br,(e=>this._handleFocusin(e)));z.on(document,Hr,(e=>this._handleKeydown(e)));this._isActive=true}deactivate(){if(!this._isActive){return}this._isActive=false;z.off(document,Gr)}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target)){return}const i=Z.focusableChildren(t);if(i.length===0){t.focus()}else if(this._lastTabNavDirection===Vr){i[i.length-1].focus()}else{i[0].focus()}}_handleKeydown(e){if(e.key!==zr){return}this._lastTabNavDirection=e.shiftKey?Vr:Wr}}const qr=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top";const Kr=".sticky-top";const Xr="padding-right";const Zr="margin-right";class Qr{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow();this._setElementAttributes(this._element,Xr,(t=>t+e));this._setElementAttributes(qr,Xr,(t=>t+e));this._setElementAttributes(Kr,Zr,(t=>t-e))}reset(){this._resetElementAttributes(this._element,"overflow");this._resetElementAttributes(this._element,Xr);this._resetElementAttributes(qr,Xr);this._resetElementAttributes(Kr,Zr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow");this._element.style.overflow="hidden"}_setElementAttributes(e,t,i){const n=this.getWidth();const r=e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+n){return}this._saveInitialAttribute(e,t);const r=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,`${i(Number.parseFloat(r))}px`)};this._applyManipulationCallback(e,r)}_saveInitialAttribute(e,t){const i=e.style.getPropertyValue(t);if(i){U.setDataAttribute(e,t,i)}}_resetElementAttributes(e,t){const i=e=>{const i=U.getDataAttribute(e,t);if(i===null){e.style.removeProperty(t);return}U.removeDataAttribute(e,t);e.style.setProperty(t,i)};this._applyManipulationCallback(e,i)}_applyManipulationCallback(e,t){if(d(e)){t(e);return}for(const i of Z.find(e,this._element)){t(i)}}}const Jr="modal";const eo="bs.modal";const to=`.${eo}`;const io=".data-api";const no="Escape";const ro=`hide${to}`;const oo=`hidePrevented${to}`;const so=`hidden${to}`;const ao=`show${to}`;const lo=`shown${to}`;const co=`resize${to}`;const uo=`click.dismiss${to}`;const ho=`mousedown.dismiss${to}`;const po=`keydown.dismiss${to}`;const fo=`click${to}${io}`;const go="modal-open";const mo="fade";const vo="show";const bo="modal-static";const yo=".modal.show";const wo=".modal-dialog";const Co=".modal-body";const _o='[data-bs-toggle="modal"]';const So={backdrop:true,focus:true,keyboard:true};const Ao={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class xo extends K{constructor(e,t){super(e,t);this._dialog=Z.findOne(wo,this._element);this._backdrop=this._initializeBackDrop();this._focustrap=this._initializeFocusTrap();this._isShown=false;this._isTransitioning=false;this._scrollBar=new Qr;this._addEventListeners()}static get Default(){return So}static get DefaultType(){return Ao}static get NAME(){return Jr}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||this._isTransitioning){return}const t=z.trigger(this._element,ao,{relatedTarget:e});if(t.defaultPrevented){return}this._isShown=true;this._isTransitioning=true;this._scrollBar.hide();document.body.classList.add(go);this._adjustDialog();this._backdrop.show((()=>this._showElement(e)))}hide(){if(!this._isShown||this._isTransitioning){return}const e=z.trigger(this._element,ro);if(e.defaultPrevented){return}this._isShown=false;this._isTransitioning=true;this._focustrap.deactivate();this._element.classList.remove(vo);this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())}dispose(){z.off(window,to);z.off(this._dialog,to);this._backdrop.dispose();this._focustrap.deactivate();super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Lr({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Yr({trapElement:this._element})}_showElement(e){if(!document.body.contains(this._element)){document.body.append(this._element)}this._element.style.display="block";this._element.removeAttribute("aria-hidden");this._element.setAttribute("aria-modal",true);this._element.setAttribute("role","dialog");this._element.scrollTop=0;const t=Z.findOne(Co,this._dialog);if(t){t.scrollTop=0}m(this._element);this._element.classList.add(vo);const i=()=>{if(this._config.focus){this._focustrap.activate()}this._isTransitioning=false;z.trigger(this._element,lo,{relatedTarget:e})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){z.on(this._element,po,(e=>{if(e.key!==no){return}if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}));z.on(window,co,(()=>{if(this._isShown&&!this._isTransitioning){this._adjustDialog()}}));z.on(this._element,ho,(e=>{z.one(this._element,uo,(t=>{if(this._element!==e.target||this._element!==t.target){return}if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}if(this._config.backdrop){this.hide()}}))}))}_hideModal(){this._element.style.display="none";this._element.setAttribute("aria-hidden",true);this._element.removeAttribute("aria-modal");this._element.removeAttribute("role");this._isTransitioning=false;this._backdrop.hide((()=>{document.body.classList.remove(go);this._resetAdjustments();this._scrollBar.reset();z.trigger(this._element,so)}))}_isAnimated(){return this._element.classList.contains(mo)}_triggerBackdropTransition(){const e=z.trigger(this._element,oo);if(e.defaultPrevented){return}const t=this._element.scrollHeight>document.documentElement.clientHeight;const i=this._element.style.overflowY;if(i==="hidden"||this._element.classList.contains(bo)){return}if(!t){this._element.style.overflowY="hidden"}this._element.classList.add(bo);this._queueCallback((()=>{this._element.classList.remove(bo);this._queueCallback((()=>{this._element.style.overflowY=i}),this._dialog)}),this._dialog);this._element.focus()}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight;const t=this._scrollBar.getWidth();const i=t>0;if(i&&!e){const e=w()?"paddingLeft":"paddingRight";this._element.style[e]=`${t}px`}if(!i&&e){const e=w()?"paddingRight":"paddingLeft";this._element.style[e]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="";this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each((function(){const i=xo.getOrCreateInstance(this,e);if(typeof e!=="string"){return}if(typeof i[e]==="undefined"){throw new TypeError(`No method named "${e}"`)}i[e](t)}))}}z.on(document,fo,_o,(function(e){const t=Z.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)){e.preventDefault()}z.one(t,ao,(e=>{if(e.defaultPrevented){return}z.one(t,so,(()=>{if(h(this)){this.focus()}}))}));const i=Z.findOne(yo);if(i){xo.getInstance(i).hide()}const n=xo.getOrCreateInstance(t);n.toggle(this)}));Q(xo);C(xo);const Eo="offcanvas";const To="bs.offcanvas";const Do=`.${To}`;const Mo=".data-api";const ko=`load${Do}${Mo}`;const Po="Escape";const Ro="show";const Io="showing";const Oo="hiding";const No="offcanvas-backdrop";const Lo=".offcanvas.show";const Fo=`show${Do}`;const $o=`shown${Do}`;const Go=`hide${Do}`;const Bo=`hidePrevented${Do}`;const Ho=`hidden${Do}`;const zo=`resize${Do}`;const Wo=`click${Do}${Mo}`;const Vo=`keydown.dismiss${Do}`;const jo='[data-bs-toggle="offcanvas"]';const Uo={backdrop:true,keyboard:true,scroll:false};const Yo={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class qo extends K{constructor(e,t){super(e,t);this._isShown=false;this._backdrop=this._initializeBackDrop();this._focustrap=this._initializeFocusTrap();this._addEventListeners()}static get Default(){return Uo}static get DefaultType(){return Yo}static get NAME(){return Eo}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown){return}const t=z.trigger(this._element,Fo,{relatedTarget:e});if(t.defaultPrevented){return}this._isShown=true;this._backdrop.show();if(!this._config.scroll){(new Qr).hide()}this._element.setAttribute("aria-modal",true);this._element.setAttribute("role","dialog");this._element.classList.add(Io);const i=()=>{if(!this._config.scroll||this._config.backdrop){this._focustrap.activate()}this._element.classList.add(Ro);this._element.classList.remove(Io);z.trigger(this._element,$o,{relatedTarget:e})};this._queueCallback(i,this._element,true)}hide(){if(!this._isShown){return}const e=z.trigger(this._element,Go);if(e.defaultPrevented){return}this._focustrap.deactivate();this._element.blur();this._isShown=false;this._element.classList.add(Oo);this._backdrop.hide();const t=()=>{this._element.classList.remove(Ro,Oo);this._element.removeAttribute("aria-modal");this._element.removeAttribute("role");if(!this._config.scroll){(new Qr).reset()}z.trigger(this._element,Ho)};this._queueCallback(t,this._element,true)}dispose(){this._backdrop.dispose();this._focustrap.deactivate();super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){z.trigger(this._element,Bo);return}this.hide()};const t=Boolean(this._config.backdrop);return new Lr({className:No,isVisible:t,isAnimated:true,rootElement:this._element.parentNode,clickCallback:t?e:null})}_initializeFocusTrap(){return new Yr({trapElement:this._element})}_addEventListeners(){z.on(this._element,Vo,(e=>{if(e.key!==Po){return}if(this._config.keyboard){this.hide();return}z.trigger(this._element,Bo)}))}static jQueryInterface(e){return this.each((function(){const t=qo.getOrCreateInstance(this,e);if(typeof e!=="string"){return}if(t[e]===undefined||e.startsWith("_")||e==="constructor"){throw new TypeError(`No method named "${e}"`)}t[e](this)}))}}z.on(document,Wo,jo,(function(e){const t=Z.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)){e.preventDefault()}if(p(this)){return}z.one(t,Ho,(()=>{if(h(this)){this.focus()}}));const i=Z.findOne(Lo);if(i&&i!==t){qo.getInstance(i).hide()}const n=qo.getOrCreateInstance(t);n.toggle(this)}));z.on(window,ko,(()=>{for(const e of Z.find(Lo)){qo.getOrCreateInstance(e).show()}}));z.on(window,zo,(()=>{for(const e of Z.find("[aria-modal][class*=show][class*=offcanvas-]")){if(getComputedStyle(e).position!=="fixed"){qo.getOrCreateInstance(e).hide()}}}));Q(qo);C(qo);const Ko=/^aria-[\w-]*$/i;const Xo={"*":["class","dir","id","lang","role",Ko],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};const Zo=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]);const Qo=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i;const Jo=(e,t)=>{const i=e.nodeName.toLowerCase();if(t.includes(i)){if(Zo.has(i)){return Boolean(Qo.test(e.nodeValue))}return true}return t.filter((e=>e instanceof RegExp)).some((e=>e.test(i)))};function es(e,t,i){if(!e.length){return e}if(i&&typeof i==="function"){return i(e)}const n=new window.DOMParser;const r=n.parseFromString(e,"text/html");const o=[].concat(...r.body.querySelectorAll("*"));for(const e of o){const i=e.nodeName.toLowerCase();if(!Object.keys(t).includes(i)){e.remove();continue}const n=[].concat(...e.attributes);const r=[].concat(t["*"]||[],t[i]||[]);for(const t of n){if(!Jo(t,r)){e.removeAttribute(t.nodeName)}}}return r.body.innerHTML}const ts="TemplateFactory";const is={allowList:Xo,content:{},extraClass:"",html:false,sanitize:true,sanitizeFn:null,template:"<div></div>"};const ns={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"};const rs={entry:"(string|element|function|null)",selector:"(string|element)"};class os extends Y{constructor(e){super();this._config=this._getConfig(e)}static get Default(){return is}static get DefaultType(){return ns}static get NAME(){return ts}getContent(){return Object.values(this._config.content).map((e=>this._resolvePossibleFunction(e))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){this._checkContent(e);this._config.content={...this._config.content,...e};return this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[t,i]of Object.entries(this._config.content)){this._setContent(e,i,t)}const t=e.children[0];const i=this._resolvePossibleFunction(this._config.extraClass);if(i){t.classList.add(...i.split(" "))}return t}_typeCheckConfig(e){super._typeCheckConfig(e);this._checkContent(e.content)}_checkContent(e){for(const[t,i]of Object.entries(e)){super._typeCheckConfig({selector:t,entry:i},rs)}}_setContent(e,t,i){const n=Z.findOne(i,e);if(!n){return}t=this._resolvePossibleFunction(t);if(!t){n.remove();return}if(d(t)){this._putElementInTemplate(u(t),n);return}if(this._config.html){n.innerHTML=this._maybeSanitize(t);return}n.textContent=t}_maybeSanitize(e){return this._config.sanitize?es(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return _(e,[this])}_putElementInTemplate(e,t){if(this._config.html){t.innerHTML="";t.append(e);return}t.textContent=e.textContent}}const ss="tooltip";const as=new Set(["sanitize","allowList","sanitizeFn"]);const ls="fade";const cs="modal";const ds="show";const us=".tooltip-inner";const hs=`.${cs}`;const ps="hide.bs.modal";const fs="hover";const gs="focus";const ms="click";const vs="manual";const bs="hide";const ys="hidden";const ws="show";const Cs="shown";const _s="inserted";const Ss="click";const As="focusin";const xs="focusout";const Es="mouseenter";const Ts="mouseleave";const Ds={AUTO:"auto",TOP:"top",RIGHT:w()?"left":"right",BOTTOM:"bottom",LEFT:w()?"right":"left"};const Ms={allowList:Xo,animation:true,boundary:"clippingParents",container:false,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:false,offset:[0,6],placement:"top",popperConfig:null,sanitize:true,sanitizeFn:null,selector:false,template:'<div class="tooltip" role="tooltip">'+'<div class="tooltip-arrow"></div>'+'<div class="tooltip-inner"></div>'+"</div>",title:"",trigger:"hover focus"};const ks={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ps extends K{constructor(e,t){if(typeof Vn==="undefined"){throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)")}super(e,t);this._isEnabled=true;this._timeout=0;this._isHovered=null;this._activeTrigger={};this._popper=null;this._templateFactory=null;this._newContent=null;this.tip=null;this._setListeners();if(!this._config.selector){this._fixTitle()}}static get Default(){return Ms}static get DefaultType(){return ks}static get NAME(){return ss}enable(){this._isEnabled=true}disable(){this._isEnabled=false}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(!this._isEnabled){return}this._activeTrigger.click=!this._activeTrigger.click;if(this._isShown()){this._leave();return}this._enter()}dispose(){clearTimeout(this._timeout);z.off(this._element.closest(hs),ps,this._hideModalHandler);if(this._element.getAttribute("data-bs-original-title")){this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title"))}this._disposePopper();super.dispose()}show(){if(this._element.style.display==="none"){throw new Error("Please use show on visible elements")}if(!(this._isWithContent()&&this._isEnabled)){return}const e=z.trigger(this._element,this.constructor.eventName(ws));const t=f(this._element);const i=(t||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!i){return}this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:r}=this._config;if(!this._element.ownerDocument.documentElement.contains(this.tip)){r.append(n);z.trigger(this._element,this.constructor.eventName(_s))}this._popper=this._createPopper(n);n.classList.add(ds);if("ontouchstart"in document.documentElement){for(const e of[].concat(...document.body.children)){z.on(e,"mouseover",g)}}const o=()=>{z.trigger(this._element,this.constructor.eventName(Cs));if(this._isHovered===false){this._leave()}this._isHovered=false};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()){return}const e=z.trigger(this._element,this.constructor.eventName(bs));if(e.defaultPrevented){return}const t=this._getTipElement();t.classList.remove(ds);if("ontouchstart"in document.documentElement){for(const e of[].concat(...document.body.children)){z.off(e,"mouseover",g)}}this._activeTrigger[ms]=false;this._activeTrigger[gs]=false;this._activeTrigger[fs]=false;this._isHovered=null;const i=()=>{if(this._isWithActiveTrigger()){return}if(!this._isHovered){this._disposePopper()}this._element.removeAttribute("aria-describedby");z.trigger(this._element,this.constructor.eventName(ys))};this._queueCallback(i,this.tip,this._isAnimated())}update(){if(this._popper){this._popper.update()}}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){if(!this.tip){this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())}return this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t){return null}t.classList.remove(ls,ds);t.classList.add(`bs-${this.constructor.NAME}-auto`);const i=a(this.constructor.NAME).toString();t.setAttribute("id",i);if(this._isAnimated()){t.classList.add(ls)}return t}setContent(e){this._newContent=e;if(this._isShown()){this._disposePopper();this.show()}}_getTemplateFactory(e){if(this._templateFactory){this._templateFactory.changeContent(e)}else{this._templateFactory=new os({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)})}return this._templateFactory}_getContentForTemplate(){return{[us]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ls)}_isShown(){return this.tip&&this.tip.classList.contains(ds)}_createPopper(e){const t=_(this._config.placement,[this,e,this._element]);const i=Ds[t.toUpperCase()];return Wn(this._element,e,this._getPopperConfig(i))}_getOffset(){const{offset:e}=this._config;if(typeof e==="string"){return e.split(",").map((e=>Number.parseInt(e,10)))}if(typeof e==="function"){return t=>e(t,this._element)}return e}_resolvePossibleFunction(e){return _(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:true,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,..._(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e){if(t==="click"){z.on(this._element,this.constructor.eventName(Ss),this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t.toggle()}))}else if(t!==vs){const e=t===fs?this.constructor.eventName(Es):this.constructor.eventName(As);const i=t===fs?this.constructor.eventName(Ts):this.constructor.eventName(xs);z.on(this._element,e,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger[e.type==="focusin"?gs:fs]=true;t._enter()}));z.on(this._element,i,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger[e.type==="focusout"?gs:fs]=t._element.contains(e.relatedTarget);t._leave()}))}}this._hideModalHandler=()=>{if(this._element){this.hide()}};z.on(this._element.closest(hs),ps,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");if(!e){return}if(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()){this._element.setAttribute("aria-label",e)}this._element.setAttribute("data-bs-original-title",e);this._element.removeAttribute("title")}_enter(){if(this._isShown()||this._isHovered){this._isHovered=true;return}this._isHovered=true;this._setTimeout((()=>{if(this._isHovered){this.show()}}),this._config.delay.show)}_leave(){if(this._isWithActiveTrigger()){return}this._isHovered=false;this._setTimeout((()=>{if(!this._isHovered){this.hide()}}),this._config.delay.hide)}_setTimeout(e,t){clearTimeout(this._timeout);this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(true)}_getConfig(e){const t=U.getDataAttributes(this._element);for(const e of Object.keys(t)){if(as.has(e)){delete t[e]}}e={...t,...typeof e==="object"&&e?e:{}};e=this._mergeConfigObj(e);e=this._configAfterMerge(e);this._typeCheckConfig(e);return e}_configAfterMerge(e){e.container=e.container===false?document.body:u(e.container);if(typeof e.delay==="number"){e.delay={show:e.delay,hide:e.delay}}if(typeof e.title==="number"){e.title=e.title.toString()}if(typeof e.content==="number"){e.content=e.content.toString()}return e}_getDelegateConfig(){const e={};for(const[t,i]of Object.entries(this._config)){if(this.constructor.Default[t]!==i){e[t]=i}}e.selector=false;e.trigger="manual";return e}_disposePopper(){if(this._popper){this._popper.destroy();this._popper=null}if(this.tip){this.tip.remove();this.tip=null}}static jQueryInterface(e){return this.each((function(){const t=Ps.getOrCreateInstance(this,e);if(typeof e!=="string"){return}if(typeof t[e]==="undefined"){throw new TypeError(`No method named "${e}"`)}t[e]()}))}}C(Ps);const Rs="popover";const Is=".popover-header";const Os=".popover-body";const Ns={...Ps.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip">'+'<div class="popover-arrow"></div>'+'<h3 class="popover-header"></h3>'+'<div class="popover-body"></div>'+"</div>",trigger:"click"};const Ls={...Ps.DefaultType,content:"(null|string|element|function)"};class Fs extends Ps{static get Default(){return Ns}static get DefaultType(){return Ls}static get NAME(){return Rs}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Is]:this._getTitle(),[Os]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each((function(){const t=Fs.getOrCreateInstance(this,e);if(typeof e!=="string"){return}if(typeof t[e]==="undefined"){throw new TypeError(`No method named "${e}"`)}t[e]()}))}}C(Fs);const $s="scrollspy";const Gs="bs.scrollspy";const Bs=`.${Gs}`;const Hs=".data-api";const zs=`activate${Bs}`;const Ws=`click${Bs}`;const Vs=`load${Bs}${Hs}`;const js="dropdown-item";const Us="active";const Ys='[data-bs-spy="scroll"]';const qs="[href]";const Ks=".nav, .list-group";const Xs=".nav-link";const Zs=".nav-item";const Qs=".list-group-item";const Js=`${Xs}, ${Zs} > ${Xs}, ${Qs}`;const ea=".dropdown";const ta=".dropdown-toggle";const ia={offset:null,rootMargin:"0px 0px -25%",smoothScroll:false,target:null,threshold:[.1,.5,1]};const na={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ra extends K{constructor(e,t){super(e,t);this._targetLinks=new Map;this._observableSections=new Map;this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element;this._activeTarget=null;this._observer=null;this._previousScrollData={visibleEntryTop:0,parentScrollTop:0};this.refresh()}static get Default(){return ia}static get DefaultType(){return na}static get NAME(){return $s}refresh(){this._initializeTargetsAndObservables();this._maybeEnableSmoothScroll();if(this._observer){this._observer.disconnect()}else{this._observer=this._getNewObserver()}for(const e of this._observableSections.values()){this._observer.observe(e)}}dispose(){this._observer.disconnect();super.dispose()}_configAfterMerge(e){e.target=u(e.target)||document.body;e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin;if(typeof e.threshold==="string"){e.threshold=e.threshold.split(",").map((e=>Number.parseFloat(e)))}return e}_maybeEnableSmoothScroll(){if(!this._config.smoothScroll){return}z.off(this._config.target,Ws);z.on(this._config.target,Ws,qs,(e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const i=this._rootElement||window;const n=t.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:n,behavior:"smooth"});return}i.scrollTop=n}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((e=>this._observerCallback(e)),e)}_observerCallback(e){const t=e=>this._targetLinks.get(`#${e.target.id}`);const i=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop;this._process(t(e))};const n=(this._rootElement||document.documentElement).scrollTop;const r=n>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=n;for(const o of e){if(!o.isIntersecting){this._activeTarget=null;this._clearActiveClass(t(o));continue}const e=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&e){i(o);if(!n){return}continue}if(!r&&!e){i(o)}}}_initializeTargetsAndObservables(){this._targetLinks=new Map;this._observableSections=new Map;const e=Z.find(qs,this._config.target);for(const t of e){if(!t.hash||p(t)){continue}const e=Z.findOne(decodeURI(t.hash),this._element);if(h(e)){this._targetLinks.set(decodeURI(t.hash),t);this._observableSections.set(t.hash,e)}}}_process(e){if(this._activeTarget===e){return}this._clearActiveClass(this._config.target);this._activeTarget=e;e.classList.add(Us);this._activateParents(e);z.trigger(this._element,zs,{relatedTarget:e})}_activateParents(e){if(e.classList.contains(js)){Z.findOne(ta,e.closest(ea)).classList.add(Us);return}for(const t of Z.parents(e,Ks)){for(const e of Z.prev(t,Js)){e.classList.add(Us)}}}_clearActiveClass(e){e.classList.remove(Us);const t=Z.find(`${qs}.${Us}`,e);for(const e of t){e.classList.remove(Us)}}static jQueryInterface(e){return this.each((function(){const t=ra.getOrCreateInstance(this,e);if(typeof e!=="string"){return}if(t[e]===undefined||e.startsWith("_")||e==="constructor"){throw new TypeError(`No method named "${e}"`)}t[e]()}))}}z.on(window,Vs,(()=>{for(const e of Z.find(Ys)){ra.getOrCreateInstance(e)}}));C(ra);const oa="tab";const sa="bs.tab";const aa=`.${sa}`;const la=`hide${aa}`;const ca=`hidden${aa}`;const da=`show${aa}`;const ua=`shown${aa}`;const ha=`click${aa}`;const pa=`keydown${aa}`;const fa=`load${aa}`;const ga="ArrowLeft";const ma="ArrowRight";const va="ArrowUp";const ba="ArrowDown";const ya="Home";const wa="End";const Ca="active";const _a="fade";const Sa="show";const Aa="dropdown";const xa=".dropdown-toggle";const Ea=".dropdown-menu";const Ta=`:not(${xa})`;const Da='.list-group, .nav, [role="tablist"]';const Ma=".nav-item, .list-group-item";const ka=`.nav-link${Ta}, .list-group-item${Ta}, [role="tab"]${Ta}`;const Pa='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]';const Ra=`${ka}, ${Pa}`;const Ia=`.${Ca}[data-bs-toggle="tab"], .${Ca}[data-bs-toggle="pill"], .${Ca}[data-bs-toggle="list"]`;class Oa extends K{constructor(e){super(e);this._parent=this._element.closest(Da);if(!this._parent){return}this._setInitialAttributes(this._parent,this._getChildren());z.on(this._element,pa,(e=>this._keydown(e)))}static get NAME(){return oa}show(){const e=this._element;if(this._elemIsActive(e)){return}const t=this._getActiveElem();const i=t?z.trigger(t,la,{relatedTarget:e}):null;const n=z.trigger(e,da,{relatedTarget:t});if(n.defaultPrevented||i&&i.defaultPrevented){return}this._deactivate(t,e);this._activate(e,t)}_activate(e,t){if(!e){return}e.classList.add(Ca);this._activate(Z.getElementFromSelector(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Sa);return}e.removeAttribute("tabindex");e.setAttribute("aria-selected",true);this._toggleDropDown(e,true);z.trigger(e,ua,{relatedTarget:t})};this._queueCallback(i,e,e.classList.contains(_a))}_deactivate(e,t){if(!e){return}e.classList.remove(Ca);e.blur();this._deactivate(Z.getElementFromSelector(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Sa);return}e.setAttribute("aria-selected",false);e.setAttribute("tabindex","-1");this._toggleDropDown(e,false);z.trigger(e,ca,{relatedTarget:t})};this._queueCallback(i,e,e.classList.contains(_a))}_keydown(e){if(![ga,ma,va,ba,ya,wa].includes(e.key)){return}e.stopPropagation();e.preventDefault();const t=this._getChildren().filter((e=>!p(e)));let i;if([ya,wa].includes(e.key)){i=t[e.key===ya?0:t.length-1]}else{const n=[ma,ba].includes(e.key);i=A(t,e.target,n,true)}if(i){i.focus({preventScroll:true});Oa.getOrCreateInstance(i).show()}}_getChildren(){return Z.find(Ra,this._parent)}_getActiveElem(){return this._getChildren().find((e=>this._elemIsActive(e)))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const e of t){this._setInitialAttributesOnChild(e)}}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e);const i=this._getOuterElement(e);e.setAttribute("aria-selected",t);if(i!==e){this._setAttributeIfNotExists(i,"role","presentation")}if(!t){e.setAttribute("tabindex","-1")}this._setAttributeIfNotExists(e,"role","tab");this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=Z.getElementFromSelector(e);if(!t){return}this._setAttributeIfNotExists(t,"role","tabpanel");if(e.id){this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`)}}_toggleDropDown(e,t){const i=this._getOuterElement(e);if(!i.classList.contains(Aa)){return}const n=(e,n)=>{const r=Z.findOne(e,i);if(r){r.classList.toggle(n,t)}};n(xa,Ca);n(Ea,Sa);i.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,i){if(!e.hasAttribute(t)){e.setAttribute(t,i)}}_elemIsActive(e){return e.classList.contains(Ca)}_getInnerElement(e){return e.matches(Ra)?e:Z.findOne(Ra,e)}_getOuterElement(e){return e.closest(Ma)||e}static jQueryInterface(e){return this.each((function(){const t=Oa.getOrCreateInstance(this);if(typeof e!=="string"){return}if(t[e]===undefined||e.startsWith("_")||e==="constructor"){throw new TypeError(`No method named "${e}"`)}t[e]()}))}}z.on(document,ha,Pa,(function(e){if(["A","AREA"].includes(this.tagName)){e.preventDefault()}if(p(this)){return}Oa.getOrCreateInstance(this).show()}));z.on(window,fa,(()=>{for(const e of Z.find(Ia)){Oa.getOrCreateInstance(e)}}));C(Oa);const Na="toast";const La="bs.toast";const Fa=`.${La}`;const $a=`mouseover${Fa}`;const Ga=`mouseout${Fa}`;const Ba=`focusin${Fa}`;const Ha=`focusout${Fa}`;const za=`hide${Fa}`;const Wa=`hidden${Fa}`;const Va=`show${Fa}`;const ja=`shown${Fa}`;const Ua="fade";const Ya="hide";const qa="show";const Ka="showing";const Xa={animation:"boolean",autohide:"boolean",delay:"number"};const Za={animation:true,autohide:true,delay:5e3};class Qa extends K{constructor(e,t){super(e,t);this._timeout=null;this._hasMouseInteraction=false;this._hasKeyboardInteraction=false;this._setListeners()}static get Default(){return Za}static get DefaultType(){return Xa}static get NAME(){return Na}show(){const e=z.trigger(this._element,Va);if(e.defaultPrevented){return}this._clearTimeout();if(this._config.animation){this._element.classList.add(Ua)}const t=()=>{this._element.classList.remove(Ka);z.trigger(this._element,ja);this._maybeScheduleHide()};this._element.classList.remove(Ya);m(this._element);this._element.classList.add(qa,Ka);this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this.isShown()){return}const e=z.trigger(this._element,za);if(e.defaultPrevented){return}const t=()=>{this._element.classList.add(Ya);this._element.classList.remove(Ka,qa);z.trigger(this._element,Wa)};this._element.classList.add(Ka);this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout();if(this.isShown()){this._element.classList.remove(qa)}super.dispose()}isShown(){return this._element.classList.contains(qa)}_maybeScheduleHide(){if(!this._config.autohide){return}if(this._hasMouseInteraction||this._hasKeyboardInteraction){return}this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=t;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=t;break}}if(t){this._clearTimeout();return}const i=e.relatedTarget;if(this._element===i||this._element.contains(i)){return}this._maybeScheduleHide()}_setListeners(){z.on(this._element,$a,(e=>this._onInteraction(e,true)));z.on(this._element,Ga,(e=>this._onInteraction(e,false)));z.on(this._element,Ba,(e=>this._onInteraction(e,true)));z.on(this._element,Ha,(e=>this._onInteraction(e,false)))}_clearTimeout(){clearTimeout(this._timeout);this._timeout=null}static jQueryInterface(e){return this.each((function(){const t=Qa.getOrCreateInstance(this,e);if(typeof e==="string"){if(typeof t[e]==="undefined"){throw new TypeError(`No method named "${e}"`)}t[e](this)}}))}}Q(Qa);C(Qa);const Ja={Alert:se,Button:fe,Carousel:ut,Collapse:It,Dropdown:Mr,Modal:xo,Offcanvas:qo,Popover:Fs,ScrollSpy:ra,Tab:Oa,Toast:Qa,Tooltip:Ps};return Ja}));(function(e,t,i,n){"use strict";var r=["","webkit","Moz","MS","ms","o"];var o=t.createElement("div");var s="function";var a=Math.round;var l=Math.abs;var c=Date.now;function d(e,t,i){return setTimeout(b(e,i),t)}function u(e,t,i){if(Array.isArray(e)){h(e,i[t],i);return true}return false}function h(e,t,i){var r;if(!e){return}if(e.forEach){e.forEach(t,i)}else if(e.length!==n){r=0;while(r<e.length){t.call(i,e[r],r,e);r++}}else{for(r in e){e.hasOwnProperty(r)&&t.call(i,e[r],r,e)}}}function p(t,i,n){var r="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace");var n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace";var o=e.console&&(e.console.warn||e.console.log);if(o){o.call(e.console,r,n)}return t.apply(this,arguments)}}var f;if(typeof Object.assign!=="function"){f=function e(t){if(t===n||t===null){throw new TypeError("Cannot convert undefined or null to object")}var i=Object(t);for(var r=1;r<arguments.length;r++){var o=arguments[r];if(o!==n&&o!==null){for(var s in o){if(o.hasOwnProperty(s)){i[s]=o[s]}}}}return i}}else{f=Object.assign}var g=p((function e(t,i,r){var o=Object.keys(i);var s=0;while(s<o.length){if(!r||r&&t[o[s]]===n){t[o[s]]=i[o[s]]}s++}return t}),"extend","Use `assign`.");var m=p((function e(t,i){return g(t,i,true)}),"merge","Use `assign`.");function v(e,t,i){var n=t.prototype,r;r=e.prototype=Object.create(n);r.constructor=e;r._super=n;if(i){f(r,i)}}function b(e,t){return function i(){return e.apply(t,arguments)}}function y(e,t){if(typeof e==s){return e.apply(t?t[0]||n:n,t)}return e}function w(e,t){return e===n?t:e}function C(e,t,i){h(x(t),(function(t){e.addEventListener(t,i,false)}))}function _(e,t,i){h(x(t),(function(t){e.removeEventListener(t,i,false)}))}function S(e,t){while(e){if(e==t){return true}e=e.parentNode}return false}function A(e,t){return e.indexOf(t)>-1}function x(e){return e.trim().split(/\s+/g)}function E(e,t,i){if(e.indexOf&&!i){return e.indexOf(t)}else{var n=0;while(n<e.length){if(i&&e[n][i]==t||!i&&e[n]===t){return n}n++}return-1}}function T(e){return Array.prototype.slice.call(e,0)}function D(e,t,i){var n=[];var r=[];var o=0;while(o<e.length){var s=t?e[o][t]:e[o];if(E(r,s)<0){n.push(e[o])}r[o]=s;o++}if(i){if(!t){n=n.sort()}else{n=n.sort((function e(i,n){return i[t]>n[t]}))}}return n}function M(e,t){var i,o;var s=t[0].toUpperCase()+t.slice(1);var a=0;while(a<r.length){i=r[a];o=i?i+s:t;if(o in e){return o}a++}return n}var k=1;function P(){return k++}function R(t){var i=t.ownerDocument||t;return i.defaultView||i.parentWindow||e}var I=/mobile|tablet|ip(ad|hone|od)|android/i;var O="ontouchstart"in e;var N=M(e,"PointerEvent")!==n;var L=O&&I.test(navigator.userAgent);var F="touch";var $="pen";var G="mouse";var B="kinect";var H=25;var z=1;var W=2;var V=4;var j=8;var U=1;var Y=2;var q=4;var K=8;var X=16;var Z=Y|q;var Q=K|X;var J=Z|Q;var ee=["x","y"];var te=["clientX","clientY"];function ie(e,t){var i=this;this.manager=e;this.callback=t;this.element=e.element;this.target=e.options.inputTarget;this.domHandler=function(t){if(y(e.options.enable,[e])){i.handler(t)}};this.init()}ie.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler);this.evTarget&&C(this.target,this.evTarget,this.domHandler);this.evWin&&C(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_(this.element,this.evEl,this.domHandler);this.evTarget&&_(this.target,this.evTarget,this.domHandler);this.evWin&&_(R(this.element),this.evWin,this.domHandler)}};function ne(e){var t;var i=e.options.inputClass;if(i){t=i}else if(N){t=Ae}else if(L){t=Re}else if(!O){t=ye}else{t=Le}return new t(e,re)}function re(e,t,i){var n=i.pointers.length;var r=i.changedPointers.length;var o=t&z&&n-r===0;var s=t&(V|j)&&n-r===0;i.isFirst=!!o;i.isFinal=!!s;if(o){e.session={}}i.eventType=t;oe(e,i);e.emit("hammer.input",i);e.recognize(i);e.session.prevInput=i}function oe(e,t){var i=e.session;var n=t.pointers;var r=n.length;if(!i.firstInput){i.firstInput=le(t)}if(r>1&&!i.firstMultiple){i.firstMultiple=le(t)}else if(r===1){i.firstMultiple=false}var o=i.firstInput;var s=i.firstMultiple;var a=s?s.center:o.center;var d=t.center=ce(n);t.timeStamp=c();t.deltaTime=t.timeStamp-o.timeStamp;t.angle=pe(a,d);t.distance=he(a,d);se(i,t);t.offsetDirection=ue(t.deltaX,t.deltaY);var u=de(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x;t.overallVelocityY=u.y;t.overallVelocity=l(u.x)>l(u.y)?u.x:u.y;t.scale=s?ge(s.pointers,n):1;t.rotation=s?fe(s.pointers,n):0;t.maxPointers=!i.prevInput?t.pointers.length:t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers;ae(i,t);var h=e.element;if(S(t.srcEvent.target,h)){h=t.srcEvent.target}t.target=h}function se(e,t){var i=t.center;var n=e.offsetDelta||{};var r=e.prevDelta||{};var o=e.prevInput||{};if(t.eventType===z||o.eventType===V){r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0};n=e.offsetDelta={x:i.x,y:i.y}}t.deltaX=r.x+(i.x-n.x);t.deltaY=r.y+(i.y-n.y)}function ae(e,t){var i=e.lastInterval||t,r=t.timeStamp-i.timeStamp,o,s,a,c;if(t.eventType!=j&&(r>H||i.velocity===n)){var d=t.deltaX-i.deltaX;var u=t.deltaY-i.deltaY;var h=de(r,d,u);s=h.x;a=h.y;o=l(h.x)>l(h.y)?h.x:h.y;c=ue(d,u);e.lastInterval=t}else{o=i.velocity;s=i.velocityX;a=i.velocityY;c=i.direction}t.velocity=o;t.velocityX=s;t.velocityY=a;t.direction=c}function le(e){var t=[];var i=0;while(i<e.pointers.length){t[i]={clientX:a(e.pointers[i].clientX),clientY:a(e.pointers[i].clientY)};i++}return{timeStamp:c(),pointers:t,center:ce(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ce(e){var t=e.length;if(t===1){return{x:a(e[0].clientX),y:a(e[0].clientY)}}var i=0,n=0,r=0;while(r<t){i+=e[r].clientX;n+=e[r].clientY;r++}return{x:a(i/t),y:a(n/t)}}function de(e,t,i){return{x:t/e||0,y:i/e||0}}function ue(e,t){if(e===t){return U}if(l(e)>=l(t)){return e<0?Y:q}return t<0?K:X}function he(e,t,i){if(!i){i=ee}var n=t[i[0]]-e[i[0]],r=t[i[1]]-e[i[1]];return Math.sqrt(n*n+r*r)}function pe(e,t,i){if(!i){i=ee}var n=t[i[0]]-e[i[0]],r=t[i[1]]-e[i[1]];return Math.atan2(r,n)*180/Math.PI}function fe(e,t){return pe(t[1],t[0],te)+pe(e[1],e[0],te)}function ge(e,t){return he(t[0],t[1],te)/he(e[0],e[1],te)}var me={mousedown:z,mousemove:W,mouseup:V};var ve="mousedown";var be="mousemove mouseup";function ye(){this.evEl=ve;this.evWin=be;this.pressed=false;ie.apply(this,arguments)}v(ye,ie,{handler:function e(t){var i=me[t.type];if(i&z&&t.button===0){this.pressed=true}if(i&W&&t.which!==1){i=V}if(!this.pressed){return}if(i&V){this.pressed=false}this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:G,srcEvent:t})}});var we={pointerdown:z,pointermove:W,pointerup:V,pointercancel:j,pointerout:j};var Ce={2:F,3:$,4:G,5:B};var _e="pointerdown";var Se="pointermove pointerup pointercancel";if(e.MSPointerEvent&&!e.PointerEvent){_e="MSPointerDown";Se="MSPointerMove MSPointerUp MSPointerCancel"}function Ae(){this.evEl=_e;this.evWin=Se;ie.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}v(Ae,ie,{handler:function e(t){var i=this.store;var n=false;var r=t.type.toLowerCase().replace("ms","");var o=we[r];var s=Ce[t.pointerType]||t.pointerType;var a=s==F;var l=E(i,t.pointerId,"pointerId");if(o&z&&(t.button===0||a)){if(l<0){i.push(t);l=i.length-1}}else if(o&(V|j)){n=true}if(l<0){return}i[l]=t;this.callback(this.manager,o,{pointers:i,changedPointers:[t],pointerType:s,srcEvent:t});if(n){i.splice(l,1)}}});var xe={touchstart:z,touchmove:W,touchend:V,touchcancel:j};var Ee="touchstart";var Te="touchstart touchmove touchend touchcancel";function De(){this.evTarget=Ee;this.evWin=Te;this.started=false;ie.apply(this,arguments)}v(De,ie,{handler:function e(t){var i=xe[t.type];if(i===z){this.started=true}if(!this.started){return}var n=Me.call(this,t,i);if(i&(V|j)&&n[0].length-n[1].length===0){this.started=false}this.callback(this.manager,i,{pointers:n[0],changedPointers:n[1],pointerType:F,srcEvent:t})}});function Me(e,t){var i=T(e.touches);var n=T(e.changedTouches);if(t&(V|j)){i=D(i.concat(n),"identifier",true)}return[i,n]}var ke={touchstart:z,touchmove:W,touchend:V,touchcancel:j};var Pe="touchstart touchmove touchend touchcancel";function Re(){this.evTarget=Pe;this.targetIds={};ie.apply(this,arguments)}v(Re,ie,{handler:function e(t){var i=ke[t.type];var n=Ie.call(this,t,i);if(!n){return}this.callback(this.manager,i,{pointers:n[0],changedPointers:n[1],pointerType:F,srcEvent:t})}});function Ie(e,t){var i=T(e.touches);var n=this.targetIds;if(t&(z|W)&&i.length===1){n[i[0].identifier]=true;return[i,i]}var r,o,s=T(e.changedTouches),a=[],l=this.target;o=i.filter((function(e){return S(e.target,l)}));if(t===z){r=0;while(r<o.length){n[o[r].identifier]=true;r++}}r=0;while(r<s.length){if(n[s[r].identifier]){a.push(s[r])}if(t&(V|j)){delete n[s[r].identifier]}r++}if(!a.length){return}return[D(o.concat(a),"identifier",true),a]}var Oe=2500;var Ne=25;function Le(){ie.apply(this,arguments);var e=b(this.handler,this);this.touch=new Re(this.manager,e);this.mouse=new ye(this.manager,e);this.primaryTouch=null;this.lastTouches=[]}v(Le,ie,{handler:function e(t,i,n){var r=n.pointerType==F,o=n.pointerType==G;if(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents){return}if(r){Fe.call(this,i,n)}else if(o&&Ge.call(this,n)){return}this.callback(t,i,n)},destroy:function e(){this.touch.destroy();this.mouse.destroy()}});function Fe(e,t){if(e&z){this.primaryTouch=t.changedPointers[0].identifier;$e.call(this,t)}else if(e&(V|j)){$e.call(this,t)}}function $e(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY};this.lastTouches.push(i);var n=this.lastTouches;var r=function(){var e=n.indexOf(i);if(e>-1){n.splice(e,1)}};setTimeout(r,Oe)}}function Ge(e){var t=e.srcEvent.clientX,i=e.srcEvent.clientY;for(var n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n];var o=Math.abs(t-r.x),s=Math.abs(i-r.y);if(o<=Ne&&s<=Ne){return true}}return false}var Be=M(o.style,"touchAction");var He=Be!==n;var ze="compute";var We="auto";var Ve="manipulation";var je="none";var Ue="pan-x";var Ye="pan-y";var qe=Ze();function Ke(e,t){this.manager=e;this.set(t)}Ke.prototype={set:function(e){if(e==ze){e=this.compute()}if(He&&this.manager.element.style&&qe[e]){this.manager.element.style[Be]=e}this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];h(this.manager.recognizers,(function(t){if(y(t.options.enable,[t])){e=e.concat(t.getTouchAction())}}));return Xe(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent;var i=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var n=this.actions;var r=A(n,je)&&!qe[je];var o=A(n,Ye)&&!qe[Ye];var s=A(n,Ue)&&!qe[Ue];if(r){var a=e.pointers.length===1;var l=e.distance<2;var c=e.deltaTime<250;if(a&&l&&c){return}}if(s&&o){return}if(r||o&&i&Z||s&&i&Q){return this.preventSrc(t)}},preventSrc:function(e){this.manager.session.prevented=true;e.preventDefault()}};function Xe(e){if(A(e,je)){return je}var t=A(e,Ue);var i=A(e,Ye);if(t&&i){return je}if(t||i){return t?Ue:Ye}if(A(e,Ve)){return Ve}return We}function Ze(){if(!He){return false}var t={};var i=e.CSS&&e.CSS.supports;["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=i?e.CSS.supports("touch-action",n):true}));return t}var Qe=1;var Je=2;var et=4;var tt=8;var it=tt;var nt=16;var rt=32;function ot(e){this.options=f({},this.defaults,e||{});this.id=P();this.manager=null;this.options.enable=w(this.options.enable,true);this.state=Qe;this.simultaneous={};this.requireFail=[]}ot.prototype={defaults:{},set:function(e){f(this.options,e);this.manager&&this.manager.touchAction.update();return this},recognizeWith:function(e){if(u(e,"recognizeWith",this)){return this}var t=this.simultaneous;e=lt(e,this);if(!t[e.id]){t[e.id]=e;e.recognizeWith(this)}return this},dropRecognizeWith:function(e){if(u(e,"dropRecognizeWith",this)){return this}e=lt(e,this);delete this.simultaneous[e.id];return this},requireFailure:function(e){if(u(e,"requireFailure",this)){return this}var t=this.requireFail;e=lt(e,this);if(E(t,e)===-1){t.push(e);e.requireFailure(this)}return this},dropRequireFailure:function(e){if(u(e,"dropRequireFailure",this)){return this}e=lt(e,this);var t=E(this.requireFail,e);if(t>-1){this.requireFail.splice(t,1)}return this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this;var i=this.state;function n(i){t.manager.emit(i,e)}if(i<tt){n(t.options.event+st(i))}n(t.options.event);if(e.additionalEvent){n(e.additionalEvent)}if(i>=tt){n(t.options.event+st(i))}},tryEmit:function(e){if(this.canEmit()){return this.emit(e)}this.state=rt},canEmit:function(){var e=0;while(e<this.requireFail.length){if(!(this.requireFail[e].state&(rt|Qe))){return false}e++}return true},recognize:function(e){var t=f({},e);if(!y(this.options.enable,[this,t])){this.reset();this.state=rt;return}if(this.state&(it|nt|rt)){this.state=Qe}this.state=this.process(t);if(this.state&(Je|et|tt|nt)){this.tryEmit(t)}},process:function(e){},getTouchAction:function(){},reset:function(){}};function st(e){if(e&nt){return"cancel"}else if(e&tt){return"end"}else if(e&et){return"move"}else if(e&Je){return"start"}return""}function at(e){if(e==X){return"down"}else if(e==K){return"up"}else if(e==Y){return"left"}else if(e==q){return"right"}return""}function lt(e,t){var i=t.manager;if(i){return i.get(e)}return e}function ct(){ot.apply(this,arguments)}v(ct,ot,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return t===0||e.pointers.length===t},process:function(e){var t=this.state;var i=e.eventType;var n=t&(Je|et);var r=this.attrTest(e);if(n&&(i&j||!r)){return t|nt}else if(n||r){if(i&V){return t|tt}else if(!(t&Je)){return Je}return t|et}return rt}});function dt(){ct.apply(this,arguments);this.pX=null;this.pY=null}v(dt,ct,{defaults:{event:"pan",threshold:10,pointers:1,direction:J},getTouchAction:function(){var e=this.options.direction;var t=[];if(e&Z){t.push(Ye)}if(e&Q){t.push(Ue)}return t},directionTest:function(e){var t=this.options;var i=true;var n=e.distance;var r=e.direction;var o=e.deltaX;var s=e.deltaY;if(!(r&t.direction)){if(t.direction&Z){r=o===0?U:o<0?Y:q;i=o!=this.pX;n=Math.abs(e.deltaX)}else{r=s===0?U:s<0?K:X;i=s!=this.pY;n=Math.abs(e.deltaY)}}e.direction=r;return i&&n>t.threshold&&r&t.direction},attrTest:function(e){return ct.prototype.attrTest.call(this,e)&&(this.state&Je||!(this.state&Je)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX;this.pY=e.deltaY;var t=at(e.direction);if(t){e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}});function ut(){ct.apply(this,arguments)}v(ut,ct,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[je]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&Je)},emit:function(e){if(e.scale!==1){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}});function ht(){ot.apply(this,arguments);this._timer=null;this._input=null}v(ht,ot,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[We]},process:function(e){var t=this.options;var i=e.pointers.length===t.pointers;var n=e.distance<t.threshold;var r=e.deltaTime>t.time;this._input=e;if(!n||!i||e.eventType&(V|j)&&!r){this.reset()}else if(e.eventType&z){this.reset();this._timer=d((function(){this.state=it;this.tryEmit()}),t.time,this)}else if(e.eventType&V){return it}return rt},reset:function(){clearTimeout(this._timer)},emit:function(e){if(this.state!==it){return}if(e&&e.eventType&V){this.manager.emit(this.options.event+"up",e)}else{this._input.timeStamp=c();this.manager.emit(this.options.event,this._input)}}});function pt(){ct.apply(this,arguments)}v(pt,ct,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[je]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&Je)}});function ft(){ct.apply(this,arguments)}v(ft,ct,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Z|Q,pointers:1},getTouchAction:function(){return dt.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction;var i;if(t&(Z|Q)){i=e.overallVelocity}else if(t&Z){i=e.overallVelocityX}else if(t&Q){i=e.overallVelocityY}return this._super.attrTest.call(this,e)&&t&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&l(i)>this.options.velocity&&e.eventType&V},emit:function(e){var t=at(e.offsetDirection);if(t){this.manager.emit(this.options.event+t,e)}this.manager.emit(this.options.event,e)}});function gt(){ot.apply(this,arguments);this.pTime=false;this.pCenter=false;this._timer=null;this._input=null;this.count=0}v(gt,ot,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ve]},process:function(e){var t=this.options;var i=e.pointers.length===t.pointers;var n=e.distance<t.threshold;var r=e.deltaTime<t.time;this.reset();if(e.eventType&z&&this.count===0){return this.failTimeout()}if(n&&r&&i){if(e.eventType!=V){return this.failTimeout()}var o=this.pTime?e.timeStamp-this.pTime<t.interval:true;var s=!this.pCenter||he(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp;this.pCenter=e.center;if(!s||!o){this.count=1}else{this.count+=1}this._input=e;var a=this.count%t.taps;if(a===0){if(!this.hasRequireFailures()){return it}else{this._timer=d((function(){this.state=it;this.tryEmit()}),t.interval,this);return Je}}}return rt},failTimeout:function(){this._timer=d((function(){this.state=rt}),this.options.interval,this);return rt},reset:function(){clearTimeout(this._timer)},emit:function(){if(this.state==it){this._input.tapCount=this.count;this.manager.emit(this.options.event,this._input)}}});function mt(e,t){t=t||{};t.recognizers=w(t.recognizers,mt.defaults.preset);return new yt(e,t)}mt.VERSION="2.0.7";mt.defaults={domEvents:false,touchAction:ze,enable:true,inputTarget:null,inputClass:null,preset:[[pt,{enable:false}],[ut,{enable:false},["rotate"]],[ft,{direction:Z}],[dt,{direction:Z},["swipe"]],[gt],[gt,{event:"doubletap",taps:2},["tap"]],[ht]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var vt=1;var bt=2;function yt(e,t){this.options=f({},mt.defaults,t||{});this.options.inputTarget=this.options.inputTarget||e;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=e;this.input=ne(this);this.touchAction=new Ke(this,this.options.touchAction);wt(this,true);h(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]);e[3]&&t.requireFailure(e[3])}),this)}yt.prototype={set:function(e){f(this.options,e);if(e.touchAction){this.touchAction.update()}if(e.inputTarget){this.input.destroy();this.input.target=e.inputTarget;this.input.init()}return this},stop:function(e){this.session.stopped=e?bt:vt},recognize:function(e){var t=this.session;if(t.stopped){return}this.touchAction.preventDefaults(e);var i;var n=this.recognizers;var r=t.curRecognizer;if(!r||r&&r.state&it){r=t.curRecognizer=null}var o=0;while(o<n.length){i=n[o];if(t.stopped!==bt&&(!r||i==r||i.canRecognizeWith(r))){i.recognize(e)}else{i.reset()}if(!r&&i.state&(Je|et|tt)){r=t.curRecognizer=i}o++}},get:function(e){if(e instanceof ot){return e}var t=this.recognizers;for(var i=0;i<t.length;i++){if(t[i].options.event==e){return t[i]}}return null},add:function(e){if(u(e,"add",this)){return this}var t=this.get(e.options.event);if(t){this.remove(t)}this.recognizers.push(e);e.manager=this;this.touchAction.update();return e},remove:function(e){if(u(e,"remove",this)){return this}e=this.get(e);if(e){var t=this.recognizers;var i=E(t,e);if(i!==-1){t.splice(i,1);this.touchAction.update()}}return this},on:function(e,t){if(e===n){return}if(t===n){return}var i=this.handlers;h(x(e),(function(e){i[e]=i[e]||[];i[e].push(t)}));return this},off:function(e,t){if(e===n){return}var i=this.handlers;h(x(e),(function(e){if(!t){delete i[e]}else{i[e]&&i[e].splice(E(i[e],t),1)}}));return this},emit:function(e,t){if(this.options.domEvents){Ct(e,t)}var i=this.handlers[e]&&this.handlers[e].slice();if(!i||!i.length){return}t.type=e;t.preventDefault=function(){t.srcEvent.preventDefault()};var n=0;while(n<i.length){i[n](t);n++}},destroy:function(){this.element&&wt(this,false);this.handlers={};this.session={};this.input.destroy();this.element=null}};function wt(e,t){var i=e.element;if(!i.style){return}var n;h(e.options.cssProps,(function(r,o){n=M(i.style,o);if(t){e.oldCssProps[n]=i.style[n];i.style[n]=r}else{i.style[n]=e.oldCssProps[n]||""}}));if(!t){e.oldCssProps={}}}function Ct(e,i){var n=t.createEvent("Event");n.initEvent(e,true,true);n.gesture=i;i.target.dispatchEvent(n)}f(mt,{INPUT_START:z,INPUT_MOVE:W,INPUT_END:V,INPUT_CANCEL:j,STATE_POSSIBLE:Qe,STATE_BEGAN:Je,STATE_CHANGED:et,STATE_ENDED:tt,STATE_RECOGNIZED:it,STATE_CANCELLED:nt,STATE_FAILED:rt,DIRECTION_NONE:U,DIRECTION_LEFT:Y,DIRECTION_RIGHT:q,DIRECTION_UP:K,DIRECTION_DOWN:X,DIRECTION_HORIZONTAL:Z,DIRECTION_VERTICAL:Q,DIRECTION_ALL:J,Manager:yt,Input:ie,TouchAction:Ke,TouchInput:Re,MouseInput:ye,PointerEventInput:Ae,TouchMouseInput:Le,SingleTouchInput:De,Recognizer:ot,AttrRecognizer:ct,Tap:gt,Pan:dt,Swipe:ft,Pinch:ut,Rotate:pt,Press:ht,on:C,off:_,each:h,merge:m,extend:g,assign:f,inherit:v,bindFn:b,prefixed:M});var _t=typeof e!=="undefined"?e:typeof self!=="undefined"?self:{};_t.Hammer=mt;if(typeof define==="function"&&define.amd){define((function(){return mt}))}else if(typeof module!="undefined"&&module.exports){module.exports=mt}else{e[i]=mt}})(window,document,"Hammer");!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Chart=t()}(this,(function(){"use strict";var e=Object.freeze({__proto__:null,get Colors(){return Xo},get Decimation(){return Jo},get Filler(){return ms},get Legend(){return ws},get SubTitle(){return As},get Title(){return _s},get Tooltip(){return Gs}});function t(){}const i=(()=>{let e=0;return()=>e++})();function n(e){return null==e}function r(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function o(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e){return("number"==typeof e||e instanceof Number)&&isFinite(+e)}function a(e,t){return s(e)?e:t}function l(e,t){return void 0===e?t:e}const c=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/t,d=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function u(e,t,i){if(e&&"function"==typeof e.call)return e.apply(i,t)}function h(e,t,i,n){let s,a,l;if(r(e))if(a=e.length,n)for(s=a-1;s>=0;s--)t.call(i,e[s],s);else for(s=0;s<a;s++)t.call(i,e[s],s);else if(o(e))for(l=Object.keys(e),a=l.length,s=0;s<a;s++)t.call(i,e[l[s]],l[s])}function p(e,t){let i,n,r,o;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(r=e[i],o=t[i],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function f(e){if(r(e))return e.map(f);if(o(e)){const t=Object.create(null),i=Object.keys(e),n=i.length;let r=0;for(;r<n;++r)t[i[r]]=f(e[i[r]]);return t}return e}function g(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function m(e,t,i,n){if(!g(e))return;const r=t[e],s=i[e];o(r)&&o(s)?v(r,s,n):t[e]=f(s)}function v(e,t,i){const n=r(t)?t:[t],s=n.length;if(!o(e))return e;const a=(i=i||{}).merger||m;let l;for(let t=0;t<s;++t){if(l=n[t],!o(l))continue;const r=Object.keys(l);for(let t=0,n=r.length;t<n;++t)a(r[t],e,l,i)}return e}function b(e,t){return v(e,t,{merger:y})}function y(e,t,i){if(!g(e))return;const n=t[e],r=i[e];o(n)&&o(r)?b(n,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=f(r))}const w={"":e=>e,x:e=>e.x,y:e=>e.y};function C(e){const t=e.split("."),i=[];let n="";for(const e of t)n+=e,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function _(e,t){const i=w[t]||(w[t]=function(e){const t=C(e);return e=>{for(const i of t){if(""===i)break;e=e&&e[i]}return e}}(t));return i(e)}function S(e){return e.charAt(0).toUpperCase()+e.slice(1)}const A=e=>void 0!==e,x=e=>"function"==typeof e,E=(e,t)=>{if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0};function T(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}const D=Math.PI,M=2*D,k=M+D,P=Number.POSITIVE_INFINITY,R=D/180,I=D/2,O=D/4,N=2*D/3,L=Math.log10,F=Math.sign;function $(e,t,i){return Math.abs(e-t)<i}function G(e){const t=Math.round(e);e=$(e,t,e/1e3)?t:e;const i=Math.pow(10,Math.floor(L(e))),n=e/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function B(e){const t=[],i=Math.sqrt(e);let n;for(n=1;n<i;n++)e%n==0&&(t.push(n),t.push(e/n));return i===(0|i)&&t.push(i),t.sort(((e,t)=>e-t)).pop(),t}function H(e){return!isNaN(parseFloat(e))&&isFinite(e)}function z(e,t){const i=Math.round(e);return i-t<=e&&i+t>=e}function W(e,t,i){let n,r,o;for(n=0,r=e.length;n<r;n++)o=e[n][i],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function V(e){return e*(D/180)}function j(e){return e*(180/D)}function U(e){if(!s(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function Y(e,t){const i=t.x-e.x,n=t.y-e.y,r=Math.sqrt(i*i+n*n);let o=Math.atan2(n,i);return o<-.5*D&&(o+=M),{angle:o,distance:r}}function q(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function K(e,t){return(e-t+k)%M-D}function X(e){return(e%M+M)%M}function Z(e,t,i,n){const r=X(e),o=X(t),s=X(i),a=X(o-r),l=X(s-r),c=X(r-o),d=X(r-s);return r===o||r===s||n&&o===s||a>l&&c<d}function Q(e,t,i){return Math.max(t,Math.min(i,e))}function J(e){return Q(e,-32768,32767)}function ee(e,t,i,n=1e-6){return e>=Math.min(t,i)-n&&e<=Math.max(t,i)+n}function te(e,t,i){i=i||(i=>e[i]<t);let n,r=e.length-1,o=0;for(;r-o>1;)n=o+r>>1,i(n)?o=n:r=n;return{lo:o,hi:r}}const ie=(e,t,i,n)=>te(e,i,n?n=>{const r=e[n][t];return r<i||r===i&&e[n+1][t]===i}:n=>e[n][t]<i),ne=(e,t,i)=>te(e,i,(n=>e[n][t]>=i));function re(e,t,i){let n=0,r=e.length;for(;n<r&&e[n]<t;)n++;for(;r>n&&e[r-1]>i;)r--;return n>0||r<e.length?e.slice(n,r):e}const oe=["push","pop","shift","splice","unshift"];function se(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),oe.forEach((t=>{const i="_onData"+S(t),n=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(...t){const r=n.apply(this,t);return e._chartjs.listeners.forEach((e=>{"function"==typeof e[i]&&e[i](...t)})),r}})})))}function ae(e,t){const i=e._chartjs;if(!i)return;const n=i.listeners,r=n.indexOf(t);-1!==r&&n.splice(r,1),n.length>0||(oe.forEach((t=>{delete e[t]})),delete e._chartjs)}function le(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const ce="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function de(e,t){let i=[],n=!1;return function(...r){i=r,n||(n=!0,ce.call(window,(()=>{n=!1,e.apply(t,i)})))}}function ue(e,t){let i;return function(...n){return t?(clearTimeout(i),i=setTimeout(e,t,n)):e.apply(this,n),t}}const he=e=>"start"===e?"left":"end"===e?"right":"center",pe=(e,t,i)=>"start"===e?t:"end"===e?i:(t+i)/2,fe=(e,t,i,n)=>e===(n?"left":"right")?i:"center"===e?(t+i)/2:t;function ge(e,t,i){const n=t.length;let r=0,o=n;if(e._sorted){const{iScale:s,_parsed:a}=e,l=s.axis,{min:c,max:d,minDefined:u,maxDefined:h}=s.getUserBounds();u&&(r=Q(Math.min(ie(a,l,c).lo,i?n:ie(t,l,s.getPixelForValue(c)).lo),0,n-1)),o=h?Q(Math.max(ie(a,s.axis,d,!0).hi+1,i?0:ie(t,l,s.getPixelForValue(d),!0).hi+1),r,n)-r:n-r}return{start:r,count:o}}function me(e){const{xScale:t,yScale:i,_scaleRanges:n}=e,r={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!n)return e._scaleRanges=r,!0;const o=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,r),o}class ve{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,n){const r=t.listeners[n],o=t.duration;r.forEach((n=>n({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=ce.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(e=Date.now()){let t=0;this._charts.forEach(((i,n)=>{if(!i.running||!i.items.length)return;const r=i.items;let o,s=r.length-1,a=!1;for(;s>=0;--s)o=r[s],o._active?(o._total>i.duration&&(i.duration=o._total),o.tick(e),a=!0):(r[s]=r[r.length-1],r.pop());a&&(n.draw(),this._notify(n,i,e,"progress")),r.length||(i.running=!1,this._notify(n,i,e,"complete"),i.initial=!1),t+=r.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var be=new ve;function ye(e){return e+.5|0}const we=(e,t,i)=>Math.max(Math.min(e,i),t);function Ce(e){return we(ye(2.55*e),0,255)}function _e(e){return we(ye(255*e),0,255)}function Se(e){return we(ye(e/2.55)/100,0,1)}function Ae(e){return we(ye(100*e),0,100)}const xe={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ee=[..."0123456789ABCDEF"],Te=e=>Ee[15&e],De=e=>Ee[(240&e)>>4]+Ee[15&e],Me=e=>(240&e)>>4==(15&e);function ke(e){var t=(e=>Me(e.r)&&Me(e.g)&&Me(e.b)&&Me(e.a))(e)?Te:De;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Pe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Re(e,t,i){const n=t*Math.min(i,1-i),r=(t,r=(t+e/30)%12)=>i-n*Math.max(Math.min(r-3,9-r,1),-1);return[r(0),r(8),r(4)]}function Ie(e,t,i){const n=(n,r=(n+e/60)%6)=>i-i*t*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function Oe(e,t,i){const n=Re(e,1,.5);let r;for(t+i>1&&(r=1/(t+i),t*=r,i*=r),r=0;r<3;r++)n[r]*=1-t-i,n[r]+=t;return n}function Ne(e){const t=e.r/255,i=e.g/255,n=e.b/255,r=Math.max(t,i,n),o=Math.min(t,i,n),s=(r+o)/2;let a,l,c;return r!==o&&(c=r-o,l=s>.5?c/(2-r-o):c/(r+o),a=function(e,t,i,n,r){return e===r?(t-i)/n+(t<i?6:0):t===r?(i-e)/n+2:(e-t)/n+4}(t,i,n,c,r),a=60*a+.5),[0|a,l||0,s]}function Le(e,t,i,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,n)).map(_e)}function Fe(e,t,i){return Le(Re,e,t,i)}function $e(e){return(e%360+360)%360}function Ge(e){const t=Pe.exec(e);let i,n=255;if(!t)return;t[5]!==i&&(n=t[6]?Ce(+t[5]):_e(+t[5]));const r=$e(+t[2]),o=+t[3]/100,s=+t[4]/100;return i="hwb"===t[1]?function(e,t,i){return Le(Oe,e,t,i)}(r,o,s):"hsv"===t[1]?function(e,t,i){return Le(Ie,e,t,i)}(r,o,s):Fe(r,o,s),{r:i[0],g:i[1],b:i[2],a:n}}const Be={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},He={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let ze;function We(e){ze||(ze=function(){const e={},t=Object.keys(He),i=Object.keys(Be);let n,r,o,s,a;for(n=0;n<t.length;n++){for(s=a=t[n],r=0;r<i.length;r++)o=i[r],a=a.replace(o,Be[o]);o=parseInt(He[s],16),e[a]=[o>>16&255,o>>8&255,255&o]}return e}(),ze.transparent=[0,0,0,0]);const t=ze[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Ve=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const je=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Ue=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Ye(e,t,i){if(e){let n=Ne(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*i,0===t?360:1)),n=Fe(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function qe(e,t){return e?Object.assign(t||{},e):e}function Ke(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=_e(e[3]))):(t=qe(e,{r:0,g:0,b:0,a:1})).a=_e(t.a),t}function Xe(e){return"r"===e.charAt(0)?function(e){const t=Ve.exec(e);let i,n,r,o=255;if(t){if(t[7]!==i){const e=+t[7];o=t[8]?Ce(e):we(255*e,0,255)}return i=+t[1],n=+t[3],r=+t[5],i=255&(t[2]?Ce(i):we(i,0,255)),n=255&(t[4]?Ce(n):we(n,0,255)),r=255&(t[6]?Ce(r):we(r,0,255)),{r:i,g:n,b:r,a:o}}}(e):Ge(e)}class Ze{constructor(e){if(e instanceof Ze)return e;const t=typeof e;let i;var n,r,o;"object"===t?i=Ke(e):"string"===t&&(o=(n=e).length,"#"===n[0]&&(4===o||5===o?r={r:255&17*xe[n[1]],g:255&17*xe[n[2]],b:255&17*xe[n[3]],a:5===o?17*xe[n[4]]:255}:7!==o&&9!==o||(r={r:xe[n[1]]<<4|xe[n[2]],g:xe[n[3]]<<4|xe[n[4]],b:xe[n[5]]<<4|xe[n[6]],a:9===o?xe[n[7]]<<4|xe[n[8]]:255})),i=r||We(e)||Xe(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=qe(this._rgb);return e&&(e.a=Se(e.a)),e}set rgb(e){this._rgb=Ke(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Se(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`):void 0;var e}hexString(){return this._valid?ke(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Ne(e),i=t[0],n=Ae(t[1]),r=Ae(t[2]);return e.a<255?`hsla(${i}, ${n}%, ${r}%, ${Se(e.a)})`:`hsl(${i}, ${n}%, ${r}%)`}(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,n=e.rgb;let r;const o=t===r?.5:t,s=2*o-1,a=i.a-n.a,l=((s*a==-1?s:(s+a)/(1+s*a))+1)/2;r=1-l,i.r=255&l*i.r+r*n.r+.5,i.g=255&l*i.g+r*n.g+.5,i.b=255&l*i.b+r*n.b+.5,i.a=o*i.a+(1-o)*n.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,i){const n=Ue(Se(e.r)),r=Ue(Se(e.g)),o=Ue(Se(e.b));return{r:_e(je(n+i*(Ue(Se(t.r))-n))),g:_e(je(r+i*(Ue(Se(t.g))-r))),b:_e(je(o+i*(Ue(Se(t.b))-o))),a:e.a+i*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Ze(this.rgb)}alpha(e){return this._rgb.a=_e(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=ye(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ye(this._rgb,2,e),this}darken(e){return Ye(this._rgb,2,-e),this}saturate(e){return Ye(this._rgb,1,e),this}desaturate(e){return Ye(this._rgb,1,-e),this}rotate(e){return function(e,t){var i=Ne(e);i[0]=$e(i[0]+t),i=Fe(i),e.r=i[0],e.g=i[1],e.b=i[2]}(this._rgb,e),this}}function Qe(e){if(e&&"object"==typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Je(e){return Qe(e)?e:new Ze(e)}function et(e){return Qe(e)?e:new Ze(e).saturate(.5).darken(.1).hexString()}const tt=["x","y","borderWidth","radius","tension"],it=["color","borderColor","backgroundColor"];const nt=new Map;function rt(e,t,i){return function(e,t){t=t||{};const i=e+JSON.stringify(t);let n=nt.get(i);return n||(n=new Intl.NumberFormat(e,t),nt.set(i,n)),n}(t,i).format(e)}const ot={values:e=>r(e)?e:""+e,numeric(e,t,i){if(0===e)return"0";const n=this.chart.options.locale;let r,o=e;if(i.length>1){const t=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),o=function(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e));return i}(e,i)}const s=L(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),rt(e,n,l)},logarithmic(e,t,i){if(0===e)return"0";const n=i[t].significand||e/Math.pow(10,Math.floor(L(e)));return[1,2,3,5,10,15].includes(n)||t>.8*i.length?ot.numeric.call(this,e,t,i):""}};var st={formatters:ot};const at=Object.create(null),lt=Object.create(null);function ct(e,t){if(!t)return e;const i=t.split(".");for(let t=0,n=i.length;t<n;++t){const n=i[t];e=e[n]||(e[n]=Object.create(null))}return e}function dt(e,t,i){return"string"==typeof t?v(ct(e,t),i):v(ct(e,""),t)}class ut{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>et(t.backgroundColor),this.hoverBorderColor=(e,t)=>et(t.borderColor),this.hoverColor=(e,t)=>et(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return dt(this,e,t)}get(e){return ct(this,e)}describe(e,t){return dt(lt,e,t)}override(e,t){return dt(at,e,t)}route(e,t,i,n){const r=ct(this,e),s=ct(this,i),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=s[n];return o(e)?Object.assign({},t,e):l(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach((e=>e(this)))}}var ht=new ut({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:it},numbers:{type:"number",properties:tt}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:st.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function pt(){return"undefined"!=typeof window&&"undefined"!=typeof document}function ft(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function gt(e,t,i){let n;return"string"==typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[i])):n=e,n}const mt=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function vt(e,t){return mt(e).getPropertyValue(t)}const bt=["top","right","bottom","left"];function yt(e,t,i){const n={};i=i?"-"+i:"";for(let r=0;r<4;r++){const o=bt[r];n[o]=parseFloat(e[t+"-"+o+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const wt=(e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot);function Ct(e,t){if("native"in e)return e;const{canvas:i,currentDevicePixelRatio:n}=t,r=mt(i),o="border-box"===r.boxSizing,s=yt(r,"padding"),a=yt(r,"border","width"),{x:l,y:c,box:d}=function(e,t){const i=e.touches,n=i&&i.length?i[0]:e,{offsetX:r,offsetY:o}=n;let s,a,l=!1;if(wt(r,o,e.target))s=r,a=o;else{const e=t.getBoundingClientRect();s=n.clientX-e.left,a=n.clientY-e.top,l=!0}return{x:s,y:a,box:l}}(e,i),u=s.left+(d&&a.left),h=s.top+(d&&a.top);let{width:p,height:f}=t;return o&&(p-=s.width+a.width,f-=s.height+a.height),{x:Math.round((l-u)/p*i.width/n),y:Math.round((c-h)/f*i.height/n)}}const _t=e=>Math.round(10*e)/10;function St(e,t,i,n){const r=mt(e),o=yt(r,"margin"),s=gt(r.maxWidth,e,"clientWidth")||P,a=gt(r.maxHeight,e,"clientHeight")||P,l=function(e,t,i){let n,r;if(void 0===t||void 0===i){const o=e&&ft(e);if(o){const e=o.getBoundingClientRect(),s=mt(o),a=yt(s,"border","width"),l=yt(s,"padding");t=e.width-l.width-a.width,i=e.height-l.height-a.height,n=gt(s.maxWidth,o,"clientWidth"),r=gt(s.maxHeight,o,"clientHeight")}else t=e.clientWidth,i=e.clientHeight}return{width:t,height:i,maxWidth:n||P,maxHeight:r||P}}(e,t,i);let{width:c,height:d}=l;if("content-box"===r.boxSizing){const e=yt(r,"border","width"),t=yt(r,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-o.width),d=Math.max(0,n?c/n:d-o.height),c=_t(Math.min(c,s,l.maxWidth)),d=_t(Math.min(d,a,l.maxHeight)),c&&!d&&(d=_t(c/2));return(void 0!==t||void 0!==i)&&n&&l.height&&d>l.height&&(d=l.height,c=_t(Math.floor(d*n))),{width:c,height:d}}function At(e,t,i){const n=t||1,r=Math.floor(e.height*n),o=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const s=e.canvas;return s.style&&(i||!s.style.height&&!s.style.width)&&(s.style.height=`${e.height}px`,s.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==n||s.height!==r||s.width!==o)&&(e.currentDevicePixelRatio=n,s.height=r,s.width=o,e.ctx.setTransform(n,0,0,n,0,0),!0)}const xt=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};pt()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(e){}return e}();function Et(e,t){const i=vt(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Tt(e){return!e||n(e.size)||n(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Dt(e,t,i,n,r){let o=t[r];return o||(o=t[r]=e.measureText(r).width,i.push(r)),o>n&&(n=o),n}function Mt(e,t,i,n){let o=(n=n||{}).data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(o=n.data={},s=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let a=0;const l=i.length;let c,d,u,h,p;for(c=0;c<l;c++)if(h=i[c],null==h||r(h)){if(r(h))for(d=0,u=h.length;d<u;d++)p=h[d],null==p||r(p)||(a=Dt(e,o,s,a,p))}else a=Dt(e,o,s,a,h);e.restore();const f=s.length/2;if(f>i.length){for(c=0;c<f;c++)delete o[s[c]];s.splice(0,f)}return a}function kt(e,t,i){const n=e.currentDevicePixelRatio,r=0!==i?Math.max(i/2,.5):0;return Math.round((t-r)*n)/n+r}function Pt(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Rt(e,t,i,n){It(e,t,i,n,null)}function It(e,t,i,n,r){let o,s,a,l,c,d,u,h;const p=t.pointStyle,f=t.rotation,g=t.radius;let m=(f||0)*R;if(p&&"object"==typeof p&&(o=p.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return e.save(),e.translate(i,n),e.rotate(m),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),p){default:r?e.ellipse(i,n,r/2,g,0,0,M):e.arc(i,n,g,0,M),e.closePath();break;case"triangle":d=r?r/2:g,e.moveTo(i+Math.sin(m)*d,n-Math.cos(m)*g),m+=N,e.lineTo(i+Math.sin(m)*d,n-Math.cos(m)*g),m+=N,e.lineTo(i+Math.sin(m)*d,n-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,s=Math.cos(m+O)*l,u=Math.cos(m+O)*(r?r/2-c:l),a=Math.sin(m+O)*l,h=Math.sin(m+O)*(r?r/2-c:l),e.arc(i-u,n-a,c,m-D,m-I),e.arc(i+h,n-s,c,m-I,m),e.arc(i+u,n+a,c,m,m+I),e.arc(i-h,n+s,c,m+I,m+D),e.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*g,d=r?r/2:l,e.rect(i-d,n-l,2*d,2*l);break}m+=O;case"rectRot":u=Math.cos(m)*(r?r/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),e.moveTo(i-u,n-a),e.lineTo(i+h,n-s),e.lineTo(i+u,n+a),e.lineTo(i-h,n+s),e.closePath();break;case"crossRot":m+=O;case"cross":u=Math.cos(m)*(r?r/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+h,n-s),e.lineTo(i-h,n+s);break;case"star":u=Math.cos(m)*(r?r/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+h,n-s),e.lineTo(i-h,n+s),m+=O,u=Math.cos(m)*(r?r/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+h,n-s),e.lineTo(i-h,n+s);break;case"line":s=r?r/2:Math.cos(m)*g,a=Math.sin(m)*g,e.moveTo(i-s,n-a),e.lineTo(i+s,n+a);break;case"dash":e.moveTo(i,n),e.lineTo(i+Math.cos(m)*(r?r/2:g),n+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Ot(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function Nt(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Lt(e){e.restore()}function Ft(e,t,i,n,r){if(!t)return e.lineTo(i.x,i.y);if("middle"===r){const n=(t.x+i.x)/2;e.lineTo(n,t.y),e.lineTo(n,i.y)}else"after"===r!=!!n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function $t(e,t,i,n){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function Gt(e,t,i,n,r){if(r.strikethrough||r.underline){const o=e.measureText(n),s=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=i-o.actualBoundingBoxAscent,c=i+o.actualBoundingBoxDescent,d=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(s,d),e.lineTo(a,d),e.stroke()}}function Bt(e,t){const i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function Ht(e,t,i,o,s,a={}){const l=r(t)?t:[t],c=a.strokeWidth>0&&""!==a.strokeColor;let d,u;for(e.save(),e.font=s.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),n(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,a),d=0;d<l.length;++d)u=l[d],a.backdrop&&Bt(e,a.backdrop),c&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),n(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(u,i,o,a.maxWidth)),e.fillText(u,i,o,a.maxWidth),Gt(e,i,o,u,a),o+=Number(s.lineHeight);e.restore()}function zt(e,t){const{x:i,y:n,w:r,h:o,radius:s}=t;e.arc(i+s.topLeft,n+s.topLeft,s.topLeft,1.5*D,D,!0),e.lineTo(i,n+o-s.bottomLeft),e.arc(i+s.bottomLeft,n+o-s.bottomLeft,s.bottomLeft,D,I,!0),e.lineTo(i+r-s.bottomRight,n+o),e.arc(i+r-s.bottomRight,n+o-s.bottomRight,s.bottomRight,I,0,!0),e.lineTo(i+r,n+s.topRight),e.arc(i+r-s.topRight,n+s.topRight,s.topRight,0,-I,!0),e.lineTo(i+s.topLeft,n)}function Wt(e,t=[""],i,n,r=()=>e[0]){const o=i||e;void 0===n&&(n=ei("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:o,_fallback:n,_getTarget:r,override:i=>Wt([i,...e],t,o,n)};return new Proxy(s,{deleteProperty:(t,i)=>(delete t[i],delete t._keys,delete e[0][i],!0),get:(i,n)=>qt(i,n,(()=>function(e,t,i,n){let r;for(const o of t)if(r=ei(Ut(o,e),i),void 0!==r)return Yt(e,r)?Qt(i,n,e,r):r}(n,t,e,i))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>ti(e).includes(t),ownKeys:e=>ti(e),set(e,t,i){const n=e._storage||(e._storage=r());return e[t]=n[t]=i,delete e._keys,!0}})}function Vt(e,t,i,n){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:jt(e,n),setContext:t=>Vt(e,t,i,n),override:r=>Vt(e.override(r),t,i,n)};return new Proxy(s,{deleteProperty:(t,i)=>(delete t[i],delete e[i],!0),get:(e,t,i)=>qt(e,t,(()=>function(e,t,i){const{_proxy:n,_context:s,_subProxy:a,_descriptors:l}=e;let c=n[t];x(c)&&l.isScriptable(t)&&(c=function(e,t,i,n){const{_proxy:r,_context:o,_subProxy:s,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(o,s||n);a.delete(e),Yt(e,l)&&(l=Qt(r._scopes,r,e,l));return l}(t,c,e,i));r(c)&&c.length&&(c=function(e,t,i,n){const{_proxy:r,_context:s,_subProxy:a,_descriptors:l}=i;if(void 0!==s.index&&n(e))return t[s.index%t.length];if(o(t[0])){const i=t,n=r._scopes.filter((e=>e!==i));t=[];for(const o of i){const i=Qt(n,r,e,o);t.push(Vt(i,s,a&&a[e],l))}}return t}(t,c,e,l.isIndexable));Yt(t,c)&&(c=Vt(c,s,a&&a[t],l));return c}(e,t,i))),getOwnPropertyDescriptor:(t,i)=>t._descriptors.allKeys?Reflect.has(e,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,i),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,i)=>Reflect.has(e,i),ownKeys:()=>Reflect.ownKeys(e),set:(t,i,n)=>(e[i]=n,delete t[i],!0)})}function jt(e,t={scriptable:!0,indexable:!0}){const{_scriptable:i=t.scriptable,_indexable:n=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:i,indexable:n,isScriptable:x(i)?i:()=>i,isIndexable:x(n)?n:()=>n}}const Ut=(e,t)=>e?e+S(t):t,Yt=(e,t)=>o(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function qt(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const n=i();return e[t]=n,n}function Kt(e,t,i){return x(e)?e(t,i):e}const Xt=(e,t)=>!0===e?t:"string"==typeof e?_(t,e):void 0;function Zt(e,t,i,n,r){for(const o of t){const t=Xt(i,o);if(t){e.add(t);const o=Kt(t._fallback,i,r);if(void 0!==o&&o!==i&&o!==n)return o}else if(!1===t&&void 0!==n&&i!==n)return null}return!1}function Qt(e,t,i,n){const s=t._rootScopes,a=Kt(t._fallback,i,n),l=[...e,...s],c=new Set;c.add(n);let d=Jt(c,l,i,a||i,n);return null!==d&&((void 0===a||a===i||(d=Jt(c,l,a,d,n),null!==d))&&Wt(Array.from(c),[""],s,a,(()=>function(e,t,i){const n=e._getTarget();t in n||(n[t]={});const s=n[t];if(r(s)&&o(i))return i;return s||{}}(t,i,n))))}function Jt(e,t,i,n,r){for(;i;)i=Zt(e,t,i,n,r);return i}function ei(e,t){for(const i of t){if(!i)continue;const t=i[e];if(void 0!==t)return t}}function ti(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const i of e)for(const e of Object.keys(i).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function ii(e,t,i,n){const{iScale:r}=e,{key:o="r"}=this._parsing,s=new Array(n);let a,l,c,d;for(a=0,l=n;a<l;++a)c=a+i,d=t[c],s[a]={r:r.parse(_(d,o),c)};return s}const ni=Number.EPSILON||1e-14,ri=(e,t)=>t<e.length&&!e[t].skip&&e[t],oi=e=>"x"===e?"y":"x";function si(e,t,i,n){const r=e.skip?t:e,o=t,s=i.skip?t:i,a=q(o,r),l=q(s,o);let c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=n*c,h=n*d;return{previous:{x:o.x-u*(s.x-r.x),y:o.y-u*(s.y-r.y)},next:{x:o.x+h*(s.x-r.x),y:o.y+h*(s.y-r.y)}}}function ai(e,t="x"){const i=oi(t),n=e.length,r=Array(n).fill(0),o=Array(n);let s,a,l,c=ri(e,0);for(s=0;s<n;++s)if(a=l,l=c,c=ri(e,s+1),l){if(c){const e=c[t]-l[t];r[s]=0!==e?(c[i]-l[i])/e:0}o[s]=a?c?F(r[s-1])!==F(r[s])?0:(r[s-1]+r[s])/2:r[s-1]:r[s]}!function(e,t,i){const n=e.length;let r,o,s,a,l,c=ri(e,0);for(let d=0;d<n-1;++d)l=c,c=ri(e,d+1),l&&c&&($(t[d],0,ni)?i[d]=i[d+1]=0:(r=i[d]/t[d],o=i[d+1]/t[d],a=Math.pow(r,2)+Math.pow(o,2),a<=9||(s=3/Math.sqrt(a),i[d]=r*s*t[d],i[d+1]=o*s*t[d])))}(e,r,o),function(e,t,i="x"){const n=oi(i),r=e.length;let o,s,a,l=ri(e,0);for(let c=0;c<r;++c){if(s=a,a=l,l=ri(e,c+1),!a)continue;const r=a[i],d=a[n];s&&(o=(r-s[i])/3,a[`cp1${i}`]=r-o,a[`cp1${n}`]=d-o*t[c]),l&&(o=(l[i]-r)/3,a[`cp2${i}`]=r+o,a[`cp2${n}`]=d+o*t[c])}}(e,o,t)}function li(e,t,i){return Math.max(Math.min(e,i),t)}function ci(e,t,i,n,r){let o,s,a,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)ai(e,r);else{let i=n?e[e.length-1]:e[0];for(o=0,s=e.length;o<s;++o)a=e[o],l=si(i,a,e[Math.min(o+1,s-(n?0:1))%s],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,i=a}t.capBezierPoints&&function(e,t){let i,n,r,o,s,a=Ot(e[0],t);for(i=0,n=e.length;i<n;++i)s=o,o=a,a=i<n-1&&Ot(e[i+1],t),o&&(r=e[i],s&&(r.cp1x=li(r.cp1x,t.left,t.right),r.cp1y=li(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=li(r.cp2x,t.left,t.right),r.cp2y=li(r.cp2y,t.top,t.bottom)))}(e,i)}const di=e=>0===e||1===e,ui=(e,t,i)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*M/i),hi=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*M/i)+1,pi={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*I),easeOutSine:e=>Math.sin(e*I),easeInOutSine:e=>-.5*(Math.cos(D*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>di(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>di(e)?e:ui(e,.075,.3),easeOutElastic:e=>di(e)?e:hi(e,.075,.3),easeInOutElastic(e){const t=.1125;return di(e)?e:e<.5?.5*ui(2*e,t,.45):.5+.5*hi(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-pi.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,i=2.75;return e<1/i?t*e*e:e<2/i?t*(e-=1.5/i)*e+.75:e<2.5/i?t*(e-=2.25/i)*e+.9375:t*(e-=2.625/i)*e+.984375},easeInOutBounce:e=>e<.5?.5*pi.easeInBounce(2*e):.5*pi.easeOutBounce(2*e-1)+.5};function fi(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function gi(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:"middle"===n?i<.5?e.y:t.y:"after"===n?i<1?e.y:t.y:i>0?t.y:e.y}}function mi(e,t,i,n){const r={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},s=fi(e,r,i),a=fi(r,o,i),l=fi(o,t,i),c=fi(s,a,i),d=fi(a,l,i);return fi(c,d,i)}const vi=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,bi=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function yi(e,t){const i=(""+e).match(vi);if(!i||"normal"===i[1])return 1.2*t;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100}return t*e}const wi=e=>+e||0;function Ci(e,t){const i={},n=o(t),r=n?Object.keys(t):t,s=o(e)?n?i=>l(e[i],e[t[i]]):t=>e[t]:()=>e;for(const e of r)i[e]=wi(s(e));return i}function _i(e){return Ci(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Si(e){return Ci(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Ai(e){const t=_i(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function xi(e,t){e=e||{},t=t||ht.font;let i=l(e.size,t.size);"string"==typeof i&&(i=parseInt(i,10));let n=l(e.style,t.style);n&&!(""+n).match(bi)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:l(e.family,t.family),lineHeight:yi(l(e.lineHeight,t.lineHeight),i),size:i,style:n,weight:l(e.weight,t.weight),string:""};return r.string=Tt(r),r}function Ei(e,t,i,n){let o,s,a,l=!0;for(o=0,s=e.length;o<s;++o)if(a=e[o],void 0!==a&&(void 0!==t&&"function"==typeof a&&(a=a(t),l=!1),void 0!==i&&r(a)&&(a=a[i%a.length],l=!1),void 0!==a))return n&&!l&&(n.cacheable=!1),a}function Ti(e,t,i){const{min:n,max:r}=e,o=d(t,(r-n)/2),s=(e,t)=>i&&0===e?0:e+t;return{min:s(n,-Math.abs(o)),max:s(r,o)}}function Di(e,t){return Object.assign(Object.create(e),t)}function Mi(e,t,i){return e?function(e,t){return{x:i=>e+e+t-i,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,i):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function ki(e,t){let i,n;"ltr"!==t&&"rtl"!==t||(i=e.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=n)}function Pi(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Ri(e){return"angle"===e?{between:Z,compare:K,normalize:X}:{between:ee,compare:(e,t)=>e-t,normalize:e=>e}}function Ii({start:e,end:t,count:i,loop:n,style:r}){return{start:e%i,end:t%i,loop:n&&(t-e+1)%i==0,style:r}}function Oi(e,t,i){if(!i)return[e];const{property:n,start:r,end:o}=i,s=t.length,{compare:a,between:l,normalize:c}=Ri(n),{start:d,end:u,loop:h,style:p}=function(e,t,i){const{property:n,start:r,end:o}=i,{between:s,normalize:a}=Ri(n),l=t.length;let c,d,{start:u,end:h,loop:p}=e;if(p){for(u+=l,h+=l,c=0,d=l;c<d&&s(a(t[u%l][n]),r,o);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:p,style:e.style}}(e,t,i),f=[];let g,m,v,b=!1,y=null;const w=()=>b||l(r,v,g)&&0!==a(r,v),C=()=>!b||0===a(o,g)||l(o,v,g);for(let e=d,i=d;e<=u;++e)m=t[e%s],m.skip||(g=c(m[n]),g!==v&&(b=l(g,r,o),null===y&&w()&&(y=0===a(g,r)?e:i),null!==y&&C()&&(f.push(Ii({start:y,end:e,loop:h,count:s,style:p})),y=null),i=e,v=g));return null!==y&&f.push(Ii({start:y,end:u,loop:h,count:s,style:p})),f}function Ni(e,t){const i=[],n=e.segments;for(let r=0;r<n.length;r++){const o=Oi(n[r],e.points,t);o.length&&i.push(...o)}return i}function Li(e,t){const i=e.points,n=e.options.spanGaps,r=i.length;if(!r)return[];const o=!!e._loop,{start:s,end:a}=function(e,t,i,n){let r=0,o=t-1;if(i&&!n)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,i&&(o+=r);o>r&&e[o%t].skip;)o--;return o%=t,{start:r,end:o}}(i,r,o,n);if(!0===n)return Fi(e,[{start:s,end:a,loop:o}],i,t);return Fi(e,function(e,t,i,n){const r=e.length,o=[];let s,a=t,l=e[t];for(s=t+1;s<=i;++s){const i=e[s%r];i.skip||i.stop?l.skip||(n=!1,o.push({start:t%r,end:(s-1)%r,loop:n}),t=a=i.stop?s:null):(a=s,l.skip&&(t=s)),l=i}return null!==a&&o.push({start:t%r,end:a%r,loop:n}),o}(i,s,a<s?a+r:a,!!e._fullLoop&&0===s&&a===r-1),i,t)}function Fi(e,t,i,n){return n&&n.setContext&&i?function(e,t,i,n){const r=e._chart.getContext(),o=$i(e.options),{_datasetIndex:s,options:{spanGaps:a}}=e,l=i.length,c=[];let d=o,u=t[0].start,h=u;function p(e,t,n,r){const o=a?-1:1;if(e!==t){for(e+=l;i[e%l].skip;)e-=o;for(;i[t%l].skip;)t+=o;e%l!=t%l&&(c.push({start:e%l,end:t%l,loop:n,style:r}),d=r,u=t%l)}}for(const e of t){u=a?u:e.start;let t,o=i[u%l];for(h=u+1;h<=e.end;h++){const a=i[h%l];t=$i(n.setContext(Di(r,{type:"segment",p0:o,p1:a,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),Gi(t,d)&&p(u,h-1,e.loop,d),o=a,d=t}u<h-1&&p(u,h-1,e.loop,d)}return c}(e,t,i,n):t}function $i(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Gi(e,t){if(!t)return!1;const i=[],n=function(e,t){return Qe(t)?(i.includes(t)||i.push(t),i.indexOf(t)):t};return JSON.stringify(e,n)!==JSON.stringify(t,n)}var Bi=Object.freeze({__proto__:null,HALF_PI:I,INFINITY:P,PI:D,PITAU:k,QUARTER_PI:O,RAD_PER_DEG:R,TAU:M,TWO_THIRDS_PI:N,_addGrace:Ti,_alignPixel:kt,_alignStartEnd:pe,_angleBetween:Z,_angleDiff:K,_arrayUnique:le,_attachContext:Vt,_bezierCurveTo:$t,_bezierInterpolation:mi,_boundSegment:Oi,_boundSegments:Ni,_capitalize:S,_computeSegments:Li,_createResolver:Wt,_decimalPlaces:U,_deprecated:function(e,t,i,n){void 0!==t&&console.warn(e+': "'+i+'" is deprecated. Please use "'+n+'" instead')},_descriptors:jt,_elementsEqual:p,_factorize:B,_filterBetween:re,_getParentNode:ft,_getStartAndCountOfVisiblePoints:ge,_int16Range:J,_isBetween:ee,_isClickEvent:T,_isDomSupported:pt,_isPointInArea:Ot,_limitValue:Q,_longestText:Mt,_lookup:te,_lookupByKey:ie,_measureText:Dt,_merger:m,_mergerIf:y,_normalizeAngle:X,_parseObjectDataRadialScale:ii,_pointInLine:fi,_readValueToProps:Ci,_rlookupByKey:ne,_scaleRangesChanged:me,_setMinAndMaxByKey:W,_splitKey:C,_steppedInterpolation:gi,_steppedLineTo:Ft,_textX:fe,_toLeftRightCenter:he,_updateBezierControlPoints:ci,addRoundedRectPath:zt,almostEquals:$,almostWhole:z,callback:u,clearCanvas:Pt,clipArea:Nt,clone:f,color:Je,createContext:Di,debounce:ue,defined:A,distanceBetweenPoints:q,drawPoint:Rt,drawPointLegend:It,each:h,easingEffects:pi,finiteOrDefault:a,fontString:function(e,t,i){return t+" "+e+"px "+i},formatNumber:rt,getAngleFromPoint:Y,getHoverColor:et,getMaximumSize:St,getRelativePosition:Ct,getRtlAdapter:Mi,getStyle:vt,isArray:r,isFinite:s,isFunction:x,isNullOrUndef:n,isNumber:H,isObject:o,isPatternOrGradient:Qe,listenArrayEvents:se,log10:L,merge:v,mergeIf:b,niceNum:G,noop:t,overrideTextDirection:ki,readUsedSize:Et,renderText:Ht,requestAnimFrame:ce,resolve:Ei,resolveObjectKey:_,restoreTextDirection:Pi,retinaScale:At,setsEqual:E,sign:F,splineCurve:si,splineCurveMonotone:ai,supportsEventListenerOptions:xt,throttled:de,toDegrees:j,toDimension:d,toFont:xi,toFontString:Tt,toLineHeight:yi,toPadding:Ai,toPercentage:c,toRadians:V,toTRBL:_i,toTRBLCorners:Si,uid:i,unclipArea:Lt,unlistenArrayEvents:ae,valueOrDefault:l});function Hi(e,t,i,n){const{controller:r,data:o,_sorted:s}=e,a=r._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&s&&o.length){const e=a._reversePixels?ne:ie;if(!n)return e(o,t,i);if(r._sharedOptions){const n=o[0],r="function"==typeof n.getRange&&n.getRange(t);if(r){const n=e(o,t,i-r),s=e(o,t,i+r);return{lo:n.lo,hi:s.hi}}}}return{lo:0,hi:o.length-1}}function zi(e,t,i,n,r){const o=e.getSortedVisibleDatasetMetas(),s=i[t];for(let e=0,i=o.length;e<i;++e){const{index:i,data:a}=o[e],{lo:l,hi:c}=Hi(o[e],t,s,r);for(let e=l;e<=c;++e){const t=a[e];t.skip||n(t,i,e)}}}function Wi(e,t,i,n,r){const o=[];if(!r&&!e.isPointInArea(t))return o;return zi(e,i,t,(function(i,s,a){(r||Ot(i,e.chartArea,0))&&i.inRange(t.x,t.y,n)&&o.push({element:i,datasetIndex:s,index:a})}),!0),o}function Vi(e,t,i,n,r,o){let s=[];const a=function(e){const t=-1!==e.indexOf("x"),i=-1!==e.indexOf("y");return function(e,n){const r=t?Math.abs(e.x-n.x):0,o=i?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}(i);let l=Number.POSITIVE_INFINITY;return zi(e,i,t,(function(i,c,d){const u=i.inRange(t.x,t.y,r);if(n&&!u)return;const h=i.getCenterPoint(r);if(!(!!o||e.isPointInArea(h))&&!u)return;const p=a(t,h);p<l?(s=[{element:i,datasetIndex:c,index:d}],l=p):p===l&&s.push({element:i,datasetIndex:c,index:d})})),s}function ji(e,t,i,n,r,o){return o||e.isPointInArea(t)?"r"!==i||n?Vi(e,t,i,n,r,o):function(e,t,i,n){let r=[];return zi(e,i,t,(function(e,i,o){const{startAngle:s,endAngle:a}=e.getProps(["startAngle","endAngle"],n),{angle:l}=Y(e,{x:t.x,y:t.y});Z(l,s,a)&&r.push({element:e,datasetIndex:i,index:o})})),r}(e,t,i,r):[]}function Ui(e,t,i,n,r){const o=[],s="x"===i?"inXRange":"inYRange";let a=!1;return zi(e,i,t,((e,n,l)=>{e[s]&&e[s](t[i],r)&&(o.push({element:e,datasetIndex:n,index:l}),a=a||e.inRange(t.x,t.y,r))})),n&&!a?[]:o}var Yi={evaluateInteractionItems:zi,modes:{index(e,t,i,n){const r=Ct(t,e),o=i.axis||"x",s=i.includeInvisible||!1,a=i.intersect?Wi(e,r,o,n,s):ji(e,r,o,!1,n,s),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=a[0].index,i=e.data[t];i&&!i.skip&&l.push({element:i,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,i,n){const r=Ct(t,e),o=i.axis||"xy",s=i.includeInvisible||!1;let a=i.intersect?Wi(e,r,o,n,s):ji(e,r,o,!1,n,s);if(a.length>0){const t=a[0].datasetIndex,i=e.getDatasetMeta(t).data;a=[];for(let e=0;e<i.length;++e)a.push({element:i[e],datasetIndex:t,index:e})}return a},point:(e,t,i,n)=>Wi(e,Ct(t,e),i.axis||"xy",n,i.includeInvisible||!1),nearest(e,t,i,n){const r=Ct(t,e),o=i.axis||"xy",s=i.includeInvisible||!1;return ji(e,r,o,i.intersect,n,s)},x:(e,t,i,n)=>Ui(e,Ct(t,e),"x",i.intersect,n),y:(e,t,i,n)=>Ui(e,Ct(t,e),"y",i.intersect,n)}};const qi=["left","top","right","bottom"];function Ki(e,t){return e.filter((e=>e.pos===t))}function Xi(e,t){return e.filter((e=>-1===qi.indexOf(e.pos)&&e.box.axis===t))}function Zi(e,t){return e.sort(((e,i)=>{const n=t?i:e,r=t?e:i;return n.weight===r.weight?n.index-r.index:n.weight-r.weight}))}function Qi(e,t){const i=function(e){const t={};for(const i of e){const{stack:e,pos:n,stackWeight:r}=i;if(!e||!qi.includes(n))continue;const o=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}(e),{vBoxMaxWidth:n,hBoxMaxHeight:r}=t;let o,s,a;for(o=0,s=e.length;o<s;++o){a=e[o];const{fullSize:s}=a.box,l=i[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*n:s&&t.availableWidth,a.height=r):(a.width=n,a.height=c?c*r:s&&t.availableHeight)}return i}function Ji(e,t,i,n){return Math.max(e[i],t[i])+Math.max(e[n],t[n])}function en(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function tn(e,t,i,n){const{pos:r,box:s}=i,a=e.maxPadding;if(!o(r)){i.size&&(e[r]-=i.size);const t=n[i.stack]||{size:0,count:1};t.size=Math.max(t.size,i.horizontal?s.height:s.width),i.size=t.size/t.count,e[r]+=i.size}s.getPadding&&en(a,s.getPadding());const l=Math.max(0,t.outerWidth-Ji(a,e,"left","right")),c=Math.max(0,t.outerHeight-Ji(a,e,"top","bottom")),d=l!==e.w,u=c!==e.h;return e.w=l,e.h=c,i.horizontal?{same:d,other:u}:{same:u,other:d}}function nn(e,t){const i=t.maxPadding;function n(e){const n={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{n[e]=Math.max(t[e],i[e])})),n}return n(e?["left","right"]:["top","bottom"])}function rn(e,t,i,n){const r=[];let o,s,a,l,c,d;for(o=0,s=e.length,c=0;o<s;++o){a=e[o],l=a.box,l.update(a.width||t.w,a.height||t.h,nn(a.horizontal,t));const{same:s,other:u}=tn(t,i,a,n);c|=s&&r.length,d=d||u,l.fullSize||r.push(a)}return c&&rn(r,t,i,n)||d}function on(e,t,i,n,r){e.top=i,e.left=t,e.right=t+n,e.bottom=i+r,e.width=n,e.height=r}function sn(e,t,i,n){const r=i.padding;let{x:o,y:s}=t;for(const a of e){const e=a.box,l=n[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const n=t.w*c,o=l.size||e.height;A(l.start)&&(s=l.start),e.fullSize?on(e,r.left,s,i.outerWidth-r.right-r.left,o):on(e,t.left+l.placed,s,n,o),l.start=s,l.placed+=n,s=e.bottom}else{const n=t.h*c,s=l.size||e.width;A(l.start)&&(o=l.start),e.fullSize?on(e,o,r.top,s,i.outerHeight-r.bottom-r.top):on(e,o,t.top+l.placed,s,n),l.start=o,l.placed+=n,o=e.right}}t.x=o,t.y=s}var an={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const i=e.boxes?e.boxes.indexOf(t):-1;-1!==i&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,n){if(!e)return;const r=Ai(e.options.layout.padding),o=Math.max(t-r.width,0),s=Math.max(i-r.height,0),a=function(e){const t=function(e){const t=[];let i,n,r,o,s,a;for(i=0,n=(e||[]).length;i<n;++i)r=e[i],({position:o,options:{stack:s,stackWeight:a=1}}=r),t.push({index:i,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:s&&o+s,stackWeight:a});return t}(e),i=Zi(t.filter((e=>e.box.fullSize)),!0),n=Zi(Ki(t,"left"),!0),r=Zi(Ki(t,"right")),o=Zi(Ki(t,"top"),!0),s=Zi(Ki(t,"bottom")),a=Xi(t,"x"),l=Xi(t,"y");return{fullSize:i,leftAndTop:n.concat(o),rightAndBottom:r.concat(l).concat(s).concat(a),chartArea:Ki(t,"chartArea"),vertical:n.concat(r).concat(l),horizontal:o.concat(s).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;h(e.boxes,(e=>{"function"==typeof e.beforeLayout&&e.beforeLayout()}));const d=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,u=Object.freeze({outerWidth:t,outerHeight:i,padding:r,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/d,hBoxMaxHeight:s/2}),p=Object.assign({},r);en(p,Ai(n));const f=Object.assign({maxPadding:p,w:o,h:s,x:r.left,y:r.top},r),g=Qi(l.concat(c),u);rn(a.fullSize,f,u,g),rn(l,f,u,g),rn(c,f,u,g)&&rn(l,f,u,g),function(e){const t=e.maxPadding;function i(i){const n=Math.max(t[i]-e[i],0);return e[i]+=n,n}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}(f),sn(a.leftAndTop,f,u,g),f.x+=f.w,f.y+=f.h,sn(a.rightAndBottom,f,u,g),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},h(a.chartArea,(t=>{const i=t.box;Object.assign(i,e.chartArea),i.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class ln{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,n){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):i)}}isAttached(e){return!0}updateConfig(e){}}class cn extends ln{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const dn="$chartjs",un={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hn=e=>null===e||""===e;const pn=!!xt&&{passive:!0};function fn(e,t,i){e&&e.canvas&&e.canvas.removeEventListener(t,i,pn)}function gn(e,t){for(const i of e)if(i===t||i.contains(t))return!0}function mn(e,t,i){const n=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const i of e)t=t||gn(i.addedNodes,n),t=t&&!gn(i.removedNodes,n);t&&i()}));return r.observe(document,{childList:!0,subtree:!0}),r}function vn(e,t,i){const n=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const i of e)t=t||gn(i.removedNodes,n),t=t&&!gn(i.addedNodes,n);t&&i()}));return r.observe(document,{childList:!0,subtree:!0}),r}const bn=new Map;let yn=0;function wn(){const e=window.devicePixelRatio;e!==yn&&(yn=e,bn.forEach(((t,i)=>{i.currentDevicePixelRatio!==e&&t()})))}function Cn(e,t,i){const n=e.canvas,r=n&&ft(n);if(!r)return;const o=de(((e,t)=>{const n=r.clientWidth;i(e,t),n<r.clientWidth&&i()}),window),s=new ResizeObserver((e=>{const t=e[0],i=t.contentRect.width,n=t.contentRect.height;0===i&&0===n||o(i,n)}));return s.observe(r),function(e,t){bn.size||window.addEventListener("resize",wn),bn.set(e,t)}(e,o),s}function _n(e,t,i){i&&i.disconnect(),"resize"===t&&function(e){bn.delete(e),bn.size||window.removeEventListener("resize",wn)}(e)}function Sn(e,t,i){const n=e.canvas,r=de((t=>{null!==e.ctx&&i(function(e,t){const i=un[e.type]||e.type,{x:n,y:r}=Ct(e,t);return{type:i,chart:t,native:e,x:void 0!==n?n:null,y:void 0!==r?r:null}}(t,e))}),e);return function(e,t,i){e&&e.addEventListener(t,i,pn)}(n,t,r),r}class An extends ln{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(function(e,t){const i=e.style,n=e.getAttribute("height"),r=e.getAttribute("width");if(e[dn]={initial:{height:n,width:r,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",hn(r)){const t=Et(e,"width");void 0!==t&&(e.width=t)}if(hn(n))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Et(e,"height");void 0!==t&&(e.height=t)}}(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[dn])return!1;const i=t[dn].initial;["height","width"].forEach((e=>{const r=i[e];n(r)?t.removeAttribute(e):t.setAttribute(e,r)}));const r=i.style||{};return Object.keys(r).forEach((e=>{t.style[e]=r[e]})),t.width=t.width,delete t[dn],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),r={attach:mn,detach:vn,resize:Cn}[t]||Sn;n[t]=r(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),n=i[t];if(!n)return;({attach:_n,detach:_n,resize:_n}[t]||fn)(e,t,n),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,n){return St(e,t,i,n)}isAttached(e){const t=e&&ft(e);return!(!t||!t.isConnected)}}function xn(e){return!pt()||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?cn:An}var En=Object.freeze({__proto__:null,BasePlatform:ln,BasicPlatform:cn,DomPlatform:An,_detectPlatform:xn});const Tn="transparent",Dn={boolean:(e,t,i)=>i>.5?t:e,color(e,t,i){const n=Je(e||Tn),r=n.valid&&Je(t||Tn);return r&&r.valid?r.mix(n,i).hexString():t},number:(e,t,i)=>e+(t-e)*i};class Mn{constructor(e,t,i,n){const r=t[i];n=Ei([e.to,n,r,e.from]);const o=Ei([e.from,r,n]);this._active=!0,this._fn=e.fn||Dn[e.type||typeof o],this._easing=pi[e.easing]||pi.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const n=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Ei([e.to,t,n,e.from]),this._from=Ei([e.from,n,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,n=this._prop,r=this._from,o=this._loop,s=this._to;let a;if(this._active=r!==s&&(o||t<i),!this._active)return this._target[n]=s,void this._notify(!0);t<0?this._target[n]=r:(a=t/i%2,a=o&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[n]=this._fn(r,s,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,i)=>{e.push({res:t,rej:i})}))}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let e=0;e<i.length;e++)i[e][t]()}}class kn{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!o(e))return;const t=Object.keys(ht.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach((n=>{const s=e[n];if(!o(s))return;const a={};for(const e of t)a[e]=s[e];(r(s.properties)&&s.properties||[n]).forEach((e=>{e!==n&&i.has(e)||i.set(e,a)}))}))}_animateOptions(e,t){const i=t.options,n=function(e,t){if(!t)return;let i=e.options;if(!i)return void(e.options=t);i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}}));return i}(e,i);if(!n)return[];const r=this._createAnimations(n,i);return i.$shared&&function(e,t){const i=[],n=Object.keys(t);for(let t=0;t<n.length;t++){const r=e[n[t]];r&&r.active()&&i.push(r.wait())}return Promise.all(i)}(e.options.$animations,i).then((()=>{e.options=i}),(()=>{})),r}_createAnimations(e,t){const i=this._properties,n=[],r=e.$animations||(e.$animations={}),o=Object.keys(t),s=Date.now();let a;for(a=o.length-1;a>=0;--a){const l=o[a];if("$"===l.charAt(0))continue;if("options"===l){n.push(...this._animateOptions(e,t));continue}const c=t[l];let d=r[l];const u=i.get(l);if(d){if(u&&d.active()){d.update(u,c,s);continue}d.cancel()}u&&u.duration?(r[l]=d=new Mn(u,e,l,c),n.push(d)):e[l]=c}return n}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const i=this._createAnimations(e,t);return i.length?(be.add(this._chart,i),!0):void 0}}function Pn(e,t){const i=e&&e.options||{},n=i.reverse,r=void 0===i.min?t:0,o=void 0===i.max?t:0;return{start:n?o:r,end:n?r:o}}function Rn(e,t){const i=[],n=e._getSortedDatasetMetas(t);let r,o;for(r=0,o=n.length;r<o;++r)i.push(n[r].index);return i}function In(e,t,i,n={}){const r=e.keys,o="single"===n.mode;let a,l,c,d;if(null===t)return;let u=!1;for(a=0,l=r.length;a<l;++a){if(c=+r[a],c===i){if(u=!0,n.all)continue;break}d=e.values[c],s(d)&&(o||0===t||F(t)===F(d))&&(t+=d)}return u||n.all?t:0}function On(e,t){const i=e&&e.options.stacked;return i||void 0===i&&void 0!==t.stack}function Nn(e,t,i){const n=e[t]||(e[t]={});return n[i]||(n[i]={})}function Ln(e,t,i,n){for(const r of t.getMatchingVisibleMetas(n).reverse()){const t=e[r.index];if(i&&t>0||!i&&t<0)return r.index}return null}function Fn(e,t){const{chart:i,_cachedMeta:n}=e,r=i._stacks||(i._stacks={}),{iScale:o,vScale:s,index:a}=n,l=o.axis,c=s.axis,d=function(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}(o,s,n),u=t.length;let h;for(let e=0;e<u;++e){const i=t[e],{[l]:o,[c]:u}=i;h=(i._stacks||(i._stacks={}))[c]=Nn(r,d,o),h[a]=u,h._top=Ln(h,s,!0,n.type),h._bottom=Ln(h,s,!1,n.type);(h._visualValues||(h._visualValues={}))[a]=u}}function $n(e,t){const i=e.scales;return Object.keys(i).filter((e=>i[e].axis===t)).shift()}function Gn(e,t){const i=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[n]||void 0===t[n][i])return;delete t[n][i],void 0!==t[n]._visualValues&&void 0!==t[n]._visualValues[i]&&delete t[n]._visualValues[i]}}}const Bn=e=>"reset"===e||"none"===e,Hn=(e,t)=>t?e:Object.assign({},e);class zn{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=On(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Gn(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),n=(e,t,i,n)=>"x"===e?t:"r"===e?n:i,r=t.xAxisID=l(i.xAxisID,$n(e,"x")),o=t.yAxisID=l(i.yAxisID,$n(e,"y")),s=t.rAxisID=l(i.rAxisID,$n(e,"r")),a=t.indexAxis,c=t.iAxisID=n(a,r,o,s),d=t.vAxisID=n(a,o,r,s);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(s),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&ae(this._data,this),e._stacked&&Gn(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(o(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:i,vScale:n}=t,r="x"===i.axis?"x":"y",o="x"===n.axis?"x":"y",s=Object.keys(e),a=new Array(s.length);let l,c,d;for(l=0,c=s.length;l<c;++l)d=s[l],a[l]={[r]:d,[o]:e[d]};return a}(t,e)}else if(i!==t){if(i){ae(i,this);const e=this._cachedMeta;Gn(e),e._parsed=[]}t&&Object.isExtensible(t)&&se(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const r=t._stacked;t._stacked=On(t.vScale,t),t.stack!==i.stack&&(n=!0,Gn(t),t.stack=i.stack),this._resyncElements(e),(n||r!==t._stacked)&&(Fn(this,t._parsed),t._stacked=On(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:n}=this,{iScale:s,_stacked:a}=i,l=s.axis;let c,d,u,h=0===e&&t===n.length||i._sorted,p=e>0&&i._parsed[e-1];if(!1===this._parsing)i._parsed=n,i._sorted=!0,u=n;else{u=r(n[e])?this.parseArrayData(i,n,e,t):o(n[e])?this.parseObjectData(i,n,e,t):this.parsePrimitiveData(i,n,e,t);const s=()=>null===d[l]||p&&d[l]<p[l];for(c=0;c<t;++c)i._parsed[c+e]=d=u[c],h&&(s()&&(h=!1),p=d);i._sorted=h}a&&Fn(this,u)}parsePrimitiveData(e,t,i,n){const{iScale:r,vScale:o}=e,s=r.axis,a=o.axis,l=r.getLabels(),c=r===o,d=new Array(n);let u,h,p;for(u=0,h=n;u<h;++u)p=u+i,d[u]={[s]:c||r.parse(l[p],p),[a]:o.parse(t[p],p)};return d}parseArrayData(e,t,i,n){const{xScale:r,yScale:o}=e,s=new Array(n);let a,l,c,d;for(a=0,l=n;a<l;++a)c=a+i,d=t[c],s[a]={x:r.parse(d[0],c),y:o.parse(d[1],c)};return s}parseObjectData(e,t,i,n){const{xScale:r,yScale:o}=e,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l=new Array(n);let c,d,u,h;for(c=0,d=n;c<d;++c)u=c+i,h=t[u],l[c]={x:r.parse(_(h,s),u),y:o.parse(_(h,a),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const n=this.chart,r=this._cachedMeta,o=t[e.axis];return In({keys:Rn(n,!0),values:t._stacks[e.axis]._visualValues},o,r.index,{mode:i})}updateRangeFromParsed(e,t,i,n){const r=i[t.axis];let o=null===r?NaN:r;const s=n&&i._stacks[t.axis];n&&s&&(n.values=s,o=In(n,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,n=i._parsed,r=i._sorted&&e===i.iScale,o=n.length,a=this._getOtherScale(e),l=((e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:Rn(i,!0),values:null})(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:u}=function(e){const{min:t,max:i,minDefined:n,maxDefined:r}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:r?i:Number.POSITIVE_INFINITY}}(a);let h,p;function f(){p=n[h];const t=p[a.axis];return!s(p[e.axis])||d>t||u<t}for(h=0;h<o&&(f()||(this.updateRangeFromParsed(c,e,p,l),!r));++h);if(r)for(h=o-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(c,e,p,l);break}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let n,r,o;for(n=0,r=t.length;n<r;++n)o=t[n][e.axis],s(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,n=t.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:n?""+n.getLabelForValue(r[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,i,n,r;return o(e)?(t=e.top,i=e.right,n=e.bottom,r=e.left):t=i=n=r=e,{top:t,right:i,bottom:n,left:r,disabled:!1===e}}(l(this.options.clip,function(e,t,i){if(!1===i)return!1;const n=Pn(e,i),r=Pn(t,i);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,n=i.data||[],r=t.chartArea,o=[],s=this._drawStart||0,a=this._drawCount||n.length-s,l=this.options.drawActiveElementsOnTop;let c;for(i.dataset&&i.dataset.draw(e,r,s,a),c=s;c<s+a;++c){const t=n[c];t.hidden||(t.active&&l?o.push(t):t.draw(e,r))}for(c=0;c<o.length;++c)o[c].draw(e,r)}getStyle(e,t){const i=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const n=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,i){return Di(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=n.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return Di(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=n,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const n="active"===t,r=this._cachedDataOpts,o=e+"-"+t,s=r[o],a=this.enableOptionSharing&&A(i);if(s)return Hn(s,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=n?[`${e}Hover`,"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(ht.elements[e]),p=l.resolveNamedOptions(u,h,(()=>this.getContext(i,n,t)),d);return p.$shared&&(p.$shared=a,r[o]=Object.freeze(Hn(p,a))),p}_resolveAnimations(e,t,i){const n=this.chart,r=this._cachedDataOpts,o=`animation-${t}`,s=r[o];if(s)return s;let a;if(!1!==n.options.animation){const n=this.chart.config,r=n.datasetAnimationScopeKeys(this._type,t),o=n.getOptionScopes(this.getDataset(),r);a=n.createResolver(o,this.getContext(e,i,t))}const l=new kn(n,a&&a.animations);return a&&a._cacheable&&(r[o]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Bn(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),n=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(t,r)||r!==n;return this.updateSharedOptions(r,t,i),{sharedOptions:r,includeOptions:o}}updateElement(e,t,i,n){Bn(n)?Object.assign(e,i):this._resolveAnimations(t,n).update(e,i)}updateSharedOptions(e,t,i){e&&!Bn(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,n){e.active=n;const r=this.getStyle(t,n);this._resolveAnimations(t,i,n).update(e,{options:!n&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[e,t,i]of this._syncList)this[e](t,i);this._syncList=[];const n=i.length,r=t.length,o=Math.min(r,n);o&&this.parse(0,o),r>n?this._insertElements(n,r-n,e):r<n&&this._removeElements(r,n-r)}_insertElements(e,t,i=!0){const n=this._cachedMeta,r=n.data,o=e+t;let s;const a=e=>{for(e.length+=t,s=e.length-1;s>=o;s--)e[s]=e[s-t]};for(a(r),s=e;s<o;++s)r[s]=new this.dataElementType;this._parsing&&a(n._parsed),this.parse(e,t),i&&this.updateElements(r,e,t,"reset")}updateElements(e,t,i,n){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(e,t);i._stacked&&Gn(i,n)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,n]=e;this[t](i,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class Wn{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return H(this.x)&&H(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const n={};return e.forEach((e=>{n[e]=i[e]&&i[e].active()?i[e]._to:this[e]})),n}}function Vn(e,t){const i=e.options.ticks,r=function(e){const t=e.options.offset,i=e._tickSize(),n=e._length/i+(t?0:1),r=e._maxLength/i;return Math.floor(Math.min(n,r))}(e),o=Math.min(i.maxTicksLimit||r,r),s=i.major.enabled?function(e){const t=[];let i,n;for(i=0,n=e.length;i<n;i++)e[i].major&&t.push(i);return t}(t):[],a=s.length,l=s[0],c=s[a-1],d=[];if(a>o)return function(e,t,i,n){let r,o=0,s=i[0];for(n=Math.ceil(n),r=0;r<e.length;r++)r===s&&(t.push(e[r]),o++,s=i[o*n])}(t,d,s,a/o),d;const u=function(e,t,i){const n=function(e){const t=e.length;let i,n;if(t<2)return!1;for(n=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==n)return!1;return n}(e),r=t.length/i;if(!n)return Math.max(r,1);const o=B(n);for(let e=0,t=o.length-1;e<t;e++){const t=o[e];if(t>r)return t}return Math.max(r,1)}(s,t,o);if(a>0){let e,i;const r=a>1?Math.round((c-l)/(a-1)):null;for(jn(t,d,u,n(r)?0:l-r,l),e=0,i=a-1;e<i;e++)jn(t,d,u,s[e],s[e+1]);return jn(t,d,u,c,n(r)?t.length:c+r),d}return jn(t,d,u),d}function jn(e,t,i,n,r){const o=l(n,0),s=Math.min(l(r,e.length),e.length);let a,c,d,u=0;for(i=Math.ceil(i),r&&(a=r-n,i=a/Math.floor(a/i)),d=o;d<0;)u++,d=Math.round(o+u*i);for(c=Math.max(o,0);c<s;c++)c===d&&(t.push(e[c]),u++,d=Math.round(o+u*i))}const Un=(e,t,i)=>"top"===t||"left"===t?e[t]+i:e[t]-i,Yn=(e,t)=>Math.min(t||e,e);function qn(e,t){const i=[],n=e.length/t,r=e.length;let o=0;for(;o<r;o+=n)i.push(e[Math.floor(o)]);return i}function Kn(e,t,i){const n=e.ticks.length,r=Math.min(t,n-1),o=e._startPixel,s=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(r);if(!(i&&(l=1===n?Math.max(c-o,s-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<o-a||c>s+a)))return c}function Xn(e){return e.drawTicks?e.tickLength:0}function Zn(e,t){if(!e.display)return 0;const i=xi(e.font,t),n=Ai(e.padding);return(r(e.text)?e.text.length:1)*i.lineHeight+n.height}function Qn(e,t,i){let n=he(e);return(i&&"right"!==t||!i&&"right"===t)&&(n=(e=>"left"===e?"right":"right"===e?"left":e)(n)),n}class Jn extends Wn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:n}=this;return e=a(e,Number.POSITIVE_INFINITY),t=a(t,Number.NEGATIVE_INFINITY),i=a(i,Number.POSITIVE_INFINITY),n=a(n,Number.NEGATIVE_INFINITY),{min:a(e,i),max:a(t,n),minDefined:s(e),maxDefined:s(t)}}getMinMax(e){let t,{min:i,max:n,minDefined:r,maxDefined:o}=this.getUserBounds();if(r&&o)return{min:i,max:n};const s=this.getMatchingVisibleMetas();for(let a=0,l=s.length;a<l;++a)t=s[a].controller.getMinMax(this,e),r||(i=Math.min(i,t.min)),o||(n=Math.max(n,t.max));return i=o&&i>n?n:i,n=r&&i>n?i:n,{min:a(i,a(n,i)),max:a(n,a(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){u(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:n,grace:r,ticks:o}=this.options,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Ti(this,r,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=s<this.ticks.length;this._convertTicksToLabels(a?qn(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=Vn(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,i=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,i=!i),this._startPixel=e,this._endPixel=t,this._reversePixels=i,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){u(this.options.afterUpdate,[this])}beforeSetDimensions(){u(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){u(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),u(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){u(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,n,r;for(i=0,n=e.length;i<n;i++)r=e[i],r.label=u(t.callback,[r.value,i,e],this)}afterTickToLabelConversion(){u(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){u(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=Yn(this.ticks.length,e.ticks.maxTicksLimit),n=t.minRotation||0,r=t.maxRotation;let o,s,a,l=n;if(!this._isVisible()||!t.display||n>=r||i<=1||!this.isHorizontal())return void(this.labelRotation=n);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=Q(this.chart.width-d,0,this.maxWidth);o=e.offset?this.maxWidth/i:h/(i-1),d+6>o&&(o=h/(i-(e.offset?.5:1)),s=this.maxHeight-Xn(e.grid)-t.padding-Zn(e.title,this.chart.options.font),a=Math.sqrt(d*d+u*u),l=j(Math.min(Math.asin(Q((c.highest.height+6)/o,-1,1)),Math.asin(Q(s/a,-1,1))-Math.asin(Q(u/a,-1,1)))),l=Math.max(n,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){u(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){u(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:n,grid:r}}=this,o=this._isVisible(),s=this.isHorizontal();if(o){const o=Zn(n,t.options.font);if(s?(e.width=this.maxWidth,e.height=Xn(r)+o):(e.height=this.maxHeight,e.width=Xn(r)+o),i.display&&this.ticks.length){const{first:t,last:n,widest:r,highest:o}=this._getLabelSizes(),a=2*i.padding,l=V(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(s){const t=i.mirror?0:d*r.width+c*o.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=i.mirror?0:c*r.width+d*o.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,n,d,c)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,n){const{ticks:{align:r,padding:o},position:s}=this.options,a=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;a?l?(d=n*e.width,u=i*t.height):(d=i*e.height,u=n*t.width):"start"===r?u=t.width:"end"===r?d=e.width:"inner"!==r&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-s+o)*this.width/(this.width-s),0),this.paddingRight=Math.max((u-c+o)*this.width/(this.width-c),0)}else{let i=t.height/2,n=e.height/2;"start"===r?(i=0,n=e.height):"end"===r&&(i=t.height,n=0),this.paddingTop=i+o,this.paddingBottom=n+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){u(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,i=e.length;t<i;t++)n(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=qn(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:o,_longestTextCache:s}=this,a=[],l=[],c=Math.floor(t/Yn(t,i));let d,u,p,f,g,m,v,b,y,w,C,_=0,S=0;for(d=0;d<t;d+=c){if(f=e[d].label,g=this._resolveTickFontOptions(d),o.font=m=g.string,v=s[m]=s[m]||{data:{},gc:[]},b=g.lineHeight,y=w=0,n(f)||r(f)){if(r(f))for(u=0,p=f.length;u<p;++u)C=f[u],n(C)||r(C)||(y=Dt(o,v.data,v.gc,y,C),w+=b)}else y=Dt(o,v.data,v.gc,y,f),w=b;a.push(y),l.push(w),_=Math.max(y,_),S=Math.max(w,S)}!function(e,t){h(e,(e=>{const i=e.gc,n=i.length/2;let r;if(n>t){for(r=0;r<n;++r)delete e.data[i[r]];i.splice(0,n)}}))}(s,t);const A=a.indexOf(_),x=l.indexOf(S),E=e=>({width:a[e]||0,height:l[e]||0});return{first:E(0),last:E(t-1),widest:E(A),highest:E(x),widths:a,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return J(this._alignToPixels?kt(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=function(e,t,i){return Di(e,{tick:i,index:t,type:"tick"})}(this.getContext(),e,i))}return this.$context||(this.$context=Di(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=V(this.labelRotation),i=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,s=r?r.widest.width+o:0,a=r?r.highest.height+o:0;return this.isHorizontal()?a*i>s*n?s/i:a/n:a*n<s*i?a/i:s/n}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,n=this.options,{grid:r,position:s,border:a}=n,c=r.offset,d=this.isHorizontal(),u=this.ticks.length+(c?1:0),h=Xn(r),p=[],f=a.setContext(this.getContext()),g=f.display?f.width:0,m=g/2,v=function(e){return kt(i,e,g)};let b,y,w,C,_,S,A,x,E,T,D,M;if("top"===s)b=v(this.bottom),S=this.bottom-h,x=b-m,T=v(e.top)+m,M=e.bottom;else if("bottom"===s)b=v(this.top),T=e.top,M=v(e.bottom)-m,S=b+m,x=this.top+h;else if("left"===s)b=v(this.right),_=this.right-h,A=b-m,E=v(e.left)+m,D=e.right;else if("right"===s)b=v(this.left),E=e.left,D=v(e.right)-m,_=b+m,A=this.left+h;else if("x"===t){if("center"===s)b=v((e.top+e.bottom)/2+.5);else if(o(s)){const e=Object.keys(s)[0],t=s[e];b=v(this.chart.scales[e].getPixelForValue(t))}T=e.top,M=e.bottom,S=b+m,x=S+h}else if("y"===t){if("center"===s)b=v((e.left+e.right)/2);else if(o(s)){const e=Object.keys(s)[0],t=s[e];b=v(this.chart.scales[e].getPixelForValue(t))}_=b-m,A=_-h,E=e.left,D=e.right}const k=l(n.ticks.maxTicksLimit,u),P=Math.max(1,Math.ceil(u/k));for(y=0;y<u;y+=P){const e=this.getContext(y),t=r.setContext(e),n=a.setContext(e),o=t.lineWidth,s=t.color,l=n.dash||[],u=n.dashOffset,h=t.tickWidth,f=t.tickColor,g=t.tickBorderDash||[],m=t.tickBorderDashOffset;w=Kn(this,y,c),void 0!==w&&(C=kt(i,w,o),d?_=A=E=D=C:S=x=T=M=C,p.push({tx1:_,ty1:S,tx2:A,ty2:x,x1:E,y1:T,x2:D,y2:M,width:o,color:s,borderDash:l,borderDashOffset:u,tickWidth:h,tickColor:f,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=u,this._borderValue=b,p}_computeLabelItems(e){const t=this.axis,i=this.options,{position:n,ticks:s}=i,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=s,p=Xn(i.grid),f=p+u,g=h?-u:f,m=-V(this.labelRotation),v=[];let b,y,w,C,_,S,A,x,E,T,D,M,k="middle";if("top"===n)S=this.bottom-g,A=this._getXAxisLabelAlignment();else if("bottom"===n)S=this.top+g,A=this._getXAxisLabelAlignment();else if("left"===n){const e=this._getYAxisLabelAlignment(p);A=e.textAlign,_=e.x}else if("right"===n){const e=this._getYAxisLabelAlignment(p);A=e.textAlign,_=e.x}else if("x"===t){if("center"===n)S=(e.top+e.bottom)/2+f;else if(o(n)){const e=Object.keys(n)[0],t=n[e];S=this.chart.scales[e].getPixelForValue(t)+f}A=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===n)_=(e.left+e.right)/2-f;else if(o(n)){const e=Object.keys(n)[0],t=n[e];_=this.chart.scales[e].getPixelForValue(t)}A=this._getYAxisLabelAlignment(p).textAlign}"y"===t&&("start"===c?k="top":"end"===c&&(k="bottom"));const P=this._getLabelSizes();for(b=0,y=l.length;b<y;++b){w=l[b],C=w.label;const e=s.setContext(this.getContext(b));x=this.getPixelForTick(b)+s.labelOffset,E=this._resolveTickFontOptions(b),T=E.lineHeight,D=r(C)?C.length:1;const t=D/2,i=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let u,p=A;if(a?(_=x,"inner"===A&&(p=b===y-1?this.options.reverse?"left":"right":0===b?this.options.reverse?"right":"left":"center"),M="top"===n?"near"===d||0!==m?-D*T+T/2:"center"===d?-P.highest.height/2-t*T+T:-P.highest.height+T/2:"near"===d||0!==m?T/2:"center"===d?P.highest.height/2-t*T:P.highest.height-D*T,h&&(M*=-1),0===m||e.showLabelBackdrop||(_+=T/2*Math.sin(m))):(S=x,M=(1-D)*T/2),e.showLabelBackdrop){const t=Ai(e.backdropPadding),i=P.heights[b],n=P.widths[b];let r=M-t.top,o=0-t.left;switch(k){case"middle":r-=i/2;break;case"bottom":r-=i}switch(A){case"center":o-=n/2;break;case"right":o-=n;break;case"inner":b===y-1?o-=n:b>0&&(o-=n/2)}u={left:o,top:r,width:n+t.width,height:i+t.height,color:e.backdropColor}}v.push({label:C,font:E,textOffset:M,options:{rotation:m,color:i,strokeColor:o,strokeWidth:c,textAlign:p,textBaseline:k,translation:[_,S],backdrop:u}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-V(this.labelRotation))return"top"===e?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align?i="right":"inner"===t.align&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:n,padding:r}}=this.options,o=e+r,s=this._getLabelSizes().widest.width;let a,l;return"left"===t?n?(l=this.right+r,"near"===i?a="left":"center"===i?(a="center",l+=s/2):(a="right",l+=s)):(l=this.right-o,"near"===i?a="right":"center"===i?(a="center",l-=s/2):(a="left",l=this.left)):"right"===t?n?(l=this.left+r,"near"===i?a="right":"center"===i?(a="center",l-=s/2):(a="left",l-=s)):(l=this.left+o,"near"===i?a="left":"center"===i?(a="center",l+=s/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:n,width:r,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,n,r,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex((t=>t.value===e));if(i>=0){return t.setContext(this.getContext(i)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const s=(e,t,n)=>{n.width&&n.color&&(i.save(),i.lineWidth=n.width,i.strokeStyle=n.color,i.setLineDash(n.borderDash||[]),i.lineDashOffset=n.borderDashOffset,i.beginPath(),i.moveTo(e.x,e.y),i.lineTo(t.x,t.y),i.stroke(),i.restore())};if(t.display)for(r=0,o=n.length;r<o;++r){const e=n[r];t.drawOnChartArea&&s({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&s({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:n}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const s=n.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=kt(e,this.left,o)-o/2,c=kt(e,this.right,s)+s/2,d=u=a):(d=kt(e,this.top,o)-o/2,u=kt(e,this.bottom,s)+s/2,l=c=a),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(l,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,i=this._computeLabelArea();i&&Nt(t,i);const n=this.getLabelItems(e);for(const e of n){const i=e.options,n=e.font;Ht(t,e.label,0,e.textOffset,n,i)}i&&Lt(t)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:n}}=this;if(!i.display)return;const s=xi(i.font),a=Ai(i.padding),l=i.align;let c=s.lineHeight/2;"bottom"===t||"center"===t||o(t)?(c+=a.bottom,r(i.text)&&(c+=s.lineHeight*(i.text.length-1))):c+=a.top;const{titleX:d,titleY:u,maxWidth:h,rotation:p}=function(e,t,i,n){const{top:r,left:s,bottom:a,right:l,chart:c}=e,{chartArea:d,scales:u}=c;let h,p,f,g=0;const m=a-r,v=l-s;if(e.isHorizontal()){if(p=pe(n,s,l),o(i)){const e=Object.keys(i)[0],n=i[e];f=u[e].getPixelForValue(n)+m-t}else f="center"===i?(d.bottom+d.top)/2+m-t:Un(e,i,t);h=l-s}else{if(o(i)){const e=Object.keys(i)[0],n=i[e];p=u[e].getPixelForValue(n)-v+t}else p="center"===i?(d.left+d.right)/2-v+t:Un(e,i,t);f=pe(n,a,r),g="left"===i?-I:I}return{titleX:p,titleY:f,maxWidth:h,rotation:g}}(this,c,t,l);Ht(e,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:p,textAlign:Qn(l,t,n),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=l(e.grid&&e.grid.z,-1),n=l(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Jn.prototype.draw?[{z:i,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let r,o;for(r=0,o=t.length;r<o;++r){const o=t[r];o[i]!==this.id||e&&o.type!==e||n.push(o)}return n}_resolveTickFontOptions(e){return xi(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class er{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;(function(e){return"id"in e&&"defaults"in e})(t)&&(i=this.register(t));const n=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in n||(n[r]=e,function(e,t,i){const n=v(Object.create(null),[i?ht.get(i):{},ht.get(t),e.defaults]);ht.set(t,n),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((i=>{const n=i.split("."),r=n.pop(),o=[e].concat(n).join("."),s=t[i].split("."),a=s.pop(),l=s.join(".");ht.route(o,r,l,a)}))}(t,e.defaultRoutes);e.descriptors&&ht.describe(t,e.descriptors)}(e,o,i),this.override&&ht.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,n=this.scope;i in t&&delete t[i],n&&i in ht[n]&&(delete ht[n][i],this.override&&delete at[i])}}class tr{constructor(){this.controllers=new er(zn,"datasets",!0),this.elements=new er(Wn,"elements"),this.plugins=new er(Object,"plugins"),this.scales=new er(Jn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach((t=>{const n=i||this._getRegistryForType(t);i||n.isForType(t)||n===this.plugins&&t.id?this._exec(e,n,t):h(t,(t=>{const n=i||this._getRegistryForType(t);this._exec(e,n,t)}))}))}_exec(e,t,i){const n=S(e);u(i["before"+n],[],i),t[e](i),u(i["after"+n],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const n=t.get(e);if(void 0===n)throw new Error('"'+e+'" is not a registered '+i+".");return n}}var ir=new tr;class nr{constructor(){this._init=[]}notify(e,t,i,n){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=n?this._descriptors(e).filter(n):this._descriptors(e),o=this._notify(r,e,t,i);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,n){n=n||{};for(const r of e){const e=r.plugin;if(!1===u(e[i],[t,n,r.options],e)&&n.cancelable)return!1}return!0}invalidate(){n(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,n=l(i.options&&i.options.plugins,{}),r=function(e){const t={},i=[],n=Object.keys(ir.plugins.items);for(let e=0;e<n.length;e++)i.push(ir.getPlugin(n[e]));const r=e.plugins||[];for(let e=0;e<r.length;e++){const n=r[e];-1===i.indexOf(n)&&(i.push(n),t[n.id]=!0)}return{plugins:i,localIds:t}}(i);return!1!==n||t?function(e,{plugins:t,localIds:i},n,r){const o=[],s=e.getContext();for(const a of t){const t=a.id,l=rr(n[t],r);null!==l&&o.push({plugin:a,options:or(e.config,{plugin:a,local:i[t]},l,s)})}return o}(e,r,n,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,n=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(n(t,i),e,"stop"),this._notify(n(i,t),e,"start")}}function rr(e,t){return t||!1!==e?!0===e?{}:e:null}function or(e,{plugin:t,local:i},n,r){const o=e.pluginScopeKeys(t),s=e.getOptionScopes(n,o);return i&&t.defaults&&s.push(t.defaults),e.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function sr(e,t){const i=ht.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function ar(e){if("x"===e||"y"===e||"r"===e)return e}function lr(e,...t){if(ar(e))return e;for(const n of t){const t=n.axis||("top"===(i=n.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||e.length>1&&ar(e[0].toLowerCase());if(t)return t}var i;throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function cr(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function dr(e,t){const i=at[e.type]||{scales:{}},n=t.scales||{},r=sr(e.type,t),s=Object.create(null);return Object.keys(n).forEach((t=>{const a=n[t];if(!o(a))return console.error(`Invalid scale configuration for scale: ${t}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const l=lr(t,a,function(e,t){if(t.data&&t.data.datasets){const i=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(i.length)return cr(e,"x",i[0])||cr(e,"y",i[0])}return{}}(t,e),ht.scales[a.type]),c=function(e,t){return e===t?"_index_":"_value_"}(l,r),d=i.scales||{};s[t]=b(Object.create(null),[{axis:l},a,d[l],d[c]])})),e.data.datasets.forEach((i=>{const r=i.type||e.type,o=i.indexAxis||sr(r,t),a=(at[r]||{}).scales||{};Object.keys(a).forEach((e=>{const t=function(e,t){let i=e;return"_index_"===e?i=t:"_value_"===e&&(i="x"===t?"y":"x"),i}(e,o),r=i[t+"AxisID"]||t;s[r]=s[r]||Object.create(null),b(s[r],[{axis:t},n[r],a[e]])}))})),Object.keys(s).forEach((e=>{const t=s[e];b(t,[ht.scales[t.type],ht.scale])})),s}function ur(e){const t=e.options||(e.options={});t.plugins=l(t.plugins,{}),t.scales=dr(e,t)}function hr(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const pr=new Map,fr=new Set;function gr(e,t){let i=pr.get(e);return i||(i=t(),pr.set(e,i),fr.add(i)),i}const mr=(e,t,i)=>{const n=_(t,i);void 0!==n&&e.add(n)};class vr{constructor(e){this._config=function(e){return(e=e||{}).data=hr(e.data),ur(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=hr(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),ur(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return gr(e,(()=>[[`datasets.${e}`,""]]))}datasetAnimationScopeKeys(e,t){return gr(`${e}.transition.${t}`,(()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]]))}datasetElementScopeKeys(e,t){return gr(`${e}-${t}`,(()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]]))}pluginScopeKeys(e){const t=e.id;return gr(`${this.type}-plugin-${t}`,(()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const i=this._scopeCache;let n=i.get(e);return n&&!t||(n=new Map,i.set(e,n)),n}getOptionScopes(e,t,i){const{options:n,type:r}=this,o=this._cachedScopes(e,i),s=o.get(t);if(s)return s;const a=new Set;t.forEach((t=>{e&&(a.add(e),t.forEach((t=>mr(a,e,t)))),t.forEach((e=>mr(a,n,e))),t.forEach((e=>mr(a,at[r]||{},e))),t.forEach((e=>mr(a,ht,e))),t.forEach((e=>mr(a,lt,e)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),fr.has(t)&&o.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,at[t]||{},ht.datasets[t]||{},{type:t},ht,lt]}resolveNamedOptions(e,t,i,n=[""]){const o={$shared:!0},{resolver:s,subPrefixes:a}=br(this._resolverCache,e,n);let l=s;if(function(e,t){const{isScriptable:i,isIndexable:n}=jt(e);for(const o of t){const t=i(o),s=n(o),a=(s||t)&&e[o];if(t&&(x(a)||yr(a))||s&&r(a))return!0}return!1}(s,t)){o.$shared=!1;l=Vt(s,i=x(i)?i():i,this.createResolver(e,i,a))}for(const e of t)o[e]=l[e];return o}createResolver(e,t,i=[""],n){const{resolver:r}=br(this._resolverCache,e,i);return o(t)?Vt(r,t,void 0,n):r}}function br(e,t,i){let n=e.get(t);n||(n=new Map,e.set(t,n));const r=i.join();let o=n.get(r);if(!o){o={resolver:Wt(t,i),subPrefixes:i.filter((e=>!e.toLowerCase().includes("hover")))},n.set(r,o)}return o}const yr=e=>o(e)&&Object.getOwnPropertyNames(e).some((t=>x(e[t])));const wr=["top","bottom","left","right","chartArea"];function Cr(e,t){return"top"===e||"bottom"===e||-1===wr.indexOf(e)&&"x"===t}function _r(e,t){return function(i,n){return i[e]===n[e]?i[t]-n[t]:i[e]-n[e]}}function Sr(e){const t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),u(i&&i.onComplete,[e],t)}function Ar(e){const t=e.chart,i=t.options.animation;u(i&&i.onProgress,[e],t)}function xr(e){return pt()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Er={},Tr=e=>{const t=xr(e);return Object.values(Er).filter((e=>e.canvas===t)).pop()};function Dr(e,t,i){const n=Object.keys(e);for(const r of n){const n=+r;if(n>=t){const o=e[r];delete e[r],(i>0||n>t)&&(e[n+i]=o)}}}function Mr(e,t,i){return e.options.clip?e[i]:t[i]}class kr{static defaults=ht;static instances=Er;static overrides=at;static registry=ir;static version="4.4.7";static getChart=Tr;static register(...e){ir.add(...e),Pr()}static unregister(...e){ir.remove(...e),Pr()}constructor(e,t){const n=this.config=new vr(t),r=xr(e),o=Tr(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||xn(r)),this.platform.updateConfig(n);const a=this.platform.acquireContext(r,s.aspectRatio),l=a&&a.canvas,c=l&&l.height,d=l&&l.width;this.id=i(),this.ctx=a,this.canvas=l,this.width=d,this.height=c,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new nr,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ue((e=>this.update(e)),s.resizeDelay||0),this._dataChanges=[],Er[this.id]=this,a&&l?(be.listen(this,"complete",Sr),be.listen(this,"progress",Ar),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:r,_aspectRatio:o}=this;return n(e)?t&&o?o:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ir}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():At(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Pt(this.canvas,this.ctx),this}stop(){return be.stop(this),this}resize(e,t){be.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,n=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,e,t,r),s=i.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,At(this,s,!0)&&(this.notifyPlugins("resize",{size:o}),u(i.onResize,[this,o],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){h(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,n=Object.keys(i).reduce(((e,t)=>(e[t]=!1,e)),{});let r=[];t&&(r=r.concat(Object.keys(t).map((e=>{const i=t[e],n=lr(e,i),r="r"===n,o="x"===n;return{options:i,dposition:r?"chartArea":o?"bottom":"left",dtype:r?"radialLinear":o?"category":"linear"}})))),h(r,(t=>{const r=t.options,o=r.id,s=lr(o,r),a=l(r.type,t.dtype);void 0!==r.position&&Cr(r.position,s)===Cr(t.dposition)||(r.position=t.dposition),n[o]=!0;let c=null;if(o in i&&i[o].type===a)c=i[o];else{c=new(ir.getScale(a))({id:o,type:a,ctx:this.ctx,chart:this}),i[c.id]=c}c.init(r,e)})),h(n,((e,t)=>{e||delete i[t]})),h(i,(e=>{an.configure(this,e,e.options),an.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort(((e,t)=>e.index-t.index)),i>t){for(let e=t;e<i;++e)this._destroyDatasetMeta(e);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(_r("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,i)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(i)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=t.length;i<n;i++){const n=t[i];let r=this.getDatasetMeta(i);const o=n.type||this.config.type;if(r.type&&r.type!==o&&(this._destroyDatasetMeta(i),r=this.getDatasetMeta(i)),r.type=o,r.indexAxis=n.indexAxis||sr(o,this.options),r.order=n.order||0,r.index=i,r.label=""+n.label,r.visible=this.isDatasetVisible(i),r.controller)r.controller.updateIndex(i),r.controller.linkScales();else{const t=ir.getController(o),{datasetElementType:n,dataElementType:s}=ht.datasets[o];Object.assign(t,{dataElementType:ir.getElement(s),datasetElementType:n&&ir.getElement(n)}),r.controller=new t(this,i),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){h(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let e=0,t=this.data.datasets.length;e<t;e++){const{controller:t}=this.getDatasetMeta(e),i=!n&&-1===r.indexOf(t);t.buildOrUpdateElements(i),o=Math.max(+t.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),n||h(r,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(_r("z","_idx"));const{_active:s,_lastEvent:a}=this;a?this._eventHandler(a,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){h(this.scales,(e=>{an.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);E(t,i)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:r}of t){Dr(e,n,"_removeElements"===i?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),n=i(0);for(let e=1;e<t;e++)if(!E(n,i(e)))return;return Array.from(n).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;an.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],h(this.boxes,(e=>{i&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,x(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),n={meta:i,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(i.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(be.has(this)?this.attached&&!be.running(this)&&be.start(this):(this.draw(),Sr({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let n,r;for(n=0,r=t.length;n<r;++n){const r=t[n];e&&!r.visible||i.push(r)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i=e._clip,n=!i.disabled,r=function(e,t){const{xScale:i,yScale:n}=e;return i&&n?{left:Mr(i,t,"left"),right:Mr(i,t,"right"),top:Mr(n,t,"top"),bottom:Mr(n,t,"bottom")}:t}(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(n&&Nt(t,{left:!1===i.left?0:r.left-i.left,right:!1===i.right?this.width:r.right+i.right,top:!1===i.top?0:r.top-i.top,bottom:!1===i.bottom?this.height:r.bottom+i.bottom}),e.controller.draw(),n&&Lt(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Ot(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,n){const r=Yi.modes[t];return"function"==typeof r?r(this,e,i,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let n=i.filter((e=>e&&e._dataset===t)).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=Di(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return"boolean"==typeof i.hidden?!i.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const n=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,n);A(t)?(r.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update((t=>t.datasetIndex===e?n:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),be.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Pt(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Er[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(i,n)=>{t.addEventListener(this,i,n),e[i]=n},n=(e,t,i)=>{e.offsetX=t,e.offsetY=i,this._eventHandler(e)};h(this.options.events,(e=>i(e,n)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(i,n)=>{t.addEventListener(this,i,n),e[i]=n},n=(i,n)=>{e[i]&&(t.removeEventListener(this,i,n),delete e[i])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let o;const s=()=>{n("attach",s),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,n("resize",r),this._stop(),this._resize(0,0),i("attach",s)},t.isAttached(this.canvas)?s():o()}unbindEvents(){h(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},h(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const n=i?"set":"remove";let r,o,s,a;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+n+"DatasetHoverStyle"]()),s=0,a=e.length;s<a;++s){o=e[s];const t=o&&this.getDatasetMeta(o.datasetIndex).controller;t&&t[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map((({datasetIndex:e,index:t})=>{const i=this.getDatasetMeta(e);if(!i)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:i.data[t],index:t}}));!p(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,i){const n=this.options.hover,r=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),o=r(t,e),s=i?e:r(e,t);o.length&&this.updateHoverStyle(o,n.mode,!1),s.length&&n.mode&&this.updateHoverStyle(s,n.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",i,n))return;const r=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(r||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:n=[],options:r}=this,o=t,s=this._getActiveElements(e,n,i,o),a=T(e),l=function(e,t,i,n){return i&&"mouseout"!==e.type?n?t:e:null}(e,this._lastEvent,i,a);i&&(this._lastEvent=null,u(r.onHover,[e,s,this],this),a&&u(r.onClick,[e,s,this],this));const c=!p(s,n);return(c||t)&&(this._active=s,this._updateHoverStyles(s,n,t)),this._lastEvent=l,c}_getActiveElements(e,t,i,n){if("mouseout"===e.type)return[];if(!i)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,n)}}function Pr(){return h(kr.instances,(e=>e._plugins.invalidate()))}function Rr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ir{static override(e){Object.assign(Ir.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Rr()}parse(){return Rr()}format(){return Rr()}add(){return Rr()}diff(){return Rr()}startOf(){return Rr()}endOf(){return Rr()}}var Or={_date:Ir};function Nr(e){const t=e.iScale,i=function(e,t){if(!e._cache.$bar){const i=e.getMatchingVisibleMetas(t);let n=[];for(let t=0,r=i.length;t<r;t++)n=n.concat(i[t].controller.getAllParsedValues(e));e._cache.$bar=le(n.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let n,r,o,s,a=t._length;const l=()=>{32767!==o&&-32768!==o&&(A(s)&&(a=Math.min(a,Math.abs(o-s)||a)),s=o)};for(n=0,r=i.length;n<r;++n)o=t.getPixelForValue(i[n]),l();for(s=void 0,n=0,r=t.ticks.length;n<r;++n)o=t.getPixelForTick(n),l();return a}function Lr(e,t,i,n){return r(e)?function(e,t,i,n){const r=i.parse(e[0],n),o=i.parse(e[1],n),s=Math.min(r,o),a=Math.max(r,o);let l=s,c=a;Math.abs(s)>Math.abs(a)&&(l=a,c=s),t[i.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:o,min:s,max:a}}(e,t,i,n):t[i.axis]=i.parse(e,n),t}function Fr(e,t,i,n){const r=e.iScale,o=e.vScale,s=r.getLabels(),a=r===o,l=[];let c,d,u,h;for(c=i,d=i+n;c<d;++c)h=t[c],u={},u[r.axis]=a||r.parse(s[c],c),l.push(Lr(h,u,o,c));return l}function $r(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Gr(e,t,i,n){let r=t.borderSkipped;const o={};if(!r)return void(e.borderSkipped=o);if(!0===r)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:a,reverse:l,top:c,bottom:d}=function(e){let t,i,n,r,o;return e.horizontal?(t=e.base>e.x,i="left",n="right"):(t=e.base<e.y,i="bottom",n="top"),t?(r="end",o="start"):(r="start",o="end"),{start:i,end:n,reverse:t,top:r,bottom:o}}(e);"middle"===r&&i&&(e.enableBorderRadius=!0,(i._top||0)===n?r=c:(i._bottom||0)===n?r=d:(o[Br(d,s,a,l)]=!0,r=c)),o[Br(r,s,a,l)]=!0,e.borderSkipped=o}function Br(e,t,i,n){var r,o,s;return n?(s=i,e=Hr(e=(r=e)===(o=t)?s:r===s?o:r,i,t)):e=Hr(e,t,i),e}function Hr(e,t,i){return"start"===e?t:"end"===e?i:e}function zr(e,{inflateAmount:t},i){e.inflateAmount="auto"===t?1===i?.33:0:t}class Wr extends zn{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:n}}=e.legend.options;return t.labels.map(((t,r)=>{const o=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:n,lineWidth:o.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,n=this._cachedMeta;if(!1===this._parsing)n._parsed=i;else{let r,s,a=e=>+i[e];if(o(i[e])){const{key:e="value"}=this._parsing;a=t=>+_(i[t],e)}for(r=e,s=e+t;r<s;++r)n._parsed[r]=a(r)}}_getRotation(){return V(this.options.rotation-90)}_getCircumference(){return V(this.options.circumference)}_getRotationExtents(){let e=M,t=-M;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const n=this.chart.getDatasetMeta(i).controller,r=n._getRotation(),o=n._getCircumference();e=Math.min(e,r),t=Math.max(t,r+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,n=this._cachedMeta,r=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,s=Math.max((Math.min(i.width,i.height)-o)/2,0),a=Math.min(c(this.options.cutout,s),1),l=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:f,offsetX:g,offsetY:m}=function(e,t,i){let n=1,r=1,o=0,s=0;if(t<M){const a=e,l=a+t,c=Math.cos(a),d=Math.sin(a),u=Math.cos(l),h=Math.sin(l),p=(e,t,n)=>Z(e,a,l,!0)?1:Math.max(t,t*i,n,n*i),f=(e,t,n)=>Z(e,a,l,!0)?-1:Math.min(t,t*i,n,n*i),g=p(0,c,u),m=p(I,d,h),v=f(D,c,u),b=f(D+I,d,h);n=(g-v)/2,r=(m-b)/2,o=-(g+v)/2,s=-(m+b)/2}return{ratioX:n,ratioY:r,offsetX:o,offsetY:s}}(h,u,a),v=(i.width-o)/p,b=(i.height-o)/f,y=Math.max(Math.min(v,b)/2,0),w=d(this.options.radius,y),C=(w-Math.max(w*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=m*w,n.total=this.calculateTotal(),this.outerRadius=w-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*l,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const i=this.options,n=this._cachedMeta,r=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||null===n._parsed[e]||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*r/M)}updateElements(e,t,i,n){const r="reset"===n,o=this.chart,s=o.chartArea,a=o.options.animation,l=(s.left+s.right)/2,c=(s.top+s.bottom)/2,d=r&&a.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:p,includeOptions:f}=this._getSharedOptions(t,n);let g,m=this._getRotation();for(g=0;g<t;++g)m+=this._circumference(g,r);for(g=t;g<t+i;++g){const t=this._circumference(g,r),i=e[g],o={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:h,innerRadius:u};f&&(o.options=p||this.resolveDataElementOptions(g,i.active?"active":n)),m+=t,this.updateElement(i,g,o,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i,n=0;for(i=0;i<t.length;i++){const r=e._parsed[i];null===r||isNaN(r)||!this.chart.getDataVisibility(i)||t[i].hidden||(n+=Math.abs(r))}return n}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?M*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,n=i.data.labels||[],r=rt(t._parsed[e],i.options.locale);return{label:n[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const i=this.chart;let n,r,o,s,a;if(!e)for(n=0,r=i.data.datasets.length;n<r;++n)if(i.isDatasetVisible(n)){o=i.getDatasetMeta(n),e=o.data,s=o.controller;break}if(!e)return 0;for(n=0,r=e.length;n<r;++n)a=s.resolveDataElementOptions(n),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,n=e.length;i<n;++i){const e=this.resolveDataElementOptions(i);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(l(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Vr extends zn{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:n}}=e.legend.options;return t.labels.map(((t,r)=>{const o=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:n,lineWidth:o.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,n=i.data.labels||[],r=rt(t._parsed[e].r,i.options.locale);return{label:n[e]||"",value:r}}parseObjectData(e,t,i,n){return ii.bind(this)(e,t,i,n)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,i)=>{const n=this.getParsed(i).r;!isNaN(n)&&this.chart.getDataVisibility(i)&&(n<t.min&&(t.min=n),n>t.max&&(t.max=n))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,n=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(n/2,0),o=(r-Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,i,n){const r="reset"===n,o=this.chart,s=o.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,d=a.getIndexAngle(0)-.5*D;let u,h=d;const p=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,n,p);for(u=t;u<t+i;u++){const t=e[u];let i=h,f=h+this._computeAngle(u,n,p),g=o.getDataVisibility(u)?a.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=f,r&&(s.animateScale&&(g=0),s.animateRotate&&(i=f=d));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:i,endAngle:f,options:this.resolveDataElementOptions(u,t.active?"active":n)};this.updateElement(t,u,m,n)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++})),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?V(this.resolveDataElementOptions(e,t).angle||i):0}}var jr=Object.freeze({__proto__:null,BarController:class extends zn{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,i,n){return Fr(e,t,i,n)}parseArrayData(e,t,i,n){return Fr(e,t,i,n)}parseObjectData(e,t,i,n){const{iScale:r,vScale:o}=e,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l="x"===r.axis?s:a,c="x"===o.axis?s:a,d=[];let u,h,p,f;for(u=i,h=i+n;u<h;++u)f=t[u],p={},p[r.axis]=r.parse(_(f,l),u),d.push(Lr(_(f,c),p,o,u));return d}updateRangeFromParsed(e,t,i,n){super.updateRangeFromParsed(e,t,i,n);const r=i._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:n}=t,r=this.getParsed(e),o=r._custom,s=$r(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(r[n.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,r){const o="reset"===r,{index:s,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),d=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,r);for(let p=t;p<t+i;p++){const t=this.getParsed(p),i=o||n(t[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),f=this._calculateBarIndexPixels(p,d),g=(t._stacks||{})[a.axis],m={horizontal:c,base:i.base,enableBorderRadius:!g||$r(t._custom)||s===g._top||s===g._bottom,x:c?i.head:f.center,y:c?f.center:i.head,height:c?f.size:Math.abs(i.size),width:c?Math.abs(i.size):f.size};h&&(m.options=u||this.resolveDataElementOptions(p,e[p].active?"active":r));const v=m.options||e[p].options;Gr(m,v,g,s),zr(m,v,d.ratio),this.updateElement(e[p],p,m,r)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),o=i.options.stacked,s=[],a=this._cachedMeta.controller.getParsed(t),l=a&&a[i.axis],c=e=>{const t=e._parsed.find((e=>e[i.axis]===l)),r=t&&t[e.vScale.axis];if(n(r)||isNaN(r))return!0};for(const i of r)if((void 0===t||!c(i))&&((!1===o||-1===s.indexOf(i.stack)||void 0===o&&void 0===i.stack)&&s.push(i.stack),i.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,i){const n=this._getStacks(e,i),r=void 0!==t?n.indexOf(t):-1;return-1===r?n.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,n=[];let r,o;for(r=0,o=t.data.length;r<o;++r)n.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const s=e.barThickness;return{min:s||Nr(t),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:s?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:r},options:{base:o,minBarLength:s}}=this,a=o||0,l=this.getParsed(e),c=l._custom,d=$r(c);let u,h,p=l[t.axis],f=0,g=i?this.applyStack(t,l,i):p;g!==p&&(f=g-p,g=p),d&&(p=c.barStart,g=c.barEnd-c.barStart,0!==p&&F(p)!==F(c.barEnd)&&(f=0),f+=p);const m=n(o)||d?f:o;let v=t.getPixelForValue(m);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+g):v,h=u-v,Math.abs(h)<s){h=function(e,t,i){return 0!==e?F(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}(h,t,a)*s,p===a&&(v-=h/2);const e=t.getPixelForDecimal(0),n=t.getPixelForDecimal(1),o=Math.min(e,n),c=Math.max(e,n);v=Math.max(Math.min(v,c),o),u=v+h,i&&!d&&(l._stacks[t.axis]._visualValues[r]=t.getValueForPixel(u)-t.getValueForPixel(v))}if(v===t.getPixelForValue(a)){const e=F(h)*t.getLineWidthForValue(a)/2;v+=e,h-=e}return{size:h,base:v,head:u,center:u+h/2}}_calculateBarIndexPixels(e,t){const i=t.scale,r=this.options,o=r.skipNull,s=l(r.maxBarThickness,1/0);let a,c;if(t.grouped){const i=o?this._getStackCount(e):t.stackCount,l="flex"===r.barThickness?function(e,t,i,n){const r=t.pixels,o=r[e];let s=e>0?r[e-1]:null,a=e<r.length-1?r[e+1]:null;const l=i.categoryPercentage;null===s&&(s=o-(null===a?t.end-t.start:a-o)),null===a&&(a=o+o-s);const c=o-(o-Math.min(s,a))/2*l;return{chunk:Math.abs(a-s)/2*l/n,ratio:i.barPercentage,start:c}}(e,t,r,i):function(e,t,i,r){const o=i.barThickness;let s,a;return n(o)?(s=t.min*i.categoryPercentage,a=i.barPercentage):(s=o*r,a=1),{chunk:s/r,ratio:a,start:t.pixels[e]-s/2}}(e,t,r,i),d=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);a=l.start+l.chunk*d+l.chunk/2,c=Math.min(s,l.chunk*l.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),c=Math.min(s,t.min*t.ratio);return{base:a-c/2,head:a+c/2,center:a,size:c}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,n=i.length;let r=0;for(;r<n;++r)null===this.getParsed(r)[t.axis]||i[r].hidden||i[r].draw(this._ctx)}},BubbleController:class extends zn{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,n){const r=super.parsePrimitiveData(e,t,i,n);for(let e=0;e<r.length;e++)r[e]._custom=this.resolveDataElementOptions(e+i).radius;return r}parseArrayData(e,t,i,n){const r=super.parseArrayData(e,t,i,n);for(let e=0;e<r.length;e++){const n=t[i+e];r[e]._custom=l(n[2],this.resolveDataElementOptions(e+i).radius)}return r}parseObjectData(e,t,i,n){const r=super.parseObjectData(e,t,i,n);for(let e=0;e<r.length;e++){const n=t[i+e];r[e]._custom=l(n&&n.r&&+n.r,this.resolveDataElementOptions(e+i).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:r}=t,o=this.getParsed(e),s=n.getLabelForValue(o.x),a=r.getLabelForValue(o.y),l=o._custom;return{label:i[e]||"",value:"("+s+", "+a+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,n){const r="reset"===n,{iScale:o,vScale:s}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(t,n),c=o.axis,d=s.axis;for(let u=t;u<t+i;u++){const t=e[u],i=!r&&this.getParsed(u),h={},p=h[c]=r?o.getPixelForDecimal(.5):o.getPixelForValue(i[c]),f=h[d]=r?s.getBasePixel():s.getPixelForValue(i[d]);h.skip=isNaN(p)||isNaN(f),l&&(h.options=a||this.resolveDataElementOptions(u,t.active?"active":n),r&&(h.options.radius=0)),this.updateElement(t,u,h,n)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let n=super.resolveDataElementOptions(e,t);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const r=n.radius;return"active"!==t&&(n.radius=0),n.radius+=l(i&&i._custom,r),n}},DoughnutController:Wr,LineController:class extends zn{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:n=[],_dataset:r}=t,o=this.chart._animationsDisabled;let{start:s,count:a}=ge(t,n,o);this._drawStart=s,this._drawCount=a,me(t)&&(s=0,a=n.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=n;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:l},e),this.updateElements(n,s,a,e)}updateElements(e,t,i,r){const o="reset"===r,{iScale:s,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,r),h=s.axis,p=a.axis,{spanGaps:f,segment:g}=this.options,m=H(f)?f:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||o||"none"===r,b=t+i,y=e.length;let w=t>0&&this.getParsed(t-1);for(let i=0;i<y;++i){const f=e[i],y=v?f:{};if(i<t||i>=b){y.skip=!0;continue}const C=this.getParsed(i),_=n(C[p]),S=y[h]=s.getPixelForValue(C[h],i),A=y[p]=o||_?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,C,l):C[p],i);y.skip=isNaN(S)||isNaN(A)||_,y.stop=i>0&&Math.abs(C[h]-w[h])>m,g&&(y.parsed=C,y.raw=c.data[i]),u&&(y.options=d||this.resolveDataElementOptions(i,f.active?"active":r)),v||this.updateElement(f,i,y,r),w=C}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return i;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}},PieController:class extends Wr{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:Vr,RadarController:class extends zn{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,n){return ii.bind(this)(e,t,i,n)}update(e){const t=this._cachedMeta,i=t.dataset,n=t.data||[],r=t.iScale.getLabels();if(i.points=n,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const o={_loop:!0,_fullLoop:r.length===n.length,options:t};this.updateElement(i,void 0,o,e)}this.updateElements(n,0,n.length,e)}updateElements(e,t,i,n){const r=this._cachedMeta.rScale,o="reset"===n;for(let s=t;s<t+i;s++){const t=e[s],i=this.resolveDataElementOptions(s,t.active?"active":n),a=r.getPointPositionForValue(s,this.getParsed(s).r),l=o?r.xCenter:a.x,c=o?r.yCenter:a.y,d={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:i};this.updateElement(t,s,d,n)}}},ScatterController:class extends zn{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:r}=t,o=this.getParsed(e),s=n.getLabelForValue(o.x),a=r.getLabelForValue(o.y);return{label:i[e]||"",value:"("+s+", "+a+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,n=this.chart._animationsDisabled;let{start:r,count:o}=ge(t,i,n);if(this._drawStart=r,this._drawCount=o,me(t)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:o}=t;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=i;const s=this.resolveDatasetElementOptions(e);s.segment=this.options.segment,this.updateElement(r,void 0,{animated:!n,options:s},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,r){const o="reset"===r,{iScale:s,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,d=this.resolveDataElementOptions(t,r),u=this.getSharedOptions(d),h=this.includeOptions(r,u),p=s.axis,f=a.axis,{spanGaps:g,segment:m}=this.options,v=H(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||o||"none"===r;let y=t>0&&this.getParsed(t-1);for(let d=t;d<t+i;++d){const t=e[d],i=this.getParsed(d),g=b?t:{},w=n(i[f]),C=g[p]=s.getPixelForValue(i[p],d),_=g[f]=o||w?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,i,l):i[f],d);g.skip=isNaN(C)||isNaN(_)||w,g.stop=d>0&&Math.abs(i[p]-y[p])>v,m&&(g.parsed=i,g.raw=c.data[d]),h&&(g.options=u||this.resolveDataElementOptions(d,t.active?"active":r)),b||this.updateElement(t,d,g,r),y=i}this.updateSharedOptions(u,r,d)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}const i=e.dataset,n=i.options&&i.options.borderWidth||0;if(!t.length)return n;const r=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(n,r,o)/2}}});function Ur(e,t,i,n){const r=Ci(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(i-t)/2,s=Math.min(o,n*t/2),a=e=>{const t=(i-Math.min(o,e))*n/2;return Q(e,0,Math.min(o,t))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Q(r.innerStart,0,s),innerEnd:Q(r.innerEnd,0,s)}}function Yr(e,t,i,n){return{x:i+e*Math.cos(t),y:n+e*Math.sin(t)}}function qr(e,t,i,n,r,o){const{x:s,y:a,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+n+i-c,0),h=d>0?d+n+i+c:0;let p=0;const f=r-l;if(n){const e=((d>0?d-n:0)+(u>0?u-n:0))/2;p=(f-(0!==e?f*e/(e+n):f))/2}const g=(f-Math.max(.001,f*u-i/D)/u)/2,m=l+g+p,v=r-g-p,{outerStart:b,outerEnd:y,innerStart:w,innerEnd:C}=Ur(t,h,u,v-m),_=u-b,S=u-y,A=m+b/_,x=v-y/S,E=h+w,T=h+C,M=m+w/E,k=v-C/T;if(e.beginPath(),o){const t=(A+x)/2;if(e.arc(s,a,u,A,t),e.arc(s,a,u,t,x),y>0){const t=Yr(S,x,s,a);e.arc(t.x,t.y,y,x,v+I)}const i=Yr(T,v,s,a);if(e.lineTo(i.x,i.y),C>0){const t=Yr(T,k,s,a);e.arc(t.x,t.y,C,v+I,k+Math.PI)}const n=(v-C/h+(m+w/h))/2;if(e.arc(s,a,h,v-C/h,n,!0),e.arc(s,a,h,n,m+w/h,!0),w>0){const t=Yr(E,M,s,a);e.arc(t.x,t.y,w,M+Math.PI,m-I)}const r=Yr(_,m,s,a);if(e.lineTo(r.x,r.y),b>0){const t=Yr(_,A,s,a);e.arc(t.x,t.y,b,m-I,A)}}else{e.moveTo(s,a);const t=Math.cos(A)*u+s,i=Math.sin(A)*u+a;e.lineTo(t,i);const n=Math.cos(x)*u+s,r=Math.sin(x)*u+a;e.lineTo(n,r)}e.closePath()}function Kr(e,t,i,n,r){const{fullCircles:o,startAngle:s,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=h,p?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let f=t.endAngle;if(o){qr(e,t,i,n,f,r);for(let t=0;t<o;++t)e.stroke();isNaN(a)||(f=s+(a%M||M))}p&&function(e,t,i){const{startAngle:n,pixelMargin:r,x:o,y:s,outerRadius:a,innerRadius:l}=t;let c=r/a;e.beginPath(),e.arc(o,s,a,n-c,i+c),l>r?(c=r/l,e.arc(o,s,l,i+c,n-c,!0)):e.arc(o,s,r,i+I,n-I),e.closePath(),e.clip()}(e,t,f),o||(qr(e,t,i,n,f,r),e.stroke())}function Xr(e,t,i=t){e.lineCap=l(i.borderCapStyle,t.borderCapStyle),e.setLineDash(l(i.borderDash,t.borderDash)),e.lineDashOffset=l(i.borderDashOffset,t.borderDashOffset),e.lineJoin=l(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=l(i.borderWidth,t.borderWidth),e.strokeStyle=l(i.borderColor,t.borderColor)}function Zr(e,t,i){e.lineTo(i.x,i.y)}function Qr(e,t,i={}){const n=e.length,{start:r=0,end:o=n-1}=i,{start:s,end:a}=t,l=Math.max(r,s),c=Math.min(o,a),d=r<s&&o<s||r>a&&o>a;return{count:n,start:l,loop:t.loop,ilen:c<l&&!d?n+c-l:c-l}}function Jr(e,t,i,n){const{points:r,options:o}=t,{count:s,start:a,loop:l,ilen:c}=Qr(r,i,n),d=function(e){return e.stepped?Ft:e.tension||"monotone"===e.cubicInterpolationMode?$t:Zr}(o);let u,h,p,{move:f=!0,reverse:g}=n||{};for(u=0;u<=c;++u)h=r[(a+(g?c-u:u))%s],h.skip||(f?(e.moveTo(h.x,h.y),f=!1):d(e,p,h,g,o.stepped),p=h);return l&&(h=r[(a+(g?c:0))%s],d(e,p,h,g,o.stepped)),!!l}function eo(e,t,i,n){const r=t.points,{count:o,start:s,ilen:a}=Qr(r,i,n),{move:l=!0,reverse:c}=n||{};let d,u,h,p,f,g,m=0,v=0;const b=e=>(s+(c?a-e:e))%o,y=()=>{p!==f&&(e.lineTo(m,f),e.lineTo(m,p),e.lineTo(m,g))};for(l&&(u=r[b(0)],e.moveTo(u.x,u.y)),d=0;d<=a;++d){if(u=r[b(d)],u.skip)continue;const t=u.x,i=u.y,n=0|t;n===h?(i<p?p=i:i>f&&(f=i),m=(v*m+t)/++v):(y(),e.lineTo(t,i),h=n,v=0,p=f=i),g=i}y()}function to(e){const t=e.options,i=t.borderDash&&t.borderDash.length;return!(e._decimated||e._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||i)?eo:Jr}const io="function"==typeof Path2D;function no(e,t,i,n){io&&!t.options.segment?function(e,t,i,n){let r=t._path;r||(r=t._path=new Path2D,t.path(r,i,n)&&r.closePath()),Xr(e,t.options),e.stroke(r)}(e,t,i,n):function(e,t,i,n){const{segments:r,options:o}=t,s=to(t);for(const a of r)Xr(e,o,a.style),e.beginPath(),s(e,t,a,{start:i,end:i+n-1})&&e.closePath(),e.stroke()}(e,t,i,n)}class ro extends Wn{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){const n=i.spanGaps?this._loop:this._fullLoop;ci(this._points,i,e,n,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Li(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,n=e[t],r=this.points,o=Ni(this,{property:t,start:n,end:n});if(!o.length)return;const s=[],a=function(e){return e.stepped?gi:e.tension||"monotone"===e.cubicInterpolationMode?mi:fi}(i);let l,c;for(l=0,c=o.length;l<c;++l){const{start:c,end:d}=o[l],u=r[c],h=r[d];if(u===h){s.push(u);continue}const p=a(u,h,Math.abs((n-u[t])/(h[t]-u[t])),i.stepped);p[t]=e[t],s.push(p)}return 1===s.length?s[0]:s}pathSegment(e,t,i){return to(this)(e,this,t,i)}path(e,t,i){const n=this.segments,r=to(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const s of n)o&=r(e,this,s,{start:t,end:t+i-1});return!!o}draw(e,t,i,n){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),no(e,this,i,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function oo(e,t,i,n){const r=e.options,{[i]:o}=e.getProps([i],n);return Math.abs(t-o)<r.radius+r.hitRadius}function so(e,t){const{x:i,y:n,base:r,width:o,height:s}=e.getProps(["x","y","base","width","height"],t);let a,l,c,d,u;return e.horizontal?(u=s/2,a=Math.min(i,r),l=Math.max(i,r),c=n-u,d=n+u):(u=o/2,a=i-u,l=i+u,c=Math.min(n,r),d=Math.max(n,r)),{left:a,top:c,right:l,bottom:d}}function ao(e,t,i,n){return e?0:Q(t,i,n)}function lo(e){const t=so(e),i=t.right-t.left,n=t.bottom-t.top,r=function(e,t,i){const n=e.options.borderWidth,r=e.borderSkipped,o=_i(n);return{t:ao(r.top,o.top,0,i),r:ao(r.right,o.right,0,t),b:ao(r.bottom,o.bottom,0,i),l:ao(r.left,o.left,0,t)}}(e,i/2,n/2),s=function(e,t,i){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,s=Si(r),a=Math.min(t,i),l=e.borderSkipped,c=n||o(r);return{topLeft:ao(!c||l.top||l.left,s.topLeft,0,a),topRight:ao(!c||l.top||l.right,s.topRight,0,a),bottomLeft:ao(!c||l.bottom||l.left,s.bottomLeft,0,a),bottomRight:ao(!c||l.bottom||l.right,s.bottomRight,0,a)}}(e,i/2,n/2);return{outer:{x:t.left,y:t.top,w:i,h:n,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:i-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function co(e,t,i,n){const r=null===t,o=null===i,s=e&&!(r&&o)&&so(e,n);return s&&(r||ee(t,s.left,s.right))&&(o||ee(i,s.top,s.bottom))}function uo(e,t){e.rect(t.x,t.y,t.w,t.h)}function ho(e,t,i={}){const n=e.x!==i.x?-t:0,r=e.y!==i.y?-t:0,o=(e.x+e.w!==i.x+i.w?t:0)-n,s=(e.y+e.h!==i.y+i.h?t:0)-r;return{x:e.x+n,y:e.y+r,w:e.w+o,h:e.h+s,radius:e.radius}}var po=Object.freeze({__proto__:null,ArcElement:class extends Wn{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const n=this.getProps(["x","y"],i),{angle:r,distance:o}=Y(n,{x:e,y:t}),{startAngle:s,endAngle:a,innerRadius:c,outerRadius:d,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=(this.options.spacing+this.options.borderWidth)/2,p=l(u,a-s),f=Z(r,s,a)&&s!==a,g=p>=M||f,m=ee(o,c+h,d+h);return g&&m}getCenterPoint(e){const{x:t,y:i,startAngle:n,endAngle:r,innerRadius:o,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:l}=this.options,c=(n+r)/2,d=(o+s+l+a)/2;return{x:t+Math.cos(c)*d,y:i+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,n=(t.offset||0)/4,r=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=i>M?Math.floor(i/M):0,0===i||this.innerRadius<0||this.outerRadius<0)return;e.save();const s=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(s)*n,Math.sin(s)*n);const a=n*(1-Math.sin(Math.min(D,i||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,i,n,r){const{fullCircles:o,startAngle:s,circumference:a}=t;let l=t.endAngle;if(o){qr(e,t,i,n,l,r);for(let t=0;t<o;++t)e.fill();isNaN(a)||(l=s+(a%M||M))}qr(e,t,i,n,l,r),e.fill()}(e,this,a,r,o),Kr(e,this,a,r,o),e.restore()}},BarElement:class extends Wn{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:n}}=this,{inner:r,outer:o}=lo(this),s=(a=o.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?zt:uo;var a;e.save(),o.w===r.w&&o.h===r.h||(e.beginPath(),s(e,ho(o,t,r)),e.clip(),s(e,ho(r,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),s(e,ho(r,t)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,t,i){return co(this,e,t,i)}inXRange(e,t){return co(this,e,null,t)}inYRange(e,t){return co(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:n,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+n)/2:t,y:r?i:(i+n)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}},LineElement:ro,PointElement:class extends Wn{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const n=this.options,{x:r,y:o}=this.getProps(["x","y"],i);return Math.pow(e-r,2)+Math.pow(t-o,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,t){return oo(this,e,"x",t)}inYRange(e,t){return oo(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const i=this.options;this.skip||i.radius<.1||!Ot(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,Rt(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}});function fo(e,t,i,n){const r=e.indexOf(t);if(-1===r)return((e,t,i,n)=>("string"==typeof t?(i=e.push(t)-1,n.unshift({index:i,label:t})):isNaN(t)&&(i=null),i))(e,t,i,n);return r!==e.lastIndexOf(t)?i:r}function go(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}function mo(e,t,{horizontal:i,minRotation:n}){const r=V(n),o=(i?Math.sin(r):Math.cos(r))||.001,s=.75*t*(""+e).length;return Math.min(t/o,s)}class vo extends Jn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return n(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:n,max:r}=this;const o=e=>n=t?n:e,s=e=>r=i?r:e;if(e){const e=F(n),t=F(r);e<0&&t<0?s(0):e>0&&t>0&&o(0)}if(n===r){let t=0===r?1:Math.abs(.05*r);s(r+t),e||o(n-t)}this.min=n,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:i,stepSize:n}=e;return n?(t=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),i=i||11),i&&(t=Math.min(i,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r=function(e,t){const i=[],{bounds:r,step:o,min:s,max:a,precision:l,count:c,maxTicks:d,maxDigits:u,includeBounds:h}=e,p=o||1,f=d-1,{min:g,max:m}=t,v=!n(s),b=!n(a),y=!n(c),w=(m-g)/(u+1);let C,_,S,A,x=G((m-g)/f/p)*p;if(x<1e-14&&!v&&!b)return[{value:g},{value:m}];A=Math.ceil(m/x)-Math.floor(g/x),A>f&&(x=G(A*x/f/p)*p),n(l)||(C=Math.pow(10,l),x=Math.ceil(x*C)/C),"ticks"===r?(_=Math.floor(g/x)*x,S=Math.ceil(m/x)*x):(_=g,S=m),v&&b&&o&&z((a-s)/o,x/1e3)?(A=Math.round(Math.min((a-s)/x,d)),x=(a-s)/A,_=s,S=a):y?(_=v?s:_,S=b?a:S,A=c-1,x=(S-_)/A):(A=(S-_)/x,A=$(A,Math.round(A),x/1e3)?Math.round(A):Math.ceil(A));const E=Math.max(U(x),U(_));C=Math.pow(10,n(l)?E:l),_=Math.round(_*C)/C,S=Math.round(S*C)/C;let T=0;for(v&&(h&&_!==s?(i.push({value:s}),_<s&&T++,$(Math.round((_+T*x)*C)/C,s,mo(s,w,e))&&T++):_<s&&T++);T<A;++T){const e=Math.round((_+T*x)*C)/C;if(b&&e>a)break;i.push({value:e})}return b&&h&&S!==a?i.length&&$(i[i.length-1].value,a,mo(a,w,e))?i[i.length-1].value=a:i.push({value:a}):b&&S!==a||i.push({value:S}),i}({maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&W(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const n=(i-t)/Math.max(e.length-1,1)/2;t-=n,i+=n}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return rt(e,this.chart.options.locale,this.options.ticks.format)}}class bo extends vo{static id="linear";static defaults={ticks:{callback:st.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=s(e)?e:0,this.max=s(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=V(this.options.ticks.minRotation),n=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/n))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const yo=e=>Math.floor(L(e)),wo=(e,t)=>Math.pow(10,yo(e)+t);function Co(e){return 1===e/Math.pow(10,yo(e))}function _o(e,t,i){const n=Math.pow(10,i),r=Math.floor(e/n);return Math.ceil(t/n)-r}function So(e,{min:t,max:i}){t=a(e.min,t);const n=[],r=yo(t);let o=function(e,t){let i=yo(t-e);for(;_o(e,t,i)>10;)i++;for(;_o(e,t,i)<10;)i--;return Math.min(i,yo(e))}(t,i),s=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),c=r>o?Math.pow(10,r):0,d=Math.round((t-c)*s)/s,u=Math.floor((t-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,o)),p=a(e.min,Math.round((c+u+h*Math.pow(10,o))*s)/s);for(;p<i;)n.push({value:p,major:Co(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,s=o>=0?1:s),p=Math.round((c+u+h*Math.pow(10,o))*s)/s;const f=a(e.max,p);return n.push({value:f,major:Co(f),significand:h}),n}class Ao extends Jn{static id="logarithmic";static defaults={ticks:{callback:st.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=vo.prototype.parse.apply(this,[e,t]);if(0!==i)return s(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=s(e)?Math.max(0,e):null,this.max=s(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!s(this._userMin)&&(this.min=e===wo(this.min,0)?wo(this.min,-1):wo(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,n=this.max;const r=t=>i=e?i:t,o=e=>n=t?n:e;i===n&&(i<=0?(r(1),o(10)):(r(wo(i,-1)),o(wo(n,1)))),i<=0&&r(wo(n,-1)),n<=0&&o(wo(i,1)),this.min=i,this.max=n}buildTicks(){const e=this.options,t=So({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&W(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":rt(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=L(e),this._valueRange=L(this.max)-L(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(L(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function xo(e){const t=e.ticks;if(t.display&&e.display){const e=Ai(t.backdropPadding);return l(t.font&&t.font.size,ht.font.size)+e.height}return 0}function Eo(e,t,i,n,r){return e===n||e===r?{start:t-i/2,end:t+i/2}:e<n||e>r?{start:t-i,end:t}:{start:t,end:t+i}}function To(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),n=[],o=[],s=e._pointLabels.length,a=e.options.pointLabels,l=a.centerPointLabels?D/s:0;for(let h=0;h<s;h++){const s=a.setContext(e.getPointLabelContext(h));o[h]=s.padding;const p=e.getPointPosition(h,e.drawingArea+o[h],l),f=xi(s.font),g=(c=e.ctx,d=f,u=r(u=e._pointLabels[h])?u:[u],{w:Mt(c,d.string,u),h:u.length*d.lineHeight});n[h]=g;const m=X(e.getIndexAngle(h)+l),v=Math.round(j(m));Do(i,t,m,Eo(v,p.x,g.w,0,180),Eo(v,p.y,g.h,90,270))}var c,d,u;e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=function(e,t,i){const n=[],r=e._pointLabels.length,o=e.options,{centerPointLabels:s,display:a}=o.pointLabels,l={extra:xo(o)/2,additionalAngle:s?D/r:0};let c;for(let o=0;o<r;o++){l.padding=i[o],l.size=t[o];const r=Mo(e,o,l);n.push(r),"auto"===a&&(r.visible=ko(r,c),r.visible&&(c=r))}return n}(e,n,o)}function Do(e,t,i,n,r){const o=Math.abs(Math.sin(i)),s=Math.abs(Math.cos(i));let a=0,l=0;n.start<t.l?(a=(t.l-n.start)/o,e.l=Math.min(e.l,t.l-a)):n.end>t.r&&(a=(n.end-t.r)/o,e.r=Math.max(e.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/s,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/s,e.b=Math.max(e.b,t.b+l))}function Mo(e,t,i){const n=e.drawingArea,{extra:r,additionalAngle:o,padding:s,size:a}=i,l=e.getPointPosition(t,n+r+s,o),c=Math.round(j(X(l.angle+I))),d=function(e,t,i){90===i||270===i?e-=t/2:(i>270||i<90)&&(e-=t);return e}(l.y,a.h,c),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,i){"right"===i?e-=t:"center"===i&&(e-=t/2);return e}(l.x,a.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:h,top:d,right:h+a.w,bottom:d+a.h}}function ko(e,t){if(!t)return!0;const{left:i,top:n,right:r,bottom:o}=e;return!(Ot({x:i,y:n},t)||Ot({x:i,y:o},t)||Ot({x:r,y:n},t)||Ot({x:r,y:o},t))}function Po(e,t,i){const{left:r,top:o,right:s,bottom:a}=i,{backdropColor:l}=t;if(!n(l)){const i=Si(t.borderRadius),n=Ai(t.backdropPadding);e.fillStyle=l;const c=r-n.left,d=o-n.top,u=s-r+n.width,h=a-o+n.height;Object.values(i).some((e=>0!==e))?(e.beginPath(),zt(e,{x:c,y:d,w:u,h:h,radius:i}),e.fill()):e.fillRect(c,d,u,h)}}function Ro(e,t,i,n){const{ctx:r}=e;if(i)r.arc(e.xCenter,e.yCenter,t,0,M);else{let i=e.getPointPosition(0,t);r.moveTo(i.x,i.y);for(let o=1;o<n;o++)i=e.getPointPosition(o,t),r.lineTo(i.x,i.y)}}class Io extends vo{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:st.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ai(xo(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=s(e)&&!isNaN(e)?e:0,this.max=s(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/xo(this.options))}generateTickLabels(e){vo.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const i=u(this.options.pointLabels.callback,[e,t],this);return i||0===i?i:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?To(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,n){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,n))}getIndexAngle(e){return X(e*(M/(this._pointLabels.length||1))+V(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(n(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(n(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return function(e,t,i){return Di(e,{label:i,index:t,type:"pointLabel"})}(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const n=this.getIndexAngle(e)-I+i;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter,angle:n}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:n,bottom:r}=this._pointLabelItems[e];return{left:t,top:i,right:n,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),Ro(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:n,border:r}=t,o=this._pointLabels.length;let s,a,l;if(t.pointLabels.display&&function(e,t){const{ctx:i,options:{pointLabels:n}}=e;for(let r=t-1;r>=0;r--){const t=e._pointLabelItems[r];if(!t.visible)continue;const o=n.setContext(e.getPointLabelContext(r));Po(i,o,t);const s=xi(o.font),{x:a,y:l,textAlign:c}=t;Ht(i,e._pointLabels[r],a,l+s.lineHeight/2,s,{color:o.color,textAlign:c,textBaseline:"middle"})}}(this,o),n.display&&this.ticks.forEach(((e,t)=>{if(0!==t||0===t&&this.min<0){a=this.getDistanceFromCenterForValue(e.value);const i=this.getContext(t),s=n.setContext(i),l=r.setContext(i);!function(e,t,i,n,r){const o=e.ctx,s=t.circular,{color:a,lineWidth:l}=t;!s&&!n||!a||!l||i<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(r.dash||[]),o.lineDashOffset=r.dashOffset,o.beginPath(),Ro(e,i,s,n),o.closePath(),o.stroke(),o.restore())}(this,s,a,o,l)}})),i.display){for(e.save(),s=o-1;s>=0;s--){const n=i.setContext(this.getPointLabelContext(s)),{color:r,lineWidth:o}=n;o&&r&&(e.lineWidth=o,e.strokeStyle=r,e.setLineDash(n.borderDash),e.lineDashOffset=n.borderDashOffset,a=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(s,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const n=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(n),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((n,s)=>{if(0===s&&this.min>=0&&!t.reverse)return;const a=i.setContext(this.getContext(s)),l=xi(a.font);if(r=this.getDistanceFromCenterForValue(this.ticks[s].value),a.showLabelBackdrop){e.font=l.string,o=e.measureText(n.label).width,e.fillStyle=a.backdropColor;const t=Ai(a.backdropPadding);e.fillRect(-o/2-t.left,-r-l.size/2-t.top,o+t.width,l.size+t.height)}Ht(e,n.label,0,-r,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})})),e.restore()}drawTitle(){}}const Oo={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},No=Object.keys(Oo);function Lo(e,t){return e-t}function Fo(e,t){if(n(t))return null;const i=e._adapter,{parser:r,round:o,isoWeekday:a}=e._parseOpts;let l=t;return"function"==typeof r&&(l=r(l)),s(l)||(l="string"==typeof r?i.parse(l,r):i.parse(l)),null===l?null:(o&&(l="week"!==o||!H(a)&&!0!==a?i.startOf(l,o):i.startOf(l,"isoWeek",a)),+l)}function $o(e,t,i,n){const r=No.length;for(let o=No.indexOf(e);o<r-1;++o){const e=Oo[No[o]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((i-t)/(r*e.size))<=n)return No[o]}return No[r-1]}function Go(e,t,i){if(i){if(i.length){const{lo:n,hi:r}=te(i,t);e[i[n]>=t?i[n]:i[r]]=!0}}else e[t]=!0}function Bo(e,t,i){const n=[],r={},o=t.length;let s,a;for(s=0;s<o;++s)a=t[s],r[a]=s,n.push({value:a,major:!1});return 0!==o&&i?function(e,t,i,n){const r=e._adapter,o=+r.startOf(t[0].value,n),s=t[t.length-1].value;let a,l;for(a=o;a<=s;a=+r.add(a,1,n))l=i[a],l>=0&&(t[l].major=!0);return t}(e,n,r,i):n}class Ho extends Jn{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),n=this._adapter=new Or._date(e.adapters.date);n.init(t),b(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Fo(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:n,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(e){o||isNaN(e.min)||(n=Math.min(n,e.min)),a||isNaN(e.max)||(r=Math.max(r,e.max))}o&&a||(l(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||l(this.getMinMax(!1))),n=s(n)&&!isNaN(n)?n:+t.startOf(Date.now(),i),r=s(r)&&!isNaN(r)?r:+t.endOf(Date.now(),i)+1,this.min=Math.min(n,r-1),this.max=Math.max(n+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,n="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const r=this.min,o=re(n,r,this.max);return this._unit=t.unit||(i.autoSkip?$o(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,i,n,r){for(let o=No.length-1;o>=No.indexOf(i);o--){const i=No[o];if(Oo[i].common&&e._adapter.diff(r,n,i)>=t-1)return i}return No[i?No.indexOf(i):0]}(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(e){for(let t=No.indexOf(e)+1,i=No.length;t<i;++t)if(Oo[No[t]].common)return No[t]}(this._unit):void 0,this.initOffsets(n),e.reverse&&o.reverse(),Bo(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(e=[]){let t,i,n=0,r=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),n=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,i=this.getDecimalForValue(e[e.length-1]),r=1===e.length?i:(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Q(n,0,o),r=Q(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,t=this.min,i=this.max,n=this.options,r=n.time,o=r.unit||$o(r.minUnit,t,i,this._getLabelCapacity(t)),s=l(n.ticks.stepSize,1),a="week"===o&&r.isoWeekday,c=H(a)||!0===a,d={};let u,h,p=t;if(c&&(p=+e.startOf(p,"isoWeek",a)),p=+e.startOf(p,c?"day":o),e.diff(i,t,o)>1e5*s)throw new Error(t+" and "+i+" are too far apart with stepSize of "+s+" "+o);const f="data"===n.ticks.source&&this.getDataTimestamps();for(u=p,h=0;u<i;u=+e.add(u,s,o),h++)Go(d,u,f);return u!==i&&"ticks"!==n.bounds&&1!==h||Go(d,u,f),Object.keys(d).sort(Lo).map((e=>+e))}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,n=this._unit,r=t||i[n];return this._adapter.format(e,r)}_tickFormatFunction(e,t,i,n){const r=this.options,o=r.ticks.callback;if(o)return u(o,[e,t,i],this);const s=r.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&s[a],d=l&&s[l],h=i[t],p=l&&d&&h&&h.major;return this._adapter.format(e,n||(p?d:c))}generateTickLabels(e){let t,i,n;for(t=0,i=e.length;t<i;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,n=V(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(n),o=Math.sin(n),s=this._resolveTickFontOptions(0).size;return{w:i*r+s*o,h:i*o+s*r}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,n=i[t.unit]||i.millisecond,r=this._tickFormatFunction(e,0,Bo(this,[e],this._majorUnit),n),o=this._getLabelSize(r),s=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return s>0?s:1}getDataTimestamps(){let e,t,i=this._cache.data||[];if(i.length)return i;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(e=0,t=n.length;e<t;++e)i=i.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const n=this.getLabels();for(t=0,i=n.length;t<i;++t)e.push(Fo(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return le(e.sort(Lo))}}function zo(e,t,i){let n,r,o,s,a=0,l=e.length-1;i?(t>=e[a].pos&&t<=e[l].pos&&({lo:a,hi:l}=ie(e,"pos",t)),({pos:n,time:o}=e[a]),({pos:r,time:s}=e[l])):(t>=e[a].time&&t<=e[l].time&&({lo:a,hi:l}=ie(e,"time",t)),({time:n,pos:o}=e[a]),({time:r,pos:s}=e[l]));const c=r-n;return c?o+(s-o)*(t-n)/c:o}var Wo=Object.freeze({__proto__:null,CategoryScale:class extends Jn{static id="category";static defaults={ticks:{callback:go}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:i,label:n}of t)e[i]===n&&e.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(n(e))return null;const i=this.getLabels();return((e,t)=>null===e?null:Q(Math.round(e),0,t))(t=isFinite(t)&&i[t]===e?t:fo(i,e,l(t,e),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(i=0),t||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,n=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let i=e;i<=t;i++)n.push({value:i});return n}getLabelForValue(e){return go.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:bo,LogarithmicScale:Ao,RadialLinearScale:Io,TimeScale:Ho,TimeSeriesScale:class extends Ho{static id="timeseries";static defaults=Ho.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=zo(t,this.min),this._tableRange=zo(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,n=[],r=[];let o,s,a,l,c;for(o=0,s=e.length;o<s;++o)l=e[o],l>=t&&l<=i&&n.push(l);if(n.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,s=n.length;o<s;++o)c=n[o+1],a=n[o-1],l=n[o],Math.round((c+a)/2)!==l&&r.push({time:l,pos:o/(s-1)});return r}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return i.includes(e)&&i.length||i.splice(0,0,e),i.includes(t)&&1!==i.length||i.push(t),i.sort(((e,t)=>e-t))}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return e=t.length&&i.length?this.normalize(t.concat(i)):t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(zo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return zo(this._table,i*this._tableRange+this._minPos,!0)}}});const Vo=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],jo=Vo.map((e=>e.replace("rgb(","rgba(").replace(")",", 0.5)")));function Uo(e){return Vo[e%Vo.length]}function Yo(e){return jo[e%jo.length]}function qo(e){let t=0;return(i,n)=>{const r=e.getDatasetMeta(n).controller;r instanceof Wr?t=function(e,t){return e.backgroundColor=e.data.map((()=>Uo(t++))),t}(i,t):r instanceof Vr?t=function(e,t){return e.backgroundColor=e.data.map((()=>Yo(t++))),t}(i,t):r&&(t=function(e,t){return e.borderColor=Uo(t),e.backgroundColor=Yo(t),++t}(i,t))}}function Ko(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}var Xo={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,i){if(!i.enabled)return;const{data:{datasets:n},options:r}=e.config,{elements:o}=r,s=Ko(n)||(a=r)&&(a.borderColor||a.backgroundColor)||o&&Ko(o)||"rgba(0,0,0,0.1)"!==ht.borderColor||"rgba(0,0,0,0.1)"!==ht.backgroundColor;var a;if(!i.forceOverride&&s)return;const l=qo(e);n.forEach(l)}};function Zo(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Qo(e){e.data.datasets.forEach((e=>{Zo(e)}))}var Jo={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,i)=>{if(!i.enabled)return void Qo(e);const r=e.width;e.data.datasets.forEach(((t,o)=>{const{_data:s,indexAxis:a}=t,l=e.getDatasetMeta(o),c=s||t.data;if("y"===Ei([a,e.options.indexAxis]))return;if(!l.controller.supportsDecimation)return;const d=e.scales[l.xAxisID];if("linear"!==d.type&&"time"!==d.type)return;if(e.options.parsing)return;let{start:u,count:h}=function(e,t){const i=t.length;let n,r=0;const{iScale:o}=e,{min:s,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(r=Q(ie(t,o.axis,s).lo,0,i-1)),n=c?Q(ie(t,o.axis,a).hi+1,r,i)-r:i-r,{start:r,count:n}}(l,c);if(h<=(i.threshold||4*r))return void Zo(t);let p;switch(n(s)&&(t._data=c,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),i.algorithm){case"lttb":p=function(e,t,i,n,r){const o=r.samples||n;if(o>=i)return e.slice(t,t+i);const s=[],a=(i-2)/(o-2);let l=0;const c=t+i-1;let d,u,h,p,f,g=t;for(s[l++]=e[g],d=0;d<o-2;d++){let n,r=0,o=0;const c=Math.floor((d+1)*a)+1+t,m=Math.min(Math.floor((d+2)*a)+1,i)+t,v=m-c;for(n=c;n<m;n++)r+=e[n].x,o+=e[n].y;r/=v,o/=v;const b=Math.floor(d*a)+1+t,y=Math.min(Math.floor((d+1)*a)+1,i)+t,{x:w,y:C}=e[g];for(h=p=-1,n=b;n<y;n++)p=.5*Math.abs((w-r)*(e[n].y-C)-(w-e[n].x)*(o-C)),p>h&&(h=p,u=e[n],f=n);s[l++]=u,g=f}return s[l++]=e[c],s}(c,u,h,r,i);break;case"min-max":p=function(e,t,i,r){let o,s,a,l,c,d,u,h,p,f,g=0,m=0;const v=[],b=t+i-1,y=e[t].x,w=e[b].x-y;for(o=t;o<t+i;++o){s=e[o],a=(s.x-y)/w*r,l=s.y;const t=0|a;if(t===c)l<p?(p=l,d=o):l>f&&(f=l,u=o),g=(m*g+s.x)/++m;else{const i=o-1;if(!n(d)&&!n(u)){const t=Math.min(d,u),n=Math.max(d,u);t!==h&&t!==i&&v.push({...e[t],x:g}),n!==h&&n!==i&&v.push({...e[n],x:g})}o>0&&i!==h&&v.push(e[i]),v.push(s),c=t,m=0,p=f=l,d=u=h=o}}return v}(c,u,h,r);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}t._decimated=p}))},destroy(e){Qo(e)}};function es(e,t,i,n){if(n)return;let r=t[e],o=i[e];return"angle"===e&&(r=X(r),o=X(o)),{property:e,start:r,end:o}}function ts(e,t,i){for(;t>e;t--){const e=i[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function is(e,t,i,n){return e&&t?n(e[i],t[i]):e?e[i]:t?t[i]:0}function ns(e,t){let i=[],n=!1;return r(e)?(n=!0,i=e):i=function(e,t){const{x:i=null,y:n=null}=e||{},r=t.points,o=[];return t.segments.forEach((({start:e,end:t})=>{t=ts(e,t,r);const s=r[e],a=r[t];null!==n?(o.push({x:s.x,y:n}),o.push({x:a.x,y:n})):null!==i&&(o.push({x:i,y:s.y}),o.push({x:i,y:a.y}))})),o}(e,t),i.length?new ro({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function rs(e){return e&&!1!==e.fill}function os(e,t,i){let n=e[t].fill;const r=[t];let o;if(!i)return n;for(;!1!==n&&-1===r.indexOf(n);){if(!s(n))return n;if(o=e[n],!o)return!1;if(o.visible)return n;r.push(n),n=o.fill}return!1}function ss(e,t,i){const n=function(e){const t=e.options,i=t.fill;let n=l(i&&i.target,i);void 0===n&&(n=!!t.backgroundColor);if(!1===n||null===n)return!1;if(!0===n)return"origin";return n}(e);if(o(n))return!isNaN(n.value)&&n;let r=parseFloat(n);return s(r)&&Math.floor(r)===r?function(e,t,i,n){"-"!==e&&"+"!==e||(i=t+i);if(i===t||i<0||i>=n)return!1;return i}(n[0],t,r,i):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function as(e,t,i){const n=[];for(let r=0;r<i.length;r++){const o=i[r],{first:s,last:a,point:l}=ls(o,t,"x");if(!(!l||s&&a))if(s)n.unshift(l);else if(e.push(l),!a)break}e.push(...n)}function ls(e,t,i){const n=e.interpolate(t,i);if(!n)return{};const r=n[i],o=e.segments,s=e.points;let a=!1,l=!1;for(let e=0;e<o.length;e++){const t=o[e],n=s[t.start][i],c=s[t.end][i];if(ee(r,n,c)){a=r===n,l=r===c;break}}return{first:a,last:l,point:n}}class cs{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:n,y:r,radius:o}=this;return t=t||{start:0,end:M},e.arc(n,r,o,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:n}=this,r=e.angle;return{x:t+Math.cos(r)*n,y:i+Math.sin(r)*n,angle:r}}}function ds(e){const{chart:t,fill:i,line:n}=e;if(s(i))return function(e,t){const i=e.getDatasetMeta(t),n=i&&e.isDatasetVisible(t);return n?i.dataset:null}(t,i);if("stack"===i)return function(e){const{scale:t,index:i,line:n}=e,r=[],o=n.segments,s=n.points,a=function(e,t){const i=[],n=e.getMatchingVisibleMetas("line");for(let e=0;e<n.length;e++){const r=n[e];if(r.index===t)break;r.hidden||i.unshift(r.dataset)}return i}(t,i);a.push(ns({x:null,y:t.bottom},n));for(let e=0;e<o.length;e++){const t=o[e];for(let e=t.start;e<=t.end;e++)as(r,s[e],a)}return new ro({points:r,options:{}})}(e);if("shape"===i)return!0;const r=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:i}=e,n=t.options,r=t.getLabels().length,s=n.reverse?t.max:t.min,a=function(e,t,i){let n;return n="start"===e?i:"end"===e?t.options.reverse?t.min:t.max:o(e)?e.value:t.getBaseValue(),n}(i,t,s),l=[];if(n.grid.circular){const e=t.getPointPositionForValue(0,s);return new cs({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(a)})}for(let e=0;e<r;++e)l.push(t.getPointPositionForValue(e,a));return l}(e);return function(e){const{scale:t={},fill:i}=e,n=function(e,t){let i=null;return"start"===e?i=t.bottom:"end"===e?i=t.top:o(e)?i=t.getPixelForValue(e.value):t.getBasePixel&&(i=t.getBasePixel()),i}(i,t);if(s(n)){const e=t.isHorizontal();return{x:e?n:null,y:e?null:n}}return null}(e)}(e);return r instanceof cs?r:ns(r,n)}function us(e,t,i){const n=ds(t),{line:r,scale:o,axis:s}=t,a=r.options,l=a.fill,c=a.backgroundColor,{above:d=c,below:u=c}=l||{};n&&r.points.length&&(Nt(e,i),function(e,t){const{line:i,target:n,above:r,below:o,area:s,scale:a}=t,l=i._loop?"angle":t.axis;e.save(),"x"===l&&o!==r&&(hs(e,n,s.top),ps(e,{line:i,target:n,color:r,scale:a,property:l}),e.restore(),e.save(),hs(e,n,s.bottom));ps(e,{line:i,target:n,color:o,scale:a,property:l}),e.restore()}(e,{line:r,target:n,above:d,below:u,area:i,scale:o,axis:s}),Lt(e))}function hs(e,t,i){const{segments:n,points:r}=t;let o=!0,s=!1;e.beginPath();for(const a of n){const{start:n,end:l}=a,c=r[n],d=r[ts(n,l,r)];o?(e.moveTo(c.x,c.y),o=!1):(e.lineTo(c.x,i),e.lineTo(c.x,c.y)),s=!!t.pathSegment(e,a,{move:s}),s?e.closePath():e.lineTo(d.x,i)}e.lineTo(t.first().x,i),e.closePath(),e.clip()}function ps(e,t){const{line:i,target:n,property:r,color:o,scale:s}=t,a=function(e,t,i){const n=e.segments,r=e.points,o=t.points,s=[];for(const e of n){let{start:n,end:a}=e;a=ts(n,a,r);const l=es(i,r[n],r[a],e.loop);if(!t.segments){s.push({source:e,target:l,start:r[n],end:r[a]});continue}const c=Ni(t,l);for(const t of c){const n=es(i,o[t.start],o[t.end],t.loop),a=Oi(e,r,n);for(const e of a)s.push({source:e,target:t,start:{[i]:is(l,n,"start",Math.max)},end:{[i]:is(l,n,"end",Math.min)}})}}return s}(i,n,r);for(const{source:t,target:l,start:c,end:d}of a){const{style:{backgroundColor:a=o}={}}=t,u=!0!==n;e.save(),e.fillStyle=a,fs(e,s,u&&es(r,c,d)),e.beginPath();const h=!!i.pathSegment(e,t);let p;if(u){h?e.closePath():gs(e,n,d,r);const t=!!n.pathSegment(e,l,{move:h,reverse:!0});p=h&&t,p||gs(e,n,c,r)}e.closePath(),e.fill(p?"evenodd":"nonzero"),e.restore()}}function fs(e,t,i){const{top:n,bottom:r}=t.chart.chartArea,{property:o,start:s,end:a}=i||{};"x"===o&&(e.beginPath(),e.rect(s,n,a-s,r-n),e.clip())}function gs(e,t,i,n){const r=t.interpolate(i,n);r&&e.lineTo(r.x,r.y)}var ms={id:"filler",afterDatasetsUpdate(e,t,i){const n=(e.data.datasets||[]).length,r=[];let o,s,a,l;for(s=0;s<n;++s)o=e.getDatasetMeta(s),a=o.dataset,l=null,a&&a.options&&a instanceof ro&&(l={visible:e.isDatasetVisible(s),index:s,fill:ss(a,s,n),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,r.push(l);for(s=0;s<n;++s)l=r[s],l&&!1!==l.fill&&(l.fill=os(r,s,i.propagate))},beforeDraw(e,t,i){const n="beforeDraw"===i.drawTime,r=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let t=r.length-1;t>=0;--t){const i=r[t].$filler;i&&(i.line.updateControlPoints(o,i.axis),n&&i.fill&&us(e.ctx,i,o))}},beforeDatasetsDraw(e,t,i){if("beforeDatasetsDraw"!==i.drawTime)return;const n=e.getSortedVisibleDatasetMetas();for(let t=n.length-1;t>=0;--t){const i=n[t].$filler;rs(i)&&us(e.ctx,i,e.chartArea)}},beforeDatasetDraw(e,t,i){const n=t.meta.$filler;rs(n)&&"beforeDatasetDraw"===i.drawTime&&us(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const vs=(e,t)=>{let{boxHeight:i=t,boxWidth:n=t}=e;return e.usePointStyle&&(i=Math.min(i,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(t,i)}};class bs extends Wn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=u(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,i)=>e.sort(t,i,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const i=e.labels,n=xi(i.font),r=n.size,o=this._computeTitleHeight(),{boxWidth:s,itemHeight:a}=vs(i,r);let l,c;t.font=n.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(o,r,s,a)+10):(c=this.maxHeight,l=this._fitCols(o,n,s,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,n){const{ctx:r,maxWidth:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=n+s;let d=e;r.textAlign="left",r.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach(((e,p)=>{const f=i+t/2+r.measureText(e.text).width;(0===p||l[l.length-1]+f+2*s>o)&&(d+=c,l[l.length-(p>0?0:1)]=0,h+=c,u++),a[p]={left:0,top:h,row:u,width:f,height:n},l[l.length-1]+=f+s})),d}_fitCols(e,t,i,n){const{ctx:r,maxHeight:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=o-e;let d=s,u=0,h=0,p=0,f=0;return this.legendItems.forEach(((e,o)=>{const{itemWidth:g,itemHeight:m}=function(e,t,i,n,r){const o=function(e,t,i,n){let r=e.text;r&&"string"!=typeof r&&(r=r.reduce(((e,t)=>e.length>t.length?e:t)));return t+i.size/2+n.measureText(r).width}(n,e,t,i),s=function(e,t,i){let n=e;"string"!=typeof t.text&&(n=ys(t,i));return n}(r,n,t.lineHeight);return{itemWidth:o,itemHeight:s}}(i,t,r,e,n);o>0&&h+m+2*s>c&&(d+=u+s,l.push({width:u,height:h}),p+=u+s,f++,u=h=0),a[o]={left:p,top:h,col:f,width:g,height:m},u=Math.max(u,g),h+=m+s})),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:n},rtl:r}}=this,o=Mi(r,this.left,this.width);if(this.isHorizontal()){let r=0,s=pe(i,this.left+n,this.right-this.lineWidths[r]);for(const a of t)r!==a.row&&(r=a.row,s=pe(i,this.left+n,this.right-this.lineWidths[r])),a.top+=this.top+e+n,a.left=o.leftForLtr(o.x(s),a.width),s+=a.width+n}else{let r=0,s=pe(i,this.top+e+n,this.bottom-this.columnSizes[r].height);for(const a of t)a.col!==r&&(r=a.col,s=pe(i,this.top+e+n,this.bottom-this.columnSizes[r].height)),a.top=s,a.left+=this.left+n,a.left=o.leftForLtr(o.x(a.left),a.width),s+=a.height+n}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Nt(e,this),this._draw(),Lt(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:n}=this,{align:r,labels:o}=e,s=ht.color,a=Mi(e.rtl,this.left,this.width),c=xi(o.font),{padding:d}=o,u=c.size,h=u/2;let p;this.drawTitle(),n.textAlign=a.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=c.string;const{boxWidth:f,boxHeight:g,itemHeight:m}=vs(o,u),v=this.isHorizontal(),b=this._computeTitleHeight();p=v?{x:pe(r,this.left+d,this.right-i[0]),y:this.top+d+b,line:0}:{x:this.left+d,y:pe(r,this.top+b+d,this.bottom-t[0].height),line:0},ki(this.ctx,e.textDirection);const y=m+d;this.legendItems.forEach(((w,C)=>{n.strokeStyle=w.fontColor,n.fillStyle=w.fontColor;const _=n.measureText(w.text).width,S=a.textAlign(w.textAlign||(w.textAlign=o.textAlign)),A=f+h+_;let x=p.x,E=p.y;a.setWidth(this.width),v?C>0&&x+A+d>this.right&&(E=p.y+=y,p.line++,x=p.x=pe(r,this.left+d,this.right-i[p.line])):C>0&&E+y>this.bottom&&(x=p.x=x+t[p.line].width+d,p.line++,E=p.y=pe(r,this.top+b+d,this.bottom-t[p.line].height));if(function(e,t,i){if(isNaN(f)||f<=0||isNaN(g)||g<0)return;n.save();const r=l(i.lineWidth,1);if(n.fillStyle=l(i.fillStyle,s),n.lineCap=l(i.lineCap,"butt"),n.lineDashOffset=l(i.lineDashOffset,0),n.lineJoin=l(i.lineJoin,"miter"),n.lineWidth=r,n.strokeStyle=l(i.strokeStyle,s),n.setLineDash(l(i.lineDash,[])),o.usePointStyle){const s={radius:g*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:r},l=a.xPlus(e,f/2);It(n,s,l,t+h,o.pointStyleWidth&&f)}else{const o=t+Math.max((u-g)/2,0),s=a.leftForLtr(e,f),l=Si(i.borderRadius);n.beginPath(),Object.values(l).some((e=>0!==e))?zt(n,{x:s,y:o,w:f,h:g,radius:l}):n.rect(s,o,f,g),n.fill(),0!==r&&n.stroke()}n.restore()}(a.x(x),E,w),x=fe(S,x+f+h,v?x+A:this.right,e.rtl),function(e,t,i){Ht(n,i.text,e,t+m/2,c,{strikethrough:i.hidden,textAlign:a.textAlign(i.textAlign)})}(a.x(x),E,w),v)p.x+=A+d;else if("string"!=typeof w.text){const e=c.lineHeight;p.y+=ys(w,e)+d}else p.y+=y})),Pi(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=xi(t.font),n=Ai(t.padding);if(!t.display)return;const r=Mi(e.rtl,this.left,this.width),o=this.ctx,s=t.position,a=i.size/2,l=n.top+a;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=pe(e.align,d,this.right-u);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+pe(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=pe(s,d,d+u);o.textAlign=r.textAlign(he(s)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,Ht(o,t.text,h,c,i)}_computeTitleHeight(){const e=this.options.title,t=xi(e.font),i=Ai(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,n,r;if(ee(e,this.left,this.right)&&ee(t,this.top,this.bottom))for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(n=r[i],ee(e,n.left,n.left+n.width)&&ee(t,n.top,n.top+n.height))return this.legendItems[i];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const o=this._hoveredItem,s=(r=i,null!==(n=o)&&null!==r&&n.datasetIndex===r.datasetIndex&&n.index===r.index);o&&!s&&u(t.onLeave,[e,o,this],this),this._hoveredItem=i,i&&!s&&u(t.onHover,[e,i,this],this)}else i&&u(t.onClick,[e,i,this],this);var n,r}}function ys(e,t){return t*(e.text?e.text.length:0)}var ws={id:"legend",_element:bs,start(e,t,i){const n=e.legend=new bs({ctx:e.ctx,options:i,chart:e});an.configure(e,n,i),an.addBox(e,n)},stop(e){an.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){const n=e.legend;an.configure(e,n,i),n.options=i},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){const n=t.datasetIndex,r=i.chart;r.isDatasetVisible(n)?(r.hide(n),t.hidden=!0):(r.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:r,color:o,useBorderRadius:s,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(i?0:void 0),c=Ai(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:s&&(a||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Cs extends Wn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const n=r(i.text)?i.text.length:1;this._padding=Ai(i.padding);const o=n*xi(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:i,bottom:n,right:r,options:o}=this,s=o.align;let a,l,c,d=0;return this.isHorizontal()?(l=pe(s,i,r),c=t+e,a=r-i):("left"===o.position?(l=i+e,c=pe(s,n,t),d=-.5*D):(l=r-e,c=pe(s,t,n),d=.5*D),a=n-t),{titleX:l,titleY:c,maxWidth:a,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=xi(t.font),n=i.lineHeight/2+this._padding.top,{titleX:r,titleY:o,maxWidth:s,rotation:a}=this._drawArgs(n);Ht(e,t.text,0,0,i,{color:t.color,maxWidth:s,rotation:a,textAlign:he(t.align),textBaseline:"middle",translation:[r,o]})}}var _s={id:"title",_element:Cs,start(e,t,i){!function(e,t){const i=new Cs({ctx:e.ctx,options:t,chart:e});an.configure(e,i,t),an.addBox(e,i),e.titleBlock=i}(e,i)},stop(e){const t=e.titleBlock;an.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){const n=e.titleBlock;an.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ss=new WeakMap;var As={id:"subtitle",start(e,t,i){const n=new Cs({ctx:e.ctx,options:i,chart:e});an.configure(e,n,i),an.addBox(e,n),Ss.set(e,n)},stop(e){an.removeBox(e,Ss.get(e)),Ss.delete(e)},beforeUpdate(e,t,i){const n=Ss.get(e);an.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const xs={average(e){if(!e.length)return!1;let t,i,n=new Set,r=0,o=0;for(t=0,i=e.length;t<i;++t){const i=e[t].element;if(i&&i.hasValue()){const e=i.tooltipPosition();n.add(e.x),r+=e.y,++o}}if(0===o||0===n.size)return!1;return{x:[...n].reduce(((e,t)=>e+t))/n.size,y:r/o}},nearest(e,t){if(!e.length)return!1;let i,n,r,o=t.x,s=t.y,a=Number.POSITIVE_INFINITY;for(i=0,n=e.length;i<n;++i){const n=e[i].element;if(n&&n.hasValue()){const e=q(t,n.getCenterPoint());e<a&&(a=e,r=n)}}if(r){const e=r.tooltipPosition();o=e.x,s=e.y}return{x:o,y:s}}};function Es(e,t){return t&&(r(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Ts(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Ds(e,t){const{element:i,datasetIndex:n,index:r}=t,o=e.getDatasetMeta(n).controller,{label:s,value:a}=o.getLabelAndValue(r);return{chart:e,label:s,parsed:o.getParsed(r),raw:e.data.datasets[n].data[r],formattedValue:a,dataset:o.getDataset(),dataIndex:r,datasetIndex:n,element:i}}function Ms(e,t){const i=e.chart.ctx,{body:n,footer:r,title:o}=e,{boxWidth:s,boxHeight:a}=t,l=xi(t.bodyFont),c=xi(t.titleFont),d=xi(t.footerFont),u=o.length,p=r.length,f=n.length,g=Ai(t.padding);let m=g.height,v=0,b=n.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(b+=e.beforeBody.length+e.afterBody.length,u&&(m+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),b){m+=f*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(b-f)*l.lineHeight+(b-1)*t.bodySpacing}p&&(m+=t.footerMarginTop+p*d.lineHeight+(p-1)*t.footerSpacing);let y=0;const w=function(e){v=Math.max(v,i.measureText(e).width+y)};return i.save(),i.font=c.string,h(e.title,w),i.font=l.string,h(e.beforeBody.concat(e.afterBody),w),y=t.displayColors?s+2+t.boxPadding:0,h(n,(e=>{h(e.before,w),h(e.lines,w),h(e.after,w)})),y=0,i.font=d.string,h(e.footer,w),i.restore(),v+=g.width,{width:v,height:m}}function ks(e,t,i,n){const{x:r,width:o}=i,{width:s,chartArea:{left:a,right:l}}=e;let c="center";return"center"===n?c=r<=(a+l)/2?"left":"right":r<=o/2?c="left":r>=s-o/2&&(c="right"),function(e,t,i,n){const{x:r,width:o}=n,s=i.caretSize+i.caretPadding;return"left"===e&&r+o+s>t.width||"right"===e&&r-o-s<0||void 0}(c,e,t,i)&&(c="center"),c}function Ps(e,t,i){const n=i.yAlign||t.yAlign||function(e,t){const{y:i,height:n}=t;return i<n/2?"top":i>e.height-n/2?"bottom":"center"}(e,i);return{xAlign:i.xAlign||t.xAlign||ks(e,t,i,n),yAlign:n}}function Rs(e,t,i,n){const{caretSize:r,caretPadding:o,cornerRadius:s}=e,{xAlign:a,yAlign:l}=i,c=r+o,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:p}=Si(s);let f=function(e,t){let{x:i,width:n}=e;return"right"===t?i-=n:"center"===t&&(i-=n/2),i}(t,a);const g=function(e,t,i){let{y:n,height:r}=e;return"top"===t?n+=i:n-="bottom"===t?r+i:r/2,n}(t,l,c);return"center"===l?"left"===a?f+=c:"right"===a&&(f-=c):"left"===a?f-=Math.max(d,h)+r:"right"===a&&(f+=Math.max(u,p)+r),{x:Q(f,0,n.width-t.width),y:Q(g,0,n.height-t.height)}}function Is(e,t,i){const n=Ai(i.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-n.right:e.x+n.left}function Os(e){return Es([],Ts(e))}function Ns(e,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}const Ls={beforeTitle:t,title(e){if(e.length>0){const t=e[0],i=t.chart.data.labels,n=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return i[t.dataIndex]}return""},afterTitle:t,beforeBody:t,beforeLabel:t,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const i=e.formattedValue;return n(i)||(t+=i),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:t,afterBody:t,beforeFooter:t,footer:t,afterFooter:t};function Fs(e,t,i,n){const r=e[t].call(i,n);return void 0===r?Ls[t].call(i,n):r}class $s extends Wn{static positioners=xs;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&t.options.animation&&i.animations,r=new kn(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,i=this._tooltipItems,Di(e,{tooltip:t,tooltipItems:i,type:"tooltip"})));var e,t,i}getTitle(e,t){const{callbacks:i}=t,n=Fs(i,"beforeTitle",this,e),r=Fs(i,"title",this,e),o=Fs(i,"afterTitle",this,e);let s=[];return s=Es(s,Ts(n)),s=Es(s,Ts(r)),s=Es(s,Ts(o)),s}getBeforeBody(e,t){return Os(Fs(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,n=[];return h(e,(e=>{const t={before:[],lines:[],after:[]},r=Ns(i,e);Es(t.before,Ts(Fs(r,"beforeLabel",this,e))),Es(t.lines,Fs(r,"label",this,e)),Es(t.after,Ts(Fs(r,"afterLabel",this,e))),n.push(t)})),n}getAfterBody(e,t){return Os(Fs(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,n=Fs(i,"beforeFooter",this,e),r=Fs(i,"footer",this,e),o=Fs(i,"afterFooter",this,e);let s=[];return s=Es(s,Ts(n)),s=Es(s,Ts(r)),s=Es(s,Ts(o)),s}_createItems(e){const t=this._active,i=this.chart.data,n=[],r=[],o=[];let s,a,l=[];for(s=0,a=t.length;s<a;++s)l.push(Ds(this.chart,t[s]));return e.filter&&(l=l.filter(((t,n,r)=>e.filter(t,n,r,i)))),e.itemSort&&(l=l.sort(((t,n)=>e.itemSort(t,n,i)))),h(l,(t=>{const i=Ns(e.callbacks,t);n.push(Fs(i,"labelColor",this,t)),r.push(Fs(i,"labelPointStyle",this,t)),o.push(Fs(i,"labelTextColor",this,t))})),this.labelColors=n,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){const i=this.options.setContext(this.getContext()),n=this._active;let r,o=[];if(n.length){const e=xs[i.position].call(this,n,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const t=this._size=Ms(this,i),s=Object.assign({},e,t),a=Ps(this.chart,i,s),l=Rs(i,s,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,n){const r=this.getCaretPosition(e,i,n);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,i){const{xAlign:n,yAlign:r}=this,{caretSize:o,cornerRadius:s}=i,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:d}=Si(s),{x:u,y:h}=e,{width:p,height:f}=t;let g,m,v,b,y,w;return"center"===r?(y=h+f/2,"left"===n?(g=u,m=g-o,b=y+o,w=y-o):(g=u+p,m=g+o,b=y-o,w=y+o),v=g):(m="left"===n?u+Math.max(a,c)+o:"right"===n?u+p-Math.max(l,d)-o:this.caretX,"top"===r?(b=h,y=b-o,g=m-o,v=m+o):(b=h+f,y=b+o,g=m+o,v=m-o),w=b),{x1:g,x2:m,x3:v,y1:b,y2:y,y3:w}}drawTitle(e,t,i){const n=this.title,r=n.length;let o,s,a;if(r){const l=Mi(i.rtl,this.x,this.width);for(e.x=Is(this,i.titleAlign,i),t.textAlign=l.textAlign(i.titleAlign),t.textBaseline="middle",o=xi(i.titleFont),s=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,a=0;a<r;++a)t.fillText(n[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s,a+1===r&&(e.y+=i.titleMarginBottom-s)}}_drawColorBox(e,t,i,n,r){const s=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,d=xi(r.bodyFont),u=Is(this,"left",r),h=n.x(u),p=l<d.lineHeight?(d.lineHeight-l)/2:0,f=t.y+p;if(r.usePointStyle){const t={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},i=n.leftForLtr(h,c)+c/2,o=f+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Rt(e,t,i,o),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,Rt(e,t,i,o)}else{e.lineWidth=o(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=n.leftForLtr(h,c),i=n.leftForLtr(n.xPlus(h,1),c-2),a=Si(s.borderRadius);Object.values(a).some((e=>0!==e))?(e.beginPath(),e.fillStyle=r.multiKeyBackground,zt(e,{x:t,y:f,w:c,h:l,radius:a}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),zt(e,{x:i,y:f+1,w:c-2,h:l-2,radius:a}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,f,c,l),e.strokeRect(t,f,c,l),e.fillStyle=s.backgroundColor,e.fillRect(i,f+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:n}=this,{bodySpacing:r,bodyAlign:o,displayColors:s,boxHeight:a,boxWidth:l,boxPadding:c}=i,d=xi(i.bodyFont);let u=d.lineHeight,p=0;const f=Mi(i.rtl,this.x,this.width),g=function(i){t.fillText(i,f.x(e.x+p),e.y+u/2),e.y+=u+r},m=f.textAlign(o);let v,b,y,w,C,_,S;for(t.textAlign=o,t.textBaseline="middle",t.font=d.string,e.x=Is(this,m,i),t.fillStyle=i.bodyColor,h(this.beforeBody,g),p=s&&"right"!==m?"center"===o?l/2+c:l+2+c:0,w=0,_=n.length;w<_;++w){for(v=n[w],b=this.labelTextColors[w],t.fillStyle=b,h(v.before,g),y=v.lines,s&&y.length&&(this._drawColorBox(t,e,w,f,i),u=Math.max(d.lineHeight,a)),C=0,S=y.length;C<S;++C)g(y[C]),u=d.lineHeight;h(v.after,g)}p=0,u=d.lineHeight,h(this.afterBody,g),e.y-=r}drawFooter(e,t,i){const n=this.footer,r=n.length;let o,s;if(r){const a=Mi(i.rtl,this.x,this.width);for(e.x=Is(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=a.textAlign(i.footerAlign),t.textBaseline="middle",o=xi(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,s=0;s<r;++s)t.fillText(n[s],a.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,n){const{xAlign:r,yAlign:o}=this,{x:s,y:a}=e,{width:l,height:c}=i,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:p}=Si(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(s+d,a),"top"===o&&this.drawCaret(e,t,i,n),t.lineTo(s+l-u,a),t.quadraticCurveTo(s+l,a,s+l,a+u),"center"===o&&"right"===r&&this.drawCaret(e,t,i,n),t.lineTo(s+l,a+c-p),t.quadraticCurveTo(s+l,a+c,s+l-p,a+c),"bottom"===o&&this.drawCaret(e,t,i,n),t.lineTo(s+h,a+c),t.quadraticCurveTo(s,a+c,s,a+c-h),"center"===o&&"left"===r&&this.drawCaret(e,t,i,n),t.lineTo(s,a+d),t.quadraticCurveTo(s,a,s+d,a),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,n=i&&i.x,r=i&&i.y;if(n||r){const i=xs[e.position].call(this,this._active,this._eventPosition);if(!i)return;const o=this._size=Ms(this,e),s=Object.assign({},i,this._size),a=Ps(t,e,s),l=Rs(e,s,a,t);n._to===l.x&&r._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=o.width,this.height=o.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Ai(t.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&s&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,n,t),ki(e,t.textDirection),r.y+=o.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),Pi(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,n=e.map((({datasetIndex:e,index:t})=>{const i=this.chart.getDatasetMeta(e);if(!i)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:i.data[t],index:t}})),r=!p(i,n),o=this._positionChanged(n,t);(r||o)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,r=this._active||[],o=this._getActiveElements(e,r,t,i),s=this._positionChanged(o,e),a=t||!p(o,r)||s;return a&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,i,n){const r=this.options;if("mouseout"===e.type)return[];if(!n)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:n,options:r}=this,o=xs[r.position].call(this,e,t);return!1!==o&&(i!==o.x||n!==o.y)}}var Gs={id:"tooltip",_element:$s,positioners:xs,afterInit(e,t,i){i&&(e.tooltip=new $s({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const i={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){const i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ls},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};return kr.register(jr,Wo,po,e),kr.helpers={...Bi},kr._adapters=Or,kr.Animation=Mn,kr.Animations=kn,kr.animator=be,kr.controllers=ir.controllers.items,kr.DatasetController=zn,kr.Element=Wn,kr.elements=po,kr.Interaction=Yi,kr.layouts=an,kr.platforms=En,kr.Scale=Jn,kr.Ticks=st,Object.assign(kr,jr,Wo,po,e,En),kr.Chart=kr,"undefined"!=typeof window&&(window.Chart=kr),kr}));(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?t(require("chart.js")):typeof define==="function"&&define.amd?define(["chart.js"],t):(e=typeof globalThis!=="undefined"?globalThis:e||self,t(e.Chart))})(this,(function(e){"use strict";function t(e){if(e===null||e===true||e===false){return NaN}var t=Number(e);if(isNaN(t)){return t}return t<0?Math.ceil(t):Math.floor(t)}function i(e,t){if(t.length<e){throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}}function n(e){i(1,arguments);var t=Object.prototype.toString.call(e);if(e instanceof Date||typeof e==="object"&&t==="[object Date]"){return new Date(e.getTime())}else if(typeof e==="number"||t==="[object Number]"){return new Date(e)}else{if((typeof e==="string"||t==="[object String]")&&typeof console!=="undefined"){console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule");console.warn((new Error).stack)}return new Date(NaN)}}function r(e,r){i(2,arguments);var o=n(e);var s=t(r);if(isNaN(s)){return new Date(NaN)}if(!s){return o}o.setDate(o.getDate()+s);return o}function o(e,r){i(2,arguments);var o=n(e);var s=t(r);if(isNaN(s)){return new Date(NaN)}if(!s){return o}var a=o.getDate();var l=new Date(o.getTime());l.setMonth(o.getMonth()+s+1,0);var c=l.getDate();if(a>=c){return l}else{o.setFullYear(l.getFullYear(),l.getMonth(),a);return o}}function s(e,r){i(2,arguments);var o=n(e).getTime();var s=t(r);return new Date(o+s)}var a=36e5;function l(e,n){i(2,arguments);var r=t(n);return s(e,r*a)}function c(e,r){i(1,arguments);var o=r||{};var s=o.locale;var a=s&&s.options&&s.options.weekStartsOn;var l=a==null?0:t(a);var c=o.weekStartsOn==null?l:t(o.weekStartsOn);if(!(c>=0&&c<=6)){throw new RangeError("weekStartsOn must be between 0 and 6 inclusively")}var d=n(e);var u=d.getDay();var h=(u<c?7:0)+u-c;d.setDate(d.getDate()-h);d.setHours(0,0,0,0);return d}function d(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));t.setUTCFullYear(e.getFullYear());return e.getTime()-t.getTime()}function u(e){i(1,arguments);var t=n(e);t.setHours(0,0,0,0);return t}var h=864e5;function p(e,t){i(2,arguments);var n=u(e);var r=u(t);var o=n.getTime()-d(n);var s=r.getTime()-d(r);return Math.round((o-s)/h)}var f=6e4;function g(e,n){i(2,arguments);var r=t(n);return s(e,r*f)}function m(e,n){i(2,arguments);var r=t(n);var s=r*3;return o(e,s)}function v(e,n){i(2,arguments);var r=t(n);return s(e,r*1e3)}function b(e,n){i(2,arguments);var o=t(n);var s=o*7;return r(e,s)}function y(e,n){i(2,arguments);var r=t(n);return o(e,r*12)}function w(e,t){i(2,arguments);var r=n(e);var o=n(t);var s=r.getTime()-o.getTime();if(s<0){return-1}else if(s>0){return 1}else{return s}}function C(e){i(1,arguments);var t=n(e);return!isNaN(t)}function _(e,t){i(2,arguments);var r=n(e);var o=n(t);var s=r.getFullYear()-o.getFullYear();var a=r.getMonth()-o.getMonth();return s*12+a}function S(e,t){i(2,arguments);var r=n(e);var o=n(t);return r.getFullYear()-o.getFullYear()}function A(e,t){var i=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();if(i<0){return-1}else if(i>0){return 1}else{return i}}function x(e,t){i(2,arguments);var r=n(e);var o=n(t);var s=A(r,o);var a=Math.abs(p(r,o));r.setDate(r.getDate()-s*a);var l=A(r,o)===-s;var c=s*(a-l);return c===0?0:c}function E(e,t){i(2,arguments);var r=n(e);var o=n(t);return r.getTime()-o.getTime()}var T=36e5;function D(e,t){i(2,arguments);var n=E(e,t)/T;return n>0?Math.floor(n):Math.ceil(n)}var M=6e4;function k(e,t){i(2,arguments);var n=E(e,t)/M;return n>0?Math.floor(n):Math.ceil(n)}function P(e){i(1,arguments);var t=n(e);t.setHours(23,59,59,999);return t}function R(e){i(1,arguments);var t=n(e);var r=t.getMonth();t.setFullYear(t.getFullYear(),r+1,0);t.setHours(23,59,59,999);return t}function I(e){i(1,arguments);var t=n(e);return P(t).getTime()===R(t).getTime()}function O(e,t){i(2,arguments);var r=n(e);var o=n(t);var s=w(r,o);var a=Math.abs(_(r,o));var l;if(a<1){l=0}else{if(r.getMonth()===1&&r.getDate()>27){r.setDate(30)}r.setMonth(r.getMonth()-s*a);var c=w(r,o)===-s;if(I(n(e))&&a===1&&w(e,o)===1){c=false}l=s*(a-c)}return l===0?0:l}function N(e,t){i(2,arguments);var n=O(e,t)/3;return n>0?Math.floor(n):Math.ceil(n)}function L(e,t){i(2,arguments);var n=E(e,t)/1e3;return n>0?Math.floor(n):Math.ceil(n)}function F(e,t){i(2,arguments);var n=x(e,t)/7;return n>0?Math.floor(n):Math.ceil(n)}function $(e,t){i(2,arguments);var r=n(e);var o=n(t);var s=w(r,o);var a=Math.abs(S(r,o));r.setFullYear("1584");o.setFullYear("1584");var l=w(r,o)===-s;var c=s*(a-l);return c===0?0:c}function G(e){i(1,arguments);var t=n(e);var r=t.getMonth();var o=r-r%3;t.setMonth(o,1);t.setHours(0,0,0,0);return t}function B(e){i(1,arguments);var t=n(e);t.setDate(1);t.setHours(0,0,0,0);return t}function H(e){i(1,arguments);var t=n(e);var r=new Date(0);r.setFullYear(t.getFullYear(),0,1);r.setHours(0,0,0,0);return r}function z(e){i(1,arguments);var t=n(e);var r=t.getFullYear();t.setFullYear(r+1,0,0);t.setHours(23,59,59,999);return t}function W(e){i(1,arguments);var t=n(e);t.setMinutes(59,59,999);return t}function V(e,r){i(1,arguments);var o=r||{};var s=o.locale;var a=s&&s.options&&s.options.weekStartsOn;var l=a==null?0:t(a);var c=o.weekStartsOn==null?l:t(o.weekStartsOn);if(!(c>=0&&c<=6)){throw new RangeError("weekStartsOn must be between 0 and 6 inclusively")}var d=n(e);var u=d.getDay();var h=(u<c?-7:0)+6-(u-c);d.setDate(d.getDate()+h);d.setHours(23,59,59,999);return d}function j(e){i(1,arguments);var t=n(e);t.setSeconds(59,999);return t}function U(e){i(1,arguments);var t=n(e);var r=t.getMonth();var o=r-r%3+3;t.setMonth(o,0);t.setHours(23,59,59,999);return t}function Y(e){i(1,arguments);var t=n(e);t.setMilliseconds(999);return t}var q={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function K(e,t,i){i=i||{};var n;if(typeof q[e]==="string"){n=q[e]}else if(t===1){n=q[e].one}else{n=q[e].other.replace("{{count}}",t)}if(i.addSuffix){if(i.comparison>0){return"in "+n}else{return n+" ago"}}return n}function X(e){return function(t){var i=t||{};var n=i.width?String(i.width):e.defaultWidth;var r=e.formats[n]||e.formats[e.defaultWidth];return r}}var Z={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"};var Q={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"};var J={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"};var ee={date:X({formats:Z,defaultWidth:"full"}),time:X({formats:Q,defaultWidth:"full"}),dateTime:X({formats:J,defaultWidth:"full"})};var te=ee;var ie={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function ne(e,t,i,n){return ie[e]}function re(e){return function(t,i){var n=i||{};var r=n.context?String(n.context):"standalone";var o;if(r==="formatting"&&e.formattingValues){var s=e.defaultFormattingWidth||e.defaultWidth;var a=n.width?String(n.width):s;o=e.formattingValues[a]||e.formattingValues[s]}else{var l=e.defaultWidth;var c=n.width?String(n.width):e.defaultWidth;o=e.values[c]||e.values[l]}var d=e.argumentCallback?e.argumentCallback(t):t;return o[d]}}var oe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]};var se={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]};var ae={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]};var le={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]};var ce={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}};var de={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}};function ue(e,t){var i=Number(e);var n=i%100;if(n>20||n<10){switch(n%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}}return i+"th"}var he={ordinalNumber:ue,era:re({values:oe,defaultWidth:"wide"}),quarter:re({values:se,defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:re({values:ae,defaultWidth:"wide"}),day:re({values:le,defaultWidth:"wide"}),dayPeriod:re({values:ce,defaultWidth:"wide",formattingValues:de,defaultFormattingWidth:"wide"})};var pe=he;function fe(e){return function(t,i){var n=String(t);var r=i||{};var o=n.match(e.matchPattern);if(!o){return null}var s=o[0];var a=n.match(e.parsePattern);if(!a){return null}var l=e.valueCallback?e.valueCallback(a[0]):a[0];l=r.valueCallback?r.valueCallback(l):l;return{value:l,rest:n.slice(s.length)}}}function ge(e){return function(t,i){var n=String(t);var r=i||{};var o=r.width;var s=o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth];var a=n.match(s);if(!a){return null}var l=a[0];var c=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth];var d;if(Object.prototype.toString.call(c)==="[object Array]"){d=ve(c,(function(e){return e.test(l)}))}else{d=me(c,(function(e){return e.test(l)}))}d=e.valueCallback?e.valueCallback(d):d;d=r.valueCallback?r.valueCallback(d):d;return{value:d,rest:n.slice(l.length)}}}function me(e,t){for(var i in e){if(e.hasOwnProperty(i)&&t(e[i])){return i}}}function ve(e,t){for(var i=0;i<e.length;i++){if(t(e[i])){return i}}}var be=/^(\d+)(th|st|nd|rd)?/i;var ye=/\d+/i;var we={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i};var Ce={any:[/^b/i,/^(a|c)/i]};var _e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i};var Se={any:[/1/i,/2/i,/3/i,/4/i]};var Ae={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i};var xe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]};var Ee={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i};var Te={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]};var De={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i};var Me={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}};var ke={ordinalNumber:fe({matchPattern:be,parsePattern:ye,valueCallback:function(e){return parseInt(e,10)}}),era:ge({matchPatterns:we,defaultMatchWidth:"wide",parsePatterns:Ce,defaultParseWidth:"any"}),quarter:ge({matchPatterns:_e,defaultMatchWidth:"wide",parsePatterns:Se,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:ge({matchPatterns:Ae,defaultMatchWidth:"wide",parsePatterns:xe,defaultParseWidth:"any"}),day:ge({matchPatterns:Ee,defaultMatchWidth:"wide",parsePatterns:Te,defaultParseWidth:"any"}),dayPeriod:ge({matchPatterns:De,defaultMatchWidth:"any",parsePatterns:Me,defaultParseWidth:"any"})};var Pe=ke;var Re={code:"en-US",formatDistance:K,formatLong:te,formatRelative:ne,localize:pe,match:Pe,options:{weekStartsOn:0,firstWeekContainsDate:1}};var Ie=Re;function Oe(e,n){i(2,arguments);var r=t(n);return s(e,-r)}function Ne(e,t){var i=e<0?"-":"";var n=Math.abs(e).toString();while(n.length<t){n="0"+n}return i+n}var Le={y:function(e,t){var i=e.getUTCFullYear();var n=i>0?i:1-i;return Ne(t==="yy"?n%100:n,t.length)},M:function(e,t){var i=e.getUTCMonth();return t==="M"?String(i+1):Ne(i+1,2)},d:function(e,t){return Ne(e.getUTCDate(),t.length)},a:function(e,t){var i=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];case"aaaa":default:return i==="am"?"a.m.":"p.m."}},h:function(e,t){return Ne(e.getUTCHours()%12||12,t.length)},H:function(e,t){return Ne(e.getUTCHours(),t.length)},m:function(e,t){return Ne(e.getUTCMinutes(),t.length)},s:function(e,t){return Ne(e.getUTCSeconds(),t.length)},S:function(e,t){var i=t.length;var n=e.getUTCMilliseconds();var r=Math.floor(n*Math.pow(10,i-3));return Ne(r,t.length)}};var Fe=Le;var $e=864e5;function Ge(e){i(1,arguments);var t=n(e);var r=t.getTime();t.setUTCMonth(0,1);t.setUTCHours(0,0,0,0);var o=t.getTime();var s=r-o;return Math.floor(s/$e)+1}function Be(e){i(1,arguments);var t=1;var r=n(e);var o=r.getUTCDay();var s=(o<t?7:0)+o-t;r.setUTCDate(r.getUTCDate()-s);r.setUTCHours(0,0,0,0);return r}function He(e){i(1,arguments);var t=n(e);var r=t.getUTCFullYear();var o=new Date(0);o.setUTCFullYear(r+1,0,4);o.setUTCHours(0,0,0,0);var s=Be(o);var a=new Date(0);a.setUTCFullYear(r,0,4);a.setUTCHours(0,0,0,0);var l=Be(a);if(t.getTime()>=s.getTime()){return r+1}else if(t.getTime()>=l.getTime()){return r}else{return r-1}}function ze(e){i(1,arguments);var t=He(e);var n=new Date(0);n.setUTCFullYear(t,0,4);n.setUTCHours(0,0,0,0);var r=Be(n);return r}var We=6048e5;function Ve(e){i(1,arguments);var t=n(e);var r=Be(t).getTime()-ze(t).getTime();return Math.round(r/We)+1}function je(e,r){i(1,arguments);var o=r||{};var s=o.locale;var a=s&&s.options&&s.options.weekStartsOn;var l=a==null?0:t(a);var c=o.weekStartsOn==null?l:t(o.weekStartsOn);if(!(c>=0&&c<=6)){throw new RangeError("weekStartsOn must be between 0 and 6 inclusively")}var d=n(e);var u=d.getUTCDay();var h=(u<c?7:0)+u-c;d.setUTCDate(d.getUTCDate()-h);d.setUTCHours(0,0,0,0);return d}function Ue(e,r){i(1,arguments);var o=n(e,r);var s=o.getUTCFullYear();var a=r||{};var l=a.locale;var c=l&&l.options&&l.options.firstWeekContainsDate;var d=c==null?1:t(c);var u=a.firstWeekContainsDate==null?d:t(a.firstWeekContainsDate);if(!(u>=1&&u<=7)){throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively")}var h=new Date(0);h.setUTCFullYear(s+1,0,u);h.setUTCHours(0,0,0,0);var p=je(h,r);var f=new Date(0);f.setUTCFullYear(s,0,u);f.setUTCHours(0,0,0,0);var g=je(f,r);if(o.getTime()>=p.getTime()){return s+1}else if(o.getTime()>=g.getTime()){return s}else{return s-1}}function Ye(e,n){i(1,arguments);var r=n||{};var o=r.locale;var s=o&&o.options&&o.options.firstWeekContainsDate;var a=s==null?1:t(s);var l=r.firstWeekContainsDate==null?a:t(r.firstWeekContainsDate);var c=Ue(e,n);var d=new Date(0);d.setUTCFullYear(c,0,l);d.setUTCHours(0,0,0,0);var u=je(d,n);return u}var qe=6048e5;function Ke(e,t){i(1,arguments);var r=n(e);var o=je(r,t).getTime()-Ye(r,t).getTime();return Math.round(o/qe)+1}var Xe={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"};var Ze={G:function(e,t,i){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})}},y:function(e,t,i){if(t==="yo"){var n=e.getUTCFullYear();var r=n>0?n:1-n;return i.ordinalNumber(r,{unit:"year"})}return Fe.y(e,t)},Y:function(e,t,i,n){var r=Ue(e,n);var o=r>0?r:1-r;if(t==="YY"){var s=o%100;return Ne(s,2)}if(t==="Yo"){return i.ordinalNumber(o,{unit:"year"})}return Ne(o,t.length)},R:function(e,t){var i=He(e);return Ne(i,t.length)},u:function(e,t){var i=e.getUTCFullYear();return Ne(i,t.length)},Q:function(e,t,i){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Ne(n,2);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,i){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Ne(n,2);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,i){var n=e.getUTCMonth();switch(t){case"M":case"MM":return Fe.M(e,t);case"Mo":return i.ordinalNumber(n+1,{unit:"month"});case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,i){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return Ne(n+1,2);case"Lo":return i.ordinalNumber(n+1,{unit:"month"});case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,i,n){var r=Ke(e,n);if(t==="wo"){return i.ordinalNumber(r,{unit:"week"})}return Ne(r,t.length)},I:function(e,t,i){var n=Ve(e);if(t==="Io"){return i.ordinalNumber(n,{unit:"week"})}return Ne(n,t.length)},d:function(e,t,i){if(t==="do"){return i.ordinalNumber(e.getUTCDate(),{unit:"date"})}return Fe.d(e,t)},D:function(e,t,i){var n=Ge(e);if(t==="Do"){return i.ordinalNumber(n,{unit:"dayOfYear"})}return Ne(n,t.length)},E:function(e,t,i){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,i,n){var r=e.getUTCDay();var o=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Ne(o,2);case"eo":return i.ordinalNumber(o,{unit:"day"});case"eee":return i.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(r,{width:"short",context:"formatting"});case"eeee":default:return i.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,i,n){var r=e.getUTCDay();var o=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Ne(o,t.length);case"co":return i.ordinalNumber(o,{unit:"day"});case"ccc":return i.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(r,{width:"narrow",context:"standalone"});case"cccccc":return i.day(r,{width:"short",context:"standalone"});case"cccc":default:return i.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,i){var n=e.getUTCDay();var r=n===0?7:n;switch(t){case"i":return String(r);case"ii":return Ne(r,t.length);case"io":return i.ordinalNumber(r,{unit:"day"});case"iii":return i.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(n,{width:"short",context:"formatting"});case"iiii":default:return i.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,i){var n=e.getUTCHours();var r=n/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,i){var n=e.getUTCHours();var r;if(n===12){r=Xe.noon}else if(n===0){r=Xe.midnight}else{r=n/12>=1?"pm":"am"}switch(t){case"b":case"bb":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,i){var n=e.getUTCHours();var r;if(n>=17){r=Xe.evening}else if(n>=12){r=Xe.afternoon}else if(n>=4){r=Xe.morning}else{r=Xe.night}switch(t){case"B":case"BB":case"BBB":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,i){if(t==="ho"){var n=e.getUTCHours()%12;if(n===0)n=12;return i.ordinalNumber(n,{unit:"hour"})}return Fe.h(e,t)},H:function(e,t,i){if(t==="Ho"){return i.ordinalNumber(e.getUTCHours(),{unit:"hour"})}return Fe.H(e,t)},K:function(e,t,i){var n=e.getUTCHours()%12;if(t==="Ko"){return i.ordinalNumber(n,{unit:"hour"})}return Ne(n,t.length)},k:function(e,t,i){var n=e.getUTCHours();if(n===0)n=24;if(t==="ko"){return i.ordinalNumber(n,{unit:"hour"})}return Ne(n,t.length)},m:function(e,t,i){if(t==="mo"){return i.ordinalNumber(e.getUTCMinutes(),{unit:"minute"})}return Fe.m(e,t)},s:function(e,t,i){if(t==="so"){return i.ordinalNumber(e.getUTCSeconds(),{unit:"second"})}return Fe.s(e,t)},S:function(e,t){return Fe.S(e,t)},X:function(e,t,i,n){var r=n._originalDate||e;var o=r.getTimezoneOffset();if(o===0){return"Z"}switch(t){case"X":return Je(o);case"XXXX":case"XX":return et(o);case"XXXXX":case"XXX":default:return et(o,":")}},x:function(e,t,i,n){var r=n._originalDate||e;var o=r.getTimezoneOffset();switch(t){case"x":return Je(o);case"xxxx":case"xx":return et(o);case"xxxxx":case"xxx":default:return et(o,":")}},O:function(e,t,i,n){var r=n._originalDate||e;var o=r.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Qe(o,":");case"OOOO":default:return"GMT"+et(o,":")}},z:function(e,t,i,n){var r=n._originalDate||e;var o=r.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Qe(o,":");case"zzzz":default:return"GMT"+et(o,":")}},t:function(e,t,i,n){var r=n._originalDate||e;var o=Math.floor(r.getTime()/1e3);return Ne(o,t.length)},T:function(e,t,i,n){var r=n._originalDate||e;var o=r.getTime();return Ne(o,t.length)}};function Qe(e,t){var i=e>0?"-":"+";var n=Math.abs(e);var r=Math.floor(n/60);var o=n%60;if(o===0){return i+String(r)}var s=t||"";return i+String(r)+s+Ne(o,2)}function Je(e,t){if(e%60===0){var i=e>0?"-":"+";return i+Ne(Math.abs(e)/60,2)}return et(e,t)}function et(e,t){var i=t||"";var n=e>0?"-":"+";var r=Math.abs(e);var o=Ne(Math.floor(r/60),2);var s=Ne(r%60,2);return n+o+i+s}var tt=Ze;function it(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function nt(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}function rt(e,t){var i=e.match(/(P+)(p+)?/);var n=i[1];var r=i[2];if(!r){return it(e,t)}var o;switch(n){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",it(n,t)).replace("{{time}}",nt(r,t))}var ot={p:nt,P:rt};var st=ot;var at=["D","DD"];var lt=["YY","YYYY"];function ct(e){return at.indexOf(e)!==-1}function dt(e){return lt.indexOf(e)!==-1}function ut(e,t,i){if(e==="YYYY"){throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(i,"`; see: https://git.io/fxCyr"))}else if(e==="YY"){throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(i,"`; see: https://git.io/fxCyr"))}else if(e==="D"){throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(i,"`; see: https://git.io/fxCyr"))}else if(e==="DD"){throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(i,"`; see: https://git.io/fxCyr"))}}var ht=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g;var pt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;var ft=/^'([^]*?)'?$/;var gt=/''/g;var mt=/[a-zA-Z]/;function vt(e,r,o){i(2,arguments);var s=String(r);var a=o||{};var l=a.locale||Ie;var c=l.options&&l.options.firstWeekContainsDate;var u=c==null?1:t(c);var h=a.firstWeekContainsDate==null?u:t(a.firstWeekContainsDate);if(!(h>=1&&h<=7)){throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively")}var p=l.options&&l.options.weekStartsOn;var f=p==null?0:t(p);var g=a.weekStartsOn==null?f:t(a.weekStartsOn);if(!(g>=0&&g<=6)){throw new RangeError("weekStartsOn must be between 0 and 6 inclusively")}if(!l.localize){throw new RangeError("locale must contain localize property")}if(!l.formatLong){throw new RangeError("locale must contain formatLong property")}var m=n(e);if(!C(m)){throw new RangeError("Invalid time value")}var v=d(m);var b=Oe(m,v);var y={firstWeekContainsDate:h,weekStartsOn:g,locale:l,_originalDate:m};var w=s.match(pt).map((function(e){var t=e[0];if(t==="p"||t==="P"){var i=st[t];return i(e,l.formatLong,y)}return e})).join("").match(ht).map((function(t){if(t==="''"){return"'"}var i=t[0];if(i==="'"){return bt(t)}var n=tt[i];if(n){if(!a.useAdditionalWeekYearTokens&&dt(t)){ut(t,r,e)}if(!a.useAdditionalDayOfYearTokens&&ct(t)){ut(t,r,e)}return n(b,t,l.localize,y)}if(i.match(mt)){throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`")}return t})).join("");return w}function bt(e){return e.match(ft)[1].replace(gt,"'")}function yt(e,t){if(e==null){throw new TypeError("assign requires that input parameter not be null or undefined")}t=t||{};for(var i in t){if(t.hasOwnProperty(i)){e[i]=t[i]}}return e}function wt(e,r,o){i(2,arguments);var s=o||{};var a=s.locale;var l=a&&a.options&&a.options.weekStartsOn;var c=l==null?0:t(l);var d=s.weekStartsOn==null?c:t(s.weekStartsOn);if(!(d>=0&&d<=6)){throw new RangeError("weekStartsOn must be between 0 and 6 inclusively")}var u=n(e);var h=t(r);var p=u.getUTCDay();var f=h%7;var g=(f+7)%7;var m=(g<d?7:0)+h-p;u.setUTCDate(u.getUTCDate()+m);return u}function Ct(e,r){i(2,arguments);var o=t(r);if(o%7===0){o=o-7}var s=1;var a=n(e);var l=a.getUTCDay();var c=o%7;var d=(c+7)%7;var u=(d<s?7:0)+o-l;a.setUTCDate(a.getUTCDate()+u);return a}function _t(e,r){i(2,arguments);var o=n(e);var s=t(r);var a=Ve(o)-s;o.setUTCDate(o.getUTCDate()-a*7);return o}function St(e,r,o){i(2,arguments);var s=n(e);var a=t(r);var l=Ke(s,o)-a;s.setUTCDate(s.getUTCDate()-l*7);return s}var At=36e5;var xt=6e4;var Et=1e3;var Tt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/};var Dt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Mt(e,t,i){var n=t.match(e);if(!n){return null}var r=parseInt(n[0],10);return{value:i?i(r):r,rest:t.slice(n[0].length)}}function kt(e,t){var i=t.match(e);if(!i){return null}if(i[0]==="Z"){return{value:0,rest:t.slice(1)}}var n=i[1]==="+"?1:-1;var r=i[2]?parseInt(i[2],10):0;var o=i[3]?parseInt(i[3],10):0;var s=i[5]?parseInt(i[5],10):0;return{value:n*(r*At+o*xt+s*Et),rest:t.slice(i[0].length)}}function Pt(e,t){return Mt(Tt.anyDigitsSigned,e,t)}function Rt(e,t,i){switch(e){case 1:return Mt(Tt.singleDigit,t,i);case 2:return Mt(Tt.twoDigits,t,i);case 3:return Mt(Tt.threeDigits,t,i);case 4:return Mt(Tt.fourDigits,t,i);default:return Mt(new RegExp("^\\d{1,"+e+"}"),t,i)}}function It(e,t,i){switch(e){case 1:return Mt(Tt.singleDigitSigned,t,i);case 2:return Mt(Tt.twoDigitsSigned,t,i);case 3:return Mt(Tt.threeDigitsSigned,t,i);case 4:return Mt(Tt.fourDigitsSigned,t,i);default:return Mt(new RegExp("^-?\\d{1,"+e+"}"),t,i)}}function Ot(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Nt(e,t){var i=t>0;var n=i?t:1-t;var r;if(n<=50){r=e||100}else{var o=n+50;var s=Math.floor(o/100)*100;var a=e>=o%100;r=e+s-(a?100:0)}return i?r:1-r}var Lt=[31,28,31,30,31,30,31,31,30,31,30,31];var Ft=[31,29,31,30,31,30,31,31,30,31,30,31];function $t(e){return e%400===0||e%4===0&&e%100!==0}var Gt={G:{priority:140,parse:function(e,t,i,n){switch(t){case"G":case"GG":case"GGG":return i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"});case"GGGGG":return i.era(e,{width:"narrow"});case"GGGG":default:return i.era(e,{width:"wide"})||i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"})}},set:function(e,t,i,n){t.era=i;e.setUTCFullYear(i,0,1);e.setUTCHours(0,0,0,0);return e},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(e,t,i,n){var r=function(e){return{year:e,isTwoDigitYear:t==="yy"}};switch(t){case"y":return Rt(4,e,r);case"yo":return i.ordinalNumber(e,{unit:"year",valueCallback:r});default:return Rt(t.length,e,r)}},validate:function(e,t,i){return t.isTwoDigitYear||t.year>0},set:function(e,t,i,n){var r=e.getUTCFullYear();if(i.isTwoDigitYear){var o=Nt(i.year,r);e.setUTCFullYear(o,0,1);e.setUTCHours(0,0,0,0);return e}var s=!("era"in t)||t.era===1?i.year:1-i.year;e.setUTCFullYear(s,0,1);e.setUTCHours(0,0,0,0);return e},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(e,t,i,n){var r=function(e){return{year:e,isTwoDigitYear:t==="YY"}};switch(t){case"Y":return Rt(4,e,r);case"Yo":return i.ordinalNumber(e,{unit:"year",valueCallback:r});default:return Rt(t.length,e,r)}},validate:function(e,t,i){return t.isTwoDigitYear||t.year>0},set:function(e,t,i,n){var r=Ue(e,n);if(i.isTwoDigitYear){var o=Nt(i.year,r);e.setUTCFullYear(o,0,n.firstWeekContainsDate);e.setUTCHours(0,0,0,0);return je(e,n)}var s=!("era"in t)||t.era===1?i.year:1-i.year;e.setUTCFullYear(s,0,n.firstWeekContainsDate);e.setUTCHours(0,0,0,0);return je(e,n)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(e,t,i,n){if(t==="R"){return It(4,e)}return It(t.length,e)},set:function(e,t,i,n){var r=new Date(0);r.setUTCFullYear(i,0,4);r.setUTCHours(0,0,0,0);return Be(r)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(e,t,i,n){if(t==="u"){return It(4,e)}return It(t.length,e)},set:function(e,t,i,n){e.setUTCFullYear(i,0,1);e.setUTCHours(0,0,0,0);return e},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(e,t,i,n){switch(t){case"Q":case"QQ":return Rt(t.length,e);case"Qo":return i.ordinalNumber(e,{unit:"quarter"});case"QQQ":return i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(e,{width:"wide",context:"formatting"})||i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,i){return t>=1&&t<=4},set:function(e,t,i,n){e.setUTCMonth((i-1)*3,1);e.setUTCHours(0,0,0,0);return e},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(e,t,i,n){switch(t){case"q":case"qq":return Rt(t.length,e);case"qo":return i.ordinalNumber(e,{unit:"quarter"});case"qqq":return i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(e,{width:"wide",context:"standalone"})||i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,i){return t>=1&&t<=4},set:function(e,t,i,n){e.setUTCMonth((i-1)*3,1);e.setUTCHours(0,0,0,0);return e},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(e,t,i,n){var r=function(e){return e-1};switch(t){case"M":return Mt(Tt.month,e,r);case"MM":return Rt(2,e,r);case"Mo":return i.ordinalNumber(e,{unit:"month",valueCallback:r});case"MMM":return i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(e,{width:"wide",context:"formatting"})||i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,i){return t>=0&&t<=11},set:function(e,t,i,n){e.setUTCMonth(i,1);e.setUTCHours(0,0,0,0);return e},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(e,t,i,n){var r=function(e){return e-1};switch(t){case"L":return Mt(Tt.month,e,r);case"LL":return Rt(2,e,r);case"Lo":return i.ordinalNumber(e,{unit:"month",valueCallback:r});case"LLL":return i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(e,{width:"wide",context:"standalone"})||i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,i){return t>=0&&t<=11},set:function(e,t,i,n){e.setUTCMonth(i,1);e.setUTCHours(0,0,0,0);return e},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(e,t,i,n){switch(t){case"w":return Mt(Tt.week,e);case"wo":return i.ordinalNumber(e,{unit:"week"});default:return Rt(t.length,e)}},validate:function(e,t,i){return t>=1&&t<=53},set:function(e,t,i,n){return je(St(e,i,n),n)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(e,t,i,n){switch(t){case"I":return Mt(Tt.week,e);case"Io":return i.ordinalNumber(e,{unit:"week"});default:return Rt(t.length,e)}},validate:function(e,t,i){return t>=1&&t<=53},set:function(e,t,i,n){return Be(_t(e,i,n),n)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(e,t,i,n){switch(t){case"d":return Mt(Tt.date,e);case"do":return i.ordinalNumber(e,{unit:"date"});default:return Rt(t.length,e)}},validate:function(e,t,i){var n=e.getUTCFullYear();var r=$t(n);var o=e.getUTCMonth();if(r){return t>=1&&t<=Ft[o]}else{return t>=1&&t<=Lt[o]}},set:function(e,t,i,n){e.setUTCDate(i);e.setUTCHours(0,0,0,0);return e},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(e,t,i,n){switch(t){case"D":case"DD":return Mt(Tt.dayOfYear,e);case"Do":return i.ordinalNumber(e,{unit:"date"});default:return Rt(t.length,e)}},validate:function(e,t,i){var n=e.getUTCFullYear();var r=$t(n);if(r){return t>=1&&t<=366}else{return t>=1&&t<=365}},set:function(e,t,i,n){e.setUTCMonth(0,i);e.setUTCHours(0,0,0,0);return e},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(e,t,i,n){switch(t){case"E":case"EE":case"EEE":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,i){return t>=0&&t<=6},set:function(e,t,i,n){e=wt(e,i,n);e.setUTCHours(0,0,0,0);return e},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(e,t,i,n){var r=function(e){var t=Math.floor((e-1)/7)*7;return(e+n.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return Rt(t.length,e,r);case"eo":return i.ordinalNumber(e,{unit:"day",valueCallback:r});case"eee":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeeee":return i.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,i){return t>=0&&t<=6},set:function(e,t,i,n){e=wt(e,i,n);e.setUTCHours(0,0,0,0);return e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(e,t,i,n){var r=function(e){var t=Math.floor((e-1)/7)*7;return(e+n.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return Rt(t.length,e,r);case"co":return i.ordinalNumber(e,{unit:"day",valueCallback:r});case"ccc":return i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"ccccc":return i.day(e,{width:"narrow",context:"standalone"});case"cccccc":return i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(e,{width:"wide",context:"standalone"})||i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,i){return t>=0&&t<=6},set:function(e,t,i,n){e=wt(e,i,n);e.setUTCHours(0,0,0,0);return e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(e,t,i,n){var r=function(e){if(e===0){return 7}return e};switch(t){case"i":case"ii":return Rt(t.length,e);case"io":return i.ordinalNumber(e,{unit:"day"});case"iii":return i.day(e,{width:"abbreviated",context:"formatting",valueCallback:r})||i.day(e,{width:"short",context:"formatting",valueCallback:r})||i.day(e,{width:"narrow",context:"formatting",valueCallback:r});case"iiiii":return i.day(e,{width:"narrow",context:"formatting",valueCallback:r});case"iiiiii":return i.day(e,{width:"short",context:"formatting",valueCallback:r})||i.day(e,{width:"narrow",context:"formatting",valueCallback:r});case"iiii":default:return i.day(e,{width:"wide",context:"formatting",valueCallback:r})||i.day(e,{width:"abbreviated",context:"formatting",valueCallback:r})||i.day(e,{width:"short",context:"formatting",valueCallback:r})||i.day(e,{width:"narrow",context:"formatting",valueCallback:r})}},validate:function(e,t,i){return t>=1&&t<=7},set:function(e,t,i,n){e=Ct(e,i,n);e.setUTCHours(0,0,0,0);return e},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(e,t,i,n){switch(t){case"a":case"aa":case"aaa":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,i,n){e.setUTCHours(Ot(i),0,0,0);return e},incompatibleTokens:["b","B","H","K","k","t","T"]},b:{priority:80,parse:function(e,t,i,n){switch(t){case"b":case"bb":case"bbb":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,i,n){e.setUTCHours(Ot(i),0,0,0);return e},incompatibleTokens:["a","B","H","K","k","t","T"]},B:{priority:80,parse:function(e,t,i,n){switch(t){case"B":case"BB":case"BBB":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,i,n){e.setUTCHours(Ot(i),0,0,0);return e},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(e,t,i,n){switch(t){case"h":return Mt(Tt.hour12h,e);case"ho":return i.ordinalNumber(e,{unit:"hour"});default:return Rt(t.length,e)}},validate:function(e,t,i){return t>=1&&t<=12},set:function(e,t,i,n){var r=e.getUTCHours()>=12;if(r&&i<12){e.setUTCHours(i+12,0,0,0)}else if(!r&&i===12){e.setUTCHours(0,0,0,0)}else{e.setUTCHours(i,0,0,0)}return e},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(e,t,i,n){switch(t){case"H":return Mt(Tt.hour23h,e);case"Ho":return i.ordinalNumber(e,{unit:"hour"});default:return Rt(t.length,e)}},validate:function(e,t,i){return t>=0&&t<=23},set:function(e,t,i,n){e.setUTCHours(i,0,0,0);return e},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(e,t,i,n){switch(t){case"K":return Mt(Tt.hour11h,e);case"Ko":return i.ordinalNumber(e,{unit:"hour"});default:return Rt(t.length,e)}},validate:function(e,t,i){return t>=0&&t<=11},set:function(e,t,i,n){var r=e.getUTCHours()>=12;if(r&&i<12){e.setUTCHours(i+12,0,0,0)}else{e.setUTCHours(i,0,0,0)}return e},incompatibleTokens:["a","b","h","H","k","t","T"]},k:{priority:70,parse:function(e,t,i,n){switch(t){case"k":return Mt(Tt.hour24h,e);case"ko":return i.ordinalNumber(e,{unit:"hour"});default:return Rt(t.length,e)}},validate:function(e,t,i){return t>=1&&t<=24},set:function(e,t,i,n){var r=i<=24?i%24:i;e.setUTCHours(r,0,0,0);return e},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(e,t,i,n){switch(t){case"m":return Mt(Tt.minute,e);case"mo":return i.ordinalNumber(e,{unit:"minute"});default:return Rt(t.length,e)}},validate:function(e,t,i){return t>=0&&t<=59},set:function(e,t,i,n){e.setUTCMinutes(i,0,0);return e},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(e,t,i,n){switch(t){case"s":return Mt(Tt.second,e);case"so":return i.ordinalNumber(e,{unit:"second"});default:return Rt(t.length,e)}},validate:function(e,t,i){return t>=0&&t<=59},set:function(e,t,i,n){e.setUTCSeconds(i,0);return e},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(e,t,i,n){var r=function(e){return Math.floor(e*Math.pow(10,-t.length+3))};return Rt(t.length,e,r)},set:function(e,t,i,n){e.setUTCMilliseconds(i);return e},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(e,t,i,n){switch(t){case"X":return kt(Dt.basicOptionalMinutes,e);case"XX":return kt(Dt.basic,e);case"XXXX":return kt(Dt.basicOptionalSeconds,e);case"XXXXX":return kt(Dt.extendedOptionalSeconds,e);case"XXX":default:return kt(Dt.extended,e)}},set:function(e,t,i,n){if(t.timestampIsSet){return e}return new Date(e.getTime()-i)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(e,t,i,n){switch(t){case"x":return kt(Dt.basicOptionalMinutes,e);case"xx":return kt(Dt.basic,e);case"xxxx":return kt(Dt.basicOptionalSeconds,e);case"xxxxx":return kt(Dt.extendedOptionalSeconds,e);case"xxx":default:return kt(Dt.extended,e)}},set:function(e,t,i,n){if(t.timestampIsSet){return e}return new Date(e.getTime()-i)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(e,t,i,n){return Pt(e)},set:function(e,t,i,n){return[new Date(i*1e3),{timestampIsSet:true}]},incompatibleTokens:"*"},T:{priority:20,parse:function(e,t,i,n){return Pt(e)},set:function(e,t,i,n){return[new Date(i),{timestampIsSet:true}]},incompatibleTokens:"*"}};var Bt=Gt;var Ht=10;var zt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g;var Wt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;var Vt=/^'([^]*?)'?$/;var jt=/''/g;var Ut=/\S/;var Yt=/[a-zA-Z]/;function qt(e,r,o,s){i(3,arguments);var a=String(e);var l=String(r);var c=s||{};var u=c.locale||Ie;if(!u.match){throw new RangeError("locale must contain match property")}var h=u.options&&u.options.firstWeekContainsDate;var p=h==null?1:t(h);var f=c.firstWeekContainsDate==null?p:t(c.firstWeekContainsDate);if(!(f>=1&&f<=7)){throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively")}var g=u.options&&u.options.weekStartsOn;var m=g==null?0:t(g);var v=c.weekStartsOn==null?m:t(c.weekStartsOn);if(!(v>=0&&v<=6)){throw new RangeError("weekStartsOn must be between 0 and 6 inclusively")}if(l===""){if(a===""){return n(o)}else{return new Date(NaN)}}var b={firstWeekContainsDate:f,weekStartsOn:v,locale:u};var y=[{priority:Ht,subPriority:-1,set:Kt,index:0}];var w;var C=l.match(Wt).map((function(e){var t=e[0];if(t==="p"||t==="P"){var i=st[t];return i(e,u.formatLong,b)}return e})).join("").match(zt);var _=[];for(w=0;w<C.length;w++){var S=C[w];if(!c.useAdditionalWeekYearTokens&&dt(S)){ut(S,l,e)}if(!c.useAdditionalDayOfYearTokens&&ct(S)){ut(S,l,e)}var A=S[0];var x=Bt[A];if(x){var E=x.incompatibleTokens;if(Array.isArray(E)){var T=void 0;for(var D=0;D<_.length;D++){var M=_[D].token;if(E.indexOf(M)!==-1||M===A){T=_[D];break}}if(T){throw new RangeError("The format string mustn't contain `".concat(T.fullToken,"` and `").concat(S,"` at the same time"))}}else if(x.incompatibleTokens==="*"&&_.length){throw new RangeError("The format string mustn't contain `".concat(S,"` and any other token at the same time"))}_.push({token:A,fullToken:S});var k=x.parse(a,S,u.match,b);if(!k){return new Date(NaN)}y.push({priority:x.priority,subPriority:x.subPriority||0,set:x.set,validate:x.validate,value:k.value,index:y.length});a=k.rest}else{if(A.match(Yt)){throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`")}if(S==="''"){S="'"}else if(A==="'"){S=Xt(S)}if(a.indexOf(S)===0){a=a.slice(S.length)}else{return new Date(NaN)}}}if(a.length>0&&Ut.test(a)){return new Date(NaN)}var P=y.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,i){return i.indexOf(e)===t})).map((function(e){return y.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]}));var R=n(o);if(isNaN(R)){return new Date(NaN)}var I=Oe(R,d(R));var O={};for(w=0;w<P.length;w++){var N=P[w];if(N.validate&&!N.validate(I,N.value,b)){return new Date(NaN)}var L=N.set(I,O,N.value,b);if(L[0]){I=L[0];yt(O,L[1])}else{I=L}}return I}function Kt(e,t){if(t.timestampIsSet){return e}var i=new Date(0);i.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());i.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return i}function Xt(e){return e.match(Vt)[1].replace(jt,"'")}function Zt(e){i(1,arguments);var t=n(e);t.setMinutes(0,0,0);return t}function Qt(e){i(1,arguments);var t=n(e);t.setSeconds(0,0);return t}function Jt(e){i(1,arguments);var t=n(e);t.setMilliseconds(0);return t}var ei=36e5;var ti=6e4;var ii=2;var ni={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/};var ri=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/;var oi=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/;var si=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ai(e,n){i(1,arguments);var r=n||{};var o=r.additionalDigits==null?ii:t(r.additionalDigits);if(o!==2&&o!==1&&o!==0){throw new RangeError("additionalDigits must be 0, 1 or 2")}if(!(typeof e==="string"||Object.prototype.toString.call(e)==="[object String]")){return new Date(NaN)}var s=li(e);var a;if(s.date){var l=ci(s.date,o);a=di(l.restDateString,l.year)}if(isNaN(a)||!a){return new Date(NaN)}var c=a.getTime();var d=0;var u;if(s.time){d=hi(s.time);if(isNaN(d)||d===null){return new Date(NaN)}}if(s.timezone){u=fi(s.timezone);if(isNaN(u)){return new Date(NaN)}}else{var h=new Date(c+d);var p=new Date(0);p.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate());p.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds());return p}return new Date(c+d+u)}function li(e){var t={};var i=e.split(ni.dateTimeDelimiter);var n;if(i.length>2){return t}if(/:/.test(i[0])){t.date=null;n=i[0]}else{t.date=i[0];n=i[1];if(ni.timeZoneDelimiter.test(t.date)){t.date=e.split(ni.timeZoneDelimiter)[0];n=e.substr(t.date.length,e.length)}}if(n){var r=ni.timezone.exec(n);if(r){t.time=n.replace(r[1],"");t.timezone=r[1]}else{t.time=n}}return t}function ci(e,t){var i=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)");var n=e.match(i);if(!n)return{year:null};var r=n[1]&&parseInt(n[1]);var o=n[2]&&parseInt(n[2]);return{year:o==null?r:o*100,restDateString:e.slice((n[1]||n[2]).length)}}function di(e,t){if(t===null)return null;var i=e.match(ri);if(!i)return null;var n=!!i[4];var r=ui(i[1]);var o=ui(i[2])-1;var s=ui(i[3]);var a=ui(i[4]);var l=ui(i[5])-1;if(n){if(!wi(t,a,l)){return new Date(NaN)}return gi(t,a,l)}else{var c=new Date(0);if(!bi(t,o,s)||!yi(t,r)){return new Date(NaN)}c.setUTCFullYear(t,o,Math.max(r,s));return c}}function ui(e){return e?parseInt(e):1}function hi(e){var t=e.match(oi);if(!t)return null;var i=pi(t[1]);var n=pi(t[2]);var r=pi(t[3]);if(!Ci(i,n,r)){return NaN}return i*ei+n*ti+r*1e3}function pi(e){return e&&parseFloat(e.replace(",","."))||0}function fi(e){if(e==="Z")return 0;var t=e.match(si);if(!t)return 0;var i=t[1]==="+"?-1:1;var n=parseInt(t[2]);var r=t[3]&&parseInt(t[3])||0;if(!_i(n,r)){return NaN}return i*(n*ei+r*ti)}function gi(e,t,i){var n=new Date(0);n.setUTCFullYear(e,0,4);var r=n.getUTCDay()||7;var o=(t-1)*7+i+1-r;n.setUTCDate(n.getUTCDate()+o);return n}var mi=[31,null,31,30,31,30,31,31,30,31,30,31];function vi(e){return e%400===0||e%4===0&&e%100}function bi(e,t,i){return t>=0&&t<=11&&i>=1&&i<=(mi[t]||(vi(e)?29:28))}function yi(e,t){return t>=1&&t<=(vi(e)?366:365)}function wi(e,t,i){return t>=1&&t<=53&&i>=0&&i<=6}function Ci(e,t,i){if(e===24){return t===0&&i===0}return i>=0&&i<60&&t>=0&&t<60&&e>=0&&e<25}function _i(e,t){return t>=0&&t<=59}const Si={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};e._adapters._date.override({_id:"date-fns",formats:function(){return Si},parse:function(e,t){if(e===null||typeof e==="undefined"){return null}const i=typeof e;if(i==="number"||e instanceof Date){e=n(e)}else if(i==="string"){if(typeof t==="string"){e=qt(e,t,new Date,this.options)}else{e=ai(e,this.options)}}return C(e)?e.getTime():null},format:function(e,t){return vt(e,t,this.options)},add:function(e,t,i){switch(i){case"millisecond":return s(e,t);case"second":return v(e,t);case"minute":return g(e,t);case"hour":return l(e,t);case"day":return r(e,t);case"week":return b(e,t);case"month":return o(e,t);case"quarter":return m(e,t);case"year":return y(e,t);default:return e}},diff:function(e,t,i){switch(i){case"millisecond":return E(e,t);case"second":return L(e,t);case"minute":return k(e,t);case"hour":return D(e,t);case"day":return x(e,t);case"week":return F(e,t);case"month":return O(e,t);case"quarter":return N(e,t);case"year":return $(e,t);default:return 0}},startOf:function(e,t,i){switch(t){case"second":return Jt(e);case"minute":return Qt(e);case"hour":return Zt(e);case"day":return u(e);case"week":return c(e);case"isoWeek":return c(e,{weekStartsOn:+i});case"month":return B(e);case"quarter":return G(e);case"year":return H(e);default:return e}},endOf:function(e,t){switch(t){case"second":return Y(e);case"minute":return j(e);case"hour":return W(e);case"day":return P(e);case"week":return V(e);case"month":return R(e);case"quarter":return U(e);case"year":return z(e);default:return e}}})}));(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t(require("chart.js"),require("hammerjs"),require("chart.js/helpers")):typeof define==="function"&&define.amd?define(["chart.js","hammerjs","chart.js/helpers"],t):(e=typeof globalThis!=="undefined"?globalThis:e||self,e.ChartZoom=t(e.Chart,e.Hammer,e.Chart.helpers))})(this,(function(e,t,i){"use strict";const n=e=>e&&e.enabled&&e.modifierKey;const r=(e,t)=>e&&t[e+"Key"];const o=(e,t)=>e&&!t[e+"Key"];function s(e,t,i){if(e===undefined){return true}else if(typeof e==="string"){return e.indexOf(t)!==-1}else if(typeof e==="function"){return e({chart:i}).indexOf(t)!==-1}return false}function a(e,t){if(typeof e==="function"){e=e({chart:t})}if(typeof e==="string"){return{x:e.indexOf("x")!==-1,y:e.indexOf("y")!==-1}}return{x:false,y:false}}function l(e,t){let i;return function(){clearTimeout(i);i=setTimeout(e,t);return t}}function c({x:e,y:t},i){const n=i.scales;const r=Object.keys(n);for(let i=0;i<r.length;i++){const o=n[r[i]];if(t>=o.top&&t<=o.bottom&&e>=o.left&&e<=o.right){return o}}return null}function d(e,t,n){const{mode:r="xy",scaleMode:o,overScaleMode:s}=e||{};const l=c(t,n);const d=a(r,n);const u=a(o,n);if(s){const e=a(s,n);for(const t of["x","y"]){if(e[t]){u[t]=d[t];d[t]=false}}}if(l&&u[l.axis]){return[l]}const h=[];i.each(n.scales,(function(e){if(d[e.axis]){h.push(e)}}));return h}const u=new WeakMap;function h(e){let t=u.get(e);if(!t){t={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{},dragging:false,panning:false};u.set(e,t)}return t}function p(e){u.delete(e)}function f(e,t,i,n){const r=Math.max(0,Math.min(1,(e-t)/i||0));const o=1-r;return{min:n*r,max:n*o}}function g(e,t){const i=e.isHorizontal()?t.x:t.y;return e.getValueForPixel(i)}function m(e,t,i){const n=e.max-e.min;const r=n*(t-1);const o=g(e,i);return f(o,e.min,n,r)}function v(e,t,i){const n=g(e,i);if(n===undefined){return{min:e.min,max:e.max}}const r=Math.log10(e.min);const o=Math.log10(e.max);const s=Math.log10(n);const a=o-r;const l=a*(t-1);const c=f(s,r,a,l);return{min:Math.pow(10,r+c.min),max:Math.pow(10,o-c.max)}}function b(e,t){return t&&(t[e.id]||t[e.axis])||{}}function y(e,t,n,r,o){let s=n[r];if(s==="original"){const n=e.originalScaleLimits[t.id][r];s=i.valueOrDefault(n.options,n.scale)}return i.valueOrDefault(s,o)}function w(e,t,i){const n=e.getValueForPixel(t);const r=e.getValueForPixel(i);return{min:Math.min(n,r),max:Math.max(n,r)}}function C(e,{min:t,max:n,minLimit:r,maxLimit:o},s){const a=(e-n+t)/2;t-=a;n+=a;const l=s.min.options??s.min.scale;const c=s.max.options??s.max.scale;const d=e/1e6;if(i.almostEquals(t,l,d)){t=l}if(i.almostEquals(n,c,d)){n=c}if(t<r){t=r;n=Math.min(r+e,o)}else if(n>o){n=o;t=Math.max(o-e,r)}return{min:t,max:n}}function _(e,{min:t,max:i},n,r=false){const o=h(e.chart);const{options:s}=e;const a=b(e,n);const{minRange:l=0}=a;const c=y(o,e,a,"min",-Infinity);const d=y(o,e,a,"max",Infinity);if(r==="pan"&&(t<c||i>d)){return true}const u=e.max-e.min;const p=r?Math.max(i-t,l):u;if(r&&p===l&&u<=l){return true}const f=C(p,{min:t,max:i,minLimit:c,maxLimit:d},o.originalScaleLimits[e.id]);s.min=f.min;s.max=f.max;o.updatedScaleLimits[e.id]=f;return e.parse(f.min)!==e.min||e.parse(f.max)!==e.max}function S(e,t,i,n){const r=m(e,t,i);const o={min:e.min+r.min,max:e.max-r.max};return _(e,o,n,true)}function A(e,t,i,n){const r=v(e,t,i);return _(e,r,n,true)}function x(e,t,i,n){_(e,w(e,t,i),n,true)}const E=e=>e===0||isNaN(e)?0:e<0?Math.min(Math.round(e),-1):Math.max(Math.round(e),1);function T(e){const t=e.getLabels();const i=t.length-1;if(e.min>0){e.min-=1}if(e.max<i){e.max+=1}}function D(e,t,i,n){const r=m(e,t,i);if(e.min===e.max&&t<1){T(e)}const o={min:e.min+E(r.min),max:e.max-E(r.max)};return _(e,o,n,true)}function M(e){return e.isHorizontal()?e.width:e.height}function k(e,t,i){const n=e.getLabels();const r=n.length-1;let{min:o,max:s}=e;const a=Math.max(s-o,1);const l=Math.round(M(e)/Math.max(a,10));const c=Math.round(Math.abs(t/l));let d;if(t<-l){s=Math.min(s+c,r);o=a===1?s:s-a;d=s===r}else if(t>l){o=Math.max(0,o-c);s=a===1?o:o+a;d=o===0}return _(e,{min:o,max:s},i)||d}const P={second:500,minute:30*1e3,hour:30*60*1e3,day:12*60*60*1e3,week:3.5*24*60*60*1e3,month:15*24*60*60*1e3,quarter:60*24*60*60*1e3,year:182*24*60*60*1e3};function R(e,t,i,n=false){const{min:r,max:o,options:s}=e;const a=s.time&&s.time.round;const l=P[a]||0;const c=e.getValueForPixel(e.getPixelForValue(r+l)-t);const d=e.getValueForPixel(e.getPixelForValue(o+l)-t);if(isNaN(c)||isNaN(d)){return true}return _(e,{min:c,max:d},i,n?"pan":false)}function I(e,t,i){return R(e,t,i,true)}const O={category:D,default:S,logarithmic:A};const N={default:x};const L={category:k,default:R,logarithmic:I,timeseries:I};function F(e,t,i){const{id:n,options:{min:r,max:o}}=e;if(!t[n]||!i[n]){return true}const s=i[n];return s.min!==r||s.max!==o}function $(e,t){i.each(e,((i,n)=>{if(!t[n]){delete e[n]}}))}function G(e,t){const{scales:n}=e;const{originalScaleLimits:r,updatedScaleLimits:o}=t;i.each(n,(function(e){if(F(e,r,o)){r[e.id]={min:{scale:e.min,options:e.options.min},max:{scale:e.max,options:e.options.max}}}}));$(r,n);$(o,n);return r}function B(e,t,n,r){const o=O[e.type]||O.default;i.callback(o,[e,t,n,r])}function H(e,t,n,r){const o=N[e.type]||N.default;i.callback(o,[e,t,n,r])}function z(e){const t=e.chartArea;return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function W(e,t,n="none",r="api"){const{x:o=1,y:s=1,focalPoint:a=z(e)}=typeof t==="number"?{x:t,y:t}:t;const l=h(e);const{options:{limits:c,zoom:u}}=l;G(e,l);const p=o!==1;const f=s!==1;const g=d(u,a,e);i.each(g||e.scales,(function(e){if(e.isHorizontal()&&p){B(e,o,a,c)}else if(!e.isHorizontal()&&f){B(e,s,a,c)}}));e.update(n);i.callback(u.onZoom,[{chart:e,trigger:r}])}function V(e,t,n,r="none",o="api"){const a=h(e);const{options:{limits:l,zoom:c}}=a;const{mode:d="xy"}=c;G(e,a);const u=s(d,"x",e);const p=s(d,"y",e);i.each(e.scales,(function(e){if(e.isHorizontal()&&u){H(e,t.x,n.x,l)}else if(!e.isHorizontal()&&p){H(e,t.y,n.y,l)}}));e.update(r);i.callback(c.onZoom,[{chart:e,trigger:o}])}function j(e,t,n,r="none",o="api"){const s=h(e);G(e,s);const a=e.scales[t];_(a,n,undefined,true);e.update(r);i.callback(s.options.zoom?.onZoom,[{chart:e,trigger:o}])}function U(e,t="default"){const n=h(e);const r=G(e,n);i.each(e.scales,(function(e){const t=e.options;if(r[e.id]){t.min=r[e.id].min.options;t.max=r[e.id].max.options}else{delete t.min;delete t.max}delete n.updatedScaleLimits[e.id]}));e.update(t);i.callback(n.options.zoom.onZoomComplete,[{chart:e}])}function Y(e,t){const n=e.originalScaleLimits[t];if(!n){return}const{min:r,max:o}=n;return i.valueOrDefault(o.options,o.scale)-i.valueOrDefault(r.options,r.scale)}function q(e){const t=h(e);let n=1;let r=1;i.each(e.scales,(function(e){const i=Y(t,e.id);if(i){const t=Math.round(i/(e.max-e.min)*100)/100;n=Math.min(n,t);r=Math.max(r,t)}}));return n<1?n:r}function K(e,t,n,r){const{panDelta:o}=r;const s=o[e.id]||0;if(i.sign(s)===i.sign(t)){t+=s}const a=L[e.type]||L.default;if(i.callback(a,[e,t,n])){o[e.id]=0}else{o[e.id]=t}}function X(e,t,n,r="none"){const{x:o=0,y:s=0}=typeof t==="number"?{x:t,y:t}:t;const a=h(e);const{options:{pan:l,limits:c}}=a;const{onPan:d}=l||{};G(e,a);const u=o!==0;const p=s!==0;i.each(n||e.scales,(function(e){if(e.isHorizontal()&&u){K(e,o,c,a)}else if(!e.isHorizontal()&&p){K(e,s,c,a)}}));e.update(r);i.callback(d,[{chart:e}])}function Z(e){const t=h(e);G(e,t);const i={};for(const n of Object.keys(e.scales)){const{min:e,max:r}=t.originalScaleLimits[n]||{min:{},max:{}};i[n]={min:e.scale,max:r.scale}}return i}function Q(e){const t=h(e);const i={};for(const n of Object.keys(e.scales)){i[n]=t.updatedScaleLimits[n]}return i}function J(e){const t=Z(e);for(const i of Object.keys(e.scales)){const{min:n,max:r}=t[i];if(n!==undefined&&e.scales[i].min!==n){return true}if(r!==undefined&&e.scales[i].max!==r){return true}}return false}function ee(e){const t=h(e);return t.panning||t.dragging}const te=(e,t,i)=>Math.min(i,Math.max(t,e));function ie(e,t){const{handlers:i}=h(e);const n=i[t];if(n&&n.target){n.target.removeEventListener(t,n);delete i[t]}}function ne(e,t,i,n){const{handlers:r,options:o}=h(e);const s=r[i];if(s&&s.target===t){return}ie(e,i);r[i]=t=>n(e,t,o);r[i].target=t;const a=i==="wheel"?false:undefined;t.addEventListener(i,r[i],{passive:a})}function re(e,t){const i=h(e);if(i.dragStart){i.dragging=true;i.dragEnd=t;e.update("none")}}function oe(e,t){const i=h(e);if(!i.dragStart||t.key!=="Escape"){return}ie(e,"keydown");i.dragging=false;i.dragStart=i.dragEnd=null;e.update("none")}function se(e,t){if(e.target!==t.canvas){const i=t.canvas.getBoundingClientRect();return{x:e.clientX-i.left,y:e.clientY-i.top}}return i.getRelativePosition(e,t)}function ae(e,t,n){const{onZoomStart:r,onZoomRejected:o}=n;if(r){const n=se(t,e);if(i.callback(r,[{chart:e,event:t,point:n}])===false){i.callback(o,[{chart:e,event:t}]);return false}}}function le(e,t){if(e.legend){const n=i.getRelativePosition(t,e);if(i._isPointInArea(n,e.legend)){return}}const s=h(e);const{pan:a,zoom:l={}}=s.options;if(t.button!==0||r(n(a),t)||o(n(l.drag),t)){return i.callback(l.onZoomRejected,[{chart:e,event:t}])}if(ae(e,t,l)===false){return}s.dragStart=t;ne(e,e.canvas.ownerDocument,"mousemove",re);ne(e,window.document,"keydown",oe)}function ce({begin:e,end:t},i){let n=t.x-e.x;let r=t.y-e.y;const o=Math.abs(n/r);if(o>i){n=Math.sign(n)*Math.abs(r*i)}else if(o<i){r=Math.sign(r)*Math.abs(n/i)}t.x=e.x+n;t.y=e.y+r}function de(e,t,i,{min:n,max:r,prop:o}){e[n]=te(Math.min(i.begin[o],i.end[o]),t[n],t[r]);e[r]=te(Math.max(i.begin[o],i.end[o]),t[n],t[r])}function ue(e,t,i){const n={begin:se(t.dragStart,e),end:se(t.dragEnd,e)};if(i){const t=e.chartArea.width/e.chartArea.height;ce(n,t)}return n}function he(e,t,i,n){const r=s(t,"x",e);const o=s(t,"y",e);const{top:a,left:l,right:c,bottom:d,width:u,height:h}=e.chartArea;const p={top:a,left:l,right:c,bottom:d};const f=ue(e,i,n&&r&&o);if(r){de(p,e.chartArea,f,{min:"left",max:"right",prop:"x"})}if(o){de(p,e.chartArea,f,{min:"top",max:"bottom",prop:"y"})}const g=p.right-p.left;const m=p.bottom-p.top;return{...p,width:g,height:m,zoomX:r&&g?1+(u-g)/u:1,zoomY:o&&m?1+(h-m)/h:1}}function pe(e,t){const n=h(e);if(!n.dragStart){return}ie(e,"mousemove");const{mode:r,onZoomComplete:o,drag:{threshold:a=0,maintainAspectRatio:l}}=n.options.zoom;const c=he(e,r,{dragStart:n.dragStart,dragEnd:t},l);const d=s(r,"x",e)?c.width:0;const u=s(r,"y",e)?c.height:0;const p=Math.sqrt(d*d+u*u);n.dragStart=n.dragEnd=null;if(p<=a){n.dragging=false;e.update("none");return}V(e,{x:c.left,y:c.top},{x:c.right,y:c.bottom},"zoom","drag");n.dragging=false;n.filterNextClick=true;i.callback(o,[{chart:e}])}function fe(e,t,r){if(o(n(r.wheel),t)){i.callback(r.onZoomRejected,[{chart:e,event:t}]);return}if(ae(e,t,r)===false){return}if(t.cancelable){t.preventDefault()}if(t.deltaY===undefined){return}return true}function ge(e,t){const{handlers:{onZoomComplete:n},options:{zoom:r}}=h(e);if(!fe(e,t,r)){return}const o=t.target.getBoundingClientRect();const s=r.wheel.speed;const a=t.deltaY>=0?2-1/(1-s):1+s;const l={x:a,y:a,focalPoint:{x:t.clientX-o.left,y:t.clientY-o.top}};W(e,l,"zoom","wheel");i.callback(n,[{chart:e}])}function me(e,t,n,r){if(n){h(e).handlers[t]=l((()=>i.callback(n,[{chart:e}])),r)}}function ve(e,t){const i=e.canvas;const{wheel:n,drag:r,onZoomComplete:o}=t.zoom;if(n.enabled){ne(e,i,"wheel",ge);me(e,"onZoomComplete",o,250)}else{ie(e,"wheel")}if(r.enabled){ne(e,i,"mousedown",le);ne(e,i.ownerDocument,"mouseup",pe)}else{ie(e,"mousedown");ie(e,"mousemove");ie(e,"mouseup");ie(e,"keydown")}}function be(e){ie(e,"mousedown");ie(e,"mousemove");ie(e,"mouseup");ie(e,"wheel");ie(e,"click");ie(e,"keydown")}function ye(e,t){return function(s,a){const{pan:l,zoom:c={}}=t.options;if(!l||!l.enabled){return false}const d=a&&a.srcEvent;if(!d){return true}if(!t.panning&&a.pointerType==="mouse"&&(o(n(l),d)||r(n(c.drag),d))){i.callback(l.onPanRejected,[{chart:e,event:a}]);return false}return true}}function we(e,t){const i=Math.abs(e.clientX-t.clientX);const n=Math.abs(e.clientY-t.clientY);const r=i/n;let o,s;if(r>.3&&r<1.7){o=s=true}else if(i>n){o=true}else{s=true}return{x:o,y:s}}function Ce(e,t,i){if(t.scale){const{center:n,pointers:r}=i;const o=1/t.scale*i.scale;const a=i.target.getBoundingClientRect();const l=we(r[0],r[1]);const c=t.options.zoom.mode;const d={x:l.x&&s(c,"x",e)?o:1,y:l.y&&s(c,"y",e)?o:1,focalPoint:{x:n.x-a.left,y:n.y-a.top}};W(e,d,"zoom","pinch");t.scale=i.scale}}function _e(e,t,n){if(t.options.zoom.pinch.enabled){const r=i.getRelativePosition(n,e);if(i.callback(t.options.zoom.onZoomStart,[{chart:e,event:n,point:r}])===false){t.scale=null;i.callback(t.options.zoom.onZoomRejected,[{chart:e,event:n}])}else{t.scale=1}}}function Se(e,t,n){if(t.scale){Ce(e,t,n);t.scale=null;i.callback(t.options.zoom.onZoomComplete,[{chart:e}])}}function Ae(e,t,i){const n=t.delta;if(n){t.panning=true;X(e,{x:i.deltaX-n.x,y:i.deltaY-n.y},t.panScales);t.delta={x:i.deltaX,y:i.deltaY}}}function xe(e,t,n){const{enabled:r,onPanStart:o,onPanRejected:s}=t.options.pan;if(!r){return}const a=n.target.getBoundingClientRect();const l={x:n.center.x-a.left,y:n.center.y-a.top};if(i.callback(o,[{chart:e,event:n,point:l}])===false){return i.callback(s,[{chart:e,event:n}])}t.panScales=d(t.options.pan,l,e);t.delta={x:0,y:0};Ae(e,t,n)}function Ee(e,t){t.delta=null;if(t.panning){t.panning=false;t.filterNextClick=true;i.callback(t.options.pan.onPanComplete,[{chart:e}])}}const Te=new WeakMap;function De(e,i){const n=h(e);const r=e.canvas;const{pan:o,zoom:s}=i;const a=new t.Manager(r);if(s&&s.pinch.enabled){a.add(new t.Pinch);a.on("pinchstart",(t=>_e(e,n,t)));a.on("pinch",(t=>Ce(e,n,t)));a.on("pinchend",(t=>Se(e,n,t)))}if(o&&o.enabled){a.add(new t.Pan({threshold:o.threshold,enable:ye(e,n)}));a.on("panstart",(t=>xe(e,n,t)));a.on("panmove",(t=>Ae(e,n,t)));a.on("panend",(()=>Ee(e,n)))}Te.set(e,a)}function Me(e){const t=Te.get(e);if(t){t.remove("pinchstart");t.remove("pinch");t.remove("pinchend");t.remove("panstart");t.remove("pan");t.remove("panend");t.destroy();Te.delete(e)}}function ke(e,t){const{pan:i,zoom:n}=e;const{pan:r,zoom:o}=t;if(n?.zoom?.pinch?.enabled!==o?.zoom?.pinch?.enabled){return true}if(i?.enabled!==r?.enabled){return true}if(i?.threshold!==r?.threshold){return true}return false}var Pe="2.2.0";function Re(e,t,i){const n=i.zoom.drag;const{dragStart:r,dragEnd:o}=h(e);if(n.drawTime!==t||!o){return}const{left:s,top:a,width:l,height:c}=he(e,i.zoom.mode,{dragStart:r,dragEnd:o},n.maintainAspectRatio);const d=e.ctx;d.save();d.beginPath();d.fillStyle=n.backgroundColor||"rgba(225,225,225,0.3)";d.fillRect(s,a,l,c);if(n.borderWidth>0){d.lineWidth=n.borderWidth;d.strokeStyle=n.borderColor||"rgba(225,225,225)";d.strokeRect(s,a,l,c)}d.restore()}var Ie={id:"zoom",version:Pe,defaults:{pan:{enabled:false,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:false,speed:.1,modifierKey:null},drag:{enabled:false,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:false},mode:"xy"}},start:function(e,i,n){const r=h(e);r.options=n;if(Object.prototype.hasOwnProperty.call(n.zoom,"enabled")){console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`.")}if(Object.prototype.hasOwnProperty.call(n.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(n.pan,"overScaleMode")){console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired).")}if(t){De(e,n)}e.pan=(t,i,n)=>X(e,t,i,n);e.zoom=(t,i)=>W(e,t,i);e.zoomRect=(t,i,n)=>V(e,t,i,n);e.zoomScale=(t,i,n)=>j(e,t,i,n);e.resetZoom=t=>U(e,t);e.getZoomLevel=()=>q(e);e.getInitialScaleBounds=()=>Z(e);e.getZoomedScaleBounds=()=>Q(e);e.isZoomedOrPanned=()=>J(e);e.isZoomingOrPanning=()=>ee(e)},beforeEvent(e,{event:t}){if(ee(e)){return false}if(t.type==="click"||t.type==="mouseup"){const t=h(e);if(t.filterNextClick){t.filterNextClick=false;return false}}},beforeUpdate:function(e,t,i){const n=h(e);const r=n.options;n.options=i;if(ke(r,i)){Me(e);De(e,i)}ve(e,i)},beforeDatasetsDraw(e,t,i){Re(e,"beforeDatasetsDraw",i)},afterDatasetsDraw(e,t,i){Re(e,"afterDatasetsDraw",i)},beforeDraw(e,t,i){Re(e,"beforeDraw",i)},afterDraw(e,t,i){Re(e,"afterDraw",i)},stop:function(e){be(e);if(t){Me(e)}p(e)},panFunctions:L,zoomFunctions:O,zoomRectFunctions:N};e.Chart.register(Ie);return Ie}));(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t(require("chart.js/helpers"),require("chart.js")):typeof define==="function"&&define.amd?define(["chart.js/helpers","chart.js"],t):(e=typeof globalThis!=="undefined"?globalThis:e||self,e.ChartDataLabels=t(e.Chart.helpers,e.Chart))})(this,(function(e,t){"use strict";var i=function(){if(typeof window!=="undefined"){if(window.devicePixelRatio){return window.devicePixelRatio}var e=window.screen;if(e){return(e.deviceXDPI||1)/(e.logicalXDPI||1)}}return 1}();var n={toTextLines:function(t){var i=[];var n;t=[].concat(t);while(t.length){n=t.pop();if(typeof n==="string"){i.unshift.apply(i,n.split("\n"))}else if(Array.isArray(n)){t.push.apply(t,n)}else if(!e.isNullOrUndef(t)){i.unshift(""+n)}}return i},textSize:function(e,t,i){var n=[].concat(t);var r=n.length;var o=e.font;var s=0;var a;e.font=i.string;for(a=0;a<r;++a){s=Math.max(e.measureText(n[a]).width,s)}e.font=o;return{height:r*i.lineHeight,width:s}},bound:function(e,t,i){return Math.max(e,Math.min(t,i))},arrayDiff:function(e,t){var i=e.slice();var n=[];var r,o,s,a;for(r=0,s=t.length;r<s;++r){a=t[r];o=i.indexOf(a);if(o===-1){n.push([a,1])}else{i.splice(o,1)}}for(r=0,s=i.length;r<s;++r){n.push([i[r],-1])}return n},rasterize:function(e){return Math.round(e*i)/i}};function r(e,t){var i=t.x;var n=t.y;if(i===null){return{x:0,y:-1}}if(n===null){return{x:1,y:0}}var r=e.x-i;var o=e.y-n;var s=Math.sqrt(r*r+o*o);return{x:s?r/s:0,y:s?o/s:-1}}function o(e,t,i,n,r){switch(r){case"center":i=n=0;break;case"bottom":i=0;n=1;break;case"right":i=1;n=0;break;case"left":i=-1;n=0;break;case"top":i=0;n=-1;break;case"start":i=-i;n=-n;break;case"end":break;default:r*=Math.PI/180;i=Math.cos(r);n=Math.sin(r);break}return{x:e,y:t,vx:i,vy:n}}var s=0;var a=1;var l=2;var c=4;var d=8;function u(e,t,i){var n=s;if(e<i.left){n|=a}else if(e>i.right){n|=l}if(t<i.top){n|=d}else if(t>i.bottom){n|=c}return n}function h(e,t){var i=e.x0;var n=e.y0;var r=e.x1;var o=e.y1;var s=u(i,n,t);var h=u(r,o,t);var p,f,g;while(true){if(!(s|h)||s&h){break}p=s||h;if(p&d){f=i+(r-i)*(t.top-n)/(o-n);g=t.top}else if(p&c){f=i+(r-i)*(t.bottom-n)/(o-n);g=t.bottom}else if(p&l){g=n+(o-n)*(t.right-i)/(r-i);f=t.right}else if(p&a){g=n+(o-n)*(t.left-i)/(r-i);f=t.left}if(p===s){i=f;n=g;s=u(i,n,t)}else{r=f;o=g;h=u(r,o,t)}}return{x0:i,x1:r,y0:n,y1:o}}function p(e,t){var i=t.anchor;var n=e;var r,s;if(t.clamp){n=h(n,t.area)}if(i==="start"){r=n.x0;s=n.y0}else if(i==="end"){r=n.x1;s=n.y1}else{r=(n.x0+n.x1)/2;s=(n.y0+n.y1)/2}return o(r,s,e.vx,e.vy,t.align)}var f={arc:function(e,t){var i=(e.startAngle+e.endAngle)/2;var n=Math.cos(i);var r=Math.sin(i);var o=e.innerRadius;var s=e.outerRadius;return p({x0:e.x+n*o,y0:e.y+r*o,x1:e.x+n*s,y1:e.y+r*s,vx:n,vy:r},t)},point:function(e,t){var i=r(e,t.origin);var n=i.x*e.options.radius;var o=i.y*e.options.radius;return p({x0:e.x-n,y0:e.y-o,x1:e.x+n,y1:e.y+o,vx:i.x,vy:i.y},t)},bar:function(e,t){var i=r(e,t.origin);var n=e.x;var o=e.y;var s=0;var a=0;if(e.horizontal){n=Math.min(e.x,e.base);s=Math.abs(e.base-e.x)}else{o=Math.min(e.y,e.base);a=Math.abs(e.base-e.y)}return p({x0:n,y0:o+a,x1:n+s,y1:o,vx:i.x,vy:i.y},t)},fallback:function(e,t){var i=r(e,t.origin);return p({x0:e.x,y0:e.y,x1:e.x+(e.width||0),y1:e.y+(e.height||0),vx:i.x,vy:i.y},t)}};var g=n.rasterize;function m(e){var t=e.borderWidth||0;var i=e.padding;var n=e.size.height;var r=e.size.width;var o=-r/2;var s=-n/2;return{frame:{x:o-i.left-t,y:s-i.top-t,w:r+i.width+t*2,h:n+i.height+t*2},text:{x:o,y:s,w:r,h:n}}}function v(e,t){var i=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!i){return null}if(i.xCenter!==undefined&&i.yCenter!==undefined){return{x:i.xCenter,y:i.yCenter}}var n=i.getBasePixel();return e.horizontal?{x:n,y:null}:{x:null,y:n}}function b(e){if(e instanceof t.ArcElement){return f.arc}if(e instanceof t.PointElement){return f.point}if(e instanceof t.BarElement){return f.bar}return f.fallback}function y(e,t,i,n,r,o){var s=Math.PI/2;if(o){var a=Math.min(o,r/2,n/2);var l=t+a;var c=i+a;var d=t+n-a;var u=i+r-a;e.moveTo(t,c);if(l<d&&c<u){e.arc(l,c,a,-Math.PI,-s);e.arc(d,c,a,-s,0);e.arc(d,u,a,0,s);e.arc(l,u,a,s,Math.PI)}else if(l<d){e.moveTo(l,i);e.arc(d,c,a,-s,s);e.arc(l,c,a,s,Math.PI+s)}else if(c<u){e.arc(l,c,a,-Math.PI,0);e.arc(l,u,a,0,Math.PI)}else{e.arc(l,c,a,-Math.PI,Math.PI)}e.closePath();e.moveTo(t,i)}else{e.rect(t,i,n,r)}}function w(e,t,i){var n=i.backgroundColor;var r=i.borderColor;var o=i.borderWidth;if(!n&&(!r||!o)){return}e.beginPath();y(e,g(t.x)+o/2,g(t.y)+o/2,g(t.w)-o,g(t.h)-o,i.borderRadius);e.closePath();if(n){e.fillStyle=n;e.fill()}if(r&&o){e.strokeStyle=r;e.lineWidth=o;e.lineJoin="miter";e.stroke()}}function C(e,t,i){var n=i.lineHeight;var r=e.w;var o=e.x;var s=e.y+n/2;if(t==="center"){o+=r/2}else if(t==="end"||t==="right"){o+=r}return{h:n,w:r,x:o,y:s}}function _(e,t,i){var n=e.shadowBlur;var r=i.stroked;var o=g(i.x);var s=g(i.y);var a=g(i.w);if(r){e.strokeText(t,o,s,a)}if(i.filled){if(n&&r){e.shadowBlur=0}e.fillText(t,o,s,a);if(n&&r){e.shadowBlur=n}}}function S(e,t,i,n){var r=n.textAlign;var o=n.color;var s=!!o;var a=n.font;var l=t.length;var c=n.textStrokeColor;var d=n.textStrokeWidth;var u=c&&d;var h;if(!l||!s&&!u){return}i=C(i,r,a);e.font=a.string;e.textAlign=r;e.textBaseline="middle";e.shadowBlur=n.textShadowBlur;e.shadowColor=n.textShadowColor;if(s){e.fillStyle=o}if(u){e.lineJoin="round";e.lineWidth=d;e.strokeStyle=c}for(h=0,l=t.length;h<l;++h){_(e,t[h],{stroked:u,filled:s,w:i.w,x:i.x,y:i.y+i.h*h})}}var A=function(e,t,i,n){var r=this;r._config=e;r._index=n;r._model=null;r._rects=null;r._ctx=t;r._el=i};e.merge(A.prototype,{_modelize:function(i,r,o,s){var a=this;var l=a._index;var c=e.toFont(e.resolve([o.font,{}],s,l));var d=e.resolve([o.color,t.defaults.color],s,l);return{align:e.resolve([o.align,"center"],s,l),anchor:e.resolve([o.anchor,"center"],s,l),area:s.chart.chartArea,backgroundColor:e.resolve([o.backgroundColor,null],s,l),borderColor:e.resolve([o.borderColor,null],s,l),borderRadius:e.resolve([o.borderRadius,0],s,l),borderWidth:e.resolve([o.borderWidth,0],s,l),clamp:e.resolve([o.clamp,false],s,l),clip:e.resolve([o.clip,false],s,l),color:d,display:i,font:c,lines:r,offset:e.resolve([o.offset,4],s,l),opacity:e.resolve([o.opacity,1],s,l),origin:v(a._el,s),padding:e.toPadding(e.resolve([o.padding,4],s,l)),positioner:b(a._el),rotation:e.resolve([o.rotation,0],s,l)*(Math.PI/180),size:n.textSize(a._ctx,r,c),textAlign:e.resolve([o.textAlign,"start"],s,l),textShadowBlur:e.resolve([o.textShadowBlur,0],s,l),textShadowColor:e.resolve([o.textShadowColor,d],s,l),textStrokeColor:e.resolve([o.textStrokeColor,d],s,l),textStrokeWidth:e.resolve([o.textStrokeWidth,0],s,l)}},update:function(t){var i=this;var r=null;var o=null;var s=i._index;var a=i._config;var l,c,d;var u=e.resolve([a.display,true],t,s);if(u){l=t.dataset.data[s];c=e.valueOrDefault(e.callback(a.formatter,[l,t]),l);d=e.isNullOrUndef(c)?[]:n.toTextLines(c);if(d.length){r=i._modelize(u,d,a,t);o=m(r)}}i._model=r;i._rects=o},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,t){var i=this;var r=e.ctx;var o=i._model;var s=i._rects;var a;if(!this.visible()){return}r.save();if(o.clip){a=o.area;r.beginPath();r.rect(a.left,a.top,a.right-a.left,a.bottom-a.top);r.clip()}r.globalAlpha=n.bound(0,o.opacity,1);r.translate(g(t.x),g(t.y));r.rotate(o.rotation);w(r,s.frame,o);S(r,o.lines,s.text,o);r.restore()}});var x=Number.MIN_SAFE_INTEGER||-9007199254740991;var E=Number.MAX_SAFE_INTEGER||9007199254740991;function T(e,t,i){var n=Math.cos(i);var r=Math.sin(i);var o=t.x;var s=t.y;return{x:o+n*(e.x-o)-r*(e.y-s),y:s+r*(e.x-o)+n*(e.y-s)}}function D(e,t){var i=E;var n=x;var r=t.origin;var o,s,a,l,c;for(o=0;o<e.length;++o){s=e[o];a=s.x-r.x;l=s.y-r.y;c=t.vx*a+t.vy*l;i=Math.min(i,c);n=Math.max(n,c)}return{min:i,max:n}}function M(e,t){var i=t.x-e.x;var n=t.y-e.y;var r=Math.sqrt(i*i+n*n);return{vx:(t.x-e.x)/r,vy:(t.y-e.y)/r,origin:e,ln:r}}var k=function(){this._rotation=0;this._rect={x:0,y:0,w:0,h:0}};e.merge(k.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,t,i){this._rotation=i;this._rect={x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}},contains:function(e){var t=this;var i=1;var n=t._rect;e=T(e,t.center(),-t._rotation);return!(e.x<n.x-i||e.y<n.y-i||e.x>n.x+n.w+i*2||e.y>n.y+n.h+i*2)},intersects:function(e){var t=this._points();var i=e._points();var n=[M(t[0],t[1]),M(t[0],t[3])];var r,o,s;if(this._rotation!==e._rotation){n.push(M(i[0],i[1]),M(i[0],i[3]))}for(r=0;r<n.length;++r){o=D(t,n[r]);s=D(i,n[r]);if(o.max<s.min||s.max<o.min){return false}}return true},_points:function(){var e=this;var t=e._rect;var i=e._rotation;var n=e.center();return[T({x:t.x,y:t.y},n,i),T({x:t.x+t.w,y:t.y},n,i),T({x:t.x+t.w,y:t.y+t.h},n,i),T({x:t.x,y:t.y+t.h},n,i)]}});function P(e,t,i){var n=t.positioner(e,t);var r=n.vx;var o=n.vy;if(!r&&!o){return{x:n.x,y:n.y}}var s=i.w;var a=i.h;var l=t.rotation;var c=Math.abs(s/2*Math.cos(l))+Math.abs(a/2*Math.sin(l));var d=Math.abs(s/2*Math.sin(l))+Math.abs(a/2*Math.cos(l));var u=1/Math.max(Math.abs(r),Math.abs(o));c*=r*u;d*=o*u;c+=t.offset*r;d+=t.offset*o;return{x:n.x+c,y:n.y+d}}function R(e,t){var i,n,r,o;for(i=e.length-1;i>=0;--i){r=e[i].$layout;for(n=i-1;n>=0&&r._visible;--n){o=e[n].$layout;if(o._visible&&r._box.intersects(o._box)){t(r,o)}}}return e}function I(e){var t,i,n,r,o,s,a;for(t=0,i=e.length;t<i;++t){n=e[t];r=n.$layout;if(r._visible){a=new Proxy(n._el,{get:(e,t)=>e.getProps([t],true)[t]});o=n.geometry();s=P(a,n.model(),o);r._box.update(s,o,n.rotation())}}return R(e,(function(e,t){var i=e._hidable;var n=t._hidable;if(i&&n||n){t._visible=false}else if(i){e._visible=false}}))}var O={prepare:function(e){var t=[];var i,n,r,o,s;for(i=0,r=e.length;i<r;++i){for(n=0,o=e[i].length;n<o;++n){s=e[i][n];t.push(s);s.$layout={_box:new k,_hidable:false,_visible:true,_set:i,_idx:s._index}}}t.sort((function(e,t){var i=e.$layout;var n=t.$layout;return i._idx===n._idx?n._set-i._set:n._idx-i._idx}));this.update(t);return t},update:function(e){var t=false;var i,n,r,o,s;for(i=0,n=e.length;i<n;++i){r=e[i];o=r.model();s=r.$layout;s._hidable=o&&o.display==="auto";s._visible=r.visible();t|=s._hidable}if(t){I(e)}},lookup:function(e,t){var i,n;for(i=e.length-1;i>=0;--i){n=e[i].$layout;if(n&&n._visible&&n._box.contains(t)){return e[i]}}return null},draw:function(e,t){var i,n,r,o,s,a;for(i=0,n=t.length;i<n;++i){r=t[i];o=r.$layout;if(o._visible){s=r.geometry();a=P(r._el,r.model(),s);o._box.update(a,s,r.rotation());r.draw(e,a)}}}};var N=function(t){if(e.isNullOrUndef(t)){return null}var i=t;var n,r,o;if(e.isObject(t)){if(!e.isNullOrUndef(t.label)){i=t.label}else if(!e.isNullOrUndef(t.r)){i=t.r}else{i="";n=Object.keys(t);for(o=0,r=n.length;o<r;++o){i+=(o!==0?", ":"")+n[o]+": "+t[n[o]]}}}return""+i};var L={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:false,clip:false,color:undefined,display:true,font:{family:undefined,lineHeight:1.2,size:undefined,style:undefined,weight:null},formatter:N,labels:undefined,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:undefined,textStrokeWidth:0,textShadowBlur:0,textShadowColor:undefined};var F="$datalabels";var $="$default";function G(t,i){var n=t.datalabels;var r={};var o=[];var s,a;if(n===false){return null}if(n===true){n={}}i=e.merge({},[i,n]);s=i.labels||{};a=Object.keys(s);delete i.labels;if(a.length){a.forEach((function(t){if(s[t]){o.push(e.merge({},[i,s[t],{_key:t}]))}}))}else{o.push(i)}r=o.reduce((function(t,i){e.each(i.listeners||{},(function(e,n){t[n]=t[n]||{};t[n][i._key||$]=e}));delete i.listeners;return t}),{});return{labels:o,listeners:r}}function B(t,i,n,r){if(!i){return}var o=n.$context;var s=n.$groups;var a;if(!i[s._set]){return}a=i[s._set][s._key];if(!a){return}if(e.callback(a,[o,r])===true){t[F]._dirty=true;n.update(o)}}function H(e,t,i,n,r){var o,s;if(!i&&!n){return}if(!i){o=true}else if(!n){s=true}else if(i!==n){s=o=true}if(s){B(e,t.leave,i,r)}if(o){B(e,t.enter,n,r)}}function z(e,t){var i=e[F];var n=i._listeners;var r,o;if(!n.enter&&!n.leave){return}if(t.type==="mousemove"){o=O.lookup(i._labels,t)}else if(t.type!=="mouseout"){return}r=i._hovered;i._hovered=o;H(e,n,r,o,t)}function W(e,t){var i=e[F];var n=i._listeners.click;var r=n&&O.lookup(i._labels,t);if(r){B(e,n,r,t)}}var V={id:"datalabels",defaults:L,beforeInit:function(e){e[F]={_actives:[]}},beforeUpdate:function(e){var t=e[F];t._listened=false;t._listeners={};t._datasets=[];t._labels=[]},afterDatasetUpdate:function(t,i,n){var r=i.index;var o=t[F];var s=o._datasets[r]=[];var a=t.isDatasetVisible(r);var l=t.data.datasets[r];var c=G(l,n);var d=i.meta.data||[];var u=t.ctx;var h,p,f,g,m,v,b,y;u.save();for(h=0,f=d.length;h<f;++h){b=d[h];b[F]=[];if(a&&b&&t.getDataVisibility(h)&&!b.skip){for(p=0,g=c.labels.length;p<g;++p){m=c.labels[p];v=m._key;y=new A(m,u,b,h);y.$groups={_set:r,_key:v||$};y.$context={active:false,chart:t,dataIndex:h,dataset:l,datasetIndex:r};y.update(y.$context);b[F].push(y);s.push(y)}}}u.restore();e.merge(o._listeners,c.listeners,{merger:function(e,t,n){t[e]=t[e]||{};t[e][i.index]=n[e];o._listened=true}})},afterUpdate:function(e){e[F]._labels=O.prepare(e[F]._datasets)},afterDatasetsDraw:function(e){O.draw(e,e[F]._labels)},beforeEvent:function(e,t){if(e[F]._listened){var i=t.event;switch(i.type){case"mousemove":case"mouseout":z(e,i);break;case"click":W(e,i);break}}},afterEvent:function(e){var t=e[F];var i=t._actives;var r=t._actives=e.getActiveElements();var o=n.arrayDiff(i,r);var s,a,l,c,d,u,h;for(s=0,a=o.length;s<a;++s){d=o[s];if(d[1]){h=d[0].element[F]||[];for(l=0,c=h.length;l<c;++l){u=h[l];u.$context.active=d[1]===1;u.update(u.$context)}}}if(t._dirty||o.length){O.update(t._labels);e.render()}delete t._dirty}};return V}));(function(e){e(["jquery","lodash"],(function(e,t){return function(){const i=10;const n=parseInt(e("html").css("--popup-width"));const r=parseInt(e("html").css("--popup-width-mobile"));var o;var s;var a=0;var l={alert:"alert",info:"info",success:"success",warning:"warning"};const c=[l.success,l.warning,l.alert,l.info];var d={clear:v,remove:b,alert:u,getContainer:m,info:h,options:{},subscribe:g,success:p,version:"2.0.3",warning:f,warning_permanent:f};return d;function u(e,t,i){return x({type:l.alert,title:e,message:t,options:i})}function h(e,t,i){return x({type:l.info,title:e,message:t,options:i})}function p(e,t,i){return x({type:l.success,title:e,message:t,options:i})}function f(e,t,i){return x({type:l.warning,title:e,message:t,options:i})}function g(e){s=e}function m(t,i){if(!t){t=E()}o=e("#"+t.containerId);if(o.length){return o}if(i){o=C(t)}return o}function v(e){var t=E();if(!o){m(t)}if(!w(e,t)){y(t)}}function b(t){var i=E();if(!o){m(i)}if(t&&e(":focus",t).length===0){T(t,i.removeEmptyContainer);return}if(o.children().length){o.remove()}}function y(t){var i=o.children();for(var n=i.length-1;n>=0;n--){w(e(i[n]),t)}}function w(t,i){if(t&&e(":focus",t).length===0){t[i.hideMethod]({duration:i.hideDuration,easing:i.hideEasing,complete:function(){T(t,i.removeEmptyContainer)}});return true}return false}function C(t){o=e("<div/>").attr("id",t.containerId).addClass(t.positionClass).attr("aria-live","polite").attr("role","alert");o.appendTo(e(t.target));return o}function _(){return{tapToDismiss:false,toastClass:"popup",containerId:"popups",debug:false,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:undefined,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:undefined,extendedTimeOut:1e3,onCloseClick:undefined,positionClass:"popups-bottom-right",timeOut:5e3,titleClass:"headline",messageClass:"popup-content",tabsClass:"popup-tabs",tabClass:"popup-tab",arrowClass:"arrow",leftArrowClass:"arrow-left",rightArrowClass:"arrow-right",headerClass:"popup-header",activeTabClass:"active",hasTabsClass:"has-tabs",hasCarouselClass:"has-carousel",expandedClass:"expanded",closeIcon:"icon icon-times-circle",target:"body",newestOnTop:false,useTabs:true,removeEmptyContainer:true,collapse:true}}function S(e){if(!s){return}s(e)}function A(){return this._template||(this._template=`\n                <div class="{{= toastClass }} {{= toastClass }}-{{= type }}">\n                  <div class="{{= headerClass }} {{= tabsClass }}"></div>\n                  <div class="{{= tabClass }} {{= arrowClass }} {{= leftArrowClass }} {{= activeTabClass }}">\n                    <i class="icon icon-{{= leftArrowClass }}"></i>\n                  </div>\n                  <div class="{{= tabClass }} {{= arrowClass }} {{= rightArrowClass }} {{= activeTabClass }}">\n                    <i class="icon icon-{{= rightArrowClass }}"></i>\n                  </div>\n                  \n                  <div class="{{= headerClass }}">\n                    <div class="d-flex">\n                     {{ if (collapse) { }}\n                        <i class="icon icon-caret-left me-2"></i>\n                     {{ } }}\n                     <i class="icon icon-state-{{= type }} popup-header-icon me-1"></i>\n                    </div>\n                    <span class="popup-header-title">{{= title }}</span>\n                    <i class="js-close close-icon {{= closeIcon }} ms-auto"></i>\n                  </div>\n                  <div class="{{= messageClass }}" style="display: none;">{{= message }}</div>\n                </div>`)}function x(s){var l=E(),d=e.extend(l,s);if(typeof s.options!=="undefined"){d=e.extend(d,s.options)}o=m(d,true);if(o.is("[data-popups-options]")){const e=AGN.Lib.Helpers.objFromString(o.data("popups-options"));d=t.extend(d,e)}const u=e(`.popup-${d.type}`);if(d.useTabs&&u.is(":visible")){N(u);return u}a++;var h=t.template(A())(d),p=e(h);var f=null,g=p,v=g.find(".js-close"),b=g.find(`.${d.rightArrowClass}`),y=g.find(`.${d.leftArrowClass}`).hide(),w=0,C={toastId:a,state:"visible",startTime:new Date,options:d};if(d.message){g.find("."+d.messageClass).show()}g.data("type",d.type);x(g);g[d.showMethod]({duration:d.showDuration,easing:d.showEasing,complete:d.onShown});if(d.timeOut>0){f=setTimeout(W,d.timeOut)}g.hover(j,V);if(!d.onclick&&d.tapToDismiss){g.click(W)}if(v){v.click((function(e){if(e.stopPropagation){e.stopPropagation()}else if(e.cancelBubble!==undefined&&e.cancelBubble!==true){e.cancelBubble=true}if(d.onCloseClick){d.onCloseClick(e)}if(g.hasClass(d.hasTabsClass)){P()}else{W(true)}}))}if(d.onclick){g.click((function(){d.onclick();W()}))}S(C);if(d.debug&&console){console.log(C)}y.click((()=>M()));b.click((()=>k()));if(d.collapse){g.find(`.${d.headerClass}:not(.${d.tabsClass})`).click((()=>{g.toggleClass(d.expandedClass,z(g));R(g)}))}else{g.addClass(d.expandedClass)}N(g);return g;function _(){const t=c.indexOf(d.type);return o.find(`.${d.toastClass}`).filter(((i,n)=>{const r=c.indexOf(e(n).data("type"));return t<r})).first()}function x(e){if(d.newestOnTop||!o.find(`.${d.toastClass}`).length){o.prepend(e);return}const t=_();if(t.exists()){e.insertBefore(t);return}o.append(e)}function D(e,t){const i=e.find(`.${d.tabsClass}`);i.css("transform",`translateX(${t}px)`);setTimeout((()=>G(e)),300)}function M(e){w=w-1;const t=w*-H(g);D(g,t);if(!e){b.show()}if(w===0){y.hide()}}function k(){w=w+1;const e=w*H(g);D(g,e*-1);y.show();if(g.find(`.${d.tabsClass}`).width()-e<=g.width()){b.hide()}}function P(){const e=B(g).filter(`.${d.activeTabClass}`);const t=e.next();const i=t.length?t:e.prev();e.remove();if(y.is(":visible")){M(true)}O(g,i)}function R(t){let n=B(t);t.toggleClass(d.hasTabsClass,n.length>1);t.toggleClass(d.hasCarouselClass,n.length>i);const r=H(t);t.find(`.${d.tabClass}`).each(((t,i)=>e(i).css("width",`${r}px`)));G(t)}function I(){const t=e(`\n                    <div class="${d.tabClass}">\n                      <i class="icon icon-state-${d.type}"></i>\n                    </div>`);t.data("options",d);return t}function O(e,t){B(e).filter(`.${d.activeTabClass}`).removeClass(d.activeTabClass);t.addClass(d.activeTabClass);e.find(`.${d.messageClass}`).html(t.data("options").message);R(e)}function N(e){const t=I();e.find(`.${d.tabsClass}`).prepend(t);O(e,t);t.click((()=>O(e,t)))}function L(e){e.style("border-right-width","0")}function F(e){e.style("border-right-width","1px")}function $(t,i){const n=t.offset().left;const r=t.offset().left+t.outerWidth();return i.filter(((t,i)=>{const o=e(i);const s=o.offset().left;const a=o.offset().left+o.outerWidth();return s>=n-5&&a<=r+5}))}function G(t){let i=B(t);i.each(((t,i)=>F(e(i))));L(i.filter(`.${d.activeTabClass}`).prev());const n=$(t,i);if(t.find(`.${d.rightArrowClass}`).is(":visible")){L(n.last().prev())}if(t.find(`.${d.leftArrowClass}`).is(":visible")){L(n.first())}}function B(e){return e.find(`.${d.tabClass}:not(.${d.arrowClass})`)}function H(e){return!e.hasClass(d.expandedClass)||z(e)?n/i:e.width()/i}function z(e){return e.width()===r}function W(t){if((e(":focus",g).length||g.hasClass(d.expandedClass))&&!t){return}return g[d.hideMethod]({duration:d.hideDuration,easing:d.hideEasing,complete:function(){T(g,d.removeEmptyContainer);if(d.onHidden&&C.state!=="hidden"){d.onHidden()}C.state="hidden";C.endTime=new Date;S(C)}})}function V(){if(d.timeOut>0||d.extendedTimeOut>0){f=setTimeout(W,d.extendedTimeOut)}}function j(){clearTimeout(f);g.stop(true,true)[d.showMethod]({duration:d.showDuration,easing:d.showEasing})}}function E(){return e.extend({},_(),d.options)}function T(e,t=true){if(!o){o=m()}if(e.is(":visible")){return}e.remove();e=null;if(t&&o.children().length===0){o.remove()}}}()}))})(typeof define==="function"&&define.amd?define:function(e,t){if(typeof module!=="undefined"&&module.exports){module.exports=t(require("jquery","lodash"))}else{window["toastr"]=t(window["jQuery"],window["_"])}});(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):e.moment=t()})(this,(function(){"use strict";var e;function t(){return e.apply(null,arguments)}function i(t){e=t}function n(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function r(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function s(e){if(Object.getOwnPropertyNames){return Object.getOwnPropertyNames(e).length===0}else{var t;for(t in e){if(o(e,t)){return false}}return true}}function a(e){return e===void 0}function l(e){return typeof e==="number"||Object.prototype.toString.call(e)==="[object Number]"}function c(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function d(e,t){var i=[],n,r=e.length;for(n=0;n<r;++n){i.push(t(e[n],n))}return i}function u(e,t){for(var i in t){if(o(t,i)){e[i]=t[i]}}if(o(t,"toString")){e.toString=t.toString}if(o(t,"valueOf")){e.valueOf=t.valueOf}return e}function h(e,t,i,n){return Ui(e,t,i,n,true).utc()}function p(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidEra:null,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],era:null,meridiem:null,rfc2822:false,weekdayMismatch:false}}function f(e){if(e._pf==null){e._pf=p()}return e._pf}var g;if(Array.prototype.some){g=Array.prototype.some}else{g=function(e){var t=Object(this),i=t.length>>>0,n;for(n=0;n<i;n++){if(n in t&&e.call(this,t[n],n,t)){return true}}return false}}function m(e){var t=null,i=false,n=e._d&&!isNaN(e._d.getTime());if(n){t=f(e);i=g.call(t.parsedDateParts,(function(e){return e!=null}));n=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);if(e._strict){n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined}}if(Object.isFrozen==null||!Object.isFrozen(e)){e._isValid=n}else{return n}return e._isValid}function v(e){var t=h(NaN);if(e!=null){u(f(t),e)}else{f(t).userInvalidated=true}return t}var b=t.momentProperties=[],y=false;function w(e,t){var i,n,r,o=b.length;if(!a(t._isAMomentObject)){e._isAMomentObject=t._isAMomentObject}if(!a(t._i)){e._i=t._i}if(!a(t._f)){e._f=t._f}if(!a(t._l)){e._l=t._l}if(!a(t._strict)){e._strict=t._strict}if(!a(t._tzm)){e._tzm=t._tzm}if(!a(t._isUTC)){e._isUTC=t._isUTC}if(!a(t._offset)){e._offset=t._offset}if(!a(t._pf)){e._pf=f(t)}if(!a(t._locale)){e._locale=t._locale}if(o>0){for(i=0;i<o;i++){n=b[i];r=t[n];if(!a(r)){e[n]=r}}}return e}function C(e){w(this,e);this._d=new Date(e._d!=null?e._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN)}if(y===false){y=true;t.updateOffset(this);y=false}}function _(e){return e instanceof C||e!=null&&e._isAMomentObject!=null}function S(e){if(t.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+e)}}function A(e,i){var n=true;return u((function(){if(t.deprecationHandler!=null){t.deprecationHandler(null,e)}if(n){var r=[],s,a,l,c=arguments.length;for(a=0;a<c;a++){s="";if(typeof arguments[a]==="object"){s+="\n["+a+"] ";for(l in arguments[0]){if(o(arguments[0],l)){s+=l+": "+arguments[0][l]+", "}}s=s.slice(0,-2)}else{s=arguments[a]}r.push(s)}S(e+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack);n=false}return i.apply(this,arguments)}),i)}var x={};function E(e,i){if(t.deprecationHandler!=null){t.deprecationHandler(e,i)}if(!x[e]){S(i);x[e]=true}}t.suppressDeprecationWarnings=false;t.deprecationHandler=null;function T(e){return typeof Function!=="undefined"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function D(e){var t,i;for(i in e){if(o(e,i)){t=e[i];if(T(t)){this[i]=t}else{this["_"+i]=t}}}this._config=e;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function M(e,t){var i=u({},e),n;for(n in t){if(o(t,n)){if(r(e[n])&&r(t[n])){i[n]={};u(i[n],e[n]);u(i[n],t[n])}else if(t[n]!=null){i[n]=t[n]}else{delete i[n]}}}for(n in e){if(o(e,n)&&!o(t,n)&&r(e[n])){i[n]=u({},i[n])}}return i}function k(e){if(e!=null){this.set(e)}}var P;if(Object.keys){P=Object.keys}else{P=function(e){var t,i=[];for(t in e){if(o(e,t)){i.push(t)}}return i}}var R={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function I(e,t,i){var n=this._calendar[e]||this._calendar["sameElse"];return T(n)?n.call(t,i):n}function O(e,t,i){var n=""+Math.abs(e),r=t-n.length,o=e>=0;return(o?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,L=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},$={};function G(e,t,i,n){var r=n;if(typeof n==="string"){r=function(){return this[n]()}}if(e){$[e]=r}if(t){$[t[0]]=function(){return O(r.apply(this,arguments),t[1],t[2])}}if(i){$[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)}}}function B(e){if(e.match(/\[[\s\S]/)){return e.replace(/^\[|\]$/g,"")}return e.replace(/\\/g,"")}function H(e){var t=e.match(N),i,n;for(i=0,n=t.length;i<n;i++){if($[t[i]]){t[i]=$[t[i]]}else{t[i]=B(t[i])}}return function(i){var r="",o;for(o=0;o<n;o++){r+=T(t[o])?t[o].call(i,e):t[o]}return r}}function z(e,t){if(!e.isValid()){return e.localeData().invalidDate()}t=W(t,e.localeData());F[t]=F[t]||H(t);return F[t](e)}function W(e,t){var i=5;function n(e){return t.longDateFormat(e)||e}L.lastIndex=0;while(i>=0&&L.test(e)){e=e.replace(L,n);L.lastIndex=0;i-=1}return e}var V={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function j(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];if(t||!i){return t}this._longDateFormat[e]=i.match(N).map((function(e){if(e==="MMMM"||e==="MM"||e==="DD"||e==="dddd"){return e.slice(1)}return e})).join("");return this._longDateFormat[e]}var U="Invalid date";function Y(){return this._invalidDate}var q="%d",K=/\d{1,2}/;function X(e){return this._ordinal.replace("%d",e)}var Z={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Q(e,t,i,n){var r=this._relativeTime[i];return T(r)?r(e,t,i,n):r.replace(/%d/i,e)}function J(e,t){var i=this._relativeTime[e>0?"future":"past"];return T(i)?i(t):i.replace(/%s/i,t)}var ee={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function te(e){return typeof e==="string"?ee[e]||ee[e.toLowerCase()]:undefined}function ie(e){var t={},i,n;for(n in e){if(o(e,n)){i=te(n);if(i){t[i]=e[n]}}}return t}var ne={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function re(e){var t=[],i;for(i in e){if(o(e,i)){t.push({unit:i,priority:ne[i]})}}t.sort((function(e,t){return e.priority-t.priority}));return t}var oe=/\d/,se=/\d\d/,ae=/\d{3}/,le=/\d{4}/,ce=/[+-]?\d{6}/,de=/\d\d?/,ue=/\d\d\d\d?/,he=/\d\d\d\d\d\d?/,pe=/\d{1,3}/,fe=/\d{1,4}/,ge=/[+-]?\d{1,6}/,me=/\d+/,ve=/[+-]?\d+/,be=/Z|[+-]\d\d:?\d\d/gi,ye=/Z|[+-]\d\d(?::?\d\d)?/gi,we=/[+-]?\d+(\.\d{1,3})?/,Ce=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,_e=/^[1-9]\d?/,Se=/^([1-9]\d|\d)/,Ae;Ae={};function xe(e,t,i){Ae[e]=T(t)?t:function(e,n){return e&&i?i:t}}function Ee(e,t){if(!o(Ae,e)){return new RegExp(Te(e))}return Ae[e](t._strict,t._locale)}function Te(e){return De(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,i,n,r){return t||i||n||r})))}function De(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Me(e){if(e<0){return Math.ceil(e)||0}else{return Math.floor(e)}}function ke(e){var t=+e,i=0;if(t!==0&&isFinite(t)){i=Me(t)}return i}var Pe={};function Re(e,t){var i,n=t,r;if(typeof e==="string"){e=[e]}if(l(t)){n=function(e,i){i[t]=ke(e)}}r=e.length;for(i=0;i<r;i++){Pe[e[i]]=n}}function Ie(e,t){Re(e,(function(e,i,n,r){n._w=n._w||{};t(e,n._w,n,r)}))}function Oe(e,t,i){if(t!=null&&o(Pe,e)){Pe[e](t,i._a,i,e)}}function Ne(e){return e%4===0&&e%100!==0||e%400===0}var Le=0,Fe=1,$e=2,Ge=3,Be=4,He=5,ze=6,We=7,Ve=8;G("Y",0,0,(function(){var e=this.year();return e<=9999?O(e,4):"+"+e}));G(0,["YY",2],0,(function(){return this.year()%100}));G(0,["YYYY",4],0,"year");G(0,["YYYYY",5],0,"year");G(0,["YYYYYY",6,true],0,"year");xe("Y",ve);xe("YY",de,se);xe("YYYY",fe,le);xe("YYYYY",ge,ce);xe("YYYYYY",ge,ce);Re(["YYYYY","YYYYYY"],Le);Re("YYYY",(function(e,i){i[Le]=e.length===2?t.parseTwoDigitYear(e):ke(e)}));Re("YY",(function(e,i){i[Le]=t.parseTwoDigitYear(e)}));Re("Y",(function(e,t){t[Le]=parseInt(e,10)}));function je(e){return Ne(e)?366:365}t.parseTwoDigitYear=function(e){return ke(e)+(ke(e)>68?1900:2e3)};var Ue=qe("FullYear",true);function Ye(){return Ne(this.year())}function qe(e,i){return function(n){if(n!=null){Xe(this,e,n);t.updateOffset(this,i);return this}else{return Ke(this,e)}}}function Ke(e,t){if(!e.isValid()){return NaN}var i=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?i.getUTCMilliseconds():i.getMilliseconds();case"Seconds":return n?i.getUTCSeconds():i.getSeconds();case"Minutes":return n?i.getUTCMinutes():i.getMinutes();case"Hours":return n?i.getUTCHours():i.getHours();case"Date":return n?i.getUTCDate():i.getDate();case"Day":return n?i.getUTCDay():i.getDay();case"Month":return n?i.getUTCMonth():i.getMonth();case"FullYear":return n?i.getUTCFullYear():i.getFullYear();default:return NaN}}function Xe(e,t,i){var n,r,o,s,a;if(!e.isValid()||isNaN(i)){return}n=e._d;r=e._isUTC;switch(t){case"Milliseconds":return void(r?n.setUTCMilliseconds(i):n.setMilliseconds(i));case"Seconds":return void(r?n.setUTCSeconds(i):n.setSeconds(i));case"Minutes":return void(r?n.setUTCMinutes(i):n.setMinutes(i));case"Hours":return void(r?n.setUTCHours(i):n.setHours(i));case"Date":return void(r?n.setUTCDate(i):n.setDate(i));case"FullYear":break;default:return}o=i;s=e.month();a=e.date();a=a===29&&s===1&&!Ne(o)?28:a;void(r?n.setUTCFullYear(o,s,a):n.setFullYear(o,s,a))}function Ze(e){e=te(e);if(T(this[e])){return this[e]()}return this}function Qe(e,t){if(typeof e==="object"){e=ie(e);var i=re(e),n,r=i.length;for(n=0;n<r;n++){this[i[n].unit](e[i[n].unit])}}else{e=te(e);if(T(this[e])){return this[e](t)}}return this}function Je(e,t){return(e%t+t)%t}var et;if(Array.prototype.indexOf){et=Array.prototype.indexOf}else{et=function(e){var t;for(t=0;t<this.length;++t){if(this[t]===e){return t}}return-1}}function tt(e,t){if(isNaN(e)||isNaN(t)){return NaN}var i=Je(t,12);e+=(t-i)/12;return i===1?Ne(e)?29:28:31-i%7%2}G("M",["MM",2],"Mo",(function(){return this.month()+1}));G("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)}));G("MMMM",0,0,(function(e){return this.localeData().months(this,e)}));xe("M",de,_e);xe("MM",de,se);xe("MMM",(function(e,t){return t.monthsShortRegex(e)}));xe("MMMM",(function(e,t){return t.monthsRegex(e)}));Re(["M","MM"],(function(e,t){t[Fe]=ke(e)-1}));Re(["MMM","MMMM"],(function(e,t,i,n){var r=i._locale.monthsParse(e,n,i._strict);if(r!=null){t[Fe]=r}else{f(i).invalidMonth=e}}));var it="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),nt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),rt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ot=Ce,st=Ce;function at(e,t){if(!e){return n(this._months)?this._months:this._months["standalone"]}return n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||rt).test(t)?"format":"standalone"][e.month()]}function lt(e,t){if(!e){return n(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}return n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[rt.test(t)?"format":"standalone"][e.month()]}function ct(e,t,i){var n,r,o,s=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(n=0;n<12;++n){o=h([2e3,n]);this._shortMonthsParse[n]=this.monthsShort(o,"").toLocaleLowerCase();this._longMonthsParse[n]=this.months(o,"").toLocaleLowerCase()}}if(i){if(t==="MMM"){r=et.call(this._shortMonthsParse,s);return r!==-1?r:null}else{r=et.call(this._longMonthsParse,s);return r!==-1?r:null}}else{if(t==="MMM"){r=et.call(this._shortMonthsParse,s);if(r!==-1){return r}r=et.call(this._longMonthsParse,s);return r!==-1?r:null}else{r=et.call(this._longMonthsParse,s);if(r!==-1){return r}r=et.call(this._shortMonthsParse,s);return r!==-1?r:null}}}function dt(e,t,i){var n,r,o;if(this._monthsParseExact){return ct.call(this,e,t,i)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(n=0;n<12;n++){r=h([2e3,n]);if(i&&!this._longMonthsParse[n]){this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i");this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")}if(!i&&!this._monthsParse[n]){o="^"+this.months(r,"")+"|^"+this.monthsShort(r,"");this._monthsParse[n]=new RegExp(o.replace(".",""),"i")}if(i&&t==="MMMM"&&this._longMonthsParse[n].test(e)){return n}else if(i&&t==="MMM"&&this._shortMonthsParse[n].test(e)){return n}else if(!i&&this._monthsParse[n].test(e)){return n}}}function ut(e,t){if(!e.isValid()){return e}if(typeof t==="string"){if(/^\d+$/.test(t)){t=ke(t)}else{t=e.localeData().monthsParse(t);if(!l(t)){return e}}}var i=t,n=e.date();n=n<29?n:Math.min(n,tt(e.year(),i));void(e._isUTC?e._d.setUTCMonth(i,n):e._d.setMonth(i,n));return e}function ht(e){if(e!=null){ut(this,e);t.updateOffset(this,true);return this}else{return Ke(this,"Month")}}function pt(){return tt(this.year(),this.month())}function ft(e){if(this._monthsParseExact){if(!o(this,"_monthsRegex")){mt.call(this)}if(e){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!o(this,"_monthsShortRegex")){this._monthsShortRegex=ot}return this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}}function gt(e){if(this._monthsParseExact){if(!o(this,"_monthsRegex")){mt.call(this)}if(e){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!o(this,"_monthsRegex")){this._monthsRegex=st}return this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}}function mt(){function e(e,t){return t.length-e.length}var t=[],i=[],n=[],r,o,s,a;for(r=0;r<12;r++){o=h([2e3,r]);s=De(this.monthsShort(o,""));a=De(this.months(o,""));t.push(s);i.push(a);n.push(a);n.push(s)}t.sort(e);i.sort(e);n.sort(e);this._monthsRegex=new RegExp("^("+n.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function vt(e,t,i,n,r,o,s){var a;if(e<100&&e>=0){a=new Date(e+400,t,i,n,r,o,s);if(isFinite(a.getFullYear())){a.setFullYear(e)}}else{a=new Date(e,t,i,n,r,o,s)}return a}function bt(e){var t,i;if(e<100&&e>=0){i=Array.prototype.slice.call(arguments);i[0]=e+400;t=new Date(Date.UTC.apply(null,i));if(isFinite(t.getUTCFullYear())){t.setUTCFullYear(e)}}else{t=new Date(Date.UTC.apply(null,arguments))}return t}function yt(e,t,i){var n=7+t-i,r=(7+bt(e,0,n).getUTCDay()-t)%7;return-r+n-1}function wt(e,t,i,n,r){var o=(7+i-n)%7,s=yt(e,n,r),a=1+7*(t-1)+o+s,l,c;if(a<=0){l=e-1;c=je(l)+a}else if(a>je(e)){l=e+1;c=a-je(e)}else{l=e;c=a}return{year:l,dayOfYear:c}}function Ct(e,t,i){var n=yt(e.year(),t,i),r=Math.floor((e.dayOfYear()-n-1)/7)+1,o,s;if(r<1){s=e.year()-1;o=r+_t(s,t,i)}else if(r>_t(e.year(),t,i)){o=r-_t(e.year(),t,i);s=e.year()+1}else{s=e.year();o=r}return{week:o,year:s}}function _t(e,t,i){var n=yt(e,t,i),r=yt(e+1,t,i);return(je(e)-n+r)/7}G("w",["ww",2],"wo","week");G("W",["WW",2],"Wo","isoWeek");xe("w",de,_e);xe("ww",de,se);xe("W",de,_e);xe("WW",de,se);Ie(["w","ww","W","WW"],(function(e,t,i,n){t[n.substr(0,1)]=ke(e)}));function St(e){return Ct(e,this._week.dow,this._week.doy).week}var At={dow:0,doy:6};function xt(){return this._week.dow}function Et(){return this._week.doy}function Tt(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Dt(e){var t=Ct(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}G("d",0,"do","day");G("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)}));G("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)}));G("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)}));G("e",0,0,"weekday");G("E",0,0,"isoWeekday");xe("d",de);xe("e",de);xe("E",de);xe("dd",(function(e,t){return t.weekdaysMinRegex(e)}));xe("ddd",(function(e,t){return t.weekdaysShortRegex(e)}));xe("dddd",(function(e,t){return t.weekdaysRegex(e)}));Ie(["dd","ddd","dddd"],(function(e,t,i,n){var r=i._locale.weekdaysParse(e,n,i._strict);if(r!=null){t.d=r}else{f(i).invalidWeekday=e}}));Ie(["d","e","E"],(function(e,t,i,n){t[n]=ke(e)}));function Mt(e,t){if(typeof e!=="string"){return e}if(!isNaN(e)){return parseInt(e,10)}e=t.weekdaysParse(e);if(typeof e==="number"){return e}return null}function kt(e,t){if(typeof e==="string"){return t.weekdaysParse(e)%7||7}return isNaN(e)?null:e}function Pt(e,t){return e.slice(t,7).concat(e.slice(0,t))}var Rt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),It="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ot="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Nt=Ce,Lt=Ce,Ft=Ce;function $t(e,t){var i=n(this._weekdays)?this._weekdays:this._weekdays[e&&e!==true&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===true?Pt(i,this._week.dow):e?i[e.day()]:i}function Gt(e){return e===true?Pt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Bt(e){return e===true?Pt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ht(e,t,i){var n,r,o,s=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(n=0;n<7;++n){o=h([2e3,1]).day(n);this._minWeekdaysParse[n]=this.weekdaysMin(o,"").toLocaleLowerCase();this._shortWeekdaysParse[n]=this.weekdaysShort(o,"").toLocaleLowerCase();this._weekdaysParse[n]=this.weekdays(o,"").toLocaleLowerCase()}}if(i){if(t==="dddd"){r=et.call(this._weekdaysParse,s);return r!==-1?r:null}else if(t==="ddd"){r=et.call(this._shortWeekdaysParse,s);return r!==-1?r:null}else{r=et.call(this._minWeekdaysParse,s);return r!==-1?r:null}}else{if(t==="dddd"){r=et.call(this._weekdaysParse,s);if(r!==-1){return r}r=et.call(this._shortWeekdaysParse,s);if(r!==-1){return r}r=et.call(this._minWeekdaysParse,s);return r!==-1?r:null}else if(t==="ddd"){r=et.call(this._shortWeekdaysParse,s);if(r!==-1){return r}r=et.call(this._weekdaysParse,s);if(r!==-1){return r}r=et.call(this._minWeekdaysParse,s);return r!==-1?r:null}else{r=et.call(this._minWeekdaysParse,s);if(r!==-1){return r}r=et.call(this._weekdaysParse,s);if(r!==-1){return r}r=et.call(this._shortWeekdaysParse,s);return r!==-1?r:null}}}function zt(e,t,i){var n,r,o;if(this._weekdaysParseExact){return Ht.call(this,e,t,i)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(n=0;n<7;n++){r=h([2e3,1]).day(n);if(i&&!this._fullWeekdaysParse[n]){this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i");this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i");this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")}if(!this._weekdaysParse[n]){o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,"");this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")}if(i&&t==="dddd"&&this._fullWeekdaysParse[n].test(e)){return n}else if(i&&t==="ddd"&&this._shortWeekdaysParse[n].test(e)){return n}else if(i&&t==="dd"&&this._minWeekdaysParse[n].test(e)){return n}else if(!i&&this._weekdaysParse[n].test(e)){return n}}}function Wt(e){if(!this.isValid()){return e!=null?this:NaN}var t=Ke(this,"Day");if(e!=null){e=Mt(e,this.localeData());return this.add(e-t,"d")}else{return t}}function Vt(e){if(!this.isValid()){return e!=null?this:NaN}var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function jt(e){if(!this.isValid()){return e!=null?this:NaN}if(e!=null){var t=kt(e,this.localeData());return this.day(this.day()%7?t:t-7)}else{return this.day()||7}}function Ut(e){if(this._weekdaysParseExact){if(!o(this,"_weekdaysRegex")){Kt.call(this)}if(e){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!o(this,"_weekdaysRegex")){this._weekdaysRegex=Nt}return this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}}function Yt(e){if(this._weekdaysParseExact){if(!o(this,"_weekdaysRegex")){Kt.call(this)}if(e){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!o(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=Lt}return this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}function qt(e){if(this._weekdaysParseExact){if(!o(this,"_weekdaysRegex")){Kt.call(this)}if(e){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!o(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=Ft}return this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function Kt(){function e(e,t){return t.length-e.length}var t=[],i=[],n=[],r=[],o,s,a,l,c;for(o=0;o<7;o++){s=h([2e3,1]).day(o);a=De(this.weekdaysMin(s,""));l=De(this.weekdaysShort(s,""));c=De(this.weekdays(s,""));t.push(a);i.push(l);n.push(c);r.push(a);r.push(l);r.push(c)}t.sort(e);i.sort(e);n.sort(e);r.sort(e);this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Xt(){return this.hours()%12||12}function Zt(){return this.hours()||24}G("H",["HH",2],0,"hour");G("h",["hh",2],0,Xt);G("k",["kk",2],0,Zt);G("hmm",0,0,(function(){return""+Xt.apply(this)+O(this.minutes(),2)}));G("hmmss",0,0,(function(){return""+Xt.apply(this)+O(this.minutes(),2)+O(this.seconds(),2)}));G("Hmm",0,0,(function(){return""+this.hours()+O(this.minutes(),2)}));G("Hmmss",0,0,(function(){return""+this.hours()+O(this.minutes(),2)+O(this.seconds(),2)}));function Qt(e,t){G(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}Qt("a",true);Qt("A",false);function Jt(e,t){return t._meridiemParse}xe("a",Jt);xe("A",Jt);xe("H",de,Se);xe("h",de,_e);xe("k",de,_e);xe("HH",de,se);xe("hh",de,se);xe("kk",de,se);xe("hmm",ue);xe("hmmss",he);xe("Hmm",ue);xe("Hmmss",he);Re(["H","HH"],Ge);Re(["k","kk"],(function(e,t,i){var n=ke(e);t[Ge]=n===24?0:n}));Re(["a","A"],(function(e,t,i){i._isPm=i._locale.isPM(e);i._meridiem=e}));Re(["h","hh"],(function(e,t,i){t[Ge]=ke(e);f(i).bigHour=true}));Re("hmm",(function(e,t,i){var n=e.length-2;t[Ge]=ke(e.substr(0,n));t[Be]=ke(e.substr(n));f(i).bigHour=true}));Re("hmmss",(function(e,t,i){var n=e.length-4,r=e.length-2;t[Ge]=ke(e.substr(0,n));t[Be]=ke(e.substr(n,2));t[He]=ke(e.substr(r));f(i).bigHour=true}));Re("Hmm",(function(e,t,i){var n=e.length-2;t[Ge]=ke(e.substr(0,n));t[Be]=ke(e.substr(n))}));Re("Hmmss",(function(e,t,i){var n=e.length-4,r=e.length-2;t[Ge]=ke(e.substr(0,n));t[Be]=ke(e.substr(n,2));t[He]=ke(e.substr(r))}));function ei(e){return(e+"").toLowerCase().charAt(0)==="p"}var ti=/[ap]\.?m?\.?/i,ii=qe("Hours",true);function ni(e,t,i){if(e>11){return i?"pm":"PM"}else{return i?"am":"AM"}}var ri={calendar:R,longDateFormat:V,invalidDate:U,ordinal:q,dayOfMonthOrdinalParse:K,relativeTime:Z,months:it,monthsShort:nt,week:At,weekdays:Rt,weekdaysMin:Ot,weekdaysShort:It,meridiemParse:ti};var oi={},si={},ai;function li(e,t){var i,n=Math.min(e.length,t.length);for(i=0;i<n;i+=1){if(e[i]!==t[i]){return i}}return n}function ci(e){return e?e.toLowerCase().replace("_","-"):e}function di(e){var t=0,i,n,r,o;while(t<e.length){o=ci(e[t]).split("-");i=o.length;n=ci(e[t+1]);n=n?n.split("-"):null;while(i>0){r=hi(o.slice(0,i).join("-"));if(r){return r}if(n&&n.length>=i&&li(o,n)>=i-1){break}i--}t++}return ai}function ui(e){return!!(e&&e.match("^[^/\\\\]*$"))}function hi(e){var t=null,i;if(oi[e]===undefined&&typeof module!=="undefined"&&module&&module.exports&&ui(e)){try{t=ai._abbr;i=require;i("./locale/"+e);pi(t)}catch(t){oi[e]=null}}return oi[e]}function pi(e,t){var i;if(e){if(a(t)){i=mi(e)}else{i=fi(e,t)}if(i){ai=i}else{if(typeof console!=="undefined"&&console.warn){console.warn("Locale "+e+" not found. Did you forget to load it?")}}}return ai._abbr}function fi(e,t){if(t!==null){var i,n=ri;t.abbr=e;if(oi[e]!=null){E("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");n=oi[e]._config}else if(t.parentLocale!=null){if(oi[t.parentLocale]!=null){n=oi[t.parentLocale]._config}else{i=hi(t.parentLocale);if(i!=null){n=i._config}else{if(!si[t.parentLocale]){si[t.parentLocale]=[]}si[t.parentLocale].push({name:e,config:t});return null}}}oi[e]=new k(M(n,t));if(si[e]){si[e].forEach((function(e){fi(e.name,e.config)}))}pi(e);return oi[e]}else{delete oi[e];return null}}function gi(e,t){if(t!=null){var i,n,r=ri;if(oi[e]!=null&&oi[e].parentLocale!=null){oi[e].set(M(oi[e]._config,t))}else{n=hi(e);if(n!=null){r=n._config}t=M(r,t);if(n==null){t.abbr=e}i=new k(t);i.parentLocale=oi[e];oi[e]=i}pi(e)}else{if(oi[e]!=null){if(oi[e].parentLocale!=null){oi[e]=oi[e].parentLocale;if(e===pi()){pi(e)}}else if(oi[e]!=null){delete oi[e]}}}return oi[e]}function mi(e){var t;if(e&&e._locale&&e._locale._abbr){e=e._locale._abbr}if(!e){return ai}if(!n(e)){t=hi(e);if(t){return t}e=[e]}return di(e)}function vi(){return P(oi)}function bi(e){var t,i=e._a;if(i&&f(e).overflow===-2){t=i[Fe]<0||i[Fe]>11?Fe:i[$e]<1||i[$e]>tt(i[Le],i[Fe])?$e:i[Ge]<0||i[Ge]>24||i[Ge]===24&&(i[Be]!==0||i[He]!==0||i[ze]!==0)?Ge:i[Be]<0||i[Be]>59?Be:i[He]<0||i[He]>59?He:i[ze]<0||i[ze]>999?ze:-1;if(f(e)._overflowDayOfYear&&(t<Le||t>$e)){t=$e}if(f(e)._overflowWeeks&&t===-1){t=We}if(f(e)._overflowWeekday&&t===-1){t=Ve}f(e).overflow=t}return e}var yi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ci=/Z|[+-]\d\d(?::?\d\d)?/,_i=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,false],["YYYY",/\d{4}/,false]],Si=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ai=/^\/?Date\((-?\d+)/i,xi=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ei={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Ti(e){var t,i,n=e._i,r=yi.exec(n)||wi.exec(n),o,s,a,l,c=_i.length,d=Si.length;if(r){f(e).iso=true;for(t=0,i=c;t<i;t++){if(_i[t][1].exec(r[1])){s=_i[t][0];o=_i[t][2]!==false;break}}if(s==null){e._isValid=false;return}if(r[3]){for(t=0,i=d;t<i;t++){if(Si[t][1].exec(r[3])){a=(r[2]||" ")+Si[t][0];break}}if(a==null){e._isValid=false;return}}if(!o&&a!=null){e._isValid=false;return}if(r[4]){if(Ci.exec(r[4])){l="Z"}else{e._isValid=false;return}}e._f=s+(a||"")+(l||"");Gi(e)}else{e._isValid=false}}function Di(e,t,i,n,r,o){var s=[Mi(e),nt.indexOf(t),parseInt(i,10),parseInt(n,10),parseInt(r,10)];if(o){s.push(parseInt(o,10))}return s}function Mi(e){var t=parseInt(e,10);if(t<=49){return 2e3+t}else if(t<=999){return 1900+t}return t}function ki(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Pi(e,t,i){if(e){var n=It.indexOf(e),r=new Date(t[0],t[1],t[2]).getDay();if(n!==r){f(i).weekdayMismatch=true;i._isValid=false;return false}}return true}function Ri(e,t,i){if(e){return Ei[e]}else if(t){return 0}else{var n=parseInt(i,10),r=n%100,o=(n-r)/100;return o*60+r}}function Ii(e){var t=xi.exec(ki(e._i)),i;if(t){i=Di(t[4],t[3],t[2],t[5],t[6],t[7]);if(!Pi(t[1],i,e)){return}e._a=i;e._tzm=Ri(t[8],t[9],t[10]);e._d=bt.apply(null,e._a);e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm);f(e).rfc2822=true}else{e._isValid=false}}function Oi(e){var i=Ai.exec(e._i);if(i!==null){e._d=new Date(+i[1]);return}Ti(e);if(e._isValid===false){delete e._isValid}else{return}Ii(e);if(e._isValid===false){delete e._isValid}else{return}if(e._strict){e._isValid=false}else{t.createFromInputFallback(e)}}t.createFromInputFallback=A("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}));function Ni(e,t,i){if(e!=null){return e}if(t!=null){return t}return i}function Li(e){var i=new Date(t.now());if(e._useUTC){return[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]}return[i.getFullYear(),i.getMonth(),i.getDate()]}function Fi(e){var t,i,n=[],r,o,s;if(e._d){return}r=Li(e);if(e._w&&e._a[$e]==null&&e._a[Fe]==null){$i(e)}if(e._dayOfYear!=null){s=Ni(e._a[Le],r[Le]);if(e._dayOfYear>je(s)||e._dayOfYear===0){f(e)._overflowDayOfYear=true}i=bt(s,0,e._dayOfYear);e._a[Fe]=i.getUTCMonth();e._a[$e]=i.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t){e._a[t]=n[t]=r[t]}for(;t<7;t++){e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t]}if(e._a[Ge]===24&&e._a[Be]===0&&e._a[He]===0&&e._a[ze]===0){e._nextDay=true;e._a[Ge]=0}e._d=(e._useUTC?bt:vt).apply(null,n);o=e._useUTC?e._d.getUTCDay():e._d.getDay();if(e._tzm!=null){e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm)}if(e._nextDay){e._a[Ge]=24}if(e._w&&typeof e._w.d!=="undefined"&&e._w.d!==o){f(e).weekdayMismatch=true}}function $i(e){var t,i,n,r,o,s,a,l,c;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){o=1;s=4;i=Ni(t.GG,e._a[Le],Ct(Yi(),1,4).year);n=Ni(t.W,1);r=Ni(t.E,1);if(r<1||r>7){l=true}}else{o=e._locale._week.dow;s=e._locale._week.doy;c=Ct(Yi(),o,s);i=Ni(t.gg,e._a[Le],c.year);n=Ni(t.w,c.week);if(t.d!=null){r=t.d;if(r<0||r>6){l=true}}else if(t.e!=null){r=t.e+o;if(t.e<0||t.e>6){l=true}}else{r=o}}if(n<1||n>_t(i,o,s)){f(e)._overflowWeeks=true}else if(l!=null){f(e)._overflowWeekday=true}else{a=wt(i,n,r,o,s);e._a[Le]=a.year;e._dayOfYear=a.dayOfYear}}t.ISO_8601=function(){};t.RFC_2822=function(){};function Gi(e){if(e._f===t.ISO_8601){Ti(e);return}if(e._f===t.RFC_2822){Ii(e);return}e._a=[];f(e).empty=true;var i=""+e._i,n,r,o,s,a,l=i.length,c=0,d,u;o=W(e._f,e._locale).match(N)||[];u=o.length;for(n=0;n<u;n++){s=o[n];r=(i.match(Ee(s,e))||[])[0];if(r){a=i.substr(0,i.indexOf(r));if(a.length>0){f(e).unusedInput.push(a)}i=i.slice(i.indexOf(r)+r.length);c+=r.length}if($[s]){if(r){f(e).empty=false}else{f(e).unusedTokens.push(s)}Oe(s,r,e)}else if(e._strict&&!r){f(e).unusedTokens.push(s)}}f(e).charsLeftOver=l-c;if(i.length>0){f(e).unusedInput.push(i)}if(e._a[Ge]<=12&&f(e).bigHour===true&&e._a[Ge]>0){f(e).bigHour=undefined}f(e).parsedDateParts=e._a.slice(0);f(e).meridiem=e._meridiem;e._a[Ge]=Bi(e._locale,e._a[Ge],e._meridiem);d=f(e).era;if(d!==null){e._a[Le]=e._locale.erasConvertYear(d,e._a[Le])}Fi(e);bi(e)}function Bi(e,t,i){var n;if(i==null){return t}if(e.meridiemHour!=null){return e.meridiemHour(t,i)}else if(e.isPM!=null){n=e.isPM(i);if(n&&t<12){t+=12}if(!n&&t===12){t=0}return t}else{return t}}function Hi(e){var t,i,n,r,o,s,a=false,l=e._f.length;if(l===0){f(e).invalidFormat=true;e._d=new Date(NaN);return}for(r=0;r<l;r++){o=0;s=false;t=w({},e);if(e._useUTC!=null){t._useUTC=e._useUTC}t._f=e._f[r];Gi(t);if(m(t)){s=true}o+=f(t).charsLeftOver;o+=f(t).unusedTokens.length*10;f(t).score=o;if(!a){if(n==null||o<n||s){n=o;i=t;if(s){a=true}}}else{if(o<n){n=o;i=t}}}u(e,i||t)}function zi(e){if(e._d){return}var t=ie(e._i),i=t.day===undefined?t.date:t.day;e._a=d([t.year,t.month,i,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)}));Fi(e)}function Wi(e){var t=new C(bi(Vi(e)));if(t._nextDay){t.add(1,"d");t._nextDay=undefined}return t}function Vi(e){var t=e._i,i=e._f;e._locale=e._locale||mi(e._l);if(t===null||i===undefined&&t===""){return v({nullInput:true})}if(typeof t==="string"){e._i=t=e._locale.preparse(t)}if(_(t)){return new C(bi(t))}else if(c(t)){e._d=t}else if(n(i)){Hi(e)}else if(i){Gi(e)}else{ji(e)}if(!m(e)){e._d=null}return e}function ji(e){var i=e._i;if(a(i)){e._d=new Date(t.now())}else if(c(i)){e._d=new Date(i.valueOf())}else if(typeof i==="string"){Oi(e)}else if(n(i)){e._a=d(i.slice(0),(function(e){return parseInt(e,10)}));Fi(e)}else if(r(i)){zi(e)}else if(l(i)){e._d=new Date(i)}else{t.createFromInputFallback(e)}}function Ui(e,t,i,o,a){var l={};if(t===true||t===false){o=t;t=undefined}if(i===true||i===false){o=i;i=undefined}if(r(e)&&s(e)||n(e)&&e.length===0){e=undefined}l._isAMomentObject=true;l._useUTC=l._isUTC=a;l._l=i;l._i=e;l._f=t;l._strict=o;return Wi(l)}function Yi(e,t,i,n){return Ui(e,t,i,n,false)}var qi=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Yi.apply(null,arguments);if(this.isValid()&&e.isValid()){return e<this?this:e}else{return v()}})),Ki=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Yi.apply(null,arguments);if(this.isValid()&&e.isValid()){return e>this?this:e}else{return v()}}));function Xi(e,t){var i,r;if(t.length===1&&n(t[0])){t=t[0]}if(!t.length){return Yi()}i=t[0];for(r=1;r<t.length;++r){if(!t[r].isValid()||t[r][e](i)){i=t[r]}}return i}function Zi(){var e=[].slice.call(arguments,0);return Xi("isBefore",e)}function Qi(){var e=[].slice.call(arguments,0);return Xi("isAfter",e)}var Ji=function(){return Date.now?Date.now():+new Date};var en=["year","quarter","month","week","day","hour","minute","second","millisecond"];function tn(e){var t,i=false,n,r=en.length;for(t in e){if(o(e,t)&&!(et.call(en,t)!==-1&&(e[t]==null||!isNaN(e[t])))){return false}}for(n=0;n<r;++n){if(e[en[n]]){if(i){return false}if(parseFloat(e[en[n]])!==ke(e[en[n]])){i=true}}}return true}function nn(){return this._isValid}function rn(){return Tn(NaN)}function on(e){var t=ie(e),i=t.year||0,n=t.quarter||0,r=t.month||0,o=t.week||t.isoWeek||0,s=t.day||0,a=t.hour||0,l=t.minute||0,c=t.second||0,d=t.millisecond||0;this._isValid=tn(t);this._milliseconds=+d+c*1e3+l*6e4+a*1e3*60*60;this._days=+s+o*7;this._months=+r+n*3+i*12;this._data={};this._locale=mi();this._bubble()}function sn(e){return e instanceof on}function an(e){if(e<0){return Math.round(-1*e)*-1}else{return Math.round(e)}}function ln(e,t,i){var n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),o=0,s;for(s=0;s<n;s++){if(i&&e[s]!==t[s]||!i&&ke(e[s])!==ke(t[s])){o++}}return o+r}function cn(e,t){G(e,0,0,(function(){var e=this.utcOffset(),i="+";if(e<0){e=-e;i="-"}return i+O(~~(e/60),2)+t+O(~~e%60,2)}))}cn("Z",":");cn("ZZ","");xe("Z",ye);xe("ZZ",ye);Re(["Z","ZZ"],(function(e,t,i){i._useUTC=true;i._tzm=un(ye,e)}));var dn=/([\+\-]|\d\d)/gi;function un(e,t){var i=(t||"").match(e),n,r,o;if(i===null){return null}n=i[i.length-1]||[];r=(n+"").match(dn)||["-",0,0];o=+(r[1]*60)+ke(r[2]);return o===0?0:r[0]==="+"?o:-o}function hn(e,i){var n,r;if(i._isUTC){n=i.clone();r=(_(e)||c(e)?e.valueOf():Yi(e).valueOf())-n.valueOf();n._d.setTime(n._d.valueOf()+r);t.updateOffset(n,false);return n}else{return Yi(e).local()}}function pn(e){return-Math.round(e._d.getTimezoneOffset())}t.updateOffset=function(){};function fn(e,i,n){var r=this._offset||0,o;if(!this.isValid()){return e!=null?this:NaN}if(e!=null){if(typeof e==="string"){e=un(ye,e);if(e===null){return this}}else if(Math.abs(e)<16&&!n){e=e*60}if(!this._isUTC&&i){o=pn(this)}this._offset=e;this._isUTC=true;if(o!=null){this.add(o,"m")}if(r!==e){if(!i||this._changeInProgress){Rn(this,Tn(e-r,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;t.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?r:pn(this)}}function gn(e,t){if(e!=null){if(typeof e!=="string"){e=-e}this.utcOffset(e,t);return this}else{return-this.utcOffset()}}function mn(e){return this.utcOffset(0,e)}function vn(e){if(this._isUTC){this.utcOffset(0,e);this._isUTC=false;if(e){this.subtract(pn(this),"m")}}return this}function bn(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true)}else if(typeof this._i==="string"){var e=un(be,this._i);if(e!=null){this.utcOffset(e)}else{this.utcOffset(0,true)}}return this}function yn(e){if(!this.isValid()){return false}e=e?Yi(e).utcOffset():0;return(this.utcOffset()-e)%60===0}function wn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Cn(){if(!a(this._isDSTShifted)){return this._isDSTShifted}var e={},t;w(e,this);e=Vi(e);if(e._a){t=e._isUTC?h(e._a):Yi(e._a);this._isDSTShifted=this.isValid()&&ln(e._a,t.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function _n(){return this.isValid()?!this._isUTC:false}function Sn(){return this.isValid()?this._isUTC:false}function An(){return this.isValid()?this._isUTC&&this._offset===0:false}var xn=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,En=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Tn(e,t){var i=e,n=null,r,s,a;if(sn(e)){i={ms:e._milliseconds,d:e._days,M:e._months}}else if(l(e)||!isNaN(+e)){i={};if(t){i[t]=+e}else{i.milliseconds=+e}}else if(n=xn.exec(e)){r=n[1]==="-"?-1:1;i={y:0,d:ke(n[$e])*r,h:ke(n[Ge])*r,m:ke(n[Be])*r,s:ke(n[He])*r,ms:ke(an(n[ze]*1e3))*r}}else if(n=En.exec(e)){r=n[1]==="-"?-1:1;i={y:Dn(n[2],r),M:Dn(n[3],r),w:Dn(n[4],r),d:Dn(n[5],r),h:Dn(n[6],r),m:Dn(n[7],r),s:Dn(n[8],r)}}else if(i==null){i={}}else if(typeof i==="object"&&("from"in i||"to"in i)){a=kn(Yi(i.from),Yi(i.to));i={};i.ms=a.milliseconds;i.M=a.months}s=new on(i);if(sn(e)&&o(e,"_locale")){s._locale=e._locale}if(sn(e)&&o(e,"_isValid")){s._isValid=e._isValid}return s}Tn.fn=on.prototype;Tn.invalid=rn;function Dn(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function Mn(e,t){var i={};i.months=t.month()-e.month()+(t.year()-e.year())*12;if(e.clone().add(i.months,"M").isAfter(t)){--i.months}i.milliseconds=+t-+e.clone().add(i.months,"M");return i}function kn(e,t){var i;if(!(e.isValid()&&t.isValid())){return{milliseconds:0,months:0}}t=hn(t,e);if(e.isBefore(t)){i=Mn(e,t)}else{i=Mn(t,e);i.milliseconds=-i.milliseconds;i.months=-i.months}return i}function Pn(e,t){return function(i,n){var r,o;if(n!==null&&!isNaN(+n)){E(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");o=i;i=n;n=o}r=Tn(i,n);Rn(this,r,e);return this}}function Rn(e,i,n,r){var o=i._milliseconds,s=an(i._days),a=an(i._months);if(!e.isValid()){return}r=r==null?true:r;if(a){ut(e,Ke(e,"Month")+a*n)}if(s){Xe(e,"Date",Ke(e,"Date")+s*n)}if(o){e._d.setTime(e._d.valueOf()+o*n)}if(r){t.updateOffset(e,s||a)}}var In=Pn(1,"add"),On=Pn(-1,"subtract");function Nn(e){return typeof e==="string"||e instanceof String}function Ln(e){return _(e)||c(e)||Nn(e)||l(e)||$n(e)||Fn(e)||e===null||e===undefined}function Fn(e){var t=r(e)&&!s(e),i=false,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a,l,c=n.length;for(a=0;a<c;a+=1){l=n[a];i=i||o(e,l)}return t&&i}function $n(e){var t=n(e),i=false;if(t){i=e.filter((function(t){return!l(t)&&Nn(e)})).length===0}return t&&i}function Gn(e){var t=r(e)&&!s(e),i=false,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],a,l;for(a=0;a<n.length;a+=1){l=n[a];i=i||o(e,l)}return t&&i}function Bn(e,t){var i=e.diff(t,"days",true);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function Hn(e,i){if(arguments.length===1){if(!arguments[0]){e=undefined;i=undefined}else if(Ln(arguments[0])){e=arguments[0];i=undefined}else if(Gn(arguments[0])){i=arguments[0];e=undefined}}var n=e||Yi(),r=hn(n,this).startOf("day"),o=t.calendarFormat(this,r)||"sameElse",s=i&&(T(i[o])?i[o].call(this,n):i[o]);return this.format(s||this.localeData().calendar(o,this,Yi(n)))}function zn(){return new C(this)}function Wn(e,t){var i=_(e)?e:Yi(e);if(!(this.isValid()&&i.isValid())){return false}t=te(t)||"millisecond";if(t==="millisecond"){return this.valueOf()>i.valueOf()}else{return i.valueOf()<this.clone().startOf(t).valueOf()}}function Vn(e,t){var i=_(e)?e:Yi(e);if(!(this.isValid()&&i.isValid())){return false}t=te(t)||"millisecond";if(t==="millisecond"){return this.valueOf()<i.valueOf()}else{return this.clone().endOf(t).valueOf()<i.valueOf()}}function jn(e,t,i,n){var r=_(e)?e:Yi(e),o=_(t)?t:Yi(t);if(!(this.isValid()&&r.isValid()&&o.isValid())){return false}n=n||"()";return(n[0]==="("?this.isAfter(r,i):!this.isBefore(r,i))&&(n[1]===")"?this.isBefore(o,i):!this.isAfter(o,i))}function Un(e,t){var i=_(e)?e:Yi(e),n;if(!(this.isValid()&&i.isValid())){return false}t=te(t)||"millisecond";if(t==="millisecond"){return this.valueOf()===i.valueOf()}else{n=i.valueOf();return this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()}}function Yn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function qn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Kn(e,t,i){var n,r,o;if(!this.isValid()){return NaN}n=hn(e,this);if(!n.isValid()){return NaN}r=(n.utcOffset()-this.utcOffset())*6e4;t=te(t);switch(t){case"year":o=Xn(this,n)/12;break;case"month":o=Xn(this,n);break;case"quarter":o=Xn(this,n)/3;break;case"second":o=(this-n)/1e3;break;case"minute":o=(this-n)/6e4;break;case"hour":o=(this-n)/36e5;break;case"day":o=(this-n-r)/864e5;break;case"week":o=(this-n-r)/6048e5;break;default:o=this-n}return i?o:Me(o)}function Xn(e,t){if(e.date()<t.date()){return-Xn(t,e)}var i=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(i,"months"),r,o;if(t-n<0){r=e.clone().add(i-1,"months");o=(t-n)/(n-r)}else{r=e.clone().add(i+1,"months");o=(t-n)/(r-n)}return-(i+o)||0}t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Zn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Qn(e){if(!this.isValid()){return null}var t=e!==true,i=t?this.clone().utc():this;if(i.year()<0||i.year()>9999){return z(i,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ")}if(T(Date.prototype.toISOString)){if(t){return this.toDate().toISOString()}else{return new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",z(i,"Z"))}}return z(i,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Jn(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var e="moment",t="",i,n,r,o;if(!this.isLocal()){e=this.utcOffset()===0?"moment.utc":"moment.parseZone";t="Z"}i="["+e+'("]';n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";r="-MM-DD[T]HH:mm:ss.SSS";o=t+'[")]';return this.format(i+n+r+o)}function er(e){if(!e){e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat}var i=z(this,e);return this.localeData().postformat(i)}function tr(e,t){if(this.isValid()&&(_(e)&&e.isValid()||Yi(e).isValid())){return Tn({to:this,from:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function ir(e){return this.from(Yi(),e)}function nr(e,t){if(this.isValid()&&(_(e)&&e.isValid()||Yi(e).isValid())){return Tn({from:this,to:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function rr(e){return this.to(Yi(),e)}function or(e){var t;if(e===undefined){return this._locale._abbr}else{t=mi(e);if(t!=null){this._locale=t}return this}}var sr=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){if(e===undefined){return this.localeData()}else{return this.locale(e)}}));function ar(){return this._locale}var lr=1e3,cr=60*lr,dr=60*cr,ur=(365*400+97)*24*dr;function hr(e,t){return(e%t+t)%t}function pr(e,t,i){if(e<100&&e>=0){return new Date(e+400,t,i)-ur}else{return new Date(e,t,i).valueOf()}}function fr(e,t,i){if(e<100&&e>=0){return Date.UTC(e+400,t,i)-ur}else{return Date.UTC(e,t,i)}}function gr(e){var i,n;e=te(e);if(e===undefined||e==="millisecond"||!this.isValid()){return this}n=this._isUTC?fr:pr;switch(e){case"year":i=n(this.year(),0,1);break;case"quarter":i=n(this.year(),this.month()-this.month()%3,1);break;case"month":i=n(this.year(),this.month(),1);break;case"week":i=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":i=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":i=n(this.year(),this.month(),this.date());break;case"hour":i=this._d.valueOf();i-=hr(i+(this._isUTC?0:this.utcOffset()*cr),dr);break;case"minute":i=this._d.valueOf();i-=hr(i,cr);break;case"second":i=this._d.valueOf();i-=hr(i,lr);break}this._d.setTime(i);t.updateOffset(this,true);return this}function mr(e){var i,n;e=te(e);if(e===undefined||e==="millisecond"||!this.isValid()){return this}n=this._isUTC?fr:pr;switch(e){case"year":i=n(this.year()+1,0,1)-1;break;case"quarter":i=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":i=n(this.year(),this.month()+1,1)-1;break;case"week":i=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":i=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":i=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":i=this._d.valueOf();i+=dr-hr(i+(this._isUTC?0:this.utcOffset()*cr),dr)-1;break;case"minute":i=this._d.valueOf();i+=cr-hr(i,cr)-1;break;case"second":i=this._d.valueOf();i+=lr-hr(i,lr)-1;break}this._d.setTime(i);t.updateOffset(this,true);return this}function vr(){return this._d.valueOf()-(this._offset||0)*6e4}function br(){return Math.floor(this.valueOf()/1e3)}function yr(){return new Date(this.valueOf())}function wr(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Cr(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function _r(){return this.isValid()?this.toISOString():null}function Sr(){return m(this)}function Ar(){return u({},f(this))}function xr(){return f(this).overflow}function Er(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}G("N",0,0,"eraAbbr");G("NN",0,0,"eraAbbr");G("NNN",0,0,"eraAbbr");G("NNNN",0,0,"eraName");G("NNNNN",0,0,"eraNarrow");G("y",["y",1],"yo","eraYear");G("y",["yy",2],0,"eraYear");G("y",["yyy",3],0,"eraYear");G("y",["yyyy",4],0,"eraYear");xe("N",Fr);xe("NN",Fr);xe("NNN",Fr);xe("NNNN",$r);xe("NNNNN",Gr);Re(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,i,n){var r=i._locale.erasParse(e,n,i._strict);if(r){f(i).era=r}else{f(i).invalidEra=e}}));xe("y",me);xe("yy",me);xe("yyy",me);xe("yyyy",me);xe("yo",Br);Re(["y","yy","yyy","yyyy"],Le);Re(["yo"],(function(e,t,i,n){var r;if(i._locale._eraYearOrdinalRegex){r=e.match(i._locale._eraYearOrdinalRegex)}if(i._locale.eraYearOrdinalParse){t[Le]=i._locale.eraYearOrdinalParse(e,r)}else{t[Le]=parseInt(e,10)}}));function Tr(e,i){var n,r,o,s=this._eras||mi("en")._eras;for(n=0,r=s.length;n<r;++n){switch(typeof s[n].since){case"string":o=t(s[n].since).startOf("day");s[n].since=o.valueOf();break}switch(typeof s[n].until){case"undefined":s[n].until=+Infinity;break;case"string":o=t(s[n].until).startOf("day").valueOf();s[n].until=o.valueOf();break}}return s}function Dr(e,t,i){var n,r,o=this.eras(),s,a,l;e=e.toUpperCase();for(n=0,r=o.length;n<r;++n){s=o[n].name.toUpperCase();a=o[n].abbr.toUpperCase();l=o[n].narrow.toUpperCase();if(i){switch(t){case"N":case"NN":case"NNN":if(a===e){return o[n]}break;case"NNNN":if(s===e){return o[n]}break;case"NNNNN":if(l===e){return o[n]}break}}else if([s,a,l].indexOf(e)>=0){return o[n]}}}function Mr(e,i){var n=e.since<=e.until?+1:-1;if(i===undefined){return t(e.since).year()}else{return t(e.since).year()+(i-e.offset)*n}}function kr(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){i=this.clone().startOf("day").valueOf();if(n[e].since<=i&&i<=n[e].until){return n[e].name}if(n[e].until<=i&&i<=n[e].since){return n[e].name}}return""}function Pr(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){i=this.clone().startOf("day").valueOf();if(n[e].since<=i&&i<=n[e].until){return n[e].narrow}if(n[e].until<=i&&i<=n[e].since){return n[e].narrow}}return""}function Rr(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){i=this.clone().startOf("day").valueOf();if(n[e].since<=i&&i<=n[e].until){return n[e].abbr}if(n[e].until<=i&&i<=n[e].since){return n[e].abbr}}return""}function Ir(){var e,i,n,r,o=this.localeData().eras();for(e=0,i=o.length;e<i;++e){n=o[e].since<=o[e].until?+1:-1;r=this.clone().startOf("day").valueOf();if(o[e].since<=r&&r<=o[e].until||o[e].until<=r&&r<=o[e].since){return(this.year()-t(o[e].since).year())*n+o[e].offset}}return this.year()}function Or(e){if(!o(this,"_erasNameRegex")){Hr.call(this)}return e?this._erasNameRegex:this._erasRegex}function Nr(e){if(!o(this,"_erasAbbrRegex")){Hr.call(this)}return e?this._erasAbbrRegex:this._erasRegex}function Lr(e){if(!o(this,"_erasNarrowRegex")){Hr.call(this)}return e?this._erasNarrowRegex:this._erasRegex}function Fr(e,t){return t.erasAbbrRegex(e)}function $r(e,t){return t.erasNameRegex(e)}function Gr(e,t){return t.erasNarrowRegex(e)}function Br(e,t){return t._eraYearOrdinalRegex||me}function Hr(){var e=[],t=[],i=[],n=[],r,o,s,a,l,c=this.eras();for(r=0,o=c.length;r<o;++r){s=De(c[r].name);a=De(c[r].abbr);l=De(c[r].narrow);t.push(s);e.push(a);i.push(l);n.push(s);n.push(a);n.push(l)}this._erasRegex=new RegExp("^("+n.join("|")+")","i");this._erasNameRegex=new RegExp("^("+t.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}G(0,["gg",2],0,(function(){return this.weekYear()%100}));G(0,["GG",2],0,(function(){return this.isoWeekYear()%100}));function zr(e,t){G(0,[e,e.length],0,t)}zr("gggg","weekYear");zr("ggggg","weekYear");zr("GGGG","isoWeekYear");zr("GGGGG","isoWeekYear");xe("G",ve);xe("g",ve);xe("GG",de,se);xe("gg",de,se);xe("GGGG",fe,le);xe("gggg",fe,le);xe("GGGGG",ge,ce);xe("ggggg",ge,ce);Ie(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,i,n){t[n.substr(0,2)]=ke(e)}));Ie(["gg","GG"],(function(e,i,n,r){i[r]=t.parseTwoDigitYear(e)}));function Wr(e){return Kr.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Vr(e){return Kr.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function jr(){return _t(this.year(),1,4)}function Ur(){return _t(this.isoWeekYear(),1,4)}function Yr(){var e=this.localeData()._week;return _t(this.year(),e.dow,e.doy)}function qr(){var e=this.localeData()._week;return _t(this.weekYear(),e.dow,e.doy)}function Kr(e,t,i,n,r){var o;if(e==null){return Ct(this,n,r).year}else{o=_t(e,n,r);if(t>o){t=o}return Xr.call(this,e,t,i,n,r)}}function Xr(e,t,i,n,r){var o=wt(e,t,i,n,r),s=bt(o.year,0,o.dayOfYear);this.year(s.getUTCFullYear());this.month(s.getUTCMonth());this.date(s.getUTCDate());return this}G("Q",0,"Qo","quarter");xe("Q",oe);Re("Q",(function(e,t){t[Fe]=(ke(e)-1)*3}));function Zr(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}G("D",["DD",2],"Do","date");xe("D",de,_e);xe("DD",de,se);xe("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}));Re(["D","DD"],$e);Re("Do",(function(e,t){t[$e]=ke(e.match(de)[0])}));var Qr=qe("Date",true);G("DDD",["DDDD",3],"DDDo","dayOfYear");xe("DDD",pe);xe("DDDD",ae);Re(["DDD","DDDD"],(function(e,t,i){i._dayOfYear=ke(e)}));function Jr(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}G("m",["mm",2],0,"minute");xe("m",de,Se);xe("mm",de,se);Re(["m","mm"],Be);var eo=qe("Minutes",false);G("s",["ss",2],0,"second");xe("s",de,Se);xe("ss",de,se);Re(["s","ss"],He);var to=qe("Seconds",false);G("S",0,0,(function(){return~~(this.millisecond()/100)}));G(0,["SS",2],0,(function(){return~~(this.millisecond()/10)}));G(0,["SSS",3],0,"millisecond");G(0,["SSSS",4],0,(function(){return this.millisecond()*10}));G(0,["SSSSS",5],0,(function(){return this.millisecond()*100}));G(0,["SSSSSS",6],0,(function(){return this.millisecond()*1e3}));G(0,["SSSSSSS",7],0,(function(){return this.millisecond()*1e4}));G(0,["SSSSSSSS",8],0,(function(){return this.millisecond()*1e5}));G(0,["SSSSSSSSS",9],0,(function(){return this.millisecond()*1e6}));xe("S",pe,oe);xe("SS",pe,se);xe("SSS",pe,ae);var io,no;for(io="SSSS";io.length<=9;io+="S"){xe(io,me)}function ro(e,t){t[ze]=ke(("0."+e)*1e3)}for(io="S";io.length<=9;io+="S"){Re(io,ro)}no=qe("Milliseconds",false);G("z",0,0,"zoneAbbr");G("zz",0,0,"zoneName");function oo(){return this._isUTC?"UTC":""}function so(){return this._isUTC?"Coordinated Universal Time":""}var ao=C.prototype;ao.add=In;ao.calendar=Hn;ao.clone=zn;ao.diff=Kn;ao.endOf=mr;ao.format=er;ao.from=tr;ao.fromNow=ir;ao.to=nr;ao.toNow=rr;ao.get=Ze;ao.invalidAt=xr;ao.isAfter=Wn;ao.isBefore=Vn;ao.isBetween=jn;ao.isSame=Un;ao.isSameOrAfter=Yn;ao.isSameOrBefore=qn;ao.isValid=Sr;ao.lang=sr;ao.locale=or;ao.localeData=ar;ao.max=Ki;ao.min=qi;ao.parsingFlags=Ar;ao.set=Qe;ao.startOf=gr;ao.subtract=On;ao.toArray=wr;ao.toObject=Cr;ao.toDate=yr;ao.toISOString=Qn;ao.inspect=Jn;if(typeof Symbol!=="undefined"&&Symbol.for!=null){ao[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}}ao.toJSON=_r;ao.toString=Zn;ao.unix=br;ao.valueOf=vr;ao.creationData=Er;ao.eraName=kr;ao.eraNarrow=Pr;ao.eraAbbr=Rr;ao.eraYear=Ir;ao.year=Ue;ao.isLeapYear=Ye;ao.weekYear=Wr;ao.isoWeekYear=Vr;ao.quarter=ao.quarters=Zr;ao.month=ht;ao.daysInMonth=pt;ao.week=ao.weeks=Tt;ao.isoWeek=ao.isoWeeks=Dt;ao.weeksInYear=Yr;ao.weeksInWeekYear=qr;ao.isoWeeksInYear=jr;ao.isoWeeksInISOWeekYear=Ur;ao.date=Qr;ao.day=ao.days=Wt;ao.weekday=Vt;ao.isoWeekday=jt;ao.dayOfYear=Jr;ao.hour=ao.hours=ii;ao.minute=ao.minutes=eo;ao.second=ao.seconds=to;ao.millisecond=ao.milliseconds=no;ao.utcOffset=fn;ao.utc=mn;ao.local=vn;ao.parseZone=bn;ao.hasAlignedHourOffset=yn;ao.isDST=wn;ao.isLocal=_n;ao.isUtcOffset=Sn;ao.isUtc=An;ao.isUTC=An;ao.zoneAbbr=oo;ao.zoneName=so;ao.dates=A("dates accessor is deprecated. Use date instead.",Qr);ao.months=A("months accessor is deprecated. Use month instead",ht);ao.years=A("years accessor is deprecated. Use year instead",Ue);ao.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",gn);ao.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Cn);function lo(e){return Yi(e*1e3)}function co(){return Yi.apply(null,arguments).parseZone()}function uo(e){return e}var ho=k.prototype;ho.calendar=I;ho.longDateFormat=j;ho.invalidDate=Y;ho.ordinal=X;ho.preparse=uo;ho.postformat=uo;ho.relativeTime=Q;ho.pastFuture=J;ho.set=D;ho.eras=Tr;ho.erasParse=Dr;ho.erasConvertYear=Mr;ho.erasAbbrRegex=Nr;ho.erasNameRegex=Or;ho.erasNarrowRegex=Lr;ho.months=at;ho.monthsShort=lt;ho.monthsParse=dt;ho.monthsRegex=gt;ho.monthsShortRegex=ft;ho.week=St;ho.firstDayOfYear=Et;ho.firstDayOfWeek=xt;ho.weekdays=$t;ho.weekdaysMin=Bt;ho.weekdaysShort=Gt;ho.weekdaysParse=zt;ho.weekdaysRegex=Ut;ho.weekdaysShortRegex=Yt;ho.weekdaysMinRegex=qt;ho.isPM=ei;ho.meridiem=ni;function po(e,t,i,n){var r=mi(),o=h().set(n,t);return r[i](o,e)}function fo(e,t,i){if(l(e)){t=e;e=undefined}e=e||"";if(t!=null){return po(e,t,i,"month")}var n,r=[];for(n=0;n<12;n++){r[n]=po(e,n,i,"month")}return r}function go(e,t,i,n){if(typeof e==="boolean"){if(l(t)){i=t;t=undefined}t=t||""}else{t=e;i=t;e=false;if(l(t)){i=t;t=undefined}t=t||""}var r=mi(),o=e?r._week.dow:0,s,a=[];if(i!=null){return po(t,(i+o)%7,n,"day")}for(s=0;s<7;s++){a[s]=po(t,(s+o)%7,n,"day")}return a}function mo(e,t){return fo(e,t,"months")}function vo(e,t){return fo(e,t,"monthsShort")}function bo(e,t,i){return go(e,t,i,"weekdays")}function yo(e,t,i){return go(e,t,i,"weekdaysShort")}function wo(e,t,i){return go(e,t,i,"weekdaysMin")}pi("en",{eras:[{since:"0001-01-01",until:+Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=ke(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+i}});t.lang=A("moment.lang is deprecated. Use moment.locale instead.",pi);t.langData=A("moment.langData is deprecated. Use moment.localeData instead.",mi);var Co=Math.abs;function _o(){var e=this._data;this._milliseconds=Co(this._milliseconds);this._days=Co(this._days);this._months=Co(this._months);e.milliseconds=Co(e.milliseconds);e.seconds=Co(e.seconds);e.minutes=Co(e.minutes);e.hours=Co(e.hours);e.months=Co(e.months);e.years=Co(e.years);return this}function So(e,t,i,n){var r=Tn(t,i);e._milliseconds+=n*r._milliseconds;e._days+=n*r._days;e._months+=n*r._months;return e._bubble()}function Ao(e,t){return So(this,e,t,1)}function xo(e,t){return So(this,e,t,-1)}function Eo(e){if(e<0){return Math.floor(e)}else{return Math.ceil(e)}}function To(){var e=this._milliseconds,t=this._days,i=this._months,n=this._data,r,o,s,a,l;if(!(e>=0&&t>=0&&i>=0||e<=0&&t<=0&&i<=0)){e+=Eo(Mo(i)+t)*864e5;t=0;i=0}n.milliseconds=e%1e3;r=Me(e/1e3);n.seconds=r%60;o=Me(r/60);n.minutes=o%60;s=Me(o/60);n.hours=s%24;t+=Me(s/24);l=Me(Do(t));i+=l;t-=Eo(Mo(l));a=Me(i/12);i%=12;n.days=t;n.months=i;n.years=a;return this}function Do(e){return e*4800/146097}function Mo(e){return e*146097/4800}function ko(e){if(!this.isValid()){return NaN}var t,i,n=this._milliseconds;e=te(e);if(e==="month"||e==="quarter"||e==="year"){t=this._days+n/864e5;i=this._months+Do(t);switch(e){case"month":return i;case"quarter":return i/3;case"year":return i/12}}else{t=this._days+Math.round(Mo(this._months));switch(e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}}function Po(e){return function(){return this.as(e)}}var Ro=Po("ms"),Io=Po("s"),Oo=Po("m"),No=Po("h"),Lo=Po("d"),Fo=Po("w"),$o=Po("M"),Go=Po("Q"),Bo=Po("y"),Ho=Ro;function zo(){return Tn(this)}function Wo(e){e=te(e);return this.isValid()?this[e+"s"]():NaN}function Vo(e){return function(){return this.isValid()?this._data[e]:NaN}}var jo=Vo("milliseconds"),Uo=Vo("seconds"),Yo=Vo("minutes"),qo=Vo("hours"),Ko=Vo("days"),Xo=Vo("months"),Zo=Vo("years");function Qo(){return Me(this.days()/7)}var Jo=Math.round,es={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ts(e,t,i,n,r){return r.relativeTime(t||1,!!i,e,n)}function is(e,t,i,n){var r=Tn(e).abs(),o=Jo(r.as("s")),s=Jo(r.as("m")),a=Jo(r.as("h")),l=Jo(r.as("d")),c=Jo(r.as("M")),d=Jo(r.as("w")),u=Jo(r.as("y")),h=o<=i.ss&&["s",o]||o<i.s&&["ss",o]||s<=1&&["m"]||s<i.m&&["mm",s]||a<=1&&["h"]||a<i.h&&["hh",a]||l<=1&&["d"]||l<i.d&&["dd",l];if(i.w!=null){h=h||d<=1&&["w"]||d<i.w&&["ww",d]}h=h||c<=1&&["M"]||c<i.M&&["MM",c]||u<=1&&["y"]||["yy",u];h[2]=t;h[3]=+e>0;h[4]=n;return ts.apply(null,h)}function ns(e){if(e===undefined){return Jo}if(typeof e==="function"){Jo=e;return true}return false}function rs(e,t){if(es[e]===undefined){return false}if(t===undefined){return es[e]}es[e]=t;if(e==="s"){es.ss=t-1}return true}function os(e,t){if(!this.isValid()){return this.localeData().invalidDate()}var i=false,n=es,r,o;if(typeof e==="object"){t=e;e=false}if(typeof e==="boolean"){i=e}if(typeof t==="object"){n=Object.assign({},es,t);if(t.s!=null&&t.ss==null){n.ss=t.s-1}}r=this.localeData();o=is(this,!i,n,r);if(i){o=r.pastFuture(+this,o)}return r.postformat(o)}var ss=Math.abs;function as(e){return(e>0)-(e<0)||+e}function ls(){if(!this.isValid()){return this.localeData().invalidDate()}var e=ss(this._milliseconds)/1e3,t=ss(this._days),i=ss(this._months),n,r,o,s,a=this.asSeconds(),l,c,d,u;if(!a){return"P0D"}n=Me(e/60);r=Me(n/60);e%=60;n%=60;o=Me(i/12);i%=12;s=e?e.toFixed(3).replace(/\.?0+$/,""):"";l=a<0?"-":"";c=as(this._months)!==as(a)?"-":"";d=as(this._days)!==as(a)?"-":"";u=as(this._milliseconds)!==as(a)?"-":"";return l+"P"+(o?c+o+"Y":"")+(i?c+i+"M":"")+(t?d+t+"D":"")+(r||n||e?"T":"")+(r?u+r+"H":"")+(n?u+n+"M":"")+(e?u+s+"S":"")}var cs=on.prototype;cs.isValid=nn;cs.abs=_o;cs.add=Ao;cs.subtract=xo;cs.as=ko;cs.asMilliseconds=Ro;cs.asSeconds=Io;cs.asMinutes=Oo;cs.asHours=No;cs.asDays=Lo;cs.asWeeks=Fo;cs.asMonths=$o;cs.asQuarters=Go;cs.asYears=Bo;cs.valueOf=Ho;cs._bubble=To;cs.clone=zo;cs.get=Wo;cs.milliseconds=jo;cs.seconds=Uo;cs.minutes=Yo;cs.hours=qo;cs.days=Ko;cs.weeks=Qo;cs.months=Xo;cs.years=Zo;cs.humanize=os;cs.toISOString=ls;cs.toString=ls;cs.toJSON=ls;cs.locale=or;cs.localeData=ar;cs.toIsoString=A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ls);cs.lang=sr;G("X",0,0,"unix");G("x",0,0,"valueOf");xe("x",ve);xe("X",we);Re("X",(function(e,t,i){i._d=new Date(parseFloat(e)*1e3)}));Re("x",(function(e,t,i){i._d=new Date(ke(e))}));t.version="2.30.1";i(Yi);t.fn=ao;t.min=Zi;t.max=Qi;t.now=Ji;t.utc=h;t.unix=lo;t.months=mo;t.isDate=c;t.locale=pi;t.invalid=v;t.duration=Tn;t.isMoment=_;t.weekdays=bo;t.parseZone=co;t.localeData=mi;t.isDuration=sn;t.monthsShort=vo;t.weekdaysMin=wo;t.defineLocale=fi;t.updateLocale=gi;t.locales=vi;t.weekdaysShort=yo;t.normalizeUnits=te;t.relativeTimeRounding=ns;t.relativeTimeThreshold=rs;t.calendarFormat=Bn;t.prototype=ao;t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return t}));(function(e,t){"use strict";if(typeof module==="object"&&module.exports){module.exports=t(require("moment"))}else if(typeof define==="function"&&define.amd){define(["moment"],t)}else{t(e.moment)}})(this,(function(e){"use strict";if(e.version===undefined&&e.default){e=e.default}var t="0.5.45",i={},n={},r={},o={},s={},a;if(!e||typeof e.version!=="string"){H("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/")}var l=e.version.split("."),c=+l[0],d=+l[1];if(c<2||c===2&&d<6){H("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+e.version+". See momentjs.com")}function u(e){if(e>96){return e-87}else if(e>64){return e-29}return e-48}function h(e){var t=0,i=e.split("."),n=i[0],r=i[1]||"",o=1,s,a=0,l=1;if(e.charCodeAt(0)===45){t=1;l=-1}for(t;t<n.length;t++){s=u(n.charCodeAt(t));a=60*a+s}for(t=0;t<r.length;t++){o=o/60;s=u(r.charCodeAt(t));a+=s*o}return a*l}function p(e){for(var t=0;t<e.length;t++){e[t]=h(e[t])}}function f(e,t){for(var i=0;i<t;i++){e[i]=Math.round((e[i-1]||0)+e[i]*6e4)}e[t-1]=Infinity}function g(e,t){var i=[],n;for(n=0;n<t.length;n++){i[n]=e[t[n]]}return i}function m(e){var t=e.split("|"),i=t[2].split(" "),n=t[3].split(""),r=t[4].split(" ");p(i);p(n);p(r);f(r,n.length);return{name:t[0],abbrs:g(t[1].split(" "),n),offsets:g(i,n),untils:r,population:t[5]|0}}function v(e){if(e){this._set(m(e))}}function b(e,t){var i=t.length;if(e<t[0]){return 0}else if(i>1&&t[i-1]===Infinity&&e>=t[i-2]){return i-1}else if(e>=t[i-1]){return-1}var n;var r=0;var o=i-1;while(o-r>1){n=Math.floor((r+o)/2);if(t[n]<=e){r=n}else{o=n}}return o}v.prototype={_set:function(e){this.name=e.name;this.abbrs=e.abbrs;this.untils=e.untils;this.offsets=e.offsets;this.population=e.population},_index:function(e){var t=+e,i=this.untils,n;n=b(t,i);if(n>=0){return n}},countries:function(){var e=this.name;return Object.keys(r).filter((function(t){return r[t].zones.indexOf(e)!==-1}))},parse:function(e){var t=+e,i=this.offsets,n=this.untils,r=n.length-1,o,s,a,l;for(l=0;l<r;l++){o=i[l];s=i[l+1];a=i[l?l-1:l];if(o<s&&z.moveAmbiguousForward){o=s}else if(o>a&&z.moveInvalidForward){o=a}if(t<n[l]-o*6e4){return i[l]}}return i[r]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){H("zone.offset has been deprecated in favor of zone.utcOffset");return this.offsets[this._index(e)]},utcOffset:function(e){return this.offsets[this._index(e)]}};function y(e,t){this.name=e;this.zones=t}function w(e){var t=e.toTimeString();var i=t.match(/\([a-z ]+\)/i);if(i&&i[0]){i=i[0].match(/[A-Z]/g);i=i?i.join(""):undefined}else{i=t.match(/[A-Z]{3,5}/g);i=i?i[0]:undefined}if(i==="GMT"){i=undefined}this.at=+e;this.abbr=i;this.offset=e.getTimezoneOffset()}function C(e){this.zone=e;this.offsetScore=0;this.abbrScore=0}C.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.utcOffset(e.at)-e.offset);if(this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr){this.abbrScore++}};function _(e,t){var i,n;while(n=((t.at-e.at)/12e4|0)*6e4){i=new w(new Date(e.at+n));if(i.offset===e.offset){e=i}else{t=i}}return e}function S(){var e=(new Date).getFullYear()-2,t=new w(new Date(e,0,1)),i=t.offset,n=[t],r,o,s,a;for(a=1;a<48;a++){s=new Date(e,a,1).getTimezoneOffset();if(s!==i){o=new w(new Date(e,a,1));r=_(t,o);n.push(r);n.push(new w(new Date(r.at+6e4)));t=o;i=s}}for(a=0;a<4;a++){n.push(new w(new Date(e+a,0,1)));n.push(new w(new Date(e+a,6,1)))}return n}function A(e,t){if(e.offsetScore!==t.offsetScore){return e.offsetScore-t.offsetScore}if(e.abbrScore!==t.abbrScore){return e.abbrScore-t.abbrScore}if(e.zone.population!==t.zone.population){return t.zone.population-e.zone.population}return t.zone.name.localeCompare(e.zone.name)}function x(e,t){var i,n;p(t);for(i=0;i<t.length;i++){n=t[i];s[n]=s[n]||{};s[n][e]=true}}function E(e){var t=e.length,i={},n=[],r={},a,l,c,d;for(a=0;a<t;a++){c=e[a].offset;if(r.hasOwnProperty(c)){continue}d=s[c]||{};for(l in d){if(d.hasOwnProperty(l)){i[l]=true}}r[c]=true}for(a in i){if(i.hasOwnProperty(a)){n.push(o[a])}}return n}function T(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e&&e.length>3){var t=o[M(e)];if(t){return t}H("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(e){}var i=S(),n=i.length,r=E(i),s=[],a,l,c;for(l=0;l<r.length;l++){a=new C(P(r[l]),n);for(c=0;c<n;c++){a.scoreOffsetAt(i[c])}s.push(a)}s.sort(A);return s.length>0?s[0].zone.name:undefined}function D(e){if(!a||e){a=T()}return a}function M(e){return(e||"").toLowerCase().replace(/\//g,"_")}function k(e){var t,n,r,s;if(typeof e==="string"){e=[e]}for(t=0;t<e.length;t++){r=e[t].split("|");n=r[0];s=M(n);i[s]=e[t];o[s]=n;x(s,r[2].split(" "))}}function P(e,t){e=M(e);var r=i[e];var s;if(r instanceof v){return r}if(typeof r==="string"){r=new v(r);i[e]=r;return r}if(n[e]&&t!==P&&(s=P(n[e],P))){r=i[e]=new v;r._set(s);r.name=o[e];return r}return null}function R(){var e,t=[];for(e in o){if(o.hasOwnProperty(e)&&(i[e]||i[n[e]])&&o[e]){t.push(o[e])}}return t.sort()}function I(){return Object.keys(r)}function O(e){var t,i,r,s;if(typeof e==="string"){e=[e]}for(t=0;t<e.length;t++){i=e[t].split("|");r=M(i[0]);s=M(i[1]);n[r]=s;o[r]=i[0];n[s]=r;o[s]=i[1]}}function N(e){var t,i,n,o;if(!e||!e.length)return;for(t=0;t<e.length;t++){o=e[t].split("|");i=o[0].toUpperCase();n=o[1].split(" ");r[i]=new y(i,n)}}function L(e){e=e.toUpperCase();return r[e]||null}function F(e,t){e=L(e);if(!e)return null;var i=e.zones.sort();if(t){return i.map((function(e){var t=P(e);return{name:e,offset:t.utcOffset(new Date)}}))}return i}function $(e){k(e.zones);O(e.links);N(e.countries);z.dataVersion=e.version}function G(e){if(!G.didShowError){G.didShowError=true;H("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")}return!!P(e)}function B(e){var t=e._f==="X"||e._f==="x";return!!(e._a&&e._tzm===undefined&&!t)}function H(e){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(e)}}function z(t){var i=Array.prototype.slice.call(arguments,0,-1),n=arguments[arguments.length-1],r=e.utc.apply(null,i),o;if(!e.isMoment(t)&&B(r)&&(o=P(n))){r.add(o.parse(r),"minutes")}r.tz(n);return r}z.version=t;z.dataVersion="";z._zones=i;z._links=n;z._names=o;z._countries=r;z.add=k;z.link=O;z.load=$;z.zone=P;z.zoneExists=G;z.guess=D;z.names=R;z.Zone=v;z.unpack=m;z.unpackBase60=h;z.needsOffset=B;z.moveInvalidForward=true;z.moveAmbiguousForward=false;z.countries=I;z.zonesForCountry=F;var W=e.fn;e.tz=z;e.defaultZone=null;e.updateOffset=function(t,i){var n=e.defaultZone,r;if(t._z===undefined){if(n&&B(t)&&!t._isUTC&&t.isValid()){t._d=e.utc(t._a)._d;t.utc().add(n.parse(t),"minutes")}t._z=n}if(t._z){r=t._z.utcOffset(t);if(Math.abs(r)<16){r=r/60}if(t.utcOffset!==undefined){var o=t._z;t.utcOffset(-r,i);t._z=o}else{t.zone(r,i)}}};W.tz=function(t,i){if(t){if(typeof t!=="string"){throw new Error("Time zone name must be a string, got "+t+" ["+typeof t+"]")}this._z=P(t);if(this._z){e.updateOffset(this,i)}else{H("Moment Timezone has no data for "+t+". See http://momentjs.com/timezone/docs/#/data-loading/.")}return this}if(this._z){return this._z.name}};function V(e){return function(){if(this._z){return this._z.abbr(this)}return e.call(this)}}function j(e){return function(){this._z=null;return e.apply(this,arguments)}}function U(e){return function(){if(arguments.length>0)this._z=null;return e.apply(this,arguments)}}W.zoneName=V(W.zoneName);W.zoneAbbr=V(W.zoneAbbr);W.utc=j(W.utc);W.local=j(W.local);W.utcOffset=U(W.utcOffset);e.tz.setDefault=function(t){if(c<2||c===2&&d<9){H("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+e.version+".")}e.defaultZone=t?P(t):null;return e};var Y=e.momentProperties;if(Object.prototype.toString.call(Y)==="[object Array]"){Y.push("_z");Y.push("_a")}else if(Y){Y._z=null}$({version:"2024a",zones:["Africa/Abidjan|GMT|0|0||48e5","Africa/Nairobi|EAT|-30|0||47e5","Africa/Algiers|CET|-10|0||26e5","Africa/Lagos|WAT|-10|0||17e6","Africa/Khartoum|CAT|-20|0||51e5","Africa/Cairo|EET EEST|-20 -30|010101010101010|29NW0 1cL0 1cN0 1fz0 1a10 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0|15e6","Africa/Casablanca|+01 +00|-10 0|010101010101010101010101|208q0 e00 2600 gM0 2600 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0 2600 e00 2600|32e5","Europe/Paris|CET CEST|-10 -20|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|11e6","Africa/Johannesburg|SAST|-20|0||84e5","Africa/Juba|EAT CAT|-30 -20|01|24nx0|","Africa/Sao_Tome|WAT GMT|-10 0|01|1XiN0|","Africa/Tripoli|EET|-20|0||11e5","America/Adak|HST HDT|a0 90|01010101010101010101010|1XKc0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|326","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1XKb0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|30e4","America/Santo_Domingo|AST|40|0||29e5","America/Fortaleza|-03|30|0||34e5","America/Asuncion|-03 -04|30 40|01010101010101010101010|1XPD0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0|28e5","America/Panama|EST|50|0||15e5","America/Mexico_City|CST CDT|60 50|010101010|1XVk0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|20e6","America/Managua|CST|60|0||22e5","America/Caracas|-04|40|0||29e5","America/Lima|-05|50|0||11e6","America/Denver|MST MDT|70 60|01010101010101010101010|1XK90 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|26e5","America/Campo_Grande|-03 -04|30 40|01|1XBD0|77e4","America/Chicago|CST CDT|60 50|01010101010101010101010|1XK80 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|92e5","America/Chihuahua|MST MDT CST|70 60 60|010101012|1XVl0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|81e4","America/Ciudad_Juarez|MST MDT CST|70 60 60|010101012010101010101010|1XK90 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1wn0 cm0 EP0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|","America/Phoenix|MST|70|0||42e5","America/Whitehorse|PST PDT MST|80 70 70|01012|1XKa0 1zb0 Op0 1z90|23e3","America/New_York|EST EDT|50 40|01010101010101010101010|1XK70 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|21e6","America/Los_Angeles|PST PDT|80 70|01010101010101010101010|1XKa0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|15e6","America/Halifax|AST ADT|40 30|01010101010101010101010|1XK60 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|39e4","America/Godthab|-03 -02 -01|30 20 10|0101010101212121212121|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 2so0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|17e3","America/Havana|CST CDT|50 40|01010101010101010101010|1XK50 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0|21e5","America/Mazatlan|MST MDT|70 60|010101010|1XVl0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|44e4","America/Metlakatla|PST AKST AKDT|80 90 80|012121212121212121212121|1Xqy0 jB0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|14e2","America/Miquelon|-03 -02|30 20|01010101010101010101010|1XK50 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|61e2","America/Noronha|-02|20|0||30e2","America/Ojinaga|MST MDT CST CDT|70 60 60 50|01010101232323232323232|1XK90 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1wn0 Rc0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|23e3","America/Santiago|-03 -04|30 40|01010101010101010101010|1XVf0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0|62e5","America/Sao_Paulo|-02 -03|20 30|01|1XBC0|20e6","America/Scoresbysund|-01 +00 -02|10 0 20|0101010101020202020202|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 2pA0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|452","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1XK5u 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0|11e4","Antarctica/Casey|+11 +08|-b0 -80|0101010101|1XME0 1kr0 12l0 1o01 14kX 1lf1 14kX 1lf1 13bX|10","Asia/Bangkok|+07|-70|0||15e6","Asia/Vladivostok|+10|-a0|0||60e4","Australia/Sydney|AEDT AEST|-b0 -a0|01010101010101010101010|1XV40 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0|40e5","Asia/Tashkent|+05|-50|0||23e5","Pacific/Auckland|NZDT NZST|-d0 -c0|01010101010101010101010|1XV20 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0|14e5","Europe/Istanbul|+03|-30|0||13e6","Antarctica/Troll|+00 +02|0 -20|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|40","Antarctica/Vostok|+07 +05|-70 -50|01|2bnv0|25","Asia/Almaty|+06 +05|-60 -50|01|2bR60|15e5","Asia/Amman|EET EEST +03|-20 -30 -30|010101012|1XRy0 1o00 11A0 1qM0 WM0 1qM0 LA0 1C00|25e5","Asia/Kamchatka|+12|-c0|0||18e4","Asia/Dubai|+04|-40|0||39e5","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1XSm0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0|22e5","Asia/Dhaka|+06|-60|0||16e6","Asia/Kuala_Lumpur|+08|-80|0||71e5","Asia/Kolkata|IST|-5u|0||15e6","Asia/Chita|+09|-90|0||33e4","Asia/Shanghai|CST|-80|0||23e6","Asia/Colombo|+0530|-5u|0||22e5","Asia/Damascus|EET EEST +03|-20 -30 -30|010101012|1XRy0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0|26e5","Europe/Athens|EET EEST|-20 -30|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|35e5","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1XRy0 1on0 11B0 1o00 11A0 1qo0 XA0 1qp0 1cN0 1cL0 1a10 1fz0 17d0 1in0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0|18e5","Asia/Hong_Kong|HKT|-80|0||73e5","Asia/Jakarta|WIB|-70|0||31e6","Asia/Jayapura|WIT|-90|0||26e4","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1XRA0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0|81e4","Asia/Kabul|+0430|-4u|0||46e5","Asia/Karachi|PKT|-50|0||24e6","Asia/Kathmandu|+0545|-5J|0||12e5","Asia/Sakhalin|+11|-b0|0||58e4","Asia/Makassar|WITA|-80|0||15e5","Asia/Manila|PST|-80|0||24e6","Asia/Seoul|KST|-90|0||23e6","Asia/Rangoon|+0630|-6u|0||48e5","Asia/Tehran|+0330 +0430|-3u -4u|010101010|1XOIu 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0|14e6","Asia/Tokyo|JST|-90|0||38e6","Atlantic/Azores|-01 +00|10 0|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|25e4","Europe/Lisbon|WET WEST|0 -10|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|27e5","Atlantic/Cape_Verde|-01|10|0||50e4","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1XV4u 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0|11e5","Australia/Brisbane|AEST|-a0|0||20e5","Australia/Darwin|ACST|-9u|0||12e4","Australia/Eucla|+0845|-8J|0||368","Australia/Lord_Howe|+11 +1030|-b0 -au|01010101010101010101010|1XV30 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1fzu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu|347","Australia/Perth|AWST|-80|0||18e5","Pacific/Easter|-05 -06|50 60|01010101010101010101010|1XVf0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0|30e2","Europe/Dublin|GMT IST|0 -10|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|12e5","Etc/GMT-1|+01|-10|0||","Pacific/Tongatapu|+13|-d0|0||75e3","Pacific/Kiritimati|+14|-e0|0||51e2","Etc/GMT-2|+02|-20|0||","Pacific/Tahiti|-10|a0|0||18e4","Pacific/Niue|-11|b0|0||12e2","Etc/GMT+12|-12|c0|0||","Pacific/Galapagos|-06|60|0||25e3","Etc/GMT+7|-07|70|0||","Pacific/Pitcairn|-08|80|0||56","Pacific/Gambier|-09|90|0||125","Etc/UTC|UTC|0|0||","Europe/London|GMT BST|0 -10|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|10e6","Europe/Chisinau|EET EEST|-20 -30|01010101010101010101010|1XSo0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|67e4","Europe/Moscow|MSK|-30|0||16e6","Europe/Volgograd|+04 MSK|-40 -30|01|249a0|10e5","Pacific/Honolulu|HST|a0|0||37e4","MET|MET MEST|-10 -20|01010101010101010101010|1XSp0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0|","Pacific/Chatham|+1345 +1245|-dJ -cJ|01010101010101010101010|1XV20 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0|600","Pacific/Apia|+14 +13|-e0 -d0|010101|1XV20 1a00 1fA0 1a00 1fA0|37e3","Pacific/Fiji|+13 +12|-d0 -c0|010101|1Xnq0 20o0 pc0 2hc0 bc0|88e4","Pacific/Guam|ChST|-a0|0||17e4","Pacific/Marquesas|-0930|9u|0||86e2","Pacific/Pago_Pago|SST|b0|0||37e2","Pacific/Norfolk|+11 +12|-b0 -c0|0101010101010101010101|219P0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0|25e4"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Algiers|Africa/Tunis","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Khartoum|Africa/Blantyre","Africa/Khartoum|Africa/Bujumbura","Africa/Khartoum|Africa/Gaborone","Africa/Khartoum|Africa/Harare","Africa/Khartoum|Africa/Kigali","Africa/Khartoum|Africa/Lubumbashi","Africa/Khartoum|Africa/Lusaka","Africa/Khartoum|Africa/Maputo","Africa/Khartoum|Africa/Windhoek","Africa/Lagos|Africa/Bangui","Africa/Lagos|Africa/Brazzaville","Africa/Lagos|Africa/Douala","Africa/Lagos|Africa/Kinshasa","Africa/Lagos|Africa/Libreville","Africa/Lagos|Africa/Luanda","Africa/Lagos|Africa/Malabo","Africa/Lagos|Africa/Ndjamena","Africa/Lagos|Africa/Niamey","Africa/Lagos|Africa/Porto-Novo","Africa/Nairobi|Africa/Addis_Ababa","Africa/Nairobi|Africa/Asmara","Africa/Nairobi|Africa/Asmera","Africa/Nairobi|Africa/Dar_es_Salaam","Africa/Nairobi|Africa/Djibouti","Africa/Nairobi|Africa/Kampala","Africa/Nairobi|Africa/Mogadishu","Africa/Nairobi|Indian/Antananarivo","Africa/Nairobi|Indian/Comoro","Africa/Nairobi|Indian/Mayotte","Africa/Tripoli|Europe/Kaliningrad","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Campo_Grande|America/Cuiaba","America/Caracas|America/Boa_Vista","America/Caracas|America/Guyana","America/Caracas|America/La_Paz","America/Caracas|America/Manaus","America/Caracas|America/Porto_Velho","America/Caracas|Brazil/West","America/Caracas|Etc/GMT+4","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Beulah","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Denver|America/Boise","America/Denver|America/Cambridge_Bay","America/Denver|America/Edmonton","America/Denver|America/Inuvik","America/Denver|America/Shiprock","America/Denver|America/Yellowknife","America/Denver|Canada/Mountain","America/Denver|MST7MDT","America/Denver|Navajo","America/Denver|US/Mountain","America/Fortaleza|America/Araguaina","America/Fortaleza|America/Argentina/Buenos_Aires","America/Fortaleza|America/Argentina/Catamarca","America/Fortaleza|America/Argentina/ComodRivadavia","America/Fortaleza|America/Argentina/Cordoba","America/Fortaleza|America/Argentina/Jujuy","America/Fortaleza|America/Argentina/La_Rioja","America/Fortaleza|America/Argentina/Mendoza","America/Fortaleza|America/Argentina/Rio_Gallegos","America/Fortaleza|America/Argentina/Salta","America/Fortaleza|America/Argentina/San_Juan","America/Fortaleza|America/Argentina/San_Luis","America/Fortaleza|America/Argentina/Tucuman","America/Fortaleza|America/Argentina/Ushuaia","America/Fortaleza|America/Bahia","America/Fortaleza|America/Belem","America/Fortaleza|America/Buenos_Aires","America/Fortaleza|America/Catamarca","America/Fortaleza|America/Cayenne","America/Fortaleza|America/Cordoba","America/Fortaleza|America/Jujuy","America/Fortaleza|America/Maceio","America/Fortaleza|America/Mendoza","America/Fortaleza|America/Montevideo","America/Fortaleza|America/Paramaribo","America/Fortaleza|America/Punta_Arenas","America/Fortaleza|America/Recife","America/Fortaleza|America/Rosario","America/Fortaleza|America/Santarem","America/Fortaleza|Antarctica/Palmer","America/Fortaleza|Antarctica/Rothera","America/Fortaleza|Atlantic/Stanley","America/Fortaleza|Etc/GMT+3","America/Godthab|America/Nuuk","America/Halifax|America/Glace_Bay","America/Halifax|America/Goose_Bay","America/Halifax|America/Moncton","America/Halifax|America/Thule","America/Halifax|Atlantic/Bermuda","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/Lima|America/Bogota","America/Lima|America/Eirunepe","America/Lima|America/Guayaquil","America/Lima|America/Porto_Acre","America/Lima|America/Rio_Branco","America/Lima|Brazil/Acre","America/Lima|Etc/GMT+5","America/Los_Angeles|America/Ensenada","America/Los_Angeles|America/Santa_Isabel","America/Los_Angeles|America/Tijuana","America/Los_Angeles|America/Vancouver","America/Los_Angeles|Canada/Pacific","America/Los_Angeles|Mexico/BajaNorte","America/Los_Angeles|PST8PDT","America/Los_Angeles|US/Pacific","America/Managua|America/Belize","America/Managua|America/Costa_Rica","America/Managua|America/El_Salvador","America/Managua|America/Guatemala","America/Managua|America/Regina","America/Managua|America/Swift_Current","America/Managua|America/Tegucigalpa","America/Managua|Canada/Saskatchewan","America/Mazatlan|Mexico/BajaSur","America/Mexico_City|America/Bahia_Banderas","America/Mexico_City|America/Merida","America/Mexico_City|America/Monterrey","America/Mexico_City|Mexico/General","America/New_York|America/Detroit","America/New_York|America/Fort_Wayne","America/New_York|America/Grand_Turk","America/New_York|America/Indiana/Indianapolis","America/New_York|America/Indiana/Marengo","America/New_York|America/Indiana/Petersburg","America/New_York|America/Indiana/Vevay","America/New_York|America/Indiana/Vincennes","America/New_York|America/Indiana/Winamac","America/New_York|America/Indianapolis","America/New_York|America/Iqaluit","America/New_York|America/Kentucky/Louisville","America/New_York|America/Kentucky/Monticello","America/New_York|America/Louisville","America/New_York|America/Montreal","America/New_York|America/Nassau","America/New_York|America/Nipigon","America/New_York|America/Pangnirtung","America/New_York|America/Port-au-Prince","America/New_York|America/Thunder_Bay","America/New_York|America/Toronto","America/New_York|Canada/Eastern","America/New_York|EST5EDT","America/New_York|US/East-Indiana","America/New_York|US/Eastern","America/New_York|US/Michigan","America/Noronha|Atlantic/South_Georgia","America/Noronha|Brazil/DeNoronha","America/Noronha|Etc/GMT+2","America/Panama|America/Atikokan","America/Panama|America/Cancun","America/Panama|America/Cayman","America/Panama|America/Coral_Harbour","America/Panama|America/Jamaica","America/Panama|EST","America/Panama|Jamaica","America/Phoenix|America/Creston","America/Phoenix|America/Dawson_Creek","America/Phoenix|America/Fort_Nelson","America/Phoenix|America/Hermosillo","America/Phoenix|MST","America/Phoenix|US/Arizona","America/Santiago|Chile/Continental","America/Santo_Domingo|America/Anguilla","America/Santo_Domingo|America/Antigua","America/Santo_Domingo|America/Aruba","America/Santo_Domingo|America/Barbados","America/Santo_Domingo|America/Blanc-Sablon","America/Santo_Domingo|America/Curacao","America/Santo_Domingo|America/Dominica","America/Santo_Domingo|America/Grenada","America/Santo_Domingo|America/Guadeloupe","America/Santo_Domingo|America/Kralendijk","America/Santo_Domingo|America/Lower_Princes","America/Santo_Domingo|America/Marigot","America/Santo_Domingo|America/Martinique","America/Santo_Domingo|America/Montserrat","America/Santo_Domingo|America/Port_of_Spain","America/Santo_Domingo|America/Puerto_Rico","America/Santo_Domingo|America/St_Barthelemy","America/Santo_Domingo|America/St_Kitts","America/Santo_Domingo|America/St_Lucia","America/Santo_Domingo|America/St_Thomas","America/Santo_Domingo|America/St_Vincent","America/Santo_Domingo|America/Tortola","America/Santo_Domingo|America/Virgin","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","America/Whitehorse|America/Dawson","America/Whitehorse|Canada/Yukon","Asia/Almaty|Asia/Qostanay","Asia/Bangkok|Antarctica/Davis","Asia/Bangkok|Asia/Barnaul","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Hovd","Asia/Bangkok|Asia/Krasnoyarsk","Asia/Bangkok|Asia/Novokuznetsk","Asia/Bangkok|Asia/Novosibirsk","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Tomsk","Asia/Bangkok|Asia/Vientiane","Asia/Bangkok|Etc/GMT-7","Asia/Bangkok|Indian/Christmas","Asia/Chita|Asia/Dili","Asia/Chita|Asia/Khandyga","Asia/Chita|Asia/Yakutsk","Asia/Chita|Etc/GMT-9","Asia/Chita|Pacific/Palau","Asia/Dhaka|Asia/Bishkek","Asia/Dhaka|Asia/Dacca","Asia/Dhaka|Asia/Kashgar","Asia/Dhaka|Asia/Omsk","Asia/Dhaka|Asia/Thimbu","Asia/Dhaka|Asia/Thimphu","Asia/Dhaka|Asia/Urumqi","Asia/Dhaka|Etc/GMT-6","Asia/Dhaka|Indian/Chagos","Asia/Dubai|Asia/Baku","Asia/Dubai|Asia/Muscat","Asia/Dubai|Asia/Tbilisi","Asia/Dubai|Asia/Yerevan","Asia/Dubai|Etc/GMT-4","Asia/Dubai|Europe/Astrakhan","Asia/Dubai|Europe/Samara","Asia/Dubai|Europe/Saratov","Asia/Dubai|Europe/Ulyanovsk","Asia/Dubai|Indian/Mahe","Asia/Dubai|Indian/Mauritius","Asia/Dubai|Indian/Reunion","Asia/Gaza|Asia/Hebron","Asia/Hong_Kong|Hongkong","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kamchatka|Asia/Anadyr","Asia/Kamchatka|Etc/GMT-12","Asia/Kamchatka|Kwajalein","Asia/Kamchatka|Pacific/Funafuti","Asia/Kamchatka|Pacific/Kwajalein","Asia/Kamchatka|Pacific/Majuro","Asia/Kamchatka|Pacific/Nauru","Asia/Kamchatka|Pacific/Tarawa","Asia/Kamchatka|Pacific/Wake","Asia/Kamchatka|Pacific/Wallis","Asia/Kathmandu|Asia/Katmandu","Asia/Kolkata|Asia/Calcutta","Asia/Kuala_Lumpur|Asia/Brunei","Asia/Kuala_Lumpur|Asia/Choibalsan","Asia/Kuala_Lumpur|Asia/Irkutsk","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Kuala_Lumpur|Asia/Singapore","Asia/Kuala_Lumpur|Asia/Ulaanbaatar","Asia/Kuala_Lumpur|Asia/Ulan_Bator","Asia/Kuala_Lumpur|Etc/GMT-8","Asia/Kuala_Lumpur|Singapore","Asia/Makassar|Asia/Ujung_Pandang","Asia/Rangoon|Asia/Yangon","Asia/Rangoon|Indian/Cocos","Asia/Sakhalin|Asia/Magadan","Asia/Sakhalin|Asia/Srednekolymsk","Asia/Sakhalin|Etc/GMT-11","Asia/Sakhalin|Pacific/Bougainville","Asia/Sakhalin|Pacific/Efate","Asia/Sakhalin|Pacific/Guadalcanal","Asia/Sakhalin|Pacific/Kosrae","Asia/Sakhalin|Pacific/Noumea","Asia/Sakhalin|Pacific/Pohnpei","Asia/Sakhalin|Pacific/Ponape","Asia/Seoul|Asia/Pyongyang","Asia/Seoul|ROK","Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|Asia/Macao","Asia/Shanghai|Asia/Macau","Asia/Shanghai|Asia/Taipei","Asia/Shanghai|PRC","Asia/Shanghai|ROC","Asia/Tashkent|Antarctica/Mawson","Asia/Tashkent|Asia/Aqtau","Asia/Tashkent|Asia/Aqtobe","Asia/Tashkent|Asia/Ashgabat","Asia/Tashkent|Asia/Ashkhabad","Asia/Tashkent|Asia/Atyrau","Asia/Tashkent|Asia/Dushanbe","Asia/Tashkent|Asia/Oral","Asia/Tashkent|Asia/Qyzylorda","Asia/Tashkent|Asia/Samarkand","Asia/Tashkent|Asia/Yekaterinburg","Asia/Tashkent|Etc/GMT-5","Asia/Tashkent|Indian/Kerguelen","Asia/Tashkent|Indian/Maldives","Asia/Tehran|Iran","Asia/Tokyo|Japan","Asia/Vladivostok|Antarctica/DumontDUrville","Asia/Vladivostok|Asia/Ust-Nera","Asia/Vladivostok|Etc/GMT-10","Asia/Vladivostok|Pacific/Chuuk","Asia/Vladivostok|Pacific/Port_Moresby","Asia/Vladivostok|Pacific/Truk","Asia/Vladivostok|Pacific/Yap","Atlantic/Cape_Verde|Etc/GMT+1","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/Lord_Howe|Australia/LHI","Australia/Perth|Australia/West","Australia/Sydney|Antarctica/Macquarie","Australia/Sydney|Australia/ACT","Australia/Sydney|Australia/Canberra","Australia/Sydney|Australia/Currie","Australia/Sydney|Australia/Hobart","Australia/Sydney|Australia/Melbourne","Australia/Sydney|Australia/NSW","Australia/Sydney|Australia/Tasmania","Australia/Sydney|Australia/Victoria","Etc/UTC|Etc/UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UCT","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Athens|Asia/Famagusta","Europe/Athens|Asia/Nicosia","Europe/Athens|EET","Europe/Athens|Europe/Bucharest","Europe/Athens|Europe/Helsinki","Europe/Athens|Europe/Kiev","Europe/Athens|Europe/Kyiv","Europe/Athens|Europe/Mariehamn","Europe/Athens|Europe/Nicosia","Europe/Athens|Europe/Riga","Europe/Athens|Europe/Sofia","Europe/Athens|Europe/Tallinn","Europe/Athens|Europe/Uzhgorod","Europe/Athens|Europe/Vilnius","Europe/Athens|Europe/Zaporozhye","Europe/Chisinau|Europe/Tiraspol","Europe/Dublin|Eire","Europe/Istanbul|Antarctica/Syowa","Europe/Istanbul|Asia/Aden","Europe/Istanbul|Asia/Baghdad","Europe/Istanbul|Asia/Bahrain","Europe/Istanbul|Asia/Istanbul","Europe/Istanbul|Asia/Kuwait","Europe/Istanbul|Asia/Qatar","Europe/Istanbul|Asia/Riyadh","Europe/Istanbul|Etc/GMT-3","Europe/Istanbul|Europe/Minsk","Europe/Istanbul|Turkey","Europe/Lisbon|Atlantic/Canary","Europe/Lisbon|Atlantic/Faeroe","Europe/Lisbon|Atlantic/Faroe","Europe/Lisbon|Atlantic/Madeira","Europe/Lisbon|Portugal","Europe/Lisbon|WET","Europe/London|Europe/Belfast","Europe/London|Europe/Guernsey","Europe/London|Europe/Isle_of_Man","Europe/London|Europe/Jersey","Europe/London|GB","Europe/London|GB-Eire","Europe/Moscow|Europe/Kirov","Europe/Moscow|Europe/Simferopol","Europe/Moscow|W-SU","Europe/Paris|Africa/Ceuta","Europe/Paris|Arctic/Longyearbyen","Europe/Paris|Atlantic/Jan_Mayen","Europe/Paris|CET","Europe/Paris|Europe/Amsterdam","Europe/Paris|Europe/Andorra","Europe/Paris|Europe/Belgrade","Europe/Paris|Europe/Berlin","Europe/Paris|Europe/Bratislava","Europe/Paris|Europe/Brussels","Europe/Paris|Europe/Budapest","Europe/Paris|Europe/Busingen","Europe/Paris|Europe/Copenhagen","Europe/Paris|Europe/Gibraltar","Europe/Paris|Europe/Ljubljana","Europe/Paris|Europe/Luxembourg","Europe/Paris|Europe/Madrid","Europe/Paris|Europe/Malta","Europe/Paris|Europe/Monaco","Europe/Paris|Europe/Oslo","Europe/Paris|Europe/Podgorica","Europe/Paris|Europe/Prague","Europe/Paris|Europe/Rome","Europe/Paris|Europe/San_Marino","Europe/Paris|Europe/Sarajevo","Europe/Paris|Europe/Skopje","Europe/Paris|Europe/Stockholm","Europe/Paris|Europe/Tirane","Europe/Paris|Europe/Vaduz","Europe/Paris|Europe/Vatican","Europe/Paris|Europe/Vienna","Europe/Paris|Europe/Warsaw","Europe/Paris|Europe/Zagreb","Europe/Paris|Europe/Zurich","Europe/Paris|Poland","Pacific/Auckland|Antarctica/McMurdo","Pacific/Auckland|Antarctica/South_Pole","Pacific/Auckland|NZ","Pacific/Chatham|NZ-CHAT","Pacific/Easter|Chile/EasterIsland","Pacific/Galapagos|Etc/GMT+6","Pacific/Gambier|Etc/GMT+9","Pacific/Guam|Pacific/Saipan","Pacific/Honolulu|HST","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Kiritimati|Etc/GMT-14","Pacific/Niue|Etc/GMT+11","Pacific/Pago_Pago|Pacific/Midway","Pacific/Pago_Pago|Pacific/Samoa","Pacific/Pago_Pago|US/Samoa","Pacific/Pitcairn|Etc/GMT+8","Pacific/Tahiti|Etc/GMT+10","Pacific/Tahiti|Pacific/Rarotonga","Pacific/Tongatapu|Etc/GMT-13","Pacific/Tongatapu|Pacific/Enderbury","Pacific/Tongatapu|Pacific/Fakaofo","Pacific/Tongatapu|Pacific/Kanton"],countries:["AD|Europe/Andorra","AE|Asia/Dubai","AF|Asia/Kabul","AG|America/Puerto_Rico America/Antigua","AI|America/Puerto_Rico America/Anguilla","AL|Europe/Tirane","AM|Asia/Yerevan","AO|Africa/Lagos Africa/Luanda","AQ|Antarctica/Casey Antarctica/Davis Antarctica/Mawson Antarctica/Palmer Antarctica/Rothera Antarctica/Troll Antarctica/Vostok Pacific/Auckland Pacific/Port_Moresby Asia/Riyadh Antarctica/McMurdo Antarctica/DumontDUrville Antarctica/Syowa","AR|America/Argentina/Buenos_Aires America/Argentina/Cordoba America/Argentina/Salta America/Argentina/Jujuy America/Argentina/Tucuman America/Argentina/Catamarca America/Argentina/La_Rioja America/Argentina/San_Juan America/Argentina/Mendoza America/Argentina/San_Luis America/Argentina/Rio_Gallegos America/Argentina/Ushuaia","AS|Pacific/Pago_Pago","AT|Europe/Vienna","AU|Australia/Lord_Howe Antarctica/Macquarie Australia/Hobart Australia/Melbourne Australia/Sydney Australia/Broken_Hill Australia/Brisbane Australia/Lindeman Australia/Adelaide Australia/Darwin Australia/Perth Australia/Eucla","AW|America/Puerto_Rico America/Aruba","AX|Europe/Helsinki Europe/Mariehamn","AZ|Asia/Baku","BA|Europe/Belgrade Europe/Sarajevo","BB|America/Barbados","BD|Asia/Dhaka","BE|Europe/Brussels","BF|Africa/Abidjan Africa/Ouagadougou","BG|Europe/Sofia","BH|Asia/Qatar Asia/Bahrain","BI|Africa/Maputo Africa/Bujumbura","BJ|Africa/Lagos Africa/Porto-Novo","BL|America/Puerto_Rico America/St_Barthelemy","BM|Atlantic/Bermuda","BN|Asia/Kuching Asia/Brunei","BO|America/La_Paz","BQ|America/Puerto_Rico America/Kralendijk","BR|America/Noronha America/Belem America/Fortaleza America/Recife America/Araguaina America/Maceio America/Bahia America/Sao_Paulo America/Campo_Grande America/Cuiaba America/Santarem America/Porto_Velho America/Boa_Vista America/Manaus America/Eirunepe America/Rio_Branco","BS|America/Toronto America/Nassau","BT|Asia/Thimphu","BW|Africa/Maputo Africa/Gaborone","BY|Europe/Minsk","BZ|America/Belize","CA|America/St_Johns America/Halifax America/Glace_Bay America/Moncton America/Goose_Bay America/Toronto America/Iqaluit America/Winnipeg America/Resolute America/Rankin_Inlet America/Regina America/Swift_Current America/Edmonton America/Cambridge_Bay America/Inuvik America/Dawson_Creek America/Fort_Nelson America/Whitehorse America/Dawson America/Vancouver America/Panama America/Puerto_Rico America/Phoenix America/Blanc-Sablon America/Atikokan America/Creston","CC|Asia/Yangon Indian/Cocos","CD|Africa/Maputo Africa/Lagos Africa/Kinshasa Africa/Lubumbashi","CF|Africa/Lagos Africa/Bangui","CG|Africa/Lagos Africa/Brazzaville","CH|Europe/Zurich","CI|Africa/Abidjan","CK|Pacific/Rarotonga","CL|America/Santiago America/Punta_Arenas Pacific/Easter","CM|Africa/Lagos Africa/Douala","CN|Asia/Shanghai Asia/Urumqi","CO|America/Bogota","CR|America/Costa_Rica","CU|America/Havana","CV|Atlantic/Cape_Verde","CW|America/Puerto_Rico America/Curacao","CX|Asia/Bangkok Indian/Christmas","CY|Asia/Nicosia Asia/Famagusta","CZ|Europe/Prague","DE|Europe/Zurich Europe/Berlin Europe/Busingen","DJ|Africa/Nairobi Africa/Djibouti","DK|Europe/Berlin Europe/Copenhagen","DM|America/Puerto_Rico America/Dominica","DO|America/Santo_Domingo","DZ|Africa/Algiers","EC|America/Guayaquil Pacific/Galapagos","EE|Europe/Tallinn","EG|Africa/Cairo","EH|Africa/El_Aaiun","ER|Africa/Nairobi Africa/Asmara","ES|Europe/Madrid Africa/Ceuta Atlantic/Canary","ET|Africa/Nairobi Africa/Addis_Ababa","FI|Europe/Helsinki","FJ|Pacific/Fiji","FK|Atlantic/Stanley","FM|Pacific/Kosrae Pacific/Port_Moresby Pacific/Guadalcanal Pacific/Chuuk Pacific/Pohnpei","FO|Atlantic/Faroe","FR|Europe/Paris","GA|Africa/Lagos Africa/Libreville","GB|Europe/London","GD|America/Puerto_Rico America/Grenada","GE|Asia/Tbilisi","GF|America/Cayenne","GG|Europe/London Europe/Guernsey","GH|Africa/Abidjan Africa/Accra","GI|Europe/Gibraltar","GL|America/Nuuk America/Danmarkshavn America/Scoresbysund America/Thule","GM|Africa/Abidjan Africa/Banjul","GN|Africa/Abidjan Africa/Conakry","GP|America/Puerto_Rico America/Guadeloupe","GQ|Africa/Lagos Africa/Malabo","GR|Europe/Athens","GS|Atlantic/South_Georgia","GT|America/Guatemala","GU|Pacific/Guam","GW|Africa/Bissau","GY|America/Guyana","HK|Asia/Hong_Kong","HN|America/Tegucigalpa","HR|Europe/Belgrade Europe/Zagreb","HT|America/Port-au-Prince","HU|Europe/Budapest","ID|Asia/Jakarta Asia/Pontianak Asia/Makassar Asia/Jayapura","IE|Europe/Dublin","IL|Asia/Jerusalem","IM|Europe/London Europe/Isle_of_Man","IN|Asia/Kolkata","IO|Indian/Chagos","IQ|Asia/Baghdad","IR|Asia/Tehran","IS|Africa/Abidjan Atlantic/Reykjavik","IT|Europe/Rome","JE|Europe/London Europe/Jersey","JM|America/Jamaica","JO|Asia/Amman","JP|Asia/Tokyo","KE|Africa/Nairobi","KG|Asia/Bishkek","KH|Asia/Bangkok Asia/Phnom_Penh","KI|Pacific/Tarawa Pacific/Kanton Pacific/Kiritimati","KM|Africa/Nairobi Indian/Comoro","KN|America/Puerto_Rico America/St_Kitts","KP|Asia/Pyongyang","KR|Asia/Seoul","KW|Asia/Riyadh Asia/Kuwait","KY|America/Panama America/Cayman","KZ|Asia/Almaty Asia/Qyzylorda Asia/Qostanay Asia/Aqtobe Asia/Aqtau Asia/Atyrau Asia/Oral","LA|Asia/Bangkok Asia/Vientiane","LB|Asia/Beirut","LC|America/Puerto_Rico America/St_Lucia","LI|Europe/Zurich Europe/Vaduz","LK|Asia/Colombo","LR|Africa/Monrovia","LS|Africa/Johannesburg Africa/Maseru","LT|Europe/Vilnius","LU|Europe/Brussels Europe/Luxembourg","LV|Europe/Riga","LY|Africa/Tripoli","MA|Africa/Casablanca","MC|Europe/Paris Europe/Monaco","MD|Europe/Chisinau","ME|Europe/Belgrade Europe/Podgorica","MF|America/Puerto_Rico America/Marigot","MG|Africa/Nairobi Indian/Antananarivo","MH|Pacific/Tarawa Pacific/Kwajalein Pacific/Majuro","MK|Europe/Belgrade Europe/Skopje","ML|Africa/Abidjan Africa/Bamako","MM|Asia/Yangon","MN|Asia/Ulaanbaatar Asia/Hovd Asia/Choibalsan","MO|Asia/Macau","MP|Pacific/Guam Pacific/Saipan","MQ|America/Martinique","MR|Africa/Abidjan Africa/Nouakchott","MS|America/Puerto_Rico America/Montserrat","MT|Europe/Malta","MU|Indian/Mauritius","MV|Indian/Maldives","MW|Africa/Maputo Africa/Blantyre","MX|America/Mexico_City America/Cancun America/Merida America/Monterrey America/Matamoros America/Chihuahua America/Ciudad_Juarez America/Ojinaga America/Mazatlan America/Bahia_Banderas America/Hermosillo America/Tijuana","MY|Asia/Kuching Asia/Singapore Asia/Kuala_Lumpur","MZ|Africa/Maputo","NA|Africa/Windhoek","NC|Pacific/Noumea","NE|Africa/Lagos Africa/Niamey","NF|Pacific/Norfolk","NG|Africa/Lagos","NI|America/Managua","NL|Europe/Brussels Europe/Amsterdam","NO|Europe/Berlin Europe/Oslo","NP|Asia/Kathmandu","NR|Pacific/Nauru","NU|Pacific/Niue","NZ|Pacific/Auckland Pacific/Chatham","OM|Asia/Dubai Asia/Muscat","PA|America/Panama","PE|America/Lima","PF|Pacific/Tahiti Pacific/Marquesas Pacific/Gambier","PG|Pacific/Port_Moresby Pacific/Bougainville","PH|Asia/Manila","PK|Asia/Karachi","PL|Europe/Warsaw","PM|America/Miquelon","PN|Pacific/Pitcairn","PR|America/Puerto_Rico","PS|Asia/Gaza Asia/Hebron","PT|Europe/Lisbon Atlantic/Madeira Atlantic/Azores","PW|Pacific/Palau","PY|America/Asuncion","QA|Asia/Qatar","RE|Asia/Dubai Indian/Reunion","RO|Europe/Bucharest","RS|Europe/Belgrade","RU|Europe/Kaliningrad Europe/Moscow Europe/Simferopol Europe/Kirov Europe/Volgograd Europe/Astrakhan Europe/Saratov Europe/Ulyanovsk Europe/Samara Asia/Yekaterinburg Asia/Omsk Asia/Novosibirsk Asia/Barnaul Asia/Tomsk Asia/Novokuznetsk Asia/Krasnoyarsk Asia/Irkutsk Asia/Chita Asia/Yakutsk Asia/Khandyga Asia/Vladivostok Asia/Ust-Nera Asia/Magadan Asia/Sakhalin Asia/Srednekolymsk Asia/Kamchatka Asia/Anadyr","RW|Africa/Maputo Africa/Kigali","SA|Asia/Riyadh","SB|Pacific/Guadalcanal","SC|Asia/Dubai Indian/Mahe","SD|Africa/Khartoum","SE|Europe/Berlin Europe/Stockholm","SG|Asia/Singapore","SH|Africa/Abidjan Atlantic/St_Helena","SI|Europe/Belgrade Europe/Ljubljana","SJ|Europe/Berlin Arctic/Longyearbyen","SK|Europe/Prague Europe/Bratislava","SL|Africa/Abidjan Africa/Freetown","SM|Europe/Rome Europe/San_Marino","SN|Africa/Abidjan Africa/Dakar","SO|Africa/Nairobi Africa/Mogadishu","SR|America/Paramaribo","SS|Africa/Juba","ST|Africa/Sao_Tome","SV|America/El_Salvador","SX|America/Puerto_Rico America/Lower_Princes","SY|Asia/Damascus","SZ|Africa/Johannesburg Africa/Mbabane","TC|America/Grand_Turk","TD|Africa/Ndjamena","TF|Asia/Dubai Indian/Maldives Indian/Kerguelen","TG|Africa/Abidjan Africa/Lome","TH|Asia/Bangkok","TJ|Asia/Dushanbe","TK|Pacific/Fakaofo","TL|Asia/Dili","TM|Asia/Ashgabat","TN|Africa/Tunis","TO|Pacific/Tongatapu","TR|Europe/Istanbul","TT|America/Puerto_Rico America/Port_of_Spain","TV|Pacific/Tarawa Pacific/Funafuti","TW|Asia/Taipei","TZ|Africa/Nairobi Africa/Dar_es_Salaam","UA|Europe/Simferopol Europe/Kyiv","UG|Africa/Nairobi Africa/Kampala","UM|Pacific/Pago_Pago Pacific/Tarawa Pacific/Midway Pacific/Wake","US|America/New_York America/Detroit America/Kentucky/Louisville America/Kentucky/Monticello America/Indiana/Indianapolis America/Indiana/Vincennes America/Indiana/Winamac America/Indiana/Marengo America/Indiana/Petersburg America/Indiana/Vevay America/Chicago America/Indiana/Tell_City America/Indiana/Knox America/Menominee America/North_Dakota/Center America/North_Dakota/New_Salem America/North_Dakota/Beulah America/Denver America/Boise America/Phoenix America/Los_Angeles America/Anchorage America/Juneau America/Sitka America/Metlakatla America/Yakutat America/Nome America/Adak Pacific/Honolulu","UY|America/Montevideo","UZ|Asia/Samarkand Asia/Tashkent","VA|Europe/Rome Europe/Vatican","VC|America/Puerto_Rico America/St_Vincent","VE|America/Caracas","VG|America/Puerto_Rico America/Tortola","VI|America/Puerto_Rico America/St_Thomas","VN|Asia/Bangkok Asia/Ho_Chi_Minh","VU|Pacific/Efate","WF|Pacific/Tarawa Pacific/Wallis","WS|Pacific/Apia","YE|Asia/Riyadh Asia/Aden","YT|Africa/Nairobi Indian/Mayotte","ZA|Africa/Johannesburg","ZM|Africa/Maputo Africa/Lusaka","ZW|Africa/Maputo Africa/Harare"]});return e}));(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):(e=e||self,e.PerfectScrollbar=t())})(this,(function(){"use strict";function e(e){return getComputedStyle(e)}function t(e,t){for(var i in t){var n=t[i];if(typeof n==="number"){n=n+"px"}e.style[i]=n}return e}function i(e){var t=document.createElement("div");t.className=e;return t}var n=typeof Element!=="undefined"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function r(e,t){if(!n){throw new Error("No element matching method supported")}return n.call(e,t)}function o(e){if(e.remove){e.remove()}else{if(e.parentNode){e.parentNode.removeChild(e)}}}function s(e,t){return Array.prototype.filter.call(e.children,(function(e){return r(e,t)}))}var a={main:"ps",rtl:"ps__rtl",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}};var l={x:null,y:null};function c(e,t){var i=e.element.classList;var n=a.state.scrolling(t);if(i.contains(n)){clearTimeout(l[t])}else{i.add(n)}}function d(e,t){l[t]=setTimeout((function(){return e.isAlive&&e.element.classList.remove(a.state.scrolling(t))}),e.settings.scrollingThreshold)}function u(e,t){c(e,t);d(e,t)}var h=function e(t){this.element=t;this.handlers={}};var p={isEmpty:{configurable:true}};h.prototype.bind=function e(t,i){if(typeof this.handlers[t]==="undefined"){this.handlers[t]=[]}this.handlers[t].push(i);this.element.addEventListener(t,i,false)};h.prototype.unbind=function e(t,i){var n=this;this.handlers[t]=this.handlers[t].filter((function(e){if(i&&e!==i){return true}n.element.removeEventListener(t,e,false);return false}))};h.prototype.unbindAll=function e(){for(var t in this.handlers){this.unbind(t)}};p.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every((function(t){return e.handlers[t].length===0}))};Object.defineProperties(h.prototype,p);var f=function e(){this.eventElements=[]};f.prototype.eventElement=function e(t){var i=this.eventElements.filter((function(e){return e.element===t}))[0];if(!i){i=new h(t);this.eventElements.push(i)}return i};f.prototype.bind=function e(t,i,n){this.eventElement(t).bind(i,n)};f.prototype.unbind=function e(t,i,n){var r=this.eventElement(t);r.unbind(i,n);if(r.isEmpty){this.eventElements.splice(this.eventElements.indexOf(r),1)}};f.prototype.unbindAll=function e(){this.eventElements.forEach((function(e){return e.unbindAll()}));this.eventElements=[]};f.prototype.once=function e(t,i,n){var r=this.eventElement(t);var o=function(e){r.unbind(i,o);n(e)};r.bind(i,o)};function g(e){if(typeof window.CustomEvent==="function"){return new CustomEvent(e)}else{var t=document.createEvent("CustomEvent");t.initCustomEvent(e,false,false,undefined);return t}}function m(e,t,i,n,r){if(n===void 0)n=true;if(r===void 0)r=false;var o;if(t==="top"){o=["contentHeight","containerHeight","scrollTop","y","up","down"]}else if(t==="left"){o=["contentWidth","containerWidth","scrollLeft","x","left","right"]}else{throw new Error("A proper axis should be provided")}v(e,i,o,n,r)}function v(e,t,i,n,r){var o=i[0];var s=i[1];var a=i[2];var l=i[3];var c=i[4];var d=i[5];if(n===void 0)n=true;if(r===void 0)r=false;var h=e.element;e.reach[l]=null;if(h[a]<1){e.reach[l]="start"}if(h[a]>e[o]-e[s]-1){e.reach[l]="end"}if(t){h.dispatchEvent(g("ps-scroll-"+l));if(t<0){h.dispatchEvent(g("ps-scroll-"+c))}else if(t>0){h.dispatchEvent(g("ps-scroll-"+d))}if(n){u(e,l)}}if(e.reach[l]&&(t||r)){h.dispatchEvent(g("ps-"+l+"-reach-"+e.reach[l]))}}function b(e){return parseInt(e,10)||0}function y(e){return r(e,"input,[contenteditable]")||r(e,"select,[contenteditable]")||r(e,"textarea,[contenteditable]")||r(e,"button,[contenteditable]")}function w(t){var i=e(t);return b(i.width)+b(i.paddingLeft)+b(i.paddingRight)+b(i.borderLeftWidth)+b(i.borderRightWidth)}var C={isWebKit:typeof document!=="undefined"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window!=="undefined"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator!=="undefined"&&navigator.msMaxTouchPoints,isChrome:typeof navigator!=="undefined"&&/Chrome/i.test(navigator&&navigator.userAgent)};function _(e){var t=e.element;if(!e.settings.wheelPropagation){if(e.maxScroll!==0&&t.scrollTop+t.offsetHeight<t.scrollHeight){e.maxScroll=0}if(t.scrollTop+t.offsetHeight>=t.scrollHeight&&e.maxScroll===0){e.maxScroll=t.scrollTop}if(e.maxScroll!==0&&t.scrollTop>e.maxScroll){return}}var i=Math.floor(t.scrollTop);var n=t.getBoundingClientRect();e.containerWidth=Math.round(n.width);e.containerHeight=Math.round(n.height);e.contentWidth=t.scrollWidth;e.contentHeight=t.scrollHeight;if(!t.contains(e.scrollbarXRail)){s(t,a.element.rail("x")).forEach((function(e){return o(e)}));t.appendChild(e.scrollbarXRail)}if(!t.contains(e.scrollbarYRail)){s(t,a.element.rail("y")).forEach((function(e){return o(e)}));t.appendChild(e.scrollbarYRail)}if(!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth){e.scrollbarXActive=true;e.railXWidth=e.containerWidth-e.railXMarginWidth;e.railXRatio=e.containerWidth/e.railXWidth;e.scrollbarXWidth=S(e,b(e.railXWidth*e.containerWidth/e.contentWidth));e.scrollbarXLeft=b((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))}else{e.scrollbarXActive=false}if(!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight){e.scrollbarYActive=true;e.railYHeight=e.containerHeight-e.railYMarginHeight;e.railYRatio=e.containerHeight/e.railYHeight;e.scrollbarYHeight=S(e,b(e.railYHeight*e.containerHeight/e.contentHeight));e.scrollbarYTop=b(i*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))}else{e.scrollbarYActive=false}if(e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth){e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth}if(e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight){e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight}A(t,e);if(e.scrollbarXActive){t.classList.add(a.state.active("x"))}else{t.classList.remove(a.state.active("x"));e.scrollbarXWidth=0;e.scrollbarXLeft=0;t.scrollLeft=e.isRtl===true?e.contentWidth:0}if(e.scrollbarYActive){t.classList.add(a.state.active("y"))}else{t.classList.remove(a.state.active("y"));e.scrollbarYHeight=0;e.scrollbarYTop=0;t.scrollTop=0}}function S(e,t){if(e.settings.minScrollbarLength){t=Math.max(t,e.settings.minScrollbarLength)}if(e.settings.maxScrollbarLength){t=Math.min(t,e.settings.maxScrollbarLength)}return t}function A(e,i){var n={width:i.railXWidth};var r=Math.floor(e.scrollTop);if(i.isRtl){n.left=i.negativeScrollAdjustment+e.scrollLeft+i.containerWidth-i.contentWidth}else{n.left=e.scrollLeft}if(i.isScrollbarXUsingBottom){n.bottom=i.scrollbarXBottom-r}else{n.top=i.scrollbarXTop+r}t(i.scrollbarXRail,n);var o={top:r,height:i.railYHeight};if(i.isScrollbarYUsingRight){if(i.isRtl){o.right=i.contentWidth-(i.negativeScrollAdjustment+e.scrollLeft)-i.scrollbarYRight-i.scrollbarYOuterWidth-9}else{o.right=i.scrollbarYRight-e.scrollLeft}}else{if(i.isRtl){o.left=i.negativeScrollAdjustment+e.scrollLeft+i.containerWidth*2-i.contentWidth-i.scrollbarYLeft-i.scrollbarYOuterWidth}else{o.left=i.scrollbarYLeft+e.scrollLeft}}t(i.scrollbarYRail,o);t(i.scrollbarX,{left:i.scrollbarXLeft,width:i.scrollbarXWidth-i.railBorderXWidth});t(i.scrollbarY,{top:i.scrollbarYTop,height:i.scrollbarYHeight-i.railBorderYWidth})}function x(e){var t=e.element;e.event.bind(e.scrollbarY,"mousedown",(function(t){$(document).trigger($.Event("agn:rail-mousedown"),[e.element]);return t.stopPropagation()}));e.event.bind(e.scrollbarYRail,"mousedown",(function(t){var i=t.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top;var n=i>e.scrollbarYTop?1:-1;e.element.scrollTop+=n*e.containerHeight;_(e);t.stopPropagation()}));e.event.bind(e.scrollbarX,"mousedown",(function(e){return e.stopPropagation()}));e.event.bind(e.scrollbarXRail,"mousedown",(function(t){var i=t.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left;var n=i>e.scrollbarXLeft?1:-1;e.element.scrollLeft+=n*e.containerWidth;_(e);t.stopPropagation()}))}function E(e){T(e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]);T(e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function T(e,t){var i=t[0];var n=t[1];var r=t[2];var o=t[3];var s=t[4];var l=t[5];var u=t[6];var h=t[7];var p=t[8];var f=e.element;var g=null;var m=null;var v=null;function b(t){if(t.touches&&t.touches[0]){t[r]=t.touches[0].pageY}f[u]=g+v*(t[r]-m);c(e,h);_(e);t.stopPropagation();if(t.type.startsWith("touch")&&t.changedTouches.length>1){t.preventDefault()}}function y(){$(document).trigger($.Event("agn:rail-mouseup"),[e.element]);d(e,h);e[p].classList.remove(a.state.clicking);e.event.unbind(e.ownerDocument,"mousemove",b)}function w(t,s){g=f[u];if(s&&t.touches){t[r]=t.touches[0].pageY}m=t[r];v=(e[n]-e[i])/(e[o]-e[l]);if(!s){e.event.bind(e.ownerDocument,"mousemove",b);e.event.once(e.ownerDocument,"mouseup",y);t.preventDefault()}else{e.event.bind(e.ownerDocument,"touchmove",b)}e[p].classList.add(a.state.clicking);t.stopPropagation()}e.event.bind(e[s],"mousedown",(function(e){w(e)}));e.event.bind(e[s],"touchstart",(function(e){w(e,true)}))}function D(e){var t=e.element;var i=function(){return r(t,":hover")};var n=function(){return r(e.scrollbarX,":focus")||r(e.scrollbarY,":focus")};function o(i,n){var r=Math.floor(t.scrollTop);if(i===0){if(!e.scrollbarYActive){return false}if(r===0&&n>0||r>=e.contentHeight-e.containerHeight&&n<0){return!e.settings.wheelPropagation}}var o=t.scrollLeft;if(n===0){if(!e.scrollbarXActive){return false}if(o===0&&i<0||o>=e.contentWidth-e.containerWidth&&i>0){return!e.settings.wheelPropagation}}return true}e.event.bind(e.ownerDocument,"keydown",(function(r){if(r.isDefaultPrevented&&r.isDefaultPrevented()||r.defaultPrevented){return}if(!i()&&!n()){return}var s=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(s){if(s.tagName==="IFRAME"){s=s.contentDocument.activeElement}else{while(s.shadowRoot){s=s.shadowRoot.activeElement}}if(y(s)){return}}var a=0;var l=0;switch(r.which){case 37:if(r.metaKey){a=-e.contentWidth}else if(r.altKey){a=-e.containerWidth}else{a=-30}break;case 38:if(r.metaKey){l=e.contentHeight}else if(r.altKey){l=e.containerHeight}else{l=30}break;case 39:if(r.metaKey){a=e.contentWidth}else if(r.altKey){a=e.containerWidth}else{a=30}break;case 40:if(r.metaKey){l=-e.contentHeight}else if(r.altKey){l=-e.containerHeight}else{l=-30}break;case 32:if(r.shiftKey){l=e.containerHeight}else{l=-e.containerHeight}break;case 33:l=e.containerHeight;break;case 34:l=-e.containerHeight;break;case 36:l=e.contentHeight;break;case 35:l=-e.contentHeight;break;default:return}if(e.settings.suppressScrollX&&a!==0){return}if(e.settings.suppressScrollY&&l!==0){return}t.scrollTop-=l;t.scrollLeft+=a;_(e);if(o(a,l)){r.preventDefault()}}))}function M(t){var i=t.element;function n(e,n){var r=Math.floor(i.scrollTop);var o=i.scrollTop===0;var s=r+i.offsetHeight===i.scrollHeight;var a=i.scrollLeft===0;var l=i.scrollLeft+i.offsetWidth===i.scrollWidth;var c;if(Math.abs(n)>Math.abs(e)){c=o||s}else{c=a||l}return c?!t.settings.wheelPropagation:true}function r(e){var t=e.deltaX;var i=-1*e.deltaY;if(typeof t==="undefined"||typeof i==="undefined"){t=-1*e.wheelDeltaX/6;i=e.wheelDeltaY/6}if(e.deltaMode&&e.deltaMode===1){t*=10;i*=10}if(t!==t&&i!==i){t=0;i=e.wheelDelta}if(e.shiftKey){return[-i,-t]}return[t,i]}function o(t,n,r){if(!C.isWebKit&&i.querySelector("select:focus")){return true}if(!i.contains(t)){return false}var o=t;while(o&&o!==i){if(o.classList.contains(a.element.consuming)){return true}var s=e(o);if(r&&s.overflowY.match(/(scroll|auto)/)){var l=o.scrollHeight-o.clientHeight;if(l>0){if(o.scrollTop>0&&r<0||o.scrollTop<l&&r>0){return true}}}if(n&&s.overflowX.match(/(scroll|auto)/)){var c=o.scrollWidth-o.clientWidth;if(c>0){if(o.scrollLeft>0&&n<0||o.scrollLeft<c&&n>0){return true}}}o=o.parentNode}return false}function s(e){var s=r(e);var a=s[0];var l=s[1];if(o(e.target,a,l)){return}var c=false;if(!t.settings.useBothWheelAxes){i.scrollTop-=l*t.settings.wheelSpeed;i.scrollLeft+=a*t.settings.wheelSpeed}else if(t.scrollbarYActive&&!t.scrollbarXActive){if(l){i.scrollTop-=l*t.settings.wheelSpeed}else{i.scrollTop+=a*t.settings.wheelSpeed}c=true}else if(t.scrollbarXActive&&!t.scrollbarYActive){if(a){i.scrollLeft+=a*t.settings.wheelSpeed}else{i.scrollLeft-=l*t.settings.wheelSpeed}c=true}_(t);c=c||n(a,l);if(c&&!e.ctrlKey){e.stopPropagation();e.preventDefault()}}if(typeof window.onwheel!=="undefined"){t.event.bind(i,"wheel",s)}else if(typeof window.onmousewheel!=="undefined"){t.event.bind(i,"mousewheel",s)}}function k(t){if(!C.supportsTouch&&!C.supportsIePointer){return}var i=t.element;function n(e,n){var r=Math.floor(i.scrollTop);var o=i.scrollLeft;var s=Math.abs(e);var a=Math.abs(n);if(a>s){if(n<0&&r===t.contentHeight-t.containerHeight||n>0&&r===0){return window.scrollY===0&&n>0&&C.isChrome}}else if(s>a){if(e<0&&o===t.contentWidth-t.containerWidth||e>0&&o===0){return true}}return true}function r(e,n){i.scrollTop-=n;i.scrollLeft-=e;_(t)}var o={};var s=0;var l={};var c=null;function d(e){if(e.targetTouches){return e.targetTouches[0]}else{return e}}function u(e){if(e.pointerType&&e.pointerType==="pen"&&e.buttons===0){return false}if(e.targetTouches&&e.targetTouches.length===1){return true}if(e.pointerType&&e.pointerType!=="mouse"&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE){return true}return false}function h(e){if(!u(e)){return}var t=d(e);o.pageX=t.pageX;o.pageY=t.pageY;s=(new Date).getTime();if(c!==null){clearInterval(c)}}function p(t,n,r){if(!i.contains(t)){return false}var o=t;while(o&&o!==i){if(o.classList.contains(a.element.consuming)){return true}var s=e(o);if(r&&s.overflowY.match(/(scroll|auto)/)){var l=o.scrollHeight-o.clientHeight;if(l>0){if(o.scrollTop>0&&r<0||o.scrollTop<l&&r>0){return true}}}if(n&&s.overflowX.match(/(scroll|auto)/)){var c=o.scrollWidth-o.clientWidth;if(c>0){if(o.scrollLeft>0&&n<0||o.scrollLeft<c&&n>0){return true}}}o=o.parentNode}return false}function f(e){if(u(e)){var t=d(e);var i={pageX:t.pageX,pageY:t.pageY};var a=i.pageX-o.pageX;var c=i.pageY-o.pageY;if(p(e.target,a,c)){return}r(a,c);o=i;var h=(new Date).getTime();var f=h-s;if(f>0){l.x=a/f;l.y=c/f;s=h}if(n(a,c)){e.preventDefault()}}}function g(){if(t.settings.swipeEasing){clearInterval(c);c=setInterval((function(){if(t.isInitialized){clearInterval(c);return}if(!l.x&&!l.y){clearInterval(c);return}if(Math.abs(l.x)<.01&&Math.abs(l.y)<.01){clearInterval(c);return}if(!t.element){clearInterval(c);return}r(l.x*30,l.y*30);l.x*=.8;l.y*=.8}),10)}}if(C.supportsTouch){t.event.bind(i,"touchstart",h);t.event.bind(i,"touchmove",f);t.event.bind(i,"touchend",g)}else if(C.supportsIePointer){if(window.PointerEvent){t.event.bind(i,"pointerdown",h);t.event.bind(i,"pointermove",f);t.event.bind(i,"pointerup",g)}else if(window.MSPointerEvent){t.event.bind(i,"MSPointerDown",h);t.event.bind(i,"MSPointerMove",f);t.event.bind(i,"MSPointerUp",g)}}}var P=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:false,suppressScrollY:false,swipeEasing:true,useBothWheelAxes:false,wheelPropagation:true,wheelSpeed:1}};var R={"click-rail":x,"drag-thumb":E,keyboard:D,wheel:M,touch:k};var I=function n(r,o){var s=this;if(o===void 0)o={};if(typeof r==="string"){r=document.querySelector(r)}if(!r||!r.nodeName){throw new Error("no element is specified to initialize PerfectScrollbar")}this.maxScroll=0;this.element=r;r.classList.add(a.main);this.settings=P();for(var l in o){this.settings[l]=o[l]}this.containerWidth=null;this.containerHeight=null;this.contentWidth=null;this.contentHeight=null;var c=function(){return r.classList.add(a.state.focus)};var d=function(){return r.classList.remove(a.state.focus)};this.isRtl=e(r).direction==="rtl";if(this.isRtl===true){r.classList.add(a.rtl)}this.isNegativeScroll=function(){var e=r.scrollLeft;var t=null;r.scrollLeft=-1;t=r.scrollLeft<0;r.scrollLeft=e;return t}();this.negativeScrollAdjustment=this.isNegativeScroll?r.scrollWidth-r.clientWidth:0;this.event=new f;this.ownerDocument=r.ownerDocument||document;this.scrollbarXRail=i(a.element.rail("x"));r.appendChild(this.scrollbarXRail);this.scrollbarX=i(a.element.thumb("x"));this.scrollbarXRail.appendChild(this.scrollbarX);this.scrollbarX.setAttribute("tabindex",0);this.event.bind(this.scrollbarX,"focus",c);this.event.bind(this.scrollbarX,"blur",d);this.scrollbarXActive=null;this.scrollbarXWidth=null;this.scrollbarXLeft=null;var u=e(this.scrollbarXRail);this.scrollbarXBottom=parseInt(u.bottom,10);if(isNaN(this.scrollbarXBottom)){this.isScrollbarXUsingBottom=false;this.scrollbarXTop=b(u.top)}else{this.isScrollbarXUsingBottom=true}this.railBorderXWidth=b(u.borderLeftWidth)+b(u.borderRightWidth);t(this.scrollbarXRail,{display:"block"});this.railXMarginWidth=b(u.marginLeft)+b(u.marginRight);t(this.scrollbarXRail,{display:""});this.railXWidth=null;this.railXRatio=null;this.scrollbarYRail=i(a.element.rail("y"));r.appendChild(this.scrollbarYRail);this.scrollbarY=i(a.element.thumb("y"));this.scrollbarYRail.appendChild(this.scrollbarY);this.scrollbarY.setAttribute("tabindex",0);this.event.bind(this.scrollbarY,"focus",c);this.event.bind(this.scrollbarY,"blur",d);this.scrollbarYActive=null;this.scrollbarYHeight=null;this.scrollbarYTop=null;var h=e(this.scrollbarYRail);this.scrollbarYRight=parseInt(h.right,10);if(isNaN(this.scrollbarYRight)){this.isScrollbarYUsingRight=false;this.scrollbarYLeft=b(h.left)}else{this.isScrollbarYUsingRight=true}this.scrollbarYOuterWidth=this.isRtl?w(this.scrollbarY):null;this.railBorderYWidth=b(h.borderTopWidth)+b(h.borderBottomWidth);t(this.scrollbarYRail,{display:"block"});this.railYMarginHeight=b(h.marginTop)+b(h.marginBottom);t(this.scrollbarYRail,{display:""});this.railYHeight=null;this.railYRatio=null;this.reach={x:r.scrollLeft<=0?"start":r.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:r.scrollTop<=0?"start":r.scrollTop>=this.contentHeight-this.containerHeight?"end":null};this.isAlive=true;this.settings.handlers.forEach((function(e){return R[e](s)}));this.lastScrollTop=Math.floor(r.scrollTop);this.lastScrollLeft=r.scrollLeft;this.event.bind(this.element,"scroll",(function(e){return s.onScroll(e)}));_(this)};I.prototype.update=function i(){if(!this.isAlive){return}this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0;t(this.scrollbarXRail,{display:"block"});t(this.scrollbarYRail,{display:"block"});this.railXMarginWidth=b(e(this.scrollbarXRail).marginLeft)+b(e(this.scrollbarXRail).marginRight);this.railYMarginHeight=b(e(this.scrollbarYRail).marginTop)+b(e(this.scrollbarYRail).marginBottom);t(this.scrollbarXRail,{display:"none"});t(this.scrollbarYRail,{display:"none"});_(this);m(this,"top",0,false,true);m(this,"left",0,false,true);t(this.scrollbarXRail,{display:""});t(this.scrollbarYRail,{display:""})};I.prototype.onScroll=function e(t){if(!this.isAlive){return}_(this);m(this,"top",this.element.scrollTop-this.lastScrollTop);m(this,"left",this.element.scrollLeft-this.lastScrollLeft);this.lastScrollTop=Math.floor(this.element.scrollTop);this.lastScrollLeft=this.element.scrollLeft};I.prototype.destroy=function e(){if(!this.isAlive){return}this.event.unbindAll();o(this.scrollbarX);o(this.scrollbarY);o(this.scrollbarXRail);o(this.scrollbarYRail);this.removePsClasses();this.element=null;this.scrollbarX=null;this.scrollbarY=null;this.scrollbarXRail=null;this.scrollbarYRail=null;this.isAlive=false};I.prototype.removePsClasses=function e(){this.element.className=this.element.className.split(" ").filter((function(e){return!e.match(/^ps([-_].+|)$/)})).join(" ")};return I}));(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){module.exports=e}else{e(jQuery)}})((function(e){var t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],n=Array.prototype.slice,r,o;if(e.event.fixHooks){for(var s=t.length;s;){e.event.fixHooks[t[--s]]=e.event.mouseHooks}}var a=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener){for(var t=i.length;t;){this.addEventListener(i[--t],l,false)}}else{this.onmousewheel=l}e.data(this,"mousewheel-line-height",a.getLineHeight(this));e.data(this,"mousewheel-page-height",a.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var e=i.length;e;){this.removeEventListener(i[--e],l,false)}}else{this.onmousewheel=null}},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:true}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}});function l(t){var i=t||window.event,s=n.call(arguments,1),a=0,l=0,u=0,h=0;t=e.event.fix(i);t.type="mousewheel";if("detail"in i){u=i.detail*-1}if("wheelDelta"in i){u=i.wheelDelta}if("wheelDeltaY"in i){u=i.wheelDeltaY}if("wheelDeltaX"in i){l=i.wheelDeltaX*-1}if("axis"in i&&i.axis===i.HORIZONTAL_AXIS){l=u*-1;u=0}a=u===0?l:u;if("deltaY"in i){u=i.deltaY*-1;a=u}if("deltaX"in i){l=i.deltaX;if(u===0){a=l*-1}}if(u===0&&l===0){return}if(i.deltaMode===1){var p=e.data(this,"mousewheel-line-height");a*=p;u*=p;l*=p}else if(i.deltaMode===2){var f=e.data(this,"mousewheel-page-height");a*=f;u*=f;l*=f}h=Math.max(Math.abs(u),Math.abs(l));if(!o||h<o){o=h;if(d(i,h)){o/=40}}if(d(i,h)){a/=40;l/=40;u/=40}a=Math[a>=1?"floor":"ceil"](a/o);l=Math[l>=1?"floor":"ceil"](l/o);u=Math[u>=1?"floor":"ceil"](u/o);t.deltaX=l;t.deltaY=u;t.deltaFactor=o;t.deltaMode=0;s.unshift(t,a,l,u);if(r){clearTimeout(r)}r=setTimeout(c,200);return(e.event.dispatch||e.event.handle).apply(this,s)}function c(){o=null}function d(e,t){return a.settings.adjustOldDeltas&&e.type==="mousewheel"&&t%120===0}}));(function(e){if(typeof window==="undefined")return;var t=0,i=false,n=false,r="message",o=r.length,s="[iFrameSizer]",a=s.length,l=null,c=window.requestAnimationFrame,d={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},u={},h=null,p={autoResize:true,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:true,inPageLinks:false,enablePublicMethods:true,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:false,maxHeight:Infinity,maxWidth:Infinity,minHeight:0,minWidth:0,mouseEvents:true,resizeFrom:"parent",scrolling:false,sizeHeight:true,sizeWidth:false,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",onClose:function(){return true},onClosed:function(){},onInit:function(){},onMessage:function(){S("onMessage function not defined")},onMouseEnter:function(){},onMouseLeave:function(){},onResized:function(){},onScroll:function(){return true}};function f(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function g(e,t,i){e.addEventListener(t,i,false)}function m(e,t,i){e.removeEventListener(t,i,false)}function v(){var e=["moz","webkit","o","ms"];var t;for(t=0;t<e.length&&!c;t+=1){c=window[e[t]+"RequestAnimationFrame"]}if(!c){C("setup","RequestAnimationFrame not supported")}else{c=c.bind(window)}}function b(e){var t="Host page: "+e;if(window.top!==window.self){t=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+e:"Nested host page: "+e}return t}function y(e){return s+"["+b(e)+"]"}function w(e){return u[e]?u[e].log:i}function C(e,t){A("log",e,t,w(e))}function _(e,t){A("info",e,t,w(e))}function S(e,t){A("warn",e,t,true)}function A(e,t,i,n){if(true===n&&"object"===typeof window.console){console[e](y(t),i)}}function x(e){function t(){function e(){I(q);k(K);z("onResized",q)}c("Height");c("Width");O(e,q,"init")}function i(){var e=Y.substr(a).split(":");var t=e[1]?parseInt(e[1],10):0;var i=u[e[0]]&&u[e[0]].iframe;var o=getComputedStyle(i);return{iframe:i,id:e[0],height:t+n(o)+r(o),width:e[2],type:e[3]}}function n(e){if(e.boxSizing!=="border-box"){return 0}var t=e.paddingTop?parseInt(e.paddingTop,10):0;var i=e.paddingBottom?parseInt(e.paddingBottom,10):0;return t+i}function r(e){if(e.boxSizing!=="border-box"){return 0}var t=e.borderTopWidth?parseInt(e.borderTopWidth,10):0;var i=e.borderBottomWidth?parseInt(e.borderBottomWidth,10):0;return t+i}function c(e){var t=Number(u[K]["max"+e]),i=Number(u[K]["min"+e]),n=e.toLowerCase(),r=Number(q[n]);C(K,"Checking "+n+" is in range "+i+"-"+t);if(r<i){r=i;C(K,"Set "+n+" to min value")}if(r>t){r=t;C(K,"Set "+n+" to max value")}q[n]=""+r}function d(){function t(){function e(){var e=0,t=false;C(K,"Checking connection is from allowed list of origins: "+n);for(;e<n.length;e++){if(n[e]===i){t=true;break}}return t}function t(){var e=u[K]&&u[K].remoteHost;C(K,"Checking connection is from: "+e);return i===e}return n.constructor===Array?e():t()}var i=e.origin,n=u[K]&&u[K].checkOrigin;if(n&&""+i!=="null"&&!t()){throw new Error("Unexpected message received from: "+i+" for "+q.iframe.id+". Message was: "+e.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.")}return true}function h(){return s===(""+Y).substr(0,a)&&Y.substr(a).split(":")[0]in u}function p(){var e=q.type in{true:1,false:1,undefined:1};if(e){C(K,"Ignoring init message from meta parent page")}return e}function f(e){return Y.substr(Y.indexOf(":")+o+e)}function v(e){C(K,"onMessage passed: {iframe: "+q.iframe.id+", message: "+e+"}");z("onMessage",{iframe:q.iframe,message:JSON.parse(e)});C(K,"--")}function b(){var e=document.body.getBoundingClientRect(),t=q.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:t.height,iframeWidth:t.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(t.top-e.top,10),offsetLeft:parseInt(t.left-e.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth,windowHeight:window.innerHeight,windowWidth:window.innerWidth})}function y(e,t){function i(){N("Send Page Info","pageInfo:"+b(),e,t)}H(i,32,t)}function w(){function e(e,i){function r(){if(u[n]){y(u[n].iframe,n)}else{t()}}["scroll","resize"].forEach((function(t){C(n,e+t+" listener for sendPageInfo");i(window,t,r)}))}function t(){e("Remove ",m)}function i(){e("Add ",g)}var n=K;i();if(u[n]){u[n].stopPageInfo=t}}function A(){if(u[K]&&u[K].stopPageInfo){u[K].stopPageInfo();delete u[K].stopPageInfo}}function x(){var e=true;if(null===q.iframe){S(K,"IFrame ("+q.id+") not found");e=false}return e}function T(e){var t=e.getBoundingClientRect();M(K);return{x:Math.floor(Number(t.left)+Number(l.x)),y:Math.floor(Number(t.top)+Number(l.y))}}function F(e){function t(){l=o;$();C(K,"--")}function i(){return{x:Number(q.width)+r.x,y:Number(q.height)+r.y}}function n(){if(window.parentIFrame){window.parentIFrame["scrollTo"+(e?"Offset":"")](o.x,o.y)}else{S(K,"Unable to scroll to requested position, window.parentIFrame not found")}}var r=e?T(q.iframe):{x:0,y:0},o=i();C(K,"Reposition requested from iFrame (offset x:"+r.x+" y:"+r.y+")");if(window.top!==window.self){n()}else{t()}}function $(){if(false!==z("onScroll",l)){k(K)}else{P()}}function G(e){function t(){var e=T(o);C(K,"Moving to in page link (#"+n+") at x: "+e.x+" y: "+e.y);l={x:e.x,y:e.y};$();C(K,"--")}function i(){if(window.parentIFrame){window.parentIFrame.moveToAnchor(n)}else{C(K,"In page link #"+n+" not found and window.parentIFrame not found")}}var n=e.split("#")[1]||"",r=decodeURIComponent(n),o=document.getElementById(r)||document.getElementsByName(r)[0];if(o){t()}else if(window.top!==window.self){i()}else{C(K,"In page link #"+n+" not found")}}function B(e){var t={};if(Number(q.width)===0&&Number(q.height)===0){var i=f(9).split(":");t={x:i[1],y:i[0]}}else{t={x:q.width,y:q.height}}z(e,{iframe:q.iframe,screenX:Number(t.x),screenY:Number(t.y),type:q.type})}function z(e,t){return E(K,e,t)}function W(){if(u[K]&&u[K].firstRun)U();switch(q.type){case"close":D(q.iframe);break;case"message":v(f(6));break;case"mouseenter":B("onMouseEnter");break;case"mouseleave":B("onMouseLeave");break;case"autoResize":u[K].autoResize=JSON.parse(f(9));break;case"scrollTo":F(false);break;case"scrollToOffset":F(true);break;case"pageInfo":y(u[K]&&u[K].iframe,K);w();break;case"pageInfoStop":A();break;case"inPageLink":G(f(9));break;case"reset":R(q);break;case"init":t();z("onInit",q.iframe);break;default:if(Number(q.width)===0&&Number(q.height)===0){S("Unsupported message received ("+q.type+"), this is likely due to the iframe containing a later "+"version of iframe-resizer than the parent page")}else{t()}}}function V(e){var t=true;if(!u[e]){t=false;S(q.type+" No settings for "+e+". Message was: "+Y)}return t}function j(){for(var e in u){N("iFrame requested init",L(e),u[e].iframe,e)}}function U(){if(u[K]){u[K].firstRun=false}}var Y=e.data,q={},K=null;if("[iFrameResizerChild]Ready"===Y){j()}else if(h()){q=i();K=q.id;if(u[K]){u[K].loaded=true}if(!p()&&V(K)){C(K,"Received: "+Y);if(x()&&d()){W()}}}else{_(K,"Ignored: "+Y)}}function E(e,t,i){var n=null,r=null;if(u[e]){n=u[e][t];if("function"===typeof n){r=n(i)}else{throw new TypeError(t+" on iFrame["+e+"] is not a function")}}return r}function T(e){var t=e.id;delete u[t]}function D(e){var t=e.id;if(E(t,"onClose",t)===false){C(t,"Close iframe cancelled by onClose event");return}C(t,"Removing iFrame: "+t);try{if(e.parentNode){e.parentNode.removeChild(e)}}catch(e){S(e)}E(t,"onClosed",t);C(t,"--");T(e)}function M(t){if(null===l){l={x:window.pageXOffset!==e?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==e?window.pageYOffset:document.documentElement.scrollTop};C(t,"Get page position: "+l.x+","+l.y)}}function k(e){if(null!==l){window.scrollTo(l.x,l.y);C(e,"Set page position: "+l.x+","+l.y);P()}}function P(){l=null}function R(e){function t(){I(e);N("reset","reset",e.iframe,e.id)}C(e.id,"Size reset requested by "+("init"===e.type?"host page":"iFrame"));M(e.id);O(t,e,"reset")}function I(e){function t(t){if(!e.id){C("undefined","messageData id not set");return}e.iframe.style[t]=e[t]+"px";C(e.id,"IFrame ("+o+") "+t+" set to "+e[t]+"px")}function i(t){if(!n&&"0"===e[t]){n=true;C(o,"Hidden iFrame detected, creating visibility listener");z()}}function r(e){t(e);i(e)}var o=e.iframe.id;if(u[o]){if(u[o].sizeHeight){r("height")}if(u[o].sizeWidth){r("width")}}}function O(e,t,i){if(i!==t.type&&c&&!window.jasmine){C(t.id,"Requesting animation frame");c(e)}else{e()}}function N(e,t,i,n,r){function o(){var r=u[n]&&u[n].targetOrigin;C(n,"["+e+"] Sending msg to iframe["+n+"] ("+t+") targetOrigin: "+r);i.contentWindow.postMessage(s+t,r)}function a(){S(n,"["+e+"] IFrame("+n+") not found")}function l(){if(i&&"contentWindow"in i&&null!==i.contentWindow){o()}else{a()}}function c(){function e(){if(u[n]&&!u[n].loaded&&!d){d=true;S(n,"IFrame has not responded within "+u[n].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning.")}}if(!!r&&u[n]&&!!u[n].warningTimeout){u[n].msgTimeout=setTimeout(e,u[n].warningTimeout)}}var d=false;n=n||i.id;if(u[n]){l();c()}}function L(e){return e+":"+u[e].bodyMarginV1+":"+u[e].sizeWidth+":"+u[e].log+":"+u[e].interval+":"+u[e].enablePublicMethods+":"+u[e].autoResize+":"+u[e].bodyMargin+":"+u[e].heightCalculationMethod+":"+u[e].bodyBackground+":"+u[e].bodyPadding+":"+u[e].tolerance+":"+u[e].inPageLinks+":"+u[e].resizeFrom+":"+u[e].widthCalculationMethod+":"+u[e].mouseEvents}function F(e){return typeof e==="number"}function $(n,r){function o(){function e(e){var t=u[E][e];if(Infinity!==t&&0!==t){n.style[e]=F(t)?t+"px":t;C(E,"Set "+e+" = "+n.style[e])}}function t(e){if(u[E]["min"+e]>u[E]["max"+e]){throw new Error("Value for min"+e+" can not be greater than max"+e)}}t("Height");t("Width");e("maxHeight");e("minHeight");e("maxWidth");e("minWidth")}function s(){var e=r&&r.id||p.id+t++;if(null!==document.getElementById(e)){e+=t++}return e}function a(e){if(""===e){n.id=e=s();i=(r||{}).log;C(e,"Added missing iframe ID: "+e+" ("+n.src+")")}return e}function l(){C(E,"IFrame scrolling "+(u[E]&&u[E].scrolling?"enabled":"disabled")+" for "+E);n.style.overflow=false===(u[E]&&u[E].scrolling)?"hidden":"auto";switch(u[E]&&u[E].scrolling){case"omit":break;case true:n.scrolling="yes";break;case false:n.scrolling="no";break;default:n.scrolling=u[E]?u[E].scrolling:"no"}}function c(){if("number"===typeof(u[E]&&u[E].bodyMargin)||"0"===(u[E]&&u[E].bodyMargin)){u[E].bodyMarginV1=u[E].bodyMargin;u[E].bodyMargin=""+u[E].bodyMargin+"px"}}function h(){var e=u[E]&&u[E].firstRun,t=u[E]&&u[E].heightCalculationMethod in d;if(!e&&t){R({iframe:n,height:0,width:0,type:"init"})}}function m(){if(u[E]){u[E].iframe.iFrameResizer={close:D.bind(null,u[E].iframe),removeListeners:T.bind(null,u[E].iframe),resize:N.bind(null,"Window resize","resize",u[E].iframe),moveToAnchor:function(e){N("Move to anchor","moveToAnchor:"+e,u[E].iframe,E)},sendMessage:function(e){e=JSON.stringify(e);N("Send Message","message:"+e,u[E].iframe,E)}}}}function v(t){function i(){N("iFrame.onload",t,n,e,true);h()}function r(e){if(!n.parentNode){return}var t=new e((function(e){e.forEach((function(e){var t=Array.prototype.slice.call(e.removedNodes);t.forEach((function(e){if(e===n){D(n)}}))}))}));t.observe(n.parentNode,{childList:true})}var o=f();if(o){r(o)}g(n,"load",i);N("init",t,n,e,true)}function b(e){if("object"!==typeof e){throw new TypeError("Options is not an object")}}function y(e){for(var t in p){if(Object.prototype.hasOwnProperty.call(p,t)){u[E][t]=Object.prototype.hasOwnProperty.call(e,t)?e[t]:p[t]}}}function w(e){return""===e||null!==e.match(/^(about:blank|javascript:|file:\/\/)/)?"*":e}function _(e){var t=e.split("Callback");if(t.length===2){var i="on"+t[0].charAt(0).toUpperCase()+t[0].slice(1);this[i]=this[e];delete this[e];S(E,"Deprecated: '"+e+"' has been renamed '"+i+"'. The old method will be removed in the next major version.")}}function A(e){e=e||{};u[E]={firstRun:true,iframe:n,remoteHost:n.src&&n.src.split("/").slice(0,3).join("/")};b(e);Object.keys(e).forEach(_,e);y(e);if(u[E]){u[E].targetOrigin=true===u[E].checkOrigin?w(u[E].remoteHost):"*"}}function x(){return E in u&&"iFrameResizer"in n}var E=a(n.id);if(!x()){A(r);l();o();c();v(L(E));m()}else{S(E,"Ignored iFrame, already setup.")}}function G(e,t){if(null===h){h=setTimeout((function(){h=null;e()}),t)}}var B={};function H(e,t,i){if(!B[i]){B[i]=setTimeout((function(){B[i]=null;e()}),t)}}function z(){function e(){function e(e){function t(t){return"0px"===(u[e]&&u[e].iframe.style[t])}function i(e){return null!==e.offsetParent}if(u[e]&&i(u[e].iframe)&&(t("height")||t("width"))){N("Visibility change","resize",u[e].iframe,e)}}Object.keys(u).forEach((function(t){e(t)}))}function t(t){C("window","Mutation observed: "+t[0].target+" "+t[0].type);G(e,16)}function i(){var e=document.querySelector("body"),i={attributes:true,attributeOldValue:false,characterData:true,characterDataOldValue:false,childList:true,subtree:true},r=new n(t);r.observe(e,i)}var n=f();if(n){i()}}function W(e){function t(){j("Window "+e,"resize")}C("window","Trigger event: "+e);G(t,16)}function V(){function e(){j("Tab Visable","resize")}if("hidden"!==document.visibilityState){C("document","Trigger event: Visiblity change");G(e,16)}}function j(e,t){function i(e){return u[e]&&"parent"===u[e].resizeFrom&&u[e].autoResize&&!u[e].firstRun}Object.keys(u).forEach((function(n){if(i(n)){N(e,t,u[n].iframe,n)}}))}function U(){g(window,"message",x);g(window,"resize",(function(){W("resize")}));g(document,"visibilitychange",V);g(document,"-webkit-visibilitychange",V)}function Y(){function t(e,t){function i(){if(!t.tagName){throw new TypeError("Object is not a valid DOM element")}else if("IFRAME"!==t.tagName.toUpperCase()){throw new TypeError("Expected <IFRAME> tag, found <"+t.tagName+">")}}if(t){i();$(t,e);n.push(t)}}function i(e){if(e&&e.enablePublicMethods){S("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}}var n;v();U();return function r(o,s){n=[];i(o);switch(typeof s){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(s||"iframe"),t.bind(e,o));break;case"object":t(o,s);break;default:throw new TypeError("Unexpected data type ("+typeof s+")")}return n}}function q(e){if(!e.fn){_("","Unable to bind to jQuery, it is not fully loaded.")}else if(!e.fn.iFrameResize){e.fn.iFrameResize=function e(t){function i(e,i){$(i,t)}return this.filter("iframe").each(i).end()}}}if(window.jQuery){q(window.jQuery)}if(typeof define==="function"&&define.amd){define([],Y)}else if(typeof module==="object"&&typeof module.exports==="object"){module.exports=Y()}window.iFrameResize=window.iFrameResize||Y()})();!function(e){function t(e){var t=document.createElement("input"),i="on"+e,n=i in t;return n||(t.setAttribute(i,"return;"),n="function"==typeof t[i]),t=null,n}function i(e){var t="text"==e||"tel"==e||"password"==e;if(!t){var i=document.createElement("input");i.setAttribute("type",e),t="text"===i.type,i=null}return t}function n(t,i,r){var o=r.aliases[t];return o?(o.alias&&n(o.alias,void 0,r),e.extend(!0,r,o),e.extend(!0,r,i),!0):!1}function r(t,i){function n(i){function n(e,t,i,n){this.matches=[],this.isGroup=e||!1,this.isOptional=t||!1,this.isQuantifier=i||!1,this.isAlternator=n||!1,this.quantifier={min:1,max:1}}function r(i,n,r){var o=t.definitions[n],s=0==i.matches.length;if(r=void 0!=r?r:i.matches.length,o&&!h){o.placeholder=e.isFunction(o.placeholder)?o.placeholder.call(this,t):o.placeholder;for(var a=o.prevalidator,l=a?a.length:0,c=1;c<o.cardinality;c++){var d=l>=c?a[c-1]:[],u=d.validator,p=d.cardinality;i.matches.splice(r++,0,{fn:u?"string"==typeof u?new RegExp(u):new function(){this.test=u}:new RegExp("."),cardinality:p?p:1,optionality:i.isOptional,newBlockMarker:s,casing:o.casing,def:o.definitionSymbol||n,placeholder:o.placeholder,mask:n})}i.matches.splice(r++,0,{fn:o.validator?"string"==typeof o.validator?new RegExp(o.validator):new function(){this.test=o.validator}:new RegExp("."),cardinality:o.cardinality,optionality:i.isOptional,newBlockMarker:s,casing:o.casing,def:o.definitionSymbol||n,placeholder:o.placeholder,mask:n})}else i.matches.splice(r++,0,{fn:null,cardinality:0,optionality:i.isOptional,newBlockMarker:s,casing:null,def:n,placeholder:void 0,mask:n}),h=!1}for(var o,s,a,l,c,d,u=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})\??|[^.?*+^${[]()|\\]+|./g,h=!1,p=new n,f=[],g=[];o=u.exec(i);)switch(s=o[0],s.charAt(0)){case t.optionalmarker.end:case t.groupmarker.end:if(a=f.pop(),f.length>0){if(l=f[f.length-1],l.matches.push(a),l.isAlternator){c=f.pop();for(var m=0;m<c.matches.length;m++)c.matches[m].isGroup=!1;f.length>0?(l=f[f.length-1],l.matches.push(c)):p.matches.push(c)}}else p.matches.push(a);break;case t.optionalmarker.start:f.push(new n(!1,!0));break;case t.groupmarker.start:f.push(new n(!0));break;case t.quantifiermarker.start:var v=new n(!1,!1,!0);s=s.replace(/[{}]/g,"");var b=s.split(","),y=isNaN(b[0])?b[0]:parseInt(b[0]),w=1==b.length?y:isNaN(b[1])?b[1]:parseInt(b[1]);if(("*"==w||"+"==w)&&(y="*"==w?0:1),v.quantifier={min:y,max:w},f.length>0){var C=f[f.length-1].matches;if(o=C.pop(),!o.isGroup){var _=new n(!0);_.matches.push(o),o=_}C.push(o),C.push(v)}else{if(o=p.matches.pop(),!o.isGroup){var _=new n(!0);_.matches.push(o),o=_}p.matches.push(o),p.matches.push(v)}break;case t.escapeChar:h=!0;break;case t.alternatormarker:f.length>0?(l=f[f.length-1],d=l.matches.pop()):d=p.matches.pop(),d.isAlternator?f.push(d):(c=new n(!1,!1,!1,!0),c.matches.push(d),f.push(c));break;default:if(f.length>0){if(l=f[f.length-1],l.matches.length>0&&!l.isAlternator&&(d=l.matches[l.matches.length-1],d.isGroup&&(d.isGroup=!1,r(d,t.groupmarker.start,0),r(d,t.groupmarker.end))),r(l,s),l.isAlternator){c=f.pop();for(var m=0;m<c.matches.length;m++)c.matches[m].isGroup=!1;f.length>0?(l=f[f.length-1],l.matches.push(c)):p.matches.push(c)}}else p.matches.length>0&&(d=p.matches[p.matches.length-1],d.isGroup&&(d.isGroup=!1,r(d,t.groupmarker.start,0),r(d,t.groupmarker.end))),r(p,s)}return p.matches.length>0&&(d=p.matches[p.matches.length-1],d.isGroup&&(d.isGroup=!1,r(d,t.groupmarker.start,0),r(d,t.groupmarker.end)),g.push(p)),g}function r(r,o){if(void 0==r||""==r)return void 0;if(1==r.length&&0==t.greedy&&0!=t.repeat&&(t.placeholder=""),t.repeat>0||"*"==t.repeat||"+"==t.repeat){var s="*"==t.repeat?0:"+"==t.repeat?1:t.repeat;r=t.groupmarker.start+r+t.groupmarker.end+t.quantifiermarker.start+s+","+t.repeat+t.quantifiermarker.end}var a;return void 0==e.inputmask.masksCache[r]||i===!0?(a={mask:r,maskToken:n(r),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},metadata:o},i!==!0&&(e.inputmask.masksCache[r]=a)):a=e.extend(!0,{},e.inputmask.masksCache[r]),a}function o(e){if(e=e.toString(),t.numericInput){e=e.split("").reverse();for(var i=0;i<e.length;i++)e[i]==t.optionalmarker.start?e[i]=t.optionalmarker.end:e[i]==t.optionalmarker.end?e[i]=t.optionalmarker.start:e[i]==t.groupmarker.start?e[i]=t.groupmarker.end:e[i]==t.groupmarker.end&&(e[i]=t.groupmarker.start);e=e.join("")}return e}var s=void 0;if(e.isFunction(t.mask)&&(t.mask=t.mask.call(this,t)),e.isArray(t.mask)){if(t.mask.length>1){t.keepStatic=void 0==t.keepStatic?!0:t.keepStatic;var a="(";return e.each(t.mask,(function(t,i){a.length>1&&(a+=")|("),a+=o(void 0==i.mask||e.isFunction(i.mask)?i:i.mask)})),a+=")",r(a,t.mask)}t.mask=t.mask.pop()}return t.mask&&(s=void 0==t.mask.mask||e.isFunction(t.mask.mask)?r(o(t.mask),t.mask):r(o(t.mask.mask),t.mask)),s}function o(n,r,o){function s(e,t,i){t=t||0;var n,r,o,s=[],a=0;do{if(e===!0&&u().validPositions[a]){var l=u().validPositions[a];r=l.match,n=l.locator.slice(),s.push(i===!0?l.input:R(a,r))}else o=m(a,n,a-1),r=o.match,n=o.locator.slice(),s.push(R(a,r));a++}while((void 0==ne||ne>a-1)&&null!=r.fn||null==r.fn&&""!=r.def||t>=a);return s.pop(),s}function u(){return r}function h(e){var t=u();t.buffer=void 0,t.tests={},e!==!0&&(t._buffer=void 0,t.validPositions={},t.p=0)}function p(e,t){var i=u(),n=-1,r=i.validPositions;void 0==e&&(e=-1);var o=n,s=n;for(var a in r){var l=parseInt(a);r[l]&&(t||null!=r[l].match.fn)&&(e>=l&&(o=l),l>=e&&(s=l))}return n=-1!=o&&e-o>1||e>s?o:s}function f(t,i,n){if(o.insertMode&&void 0!=u().validPositions[t]&&void 0==n){var r,s=e.extend(!0,{},u().validPositions),a=p();for(r=t;a>=r;r++)delete u().validPositions[r];u().validPositions[t]=i;var l,c=!0,d=u().validPositions;for(r=l=t;a>=r;r++){var h=s[r];if(void 0!=h)for(var f=l,g=-1;f<T()&&(null==h.match.fn&&d[r]&&(d[r].match.optionalQuantifier===!0||d[r].match.optionality===!0)||null!=h.match.fn);){if(null==h.match.fn||!o.keepStatic&&d[r]&&(void 0!=d[r+1]&&y(r+1,d[r].locator.slice(),r).length>1||void 0!=d[r].alternation)?f++:f=D(l),b(f,h.match.def)){c=x(f,h.input,!0,!0)!==!1,l=f;break}if(c=null==h.match.fn,g==f)break;g=f}if(!c)break}if(!c)return u().validPositions=e.extend(!0,{},s),!1}else u().validPositions[t]=i;return!0}function g(e,t,i,n){var r,s=e;u().p=e,void 0!=u().validPositions[e]&&u().validPositions[e].input==o.radixPoint&&(t++,s++);for(r=s;t>r;r++)void 0!=u().validPositions[r]&&(i===!0||0!=o.canClearPosition(u(),r,p(),n,o))&&delete u().validPositions[r];for(h(!0),r=s+1;r<=p();){for(;void 0!=u().validPositions[s];)s++;var a=u().validPositions[s];s>r&&(r=s+1);var l=u().validPositions[r];void 0!=l&&void 0==a?(b(s,l.match.def)&&x(s,l.input,!0)!==!1&&(delete u().validPositions[r],r++),s++):r++}var c=p(),d=T();for(c>=e&&void 0!=u().validPositions[c]&&u().validPositions[c].input==o.radixPoint&&delete u().validPositions[c],r=c+1;d>=r;r++)u().validPositions[r]&&delete u().validPositions[r];h(!0)}function m(e,t,i){var n=u().validPositions[e];if(void 0==n)for(var r=y(e,t,i),s=p(),a=u().validPositions[s]||y(0)[0],l=void 0!=a.alternation?a.locator[a.alternation].toString().split(","):[],c=0;c<r.length&&(n=r[c],!(n.match&&(o.greedy&&n.match.optionalQuantifier!==!0||(n.match.optionality===!1||n.match.newBlockMarker===!1)&&n.match.optionalQuantifier!==!0)&&(void 0==a.alternation||a.alternation!=n.alternation||void 0!=n.locator[a.alternation]&&A(n.locator[a.alternation].toString().split(","),l))));c++);return n}function v(e){return u().validPositions[e]?u().validPositions[e].match:y(e)[0].match}function b(e,t){for(var i=!1,n=y(e),r=0;r<n.length;r++)if(n[r].match&&n[r].match.def==t){i=!0;break}return i}function y(t,i,n,r){function o(i,n,r,s){function l(r,s,p){if(a>1e4)return alert("jquery.inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+u().mask),!0;if(a==t&&void 0==r.matches)return c.push({match:r,locator:s.reverse()}),!0;if(void 0!=r.matches){if(r.isGroup&&p!==!0){if(r=l(i.matches[h+1],s))return!0}else if(r.isOptional){var f=r;if(r=o(r,n,s,p)){var g=c[c.length-1].match,m=0==e.inArray(g,f.matches);if(!m)return!0;d=!0,a=t}}else if(r.isAlternator){var v,b=r,y=[],w=c.slice(),C=s.length,_=n.length>0?n.shift():-1;if(-1==_||"string"==typeof _){var S=a,A=n.slice(),x=[];"string"==typeof _&&(x=_.split(","));for(var E=0;E<b.matches.length;E++){if(c=[],r=l(b.matches[E],[E].concat(s),p)||r,r!==!0&&void 0!=r&&x[x.length-1]<b.matches.length){var T=i.matches.indexOf(r)+1;i.matches.length>T&&(r=l(i.matches[T],[T].concat(s.slice(1,s.length)),p),r&&(x.push(T.toString()),e.each(c,(function(e,t){t.alternation=s.length-1}))))}v=c.slice(),a=S,c=[];for(var D=0;D<A.length;D++)n[D]=A[D];for(var M=0;M<v.length;M++){var k=v[M];k.alternation=k.alternation||C;for(var P=0;P<y.length;P++){var R=y[P];if(k.match.mask==R.match.mask&&("string"!=typeof _||-1!=e.inArray(k.locator[k.alternation].toString(),x))){v.splice(M,1),M--,R.locator[k.alternation]=R.locator[k.alternation]+","+k.locator[k.alternation],R.alternation=k.alternation;break}}}y=y.concat(v)}"string"==typeof _&&(y=e.map(y,(function(t,i){if(isFinite(i)){var n,r=t.alternation,o=t.locator[r].toString().split(",");t.locator[r]=void 0,t.alternation=void 0;for(var s=0;s<o.length;s++)n=-1!=e.inArray(o[s],x),n&&(void 0!=t.locator[r]?(t.locator[r]+=",",t.locator[r]+=o[s]):t.locator[r]=parseInt(o[s]),t.alternation=r);if(void 0!=t.locator[r])return t}}))),c=w.concat(y),a=t,d=c.length>0}else r=b.matches[_]?l(b.matches[_],[_].concat(s),p):!1;if(r)return!0}else if(r.isQuantifier&&p!==!0)for(var I=r,O=n.length>0&&p!==!0?n.shift():0;O<(isNaN(I.quantifier.max)?O+1:I.quantifier.max)&&t>=a;O++){var N=i.matches[e.inArray(I,i.matches)-1];if(r=l(N,[O].concat(s),!0)){var g=c[c.length-1].match;g.optionalQuantifier=O>I.quantifier.min-1;var m=0==e.inArray(g,N.matches);if(m){if(O>I.quantifier.min-1){d=!0,a=t;break}return!0}return!0}}else if(r=o(r,n,s,p))return!0}else a++}for(var h=n.length>0?n.shift():0;h<i.matches.length;h++)if(i.matches[h].isQuantifier!==!0){var p=l(i.matches[h],[h].concat(r),s);if(p&&a==t)return p;if(a>t)break}}var s=u().maskToken,a=i?n:0,l=i||[0],c=[],d=!1;if(r===!0&&u().tests[t])return u().tests[t];if(void 0==i){for(var h,p=t-1;void 0==(h=u().validPositions[p])&&p>-1&&(!u().tests[p]||void 0==(h=u().tests[p][0]));)p--;void 0!=h&&p>-1&&(a=p,l=h.locator.slice())}for(var f=l.shift();f<s.length;f++){var g=o(s[f],l,[f]);if(g&&a==t||a>t)break}return(0==c.length||d)&&c.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:""},locator:[]}),u().tests[t]=e.extend(!0,[],c),u().tests[t]}function w(){return void 0==u()._buffer&&(u()._buffer=s(!1,1)),u()._buffer}function C(){return void 0==u().buffer&&(u().buffer=s(!0,p(),!0)),u().buffer}function _(e,t,i){if(i=i||C().slice(),e===!0)h(),e=0,t=i.length;else for(var n=e;t>n;n++)delete u().validPositions[n],delete u().tests[n];for(var n=e;t>n;n++)i[n]!=o.skipOptionalPartCharacter&&x(n,i[n],!0,!0)}function S(e,t){switch(t.casing){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e}function A(t,i){for(var n=o.greedy?i:i.slice(0,1),r=!1,s=0;s<t.length;s++)if(-1!=e.inArray(t[s],n)){r=!0;break}return r}function x(t,i,n,r){function s(t,i,n,r){var s=!1;return e.each(y(t),(function(a,l){for(var c=l.match,d=i?1:0,m="",v=(C(),c.cardinality);v>d;v--)m+=k(t-(v-1));if(i&&(m+=i),s=null!=c.fn?c.fn.test(m,u(),t,n,o):i!=c.def&&i!=o.skipOptionalPartCharacter||""==c.def?!1:{c:c.def,pos:t},s!==!1){var b=void 0!=s.c?s.c:i;b=b==o.skipOptionalPartCharacter&&null===c.fn?c.def:b;var y=t,w=C();if(void 0!=s.remove&&(e.isArray(s.remove)||(s.remove=[s.remove]),e.each(s.remove.sort((function(e,t){return t-e})),(function(e,t){g(t,t+1,!0)}))),void 0!=s.insert&&(e.isArray(s.insert)||(s.insert=[s.insert]),e.each(s.insert.sort((function(e,t){return e-t})),(function(e,t){x(t.pos,t.c,!0)}))),s.refreshFromBuffer){var A=s.refreshFromBuffer;if(n=!0,_(A===!0?A:A.start,A.end,w),void 0==s.pos&&void 0==s.c)return s.pos=p(),!1;if(y=void 0!=s.pos?s.pos:t,y!=t)return s=e.extend(s,x(y,b,!0)),!1}else if(s!==!0&&void 0!=s.pos&&s.pos!=t&&(y=s.pos,_(t,y),y!=t))return s=e.extend(s,x(y,b,!0)),!1;return 1!=s&&void 0==s.pos&&void 0==s.c?!1:(a>0&&h(!0),f(y,e.extend({},l,{input:S(b,c)}),r)||(s=!1),!1)}})),s}function a(t,i,n,r){for(var s,a,l,c,d=e.extend(!0,{},u().validPositions),f=p();f>=0&&(c=u().validPositions[f],!c||void 0==c.alternation||(s=f,a=u().validPositions[s].alternation,m(s).locator[c.alternation]==c.locator[c.alternation]));f--);if(void 0!=a)for(var g in u().validPositions)if(c=u().validPositions[g],parseInt(g)>parseInt(s)&&void 0!=c.alternation){var v=u().validPositions[s].locator[a].toString().split(","),b=c.locator[a]||v[0];b.length>0&&(b=b.split(",")[0]);for(var y=0;y<v.length;y++)if(b<v[y]){for(var w,C,_=g-1;_>=0;_--)if(w=u().validPositions[_],void 0!=w){C=w.locator[a],w.locator[a]=parseInt(v[y]);break}if(b!=w.locator[a]){for(var S=[],A=g;A<p()+1;A++){var E=u().validPositions[A];E&&null!=E.match.fn&&S.push(E.input),delete u().validPositions[A],delete u().tests[A]}for(h(!0),o.keepStatic=!o.keepStatic,l=!0;S.length>0;){var T=S.shift();if(T!=o.skipOptionalPartCharacter&&!(l=x(p()+1,T,!1,!0)))break}if(w.alternation=a,w.locator[a]=C,l){var D=p(t)+1;l=x(t>D?D:t,i,n,r)}if(o.keepStatic=!o.keepStatic,l)return l;h(),u().validPositions=e.extend(!0,{},d)}}break}return!1}function l(t,i){for(var n=u().validPositions[i],r=n.locator,o=r.length,s=t;i>s;s++)if(!E(s)){var a=y(s),l=a[0],c=-1;e.each(a,(function(e,t){for(var i=0;o>i;i++)t.locator[i]&&A(t.locator[i].toString().split(","),r[i].toString().split(","))&&i>c&&(c=i,l=t)})),f(s,e.extend({},l,{input:l.match.def}),!0)}}n=n===!0;for(var c=C(),d=t-1;d>-1&&!u().validPositions[d];d--);for(d++;t>d;d++)void 0==u().validPositions[d]&&((!E(d)||c[d]!=R(d))&&y(d).length>1||c[d]==o.radixPoint||"0"==c[d]&&e.inArray(o.radixPoint,c)<d)&&s(d,c[d],!0);var v=t,b=!1,w=e.extend(!0,{},u().validPositions);if(v<T()&&(b=s(v,i,n,r),(!n||r)&&b===!1)){var M=u().validPositions[v];if(!M||null!=M.match.fn||M.match.def!=i&&i!=o.skipOptionalPartCharacter){if((o.insertMode||void 0==u().validPositions[D(v)])&&!E(v))for(var P=v+1,I=D(v);I>=P;P++)if(b=s(P,i,n,r),b!==!1){l(v,P),v=P;break}}else b={caret:D(v)}}if(b===!1&&o.keepStatic&&B(c)&&(b=a(t,i,n,r)),b===!0&&(b={pos:v}),e.isFunction(o.postValidation)&&0!=b&&!n){h(!0);var O=o.postValidation(C(),o);if(!O)return h(!0),u().validPositions=e.extend(!0,{},w),!1}return b}function E(e){var t=v(e);if(null!=t.fn)return t.fn;if(!o.keepStatic&&void 0==u().validPositions[e]){for(var i=y(e),n=!0,r=0;r<i.length;r++)if(""!=i[r].match.def&&(void 0==i[r].alternation||i[r].locator[i[r].alternation].length>1)){n=!1;break}return n}return!1}function T(){var e;ne=ie.prop("maxLength"),-1==ne&&(ne=void 0);var t,i=p(),n=u().validPositions[i],r=void 0!=n?n.locator.slice():void 0;for(t=i+1;void 0==n||null!=n.match.fn||null==n.match.fn&&""!=n.match.def;t++)n=m(t,r,t-1),r=n.locator.slice();var o=v(t-1);return e=""!=o.def?t:t-1,void 0==ne||ne>e?e:ne}function D(e){var t=T();if(e>=t)return t;for(var i=e;++i<t&&!E(i)&&(o.nojumps!==!0||o.nojumpsThreshold>i););return i}function M(e){var t=e;if(0>=t)return 0;for(;--t>0&&!E(t););return t}function k(e){return void 0==u().validPositions[e]?R(e):u().validPositions[e].input}function P(t,i,n,r,s){if(r&&e.isFunction(o.onBeforeWrite)){var a=o.onBeforeWrite.call(t,r,i,n,o);if(a){if(a.refreshFromBuffer){var l=a.refreshFromBuffer;_(l===!0?l:l.start,l.end,a.buffer),h(!0),i=C()}n=a.caret||n}}t._valueSet(i.join("")),void 0!=n&&F(t,n),s===!0&&(se=!0,e(t).trigger("input"))}function R(e,t){if(t=t||v(e),void 0!=t.placeholder)return t.placeholder;if(null==t.fn){if(!o.keepStatic&&void 0==u().validPositions[e]){for(var i=y(e),n=!0,r=0;r<i.length;r++)if(""!=i[r].match.def&&(null!==i[r].match.fn||void 0==i[r].alternation||i[r].locator[i[r].alternation].length>1)){n=!1;break}if(n)return o.placeholder.charAt(e%o.placeholder.length)}return t.def}return o.placeholder.charAt(e%o.placeholder.length)}function I(t,i,n,r){function o(){var e=!1,t=w().slice(l,D(l)).join("").indexOf(a);if(-1!=t&&!E(l)){e=!0;for(var i=w().slice(l,l+t),n=0;n<i.length;n++)if(" "!=i[n]){e=!1;break}}return e}var s=void 0!=r?r.slice():t._valueGet().split(""),a="",l=0;if(h(),u().p=D(-1),i&&t._valueSet(""),!n){var c=w().slice(0,D(-1)).join(""),d=s.join("").match(new RegExp("^"+O(c),"g"));d&&d.length>0&&(s.splice(0,d.length*c.length),l=D(l))}e.each(s,(function(i,r){var s=e.Event("keypress");s.which=r.charCodeAt(0),a+=r;var c=p(void 0,!0),d=u().validPositions[c],h=m(c+1,d?d.locator.slice():void 0,c);if(!o()||n){var f=n?i:null==h.match.fn&&h.match.optionality&&c+1<u().p?c+1:u().p;U.call(t,s,!0,!1,n,f),l=f+1,a=""}else U.call(t,s,!0,!1,!0,c+1)})),i&&P(t,C(),e(t).is(":focus")?D(p(0)):void 0,e.Event("checkval"))}function O(t){return e.inputmask.escapeRegex(t)}function N(t){if(t.data("_inputmask")&&!t.hasClass("hasDatepicker")){var i=[],n=u().validPositions;for(var r in n)n[r].match&&null!=n[r].match.fn&&i.push(n[r].input);var s=(re?i.reverse():i).join(""),a=(re?C().slice().reverse():C()).join("");return e.isFunction(o.onUnMask)&&(s=o.onUnMask.call(t,a,s,o)||s),s}return t[0]._valueGet()}function L(e){if(re&&"number"==typeof e&&(!o.greedy||""!=o.placeholder)){var t=C().length;e=t-e}return e}function F(t,i,n){var r,s=t.jquery&&t.length>0?t[0]:t;if("number"!=typeof i)return s.setSelectionRange?(i=s.selectionStart,n=s.selectionEnd):window.getSelection?(r=window.getSelection().getRangeAt(0),(r.commonAncestorContainer.parentNode==s||r.commonAncestorContainer==s)&&(i=r.startOffset,n=r.endOffset)):document.selection&&document.selection.createRange&&(r=document.selection.createRange(),i=0-r.duplicate().moveStart("character",-1e5),n=i+r.text.length),{begin:L(i),end:L(n)};if(i=L(i),n=L(n),n="number"==typeof n?n:i,e(s).is(":visible")){var a=e(s).css("font-size").replace("px","")*n;if(s.scrollLeft=a>s.scrollWidth?a:0,l||0!=o.insertMode||i!=n||n++,s.setSelectionRange)s.selectionStart=i,s.selectionEnd=n;else if(window.getSelection){if(r=document.createRange(),void 0==s.firstChild){var c=document.createTextNode("");s.appendChild(c)}r.setStart(s.firstChild,i<s._valueGet().length?i:s._valueGet().length),r.setEnd(s.firstChild,n<s._valueGet().length?n:s._valueGet().length),r.collapse(!0);var d=window.getSelection();d.removeAllRanges(),d.addRange(r)}else s.createTextRange&&(r=s.createTextRange(),r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",i),r.select())}}function $(t){var i,n,r=C(),o=r.length,s=p(),a={},l=u().validPositions[s],c=void 0!=l?l.locator.slice():void 0;for(i=s+1;i<r.length;i++)n=m(i,c,i-1),c=n.locator.slice(),a[i]=e.extend(!0,{},n);var d=l&&void 0!=l.alternation?l.locator[l.alternation]:void 0;for(i=o-1;i>s&&(n=a[i],(n.match.optionality||n.match.optionalQuantifier||d&&(d!=a[i].locator[l.alternation]&&null!=n.match.fn||null==n.match.fn&&n.locator[l.alternation]&&A(n.locator[l.alternation].toString().split(","),d.split(","))&&""!=y(i)[0].def))&&r[i]==R(i,n.match));i--)o--;return t?{l:o,def:a[o]?a[o].match:void 0}:o}function G(e){for(var t=$(),i=e.length-1;i>t&&!E(i);i--);return e.splice(t,i+1-t),e}function B(t){if(e.isFunction(o.isComplete))return o.isComplete.call(ie,t,o);if("*"==o.repeat)return void 0;{var i=!1,n=$(!0),r=M(n.l);p()}if(void 0==n.def||n.def.newBlockMarker||n.def.optionality||n.def.optionalQuantifier){i=!0;for(var s=0;r>=s;s++){var a=m(s).match;if(null!=a.fn&&void 0==u().validPositions[s]&&a.optionality!==!0&&a.optionalQuantifier!==!0||null==a.fn&&t[s]!=R(s,a)){i=!1;break}}}return i}function H(e,t){return re?e-t>1||e-t==1&&o.insertMode:t-e>1||t-e==1&&o.insertMode}function z(t){var i=e._data(t).events,n=!1;e.each(i,(function(t,i){e.each(i,(function(t,i){if("inputmask"==i.namespace&&"setvalue"!=i.type){var r=i.handler;i.handler=function(t){if(!(this.disabled||this.readOnly&&!("keydown"==t.type&&t.ctrlKey&&67==t.keyCode||t.keyCode==e.inputmask.keyCode.TAB))){switch(t.type){case"input":if(se===!0||n===!0)return se=!1,t.preventDefault();break;case"keydown":oe=!1,n=!1;break;case"keypress":if(oe===!0)return t.preventDefault();oe=!0;break;case"compositionstart":n=!0;break;case"compositionupdate":se=!0;break;case"compositionend":n=!1}return r.apply(this,arguments)}t.preventDefault()}}}))}))}function W(t){function i(t){if(void 0==e.valHooks[t]||1!=e.valHooks[t].inputmaskpatch){var i=e.valHooks[t]&&e.valHooks[t].get?e.valHooks[t].get:function(e){return e.value},n=e.valHooks[t]&&e.valHooks[t].set?e.valHooks[t].set:function(e,t){return e.value=t,e};e.valHooks[t]={get:function(t){var n=e(t);if(n.data("_inputmask")){if(n.data("_inputmask").opts.autoUnmask)return n.inputmask("unmaskedvalue");var r=i(t),o=n.data("_inputmask"),s=o.maskset,a=s._buffer;return a=a?a.join(""):"",r!=a?r:""}return i(t)},set:function(t,i){var r,o=e(t),s=o.data("_inputmask");return r=n(t,i),s&&o.triggerHandler("setvalue.inputmask"),r},inputmaskpatch:!0}}}function n(){var t=e(this),i=e(this).data("_inputmask");return i?i.opts.autoUnmask?t.inputmask("unmaskedvalue"):s.call(this)!=w().join("")?s.call(this):"":s.call(this)}function r(t){var i=e(this).data("_inputmask");a.call(this,t),i&&e(this).triggerHandler("setvalue.inputmask")}function o(t){e(t).bind("mouseenter.inputmask",(function(t){var i=e(this),n=this,r=n._valueGet();""!=r&&r!=C().join("")&&i.triggerHandler("setvalue.inputmask")}));var i=e._data(t).events,n=i.mouseover;if(n){for(var r=n[n.length-1],o=n.length-1;o>0;o--)n[o]=n[o-1];n[0]=r}}var s,a;if(!t._valueGet){var l;Object.getOwnPropertyDescriptor&&void 0==t.value?(s=function(){return this.textContent},a=function(e){this.textContent=e},Object.defineProperty(t,"value",{get:n,set:r})):((l=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(t,"value"))&&l.configurable,document.__lookupGetter__&&t.__lookupGetter__("value")?(s=t.__lookupGetter__("value"),a=t.__lookupSetter__("value"),t.__defineGetter__("value",n),t.__defineSetter__("value",r)):(s=function(){return t.value},a=function(e){t.value=e},i(t.type),o(t))),t._valueGet=function(e){return re&&e!==!0?s.call(this).split("").reverse().join(""):s.call(this)},t._valueSet=function(e){a.call(this,re?e.split("").reverse().join(""):e)}}}function V(t,i,n,r){function s(){if(o.keepStatic){h(!0);var i,n=[],r=e.extend(!0,{},u().validPositions);for(i=p();i>=0;i--){var s=u().validPositions[i];if(s){if(void 0!=s.alternation&&s.locator[s.alternation]==m(i).locator[s.alternation])break;null!=s.match.fn&&n.push(s.input),delete u().validPositions[i]}}if(i>0)for(;n.length>0;){u().p=D(p());var a=e.Event("keypress");a.which=n.pop().charCodeAt(0),U.call(t,a,!0,!1,!1,u().p)}else u().validPositions=e.extend(!0,{},r)}}if((o.numericInput||re)&&(i==e.inputmask.keyCode.BACKSPACE?i=e.inputmask.keyCode.DELETE:i==e.inputmask.keyCode.DELETE&&(i=e.inputmask.keyCode.BACKSPACE),re)){var a=n.end;n.end=n.begin,n.begin=a}if(i==e.inputmask.keyCode.BACKSPACE&&(n.end-n.begin<1||0==o.insertMode)?n.begin=M(n.begin):i==e.inputmask.keyCode.DELETE&&n.begin==n.end&&(n.end=E(n.end)?n.end+1:D(n.end)+1),g(n.begin,n.end,!1,r),r!==!0){s();var l=p(n.begin);l<n.begin?(-1==l&&h(),u().p=D(l)):u().p=n.begin}}function j(i){var n=this,r=e(n),s=i.keyCode,l=F(n);s==e.inputmask.keyCode.BACKSPACE||s==e.inputmask.keyCode.DELETE||a&&127==s||i.ctrlKey&&88==s&&!t("cut")?(i.preventDefault(),88==s&&(J=C().join("")),V(n,s,l),P(n,C(),u().p,i,J!=C().join("")),n._valueGet()==w().join("")?r.trigger("cleared"):B(C())===!0&&r.trigger("complete"),o.showTooltip&&r.prop("title",u().mask)):s==e.inputmask.keyCode.END||s==e.inputmask.keyCode.PAGE_DOWN?setTimeout((function(){var e=D(p());o.insertMode||e!=T()||i.shiftKey||e--,F(n,i.shiftKey?l.begin:e,e)}),0):s==e.inputmask.keyCode.HOME&&!i.shiftKey||s==e.inputmask.keyCode.PAGE_UP?F(n,0,i.shiftKey?l.begin:0):(o.undoOnEscape&&s==e.inputmask.keyCode.ESCAPE||90==s&&i.ctrlKey)&&i.altKey!==!0?(I(n,!0,!1,J.split("")),r.click()):s!=e.inputmask.keyCode.INSERT||i.shiftKey||i.ctrlKey?0!=o.insertMode||i.shiftKey||(s==e.inputmask.keyCode.RIGHT?setTimeout((function(){var e=F(n);F(n,e.begin)}),0):s==e.inputmask.keyCode.LEFT&&setTimeout((function(){var e=F(n);F(n,re?e.begin+1:e.begin-1)}),0)):(o.insertMode=!o.insertMode,F(n,o.insertMode||l.begin!=T()?l.begin:l.begin-1)),o.onKeyDown.call(this,i,C(),F(n).begin,o),ae=-1!=e.inArray(s,o.ignorables)}function U(t,i,n,r,s){var a=this,l=e(a),c=t.which||t.charCode||t.keyCode;if(!(i===!0||t.ctrlKey&&t.altKey)&&(t.ctrlKey||t.metaKey||ae))return!0;if(c){46==c&&0==t.shiftKey&&","==o.radixPoint&&(c=44);var d,p=i?{begin:s,end:s}:F(a),g=String.fromCharCode(c),m=H(p.begin,p.end);m&&(u().undoPositions=e.extend(!0,{},u().validPositions),V(a,e.inputmask.keyCode.DELETE,p,!0),p.begin=u().p,o.insertMode||(o.insertMode=!o.insertMode,f(p.begin,r),o.insertMode=!o.insertMode),m=!o.multi),u().writeOutBuffer=!0;var v=re&&!m?p.end:p.begin,b=x(v,g,r);if(b!==!1){if(b!==!0&&(v=void 0!=b.pos?b.pos:v,g=void 0!=b.c?b.c:g),h(!0),void 0!=b.caret)d=b.caret;else{var w=u().validPositions;d=!o.keepStatic&&(void 0!=w[v+1]&&y(v+1,w[v].locator.slice(),v).length>1||void 0!=w[v].alternation)?v+1:D(v)}u().p=d}if(n!==!1){var S=this;if(setTimeout((function(){o.onKeyValidation.call(S,b,o)}),0),u().writeOutBuffer&&b!==!1){var A=C();P(a,A,i?void 0:o.numericInput?M(d):d,t,i!==!0),i!==!0&&setTimeout((function(){B(A)===!0&&l.trigger("complete")}),0)}else m&&(u().buffer=void 0,u().validPositions=u().undoPositions)}else m&&(u().buffer=void 0,u().validPositions=u().undoPositions);if(o.showTooltip&&l.prop("title",u().mask),i&&e.isFunction(o.onBeforeWrite)){var E=o.onBeforeWrite.call(this,t,C(),d,o);if(E&&E.refreshFromBuffer){var T=E.refreshFromBuffer;_(T===!0?T:T.start,T.end,E.buffer),h(!0),E.caret&&(u().p=E.caret)}}t.preventDefault()}}function Y(t){var i=this,n=e(i),r=i._valueGet(!0),s=F(i);if("propertychange"==t.type&&i._valueGet().length<=T())return!0;if("paste"==t.type){var a=r.substr(0,s.begin),l=r.substr(s.end,r.length);a==w().slice(0,s.begin).join("")&&(a=""),l==w().slice(s.end).join("")&&(l=""),window.clipboardData&&window.clipboardData.getData?r=a+window.clipboardData.getData("Text")+l:t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.getData&&(r=a+t.originalEvent.clipboardData.getData("text/plain")+l)}var c=r;if(e.isFunction(o.onBeforePaste)){if(c=o.onBeforePaste.call(i,r,o),c===!1)return t.preventDefault(),!1;c||(c=r)}return I(i,!0,!1,re?c.split("").reverse():c.split("")),n.click(),B(C())===!0&&n.trigger("complete"),!1}function q(t){var i=this;I(i,!0,!1),B(C())===!0&&e(i).trigger("complete"),t.preventDefault()}function K(e){var t=this;J=C().join(""),(""==te||0!=e.originalEvent.data.indexOf(te))&&(ee=F(t))}function X(t){var i=this,n=ee||F(i);0==t.originalEvent.data.indexOf(te)&&(h(),n={begin:0,end:0});var r=t.originalEvent.data;F(i,n.begin,n.end);for(var s=0;s<r.length;s++){var a=e.Event("keypress");a.which=r.charCodeAt(s),oe=!1,ae=!1,U.call(i,a)}setTimeout((function(){var e=u().p;P(i,C(),o.numericInput?M(e):e)}),0),te=t.originalEvent.data}function Z(e){}function Q(t){if(ie=e(t),ie.data("_inputmask",{maskset:r,opts:o,isRTL:!1}),o.showTooltip&&ie.prop("title",u().mask),("rtl"==t.dir||o.rightAlign)&&ie.css("text-align","right"),"rtl"==t.dir||o.numericInput){t.dir="ltr",ie.removeAttr("dir");var n=ie.data("_inputmask");n.isRTL=!0,ie.data("_inputmask",n),re=!0}ie.unbind(".inputmask"),(ie.is(":input")&&i(ie.attr("type"))||t.isContentEditable)&&(ie.closest("form").bind("submit",(function(e){J!=C().join("")&&ie.change(),ie[0]._valueGet&&ie[0]._valueGet()==w().join("")&&ie[0]._valueSet(""),o.removeMaskOnSubmit&&ie.inputmask("remove")})).bind("reset",(function(){setTimeout((function(){ie.triggerHandler("setvalue.inputmask")}),0)})),ie.bind("mouseenter.inputmask",(function(){var t=e(this),i=this;!t.is(":focus")&&o.showMaskOnHover&&i._valueGet()!=C().join("")&&P(i,C())})).bind("blur.inputmask",(function(t){var i=e(this),n=this;if(i.data("_inputmask")){var r=n._valueGet(),s=C().slice();le=!0,J!=s.join("")&&setTimeout((function(){i.change(),J=s.join("")}),0),""!=r&&(o.clearMaskOnLostFocus&&(r==w().join("")?s=[]:G(s)),B(s)===!1&&(i.trigger("incomplete"),o.clearIncomplete&&(h(),s=o.clearMaskOnLostFocus?[]:w().slice())),P(n,s,void 0,t))}})).bind("focus.inputmask",(function(t){var i=(e(this),this),n=i._valueGet();o.showMaskOnFocus&&(!o.showMaskOnHover||o.showMaskOnHover&&""==n)&&i._valueGet()!=C().join("")&&P(i,C(),D(p())),J=C().join("")})).bind("mouseleave.inputmask",(function(){var t=e(this),i=this;if(o.clearMaskOnLostFocus){var n=C().slice(),r=i._valueGet();t.is(":focus")||r==t.attr("placeholder")||""==r||(r==w().join("")?n=[]:G(n),P(i,n))}})).bind("click.inputmask",(function(){var t=e(this),i=this;if(t.is(":focus")){var n=F(i);if(n.begin==n.end)if(o.radixFocus&&""!=o.radixPoint&&-1!=e.inArray(o.radixPoint,C())&&(le||C().join("")==w().join("")))F(i,e.inArray(o.radixPoint,C())),le=!1;else{var r=L(n.begin),s=D(p(r));s>r?F(i,E(r)?r:D(r)):F(i,s)}}})).bind("dblclick.inputmask",(function(){var e=this;setTimeout((function(){F(e,0,D(p()))}),0)})).bind(d+".inputmask dragdrop.inputmask drop.inputmask",Y).bind("cut.inputmask",(function(t){se=!0;var i=this,n=e(i),r=F(i);V(i,e.inputmask.keyCode.DELETE,r),P(i,C(),u().p,t,J!=C().join("")),i._valueGet()==w().join("")&&n.trigger("cleared"),o.showTooltip&&n.prop("title",u().mask)})).bind("complete.inputmask",o.oncomplete).bind("incomplete.inputmask",o.onincomplete).bind("cleared.inputmask",o.oncleared),ie.bind("keydown.inputmask",j).bind("keypress.inputmask",U),c||ie.bind("compositionstart.inputmask",K).bind("compositionupdate.inputmask",X).bind("compositionend.inputmask",Z),"paste"===d&&ie.bind("input.inputmask",q)),ie.bind("setvalue.inputmask",(function(){var t=this,i=t._valueGet();t._valueSet(e.isFunction(o.onBeforeMask)?o.onBeforeMask.call(t,i,o)||i:i),I(t,!0,!1),J=C().join(""),(o.clearMaskOnLostFocus||o.clearIncomplete)&&t._valueGet()==w().join("")&&t._valueSet("")})),W(t);var s=e.isFunction(o.onBeforeMask)?o.onBeforeMask.call(t,t._valueGet(),o)||t._valueGet():t._valueGet();I(t,!0,!1,s.split(""));var a=C().slice();J=a.join("");var l;try{l=document.activeElement}catch(e){}B(a)===!1&&o.clearIncomplete&&h(),o.clearMaskOnLostFocus&&(a.join("")==w().join("")?a=[]:G(a)),P(t,a),l===t&&F(t,D(p())),z(t)}var J,ee,te,ie,ne,re=!1,oe=!1,se=!1,ae=!1,le=!0;if(void 0!=n)switch(n.action){case"isComplete":return ie=e(n.el),r=ie.data("_inputmask").maskset,o=ie.data("_inputmask").opts,B(n.buffer);case"unmaskedvalue":return ie=n.$input,r=ie.data("_inputmask").maskset,o=ie.data("_inputmask").opts,re=n.$input.data("_inputmask").isRTL,N(n.$input);case"mask":J=C().join(""),Q(n.el);break;case"format":ie=e({}),ie.data("_inputmask",{maskset:r,opts:o,isRTL:o.numericInput}),o.numericInput&&(re=!0);var ce=(e.isFunction(o.onBeforeMask)?o.onBeforeMask.call(ie,n.value,o)||n.value:n.value).split("");return I(ie,!1,!1,re?ce.reverse():ce),e.isFunction(o.onBeforeWrite)&&o.onBeforeWrite.call(this,void 0,C(),0,o),n.metadata?{value:re?C().slice().reverse().join(""):C().join(""),metadata:ie.inputmask("getmetadata")}:re?C().slice().reverse().join(""):C().join("");case"isValid":ie=e({}),ie.data("_inputmask",{maskset:r,opts:o,isRTL:o.numericInput}),o.numericInput&&(re=!0);var ce=n.value.split("");I(ie,!1,!0,re?ce.reverse():ce);for(var de=C(),ue=$(),he=de.length-1;he>ue&&!E(he);he--);return de.splice(ue,he+1-ue),B(de)&&n.value==de.join("");case"getemptymask":return ie=e(n.el),r=ie.data("_inputmask").maskset,o=ie.data("_inputmask").opts,w();case"remove":var pe=n.el;ie=e(pe),r=ie.data("_inputmask").maskset,o=ie.data("_inputmask").opts,pe._valueSet(N(ie)),ie.unbind(".inputmask"),ie.removeData("_inputmask");var fe;Object.getOwnPropertyDescriptor&&(fe=Object.getOwnPropertyDescriptor(pe,"value")),fe&&fe.get?pe._valueGet&&Object.defineProperty(pe,"value",{get:pe._valueGet,set:pe._valueSet}):document.__lookupGetter__&&pe.__lookupGetter__("value")&&pe._valueGet&&(pe.__defineGetter__("value",pe._valueGet),pe.__defineSetter__("value",pe._valueSet));try{delete pe._valueGet,delete pe._valueSet}catch(e){pe._valueGet=void 0,pe._valueSet=void 0}break;case"getmetadata":if(ie=e(n.el),r=ie.data("_inputmask").maskset,o=ie.data("_inputmask").opts,e.isArray(r.metadata)){for(var ge,me=p(),ve=me;ve>=0;ve--)if(u().validPositions[ve]&&void 0!=u().validPositions[ve].alternation){ge=u().validPositions[ve].alternation;break}return void 0!=ge?r.metadata[u().validPositions[me].locator[ge]]:r.metadata[0]}return r.metadata}}if(void 0===e.fn.inputmask){var s=navigator.userAgent,a=null!==s.match(new RegExp("iphone","i")),l=(null!==s.match(new RegExp("android.*safari.*","i")),null!==s.match(new RegExp("android.*chrome.*","i"))),c=null!==s.match(new RegExp("android.*firefox.*","i")),d=(/Kindle/i.test(s)||/Silk/i.test(s)||/KFTT/i.test(s)||/KFOT/i.test(s)||/KFJWA/i.test(s)||/KFJWI/i.test(s)||/KFSOWI/i.test(s)||/KFTHWA/i.test(s)||/KFTHWI/i.test(s)||/KFAPWA/i.test(s)||/KFAPWI/i.test(s),t("paste")?"paste":t("input")?"input":"propertychange");e.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:null,onKeyDown:e.noop,onBeforeMask:void 0,onBeforePaste:void 0,onBeforeWrite:void 0,onUnMask:void 0,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:e.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",radixFocus:!1,nojumps:!1,nojumpsThreshold:0,keepStatic:void 0,definitions:{9:{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1}},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:void 0,canClearPosition:e.noop,postValidation:void 0},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},masksCache:{},escapeRegex:function(e){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];return e.replace(new RegExp("(\\"+t.join("|\\")+")","gim"),"\\$1")},format:function(t,i,s){var a=e.extend(!0,{},e.inputmask.defaults,i);return n(a.alias,i,a),o({action:"format",value:t,metadata:s},r(a,i&&void 0!==i.definitions),a)},isValid:function(t,i){var s=e.extend(!0,{},e.inputmask.defaults,i);return n(s.alias,i,s),o({action:"isValid",value:t},r(s,i&&void 0!==i.definitions),s)}},e.fn.inputmask=function(t,i){function s(t,i,r){var o=e(t);o.data("inputmask-alias")&&n(o.data("inputmask-alias"),e.extend(!0,{},i),i);for(var s in i){var a=o.data("inputmask-"+s.toLowerCase());void 0!=a&&(a="boolean"==typeof a?a:a.toString(),"mask"==s&&0==a.indexOf("[")?(i[s]=a.replace(/[\s[\]]/g,"").split("','"),i[s][0]=i[s][0].replace("'",""),i[s][i[s].length-1]=i[s][i[s].length-1].replace("'","")):i[s]=a,r&&(r[s]=i[s]))}return i}var a,l=e.extend(!0,{},e.inputmask.defaults,i);if("string"==typeof t)switch(t){case"mask":return n(l.alias,i,l),this.each((function(){return s(this,l),a=r(l,i&&void 0!==i.definitions),void 0==a?this:void o({action:"mask",el:this},a,l)}));case"unmaskedvalue":var c=e(this);return c.data("_inputmask")?o({action:"unmaskedvalue",$input:c}):c.val();case"remove":return this.each((function(){var t=e(this);t.data("_inputmask")&&o({action:"remove",el:this})}));case"getemptymask":return this.data("_inputmask")?o({action:"getemptymask",el:this}):"";case"hasMaskedValue":return this.data("_inputmask")?!this.data("_inputmask").opts.autoUnmask:!1;case"isComplete":return this.data("_inputmask")?o({action:"isComplete",buffer:this[0]._valueGet().split(""),el:this}):!0;case"getmetadata":return this.data("_inputmask")?o({action:"getmetadata",el:this}):void 0;default:return n(l.alias,i,l),n(t,i,l)||(l.mask=t),this.each((function(){return s(this,l),a=r(l,i&&void 0!==i.definitions),void 0==a?this:void o({action:"mask",el:this},a,l)}))}else{if("object"==typeof t)return l=e.extend(!0,{},e.inputmask.defaults,t),n(l.alias,t,l),this.each((function(){return s(this,l),a=r(l,t&&void 0!==t.definitions),void 0==a?this:void o({action:"mask",el:this},a,l)}));if(void 0==t)return this.each((function(){var t=e(this).attr("data-inputmask");if(t&&""!=t)try{t=t.replace(new RegExp("'","g"),'"');var r=e.parseJSON("{"+t+"}");e.extend(!0,r,i),l=e.extend(!0,{},e.inputmask.defaults,r),l=s(this,l),n(l.alias,r,l),l.alias=void 0,e(this).inputmask("mask",l)}catch(e){}if(e(this).attr("data-inputmask-mask")||e(this).attr("data-inputmask-alias")){l=e.extend(!0,{},e.inputmask.defaults,{});var o={};l=s(this,l,o),n(l.alias,o,l),l.alias=void 0,e(this).inputmask("mask",l)}}))}}}return e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.definitions,{h:{validator:"[01][0-9]|2[0-3]",cardinality:2,prevalidator:[{validator:"[0-2]",cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:"[0-5]",cardinality:1}]},d:{validator:"0[1-9]|[12][0-9]|3[01]",cardinality:2,prevalidator:[{validator:"[0-3]",cardinality:1}]},m:{validator:"0[1-9]|1[012]",cardinality:2,prevalidator:[{validator:"[01]",cardinality:1}]},y:{validator:"(19|20)\\d{2}",cardinality:4,prevalidator:[{validator:"[12]",cardinality:1},{validator:"(19|20)",cardinality:2},{validator:"(19|20)\\d",cardinality:3}]}}),e.extend(e.inputmask.defaults.aliases,{"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:new RegExp("[0-3]"),val1:new RegExp("0[1-9]|[12][0-9]|3[01]"),val2pre:function(t){var i=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|[12][0-9]|3[01])"+i+"[01])")},val2:function(t){var i=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|[12][0-9])"+i+"(0[1-9]|1[012]))|(30"+i+"(0[13-9]|1[012]))|(31"+i+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(e,t,i){if(isNaN(e))return!1;var n=parseInt(e.concat(t.toString().slice(e.length))),r=parseInt(e.concat(i.toString().slice(e.length)));return(isNaN(n)?!1:n>=t&&i>=n)||(isNaN(r)?!1:r>=t&&i>=r)},determinebaseyear:function(e,t,i){var n=(new Date).getFullYear();if(e>n)return e;if(n>t){for(var r=t.toString().slice(0,2),o=t.toString().slice(2,4);r+i>t;)r--;var s=r+o;return e>s?e:s}return n},onKeyDown:function(t,i,n,r){var o=e(this);if(t.ctrlKey&&t.keyCode==e.inputmask.keyCode.RIGHT){var s=new Date;o.val(s.getDate().toString()+(s.getMonth()+1).toString()+s.getFullYear().toString()),o.triggerHandler("setvalue.inputmask")}},getFrontValue:function(e,t,i){for(var n=0,r=0,o=0;o<e.length&&"2"!=e.charAt(o);o++){var s=i.definitions[e.charAt(o)];s?(n+=r,r=s.cardinality):r++}return t.join("").substr(n,r)},definitions:{1:{validator:function(e,t,i,n,r){var o=r.regex.val1.test(e);return n||o||e.charAt(1)!=r.separator&&-1=="-./".indexOf(e.charAt(1))||!(o=r.regex.val1.test("0"+e.charAt(0)))?o:(t.buffer[i-1]="0",{refreshFromBuffer:{start:i-1,end:i},pos:i,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){var o=e;isNaN(t.buffer[i+1])||(o+=t.buffer[i+1]);var s=1==o.length?r.regex.val1pre.test(o):r.regex.val1.test(o);if(!n&&!s){if(s=r.regex.val1.test(e+"0"))return t.buffer[i]=e,t.buffer[++i]="0",{pos:i,c:"0"};if(s=r.regex.val1.test("0"+e))return t.buffer[i]="0",i++,{pos:i}}return s},cardinality:1}]},2:{validator:function(e,t,i,n,r){var o=r.getFrontValue(t.mask,t.buffer,r);-1!=o.indexOf(r.placeholder[0])&&(o="01"+r.separator);var s=r.regex.val2(r.separator).test(o+e);if(!n&&!s&&(e.charAt(1)==r.separator||-1!="-./".indexOf(e.charAt(1)))&&(s=r.regex.val2(r.separator).test(o+"0"+e.charAt(0))))return t.buffer[i-1]="0",{refreshFromBuffer:{start:i-1,end:i},pos:i,c:e.charAt(0)};if(r.mask.indexOf("2")==r.mask.length-1&&s){var a=t.buffer.join("").substr(4,4)+e;if(a!=r.leapday)return!0;var l=parseInt(t.buffer.join("").substr(0,4),10);return l%4===0?l%100===0?l%400===0?!0:!1:!0:!1}return s},cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){isNaN(t.buffer[i+1])||(e+=t.buffer[i+1]);var o=r.getFrontValue(t.mask,t.buffer,r);-1!=o.indexOf(r.placeholder[0])&&(o="01"+r.separator);var s=1==e.length?r.regex.val2pre(r.separator).test(o+e):r.regex.val2(r.separator).test(o+e);return n||s||!(s=r.regex.val2(r.separator).test(o+"0"+e))?s:(t.buffer[i]="0",i++,{pos:i})},cardinality:1}]},y:{validator:function(e,t,i,n,r){if(r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear)){var o=t.buffer.join("").substr(0,6);if(o!=r.leapday)return!0;var s=parseInt(e,10);return s%4===0?s%100===0?s%400===0?!0:!1:!0:!1}return!1},cardinality:4,prevalidator:[{validator:function(e,t,i,n,r){var o=r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear);if(!n&&!o){var s=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e+"0").toString().slice(0,1);if(o=r.isInYearRange(s+e,r.yearrange.minyear,r.yearrange.maxyear))return t.buffer[i++]=s.charAt(0),{pos:i};if(s=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e+"0").toString().slice(0,2),o=r.isInYearRange(s+e,r.yearrange.minyear,r.yearrange.maxyear))return t.buffer[i++]=s.charAt(0),t.buffer[i++]=s.charAt(1),{pos:i}}return o},cardinality:1},{validator:function(e,t,i,n,r){var o=r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear);if(!n&&!o){var s=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e).toString().slice(0,2);if(o=r.isInYearRange(e[0]+s[1]+e[1],r.yearrange.minyear,r.yearrange.maxyear))return t.buffer[i++]=s.charAt(1),{pos:i};if(s=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e).toString().slice(0,2),r.isInYearRange(s+e,r.yearrange.minyear,r.yearrange.maxyear)){var a=t.buffer.join("").substr(0,6);if(a!=r.leapday)o=!0;else{var l=parseInt(e,10);o=l%4===0?l%100===0?l%400===0?!0:!1:!0:!1}}else o=!1;if(o)return t.buffer[i-1]=s.charAt(0),t.buffer[i++]=s.charAt(1),t.buffer[i++]=e.charAt(0),{refreshFromBuffer:{start:i-3,end:i},pos:i}}return o},cardinality:2},{validator:function(e,t,i,n,r){return r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(t){var i=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[13-9]|1[012])"+i+"[0-3])|(02"+i+"[0-2])")},val2:function(t){var i=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|1[012])"+i+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+i+"30)|((0[13578]|1[02])"+i+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyDown:function(t,i,n,r){var o=e(this);if(t.ctrlKey&&t.keyCode==e.inputmask.keyCode.RIGHT){var s=new Date;o.val((s.getMonth()+1).toString()+s.getDate().toString()+s.getFullYear().toString()),o.triggerHandler("setvalue.inputmask")}}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyDown:function(t,i,n,r){var o=e(this);if(t.ctrlKey&&t.keyCode==e.inputmask.keyCode.RIGHT){var s=new Date;o.val(s.getFullYear().toString()+(s.getMonth()+1).toString()+s.getDate().toString()),o.triggerHandler("setvalue.inputmask")}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:new RegExp("[012]"),hrs24:new RegExp("2[0-4]|1[3-9]"),hrs:new RegExp("[01][0-9]|2[0-4]"),ampm:new RegExp("^[a|p|A|P][m|M]"),mspre:new RegExp("[0-5]"),ms:new RegExp("[0-5][0-9]")},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(e,t,i,n,r){if("24"==r.hourFormat&&24==parseInt(e,10))return t.buffer[i-1]="0",t.buffer[i]="0",{refreshFromBuffer:{start:i-1,end:i},c:"0"};var o=r.regex.hrs.test(e);if(!n&&!o&&(e.charAt(1)==r.timeseparator||-1!="-.:".indexOf(e.charAt(1)))&&(o=r.regex.hrs.test("0"+e.charAt(0))))return t.buffer[i-1]="0",t.buffer[i]=e.charAt(0),i++,{refreshFromBuffer:{start:i-2,end:i},pos:i,c:r.timeseparator};if(o&&"24"!==r.hourFormat&&r.regex.hrs24.test(e)){var s=parseInt(e,10);return 24==s?(t.buffer[i+5]="a",t.buffer[i+6]="m"):(t.buffer[i+5]="p",t.buffer[i+6]="m"),s-=12,10>s?(t.buffer[i]=s.toString(),t.buffer[i-1]="0"):(t.buffer[i]=s.toString().charAt(1),t.buffer[i-1]=s.toString().charAt(0)),{refreshFromBuffer:{start:i-1,end:i+6},c:t.buffer[i]}}return o},cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){var o=r.regex.hrspre.test(e);return n||o||!(o=r.regex.hrs.test("0"+e))?o:(t.buffer[i]="0",i++,{pos:i})},cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){var o=r.regex.mspre.test(e);return n||o||!(o=r.regex.ms.test("0"+e))?o:(t.buffer[i]="0",i++,{pos:i})},cardinality:1}]},t:{validator:function(e,t,i,n,r){return r.regex.ampm.test(e+"m")},casing:"lower",cardinality:1}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t\\m",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",placeholder:"hh:mm:ss",alias:"datetime",autoUnmask:!1},"hh:mm":{mask:"h:s",placeholder:"hh:mm",alias:"datetime",autoUnmask:!1},date:{alias:"dd/mm/yyyy"},"mm/yyyy":{mask:"1/y",placeholder:"mm/yyyy",leapday:"donotuse",separator:"/",alias:"mm/dd/yyyy"}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.definitions,{A:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,casing:"upper"},"#":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,casing:"upper"}}),e.extend(e.inputmask.defaults.aliases,{url:{mask:"ir",placeholder:"",separator:"",defaultPrefix:"http://",regex:{urlpre1:new RegExp("[fh]"),urlpre2:new RegExp("(ft|ht)"),urlpre3:new RegExp("(ftp|htt)"),urlpre4:new RegExp("(ftp:|http|ftps)"),urlpre5:new RegExp("(ftp:/|ftps:|http:|https)"),urlpre6:new RegExp("(ftp://|ftps:/|http:/|https:)"),urlpre7:new RegExp("(ftp://|ftps://|http://|https:/)"),urlpre8:new RegExp("(ftp://|ftps://|http://|https://)")},definitions:{i:{validator:function(e,t,i,n,r){return!0},cardinality:8,prevalidator:function(){for(var e=[],t=8,i=0;t>i;i++)e[i]=function(){var e=i;return{validator:function(t,i,n,r,o){if(o.regex["urlpre"+(e+1)]){var s,a=t;e+1-t.length>0&&(a=i.buffer.join("").substring(0,e+1-t.length)+""+a);var l=o.regex["urlpre"+(e+1)].test(a);if(!r&&!l){for(n-=e,s=0;s<o.defaultPrefix.length;s++)i.buffer[n]=o.defaultPrefix[s],n++;for(s=0;s<a.length-1;s++)i.buffer[n]=a[s],n++;return{pos:n}}return l}return!1},cardinality:e}}();return e}()},r:{validator:".",cardinality:50}},insertMode:!1,autoUnmask:!1},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function(e,t,i,n,r){return i-1>-1&&"."!=t.buffer[i-1]?(e=t.buffer[i-1]+e,e=i-2>-1&&"."!=t.buffer[i-2]?t.buffer[i-2]+e:"0"+e):e="00"+e,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(e)},cardinality:1}}},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,64}]@*{1,64}[.*{2,64}][.*{2,6}][.*{1,2}]",greedy:!1,onBeforePaste:function(e,t){return e=e.toLowerCase(),e.replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.aliases,{numeric:{mask:function(e){function t(t){for(var i="",n=0;n<t.length;n++)i+=e.definitions[t[n]]?"\\"+t[n]:t[n];return i}if(0!==e.repeat&&isNaN(e.integerDigits)&&(e.integerDigits=e.repeat),e.repeat=0,e.groupSeparator==e.radixPoint&&("."==e.radixPoint?e.groupSeparator=",":","==e.radixPoint?e.groupSeparator=".":e.groupSeparator="")," "===e.groupSeparator&&(e.skipOptionalPartCharacter=void 0),e.autoGroup=e.autoGroup&&""!=e.groupSeparator,e.autoGroup&&("string"==typeof e.groupSize&&isFinite(e.groupSize)&&(e.groupSize=parseInt(e.groupSize)),isFinite(e.integerDigits))){var i=Math.floor(e.integerDigits/e.groupSize),n=e.integerDigits%e.groupSize;e.integerDigits=parseInt(e.integerDigits)+(0==n?i-1:i)}e.placeholder.length>1&&(e.placeholder=e.placeholder.charAt(0)),e.radixFocus=e.radixFocus&&"0"==e.placeholder,e.definitions[";"]=e.definitions["~"];var r=t(e.prefix);return r+="[+]",r+="~{1,"+e.integerDigits+"}",void 0!=e.digits&&(isNaN(e.digits)||parseInt(e.digits)>0)&&(r+=e.digitsOptional?"["+(e.decimalProtect?":":e.radixPoint)+";{"+e.digits+"}]":(e.decimalProtect?":":e.radixPoint)+";{"+e.digits+"}"),""!=e.negationSymbol.back&&(r+="[-]"),r+=t(e.suffix),e.greedy=!1,r},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,groupSeparator:"",radixPoint:".",radixFocus:!0,groupSize:3,autoGroup:!1,allowPlus:!0,allowMinus:!0,negationSymbol:{front:"-",back:""},integerDigits:"+",prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,min:void 0,max:void 0,postFormat:function(t,i,n,r){var o=!1;t.length>=r.suffix.length&&t.join("").indexOf(r.suffix)==t.length-r.suffix.length&&(t.length=t.length-r.suffix.length,o=!0),i=i>=t.length?t.length-1:i<r.prefix.length?r.prefix.length:i;var s=!1,a=t[i];if(""==r.groupSeparator||-1!=e.inArray(r.radixPoint,t)&&i>=e.inArray(r.radixPoint,t)||new RegExp("["+e.inputmask.escapeRegex(r.negationSymbol.front)+"+]").test(a)){if(o)for(var l=0,c=r.suffix.length;c>l;l++)t.push(r.suffix.charAt(l));return{pos:i}}var d=t.slice();a==r.groupSeparator&&(d.splice(i--,1),a=d[i]),n?d[i]="?":d.splice(i,0,"?");var u=d.join(""),h=u;if(u.length>0&&r.autoGroup||n&&-1!=u.indexOf(r.groupSeparator)){var p=e.inputmask.escapeRegex(r.groupSeparator);s=0==u.indexOf(r.groupSeparator),u=u.replace(new RegExp(p,"g"),"");var f=u.split(r.radixPoint);if(u=""==r.radixPoint?u:f[0],u!=r.prefix+"?0"&&u.length>=r.groupSize+r.prefix.length)for(var g=new RegExp("([-+]?[\\d?]+)([\\d?]{"+r.groupSize+"})");g.test(u);)u=u.replace(g,"$1"+r.groupSeparator+"$2"),u=u.replace(r.groupSeparator+r.groupSeparator,r.groupSeparator);""!=r.radixPoint&&f.length>1&&(u+=r.radixPoint+f[1])}s=h!=u,t.length=u.length;for(var l=0,c=u.length;c>l;l++)t[l]=u.charAt(l);var m=e.inArray("?",t);if(n?t[m]=a:t.splice(m,1),!s&&o)for(var l=0,c=r.suffix.length;c>l;l++)t.push(r.suffix.charAt(l));return{pos:m,refreshFromBuffer:s,buffer:t}},onBeforeWrite:function(t,i,n,r){if(t&&"blur"==t.type){var o=i.join(""),s=o.replace(r.prefix,"");if(s=s.replace(r.suffix,""),s=s.replace(new RegExp(e.inputmask.escapeRegex(r.groupSeparator),"g"),""),","===r.radixPoint&&(s=s.replace(e.inputmask.escapeRegex(r.radixPoint),".")),isFinite(s)&&isFinite(r.min)&&parseFloat(s)<parseFloat(r.min))return e.extend(!0,{refreshFromBuffer:!0,buffer:(r.prefix+r.min).split("")},r.postFormat((r.prefix+r.min).split(""),0,!0,r));var a=""!=r.radixPoint?i.join("").split(r.radixPoint):[i.join("")],l=a[0].match(r.regex.integerPart(r)),c=2==a.length?a[1].match(r.regex.integerNPart(r)):void 0;!l||l[0]!=r.negationSymbol.front+"0"&&l[0]!=r.negationSymbol.front&&"+"!=l[0]||void 0!=c&&!c[0].match(/^0+$/)||i.splice(l.index,1);var d=e.inArray(r.radixPoint,i);if(-1!=d&&isFinite(r.digits)&&!r.digitsOptional){for(var u=1;u<=r.digits;u++)(void 0==i[d+u]||i[d+u]==r.placeholder.charAt(0))&&(i[d+u]="0");return{refreshFromBuffer:!0,buffer:i}}}if(r.autoGroup){var h=r.postFormat(i,n-1,!0,r);return h.caret=n<=r.prefix.length?h.pos:h.pos+1,h}},regex:{integerPart:function(t){return new RegExp("["+e.inputmask.escapeRegex(t.negationSymbol.front)+"+]?\\d+")},integerNPart:function(t){return new RegExp("[\\d"+e.inputmask.escapeRegex(t.groupSeparator)+"]+")}},signHandler:function(e,t,i,n,r){if(!n&&r.allowMinus&&"-"===e||r.allowPlus&&"+"===e){var o=t.buffer.join("").match(r.regex.integerPart(r));if(o&&o[0].length>0)return t.buffer[o.index]==("-"===e?"+":r.negationSymbol.front)?"-"==e?""!=r.negationSymbol.back?{pos:o.index,c:r.negationSymbol.front,remove:o.index,caret:i,insert:{pos:t.buffer.length-r.suffix.length-1,c:r.negationSymbol.back}}:{pos:o.index,c:r.negationSymbol.front,remove:o.index,caret:i}:""!=r.negationSymbol.back?{pos:o.index,c:"+",remove:[o.index,t.buffer.length-r.suffix.length-1],caret:i}:{pos:o.index,c:"+",remove:o.index,caret:i}:t.buffer[o.index]==("-"===e?r.negationSymbol.front:"+")?"-"==e&&""!=r.negationSymbol.back?{remove:[o.index,t.buffer.length-r.suffix.length-1],caret:i-1}:{remove:o.index,caret:i-1}:"-"==e?""!=r.negationSymbol.back?{pos:o.index,c:r.negationSymbol.front,caret:i+1,insert:{pos:t.buffer.length-r.suffix.length,c:r.negationSymbol.back}}:{pos:o.index,c:r.negationSymbol.front,caret:i+1}:{pos:o.index,c:e,caret:i+1}}return!1},radixHandler:function(t,i,n,r,o){if(!r&&t===o.radixPoint&&o.digits>0){var s=e.inArray(o.radixPoint,i.buffer),a=i.buffer.join("").match(o.regex.integerPart(o));if(-1!=s&&i.validPositions[s])return i.validPositions[s-1]?{caret:s+1}:{pos:a.index,c:a[0],caret:s+1};if(!a||"0"==a[0]&&a.index+1!=n)return i.buffer[a?a.index:n]="0",{pos:(a?a.index:n)+1}}return!1},leadingZeroHandler:function(t,i,n,r,o){var s=i.buffer.join("").match(o.regex.integerNPart(o)),a=e.inArray(o.radixPoint,i.buffer);if(s&&!r&&(-1==a||a>=n))if(0==s[0].indexOf("0")){n<o.prefix.length&&(n=s.index);var l=e.inArray(o.radixPoint,i._buffer),c=i._buffer&&i.buffer.slice(a).join("")==i._buffer.slice(l).join("")||0==parseInt(i.buffer.slice(a+1).join("")),d=i._buffer&&i.buffer.slice(s.index,a).join("")==i._buffer.slice(o.prefix.length,l).join("")||"0"==i.buffer.slice(s.index,a).join("");if(-1==a||c&&d)return i.buffer.splice(s.index,1),n=n>s.index?n-1:s.index,{pos:n,remove:s.index};if(s.index+1==n||"0"==t)return i.buffer.splice(s.index,1),n=s.index,{pos:n,remove:s.index}}else if("0"===t&&n<=s.index&&s[0]!=o.groupSeparator)return!1;return!0},postValidation:function(t,i){var n=!0,r=t.join(""),o=r.replace(i.prefix,"");return o=o.replace(i.suffix,""),o=o.replace(new RegExp(e.inputmask.escapeRegex(i.groupSeparator),"g"),""),","===i.radixPoint&&(o=o.replace(e.inputmask.escapeRegex(i.radixPoint),".")),o=o.replace(new RegExp("^"+e.inputmask.escapeRegex(i.negationSymbol.front)),"-"),o=o.replace(new RegExp(e.inputmask.escapeRegex(i.negationSymbol.back)+"$"),""),isFinite(o)&&isFinite(i.max)&&(n=parseFloat(o)<=parseFloat(i.max)),n},definitions:{"~":{validator:function(t,i,n,r,o){var s=o.signHandler(t,i,n,r,o);if(!s&&(s=o.radixHandler(t,i,n,r,o),!s&&(s=r?new RegExp("[0-9"+e.inputmask.escapeRegex(o.groupSeparator)+"]").test(t):new RegExp("[0-9]").test(t),s===!0&&(s=o.leadingZeroHandler(t,i,n,r,o),s===!0)))){var a=e.inArray(o.radixPoint,i.buffer);s=o.digitsOptional===!1&&n>a&&!r?{pos:n,remove:n}:{pos:n}}return s},cardinality:1,prevalidator:null},"+":{validator:function(e,t,i,n,r){var o=r.signHandler(e,t,i,n,r);return!o&&(n&&r.allowMinus&&e===r.negationSymbol.front||r.allowMinus&&"-"==e||r.allowPlus&&"+"==e)&&(o="-"==e?""!=r.negationSymbol.back?{pos:i,c:"-"===e?r.negationSymbol.front:"+",caret:i+1,insert:{pos:t.buffer.length,c:r.negationSymbol.back}}:{pos:i,c:"-"===e?r.negationSymbol.front:"+",caret:i+1}:!0),o},cardinality:1,prevalidator:null,placeholder:""},"-":{validator:function(e,t,i,n,r){var o=r.signHandler(e,t,i,n,r);return!o&&n&&r.allowMinus&&e===r.negationSymbol.back&&(o=!0),o},cardinality:1,prevalidator:null,placeholder:""},":":{validator:function(t,i,n,r,o){var s=o.signHandler(t,i,n,r,o);if(!s){var a="["+e.inputmask.escapeRegex(o.radixPoint)+"]";s=new RegExp(a).test(t),s&&i.validPositions[n]&&i.validPositions[n].match.placeholder==o.radixPoint&&(s={caret:n+1})}return s},cardinality:1,prevalidator:null,placeholder:function(e){return e.radixPoint}}},insertMode:!0,autoUnmask:!1,unmaskAsNumber:!1,onUnMask:function(t,i,n){var r=t.replace(n.prefix,"");return r=r.replace(n.suffix,""),r=r.replace(new RegExp(e.inputmask.escapeRegex(n.groupSeparator),"g"),""),n.unmaskAsNumber?(r=r.replace(e.inputmask.escapeRegex.call(this,n.radixPoint),"."),Number(r)):r},isComplete:function(t,i){var n=t.join(""),r=t.slice();if(i.postFormat(r,0,!0,i),r.join("")!=n)return!1;var o=n.replace(i.prefix,"");return o=o.replace(i.suffix,""),o=o.replace(new RegExp(e.inputmask.escapeRegex(i.groupSeparator),"g"),""),","===i.radixPoint&&(o=o.replace(e.inputmask.escapeRegex(i.radixPoint),".")),isFinite(o)},onBeforeMask:function(t,i){if(""!=i.radixPoint&&isFinite(t))t=t.toString().replace(".",i.radixPoint);else{var n=t.match(/,/g),r=t.match(/\./g);r&&n?r.length>n.length?(t=t.replace(/\./g,""),t=t.replace(",",i.radixPoint)):n.length>r.length?(t=t.replace(/,/g,""),t=t.replace(".",i.radixPoint)):t=t.indexOf(".")<t.indexOf(",")?t.replace(/\./g,""):t=t.replace(/,/g,""):t=t.replace(new RegExp(e.inputmask.escapeRegex(i.groupSeparator),"g"),"")}return 0==i.digits&&(-1!=t.indexOf(".")?t=t.substring(0,t.indexOf(".")):-1!=t.indexOf(",")&&(t=t.substring(0,t.indexOf(",")))),t},canClearPosition:function(t,i,n,r,o){var s=t.validPositions[i].input,a=s!=o.radixPoint&&isFinite(s)||i==n||s==o.groupSeparator||s==o.negationSymbol.front||s==o.negationSymbol.back;if(a&&isFinite(s)){var l;if(!r&&t.buffer){l=t.buffer.join("").substr(0,i).match(o.regex.integerNPart(o));var c=i+1,d=null==l||0==parseInt(l[0].replace(new RegExp(e.inputmask.escapeRegex(o.groupSeparator),"g"),""));if(d)for(;t.validPositions[c]&&(t.validPositions[c].input==o.groupSeparator||"0"==t.validPositions[c].input);)delete t.validPositions[c],c++}var u=[];for(var h in t.validPositions)u.push(t.validPositions[h].input);l=u.join("").match(o.regex.integerNPart(o));var p=e.inArray(o.radixPoint,t.buffer);if(l&&(-1==p||p>=i))if(0==l[0].indexOf("0"))a=l.index!=i||-1==p;else{var f=parseInt(l[0].replace(new RegExp(e.inputmask.escapeRegex(o.groupSeparator),"g"),""));-1!=p&&10>f&&"0"==o.placeholder.charAt(0)&&(t.validPositions[i].input="0",t.p=o.prefix.length+1,a=!1)}}return a}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:"0",radixPoint:""}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.aliases,{phone:{url:"phone-codes/phone-codes.js",countrycode:"",mask:function(t){t.definitions["#"]=t.definitions[9];var i=[];return e.ajax({url:t.url,async:!1,dataType:"json",success:function(e){i=e},error:function(e,i,n){alert(n+" - "+t.url)}}),i=i.sort((function(e,t){return(e.mask||e)<(t.mask||t)?-1:1}))},keepStatic:!1,nojumps:!0,nojumpsThreshold:1,onBeforeMask:function(e,t){var i=e.replace(/^0/g,"");return(i.indexOf(t.countrycode)>1||-1==i.indexOf(t.countrycode))&&(i="+"+t.countrycode+i),i}},phonebe:{alias:"phone",url:"phone-codes/phone-be.js",countrycode:"32",nojumpsThreshold:4}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.aliases,{Regex:{mask:"r",greedy:!1,repeat:"*",regex:null,regexTokens:null,tokenizer:/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,quantifierFilter:/[0-9]+[^,]/,isComplete:function(e,t){return new RegExp(t.regex).test(e.join(""))},definitions:{r:{validator:function(t,i,n,r,o){function s(e,t){this.matches=[],this.isGroup=e||!1,this.isQuantifier=t||!1,this.quantifier={min:1,max:1},this.repeaterPart=void 0}function a(){var e,t,i=new s,n=[];for(o.regexTokens=[];e=o.tokenizer.exec(o.regex);)switch(t=e[0],t.charAt(0)){case"(":n.push(new s(!0));break;case")":var r=n.pop();n.length>0?n[n.length-1].matches.push(r):i.matches.push(r);break;case"{":case"+":case"*":var a=new s(!1,!0);t=t.replace(/[{}]/g,"");var l=t.split(","),c=isNaN(l[0])?l[0]:parseInt(l[0]),d=1==l.length?c:isNaN(l[1])?l[1]:parseInt(l[1]);if(a.quantifier={min:c,max:d},n.length>0){var u=n[n.length-1].matches;if(e=u.pop(),!e.isGroup){var r=new s(!0);r.matches.push(e),e=r}u.push(e),u.push(a)}else{if(e=i.matches.pop(),!e.isGroup){var r=new s(!0);r.matches.push(e),e=r}i.matches.push(e),i.matches.push(a)}break;default:n.length>0?n[n.length-1].matches.push(t):i.matches.push(t)}i.matches.length>0&&o.regexTokens.push(i)}function l(t,i){var n=!1;i&&(d+="(",h++);for(var r=0;r<t.matches.length;r++){var o=t.matches[r];if(1==o.isGroup)n=l(o,!0);else if(1==o.isQuantifier){var s=e.inArray(o,t.matches),a=t.matches[s-1],c=d;if(isNaN(o.quantifier.max)){for(;o.repeaterPart&&o.repeaterPart!=d&&o.repeaterPart.length>d.length&&!(n=l(a,!0)););n=n||l(a,!0),n&&(o.repeaterPart=d),d=c+o.quantifier.max}else{for(var u=0,f=o.quantifier.max-1;f>u&&!(n=l(a,!0));u++);d=c+"{"+o.quantifier.min+","+o.quantifier.max+"}"}}else if(void 0!=o.matches)for(var g=0;g<o.length&&!(n=l(o[g],i));g++);else{var m;if("["==o.charAt(0)){m=d,m+=o;for(var v=0;h>v;v++)m+=")";var b=new RegExp("^("+m+")$");n=b.test(p)}else for(var y=0,w=o.length;w>y;y++)if("\\"!=o.charAt(y)){m=d,m+=o.substr(0,y+1),m=m.replace(/\|$/,"");for(var v=0;h>v;v++)m+=")";var b=new RegExp("^("+m+")$");if(n=b.test(p))break}d+=o}if(n)break}return i&&(d+=")",h--),n}null==o.regexTokens&&a();var c=i.buffer.slice(),d="",u=!1,h=0;c.splice(n,0,t);for(var p=c.join(""),f=0;f<o.regexTokens.length;f++){var s=o.regexTokens[f];if(u=l(s,s.isGroup))break}return u},cardinality:1}}}}),e.fn.inputmask}(jQuery);(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){e(require("jquery"))}else{e(window.jQuery)}})((function(e){"use strict";var t=0;e.ajaxTransport("iframe",(function(i){if(i.async){var n=i.initialIframeSrc||"javascript:false;",r,o,s;return{send:function(a,l){r=e('<form style="display:none;"></form>');r.attr("accept-charset",i.formAcceptCharset);s=/\?/.test(i.url)?"&":"?";if(i.type==="DELETE"){i.url=i.url+s+"_method=DELETE";i.type="POST"}else if(i.type==="PUT"){i.url=i.url+s+"_method=PUT";i.type="POST"}else if(i.type==="PATCH"){i.url=i.url+s+"_method=PATCH";i.type="POST"}t+=1;o=e('<iframe src="'+n+'" name="iframe-transport-'+t+'"></iframe>').bind("load",(function(){var t,s=e.isArray(i.paramName)?i.paramName:[i.paramName];o.unbind("load").bind("load",(function(){var t;try{t=o.contents();if(!t.length||!t[0].firstChild){throw new Error}}catch(e){t=undefined}l(200,"success",{iframe:t});e('<iframe src="'+n+'"></iframe>').appendTo(r);window.setTimeout((function(){r.remove()}),0)}));r.prop("target",o.prop("name")).prop("action",i.url).prop("method",i.type);if(i.formData){e.each(i.formData,(function(t,i){e('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(r)}))}if(i.fileInput&&i.fileInput.length&&i.type==="POST"){t=i.fileInput.clone();i.fileInput.after((function(e){return t[e]}));if(i.paramName){i.fileInput.each((function(t){e(this).prop("name",s[t]||i.paramName)}))}r.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data");i.fileInput.removeAttr("form")}r.submit();if(t&&t.length){i.fileInput.each((function(i,n){var r=e(t[i]);e(n).prop("name",r.prop("name")).attr("form",r.attr("form"));r.replaceWith(n)}))}}));r.append(o).appendTo(document.body)},abort:function(){if(o){o.unbind("load").prop("src",n)}if(r){r.remove()}}}}}));e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var i=t&&t[0];return i&&e.isXMLDoc(i)?i:e.parseXML(i.XMLDocument&&i.XMLDocument.xml||e(i.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}));(function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(e){this.el=e;this.dragleave=t(this.dragleave,this);this.dragenter=t(this.dragenter,this);if(this.supportsEventConstructors()){this.first=false;this.second=false;this.el.addEventListener("dragenter",this.dragenter,false);this.el.addEventListener("dragleave",this.dragleave,false)}}e.prototype.dragenter=function(e){if(this.first){return this.second=true}else{this.first=true;return this.el.dispatchEvent(new CustomEvent("dragster:enter",{bubbles:true,cancelable:true,detail:{dataTransfer:e.dataTransfer}}))}};e.prototype.dragleave=function(e){if(this.second){this.second=false}else if(this.first){this.first=false}if(!this.first&&!this.second){return this.el.dispatchEvent(new CustomEvent("dragster:leave",{bubbles:true,cancelable:true,detail:{dataTransfer:e.dataTransfer}}))}};e.prototype.removeListeners=function(){this.el.removeEventListener("dragenter",this.dragenter,false);return this.el.removeEventListener("dragleave",this.dragleave,false)};e.prototype.supportsEventConstructors=function(){try{new CustomEvent("z")}catch(e){return false}return true};e.prototype.reset=function(){this.first=false;return this.second=false};return e}();if(typeof module==="undefined"){window.Dragster=e}else{module.exports=e}}).call(this);(function(){var e;e=function(){function e(e,t){var i;if(t==null){t=[]}i={script:null,ajaxQueue:false,autoUpload:false,classDragOver:"is-dragover",onUploadingFiles:function(e,t){},onSelectFiles:function(e,t){},onSuccessFile:function(e,t,i){},onComplete:function(e,t){},onFileError:function(e,t){},onFileFail:function(e,t){}};this.options=$.extend(i,t);this.files=[];$.each($(e),function(e){return function(t,i){var n,r;n=$(i);r=n.find("input[type=file]");n.data("pos",t);r.on("change",(function(t){var i;i=$(t.currentTarget).prop("files");e.options.onSelectFiles(i,n);e.files[n.data("pos")]=t.target.files;if(e.options.autoUpload){return e.submit(n,t.target.files)}}));return e.initDrag(n)}}(this))}e.prototype.initDrag=function(e){var t;if(this.isAdvancedUpload()){t=false;return e.on("drag dragstart dragend dragover dragenter dragleave drop",(function(e){e.preventDefault();e.stopPropagation()})).on("dragover dragenter",function(t){return function(){e.addClass(t.options.classDragOver)}}(this)).on("dragleave dragend drop",function(t){return function(){e.removeClass(t.options.classDragOver)}}(this)).on("drop",function(i){return function(n){t=n.originalEvent.dataTransfer.files;i.options.onSelectFiles(t,e);if(i.options.autoUpload){return i.submit(e,t)}else{return i.files[e.data("pos")]=t}}}(this))}};e.prototype.startUpload=function(e){var t;t=this.files[e.data("pos")];if(t){return this.submit(e,t)}};e.prototype.submit=function(e,t){var i,n,r,o,s,a,l,c,d,u;if(e.hasClass("is-uploading")){return false}e.addClass("is-uploading");d=t.length;u=1;r=e.find("input[type=file]").attr("name");this.options.onUploadingFiles(u,d);c=[];for(s=o=0,a=t.length;o<a;s=++o){n=t[s];l=new FormData;l.append(r+"[]",n);l.append("position",s);i=this.options.ajaxQueue?$.ajaxQueue:$.ajax;c.push(i({url:this.options.script,type:"POST",data:l,processData:false,contentType:false,cache:false,complete:function(i){return function(){u++;if(u>=d+1){i.options.onComplete(t,e);i.removeFiles(e);return e.removeClass("is-uploading")}else{return i.options.onUploadingFiles(u,d)}}}(this),success:function(t){return function(i){t.options.onSuccessFile(n,i,e)}}(this),fail:function(t){return function(i){t.options.onFileFail(i,e)}}(this),error:function(t){return function(i){t.options.onFileError(i,e)}}(this)}))}return c};e.prototype.removeFiles=function(e){return this.files[e.data("pos")]=null};e.prototype.isAdvancedUpload=function(){var e;e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window};e.prototype.isFormData=function(){return"FormData"in window};e.prototype.isFileReader=function(){return"FileReader"in window};e.prototype.isDraggable=function(){var e;e=document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e};return e}();if(typeof module==="undefined"){window.Dropzone=e}else{module.exports=e}return e}).call(this);(function(e,t){var i="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color outlineColor".split(" "),n=/^([\-+])=\s*(\d+\.?\d*)/,r=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],o=e.Color=function(t,i,n,r){return new e.Color.fn.parse(t,i,n,r)},s={rgba:{cache:"_rgba",props:{red:{idx:0,type:"byte",empty:true},green:{idx:1,type:"byte",empty:true},blue:{idx:2,type:"byte",empty:true},alpha:{idx:3,type:"percent",def:1}}},hsla:{cache:"_hsla",props:{hue:{idx:0,type:"degrees",empty:true},saturation:{idx:1,type:"percent",empty:true},lightness:{idx:2,type:"percent",empty:true}}}},a={byte:{floor:true,min:0,max:255},percent:{min:0,max:1},degrees:{mod:360,floor:true}},l=s.rgba.props,c=o.support={},d,u=e.each;s.hsla.props.alpha=l.alpha;function h(e,t,i){var n=a[t.type]||{},r=t.empty||i;if(r&&e==null){return null}if(t.def&&e==null){return t.def}if(n.floor){e=~~e}else{e=parseFloat(e)}if(e==null||isNaN(e)){return t.def}if(n.mod){e=e%n.mod;return e<0?n.mod+e:e}return n.min>e?n.min:n.max<e?n.max:e}function p(t){var i=o(),n=i._rgba=[];t=t.toLowerCase();u(r,(function(e,r){var o=r.re.exec(t),a=o&&r.parse(o),l,c=r.space||"rgba",d=s[c].cache;if(a){l=i[c](a);i[d]=l[d];n=i._rgba=l._rgba;return false}}));if(n.length!==0){if(Math.max.apply(Math,n)===0){e.extend(n,d.transparent)}return i}if(t=d[t]){return t}}o.fn=o.prototype={constructor:o,parse:function(i,n,r,a){if(i===t){this._rgba=[null,null,null,null];return this}if(i instanceof e||i.nodeType){i=i instanceof e?i.css(n):e(i).css(n);n=t}var c=this,f=e.type(i),g=this._rgba=[],m;if(n!==t){i=[i,n,r,a];f="array"}if(f==="string"){return this.parse(p(i)||d._default)}if(f==="array"){u(l,(function(e,t){g[t.idx]=h(i[t.idx],t)}));return this}if(f==="object"){if(i instanceof o){u(s,(function(e,t){if(i[t.cache]){c[t.cache]=i[t.cache].slice()}}))}else{u(s,(function(e,t){u(t.props,(function(e,n){var r=t.cache;if(!c[r]&&t.to){if(i[e]==null||e==="alpha"){return}c[r]=t.to(c._rgba)}c[r][n.idx]=h(i[e],n,true)}))}))}return this}},is:function(e){var t=o(e),i=true,n=this;u(s,(function(e,r){var o=t[r.cache],s;if(o){s=n[r.cache]||r.to&&r.to(n._rgba)||[];u(r.props,(function(e,t){if(o[t.idx]!=null){i=o[t.idx]===s[t.idx];return i}}))}return i}));return i},_space:function(){var e=[],t=this;u(s,(function(i,n){if(t[n.cache]){e.push(i)}}));return e.pop()},transition:function(e,t){var i=o(e),n=i._space(),r=s[n],l=this[r.cache]||r.to(this._rgba),c=l.slice();i=i[r.cache];u(r.props,(function(e,n){var r=n.idx,o=l[r],s=i[r],d=a[n.type]||{};if(s===null){return}if(o===null){c[r]=s}else{if(d.mod){if(s-o>d.mod/2){o+=d.mod}else if(o-s>d.mod/2){o-=d.mod}}c[n.idx]=h((s-o)*t+o,n)}}));return this[n](c)},blend:function(t){if(this._rgba[3]===1){return this}var i=this._rgba.slice(),n=i.pop(),r=o(t)._rgba;return o(e.map(i,(function(e,t){return(1-n)*r[t]+n*e})))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,(function(e,t){return e==null?t>2?1:0:e}));if(i[3]===1){i.pop();t="rgb("}return t+i.join(",")+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),(function(e,t){if(e==null){e=t>2?1:0}if(t&&t<3){e=Math.round(e*100)+"%"}return e}));if(i[3]===1){i.pop();t="hsl("}return t+i.join(",")+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();if(t){i.push(~~(n*255))}return"#"+e.map(i,(function(e,t){e=(e||0).toString(16);return e.length===1?"0"+e:e})).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}};o.fn.parse.prototype=o.fn;function f(e,t,i){i=(i+1)%1;if(i*6<1){return e+(t-e)*6*i}if(i*2<1){return t}if(i*3<2){return e+(t-e)*(2/3-i)*6}return e}s.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null){return[null,null,null,e[3]]}var t=e[0]/255,i=e[1]/255,n=e[2]/255,r=e[3],o=Math.max(t,i,n),s=Math.min(t,i,n),a=o-s,l=o+s,c=l*.5,d,u;if(s===o){d=0}else if(t===o){d=60*(i-n)/a+360}else if(i===o){d=60*(n-t)/a+120}else{d=60*(t-i)/a+240}if(c===0||c===1){u=c}else if(c<=.5){u=a/l}else{u=a/(2-l)}return[Math.round(d)%360,u,c,r==null?1:r]};s.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null){return[null,null,null,e[3]]}var t=e[0]/360,i=e[1],n=e[2],r=e[3],o=n<=.5?n*(1+i):n+i-n*i,s=2*n-o,a,l,c;return[Math.round(f(s,o,t+1/3)*255),Math.round(f(s,o,t)*255),Math.round(f(s,o,t-1/3)*255),r]};u(s,(function(i,r){var s=r.props,a=r.cache,l=r.to,c=r.from;o.fn[i]=function(i){if(l&&!this[a]){this[a]=l(this._rgba)}if(i===t){return this[a].slice()}var n=e.type(i),r=n==="array"||n==="object"?i:arguments,d=this[a].slice(),p;u(s,(function(e,t){var i=r[n==="object"?e:t.idx];if(i==null){i=d[t.idx]}d[t.idx]=h(i,t)}));if(c){p=o(c(d));p[a]=d;return p}else{return o(d)}};u(s,(function(t,r){if(o.fn[t]){return}o.fn[t]=function(o){var s=e.type(o),a=t==="alpha"?this._hsla?"hsla":"rgba":i,l=this[a](),c=l[r.idx],d;if(s==="undefined"){return c}if(s==="function"){o=o.call(this,c);s=e.type(o)}if(o==null&&r.empty){return this}if(s==="string"){d=n.exec(o);if(d){o=c+parseFloat(d[2])*(d[1]==="+"?1:-1)}}l[r.idx]=o;return this[a](l)}}))}));u(i,(function(t,i){e.cssHooks[i]={set:function(t,n){var r,s,a;if(e.type(n)!=="string"||(r=p(n))){n=o(r||n);if(!c.rgba&&n._rgba[3]!==1){a=i==="backgroundColor"?t.parentNode:t;do{s=e.curCSS(a,"backgroundColor")}while((s===""||s==="transparent")&&(a=a.parentNode)&&a.style);n=n.blend(s&&s!=="transparent"?s:"_default")}n=n.toRgbaString()}t.style[i]=n}};e.fx.step[i]=function(t){if(!t.colorInit){t.start=o(t.elem,i);t.end=o(t.end);t.colorInit=true}e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}}));e((function(){var e=document.createElement("div"),t=e.style;t.cssText="background-color:rgba(1,1,1,.5)";c.rgba=t.backgroundColor.indexOf("rgba")>-1}));d=e.Color.names={aqua:"#00ffff",azure:"#f0ffff",beige:"#f5f5dc",black:"#000000",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",violet:"#800080",red:"#ff0000",silver:"#c0c0c0",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);(function(e){e.Jcrop=function(t,i){var n=e.extend({},e.Jcrop.defaults),r,o=navigator.userAgent.toLowerCase(),s=/msie/.test(o),a=/msie [1-6]\./.test(o);function l(e){return Math.round(e)+"px"}function c(e){return n.baseClass+"-"+e}function d(){return e.fx.step.hasOwnProperty("backgroundColor")}function u(t){var i=e(t).offset();return[i.left,i.top]}function h(e){return[e.pageX-r[0],e.pageY-r[1]]}function p(t){if(typeof t!=="object")t={};n=e.extend(n,t);e.each(["onChange","onSelect","onRelease","onDblClick"],(function(e,t){if(typeof n[t]!=="function")n[t]=function(){}}))}function f(e,t,i){r=u(M);te.setCursor(e==="move"?e:e+"-resize");if(e==="move"){return te.activateHandlers(m(t),C,i)}var n=Q.getFixed();var o=v(e);var s=Q.getCorner(v(o));Q.setPressed(Q.getCorner(o));Q.setCurrent(s);te.activateHandlers(g(e,n),C,i)}function g(e,t){return function(i){if(!n.aspectRatio){switch(e){case"e":i[1]=t.y2;break;case"w":i[1]=t.y2;break;case"n":i[0]=t.x2;break;case"s":i[0]=t.x2;break}}else{switch(e){case"e":i[1]=t.y+1;break;case"w":i[1]=t.y+1;break;case"n":i[0]=t.x+1;break;case"s":i[0]=t.x+1;break}}Q.setCurrent(i);ee.update()}}function m(e){var t=e;ie.watchKeys();return function(e){Q.moveOffset([e[0]-t[0],e[1]-t[1]]);t=e;ee.update()}}function v(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function b(e){return function(t){if(n.disabled){return false}if(e==="move"&&!n.allowMove){return false}r=u(M);q=true;f(e,h(t));t.stopPropagation();t.preventDefault();return false}}function y(e,t,i){var n=e.width(),r=e.height();if(n>t&&t>0){n=t;r=t/e.width()*e.height()}if(r>i&&i>0){r=i;n=i/e.height()*e.width()}j=e.width()/n;U=e.height()/r;e.width(n).height(r)}function w(e){return{x:e.x*j,y:e.y*U,x2:e.x2*j,y2:e.y2*U,w:e.w*j,h:e.h*U}}function C(e){var t=Q.getFixed();if(t.w>n.minSelect[0]&&t.h>n.minSelect[1]){ee.enableHandles();ee.done()}else{ee.release()}te.setCursor(n.allowSelect?"crosshair":"default")}function _(e){if(n.disabled){return false}if(!n.allowSelect){return false}q=true;r=u(M);ee.disableHandles();te.setCursor("crosshair");var t=h(e);Q.setPressed(t);ee.update();te.activateHandlers(S,C,e.type.substring(0,5)==="touch");ie.watchKeys();e.stopPropagation();e.preventDefault();return false}function S(e){Q.setCurrent(e);ee.update()}function A(){var t=e("<div></div>").addClass(c("tracker"));if(s){t.css({opacity:0,backgroundColor:"white"})}return t}if(typeof t!=="object"){t=e(t)[0]}if(typeof i!=="object"){i={}}p(i);var x={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0};var E=e(t),T=true;if(t.tagName=="IMG"){if(E[0].width!=0&&E[0].height!=0){E.width(E[0].width);E.height(E[0].height)}else{var D=new Image;D.src=E[0].src;E.width(D.width);E.height(D.height)}var M=E.clone().removeAttr("id").css(x).show();M.width(E.width());M.height(E.height());E.after(M).hide()}else{M=E.css(x).show();T=false;if(n.shade===null){n.shade=true}}y(M,n.boxWidth,n.boxHeight);var k=M.width(),P=M.height(),R=e("<div />").width(k).height(P).addClass(c("holder")).css({position:"relative",backgroundColor:n.bgColor}).insertAfter(E).append(M);if(n.addClass){R.addClass(n.addClass)}var I=e("<div />"),O=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),N=e("<div />").width("100%").height("100%").css("zIndex",320),L=e("<div />").css({position:"absolute",zIndex:600}).dblclick((function(){var e=Q.getFixed();n.onDblClick.call(ve,e)})).insertBefore(M).append(O,N);if(T){I=e("<img />").attr("src",M.attr("src")).css(x).width(k).height(P),O.append(I)}if(a){L.css({overflowY:"hidden"})}var F=n.boundary;var $=A().width(k+F*2).height(P+F*2).css({position:"absolute",top:l(-F),left:l(-F),zIndex:290}).mousedown(_);var G=n.bgColor,B=n.bgOpacity,H,z,W,V,j,U,Y=true,q,K,X;r=u(M);var Z=function(){function e(){var e={},t=["touchstart","touchmove","touchend"],i=document.createElement("div"),n;try{for(n=0;n<t.length;n++){var r=t[n];r="on"+r;var o=r in i;if(!o){i.setAttribute(r,"return;");o=typeof i[r]=="function"}e[t[n]]=o}return e.touchstart&&e.touchend&&e.touchmove}catch(e){return false}}function t(){if(n.touchSupport===true||n.touchSupport===false)return n.touchSupport;else return e()}return{createDragger:function(e){return function(t){if(n.disabled){return false}if(e==="move"&&!n.allowMove){return false}r=u(M);q=true;f(e,h(Z.cfilter(t)),true);t.stopPropagation();t.preventDefault();return false}},newSelection:function(e){return _(Z.cfilter(e))},cfilter:function(e){e.pageX=e.originalEvent.changedTouches[0].pageX;e.pageY=e.originalEvent.changedTouches[0].pageY;return e},isSupported:e,support:t()}}();var Q=function(){var e=0,t=0,i=0,r=0,o,s;function a(n){n=p(n);i=e=n[0];r=t=n[1]}function l(e){e=p(e);o=e[0]-i;s=e[1]-r;i=e[0];r=e[1]}function c(){return[o,s]}function d(n){var o=n[0],s=n[1];if(0>e+o){o-=o+e}if(0>t+s){s-=s+t}if(P<r+s){s+=P-(r+s)}if(k<i+o){o+=k-(i+o)}e+=o;i+=o;t+=s;r+=s}function u(e){var t=h();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function h(){if(!n.aspectRatio){return g()}var o=n.aspectRatio,s=n.minSize[0]/j,a=n.maxSize[0]/j,l=n.maxSize[1]/U,c=i-e,d=r-t,u=Math.abs(c),h=Math.abs(d),p=u/h,v,b,y,w;if(a===0){a=k*10}if(l===0){l=P*10}if(p<o){b=r;y=h*o;v=c<0?e-y:y+e;if(v<0){v=0;w=Math.abs((v-e)/o);b=d<0?t-w:w+t}else if(v>k){v=k;w=Math.abs((v-e)/o);b=d<0?t-w:w+t}}else{v=i;w=u/o;b=d<0?t-w:t+w;if(b<0){b=0;y=Math.abs((b-t)*o);v=c<0?e-y:y+e}else if(b>P){b=P;y=Math.abs(b-t)*o;v=c<0?e-y:y+e}}if(v>e){if(v-e<s){v=e+s}else if(v-e>a){v=e+a}if(b>t){b=t+(v-e)/o}else{b=t-(v-e)/o}}else if(v<e){if(e-v<s){v=e-s}else if(e-v>a){v=e-a}if(b>t){b=t+(e-v)/o}else{b=t-(e-v)/o}}if(v<0){e-=v;v=0}else if(v>k){e-=v-k;v=k}if(b<0){t-=b;b=0}else if(b>P){t-=b-P;b=P}return m(f(e,t,v,b))}function p(e){if(e[0]<0)e[0]=0;if(e[1]<0)e[1]=0;if(e[0]>k)e[0]=k;if(e[1]>P)e[1]=P;return[Math.round(e[0]),Math.round(e[1])]}function f(e,t,i,n){var r=e,o=i,s=t,a=n;if(i<e){r=i;o=e}if(n<t){s=n;a=t}return[r,s,o,a]}function g(){var n=i-e,o=r-t,s;if(H&&Math.abs(n)>H){i=n>0?e+H:e-H}if(z&&Math.abs(o)>z){r=o>0?t+z:t-z}if(V/U&&Math.abs(o)<V/U){r=o>0?t+V/U:t-V/U}if(W/j&&Math.abs(n)<W/j){i=n>0?e+W/j:e-W/j}if(e<0){i-=e;e-=e}if(t<0){r-=t;t-=t}if(i<0){e-=i;i-=i}if(r<0){t-=r;r-=r}if(i>k){s=i-k;e-=s;i-=s}if(r>P){s=r-P;t-=s;r-=s}if(e>k){s=e-P;r-=s;t-=s}if(t>P){s=t-P;r-=s;t-=s}return m(f(e,t,i,r))}function m(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}return{flipCoords:f,setPressed:a,setCurrent:l,getOffset:c,moveOffset:d,getCorner:u,getFixed:h}}();var J=function(){var t=false,i=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),r={top:c(),left:c().height(P),right:c().height(P),bottom:c()};function o(e,t){r.left.css({height:l(t)});r.right.css({height:l(t)})}function s(){return a(Q.getFixed())}function a(e){r.top.css({left:l(e.x),width:l(e.w),height:l(e.y)});r.bottom.css({top:l(e.y2),left:l(e.x),width:l(e.w),height:l(P-e.y2)});r.right.css({left:l(e.x2),width:l(k-e.x2)});r.left.css({width:l(e.x)})}function c(){return e("<div />").css({position:"absolute",backgroundColor:n.shadeColor||n.bgColor}).appendTo(i)}function d(){if(!t){t=true;i.insertBefore(M);s();ee.setBgOpacity(1,0,1);I.hide();u(n.shadeColor||n.bgColor,1);if(ee.isAwake()){p(n.bgOpacity,1)}else p(1,1)}}function u(e,t){ge(g(),e,t)}function h(){if(t){i.remove();I.show();t=false;if(ee.isAwake()){ee.setBgOpacity(n.bgOpacity,1,1)}else{ee.setBgOpacity(1,1,1);ee.disableHandles()}ge(R,0,1)}}function p(e,r){if(t){if(n.bgFade&&!r){i.animate({opacity:1-e},{queue:false,duration:n.fadeTime})}else i.css({opacity:1-e})}}function f(){n.shade?d():h();if(ee.isAwake())p(n.bgOpacity)}function g(){return i.children()}return{update:s,updateRaw:a,getShades:g,setBgColor:u,enable:d,disable:h,resize:o,refresh:f,opacity:p}}();var ee=function(){var t,i=370,r={},o={},s={},a=false;function d(t){var i=e("<div />").css({position:"absolute",opacity:n.borderOpacity}).addClass(c(t));O.append(i);return i}function u(t,i){var n=e("<div />").mousedown(b(t)).css({cursor:t+"-resize",position:"absolute",zIndex:i}).addClass("ord-"+t);if(Z.support){n.bind("touchstart.jcrop",Z.createDragger(t))}N.append(n);return n}function h(e){var t=n.handleSize,r=u(e,i++).css({opacity:n.handleOpacity}).addClass(c("handle"));if(t){r.width(t).height(t)}return r}function p(e){return u(e,i++).addClass("jcrop-dragbar")}function f(e){var t;for(t=0;t<e.length;t++){s[e[t]]=p(e[t])}}function g(e){var t,i;for(i=0;i<e.length;i++){switch(e[i]){case"n":t="hline";break;case"s":t="hline bottom";break;case"e":t="vline right";break;case"w":t="vline";break}r[e[i]]=d(t)}}function m(e){var t;for(t=0;t<e.length;t++){o[e[t]]=h(e[t])}}function v(e,t){if(!n.shade){I.css({top:l(-t),left:l(-e)})}L.css({top:l(t),left:l(e)})}function y(e,t){L.width(Math.round(e)).height(Math.round(t))}function C(){var e=Q.getFixed();Q.setPressed([e.x,e.y]);Q.setCurrent([e.x2,e.y2]);_()}function _(e){if(t){return S(e)}}function S(e){var i=Q.getFixed();y(i.w,i.h);v(i.x,i.y);if(n.shade)J.updateRaw(i);t||E();if(e){n.onSelect.call(ve,w(i))}else{n.onChange.call(ve,w(i))}}function x(e,i,r){if(!t&&!i)return;if(n.bgFade&&!r){M.animate({opacity:e},{queue:false,duration:n.fadeTime})}else{M.css("opacity",e)}}function E(){L.show();if(n.shade)J.opacity(B);else x(B,true);t=true}function T(){P();L.hide();if(n.shade)J.opacity(1);else x(1);t=false;n.onRelease.call(ve)}function D(){if(a){N.show()}}function k(){a=true;if(n.allowResize){N.show();return true}}function P(){a=false;N.hide()}function R(e){if(e){K=true;P()}else{K=false;k()}}function F(){R(false);C()}if(n.dragEdges&&e.isArray(n.createDragbars))f(n.createDragbars);if(e.isArray(n.createHandles))m(n.createHandles);if(n.drawBorders&&e.isArray(n.createBorders))g(n.createBorders);e(document).bind("touchstart.jcrop-ios",(function(t){if(e(t.currentTarget).hasClass("jcrop-tracker"))t.stopPropagation()}));var $=A().mousedown(b("move")).css({cursor:"move",position:"absolute",zIndex:360});if(Z.support){$.bind("touchstart.jcrop",Z.createDragger("move"))}O.append($);P();return{updateVisible:_,update:S,release:T,refresh:C,isAwake:function(){return t},setCursor:function(e){$.css("cursor",e)},enableHandles:k,enableOnly:function(){a=true},showHandles:D,disableHandles:P,animMode:R,setBgOpacity:x,done:F}}();var te=function(){var t=function(){},i=function(){},r=n.trackDocument;function o(t){$.css({zIndex:450});if(t)e(document).bind("touchmove.jcrop",d).bind("touchend.jcrop",u);else if(r)e(document).bind("mousemove.jcrop",a).bind("mouseup.jcrop",l)}function s(){$.css({zIndex:290});e(document).unbind(".jcrop")}function a(e){t(h(e));return false}function l(e){e.preventDefault();e.stopPropagation();if(q){q=false;i(h(e));if(ee.isAwake()){n.onSelect.call(ve,w(Q.getFixed()))}s();t=function(){};i=function(){}}return false}function c(e,n,r){q=true;t=e;i=n;o(r);return false}function d(e){t(h(Z.cfilter(e)));return false}function u(e){return l(Z.cfilter(e))}function p(e){$.css("cursor",e)}if(!r){$.mousemove(a).mouseup(l).mouseout(l)}M.before($);return{activateHandlers:c,setCursor:p}}();var ie=function(){var t=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),i=e("<div />").css({position:"absolute",overflow:"hidden"}).append(t);function r(){if(n.keySupport){}}function o(e){t.hide()}function s(e,t,i){if(n.allowMove){Q.moveOffset([t,i]);ee.updateVisible(true)}e.preventDefault();e.stopPropagation()}function l(e){if(e.ctrlKey||e.metaKey){return true}X=e.shiftKey?true:false;var t=X?10:1;switch(e.keyCode){case 37:s(e,-t,0);break;case 39:s(e,t,0);break;case 38:s(e,0,-t);break;case 40:s(e,0,t);break;case 27:if(n.allowSelect)ee.release();break;case 9:return true}return false}if(n.keySupport){t.keydown(l).blur(o);if(a||!n.fixedSupport){t.css({position:"absolute",left:"-20px"});i.append(t).insertBefore(M)}else{t.insertBefore(M)}t.hide()}return{watchKeys:r}}();function ne(e){R.removeClass().addClass(c("holder")).addClass(e)}function re(e,t){var i=e[0]/j,r=e[1]/U,o=e[2]/j,s=e[3]/U;if(K){return}var a=Q.flipCoords(i,r,o,s),l=Q.getFixed(),c=[l.x,l.y,l.x2,l.y2],d=c,u=n.animationDelay,h=a[0]-c[0],p=a[1]-c[1],f=a[2]-c[2],g=a[3]-c[3],m=0,v=n.swingSpeed;i=d[0];r=d[1];o=d[2];s=d[3];ee.animMode(true);var b;function y(){window.setTimeout(w,u)}var w=function(){return function(){m+=(100-m)/v;d[0]=Math.round(i+m/100*h);d[1]=Math.round(r+m/100*p);d[2]=Math.round(o+m/100*f);d[3]=Math.round(s+m/100*g);if(m>=99.8){m=100}if(m<100){se(d);y()}else{ee.done();ee.animMode(false);if(typeof t==="function"){t.call(ve)}}}}();y()}function oe(e){se([e[0]/j,e[1]/U,e[2]/j,e[3]/U]);n.onSelect.call(ve,w(Q.getFixed()));ee.enableHandles()}function se(e){Q.setPressed([e[0],e[1]]);Q.setCurrent([e[2],e[3]]);ee.update()}function ae(){return w(Q.getFixed())}function le(){return Q.getFixed()}function ce(e){p(e);me()}function de(){n.disabled=true;ee.disableHandles();ee.setCursor("default");te.setCursor("default")}function ue(){n.disabled=false;me()}function he(){ee.done();te.activateHandlers(null,null)}function pe(){R.remove();E.show();E.css("visibility","visible");e(t).removeData("Jcrop")}function fe(e,t){ee.release();de();var i=new Image;i.onload=function(){var r=i.width;var o=i.height;var s=n.boxWidth;var a=n.boxHeight;M.width(r).height(o);M.attr("src",e);I.attr("src",e);y(M,s,a);k=M.width();P=M.height();I.width(k).height(P);$.width(k+F*2).height(P+F*2);R.width(k).height(P);J.resize(k,P);ue();if(typeof t==="function"){t.call(ve)}};i.src=e}function ge(e,t,i){var r=t||n.bgColor;if(n.bgFade&&d()&&n.fadeTime&&!i){e.animate({backgroundColor:r},{queue:false,duration:n.fadeTime})}else{e.css("backgroundColor",r)}}function me(e){if(n.allowResize){if(e){ee.enableOnly()}else{ee.enableHandles()}}else{ee.disableHandles()}te.setCursor(n.allowSelect?"crosshair":"default");ee.setCursor(n.allowMove?"move":"default");if(n.hasOwnProperty("trueSize")){j=n.trueSize[0]/k;U=n.trueSize[1]/P}if(n.hasOwnProperty("setSelect")){oe(n.setSelect);ee.done();delete n.setSelect}J.refresh();if(n.bgColor!=G){ge(n.shade?J.getShades():R,n.shade?n.shadeColor||n.bgColor:n.bgColor);G=n.bgColor}if(B!=n.bgOpacity){B=n.bgOpacity;if(n.shade)J.refresh();else ee.setBgOpacity(B)}H=n.maxSize[0]||0;z=n.maxSize[1]||0;W=n.minSize[0]||0;V=n.minSize[1]||0;if(n.hasOwnProperty("outerImage")){M.attr("src",n.outerImage);delete n.outerImage}ee.refresh()}if(Z.support)$.bind("touchstart.jcrop",Z.newSelection);N.hide();me(true);var ve={setImage:fe,animateTo:re,setSelect:oe,setOptions:ce,tellSelect:ae,tellScaled:le,setClass:ne,disable:de,enable:ue,cancel:he,release:ee.release,destroy:pe,focus:ie.watchKeys,getBounds:function(){return[k*j,P*U]},getWidgetSize:function(){return[k,P]},getScaleFactor:function(){return[j,U]},getOptions:function(){return n},ui:{holder:R,selection:L}};if(s)R.bind("selectstart",(function(){return false}));E.data("Jcrop",ve);return ve};e.fn.Jcrop=function(t,i){var n;this.each((function(){if(e(this).data("Jcrop")){if(t==="api")return e(this).data("Jcrop");else e(this).data("Jcrop").setOptions(t)}else{if(this.tagName=="IMG")e.Jcrop.Loader(this,(function(){e(this).css({display:"block",visibility:"hidden"});n=e.Jcrop(this,t);if(e.isFunction(i))i.call(n)}));else{e(this).css({display:"block",visibility:"hidden"});n=e.Jcrop(this,t);if(e.isFunction(i))i.call(n)}}}));return this};e.Jcrop.Loader=function(t,i,n){var r=e(t),o=r[0];function s(){if(o.complete){r.unbind(".jcloader");if(e.isFunction(i))i.call(o)}else window.setTimeout(s,50)}r.bind("load.jcloader",s).bind("error.jcloader",(function(t){r.unbind(".jcloader");if(e.isFunction(n))n.call(o)}));if(o.complete&&e.isFunction(i)){r.unbind(".jcloader");i.call(o)}};e.Jcrop.defaults={allowSelect:true,allowMove:true,allowResize:true,trackDocument:true,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:false,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:true,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:true,dragEdges:true,fixedSupport:true,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}})(jQuery);(function(e,t){if(typeof define==="function"&&define.amd){define(["jquery"],t)}else{t(e.jQuery)}})(this,(function(e){"use strict";e.extendext=function(){var t,i,n,r,o,s,a=arguments[0]||{},l=1,c=arguments.length,d=false,u="default";if(typeof a==="boolean"){d=a;a=arguments[l++]||{}}if(typeof a==="string"){u=e([a.toLowerCase(),"default"]).filter(["default","concat","replace","extend"])[0];a=arguments[l++]||{}}if(typeof a!=="object"&&!e.isFunction(a)){a={}}if(l===c){a=this;l--}for(;l<c;l++){if((t=arguments[l])!==null){if(e.isArray(t)&&u!=="default"){s=a&&e.isArray(a)?a:[];switch(u){case"concat":a=s.concat(e.extend(d,[],t));break;case"replace":a=e.extend(d,[],t);break;case"extend":t.forEach((function(t,i){if(typeof t==="object"){var n=e.isArray(t)?[]:{};s[i]=e.extendext(d,u,s[i]||n,t)}else if(s.indexOf(t)===-1){s.push(t)}}));a=s;break}}else{for(i in t){n=a[i];r=t[i];if(a===r){continue}if(d&&r&&(e.isPlainObject(r)||(o=e.isArray(r)))){if(o){o=false;s=n&&e.isArray(n)?n:[]}else{s=n&&e.isPlainObject(n)?n:{}}a[i]=e.extendext(d,u,s,r)}else if(r!==undefined){a[i]=r}}}}}return a}}));(function(){"use strict";var e={version:"1.0.3",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:true,append:true,selfcontained:false,doNotSkipEncoded:false},template:undefined,compile:undefined},t;e.encodeHTMLSource=function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(i,(function(e){return t[e]||e})):""}};t=function(){return this||(0,eval)("this")}();if(typeof module!=="undefined"&&module.exports){module.exports=e}else if(typeof define==="function"&&define.amd){define((function(){return e}))}else{t.doT=e}var i={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},n=/$^/;function r(e,t,i){return(typeof t==="string"?t:t.toString()).replace(e.define||n,(function(t,n,r,o){if(n.indexOf("def.")===0){n=n.substring(4)}if(!(n in i)){if(r===":"){if(e.defineParams)o.replace(e.defineParams,(function(e,t,r){i[n]={arg:t,text:r}}));if(!(n in i))i[n]=o}else{new Function("def","def['"+n+"']="+o)(i)}}return""})).replace(e.use||n,(function(t,n){if(e.useParams)n=n.replace(e.useParams,(function(e,t,n,r){if(i[n]&&i[n].arg&&r){var o=(n+":"+r).replace(/'|\\/g,"_");i.__exp=i.__exp||{};i.__exp[o]=i[n].text.replace(new RegExp("(^|[^\\w$])"+i[n].arg+"([^\\w$])","g"),"$1"+r+"$2");return t+"def.__exp['"+o+"']"}}));var o=new Function("def","return "+n)(i);return o?r(e,o,i):o}))}function o(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}e.template=function(s,a,l){a=a||e.templateSettings;var c=a.append?i.append:i.split,d,u=0,h,p=a.use||a.define?r(a,s,l||{}):s;p=("var out='"+(a.strip?p.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):p).replace(/'|\\/g,"\\$&").replace(a.interpolate||n,(function(e,t){return c.start+o(t)+c.end})).replace(a.encode||n,(function(e,t){d=true;return c.startencode+o(t)+c.end})).replace(a.conditional||n,(function(e,t,i){return t?i?"';}else if("+o(i)+"){out+='":"';}else{out+='":i?"';if("+o(i)+"){out+='":"';}out+='"})).replace(a.iterate||n,(function(e,t,i,n){if(!t)return"';} } out+='";u+=1;h=n||"i"+u;t=o(t);return"';var arr"+u+"="+t+";if(arr"+u+"){var "+i+","+h+"=-1,l"+u+"=arr"+u+".length-1;while("+h+"<l"+u+"){"+i+"=arr"+u+"["+h+"+=1];out+='"})).replace(a.evaluate||n,(function(e,t){return"';"+o(t)+"out+='"}))+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"");if(d){if(!a.selfcontained&&t&&!t._encodeHTML)t._encodeHTML=e.encodeHTMLSource(a.doNotSkipEncoded);p="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+e.encodeHTMLSource.toString()+"("+(a.doNotSkipEncoded||"")+"));"+p}try{return new Function(a.varname,p)}catch(e){if(typeof console!=="undefined")console.log("Could not create a template function: "+p);throw e}};e.compile=function(t,i){return e.template(t,null,i)}})();!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.agGrid=t():e.agGrid=t()}(self,(function(){return function(){"use strict";var e={2074:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AlignedGridsModule=void 0;const n=i(7205),r=i(8963);t.AlignedGridsModule={moduleName:"AlignedGrids",version:n.VERSION,beans:[r.AlignedGridsService]}},8963:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AlignedGridsService=void 0;const n=i(2885),r=i(8731),o=i(7764);class s extends r.BeanStub{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t="function"==typeof e;"function"==typeof e&&(e=e());return e.map((e=>{if(!e)return(0,o._error)(18),void(t||(0,o._error)(20));if(this.isGridApi(e))return e;const i=e;return"current"in i?i.current?.api:(i.api||(0,o._error)(19),i.api)})).filter((e=>!!e&&!e.isDestroyed()))}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:e})=>this.onColumnEvent(e),alignedGridScroll:({event:e})=>this.onScrollEvent(e)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach((t=>{t.isDestroyed()||t.dispatchEvent(e)}))}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){"horizontal"===e.direction&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent((()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)}))}extractDataFromEvent(e,t){const i=[];return e.columns?e.columns.forEach((e=>{i.push(t(e))})):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,(e=>e))}getColumnIds(e){return this.extractDataFromEvent(e,(e=>e.getColId()))}onColumnEvent(e){this.onEvent((()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":this.processColumnEvent(e);break;case"columnGroupOpened":this.processGroupOpenedEvent(e);break;case"columnPivotChanged":(0,o._warn)(21)}}))}processGroupOpenedEvent(e){const{colGroupSvc:t}=this.beans;t&&e.columnGroups.forEach((e=>{let i=null;e&&(i=t.getProvidedColGroup(e.getGroupId())),e&&!i||t.setColumnGroupOpened(i,e.isExpanded(),"alignedGridChanged")}))}processColumnEvent(e){const t=e.column;let i=null;const r=this.beans,{colResize:o,ctrlsSvc:s,colModel:a}=r;if(t&&(i=a.getColDefCol(t.getColId())),t&&!i)return;const l=this.getMasterColumns(e);switch(e.type){case"columnMoved":{const t=e.api.getColumnState().map((e=>({colId:e.colId})));(0,n._applyColumnState)(r,{state:t,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const t=e.api.getColumnState().map((e=>({colId:e.colId,hide:e.hide})));(0,n._applyColumnState)(r,{state:t},"alignedGridChanged")}break;case"columnPinned":{const t=e.api.getColumnState().map((e=>({colId:e.colId,pinned:e.pinned})));(0,n._applyColumnState)(r,{state:t},"alignedGridChanged")}break;case"columnResized":{const t=e,i={};l.forEach((e=>{i[e.getId()]={key:e.getColId(),newWidth:e.getActualWidth()}})),t.flexColumns?.forEach((e=>{i[e.getId()]&&delete i[e.getId()]})),o?.setColumnWidths(Object.values(i),!1,t.finished,"alignedGridChanged");break}}const c=s.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach((e=>{e.setGridOption("alwaysShowVerticalScroll",c)}))}}t.AlignedGridsService=s},1621:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AllCommunityModule=void 0;const n=i(2074),r=i(9642),o=i(9722),s=i(9722),a=i(3856),l=i(1690),c=i(2027),d=i(9734),u=i(4388),h=i(4652),p=i(5432),f=i(4002),g=i(9410),m=i(9519),v=i(6989),b=i(1824),y=i(5423),w=i(3498),C=i(6964),_=i(4577),S=i(4265),A=i(3352),x=i(8594),E=i(2277),T=i(5010),D=i(6431),M=i(7205);t.AllCommunityModule={moduleName:"AllCommunity",version:M.VERSION,dependsOn:[o.ClientSideRowModelModule,d.CsvExportModule,f.InfiniteRowModelModule,T.ValidationModule,h.TextEditorModule,h.NumberEditorModule,h.DateEditorModule,h.CheckboxEditorModule,h.SelectEditorModule,h.LargeTextEditorModule,h.CustomEditorModule,h.UndoRedoEditModule,p.TextFilterModule,p.NumberFilterModule,p.DateFilterModule,p.CustomFilterModule,p.QuickFilterModule,p.ExternalFilterModule,v.GridStateModule,n.AlignedGridsModule,b.PaginationModule,c.ColumnApiModule,r.RowApiModule,r.ScrollApiModule,C.RenderApiModule,a.ColumnAutoSizeModule,u.RowDragModule,y.PinnedRowModule,A.RowSelectionModule,D.ValueCacheModule,x.CellStyleModule,l.ColumnHoverModule,x.RowStyleModule,g.EventApiModule,D.CellApiModule,w.HighlightChangesModule,E.TooltipModule,m.LocaleModule,_.RowAutoHeightModule,u.DragAndDropModule,s.ClientSideRowModelApiModule,S.CellSpanModule]}},3907:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ApiFunctionService=void 0;const n=i(8731),r=i(7764),o=i(7689),s={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},a=(e,t)=>e.eventSvc.dispatchEvent(t);class l{}Reflect.defineProperty(l,"name",{value:"GridApi"});class c extends n.BeanStub{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new l,this.fns={...s,dispatchEvent:a},this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(o.gridApiFunctionsMap))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){const{fns:i,beans:n}=this;i!==s&&(i[e]=n?.validation?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{const{beans:i,fns:{[e]:n}}=this;return n?n(i,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:i,preDestroyLink:n}=this;if(t){const t=o.gridApiFunctionsMap[e];i.assertModuleRegistered(t,`api.${e}`)&&(0,r._warn)(27,{fnName:e,module:t})}else(0,r._warn)(26,{fnName:e,preDestroyLink:n})}destroy(){super.destroy(),this.fns=s,this.beans=null}}t.ApiFunctionService=c},9642:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollApiModule=t.RowApiModule=void 0;const n=i(7205),r=i(8192),o=i(1765);t.RowApiModule={moduleName:"RowApi",version:n.VERSION,apiFunctions:{redrawRows:r.redrawRows,setRowNodeExpanded:r.setRowNodeExpanded,getRowNode:r.getRowNode,addRenderedRowListener:r.addRenderedRowListener,getRenderedNodes:r.getRenderedNodes,forEachNode:r.forEachNode,getFirstDisplayedRowIndex:r.getFirstDisplayedRowIndex,getLastDisplayedRowIndex:r.getLastDisplayedRowIndex,getDisplayedRowAtIndex:r.getDisplayedRowAtIndex,getDisplayedRowCount:r.getDisplayedRowCount}},t.ScrollApiModule={moduleName:"ScrollApi",version:n.VERSION,apiFunctions:{getVerticalPixelRange:o.getVerticalPixelRange,getHorizontalPixelRange:o.getHorizontalPixelRange,ensureColumnVisible:o.ensureColumnVisible,ensureIndexVisible:o.ensureIndexVisible,ensureNodeVisible:o.ensureNodeVisible}}},6433:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createGridApi=void 0,t.createGridApi=function(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}},9875:function(e,t){function i(e,t){e.gos.updateGridOptions({options:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.updateGridOptions=t.setGridOption=t.getGridOption=t.isDestroyed=t.destroy=t.getGridId=void 0,t.getGridId=function(e){return e.context.getGridId()},t.destroy=function(e){e.gridDestroySvc.destroy()},t.isDestroyed=function(e){return e.gridDestroySvc.destroyCalled},t.getGridOption=function(e,t){return e.gos.get(t)},t.setGridOption=function(e,t,n){i(e,{[t]:n})},t.updateGridOptions=i},9513:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.onRowHeightChanged=t.collapseAll=t.expandAll=void 0;const n=i(6876);t.expandAll=function(e){e.expansionSvc?.expandAll(!0)},t.collapseAll=function(e){e.expansionSvc?.expandAll(!1)},t.onRowHeightChanged=function(e){const t=(0,n._getClientSideRowModel)(e),i=(0,n._getServerSideRowModel)(e);t?t.onRowHeightChanged():i&&i.onRowHeightChanged()}},7689:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.gridApiFunctionsMap=void 0;const i=(e,t)=>{for(const i of Object.keys(t))t[i]=e;return t};t.gridApiFunctionsMap={dispatchEvent:"CommunityCore",...i("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0}),...i("GridState",{getState:0}),...i("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...i("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...i("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...i("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...i("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...i("ValueCache",{expireValueCache:0}),...i("CellApi",{getCellValue:0}),...i("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),...i("Sort",{onSortChanged:0}),...i("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0}),...i("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...i("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...i("HighlightChanges",{flashCells:0}),...i("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0}),...i("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...i("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...i("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...i("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),...i("ColumnResize",{setColumnWidths:0}),...i("ColumnHover",{isColumnHovered:0}),...i("EditCore",{getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0}),...i("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...i("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),...i("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0}),...i("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...i("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...i("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0,onRowHeightChanged:0}),...i("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...i("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...i("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),...i("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...i("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...i("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...i("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...i("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...i("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...i("ContextMenu",{showContextMenu:0}),...i("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),...i("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...i("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...i("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...i("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...i("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...i("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...i("StatusBar",{getStatusPanel:0})}},8192:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDisplayedRowCount=t.getDisplayedRowAtIndex=t.getLastDisplayedRowIndex=t.getFirstDisplayedRowIndex=t.forEachNode=t.getRenderedNodes=t.addRenderedRowListener=t.getRowNode=t.setRowNodeExpanded=t.redrawRows=void 0,t.redrawRows=function(e,t={}){const i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming((()=>e.rowRenderer.redrawRows(i)))},t.setRowNodeExpanded=function e(t,i,n,r,o){i&&(r&&i.parent&&-1!==i.parent.level&&e(t,i.parent,n,r,o),i.setExpanded(n,void 0,o))},t.getRowNode=function(e,t){return e.rowModel.getRowNode(t)},t.addRenderedRowListener=function(e,t,i,n){e.rowRenderer.addRenderedRowListener(t,i,n)},t.getRenderedNodes=function(e){return e.rowRenderer.getRenderedNodes()},t.forEachNode=function(e,t,i){e.rowModel.forEachNode(t,i)},t.getFirstDisplayedRowIndex=function(e){return e.rowRenderer.firstRenderedRow},t.getLastDisplayedRowIndex=function(e){return e.rowRenderer.lastRenderedRow},t.getDisplayedRowAtIndex=function(e,t){return e.rowModel.getRow(t)},t.getDisplayedRowCount=function(e){return e.rowModel.getRowCount()}},6876:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._getServerSideRowModel=t._getInfiniteRowModel=t._getClientSideRowModel=void 0,t._getClientSideRowModel=function(e){const t=e.rowModel;return"clientSide"===t.getType()?t:void 0},t._getInfiniteRowModel=function(e){const t=e.rowModel;return"infinite"===t.getType()?t:void 0},t._getServerSideRowModel=function(e){const t=e.rowModel;return"serverSide"===t.getType()?t:void 0}},1765:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ensureNodeVisible=t.ensureIndexVisible=t.ensureColumnVisible=t.getHorizontalPixelRange=t.getVerticalPixelRange=void 0,t.getVerticalPixelRange=function(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()},t.getHorizontalPixelRange=function(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()},t.ensureColumnVisible=function(e,t,i="auto"){e.frameworkOverrides.wrapIncoming((()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,i)),"ensureVisible")},t.ensureIndexVisible=function(e,t,i){e.frameworkOverrides.wrapIncoming((()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,i)),"ensureVisible")},t.ensureNodeVisible=function(e,t,i=null){e.frameworkOverrides.wrapIncoming((()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,i)),"ensureVisible")}},6437:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SsrmInfiniteSharedApiModule=t.CsrmSsrmSharedApiModule=void 0;const n=i(7205),r=i(9513),o=i(8496);t.CsrmSsrmSharedApiModule={moduleName:"CsrmSsrmSharedApi",version:n.VERSION,apiFunctions:{expandAll:r.expandAll,collapseAll:r.collapseAll,onRowHeightChanged:r.onRowHeightChanged}},t.SsrmInfiniteSharedApiModule={moduleName:"SsrmInfiniteSharedApi",version:n.VERSION,apiFunctions:{setRowCount:o.setRowCount,getCacheBlockState:o.getCacheBlockState,isLastRowIndexKnown:o.isLastRowIndexKnown}}},8496:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.isLastRowIndexKnown=t.getCacheBlockState=t.setRowCount=void 0;const n=i(7274),r=i(7764),o=i(6876);t.setRowCount=function(e,t,i){const n=(0,o._getServerSideRowModel)(e);if(n)return 0===e.rowGroupColsSvc?.columns.length?t<0?void(0,r._error)(238):void n.setRowCount(t,i):void(0,r._error)(28);const s=(0,o._getInfiniteRowModel)(e);s&&s.setRowCount(t,i)},t.getCacheBlockState=function(e){if((0,n._isServerSideRowModel)(e.gos)){return e.rowModel.getBlockStates()}return e.rowNodeBlockLoader?.getBlockState()??{}},t.isLastRowIndexKnown=function(e){return e.rowModel.isLastRowIndexKnown()}},5628:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AutoScrollService=void 0;t.AutoScrollService=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=-1!==e.scrollAxis.indexOf("x"),this.scrollVertically=-1!==e.scrollAxis.indexOf("y"),this.scrollByTick=null!=e.scrollByTick?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;const n=this.scrollContainer.getBoundingClientRect(),r=this.scrollByTick;this.tickLeft=e.clientX<n.left+r,this.tickRight=e.clientX>n.right-r,this.tickUp=e.clientY<n.top+r&&!i,this.tickDown=e.clientY>n.bottom-r&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}}},3263:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BASE_URL=void 0,t.BASE_URL="https://www.ag-grid.com"},1954:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractClientSideNodeManager=void 0;const n=i(8731),r=i(3373),o=i(7274),s=i(7764);class a extends n.BeanStub{constructor(){super(...arguments),this.nextId=0,this.allNodesMap={},this.rootNode=null}get treeData(){return!1}getRowNode(e){return this.allNodesMap[e]}extractRowData(){return this.rootNode?.allLeafChildren?.map((e=>e.data))}activate(e){this.rootNode=e,e.group=!0,e.level=-1,e.id="ROOT_NODE_ID",e.allLeafChildren=[],e.childrenAfterGroup=[],e.childrenAfterSort=[],e.childrenAfterAggFilter=[],e.childrenAfterFilter=[],this.updateRootSiblingArrays(e)}deactivate(){this.rootNode&&(this.allNodesMap={},this.rootNode=null)}destroy(){super.destroy(),this.allNodesMap={},this.rootNode=null}setNewRowData(e){const t=this.rootNode;t&&(this.dispatchRowDataUpdateStartedEvent(e),t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.allNodesMap={},this.nextId=0,this.loadNewRowData(e),this.updateRootSiblingArrays(t))}updateRootSiblingArrays(e){const t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter,t.childrenAfterGroup=e.childrenAfterGroup,t.childrenAfterAggFilter=e.childrenAfterAggFilter,t.childrenAfterSort=e.childrenAfterSort,t.childrenMapped=e.childrenMapped,t.allLeafChildren=e.allLeafChildren)}loadNewRowData(e){this.rootNode.allLeafChildren=e?.map(((e,t)=>this.createRowNode(e,t)))??[]}setImmutableRowData(e,t){const i=(0,o._getRowIdCallback)(this.gos),n=!this.gos.get("suppressMaintainUnsortedOrder"),r=e.changedRowNodes,s=new Set,a=this.rootNode,l=a.allLeafChildren,c=l.length;let d=!1,u=!1,h=!1,p=!1;for(let e=0,o=-1,a=t.length;e<a;e++){const a=t[e];let l=this.getRowNode(i({data:a,level:0}));if(l){if(n){const e=l.sourceRowIndex;p||(p=e<=o||d),o=e}l.data!==a&&(h=!0,l.updateData(a),r.update(l))}else d=!0,l=this.createRowNode(a,-1),r.add(l);s.add(l)}const f=[];for(let e=0;e<c;e++){const t=l[e];s.has(t)||(u=!0,t.isSelected()&&f.push(t),this.rowNodeDeleted(t),r.remove(t))}if(d||u||p){const t=new Array(s.size);let i=0;if(!n)for(let e=0;e<c;++e){const n=l[e];s.delete(n)&&(n.sourceRowIndex=i,t[i++]=n)}for(const e of s)e.sourceRowIndex=i,t[i++]=e;a.allLeafChildren=t;const r=a.sibling;r&&(r.allLeafChildren=t),e.rowNodesOrderChanged||(e.rowNodesOrderChanged=p)}(d||u||p||h)&&(this.deselectNodes(f),e.rowDataUpdated=!0)}rowNodeDeleted(e){e.clearRowTopAndRowIndex();const t=e.id,i=this.allNodesMap;i[t]===e&&delete i[t]}updateRowData(e,t){this.dispatchRowDataUpdateStartedEvent(e.add);const i={changedRowNodes:t,rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},n=[],r=(0,o._getRowIdCallback)(this.gos);return this.executeRemove(r,e,i,n),this.executeUpdate(r,e,i,n),this.executeAdd(e,i),this.deselectNodes(n),i}executeAdd(e,t){const i=e.add;if(!i?.length)return;let n=this.rootNode.allLeafChildren,r=n.length;if("number"==typeof e.addIndex&&(r=this.sanitizeAddIndex(e.addIndex),r>0)){if(this.gos.get("treeData")&&this.gos.get("getDataPath"))for(let e=0;e<n.length;e++){const t=n[e];if(t?.rowIndex==r-1){r=e+1;break}}}const o=i.length,s=t.changedRowNodes,a=new Array(o);for(let e=0;e<o;e++){const t=this.createRowNode(i[e],r+e);s.add(t),a[e]=t}const l=this.rootNode;if(r<n.length){const e=n.slice(0,r),i=n.slice(r,n.length),o=e.length+a.length;for(let e=0,t=i.length;e<t;++e)i[e].sourceRowIndex=o+e;n=[...e,...a,...i],t.rowsInserted=!0}else n=n.concat(a);l.allLeafChildren=n;const c=l.sibling;c&&(c.allLeafChildren=n),t.rowNodeTransaction.add=a}executeRemove(e,t,{changedRowNodes:i,rowNodeTransaction:n},r){const{remove:o}=t;if(!o?.length)return;const s={};o.forEach((t=>{const o=this.lookupRowNode(e,t);o&&(o.isSelected()&&r.push(o),o.clearRowTopAndRowIndex(),s[o.id]=!0,delete this.allNodesMap[o.id],n.remove.push(o),i.remove(o))}));const a=this.rootNode;a.allLeafChildren=a.allLeafChildren?.filter((e=>!s[e.id]))??null,a.allLeafChildren?.forEach(((e,t)=>{e.sourceRowIndex=t}));const l=a.sibling;l&&(l.allLeafChildren=a.allLeafChildren)}executeUpdate(e,t,{changedRowNodes:i,rowNodeTransaction:n},r){const{update:o}=t;o?.length&&o.forEach((t=>{const o=this.lookupRowNode(e,t);o&&(o.updateData(t),!o.selectable&&o.isSelected()&&r.push(o),n.update.push(o),i.update(o))}))}dispatchRowDataUpdateStartedEvent(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}deselectNodes(e){const t="rowDataChanged",i=this.beans.selectionSvc,n=e.length>0;n&&i?.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),i?.updateGroupsFromChildrenSelections?.(t),n&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:t})}sanitizeAddIndex(e){const t=this.rootNode.allLeafChildren?.length??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}createRowNode(e,t){const i=new r.RowNode(this.beans);return i.parent=this.rootNode,i.level=0,i.group=!1,i.expanded=!1,i.sourceRowIndex=t,i.setDataAndId(e,String(this.nextId)),this.allNodesMap[i.id]&&(0,s._warn)(2,{nodeId:i.id}),this.allNodesMap[i.id]=i,this.nextId++,i}lookupRowNode(e,t){let i;if(e){const n=e({data:t,level:0});if(i=this.allNodesMap[n],!i)return(0,s._error)(4,{id:n}),null}else if(i=this.rootNode?.allLeafChildren?.find((e=>e.data===t)),!i)return(0,s._error)(5,{data:t}),null;return i||null}}t.AbstractClientSideNodeManager=a},2106:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ChangedRowNodes=void 0;t.ChangedRowNodes=class{constructor(){this.removals=new Set,this.updates=new Set,this.adds=new Set}remove(e){this.adds.delete(e)||(this.updates.delete(e),this.removals.add(e))}update(e){this.adds.has(e)||this.updates.add(e)}add(e){this.adds.add(e)}}},8128:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ClientSideNodeManager=void 0;const n=i(1954);class r extends n.AbstractClientSideNodeManager{constructor(){super(...arguments),this.beanName="csrmNodeSvc"}}t.ClientSideNodeManager=r},3278:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ClientSideRowModel=void 0;const n=i(8731),r=i(3373),o=i(7274),s=i(1502),a=i(6800),l=i(2043),c=i(7764),d=i(2106),u=i(8287),h=i(9849);class p extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowsToDisplay=[],this.started=!1,this.isRefreshingModel=!1,this.rowNodesCountReady=!1,this.rowCountReady=!1,this.onRowHeightChanged_debounced=(0,l._debounce)(this,this.onRowHeightChanged.bind(this),100)}wireBeans(e){this.colModel=e.colModel,this.valueCache=e.valueCache,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggStage=e.aggStage,this.pivotStage=e.pivotStage,this.filterAggStage=e.filterAggStage}postConstruct(){this.orderedStages=[this.groupStage,this.filterStage,this.pivotStage,this.aggStage,this.sortStage,this.filterAggStage,this.flattenStage].filter((e=>!!e));const e=this.refreshModel.bind(this,{step:"group"}),t=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")});this.addManagedEventListeners({newColumnsLoaded:t,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new r.RowNode(this.beans);const i=this.getNewNodeManager();this.nodeManager=i,i.activate(this.rootNode)}getNewNodeManager(){const{gos:e,beans:t}=this;let i;return e.get("treeData")&&(i=e.get("treeDataChildrenField")?t.csrmChildrenTreeNodeSvc:t.csrmPathTreeNodeSvc),i??t.csrmNodeSvc}addPropertyListeners(){const e=["treeData","treeDataChildrenField",...this.orderedStages.flatMap((({refreshProps:e})=>[...e]))];this.addManagedPropertyListeners(e,(e=>{const t=e.changeSet?.properties;t&&this.onPropChange(t)})),this.addManagedPropertyListener("rowData",(()=>this.onPropChange(["rowData"]))),this.addManagedPropertyListener("rowHeight",(()=>this.resetRowHeights()))}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,i,n){let r,s=!1;do{r=!1;const a=this.getRowIndexAtPixel(e),l=this.getRowIndexAtPixel(t),c=Math.max(a,i),d=Math.min(l,n);for(let e=c;e<=d;e++){const t=this.getRow(e);if(t.rowHeightEstimated){const e=(0,o._getRowHeightForNode)(this.beans,t);t.setRowHeight(e.height),r=!0,s=!0}}r&&this.setRowTopAndRowIndex()}while(r);return s}onPropChange(e){if(!this.rootNode)return;const t=this.gos,i=new Set(e),n={step:"nothing",changedProps:i},r=i.has("rowData"),o=i.has("treeData"),s=this.nodeManager,a=this.getNewNodeManager(),l=s!==a||i.has("treeDataChildrenField")&&t.get("treeData");let u;if(o&&(n.step="group"),(l||r)&&(u=t.get("rowData"),null==u||Array.isArray(u)||(u=null,(0,c._warn)(1))),l&&(r||(u=s?.extractRowData()??u),s!==a&&(s?.deactivate(),this.nodeManager=a),a.activate(this.rootNode)),u){!l&&!this.isEmpty()&&u.length>0&&t.exists("getRowId")&&!t.get("resetRowDataOnUpdate")?(n.keepRenderedRows=!0,n.animate=!this.gos.get("suppressAnimationFrame"),n.changedRowNodes=new d.ChangedRowNodes,a.setImmutableRowData(n,u)):(n.rowDataUpdated=!0,n.newData=!0,this.beans.selectionSvc?.reset("rowDataChanged"),this.rowNodesCountReady=!0,a.setNewRowData(u))}if(n.rowDataUpdated)n.step="group";else if("nothing"===n.step)for(const{refreshProps:t,step:i}of this.orderedStages)if(e.some((e=>t.has(e)))){n.step=i;break}"nothing"!==n.step&&this.refreshModel(n)}setRowTopAndRowIndex(){const{beans:e}=this,t=e.environment.getDefaultRowHeight();let i=0;const n=new Set,r=(0,o._isDomLayout)(this.gos,"normal"),s=this.rowsToDisplay;for(let a=0,l=s.length;a<l;++a){const l=s[a];if(null!=l.id&&n.add(l.id),null==l.rowHeight){const i=(0,o._getRowHeightForNode)(e,l,r,t);l.setRowHeight(i.height,i.estimated)}l.setRowTop(i),l.setRowIndex(a),i+=l.rowHeight}return n}clearRowTopAndRowIndex(e,t){const i=e.active,n=e=>{e&&null!=e.id&&!t.has(e.id)&&e.clearRowTopAndRowIndex()},r=e=>{if(null!==e&&(n(e),n(e.detailNode),n(e.sibling),e.hasChildren()&&e.childrenAfterGroup)){const t=-1==e.level;i&&!t&&!e.expanded||e.childrenAfterGroup.forEach(r)}};r(this.rootNode)}ensureRowsAtPixel(e,t,i=0){const n=this.getRowIndexAtPixel(t),r=this.getRow(n),o=!this.gos.get("suppressAnimationFrame");if(r===e[0])return!1;const a=this.rootNode?.allLeafChildren;return!!a&&(e.forEach((e=>{(0,s._removeFromArray)(a,e)})),e.forEach(((e,t)=>{a.splice(Math.max(n+i,0)+t,0,e)})),e.forEach(((e,t)=>{e.sourceRowIndex=t})),this.refreshModel({step:"group",keepRenderedRows:!0,animate:o,rowNodesOrderChanged:!0}),!0)}highlightRowAtPixel(e,t){const i=null!=t?this.getRowIndexAtPixel(t):null,n=null!=i?this.getRow(i):null;if(!n||!e||null==t)return void this.clearHighlightedRow();const r=this.getHighlightPosition(t,n),o=this.isHighlightingCurrentPosition(e,n,r),s=null!=this.lastHighlightedRow&&this.lastHighlightedRow!==n;(o||s)&&(this.clearHighlightedRow(),o)||(this.setRowNodeHighlighted(n,r),this.lastHighlightedRow=n)}setRowNodeHighlighted(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchRowEvent("rowHighlightChanged"))}getHighlightPosition(e,t){if(!t){const i=this.getRowIndexAtPixel(e);if(!(t=this.getRow(i||0)))return"Below"}const{rowTop:i,rowHeight:n}=t;return e-i<n/2?"Above":"Below"}getLastHighlightedRowNode(){return this.lastHighlightedRow}isHighlightingCurrentPosition(e,t,i){if(e===t)return!0;const n="Above"===i?-1:1;return this.getRow(t.rowIndex+n)===e}clearHighlightedRow(){this.lastHighlightedRow&&(this.setRowNodeHighlighted(this.lastHighlightedRow,null),this.lastHighlightedRow=null)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){const e=this.rootNode;if(!e)return 0;if(0===this.rowsToDisplay.length)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===e)return 1;const t=e.childrenAfterAggFilter,i=e.sibling?1:0;return(t?t.length:0)+i}getTopLevelRowDisplayedIndex(e){const{rootNode:t,rowsToDisplay:i}=this;if(!t||!i.length||i[0]===t)return e;const{childrenAfterSort:n}=t,r=e=>{let t=n[e];if(this.gos.get("groupHideOpenParents"))for(;t.expanded&&t.childrenAfterSort&&t.childrenAfterSort.length>0;)t=t.childrenAfterSort[0];return t.rowIndex},{footerSvc:o}=this.beans;return o?o.getTopDisplayIndex(i,e,n,r):r(e)}getRowBounds(e){const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=(0,o._isAnimateRows)(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=(0,o._isAnimateRows)(this.gos),i=0===e.columns.length||e.columns.some((e=>e.isPrimary()))?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=(0,o._isAnimateRows)(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){const t=new a.ChangedPath(!1,this.rootNode);return e||(t.active=!1),t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;const{changedRowNodes:t,newData:i,rowDataUpdated:n}=e;return!(!t||i||!n)&&(!t.removals.size&&!t.adds.size)}refreshModel(e){if(!this.rootNode)return;const t=e.changedPath??(e.changedPath=this.createChangePath(!e.newData&&!!e.rowDataUpdated));if(this.nodeManager.refreshModel?.(e,this.started),this.eventSvc.dispatchEvent({type:"beforeRefreshModel",params:e}),!this.started)return;if(e.rowDataUpdated&&this.eventSvc.dispatchEvent({type:"rowDataUpdated"}),this.isRefreshingModel||this.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e))return;switch(this.isRefreshingModel=!0,e.step){case"group":this.doRowGrouping(e.changedRowNodes,t,!!e.rowNodesOrderChanged,!!e.afterColumnsChanged);case"filter":this.doFilter(t);case"pivot":this.doPivot(t);case"aggregate":this.doAggregate(t);case"filter_aggregates":this.doFilterAggregates(t);case"sort":this.doSort(e.changedRowNodes,t);case"map":this.doRowsToDisplay()}const i=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(t,i),this.isRefreshingModel=!1,this.eventSvc.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){return!this.rootNode?.allLeafChildren?.length||!this.colModel?.ready}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,n=!1;const r=[],s=(0,o._getGroupSelectsDescendants)(this.gos);return this.forEachNodeAfterFilterAndSort((o=>{if(n)return;if(i&&(o===t||o===e)&&(n=!0,o.group&&s))return void r.push(...o.allLeafChildren);if(!i){if(o!==t&&o!==e)return;i=!0}(!o.group||!s)&&r.push(o)})),r}getTopLevelNodes(){return this.rootNode?.childrenAfterGroup??null}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){const t=this.rowsToDisplay;if(this.isEmpty()||0===t.length)return-1;let i=0,n=t.length-1;if(e<=0)return 0;if((0,s._last)(t).rowTop<=e)return t.length-1;let r=-1,o=-1;for(;;){const s=Math.floor((i+n)/2),a=t[s];if(this.isRowInPixel(a,e))return s;a.rowTop<e?i=s+1:a.rowTop>e&&(n=s-1);if(r===i&&o===n)return s;r=i,o=n}}isRowInPixel(e,t){const i=e.rowTop,n=e.rowTop+e.rowHeight;return i<=t&&n>t}forEachLeafNode(e){this.rootNode?.allLeafChildren?.forEach(((t,i)=>e(t,i)))}forEachNode(e,t=!1){this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){this.rowsToDisplay.forEach(e)}forEachNodeAfterFilter(e,t=!1){this.depthFirstSearchRowNodes(e,t,(e=>e.childrenAfterAggFilter))}forEachNodeAfterFilterAndSort(e,t=!1){this.depthFirstSearchRowNodes(e,t,(e=>e.childrenAfterSort))}forEachPivotNode(e,t=!1,i=!1){const n=i?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,(e=>e.leafGroup?null:e[n]))}depthFirstSearchRowNodes(e,t=!1,i=e=>e.childrenAfterGroup,n=this.rootNode,r=0){let o=r;if(!n)return o;const s=n===this.rootNode;s||e(n,o++);const{footerSvc:a}=this.beans;if(n.hasChildren()&&!n.footer){const r=i(n);if(r){o=a?.addTotalRows(o,n,e,t,s,"top")??o;for(const n of r)o=this.depthFirstSearchRowNodes(e,t,i,n,o);return a?.addTotalRows(o,n,e,t,s,"bottom")??o}}return o}doAggregate(e){const t=this.rootNode;t&&this.aggStage?.execute({rowNode:t,changedPath:e})}doFilterAggregates(e){const t=this.rootNode;this.filterAggStage?this.filterAggStage.execute({rowNode:t,changedPath:e}):t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){const{groupHideOpenParentsSvc:i}=this.beans;this.sortStage?this.sortStage.execute({rowNode:this.rootNode,changedRowNodes:e,changedPath:t}):t.forEachChangedNodeDepthFirst((e=>{i?.pullDownGroupDataForHideOpenParents(e.childrenAfterAggFilter,!0),e.childrenAfterSort=e.childrenAfterAggFilter.slice(0),(0,h.updateRowNodeAfterSort)(e)})),i?.updateGroupDataForHideOpenParents(t)}doRowGrouping(e,t,i,n){const r=this.nodeManager.treeData,o=this.rootNode;if(!r){const r=this.groupStage;if(r)r.execute({rowNode:o,changedPath:t,changedRowNodes:e,rowNodesOrderChanged:i,afterColumnsChanged:n});else{const e=o.sibling;o.childrenAfterGroup=o.allLeafChildren,e&&(e.childrenAfterGroup=o.childrenAfterGroup),o.updateHasChildren()}}this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage?this.filterStage.execute({rowNode:this.rootNode,changedPath:e}):e.forEachChangedNodeDepthFirst((e=>{e.childrenAfterFilter=e.childrenAfterGroup,(0,u.updateRowNodeAfterFilter)(e)}),!0)}doPivot(e){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getRowNode(e){if("string"==typeof e&&0==e.indexOf(r.ROW_ID_PREFIX_ROW_GROUP)){let t;return this.forEachNode((i=>{i.id===e&&(t=i)})),t}return this.nodeManager.getRowNode(e)}batchUpdateRowData(e,t){if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];const e=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout((()=>{this.isAlive()&&this.executeBatchUpdateRowData()}),e)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache?.onDataChanged();const e=[],t=[],i=new d.ChangedRowNodes;let n=!1;this.rowDataTransactionBatch?.forEach((r=>{this.rowNodesCountReady=!0;const{rowNodeTransaction:o,rowsInserted:s}=this.nodeManager.updateRowData(r.rowDataTransaction,i);s&&(n=!0),t.push(o),r.callback&&e.push(r.callback.bind(null,o))})),this.commitTransactions(n,i),e.length>0&&window.setTimeout((()=>{e.forEach((e=>e()))}),0),t.length>0&&this.eventSvc.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache?.onDataChanged(),this.rowNodesCountReady=!0;const t=new d.ChangedRowNodes,{rowNodeTransaction:i,rowsInserted:n}=this.nodeManager.updateRowData(e,t);return this.commitTransactions(n,t),i}commitTransactions(e,t){this.refreshModel({step:"group",rowDataUpdated:!0,rowNodesOrderChanged:e,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedRowNodes:t,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){const{flattenStage:e,rootNode:t}=this;let i;if(e)i=e.execute({rowNode:t});else{i=t?.childrenAfterSort??[];for(const e of i)e.setUiLevel(0)}this.rowsToDisplay=i}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){const e=this.rootNode;if(!e)return;const t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode((t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0})),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.beans.rowAutoHeight?.active)return;this.resetRowHeights()}}onGridReady(){this.started||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlightedRow(),this.started=!1,this.rootNode=null,this.nodeManager=null,this.rowDataTransactionBatch=null,this.lastHighlightedRow=null,this.orderedStages=s._EmptyArray,this.rowsToDisplay=s._EmptyArray}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}}t.ClientSideRowModel=p},4452:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getBestCostNodeSelection=t.flushAsyncTransactions=t.applyTransactionAsync=t.applyTransaction=t.resetRowHeights=t.forEachNodeAfterFilterAndSort=t.forEachNodeAfterFilter=t.forEachLeafNode=t.isRowDataEmpty=t.refreshClientSideRowModel=t.onGroupExpandedOrCollapsed=void 0;const n=i(6876),r=i(7764);t.onGroupExpandedOrCollapsed=function(e){e.expansionSvc?.onGroupExpandedOrCollapsed()},t.refreshClientSideRowModel=function(e,t){const i=(0,n._getClientSideRowModel)(e);i&&(t&&"everything"!==t||(t="group"),i.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))},t.isRowDataEmpty=function(e){return(0,n._getClientSideRowModel)(e)?.isEmpty()??!0},t.forEachLeafNode=function(e,t){(0,n._getClientSideRowModel)(e)?.forEachLeafNode(t)},t.forEachNodeAfterFilter=function(e,t){(0,n._getClientSideRowModel)(e)?.forEachNodeAfterFilter(t)},t.forEachNodeAfterFilterAndSort=function(e,t){(0,n._getClientSideRowModel)(e)?.forEachNodeAfterFilterAndSort(t)},t.resetRowHeights=function(e){e.rowAutoHeight?.active?(0,r._warn)(3):(0,n._getClientSideRowModel)(e)?.resetRowHeights()},t.applyTransaction=function(e,t){return e.frameworkOverrides.wrapIncoming((()=>(0,n._getClientSideRowModel)(e)?.updateRowData(t)))},t.applyTransactionAsync=function(e,t,i){e.frameworkOverrides.wrapIncoming((()=>(0,n._getClientSideRowModel)(e)?.batchUpdateRowData(t,i)))},t.flushAsyncTransactions=function(e){e.frameworkOverrides.wrapIncoming((()=>(0,n._getClientSideRowModel)(e)?.flushAsyncTransactions()))},t.getBestCostNodeSelection=function(e){return e.selectionSvc?.getBestCostNodeSelection()}},9722:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ClientSideRowModelApiModule=t.ClientSideRowModelModule=void 0;const n=i(6437),r=i(6620),o=i(7205),s=i(8128),a=i(3278),l=i(4452),c=i(9849);t.ClientSideRowModelModule={moduleName:"ClientSideRowModel",version:o.VERSION,rowModels:["clientSide"],beans:[s.ClientSideNodeManager,a.ClientSideRowModel,c.SortStage],dependsOn:[r.SortModule]},t.ClientSideRowModelApiModule={moduleName:"ClientSideRowModelApi",version:o.VERSION,apiFunctions:{onGroupExpandedOrCollapsed:l.onGroupExpandedOrCollapsed,refreshClientSideRowModel:l.refreshClientSideRowModel,isRowDataEmpty:l.isRowDataEmpty,forEachLeafNode:l.forEachLeafNode,forEachNodeAfterFilter:l.forEachNodeAfterFilter,forEachNodeAfterFilterAndSort:l.forEachNodeAfterFilterAndSort,resetRowHeights:l.resetRowHeights,applyTransaction:l.applyTransaction,applyTransactionAsync:l.applyTransactionAsync,flushAsyncTransactions:l.flushAsyncTransactions,getBestCostNodeSelection:l.getBestCostNodeSelection},dependsOn:[n.CsrmSsrmSharedApiModule]}},8287:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FilterStage=t.updateRowNodeAfterFilter=void 0;const n=i(8731);function r(e){e.sibling&&(e.sibling.childrenAfterFilter=e.childrenAfterFilter)}t.updateRowNodeAfterFilter=r;class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="filterStage",this.refreshProps=new Set(["excludeChildrenWhenTreeDataFiltering"]),this.step="filter"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){const t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){const i=(t,i)=>{t.hasChildren()?t.childrenAfterFilter=e&&!i?t.childrenAfterGroup.filter((e=>{const t=e.childrenAfterFilter&&e.childrenAfterFilter.length>0,i=e.data&&this.filterManager.doesRowPassFilter({rowNode:e});return t||i})):t.childrenAfterGroup:t.childrenAfterFilter=t.childrenAfterGroup,r(t)};if(this.doingTreeDataFiltering()){const e=(t,n)=>{if(t.childrenAfterGroup)for(let r=0;r<t.childrenAfterGroup.length;r++){const o=t.childrenAfterGroup[r],s=n||this.filterManager.doesRowPassFilter({rowNode:o});o.childrenAfterGroup?e(t.childrenAfterGroup[r],s):i(o,s)}i(t,n)},n=t=>e(t,!1);t.executeFromRootNode(n)}else{const e=e=>i(e,!1);t.forEachChangedNodeDepthFirst(e,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}}t.FilterStage=o},9849:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SortStage=t.updateRowNodeAfterSort=void 0;const n=i(8731),r=i(7274),o=i(4422);function s(e){e.sibling&&(e.sibling.childrenAfterSort=e.childrenAfterSort),function(e){if((0,o._missing)(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let i=0;i<t.length;i++){const n=t[i],r=0===i,o=i===e.childrenAfterSort.length-1;n.setFirstChild(r),n.lastChild!==o&&(n.lastChild=o,n.dispatchRowEvent("lastChildChanged")),n.childIndex!==i&&(n.childIndex=i,n.dispatchRowEvent("childIndexChanged"))}}(e)}t.updateRowNodeAfterSort=s;class a extends n.BeanStub{constructor(){super(...arguments),this.beanName="sortStage",this.refreshProps=new Set(["postSortRows","groupDisplayType","accentedSort"]),this.step="sort"}execute(e){const t=this.beans,i=t.sortSvc.getSortOptions(),n=(0,o._exists)(i)&&i.length>0,s=n&&!!e.changedRowNodes&&this.gos.get("deltaSort"),a=i.some((({column:e})=>(0,r._isColumnsSortingCoupledToGroup)(t.gos)?e.isPrimary()&&e.isRowGroupActive():!!e.getColDef().showRowGroup));this.sort(t,i,n,s,e.changedRowNodes,e.changedPath,a)}sort(e,t,i,n,r,o,a){const{gos:l,colModel:c,rowGroupColsSvc:d,groupHideOpenParentsSvc:u,rowNodeSorter:h}=e,p=l.get("groupMaintainOrder"),f=c.getCols().some((e=>e.isRowGroupActive())),g=c.isPivotMode(),m=l.getCallback("postSortRows");o?.forEachChangedNodeDepthFirst((e=>{u?.pullDownGroupDataForHideOpenParents(e.childrenAfterAggFilter,!0);const l=g&&e.leafGroup;let c;if(p&&f&&!e.leafGroup&&!a){const t=d?.columns?.[e.level+1],i=null===t?.getSort(),n=e.childrenAfterAggFilter.slice(0);if(e.childrenAfterSort&&!i){const t={};e.childrenAfterSort.forEach(((e,i)=>{t[e.id]=i})),n.sort(((e,i)=>(t[e.id]??0)-(t[i.id]??0)))}c=n}else c=!i||l?e.childrenAfterAggFilter.slice(0):n&&r?function(e,t,i,n,r){const o=t.childrenAfterAggFilter,s=t.childrenAfterSort;if(!s)return e.doFullSort(o,r);const a=new Set,l=[],{updates:c,adds:d}=i;for(let e=0,t=o.length;e<t;++e){const t=o[e];c.has(t)||d.has(t)||n&&!n.canSkip(t)?l.push({currentPos:l.length,rowNode:t}):a.add(t.id)}const u=s.filter((e=>a.has(e.id))).map(((e,t)=>({currentPos:t,rowNode:e})));return l.sort(((t,i)=>e.compareRowNodes(r,t,i))),function(e,t,i,n){const r=[];let o=0,s=0;const a=i.length,l=n.length;for(;o<a&&s<l;){const a=i[o],l=n[s];let c;e.compareRowNodes(t,a,l)<0?(c=a,++o):(c=l,++s),r.push(c.rowNode)}for(;o<a;)r.push(i[o++].rowNode);for(;s<l;)r.push(n[s++].rowNode);return r}(e,r,l,u)}(h,e,r,o,t):h.doFullSort(e.childrenAfterAggFilter,t);if(e.childrenAfterSort=c,s(e),m){const t={nodes:e.childrenAfterSort};m(t)}}))}}t.SortStage=a},3218:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.autoSizeAllColumns=t.autoSizeColumns=t.sizeColumnsToFit=void 0,t.sizeColumnsToFit=function(e,t){"number"==typeof t?e.colAutosize?.sizeColumnsToFit(t,"api"):e.colAutosize?.sizeColumnsToFitGridBody(t)},t.autoSizeColumns=function(e,t,i){e.colAutosize?.autoSizeCols({colKeys:t,skipHeader:i,source:"api"})},t.autoSizeAllColumns=function(e,t){e.colAutosize?.autoSizeAllColumns("api",t)}},3856:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnAutoSizeModule=void 0;const n=i(447),r=i(7205),o=i(3218),s=i(4817);t.ColumnAutoSizeModule={moduleName:"ColumnAutoSize",version:r.VERSION,beans:[s.ColumnAutosizeService],apiFunctions:{sizeColumnsToFit:o.sizeColumnsToFit,autoSizeColumns:o.autoSizeColumns,autoSizeAllColumns:o.autoSizeAllColumns},dependsOn:[n.AutoWidthModule]}},4817:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnAutosizeService=void 0;const n=i(2934),r=i(3146),o=i(8731),s=i(1502),a=i(3507),l=i(7764),c=i(9644);class d extends o.BeanStub{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}autoSizeCols(e){if(this.shouldQueueResizeOperations)return void this.pushResizeOperation((()=>this.autoSizeCols(e)));const{colKeys:t,skipHeader:i,skipHeaderGroups:o,stopAtGroup:s,source:a="api"}=e,{animationFrameSvc:l,renderStatus:c,colModel:d,autoWidthCalc:h,visibleCols:p}=this.beans;if(l?.flushAllFrames(),this.timesDelayed<5&&c&&!c.areHeaderCellsRendered())return this.timesDelayed++,void setTimeout((()=>{this.isAlive()&&this.autoSizeCols(e)}));this.timesDelayed=0;const f=[];let g=-1;const m=null!=i?i:this.gos.get("skipHeaderOnAutoSize"),v=null!=o?o:m;for(;0!==g;){g=0;const e=[];t.forEach((t=>{if(!t)return;const i=d.getCol(t);if(!i||(0,r.isRowNumberCol)(i))return;if(f.indexOf(i)>=0)return;const n=h.getPreferredWidthForColumn(i,m);if(n>0){const e=u(i,n);i.setActualWidth(e,a),f.push(i),g++}e.push(i)})),e.length&&p.refresh(a)}v||this.autoSizeColumnGroupsByColumns(t,a,s),(0,n.dispatchColumnResizedEvent)(this.eventSvc,f,!0,"autosizeColumns")}autoSizeColumn(e,t,i){e&&this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const{colModel:n,ctrlsSvc:r}=this.beans,o=new Set;let s;n.getColsForKeys(e).forEach((e=>{let t=e.getParent();for(;t&&t!=i;)t.isPadding()||o.add(t),t=t.getParent()}));for(const e of o){for(const t of r.getHeaderRowContainerCtrls())if(s=t.getHeaderCtrlForColumn(e),s)break;s&&s.resizeLeafColumnsToFit(t)}return[]}autoSizeAllColumns(e,t){if(this.shouldQueueResizeOperations)return void this.pushResizeOperation((()=>this.autoSizeAllColumns(e,t)));const i=this.beans.visibleCols.allCols;this.autoSizeCols({colKeys:i,skipHeader:t,source:e})}addColumnAutosize(e,t){const i=this.gos.get("skipHeaderOnAutoSize"),n=()=>{this.autoSizeColumn(t,"uiColumnResized",i)};e.addEventListener("dblclick",n);const r=new c.TouchListener(e);return r.addEventListener("doubleTap",n),()=>{e.removeEventListener("dblclick",n),r.removeEventListener("doubleTap",n),r.destroy()}}addColumnGroupResize(e,t,i){const n=this.gos.get("skipHeaderOnAutoSize"),r=()=>{const e=[];t.getDisplayedLeafColumns().forEach((t=>{t.getColDef().suppressAutoSize||e.push(t.getColId())})),e.length>0&&this.autoSizeCols({colKeys:e,skipHeader:n,stopAtGroup:t,source:"uiColumnResized"}),i()};return e.addEventListener("dblclick",r),()=>e.removeEventListener("dblclick",r)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;const{ctrlsSvc:i,scrollVisibleSvc:n}=this.beans,r=i.getGridBodyCtrl(),o=r.isVerticalScrollShowing()?n.getScrollbarWidth():0,s=(0,a._getInnerWidth)(r.eGridBody)-o;s>0?this.sizeColumnsToFit(s,"sizeColumnsToFit",!1,e):void 0===t?window.setTimeout((()=>{this.sizeColumnsToFitGridBody(e,100)}),0):100===t?window.setTimeout((()=>{this.sizeColumnsToFitGridBody(e,500)}),100):500===t?window.setTimeout((()=>{this.sizeColumnsToFitGridBody(e,-1)}),500):(0,l._warn)(29)}sizeColumnsToFit(e,t="sizeColumnsToFit",i,o){if(this.shouldQueueResizeOperations)return void this.pushResizeOperation((()=>this.sizeColumnsToFit(e,t,i,o)));const a={};o&&o?.columnLimits?.forEach((({key:e,...t})=>{a["string"==typeof e?e:e.getColId()]=t}));const l=this.beans.visibleCols.allCols,c=e===(0,r.getWidthOfColsInList)(l);if(e<=0||!l.length||c)return;const d=[],u=[];l.forEach((e=>{!0===e.getColDef().suppressSizeToFit?u.push(e):d.push(e)}));const h=d.slice(0);let p=!1;const f=e=>{(0,s._removeFromArray)(d,e),u.push(e)};for(d.forEach((e=>{e.resetActualWidth(t);const i=a?.[e.getId()],n=i?.minWidth??o?.defaultMinWidth,r=i?.maxWidth??o?.defaultMaxWidth,s=e.getActualWidth();"number"==typeof n&&s<n?e.setActualWidth(n,t,!0):"number"==typeof r&&s>r&&e.setActualWidth(r,t,!0)}));!p;){p=!0;const i=e-(0,r.getWidthOfColsInList)(u);if(i<=0)d.forEach((e=>{const i=a?.[e.getId()]?.minWidth??o?.defaultMinWidth;"number"!=typeof i?e.setActualWidth(e.minWidth,t):e.setActualWidth(i,t,!0)}));else{const e=i/(0,r.getWidthOfColsInList)(d);let n=i;for(let i=d.length-1;i>=0;i--){const r=d[i],s=a?.[r.getId()],l=s?.minWidth??o?.defaultMinWidth,c=s?.maxWidth??o?.defaultMaxWidth,u=r.getMinWidth(),h=r.getMaxWidth(),g="number"==typeof l&&l>u?l:u,m="number"==typeof c&&c<h?c:h;let v=Math.round(r.getActualWidth()*e);v<g?(v=g,f(r),p=!1):v>m?(v=m,f(r),p=!1):0===i&&(v=n),r.setActualWidth(v,t,!0),n-=v}}}h.forEach((e=>{e.fireColumnWidthChangedEvent(t)}));const g=this.beans.visibleCols;g.setLeftValues(t),g.updateBodyWidths(),i||(0,n.dispatchColumnResizedEvent)(this.eventSvc,h,!0,t)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout((()=>{if("fitGridWidth"===t){const{columnLimits:t,defaultMinWidth:i,defaultMaxWidth:n}=e,r=t?.map((({colId:e,minWidth:t,maxWidth:i})=>({key:e,minWidth:t,maxWidth:i})));this.sizeColumnsToFitGridBody({defaultMinWidth:i,defaultMaxWidth:n,columnLimits:r})}else"fitProvidedWidth"===t&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")}))}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if("fitCellContents"!==e?.type)return;const{colIds:t,skipHeader:i}=e;setTimeout((()=>{t?this.autoSizeCols({colKeys:t,skipHeader:i,source:"autosizeColumns"}):this.autoSizeAllColumns("autosizeColumns",i)}))}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach((e=>e())),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}}function u(e,t){const i=e.getMinWidth();t<i&&(t=i);const n=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=n),t}t.ColumnAutosizeService=d},9607:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.columnMovingCSS=void 0,t.columnMovingCSS=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}"},9122:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnAnimationService=void 0;const n=i(8731);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>this.gridBodyCtrl=e.gridBodyCtrl))}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush((()=>this.activeNext=!1),(()=>this.active=!1))}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push((()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)}))}flush(e,t){const{executeNextFuncs:i,executeLaterFuncs:n}=this;if(0===i.length&&0===n.length)return e(),void t();const r=e=>{for(;e.length;){const t=e.pop();t&&t()}};this.beans.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{e(),r(i)}),0),window.setTimeout((()=>{t(),r(n)}),200)}))}}t.ColumnAnimationService=r},3052:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BodyDropPivotTarget=void 0;const n=i(8731);class r extends n.BeanStub{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach((e=>{e.isPrimary()&&(e.isAnyFunctionActive()||(e.isAllowValue()?this.columnsToAggregate.push(e):e.isAllowRowGroup()?this.columnsToGroup.push(e):e.isAllowPivot()&&this.columnsToPivot.push(e)))}))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:i,pivotColsSvc:n}=this.beans;this.columnsToAggregate.length>0&&t?.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&i?.addColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&n?.addColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}}t.BodyDropPivotTarget=r},7912:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BodyDropTarget=void 0;const n=i(8731),r=i(2903),o=i(3052),s=i(2909);class a extends n.BeanStub{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,i=this.pinned;e.whenReady(this,(e=>{let t;const n=e.gridBodyCtrl.eBodyViewport;switch(i){case"left":t=[[n,e.left.eContainer],[e.bottomLeft.eContainer],[e.topLeft.eContainer]];break;case"right":t=[[n,e.right.eContainer],[e.bottomRight.eContainer],[e.topRight.eContainer]];break;default:t=[[n,e.center.eViewport],[e.bottomCenter.eViewport],[e.topCenter.eViewport]]}this.eSecondaryContainers=t})),this.moveColumnFeature=this.createManagedBean(new s.MoveColumnFeature(i)),this.bodyDropPivotTarget=this.createManagedBean(new o.BodyDropPivotTarget(i)),t.addDropTarget(this),this.addDestroyFunc((()=>t.removeDropTarget(this)))}isInterestedIn(e){return e===r.DragSourceType.HeaderCell||e===r.DragSourceType.ToolPanel&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&e.dragSource.type===r.DragSourceType.ToolPanel}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}}t.BodyDropTarget=a},2909:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MoveColumnFeature=void 0;const n=i(8731),r=i(2903),o=i(2783),s=i(1502),a=i(4422),l=i(5446);class c extends n.BeanStub{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!(0,a._exists)(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCon=e.gridBodyCtrl}))}getIconName(){const{pinned:e,lastDraggingEvent:t}=this,i=t?.dragItem.columns??[];for(const t of i){const i=t.getPinned();if(t.getColDef().lockPinned){if(i==e)return"move"}else{if(i===e||!e)return"move";if(!i&&e)return"pinned"}}return"notAllowed"}onDragEnter(e){const t=e.dragItem,i=t.columns;if(e.dragSource.type===r.DragSourceType.ToolPanel)this.setColumnsVisible(i,!0,"uiColumnDragged");else{const e=t.visibleState,n=(i||[]).filter((t=>e[t.getId()]));this.setColumnsVisible(n,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(i,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,n=!1){const{gos:r,ctrlsSvc:o}=this.beans,s=r.get("suppressMoveWhenColumnDragging");if(n&&!s)return void this.finishColumnMoving();if(this.lastDraggingEvent=e,!e||!n&&(0,a._missing)(e.hDirection))return;const c=(0,l.normaliseX)({x:e.x,pinned:this.pinned,gos:r,ctrlsSvc:o});t||this.checkCenterForScrolling(c),s?this.handleColumnDragWhileSuppressingMovement(e,t,i,c,n):this.handleColumnDragWhileAllowingMovement(e,t,i,c,n)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(!e)return;const n=e.filter((e=>!e.getColDef().lockVisible));this.beans.colModel.setColsVisible(n,t,i)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:i}=e;this.beans.colMoves.moveColumns(t,i,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,t,i,n,r){const o=this.getAllMovingColumns(e,!0);if(r){const e=this.isAttemptingToPin(o);e&&this.attemptToPinColumns(o,void 0,!0);const{fromLeft:n,xPosition:r}=this.getNormalisedXPositionInfo(o,e)||{};if(null==n||null==r)return void this.finishColumnMoving();this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:r,fromEnter:t,fakeEvent:i,fromLeft:n})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(o,n)}}handleColumnDragWhileAllowingMovement(e,t,i,n,o){const s=this.getAllMovingColumns(e),a="right"===this.normaliseDirection(e.hDirection),c=e.dragSource.type===r.DragSourceType.HeaderCell,d=this.getMoveColumnParams({allMovingColumns:s,isFromHeader:c,xPosition:n,fromLeft:a,fromEnter:t,fakeEvent:i}),u=(0,l.attemptMoveColumns)({...d,finished:o});u&&(this.lastMovedInfo=u)}getAllMovingColumns(e,t=!1){const i=e.dragSource.getDragItem();let n=null;t?(n=i.columnsInSplit,n||(n=i.columns)):n=i.columns;return n?n.filter((e=>!e.getColDef().lockPinned||e.getPinned()==this.pinned)):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:i,xPosition:n,fromLeft:r,fromEnter:o,fakeEvent:s}=e,{gos:a,colModel:l,colMoves:c,visibleCols:d}=this.beans;return{allMovingColumns:t,isFromHeader:i,fromLeft:r,xPosition:n,pinned:this.pinned,fromEnter:o,fakeEvent:s,gos:a,colModel:l,colMoves:c,visibleCols:d}}highlightHoveredColumn(e,t){const{gos:i,colModel:n}=this.beans,r=i.get("enableRtl"),a=n.getCols().filter((e=>e.isVisible()&&e.getPinned()===this.pinned));let l,c=null,u=null,h=null;for(const e of a){if(u=e.getActualWidth(),c=this.getNormalisedColumnLeft(e,0,r),null!=c){if(c<=t&&c+u>=t){h=e;break}}c=null,u=null}if(h)-1!==e.indexOf(h)&&(h=null);else{for(let e=a.length-1;e>=0;e--){const t=a[e],i=a[e].getParent();if(!i){h=t;break}const n=i?.getDisplayedLeafColumns();if(n.length){h=(0,s._last)(n);break}}if(!h)return;c=this.getNormalisedColumnLeft(h,0,r),u=h.getActualWidth()}this.lastHighlightedColumn?.column!==h&&this.clearHighlighted(),null!=h&&null!=c&&null!=u&&(l=t-c<u/2!==r?o.ColumnHighlightPosition.Before:o.ColumnHighlightPosition.After,d(h,l),this.lastHighlightedColumn={column:h,position:l})}getNormalisedXPositionInfo(e,t){const{gos:i,visibleCols:n}=this.beans,r=i.get("enableRtl"),{firstMovingCol:s,column:a,position:l}=this.getColumnMoveAndTargetInfo(e,t,r);if(!s||!a||null==l)return;const c=n.allCols,d=c.indexOf(s),u=c.indexOf(a),h=l===o.ColumnHighlightPosition.Before!==r,p=d<u||d===u&&!h;let f=0;if(h?p&&(f-=1):p||(f+=1),u+f===d)return;const g=c[u+f];if(!g)return;return{fromLeft:p,xPosition:this.getNormalisedColumnLeft(g,20,r)}}getColumnMoveAndTargetInfo(e,t,i){const n=this.lastHighlightedColumn||{},{firstMovingCol:r,lastMovingCol:s}=function(e){const t=e.length;let i,n;for(let r=0;r<t;r++){if(!i){const t=e[r];null!=t.getLeft()&&(i=t)}if(!n){const i=e[t-1-r];null!=i.getLeft()&&(n=i)}if(i&&n)break}return{firstMovingCol:i,lastMovingCol:n}}(e);if(!r||!s||n.column||!t)return{firstMovingCol:r,...n};const a="left"===this.getPinDirection();return{firstMovingCol:r,position:a?o.ColumnHighlightPosition.After:o.ColumnHighlightPosition.Before,column:a!==i?r:s}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,i){const{gos:n,ctrlsSvc:r}=this.beans,o=e.getLeft();if(null==o)return null;const s=e.getActualWidth();return(0,l.normaliseX)({x:i?o+s-t:o+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:n,ctrlsSvc:r})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>7;return t&&i||e.some((e=>e.getPinned()!==this.pinned))}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:i,fromEnter:n,fakeEvent:r,fromLeft:o}=e,s=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:o,fromEnter:n,fakeEvent:r}),{columns:a,toIndex:c}=(0,l.getBestColumnMoveIndexFromXPosition)(s)||{};a&&null!=c&&(this.lastMovedInfo={columns:a,toIndex:c}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(d(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),i=t.getCenterViewportScrollLeft(),n=i+t.getCenterWidth();let r,o;this.gos.get("enableRtl")?(r=e<i+50,o=e>n-50):(o=e<i+50,r=e>n-50),this.needToMoveRight=r,this.needToMoveLeft=o,o||r?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.beans.dragAndDrop.getDragAndDropImageComponent()?.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.getDragAndDropImageComponent()?.setIcon(this.getIconName(),!1))}moveInterval(){let e;this.intervalCount++,e=10+5*this.intervalCount,e>100&&(e=100);let t=null;const i=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),0!==t)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols:e,dragAndDrop:t,gos:i}=this.beans;if(this.failedMoveAttempts<=8||!e)return;if(t.getDragAndDropImageComponent()?.setIcon("pinned",!1),!i.get("suppressMoveWhenColumnDragging")){const e=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(e,void 0,!0)}}}getPinDirection(){return this.needToMoveLeft||"left"===this.pinned?"left":this.needToMoveRight||"right"===this.pinned?"right":void 0}attemptToPinColumns(e,t,i=!1){const n=(e||[]).filter((e=>!e.getColDef().lockPinned));if(!n.length)return 0;i&&(t=this.getPinDirection());const{pinnedCols:r,dragAndDrop:o}=this.beans;return r?.setColsPinned(n,t,"uiColumnDragged"),i&&o.nudge(),n.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}}function d(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}t.MoveColumnFeature=c},852:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.moveColumns=t.moveColumnByIndex=void 0,t.moveColumnByIndex=function(e,t,i){e.colMoves?.moveColumnByIndex(t,i,"api")},t.moveColumns=function(e,t,i){e.colMoves?.moveColumns(t,i,"api")}},4074:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnMoveModule=void 0;const n=i(4388),r=i(7205),o=i(9607),s=i(9122),a=i(852),l=i(4067);t.ColumnMoveModule={moduleName:"ColumnMove",version:r.VERSION,beans:[l.ColumnMoveService,s.ColumnAnimationService],apiFunctions:{moveColumnByIndex:a.moveColumnByIndex,moveColumns:a.moveColumns},dependsOn:[n.SharedDragAndDropModule],css:[o.columnMovingCSS]}},4067:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnMoveService=void 0;const n=i(8731),r=i(2903),o=i(6908),s=i(1502),a=i(7764),l=i(7912),c=i(3505),d=i(5446);var u;!function(e){e[e.LEFT=-1]="LEFT",e[e.NONE=0]="NONE",e[e.RIGHT=1]="RIGHT"}(u||(u={}));class h extends n.BeanStub{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,i){const n=this.beans.colModel.getCols();if(!n)return;const r=n[e];this.moveColumns([r],t,i)}moveColumns(e,t,i,n=!0){const{colModel:r,colAnimation:o,visibleCols:l,eventSvc:c}=this.beans,d=r.getCols();if(!d)return;if(t>d.length-e.length)return void(0,a._warn)(30,{toIndex:t});o?.start();const u=r.getColsForKeys(e);this.doesMovePassRules(u,t)&&((0,s._moveInArray)(r.getCols(),u,t),l.refresh(i),c.dispatchEvent({type:"columnMoved",columns:u,column:1===u.length?u[0]:null,toIndex:t,finished:n,source:i})),o?.finish()}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){const{colModel:t,gos:i}=this.beans;if(!(0,c.doesMovePassMarryChildren)(e,t.getColTree()))return!1;return!!(e=>{const t=i.get("enableRtl");let n=t?u.RIGHT:u.LEFT,r=!0;return e.forEach((e=>{const i=(o=e.getColDef().lockPosition)?"left"===o||!0===o?u.LEFT:u.RIGHT:u.NONE;var o;t?i>n&&(r=!1):i<n&&(r=!1),n=i})),r})(e)}getProposedColumnOrder(e,t){const i=this.beans.colModel.getCols().slice();return(0,s._moveInArray)(i,e,t),i}createBodyDropTarget(e,t){return new l.BodyDropTarget(e,t)}moveHeader(e,t,i,n,r){const{ctrlsSvc:a,gos:l,colModel:c,visibleCols:u,focusSvc:h}=this.beans,p=t.getBoundingClientRect(),f=p.left,g=(0,o.isColumnGroup)(i),m=g?p.width:i.getActualWidth(),v="left"===e!==l.get("enableRtl"),b=(0,d.normaliseX)({x:v?f-20:f+m+20,pinned:n,fromKeyboard:!0,gos:l,ctrlsSvc:a}),y=h.focusedHeader;let w;if((0,d.attemptMoveColumns)({allMovingColumns:g?i.getLeafColumns():[i],isFromHeader:!0,fromLeft:"right"===e,xPosition:b,pinned:n,fromEnter:!1,fakeEvent:!1,gos:l,colModel:c,colMoves:this,visibleCols:u,finished:!0}),g){const e=i.getDisplayedLeafColumns();w=v?e[0]:(0,s._last)(e)}else w=i;if(a.getScrollFeature().ensureColumnVisible(w,"auto"),(!r.isAlive()||l.get("ensureDomOrder"))&&y){let e;if(g){const t=i.getGroupId(),n=i.getLeafColumns();if(!n.length)return;const r=n[0].getParent();if(!r)return;e=function(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return}(r,t)}else e=i;e&&h.focusHeaderPosition({headerPosition:{...y,column:e}})}}setDragSourceForHeader(e,t,i){const{gos:n,colModel:a,dragAndDrop:l,visibleCols:c}=this.beans;let u=!n.get("suppressDragLeaveHidesColumns");const h=(0,o.isColumnGroup)(t),p=h?t.getProvidedColumnGroup().getLeafColumns():[t],f=h?()=>function(e,t){const i=e.getProvidedColumnGroup().getLeafColumns(),n={};i.forEach((e=>n[e.getId()]=e.isVisible()));const r=[];t.forEach((e=>{i.indexOf(e)>=0&&(r.push(e),(0,s._removeFromArray)(i,e))})),i.forEach((e=>r.push(e)));const o=[],a=e.getLeafColumns();for(const e of r)-1!==a.indexOf(e)&&o.push(e);return{columns:r,columnsInSplit:o,visibleState:n}}(t,c.allCols):()=>function(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}(t),g={type:r.DragSourceType.HeaderCell,eElement:e,getDefaultIconName:()=>u?"hide":"notAllowed",getDragItem:f,dragItemName:i,onDragStarted:()=>{u=!n.get("suppressDragLeaveHidesColumns"),(0,d.setColumnsMoving)(p,!0)},onDragStopped:()=>(0,d.setColumnsMoving)(p,!1),onDragCancelled:()=>(0,d.setColumnsMoving)(p,!1),onGridEnter:e=>{if(u){const{columns:t=[],visibleState:i}=e??{},n=h?e=>!i||i[e.getColId()]:()=>!0,r=t.filter((e=>!e.getColDef().lockVisible&&n(e)));a.setColsVisible(r,!0,"uiColumnMoved")}},onGridExit:e=>{if(u){const t=e?.columns?.filter((e=>!e.getColDef().lockVisible))||[];a.setColsVisible(t,!1,"uiColumnMoved")}}};return l.addDragSource(g,!0),g}}t.ColumnMoveService=h},3505:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.doesMovePassMarryChildren=t.placeLockedColumns=void 0;const n=i(2716),r=i(9409);t.placeLockedColumns=function(e,t){const i=[],n=[],r=[];return e.forEach((e=>{const t=e.getColDef().lockPosition;"right"===t?r.push(e):"left"===t||!0===t?i.push(e):n.push(e)})),t.get("enableRtl")?[...r,...n,...i]:[...i,...n,...r]},t.doesMovePassMarryChildren=function(e,t){let i=!0;return(0,n.depthFirstOriginalTreeSearch)(null,t,(t=>{if(!(0,r.isProvidedColumnGroup)(t))return;const n=t,o=n.getColGroupDef();if(!(o&&o.marryChildren))return;const s=[];n.getLeafColumns().forEach((t=>{const i=e.indexOf(t);s.push(i)}));Math.max.apply(Math,s)-Math.min.apply(Math,s)>n.getLeafColumns().length-1&&(i=!1)})),i}},5446:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.setColumnsMoving=t.normaliseX=t.attemptMoveColumns=t.getBestColumnMoveIndexFromXPosition=void 0;const n=i(1502);function r(e){const{isFromHeader:t,fromLeft:i,xPosition:r,fromEnter:s,fakeEvent:a,pinned:l,gos:c,colModel:d,colMoves:u,visibleCols:h}=e;let{allMovingColumns:p}=e;if(t){const e=[];p.forEach((t=>{let i=null,n=t.getParent();for(;null!=n&&1===n.getDisplayedLeafColumns().length;)i=n,n=n.getParent();if(null!=i){(!!i.getColGroupDef()?.marryChildren?i.getProvidedColumnGroup().getLeafColumns():i.getLeafColumns()).forEach((t=>{e.includes(t)||e.push(t)}))}else e.includes(t)||e.push(t)})),p=e}const f=p.slice();!function(e,t){if(!t||t.length<=1)return;t.filter((t=>e.indexOf(t)<0)).length>0||t.sort(((t,i)=>e.indexOf(t)-e.indexOf(i)))}(d.getCols(),f);const g=function(e){const{movingCols:t,draggingRight:i,xPosition:n,pinned:r,gos:o,colModel:s,visibleCols:a}=e,l=o.get("suppressMovableColumns")||t.some((e=>e.getColDef().suppressMovable));if(l)return[];const c=function(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}(a,r),d=s.getCols(),u=c.filter((e=>t.includes(e))),h=c.filter((e=>!t.includes(e))),p=d.filter((e=>!t.includes(e)));let f,g=0,m=n;if(i){let e=0;u.forEach((t=>e+=t.getActualWidth())),m-=e}if(m>0){for(let e=0;e<h.length;e++){if(m-=h[e].getActualWidth(),m<0)break;g++}i&&g++}if(g>0){const e=h[g-1];f=p.indexOf(e)+1}else f=p.indexOf(h[0]),-1===f&&(f=0);const v=[f],b=(e,t)=>e-t;if(i){let e=f+1;const t=d.length-1;for(;e<=t;)v.push(e),e++;v.sort(b)}else{let e=f;const t=d.length-1;let i=d[e];for(;e<=t&&c.indexOf(i)<0;)e++,v.push(e),i=d[e];e=f-1;const n=0;for(;e>=n;)v.push(e),e--;v.sort(b).reverse()}return v}({movingCols:f,draggingRight:i,xPosition:r,pinned:l,gos:c,colModel:d,visibleCols:h}),m=function(e,t){const i=t.getCols(),r=(0,n._sortNumerically)(e.map((e=>i.indexOf(e)))),o=r[0],s=(0,n._last)(r);return s-o!=r.length-1?null:o}(f,d);if(0===g.length)return;const v=g[0];let b=null!==m&&!s;if(t&&(b=null!==m),b&&!a){if(!i&&v>=m)return;if(i&&v<=m)return}const y=h.allCols,w=[];let C=null;for(let e=0;e<g.length;e++){const t=g[e],i=u.getProposedColumnOrder(f,t);if(!u.doesOrderPassRules(i))continue;const r=i.filter((e=>y.includes(e)));if(null===C)C=r;else if(!(0,n._areEqual)(r,C))break;const s=o(i);w.push({move:t,fragCount:s})}if(0===w.length)return;w.sort(((e,t)=>e.fragCount-t.fragCount));const _=w[0].move;return _>d.getCols().length-p.length?void 0:{columns:p,toIndex:_}}function o(e){function t(e){const t=[];let i=e.getOriginalParent();for(;null!=i;)t.push(i),i=i.getOriginalParent();return t}let i=0;for(let n=0;n<e.length-1;n++){let r=t(e[n]),o=t(e[n+1]);[r,o]=r.length>o.length?[r,o]:[o,r],r.forEach((e=>{-1===o.indexOf(e)&&i++}))}return i}t.getBestColumnMoveIndexFromXPosition=r,t.attemptMoveColumns=function(e){const{columns:t,toIndex:i}=r(e)||{},{finished:n,colMoves:o}=e;return t&&null!=i?(o.moveColumns(t,i,"uiColumnMoved",n),n?null:{columns:t,toIndex:i}):null},t.normaliseX=function(e){const{pinned:t,fromKeyboard:i,gos:n,ctrlsSvc:r,useHeaderRow:o,skipScrollPadding:s}=e;let a=r.getHeaderRowContainerCtrl(t)?.eViewport,{x:l}=e;return a?(i&&(l-=a.getBoundingClientRect().left),n.get("enableRtl")&&(o&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),null!=t||s||(l+=r.get("center").getCenterViewportScrollLeft()),l):0},t.setColumnsMoving=function(e,t){for(const i of e)i.moving=t,i.dispatchColEvent("movingChanged","uiColumnMoved")}},9686:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.setColumnWidths=void 0,t.setColumnWidths=function(e,t,i=!0,n="api"){e.colResize?.setColumnWidths(t,!1,i,n)}},6924:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnResizeModule=void 0;const n=i(4388),r=i(447),o=i(7205),s=i(9686),a=i(9677);t.ColumnResizeModule={moduleName:"ColumnResize",version:o.VERSION,beans:[a.ColumnResizeService],apiFunctions:{setColumnWidths:s.setColumnWidths},dependsOn:[n.HorizontalResizeModule,r.AutoWidthModule]}},9677:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnResizeService=void 0;const n=i(2934),r=i(8731),o=i(7764),s=i(9033),a=i(7438);class l extends r.BeanStub{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,i,n){const r=[],{colModel:o,gos:s,visibleCols:a}=this.beans;e.forEach((e=>{const i=o.getColDefCol(e.key)||o.getCol(e.key);if(!i)return;r.push({width:e.newWidth,ratios:[1],columns:[i]});if("shift"===s.get("colResizeDefault")&&(t=!t),t){const t=a.getColAfter(i);if(!t)return;const n=i.getActualWidth()-e.newWidth,o=t.getActualWidth()+n;r.push({width:o,ratios:[1],columns:[t]})}})),0!==r.length&&this.resizeColumnSets({resizeSets:r,finished:i,source:n})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:r}=e;if(!(!t||t.every((e=>function(e){const{columns:t,width:i}=e;let n=0,r=0,o=!0;t.forEach((e=>{const t=e.getMinWidth();n+=t||0;const i=e.getMaxWidth();i>0?r+=i:o=!1}));const s=!o||i<=r;return i>=n&&s}(e))))){if(i){const e=t&&t.length>0?t[0].columns:null;(0,n.dispatchColumnResizedEvent)(this.eventSvc,e,i,r)}return}const s=[],a=[];t.forEach((e=>{const{width:t,columns:i,ratios:n}=e,l={},c={};i.forEach((e=>a.push(e)));let d=!0,u=0;for(;d;){if(u++,u>1e3){(0,o._error)(31);break}d=!1;const e=[];let r=0,s=t;i.forEach(((t,i)=>{if(c[t.getId()])s-=l[t.getId()];else{e.push(t);const o=n[i];r+=o}}));const a=1/r;e.forEach(((i,r)=>{let o;r===e.length-1?o=s:(o=Math.round(n[r]*t*a),s-=o);const u=i.getMinWidth(),h=i.getMaxWidth();o<u?(o=u,c[i.getId()]=!0,d=!0):h>0&&o>h&&(o=h,c[i.getId()]=!0,d=!0),l[i.getId()]=o}))}i.forEach((e=>{const t=l[e.getId()];e.getActualWidth()!==t&&(e.setActualWidth(t,r),s.push(e))}))}));const l=s.length>0;let c=[];if(l){const{colFlex:e,visibleCols:t,colViewport:i}=this.beans;c=e?.refreshFlexedColumns({resizingCols:a,skipSetLeft:!0})??[],t.setLeftValues(r),t.updateBodyWidths(),i.checkViewportColumns()}const d=a.concat(c);(l||i)&&(0,n.dispatchColumnResizedEvent)(this.eventSvc,d,i,r,c)}resizeHeader(e,t,i){if(!e.isResizable())return;const n=e.getActualWidth(),r=e.getMinWidth(),o=e.getMaxWidth(),s=Math.min(Math.max(n+t,r),o);this.setColumnWidths([{key:e,newWidth:s}],i,!0,"uiColumnResized")}createResizeFeature(e,t,i,n,r){return new a.ResizeFeature(e,t,i,n,r)}createGroupResizeFeature(e,t,i,n){return new s.GroupResizeFeature(e,t,i,n)}}t.ColumnResizeService=l},9033:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GroupResizeFeature=void 0;const n=i(8731);class r extends n.BeanStub{constructor(e,t,i,n){super(),this.comp=e,this.eResize=t,this.pinned=i,this.columnGroup=n}postConstruct(){if(!this.columnGroup.isResizable())return void this.comp.setResizableDisplayed(!1);const{horizontalResizeSvc:e,gos:t,colAutosize:i}=this.beans,n=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(n),!t.get("suppressAutoSize")&&i&&this.addDestroyFunc(i.addColumnGroupResize(this.eResize,this.columnGroup,(()=>this.resizeLeafColumnsToFit("uiColumnResized"))))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:n,groupAfterColumns:r,groupAfterStartWidth:o,groupAfterRatios:s}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=n,this.resizeTakeFromCols=r,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=s,this.toggleColumnResizing(!0)}onResizing(e,t,i="uiColumnResized"){const n=this.normaliseDragChange(t),r=this.resizeStartWidth+n;this.resizeColumnsFromLocalValues(r,i,e)}getInitialValues(e){const t=e=>e.reduce(((e,t)=>e+t.getActualWidth()),0),i=(e,t)=>e.map((e=>e.getActualWidth()/t)),n=this.getColumnsToResize(),r=t(n),o={columnsToResize:n,resizeStartWidth:r,resizeRatios:i(n,r)};let s=null;if(e&&(s=this.beans.colGroupSvc?.getGroupAtDirection(this.columnGroup,"After")??null),s){const e=s.getDisplayedLeafColumns(),n=o.groupAfterColumns=e.filter((e=>e.isResizable())),r=o.groupAfterStartWidth=t(n);o.groupAfterRatios=i(n,r)}else o.groupAfterColumns=void 0,o.groupAfterStartWidth=void 0,o.groupAfterRatios=void 0;return o}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t,i=!0){if(!this.resizeCols||!this.resizeRatios)return;const n={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(n,e,t,i)}resizeColumns(e,t,i,n=!0){const{columnsToResize:r,resizeStartWidth:o,resizeRatios:s,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,d=[];if(d.push({columns:r,ratios:s,width:t}),a){const e=t-o;d.push({columns:a,ratios:c,width:l-e})}this.beans.colResize?.resizeColumnSets({resizeSets:d,finished:n,source:i}),n&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter((e=>e.isResizable()))}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?"left"!==this.pinned&&(t*=-1):"right"===this.pinned&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}}t.GroupResizeFeature=r},7438:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ResizeFeature=void 0;const n=i(8731),r=i(3507);class o extends n.BeanStub{constructor(e,t,i,n,r){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=n,this.ctrl=r}postConstruct(){const e=[];let t,i;const n=()=>{if((0,r._setDisplayed)(this.eResize,t),!t)return;const{horizontalResizeSvc:n,colAutosize:o}=this.beans,s=n.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(s),i&&o&&e.push(o.addColumnAutosize(this.eResize,this.column))},o=()=>{e.forEach((e=>e())),e.length=0},s=()=>{const e=this.column.isResizable(),r=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(e!==t||r!==i)&&(t=e,i=r,o(),n())};s(),this.addDestroyFunc(o),this.ctrl.setRefreshFunction("resize",s)}onResizing(e,t){const{column:i,lastResizeAmount:n,resizeStartWidth:o,beans:s}=this,a=this.normaliseResizeAmount(t),l=[{key:i,newWidth:o+a}],{pinnedCols:c,ctrlsSvc:d,colResize:u}=s;if(this.column.getPinned()){if((c?.leftWidth??0)+(c?.rightWidth??0)+(a-n)>(0,r._getInnerWidth)(d.getGridBodyCtrl().eBodyViewport)-50)return}this.lastResizeAmount=a,u?.setColumnWidths(l,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i="left"!==this.pinned,n="right"===this.pinned;return this.gos.get("enableRtl")?i&&(t*=-1):n&&(t*=-1),t}}t.ResizeFeature=o},3600:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseColsService=void 0;const n=i(8731),r=i(1502),o=i(4422),s=i(2934);class a extends n.BeanStub{constructor(){super(...arguments),this.dispatchColumnChangedEvent=s.dispatchColumnChangedEvent,this.columns=[]}wireBeans(e){this.colModel=e.colModel,this.aggFuncSvc=e.aggFuncSvc,this.visibleCols=e.visibleCols}sortColumns(e){this.columns.sort(e)}setColumns(e,t){this.setColList(e,this.columns,this.eventName,!0,!0,this.columnProcessors.set,t)}addColumns(e,t){this.updateColList(e,this.columns,!0,!0,this.columnProcessors.add,this.eventName,t)}removeColumns(e,t){this.updateColList(e,this.columns,!1,!0,this.columnProcessors.remove,this.eventName,t)}setColList(e=[],t,i,n,r,s,a){const l=this.colModel.getCols();if(!l||0===l.length)return;const c=new Map;t.forEach(((e,t)=>c.set(e,t))),t.length=0,(0,o._exists)(e)&&e.forEach((e=>{const i=this.colModel.getColDefCol(e);i&&t.push(i)})),t.forEach(((e,t)=>{const i=c.get(e);void 0!==i?n&&i!==t||c.delete(e):c.set(e,0)}));(this.colModel.getColDefCols()||[]).forEach((e=>{const i=t.indexOf(e)>=0;s(e,i,a)})),r&&this.colModel.refreshCols(!1),this.visibleCols.refresh(a),this.dispatchColumnChangedEvent(this.eventSvc,i,[...c.keys()],a)}updateColList(e=[],t,i,n,o,s,a){if(!e||0===e.length)return;let l=!1;const c=new Set;if(e.forEach((e=>{if(!e)return;const n=this.colModel.getColDefCol(e);if(n){if(c.add(n),i){if(t.indexOf(n)>=0)return;t.push(n)}else{const e=t.indexOf(n);if(e<0)return;for(let i=e+1;i<t.length;i++)c.add(t[i]);(0,r._removeFromArray)(t,n)}o(n,i,a),l=!0}})),!l)return;n&&this.colModel.refreshCols(!1),this.visibleCols.refresh(a);const d=Array.from(c);this.eventSvc.dispatchEvent({type:s,columns:d,column:1===d.length?d[0]:null,source:a})}extractCols(e,t=[]){const i=this.columns,n=[],r=[],{setFlagFunc:o,getIndexFunc:s,getInitialIndexFunc:a,getValueFunc:l,getInitialValueFunc:c}=this.columnExtractors;(this.colModel.getColDefCols()||[]).forEach((e=>{const o=t.indexOf(e)<0,d=e.getColDef(),u=l(d),h=c(d),p=s(d),f=a(d);let g;if(g=void 0!==u?u:void 0!==p?null!==p&&p>=0:o?void 0!==h?h:!!(void 0!==f)&&(null!=f&&f>=0):i.indexOf(e)>=0,g){(o?null!=p||null!=f:null!=p)?n.push(e):r.push(e)}}));const d=e=>{const t=s(e.getColDef()),i=a(e.getColDef());return null!=t?t:i};n.sort(((e,t)=>{const i=d(e),n=d(t);return i===n?0:i<n?-1:1}));const u=[].concat(n);return i.forEach((e=>{r.indexOf(e)>=0&&u.push(e)})),r.forEach((e=>{u.indexOf(e)<0&&u.push(e)})),i.forEach((t=>{u.indexOf(t)<0&&o(t,!1,e)})),u.forEach((t=>{i.indexOf(t)<0&&o(t,!0,e)})),this.columns=u}restoreColumnOrder(e,t){const i=this.columns,n=this.colModel.getColDefCols();if(!i.length||!n)return e;const r=Object.keys(t),o=new Set(r),s=new Set(r),a=new Set(i.map((e=>{const t=e.getColId();return s.delete(t),t})).concat(r)),l=[],c={};let d=0;for(let e=0;e<n.length;e++){const t=n[e].getColId();a.has(t)&&(l.push(t),c[t]=d++)}let u=1e3,h=!1,p=0;const f=this.columnOrdering.enableProp,g=this.columnOrdering.initialEnableProp,m=this.columnOrdering.indexProp,v=this.columnOrdering.initialIndexProp,b=e=>{const i=c[e];for(let e=p;e<i;e++){const i=l[e];s.has(i)&&(t[i][m]=u++,s.delete(i))}p=i};return i.forEach((i=>{const n=i.getColId();if(o.has(n))b(n),t[n][m]=u++;else{const r=i.getColDef();if(null===r[m]||void 0===r[m]&&null==r[v]){if(!h){r[f]||void 0===r[f]&&r[g]?b(n):(s.forEach((e=>{t[e][m]=u+c[e]})),u+=l.length,h=!0)}e[n]||(e[n]={colId:n}),e[n][m]=u++}}})),e}}t.BaseColsService=a},1144:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getAllDisplayedVirtualColumns=t.getAllDisplayedColumns=t.getDisplayedRightColumns=t.getDisplayedCenterColumns=t.getDisplayedLeftColumns=t.getAllGridColumns=t.setColumnsPinned=t.setColumnsVisible=t.getDisplayedColBefore=t.getDisplayedColAfter=t.isPinningRight=t.isPinningLeft=t.isPinning=t.resetColumnState=t.getColumnState=t.applyColumnState=t.getColumns=t.getColumn=t.getDisplayNameForColumn=t.getColumnDefs=t.getColumnDef=void 0;const n=i(2885);t.getColumnDef=function(e,t){const i=e.colModel.getColDefCol(t);return i?i.getColDef():null},t.getColumnDefs=function(e){return e.colModel.getColumnDefs()},t.getDisplayNameForColumn=function(e,t,i){return e.colNames.getDisplayNameForColumn(t,i)||""},t.getColumn=function(e,t){return e.colModel.getColDefCol(t)},t.getColumns=function(e){return e.colModel.getColDefCols()},t.applyColumnState=function(e,t){return(0,n._applyColumnState)(e,t,"api")},t.getColumnState=function(e){return(0,n._getColumnState)(e)},t.resetColumnState=function(e){(0,n._resetColumnState)(e,"api")},t.isPinning=function(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()},t.isPinningLeft=function(e){return e.visibleCols.isPinningLeft()},t.isPinningRight=function(e){return e.visibleCols.isPinningRight()},t.getDisplayedColAfter=function(e,t){return e.visibleCols.getColAfter(t)},t.getDisplayedColBefore=function(e,t){return e.visibleCols.getColBefore(t)},t.setColumnsVisible=function(e,t,i){e.colModel.setColsVisible(t,i,"api")},t.setColumnsPinned=function(e,t,i){e.pinnedCols?.setColsPinned(t,i,"api")},t.getAllGridColumns=function(e){return e.colModel.getCols()},t.getDisplayedLeftColumns=function(e){return e.visibleCols.leftCols},t.getDisplayedCenterColumns=function(e){return e.visibleCols.centerCols},t.getDisplayedRightColumns=function(e){return e.visibleCols.rightCols},t.getAllDisplayedColumns=function(e){return e.visibleCols.allCols},t.getAllDisplayedVirtualColumns=function(e){return e.colViewport.getViewportColumns()}},4604:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnDefFactory=t._deepCloneDefinition=void 0;const n=i(8731),r=i(6996);function o(e,t){if(!e)return;const i=e,n={};return Object.keys(i).forEach((e=>{if(t&&t.indexOf(e)>=0||r.SKIP_JS_BUILTINS.has(e))return;const s=i[e],a="object"==typeof s&&null!==s&&s.constructor===Object;n[e]=a?o(s):s})),n}t._deepCloneDefinition=o;class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,i,n){const r=e.slice();t?r.sort(((e,t)=>i.indexOf(e)-i.indexOf(t))):i&&r.sort(((e,t)=>n.indexOf(e)-n.indexOf(t)));const o=this.rowGroupColsSvc?.columns,s=this.pivotColsSvc?.columns;return this.buildColumnDefs(r,o,s)}buildColumnDefs(e,t=[],i=[]){const n=[],r={};return e.forEach((e=>{let o=!0,s=this.createDefFromColumn(e,t,i),a=e.getOriginalParent(),l=null;for(;a;){let e=null;if(a.isPadding()){a=a.getOriginalParent();continue}const t=r[a.getGroupId()];if(t){t.children.push(s),o=!1;break}if(e=this.createDefFromGroup(a),e&&(e.children=[s],r[e.groupId]=e,s=e,a=a.getOriginalParent()),null!=a&&l===a){o=!1;break}l=a}o&&n.push(s)})),n}createDefFromGroup(e){const t=o(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const n=o(e.getColDef());return n.colId=e.getColId(),n.width=e.getActualWidth(),n.rowGroup=e.isRowGroupActive(),n.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,n.pivot=e.isPivotActive(),n.pivotIndex=e.isPivotActive()?i.indexOf(e):null,n.aggFunc=e.isValueActive()?e.getAggFunc():null,n.hide=!e.isVisible()||void 0,n.pinned=e.isPinned()?e.getPinned():null,n.sort=e.getSort()?e.getSort():null,n.sortIndex=null!=e.getSortIndex()?e.getSortIndex():null,n}}t.ColumnDefFactory=s},2934:function(e,t){function i(e,t){if(!e||0==e.length)return;const i=t(e[0]);for(let n=1;n<e.length;n++)if(i!==t(e[n]))return;return i}Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchColumnResizedEvent=t.dispatchColumnChangedEvent=t.dispatchColumnVisibleEvent=t.dispatchColumnPinnedEvent=void 0,t.dispatchColumnPinnedEvent=function(e,t,n){if(!t.length)return;const r=1===t.length?t[0]:null,o=i(t,(e=>e.getPinned()));e.dispatchEvent({type:"columnPinned",pinned:null!=o?o:null,columns:t,column:r,source:n})},t.dispatchColumnVisibleEvent=function(e,t,n){if(!t.length)return;const r=1===t.length?t[0]:null,o=i(t,(e=>e.isVisible()));e.dispatchEvent({type:"columnVisible",visible:o,columns:t,column:r,source:n})},t.dispatchColumnChangedEvent=function(e,t,i,n){e.dispatchEvent({type:t,columns:i,column:i&&1==i.length?i[0]:null,source:n})},t.dispatchColumnResizedEvent=function(e,t,i,n,r=null){t?.length&&e.dispatchEvent({type:"columnResized",columns:t,column:1===t.length?t[0]:null,flexColumns:r,finished:i,source:n})}},2716:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.depthFirstOriginalTreeSearch=t._addColumnDefaultAndTypes=t._updateColumnState=t.updateSomeColumnState=t._recursivelyCreateColumns=t._createColumnTree=void 0;const n=i(3355),r=i(9409),o=i(5449),s=i(7274),a=i(6996),l=i(7764),c=i(2294),d=i(3146);function u(e,t,i,n,r,o,s,a){if(!t)return[];const{colGroupSvc:l}=e,c=new Array(t.length);for(let d=0;d<c.length;d++){const u=t[d];l&&void 0!==u.children?c[d]=l.createProvidedColumnGroup(n,u,i,r,o,s,a):c[d]=h(e,n,u,r,o,a)}return c}function h(e,t,i,r,o,s){const a=function(e,t){if(!t)return;for(let i=0;i<t.length;i++){const n=t[i].getUserProvidedColDef();if(!n)continue;if(null!=e.colId){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(null!=e.field){if(n.field===e.field)return{idx:i,column:t[i]}}else if(n===e)return{idx:i,column:t[i]}}return}(i,r);a&&r?.splice(a.idx,1);let l=a?.column;if(l){const t=g(e,i,l.getColId());l.setColDef(t,i,s),f(e,l,t,s)}else{const r=o.getUniqueKey(i.colId,i.field),s=g(e,i,r);l=new n.AgColumn(s,i,r,t),e.context.createBean(l)}return e.dataTypeSvc?.addColumnListeners(l),l}function p(e,t,i,n,r,o,s,a){const{sortSvc:l,pinnedCols:c,colFlex:d}=e;void 0!==i&&t.setVisible(!i,a),l&&(l.updateColSort(t,n,a),void 0!==r&&l.setColSortIndex(t,r)),void 0!==o&&c?.setColPinned(t,o),void 0!==s&&d?.setColFlex(t,s)}function f(e,t,i,n){p(e,t,i.hide,i.sort,i.sortIndex,i.pinned,i.flex,n);const r=t.getFlex();if(!(null!=r&&r>0))if(null!=i.width)t.setActualWidth(i.width,n);else{const e=t.getActualWidth();t.setActualWidth(e,n)}}function g(e,t,i,n){const{gos:r,dataTypeSvc:c,validation:u}=e,h={},p=r.get("defaultColDef");(0,a._mergeDeep)(h,p,!1,!0);const f=function(e,t,i,n){const r=e.dataTypeSvc?.updateColDefAndGetColumnType(t,i,n),o=i.type??r??t.type;return t.type=o,o?(0,d.convertColumnTypes)(o):void 0}(e,h,t,i);f&&function(e,t,i){if(!t.length)return;const n=Object.assign({},o.DefaultColumnTypes),r=e.gos.get("columnTypes")||{};for(const e of Object.keys(r)){const t=r[e];if(e in n)(0,l._warn)(34,{key:e});else{t.type&&(0,l._warn)(35),n[e]=t}}t.forEach((e=>{const t=n[e.trim()];t?(0,a._mergeDeep)(i,t,!1,!0):(0,l._warn)(36,{t:e})}))}(e,f,h),(0,a._mergeDeep)(h,t,!1,!0);const g=r.get("autoGroupColumnDef"),m=(0,s._isColumnsSortingCoupledToGroup)(r);return t.rowGroup&&g&&m&&(0,a._mergeDeep)(h,{sort:g.sort,initialSort:g.initialSort},!1,!0),c?.validateColDef(h),u?.validateColDef(h,i,n),h}function m(e,t,i){if(t)for(let n=0;n<t.length;n++){const o=t[n];(0,r.isProvidedColumnGroup)(o)&&m(o,o.getChildren(),i),i(o,e)}}t._createColumnTree=function(e,t=null,i,n,o){const s=new c.ColumnKeyCreator,{existingCols:a,existingGroups:l,existingColKeys:d}=function(e){const t=[],i=[],n=[];e&&m(null,e,(e=>{if((0,r.isProvidedColumnGroup)(e)){const t=e;i.push(t)}else{const i=e;n.push(i.getId()),t.push(i)}}));return{existingCols:t,existingGroups:i,existingColKeys:n}}(n);s.addExistingKeys(d);const h=u(e,t,0,i,a,s,l,o),{colGroupSvc:p}=e,f=p?.findMaxDepth(h,0)??0,g=p?p.balanceColumnTree(h,0,f,s):h;return m(null,g,((e,t)=>{(0,r.isProvidedColumnGroup)(e)&&e.setupExpandable(),e.originalParent=t})),{columnTree:g,treeDept:f}},t._recursivelyCreateColumns=u,t.updateSomeColumnState=p,t._updateColumnState=f,t._addColumnDefaultAndTypes=g,t.depthFirstOriginalTreeSearch=m},2849:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnFlexService=void 0;const n=i(8731),r=i(2934);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="colFlex"}refreshFlexedColumns(e={}){const t=e.source??"flex";null!=e.viewportWidth&&(this.flexViewportWidth=e.viewportWidth);const i=this.flexViewportWidth;if(!i)return[];const{visibleCols:n}=this.beans,o=n.centerCols;let s=-1;if(e.resizingCols){const t=new Set(e.resizingCols);for(let e=o.length-1;e>=0;e--)if(t.has(o[e])){s=e;break}}let a=!1;const l=o.map(((e,t)=>{const i=e.getFlex(),n=null!=i&&i>0&&t>s;return a||(a=n),{col:e,isFlex:n,flex:Math.max(0,i??0),initialSize:e.getActualWidth(),min:e.getMinWidth(),max:e.getMaxWidth(),targetSize:0}}));if(!a)return[];let c=l.length,d=l.reduce(((e,t)=>e+t.flex),0),u=i;const h=(e,i)=>{e.frozenSize=i,e.col.setActualWidth(i,t),u-=i,d-=e.flex,c-=1},p=e=>null!=e.frozenSize;for(const e of l)e.isFlex||h(e,e.initialSize);for(;c>0;){const e=Math.round(d<1?u*d:u);let t,i=0,n=0;for(const r of l){if(p(r))continue;t=r,n+=e*(r.flex/d);const o=n-i,s=Math.round(o);r.targetSize=s,i+=s}t&&(t.targetSize+=e-i);let r=0;for(const e of l){if(p(e))continue;const t=e.targetSize,i=Math.min(Math.max(t,e.min),e.max);r+=i-t,e.violationType=i===t?void 0:i<t?"max":"min",e.targetSize=i}const o=0===r?"all":r>0?"min":"max";for(const e of l)p(e)||"all"!==o&&e.violationType!==o||h(e,e.targetSize)}e.skipSetLeft||n.setLeftValues(t),e.updateBodyWidths&&n.updateBodyWidths();const f=l.filter((e=>e.isFlex&&!e.violationType)).map((e=>e.col));if(e.fireResizedEvent){const e=l.filter((e=>e.initialSize!==e.frozenSize)).map((e=>e.col)),i=l.filter((e=>e.flex)).map((e=>e.col));(0,r.dispatchColumnResizedEvent)(this.eventSvc,e,!0,t,i)}return f}initCol(e){const{flex:t,initialFlex:i}=e.colDef;void 0!==t?e.flex=t:void 0!==i&&(e.flex=i)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}}t.ColumnFlexService=o},6641:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getAllDisplayedColumnGroups=t.getRightDisplayedColumnGroups=t.getCenterDisplayedColumnGroups=t.getLeftDisplayedColumnGroups=t.resetColumnGroupState=t.setColumnGroupState=t.getColumnGroupState=t.getDisplayNameForColumnGroup=t.getProvidedColumnGroup=t.getColumnGroup=t.setColumnGroupOpened=void 0,t.setColumnGroupOpened=function(e,t,i){e.colGroupSvc?.setColumnGroupOpened(t,i,"api")},t.getColumnGroup=function(e,t,i){return e.colGroupSvc?.getColumnGroup(t,i)??null},t.getProvidedColumnGroup=function(e,t){return e.colGroupSvc?.getProvidedColGroup(t)??null},t.getDisplayNameForColumnGroup=function(e,t,i){return e.colNames.getDisplayNameForColumnGroup(t,i)||""},t.getColumnGroupState=function(e){return e.colGroupSvc?.getColumnGroupState()??[]},t.setColumnGroupState=function(e,t){e.colGroupSvc?.setColumnGroupState(t,"api")},t.resetColumnGroupState=function(e){e.colGroupSvc?.resetColumnGroupState("api")},t.getLeftDisplayedColumnGroups=function(e){return e.visibleCols.treeLeft},t.getCenterDisplayedColumnGroups=function(e){return e.visibleCols.treeCenter},t.getRightDisplayedColumnGroups=function(e){return e.visibleCols.treeRight},t.getAllDisplayedColumnGroups=function(e){return e.visibleCols.getAllTrees()}},6041:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnGroupModule=void 0;const n=i(84),r=i(7205),o=i(6641),s=i(6266);t.ColumnGroupModule={moduleName:"ColumnGroup",version:r.VERSION,dynamicBeans:{headerGroupCellCtrl:n.HeaderGroupCellCtrl},beans:[s.ColumnGroupService],apiFunctions:{getAllDisplayedColumnGroups:o.getAllDisplayedColumnGroups,getCenterDisplayedColumnGroups:o.getCenterDisplayedColumnGroups,getColumnGroup:o.getColumnGroup,getColumnGroupState:o.getColumnGroupState,getDisplayNameForColumnGroup:o.getDisplayNameForColumnGroup,getLeftDisplayedColumnGroups:o.getLeftDisplayedColumnGroups,getProvidedColumnGroup:o.getProvidedColumnGroup,getRightDisplayedColumnGroups:o.getRightDisplayedColumnGroups,resetColumnGroupState:o.resetColumnGroupState,setColumnGroupOpened:o.setColumnGroupOpened,setColumnGroupState:o.setColumnGroupState}}},6266:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnGroupService=void 0;const n=i(8731),r=i(6908),o=i(6908),s=i(9409),a=i(9409),l=i(1502),c=i(4422),d=i(2716),u=i(6869);class h extends n.BeanStub{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[],t=this.beans.colModel.getColTree();return(0,d.depthFirstOriginalTreeSearch)(null,t,(t=>{(0,a.isProvidedColumnGroup)(t)&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})})),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const i=[];(0,d.depthFirstOriginalTreeSearch)(null,t,(e=>{if((0,a.isProvidedColumnGroup)(e)){const t=e.getColGroupDef(),n={groupId:e.getGroupId(),open:t?t.openByDefault:void 0};i.push(n)}})),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){const{colModel:i,colAnimation:n,visibleCols:r,eventSvc:o}=this.beans;if(!i.getColTree().length)return;n?.start();const s=[];e.forEach((e=>{const t=e.groupId,i=e.open,n=this.getProvidedColGroup(t);n&&n.isExpanded()!==i&&(n.setExpanded(i),s.push(n))})),r.refresh(t,!0),s.length&&o.dispatchEvent({type:"columnGroupOpened",columnGroup:1===s.length?s[0]:void 0,columnGroups:s}),n?.finish()}setColumnGroupOpened(e,t,i){let n;n=(0,a.isProvidedColumnGroup)(e)?e.getId():e||"",this.setColumnGroupState([{groupId:n,open:t}],i)}getProvidedColGroup(e){let t=null;return(0,d.depthFirstOriginalTreeSearch)(null,this.beans.colModel.getColTree(),(i=>{(0,a.isProvidedColumnGroup)(i)&&i.getId()===e&&(t=i)})),t}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),n=e.getDisplayedLeafColumns(),r="After"===t?(0,l._last)(n):n[0],o=`getCol${t}`;for(;;){const t=this.beans.visibleCols[o](r);if(!t)return null;const n=this.getColGroupAtLevel(t,i);if(n!==e)return n}}getColGroupAtLevel(e,t){let i,n,r=e.getParent();for(;;){if(i=r.getProvidedColumnGroup().getLevel(),n=r.getPaddingLevel(),i+n<=t)break;r=r.getParent()}return r}updateOpenClosedVisibility(){const e=this.beans.visibleCols.getAllTrees();(0,u.depthFirstAllColumnTreeSearch)(e,!1,(e=>{(0,r.isColumnGroup)(e)&&e.calculateDisplayedColumns()}))}getColumnGroup(e,t){if(!e)return null;if((0,r.isColumnGroup)(e))return e;const i=this.beans.visibleCols.getAllTrees(),n="number"==typeof t;let o=null;return(0,u.depthFirstAllColumnTreeSearch)(i,!1,(i=>{if((0,r.isColumnGroup)(i)){const r=i;let s;s=n?e===r.getGroupId()&&t===r.getPartId():e===r.getGroupId(),s&&(o=r)}})),o}createColumnGroups(e){const{columns:t,idCreator:i,pinned:n,oldDisplayedGroups:o,isStandaloneStructure:s}=e,a=this.mapOldGroupsById(o),l=[];let c=t;for(;c.length;){const e=c;c=[];let t=0;const o=o=>{const d=t;t=o;const u=e[d],h=((0,r.isColumnGroup)(u)?u.getProvidedColumnGroup():u).getOriginalParent();if(null==h){for(let t=d;t<o;t++)l.push(e[t]);return}const p=this.createColumnGroup(h,i,a,n,s);for(let t=d;t<o;t++)p.addChild(e[t]);c.push(p)};for(let i=1;i<e.length;i++){const n=e[i],s=((0,r.isColumnGroup)(n)?n.getProvidedColumnGroup():n).getOriginalParent(),a=e[t];s!==((0,r.isColumnGroup)(a)?a.getProvidedColumnGroup():a).getOriginalParent()&&o(i)}t<e.length&&o(e.length)}return s||this.setupParentsIntoCols(l,null),l}createProvidedColumnGroup(e,t,i,n,r,o,a){const l=r.getUniqueKey(t.groupId||null,null),c=this.createMergedColGroupDef(t,l),u=new s.AgProvidedColumnGroup(c,l,!1,i);this.createBean(u);const h=this.findExistingGroup(t,o);h&&o.splice(h.idx,1);const p=h?.group;p&&u.setExpanded(p.isExpanded());const f=(0,d._recursivelyCreateColumns)(this.beans,c.children,i+1,e,n,r,o,a);return u.setChildren(f),u}balanceColumnTree(e,t,i,n){const r=[];for(let o=0;o<e.length;o++){const l=e[o];if((0,a.isProvidedColumnGroup)(l)){const e=l,o=this.balanceColumnTree(e.getChildren(),t+1,i,n);e.setChildren(o),r.push(e)}else{let o,c;for(let e=i-1;e>=t;e--){const e=n.getUniqueKey(null,null),i=this.createMergedColGroupDef(null,e),r=new s.AgProvidedColumnGroup(i,e,!0,t);this.createBean(r),c&&c.setChildren([r]),c=r,o||(o=c)}if(o&&c){r.push(o);if(e.some((e=>(0,a.isProvidedColumnGroup)(e)))){c.setChildren([l]);continue}c.setChildren(e);break}r.push(l)}}return r}findDepth(e){let t=0,i=e;for(;i&&i[0]&&(0,a.isProvidedColumnGroup)(i[0]);)t++,i=i[0].getChildren();return t}findMaxDepth(e,t){let i=t;for(let n=0;n<e.length;n++){const r=e[n];if((0,a.isProvidedColumnGroup)(r)){const e=r,n=this.findMaxDepth(e.getChildren(),t+1);i<n&&(i=n)}}return i}balanceTreeForAutoCols(e,t){const i=[];return e.forEach((e=>{let n=e;for(let i=t-1;i>=0;i--){const t=new s.AgProvidedColumnGroup(null,`FAKE_PATH_${e.getId()}}_${i}`,!0,i);this.createBean(t),t.setChildren([n]),n.originalParent=t,n=t}0===t&&(e.originalParent=null),i.push(n)})),i}createMergedColGroupDef(e,t){const i={},{gos:n,validation:r}=this.beans;return Object.assign(i,n.get("defaultColGroupDef")),Object.assign(i,e),r?.validateColDef(i,t),i}findExistingGroup(e,t){if(null!=e.groupId)for(let i=0;i<t.length;i++){const n=t[i];if(n.getColGroupDef()&&n.getId()===e.groupId)return{idx:i,group:n}}}createColumnGroup(e,t,i,n,s){const a=e.getGroupId(),l=t.getInstanceIdForKey(a);let d=i[(0,r.createUniqueColumnGroupId)(a,l)];return d&&d.getProvidedColumnGroup()!==e&&(d=null),(0,c._exists)(d)?d.reset():(d=new o.AgColumnGroup(e,a,l,n),s||this.createBean(d)),d}mapOldGroupsById(e){const t={},i=e=>{e.forEach((e=>{if((0,r.isColumnGroup)(e)){const n=e;t[e.getUniqueId()]=n,i(n.getChildren())}}))};return e&&i(e),t}setupParentsIntoCols(e,t){e.forEach((e=>{if(e.parent=t,(0,r.isColumnGroup)(e)){const t=e;this.setupParentsIntoCols(t.getChildren(),t)}}))}}t.ColumnGroupService=h},3156:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isColumnHovered=void 0,t.isColumnHovered=function(e,t){return!!e.colHover?.isHovered(t)}},1690:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnHoverModule=void 0;const n=i(7205),r=i(3156),o=i(7683);t.ColumnHoverModule={moduleName:"ColumnHover",version:n.VERSION,beans:[o.ColumnHoverService],apiFunctions:{isColumnHovered:r.isColumnHovered}}},7683:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnHoverService=void 0;const n=i(8731),r=i(5788);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="colHover"}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){const t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,i){const n=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.isHovered(i);t.addOrRemoveCssClass("ag-column-hover",e)};e.addManagedEventListeners({columnHoverChanged:n}),n()}onCellColumnHover(e,t){if(!t)return;if(!this.gos.get("columnHoverHighlight"))return;const i=this.isHovered(e);t.addOrRemoveCssClass("ag-column-hover",i)}addHeaderFilterColumnHoverListener(e,t,i,n){this.createHoverFeature(e,[i],n);const r=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.isHovered(i);t.addOrRemoveCssClass("ag-column-hover",e)};e.addManagedEventListeners({columnHoverChanged:r}),r()}createHoverFeature(e,t,i){e.createManagedBean(new r.HoverFeature(t,i))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}}t.ColumnHoverService=o},5788:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HoverFeature=void 0;const n=i(8731);class r extends n.BeanStub{constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){if(this.gos.get("columnHoverHighlight")){const e=this.beans.colHover;this.addManagedListeners(this.element,{mouseout:e.clearMouseOver.bind(e),mouseover:e.setMouseOver.bind(e,this.columns)})}}}t.HoverFeature=r},2294:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnKeyCreator=void 0;const n=i(4422);t.ColumnKeyCreator=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=(0,n._toStringOrNull)(e);let i=0;for(;;){let n=e??t;if(n?0!==i&&(n+="_"+i):n=i,!this.existingKeys[n])return this.existingKeys[n]=!0,String(n);i++}}}},2986:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnModel=void 0;const n=i(3505),r=i(8731),o=i(7274),s=i(1502),a=i(2716),l=i(2885),c=i(3146);class d extends r.BeanStub{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],(e=>this.refreshAll((0,c._convertColumnEventSourceType)(e.source)))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",(e=>this.setPivotMode(this.gos.get("pivotMode"),(0,c._convertColumnEventSourceType)(e.source))))}createColsFromColDefs(e){const{beans:t}=this,{valueCache:i,colAutosize:n,rowGroupColsSvc:r,pivotColsSvc:o,valueColsSvc:s,visibleCols:d,colViewport:u,eventSvc:h}=t,p=this.colDefs?(0,l._compareColumnStatesAndDispatchEvents)(t,e):void 0;i?.expire();const f=this.colDefCols?.list,g=this.colDefCols?.tree,m=(0,a._createColumnTree)(t,this.colDefs,!0,g,e);(0,c._destroyColumnTree)(t,this.colDefCols?.tree,m.columnTree);const v=m.columnTree,b=m.treeDept,y=(0,c._getColumnsFromTree)(v),w={};y.forEach((e=>w[e.getId()]=e)),this.colDefCols={tree:v,treeDepth:b,list:y,map:w},r?.extractCols(e,f),o?.extractCols(e,f),s?.extractCols(e,f),this.ready=!0,this.refreshCols(!0),d.refresh(e),u.checkViewportColumns(),h.dispatchEvent({type:"columnEverythingChanged",source:e}),p&&(this.changeEventsDispatching=!0,p(),this.changeEventsDispatching=!1),h.dispatchEvent({type:"newColumnsLoaded",source:e}),"gridInitializing"===e&&n?.applyAutosizeStrategy()}refreshCols(e){if(!this.colDefCols)return;const t=this.cols?.tree;this.saveColOrder();const{autoColSvc:i,selectionColSvc:n,rowNumbersSvc:r,quickFilter:a,pivotResultCols:l,showRowGroupCols:c,rowAutoHeight:d,visibleCols:u,colViewport:h,eventSvc:p}=this.beans,f=this.selectCols(l,this.colDefCols);this.createColumnsForService([i,n,r],f);const g=(0,o._shouldMaintainColumnOrder)(this.gos,this.showingPivotResult);e&&!g||this.restoreColOrder(f),this.positionLockedCols(f),c?.refresh(),a?.refreshCols(),this.setColSpanActive(),d?.setAutoHeightActive(f),u.clear(),h.clear();!(0,s._areEqual)(t,this.cols.tree)&&p.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t){for(const i of e)i&&(i.createColumns(t,(e=>{this.lastOrder=e(this.lastOrder),this.lastPivotOrder=e(this.lastPivotOrder)})),i.addColumns(t))}selectCols(e,t){const i=e?.getPivotResultCols()??null;this.showingPivotResult=null!=i;const{map:n,list:r,tree:o,treeDepth:s}=i??t;if(this.cols={list:r.slice(),map:{...n},tree:o.slice(),treeDepth:s},i){i.list.some((e=>void 0!==this.cols?.map[e.getColId()]))||(this.lastPivotOrder=null)}return this.cols}getColsToShow(){if(!this.cols)return[];const e=this.isPivotMode()&&!this.showingPivotResult,t=this.beans.valueColsSvc?.columns;return this.cols.list.filter((i=>{const n=(0,c.isColumnGroupAutoCol)(i);if(e){const e=t?.includes(i);return n||e}return n||i.isVisible()}))}refreshAll(e){this.ready&&(this.refreshCols(!1),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,i){(0,l._applyColumnState)(this.beans,{state:e.map((e=>({colId:"string"==typeof e?e:e.getColId(),hide:!t})))},i)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const i=new Map(t.map(((e,t)=>[e,t])));if(!e.list.some((e=>i.has(e))))return;const n=new Map(e.list.map((e=>[e,!0]))),r=t.filter((e=>n.has(e))),o=new Map(r.map((e=>[e,!0]))),s=e.list.filter((e=>!o.has(e))),a=r.slice();s.forEach((e=>{let t=e.getOriginalParent();if(!t)return void a.push(e);const i=[];for(;!i.length&&t;){t.getLeafColumns().forEach((e=>{const t=a.indexOf(e)>=0,n=i.indexOf(e)<0;t&&n&&i.push(e)})),t=t.getOriginalParent()}if(!i.length)return void a.push(e);const n=i.map((e=>a.indexOf(e))),r=Math.max(...n);a.splice(r+1,0,e)})),e.list=a}positionLockedCols(e){e.list=(0,n.placeLockedColumns)(e.list,this.gos)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list??null:this.lastOrder=this.cols?.list??null}getColumnDefs(){return this.colDefCols?this.beans.colDefFactory?.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,this.cols?.list??[]):void 0}setColSpanActive(){this.colSpanActive=!!this.cols?.list.some((e=>null!=e.getColDef().colSpan))}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode)return;if(this.pivotMode=e,!this.ready)return;this.refreshCols(!1);const{visibleCols:i,eventSvc:n}=this.beans;i.refresh(t),n.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){const e=this.beans.pivotColsSvc?.columns;return this.pivotMode&&!!e?.length}recreateColumnDefs(e){if(!this.cols)return;this.beans.autoColSvc?.updateColumns(e);const t=(0,c._convertColumnEventSourceType)(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){(0,c._destroyColumnTree)(this.beans,this.colDefCols?.tree),super.destroy()}getColTree(){return this.cols?.tree??[]}getColDefColTree(){return this.colDefCols?.tree??[]}getColDefCols(){return this.colDefCols?.list??null}getCols(){return this.cols?.list??[]}getAllCols(){const{pivotResultCols:e,autoColSvc:t,selectionColSvc:i}=this.beans,n=e?.getPivotResultCols()?.list;return[this.colDefCols?.list??[],t?.columns?.list??[],i?.columns?.list??[],n??[]].flat()}getColsForKeys(e){return e?e.map((e=>this.getCol(e))).filter((e=>null!=e)):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return null==e?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(null==t)return null;const{map:i,list:n}=t;if("string"==typeof e&&i[e])return i[e];for(let t=0;t<n.length;t++)if((0,c._columnsMatch)(n[t],e))return n[t];return this.beans.autoColSvc?.getColumn(e)??this.beans.selectionColSvc?.getColumn(e)??null}}t.ColumnModel=d},2027:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnApiModule=t.ColumnFlexModule=t.DataTypeModule=void 0;const n=i(7358),r=i(7205),o=i(1144),s=i(4604),a=i(2849),l=i(6350);t.DataTypeModule={moduleName:"DataType",version:r.VERSION,beans:[l.DataTypeService],dependsOn:[n.CheckboxCellRendererModule]},t.ColumnFlexModule={moduleName:"ColumnFlex",version:r.VERSION,beans:[a.ColumnFlexService]},t.ColumnApiModule={moduleName:"ColumnApi",version:r.VERSION,beans:[s.ColumnDefFactory],apiFunctions:{getColumnDef:o.getColumnDef,getDisplayNameForColumn:o.getDisplayNameForColumn,getColumn:o.getColumn,getColumns:o.getColumns,applyColumnState:o.applyColumnState,getColumnState:o.getColumnState,resetColumnState:o.resetColumnState,isPinning:o.isPinning,isPinningLeft:o.isPinningLeft,isPinningRight:o.isPinningRight,getDisplayedColAfter:o.getDisplayedColAfter,getDisplayedColBefore:o.getDisplayedColBefore,setColumnsVisible:o.setColumnsVisible,setColumnsPinned:o.setColumnsPinned,getAllGridColumns:o.getAllGridColumns,getDisplayedLeftColumns:o.getDisplayedLeftColumns,getDisplayedCenterColumns:o.getDisplayedCenterColumns,getDisplayedRightColumns:o.getDisplayedRightColumns,getAllDisplayedColumns:o.getAllDisplayedColumns,getAllDisplayedVirtualColumns:o.getAllDisplayedVirtualColumns,getColumnDefs:o.getColumnDefs}}},8997:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnNameService=t._camelCaseToHumanText=void 0;const n=i(8731),r=i(7274);function o(e){if(!e||null==e)return null;return e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map((e=>e.substring(0,1).toUpperCase()+(e.length>1?e.substring(1,e.length):""))).join(" ")}t._camelCaseToHumanText=o;class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;const n=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:r}=this.beans;return i&&r?r.getHeaderName(e,n):n}getDisplayNameForProvidedColumnGroup(e,t,i){const n=t?.getColGroupDef();return n?this.getHeaderName(n,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,n,s){const a=e.headerValueGetter;if(a){const o=(0,r._addGridCommonParams)(this.gos,{colDef:e,column:t,columnGroup:i,providedColumnGroup:n,location:s});return"function"==typeof a?a(o):"string"==typeof a?this.beans.expressionSvc?.evaluate(a,o)??null:""}return null!=e.headerName?e.headerName:e.field?o(e.field):""}}t.ColumnNameService=s},2885:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getColumnStateFromColDef=t._getColumnState=t._compareColumnStatesAndDispatchEvents=t._resetColumnState=t._applyColumnState=void 0;const n=i(3505),r=i(1502),o=i(4422),s=i(7764),a=i(2934),l=i(2716),c=i(3146);function d(e,t,i){const{colModel:a,rowGroupColsSvc:d,pivotColsSvc:h,autoColSvc:p,selectionColSvc:g,colAnimation:m,visibleCols:v,pivotResultCols:b,environment:y,valueColsSvc:w,eventSvc:C,gos:_}=e,S=a.getColDefCols()||[];if(!S?.length)return!1;if(t?.state&&!t.state.forEach)return(0,s._warn)(32),!1;const A=(n,r,o,s,a)=>{if(!n)return;const u=(0,c.getValueFactory)(r,t.defaultState),p=u("flex").value1;if((0,l.updateSomeColumnState)(e,n,u("hide").value1,u("sort").value1,u("sortIndex").value1,u("pinned").value1,p,i),null==p){const e=u("width").value1;if(null!=e){const t=n.getColDef().minWidth??y.getDefaultColumnMinWidth();null!=t&&e>=t&&n.setActualWidth(e,i)}}!a&&n.isPrimary()&&(w?.syncColumnWithState(n,i,u),d?.syncColumnWithState(n,i,u,o),h?.syncColumnWithState(n,i,u,s))},x=(o,l,m)=>{const b=u(e,i),y=l.slice(),w={},S={},x=[],E=[],T=[];let D=0;const M=d?.columns.slice()??[],k=h?.columns.slice()??[];o.forEach((e=>{const t=e.colId;if(t.startsWith(c.GROUP_AUTO_COLUMN_ID))return x.push(e),void T.push(e);if((0,c.isColumnSelectionCol)(t))return E.push(e),void T.push(e);const i=m(t);i?(A(i,e,w,S,!1),(0,r._removeFromArray)(y,i)):(T.push(e),D+=1)}));const P=e=>A(e,null,w,S,!1);y.forEach(P),d?.sortColumns(f.bind(d,w,M)),h?.sortColumns(f.bind(h,S,k)),a.refreshCols(!1);const R=(e,t,i=[])=>{t.forEach((t=>{const n=e(t.colId);(0,r._removeFromArray)(i,n),A(n,t,null,null,!0)})),i.forEach(P)};return R((e=>p?.getColumn(e)??null),x,p?.getColumns()?.slice()),R((e=>g?.getColumn(e)??null),E,g?.getColumns()?.slice()),function(e,t,i){if(!e.applyOrder||!e.state)return;const r=[];e.state.forEach((e=>{null!=e.colId&&r.push(e.colId)})),function(e,t,i,r){if(null==e)return;let o=[];const a={};t.forEach((t=>{if(a[t])return;const i=e.map[t];i&&(o.push(i),a[t]=!0)}));let l=0;if(e.list.forEach((e=>{const t=e.getColId();if(null!=a[t])return;t.startsWith(c.GROUP_AUTO_COLUMN_ID)?o.splice(l++,0,e):o.push(e)})),o=(0,n.placeLockedColumns)(o,r),!(0,n.doesMovePassMarryChildren)(o,i.getColTree()))return void(0,s._warn)(39);e.list=o}(t.cols,r,t,i)}(t,a,_),v.refresh(i),C.dispatchEvent({type:"columnEverythingChanged",source:i}),b(),{unmatchedAndAutoStates:T,unmatchedCount:D}};m?.start();let{unmatchedAndAutoStates:E,unmatchedCount:T}=x(t.state||[],S,(e=>a.getColDefCol(e)));if(E.length>0||(0,o._exists)(t.defaultState)){T=x(E,b?.getPivotResultCols()?.list??[],(e=>b?.getPivotResultCol(e)??null)).unmatchedCount}return m?.finish(),0===T}function u(e,t){const{rowGroupColsSvc:i,pivotColsSvc:n,valueColsSvc:o,colModel:s,sortSvc:l,eventSvc:c}=e,d={rowGroupColumns:i?.columns.slice()??[],pivotColumns:n?.columns.slice()??[],valueColumns:o?.columns.slice()??[]},u=h(e),p={};return u.forEach((e=>{p[e.colId]=e})),()=>{const o=s.getAllCols(),f=(e,i,n,o)=>{const s=i.map(o),a=n.map(o);if((0,r._areEqual)(s,a))return;const l=new Set(i);n.forEach((e=>{l.delete(e)||l.add(e)}));const d=[...l];c.dispatchEvent({type:e,columns:d,column:1===d.length?d[0]:null,source:t})},g=e=>{const t=[];return o.forEach((i=>{const n=p[i.getColId()];n&&e(n,i)&&t.push(i)})),t},m=e=>e.getColId();f("columnRowGroupChanged",d.rowGroupColumns,i?.columns??[],m),f("columnPivotChanged",d.pivotColumns,n?.columns??[],m);const v=g(((e,t)=>{const i=null!=e.aggFunc,n=i!=t.isValueActive(),r=i&&e.aggFunc!=t.getAggFunc();return n||r}));v.length>0&&(0,a.dispatchColumnChangedEvent)(c,"columnValueChanged",v,t);(0,a.dispatchColumnResizedEvent)(c,g(((e,t)=>e.width!=t.getActualWidth())),!0,t);(0,a.dispatchColumnPinnedEvent)(c,g(((e,t)=>e.pinned!=t.getPinned())),t);(0,a.dispatchColumnVisibleEvent)(c,g(((e,t)=>e.hide==t.isVisible())),t);const b=g(((e,t)=>e.sort!=t.getSort()||e.sortIndex!=t.getSortIndex()));b.length>0&&l?.dispatchSortChangedEvents(t,b);const y=h(e);!function(e,t,i,n,r){const o={};t.forEach((e=>o[e.colId]=e));const s={};e.forEach((e=>{o[e.colId]&&(s[e.colId]=!0)}));const a=e.filter((e=>s[e.colId])),l=t.filter((e=>s[e.colId])),c=[];if(l.forEach(((e,t)=>{const i=a&&a[t];if(i&&i.colId!==e.colId){const e=n.getCol(i.colId);e&&c.push(e)}})),!c.length)return;r.dispatchEvent({type:"columnMoved",columns:c,column:1===c.length?c[0]:null,finished:!0,source:i})}(u,y,t,s,c)}}function h(e){const{colModel:t,rowGroupColsSvc:i,pivotColsSvc:n}=e,r=t.getColDefCols();if((0,o._missing)(r)||!t.isAlive())return[];const s=t.getAllCols(),a=i?.columns,l=n?.columns,c=s.map((e=>(e=>{const t=e.isRowGroupActive()&&a?a.indexOf(e):null,i=e.isPivotActive()&&l?l.indexOf(e):null,n=e.isValueActive()?e.getAggFunc():null,r=null!=e.getSort()?e.getSort():null,o=null!=e.getSortIndex()?e.getSortIndex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:r,sortIndex:o,aggFunc:n,rowGroup:e.isRowGroupActive(),rowGroupIndex:t,pivot:e.isPivotActive(),pivotIndex:i,flex:e.getFlex()??null}})(e))),d=new Map(t.getCols().map(((e,t)=>[e.getColId(),t])));return c.sort(((e,t)=>(d.has(e.colId)?d.get(e.colId):-1)-(d.has(t.colId)?d.get(t.colId):-1))),c}function p(e){const t=(e,t)=>null!=e?e:null!=t?t:null,i=e.getColDef(),n=t(i.sort,i.initialSort),r=t(i.sortIndex,i.initialSortIndex),o=t(i.hide,i.initialHide),s=t(i.pinned,i.initialPinned),a=t(i.width,i.initialWidth),l=t(i.flex,i.initialFlex);let c=t(i.rowGroupIndex,i.initialRowGroupIndex),d=t(i.rowGroup,i.initialRowGroup);null!=c||null!=d&&0!=d||(c=null,d=null);let u=t(i.pivotIndex,i.initialPivotIndex),h=t(i.pivot,i.initialPivot);null!=u||null!=h&&0!=h||(u=null,h=null);const p=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:n,sortIndex:r,hide:o,pinned:s,width:a,flex:l,rowGroup:d,rowGroupIndex:c,pivot:h,pivotIndex:u,aggFunc:p}}t._applyColumnState=d,t._resetColumnState=function(e,t){const{colModel:i,autoColSvc:n}=e,r=i.getColDefCols();if(!r?.length)return;const s=i.getColDefColTree(),a=(0,c._getColumnsFromTree)(s),l=[];let u=1e3,h=1e3,f=[];const g=n?.getColumns();g&&(f=f.concat(g)),a&&(f=f.concat(a)),f.forEach((e=>{const t=p(e);(0,o._missing)(t.rowGroupIndex)&&t.rowGroup&&(t.rowGroupIndex=u++),(0,o._missing)(t.pivotIndex)&&t.pivot&&(t.pivotIndex=h++),l.push(t)})),d(e,{state:l,applyOrder:!0},t)},t._compareColumnStatesAndDispatchEvents=u,t._getColumnState=h,t.getColumnStateFromColDef=p;const f=(e,t,i,n)=>{const r=e[i.getId()],o=e[n.getId()],s=null!=r,a=null!=o;if(s&&a)return r-o;if(s)return-1;if(a)return 1;const l=t.indexOf(i),c=t.indexOf(n),d=l>=0;return d&&c>=0?l-c:d?-1:1}},3146:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getValueFactory=t._columnsMatch=t._convertColumnEventSourceType=t._updateColsMap=t._areColIdsEqual=t.convertColumnTypes=t.isRowNumberCol=t.isColumnSelectionCol=t.isColumnGroupAutoCol=t._destroyColumnTree=t.getWidthOfColsInList=t._getColumnsFromTree=t.ROW_NUMBERS_COLUMN_ID=t.SELECTION_COLUMN_ID=t.GROUP_AUTO_COLUMN_ID=void 0;const n=i(3355),r=i(9409),o=i(1502),s=i(4422),a=i(2716);t.GROUP_AUTO_COLUMN_ID="ag-Grid-AutoColumn",t.SELECTION_COLUMN_ID="ag-Grid-SelectionColumn",t.ROW_NUMBERS_COLUMN_ID="ag-Grid-RowNumbersColumn",t._getColumnsFromTree=function(e){const t=[],i=e=>{for(let o=0;o<e.length;o++){const s=e[o];(0,n.isColumn)(s)?t.push(s):(0,r.isProvidedColumnGroup)(s)&&i(s.getChildren())}};return i(e),t},t.getWidthOfColsInList=function(e){return e.reduce(((e,t)=>e+t.getActualWidth()),0)},t._destroyColumnTree=function(e,t,i){const n={};if(!t)return;(0,a.depthFirstOriginalTreeSearch)(null,t,(e=>{n[e.getInstanceId()]=e})),i&&(0,a.depthFirstOriginalTreeSearch)(null,i,(e=>{n[e.getInstanceId()]=null}));const r=Object.values(n).filter((e=>null!=e));e.context.destroyBeans(r)},t.isColumnGroupAutoCol=function(e){return e.getId().startsWith(t.GROUP_AUTO_COLUMN_ID)},t.isColumnSelectionCol=function(e){const i="string"==typeof e?e:"getColId"in e?e.getColId():e.colId;return i?.startsWith(t.SELECTION_COLUMN_ID)??!1},t.isRowNumberCol=function(e){const i="string"==typeof e?e:"getColId"in e?e.getColId():e.colId;return i?.startsWith(t.ROW_NUMBERS_COLUMN_ID)??!1},t.convertColumnTypes=function(e){let t=[];return e instanceof Array?t=e:"string"==typeof e&&(t=e.split(",")),t},t._areColIdsEqual=function(e,t){return(0,o._areEqual)(e,t,((e,t)=>e.getColId()===t.getColId()))},t._updateColsMap=function(e){e.map={},e.list.forEach((t=>e.map[t.getId()]=t))},t._convertColumnEventSourceType=function(e){return"gridOptionsUpdated"===e?"gridOptionsChanged":e},t._columnsMatch=function(e,t){const i=e===t,n=e.getColDef()===t,r=e.getColId()==t;return i||n||r};t.getValueFactory=(e,t)=>(i,n)=>{const r={value1:void 0,value2:void 0};let o=!1;return e&&(void 0!==e[i]&&(r.value1=e[i],o=!0),(0,s._exists)(n)&&void 0!==e[n]&&(r.value2=e[n],o=!0)),!o&&t&&(void 0!==t[i]&&(r.value1=t[i]),(0,s._exists)(n)&&void 0!==t[n]&&(r.value2=t[n])),r}},5034:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnViewportService=void 0;const n=i(8731),r=i(3355),o=i(4422);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,i=!1){const{visibleCols:n}=this,r=n.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!r)){if(this.scrollWidth=e,this.scrollPosition=t,n.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const i=n.bodyWidth;this.viewportLeft=i-t-e,this.viewportRight=i-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(i)}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t]}return i||[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||0===this.viewportRight}clear(e){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},e||(this.colsWithinViewportHash="")}isColumnInHeaderViewport(e){return!(!e.isAutoHeaderHeight()&&!function(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}(e))||this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),n=this.viewportLeft-200,r=this.viewportRight+200;return!(t<n&&i<n)&&!(t>r&&i>r)}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:i}=this,n=i.centerCols;return i.getColsForRow(e,n,t,(e=>{const t=e.getLeft();return(0,o._exists)(t)&&t>this.viewportLeft}))}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){this.clear(!0);const e={},{leftCols:t,rightCols:i,treeLeft:n,treeRight:o,treeCenter:s}=this.visibleCols;this.headerColsWithinViewport.concat(t).concat(i).forEach((t=>e[t.getId()]=!0));const a=(t,i,n)=>{let o=!1;for(let s=0;s<t.length;s++){const l=t[s];let c=!1;if((0,r.isColumn)(l))c=!0===e[l.getId()];else{const e=l.getDisplayedChildren();e&&(c=a(e,i,n+1))}c&&(o=!0,i[n]||(i[n]=[]),i[n].push(l))}return o};a(n,this.rowsOfHeadersToRenderLeft,0),a(o,this.rowsOfHeadersToRenderRight,0),a(s,this.rowsOfHeadersToRenderCenter,0)}extractViewport(){this.extractViewportColumns();const e=this.getViewportColumns().map((e=>`${e.getId()}-${e.getPinned()||"normal"}`)).join("#"),t=this.colsWithinViewportHash!==e;return t&&(this.colsWithinViewportHash=e,this.calculateHeaderRows()),t}}t.ColumnViewportService=s},6350:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DataTypeService=void 0;const n=i(9853),r=i(8731),o=i(7274),s=i(9827),a=i(4422),l=i(6996),c=i(7764),d=i(2716),u=i(2885),h=i(3146);class p extends r.BeanStub{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",(e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)}))}processDataTypeDefinitions(){const e=this.getDefaultDataTypes(),t={};this.dataTypeDefinitions=t;const i={};this.formatValueFuncs=i;const n=e=>t=>{const{column:i,node:n,value:r}=t;let o=i.getColDef().valueFormatter;return o===e.groupSafeValueFormatter&&(o=e.valueFormatter),this.beans.valueSvc.formatValue(i,n,r,o)};for(const r of Object.keys(e)){const o=e[r],s={...o,groupSafeValueFormatter:m(o,this.gos)};t[r]=s,i[r]=n(s)}const r=this.gos.get("dataTypeDefinitions")??{},o={};this.dataTypeMatchers=o;for(const s of Object.keys(r)){const a=r[s],l=this.processDataTypeDefinition(a,r,[s],e);l&&(t[s]=l,a.dataTypeMatcher&&(o[s]=a.dataTypeMatcher),i[s]=n(l))}this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach((t=>{const i=o[t];i&&delete o[t],o[t]=i??e[t].dataTypeMatcher}))}processDataTypeDefinition(e,t,i,n){let r;const o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let i=n[o];const s=t[o];if(i&&s&&(i=s),!g(e,i,o))return;r=f(i,e)}else{if(i.includes(o))return void(0,c._warn)(44);const s=t[o];if(!g(e,s,o))return;const a=this.processDataTypeDefinition(s,t,[...i,o],n);if(!a)return;r=f(a,e)}return{...r,groupSafeValueFormatter:m(r,this.gos)}}updateColDefAndGetColumnType(e,t,i){let{cellDataType:n}=t;const{field:r}=t;if(void 0===n&&(n=e.cellDataType),null!=n&&!0!==n||(n=!!this.canInferCellDataType(e,t)&&this.inferCellDataType(r,i)),!n)return void(e.cellDataType=!1);const o=this.dataTypeDefinitions[n];if(o)return e.cellDataType=n,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,n,o,i),o.columnTypes;(0,c._warn)(47,{cellDataType:n})}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=e=>{t.add(e.key)};e.__addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push((()=>e.__removeEventListener("columnStateUpdated",i)))}canInferCellDataType(e,t){const{gos:i}=this;if(!(0,o._isClientSideRowModel)(i))return!1;const n={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(v(t,n))return!1;const r=null===t.type?e.type:t.type;if(r){const e=i.get("columnTypes")??{};if((0,h.convertColumnTypes)(r).some((t=>{const i=e[t.trim()];return i&&v(i,n)})))return!1}return!v(e,n)}inferCellDataType(e,t){if(!e)return;let i;const n=this.getInitialData();if(n){const t=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");i=(0,l._getValueUsingField)(n,e,t)}else this.initWaitForRowData(t);return null!=i?Object.keys(this.dataTypeMatchers).find((e=>this.dataTypeMatchers[e](i)))??"object":void 0}getInitialData(){const e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{const e=this.beans.rowModel.rootNode?.allLeafChildren;if(e?.length)return e[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:i,eventSvc:n}=this.beans;t&&i&&(i.shouldQueueResizeOperations=!0);const[r]=this.addManagedEventListeners({rowDataUpdateStarted:e=>{const{firstRowData:o}=e;o&&(r?.(),this.isPendingInference=!1,this.processColumnsPendingInference(o,t),this.columnStateUpdatesPendingInference={},t&&i?.processResizeOperations(),n.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const n={},r={};for(const e of Object.keys(this.columnStateUpdatesPendingInference)){const o=this.columnStateUpdatesPendingInference[e],s=this.colModel.getCol(e);if(!s)return;const a=s.getColDef();if(!this.resetColDefIntoCol(s,"cellDataTypeInferred"))return;const l=s.getColDef();if(t&&l.type&&l.type!==a.type){const t=b(s,o);t.rowGroup&&null==t.rowGroupIndex&&(n[e]=t),t.pivot&&null==t.pivotIndex&&(r[e]=t),i.push(t)}}t&&i.push(...this.generateColumnStateForRowGroupAndPivotIndexes(n,r)),i.length&&(0,u._applyColumnState)(this.beans,{state:i},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},{rowGroupColsSvc:n,pivotColsSvc:r}=this.beans;return n?.restoreColumnOrder(i,e),r?.restoreColumnOrder(i,t),Object.values(i)}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const n=(0,d._addColumnDefaultAndTypes)(this.beans,i,e.getColId());return e.setColDef(n,i,t),!0}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}getDateStringTypeDefinition(e){const{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(null==t)return!0;const i=this.getDataTypeDefinition(e)?.dataTypeMatcher;return!i||i(t)}validateColDef(e){const t=e=>(0,c._warn)(48,{property:e});if("object"===e.cellDataType){const{object:i}=this.dataTypeDefinitions;e.valueFormatter!==i.groupSafeValueFormatter||this.hasObjectValueFormatter||t("Formatter"),e.editable&&e.valueParser===i.valueParser&&!this.hasObjectValueParser&&t("Parser")}}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,i,r){const o=this.formatValueFuncs[t];switch(i.baseDataType){case"number":e.cellEditor="agNumberCellEditor";break;case"boolean":e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=e=>!!e.colDef.editable&&e.event.key===n.KeyCode.SPACE;break;case"date":e.cellEditor="agDateCellEditor",e.keyCreator=o;break;case"dateString":e.cellEditor="agDateStringCellEditor",e.keyCreator=o;break;case"object":e.cellEditorParams={useFormatter:!0},e.comparator=(e,t)=>{const i=this.colModel.getColDefCol(r),n=i?.getColDef();if(!i||!n)return 0;const s=null==e?"":o({column:i,node:null,value:e}),a=null==t?"":o({column:i,node:null,value:t});return s===a?0:s>a?1:-1},e.keyCreator=o}this.beans.filterManager?.setColDefPropertiesForDataType(e,i,o)}getDefaultDataTypes(){const e=e=>!!e.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:e=>""===e.newValue?.trim?.()?null:Number(e.newValue),valueFormatter:e=>null==e.value?"":"number"!=typeof e.value||isNaN(e.value)?t("invalidNumber","Invalid Number"):String(e.value),dataTypeMatcher:e=>"number"==typeof e},text:{baseDataType:"text",valueParser:e=>""===e.newValue?null:(0,a._toStringOrNull)(e.newValue),dataTypeMatcher:e=>"string"==typeof e},boolean:{baseDataType:"boolean",valueParser:e=>null==e.newValue?e.newValue:""===e.newValue?.trim?.()?null:"true"===String(e.newValue).toLowerCase(),valueFormatter:e=>null==e.value?"":String(e.value),dataTypeMatcher:e=>"boolean"==typeof e},date:{baseDataType:"date",valueParser:e=>(0,s._parseDateTimeFromString)(null==e.newValue?null:String(e.newValue)),valueFormatter:e=>null==e.value?"":e.value instanceof Date&&!isNaN(e.value.getTime())?(0,s._serialiseDate)(e.value,!1)??"":t("invalidDate","Invalid Date"),dataTypeMatcher:e=>e instanceof Date},dateString:{baseDataType:"dateString",dateParser:e=>(0,s._parseDateTimeFromString)(e)??void 0,dateFormatter:e=>(0,s._serialiseDate)(e??null,!1)??void 0,valueParser:t=>e(String(t.newValue))?t.newValue:null,valueFormatter:t=>e(String(t.value))?t.value:"",dataTypeMatcher:t=>"string"==typeof t&&e(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:e=>(0,a._toStringOrNull)(e.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach((e=>e())),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}}function f(e,t){const i={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...(0,h.convertColumnTypes)(e.columnTypes),...(0,h.convertColumnTypes)(t.columnTypes)]),i}function g(e,t,i){return t?t.baseDataType===e.baseDataType||((0,c._warn)(46),!1):((0,c._warn)(45,{parentCellDataType:i}),!1)}function m(e,t){if(e.valueFormatter)return i=>{if(i.node?.group){const n=(i.colDef.pivotValueColumn??i.column).getAggFunc();if(n){if("first"===n||"last"===n)return e.valueFormatter(i);if("number"===e.baseDataType&&"count"!==n){if("number"==typeof i.value)return e.valueFormatter(i);if("object"==typeof i.value){if(!i.value)return;if("toNumber"in i.value)return e.valueFormatter({...i,value:i.value.toNumber()});if("value"in i.value)return e.valueFormatter({...i,value:i.value.value})}}return}if("groupRows"===t.get("groupDisplayType")&&!t.get("treeData"))return}else if(t.get("groupHideOpenParents")&&i.column.isRowGroupActive()&&"string"==typeof i.value&&!e.dataTypeMatcher?.(i.value))return;return e.valueFormatter(i)}}function v(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some((([i,n])=>function(e,t,i,n){if(!t[i])return!1;const r=e[i];return null===r?(t[i]=!1,!1):void 0===n?!!r:r===n}(e,t,i,n)))}function b(e,t){const i=(0,u.getColumnStateFromColDef)(e);return t.forEach((e=>{delete i[e],"rowGroup"===e?delete i.rowGroupIndex:"pivot"===e&&delete i.pivotIndex})),i}t.DataTypeService=p},6034:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.GroupInstanceIdCreator=void 0;t.GroupInstanceIdCreator=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return i="number"!=typeof t?0:t+1,this.existingIds[e]=i,i}}},3245:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionColService=void 0;const n=i(8731),r=i(3355),o=i(7274),s=i(2885),a=i(3146);class l extends n.BeanStub{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",(e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,(0,a._convertColumnEventSourceType)(e.source))})),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(e){const t=this.columns;null!=t&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),(0,a._updateColsMap)(e))}createColumns(e,t){const i=e.treeDepth,n=(this.columns?.treeDepth??-1)==i,r=this.generateSelectionCols();if((0,a._areColIdsEqual)(r,this.columns?.list??[])&&n)return;(()=>{(0,a._destroyColumnTree)(this.beans,this.columns?.tree),this.columns=null})();const{colGroupSvc:o}=this.beans,s=o?.findDepth(e.tree)??0,l=o?.balanceTreeForAutoCols(r,s)??[];this.columns={list:r,tree:l,treeDepth:s,map:{}};t((e=>{if(!e)return null;const t=e.filter((e=>!(0,a.isColumnSelectionCol)(e)));return[...r,...t]}))}updateColumns(e){const t=(0,a._convertColumnEventSourceType)(e.source),i=e.currentValue;this.columns?.list.forEach((e=>{const n=this.createSelectionColDef(i);e.setColDef(n,null,t),(0,s._applyColumnState)(this.beans,{state:[{colId:e.getColId(),...n}]},t)}))}getColumn(e){return this.columns?.list.find((t=>(0,a._columnsMatch)(t,e)))??null}getColumns(){return this.columns?.list??null}isSelectionColumnEnabled(){const{gos:e,beans:t}=this,i=e.get("rowSelection");if("object"!=typeof i||!(0,o._isRowSelection)(e))return!1;const n=(t.autoColSvc?.getColumns()?.length??0)>0;if("autoGroupColumn"===i.checkboxLocation&&n)return!1;const r=!!(0,o._getCheckboxes)(i),s=(0,o._getHeaderCheckbox)(i);return r||s}createSelectionColDef(e){const{gos:t}=this.beans,i=e??t.get("selectionColumnDef"),n=t.get("enableRtl"),{rowSpan:r,spanRows:o,...s}=i??{};return{width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:n?"right":"left",comparator(e,t,i,n){const r=i.isSelected();return r===n.isSelected()?0:r?1:-1},editable:!1,suppressFillHandle:!0,pinned:null,...s,colId:a.SELECTION_COLUMN_ID}}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];const e=this.createSelectionColDef(),t=e.colId;this.beans.validation?.validateColDef(e,t,!0);const i=new r.AgColumn(e,null,t,!1);return this.createBean(i),[i]}onSelectionOptionsChanged(e,t,i){const n=(t&&"string"!=typeof t?(0,o._getCheckboxes)(t):void 0)!==(e&&"string"!=typeof e?(0,o._getCheckboxes)(e):void 0),r=(t&&"string"!=typeof t?(0,o._getHeaderCheckbox)(t):void 0)!==(e&&"string"!=typeof e?(0,o._getHeaderCheckbox)(e):void 0),s=(0,o._getCheckboxLocation)(e),a=(0,o._getCheckboxLocation)(t);(n||r||s!==a)&&this.beans.colModel.refreshAll(i)}destroy(){(0,a._destroyColumnTree)(this.beans,this.columns?.tree),super.destroy()}refreshVisibility(e){if(!this.isSelectionColumnEnabled())return;const t=this.beans,i=t.visibleCols.getAllTrees()??[];if(0!==i.length){if(!i.some(c)){const i=(0,s._getColumnState)(t).find((e=>(0,a.isColumnSelectionCol)(e.colId)));i&&(0,s._applyColumnState)(t,{state:[{colId:i.colId,hide:!i.hide}]},e)}if(1===i.length){const n=d(i[0]);if(!n)return;(0,s._applyColumnState)(t,{state:[{colId:n.getColId(),hide:!0}]},e)}}}}t.SelectionColService=l;const c=e=>e.isColumn?(0,a.isColumnSelectionCol)(e):e.getChildren()?.some(c)??!1;function d(e){if(e.isColumn)return(0,a.isColumnSelectionCol)(e)?e:null;const t=e.getChildren()??[];for(const e of t){const t=d(e);if(t)return t}return null}},6869:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.depthFirstAllColumnTreeSearch=t.VisibleColsService=void 0;const n=i(8731),r=i(3355),o=i(6908),s=i(1502),a=i(3146),l=i(6034);class c extends n.BeanStub{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){const{colModel:i,colGroupSvc:n,colViewport:r}=this.beans;t||this.buildTrees(i,n),n?.updateOpenClosedVisibility();const o=u(this.treeLeft);this.leftCols=o,this.centerCols=u(this.treeCenter);const s=u(this.treeRight);this.rightCols=s,this.joinColsAriaOrder(i),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter((e=>e.isAutoHeight())),this.beans.colFlex?.refreshFlexedColumns(),this.updateBodyWidths(),r.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(i,o,s,e),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}updateBodyWidths(){const e=(0,a.getWidthOfColsInList)(this.centerCols),t=(0,a.getWidthOfColsInList)(this.leftCols),i=(0,a.getWidthOfColsInList)(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e;(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,i,n){let r,o;this.gos.get("enableRtl")?(r=t?t[0]:null,o=i?(0,s._last)(i):null):(r=t?(0,s._last)(t):null,o=i?i[0]:null),e.getCols().forEach((e=>{e.setLastLeftPinned(e===r,n),e.setFirstRightPinned(e===o,n)}))}buildTrees(e,t){const i=e.getColsToShow(),n=i.filter((e=>"left"==e.getPinned())),r=i.filter((e=>"right"==e.getPinned())),o=i.filter((e=>"left"!=e.getPinned()&&"right"!=e.getPinned())),s=new l.GroupInstanceIdCreator,a=e=>t?t.createColumnGroups(e):e.columns;this.treeLeft=a({columns:n,idCreator:s,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=a({columns:r,idCreator:s,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=a({columns:o,idCreator:s,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),i=[],n=[],r=[];for(const e of t){const t=e.getPinned();t?!0===t||"left"===t?i.push(e):r.push(e):n.push(e)}this.ariaOrderColumns=i.concat(n).concat(r)}getAriaColIndex(e){let t;return t=(0,o.isColumnGroup)(e)?e.getLeafColumns()[0]:e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach((e=>{e.forEach((e=>{if((0,o.isColumnGroup)(e)){e.checkLeft()}}))}))}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const i=t.getCols().slice(0),n=this.gos.get("enableRtl");[this.leftCols,this.rightCols,this.centerCols].forEach((t=>{if(n){let i=(0,a.getWidthOfColsInList)(t);t.forEach((t=>{i-=t.getActualWidth(),t.setLeft(i,e)}))}else{let i=0;t.forEach((t=>{t.setLeft(i,e),i+=t.getActualWidth()}))}!function(e,t){for(let i=0;i<t.length;i++){const n=e.indexOf(t[i]);n>=0&&(e[n]=e[e.length-1],e.pop())}}(i,t)})),i.forEach((t=>{t.setLeft(null,e)}))}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,i,n){const r=[];let o=null;for(let s=0;s<t.length;s++){const a=t[s],l=t.length-s,c=Math.min(a.getColSpan(e),l),d=[a];if(c>1){const e=c-1;for(let i=1;i<=e;i++)d.push(t[s+i]);s+=e}let u;if(i?(u=!1,d.forEach((e=>{i(e)&&(u=!0)}))):u=!0,u){if(0===r.length&&o){!!n&&n(a)&&r.push(o)}r.push(a)}o=a}return r}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,i=t.indexOf(e);return i>0?t[i-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=e=>{this.colsAndGroupsMap[e.getUniqueId()]=e};d(this.treeCenter,!1,e),d(this.treeLeft,!1,e),d(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const n=this[t[i]];if(n.length)return e?(0,s._last)(n):n[0]}return null}getColAfter(e){const t=this.allCols,i=t.indexOf(e);return i<t.length-1?t[i+1]:null}getColsLeftWidth(){return(0,a.getWidthOfColsInList)(this.leftCols)}getDisplayedColumnsRightWidth(){return(0,a.getWidthOfColsInList)(this.rightCols)}isColAtEdge(e,t){const i=this.allCols;if(!i.length)return!1;const n="first"===t;let r;if((0,o.isColumnGroup)(e)){const t=e.getDisplayedLeafColumns();if(!t.length)return!1;r=n?t[0]:(0,s._last)(t)}else r=e;return(n?i[0]:(0,s._last)(i))===r}}function d(e,t,i){if(e)for(let n=0;n<e.length;n++){const r=e[n];if((0,o.isColumnGroup)(r)){d(t?r.getDisplayedChildren():r.getChildren(),t,i)}i(r)}}function u(e){const t=[];return d(e,!0,(e=>{(0,r.isColumn)(e)&&t.push(e)})),t}t.VisibleColsService=c,t.depthFirstAllColumnTreeSearch=d},3789:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.setupCompBean=t.EmptyBean=void 0;const n=i(8731);class r extends n.BeanStub{}t.EmptyBean=r,t.setupCompBean=function(e,t,i){return i&&e.addDestroyFunc((()=>t.destroyBean(i))),i??e}},4309:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgComponentUtils=void 0;const n=i(8731),r=i(3507);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;return class{refresh(){return!1}getGui(){return this.eGui}init(e){const i=t(e),n=typeof i;this.eGui="string"!==n&&"number"!==n&&"boolean"!==n?null!=i?i:(0,r._loadTemplate)("<span></span>"):(0,r._loadTemplate)("<span>"+i+"</span>")}}}}t.AgComponentUtils=o},8414:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellRendererFunctionModule=void 0;const n=i(7205),r=i(4309);t.CellRendererFunctionModule={moduleName:"CellRendererFunction",version:n.VERSION,beans:[r.AgComponentUtils]}},8759:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponentWrapper=void 0;const n=i(7764);t.BaseComponentWrapper=class{wrap(e,t,i,n){const r=this.createWrapper(e,n);return t?.forEach((e=>{this.createMethod(r,e,!0)})),i?.forEach((e=>{this.createMethod(r,e,!1)})),r}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&(0,n._warn)(49,{methodName:t}),null)}}}},4110:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Registry=void 0;const n=i(8731),r=i(7764);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="registry",this.agGridDefaults={},this.agGridDefaultParams={},this.jsComps={},this.dynamicBeans={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");if(null!=e)for(const t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){const{icons:t,userComponents:i,dynamicBeans:n,selectors:r}=e;if(i){const e=(e,t,i)=>{this.agGridDefaults[e]=t,i&&(this.agGridDefaultParams[e]=i)};for(const t of Object.keys(i)){const n=i[t];"object"==typeof n?e(t,n.classImp,n.params):e(t,n)}}if(n)for(const e of Object.keys(n))this.dynamicBeans[e]=n[e];if(r?.forEach((e=>{this.selectors[e.selector]=e})),t)for(const e of Object.keys(t))this.icons[e]=t[e]}getUserComponent(e,t){const i=(e,t,i)=>({componentFromFramework:t,component:e,params:i}),{frameworkOverrides:n}=this.beans,r=n.frameworkComponent(t,this.gos.get("components"));if(null!=r)return i(r,!0);const o=this.jsComps[t];if(o){return i(o,n.isFrameworkComponent(o))}const s=this.agGridDefaults[t];return s?i(s,!1,this.agGridDefaultParams[t]):(this.beans.validation?.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null)}createDynamicBean(e,t,...i){const n=this.dynamicBeans[e];if(null!=n)return new n(...i);if(t)throw new Error((0,r._errMsg)(256))}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}}t.Registry=o},4126:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._unwrapUserComp=void 0,t._unwrapUserComp=function(e){const t=e;return null!=t&&null!=t.getFrameworkComponentInstance?t.getFrameworkComponentInstance():e}},2036:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._mergeFilterParamsWithApplicationProvidedParams=t._getFilterCompKeys=t._getFloatingFilterCompDetails=t._getTooltipCompDetails=t._getNoRowsOverlayCompDetails=t._getLoadingOverlayCompDetails=t._getDateCompDetails=t._getFilterDetails=t._getCellEditorDetails=t._getLoadingCellRendererDetails=t._getEditorRendererDetails=t._getCellRendererDetails=t._getFullWidthDetailCellRendererDetails=t._getFullWidthGroupCellRendererDetails=t._getFullWidthLoadingCellRendererDetails=t._getFullWidthCellRendererDetails=t._getInnerHeaderGroupCompDetails=t._getHeaderGroupCompDetails=t._getInnerHeaderCompDetails=t._getHeaderCompDetails=t._getInnerCellRendererDetails=t._getDragAndDropImageCompDetails=void 0;const n=i(1585),r={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},o={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},s={name:"headerComponent",optionalMethods:["refresh"]},a={name:"innerHeaderComponent"},l={name:"innerHeaderGroupComponent"},c={name:"headerGroupComponent"},d={name:"innerRenderer",cellRenderer:!0,optionalMethods:["afterGuiAttached"]},u={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},h={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"]},p={name:"loadingCellRenderer",cellRenderer:!0},f={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},g={name:"loadingOverlayComponent",optionalMethods:["refresh"]},m={name:"noRowsOverlayComponent",optionalMethods:["refresh"]},v={name:"tooltipComponent"},b={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},y={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},w={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},C={name:"loadingCellRenderer",cellRenderer:!0},_={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},S={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};t._getDragAndDropImageCompDetails=function(e,t){return e.getCompDetailsFromGridOptions(o,"agDragAndDropImage",t,!0)},t._getInnerCellRendererDetails=function(e,t,i){return e.getCompDetails(t,d,void 0,i)},t._getHeaderCompDetails=function(e,t,i){return e.getCompDetails(t,s,"agColumnHeader",i)},t._getInnerHeaderCompDetails=function(e,t,i){return e.getCompDetails(t,a,void 0,i)},t._getHeaderGroupCompDetails=function(e,t){const i=t.columnGroup.getColGroupDef();return e.getCompDetails(i,c,"agColumnGroupHeader",t)},t._getInnerHeaderGroupCompDetails=function(e,t,i){return e.getCompDetails(t,l,void 0,i)},t._getFullWidthCellRendererDetails=function(e,t){return e.getCompDetailsFromGridOptions(w,void 0,t,!0)},t._getFullWidthLoadingCellRendererDetails=function(e,t){return e.getCompDetailsFromGridOptions(C,"agLoadingCellRenderer",t,!0)},t._getFullWidthGroupCellRendererDetails=function(e,t){return e.getCompDetailsFromGridOptions(_,"agGroupRowRenderer",t,!0)},t._getFullWidthDetailCellRendererDetails=function(e,t){return e.getCompDetailsFromGridOptions(S,"agDetailCellRenderer",t,!0)},t._getCellRendererDetails=function(e,t,i){return e.getCompDetails(t,u,void 0,i)},t._getEditorRendererDetails=function(e,t,i){return e.getCompDetails(t,h,void 0,i)},t._getLoadingCellRendererDetails=function(e,t,i){return e.getCompDetails(t,p,"agSkeletonCellRenderer",i,!0)},t._getCellEditorDetails=function(e,t,i){return e.getCompDetails(t,f,"agCellEditor",i,!0)},t._getFilterDetails=function(e,t,i,n){return e.getCompDetails(t,b,n,i,!0)},t._getDateCompDetails=function(e,t){return e.getCompDetailsFromGridOptions(r,"agDateInput",t,!0)},t._getLoadingOverlayCompDetails=function(e,t){return e.getCompDetailsFromGridOptions(g,"agLoadingOverlay",t,!0)},t._getNoRowsOverlayCompDetails=function(e,t){return e.getCompDetailsFromGridOptions(m,"agNoRowsOverlay",t,!0)},t._getTooltipCompDetails=function(e,t){return e.getCompDetails(t.colDef,v,"agTooltipComponent",t,!0)},t._getFloatingFilterCompDetails=function(e,t,i,n){return e.getCompDetails(t,y,n,i)},t._getFilterCompKeys=function(e,t){return(0,n._getUserCompKeys)(e,t,b)},t._mergeFilterParamsWithApplicationProvidedParams=function(e,t,i){return e.mergeParams(t,b,i)}},1585:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.UserComponentFactory=t._getUserCompKeys=void 0;const n=i(8731),r=i(6996),o=i(7990),s=i(7764);function a(e,t,i,n){const{name:r}=i;let o,s,a,l,c,d;if(t){const i=t,u=i[r+"Selector"],h=u?u(n):null,p=t=>{if("string"==typeof t)o=t;else if(null!=t&&!0!==t){e.isFrameworkComponent(t)?a=t:s=t}};h?(p(h.component),l=h.params,c=h.popup,d=h.popupPosition):p(i[r])}return{compName:o,jsComp:s,fwComp:a,paramsFromSelector:l,popupFromSelector:c,popupPositionFromSelector:d}}t._getUserCompKeys=a;class l extends n.BeanStub{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,i,n=!1){return this.getCompDetails(this.gridOptions,e,t,i,n)}getCompDetails(e,t,i,n,r=!1){const{name:o,cellRenderer:l}=t;let c,{compName:d,jsComp:u,fwComp:h,paramsFromSelector:p,popupFromSelector:f,popupPositionFromSelector:g}=a(this.beans.frameworkOverrides,e,t,n);const m=e=>{const t=this.registry.getUserComponent(o,e);t&&(u=t.componentFromFramework?void 0:t.component,h=t.componentFromFramework?t.component:void 0,c=t.params)};var v;if(null!=d&&m(d),null==u&&null==h&&null!=i&&m(i),!u||!l||(v=u)&&v.prototype&&"getGui"in v.prototype||(u=this.agCompUtils?.adaptFunction(t,u)),!u&&!h){const{validation:e}=this.beans;return void(!r||d===i&&i?i&&!e&&(0,s._error)(146,{comp:i}):d?e?.isProvidedUserComp(d)||(0,s._error)(50,{compName:d}):i?e||(0,s._error)(260,{...this.gos.getModuleErrorParams(),propName:o,compName:i}):(0,s._error)(216,{name:o}))}const b=this.mergeParams(e,t,n,p,c),y=null==u,w=u??h;return{componentFromFramework:y,componentClass:w,params:b,type:t,popupFromSelector:f,popupPositionFromSelector:g,newAgStackInstance:()=>this.newAgStackInstance(w,y,b,t)}}newAgStackInstance(e,t,i,n){let r;r=!t?new e:this.frameworkCompWrapper.wrap(e,n.mandatoryMethods,n.optionalMethods,n),this.createBean(r);const s=r.init?.(i);return null==s?o.AgPromise.resolve(r):s.then((()=>r))}mergeParams(e,t,i,n=null,o){const s={...i,...o},a=e&&e[t.name+"Params"];if("function"==typeof a){const e=a(i);(0,r._mergeDeep)(s,e)}else"object"==typeof a&&(0,r._mergeDeep)(s,a);return(0,r._mergeDeep)(s,n),s}}t.UserComponentFactory=l},9853:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyCode=void 0,t.KeyCode={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"}},8731:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BeanStub=void 0;const n=i(5889),r=i(7230),o=i(2979);t.BeanStub=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new n.LocalEventService),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.localEventService?.removeEventListener(e,t,i)}dispatchLocalEvent(e){this.localEventService?.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const n of Object.keys(t)){const r=t[n];r&&i.push(this._setupListener(e,n,r))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;let n;return!function(e){return void 0!==e.__addEventListener}(e)?(e instanceof HTMLElement?(0,o._addSafePassiveEventListener)(this.beans.frameworkOverrides,e,t,i):e.addEventListener(t,i),n=()=>(e.removeEventListener(t,i),null)):(e.__addEventListener(t,i),n=()=>(e.__removeEventListener(t,i),null)),this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter((e=>e!==n)),null)}setupGridOptionListener(e,t){const{gos:i}=this;i.addPropertyEventListener(e,t);const n=()=>(i.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter((e=>e!==n)),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,n=e=>{if(e.changeSet){if(e.changeSet&&e.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=e.changeSet.id}const n={type:"gridPropertyChanged",changeSet:e.changeSet,source:e.source};t(n)};e.forEach((e=>this.setupGridOptionListener(e,n)))}getLocaleTextFunc(){return(0,r._getLocaleTextFunc)(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}}},2342:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;const n=i(2132),r=i(569);class o extends r.GenericContext{init(e){this.gridId=e.gridId,this.beans.context=this,this.destroyCallback=e.destroyCallback,super.init(e)}destroy(){super.destroy(),(0,n._unRegisterGridModules)(this.gridId),this.destroyCallback?.()}getGridId(){return this.gridId}}t.Context=o},569:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.GenericContext=void 0;t.GenericContext=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,e&&e.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){for(const t of Object.keys(e.providedBeanInstances))this.beans[t]=e.providedBeanInstances[t];e.beanClasses.forEach((e=>{const t=new e;t.beanName?this.beans[t.beanName]=t:console.error(`Bean ${e.name} is missing beanName`),this.createdBeans.push(t)})),e.derivedBeans?.forEach((e=>{const{beanName:t,bean:i}=e(this);this.beans[t]=i,this.createdBeans.push(i)})),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("null bean");return this.initBeans([e],t),e}initBeans(e,t){e.forEach((e=>{e.preWireBeans?.(this.beans),e.wireBeans?.(this.beans)})),e.forEach((e=>e.preConstruct?.())),t&&e.forEach(t),e.forEach((e=>e.postConstruct?.()))}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}}},3943:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.gridBeanDestroyComparator=t.gridBeanInitComparator=void 0;const i=Object.fromEntries(["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","rowSpanSvc","pageBoundsListener","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","funcColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"].map(((e,t)=>[e,t])));t.gridBeanInitComparator=function(e,t){return((e.beanName?i[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER)-((t.beanName?i[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER)},t.gridBeanDestroyComparator=function(e,t){return"gridDestroySvc"===e?.beanName?-1:0}},1310:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CsvCreator=void 0;const n=i(7331),r=i(3885),o=i(7274),s=i(7764),a=i(2927);class l extends n.BaseCreator{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueSvc=e.valueSvc}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed())return void(0,s._warn)(51);const t=this.getMergedParams(e),i=this.getData(t),n=new Blob(["\ufeff",i],{type:"text/plain"}),a="function"==typeof t.fileName?t.fileName((0,o._addGridCommonParams)(this.gos,{})):t.fileName;(0,r._downloadFile)(this.getFileName(a),n)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const i=t?Object.assign({},e):this.getMergedParams(e);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{colModel:t,colNames:i,rowGroupColsSvc:n,valueSvc:r,gos:o}=this,{processCellCallback:s,processHeaderCallback:l,processGroupHeaderCallback:c,processRowGroupCallback:d,suppressQuotes:u,columnSeparator:h}=e;return new a.CsvSerializingSession({colModel:t,colNames:i,valueSvc:r,gos:o,processCellCallback:s||void 0,processHeaderCallback:l||void 0,processGroupHeaderCallback:c||void 0,processRowGroupCallback:d||void 0,suppressQuotes:u||!1,columnSeparator:h||",",rowGroupColsSvc:n})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}}t.CsvCreator=l},2984:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.exportDataAsCsv=t.getDataAsCsv=void 0,t.getDataAsCsv=function(e,t){return e.csvCreator?.getDataAsCsv(t)},t.exportDataAsCsv=function(e,t){e.csvCreator?.exportDataAsCsv(t)}},9734:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CsvExportModule=void 0;const n=i(2728),r=i(7205),o=i(1310),s=i(2984);t.CsvExportModule={moduleName:"CsvExport",version:r.VERSION,beans:[o.CsvCreator],apiFunctions:{getDataAsCsv:s.getDataAsCsv,exportDataAsCsv:s.exportDataAsCsv},dependsOn:[n.SharedExportModule]}},2927:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CsvSerializingSession=void 0;const n=i(8376),r=i(7764);class o extends n.BaseGridSerializingSession{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&("string"==typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach((e=>{this.beginNewLine(),e.forEach(((e,t)=>{0!==t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e.data.value||""),e.mergeAcross&&this.appendEmptyCells(e.mergeAcross)}))})))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,n){0!=i&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(n)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){0!=t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){0!=t&&(this.result+=this.columnSeparator);const n=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(n.valueFormatted??n.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(null==e)return'""';let t;"string"==typeof e?t=e:"function"==typeof e.toString?t=e.toString():((0,r._warn)(53),t="");return'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1}}t.CsvSerializingSession=o},20:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CtrlsService=void 0;const n=i(8731);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){this.addEventListener("ready",(()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach((e=>e(this.params))),this.readyCallbacks.length=0)}),this.beans.frameworkOverrides.runWhenReadyAsync?.()??!1)}updateReady(){const e=Object.values(this.params);this.ready=23===e.length&&e.every((e=>e?.isAlive()??!1))}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc((()=>{const e=this.readyCallbacks.indexOf(t);e>=0&&this.readyCallbacks.splice(e,1)}))}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc((()=>{this.updateReady()}))}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}}t.CtrlsService=r},2671:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.dragAndDropImageComponentCSS=void 0,t.dragAndDropImageComponentCSS=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}"},3814:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DragAndDropImageComponent=void 0;const n=i(3507),r=i(9970),o=i(8020),s=i(2671);class a extends o.Component{constructor(){super(),this.dragSource=null,this.eIcon=o.RefPlaceholder,this.eLabel=o.RefPlaceholder,this.registerCSS(s.dragAndDropImageComponentCSS)}postConstruct(){const e=e=>(0,r._createIcon)(e,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate('<div class="ag-dnd-ghost ag-unselectable">\n                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>\n            </div>')}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eIcon:i,dragSource:r,dropIconMap:o,gos:s}=this;(0,n._clearElement)(i);let a=null;e||(e=r?.getDefaultIconName?r.getDefaultIconName():"notAllowed"),a=o[e],i.classList.toggle("ag-shake-left-to-right",t),a===o.hide&&s.get("suppressDragLeaveHidesColumns")||a&&i.appendChild(a)}setLabel(e){this.eLabel.textContent=e}}t.DragAndDropImageComponent=a},2903:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DragAndDropService=t.DragSourceType=void 0;const n=i(2036),r=i(8731),o=i(8399),s=i(7274),a=i(1502),l=i(7764);var c;!function(e){e[e.ToolPanel=0]="ToolPanel",e[e.HeaderCell=1]="HeaderCell",e[e.RowDrag=2]="RowDrag",e[e.ChartPanel=3]="ChartPanel",e[e.AdvancedFilterBuilder=4]="AdvancedFilterBuilder"}(c||(t.DragSourceType=c={}));class d extends r.BeanStub{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.dragSvc=e.dragSvc,this.environment=e.environment,this.userCompFactory=e.userCompFactory}addDragSource(e,t=!1){const i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragSvc.addDragSource(i)}getDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;return e&&e.comp?e.comp:null}removeDragSource(e){const{dragSourceAndParamsList:t,dragSvc:i}=this,n=t.find((t=>t.dragSource===e));n&&(i.removeDragSource(n.params),(0,a._removeFromArray)(t,n))}destroy(){const{dragSourceAndParamsList:e,dragSvc:t,dropTargets:i}=this;e.forEach((e=>t.removeDragSource(e.params))),e.length=0,i.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=e.getDragItem(),e.onDragStarted?.(),this.createDragAndDropImageComponent()}onDragStop(e){this.dragSource?.onDragStopped?.();const{lastDropTarget:t}=this;if(t?.onDragStop){const i=this.createDropTargetEvent(t,e,null,null,!1);t.onDragStop(i)}this.clearDragAndDropProperties()}onDragCancel(){const{dragSource:e,lastDropTarget:t}=this;e?.onDragCancelled?.(),t?.onDragCancel&&t.onDragCancel(this.createDropTargetEvent(t,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){const i=this.getHorizontalDirection(e),n=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);const r=this.dropTargets.filter((t=>this.isMouseOnDropTarget(e,t))),o=this.findCurrentDropTarget(e,r),{lastDropTarget:s,dragSource:a,dragAndDropImageComp:l,dragItem:c}=this;if(o!==s){if(this.leaveLastTargetIfExists(e,i,n,t),null!==s&&null===o&&a?.onGridExit?.(c),null===s&&null!==o&&a?.onGridEnter?.(c),this.enterDragTargetIfExists(o,e,i,n,t),o&&l){const{comp:e,promise:t}=l;e?e.setIcon(o.getIconName?o.getIconName():null,!1):t.then((e=>{e&&e.setIcon(o.getIconName?o.getIconName():null,!1)}))}this.lastDropTarget=o}else if(o&&o.onDragging){const r=this.createDropTargetEvent(o,e,i,n,t);o.onDragging(r)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let n=!1;const r=(e,t)=>{for(const i of t){const{width:t,height:n,left:r,right:o,top:s,bottom:a}=i.getBoundingClientRect();if(0===t||0===n)return!1;const l=e.clientX>=r&&e.clientX<o,c=e.clientY>=s&&e.clientY<a;if(!l||!c)return!1}return!0};for(const t of i)if(r(e,t)){n=!0;break}const{eElement:o,type:s}=this.dragSource;return!(t.targetContainsSource&&!t.getContainer().contains(o))&&(n&&t.isInterestedIn(s,o))}findCurrentDropTarget(e,t){const i=t.length;if(0===i)return null;if(1===i)return t[0];const n=(0,s._getRootNode)(this.beans).elementsFromPoint(e.clientX,e.clientY);for(const e of n)for(const i of t){if(-1!==this.getAllContainersFromDropTarget(i).flatMap((e=>e)).indexOf(e))return i}return null}enterDragTargetIfExists(e,t,i,n,r){if(e&&e.onDragEnter){const o=this.createDropTargetEvent(e,t,i,n,r);e.onDragEnter(o)}}leaveLastTargetIfExists(e,t,i,n){const{lastDropTarget:r}=this;if(!r)return;if(r.onDragLeave){const o=this.createDropTargetEvent(r,e,t,i,n);r.onDragLeave(o)}const o=this.getDragAndDropImageComponent();o&&o.setIcon(null,!1)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter((t=>t.getContainer()!==e.getContainer()))}hasExternalDropZones(){return this.dropTargets.some((e=>e.external))}findExternalZone(e){return this.dropTargets.filter((e=>e.external)).find((t=>t.getContainer()===e.getContainer()))||null}isDropZoneWithinThisGrid(e){const t=this.ctrlsSvc.getGridBodyCtrl().eGridBody,{dropZoneTarget:i}=e;return t.contains(i)}getHorizontalDirection(e){const t=this.eventLastTime?.clientX,i=e.clientX;return t===i?null:t>i?"left":"right"}getVerticalDirection(e){const t=this.eventLastTime?.clientY,i=e.clientY;return t===i?null:t>i?"up":"down"}createDropTargetEvent(e,t,i,n,r){const o=e.getContainer(),a=o.getBoundingClientRect(),{dragItem:l,dragSource:c,gos:d}=this,u=t.clientX-a.left,h=t.clientY-a.top;return(0,s._addGridCommonParams)(d,{event:t,x:u,y:h,vDirection:n,hDirection:i,dragSource:c,fromNudge:r,dragItem:l,dropZoneTarget:o})}positionDragAndDropImageComp(e){const t=this.getDragAndDropImageComponent();t&&(0,s._anchorElementToMouseMoveEvent)(t.getGui(),e,this.beans)}removeDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;if(e){const{comp:t}=e;if(t){const e=t.getGui();this.dragAndDropImageParent?.removeChild(e),this.destroyBean(t)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource:e,gos:t,userCompFactory:i}=this;if(!e)return;const r=(0,n._getDragAndDropImageCompDetails)(i,(0,s._addGridCommonParams)(t,{dragSource:e}));if(!r)return;const o=r.newAgStackInstance();this.dragAndDropImageComp={promise:o},o.then((e=>{e&&this.isAlive()&&(this.processDragAndDropImageComponent(e),this.dragAndDropImageComp.comp=e)}))}processDragAndDropImageComponent(e){const{dragSource:t,environment:i}=this;if(!t)return;const n=e.getGui();n.style.setProperty("position","absolute"),n.style.setProperty("z-index","9999"),(0,o._stampTopLevelGridCompWithGridInstance)(this.gos,n),i.applyThemeClasses(n),e.setIcon(null,!1);let{dragItemName:r}=t;"function"==typeof r&&(r=r()),e.setLabel(r||""),n.style.top="20px",n.style.left="20px";const a=(0,s._getPageBody)(this.beans);this.dragAndDropImageParent=a,a?a.appendChild(n):(0,l._warn)(54)}registerGridDropTarget(e,t){const i={getContainer:e,isInterestedIn:e=>e===c.HeaderCell||e===c.ToolPanel,getIconName:()=>"notAllowed"};this.addDropTarget(i),t.addDestroyFunc((()=>this.removeDropTarget(i)))}}t.DragAndDropService=d},2830:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getRowDropZoneParams=t.removeRowDropZone=t.addRowDropZone=void 0,t.addRowDropZone=function(e,t){e.rowDragSvc?.rowDragFeature?.addRowDropZone(t)},t.removeRowDropZone=function(e,t){const i=e.dragAndDrop?.findExternalZone(t);i&&e.dragAndDrop?.removeDropTarget(i)},t.getRowDropZoneParams=function(e,t){return e.rowDragSvc?.rowDragFeature?.getRowDropZone(t)}},4388:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HorizontalResizeModule=t.RowDragModule=t.SharedDragAndDropModule=t.DragAndDropModule=t.DragModule=void 0;const n=i(714),r=i(7205),o=i(3814),s=i(2903),a=i(2830),l=i(2165),c=i(6843),d=i(2895);t.DragModule={moduleName:"Drag",version:r.VERSION,beans:[l.DragService]},t.DragAndDropModule={moduleName:"DragAndDrop",version:r.VERSION,dynamicBeans:{dndSourceComp:n.DndSourceComp},icons:{rowDrag:"grip"}},t.SharedDragAndDropModule={moduleName:"SharedDragAndDrop",version:r.VERSION,beans:[s.DragAndDropService],dependsOn:[t.DragModule],userComponents:{agDragAndDropImage:o.DragAndDropImageComponent},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},t.RowDragModule={moduleName:"RowDrag",version:r.VERSION,beans:[d.RowDragService],apiFunctions:{addRowDropZone:a.addRowDropZone,removeRowDropZone:a.removeRowDropZone,getRowDropZoneParams:a.getRowDropZoneParams},dependsOn:[t.SharedDragAndDropModule]},t.HorizontalResizeModule={moduleName:"HorizontalResize",version:r.VERSION,beans:[c.HorizontalResizeService],dependsOn:[t.DragModule]}},2165:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DragService=void 0;const n=i(9853),r=i(8731),o=i(8399),s=i(7274),a=i(1502),l=i(8667),c=i(3507),d=i(4422),u=i(3276);class h extends r.BeanStub{constructor(){super(...arguments),this.beanName="dragSvc",this.dragEndFunctions=[],this.dragSources=[]}destroy(){const{dragSources:e}=this;e.forEach(this.removeListener.bind(this)),e.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){const i=e.touchStartListener;t.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(e){const{dragSources:t}=this,i=t.find((t=>t.dragSource===e));i&&(this.removeListener(i),(0,a._removeFromArray)(t,i))}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:n,stopPropagationForTouch:r}=e;i.addEventListener("mousedown",t);let o=null;const s=this.gos.get("suppressTouch");n&&!s&&(o=t=>{(0,c._isFocusableFormField)(t.target)||(r&&t.stopPropagation(),this.onTouchStart(e,t))},i.addEventListener("touchstart",o,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:o,touchEnabled:!!n})}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const i=t.touches[0];this.touchLastTime=i,this.touchStart=i;const n=t=>this.onTouchUp(t,e.eElement),r=t.target,o=[{target:(0,s._getRootNode)(this.beans),type:"touchmove",listener:e=>{e.cancelable&&e.preventDefault()},options:{passive:!1}},{target:r,type:"touchmove",listener:t=>this.onTouchMove(t,e.eElement),options:{passive:!0}},{target:r,type:"touchend",listener:n,options:{passive:!0}},{target:r,type:"touchcancel",listener:n,options:{passive:!0}}];this.addTemporaryEvents(o),0===e.dragStartPixels&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){const i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t))return;if(i._alreadyProcessedByDragService)return;if(i._alreadyProcessedByDragService=!0,0!==t.button)return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const r=(0,s._getRootNode)(this.beans),o=[{target:r,type:"mousemove",listener:t=>this.onMouseMove(t,e.eElement)},{target:r,type:"mouseup",listener:t=>this.onMouseUp(t,e.eElement)},{target:r,type:"contextmenu",listener:e=>e.preventDefault()},{target:r,type:"keydown",listener:t=>{t.key===n.KeyCode.ESCAPE&&this.cancelDrag(e.eElement)}}];this.addTemporaryEvents(o),0===e.dragStartPixels&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach((e=>{const{target:t,type:i,listener:n,options:r}=e;t.addEventListener(i,n,r)})),this.dragEndFunctions.push((()=>{e.forEach((e=>{const{target:t,type:i,listener:n,options:r}=e;t.removeEventListener(i,n,r)}))}))}isEventNearStartEvent(e,t){const{dragStartPixels:i}=this.currentDragParams,n=(0,d._exists)(i)?i:4;return(0,u._areEventsNear)(e,t,n)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventSvc.dispatchEvent({type:"dragStarted",target:i}),this.currentDragParams.onDragStart(t),!this.currentDragParams)return void(this.dragging=!1);this.currentDragParams.onDragging(t)}this.currentDragParams?.onDragging(e)}onTouchMove(e,t){const i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){if((0,l._isBrowserSafari)()){const e=(0,s._getDocument)(this.beans);e.getSelection()?.removeAllRanges()}this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const{gos:t}=this,i=t.get("enableCellTextSelection"),n="mousemove"===e.type;return i&&n&&e.cancelable&&(0,o._isEventFromThisGrid)(t,e)&&!(e=>{const t=e.target,i=t?.tagName.toLocaleLowerCase();return!!i?.match("^a$|textarea|input|select|button")})(e)}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),this.currentDragParams?.onDragCancel?.(),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null;const{dragEndFunctions:e}=this;e.forEach((e=>e())),e.length=0}}t.DragService=h},6843:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HorizontalResizeService=void 0;const n=i(8731);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:i}=this.beans;i.addDragSource(t);return()=>i.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&!0===t.shiftKey;e.onResizeStart(i)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}}t.HorizontalResizeService=r},1633:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowDragComp=void 0;const n=i(8731),r=i(9970),o=i(8020),s=i(2903);class a extends o.Component{constructor(e,t,i,n,r,o){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=n,this.dragStartPixels=r,this.suppressVisibilityChange=o,this.dragSource=null}isCustomGui(){return null!=this.customGui}postConstruct(){const{beans:e,rowNode:t,column:i,gos:n}=this;if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild((0,r._createIconNoSpan)("rowDrag",e,null)),this.addDragSource()),!this.suppressVisibilityChange){const e=n.get("rowDragManaged")?new d(this,t,i):new c(this,t,i);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){const e=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[e];const t=this.beans.selectionSvc?.getSelectedNodes()??[];return-1!==t.indexOf(e)?t:[e]}getDragItem(){const{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:e=>{e?.preventDefault()}})[0]);const i=this.getLocaleTextFunc();this.dragSource={type:s.DragSourceType.RowDrag,eElement:t,dragItemName:()=>{const e=this.getDragItem(),t=e.rowNodes?.length||1,n=this.getRowDragText(this.column);return n?n(e,t):1===t?this.cellValueFn():`${t} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}}t.RowDragComp=a;class l extends n.BeanStub{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let e=!0,i=!1;const{column:n,rowNode:r,parent:o}=this;n&&(e=n.isRowDrag(r)||o.isCustomGui(),i="function"==typeof n.getColDef().rowDrag),i?(o.setDisplayed(!0,t),o.setVisible(e,t)):(o.setDisplayed(e,t),o.setVisible(!0,t))}}}class c extends l{postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}}class d extends l{postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventSvc,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const{rowDragSvc:e,dragAndDrop:t,gos:i}=this.beans,n=e.rowDragFeature,r=n&&n.shouldPreventRowMove(),o=i.get("suppressRowDrag"),s=t.hasExternalDropZones(),a=r&&!s||o;this.setDisplayedOrVisible(a)}}},2254:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowDragFeature=void 0;const n=i(5628),r=i(8731),o=i(6257),s=i(8399),a=i(7274),l=i(1502),c=i(7764),d=i(2903);class u extends r.BeanStub{constructor(e){super(),this.eContainer=e}postConstruct(){const{rowModel:e,gos:t,ctrlsSvc:i}=this.beans;(0,a._isClientSideRowModel)(t,e)&&(this.clientSideRowModel=e),i.whenReady(this,(e=>{const t=e.gridBodyCtrl;this.autoScrollService=new n.AutoScrollService({scrollContainer:t.eBodyViewport,scrollAxis:"y",getVerticalPosition:()=>t.scrollFeature.getVScrollPosition().top,setVerticalPosition:e=>t.scrollFeature.setVerticalScrollPosition(e),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})}))}getContainer(){return this.eContainer}isInterestedIn(e){return e===d.DragSourceType.RowDrag}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){const{rowGroupColsSvc:e,filterManager:t,sortSvc:i}=this.beans;if((e?.columns??[]).length)return!0;const n=t?.isAnyFilterPresent();if(n)return!0;const r=i?.isSortActive();return!!r}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const e=[...this.beans.selectionSvc?.getSelectedNodes()??[]].sort(((e,t)=>null==e.rowIndex||null==t.rowIndex?0:this.getRowIndexNumber(e)-this.getRowIndexNumber(t)));if(-1!==e.indexOf(t))return e}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach((e=>{this.setRowNodeDragging(e,!0)})),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;const t=(0,s._getNormalisedMousePosition)(this.beans,e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const{dragAndDrop:i,gos:n}=this.beans,r=this.isFromThisGrid(e),o=n.get("rowDragManaged"),s=e.dragItem.rowNodes;o&&this.shouldPreventRowMove()||(n.get("suppressMoveWhenRowDragging")||!r?i.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.highlightRowAtPixel(s[0],t):this.moveRows(s,t))}getRowIndexNumber(e){const t=e.getRowIndexString();return parseInt((0,l._last)(t.split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel,i=t.getLastHighlightedRowNode(),n=i&&"Below"===i.highlighted,r=(0,s._getNormalisedMousePosition)(this.beans,e).y,o=e.dragItem.rowNodes;let l=n?1:0;if(this.isFromThisGrid(e))o.forEach((e=>{e.rowTop<r&&(l-=1)})),this.moveRows(o,r,l);else{const e=(0,a._getRowIdCallback)(this.gos);let i=t.getRowIndexAtPixel(r)+1;"Above"===t.getHighlightPosition(r)&&i--,t.updateRowData({add:o.filter((i=>!t.getRowNode(e?.({data:i.data,level:0,rowPinned:i.rowPinned})??i.data.id))).map((e=>e.data)),addIndex:i})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,i=0){const n=this.beans.focusSvc,r=n.getFocusedCell(),s=r&&(0,o._getCellByPosition)(this.beans,r);this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(s?s.focusCell():n.clearFocusedCell())}addRowDropZone(e){if(!e.getContainer())return void(0,c._warn)(55);const t=this.beans.dragAndDrop;if(t.findExternalZone(e))return void(0,c._warn)(56);let i={getContainer:e.getContainer};e.fromGrid?i=e:(e.onDragEnter&&(i.onDragEnter=t=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",t))}),e.onDragLeave&&(i.onDragLeave=t=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",t))}),e.onDragging&&(i.onDragging=t=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",t))}),e.onDragStop&&(i.onDragStop=t=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",t))}),e.onDragCancel&&(i.onDragCancel=t=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",t))}));const n={isInterestedIn:e=>e===d.DragSourceType.RowDrag,getIconName:()=>"move",external:!0,...i};t.addDropTarget(n),this.addDestroyFunc((()=>t.removeDropTarget(n)))}getRowDropZone(e){const t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),n=this.onDragLeave.bind(this),r=this.onDragging.bind(this),o=this.onDragStop.bind(this),s=this.onDragCancel.bind(this);let a;return a=e?{getContainer:t,onDragEnter:e.onDragEnter?t=>{i(t),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",t))}:i,onDragLeave:e.onDragLeave?t=>{n(t),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",t))}:n,onDragging:e.onDragging?t=>{r(t),e.onDragging(this.draggingToRowDragEvent("rowDragMove",t))}:r,onDragStop:e.onDragStop?t=>{o(t),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",t))}:o,onDragCancel:e.onDragCancel?t=>{s(t),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",t))}:s,fromGrid:!0}:{getContainer:t,onDragEnter:i,onDragLeave:n,onDragging:r,onDragStop:o,onDragCancel:s,fromGrid:!0},a}draggingToRowDragEvent(e,t){const i=this.beans,{pageBounds:n,rowModel:r,gos:o}=i,l=(0,s._getNormalisedMousePosition)(i,t).y;let c,d=-1;l>n.getCurrentPageHeight()||(d=r.getRowIndexAtPixel(l),c=r.getRow(d));return(0,a._addGridCommonParams)(o,{type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:d,overNode:c,y:l,vDirection:t.vDirection})}dispatchGridEvent(e,t){const i=this.draggingToRowDragEvent(e,t);this.eventSvc.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e);const{dragAndDrop:t,gos:i}=this.beans;i.get("rowDragManaged")&&(i.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&t.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e);const{dragAndDrop:t,gos:i}=this.beans;i.get("rowDragManaged")&&(i.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&t.isDropZoneWithinThisGrid(e)&&this.clearRowHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach((e=>{this.setRowNodeDragging(e,!1)}))}setRowNodeDragging(e,t){e.dragging!==t&&(e.dragging=t,e.dispatchRowEvent("draggingChanged"))}}t.RowDragFeature=u},2895:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowDragService=void 0;const n=i(8731),r=i(7274),o=i(1633),s=i(2254);class a extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowDragSvc"}setupRowDrag(e,t){const i=t.createManagedBean(new s.RowDragFeature(e)),n=this.beans.dragAndDrop;n.addDropTarget(i),t.addDestroyFunc((()=>n.removeDropTarget(i))),this.rowDragFeature=i}createRowDragComp(e,t,i,n,r,s){return new o.RowDragComp(e,t,i,n,r,s)}createRowDragCompForRow(e,t){if((0,r._isCellSelectionEnabled)(this.gos))return;const i=this.getLocaleTextFunc();return this.createRowDragComp((()=>`1 ${i("rowDragRow","row")}`),e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,i,n,o,s){const a=this.gos;if(a.get("rowDragManaged")&&(!(0,r._isClientSideRowModel)(a)||a.get("pagination")))return;return this.createRowDragComp(i,e,t,n,o,s)}}t.RowDragService=a},6564:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.cellEditingCSS=void 0,t.cellEditingCSS=".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;width:100%}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}"},227:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxCellEditor=void 0;const n=i(5230),r=i(66),o=i(8020),s=i(3598);class a extends s.PopupComponent{constructor(){super('\n            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[r.AgCheckboxSelector]),this.eCheckbox=o.RefPlaceholder}init(e){this.params=e;const t=e.value??void 0,i=this.eCheckbox;i.setValue(t);i.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(i,{fieldValueChanged:e=>this.setAriaLabel(e.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.getLocaleTextFunc(),i=(0,n._getAriaCheckboxStateName)(t,e),r=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${r} (${i})`)}}t.CheckboxCellEditor=a},5314:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DateCellEditor=void 0;const n=i(9827),r=i(4422),o=i(3611),s=i(5336);class a{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[o.AgInputDateFieldSelector]}init(e,t){this.eInput=e,this.params=t;const{min:i,max:n,step:r}=t;null!=i&&e.setMin(i),null!=n&&e.setMax(n),null!=r&&e.setStep(r)}getValue(){const{eInput:e,params:t}=this,i=e.getDate();return(0,r._exists)(i)||(0,r._exists)(t.value)?i??null:t.value}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return(0,n._serialiseDate)(e,!1)}}class l extends s.SimpleCellEditor{constructor(){super(new a)}}t.DateCellEditor=l},2059:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DateStringCellEditor=void 0;const n=i(9827),r=i(4422),o=i(3611),s=i(5336);class a{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[o.AgInputDateFieldSelector]}init(e,t){this.eInput=e,this.params=t;const{min:i,max:n,step:r}=t;null!=i&&e.setMin(i),null!=n&&e.setMax(n),null!=r&&e.setStep(r)}getValue(){const{params:e,eInput:t}=this,i=this.formatDate(t.getDate());return(0,r._exists)(i)||(0,r._exists)(e.value)?e.parseValue(i??""):e.value}getStartValue(){return(0,n._serialiseDate)(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):(0,n._parseDateTimeFromString)(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):(0,n._serialiseDate)(e??null,!1)??void 0}}class l extends s.SimpleCellEditor{constructor(){super(new a((()=>this.beans.dataTypeSvc)))}}t.DateStringCellEditor=l},4578:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.LargeTextCellEditor=void 0;const n=i(9853),r=i(4422),o=i(6209),s=i(8020),a=i(3598);class l extends a.PopupComponent{constructor(){super('<div class="ag-large-text">\n        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',[o.AgInputTextAreaSelector]),this.eTextArea=s.RefPlaceholder}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),null!=e.value&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===n.KeyCode.LEFT||t===n.KeyCode.UP||t===n.KeyCode.RIGHT||t===n.KeyCode.DOWN||e.shiftKey&&t===n.KeyCode.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue(),t=this.params;return(0,r._exists)(e)||(0,r._exists)(t.value)?t.parseValue(e):t.value}}t.LargeTextCellEditor=l},4371:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.NumberCellEditor=void 0;const n=i(9853),r=i(8667),o=i(4422),s=i(8792),a=i(5336);class l{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[s.AgInputNumberFieldSelector]}init(e,t){this.eInput=e,this.params=t;const{max:i,min:n,precision:r,step:o}=t;null!=i&&e.setMax(i),null!=n&&e.setMin(n),null!=r&&e.setPrecision(r),null!=o&&e.setStep(o);const s=e.getInputElement();t.preventStepping?e.addManagedElementListeners(s,{keydown:this.preventStepping}):t.showStepperButtons&&s.classList.add("ag-number-field-input-stepper")}preventStepping(e){e.key!==n.KeyCode.UP&&e.key!==n.KeyCode.DOWN||e.preventDefault()}getValue(){const{eInput:e,params:t}=this,i=e.getValue();if(!(0,o._exists)(i)&&!(0,o._exists)(t.value))return t.value;let n=t.parseValue(i);if(null==n)return n;if("string"==typeof n){if(""===n)return null;n=Number(n)}return isNaN(n)?null:n}getStartValue(){return this.params.value}setCaret(){(0,r._isBrowserSafari)()&&this.eInput.getInputElement().focus({preventScroll:!0})}}class c extends a.SimpleCellEditor{constructor(){super(new l)}}t.NumberCellEditor=c},5609:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PopupEditorWrapper=void 0;const n=i(7274),r=i(6466),o=i(3598);class s extends o.PopupComponent{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){(0,n._setDomData)(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params;this.addManagedElementListeners(e,{keydown:e=>{(0,r._isUserSuppressingKeyboardEvent)(this.gos,e,t.node,t.column,!0)||t.onKeyDown(e)}})}}t.PopupEditorWrapper=s},8774:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectCellEditor=void 0;const n=i(9853),r=i(4422),o=i(7764),s=i(159),a=i(8020),l=i(3598);class c extends l.PopupComponent{wireBeans(e){this.valueSvc=e.valueSvc}constructor(){super('<div class="ag-cell-edit-wrapper">\n                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>\n            </div>',[s.AgSelectSelector]),this.eSelect=a.RefPlaceholder,this.startedByEnter=!1}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueSvc:i,gos:s}=this,{values:a,value:l,eventKey:c}=e;if((0,r._missing)(a))return void(0,o._warn)(58);this.startedByEnter=null!=c&&c===n.KeyCode.ENTER;let d=!1;a.forEach((n=>{const r={value:n},o=i.formatValue(e.column,null,n),s=null!=o;r.text=s?o:n,t.addOption(r),d=d||l===n})),d?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:u,valueListMaxWidth:h,valueListMaxHeight:p}=e;null!=u&&t.setPickerGap(u),null!=p&&t.setPickerMaxHeight(p),null!=h&&t.setPickerMaxWidth(h),"fullRow"!==s.get("editType")&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout((()=>{this.isAlive()&&this.eSelect.showPicker()}))}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}}t.SelectCellEditor=c},5336:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleCellEditor=void 0;const n=i(9853),r=i(8667),o=i(8020),s=i(3598);class a extends s.PopupComponent{constructor(e){super(`\n            <div class="ag-cell-edit-wrapper">\n                ${e.getTemplate()}\n            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=o.RefPlaceholder}init(e){this.params=e;const{cellStartedEdit:t,eventKey:i,suppressPreventDefault:r}=e,o=this.eInput;let s;this.cellEditorInput.init(o,e);let a=!0;t?(this.focusAfterAttached=!0,i===n.KeyCode.BACKSPACE||i===n.KeyCode.DELETE?s="":i&&1===i.length?r?a=!1:s=i:(s=this.cellEditorInput.getStartValue(),i!==n.KeyCode.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,s=this.cellEditorInput.getStartValue()),a&&null!=s&&o.setStartValue(s),this.addManagedElementListeners(o.getGui(),{keydown:e=>{const{key:t}=e;t!==n.KeyCode.PAGE_UP&&t!==n.KeyCode.PAGE_DOWN||e.preventDefault()}})}afterGuiAttached(){const e=this.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;(0,r._isBrowserSafari)()||t.getFocusableElement().focus();const i=t.getInputElement();this.highlightAllOnFocus?i.select():this.cellEditorInput.setCaret?.()}focusIn(){const e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}}t.SimpleCellEditor=a},5457:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TextCellEditor=void 0;const n=i(4422),r=i(5946),o=i(5336);class s{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[r.AgInputTextFieldSelector]}init(e,t){this.eInput=e,this.params=t;const i=t.maxLength;null!=i&&e.setMaxLength(i)}getValue(){const{eInput:e,params:t}=this,i=e.getValue();return(0,n._exists)(i)||(0,n._exists)(t.value)?t.parseValue(i):t.value}getStartValue(){const e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){const e=this.eInput,t=e.getValue(),i=(0,n._exists)(t)&&t.length||0;i&&e.getInputElement().setSelectionRange(i,i)}}class a extends o.SimpleCellEditor{constructor(){super(new s)}}t.TextCellEditor=a},89:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentRedoSize=t.getCurrentUndoSize=t.startEditingCell=t.stopEditing=t.getEditingCells=t.getCellEditorInstances=t.redoCellEditing=t.undoCellEditing=void 0;const n=i(1765),r=i(4126),o=i(6257),s=i(7274),a=i(7764);t.undoCellEditing=function(e){e.undoRedo?.undo("api")},t.redoCellEditing=function(e){e.undoRedo?.redo("api")},t.getCellEditorInstances=function(e,t={}){const i=[];return e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach((e=>{const t=e.comp?.getCellEditor();t&&i.push((0,r._unwrapUserComp)(t))})),i},t.getEditingCells=function(e){const t=[];return e.rowRenderer.getAllCellCtrls().forEach((e=>{if(e.editing){const{cellPosition:i}=e;t.push(i)}})),t},t.stopEditing=function(e,t=!1){e.editSvc?.stopAllEditing(t)},t.startEditingCell=function(e,t){const i=e.colModel.getCol(t.colKey);if(!i)return void(0,a._warn)(12,{colKey:t.colKey});const r={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:i};null==t.rowPinned&&(0,n.ensureIndexVisible)(e,t.rowIndex),(0,n.ensureColumnVisible)(e,t.colKey);const l=(0,o._getCellByPosition)(e,r);if(!l)return;const{focusSvc:c,gos:d,editSvc:u}=e,h=d.get("stopEditingWhenCellsLoseFocus")&&(()=>{const t=(0,s._getActiveDomElement)(e),i=l.eGui;return t!==i&&!!i?.contains(t)})();!h&&c.isCellFocused(r)||c.setFocusedCell({...r,forceBrowserFocus:h,preventScrollOnBrowserFocus:!0}),u?.startRowOrCellEdit(l,t.key)},t.getCurrentUndoSize=function(e){return e.undoRedo?.getCurrentUndoStackSize()??0},t.getCurrentRedoSize=function(e){return e.undoRedo?.getCurrentRedoStackSize()??0}},4652:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CustomEditorModule=t.LargeTextEditorModule=t.SelectEditorModule=t.CheckboxEditorModule=t.DateEditorModule=t.NumberEditorModule=t.TextEditorModule=t.UndoRedoEditModule=t.EditCoreModule=void 0;const n=i(7113),r=i(7205),o=i(3137),s=i(6564),a=i(227),l=i(5314),c=i(2059),d=i(4578),u=i(4371),h=i(8774),p=i(5457),f=i(89),g=i(1277),m=i(6359);t.EditCoreModule={moduleName:"EditCore",version:r.VERSION,beans:[g.EditService,m.RowEditService],apiFunctions:{getCellEditorInstances:f.getCellEditorInstances,getEditingCells:f.getEditingCells,stopEditing:f.stopEditing,startEditingCell:f.startEditingCell},dependsOn:[o.PopupModule],css:[s.cellEditingCSS]},t.UndoRedoEditModule={moduleName:"UndoRedoEdit",version:r.VERSION,beans:[n.UndoRedoService],apiFunctions:{undoCellEditing:f.undoCellEditing,redoCellEditing:f.redoCellEditing,getCurrentUndoSize:f.getCurrentUndoSize,getCurrentRedoSize:f.getCurrentRedoSize},dependsOn:[t.EditCoreModule]},t.TextEditorModule={moduleName:"TextEditor",version:r.VERSION,userComponents:{agCellEditor:p.TextCellEditor,agTextCellEditor:p.TextCellEditor},dependsOn:[t.EditCoreModule]},t.NumberEditorModule={moduleName:"NumberEditor",version:r.VERSION,userComponents:{agNumberCellEditor:{classImp:u.NumberCellEditor,params:{suppressPreventDefault:!0}}},dependsOn:[t.EditCoreModule]},t.DateEditorModule={moduleName:"DateEditor",version:r.VERSION,userComponents:{agDateCellEditor:l.DateCellEditor,agDateStringCellEditor:c.DateStringCellEditor},dependsOn:[t.EditCoreModule]},t.CheckboxEditorModule={moduleName:"CheckboxEditor",version:r.VERSION,userComponents:{agCheckboxCellEditor:a.CheckboxCellEditor},dependsOn:[t.EditCoreModule]},t.SelectEditorModule={moduleName:"SelectEditor",version:r.VERSION,userComponents:{agSelectCellEditor:h.SelectCellEditor},dependsOn:[t.EditCoreModule]},t.LargeTextEditorModule={moduleName:"LargeTextEditor",version:r.VERSION,userComponents:{agLargeTextCellEditor:d.LargeTextCellEditor},dependsOn:[t.EditCoreModule]},t.CustomEditorModule={moduleName:"CustomEditor",version:r.VERSION,dependsOn:[t.EditCoreModule]}},1277:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.EditService=void 0;const n=i(2036),r=i(9853),o=i(8731),s=i(8399),a=i(7274),l=i(8667),c=i(5609);class d extends o.BeanStub{constructor(){super(...arguments),this.beanName="editSvc"}startEditing(e,t=null,i=!1,r=null){if(!e.isCellEditable()||e.editing)return!0;if(!e.comp)return e.onCompAttachedFuncs.push((()=>{this.startEditing(e,t,i,r)})),!0;const o=this.createCellEditorParams(e,t,i),s=e.column.getColDef(),a=(0,n._getCellEditorDetails)(this.beans.userCompFactory,s,o),l=null!=a?.popupFromSelector?a.popupFromSelector:!!s.cellEditorPopup,c=null!=a?.popupPositionFromSelector?a.popupPositionFromSelector:s.cellEditorPopupPosition;return u(e,!0,a),e.comp.setEditDetails(a,l,c,this.gos.get("reactiveCustomComponents")),this.eventSvc.dispatchEvent(e.createEvent(r,"cellEditingStarted")),!a?.params?.suppressPreventDefault}stopEditing(e,t=!1){if(e.onEditorAttachedFuncs=[],!e.editing)return!1;const{comp:i,column:n,rowNode:r}=e,{newValue:o,newValueExists:s}=function(e,t){const i={newValueExists:!1};if(e)return i;const n=t.getCellEditor();if(!n)return i;if(n.isCancelAfterEnd&&n.isCancelAfterEnd())return i;const r=n.getValue();return{newValue:r,newValueExists:!0}}(t,i),a=this.beans.valueSvc.getValueForDisplay(n,r);let l=!1;return s&&(l=function(e,t,i,n,r){if(i===t)return!1;e.suppressRefreshCell=!0;const o=n.setDataValue(r,i,"edit");return e.suppressRefreshCell=!1,o}(e,a,o,r,n)),u(e,!1,void 0),i.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventSvc.dispatchEvent({...e.createEvent(null,"cellEditingStopped"),oldValue:a,newValue:o,valueChanged:l}),l}handleColDefChanged(e){const t=e.comp?.getCellEditor();if(t?.refresh){const{eventKey:i,cellStartedEdit:r}=e.editCompDetails.params,o=this.createCellEditorParams(e,i,r),s=e.column.getColDef(),a=(0,n._getCellEditorDetails)(this.beans.userCompFactory,s,o);t.refresh(a.params)}}setFocusOutOnEditor(e){if(!e.editing)return;const t=e.comp.getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){if(!e.editing)return;const t=e.comp,i=t.getCellEditor();i?.focusIn?i.focusIn():(e.focusCell(!0),e.onEditorAttachedFuncs.push((()=>t.getCellEditor()?.focusIn?.())))}stopEditingAndFocus(e,t=!1,i=!1){this.stopRowOrCellEdit(e),e.focusCell(!0),t||this.navigateAfterEdit(i,e.cellPosition)}createPopupEditorWrapper(e){return new c.PopupEditorWrapper(e)}stopAllEditing(e=!1){this.beans.rowRenderer.getAllRowCtrls().forEach((t=>this.stopRowEditing(t,e)))}stopRowEditing(e,t=!1){if(e.stoppingRowEdit)return;const i=e.getAllCellCtrls(),n=e.editing;e.stoppingRowEdit=!0;let r=!1;for(const e of i){const i=e.stopEditing(t);n&&!t&&!r&&i&&(r=!0)}r&&this.eventSvc.dispatchEvent(e.createRowEvent("rowValueChanged")),n&&this.beans.rowEditSvc?.setEditing(e,!1),e.stoppingRowEdit=!1}addStopEditingWhenGridLosesFocus(e){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const t=t=>{const i=t.relatedTarget;if(null===(0,l._getTabIndex)(i))return void this.stopAllEditing();let n=e.some((e=>e.contains(i)))&&(0,s._isElementInThisGrid)(this.gos,i);if(!n){const e=this.beans.popupSvc;n=!!e&&(e.getActivePopups().some((e=>e.contains(i)))||e.isElementWithinCustomPopup(i))}n||this.stopAllEditing()};e.forEach((e=>this.addManagedElementListeners(e,{focusout:t})))}setInlineEditingCss(e){const t=e.editing||e.getAllCellCtrls().some((e=>e.editing));e.forEachGui(void 0,(e=>{e.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),e.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)}))}isCellEditable(e,t){if(t.group)if(this.gos.get("treeData")){if(!t.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1;return e.isColumnFunc(t,e.colDef.editable)}startRowOrCellEdit(e,t,i=null){return e.comp?"fullRow"===this.gos.get("editType")?this.beans.rowEditSvc?.startEditing(e.rowCtrl,t,e)??!0:this.startEditing(e,t,!0,i):(e.onCompAttachedFuncs.push((()=>{this.startRowOrCellEdit(e,t,i)})),!0)}stopRowOrCellEdit(e,t=!1){"fullRow"===this.gos.get("editType")?this.stopRowEditing(e.rowCtrl,t):this.stopEditing(e,t)}createCellEditorParams(e,t,i){const{column:n,rowNode:r,cellPosition:{rowIndex:o}}=e,{valueSvc:s,gos:l}=this.beans;return(0,a._addGridCommonParams)(l,{value:s.getValueForDisplay(n,r),eventKey:t,column:n,colDef:n.getColDef(),rowIndex:o,node:r,data:r.data,cellStartedEdit:i,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.eGui,parseValue:t=>s.parseValue(n,r,t,e.value),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const i=e?r.KeyCode.UP:r.KeyCode.DOWN;this.beans.navigation?.navigateToNextCell(null,i,t,!1)}}}function u(e,t,i){e.editCompDetails=i,e.editing!==t&&(e.editing=t)}t.EditService=d},6359:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowEditService=void 0;const n=i(8731);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowEditSvc"}startEditing(e,t=null,i=null,n=null){if(e.editing)return!0;let r=!0,o=!1;const{editSvc:s}=this.beans;return e.getAllCellCtrls().forEach((e=>{const a=e===i;a?r=s?.startEditing(e,t,a,n)??!0:s?.startEditing(e,null,a,n),o||(o=e.editing)})),o&&this.setEditing(e,!0),r}setEditing(e,t){e.editing=t,e.forEachGui(void 0,(e=>e.rowComp.addOrRemoveCssClass("ag-row-editing",t)));const i=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventSvc.dispatchEvent(i)}}t.RowEditService=r},3355:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgColumn=t.isColumn=t.getNextColInstanceId=void 0;const n=i(8731),r=i(7274),o=i(5889),s=i(4422),a=i(6996),l=i(7766),c=i(7764),d={resizable:!0,sortable:!0};let u=0;function h(){return u++}t.getNextColInstanceId=h,t.isColumn=function(e){return e instanceof p};class p extends n.BeanStub{constructor(e,t,i,n){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=n,this.isColumn=!0,this.instanceId=h(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new o.LocalEventService,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=(0,l._escapeString)(i)}destroy(){super.destroy(),this.beans.rowSpanSvc?.deregister(this)}getInstanceId(){return this.instanceId}setState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:i,colFlex:n}}=this;t?.initCol(this);const r=e.hide;this.visible=void 0!==r?!r:!e.initialHide,i?.initCol(this),n?.initCol(this)}setColDef(e,t,i){const n=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),n&&(this.beans.rowSpanSvc?.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",i)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:i}}=this,n=e.get("suppressFieldDotNotation");this.fieldContainsDots=(0,s._exists)(t)&&t.indexOf(".")>=0&&!n,this.tooltipFieldContainsDots=(0,s._exists)(i)&&i.indexOf(".")>=0&&!n}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.beans.tooltipSvc?.initCol(this)}initRowSpan(){this.colDef.spanRows&&this.beans.rowSpanSvc?.register(this)}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=e.width,n=e.initialWidth;return t=null!=i?i:null!=n?n:200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){return this.beans.showRowGroupCols?.isRowGroupDisplayed(this,e)??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.colEventSvc);const i=this.frameworkEventListenerService?.wrap(t)??t;this.colEventSvc.addEventListener(e,i)}removeEventListener(e,t){const i=this.frameworkEventListenerService?.unwrap(t)??t;this.colEventSvc.removeEventListener(e,i)}createColumnFunctionCallbackParams(e){return(0,r._addGridCommonParams)(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){return this.beans.cellNavigation?.isSuppressNavigable(this,e)??!1}isCellEditable(e){return this.beans.editSvc?.isCellEditable(this,e)??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.beans.selectionSvc?.isCellCheckboxSelection(this,e)??!1}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?.suppressPaste??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??d[e]}isColumnFunc(e,t){if("boolean"==typeof t)return t;if("function"==typeof t){return t(this.createColumnFunctionCallbackParams(e))}return!1}createColumnEvent(e,t){return(0,r._addGridCommonParams)(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return"asc"===this.sort}isSortDescending(){return"desc"===this.sort}isSortNone(){return(0,s._missing)(this.sort)}isSorting(){return(0,s._exists)(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){return(0,c._warn)(261),!!this.beans.colHover?.isHovered(this)}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return"left"===this.pinned||"right"===this.pinned}isPinnedLeft(){return"left"===this.pinned}isPinnedRight(){return"right"===this.pinned}getPinned(){return this.pinned}setVisible(e,t){const i=!0===e;this.visible!==i&&(this.visible=i,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return(0,r._addGridCommonParams)(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if((0,s._missing)(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if((0,s._missing)(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t,i=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,null!=this.flex&&"flex"!==t&&"gridInitializing"!==t&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return!0===this.colDef.enablePivot}isAllowValue(){return!0===this.colDef.enableValue}isAllowRowGroup(){return!0===this.colDef.enableRowGroup}dispatchColEvent(e,t,i){const n=this.createColumnEvent(e,t);i&&(0,a._mergeDeep)(n,i),this.colEventSvc.dispatchEvent(n)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}}t.AgColumn=p},6908:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgColumnGroup=t.isColumnGroup=t.createUniqueColumnGroupId=void 0;const n=i(8731),r=i(1502),o=i(3355);function s(e,t){return e+"_"+t}function a(e){return e instanceof l}t.createUniqueColumnGroupId=s,t.isColumnGroup=a;class l extends n.BeanStub{constructor(e,t,i,n){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=i,this.pinned=n,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return s(this.groupId,this.partId)}isEmptyGroup(){return 0===this.displayedChildren.length}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!(!e||0===e.length)&&e.every((e=>e.isMoving()))}checkLeft(){if(this.displayedChildren.forEach((e=>{a(e)&&e.checkLeft()})),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const e=(0,r._last)(this.displayedChildren).getLeft();this.setLeft(e)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren?.forEach((t=>{e+=t.getActualWidth()})),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach((t=>{t.isResizable()&&(e=!0)})),e}getMinWidth(){let e=0;return this.displayedChildren.forEach((t=>{e+=t.getMinWidth()})),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach((t=>{(0,o.isColumn)(t)?e.push(t):a(t)&&t.addDisplayedLeafColumns(e)}))}addLeafColumns(e){this.children.forEach((t=>{(0,o.isColumn)(t)?e.push(t):a(t)&&t.addLeafColumns(e)}))}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return this.isPadding()&&e&&e.isPadding()?1+e.getPaddingLevel():0}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;null!=e&&e.isPadding();)e=e.getParent();if(!(!!e&&e.getProvidedColumnGroup().isExpandable()))return this.displayedChildren=this.children,void this.dispatchLocalEvent({type:"displayedChildrenChanged"});this.children.forEach((t=>{if(a(t)&&(!t.displayedChildren||!t.displayedChildren.length))return;switch(t.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(t);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(t);break;default:this.displayedChildren.push(t)}})),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}}t.AgColumnGroup=l},9409:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgProvidedColumnGroup=t.isProvidedColumnGroup=void 0;const n=i(8731),r=i(3355);function o(e){return e instanceof s}t.isProvidedColumnGroup=o;class s extends n.BeanStub{constructor(e,t,i,n){super(),this.colGroupDef=e,this.groupId=t,this.padding=i,this.level=n,this.isColumn=!1,this.expandable=!1,this.instanceId=(0,r.getNextColInstanceId)(),this.expandableListenerRemoveCallback=null,this.expanded=!!e?.openByDefault}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return!!this.children&&this.children.some((e=>e.isVisible()))}isPadding(){return this.padding}setExpanded(e){this.expanded=void 0!==e&&e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach((t=>{(0,r.isColumn)(t)?e.push(t):o(t)&&t.addLeafColumns(e)}))}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach((t=>t.__addEventListener("visibleChanged",e))),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach((t=>t.__removeEventListener("visibleChanged",e))),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const n=this.findChildrenRemovingPadding();for(let r=0,o=n.length;r<o;r++){const o=n[r];if(!o.isVisible())continue;const s=o.getColumnGroupShow();"open"===s?(e=!0,i=!0):"closed"===s?(t=!0,i=!0):(e=!0,t=!0)}const r=e&&t&&i;this.expandable!==r&&(this.expandable=r,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{i.forEach((i=>{o(i)&&i.isPadding()?t(i.children):e.push(i)}))};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}}t.AgProvidedColumnGroup=s},5449:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultColumnTypes=void 0,t.DefaultColumnTypes={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}}},6257:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._getCellByPosition=t._getRowNode=t._getLastRow=t._getFirstRow=t._isSameRow=t._isRowBefore=t._areCellsEqual=t._createCellId=void 0;const n=i(4422);t._createCellId=function(e){const{rowIndex:t,rowPinned:i,column:n}=e;return`${t}.${null==i?"null":i}.${n.getId()}`},t._areCellsEqual=function(e,t){const i=e.column===t.column,n=e.rowPinned===t.rowPinned,r=e.rowIndex===t.rowIndex;return i&&n&&r},t._isRowBefore=function(e,t){switch(e.rowPinned){case"top":if("top"!==t.rowPinned)return!0;break;case"bottom":if("bottom"!==t.rowPinned)return!1;break;default:if((0,n._exists)(t.rowPinned))return"top"!==t.rowPinned}return e.rowIndex<t.rowIndex},t._isSameRow=function(e,t){return!e&&!t||!(e&&!t||!e&&t)&&(e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned)},t._getFirstRow=function(e){let t,i=0;const{pinnedRowModel:n,rowModel:r,pageBounds:o}=e;return n?.getPinnedTopRowCount()?t="top":r.getRowCount()?(t=null,i=o.getFirstRow()):n?.getPinnedBottomRowCount()&&(t="bottom"),void 0===t?null:{rowIndex:i,rowPinned:t}},t._getLastRow=function(e){let t,i=null;const{pinnedRowModel:n,pageBounds:r}=e,o=n?.getPinnedBottomRowCount(),s=n?.getPinnedTopRowCount();return o?(i="bottom",t=o-1):e.rowModel.getRowCount()?(i=null,t=r.getLastRow()):s&&(i="top",t=s-1),void 0===t?null:{rowIndex:t,rowPinned:i}},t._getRowNode=function(e,t){switch(t.rowPinned){case"top":return e.pinnedRowModel?.getPinnedTopRow(t.rowIndex);case"bottom":return e.pinnedRowModel?.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}},t._getCellByPosition=function(e,t){const i=e.spannedRowRenderer?.getCellByPosition(t);if(i)return i;const n=e.rowRenderer.getRowByPosition(t);return n?n.getCellCtrl(t.column):null}},3373:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowNode=t.ROW_ID_PREFIX_BOTTOM_PINNED=t.ROW_ID_PREFIX_TOP_PINNED=t.ROW_ID_PREFIX_ROW_GROUP=void 0;const n=i(7274),r=i(5889),o=i(7764);t.ROW_ID_PREFIX_ROW_GROUP="row-group-",t.ROW_ID_PREFIX_TOP_PINNED="t-",t.ROW_ID_PREFIX_BOTTOM_PINNED="b-";let s=0;t.RowNode=class{constructor(e){this.master=!1,this.detail=void 0,this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=s++,this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.__selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){const{valueCache:i,selectionSvc:n,rowSpanSvc:r}=this.beans,o=this.data;this.data=e,i?.onDataChanged(),this.updateDataOnDetailNode(),n?.updateRowSelectable(this),this.resetQuickFilterAggregateText();const s=this.createDataChangedEvent(e,o,t);this.__localEventService?.dispatchEvent(s),r?.onRowDataUpdated(this)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,t,i){return{type:"dataChanged",node:this,oldData:t,newData:e,update:i}}getRowIndexString(){return null==this.rowIndex?((0,o._error)(13),null):"top"===this.rowPinned?t.ROW_ID_PREFIX_TOP_PINNED+this.rowIndex:"bottom"===this.rowPinned?t.ROW_ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){const{selectionSvc:i}=this.beans,n=i?.createDaemonNode?.(this),r=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),i&&(i.updateRowSelectable(this),i.syncInRowNode(this,n));const o=this.createDataChangedEvent(e,r,!1);this.__localEventService?.dispatchEvent(o)}setId(e){const i=(0,n._getRowIdCallback)(this.beans.gos);if(i)if(this.data){const e=this.parent?.getRoute()??[];this.id=i({data:this.data,parentKeys:e.length>0?e:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(t.ROW_ID_PREFIX_ROW_GROUP)&&(0,o._error)(14,{groupPrefix:t.ROW_ID_PREFIX_ROW_GROUP})}else this.id=void 0;else this.id=e}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.dispatchRowEvent("topChanged"),this.setDisplayed(null!==e))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,i){this.beans.expansionSvc?.setExpanded(this,e,t,i)}setDataValue(e,t,i){const{colModel:n,valueSvc:r,gos:o,selectionSvc:s,rowSpanSvc:a}=this.beans,l="string"!=typeof e?e:n.getCol(e)??n.getColDefCol(e);if(!l)return!1;const c=r.getValueForDisplay(l,this);if(o.get("readOnlyEdit")){const{beans:{eventSvc:e},data:n,rowIndex:r,rowPinned:o}=this;return e.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:r,rowPinned:o,column:l,colDef:l.colDef,data:n,node:this,oldValue:c,newValue:t,value:t,source:i}),!1}const d=r.setValue(this,l,t,i);return this.dispatchCellChangedEvent(l,t,c),s?.updateRowSelectable(this),a?.onRowDataUpdated(this),d}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;const{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,i){const n={type:"cellChanged",node:this,column:e,newValue:t,oldValue:i};this.__localEventService?.dispatchEvent(n)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.beans.expansionSvc?.isExpandable(this)??!1}isSelected(){return this.footer?this.sibling.isSelected():this.__selected}depthFirstSearch(e){this.childrenAfterGroup?.forEach((t=>t.depthFirstSearch(e))),e(this)}dispatchRowEvent(e){this.__localEventService?.dispatchEvent({type:e,node:this})}setSelected(e,t=!1,i="api"){this.beans.selectionSvc?.setNodesSelected({nodes:[this],newValue:e,clearSelection:t,source:i})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){this.__localEventService||(this.__localEventService=new r.LocalEventService),this.__localEventService.addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){this.beans.validation?.checkRowEvents(e),this.__localEventService||(this.__localEventService=new r.LocalEventService),this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.__localEventService);const i=this.frameworkEventListenerService?.wrap(t)??t;this.__localEventService.addEventListener(e,i)}removeEventListener(e,t){const i=this.frameworkEventListenerService?.unwrap(t)??t;this.removeLocalListener(e,i)}removeLocalListener(e,t){this.__localEventService?.removeEventListener(e,t),this.__localEventService?.noRegisteredListenersExist()&&(this.__localEventService=null)}isFullWidthCell(){if((0,o._warn)(61),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this})}getRoute(){if(-1===this.level)return[];if(null==this.key)return;const e=[];let t=this;for(;t&&null!=t.key;)e.push(t.key),t=t.parent;return e.reverse()}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.dispatchRowEvent("firstChildChanged"))}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.dispatchRowEvent("displayedChanged"))}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}}},9888:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._createGlobalRowEvent=void 0;const n=i(7274);t._createGlobalRowEvent=function(e,t,i){return(0,n._addGridCommonParams)(t,{type:i,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}},9024:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Environment=void 0;const n=i(8731),r=i(9621),o=i(8951),s=i(2525),a=i(3507),l=i(7764),c={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},d={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},u={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},h={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0};let p=0;class f extends n.BeanStub{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.paramsClass="ag-theme-params-"+ ++p,this.globalCSS=[]}wireBeans(e){const{eGridDiv:t,gridOptions:i}=e;this.eGridDiv=t,this.eStyleContainer=i.themeStyleContainer??(t.getRootNode()===document?document.head:t),this.cssLayer=i.themeCssLayer}postConstruct(){this.addManagedPropertyListener("theme",(()=>this.handleThemeGridOptionChange())),this.handleThemeGridOptionChange(),this.addManagedPropertyListener("rowHeight",(()=>this.refreshRowHeightVariable())),this.getSizeEl(c),this.getSizeEl(d),this.getSizeEl(u),this.getSizeEl(h),this.refreshRowBorderWidthVariable(),this.addDestroyFunc((()=>(0,o._unregisterGridUsingThemingAPI)(this))),this.mutationObserver=new MutationObserver((()=>{this.fireGridStylesChangedEvent("themeChanged")})),this.addDestroyFunc((()=>this.mutationObserver.disconnect()))}getDefaultRowHeight(){return this.getCSSVariablePixelValue(c)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(d)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(u)}getRowBorderWidth(){return this.getCSSVariablePixelValue(h)}applyThemeClasses(e){const{gridTheme:t}=this;let i="";if(t)i=`${this.paramsClass} ${t._getCssClass()}`;else{this.mutationObserver.disconnect();let e=this.eGridDiv;for(;e;){let t=!1;for(const n of Array.from(e.classList))n.startsWith("ag-theme-")&&(t=!0,i=i?`${i} ${n}`:n);t&&this.mutationObserver.observe(e,{attributes:!0,attributeFilter:["class"]}),e=e.parentElement}}for(const t of Array.from(e.classList))t.startsWith("ag-theme-")&&e.classList.remove(t);if(i){const t=e.className;e.className=t+(t?" ":"")+i}}refreshRowHeightVariable(){const{eGridDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),i=this.gos.get("rowHeight");if(null==i||isNaN(i)||!isFinite(i))return null!==t&&e.style.setProperty("--ag-line-height",null),-1;const n=`${i}px`;return t!=n?(e.style.setProperty("--ag-line-height",n),i):""!=t?parseFloat(t):-1}addGlobalCSS(e,t){this.gridTheme?(0,o._injectGlobalCSS)(e,this.eStyleContainer,t,this.cssLayer,0):this.globalCSS.push([e,t])}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(null!=t)return t;const i=this.measureSizeEl(e);return"detached"===i||"no-styles"===i?e.defaultValue:(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(null==t.offsetParent)return"detached";const i=t.offsetWidth;return i===g?"no-styles":(this.sizesMeasured=!0,i)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=document.createElement("div"),e.className="ag-measurement-container",this.eGridDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const i=this.getMeasurementContainer();t=document.createElement("div");const{border:n}=e;n?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border",`var(${e.cssName}, solid ${g}px`)):t.style.width=`var(${e.cssName}, ${g}px)`,i.appendChild(t),this.sizeEls.set(e,t);let r=this.measureSizeEl(e);"no-styles"===r&&(0,l._warn)(9,{variable:e});const o=(0,a._observeResize)(this.beans,t,(()=>{const t=this.measureSizeEl(e);"detached"!==t&&"no-styles"!==t&&(this.lastKnownValues.set(e,t),t!==r&&(r=t,this.fireGridStylesChangedEvent(e.changeKey)))}));return this.addDestroyFunc((()=>o())),t}fireGridStylesChangedEvent(e){"rowBorderWidthChanged"===e&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:"gridStylesChanged",[e]:!0})}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(h);this.eGridDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}handleThemeGridOptionChange(){const{gos:e,eGridDiv:t,globalCSS:i,gridTheme:n}=this,a=e.get("theme");let c;if("legacy"===a)c=void 0;else{const e=a??s.themeQuartz;e instanceof r.ThemeImpl?c=e:(0,l._error)(240,{theme:e})}if(c!==n){if(c){(0,o._registerGridUsingThemingAPI)(this),(0,o._injectCoreAndModuleCSS)(this.eStyleContainer,this.cssLayer);for(const[e,t]of i)(0,o._injectGlobalCSS)(e,this.eStyleContainer,t,this.cssLayer,0);i.length=0}this.gridTheme=c,c?._startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer});let n=this.eParamsStyle;n||(n=this.eParamsStyle=document.createElement("style"),t.appendChild(n)),o.IS_SSR||(n.textContent=c?._getPerGridCss(this.paramsClass)||""),this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged")}c&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&(a?(0,l._error)(106):(0,l._error)(239))}}t.Environment=f;const g=15538},8778:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.EventService=void 0;const n=i(8731),r=i(7274),o=i(5889);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="eventSvc",this.globalEventService=new o.LocalEventService}postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}addEventListener(e,t,i){this.globalEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.globalEventService.removeEventListener(e,t,i)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent((0,r._addGridCommonParams)(this.gos,e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce((0,r._addGridCommonParams)(this.gos,e))}}t.EventService=s},3080:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._ALL_EVENTS=t._INTERNAL_EVENTS=t._PUBLIC_EVENTS=void 0,t._PUBLIC_EVENTS=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],t._INTERNAL_EVENTS=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged","beforeRefreshModel"],t._ALL_EVENTS=[...t._PUBLIC_EVENTS,...t._INTERNAL_EVENTS]},7968:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ALWAYS_SYNC_GLOBAL_EVENTS=void 0,t.ALWAYS_SYNC_GLOBAL_EVENTS=new Set(["gridPreDestroyed","fillStart","pasteStart"])},7331:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCreator=void 0;const n=i(8731);class r extends n.BeanStub{getFileName(e){const t=this.getDefaultFileExtension();return null!=e&&e.length||(e=this.getDefaultFileName()),-1===e.indexOf(".")?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}}t.BaseCreator=r},8376:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseGridSerializingSession=void 0;const n=i(7274);t.BaseGridSerializingSession=class{constructor(e){this.groupColumns=[];const{colModel:t,rowGroupColsSvc:i,colNames:n,valueSvc:r,gos:o,processCellCallback:s,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.colModel=t,this.rowGroupColsSvc=i,this.colNames=n,this.valueSvc=r,this.gos=o,this.processCellCallback=s,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){this.groupColumns=e.filter((e=>!!e.getColDef().showRowGroup))}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,i,n,r){const o=this.gos.get("groupHideOpenParents")&&!r.footer||!this.shouldRenderGroupSummaryCell(r,e,t)?this.valueSvc.getValue(e,r):this.createValueForGroupNode(e,r);return this.processCell({accumulatedRowIndex:i,rowNode:r,column:e,value:o,processCellCallback:this.processCellCallback,type:n})}shouldRenderGroupSummaryCell(e,t,i){if(!(e.group&&!this.gos.get("treeData")))return!1;if(-1!==this.groupColumns.indexOf(t)){if(void 0!==e.groupData?.[t.getId()])return!0;if((0,n._isServerSideRowModel)(this.gos)&&e.group)return!0;if(e.footer&&-1===e.level){const e=t.getColDef();return null==e||!0===e.showRowGroup||e.showRowGroup===this.rowGroupColsSvc?.columns[0].getId()}}const r=(0,n._isGroupUseEntireRow)(this.gos,this.colModel.isPivotMode());return 0===i&&r}getHeaderName(e,t){return e?e((0,n._addGridCommonParams)(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback((0,n._addGridCommonParams)(this.gos,{column:e,node:t}));const i=this.gos.get("treeData"),r=t=>{if(i)return t.key;const n=t.groupData?.[e.getId()];return n&&t.rowGroupColumn&&!1!==t.rowGroupColumn.getColDef().useValueFormatterForExport?this.valueSvc.formatValue(t.rowGroupColumn,t,n)??n:n},o=t.footer,s=[r(t)];if(!(0,n._isGroupMultiAutoColumn)(this.gos))for(;t.parent;)t=t.parent,s.push(r(t));const a=s.reverse().join(" -> ");return o?`Total ${a}`:a}processCell(e){const{accumulatedRowIndex:t,rowNode:i,column:r,value:o,processCellCallback:s,type:a}=e;return s?{value:s((0,n._addGridCommonParams)(this.gos,{accumulatedRowIndex:t,column:r,node:i,value:o,type:a,parseValue:e=>this.valueSvc.parseValue(r,i,e,this.valueSvc.getValue(r,i)),formatValue:e=>this.valueSvc.formatValue(r,i,e)??e}))??""}:!1!==r.getColDef().useValueFormatterForExport?{value:o??"",valueFormatted:this.valueSvc.formatValue(r,i,o)}:{value:o??""}}}},3885:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._downloadFile=void 0;const n=i(7764);t._downloadFile=function(e,t){const i=document.defaultView||window;if(!i)return void(0,n._warn)(52);const r=document.createElement("a"),o=i.URL.createObjectURL(t);r.setAttribute("href",o),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(r),i.setTimeout((()=>{i.URL.revokeObjectURL(o)}),0)}},2728:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SharedExportModule=void 0;const n=i(7205),r=i(826);t.SharedExportModule={moduleName:"SharedExport",version:n.VERSION,beans:[r.GridSerializer]}},826:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridSerializer=void 0;const n=i(3146),r=i(6034),o=i(8731),s=i(6908),a=i(7274),l=i(1502);class c extends o.BeanStub{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e,t={}){const{allColumns:i,columnKeys:n,skipRowGroups:r,exportRowNumbers:o}=t,s=this.getColumnsToExport({allColumns:i,skipRowGroups:r,columnKeys:n,exportRowNumbers:o});return[this.prepareSession(s),this.prependContent(t),this.exportColumnGroups(t,s),this.exportHeaders(t,s),this.processPinnedTopRows(t,s),this.processRows(t,s),this.processPinnedBottomRows(t,s),this.appendContent(t)].reduce(((e,t)=>t(e)),e).parse()}processRow(e,t,i,n){const r=t.shouldRowBeSkipped||(()=>!1),o=null!=t.rowPositions||!!t.onlySelected,s=this.gos.get("groupHideOpenParents")&&!o,l=this.colModel.isPivotMode()?n.leafGroup:!n.group,c=!!n.footer,d=1===n.allChildrenCount&&1===n.childrenAfterGroup?.length&&(0,a._canSkipShowingRowGroup)(this.gos,n);if(!l&&!c&&(t.skipRowGroups||d||s)||t.onlySelected&&!n.isSelected()||t.skipPinnedTop&&"top"===n.rowPinned||t.skipPinnedBottom&&"bottom"===n.rowPinned)return;if(-1===n.level&&!l&&!c)return;if(r((0,a._addGridCommonParams)(this.gos,{node:n})))return;const u=e.onNewBodyRow(n);if(i.forEach(((e,t)=>{u.onColumn(e,t,n)})),t.getCustomContentBelowRow){const i=t.getCustomContentBelowRow((0,a._addGridCommonParams)(this.gos,{node:n}));i&&e.addCustomContent(i)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const n=new r.GroupInstanceIdCreator,{colGroupSvc:o}=this.beans,s=o?o.createColumnGroups({columns:t,idCreator:n,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(s,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const e=i.onNewHeaderRow();t.forEach(((t,i)=>{e.onColumn(t,i,void 0)}))}return i}}processPinnedTopRows(e,t){return i=>{const n=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter((e=>"top"===e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>this.pinnedRowModel?.getPinnedTopRow(e.rowIndex))).forEach(n):this.pinnedRowModel?.forEachPinnedRow("top",n),i}}processRows(e,t){return i=>{const n=this.rowModel,r=(0,a._isClientSideRowModel)(this.gos,n),o=(0,a._isServerSideRowModel)(this.gos,n),s=!r&&e.onlySelected,l=this.processRow.bind(this,i,e,t),{exportedRows:c="filteredAndSorted"}=e;if(e.rowPositions)return e.rowPositions.filter((e=>null==e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>n.getRow(e.rowIndex))).forEach(l),i;if(this.colModel.isPivotMode())return r?n.forEachPivotNode(l,!0,"filteredAndSorted"===c):o?n.forEachNodeAfterFilterAndSort(l,!0):n.forEachNode(l),i;if(e.onlySelectedAllPages||s){const e=this.beans.selectionSvc?.getSelectedNodes()??[];this.replicateSortedOrder(e),e.forEach(l)}else"all"===c?n.forEachNode(l):r||o?n.forEachNodeAfterFilterAndSort(l,!0):n.forEachNode(l);return i}}replicateSortedOrder(e){const{sortSvc:t,rowNodeSorter:i}=this.beans;if(!t||!i)return;const n=t.getSortOptions(),r=(e,t)=>null!=e.rowIndex&&null!=t.rowIndex?e.rowIndex-t.rowIndex:e.level===t.level?e.parent?.id===t.parent?.id?i.compareRowNodes(n,{rowNode:e,currentPos:e.rowIndex??-1},{rowNode:t,currentPos:t.rowIndex??-1}):r(e.parent,t.parent):e.level>t.level?r(e.parent,t):r(e,t.parent);e.sort(r)}processPinnedBottomRows(e,t){return i=>{const n=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter((e=>"bottom"===e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>this.pinnedRowModel?.getPinnedBottomRow(e.rowIndex))).forEach(n):this.pinnedRowModel?.forEachPinnedRow("bottom",n),i}}getColumnsToExport(e){const{allColumns:t=!1,skipRowGroups:i=!1,exportRowNumbers:r=!1,columnKeys:o}=e,{colModel:s,gos:a,visibleCols:l}=this,c=s.isPivotMode(),d=e=>!(0,n.isColumnSelectionCol)(e)&&(!(0,n.isRowNumberCol)(e)||r);if(o&&o.length)return s.getColsForKeys(o).filter(d);const u=a.get("treeData");let h=[];return h=t&&!c?s.getCols():l.allCols,h=h.filter((e=>d(e)&&(!(i&&!u)||!(0,n.isColumnGroupAutoCol)(e)))),h}recursivelyAddHeaderGroups(e,t,i){const n=[];e.forEach((e=>{const t=e;t.getChildren&&t.getChildren().forEach((e=>n.push(e)))})),e.length>0&&(0,s.isColumnGroup)(e[0])&&this.doAddHeaderHeader(t,e,i),n&&n.length>0&&this.recursivelyAddHeaderGroups(n,t,i)}doAddHeaderHeader(e,t,i){const n=e.onNewHeaderGroupingRow();let r=0;t.forEach((e=>{const t=e;let o;o=i?i((0,a._addGridCommonParams)(this.gos,{columnGroup:t})):this.beans.colNames.getDisplayNameForColumnGroup(t,"header");const s=t.getLeafColumns().reduce(((e,t,i,n)=>{let r=(0,l._last)(e);return"open"===t.getColumnGroupShow()?r&&null==r[1]||(r=[i],e.push(r)):r&&null==r[1]&&(r[1]=i-1),i===n.length-1&&r&&null==r[1]&&(r[1]=i),e}),[]);n.onColumn(t,o||"",r++,t.getLeafColumns().length-1,s)}))}}t.GridSerializer=c},6331:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.columnFiltersCSS=void 0,t.columnFiltersCSS=".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-set-floating-filter-input [disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:1px solid var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}"},4527:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.showColumnFilter=t.setColumnFilterModel=t.getColumnFilterModel=t.getFilterModel=t.setFilterModel=t.destroyFilter=t.getColumnFilterInstance=t.isColumnFilterPresent=void 0;const n=i(7764);t.isColumnFilterPresent=function(e){const t=e.filterManager;return!!t?.isColumnFilterPresent()||!!t?.isAggregateFilterPresent()},t.getColumnFilterInstance=function(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)},t.destroyFilter=function(e,t){const i=e.colModel.getColDefCol(t);if(i)return e.filterManager?.destroyFilter(i,"api")},t.setFilterModel=function(e,t){e.frameworkOverrides.wrapIncoming((()=>e.filterManager?.setFilterModel(t)))},t.getFilterModel=function(e){return e.filterManager?.getFilterModel()??{}},t.getColumnFilterModel=function(e,t){return e.filterManager?.getColumnFilterModel(t)??null},t.setColumnFilterModel=function(e,t,i){return e.filterManager?.setColumnFilterModel(t,i)??Promise.resolve()},t.showColumnFilter=function(e,t){const i=e.colModel.getCol(t);i?e.menuSvc?.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"}):(0,n._error)(12,{colKey:t})}},219:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnFilterService=void 0;const n=i(4126),r=i(2036),o=i(8731),s=i(7274),a=i(4422),l=i(7990),c=i(7764),d=i(9990),u={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},h=["january","february","march","april","may","june","july","august","september","october","november","december"];function p(e,t){return null==e?-1:null==t?1:parseFloat(e)-parseFloat(t)}class f extends o.BeanStub{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),beforeRefreshModel:({params:e})=>{(e.rowDataUpdated||e.changedProps?.has("treeData"))&&this.onNewRowsLoaded("rowDataUpdated")},dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel={...this.gos.get("initialState")?.filter?.filterModel??{}}}setFilterModel(e,t="api"){const{colModel:i,dataTypeSvc:n,filterManager:r}=this.beans;if(n?.isPendingInference)return void this.filterModelUpdateQueue.push({model:e,source:t});const o=[],s=this.getFilterModel(!0);if(e){const t=new Set(Object.keys(e));this.allColumnFilters.forEach(((i,n)=>{const r=e[n];o.push(g(i.filterPromise,r)),t.delete(n)})),t.forEach((t=>{const n=i.getColDefCol(t)||i.getCol(t);if(!n)return void(0,c._warn)(62,{colId:t});if(!n.isFilterAllowed())return void(0,c._warn)(63,{colId:t});const r=this.getOrCreateFilterWrapper(n);r?o.push(g(r.filterPromise,e[t])):(0,c._warn)(64,{colId:t})}))}else this.allColumnFilters.forEach((e=>{o.push(g(e.filterPromise,null))}));l.AgPromise.all(o).then((()=>{const e=this.getFilterModel(!0),i=[];this.allColumnFilters.forEach(((t,n)=>{const r=s?s[n]:null,o=e?e[n]:null;(0,a._jsonEquals)(r,o)||i.push(t.column)})),i.length>0&&r?.onFilterChanged({columns:i,source:t})}))}getFilterModel(e){const t={},{allColumnFilters:i,initialFilterModel:n,beans:{colModel:r}}=this;if(i.forEach(((e,i)=>{const n=this.getModelFromFilterWrapper(e);(0,a._exists)(n)&&(t[i]=n)})),!e)for(const e of Object.keys(n)){const o=n[e];(0,a._exists)(o)&&!i.has(e)&&r.getCol(e)?.isFilterAllowed()&&(t[e]=o)}return t}getModelFromFilterWrapper(e){const{filter:t}=e;return t?"function"!=typeof t.getModel?((0,c._warn)(66),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){const{allColumnFilters:e}=this;return!!e.size&&(e.forEach((e=>this.disposeFilterWrapper(e,"advancedFilterEnabled"))),!0)}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){const{colModel:e,gos:t}=this.beans,i=!!(0,s._getGroupAggFiltering)(t),n=[],r=[];return this.forEachColumnFilter(((t,o)=>{const s=(e=>!!e&&(e.isFilterActive?e.isFilterActive():((0,c._warn)(67),!1)))(t);s&&((t=>{if(!t.isPrimary())return!0;const n=!e.isPivotActive();return!(!t.isValueActive()||!n)&&(!!e.isPivotMode()||i)})(o.column)?n.push(t):r.push(t))})).then((()=>{this.activeAggregateFilters=n,this.activeColumnFilters=r}))}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter(((i,n)=>this.setColFilterActive(n.column,i.isFilterActive(),e,t)))}forEachColumnFilter(e){const t=[];return this.allColumnFilters.forEach((i=>{const n=i.filterPromise;n&&t.push(n.then((t=>e(t,i))))})),l.AgPromise.all(t)}doColumnFiltersPass(e,t,i){const{data:n,aggData:r}=e,o=i?this.activeAggregateFilters:this.activeColumnFilters,s=i?r:n;for(let i=0;i<o.length;i++){const n=o[i];if(null!=n&&n!==t)if("function"==typeof n.doesFilterPass){if(!n.doesFilterPass({node:e,data:s}))return!1}else(0,c._error)(91)}return!0}callOnFilterChangedOutsideRenderCycle(e){const{rowRenderer:t,filterManager:i}=this.beans,n=()=>{this.isAlive()&&i?.onFilterChanged(e)};t.isRefreshInProgress()?setTimeout(n,0):n()}updateBeforeFilterChanged(e={}){const{filterInstance:t,additionalEventAttributes:i}=e;return this.updateDependentFilters(),this.updateActiveFilters().then((()=>this.updateFilterFlagInColumns("filterChanged",i).then((()=>{this.allColumnFilters.forEach((e=>{e.filterPromise&&e.filterPromise.then((e=>{e&&e!==t&&e.onAnyFilterChanged&&e.onAnyFilterChanged()}))})),this.processingFilterChange=!0}))))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter((e=>{e.onNewRowsLoaded?.()})).then((()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0}))).then((()=>this.updateActiveFilters()))}createGetValue(e){const{filterValueSvc:t,colModel:i}=this.beans;return(n,r)=>{const o=r?i.getCol(r):e;return o?t.getValue(o,n):void 0}}isFilterActive(e){const{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():null!=this.getModelFromInitialState(e)}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;const{gos:i,dataTypeSvc:n}=this.beans;if((0,s._isSetFilterByDefault)(i))t="agSetColumnFilter";else{const i=n?.getBaseDataType(e);t="number"===i?"agNumberColumnFilter":"date"===i||"dateString"===i?"agDateColumnFilter":"agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;const{gos:i,dataTypeSvc:n}=this.beans;if((0,s._isSetFilterByDefault)(i))t="agSetColumnFloatingFilter";else{const i=n?.getBaseDataType(e);t="number"===i?"agNumberColumnFloatingFilter":"date"===i||"dateString"===i?"agDateColumnFloatingFilter":"agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){const i=this.getDefaultFilter(e),n=e.getColDef();let o;const s={...this.createFilterParams(e,n),filterModifiedCallback:()=>this.filterModifiedCallbackFactory(o,e)(),filterChangedCallback:t=>this.filterChangedCallbackFactory(o,e)(t),doesRowPassOtherFilter:e=>this.beans.filterManager?.doesRowPassOtherFilters(o,e)??!0},a=(0,r._getFilterDetails)(this.beans.userCompFactory,n,s,i);return a?{filterPromise:()=>{const e=a.newAgStackInstance();return e.then((e=>{o=e,t&&(t.filter=e??void 0)})),e},compDetails:a}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return(0,s._addGridCommonParams)(this.gos,{column:e,colDef:t,rowModel:this.beans.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){const t={column:e,filterPromise:null,compDetails:null},{filterPromise:i,compDetails:n}=this.createFilterInstance(e,t);return t.filterPromise=i?.()??null,t.compDetails=n,t}onColumnsChanged(){const e=[],{colModel:t,filterManager:i}=this.beans;this.allColumnFilters.forEach(((i,n)=>{let r;r=i.column.isPrimary()?t.getColDefCol(n):t.getCol(n),r&&r===i.column||(e.push(i.column),this.disposeFilterWrapper(i,"columnChanged"),this.disposeColumnListener(n))}));const n=e.every(m);e.length>0&&!n?i?.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){this.beans.autoColSvc?.getColumns()?.forEach((e=>{m(e)&&this.getOrCreateFilterWrapper(e)}))}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const{filter:t}=this.allColumnFilters.get(e.getColId())??{};return!t||("function"!=typeof t?.isFilterAllowed||t.isFilterAllowed())}getFloatingFilterCompDetails(e,t){const i=t=>{const i=this.getOrCreateFilterWrapper(e)?.filterPromise;null!=i&&i.then((e=>{t((0,n._unwrapUserComp)(e))}))},o=e.getColDef(),a={...this.createFilterParams(e,o),filterChangedCallback:()=>i((t=>this.filterChangedCallbackFactory(t,e)()))},{userCompFactory:l,frameworkOverrides:c}=this.beans,u=(0,r._mergeFilterParamsWithApplicationProvidedParams)(l,o,a);let h=(0,d._getDefaultFloatingFilterType)(c,o,(()=>this.getDefaultFloatingFilter(e)));null==h&&(h="agReadOnlyFloatingFilter");const p=(0,s._addGridCommonParams)(this.gos,{column:e,filterParams:u,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:i,showParentFilter:t});return(0,r._getFloatingFilterCompDetails)(l,o,p,h)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){const i=e.getColId(),n=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialFilterModel[i],n&&this.disposeFilterWrapper(n,t).then((t=>{t&&this.isAlive()&&this.beans.filterManager?.onFilterChanged({columns:[e],source:"api"})}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){return e.filterPromise?.then((i=>{const n=!!i?.isFilterActive();return this.destroyBean(i),this.setColFilterActive(e.column,!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:e.column}),n}))??l.AgPromise.resolve(!1)}filterModifiedCallbackFactory(e,t){return()=>{this.eventSvc.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return i=>{const n={filter:e,additionalEventAttributes:i,columns:[t],source:i?.source??"columnFilter"};this.callOnFilterChangedOutsideRenderCycle(n)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const i=t.column,{compDetails:n}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,n))return void this.destroyFilter(i,"paramsUpdated");const r=i.getColDef().filterParams;t.filterPromise?t.filterPromise.then((e=>{!1===(!e?.refresh||e.refresh({...this.createFilterParams(i,i.getColDef()),filterModifiedCallback:this.filterModifiedCallbackFactory(e,i),filterChangedCallback:this.filterChangedCallbackFactory(e,i),doesRowPassOtherFilter:t=>this.beans.filterManager?.doesRowPassOtherFilters(e,t)??!0,...r}))&&this.destroyFilter(i,"paramsUpdated")})):this.destroyFilter(i,"paramsUpdated")}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:n}=t;return!(i===n||i?.render&&n?.render&&i.render===n.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some((e=>e.getColDef().floatingFilter))}getColumnFilterInstance(e){return new Promise((t=>{this.getFilterInstanceImpl(e).then((e=>{t((0,n._unwrapUserComp)(e))}))}))}getFilterInstanceImpl(e){const t=this.beans.colModel.getColDefCol(e);if(!t)return l.AgPromise.resolve(void 0);const i=this.getOrCreateFilterWrapper(t)?.filterPromise;return i??l.AgPromise.resolve(null)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach((({model:e,source:t})=>this.setFilterModel(e,t))),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach((({key:e,model:t,resolve:i})=>{this.setColumnFilterModel(e,t).then((()=>i()))})),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){const{colModel:i,dataTypeSvc:n}=this.beans;if(n?.isPendingInference){let i=()=>{};const n=new Promise((e=>{i=e}));return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:i}),n}const r=i.getColDefCol(e),o=r?this.getOrCreateFilterWrapper(r):null;return o?(s=g(o.filterPromise,t),new Promise((e=>{s.then((t=>e(t)))}))):Promise.resolve();var s}getFilterWrapper(e){const t=this.beans.colModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}setColDefPropertiesForDataType(e,t,i){const n=(0,s._isSetFilterByDefault)(this.gos),r=this.getLocaleTextFunc(),o=t=>{const{filterParams:i}=e;e.filterParams="object"==typeof i?{...i,...t}:t};switch(t.baseDataType){case"number":n&&o({comparator:p});break;case"boolean":o(n?{valueFormatter:e=>(0,a._exists)(e.value)?r(String(e.value),e.value?"True":"False"):r("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>!1===t,numberOfInputs:0}]});break;case"date":o(n?{valueFormatter:e=>{const t=i(e);return(0,a._exists)(t)?t:r("blanks","(Blanks)")},treeList:!0,treeListFormatter:(e,t)=>{if("NaN"===e)return r("invalidDate","Invalid Date");if(1===t&&null!=e){const t=h[Number(e)-1];return r(t,u[t])}return e??r("blanks","(Blanks)")}}:{isValidDate:v});break;case"dateString":{const e=t.dateParser;o(n?{valueFormatter:e=>{const t=i(e);return(0,a._exists)(t)?t:r("blanks","(Blanks)")},treeList:!0,treeListPathGetter:t=>{const i=e(t??void 0);return i?[String(i.getFullYear()),String(i.getMonth()+1),String(i.getDate())]:null},treeListFormatter:(e,t)=>{if(1===t&&null!=e){const t=h[Number(e)-1];return r(t,u[t])}return e??r("blanks","(Blanks)")}}:{comparator:(t,i)=>{const n=e(i);return null==i||n<t?-1:n>t?1:0},isValidDate:t=>"string"==typeof t&&v(e(t))});break}case"object":n?o({valueFormatter:e=>{const t=i(e);return(0,a._exists)(t)?t:r("blanks","(Blanks)")}}):e.filterValueGetter=e=>i({column:e.column,node:e.node,value:this.beans.valueSvc.getValue(e.column,e.node)})}}setColFilterActive(e,t,i,n){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",i)),e.dispatchColEvent("filterChanged",i,n)}destroy(){super.destroy(),this.allColumnFilters.forEach((e=>this.disposeFilterWrapper(e,"gridDestroyed"))),this.allColumnListeners.clear()}}function g(e,t){return e?new l.AgPromise((i=>{e.then((e=>{"function"!=typeof e.setModel&&((0,c._warn)(65),i()),(e.setModel(t)||l.AgPromise.resolve()).then((()=>i()))}))})):l.AgPromise.resolve()}function m(e){return"agGroupColumnFilter"===e.getColDef().filter}function v(e){return e instanceof Date&&!isNaN(e.getTime())}t.ColumnFilterService=f},9002:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.onFilterChanged=t.isAnyFilterPresent=void 0,t.isAnyFilterPresent=function(e){return!!e.filterManager?.isAnyFilterPresent()},t.onFilterChanged=function(e,t="api"){e.filterManager?.onFilterChanged({source:t})}},5741:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FILTER_LOCALE_TEXT=void 0,t.FILTER_LOCALE_TEXT={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"}},8681:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FilterManager=void 0;const n=i(8731),r=i(7274),o=i(6996),s=i(7990),a=i(7764);class l extends n.BeanStub{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:e})=>this.onAdvFilterEnabledChanged(e),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],(()=>{this.onFilterChanged({source:"api"})})),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",(()=>{this.updateAggFiltering(),this.onFilterChanged()})),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});const{gos:i}=this;this.alwaysPassFilter=i.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",(()=>{this.alwaysPassFilter=i.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})}))}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return"function"==typeof e&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return"function"==typeof t&&t(e)}setFilterModel(e,t="api"){this.isAdvFilterEnabled()?this.warnAdvFilters():this.colFilter?.setFilterModel(e,t)}getFilterModel(){return this.colFilter?.getFilterModel()??{}}isColumnFilterPresent(){return!!this.colFilter?.isColumnFilterPresent()}isAggregateFilterPresent(){return!!this.colFilter?.isAggregateFilterPresent()}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){e?this.colFilter?.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilter?.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){return!!this.advancedFilter?.isEnabled()}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){(0,r._getGroupAggFiltering)(this.gos)&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:i,columns:n=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):s.AgPromise.resolve()).then((()=>{const e={source:t,type:"filterChanged",columns:n};i&&(0,o._mergeDeep)(e,i),this.eventSvc.dispatchEvent(e),this.colFilter?.updateAfterFilterChanged()}))}isSuppressFlashingCellsBecauseFiltering(){return!!this.colFilter?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilter?.isFilterPresent()}updateAggFiltering(){this.aggFiltering=!!(0,r._getGroupAggFiltering)(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){const{rowNode:t}=e;return!!this.alwaysPassFilter?.(t)||!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t))&&!(this.isAggregateFilterPresent()&&!this.colFilter.doAggregateFiltersPass(t,e.filterInstanceToSkip))}doesRowPassFilter(e){const{rowNode:t}=e;return!!this.alwaysPassFilter?.(t)||!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t))&&(!(this.externalFilterPresent&&!this.doesExternalFilterPass(t))&&(!(this.isColumnFilterPresent()&&!this.colFilter.doColumnFiltersPass(t,e.filterInstanceToSkip))&&!(this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(t))))}isFilterActive(e){return!!this.colFilter?.isFilterActive(e)}getOrCreateFilterWrapper(e){return this.colFilter?.getOrCreateFilterWrapper(e)??null}getDefaultFloatingFilter(e){return this.colFilter.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.colFilter.createFilterParams(e,t)}isFilterAllowed(e){return!this.isAdvFilterEnabled()&&!!this.colFilter?.isFilterAllowed(e)}getFloatingFilterCompDetails(e,t){return this.colFilter?.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){return this.colFilter?.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){this.colFilter?.destroyFilter(e,t)}areFilterCompsDifferent(e,t){return!!this.colFilter?.areFilterCompsDifferent(e,t)}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e,t="api"){this.isAdvFilterEnabled()&&(this.beans.dataTypeSvc?.isPendingInference?this.advFilterModelUpdateQueue.push(e):(this.advancedFilter.setModel(e??null),this.onFilterChanged({source:t})))}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return!this.isAdvFilterEnabled()&&!!this.colFilter?.hasFloatingFilters()}getColumnFilterInstance(e){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):this.colFilter?.getColumnFilterInstance(e)??Promise.resolve(void 0)}warnAdvFilters(){(0,a._warn)(68)}setupAdvFilterHeaderComp(e){this.advancedFilter?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advFilterModelUpdateQueue.forEach((e=>this.setAdvFilterModel(e))),this.advFilterModelUpdateQueue=[]}getColumnFilterModel(e){return this.colFilter?.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):this.colFilter?.setColumnFilterModel(e,t)??Promise.resolve()}setColDefPropertiesForDataType(e,t,i){this.colFilter?.setColDefPropertiesForDataType(e,t,i)}}t.FilterManager=l},9665:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FilterMenuFactory=void 0;const n=i(9853),r=i(8731),o=i(7274),s=i(8994),a=i(5230),l=i(3507),c=i(2331),d=i(7764),u=i(1854);class h extends r.BeanStub{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){this.hidePopup?.()}showMenuAfterMouseEvent(e,t,i,n){this.showPopup(e,(n=>{this.popupSvc?.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:n})}),i,t.target,(0,o._isLegacyMenuEnabled)(this.gos),n)}showMenuAfterButtonClick(e,t,i,n){let r=-1,s="left";const a=(0,o._isLegacyMenuEnabled)(this.gos);!a&&this.gos.get("enableRtl")&&(r=1,s="right");const l=a?void 0:4*r,c=a?void 0:4;this.showPopup(e,(n=>{this.popupSvc?.positionPopupByComponent({type:i,eventSource:t,ePopup:n,nudgeX:l,nudgeY:c,alignSide:s,keepWithinBounds:!0,position:"under",column:e})}),i,t,a,n)}showPopup(e,t,i,n,r,h){const p=e?this.createBean(new u.FilterWrapperComp(e,"COLUMN_MENU")):void 0;if(this.activeMenu=p,!p?.hasFilter()||!e)return void(0,d._error)(57);const f=document.createElement("div");let g;(0,a._setAriaRole)(f,"presentation"),f.classList.add("ag-menu"),r||f.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(f,{keydown:e=>this.trapFocusWithin(e,f)}),f.appendChild(p?.getGui());const m=(0,o._isColumnMenuAnchoringEnabled)(this.gos)?n??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,v=this.getLocaleTextFunc(),b=r&&"columnFilter"!==i?v("ariaLabelColumnMenu","Column Menu"):v("ariaLabelColumnFilter","Column Filter"),y=this.popupSvc?.addPopup({modal:!0,eChild:f,closeOnEsc:!0,closedCallback:t=>{(0,s._setColMenuVisible)(e,!1,"contextMenu");const r=t instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),r&&n&&(0,l._isVisible)(n)){const e=(0,c._findTabbableParent)(n);e?.focus({preventScroll:!0})}p?.afterGuiDetached(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e),h?.()},positionCallback:()=>t(f),anchorToElement:m,ariaLabel:b});y&&(this.hidePopup=g=y.hideFunc),p.afterInit().then((()=>{t(f),p.afterGuiAttached({container:i,hidePopup:g})})),(0,s._setColMenuVisible)(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==n.KeyCode.TAB||e.defaultPrevented||(0,c._findNextFocusableElement)(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),(0,c._focusInto)(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:i??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}}t.FilterMenuFactory=h},5432:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalFilterModule=t.QuickFilterModule=t.DateFilterModule=t.NumberFilterModule=t.TextFilterModule=t.CustomFilterModule=t.ColumnFilterModule=t.FilterValueModule=t.FilterCoreModule=t.ClientSideRowModelFilterModule=void 0;const n=i(8287),r=i(3868),o=i(3472),s=i(7205),a=i(3137),l=i(6331),c=i(4527),d=i(219),u=i(9002),h=i(8681),p=i(9665),f=i(3508),g=i(6657),m=i(3725),v=i(3091),b=i(5459),y=i(8988),w=i(4789),C=i(2811),_=i(8305),S=i(5381),A=i(1238);t.ClientSideRowModelFilterModule={moduleName:"ClientSideRowModelFilter",version:s.VERSION,rowModels:["clientSide"],beans:[n.FilterStage]},t.FilterCoreModule={moduleName:"FilterCore",version:s.VERSION,beans:[h.FilterManager],apiFunctions:{isAnyFilterPresent:u.isAnyFilterPresent,onFilterChanged:u.onFilterChanged},css:[l.columnFiltersCSS],dependsOn:[t.ClientSideRowModelFilterModule]},t.FilterValueModule={moduleName:"FilterValue",version:s.VERSION,beans:[f.FilterValueService]},t.ColumnFilterModule={moduleName:"ColumnFilter",version:s.VERSION,beans:[d.ColumnFilterService,p.FilterMenuFactory],dynamicBeans:{headerFilterCellCtrl:r.HeaderFilterCellCtrl},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:c.isColumnFilterPresent,getColumnFilterInstance:c.getColumnFilterInstance,destroyFilter:c.destroyFilter,setFilterModel:c.setFilterModel,getFilterModel:c.getFilterModel,getColumnFilterModel:c.getColumnFilterModel,setColumnFilterModel:c.setColumnFilterModel,showColumnFilter:c.showColumnFilter},dependsOn:[t.FilterCoreModule,a.PopupModule,t.FilterValueModule,o.SharedMenuModule]},t.CustomFilterModule={moduleName:"CustomFilter",version:s.VERSION,userComponents:{agReadOnlyFloatingFilter:g.ReadOnlyFloatingFilter},dependsOn:[t.ColumnFilterModule]},t.TextFilterModule={moduleName:"TextFilter",version:s.VERSION,dependsOn:[t.ColumnFilterModule],userComponents:{agTextColumnFilter:C.TextFilter,agTextColumnFloatingFilter:_.TextFloatingFilter}},t.NumberFilterModule={moduleName:"NumberFilter",version:s.VERSION,dependsOn:[t.ColumnFilterModule],userComponents:{agNumberColumnFilter:y.NumberFilter,agNumberColumnFloatingFilter:w.NumberFloatingFilter}},t.DateFilterModule={moduleName:"DateFilter",version:s.VERSION,dependsOn:[t.ColumnFilterModule],userComponents:{agDateColumnFilter:m.DateFilter,agDateInput:b.DefaultDateComponent,agDateColumnFloatingFilter:v.DateFloatingFilter}};const x={moduleName:"QuickFilterCore",version:s.VERSION,rowModels:["clientSide"],beans:[A.QuickFilterService],dependsOn:[t.FilterCoreModule,t.FilterValueModule]};t.QuickFilterModule={moduleName:"QuickFilter",version:s.VERSION,apiFunctions:{isQuickFilterPresent:S.isQuickFilterPresent,getQuickFilter:S.getQuickFilter,resetQuickFilter:S.resetQuickFilter},dependsOn:[x]},t.ExternalFilterModule={moduleName:"ExternalFilter",version:s.VERSION,dependsOn:[t.FilterCoreModule]}},3508:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FilterValueService=void 0;const n=i(8731),r=i(7274);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t){if(!t)return;const i=e.getColDef(),{filterValueGetter:n}=i;return n?this.executeFilterValueGetter(n,t.data,e,t,i):this.beans.valueSvc.getValue(e,t)}executeFilterValueGetter(e,t,i,n,o){const{expressionSvc:s,valueSvc:a}=this.beans,l=(0,r._addGridCommonParams)(this.gos,{data:t,node:n,column:i,colDef:o,getValue:a.getValueCallback.bind(a,n)});return"function"==typeof e?e(l):s?.evaluate(e,l)}}t.FilterValueService=o},1854:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FilterWrapperComp=void 0;const n=i(3507),r=i(4422),o=i(7990),s=i(7764),a=i(8020);class l extends a.Component{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){return this.filterWrapper?.filterPromise??null}afterInit(){return this.filterWrapper?.filterPromise?.then((()=>{}))??o.AgPromise.resolve()}afterGuiAttached(e){this.filterWrapper?.filterPromise?.then((t=>{t?.afterGuiAttached?.(e)}))}afterGuiDetached(){this.filterWrapper?.filterPromise?.then((e=>{e?.afterGuiDetached?.()}))}createFilter(e){const{column:t,source:i}=this;this.filterWrapper=this.beans.filterManager?.getOrCreateFilterWrapper(t)??null,this.filterWrapper?.filterPromise&&this.filterWrapper.filterPromise.then((n=>{const o=n.getGui();(0,r._exists)(o)||(0,s._warn)(69,{guiFromFilter:o}),this.appendChild(o),e&&this.eventSvc.dispatchEvent({type:"filterOpened",column:t,source:i,eGui:this.getGui()})}))}onFilterDestroyed(e){"api"!==e.source&&"paramsUpdated"!==e.source||e.column.getId()!==this.column.getId()||!this.beans.colModel.getColDefCol(this.column)||((0,n._clearElement)(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}}t.FilterWrapperComp=l},9990:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._getDefaultFloatingFilterType=void 0;const n=i(2036);t._getDefaultFloatingFilterType=function(e,t,i){if(null==t)return null;let r=null;const{compName:o,jsComp:s,fwComp:a}=(0,n._getFilterCompKeys)(e,t);if(o){r={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[o]}else{null==s&&null==a&&!0===t.filter&&(r=i())}return r}},7287:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FloatingFilterTextInputService=void 0;const n=i(8731),r=i(5946),o=i(8020);class s extends n.BeanStub{constructor(e){super(),this.params=e,this.eInput=o.RefPlaceholder,this.onValueChanged=()=>{}}setupGui(e){this.eInput=this.createManagedBean(new r.AgInputTextField(this.params?.config));const t=this.eInput.getGui();e.appendChild(t);const i=e=>this.onValueChanged(e);this.addManagedListeners(t,{input:i,keydown:i})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams({ariaLabel:e,autoComplete:t}){const{eInput:i}=this;i.setInputAriaLabel(e),void 0!==t&&i.setAutoComplete(t)}}t.FloatingFilterTextInputService=s},361:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.isUseApplyButton=t.getDebounceMs=void 0;const n=i(7764);function r(e){return(e.buttons?.indexOf("apply")??-1)>=0}t.getDebounceMs=function(e,t){const{debounceMs:i}=e;return r(e)?(null!=i&&(0,n._warn)(71),0):i??t},t.isUseApplyButton=r},6657:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ReadOnlyFloatingFilter=void 0;const n=i(5946),r=i(8020);class o extends r.Component{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>\n            </div>',[n.AgInputTextFieldSelector]),this.eFloatingFilterText=r.RefPlaceholder}init(e){this.params=e;const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){null!=e?this.params.parentFilterInstance((t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})):this.eFloatingFilterText.setValue("")}refresh(e){this.init(e)}}t.ReadOnlyFloatingFilter=o},3141:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleFloatingFilter=void 0;const n=i(8020),r=i(4824);class o extends n.Component{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e)return void(this.lastType=this.optionsFactory.defaultOption);let t;if(e.operator){t=e.conditions[0]}else t=e;this.lastType=t.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const t=e;return this.isTypeEditable(t.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){const i=new r.OptionsFactory;this.optionsFactory=i,i.init(e.filterParams,this.getDefaultOptions());const n=i.defaultOption;t||(this.lastType=n),this.readOnly=!!e.filterParams.readOnly;const o=this.isTypeEditable(n);this.setEditable(o)}refresh(e){this.setSimpleParams(e)}hasSingleInput(e){const t=this.optionsFactory.getCustomOption(e)?.numberOfInputs;return null==t||1==t}isTypeEditable(e){return!!e&&!this.readOnly&&this.hasSingleInput(e)&&["inRange","empty","blank","notBlank"].indexOf(e)<0}getAriaLabel(e){return`${this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0)} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}}t.SimpleFloatingFilter=o},8922:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TextInputFloatingFilter=void 0;const n=i(9853),r=i(3507),o=i(2043),s=i(8020),a=i(2470),l=i(361),c=i(3141);class d extends c.SimpleFloatingFilter{constructor(){super(...arguments),this.eFloatingFilterInputContainer=s.RefPlaceholder,this.defaultDebounceMs=500}postConstruct(){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>\n        ')}onParentModelChanged(e,t){t?.afterFloatingFilter||t?.afterDataChange||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;const t=e.browserAutoComplete??!1,{inputSvc:i,defaultDebounceMs:n,readOnly:r}=this;if(i.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=(0,l.isUseApplyButton)(e.filterParams),!r){const t=(0,l.getDebounceMs)(e.filterParams,n),r=(0,o._debounce)(this,this.syncUpWithParentFilter.bind(this),t);i.setValueChangedListener(r)}}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const{inputSvc:t}=this,i=t.getValue();(0,r._clearElement)(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(i,!0)}syncUpWithParentFilter(e){const t=e.key===n.KeyCode.ENTER;if(this.applyActive&&!t)return;const{inputSvc:i,params:r}=this;let o=i.getValue();r.filterParams.trimInput&&(o=(0,a.trimInputForFilter)(o),i.setValue(o,!0)),r.parentFilterInstance((e=>{e?.onFloatingFilterChanged(this.lastType||null,o||null)}))}setEditable(e){this.inputSvc.setEditable(e)}}t.TextInputFloatingFilter=d},8713:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DateCompWrapper=void 0;const n=i(2036),r=i(3507);t.DateCompWrapper=class{constructor(e,t,i,r,o){this.alive=!0,this.context=e,this.eParent=r;const s=(0,n._getDateCompDetails)(t,i);s&&s.newAgStackInstance().then((t=>{if(!this.alive)return void e.destroyBean(t);if(this.dateComp=t,!t)return;r.appendChild(t.getGui()),t?.afterGuiAttached?.();const{tempValue:i,disabled:n}=this;i&&t.setDate(i),null!=n&&t.setDisabled?.(n),o?.(this)}))}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){const t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){const t=this.dateComp;t?t.setDisabled?.(e):this.disabled=e}setDisplayed(e){(0,r._setDisplayed)(this.eParent,e)}setInputPlaceholder(e){this.dateComp?.setInputPlaceholder?.(e)}setInputAriaLabel(e){this.dateComp?.setInputAriaLabel?.(e)}afterGuiAttached(e){this.dateComp?.afterGuiAttached?.(e)}updateParams(e){this.dateComp?.refresh?.(e)}}},3725:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DateFilter=void 0;const n=i(7274),r=i(9827),o=i(7764),s=i(5562),a=i(7535),l=i(8713),c=i(4200),d=i(4392),u=1/0;class h extends s.ScalarFilter{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=1e3,this.maxValidYear=u,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:i,type:n}=e||{};return[t&&(0,r._parseDateTimeFromString)(t)||null,i&&(0,r._parseDateTimeFromString)(i)||null].slice(0,this.getNumberOfInputs(n))}comparator(){return this.dateFilterParams.comparator??p}isValid(e){const t=this.dateFilterParams.isValidDate;return!t||t(e)}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(t,i)=>{if(null!=e[t]){if(!isNaN(e[t]))return null==e[t]?i:Number(e[t]);(0,o._warn)(82,{param:t})}return i};this.minValidYear=t("minValidYear",1e3),this.maxValidYear=t("maxValidYear",u),this.minValidYear>this.maxValidYear&&(0,o._warn)(83),this.minValidDate=e.minValidDate?e.minValidDate instanceof Date?e.minValidDate:(0,r._parseDateTimeFromString)(e.minValidDate):null,this.maxValidDate=e.maxValidDate?e.maxValidDate instanceof Date?e.maxValidDate:(0,r._parseDateTimeFromString)(e.maxValidDate):null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&(0,o._warn)(84),this.filterModelFormatter=new d.DateFilterModelFormatter(this.dateFilterParams,this.getLocaleTextFunc.bind(this),this.optionsFactory)}createDateCompWrapper(e){const{userCompFactory:t,context:i,gos:r}=this.beans,o=new l.DateCompWrapper(i,t,(0,n._addGridCommonParams)(r,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams,location:"filter"}),e);return this.addDestroyFunc((()=>o.destroy())),o}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return c.DEFAULT_DATE_FILTER_OPTIONS}createValueElement(){const e=(0,n._getDocument)(this.beans).createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,i,r){const o=(0,n._getDocument)(this.beans).createElement("div");o.classList.add(`ag-filter-${r}`),o.classList.add(`ag-filter-date-${r}`),t.push(o),e.appendChild(o),i.push(this.createDateCompWrapper(o))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),(0,a.removeItems)(this.eConditionPanelsFrom,e,t),(0,a.removeItems)(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){(0,a.removeItems)(e,t,i).forEach((e=>e.destroy()))}isValidDateValue(e){if(null===e)return!1;const{minValidDate:t,maxValidDate:i,minValidYear:n,maxValidYear:r}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<n)return!1;if(i){if(e>i)return!1}else if(e.getUTCFullYear()>r)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput(((i,n,r,o)=>{r!==e||!t||n>=o||(t=t&&this.isValidDateValue(i.getDate()))})),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),i={},n=this.getValues(e);return n.length>0&&(i.dateFrom=(0,r._serialiseDate)(n[0])),n.length>1&&(i.dateTo=(0,r._serialiseDate)(n[1])),{dateFrom:null,dateTo:null,filterType:this.filterType,type:t,...i}}resetPlaceholder(){const e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput((e=>{e.setInputPlaceholder(t),e.setInputAriaLabel(i)}))}getInputs(e){const{dateConditionFromComps:t,dateConditionToComps:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,((e,i,n,r)=>{i<r&&t.push(e.getDate())})),t}translate(e){return"lessThan"===e?super.translate("before"):"greaterThan"===e?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}}function p(e,t){return t<e?-1:t>e?1:0}t.DateFilter=h},4200:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_DATE_FILTER_OPTIONS=void 0,t.DEFAULT_DATE_FILTER_OPTIONS=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"]},4392:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DateFilterModelFormatter=void 0;const n=i(9827),r=i(2786);class o extends r.SimpleFilterModelFormatter{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){const{type:i}=e,{numberOfInputs:r}=t||{},o="inRange"==i||2===r,s=(0,n._parseDateTimeFromString)(e.dateFrom),a=(0,n._parseDateTimeFromString)(e.dateTo),l=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(o){return`${null!==s?(0,n._dateToFormattedString)(s,l):"null"}-${null!==a?(0,n._dateToFormattedString)(a,l):"null"}`}return null!=s?(0,n._dateToFormattedString)(s,l):`${i}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}}t.DateFilterModelFormatter=o},3091:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DateFloatingFilter=void 0;const n=i(7274),r=i(9827),o=i(3507),s=i(2043),a=i(5946),l=i(8020),c=i(361),d=i(3141),u=i(8713),h=i(4200),p=i(4392);class f extends d.SimpleFloatingFilter{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>\n                <div data-ref="eDateWrapper" style="display: flex;"></div>\n            </div>',[a.AgInputTextFieldSelector]),this.eReadOnlyText=l.RefPlaceholder,this.eDateWrapper=l.RefPlaceholder}getDefaultOptions(){return h.DEFAULT_DATE_FILTER_OPTIONS}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new p.DateFilterModelFormatter(this.filterParams,this.getLocaleTextFunc.bind(this),this.optionsFactory);const t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.dateComp.updateParams(this.getDateComponentParams()),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){const t=e?(0,r._parseDateTimeFromString)(e.dateFrom):null;this.dateComp.setDate(t),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){(0,o._setDisplayed)(this.eDateWrapper,e),(0,o._setDisplayed)(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){t?.afterFloatingFilter||t?.afterDataChange||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=this.dateComp.getDate(),t=(0,r._serialiseDate)(e);this.params.parentFilterInstance((e=>{if(e){const i=(0,r._parseDateTimeFromString)(t);e.onFloatingFilterChanged(this.lastType||null,i)}}))}getDateComponentParams(){const{filterParams:e,column:t}=this.params,i=(0,c.getDebounceMs)(e,this.defaultDebounceMs);return(0,n._addGridCommonParams)(this.gos,{onDateChanged:(0,s._debounce)(this,this.onDateChanged.bind(this),i),filterParams:t.getColDef().filterParams,location:"floatingFilter"})}createDateComponent(){const{beans:{context:e,userCompFactory:t},eDateWrapper:i}=this;this.dateComp=new u.DateCompWrapper(e,t,this.getDateComponentParams(),i,(e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))})),this.addDestroyFunc((()=>this.dateComp.destroy()))}}t.DateFloatingFilter=f},5459:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultDateComponent=void 0;const n=i(7274),r=i(8667),o=i(9827),s=i(7764),a=i(5946),l=i(8020);class c extends l.Component{constructor(){super('\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>\n            </div>',[a.AgInputTextFieldSelector]),this.eDateInput=l.RefPlaceholder,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this)})}handleInput(e,t){if(t.target===(0,n._getActiveDomElement)(this.beans)&&!this.eDateInput.isDisabled())return this.isApply?(this.applyOnFocusOut=!e,void(e&&this.params.onDateChanged())):void(e||this.params.onDateChanged())}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}setParams(e){const t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&(0,r._isBrowserSafari)(),t.type=i?"date":"text";const{minValidYear:n,maxValidYear:a,minValidDate:l,maxValidDate:c,buttons:d}=e.filterParams||{};if(l&&n&&(0,s._warn)(85),c&&a&&(0,s._warn)(86),l&&c){const[e,t]=[l,c].map((e=>e instanceof Date?e:(0,o._parseDateTimeFromString)(e)));e&&t&&e.getTime()>t.getTime()&&(0,s._warn)(87)}l?l instanceof Date?t.min=(0,o._dateToFormattedString)(l):t.min=l:n&&(t.min=`${n}-01-01`),c?c instanceof Date?t.max=(0,o._dateToFormattedString)(c):t.max=c:a&&(t.max=`${a}-12-31`),this.isApply="floatingFilter"===e.location&&!!d?.includes("apply")}refresh(e){this.params=e,this.setParams(e)}getDate(){return(0,o._parseDateTimeFromString)(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue((0,o._serialiseDate)(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){e&&e.suppressFocus||this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){return e?.filterParams?.browserDatePicker??!0}}t.DefaultDateComponent=c},8988:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.NumberFilter=void 0;const n=i(5230),r=i(4422),o=i(8792),s=i(5946),a=i(5562),l=i(846),c=i(1862),d=i(730);class u extends a.ScalarFilter{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}refresh(e){return this.numberFilterParams.allowedCharPattern===e.allowedCharPattern&&super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:n}=e||{};return[this.processValue(t),this.processValue(i)].slice(0,this.getNumberOfInputs(n))}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new c.NumberFilterModelFormatter(this.getLocaleTextFunc.bind(this),this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return l.DEFAULT_NUMBER_FILTER_OPTIONS}setElementValue(e,t,i){const{numberFormatter:n}=this.numberFilterParams,r=!i&&n?n(t??null):t;super.setElementValue(e,r)}createValueElement(){const e=(0,d.getAllowedCharPattern)(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),(0,n._setAriaRole)(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,n){const r=this.createManagedBean(n?new s.AgInputTextField({allowedCharPattern:n}):new o.AgInputNumberField);r.addCssClass(`ag-filter-${i}`),r.addCssClass("ag-filter-filter"),t.push(r),e.appendChild(r.getGui())}removeValueElements(e,t){const i=i=>this.removeComponents(i,e,t);i(this.eValuesFrom),i(this.eValuesTo)}getValues(e){const t=[];return this.forEachPositionInput(e,((e,i,n,r)=>{i<r&&t.push(this.processValue(this.stringToFloat(e.getValue())))})),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}processValue(e){return null==e||isNaN(e)?null:e}stringToFloat(e){if("number"==typeof e)return e;let t=(0,r._makeNull)(e);null!=t&&""===t.trim()&&(t=null);const i=this.numberFilterParams.numberParser;return i?i(t):null==t||"-"===t.trim()?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.filterType,type:t},n=this.getValues(e);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}getInputs(e){const{eValuesFrom:t,eValuesTo:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput((t=>{t.getInputElement().validity.valid||(e=!0)})),e}}t.NumberFilter=u},846:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_NUMBER_FILTER_OPTIONS=void 0,t.DEFAULT_NUMBER_FILTER_OPTIONS=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"]},1862:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.NumberFilterModelFormatter=void 0;const n=i(2786);class r extends n.SimpleFilterModelFormatter{conditionToString(e,t){const{numberOfInputs:i}=t||{},{filter:n,filterTo:r,type:o}=e,s="inRange"==o||2===i,a=this.formatValue.bind(this);return s?`${a(n)}-${a(r)}`:null!=n?a(n):`${o}`}}t.NumberFilterModelFormatter=r},730:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getAllowedCharPattern=void 0,t.getAllowedCharPattern=function(e){const{allowedCharPattern:t}=e??{};return t??null}},4789:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.NumberFloatingFilter=void 0;const n=i(8731),r=i(8792),o=i(5946),s=i(7287),a=i(8922),l=i(846),c=i(1862),d=i(730);class u extends n.BeanStub{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new r.AgInputNumberField),this.eTextInput=this.createManagedBean(new o.AgInputTextField),this.eTextInput.setDisabled(!0);const t=this.eNumberInput.getGui(),i=this.eTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,(e=>this.onValueChanged(e))),this.setupListeners(i,(e=>this.onValueChanged(e)))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}}class h extends a.TextInputFloatingFilter{init(e){super.init(e),this.filterModelFormatter=new c.NumberFilterModelFormatter(this.getLocaleTextFunc.bind(this),this.optionsFactory,e.filterParams?.numberFormatter)}refresh(e){(0,d.getAllowedCharPattern)(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultOptions(){return l.DEFAULT_NUMBER_FILTER_OPTIONS}createFloatingFilterInputService(e){return this.allowedCharPattern=(0,d.getAllowedCharPattern)(e.filterParams),this.allowedCharPattern?this.createManagedBean(new s.FloatingFilterTextInputService({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new u)}}t.NumberFloatingFilter=h},4824:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsFactory=void 0;const n=i(7764);t.OptionsFactory=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}mapCustomOptions(){const{filterOptions:e}=this;e&&e.forEach((t=>{if("string"==typeof t)return;[["displayKey"],["displayName"],["predicate","test"]].every((e=>!!e.some((e=>null!=t[e]))||((0,n._warn)(72,{keys:e}),!1)))?this.customFilterOptions[t.displayKey]=t:this.filterOptions=e.filter((e=>e===t))||[]}))}selectDefaultItem(e){const{filterOptions:t}=this;if(e.defaultOption)this.defaultOption=e.defaultOption;else if(t.length>=1){const e=t[0];"string"==typeof e?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:(0,n._warn)(73)}else(0,n._warn)(74)}getCustomOption(e){return this.customFilterOptions[e]}}},2245:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ProvidedFilter=void 0;const n=i(2147),r=i(3507),o=i(2043),s=i(4422),a=i(7764),l=i(8020),c=i(1772),d=i(5741),u=i(361);class h extends l.Component{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=l.RefPlaceholder,this.buttonListeners=[],this.defaultDebounceMs=0}postConstruct(){this.resetTemplate(),this.createManagedBean(new c.ManagedFocusFeature(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new n.PositionableFeature(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const i=`\n            <form class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">\n                    ${this.createBodyTemplate()}\n                </div>\n            </form>`;this.setTemplate(i,this.getAgComponents(),e),t=this.getGui(),t?.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.params.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then((()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()}))}setParams(e){this.params=e,this.applyActive=(0,u.isUseApplyButton)(e),this.resetButtonsPanel(e)}updateParams(e){this.params=e,this.applyActive=(0,u.isUseApplyButton)(e),this.resetUiToActiveModel(this.getModel(),(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()}))}resetButtonsPanel(e,t){const{buttons:i,readOnly:n}=t??{},{buttons:o,readOnly:l}=e;if(n===l&&(0,s._jsonEquals)(i,o))return;const c=o&&o.length>0&&!this.isReadOnly();if(this.eButtonsPanel?((0,r._clearElement)(this.eButtonsPanel),this.buttonListeners.forEach((e=>e())),this.buttonListeners=[]):c&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!c)return void(this.eButtonsPanel&&(0,r._removeFromParent)(this.eButtonsPanel));const d=document.createDocumentFragment(),u=e=>{let t;const i=e?this.translate(`${e}Filter`):void 0;switch(e){case"apply":t=e=>this.onBtApply(!1,!1,e);break;case"clear":t=()=>this.onBtClear();break;case"reset":t=()=>this.onBtReset();break;case"cancel":t=e=>{this.onBtCancel(e)};break;default:return void(0,a._warn)(75)}const n="apply"===e?"submit":"button",o=(0,r._loadTemplate)(`<button\n                    type="${n}"\n                    data-ref="${e}FilterButton"\n                    class="ag-button ag-standard-button ag-filter-apply-panel-button"\n                >${i}\n                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(o,{click:t})),d.append(o)};o.forEach((e=>u(e))),this.eButtonsPanel.append(d),this.getGui().appendChild(this.eButtonsPanel)}setupOnBtApplyDebounce(){const e=(0,u.getDebounceMs)(this.params,this.defaultDebounceMs),t=(0,o._debounce)(this,this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel??null}setModel(e){return(null!=e?this.setModelIntoUi(e):this.resetUiToDefaults()).then((()=>{this.updateUiVisibility(),this.applyModel("api")}))}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),(()=>{this.handleCancelEnd(e)}))}handleCancelEnd(e){this.params.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const i=()=>{this.onUiChanged(!1,"prevent"),t?.()};null!=e?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then((()=>this.onUiChanged()))}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const t=this.getModelFromUi();if(!this.isModelValid(t))return!1;const i=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(i,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,i){if(i&&i.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")){const i="columnFilter";this.params.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:i})}const{closeOnApply:n}=this.params;n&&this.applyActive&&!e&&!t&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,i=t&&t.key;let n;"Enter"!==i&&"Space"!==i||(n={keyboardEvent:t}),this.hidePopup(n),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.params.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const e=this.isModelValid(this.getModelFromUi()),t=this.queryForHtmlElement('[data-ref="applyFilterButton"]');t&&(0,r._setDisabled)(t,!e)}e&&!t||"immediately"===t?this.onBtApply(e):(this.applyActive||t)&&"debounce"!==t||this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){const{positionableFeature:t,gos:i}=this;if(!t||"toolPanel"===e)return;"floatingFilter"===e||"columnFilter"===e?(t.restoreLastSize(),t.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature?.constrainSizeToAvailableHeight(!1)}refresh(e){const t=this.params;return this.params=e,this.resetButtonsPanel(e,t),!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.getLocaleTextFunc()(e,d.FILTER_LOCALE_TEXT[e])}getCellValue(e){return this.params.getValue(e)}getPositionableElement(){return this.eFilterBody}}t.ProvidedFilter=h},5562:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ScalarFilter=void 0;const n=i(7764),r=i(5220),o=i(7535);class s extends r.SimpleFilter{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){const{includeBlanksInEquals:t,includeBlanksInNotEqual:i,includeBlanksInGreaterThan:n,includeBlanksInLessThan:r,includeBlanksInRange:o}=this.scalarFilterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(i)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(n)return!0;break;case"lessThan":case"lessThanOrEqual":if(r)return!0;break;case"inRange":if(o)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){const r=i.type;if(!this.isValid(t))return"notEqual"===r||"notBlank"===r;const s=this.comparator(),a=null!=e[0]?s(e[0],t):0;switch(r){case"equals":return 0===a;case"notEqual":return 0!==a;case"greaterThan":return a>0;case"greaterThanOrEqual":return a>=0;case"lessThan":return a<0;case"lessThanOrEqual":return a<=0;case"inRange":{const i=s(e[1],t);return this.scalarFilterParams.inRangeInclusive?a>=0&&i<=0:a>0&&i<0}case"blank":return(0,o.isBlank)(t);case"notBlank":return!(0,o.isBlank)(t);default:return(0,n._warn)(76,{filterModelType:r}),!0}}}t.ScalarFilter=s},5220:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleFilter=void 0;const n=i(1502),r=i(3507),o=i(7990),s=i(7764),a=i(8085),l=i(7336),c=i(159),d=i(8020),u=i(4824),h=i(2245),p=i(7535);class f extends h.ProvidedFilter{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:e}=t;return null!=e?e:1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:"inRange"===e?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach(((t,i)=>{const n=0===i?e:this.optionsFactory.defaultOption;t.setValue(n,!0)}))}getModelFromUi(){const e=this.getUiCompleteConditions();return 0===e.length?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map((e=>e.getValue()))}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){const{eJoinOperatorsOr:e,defaultJoinOperator:t}=this;return 0===e.length?t:!0===e[0].getValue()?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const i=!e.operator,r=!t.operator;if(!i&&r||i&&!r)return!1;let o;if(i){const i=e,n=t;o=this.areSimpleModelsEqual(i,n)}else{const i=e,r=t;o=i.operator===r.operator&&(0,n._areEqual)(i.conditions,r.conditions,((e,t)=>this.areSimpleModelsEqual(e,t)))}return o}shouldRefresh(e){const t=this.getModel(),i=t?t.conditions??[t]:null,n=e.filterOptions?.map((e=>"string"==typeof e?e:e.displayKey))??this.getDefaultFilterOptions();return!(i&&!i.every((e=>void 0!==n.find((t=>t===e.type)))))&&!("number"==typeof e.maxNumConditions&&i&&i.length>e.maxNumConditions)}refresh(e){if(!this.shouldRefresh(e))return!1;return!!super.refresh(e)&&(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){const t=e;let i=t.conditions;null==i&&(i=[],(0,s._warn)(77));const n=(0,p.validateAndUpdateConditions)(i,this.maxNumConditions),r=this.getNumConditions();if(n<r)this.removeConditionsAndOperators(n);else if(n>r)for(let e=r;e<n;e++)this.createJoinOperatorPanel(),this.createOption();const o="OR"===t.operator;this.eJoinOperatorsAnd.forEach((e=>e.setValue(!o,!0))),this.eJoinOperatorsOr.forEach((e=>e.setValue(o,!0))),i.forEach(((e,t)=>{this.eTypes[t].setValue(e.type,!0),this.setConditionIntoUi(e,t)}))}else{const t=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(t.type,!0),this.setConditionIntoUi(t,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),o.AgPromise.resolve()}doesFilterPass(e){const t=this.getModel();if(null==t)return!0;const{operator:i}=t,n=[];if(i){const e=t;n.push(...e.conditions??[])}else n.push(t);return n[i&&"OR"===i?"some":"every"]((t=>this.individualConditionPasses(e,t)))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=(0,p.getDefaultJoinOperator)(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new u.OptionsFactory,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){let t=e.maxNumConditions??2;t<1&&((0,s._warn)(79),t=1),this.maxNumConditions=t;let i=e.numAlwaysVisibleConditions??1;i<1&&((0,s._warn)(80),i=1),i>t&&((0,s._warn)(81),i=t),this.numAlwaysVisibleConditions=i}createOption(){const e=this.createManagedBean(new c.AgSelect);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const i=this.getNumConditions()-1;this.forEachPositionInput(i,(e=>this.resetInput(e))),this.addChangedListeners(e,i)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const n=this.eJoinOperatorPanels.length-1,r=this.joinOperatorId++;this.resetJoinOperatorAnd(t,n,r),this.resetJoinOperatorOr(i,n,r),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const n=this.createManagedBean(new l.AgRadioButton);e.push(n);const r="ag-filter-condition-operator";return n.addCssClass(r),n.addCssClass(`${r}-${i}`),t.appendChild(n.getGui()),n}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map((e=>"string"==typeof e?this.createBoilerplateListOption(e):this.createCustomListOption(e)))}putOptionsIntoDropdown(e){const{filterListOptions:t}=this;t.forEach((t=>{e.addOption(t)})),e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?e=i:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const t=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<t){this.removeConditionsAndOperators(t+1);const i=e+1,n=t-i;n>0&&this.removeConditionsAndOperators(i,n),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach(((t,i)=>{const n=this.isConditionDisabled(i,e);t.setDisabled(n||this.filterListOptions.length<=1),1===i&&((0,r._setDisabled)(this.eJoinOperatorPanels[0],n),this.eJoinOperatorsAnd[0].setDisabled(n),this.eJoinOperatorsOr[0].setDisabled(n))})),this.eConditionBodies.forEach(((e,t)=>{(0,r._setDisplayed)(e,this.isConditionBodyVisible(t))}));const i="OR"===(t??this.getJoinOperator());this.eJoinOperatorsAnd.forEach((e=>{e.setValue(!i,!0)})),this.eJoinOperatorsOr.forEach((e=>{e.setValue(i,!0)})),this.forEachInput(((t,i,n,r)=>{this.setElementDisplayed(t,i<r),this.setElementDisabled(t,this.isConditionDisabled(n,e))})),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;const{eTypes:i,eConditionBodies:n,eJoinOperatorPanels:r,eJoinOperatorsAnd:o,eJoinOperatorsOr:s}=this;this.removeComponents(i,e,t),this.removeElements(n,e,t),this.removeValueElements(e,t);const a=Math.max(e-1,0);this.removeElements(r,a,t),this.removeComponents(o,a,t),this.removeComponents(s,a,t)}removeElements(e,t,i){(0,p.removeItems)(e,t,i).forEach((e=>(0,r._removeFromParent)(e)))}removeComponents(e,t,i){(0,p.removeItems)(e,t,i).forEach((e=>{(0,r._removeFromParent)(e.getGui()),this.destroyBean(e)}))}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus){const{eFilterBody:e,eTypes:t}=this;let i;if(!this.isReadOnly()){const e=this.getInputs(0)[0];i=e instanceof a.AgAbstractInputField&&this.isConditionBodyVisible(0)?e.getInputElement():t[0]?.getFocusableElement()}(i??e).focus({preventScroll:!0})}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,i=-1,n=!1;const r=this.getJoinOperator();for(let e=this.getNumConditions()-1;e>=0;e--)if(this.isConditionUiComplete(e))-1===t&&(t=e,i=e);else{const r=e<t;(e>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(e-1)||r)&&(this.removeConditionsAndOperators(e,1),n=!0,r&&i--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(i,r),n&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getPlaceholderText(e,t){let i=this.translate(e);if("function"==typeof this.filterPlaceholder){const e=this.eTypes[t].getValue(),n=this.translate(e);i=this.filterPlaceholder({filterOptionKey:e,filterOption:n,placeholder:i})}else"string"==typeof this.filterPlaceholder&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.getLocaleTextFunc();this.forEachInput(((t,i,n,r)=>{if(!(t instanceof a.AgAbstractInputField))return;const o=0===i&&r>1?"inRangeStart":0===i?"filterOoo":"inRangeEnd",s=0===i&&r>1?e("ariaFilterFromValue","Filter from value"):0===i?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(o,n)),t.setInputAriaLabel(s)}))}setElementValue(e,t,i){e instanceof a.AgAbstractInputField&&e.setValue(null!=t?String(t):null,!0)}setElementDisplayed(e,t){e instanceof d.Component&&(0,r._setDisplayed)(e.getGui(),t)}setElementDisabled(e,t){e instanceof d.Component&&(0,r._setDisabled)(e.getGui(),t)}attachElementOnChange(e,t){e instanceof a.AgAbstractInputField&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach(((t,i)=>{this.forEachPositionTypeInput(i,t,e)}))}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const n=this.getNumberOfInputs(t),r=this.getInputs(e);for(let t=0;t<r.length;t++){const o=r[t];null!=o&&i(o,t,e,n)}}isConditionDisabled(e,t){return!!this.isReadOnly()||0!==e&&e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){if(e>=this.getNumConditions())return!1;return"empty"!==this.getConditionType(e)&&!this.getValues(e).some((e=>null==e))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach((e=>this.resetType(e))),this.eJoinOperatorsAnd.forEach(((e,t)=>this.resetJoinOperatorAnd(e,t,this.joinOperatorId+t))),this.eJoinOperatorsOr.forEach(((e,t)=>this.resetJoinOperatorOr(e,t,this.joinOperatorId+t))),this.joinOperatorId++,this.forEachInput((e=>this.resetInput(e))),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),o.AgPromise.resolve()}resetType(e){const t=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(t).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,"AND"===this.defaultJoinOperator,this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,"OR"===this.defaultJoinOperator,this.translate("orCondition"),i)}resetJoinOperator(e,t,i,n,r){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${r}`).setLabel(n),t)}updateJoinOperatorsDisabled(){const e=(e,t)=>this.updateJoinOperatorDisabled(e,t);this.eJoinOperatorsAnd.forEach(e),this.eJoinOperatorsOr.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e);this.forEachInput(((e,n,r)=>{r===t&&this.setElementValue(e,null!=i[n]?i[n]:null)}))}setValueFromFloatingFilter(e){this.forEachInput(((t,i,n)=>{this.setElementValue(t,0===i&&0===n?e:null,!0)}))}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,(e=>{this.attachElementOnChange(e,this.listener)})))}individualConditionPasses(e,t){const i=this.getCellValue(e.node),n=this.mapValuesFromModel(t),r=this.optionsFactory.getCustomOption(t.type),o=(0,p.evaluateCustomFilter)(r,n,i);return null!=o?o:null==i?this.evaluateNullValue(t.type):this.evaluateNonNullValue(n,i,t,e)}hasInvalidInputs(){return!1}}t.SimpleFilter=f},2786:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleFilterModelFormatter=void 0;const n=i(5741);t.SimpleFilterModelFormatter=class{constructor(e,t,i){this.getLocaleTextFunc=e,this.optionsFactory=t,this.valueFormatter=i}getModelAsString(e){if(!e)return null;const t=null!=e.operator,i=this.getLocaleTextFunc();if(t){const t=e,r=(t.conditions??[]).map((e=>this.getModelAsString(e))),o="AND"===t.operator?"andCondition":"orCondition";return r.join(` ${i(o,n.FILTER_LOCALE_TEXT[o])} `)}if("blank"===e.type||"notBlank"===e.type)return i(e.type,e.type);{const t=e,n=this.optionsFactory.getCustomOption(t.type),{displayKey:r,displayName:o,numberOfInputs:s}=n||{};return r&&o&&0===s?(i(r,o),o):this.conditionToString(t,n)}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){const t=this.valueFormatter;return t?t(e??null)??"":String(e)}}},7535:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.validateAndUpdateConditions=t.evaluateCustomFilter=t.getDefaultJoinOperator=t.isBlank=t.removeItems=void 0;const n=i(7764);t.removeItems=function(e,t,i){return null==i?e.splice(t):e.splice(t,i)},t.isBlank=function(e){return null==e||"string"==typeof e&&0===e.trim().length},t.getDefaultJoinOperator=function(e){return"AND"===e||"OR"===e?e:"AND"},t.evaluateCustomFilter=function(e,t,i){if(null==e)return;const{predicate:n}=e;return null==n||t.some((e=>null==e))?void 0:n(t,i)},t.validateAndUpdateConditions=function(e,t){let i=e.length;return i>t&&(e.splice(t),(0,n._warn)(78),i=t),i}},2811:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TextFilter=void 0;const n=i(5230),r=i(4422),o=i(5946),s=i(5220),a=i(7535),l=i(650),c=i(330),d=i(2470);class u extends s.SimpleFilter{constructor(){super("textFilter"),this.filterType="text",this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>null==e?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:i})=>{if(null==i)return!1;switch(e){case"contains":return t.indexOf(i)>=0;case"notContains":return t.indexOf(i)<0;case"equals":return t===i;case"notEqual":return t!=i;case"startsWith":return 0===t.indexOf(i);case"endsWith":{const e=t.lastIndexOf(i);return e>=0&&e===t.length-i.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=e.textMatcher||this.defaultMatcher,this.formatter=e.textFormatter||(e.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new c.TextFilterModelFormatter(this.getLocaleTextFunc.bind(this),this.optionsFactory)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.filterType,type:t},n=this.getValuesWithSideEffects(e,!0);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){const{eValuesFrom:t,eValuesTo:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const i=[];return this.forEachPositionInput(e,((e,n,o,s)=>{if(n<s){let n=(0,r._makeNull)(e.getValue());t&&this.textFilterParams.trimInput&&(n=(0,d.trimInputForFilter)(n)??null,e.setValue(n,!0)),i.push(n)}})),i}getDefaultFilterOptions(){return l.DEFAULT_TEXT_FILTER_OPTIONS}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),(0,n._setAriaRole)(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,i){const n=this.createManagedBean(new o.AgInputTextField);n.addCssClass(`ag-filter-${i}`),n.addCssClass("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeValueElements(e,t){const i=i=>this.removeComponents(i,e,t);i(this.eValuesFrom),i(this.eValuesTo)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:n}=e||{};return[t||null,i||null].slice(0,this.getNumberOfInputs(n))}evaluateNullValue(e){return!!e&&["notEqual","notContains","blank"].indexOf(e)>=0}evaluateNonNullValue(e,t,i,n){const r=e.map((e=>this.formatter(e)))||[],o=this.formatter(t),{api:s,colDef:l,column:c,context:d,textFormatter:u}=this.textFilterParams;if("blank"===i.type)return(0,a.isBlank)(t);if("notBlank"===i.type)return!(0,a.isBlank)(t);const h={api:s,colDef:l,column:c,context:d,node:n.node,data:n.data,filterOption:i.type,value:o,textFormatter:u};return r.some((e=>this.matcher({...h,filterText:e})))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}}t.TextFilter=u},650:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_TEXT_FILTER_OPTIONS=void 0,t.DEFAULT_TEXT_FILTER_OPTIONS=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"]},330:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TextFilterModelFormatter=void 0;const n=i(2786);class r extends n.SimpleFilterModelFormatter{conditionToString(e,t){const{numberOfInputs:i}=t||{},{filter:n,filterTo:r,type:o}=e;return"inRange"==o||2===i?`${n}-${r}`:null!=n?`${n}`:`${o}`}}t.TextFilterModelFormatter=r},2470:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.trimInputForFilter=void 0,t.trimInputForFilter=function(e){const t=e?.trim();return""===t?e:t}},8305:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TextFloatingFilter=void 0;const n=i(7287),r=i(8922),o=i(650),s=i(330);class a extends r.TextInputFloatingFilter{init(e){super.init(e),this.filterModelFormatter=new s.TextFilterModelFormatter(this.getLocaleTextFunc.bind(this),this.optionsFactory)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultOptions(){return o.DEFAULT_TEXT_FILTER_OPTIONS}createFloatingFilterInputService(){return this.createManagedBean(new n.FloatingFilterTextInputService)}}t.TextFloatingFilter=a},5381:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.resetQuickFilter=t.getQuickFilter=t.isQuickFilterPresent=void 0,t.isQuickFilterPresent=function(e){return!!e.quickFilter?.isFilterPresent()},t.getQuickFilter=function(e){return e.quickFilter?.getText()},t.resetQuickFilter=function(e){e.quickFilter?.resetCache()}},1238:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.QuickFilterService=void 0;const n=i(8731),r=i(7274),o=i(4422),s=i(7764);class a extends n.BeanStub{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){const e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",(e=>this.setFilter(e.currentValue))),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],(()=>this.onColumnConfigChanged())),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],(()=>this.setParserAndMatcher()))}refreshCols(){const{autoColSvc:e,colModel:t,gos:i,pivotResultCols:n}=this.beans,r=t.isPivotMode(),o=e?.getColumns(),s=t.getColDefCols();let a=(r&&!i.get("applyQuickFilterBeforePivotOrAgg")?n?.getPivotResultCols()?.list:s)??[];o&&(a=a.concat(o)),this.colsToUse=i.get("includeHiddenColumnsInQuickFilter")?a:a.filter((e=>e.isVisible()||e.isRowGroupActive()))}isFilterPresent(){return null!==this.quickFilter}doesRowPass(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every((i=>t?this.doesRowPassCache(e,i):this.doesRowPassNoCache(e,i)))}resetCache(){this.beans.rowModel.forEachNode((e=>e.quickFilterAggregateText=null))}getText(){return this.gos.get("quickFilterText")}setFilterParts(){const{quickFilter:e,parser:t}=this;this.quickFilterParts=e?t?t(e):e.split(" "):null}parseFilter(e){return(0,o._exists)(e)?e.toUpperCase():null}setFilter(e){if(null!=e&&"string"!=typeof e)return void(0,s._warn)(70,{newFilter:e});const t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some((i=>{const n=this.getTextForColumn(i,e);return(0,o._exists)(n)&&n.indexOf(t)>=0}))}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassMatcher(e,t){let i;e?(this.checkGenerateAggText(t),i=t.quickFilterAggregateText):i=this.getAggText(t);const{quickFilterParts:n,matcher:r}=this;return r(n,i)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let i=this.beans.filterValueSvc.getValue(e,t);const n=e.getColDef();if(n.getQuickFilterText){const o=(0,r._addGridCommonParams)(this.gos,{value:i,node:t,data:t.data,column:e,colDef:n});i=n.getQuickFilterText(o)}return(0,o._exists)(i)?i.toString().toUpperCase():null}getAggText(e){const t=[];return this.colsToUse.forEach((i=>{const n=this.getTextForColumn(i,e);(0,o._exists)(n)&&t.push(n)})),t.join("\n")}}t.QuickFilterService=a},5626:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FocusService=void 0;const n=i(9853),r=i(8731),o=i(6257),s=i(7274),a=i(3534),l=i(1323),c=i(3990),d=i(7632),u=i(1502),h=i(2331),p=i(4422);class f extends r.BeanStub{constructor(){super(...arguments),this.beanName="focusSvc"}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc((0,h._registerKeyboardFocusEvents)(this.beans))}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCell||this.isDomDataMissingInHierarchy((0,s._getActiveDomElement)(this.beans),d.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCell}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||this.isDomDataMissingInHierarchy((0,s._getActiveDomElement)(this.beans),a.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeader}isDomDataMissingInHierarchy(e,t){let i=e;for(;i;){if((0,s._getDomData)(this.gos,i,t))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCell}shouldRestoreFocus(e){return!!this.isCellRestoreFocused(e)&&(setTimeout((()=>{this.restoredFocusedCell=null}),0),!0)}clearRestoreFocus(){this.restoredFocusedCell=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(e,t){this.awaitRestoreFocusedCell=!0,setTimeout((()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(e),t())}))}isCellRestoreFocused(e){return null!=this.restoredFocusedCell&&("cellSpan"in e?e.doesSpanContain(this.restoredFocusedCell):(0,o._areCellsEqual)(e,this.restoredFocusedCell))}setRestoreFocusedCell(e){"react"===this.beans.frameworkOverrides.renderingEngine&&(this.restoredFocusedCell=e)}getFocusEventParams(e){const{rowIndex:t,rowPinned:i,column:n}=e,r={rowIndex:t,rowPinned:i,column:n,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i});return o&&(r.isFullWidthCell=o.isFullWidth()),r}clearFocusedCell(){if(this.restoredFocusedCell=null,null==this.focusedCell)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){const{column:t,rowIndex:i,rowPinned:n,forceBrowserFocus:r=!1,preventScrollOnBrowserFocus:o=!1}=e,s=this.colModel.getCol(t);s?(this.focusedCell={rowIndex:i,rowPinned:(0,p._makeNull)(n),column:s},this.eventSvc.dispatchEvent({type:"cellFocused",...this.getFocusEventParams(this.focusedCell),forceBrowserFocus:r,preventScrollOnBrowserFocus:o})):this.focusedCell=null}isCellFocused(e){return null!=this.focusedCell&&(0,o._areCellsEqual)(e,this.focusedCell)}isRowNodeFocused(e){return this.isRowFocused(e.rowIndex,e.rowPinned)}isHeaderWrapperFocused(e){if(null==this.focusedHeader)return!1;const{column:t,rowCtrl:{rowIndex:i,pinned:n}}=e,{column:r,headerRowIndex:o}=this.focusedHeader;return t===r&&i===o&&n==r.getPinned()}focusHeaderPosition(e){if((0,h._isHeaderFocusSuppressed)(this.beans))return!1;const{direction:t,fromTab:i,allowUserOverride:n,event:r,fromCell:o,rowWithoutSpanValue:s}=e;let{headerPosition:a}=e;if(o&&this.filterManager?.isAdvFilterHeaderActive())return this.focusAdvancedFilter(a);if(n){const e=this.focusedHeader,n=(0,l.getFocusHeaderRowCount)(this.beans);if(i){const i=this.gos.getCallback("tabToNextHeader");i&&(a=this.getHeaderPositionFromUserFunc({userFunc:i,direction:t,currentPosition:e,headerPosition:a,headerRowCount:n}))}else{const t=this.gos.getCallback("navigateToNextHeader");if(t&&r){a=t({key:r.key,previousHeaderPosition:e,nextHeaderPosition:a,headerRowCount:n,event:r})}}}return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:t,event:r,fromCell:o,rowWithoutSpanValue:s})}focusHeaderPositionFromUserFunc(e){if((0,h._isHeaderFocusSuppressed)(this.beans))return!1;const{userFunc:t,headerPosition:i,direction:n,event:r}=e,o=this.focusedHeader,s=(0,l.getFocusHeaderRowCount)(this.beans),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:n,currentPosition:o,headerPosition:i,headerRowCount:s});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:n,event:r})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:i,currentPosition:n,headerPosition:r,headerRowCount:o}=e,s=t({backwards:"Before"===i,previousHeaderPosition:n,nextHeaderPosition:r,headerRowCount:o});return!0===s?n:!1===s?null:s}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:i,fromCell:n,rowWithoutSpanValue:r,event:o}=e,{column:s,headerRowIndex:a}=t,{filterManager:l,ctrlsSvc:c,headerNavigation:d}=this.beans;if(-1===a)return l?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:s,event:o});d?.scrollToColumn(s,i);const u=c.getHeaderRowContainerCtrl(s.getPinned()),h=u?.focusHeader(t.headerRowIndex,s,o)||!1;return d&&h&&(null!=r||n)&&(d.currentHeaderRowWithoutSpan=r??-1),h}focusFirstHeader(){if(this.overlays?.isExclusive()&&this.focusOverlay())return!0;let e=this.visibleCols.allCols[0];if(!e)return!1;const{colGroupSvc:t}=this.beans;t&&e.getParent()&&(e=t.getColGroupAtLevel(e,0));const i=(0,c.getHeaderIndexToFocus)(e,0);return this.focusHeaderPosition({headerPosition:i,rowWithoutSpanValue:0})}focusLastHeader(e){if(this.overlays?.isExclusive()&&this.focusOverlay(!0))return!0;const t=(0,l.getFocusHeaderRowCount)(this.beans)-1,i=(0,u._last)(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:i},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return null!=this.focusedCell&&(this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===(0,p._makeNull)(t))}focusOverlay(e){const t=this.overlays?.isVisible()&&this.overlays.eWrapper?.getGui();return!!t&&(0,h._focusInto)(t,e)}focusGridView(e){const{backwards:t=!1,canFocusOverlay:i=!0,event:r}=e;if(this.overlays?.isExclusive())return i&&this.focusOverlay(t);if((0,h._isCellFocusSuppressed)(this.beans))return t&&!(0,h._isHeaderFocusSuppressed)(this.beans)?this.focusLastHeader():!(!i||!this.focusOverlay(t))||!t&&(0,h._focusNextGridCoreContainer)(this.beans,t);const s=t?(0,o._getLastRow)(this.beans):(0,o._getFirstRow)(this.beans);if(s){const i=e.column??this.focusedHeader?.column,{rowIndex:a,rowPinned:l}=s,c=(0,o._getRowNode)(this.beans,s);if(!i||!c||null==a)return!1;if(i.isSuppressNavigable(c)){const e=this.gos.get("enableRtl");let t;return t=r&&r.key!==n.KeyCode.TAB?r.key:e?n.KeyCode.LEFT:n.KeyCode.RIGHT,this.beans.navigation?.navigateToNextCell(null,t,{rowIndex:a,column:i,rowPinned:l||null},!0),!0}if(this.navigation?.ensureCellVisible({rowIndex:a,column:i,rowPinned:l}),t){const e=this.rowRenderer.getRowByPosition(s);if(e?.isFullWidth()&&this.navigation?.tryToFocusFullWidthRow(s,t))return!0}return this.setFocusedCell({rowIndex:a,column:i,rowPinned:(0,p._makeNull)(l),forceBrowserFocus:!0}),this.beans.rangeSvc?.setRangeToCell({rowIndex:a,rowPinned:l,column:i}),!0}return!(!i||!this.focusOverlay(t))||!(!t||!this.focusLastHeader())}focusAdvancedFilter(e){return this.advFilterFocusColumn=e?.column,this.beans.advancedFilter?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(e,t){const i=(t?void 0:this.advFilterFocusColumn)??this.visibleCols.allCols?.[0];return e?this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:(0,l.getFocusHeaderRowCount)(this.beans)-1}}):this.focusGridView({column:i})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}}t.FocusService=f},1657:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridCoreCreator=t.createGrid=t._getGlobalGridOption=t.provideGlobalGridOptions=void 0;const n=i(6433),r=i(2342),o=i(3943),s=i(1678),a=i(1978),l=i(2132),c=i(4422),d=i(6996),u=i(7764),h=i(6511);class p{static applyGlobalGridOptions(e){if(!p.gridOptions)return{...e};let t={};return(0,d._mergeDeep)(t,p.gridOptions,!0,!0),"deep"===p.mergeStrategy?(0,d._mergeDeep)(t,e,!0,!0):t={...t,...e},p.gridOptions.context&&(t.context=p.gridOptions.context),e.context&&("deep"===p.mergeStrategy&&t.context&&(0,d._mergeDeep)(e.context,t.context,!0,!0),t.context=e.context),t}}p.gridOptions=void 0,p.mergeStrategy="shallow",t.provideGlobalGridOptions=function(e,t="shallow"){p.gridOptions=e,p.mergeStrategy=t},t._getGlobalGridOption=function(e){return p.gridOptions?.[e]},t.createGrid=function(e,t,i){if(!t)return(0,u._error)(11),{};const n=i;let r;if(!n?.setThemeOnGridDiv){const t=document.createElement("div");t.style.height="100%",e.appendChild(t),e=t,r=()=>e.remove()}return(new g).create(e,t,(t=>{const i=new s.GridComp(e);t.createBean(i)}),void 0,i,r)};let f=1;class g{create(e,t,i,s,a,l){const c=p.applyGlobalGridOptions(t),d=c.gridId??String(f++),u=c.rowModelType??"clientSide",h=this.getRegisteredModules(a,d,u),g=this.createBeansList(u,h,d),m=this.createProvidedBeans(e,c,a);if(!g)return;const v={providedBeanInstances:m,beanClasses:g,gridId:d,beanInitComparator:o.gridBeanInitComparator,beanDestroyComparator:o.gridBeanDestroyComparator,derivedBeans:[n.createGridApi],destroyCallback:l},b=new r.Context(v);return this.registerModuleFeatures(b,h),i(b),b.getBean("syncSvc").start(),s&&s(b),b.getBean("gridApi")}getRegisteredModules(e,t,i){return(0,l._registerModule)(a.CommunityCoreModule,void 0),e?.modules?.forEach((e=>(0,l._registerModule)(e,t))),(0,l._getRegisteredModules)(t,i)}registerModuleFeatures(e,t){const i=e.getBean("registry"),n=e.getBean("apiFunctionSvc");t.forEach((e=>{i.registerModule(e);const t=e.apiFunctions;if(t){Object.keys(t).forEach((e=>{n?.addFunction(e,t[e])}))}}))}createProvidedBeans(e,t,i){let n=i?i.frameworkOverrides:null;(0,c._missing)(n)&&(n=new h.VanillaFrameworkOverrides);const r={gridOptions:t,eGridDiv:e,globalListener:i?i.globalListener:null,globalSyncListener:i?i.globalSyncListener:null,frameworkOverrides:n};return i&&i.providedBeanInstances&&Object.assign(r,i.providedBeanInstances),r}createBeansList(e,t,i){const n={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"}[e];if(!n)return void(0,u._logPreInitErr)(201,{rowModelType:e},`Unknown rowModelType ${e}.`);if(!(0,l._isModuleRegistered)(n,i,e))return void(0,u._logPreInitErr)(200,{reasonOrId:`rowModelType = '${e}'`,moduleName:n,gridScoped:(0,l._areModulesGridScoped)(),gridId:i,rowModelType:e},`Missing module ${n}Module for rowModelType ${e}. \nIf upgrading from before v33, see ${u.baseDocLink}/upgrading-to-ag-grid-33/#changes-to-modules/`);const r=new Set;return t.forEach((e=>e.beans?.forEach((e=>r.add(e))))),Array.from(r)}}t.GridCoreCreator=g},736:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractFakeScrollComp=void 0;const n=i(2612),r=i(8667),o=i(3507),s=i(2043),a=i(8020);class l extends a.Component{constructor(e,t){super(),this.direction=t,this.eViewport=a.RefPlaceholder,this.eContainer=a.RefPlaceholder,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",(0,r._isMacOsUserAgent)()||(0,r._isIOSUserAgent)())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=(0,r._isInvisibleScrollbar)(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),i=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),(0,n._requestAnimationFrame)(this.beans,(()=>this.setScrollVisible()))}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout((()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=0}),400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;(0,s._waitUntil)((()=>(0,o._isVisible)(t)),(()=>this.setScrollPosition(e)),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}}t.AbstractFakeScrollComp=l},2218:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CenterWidthFeature=void 0;const n=i(8731),r=i(7274);class o extends n.BeanStub{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=(0,r._isDomLayout)(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:i}=this.beans,n=t.bodyWidth,o=t.getColsLeftWidth(),s=t.getDisplayedColumnsRightWidth();let a;if(e)a=n+o+s;else if(a=n,this.addSpacer){0===(this.gos.get("enableRtl")?o:s)&&i.verticalScrollShowing&&(a+=i.getScrollbarWidth())}this.callback(a)}}t.CenterWidthFeature=o},335:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FakeHScrollSelector=t.FakeHScrollComp=void 0;const n=i(3507),r=i(8020),o=i(736),s=i(2218);class a extends o.AbstractFakeScrollComp{wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}constructor(){super('<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>\n        </div>',"horizontal"),this.eLeftSpacer=r.RefPlaceholder,this.eRightSpacer=r.RefPlaceholder,this.setScrollVisibleDebounce=0}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new s.CenterWidthFeature((e=>this.eContainer.style.width=`${e}px`))),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.beans.pinnedRowModel?.getPinnedBottomTotalHeight()??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,r=this.scrollVisibleSvc.getScrollbarWidth();i&&(t+=r),(0,n._setFixedWidth)(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=r);let o=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(o+=r),(0,n._setFixedWidth)(this.eLeftSpacer,o),this.eLeftSpacer.classList.toggle("ag-scroller-corner",o<=r)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),r=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,o=i?0:0===r&&t?16:r,s=()=>{this.setScrollVisibleDebounce=0,this.addOrRemoveCssClass("ag-scrollbar-invisible",t),(0,n._setFixedHeight)(this.getGui(),o),(0,n._setFixedHeight)(this.eViewport,o),(0,n._setFixedHeight)(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(s,100):s()}getScrollPosition(){return(0,n._getScrollLeft)(this.eViewport,this.enableRtl)}setScrollPosition(e){(0,n._isVisible)(this.eViewport)||this.attemptSettingScrollPosition(e),(0,n._setScrollLeft)(this.eViewport,e,this.enableRtl)}}t.FakeHScrollComp=a,t.FakeHScrollSelector={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:a}},6070:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FakeVScrollSelector=t.FakeVScrollComp=void 0;const n=i(3507),r=i(736),o=i(9622);class s extends r.AbstractFakeScrollComp{constructor(){super('<div class="ag-body-vertical-scroll" aria-hidden="true">\n            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">\n                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>\n            </div>\n        </div>',"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new o.SetHeightFeature(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,i=this.invisibleScrollbar,r=t&&e.getScrollbarWidth()||0,o=0===r&&i?16:r;this.addOrRemoveCssClass("ag-scrollbar-invisible",i),(0,n._setFixedWidth)(this.getGui(),o),(0,n._setFixedWidth)(this.eViewport,o),(0,n._setFixedWidth)(this.eContainer,o),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const t=e.getGridBodyCtrl().eBodyViewport,i=this.getScrollPosition(),n=t.scrollTop;i!=n&&this.setScrollPosition(n,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){t||(0,n._isVisible)(this.eViewport)||this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}}t.FakeVScrollComp=s,t.FakeVScrollSelector={selector:"AG-FAKE-VERTICAL-SCROLL",component:s}},2006:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridBodySelector=t.GridBodyComp=void 0;const n=i(7274),r=i(8791),o=i(9360),s=i(5230),a=i(3507),l=i(8020),c=i(335),d=i(6070),u=i(520),h=i(4633);function p(e,t){return t.map((t=>{const i=`e${t[0].toUpperCase()+t.substring(1)}RowContainer`;return e[i]={name:t},`<ag-row-container name="${t}" data-ref="${i}"></ag-row-container>`})).join("")}class f extends l.Component{constructor(){super(...arguments),this.eGridRoot=l.RefPlaceholder,this.eBodyViewport=l.RefPlaceholder,this.eStickyTop=l.RefPlaceholder,this.eStickyBottom=l.RefPlaceholder,this.eTop=l.RefPlaceholder,this.eBottom=l.RefPlaceholder,this.eBody=l.RefPlaceholder}postConstruct(){const{overlays:e,rangeSvc:t}=this.beans,i=e?.getOverlayWrapperSelector(),{paramsMap:l,template:f}=function(e){const t={};return{paramsMap:t,template:`<div class="ag-root ag-unselectable" data-ref="eGridRoot">\n        <ag-header-root></ag-header-root>\n        <div class="ag-floating-top" data-ref="eTop" role="presentation">\n            ${p(t,["topLeft","topCenter","topRight","topFullWidth"])}\n        </div>\n        <div class="ag-body" data-ref="eBody" role="presentation">\n            <div class="ag-body-viewport" data-ref="eBodyViewport" role="presentation">\n            ${p(t,["left","center","right","fullWidth"])}\n            </div>\n            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>\n        </div>\n        <div class="ag-sticky-top" data-ref="eStickyTop" role="presentation">\n            ${p(t,["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}\n        </div>\n        <div class="ag-sticky-bottom" data-ref="eStickyBottom" role="presentation">\n            ${p(t,["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}\n        </div>\n        <div class="ag-floating-bottom" data-ref="eBottom" role="presentation">\n            ${p(t,["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        ${e?"<ag-overlay-wrapper></ag-overlay-wrapper>":""}\n    </div>`}}(!!i);this.setTemplate(f,[...i?[i]:[],c.FakeHScrollSelector,d.FakeVScrollSelector,r.GridHeaderSelector,h.RowContainerSelector],l);const g=(e,t)=>{const i=`${e}px`;t.style.minHeight=i,t.style.height=i},m={setRowAnimationCssOnBodyViewport:(e,t)=>this.setRowAnimationCssOnBodyViewport(e,t),setColumnCount:e=>(0,s._setAriaColCount)(this.getGui(),e),setRowCount:e=>(0,s._setAriaRowCount)(this.getGui(),e),setTopHeight:e=>g(e,this.eTop),setBottomHeight:e=>g(e,this.eBottom),setTopDisplay:e=>this.eTop.style.display=e,setBottomDisplay:e=>this.eBottom.style.display=e,setStickyTopHeight:e=>this.eStickyTop.style.height=e,setStickyTopTop:e=>this.eStickyTop.style.top=e,setStickyTopWidth:e=>this.eStickyTop.style.width=e,setStickyBottomHeight:e=>{this.eStickyBottom.style.height=e,this.eStickyBottom.classList.toggle("ag-invisible","0px"===e)},setStickyBottomBottom:e=>this.eStickyBottom.style.bottom=e,setStickyBottomWidth:e=>this.eStickyBottom.style.width=e,setColumnMovingCss:(e,t)=>this.addOrRemoveCssClass(e,t),updateLayoutClasses:(e,t)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach((e=>{e.toggle(o.LayoutCssClasses.AUTO_HEIGHT,t.autoHeight),e.toggle(o.LayoutCssClasses.NORMAL,t.normal),e.toggle(o.LayoutCssClasses.PRINT,t.print)})),this.addOrRemoveCssClass(o.LayoutCssClasses.AUTO_HEIGHT,t.autoHeight),this.addOrRemoveCssClass(o.LayoutCssClasses.NORMAL,t.normal),this.addOrRemoveCssClass(o.LayoutCssClasses.PRINT,t.print)},setAlwaysVerticalScrollClass:(e,t)=>this.eBodyViewport.classList.toggle(u.CSS_CLASS_FORCE_VERTICAL_SCROLL,t),registerBodyViewportResizeListener:e=>{const t=(0,a._observeResize)(this.beans,this.eBodyViewport,e);this.addDestroyFunc((()=>t()))},setPinnedTopBottomOverflowY:e=>this.eTop.style.overflowY=this.eBottom.style.overflowY=e,setCellSelectableCss:(e,t)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach((i=>i.classList.toggle(e,t)))},setBodyViewportWidth:e=>this.eBodyViewport.style.width=e,setGridRootRole:e=>(0,s._setAriaRole)(this.eGridRoot,e)};this.ctrl=this.createManagedBean(new u.GridBodyCtrl),this.ctrl.setComp(m,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(t&&(0,n._isCellSelectionEnabled)(this.gos)||(0,n._isMultiRowSelection)(this.gos))&&(0,s._setAriaMultiSelectable)(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){const i=this.eBodyViewport.classList;i.toggle("ag-row-animation",t),i.toggle("ag-row-no-animation",!t)}}t.GridBodyComp=f,t.GridBodySelector={selector:"AG-GRID-BODY",component:f}},520:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridBodyCtrl=t.CSS_CLASS_FORCE_VERTICAL_SCROLL=void 0;const n=i(8731),r=i(7274),o=i(2612),s=i(9360),a=i(8667),l=i(3507),c=i(5496),d=i(8399),u=i(8115);t.CSS_CLASS_FORCE_VERTICAL_SCROLL="ag-force-vertical-scroll";class h extends n.BeanStub{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,i,n,r,o,a){this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=n,this.eBottom=r,this.eStickyTop=o,this.eStickyBottom=a,this.eCenterColsViewport=i.querySelector(`.${(0,u._getRowViewportClass)("center")}`),this.eFullWidthContainer=i.querySelector(`.${(0,u._getRowContainerClass)("fullWidth")}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${(0,u._getRowContainerClass)("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=a.querySelector(`.${(0,u._getRowContainerClass)("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",(e=>this.setCellTextSelection(e.currentValue))),this.createManagedBean(new s.LayoutFeature(this.comp)),this.scrollFeature=this.createManagedBean(new c.GridBodyScrollFeature(this.eBodyViewport)),this.beans.rowDragSvc?.setupRowDrag(this.eBodyViewport,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([n,i,r,o,a]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvFilterHeaderComp(n),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t}),this.addManagedPropertyListener("treeData",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const i=`calc(100% + ${(t&&e.getScrollbarWidth()||0)+((0,a._isInvisibleScrollbar)()?16:0)}px)`;(0,o._requestAnimationFrame)(this.beans,(()=>this.comp.setBodyViewportWidth(i))),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t}=this;let i=this.gos.get("treeData");if(!i){const n=t.isPivotMode();i=(e?e.columns.length:0)>=(n?2:1)}this.comp.setGridRootRole(i?"treegrid":"grid")}addFocusListeners(e){e.forEach((e=>{this.addManagedElementListeners(e,{focusin:t=>{const{target:i}=t,n=(0,l._isElementChildOfClass)(i,"ag-root",e);e.classList.toggle("ag-has-focus",!n)},focusout:t=>{const{target:i,relatedTarget:n}=t,r=e.contains(n),o=(0,l._isElementChildOfClass)(n,"ag-root",e);(0,l._isElementChildOfClass)(i,"ag-root",e)||r&&!o||e.classList.remove("ag-has-focus")}})}))}setColumnMovingCss(e){this.comp.setColumnMovingCss("ag-column-moving",e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss("ag-selectable",e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){this.beans.editSvc?.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){const e=(this.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.filterManager?.getHeaderRowCount()??0),{rowModel:t}=this.beans,i=t.isLastRowIndexKnown()?t.getRowCount():-1,n=-1===i?-1:e+i;this.comp.setRowCount(n)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),i=e?t.CSS_CLASS_FORCE_VERTICAL_SCROLL:null,n=(0,r._isDomLayout)(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(i,e),e||n&&(0,l._isVerticalScrollShowing)(this.eBodyViewport)}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let i=t.sizesMeasured;const n=()=>{const t=i&&(0,r._isAnimateRows)(this.gos)&&!e.stretching,n=t?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(n,t)};n(),this.addManagedEventListeners({heightScaleChanged:n}),this.addManagedPropertyListener("animateRows",n),this.addManagedEventListeners({gridStylesChanged:()=>{!i&&t.sizesMeasured&&(i=!0,n())}})}addBodyViewportListener(){const{popupSvc:e,touchSvc:t}=this.beans,i=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:i}),t?.mockBodyContextMenu(this,i),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this,e)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:i,shiftKey:n}=e;(n||Math.abs(t)>Math.abs(i))&&(0,d._isEventFromThisGrid)(this.gos,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaX:t,deltaY:i,shiftKey:n}=e,r=n||Math.abs(t)>Math.abs(i),o=e.target;r?(this.eStickyTopFullWidthContainer.contains(o)||this.eStickyBottomFullWidthContainer.contains(o))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(i))}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;if(this.gos.get("preventDefaultOnContextMenu")){(e||i).preventDefault()}const{target:n}=e||t;n!==this.eBodyViewport&&n!==this.ctrlsSvc.get("center").eViewport||this.beans.contextMenuSvc?.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody,source:"ui"})}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&e?.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){const{pinnedRowModel:e}=this,t=e?.getPinnedTopTotalHeight()??0,i=e?.getPinnedBottomTotalHeight()??0;this.comp.setTopHeight(t),this.comp.setBottomHeight(i),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(e){const e=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${e}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${e}px)`)}else this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%")}setStickyTopOffsetTop(){const e=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(this.filterManager?.getHeaderHeight()??0),t=this.pinnedRowModel?.getPinnedTopTotalHeight()??0;let i=0;e>0&&(i+=e),t>0&&(i+=t),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){const{pinnedRowModel:e,scrollVisibleSvc:t,comp:i}=this,n=(e?.getPinnedBottomTotalHeight()??0)+(t.horizontalScrollShowing&&t.getScrollbarWidth()||0);i.setStickyBottomBottom(`${n}px`)}}t.GridBodyCtrl=h},5496:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridBodyScrollFeature=void 0;const n=i(8731),r=i(7274),o=i(8667),s=i(3507),a=i(2043),l=i(7764);var c;!function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal"}(c||(c={}));const d="Viewport",u="fakeVScrollComp",h=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"];class p extends n.BeanStub{wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.scrollTimer=0,this.needsRefreshedScrollPosition=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=(0,a._debounce)(this,(()=>this.lastScrollSource[c.Horizontal]=null),150),this.resetLastVScrollDebounced=(0,a._debounce)(this,(()=>this.lastScrollSource[c.Vertical]=null),150)}destroy(){super.destroy(),window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.requireUpdatedScrollPosition.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),gridSizeChanged:e}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,(e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()}))}requireUpdatedScrollPosition(){this.needsRefreshedScrollPosition=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,d)});for(const e of h){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?(0,a._debounce)(this,this.onVScroll.bind(this,d),100):this.onVScroll.bind(this,d),n=t?(0,a._debounce)(this,this.onVScroll.bind(this,u),100):this.onVScroll.bind(this,u);this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,n)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){null==this.centerRowsCtrl||(void 0===e&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...h,d]){if(this.lastScrollSource[c.Horizontal]===t)continue;const i=this.getViewportForSource(t);(0,s._setScrollLeft)(i,e,this.enableRtl)}}getViewportForSource(e){return e===d?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return null==this.lastScrollSource[t]?(t===c.Vertical?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,c.Horizontal))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(c.Horizontal,i,!0))return;const n=(0,s._getScrollLeft)(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(n),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,c.Vertical))return;let t;if(t=e===d?this.eBodyViewport.scrollTop:this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(c.Vertical,t,!0))return;const{animationFrameSvc:i}=this;i?.setScrollTop(t),this.nextScrollTop=t,e===d?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,!i||this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded(!0):i.schedule(),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(c.Horizontal),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===c.Horizontal?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout((()=>{this.scrollTimer=0,this.eventSvc.dispatchEvent({...t,type:"bodyScrollEnd"})}),150)}shouldBlockScrollUpdate(e,t,i=!1){return!(i&&!(0,o._isIOSUserAgent)())&&(e===c.Vertical?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t))}shouldBlockVerticalScroll(e){const t=(0,s._getInnerHeight)(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.eViewport;if(this.enableRtl&&(0,s._isRtlNegativeScroll)()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(c.Vertical)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll(d)}scrollGridIfNeeded(e=!1){const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.requireUpdatedScrollPosition(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){const i=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(c.Horizontal,e)&&(e=this.enableRtl&&(0,s._isRtlNegativeScroll)()?e>0?0:i:Math.min(Math.max(e,0),i)),(0,s._setScrollLeft)(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.requireUpdatedScrollPosition(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.needsRefreshedScrollPosition){const{lastOffsetHeight:e,lastScrollTop:t}=this;return{top:t,bottom:t+e}}this.needsRefreshedScrollPosition=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const{rowModel:i}=this.beans,n=i.getRowCount();let r=-1;for(let t=0;t<n;t++){const n=i.getRow(t);if("function"==typeof e){if(n&&e(n)){r=t;break}}else if(e===n||e===n.data){r=t;break}}r>=0&&this.ensureIndexVisible(r,t)}ensureIndexVisible(e,t){if((0,r._isDomLayout)(this.gos,"print"))return;const{rowModel:i}=this.beans,n=i.getRowCount();if("number"!=typeof e||e<0||e>=n)return void(0,l._warn)(88,{index:e});const o=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel"),{frameworkOverrides:s,pagination:a,pageBounds:c,rowContainerHeight:d,rowRenderer:u}=this.beans;s.wrapIncoming((()=>{o||a?.goToPageWithIndex(e);const n=this.ctrlsSvc.getGridBodyCtrl(),r=n.stickyTopHeight,s=n.stickyBottomHeight,l=i.getRow(e);let h;do{const e=l.rowTop,i=l.rowHeight,n=c.getPixelOffset(),o=l.rowTop-n,a=o+l.rowHeight,p=this.getVScrollPosition(),f=d.divStretchOffset,g=p.top+f,m=p.bottom+f,v=m-g,b=d.getScrollPositionForPixel(o),y=d.getScrollPositionForPixel(a-v),w=Math.min((b+y)/2,o);let C=null;"top"===t?C=b:"bottom"===t?C=y:"middle"===t?C=w:g+r>o?C=b-r:m-s<a&&(C=y+s),null!==C&&(this.setVerticalScrollPosition(C),u.redraw({afterScroll:!0})),h=e!==l.rowTop||i!==l.rowHeight}while(h);this.animationFrameSvc?.flushAllFrames()}))}ensureColumnVisible(e,t="auto"){const{colModel:i,frameworkOverrides:n}=this.beans,r=i.getCol(e);if(!r)return;if(r.isPinned())return;if(!this.visibleCols.isColDisplayed(r))return;const o=this.getPositionedHorizontalScroll(r,t);n.wrapIncoming((()=>{null!==o&&this.centerRowsCtrl.setCenterViewportScrollLeft(o),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameSvc?.flushAllFrames()}))}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:n}=this.isColumnOutsideViewport(e),r=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),s=this.enableRtl;let a=(s?i:n)||r,l=s?n:i;"auto"!==t&&(a="start"===t,l="end"===t);const c="middle"===t;if(a||l||c){const{colLeft:t,colMiddle:i,colRight:n}=this.getColumnBounds(e);return c?i-o/2:a?s?n:t:s?t-o:n-o}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:n,colRight:r}=this.getColumnBounds(e),o=this.enableRtl;return{columnBeforeStart:o?t>r:i<r,columnAfterEnd:o?i<n:t>n}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleCols.bodyWidth,n=e.getActualWidth(),r=e.getLeft(),o=t?-1:1,s=t?i-r:r;return{colLeft:s,colMiddle:s+n/2*o,colRight:s+n*o}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft();return{start:t,end:e+t,width:e}}}t.GridBodyScrollFeature=p},8399:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._getNormalisedMousePosition=t._getCellPositionForEvent=t._isElementInThisGrid=t._isEventFromThisGrid=t._stampTopLevelGridCompWithGridInstance=void 0;const n=i(7274),r=i(814),o=i(4422),s="__ag_grid_instance";function a(e,t){let i=t;for(;i;){const t=i[s];if((0,o._exists)(t)){return t===e.gridInstanceId}i=i.parentElement}return!1}t._stampTopLevelGridCompWithGridInstance=function(e,t){t[s]=e.gridInstanceId},t._isEventFromThisGrid=function(e,t){return a(e,t.target)},t._isElementInThisGrid=a,t._getCellPositionForEvent=function(e,t){return(0,r._getCellCtrlForEventTarget)(e,t.target)?.getFocusedCellPosition()??null},t._getNormalisedMousePosition=function(e,t){const i=(0,n._isDomLayout)(e.gos,"normal"),r=t;let o,s;if(null!=r.clientX||null!=r.clientY?(o=r.clientX,s=r.clientY):(o=r.x,s=r.y),i){const t=e.ctrlsSvc.getScrollFeature(),i=t.getVScrollPosition();o+=t.getHScrollPosition().left,s+=i.top}return{x:o,y:s}}},4633:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowContainerSelector=t.RowContainerComp=void 0;const n=i(8430),r=i(3507),o=i(8020),s=i(8115);class a extends o.Component{constructor(e){super(),this.eViewport=o.RefPlaceholder,this.eContainer=o.RefPlaceholder,this.eSpannedContainer=o.RefPlaceholder,this.rowCompsNoSpan={},this.rowCompsWithSpan={},this.name=e?.name,this.options=(0,s._getRowContainerOptions)(this.name)}postConstruct(){this.setTemplate(function(e,t,i){const n=!!i.gos.get("enableCellSpan")&&!!t.getSpannedRowCtrls,r=`<div class="${(0,s._getRowContainerClass)(e)}" data-ref="eContainer" role="rowgroup"></div>`;if("center"===t.type||n){const t=(0,s._getRowSpanContainerClass)(e);return`<div class="ag-viewport ${(0,s._getRowViewportClass)(e)}" data-ref="eViewport" role="presentation">\n                ${r}\n                ${n?`<div class="ag-spanning-container ${t}" data-ref="eSpannedContainer" role="rowgroup"></div>`:""}\n            </div>`}return r}(this.name,this.options,this.beans));const e={setHorizontalScroll:e=>this.eViewport.scrollLeft=e,setViewportHeight:e=>this.eViewport.style.height=e,setRowCtrls:({rowCtrls:e})=>this.setRowCtrls(e),setSpannedRowCtrls:e=>this.setRowCtrls(e,!0),setDomOrder:e=>{this.domOrder=e},setContainerWidth:e=>{this.eContainer.style.width=e,this.eSpannedContainer&&(this.eSpannedContainer.style.width=e)},setOffsetTop:e=>{const t=`translateY(${e})`;this.eContainer.style.transform=t,this.eSpannedContainer&&(this.eSpannedContainer.style.transform=t)}};this.createManagedBean(new s.RowContainerCtrl(this.name)).setComp(e,this.eContainer,this.eSpannedContainer,this.eViewport)}destroy(){this.setRowCtrls([]),this.setRowCtrls([],!0),super.destroy(),this.lastPlacedElement=null}setRowCtrls(e,t){const{beans:i,options:r}=this,o=t?this.eSpannedContainer:this.eContainer,s=t?{...this.rowCompsWithSpan}:{...this.rowCompsNoSpan},a={};t?this.rowCompsWithSpan=a:this.rowCompsNoSpan=a,this.lastPlacedElement=null;const l=[];for(const t of e){const e=t.instanceId,o=s[e];let c;if(o)c=o,delete s[e];else{if(!t.rowNode.displayed)continue;c=new n.RowComp(t,i,r.type)}a[e]=c,l.push([c,!o])}this.removeOldRows(Object.values(s),o),this.addRowNodes(l,o)}addRowNodes(e,t){const{domOrder:i}=this;for(const[n,r]of e){const e=n.getGui();i?this.ensureDomOrder(e,t):r&&t.appendChild(e)}}removeOldRows(e,t){for(const i of e)t.removeChild(i.getGui()),i.destroy()}ensureDomOrder(e,t){(0,r._ensureDomOrder)(t,e,this.lastPlacedElement),this.lastPlacedElement=e}}t.RowContainerComp=a,t.RowContainerSelector={selector:"AG-ROW-CONTAINER",component:a}},8115:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowContainerCtrl=t._getRowContainerOptions=t._getRowSpanContainerClass=t._getRowContainerClass=t._getRowViewportClass=void 0;const n=i(8731),r=i(7274),o=i(3507),s=i(2218),a=i(5858),l=i(2625),c=i(9622),d=e=>e.topRowCtrls,u=e=>e.getStickyTopRowCtrls(),h=e=>e.getStickyBottomRowCtrls(),p=e=>e.bottomRowCtrls,f=e=>e.allRowCtrls,g=e=>e.getCtrls("top"),m=e=>e.getCtrls("center"),v=e=>e.getCtrls("bottom"),b={center:{type:"center",name:"center-cols",getRowCtrls:f,getSpannedRowCtrls:m},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:f,getSpannedRowCtrls:m},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:f,getSpannedRowCtrls:m},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:f},topCenter:{type:"center",name:"floating-top",getRowCtrls:d,getSpannedRowCtrls:g},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:d,getSpannedRowCtrls:g},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:d,getSpannedRowCtrls:g},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:d},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:u},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:u},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:u},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:u},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:h},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:h},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:h},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:h},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:p,getSpannedRowCtrls:v},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:p,getSpannedRowCtrls:v},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:p,getSpannedRowCtrls:v},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:p}};function y(e){return b[e]}t._getRowViewportClass=function(e){return`ag-${y(e).name}-viewport`},t._getRowContainerClass=function(e){const t=y(e);return t.container??`ag-${t.name}-container`},t._getRowSpanContainerClass=function(e){return`ag-${y(e).name}-spanned-cells-container`},t._getRowContainerOptions=y;const w=["center","left","right","fullWidth"],C=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],_=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],S=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],A=["stickyTopCenter","stickyTopLeft","stickyTopRight"],x=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],E=[...A,"stickyTopFullWidth",...x,"stickyBottomFullWidth"],T=["topCenter","topLeft","topRight","bottomCenter","bottomLeft","bottomRight","center","left","right",...A,...x];class D extends n.BeanStub{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=y(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],(()=>{this.viewportSizeFeature=this.createManagedBean(new a.ViewportSizeFeature(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})}))}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,i,n){this.comp=e,this.eContainer=t,this.eSpannedContainer=i,this.eViewport=n,this.createManagedBean(new l.RowContainerEventsFeature(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:r,rangeSvc:o}=this.beans,a=()=>this.onPinnedWidthChanged();this.forContainers(_,(()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(r?.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:a})})),this.forContainers(S,(()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(r?.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:a})})),this.forContainers(w,(()=>this.createManagedBean(new c.SetHeightFeature(this.eContainer,"center"===this.name?n:void 0)))),o&&this.forContainers(T,(()=>this.createManagedBean(o.createDragListenerFeature(this.eContainer)))),this.forContainers(C,(()=>this.createManagedBean(new s.CenterWidthFeature((e=>this.comp.setContainerWidth(`${e}px`)))))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){const{spannedRowRenderer:e,gos:t}=this.beans;this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{const t=this.options.getSpannedRowCtrls(e);t&&this.comp.setSpannedRowCtrls(t,!1)}})}listenOnDomOrder(){if(E.indexOf(this.name)>=0)return void this.comp.setDomOrder(!0);const e=()=>{const e=this.gos.get("ensureDomOrder"),t=(0,r._isDomLayout)(this.gos,"print");this.comp.setDomOrder(e||t)};this.addManagedPropertyListener("domLayout",e),e()}onDisplayedColumnsChanged(){this.forContainers(["center"],(()=>this.onHorizontalViewportChanged()))}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=t=>{e.dragging&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc((()=>this.eContainer.removeEventListener("touchmove",t)))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return(0,o._getInnerWidth)(this.eViewport)}getCenterViewportScrollLeft(){return(0,o._getScrollLeft)(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=(0,o._observeResize)(this.beans,this.eViewport,e);this.addDestroyFunc((()=>t()))}isViewportInTheDOMTree(){return(0,o._isInDOM)(this.eViewport)}getViewportScrollLeft(){return(0,o._getScrollLeft)(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||(0,o._isHorizontalScrollShowing)(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){(0,o._setScrollLeft)(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(null!=this.options.pinnedType)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||0===t.length)return void this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});const i=(0,r._isDomLayout)(this.gos,"print"),n=this.gos.get("embedFullWidthRows")||i,o=t.filter((e=>{const t=e.isFullWidth();return this.options.fullWidth?!n&&t:n||!t}));this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}}t.RowContainerCtrl=D},2625:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowContainerEventsFeature=void 0;const n=i(9853),r=i(8731),o=i(7274),s=i(814),a=i(7632),l=i(2979),c=i(6466),d=i(4009),u=i(8399);class h extends r.BeanStub{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.beans.touchSvc?.mockRowContextMenu(this)}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",(0,l._isEventSupported)("touchstart")?"touchstart":"mousedown"].forEach((e=>{const t=this.processMouseEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}))}processMouseEvent(e,t){if(!(0,u._isEventFromThisGrid)(this.gos,t)||(0,l._isStopPropagationForAgGrid)(t))return;const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);"contextmenu"===e?(i?.column&&i.dispatchCellContextMenuEvent(t),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(t,void 0,n,i)):(i&&i.onMouseEvent(e,t),n&&n.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:(0,s._getCellCtrlForEventTarget)(t,e),rowCtrl:(0,l._getCtrlForEventTarget)(t,e,a.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):n&&n.isFullWidth()&&this.processFullWidthRowKeyboardEvent(n,e,t))}processCellKeyboardEvent(e,t,i){const{rowNode:n,column:r,editing:o}=e;if(!(0,c._isUserSuppressingKeyboardEvent)(this.gos,i,n,r,o)&&"keydown"===t){!o&&this.beans.navigation?.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.editing),(0,c._isEventFromPrintableCharacter)(i)&&e.processCharacter(i)}"keydown"===t&&this.eventSvc.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){const{rowNode:r}=e,{focusSvc:o,navigation:s}=this.beans,a=o.getFocusedCell(),l=a&&a.column;if(!(0,c._isUserSuppressingKeyboardEvent)(this.gos,i,r,l,!1)){const r=i.key;if("keydown"===t)switch(r){case n.KeyCode.PAGE_HOME:case n.KeyCode.PAGE_END:case n.KeyCode.PAGE_UP:case n.KeyCode.PAGE_DOWN:s?.handlePageScrollingKey(i,!0);break;case n.KeyCode.UP:case n.KeyCode.DOWN:e.onKeyboardNavigate(i);break;case n.KeyCode.TAB:e.onTabKeyDown(i)}}"keydown"===t&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey)return;if(t)return;if(!(0,u._isEventFromThisGrid)(this.gos,e))return;const i=function(e){const{keyCode:t}=e;let i;switch(t){case 65:i=n.KeyCode.A;break;case 67:i=n.KeyCode.C;break;case 86:i=n.KeyCode.V;break;case 68:i=n.KeyCode.D;break;case 90:i=n.KeyCode.Z;break;case 89:i=n.KeyCode.Y;break;default:i=e.code}return i}(e),{clipboardSvc:r,undoRedo:o}=this.beans;return i===n.KeyCode.A?this.onCtrlAndA(e):i===n.KeyCode.C?this.onCtrlAndC(r,e):i===n.KeyCode.D?this.onCtrlAndD(r,e):i===n.KeyCode.V?this.onCtrlAndV(r,e):i===n.KeyCode.X?this.onCtrlAndX(r,e):i===n.KeyCode.Y?this.onCtrlAndY(o):i===n.KeyCode.Z?this.onCtrlAndZ(o,e):void 0}onCtrlAndA(e){const{beans:{rowModel:t,rangeSvc:i,selectionSvc:n},gos:r}=this;i&&(0,o._isCellSelectionEnabled)(r)&&t.isRowsToRender()?(0,d._selectAllCells)(this.beans):n&&n?.selectAllRowNodes({source:"keyboardSelectAll",selectAll:(0,o._getSelectAll)(r)}),e.preventDefault()}onCtrlAndC(e,t){if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);i?.editing||n?.editing||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);i?.editing||n?.editing||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);i?.editing||n?.editing||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){this.gos.get("undoRedoCellEditing")&&e&&(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){e?.redo("ui")}}t.RowContainerEventsFeature=h},9622:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SetHeightFeature=void 0;const n=i(8731);class r extends n.BeanStub{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,i=null!=t?`${t}px`:"";this.eContainer.style.height=i,this.eViewport&&(this.eViewport.style.height=i)}}t.SetHeightFeature=r},2865:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SetPinnedWidthFeature=void 0;const n=i(8731),r=i(3507);class o extends n.BeanStub{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[(this.isLeft?"left":"right")+"PinnedWidthChanged"]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;for(const i of this.elements)i&&((0,r._setDisplayed)(i,t),(0,r._setFixedWidth)(i,e))}}t.SetPinnedWidthFeature=o},8913:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollVisibleService=void 0;const n=i(8731),r=i(8667);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation:e}=this;e?.isActive()?e.executeLaterVMTurn((()=>{e.executeLaterVMTurn((()=>this.updateScrollVisibleImpl()))})):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const e=this.ctrlsSvc.get("center");if(!e||this.colAnimation?.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(null==this.scrollbarWidth){const e=this.gos.get("scrollbarWidth"),t="number"==typeof e&&e>=0?e:(0,r._getScrollbarWidth)();null!=t&&(this.scrollbarWidth=t,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}}t.ScrollVisibleService=o},5858:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ViewportSizeFeature=void 0;const n=i(8731),r=i(2612),o=i(3507);class s extends n.BeanStub{wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()})),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],(()=>{this.checkViewportAndScrolls()}))}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:i}=this,n=()=>{(0,r._requestAnimationFrame)(e,(()=>{this.onCenterViewportResized()}))};t.registerViewportResizeListener(n),i.registerBodyViewportResizeListener(n)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;e?.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const i=this.centerContainerCtrl.getCenterWidth();i!==this.centerWidth&&(this.centerWidth=i,t?.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.eBodyViewport,t=(0,o._getInnerHeight)(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}}t.ViewportSizeFeature=s},1678:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridComp=void 0;const n=i(2006),r=i(9360),o=i(3507),s=i(2043),a=i(8020),l=i(8332),c=i(7600);class d extends l.TabGuardComp{constructor(e){super(),this.gridBody=a.RefPlaceholder,this.sideBar=a.RefPlaceholder,this.pagination=a.RefPlaceholder,this.rootWrapperBody=a.RefPlaceholder,this.eGridDiv=e}postConstruct(){const e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:e=>this.addCssClass(e),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:e=>{this.getGui().style.userSelect=null!=e?e:"",this.getGui().style.webkitUserSelect=null!=e?e:""},setCursor:e=>{this.getGui().style.cursor=null!=e?e:""}},t=this.createManagedBean(new c.GridCtrl),i=t.getOptionalSelectors(),r=this.createTemplate(i),o=[n.GridBodySelector,...Object.values(i).filter((e=>!!e))];this.setTemplate(r,o),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:e=>t.focusInnerElement(e),forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:()=>!t.isFocusable()})}insertGridIntoDom(){const e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc((()=>{this.eGridDiv.removeChild(e),(0,s._logIfDebug)(this.gos,"Grid removed from DOM")}))}updateLayoutClasses(e,t){const i=this.rootWrapperBody.classList,{AUTO_HEIGHT:n,NORMAL:o,PRINT:s}=r.LayoutCssClasses,{autoHeight:a,normal:l,print:c}=t;i.toggle(n,a),i.toggle(o,l),i.toggle(s,c),this.addOrRemoveCssClass(n,a),this.addOrRemoveCssClass(o,l),this.addOrRemoveCssClass(s,c)}createTemplate(e){const t=e.gridHeaderDropZonesSelector?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",i=e.sideBarSelector?'<ag-side-bar data-ref="sideBar"></ag-side-bar>':"",n=e.statusBarSelector?"<ag-status-bar></ag-status-bar>":"",r=e.watermarkSelector?"<ag-watermark></ag-watermark>":"";return`<div class="ag-root-wrapper" role="presentation">\n                ${t}\n                <div class="ag-root-wrapper-body" data-ref="rootWrapperBody" role="presentation">\n                    <ag-grid-body data-ref="gridBody"></ag-grid-body>\n                    ${i}\n                </div>\n                ${n}\n                ${e.paginationSelector?'<ag-pagination data-ref="pagination"></ag-pagination>':""}\n                ${r}\n            </div>`}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){e||!this.pagination?.isDisplayed()?super.forceFocusOutOfContainer(e):this.pagination.forceFocusOutOfContainer(e)}getFocusableContainers(){const e=[this.gridBody];return[this.sideBar,this.pagination].forEach((t=>{t&&e.push(t)})),e.filter((e=>(0,o._isVisible)(e.getGui())))}}t.GridComp=d},7600:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridCtrl=void 0;const n=i(8731),r=i(8399),o=i(7274),s=i(9360),a=i(1502),l=i(3507),c=i(2331);class d extends n.BeanStub{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDrop:n,ctrlsSvc:o}=this.beans;n?.registerGridDropTarget((()=>this.eGui),this),(0,r._stampTopLevelGridCompWithGridInstance)(this.gos,t),this.createManagedBean(new s.LayoutFeature(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const a=(0,l._observeResize)(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc((()=>a())),o.register("gridCtrl",this)}isDetailGrid(){const e=(0,c._findTabbableParent)(this.getGui());return e?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){const e=this.beans;return{paginationSelector:e.pagination?.getPaginationSelector(),gridHeaderDropZonesSelector:e.registry.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:e.sideBar?.getSelector(),statusBarSelector:e.registry?.getSelector("AG-STATUS-BAR"),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:n}=this.getNextFocusableIndex(t,e);if(n<0||n>=t.length)return!1;if(0===n){if(i>0){const{visibleCols:e,focusSvc:t}=this.beans,i=e.allCols,n=(0,a._last)(i);if(t.focusGridView({column:n,backwards:!0}))return!0}return!1}return this.focusContainer(t[n],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;const i=this.getFocusableContainers(),{focusSvc:n,visibleCols:r}=this.beans,o=r.allCols;if(e){if(i.length>1)return this.focusContainer((0,a._last)(i),e);const t=(0,a._last)(o);if(n.focusGridView({column:t,backwards:e}))return!0}if(0===this.gos.get("headerHeight")||(0,c._isHeaderFocusSuppressed)(this.beans)){if(n.focusGridView({column:o[0],backwards:e}))return!0;for(let t=1;t<i.length;t++)if((0,c._focusInto)(i[t].getGui(),e))return!0;return!1}return n.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){const t=this.view.getFocusableContainers(),{nextIndex:i,indexWithFocus:n}=this.getNextFocusableIndex(t,e);if(-1===n||i<0||i>=t.length)return;const r=t[i];r.setAllowFocus?.(!0),setTimeout((()=>{r.setAllowFocus?.(!1)}))}isFocusable(){const e=this.beans;return!(0,c._isCellFocusSuppressed)(e)||!(0,c._isHeaderFocusSuppressed)(e)||!!e.sideBar?.comp?.isDisplayed()}getNextFocusableIndex(e,t){const i=(0,o._getActiveDomElement)(this.beans),n=e.findIndex((e=>e.getGui().contains(i)));return{indexWithFocus:n,nextIndex:n+(t?-1:1)}}focusContainer(e,t){e.setAllowFocus?.(!0);const i=(0,c._focusInto)(e.getGui(),t,!1,!0);return e.setAllowFocus?.(!1),i}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}}t.GridCtrl=d},1978:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CommunityCoreModule=void 0;const n=i(3907),r=i(9875),o=i(4074),s=i(6924),a=i(6041),l=i(2986),c=i(2027),d=i(8997),u=i(5034),h=i(6869),p=i(8414),f=i(4110),g=i(1585),m=i(20),v=i(9024),b=i(8778),y=i(5626),w=i(8913),C=i(3888),_=i(8484),S=i(8078),A=i(4011),x=i(3705),E=i(928),T=i(2550),D=i(3003),M=i(6219),k=i(3433),P=i(5366),R=i(7109),I=i(557),O=i(6620),N=i(7711),L=i(6431),F=i(5736),$=i(7205);t.CommunityCoreModule={moduleName:"CommunityCore",version:$.VERSION,beans:[C.GridDestroyService,n.ApiFunctionService,f.Registry,g.UserComponentFactory,R.RowContainerHeightService,h.VisibleColsService,b.EventService,_.GridOptionsService,l.ColumnModel,D.PageBoundsService,T.PageBoundsListener,I.RowRenderer,F.ValueService,y.FocusService,v.Environment,w.ScrollVisibleService,m.CtrlsService,N.SyncService,d.ColumnNameService,u.ColumnViewportService],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:r.getGridId,destroy:r.destroy,isDestroyed:r.isDestroyed,getGridOption:r.getGridOption,setGridOption:r.setGridOption,updateGridOptions:r.updateGridOptions},dependsOn:[c.DataTypeModule,o.ColumnMoveModule,s.ColumnResizeModule,O.SortModule,S.ColumnHeaderCompModule,a.ColumnGroupModule,S.ColumnGroupHeaderCompModule,P.OverlayModule,L.ChangeDetectionModule,A.AnimationFrameModule,E.KeyboardNavigationModule,M.PinnedColumnModule,k.AriaModule,x.TouchModule,p.CellRendererFunctionModule,c.ColumnFlexModule,L.ExpressionModule]}},3888:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridDestroyService=void 0;const n=i(8731);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){if(this.destroyCalled)return;const{stateSvc:e,ctrlsSvc:t,context:i}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:e?.getState()??{}}),this.destroyCalled=!0,t.get("gridCtrl")?.destroyGridUi(),i.destroy(),super.destroy()}}t.GridDestroyService=r},5266:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.GRID_OPTION_DEFAULTS=void 0,t.GRID_OPTION_DEFAULTS={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"\t",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,rowNumbers:!1}},2891:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_GRID_OPTION_KEYS=void 0,t.INITIAL_GRID_OPTION_KEYS={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0}},8484:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridOptionsService=void 0;const n=i(8731),r=i(7968),o=i(5266),s=i(7274),a=i(5889),l=i(2132),c=i(2043),d=i(4422),u=i(7764);let h=0,p=0;class f extends n.BeanStub{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.gridInstanceId=p++,this.propEventSvc=new a.LocalEventService,this.globalEventHandlerFactory=e=>(t,i)=>{if(!this.isAlive())return;const n=r.ALWAYS_SYNC_GLOBAL_EVENTS.has(t);if(n&&!e||!n&&e)return;const o=(0,s._getCallbackForEvent)(t),a=this.gridOptions[o];"function"==typeof a&&this.beans.frameworkOverrides.wrapOutgoing((()=>{a(i)}))}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"gridOptionsUpdated"})}})}get(e){return this.gridOptions[e]??o.GRID_OPTION_DEFAULTS[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return(0,d._exists)(this.gridOptions[e])}mergeGridCommonParams(e){if(e){return t=>e(this.addGridCommonParams(t))}return e}updateGridOptions({options:e,force:t,source:i="api"}){const n={id:h++,properties:[]},r=[],{gridOptions:o,validation:s}=this;for(const a of Object.keys(e)){const l=e[a];s?.warnOnInitialPropertyUpdate(i,a);const c=t||"object"==typeof l&&"api"===i,d=o[a];if(c||d!==l){o[a]=l;const e={type:a,currentValue:l,previousValue:d,changeSet:n,source:i};r.push(e)}}s?.processGridOptions(this.gridOptions),n.properties=r.map((e=>e.type)),r.forEach((e=>{(0,c._logIfDebug)(this,`Updated property ${e.type} from`,e.previousValue," to ",e.currentValue),this.propEventSvc.dispatchEvent(e)}))}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addGridCommonParams(e){return e.api=this.api,e.context=this.gridOptionsContext,e}assertModuleRegistered(e,t){const i=Array.isArray(e)?e.some((e=>this.isModuleRegistered(e))):this.isModuleRegistered(e);return i||(0,u._error)(200,{...this.getModuleErrorParams(),moduleName:e,reasonOrId:t}),i}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:(0,l._areModulesGridScoped)(),rowModelType:this.get("rowModelType"),isUmd:(0,l._isUmd)()}}isModuleRegistered(e){return(0,l._isModuleRegistered)(e,this.gridId,this.get("rowModelType"))}}t.GridOptionsService=f},7274:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._isLegacyMenuEnabled=t._isSetFilterByDefault=t._getMasterSelects=t._getGroupSelectsDescendants=t._getSelectAll=t._getGroupSelection=t._getEnableSelectionWithoutKeys=t._isMultiRowSelection=t._getRowSelectionMode=t._getIsRowSelectable=t._getEnableDeselection=t._getEnableSelection=t._getFillHandle=t._isCellSelectionEnabled=t._getSuppressMultiRanges=t._isUsingNewCellSelectionAPI=t._isUsingNewRowSelectionAPI=t._getHideDisabledCheckboxes=t._getCheckboxLocation=t._getHeaderCheckbox=t._getCheckboxes=t._shouldUpdateColVisibilityAfterGroup=t._getMaxConcurrentDatasourceRequests=t._canSkipShowingRowGroup=t._getRowIdCallback=t._isGroupUseEntireRow=t._isGroupMultiAutoColumn=t._getGroupTotalRowCallback=t._getGrandTotalRow=t._getGroupAggFiltering=t._isColumnsSortingCoupledToGroup=t._isGroupRowsSticky=t._isAnimateRows=t._isNothingFocused=t._anchorElementToMouseMoveEvent=t._getPageBody=t._getActiveDomElement=t._getRootNode=t._getWindow=t._getDocument=t._setDomData=t._getDomData=t._getRowHeightAsNumber=t._getRowHeightForNode=t._shouldMaintainColumnOrder=t._isGetRowHeightFunction=t._isRowSelection=t._isDomLayout=t._isServerSideRowModel=t._isClientSideRowModel=void 0,t._addGridCommonParams=t._processOnChange=t._combineAttributesAndGridOptions=t._getCallbackForEvent=t._areAdditionalColumnMenuItemsEnabled=t._isColumnMenuAnchoringEnabled=void 0;const n=i(3507),r=i(4422),o=i(7764);function s(e,t){return e.get("rowModelType")===t}function a(e,t){return e.get("domLayout")===t}function l(e){return"function"==typeof e.get("getRowHeight")}function c(e){return!isNaN(e)&&"number"==typeof e&&isFinite(e)}function d(e){const{gos:t,eGridDiv:i}=e;let n=null;const o=t.get("getDocument");return o&&(0,r._exists)(o)?n=o():i&&(n=i.ownerDocument),n&&(0,r._exists)(n)?n:document}function u(e){return e.eGridDiv.getRootNode()}function h(e){return u(e).activeElement}function p(e){let t=null,i=null;try{t=d(e).fullscreenElement}catch(e){}finally{t||(t=u(e));const n=t.querySelector("body");i=n||(t instanceof ShadowRoot?t:t instanceof Document?t?.documentElement:t)}return i}function f(e){const t=e.get("rowSelection")??"single";if("string"==typeof t){const t=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return(!t||!i)&&(t?"enableDeselection":!i||"enableSelection")}return("singleRow"===t.mode||"multiRow"===t.mode)&&(t.enableClickSelection??!1)}function g(e){const t="beanName"in e&&"gos"===e.beanName?e.get("rowSelection"):e.rowSelection;if("string"==typeof t)switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(t?.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function m(e){const t=e.get("rowSelection");if("string"==typeof t){const t=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return t&&i?"filteredDescendants":t?"descendants":"self"}return"multiRow"===t?.mode?t.groupSelects:void 0}function v(e){return"legacy"===e.get("columnMenu")}t._isClientSideRowModel=function(e,t){return s(e,"clientSide")},t._isServerSideRowModel=function(e,t){return s(e,"serverSide")},t._isDomLayout=a,t._isRowSelection=function(e){return void 0!==g(e)},t._isGetRowHeightFunction=l,t._shouldMaintainColumnOrder=function(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")},t._getRowHeightForNode=function(e,t,i=!1,n){const{gos:r,environment:s}=e;if(null==n&&(n=s.getDefaultRowHeight()),l(r)){if(i)return{height:n,estimated:!0};const e={node:t,data:t.data},s=r.getCallback("getRowHeight")(e);if(c(s))return 0===s&&(0,o._warn)(23),{height:Math.max(1,s),estimated:!1}}if(t.detail&&r.get("masterDetail"))return function(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");if(c(t))return{height:t,estimated:!1};return{height:300,estimated:!1}}(r);const a=r.get("rowHeight");return{height:a&&c(a)?a:n,estimated:!1}},t._getRowHeightAsNumber=function(e){const{environment:t,gos:i}=e,n=i.get("rowHeight");if(!n||(0,r._missing)(n))return t.getDefaultRowHeight();const s=t.refreshRowHeightVariable();return-1!==s?s:((0,o._warn)(24),t.getDefaultRowHeight())},t._getDomData=function(e,t,i){const n=t[e.getDomDataKey()];return n?n[i]:void 0},t._setDomData=function(e,t,i,n){const o=e.getDomDataKey();let s=t[o];(0,r._missing)(s)&&(s={},t[o]=s),s[i]=n},t._getDocument=d,t._getWindow=function(e){return d(e).defaultView||window},t._getRootNode=u,t._getActiveDomElement=h,t._getPageBody=p,t._anchorElementToMouseMoveEvent=function(e,t,i){const r=e.getBoundingClientRect().height,o=function(e){const t=p(e);return t?.clientWidth??(window.innerHeight||-1)}(i)-2,s=function(e){const t=p(e);return t?.clientHeight??(window.innerHeight||-1)}(i)-2;if(!e.offsetParent)return;const a=(0,n._getElementRectWithOffset)(e.offsetParent),{clientY:l,clientX:c}=t;let u=l-a.top-r/2,h=c-a.left-10;const f=d(i),g=f.defaultView||window,m=g.pageYOffset||f.documentElement.scrollTop,v=g.pageXOffset||f.documentElement.scrollLeft;o>0&&h+e.clientWidth>o+v&&(h=o+v-e.clientWidth),h<0&&(h=0),s>0&&u+e.clientHeight>s+m&&(u=s+m-e.clientHeight),u<0&&(u=0),e.style.left=`${h}px`,e.style.top=`${u}px`},t._isNothingFocused=function(e){const t=d(e),i=h(e);return null===i||i===t.body},t._isAnimateRows=function(e){return!e.get("ensureDomOrder")&&e.get("animateRows")},t._isGroupRowsSticky=function(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||a(e,"print"))},t._isColumnsSortingCoupledToGroup=function(e){const t=e.get("autoGroupColumnDef");return!t?.comparator&&!e.get("treeData")},t._getGroupAggFiltering=function(e){const t=e.get("groupAggFiltering");return"function"==typeof t?e.getCallback("groupAggFiltering"):!0===t?()=>!0:void 0},t._getGrandTotalRow=function(e){return e.get("grandTotalRow")},t._getGroupTotalRowCallback=function(e){const t=e.get("groupTotalRow");return"function"==typeof t?e.getCallback("groupTotalRow"):()=>t??void 0},t._isGroupMultiAutoColumn=function(e){return e.exists("groupDisplayType")?"multipleColumns"===e.get("groupDisplayType"):e.get("groupHideOpenParents")},t._isGroupUseEntireRow=function(e,t){return!t&&"groupRows"===e.get("groupDisplayType")},t._getRowIdCallback=function(e){const t=e.getCallback("getRowId");return void 0===t?t:e=>{let i=t(e);return"string"!=typeof i&&((0,o._warn)(25,{id:i}),i=String(i)),i}},t._canSkipShowingRowGroup=function(e,t){const i=e.get("groupHideParentOfSingleChild");return!0===i||(!("leafGroupsOnly"!==i||!t.leafGroup)||(!!e.get("groupRemoveSingleChildren")||!(!e.get("groupRemoveLowestSingleChildren")||!t.leafGroup)))},t._getMaxConcurrentDatasourceRequests=function(e){const t=e.get("maxConcurrentDatasourceRequests");return t>0?t:void 0},t._shouldUpdateColVisibilityAfterGroup=function(e,t){const i=e.get("suppressGroupChangesColumnVisibility");if(!0===i)return!1;if(t&&"suppressHideOnGroup"===i)return!1;if(!t&&"suppressShowOnUngroup"===i)return!1;const n=e.get("suppressRowGroupHidesColumns");if(t&&!0===n)return!1;const r=e.get("suppressMakeColumnVisibleAfterUnGroup");return!(!t&&!0===r)},t._getCheckboxes=function(e){return e?.checkboxes??!0},t._getHeaderCheckbox=function(e){return"multiRow"===e?.mode&&(e.headerCheckbox??!0)},t._getCheckboxLocation=function(e){if("object"==typeof e)return e.checkboxLocation??"selectionColumn"},t._getHideDisabledCheckboxes=function(e){return e?.hideDisabledCheckboxes??!1},t._isUsingNewRowSelectionAPI=function(e){return"string"!=typeof e.get("rowSelection")},t._isUsingNewCellSelectionAPI=function(e){return void 0!==e.get("cellSelection")},t._getSuppressMultiRanges=function(e){const t=e.get("cellSelection");return void 0!==t?"boolean"!=typeof t&&(t?.suppressMultiRanges??!1):e.get("suppressMultiRangeSelection")},t._isCellSelectionEnabled=function(e){const t=e.get("cellSelection");return void 0!==t?!!t:e.get("enableRangeSelection")},t._getFillHandle=function(e){const t=e.get("cellSelection");return void 0!==t?"boolean"!=typeof t&&"fill"===t.handle?.mode?t.handle:void 0:{mode:"fill",setFillValue:e.get("fillOperation"),direction:e.get("fillHandleDirection"),suppressClearOnFillReduction:e.get("suppressClearOnFillReduction")}},t._getEnableSelection=function(e){const t=f(e);return!0===t||"enableSelection"===t},t._getEnableDeselection=function(e){const t=f(e);return!0===t||"enableDeselection"===t},t._getIsRowSelectable=function(e){const t=e.get("rowSelection");return"string"==typeof t?e.get("isRowSelectable"):t?.isRowSelectable},t._getRowSelectionMode=g,t._isMultiRowSelection=function(e){return"multiRow"===g(e)},t._getEnableSelectionWithoutKeys=function(e){const t=e.get("rowSelection");return"string"==typeof t?e.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1},t._getGroupSelection=m,t._getSelectAll=function(e,t=!0){const i=e.get("rowSelection");return"object"!=typeof i?t?"all":void 0:"multiRow"===i.mode?i.selectAll:"all"},t._getGroupSelectsDescendants=function(e){const t=m(e);return"descendants"===t||"filteredDescendants"===t},t._getMasterSelects=function(e){const t=e.get("rowSelection");return"object"==typeof t&&t.masterSelects||"self"},t._isSetFilterByDefault=function(e){return e.isModuleRegistered("SetFilter")&&!e.get("suppressSetFilterByDefault")},t._isLegacyMenuEnabled=v,t._isColumnMenuAnchoringEnabled=function(e){return!v(e)},t._areAdditionalColumnMenuItemsEnabled=function(e){return"new"===e.get("columnMenu")},t._getCallbackForEvent=function(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)},t._combineAttributesAndGridOptions=function(e,t,i){"object"!=typeof e&&(e={});const n={...e};return i.forEach((e=>{const i=t[e];void 0!==i&&(n[e]=i)})),n},t._processOnChange=function(e,t){if(!e)return;const i={};let n=!1;if(Object.keys(e).forEach((t=>{i[t]=e[t],n=!0})),!n)return;const r={type:"gridOptionsChanged",options:i};t.dispatchEvent(r);const o={type:"componentStateChanged",...i};t.dispatchEvent(o)},t._addGridCommonParams=function(e,t){return e.addGridCommonParams(t)}},9860:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractHeaderCellComp=void 0;const n=i(8020);class r extends n.Component{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}}t.AbstractHeaderCellComp=r},3534:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractHeaderCellCtrl=t.DOM_DATA_KEY_HEADER_CTRL=void 0;const n=i(8731),r=i(7274),o=i(2612),s=i(5230),a=i(3507),l=i(2331),c=i(4422),d=i(9853),u=i(1295);let h=0;t.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";class p extends n.BeanStub{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.instanceId=e.getUniqueId()+"-"+h++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}shouldStopEventPropagation(e){const{headerRowIndex:t,column:i}=this.beans.focusSvc.focusedHeader,n=i.getDefinition(),o=n&&n.suppressHeaderKeyboardEvent;if(!(0,c._exists)(o))return!1;return!!o((0,r._addGridCommonParams)(this.gos,{colDef:n,column:i,headerRowIndex:t,event:e}))}getWrapperHasFocus(){return(0,r._getActiveDomElement)(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const e=this.column.getDefinition();if(!e)return;const{headerStyle:t}=e;let i;if("function"==typeof t){i=t(this.getHeaderClassParams())}else i=t;i&&this.comp.setUserStyles(i)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:i,compBean:n}=e,{beans:s}=this,l=e=>{if(!this.isAlive()||!n.isAlive())return;const{paddingTop:i,paddingBottom:c,borderBottomWidth:d,borderTopWidth:u}=(0,a._getElementSize)(this.eGui),h=i+c+d+u,p=t.offsetHeight+h;if(e<5){const i=(0,r._getDocument)(s);if(!i||!i.contains(t)||0==p)return void(0,o._requestAnimationFrame)(s,(()=>l(e+1)))}this.setColHeaderHeight(this.column,p)};let c,d=!1;const u=()=>{const e=this.column.isAutoHeaderHeight();e&&!d&&h(),!e&&d&&p()},h=()=>{d=!0,l(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),c=(0,a._observeResize)(this.beans,t,(()=>l(0)))},p=()=>{d=!1,c&&c(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),c=void 0};u(),n.addDestroyFunc((()=>p())),n.addManagedListeners(this.column,{widthChanged:()=>d&&l(0)}),n.addManagedEventListeners({sortChanged:()=>{d&&window.setTimeout((()=>l(0)))}}),i&&i(u)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:i,eGui:n}=this;e&&t&&n&&((0,u.refreshFirstAndLastStyles)(e,t,i.visibleCols),(0,s._setAriaColIndex)(n,i.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=(0,l._isHeaderFocusSuppressed)(this.beans);this.eGui&&(0,a._addOrRemoveAttribute)(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){const t=(0,r._getActiveDomElement)(this.beans),i=e.key===d.KeyCode.LEFT||e.key===d.KeyCode.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey)return;if((this.isResizing||i)&&(e.preventDefault(),e.stopImmediatePropagation()),!i)return;const n=e.key===d.KeyCode.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const t=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(t,e.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(n)}moveHeader(e){this.beans.colMoves?.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:i}=this.beans;return i?i.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:i}=this;let n=e.key===d.KeyCode.LEFT!==t.get("enableRtl");const r=i.getPinned(),o=t.get("enableRtl");return r&&o!==("right"===r)&&(n=!n),(n?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout((()=>{this.resizeFeature?.toggleColumnResizing(!1)}),150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case d.KeyCode.PAGE_DOWN:case d.KeyCode.PAGE_UP:case d.KeyCode.PAGE_HOME:case d.KeyCode.PAGE_END:t&&e.preventDefault()}}addDomData(e){const i=t.DOM_DATA_KEY_HEADER_CTRL,{eGui:n,gos:o}=this;(0,r._setDomData)(o,n,i,this),e.addDestroyFunc((()=>(0,r._setDomData)(o,n,i,null)))}focus(e){const{eGui:t}=this;return!!t&&(this.lastFocusEvent=e||null,t.focus(),!0)}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop?.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,i){const n=e??t,{menuSvc:r,gos:o}=this.beans;o.get("preventDefaultOnContextMenu")&&n.preventDefault(),r?.isHeaderContextMenuEnabled(i)&&r.showHeaderContextMenu(i,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:i}=this;e.isColumn?i.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):i.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}}t.AbstractHeaderCellCtrl=p},1906:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderCellComp=void 0;const n=i(5230),r=i(3507),o=i(8020),s=i(9860);class a extends s.AbstractHeaderCellComp{constructor(e){super('<div class="ag-header-cell" role="columnheader">\n            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>\n        </div>',e),this.eResize=o.RefPlaceholder,this.eHeaderCompWrapper=o.RefPlaceholder,this.headerCompVersion=0}postConstruct(){const e=this.getGui();var t,i;t="col-id",null!=(i=this.ctrl.column.getColId())&&""!=i?e.setAttribute(t,i):e.removeAttribute(t);const o={setWidth:t=>e.style.width=t,addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setUserStyles:t=>(0,r._addStylesToElement)(e,t),setAriaSort:t=>t?(0,n._setAriaSort)(e,t):(0,n._removeAriaSort)(e),setUserCompDetails:e=>this.setUserCompDetails(e),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(o,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0);const s=this.ctrl.getSelectAllGui();s&&this.eResize.insertAdjacentElement("afterend",s)}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;const t=this.headerCompVersion;e.newAgStackInstance().then((e=>this.afterCompCreated(t,e)))}afterCompCreated(e,t){e==this.headerCompVersion&&this.isAlive()?(this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())):this.destroyBean(t)}}t.HeaderCellComp=a},260:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderCellCtrl=void 0;const n=i(3789),r=i(2036),o=i(9853),s=i(7274),a=i(2783),l=i(8703),c=i(5230),d=i(3507),u=i(2331),h=i(1772),p=i(1323),f=i(3534),g=i(1295);class m extends f.AbstractHeaderCellCtrl{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}setComp(e,t,i,r,o){this.comp=e;const{rowCtrl:s,column:a,beans:c}=this,{colResize:u,context:p,colHover:f,rangeSvc:g}=c,m=(0,n.setupCompBean)(this,p,o);this.setGui(t,m),this.updateState(),this.setupWidth(m),this.setupMovingCss(m),this.setupMenuClass(m),this.setupSortableClass(m),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:r,checkMeasuringCallback:e=>this.setRefreshFunction("measuring",e),compBean:m}),this.addColumnHoverListener(m),this.setupFilterClass(m),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(m),this.setupSelectAll(m),this.setupUserComp(),this.refreshAria(),u?this.resizeFeature=m.createManagedBean(u.createResizeFeature(s.pinned,a,i,e,this)):(0,d._setDisplayed)(i,!1),f?.createHoverFeature(m,[a],t),g?.createRangeHighlightFeature(m,a,e),m.createManagedBean(new l.SetLeftFeature(a,t,c)),m.createManagedBean(new h.ManagedFocusFeature(t,{shouldStopEventPropagation:e=>this.shouldStopEventPropagation(e),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(m),m.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],(()=>this.refresh())),m.addManagedListeners(a,{colDefChanged:()=>this.refresh()}),m.addManagedListeners(a,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const v=()=>this.checkDisplayName();m.addManagedEventListeners({columnValueChanged:v,columnRowGroupChanged:v,columnPivotChanged:v,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),m.addDestroyFunc((()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()}))}resizeHeader(e,t){this.beans.colResize?.resizeHeader(this.column,e,t)}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.colDef;return(0,s._addGridCommonParams)(t.gos,{colDef:i,column:e,floatingFilter:!1})}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return(0,r._getHeaderCompDetails)(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:i,gos:n}=this.beans;return(0,s._addGridCommonParams)(n,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!e?.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!!i&&(!this.openFilterEnabled||(0,s._isLegacyMenuEnabled)(this.gos)),showColumnMenu:(t,i)=>{e?.showColumnMenu({column:this.column,buttonElement:t,positionBy:"button",onClosedCallback:i})},showColumnMenuAfterMouseClick:(t,i)=>{e?.showColumnMenu({column:this.column,mouseEvent:t,positionBy:"mouse",onClosedCallback:i})},showFilter:t=>{e?.showFilterMenu({column:this.column,buttonElement:t,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{t?.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,i)=>{t?.setSortForColumn(this.column,e,!!i,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(e,t)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(e,t)}})}setupSelectAll(e){const{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createManagedBean(t.createSelectAllFeature(this.column)),this.selectAllFeature.setComp(this))}getSelectAllGui(){return this.selectAllFeature?.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===o.KeyCode.SPACE&&this.selectAllFeature?.onSpaceKeyDown(e),e.key===o.KeyCode.ENTER&&this.onEnterKeyDown(e),e.key===o.KeyCode.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){e.ctrlKey||e.metaKey?this.showMenuOnKeyPress(e,!0):this.sortable&&this.beans.sortSvc?.progressSort(this.column,e.shiftKey,"uiColumnSorted")}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();v(i)&&i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),(0,u._isKeyboardMode)()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const e=()=>{const e=this.column.getColDef(),t=(0,g._getHeaderClassesFromColDef)(e,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(t),t.forEach((e=>{i.has(e)?i.delete(e):this.comp.addOrRemoveCssClass(e,!0)})),i.forEach((e=>this.comp.addOrRemoveCssClass(e,!1)))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){this.dragSourceElement=e,this.removeDragSource(),e&&this.draggable&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!!e?.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=!!e?.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),Object.values(this.refreshFunctions).forEach((e=>e()))}refreshHeaderComp(){const e=this.lookupUserCompDetails();if(!e)return;!!(null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==e.componentClass)&&this.attemptHeaderCompRefresh(e.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();if(!t)return!1;if(!t.refresh)return!1;return t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const e=this.column.getActualWidth();this.comp.setWidth(`${e}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{this.comp?.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const e=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",e),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const e=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",e)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===a.ColumnHighlightPosition.Before,i=e===a.ColumnHighlightPosition.After;this.comp.addOrRemoveCssClass("ag-header-highlight-before",t),this.comp.addOrRemoveCssClass("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:i,beans:n}=this,r=(0,p.getGroupRowsHeight)(this.beans),o=0===r.reduce(((e,t)=>e+t),0);if(i.addOrRemoveCssClass("ag-header-parent-hidden",o),!t.isSpanHeaderHeight())return e.style.removeProperty("top"),e.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),void i.addOrRemoveCssClass("ag-header-span-total",!1);const{numberOfParents:s,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",s>0);const l=(0,p.getColumnHeaderRowHeight)(n);if(0===s)return i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),void e.style.setProperty("height",`${l}px`);i.addOrRemoveCssClass("ag-header-span-total",a);let c=0;for(let e=0;e<s;e++)c+=r[r.length-1-e];e.style.setProperty("top",-c+"px"),e.style.setProperty("height",`${l+c}px`)}refreshAriaSort(){if(this.sortable){const e=this.getLocaleTextFunc(),t=this.beans.sortSvc?.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort((0,c._getAriaSortState)(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!(0,s._isLegacyMenuEnabled)(this.gos)){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){null!=t?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains((0,s._getActiveDomElement)(this.beans)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort(((e,t)=>"filter"===e?-1:t.charCodeAt(0)-e.charCodeAt(0))).map((e=>this.ariaDescriptionProperties.get(e))).join(". ");this.beans.ariaAnnounce?.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){this.beans.colHover?.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column)})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return v(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}}function v(e){return"function"==typeof e.getAnchorElementForMenu&&"function"==typeof e.onMenuKeyboardShortcut}t.HeaderCellCtrl=m},9270:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderComp=void 0;const n=i(2036),r=i(7274),o=i(3507),s=i(9970),a=i(7766),l=i(8020);class c extends l.Component{constructor(){super(...arguments),this.eFilter=l.RefPlaceholder,this.eFilterButton=l.RefPlaceholder,this.eSortIndicator=l.RefPlaceholder,this.eMenu=l.RefPlaceholder,this.eLabel=l.RefPlaceholder,this.eText=l.RefPlaceholder,this.eSortOrder=l.RefPlaceholder,this.eSortAsc=l.RefPlaceholder,this.eSortDesc=l.RefPlaceholder,this.eSortMixed=l.RefPlaceholder,this.eSortNone=l.RefPlaceholder,this.isLoadingInnerComponent=!1}refresh(e){const t=this.params;return this.params=e,this.workOutTemplate()==this.currentTemplate&&this.workOutShowMenu()==this.currentShowMenu&&e.enableSorting==this.currentSort&&(null==this.currentSuppressMenuHide||this.shouldSuppressMenuHide()==this.currentSuppressMenuHide)&&t.enableFilterButton==e.enableFilterButton&&t.enableFilterIcon==e.enableFilterIcon&&(this.innerHeaderComponent?this.innerHeaderComponent.refresh?.(e):this.setDisplayName(e),!0)}workOutTemplate(){const{params:e,beans:t}=this,i=e.template??`<div class="ag-cell-label-container" role="presentation">\n        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>\n        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">\n            <span data-ref="eText" class="ag-header-cell-text"></span>\n            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n            ${!!t.sortSvc?'<ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>':""}\n        </div>\n    </div>`;return i?.trim?i.trim():i}init(e){this.params=e;const{sortSvc:t,touchSvc:i,rowNumbersSvc:n,userCompFactory:r}=this.beans;this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,t?[t.getSortIndicatorSelector()]:void 0),i?.setupForHeader(this),this.setMenu(),this.setupSort(),n?.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(r,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const i=(0,n._getInnerHeaderCompDetails)(e,t,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then((e=>{this.isLoadingInnerComponent=!1,e&&(this.isAlive()?(this.innerHeaderComponent=e,this.eText.appendChild(e.getGui())):this.destroyBean(e))})))}setDisplayName(e){const{displayName:t}=e,i=this.currentDisplayName;if(this.currentDisplayName=t,i===t||this.innerHeaderComponent||this.isLoadingInnerComponent)return;const n=(0,a._escapeString)(t,!0);this.eText.textContent=n}addInIcon(e,t,i){if(null==t)return;const n=(0,s._createIconNoSpan)(e,this.beans,i);n&&t.appendChild(n)}workOutShowMenu(){return this.params.enableMenu&&!!this.beans.menuSvc?.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return!!this.beans.menuSvc?.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return(0,o._removeFromParent)(this.eMenu),void(this.eMenu=void 0);const{gos:e,eMenu:t,params:i}=this,n=(0,r._isLegacyMenuEnabled)(e);this.addInIcon(n?"menu":"menuAlt",t,i.column),t.classList.toggle("ag-header-menu-icon",!n);const s=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=s,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(s)}toggleMenuAlwaysShow(e){this.eMenu?.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){const{currentSuppressMenuHide:t,params:i}=this;t||this.toggleMenuAlwaysShow(!0),i.showColumnMenu(e,(()=>{t||this.toggleMenuAlwaysShow(!1)}))}onMenuKeyboardShortcut(e){const{params:t,gos:i,beans:n,eMenu:o,eFilterButton:s}=this,a=t.column,l=(0,r._isLegacyMenuEnabled)(i);if(e&&!l){if(n.menuSvc?.isFilterMenuInHeaderEnabled(a))return t.showFilter(s??o??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(o??s??this.getGui()),!0;return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:i}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:t,eSortOrder:i,eSortAsc:n,eSortDesc:r,eSortMixed:o,eSortNone:s}=this;t.attachCustomElements(i,n,r,o,s)}this.eSortIndicator.setupSort(i),this.currentSort&&e.setupHeader(this,i,this.eLabel)}setupFilterIcon(){const{eFilter:e,params:t}=this;e&&this.configureFilter(t.enableFilterIcon,e,this.onFilterChangedIcon.bind(this),"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,i,n){if(!e)return(0,o._removeFromParent)(t),!1;const r=this.params.column;return this.addInIcon(n,t,r),this.addManagedListeners(r,{filterChanged:i}),i(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();(0,o._setDisplayed)(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){const{eFilterButton:t,eMenu:i}=this;return e?t??i??this.getGui():i??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&(this.destroyBean(this.innerHeaderComponent),this.innerHeaderComponent=void 0)}}t.HeaderComp=c},4312:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GroupWidthFeature=void 0;const n=i(8731);class r extends n.BeanStub{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach((t=>{t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push((()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)}))}))}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach((e=>e())),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",0===e)}}t.GroupWidthFeature=r},7746:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderGroupCellComp=void 0;const n=i(3507),r=i(8020),o=i(9860);class s extends o.AbstractHeaderCellComp{constructor(e){super('<div class="ag-header-group-cell" role="columnheader">\n            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>\n            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',e),this.eResize=r.RefPlaceholder,this.eHeaderCompWrapper=r.RefPlaceholder}postConstruct(){const e=this.getGui();e.setAttribute("col-id",this.ctrl.column.getUniqueId());const t={addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setUserStyles:t=>(0,n._addStylesToElement)(e,t),setHeaderWrapperHidden:e=>{e?this.eHeaderCompWrapper.style.setProperty("display","none"):this.eHeaderCompWrapper.style.removeProperty("display")},setHeaderWrapperMaxHeight:e=>{null!=e?this.eHeaderCompWrapper.style.setProperty("max-height",`${e}px`):this.eHeaderCompWrapper.style.removeProperty("max-height"),this.eHeaderCompWrapper.classList.toggle("ag-header-cell-comp-wrapper-limited-height",null!=e)},setResizableDisplayed:e=>(0,n._setDisplayed)(this.eResize,e),setWidth:t=>e.style.width=t,setAriaExpanded:t=>{return i="aria-expanded",null!=(n=t)?e.setAttribute(i,n):e.removeAttribute(i);var i,n},setUserCompDetails:e=>this.setUserCompDetails(e),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(t,e,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(e){e.newAgStackInstance().then((e=>this.afterHeaderCompCreated(e)))}afterHeaderCompCreated(e){const t=()=>this.destroyBean(e);if(!this.isAlive())return void t();const i=this.getGui(),n=e.getGui();this.eHeaderCompWrapper.appendChild(n),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(i)}addOrRemoveHeaderWrapperStyle(e,t){const{eHeaderCompWrapper:i}=this;t?i.style.setProperty(e,t):i.style.removeProperty(e)}}t.HeaderGroupCellComp=s},84:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderGroupCellCtrl=void 0;const n=i(3789),r=i(2036),o=i(9853),s=i(7274),a=i(2783),l=i(8703),c=i(1502),d=i(1772),u=i(3534),h=i(1295),p=i(4312);class f extends u.AbstractHeaderCellCtrl{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}setComp(e,t,i,r,o){const{column:s,beans:a}=this,{context:c,colNames:u,colHover:h,rangeSvc:f,colResize:g}=a;this.comp=e,o=(0,n.setupCompBean)(this,c,o),this.setGui(t,o),this.displayName=u.getDisplayNameForColumnGroup(s,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(o),this.setupExpandable(o),this.setupTooltip(),this.setupAutoHeight({wrapperElement:r,compBean:o}),this.setupUserComp(),this.addHeaderMouseListeners(o),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const m=this.rowCtrl.pinned,v=s.getProvidedColumnGroup().getLeafColumns();h?.createHoverFeature(o,v,t),f?.createRangeHighlightFeature(o,s,e),o.createManagedBean(new l.SetLeftFeature(s,t,a)),o.createManagedBean(new p.GroupWidthFeature(e,s)),g?this.resizeFeature=o.createManagedBean(g.createGroupResizeFeature(e,i,m,s)):e.setResizableDisplayed(!1),o.createManagedBean(new d.ManagedFocusFeature(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(o,v),o.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(o),o.addDestroyFunc((()=>this.clearComponent()))}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.getDefinition();return(0,s._addGridCommonParams)(t.gos,{colDef:i,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");null!=i?0===i?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),i=t[0]===e,n=(0,c._last)(t)===e;if(!i&&!n)return;const r=e.getHighlighted();let o=!1,s=!1;if(!!this.rowCtrl.findHeaderCellCtrl((e=>e.column.isMoving()))){const e=this.beans.gos.get("enableRtl"),t=r===a.ColumnHighlightPosition.After,l=r===a.ColumnHighlightPosition.Before;i&&(e?s=t:o=l),n&&(e?o=l:s=t)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",o),this.comp.addOrRemoveCssClass("ag-header-highlight-after",s)}resizeHeader(e,t){const{resizeFeature:i}=this;if(!i)return;const n=i.getInitialValues(t);i.resizeColumns(n,n.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){this.resizeFeature?.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:i}=this.beans,n=(0,s._addGridCommonParams)(i,{displayName:this.displayName,columnGroup:this.column,setExpanded:t=>{e.setColumnGroupOpened(this.column.getProvidedColumnGroup(),t,"gridInitializing")},setTooltip:(e,t)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(e,t)}}),o=(0,r._getHeaderGroupCompDetails)(t,n);o&&this.comp.setUserCompDetails(o)}addHeaderMouseListeners(e){const t=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column.getProvidedColumnGroup())})}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:e}=this,t=e.getColGroupDef(),i=(0,h._getHeaderClassesFromColDef)(t,this.gos,null,e);if(e.isPadding()){i.push("ag-header-group-cell-no-group");e.getLeafColumns().every((e=>e.isSpanHeaderHeight()))&&i.push("ag-header-span-height")}else i.push("ag-header-group-cell-with-group"),t?.wrapHeaderText&&i.push("ag-header-cell-wrap-text");i.forEach((e=>this.comp.addOrRemoveCssClass(e,!0)))}setupMovingCss(e){const{column:t}=this,i=t.getProvidedColumnGroup().getLeafColumns(),n=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",t.isMoving());i.forEach((t=>{e.addManagedListeners(t,{movingChanged:n})})),n()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||this.focusThis()}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(this.expandable&&t&&e.key===o.KeyCode.ENTER){const e=this.column,t=!e.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(e.getProvidedColumnGroup(),t,"uiColumnExpanded")}}setDragSource(e){this.isAlive()&&!this.isSuppressMoving()&&(this.removeDragSource(),e&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some((e=>e.getColDef().suppressMovable||e.getColDef().lockPosition))}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}}t.HeaderGroupCellCtrl=f},4998:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderGroupComp=void 0;const n=i(2036),r=i(3507),o=i(2979),s=i(4422),a=i(9970),l=i(7766),c=i(7764),d=i(8020);class u extends d.Component{constructor(){super('<div class="ag-header-group-cell-label" role="presentation">\n            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>'),this.agOpened=d.RefPlaceholder,this.agClosed=d.RefPlaceholder,this.agLabel=d.RefPlaceholder,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons()}checkWarnings(){this.params.template&&(0,c._warn)(89)}workOutInnerHeaderGroupComponent(e,t){const i=(0,n._getInnerHeaderGroupCompDetails)(e,t,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then((e=>{this.isLoadingInnerComponent=!1,e&&(this.isAlive()?(this.innerHeaderGroupComponent=e,this.agLabel.appendChild(e.getGui())):this.destroyBean(e))})))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:i},beans:n}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const r=e=>{if((0,o._isStopPropagationForAgGrid)(e))return;const t=!i.isExpanded();n.colGroupSvc.setColumnGroupOpened(i.getProvidedColumnGroup(),t,"uiColumnExpanded")};this.addTouchAndClickListeners(n,t,r),this.addTouchAndClickListeners(n,e,r);const s=e=>{(0,o._stopPropagationForAgGrid)(e)};this.addManagedElementListeners(t,{dblclick:s}),this.addManagedElementListeners(e,{dblclick:s}),this.addManagedElementListeners(this.getGui(),{dblclick:r}),this.updateIconVisibility();const a=i.getProvidedColumnGroup(),l=this.updateIconVisibility.bind(this);this.addManagedListeners(a,{expandedChanged:l,expandableChanged:l})}addTouchAndClickListeners(e,t,i){e.touchSvc?.setupForHeaderGroup(this,t,i),this.addManagedElementListeners(t,{click:i})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:i}}=this;if(i.isExpandable()){const n=i.isExpanded();(0,r._setDisplayed)(e,n),(0,r._setDisplayed)(t,!n)}else(0,r._setDisplayed)(e,!1),(0,r._setDisplayed)(t,!1)}addInIcon(e,t){const i=(0,a._createIconNoSpan)(e,this.beans,null);i&&t.appendChild(i)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:e,agClosed:t}=this;return(0,r._setDisplayed)(e,!1),void(0,r._setDisplayed)(t,!1)}}setupLabel(e){const{displayName:t,columnGroup:i}=e,n=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;if((0,s._exists)(t)&&!n){const e=(0,l._escapeString)(t,!0);this.agLabel.textContent=e}this.addOrRemoveCssClass("ag-sticky-label",!i.getColGroupDef()?.suppressStickyLabel)}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}}t.HeaderGroupComp=u},1295:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.refreshFirstAndLastStyles=t._getToolPanelClassesFromColDef=t._getHeaderClassesFromColDef=void 0;const n=i(7274),r=i(4422);function o(e,t,i,o,s){if((0,r._missing)(e))return[];let a;if("function"==typeof e){const r=function(e,t,i,r){return(0,n._addGridCommonParams)(t,{colDef:e,column:i,columnGroup:r})}(t,i,o,s);a=e(r)}else a=e;return"string"==typeof a?[a]:Array.isArray(a)?[...a]:[]}t._getHeaderClassesFromColDef=function(e,t,i,n){return(0,r._missing)(e)?[]:o(e.headerClass,e,t,i,n)},t._getToolPanelClassesFromColDef=function(e,t,i,n){return(0,r._missing)(e)?[]:o(e.toolPanelClass,e,t,i,n)},t.refreshFirstAndLastStyles=function(e,t,i){e.addOrRemoveCssClass("ag-column-first",i.isColAtEdge(t,"first")),e.addOrRemoveCssClass("ag-column-last",i.isColAtEdge(t,"last"))}},3290:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderFilterCellComp=void 0;const n=i(3507),r=i(8020),o=i(9860);class s extends o.AbstractHeaderCellComp{constructor(e){super('<div class="ag-header-cell ag-floating-filter" role="gridcell">\n            <div data-ref="eFloatingFilterBody" role="presentation"></div>\n            <div class="ag-floating-filter-button ag-hidden" data-ref="eButtonWrapper" role="presentation">\n                <button type="button" class="ag-button ag-floating-filter-button-button" data-ref="eButtonShowMainFilter" tabindex="-1"></button>\n            </div>\n        </div>',e),this.eFloatingFilterBody=r.RefPlaceholder,this.eButtonWrapper=r.RefPlaceholder,this.eButtonShowMainFilter=r.RefPlaceholder}postConstruct(){const e=this.getGui(),t={addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setUserStyles:t=>(0,n._addStylesToElement)(e,t),addOrRemoveBodyCssClass:(e,t)=>this.eFloatingFilterBody.classList.toggle(e,t),setButtonWrapperDisplayed:e=>(0,n._setDisplayed)(this.eButtonWrapper,e),setCompDetails:e=>this.setCompDetails(e),getFloatingFilterComp:()=>this.compPromise,setWidth:t=>e.style.width=t,setMenuIcon:e=>this.eButtonShowMainFilter.appendChild(e)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(e){if(!e)return this.destroyFloatingFilterComp(),void(this.compPromise=null);this.compPromise=e.newAgStackInstance(),this.compPromise.then((e=>this.afterCompCreated(e)))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){e&&(this.isAlive()?(this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()):this.destroyBean(e))}}t.HeaderFilterCellComp=s},3868:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderFilterCellCtrl=void 0;const n=i(3789),r=i(9853),o=i(7274),s=i(8703),a=i(5230),l=i(3507),c=i(2331),d=i(9970),u=i(1772),h=i(3534);class p extends h.AbstractHeaderCellCtrl{constructor(){super(...arguments),this.iconCreated=!1}setComp(e,t,i,r,o){this.comp=e;const s=(0,n.setupCompBean)(this,this.beans.context,o);this.eButtonShowMainFilter=i,this.eFloatingFilterBody=r,this.setGui(t,s),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(s),this.setupLeft(s),this.setupHover(s),this.setupFocus(s),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(s),this.setupUi(),s.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(s),s.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(s)}),s.addDestroyFunc((()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()}))}resizeHeader(){}moveHeader(){}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.colDef;return(0,o._addGridCommonParams)(t.gos,{colDef:i,column:e,floatingFilter:!0})}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=(0,d._createIconNoSpan)("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new u.ManagedFocusFeature(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.getLocaleTextFunc();(0,a._setAriaLabel)(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){const{beans:t}=this;if((0,o._getActiveDomElement)(t)===this.eGui)return;const i=(0,c._findNextFocusableElement)(t,this.eGui,null,e.shiftKey);if(i)return t.headerNavigation?.scrollToColumn(this.column),e.preventDefault(),void i.focus();const n=this.findNextColumnWithFloatingFilter(e.shiftKey);n&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:n},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleCols;let i=this.column;do{if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break}while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case r.KeyCode.UP:case r.KeyCode.DOWN:t||e.preventDefault();case r.KeyCode.LEFT:case r.KeyCode.RIGHT:if(t)return;e.stopPropagation();case r.KeyCode.ENTER:t&&(0,c._focusInto)(this.eGui)&&e.preventDefault();break;case r.KeyCode.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const t=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&(0,l._isElementChildOfClass)(e.relatedTarget,"ag-floating-filter");if(t&&i&&e.target===this.eGui){const e=this.lastFocusEvent,t=!(!e||e.key!==r.KeyCode.TAB);if(e&&t){const t=e.shiftKey;(0,c._focusInto)(this.eGui,t)}}this.focusThis()}setupHover(e){this.beans.colHover?.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){const t=new s.SetLeftFeature(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.beans.menuSvc?.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!(0,o._isLegacyMenuEnabled)(this.gos)}setupUserComp(){if(!this.active)return;const e=this.beans.filterManager?.getFloatingFilterCompDetails(this.column,(()=>this.showParentFilter()));e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.beans.menuSvc?.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{filterManager:t}=this.beans,i=e=>{if("filterDestroyed"===e?.source&&!this.isAlive())return;const i=this.comp.getFloatingFilterComp();i&&i.then((i=>{if(i){const n=t?.getCurrentFloatingFilterParentModel(this.column),r=e?{...e,columns:e.columns??[],source:"api"===e.source?"api":"columnFilter"}:null;i.onParentModelChanged(n,r)}}))};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:i}),t?.isFilterActive(this.column)&&i(null)}setupWidth(e){const t=()=>{const e=`${this.column.getActualWidth()}px`;this.comp.setWidth(e)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){const t=this.active;this.setupActive();const i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const n=this.active?this.beans.filterManager?.getFloatingFilterCompDetails(this.column,(()=>this.showParentFilter())):null,r=this.comp.getFloatingFilterComp();r&&n?r.then((t=>{!t||this.beans.filterManager?.areFilterCompsDifferent(this.userCompDetails??null,n)?this.updateCompDetails(e,n,i):this.updateFloatingFilterParams(n)})):this.updateCompDetails(e,n,i)}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){if(!e)return;const t=e.params;this.comp.getFloatingFilterComp()?.then((e=>{e?.refresh&&"function"==typeof e.refresh&&e.refresh(t)}))}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}}t.HeaderFilterCellCtrl=p},8078:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnGroupHeaderCompModule=t.ColumnHeaderCompModule=void 0;const n=i(7205),r=i(9270),o=i(4998);t.ColumnHeaderCompModule={moduleName:"ColumnHeaderComp",version:n.VERSION,userComponents:{agColumnHeader:r.HeaderComp},icons:{menu:"menu",menuAlt:"menu-alt"}},t.ColumnGroupHeaderCompModule={moduleName:"ColumnGroupHeaderComp",version:n.VERSION,userComponents:{agColumnGroupHeader:o.HeaderGroupComp},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}}},8791:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridHeaderSelector=t.GridHeaderComp=void 0;const n=i(8020),r=i(9),o=i(7260);class s extends n.Component{constructor(){super('<div class="ag-header" role="presentation"/>')}postConstruct(){const e={addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setHeightAndMinHeight:e=>{this.getGui().style.height=e,this.getGui().style.minHeight=e}};this.createManagedBean(new r.GridHeaderCtrl).setComp(e,this.getGui(),this.getFocusableElement());const t=e=>{this.createManagedBean(e),this.appendChild(e)};t(new o.HeaderRowContainerComp("left")),t(new o.HeaderRowContainerComp(null)),t(new o.HeaderRowContainerComp("right"))}}t.GridHeaderComp=s,t.GridHeaderSelector={selector:"AG-HEADER-ROOT",component:s}},9:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridHeaderCtrl=void 0;const n=i(9853),r=i(8731),o=i(7274),s=i(2612),a=i(2331),l=i(4422),c=i(1772),d=i(1323);class u extends r.BeanStub{setComp(e,t,i){this.comp=e,this.eGui=t;const{beans:n}=this,{headerNavigation:r,touchSvc:o,ctrlsSvc:s}=n;r&&this.createManagedBean(new c.ManagedFocusFeature(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,n),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,n)}),this.onPivotModeChanged(n),this.setupHeaderHeight();const a=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:a}),o?.mockHeaderContextMenu(this,a),s.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>(0,s._requestAnimationFrame)(this.beans,(()=>e())),gridStylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){const{beans:e}=this;let t=0;const i=(0,d.getGroupRowsHeight)(e).reduce(((e,t)=>e+t),0),n=(0,d.getColumnHeaderRowHeight)(e);if(e.filterManager?.hasFloatingFilters()&&(t+=(0,d.getFloatingFiltersHeight)(e)),t+=i,t+=n,this.headerHeight===t)return;this.headerHeight=t;const r=`${t+1}px`;this.comp.setHeightAndMinHeight(r),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",t),this.comp.addOrRemoveCssClass("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const t=e.visibleCols.allCols.some((e=>e.isSpanHeaderHeight()));this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey,n=i!==t?"LEFT":"RIGHT",{beans:r}=this,{headerNavigation:o,focusSvc:s}=r;(o.navigateHorizontally(n,!0,e)||!i&&s.focusOverlay(!1)||(0,a._focusNextGridCoreContainer)(r,i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:i}=this.beans;switch(e.key){case n.KeyCode.LEFT:t="LEFT";case n.KeyCode.RIGHT:(0,l._exists)(t)||(t="RIGHT"),i.navigateHorizontally(t,!1,e)&&e.preventDefault();break;case n.KeyCode.UP:t="UP";case n.KeyCode.DOWN:(0,l._exists)(t)||(t="DOWN"),i.navigateVertically(t,null,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:i,beans:n}=this;!t&&i.contains((0,o._getActiveDomElement)(n))||i.contains(t)||(n.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,i){const{menuSvc:n,ctrlsSvc:r}=this.beans;if(!e&&!i||!n?.isHeaderContextMenuEnabled())return;const{target:o}=e??t;o!==this.eGui&&o!==r.getHeaderRowContainerCtrl()?.eViewport||n.showHeaderContextMenu(void 0,e,i)}}t.GridHeaderCtrl=u},1323:function(e,t){function i(e,t){const i=e.colModel.isPivotMode()?function(e){return e.gos.get("pivotGroupHeaderHeight")??r(e)}(e):r(e);let n=0;const o=t.getHeaderCtrls();for(const e of o){const{column:t}=e;if(t.isAutoHeaderHeight()){const e=t.getAutoHeaderHeight();null!=e&&e>n&&(n=e)}}return Math.max(i,n)}function n(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function r(e){return e.gos.get("groupHeaderHeight")??n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getFloatingFiltersHeight=t.getHeaderHeight=t.getColumnHeaderRowHeight=t.getGroupRowsHeight=t.getFocusHeaderRowCount=t.getHeaderRowCount=void 0,t.getHeaderRowCount=function(e){return e.cols?e.cols.treeDepth+1:-1},t.getFocusHeaderRowCount=function(e){return e.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0},t.getGroupRowsHeight=function(e){const t=[],n=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const r of n){if(!r)continue;const n=r.getGroupRowCount()||0;for(let o=0;o<n;o++){const n=r.getGroupRowCtrlAtIndex(o),s=t[o];if(n){const r=i(e,n);(null==s||r>s)&&(t[o]=r)}}}return t},t.getColumnHeaderRowHeight=function(e){const t=e.colModel.isPivotMode()?function(e){return e.gos.get("pivotHeaderHeight")??n(e)}(e):n(e),i=e.visibleCols.allCols.filter((e=>e.isAutoHeaderHeight())).map((e=>e.getAutoHeaderHeight()||0));return Math.max(t,...i)},t.getHeaderHeight=n,t.getFloatingFiltersHeight=function(e){return e.gos.get("floatingFiltersHeight")??n(e)}},8866:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderRowComp=void 0;const n=i(5230),r=i(3507),o=i(8020),s=i(1906),a=i(7746),l=i(3290);class c extends o.Component{constructor(e){super(),this.ctrl=e,this.headerComps={},this.setTemplate(`<div class="${this.ctrl.headerRowClass}" role="row"></div>`)}postConstruct(){(0,n._setAriaRowIndex)(this.getGui(),this.ctrl.getAriaRowIndex());const e={setHeight:e=>this.getGui().style.height=e,setTop:e=>this.getGui().style.top=e,setHeaderCtrls:(e,t)=>this.setHeaderCtrls(e,t),setWidth:e=>this.getGui().style.width=e};this.ctrl.setComp(e,void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;const i=this.headerComps;if(this.headerComps={},e.forEach((e=>{const t=e.instanceId;let n=i[t];delete i[t],null==n&&(n=this.createHeaderComp(e),this.getGui().appendChild(n.getGui())),this.headerComps[t]=n})),Object.values(i).forEach((e=>{this.getGui().removeChild(e.getGui()),this.destroyBean(e)})),t){const e=Object.values(this.headerComps);e.sort(((e,t)=>e.getCtrl().column.getLeft()-t.getCtrl().column.getLeft()));const t=e.map((e=>e.getGui()));(0,r._setDomChildOrder)(this.getGui(),t)}}createHeaderComp(e){let t;switch(this.ctrl.type){case"group":t=new a.HeaderGroupCellComp(e);break;case"filter":t=new l.HeaderFilterCellComp(e);break;default:t=new s.HeaderCellComp(e)}return this.createBean(t),t.setParentComponent(this),t}}t.HeaderRowComp=c},2868:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderRowCtrl=void 0;const n=i(3789),r=i(8731),o=i(7274),s=i(260),a=i(1323);let l=0;class c extends r.BeanStub{constructor(e,t,i){super(),this.rowIndex=e,this.pinned=t,this.type=i,this.instanceId=l++;const n="group"==i?"ag-header-row-column-group":"filter"==i?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${n}`}postConstruct(){this.isPrintLayout=(0,o._isDomLayout)(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return!!this.comp&&this.getHeaderCellCtrls().every((e=>null!=e.eGui))}setComp(e,t,i=!0){this.comp=e,t=(0,n.setupCompBean)(this,this.beans.context,t),i&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this),i=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:i,virtualColumnsChanged:e=>this.onVirtualColumnsChanged(e.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",i),e.addManagedPropertyListener("ensureDomOrder",(e=>this.isEnsureDomOrder=e.currentValue)),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(e){if(this.headerCellCtrls)for(const t of this.headerCellCtrls.values())if(t.column===e)return t}onDisplayedColumnsChanged(){this.isPrintLayout=(0,o._isDomLayout)(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleCols:e}=this.beans;if(this.isPrintLayout){return null!=this.pinned?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null)}return e.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{filterManager:e}=this.beans,t=[],i=(0,a.getGroupRowsHeight)(this.beans),n=(0,a.getColumnHeaderRowHeight)(this.beans);t.push(...i),t.push(n),e?.hasFloatingFilters()&&t.push((0,a.getFloatingFiltersHeight)(this.beans));let r=0;for(let e=0;e<this.rowIndex;e++)r+=t[e];return{topOffset:r,rowHeight:t[this.rowIndex]}}onVirtualColumnsChanged(e=!1){const t=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const i of t)this.recycleAndCreateHeaderCtrls(i,e);const i=e=>{const{focusSvc:t,visibleCols:i}=this.beans;if(!t.isHeaderWrapperFocused(e))return!1;return i.isVisible(e.column)};if(e)for(const[t,n]of e){i(n)?this.headerCellCtrls.set(t,n):this.destroyBean(n)}return this.getHeaderCellCtrls()}getHeaderCellCtrls(){return Array.from(this.headerCellCtrls?.values()??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls)return;if(e.isEmptyGroup())return;const i=e.getUniqueId();let n;t&&(n=t.get(i),t.delete(i));if(n&&n.column!=e&&(this.destroyBean(n),n=void 0),null==n)switch(this.type){case"filter":n=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break;case"group":n=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:n=this.createBean(new s.HeaderCellCtrl(e,this))}this.headerCellCtrls.set(i,n)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(null!=this.pinned)return[];let e=[];const t=this.getActualDepth(),{colViewport:i}=this.beans;return["left",null,"right"].forEach((n=>{const r=i.getHeadersToRender(n,t);e=e.concat(r)})),e}getActualDepth(){return"filter"==this.type?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.colViewport.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;const t=this.getHeaderCellCtrls();let i;return i="function"==typeof e?t.find(e):t.find((t=>t.column==e)),i}focusHeader(e,t){const i=this.findHeaderCellCtrl(e);if(!i)return!1;return i.focus(t)}destroy(){this.headerCellCtrls?.forEach((e=>{this.destroyBean(e)})),this.headerCellCtrls=void 0,super.destroy()}}t.HeaderRowCtrl=c},7260:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderRowContainerComp=void 0;const n=i(3507),r=i(8020),o=i(8866),s=i(8934);class a extends r.Component{constructor(e){super(),this.eCenterContainer=r.RefPlaceholder,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();const e={setDisplayed:e=>this.setDisplayed(e),setCtrls:e=>this.setCtrls(e),setCenterWidth:e=>this.eCenterContainer.style.width=e,setViewportScrollLeft:e=>this.getGui().scrollLeft=e,setPinnedContainerWidth:e=>{const t=this.getGui();t.style.width=e,t.style.maxWidth=e,t.style.minWidth=e}};this.createManagedBean(new s.HeaderRowContainerCtrl(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){const e="left"==this.pinned,t="right"==this.pinned,i=e?'<div class="ag-pinned-left-header" role="rowgroup"></div>':t?'<div class="ag-pinned-right-header" role="rowgroup"></div>':'<div class="ag-header-viewport" role="presentation">\n        <div class="ag-header-container" data-ref="eCenterContainer" role="rowgroup"></div>\n    </div>';this.setTemplate(i),this.eRowContainer=this.eCenterContainer!==r.RefPlaceholder?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){const t=this.headerRowComps;let i;this.headerRowComps={},this.rowCompsList=[];const r=e=>{const t=e.getGui();t.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(t),i&&(0,n._ensureDomOrder)(this.eRowContainer,t,i),i=t};e.forEach((e=>{const i=e.instanceId,n=t[i];delete t[i];const s=n||this.createBean(new o.HeaderRowComp(e));this.headerRowComps[i]=s,this.rowCompsList.push(s),r(s)})),Object.values(t).forEach((e=>this.destroyRowComp(e)))}}t.HeaderRowContainerComp=a},8934:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderRowContainerCtrl=void 0;const n=i(8731),r=i(3355),o=i(2218),s=i(1323),a=i(2868);class l extends n.BeanStub{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:i,ctrlsSvc:n,colModel:r,colMoves:o,filterManager:s}=this.beans;this.setupCenterWidth(),i?.setupHeaderPinnedWidth(this),this.setupDragAndDrop(o,this.eViewport);const a=this.onDisplayedColumnsChanged.bind(this,s);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:a,advancedFilterEnabledChanged:a});const l=`${"string"==typeof this.pinned?this.pinned:"center"}Header`;n.register(l,this),r.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const{focusSvc:t,colModel:i,filterManager:n}=this.beans;let r=0;const o=t.getFocusHeaderToUseAfterRefresh();(()=>{const e=(0,s.getHeaderRowCount)(i)-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let t=0;t<e;t++){const e=this.createBean(new a.HeaderRowCtrl(r++,this.pinned,"group"));this.groupsRowCtrls.push(e)}})(),(()=>{const t=r++,i=!(this.hidden||null!=this.columnsRowCtrl&&e&&this.columnsRowCtrl.rowIndex===t);(i||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),i&&(this.columnsRowCtrl=this.createBean(new a.HeaderRowCtrl(t,this.pinned,"column")))})(),(()=>{this.includeFloatingFilter=!!n?.hasFloatingFilters()&&!this.hidden;const t=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter)return void t();const i=r++;if(this.filtersRowCtrl){const n=this.filtersRowCtrl.rowIndex!==i;e&&!n||t()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new a.HeaderRowCtrl(i,this.pinned,"filter")))})();const l=this.getAllCtrls();this.comp.setCtrls(l),this.restoreFocusOnHeader(t,o)}getHeaderCtrlForColumn(e){if((0,r.isColumn)(e))return this.columnsRowCtrl?.getHeaderCellCtrl(e);if(0!==this.groupsRowCtrls.length)for(let t=0;t<this.groupsRowCtrls.length;t++){const i=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(i)return i}}getHtmlElementForColumnHeader(e){return this.getHeaderCtrlForColumn(e)?.eGui??null}getRowType(e){return this.getAllCtrls()[e]?.type}focusHeader(e,t,i){const n=this.getAllCtrls()[e];return!!n&&n.focusHeader(t,i)}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const i=e?.createBodyDropTarget(this.pinned,t);i&&this.createManagedBean(i)}restoreFocusOnHeader(e,t){if(!t)return;const{column:i}=t;i.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(e){const t=!!e?.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==t&&this.refresh(!0)}setupCenterWidth(){null==this.pinned&&this.createManagedBean(new o.CenterWidthFeature((e=>this.comp.setCenterWidth(`${e}px`)),!0))}}t.HeaderRowContainerCtrl=l},6642:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteBlock=void 0;const n=i(8731),r=i(3373),o=i(7274),s=i(4422),a=i(7764);class l extends n.BeanStub{constructor(e,t,i){super(),this.id=e,this.parentCache=t,this.params=i,this.state="needsLoading",this.version=0,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"});this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];const{params:{blockSize:e,rowHeight:t},startRow:i,beans:n,rowNodes:o}=this;for(let s=0;s<e;s++){const e=i+s,a=new r.RowNode(n);a.setRowHeight(t),a.uiLevel=0,a.setRowIndex(e),a.setRowTop(t*e),o.push(a)}}getBlockStateJson(){const{id:e,startRow:t,endRow:i,state:n}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:i,pageStatus:n}}}setDataAndId(e,t,i){(0,s._exists)(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();(0,s._missing)(this.params.datasource.getRows)?(0,a._warn)(90):window.setTimeout((()=>{this.params.datasource.getRows(e)}),0)}createLoadParams(){const{startRow:e,endRow:t,version:i,params:{sortModel:n,filterModel:r},gos:s}=this;return{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,i),failCallback:this.pageLoadFailed.bind(this,i),sortModel:n,filterModel:r,context:(0,o._addGridCommonParams)(s,{}).context}}forEachNode(e,t,i){this.rowNodes.forEach(((n,r)=>{this.startRow+r<i&&e(n,t.value++)}))}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.value++);const i=e-this.startRow;return this.rowNodes[i]}processServerResult(e){const{rowNodes:t,beans:i}=this;t.forEach(((n,o)=>{const s=e.rowData?e.rowData[o]:void 0;!n.id&&n.alreadyRendered&&s&&(t[o]=new r.RowNode(i),t[o].setRowIndex(n.rowIndex),t[o].setRowTop(n.rowTop),t[o].setRowHeight(n.rowHeight),n.clearRowTopAndRowIndex()),this.setDataAndId(t[o],s,this.startRow+o)}));const n=null!=e.rowCount&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,n)}destroy(){this.rowNodes.forEach((e=>{e.clearRowTopAndRowIndex()})),super.destroy()}}t.InfiniteBlock=l},8861:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteCache=void 0;const n=i(8731),r=i(2043),o=i(4422),s=i(6642);class a extends n.BeanStub{constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e,t=!1){const i=Math.floor(e/this.params.blockSize);let n=this.blocks[i];if(!n){if(t)return;n=this.createBlock(i)}return n.getRow(e)}createBlock(e){const t=this.params,i=this.createBean(new s.InfiniteBlock(e,this,t));return this.blocks[i.id]=i,this.blockCount++,this.purgeBlocksIfNeeded(i),t.rowNodeBlockLoader.addBlock(i),i}refreshCache(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach((e=>e.setStateWaitingToLoad())),this.params.rowNodeBlockLoader.checkBlockToLoad())}destroy(){this.getBlocksInOrder().forEach((e=>this.destroyBlock(e))),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&((0,r._logIfDebug)(this.gos,`InfiniteCache - onPageLoaded: page = ${e.id}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter((t=>t!=e));t.sort(((e,t)=>t.lastAccessed-e.lastAccessed));const i=this.params.maxBlocksInCache>0,n=i?this.params.maxBlocksInCache-1:null;t.forEach(((e,t)=>{if("needsLoading"===e.state&&t>=1||!!i&&t>=n){if(this.isBlockCurrentlyDisplayed(e))return;if(this.isBlockFocused(e))return;this.removeBlockFromCache(e)}}))}isBlockFocused(e){const t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t)return!1;if(null!=t.rowPinned)return!1;const{startRow:i,endRow:n}=e;return t.rowIndex>=i&&t.rowIndex<n}isBlockCurrentlyDisplayed(e){const{startRow:t,endRow:i}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,i-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if("number"==typeof t&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const{blockSize:t,overflowSize:i}=this.params,n=(e.id+1)*t+i;this.rowCount<n&&(this.rowCount=n)}}setRowCount(e,t){this.rowCount=e,(0,o._exists)(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize==0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t={value:0};this.getBlocksInOrder().forEach((i=>i.forEachNode(e,t,this.rowCount)))}getBlocksInOrder(){return Object.values(this.blocks).sort(((e,t)=>e.id-t.id))}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach((t=>{t.id*this.params.blockSize>=this.rowCount&&e.push(t)})),e.length>0&&e.forEach((e=>this.destroyBlock(e)))}purgeCache(){this.getBlocksInOrder().forEach((e=>this.removeBlockFromCache(e))),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let n=-1,r=!1;const o={value:0};let s=!1;this.getBlocksInOrder().forEach((a=>{s||(r&&n+1!==a.id?s=!0:(n=a.id,a.forEachNode((n=>{const o=n===e||n===t;(r||o)&&i.push(n),o&&(r=!r)}),o,this.rowCount)))}));return s||r?[]:i}}t.InfiniteCache=a},169:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteRowModel=void 0;const n=i(8731),r=i(7274),o=i(4422),s=i(8861);class a extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowModel"}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){"infinite"===this.gos.get("rowModelType")&&(this.rowHeight=(0,r._getRowHeightAsNumber)(this.beans),this.addEventListeners(),this.addDestroyFunc((()=>this.destroyCache())))}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",(()=>this.setDatasource(this.gos.get("datasource")))),this.addManagedPropertyListener("cacheBlockSize",(()=>this.resetCache())),this.addManagedPropertyListener("rowHeight",(()=>{this.rowHeight=(0,r._getRowHeightAsNumber)(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()}))}onColumnEverything(){let e;e=!this.cacheParams||!(0,o._jsonEquals)(this.cacheParams.sortModel,this.beans.sortSvc?.getSortModel()??[]),e&&this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?.getRowNodesInRange(e,t)??[]}reset(){if(!this.datasource)return;null!=(0,r._getRowIdCallback)(this.gos)||this.beans.selectionSvc?.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache();const e=this.beans,{filterManager:t,sortSvc:i,rowNodeBlockLoader:n,eventSvc:o,gos:a}=e;this.cacheParams={datasource:this.datasource,filterModel:t?.getFilterModel()??{},sortModel:i?.getSortModel()??[],rowNodeBlockLoader:n,initialRowCount:a.get("infiniteInitialRowCount"),maxBlocksInCache:a.get("maxBlocksInCache"),rowHeight:(0,r._getRowHeightAsNumber)(e),overflowSize:a.get("cacheOverflowSize"),blockSize:a.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new s.InfiniteCache(this.cacheParams)),o.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode((e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)})),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){const t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode((i=>{i.id===e&&(t=i)})),t}forEachNode(e){this.infiniteCache?.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(0!==this.rowHeight){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache?.refreshCache()}purgeCache(){this.infiniteCache?.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?.isLastRowIndexKnown()??!1}setRowCount(e,t){this.infiniteCache?.setRowCount(e,t)}}t.InfiniteRowModel=a},9836:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getInfiniteRowCount=t.purgeInfiniteCache=t.refreshInfiniteCache=void 0;const n=i(6876);t.refreshInfiniteCache=function(e){(0,n._getInfiniteRowModel)(e)?.refreshCache()},t.purgeInfiniteCache=function(e){(0,n._getInfiniteRowModel)(e)?.purgeCache()},t.getInfiniteRowCount=function(e){return(0,n._getInfiniteRowModel)(e)?.getRowCount()}},4002:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteRowModelModule=void 0;const n=i(6437),r=i(7205),o=i(169),s=i(9836),a=i(9789),l={moduleName:"InfiniteRowModelCore",version:r.VERSION,rowModels:["infinite"],beans:[o.InfiniteRowModel,a.RowNodeBlockLoader]};t.InfiniteRowModelModule={moduleName:"InfiniteRowModel",version:r.VERSION,apiFunctions:{refreshInfiniteCache:s.refreshInfiniteCache,purgeInfiniteCache:s.purgeInfiniteCache,getInfiniteRowCount:s.getInfiniteRowCount},dependsOn:[l,n.SsrmInfiniteSharedApiModule]}},9789:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowNodeBlockLoader=void 0;const n=i(8731),r=i(7274),o=i(1502),s=i(2043);class a extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=(0,r._getMaxConcurrentDatasourceRequests)(this.gos);const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=(0,s._debounce)(this,this.performCheckBlocksToLoad.bind(this),e))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){(0,o._removeFromArray)(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void(0,s._logIfDebug)(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");const e=null!=this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter((e=>"needsLoading"===e.state)).slice(0,e);this.activeBlockLoadsCount+=t.length,t.forEach((e=>e.load())),this.printCacheStatus()}getBlockState(){const e={};return this.blocks.forEach((t=>{const{id:i,state:n}=t.getBlockStateJson();e[i]=n})),e}printCacheStatus(){(0,s._logIfDebug)(this.gos,`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}}t.RowNodeBlockLoader=a},5961:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CellRangeType=void 0,function(e){e[e.VALUE=0]="VALUE",e[e.DIMENSION=1]="DIMENSION"}(i||(t.CellRangeType=i={}))},7419:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},2783:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnHighlightPosition=void 0,function(e){e[e.Before=0]="Before",e[e.After=1]="After"}(i||(t.ColumnHighlightPosition=i={}))},7919:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},3590:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ServerSideTransactionResultStatus=void 0,function(e){e.Applied="Applied",e.StoreNotFound="StoreNotFound",e.StoreLoading="StoreLoading",e.StoreWaitingToLoad="StoreWaitingToLoad",e.StoreLoadingFailed="StoreLoadingFailed",e.StoreWrongType="StoreWrongType",e.Cancelled="Cancelled",e.StoreNotStarted="StoreNotStarted"}(i||(t.ServerSideTransactionResultStatus=i={}))},5889:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.LocalEventService=void 0;t.LocalEventService=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const n=t?this.allAsyncListeners:this.allSyncListeners;let r=n.get(e);return!r&&i&&(r=new Set,n.set(e,r)),r}noRegisteredListenersExist(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){const n=this.getListeners(e,i,!1);if(n&&(n.delete(t),0===n.size)){(i?this.allAsyncListeners:this.allSyncListeners).delete(e)}}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){const t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const i=e.type;if(t&&"event"in e){const t=e.event;t instanceof Event&&(e.eventPath=t.composedPath())}const n=(i,n)=>i.forEach((i=>{if(!n.has(i))return;const r=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming((()=>i(e))):()=>i(e);t?this.dispatchAsync(r):r()})),r=this.getListeners(i,t,!1)??new Set,o=new Set(r);o.size>0&&n(o,r);new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach((n=>{const r=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming((()=>n(i,e))):()=>n(i,e);t?this.dispatchAsync(r):r()}))}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const e=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(e):e(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach((e=>e()))}}},4769:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});const n=i(5608),r=i(12);(0,r._setUmd)(),r.ModuleRegistry.registerModules([r.AllCommunityModule]),n.__exportStar(i(12),t)},12:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._getRowContainerOptions=t.RowContainerCtrl=t.FakeVScrollComp=t.FakeHScrollComp=t._getNormalisedMousePosition=t._getCellPositionForEvent=t.GridBodyCtrl=t._getDefaultFloatingFilterType=t.ProvidedFilter=t.FilterWrapperComp=t._createGlobalRowEvent=t._ROW_ID_PREFIX_ROW_GROUP=t.RowNode=t.isProvidedColumnGroup=t.AgProvidedColumnGroup=t.isColumnGroup=t.AgColumnGroup=t.isColumn=t.AgColumn=t.DragSourceType=t.BeanStub=t._unwrapUserComp=t._getInnerCellRendererDetails=t._getEditorRendererDetails=t._getCellRendererDetails=t._getFloatingFilterCompDetails=t._getFilterDetails=t.RefPlaceholder=t._EmptyBean=t._columnsMatch=t._convertColumnEventSourceType=t._updateColsMap=t._areColIdsEqual=t._getColumnsFromTree=t._destroyColumnTree=t.isColumnGroupAutoCol=t.isColumnSelectionCol=t.isRowNumberCol=t.ROW_NUMBERS_COLUMN_ID=t.SELECTION_COLUMN_ID=t.GROUP_AUTO_COLUMN_ID=t.GroupInstanceIdCreator=t.ColumnKeyCreator=t._getColumnState=t._applyColumnState=t._resetColumnState=t.BaseColsService=t._createColumnTree=t._addColumnDefaultAndTypes=t._updateColumnState=void 0,t._getGlobalGridOption=t.provideGlobalGridOptions=t.createGrid=t.GridCoreCreator=t.KeyCode=t.VanillaFrameworkOverrides=t.AutoScrollService=t.CellRangeType=t.AgPickerField=t.AgAbstractLabel=t.TouchListener=t.PopupComponent=t.TabGuardFeature=t.TabGuardClassNames=t.TabGuardCtrl=t.TabGuardComp=t._FOCUS_MANAGED_CLASS=t.ManagedFocusFeature=t.Component=t.AgSelectSelector=t.AgSelect=t.AgInputDateField=t.AgInputNumberFieldSelector=t.AgInputNumberField=t.AgInputTextArea=t.AgInputTextFieldSelector=t.AgInputTextField=t.AgToggleButtonSelector=t.AgToggleButton=t.AgRadioButton=t.AgCheckboxSelector=t.AgCheckbox=t.AgAbstractInputField=t.BaseSelectionService=t.ServerSideTransactionResultStatus=t.AbstractClientSideNodeManager=t.CssClassManager=t._getCellCtrlForEventTarget=t.PositionableFeature=t._setColMenuVisible=t._requestAnimationFrame=t._getHeaderRowCount=t._getFloatingFiltersHeight=t.HeaderRowContainerCtrl=t.GridHeaderCtrl=t._getToolPanelClassesFromColDef=t._getHeaderClassesFromColDef=t._getRowViewportClass=t._getRowContainerClass=t._getRowSpanContainerClass=void 0,t.GridCtrl=t.LocalEventService=t._isGroupRowsSticky=t._isUsingNewCellSelectionAPI=t._isUsingNewRowSelectionAPI=t._isColumnMenuAnchoringEnabled=t._isLegacyMenuEnabled=t._getRowSelectionMode=t._getSuppressMultiRanges=t._isCellSelectionEnabled=t._getFillHandle=t._isMultiRowSelection=t._getHeaderCheckbox=t._getCheckboxLocation=t._getCheckboxes=t._getIsRowSelectable=t._getGroupSelectsDescendants=t._getGroupSelection=t._isGetRowHeightFunction=t._isRowSelection=t._getGroupAggFiltering=t._getRootNode=t._anchorElementToMouseMoveEvent=t._getPageBody=t._getDocument=t._isNothingFocused=t._getActiveDomElement=t._shouldUpdateColVisibilityAfterGroup=t._getRowHeightAsNumber=t._canSkipShowingRowGroup=t._isGroupUseEntireRow=t._isServerSideRowModel=t._isClientSideRowModel=t._isColumnsSortingCoupledToGroup=t._isGroupMultiAutoColumn=t._getGroupTotalRowCallback=t._getGrandTotalRow=t._isAnimateRows=t._isDomLayout=t._getRowHeightForNode=t._getRowIdCallback=t._getMaxConcurrentDatasourceRequests=t._processOnChange=t._combineAttributesAndGridOptions=t._getCallbackForEvent=t._addGridCommonParams=t._PUBLIC_EVENTS=t._ALL_EVENTS=t._getServerSideRowModel=t._getClientSideRowModel=void 0,t._getAbsoluteWidth=t._getAbsoluteHeight=t._parseDateTimeFromString=t._serialiseDate=t.ChangedPath=t._isIOSUserAgent=t._areEqual=t._last=t._removeFromArray=t._EmptyArray=t._getAriaPosInSet=t._setAriaHidden=t._setAriaSetSize=t._setAriaPosInSet=t._setAriaSelected=t._setAriaActiveDescendant=t._setAriaRowCount=t._setAriaColCount=t._setAriaSort=t._removeAriaSort=t._removeAriaExpanded=t._setAriaHasPopup=t._setAriaDisabled=t._setAriaRowIndex=t._setAriaColSpan=t._setAriaColIndex=t._setAriaRole=t._setAriaControls=t._setAriaChecked=t._setAriaLabelledBy=t._setAriaExpanded=t._setAriaDescribedBy=t._setAriaLabel=t._setAriaLevel=t._isShowTooltipWhenTruncated=t._getShouldDisplayTooltip=t._shouldDisplayTooltip=t.TooltipFeature=t.BaseComponentWrapper=t._HeaderComp=t._BOOLEAN_MIXED_GRID_OPTIONS=t._ALL_GRID_OPTIONS=t._getCellByPosition=t._getRowNode=t._isSameRow=t._isRowBefore=t._createCellId=t._areCellsEqual=t._getLocaleTextFunc=t.LocaleService=void 0,t._focusNextGridCoreContainer=t._isKeyboardMode=t._focusGridInnerElement=t._findTabbableParent=t._findNextFocusableElement=t._focusInto=t._findFocusableElements=t._addFocusableContainerListener=t._isPromise=t.AgPromise=t._escapeString=t._mergeDeep=t._formatNumberCommas=t._isEventFromPrintableCharacter=t._defaultComparator=t._makeNull=t._toStringOrNull=t._jsonEquals=t._missing=t._exists=t._fuzzySuggestions=t._createIconNoSpan=t._createIcon=t._preInitErrMsg=t._errMsg=t._error=t._warn=t._waitUntil=t._doOnce=t._debounce=t._warnOnce=t._isElementInEventPath=t._isStopPropagationForAgGrid=t._stopPropagationForAgGrid=t._selectAllCells=t._preserveRangesWhile=t._observeResize=t._isNodeOrElement=t._getInnerWidth=t._getInnerHeight=t._bindCellRendererToHtmlElement=t._setVisible=t._setDisabled=t._setFixedWidth=t._isVisible=t._loadTemplate=t._radioCssClass=t._removeFromParent=t._clearElement=t._setDisplayed=void 0,t.RowApiModule=t.PaginationModule=t.ColumnApiModule=t.GridStateModule=t._ColumnGroupModule=t.HighlightChangesModule=t._KeyboardNavigationModule=t._PopupModule=t.InfiniteRowModelModule=t.CsvExportModule=t.ClientSideRowModelApiModule=t.ClientSideRowModelModule=t.AlignedGridsModule=t._SortModule=t._SharedMenuModule=t._SsrmInfiniteSharedApiModule=t._CsrmSsrmSharedApiModule=t._SharedRowSelectionModule=t.RowSelectionModule=t.CustomEditorModule=t.UndoRedoEditModule=t.SelectEditorModule=t.LargeTextEditorModule=t.TextEditorModule=t.CheckboxEditorModule=t.DateEditorModule=t.NumberEditorModule=t._EditCoreModule=t.ExternalFilterModule=t.DateFilterModule=t.NumberFilterModule=t.TextFilterModule=t.QuickFilterModule=t.CustomFilterModule=t._FilterValueModule=t._FilterCoreModule=t._ColumnFilterModule=t.RowDragModule=t.DragAndDropModule=t._SharedDragAndDropModule=t._HorizontalResizeModule=t._DragModule=t._ColumnMoveModule=t.ValidationModule=t._setUmd=t._getGridRegisteredModules=t.ModuleRegistry=t._downloadFile=t.BaseGridSerializingSession=t.BaseCreator=void 0,t.themeAlpine=t.styleMaterial=t.columnDropStylePlain=t.columnDropStyleBordered=t.tabStyleRolodex=t.tabStyleQuartz=t.tabStyleMaterial=t.tabStyleBase=t.tabStyleAlpine=t.buttonStyleQuartz=t.buttonStyleBase=t.buttonStyleBalham=t.buttonStyleAlpine=t.inputStyleUnderlined=t.inputStyleBordered=t.inputStyleBase=t.iconSetQuartzRegular=t.iconSetQuartzLight=t.iconSetQuartzBold=t.iconSetQuartz=t.iconSetMaterial=t.iconSetAlpine=t.iconOverrides=t.colorSchemeVariable=t.colorSchemeLightWarm=t.colorSchemeLightCold=t.colorSchemeLight=t.colorSchemeDarkWarm=t.colorSchemeDarkBlue=t.colorSchemeDark=t.checkboxStyleDefault=t._asThemeImpl=t.createTheme=t.createPart=t.AllCommunityModule=t._SharedExportModule=t.RowAutoHeightModule=t.LocaleModule=t.TooltipModule=t.EventApiModule=t.ColumnHoverModule=t.RowStyleModule=t.CellStyleModule=t.CellApiModule=t.ValueCacheModule=t.CellSpanModule=t.PinnedRowModule=t.ColumnAutoSizeModule=t.RenderApiModule=t.ScrollApiModule=void 0,t.themeQuartz=t.themeMaterial=t.themeBalham=void 0;const n=i(5608);var r=i(2716);Object.defineProperty(t,"_updateColumnState",{enumerable:!0,get:function(){return r._updateColumnState}}),Object.defineProperty(t,"_addColumnDefaultAndTypes",{enumerable:!0,get:function(){return r._addColumnDefaultAndTypes}}),Object.defineProperty(t,"_createColumnTree",{enumerable:!0,get:function(){return r._createColumnTree}});var o=i(3600);Object.defineProperty(t,"BaseColsService",{enumerable:!0,get:function(){return o.BaseColsService}});var s=i(2885);Object.defineProperty(t,"_resetColumnState",{enumerable:!0,get:function(){return s._resetColumnState}}),Object.defineProperty(t,"_applyColumnState",{enumerable:!0,get:function(){return s._applyColumnState}}),Object.defineProperty(t,"_getColumnState",{enumerable:!0,get:function(){return s._getColumnState}});var a=i(2294);Object.defineProperty(t,"ColumnKeyCreator",{enumerable:!0,get:function(){return a.ColumnKeyCreator}});var l=i(6034);Object.defineProperty(t,"GroupInstanceIdCreator",{enumerable:!0,get:function(){return l.GroupInstanceIdCreator}});var c=i(3146);Object.defineProperty(t,"GROUP_AUTO_COLUMN_ID",{enumerable:!0,get:function(){return c.GROUP_AUTO_COLUMN_ID}}),Object.defineProperty(t,"SELECTION_COLUMN_ID",{enumerable:!0,get:function(){return c.SELECTION_COLUMN_ID}}),Object.defineProperty(t,"ROW_NUMBERS_COLUMN_ID",{enumerable:!0,get:function(){return c.ROW_NUMBERS_COLUMN_ID}}),Object.defineProperty(t,"isRowNumberCol",{enumerable:!0,get:function(){return c.isRowNumberCol}}),Object.defineProperty(t,"isColumnSelectionCol",{enumerable:!0,get:function(){return c.isColumnSelectionCol}}),Object.defineProperty(t,"isColumnGroupAutoCol",{enumerable:!0,get:function(){return c.isColumnGroupAutoCol}}),Object.defineProperty(t,"_destroyColumnTree",{enumerable:!0,get:function(){return c._destroyColumnTree}}),Object.defineProperty(t,"_getColumnsFromTree",{enumerable:!0,get:function(){return c._getColumnsFromTree}}),Object.defineProperty(t,"_areColIdsEqual",{enumerable:!0,get:function(){return c._areColIdsEqual}}),Object.defineProperty(t,"_updateColsMap",{enumerable:!0,get:function(){return c._updateColsMap}}),Object.defineProperty(t,"_convertColumnEventSourceType",{enumerable:!0,get:function(){return c._convertColumnEventSourceType}}),Object.defineProperty(t,"_columnsMatch",{enumerable:!0,get:function(){return c._columnsMatch}});var d=i(3789);Object.defineProperty(t,"_EmptyBean",{enumerable:!0,get:function(){return d.EmptyBean}});var u=i(8020);Object.defineProperty(t,"RefPlaceholder",{enumerable:!0,get:function(){return u.RefPlaceholder}});var h=i(2036);Object.defineProperty(t,"_getFilterDetails",{enumerable:!0,get:function(){return h._getFilterDetails}}),Object.defineProperty(t,"_getFloatingFilterCompDetails",{enumerable:!0,get:function(){return h._getFloatingFilterCompDetails}}),Object.defineProperty(t,"_getCellRendererDetails",{enumerable:!0,get:function(){return h._getCellRendererDetails}}),Object.defineProperty(t,"_getEditorRendererDetails",{enumerable:!0,get:function(){return h._getEditorRendererDetails}}),Object.defineProperty(t,"_getInnerCellRendererDetails",{enumerable:!0,get:function(){return h._getInnerCellRendererDetails}});var p=i(4126);Object.defineProperty(t,"_unwrapUserComp",{enumerable:!0,get:function(){return p._unwrapUserComp}});var f=i(8731);Object.defineProperty(t,"BeanStub",{enumerable:!0,get:function(){return f.BeanStub}});var g=i(2903);Object.defineProperty(t,"DragSourceType",{enumerable:!0,get:function(){return g.DragSourceType}});var m=i(3355);Object.defineProperty(t,"AgColumn",{enumerable:!0,get:function(){return m.AgColumn}}),Object.defineProperty(t,"isColumn",{enumerable:!0,get:function(){return m.isColumn}});var v=i(6908);Object.defineProperty(t,"AgColumnGroup",{enumerable:!0,get:function(){return v.AgColumnGroup}}),Object.defineProperty(t,"isColumnGroup",{enumerable:!0,get:function(){return v.isColumnGroup}});var b=i(9409);Object.defineProperty(t,"AgProvidedColumnGroup",{enumerable:!0,get:function(){return b.AgProvidedColumnGroup}}),Object.defineProperty(t,"isProvidedColumnGroup",{enumerable:!0,get:function(){return b.isProvidedColumnGroup}});var y=i(3373);Object.defineProperty(t,"RowNode",{enumerable:!0,get:function(){return y.RowNode}}),Object.defineProperty(t,"_ROW_ID_PREFIX_ROW_GROUP",{enumerable:!0,get:function(){return y.ROW_ID_PREFIX_ROW_GROUP}});var w=i(9888);Object.defineProperty(t,"_createGlobalRowEvent",{enumerable:!0,get:function(){return w._createGlobalRowEvent}});var C=i(1854);Object.defineProperty(t,"FilterWrapperComp",{enumerable:!0,get:function(){return C.FilterWrapperComp}});var _=i(2245);Object.defineProperty(t,"ProvidedFilter",{enumerable:!0,get:function(){return _.ProvidedFilter}});var S=i(9990);Object.defineProperty(t,"_getDefaultFloatingFilterType",{enumerable:!0,get:function(){return S._getDefaultFloatingFilterType}});var A=i(520);Object.defineProperty(t,"GridBodyCtrl",{enumerable:!0,get:function(){return A.GridBodyCtrl}});var x=i(8399);Object.defineProperty(t,"_getCellPositionForEvent",{enumerable:!0,get:function(){return x._getCellPositionForEvent}}),Object.defineProperty(t,"_getNormalisedMousePosition",{enumerable:!0,get:function(){return x._getNormalisedMousePosition}});var E=i(335);Object.defineProperty(t,"FakeHScrollComp",{enumerable:!0,get:function(){return E.FakeHScrollComp}});var T=i(6070);Object.defineProperty(t,"FakeVScrollComp",{enumerable:!0,get:function(){return T.FakeVScrollComp}});var D=i(8115);Object.defineProperty(t,"RowContainerCtrl",{enumerable:!0,get:function(){return D.RowContainerCtrl}}),Object.defineProperty(t,"_getRowContainerOptions",{enumerable:!0,get:function(){return D._getRowContainerOptions}}),Object.defineProperty(t,"_getRowSpanContainerClass",{enumerable:!0,get:function(){return D._getRowSpanContainerClass}}),Object.defineProperty(t,"_getRowContainerClass",{enumerable:!0,get:function(){return D._getRowContainerClass}}),Object.defineProperty(t,"_getRowViewportClass",{enumerable:!0,get:function(){return D._getRowViewportClass}});var M=i(1295);Object.defineProperty(t,"_getHeaderClassesFromColDef",{enumerable:!0,get:function(){return M._getHeaderClassesFromColDef}}),Object.defineProperty(t,"_getToolPanelClassesFromColDef",{enumerable:!0,get:function(){return M._getToolPanelClassesFromColDef}});var k=i(9);Object.defineProperty(t,"GridHeaderCtrl",{enumerable:!0,get:function(){return k.GridHeaderCtrl}});var P=i(8934);Object.defineProperty(t,"HeaderRowContainerCtrl",{enumerable:!0,get:function(){return P.HeaderRowContainerCtrl}});var R=i(1323);Object.defineProperty(t,"_getFloatingFiltersHeight",{enumerable:!0,get:function(){return R.getFloatingFiltersHeight}}),Object.defineProperty(t,"_getHeaderRowCount",{enumerable:!0,get:function(){return R.getHeaderRowCount}});var I=i(2612);Object.defineProperty(t,"_requestAnimationFrame",{enumerable:!0,get:function(){return I._requestAnimationFrame}});var O=i(8994);Object.defineProperty(t,"_setColMenuVisible",{enumerable:!0,get:function(){return O._setColMenuVisible}});var N=i(2147);Object.defineProperty(t,"PositionableFeature",{enumerable:!0,get:function(){return N.PositionableFeature}});var L=i(814);Object.defineProperty(t,"_getCellCtrlForEventTarget",{enumerable:!0,get:function(){return L._getCellCtrlForEventTarget}});var F=i(1734);Object.defineProperty(t,"CssClassManager",{enumerable:!0,get:function(){return F.CssClassManager}});var $=i(1954);Object.defineProperty(t,"AbstractClientSideNodeManager",{enumerable:!0,get:function(){return $.AbstractClientSideNodeManager}});var G=i(3590);Object.defineProperty(t,"ServerSideTransactionResultStatus",{enumerable:!0,get:function(){return G.ServerSideTransactionResultStatus}});var B=i(3306);Object.defineProperty(t,"BaseSelectionService",{enumerable:!0,get:function(){return B.BaseSelectionService}});var H=i(8085);Object.defineProperty(t,"AgAbstractInputField",{enumerable:!0,get:function(){return H.AgAbstractInputField}});var z=i(66);Object.defineProperty(t,"AgCheckbox",{enumerable:!0,get:function(){return z.AgCheckbox}}),Object.defineProperty(t,"AgCheckboxSelector",{enumerable:!0,get:function(){return z.AgCheckboxSelector}});var W=i(7336);Object.defineProperty(t,"AgRadioButton",{enumerable:!0,get:function(){return W.AgRadioButton}});var V=i(4927);Object.defineProperty(t,"AgToggleButton",{enumerable:!0,get:function(){return V.AgToggleButton}}),Object.defineProperty(t,"AgToggleButtonSelector",{enumerable:!0,get:function(){return V.AgToggleButtonSelector}});var j=i(5946);Object.defineProperty(t,"AgInputTextField",{enumerable:!0,get:function(){return j.AgInputTextField}}),Object.defineProperty(t,"AgInputTextFieldSelector",{enumerable:!0,get:function(){return j.AgInputTextFieldSelector}});var U=i(6209);Object.defineProperty(t,"AgInputTextArea",{enumerable:!0,get:function(){return U.AgInputTextArea}});var Y=i(8792);Object.defineProperty(t,"AgInputNumberField",{enumerable:!0,get:function(){return Y.AgInputNumberField}}),Object.defineProperty(t,"AgInputNumberFieldSelector",{enumerable:!0,get:function(){return Y.AgInputNumberFieldSelector}});var q=i(3611);Object.defineProperty(t,"AgInputDateField",{enumerable:!0,get:function(){return q.AgInputDateField}});var K=i(159);Object.defineProperty(t,"AgSelect",{enumerable:!0,get:function(){return K.AgSelect}}),Object.defineProperty(t,"AgSelectSelector",{enumerable:!0,get:function(){return K.AgSelectSelector}});var X=i(8020);Object.defineProperty(t,"Component",{enumerable:!0,get:function(){return X.Component}});var Z=i(1772);Object.defineProperty(t,"ManagedFocusFeature",{enumerable:!0,get:function(){return Z.ManagedFocusFeature}}),Object.defineProperty(t,"_FOCUS_MANAGED_CLASS",{enumerable:!0,get:function(){return Z.FOCUS_MANAGED_CLASS}});var Q=i(8332);Object.defineProperty(t,"TabGuardComp",{enumerable:!0,get:function(){return Q.TabGuardComp}});var J=i(6);Object.defineProperty(t,"TabGuardCtrl",{enumerable:!0,get:function(){return J.TabGuardCtrl}}),Object.defineProperty(t,"TabGuardClassNames",{enumerable:!0,get:function(){return J.TabGuardClassNames}});var ee=i(1017);Object.defineProperty(t,"TabGuardFeature",{enumerable:!0,get:function(){return ee.TabGuardFeature}});var te=i(3598);Object.defineProperty(t,"PopupComponent",{enumerable:!0,get:function(){return te.PopupComponent}});var ie=i(9644);Object.defineProperty(t,"TouchListener",{enumerable:!0,get:function(){return ie.TouchListener}});var ne=i(2747);Object.defineProperty(t,"AgAbstractLabel",{enumerable:!0,get:function(){return ne.AgAbstractLabel}});var re=i(9497);Object.defineProperty(t,"AgPickerField",{enumerable:!0,get:function(){return re.AgPickerField}});var oe=i(5961);Object.defineProperty(t,"CellRangeType",{enumerable:!0,get:function(){return oe.CellRangeType}});var se=i(5628);Object.defineProperty(t,"AutoScrollService",{enumerable:!0,get:function(){return se.AutoScrollService}});var ae=i(6511);Object.defineProperty(t,"VanillaFrameworkOverrides",{enumerable:!0,get:function(){return ae.VanillaFrameworkOverrides}});var le=i(9853);Object.defineProperty(t,"KeyCode",{enumerable:!0,get:function(){return le.KeyCode}});var ce=i(1657);Object.defineProperty(t,"GridCoreCreator",{enumerable:!0,get:function(){return ce.GridCoreCreator}}),Object.defineProperty(t,"createGrid",{enumerable:!0,get:function(){return ce.createGrid}}),Object.defineProperty(t,"provideGlobalGridOptions",{enumerable:!0,get:function(){return ce.provideGlobalGridOptions}}),Object.defineProperty(t,"_getGlobalGridOption",{enumerable:!0,get:function(){return ce._getGlobalGridOption}});var de=i(6876);Object.defineProperty(t,"_getClientSideRowModel",{enumerable:!0,get:function(){return de._getClientSideRowModel}}),Object.defineProperty(t,"_getServerSideRowModel",{enumerable:!0,get:function(){return de._getServerSideRowModel}});var ue=i(3080);Object.defineProperty(t,"_ALL_EVENTS",{enumerable:!0,get:function(){return ue._ALL_EVENTS}}),Object.defineProperty(t,"_PUBLIC_EVENTS",{enumerable:!0,get:function(){return ue._PUBLIC_EVENTS}});var he=i(7274);Object.defineProperty(t,"_addGridCommonParams",{enumerable:!0,get:function(){return he._addGridCommonParams}}),Object.defineProperty(t,"_getCallbackForEvent",{enumerable:!0,get:function(){return he._getCallbackForEvent}}),Object.defineProperty(t,"_combineAttributesAndGridOptions",{enumerable:!0,get:function(){return he._combineAttributesAndGridOptions}}),Object.defineProperty(t,"_processOnChange",{enumerable:!0,get:function(){return he._processOnChange}}),Object.defineProperty(t,"_getMaxConcurrentDatasourceRequests",{enumerable:!0,get:function(){return he._getMaxConcurrentDatasourceRequests}}),Object.defineProperty(t,"_getRowIdCallback",{enumerable:!0,get:function(){return he._getRowIdCallback}}),Object.defineProperty(t,"_getRowHeightForNode",{enumerable:!0,get:function(){return he._getRowHeightForNode}}),Object.defineProperty(t,"_isDomLayout",{enumerable:!0,get:function(){return he._isDomLayout}}),Object.defineProperty(t,"_isAnimateRows",{enumerable:!0,get:function(){return he._isAnimateRows}}),Object.defineProperty(t,"_getGrandTotalRow",{enumerable:!0,get:function(){return he._getGrandTotalRow}}),Object.defineProperty(t,"_getGroupTotalRowCallback",{enumerable:!0,get:function(){return he._getGroupTotalRowCallback}}),Object.defineProperty(t,"_isGroupMultiAutoColumn",{enumerable:!0,get:function(){return he._isGroupMultiAutoColumn}}),Object.defineProperty(t,"_isColumnsSortingCoupledToGroup",{enumerable:!0,get:function(){return he._isColumnsSortingCoupledToGroup}}),Object.defineProperty(t,"_isClientSideRowModel",{enumerable:!0,get:function(){return he._isClientSideRowModel}}),Object.defineProperty(t,"_isServerSideRowModel",{enumerable:!0,get:function(){return he._isServerSideRowModel}}),Object.defineProperty(t,"_isGroupUseEntireRow",{enumerable:!0,get:function(){return he._isGroupUseEntireRow}}),Object.defineProperty(t,"_canSkipShowingRowGroup",{enumerable:!0,get:function(){return he._canSkipShowingRowGroup}}),Object.defineProperty(t,"_getRowHeightAsNumber",{enumerable:!0,get:function(){return he._getRowHeightAsNumber}}),Object.defineProperty(t,"_shouldUpdateColVisibilityAfterGroup",{enumerable:!0,get:function(){return he._shouldUpdateColVisibilityAfterGroup}}),Object.defineProperty(t,"_getActiveDomElement",{enumerable:!0,get:function(){return he._getActiveDomElement}}),Object.defineProperty(t,"_isNothingFocused",{enumerable:!0,get:function(){return he._isNothingFocused}}),Object.defineProperty(t,"_getDocument",{enumerable:!0,get:function(){return he._getDocument}}),Object.defineProperty(t,"_getPageBody",{enumerable:!0,get:function(){return he._getPageBody}}),Object.defineProperty(t,"_anchorElementToMouseMoveEvent",{enumerable:!0,get:function(){return he._anchorElementToMouseMoveEvent}}),Object.defineProperty(t,"_getRootNode",{enumerable:!0,get:function(){return he._getRootNode}}),Object.defineProperty(t,"_getGroupAggFiltering",{enumerable:!0,get:function(){return he._getGroupAggFiltering}}),Object.defineProperty(t,"_isRowSelection",{enumerable:!0,get:function(){return he._isRowSelection}}),Object.defineProperty(t,"_isGetRowHeightFunction",{enumerable:!0,get:function(){return he._isGetRowHeightFunction}}),Object.defineProperty(t,"_getGroupSelection",{enumerable:!0,get:function(){return he._getGroupSelection}}),Object.defineProperty(t,"_getGroupSelectsDescendants",{enumerable:!0,get:function(){return he._getGroupSelectsDescendants}}),Object.defineProperty(t,"_getIsRowSelectable",{enumerable:!0,get:function(){return he._getIsRowSelectable}}),Object.defineProperty(t,"_getCheckboxes",{enumerable:!0,get:function(){return he._getCheckboxes}}),Object.defineProperty(t,"_getCheckboxLocation",{enumerable:!0,get:function(){return he._getCheckboxLocation}}),Object.defineProperty(t,"_getHeaderCheckbox",{enumerable:!0,get:function(){return he._getHeaderCheckbox}}),Object.defineProperty(t,"_isMultiRowSelection",{enumerable:!0,get:function(){return he._isMultiRowSelection}}),Object.defineProperty(t,"_getFillHandle",{enumerable:!0,get:function(){return he._getFillHandle}}),Object.defineProperty(t,"_isCellSelectionEnabled",{enumerable:!0,get:function(){return he._isCellSelectionEnabled}}),Object.defineProperty(t,"_getSuppressMultiRanges",{enumerable:!0,get:function(){return he._getSuppressMultiRanges}}),Object.defineProperty(t,"_getRowSelectionMode",{enumerable:!0,get:function(){return he._getRowSelectionMode}}),Object.defineProperty(t,"_isLegacyMenuEnabled",{enumerable:!0,get:function(){return he._isLegacyMenuEnabled}}),Object.defineProperty(t,"_isColumnMenuAnchoringEnabled",{enumerable:!0,get:function(){return he._isColumnMenuAnchoringEnabled}}),Object.defineProperty(t,"_isUsingNewRowSelectionAPI",{enumerable:!0,get:function(){return he._isUsingNewRowSelectionAPI}}),Object.defineProperty(t,"_isUsingNewCellSelectionAPI",{enumerable:!0,get:function(){return he._isUsingNewCellSelectionAPI}}),Object.defineProperty(t,"_isGroupRowsSticky",{enumerable:!0,get:function(){return he._isGroupRowsSticky}});var pe=i(5889);Object.defineProperty(t,"LocalEventService",{enumerable:!0,get:function(){return pe.LocalEventService}});var fe=i(7600);Object.defineProperty(t,"GridCtrl",{enumerable:!0,get:function(){return fe.GridCtrl}});var ge=i(9944);Object.defineProperty(t,"LocaleService",{enumerable:!0,get:function(){return ge.LocaleService}});var me=i(7230);Object.defineProperty(t,"_getLocaleTextFunc",{enumerable:!0,get:function(){return me._getLocaleTextFunc}});var ve=i(6257);Object.defineProperty(t,"_areCellsEqual",{enumerable:!0,get:function(){return ve._areCellsEqual}}),Object.defineProperty(t,"_createCellId",{enumerable:!0,get:function(){return ve._createCellId}}),Object.defineProperty(t,"_isRowBefore",{enumerable:!0,get:function(){return ve._isRowBefore}}),Object.defineProperty(t,"_isSameRow",{enumerable:!0,get:function(){return ve._isSameRow}}),Object.defineProperty(t,"_getRowNode",{enumerable:!0,get:function(){return ve._getRowNode}}),Object.defineProperty(t,"_getCellByPosition",{enumerable:!0,get:function(){return ve._getCellByPosition}});var be=i(920);Object.defineProperty(t,"_ALL_GRID_OPTIONS",{enumerable:!0,get:function(){return be._ALL_GRID_OPTIONS}}),Object.defineProperty(t,"_BOOLEAN_MIXED_GRID_OPTIONS",{enumerable:!0,get:function(){return be._BOOLEAN_MIXED_GRID_OPTIONS}});var ye=i(9270);Object.defineProperty(t,"_HeaderComp",{enumerable:!0,get:function(){return ye.HeaderComp}});var we=i(8759);Object.defineProperty(t,"BaseComponentWrapper",{enumerable:!0,get:function(){return we.BaseComponentWrapper}});var Ce=i(3386);Object.defineProperty(t,"TooltipFeature",{enumerable:!0,get:function(){return Ce.TooltipFeature}}),Object.defineProperty(t,"_shouldDisplayTooltip",{enumerable:!0,get:function(){return Ce._shouldDisplayTooltip}}),Object.defineProperty(t,"_getShouldDisplayTooltip",{enumerable:!0,get:function(){return Ce._getShouldDisplayTooltip}}),Object.defineProperty(t,"_isShowTooltipWhenTruncated",{enumerable:!0,get:function(){return Ce._isShowTooltipWhenTruncated}});var _e=i(5230);Object.defineProperty(t,"_setAriaLevel",{enumerable:!0,get:function(){return _e._setAriaLevel}}),Object.defineProperty(t,"_setAriaLabel",{enumerable:!0,get:function(){return _e._setAriaLabel}}),Object.defineProperty(t,"_setAriaDescribedBy",{enumerable:!0,get:function(){return _e._setAriaDescribedBy}}),Object.defineProperty(t,"_setAriaExpanded",{enumerable:!0,get:function(){return _e._setAriaExpanded}}),Object.defineProperty(t,"_setAriaLabelledBy",{enumerable:!0,get:function(){return _e._setAriaLabelledBy}}),Object.defineProperty(t,"_setAriaChecked",{enumerable:!0,get:function(){return _e._setAriaChecked}}),Object.defineProperty(t,"_setAriaControls",{enumerable:!0,get:function(){return _e._setAriaControls}}),Object.defineProperty(t,"_setAriaRole",{enumerable:!0,get:function(){return _e._setAriaRole}}),Object.defineProperty(t,"_setAriaColIndex",{enumerable:!0,get:function(){return _e._setAriaColIndex}}),Object.defineProperty(t,"_setAriaColSpan",{enumerable:!0,get:function(){return _e._setAriaColSpan}}),Object.defineProperty(t,"_setAriaRowIndex",{enumerable:!0,get:function(){return _e._setAriaRowIndex}}),Object.defineProperty(t,"_setAriaDisabled",{enumerable:!0,get:function(){return _e._setAriaDisabled}}),Object.defineProperty(t,"_setAriaHasPopup",{enumerable:!0,get:function(){return _e._setAriaHasPopup}}),Object.defineProperty(t,"_removeAriaExpanded",{enumerable:!0,get:function(){return _e._removeAriaExpanded}}),Object.defineProperty(t,"_removeAriaSort",{enumerable:!0,get:function(){return _e._removeAriaSort}}),Object.defineProperty(t,"_setAriaSort",{enumerable:!0,get:function(){return _e._setAriaSort}}),Object.defineProperty(t,"_setAriaColCount",{enumerable:!0,get:function(){return _e._setAriaColCount}}),Object.defineProperty(t,"_setAriaRowCount",{enumerable:!0,get:function(){return _e._setAriaRowCount}}),Object.defineProperty(t,"_setAriaActiveDescendant",{enumerable:!0,get:function(){return _e._setAriaActiveDescendant}}),Object.defineProperty(t,"_setAriaSelected",{enumerable:!0,get:function(){return _e._setAriaSelected}}),Object.defineProperty(t,"_setAriaPosInSet",{enumerable:!0,get:function(){return _e._setAriaPosInSet}}),Object.defineProperty(t,"_setAriaSetSize",{enumerable:!0,get:function(){return _e._setAriaSetSize}}),Object.defineProperty(t,"_setAriaHidden",{enumerable:!0,get:function(){return _e._setAriaHidden}}),Object.defineProperty(t,"_getAriaPosInSet",{enumerable:!0,get:function(){return _e._getAriaPosInSet}});var Se=i(1502);Object.defineProperty(t,"_EmptyArray",{enumerable:!0,get:function(){return Se._EmptyArray}}),Object.defineProperty(t,"_removeFromArray",{enumerable:!0,get:function(){return Se._removeFromArray}}),Object.defineProperty(t,"_last",{enumerable:!0,get:function(){return Se._last}}),Object.defineProperty(t,"_areEqual",{enumerable:!0,get:function(){return Se._areEqual}});var Ae=i(8667);Object.defineProperty(t,"_isIOSUserAgent",{enumerable:!0,get:function(){return Ae._isIOSUserAgent}});var xe=i(6800);Object.defineProperty(t,"ChangedPath",{enumerable:!0,get:function(){return xe.ChangedPath}});var Ee=i(9827);Object.defineProperty(t,"_serialiseDate",{enumerable:!0,get:function(){return Ee._serialiseDate}}),Object.defineProperty(t,"_parseDateTimeFromString",{enumerable:!0,get:function(){return Ee._parseDateTimeFromString}});var Te=i(3507);Object.defineProperty(t,"_getAbsoluteHeight",{enumerable:!0,get:function(){return Te._getAbsoluteHeight}}),Object.defineProperty(t,"_getAbsoluteWidth",{enumerable:!0,get:function(){return Te._getAbsoluteWidth}}),Object.defineProperty(t,"_setDisplayed",{enumerable:!0,get:function(){return Te._setDisplayed}}),Object.defineProperty(t,"_clearElement",{enumerable:!0,get:function(){return Te._clearElement}}),Object.defineProperty(t,"_removeFromParent",{enumerable:!0,get:function(){return Te._removeFromParent}}),Object.defineProperty(t,"_radioCssClass",{enumerable:!0,get:function(){return Te._radioCssClass}}),Object.defineProperty(t,"_loadTemplate",{enumerable:!0,get:function(){return Te._loadTemplate}}),Object.defineProperty(t,"_isVisible",{enumerable:!0,get:function(){return Te._isVisible}}),Object.defineProperty(t,"_setFixedWidth",{enumerable:!0,get:function(){return Te._setFixedWidth}}),Object.defineProperty(t,"_setDisabled",{enumerable:!0,get:function(){return Te._setDisabled}}),Object.defineProperty(t,"_setVisible",{enumerable:!0,get:function(){return Te._setVisible}}),Object.defineProperty(t,"_bindCellRendererToHtmlElement",{enumerable:!0,get:function(){return Te._bindCellRendererToHtmlElement}}),Object.defineProperty(t,"_getInnerHeight",{enumerable:!0,get:function(){return Te._getInnerHeight}}),Object.defineProperty(t,"_getInnerWidth",{enumerable:!0,get:function(){return Te._getInnerWidth}}),Object.defineProperty(t,"_isNodeOrElement",{enumerable:!0,get:function(){return Te._isNodeOrElement}}),Object.defineProperty(t,"_observeResize",{enumerable:!0,get:function(){return Te._observeResize}}),Object.defineProperty(t,"_preserveRangesWhile",{enumerable:!0,get:function(){return Te._preserveRangesWhile}});var De=i(4009);Object.defineProperty(t,"_selectAllCells",{enumerable:!0,get:function(){return De._selectAllCells}});var Me=i(2979);Object.defineProperty(t,"_stopPropagationForAgGrid",{enumerable:!0,get:function(){return Me._stopPropagationForAgGrid}}),Object.defineProperty(t,"_isStopPropagationForAgGrid",{enumerable:!0,get:function(){return Me._isStopPropagationForAgGrid}}),Object.defineProperty(t,"_isElementInEventPath",{enumerable:!0,get:function(){return Me._isElementInEventPath}});var ke=i(2043);Object.defineProperty(t,"_warnOnce",{enumerable:!0,get:function(){return ke._warnOnce}}),Object.defineProperty(t,"_debounce",{enumerable:!0,get:function(){return ke._debounce}}),Object.defineProperty(t,"_doOnce",{enumerable:!0,get:function(){return ke._doOnce}}),Object.defineProperty(t,"_waitUntil",{enumerable:!0,get:function(){return ke._waitUntil}});var Pe=i(7764);Object.defineProperty(t,"_warn",{enumerable:!0,get:function(){return Pe._warn}}),Object.defineProperty(t,"_error",{enumerable:!0,get:function(){return Pe._error}}),Object.defineProperty(t,"_errMsg",{enumerable:!0,get:function(){return Pe._errMsg}}),Object.defineProperty(t,"_preInitErrMsg",{enumerable:!0,get:function(){return Pe._preInitErrMsg}});var Re=i(9970);Object.defineProperty(t,"_createIcon",{enumerable:!0,get:function(){return Re._createIcon}}),Object.defineProperty(t,"_createIconNoSpan",{enumerable:!0,get:function(){return Re._createIconNoSpan}});var Ie=i(1298);Object.defineProperty(t,"_fuzzySuggestions",{enumerable:!0,get:function(){return Ie._fuzzySuggestions}});var Oe=i(4422);Object.defineProperty(t,"_exists",{enumerable:!0,get:function(){return Oe._exists}}),Object.defineProperty(t,"_missing",{enumerable:!0,get:function(){return Oe._missing}}),Object.defineProperty(t,"_jsonEquals",{enumerable:!0,get:function(){return Oe._jsonEquals}}),Object.defineProperty(t,"_toStringOrNull",{enumerable:!0,get:function(){return Oe._toStringOrNull}}),Object.defineProperty(t,"_makeNull",{enumerable:!0,get:function(){return Oe._makeNull}}),Object.defineProperty(t,"_defaultComparator",{enumerable:!0,get:function(){return Oe._defaultComparator}});var Ne=i(6466);Object.defineProperty(t,"_isEventFromPrintableCharacter",{enumerable:!0,get:function(){return Ne._isEventFromPrintableCharacter}});var Le=i(7698);Object.defineProperty(t,"_formatNumberCommas",{enumerable:!0,get:function(){return Le._formatNumberCommas}});var Fe=i(6996);Object.defineProperty(t,"_mergeDeep",{enumerable:!0,get:function(){return Fe._mergeDeep}});var $e=i(7766);Object.defineProperty(t,"_escapeString",{enumerable:!0,get:function(){return $e._escapeString}});var Ge=i(7990);Object.defineProperty(t,"AgPromise",{enumerable:!0,get:function(){return Ge.AgPromise}}),Object.defineProperty(t,"_isPromise",{enumerable:!0,get:function(){return Ge._isPromise}});var Be=i(2331);Object.defineProperty(t,"_addFocusableContainerListener",{enumerable:!0,get:function(){return Be._addFocusableContainerListener}}),Object.defineProperty(t,"_findFocusableElements",{enumerable:!0,get:function(){return Be._findFocusableElements}}),Object.defineProperty(t,"_focusInto",{enumerable:!0,get:function(){return Be._focusInto}}),Object.defineProperty(t,"_findNextFocusableElement",{enumerable:!0,get:function(){return Be._findNextFocusableElement}}),Object.defineProperty(t,"_findTabbableParent",{enumerable:!0,get:function(){return Be._findTabbableParent}}),Object.defineProperty(t,"_focusGridInnerElement",{enumerable:!0,get:function(){return Be._focusGridInnerElement}}),Object.defineProperty(t,"_isKeyboardMode",{enumerable:!0,get:function(){return Be._isKeyboardMode}}),Object.defineProperty(t,"_focusNextGridCoreContainer",{enumerable:!0,get:function(){return Be._focusNextGridCoreContainer}}),n.__exportStar(i(7419),t),n.__exportStar(i(7919),t);var He=i(7331);Object.defineProperty(t,"BaseCreator",{enumerable:!0,get:function(){return He.BaseCreator}});var ze=i(8376);Object.defineProperty(t,"BaseGridSerializingSession",{enumerable:!0,get:function(){return ze.BaseGridSerializingSession}});var We=i(3885);Object.defineProperty(t,"_downloadFile",{enumerable:!0,get:function(){return We._downloadFile}});var Ve=i(2132);Object.defineProperty(t,"ModuleRegistry",{enumerable:!0,get:function(){return Ve.ModuleRegistry}}),Object.defineProperty(t,"_getGridRegisteredModules",{enumerable:!0,get:function(){return Ve._getGridRegisteredModules}}),Object.defineProperty(t,"_setUmd",{enumerable:!0,get:function(){return Ve._setUmd}});var je=i(5010);Object.defineProperty(t,"ValidationModule",{enumerable:!0,get:function(){return je.ValidationModule}});var Ue=i(4074);Object.defineProperty(t,"_ColumnMoveModule",{enumerable:!0,get:function(){return Ue.ColumnMoveModule}});var Ye=i(4388);Object.defineProperty(t,"_DragModule",{enumerable:!0,get:function(){return Ye.DragModule}}),Object.defineProperty(t,"_HorizontalResizeModule",{enumerable:!0,get:function(){return Ye.HorizontalResizeModule}}),Object.defineProperty(t,"_SharedDragAndDropModule",{enumerable:!0,get:function(){return Ye.SharedDragAndDropModule}}),Object.defineProperty(t,"DragAndDropModule",{enumerable:!0,get:function(){return Ye.DragAndDropModule}}),Object.defineProperty(t,"RowDragModule",{enumerable:!0,get:function(){return Ye.RowDragModule}});var qe=i(5432);Object.defineProperty(t,"_ColumnFilterModule",{enumerable:!0,get:function(){return qe.ColumnFilterModule}}),Object.defineProperty(t,"_FilterCoreModule",{enumerable:!0,get:function(){return qe.FilterCoreModule}}),Object.defineProperty(t,"_FilterValueModule",{enumerable:!0,get:function(){return qe.FilterValueModule}}),Object.defineProperty(t,"CustomFilterModule",{enumerable:!0,get:function(){return qe.CustomFilterModule}}),Object.defineProperty(t,"QuickFilterModule",{enumerable:!0,get:function(){return qe.QuickFilterModule}}),Object.defineProperty(t,"TextFilterModule",{enumerable:!0,get:function(){return qe.TextFilterModule}}),Object.defineProperty(t,"NumberFilterModule",{enumerable:!0,get:function(){return qe.NumberFilterModule}}),Object.defineProperty(t,"DateFilterModule",{enumerable:!0,get:function(){return qe.DateFilterModule}}),Object.defineProperty(t,"ExternalFilterModule",{enumerable:!0,get:function(){return qe.ExternalFilterModule}});var Ke=i(4652);Object.defineProperty(t,"_EditCoreModule",{enumerable:!0,get:function(){return Ke.EditCoreModule}}),Object.defineProperty(t,"NumberEditorModule",{enumerable:!0,get:function(){return Ke.NumberEditorModule}}),Object.defineProperty(t,"DateEditorModule",{enumerable:!0,get:function(){return Ke.DateEditorModule}}),Object.defineProperty(t,"CheckboxEditorModule",{enumerable:!0,get:function(){return Ke.CheckboxEditorModule}}),Object.defineProperty(t,"TextEditorModule",{enumerable:!0,get:function(){return Ke.TextEditorModule}}),Object.defineProperty(t,"LargeTextEditorModule",{enumerable:!0,get:function(){return Ke.LargeTextEditorModule}}),Object.defineProperty(t,"SelectEditorModule",{enumerable:!0,get:function(){return Ke.SelectEditorModule}}),Object.defineProperty(t,"UndoRedoEditModule",{enumerable:!0,get:function(){return Ke.UndoRedoEditModule}}),Object.defineProperty(t,"CustomEditorModule",{enumerable:!0,get:function(){return Ke.CustomEditorModule}});var Xe=i(3352);Object.defineProperty(t,"RowSelectionModule",{enumerable:!0,get:function(){return Xe.RowSelectionModule}}),Object.defineProperty(t,"_SharedRowSelectionModule",{enumerable:!0,get:function(){return Xe.SharedRowSelectionModule}});var Ze=i(6437);Object.defineProperty(t,"_CsrmSsrmSharedApiModule",{enumerable:!0,get:function(){return Ze.CsrmSsrmSharedApiModule}}),Object.defineProperty(t,"_SsrmInfiniteSharedApiModule",{enumerable:!0,get:function(){return Ze.SsrmInfiniteSharedApiModule}});var Qe=i(3472);Object.defineProperty(t,"_SharedMenuModule",{enumerable:!0,get:function(){return Qe.SharedMenuModule}});var Je=i(6620);Object.defineProperty(t,"_SortModule",{enumerable:!0,get:function(){return Je.SortModule}});var et=i(2074);Object.defineProperty(t,"AlignedGridsModule",{enumerable:!0,get:function(){return et.AlignedGridsModule}});var tt=i(9722);Object.defineProperty(t,"ClientSideRowModelModule",{enumerable:!0,get:function(){return tt.ClientSideRowModelModule}}),Object.defineProperty(t,"ClientSideRowModelApiModule",{enumerable:!0,get:function(){return tt.ClientSideRowModelApiModule}});var it=i(9734);Object.defineProperty(t,"CsvExportModule",{enumerable:!0,get:function(){return it.CsvExportModule}});var nt=i(4002);Object.defineProperty(t,"InfiniteRowModelModule",{enumerable:!0,get:function(){return nt.InfiniteRowModelModule}});var rt=i(3137);Object.defineProperty(t,"_PopupModule",{enumerable:!0,get:function(){return rt.PopupModule}});var ot=i(928);Object.defineProperty(t,"_KeyboardNavigationModule",{enumerable:!0,get:function(){return ot.KeyboardNavigationModule}});var st=i(3498);Object.defineProperty(t,"HighlightChangesModule",{enumerable:!0,get:function(){return st.HighlightChangesModule}});var at=i(6041);Object.defineProperty(t,"_ColumnGroupModule",{enumerable:!0,get:function(){return at.ColumnGroupModule}});var lt=i(6989);Object.defineProperty(t,"GridStateModule",{enumerable:!0,get:function(){return lt.GridStateModule}});var ct=i(2027);Object.defineProperty(t,"ColumnApiModule",{enumerable:!0,get:function(){return ct.ColumnApiModule}});var dt=i(1824);Object.defineProperty(t,"PaginationModule",{enumerable:!0,get:function(){return dt.PaginationModule}});var ut=i(9642);Object.defineProperty(t,"RowApiModule",{enumerable:!0,get:function(){return ut.RowApiModule}}),Object.defineProperty(t,"ScrollApiModule",{enumerable:!0,get:function(){return ut.ScrollApiModule}});var ht=i(6964);Object.defineProperty(t,"RenderApiModule",{enumerable:!0,get:function(){return ht.RenderApiModule}});var pt=i(3856);Object.defineProperty(t,"ColumnAutoSizeModule",{enumerable:!0,get:function(){return pt.ColumnAutoSizeModule}});var ft=i(5423);Object.defineProperty(t,"PinnedRowModule",{enumerable:!0,get:function(){return ft.PinnedRowModule}});var gt=i(4265);Object.defineProperty(t,"CellSpanModule",{enumerable:!0,get:function(){return gt.CellSpanModule}});var mt=i(6431);Object.defineProperty(t,"ValueCacheModule",{enumerable:!0,get:function(){return mt.ValueCacheModule}}),Object.defineProperty(t,"CellApiModule",{enumerable:!0,get:function(){return mt.CellApiModule}});var vt=i(8594);Object.defineProperty(t,"CellStyleModule",{enumerable:!0,get:function(){return vt.CellStyleModule}}),Object.defineProperty(t,"RowStyleModule",{enumerable:!0,get:function(){return vt.RowStyleModule}});var bt=i(1690);Object.defineProperty(t,"ColumnHoverModule",{enumerable:!0,get:function(){return bt.ColumnHoverModule}});var yt=i(9410);Object.defineProperty(t,"EventApiModule",{enumerable:!0,get:function(){return yt.EventApiModule}});var wt=i(2277);Object.defineProperty(t,"TooltipModule",{enumerable:!0,get:function(){return wt.TooltipModule}});var Ct=i(9519);Object.defineProperty(t,"LocaleModule",{enumerable:!0,get:function(){return Ct.LocaleModule}});var _t=i(4577);Object.defineProperty(t,"RowAutoHeightModule",{enumerable:!0,get:function(){return _t.RowAutoHeightModule}});var St=i(2728);Object.defineProperty(t,"_SharedExportModule",{enumerable:!0,get:function(){return St.SharedExportModule}});var At=i(1621);Object.defineProperty(t,"AllCommunityModule",{enumerable:!0,get:function(){return At.AllCommunityModule}}),n.__exportStar(i(7968),t);var xt=i(6607);Object.defineProperty(t,"createPart",{enumerable:!0,get:function(){return xt.createPart}});var Et=i(9621);Object.defineProperty(t,"createTheme",{enumerable:!0,get:function(){return Et.createTheme}}),Object.defineProperty(t,"_asThemeImpl",{enumerable:!0,get:function(){return Et._asThemeImpl}});var Tt=i(8265);Object.defineProperty(t,"checkboxStyleDefault",{enumerable:!0,get:function(){return Tt.checkboxStyleDefault}});var Dt=i(8689);Object.defineProperty(t,"colorSchemeDark",{enumerable:!0,get:function(){return Dt.colorSchemeDark}}),Object.defineProperty(t,"colorSchemeDarkBlue",{enumerable:!0,get:function(){return Dt.colorSchemeDarkBlue}}),Object.defineProperty(t,"colorSchemeDarkWarm",{enumerable:!0,get:function(){return Dt.colorSchemeDarkWarm}}),Object.defineProperty(t,"colorSchemeLight",{enumerable:!0,get:function(){return Dt.colorSchemeLight}}),Object.defineProperty(t,"colorSchemeLightCold",{enumerable:!0,get:function(){return Dt.colorSchemeLightCold}}),Object.defineProperty(t,"colorSchemeLightWarm",{enumerable:!0,get:function(){return Dt.colorSchemeLightWarm}}),Object.defineProperty(t,"colorSchemeVariable",{enumerable:!0,get:function(){return Dt.colorSchemeVariable}});var Mt=i(6407);Object.defineProperty(t,"iconOverrides",{enumerable:!0,get:function(){return Mt.iconOverrides}}),Object.defineProperty(t,"iconSetAlpine",{enumerable:!0,get:function(){return Mt.iconSetAlpine}}),Object.defineProperty(t,"iconSetMaterial",{enumerable:!0,get:function(){return Mt.iconSetMaterial}}),Object.defineProperty(t,"iconSetQuartz",{enumerable:!0,get:function(){return Mt.iconSetQuartz}}),Object.defineProperty(t,"iconSetQuartzBold",{enumerable:!0,get:function(){return Mt.iconSetQuartzBold}}),Object.defineProperty(t,"iconSetQuartzLight",{enumerable:!0,get:function(){return Mt.iconSetQuartzLight}}),Object.defineProperty(t,"iconSetQuartzRegular",{enumerable:!0,get:function(){return Mt.iconSetQuartzRegular}});var kt=i(7161);Object.defineProperty(t,"inputStyleBase",{enumerable:!0,get:function(){return kt.inputStyleBase}}),Object.defineProperty(t,"inputStyleBordered",{enumerable:!0,get:function(){return kt.inputStyleBordered}}),Object.defineProperty(t,"inputStyleUnderlined",{enumerable:!0,get:function(){return kt.inputStyleUnderlined}});var Pt=i(2475);Object.defineProperty(t,"buttonStyleAlpine",{enumerable:!0,get:function(){return Pt.buttonStyleAlpine}}),Object.defineProperty(t,"buttonStyleBalham",{enumerable:!0,get:function(){return Pt.buttonStyleBalham}}),Object.defineProperty(t,"buttonStyleBase",{enumerable:!0,get:function(){return Pt.buttonStyleBase}}),Object.defineProperty(t,"buttonStyleQuartz",{enumerable:!0,get:function(){return Pt.buttonStyleQuartz}});var Rt=i(5117);Object.defineProperty(t,"tabStyleAlpine",{enumerable:!0,get:function(){return Rt.tabStyleAlpine}}),Object.defineProperty(t,"tabStyleBase",{enumerable:!0,get:function(){return Rt.tabStyleBase}}),Object.defineProperty(t,"tabStyleMaterial",{enumerable:!0,get:function(){return Rt.tabStyleMaterial}}),Object.defineProperty(t,"tabStyleQuartz",{enumerable:!0,get:function(){return Rt.tabStyleQuartz}}),Object.defineProperty(t,"tabStyleRolodex",{enumerable:!0,get:function(){return Rt.tabStyleRolodex}});var It=i(1697);Object.defineProperty(t,"columnDropStyleBordered",{enumerable:!0,get:function(){return It.columnDropStyleBordered}}),Object.defineProperty(t,"columnDropStylePlain",{enumerable:!0,get:function(){return It.columnDropStylePlain}});var Ot=i(2525);Object.defineProperty(t,"styleMaterial",{enumerable:!0,get:function(){return Ot.styleMaterial}}),Object.defineProperty(t,"themeAlpine",{enumerable:!0,get:function(){return Ot.themeAlpine}}),Object.defineProperty(t,"themeBalham",{enumerable:!0,get:function(){return Ot.themeBalham}}),Object.defineProperty(t,"themeMaterial",{enumerable:!0,get:function(){return Ot.themeMaterial}}),Object.defineProperty(t,"themeQuartz",{enumerable:!0,get:function(){return Ot.themeQuartz}})},4011:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationFrameModule=void 0;const n=i(7205),r=i(2612);t.AnimationFrameModule={moduleName:"AnimationFrame",version:n.VERSION,beans:[r.AnimationFrameService]}},2612:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationFrameService=t._requestAnimationFrame=void 0;const n=i(8731),r=i(7274),o=i(7764);function s(e,t){const i=(0,r._getWindow)(e);i.requestAnimationFrame?i.requestAnimationFrame(t):i.webkitRequestAnimationFrame?i.webkitRequestAnimationFrame(t):i.setTimeout(t,0)}t._requestAnimationFrame=s;class a extends n.BeanStub{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(e){const{gos:t,pagination:i}=this.beans,n=t.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,n&&0===e){const e=i?.getCurrentPage()??0;e!==this.lastPage&&(this.lastPage=e,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame")}verifyAnimationFrameOn(e){!1===this.active&&(0,o._warn)(92,{methodName:e})}createTask(e,t,i){this.verifyAnimationFrameOn(i);const n={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],n),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort(((e,i)=>e.index!==i.index?t*(i.index-e.index):i.createOrder-e.createOrder)),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,i=t.list,n=this.createTasksP2,r=n.list,o=this.destroyTasks,s=(new Date).getTime();let a=(new Date).getTime()-s;const l=e<=0,c=this.beans.ctrlsSvc.getScrollFeature();for(;l||a<e;){if(!c.scrollGridIfNeeded()){let e;if(i.length)this.sortTaskList(t),e=i.pop().task;else if(r.length)this.sortTaskList(n),e=r.pop().task;else{if(!o.length){this.cancelledTasks.clear();break}e=o.pop()}this.cancelledTasks.has(e)||e()}a=(new Date).getTime()-s}i.length||r.length||o.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);s(this.beans,e)}isQueueEmpty(){return!this.ticking}}t.AnimationFrameService=a},9410:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.EventApiModule=void 0;const n=i(7205),r=i(6107),o=i(6470);t.EventApiModule={moduleName:"EventApi",version:n.VERSION,apiFunctions:{addEventListener:o.addEventListener,addGlobalListener:o.addGlobalListener,removeEventListener:o.removeEventListener,removeGlobalListener:o.removeGlobalListener},beans:[r.ApiEventService]}},6107:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ApiEventService=void 0;const n=i(8731),r=i(7968);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){this.wrapSvc=this.beans.frameworkOverrides.createGlobalEventListenerWrapper?.()}addEventListener(e,t){const i=this.wrapSvc?.wrap(t)??t,n=!r.ALWAYS_SYNC_GLOBAL_EVENTS.has(e),o=n?this.asyncListeners:this.syncListeners;o.has(e)||o.set(e,new Set),o.get(e).add(i),this.eventSvc.addEventListener(e,i,n)}removeEventListener(e,t){const i=this.wrapSvc?.unwrap(t)??t,n=this.asyncListeners.get(e),r=!!n?.delete(i);r||this.syncListeners.get(e)?.delete(i),this.eventSvc.removeEventListener(e,i,r)}addGlobalListener(e){const t=this.wrapSvc?.wrapGlobal(e)??e,i=(e,i)=>{r.ALWAYS_SYNC_GLOBAL_EVENTS.has(e)&&t(e,i)},n=(e,i)=>{r.ALWAYS_SYNC_GLOBAL_EVENTS.has(e)||t(e,i)};this.globalListenerPairs.set(e,{syncListener:i,asyncListener:n});const o=this.eventSvc;o.addGlobalListener(i,!1),o.addGlobalListener(n,!0)}removeGlobalListener(e){const{eventSvc:t,wrapSvc:i,globalListenerPairs:n}=this,r=i?.unwrapGlobal(e)??e;if(n.has(r)){const{syncListener:i,asyncListener:o}=n.get(r);t.removeGlobalListener(i,!1),t.removeGlobalListener(o,!0),n.delete(e)}else this.syncGlobalListeners.delete(r),t.removeGlobalListener(r,!1)}destroyEventListeners(e,t){e.forEach(((e,i)=>{e.forEach((e=>this.eventSvc.removeEventListener(i,e,t))),e.clear()})),e.clear()}destroyGlobalListeners(e,t){e.forEach((e=>this.eventSvc.removeGlobalListener(e,t))),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);const{globalListenerPairs:e,eventSvc:t}=this;e.forEach((({syncListener:e,asyncListener:i})=>{t.removeGlobalListener(e,!1),t.removeGlobalListener(i,!0)})),e.clear()}}t.ApiEventService=o},6470:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.removeGlobalListener=t.addGlobalListener=t.removeEventListener=t.addEventListener=void 0,t.addEventListener=function(e,t,i){e.apiEventSvc?.addEventListener(t,i)},t.removeEventListener=function(e,t,i){e.apiEventSvc?.removeEventListener(t,i)},t.addGlobalListener=function(e,t){e.apiEventSvc?.addGlobalListener(t)},t.removeGlobalListener=function(e,t){e.apiEventSvc?.removeGlobalListener(t)}},9519:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.LocaleModule=void 0;const n=i(7205),r=i(9944);t.LocaleModule={moduleName:"Locale",version:n.VERSION,beans:[r.LocaleService]}},9944:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.LocaleService=void 0;const n=i(8731);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){const e=this.gos,t=e.getCallback("getLocaleText");if(t)return(e,i,n)=>t({key:e,defaultValue:i,variableValues:n});const i=e.get("localeText");return(e,t,n)=>{let r=i&&i[e];if(r&&n&&n.length){let e=0;for(;!(e>=n.length);){if(-1===r.indexOf("${variable}"))break;r=r.replace("${variable}",n[e++])}}return r??t}}}t.LocaleService=r},7230:function(e,t){function i(e,t){return t}Object.defineProperty(t,"__esModule",{value:!0}),t._getLocaleTextFunc=void 0,t._getLocaleTextFunc=function(e){return e?.getLocaleTextFunc()??i}},297:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.hidePopupMenu=t.showColumnMenu=void 0;const n=i(7764);t.showColumnMenu=function(e,t){const i=e.colModel.getCol(t);i?e.menuSvc?.showColumnMenu({column:i,positionBy:"auto"}):(0,n._error)(12,{colKey:t})},t.hidePopupMenu=function(e){e.menuSvc?.hidePopupMenu()}},8994:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._setColMenuVisible=t.MenuService=void 0;const n=i(8731),r=i(3355),o=i(7274),s=i(8667),a=i(2612);class l extends n.BeanStub{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=e??t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const{enterpriseMenuFactory:t,filterMenuFactory:i}=this.beans,n=t&&(0,o._isLegacyMenuEnabled)(this.gos)?t:i;this.showColumnMenuCommon(n,e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory?.showMenuAfterContextMenuEvent(e,t,i)}hidePopupMenu(){this.beans.contextMenuSvc?.hideActiveMenu(),this.activeMenuFactory?.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){const{suppressHeaderMenuButton:t}=e.getColDef();return!t&&!!this.activeMenuFactory?.isMenuEnabled(e)&&((0,o._isLegacyMenuEnabled)(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.beans.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){const t=e&&(0,r.isColumn)(e)?e.getColDef():e?.getColGroupDef();return!t?.suppressHeaderContextMenu&&"new"===this.gos.get("columnMenu")}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!((0,s._isIOSUserAgent)()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!(0,o._isLegacyMenuEnabled)(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!(!this.beans.filterManager?.isFilterAllowed(e)||(0,o._isLegacyMenuEnabled)(this.gos)||this.isFilterMenuInHeaderEnabled(e)||this.isFloatingFilterButtonDisplayed(e))}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos,t=e.get("suppressMenuHide");return(0,o._isLegacyMenuEnabled)(e)?!!e.exists("suppressMenuHide")&&t:t}showColumnMenuCommon(e,t,i,n){const{positionBy:r,onClosedCallback:o}=t,s=t.column;if("button"===r){const{buttonElement:r}=t;e?.showMenuAfterButtonClick(s,r,i,o,n)}else if("mouse"===r){const{mouseEvent:r}=t;e?.showMenuAfterMouseEvent(s,r,i,o,n)}else if(s){const t=this.beans,r=t.ctrlsSvc;r.getScrollFeature().ensureColumnVisible(s,"auto"),(0,a._requestAnimationFrame)(t,(()=>{const t=r.getHeaderRowContainerCtrl(s.getPinned())?.getHeaderCtrlForColumn(s);t&&e?.showMenuAfterButtonClick(s,t.getAnchorElementForMenu(n),i,o,!0)}))}}}t.MenuService=l,t._setColMenuVisible=function(e,t,i){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",i))}},3472:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SharedMenuModule=void 0;const n=i(7205),r=i(297),o=i(8994);t.SharedMenuModule={moduleName:"SharedMenu",version:n.VERSION,beans:[o.MenuService],apiFunctions:{showColumnMenu:r.showColumnMenu,hidePopupMenu:r.hidePopupMenu}}},1997:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getState=void 0,t.getState=function(e){return e.stateSvc?.getState()??{}}},6414:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.migrateGridStateModel=void 0,t.migrateGridStateModel=function(e){if((e={...e}).version||(e.version="32.1.0"),"32.1.0"===e.version)e=function(e){return e.cellSelection=function(e,t){if(e&&"object"==typeof e)return e[t]}(e,"rangeSelection"),e}(e);return e}},6989:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GridStateModule=void 0;const n=i(7205),r=i(1997),o=i(3374);t.GridStateModule={moduleName:"GridState",version:n.VERSION,beans:[o.StateService],apiFunctions:{getState:r.getState}}},3374:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.StateService=void 0;const n=i(2885),r=i(8731),o=i(7274),s=i(2043),a=i(4422),l=i(7205),c=i(6414);class d extends r.BeanStub{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=(0,s._debounce)(this,(()=>this.dispatchQueuedStateUpdateEvents()),0),this.onRowGroupOpenedDebounced=(0,s._debounce)(this,(()=>{this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())}),0),this.onRowSelectedDebounced=(0,s._debounce)(this,(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())}),0),this.staleStateKeys=new Set}postConstruct(){this.isClientSideRowModel=(0,o._isClientSideRowModel)(this.gos),this.cachedState=this.getInitialState(),this.setCachedStateValue("version",l.VERSION);const e=this.suppressEventsAndDispatchInitEvent.bind(this);this.beans.ctrlsSvc.whenReady(this,(()=>e((()=>this.setupStateOnGridReady()))));const[t,i,n]=this.addManagedEventListeners({newColumnsLoaded:({source:i})=>{"gridInitializing"===i&&(t(),e((()=>this.setupStateOnColumnsInitialised())))},rowCountReady:()=>{i?.(),e((()=>this.setupStateOnRowCountReady()))},firstDataRendered:()=>{n?.(),e((()=>this.setupStateOnFirstDataRendered()))}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getInitialState(){return(0,c.migrateGridStateModel)(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){const e=()=>this.updateCachedState("sideBar",this.getSideBarState());e(),this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){const e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());const t=e=>()=>this.updateColumnState([e]);this.addManagedEventListeners({columnValueChanged:t("aggregation"),columnMoved:t("columnOrder"),columnPinned:t("columnPinning"),columnResized:t("columnSizing"),columnVisible:t("columnVisibility"),columnPivotChanged:t("pivot"),columnPivotModeChanged:t("pivot"),columnRowGroupChanged:t("rowGroup"),sortChanged:t("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){const{filter:e,rowGroupExpansion:t,rowSelection:i,pagination:n}=this.getInitialState();e&&this.setFilterState(e),t&&this.setRowGroupExpansionState(t),i&&this.setRowSelectionState(i),n&&this.setPaginationState(n);const r=this.updateCachedState.bind(this);r("filter",this.getFilterState()),r("rowGroupExpansion",this.getRowGroupExpansionState()),r("rowSelection",this.getRowSelectionState()),r("pagination",this.getPaginationState());const o=()=>{this.updateRowGroupExpansionStateTimer=0,r("rowGroupExpansion",this.getRowGroupExpansionState())};this.addManagedEventListeners({filterChanged:()=>r("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:o,columnRowGroupChanged:o,rowDataUpdated:()=>{0!==this.gos.get("groupDefaultExpanded")&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(o)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:e=>{(e.newPage||e.newPageSize)&&r("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){const{scroll:e,cellSelection:t,focusedCell:i,columnOrder:n}=this.getInitialState();i&&this.setFocusedCellState(i),t&&this.setCellSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!n?.orderedColIds);const r=this.updateCachedState.bind(this);r("sideBar",this.getSideBarState()),r("focusedCell",this.getFocusedCellState());const o=this.getRangeSelectionState();r("rangeSelection",o),r("cellSelection",o),r("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>r("focusedCell",this.getFocusedCellState()),cellSelectionChanged:e=>{if(e.finished){const e=this.getRangeSelectionState();r("rangeSelection",e),r("cellSelection",e)}},bodyScrollEnd:()=>r("scroll",this.getScrollState())})}getColumnState(){const e=this.beans,t=e.colModel.isPivotMode(),i=[],r=[],o=[],s=[],a=[],l=[],c=[],d=[],u=[];let h=0;const p=(0,n._getColumnState)(e);for(let e=0;e<p.length;e++){const{colId:t,sort:n,sortIndex:f,rowGroup:g,rowGroupIndex:m,aggFunc:v,pivot:b,pivotIndex:y,pinned:w,hide:C,width:_,flex:S}=p[e];u.push(t),n&&(i[f??h++]={colId:t,sort:n}),g&&(r[m??0]=t),"string"==typeof v&&o.push({colId:t,aggFunc:v}),b&&(s[y??0]=t),w&&("right"===w?l:a).push(t),C&&c.push(t),(null!=S||_)&&d.push({colId:t,flex:S??void 0,width:_})}return{sort:i.length?{sortModel:i}:void 0,rowGroup:r.length?{groupColIds:r}:void 0,aggregation:o.length?{aggregationModel:o}:void 0,pivot:s.length||t?{pivotMode:t,pivotColIds:s}:void 0,columnPinning:a.length||l.length?{leftColIds:a,rightColIds:l}:void 0,columnVisibility:c.length?{hiddenColIds:c}:void 0,columnSizing:d.length?{columnSizingModel:d}:void 0,columnOrder:u.length?{orderedColIds:u}:void 0}}setColumnState(e){const{sort:t,rowGroup:i,aggregation:r,pivot:o,columnPinning:s,columnVisibility:a,columnSizing:l,columnOrder:c,partialColumnState:d}=e,u={},h=e=>{let t=u[e];return t||(t={colId:e},u[e]=t,t)},p=d?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};t&&(t.sortModel.forEach((({colId:e,sort:t},i)=>{const n=h(e);n.sort=t,n.sortIndex=i})),p.sort=null,p.sortIndex=null),i&&(i.groupColIds.forEach(((e,t)=>{const i=h(e);i.rowGroup=!0,i.rowGroupIndex=t})),p.rowGroup=null,p.rowGroupIndex=null),r&&(r.aggregationModel.forEach((({colId:e,aggFunc:t})=>{h(e).aggFunc=t})),p.aggFunc=null),o&&(o.pivotColIds.forEach(((e,t)=>{const i=h(e);i.pivot=!0,i.pivotIndex=t})),this.gos.updateGridOptions({options:{pivotMode:o.pivotMode},source:"gridInitializing"}),p.pivot=null,p.pivotIndex=null),s&&(s.leftColIds.forEach((e=>{h(e).pinned="left"})),s.rightColIds.forEach((e=>{h(e).pinned="right"})),p.pinned=null),a&&(a.hiddenColIds.forEach((e=>{h(e).hide=!0})),p.hide=null),l&&(l.columnSizingModel.forEach((({colId:e,flex:t,width:i})=>{const n=h(e);n.flex=t??null,n.width=i})),p.flex=null);const f=c?.orderedColIds,g=!!f?.length,m=g?f.map((e=>h(e))):Object.values(u);m.length&&(this.columnStates=m,(0,n._applyColumnState)(this.beans,{state:m,applyOrder:g,defaultState:p},"gridInitializing"))}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;this.columnGroupStates=void 0;const r=this.beans,{pivotResultCols:o,colGroupSvc:s}=r;if(o?.isPivotResultColsPresent()){if(t){const i=[];for(const e of t)o.getPivotResultCol(e.colId)&&i.push(e);(0,n._applyColumnState)(r,{state:i,applyOrder:e},"gridInitializing")}i&&s?.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){const e=this.beans.colGroupSvc;if(!e)return;const t=e.getColumnGroupState(),i=[];return t.forEach((({groupId:e,open:t})=>{t&&i.push(e)})),i.length?{openColumnGroupIds:i}:void 0}setColumnGroupState(e){const t=this.beans.colGroupSvc;if(!Object.prototype.hasOwnProperty.call(e,"columnGroup")||!t)return;const i=new Set(e.columnGroup?.openColumnGroupIds),n=t.getColumnGroupState().map((({groupId:e})=>{const t=i.has(e);return t&&i.delete(e),{groupId:e,open:t}}));i.forEach((e=>{n.push({groupId:e,open:!0})})),n.length&&(this.columnGroupStates=n),t.setColumnGroupState(n,"gridInitializing")}getFilterState(){const e=this.beans.filterManager;let t=e?.getFilterModel();t&&0===Object.keys(t).length&&(t=void 0);const i=e?.getAdvFilterModel()??void 0;return t||i?{filterModel:t,advancedFilterModel:i}:void 0}setFilterState(e){const t=this.beans.filterManager,{filterModel:i,advancedFilterModel:n}=e??{};i&&t?.setFilterModel(i,"columnFilter"),n&&t?.setAdvFilterModel(n,"advancedFilter")}getRangeSelectionState(){const e=this.beans.rangeSvc?.getCellRanges().map((e=>{const{id:t,type:i,startRow:n,endRow:r,columns:o,startColumn:s}=e;return{id:t,type:i,startRow:n,endRow:r,colIds:o.map((e=>e.getColId())),startColId:s.getColId()}}));return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeSvc:i,colModel:n,visibleCols:r}=this.beans;if(!(0,o._isCellSelectionEnabled)(t)||!i)return;const s=[];e.cellRanges.forEach((e=>{const t=[];if(e.colIds.forEach((e=>{const i=n.getCol(e);i&&t.push(i)})),!t.length)return;let i=n.getCol(e.startColId);if(!i){const e=r.allCols,n=new Set(t);i=e.find((e=>n.has(e)))}s.push({...e,columns:t,startColumn:i})})),i.setCellRanges(s)}getScrollState(){if(!this.isClientSideRowModel)return;const e=this.beans.ctrlsSvc.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:i}=e?.getVScrollPosition()??{top:0};return i||t?{top:i,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:i}=e,{frameworkOverrides:n,rowRenderer:r,animationFrameSvc:o,ctrlsSvc:s}=this.beans;n.wrapIncoming((()=>{s.get("center").setCenterViewportScrollLeft(i),s.getScrollFeature()?.setVerticalScrollPosition(t),r.redraw({afterScroll:!0}),o?.flushAllFrames()}))}getSideBarState(){return this.beans.sideBar?.comp?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.beans.focusSvc.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:n}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:n}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:i,rowPinned:n}=e,{focusSvc:r,colModel:o}=this.beans;r.setFocusedCell({column:o.getCol(t),rowIndex:i,rowPinned:n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const{pagination:e,gos:t}=this.beans;if(!e)return;const i=e.getCurrentPage(),n=t.get("paginationAutoPageSize")?void 0:e.getPageSize();return i||n?{page:i,pageSize:n}:void 0}setPaginationState(e){const{pagination:t,gos:i}=this.beans;t&&(e.pageSize&&!i.get("paginationAutoPageSize")&&t.setPageSize(e.pageSize,"initialState"),"number"==typeof e.page&&t.setPage(e.page))}getRowSelectionState(){const e=this.beans.selectionSvc;if(!e)return;const t=e.getSelectionState();return!t||!Array.isArray(t)&&(!1===t.selectAll||!1===t.selectAllChildren)&&!t?.toggledNodes?.length?void 0:t}setRowSelectionState(e){this.beans.selectionSvc?.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const{expansionSvc:e,rowModel:t}=this.beans;if(!e)return;const i=[];return t.forEachNode((({expanded:e,id:t})=>{e&&t&&i.push(t)})),i.length?{expandedRowGroupIds:i}:void 0}setRowGroupExpansionState(e){this.beans.expansionSvc?.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let i=!1;const n=this.cachedState;for(const e of Object.keys(t)){const r=t[e];(0,a._jsonEquals)(r,n[e])||(i=!0)}this.cachedState={...n,...t},i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),(0,a._jsonEquals)(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){const e=this.staleStateKeys;e.forEach((e=>{if("rowSelection"===e)this.setCachedStateValue(e,this.getRowSelectionState())})),e.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach((e=>this.queuedUpdateSources.add(e))),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0;const t=this.beans.colAnimation;t?.setSuppressAnimation(!0),e(),setTimeout((()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(t?.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))}))}}t.StateService=d},3705:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TouchModule=void 0;const n=i(7205),r=i(3914);t.TouchModule={moduleName:"Touch",version:n.VERSION,beans:[r.TouchService]}},3914:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TouchService=void 0;const n=i(8731),r=i(8667),o=i(2979),s=i(4422),a=i(9644);class l extends n.BeanStub{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!(0,r._isIOSUserAgent)())return;this.mockContextMenu(e,e.element,((t,i,n)=>{const{rowCtrl:r,cellCtrl:o}=e.getControlsForEventTarget(n?.target??null);o?.column&&o.dispatchCellContextMenuEvent(n??null),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(void 0,n,r,o)}))}handleCellDoubleClick(e,t){return!!(()=>{if(!(0,r._isIOSUserAgent)()||(0,o._isEventSupported)("dblclick"))return!1;const t=(new Date).getTime(),i=t-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=t,i})()&&(e.onCellDoubleClicked(t),t.preventDefault(),!0)}setupForHeader(e){const{gos:t,sortSvc:i}=this.beans;if(t.get("suppressTouch"))return;const{params:n,eMenu:r,eFilterButton:o}=e,l=new a.TouchListener(e.getGui(),!0),c=e.shouldSuppressMenuHide(),d=c&&(0,s._exists)(r),u=d?new a.TouchListener(r,!0):l;if(n.enableMenu){const t=d?"tap":"longTap",i=e=>n.showColumnMenuAfterMouseClick(e.touchStart);e.addManagedListeners(u,{[t]:i})}if(n.enableSorting){const t=e=>{const t=e.touchStart.target;c&&(r?.contains(t)||o?.contains(t))||i?.progressSort(n.column,!1,"uiColumnSorted")};e.addManagedListeners(l,{tap:t})}if(n.enableFilterButton&&o){const t=new a.TouchListener(o,!0);e.addManagedListeners(t,{tap:()=>n.showFilter(o)}),e.addDestroyFunc((()=>t.destroy()))}e.addDestroyFunc((()=>l.destroy())),d&&e.addDestroyFunc((()=>u.destroy()))}setupForHeaderGroup(e,t,i){const n=new a.TouchListener(t,!0);e.addManagedListeners(n,{tap:i}),e.addDestroyFunc((()=>n.destroy()))}mockContextMenu(e,t,i){if(!(0,r._isIOSUserAgent)())return;const n=new a.TouchListener(t);e.addManagedListeners(n,{longTap:e=>{i(void 0,e.touchStart,e.touchEvent)}}),e.addDestroyFunc((()=>n.destroy()))}}t.TouchService=l},2132:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleRegistry=t._setUmd=t._isUmd=t._getGridRegisteredModules=t._getAllRegisteredModules=t._getRegisteredModules=t._areModulesGridScoped=t._isModuleRegistered=t._unRegisterGridModules=t._registerModule=void 0;const n=i(2043),r=new Set,o={},s={};let a,l=!1,c=!1;function d(e){a||(a=e.version);const t=e=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${e} Please update all modules to the same version.`;if(e.version?function(e){const[t,i]=e.version.split(".")||[],[n,r]=a.split(".")||[];return t===n&&i===r}(e)||(0,n._errorOnce)(t(`'${e.moduleName}' is version ${e.version} but the other modules are version ${a}.`)):(0,n._errorOnce)(t(`'${e.moduleName}' is incompatible.`)),e.validate){const t=e.validate();if(!t.isValid){const e=t;(0,n._errorOnce)(`${e.message}`)}}}function u(e,t){d(e);const i=e.rowModels??["all"];let n;r.add(e),void 0!==t?(l=!0,void 0===s[t]&&(s[t]={}),n=s[t]):n=o,i.forEach((t=>{void 0===n[t]&&(n[t]={}),n[t][e.moduleName]=e})),e.dependsOn&&e.dependsOn.forEach((e=>u(e,t)))}t._registerModule=u,t._unRegisterGridModules=function(e){delete s[e]},t._isModuleRegistered=function(e,t,i){const n=i=>!!o[i]?.[e]||!!s[t]?.[i]?.[e];return n(i)||n("all")},t._areModulesGridScoped=function(){return l},t._getRegisteredModules=function(e,t){const i=s[e]??{};return[...Object.values(o.all??{}),...Object.values(i.all??{}),...Object.values(o[t]??{}),...Object.values(i[t]??{})]},t._getAllRegisteredModules=function(){return new Set(r)},t._getGridRegisteredModules=function(e,t){const i=s[e]??{};return[...Object.values(i.all??{}),...Object.values(i[t]??{})]},t._isUmd=function(){return c},t._setUmd=function(){c=!0};t.ModuleRegistry=class{static register(e){u(e,void 0)}static registerModules(e){e.forEach((e=>u(e,void 0)))}}},9413:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellNavigationService=void 0;const n=i(9853),r=i(8731),o=i(7274),s=i(1502),a=i(4422),l=i(7764);class c extends r.BeanStub{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===n.KeyCode.UP,r=e===n.KeyCode.DOWN,o=e===n.KeyCode.LEFT;let s,a;const{pageBounds:l,gos:c,visibleCols:d}=this.beans;if(i||r)a=i?l.getFirstRow():l.getLastRow(),s=t.column;else{const e=c.get("enableRtl");a=t.rowIndex;s=(o!==e?d.allCols:[...d.allCols].reverse()).find((e=>this.isCellGoodToFocusOn({rowIndex:a,rowPinned:null,column:e})))}return s?{rowIndex:a,rowPinned:null,column:s}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,r=!1;for(;!r;){switch(e){case n.KeyCode.UP:i=this.getCellAbove(i);break;case n.KeyCode.DOWN:i=this.getCellBelow(i);break;case n.KeyCode.RIGHT:i=this.gos.get("enableRtl")?this.getCellToLeft(i):this.getCellToRight(i);break;case n.KeyCode.LEFT:i=this.gos.get("enableRtl")?this.getCellToRight(i):this.getCellToLeft(i);break;default:i=null,(0,l._warn)(8,{key:e})}r=!i||this.isCellGoodToFocusOn(i)}return i}isCellGoodToFocusOn(e){const t=e.column;let i;const{pinnedRowModel:n,rowModel:r}=this.beans;switch(e.rowPinned){case"top":i=n?.getPinnedTopRow(e.rowIndex);break;case"bottom":i=n?.getPinnedBottomRow(e.rowIndex);break;default:i=r.getRow(e.rowIndex)}if(!i)return!1;return!this.isSuppressNavigable(t,i)}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,i=e.rowPinned;let n=!1;const{pageBounds:r,pinnedRowModel:o,rowModel:s}=this.beans;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return s.isRowsToRender()?{rowIndex:r.getFirstRow(),rowPinned:null}:o?.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return o?.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else i&&(n=!0);const a=s.getRow(e.rowIndex),l=n?void 0:this.getNextStickyPosition(a);return l||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){const{gos:i,rowRenderer:n}=this.beans;if(!(0,o._isGroupRowsSticky)(i)||!e||!e.sticky)return;let r=[];r=n.getStickyTopRowCtrls().some((t=>t.rowNode.rowIndex===e.rowIndex))?[...n.getStickyTopRowCtrls()].sort(((e,t)=>e.rowNode.rowIndex-t.rowNode.rowIndex)):[...n.getStickyBottomRowCtrls()].sort(((e,t)=>t.rowNode.rowIndex-e.rowNode.rowIndex));const s=t?-1:1,a=r.findIndex((t=>t.rowNode.rowIndex===e.rowIndex)),l=r[a+s];return l?{rowIndex:l.rowNode.rowIndex,rowPinned:null}:void 0}getCellBelow(e){if(!e)return null;const t=this.rowSpanSvc?.getCellEnd(e)??e,i=this.getRowBelow(t);return i?{rowIndex:i.rowIndex,column:e.column,rowPinned:i.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,i=e.rowIndex,{pinnedRowModel:n,pageBounds:r}=this.beans;if("top"===t){return(n?.getPinnedTopRowCount()??-1)<=i}if("bottom"===t){return(n?.getPinnedBottomRowCount()??-1)<=i}return r.getLastRow()<=i}getRowAbove(e){const t=e.rowIndex,i=e.rowPinned,{pageBounds:n,pinnedRowModel:r,rowModel:o}=this.beans;let s=!1;const a=()=>({rowIndex:r?.getPinnedTopRowCount()??-1,rowPinned:"top"});if(i?0===t:t===n.getFirstRow()){if("top"===i)return null;if(!i)return r?.isRowsToRender("top")?a():null;if(o.isRowsToRender()){return{rowIndex:n.getLastRow(),rowPinned:null}}return r?.isRowsToRender("top")?a():null}i&&(s=!0);const l=o.getRow(e.rowIndex),c=s?void 0:this.getNextStickyPosition(l,!0);return c||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;const t=this.rowSpanSvc?.getCellStart(e)??e,i=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});return i?{rowIndex:i.rowIndex,column:e.column,rowPinned:i.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:i}=this.beans,n=t.allCols;let r=e.rowIndex,o=e.rowPinned,s=t.getColAfter(e.column);if(!s){s=n[0];const t=this.getRowBelow(e);if((0,a._missing)(t))return null;if(!t.rowPinned&&!(i?.isRowInPage(t)??1))return null;r=t?t.rowIndex:null,o=t?t.rowPinned:null}return{rowIndex:r,column:s,rowPinned:o}}getNextTabbedCellBackwards(e){const{visibleCols:t,pagination:i}=this.beans,n=t.allCols;let r=e.rowIndex,o=e.rowPinned,l=t.getColBefore(e.column);if(!l){l=(0,s._last)(n);const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if((0,a._missing)(t))return null;if(!t.rowPinned&&!(i?.isRowInPage(t)??1))return null;r=t?t.rowIndex:null,o=t?t.rowPinned:null}return{rowIndex:r,column:l,rowPinned:o}}isSuppressNavigable(e,t){const{suppressNavigable:i}=e.colDef;if("boolean"==typeof i)return i;if("function"==typeof i){return i(e.createColumnFunctionCallbackParams(t))}return!1}}t.CellNavigationService=c},3990:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderNavigationService=t.getHeaderIndexToFocus=void 0;const n=i(8731),r=i(6908),o=i(7274),s=i(1323),a=i(1502);function l(e){return!!e&&e.getLeafColumns().some((e=>e.isSpanHeaderHeight()))}function c(e,t){let i;if((0,r.isColumnGroup)(e)&&l(e)&&e.isPadding()){const n=e;i=n.getLeafColumns()[0];let r=i;for(;r!==n;)t++,r=r.getParent()}return{column:i||e,headerRowIndex:t}}t.getHeaderIndexToFocus=c;class d extends n.BeanStub{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCon=e.gridBodyCtrl}));const t=(0,o._getDocument)(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let i;const{colModel:n,colGroupSvc:r,ctrlsSvc:o}=this.beans;if("string"==typeof e?(i=n.getCol(e),i||(i=r?.getColumnGroup(e)??null)):i=e,!i)return null;const l=o.getHeaderRowContainerCtrl(),c=l?.getAllCtrls(),d="filter"===(0,a._last)(c||[]).type,u=(0,s.getFocusHeaderRowCount)(this.beans)-1;let h=-1,p=i;for(;p;)h++,p=p.getParent();let f=h;return t&&d&&f===u-1&&f++,-1===f?null:{headerRowIndex:f,column:i}}navigateVertically(e,t,i){const n=this.beans.focusSvc;if(t||(t=n.focusedHeader),!t)return!1;const{headerRowIndex:r}=t,o=t.column,c=(0,s.getFocusHeaderRowCount)(this.beans),d="UP"===e,u=this.getHeaderRowType(r);let{headerRowIndex:h,column:p,headerRowIndexWithoutSpan:f}=d?function(e,t,i){const n="filter"===e,r="column"===e;let o=n?t:t.getParent(),s=i-1,a=s;if(r&&l(t.getParent())){for(;o&&o.isPadding();)o=o.getParent(),s--;a=s,s<0&&(o=t,s=i,a=void 0)}return{column:o,headerRowIndex:s,headerRowIndexWithoutSpan:a}}(u,o,r):function(e,t,i,n="After"){let r=t,o=i+1;const s=o;if("group"===e){const e=t.getDisplayedLeafColumns(),i="After"===n?e[0]:(0,a._last)(e),s=[];let l=i;for(;l.getParent()!==t;)l=l.getParent(),s.push(l);if(r=i,i.isSpanHeaderHeight())for(let e=s.length-1;e>=0;e--){const t=s[e];if(!t.isPadding()){r=t;break}o++}else r=(0,a._last)(s),r||(r=i)}return{column:r,headerRowIndex:o,headerRowIndexWithoutSpan:s}}(u,o,r),g=!1;return h<0&&(h=0,p=o,g=!0),h>=c?(h=-1,this.currentHeaderRowWithoutSpan=-1):void 0!==f&&(this.currentHeaderRowWithoutSpan=f),!(!g&&!p)&&n.focusHeaderPosition({headerPosition:{headerRowIndex:h,column:p},allowUserOverride:!0,event:i})}navigateHorizontally(e,t=!1,i){const{focusSvc:n,gos:r}=this.beans,o=n.focusedHeader;let s,a;if(-1!==this.currentHeaderRowWithoutSpan?o.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=o.headerRowIndex,"LEFT"===e!==r.get("enableRtl")?(a="Before",s=this.findHeader(o,a)):(a="After",s=this.findHeader(o,a)),s||!t)return n.focusHeaderPosition({headerPosition:s,direction:a,fromTab:t,allowUserOverride:!0,event:i});if(t){const e=r.getCallback("tabToNextHeader");if(e)return n.focusHeaderPositionFromUserFunc({userFunc:e,headerPosition:s,direction:a})}return this.focusNextHeaderRow(o,a,i)}focusNextHeaderRow(e,t,i){const n=e.headerRowIndex;let r,o=null;const a=this.beans;if("Before"===t?n>0&&(r=n-1,this.currentHeaderRowWithoutSpan-=1,o=this.findColAtEdgeForHeaderRow(r,"end")):(r=n+1,this.currentHeaderRowWithoutSpan<(0,s.getFocusHeaderRowCount)(a)?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1,o=this.findColAtEdgeForHeaderRow(r,"start")),!o)return!1;const{column:l,headerRowIndex:d}=c(o.column,o?.headerRowIndex);return a.focusSvc.focusHeaderPosition({headerPosition:{column:l,headerRowIndex:d},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){if(e.getPinned())return;let i;if((0,r.isColumnGroup)(e)){const n=e.getDisplayedLeafColumns();i="Before"===t?(0,a._last)(n):n[0]}else i=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(i)}findHeader(e,t){let i,n;const{colGroupSvc:o,visibleCols:s}=this.beans;if((0,r.isColumnGroup)(e.column)?i=o?.getGroupAtDirection(e.column,t)??void 0:(n=`getCol${t}`,i=s[n](e.column)),!i)return;const{headerRowIndex:a}=e;if("filter"!==this.getHeaderRowType(a)){const e=[i];for(;i.getParent();)i=i.getParent(),e.push(i);i=e[Math.max(0,e.length-1-a)]}const{column:l,headerRowIndex:d}=c(i,a);return{column:l,headerRowIndex:d}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const{visibleCols:i,ctrlsSvc:n,colGroupSvc:r}=this.beans,o=i.allCols,s=o["start"===t?0:o.length-1];if(!s)return;const a=n.getHeaderRowContainerCtrl(s.getPinned()),l=a?.getRowType(e);if("group"==l){const t=r?.getColGroupAtLevel(s,e);return{headerRowIndex:e,column:t}}return{headerRowIndex:null==l?-1:e,column:s}}}t.HeaderNavigationService=d},322:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.setFocusedHeader=t.tabToPreviousCell=t.tabToNextCell=t.setFocusedCell=t.clearFocusedCell=t.getFocusedCell=void 0,t.getFocusedCell=function(e){return e.focusSvc.getFocusedCell()},t.clearFocusedCell=function(e){return e.focusSvc.clearFocusedCell()},t.setFocusedCell=function(e,t,i,n){e.focusSvc.setFocusedCell({rowIndex:t,column:i,rowPinned:n,forceBrowserFocus:!0})},t.tabToNextCell=function(e,t){return e.navigation?.tabToNextCell(!1,t)??!1},t.tabToPreviousCell=function(e,t){return e.navigation?.tabToNextCell(!0,t)??!1},t.setFocusedHeader=function(e,t,i=!1){const n=e.headerNavigation?.getHeaderPositionForColumn(t,i);n&&e.focusSvc.focusHeaderPosition({headerPosition:n})}},928:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardNavigationModule=void 0;const n=i(7205),r=i(9413),o=i(3990),s=i(322),a=i(2321);t.KeyboardNavigationModule={moduleName:"KeyboardNavigation",version:n.VERSION,beans:[a.NavigationService,r.CellNavigationService,o.HeaderNavigationService],apiFunctions:{getFocusedCell:s.getFocusedCell,clearFocusedCell:s.clearFocusedCell,setFocusedCell:s.setFocusedCell,setFocusedHeader:s.setFocusedHeader,tabToNextCell:s.tabToNextCell,tabToPreviousCell:s.tabToPreviousCell}}},2321:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationService=void 0;const n=i(9853),r=i(8731),o=i(6257),s=i(8399),a=i(7274),l=i(1323),c=i(814),d=i(7632),u=i(1502),h=i(2331),p=i(2043),f=i(4422);class g extends r.BeanStub{constructor(){super(),this.beanName="navigation",this.onPageDown=(0,p._throttle)(this.onPageDown,100),this.onPageUp=(0,p._throttle)(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCon=e.gridBodyCtrl}))}handlePageScrollingKey(e,t=!1){const i=e.key,r=e.altKey,o=e.ctrlKey||e.metaKey,a=!!this.beans.rangeSvc&&e.shiftKey,l=(0,s._getCellPositionForEvent)(this.gos,e);let c=!1;switch(i){case n.KeyCode.PAGE_HOME:case n.KeyCode.PAGE_END:o||r||(this.onHomeOrEndKey(i),c=!0);break;case n.KeyCode.LEFT:case n.KeyCode.RIGHT:case n.KeyCode.UP:case n.KeyCode.DOWN:if(!l)return!1;!o||r||a||(this.onCtrlUpDownLeftRight(i,l),c=!0);break;case n.KeyCode.PAGE_DOWN:case n.KeyCode.PAGE_UP:o||r||(c=this.handlePageUpDown(i,l,t))}return c&&e.preventDefault(),c}handlePageUpDown(e,t,i){return i&&(t=this.beans.focusSvc.getFocusedCell()),!!t&&(e===n.KeyCode.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0)}navigateTo(e){const{scrollIndex:t,scrollType:i,scrollColumn:n,focusIndex:r,focusColumn:o}=e,{scrollFeature:s}=this.gridBodyCon;(0,f._exists)(n)&&!n.isPinned()&&s.ensureColumnVisible(n),(0,f._exists)(t)&&s.ensureIndexVisible(t,i),e.isAsync||s.ensureIndexVisible(r);const{focusSvc:a,rangeSvc:l}=this.beans;a.setFocusedCell({rowIndex:r,column:o,rowPinned:null,forceBrowserFocus:!0}),l?.setRangeToCell({rowIndex:r,rowPinned:null,column:o})}onPageDown(e){const t=this.beans,i=m(t),n=this.getViewportHeight(),{pageBounds:r,rowModel:o,rowAutoHeight:s}=t,a=r.getPixelOffset(),l=i.top+n,c=o.getRowIndexAtPixel(l+a);s?.active?this.navigateToNextPageWithAutoHeight(e,c):this.navigateToNextPage(e,c)}onPageUp(e){const t=this.beans,i=m(t),{pageBounds:n,rowModel:r,rowAutoHeight:o}=t,s=n.getPixelOffset(),a=i.top,l=r.getRowIndexAtPixel(a+s);o?.active?this.navigateToNextPageWithAutoHeight(e,l,!0):this.navigateToNextPage(e,l,!0)}navigateToNextPage(e,t,i=!1){const{pageBounds:n,rowModel:r}=this.beans,o=this.getViewportHeight(),s=n.getFirstRow(),a=n.getLastRow(),l=n.getPixelOffset(),c=r.getRow(e.rowIndex),d=i?c?.rowHeight-o-l:o-l,u=c?.rowTop+d;let h,p=r.getRowIndexAtPixel(u+l);if(p===e.rowIndex){const n=i?-1:1;t=p=e.rowIndex+n}i?(h="bottom",p<s&&(p=s),t<s&&(t=s)):(h="top",p>a&&(p=a),t>a&&(t=a)),this.isRowTallerThanView(r.getRow(p))&&(t=p,h="top"),this.navigateTo({scrollIndex:t,scrollType:h,scrollColumn:null,focusIndex:p,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout((()=>{const n=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:n,focusColumn:e.column,isAsync:!0})}),50)}getNextFocusIndexForAutoHeight(e,t=!1){const i=t?-1:1,n=this.getViewportHeight(),{pageBounds:r,rowModel:o}=this.beans,s=r.getLastRow();let a=0,l=e.rowIndex;for(;l>=0&&l<=s;){const e=o.getRow(l);if(e){const t=e.rowHeight??0;if(a+t>n)break;a+=t}l+=i}return Math.max(0,Math.min(l,s))}getViewportHeight(){const e=this.beans,t=m(e),i=this.beans.scrollVisibleSvc.getScrollbarWidth();let n=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(n-=i),n}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return"number"==typeof t&&t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),{rowIndex:n}=i,r=i.column;this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:r,focusIndex:n,focusColumn:r})}onHomeOrEndKey(e){const t=e===n.KeyCode.PAGE_HOME,{visibleCols:i,pageBounds:r,rowModel:o}=this.beans,s=i.allCols,a=t?r.getFirstRow():r.getLastRow(),l=o.getRow(a);if(!l)return;const c=(t?s:[...s].reverse()).find((e=>!e.isSuppressNavigable(l)));c&&this.navigateTo({scrollIndex:a,scrollType:null,scrollColumn:c,focusIndex:a,focusColumn:c})}onTabKeyDown(e,t){const i=t.shiftKey,n=this.tabToNextCellCommon(e,i,t),r=this.beans,{ctrlsSvc:o,pageBounds:s,focusSvc:a,gos:l}=r;if(!1===n)if(i){const{rowIndex:i,rowPinned:n}=e.getRowPosition();(n?0===i:i===s.getFirstRow())&&(0===l.get("headerHeight")||(0,h._isHeaderFocusSuppressed)(r)?(0,h._focusNextGridCoreContainer)(r,!0,!0):(t.preventDefault(),a.focusPreviousFromFirstCell(t)))}else e instanceof c.CellCtrl&&e.focusCell(!0),(!i&&a.focusOverlay(!1)||(0,h._focusNextGridCoreContainer)(r,i))&&t.preventDefault();else n?t.preventDefault():null===n&&o.get("gridCtrl").allowFocusForNextCoreContainer(i)}tabToNextCell(e,t){const i=this.beans,{focusSvc:n,rowRenderer:r}=i,s=n.getFocusedCell();if(!s)return!1;let a=(0,o._getCellByPosition)(i,s);return!!(a||(a=r.getRowByPosition(s),a&&a.isFullWidth()))&&!!this.tabToNextCellCommon(a,e,t)}tabToNextCellCommon(e,t,i){let n,r=e.editing;if(!r&&e instanceof c.CellCtrl){const t=e.rowCtrl;t&&(r=t.editing)}return n=r?"fullRow"===this.gos.get("editType")?this.moveToNextEditingRow(e,t,i):this.moveToNextEditingCell(e,t,i):this.moveToNextCellNotEditing(e,t),null===n?n:n||!!this.beans.focusSvc.focusedHeader}moveToNextEditingCell(e,t,i=null){const n=e.cellPosition;e.eGui.focus(),e.stopEditing();const r=this.findNextCellToFocusOn(n,t,!0);return!1===r?null:null!=r&&(this.beans.editSvc?.startEditing(r,null,!0,i),r.focusCell(!1),!0)}moveToNextEditingRow(e,t,i=null){const n=e.cellPosition,r=this.findNextCellToFocusOn(n,t,!0);if(!1===r)return null;if(null==r)return!1;const o=r.cellPosition,s=this.isCellEditable(n),a=this.isCellEditable(o),l=o&&n.rowIndex===o.rowIndex&&n.rowPinned===o.rowPinned,{editSvc:c,rowEditSvc:d}=this.beans;if(s&&c?.setFocusOutOnEditor(e),!l){const t=e.rowCtrl;c?.stopRowEditing(t);const n=r.rowCtrl;d?.startEditing(n,void 0,void 0,i)}return a?(c?.setFocusInOnEditor(r),r.focusCell()):r.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const i=this.beans.visibleCols.allCols;let n;n=e instanceof d.RowCtrl?{...e.getRowPosition(),column:t?i[0]:(0,u._last)(i)}:e.getFocusedCellPosition();const r=this.findNextCellToFocusOn(n,t,!1);if(!1===r)return null;if(r instanceof c.CellCtrl)r.focusCell(!0);else if(r)return this.tryToFocusFullWidthRow(r.getRowPosition(),t);return(0,f._exists)(r)}findNextCellToFocusOn(e,t,i){let n=e;const r=this.beans,{cellNavigation:s,gos:a,focusSvc:c,rowRenderer:d,rangeSvc:u}=r;for(;;){e!==n&&(e=n),t||(n=this.getLastCellOfColSpan(n)),n=s.getNextTabbedCell(n,t);const h=a.getCallback("tabToNextCell");if((0,f._exists)(h)){const r=h({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:n||null});if(!0===r)n=e;else{if(!1===r)return!1;n={rowIndex:r.rowIndex,column:r.column,rowPinned:r.rowPinned}}}if(!n)return null;if(n.rowIndex<0){const e=(0,l.getFocusHeaderRowCount)(r);return c.focusHeaderPosition({headerPosition:{headerRowIndex:e+n.rowIndex,column:n.column},fromCell:!0}),null}const p="fullRow"===a.get("editType");if(i&&!p){if(!this.isCellEditable(n))continue}this.ensureCellVisible(n);const g=(0,o._getCellByPosition)(r,n);if(!g){const e=d.getRowByPosition(n);if(!e||!e.isFullWidth()||i)continue;return e}if(!s.isSuppressNavigable(g.column,g.rowNode))return g.setFocusedCellPosition(n),u?.setRangeToCell(n),g}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return!!t&&e.column.isCellEditable(t)}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){const{pinnedRowModel:i,rowModel:n}=this.beans;return"top"===t?i?.getPinnedTopRow(e):"bottom"===t?i?.getPinnedBottomRow(e):n.getRow(e)}navigateToNextCell(e,t,i,r){let o=i,s=!1;const a=this.beans,{cellNavigation:c,focusSvc:d,gos:u}=a;for(;o&&(o===i||!this.isValidNavigateCell(o));)u.get("enableRtl")?t===n.KeyCode.LEFT&&(o=this.getLastCellOfColSpan(o)):t===n.KeyCode.RIGHT&&(o=this.getLastCellOfColSpan(o)),o=c.getNextCellToFocus(t,o),s=(0,f._missing)(o);if(s&&e&&e.key===n.KeyCode.UP&&(o={rowIndex:-1,rowPinned:null,column:i.column}),r){const n=u.getCallback("navigateToNextCell");if((0,f._exists)(n)){const r=n({key:t,previousCellPosition:i,nextCellPosition:o||null,event:e});o=(0,f._exists)(r)?{rowPinned:r.rowPinned,rowIndex:r.rowIndex,column:r.column}:null}}if(!o)return;if(o.rowIndex<0){const t=(0,l.getFocusHeaderRowCount)(a);return void d.focusHeaderPosition({headerPosition:{headerRowIndex:t+o.rowIndex,column:i.column},event:e||void 0,fromCell:!0})}const h=this.getNormalisedPosition(o);h?this.focusPosition(h):this.tryToFocusFullWidthRow(o)}getNormalisedPosition(e){if(!!this.beans.spannedRowRenderer?.getCellByPosition(e))return e;this.ensureCellVisible(e);const t=(0,o._getCellByPosition)(this.beans,e);return t?(e=t.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:i,rowRenderer:n,focusSvc:r,eventSvc:s}=this.beans,a=i.allCols,l=n.getRowByPosition(e);if(!l||!l.isFullWidth())return!1;const c=r.getFocusedCell(),d={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?(0,u._last)(a):a[0])};this.focusPosition(d);const h=null==t?null!=c&&(0,o._isRowBefore)(d,c):t;return s.dispatchEvent({type:"fullWidthRowFocused",rowIndex:d.rowIndex,rowPinned:d.rowPinned,column:d.column,isFullWidthCell:!0,fromBelow:h}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:i}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),i?.setRangeToCell(e)}isValidNavigateCell(e){return!!(0,o._getRowNode)(this.beans,e)}getLastCellOfColSpan(e){const t=(0,o._getCellByPosition)(this.beans,e);if(!t)return e;const i=t.getColSpanningList();return 1===i.length?e:{rowIndex:e.rowIndex,column:(0,u._last)(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=(0,a._isGroupRowsSticky)(this.gos),i=this.beans.rowModel.getRow(e.rowIndex),n=t&&i?.sticky,{scrollFeature:r}=this.gridBodyCon;!n&&(0,f._missing)(e.rowPinned)&&r.ensureIndexVisible(e.rowIndex),e.column.isPinned()||r.ensureColumnVisible(e.column)}}function m(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}t.NavigationService=g},2550:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PageBoundsListener=void 0;const n=i(8731);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:i}=this.beans;t?t.calculatePages():e.calculateBounds(0,i.getRowCount()-1)}}t.PageBoundsListener=r},3003:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PageBoundsService=void 0;const n=i(8731);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){return this.topRowBounds?.rowIndex??-1}getLastRow(){return this.bottomRowBounds?.rowIndex??-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return e&&t?Math.max(t.rowTop+t.rowHeight-e.rowTop,0):0}getCurrentPagePixelRange(){const{topRowBounds:e,bottomRowBounds:t}=this;return{pageFirstPixel:e?.rowTop??0,pageLastPixel:t?t.rowTop+t.rowHeight:0}}calculateBounds(e,t){const{rowModel:i}=this.beans,n=i.getRowBounds(e);n&&(n.rowIndex=e),this.topRowBounds=n;const r=i.getRowBounds(t);r&&(r.rowIndex=t),this.bottomRowBounds=r,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=this.topRowBounds?.rowTop??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}}t.PageBoundsService=r},2078:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PageSizeSelectorSelector=t.PageSizeSelectorComp=void 0;const n=i(1502),r=i(3507),o=i(7764),s=i(159),a=i(8020),l="paginationPageSizeSelector";class c extends a.Component{wireBeans(e){this.pagination=e.pagination}constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}postConstruct(){this.addManagedPropertyListener(l,(()=>{this.onPageSizeSelectorValuesChange()})),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;const t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){(0,r._clearElement)(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&!1!==this.gos.get(l)}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),i=!t||!e.includes(t);if(i){const i=this.gos.exists("paginationPageSize"),n=!0!==this.gos.get(l);(0,o._warn)(94,{pageSizeSet:i,pageSizesSet:n,pageSizeOptions:e,paginationPageSizeOption:t}),n||(0,o._warn)(95,{paginationPageSizeOption:t,paginationPageSizeSelector:l}),e.unshift("")}const r=String(i?"":t);this.selectPageSizeComp?((0,n._areEqual)(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(r,!0)):this.createPageSizeSelectorComp(e,r),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map((e=>({value:String(e)})))}createPageSizeSelectorComp(e,t){const i=this.getLocaleTextFunc(),n=i("pageSizeSelectorLabel","Page Size:"),r=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new s.AgSelect).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(r).setLabel(n).onValueChange((()=>this.handlePageSizeItemSelected())),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(l);return Array.isArray(t)&&t?.length?[...t].sort(((e,t)=>e-t)):e}destroy(){this.toggleSelectDisplay(!1),super.destroy()}}t.PageSizeSelectorComp=c,t.PageSizeSelectorSelector={selector:"AG-PAGE-SIZE-SELECTOR",component:c}},5794:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.paginationGoToPage=t.paginationGoToLastPage=t.paginationGoToFirstPage=t.paginationGoToPreviousPage=t.paginationGoToNextPage=t.paginationGetRowCount=t.paginationGetTotalPages=t.paginationGetCurrentPage=t.paginationGetPageSize=t.paginationIsLastPageFound=void 0,t.paginationIsLastPageFound=function(e){return e.rowModel.isLastRowIndexKnown()},t.paginationGetPageSize=function(e){return e.pagination?.getPageSize()??100},t.paginationGetCurrentPage=function(e){return e.pagination?.getCurrentPage()??0},t.paginationGetTotalPages=function(e){return e.pagination?.getTotalPages()??1},t.paginationGetRowCount=function(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()},t.paginationGoToNextPage=function(e){e.pagination?.goToNextPage()},t.paginationGoToPreviousPage=function(e){e.pagination?.goToPreviousPage()},t.paginationGoToFirstPage=function(e){e.pagination?.goToFirstPage()},t.paginationGoToLastPage=function(e){e.pagination?.goToLastPage()},t.paginationGoToPage=function(e,t){e.pagination?.goToPage(t)}},90:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PaginationAutoPageSizeService=void 0;const n=i(8731),r=i(7274),o=i(2043);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()}))}notActive(){return!this.gos.get("paginationAutoPageSize")||null==this.centerRowsCtrl}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){const t=this.beans,i=()=>{const i=Math.max((0,r._getRowHeightAsNumber)(t),1),n=Math.floor(e/i);t.pagination.setPageSize(n,"autoCalculated")};this.isBodyRendered?(0,o._debounce)(this,i,50)():(i(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}}t.PaginationAutoPageSizeService=s},462:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.paginationCompCSS=void 0,t.paginationCompCSS=".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:max(var(--ag-row-height),22px);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}"},300:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PaginationSelector=t.PaginationComp=void 0;const n=i(9853),r=i(5230),o=i(2331),s=i(9970),a=i(7698),l=i(8020),c=i(8332),d=i(2078),u=i(462);class h extends c.TabGuardComp{wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}constructor(){super(),this.btFirst=l.RefPlaceholder,this.btPrevious=l.RefPlaceholder,this.btNext=l.RefPlaceholder,this.btLast=l.RefPlaceholder,this.lbRecordCount=l.RefPlaceholder,this.lbFirstRowOnPage=l.RefPlaceholder,this.lbLastRowOnPage=l.RefPlaceholder,this.lbCurrent=l.RefPlaceholder,this.lbTotal=l.RefPlaceholder,this.pageSizeComp=l.RefPlaceholder,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(u.paginationCompCSS)}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[d.PageSizeSelectorSelector]);const{btFirst:t,btPrevious:i,btNext:n,btLast:r}=this;this.activateTabIndex([t,i,n,r]),t.insertAdjacentElement("afterbegin",(0,s._createIconNoSpan)(e?"last":"first",this.beans)),i.insertAdjacentElement("afterbegin",(0,s._createIconNoSpan)(e?"next":"previous",this.beans)),n.insertAdjacentElement("afterbegin",(0,s._createIconNoSpan)(e?"previous":"next",this.beans)),r.insertAdjacentElement("afterbegin",(0,s._createIconNoSpan)(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],(()=>this.onPageSizeRelatedOptionsChange())),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:e=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(e):(0,o._focusGridInnerElement)(this.beans,e),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const e=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach((e=>{const{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:e=>{e.key!==n.KeyCode.ENTER&&e.key!==n.KeyCode.SPACE||(e.preventDefault(),i())}})})),(0,o._addFocusableContainerListener)(this.beans,this,this.getGui()),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");if(t){return t({value:e})}return(0,a._formatNumberCommas)(e,this.getLocaleTextFunc.bind(this))}getTemplate(){const e=this.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),n=e("of","of"),r=e("firstPage","First Page"),o=e("previousPage","Previous Page"),s=e("nextPage","Next Page"),a=e("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">\n                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>\n                <span class="ag-paging-row-summary-panel">\n                    <span id="ag-${l}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-${l}-to">${i}</span>\n                    <span id="ag-${l}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-${l}-of">${n}</span>\n                    <span id="ag-${l}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>\n                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>\n                    <span class="ag-paging-description">\n                        <span id="ag-${l}-start-page">${t}</span>\n                        <span id="ag-${l}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-${l}-of-page">${n}</span>\n                        <span id="ag-${l}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>\n                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>\n                </span>\n            </div>`}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){const e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=0===e,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const n=this.isZeroPagesToDisplay(),r=e===i-1;this.nextButtonDisabled=r||n,this.lastButtonDisabled=!t||n||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){(0,r._setAriaDisabled)(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&0===t}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages(),i=this.pagination.getMasterRowCount(),n=e?i:null;if(1===n){const e=this.rowModel.getRow(0);if(e&&e.group&&!(e.groupData||e.aggData))return void this.setTotalLabelsToZero()}const r=this.pagination.getCurrentPage(),o=this.pagination.getPageSize();let s,a;this.isZeroPagesToDisplay()?s=a=0:(s=o*r+1,a=s+o-1,e&&a>n&&(a=n));const l=!e&&i<s+o-1,c=this.formatNumber(s);let d;this.lbFirstRowOnPage.textContent=c;const u=this.getLocaleTextFunc();d=l?u("pageLastRowUnknown","?"):this.formatNumber(a),this.lbLastRowOnPage.textContent=d;const h=t>0?r+1:0,p=this.formatNumber(h);let f,g;if(this.lbCurrent.textContent=p,e)f=this.formatNumber(t),g=this.formatNumber(n);else{const e=u("more","more");f=e,g=e}this.lbTotal.textContent=f,this.lbRecordCount.textContent=g,this.announceAriaStatus(c,d,g,p,f)}announceAriaStatus(e,t,i,n,r){const o=this.getLocaleTextFunc(),s=o("page","Page"),a=o("to","to"),l=o("of","of"),c=`${e} ${a} ${t} ${l} ${i}`,d=`${s} ${n} ${l} ${r}`;c!==this.ariaRowStatus&&(this.ariaRowStatus=c,this.ariaAnnounce?.announceValue(c,"paginationRow")),d!==this.ariaPageStatus&&(this.ariaPageStatus=d,this.ariaAnnounce?.announceValue(d,"paginationPage"))}setTotalLabelsToZero(){const e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}}t.PaginationComp=h,t.PaginationSelector={selector:"AG-PAGINATION",component:h}},1824:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PaginationModule=void 0;const n=i(7205),r=i(3137),o=i(5794),s=i(90),a=i(3937);t.PaginationModule={moduleName:"Pagination",version:n.VERSION,beans:[a.PaginationService,s.PaginationAutoPageSizeService],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:o.paginationIsLastPageFound,paginationGetPageSize:o.paginationGetPageSize,paginationGetCurrentPage:o.paginationGetCurrentPage,paginationGetTotalPages:o.paginationGetTotalPages,paginationGetRowCount:o.paginationGetRowCount,paginationGoToNextPage:o.paginationGoToNextPage,paginationGoToPreviousPage:o.paginationGoToPreviousPage,paginationGoToFirstPage:o.paginationGoToFirstPage,paginationGoToLastPage:o.paginationGoToLastPage,paginationGoToPage:o.paginationGoToPage},dependsOn:[r.PopupModule]}},3937:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PaginationService=void 0;const n=i(8731),r=i(4422),o=i(300);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){const e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return o.PaginationSelector}isPaginateChildRows(){const e=this.gos;return!!(e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren"))||e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){const t=this.currentPage;this.active&&t!==e&&"number"==typeof t&&(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){if(!this.active)return!0;return this.getPageForIndex(e.rowIndex)===this.currentPage}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.beans.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return(0,r._exists)(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:(0,r._exists)(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:(0,r._exists)(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:(0,r._exists)(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(void 0===this.pageSizeAutoCalculated)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,0!==this.currentPage&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,0!==this.currentPage&&this.goToFirstPage()}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){const e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);const t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){const e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0)return void this.setZeroRows();const i=this.pageSize,n=t-1;this.totalPages=Math.floor(n/i)+1,this.adjustCurrentPageIfInvalid();const r=this.currentPage,o=i*r;let s=i*(r+1)-1;if(s>n&&(s=n),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(o),s===n)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{const t=e.getTopLevelRowDisplayedIndex(s+1);this.bottomDisplayedRowIndex=t-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){const e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,0===e)return void this.setZeroRows();const{pageSize:t,currentPage:i}=this,n=e-1;this.totalPages=Math.floor(n/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*i,this.bottomDisplayedRowIndex=t*(i+1)-1,this.bottomDisplayedRowIndex>n&&(this.bottomDisplayedRowIndex=n)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:n=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:n,keepRenderedRows:t})}}t.PaginationService=s},7186:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.pinnedColumnModuleCSS=void 0,t.pinnedColumnModuleCSS=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}"},6219:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PinnedColumnModule=void 0;const n=i(7205),r=i(7186),o=i(7076);t.PinnedColumnModule={moduleName:"PinnedColumn",version:n.VERSION,beans:[o.PinnedColumnService],css:[r.pinnedColumnModuleCSS]}},7076:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PinnedColumnService=void 0;const n=i(2934),r=i(3146),o=i(8731),s=i(2865),a=i(7274),l=i(3507),c=i(7764);class d extends o.BeanStub{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl}));const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:i}=this.beans,n=(0,a._isDomLayout)(e,"print"),r=n?0:t.getColsLeftWidth(),o=n?0:t.getDisplayedColumnsRightWidth();r!=this.leftWidth&&(this.leftWidth=r,i.dispatchEvent({type:"leftPinnedWidthChanged"})),o!=this.rightWidth&&(this.rightWidth=o,i.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.eBodyViewport,t=(0,l._getInnerWidth)(e);if(t<=50)return;const i=this.getPinnedColumnsOverflowingViewport(t-50),n=this.gos.getCallback("processUnpinnedColumns"),{columns:o,hasLockedPinned:s}=i;let a=o;if(a.length||s){if(n){a=n({columns:a,viewportWidth:t})}a&&a.length&&(a=a.filter((e=>!(0,r.isRowNumberCol)(e))),this.setColsPinned(a,null,"viewportSizeFeature"))}}createPinnedWidthFeature(e,...t){return new s.SetPinnedWidthFeature(e,t)}setColsPinned(e,t,i){const{colModel:r,colAnimation:o,visibleCols:s,gos:l}=this.beans;if(!r.cols)return;if(!e?.length)return;if((0,a._isDomLayout)(l,"print"))return void(0,c._warn)(37);let d;o?.start(),d=!0===t||"left"===t?"left":"right"===t?"right":null;const u=[];e.forEach((e=>{if(!e)return;const t=r.getCol(e);t&&t.getPinned()!==d&&(this.setColPinned(t,d),u.push(t))})),u.length&&(s.refresh(i),(0,n.dispatchColumnPinnedEvent)(this.eventSvc,u,i)),o?.finish()}initCol(e){const{pinned:t,initialPinned:i}=e.colDef;void 0!==t?this.setColPinned(e,t):this.setColPinned(e,i)}setColPinned(e,t){e.pinned=!0===t||"left"===t?"left":"right"===t?"right":null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(null==e.pinned)return;const i="left"===e.pinned,n="right"===e.pinned;e.hidden=!0;const r=()=>{const r=i?this.leftWidth:this.rightWidth;if(null==r)return;const o=0==r,s=e.hidden!==o,a=this.gos.get("enableRtl"),l=t.getScrollbarWidth(),c=t.verticalScrollShowing&&(a&&i||!a&&n)?r+l:r;e.comp.setPinnedContainerWidth(`${c}px`),e.comp.setDisplayed(!o),s&&(e.hidden=o,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:r,rightPinnedWidthChanged:r,scrollVisibilityChanged:r,scrollbarWidthChanged:r})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:t,rightWidth:i}=this,n=(0,l._getInnerWidth)(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(t+i+e>n){if(!(n>t+i))return 0;e=n-t-i}}return e}getPinnedColumnsOverflowingViewport(e){const t=(this.rightWidth??0)+(this.leftWidth??0);let i=!1;if(t<e)return{columns:[],hasLockedPinned:i};const{visibleCols:n}=this.beans,r=[...n.leftCols],o=[...n.rightCols];let s=0,a=0;const l=[];let c=t-0-e;for(;(a<r.length||s<o.length)&&c>0;){if(s<o.length){const e=o[s++];if(e.colDef.lockPinned){i=!0;continue}c-=e.getActualWidth(),l.push(e)}if(a<r.length&&c>0){const e=r[a++];if(e.colDef.lockPinned){i=!0;continue}c-=e.getActualWidth(),l.push(e)}}return{columns:l,hasLockedPinned:i}}}t.PinnedColumnService=d},1879:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getPinnedBottomRow=t.getPinnedTopRow=t.getPinnedBottomRowCount=t.getPinnedTopRowCount=void 0,t.getPinnedTopRowCount=function(e){return e.pinnedRowModel?.getPinnedTopRowCount()??0},t.getPinnedBottomRowCount=function(e){return e.pinnedRowModel?.getPinnedBottomRowCount()??0},t.getPinnedTopRow=function(e,t){return e.pinnedRowModel?.getPinnedTopRow(t)},t.getPinnedBottomRow=function(e,t){return e.pinnedRowModel?.getPinnedBottomRow(t)}},9294:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PinnedRowModel=void 0;const n=i(8731),r=i(3373),o=i(7274),s=i(7764);class a extends n.BeanStub{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){const e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",(e=>this.setPinnedRowData(e.currentValue,"top"))),this.addManagedPropertyListener("pinnedBottomRowData",(e=>this.setPinnedRowData(e.currentValue,"bottom"))),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return 0===this.getCache(e).order.length}isRowsToRender(e){return!this.isEmpty(e)}onGridStylesChanges(e){if(e.rowHeightChanged){const e=e=>{e.setRowHeight(e.rowHeight,!0)};u(this.pinnedBottomRows,e),u(this.pinnedTopRows,e)}}ensureRowHeightsValid(){let e=!1,t=0;const i=i=>{if(i.rowHeightEstimated){const n=(0,o._getRowHeightForNode)(this.beans,i);i.setRowTop(t),i.setRowHeight(n.height),t+=n.height,e=!0}};return u(this.pinnedBottomRows,i),t=0,u(this.pinnedTopRows,i),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const i=this.getCache(t);if(void 0===e)return i.order.length=0,void(i.cache={});const n=(0,o._getRowIdCallback)(this.gos),a="top"===t?r.ROW_ID_PREFIX_TOP_PINNED:r.ROW_ID_PREFIX_BOTTOM_PINNED,l=new Set(i.order),d=[],u=new Set;let h=0,p=-1;for(const o of e){const e=n?.({data:o,level:0,rowPinned:t})??a+this.nextId++;if(u.has(e)){(0,s._warn)(96,{id:e,data:o});continue}p++,u.add(e),d.push(e);const f=c(i,e);if(void 0!==f)f.data!==o&&f.setData(o),h+=this.setRowTopAndRowIndex(f,h,p),l.delete(e);else{const n=new r.RowNode(this.beans);n.id=e,n.data=o,n.rowPinned=t,h+=this.setRowTopAndRowIndex(n,h,p),i.cache[e]=n,i.order.push(e)}}l.forEach((e=>{c(i,e)?.clearRowTopAndRowIndex(),delete i.cache[e]})),i.order=d}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight((0,o._getRowHeightForNode)(this.beans,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return l(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return l(this.pinnedBottomRows)}getPinnedTopRowCount(){return h(this.pinnedTopRows)}getPinnedBottomRowCount(){return h(this.pinnedBottomRows)}getPinnedTopRow(e){return d(this.pinnedTopRows,e)}getPinnedBottomRow(e){return d(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return c(this.getCache(t),e)}forEachPinnedRow(e,t){return u(this.getCache(e),t)}getCache(e){return"top"===e?this.pinnedTopRows:this.pinnedBottomRows}}function l(e){const t=h(e);if(0===t)return 0;const i=d(e,t-1);return void 0===i?0:i.rowTop+i.rowHeight}function c(e,t){return e.cache[t]}function d(e,t){return c(e,e.order[t])}function u(e,t){e.order.forEach(((i,n)=>{const r=c(e,i);r&&t(r,n)}))}function h(e){return e.order.length}t.PinnedRowModel=a},5423:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PinnedRowModule=void 0;const n=i(7205),r=i(1879),o=i(9294);t.PinnedRowModule={moduleName:"PinnedRow",version:n.VERSION,beans:[o.PinnedRowModel],apiFunctions:{getPinnedTopRowCount:r.getPinnedTopRowCount,getPinnedBottomRowCount:r.getPinnedBottomRowCount,getPinnedTopRow:r.getPinnedTopRow,getPinnedBottomRow:r.getPinnedBottomRow}}},920:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._ALL_GRID_OPTIONS=t._FUNCTION_GRID_OPTIONS=t._BOOLEAN_GRID_OPTIONS=t._BOOLEAN_MIXED_GRID_OPTIONS=t._NUMBER_GRID_OPTIONS=void 0;t._NUMBER_GRID_OPTIONS=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];t._BOOLEAN_MIXED_GRID_OPTIONS=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild"],t._BOOLEAN_GRID_OPTIONS=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"],t._FUNCTION_GRID_OPTIONS=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter"],t._ALL_GRID_OPTIONS=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector","components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","selectionColumnDef","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow","themeCssLayer",...t._NUMBER_GRID_OPTIONS,...t._FUNCTION_GRID_OPTIONS,...t._BOOLEAN_GRID_OPTIONS,...t._BOOLEAN_MIXED_GRID_OPTIONS,"theme","rowSelection"]},1331:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AriaAnnouncementService=void 0;const n=i(8731),r=i(7274),o=i(5230),s=i(3507),a=i(2043);class l extends n.BeanStub{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=(0,a._debounce)(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=(0,r._getDocument)(e),i=this.descriptionContainer=t.createElement("div");i.classList.add("ag-aria-description-container"),(0,o._setAriaLive)(i,"polite"),(0,o._setAriaRelevant)(i,"additions text"),(0,o._setAriaAtomic)(i,!0),e.eGridDiv.appendChild(i)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout((()=>{if(this.isAlive()&&this.descriptionContainer){let t=e;this.lastAnnouncement===t&&(t=`${t}.`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}}),50)}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&((0,s._clearElement)(e),e.parentElement?.removeChild(e)),this.descriptionContainer=null,this.pendingAnnouncements.clear()}}t.AriaAnnouncementService=l},3433:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AriaModule=void 0;const n=i(7205),r=i(1331);t.AriaModule={moduleName:"Aria",version:n.VERSION,beans:[r.AriaAnnouncementService]}},8763:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AutoWidthCalculator=void 0;const n=i(8731);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.centerRowContainerCtrl=e.center}))}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const n=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||n.push(i),this.getPreferredWidthForElements(n)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){const i=document.createElement("form");i.style.position="fixed";const n=this.centerRowContainerCtrl.eContainer;e.forEach((e=>this.cloneItemIntoDummy(e,i))),n.appendChild(i);const r=i.offsetWidth;return n.removeChild(i),r+(t=t??this.gos.get("autoSizePadding"))}getHeaderCellForColumn(e){let t=null;return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().forEach((i=>{const n=i.getHtmlElementForColumnHeader(e);null!=n&&(t=n)})),t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const n=document.createElement("div"),r=n.classList;["ag-header-cell","ag-header-group-cell"].some((e=>i.classList.contains(e)))?(r.add("ag-header","ag-header-row"),n.style.position="static"):r.add("ag-row");let o=e.parentElement;for(;o;){if(["ag-header-row","ag-row"].some((e=>o.classList.contains(e)))){for(let e=0;e<o.classList.length;e++){const t=o.classList[e];"ag-row-position-absolute"!=t&&r.add(t)}break}o=o.parentElement}n.appendChild(i),t.appendChild(n)}}t.AutoWidthCalculator=r},447:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AutoWidthModule=void 0;const n=i(7205),r=i(8763);t.AutoWidthModule={moduleName:"AutoWidth",version:n.VERSION,beans:[r.AutoWidthCalculator]}},2308:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellComp=void 0;const n=i(7274),r=i(7230),o=i(5230),s=i(3507),a=i(4422),l=i(7766),c=i(7764),d=i(8020),u=i(1734);class h extends d.Component{constructor(e,t,i,n,r){super(),this.cellCtrl=t,this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.column,this.rowNode=t.rowNode,this.eRow=n;const a=document.createElement("div");let l;a.setAttribute("comp-id",`${this.getCompId()}`),this.eCell=a,t.isCellSpanning()?(l=document.createElement("div"),l.className="ag-spanned-cell-wrapper",l.appendChild(a),(0,o._setAriaRole)(l,"presentation"),this.setTemplateFromElement(l)):this.setTemplateFromElement(a),this.cellCssClassManager=new u.CssClassManager((()=>a)),this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1),(0,o._setAriaRole)(a,t.getCellAriaRole()),a.setAttribute("col-id",t.colIdSanitised);const c={addOrRemoveCssClass:(e,t)=>this.cellCssClassManager.addOrRemoveCssClass(e,t),setUserStyles:e=>(0,s._addStylesToElement)(a,e),getFocusableElement:()=>a,setIncludeSelection:e=>this.includeSelection=e,setIncludeRowDrag:e=>this.includeRowDrag=e,setIncludeDndSource:e=>this.includeDndSource=e,setRenderDetails:(e,t,i)=>this.setRenderDetails(e,t,i),setEditDetails:(e,t,i)=>this.setEditDetails(e,t,i),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(c,a,l,this.eCellWrapper,i,r,void 0)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.eCell}setRenderDetails(e,t,i){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=null==this.firstRender;const n=this.refreshWrapper(!1);if(this.refreshEditStyles(!1),e){!(i||n)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e))}else this.destroyRenderer(),this.insertValueWithoutCellRenderer(t)}setEditDetails(e,t,i){e?this.createCellEditorInstance(e,t,i):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){const t=this.includeRowDrag||this.includeDndSource||this.includeSelection,i=t||this.forceWrapper,n=i&&null==this.eCellWrapper;if(n){const e=document.createElement("div");e.setAttribute("role","presentation"),e.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=e,this.eCell.appendChild(this.eCellWrapper)}const r=!i&&null!=this.eCellWrapper;r&&((0,s._removeFromParent)(this.eCellWrapper),this.eCellWrapper=void 0),this.cellCssClassManager.addOrRemoveCssClass("ag-cell-value",!i);const o=!e&&i,a=o&&null==this.eCellValue;if(a){const e=document.createElement("span");e.setAttribute("role","presentation"),e.setAttribute("class","ag-cell-value"),this.eCellValue=e,this.eCellWrapper.appendChild(this.eCellValue)}const l=!o&&null!=this.eCellValue;l&&((0,s._removeFromParent)(this.eCellValue),this.eCellValue=void 0);const c=n||r||a||l;return c&&this.removeControls(),e||t&&this.addControls(),c}addControls(){this.includeRowDrag&&null==this.rowDraggingComp&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&null==this.dndSourceComp&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.dndSourceComp&&this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&null==this.checkboxSelectionComp&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.checkboxSelectionComp&&this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,i){const n=this.editorVersion,r=e.newAgStackInstance(),{params:o}=e;r.then((e=>this.afterCellEditorCreated(n,e,o,t,i)));(0,a._missing)(this.cellEditor)&&o.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){const t=this.getParentOfValue();(0,s._clearElement)(t);const i=null!=e?(0,l._escapeString)(e,!0):null;null!=i&&(t.textContent=i)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){const{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),(0,s._removeFromParent)(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){const{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),(0,s._removeFromParent)(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(null==this.cellRenderer||null==this.cellRenderer.refresh)return!1;if(this.cellRendererClass!==e.componentClass)return!1;const t=this.cellRenderer.refresh(e.params);return!0===t||void 0===t}createCellRendererInstance(e){const t=!this.beans.gos.get("suppressAnimationFrame")&&this.beans.animationFrameSvc,i=this.rendererVersion,{componentClass:n}=e,r=()=>{if(this.rendererVersion!==i||!this.isAlive())return;const t=e.newAgStackInstance(),r=this.afterCellRendererCreated.bind(this,i,n);t&&t.then(r)};t&&this.firstRender?this.beans.animationFrameSvc.createTask(r,this.rowNode.rowIndex,"createTasksP2"):r()}afterCellRendererCreated(e,t,i){if(!this.isAlive()||e!==this.rendererVersion)this.beans.context.destroyBean(i);else if(this.cellRenderer=i,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),null!=this.cellRendererGui){const e=this.getParentOfValue();(0,s._clearElement)(e),e.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,t,i,n,r){if(e!==this.editorVersion)return void this.beans.context.destroyBean(t);if(t.isCancelBeforeStart&&t.isCancelBeforeStart())return this.beans.context.destroyBean(t),void this.cellCtrl.stopEditing(!0);if(!t.getGui)return(0,c._warn)(97,{colId:this.column.getId()}),void this.beans.context.destroyBean(t);this.cellEditor=t,this.cellEditorGui=t.getGui();const o=n||void 0!==t.isPopup&&t.isPopup();o?this.addPopupCellEditor(i,r):this.addInCellEditor(),this.refreshEditStyles(!0,o),t.afterGuiAttached&&t.afterGuiAttached(),this.cellCtrl.cellEditorAttached()}refreshEditStyles(e,t){const{cellCssClassManager:i}=this;i.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),i.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),i.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),this.cellCtrl.setInlineEditingCss()}addInCellEditor(){const{eCell:e}=this;if(e.contains((0,n._getActiveDomElement)(this.beans))&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui){this.getParentOfValue().appendChild(this.cellEditorGui)}}addPopupCellEditor(e,t){"fullRow"===this.beans.gos.get("editType")&&(0,c._warn)(98);const i=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(this.beans.editSvc.createPopupEditorWrapper(e));const n=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&n.appendChild(this.cellEditorGui);const o=this.beans.popupSvc,s=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),a=null!=t?t:i.getPopupPosition?.()??"over",l=this.beans.gos.get("enableRtl"),d={ePopup:n,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.eCell,position:a,alignSide:l?"right":"left",keepWithinBounds:!0},u=o.positionPopupByComponent.bind(o,d),h=(0,r._getLocaleTextFunc)(this.beans.localeSvc),p=o.addPopup({modal:s,eChild:n,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.eCell,positionCallback:u,ariaLabel:h("ariaLabelCellEditor","Cell Editor")});p&&(this.hideEditorPopup=p.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){const{eCell:e}=this;e.contains((0,n._getActiveDomElement)(this.beans))&&e.focus({preventScroll:!0}),(0,s._clearElement)(this.getParentOfValue())}}t.CellComp=h},814:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellCtrl=t._getCellCtrlForEventTarget=t.DOM_DATA_KEY_CELL_CTRL=void 0;const n=i(3146),r=i(2036),o=i(8731),s=i(7274),a=i(1295),l=i(2612),c=i(5230),d=i(3507),u=i(2979),h=i(2331),p=i(4422),f=i(7038),g=i(6368),m=i(3976);t.DOM_DATA_KEY_CELL_CTRL="cellCtrl",t._getCellCtrlForEventTarget=function(e,i){return(0,u._getCtrlForEventTarget)(e,i,t.DOM_DATA_KEY_CELL_CTRL)};let v=0;class b extends o.BeanStub{constructor(e,t,i,n){super(),this.column=e,this.rowNode=t,this.rowCtrl=n,this.rangeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.tooltipFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.beans=i;const{colId:r,colIdSanitised:o}=e;this.instanceId=r+"-"+v++,this.colIdSanitised=o,this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusSvc.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusSvc.clearRestoreFocus()}addFeatures(){const{beans:e}=this;this.positionFeature=new m.CellPositionFeature(this,e),this.customStyleFeature=e.cellStyles?.createCellCustomStyleFeature(this,e),this.mouseListener=new g.CellMouseListenerFeature(this,e,this.column),this.keyboardListener=new f.CellKeyboardListenerFeature(this,e,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature();const{rangeSvc:t}=e;t&&(0,s._isCellSelectionEnabled)(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(e,this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){this.tooltipFeature=this.beans.tooltipSvc?.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(e,t,i,n,r,o,s){this.comp=e,this.eGui=t,this.printLayout=r,s??(s=this),this.addDomData(s),this.addFeatures(),s.addDestroyFunc((()=>this.removeFeatures())),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(n,s),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.positionFeature?.init(),this.customStyleFeature?.setComp(e),this.tooltipFeature?.refreshTooltip(),this.keyboardListener?.init(),this.rangeFeature?.setComp(e),o&&this.isCellEditable()?this.beans.editSvc?.startEditing(this):this.showValue(!1,!0),this.onCompAttachedFuncs.length&&(this.onCompAttachedFuncs.forEach((e=>e())),this.onCompAttachedFuncs=[])}setupAutoHeight(e,t){this.isAutoHeight=this.beans.rowAutoHeight?.setupCellAutoHeight(this,e,t)??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const e=this.column.getColDef();return null!=e.cellRenderer||null!=e.cellRendererSelector}getValueToDisplay(){return this.valueFormatted??this.value}showValue(e,t){const{beans:i,column:n,rowNode:o,rangeFeature:s}=this,{userCompFactory:a}=i,c=this.getValueToDisplay();let d;if(o.stub&&null==o.groupData?.[n.getId()]){const e=this.createCellRendererParams();d=(0,r._getLoadingCellRendererDetails)(a,n.getColDef(),e)}else if(this.isCellRenderer()){const e=this.createCellRendererParams();d=(0,r._getCellRendererDetails)(a,n.getColDef(),e)}this.comp.setRenderDetails(d,c,e),!t&&s&&(0,l._requestAnimationFrame)(i,(()=>s?.refreshHandle()))}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e)),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return!(null!=this.rowNode.rowPinned)&&("function"==typeof e||!0===e)}isCheckboxSelection(e){const{rowSelection:t}=this.beans.gridOptions;return e.checkboxSelection||(0,n.isColumnSelectionCol)(this.column)&&t&&"string"!=typeof t&&(0,s._getCheckboxes)(t)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e)),i=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),n=this.includeDndSource!=this.isIncludeControl(e.dndSource),r=this.isAutoHeight!=this.column.isAutoHeight();return t||i||n||r}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(e=!1){return this.beans.editSvc?.stopEditing(this,e)??!1}createCellRendererParams(){const{value:e,valueFormatted:t,column:i,rowNode:n,comp:r,eGui:o,beans:{valueSvc:a,gos:l}}=this,c=(0,s._addGridCommonParams)(l,{value:e,valueFormatted:t,getValue:()=>a.getValueForDisplay(i,n),setValue:e=>a.setValue(n,i,e),formatValue:this.formatValue.bind(this),data:n.data,node:n,pinned:i.getPinned(),colDef:i.getColDef(),column:i,refreshCell:this.refreshCell.bind(this),eGridCell:o,eParentOfValue:r.getParentOfValue(),registerRowDragger:(e,t,i,n)=>this.registerRowDragger(e,t,n),setTooltip:(e,t)=>{l.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(e,t),this.tooltipFeature?.refreshTooltip()}});return c}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(e)}refreshCell(e){if(this.suppressRefreshCell||this.editing)return;const t=this.column.getColDef(),i=null!=e&&!!e.newData,n=null!=e&&!!e.suppressFlash,r=null==t.field&&null==t.valueGetter&&null==t.showRowGroup,o=e&&e.forceRefresh||r||i,s=!!this.comp,a=this.updateAndFormatValue(s);if(s){if(o||a){this.showValue(i,!1);const e=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!n&&!e&&t.enableCellChangeFlash&&this.beans.cellFlashSvc?.flashCell(this),this.customStyleFeature?.applyUserStyles(),this.customStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshTooltip(),this.customStyleFeature?.applyCellClassRules()}}stopEditingAndFocus(e=!1,t=!1){this.beans.editSvc?.stopEditingAndFocus(this,e,t)}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,i=this.valueFormatted;return this.value=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),!e||(!this.valuesAreEqual(t,this.value)||this.valueFormatted!=i)}valuesAreEqual(e,t){const i=this.column.getColDef();return i.equals?i.equals(e,t):e===t}addDomData(e){const i=this.eGui;(0,s._setDomData)(this.beans.gos,i,t.DOM_DATA_KEY_CELL_CTRL,this),e.addDestroyFunc((()=>(0,s._setDomData)(this.beans.gos,i,t.DOM_DATA_KEY_CELL_CTRL,null)))}createEvent(e,t){const{rowNode:i,column:n,value:r,beans:o}=this;return(0,s._addGridCommonParams)(o.gos,{type:t,node:i,data:i.data,value:r,column:n,colDef:n.getColDef(),rowPinned:i.rowPinned,event:e,rowIndex:i.rowIndex})}processCharacter(e){this.keyboardListener?.processCharacter(e)}onKeyDown(e){this.keyboardListener?.onKeyDown(e)}onMouseEvent(e,t){this.mouseListener?.onMouseEvent(e,t)}getColSpanningList(){return this.positionFeature.getColSpanningList()}onLeftChanged(){this.comp&&this.positionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:i}=this;(0,a.refreshFirstAndLastStyles)(e,t,i.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);(0,c._setAriaColIndex)(this.eGui,e)}onWidthChanged(){return this.positionFeature?.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){this.comp&&this.rangeFeature?.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.comp&&this.rangeFeature?.onCellSelectionChanged()}isRangeSelectionEnabled(){return null!=this.rangeFeature}focusCell(e=!1){this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:e})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.rangeFeature?.onCellSelectionChanged()}onSuppressCellFocusChanged(e){const t=this.eGui;t&&((0,n.isRowNumberCol)(this.column)&&(e=!0),(0,d._addOrRemoveAttribute)(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.addOrRemoveCssClass("ag-cell-first-right-pinned",e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.addOrRemoveCssClass("ag-cell-last-left-pinned",e)}isCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}onCellFocused(e){const{beans:t}=this;if((0,h._isCellFocusSuppressed)(t))return;const i=this.isCellFocused();if(!this.comp)return void(i&&e?.forceBrowserFocus&&(this.focusEventToRestore=e));if(this.focusEventToRestore=void 0,this.comp.addOrRemoveCssClass("ag-cell-focus",i),i&&e&&e.forceBrowserFocus){let t=this.comp.getFocusableElement();if(this.editing){const e=(0,h._findFocusableElements)(t,null,!0);e.length&&(t=e[0])}t.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}const n="fullRow"===t.gos.get("editType");i||n||!this.editing||t.editSvc?.stopRowOrCellEdit(this),i&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:(0,p._makeNull)(t),column:this.column}}setInlineEditingCss(){this.beans.editSvc?.setInlineEditingCss(this.rowCtrl)}applyStaticCssClasses(){const{comp:e}=this;e.addOrRemoveCssClass("ag-cell",!0),e.addOrRemoveCssClass("ag-cell-not-inline-editing",!0);const t=1==this.column.isAutoHeight();e.addOrRemoveCssClass("ag-cell-auto-height",t),e.addOrRemoveCssClass("ag-cell-normal-height",!t)}onColumnHover(){this.beans.colHover?.onCellColumnHover(this.column,this.comp)}onColDefChanged(){this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?this.beans.editSvc?.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0}))}setWrapText(){const e=1==this.column.getColDef().wrapText;this.comp.addOrRemoveCssClass("ag-cell-wrap-text",e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),i=this.createEvent(e,"cellContextMenu"),{beans:n}=this;n.eventSvc.dispatchEvent(i),t.onCellContextMenu&&window.setTimeout((()=>{n.frameworkOverrides.wrapOutgoing((()=>{t.onCellContextMenu(i)}))}),0)}getCellRenderer(){return this.comp?.getCellRenderer()??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const e=this.beans.selectionSvc?.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,i){if(this.customRowDragComp)return void this.customRowDragComp.setDragElement(e,t);const n=this.createRowDragComp(e,t,i);n&&(this.customRowDragComp=n,this.addDestroyFunc((()=>{this.beans.context.destroyBean(n),this.customRowDragComp=null})))}createRowDragComp(e,t,i){const n=this.beans.rowDragSvc?.createRowDragCompForCell(this.rowNode,this.column,(()=>this.value),e,t,i);if(n)return this.beans.context.createBean(n),n}cellEditorAttached(){this.onEditorAttachedFuncs.forEach((e=>e())),this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}}t.CellCtrl=b},4534:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellFlashService=void 0;const n=i(8731),r=i(6257),o=i(4422);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="cellFlashSvc"}onFlashCells(e,t){if(!e.comp)return;const i=(0,r._createCellId)(e.cellPosition);t.cells[i]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",t?.flashDuration,t?.fadeDuration)}animateCell(e,t,i,n){const r=e.comp;if(!r)return;const{gos:s}=this;if(i||(i=s.get("cellFlashDuration")),0===i)return;(0,o._exists)(n)||(n=s.get("cellFadeDuration"));const a=`ag-cell-${t}`,l=`ag-cell-${t}-animation`;r.addOrRemoveCssClass(a,!0),r.addOrRemoveCssClass(l,!1);const c=e.eGui;this.beans.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{e.isAlive()&&(r.addOrRemoveCssClass(a,!1),r.addOrRemoveCssClass(l,!0),c.style.transition=`background-color ${n}ms`,window.setTimeout((()=>{e.isAlive()&&(r.addOrRemoveCssClass(l,!1),c.style.transition="")}),n))}),i)}))}}t.CellFlashService=s},7038:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellKeyboardListenerFeature=void 0;const n=i(9853),r=i(8731),o=i(7274),s=i(8667);class a extends r.BeanStub{constructor(e,t,i,n){super(),this.cellCtrl=e,this.rowNode=i,this.rowCtrl=n,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){const t=e.key;switch(t){case n.KeyCode.ENTER:this.onEnterKeyDown(e);break;case n.KeyCode.F2:this.onF2KeyDown(e);break;case n.KeyCode.ESCAPE:this.onEscapeKeyDown(e);break;case n.KeyCode.TAB:this.onTabKeyDown(e);break;case n.KeyCode.BACKSPACE:case n.KeyCode.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case n.KeyCode.DOWN:case n.KeyCode.UP:case n.KeyCode.RIGHT:case n.KeyCode.LEFT:this.onNavigationKeyDown(e,t)}}onNavigationKeyDown(e,t){if(!this.cellCtrl.editing){if(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{const i=this.cellCtrl.getFocusedCellPosition();this.beans.navigation?.navigateToNextCell(e,t,i,!0)}e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:i}=this.beans;if(!t)return;const n=t.extendLatestRangeInDirection(e);n&&i?.ensureCellVisible(n)}onTabKeyDown(e){this.beans.navigation?.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:r,rowNode:a}=this,{gos:l,rangeSvc:c,eventSvc:d}=r;if(!i.editing){if(d.dispatchEvent({type:"keyShortcutChangedCellStart"}),function(e,t=!1){return e===n.KeyCode.DELETE||!t&&e===n.KeyCode.BACKSPACE&&(0,s._isMacOsUserAgent)()}(e,l.get("enableCellEditingOnBackspace"))){if(c&&(0,o._isCellSelectionEnabled)(l))c.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const{column:e}=i,t=this.beans.valueSvc.getDeleteValue(e,a);a.setDataValue(e,t,"cellClear")}}else r.editSvc?.startRowOrCellEdit(i,e,t);d.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){const{cellCtrl:t,beans:i}=this;if(t.editing||this.rowCtrl.editing)t.stopEditingAndFocus(!1,e.shiftKey);else if(i.gos.get("enterNavigatesVertically")){const r=e.shiftKey?n.KeyCode.UP:n.KeyCode.DOWN;i.navigation?.navigateToNextCell(null,r,t.cellPosition,!1)}else i.editSvc?.startRowOrCellEdit(t,n.KeyCode.ENTER,e),t.editing&&e.preventDefault()}onF2KeyDown(e){const{cellCtrl:t,beans:i}=this;t.editing||i.editSvc?.startRowOrCellEdit(t,n.KeyCode.F2,e)}onEscapeKeyDown(e){const{cellCtrl:t,beans:i}=this;t.editing&&(i.editSvc?.stopRowOrCellEdit(t,!0),t.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.editing)return;const t=e.key;t===n.KeyCode.SPACE?this.onSpaceKeyDown(e):this.beans.editSvc?.startRowOrCellEdit(this.cellCtrl,t,e)&&e.preventDefault()}onSpaceKeyDown(e){const{gos:t}=this.beans;!this.cellCtrl.editing&&(0,o._isRowSelection)(t)&&this.beans.selectionSvc?.handleSelectionEvent(e,this.rowNode,"spaceKey"),e.preventDefault()}destroy(){super.destroy()}}t.CellKeyboardListenerFeature=a},6368:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellMouseListenerFeature=void 0;const n=i(3146),r=i(8731),o=i(8667),s=i(3507),a=i(2979);class l extends r.BeanStub{constructor(e,t,i){super(),this.cellCtrl=e,this.column=i,this.beans=t}onMouseEvent(e,t){if(!(0,a._isStopPropagationForAgGrid)(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t)}}onCellClicked(e){if(this.beans.touchSvc?.handleCellDoubleClick(this,e))return;const{eventSvc:t,rangeSvc:i,gos:n,editSvc:r}=this.beans,o=e.ctrlKey||e.metaKey;i&&o&&i.getCellRangeCount(this.cellCtrl.cellPosition)>1&&i.intersectLastRange(!0);const s=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(s);const a=this.column.getColDef();a.onCellClicked&&window.setTimeout((()=>{this.beans.frameworkOverrides.wrapOutgoing((()=>{a.onCellClicked(s)}))}),0);!((n.get("singleClickEdit")||a.singleClickEdit)&&!n.get("suppressClickEdit"))||e.shiftKey&&0!=i?.getCellRanges().length||r?.startRowOrCellEdit(this.cellCtrl,void 0,e)}onCellDoubleClicked(e){const{column:t,beans:i,cellCtrl:n}=this,{eventSvc:r,frameworkOverrides:o,gos:s,editSvc:a}=i,l=t.getColDef(),c=n.createEvent(e,"cellDoubleClicked");r.dispatchEvent(c),"function"==typeof l.onCellDoubleClicked&&window.setTimeout((()=>{o.wrapOutgoing((()=>{l.onCellDoubleClicked(c)}))}),0);!s.get("singleClickEdit")&&!s.get("suppressClickEdit")&&a?.startRowOrCellEdit(n,null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:r}=e,a=e.target,{cellCtrl:l,beans:c}=this,{eventSvc:d,rangeSvc:u,rowNumbersSvc:h,focusSvc:p,gos:f}=c;if(this.isRightClickInExistingRange(e))return;const g=u&&!u.isEmpty(),m=this.containsWidget(a),{cellPosition:v}=l,b=(0,n.isRowNumberCol)(v.column);if(h&&b&&!h.handleMouseDownOnCell(v,e))return u&&e.preventDefault(),void e.stopImmediatePropagation();if(!r||!g){const t=f.get("enableCellTextSelection")&&e.defaultPrevented,i=((0,o._isBrowserSafari)()||t)&&!l.editing&&!(0,s._isFocusableFormField)(a)&&!m;l.focusCell(i)}if(r&&g&&!p.isCellFocused(v)){e.preventDefault();const t=p.getFocusedCell();if(t){const{column:e,rowIndex:i,rowPinned:n}=t,r=c.rowRenderer.getRowByPosition({rowIndex:i,rowPinned:n}),o=r?.getCellCtrl(e);o?.editing&&o.stopEditing(),p.setFocusedCell({column:e,rowIndex:i,rowPinned:n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!m){if(u)if(b&&e.preventDefault(),r)u.extendLatestRangeToCell(v);else{const e=t||i;u.setRangeToCell(v,e)}d.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.cellPosition),n=2===e.button||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(i&&n)return!0}return!1}containsWidget(e){return(0,s._isElementChildOfClass)(e,"ag-selection-checkbox",3)||(0,s._isElementChildOfClass)(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),i?.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),i?.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.eGui,i=t.contains(e.target),n=t.contains(e.relatedTarget);return i&&n}destroy(){super.destroy()}}t.CellMouseListenerFeature=l},3976:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellPositionFeature=void 0;const n=i(8731),r=i(7274),o=i(1502),s=i(4422);class a extends n.BeanStub{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const e=this.cellCtrl.getCellSpan();e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e&&(this.refreshSpanHeight(e),this.addManagedListeners(this.beans.eventSvc,{modelUpdated:this.refreshSpanHeight.bind(this,e),recalculateRowBounds:this.refreshSpanHeight.bind(this,e)}))}refreshSpanHeight(e){const t=e.getCellHeight();null!=t&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();(0,o._areEqual)(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce(((e,t)=>e+t.getActualWidth()),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,i=e.getColSpan(t),n=[];if(1===i)n.push(e);else{let t=e;const r=e.getPinned();for(let e=0;t&&e<i&&(n.push(t),t=this.beans.visibleCols.getColAfter(t),t&&!(0,s._missing)(t))&&r===t.getPinned();e++);}return n}onLeftChanged(){if(!this.eSetLeft)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return e=this.beans.gos.get("enableRtl")&&this.colsSpanning?(0,o._last)(this.colsSpanning):this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||"left"===this.column.getPinned())return e;const{visibleCols:t}=this.beans,i=t.getColsLeftWidth();if("right"===this.column.getPinned()){return i+t.bodyWidth+(e||0)}return i+(e||0)}_legacyApplyRowSpan(e){if(1===this.rowSpan&&!e)return;const t=(0,r._getRowHeightAsNumber)(this.beans)*this.rowSpan;this.eContent.style.height=`${t}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}}t.CellPositionFeature=a},916:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.flashCells=void 0,t.flashCells=function(e,t={}){const{cellFlashSvc:i}=e;i&&e.frameworkOverrides.wrapIncoming((()=>{e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach((e=>i.flashCell(e,t)))}))}},3498:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HighlightChangesModule=void 0;const n=i(7205),r=i(8868),o=i(2346),s=i(4534),a=i(916);t.HighlightChangesModule={moduleName:"HighlightChanges",version:n.VERSION,beans:[s.CellFlashService],userComponents:{agAnimateShowChangeCellRenderer:r.AnimateShowChangeCellRenderer,agAnimateSlideCellRenderer:o.AnimateSlideCellRenderer},apiFunctions:{flashCells:a.flashCells}}},8868:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AnimateShowChangeCellRenderer=void 0;const n=i(3507),r=i(4422),o=i(8020);class s extends o.Component{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(i),this.setTemplateFromElement(e)}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),n=e.formatValue(i),o=(0,r._exists)(n)?n:i,s=t>=0,a=this.eDelta;a.textContent=s?"↑"+o:"↓"+o,a.classList.toggle("ag-value-change-delta-up",s),a.classList.toggle("ag-value-change-delta-down",!s)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{e===this.refreshCount&&this.hideDeltaValue()}),2e3)}))}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),(0,n._clearElement)(this.eDelta)}refresh(e,t=!1){const{value:i,valueFormatted:o}=e,{eValue:s,lastValue:a,beans:l}=this;if(i===a)return!1;if((0,r._exists)(o)?s.textContent=o:(0,r._exists)(i)?s.textContent=i:(0,n._clearElement)(s),l.filterManager?.isSuppressFlashingCellsBecauseFiltering())return!1;if("number"==typeof i&&"number"==typeof a){const t=i-a;this.showDelta(e,t)}return a&&s.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0}}t.AnimateShowChangeCellRenderer=s},9707:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.animateSlideCellRendererCSS=void 0,t.animateSlideCellRendererCSS=".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}"},2346:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AnimateSlideCellRenderer=void 0;const n=i(7274),r=i(3507),o=i(4422),s=i(8020),a=i(9707);class l extends s.Component{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current"),this.registerCSS(a.animateSlideCellRendererCSS)}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const{beans:t,eCurrent:i}=this,r=(0,n._getDocument)(t).createElement("span");r.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=r,r.textContent=i.textContent,this.getGui().insertBefore(r,i),t.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")}),50),window.setTimeout((()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)}),3e3)}))}refresh(e,t=!1){let i=e.value;if((0,o._missing)(i)&&(i=""),i===this.lastValue)return!1;if(this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering())return!1;t||this.addSlideAnimation(),this.lastValue=i;const n=this.eCurrent;return(0,o._exists)(e.valueFormatted)?n.textContent=e.valueFormatted:(0,o._exists)(e.value)?n.textContent=i:(0,r._clearElement)(n),!0}}t.AnimateSlideCellRenderer=l},7358:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxCellRendererModule=void 0;const n=i(7205),r=i(3987);t.CheckboxCellRendererModule={moduleName:"CheckboxCellRenderer",version:n.VERSION,userComponents:{agCheckboxCellRenderer:r.CheckboxCellRenderer}}},2522:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkboxCellRendererCSS=void 0,t.checkboxCellRendererCSS=".ag-checkbox-cell{height:100%}"},3987:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxCellRenderer=void 0;const n=i(3146),r=i(9853),o=i(7274),s=i(5230),a=i(2979),l=i(66),c=i(8020),d=i(2522);class u extends c.Component{constructor(){super('\n            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[l.AgCheckboxSelector]),this.eCheckbox=c.RefPlaceholder,this.registerCSS(d.checkboxCellRendererCSS)}init(e){this.refresh(e);const{eCheckbox:t,beans:i}=this,n=t.getInputElement();n.setAttribute("tabindex","-1"),(0,s._setAriaLive)(n,"polite"),this.addManagedListeners(n,{click:e=>{if((0,a._stopPropagationForAgGrid)(e),t.isDisabled())return;const i=t.getValue();this.onCheckboxChanged(i)},dblclick:e=>{(0,a._stopPropagationForAgGrid)(e)}}),this.addManagedElementListeners(e.eGridCell,{keydown:n=>{if(n.key===r.KeyCode.SPACE&&!t.isDisabled()){e.eGridCell===(0,o._getActiveDomElement)(i)&&t.toggle();const r=t.getValue();this.onCheckboxChanged(r),n.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,i=!0;const{value:r,column:o,node:a}=e;if(a.group&&o)if("boolean"==typeof r)t=r;else{const e=o.getColId();e.startsWith(n.GROUP_AUTO_COLUMN_ID)?t=null==r||""===r?void 0:"true"===r:a.aggData&&void 0!==a.aggData[e]?t=r??void 0:i=!1}else t=r??void 0;const{eCheckbox:l}=this;if(!i)return void l.setDisplayed(!1);l.setValue(t);const c=e.disabled??!o?.isCellEditable(a);l.setDisabled(c);const d=this.getLocaleTextFunc(),u=(0,s._getAriaCheckboxStateName)(d,t),h=c?u:`${d("ariaToggleCellValue","Press SPACE to toggle cell value")} (${u})`;l.setInputAriaLabel(h)}onCheckboxChanged(e){const{eventSvc:t,params:i}=this,{column:n,node:r,value:o}=i,s={column:n,colDef:n.getColDef(),data:r.data,node:r,rowIndex:r.rowIndex,rowPinned:r.rowPinned,value:o};t.dispatchEvent({type:"cellEditingStarted",...s});const a=r.setDataValue(n,e,"edit");t.dispatchEvent({type:"cellEditingStopped",...s,oldValue:o,newValue:e,valueChanged:a}),a||this.updateCheckbox(i)}}t.CheckboxCellRenderer=u},1734:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CssClassManager=void 0;t.CssClassManager=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){this.addOrRemoveCssClass(e,!0)}removeCssClass(e){this.addOrRemoveCssClass(e,!1)}containsCssClass(e){const t=this.getGui();return!!t&&t.classList.contains(e)}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const i=(e||"").split(" ");if(i.length>1)return void i.forEach((e=>this.addOrRemoveCssClass(e,t)))}if(this.cssClassStates[e]!==t&&e.length){const i=this.getGui();i&&i.classList.toggle(e,t),this.cssClassStates[e]=t}}}},714:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DndSourceComp=void 0;const n=i(7274),r=i(9970),o=i(8020);class s extends o.Component{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild((0,r._createIconNoSpan)("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",(e=>{e.stopPropagation()})),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const{rowNode:t,column:i,eCell:r,gos:o}=this,s=i.getColDef().dndSourceOnRowDrag,a=e.dataTransfer;if(a.setDragImage(r,0,0),s){s((0,n._addGridCommonParams)(o,{rowNode:t,dragEvent:e}))}else try{const e=JSON.stringify(t.data);a.setData("application/json",e),a.setData("text/plain",e)}catch(e){}}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}}t.DndSourceComp=s},2147:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PositionableFeature=void 0;const n=i(8731),r=i(3507),o="ag-resizer-wrapper",s=(e,t)=>`<div data-ref="${e}Resizer" class="ag-resizer ag-resizer-${t}"></div>`,a=`<div class="${o}">\n        ${s("eTopLeft","topLeft")}\n        ${s("eTop","top")}\n        ${s("eTopRight","topRight")}\n        ${s("eRight","right")}\n        ${s("eBottomRight","bottomRight")}\n        ${s("eBottom","bottom")}\n        ${s("eBottomLeft","bottomLeft")}\n        ${s("eLeft","left")}\n    </div>`;class l extends n.BeanStub{wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,n=e/2-this.getHeight()/2;this.offsetElement(i,n)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:n,minHeight:o,height:s,x:a,y:l}=this.config;this.offsetParent||this.setOffsetParent();let c=0,d=0;const u=(0,r._isVisible)(this.element);if(u){const e=this.findBoundaryElement(),t=window.getComputedStyle(e);if(null!=t.minWidth){const i=e.offsetWidth-this.element.offsetWidth;d=parseInt(t.minWidth,10)-i}if(null!=t.minHeight){const i=e.offsetHeight-this.element.offsetHeight;c=parseInt(t.minHeight,10)-i}}if(this.minHeight=o||c,this.minWidth=i||d,n&&this.setWidth(n),s&&this.setHeight(s),n&&s||this.refreshSize(),e)this.center();else if(a||l)this.offsetElement(a,l);else if(u&&t){let e=this.boundaryEl,t=!0;if(e||(e=this.findBoundaryElement(),t=!1),e){const i=parseFloat(e.style.top),n=parseFloat(e.style.left);t?this.offsetElement(isNaN(n)?0:n,isNaN(i)?0:i):this.setPosition(n,i)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragSvc?.addDragSource(i),this.moveElementDragListener=i):(this.dragSvc?.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),"boolean"==typeof e){if(!1===e)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach((t=>{const i=!!e[t],n=this.getResizerElement(t),r={dragStartPixels:0,eElement:n,onDragStart:e=>this.onResizeStart(e,t),onDragging:this.onResize.bind(this),onDragStop:e=>this.onResizeEnd(e,t)};(i||!this.isAlive()&&!i)&&(i?(this.dragSvc?.addDragSource(r),this.resizeListeners.push(r),n.style.pointerEvents="all"):n.style.pointerEvents="none",this.resizable[t]=i)}))}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;-1!==t&&(this.element.style.width=`${t}px`),-1!==e&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let n=!1;if("string"==typeof e&&-1!==e.indexOf("%"))(0,r._setFixedHeight)(i,e),e=(0,r._getAbsoluteHeight)(i),n=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const t=this.getAvailableHeight();t&&e>t&&(e=t)}this.getHeight()!==e&&(n?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?(0,r._setFixedHeight)(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height="number"==typeof e?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const n=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:n.top,s=e?0:r.top;let a=0;if(t){const e=this.element.parentElement;if(e){const{bottom:t}=e.getBoundingClientRect();a=t-n.bottom}}return i+s-o-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let n=!1;if("string"==typeof e&&-1!==e.indexOf("%"))(0,r._setFixedWidth)(t,e),e=(0,r._getAbsoluteWidth)(t),n=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:t}=this.offsetParent,n=i?this.position.x:this.element.getBoundingClientRect().left;t&&e+n>t&&(e=t-n)}this.getWidth()!==e&&(n?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?(0,r._setFixedWidth)(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width="number"==typeof e?e:parseFloat(e)))}offsetElement(e=0,t=0){const{forcePopupParentAsOffsetParent:i}=this.config,n=i?this.boundaryEl:this.element;n&&(this.popupSvc?.positionPopup({ePopup:n,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(n.style.left),parseFloat(n.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const e=this.getAvailableHeight();this.element.style.setProperty("max-height",`${e}px`)};e&&this.popupSvc?this.resizeObserverSubscriber=(0,r._observeResize)(this.beans,this.popupSvc?.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:n,anywhereWithin:r,topBuffer:o}=e,s=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(t,!!i,!!r,s)?0:s,movementY:this.shouldSkipY(t,!!n,o,a)?0:a}}shouldSkipX(e,t,i,n){const r=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:r.left;let l=a<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=s.right;return!!l||(l=t?n<0&&e.clientX>a+o.left||n>0&&e.clientX<a+o.left:i?n<0&&e.clientX>s.right||n>0&&e.clientX<a+o.left:n<0&&e.clientX>s.right||n>0&&e.clientX<s.right,l)}shouldSkipY(e,t,i=0,n){const r=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:r.top;let l=a<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=s.bottom;return!!l||(l=t?n<0&&e.clientY>a+o.top+i||n>0&&e.clientY<a+o.top:n<0&&e.clientY>s.bottom||n>0&&e.clientY<s.bottom,l)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const t=(new DOMParser).parseFromString(a,"text/html").body;e.appendChild(t.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${o}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:n}=this.config;i||n||this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter((e=>!e.classList.contains("ag-hidden"))):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let n=0;n<e.length;n++){const r=e[n],o=!!r.style.flex&&"0 0 auto"!==r.style.flex;if(r===this.element)continue;let s=this.minHeight||0,a=this.minWidth||0;if(o){const e=window.getComputedStyle(r);e.minHeight&&(s=parseInt(e.minHeight,10)),e.minWidth&&(a=parseInt(e.minWidth,10))}else s=r.offsetHeight,a=r.offsetWidth;t+=s,i+=a}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let n=0;n<i.length;n++){const r=i[n];r!==t&&(e?r.style.height=`${r.offsetHeight}px`:r.style.width=`${r.offsetWidth}px`,r.style.flex="0 0 auto",r===this.element&&(t=i[n+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some((e=>e))}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:n,isRight:r,isBottom:o,isLeft:s}=this.currentResizer,a=r||s,l=o||n,{movementX:c,movementY:d}=this.calculateMouseMovement({e:e,isLeft:s,isTop:n}),u=this.position.x,h=this.position.y;let p=0,f=0;if(a&&c){const e=s?-1:1,t=this.getWidth(),i=t+c*e;let n=!1;s&&(p=t-i,(u+p<=0||i<=this.minWidth)&&(n=!0,p=0)),n||this.setWidth(i)}if(l&&d){const e=n?-1:1,t=this.getHeight(),i=t+d*e;let r=!1;n?(f=t-i,(h+f<=0||i<=this.minHeight)&&(r=!0,f=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&t<i&&this.getMinSizeOfSiblings().height+i>this.element.parentElement.offsetHeight&&(r=!0),r||this.setHeight(i)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&p||f)&&this.offsetElement(u+p,h+f)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let n;this.config.calculateTopBuffer&&(n=this.config.calculateTopBuffer());const{movementX:r,movementY:o}=this.calculateMouseMovement({e:e,isTop:!0,anywhereWithin:!0,topBuffer:n});this.offsetElement(t+r,i+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if("static"!==window.getComputedStyle(e).position)return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragSvc?.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragSvc?.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}}t.PositionableFeature=l},8703:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SetLeftFeature=void 0;const n=i(8731),r=i(6908),o=i(7274),s=i(5230),a=i(1502),l=i(4422);class c extends n.BeanStub{constructor(e,t,i,n){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=n,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?(0,a._last)(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,i=e.get("suppressColumnMoveAnimation"),n=(0,l._exists)(this.columnOrGroup.getOldLeft());t?.isActive()&&n&&!i?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),i=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=i,this.beans.colAnimation.executeNextVMTurn((()=>{this.actualLeft===i&&this.setLeft(i)}))}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:i,visibleCols:n}=this.beans;if(!(0,o._isDomLayout)(i,"print"))return t;if("left"===e.getPinned())return t;const r=n.getColsLeftWidth();if("right"===e.getPinned()){return r+n.bodyWidth+t}return r+t}setLeft(e){if((0,l._exists)(e)&&(this.eCell.style.left=`${e}px`),(0,r.isColumnGroup)(this.columnOrGroup)){const e=this.columnOrGroup.getLeafColumns();if(!e.length)return;e.length>1&&(0,s._setAriaColSpan)(this.ariaEl,e.length)}}}t.SetLeftFeature=c},6105:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingOverlayComponent=void 0;const n=i(4422),r=i(4679);class o extends r.OverlayComponent{init(){const e=(0,n._makeNull)(this.gos.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){const e=this.getLocaleTextFunc();setTimeout((()=>{this.getGui().textContent=e("loadingOoo","Loading...")}))}}}t.LoadingOverlayComponent=o},5233:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.NoRowsOverlayComponent=void 0;const n=i(4422),r=i(4679);class o extends r.OverlayComponent{init(){const e=(0,n._makeNull)(this.gos.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){const e=this.getLocaleTextFunc();setTimeout((()=>{this.getGui().textContent=e("noRowsToShow","No Rows To Show")}))}}}t.NoRowsOverlayComponent=o},7896:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hideOverlay=t.showNoRowsOverlay=t.showLoadingOverlay=void 0,t.showLoadingOverlay=function(e){e.overlays?.showLoadingOverlay()},t.showNoRowsOverlay=function(e){e.overlays?.showNoRowsOverlay()},t.hideOverlay=function(e){e.overlays?.hideOverlay()}},4679:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayComponent=void 0;const n=i(8020);class r extends n.Component{constructor(){super()}}t.OverlayComponent=r},5366:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayModule=void 0;const n=i(7205),r=i(6105),o=i(5233),s=i(7896),a=i(2351);t.OverlayModule={moduleName:"Overlay",version:n.VERSION,userComponents:{agLoadingOverlay:r.LoadingOverlayComponent,agNoRowsOverlay:o.NoRowsOverlayComponent},apiFunctions:{showLoadingOverlay:s.showLoadingOverlay,showNoRowsOverlay:s.showNoRowsOverlay,hideOverlay:s.hideOverlay},beans:[a.OverlayService]}},2351:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayService=void 0;const n=i(2036),r=i(8731),o=i(7274),s=i(7764),a=i(8360);class l extends r.BeanStub{constructor(){super(...arguments),this.beanName="overlays",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=(0,o._isClientSideRowModel)(this.gos),this.isServerSide=!this.isClientSide&&(0,o._isServerSideRowModel)(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.eWrapper=e,this.updateOverlayVisibility()}isVisible(){return 0!==this.state&&!!this.eWrapper}isExclusive(){return 1===this.state&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos,t=e.get("loading");(t||void 0===t&&!e.get("suppressLoadingOverlay"))&&this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;e.get("loading")||e.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){this.showInitialOverlay=!1,this.gos.get("loading")?(0,s._warn)(99):this.doHideOverlay()}getOverlayWrapperSelector(){return a.OverlayWrapperSelector}getOverlayWrapperCompClass(){return a.OverlayWrapperComponent}updateOverlayVisibility(){if(!this.eWrapper)return void(this.state=0);const{state:e,isClientSide:t,isServerSide:i,beans:{gos:n,colModel:r,rowModel:o}}=this;let s=this.gos.get("loading");void 0!==s&&(this.showInitialOverlay=!1),this.showInitialOverlay&&void 0===s&&!n.get("suppressLoadingOverlay")&&(s=!n.get("columnDefs")||!r.ready||!n.get("rowData")&&t),s?1!==e&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,t&&o.isEmpty()&&!n.get("suppressNoRowsOverlay")?2!==e&&this.doShowNoRowsOverlay():(1===e||!i&&0!==e)&&this.doHideOverlay())}doShowLoadingOverlay(){this.eWrapper&&(this.state=1,this.showOverlay((0,n._getLoadingOverlayCompDetails)(this.beans.userCompFactory,(0,o._addGridCommonParams)(this.gos,{})),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.eWrapper&&(this.state=2,this.showOverlay((0,n._getNoRowsOverlayCompDetails)(this.beans.userCompFactory,(0,o._addGridCommonParams)(this.gos,{})),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(e,t,i){const n=e?.newAgStackInstance()??null;this.eWrapper?.showOverlay(n,t,this.isExclusive(),i),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}refreshWrapperPadding(){const e=this.eWrapper;if(!e)return;let t=0;if(2===this.state){const e=this.beans.ctrlsSvc.get("gridHeaderCtrl");t=e?.headerHeight||0}else 0!==this.wrapperPadding&&(t=0);this.wrapperPadding!==t&&(this.wrapperPadding=t,e.updateOverlayWrapperPaddingTop(t))}}t.OverlayService=l},3893:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.overlayWrapperComponentCSS=void 0,t.overlayWrapperComponentCSS=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:1px solid var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}"},8360:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayWrapperSelector=t.OverlayWrapperComponent=void 0;const n=i(9853),r=i(7274),o=i(9360),s=i(1502),a=i(3507),l=i(2979),c=i(2331),d=i(8020),u=i(3893);class h extends d.Component{constructor(){super('\n            <div class="ag-overlay" role="presentation">\n                <div class="ag-overlay-panel" role="presentation">\n                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>\n                </div>\n            </div>'),this.eOverlayWrapper=d.RefPlaceholder,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(u.overlayWrapperComponentCSS)}handleKeyDown(e){if(e.key!==n.KeyCode.TAB||e.defaultPrevented||(0,l._isStopPropagationForAgGrid)(e))return;const t=this.beans;if((0,c._findNextFocusableElement)(t,this.eOverlayWrapper,!1,e.shiftKey))return;let i=!1;i=e.shiftKey?t.focusSvc.focusGridView({column:(0,s._last)(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):(0,c._focusNextGridCoreContainer)(t,!1),i&&e.preventDefault()}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList,{AUTO_HEIGHT:n,NORMAL:r,PRINT:s}=o.LayoutCssClasses;i.toggle(n,t.autoHeight),i.toggle(r,t.normal),i.toggle(s,t.print)}postConstruct(){this.createManagedBean(new o.LayoutFeature(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i,n){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),i&&this.isGridFocused()){const e=(0,r._getActiveDomElement)(this.beans);e&&!(0,r._isNothingFocused)(this.beans)&&(this.elToFocusAfter=e)}e.then((t=>{if(this.activePromise===e){if(this.activePromise=null,t){if(this.activeOverlay!==t&&(this.eOverlayWrapper.appendChild(t.getGui()),this.activeOverlay=t,n)){const e=t;this.updateListenerDestroyFunc=this.addManagedPropertyListener(n,(({currentValue:t})=>{e.refresh?.((0,r._addGridCommonParams)(this.gos,{...t??{}}))}))}i&&this.isGridFocused()&&(0,c._focusInto)(this.eOverlayWrapper)}}else this.activeOverlay!==t&&(this.destroyBean(t),t=null)}))}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.isGridFocused()&&(t=null);const i=this.updateListenerDestroyFunc;i&&(i(),this.updateListenerDestroyFunc=null),this.destroyBean(e),(0,a._clearElement)(this.eOverlayWrapper),t?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=(0,r._getActiveDomElement)(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}}t.OverlayWrapperComponent=h,t.OverlayWrapperSelector={selector:"AG-OVERLAY-WRAPPER",component:h}},94:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getCellRendererInstances=t.getSizesForCurrentTheme=t.flushAllAnimationFrames=t.isAnimationFrameQueueEmpty=t.refreshHeader=t.refreshCells=t.setGridAriaProperty=void 0;const n=i(4126),r=i(7274),o=i(1323),s=i(557);t.setGridAriaProperty=function(e,t,i){if(!t)return;const n=e.ctrlsSvc.getGridBodyCtrl().eGridBody,r=`aria-${t}`;null===i?n.removeAttribute(r):n.setAttribute(r,i)},t.refreshCells=function(e,t={}){e.frameworkOverrides.wrapIncoming((()=>e.rowRenderer.refreshCells(t)))},t.refreshHeader=function(e){e.frameworkOverrides.wrapIncoming((()=>e.ctrlsSvc.getHeaderRowContainerCtrls().forEach((e=>e.refresh()))))},t.isAnimationFrameQueueEmpty=function(e){return e.animationFrameSvc?.isQueueEmpty()??!0},t.flushAllAnimationFrames=function(e){e.animationFrameSvc?.flushAllFrames()},t.getSizesForCurrentTheme=function(e){return{rowHeight:(0,r._getRowHeightAsNumber)(e),headerHeight:(0,o.getHeaderHeight)(e)}},t.getCellRendererInstances=function(e,t={}){const i=[];if(e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach((e=>{const t=e.getCellRenderer();null!=t&&i.push((0,n._unwrapUserComp)(t))})),t.columns?.length)return i;const r=[],o=(0,s.mapRowNodes)(t.rowNodes);return e.rowRenderer.getAllRowCtrls().forEach((e=>{if(o&&!(0,s.isRowInMap)(e.rowNode,o))return;if(!e.isFullWidth())return;const t=e.getFullWidthCellRenderers();for(let e=0;e<t.length;e++){const i=t[e];null!=i&&r.push((0,n._unwrapUserComp)(i))}})),[...r,...i]}},6964:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RenderApiModule=void 0;const n=i(7205),r=i(94);t.RenderApiModule={moduleName:"RenderApi",version:n.VERSION,apiFunctions:{setGridAriaProperty:r.setGridAriaProperty,refreshCells:r.refreshCells,refreshHeader:r.refreshHeader,isAnimationFrameQueueEmpty:r.isAnimationFrameQueueEmpty,flushAllAnimationFrames:r.flushAllAnimationFrames,getSizesForCurrentTheme:r.getSizesForCurrentTheme,getCellRendererInstances:r.getCellRendererInstances}}},4577:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowAutoHeightModule=void 0;const n=i(7205),r=i(6418);t.RowAutoHeightModule={moduleName:"RowAutoHeight",version:n.VERSION,beans:[r.RowAutoHeightService]}},6418:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowAutoHeightService=void 0;const n=i(8731),r=i(7274),o=i(3507),s=i(2043);class a extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=(0,s._debounce)(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){const{visibleCols:e,rowModel:t,rowSpanSvc:i}=this.beans,n=e.autoHeightCols;let o=!1;t.forEachDisplayedNode?.((e=>{const t=e.__autoHeights;let s=(0,r._getRowHeightForNode)(this.beans,e).height;for(const r of n){if(this.colSpanSkipRow(r,e))return;let n=t?.[r.getColId()];const o=i?.getCellSpan(r,e);if(o){if(o.getLastNode()!==e)continue;if(n=i?.getCellSpan(r,e)?.getLastNodeAutoHeight(),!n)return}if(null==n)return;s=Math.max(n,s)}s!==e.rowHeight&&(e.setRowHeight(s),o=!0)})),o&&t.onRowHeightChanged?.()}setRowAutoHeight(e,t,i){if(e.__autoHeights||(e.__autoHeights={}),null==t)return void delete e.__autoHeights[i.getId()];const n=e.__autoHeights[i.getId()];e.__autoHeights[i.getId()]=t,n!==t&&this.requestCheckAutoHeight()}colSpanSkipRow(e,t){const{colModel:i,colViewport:n,visibleCols:r}=this.beans;if(!i.colSpanActive)return!1;let o=[];switch(e.getPinned()){case"left":o=r.getLeftColsForRow(t);break;case"right":o=r.getRightColsForRow(t);break;case null:o=n.getColsWithinViewport(t)}return o.includes(e)}setupCellAutoHeight(e,t,i){if(!e.column.isAutoHeight()||!t)return!1;this.wasEverActive=!0;const n=t.parentElement,{rowNode:s,column:a}=e,l=this.beans,c=d=>{if(e.editing)return;if(!e.isAlive()||!i.isAlive())return;const{paddingTop:u,paddingBottom:h,borderBottomWidth:p,borderTopWidth:f}=(0,o._getElementSize)(n),g=u+h+p+f,m=t.offsetHeight+g;if(d<5){const e=(0,r._getDocument)(l);if(!e||!e.contains(t)||0==m)return void window.setTimeout((()=>c(d+1)),0)}this.setRowAutoHeight(s,m,a)},d=()=>c(0);d();const u=(0,o._observeResize)(l,t,d);return i.addDestroyFunc((()=>{u(),this.setRowAutoHeight(s,void 0,a)})),!0}setAutoHeightActive(e){this.active=e.list.some((e=>e.isVisible()&&e.isAutoHeight()))}}t.RowAutoHeightService=a},8430:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowComp=void 0;const n=i(5230),r=i(3507),o=i(8020),s=i(2308);class a extends o.Component{constructor(e,t,i){super(),this.cellComps={},this.beans=t,this.rowCtrl=e;const o=document.createElement("div");o.setAttribute("comp-id",`${this.getCompId()}`),o.setAttribute("style",this.getInitialStyle(i)),this.setTemplateFromElement(o);const s=this.getGui(),a=s.style;this.domOrder=this.rowCtrl.getDomOrder(),(0,n._setAriaRole)(s,"row");const l={setDomOrder:e=>this.domOrder=e,setCellCtrls:e=>this.setCellCtrls(e),showFullWidth:e=>this.showFullWidth(e),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setUserStyles:e=>(0,r._addStylesToElement)(s,e),setTop:e=>a.top=e,setTransform:e=>a.transform=e,setRowIndex:e=>s.setAttribute("row-index",e),setRowId:e=>s.setAttribute("row-id",e),setRowBusinessKey:e=>s.setAttribute("row-business-key",e),refreshFullWidth:e=>this.fullWidthCellRenderer?.refresh?.(e())??!1};e.setComp(l,this.getGui(),i,void 0),this.addDestroyFunc((()=>{e.unsetComp(i)}))}getInitialStyle(e){const t=this.rowCtrl.getInitialTransform(e);return t?`transform: ${t}`:`top: ${this.rowCtrl.getInitialRowTop(e)}`}showFullWidth(e){e.newAgStackInstance().then((e=>{if(this.isAlive()){const t=e.getGui();this.getGui().appendChild(t),this.rowCtrl.setupDetailRowAutoHeight(t),this.setFullWidthRowComp(e)}else this.beans.context.destroyBean(e)}))}setCellCtrls(e){const t=Object.assign({},this.cellComps);e.forEach((e=>{const i=e.instanceId;null==this.cellComps[i]?this.newCellComp(e):t[i]=null})),this.destroyCells(Object.values(t)),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;const t=[];e.forEach((e=>{const i=this.cellComps[e.instanceId];i&&t.push(i.getGui())})),(0,r._setDomChildOrder)(this.getGui(),t)}newCellComp(e){const t=new s.CellComp(this.beans,e,this.rowCtrl.printLayout,this.getGui(),this.rowCtrl.editing);this.cellComps[e.instanceId]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyCells(Object.values(this.cellComps))}setFullWidthRowComp(e){this.fullWidthCellRenderer=e,this.addDestroyFunc((()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)}))}destroyCells(e){e.forEach((e=>{if(!e)return;const t=e.cellCtrl.instanceId;this.cellComps[t]===e&&(e.detach(),e.destroy(),this.cellComps[t]=null)}))}}t.RowComp=a},7632:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowCtrl=t.DOM_DATA_KEY_ROW_CTRL=void 0;const n=i(3789),r=i(2036),o=i(8731),s=i(7274),a=i(7648),l=i(5230),c=i(8667),d=i(3507),u=i(2979),h=i(2331),p=i(2043),f=i(4422),g=i(7766),m=i(814);let v=0;t.DOM_DATA_KEY_ROW_CTRL="renderedRow";class b extends o.BeanStub{constructor(e,t,i,n,r){super(),this.rowNode=e,this.useAnimationFrameForCreate=n,this.printLayout=r,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=t.pagination?.getCurrentPage()??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+v++,this.rowId=(0,g._escapeString)(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=(0,a.calculateRowLevel)(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if("function"!=typeof this.businessKeyForNodeFunc)return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=(0,g._escapeString)(e)}updateGui(e,t){"left"===e?this.leftGui=t:"right"===e?this.rightGui=t:"fullWidth"===e?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,i,r){const o={rowComp:e,element:t,containerType:i,compBean:r=(0,n.setupCompBean)(this,this.beans.context,r)};this.allRowGuis.push(o),this.updateGui(i,o),this.initialiseRowComp(o);"FullWidthLoading"===this.rowType||this.rowNode.stub||this.rowNode.rowPinned||this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){this.allRowGuis=this.allRowGuis.filter((t=>t.containerType!==e)),this.updateGui(e,void 0)}isCacheable(){return"FullWidthDetail"===this.rowType&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";this.allRowGuis.forEach((e=>e.element.style.display=t))}initialiseRowComp(e){const i=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),(0,s._isRowSelection)(i)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const n=e.rowComp;this.getInitialRowClasses(e.containerType).forEach((e=>n.addOrRemoveCssClass(e,!0))),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&(0,l._setAriaExpanded)(e.element,1==this.rowNode.expanded),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),(0,s._setDomData)(i,e.element,t.DOM_DATA_KEY_ROW_CTRL,this),e.compBean.addDestroyFunc((()=>(0,s._setDomData)(i,e.element,t.DOM_DATA_KEY_ROW_CTRL,null))),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask((()=>{this.isAlive()&&e.rowComp.addOrRemoveCssClass("ag-after-created",!0)})),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){null!=this.businessKey&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=(0,g._escapeString)(this.rowNode.id);this.rowId=t,null!=t&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&((0,p._executeNextVMTurn)((()=>{this.onTopChanged()})),this.slideInAnimation[t]=!1);this.fadeInAnimation[t]&&((0,p._executeNextVMTurn)((()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)})),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){const t=this.beans.rowDragSvc?.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;const i=this.createBean(t,this.beans.context);this.rowDragComps.push(i),e.compBean.addDestroyFunc((()=>{this.rowDragComps=this.rowDragComps.filter((e=>e!==i)),this.destroyBean(i,this.beans.context)}))}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),i=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(i)}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map((e=>e?.rowComp?.getFullWidthCellRenderer())):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;e({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:i,beans:{visibleCols:n}}=this,r=!!e||!n.isPinningLeft(),o=!!t,s=!!i||!n.isPinningRight();return r&&o&&s}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this.rowNode})}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),i=this.gos.get("masterDetail")&&this.rowNode.detail,n=this.beans.colModel.isPivotMode(),r=!!this.rowNode.group&&!this.rowNode.footer&&(0,s._isGroupUseEntireRow)(this.gos,n);this.rowType=e?"FullWidthLoading":i?"FullWidthDetail":t?"FullWidth":r?"FullWidthGroup":"Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;const{animationFrameSvc:i}=this.beans;!i||e||this.gos.get("suppressAnimationFrame")||this.printLayout?this.updateColumnListsImpl(t):this.updateColumnListsPending||(i.createTask((()=>{this.active&&this.updateColumnListsImpl(!0)}),this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}getNewCellCtrl(e){const t=this.beans.rowSpanSvc?.isCellSpanning(e,this.rowNode);if(!t)return new m.CellCtrl(e,this.rowNode,this.beans,this)}shouldRecreateCellCtrl(e){return!!this.beans.rowSpanSvc?.isCellSpanning(e.column,this.rowNode)}createCellCtrls(e,t,i=null){const n={list:[],map:{}},r=(e,t,i)=>{null!=i?n.list.splice(i,0,t):n.list.push(t),n.map[e]=t},o=[];for(const i of t){const t=i.getInstanceId();let n=e.map[t];n&&this.shouldRecreateCellCtrl(n)&&(n.destroy(),n=void 0),n||(n=this.getNewCellCtrl(i)),n&&r(t,n)}for(const t of e.list){const e=t.column.getInstanceId();if(null!=n.map[e])continue;!this.isCellEligibleToBeRemoved(t,i)?o.push([e,t]):t.destroy()}if(o.length)for(const[e,t]of o){const i=n.list.findIndex((e=>e.column.getLeft()>t.column.getLeft())),o=-1===i?void 0:Math.max(i-1,0);r(e,t,o)}return n}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach((t=>{const i=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(i,e)}))}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const i=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const n=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");const r=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(e,t){const i=!0,{column:n}=e;if(n.getPinned()!=t)return i;const{editing:r,cellPosition:o}=e,{focusSvc:s,visibleCols:a}=this.beans,l=s.isCellFocused(o);if(r||l){return!(a.allCols.indexOf(n)>=0)&&i}return i}getDomOrder(){return this.gos.get("ensureDomOrder")||(0,s._isDomLayout)(this.gos,"print")}listenOnDomOrder(e){e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],(()=>{e.rowComp.setDomOrder(this.getDomOrder())}))}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=(0,f._exists)(this.rowNode.oldRowTop),{visibleCols:i}=this.beans,n=i.isPinningLeft(),r=i.isPinningRight();if(t){const{slideInAnimation:e}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(e.fullWidth=!0);e.center=!0,e.left=n,e.right=r}else{const{fadeInAnimation:e}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(e.fullWidth=!0);e.center=!0,e.left=n,e.right=r}}isFullWidth(){return"Normal"!==this.rowType}refreshFullWidth(){const e=(e,t)=>!e||e.rowComp.refreshFullWidth((()=>this.createFullWidthCompDetails(e.element,t).params)),t=e(this.fullWidthGui,null),i=e(this.centerGui,null),n=e(this.leftGui,"left"),r=e(this.rightGui,"right");return t&&i&&n&&r}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...this.beans.expansionSvc?.getRowExpandedListeners(this)??{}}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventSvc,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.beans.rowSpanSvc&&this.addManagedListeners(this.beans.rowSpanSvc,{spannedCellsUpdated:({pinned:e})=>{e&&!this.rowNode.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc((()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context)})),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",(()=>{this.gos.get("rowDragEntireRow")?this.allRowGuis.forEach((e=>{this.addRowDraggerToRow(e)})):this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)})),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onRowIndexChanged()))},cellChanged:e=>{this.getAllCellCtrls().forEach((t=>t.onCellChanged(e)))}})}onRowNodeDataChanged(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell())this.beans.rowRenderer.redrawRow(this.rowNode);else if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode)}else this.getAllCellCtrls().forEach((t=>t.refreshCell({suppressFlash:!e.update,newData:!e.update}))),this.allRowGuis.forEach((e=>{this.setRowCompRowId(e.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(e.rowComp)})),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.rowNode.highlighted;this.allRowGuis.forEach((t=>{const i="Above"===e,n="Below"===e;t.rowComp.addOrRemoveCssClass("ag-row-highlight-above",i),t.rowComp.addOrRemoveCssClass("ag-row-highlight-below",n)}))}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass("ag-row-dragging",e)))}verifyCells(){this.onDisplayedColumnsChanged()}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.rowAutoHeight?.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:(0,f._makeNull)(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.findFullWidthInfoForEvent(e);if(!t)return;const{rowGui:i,column:n}=t;if(!(i.element===e.target))return;const r=this.rowNode,{focusSvc:o,navigation:s}=this.beans,a=o.getFocusedCell(),l={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:a?.column??n};s?.navigateToNextCell(e,e.key,l,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||(0,u._isStopPropagationForAgGrid)(e))return;const t=this.allRowGuis.find((t=>t.element.contains(e.target))),i=t?t.element:null,n=i===e.target,r=(0,s._getActiveDomElement)(this.beans);let o=!1;i&&r&&(o=i.contains(r)&&r.classList.contains("ag-cell"));let a=null;n||o||(a=(0,h._findNextFocusableElement)(this.beans,i,!1,e.shiftKey)),(this.isFullWidth()&&n||!a)&&this.beans.navigation?.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){const e=this.allRowGuis.find((e=>(0,d._isVisible)(e.element)))?.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:-1;this.allRowGuis.forEach((e=>{(0,d._addOrRemoveAttribute)(e.element,"tabindex",t)}))}onFullWidthRowFocused(e){const t=this.rowNode,i=!!e&&(this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned),n=this.fullWidthGui?this.fullWidthGui.element:this.centerGui?.element;n&&(n.classList.toggle("ag-full-width-focus",i),i&&e?.forceBrowserFocus&&n.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const i={list:[],map:{}};return e.list.forEach((e=>{e!==t&&(i.list.push(e),i.map[e.column.getInstanceId()]=e)})),i}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t)}}createRowEvent(e,t){const{rowNode:i}=this;return(0,s._addGridCommonParams)(this.gos,{type:e,node:i,data:i.data,rowIndex:i.rowIndex,rowPinned:i.rowPinned,event:t})}createRowEventWithSource(e,t){const i=this.createRowEvent(e,t);return i.source=this,i}onRowDblClick(e){(0,u._isStopPropagationForAgGrid)(e)||this.beans.eventSvc.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",e))}findFullWidthInfoForEvent(e){if(!e)return;const t=this.findFullWidthRowGui(e.target),i=this.getColumnForFullWidth(t);return t&&i?{rowGui:t,column:i}:void 0}findFullWidthRowGui(e){return this.allRowGuis.find((t=>t.element.contains(e)))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(e?.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=(0,d._isElementChildOfClass)(e.target,"ag-row-drag",3),!this.isFullWidth())return;const t=this.rowNode,{rangeSvc:i,focusSvc:n}=this.beans;i?.removeAllCellRanges();const r=this.findFullWidthInfoForEvent(e);if(!r)return;const{rowGui:o,column:s}=r,a=o.element,l=e.target;let u=e.defaultPrevented||(0,c._isBrowserSafari)();a&&a.contains(l)&&(0,d._isFocusableFormField)(l)&&(u=!1),n.setFocusedCell({rowIndex:t.rowIndex,column:s,rowPinned:t.rowPinned,forceBrowserFocus:u})}onRowClick(e){if((0,u._isStopPropagationForAgGrid)(e)||this.lastMouseDownOnDragger)return;const{eventSvc:t,selectionSvc:i}=this.beans;t.dispatchEvent(this.createRowEventWithSource("rowClicked",e)),i?.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){"FullWidthDetail"===this.rowType&&this.beans.masterDetailSvc?.setupDetailRowAutoHeight(this,e)}createFullWidthCompDetails(e,t){const{gos:i,rowNode:n}=this,o=(0,s._addGridCommonParams)(i,{fullWidth:!0,data:n.data,node:n,value:n.key,valueFormatted:n.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(e,t,i,n)=>this.addFullWidthRowDragging(e,t,i,n),setTooltip:(e,t)=>{i.assertModuleRegistered("Tooltip",3),this.refreshRowTooltip(e,t)}}),a=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return(0,r._getFullWidthDetailCellRendererDetails)(a,o);case"FullWidthGroup":return(0,r._getFullWidthGroupCellRendererDetails)(a,o);case"FullWidthLoading":return(0,r._getFullWidthLoadingCellRendererDetails)(a,o);default:return(0,r._getFullWidthCellRendererDetails)(a,o)}}refreshRowTooltip(e,t){this.fullWidthGui&&(this.tooltipFeature=this.beans.tooltipSvc?.refreshRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,i="",n){const{rowDragSvc:r,context:o}=this.beans;if(!r||!this.isFullWidth())return;const s=r.createRowDragComp((()=>i),this.rowNode,void 0,e,t,n);this.createBean(s,o),this.addDestroyFunc((()=>{this.destroyBean(s,o)}))}onUiLevelChanged(){const e=(0,a.calculateRowLevel)(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach((e=>{e.rowComp.addOrRemoveCssClass(t,!0),e.rowComp.addOrRemoveCssClass(i,!1)}))}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass("ag-row-first",e)))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach((e=>e.rowComp.addOrRemoveCssClass("ag-row-last",t))))}getAllCellCtrls(){if(0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length)return this.centerCellCtrls.list;return[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=[];this.beans.rowStyleSvc?.processClassesFromGridOptions(e,this.rowNode),e.length&&e.forEach((e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!0)))}))}postProcessRowClassRules(){this.beans.rowStyleSvc?.processRowClassRules(this.rowNode,(e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!0)))}),(e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!1)))}))}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,(e=>e.rowComp.setUserStyles(this.rowStyles)))}getPinnedForContainer(e){return"left"===e||"right"===e?e:null}getInitialRowClasses(e){const t=this.getPinnedForContainer(e),i=this.isFullWidth(),{rowNode:n,beans:r}=this,o=[];o.push("ag-row"),o.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&o.push("ag-opacity-zero"),o.push(n.rowIndex%2==0?"ag-row-even":"ag-row-odd"),n.isRowPinned()&&o.push("ag-row-pinned"),n.isSelected()&&o.push("ag-row-selected"),n.footer&&o.push("ag-row-footer"),o.push("ag-row-level-"+this.rowLevel),n.stub&&o.push("ag-row-loading"),i&&o.push("ag-full-width-row"),r.expansionSvc?.addExpandedCss(o,n),n.dragging&&o.push("ag-row-dragging");const{rowStyleSvc:s}=r;return s&&(s.processClassesFromGridOptions(o,n),s.preProcessRowClassRules(o,n)),o.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&o.push("ag-row-first"),this.isLastRowOnPage()&&o.push("ag-row-last"),i&&("left"===t&&o.push("ag-cell-last-left-pinned"),"right"===t&&o.push("ag-cell-first-right-pinned")),o}processStylesFromGridOptions(){return this.beans.rowStyleSvc?.processStylesFromGridOptions(this.rowNode)??this.emptyStyle}onRowSelected(e){this.beans.selectionSvc?.onRowCtrlSelected(this,(e=>{e!==this.centerGui&&e!==this.fullWidthGui||this.announceDescription()}),e)}announceDescription(){this.beans.selectionSvc?.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:i}=e,{rowNode:n,beans:r,gos:o}=this;i.addManagedListeners(t,{mouseenter:()=>n.dispatchRowEvent("mouseEnter"),mouseleave:()=>n.dispatchRowEvent("mouseLeave")}),i.addManagedListeners(n,{mouseEnter:()=>{r.dragSvc?.dragging||o.get("suppressRowHoverHighlight")||(t.classList.add("ag-row-hover"),n.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){const t=e?[e]:this.allRowGuis.map((e=>e.element));for(const e of t)e.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(t.top,!0)-100,n=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(i,e),n)}forEachGui(e,t){e?t(e):this.allRowGuis.forEach(t)}onRowHeightChanged(e){if(null==this.rowNode.rowHeight)return;const t=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),n=(0,s._isGetRowHeightFunction)(this.gos)?(0,s._getRowHeightForNode)(this.beans,this.rowNode).height:void 0,r=n?Math.min(i,n)-2+"px":void 0;this.forEachGui(e,(e=>{e.element.style.height=`${t}px`,r&&e.element.style.setProperty("--ag-line-height",r)}))}destroyFirstPass(e=!1){this.active=!1;const{rowNode:t}=this;if(!e&&(0,s._isAnimateRows)(this.gos)&&!t.sticky){if(null!=t.rowTop){const e=this.roundRowTopToBounds(t.rowTop);this.setRowTop(e)}else this.allRowGuis.forEach((e=>e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)))}t.setHovered(!1);const i=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(i),this.beans.eventSvc.dispatchEvent(i),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.beans.editSvc?.stopRowEditing(this);const e=e=>(e.list.forEach((e=>e.destroy())),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,(e=>{e.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),e.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)}))}onCellFocusChanged(){const{focusSvc:e,editSvc:t}=this.beans,i=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);i!==this.rowFocused&&(this.rowFocused=i,this.setFocusedClasses()),!i&&this.editing&&t?.stopRowEditing(this,!1)}onPaginationChanged(){const e=this.beans.pagination?.getCurrentPage()??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;return e+this.beans.pageBounds.getPixelOffset()*(t?1:-1)}setRowTop(e){if(!this.printLayout&&(0,f._exists)(e)){const t=this.applyPaginationOffset(e),i=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(i)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let i;if(t.sticky)i=t.stickyRowTop;else{const n=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,r=this.applyPaginationOffset(n);i=t.isRowPinned()?r:this.beans.rowContainerHeight.getRealPixelPosition(r)}return i+"px"}setRowTopStyle(e){this.allRowGuis.forEach((t=>this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`)))}getCellCtrl(e,t=!1){let i=null;return this.getAllCellCtrls().forEach((t=>{t.column==e&&(i=t)})),null!=i||t||this.getAllCellCtrls().forEach((t=>{t.getColSpanningList().indexOf(e)>=0&&(i=t)})),i}onRowIndexChanged(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){const t=this.rowNode.getRowIndexString();if(null===t)return;const i=(this.beans.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.beans.filterManager?.getHeaderRowCount()??0),n=this.rowNode.rowIndex%2==0,r=i+this.rowNode.rowIndex+1;this.forEachGui(e,(e=>{e.rowComp.setRowIndex(t),e.rowComp.addOrRemoveCssClass("ag-row-even",n),e.rowComp.addOrRemoveCssClass("ag-row-odd",!n),(0,l._setAriaRowIndex)(e.element,r)}))}}t.RowCtrl=b},7109:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowContainerHeightService=void 0;const n=i(8731),r=i(8667),o=i(2043);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=(0,r._getMaxDivHeight)(),(0,o._logIfDebug)(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;(0,o._logIfDebug)(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t="number"==typeof e?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=e/(this.modelHeight-this.getUiBodyHeight());return this.maxScrollY*t}}t.RowContainerHeightService=s},557:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.isRowInMap=t.mapRowNodes=t.RowRenderer=void 0;const n=i(8731),r=i(7274),o=i(2612),s=i(1502),a=i(4422),l=i(7764),c=i(814),d=i(7632);class u extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach((e=>e.onCellSelectionChanged()))},t=()=>{this.getAllCellCtrls().forEach((e=>e.updateRangeBordersIfRangeCount()))},i=()=>{this.eventSvc.addEventListener("cellSelectionChanged",e),this.eventSvc.addEventListener("columnMoved",t),this.eventSvc.addEventListener("columnPinned",t),this.eventSvc.addEventListener("columnVisible",t)},n=()=>{this.eventSvc.removeEventListener("cellSelectionChanged",e),this.eventSvc.removeEventListener("columnMoved",t),this.eventSvc.removeEventListener("columnPinned",t),this.eventSvc.removeEventListener("columnVisible",t)};this.addDestroyFunc((()=>n())),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],(()=>{(0,r._isCellSelectionEnabled)(this.gos)?i():n()}));(0,r._isCellSelectionEnabled)(this.gos)&&i()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc}postConstruct(){this.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()}))}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],(()=>this.onDomLayoutChanged())),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],(()=>this.redraw())),this.addManagedPropertyListener("suppressCellFocus",(e=>this.onSuppressCellFocusChanged(e.currentValue))),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],(()=>this.redrawRows())),this.addManagedPropertyListener("cellSelection",(({currentValue:e,previousValue:t})=>{(!t&&e||t&&!e)&&this.redrawRows()}));const{stickyRowSvc:e,gos:t}=this.beans;if(e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const e=this.gridBodyCtrl;e.setStickyTopHeight(0),e.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=(0,r._isDomLayout)(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=null!=e?e:3;this.cachedRowCtrls=new h(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?.stickyTopRowCtrls??[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?.stickyBottomRowCtrls??[]}updateAllRowCtrls(){const e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),i=this.cachedRowCtrls?.getEntries()??[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach((t=>t.onCellFocused(e))),this.getFullWidthRowCtrls().forEach((t=>t.onFullWidthRowFocused(e)))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach((t=>t.onSuppressCellFocusChanged(e))),this.getFullWidthRowCtrls().forEach((t=>t.onSuppressCellFocusChanged(e)))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;t&&this.getAllCellCtrls().forEach((i=>t.onFlashCells(i,e)))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onColumnHover()))},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onDisplayedColumnsChanged()))},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach((e=>e.onLeftChanged()))}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach((e=>e())),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();this.colModel.getCols().forEach((e=>{const t=t=>{this.getAllCellCtrls().forEach((i=>{i.column===e&&t(i)}))},i=()=>{t((e=>e.onLeftChanged()))},n=()=>{t((e=>e.onWidthChanged()))},r=()=>{t((e=>e.onFirstRightPinnedChanged()))},o=()=>{t((e=>e.onLastLeftPinnedChanged()))},s=()=>{t((e=>e.onColDefChanged()))};e.__addEventListener("leftChanged",i),e.__addEventListener("widthChanged",n),e.__addEventListener("firstRightPinnedChanged",r),e.__addEventListener("lastLeftPinnedChanged",o),e.__addEventListener("colDefChanged",s),this.destroyFuncsForColumnListeners.push((()=>{e.__removeEventListener("leftChanged",i),e.__removeEventListener("widthChanged",n),e.__removeEventListener("firstRightPinnedChanged",r),e.__removeEventListener("lastLeftPinnedChanged",o),e.__removeEventListener("colDefChanged",s)}))}))}onDomLayoutChanged(){const e=(0,r._isDomLayout)(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){const t=[];return this.getAllRowCtrls().forEach((i=>{const n=i.getCellCtrl(e,!0)?.eGui;n&&t.push(n)})),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}refreshFloatingRows(e,t){const{pinnedRowModel:i,beans:n,printLayout:r}=this,o=Object.fromEntries(e.map((e=>[e.rowNode.id,e])));i?.forEachPinnedRow(t,((s,a)=>{const l=e[a];l&&void 0===i.getPinnedRowById(l.rowNode.id,t)&&(l.destroyFirstPass(),l.destroySecondPass()),s.id in o?(e[a]=o[s.id],delete o[s.id]):e[a]=new d.RowCtrl(s,n,!1,!1,r)}));const s=("top"===t?i?.getPinnedTopRowCount():i?.getPinnedBottomRowCount())??0;e.length=s}onPinnedRowDataChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature?.refreshStickyNode(e);else{if(this.cachedRowCtrls?.has(e))return void this.cachedRowCtrls.removeRow(e);{const t=t=>{const i=t[e.rowIndex];i&&i.rowNode===e&&(i.destroyFirstPass(),i.destroySecondPass(),t[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":t(this.topRowCtrls);break;case"bottom":t(this.bottomRowCtrls);break;default:t(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(null!=e)return e?.forEach((e=>this.redrawRow(e,!0))),void this.dispatchDisplayedRowsChanged(!1);this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=e?.suppressKeepFocus?null:this.focusSvc.getFocusCellToUseAfterRefresh();if(null==t)return null;const i=(0,r._getActiveDomElement)(this.beans),n=(0,r._getDomData)(this.gos,i,c.DOM_DATA_KEY_CELL_CTRL),o=(0,r._getDomData)(this.gos,i,d.DOM_DATA_KEY_ROW_CTRL);return n||o?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,n=e.animate&&(0,r._isAnimateRows)(this.gos),o=i?this.getRowsToRecycle():null;i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:s}=this;if(s){s.checkStickyRows();const e=s.extraTopHeight+s.extraBottomHeight;e&&this.updateContainerHeights(e)}this.recycleRows(o,n),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),null!=t&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");t&&!i&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){const{rowContainerHeight:t}=this;if(this.printLayout)return void t.setModelHeight(null);let i=this.pageBounds.getCurrentPageHeight();0===i&&(i=1),t.setModelHeight(i+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error((0,l._errMsg)(252));this.refreshInProgress=!0,this.beans.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.beans.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusSvc.restoreFocusedCell(e,(()=>{this.onCellFocusChanged((0,r._addGridCommonParams)(this.gos,{rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}))}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let n=0;n<i;n++){const i=t[n].getAllCellCtrls(),r=i.length;for(let t=0;t<r;t++)e.push(i[t])}return e}getAllRowCtrls(){const{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),i=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...i,...e?.getCtrls("top")??[],...e?.getCtrls("bottom")??[],...e?.getCtrls("center")??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,i){const n=this.rowCtrlsByRowIndex[t];n&&n.addEventListener(e,i)}refreshCells(e={}){const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(const i of this.getCellCtrls(e.rowNodes,e.columns))i.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(const t of this.getRowCtrls(e)){if(!t.isFullWidth())continue;t.refreshFullWidth()||this.redrawRow(t.rowNode,!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getRowCtrls(e){const t=p(e),i=this.getAllRowCtrls();return e&&t?i.filter((e=>f(e.rowNode,t))):i}getCellCtrls(e,t){let i;(0,a._exists)(t)&&(i={},t.forEach((e=>{const t=this.colModel.getCol(e);(0,a._exists)(t)&&(i[t.getId()]=!0)})));const n=[];return this.getRowCtrls(e).forEach((e=>{e.getAllCellCtrls().forEach((e=>{const t=e.column.getId();i&&!i[t]||n.push(e)}))})),n}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature?.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const t of Object.keys(this.rowCtrlsByRowIndex)){null==this.rowCtrlsByRowIndex[t].rowNode.id&&e.push(t)}this.removeRowCtrls(e);const t={};for(const e of Object.values(this.rowCtrlsByRowIndex)){t[e.rowNode.id]=e}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach((e=>{const i=this.rowCtrlsByRowIndex[e];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[e]}))}onBodyScroll(e){"vertical"===e.direction&&this.redraw({afterScroll:!0})}redraw(e={}){const{afterScroll:t}=e;let i;const n=this.stickyRowFeature;n&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);const r=this.firstRenderedRow,o=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let s=!1;if(n){s=n.checkStickyRows();const e=n.extraTopHeight+n.extraBottomHeight;e&&this.updateContainerHeights(e)}const a=this.firstRenderedRow!==r||this.lastRenderedRow!==o;if((!t||s||a)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!s),null!=i)){const e=this.getCellToRestoreFocusToAfterRefresh();null!=i&&null==e&&(this.beans.animationFrameSvc?.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e,t){const i={};e.forEach((e=>i[e]=!0));const n=Object.keys(this.rowCtrlsByRowIndex).filter((e=>!i[e]));this.removeRowCtrls(n,t)}calculateIndexesToDraw(e){const t=[];for(let e=this.firstRenderedRow;e<=this.lastRenderedRow;e++)t.push(e);const i=e=>{const i=e.rowNode.rowIndex;null!=i&&(i<this.firstRenderedRow||i>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(e)&&t.push(i)};for(const e of Object.values(this.rowCtrlsByRowIndex))i(e);if(e)for(const t of Object.values(e))i(t);t.sort(((e,t)=>e-t));const n=[];for(let e=0;e<t.length;e++){const i=t[e],r=this.rowModel.getRow(i);r&&!r.sticky&&n.push(i)}return n}recycleRows(e,t=!1,i=!1){const n=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(n,!t);const r=[];if(n.forEach((n=>{const o=this.createOrUpdateRowCtrl(n,e,t,i);(0,a._exists)(o)&&r.push(o)})),e){const{animationFrameSvc:n}=this.beans;n&&i&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?n.addDestroyTask((()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()})):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),i=e.isPinningRight();(this.pinningLeft!==t||i!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=i,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach((t=>{const i=t.rowNode.rowIndex;e.push(i.toString())})),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=p(e);return this.getAllRowCtrls().filter((e=>{if(!e.isFullWidth())return!1;const i=e.rowNode;return!(null!=t&&!f(i,t))}))}createOrUpdateRowCtrl(e,t,i,n){let r,o=this.rowCtrlsByRowIndex[e];o||(r=this.rowModel.getRow(e),(0,a._exists)(r)&&(0,a._exists)(t)&&t[r.id]&&r.alreadyRendered&&(o=t[r.id],t[r.id]=null));if(!o){if(r||(r=this.rowModel.getRow(e)),!(0,a._exists)(r))return;o=this.createRowCon(r,i,n)}return r&&(r.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o,o}destroyRowCtrls(e,t){const i=[];if(e)for(const n of Object.values(e))if(n)if(this.cachedRowCtrls&&n.isCacheable())this.cachedRowCtrls.addRow(n);else if(n.destroyFirstPass(!t),t){const e=n.instanceId;this.zombieRowCtrls[e]=n,i.push((()=>{n.destroySecondPass(),delete this.zombieRowCtrls[e]}))}else n.destroySecondPass();t&&(i.push((()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()})),window.setTimeout((()=>i.forEach((e=>e()))),400))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){return this.getRowBuffer()*(0,r._getRowHeightAsNumber)(this.beans)}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:i}=this;let n,o;if(e.updateOffset(),i.isRowsToRender())if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),n=t.getFirstRow(),o=t.getLastRow();else{const r=this.getRowBufferInPixels(),s=this.ctrlsSvc.getScrollFeature(),a=this.gos.get("suppressRowVirtualisation");let l,c,d=!1;do{const i=t.getPixelOffset(),{pageFirstPixel:n,pageLastPixel:o}=t.getCurrentPagePixelRange(),u=e.divStretchOffset,h=s.getVScrollPosition(),p=h.top,f=h.bottom;a?(l=n+u,c=o+u):(l=Math.max(p+i-r,n)+u,c=Math.min(f+i+r,o)+u),this.firstVisibleVPixel=Math.max(p+i,n)+u,this.lastVisibleVPixel=Math.min(f+i,o)+u,d=this.ensureAllRowsInRangeHaveHeightsCalculated(l,c)}while(d);let u=i.getRowIndexAtPixel(l),h=i.getRowIndexAtPixel(c);const p=t.getFirstRow(),f=t.getLastRow();u<p&&(u=p),h>f&&(h=f),n=u,o=h}else n=0,o=-1;const s=(0,r._isDomLayout)(this.gos,"normal"),a=this.gos.get("suppressMaxRenderedRowRestriction"),l=Math.max(this.getRowBuffer(),500);s&&!a&&o-n>l&&(o=n+l);const c=n!==this.firstRenderedRow,d=o!==this.lastRenderedRow;(c||d)&&(this.firstRenderedRow=n,this.lastRenderedRow=o,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:n,lastRow:o}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,(0,o._requestAnimationFrame)(this.beans,(()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})})))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){const i=this.pinnedRowModel?.ensureRowHeightsValid(),n=this.stickyRowFeature?.ensureRowHeightsValid(),{pageBounds:r,rowModel:o}=this,s=o.ensureRowHeightsValid(e,t,r.getFirstRow(),r.getLastRow());return(s||n)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),!!(n||s||i)&&(this.updateContainerHeights(),!0)}doNotUnVirtualiseRow(e){const t=!1,i=e.rowNode,n=this.focusSvc.isRowNodeFocused(i),r=e.editing,o=i.detail;if(!(n||r||o))return t;return!!this.isRowPresent(i)||t}isRowPresent(e){return!!this.rowModel.isRowPresent(e)&&(this.beans.pagination?.isRowPresent(e)??!0)}createRowCon(e,t,i){const n=this.cachedRowCtrls?.getRow(e)??null;if(n)return n;const r=this.gos.get("suppressAnimationFrame"),o=i&&!r&&!this.printLayout&&!!this.beans.animationFrameSvc;return new d.RowCtrl(e,this.beans,t,o,this.printLayout)}getRenderedNodes(){const e=Object.values(this.rowCtrlsByRowIndex).map((e=>e.rowNode));return[...this.getStickyTopRowCtrls().map((e=>e.rowNode)),...e,...this.getStickyBottomRowCtrls().map((e=>e.rowNode))]}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find((e=>e.rowNode.rowIndex===i))||null,t||(t=this.getStickyBottomRowCtrls().find((e=>e.rowNode.rowIndex===i))||null))}return t}isRangeInRenderedViewport(e,t){if(null==e||null==t)return!1;const i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}}t.RowRenderer=u;class h{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(e){if(null==e||null==e.id)return null;const t=this.entriesMap[e.id];if(!t)return null;this.removeFromCache(t),t.setCached(!1);return t.rowNode!=e?null:t}has(e){return null!=this.entriesMap[e.id]}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],(0,s._removeFromArray)(this.entriesList,i)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],(0,s._removeFromArray)(this.entriesList,e)}getEntries(){return this.entriesList}}function p(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach((e=>{const i=e.id;switch(e.rowPinned){case"top":t.top[i]=e;break;case"bottom":t.bottom[i]=e;break;default:t.normal[i]=e}})),t}function f(e,t){const i=e.id;switch(e.rowPinned){case"top":return null!=t.top[i];case"bottom":return null!=t.bottom[i];default:return null!=t.normal[i]}}t.mapRowNodes=p,t.isRowInMap=f},4265:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellSpanModule=void 0;const n=i(7205),r=i(4658),o=i(2991);t.CellSpanModule={moduleName:"CellSpan",version:n.VERSION,beans:[r.RowSpanService,o.SpannedRowRenderer]}},3643:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowSpanCache=t.CellSpan=t._doesColumnSpan=void 0;const n=i(8731),r=i(7274),o=i(2991);t._doesColumnSpan=e=>e.colDef.rowSpan;class s{constructor(e,t){this.col=e,this.firstNode=t,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(t)}addSpannedNode(e){this.spannedNodes.add(e),this.lastNode=e}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(e){return e.column===this.col&&(e.rowPinned==this.firstNode.rowPinned&&(this.firstNode.rowIndex<=e.rowIndex&&e.rowIndex<=this.lastNode.rowIndex))}getLastNodeAutoHeight(){const e=this.firstNode.__autoHeights?.[this.col.getColId()];if(null==e)return;let t=0;return this.spannedNodes.forEach((e=>{e!==this.lastNode&&(t+=e.rowHeight)})),e-t}}t.CellSpan=s;class a extends n.BeanStub{constructor(e){super(),this.column=e}buildCache(e){const{column:t,beans:{gos:i,pinnedRowModel:n,rowModel:o,valueSvc:a}}=this,{colDef:l}=t,c=new Map,d=i.getCallback("isFullWidthRow"),u=l.equals,h=l.spanRows,p="function"==typeof h;let f,g=null,m=null;const v=(e,t)=>{g=e,m=null,f=t},b=e=>{const n=!(e.isExpandable()||e.group||e.detail||d&&d({rowNode:e}));if(null==e.rowIndex||!n)return void v(null,null);if(null==g||e.level!==g.level||e.footer||m&&e.rowIndex-1!==m?.getLastNode().rowIndex)return void v(e,a.getValue(t,e));const o=a.getValue(t,e);if(p){const n=(0,r._addGridCommonParams)(i,{valueA:f,nodeA:g,valueB:o,nodeB:e,column:t,colDef:l});if(!h(n))return void v(e,o)}else if(u?!u(f,o):f!==o)return void v(e,o);m||(m=new s(t,g),c.set(g,m)),m.addSpannedNode(e),c.set(e,m)};switch(e){case"center":o.forEachDisplayedNode?.(b);break;case"top":n?.forEachPinnedRow("top",b);break;case"bottom":n?.forEachPinnedRow("bottom",b)}this[`${e}ValueNodeMap`]=c}isCellSpanning(e){return!!this.getCellSpan(e)}getCellSpan(e){return this[`${(0,o._normalisePinnedValue)(e.rowPinned)}ValueNodeMap`].get(e)}}t.RowSpanCache=a},4658:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowSpanService=void 0;const n=i(8731),r=i(2043),o=i(3643);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=(0,r._debounce)(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=(0,r._debounce)(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){this.addManagedEventListeners({modelUpdated:this.buildModelCaches.bind(this),pinnedRowDataChanged:this.buildPinnedCaches.bind(this)})}register(e){const{gos:t}=this.beans;if(!t.get("enableCellSpan"))return;if(this.spanningColumns.has(e))return;const i=this.createManagedBean(new o.RowSpanCache(e));this.spanningColumns.set(e,i),i.buildCache("top"),i.buildCache("bottom"),i.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(e){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:e})}deregister(e){this.spanningColumns.delete(e)}onRowDataUpdated(e){const{spannedRowRenderer:t}=this.beans;if(e.rowPinned){if(null!=this.pinnedTimeout)return;this.pinnedTimeout=window.setTimeout((()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),t?.createCtrls("top"),t?.createCtrls("bottom")}),0)}else null==this.modelTimeout&&(this.modelTimeout=window.setTimeout((()=>{this.modelTimeout=null,this.buildModelCaches(),t?.createCtrls("center")}),0))}buildModelCaches(){null!=this.modelTimeout&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach((e=>e.buildCache("center"))),this.debounceModelEvent()}buildPinnedCaches(){null!=this.pinnedTimeout&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach((e=>{e.buildCache("top"),e.buildCache("bottom")})),this.debouncePinnedEvent()}isCellSpanning(e,t){const i=this.spanningColumns.get(e);return!!i&&i.isCellSpanning(t)}getCellSpanByPosition(e){const{pinnedRowModel:t,rowModel:i}=this.beans,n=e.column,r=e.rowIndex,o=this.spanningColumns.get(n);if(!o)return;let s;switch(e.rowPinned){case"top":s=t?.getPinnedTopRow(r);break;case"bottom":s=t?.getPinnedBottomRow(r);break;default:s=i.getRow(r)}return s?o.getCellSpan(s):void 0}getCellStart(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.firstNode.rowIndex}:e}getCellEnd(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.getLastNode().rowIndex}:e}getCellSpan(e,t){const i=this.spanningColumns.get(e);if(i)return i.getCellSpan(t)}forEachSpannedColumn(e,t){for(const[i,n]of this.spanningColumns)if(n.isCellSpanning(e)){t(i,n.getCellSpan(e))}}destroy(){super.destroy(),this.spanningColumns.clear()}}t.RowSpanService=s},8411:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SpannedCellCtrl=void 0;const n=i(5230),r=i(2331),o=i(814);class s extends o.CellCtrl{constructor(e,t,i){super(e.col,e.firstNode,i,t),this.cellSpan=e,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(e,t,i,n,r,o,s){this.eWrapper=i,super.setComp(e,t,i,n,r,o,s),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){null!=this.rowNode.rowIndex&&(0,n._setAriaRowIndex)(this.eGui,this.rowNode.rowIndex)}setAriaRowSpan(){(0,n._setAriaRowSpan)(this.eGui,this.cellSpan.spannedNodes.size)}shouldRestoreFocus(){return this.beans.focusSvc.shouldRestoreFocus(this.cellSpan)}onFocusOut(){this.focusedCellPosition=void 0,super.onFocusOut()}setFocusedCellPosition(e){this.focusedCellPosition=e}getFocusedCellPosition(){return this.focusedCellPosition??this.cellPosition}isCellFocused(){const e=this.beans.focusSvc.getFocusedCell();return!!e&&this.cellSpan.doesSpanContain(e)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.addOrRemoveCssClass(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(e){const{beans:t}=this;if((0,r._isCellFocusSuppressed)(t))return void(this.focusedCellPosition=void 0);const i=this.isCellFocused();i||(this.focusedCellPosition=void 0),e&&i&&(this.focusedCellPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column}),super.onCellFocused(e)}getRootElement(){return this.eWrapper}}t.SpannedCellCtrl=s},6541:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SpannedRowCtrl=void 0;const n=i(7632),r=i(8411);class o extends n.RowCtrl{onRowIndexChanged(){super.onRowIndexChanged(),this.getAllCellCtrls().forEach((e=>e.refreshAriaRowIndex()))}getInitialRowClasses(e){return["ag-spanned-row"]}getNewCellCtrl(e){const t=this.beans.rowSpanSvc?.getCellSpan(e,this.rowNode);if(!t)return;return t.firstNode!==this.rowNode?void 0:new r.SpannedCellCtrl(t,this,this.beans)}shouldRecreateCellCtrl(e){const t=this.beans.rowSpanSvc?.getCellSpan(e.column,this.rowNode);if(!t)return!0;return!(t.firstNode===this.rowNode)||e.getCellSpan()!==t}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}}t.SpannedRowCtrl=o},2991:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._normalisePinnedValue=t.SpannedRowRenderer=void 0;const n=i(8731),r=i(6541);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(e){const{rowSpanSvc:t}=this.beans,i=`${e}Ctrls`,n=this[i],o=n.size,s=this.getAllRelevantRowControls(e),a=new Map;let l=!1;for(const e of s)e.isAlive()&&t?.forEachSpannedColumn(e.rowNode,((e,t)=>{if(a.has(t.firstNode))return;const i=n.get(t.firstNode);if(i)return a.set(t.firstNode,i),void n.delete(t.firstNode);l=!0;const o=new r.SpannedRowCtrl(t.firstNode,this.beans,!1,!1,!1);a.set(t.firstNode,o)}));this[i]=a;const c=a.size===o;if(l||!c){for(const e of n.values())e.destroyFirstPass(!0),e.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey:e})}}getAllRelevantRowControls(e){const{rowRenderer:t}=this.beans;switch(e){case"top":return t.topRowCtrls;case"bottom":return t.bottomRowCtrls;case"center":return t.allRowCtrls}}getCellByPosition(e){const{rowSpanSvc:i}=this.beans,n=i?.getCellSpanByPosition(e);if(!n)return;const r=this[`${(0,t._normalisePinnedValue)(e.rowPinned)}Ctrls`].get(n.firstNode);return r?r.getAllCellCtrls().find((t=>t.column===e.column)):void 0}getCtrls(e){return[...this[`${e}Ctrls`].values()]}destroyRowCtrls(e){const t=`${e}Ctrls`;for(const e of this[t].values())e.destroyFirstPass(!0),e.destroySecondPass();this[t]=new Map}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}}t.SpannedRowRenderer=o;t._normalisePinnedValue=e=>e??"center"},3306:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSelectionService=void 0;const n=i(3146),r=i(8731),o=i(9888),s=i(7274),a=i(5230),l=i(5954),c=i(9666),d=i(8273);class u extends r.BeanStub{postConstruct(){const{gos:e,beans:t}=this;this.selectionCtx=new c.RowRangeSelectionContext(t.rowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],(()=>{const t=(0,s._getIsRowSelectable)(e);t!==this.isRowSelectable&&(this.isRowSelectable=t,this.updateSelectable())})),this.isRowSelectable=(0,s._getIsRowSelectable)(e)}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new l.CheckboxSelectionComponent}createSelectAllFeature(e){return new d.SelectAllFeature(e)}isMultiSelect(){return(0,s._isMultiRowSelection)(this.gos)}onRowCtrlSelected(e,t,i){const n=!!e.rowNode.isSelected();e.forEachGui(i,(e=>{e.rowComp.addOrRemoveCssClass("ag-row-selected",n);const i=e.element;(0,a._setAriaSelected)(i,n);i.contains((0,s._getActiveDomElement)(this.beans))&&t(e)}))}announceAriaRowSelection(e){if(this.isRowSelectionBlocked(e))return;const t=e.isSelected();if(!e.selectable)return;const i=this.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row`);this.beans.ariaAnnounce?.announceValue(i,"rowSelection")}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e})}isRowSelectionBlocked(e){return!e.selectable||!!e.rowPinned||!(0,s._isRowSelection)(this.gos)}updateRowSelectable(e,t){const i=this.isRowSelectable?.(e)??!0;return this.setRowSelectable(e,i,t),i}setRowSelectable(e,t,i){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent("selectableChanged"),i)return;if((0,s._getGroupSelectsDescendants)(this.gos)){const t=this.calculateSelectedFromChildren(e);return void this.setNodesSelected({nodes:[e],newValue:t??!1,source:"selectableChanged"})}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){let t=!1,i=!1;if(!e.childrenAfterGroup?.length)return e.selectable?e.__selected:null;for(let n=0;n<e.childrenAfterGroup.length;n++){const r=e.childrenAfterGroup[n];let o=r.isSelected();if(!r.selectable){const e=this.calculateSelectedFromChildren(r);if(null===e)continue;o=e}switch(o){case!0:t=!0;break;case!1:i=!0;break;default:return}}return t&&i?void 0:!!t||!i&&(e.selectable?e.__selected:null)}selectRowNode(e,t,i,n="api"){const r=!e.selectable&&t,s=e.__selected===t;if(r||s)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");const a=e.sibling;return a&&a.footer&&a.__localEventService&&a.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent({...(0,o._createGlobalRowEvent)(e,this.gos,"rowSelected"),event:i||null,source:n}),!0}isCellCheckboxSelection(e,t){const i=this.gos.get("rowSelection");if(i&&"string"!=typeof i){const r=(0,n.isColumnSelectionCol)(e)&&(0,s._getCheckboxes)(i);return e.isColumnFunc(t,r)}return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,i,n){const{gos:r,selectionCtx:o}=this,a=e.isSelected(),l=(0,s._getGroupSelectsDescendants)(r),c=(0,s._getEnableSelection)(r),d=(0,s._getEnableDeselection)(r),u=this.isMultiSelect(),h="rowClicked"===n;if(h&&l&&e.group)return null;if(h&&!c&&!d)return null;if(t&&i&&u){const t=o.getRoot();if(t){if(t.isSelected()){const t=o.isInRange(e)?o.truncate(e):o.extend(e,l);return{deselect:t.discard,select:t.keep,reset:!1}}return{select:[],deselect:o.extend(e,l).keep,reset:!1}}return null}if(t&&u){const t=o.selectAll?this.beans.rowModel.getRow(0):void 0,i=o.getRoot(t),n=o.isInRange(e)?o.truncate(e):o.extend(e,l);return{select:n.keep,deselect:n.discard,reset:o.selectAll||!(!i||i.isSelected())}}if(i)return o.setRoot(e),h&&a&&!d?null:{node:e,newValue:!a,clearSelection:!u};{o.setRoot(e);const t=(0,s._getEnableSelectionWithoutKeys)(r),i=h&&(!t||!c);if("filteredDescendants"===(0,s._getGroupSelection)(r)&&void 0===a&&(0,s._isClientSideRowModel)(r))return{node:e,newValue:!1,clearSelection:!u||i};if(h){const n=a?!t:c;return n===a&&!i||n&&!c||!n&&!d?null:{node:e,newValue:n,clearSelection:!u||i}}return{node:e,newValue:!a,clearSelection:!u||i}}}}t.BaseSelectionService=u},5954:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxSelectionComponent=void 0;const n=i(7274),r=i(5230),o=i(2979),s=i(66),a=i(8020);class l extends a.Component{constructor(){super('\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[s.AgCheckboxSelector]),this.eCheckbox=a.RefPlaceholder}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:i}=this,n=t.isSelected(),o=(0,r._getAriaCheckboxStateName)(e,n),[s,a]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],l=e(s,a);i.setValue(n,!0),i.setInputAriaLabel(`${l} (${o})`)}init(e){this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:o._stopPropagationForAgGrid,click:e=>{(0,o._stopPropagationForAgGrid)(e),this.beans.selectionSvc?.handleSelectionEvent(e,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",(({currentValue:e,previousValue:t})=>{("object"==typeof e?(0,n._getHideDisabledCheckboxes)(e):void 0)!==("object"==typeof t?(0,n._getHideDisabledCheckboxes)(t):void 0)&&this.onSelectableChanged()}));if((0,n._getIsRowSelectable)(this.gos)||"function"==typeof this.getIsVisible()){const e=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){const{column:e,rowNode:t,overrides:i,gos:r}=this;let o=t.selectable;const s=this.getIsVisible();if(o)if("function"==typeof s){const n=i?.callbackParams;if(e){const i=e.createColumnFunctionCallbackParams(t);o=s({...n,...i})}else o=s({...n,node:t,data:t.data})}else o=s??!1;const a=r.get("rowSelection");if(a&&"string"!=typeof a?!(0,n._getHideDisabledCheckboxes)(a):e?.getColDef().showDisabledCheckboxes)return this.eCheckbox.setDisabled(!o),this.setVisible(!0),void this.setDisplayed(!0);i?.removeHidden?this.setDisplayed(o):this.setVisible(o)}getIsVisible(){const e=this.overrides;if(e)return e.isVisible;const t=this.gos.get("rowSelection");return t&&"string"!=typeof t?(0,n._getCheckboxes)(t):this.column?.getColDef()?.checkboxSelection}}t.CheckboxSelectionComponent=l},9666:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RowRangeSelectionContext=void 0;t.RowRangeSelectionContext=class{constructor(e){this.rowModel=e,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(0===this.cachedRange.length){const e=this.getRoot(),t=this.getEnd();if(null==e||null==t)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)??[]}return this.cachedRange}isInRange(e){return null!==this.rootId&&this.getRange().some((t=>t.id===e.id))}getRoot(e){return this.rootId?this.rowModel.getRowNode(this.rootId)??null:e?(this.setRoot(e),e):null}getEnd(){return this.endId?this.rowModel.getRowNode(this.endId)??null:null}truncate(e){const t=this.getRange();if(0===t.length)return{keep:[],discard:[]};const i=t[0].id===this.rootId,n=t.findIndex((t=>t.id===e.id));if(n>-1){const r=t.slice(0,n),o=t.slice(n+1);return this.setEndRange(e),i?{keep:r,discard:o}:{keep:o,discard:r}}return{keep:t,discard:[]}}extend(e,t=!1){const i=this.getRoot();if(null==i){const i=this.getRange().slice();return t&&e.depthFirstSearch((e=>!e.group&&i.push(e))),i.push(e),this.setRoot(e),{keep:i,discard:[]}}const n=this.rowModel.getNodesInRangeForSelection(i,e);if(!n)return this.setRoot(e),{keep:[e],discard:[]};if(n.find((e=>e.id===this.endId)))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const t=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:t}}}}},9770:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedRows=t.getSelectedNodes=t.deselectAllOnCurrentPage=t.selectAllOnCurrentPage=t.deselectAllFiltered=t.selectAllFiltered=t.deselectAll=t.selectAll=t.setNodesSelected=void 0;const n=i(7764);t.setNodesSelected=function(e,t){if(!t.nodes.every((e=>e.rowPinned?((0,n._warn)(59),!1):void 0!==e.id||((0,n._warn)(60),!1))))return;const{nodes:i,source:r,newValue:o}=t;e.selectionSvc?.setNodesSelected({nodes:i,source:r??"api",newValue:o})},t.selectAll=function(e,t,i="apiSelectAll"){e.selectionSvc?.selectAllRowNodes({source:i,selectAll:t})},t.deselectAll=function(e,t,i="apiSelectAll"){e.selectionSvc?.deselectAllRowNodes({source:i,selectAll:t})},t.selectAllFiltered=function(e,t="apiSelectAllFiltered"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"filtered"})},t.deselectAllFiltered=function(e,t="apiSelectAllFiltered"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"filtered"})},t.selectAllOnCurrentPage=function(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"currentPage"})},t.deselectAllOnCurrentPage=function(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"currentPage"})},t.getSelectedNodes=function(e){return e.selectionSvc?.getSelectedNodes()??[]},t.getSelectedRows=function(e){return e.selectionSvc?.getSelectedRows()??[]}},3352:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowSelectionModule=t.SharedRowSelectionModule=void 0;const n=i(3245),r=i(7205),o=i(9770),s=i(6603);t.SharedRowSelectionModule={moduleName:"SharedRowSelection",version:r.VERSION,beans:[n.SelectionColService],apiFunctions:{setNodesSelected:o.setNodesSelected,selectAll:o.selectAll,deselectAll:o.deselectAll,selectAllFiltered:o.selectAllFiltered,deselectAllFiltered:o.deselectAllFiltered,selectAllOnCurrentPage:o.selectAllOnCurrentPage,deselectAllOnCurrentPage:o.deselectAllOnCurrentPage,getSelectedNodes:o.getSelectedNodes,getSelectedRows:o.getSelectedRows}},t.RowSelectionModule={moduleName:"RowSelection",version:r.VERSION,rowModels:["clientSide","infinite","viewport"],beans:[s.SelectionService],dependsOn:[t.SharedRowSelectionModule]}},8273:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectAllFeature=void 0;const n=i(3146),r=i(8731),o=i(7274),s=i(5230),a=i(7764),l=i(66);class c extends r.BeanStub{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains((0,o._getActiveDomElement)(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;const t=this.createManagedBean(new l.AgCheckbox);this.cbSelectAll=t,t.addCssClass("ag-header-select-all"),(0,s._setAriaRole)(t.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",(({currentValue:e,previousValue:t})=>{const i=e=>"string"!=typeof e&&e&&"singleRow"!==e.mode?e.selectAll:void 0;i(e)!==i(t)&&this.showOrHideSelectAll()})),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll("uiColumnMoved"===e.source)}showOrHideSelectAll(e=!1){const t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.getSelectAllMode(),t=this.beans.selectionSvc,i=this.cbSelectAll,n=t.getSelectAllState(e);i.setValue(n);const r=t.hasNodesToSelect(e);i.setDisabled(!r),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(e=!1){const t=this.getLocaleTextFunc(),{headerCellCtrl:i,cbSelectAll:n,cbSelectAllVisible:r}=this,o=n.getValue()?t("ariaChecked","checked"):t("ariaUnchecked","unchecked"),s=t("ariaRowSelectAll","Press Space to toggle all rows selection");i.setAriaDescriptionProperty("selectAll",r?`${s} (${o})`:null),n.setInputAriaLabel(t("ariaHeaderSelection","Column with Header Selection")),e||i.announceAriaDescription()}checkSelectionType(e){return!!(0,o._isMultiRowSelection)(this.gos)||((0,a._warn)(128,{feature:e}),!1)}checkRightRowModelType(e){const{gos:t,rowModel:i}=this.beans;return!(!(0,o._isClientSideRowModel)(t)&&!(0,o._isServerSideRowModel)(t))||((0,a._warn)(129,{feature:e,rowModel:i.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox)return;if(!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.getSelectAllMode();let i="uiSelectAll";"currentPage"===t?i="uiSelectAllCurrentPage":"filtered"===t&&(i="uiSelectAllFiltered");const n={source:i,selectAll:t},r=this.beans.selectionSvc;e?r.selectAllRowNodes(n):r.deselectAllRowNodes(n)}isCheckboxSelection(){const{column:e,gos:t,beans:i}=this,r=t.get("rowSelection"),s=e.getColDef(),{headerCheckboxSelection:a}=s;let l=!1;const c="object"==typeof r;if(c){const t=(0,n.isColumnSelectionCol)(e),s=(0,n.isColumnGroupAutoCol)(e);("autoGroupColumn"===(0,o._getCheckboxLocation)(r)&&s||t&&i.selectionColSvc?.isSelectionColumnEnabled())&&(l=(0,o._getHeaderCheckbox)(r))}else l="function"==typeof a?a((0,o._addGridCommonParams)(t,{column:e,colDef:s})):!!a;const d=c?"headerCheckbox":"headerCheckboxSelection";return l&&this.checkRightRowModelType(d)&&this.checkSelectionType(d)}getSelectAllMode(){const e=(0,o._getSelectAll)(this.gos,!1);if(e)return e;const{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:i}=this.column.getColDef();return t?"currentPage":i?"filtered":"all"}}t.SelectAllFeature=c},6603:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionService=void 0;const n=i(3373),r=i(7274),o=i(6800),s=i(7764),a=i(3306);class l extends a.BaseSelectionService{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();const{gos:e}=this;this.mode=(0,r._getRowSelectionMode)(e),this.groupSelectsDescendants=(0,r._getGroupSelectsDescendants)(e),this.groupSelectsFiltered="filteredDescendants"===(0,r._getGroupSelection)(e),this.masterSelectsDetail="detail"===(0,r._getMasterSelects)(e),this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],(()=>{const t=(0,r._getGroupSelectsDescendants)(e),i=(0,r._getRowSelectionMode)(e),n="filteredDescendants"===(0,r._getGroupSelection)(e);this.masterSelectsDetail="detail"===(0,r._getMasterSelects)(e),t===this.groupSelectsDescendants&&n===this.groupSelectsFiltered&&i===this.mode||(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=n,this.mode=i)})),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,i){if(this.isRowSelectionBlocked(t))return 0;const n=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,i);return null==n?0:(this.selectionCtx.selectAll=!1,"select"in n?(n.reset?this.resetNodes():this.selectRange(n.deselect,!1,i),this.selectRange(n.select,!0,i)):this.setNodesSelected({nodes:[n.node],newValue:n.newValue,clearSelection:n.clearSelection,event:e,source:i}))}setNodesSelected({newValue:e,clearSelection:t,suppressFinishActions:i,nodes:n,event:o,source:a}){if(!(0,r._isRowSelection)(this.gos)&&e)return(0,s._warn)(132),0;if(0===n.length)return 0;if(n.length>1&&!this.isMultiSelect())return(0,s._warn)(130),0;let l=0;for(let t=0;t<n.length;t++){const i=c(n[t]),r=this.groupSelectsFiltered&&i.group;if(i.rowPinned)(0,s._warn)(59);else if(void 0!==i.id){if(!r){this.selectRowNode(i,e,o,a)&&(this.detailSelection.delete(i.id),l++)}this.groupSelectsDescendants&&i.childrenAfterGroup?.length&&(l+=this.selectChildren(i,e,a))}else(0,s._warn)(60)}if(!i){e&&(t||!this.isMultiSelect())&&(l+=this.clearOtherNodes(c(n[0]),a)),l>0&&(this.updateGroupsFromChildrenSelections(a),this.dispatchSelectionChanged(a))}return l}selectRange(e,t,i){let n=0;return e.forEach((e=>{if(e.group&&this.groupSelectsDescendants)return;this.selectRowNode(e,t,void 0,i)&&n++})),n>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),n}selectChildren(e,t,i){const n=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return n?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:i,nodes:n}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){const e=[];return this.selectedNodes.forEach((t=>e.push(t.data))),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach(((i,n)=>{e(i)&&t.set(n,i)})),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;const{gos:i,rowModel:n}=this.beans;if(!(0,r._isClientSideRowModel)(i,n))return!1;const s=n.rootNode;if(!s)return!1;t||((t=new o.ChangedPath(!0,s)).active=!1);let a=!1;return t.forEachChangedNodeDepthFirst((t=>{if(t!==s){const i=this.calculateSelectedFromChildren(t);a=this.selectRowNode(t,null!==i&&i,void 0,e)||a}})),a}clearOtherNodes(e,t){const i=new Map;let n=0;return this.selectedNodes.forEach((r=>{if(r&&r.id!==e.id){const e=this.selectedNodes.get(r.id);n+=this.setNodesSelected({nodes:[e],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsDescendants&&r.parent&&i.set(r.parent.id,r.parent)}})),i.forEach((e=>{const i=this.calculateSelectedFromChildren(e);this.selectRowNode(e,null!==i&&i,void 0,t)})),n}onRowSelected(e){const t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;const t=new n.RowNode(this.beans);return t.id=e.id,t.data=e.data,t.__daemon=!0,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){if(t&&e.id!==t.id){this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach((e=>{this.selectRowNode(e,!1)})),this.selectedNodes.clear()}getBestCostNodeSelection(){const{gos:e,rowModel:t}=this.beans;if(!(0,r._isClientSideRowModel)(e,t))return;const i=t.getTopLevelNodes();if(null===i)return;const n=[];return function e(t){for(let i=0,r=t.length;i<r;i++){const r=t[i];r.isSelected()?n.push(r):r.group&&r.childrenAfterGroup&&e(r.childrenAfterGroup)}}(i),n}isEmpty(){return 0===this.getSelectionCount()}deselectAllRowNodes({source:e,selectAll:t}){const i=(0,r._isClientSideRowModel)(this.gos);let n=!1;const o=t=>{const i=this.selectRowNode(c(t),!1,void 0,e);n||(n=i)};if("currentPage"===t||"filtered"===t){if(!i)return void(0,s._error)(102);this.getNodesToSelect(t).forEach(o)}else this.selectedNodes.forEach(o),this.reset(e);if(this.selectionCtx.selectAll=!1,i&&this.groupSelectsDescendants){const t=this.updateGroupsFromChildrenSelections(e);n||(n=t)}n&&this.dispatchSelectionChanged(e)}getSelectedCounts(e){let t=0,i=0;return this.getNodesToSelect(e).forEach((e=>{this.groupSelectsDescendants&&e.group||(e.isSelected()?t++:e.selectable&&i++)})),{selectedCount:t,notSelectedCount:i}}getSelectAllState(e){const{selectedCount:t,notSelectedCount:i}=this.getSelectedCounts(e);return d(t,i)??null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter((e=>e.selectable)).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];const t=[];if("currentPage"===e)return this.forEachNodeOnPage((e=>{if(e.group)if(e.expanded||e.footer)this.groupSelectsDescendants||t.push(e);else{const i=e=>{t.push(e),e.childrenAfterFilter?.length&&e.childrenAfterFilter.forEach(i)};i(e)}else t.push(e)})),t;const i=this.beans.rowModel;return"filtered"===e?(i.forEachNodeAfterFilter((e=>{t.push(e)})),t):(i.forEachNode((e=>{t.push(e)})),t)}forEachNodeOnPage(e){const{pageBounds:t,rowModel:i}=this.beans,n=t.getFirstRow(),r=t.getLastRow();for(let t=n;t<=r;t++){const n=i.getRow(t);n&&e(n)}}selectAllRowNodes(e){const{gos:t,selectionCtx:i}=this;if(!(0,r._isRowSelection)(t))return void(0,s._warn)(132);if((0,r._isUsingNewRowSelectionAPI)(t)&&!(0,r._isMultiRowSelection)(t))return void(0,s._warn)(130);if(!this.canSelectAll())return;const{source:n,selectAll:o}=e;let a=!1;if(this.getNodesToSelect(o).forEach((e=>{const t=this.selectRowNode(c(e),!0,void 0,n);a||(a=t)})),i.selectAll=!0,(0,r._isClientSideRowModel)(t)&&this.groupSelectsDescendants){const e=this.updateGroupsFromChildrenSelections(n);a||(a=e)}a&&this.dispatchSelectionChanged(n)}getSelectionState(){const e=[];return this.selectedNodes.forEach((t=>{t?.id&&e.push(t.id)})),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return void(0,s._error)(103);const i=new Set(e),n=[];this.beans.rowModel.forEachNode((e=>{i.has(e.id)&&n.push(e)})),this.setNodesSelected({newValue:!0,nodes:n,source:t})}canSelectAll(){const{gos:e,rowModel:t}=this.beans;return!!(0,r._isClientSideRowModel)(e)||((0,s._error)(100,{rowModelType:t.getType()}),!1)}updateSelectable(e){const{gos:t,rowModel:i}=this.beans;if(!(0,r._isRowSelection)(t))return;const n="selectableChanged",s=void 0!==e,a=(0,r._isClientSideRowModel)(t)&&this.groupSelectsDescendants,l=[],c=e=>{if(s&&!e.group)return;if(a&&e.group){const t=e.childrenAfterGroup?.some((e=>e.selectable))??!1;return void this.setRowSelectable(e,t,!0)}!this.updateRowSelectable(e,!0)&&e.isSelected()&&l.push(e)};if(a){if(void 0===e){const t=i.rootNode;e=t?new o.ChangedPath(!1,t):void 0}e?.forEachChangedNodeDepthFirst(c,!s,!s)}else i.forEachNode(c);l.length&&this.setNodesSelected({nodes:l,newValue:!1,source:n}),!s&&a&&this.updateGroupsFromChildrenSelections?.(n)}updateSelectableAfterGrouping(e){if(this.updateSelectable(e),this.groupSelectsDescendants){const t=this.updateGroupsFromChildrenSelections?.("rowGroupChanged",e);t&&this.dispatchSelectionChanged("rowGroupChanged")}}refreshMasterNodeState(e,t){if(!this.masterSelectsDetail)return;const i=e.detailNode?.detailGridInfo?.api;if(!i)return;const n=function(e){let t=0,i=0;return e.forEachNode((e=>{e.isSelected()?t++:e.selectable&&i++})),d(t,i)}(i);if(e.isSelected()!==n){this.selectRowNode(e,n,t,"masterDetail")&&this.dispatchSelectionChanged("masterDetail")}if(!n){const t=this.detailSelection.get(e.id)??new Set;for(const e of i.getSelectedNodes())t.add(e.id);this.detailSelection.set(e.id,t)}}setDetailSelectionState(e,t,i){if(this.masterSelectsDetail)if((0,r._isMultiRowSelection)(t))switch(e.isSelected()){case!0:i.selectAll();break;case!1:i.deselectAll();break;case void 0:{const t=this.detailSelection.get(e.id);if(t){const e=[];for(const n of t){const t=i.getRowNode(n);t&&e.push(t)}i.setNodesSelected({nodes:e,newValue:!0,source:"masterDetail"})}break}}else(0,s._warn)(269)}}function c(e){return e.footer?e.sibling:e}function d(e,t){return(0!==e||0!==t)&&(e>0&&t>0?void 0:e>0)}t.SelectionService=l},3341:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowNodeSorter=void 0;const n=i(8731),r=i(7274),o=i(4422);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){const{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=(0,r._isColumnsSortingCoupledToGroup)(e),this.addManagedPropertyListener("accentedSort",(e=>this.isAccentedSort=e.currentValue)),this.addManagedPropertyListener("autoGroupColumnDef",(()=>this.primaryColumnsSortGroups=(0,r._isColumnsSortingCoupledToGroup)(e)))}doFullSort(e,t){const i=e.map(((e,t)=>({currentPos:t,rowNode:e})));return i.sort(this.compareRowNodes.bind(this,t)),i.map((e=>e.rowNode))}compareRowNodes(e,t,i){const n=t.rowNode,r=i.rowNode;for(let t=0,i=e.length;t<i;t++){const i=e[t],s="desc"===i.sort,a=this.getValue(n,i.column),l=this.getValue(r,i.column);let c;const d=this.getComparator(i,n);c=d?d(a,l,n,r,s):(0,o._defaultComparator)(a,l,this.isAccentedSort);if(!isNaN(c)&&0!==c)return"asc"===i.sort?c:-1*c}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,n=i.getColDef().comparator;if(null!=n)return n;if(!i.getColDef().showRowGroup)return;const r=!t.group&&i.getColDef().field;if(!r)return;const o=this.beans.colModel.getColDefCol(r);return o?o.getColDef().comparator:void 0}getValue(e,t){const{valueSvc:i,colModel:n,showRowGroupCols:o,gos:s}=this.beans;if(!this.primaryColumnsSortGroups)return i.getValue(t,e,!1);if(e.rowGroupColumn===t){if((0,r._isGroupUseEntireRow)(s,n.isPivotActive())){const n=e.allLeafChildren?.[0];return n?i.getValue(t,n,!1):void 0}const a=o?.getShowRowGroupCol(t.getId());if(!a)return;return e.groupData?.[a.getId()]}return e.group&&t.getColDef().showRowGroup?void 0:i.getValue(t,e,!1)}}t.RowNodeSorter=s},7430:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.onSortChanged=void 0,t.onSortChanged=function(e){e.sortSvc?.onSortChanged("api")}},7388:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SortIndicatorSelector=t.SortIndicatorComp=void 0;const n=i(7274),r=i(3507),o=i(9970),s=i(8020);function a(e,t){return`<span data-ref="eSort${e}" class="ag-sort-indicator-icon ag-sort-${t} ag-hidden" aria-hidden="true"></span>`}const l=`<span class="ag-sort-indicator-container">\n        ${a("Order","order")}\n        ${a("Asc","ascending-icon")}\n        ${a("Desc","descending-icon")}\n        ${a("Mixed","mixed-icon")}\n        ${a("None","none-icon")}\n    </span>`;class c extends s.Component{constructor(e){super(),this.eSortOrder=s.RefPlaceholder,this.eSortAsc=s.RefPlaceholder,this.eSortDesc=s.RefPlaceholder,this.eSortMixed=s.RefPlaceholder,this.eSortNone=s.RefPlaceholder,e||this.setTemplate(l)}attachCustomElements(e,t,i,n,r){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=n,this.eSortNone=r}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const i=this.updateIcons.bind(this),n=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:n,columnRowGroupChanged:n}),this.onSortChanged()}addInIcon(e,t,i){if(null==t)return;const n=(0,o._createIconNoSpan)(e,this.beans,i);n&&t.appendChild(n)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortNone:i,column:n,gos:o,beans:s}=this,a=s.sortSvc.getDisplaySortForColumn(n);if(e){const t="asc"===a;(0,r._setDisplayed)(e,t,{skipAriaHidden:!0})}if(t){const e="desc"===a;(0,r._setDisplayed)(t,e,{skipAriaHidden:!0})}if(i){const e=!n.getColDef().unSortIcon&&!o.get("unSortIcon"),t=null==a;(0,r._setDisplayed)(i,!e&&t,{skipAriaHidden:!0})}}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:i}=this;this.addInIcon("sortUnSort",e,t);const r=t.getColDef().showRowGroup;(0,n._isColumnsSortingCoupledToGroup)(i)&&r&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:e,beans:t,column:i}=this;if(e){const n="mixed"===t.sortSvc.getDisplaySortForColumn(i);(0,r._setDisplayed)(e,n,{skipAriaHidden:!0})}}updateSortOrder(){const{eSortOrder:e,column:t,beans:{sortSvc:i}}=this;if(!e)return;const n=i.getColumnsWithSortingOrdered(),o=i.getDisplaySortIndexForColumn(t)??-1,s=n.some((e=>i.getDisplaySortIndexForColumn(e)??!1)),a=o>=0&&s;(0,r._setDisplayed)(e,a,{skipAriaHidden:!0}),o>=0?e.textContent=(o+1).toString():(0,r._clearElement)(e)}}t.SortIndicatorComp=c,t.SortIndicatorSelector={selector:"AG-SORT-INDICATOR",component:c}},6620:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SortModule=void 0;const n=i(7205),r=i(3341),o=i(7430),s=i(7388),a=i(8125);t.SortModule={moduleName:"Sort",version:n.VERSION,beans:[a.SortService,r.RowNodeSorter],apiFunctions:{onSortChanged:o.onSortChanged},userComponents:{agSortIndicator:s.SortIndicatorComp},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}}},8125:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SortService=t.DEFAULT_SORTING_ORDER=void 0;const n=i(8731),r=i(7274),o=i(7388);t.DEFAULT_SORTING_ORDER=["asc","desc",null];class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,i){const n=this.getNextSortDirection(e);this.setSortForColumn(e,n,t,i)}progressSortFromEvent(e,t){const i="ctrl"===this.gos.get("multiSortKey")?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,i,"uiColumnSorted")}setSortForColumn(e,t,i,n){"asc"!==t&&"desc"!==t&&(t=null);const{gos:o,showRowGroupCols:s}=this.beans;let a=[e];if((0,r._isColumnsSortingCoupledToGroup)(o)&&e.getColDef().showRowGroup){const t=s?.getSourceColumnsForGroupColumn?.(e),i=t?.filter((e=>e.isSortable()));i&&(a=[e,...i])}a.forEach((e=>this.setColSort(e,t,n)));const l=[];if(!((i||o.get("alwaysMultiSort"))&&!o.get("suppressMultiSort"))){const e=this.clearSortBarTheseColumns(a,n);l.push(...e)}this.updateSortIndex(e),l.push(...a),this.dispatchSortChangedEvents(n,l)}updateSortIndex(e){const{gos:t,colModel:i,showRowGroupCols:n}=this.beans,o=(0,r._isColumnsSortingCoupledToGroup)(t),s=n?.getShowRowGroupCol(e.getId()),a=o&&s||e,l=this.getColumnsWithSortingOrdered();i.getAllCols().forEach((e=>this.setColSortIndex(e,null)));const c=l.filter((e=>(!o||!e.getColDef().showRowGroup)&&e!==a));(a.getSort()?[...c,a]:c).forEach(((e,t)=>this.setColSortIndex(e,t)))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const e=this.beans.colModel.getAllCols().filter((e=>!!e.getSort()));return e&&e.length>0}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventSvc.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.beans.colModel.getAllCols().forEach((n=>{e.includes(n)||(n.getSort()&&i.push(n),this.setColSort(n,void 0,t))})),i}getNextSortDirection(e){const i=e.getColDef().sortingOrder??this.gos.get("sortingOrder")??t.DEFAULT_SORTING_ORDER,n=i.indexOf(e.getSort()),r=n<0,o=n==i.length-1;return r||o?i[0]:i[n+1]}getIndexedSortMap(){const{gos:e,colModel:t,showRowGroupCols:i,rowGroupColsSvc:n}=this.beans;let o=t.getAllCols().filter((e=>!!e.getSort()));if(t.isPivotMode()){const t=(0,r._isColumnsSortingCoupledToGroup)(e);o=o.filter((e=>{const n=!!e.getAggFunc(),r=!e.isPrimary(),o=t?i?.getShowRowGroupCol(e.getId()):e.getColDef().showRowGroup;return n||r||o}))}const s=n?.columns.filter((e=>!!e.getSort()))??[],a={};o.forEach(((e,t)=>a[e.getId()]=t)),o.sort(((e,t)=>{const i=e.getSortIndex(),n=t.getSortIndex();if(null!=i&&null!=n)return i-n;if(null==i&&null==n){return a[e.getId()]>a[t.getId()]?1:-1}return null==n?-1:1}));const l=(0,r._isColumnsSortingCoupledToGroup)(e)&&!!s.length;l&&(o=[...new Set(o.map((e=>i?.getShowRowGroupCol(e.getId())??e)))]);const c=new Map;return o.forEach(((e,t)=>c.set(e,t))),l&&s.forEach((e=>{const t=i.getShowRowGroupCol(e.getId());c.set(e,c.get(t))})),c}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort((([e,t],[i,n])=>t-n)).map((([e])=>e))}getSortModel(){return this.getColumnsWithSortingOrdered().filter((e=>e.getSort())).map((e=>({sort:e.getSort(),colId:e.getId()})))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter((e=>e.getSort())).map((e=>({sort:e.getSort(),column:e})))}canColumnDisplayMixedSort(e){const t=(0,r._isColumnsSortingCoupledToGroup)(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){const t=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();const i=null!=e.getColDef().field||!!e.getColDef().valueGetter?[e,...t]:t,n=i[0].getSort();return i.every((e=>e.getSort()==n))?n:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t,i){let n=0;e.addManagedListeners(t,{movingChanged:()=>{n=(new Date).getTime()}}),i&&e.addManagedElementListeners(i,{click:e=>{const i=t.isMoving(),r=(new Date).getTime();i||r-n<50||this.progressSortFromEvent(t,e)}});const r=()=>{const i=t.getSort();if(e.addOrRemoveCssClass("ag-header-cell-sorted-asc","asc"===i),e.addOrRemoveCssClass("ag-header-cell-sorted-desc","desc"===i),e.addOrRemoveCssClass("ag-header-cell-sorted-none",!i),t.getColDef().showRowGroup){const i=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(t),n=i?.every((e=>t.getSort()==e.getSort())),r=!n;e.addOrRemoveCssClass("ag-header-cell-sorted-mixed",r)}};e.addManagedEventListeners({sortChanged:r,columnRowGroupChanged:r})}initCol(e){const{sort:t,initialSort:i,sortIndex:n,initialSortIndex:r}=e.colDef;void 0!==t?"asc"!==t&&"desc"!==t||(e.sort=t):"asc"!==i&&"desc"!==i||(e.sort=i),void 0!==n?null!==n&&(e.sortIndex=n):null!==r&&(e.sortIndex=r)}updateColSort(e,t,i){void 0!==t&&("desc"===t||"asc"===t?this.setColSort(e,t,i):this.setColSort(e,void 0,i))}setColSort(e,t,i){e.sort!==t&&(e.sort=t,e.dispatchColEvent("sortChanged",i)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new o.SortIndicatorComp(e)}getSortIndicatorSelector(){return o.SortIndicatorSelector}}t.SortService=s},2760:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellCustomStyleFeature=void 0;const n=i(8731),r=i(7274),o=i(8729);class s extends n.BeanStub{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const{column:e,cellComp:t}=this,i=e.colDef,n=i.cellClassRules,r=this.getCellClassParams(e,i);(0,o.processClassRules)(this.beans.expressionSvc,n===this.cellClassRules?void 0:this.cellClassRules,n,r,(e=>t.addOrRemoveCssClass(e,!0)),(e=>t.addOrRemoveCssClass(e,!1))),this.cellClassRules=n}applyUserStyles(){const e=this.column,t=e.colDef,i=t.cellStyle;if(!i)return;let n;if("function"==typeof i){n=i(this.getCellClassParams(e,t))}else n=i;n&&this.cellComp.setUserStyles(n)}applyClassesFromColDef(){const{column:e,cellComp:t}=this,i=e.colDef,n=this.getCellClassParams(e,i);this.staticClasses.forEach((e=>t.addOrRemoveCssClass(e,!1)));const r=this.beans.cellStyles.getStaticCellClasses(i,n);this.staticClasses=r,r.forEach((e=>t.addOrRemoveCssClass(e,!0)))}getCellClassParams(e,t){const{value:i,rowNode:n}=this.cellCtrl;return(0,r._addGridCommonParams)(this.beans.gos,{value:i,data:n.data,node:n,colDef:t,column:e,rowIndex:n.rowIndex})}}t.CellCustomStyleFeature=s},9330:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellStyleService=void 0;const n=i(8731),r=i(2760),o=i(8729);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,i,n){(0,o.processClassRules)(this.beans.expressionSvc,void 0,e.cellClassRules,t,i,n),this.processStaticCellClasses(e,t,i)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let n;if("function"==typeof i){n=i(t)}else n=i;return"string"==typeof n&&(n=[n]),n||[]}createCellCustomStyleFeature(e,t){return new r.CellCustomStyleFeature(e,t)}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach((e=>{i(e)}))}}t.CellStyleService=s},9360:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutFeature=t.LayoutCssClasses=void 0;const n=i(8731);t.LayoutCssClasses={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"};class r extends n.BeanStub{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),i={autoHeight:"autoHeight"===e,normal:"normal"===e,print:"print"===e},n=i.autoHeight?t.LayoutCssClasses.AUTO_HEIGHT:i.print?t.LayoutCssClasses.PRINT:t.LayoutCssClasses.NORMAL;this.view.updateLayoutClasses(n,i)}}t.LayoutFeature=r},7648:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowStyleService=t.calculateRowLevel=void 0;const n=i(8731),r=i(7274),o=i(8729);t.calculateRowLevel=function(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0};class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){const i=this.gos,n=t=>{"string"==typeof t?e.push(t):Array.isArray(t)&&t.forEach((t=>e.push(t)))},r=i.get("rowClass");r&&n(r);const o=i.getCallback("getRowClass");if(o){n(o({data:t.data,node:t,rowIndex:t.rowIndex}))}}preProcessRowClassRules(e,t){this.processRowClassRules(t,(t=>{e.push(t)}),(()=>{}))}processRowClassRules(e,t,i){const{gos:n,expressionSvc:s}=this.beans,a=(0,r._addGridCommonParams)(n,{data:e.data,node:e,rowIndex:e.rowIndex});(0,o.processClassRules)(s,void 0,n.get("rowClassRules"),a,t,i)}processStylesFromGridOptions(e){const t=this.gos,i=t.get("rowStyle"),n=t.getCallback("getRowStyle");let r;if(n){r=n({data:e.data,node:e,rowIndex:e.rowIndex})}if(r||i)return Object.assign({},i,r)}}t.RowStyleService=s},8594:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RowStyleModule=t.CellStyleModule=void 0;const n=i(7205),r=i(9330),o=i(7648);t.CellStyleModule={moduleName:"CellStyle",version:n.VERSION,beans:[r.CellStyleService]},t.RowStyleModule={moduleName:"RowStyle",version:n.VERSION,beans:[o.RowStyleService]}},8729:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.processClassRules=void 0,t.processClassRules=function(e,t,i,n,r,o){if(null==i&&null==t)return;const s={},a={},l=(e,t)=>{e.split(" ").forEach((e=>{""!=e.trim()&&t(e)}))};if(i){const t=Object.keys(i);for(let r=0;r<t.length;r++){const o=t[r],c=i[o];let d;"string"==typeof c?d=!e||e.evaluate(c,n):"function"==typeof c&&(d=c(n)),l(o,(e=>{d?s[e]=!0:a[e]=!0}))}}t&&o&&Object.keys(t).forEach((e=>l(e,(e=>{s[e]||(a[e]=!0)})))),o&&Object.keys(a).forEach(o),Object.keys(s).forEach(r)}},7711:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SyncService=void 0;const n=i(3146),r=i(8731),o=i(2043);class s extends r.BeanStub{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",(e=>this.setColumnDefs(e)))}start(){this.beans.ctrlsSvc.whenReady(this,(()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()}))}setColumnsAndData(e){const{colModel:t,rowModel:i}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),i.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),(0,o._logIfDebug)(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t)return this.waitingForColumns?(this.waitingForColumns=!1,void this.setColumnsAndData(t)):void this.beans.colModel.setColumnDefs(t,(0,n._convertColumnEventSourceType)(e.source))}}t.SyncService=s},6607:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PartImpl=t.defaultModeName=t.createPart=void 0;const n=i(8951);t.createPart=e=>new o(e),t.defaultModeName="$default";let r=0;class o{constructor({feature:e,params:i,modeParams:n={},css:r,cssImports:o}){this.feature=e,this.css=r,this.cssImports=o,this.modeParams={[t.defaultModeName]:{...n[t.defaultModeName]??{},...i??{}},...n}}use(e,t){let i=this._inject;if(null==i){let{css:e}=this;if(e){const t=`ag-theme-${this.feature??"part"}-${++r}`;"function"==typeof e&&(e=e()),e=`:where(.${t}) {\n${e}\n}\n`;for(const t of this.cssImports??[])e=`@import url(${JSON.stringify(t)});\n${e}`;i={css:e,class:t}}else i=!1;this._inject=i}return i&&e&&(0,n._injectGlobalCSS)(i.css,e,i.class,t,1),!!i&&i.class}}t.PartImpl=o},9621:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeImpl=t.createTheme=t._asThemeImpl=t.FORCE_LEGACY_THEMES=void 0;const n=i(7764),r=i(6607),o=i(405),s=i(8951),a=i(2475),l=i(1697),c=i(113),d=i(7845);t.FORCE_LEGACY_THEMES=!1;t._asThemeImpl=e=>{if(!(e instanceof u))throw new Error("theme is not an object created by createTheme");return e};t.createTheme=()=>(new u).withPart(a.buttonStyleQuartz).withPart(l.columnDropStyleBordered);class u{constructor(e=[]){this.parts=e}withPart(e){return"function"==typeof e&&(e=e()),e instanceof r.PartImpl?new u([...this.parts,e]):((0,n._logPreInitErr)(259,{part:e},"Invalid part"),this)}withoutPart(e){return this.withPart((0,r.createPart)({feature:e}))}withParams(e,t=r.defaultModeName){return this.withPart((0,r.createPart)({modeParams:{[t]:e}}))}_startUse({styleContainer:e,cssLayer:i,loadThemeGoogleFonts:n}){if(s.IS_SSR)return;if(t.FORCE_LEGACY_THEMES)return;g(),(0,s._injectCoreAndModuleCSS)(e,i);const r=p(this);if(r.length>0)for(const e of r)n&&v(e);for(const t of this.parts)t.use(e,i)}_getCssClass(){return t.FORCE_LEGACY_THEMES?"ag-theme-quartz":this._cssClassCache??(this._cssClassCache=h(this.parts).map((e=>e.use(void 0,void 0))).filter(Boolean).join(" "))}_getModeParams(){let e=this._paramsCache;if(!e){const t={[r.defaultModeName]:{...o.coreDefaults}};for(const e of h(this.parts))for(const i of Object.keys(e.modeParams)){const n=e.modeParams[i];if(n){const e=t[i]??(t[i]={}),o=new Set;for(const t of Object.keys(n)){const i=n[t];void 0!==i&&(e[t]=i,o.add(t))}if(i===r.defaultModeName)for(const e of Object.keys(t)){const i=t[e];if(e!==r.defaultModeName)for(const e of o)delete i[e]}}}this._paramsCache=e=t}return e}_getPerGridCss(e){const t="##SELECTOR##";let i=this._paramsCssCache;if(!i){let e="",o="";const s=this._getModeParams();for(const t of Object.keys(s)){const i=s[t];if(t!==r.defaultModeName){const i=`:where([data-ag-theme-mode="${"object"==typeof CSS?CSS.escape(t):t}"]) & {\n`;e+=i,o+=i}for(const t of Object.keys(i).sort()){const r=i[t],s=(0,c.paramValueToCss)(t,r);if(!1===s)(0,n._error)(107,{key:t,value:r});else{const i=(0,d.paramToVariableName)(t),n=i.replace("--ag-","--ag-inherited-");e+=`\t${i}: var(${n}, ${s});\n`,o+=`\t${n}: var(${i});\n`}}t!==r.defaultModeName&&(e+="}\n",o+="}\n")}let a=`${t} {\n${e}}\n`;a+=`:has(> ${t}):not(${t}) {\n${o}}\n`,this._paramsCssCache=i=a}return i.replaceAll(t,`:where(.${e})`)}}t.ThemeImpl=u;const h=e=>{const t=new Map;for(const i of e)t.set(i.feature,i);const i=[];for(const n of e)n.feature&&t.get(n.feature)!==n||i.push(n);return i},p=e=>{const t=new Set,i=e=>{if(Array.isArray(e))e.forEach(i);else{const i=e?.googleFont;"string"==typeof i&&t.add(i)}};return Object.values(e._getModeParams()).flatMap((e=>Object.values(e))).forEach(i),Array.from(t).sort()};let f=!1;const g=()=>{if(!f){f=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},m=new Set,v=async e=>{m.add(e);const t=`@import url('https://${b}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');\n`;(0,s._injectGlobalCSS)(t,document.head,`googleFont:${e}`,void 0,0)},b="fonts.googleapis.com"},405:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.coreDefaults=t.defaultLightColorSchemeParams=t.coreCSS=void 0;const n=i(7845);var r=i(9550);Object.defineProperty(t,"coreCSS",{enumerable:!0,get:function(){return r.coreCSS}}),t.defaultLightColorSchemeParams={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:(0,n.foregroundMix)(.15),chromeBackgroundColor:(0,n.foregroundBackgroundMix)(.02),browserColorScheme:"light"},t.coreDefaults={...t.defaultLightColorSchemeParams,textColor:n.foregroundColor,accentColor:"#2196f3",invalidColor:"#e02525",wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:n.backgroundColor,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},subtleTextColor:{ref:"textColor",mix:.5},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:n.accentColor,rangeSelectionBackgroundColor:(0,n.accentMix)(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:(0,n.accentMix)(.5),rangeHeaderHighlightColor:(0,n.foregroundHeaderBackgroundMix)(.08),rowNumbersSelectedColor:(0,n.accentMix)(.5),rowHoverColor:(0,n.accentMix)(.08),columnHoverColor:(0,n.accentMix)(.05),selectedRowBackgroundColor:(0,n.accentMix)(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},oddRowBackgroundColor:n.backgroundColor,borderRadius:4,wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",spacing:8,fontSize:14,rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},dragAndDropImageBackgroundColor:n.backgroundColor,dragAndDropImageBorder:!0,dragAndDropImageShadow:{ref:"popupShadow"},dragHandleColor:(0,n.foregroundMix)(.7),focusShadow:{spread:3,color:(0,n.accentMix)(.5)},headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},iconSize:16,iconColor:"inherit",iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:(0,n.foregroundMix)(.1),iconButtonActiveColor:n.accentColor,iconButtonActiveBackgroundColor:(0,n.accentMix)(.28),iconButtonActiveIndicatorColor:n.accentColor,toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:n.accentColor,toggleButtonOffBackgroundColor:(0,n.foregroundBackgroundMix)(.3),toggleButtonSwitchBackgroundColor:n.backgroundColor,toggleButtonSwitchInset:2,menuBorder:{color:(0,n.foregroundMix)(.2)},menuBackgroundColor:(0,n.foregroundBackgroundMix)(.03),menuTextColor:(0,n.foregroundBackgroundMix)(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:(0,n.foregroundMix)(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:n.accentColor},cellEditingShadow:{ref:"cardShadow"},dialogBorder:{color:(0,n.foregroundMix)(.2)},panelBackgroundColor:n.backgroundColor,panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipTextColor:{ref:"textColor"},tooltipBorder:!0,columnDropCellBackgroundColor:(0,n.foregroundMix)(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:(0,n.foregroundMix)(.13)},selectCellBackgroundColor:(0,n.foregroundMix)(.07),selectCellBorder:{color:(0,n.foregroundMix)(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:(0,n.foregroundMix)(.15),statusBarLabelColor:n.foregroundColor,statusBarLabelFontWeight:500,statusBarValueColor:n.foregroundColor,statusBarValueFontWeight:500}},9550:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.coreCSS=void 0,t.coreCSS=':where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none}}:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value,.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom,.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}.ag-floating-bottom{border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-large-text-input{display:block}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row-hover.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{opacity:1}50%{opacity:.4}to{opacity:1}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-chart,.ag-dnd-ghost,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab}.ag-list-item,.ag-virtual-list-item{height:var(--ag-list-item-height)}.ag-virtual-list-item{position:absolute;width:100%}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-list-item{align-items:center;display:flex;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly,.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-column-select-column-readonly{&.ag-icon-grip,.ag-icon-grip{opacity:.35}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-accent-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto}.ag-menu,.ag-resizer{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-resizer{pointer-events:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}'},8951:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._unregisterGridUsingThemingAPI=t._registerGridUsingThemingAPI=t._injectCoreAndModuleCSS=t._injectGlobalCSS=t.IS_SSR=void 0;const n=i(2132),r=i(9621),o=i(9550);t.IS_SSR="object"!=typeof window||!window?.document?.fonts?.forEach;let s=new WeakMap;t._injectGlobalCSS=(e,i,n,o,a)=>{if(t.IS_SSR)return;if(r.FORCE_LEGACY_THEMES)return;o&&(e=`@layer ${CSS.escape(o)} { ${e} }`);let l=s.get(i);if(l||(l=[],s.set(i,l)),l.find((t=>t.css===e)))return;const c=document.createElement("style");c.dataset.agGlobalCss=n,c.textContent=e;const d={css:e,el:c,priority:a};let u;for(const e of l){if(e.priority>a)break;u=e}if(u){u.el.insertAdjacentElement("afterend",c);const e=l.indexOf(u);l.splice(e+1,0,d)}else i.insertBefore(c,i.querySelector(":not(title, meta)")),l.push(d)};t._injectCoreAndModuleCSS=(e,i)=>{(0,t._injectGlobalCSS)(o.coreCSS,e,"core",i,0),Array.from((0,n._getAllRegisteredModules)()).sort(((e,t)=>e.moduleName.localeCompare(t.moduleName))).forEach((n=>n.css?.forEach((r=>(0,t._injectGlobalCSS)(r,e,`module-${n.moduleName}`,i,0)))))};const a=new Set;t._registerGridUsingThemingAPI=e=>{a.add(e)};t._unregisterGridUsingThemingAPI=e=>{if(a.delete(e),0===a.size){s=new WeakMap;for(const e of document.head.querySelectorAll("style[data-ag-global-css]"))e.remove()}}},7753:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.buttonStyleBaseCSS=void 0,t.buttonStyleBaseCSS=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}"},2475:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.buttonStyleBalham=t.buttonStyleAlpine=t.buttonStyleQuartz=t.buttonStyleBase=void 0;const n=i(6607),r=i(7845),o=i(7753),s={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}};t.buttonStyleBase=(0,n.createPart)({feature:"buttonStyle",params:s,css:o.buttonStyleBaseCSS});t.buttonStyleQuartz=(0,n.createPart)({feature:"buttonStyle",params:{...s,buttonBackgroundColor:r.backgroundColor,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:r.accentColor}},css:o.buttonStyleBaseCSS});t.buttonStyleAlpine=(0,n.createPart)({feature:"buttonStyle",params:{...s,buttonBackgroundColor:r.backgroundColor,buttonBorder:{color:r.accentColor},buttonFontWeight:600,buttonTextColor:r.accentColor,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBackgroundColor:r.accentColor,buttonActiveTextColor:r.backgroundColor},css:o.buttonStyleBaseCSS});t.buttonStyleBalham=(0,n.createPart)({feature:"buttonStyle",params:{...s,buttonBorder:{color:r.foregroundColor,width:2,style:"outset"},buttonActiveBorder:{color:r.foregroundColor,width:2,style:"inset"},buttonBackgroundColor:(0,r.foregroundBackgroundMix)(.07),buttonHoverBackgroundColor:r.backgroundColor,buttonVerticalPadding:{calc:"spacing * 0.5"}},css:o.buttonStyleBaseCSS})},3071:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkboxStyleDefaultCSS=void 0,t.checkboxStyleDefaultCSS='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}'},8265:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.checkboxStyleDefault=void 0;const n=i(6607),r=i(7845),o=i(3071);t.checkboxStyleDefault=(0,n.createPart)({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:r.backgroundColor,checkboxUncheckedBorderColor:(0,r.foregroundBackgroundMix)(.3),checkboxCheckedBackgroundColor:r.accentColor,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:r.backgroundColor,checkboxIndeterminateBackgroundColor:(0,r.foregroundBackgroundMix)(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:r.backgroundColor,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:o.checkboxStyleDefaultCSS})},8689:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.colorSchemeVariable=t.colorSchemeDarkBlue=t.colorSchemeDarkWarm=t.colorSchemeDark=t.colorSchemeLightCold=t.colorSchemeLightWarm=t.colorSchemeLight=void 0;const n=i(6607),r=i(405),o=i(7845);t.colorSchemeLight=(0,n.createPart)({feature:"colorScheme",params:r.defaultLightColorSchemeParams});t.colorSchemeLightWarm=(0,n.createPart)({feature:"colorScheme",params:{...r.defaultLightColorSchemeParams,foregroundColor:"#000000de",borderColor:"#60300026",chromeBackgroundColor:"#60300005"}});t.colorSchemeLightCold=(0,n.createPart)({feature:"colorScheme",params:{...r.defaultLightColorSchemeParams,foregroundColor:"#000",chromeBackgroundColor:"#f3f8f8"}});const s=()=>({...r.defaultLightColorSchemeParams,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:(0,o.foregroundBackgroundMix)(.05),rowHoverColor:(0,o.accentMix)(.15),selectedRowBackgroundColor:(0,o.accentMix)(.2),menuBackgroundColor:(0,o.foregroundBackgroundMix)(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",checkboxUncheckedBorderColor:(0,o.foregroundBackgroundMix)(.4),toggleButtonOffBackgroundColor:(0,o.foregroundBackgroundMix)(.4)});t.colorSchemeDark=(0,n.createPart)({feature:"colorScheme",params:s()});const a=()=>({...s(),backgroundColor:"#1f2836"});t.colorSchemeDarkWarm=(0,n.createPart)({feature:"colorScheme",params:{backgroundColor:"hsl(29, 10%, 17%)",foregroundColor:"#FFF",browserColorScheme:"dark"}});t.colorSchemeDarkBlue=(0,n.createPart)({feature:"colorScheme",params:a()});t.colorSchemeVariable=(0,n.createPart)({feature:"colorScheme",params:r.defaultLightColorSchemeParams,modeParams:{light:r.defaultLightColorSchemeParams,dark:s(),"dark-blue":a()}})},7941:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.columnDropStyleBorderedCSS=void 0,t.columnDropStyleBorderedCSS=".ag-column-drop-vertical-empty-message{align-items:center;border:1px dashed;border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}"},5350:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.columnDropStylePlainCSS=void 0,t.columnDropStylePlainCSS=".ag-column-drop-vertical-empty-message{color:var(--ag-subtle-text-color);font-size:calc(var(--ag-font-size) - 1px);font-weight:600;padding-top:var(--ag-spacing)}:where(.ag-ltr) .ag-column-drop-vertical-empty-message{padding-left:calc(var(--ag-icon-size) + var(--ag-spacing) + var(--ag-widget-horizontal-spacing));padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-column-drop-vertical-empty-message{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-icon-size) + var(--ag-spacing) + var(--ag-widget-horizontal-spacing))}"},1697:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.columnDropStylePlain=t.columnDropStyleBordered=void 0;const n=i(6607),r=i(7941),o=i(5350);t.columnDropStyleBordered=(0,n.createPart)({feature:"columnDropStyle",css:r.columnDropStyleBorderedCSS});t.columnDropStylePlain=(0,n.createPart)({feature:"columnDropStyle",css:o.columnDropStylePlainCSS})},8897:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.iconSetAlpineCSS=void 0,t.iconSetAlpineCSS=".ag-icon-aggregation:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24 6H8v2l8 8-8 8v2h16v-2H11l8-8-8-8h13z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-arrows:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.515 11.171 2.687 16l4.828 4.829-1.414 1.414L-.142 16l6.243-6.243zm16.97 0 1.414-1.414L32.142 16l-6.243 6.243-1.414-1.414L29.313 16zM16.028 13.2l2.829 2.828-2.829 2.829-2.828-2.829zm-4.857 11.285L16 29.313l4.829-4.828 1.414 1.414L16 32.142l-6.243-6.243zm0-16.97L9.757 6.101 16-.142l6.243 6.243-1.414 1.414L16 2.687z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-asc:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333 5.332 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-cancel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16 2.667A13.32 13.32 0 0 0 2.667 16c0 7.373 5.96 13.333 13.333 13.333S29.333 23.373 29.333 16 23.373 2.667 16 2.667m6.667 18.12-1.88 1.88L16 17.88l-4.787 4.787-1.88-1.88L14.12 16l-4.787-4.787 1.88-1.88L16 14.12l4.787-4.787 1.88 1.88L17.88 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-chart:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Echart%3C/title%3E%3Cg fill='%23000' fill-rule='nonzero'%3E%3Cpath d='M14 7h4v18h-4zM8 17h4v8H8zM20 13h4v12h-4z'/%3E%3C/g%3E%3C/svg%3E\")}.ag-icon-color-picker:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M23.907 17.587 10.574 4.254l-1.88 1.88 3.173 3.173-8.28 8.28 10.16 10.16zm-16.547 0 6.387-6.387 6.387 6.387zm18.387 2s-2.667 2.893-2.667 4.667c0 1.467 1.2 2.667 2.667 2.667s2.667-1.2 2.667-2.667c0-1.773-2.667-4.667-2.667-4.667' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-columns:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M26 25H6V7h20zM12 11H8v12h4zm6 0h-4v12h4zm6 12V11h-4v12z' style='fill-rule:nonzero' transform='translate(0 -1)'/%3E%3C/svg%3E\")}.ag-icon-contracted:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m12 6 10 10-10 10-2-2 8-8-8-8z'/%3E%3C/svg%3E\")}.ag-icon-copy:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M22 1.333H6A2.675 2.675 0 0 0 3.333 4v18.667H6V4h16zm4 5.334H11.333a2.675 2.675 0 0 0-2.667 2.667v18.667c0 1.467 1.2 2.667 2.667 2.667H26c1.467 0 2.667-1.2 2.667-2.667V9.334c0-1.467-1.2-2.667-2.667-2.667M26 28H11.333V9.333H26z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-cross:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M15.984 13.894 27.05 2.828l2.122 2.122-11.066 11.066 11.066 11.066-2.122 2.12-11.066-11.066L4.918 29.202l-2.12-2.12 11.066-11.066L2.798 4.95l2.12-2.122z'/%3E%3C/svg%3E\")}.ag-icon-csv:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='M.688-.226a.2.2 0 0 1-.017.074.28.28 0 0 1-.145.14.412.412 0 0 1-.234.013.28.28 0 0 1-.202-.168.468.468 0 0 1-.04-.19q0-.086.025-.155a.319.319 0 0 1 .182-.191.4.4 0 0 1 .134-.025q.087 0 .155.035a.3.3 0 0 1 .104.085.17.17 0 0 1 .036.097.06.06 0 0 1-.018.044.06.06 0 0 1-.042.019.06.06 0 0 1-.042-.013.2.2 0 0 1-.031-.046.2.2 0 0 0-.066-.079.16.16 0 0 0-.095-.027.17.17 0 0 0-.142.068.3.3 0 0 0-.053.193.4.4 0 0 0 .023.139.2.2 0 0 0 .067.083.2.2 0 0 0 .1.027q.063 0 .106-.031a.2.2 0 0 0 .065-.091.2.2 0 0 1 .023-.046q.014-.018.044-.018a.06.06 0 0 1 .044.018.06.06 0 0 1 .019.045' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 7.122 25.977)'/%3E%3Cpath d='M.622-.215a.2.2 0 0 1-.033.117.23.23 0 0 1-.098.081.4.4 0 0 1-.153.029.34.34 0 0 1-.175-.04.23.23 0 0 1-.079-.077.17.17 0 0 1-.031-.093q0-.027.019-.045a.06.06 0 0 1 .046-.019.06.06 0 0 1 .039.014.1.1 0 0 1 .027.044.3.3 0 0 0 .03.057q.015.023.044.038.03.015.076.015.065 0 .105-.03a.09.09 0 0 0 .04-.075.08.08 0 0 0-.022-.058.14.14 0 0 0-.056-.034 1 1 0 0 0-.092-.025.7.7 0 0 1-.129-.042.2.2 0 0 1-.083-.066.17.17 0 0 1-.03-.104q0-.058.032-.105a.2.2 0 0 1 .093-.07.4.4 0 0 1 .144-.025q.066 0 .114.016a.3.3 0 0 1 .08.044.2.2 0 0 1 .046.057q.015.03.015.058a.07.07 0 0 1-.018.046.06.06 0 0 1-.046.021q-.025 0-.038-.012a.2.2 0 0 1-.028-.041.2.2 0 0 0-.047-.063Q.387-.625.326-.625a.15.15 0 0 0-.09.025q-.035.024-.035.059 0 .021.012.037a.1.1 0 0 0 .032.027.4.4 0 0 0 .111.036q.06.015.11.031.048.018.083.042a.2.2 0 0 1 .054.062.2.2 0 0 1 .019.091' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 13.339 25.977)'/%3E%3Cpath d='m.184-.633.162.48.163-.483q.013-.038.019-.053a.062.062 0 0 1 .061-.039q.018 0 .034.009a.1.1 0 0 1 .025.025q.009.015.009.031L.654-.64l-.007.025-.009.024-.173.468-.019.051a.2.2 0 0 1-.021.042.1.1 0 0 1-.033.03.1.1 0 0 1-.049.012.1.1 0 0 1-.05-.011A.1.1 0 0 1 .26-.03a.2.2 0 0 1-.021-.042L.22-.123.05-.587.041-.612.033-.638.03-.662q0-.025.02-.046a.07.07 0 0 1 .05-.02q.037 0 .053.023.015.023.031.072' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 18.94 25.977)'/%3E%3C/svg%3E\")}.ag-icon-cut:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M13.775 15.198 3.835 2.945a1.501 1.501 0 0 1 2.33-1.89l14.997 18.488A6.003 6.003 0 0 1 29.657 25c0 3.311-2.688 6-6 6s-6-2.689-6-6c0-1.335.437-2.569 1.176-3.566l-3.127-3.855-3.001 3.7A5.97 5.97 0 0 1 14 25c0 3.311-2.689 6-6 6s-6-2.689-6-6a6.003 6.003 0 0 1 8.315-5.536zm9.882 6.702a3.1 3.1 0 0 0-3.1 3.1c0 1.711 1.389 3.1 3.1 3.1s3.1-1.389 3.1-3.1-1.389-3.1-3.1-3.1M8 21.95a3.05 3.05 0 1 0 .001 6.101A3.05 3.05 0 0 0 8 21.95m9.63-11.505 1.932 2.381 8.015-9.881a1.5 1.5 0 0 0-2.329-1.89z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-desc:before,.ag-icon-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m26.667 16-1.88-1.88-7.453 7.44V5.333h-2.667V21.56l-7.44-7.453L5.334 16l10.667 10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-excel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='m.052-.139.16-.234-.135-.208a.4.4 0 0 1-.028-.052.1.1 0 0 1-.01-.042.05.05 0 0 1 .018-.037.07.07 0 0 1 .045-.016q.03 0 .047.018a1 1 0 0 1 .047.066l.107.174.115-.174.024-.038.019-.026.021-.015a.1.1 0 0 1 .027-.005.06.06 0 0 1 .044.016.05.05 0 0 1 .018.039q0 .033-.038.089l-.141.211.152.234a.3.3 0 0 1 .03.051.1.1 0 0 1 .009.038.1.1 0 0 1-.008.031.1.1 0 0 1-.024.023.1.1 0 0 1-.034.008.1.1 0 0 1-.035-.008.1.1 0 0 1-.023-.022L.427-.067.301-.265l-.134.204-.022.034-.016.019a.1.1 0 0 1-.022.015.1.1 0 0 1-.03.005.06.06 0 0 1-.044-.016.06.06 0 0 1-.017-.047q0-.036.036-.088' style='fill-rule:nonzero' transform='matrix(17.82892 0 0 16.50777 10.371 25.928)'/%3E%3C/svg%3E\")}.ag-icon-expanded:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M20 26 10 16 20 6l2 2-8 8 8 8z'/%3E%3C/svg%3E\")}.ag-icon-eye-slash:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye-slash%3C/title%3E%3Cpath fill='%23000' fill-rule='nonzero' d='M8.95 10.364 7 8.414 8.414 7l2.32 2.32A13.2 13.2 0 0 1 16.5 8c5.608 0 10.542 3.515 12.381 8.667L29 17l-.119.333a13 13 0 0 1-4.255 5.879l1.466 1.466-1.414 1.414-1.754-1.753A13.2 13.2 0 0 1 16.5 26c-5.608 0-10.542-3.515-12.381-8.667L4 17l.119-.333a13 13 0 0 1 4.83-6.303m1.445 1.445A11.02 11.02 0 0 0 6.148 17c1.646 4.177 5.728 7 10.352 7 1.76 0 3.441-.409 4.94-1.146l-1.878-1.878A5.06 5.06 0 0 1 16.5 22c-2.789 0-5.05-2.239-5.05-5 0-1.158.398-2.223 1.065-3.07zm1.855-.974 1.794 1.795A5.07 5.07 0 0 1 16.5 12c2.789 0 5.05 2.239 5.05 5 0 .9-.24 1.745-.661 2.474l2.305 2.306A11 11 0 0 0 26.852 17c-1.646-4.177-5.728-7-10.352-7-1.495 0-2.933.295-4.25.835'/%3E%3C/svg%3E\")}.ag-icon-eye:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16.5 23c4.624 0 8.706-2.823 10.352-7-1.646-4.177-5.728-7-10.352-7s-8.706 2.823-10.352 7c1.646 4.177 5.728 7 10.352 7M4.119 15.667C5.958 10.515 10.892 7 16.5 7s10.542 3.515 12.381 8.667L29 16l-.119.333C27.042 21.485 22.108 25 16.5 25S5.958 21.485 4.119 16.333L4 16zM16.5 21c2.789 0 5.049-2.239 5.049-5s-2.26-5-5.049-5-5.049 2.239-5.049 5 2.26 5 5.049 5' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-filter:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m28 8-8 8v5l-6 6V16L6 8V6h22zM9 8l7 7v7l2-2v-5l7-7z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-first:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24.273 22.12 18.153 16l6.12-6.12L22.393 8l-8 8 8 8zM7.727 8h2.667v16H7.727z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-group:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M14 7v1H9V7zm0-3v1H5.001V4zm-7 7H5v-1h2zm0-3H5V7h2zM3 5H1V4h2zm11 5v1H9v-1zm-7 4H5v-1h2zm7-1v1H9v-1z' style='fill-rule:nonzero' transform='matrix(2 0 0 2 0 -2)'/%3E%3C/svg%3E\")}.ag-icon-last:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m7.727 9.88 6.12 6.12-6.12 6.12L9.607 24l8-8-8-8zM21.607 8h2.667v16h-2.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M26.667 14.667H10.44l7.453-7.453L16 5.334 5.333 16.001 16 26.668l1.88-1.88-7.44-7.453h16.227z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-linked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M5.2 16a4.136 4.136 0 0 1 4.133-4.133h5.333V9.334H9.333a6.67 6.67 0 0 0-6.667 6.667 6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.333A4.136 4.136 0 0 1 5.2 16.002zm5.467 1.333h10.667v-2.667H10.667zm12-8h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133 4.136 4.136 0 0 1-4.133 4.133h-5.333v2.533h5.333a6.67 6.67 0 0 0 6.667-6.667 6.67 6.67 0 0 0-6.667-6.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-loading:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M17 29h-2v-8h2zm-3.586-9L7 26.414 5.586 25 12 18.586zm13 5L25 26.414 18.586 20 20 18.586zM29 17h-8v-2h8zm-18 0H3v-2h8zm2.414-5L12 13.414 5.586 7 7 5.586zm13-5L20 13.414 18.586 12 25 5.586zM17 11h-2V3h2z' style='fill-rule:nonzero' transform='translate(-3.692 -3.692)scale(1.23077)'/%3E%3C/svg%3E\")}.ag-icon-maximize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M14 30H2V18h2.828v7.05l8.254-8.252 2.12 2.12-8.252 8.254H14zm4-28h12v12h-2.828V6.95l-8.254 8.252-2.12-2.12 8.252-8.254H18z'/%3E%3C/svg%3E\")}.ag-icon-menu:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M20 13H0v-2h20zm0-6H0V5h20zm0-6H0v-2h20z' style='fill-rule:nonzero' transform='translate(6 9)'/%3E%3C/svg%3E\")}.ag-icon-menu-alt:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M16 19a3 3 0 1 0 0-6 3 3 0 0 0 0 6M16 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6M16 27a3 3 0 1 0 0-6 3 3 0 0 0 0 6'/%3E%3C/svg%3E\")}.ag-icon-minimize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M2 18h12v12h-2.828v-7.05l-8.254 8.252-2.12-2.12 8.252-8.254H2zm28-4H18V2h2.828v7.05L29.082.798l2.12 2.12-8.252 8.254H30z'/%3E%3C/svg%3E\")}.ag-icon-minus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658H7.901v-2.658z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-next:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M10.94 6 9.06 7.88 17.167 16 9.06 24.12 10.94 26l10-10z' style='fill-rule:nonzero' transform='translate(1)'/%3E%3C/svg%3E\")}.ag-icon-none:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enone%3C/title%3E%3Cg fill='%23000' fill-rule='nonzero'%3E%3Cpath d='M23.708 14.645 16 6.939l-7.708 7.706 1.416 1.416L16 9.767l6.292 6.294zM23.708 20.355 16 28.061l-7.708-7.706 1.416-1.416L16 25.233l6.292-6.294z'/%3E%3C/g%3E%3C/svg%3E\")}.ag-icon-not-allowed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M16 2.667C8.64 2.667 2.667 8.64 2.667 16S8.64 29.333 16 29.333 29.333 23.36 29.333 16 23.36 2.667 16 2.667M5.333 16c0-5.893 4.773-10.667 10.667-10.667 2.467 0 4.733.84 6.533 2.253L7.586 22.533A10.54 10.54 0 0 1 5.333 16M16 26.667c-2.467 0-4.733-.84-6.533-2.253L24.414 9.467A10.54 10.54 0 0 1 26.667 16c0 5.893-4.773 10.667-10.667 10.667' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-paste:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M25.334 4H19.76C19.2 2.453 17.733 1.333 16 1.333S12.8 2.453 12.24 4H6.667A2.675 2.675 0 0 0 4 6.667V28c0 1.467 1.2 2.667 2.667 2.667h18.667c1.467 0 2.667-1.2 2.667-2.667V6.667C28.001 5.2 26.801 4 25.334 4M16 4c.733 0 1.333.6 1.333 1.333s-.6 1.333-1.333 1.333-1.333-.6-1.333-1.333S15.267 4 16 4m9.333 24H6.666V6.667h2.667v4h13.333v-4h2.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-pin:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m10.78 19.777-4.668-4.666s.032-1 .67-1.87c1.366-1.86 4.052-1.96 6.056-1.572l3.158-3.108c-.7-2.342 3.352-5.046 3.352-5.046l9.166 9.168q-.334.447-.67.894c-1.074 1.426-2.538 2.63-4.272 2.338l-3.32 3.218c.046.344.042.03.118 1.152.144 2.13-.64 4.324-2.632 5.34l-.746.364-4.798-4.798-7.292 7.294-1.416-1.416zm8.24-13.672c-.688.568-1.416 1.45-1.024 2.072l.49.722-4.986 4.988c-1.988-.506-4.346-.636-5.156.614l9.02 9.032q.14-.099.272-.21c1.226-1.08.764-3.04.498-4.9l4.79-4.79s1.47.938 2.936-.776l-6.79-6.79q-.026.019-.05.038' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-pivot:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M25.128 2.002c2.56.096 4.772 2.292 4.87 4.87a712 712 0 0 1 0 18.256c-.096 2.56-2.292 4.772-4.87 4.87a712 712 0 0 1-18.256 0c-2.558-.096-4.772-2.29-4.87-4.87a712 712 0 0 1 0-18.256c.096-2.56 2.292-4.772 4.87-4.87a712 712 0 0 1 18.256 0m2.966 7.954H9.892v18.136c5.086.13 10.18.098 15.264-.096 1.48-.094 2.746-1.35 2.84-2.84.192-5.064.226-10.134.098-15.2M3.968 24.1q.015.528.036 1.056c.094 1.484 1.354 2.746 2.84 2.84l1.012.036V24.1zM22 15.414l-.292.294-1.416-1.416L23 11.586l2.708 2.706-1.416 1.416-.292-.294v3.592c-.032 2.604-2.246 4.892-4.872 4.992L15.414 24l.294.292-1.416 1.416L11.586 23l2.706-2.708 1.416 1.416-.322.32c3.372.03 6.578-.164 6.614-3.034zM3.88 18.038c.002 1.346.012 2.694.038 4.04h3.938v-4.04zm.05-6.062a681 681 0 0 0-.044 4.042h3.97v-4.042zm5.962-7.99Q8.449 3.999 7.006 4c-1.57.02-2.946 1.348-3.004 2.922q-.02 1.517-.042 3.034h3.896v-2.02h2.036zm14.244-.016v3.966h3.898q-.017-.546-.038-1.092c-.094-1.48-1.35-2.746-2.84-2.84q-.51-.019-1.02-.034m-8.14-.054q-2.035.022-4.07.048v3.972h4.07zm6.106.008a213 213 0 0 0-4.07-.022v4.034h4.07z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-plus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658h-6.77v6.77h-2.658v-6.77h-6.77v-2.658h6.77v-6.77h2.658v6.77z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-previous:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M21.94 7.88 20.06 6l-10 10 10 10 1.88-1.88L13.833 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m16 5.333-1.88 1.88 7.44 7.453H5.333v2.667H21.56l-7.44 7.453 1.88 1.88 10.667-10.667L16 5.332z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-save:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M15.708 2.355 8 10.061.292 2.355 1.708.939 8 7.233 14.292.939z' style='fill-rule:nonzero' transform='translate(8 14)'/%3E%3Cpath d='M5 26h22v2H5zM15 4h2v18h-2z'/%3E%3C/svg%3E\")}.ag-icon-small-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.334 10.667 16 21.334l8.667-10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-small-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M21.333 7.334 10.666 16l10.667 8.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-small-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M10.667 24.666 21.334 16 10.667 7.333z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-small-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.334 21.333 16 10.666l8.667 10.667z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-tick:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M11.586 22.96 27.718 6.828 29.84 8.95 11.586 27.202 2.4 18.016l2.12-2.122z'/%3E%3C/svg%3E\")}.ag-icon-tree-closed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m11.94 6-1.88 1.88L18.167 16l-8.107 8.12L11.94 26l10-10z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-tree-indeterminate:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6 13.5h20v3H6z'/%3E%3C/svg%3E\")}.ag-icon-tree-open:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M24.12 9.06 16 17.167 7.88 9.06 6 10.94l10 10 10-10z' style='fill-rule:nonzero' transform='translate(0 1)'/%3E%3C/svg%3E\")}.ag-icon-unlinked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M22.667 9.333h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133c0 1.907-1.307 3.507-3.08 3.973l1.947 1.947c2.173-1.107 3.667-3.32 3.667-5.92a6.67 6.67 0 0 0-6.667-6.667zm-1.334 5.334h-2.92l2.667 2.667h.253zM2.667 5.693 6.814 9.84A6.65 6.65 0 0 0 2.667 16a6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.334a4.136 4.136 0 0 1-4.133-4.133c0-2.12 1.613-3.867 3.68-4.093l2.76 2.76h-.973v2.667h3.64l3.027 3.027v2.307h2.307l5.347 5.333 1.68-1.68L4.362 4.002 2.669 5.695z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333 5.332 16z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-grip:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M8 24H6v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zM8 18H6v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zM8 12H6V8h2zm6 0h-2V8h2zm6 0h-2V8h2zm6 0h-2V8h2z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-settings:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M30 8h-4.1c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2h14.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30zm-9 4c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3M2 24h4.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30v-2H15.9c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2zm9-4c1.7 0 3 1.3 3 3s-1.3 3-3 3-3-1.3-3-3 1.3-3 3-3'/%3E%3C/svg%3E\")}"},9580:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.iconSetAlpine=void 0;const n=i(6607),r=i(8897);t.iconSetAlpine=(0,n.createPart)({feature:"iconSet",css:r.iconSetAlpineCSS})},3817:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.iconSetBalhamCSS=void 0,t.iconSetBalhamCSS=".ag-icon-aggregation:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eaggregation%3C/title%3E%3Cpath d='M25.128 2.002c2.56.096 4.772 2.292 4.87 4.87a712 712 0 0 1 0 18.256c-.096 2.56-2.292 4.772-4.87 4.87a712 712 0 0 1-18.256 0c-2.558-.096-4.772-2.29-4.87-4.87a712 712 0 0 1 0-18.256c.096-2.56 2.292-4.772 4.87-4.87a712 712 0 0 1 18.256 0M7.006 4c-1.57.02-2.946 1.348-3.004 2.922-.078 6.078-.23 12.16.002 18.234.094 1.484 1.354 2.746 2.84 2.84 6.1.232 12.212.232 18.312 0 1.48-.094 2.746-1.35 2.84-2.84.232-6.1.232-12.212 0-18.312-.094-1.48-1.35-2.746-2.84-2.84C19.11 3.774 13.056 4 7.006 4M22 12h-2v-2h-8v.092c.056 1.352 3.426 2.598 4.472 4.404.682 1.174.438 2.754-.572 3.72C14.29 19.618 12 20.924 12 22h8v-2h2v4H10c0-1.586-.098-3.304 1.016-4.314 1.904-1.632 4.89-3.108 3.54-4.42-1.918-1.68-4.464-2.936-4.554-5.12L10 8h12z'/%3E%3C/svg%3E\")}.ag-icon-arrows:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Earrows%3C/title%3E%3Cpath d='m6.414 17 2.294 2.292-1.416 1.416L2.586 16l4.706-4.708 1.416 1.416L6.414 15H15V6.414l-2.292 2.294-1.416-1.416L16 2.586l4.708 4.706-1.416 1.416L17 6.414V15h8.586l-2.294-2.292 1.416-1.416L29.414 16l-4.706 4.708-1.416-1.416L25.586 17H17v8.586l2.292-2.294 1.416 1.416L16 29.414l-4.708-4.706 1.416-1.416L15 25.586V17z'/%3E%3C/svg%3E\")}.ag-icon-asc:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Easc%3C/title%3E%3Cpath d='m15 10.621-4.292 4.294-1.416-1.416L16 6.793l6.708 6.706-1.416 1.416L17 10.621v14.586h-2z'/%3E%3C/svg%3E\")}.ag-icon-cancel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecancel%3C/title%3E%3Cpath d='M16 4C9.378 4 4 9.378 4 16s5.378 12 12 12 12-5.378 12-12S22.622 4 16 4m0 2c5.52 0 10 4.48 10 10s-4.48 10-10 10S6 21.52 6 16 10.48 6 16 6m0 8.586 5.292-5.294 1.416 1.416L17.414 16l5.294 5.292-1.416 1.416L16 17.414l-5.292 5.294-1.416-1.416L14.586 16l-5.294-5.292 1.416-1.416z'/%3E%3C/svg%3E\")}.ag-icon-chart:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Echart%3C/title%3E%3Cpath d='M6.667 12.267h4v13.067h-4zm7.466-5.6h3.733v18.667h-3.733zM21.6 17.333h3.733v8H21.6z'/%3E%3C/svg%3E\")}.ag-icon-color-picker:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecolor-picker%3C/title%3E%3Cpath d='M23.907 17.587 10.574 4.254l-1.88 1.88 3.173 3.173-8.28 8.28 10.16 10.16zm-16.547 0 6.387-6.387 6.387 6.387H7.361zm18.387 2s-2.667 2.893-2.667 4.667c0 1.467 1.2 2.667 2.667 2.667s2.667-1.2 2.667-2.667c0-1.773-2.667-4.667-2.667-4.667'/%3E%3C/svg%3E\")}.ag-icon-columns:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecolumns%3C/title%3E%3Cpath d='M14 25h-2V7h2zm6 0h-2V7h2zm6 0h-2V7h2zM8 25H6V7h2z'/%3E%3C/svg%3E\")}.ag-icon-contracted:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Econtracted%3C/title%3E%3Cpath d='m21.061 16-8.706 8.708-1.416-1.416L18.233 16l-7.294-7.292 1.416-1.416z'/%3E%3C/svg%3E\")}.ag-icon-copy:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecopy%3C/title%3E%3Cpath d='M21.929 27.999h-7.828a5.09 5.09 0 0 1-5.086-5.086v-9.812a5.087 5.087 0 0 1 5.086-5.086h7.828a5.09 5.09 0 0 1 5.086 5.086v9.812a5.087 5.087 0 0 1-5.086 5.086m.16-17.984h-8.088a2.94 2.94 0 0 0-2.938 2.938v10.132a2.94 2.94 0 0 0 2.938 2.938h8.088a2.94 2.94 0 0 0 2.936-2.938V12.953a2.94 2.94 0 0 0-2.936-2.938M7.041 26.013h-2.05a4 4 0 0 1-.006-.228V9.065a5.07 5.07 0 0 1 5.064-5.064h12.812q.069 0 .134.002v2.012H9.915a2.876 2.876 0 0 0-2.874 2.874z'/%3E%3C/svg%3E\")}.ag-icon-cross:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='4 4 24 24'%3E%3Ctitle%3Ecross%3C/title%3E%3Cpath d='m16 14.586 5.292-5.294 1.416 1.416L17.414 16l5.294 5.292-1.416 1.416L16 17.414l-5.292 5.294-1.416-1.416L14.586 16l-5.294-5.292 1.416-1.416z'/%3E%3C/svg%3E\")}.ag-icon-csv:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='M.688-.226a.2.2 0 0 1-.017.074.28.28 0 0 1-.145.14.412.412 0 0 1-.234.013.28.28 0 0 1-.202-.168.468.468 0 0 1-.04-.19q0-.086.025-.155a.319.319 0 0 1 .182-.191.4.4 0 0 1 .134-.025q.087 0 .155.035a.3.3 0 0 1 .104.085.17.17 0 0 1 .036.097.06.06 0 0 1-.018.044.06.06 0 0 1-.042.019.06.06 0 0 1-.042-.013.2.2 0 0 1-.031-.046.2.2 0 0 0-.066-.079.16.16 0 0 0-.095-.027.17.17 0 0 0-.142.068.3.3 0 0 0-.053.193.4.4 0 0 0 .023.139.2.2 0 0 0 .067.083.2.2 0 0 0 .1.027q.063 0 .106-.031a.2.2 0 0 0 .065-.091.2.2 0 0 1 .023-.046q.014-.018.044-.018a.06.06 0 0 1 .044.018.06.06 0 0 1 .019.045' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 7.122 25.977)'/%3E%3Cpath d='M.622-.215a.2.2 0 0 1-.033.117.23.23 0 0 1-.098.081.4.4 0 0 1-.153.029.34.34 0 0 1-.175-.04.23.23 0 0 1-.079-.077.17.17 0 0 1-.031-.093q0-.027.019-.045a.06.06 0 0 1 .046-.019.06.06 0 0 1 .039.014.1.1 0 0 1 .027.044.3.3 0 0 0 .03.057q.015.023.044.038.03.015.076.015.065 0 .105-.03a.09.09 0 0 0 .04-.075.08.08 0 0 0-.022-.058.14.14 0 0 0-.056-.034 1 1 0 0 0-.092-.025.7.7 0 0 1-.129-.042.2.2 0 0 1-.083-.066.17.17 0 0 1-.03-.104q0-.058.032-.105a.2.2 0 0 1 .093-.07.4.4 0 0 1 .144-.025q.066 0 .114.016a.3.3 0 0 1 .08.044.2.2 0 0 1 .046.057q.015.03.015.058a.07.07 0 0 1-.018.046.06.06 0 0 1-.046.021q-.025 0-.038-.012a.2.2 0 0 1-.028-.041.2.2 0 0 0-.047-.063Q.387-.625.326-.625a.15.15 0 0 0-.09.025q-.035.024-.035.059 0 .021.012.037a.1.1 0 0 0 .032.027.4.4 0 0 0 .111.036q.06.015.11.031.048.018.083.042a.2.2 0 0 1 .054.062.2.2 0 0 1 .019.091' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 13.339 25.977)'/%3E%3Cpath d='m.184-.633.162.48.163-.483q.013-.038.019-.053a.062.062 0 0 1 .061-.039q.018 0 .034.009a.1.1 0 0 1 .025.025q.009.015.009.031L.654-.64l-.007.025-.009.024-.173.468-.019.051a.2.2 0 0 1-.021.042.1.1 0 0 1-.033.03.1.1 0 0 1-.049.012.1.1 0 0 1-.05-.011A.1.1 0 0 1 .26-.03a.2.2 0 0 1-.021-.042L.22-.123.05-.587.041-.612.033-.638.03-.662q0-.025.02-.046a.07.07 0 0 1 .05-.02q.037 0 .053.023.015.023.031.072' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 18.94 25.977)'/%3E%3C/svg%3E\")}.ag-icon-cut:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M14.703 15.096 6.215 4.719a1 1 0 1 1 1.548-1.267l13.058 15.965A5.001 5.001 0 0 1 28 23.916a5 5 0 0 1-4.999 4.999 5 5 0 0 1-4.999-4.999 4.98 4.98 0 0 1 1.23-3.283l-3.238-3.958-3.272 4.001a4.98 4.98 0 0 1 1.265 3.323 5 5 0 0 1-4.999 4.999 5 5 0 0 1-4.999-4.999 5 5 0 0 1 7.13-4.522zM8.991 20.8a3.1 3.1 0 0 0-3.1 3.1c0 1.711 1.389 3.1 3.1 3.1s3.1-1.389 3.1-3.1-1.389-3.1-3.1-3.1M23 20.8a3.1 3.1 0 0 0-3.1 3.1c0 1.711 1.389 3.1 3.1 3.1s3.1-1.389 3.1-3.1-1.389-3.1-3.1-3.1m-5.723-8.852 1.292 1.579 7.205-8.808a1 1 0 0 0-1.548-1.267z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-desc:before,.ag-icon-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Edesc%3C/title%3E%3Cpath d='m17 21.379 4.292-4.294 1.416 1.416L16 25.207l-6.708-6.706 1.416-1.416L15 21.379V6.793h2z'/%3E%3C/svg%3E\")}.ag-icon-excel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='m.052-.139.16-.234-.135-.208a.4.4 0 0 1-.028-.052.1.1 0 0 1-.01-.042.05.05 0 0 1 .018-.037.07.07 0 0 1 .045-.016q.03 0 .047.018a1 1 0 0 1 .047.066l.107.174.115-.174.024-.038.019-.026.021-.015a.1.1 0 0 1 .027-.005.06.06 0 0 1 .044.016.05.05 0 0 1 .018.039q0 .033-.038.089l-.141.211.152.234a.3.3 0 0 1 .03.051.1.1 0 0 1 .009.038.1.1 0 0 1-.008.031.1.1 0 0 1-.024.023.1.1 0 0 1-.034.008.1.1 0 0 1-.035-.008.1.1 0 0 1-.023-.022L.427-.067.301-.265l-.134.204-.022.034-.016.019a.1.1 0 0 1-.022.015.1.1 0 0 1-.03.005.06.06 0 0 1-.044-.016.06.06 0 0 1-.017-.047q0-.036.036-.088' style='fill-rule:nonzero' transform='matrix(17.82892 0 0 16.50777 10.371 25.928)'/%3E%3C/svg%3E\")}.ag-icon-expanded:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eexpanded%3C/title%3E%3Cpath d='M21.061 8.708 13.767 16l7.294 7.292-1.416 1.416L10.939 16l8.706-8.708z'/%3E%3C/svg%3E\")}.ag-icon-eye-slash:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye-slash%3C/title%3E%3Cpath d='M9.304 7.89a15.2 15.2 0 0 1 6.404-1.638c.294-.002.292-.002.584 0 5.956.174 11.328 4.088 13.62 9.748 0 0-1.318 3.178-3.224 5.174a13.6 13.6 0 0 1-2.226 1.874L26.414 25 25 26.414l-2.336-2.336C17.866 26.396 11.776 26.15 7.36 22.96a14.9 14.9 0 0 1-4.168-4.612c-.41-.71-.694-1.336-1.104-2.348 0 0 .898-2.218 2.002-3.718a14.6 14.6 0 0 1 3.442-3.334L5.586 7 7 5.586zm-.3 2.528c-2.038 1.344-3.708 3.246-4.724 5.508L4.248 16c2.46 5.762 9.622 9.064 15.63 7.15q.688-.219 1.342-.516l-.912-.912a6.96 6.96 0 0 1-4.19 1.394c-3.862 0-7-3.136-7-7 0-1.57.52-3.022 1.394-4.19zm14.032 11.204a13.25 13.25 0 0 0 4.684-5.548l.032-.074c-1.984-4.646-6.834-7.798-12.006-7.748-1.712.05-3.386.458-4.922 1.158l1.102 1.102a6.97 6.97 0 0 1 4.192-1.396 7.003 7.003 0 0 1 5.606 11.192zm-11.09-8.262a5.003 5.003 0 0 0 6.928 6.928zm8.342 5.514a5.002 5.002 0 0 0-6.928-6.928z'/%3E%3C/svg%3E\")}.ag-icon-eye:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye%3C/title%3E%3Cpath d='M16.292 6.32c5.956.174 11.328 4.086 13.62 9.746 0 0-1.318 3.18-3.224 5.176-4.862 5.088-13.534 5.97-19.328 1.784a14.9 14.9 0 0 1-4.168-4.612c-.41-.71-.694-1.336-1.104-2.348 0 0 .898-2.216 2.002-3.716 2.678-3.64 7.03-5.896 11.618-6.03.294-.004.292-.004.584 0m-.546 2c-4.896.142-9.458 3.202-11.466 7.672l-.032.074c2.46 5.762 9.622 9.066 15.63 7.152 3.458-1.102 6.342-3.738 7.842-7.076l.032-.076C25.768 11.42 20.918 8.27 15.746 8.32m.254.946c3.754 0 6.8 3.048 6.8 6.8 0 3.754-3.046 6.8-6.8 6.8s-6.8-3.046-6.8-6.8c0-3.752 3.046-6.8 6.8-6.8m5 6.768V16c0-2.76-2.24-5-5-5s-5 2.24-5 5v.066c0 2.76 2.24 5 5 5s5-2.24 5-5z'/%3E%3C/svg%3E\")}.ag-icon-filter:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Efilter%3C/title%3E%3Cpath d='M26 8.184c-.066 2.658-4.058 5.154-6.742 7.974a1.05 1.05 0 0 0-.258.682v3.66L13 25c0-2.74.066-5.482-.002-8.222a1.05 1.05 0 0 0-.256-.62C10.026 13.304 6.06 10.61 6 8.184V6h20zM8 8c0 .304.06.612.258.842 2.716 2.854 6.682 5.548 6.742 7.974V21l2-1.5v-2.684c.066-2.658 4.058-5.154 6.742-7.974.198-.23.258-.538.258-.842z'/%3E%3C/svg%3E\")}.ag-icon-first:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Efirst%3C/title%3E%3Cpath d='M24.354 8.708 17.06 16l7.294 7.292-1.416 1.416L14.232 16l8.706-8.708zM9.646 8v16h-2V8z'/%3E%3C/svg%3E\")}.ag-icon-group:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Egroup%3C/title%3E%3Cpath d='M25.128 2.002c2.56.096 4.772 2.292 4.87 4.87a712 712 0 0 1 0 18.256c-.096 2.56-2.292 4.772-4.87 4.87a712 712 0 0 1-18.256 0c-2.558-.096-4.772-2.29-4.87-4.87a712 712 0 0 1 0-18.256c.096-2.56 2.292-4.772 4.87-4.87a712 712 0 0 1 18.256 0M7.006 4c-1.57.02-2.946 1.348-3.004 2.922-.078 6.078-.23 12.16.002 18.234.094 1.484 1.354 2.746 2.84 2.84 6.1.232 12.212.232 18.312 0 1.48-.094 2.746-1.35 2.84-2.84.232-6.1.232-12.212 0-18.312-.094-1.48-1.35-2.746-2.84-2.84C19.11 3.774 13.056 4 7.006 4M14 21h-4v-2h4zm12 0H16v-2h10zm-12-4h-4v-2h4zm12 0H16v-2h10zm-16-4H6v-2h4zm16 0H12v-2h14z'/%3E%3C/svg%3E\")}.ag-icon-last:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Elast%3C/title%3E%3Cpath d='m17.768 16-8.706 8.708-1.416-1.416L14.94 16 7.646 8.708l1.416-1.416zm6.586 8h-2V8h2z'/%3E%3C/svg%3E\")}.ag-icon-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eleft%3C/title%3E%3Cpath d='m17.621 11-2 2h12.586v6H15.621l2 2-4.414 4.414L3.793 16l9.414-9.414zm-11 5 6.586 6.586L14.793 21l-4-4h15.414v-2H10.793l4-4-1.586-1.586z'/%3E%3C/svg%3E\")}.ag-icon-linked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Elinked%3C/title%3E%3Cpath d='M17.138 13.418a1.03 1.03 0 0 0-.298.658s.125.096.226.178c1.372 1.114 2.033 3.039 1.582 4.796a4.7 4.7 0 0 1-1.205 2.123c-1.145 1.151-2.296 2.294-3.445 3.441-1.241 1.232-3.185 1.691-4.864 1.105-1.546-.54-2.756-1.938-3.048-3.572-.267-1.496.246-3.108 1.319-4.186l.578-.578-.03-.092a10.5 10.5 0 0 1-.452-2.3v-.005c-.776.775-1.621 1.489-2.275 2.396-1.817 2.522-1.643 6.323.706 8.669 1.813 1.811 4.708 2.462 7.171 1.517a6.75 6.75 0 0 0 2.336-1.518l3.427-3.424c1.939-1.954 2.533-5.126 1.294-7.674a6.8 6.8 0 0 0-2.071-2.481l-.003-.002zM21.265 4a6.8 6.8 0 0 0-4.734 1.964l-3.427 3.424c-1.961 1.977-2.52 5.092-1.32 7.619a6.8 6.8 0 0 0 2.098 2.537l.003.002c.32-.32.643-.637.96-.96.167-.172.27-.401.286-.64l-.204-.167c-1.603-1.287-2.215-3.68-1.316-5.616a4.7 4.7 0 0 1 .918-1.32c1.145-1.151 2.296-2.294 3.445-3.441 1.239-1.23 3.178-1.694 4.864-1.105 1.83.639 3.16 2.498 3.12 4.493a4.8 4.8 0 0 1-1.391 3.265l-.578.578.03.092c.235.743.387 1.519.452 2.3v.005c.732-.731 1.521-1.406 2.162-2.244 1.192-1.559 1.643-3.651 1.204-5.575a6.8 6.8 0 0 0-3.98-4.703 6.8 6.8 0 0 0-2.529-.506h-.061z'/%3E%3C/svg%3E\")}.ag-icon-loading:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eloading%3C/title%3E%3Cpath d='M17 29h-2v-8h2zm-3.586-9L7 26.414 5.586 25 12 18.586zm13 5L25 26.414 18.586 20 20 18.586zM29 17h-8v-2h8zm-18 0H3v-2h8zm2.414-5L12 13.414 5.586 7 7 5.586zm13-5L20 13.414 18.586 12 25 5.586zM17 11h-2V3h2z'/%3E%3C/svg%3E\")}.ag-icon-maximize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='3 3 26 26'%3E%3Ctitle%3Emaximize%3C/title%3E%3Cpath d='m7.54 17.4.1 6.98 6.96.1-2.24-2.24L16 18.6 13.4 16l-3.64 3.64zm16.92-2.8-.1-6.98-6.96-.1 2.24 2.24L16 13.4l2.6 2.6 3.64-3.64z'/%3E%3C/svg%3E\")}.ag-icon-menu:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Emenu%3C/title%3E%3Cpath d='M26 23H6v-2h20zm0-6H6v-2h20zm0-6H6V9h20z'/%3E%3C/svg%3E\")}.ag-icon-menu-alt:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none'%3E%3Cpath fill='%23000' d='M16 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4m0-7a2 2 0 1 0 0-4 2 2 0 0 0 0 4m0 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4'/%3E%3C/svg%3E\")}.ag-icon-minimize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='3 3 26 26'%3E%3Ctitle%3Eminimize%3C/title%3E%3Cpath d='m14.8 24.26-.1-6.96-6.96-.1 2.24 2.24-3.64 3.64 2.6 2.6 3.64-3.64zm2.4-16.52.1 6.96 6.96.1-2.24-2.24 3.64-3.64-2.6-2.6-3.64 3.64z'/%3E%3C/svg%3E\")}.ag-icon-minus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.515 7.515c-4.683 4.682-4.683 12.288 0 16.97 4.682 4.683 12.288 4.683 16.97 0 4.683-4.682 4.683-12.288 0-16.97-4.682-4.683-12.288-4.683-16.97 0m1.414 1.414c3.903-3.903 10.239-3.903 14.142 0s3.903 10.239 0 14.142-10.239 3.903-14.142 0-3.903-10.239 0-14.142m-1.414 6.07h16.97v2.002H7.515z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-next:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enext%3C/title%3E%3Cpath d='m21.061 16-8.706 8.708-1.416-1.416L18.233 16l-7.294-7.292 1.416-1.416z'/%3E%3C/svg%3E\")}.ag-icon-none:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enone%3C/title%3E%3Cpath d='m10.044 21.258 4.478-4.198L16 18.444 9 25l-7-6.556 1.478-1.384 4.478 4.198V7h2.088zm14 3.742h-2.088V10.742l-4.478 4.198L16 13.556 23 7q3.5 3.28 7 6.556l-1.478 1.384-4.478-4.198z'/%3E%3C/svg%3E\")}.ag-icon-not-allowed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enot-allowed%3C/title%3E%3Cpath d='M16.186 3.646c8.188.154 14.898 9.796 11.17 17.78-3.298 7.066-13.932 9.374-19.848 3.87-3.9-3.632-5.076-9.896-2.684-14.708 2.082-4.19 6.588-6.974 11.362-6.942m-.298 1.998c-6.922.132-12.578 8.308-9.33 15.052 3.342 6.934 15.246 7.646 18.932 0 3.076-6.386-1.988-15.1-9.602-15.052m7.596 6.422c2.864 5.33-1.744 13.186-8.306 12.536a8.6 8.6 0 0 1-3.232-.998l-1.266-.706L22.778 10.8q.351.633.706 1.266m-9.422 10.276c3.296 1.028 7.246-1.006 8.216-4.418a6.6 6.6 0 0 0-.056-3.742zm2.104-14.696a8.8 8.8 0 0 1 3.936 1.038l1.266.706L9.27 21.488c-3.018-5.41-.99-13.37 6.318-13.834q.289-.01.578-.008m-.31 2c-4.06.154-7.23 4.614-6.03 8.46l8.16-8.16a6.8 6.8 0 0 0-2.13-.3'/%3E%3C/svg%3E\")}.ag-icon-paste:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epaste%3C/title%3E%3Cpath d='M20 6.5c0-1-1-3-4-3s-4 2-4 3H8c-2.21 0-4 1.79-4 4v14c0 2.21 1.79 4 4 4h16c2.21 0 4-1.79 4-4v-14c0-2.21-1.79-4-4-4zm-4 .546c.734 0 1.334.572 1.334 1.272S16.734 9.59 16 9.59s-1.334-.572-1.334-1.272.6-1.272 1.334-1.272M24 26.5H8a2 2 0 0 1-2-2v-14a2 2 0 0 1 2-2h2v4h12v-4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2'/%3E%3C/svg%3E\")}.ag-icon-pin:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epin%3C/title%3E%3Cpath d='m10.78 19.777-4.668-4.666s.032-1 .67-1.87c1.366-1.86 4.052-1.96 6.056-1.572l3.158-3.108c-.7-2.342 3.352-5.046 3.352-5.046l9.166 9.168q-.334.447-.67.894c-1.074 1.426-2.538 2.63-4.272 2.338l-3.32 3.218c.046.344.042.03.118 1.152.144 2.13-.64 4.324-2.632 5.34l-.746.364-4.798-4.798-7.292 7.294-1.416-1.416zm8.24-13.672c-.688.568-1.416 1.45-1.024 2.072l.49.722-4.986 4.988c-1.988-.506-4.346-.636-5.156.614l9.02 9.032q.14-.099.272-.21c1.226-1.08.764-3.04.498-4.9l4.79-4.79s1.47.938 2.936-.776l-6.79-6.79q-.026.019-.05.038'/%3E%3C/svg%3E\")}.ag-icon-pivot:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epivot%3C/title%3E%3Cpath d='M25.128 2.002c2.56.096 4.772 2.292 4.87 4.87a712 712 0 0 1 0 18.256c-.096 2.56-2.292 4.772-4.87 4.87a712 712 0 0 1-18.256 0c-2.558-.096-4.772-2.29-4.87-4.87a712 712 0 0 1 0-18.256c.096-2.56 2.292-4.772 4.87-4.87a712 712 0 0 1 18.256 0m2.966 7.954H9.892v18.136c5.086.13 10.18.098 15.264-.096 1.48-.094 2.746-1.35 2.84-2.84.192-5.064.226-10.134.098-15.2M3.968 24.1q.015.528.036 1.056c.094 1.484 1.354 2.746 2.84 2.84l1.012.036V24.1zM22 15.414l-.292.294-1.416-1.416L23 11.586l2.708 2.706-1.416 1.416-.292-.294v3.592c-.032 2.604-2.246 4.892-4.872 4.992L15.414 24l.294.292-1.416 1.416L11.586 23l2.706-2.708 1.416 1.416-.322.32c3.372.03 6.578-.164 6.614-3.034zM3.88 18.038c.002 1.346.012 2.694.038 4.04h3.938v-4.04zm.05-6.062a681 681 0 0 0-.044 4.042h3.97v-4.042zm5.962-7.99Q8.449 3.999 7.006 4c-1.57.02-2.946 1.348-3.004 2.922q-.02 1.517-.042 3.034h3.896v-2.02h2.036zm14.244-.016v3.966h3.898q-.017-.546-.038-1.092c-.094-1.48-1.35-2.746-2.84-2.84q-.51-.019-1.02-.034m-8.14-.054q-2.035.022-4.07.048v3.972h4.07zm6.106.008c-1.358-.022-2.714-.026-4.07-.022v4.034h4.07z'/%3E%3C/svg%3E\")}.ag-icon-plus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M7.515 7.515c-4.683 4.682-4.683 12.288 0 16.97 4.682 4.683 12.288 4.683 16.97 0 4.683-4.682 4.683-12.288 0-16.97-4.682-4.683-12.288-4.683-16.97 0m1.414 1.414c3.903-3.903 10.239-3.903 14.142 0s3.903 10.239 0 14.142-10.239 3.903-14.142 0-3.903-10.239 0-14.142M15 15l-.001-7.485h2.002L17 15l7.485-.001v2.002L17 17l.001 7.485h-2.002L15 17l-7.485.001v-2.002z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-previous:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eprevious%3C/title%3E%3Cpath d='M21.061 8.708 13.767 16l7.294 7.292-1.416 1.416L10.939 16l8.706-8.708z'/%3E%3C/svg%3E\")}.ag-icon-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eright%3C/title%3E%3Cpath d='m28.207 16-9.414 9.414L14.379 21l2-2H3.793v-6h12.586l-2-2 4.414-4.414zm-11-5 4 4H5.793v2h15.414l-4 4 1.586 1.586L25.379 16l-6.586-6.586z'/%3E%3C/svg%3E\")}.ag-icon-save:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esave%3C/title%3E%3Cpath d='M25.333 16v9.333H6.666V16H3.999v9.333C3.999 26.8 5.199 28 6.666 28h18.667C26.8 28 28 26.8 28 25.333V16zm-8 .893 3.453-3.44 1.88 1.88L15.999 22l-6.667-6.667 1.88-1.88 3.453 3.44V4h2.667v12.893z'/%3E%3C/svg%3E\")}.ag-icon-small-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-down%3C/title%3E%3Cpath d='M24.708 12.355 16 21.061l-8.708-8.706 1.416-1.416L16 18.233l7.292-7.294z'/%3E%3C/svg%3E\")}.ag-icon-small-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-left%3C/title%3E%3Cpath d='M21.061 8.708 13.767 16l7.294 7.292-1.416 1.416L10.939 16l8.706-8.708z'/%3E%3C/svg%3E\")}.ag-icon-small-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-right%3C/title%3E%3Cpath d='m21.061 16-8.706 8.708-1.416-1.416L18.233 16l-7.294-7.292 1.416-1.416z'/%3E%3C/svg%3E\")}.ag-icon-small-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-up%3C/title%3E%3Cpath d='m24.708 19.645-1.416 1.416L16 13.767l-7.292 7.294-1.416-1.416L16 10.939z'/%3E%3C/svg%3E\")}.ag-icon-tick:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etick%3C/title%3E%3Cpath d='M24.708 10.855 13 22.561l-5.708-5.706 1.416-1.416L13 19.733 23.292 9.439z'/%3E%3C/svg%3E\")}.ag-icon-tree-closed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-closed%3C/title%3E%3Cpath d='m21.061 16-8.706 8.708-1.416-1.416L18.233 16l-7.294-7.292 1.416-1.416z'/%3E%3C/svg%3E\")}.ag-icon-tree-indeterminate:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-indeterminate%3C/title%3E%3Cpath d='M6 15h20v2H6z'/%3E%3C/svg%3E\")}.ag-icon-tree-open:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-open%3C/title%3E%3Cpath d='M24.708 12.355 16 21.061l-8.708-8.706 1.416-1.416L16 18.233l7.292-7.294z'/%3E%3C/svg%3E\")}.ag-icon-unlinked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eunlinked%3C/title%3E%3Cpath d='M5.35 3.999a.2.2 0 0 0-.14.058c-.388.38-.768.768-1.152 1.152a.21.21 0 0 0-.002.288c7.459 7.506 14.965 14.965 22.447 22.447a.21.21 0 0 0 .288.002q.576-.574 1.151-1.151a.21.21 0 0 0 .002-.288C20.484 19.002 12.979 11.542 5.497 4.06a.2.2 0 0 0-.146-.061zm.611 12.548c-1.933 1.939-2.538 5.119-1.289 7.688a6.79 6.79 0 0 0 4.891 3.672 6.82 6.82 0 0 0 5.893-1.866l1.984-1.984-1.438-1.438-1.986 1.986c-1.486 1.476-3.993 1.81-5.834.629a4.73 4.73 0 0 1-2.024-2.853 4.76 4.76 0 0 1 1.241-4.393l1.986-1.986-1.438-1.438-1.984 1.984zM21.273 3.999a6.78 6.78 0 0 0-4.727 1.963l-1.984 1.984L16 9.384l1.985-1.985a4.74 4.74 0 0 1 2.776-1.338c1.974-.224 4.045.926 4.845 2.834.712 1.699.329 3.778-1.004 5.12L22.616 16l1.439 1.438q1-1 2-2c2.012-2.031 2.557-5.368 1.112-7.982-1.144-2.07-3.432-3.441-5.834-3.459h-.061z'/%3E%3C/svg%3E\")}.ag-icon-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Easc%3C/title%3E%3Cpath d='m15 10.621-4.292 4.294-1.416-1.416L16 6.793l6.708 6.706-1.416 1.416L17 10.621v14.586h-2z'/%3E%3C/svg%3E\")}.ag-icon-grip:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Egrip%3C/title%3E%3Cpath d='M8 24H6v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zM8 18H6v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zm6 0h-2v-4h2zM8 12H6V8h2zm6 0h-2V8h2zm6 0h-2V8h2zm6 0h-2V8h2z'/%3E%3C/svg%3E\")}.ag-icon-settings:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M30 8h-4.1c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2h14.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30zm-9 4c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3M2 24h4.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30v-2H15.9c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2zm9-4c1.7 0 3 1.3 3 3s-1.3 3-3 3-3-1.3-3-3 1.3-3 3-3'/%3E%3C/svg%3E\")}"},5572:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.iconSetBalham=void 0;const n=i(6607),r=i(3817);t.iconSetBalham=(0,n.createPart)({feature:"iconSet",css:r.iconSetBalhamCSS})},6407:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.iconSetQuartzRegular=t.iconSetQuartzLight=t.iconSetQuartzBold=t.iconSetQuartz=t.iconOverrides=t.iconSetMaterial=t.iconSetAlpine=void 0;var n=i(9580);Object.defineProperty(t,"iconSetAlpine",{enumerable:!0,get:function(){return n.iconSetAlpine}});var r=i(8900);Object.defineProperty(t,"iconSetMaterial",{enumerable:!0,get:function(){return r.iconSetMaterial}});var o=i(5867);Object.defineProperty(t,"iconOverrides",{enumerable:!0,get:function(){return o.iconOverrides}});var s=i(3692);Object.defineProperty(t,"iconSetQuartz",{enumerable:!0,get:function(){return s.iconSetQuartz}}),Object.defineProperty(t,"iconSetQuartzBold",{enumerable:!0,get:function(){return s.iconSetQuartzBold}}),Object.defineProperty(t,"iconSetQuartzLight",{enumerable:!0,get:function(){return s.iconSetQuartzLight}}),Object.defineProperty(t,"iconSetQuartzRegular",{enumerable:!0,get:function(){return s.iconSetQuartzRegular}})},7545:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.iconSetMaterialCSS=void 0,t.iconSetMaterialCSS=".ag-icon-aggregation:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eaggregation%3C/title%3E%3Cpath d='M24 5.333H8V8l8.667 8L8 24v2.667h16v-4h-9.333L21.334 16l-6.667-6.667H24z'/%3E%3C/svg%3E\")}.ag-icon-arrows:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Earrows%3C/title%3E%3Cpath d='M13.333 11.556h5.333V8h3.556L16 1.778 9.778 8h3.556zm-1.777 1.777H8V9.777l-6.222 6.222L8 22.221v-3.556h3.556zM30.222 16 24 9.778v3.556h-3.556v5.333H24v3.556l6.222-6.222zm-11.555 4.444h-5.333V24H9.778L16 30.222 22.222 24h-3.556z'/%3E%3C/svg%3E\")}.ag-icon-asc:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Easc%3C/title%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333z'/%3E%3C/svg%3E\")}.ag-icon-cancel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecancel%3C/title%3E%3Cpath d='M16 2.667C8.627 2.667 2.667 8.627 2.667 16S8.627 29.333 16 29.333 29.333 23.373 29.333 16 23.373 2.667 16 2.667m6.667 18.12-1.88 1.88L16 17.88l-4.787 4.787-1.88-1.88L14.12 16l-4.787-4.787 1.88-1.88L16 14.12l4.787-4.787 1.88 1.88L17.88 16z'/%3E%3C/svg%3E\")}.ag-icon-chart:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Echart%3C/title%3E%3Cpath d='M6.667 12.267h4v13.067h-4zm7.466-5.6h3.733v18.667h-3.733zM21.6 17.333h3.733v8H21.6z'/%3E%3C/svg%3E\")}.ag-icon-color-picker:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecolor-picker%3C/title%3E%3Cpath d='M23.907 17.587 10.574 4.254l-1.88 1.88 3.173 3.173-8.28 8.28 10.16 10.16zm-16.547 0 6.387-6.387 6.387 6.387H7.361zm18.387 2s-2.667 2.893-2.667 4.667c0 1.467 1.2 2.667 2.667 2.667s2.667-1.2 2.667-2.667c0-1.773-2.667-4.667-2.667-4.667'/%3E%3C/svg%3E\")}.ag-icon-columns:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecolumns%3C/title%3E%3Cpath d='M5.333 10.667h5.333V5.334H5.333zm8 16h5.333v-5.333h-5.333zm-8 0h5.333v-5.333H5.333zm0-8h5.333v-5.333H5.333zm8 0h5.333v-5.333h-5.333zm8-13.334v5.333h5.333V5.333zm-8 5.334h5.333V5.334h-5.333zm8 8h5.333v-5.333h-5.333zm0 8h5.333v-5.333h-5.333z'/%3E%3C/svg%3E\")}.ag-icon-contracted:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Econtracted%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E\")}.ag-icon-copy:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecopy%3C/title%3E%3Cpath d='M22 1.333H6A2.675 2.675 0 0 0 3.333 4v18.667H6V4h16zm4 5.334H11.333a2.675 2.675 0 0 0-2.667 2.667v18.667c0 1.467 1.2 2.667 2.667 2.667H26c1.467 0 2.667-1.2 2.667-2.667V9.334c0-1.467-1.2-2.667-2.667-2.667M26 28H11.333V9.333H26z'/%3E%3C/svg%3E\")}.ag-icon-cross:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecross%3C/title%3E%3Cpath d='m25.333 8.547-1.88-1.88L16 14.12 8.547 6.667l-1.88 1.88L14.12 16l-7.453 7.453 1.88 1.88L16 17.88l7.453 7.453 1.88-1.88L17.88 16z'/%3E%3C/svg%3E\")}.ag-icon-csv:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='M.688-.226a.2.2 0 0 1-.017.074.28.28 0 0 1-.145.14.412.412 0 0 1-.234.013.28.28 0 0 1-.202-.168.468.468 0 0 1-.04-.19q0-.086.025-.155a.319.319 0 0 1 .182-.191.4.4 0 0 1 .134-.025q.087 0 .155.035a.3.3 0 0 1 .104.085.17.17 0 0 1 .036.097.06.06 0 0 1-.018.044.06.06 0 0 1-.042.019.06.06 0 0 1-.042-.013.2.2 0 0 1-.031-.046.2.2 0 0 0-.066-.079.16.16 0 0 0-.095-.027.17.17 0 0 0-.142.068.3.3 0 0 0-.053.193.4.4 0 0 0 .023.139.2.2 0 0 0 .067.083.2.2 0 0 0 .1.027q.063 0 .106-.031a.2.2 0 0 0 .065-.091.2.2 0 0 1 .023-.046q.014-.018.044-.018a.06.06 0 0 1 .044.018.06.06 0 0 1 .019.045' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 7.122 25.977)'/%3E%3Cpath d='M.622-.215a.2.2 0 0 1-.033.117.23.23 0 0 1-.098.081.4.4 0 0 1-.153.029.34.34 0 0 1-.175-.04.23.23 0 0 1-.079-.077.17.17 0 0 1-.031-.093q0-.027.019-.045a.06.06 0 0 1 .046-.019.06.06 0 0 1 .039.014.1.1 0 0 1 .027.044.3.3 0 0 0 .03.057q.015.023.044.038.03.015.076.015.065 0 .105-.03a.09.09 0 0 0 .04-.075.08.08 0 0 0-.022-.058.14.14 0 0 0-.056-.034 1 1 0 0 0-.092-.025.7.7 0 0 1-.129-.042.2.2 0 0 1-.083-.066.17.17 0 0 1-.03-.104q0-.058.032-.105a.2.2 0 0 1 .093-.07.4.4 0 0 1 .144-.025q.066 0 .114.016a.3.3 0 0 1 .08.044.2.2 0 0 1 .046.057q.015.03.015.058a.07.07 0 0 1-.018.046.06.06 0 0 1-.046.021q-.025 0-.038-.012a.2.2 0 0 1-.028-.041.2.2 0 0 0-.047-.063Q.387-.625.326-.625a.15.15 0 0 0-.09.025q-.035.024-.035.059 0 .021.012.037a.1.1 0 0 0 .032.027.4.4 0 0 0 .111.036q.06.015.11.031.048.018.083.042a.2.2 0 0 1 .054.062.2.2 0 0 1 .019.091' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 13.339 25.977)'/%3E%3Cpath d='m.184-.633.162.48.163-.483q.013-.038.019-.053a.062.062 0 0 1 .061-.039q.018 0 .034.009a.1.1 0 0 1 .025.025q.009.015.009.031L.654-.64l-.007.025-.009.024-.173.468-.019.051a.2.2 0 0 1-.021.042.1.1 0 0 1-.033.03.1.1 0 0 1-.049.012.1.1 0 0 1-.05-.011A.1.1 0 0 1 .26-.03a.2.2 0 0 1-.021-.042L.22-.123.05-.587.041-.612.033-.638.03-.662q0-.025.02-.046a.07.07 0 0 1 .05-.02q.037 0 .053.023.015.023.031.072' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 18.94 25.977)'/%3E%3C/svg%3E\")}.ag-icon-cut:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m19 3-6 6 2 2 7-7V3m-10 9.5a.503.503 0 0 1-.5-.5c0-.274.226-.5.5-.5s.5.226.5.5-.226.5-.5.5M6 20c-1.097 0-2-.903-2-2a2 2 0 0 1 2-2c1.097 0 2 .903 2 2a2 2 0 0 1-2 2M6 8c-1.097 0-2-.903-2-2a2 2 0 0 1 2-2c1.097 0 2 .903 2 2a2 2 0 0 1-2 2m3.64-.36c.23-.5.36-1.05.36-1.64 0-2.194-1.806-4-4-4S2 3.806 2 6s1.806 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.194 0-4 1.806-4 4s1.806 4 4 4 4-1.806 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1z' style='fill-rule:nonzero' transform='translate(4 4)'/%3E%3C/svg%3E\")}.ag-icon-desc:before,.ag-icon-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Edesc%3C/title%3E%3Cpath d='m26.667 16-1.88-1.88-7.453 7.44V5.333h-2.667V21.56l-7.44-7.453L5.334 16l10.667 10.667L26.668 16z'/%3E%3C/svg%3E\")}.ag-icon-excel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='m.052-.139.16-.234-.135-.208a.4.4 0 0 1-.028-.052.1.1 0 0 1-.01-.042.05.05 0 0 1 .018-.037.07.07 0 0 1 .045-.016q.03 0 .047.018a1 1 0 0 1 .047.066l.107.174.115-.174.024-.038.019-.026.021-.015a.1.1 0 0 1 .027-.005.06.06 0 0 1 .044.016.05.05 0 0 1 .018.039q0 .033-.038.089l-.141.211.152.234a.3.3 0 0 1 .03.051.1.1 0 0 1 .009.038.1.1 0 0 1-.008.031.1.1 0 0 1-.024.023.1.1 0 0 1-.034.008.1.1 0 0 1-.035-.008.1.1 0 0 1-.023-.022L.427-.067.301-.265l-.134.204-.022.034-.016.019a.1.1 0 0 1-.022.015.1.1 0 0 1-.03.005.06.06 0 0 1-.044-.016.06.06 0 0 1-.017-.047q0-.036.036-.088' style='fill-rule:nonzero' transform='matrix(17.82892 0 0 16.50777 10.371 25.928)'/%3E%3C/svg%3E\")}.ag-icon-expanded:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eexpanded%3C/title%3E%3Cpath d='M20.94 9.88 19.06 8l-8 8 8 8 1.88-1.88L14.833 16z'/%3E%3C/svg%3E\")}.ag-icon-eye-slash:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye-slash%3C/title%3E%3Cpath d='M21.106 15.088A5.19 5.19 0 0 0 16 10.814a5.17 5.17 0 0 0-3.668 1.522L9.866 9.868a12.2 12.2 0 0 1 6.133-1.646c5.186 0 9.614 3.225 11.408 7.778a12.34 12.34 0 0 1-5.276 6.133l-2.468-2.466a5.17 5.17 0 0 0 1.449-2.802h-2.123c-.148.508-.42.964-.782 1.33l-1.33-1.33h-2.514l2.196 2.196q-.272.049-.56.05a3.11 3.11 0 0 1-2.99-2.245h-2.123a5.19 5.19 0 0 0 7.3 3.836l2.247 2.247a12.2 12.2 0 0 1-4.434.828c-5.186 0-9.614-3.225-11.408-7.778a12.3 12.3 0 0 1 3.781-5.111l2.924 2.924a5.1 5.1 0 0 0-.404 1.275h4.206l-1.296-1.296a3.1 3.1 0 0 1 2.196-.903c1.404 0 2.587.924 2.976 2.199h2.13z'/%3E%3C/svg%3E\")}.ag-icon-eye:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye%3C/title%3E%3Cpath d='M16 8.222c-5.186 0-9.614 3.225-11.408 7.778 1.794 4.553 6.222 7.778 11.408 7.778S25.614 20.553 27.408 16C25.614 11.447 21.186 8.222 16 8.222m0 12.964c-2.862 0-5.186-2.324-5.186-5.186s2.324-5.186 5.186-5.186 5.186 2.324 5.186 5.186-2.324 5.186-5.186 5.186m0-8.297c-1.721 0-3.111 1.39-3.111 3.111s1.39 3.111 3.111 3.111 3.111-1.39 3.111-3.111-1.39-3.111-3.111-3.111'/%3E%3C/svg%3E\")}.ag-icon-filter:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Efilter%3C/title%3E%3Cpath d='M13.333 24h5.333v-2.667h-5.333zM4 8v2.667h24V8zm4 9.333h16v-2.667H8z'/%3E%3C/svg%3E\")}.ag-icon-first:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Efirst%3C/title%3E%3Cpath d='M24.273 22.12 18.153 16l6.12-6.12L22.393 8l-8 8 8 8zM7.727 8h2.667v16H7.727z'/%3E%3C/svg%3E\")}.ag-icon-group:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Egroup%3C/title%3E%3Cpath d='M18.667 21.333h8.889A3.555 3.555 0 0 1 24 24.889h-5.333zm8.888-7.111v3.556h-8.889v-3.556zM24 7.111a3.555 3.555 0 0 1 3.556 3.556h-16V7.111zm-8.889 17.778h-3.556v-3.556h3.556zm0-7.111h-3.556v-3.556h3.556zM8 10.667H4.444A3.555 3.555 0 0 1 8 7.111z'/%3E%3C/svg%3E\")}.ag-icon-last:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Elast%3C/title%3E%3Cpath d='m7.727 9.88 6.12 6.12-6.12 6.12L9.607 24l8-8-8-8zM21.607 8h2.667v16h-2.667z'/%3E%3C/svg%3E\")}.ag-icon-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eleft%3C/title%3E%3Cpath d='M26.667 14.667H10.44l7.453-7.453L16 5.334 5.333 16.001 16 26.668l1.88-1.88-7.44-7.453h16.227v-2.667z'/%3E%3C/svg%3E\")}.ag-icon-linked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Elinked%3C/title%3E%3Cpath d='M5.2 16a4.136 4.136 0 0 1 4.133-4.133h5.333V9.334H9.333c-3.68 0-6.667 2.987-6.667 6.667s2.987 6.667 6.667 6.667h5.333v-2.533H9.333A4.136 4.136 0 0 1 5.2 16.002zm5.467 1.333h10.667v-2.667H10.667zm12-8h-5.333v2.533h5.333c2.28 0 4.133 1.853 4.133 4.133s-1.853 4.133-4.133 4.133h-5.333v2.533h5.333c3.68 0 6.667-2.987 6.667-6.667s-2.987-6.667-6.667-6.667z'/%3E%3C/svg%3E\")}.ag-icon-loading:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eloading%3C/title%3E%3Cpath d='m17.778 11.708 3.25-3.251 2.516 2.516-3.251 3.25h4.597v3.556h-4.597l3.251 3.25-2.516 2.516-3.25-3.251v4.597h-3.556v-4.597l-3.25 3.251-2.516-2.516 3.251-3.25H7.11v-3.556h4.597l-3.251-3.25 2.516-2.516 3.25 3.251V7.111h3.556zm-3.251 7.847h2.944l2.084-2.084v-2.944l-2.084-2.084h-2.944l-2.084 2.084v2.944z'/%3E%3C/svg%3E\")}.ag-icon-maximize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Emaximize%3C/title%3E%3Cpath d='M4 4h24v2.667H4z'/%3E%3C/svg%3E\")}.ag-icon-menu:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Emenu%3C/title%3E%3Cpath d='M4 24h24v-2.667H4zm0-6.667h24v-2.667H4zM4 8v2.667h24V8z'/%3E%3C/svg%3E\")}.ag-icon-menu-alt:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M16 26.667a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 24q0-1.1.784-1.883A2.57 2.57 0 0 1 16 21.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784m0-8a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 16q0-1.1.784-1.883A2.57 2.57 0 0 1 16 13.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784m0-8a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 8q0-1.1.784-1.883A2.57 2.57 0 0 1 16 5.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784'/%3E%3C/svg%3E\")}.ag-icon-minimize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eminimize%3C/title%3E%3Cpath d='M8 25.333h16V28H8z'/%3E%3C/svg%3E\")}.ag-icon-minus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658H7.901v-2.658z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-next:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enext%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E\")}.ag-icon-none:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enone%3C/title%3E%3Cpath d='M4 24h16v-2.667H4zM4 8v2.667h24V8zm0 9.333h24v-2.667H4z'/%3E%3C/svg%3E\")}.ag-icon-not-allowed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enot-allowed%3C/title%3E%3Cpath d='M16 2.667C8.64 2.667 2.667 8.64 2.667 16S8.64 29.333 16 29.333 29.333 23.36 29.333 16 23.36 2.667 16 2.667M5.333 16c0-5.893 4.773-10.667 10.667-10.667 2.467 0 4.733.84 6.533 2.253L7.586 22.533A10.54 10.54 0 0 1 5.333 16M16 26.667c-2.467 0-4.733-.84-6.533-2.253L24.414 9.467A10.54 10.54 0 0 1 26.667 16c0 5.893-4.773 10.667-10.667 10.667'/%3E%3C/svg%3E\")}.ag-icon-paste:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epaste%3C/title%3E%3Cpath d='M25.333 4H19.76C19.2 2.453 17.733 1.333 16 1.333S12.8 2.453 12.24 4H6.667A2.675 2.675 0 0 0 4 6.667V28c0 1.467 1.2 2.667 2.667 2.667h18.667c1.467 0 2.667-1.2 2.667-2.667V6.667C28.001 5.2 26.801 4 25.334 4zM16 4c.733 0 1.333.6 1.333 1.333s-.6 1.333-1.333 1.333-1.333-.6-1.333-1.333S15.267 4 16 4m9.333 24H6.666V6.667h2.667v4h13.333v-4h2.667z'/%3E%3C/svg%3E\")}.ag-icon-pin:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epin%3C/title%3E%3Cpath d='m11.106 22.093-4.444 4.444-1.259-1.259 4.444-4.444zm5.872-16.63 9.618 9.62-.962.962-.962-.962-7.694 3.847 1.924 1.924-2.74 2.74-7.696-7.696 2.741-2.74 1.924 1.925 3.847-7.696-.962-.962z'/%3E%3C/svg%3E\")}.ag-icon-pivot:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epivot%3C/title%3E%3Cpath d='M26.667 30.223H5.334a3.556 3.556 0 0 1-3.556-3.556V5.334a3.556 3.556 0 0 1 3.556-3.556h21.333a3.556 3.556 0 0 1 3.556 3.556v21.333a3.556 3.556 0 0 1-3.556 3.556m-16-8.89H5.334v5.333h5.333zm16-7.11H12.444v12.444h14.223zm-9.15 6.85-2.039 2.037 2.039 2.039-1.257 1.257-3.295-3.296 3.295-3.295q.63.628 1.257 1.257zm-6.85-6.85H5.334v5.333h5.333zm15.74 3.816-1.257 1.256-2.039-2.037-2.037 2.037-1.257-1.256 3.295-3.296zM10.667 5.333H5.334v5.333h5.333zm8.889 0h-7.112v5.333h7.112zm7.111 0h-5.333v5.333h5.333z'/%3E%3C/svg%3E\")}.ag-icon-plus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658h-6.77v6.77h-2.658v-6.77h-6.77v-2.658h6.77v-6.77h2.658v6.77z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-previous:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eprevious%3C/title%3E%3Cpath d='M20.94 9.88 19.06 8l-8 8 8 8 1.88-1.88L14.833 16z'/%3E%3C/svg%3E\")}.ag-icon-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eright%3C/title%3E%3Cpath d='m16 5.333-1.88 1.88 7.44 7.453H5.333v2.667H21.56l-7.44 7.453 1.88 1.88 10.667-10.667L16 5.332z'/%3E%3C/svg%3E\")}.ag-icon-save:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esave%3C/title%3E%3Cpath d='M25.333 16v9.333H6.666V16H3.999v9.333C3.999 26.8 5.199 28 6.666 28h18.667C26.8 28 28 26.8 28 25.333V16zm-8 .893 3.453-3.44 1.88 1.88L15.999 22l-6.667-6.667 1.88-1.88 3.453 3.44V4h2.667v12.893z'/%3E%3C/svg%3E\")}.ag-icon-small-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-down%3C/title%3E%3Cpath d='M9.333 12.667 16 19.334l6.667-6.667H9.334z'/%3E%3C/svg%3E\")}.ag-icon-small-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-left%3C/title%3E%3Cpath d='M19.333 9.333 12.666 16l6.667 6.667V9.334z'/%3E%3C/svg%3E\")}.ag-icon-small-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-right%3C/title%3E%3Cpath d='M12.667 22.667 19.334 16l-6.667-6.667v13.333z'/%3E%3C/svg%3E\")}.ag-icon-small-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-up%3C/title%3E%3Cpath d='M9.333 19.333 16 12.666l6.667 6.667H9.334z'/%3E%3C/svg%3E\")}.ag-icon-tick:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etick%3C/title%3E%3Cpath d='m11.727 21.167-5.56-5.56-1.893 1.88 7.453 7.453 16-16-1.88-1.88z'/%3E%3C/svg%3E\")}.ag-icon-tree-closed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-closed%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E\")}.ag-icon-tree-indeterminate:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-indeterminate%3C/title%3E%3Cpath d='M6.667 14.667h18.667v2.667H6.667z'/%3E%3C/svg%3E\")}.ag-icon-tree-open:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-open%3C/title%3E%3Cpath d='M22.12 11.06 16 17.167 9.88 11.06 8 12.94l8 8 8-8z'/%3E%3C/svg%3E\")}.ag-icon-unlinked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eunlinked%3C/title%3E%3Cpath d='M22.667 9.333h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133c0 1.907-1.307 3.507-3.08 3.973l1.947 1.947c2.173-1.107 3.667-3.32 3.667-5.92a6.67 6.67 0 0 0-6.667-6.667zm-1.334 5.334h-2.92l2.667 2.667h.253zM2.667 5.693 6.814 9.84A6.65 6.65 0 0 0 2.667 16a6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.334a4.136 4.136 0 0 1-4.133-4.133c0-2.12 1.613-3.867 3.68-4.093l2.76 2.76h-.973v2.667h3.64l3.027 3.027v2.307h2.307l5.347 5.333 1.68-1.68L4.362 4.002 2.669 5.695z'/%3E%3C/svg%3E\")}.ag-icon-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Easc%3C/title%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333z'/%3E%3C/svg%3E\")}.ag-icon-grip:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Egrip%3C/title%3E%3Cpath d='M26.667 12H5.334v2.667h21.333zM5.333 20h21.333v-2.667H5.333z'/%3E%3C/svg%3E\")}.ag-icon-settings:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M30 8h-4.1c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2h14.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30zm-9 4c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3M2 24h4.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30v-2H15.9c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2zm9-4c1.7 0 3 1.3 3 3s-1.3 3-3 3-3-1.3-3-3 1.3-3 3-3'/%3E%3C/svg%3E\")}"},8900:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.iconSetMaterial=void 0;const n=i(6607),r=i(7545);t.iconSetMaterial=(0,n.createPart)({feature:"iconSet",css:r.iconSetMaterialCSS})},5867:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.iconOverrides=void 0;const n=i(6607),r=i(113);t.iconOverrides=e=>{const t=[];if("image"===e.type){const{icons:i,mask:n}=e;for(const e of Object.keys(i)){const s=(0,r.imageValueToCss)(i[e]);n?t.push(`.ag-icon-${e}::before { mask-image: ${s}; }`):t.push(`.ag-icon-${e}::before { background-image: ${s}; ${o} }`)}}if("font"===e.type){const{family:i,weight:n,color:s,icons:a}=e;let l=o;i&&(l+=` font-family: ${(0,r.fontFamilyValueToCss)(i)};`),n&&(l+=` font-weight: ${(0,r.fontWeightValueToCss)(n)};`),s&&(l+=` color: ${(0,r.colorValueToCss)(s)};`);for(const e of Object.keys(a))t.push(`.ag-icon-${e}::before { content: ${JSON.stringify(a[e])}; ${l} }`)}return(0,n.createPart)({css:t.join(";\n"),cssImports:e.cssImports})};const o="background-color: unset; mask-image: unset; -webkit-mask-image: unset;"},3692:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.iconSetQuartzBold=t.iconSetQuartzRegular=t.iconSetQuartzLight=t.iconSetQuartz=void 0;const n=i(6607),r=i(1368);t.iconSetQuartz=(e={})=>(0,n.createPart)({feature:"iconSet",css:()=>(0,r.getQuartzIconsCss)(e)}),t.iconSetQuartzLight=(0,t.iconSetQuartz)({strokeWidth:1}),t.iconSetQuartzRegular=(0,t.iconSetQuartz)(),t.iconSetQuartzBold=(0,t.iconSetQuartz)({strokeWidth:2})},1368:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getQuartzIconsCss=void 0;const i={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},n={"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>'};t.getQuartzIconsCss=(e={})=>{let t="";for(const o of[...Object.keys(i),...Object.keys(n)]){const i=r(o,e.strokeWidth);t+=`.ag-icon-${o}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(i)}'); }\n`}return t};const r=(e,t=1.5)=>{const r=n[e];if(r)return r;const o=i[e];if(!o)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+o+"</svg>"}},2543:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.inputStyleBaseCSS=void 0,t.inputStyleBaseCSS=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}:where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) :where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) :where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}'},7389:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.inputStyleBorderedCSS=void 0,t.inputStyleBorderedCSS=":where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){&:focus{box-shadow:var(--ag-focus-shadow)}}"},3054:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.inputStyleUnderlinedCSS=void 0,t.inputStyleUnderlinedCSS=":where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){border-left:none;border-right:none;border-top:none}"},7161:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.inputStyleUnderlined=t.inputStyleBordered=t.inputStyleBase=void 0;const n=i(6607),r=i(7845),o=i(2543),s=i(7389),a=i(3054),l={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"}};t.inputStyleBase=(0,n.createPart)({feature:"inputStyle",params:l,css:o.inputStyleBaseCSS});t.inputStyleBordered=(0,n.createPart)({feature:"inputStyle",params:{...l,inputBackgroundColor:r.backgroundColor,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:r.accentColor},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:(0,r.foregroundBackgroundMix)(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0},css:()=>o.inputStyleBaseCSS+s.inputStyleBorderedCSS});t.inputStyleUnderlined=(0,n.createPart)({feature:"inputStyle",params:{...l,inputBackgroundColor:"transparent",inputBorder:{width:2,color:(0,r.foregroundMix)(.3)},inputPaddingStart:{ref:"spacing"},inputFocusBorder:"solid 2px var(--ag-accent-color)",inputDisabledTextColor:{ref:"textColor",mix:.5},inputDisabledBorder:"solid 1px var(--ag-border-color)",inputInvalidBorder:{width:2,color:{ref:"invalidColor",mix:.3}}},css:()=>o.inputStyleBaseCSS+a.inputStyleUnderlinedCSS})},4907:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.tabStyleBaseCSS=void 0,t.tabStyleBaseCSS='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:1px solid var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:1px solid var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}'},5797:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.tabStyleRolodexCSS=void 0,t.tabStyleRolodexCSS=".ag-tab{border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;border-top:var(--ag-tab-selected-border-width) solid transparent;flex:none;&.ag-tab-selected{border-left-color:var(--ag-tab-selected-border-color);border-right-color:var(--ag-tab-selected-border-color);border-top-color:var(--ag-tab-selected-border-color);margin-bottom:-1px;padding-bottom:calc(var(--ag-tab-bottom-padding) + 1px)}}"},5117:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.tabStyleRolodex=t.tabStyleAlpine=t.tabStyleMaterial=t.tabStyleQuartz=t.tabStyleBase=void 0;const n=i(6607),r=i(7845),o=i(4907),s=i(5797),a={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:1,tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1};t.tabStyleBase=(0,n.createPart)({feature:"tabStyle",params:a,css:o.tabStyleBaseCSS});t.tabStyleQuartz=(0,n.createPart)({feature:"tabStyle",params:{...a,tabBarBorder:!0,tabBarBackgroundColor:(0,r.foregroundMix)(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:r.backgroundColor},css:o.tabStyleBaseCSS});t.tabStyleMaterial=(0,n.createPart)({feature:"tabStyle",params:{...a,tabBarBackgroundColor:{ref:"chromeBackgroundColor"},tabSelectedUnderlineColor:{ref:"primaryColor"},tabSelectedUnderlineWidth:2,tabSelectedUnderlineTransitionDuration:0},css:o.tabStyleBaseCSS});t.tabStyleAlpine=(0,n.createPart)({feature:"tabStyle",params:{...a,tabBarBorder:!0,tabBarBackgroundColor:{ref:"chromeBackgroundColor"},tabHoverTextColor:r.accentColor,tabSelectedTextColor:r.accentColor,tabSelectedUnderlineColor:r.accentColor,tabSelectedUnderlineWidth:2,tabSelectedUnderlineTransitionDuration:"0.3s"},css:o.tabStyleBaseCSS});t.tabStyleRolodex=(0,n.createPart)({feature:"tabStyle",params:{...a,tabBarBackgroundColor:{ref:"chromeBackgroundColor"},tabBarHorizontalPadding:{ref:"spacing"},tabBarTopPadding:{ref:"spacing"},tabBarBorder:!0,tabHorizontalPadding:{calc:"spacing * 2"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:{ref:"spacing"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:r.backgroundColor},css:()=>o.tabStyleBaseCSS+s.tabStyleRolodexCSS})},142:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.materialAdjustmentsCSS=void 0,t.materialAdjustmentsCSS=".ag-dnd-ghost,.ag-filter-toolpanel-header,.ag-filter-toolpanel-search,.ag-header-row,.ag-multi-filter-group-title-bar,.ag-panel-title-bar-title,.ag-status-bar{color:var(--ag-header-text-color);font-size:calc(var(--ag-font-size) - 1px);font-weight:600}.ag-column-drop-horizontal{background-color:color-mix(in srgb,var(--ag-background-color),var(--ag-foreground-color) 8%)}.ag-cell.ag-cell-inline-editing{background-color:var(--ag-background-color);background-image:linear-gradient(0deg,var(--ag-input-background-color),var(--ag-input-background-color));border:var(--ag-input-border)!important;border-width:1px!important;height:calc(var(--ag-row-height) + var(--ag-spacing)*3);padding:var(--ag-spacing);:where(.ag-row-last:not(.ag-row-first)) &{bottom:0}:where(.ag-has-focus) &{border:var(--ag-input-focus-border)!important;border-width:1px!important}}.ag-advanced-filter-builder-button,.ag-standard-button{text-transform:uppercase}.ag-status-bar{border:1px solid var(--ag-border-color)}.ag-list-item-hovered:after{background-color:var(--ag-primary-color)}.ag-pill-button:hover{color:var(--ag-primary-color)}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-primary-color)}"},2525:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.themeMaterial=t.styleMaterial=t.themeBalham=t.themeAlpine=t.themeQuartz=void 0;const n=i(6607),r=i(9621),o=i(7845),s=i(2475),a=i(8265),l=i(8689),c=i(1697),d=i(5572),u=i(6407),h=i(7161),p=i(5117),f=i(142),g=()=>(0,r.createTheme)().withPart(a.checkboxStyleDefault).withPart(l.colorSchemeVariable).withPart(u.iconSetQuartzRegular).withPart(p.tabStyleQuartz).withPart(h.inputStyleBordered).withPart(c.columnDropStyleBordered).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]});t.themeQuartz=g();const m=()=>(0,r.createTheme)().withPart(s.buttonStyleAlpine).withPart(a.checkboxStyleDefault).withPart(l.colorSchemeVariable).withPart(u.iconSetAlpine).withPart(p.tabStyleAlpine).withPart(h.inputStyleBordered).withPart(c.columnDropStyleBordered).withParams({accentColor:"#2196f3",selectedRowBackgroundColor:(0,o.accentMix)(.3),inputFocusBorder:{color:(0,o.accentMix)(.4)},focusShadow:{radius:2,spread:1.6,color:(0,o.accentMix)(.4)},iconButtonHoverBackgroundColor:"transparent",iconButtonActiveBackgroundColor:"transparent",checkboxUncheckedBorderColor:(0,o.foregroundBackgroundMix)(.45),checkboxIndeterminateBackgroundColor:(0,o.foregroundBackgroundMix)(.45),checkboxIndeterminateBorderColor:(0,o.foregroundBackgroundMix)(.45),checkboxBorderWidth:2,checkboxBorderRadius:2,fontSize:13,dataFontSize:14,headerFontWeight:700,borderRadius:3,wrapperBorderRadius:3,tabSelectedUnderlineColor:o.accentColor,tabSelectedBorderWidth:0,tabSelectedUnderlineTransitionDuration:.3,sideButtonSelectedUnderlineColor:o.accentColor,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineTransitionDuration:.3,sideButtonBorder:!1,sideButtonSelectedBorder:!1,sideButtonBarTopPadding:{calc:"spacing * 3"},sideButtonSelectedBackgroundColor:"transparent",sideButtonHoverTextColor:o.accentColor,iconButtonHoverColor:o.accentColor,toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonSwitchInset:1,toggleButtonOffBackgroundColor:(0,o.foregroundBackgroundMix)(.45)});t.themeAlpine=m();const v=()=>(0,r.createTheme)().withPart(s.buttonStyleBalham).withPart(a.checkboxStyleDefault).withPart(l.colorSchemeVariable).withPart(d.iconSetBalham).withPart(p.tabStyleRolodex).withPart(h.inputStyleBordered).withPart(c.columnDropStylePlain).withParams({accentColor:"#0091ea",borderColor:(0,o.foregroundMix)(.2),spacing:4,widgetVerticalSpacing:{calc:"max(8px, spacing)"},borderRadius:2,wrapperBorderRadius:2,headerColumnResizeHandleColor:"transparent",headerColumnBorder:!0,headerColumnBorderHeight:"50%",oddRowBackgroundColor:{ref:"chromeBackgroundColor",mix:.5},checkboxBorderRadius:2,checkboxBorderWidth:1,checkboxUncheckedBackgroundColor:o.backgroundColor,checkboxUncheckedBorderColor:(0,o.foregroundBackgroundMix)(.5),checkboxCheckedBackgroundColor:o.backgroundColor,checkboxCheckedBorderColor:o.accentColor,checkboxCheckedShapeColor:o.accentColor,checkboxIndeterminateBackgroundColor:o.backgroundColor,checkboxIndeterminateBorderColor:(0,o.foregroundBackgroundMix)(.5),checkboxIndeterminateShapeColor:(0,o.foregroundBackgroundMix)(.5),focusShadow:{radius:2,spread:1,color:o.accentColor},headerTextColor:(0,o.foregroundMix)(.6),iconButtonHoverBackgroundColor:"transparent",iconButtonActiveBackgroundColor:"transparent",fontSize:12,tabSelectedBackgroundColor:o.backgroundColor,headerFontWeight:"bold",toggleButtonWidth:32,toggleButtonHeight:16,toggleButtonSwitchInset:1,toggleButtonOffBackgroundColor:(0,o.foregroundBackgroundMix)(.5),sideButtonBorder:!0,sideButtonBarTopPadding:{calc:"spacing * 4"},popupShadow:"5px 5px 10px rgba(0, 0, 0, 0.3)",statusBarLabelColor:(0,o.foregroundMix)(.54),statusBarLabelFontWeight:600,statusBarValueFontWeight:600,panelTitleBarIconColor:o.foregroundColor});t.themeBalham=v();t.styleMaterial=(()=>{const e={tabSelectedUnderlineColor:{ref:"primaryColor"},sideButtonSelectedUnderlineColor:{ref:"primaryColor"},buttonTextColor:{ref:"primaryColor"},rangeSelectionBackgroundColor:{ref:"primaryColor",mix:.2},rangeSelectionBorderColor:{ref:"primaryColor"},rangeSelectionHighlightColor:{ref:"primaryColor",mix:.5},rangeHeaderHighlightColor:{ref:"foregroundColor",mix:.08},rowNumbersSelectedColor:{ref:"primaryColor",mix:.5},inputFocusBorder:{width:2,color:{ref:"primaryColor"}},pickerButtonFocusBorder:{width:1,color:{ref:"primaryColor"}},cellEditingBorder:{color:{ref:"primaryColor"}},menuBackgroundColor:{ref:"backgroundColor"},sideButtonBarBackgroundColor:o.backgroundColor,sideButtonSelectedBackgroundColor:"transparent",sideButtonBarTopPadding:{calc:"spacing * 4"},headerColumnResizeHandleColor:"none",headerBackgroundColor:{ref:"backgroundColor"},rowHoverColor:(0,o.foregroundMix)(.08),columnHoverColor:(0,o.foregroundMix)(.08),headerCellHoverBackgroundColor:(0,o.foregroundMix)(.05),statusBarLabelColor:(0,o.foregroundMix)(.63),statusBarLabelFontWeight:600,statusBarValueFontWeight:600,valueChangeValueHighlightBackgroundColor:"#00acc1",panelTitleBarIconColor:o.foregroundColor,advancedFilterBuilderButtonBarBorder:!1},t={...e,primaryColor:"#3f51b5",foregroundColor:"#000D",headerTextColor:"#0008",accentColor:"#ff4081",checkboxUncheckedBorderColor:o.foregroundColor,checkboxIndeterminateBackgroundColor:o.foregroundColor,toggleButtonOffBackgroundColor:o.foregroundColor,selectedRowBackgroundColor:"rgba(33, 150, 243, 0.3)"},i={...e,primaryColor:"#3f51b5",foregroundColor:"#fffD",headerTextColor:"#fff8",accentColor:"#bb86fc",checkboxUncheckedBorderColor:(0,o.foregroundBackgroundMix)(.5),checkboxIndeterminateBackgroundColor:(0,o.foregroundBackgroundMix)(.5),toggleButtonOffBackgroundColor:(0,o.foregroundBackgroundMix)(.5),selectedRowBackgroundColor:"#bb86fc33"};return(0,n.createPart)({feature:"styleMaterial",css:f.materialAdjustmentsCSS,params:t,modeParams:{light:t,dark:i,"dark-blue":i}})})();const b=()=>(0,r.createTheme)().withPart(s.buttonStyleBase).withPart(a.checkboxStyleDefault).withPart(l.colorSchemeVariable).withPart(u.iconSetMaterial).withPart(p.tabStyleMaterial).withPart(h.inputStyleUnderlined).withPart(c.columnDropStylePlain).withPart(t.styleMaterial).withParams({rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.75 * rowVerticalPaddingScale"},headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4.75 * headerVerticalPaddingScale"},widgetVerticalSpacing:{calc:"spacing * 1.75"},cellHorizontalPadding:{calc:"spacing * 3"},buttonHorizontalPadding:{ref:"spacing"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 2"},fontSize:13,iconSize:18,borderRadius:0,wrapperBorderRadius:0,wrapperBorder:!1,menuBorder:!1,dialogBorder:!1,panelTitleBarBorder:!1,tabSelectedBorderWidth:0,tabSelectedUnderlineTransitionDuration:.3,sidePanelBorder:!1,sideButtonSelectedBorder:!1,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineTransitionDuration:.3,sideButtonBorder:!1,buttonBorder:!1,buttonDisabledBorder:!1,focusShadow:{spread:4,color:(0,o.foregroundMix)(.16)},fontFamily:[{googleFont:"Roboto"},"-apple-system","BlinkMacSystemFont","Segoe UI","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],inputHeight:{calc:"max(iconSize, fontSize) + spacing * 3"},pickerButtonBorder:{width:1,color:"transparent"},headerFontWeight:600,checkboxBorderWidth:2,checkboxBorderRadius:2,toggleButtonWidth:34,toggleButtonSwitchInset:1,cardShadow:"0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)",popupShadow:"5px 5px 10px rgba(0, 0, 0, 0.3)"});t.themeMaterial=b()},113:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.paramValueToCss=t.durationValueToCss=t.imageValueToCss=t.fontWeightValueToCss=t.fontFamilyValueToCss=t.borderStyleValueToCss=t.shadowValueToCss=t.borderValueToCss=t.scaleValueToCss=t.lengthValueToCss=t.colorSchemeValueToCss=t.colorValueToCss=t.getParamType=void 0;const n=i(7764),r=i(7845),o=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"];t.getParamType=(0,r.memoize)((e=>(e=e.toLowerCase(),o.find((t=>e.endsWith(t.toLowerCase())))??"length")));const s=e=>"object"==typeof e&&e?.ref?(0,r.paramToVariableExpression)(e.ref):"string"==typeof e?e:"number"==typeof e&&String(e);t.colorValueToCss=e=>{if("string"==typeof e)return e;if(e&&"ref"in e){const t=(0,r.paramToVariableExpression)(e.ref);if(null==e.mix)return t;return`color-mix(in srgb, ${e.onto?(0,r.paramToVariableExpression)(e.onto):"transparent"}, ${t} ${(0,r.clamp)(100*e.mix,0,100)}%)`}return!1},t.colorSchemeValueToCss=s;t.lengthValueToCss=e=>{if("string"==typeof e)return e;if("number"==typeof e)return`${e}px`;if(e&&"calc"in e){return`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,(e=>"-"===e[0]?e:` ${(0,r.paramToVariableExpression)(e)} `))})`}return!(!e||!("ref"in e))&&(0,r.paramToVariableExpression)(e.ref)},t.scaleValueToCss=s;t.borderValueToCss=(e,i)=>"string"==typeof e?e:!0===e?"solid 1px var(--ag-border-color)":!1===e?"columnBorder"===i?"solid 1px transparent":"none":e&&"ref"in e?(0,r.paramToVariableExpression)(e.ref):(0,t.borderStyleValueToCss)(e.style??"solid")+" "+(0,t.lengthValueToCss)(e.width??1)+" "+(0,t.colorValueToCss)(e.color??{ref:"borderColor"});t.shadowValueToCss=e=>"string"==typeof e?e:!1===e?"none":e&&"ref"in e?(0,r.paramToVariableExpression)(e.ref):[(0,t.lengthValueToCss)(e.offsetX??0),(0,t.lengthValueToCss)(e.offsetY??0),(0,t.lengthValueToCss)(e.radius??0),(0,t.lengthValueToCss)(e.spread??0),(0,t.colorValueToCss)(e.color??{ref:"foregroundColor"})].join(" "),t.borderStyleValueToCss=s;t.fontFamilyValueToCss=e=>"string"==typeof e?e:e&&"googleFont"in e?(0,t.fontFamilyValueToCss)(e.googleFont):e&&"ref"in e?(0,r.paramToVariableExpression)(e.ref):!!Array.isArray(e)&&e.map((e=>("object"==typeof e&&"googleFont"in e&&(e=e.googleFont),a(e)))).join(", ");const a=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e);t.fontWeightValueToCss=s;t.imageValueToCss=e=>"string"==typeof e?e:e&&"url"in e?`url(${JSON.stringify(e.url)})`:e&&"svg"in e?(0,t.imageValueToCss)({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):!(!e||!("ref"in e))&&(0,r.paramToVariableExpression)(e.ref);t.durationValueToCss=(e,t)=>"string"==typeof e?e:"number"==typeof e?(e>=10&&(0,n._error)(104,{value:e,param:t}),`${e}s`):!(!e||!("ref"in e))&&(0,r.paramToVariableExpression)(e.ref);const l={color:t.colorValueToCss,colorScheme:t.colorSchemeValueToCss,length:t.lengthValueToCss,scale:t.scaleValueToCss,border:t.borderValueToCss,borderStyle:t.borderStyleValueToCss,shadow:t.shadowValueToCss,image:t.imageValueToCss,fontFamily:t.fontFamilyValueToCss,fontWeight:t.fontWeightValueToCss,duration:t.durationValueToCss};t.paramValueToCss=(e,i)=>{const n=(0,t.getParamType)(e);return l[n](i,e)}},7845:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.accentColor=t.foregroundColor=t.backgroundColor=t.foregroundHeaderBackgroundMix=t.foregroundBackgroundMix=t.foregroundMix=t.accentMix=t.memoize=t.logErrorMessage=t.clamp=t.paramToVariableExpression=t.paramToVariableName=t.kebabCase=void 0;t.kebabCase=e=>e.replace(/[A-Z]/g,(e=>`-${e}`)).toLowerCase();t.paramToVariableName=e=>`--ag-${(0,t.kebabCase)(e)}`;t.paramToVariableExpression=e=>`var(${(0,t.paramToVariableName)(e)})`;t.clamp=(e,t,i)=>Math.max(t,Math.min(i,e));t.logErrorMessage=(e,t)=>{t?console.error(e,t):console.error(e)};t.memoize=e=>{const t=new Map;return i=>{const n=i;return t.has(n)||t.set(n,e(i)),t.get(n)}};t.accentMix=e=>({ref:"accentColor",mix:e});t.foregroundMix=e=>({ref:"foregroundColor",mix:e});t.foregroundBackgroundMix=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"});t.foregroundHeaderBackgroundMix=e=>({ref:"foregroundColor",mix:e,onto:"headerBackgroundColor"}),t.backgroundColor={ref:"backgroundColor"},t.foregroundColor={ref:"foregroundColor"},t.accentColor={ref:"accentColor"}},8927:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.tooltipCSS=void 0,t.tooltipCSS=".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);white-space:normal}.ag-tooltip,.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}"},243:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipComponent=void 0;const n=i(7766),r=i(3598);class o extends r.PopupComponent{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=(0,n._escapeString)(t,!0)}}t.TooltipComponent=o},3386:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipFeature=t._shouldDisplayTooltip=t._getShouldDisplayTooltip=t._isShowTooltipWhenTruncated=void 0;const n=i(8731),r=i(3430);function o(e){return"whenTruncated"===e.get("tooltipShowMode")}function s(e){return()=>{const t=e();return!t||t.scrollWidth>t.clientWidth}}t._isShowTooltipWhenTruncated=o,t._getShouldDisplayTooltip=function(e,t){return o(e)?s(t):void 0},t._shouldDisplayTooltip=s;class a extends n.BeanStub{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e){const t="title",i=this.ctrl.getGui();i&&(null!=e&&""!=e?i.setAttribute(t,e):i.removeAttribute(t))}updateTooltipText(){const{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){null==this.tooltipManager&&(this.tooltipManager=this.createBean(new r.TooltipStateManager(this.ctrl,(()=>this.tooltip)),this.beans.context))}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}}t.TooltipFeature=a},2277:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipModule=void 0;const n=i(7205),r=i(3137),o=i(8927),s=i(243),a=i(3386),l=i(7931);t.TooltipModule={moduleName:"Tooltip",version:n.VERSION,beans:[l.TooltipService],dynamicBeans:{tooltipFeature:a.TooltipFeature},userComponents:{agTooltipComponent:s.TooltipComponent},dependsOn:[r.PopupModule],css:[o.tooltipCSS]}},7931:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipService=void 0;const n=i(8731),r=i(7274),o=i(4422),s=i(6996),a=i(3386);class l extends n.BeanStub{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,i,n){e&&t.destroyBean(e);const r=(0,a._isShowTooltipWhenTruncated)(this.gos),{column:o,eGui:s}=t,l=o.getColDef();n||!r||l.headerComponent||(n=(0,a._shouldDisplayTooltip)((()=>s.querySelector(".ag-header-cell-text"))));const c={getColumn:()=>o,getColDef:()=>o.getColDef(),getGui:()=>s,getLocation:()=>"header",getTooltipValue:()=>{if(null!=i)return i;return o.getColDef().headerTooltip},shouldDisplayTooltip:n};let d=this.createTooltipFeature(c);return d&&(d=t.createBean(d),t.setRefreshFunction("tooltip",(()=>d.refreshTooltip()))),d}setupHeaderGroupTooltip(e,t,i,n){e&&t.destroyBean(e);const r=(0,a._isShowTooltipWhenTruncated)(this.gos),{column:o,eGui:s}=t,l=o.getColGroupDef();n||!r||l?.headerGroupComponent||(n=(0,a._shouldDisplayTooltip)((()=>s.querySelector(".ag-header-group-text"))));const c={getColumn:()=>o,getGui:()=>s,getLocation:()=>"headerGroup",getTooltipValue:()=>i??(l&&l.headerTooltip),shouldDisplayTooltip:n};l&&(c.getColDef=()=>l);const d=this.createTooltipFeature(c);return d?t.createBean(d):d}enableCellTooltipFeature(e,t,i){const{column:n,rowNode:l}=e,c=(0,a._isShowTooltipWhenTruncated)(this.gos);i||!c||e.isCellRenderer()||(i=(0,a._shouldDisplayTooltip)((()=>{const t=e.eGui;return 0===t.children.length?t:t.querySelector(".ag-cell-value")})));const d={getColumn:()=>n,getColDef:()=>n.getColDef(),getRowIndex:()=>e.cellPosition.rowIndex,getRowNode:()=>l,getGui:()=>e.eGui,getLocation:()=>"cell",getTooltipValue:null!=t?()=>t:()=>{const t=n.getColDef(),i=l.data;if(t.tooltipField&&(0,o._exists)(i))return(0,s._getValueUsingField)(i,t.tooltipField,n.isTooltipFieldContainsDots());const a=t.tooltipValueGetter;return a?a((0,r._addGridCommonParams)(this.gos,{location:"cell",colDef:n.getColDef(),column:n,rowIndex:e.cellPosition.rowIndex,node:l,data:l.data,value:e.value,valueFormatted:e.valueFormatted})):null},getValueFormatted:()=>e.valueFormatted,shouldDisplayTooltip:i};return this.createTooltipFeature(d,this.beans)}refreshRowTooltip(e,t,i,n){const r={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>i,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:n},o=this.beans,s=o.context;e&&t.destroyBean(e,s);const a=this.createTooltipFeature(r,o);return t.createBean(a,s)}initCol(e){const{colDef:t}=e;e.tooltipEnabled=(0,o._exists)(t.tooltipField)||(0,o._exists)(t.tooltipValueGetter)||(0,o._exists)(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}}t.TooltipService=l},3430:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipStateManager=void 0;const n=i(2036),r=i(8731),o=i(7274),s=i(8667),a=i(4422);var l,c;!function(e){e[e.NOTHING=0]="NOTHING",e[e.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",e[e.SHOWING=2]="SHOWING"}(l||(l={})),function(e){e[e.HOVER=0]="HOVER",e[e.FOCUS=1]="FOCUS"}(c||(c={}));let d,u=!1;class h extends r.BeanStub{wireBeans(e){this.popupSvc=e.popupSvc,this.userCompFactory=e.userCompFactory}constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=l.NOTHING,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.tooltipCtrl.getGui();this.tooltipTrigger===c.HOVER&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===c.FOCUS&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){return"show"===e?this.tooltipCtrl.getTooltipShowDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipCtrl.getTooltipHideDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return e&&"hover"!==e?c.FOCUS:c.HOVER}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),(0,s._isIOSUserAgent)()||(u?this.showTooltipTimeoutId=window.setTimeout((()=>{this.prepareToShowTooltip(e)}),100):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===l.SHOWING&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){const t=e.relatedTarget,i=this.tooltipCtrl.getGui(),n=this.tooltipComp?.getGui();this.isInteractingWithTooltip||i.contains(t)||this.interactionEnabled&&n?.contains(t)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=l.NOTHING||u)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=l.WAITING_TO_SHOW}isLastTooltipHiddenRecently(){return(new Date).getTime()-d<1e3}setToDoNothing(e){e||this.state!==l.SHOWING||this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=l.NOTHING,this.lastMouseEvent=null}showTooltip(){const e=this.getTooltipValue(),t=this.tooltipCtrl;if(!(0,a._exists)(e)||t.shouldDisplayTooltip&&!t.shouldDisplayTooltip())return void this.setToDoNothing();const i=t.getRowNode?.(),r=(0,o._addGridCommonParams)(this.gos,{location:t.getLocation?.()??"UNKNOWN",colDef:t.getColDef?.(),column:t.getColumn?.(),rowIndex:t.getRowIndex?.(),node:i,data:i?.data,value:e,valueFormatted:t.getValueFormatted?.(),hideTooltipCallback:()=>this.hideTooltip(!0),...t.getAdditionalParams?.()??{}});this.state=l.SHOWING,this.tooltipInstanceCount++;const s=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount),c=(0,n._getTooltipCompDetails)(this.userCompFactory,r);c?.newAgStackInstance().then(s)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),d=(new Date).getTime()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){if(this.state!==l.SHOWING||this.tooltipInstanceCount!==e)return void this.destroyBean(t);const i=t.getGui();this.tooltipComp=t,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),this.tooltipTrigger===c.HOVER&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");const n=this.getLocaleTextFunc(),r=this.popupSvc?.addPopup({eChild:i,ariaLabel:n("ariaLabelTooltip","Tooltip")});if(r&&(this.tooltipPopupDestroyFunc=r.hideFunc),this.positionTooltip(),this.tooltipTrigger===c.FOCUS){const e=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:e,columnMoved:e})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(i,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners((0,o._getDocument)(this.beans),{keydown:e=>{i.contains(e?.target)||this.onKeyDown()}}),this.tooltipTrigger===c.FOCUS&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(i,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:i,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){const e=this.tooltipComp?.getGui(),t=(0,o._getActiveDomElement)(this.beans);return!!e&&e.contains(t)}onTooltipFocusOut(e){const t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupSvc?.positionPopupUnderMouseEvent({...e,mouseEvent:this.lastMouseEvent}):this.popupSvc?.positionPopupByComponent({...e,eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,i=this.tooltipTrigger===c.HOVER?1e3:0;window.setTimeout((()=>{e(),this.destroyBean(t)}),i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach((e=>{e&&e()})),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){u=!0,this.interactiveTooltipTimeoutId=window.setTimeout((()=>{this.unlockService(),this.setToDoNothing()}),100)}unlockService(){u=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}}t.TooltipStateManager=h},7113:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.UndoRedoService=void 0;const n=i(8731),r=i(6257),o=i(7274),s=i(2410);class a extends n.BeanStub{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=null!==this.activeCellEdit&&(0,r._areCellsEqual)(this.activeCellEdit,t),n=null!==this.activeRowEdit&&(0,r._isSameRow)(this.activeRowEdit,t);if(!(i||n||this.isPasting||this.isRangeInAction))return;const{rowPinned:o,rowIndex:s,column:a,oldValue:l,value:c}=e,d={rowPinned:o,rowIndex:s,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(d)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){const{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;const i=e.get("undoRedoCellEditingLimit");if(i<=0)return;this.undoStack=new s.UndoRedoStack(i),this.redoStack=new s.UndoRedoStack(i),this.addListeners();const n=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:e=>{e.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:n,newColumnsLoaded:n,columnGroupOpened:n,columnRowGroupChanged:n,columnMoved:n,columnPinned:n,columnVisible:n,rowDragEnd:n}),t.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl}))}getCurrentUndoStackSize(){return this.undoStack?.getCurrentStackSize()??0}getCurrentRedoStackSize(){return this.redoStack?.getCurrentStackSize()??0}undo(e){const{eventSvc:t,undoStack:i,redoStack:n}=this;t.dispatchEvent({type:"undoStarted",source:e});const r=this.undoRedo(i,n,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:r})}redo(e){const{eventSvc:t,undoStack:i,redoStack:n}=this;t.dispatchEvent({type:"redoStarted",source:e});const r=this.undoRedo(n,i,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:r})}undoRedo(e,t,i,n,r){if(!e)return!1;const o=e.pop();return!(!o||!o.cellValueChanges)&&(this.processAction(o,(e=>e[n]),r),o instanceof s.RangeUndoRedoAction?this.processRange(o.ranges||[o[i]]):this.processCell(o.cellValueChanges),t.push(o),!0)}processAction(e,t,i){e.cellValueChanges.forEach((e=>{const{rowIndex:n,rowPinned:o,columnId:s}=e,a={rowIndex:n,rowPinned:o},l=(0,r._getRowNode)(this.beans,a);l.displayed&&l.setDataValue(s,t(e),i)}))}processRange(e){let t;const i=this.beans.rangeSvc;i.removeAllCellRanges(!0),e.forEach(((n,r)=>{if(!n)return;const o=n.startRow,s=n.endRow;r===e.length-1&&(t={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:n.startColumn.getColId()},this.setLastFocusedCell(t));const a={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:s.rowIndex,rowEndPinned:s.rowPinned,columnStart:n.startColumn,columns:n.columns};i.addCellRange(a)}))}processCell(e){const t=e[0],{rowIndex:i,rowPinned:n}=t,o={rowIndex:i,rowPinned:n},s=(0,r._getRowNode)(this.beans,o),a={rowPinned:t.rowPinned,rowIndex:s.rowIndex,columnId:t.columnId};this.setLastFocusedCell(a)}setLastFocusedCell(e){const{rowIndex:t,columnId:i,rowPinned:n}=e,{colModel:r,focusSvc:o,rangeSvc:s}=this.beans,a=r.getCol(i);if(!a)return;const{scrollFeature:l}=this.gridBodyCtrl;l.ensureIndexVisible(t),l.ensureColumnVisible(a);const c={rowIndex:t,column:a,rowPinned:n};o.setFocusedCell({...c,forceBrowserFocus:!0}),s?.setRangeToCell(c)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new s.UndoRedoAction(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{this.activeCellEdit=null;if(e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const e=new s.UndoRedoAction(this.cellValueChanges);this.pushActionsToUndoStack(e)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new s.UndoRedoAction(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new s.RangeUndoRedoAction(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;const{rangeSvc:t,gos:i}=this.beans;e=t&&(0,o._isCellSelectionEnabled)(i)?new s.RangeUndoRedoAction(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):new s.UndoRedoAction(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}}t.UndoRedoService=a},2410:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UndoRedoStack=t.RangeUndoRedoAction=t.UndoRedoAction=void 0;class i{constructor(e){this.cellValueChanges=e}}t.UndoRedoAction=i;t.RangeUndoRedoAction=class extends i{constructor(e,t,i,n){super(e),this.initialRange=t,this.finalRange=i,this.ranges=n}};t.UndoRedoStack=class{constructor(e){this.actionStack=[],this.maxStackSize=e||10,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}}},5230:function(e,t){function i(e,t,i){null==i||"string"==typeof i&&""==i?r(e,t):n(e,t,i)}function n(e,t,i){e.setAttribute(o(t),i.toString())}function r(e,t){e.removeAttribute(o(t))}function o(e){return`aria-${e}`}function s(e,t){i(e,"labelledby",t)}Object.defineProperty(t,"__esModule",{value:!0}),t._getAriaCheckboxStateName=t._setAriaHasPopup=t._setAriaControls=t._setAriaChecked=t._setAriaSelected=t._removeAriaSort=t._setAriaSort=t._setAriaColSpan=t._setAriaColIndex=t._setAriaColCount=t._setAriaRowSpan=t._setAriaRowIndex=t._setAriaRowCount=t._setAriaMultiSelectable=t._setAriaPosInSet=t._setAriaSetSize=t._removeAriaExpanded=t._setAriaExpanded=t._setAriaActiveDescendant=t._setAriaHidden=t._setAriaDisabled=t._setAriaLevel=t._setAriaRelevant=t._setAriaAtomic=t._setAriaLive=t._setAriaDescribedBy=t._setAriaLabelledBy=t._setAriaLabel=t._getAriaLabel=t._getAriaPosInSet=t._getAriaLevel=t._getAriaSortState=t._setAriaRole=void 0,t._setAriaRole=function(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")},t._getAriaSortState=function(e){let t;return t="asc"===e?"ascending":"desc"===e?"descending":"mixed"===e?"other":"none",t},t._getAriaLevel=function(e){return parseInt(e.getAttribute("aria-level"),10)},t._getAriaPosInSet=function(e){return parseInt(e.getAttribute("aria-posinset"),10)},t._getAriaLabel=function(e){return e.getAttribute("aria-label")},t._setAriaLabel=function(e,t){i(e,"label",t)},t._setAriaLabelledBy=s,t._setAriaDescribedBy=function(e,t){i(e,"describedby",t)},t._setAriaLive=function(e,t){i(e,"live",t)},t._setAriaAtomic=function(e,t){i(e,"atomic",t)},t._setAriaRelevant=function(e,t){i(e,"relevant",t)},t._setAriaLevel=function(e,t){i(e,"level",t)},t._setAriaDisabled=function(e,t){i(e,"disabled",t)},t._setAriaHidden=function(e,t){i(e,"hidden",t)},t._setAriaActiveDescendant=function(e,t){i(e,"activedescendant",t)},t._setAriaExpanded=function(e,t){n(e,"expanded",t)},t._removeAriaExpanded=function(e){r(e,"expanded")},t._setAriaSetSize=function(e,t){n(e,"setsize",t)},t._setAriaPosInSet=function(e,t){n(e,"posinset",t)},t._setAriaMultiSelectable=function(e,t){n(e,"multiselectable",t)},t._setAriaRowCount=function(e,t){n(e,"rowcount",t)},t._setAriaRowIndex=function(e,t){n(e,"rowindex",t)},t._setAriaRowSpan=function(e,t){n(e,"rowspan",t)},t._setAriaColCount=function(e,t){n(e,"colcount",t)},t._setAriaColIndex=function(e,t){n(e,"colindex",t)},t._setAriaColSpan=function(e,t){n(e,"colspan",t)},t._setAriaSort=function(e,t){n(e,"sort",t)},t._removeAriaSort=function(e){r(e,"sort")},t._setAriaSelected=function(e,t){i(e,"selected",t)},t._setAriaChecked=function(e,t){n(e,"checked",void 0===t?"mixed":t)},t._setAriaControls=function(e,t){i(e,"controls",t.id),s(t,e.id)},t._setAriaHasPopup=function(e,t){i(e,"haspopup",!1===t?null:t)},t._getAriaCheckboxStateName=function(e,t){return void 0===t?e("ariaIndeterminate","indeterminate"):!0===t?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}},1502:function(e,t){function i(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}Object.defineProperty(t,"__esModule",{value:!0}),t._moveInArray=t._removeFromArray=t._sortNumerically=t._areEqual=t._last=t._EmptyArray=void 0,t._EmptyArray=Object.freeze([]),t._last=function(e){if(e?.length)return e[e.length-1]},t._areEqual=function(e,t,i){return null==e&&null==t||null!=e&&null!=t&&e.length===t.length&&e.every(((e,n)=>i?i(e,t[n]):t[n]===e))},t._sortNumerically=function(e){return e.sort(((e,t)=>e-t))},t._removeFromArray=i,t._moveInArray=function(e,t,n){for(let n=0;n<t.length;n++)i(e,t[n]);for(let i=t.length-1;i>=0;i--)e.splice(n,0,t[i])}},8667:function(e,t){let i,n,r,o,s,a,l,c;function d(){return void 0===r&&(r=/(firefox)/i.test(navigator.userAgent)),r}function u(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;0===i&&0===t.clientWidth&&(i=null),t.parentNode&&t.parentNode.removeChild(t),null!=i&&(l=i,a=0===i)}Object.defineProperty(t,"__esModule",{value:!0}),t._isInvisibleScrollbar=t._getScrollbarWidth=t._getMaxDivHeight=t._getTabIndex=t._isIOSUserAgent=t._isMacOsUserAgent=t._isBrowserFirefox=t._isBrowserChrome=t._isBrowserSafari=void 0,t._isBrowserSafari=function(){return void 0===i&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),i},t._isBrowserChrome=function(){if(void 0===n){const e=window;n=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return n},t._isBrowserFirefox=d,t._isMacOsUserAgent=function(){return void 0===o&&(o=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),o},t._isIOSUserAgent=function(){return void 0===s&&(s=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),s},t._getTabIndex=function(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return-1!==t||null!==i&&(""!==i||d())?t.toString():null},t._getMaxDivHeight=function(){if(void 0!==c)return c;if(!document.body)return-1;let e=1e6;const t=d()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const n=2*e;if(i.style.height=n+"px",n>t||i.clientHeight!==n)break;e=n}return document.body.removeChild(i),c=e,e},t._getScrollbarWidth=function(){return null==l&&u(),l},t._isInvisibleScrollbar=function(){return null==a&&u(),a}},6800:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ChangedPath=void 0;t.ChangedPath=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:i,children:n}=e;if(n)for(let e=0;e<n.length;++e)this.depthFirstSearchChangedPath(n[e],t);t(i)}depthFirstSearchEverything(e,t,i){const n=e.childrenAfterGroup;if(n)for(let e=0,r=n.length;e<r;++e){const r=n[e];r.childrenAfterGroup?this.depthFirstSearchEverything(r,t,i):i&&t(r)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const e={rowNode:t,children:null};this.mapToItems[t.id]=e,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach((e=>this.nodeIdsToColumns[i.id][e.getId()]=!0)),i=i.parent}linkPathItems(e,t){let i=e;for(let e=0;e<t;e++){const e=this.mapToItems[i.id],t=this.mapToItems[i.parent.id];t.children||(t.children=[]),t.children.push(e),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter((e=>i[e.getId()]))}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter((e=>!i[e.getId()]))}}},9827:function(e,t){function i(e,t){return e.toString().padStart(t,"0")}Object.defineProperty(t,"__esModule",{value:!0}),t._parseDateTimeFromString=t._dateToFormattedString=t._serialiseDate=void 0,t._serialiseDate=function(e,t=!0,n="-"){if(!e)return null;let r=[e.getFullYear(),e.getMonth()+1,e.getDate()].map((e=>i(e,2))).join(n);return t&&(r+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map((e=>i(e,2))).join(":")),r};const n=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};t._dateToFormattedString=function(e,t="YYYY-MM-DD"){const r=i(e.getFullYear(),4),o=["January","February","March","April","May","June","July","August","September","October","November","December"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a={YYYY:()=>r.slice(r.length-4,r.length),YY:()=>r.slice(r.length-2,r.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>o[e.getMonth()],MMM:()=>o[e.getMonth()].slice(0,3),MM:()=>i(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${n(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${n(e.getDate())}`,DD:()=>i(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>s[e.getDay()],ddd:()=>s[e.getDay()].slice(0,3),dd:()=>s[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${n(e.getDay())}`,d:()=>`${e.getDay()}`},l=new RegExp(Object.keys(a).join("|"),"g");return t.replace(l,(e=>e in a?a[e]():e))},t._parseDateTimeFromString=function(e){if(!e)return null;const[t,i]=e.split(" ");if(!t)return null;const n=t.split("-").map((e=>parseInt(e,10)));if(3!==n.filter((e=>!isNaN(e))).length)return null;const[r,o,s]=n,a=new Date(r,o-1,s);if(a.getFullYear()!==r||a.getMonth()!==o-1||a.getDate()!==s)return null;if(!i||"00:00:00"===i)return a;const[l,c,d]=i.split(":").map((e=>parseInt(e,10)));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),d>=0&&d<60&&a.setSeconds(d),a}},3507:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._preserveRangesWhile=t._getTextSelectionRanges=t._observeResize=t._bindCellRendererToHtmlElement=t._nodeListForEach=t._addOrRemoveAttribute=t._iterateNamedNodeMap=t._copyNodeList=t._isNodeOrElement=t._formatSize=t._setFixedHeight=t._setElementHeight=t._setFixedWidth=t._setElementWidth=t._isVerticalScrollShowing=t._isHorizontalScrollShowing=t._addStylesToElement=t._insertWithDomOrder=t._setDomChildOrder=t._ensureDomOrder=t._loadTemplate=t._isVisible=t._isInDOM=t._removeFromParent=t._clearElement=t._setScrollLeft=t._getScrollLeft=t._isRtlNegativeScroll=t._getElementRectWithOffset=t._getAbsoluteWidth=t._getAbsoluteHeight=t._getInnerWidth=t._getInnerHeight=t._getElementSize=t._isElementChildOfClass=t._setDisabled=t._setVisible=t._setDisplayed=t._isFocusableFormField=t.FOCUSABLE_EXCLUDE=t.FOCUSABLE_SELECTOR=t._radioCssClass=void 0;const n=i(7274),r=i(5230),o=i(8667);let s;function a(e){const{height:t,width:i,borderTopWidth:n,borderRightWidth:r,borderBottomWidth:o,borderLeftWidth:s,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:d,marginTop:u,marginRight:h,marginBottom:p,marginLeft:f,boxSizing:g}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(n||"0"),borderRightWidth:parseFloat(r||"0"),borderBottomWidth:parseFloat(o||"0"),borderLeftWidth:parseFloat(s||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(d||"0"),marginTop:parseFloat(u||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(f||"0"),boxSizing:g}}function l(){if("boolean"==typeof s)return s;const e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(e),e.scrollLeft=1,s=0===Math.floor(e.scrollLeft),document.body.removeChild(e),s}function c(e){return!!e.offsetParent}function d(e){const t=e;if(t.checkVisibility)return t.checkVisibility({checkVisibilityCSS:!0});return!(!c(e)||"visible"!==window.getComputedStyle(e).visibility)}function u(e,t){t=p(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function h(e,t){t=p(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function p(e){return"number"==typeof e?`${e}px`:e}function f(e,t){if(null!=e)for(let i=0;i<e.length;i++)t(e[i])}function g(e){const t=(0,n._getRootNode)(e),i="getSelection"in t?t.getSelection():null,r=[];for(let e=0;e<(i?.rangeCount??0);e++){const t=i?.getRangeAt(e);t&&r.push(t)}return{selection:i,ranges:r}}t._radioCssClass=function(e,t,i){const n=e.parentElement;let r=n&&n.firstChild;for(;r;)t&&r.classList.toggle(t,r===e),i&&r.classList.toggle(i,r!==e),r=r.nextSibling},t.FOCUSABLE_SELECTOR="[tabindex], input, select, button, textarea, [href]",t.FOCUSABLE_EXCLUDE="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *",t._isFocusableFormField=function(e){const i=Element.prototype.matches||Element.prototype.msMatchesSelector,n=i.call(e,"input, select, button, textarea"),r=i.call(e,t.FOCUSABLE_EXCLUDE),o=d(e);return n&&!r&&o},t._setDisplayed=function(e,t,i={}){const{skipAriaHidden:n}=i;e.classList.toggle("ag-hidden",!t),n||(0,r._setAriaHidden)(e,!t)},t._setVisible=function(e,t,i={}){const{skipAriaHidden:n}=i;e.classList.toggle("ag-invisible",!t),n||(0,r._setAriaHidden)(e,!t)},t._setDisabled=function(e,t){const i="disabled",n=t?e=>e.setAttribute(i,""):e=>e.removeAttribute(i);n(e),f(e.querySelectorAll("input"),(e=>n(e)))},t._isElementChildOfClass=function(e,t,i){let n=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,"number"==typeof i){if(++n>i)break}else if(e===i)break}return!1},t._getElementSize=a,t._getInnerHeight=function(e){const t=a(e);return"border-box"===t.boxSizing?t.height-t.paddingTop-t.paddingBottom:t.height},t._getInnerWidth=function(e){const t=a(e);return"border-box"===t.boxSizing?t.width-t.paddingLeft-t.paddingRight:t.width},t._getAbsoluteHeight=function(e){const{height:t,marginBottom:i,marginTop:n}=a(e);return Math.floor(t+i+n)},t._getAbsoluteWidth=function(e){const{width:t,marginLeft:i,marginRight:n}=a(e);return Math.floor(t+i+n)},t._getElementRectWithOffset=function(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:n,borderRightWidth:r,borderBottomWidth:o}=a(e);return{top:t.top+(i||0),left:t.left+(n||0),right:t.right+(r||0),bottom:t.bottom+(o||0)}},t._isRtlNegativeScroll=l,t._getScrollLeft=function(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i),(0,o._isBrowserChrome)()&&!l()&&(i=e.scrollWidth-e.getBoundingClientRect().width-i)),i},t._setScrollLeft=function(e,t,i){i&&(l()?t*=-1:((0,o._isBrowserSafari)()||(0,o._isBrowserChrome)())&&(t=e.scrollWidth-e.getBoundingClientRect().width-t)),e.scrollLeft=t},t._clearElement=function(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)},t._removeFromParent=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},t._isInDOM=c,t._isVisible=d,t._loadTemplate=function(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild},t._ensureDomOrder=function(e,t,i){i&&i.nextSibling===t||(e.firstChild?i?i.nextSibling?e.insertBefore(t,i.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t):e.appendChild(t))},t._setDomChildOrder=function(e,t){for(let i=0;i<t.length;i++){const n=t[i],r=e.children[i];r!==n&&e.insertBefore(n,r)}},t._insertWithDomOrder=function(e,t,i){i?i.insertAdjacentElement("afterend",t):e.firstChild?e.insertAdjacentElement("afterbegin",t):e.appendChild(t)},t._addStylesToElement=function(e,t){if(t)for(const i of Object.keys(t)){const n=t[i];if(!i||!i.length||null==n)continue;const r=i.replace(/[A-Z]/g,(e=>`-${e.toLocaleLowerCase()}`)),o=n.toString(),s=o.replace(/\s*!important/g,""),a=s.length!=o.length?"important":void 0;e.style.setProperty(r,s,a)}},t._isHorizontalScrollShowing=function(e){return e.clientWidth<e.scrollWidth},t._isVerticalScrollShowing=function(e){return e.clientHeight<e.scrollHeight},t._setElementWidth=function(e,t){"flex"===t?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):u(e,t)},t._setFixedWidth=u,t._setElementHeight=function(e,t){"flex"===t?(e.style.removeProperty("height"),e.style.removeProperty("minHeight"),e.style.removeProperty("maxHeight"),e.style.flex="1 1 auto"):h(e,t)},t._setFixedHeight=h,t._formatSize=p,t._isNodeOrElement=function(e){return e instanceof Node||e instanceof HTMLElement},t._copyNodeList=function(e){if(null==e)return[];const t=[];return f(e,(e=>t.push(e))),t},t._iterateNamedNodeMap=function(e,t){if(e)for(let i=0;i<e.length;i++){const n=e[i];t(n.name,n.value)}},t._addOrRemoveAttribute=function(e,t,i){null==i||""===i?e.removeAttribute(t):e.setAttribute(t,i.toString())},t._nodeListForEach=f,t._bindCellRendererToHtmlElement=function(e,t){e.then((e=>{const i=e.getGui();null!=i&&("object"==typeof i?t.appendChild(i):t.innerHTML=i)}))},t._observeResize=function(e,t,i){const r=(0,n._getWindow)(e).ResizeObserver,o=r?new r(i):null;return o?.observe(t),()=>o?.disconnect()},t._getTextSelectionRanges=g,t._preserveRangesWhile=function(e,t){if(!e.gos.get("enableCellTextSelection"))return t();if(!(0,o._isBrowserFirefox)()&&!(0,o._isBrowserSafari)())return t();const{selection:i,ranges:n}=g(e);t(),i?.removeAllRanges();for(const e of n)i?.addRange(e)}},2979:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getPassiveStateForEvent=t._addSafePassiveEventListener=t._getEventPath=t._createEventPath=t._isElementInEventPath=t._getCtrlForEventTarget=t._isEventSupported=t._isStopPropagationForAgGrid=t._stopPropagationForAgGrid=void 0;const n=i(7274),r="__ag_Grid_Stop_Propagation",o=["touchstart","touchend","touchmove","touchcancel","scroll"],s=["wheel"],a={};function l(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}function c(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():l(t)}t._stopPropagationForAgGrid=function(e){e[r]=!0},t._isStopPropagationForAgGrid=function(e){return!0===e[r]},t._isEventSupported=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t=>{if("boolean"==typeof a[t])return a[t];const i=document.createElement(e[t]||"div");return a[t="on"+t]=t in i}})(),t._getCtrlForEventTarget=function(e,t,i){let r=t;for(;r;){const t=(0,n._getDomData)(e,r,i);if(t)return t;r=r.parentElement}return null},t._isElementInEventPath=function(e,t){return!(!t||!e)&&c(t).indexOf(e)>=0},t._createEventPath=l,t._getEventPath=c,t._addSafePassiveEventListener=function(e,i,n,r){const o=(0,t.getPassiveStateForEvent)(n);let s;null!=o&&(s={passive:o}),e&&e.addEventListener&&e.addEventListener(i,n,r,s)};t.getPassiveStateForEvent=e=>{const t=o.includes(e),i=s.includes(e);return!!t||!i&&void 0}},2331:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._focusNextGridCoreContainer=t._isCellFocusSuppressed=t._isHeaderFocusSuppressed=t._focusGridInnerElement=t._findTabbableParent=t._findNextFocusableElement=t._focusInto=t._findFocusableElements=t._addFocusableContainerListener=t._isKeyboardMode=t._registerKeyboardFocusEvents=void 0;const n=i(9853),r=i(7274),o=i(1502),s=i(8667),a=i(3507);let l=!1,c=0;function d(e){const t=l,i="keydown"===e.type;i&&(e.ctrlKey||e.metaKey||e.altKey)||t!==i&&(l=i)}function u(e,t,i=!1){const n=a.FOCUSABLE_SELECTOR;let r=a.FOCUSABLE_EXCLUDE;t&&(r+=", "+t),i&&(r+=', [tabindex="-1"]');const o=Array.prototype.slice.apply(e.querySelectorAll(n)).filter((e=>(0,a._isVisible)(e))),s=Array.prototype.slice.apply(e.querySelectorAll(r));if(!s.length)return o;return l=s,o.filter((e=>-1===l.indexOf(e)));var l}function h(e,t,i,n){const o=u(t,i?':not([tabindex="-1"])':null),s=(0,r._getActiveDomElement)(e);let a;a=i?o.findIndex((e=>e.contains(s))):o.indexOf(s);const l=a+(n?-1:1);return l<0||l>=o.length?null:o[l]}function p(e,t,i=!1){const n=e.ctrlsSvc.get("gridCtrl");return!(i||!n.focusNextInnerContainer(t))||((i||!t&&!n.isDetailGrid())&&n.forceFocusOutOfContainer(t),!1)}t._registerKeyboardFocusEvents=function(e){const t=(0,r._getDocument)(e);var i;return i=t,c>0||(i.addEventListener("keydown",d),i.addEventListener("mousedown",d)),c++,()=>{c--,function(e){c>0||(e.removeEventListener("keydown",d),e.removeEventListener("mousedown",d))}(t)}},t._isKeyboardMode=function(){return l},t._addFocusableContainerListener=function(e,t,i){t.addManagedElementListeners(i,{keydown:t=>{if(!t.defaultPrevented&&t.key===n.KeyCode.TAB){const n=t.shiftKey;h(e,i,!1,n)||p(e,n)&&t.preventDefault()}}})},t._findFocusableElements=u,t._focusInto=function(e,t=!1,i=!1,n=!1){const r=u(e,n?".ag-tab-guard":null,i),s=t?(0,o._last)(r):r[0];return!!s&&(s.focus({preventScroll:!0}),!0)},t._findNextFocusableElement=h,t._findTabbableParent=function(e,t=5){let i=0;for(;e&&null===(0,s._getTabIndex)(e)&&++i<=t;)e=e.parentElement;return null===(0,s._getTabIndex)(e)?null:e},t._focusGridInnerElement=function(e,t){return e.ctrlsSvc.get("gridCtrl").focusInnerElement(t)},t._isHeaderFocusSuppressed=function(e){return e.gos.get("suppressHeaderFocus")||!!e.overlays?.isExclusive()},t._isCellFocusSuppressed=function(e){return e.gos.get("suppressCellFocus")||!!e.overlays?.isExclusive()},t._focusNextGridCoreContainer=p},2043:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._waitUntil=t._throttle=t._debounce=t._executeNextVMTurn=t._errorOnce=t._warnOnce=t._logIfDebug=t._doOnce=void 0;const i={};function n(e,t){i[t]||(e(),i[t]=!0)}function r(e,...t){n((()=>console.warn("AG Grid: "+e,...t)),e+t?.join(""))}t._doOnce=n,t._logIfDebug=function(e,t,...i){e.get("debug")&&console.log("AG Grid: "+t,...i)},t._warnOnce=r,t._errorOnce=function(e,...t){n((()=>console.error("AG Grid: "+e,...t)),e+t?.join(""))};const o=[];let s=!1;t._executeNextVMTurn=function(e){o.push(e),s||(s=!0,window.setTimeout((()=>{const e=o.slice();o.length=0,s=!1,e.forEach((e=>e()))}),0))},t._debounce=function(e,t,i){let n;return function(...r){const o=this;window.clearTimeout(n),n=window.setTimeout((function(){e.isAlive()&&t.apply(o,r)}),i)}},t._throttle=function(e,t){let i=0;return function(...n){const r=(new Date).getTime();r-i<t||(i=r,e.apply(this,n))}},t._waitUntil=function(e,t,i=100,n){const o=(new Date).getTime();let s=null,a=!1;const l=()=>{const l=(new Date).getTime()-o>i;(e()||l)&&(t(),a=!0,null!=s&&(window.clearInterval(s),s=null),l&&n&&r(n))};l(),a||(s=window.setInterval(l,10))}},1298:function(e,t){function i(e,t,i=!1){const n=e.replace(/\s/g,""),r=t.replace(/\s/g,""),o=n.length,s=r.length,a=new Array(o+1).fill(null).map((()=>new Array(s+1).fill(0)));for(let e=0;e<=o;e+=1)a[e][0]=e;for(let e=0;e<=s;e+=1)a[0][e]=e;for(let e=1;e<=o;e++)for(let t=1;t<=s;t++)n[e-1]===r[t-1]?a[e][t]=a[e-1][t-1]:a[e][t]=1+Math.min(a[e][t-1],Math.min(a[e-1][t],a[e-1][t-1]));const l=a[o][s];let c=Math.max(o,s)-l;if(i){const e=function(e){const t=[],i=e.length;for(let n=1;n<=i;n++)for(let r=0;r<=i-n;r++){const i=r+n-1;t.push(e.slice(r,i+1))}return t}(n);for(let t=0;t<e.length;t++){const i=e[t];-1!==r.indexOf(i)&&(c+=1,c*=i.length)}}return c}Object.defineProperty(t,"__esModule",{value:!0}),t._fuzzySuggestions=void 0,t._fuzzySuggestions=function(e){const{inputValue:t,allSuggestions:n,hideIrrelevant:r,filterByPercentageOfBestMatch:o,addSequentialWeight:s}=e;let a=n.map(((e,n)=>({value:e,relevance:i(t.toLowerCase(),e.toLocaleLowerCase(),s),idx:n})));if(a.sort(((e,t)=>t.relevance-e.relevance)),r&&(a=a.filter((e=>0!==e.relevance))),a.length>0&&o&&o>0){const e=a[0].relevance*o;a=a.filter((t=>e-t.relevance<0))}const l=[],c=[];for(const e of a)l.push(e.value),c.push(e.idx);return{values:l,indices:c}}},4422:function(e,t){function i(e){return null!=e&&""!==e}Object.defineProperty(t,"__esModule",{value:!0}),t._defaultComparator=t._jsonEquals=t._toStringOrNull=t._missing=t._exists=t._makeNull=void 0,t._makeNull=function(e){return null==e||""===e?null:e},t._exists=i,t._missing=function(e){return!i(e)},t._toStringOrNull=function(e){return null!=e&&"function"==typeof e.toString?e.toString():null},t._jsonEquals=function(e,t){return(e?JSON.stringify(e):null)===(t?JSON.stringify(t):null)},t._defaultComparator=function(e,t,i=!1){const n=null==e,r=null==t;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),n&&r)return 0;if(n)return-1;if(r)return 1;function o(e,t){return e>t?1:e<t?-1:0}if("string"!=typeof e)return o(e,t);if(!i)return o(e,t);try{return e.localeCompare(t)}catch(i){return o(e,t)}}},9970:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._createIconNoSpan=t._createIcon=void 0;const n=i(7764),r=i(5230),o=i(3507);function s(e,t,i){let s=null;"smallDown"===e?(0,n._warn)(262):"smallLeft"===e?(0,n._warn)(263):"smallRight"===e&&(0,n._warn)(264);const a=i&&i.getColDef().icons;if(a&&(s=a[e]),t.gos&&!s){const i=t.gos.get("icons");i&&(s=i[e])}if(s){let t;if("function"==typeof s)t=s();else{if("string"!=typeof s)return void(0,n._warn)(38,{iconName:e});t=s}return"string"==typeof t?(0,o._loadTemplate)(t):(0,o._isNodeOrElement)(t)?t:void(0,n._warn)(133,{iconName:e})}{const i=document.createElement("span"),n=t.registry.getIcon(e);n||t.validation?.validateIcon(e);const o=n??e;return i.setAttribute("class",`ag-icon ag-icon-${o}`),i.setAttribute("unselectable","on"),(0,r._setAriaRole)(i,"presentation"),i}}t._createIcon=function(e,t,i){const n=s(e,t,i);if(n){const{className:e}=n;if("string"==typeof e&&e.indexOf("ag-icon")>-1||"object"==typeof e&&e["ag-icon"])return n}const r=document.createElement("span");return r.appendChild(n),r},t._createIconNoSpan=s},6466:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._isUserSuppressingKeyboardEvent=t._isEventFromPrintableCharacter=void 0;const n=i(7274);t._isEventFromPrintableCharacter=function(e){return!(e.altKey||e.ctrlKey||e.metaKey)&&1===e.key?.length},t._isUserSuppressingKeyboardEvent=function(e,t,i,r,o){const s=r?r.getColDef().suppressKeyboardEvent:void 0;if(!s)return!1;const a=(0,n._addGridCommonParams)(e,{event:t,editing:o,column:r,node:i,data:i.data,colDef:r.getColDef()});if(s){if(s(a))return!0}return!1}},3276:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._areEventsNear=void 0,t._areEventsNear=function(e,t,i){if(0===i)return!1;const n=Math.abs(e.clientX-t.clientX),r=Math.abs(e.clientY-t.clientY);return Math.max(n,r)<=i}},7698:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._formatNumberCommas=void 0,t._formatNumberCommas=function(e,t){if("number"!=typeof e)return"";const i=t(),n=i("thousandSeparator",","),r=i("decimalSeparator",".");return e.toString().replace(".",r).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${n}`)}},6996:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._getValueUsingField=t._mergeDeep=t.SKIP_JS_BUILTINS=void 0;const n=i(4422);function r(e){return"object"==typeof e&&null!==e}t.SKIP_JS_BUILTINS=new Set(["__proto__","constructor","prototype"]),t._mergeDeep=function e(i,o,s=!0,a=!1){(0,n._exists)(o)&&function(e,t){if(null!=e)if(Array.isArray(e))for(let i=0;i<e.length;i++)t(i.toString(),e[i]);else for(const i of Object.keys(e))t(i,e[i])}(o,((n,o)=>{if(t.SKIP_JS_BUILTINS.has(n))return;let l=i[n];if(l!==o){if(a){if(null==l&&null!=o){"object"==typeof o&&o.constructor===Object&&(l={},i[n]=l)}}r(o)&&r(l)&&!Array.isArray(l)?e(l,o,s,a):(s||void 0!==o)&&(i[n]=o)}}))},t._getValueUsingField=function(e,t,i){if(!t||!e)return;if(!i)return e[t];const n=t.split(".");let r=e;for(let e=0;e<n.length;e++){if(null==r)return;r=r[n[e]]}return r}},7990:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.AgPromise=t._isPromise=void 0,t._isPromise=function(e){return"function"==typeof e.then},function(e){e[e.IN_PROGRESS=0]="IN_PROGRESS",e[e.RESOLVED=1]="RESOLVED"}(i||(i={}));class n{static all(e){return e.length?new n((t=>{let i=e.length;const n=new Array(i);e.forEach(((e,r)=>{e.then((e=>{n[r]=e,i--,0===i&&t(n)}))}))})):n.resolve()}static resolve(e=null){return new n((t=>t(e)))}constructor(e){this.status=i.IN_PROGRESS,this.resolution=null,this.waiters=[],e((e=>this.onDone(e)),(e=>this.onReject(e)))}then(e){return new n((t=>{this.status===i.RESOLVED?t(e(this.resolution)):this.waiters.push((i=>t(e(i))))}))}onDone(e){this.status=i.RESOLVED,this.resolution=e,this.waiters.forEach((t=>t(e)))}onReject(e){}}t.AgPromise=n},4009:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._selectAllCells=void 0,t._selectAllCells=function(e){const{pinnedRowModel:t,rowModel:i}=e,[n,r]=[t?.isEmpty("top")??!0,t?.isEmpty("bottom")??!0],o=n?null:"top";let s,a;r?(s=null,a=i.getRowCount()-1):(s="bottom",a=t?.getPinnedBottomRowCount()??-1);const{visibleCols:l,rangeSvc:c}=e,d=l.allCols;c&&d?.length&&c.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:a,rowEndPinned:s})}},7766:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._escapeString=void 0;const i=/[&<>"']/g,n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};t._escapeString=function(e,t){if(null==e)return null;const r=e.toString().toString();return t?r:r.replace(i,(e=>n[e]))}},8179:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.validateApiFunction=void 0;const n=i(2043),r="clientSide",o="serverSide",s="infinite",a={onGroupExpandedOrCollapsed:[r],refreshClientSideRowModel:[r],isRowDataEmpty:[r],forEachLeafNode:[r],forEachNodeAfterFilter:[r],forEachNodeAfterFilterAndSort:[r],resetRowHeights:[r],applyTransaction:[r],applyTransactionAsync:[r],flushAsyncTransactions:[r],getBestCostNodeSelection:[r],getServerSideSelectionState:[o],setServerSideSelectionState:[o],applyServerSideTransaction:[o],applyServerSideTransactionAsync:[o],applyServerSideRowData:[o],retryServerSideLoads:[o],flushServerSideAsyncTransactions:[o],refreshServerSide:[o],getServerSideGroupLevelState:[o],refreshInfiniteCache:[s],purgeInfiniteCache:[s],getInfiniteRowCount:[s],isLastRowIndexKnown:[s,o],expandAll:[r,o],collapseAll:[r,o],onRowHeightChanged:[r,o],setRowCount:[s,o],getCacheBlockState:[s,o]},l={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};t.validateApiFunction=function(e,t,i){const r=l[e];if(r){const{version:i,new:o,old:s,message:a}=r,l=s??e;return(...e)=>{const r=o?`Please use ${o} instead. `:"";return(0,n._warnOnce)(`Since ${i} api.${l} is deprecated. ${r}${a??""}`),t.apply(t,e)}}const o=a[e];return o?(...r)=>{const s=i.rowModel.getType();if(o.includes(s))return t.apply(t,r);(0,n._errorOnce)(`api.${e} can only be called when gridOptions.rowModelType is ${o.join(" or ")}`)}:t}},8732:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ENTERPRISE_MODULE_NAMES=void 0,t.ENTERPRISE_MODULE_NAMES={AdvancedFilter:1,AllEnterprise:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1}},5205:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MISSING_MODULE_REASONS=t.getError=t.AG_GRID_ERRORS=t.moduleImportMsg=void 0;const n=i(1298),r=i(8732),o=i(7764),s=i(342),a=i(1389);function l(e,t=!1){return!t||"IntegratedCharts"!==e&&"Sparklines"!==e?`${e}Module`:`${e}Module.with(AgChartsEnterpriseModule)`}t.moduleImportMsg=e=>{const t=e.map((e=>`import { ${l(e)} } from '${r.ENTERPRISE_MODULE_NAMES[e]?"ag-grid-enterprise":"ag-grid-community"}';`));if(e.some((e=>"IntegratedCharts"===e||"Sparklines"===e))){const e="import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';";t.push(e)}return`import { ModuleRegistry } from 'ag-grid-community'; \n${t.join(" \n")} \n\nModuleRegistry.registerModules([ ${e.map((e=>l(e,!0))).join(", ")} ]); \n\nFor more info see: ${o.baseDocLink}/modules/`};const c=({reasonOrId:e,moduleName:i,gridScoped:n,gridId:o,rowModelType:a,additionalText:c,isUmd:d})=>{const u=(0,s.resolveModuleNames)(i,a),h="string"==typeof e?e:t.MISSING_MODULE_REASONS[e];if(d)return function(e,t){const i=t.filter((e=>"IntegratedCharts"===e||"Sparklines"===e));let n="";const o=globalThis?.agCharts;return!o&&i.length>0?n=`Unable to use ${e} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.\n`:t.some((e=>r.ENTERPRISE_MODULE_NAMES[e]))&&(n+=`Unable to use ${e} as that requires the ag-grid-enterprise script to be included.\n`),n}(h,u);const p=u.filter((e=>"IntegratedCharts"===e||"Sparklines"===e)),f=p.length>0?`${p.map((e=>l(e))).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"";return`${`Unable to use ${h} as ${u.length>1?"one of "+u.map((e=>l(e))).join(", "):l(u[0])} is not registered${n?" for gridId: "+o:""}. ${f} Check if you have registered the module:\n`}\n${(0,t.moduleImportMsg)(u)}`+(c?` \n\n${c}`:"")},d=e=>`${e} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.\n\nimport { AgChartsEnterpriseModule } from 'ag-charts-enterprise';\nimport { ModuleRegistry } from 'ag-grid-community';\nimport { ${e} } from 'ag-grid-enterprise';\n    \nModuleRegistry.registerModules([${e}.with(AgChartsEnterpriseModule)]);\n    `;t.AG_GRID_ERRORS={1:()=>"`rowData` must be an array",2:({nodeId:e})=>`Duplicate node id '${e}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id:e})=>`Could not find row id=${e}, data item was not found for this id`,5:({data:e})=>["Could not find data item as object was not found.",e," Consider using getRowId to help the Grid find matching row data"],6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key:e})=>`Unknown key for navigation ${e}`,9:({variable:e})=>`No value for ${e?.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e?.defaultValue} will be used and updated when styles load.`,10:({eventType:e})=>`As of v33, the '${e}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey:e})=>["column ",e," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix:e})=>`Row IDs cannot start with ${e}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:e})=>["value should be either a string or a function",e],16:({expression:e,params:t,e:i})=>["Processing of the expression failed","Expression = ",e,"Params = ",t,"Exception = ",i],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>'You may want to configure via a callback to avoid setup race conditions:\n                     "alignedGrids: () => [linkedGrid]"',21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key:e})=>`${e} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id:e})=>["The getRowId callback must return a string. The ID ",e," is being cast to a string."],26:({fnName:e,preDestroyLink:t})=>`Grid API function ${e}() cannot be called as the grid has been destroyed.\n Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.\n To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`,27:({fnName:e,module:t})=>`API function '${e}' not registered to module '${t}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex:e})=>["tried to insert columns in invalid location, toIndex = ",e,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key:e})=>`the column type '${e}' is a default column type and cannot be overridden.`,35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:({t:e})=>"colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes",37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:({iconName:e})=>`provided icon '${e}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e:e,method:t})=>`${e}\n${(e=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${e}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`)(t)}`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName:e})=>`As of v33, icon '${e}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType:e})=>`The data type definition ${e} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType:e})=>`Missing data type definition - "${e}"`,48:({property:e})=>`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`,49:({methodName:e})=>`Framework component is missing the method ${e}()`,50:({compName:e})=>`Could not find component ${e}, did you forget to configure this component?`,51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:e})=>`setFilterModel() - no column found for colId: ${e}`,63:({colId:e})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${e}`,64:({colId:e})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${e}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter:e})=>`getGui method from filter returned ${e}; it should be a DOM element.`,70:({newFilter:e})=>"Grid option quickFilterText only supports string inputs, received: "+typeof e,71:()=>"debounceMs is ignored when apply button is present",72:({keys:e})=>["ignoring FilterOptionDef as it doesn't contain one of ",e],73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType:e})=>['Unexpected type of filter "',e,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param:e})=>`DateFilter ${e} is not a number`,83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index:e})=>`Invalid row index for ensureIndexVisible: ${e}`,89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:({methodName:e})=>`AnimationFrameService.${e} called but animation frames are off`,93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:e,pageSizeSet:t,pageSizesSet:i,pageSizeOptions:n})=>`'paginationPageSize=${e}'${t?"":" (default value)"}, but ${e} is not included in${i?"":" the default"} paginationPageSizeSelector=[${n?.join(", ")}].`,95:({paginationPageSizeOption:e,paginationPageSizeSelector:t})=>`Either set '${t}' to an array that includes ${e} or to 'false' to disable the page size selector.`,96:({id:e,data:t})=>["Duplicate ID",e,"found for pinned row with data",t,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:e})=>`cellEditor for column ${e} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",100:({rowModelType:e})=>`selectAll only available when rowModelType='clientSide', ie not ${e}`,101:({propertyName:e,componentName:t,agGridDefaults:i,jsComps:r})=>{const o=[],s=[...Object.keys(i??[]).filter((e=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(e))),...Object.keys(r??[])],a=(0,n._fuzzySuggestions)({inputValue:t,allSuggestions:s,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return o.push(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.\n`),a.length>0&&o.push(`         Did you mean: [${a.slice(0,3)}]?\n`),o.push("If using a custom component check it has been registered correctly."),o},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:e,param:t})=>`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`,105:({e:e})=>["chart rendering failed",e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${o.baseDocLink}/theming-migration/`,107:({key:e,value:t})=>`Invalid value for theme param ${e} - ${t}`,108:({e:e})=>["chart update failed",e],109:({aggFuncOrString:e})=>`unrecognised aggregation function ${e}`,110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component:e})=>`Could not find component with name of ${e}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId:e})=>`Unable to update chart. No active chart found with ID: ${e}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange:e})=>`unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`,128:({feature:e})=>`${e} is only available if using 'multiRow' selection mode.`,129:({feature:e,rowModel:t})=>`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:e})=>`icon '${e}' function should return back a string or a dom object`,134:({iconName:e})=>`Did not find icon '${e}'`,135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:({type:e,currentChartType:t})=>`Unable to update chart as a '${e}' update type is not permitted on a ${t}.`,138:({chartType:e})=>`invalid chart type supplied: ${e}`,139:({customThemeName:e})=>`a custom chart theme with the name ${e} has been supplied but not added to the 'chartThemes' list`,140:({name:e})=>`no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel:e})=>`'${e}' is not a valid Chart Tool Panel name`,144:({type:e})=>`Invalid charts data panel group name supplied: '${e}'`,145:({group:e})=>`As of v32, only one charts customize panel group can be expanded at a time. '${e}' will not be expanded.`,146:({comp:e})=>`Unable to instantiate component '${e}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:e})=>`Invalid charts customize panel group name supplied: '${e}'`,148:({group:e})=>`invalid chartGroupsDef config '${e}'`,149:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:({chartType:e})=>`invalid chartType '${e}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:e})=>`no 'seriesChartType' found for colId = '${e}', defaulting to 'line'.`,153:({chartDataType:e})=>`unexpected chartDataType value '${e}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:e})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${e}`,155:({option:e})=>`'${e}' is not a valid Chart Toolbar Option`,156:({panel:e})=>`Invalid panel in chartToolPanelsDef.panels: '${e}'`,157:({unrecognisedGroupIds:e})=>["unable to find group(s) for supplied groupIds:",e],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id:e,dataType:t})=>`Unrecognized data type for excel export [${e}.dataType=${t}]`,163:({featureName:e})=>`Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.\n Please turn off ${e} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds:e})=>["unable to find groups for these supplied groupIds:",e],167:({unrecognisedColIds:e})=>["unable to find columns for these supplied colIds:",e],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy:e})=>`invalid cellRendererParams.refreshStrategy = ${e} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group:e})=>`invalid chartGroupsDef config '${e}'`,174:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,175:({menuTabName:e,itemsToConsider:t})=>[`Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of `,t],176:({key:e})=>`unknown menu item type ${e}`,177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:({colId:e})=>`column ${e} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData:e,childNodeData:t})=>["duplicate group keys for row data, keys should be unique",[e,t]],185:({data:e})=>["getDataPath() should not return an empty path",[e]],186:({rowId:e,rowData:t,duplicateRowsData:i})=>["duplicate group keys for row data, keys should be unique",e,t,...i??[]],187:({rowId:e,firstData:t,secondData:i})=>[`Duplicate node id ${e}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",t,"second instance",i],188:()=>"getRowId callback must be provided for Server Side Row Model selection to work correctly.",189:({startRow:e})=>`invalid value ${e} for startRow, the value should be >= 0`,190:({rowGroupId:e,data:t})=>["null and undefined values are not allowed for server side row model keys",e?`column = ${e}`:"","data is ",t],194:({method:e})=>`calling gridApi.${e}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:e})=>`selecting just ${e?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key:e})=>`Provided ids must be of string type. Invalid id provided: ${e}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:c,201:({rowModelType:e})=>`Could not find row model for rowModelType = ${e}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText:e})=>`Unable to display rows as duplicate row ids (${e}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${o.baseDocLink}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key:e})=>`unable to lookup Tool Panel as invalid key supplied: ${e}`,215:({key:e,defaultByKey:t})=>`the key ${e} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(t??{}).join(",")}`,216:({name:e})=>`Missing component for '${e}'`,217:({invalidColIds:e})=>["unable to find grid columns for the supplied colDef(s):",e],218:({property:e,defaultOffset:t})=>`${e} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`,219:({property:e})=>`Property ${e} does not exist on the target object.`,220:({lineDash:e})=>`'${e}' is not a valid 'lineDash' option.`,221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString:e})=>`unrecognised menu item ${e}`,229:({index:e})=>["invalid row index for ensureIndexVisible: ",e],230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName:e})=>`Framework component is missing the method ${e}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:e})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${e}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>"Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. \nPlease rebuild the selection state and reapply it.",248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:e})=>`AG Grid: Unable to create chart as an invalid chartType = '${e}' was supplied.`,252:()=>"cannot get grid to draw rows when it is in the middle of drawing rows. \nYour code probably called a grid API method while the grid was in the render stage. \nTo overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). \nTo see what part of your code that caused the refresh check this stacktrace.",253:({version:e})=>["Illegal version string: ",e],254:()=>"Cannot create chart: no chart themes available.",255:({point:e})=>`Lone surrogate U+${e?.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>d("IntegratedChartsModule"),258:()=>d("SparklinesModule"),259:({part:e})=>`the argument to theme.withPart must be a Theming API part object, received: ${e}`,260:({propName:e,compName:t,gridScoped:i,gridId:n,rowModelType:r})=>c({reasonOrId:`AG Grid '${e}' component: ${t}`,moduleName:a.USER_COMP_MODULES[t],gridId:n,gridScoped:i,rowModelType:r}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId:e})=>`Unable to infer chart data type for column '${e}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${o.baseDocLink}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection"},t.getError=function(e,i){const n=t.AG_GRID_ERRORS[e];if(!n)return[`Missing error text for error id ${e}!`];const r=n(i),s=`\nSee ${(0,o.getErrorLink)(e,i)}`;return Array.isArray(r)?r.concat(s):[r,s]},t.MISSING_MODULE_REASONS={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"}},7764:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._preInitErrMsg=t._errMsg=t._logPreInitErr=t._error=t._warn=t.getErrorLink=t.toStringWithNullUndefined=t.setValidationDocLink=t.suppressAllLogs=t.provideValidationServiceLogger=t.baseDocLink=void 0;const n=i(3263),r=i(2043),o=i(7205),s="_version_";let a=null,l=!1;function c(e,t,i){return a?.getConsoleMessage(e,t)??[f(e,t,i)]}function d(e,t,i,n){l||e(`error #${t}`,...c(t,i,n))}function u(e){let t=e;return e instanceof Error?t=e.toString():"object"==typeof e&&(t=function(e){if(!e)return String(e);const t={};for(const i of Object.keys(e))"object"!=typeof e[i]&&"function"!=typeof e[i]&&(t[i]=e[i]);return JSON.stringify(t)}(e)),t}function h(e,t){return`${e}?${t.toString()}`}function p(e,i){const n=new URLSearchParams;if(n.append(s,o.VERSION),i)for(const e of Object.keys(i))n.append(e,u(i[e]));const r=`${t.baseDocLink}/errors/${e}`,a=h(r,n);return a.length<=2e3?a:function(e,t,i){const n=Array.from(t.entries()).sort(((e,t)=>t[1].length-e[1].length));let r=h(e,t);for(const[o,a]of n){if(o===s)continue;const n=r.length-i;if(n<=0)break;const l="...",c=n+l.length,d=a.length-c>100?a.slice(0,a.length-c)+l:a.slice(0,100)+l;t.set(o,d),r=h(e,t)}return r}(r,n,2e3)}t.baseDocLink=`${n.BASE_URL}/javascript-data-grid`,t.provideValidationServiceLogger=function(e){a=e},t.suppressAllLogs=function(){l=!0},t.setValidationDocLink=function(e){t.baseDocLink=e},t.toStringWithNullUndefined=function(e){return void 0===e?"undefined":null===e?"null":e},t.getErrorLink=p;const f=(e,t,i)=>`${i?i+" \n":""}Visit ${p(e,t)}${i?"":" \n  Alternatively register the ValidationModule to see the full message in the console."}`;function g(e,t){const i=t[0];return`error #${i} `+c(i,t[1],e).join(" ")}t._warn=function(...e){d(r._warnOnce,e[0],e[1])},t._error=function(...e){d(r._errorOnce,e[0],e[1])},t._logPreInitErr=function(e,t,i){d(r._errorOnce,e,t,i)},t._errMsg=function(...e){return g(void 0,e)},t._preInitErrMsg=function(...e){return g("\n",e)}},342:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.resolveModuleNames=t.MODULES_FOR_ROW_MODELS=t.RESOLVABLE_MODULE_NAMES=void 0;const i=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"];t.RESOLVABLE_MODULE_NAMES={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:i,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...i,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...i,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},t.MODULES_FOR_ROW_MODELS={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"},t.resolveModuleNames=function(e,i){const n=[];return(Array.isArray(e)?e:[e]).forEach((e=>{const r=t.RESOLVABLE_MODULE_NAMES[e];r?r.forEach((e=>{const r=t.MODULES_FOR_ROW_MODELS[e];r&&r!==i||n.push(e)})):n.push(e)})),n}},4842:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.COL_DEF_VALIDATORS=void 0;const n=i(8125),r=i(7764),o=i(1389),s={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0};t.COL_DEF_VALIDATORS=()=>({objectName:"colDef",allProperties:Object.keys(s),docsUrl:"column-properties/",deprecations:{checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},validations:{aggFunc:{module:"SharedAggregation"},autoHeight:{supportedRowModels:["clientSide","serverSide"],module:"RowAutoHeight"},cellClass:{module:"CellStyle"},cellClassRules:{module:"CellStyle"},cellEditor:({cellEditor:e,editable:t})=>{if(!t)return null;if("string"==typeof e){const t=o.USER_COMP_MODULES[e];if(t)return{module:t}}return{module:"CustomEditor"}},cellRenderer:({cellRenderer:e})=>{if("string"!=typeof e)return null;const t=o.USER_COMP_MODULES[e];return t?{module:t}:null},cellRendererParams:{validate:e=>null==e.rowGroup&&null==e.rowGroupIndex&&"agGroupCellRenderer"!==e.cellRenderer||!("checkbox"in e.cellRendererParams)?null:'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.'},cellStyle:{module:"CellStyle"},children:()=>(0,t.COL_DEF_VALIDATORS)(),columnChooserParams:{module:"ColumnMenu"},contextMenuItems:{module:"ContextMenu"},dndSource:{module:"DragAndDrop"},dndSourceOnRowDrag:{module:"DragAndDrop"},editable:({editable:e,cellEditor:t})=>e&&!t?{module:"TextEditor"}:null,enableCellChangeFlash:{module:"HighlightChanges"},enablePivot:{module:"SharedPivot"},enableRowGroup:{module:"SharedRowGrouping"},enableValue:{module:"SharedAggregation"},filter:({filter:e})=>{if(e&&"string"!=typeof e&&"boolean"!=typeof e)return{module:"CustomFilter"};if("string"==typeof e){const t=o.USER_COMP_MODULES[e];if(t)return{module:t}}return{module:"ColumnFilter"}},floatingFilter:{module:"ColumnFilter"},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,{rowSelection:t})=>"multiple"===t?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>"multiple"===t?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>"multiple"===t?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerTooltip:{module:"Tooltip"},headerValueGetter:{validate:e=>{const t=e.headerValueGetter;return"function"==typeof t||"string"==typeof t?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:({icons:e})=>{if(e){if(e.smallDown)return(0,r._errMsg)(262);if(e.smallLeft)return(0,r._errMsg)(263);if(e.smallRight)return(0,r._errMsg)(264)}return null}},mainMenuItems:{module:"ColumnMenu"},menuTabs:e=>{const t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some((e=>t.includes(e)))?{module:"ColumnMenu"}:null},pivot:{module:"SharedPivot"},pivotIndex:{module:"SharedPivot"},rowDrag:{module:"RowDrag"},rowGroup:{module:"SharedRowGrouping"},rowGroupIndex:{module:"SharedRowGrouping"},sortingOrder:{validate:e=>{const t=e.sortingOrder;if(Array.isArray(t)&&t.length>0){const e=t.filter((e=>!n.DEFAULT_SORTING_ORDER.includes(e)));if(e.length>0)return`sortingOrder must be an array with elements from [${n.DEFAULT_SORTING_ORDER.map(r.toStringWithNullUndefined).join()}], currently it includes [${e.map(r.toStringWithNullUndefined).join()}]`}else if(!Array.isArray(t)||t.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${t}`;return null}},tooltipField:{module:"Tooltip"},tooltipValueGetter:{module:"Tooltip"},type:{validate:e=>{const t=e.type;return t instanceof Array?t.some((e=>"string"!=typeof e))?"if colDef.type is supplied an array it should be of type 'string[]'":null:"string"==typeof t?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(e,{suppressRowTransform:t})=>t?null:"colDef.rowSpan requires suppressRowTransform to be enabled."},spanRows:{module:"CellSpan",dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[!1,void 0]},rowSpan:{required:[!1,void 0]}},validate:(e,{rowSelection:t,cellSelection:i,suppressRowTransform:n,enableCellSpan:r,pagination:o,rowDragEntireRow:s,enableCellTextSelection:a})=>"object"==typeof t&&"singleRow"===t?.mode&&t?.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":i?"colDef.spanRows is not supported with cellSelection.":n?"colDef.spanRows is not supported with suppressRowTransform.":r?o?"colDef.spanRows is not supported with pagination.":s?"colDef.spanRows is not supported with rowDragEntireRow.":a?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."}}})},711:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GRID_OPTIONS_VALIDATORS=void 0;const n=i(3080),r=i(7274),o=i(920),s=i(8125),a=i(6996),l=i(7764);function c(e,t,i,n=Number.MAX_VALUE){return"number"==typeof t||null==t?null==t||t>=i&&t<=n?null:n===Number.MAX_VALUE?`${e}: value should be greater than or equal to ${i}`:`${e}: value should be between ${i} and ${n}`:`${e}: value should be a number`}const d=()=>{const e={alignedGrids:{module:"AlignedGrids"},allowContextMenuWithControlKey:{module:"ContextMenu"},autoSizePadding:{validate({autoSizePadding:e}){return c("autoSizePadding",e,0)}},autoSizeStrategy:{module:"ColumnAutoSize"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate({cacheBlockSize:e}){return c("cacheBlockSize",e,1)}},cacheOverflowSize:{validate({cacheOverflowSize:e}){return c("cacheOverflowSize",e,1)}},cellSelection:{module:"CellSelection"},columnHoverHighlight:{module:"ColumnHover"},datasource:{supportedRowModels:["infinite"],module:"InfiniteRowModel"},doesExternalFilterPass:{module:"ExternalFilter"},domLayout:{validate:e=>{const t=e.domLayout,i=["autoHeight","normal","print"];return t&&!i.includes(t)?`domLayout must be one of [${i.join()}], currently it's ${t}`:null}},editType:{module:"EditCore"},enableAdvancedFilter:{module:"AdvancedFilter"},enableCharts:{module:"IntegratedCharts"},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{module:"CellSelection",dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},rowNumbers:{module:"RowNumbers"},getContextMenuItems:{module:"ContextMenu"},getLocaleText:{module:"Locale"},getMainMenuItems:{module:"ColumnMenu"},getRowClass:{module:"RowStyle"},getRowStyle:{module:"RowStyle"},grandTotalRow:{module:"SharedRowGrouping"},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},icons:{validate:({icons:e})=>{if(e){if(e.smallDown)return(0,l._errMsg)(262);if(e.smallLeft)return(0,l._errMsg)(263);if(e.smallRight)return(0,l._errMsg)(264)}return null}},infiniteInitialRowCount:{validate({infiniteInitialRowCount:e}){return c("infiniteInitialRowCount",e,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},initialState:{module:"GridState"},isExternalFilterPresent:{module:"ExternalFilter"},keepDetailRowsCount:{validate({keepDetailRowsCount:e}){return c("keepDetailRowsCount",e,1)}},localeText:{module:"Locale"},masterDetail:{module:"SharedMasterDetail"},pagination:{module:"Pagination"},paginationPageSize:{validate({paginationPageSize:e}){return c("paginationPageSize",e,1)}},paginationPageSizeSelector:{validate:e=>{const t=e.paginationPageSizeSelector;return"boolean"==typeof t||null==t||t.length?null:"'paginationPageSizeSelector' cannot be an empty array.\n                    If you want to hide the page size selector, set paginationPageSizeSelector to false."}},pinnedTopRowData:{module:"PinnedRow"},pinnedBottomRowData:{module:"PinnedRow"},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}},module:"SharedPivot"},pivotPanelShow:{module:"RowGroupingPanel"},quickFilterText:{supportedRowModels:["clientSide"],module:"QuickFilter"},rowBuffer:{validate({rowBuffer:e}){return c("rowBuffer",e,0)}},rowClass:{validate:e=>"function"==typeof e.rowClass?"rowClass should not be a function, please use getRowClass instead":null,module:"RowStyle"},rowClassRules:{module:"RowStyle"},rowData:{supportedRowModels:["clientSide"],module:"ClientSideRowModel"},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{treeData:{required:[!1,void 0]},pagination:{required:[!1,void 0]}},module:"RowDrag"},rowGroupPanelShow:{module:"RowGroupingPanel"},rowSelection:{validate({rowSelection:e}){return e&&"string"==typeof e?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':e&&"object"!=typeof e?"Expected `RowSelectionOptions` object for the `rowSelection` property.":e&&"multiRow"!==e.mode&&"singleRow"!==e.mode?`Selection mode "${e.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null},module:"SharedRowSelection"},rowStyle:{validate:e=>{const t=e.rowStyle;return t&&"function"==typeof t?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null},module:"RowStyle"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"ServerSideRowModel"},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate({serverSideInitialRowCount:e}){return c("serverSideInitialRowCount",e,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sideBar:{module:"SideBar"},sortingOrder:{validate:e=>{const t=e.sortingOrder;if(Array.isArray(t)&&t.length>0){const e=t.filter((e=>!s.DEFAULT_SORTING_ORDER.includes(e)));if(e.length>0)return`sortingOrder must be an array with elements from [${s.DEFAULT_SORTING_ORDER.map(l.toStringWithNullUndefined).join()}], currently it includes [${e.map(l.toStringWithNullUndefined).join()}]`}else if(!Array.isArray(t)||t.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${t}`;return null}},statusBar:{module:"StatusBar"},tooltipHideDelay:{validate:e=>e.tooltipHideDelay&&e.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:e=>e.tooltipShowDelay&&e.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],module:"SharedTreeData",validate:e=>{const t=e.rowModelType??"clientSide";switch(t){case"clientSide":{const{treeDataChildrenField:t,getDataPath:i}=e;return t||i?t&&i?"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.":null:"treeData requires either 'treeDataChildrenField' or 'getDataPath' in the clientSide row model."}case"serverSide":{const i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:i}}return null}},treeDataChildrenField:{module:"SharedTreeData"},undoRedoCellEditing:{module:"UndoRedoEdit"},valueCache:{module:"ValueCache"},viewportDatasource:{supportedRowModels:["viewport"],module:"ViewportRowModel"},viewportRowModelBufferSize:{validate({viewportRowModelBufferSize:e}){return c("viewportRowModelBufferSize",e,0)}},viewportRowModelPageSize:{validate({viewportRowModelPageSize:e}){return c("viewportRowModelPageSize",e,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},enableCellSpan:{module:"CellSpan"}},t={};return o._BOOLEAN_GRID_OPTIONS.forEach((e=>{t[e]={expectedType:"boolean"}})),o._NUMBER_GRID_OPTIONS.forEach((e=>{t[e]={expectedType:"number"}})),(0,a._mergeDeep)(t,e),t};t.GRID_OPTIONS_VALIDATORS=()=>({objectName:"gridOptions",allProperties:[...o._ALL_GRID_OPTIONS,...n._ALL_EVENTS.map((e=>(0,r._getCallbackForEvent)(e)))],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:{suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."}},validations:d()})},9938:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEPRECATED_ICONS_V33=t.ICON_MODULES=t.ICON_VALUES=void 0,t.ICON_VALUES={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1},t.ICON_MODULES={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore"},t.DEPRECATED_ICONS_V33=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"])},3781:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MENU_ITEM_MODULES=void 0,t.MENU_ITEM_MODULES={pinSubMenu:"PinnedColumn",pinLeft:"PinnedColumn",pinRight:"PinnedColumn",clearPinned:"PinnedColumn",valueAggSubMenu:"SharedAggregation",autoSizeThis:"ColumnAutoSize",autoSizeAll:"ColumnAutoSize",rowGroup:"SharedRowGrouping",rowUnGroup:"SharedRowGrouping",resetColumns:"CommunityCore",expandAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],contractAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],copy:"Clipboard",copyWithHeaders:"Clipboard",copyWithGroupHeaders:"Clipboard",cut:"Clipboard",paste:"Clipboard",export:["CsvExport","ExcelExport"],csvExport:"CsvExport",excelExport:"ExcelExport",separator:"CommunityCore",pivotChart:"IntegratedCharts",chartRange:"IntegratedCharts",columnFilter:"ColumnFilter",columnChooser:"ColumnMenu",sortAscending:"Sort",sortDescending:"Sort",sortUnSort:"Sort"}},1389:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.USER_COMP_MODULES=void 0,t.USER_COMP_MODULES={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar"}},5010:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationModule=void 0;const n=i(7205),r=i(5147);t.ValidationModule={moduleName:"Validation",version:n.VERSION,beans:[r.ValidationService]}},5147:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._fuzzyCheckStrings=t.ValidationService=void 0;const n=i(8731),r=i(2891),o=i(2132),s=i(2043),a=i(1298),l=i(8179),c=i(5205),d=i(7764),u=i(4842),h=i(711),p=i(9938),f=i(3781),g=i(1389);class m extends n.BeanStub{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,(0,d.provideValidationServiceLogger)(this)}postConstruct(){this.processGridOptions(this.gridOptions)}warnOnInitialPropertyUpdate(e,t){"api"===e&&r.INITIAL_GRID_OPTION_KEYS[t]&&(0,d._warn)(22,{key:t})}processGridOptions(e){this.processOptions(e,(0,h.GRID_OPTIONS_VALIDATORS)())}validateApiFunction(e,t){return(0,l.validateApiFunction)(e,t,this.beans)}missingUserComponent(e,t,i,n){const r=g.USER_COMP_MODULES[t];r?this.gos.assertModuleRegistered(r,`AG Grid '${e}' component: ${t}`):(0,d._warn)(101,{propertyName:e,componentName:t,agGridDefaults:i,jsComps:n})}checkRowEvents(e){b.has(e)&&(0,d._warn)(10,{eventType:e})}validateIcon(e){if(p.DEPRECATED_ICONS_V33.has(e)&&(0,d._warn)(43,{iconName:e}),p.ICON_VALUES[e])return;const t=p.ICON_MODULES[e];t?(0,d._error)(200,{reasonOrId:`icon '${e}'`,moduleName:t,gridScoped:(0,o._areModulesGridScoped)(),gridId:this.beans.context.getGridId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."}):(0,d._warn)(134,{iconName:e})}validateMenuItem(e){const t=f.MENU_ITEM_MODULES[e];t&&this.gos.assertModuleRegistered(t,`menu item '${e}'`)}isProvidedUserComp(e){return!!g.USER_COMP_MODULES[e]}validateColDef(e,t,i){!i&&this.beans.dataTypeSvc?.isColPendingInference(t)||this.processOptions(e,(0,u.COL_DEF_VALIDATORS)())}processOptions(e,t){const{validations:i,deprecations:n,allProperties:r,propertyExceptions:o,objectName:a,docsUrl:l}=t;r&&!0!==this.gridOptions.suppressPropertyNamesCheck&&this.checkProperties(e,[...o??[],...Object.keys(n)],r,a,l);const c=new Set,d=t=>{const n=i[t];if(n){if("function"==typeof n){const i=n(e,this.gridOptions,this.beans);if(!i)return;if("objectName"in i){const n=e[t];return Array.isArray(n)?void n.forEach((e=>{this.processOptions(e,i)})):void this.processOptions(e[t],i)}return i}return n}};Object.keys(e).forEach((t=>{const i=n[t];if(i){const{message:e,version:n}=i;c.add(`As of v${n}, ${String(t)} is deprecated. ${e??""}`)}const r=e[t];if(null==r||!1===r)return;const o=d(t);if(!o)return;const{module:s,dependencies:a,validate:l,supportedRowModels:u,expectedType:h}=o;if(h){const e=typeof r;if(e!==h)return void c.add(`${String(t)} should be of type '${h}' but received '${e}' (${r}).`)}if(u){const e=this.gridOptions.rowModelType??"clientSide";if(!u.includes(e))return void c.add(`${String(t)} is not supported with the '${e}' row model. It is only valid with: ${u.join(", ")}.`)}if(s){const e=Array.isArray(s)?s:[s];let i=!0;if(e.forEach((e=>{this.gos.assertModuleRegistered(e,String(t))||(i=!1)})),!i)return}if(a){const i=this.checkForRequiredDependencies(t,a,e);if(i)return void c.add(i)}if(l){const t=l(e,this.gridOptions,this.beans);if(t)return void c.add(t)}})),c.size>0&&c.forEach((e=>{(0,s._warnOnce)(e)}))}checkForRequiredDependencies(e,t,i){const n=Object.entries(t).filter((([e,t])=>{const n=i[e];return!t.required.includes(n)}));return 0===n.length?null:n.map((([t,i])=>`'${String(e)}' requires '${t}' to be one of [${i.required.map((e=>null===e?"null":void 0===e?"undefined":e)).join(", ")}]. ${i.reason??""}`)).join("\n           ")}checkProperties(e,t,i,n,r){const o=v(Object.getOwnPropertyNames(e),["__ob__","__v_skip","__metadata__",...t,...i],i),a=Object.keys(o);for(const e of a){let t=`invalid ${n} property '${e}' did you mean any of these: ${o[e].slice(0,8).join(", ")}.`;i.includes("context")&&(t+=`\nIf you are trying to annotate ${n} with application data, use the '${n}.context' property instead.`),(0,s._warnOnce)(t)}if(a.length>0&&r){const e=this.beans.frameworkOverrides.getDocLink(r);(0,s._warnOnce)(`to see all the valid ${n} properties please check: ${e}`)}}getConsoleMessage(e,t){return(0,c.getError)(e,t)}}function v(e,t,i){const n={},r=e.filter((e=>!t.some((t=>t===e))));return r.length>0&&r.forEach((e=>n[e]=(0,a._fuzzySuggestions)({inputValue:e,allSuggestions:i}).values)),n}t.ValidationService=m,t._fuzzyCheckStrings=v;const b=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"])},7486:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getCellValue=t.expireValueCache=void 0;const n=i(4422),r=i(7766);t.expireValueCache=function(e){e.valueCache?.expire()},t.getCellValue=function(e,t){const{colKey:i,rowNode:o,useFormatter:s}=t,a=e.colModel.getColDefCol(i)??e.colModel.getCol(i);if((0,n._missing)(a))return null;const l=e.valueSvc.getValueForDisplay(a,o);if(s){return e.valueSvc.formatValue(a,o,l)??(0,r._escapeString)(l,!0)}return l}},2878:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeDetectionService=void 0;const n=i(8731),r=i(7274),o=i(6800);class s extends n.BeanStub{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;(0,r._isClientSideRowModel)(e,t)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:i}=this.beans;if("paste"===e.source||t.get("suppressChangeDetection"))return;const n=e.node,r=[n],s=this.clientSideRowModel,a=s?.rootNode;if(a&&!n.isRowPinned()){const i=t.get("aggregateOnlyChangedColumns"),l=new o.ChangedPath(i,a);l.addParentNode(n.parent,[e.column]),s.doAggregate(l),l.forEachChangedNodeDepthFirst((e=>{r.push(e)}))}i.refreshCells({rowNodes:r})}}t.ChangeDetectionService=s},5751:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionService=void 0;const n=i(8731),r=i(7764);class o extends n.BeanStub{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if("string"==typeof e)return this.evaluateExpression(e,t);(0,r._error)(15,{expression:e})}evaluateExpression(e,t){try{const i=this.createExpressionFunction(e);return i(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return(0,r._error)(16,{expression:e,params:t,e:i}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const i=this.createFunctionBody(e),n=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",i);return t[e]=n,n}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}}t.ExpressionService=o},3913:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueCache=void 0;const n=i(8731);class r extends n.BeanStub{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){const e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){if(this.active){const n=this.cacheVersion;e.__cacheVersion!==n&&(e.__cacheVersion=n,e.__cacheData={}),e.__cacheData[t]=i}}getValue(e,t){if(this.active&&e.__cacheVersion===this.cacheVersion)return e.__cacheData[t]}}t.ValueCache=r},6431:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellApiModule=t.ChangeDetectionModule=t.ExpressionModule=t.ValueCacheModule=void 0;const n=i(7205),r=i(7486),o=i(2878),s=i(5751),a=i(3913);t.ValueCacheModule={moduleName:"ValueCache",version:n.VERSION,beans:[a.ValueCache],apiFunctions:{expireValueCache:r.expireValueCache}},t.ExpressionModule={moduleName:"Expression",version:n.VERSION,beans:[s.ExpressionService]},t.ChangeDetectionModule={moduleName:"ChangeDetection",version:n.VERSION,beans:[o.ChangeDetectionService]},t.CellApiModule={moduleName:"CellApi",version:n.VERSION,apiFunctions:{getCellValue:r.getCellValue}}},5736:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueService=void 0;const n=i(8731),r=i(7274),o=i(4422),s=i(6996),a=i(7764);class l extends n.BeanStub{constructor(){super(...arguments),this.beanName="valueSvc",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=(0,r._isServerSideRowModel)(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=e=>this.callColumnCellValueChangedHandler(e);this.eventSvc.addEventListener("cellValueChanged",e,!0),this.addDestroyFunc((()=>this.eventSvc.removeEventListener("cellValueChanged",e,!0))),this.addManagedPropertyListener("treeData",(e=>this.isTreeData=e.currentValue))}getValueForDisplay(e,t){const i=t.leafGroup&&this.colModel.isPivotMode(),n=t.group&&t.expanded&&!t.footer&&!i,r=this.gos.get("groupSuppressBlankHeader");if(!n||r)return this.getValue(e,t);let o=!1;const s=this.gos.get("groupTotalRow");if("function"!=typeof s)o=!!s;else{o=!!this.gos.getCallback("groupTotalRow")({node:this})}const a=n&&o;return this.getValue(e,t,a)}getValue(e,t,i=!1){if(this.initialised||this.init(),!t)return;const n=e.getColDef(),r=n.field,o=e.getColId(),a=t.data;let l;const c=t.groupData&&void 0!==t.groupData[o],d=!i&&t.aggData&&void 0!==t.aggData[o],u=this.isSsrm&&i&&!!e.getColDef().aggFunc,h=this.isSsrm&&t.footer&&t.field&&(!0===e.getColDef().showRowGroup||e.getColDef().showRowGroup===t.field);if(this.isTreeData&&d?l=t.aggData[o]:this.isTreeData&&n.valueGetter?l=this.executeValueGetter(n.valueGetter,a,e,t):this.isTreeData&&r&&a?l=(0,s._getValueUsingField)(a,r,e.isFieldContainsDots()):c?l=t.groupData[o]:d?l=t.aggData[o]:n.valueGetter?l=this.executeValueGetter(n.valueGetter,a,e,t):h?l=(0,s._getValueUsingField)(a,t.field,e.isFieldContainsDots()):r&&a&&!u&&(l=(0,s._getValueUsingField)(a,r,e.isFieldContainsDots())),this.cellExpressions&&"string"==typeof l&&0===l.indexOf("=")){const i=l.substring(1);l=this.executeValueGetter(i,a,e,t)}if(null==l){const i=this.getOpenedGroup(t,e);if(null!=i)return i}return l}parseValue(e,t,i,n){const s=e.getColDef(),a=s.valueParser;if((0,o._exists)(a)){const o=(0,r._addGridCommonParams)(this.gos,{node:t,data:t?.data,oldValue:n,newValue:i,colDef:s,column:e});return"function"==typeof a?a(o):this.expressionSvc?.evaluate(a,o)}return i}getDeleteValue(e,t){return(0,o._exists)(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t))??null:null}formatValue(e,t,i,n,o=!0){let s,a=null;const l=e.getColDef();if(n?s=n:o&&(s=l.valueFormatter),s){const n=(0,r._addGridCommonParams)(this.gos,{value:i,node:t,data:t?t.data:null,colDef:l,column:e});a="function"==typeof s?s(n):this.expressionSvc?this.expressionSvc.evaluate(s,n):null}else if(l.refData)return l.refData[i]||"";return null==a&&Array.isArray(i)&&(a=i.join(", ")),a}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup"))return;if(!t.getColDef().showRowGroup)return;const i=t.getColDef().showRowGroup;let n=e.parent;for(;null!=n;){if(n.rowGroupColumn&&(!0===i||i===n.rowGroupColumn.getColId()))return n.key;n=n.parent}}setValue(e,t,i,n){const s=this.colModel.getColDefCol(t);if(!e||!s)return!1;(0,o._missing)(e.data)&&(e.data={});const{field:l,valueSetter:c}=s.getColDef();if((0,o._missing)(l)&&(0,o._missing)(c))return(0,a._warn)(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(s,i))return(0,a._warn)(135),!1;const d=(0,r._addGridCommonParams)(this.gos,{node:e,data:e.data,oldValue:this.getValue(s,e),newValue:i,colDef:s.getColDef(),column:s});let u;if(d.newValue=i,u=(0,o._exists)(c)?"function"==typeof c?c(d):this.expressionSvc?.evaluate(c,d):this.setValueUsingField(e.data,l,i,s.isFieldContainsDots()),void 0===u&&(u=!0),!u)return!1;e.resetQuickFilterAggregateText(),this.valueCache?.onDataChanged();const h=this.getValue(s,e);return this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:d.column,colDef:d.colDef,data:e.data,node:e,oldValue:d.oldValue,newValue:h,value:h,source:n}),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;"function"==typeof t&&this.beans.frameworkOverrides.wrapOutgoing((()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})}))}setValueUsingField(e,t,i,n){if(!t)return!1;let r=!1;if(n){const n=t.split(".");let o=e;for(;n.length>0&&o;){const e=n.shift();0===n.length?(r=o[e]===i,r||(o[e]=i)):o=o[e]}}else r=e[t]===i,r||(e[t]=i);return!r}executeValueGetterWithValueCache(e,t,i,n){const r=i.getColId(),o=this.valueCache.getValue(n,r);if(void 0!==o)return o;const s=this.executeValueGetterWithoutValueCache(e,t,i,n);return this.valueCache.setValue(n,r,s),s}executeValueGetterWithoutValueCache(e,t,i,n){const o=(0,r._addGridCommonParams)(this.gos,{data:t,node:n,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,n)});let s;return s="function"==typeof e?e(o):this.expressionSvc?.evaluate(e,o),s}getValueCallback(e,t){const i=this.colModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),n=e.getColDef().keyCreator;let o=i;if(n){o=n((0,r._addGridCommonParams)(this.gos,{value:i,colDef:e.getColDef(),column:e,node:t,data:t.data}))}return"string"==typeof o||null==o||(o=String(o),"[object Object]"===o&&(0,a._warn)(121)),o}}t.ValueService=l},6511:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.VanillaFrameworkOverrides=void 0;const n=i(3263),r=i(2979),o=i(7990),s=i(7764);t.VanillaFrameworkOverrides=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e(),this.baseDocLink=`${n.BASE_URL}/${this.frameworkName}-data-grid`,(0,s.setValidationDocLink)(this.baseDocLink)}setInterval(e,t){return new o.AgPromise((i=>{i(window.setInterval(e,t))}))}addEventListener(e,t,i,n){let o={};if("object"==typeof n?o=n:"boolean"==typeof n&&(o={capture:n}),null==o.passive){const e=(0,r.getPassiveStateForEvent)(t);null!=e&&(o.passive=e)}e.addEventListener(t,i,o)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`${this.baseDocLink}${e?`/${e}`:""}`}}},7205:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="33.1.0"},7321:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgAbstractField=void 0;const n=i(5230),r=i(3507),o=i(2747);class s extends o.AgAbstractLabel{constructor(e,t,i,n){super(e,t,i),this.className=n}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i}=this.config;null!=e&&this.setWidth(e),null!=t&&this.setValue(t),null!=i&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();null==i||""==i||null!==(0,n._getAriaLabel)(e)?(0,n._setAriaLabelledBy)(e,""):(0,n._setAriaLabelledBy)(e,t??"")}setAriaLabel(e){return(0,n._setAriaLabel)(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return(0,r._setFixedWidth)(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e||(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"})),this}}t.AgAbstractField=s},8085:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgAbstractInputField=void 0;const n=i(5230),r=i(3507),o=i(7321),s=i(8020);class a extends o.AgAbstractField{constructor(e,t,i="text",n="input"){super(e,e?.template??`\n            <div role="presentation">\n                <div data-ref="eLabel" class="ag-input-field-label"></div>\n                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <${n} data-ref="eInput" class="ag-input-field-input"></${n}>\n                </div>\n            </div>`,[],t),this.inputType=i,this.displayFieldTag=n,this.eLabel=s.RefPlaceholder,this.eWrapper=s.RefPlaceholder,this.eInput=s.RefPlaceholder}postConstruct(){super.postConstruct(),this.setInputType();const{eLabel:e,eWrapper:t,eInput:i,className:n}=this;e.classList.add(`${n}-label`),t.classList.add(`${n}-input-wrapper`),i.classList.add(`${n}-input`),this.addCssClass("ag-input-field"),i.id=i.id||`ag-${this.getCompId()}-input`;const{inputName:r,inputWidth:o}=this.config;null!=r&&this.setInputName(r),null!=o&&this.setInputWidth(o),this.addInputListeners(),this.activateTabIndex([i])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return(0,r._setElementWidth)(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){return this.eInput.maxLength=e,this}setInputPlaceholder(e){return(0,r._addOrRemoveAttribute)(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return(0,n._setAriaLabel)(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return(0,r._setDisabled)(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(!0===e)(0,r._addOrRemoveAttribute)(this.eInput,"autocomplete",null);else{const t="string"==typeof e?e:"off";(0,r._addOrRemoveAttribute)(this.eInput,"autocomplete",t)}return this}}t.AgAbstractInputField=a},2178:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.agAbstractLabelCSS=void 0,t.agAbstractLabelCSS=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}"},2747:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgAbstractLabel=void 0;const n=i(5230),r=i(3507),o=i(2178),s=i(8020);class a extends s.Component{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(o.agAbstractLabelCSS)}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:n,disabled:r}=this.config;null!=r&&this.setDisabled(r),null!=e&&this.setLabelSeparator(e),null!=t&&this.setLabel(t),null!=i&&this.setLabelWidth(i),this.setLabelAlignment(n||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;(0,r._clearElement)(t),"string"==typeof e?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),""===e?((0,r._setDisplayed)(t,!1),(0,n._setAriaRole)(t,"presentation")):((0,r._setDisplayed)(t,!0),(0,n._setAriaRole)(t,null))}setLabelSeparator(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this}getLabelId(){const e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e||(this.label=e,this.refreshLabel()),this}setLabelAlignment(e){const t=this.getGui().classList;return t.toggle("ag-label-align-left","left"===e),t.toggle("ag-label-align-right","right"===e),t.toggle("ag-label-align-top","top"===e),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return null==this.label||(0,r._setElementWidth)(this.eLabel,e),this}setDisabled(e){e=!!e;const t=this.getGui();return(0,r._setDisabled)(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}}t.AgAbstractLabel=a},66:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgCheckboxSelector=t.AgCheckbox=void 0;const n=i(8085);class r extends n.AgAbstractInputField{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;"boolean"==typeof e&&this.setReadOnly(e),"boolean"==typeof t&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return void 0===this.selected||!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){return this.getInputElement().name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected="boolean"==typeof e?e:void 0;const i=this.eInput;i.checked=e,i.indeterminate=void 0===e,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const n=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:n.id,name:n.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",!0===e),t.toggle("ag-indeterminate",null==e)}}t.AgCheckbox=r,t.AgCheckboxSelector={selector:"AG-CHECKBOX",component:r}},3611:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgInputDateFieldSelector=t.AgInputDateField=void 0;const n=i(7274),r=i(8667),o=i(9827),s=i(3507),a=i(5946);class l extends a.AgInputTextField{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=(0,r._isBrowserSafari)();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){(0,n._getActiveDomElement)(this.beans)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?(0,o._serialiseDate)(e??null,!1)??void 0:e;return this.min===t||(this.min=t,(0,s._addOrRemoveAttribute)(this.eInput,"min",t)),this}setMax(e){const t=e instanceof Date?(0,o._serialiseDate)(e??null,!1)??void 0:e;return this.max===t||(this.max=t,(0,s._addOrRemoveAttribute)(this.eInput,"max",t)),this}setStep(e){return this.step===e||(this.step=e,(0,s._addOrRemoveAttribute)(this.eInput,"step",e)),this}getDate(){if(this.eInput.validity.valid)return(0,o._parseDateTimeFromString)(this.getValue())??void 0}setDate(e,t){this.setValue((0,o._serialiseDate)(e??null,!1),t)}}t.AgInputDateField=l,t.AgInputDateFieldSelector={selector:"AG-INPUT-DATE-FIELD",component:l}},8792:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgInputNumberFieldSelector=t.AgInputNumberField=void 0;const n=i(7274),r=i(3507),o=i(4422),s=i(5946);class a extends s.AgInputTextField{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();const e=this.eInput;this.addManagedListeners(e,{blur:()=>{const t=parseFloat(e.value),i=isNaN(t)?"":this.normalizeValue(t.toString());this.value!==i&&this.setValue(i)},wheel:this.onWheel.bind(this)}),e.step="any";const{precision:t,min:i,max:n,step:r}=this.config;"number"==typeof t&&this.setPrecision(t),"number"==typeof i&&this.setMin(i),"number"==typeof n&&this.setMax(n),"number"==typeof r&&this.setStep(r)}onWheel(e){(0,n._getActiveDomElement)(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){if(""===e)return"";null!=this.precision&&(e=this.adjustPrecision(e));const t=parseFloat(e),{min:i,max:n}=this;return null!=i&&t<i?e=i.toString():null!=n&&t>n&&(e=n.toString()),e}adjustPrecision(e,t){const i=this.precision;if(null==i)return e;if(t){const t=parseFloat(e).toFixed(i);return parseFloat(t).toString()}const n=String(e).split(".");if(n.length>1){if(n[1].length<=i)return e;if(i>0)return`${n[0]}.${n[1].slice(0,i)}`}return n[0]}setMin(e){return this.min===e||(this.min=e,(0,r._addOrRemoveAttribute)(this.eInput,"min",e)),this}setMax(e){return this.max===e||(this.max=e,(0,r._addOrRemoveAttribute)(this.eInput,"max",e)),this}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e||(this.step=e,(0,r._addOrRemoveAttribute)(this.eInput,"step",e)),this}setValue(e,t){return this.setValueOrInputValue((e=>super.setValue(e,t)),(()=>this),e)}setStartValue(e){return this.setValueOrInputValue((e=>super.setValue(e,!0)),(e=>{this.eInput.value=e}),e)}setValueOrInputValue(e,t,i){if((0,o._exists)(i)){let n=this.isScientificNotation(i);if(n&&this.eInput.validity.valid)return e(i);if(!n){n=(i=this.adjustPrecision(i))!=this.normalizeValue(i)}if(n)return t(i)}return e(i)}getValue(){const e=this.eInput;if(!e.validity.valid)return;const t=e.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(e){return"string"==typeof e&&e.includes("e")}}t.AgInputNumberField=a,t.AgInputNumberFieldSelector={selector:"AG-INPUT-NUMBER-FIELD",component:a}},6209:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgInputTextAreaSelector=t.AgInputTextArea=void 0;const n=i(8085);class r extends n.AgAbstractInputField{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}}t.AgInputTextArea=r,t.AgInputTextAreaSelector={selector:"AG-INPUT-TEXT-AREA",component:r}},5946:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgInputTextFieldSelector=t.AgInputTextField=void 0;const n=i(4422),r=i(6466),o=i(8085);class s extends o.AgAbstractInputField{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){const i=this.eInput;return i.value!==e&&(i.value=(0,n._exists)(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`);this.addManagedListeners(this.eInput,{keydown:t=>{(0,r._isEventFromPrintableCharacter)(t)&&t.key&&!e.test(t.key)&&t.preventDefault()},paste:t=>{const i=t.clipboardData?.getData("text");i&&i.split("").some((t=>!e.test(t)))&&t.preventDefault()}})}}t.AgInputTextField=s,t.AgInputTextFieldSelector={selector:"AG-INPUT-TEXT-FIELD",component:s}},7283:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgList=void 0;const n=i(9853),r=i(7274),o=i(5230),s=i(3507),a=i(8020);class l extends a.Component{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),this.unFocusable||this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case n.KeyCode.ENTER:if(this.highlightedEl){const e=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(e)}else this.setValue(this.getValue());break;case n.KeyCode.DOWN:case n.KeyCode.UP:e.preventDefault(),this.navigate(t);break;case n.KeyCode.PAGE_DOWN:case n.KeyCode.PAGE_UP:case n.KeyCode.PAGE_HOME:case n.KeyCode.PAGE_END:e.preventDefault(),this.navigateToPage(t)}}navigate(e){const t=e===n.KeyCode.DOWN;let i;const{itemEls:r,highlightedEl:o}=this;if(o){let e=r.indexOf(o)+(t?1:-1);e=Math.min(Math.max(e,0),r.length-1),i=r[e]}else i=r[t?0:r.length-1];this.highlightItem(i)}navigateToPage(e){const{itemEls:t,highlightedEl:i}=this;if(!i||0===t.length)return;const r=t.indexOf(i),o=this.options.length-1,s=t[0].clientHeight,a=Math.floor(this.getGui().clientHeight/s);let l=-1;e===n.KeyCode.PAGE_HOME?l=0:e===n.KeyCode.PAGE_END?l=o:e===n.KeyCode.PAGE_DOWN?l=Math.min(r+a,o):e===n.KeyCode.PAGE_UP&&(l=Math.max(r-a,0)),-1!==l&&this.highlightItem(t[l])}addOptions(e){return e.forEach((e=>this.addOption(e))),this}addOption(e){const{value:t,text:i}=e,n=i||t;return this.options.push({value:t,text:n}),this.renderOption(t,n),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach((e=>{(0,s._removeFromParent)(e)})),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach(((t,i)=>{(0,o._setAriaPosInSet)(t,i+1),(0,o._setAriaSetSize)(t,e.length)}))}renderOption(e,t){const i=(0,r._getDocument)(this.beans),n=i.createElement("div");(0,o._setAriaRole)(n,"option"),n.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const s=i.createElement("span");n.appendChild(s),s.textContent=t,this.unFocusable||(n.tabIndex=-1),this.itemEls.push(n),this.addManagedListeners(n,{mouseover:()=>this.highlightItem(n),mousedown:t=>{t.preventDefault(),t.stopPropagation(),this.setValue(e)}}),this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getTooltipValue:()=>t,getGui:()=>n,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>s.scrollWidth>s.clientWidth})),this.getGui().appendChild(n)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(null==e)return this.reset(t),this;const i=this.options.findIndex((t=>t.value===e));if(-1!==i){const e=this.options[i];this.value=e.value,this.displayValue=e.text,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex((e=>e.value===this.value));-1!==e&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!(0,s._isVisible)(e))return;this.clearHighlighted(),this.highlightedEl=e,e.classList.add(this.activeClass),(0,o._setAriaSelected)(e,!0);const t=this.getGui(),{scrollTop:i,clientHeight:n}=t,{offsetTop:r,offsetHeight:a}=e;(r+a>i+n||r<i)&&e.scrollIntoView({block:"nearest"}),this.unFocusable||e.focus()}clearHighlighted(){const e=this.highlightedEl;e&&(0,s._isVisible)(e)&&(e.classList.remove(this.activeClass),(0,o._setAriaSelected)(e,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}}t.AgList=l},4772:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.agPickerFieldCSS=void 0,t.agPickerFieldCSS=".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:disabled{opacity:.5}&.ag-picker-has-focus,&:focus-within{background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow)}}"},9497:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgPickerField=void 0;const n=i(9853),r=i(7274),o=i(5230),s=i(3507),a=i(9970),l=i(7321),c=i(4772),d=i(8020);class u extends l.AgAbstractField{constructor(e){if(super(e,e?.template||'\n            <div class="ag-picker-field" role="presentation">\n                <div data-ref="eLabel"></div>\n                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">\n                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>\n                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                </div>\n            </div>',e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=d.RefPlaceholder,this.eWrapper=d.RefPlaceholder,this.eDisplayField=d.RefPlaceholder,this.eIcon=d.RefPlaceholder,this.registerCSS(c.agPickerFieldCSS),this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:n,minPickerWidth:r,maxPickerWidth:o}=e;null!=t&&(this.pickerGap=t),this.variableWidth=!!n,null!=i&&this.setPickerMaxHeight(i),null!=r&&this.setPickerMinWidth(r),null!=o&&this.setPickerMaxWidth(o)}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:n}=this.config;if(i){const e=(0,a._createIconNoSpan)(i,this.beans);e&&this.eIcon.appendChild(e)}null!=n&&this.setInputWidth(n)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),(0,o._setAriaExpanded)(e,!1),this.ariaRole&&(0,o._setAriaRole)(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}this.skipClick?this.skipClick=!1:this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case n.KeyCode.UP:case n.KeyCode.DOWN:case n.KeyCode.ENTER:case n.KeyCode.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case n.KeyCode.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker())}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:i,pickerAriaLabelValue:n,modalPicker:o=!0},maxPickerHeight:a,minPickerWidth:l,maxPickerWidth:c,variableWidth:d,beans:u,eWrapper:h}=this,p={modal:o,eChild:e,closeOnEsc:!0,closedCallback:()=>{const e=(0,r._isNothingFocused)(u);this.beforeHidePicker(),e&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,n),anchorToElement:h};e.style.position="absolute";const f=u.popupSvc,g=f.addPopup(p);d?(l&&(e.style.minWidth=l),e.style.width=(0,s._formatSize)((0,s._getAbsoluteWidth)(h)),c&&(e.style.maxWidth=c)):(0,s._setElementWidth)(e,c??(0,s._getAbsoluteWidth)(h));const m=a??`${(0,s._getInnerHeight)(f.getPopupParent())}px`;return e.style.setProperty("max-height",m),this.alignPickerToComponent(),g.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerGap:e,config:{pickerType:t},beans:{popupSvc:i,gos:n},eWrapper:r,pickerComponent:o}=this,s=n.get("enableRtl")?"right":"left";i.positionPopupByComponent({type:t,eventSource:r,ePopup:o.getGui(),position:"under",alignSide:s,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();(0,o._setAriaExpanded)(t,e);const i=this.eWrapper.classList;i.toggle("ag-picker-expanded",e),i.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker?.()}setInputWidth(e){return(0,s._setElementWidth)(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return"number"==typeof e&&(e=`${e}px`),this.minPickerWidth=null==e?void 0:e,this}setPickerMaxWidth(e){return"number"==typeof e&&(e=`${e}px`),this.maxPickerWidth=null==e?void 0:e,this}setPickerMaxHeight(e){return"number"==typeof e&&(e=`${e}px`),this.maxPickerHeight=null==e?void 0:e,this}destroy(){this.hidePicker(),super.destroy()}}t.AgPickerField=u},7336:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgRadioButton=void 0;const n=i(66);class r extends n.AgCheckbox{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){const t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}}t.AgRadioButton=r},5310:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.agSelectCSS=void 0,t.agSelectCSS=".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}"},159:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgSelectSelector=t.AgSelect=void 0;const n=i(9853),r=i(3386),o=i(5230),s=i(7283),a=i(9497),l=i(5310);class c extends a.AgPickerField{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox",...e}),this.registerCSS(l.agSelectCSS)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:(0,r._shouldDisplayTooltip)((()=>this.eDisplayField)),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:i}=this.config;null!=e&&this.addOptions(e),null!=t&&this.setValue(t,!0),i&&null==t&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){const e=this.createBean(new s.AgList("select",!0));this.listComponent=e,e.setParentComponent(this);const t=e.getAriaElement(),i=`ag-select-list-${e.getCompId()}`;t.setAttribute("id",i),(0,o._setAriaControls)(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:e=>{e?.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){const{key:t}=e;switch(t===n.KeyCode.TAB&&this.hidePicker(),t){case n.KeyCode.ENTER:case n.KeyCode.UP:case n.KeyCode.DOWN:case n.KeyCode.PAGE_UP:case n.KeyCode.PAGE_DOWN:case n.KeyCode.PAGE_HOME:case n.KeyCode.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case n.KeyCode.ESCAPE:super.onKeyDown(e);break;case n.KeyCode.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e)}}showPicker(){const e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){return e.forEach((e=>this.addOption(e))),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this}setValue(e,t,i){const{listComponent:n,config:{placeholder:r},eDisplayField:o,tooltipFeature:s}=this;if(this.value===e||!n)return this;i||n.setValue(e,!0);if(n.getValue()===this.getValue())return this;let a=n.getDisplayValue();return null==a&&r&&(a=r),o.textContent=a,s?.setTooltipAndRefresh(a??null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}}t.AgSelect=c,t.AgSelectSelector={selector:"AG-SELECT",component:c}},8398:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.agToggleButtonCSS=void 0,t.agToggleButtonCSS='.ag-toggle-button{flex:none;min-width:unset;width:unset}.ag-toggle-button-input-wrapper{background-color:var(--ag-toggle-button-off-background-color);border-radius:calc(var(--ag-toggle-button-height)*.5);flex:none;height:var(--ag-toggle-button-height);max-width:var(--ag-toggle-button-width);min-width:var(--ag-toggle-button-width);position:relative;transition:background-color .1s;:where(.ag-toggle-button-input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-toggle-button-height);margin:0;max-width:var(--ag-toggle-button-width);min-width:var(--ag-toggle-button-width);opacity:0}&:before{background-color:var(--ag-toggle-button-switch-background-color);border-radius:100%;content:"";display:block;height:calc(var(--ag-toggle-button-height) - var(--ag-toggle-button-switch-inset)*2);left:var(--ag-toggle-button-switch-inset);pointer-events:none;position:absolute;top:var(--ag-toggle-button-switch-inset);transition:left .1s;width:calc(var(--ag-toggle-button-height) - var(--ag-toggle-button-switch-inset)*2)}&.ag-checked{background-color:var(--ag-toggle-button-on-background-color);&:before{left:calc(100% - var(--ag-toggle-button-height) + var(--ag-toggle-button-switch-inset))}}&:focus-within{box-shadow:var(--ag-focus-shadow)}&.ag-disabled{opacity:.5}}'},4927:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AgToggleButtonSelector=t.AgToggleButton=void 0;const n=i(66),r=i(8398);class o extends n.AgCheckbox{constructor(e){super(e,"ag-toggle-button"),this.registerCSS(r.agToggleButtonCSS)}setValue(e,t){return super.setValue(e,t),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}}t.AgToggleButton=o,t.AgToggleButtonSelector={selector:"AG-TOGGLE-BUTTON",component:o}},8020:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Component=t.RefPlaceholder=void 0;const n=i(8731),r=i(1734),o=i(3507);let s=0;t.RefPlaceholder=null;class a extends n.BeanStub{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=s++,this.cssClassManager=new r.CssClassManager((()=>this.eGui)),this.componentSelectors=new Map((t??[]).map((e=>[e.selector,e]))),e&&this.setTemplate(e)}preConstruct(){this.wireTemplate(this.getGui());const e="component-"+Object.getPrototypeOf(this)?.constructor?.name;this.css?.forEach((t=>this.beans.environment.addGlobalCSS(t,e)))}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute("data-ref"):null}applyElementsToComponent(e,i,n,r=null){if(void 0===i&&(i=this.getDataRefAttribute(e)),i){const o=this[i];if(o===t.RefPlaceholder)this[i]=r??e;else{const e=n&&n[i];if(!this.suppressDataRefValidation&&!e)throw new Error(`data-ref: ${i} on ${this.constructor.name} with ${o}`)}}}createChildComponentsFromTags(e,t){(0,o._copyNodeList)(e.childNodes).forEach((i=>{if(!(i instanceof HTMLElement))return;const n=this.createComponentFromElement(i,(e=>{e.getGui()&&this.copyAttributesFromNode(i,e.getGui())}),t);if(n){if(n.addItems&&i.children.length){this.createChildComponentsFromTags(i,t);const e=Array.prototype.slice.call(i.children);n.addItems(e)}this.swapComponentForNode(n,e,i)}else i.childNodes&&this.createChildComponentsFromTags(i,t)}))}createComponentFromElement(e,t,i){const n=e.nodeName,r=this.getDataRefAttribute(e),o=0===n.indexOf("AG-"),s=o?this.componentSelectors.get(n):null;let a=null;if(s){const e=i&&r?i[r]:void 0;a=new s.component(e),a.setParentComponent(this),this.createBean(a,null,t)}else if(o)throw new Error(`selector: ${n}`);return this.applyElementsToComponent(e,r,i,a),a}copyAttributesFromNode(e,t){(0,o._iterateNamedNodeMap)(e.attributes,((e,i)=>t.setAttribute(e,i)))}swapComponentForNode(e,t,i){const n=e.getGui();t.replaceChild(n,i),t.insertBefore(document.createComment(i.nodeName),n),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){const t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach((e=>e.setAttribute("tabindex",t.toString())))}setTemplate(e,t,i){const n=(0,o._loadTemplate)(e);this.setTemplateFromElement(n,t,i)}setTemplateFromElement(e,t,i,n=!1){if(this.eGui=e,this.suppressDataRefValidation=n,t)for(let e=0;e<t.length;e++){const i=t[e];this.componentSelectors.set(i.selector,i)}this.wireTemplate(e,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let i=t;return null==e?null:(i||(i=this.eGui),(0,o._isNodeOrElement)(e)?{element:e,parent:i}:{element:e.getGui(),parent:i})}prependChild(e,t){const{element:i,parent:n}=this.getContainerAndElement(e,t)||{};i&&n&&n.insertAdjacentElement("afterbegin",i)}appendChild(e,t){const{element:i,parent:n}=this.getContainerAndElement(e,t)||{};i&&n&&n.appendChild(i)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:i}=t;(0,o._setVisible)(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:i}=t;(0,o._setDisplayed)(this.eGui,e,{skipAriaHidden:i});const n={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(n)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,i){this.eGui.addEventListener(e,t,i),this.addDestroyFunc((()=>this.eGui.removeEventListener(e,t)))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,t){this.cssClassManager.addOrRemoveCssClass(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}}t.Component=a},1772:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ManagedFocusFeature=t.FOCUS_MANAGED_CLASS=void 0;const n=i(9853),r=i(8731),o=i(2979),s=i(2331);t.FOCUS_MANAGED_CLASS="ag-focus-managed";class a extends r.BeanStub{constructor(e,t={}){super(),this.eFocusable=e,this.callbacks=t,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:e=>{if(e.defaultPrevented)return;const t=(0,s._findNextFocusableElement)(this.beans,this.eFocusable,!1,e.shiftKey);t&&(t.focus(),e.preventDefault())},...t}}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:i,onFocusOut:n}}=this;e.classList.add(t.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(e),i&&this.addManagedElementListeners(e,{focusin:i}),n&&this.addManagedElementListeners(e,{focusout:n})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:e=>{if(e.defaultPrevented||(0,o._isStopPropagationForAgGrid)(e))return;const{callbacks:t}=this;t.shouldStopEventPropagation(e)?(0,o._stopPropagationForAgGrid)(e):e.key===n.KeyCode.TAB?t.onTabKeyDown(e):t.handleKeyDown&&t.handleKeyDown(e)}})}}t.ManagedFocusFeature=a},3598:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PopupComponent=void 0;const n=i(8020);class r extends n.Component{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}}t.PopupComponent=r},3137:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PopupModule=void 0;const n=i(7205),r=i(3906);t.PopupModule={moduleName:"Popup",version:n.VERSION,beans:[r.PopupService]}},3906:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PopupService=void 0;const n=i(9853),r=i(8731),o=i(7274),s=i(5230),a=i(3507),l=i(2979),c=i(4422),d=i(7990),u=i(7764);var h;!function(e){e[e.vertical=0]="vertical",e[e.horizontal=1]="horizontal"}(h||(h={}));let p=0;class f extends r.BeanStub{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.gridCtrl=e.gridCtrl})),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i,column:n,node:r,event:o}=e,s=t.getBoundingClientRect(),a=this.getParentRect();this.setAlignedTo(t,i);let l=!1;this.positionPopup({ePopup:i,keepWithinBounds:!0,updatePosition:()=>{const e=this.keepXYWithinBounds(i,s.top-a.top,h.vertical),t=i.clientWidth>0?i.clientWidth:200;l||(i.style.minWidth=`${t}px`,l=!0);const n=a.right-a.left-t;let r;return this.gos.get("enableRtl")?(r=c(),r<0&&(r=o(),this.setAlignedStyles(i,"left")),r>n&&(r=0,this.setAlignedStyles(i,"right"))):(r=o(),r>n&&(r=c(),this.setAlignedStyles(i,"right")),r<0&&(r=0,this.setAlignedStyles(i,"left"))),{x:r,y:e};function o(){return s.right-a.left-2}function c(){return s.left-a.left-t}},postProcessCallback:()=>this.callPostProcessPopup("subMenu",i,t,o instanceof MouseEvent?o:void 0,n,r)})}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:n,skipObserver:r}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:!0,skipObserver:r,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:r,eventSource:o,alignSide:s="left",position:a="over",column:l,rowNode:c,type:d}=e,u=o.getBoundingClientRect(),h=this.getParentRect();this.setAlignedTo(o,t);this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:r,updatePosition:()=>{let i,r=u.left-h.left;if("right"===s&&(r-=t.offsetWidth-u.width),"over"===a)i=u.top-h.top,this.setAlignedStyles(t,"over");else{this.setAlignedStyles(t,"under");i="under"===this.shouldRenderUnderOrAbove(t,u,h,e.nudgeY||0)?u.top-h.top+u.height:u.top-t.offsetHeight-2*(n||0)-h.top}return{x:r,y:i}},postProcessCallback:()=>this.callPostProcessPopup(d,t,o,null,l,c)})}shouldRenderUnderOrAbove(e,t,i,n){const r=i.bottom-t.bottom,o=t.top-i.top,s=e.offsetHeight+n;return r>s?"under":o>s||o>r?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const n=this.popupList[i],{alignedToElement:r}=n;if(!r)return;["right","left","over","above","under"].forEach((t=>{r.classList.remove(`ag-has-popup-positioned-${t}`),e.classList.remove(`ag-popup-positioned-${t}`)})),t&&(r.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}setAlignedTo(e,t){const i=this.getPopupIndex(t);if(-1!==i){this.popupList[i].alignedToElement=e}}callPostProcessPopup(e,t,i,n,r,o){const s=this.gos.getCallback("postProcessPopup");if(s){s({column:r,rowNode:o,ePopup:t,type:e,eventSource:i,mouseEvent:n})}}positionPopup(e){const{ePopup:t,keepWithinBounds:i,nudgeX:n,nudgeY:r,skipObserver:o,updatePosition:s}=e,l={width:0,height:0},c=(o=!1)=>{let{x:a,y:c}=s();o&&t.clientWidth===l.width&&t.clientHeight===l.height||(l.width=t.clientWidth,l.height=t.clientHeight,n&&(a+=n),r&&(c+=r),i&&(a=this.keepXYWithinBounds(t,a,h.horizontal),c=this.keepXYWithinBounds(t,c,h.vertical)),t.style.left=`${a}px`,t.style.top=`${c}px`,e.postProcessCallback&&e.postProcessCallback())};if(c(),!o){const e=(0,a._observeResize)(this.beans,t,(()=>c(!0)));setTimeout((()=>e()),200)}}getActivePopups(){return this.popupList.map((e=>e.element))}getParentRect(){const e=(0,o._getDocument)(this.beans);let t=this.getPopupParent();return t===e.body?t=e.documentElement:"static"===getComputedStyle(t).position&&(t=t.offsetParent),(0,a._getElementRectWithOffset)(t)}keepXYWithinBounds(e,t,i){const n=i===h.vertical,r=n?"clientHeight":"clientWidth",s=n?"top":"left",l=n?"height":"width",c=n?"scrollTop":"scrollLeft",d=(0,o._getDocument)(this.beans),u=d.documentElement,p=this.getPopupParent(),f=e.getBoundingClientRect(),g=p.getBoundingClientRect(),m=d.documentElement.getBoundingClientRect(),v=p===d.body,b=Math.ceil(f[l]),y=n?a._getAbsoluteHeight:a._getAbsoluteWidth;let w=v?y(u)+u[c]:p[r];v&&(w-=Math.abs(m[s]-g[s]));const C=w-b;return Math.min(Math.max(t,0),Math.abs(C))}addPopup(e){const t=(0,o._getDocument)(this.beans),{eChild:i,ariaLabel:n,alwaysOnTop:r,positionCallback:s,anchorToElement:a}=e;if(!t)return(0,u._warn)(122),{hideFunc:()=>{}};const l=this.getPopupIndex(i);if(-1!==l){return{hideFunc:this.popupList[l].hideFunc}}this.initialisePopupPosition(i);const c=this.createPopupWrapper(i,n,!!r),d=this.addEventListenersToPopup({...e,wrapperEl:c});return s&&s(),this.addPopupToPopupList(i,c,d,a),{hideFunc:d}}initialisePopupPosition(e){const t=this.getPopupParent().getBoundingClientRect();(0,c._exists)(e.style.top)||(e.style.top=-1*t.top+"px"),(0,c._exists)(e.style.left)||(e.style.left=-1*t.left+"px")}createPopupWrapper(e,t,i){const n=this.getPopupParent(),r=document.createElement("div"),{environment:o,gos:a}=this.beans;return o.applyThemeClasses(r),r.classList.add("ag-popup"),e.classList.add(a.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||(0,s._setAriaRole)(e,"dialog"),(0,s._setAriaLabel)(e,t),r.appendChild(e),n.appendChild(r),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),r}handleThemeChange(e){if(e.themeChanged){const e=this.beans.environment;for(const t of this.popupList)e.applyThemeClasses(t.wrapper)}}addEventListenersToPopup(e){const t=this.beans,i=(0,o._getDocument)(t),r=this.getPopupParent(),{wrapperEl:s,eChild:a,closedCallback:c,afterGuiAttached:d,closeOnEsc:u,modal:h}=e;let p=!1;const f=e=>{if(!s.contains((0,o._getActiveDomElement)(t)))return;e.key!==n.KeyCode.ESCAPE||(0,l._isStopPropagationForAgGrid)(e)||v({keyboardEvent:e})},g=e=>v({mouseEvent:e}),m=e=>v({touchEvent:e}),v=(e={})=>{const{mouseEvent:t,touchEvent:n,keyboardEvent:o,forceHide:l}=e;(l||!this.isEventFromCurrentPopup({mouseEvent:t,touchEvent:n},a)&&!p)&&(p=!0,r.removeChild(s),i.removeEventListener("keydown",f),i.removeEventListener("mousedown",g),i.removeEventListener("touchstart",m),i.removeEventListener("contextmenu",g),this.eventSvc.removeEventListener("dragStarted",g),c&&c(t||n||o),this.removePopupFromPopupList(a))};return d&&d({hidePopup:v}),window.setTimeout((()=>{u&&i.addEventListener("keydown",f),h&&(i.addEventListener("mousedown",g),this.eventSvc.addEventListener("dragStarted",g),i.addEventListener("touchstart",m),i.addEventListener("contextmenu",g))}),0),v}addPopupToPopupList(e,t,i,n){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:p++,isAnchored:!!n}),n&&this.setPopupPositionRelatedToElement(e,n)}getPopupIndex(e){return this.popupList.findIndex((t=>t.element===e))}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const n=this.popupList[i];if(n.stopAnchoringPromise&&n.stopAnchoringPromise.then((e=>e&&e())),n.stopAnchoringPromise=void 0,n.isAnchored=!1,!t)return;const r=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:n.hideFunc});return n.stopAnchoringPromise=r,n.isAnchored=!0,r}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter((t=>t.element!==e))}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:n,ePopup:r}=e,o=n.getBoundingClientRect(),s=e=>parseInt(e.substring(0,e.length-1),10),a=(e,t)=>{const n=i[e]-o[e],a=s(r.style[e]);return{initialDiff:n,lastDiff:n,initial:a,last:a,direction:t}},l=a("top",h.vertical),c=a("left",h.horizontal),u=this.beans.frameworkOverrides;return new d.AgPromise((i=>{u.wrapIncoming((()=>{u.setInterval((()=>{const i=t.getBoundingClientRect(),o=n.getBoundingClientRect();if(0==o.top&&0==o.left&&0==o.height&&0==o.width)return void e.hidePopup();const a=(e,t)=>{const n=s(r.style[t]);e.last!==n&&(e.initial=n,e.last=n);const a=i[t]-o[t];if(a!=e.lastDiff){const i=this.keepXYWithinBounds(r,e.initial+e.initialDiff-a,e.direction);r.style[t]=`${i}px`,e.last=i}e.lastDiff=a};a(l,"top"),a(c,"left")}),200).then((e=>{i((()=>{null!=e&&window.clearInterval(e)}))}))}),"popupPositioning")}))}hasAnchoredPopup(){return this.popupList.some((e=>e.isAnchored))}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:n}=e,r=i||n;if(!r)return!1;const o=this.getPopupIndex(t);if(-1===o)return!1;for(let e=o;e<this.popupList.length;e++){const t=this.popupList[e];if((0,l._isElementInEventPath)(t.element,r))return!0}return this.isElementWithinCustomPopup(r.target)}isElementWithinCustomPopup(e){const t=(0,o._getDocument)(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||null===e.parentElement)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),n=i.length,r=this.getWrapper(e);if(!r||n<=1||!t.contains(e))return;const o=[],s=[];for(const e of i)e!==r&&(e.classList.contains("ag-always-on-top")?s.push(e):o.push(e));const a=[],l=s.length,c=r.classList.contains("ag-always-on-top")||!l?[...o,...s,r]:[...o,r,...s];for(let e=0;e<=n;e++){const n=c[e];if(i[e]===c[e]||n===r)continue;n.querySelectorAll("div").forEach((e=>{0!==e.scrollTop&&a.push([e,e.scrollTop])})),0===e?t.insertAdjacentElement("afterbegin",n):c[e-1].insertAdjacentElement("afterend",n)}for(;a.length;){const e=a.pop();e[0].scrollTop=e[1]}}}t.PopupService=f},8332:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TabGuardComp=void 0;const n=i(8020),r=i(1017);class o extends n.Component{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new r.TabGuardFeature(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}}t.TabGuardComp=o},6:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TabGuardCtrl=t.TabGuardClassNames=void 0;const n=i(8731),r=i(7274),o=i(2331),s=i(1772);t.TabGuardClassNames={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"};class a extends n.BeanStub{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:i,eBottomGuard:n,focusTrapActive:r,forceFocusOutWhenTabGuardsAreEmpty:o,isFocusableContainer:s,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:d,onTabKeyDown:u,handleKeyDown:h,isEmpty:p,eFocusableElement:f}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=n,this.providedFocusInnerElement=a,this.eFocusableElement=f,this.focusTrapActive=!!r,this.forceFocusOutWhenTabGuardsAreEmpty=!!o,this.isFocusableContainer=!!s,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=d,this.providedOnTabKeyDown=u,this.providedHandleKeyDown=h,this.providedIsEmpty=p}postConstruct(){this.createManagedBean(new s.ManagedFocusFeature(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach((e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);if(this.skipTabGuardFocus)return void(this.skipTabGuardFocus=!1);if(this.forceFocusOutWhenTabGuardsAreEmpty){if(this.providedIsEmpty?this.providedIsEmpty():0===(0,o._findFocusableElements)(this.eFocusableElement,".ag-tab-guard").length)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){const t=(0,r._getDocument)(this.beans),i=(0,o._findFocusableElements)(t.body,null,!0),n=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(-1===n)return;let s,a;e?(s=0,a=n):(s=n+1,a=i.length);const l=i.slice(s,a),c=this.gos.get("tabIndex");l.sort(((e,t)=>{const i=parseInt(e.getAttribute("tabindex")||"0"),n=parseInt(t.getAttribute("tabindex")||"0");return n===c?1:i===c?-1:0===i?1:0===n?-1:i-n})),l[e?l.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown)return void this.providedOnTabKeyDown(e);if(this.focusTrapActive)return;if(e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout((()=>this.activateTabGuards()),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=(0,o._findFocusableElements)(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),!!t.length&&(t[e?t.length-1:0].focus({preventScroll:!0}),!0)}getNextFocusableElement(e){return(0,o._findNextFocusableElement)(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout((()=>{this.forcingFocusOut=!1,this.activateTabGuards()}))}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}}t.TabGuardCtrl=a},1017:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TabGuardFeature=void 0;const n=i(8731),r=i(7274),o=i(5230),s=i(3507),a=i(6);class l extends n.BeanStub{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:n}=this,r=[t,i],o={setTabIndex:e=>{r.forEach((t=>null!=e?t.setAttribute("tabindex",e):t.removeAttribute("tabindex")))}};this.addTabGuards(t,i);const{focusTrapActive:s=!1,onFocusIn:l,onFocusOut:c,focusInnerElement:d,handleKeyDown:u,onTabKeyDown:h,shouldStopEventPropagation:p,isEmpty:f,forceFocusOutWhenTabGuardsAreEmpty:g,isFocusableContainer:m}=e;this.tabGuardCtrl=this.createManagedBean(new a.TabGuardCtrl({comp:o,focusTrapActive:s,eTopGuard:t,eBottomGuard:i,eFocusableElement:n,onFocusIn:l,onFocusOut:c,focusInnerElement:d,handleKeyDown:u,onTabKeyDown:h,shouldStopEventPropagation:p,isEmpty:f,forceFocusOutWhenTabGuardsAreEmpty:g,isFocusableContainer:m}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=(0,r._getDocument)(this.beans).createElement("div"),i="top"===e?a.TabGuardClassNames.TAB_GUARD_TOP:a.TabGuardClassNames.TAB_GUARD_BOTTOM;return t.classList.add(a.TabGuardClassNames.TAB_GUARD,i),(0,o._setAriaRole)(t,"presentation"),t}addTabGuards(e,t){const i=this.eFocusableElement;i.insertAdjacentElement("afterbegin",e),i.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];(0,s._clearElement)(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){(0,s._isNodeOrElement)(t)||(t=t.getGui());const{eBottomGuard:n}=this;n?n.insertAdjacentElement("beforebegin",t):e(t,i)}destroy(){const{eFocusableElement:e,eTopGuard:t,eBottomGuard:i}=this;e.removeChild(t),e.removeChild(i),super.destroy()}}t.TabGuardFeature=l},9644:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TouchListener=void 0;const n=i(5889),r=i(3276);t.TouchListener=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new n.LocalEventService,this.preventMouseClick=t;const i=this.onTouchStart.bind(this),r=this.onTouchMove.bind(this),o=this.onTouchEnd.bind(this);e.addEventListener("touchstart",i,{passive:!0}),e.addEventListener("touchmove",r,{passive:!0}),e.addEventListener("touchend",o,{passive:!1}),this.destroyFuncs.push((()=>{e.removeEventListener("touchstart",i,{passive:!0}),e.removeEventListener("touchmove",r,{passive:!0}),e.removeEventListener("touchend",o,{passive:!1})}))}getActiveTouch(e){for(let t=0;t<e.length;t++){if(e[t].identifier===this.touchStart.identifier)return e[t]}return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout((()=>{const i=this.touchStart===t;if(this.touching&&i&&!this.moved){this.moved=!0;const t={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(t)}}),500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!(0,r._areEventsNear)(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const e={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=(new Date).getTime();if(this.lastTapTime&&this.lastTapTime>0){if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const e={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.lastTapTime=null}else this.lastTapTime=e}else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach((e=>e()))}}},5608:function(e,t,i){i.r(t),i.d(t,{__addDisposableResource:function(){return N},__assign:function(){return o},__asyncDelegator:function(){return x},__asyncGenerator:function(){return A},__asyncValues:function(){return E},__await:function(){return S},__awaiter:function(){return f},__classPrivateFieldGet:function(){return R},__classPrivateFieldIn:function(){return O},__classPrivateFieldSet:function(){return I},__createBinding:function(){return m},__decorate:function(){return a},__disposeResources:function(){return F},__esDecorate:function(){return c},__exportStar:function(){return v},__extends:function(){return r},__generator:function(){return g},__importDefault:function(){return P},__importStar:function(){return k},__makeTemplateObject:function(){return T},__metadata:function(){return p},__param:function(){return l},__propKey:function(){return u},__read:function(){return y},__rest:function(){return s},__rewriteRelativeImportExtension:function(){return $},__runInitializers:function(){return d},__setFunctionName:function(){return h},__spread:function(){return w},__spreadArray:function(){return _},__spreadArrays:function(){return C},__values:function(){return b}});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)};function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var o=function(){return o=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};function s(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}function a(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s}function l(e,t){return function(i,n){t(i,n,e)}}function c(e,t,i,n,r,o){function s(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,l=n.kind,c="getter"===l?"get":"setter"===l?"set":"value",d=!t&&e?n.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),h=!1,p=i.length-1;p>=0;p--){var f={};for(var g in n)f[g]="access"===g?{}:n[g];for(var g in n.access)f.access[g]=n.access[g];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(e||null))};var m=(0,i[p])("accessor"===l?{get:u.get,set:u.set}:u[c],f);if("accessor"===l){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=s(m.get))&&(u.get=a),(a=s(m.set))&&(u.set=a),(a=s(m.init))&&r.unshift(a)}else(a=s(m))&&("field"===l?r.unshift(a):u[c]=a)}d&&Object.defineProperty(d,n.name,u),h=!0}function d(e,t,i){for(var n=arguments.length>2,r=0;r<t.length;r++)i=n?t[r].call(e,i):t[r].call(e);return n?i:void 0}function u(e){return"symbol"==typeof e?e:"".concat(e)}function h(e,t,i){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:i?"".concat(i," ",t):t})}function p(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))}function g(e,t){var i,n,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var m=Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]};function v(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||m(t,e,i)}function b(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function C(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<i;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n}function _(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}function S(e){return this instanceof S?(this.v=e,this):new S(e)}function A(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=i.apply(e,t||[]),o=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,c)}})),n[Symbol.asyncIterator]=function(){return this},n;function s(e,t){r[e]&&(n[e]=function(t){return new Promise((function(i,n){o.push([e,t,i,n])>1||a(e,t)}))},t&&(n[e]=t(n[e])))}function a(e,t){try{(i=r[e](t)).value instanceof S?Promise.resolve(i.value.v).then(l,c):d(o[0][2],i)}catch(e){d(o[0][3],e)}var i}function l(e){a("next",e)}function c(e){a("throw",e)}function d(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function x(e){var t,i;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,r){t[n]=e[n]?function(t){return(i=!i)?{value:S(e[n](t)),done:!1}:r?r(t):t}:r}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=b(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(t){return new Promise((function(n,r){(function(e,t,i,n){Promise.resolve(n).then((function(t){e({value:t,done:i})}),t)})(n,r,(t=e[i](t)).done,t.value)}))}}}function T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var D=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},M=function(e){return M=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t},M(e)};function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i=M(e),n=0;n<i.length;n++)"default"!==i[n]&&m(t,e,i[n]);return D(t,e),t}function P(e){return e&&e.__esModule?e:{default:e}}function R(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)}function I(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i}function O(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function N(e,t,i){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n,r;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],i&&(r=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");r&&(n=function(){try{r.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:i})}else i&&e.stack.push({async:!0});return t}var L="function"==typeof SuppressedError?SuppressedError:function(e,t,i){var n=new Error(i);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function F(e){function t(t){e.error=e.hasError?new L(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var i,n=0;return function r(){for(;i=e.stack.pop();)try{if(!i.async&&1===n)return n=0,e.stack.push(i),Promise.resolve().then(r);if(i.dispose){var o=i.dispose.call(i.value);if(i.async)return n|=2,Promise.resolve(o).then(r,(function(e){return t(e),r()}))}else n|=1}catch(e){t(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function $(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,(function(e,i,n,r,o){return i?t?".jsx":".js":!n||r&&o?n+r+"."+o.toLowerCase()+"js":e})):e}t.default={__extends:r,__assign:o,__rest:s,__decorate:a,__param:l,__esDecorate:c,__runInitializers:d,__propKey:u,__setFunctionName:h,__metadata:p,__awaiter:f,__generator:g,__createBinding:m,__exportStar:v,__values:b,__read:y,__spread:w,__spreadArrays:C,__spreadArray:_,__await:S,__asyncGenerator:A,__asyncDelegator:x,__asyncValues:E,__makeTemplateObject:T,__importStar:k,__importDefault:P,__classPrivateFieldGet:R,__classPrivateFieldSet:I,__classPrivateFieldIn:O,__addDisposableResource:N,__disposeResources:F,__rewriteRelativeImportExtension:$}}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,i),o.exports}return i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(4769)}()}));(function(){var e=function(t){var i={};_.each(t,(function(t,n){if(_.isPlainObject(t)){_.each(e(t),(function(e,t){i[n+"."+t]=e}))}else{i[n]=t}}));return i};$.i18n.load(e(window.I18n));window.t=function(){return $.i18n._.apply($.i18n,Array.prototype.slice.call(arguments))}})();AGN=window.AGN||(window.AGN={});AGN.Lib=window.AGN.Lib||(window.AGN.Lib={});AGN.Lib.WM=window.AGN.Lib.WM||(window.AGN.Lib.WM={});AGN.Lib.Dashboard=window.AGN.Lib.Dashboard||(window.AGN.Lib.Dashboard={});AGN.Lib.LB=window.AGN.Lib.LB||(window.AGN.Lib.LB={});AGN.Opt=window.AGN.Opt||(window.AGN.Opt={});AGN.Opt.Fields=window.AGN.Opt.Fields||(window.AGN.Opt.Fields={});AGN.Opt.Forms=window.AGN.Opt.Forms||(window.AGN.Opt.Forms={});AGN.Opt.Controllers=window.AGN.Opt.Controllers||(window.AGN.Opt.Controllers={});AGN.Opt.Templates=window.AGN.Opt.Templates||(window.AGN.Opt.Templates={});AGN.Opt.TableCellRenderers=window.AGN.Opt.TableCellRenderers||(window.AGN.Opt.TableCellRenderers={});AGN.Opt.TableActionsConditions=window.AGN.Opt.TableActionsConditions||(window.AGN.Opt.TableActionsConditions={});AGN.Opt.Table=window.AGN.Opt.Table||(window.AGN.Opt.Table={filters:{},comparators:{}});AGN.Opt.Validators=window.AGN.Opt.Validators||(window.AGN.Opt.Validators={});AGN.Opt.Components=window.AGN.Opt.Components||(window.AGN.Opt.Components={});AGN.url=function(e,t){if(window.agnResolveRelativeUrl){if(e&&e.charAt(0)==="/"){e=e.substring(1)}return window.agnResolveRelativeUrl(e,t)}else{console.error("window.agnResolveRelativeUrl is not defined");return e}};AGN.runAll=function(e){AGN.Lib.CoreInitializer.autorun(e);AGN.Lib.DomInitializer.autorun(e)};(e=>{const t=40;const i=e("html");let n;Chart.register(ChartZoom);Chart.register(ChartDataLabels);Chart.defaults.color=()=>{if(!n){n=e("body").css("--chart-label-color")}return n};Chart.defaults.maintainAspectRatio=false;Chart.defaults.font.size=i.css("--chart-font-size");Chart.defaults.font.family=i.css("--chart-font-family");Chart.defaults.scale.border.display=false;Chart.defaults.scale.grid.display=false;Chart.controllers.bar.defaults.barPercentage=1;Chart.defaults.plugins.legend.labels.usePointStyle=true;Chart.defaults.plugins.legend.labels.pointStyle="rectRounded";Chart.defaults.plugins.legend.position="right";Chart.defaults.plugins.tooltip.enabled=false;Chart.defaults.plugins.tooltip.external=t=>{const{chart:i,tooltip:n}=t;const s=o(i);if(n.opacity===0){s.css("opacity",0);return}if(n.body){const t=n.title||[];const i=n.body.map((e=>e.lines));const r=e('<div class="tooltip-header">');r.append(e(`<span>${t[0]}</span>`));const o=e('<div class="tooltip-body">');i.forEach(((t,i)=>{const r=n.labelColors[i];const s=e("<div>");const a=e('<i class="icon icon-square">').css("color",r.backgroundColor);const l=e('<span class="text-truncate">').text(t);s.append(a);s.append(l);o.append(s)}));e(s).empty();e(s).append(r);e(s).append(o)}const a=r(s,i);s.css({opacity:1,left:a.left+"px",top:a.top+"px"})};function r(e,t){const{chartArea:i,tooltip:n}=t;const r=i.right-i.left;const o=i.bottom-i.top;const{offsetLeft:s,offsetTop:a}=t.canvas;const l=s+r;const c=a+o;let d=s+n.caretX;let u=a+n.caretY;if(d+e.outerWidth()>l){d=l-e.outerWidth()}if(u+e.outerHeight()>c){u=c-e.outerHeight()}return{left:Math.max(s,d),top:Math.max(a,u)}}function o(t){let i=e(t.canvas).parent().find(".chart-tooltip");if(!i.exists()){i=e('<div class="chart-tooltip">');e(t.canvas).parent().append(i)}return i}class s extends Chart.DoughnutController{initialize(){this._actualRealValues=this.chart.data.datasets[0].data;this._exactPercentages=AGN.Lib.ChartUtils.calcExactPercentages(this._actualRealValues);this.chart.data.datasets[0].data=l(this._actualRealValues);super.initialize()}}s.id="agnDoughnut";s.defaults=Chart.DoughnutController.defaults;s.overrides=_.merge(_.cloneDeep(Chart.DoughnutController.overrides),{plugins:{legend:{onClick:function(e,t,i){const n=a(i.chart);const r=i.legendItems.map(((e,i)=>{if(t.index===i){return e.hidden?n._actualRealValues[i]:0}return e.hidden?0:n._actualRealValues[i]}));n._exactPercentages=AGN.Lib.ChartUtils.calcExactPercentages(r);i.chart.data.datasets[0].data=l(r);const o=Chart.DoughnutController.overrides.plugins.legend.onClick;o(e,t,i)}},datalabels:{color:e=>{const t=e.dataset.backgroundColor[e.dataIndex];return AGN.Lib.Helpers.getColorLuminance(t)<.57?"white":"#4B4B4B"},formatter:(e,i)=>{const n=a(i.chart)._exactPercentages;const r=n[i.dataIndex];const{innerRadius:o,outerRadius:s}=i.chart.getDatasetMeta(0).data[0];const l=(o+s)/2;const c=r/100*2*Math.PI;const d=l*c;return d<t?"":`${r.toFixed(1)}%`}},tooltip:{callbacks:{label:e=>a(e.chart)._actualRealValues[e.dataIndex]}}}});function a(e){return e.getDatasetMeta(0).controller}function l(e){const t=AGN.Lib.ChartUtils.getTotal(e);return e.map((e=>{if(e<=0){return 0}return Math.max(e/t*100,1)}))}Chart.register(s)})(window.jQuery);(function(){var e=$.ui.dialog.prototype._allowInteraction;$.ui.dialog.prototype._allowInteraction=function(t){var i=$(t.target);if(i.closest(".cke_dialog").length||i.closest(".cke_panel_frame").length){return true}return e.apply(this,arguments)}})();(function(e,t){if(typeof exports=="object"){module.exports=t(e)}else if(typeof define=="function"&&define.amd){define([],t.bind(e,e))}else{t(e)}})(typeof global!="undefined"?global:this,(function(e){if(e.CSS&&e.CSS.escape){return e.CSS.escape}var t=function(e){if(arguments.length==0){throw new TypeError("`CSS.escape` requires an argument.")}var t=String(e);var i=t.length;var n=-1;var r;var o="";var s=t.charCodeAt(0);while(++n<i){r=t.charCodeAt(n);if(r==0){o+="�";continue}if(r>=1&&r<=31||r==127||n==0&&r>=48&&r<=57||n==1&&r>=48&&r<=57&&s==45){o+="\\"+r.toString(16)+" ";continue}if(n==0&&i==1&&r==45){o+="\\"+t.charAt(n);continue}if(r>=128||r==45||r==95||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122){o+=t.charAt(n);continue}o+="\\"+t.charAt(n)}return o};if(!e.CSS){e.CSS={}}e.CSS.escape=t;return t}));(()=>{if(!window.Jodit){return}const e={width:"100%",height:"100%",showWordsCounter:false,showCharsCounter:false,showPlaceholder:false,askBeforePasteHTML:false,toolbarAdaptive:false,addNewLineOnDBLClick:false,hidePoweredByJodit:true,extraPlugins:["emm","emoji"],colors:{full:["#000000","#993300","#333300","#003300","#003366","#000080","#333399","#333333","#800000","#FF6600","#808000","#808080","#008080","#0000FF","#666699","#808080","#FF0000","#FF9900","#99CC00","#339966","#33CCCC","#3366FF","#800080","#999999","#FF00FF","#FFCC00","#FFFF00","#00FF00","#00FFFF","#00CCFF","#993366","#C0C0C0","#FF99CC","#FFCC99","#FFFF99","#CCFFCC","#CCFFFF","#99CCFF","#CC99FF","#FFFFFF"]},colorPickerDefaultTab:"color",wrapNodes:{emptyBlockAfterInit:false},enter:"br",enterBlock:"div",iframeDefaultSrc:"<html><head><title></title></head><body></body></html>",iframeStyle:"",iframeTitle:"",controls:{font:{list:{"Comic Sans MS,cursive":"Comic Sans MS"}}}};_.merge(Jodit.defaultOptions,e);Jodit.defaultOptions.extraPlugins.forEach((e=>{const t=document.createElement("script");t.src=Jodit.BASE_PATH+`plugins/${e}-plugin.js`;document.head.appendChild(t)}));Jodit.defaultOptions.controls.font.list=Object.fromEntries(Object.entries(Jodit.defaultOptions.controls.font.list).sort((([,e],[,t])=>e.localeCompare(t))))})();(function(){jQuery.browser=e().browser;function e(){var e=navigator.userAgent.toLowerCase();var t=/(msie) ([\w.]+)/;var i=/(webkit)[ \/]([\w.]+)/;var n=/(opera)(?:.*version)?[ \/]([\w.]+)/;var r=/(mozilla)(?:.*? rv:([\w.]+))?/;var o=i.exec(e)||n.exec(e)||t.exec(e)||e.indexOf("compatible")<0&&r.exec(e)||[];return{browser:o[1]||"",version:o[2]||"0"}}})(jQuery);(function(e){e.extend(true,e.fn.dirty.prototype,{checkValues:function(t){var i=this;var n=false;this.form.find("select").each((function(t,r){var o=e(r);var s=i.isSelectFieldDirty(o);o.data(i.statuses.dataIsDirty,s);n|=s}));this.form.find("input, textarea").each((function(t,r){var o=i.isRadioOrCheckbox(r);var s=i.isFileInput(r);var a=e(r);var l;if(o){l=i.isCheckboxDirty(a)}else if(s){l=i.isFileInputDirty(a)}else{if(!a.is(".select2-input[placeholder]")){l=i.isFieldDirty(a)}}a.data(i.statuses.dataIsDirty,l);n|=l}));if(n){i.setDirty()}else{i.setClean()}},saveInitialValues:function(){var t=this;this.form.find("input, select, textarea").each((function(i,n){var r=e(n);if(r.attr("id")||r.attr("name")){r.attr("id",r.prop("tagName"+"__"+i))}var o=t.isRadioOrCheckbox(n);var s=t.isFileInput(n);if(o){var a=e(n).is(":checked")?"checked":"unchecked";r.data(t.statuses.dataInitialValue,a)}else if(s){r.data(t.statuses.dataInitialValue,JSON.stringify(n.files))}else{r.data(t.statuses.dataInitialValue,r.val()||"")}}))},backupData:function(){var t=this;var i={};t.form.find("input, select, textarea").each((function(n,r){var o=e(r);var s=o.attr("id")||o.attr("name");var a={};a[t.statuses.dataInitialValue]=o.data(t.statuses.dataInitialValue);a[t.statuses.dataIsDirty]=o.data(t.statuses.dataIsDirty);i[s]=a}));return i},restoreData:function(t){var i=this;if(t){i.form.find("input, select, textarea").each((function(n,r){var o=e(r);var s=o.attr("id")||o.attr("name");var a=t[s];if(a){o.data(i.statuses.dataInitialValue,a[i.statuses.dataInitialValue]);o.data(i.statuses.dataIsDirty,a[i.statuses.dataIsDirty])}}))}i.checkValues()},isSelectFieldDirty:function(e){var t=this;var i=e.data(t.statuses.dataInitialValue)||"";var n=e.val()||"";return!_.isEqual(n,i)},resetForm:function(){var t=this;this.form.find("select").each((function(i,n){var r=e(n);var o=r.data(t.statuses.dataInitialValue);if(r.data("select2")){r.select2("val",o)}else{r.val(o)}}));this.form.find("input, textarea").each((function(i,n){var r=e(n);var o=t.isRadioOrCheckbox(n);var s=t.isFileInput(n);if(o){var a=r.data(t.statuses.dataInitialValue);var l=a==="checked";r.prop("checked",l)}if(s){n.value="";e(n).data(t.statuses.dataInitialValue,JSON.stringify(n.files))}else{var c=r.data(t.statuses.dataInitialValue);r.val(c)}}));this.checkValues()}})})(jQuery);(function(e){if(e.fn.all){console.error("$.fn.all is already defined")}else{e.fn.extend({all:function(e){return this.filter(e).add(this.find(e))}})}if(e.fn.exists){console.error("$.fn.exists is already defined")}else{e.fn.extend({exists:function(){return this.length>0}})}if(e.fn.json){console.error("$.fn.json is already defined")}else{e.fn.extend({json:function(){return JSON.parse(this.html())}})}e.expr[":"].truncated=function(e){return e.scrollWidth-e.clientWidth>1||e.scrollHeight-e.clientHeight>2};e.expr[":"].truncatedAlt=function(e){const t=e.cloneNode(true);t.style.width="auto";t.style.height="auto";t.style.position="fixed";t.style.overflow="visible";t.style.whiteSpace="nowrap";t.style.visibility="hidden";e.parentElement.appendChild(t);try{const i=t.getBoundingClientRect().width;const n=e.getBoundingClientRect().width;return i>n}finally{t.remove()}}})(jQuery);(function(e){e.fn.extend({ensureLoad:function(t){return this.each((function(){if(this.complete){t.call(this)}else{e(this).on("load",t)}}))}})})(jQuery);$.extend(true,$.inputmask.defaults.aliases,{datetime:{regex:{quartspre:new RegExp("0|1|3|4"),quartspost:new RegExp("00|15|30|45"),halfspre:new RegExp("0|3"),halfspost:new RegExp("00|30")},definitions:{q:{validator:function(e,t,i,n,r){var o=r.regex.quartspost.test(e);if(!n&&!o){if(r.regex.quartspost.test(e[0]+"5")){return{c:"5"}}else{return{c:"0"}}}return true},cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){var o=r.regex.quartspre.test(e);o=false;if(!n&&!o){var s=parseInt(e+"0"),a=["00","15","30","45"],l=100,c,d;for(var u=0;u<a.length;u++){var h=a[u];parsedNum=parseInt(h);if(Math.abs(parsedNum-s)<l){l=Math.abs(parsedNum-s);c=h}}d={caret:i+2,insert:[{pos:i,c:c[0]},{pos:i+1,c:c[1]}]};return d}return true},cardinality:1}]},u:{validator:function(e,t,i,n,r){var o=r.regex.halfspost.test(e);if(!n&&!o){return{c:"0"}}return true},cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){var o=r.regex.halfspre.test(e);o=false;if(!n&&!o){var s=parseInt(e+"0"),a=["00","30"],l=100,c,d;for(var u=0;u<a.length;u++){var h=a[u];parsedNum=parseInt(h);if(Math.abs(parsedNum-s)<l){l=Math.abs(parsedNum-s);c=h}}d={caret:i+2,insert:[{pos:i,c:c[0]},{pos:i+1,c:c[1]}]};return d}return true},cardinality:1}]}}},"h:quarts t":{mask:"h:q t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:quarts":{mask:"h:q",placeholder:"hh:mm",alias:"datetime",hourFormat:"24"},"h:halfs t":{mask:"h:u t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:halfs":{mask:"h:u",placeholder:"hh:mm",alias:"datetime",hourFormat:"24"},"h:00 t":{mask:"h:00 t\\m",placeholder:"hh:00 xm",alias:"datetime",hourFormat:"12"},"h:00":{mask:"h:00",placeholder:"hh:00",alias:"datetime",hourFormat:"24"}});$.fn.serializeObject=function(){var e={};$.each(this.serializeArray(),(function(){if(e[this.name]){if(!e[this.name].push){e[this.name]=[e[this.name]]}e[this.name].push(this.value||"")}else{e[this.name]=this.value||""}}));return e};$.fn.serializeFormDataObject=function(){var e=this.serializeObject();this.find("input[type=file]").each((function(){if(!$(this).is(":disabled")&&this.name){var t=this.files;if(t.length==0){t=[new File([],"",{type:"application/octet-stream"})]}if(e[this.name]){var i=e[this.name];if($.isArray(i)){e[this.name]=i.concat(t)}else{e[this.name]=[i].concat(t)}}else{if(t.length>1){e[this.name]=t}else{e[this.name]=t[0]}}}}));return e};(function(e){if(e.fn.style){console.error("$.fn.style is already defined")}else{e.fn.extend({style:function(t,i,n){if(i===undefined){return this.css(t)}if(e.isFunction(i)){this.each((function(){if(this.style){var e=i.call(this,this.style.getPropertyValue(t));this.style.setProperty(t,e,n)}}))}else{this.each((function(){if(this.style){this.style.setProperty(t,i,n)}}))}}})}})(jQuery);jQuery.trim=e=>e==null?"":(e+"").trim();$.widget("ui.dialog",$.extend({},$.ui.dialog.prototype,{_title:function(e){if(!this.options.title){e.html("&#160;")}e.html(this.options.title)}}));AGN.Opt.Components.JsPlumbFixedBezierConnector=function(e){var t=jsPlumb.Connectors.AbstractConnector.apply(this,arguments);this.type="FixedBezierConnector";this._compute=function(e){var i=e.anchorOrientation==="opposite"?2:1.5;t.addSegment(this,"Bezier",{x1:e.tx,y1:e.ty,x2:e.sx,y2:e.sy,cp1x:e.tx+e.to[0]*e.w/i,cp1y:e.ty+e.to[1]*e.h/i,cp2x:e.sx+e.so[0]*e.w/i,cp2y:e.sy+e.so[1]*e.h/i})}};_.templateSettings={evaluate:/\{\{(.+?)\}\}/g,interpolate:/\{\{=(.+?)\}\}/g,escape:/\{\{-(.+?)\}\}/g};window.onpopstate=function(){window.location.reload()};(e=>{const i=e.fn.select2.amd.require("select2/defaults");e.extend(i.defaults,{searchInputPlaceholder:"",showSearchIcon:false,language:{noResults:function(e){return t("selects.noMatches",e||"")}}});const n=e.fn.select2.amd.require("select2/dropdown/search");const r=n.prototype.render;n.prototype.render=function(e){const t=r.apply(this,Array.prototype.slice.apply(arguments));this.$search.attr("placeholder",this.options.get("searchInputPlaceholder"));if(this.options.get("showSearchIcon")){this.$searchContainer.append(`<i class="icon icon-search select2-search-icon"></i>`)}return t};const o=e.fn.select2.amd.require("select2/selection/search");const s=o.prototype.update;o.prototype.update=function(e,t){s.apply(this,Array.prototype.slice.apply(arguments));if(this.options.get("preventPlaceholderClear")&&this.placeholder?.text){this.$search.attr("placeholder",this.placeholder.text)}};o.prototype.resizeSearch=function(){this.$search.css("width","100%")};const a=e.fn.select2.amd.require("select2/selection/single");const l=e.fn.select2.amd.require("select2/selection/multiple");const c=a.prototype.update;const d=l.prototype.update;a.prototype.update=function(e,t){c.apply(this,Array.prototype.slice.apply(arguments));this.$selection.find(".select2-selection__rendered").removeAttr("title")};l.prototype.update=function(e){d.apply(this,Array.prototype.slice.apply(arguments));this.$selection.find(".select2-selection__choice").removeAttr("title")}})(window.jQuery);!function(e,t){"function"==typeof define&&define.amd?define([],(function(){return e.svg4everybody=t()})):"object"==typeof exports?module.exports=t():e.svg4everybody=t()}(this,(function(){function e(e,t){if(t){var i=!e.getAttribute("viewBox")&&t.getAttribute("viewBox"),n=document.createDocumentFragment(),r=t.cloneNode(!0);for(i&&e.setAttribute("viewBox",i);r.childNodes.length;){n.appendChild(r.firstChild)}e.appendChild(n)}}function t(t){t.onreadystatechange=function(){if(4===t.readyState){var i=document.createElement("x");i.innerHTML=t.responseText,t.s.splice(0).map((function(t){e(t[0],i.querySelector("#"+t[1].replace(/(\W)/g,"\\$1")))}))}},t.onreadystatechange()}function i(i){function n(){for(var i;i=r[0];){var c=i.parentNode;if(c&&/svg/i.test(c.nodeName)){var d=i.getAttribute("xlink:href");if(o&&(!s||s(d,c,i))){var u=d.split("#"),h=u[0],p=u[1];if(c.removeChild(i),h.length){var f=l[h]=l[h]||new XMLHttpRequest;f.s||(f.s=[],f.open("GET",h),f.send()),f.s.push([c,p]),t(f)}else{e(c,document.getElementById(p))}}}}a(n,17)}i=i||{};var r=document.getElementsByTagName("use"),o="polyfill"in i?i.polyfill:/\bEdge\/12\b|\bTrident\/[567]\b|\bVersion\/7.0 Safari\b/.test(navigator.userAgent)||(navigator.userAgent.match(/AppleWebKit\/(\d+)/)||[])[1]<537,s=i.validate,a=window.requestAnimationFrame||setTimeout,l={};o&&n()}return i}));AGN.Opt.Templates["select2-result"]="<span>{{- title ? title : text }}</span>";AGN.Opt.Templates["select2-badge-option"]=`\n<div class="d-flex align-items-center gap-1">\n    {{ if (value) { }}\n        <span class="status-badge {{- element.getAttribute('data-badge-class')}}"></span>\n    {{ } }}\n    <span>{{- text }}</span>\n</div>\n`;AGN.Opt.Templates["input-feedback"]=`\n<div class="form-control-feedback-message">\n    <i class="icon icon-state-{{- type === 'success' ? 'success' : 'warning' }}"></i>\n    {{ print(message); }}\n</div>\n`;AGN.Opt.Templates["datepicker-btn"]=`\n<button id="{{- id }}" class="btn btn-secondary">\n    <i class="icon {{- iconClass }}"></i>\n    <span class="text">{{- text }}</span>\n</button>\n`;AGN.Opt.Templates["error"]=`\n   <div class="modal modal-alert" tabindex="-1">\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h1 class="modal-title">\n                        <i class="icon icon-state-warning"></i>\n                        {{= headline }}\n                    </h1>\n  \n                    <button type="button" class="btn-close" data-bs-dismiss="modal">\n                        <span class="sr-only"><mvc:message code="button.Cancel"/></span>\n                    </button>\n                </div>\n  \n                <div class="modal-body">\n                    <p>{{= text }}</p>\n                </div>\n                \n                <div class="modal-footer">\n                   <button class="btn btn-primary" data-bs-dismiss="modal" onclick="location.reload();">\n                        <i class="icon icon-redo"></i>\n                        <span class="text">{{= reload }}</span>\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n`;AGN.Opt.Templates["permission-denied"]=`\n   <div class="modal modal-alert" tabindex="-1">\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h1 class="modal-title">\n                        <i class="icon icon-state-alert"></i>\n                        {{= title }}\n                    </h1>\n                </div>\n\n                <div class="modal-body">\n                    <p>{{= text }}</p>\n                </div>\n                \n                <div class="modal-footer">\n                     <button class="btn btn-primary" data-bs-dismiss="modal">\n                        <i class="icon icon-check"></i>\n                        <span class="text">{{= btn }}</span>\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n`;AGN.Opt.Templates["autosave-restore"]=`\n  <div class="modal" tabIndex="-1">\n    <div class="modal-dialog modal-lg">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h1 class="modal-title">{{= title }}</h1>\n          <button type="button" class="btn-close js-confirm-negative" data-bs-dismiss="modal">\n            <span class="sr-only"><mvc:message code="button.Cancel"/></span>\n          </button>\n        </div>\n        <div class="modal-body">\n          <p>{{= content }}</p>\n        </div>\n  \n        <div class="modal-footer">\n            <button type="button" class="btn btn-danger js-confirm-negative" data-bs-dismiss="modal">\n              <i class="icon icon-times"></i>\n              <span class="text">{{= negative }}</span>\n            </button>\n            <button type="button" class="btn btn-primary js-confirm-positive" data-bs-dismiss="modal">\n                <i class="icon icon-check"></i>\n                <span class="text">{{= positive }}</span>\n            </button>\n        </div>\n      </div>\n    </div>\n  </div>\n`;AGN.Opt.Templates["tooltip-template"]=`\n  <div class="tooltip {{= tooltipStyle }}" role="tooltip">\n    <div class="tooltip-arrow {{= arrowStyle }}"></div>\n    <div class="tooltip-inner {{= innerStyle }}"></div>\n  </div>\n`;AGN.Opt.Templates["table-footer"]=`\n {{ if (showRecordsCount === 'simple') { }}\n    <div class="table-wrapper__footer"></div>\n {{ } else { }}\n    <div class="table-wrapper__footer">\n      {{ if (showRecordsCount) { }}\n        <div class="table-wrapper__rows-selection">\n          <select data-number-of-rows class="form-control compact js-select" data-select-options="width: 'auto', dropdownAutoWidth: true">\n            {{ _.each([20, 50, 100, 200], numberOfRows => { }}       \n              <option value="{{- numberOfRows }}" {{- pageSize == numberOfRows ? 'selected="selected"' : ''}}>{{- numberOfRows }}</option>\n            {{ }) }}\n          </select>       \n          <span>${t("defaults.rowsToDisplay")}</span>\n        </div>\n      {{ } }}\n    \n      {{ if (pagination && totalPages > 1) { }}\n        <ul class="pagination">\n          <li class="{{= currentPage == 1 ? 'disabled' : '' }}" data-js-table-page="first" role="button">\n            <span><i class="icon icon-angle-double-left"></i></span>\n          </li>\n          <li class="{{= currentPage == 1 ? 'disabled' : '' }}" data-js-table-page="prev" role="button">\n            <span><i class="icon icon-angle-left"></i></span>\n          </li>\n          {{ _.each(pageSelects, page => { }} \n            <li class="{{= page == currentPage ? 'active' : '' }}" data-js-table-page="{{= page - 1 }}" role="button">\n              <span>{{= page }}</span>\n            </li>\n          {{ }) }}\n          <li class="{{= currentPage == totalPages ? 'disabled' : '' }}" data-js-table-page="next" role="button">\n            <span><i class="icon icon-angle-right"></i></span>\n          </li>\n          <li class="{{= currentPage == totalPages ? 'disabled' : '' }}" data-js-table-page="last" role="button">\n            <span><i class="icon icon-angle-double-right"></i></span>\n          </li>\n        </ul>\n      {{ } }}\n    </div>\n {{ } }}\n`;AGN.Opt.Templates["js-table-wrapper"]=`\n  <div class="table-wrapper">\n    <div class="table-wrapper__header justify-content-end">\n        <div class="table-wrapper__controls">\n          <button type="button" class="btn" data-toggle-table-truncation>\n            <i class="icon icon-ellipsis-h"></i>\n            <span>${t("defaults.toggleTruncation")}</span>\n          </button>\n          \n          <p class="table-wrapper__entries-label">\n            <b></b>\n            <span class="text-truncate">${t("defaults.entries")}</span>\n          </p>\n        </div>\n    </div>\n  </div>\n`;AGN.Opt.Templates["session-expired"]=`\n<div class="modal modal-warning" tabindex="-1" data-bs-backdrop="static">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h1 class="modal-title">\n                    <i class="icon icon-state-warning"></i>\n                    ${t("logon.session.expired")}\n                </h1>\n            </div>\n\n            <div class="modal-body">\n                <p>${t("logon.session.notification")}</p>\n            </div>\n            \n            <div class="modal-footer">\n               <button class="btn btn-primary" data-bs-dismiss="modal">\n                  ${t("defaults.relogin")}\n              </button>\n            </div>\n        </div>\n    </div>\n</div>\n`;AGN.Opt.Templates["datetime-picker"]=`\n  <div class="date-time-container">\n      <div class="date-picker-container">\n        <input type="text" class="form-control js-datepicker" value="{{- date }}" placeholder="{{- window.adminDateFormat }}" {{- extraAttrs }} />\n      </div>\n      {{ var timeMask = timeMask ? timeMask : 'h:s' }}\n      <div class="time-picker-container">\n         <input type="text" class="form-control js-timepicker" value="{{- time }}" data-timepicker-options="mask: '{{- timeMask }}'" {{- extraAttrs }} />\n      </div>\n  </div>\n`;AGN.Opt.Templates["plus-btn"]=`\n<a href="#" class="btn btn-icon btn-primary" {{= attrs }}>\n    <i class="icon icon-plus"></i>\n</a>`;AGN.Opt.Templates["trash-btn"]=`\n<a href="#" class="btn btn-icon btn-danger" {{= attrs }}>\n    <i class="icon icon-trash-alt"></i>\n</a>`;AGN.Opt.Templates["notification-info"]=`\n  <div class="notification-simple">\n      <i class="icon icon-info-circle"></i>\n      <span>{{- message }}</span>\n  </div>\n`;AGN.Opt.Templates["progress"]=`\n  {{ if (isNaN(currentProgress) || currentProgress === true) { }}\n      <div class="progress loop" style="width: 100%"></div>\n  {{ } else { }}\n      <div class="progress">\n          <div class="progress-bar"\n                     role="progressbar"\n                     aria-valuenow="{{= currentProgress }}"\n                     aria-valuemin="0"\n                     aria-valuemax="100"\n                     style="width: {{= currentProgress }}%"></div>\n          <div class="percentage">{{= currentProgress }}%</div>\n      </div>\n  {{ } }}\n`;AGN.Opt.Templates["tile-overlay"]=`\n  <div class="tile-overlay tile-overlay--{{= state }}">\n      {{ if (state === 'visible') { }}\n        <button type="button" class="btn btn-lg btn-sm-horizontal" data-edit-tile-visibility>\n            <i class="icon icon-eye-slash"></i>\n            ${t("editableView.tile.state.visible")}\n        </button>\n      {{ } else if (state === 'hidden') { }}\n        <button type="button" class="btn btn-lg btn-sm-horizontal" data-edit-tile-visibility>\n            <i class="icon icon-eye"></i>\n            ${t("editableView.tile.state.hidden")}\n        </button>\n      {{ } else { }}\n        <button type="button" class="btn btn-lg btn-sm-horizontal pe-none">\n            <i class="icon icon-minus-circle"></i>\n            ${t("editableView.tile.state.main")}\n        </button>\n      {{ } }}\n  </div>\n`;AGN.Opt.Templates["deletable-table-column"]=`\n  <div class="d-flex gap-1 align-items-center hidden">\n    {{ if (!permanent) { }}\n      <button type="button" class="icon-btn icon-btn--danger" data-remove-table-column>\n        <i class="icon icon-times-circle"></i>\n      </button>\n    {{ } }}\n    <span class="text-truncate">{{= text }}</span>\n  </div>\n`;AGN.Opt.Templates["table-column-picker"]=`\n  <div class="dropdown dropstart hidden">\n      <button type="button" class="icon-btn icon-btn--primary" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">\n        <i class="icon icon-plus-circle"></i>\n      </button>\n      <ul class="dropdown-menu dropdown-menu--table-column mt-4">\n          <select class="form-control" multiple data-select-options="preventPlaceholderClear: true, placeholder: '${t("tables.searchOoo")}'">\n            {{ _.each(columns, col => { }}\n              <option value="{{- col.name }}" {{ col.selected ? print('selected') : print('') }}>\n                {{- col.text }}\n              </option>\n            {{ }); }}\n          </select>\n      </ul>\n  </div>\n`;AGN.Opt.Templates["multi-editor-modal"]=`\n<div class="modal modal-adaptive modal-editor">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h1 class="modal-title">{{= title }}</h1>\n                <button type="button" class="btn-close js-confirm-negative" data-bs-dismiss="modal">\n                    <span class="sr-only">${t("defaults.cancel")}</span>\n                </button>\n            </div>\n            <div class="modal-body">\n                <div class="modal-editors-container">\n                    <div data-placeholder></div>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <a href="#" class="btn btn-primary" data-apply-enlarged>\n                    <i class="icon icon-save"></i>\n                    <span class="text">{{- btnText }}</span>\n                </a>\n            </div>\n        </div>\n    </div>\n</div>\n`;AGN.Opt.Templates["mailing-locked"]=`\n<div class="modal modal-warning" tabindex="-1">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h1 class="modal-title">\n                    <i class="icon icon-state-warning"></i>\n                    {{= t('defaults.warning') }}\n                </h1>\n                \n                <button type="button" class="btn-close" data-bs-dismiss="modal">\n                  <span class="sr-only"><mvc:message code="button.Cancel"/></span>\n                </button>\n            </div>\n\n            <div class="modal-body">\n                <p>{{= t('error.mailing.exclusiveLockingFailed', username) }}</p>\n            </div>\n        </div>\n    </div>\n</div>\n`;AGN.Opt.Templates["double-select-options"]=`\n{{ _.forEach(opts, (name, value) => { }}\n    <option value="{{- value }}" {{ value == valueSelected ? print('selected') : print('') }}>\n      {{- name }}\n    </option>\n{{ }); }}\n`;if(window.agnTimeZoneId){moment.tz.setDefault(window.agnTimeZoneId)}(function(e,t){if(typeof define=="function"&&define.amd){define(["jquery","dot/doT","jquery-extendext"],t)}else if(typeof module==="object"&&module.exports){module.exports=t(require("jquery"),require("dot/doT"),require("jquery-extendext"))}else{t(e.jQuery,e.doT)}})(this,(function(e,i){"use strict";var n=function(t,s){t[0].queryBuilder=this;this.$el=t;this.settings=e.extendext(true,"replace",{},n.DEFAULTS,s);this.model=new o;this.status={id:null,generated_id:false,group_id:0,rule_id:0,has_optgroup:false,has_operator_optgroup:false};this.filters=this.settings.filters;this.icons=this.settings.icons;this.operators=this.settings.operators;this.templates=this.settings.templates;this.plugins=this.settings.plugins;this.lang=null;if(n.regional["en"]===undefined){r.error("Config",'"i18n/en.js" not loaded.')}this.lang=e.extendext(true,"replace",{},n.regional["en"],n.regional[this.settings.lang_code],this.settings.lang);if(this.settings.allow_groups===false){this.settings.allow_groups=0}else if(this.settings.allow_groups===true){this.settings.allow_groups=-1}Object.keys(this.templates).forEach((function(e){if(!this.templates[e]){this.templates[e]=n.templates[e]}if(typeof this.templates[e]=="string"){this.templates[e]=i.template(this.templates[e])}}),this);if(!this.$el.attr("id")){this.$el.attr("id","qb_"+Math.floor(Math.random()*99999));this.status.generated_id=true}this.status.id=this.$el.attr("id");this.$el.addClass("query-builder form-inline");this.filters=this.checkFilters(this.filters);this.operators=this.checkOperators(this.operators);this.bindEvents();this.initPlugins()};e.extend(n.prototype,{trigger:function(t){var i=new e.Event(this._tojQueryEvent(t),{builder:this});this.$el.triggerHandler(i,Array.prototype.slice.call(arguments,1));return i},change:function(t,i){var n=new e.Event(this._tojQueryEvent(t,true),{builder:this,value:i});this.$el.triggerHandler(n,Array.prototype.slice.call(arguments,2));return n.value},on:function(e,t){this.$el.on(this._tojQueryEvent(e),t);return this},off:function(e,t){this.$el.off(this._tojQueryEvent(e),t);return this},once:function(e,t){this.$el.one(this._tojQueryEvent(e),t);return this},_tojQueryEvent:function(e,t){return e.split(" ").map((function(e){return e+".queryBuilder"+(t?".filter":"")})).join(" ")}});n.types={string:"string",integer:"number",double:"number",date:"datetime",time:"datetime",datetime:"datetime",boolean:"boolean"};n.inputs=["text","number","textarea","radio","checkbox","select"];n.modifiable_options=["display_errors","allow_groups","allow_empty","default_condition","default_filter"];n.selectors={group_container:".rules-group-container",rule_container:".rule-container",filter_container:".rule-filter-container",operator_container:".rule-operator-container",value_container:".rule-value-container",error_container:".error-container",condition_container:".rules-group-header .group-conditions",rule_header:".rule-header",group_header:".rules-group-header",group_actions:".group-actions",rule_actions:".rule-actions",rules_list:".rules-group-body>.rules-list",group_btns:".btn",group_condition:".rules-group-header [name$=_cond]",rule_filter:".rule-filter-container [name$=_filter]",rule_operator:".rule-operator-container [name$=_operator]",rule_value:".rule-value-container :input:not(.icon-help)",add_rule:"[data-add=rule]",delete_rule:"[data-delete=rule]",add_group:"[data-add=group]",delete_group:"[data-delete=group]"};n.templates={};n.regional={};n.OPERATORS={equal:{type:"equal",nb_inputs:1,multiple:false,apply_to:["string","number","datetime","boolean"]},not_equal:{type:"not_equal",nb_inputs:1,multiple:false,apply_to:["string","number","datetime","boolean"]},in:{type:"in",nb_inputs:1,multiple:true,apply_to:["string","number","datetime"]},not_in:{type:"not_in",nb_inputs:1,multiple:true,apply_to:["string","number","datetime"]},less:{type:"less",nb_inputs:1,multiple:false,apply_to:["number","datetime"]},less_or_equal:{type:"less_or_equal",nb_inputs:1,multiple:false,apply_to:["number","datetime"]},greater:{type:"greater",nb_inputs:1,multiple:false,apply_to:["number","datetime"]},greater_or_equal:{type:"greater_or_equal",nb_inputs:1,multiple:false,apply_to:["number","datetime"]},between:{type:"between",nb_inputs:2,multiple:false,apply_to:["number","datetime"]},not_between:{type:"not_between",nb_inputs:2,multiple:false,apply_to:["number","datetime"]},begins_with:{type:"begins_with",nb_inputs:1,multiple:false,apply_to:["string"]},not_begins_with:{type:"not_begins_with",nb_inputs:1,multiple:false,apply_to:["string"]},contains:{type:"contains",nb_inputs:1,multiple:false,apply_to:["string"]},not_contains:{type:"not_contains",nb_inputs:1,multiple:false,apply_to:["string"]},ends_with:{type:"ends_with",nb_inputs:1,multiple:false,apply_to:["string"]},not_ends_with:{type:"not_ends_with",nb_inputs:1,multiple:false,apply_to:["string"]},is_empty:{type:"is_empty",nb_inputs:0,multiple:false,apply_to:["string"]},is_not_empty:{type:"is_not_empty",nb_inputs:0,multiple:false,apply_to:["string"]},is_null:{type:"is_null",nb_inputs:0,multiple:false,apply_to:["string","number","datetime","boolean"]},is_not_null:{type:"is_not_null",nb_inputs:0,multiple:false,apply_to:["string","number","datetime","boolean"]}};n.DEFAULTS={filters:[],plugins:[],sort_filters:false,display_errors:true,allow_groups:-1,allow_empty:false,conditions:["AND","OR"],default_condition:"AND",inputs_separator:" , ",select_placeholder:"------",display_empty_filter:true,default_filter:null,optgroups:{},default_rule_flags:{filter_readonly:false,operator_readonly:false,value_readonly:false,no_delete:false},default_group_flags:{condition_readonly:false,no_add_rule:false,no_add_group:false,no_delete:false},templates:{group:null,rule:null,filterSelect:null,operatorSelect:null,ruleValueSelect:null},lang_code:"en",lang:{},operators:["equal","not_equal","in","not_in","less","less_or_equal","greater","greater_or_equal","between","not_between","begins_with","not_begins_with","contains","not_contains","ends_with","not_ends_with","is_empty","is_not_empty","is_null","is_not_null"],icons:{add_group:"glyphicon glyphicon-plus-sign",add_rule:"glyphicon glyphicon-plus",remove_group:"glyphicon glyphicon-remove",remove_rule:"glyphicon glyphicon-remove",error:"glyphicon glyphicon-warning-sign"}};n.plugins={};n.defaults=function(t){if(typeof t=="object"){e.extendext(true,"replace",n.DEFAULTS,t)}else if(typeof t=="string"){if(typeof n.DEFAULTS[t]=="object"){return e.extend(true,{},n.DEFAULTS[t])}else{return n.DEFAULTS[t]}}else{return e.extend(true,{},n.DEFAULTS)}};n.define=function(e,t,i){n.plugins[e]={fct:t,def:i||{}}};n.extend=function(t){e.extend(n.prototype,t)};n.prototype.initPlugins=function(){if(!this.plugins){return}if(e.isArray(this.plugins)){var t={};this.plugins.forEach((function(e){t[e]=null}));this.plugins=t}Object.keys(this.plugins).forEach((function(t){if(t in n.plugins){this.plugins[t]=e.extend(true,{},n.plugins[t].def,this.plugins[t]||{});n.plugins[t].fct.call(this,this.plugins[t])}else{r.error("Config",'Unable to find plugin "{0}"',t)}}),this)};n.prototype.getPluginOptions=function(e,t){var i;if(this.plugins&&this.plugins[e]){i=this.plugins[e]}else if(n.plugins[e]){i=n.plugins[e].def}if(i){if(t){return i[t]}else{return i}}else{r.error("Config",'Unable to find plugin "{0}"',e)}};n.prototype.init=function(e){this.trigger("afterInit");if(e){this.setRules(e);delete this.settings.rules}else{this.setRoot(true)}};n.prototype.checkFilters=function(e){var t=[];if(!e||e.length===0){r.error("Config","Missing filters list")}e.forEach((function(e,i){if(!e.id){r.error("Config","Missing filter {0} id",i)}if(t.indexOf(e.id)!=-1){r.error("Config",'Filter "{0}" already defined',e.id)}t.push(e.id);if(!e.type){e.type="string"}else if(!n.types[e.type]){r.error("Config",'Invalid type "{0}"',e.type)}if(!e.input){e.input=n.types[e.type]==="number"?"number":"text"}else if(typeof e.input!="function"&&n.inputs.indexOf(e.input)==-1){r.error("Config",'Invalid input "{0}"',e.input)}if(e.operators){e.operators.forEach((function(e){if(typeof e!="string"){r.error("Config","Filter operators must be global operators types (string)")}}))}if(!e.field){e.field=e.id}if(!e.label){e.label=e.field}if(!e.optgroup){e.optgroup=null}else{this.status.has_optgroup=true;if(!this.settings.optgroups[e.optgroup]){this.settings.optgroups[e.optgroup]=e.optgroup}}switch(e.input){case"radio":case"checkbox":if(!e.values||e.values.length<1){r.error("Config",'Missing filter "{0}" values',e.id)}break;case"select":var o=[];e.has_optgroup=false;r.iterateOptions(e.values,function(t,i,n){o.push({value:t,label:i,optgroup:n||null});if(n){e.has_optgroup=true;if(!this.settings.optgroups[n]){this.settings.optgroups[n]=n}}}.bind(this));if(e.has_optgroup){e.values=r.groupSort(o,"optgroup")}else{e.values=o}if(e.placeholder){if(e.placeholder_value===undefined){e.placeholder_value=-1}e.values.forEach((function(t){if(t.value==e.placeholder_value){r.error("Config",'Placeholder of filter "{0}" overlaps with one of its values',e.id)}}))}break}}),this);if(this.settings.sort_filters){if(typeof this.settings.sort_filters=="function"){e.sort(this.settings.sort_filters)}else{var i=this;e.sort((function(e,t){return i.translate(e.label).localeCompare(i.translate(t.label))}))}}if(this.status.has_optgroup){e=r.groupSort(e,"optgroup")}return e};n.prototype.checkOperators=function(t){var i=[];t.forEach((function(o,s){if(typeof o=="string"){if(!n.OPERATORS[o]){r.error("Config",'Unknown operator "{0}"',o)}t[s]=o=e.extendext(true,"replace",{},n.OPERATORS[o])}else{if(!o.type){r.error("Config",'Missing "type" for operator {0}',s)}if(n.OPERATORS[o.type]){t[s]=o=e.extendext(true,"replace",{},n.OPERATORS[o.type],o)}if(o.nb_inputs===undefined||o.apply_to===undefined){r.error("Config",'Missing "nb_inputs" and/or "apply_to" for operator "{0}"',o.type)}}if(i.indexOf(o.type)!=-1){r.error("Config",'Operator "{0}" already defined',o.type)}i.push(o.type);if(!o.optgroup){o.optgroup=null}else{this.status.has_operator_optgroup=true;if(!this.settings.optgroups[o.optgroup]){this.settings.optgroups[o.optgroup]=o.optgroup}}}),this);if(this.status.has_operator_optgroup){t=r.groupSort(t,"optgroup")}return t};n.prototype.bindEvents=function(){var t=this;var i=n.selectors;this.$el.on("change.queryBuilder",i.group_condition,(function(){if(e(this).is(":checked")){var n=e(this).closest(i.group_container);t.getModel(n).condition=e(this).val()}}));this.$el.on("change.queryBuilder",i.rule_filter,(function(){var n=e(this).closest(i.rule_container);t.getModel(n).filter=t.getFilterById(e(this).val())}));this.$el.on("change.queryBuilder",i.rule_operator,(function(){var n=e(this).closest(i.rule_container);t.getModel(n).operator=t.getOperatorByType(e(this).val())}));this.$el.on("click.queryBuilder",i.add_rule,(function(){var n=e(this).closest(i.group_container);t.addRule(t.getModel(n))}));this.$el.on("click.queryBuilder",i.delete_rule,(function(){var n=e(this).closest(i.rule_container);t.deleteRule(t.getModel(n))}));if(this.settings.allow_groups!==0){this.$el.on("click.queryBuilder",i.add_group,(function(){var n=e(this).closest(i.group_container);t.addGroup(t.getModel(n))}));this.$el.on("click.queryBuilder",i.delete_group,(function(){var n=e(this).closest(i.group_container);t.deleteGroup(t.getModel(n))}))}this.model.on({drop:function(e,i){i.$el.remove();t.refreshGroupsConditions()},add:function(e,i,r,o){if(o===0){r.$el.prependTo(i.$el.find(">"+n.selectors.rules_list))}else{r.$el.insertAfter(i.rules[o-1].$el)}t.refreshGroupsConditions()},move:function(e,i,r,o){i.$el.detach();if(o===0){i.$el.prependTo(r.$el.find(">"+n.selectors.rules_list))}else{i.$el.insertAfter(r.rules[o-1].$el)}t.refreshGroupsConditions()},update:function(e,i,n,r,o){if(i instanceof l){switch(n){case"error":t.updateError(i);break;case"flags":t.applyRuleFlags(i);break;case"filter":t.updateRuleFilter(i,o);break;case"operator":t.updateRuleOperator(i,o);break;case"value":t.updateRuleValue(i,o);break}}else{switch(n){case"error":t.updateError(i);break;case"flags":t.applyGroupFlags(i);break;case"condition":t.updateGroupCondition(i,o);break}}}})};n.prototype.setRoot=function(t,i,r){t=t===undefined||t===true;var o=this.nextGroupId();var s=e(this.getGroupTemplate(o,1));s.find(n.selectors.group_btns).addClass(this.settings.readonly?"disabled":"");this.$el.append(s);this.model.root=new a(null,s);this.model.root.model=this.model;this.model.root.data=i;this.model.root.flags=e.extend({},this.settings.default_group_flags,r);this.model.root.condition=this.settings.default_condition;this.trigger("afterAddGroup",this.model.root);if(t){this.addRule(this.model.root)}return this.model.root};n.prototype.addGroup=function(t,i,n,r){i=i===undefined||i===true;var o=t.level+1;var s=this.trigger("beforeAddGroup",t,i,o);if(s.isDefaultPrevented()){return null}var a=this.nextGroupId();var l=e(this.getGroupTemplate(a,o));var c=t.addGroup(l);c.data=n;c.flags=e.extend({},this.settings.default_group_flags,r);c.condition=this.settings.default_condition;this.trigger("afterAddGroup",c);this.trigger("rulesChanged");if(i){this.addRule(c)}return c};n.prototype.deleteGroup=function(e){if(e.isRoot()){return false}var t=this.trigger("beforeDeleteGroup",e);if(t.isDefaultPrevented()){return false}var i=true;e.each("reverse",(function(e){i&=this.deleteRule(e)}),(function(e){i&=this.deleteGroup(e)}),this);if(i){e.drop();this.trigger("afterDeleteGroup");this.trigger("rulesChanged")}return i};n.prototype.updateGroupCondition=function(t,i){t.$el.find(">"+n.selectors.group_condition).each((function(){var i=e(this);i.prop("checked",i.val()===t.condition);i.parent().toggleClass("active",i.val()===t.condition)}));this.trigger("afterUpdateGroupCondition",t,i);this.trigger("rulesChanged")};n.prototype.refreshGroupsConditions=function(){(function e(t){if(!t.flags||t.flags&&!t.flags.condition_readonly){t.$el.find(">"+n.selectors.group_condition).prop("disabled",t.rules.length<=1).parent().toggleClass("disabled",t.rules.length<=1)}t.each(null,(function(t){e(t)}),this)})(this.model.root)};n.prototype.addRule=function(t,i,n){var r=this.trigger("beforeAddRule",t);if(r.isDefaultPrevented()){return null}var o=this.nextRuleId();var s=e(this.getRuleTemplate(o));var a=t.addRule(s);a.data=i;a.flags=e.extend({},this.settings.default_rule_flags,n);this.trigger("afterAddRule",a);this.trigger("rulesChanged");this.createRuleFilters(a);if(this.settings.default_filter||!this.settings.display_empty_filter){a.filter=this.change("getDefaultFilter",this.getFilterById(this.settings.default_filter||this.filters[0].id),a)}return a};n.prototype.deleteRule=function(e){if(e.flags.no_delete){return false}var t=this.trigger("beforeDeleteRule",e);if(t.isDefaultPrevented()){return false}e.drop();this.trigger("afterDeleteRule");this.trigger("rulesChanged");return true};n.prototype.createRuleFilters=function(t){var i=this.change("getRuleFilters",this.filters,t);var r=e(this.getRuleFilterSelect(t,i));t.$el.find(n.selectors.filter_container).html(r);this.trigger("afterCreateRuleFilters",t);this.applyRuleFlags(t)};n.prototype.createRuleOperators=function(t){var i=t.$el.find(n.selectors.operator_container).empty();if(!t.filter){return}var r=this.getOperators(t.filter);var o=e(this.getRuleOperatorSelect(t,r));i.html(o);if(t.filter.default_operator){t.__.operator=this.getOperatorByType(t.filter.default_operator)}else{t.__.operator=r[0]}t.$el.find(n.selectors.rule_operator).val(t.operator.type);this.trigger("afterCreateRuleOperators",t,r);this.applyRuleFlags(t)};n.prototype.createRuleInput=function(t){var i=t.$el.find(n.selectors.value_container).empty();t.__.value=undefined;if(!t.filter||!t.operator||t.operator.nb_inputs===0){return}var r=this;var o=e();var s=t.filter;for(var a=0;a<t.operator.nb_inputs;a++){var l=e(this.getRuleInput(t,a));if(a>0)i.append(this.settings.inputs_separator);i.append(l);o=o.add(l)}i.css("display","");o.on("change "+(s.input_event||""),(function(){if(!t._updating_input){t._updating_value=true;t.value=r.getRuleInputValue(t);t._updating_value=false}}));if(s.plugin){o[s.plugin](s.plugin_config||{})}this.trigger("afterCreateRuleInput",t);if(s.default_value!==undefined){t.value=s.default_value}else{t._updating_value=true;t.value=r.getRuleInputValue(t);t._updating_value=false}this.applyRuleFlags(t)};n.prototype.updateRuleFilter=function(e,t){this.createRuleOperators(e);this.createRuleInput(e);e.$el.find(n.selectors.rule_filter).val(e.filter?e.filter.id:"-1");if(t&&e.filter&&t.id!==e.filter.id){e.data=undefined}this.trigger("afterUpdateRuleFilter",e,t);this.trigger("rulesChanged")};n.prototype.updateRuleOperator=function(e,t){var i=e.$el.find(n.selectors.value_container);if(!e.operator||e.operator.nb_inputs===0){i.hide();e.__.value=undefined}else{i.css("display","");if(i.is(":empty")||!t||e.operator.nb_inputs!==t.nb_inputs||e.operator.optgroup!==t.optgroup){this.createRuleInput(e)}}if(e.operator){e.$el.find(n.selectors.rule_operator).val(e.operator.type);e.__.value=this.getRuleInputValue(e)}this.trigger("afterUpdateRuleOperator",e,t);this.trigger("rulesChanged")};n.prototype.updateRuleValue=function(e,t){if(!e._updating_value){this.setRuleInputValue(e,e.value)}this.trigger("afterUpdateRuleValue",e,t);this.trigger("rulesChanged")};n.prototype.applyRuleFlags=function(e){var t=e.flags;var i=n.selectors;e.$el.find(i.rule_filter).prop("disabled",t.filter_readonly);e.$el.find(i.rule_operator).prop("disabled",t.operator_readonly);e.$el.find(i.rule_value).prop("disabled",t.value_readonly);if(t.no_delete){e.$el.find(i.delete_rule).remove()}this.trigger("afterApplyRuleFlags",e)};n.prototype.applyGroupFlags=function(e){var t=e.flags;var i=n.selectors;e.$el.find(">"+i.group_condition).prop("disabled",t.condition_readonly).parent().toggleClass("readonly",t.condition_readonly);if(t.no_add_rule){e.$el.find(i.add_rule).remove()}if(t.no_add_group){e.$el.find(i.add_group).remove()}if(t.no_delete){e.$el.find(i.delete_group).remove()}this.trigger("afterApplyGroupFlags",e)};n.prototype.clearErrors=function(e){e=e||this.model.root;if(!e){return}e.error=null;if(e instanceof a){e.each((function(e){e.error=null}),(function(e){this.clearErrors(e)}),this)}};n.prototype.updateError=function(e){if(this.settings.display_errors){if(e.error===null){e.$el.removeClass("has-error")}else{var t=this.translate("errors",e.error[0]);t=r.fmt(t,e.error.slice(1));t=this.change("displayError",t,e.error,e);e.$el.addClass("has-error").find(n.selectors.error_container).eq(0).attr("title",t)}}};n.prototype.triggerValidationError=function(t,i,n){if(!e.isArray(i)){i=[i]}var r=this.trigger("validationError",t,i,n);if(!r.isDefaultPrevented()){t.error=i}};n.prototype.destroy=function(){this.trigger("beforeDestroy");if(this.status.generated_id){this.$el.removeAttr("id")}this.clear();this.model=null;this.$el.off(".queryBuilder").removeClass("query-builder").removeData("queryBuilder");delete this.$el[0].queryBuilder};n.prototype.reset=function(){var t=this.trigger("beforeReset");if(t.isDefaultPrevented()){return}this.status.group_id=1;this.status.rule_id=0;this.model.root.empty();this.model.root.data=undefined;this.model.root.flags=e.extend({},this.settings.default_group_flags);this.model.root.condition=this.settings.default_condition;this.addRule(this.model.root);this.trigger("afterReset");this.trigger("rulesChanged")};n.prototype.clear=function(){var e=this.trigger("beforeClear");if(e.isDefaultPrevented()){return}this.status.group_id=0;this.status.rule_id=0;if(this.model.root){this.model.root.drop();this.model.root=null}this.trigger("afterClear");this.trigger("rulesChanged")};n.prototype.setOptions=function(t){e.each(t,function(e,t){if(n.modifiable_options.indexOf(e)!==-1){this.settings[e]=t}}.bind(this))};n.prototype.getModel=function(t){if(!t){return this.model.root}else if(t instanceof s){return t}else{return e(t).data("queryBuilderModel")}};n.prototype.validate=function(t){t=e.extend({skip_empty:false},t);this.clearErrors();var i=this;var n=function e(n){var r=0;var o=0;n.each((function(e){if(!e.filter&&t.skip_empty){return}if(!e.filter){i.triggerValidationError(e,"no_filter",null);o++;return}if(!e.operator){i.triggerValidationError(e,"no_operator",null);o++;return}if(e.operator.nb_inputs!==0){var n=i.validateValue(e,e.value);if(n!==true){i.triggerValidationError(e,n,e.value);o++;return}}r++}),(function(t){var i=e(t);if(i===true){r++}else if(i===false){o++}}));if(o>0){return false}else if(r===0&&!n.isRoot()&&t.skip_empty){return null}else if(r===0&&(!i.settings.allow_empty||!n.isRoot())){i.triggerValidationError(n,"empty_group",null);return false}return true}(this.model.root);return this.change("validate",n)};n.prototype.getRules=function(t){t=e.extend({get_flags:false,allow_invalid:false,skip_empty:false},t);var i=this.validate(t);if(!i&&!t.allow_invalid){return null}var n=this;var r=function i(r){var o={condition:r.condition,rules:[]};if(r.data){o.data=e.extendext(true,"replace",{},r.data)}if(t.get_flags){var s=n.getGroupFlags(r.flags,t.get_flags==="all");if(!e.isEmptyObject(s)){o.flags=s}}r.each((function(i){if(!i.filter&&t.skip_empty){return}var r=null;if(!i.operator||i.operator.nb_inputs!==0){r=i.value}var s={id:i.filter?i.filter.id:null,field:i.filter?i.filter.field:null,type:i.filter?i.filter.type:null,input:i.filter?i.filter.input:null,operator:i.operator?i.operator.type:null,value:r};if(i.filter&&i.filter.data||i.data){s.data=e.extendext(true,"replace",{},i.filter.data,i.data)}if(t.get_flags){var a=n.getRuleFlags(i.flags,t.get_flags==="all");if(!e.isEmptyObject(a)){s.flags=a}}o.rules.push(n.change("ruleToJson",s,i))}),(function(e){var n=i(e);if(n.rules.length!==0||!t.skip_empty){o.rules.push(n)}}),this);return n.change("groupToJson",o,r)}(this.model.root);r.valid=i;return this.change("getRules",r)};n.prototype.setRules=function(t,i){i=e.extend({allow_invalid:false},i);if(e.isArray(t)){t={condition:this.settings.default_condition,rules:t}}if(!t||!t.rules||t.rules.length===0&&!this.settings.allow_empty){r.error("RulesParse","Incorrect data object passed")}this.clear();this.setRoot(false,t.data,this.parseGroupFlags(t));t=this.change("setRules",t,i);var n=this;(function e(t,o){if(o===null){return}if(t.condition===undefined){t.condition=n.settings.default_condition}else if(n.settings.conditions.indexOf(t.condition)==-1){r.error(!i.allow_invalid,"UndefinedCondition",'Invalid condition "{0}"',t.condition);t.condition=n.settings.default_condition}o.condition=t.condition;t.rules.forEach((function(t){var s;if(t.rules!==undefined){if(n.settings.allow_groups!==-1&&n.settings.allow_groups<o.level){r.error(!i.allow_invalid,"RulesParse","No more than {0} groups are allowed",n.settings.allow_groups);n.reset()}else{s=n.addGroup(o,false,t.data,n.parseGroupFlags(t));if(s===null){return}e(t,s)}}else{if(!t.empty){if(t.id===undefined){r.error(!i.allow_invalid,"RulesParse","Missing rule field id");t.empty=true}if(t.operator===undefined){t.operator="equal"}}s=n.addRule(o,t.data,n.parseRuleFlags(t));if(s===null){return}if(!t.empty){s.filter=n.getFilterById(t.id,!i.allow_invalid)}if(s.filter){s.operator=n.getOperatorByType(t.operator,!i.allow_invalid);if(!s.operator){s.operator=n.getOperators(s.filter)[0]}}if(s.operator&&s.operator.nb_inputs!==0){if(t.value!==undefined){s.value=t.value}else if(s.filter.default_value!==undefined){s.value=s.filter.default_value}}if(n.change("jsonToRule",s,t)!=s){r.error("RulesParse","Plugin tried to change rule reference")}}}));if(n.change("jsonToGroup",o,t)!=o){r.error("RulesParse","Plugin tried to change group reference")}})(t,this.model.root);this.trigger("afterSetRules")};n.prototype.validateValue=function(e,t){var i=e.filter.validation||{};var n=true;if(i.callback){n=i.callback.call(this,t,e)}else{n=this._validateValue(e,t)}return this.change("validateValue",n,t,e)};n.prototype._validateValue=function(t,i){var o=t.filter;var s=t.operator;var a=o.validation||{};var l=true;var c,d;if(t.operator.nb_inputs===1){i=[i]}for(var u=0;u<s.nb_inputs;u++){if(!s.multiple&&e.isArray(i[u])&&i[u].length>1){l=["operator_not_multiple",s.type,this.translate("operators",s.type)];break}switch(o.input){case"radio":if(i[u]===undefined||i[u].length===0){if(!a.allow_empty_value){l=["radio_empty"]}break}break;case"checkbox":if(i[u]===undefined||i[u].length===0){if(!a.allow_empty_value){l=["checkbox_empty"]}break}break;case"select":if(i[u]===undefined||i[u].length===0||o.placeholder&&i[u]==o.placeholder_value){if(!a.allow_empty_value){l=["select_empty"]}break}break;default:d=e.isArray(i[u])?i[u]:[i[u]];for(var h=0;h<d.length;h++){switch(n.types[o.type]){case"string":if(d[h]===undefined||d[h].length===0){if(!a.allow_empty_value){l=["string_empty"]}break}if(a.min!==undefined){if(d[h].length<parseInt(a.min)){l=[this.getValidationMessage(a,"min","string_exceed_min_length"),a.min];break}}if(a.max!==undefined){if(d[h].length>parseInt(a.max)){l=[this.getValidationMessage(a,"max","string_exceed_max_length"),a.max];break}}if(a.format){if(typeof a.format=="string"){a.format=new RegExp(a.format)}if(!a.format.test(d[h])){l=[this.getValidationMessage(a,"format","string_invalid_format"),a.format];break}}break;case"number":if(d[h]===undefined||d[h].length===0){if(!a.allow_empty_value){l=["number_nan"]}break}if(isNaN(d[h])){l=["number_nan"];break}if(o.type=="integer"){if(parseInt(d[h])!=d[h]){l=["number_not_integer"];break}}else{if(parseFloat(d[h])!=d[h]){l=["number_not_double"];break}}if(a.min!==undefined){if(d[h]<parseFloat(a.min)){l=[this.getValidationMessage(a,"min","number_exceed_min"),a.min];break}}if(a.max!==undefined){if(d[h]>parseFloat(a.max)){l=[this.getValidationMessage(a,"max","number_exceed_max"),a.max];break}}if(a.step!==undefined&&a.step!=="any"){var p=(d[h]/a.step).toPrecision(14);if(parseInt(p)!=p){l=[this.getValidationMessage(a,"step","number_wrong_step"),a.step];break}}break;case"datetime":if(d[h]===undefined||d[h].length===0){if(!a.allow_empty_value){l=["datetime_empty"]}break}if(a.format){if(!("moment"in window)){r.error("MissingLibrary","MomentJS is required for Date/Time validation. Get it here http://momentjs.com")}var f=moment(d[h],a.format);if(!f.isValid()){l=[this.getValidationMessage(a,"format","datetime_invalid"),a.format];break}else{if(a.min){if(f<moment(a.min,a.format)){l=[this.getValidationMessage(a,"min","datetime_exceed_min"),a.min];break}}if(a.max){if(f>moment(a.max,a.format)){l=[this.getValidationMessage(a,"max","datetime_exceed_max"),a.max];break}}}}break;case"boolean":if(d[h]===undefined||d[h].length===0){if(!a.allow_empty_value){l=["boolean_not_valid"]}break}c=(""+d[h]).trim().toLowerCase();if(c!=="true"&&c!=="false"&&c!=="1"&&c!=="0"&&d[h]!==1&&d[h]!==0){l=["boolean_not_valid"];break}}if(l!==true){break}}}if(l!==true){break}}if((t.operator.type==="between"||t.operator.type==="not_between")&&i.length===2){switch(n.types[o.type]){case"number":if(i[0]>i[1]){l=["number_between_invalid",i[0],i[1]]}break;case"datetime":if(a.format){if(!("moment"in window)){r.error("MissingLibrary","MomentJS is required for Date/Time validation. Get it here http://momentjs.com")}if(moment(i[0],a.format).isAfter(moment(i[1],a.format))){l=["datetime_between_invalid",i[0],i[1]]}}break}}return l};n.prototype.nextGroupId=function(){return this.status.id+"_group_"+this.status.group_id++};n.prototype.nextRuleId=function(){return this.status.id+"_rule_"+this.status.rule_id++};n.prototype.getOperators=function(e){if(typeof e=="string"){e=this.getFilterById(e)}var t=[];for(var i=0,r=this.operators.length;i<r;i++){if(e.operators){if(e.operators.indexOf(this.operators[i].type)==-1){continue}}else if(this.operators[i].apply_to.indexOf(n.types[e.type])==-1){continue}t.push(this.operators[i])}if(e.operators){t.sort((function(t,i){return e.operators.indexOf(t.type)-e.operators.indexOf(i.type)}))}return this.change("getOperators",t,e)};n.prototype.getFilterById=function(e,t){if(e=="-1"){return null}for(var i=0,n=this.filters.length;i<n;i++){if(this.filters[i].id==e){return this.filters[i]}}r.error(t!==false,"UndefinedFilter",'Undefined filter "{0}"',e);return null};n.prototype.getOperatorByType=function(e,t){if(e=="-1"){return null}for(var i=0,n=this.operators.length;i<n;i++){if(this.operators[i].type==e){return this.operators[i]}}r.error(t!==false,"UndefinedOperator",'Undefined operator "{0}"',e);return null};n.prototype.getRuleInputValue=function(t){var i=t.filter;var o=t.operator;var s=[];if(i.valueGetter){s=i.valueGetter.call(this,t)}else{var a=t.$el.find(n.selectors.value_container);for(var l=0;l<o.nb_inputs;l++){var c=r.escapeElementId(t.id+"_value_"+l);var d;switch(i.input){case"radio":s.push(a.find("[name="+c+"]:checked").val());break;case"checkbox":d=[];a.find("[name="+c+"]:checked").each((function(){d.push(e(this).val())}));s.push(d);break;case"select":if(i.multiple){d=[];a.find("[name="+c+"] option:selected").each((function(){d.push(e(this).val())}));s.push(d)}else{s.push(a.find("[name="+c+"] option:selected").val())}break;default:s.push(a.find("[name="+c+"]").val())}}s=s.map((function(t){if(o.multiple&&i.value_separator&&typeof t=="string"){t=t.split(i.value_separator)}if(e.isArray(t)){return t.map((function(e){return r.changeType(e,i.type)}))}else{return r.changeType(t,i.type)}}));if(o.nb_inputs===1){s=s[0]}if(i.valueParser){s=i.valueParser.call(this,t,s)}}return this.change("getRuleValue",s,t)};n.prototype.setRuleInputValue=function(t,i){var o=t.filter;var s=t.operator;if(!o||!s){return}t._updating_input=true;if(o.valueSetter){o.valueSetter.call(this,t,i)}else{var a=t.$el.find(n.selectors.value_container);if(s.nb_inputs==1){i=[i]}for(var l=0;l<s.nb_inputs;l++){var c=r.escapeElementId(t.id+"_value_"+l);switch(o.input){case"radio":a.find("[name="+c+'][value="'+i[l]+'"]').prop("checked",true).trigger("change");break;case"checkbox":if(!e.isArray(i[l])){i[l]=[i[l]]}i[l].forEach((function(e){a.find("[name="+c+'][value="'+e+'"]').prop("checked",true).trigger("change")}));break;default:if(s.multiple&&o.value_separator&&e.isArray(i[l])){i[l]=i[l].join(o.value_separator)}a.find("[name="+c+"]").val(i[l]).trigger("change");break}}}t._updating_input=false};n.prototype.parseRuleFlags=function(t){var i=e.extend({},this.settings.default_rule_flags);if(t.readonly){e.extend(i,{header_readonly:true,filter_readonly:true,operator_readonly:true,value_readonly:true,no_delete:true,no_sortable:true})}if(t.flags){e.extend(i,t.flags)}return this.change("parseRuleFlags",i,t)};n.prototype.getRuleFlags=function(t,i){if(i){return e.extend({},t)}else{var n={};e.each(this.settings.default_rule_flags,(function(e,i){if(t[e]!==i){n[e]=t[e]}}));return n}};n.prototype.parseGroupFlags=function(t){var i=e.extend({},this.settings.default_group_flags);if(t.readonly){e.extend(i,{condition_readonly:true,no_add_rule:true,no_add_group:true,no_delete:true})}if(t.flags){e.extend(i,t.flags)}return this.change("parseGroupFlags",i,t)};n.prototype.getGroupFlags=function(t,i){if(i){return e.extend({},t)}else{var n={};e.each(this.settings.default_group_flags,(function(e,i){if(t[e]!==i){n[e]=t[e]}}));return n}};n.prototype.translate=function(e,t){if(!t){t=e;e=undefined}var i;if(typeof t==="object"){i=t[this.settings.lang_code]||t["en"]}else{i=(e?this.lang[e]:this.lang)[t]||t}return this.change("translate",i,t,e)};n.prototype.getValidationMessage=function(e,t,i){return e.messages&&e.messages[t]||i};n.templates.group='<div id="{{= it.group_id }}" class="rules-group-container">   <div class="rules-group-header">     <div class="btn-group pull-right group-actions">       <button type="button" class="btn btn-xs btn-success" data-add="rule">         <i class="{{= it.icons.add_rule }}"></i> {{= it.translate("add_rule") }}       </button>       {{? it.settings.allow_groups===-1 || it.settings.allow_groups>=it.level }}         <button type="button" class="btn btn-xs btn-success" data-add="group">           <i class="{{= it.icons.add_group }}"></i> {{= it.translate("add_group") }}         </button>       {{?}}       {{? it.level>1 }}         <button type="button" class="btn btn-xs btn-danger" data-delete="group">           <i class="{{= it.icons.remove_group }}"></i> {{= it.translate("delete_group") }}         </button>       {{?}}     </div>     <div class="btn-group group-conditions">       {{~ it.conditions: condition }}         <label class="btn btn-xs btn-primary">           <input type="radio" name="{{= it.group_id }}_cond" value="{{= condition }}"> {{= it.translate("conditions", condition) }}         </label>       {{~}}     </div>     {{? it.settings.display_errors }}       <div class="error-container"><i class="{{= it.icons.error }}"></i></div>     {{?}}   </div>   <div class=rules-group-body>     <div class=rules-list></div>   </div> </div>';n.templates.rule='<div id="{{= it.rule_id }}" class="rule-container">   <div class="rule-header">     <div class="btn-group pull-right rule-actions">       <button type="button" class="btn btn-xs btn-danger" data-delete="rule">         <i class="{{= it.icons.remove_rule }}"></i> {{= it.translate("delete_rule") }}       </button>     </div>   </div>   {{? it.settings.display_errors }}     <div class="error-container"><i class="{{= it.icons.error }}"></i></div>   {{?}}   <div class="rule-filter-container"></div>   <div class="rule-operator-container"></div>   <div class="rule-value-container"></div> </div>';n.templates.filterSelect='{{ var optgroup = null; }} <select class="form-control" name="{{= it.rule.id }}_filter">   {{? it.settings.display_empty_filter }}     <option value="-1">{{= it.settings.select_placeholder }}</option>   {{?}}   {{~ it.filters: filter }}     {{? optgroup !== filter.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = filter.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= filter.id }}" {{? filter.icon}}data-icon="{{= filter.icon}}"{{?}}>{{= it.translate(filter.label) }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>';n.templates.operatorSelect='{{? it.operators.length === 1 }} <span> {{= it.translate("operators", it.operators[0].type) }} </span> {{?}} {{ var optgroup = null; }} <select class="form-control {{? it.operators.length === 1 }}hide{{?}}" name="{{= it.rule.id }}_operator">   {{~ it.operators: operator }}     {{? optgroup !== operator.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = operator.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= operator.type }}" {{? operator.icon}}data-icon="{{= operator.icon}}"{{?}}>{{= it.translate("operators", operator.type) }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>';n.templates.ruleValueSelect='{{ var optgroup = null; }} <select class="form-control" name="{{= it.name }}" {{? it.rule.filter.multiple }}multiple{{?}}>   {{? it.rule.filter.placeholder }}     <option value="{{= it.rule.filter.placeholder_value }}" disabled selected>{{= it.rule.filter.placeholder }}</option>   {{?}}   {{~ it.rule.filter.values: entry }}     {{? optgroup !== entry.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = entry.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= entry.value }}">{{= entry.label }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>';n.prototype.getGroupTemplate=function(e,t){var i=this.templates.group({builder:this,group_id:e,level:t,conditions:this.settings.conditions,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getGroupTemplate",i,t)};n.prototype.getRuleTemplate=function(e){var t=this.templates.rule({builder:this,rule_id:e,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleTemplate",t)};n.prototype.getRuleFilterSelect=function(e,t){var i=this.templates.filterSelect({builder:this,rule:e,filters:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleFilterSelect",i,e,t)};n.prototype.getRuleOperatorSelect=function(e,t){var i=this.templates.operatorSelect({builder:this,rule:e,operators:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleOperatorSelect",i,e,t)};n.prototype.getRuleValueSelect=function(e,t){var i=this.templates.ruleValueSelect({builder:this,name:e,rule:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleValueSelect",i,e,t)};n.prototype.getRuleInput=function(e,t){var i=e.filter;var n=e.filter.validation||{};var o=e.id+"_value_"+t;var s=i.vertical?" class=block":"";var a="";if(typeof i.input=="function"){a=i.input.call(this,e,o)}else{switch(i.input){case"radio":case"checkbox":r.iterateOptions(i.values,(function(e,t){a+="<label"+s+'><input type="'+i.input+'" name="'+o+'" value="'+e+'"> '+t+"</label> "}));break;case"select":a=this.getRuleValueSelect(o,e);break;case"textarea":a+='<textarea class="form-control" name="'+o+'"';if(i.size)a+=' cols="'+i.size+'"';if(i.rows)a+=' rows="'+i.rows+'"';if(n.min!==undefined)a+=' minlength="'+n.min+'"';if(n.max!==undefined)a+=' maxlength="'+n.max+'"';if(i.placeholder)a+=' placeholder="'+i.placeholder+'"';a+="></textarea>";break;case"number":a+='<input class="form-control" type="number" name="'+o+'"';if(n.step!==undefined)a+=' step="'+n.step+'"';if(n.min!==undefined)a+=' min="'+n.min+'"';if(n.max!==undefined)a+=' max="'+n.max+'"';if(i.placeholder)a+=' placeholder="'+i.placeholder+'"';if(i.size)a+=' size="'+i.size+'"';a+=">";break;default:a+='<input class="form-control" type="text" name="'+o+'"';if(i.placeholder)a+=' placeholder="'+i.placeholder+'"';if(i.type==="string"&&n.min!==undefined)a+=' minlength="'+n.min+'"';if(i.type==="string"&&n.max!==undefined)a+=' maxlength="'+n.max+'"';if(i.size)a+=' size="'+i.size+'"';a+=">"}}return this.change("getRuleInput",a,e,o)};var r={};n.utils=r;r.iterateOptions=function(t,i){if(t){if(e.isArray(t)){t.forEach((function(t){if(e.isPlainObject(t)){if("value"in t){i(t.value,t.label||t.value,t.optgroup)}else{e.each(t,(function(e,t){i(e,t);return false}))}}else{i(t,t)}}))}else{e.each(t,(function(e,t){i(e,t)}))}}};r.fmt=function(e,t){if(!Array.isArray(t)){t=Array.prototype.slice.call(arguments,1)}return e.replace(/{([0-9]+)}/g,(function(e,i){return t[parseInt(i)]}))};r.error=function(){var e=0;var t=typeof arguments[e]==="boolean"?arguments[e++]:true;var i=arguments[e++];var n=arguments[e++];var o=Array.isArray(arguments[e])?arguments[e]:Array.prototype.slice.call(arguments,e);if(t){var s=new Error(r.fmt(n,o));s.name=i+"Error";s.args=o;throw s}else{console.error(i+"Error: "+r.fmt(n,o))}};r.changeType=function(e,t){if(e===""||e===undefined){return undefined}switch(t){case"integer":if(typeof e==="string"&&!/^-?\d+$/.test(e)){return e}return parseInt(e);case"double":if(typeof e==="string"&&!/^-?\d+\.?\d*$/.test(e)){return e}return parseFloat(e);case"boolean":if(typeof e==="string"&&!/^(0|1|true|false){1}$/i.test(e)){return e}return e===true||e===1||e.toLowerCase()==="true"||e==="1";default:return e}};r.escapeString=function(e){if(typeof e!="string"){return e}return e.replace(/[\0\n\r\b\\\'\"]/g,(function(e){switch(e){case"\0":return"\\0";case"\n":return"\\n";case"\r":return"\\r";case"\b":return"\\b";default:return"\\"+e}})).replace(/\t/g,"\\t").replace(/\x1a/g,"\\Z")};r.escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")};r.escapeElementId=function(e){return e?e.replace(/(\\)?([:.\[\],])/g,(function(e,t,i){return t?e:"\\"+i})):e};r.groupSort=function(e,t){var i=[];var n=[];e.forEach((function(e){var r;if(e[t]){r=i.lastIndexOf(e[t]);if(r==-1){r=i.length}else{r++}}else{r=i.length}i.splice(r,0,e[t]);n.splice(r,0,e)}));return n};r.defineModelProperties=function(t,i){i.forEach((function(i){Object.defineProperty(t.prototype,i,{enumerable:true,get:function(){return this.__[i]},set:function(t){var n=this.__[i]!==null&&typeof this.__[i]=="object"?e.extend({},this.__[i]):this.__[i];this.__[i]=t;if(this.model!==null){this.model.trigger("update",this,i,t,n)}}})}))};function o(){this.root=null;this.$=e(this)}e.extend(o.prototype,{trigger:function(t){var i=new e.Event(t);this.$.triggerHandler(i,Array.prototype.slice.call(arguments,1));return i},on:function(){this.$.on.apply(this.$,Array.prototype.slice.call(arguments));return this},off:function(){this.$.off.apply(this.$,Array.prototype.slice.call(arguments));return this},once:function(){this.$.one.apply(this.$,Array.prototype.slice.call(arguments));return this}});var s=function(e,t){if(!(this instanceof s)){return new s(e,t)}Object.defineProperty(this,"__",{value:{}});t.data("queryBuilderModel",this);this.__.level=1;this.__.error=null;this.__.flags={};this.__.data=undefined;this.$el=t;this.id=t[0].id;this.model=null;this.parent=e};r.defineModelProperties(s,["level","error","data","flags"]);Object.defineProperty(s.prototype,"parent",{enumerable:true,get:function(){return this.__.parent},set:function(e){this.__.parent=e;this.level=e===null?1:e.level+1;this.model=e===null?null:e.model}});s.prototype.isRoot=function(){return this.level===1};s.prototype.getPos=function(){if(this.isRoot()){return-1}else{return this.parent.getNodePos(this)}};s.prototype.drop=function(){var e=this.model;if(!!this.parent){this.parent.removeNode(this)}this.$el.removeData("queryBuilderModel");if(e!==null){e.trigger("drop",this)}};s.prototype.moveAfter=function(e){if(!this.isRoot()){this.move(e.parent,e.getPos()+1)}};s.prototype.moveAtBegin=function(e){if(!this.isRoot()){if(e===undefined){e=this.parent}this.move(e,0)}};s.prototype.moveAtEnd=function(e){if(!this.isRoot()){if(e===undefined){e=this.parent}this.move(e,e.length()===0?0:e.length()-1)}};s.prototype.move=function(e,t){if(!this.isRoot()){if(typeof e==="number"){t=e;e=this.parent}this.parent.removeNode(this);e.insertNode(this,t,false);if(this.model!==null){this.model.trigger("move",this,e,t)}}};var a=function(e,t){if(!(this instanceof a)){return new a(e,t)}s.call(this,e,t);this.rules=[];this.__.condition=null};a.prototype=Object.create(s.prototype);a.prototype.constructor=a;r.defineModelProperties(a,["condition"]);a.prototype.empty=function(){this.each("reverse",(function(e){e.drop()}),(function(e){e.drop()}))};a.prototype.drop=function(){this.empty();s.prototype.drop.call(this)};a.prototype.length=function(){return this.rules.length};a.prototype.insertNode=function(e,t,i){if(t===undefined){t=this.length()}this.rules.splice(t,0,e);e.parent=this;if(i&&this.model!==null){this.model.trigger("add",this,e,t)}return e};a.prototype.addGroup=function(e,t){return this.insertNode(new a(this,e),t,true)};a.prototype.addRule=function(e,t){return this.insertNode(new l(this,e),t,true)};a.prototype.removeNode=function(e){var t=this.getNodePos(e);if(t!==-1){e.parent=null;this.rules.splice(t,1)}};a.prototype.getNodePos=function(e){return this.rules.indexOf(e)};a.prototype.each=function(e,t,i,n){if(typeof e!=="boolean"&&typeof e!=="string"){n=i;i=t;t=e;e=false}n=n===undefined?null:n;var r=e?this.rules.length-1:0;var o=e?0:this.rules.length-1;var s=e?-1:1;var l=function(){return e?r>=o:r<=o};var c=false;for(;l();r+=s){if(this.rules[r]instanceof a){if(!!i){c=i.call(n,this.rules[r])===false}}else if(!!t){c=t.call(n,this.rules[r])===false}if(c){break}}return!c};a.prototype.contains=function(e,t){if(this.getNodePos(e)!==-1){return true}else if(!t){return false}else{return!this.each((function(){return true}),(function(t){return!t.contains(e,true)}))}};var l=function(e,t){if(!(this instanceof l)){return new l(e,t)}s.call(this,e,t);this._updating_value=false;this._updating_input=false;this.__.filter=null;this.__.operator=null;this.__.value=undefined};l.prototype=Object.create(s.prototype);l.prototype.constructor=l;r.defineModelProperties(l,["filter","operator","value"]);l.prototype.isRoot=function(){return false};n.Group=a;n.Rule=l;e.fn.queryBuilder=function(e){if(this.length===0){r.error("Config","No target defined")}if(this.length>1){r.error("Config","Unable to initialize on multiple target")}var t=this.data("queryBuilder");var i=typeof e=="object"&&e||{};if(!t&&e=="destroy"){return this}if(!t){var o=new n(this,i);this.data("queryBuilder",o);o.init(i.rules)}if(typeof e=="string"){return t[e].apply(t,Array.prototype.slice.call(arguments,1))}return this};e.fn.queryBuilder.constructor=n;e.fn.queryBuilder.defaults=n.defaults;e.fn.queryBuilder.extend=n.extend;e.fn.queryBuilder.define=n.define;e.fn.queryBuilder.regional=n.regional;n.define("bt-checkbox",(function(e){if(e.font=="glyphicons"){this.$el.addClass("bt-checkbox-glyphicons")}this.on("getRuleInput.filter",(function(t,i,n){var o=i.filter;if((o.input==="radio"||o.input==="checkbox")&&!o.plugin){t.value="";if(!o.colors){o.colors={}}if(o.color){o.colors._def_=o.color}var s=o.vertical?' style="display:block"':"";var a=0;r.iterateOptions(o.values,(function(i,r){var l=o.colors[i]||o.colors._def_||e.color;var c=n+"_"+a++;t.value+="<div"+s+' class="'+o.input+" "+o.input+"-"+l+'">   <input type="'+o.input+'" name="'+n+'" id="'+c+'" value="'+i+'">   <label for="'+c+'">'+r+"</label> </div>"}))}}))}),{font:"glyphicons",color:"default"});n.define("bt-selectpicker",(function(t){if(!e.fn.selectpicker||!e.fn.selectpicker.Constructor){r.error("MissingLibrary",'Bootstrap Select is required to use "bt-selectpicker" plugin. Get it here: http://silviomoreto.github.io/bootstrap-select')}var i=n.selectors;this.on("afterCreateRuleFilters",(function(e,n){n.$el.find(i.rule_filter).removeClass("form-control").selectpicker(t)}));this.on("afterCreateRuleOperators",(function(e,n){n.$el.find(i.rule_operator).removeClass("form-control").selectpicker(t)}));this.on("afterUpdateRuleFilter",(function(e,t){t.$el.find(i.rule_filter).selectpicker("render")}));this.on("afterUpdateRuleOperator",(function(e,t){t.$el.find(i.rule_operator).selectpicker("render")}));this.on("beforeDeleteRule",(function(e,t){t.$el.find(i.rule_filter).selectpicker("destroy");t.$el.find(i.rule_operator).selectpicker("destroy")}))}),{container:"body",style:"btn-inverse btn-xs",width:"auto",showIcon:false});n.define("bt-tooltip-errors",(function(t){if(!e.fn.tooltip||!e.fn.tooltip.Constructor||!e.fn.tooltip.Constructor.prototype.fixTitle){r.error("MissingLibrary",'Bootstrap Tooltip is required to use "bt-tooltip-errors" plugin. Get it here: http://getbootstrap.com')}var i=this;this.on("getRuleTemplate.filter getGroupTemplate.filter",(function(t){var i=e(t.value);i.find(n.selectors.error_container).attr("data-toggle","tooltip");t.value=i.prop("outerHTML")}));this.model.on("update",(function(e,r,o){if(o=="error"&&i.settings.display_errors){r.$el.find(n.selectors.error_container).eq(0).tooltip(t).tooltip("hide").tooltip("fixTitle")}}))}),{placement:"right"});n.extend({setFilters:function(e,t){var i=this;if(t===undefined){t=e;e=false}t=this.checkFilters(t);t=this.change("setFilters",t);var o=t.map((function(e){return e.id}));if(!e){(function e(t){t.each((function(e){if(e.filter&&o.indexOf(e.filter.id)===-1){r.error("ChangeFilter",'A rule is using filter "{0}"',e.filter.id)}}),e)})(this.model.root)}this.filters=t;(function e(t){t.each(true,(function(e){if(e.filter&&o.indexOf(e.filter.id)===-1){e.drop();i.trigger("rulesChanged")}else{i.createRuleFilters(e);e.$el.find(n.selectors.rule_filter).val(e.filter?e.filter.id:"-1");i.trigger("afterUpdateRuleFilter",e)}}),e)})(this.model.root);if(this.settings.plugins){if(this.settings.plugins["unique-filter"]){this.updateDisabledFilters()}if(this.settings.plugins["bt-selectpicker"]){this.$el.find(n.selectors.rule_filter).selectpicker("render")}}if(this.settings.default_filter){try{this.getFilterById(this.settings.default_filter)}catch(e){this.settings.default_filter=null}}this.trigger("afterSetFilters",t)},addFilter:function(t,i){if(i===undefined||i=="#end"){i=this.filters.length}else if(i=="#start"){i=0}if(!e.isArray(t)){t=[t]}var n=e.extend(true,[],this.filters);if(parseInt(i)==i){Array.prototype.splice.apply(n,[i,0].concat(t))}else{if(this.filters.some((function(e,t){if(e.id==i){i=t+1;return true}}))){Array.prototype.splice.apply(n,[i,0].concat(t))}else{Array.prototype.push.apply(n,t)}}this.setFilters(n)},removeFilter:function(t,i){var n=e.extend(true,[],this.filters);if(typeof t==="string"){t=[t]}n=n.filter((function(e){return t.indexOf(e.id)===-1}));this.setFilters(i,n)}});n.define("chosen-selectpicker",(function(t){if(!e.fn.chosen){r.error("MissingLibrary",'chosen is required to use "chosen-selectpicker" plugin. Get it here: https://github.com/harvesthq/chosen')}if(this.settings.plugins["bt-selectpicker"]){r.error("Conflict","bt-selectpicker is already selected as the dropdown plugin. Please remove chosen-selectpicker from the plugin list")}var i=n.selectors;this.on("afterCreateRuleFilters",(function(e,n){n.$el.find(i.rule_filter).removeClass("form-control").chosen(t)}));this.on("afterCreateRuleOperators",(function(e,n){n.$el.find(i.rule_operator).removeClass("form-control").chosen(t)}));this.on("afterUpdateRuleFilter",(function(e,t){t.$el.find(i.rule_filter).trigger("chosen:updated")}));this.on("afterUpdateRuleOperator",(function(e,t){t.$el.find(i.rule_operator).trigger("chosen:updated")}));this.on("beforeDeleteRule",(function(e,t){t.$el.find(i.rule_filter).chosen("destroy");t.$el.find(i.rule_operator).chosen("destroy")}))}));n.define("filter-description",(function(t){if(t.mode==="inline"){this.on("afterUpdateRuleFilter afterUpdateRuleOperator",(function(i,n){var r=n.$el.find("p.filter-description");var o=i.builder.getFilterDescription(n.filter,n);if(!o){r.hide()}else{if(r.length===0){r=e('<p class="filter-description"></p>');r.appendTo(n.$el)}else{r.css("display","")}r.html('<i class="'+t.icon+'"></i> '+o)}}))}else if(t.mode==="popover"){if(!e.fn.popover||!e.fn.popover.Constructor||!e.fn.popover.Constructor.prototype.fixTitle){r.error("MissingLibrary",'Bootstrap Popover is required to use "filter-description" plugin. Get it here: http://getbootstrap.com')}this.on("afterUpdateRuleFilter afterUpdateRuleOperator",(function(i,r){var o=r.$el.find("button.filter-description");var s=i.builder.getFilterDescription(r.filter,r);if(!s){o.hide();if(o.data("bs.popover")){o.popover("hide")}}else{if(o.length===0){o=e('<button type="button" class="btn btn-xs btn-info filter-description" data-toggle="popover"><i class="'+t.icon+'"></i></button>');o.prependTo(r.$el.find(n.selectors.rule_actions));o.popover({placement:"left",container:"body",html:true});o.on("mouseout",(function(){o.popover("hide")}))}else{o.css("display","")}o.data("bs.popover").options.content=s;if(o.attr("aria-describedby")){o.popover("show")}}}))}else if(t.mode==="bootbox"){if(!("bootbox"in window)){r.error("MissingLibrary",'Bootbox is required to use "filter-description" plugin. Get it here: http://bootboxjs.com')}this.on("afterUpdateRuleFilter afterUpdateRuleOperator",(function(i,r){var o=r.$el.find("button.filter-description");var s=i.builder.getFilterDescription(r.filter,r);if(!s){o.hide()}else{if(o.length===0){o=e('<button type="button" class="btn btn-xs btn-info filter-description" data-toggle="bootbox"><i class="'+t.icon+'"></i></button>');o.prependTo(r.$el.find(n.selectors.rule_actions));o.on("click",(function(){bootbox.alert(o.data("description"))}))}else{o.css("display","")}o.data("description",s)}}))}}),{icon:"glyphicon glyphicon-info-sign",mode:"popover"});n.extend({getFilterDescription:function(e,t){if(!e){return undefined}else if(typeof e.description=="function"){return e.description.call(this,t)}else{return e.description}}});n.define("invert",(function(t){var i=this;var r=n.selectors;this.on("afterInit",(function(){i.$el.on("click.queryBuilder","[data-invert=group]",(function(){var n=e(this).closest(r.group_container);i.invert(i.getModel(n),t)}));if(t.display_rules_button&&t.invert_rules){i.$el.on("click.queryBuilder","[data-invert=rule]",(function(){var n=e(this).closest(r.rule_container);i.invert(i.getModel(n),t)}))}}));if(!t.disable_template){this.on("getGroupTemplate.filter",(function(n){var o=e(n.value);o.find(r.condition_container).after('<button type="button" class="btn btn-xs btn-default" data-invert="group">'+'<i class="'+t.icon+'"></i> '+i.translate("invert")+"</button>");n.value=o.prop("outerHTML")}));if(t.display_rules_button&&t.invert_rules){this.on("getRuleTemplate.filter",(function(n){var o=e(n.value);o.find(r.rule_actions).prepend('<button type="button" class="btn btn-xs btn-default" data-invert="rule">'+'<i class="'+t.icon+'"></i> '+i.translate("invert")+"</button>");n.value=o.prop("outerHTML")}))}}}),{icon:"glyphicon glyphicon-random",recursive:true,invert_rules:true,display_rules_button:false,silent_fail:false,disable_template:false});n.defaults({operatorOpposites:{equal:"not_equal",not_equal:"equal",in:"not_in",not_in:"in",less:"greater_or_equal",less_or_equal:"greater",greater:"less_or_equal",greater_or_equal:"less",between:"not_between",not_between:"between",begins_with:"not_begins_with",not_begins_with:"begins_with",contains:"not_contains",not_contains:"contains",ends_with:"not_ends_with",not_ends_with:"ends_with",is_empty:"is_not_empty",is_not_empty:"is_empty",is_null:"is_not_null",is_not_null:"is_null"},conditionOpposites:{AND:"OR",OR:"AND"}});n.extend({invert:function(t,i){if(!(t instanceof s)){if(!this.model.root)return;i=t;t=this.model.root}if(typeof i!="object")i={};if(i.recursive===undefined)i.recursive=true;if(i.invert_rules===undefined)i.invert_rules=true;if(i.silent_fail===undefined)i.silent_fail=false;if(i.trigger===undefined)i.trigger=true;if(t instanceof a){if(this.settings.conditionOpposites[t.condition]){t.condition=this.settings.conditionOpposites[t.condition]}else if(!i.silent_fail){r.error("InvertCondition",'Unknown inverse of condition "{0}"',t.condition)}if(i.recursive){var n=e.extend({},i,{trigger:false});t.each((function(e){if(i.invert_rules){this.invert(e,n)}}),(function(e){this.invert(e,n)}),this)}}else if(t instanceof l){if(t.operator&&!t.filter.no_invert){if(this.settings.operatorOpposites[t.operator.type]){var o=this.settings.operatorOpposites[t.operator.type];if(!t.filter.operators||t.filter.operators.indexOf(o)!=-1){t.operator=this.getOperatorByType(o)}}else if(!i.silent_fail){r.error("InvertOperator",'Unknown inverse of operator "{0}"',t.operator.type)}}}if(i.trigger){this.trigger("afterInvert",t,i);this.trigger("rulesChanged")}}});n.defaults({mongoOperators:{equal:function(e){return e[0]},not_equal:function(e){return{$ne:e[0]}},in:function(e){return{$in:e}},not_in:function(e){return{$nin:e}},less:function(e){return{$lt:e[0]}},less_or_equal:function(e){return{$lte:e[0]}},greater:function(e){return{$gt:e[0]}},greater_or_equal:function(e){return{$gte:e[0]}},between:function(e){return{$gte:e[0],$lte:e[1]}},not_between:function(e){return{$lt:e[0],$gt:e[1]}},begins_with:function(e){return{$regex:"^"+r.escapeRegExp(e[0])}},not_begins_with:function(e){return{$regex:"^(?!"+r.escapeRegExp(e[0])+")"}},contains:function(e){return{$regex:r.escapeRegExp(e[0])}},not_contains:function(e){return{$regex:"^((?!"+r.escapeRegExp(e[0])+").)*$",$options:"s"}},ends_with:function(e){return{$regex:r.escapeRegExp(e[0])+"$"}},not_ends_with:function(e){return{$regex:"(?<!"+r.escapeRegExp(e[0])+")$"}},is_empty:function(e){return""},is_not_empty:function(e){return{$ne:""}},is_null:function(e){return null},is_not_null:function(e){return{$ne:null}}},mongoRuleOperators:{$eq:function(e){return{val:e,op:e===null?"is_null":e===""?"is_empty":"equal"}},$ne:function(e){e=e.$ne;return{val:e,op:e===null?"is_not_null":e===""?"is_not_empty":"not_equal"}},$regex:function(e){e=e.$regex;if(e.slice(0,4)=="^(?!"&&e.slice(-1)==")"){return{val:e.slice(4,-1),op:"not_begins_with"}}else if(e.slice(0,5)=="^((?!"&&e.slice(-5)==").)*$"){return{val:e.slice(5,-5),op:"not_contains"}}else if(e.slice(0,4)=="(?<!"&&e.slice(-2)==")$"){return{val:e.slice(4,-2),op:"not_ends_with"}}else if(e.slice(-1)=="$"){return{val:e.slice(0,-1),op:"ends_with"}}else if(e.slice(0,1)=="^"){return{val:e.slice(1),op:"begins_with"}}else{return{val:e,op:"contains"}}},between:function(e){return{val:[e.$gte,e.$lte],op:"between"}},not_between:function(e){return{val:[e.$lt,e.$gt],op:"not_between"}},$in:function(e){return{val:e.$in,op:"in"}},$nin:function(e){return{val:e.$nin,op:"not_in"}},$lt:function(e){return{val:e.$lt,op:"less"}},$lte:function(e){return{val:e.$lte,op:"less_or_equal"}},$gt:function(e){return{val:e.$gt,op:"greater"}},$gte:function(e){return{val:e.$gte,op:"greater_or_equal"}}}});n.extend({getMongo:function(e){e=e===undefined?this.getRules():e;if(!e){return null}var t=this;return function e(i){if(!i.condition){i.condition=t.settings.default_condition}if(["AND","OR"].indexOf(i.condition.toUpperCase())===-1){r.error("UndefinedMongoCondition",'Unable to build MongoDB query with condition "{0}"',i.condition)}if(!i.rules){return{}}var n=[];i.rules.forEach((function(i){if(i.rules&&i.rules.length>0){n.push(e(i))}else{var o=t.settings.mongoOperators[i.operator];var s=t.getOperatorByType(i.operator);if(o===undefined){r.error("UndefinedMongoOperator",'Unknown MongoDB operation for operator "{0}"',i.operator)}if(s.nb_inputs!==0){if(!(i.value instanceof Array)){i.value=[i.value]}}var a=t.change("getMongoDBField",i.field,i);var l={};l[a]=o.call(t,i.value);n.push(t.change("ruleToMongo",l,i,i.value,o))}}));var o={};o["$"+i.condition.toLowerCase()]=n;return t.change("groupToMongo",o,i)}(e)},getRulesFromMongo:function(e){if(e===undefined||e===null){return null}var t=this;e=t.change("parseMongoNode",e);if("rules"in e&&"condition"in e){return e}if("id"in e&&"operator"in e&&"value"in e){return{condition:this.settings.default_condition,rules:[e]}}var i=t.getMongoCondition(e);if(!i){r.error("MongoParse","Invalid MongoDB query format")}return function e(i,n){var o=i[n];var s=[];o.forEach((function(i){i=t.change("parseMongoNode",i);if("rules"in i&&"condition"in i){s.push(i);return}if("id"in i&&"operator"in i&&"value"in i){s.push(i);return}var n=t.getMongoCondition(i);if(n){s.push(e(i,n))}else{var o=Object.keys(i)[0];var a=i[o];var l=t.getMongoOperator(a);if(l===undefined){r.error("MongoParse","Invalid MongoDB query format")}var c=t.settings.mongoRuleOperators[l];if(c===undefined){r.error("UndefinedMongoOperator",'JSON Rule operation unknown for operator "{0}"',l)}var d=c.call(t,a);var u=t.getMongoDBFieldID(o,a);var h=t.change("mongoToRule",{id:u,field:o,operator:d.op,value:d.val},i);s.push(h)}}));return t.change("mongoToGroup",{condition:n.replace("$","").toUpperCase(),rules:s},i)}(e,i)},setRulesFromMongo:function(e){this.setRules(this.getRulesFromMongo(e))},getMongoDBFieldID:function(e,t){var i=this.filters.filter((function(t){return t.field===e}));var n;if(i.length===1){n=i[0].id}else{n=this.change("getMongoDBFieldID",e,t)}return n},getMongoOperator:function(e){if(e!==null&&typeof e==="object"){if(e.$gte!==undefined&&e.$lte!==undefined){return"between"}if(e.$lt!==undefined&&e.$gt!==undefined){return"not_between"}var t=Object.keys(e).filter(function(e){return!!this.settings.mongoRuleOperators[e]}.bind(this));if(t.length===1){return t[0]}}else{return"$eq"}},getMongoCondition:function(e){var t=Object.keys(e);for(var i=0,n=t.length;i<n;i++){if(t[i].toLowerCase()==="$or"||t[i].toLowerCase()==="$and"){return t[i]}}}});n.define("not-group",(function(t){var i=this;this.on("afterInit",(function(){i.$el.on("click.queryBuilder","[data-not=group]",(function(){var t=e(this).closest(n.selectors.group_container);var r=i.getModel(t);r.not=!r.not}));i.model.on("update",(function(e,t,n){if(t instanceof a&&n==="not"){i.updateGroupNot(t)}}))}));this.on("afterAddGroup",(function(e,t){t.__.not=false}));if(!t.disable_template){this.on("getGroupTemplate.filter",(function(r){var o=e(r.value);o.find(n.selectors.condition_container).prepend('<button type="button" class="btn btn-xs btn-default" data-not="group">'+'<i class="'+t.icon_unchecked+'"></i> '+i.translate("NOT")+"</button>");r.value=o.prop("outerHTML")}))}this.on("groupToJson.filter",(function(e,t){e.value.not=t.not}));this.on("jsonToGroup.filter",(function(e,t){e.value.not=!!t.not}));this.on("groupToSQL.filter",(function(e,t){if(t.not){e.value="NOT ( "+e.value+" )"}}));this.on("parseSQLNode.filter",(function(e){if(e.value.name&&e.value.name.toUpperCase()=="NOT"){e.value=e.value.arguments.value[0];if(["AND","OR"].indexOf(e.value.operation.toUpperCase())===-1){e.value=new SQLParser.nodes.Op(i.settings.default_condition,e.value,null)}e.value.not=true}}));this.on("sqlGroupsDistinct.filter",(function(e,t,i,n){if(i.not&&n>0){e.value=true}}));this.on("sqlToGroup.filter",(function(e,t){e.value.not=!!t.not}));this.on("groupToMongo.filter",(function(e,t){var i="$"+t.condition.toLowerCase();if(t.not&&e.value[i]){e.value={$nor:[e.value]}}}));this.on("parseMongoNode.filter",(function(e){var t=Object.keys(e.value);if(t[0]=="$nor"){e.value=e.value[t[0]][0];e.value.not=true}}));this.on("mongoToGroup.filter",(function(e,t){e.value.not=!!t.not}))}),{icon_unchecked:"glyphicon glyphicon-unchecked",icon_checked:"glyphicon glyphicon-check",disable_template:false});r.defineModelProperties(a,["not"]);n.selectors.group_not=n.selectors.group_header+" [data-not=group]";n.extend({updateGroupNot:function(e){var t=this.plugins["not-group"];e.$el.find(">"+n.selectors.group_not).toggleClass("active",e.not).find("i").attr("class",e.not?t.icon_checked:t.icon_unchecked);this.trigger("afterUpdateGroupNot",e);this.trigger("rulesChanged")}});n.define("sortable",(function(t){if(!("interact"in window)){r.error("MissingLibrary",'interact.js is required to use "sortable" plugin. Get it here: http://interactjs.io')}if(t.default_no_sortable!==undefined){r.error(false,"Config",'Sortable plugin : "default_no_sortable" options is deprecated, use standard "default_rule_flags" and "default_group_flags" instead');this.settings.default_rule_flags.no_sortable=this.settings.default_group_flags.no_sortable=t.default_no_sortable}interact.dynamicDrop(true);interact.pointerMoveTolerance(10);var i;var o;var s;var l;this.on("afterAddRule afterAddGroup",(function(r,d){if(d==i){return}var u=r.builder;if(t.inherit_no_sortable&&d.parent&&d.parent.flags.no_sortable){d.flags.no_sortable=true}if(t.inherit_no_drop&&d.parent&&d.parent.flags.no_drop){d.flags.no_drop=true}if(!d.flags.no_sortable){interact(d.$el[0]).draggable({allowFrom:n.selectors.drag_handle,onstart:function(t){l=false;s=u.getModel(t.target);o=s.$el.clone().appendTo(s.$el.parent()).width(s.$el.outerWidth()).addClass("dragging");var n=e('<div class="rule-placeholder">&nbsp;</div>').height(s.$el.outerHeight());i=s.parent.addRule(n,s.getPos());s.$el.hide()},onmove:function(e){o[0].style.top=e.clientY-15+"px";o[0].style.left=e.clientX-15+"px"},onend:function(t){if(t.dropzone){c(s,e(t.relatedTarget),u);l=true}o.remove();o=undefined;i.drop();i=undefined;s.$el.css("display","");u.trigger("afterMove",s);u.trigger("rulesChanged")}})}if(!d.flags.no_drop){interact(d.$el[0]).dropzone({accept:n.selectors.rule_and_group_containers,ondragenter:function(t){c(i,e(t.target),u)},ondrop:function(t){if(!l){c(s,e(t.target),u)}}});if(d instanceof a){interact(d.$el.find(n.selectors.group_header)[0]).dropzone({accept:n.selectors.rule_and_group_containers,ondragenter:function(t){c(i,e(t.target),u)},ondrop:function(t){if(!l){c(s,e(t.target),u)}}})}}}));this.on("beforeDeleteRule beforeDeleteGroup",(function(e,t){if(!e.isDefaultPrevented()){interact(t.$el[0]).unset();if(t instanceof a){interact(t.$el.find(n.selectors.group_header)[0]).unset()}}}));this.on("afterApplyRuleFlags afterApplyGroupFlags",(function(e,t){if(t.flags.no_sortable){t.$el.find(".drag-handle").remove()}}));if(!t.disable_template){this.on("getGroupTemplate.filter",(function(i,r){if(r>1){var o=e(i.value);o.find(n.selectors.condition_container).after('<div class="drag-handle"><i class="'+t.icon+'"></i></div>');i.value=o.prop("outerHTML")}}));this.on("getRuleTemplate.filter",(function(i){var r=e(i.value);r.find(n.selectors.rule_header).after('<div class="drag-handle"><i class="'+t.icon+'"></i></div>');i.value=r.prop("outerHTML")}))}}),{inherit_no_sortable:true,inherit_no_drop:true,icon:"glyphicon glyphicon-sort",disable_template:false});n.selectors.rule_and_group_containers=n.selectors.rule_container+", "+n.selectors.group_container;n.selectors.drag_handle=".drag-handle";n.defaults({default_rule_flags:{no_sortable:false,no_drop:false},default_group_flags:{no_sortable:false,no_drop:false}});function c(e,t,i){var r,o;var s=n.selectors;r=t.closest(s.rule_container);if(r.length){o="moveAfter"}if(!o){r=t.closest(s.group_header);if(r.length){r=t.closest(s.group_container);o="moveAtBegin"}}if(!o){r=t.closest(s.group_container);if(r.length){o="moveAtEnd"}}if(o){e[o](i.getModel(r));if(i&&e instanceof l){i.setRuleInputValue(e,e.value)}}}n.define("sql-support",(function(e){}),{boolean_as_integer:true});n.defaults({sqlOperators:{equal:{op:"= ?"},not_equal:{op:"!= ?"},in:{op:"IN(?)",sep:", "},not_in:{op:"NOT IN(?)",sep:", "},less:{op:"< ?"},less_or_equal:{op:"<= ?"},greater:{op:"> ?"},greater_or_equal:{op:">= ?"},between:{op:"BETWEEN ?",sep:" AND "},not_between:{op:"NOT BETWEEN ?",sep:" AND "},begins_with:{op:"LIKE(?)",mod:"{0}%"},not_begins_with:{op:"NOT LIKE(?)",mod:"{0}%"},contains:{op:"LIKE(?)",mod:"%{0}%"},not_contains:{op:"NOT LIKE(?)",mod:"%{0}%"},ends_with:{op:"LIKE(?)",mod:"%{0}"},not_ends_with:{op:"NOT LIKE(?)",mod:"%{0}"},is_empty:{op:"= ''"},is_not_empty:{op:"!= ''"},is_null:{op:"IS NULL"},is_not_null:{op:"IS NOT NULL"}},sqlRuleOperator:{"=":function(e){return{val:e,op:e===""?"is_empty":"equal"}},"!=":function(e){return{val:e,op:e===""?"is_not_empty":"not_equal"}},LIKE:function(e){if(e.slice(0,1)=="%"&&e.slice(-1)=="%"){return{val:e.slice(1,-1),op:"contains"}}else if(e.slice(0,1)=="%"){return{val:e.slice(1),op:"ends_with"}}else if(e.slice(-1)=="%"){return{val:e.slice(0,-1),op:"begins_with"}}else{r.error("SQLParse",'Invalid value for LIKE operator "{0}"',e)}},"NOT LIKE":function(e){if(e.slice(0,1)=="%"&&e.slice(-1)=="%"){return{val:e.slice(1,-1),op:"not_contains"}}else if(e.slice(0,1)=="%"){return{val:e.slice(1),op:"not_ends_with"}}else if(e.slice(-1)=="%"){return{val:e.slice(0,-1),op:"not_begins_with"}}else{r.error("SQLParse",'Invalid value for NOT LIKE operator "{0}"',e)}},IN:function(e){return{val:e,op:"in"}},"NOT IN":function(e){return{val:e,op:"not_in"}},"<":function(e){return{val:e,op:"less"}},"<=":function(e){return{val:e,op:"less_or_equal"}},">":function(e){return{val:e,op:"greater"}},">=":function(e){return{val:e,op:"greater_or_equal"}},BETWEEN:function(e){return{val:e,op:"between"}},"NOT BETWEEN":function(e){return{val:e,op:"not_between"}},IS:function(e){if(e!==null){r.error("SQLParse","Invalid value for IS operator")}return{val:null,op:"is_null"}},"IS NOT":function(e){if(e!==null){r.error("SQLParse","Invalid value for IS operator")}return{val:null,op:"is_not_null"}}},sqlStatements:{question_mark:function(){var e=[];return{add:function(t,i){e.push(i);return"?"},run:function(){return e}}},numbered:function(e){if(!e||e.length>1)e="$";var t=0;var i=[];return{add:function(n,r){i.push(r);t++;return e+t},run:function(){return i}}},named:function(e){if(!e||e.length>1)e=":";var t={};var i={};return{add:function(n,r){if(!t[n.field])t[n.field]=1;var o=n.field+"_"+t[n.field]++;i[o]=r;return e+o},run:function(){return i}}}},sqlRuleStatement:{question_mark:function(e){var t=0;return{parse:function(i){return i=="?"?e[t++]:i},esc:function(e){return e.replace(/\?/g,"'?'")}}},numbered:function(e,t){if(!t||t.length>1)t="$";var i=new RegExp("^\\"+t+"[0-9]+$");var n=new RegExp("\\"+t+"([0-9]+)","g");return{parse:function(t){return i.test(t)?e[t.slice(1)-1]:t},esc:function(e){return e.replace(n,"'"+(t=="$"?"$$":t)+"$1'")}}},named:function(e,t){if(!t||t.length>1)t=":";var i=new RegExp("^\\"+t);var n=new RegExp("\\"+t+"("+Object.keys(e).join("|")+")","g");return{parse:function(t){return i.test(t)?e[t.slice(1)]:t},esc:function(e){return e.replace(n,"'"+(t=="$"?"$$":t)+"$1'")}}}}});n.extend({getSQL:function(e,t,i){i=i===undefined?this.getRules():i;if(!i){return null}t=!!t?"\n":" ";var n=this.getPluginOptions("sql-support","boolean_as_integer");if(e===true){e="question_mark"}if(typeof e=="string"){var o=d(e);e=this.settings.sqlStatements[o[1]](o[2])}var s=this;var a=function i(o){if(!o.condition){o.condition=s.settings.default_condition}if(["AND","OR"].indexOf(o.condition.toUpperCase())===-1){r.error("UndefinedSQLCondition",'Unable to build SQL query with condition "{0}"',o.condition)}if(!o.rules){return""}var a=[];o.rules.forEach((function(o){if(o.rules&&o.rules.length>0){a.push("("+t+i(o)+t+")"+t)}else{var l=s.settings.sqlOperators[o.operator];var c=s.getOperatorByType(o.operator);var d="";if(l===undefined){r.error("UndefinedSQLOperator",'Unknown SQL operation for operator "{0}"',o.operator)}if(c.nb_inputs!==0){if(!(o.value instanceof Array)){o.value=[o.value]}o.value.forEach((function(t,i){if(i>0){d+=l.sep}if(o.type=="boolean"&&n){t=t?1:0}else if(!e&&o.type!=="integer"&&o.type!=="double"&&o.type!=="boolean"){t=r.escapeString(t)}if(l.mod){t=r.fmt(l.mod,t)}if(e){d+=e.add(o,t)}else{if(typeof t=="string"){t="'"+t+"'"}d+=t}}))}var u=function(e){return l.op.replace("?",(function(){return e}))};var h=s.change("getSQLField",o.field,o);var p=h+" "+u(d);a.push(s.change("ruleToSQL",p,o,d,u))}}));var l=a.join(" "+o.condition+t);return s.change("groupToSQL",l,o)}(i);if(e){return{sql:a,params:e.run()}}else{return{sql:a}}},getRulesFromSQL:function(t,i){if(!("SQLParser"in window)){r.error("MissingLibrary","SQLParser is required to parse SQL queries. Get it here https://github.com/mistic100/sql-parser")}var n=this;if(typeof t=="string"){t={sql:t}}if(i===true)i="question_mark";if(typeof i=="string"){var o=d(i);i=this.settings.sqlRuleStatement[o[1]](t.params,o[2])}if(i){t.sql=i.esc(t.sql)}if(t.sql.toUpperCase().indexOf("SELECT")!==0){t.sql="SELECT * FROM table WHERE "+t.sql}var s=SQLParser.parse(t.sql);if(!s.where){r.error("SQLParse","No WHERE clause found")}var a=n.change("parseSQLNode",s.where.conditions);if("rules"in a&&"condition"in a){return a}if("id"in a&&"operator"in a&&"value"in a){return{condition:this.settings.default_condition,rules:[a]}}var l=n.change("sqlToGroup",{condition:this.settings.default_condition,rules:[]},a);var c=l;(function t(o,s){if(o===null){return}o=n.change("parseSQLNode",o);if("rules"in o&&"condition"in o){c.rules.push(o);return}if("id"in o&&"operator"in o&&"value"in o){c.rules.push(o);return}if(!("left"in o)||!("right"in o)||!("operation"in o)){r.error("SQLParse","Unable to parse WHERE clause")}if(["AND","OR"].indexOf(o.operation.toUpperCase())!==-1){var a=n.change("sqlGroupsDistinct",s>0&&c.condition!=o.operation.toUpperCase(),c,o,s);if(a){var l=n.change("sqlToGroup",{condition:n.settings.default_condition,rules:[]},o);c.rules.push(l);c=l}c.condition=o.operation.toUpperCase();s++;var d=c;t(o.left,s);c=d;t(o.right,s)}else{if(e.isPlainObject(o.right.value)){r.error("SQLParse","Value format not supported for {0}.",o.left.value)}var u;if(e.isArray(o.right.value)){u=o.right.value.map((function(e){return e.value}))}else{u=o.right.value}if(i){if(e.isArray(u)){u=u.map(i.parse)}else{u=i.parse(u)}}var h=o.operation.toUpperCase();if(h=="<>"){h="!="}var p=n.settings.sqlRuleOperator[h];if(p===undefined){r.error("UndefinedSQLOperator",'Invalid SQL operation "{0}".',o.operation)}var f=p.call(this,u,o.operation);var g;if("values"in o.left){g=o.left.values.join(".")}else if("value"in o.left){g=o.left.value}else{r.error("SQLParse","Cannot find field name in {0}",JSON.stringify(o.left))}var m=n.getSQLFieldID(g,u);var v=n.change("sqlToRule",{id:m,field:g,operator:f.op,value:f.val},o);c.rules.push(v)}})(a,0);return l},setRulesFromSQL:function(e,t){this.setRules(this.getRulesFromSQL(e,t))},getSQLFieldID:function(e,t){var i=this.filters.filter((function(t){return t.field.toLowerCase()===e.toLowerCase()}));var n;if(i.length===1){n=i[0].id}else{n=this.change("getSQLFieldID",e,t)}return n}});function d(e){var t=e.match(/(question_mark|numbered|named)(?:\((.)\))?/);if(!t)t=[null,"question_mark",undefined];return t}n.define("unique-filter",(function(){this.status.used_filters={};this.on("afterUpdateRuleFilter",this.updateDisabledFilters);this.on("afterDeleteRule",this.updateDisabledFilters);this.on("afterCreateRuleFilters",this.applyDisabledFilters);this.on("afterReset",this.clearDisabledFilters);this.on("afterClear",this.clearDisabledFilters);this.on("getDefaultFilter.filter",(function(e,t){var i=e.builder;i.updateDisabledFilters();if(e.value.id in i.status.used_filters){var n=i.filters.some((function(n){if(!(n.id in i.status.used_filters)||i.status.used_filters[n.id].length>0&&i.status.used_filters[n.id].indexOf(t.parent)===-1){e.value=n;return true}}));if(!n){r.error(false,"UniqueFilter","No more non-unique filters available");e.value=undefined}}}))}));n.extend({updateDisabledFilters:function(e){var t=e?e.builder:this;t.status.used_filters={};if(!t.model){return}(function e(i){i.each((function(e){if(e.filter&&e.filter.unique){if(!t.status.used_filters[e.filter.id]){t.status.used_filters[e.filter.id]=[]}if(e.filter.unique=="group"){t.status.used_filters[e.filter.id].push(e.parent)}}}),(function(t){e(t)}))})(t.model.root);t.applyDisabledFilters(e)},clearDisabledFilters:function(e){var t=e?e.builder:this;t.status.used_filters={};t.applyDisabledFilters(e)},applyDisabledFilters:function(t){var i=t?t.builder:this;i.$el.find(n.selectors.filter_container+" option").prop("disabled",false);e.each(i.status.used_filters,(function(e,t){if(t.length===0){i.$el.find(n.selectors.filter_container+' option[value="'+e+'"]:not(:selected)').prop("disabled",true)}else{t.forEach((function(t){t.each((function(t){t.$el.find(n.selectors.filter_container+' option[value="'+e+'"]:not(:selected)').prop("disabled",true)}))}))}}));if(i.settings.plugins&&i.settings.plugins["bt-selectpicker"]){i.$el.find(n.selectors.rule_filter).selectpicker("render")}}});n.regional["en"]={__locale:"English (en)",__author:'Damien "Mistic" Sorel, http://www.strangeplanet.fr',add_rule:t("querybuilder.common.add_rule"),add_group:t("querybuilder.common.add_group"),delete_rule:t("querybuilder.common.delete_rule"),delete_group:t("querybuilder.common.delete_group"),conditions:{AND:t("querybuilder.conditions.AND"),OR:t("querybuilder.conditions.OR")},operators:{equal:t("querybuilder.operators.equal"),not_equal:t("querybuilder.operators.not_equal"),in:t("querybuilder.operators.in"),not_in:t("querybuilder.operators.not_in"),less:t("querybuilder.operators.less"),less_or_equal:t("querybuilder.operators.less_or_equal"),greater:t("querybuilder.operators.greater"),greater_or_equal:t("querybuilder.operators.greater_or_equal"),between:t("querybuilder.operators.between"),not_between:t("querybuilder.operators.not_between"),begins_with:t("querybuilder.operators.begins_with"),not_begins_with:t("querybuilder.operators.not_begins_with"),contains:t("querybuilder.operators.contains"),not_contains:t("querybuilder.operators.not_contains"),ends_with:t("querybuilder.operators.ends_with"),not_ends_with:t("querybuilder.operators.not_ends_with"),is_empty:t("querybuilder.operators.is_empty"),is_not_empty:t("querybuilder.operators.is_not_empty"),is_null:t("querybuilder.operators.is_null"),is_not_null:t("querybuilder.operators.is_not_null"),before:t("querybuilder.operators.before"),after:t("querybuilder.operators.after"),like:"Like",not_like:"Not like"},errors:{no_filter:t("querybuilder.errors.no_filter"),empty_group:t("querybuilder.errors.empty_group"),radio_empty:t("querybuilder.errors.radio_empty"),checkbox_empty:t("querybuilder.errors.checkbox_empty"),select_empty:t("querybuilder.errors.select_empty"),string_empty:t("querybuilder.errors.string_empty"),string_exceed_min_length:t("querybuilder.errors.string_exceed_min_length"),string_exceed_max_length:t("querybuilder.errors.string_exceed_max_length"),string_invalid_format:t("querybuilder.errors.string_invalid_format"),number_nan:t("querybuilder.errors.number_nan"),number_not_integer:t("querybuilder.errors.number_not_integer"),number_not_double:t("querybuilder.errors.number_not_double"),number_exceed_min:t("querybuilder.errors.number_exceed_min"),number_exceed_max:t("querybuilder.errors.number_exceed_max"),number_wrong_step:t("querybuilder.errors.number_wrong_step"),number_between_invalid:"Invalid values, {0} is greater than {1}",datetime_empty:t("querybuilder.errors.datetime_empty"),datetime_invalid:t("querybuilder.errors.datetime_invalid"),datetime_exceed_min:t("querybuilder.errors.datetime_exceed_min"),datetime_exceed_max:t("querybuilder.errors.datetime_exceed_max"),datetime_between_invalid:"Invalid values, {0} is greater than {1}",boolean_not_valid:t("querybuilder.errors.boolean_not_valid"),operator_not_multiple:t("querybuilder.errors.operator_not_multiple")},invert:t("querybuilder.common.invert"),NOT:"NOT"};n.defaults({lang_code:"en"});return n}));(()=>{class e{constructor(e){this.el=e;this.options=_.extend({},AGN.Lib.Helpers.objFromString(e.data("field-options")))}valid(){return true}errors(){return[]}onSubmit(){}isInitializedFor(e){return this.el.is(e)}static create(e){const t=e.data("agn:field");if(t){return t}const i=e.data("field");const n=AGN.Opt.Fields[i]||this;const r=new n(e);e.data("agn:field",r);return r}}AGN.Lib.Field=e})();(()=>{const e="HH:mm";class i extends AGN.Lib.Field{constructor(e){super(e);this._value=this.options.value||this.options.defaultValue||"";this._propertyName=this.el.data("property");this.#e();this.el.on("change",(()=>this.setDateTimeFieldValue()))}get dateValue(){return moment(this.strValue,`${window.adminDateFormat.toUpperCase()} ${e}`).toDate()}get strValue(){return this.$hiddenInput.val()}get $hiddenInput(){return this.el.find(`[name="${this._propertyName}"]`)}setDateTimeFieldValue(){this.$hiddenInput.val(this.#t())}valid(){return this.errors().length===0}errors(){const e=this.#i();const i=this.#n();if(!e.val()&&i.val()){return[{field:e,msg:t("fields.dateTime.errors.incompleteDate")}]}return[]}onSubmit(){this.setDateTimeFieldValue()}#t(){let e=this.#i().val();const t=this.#n().val()||this.#r();if(!e){return""}return this.#o(e,t.replace(/[_hm]/g,"0"))}#r(){let t=this.options.defaultSubmitTime;if(t!==""&&!t){return"00:00"}if(t==="now"){return moment().format(e)}return t}#i(){return this.el.find(".js-datepicker")}#n(){return this.el.find(".js-timepicker")}#o(e,t){if(/^(\d{2}):(\d{2})$/.test(t)){return`${e} ${t}`}return e}#e(){const e=this.el.data("field-extra-attributes");const t=e?AGN.Lib.Helpers.objFromString(e)||{}:{};const i=$("<input>",{type:"hidden",name:this._propertyName,value:this._value});$.each(t,((e,t)=>i.attr(e,t)));this.el.append(AGN.Lib.Template.text("datetime-picker",{date:this._value?this._value.split(" ")[0]:"",time:this.#s(),timeMask:this.options?.timeMask,extraAttrs:e||""}));this.el.find(".js-datepicker").data("datepicker-options",this.el.data("datepicker-options"));this.el.append(i);AGN.runAll(this.el)}#s(){if(!this._value){return""}const e=this._value.split(" ");return e.length===2?e[1]:""}}AGN.Lib.DateTimeField=i;AGN.Opt.Fields["datetime"]=i})();(()=>{class e extends AGN.Lib.Field{constructor(e){super(e);this.$source=this.el.find("select.js-double-select-trigger");this.$target=this.el.find("select.js-double-select-target");const t=()=>{this.$target.val([]);this.update()};this.$source.off("change",t);this.$source.on("change",t);AGN.Lib.DataProvider.get(e).done((e=>{this.options=e;this.update()}))}update(){const e=this.$source.find("option:selected").val();const t=this.$target.find("option:selected").val();this.$target.html(AGN.Lib.Template.text("double-select-options",{opts:this.options[e],valueSelected:t}));AGN.Lib.CoreInitializer.run("select",this.$target)}}AGN.Lib.DoubleSelectField=e;AGN.Opt.Fields["double-select"]=e})();(()=>{class e extends AGN.Lib.Field{constructor(e){super(e);this.$strength=this.el.find(".js-password-strength");this.$match=this.el.parent().find(".js-password-match");this.$strength.on("keyup",(e=>{if(e.keyCode!==13){if(!this.safe()||this.$strength.val().length===0){this.$match.val("")}this.updateStrength();this.updateMatch()}}));this.$match.on("keyup",(()=>this.updateMatch()))}match(){return this.$strength.val()===this.$match.val()}safe(){return this.#a().length===0}valid(){if(!this.$match.exists()){return true}return this.match()&&this.safe()}errors(){const e=[];if(this.valid()){return e}if(!this.match()){e.push({field:this.$match,msg:t("fields.password.errors.notMatching")})}const i=this.#a();if(i.length>0){i.forEach((t=>{e.push({field:this.$strength,msg:t})}))}return e}resetStrength(){const e=AGN.Lib.Form.get(this.$strength);e.cleanFieldFeedback(this.$strength)}resetMatch(){const e=AGN.Lib.Form.get(this.$match);e.cleanFieldFeedback(this.$match)}updateStrength(){this.resetStrength();if(this.$strength.val().length===0){return}const e=AGN.Lib.Form.get(this.$strength);const i=this.#a();if(i.length===0){e.markField(this.$strength,"success");AGN.Lib.Form.appendFeedbackMessage(this.$strength,t("fields.password.safe"),"success")}else{e.markField(this.$strength);i.forEach((e=>AGN.Lib.Form.appendFeedbackMessage(this.$strength,e)))}}updateMatch(){this.resetMatch();this.$match.get(0).toggleAttribute("readonly",!this.safe()||this.$strength.val().length===0);if(this.$match.val().length===0){return}const e=AGN.Lib.Form.get(this.$match);if(this.match()){e.markField(this.$match,"success");AGN.Lib.Form.appendFeedbackMessage(this.$match,t("fields.password.matches"),"success")}else{e.markField(this.$match);AGN.Lib.Form.appendFeedbackMessage(this.$match,t("fields.password.matchesNot"))}}#a(){const e=[];const i=this.$strength.val();if(i.length===0){return e}const n=this.$strength.attr("data-rule");const r=AGN.Lib.PasswordPolicies.findPasswordPolicy(n);const o=r(i);if(o&&o.length){o.forEach((i=>e.push(t(i))))}return e}}AGN.Lib.PasswordField=e;AGN.Opt.Fields["password"]=e})();(()=>{class e extends AGN.Lib.Field{valid(){if(this.options?.ignoreHidden&&!this.el.is(":visible")){return true}if(this.el.exists()){return $.trim(this.el.val())}return true}errors(){const e=[];if(this.valid())return e;e.push({field:this.el,msg:t("fields.required.errors.missing")});return e}}AGN.Lib.RequiredField=e;AGN.Opt.Fields["required"]=e})();(()=>{const e="field-vis";const t="field-vis-show";const i="field-vis-hide";const n=`data-${e}`;const r=`data-${t}`;const o=`data-${i}`;const s="data-field-vis-default";class a extends AGN.Lib.Field{static STR={DATA_FIELD_VIS:n,DATA_FIELD_VIS_SHOW:r,DATA_FIELD_VIS_HIDE:o,DATA_FIELD_VIS_DEFAULT:s};constructor(e){super(e);this.$source=this.el.find(`[${n}]`);this.$source.on("change change.select2",(()=>this.update()));this.update()}update(){this.#l();this.#c();this.#d()}#c(){_.each(this.$source.filter("select"),(e=>{this.#u($(e).find(":selected"))}))}#l(){_.each(this.el.find(`[${s}]`),(e=>{this.#u($(e))}))}#d(){_.each(this.$source.filter(":checked"),(e=>{this.#u($(e))}))}#u(e){if(e.is(":disabled")&&!e.is("[data-field-vis-nondisabled]")){return}const n=e.data(i);const r=e.data(t);let o=this.el;if(this.el.is("[data-field-vis-scope]")){o=$(this.el.data("field-vis-scope"))}_.each(o.find(n),(t=>{e=$(t);e.all(":input").each((function(){const e=$(this);if(!e.prop("disabled")){e.data("field-disabled",true);e.prop("disabled",true)}}));e.hide();if(e.data("select2")){e.next(".select2-container").hide();AGN.Lib.CoreInitializer.run("select",e.parents("select"))}if(e.is("option")){e.prop("disabled",true);AGN.Lib.CoreInitializer.run("select",e.parents("select"))}}));_.each(o.find(r),(t=>{e=$(t);e.all(":input").each((function(){const e=$(this);if(e.data("field-disabled")){e.prop("disabled",false);e.removeData("field-disabled")}}));e.show();if(e.data("select2")){e.next(".select2-container").show();AGN.Lib.CoreInitializer.run("select",e.parents("select"))}if(e.is("option")){e.prop("disabled",false);AGN.Lib.CoreInitializer.run("select",e.parents("select"))}}))}}AGN.Lib.ToggleVisField=a;AGN.Opt.Fields["toggle-vis"]=a})();(()=>{class e extends AGN.Lib.Field{constructor(e){super(e);this.$target=this.el.find("[data-field-validator]");this.validatorName=this.$target.data("field-validator");const t=this.$target.data("validator-options");this.options=t?AGN.Lib.Helpers.objFromString(t)||{}:{}}valid(){return!this.errors().length}errors(){if(!this.$target.exists()||this.$target.prop("disabled")){return[]}return this.#h().map((e=>e.errors(this.$target,this.options))).flat()}#h(){const e=[];this.validatorName.split(",").map((e=>e.trim())).forEach((t=>{const i=AGN.Lib.Validator.get(t);if(i){e.push(i)}else{console.debug(`Validator \`${t}\` doesn't exist`)}}));return e}isInitializedFor(e){return super.isInitializedFor(e)||this.$target.is(e)}}AGN.Lib.CustomField=e;AGN.Opt.Fields["validator"]=e})();(()=>{class e extends AGN.Lib.Field{constructor(e){super(e);this.$source=this.el.find("[data-field-split]");this.targets=this.$source.data("field-split").split(/,\s?/);this.rule=new RegExp(this.$source.data("field-split-rule"))}valid(){const e=AGN.Lib.Form.get(this.el);const t=this.$source.val().split(this.rule);_.each(this.targets,((i,n)=>{e.setValueOnce(i,t[n])}));return true}}AGN.Lib.ValueSplitField=e;AGN.Opt.Fields["split"]=e})();(()=>{class e{constructor(e,t,i){const n=this;t=_.bind(t,this);if(i&&i.exists()){i=i.first()}else{i=$(document)}_.each(e,((e,r)=>{i.on(r,e,(function(e,i){n.event=e;n.trigger=r;n.el=$(this);n.data=i;t(n.el,n.event,n.data,n.trigger);const o=$(n.event.target);if(o.is("a")||o.parent("a").length===1){n.event.preventDefault()}}))}))}static new(t,i,n){new e(t,i,n)}static translate(e){const t={};_.each(e,(function(e,i){e=e.split(/,\s?/);e=_.map(e,(e=>`[data-action="${e}"]`)).join(", ");t[i]=e}));return t}}AGN.Lib.Action=e})();(function(){function e(e,i,n){var r=AGN.Lib.Storage.get("autosave#"+e);if(r){var o=i?i(r.values,r.timestamp):r.values;if(o){var s=AGN.Lib.Template.text("autosave-restore",{title:t("autosave.confirm.title"),content:t("autosave.confirm.question",new Date(r.timestamp).toLocaleString(window.adminLocale,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),negative:t("autosave.discard"),positive:t("autosave.restore")});var a=AGN.Lib.Confirm.create(s).done((function(){n(o===true?r.values:o,r.timestamp);AGN.Lib.Messages(t("autosave.success.title"),t("autosave.success.message"),"success")})).always((function(){AGN.Lib.Storage.delete("autosave#"+e)}));return a.promise()}else{AGN.Lib.Storage.delete("autosave#"+e)}}return $.Deferred().reject().promise()}function i(e,t,i){var n=function(){var i=t();if(i){AGN.Lib.Storage.set("autosave#"+e,{timestamp:(new Date).getTime(),values:i})}return i!==false};if(i>0){var r=setInterval((function(){n()||clearInterval(r)}),i*1e3)}var o=function(){n()||$(document).unbind("ajax:unauthorized",o)};$(document).on("ajax:unauthorized",o)}AGN.Lib.AutoSave={initialize:function(t,n,r,o,s){var a=e(t,r,o);i(t,n,s);return a}}})();(()=>{AGN.Lib.ChartUtils={getTotal:e=>e.reduce(((e,t)=>e+t),0),calcExactPercentages:function(e){const t=this.getTotal(e);return e.map((e=>e/t*100))}}})();(function(){function e(e,t){try{navigator.clipboard.writeText(e).then((function(){t(true)}),(function(){t(false)}))}catch(e){console.warn(e);t(false)}}function t(e,t){var i=true;try{var n=$("<input>");$("body").append(n);n.val(e);n.select();document.execCommand("copy");n.remove()}catch(e){console.warn(e);i=false}if(t){t(i)}}AGN.Lib.Clipboard={set:function(i,n){e(i,(function(e){if(e){if(n){n(i,true)}}else{t(i,(function(e){if(n){n(i,e)}}))}}))}}})();(()=>{class e{static DATA_KEY="agn:colorpicker";static get(t){return t.data(e.DATA_KEY)}constructor(t){this.$el=t;this.$trigger=this.#p();t.spectrum({showInput:true,allowEmpty:true,preferredFormat:"hex",move:e=>{t.val(e.toHexString());this.$trigger.val(e.toHexString());this.#f(e)},change:e=>{this.#f(e)}});this.#f(t.spectrum("get"));t.data(e.DATA_KEY,this)}#p(){const e=this.$el.clone();if(this.$el.attr("id")){e.attr("id",this.$el.attr("id")+"_colorpicker")}e.attr("name","");e.removeClass("js-colorpicker");this.$el.before(e);e.on("input",(()=>{const t=e.val();this.$el.spectrum("set",t);this.#f(this.$el.spectrum("get"))}));e.on("blur",(()=>e.val(this.$el.val())));return e}#f(e){const t=e?this.#g(e.toHexString()):this.$el.css("--bs-body-color");this.$el.parent().find(".sp-preview").css("color",t)}#g(e){return AGN.Lib.Helpers.getColorLuminance(e)>.5?"#000":"#FFF"}}AGN.Lib.Colorpicker=e})();(()=>{class e{constructor(e,t){this.$modal=e;this.deferred=t||$.Deferred()}promise(){return this.deferred.promise()}positive(e){this.deferred.resolve(e);this.$modal.modal("hide");this.$modal.remove()}negative(e){this.deferred.reject(e);this.$modal.modal("hide");this.$modal.remove()}static get(t){const i=e.getWrapper(t);return i.data("_confirm")}static getWrapper(e){return e.closest(".modal")}static create(t,i){const n=AGN.Lib.Modal.create(t);const r=new e(n,i);if(n){n.data("_confirm",r)}return r.promise()}static from(t,i={},n){const r=AGN.Lib.Modal.fromTemplate(t,i);const o=new e(r,n);r.data("_confirm",o);return o.promise()}static request(t){const i=$.Deferred();let n;if(_.isString(t)){n=$.get(t)}else{n=t}n.done((t=>{const n=$(t).all(".modal");if(n.length===1){const t=new e(n,i);n.data("_confirm",t);AGN.Lib.Modal.create(n)}else if(typeof t==="object"&&"success"in t){AGN.Lib.JsonMessages(t.popups,true);t.success?i.resolve():i.reject()}else{AGN.Lib.Page.render(t);i.reject()}})).fail((()=>i.reject()));return i.promise()}}AGN.Lib.Confirm=e})();(function(){AGN.Lib.ContextMenu={create:function(t){$.each(t,(function(t,i){$.contextMenu({selector:t,build:function(t,n){return e(i,t,n)}})}))}};function e(e,t,i){if(e.shown===false||_.isFunction(e.shown)&&e.shown(t,i)===false){return false}var n=e.items;if(_.isFunction(n)){n=n(t,i)}var r={};var o=0;$.each(n,(function(e,n){if(!_.isFunction(n.shown)||n.shown(t,i)!==false){var s=r[e]={name:n.name,icon:n.icon};if(_.isFunction(n.disabled)){s.disabled=n.disabled(t,i)===true}else if(n.disabled===true){s.disabled=true}if(_.isFunction(n.clicked)){s.callback=function(e,i){n.clicked(t,e,i)}}o++}}));return o?{items:r}:false}})();(()=>{const e=function(e){e=_.bind(e,this);e(this)};e.prototype.addAction=function(e,t){AGN.Lib.Action.new(AGN.Lib.Action.translate(e),t)};e.prototype.addInitializer=function(e,t){AGN.Lib.CoreInitializer.new(e,t)};e.prototype.addDomInitializer=function(e,t){AGN.Lib.DomInitializer.new(e,t)};e.prototype.runInitializer=function(e){AGN.Lib.CoreInitializer.run(e)};e.new=function(e,t){AGN.Opt.Controllers[e]=t};e.newExtended=function(t,i,n){e.new(t,(t=>{const r=AGN.Opt.Controllers[i];if(r){new e(r)}_.bind(n,t)(t)}))};e.init=function(e=$(document)){e.all("[data-controller]").each((function(){const e=$(this).data("controller");const t=AGN.Opt.Controllers[e];if(t){new AGN.Lib.Controller(t);AGN.Opt.Controllers[e]=undefined}}))};AGN.Lib.Controller=e})();(function(){var e={};function t(t){var i=null;var n;if(arguments.length>2){i=arguments[1];n=arguments[2]}else{n=arguments[1]}if(_.isFunction(n)){e["key#"+t]={name:t,handler:n,dependencies:i}}else{console.error("Handler must be a function")}}function i(t,n,r,o){var s="key#"+n.name;if(r[s]){return}if(Array.isArray(n.dependencies)&&n.dependencies.length){o.push(n.name);n.dependencies.forEach((function(n){var s=e["key#"+n];if(s){if(o.includes(n)){var a=o.map((function(e){return"`"+e+"`"})).join(" => ");console.error("Cyclic initializer dependency detected ("+a+" => `"+n+"`)");return}i(t,s,r,o)}else{console.error("Unknown initializer dependency: `"+name+"`")}}));o.pop()}try{n.handler.call(n.handler,t)}catch(e){console.error(e)}r[s]=true}function n(t){var n={};var r=[];$.each(e,(function(e,o){i(t,o,n,r)}))}function r(t,i){if(Array.isArray(t)){t.forEach((function(e){r(e,i)}))}else{var n=e["key#"+t];if(n){n.handler.call(n.handler,i);return true}else{console.error("Unknown initializer: `"+t+"`");return false}}}AGN.Lib.CoreInitializer={autorun:n,run:r,new:t}})();(function(){class e{static readActualToken(){if(e.isProtectionEnabled()){return AGN.Lib.Storage.readCookie(window.csrfCookieName)}return""}static getParameterName(){return window.csrfParameterName}static isProtectionEnabled(){return window.csrfHeaderName&&e.getParameterName()&&window.csrfCookieName}static setTokenToReqHeader(t,i){if(e.isProtectionEnabled()&&i!=="GET"){t.setRequestHeader(window.csrfHeaderName,e.readActualToken())}}static updateTokenInDOM(t=$(document)){if(!e.isProtectionEnabled()){return t}const i=!(t instanceof $);if(i){t=$("<div>").append(t)}const n=e.readActualToken();const r=t.find(`input[name="${e.getParameterName()}"]`);_.each(r,(e=>{if(i){$(e).attr("value",n)}else{$(e).val(n)}}));if(i){return t.html()}}}AGN.Lib.CSRF=e})();(function(){var e={};e.get=function(t){var i=t.data("provider"),n=t.data("provider-src"),r;switch(i){case"opt":r=e.opt(n);break;case"remote":r=e.remote(n);break;default:break}return r};e.opt=function(e){var t=$.Deferred();if(AGN.Opt[e]){setTimeout((function(){t.resolve(AGN.Opt[e])}),100)}else{setTimeout((function(){t.reject()}),100)}return t};e.remote=function(e){return $.get(e)};AGN.Lib.DataProvider=e})();(function(){let e;const t={"ar-SA":"dd/MM/yy","bg-BG":"dd.M.yyyy","ca-ES":"dd/MM/yyyy","zh-TW":"yyyy/M/d","cs-CZ":"d.M.yyyy","da-DK":"dd-MM-yyyy","de-DE":"dd.MM.yyyy","el-GR":"d/M/yyyy","en-US":"M/d/yyyy","fi-FI":"d.M.yyyy","fr-FR":"dd/MM/yyyy","he-IL":"dd/MM/yyyy","hu-HU":"yyyy. MM. dd.","is-IS":"d.M.yyyy","it-IT":"dd/MM/yyyy","ja-JP":"yyyy/MM/dd","ko-KR":"yyyy-MM-dd","nl-NL":"d-M-yyyy","nb-NO":"dd.MM.yyyy","pl-PL":"yyyy-MM-dd","pt-BR":"d/M/yyyy","ro-RO":"dd.MM.yyyy","ru-RU":"dd.MM.yyyy","hr-HR":"d.M.yyyy","sk-SK":"d. M. yyyy","sq-AL":"yyyy-MM-dd","sv-SE":"yyyy-MM-dd","th-TH":"d/M/yyyy","tr-TR":"dd.MM.yyyy","ur-PK":"dd/MM/yyyy","id-ID":"dd/MM/yyyy","uk-UA":"dd.MM.yyyy","be-BY":"dd.MM.yyyy","sl-SI":"d.M.yyyy","et-EE":"d.MM.yyyy","lv-LV":"yyyy.MM.dd.","lt-LT":"yyyy.MM.dd","fa-IR":"MM/dd/yyyy","vi-VN":"dd/MM/yyyy","hy-AM":"dd.MM.yyyy","az-Latn-AZ":"dd.MM.yyyy","eu-ES":"yyyy/MM/dd","mk-MK":"dd.MM.yyyy","af-ZA":"yyyy/MM/dd","ka-GE":"dd.MM.yyyy","fo-FO":"dd-MM-yyyy","hi-IN":"dd-MM-yyyy","ms-MY":"dd/MM/yyyy","kk-KZ":"dd.MM.yyyy","ky-KG":"dd.MM.yy","sw-KE":"M/d/yyyy","uz-Latn-UZ":"dd/MM yyyy","tt-RU":"dd.MM.yyyy","pa-IN":"dd-MM-yy","gu-IN":"dd-MM-yy","ta-IN":"dd-MM-yyyy","te-IN":"dd-MM-yy","kn-IN":"dd-MM-yy","mr-IN":"dd-MM-yyyy","sa-IN":"dd-MM-yyyy","mn-MN":"yy.MM.dd","gl-ES":"dd/MM/yy","kok-IN":"dd-MM-yyyy","syr-SY":"dd/MM/yyyy","dv-MV":"dd/MM/yy","ar-IQ":"dd/MM/yyyy","zh-CN":"yyyy/M/d","de-CH":"dd.MM.yyyy","en-GB":"dd/MM/yyyy","es-MX":"dd/MM/yyyy","fr-BE":"d/MM/yyyy","it-CH":"dd.MM.yyyy","nl-BE":"d/MM/yyyy","nn-NO":"dd.MM.yyyy","pt-PT":"dd-MM-yyyy","sr-Latn-CS":"d.M.yyyy","sv-FI":"d.M.yyyy","az-Cyrl-AZ":"dd.MM.yyyy","ms-BN":"dd/MM/yyyy","uz-Cyrl-UZ":"dd.MM.yyyy","ar-EG":"dd/MM/yyyy","zh-HK":"d/M/yyyy","de-AT":"dd.MM.yyyy","en-AU":"d/MM/yyyy","es-ES":"dd/MM/yyyy","fr-CA":"yyyy-MM-dd","sr-Cyrl-CS":"d.M.yyyy","ar-LY":"dd/MM/yyyy","zh-SG":"d/M/yyyy","de-LU":"dd.MM.yyyy","en-CA":"dd/MM/yyyy","es-GT":"dd/MM/yyyy","fr-CH":"dd.MM.yyyy","ar-DZ":"dd-MM-yyyy","zh-MO":"d/M/yyyy","de-LI":"dd.MM.yyyy","en-NZ":"d/MM/yyyy","es-CR":"dd/MM/yyyy","fr-LU":"dd/MM/yyyy","ar-MA":"dd-MM-yyyy","en-IE":"dd/MM/yyyy","es-PA":"MM/dd/yyyy","fr-MC":"dd/MM/yyyy","ar-TN":"dd-MM-yyyy","en-ZA":"yyyy/MM/dd","es-DO":"dd/MM/yyyy","ar-OM":"dd/MM/yyyy","en-JM":"dd/MM/yyyy","es-VE":"dd/MM/yyyy","ar-YE":"dd/MM/yyyy","en-029":"MM/dd/yyyy","es-CO":"dd/MM/yyyy","ar-SY":"dd/MM/yyyy","en-BZ":"dd/MM/yyyy","es-PE":"dd/MM/yyyy","ar-JO":"dd/MM/yyyy","en-TT":"dd/MM/yyyy","es-AR":"dd/MM/yyyy","ar-LB":"dd/MM/yyyy","en-ZW":"M/d/yyyy","es-EC":"dd/MM/yyyy","ar-KW":"dd/MM/yyyy","en-PH":"M/d/yyyy","es-CL":"dd-MM-yyyy","ar-AE":"dd/MM/yyyy","es-UY":"dd/MM/yyyy","ar-BH":"dd/MM/yyyy","es-PY":"dd/MM/yyyy","ar-QA":"dd/MM/yyyy","es-BO":"dd/MM/yyyy","es-SV":"dd/MM/yyyy","es-HN":"dd/MM/yyyy","es-NI":"dd/MM/yyyy","es-PR":"dd/MM/yyyy","am-ET":"d/M/yyyy","tzm-Latn-DZ":"dd-MM-yyyy","iu-Latn-CA":"d/MM/yyyy","sma-NO":"dd.MM.yyyy","mn-Mong-CN":"yyyy/M/d","gd-GB":"dd/MM/yyyy","en-MY":"d/M/yyyy","prs-AF":"dd/MM/yy","bn-BD":"dd-MM-yy","wo-SN":"dd/MM/yyyy","rw-RW":"M/d/yyyy","qut-GT":"dd/MM/yyyy","sah-RU":"MM.dd.yyyy","gsw-FR":"dd/MM/yyyy","co-FR":"dd/MM/yyyy","oc-FR":"dd/MM/yyyy","mi-NZ":"dd/MM/yyyy","ga-IE":"dd/MM/yyyy","se-SE":"yyyy-MM-dd","br-FR":"dd/MM/yyyy","smn-FI":"d.M.yyyy","moh-CA":"M/d/yyyy","arn-CL":"dd-MM-yyyy","ii-CN":"yyyy/M/d","dsb-DE":"d. M. yyyy","ig-NG":"d/M/yyyy","kl-GL":"dd-MM-yyyy","lb-LU":"dd/MM/yyyy","ba-RU":"dd.MM.yy","nso-ZA":"yyyy/MM/dd","quz-BO":"dd/MM/yyyy","yo-NG":"d/M/yyyy","ha-Latn-NG":"d/M/yyyy","fil-PH":"M/d/yyyy","ps-AF":"dd/MM/yy","fy-NL":"d-M-yyyy","ne-NP":"M/d/yyyy","se-NO":"dd.MM.yyyy","iu-Cans-CA":"d/M/yyyy","sr-Latn-RS":"d.M.yyyy","si-LK":"yyyy-MM-dd","sr-Cyrl-RS":"d.M.yyyy","lo-LA":"dd/MM/yyyy","km-KH":"yyyy-MM-dd","cy-GB":"dd/MM/yyyy","bo-CN":"yyyy/M/d","sms-FI":"d.M.yyyy","as-IN":"dd-MM-yyyy","ml-IN":"dd-MM-yy","en-IN":"dd-MM-yyyy","or-IN":"dd-MM-yy","bn-IN":"dd-MM-yy","tk-TM":"dd.MM.yy","bs-Latn-BA":"d.M.yyyy","mt-MT":"dd/MM/yyyy","sr-Cyrl-ME":"d.M.yyyy","se-FI":"d.M.yyyy","zu-ZA":"yyyy/MM/dd","xh-ZA":"yyyy/MM/dd","tn-ZA":"yyyy/MM/dd","hsb-DE":"d. M. yyyy","bs-Cyrl-BA":"d.M.yyyy","tg-Cyrl-TJ":"dd.MM.yy","sr-Latn-BA":"d.M.yyyy","smj-NO":"dd.MM.yyyy","rm-CH":"dd/MM/yyyy","smj-SE":"yyyy-MM-dd","quz-EC":"dd/MM/yyyy","quz-PE":"dd/MM/yyyy","hr-BA":"d.M.yyyy.","sr-Latn-ME":"d.M.yyyy","sma-SE":"yyyy-MM-dd","en-SG":"d/M/yyyy","ug-CN":"yyyy-M-d","sr-Cyrl-BA":"d.M.yyyy","es-US":"M/d/yyyy"};e={MONTH_NAMES:["January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAY_NAMES:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat"],LZ:function(e){return(e<0||e>9?"":"0")+e},compareDates:function(t,i,n,r){var o=e.parseFormat(t,i);var s=e.parseFormat(n,r);if(o==0||s==0)return-1;else if(o>s)return 1;return 0},format:function(t,i){i=i+"";var n="";var r=0;var o="";var s="";var a=t.getYear()+"";var l=t.getMonth()+1;var c=t.getDate();var d=t.getDay();var u=t.getHours();var h=t.getMinutes();var p=t.getSeconds();var f,g,m,v,b,y,w,C,_,S,A,u,x,E,T,D;var M=new Object;if(a.length<4){a=""+(a-0+1900)}M["y"]=""+a;M["yyyy"]=a;M["yy"]=a.substring(2,4);M["M"]=l;M["MM"]=e.LZ(l);M["MMM"]=e.MONTH_NAMES[l-1];M["NNN"]=e.MONTH_NAMES[l+11];M["d"]=c;M["dd"]=e.LZ(c);M["E"]=e.DAY_NAMES[d+7];M["EE"]=e.DAY_NAMES[d];M["H"]=u;M["HH"]=e.LZ(u);if(u==0){M["h"]=12}else if(u>12){M["h"]=u-12}else{M["h"]=u}M["hh"]=e.LZ(M["h"]);if(u>11){M["K"]=u-12}else{M["K"]=u}M["k"]=u+1;M["KK"]=e.LZ(M["K"]);M["kk"]=e.LZ(M["k"]);if(u>11){M["a"]="PM"}else{M["a"]="AM"}M["m"]=h;M["mm"]=e.LZ(h);M["s"]=p;M["ss"]=e.LZ(p);while(r<i.length){o=i.charAt(r);s="";while(i.charAt(r)==o&&r<i.length)s+=i.charAt(r++);if(M[s]!=null)n+=M[s];else n+=s}return n},_isInteger:function(e){var t="1234567890";for(var i=0;i<e.length;i++)if(t.indexOf(e.charAt(i))==-1)return false;return true},_getInt:function(t,i,n,r){for(var o=r;o>=n;o--){var s=t.substring(i,i+o);if(s.length<n)return null;if(e._isInteger(s))return s}return null},parseFormat:function(t,i){t=t+"";i=i+"";var n=0;var r=0;var o="";var s="";var a="";var l,c;var d=new Date;var u=d.getYear();var h=d.getMonth()+1;var p=1;var f=d.getHours();var g=d.getMinutes();var m=d.getSeconds();var v="";while(r<i.length){o=i.charAt(r);s="";while(i.charAt(r)==o&&r<i.length)s+=i.charAt(r++);if(s=="yyyy"||s=="yy"||s=="y"){if(s=="yyyy")l=4;c=4;if(s=="yy")l=2;c=2;if(s=="y")l=2;c=4;u=e._getInt(t,n,l,c);if(u==null)return 0;n+=u.length;if(u.length==2){if(u>70)u=1900+(u-0);else u=2e3+(u-0)}}else if(s=="MMM"||s=="NNN"){h=0;for(var b=0;b<e.MONTH_NAMES.length;b++){var y=e.MONTH_NAMES[b];if(t.substring(n,n+y.length).toLowerCase()==y.toLowerCase()){if(s=="MMM"||s=="NNN"&&b>11){h=b+1;if(h>12)h-=12;n+=y.length;break}}}if(h<1||h>12)return 0}else if(s=="EE"||s=="E"){for(var b=0;b<e.DAY_NAMES.length;b++){var w=e.DAY_NAMES[b];if(t.substring(n,n+w.length).toLowerCase()==w.toLowerCase()){n+=w.length;break}}}else if(s=="MM"||s=="M"){h=e._getInt(t,n,s.length,2);if(h==null||h<1||h>12)return 0;n+=h.length}else if(s=="dd"||s=="d"){p=e._getInt(t,n,s.length,2);if(p==null||p<1||p>31)return 0;n+=p.length}else if(s=="hh"||s=="h"){f=e._getInt(t,n,s.length,2);if(f==null||f<1||f>12)return 0;n+=f.length}else if(s=="HH"||s=="H"){f=e._getInt(t,n,s.length,2);if(f==null||f<0||f>23)return 0;n+=f.length}else if(s=="KK"||s=="K"){f=e._getInt(t,n,s.length,2);if(f==null||f<0||f>11)return 0;n+=f.length}else if(s=="kk"||s=="k"){f=e._getInt(t,n,s.length,2);if(f==null||f<1||f>24)return 0;n+=f.length;f--}else if(s=="mm"||s=="m"){g=e._getInt(t,n,s.length,2);if(g==null||g<0||g>59)return 0;n+=g.length}else if(s=="ss"||s=="s"){m=e._getInt(t,n,s.length,2);if(m==null||m<0||m>59)return 0;n+=m.length}else if(s=="a"){if(t.substring(n,n+2).toLowerCase()=="am")v="AM";else if(t.substring(n,n+2).toLowerCase()=="pm")v="PM";else return 0;n+=2}else{if(t.substring(n,n+s.length)!=s)return 0;else n+=s.length}}if(n!=t.length)return 0;if(h==2){if(u%4==0&&u%100!=0||u%400==0){if(p>29)return 0}else if(p>28){return 0}}if(h==4||h==6||h==9||h==11)if(p>30)return 0;if(f<12&&v=="PM")f=f-0+12;else if(f>11&&v=="AM")f-=12;var C=new Date(u,h-1,p,f,g,m);return C},parse:function(t,i){if(i){return e.parseFormat(t,i)}else{var n=arguments.length==2?arguments[1]:false;var r=new Array("y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d");var o=new Array("M/d/y","M-d-y","M.d.y","MMM-d","M/d","M-d");var s=new Array("d/M/y","d-M-y","d.M.y","d-MMM","d/M","d-M");var a=[r,n?s:o,n?o:s];var l=null;for(var c=0;c<a.length;c++){var d=a[c];for(var u=0;u<d.length;u++){l=e.parseFormat(t,d[u]);if(l!=0)return new Date(l)}}return null}},toArray:function(e,t){if(e&&e.getMonth){return[e.getFullYear(),e.getMonth(),e.getDate()]}else{return t}},getLocaleShortDateString:function(e){var i=navigator.language?navigator.language:navigator["userLanguage"],n=e.getFullYear(),r=e.getMonth()+1,e=e.getDate();var o=i in t?t[i]:"MM/dd/yyyy";function s(e){e=""+e;return e.length>1?e:"0"+e}o=o.replace(/yyyy/,n);o=o.replace(/yy/,String(n).substr(2));o=o.replace(/MM/,s(r));o=o.replace(/M/,r);o=o.replace(/dd/,s(e));o=o.replace(/d/,e);return o},getLocaleDateFormat:function(){var e=navigator.language?navigator.language:navigator["userLanguage"];var i=e in t?t[e]:"MM/dd/yyyy";return i},getLocalizedShortWeekdays:function(e,t){const i=[];const n=new Date;const r={weekday:"short"};n.setDate(n.getDate()-n.getDay()+t);for(let t=0;t<7;t++){const t=n.toLocaleDateString(e,r);i.push(t);n.setDate(n.getDate()+1)}return i},formatAdminDateTime:function(e){if(!e){return""}const t=window.adminDateTimeFormat.replaceAll("d","D").replaceAll("y","Y");return moment(e).format(t)},formatAdminDate:function(e){if(!e){return""}const t=window.adminDateFormat.replaceAll("d","D").replaceAll("y","Y");return moment(e).format(t)}};AGN.Lib.DateFormat=e})();(function(){var e='script[type="application/json"]';var t="config:";var i={};function n(t,i){this.el=t;if(t.is(e)){this.config=t.json()}else{const e=r(t,i);if(e.exists()){var n=e.attr("type");if(!n||n==="application/json"){this.config=e.json()}else{console.error("Unexpected config script type: `"+n+"`")}}}}function r(e,i){const n="script#"+CSS.escape(t+i);const r=e.find(n);if(r.exists()){return r}return $(n)}n.prototype.addAction=function(e,t){AGN.Lib.Action.new(AGN.Lib.Action.translate(e),t,this.el)};function o(e){var t=e;if(!t){t=$(document)}t.all("[data-initializer]").each((function(){var t=$(this);s(t.data("initializer"),t,e)}))}function s(e,t,r){var o=i["key#"+e];if(o){var s=o.call(new n(t,e),t,r);if(s===false){i["key#"+e]=undefined}return true}else{return false}}function a(e,t){if(i["key#"+e]){var n=t;if(!n){n=$(document)}n.all('[data-initializer="'+CSS.escape(e)+'"]').each((function(){s(e,$(this),t)}))}}function l(e,t){if(_.isFunction(t)){i["key#"+e]=t}else{console.error("Handler must be a function")}}AGN.Lib.DomInitializer={autorun:o,run:s,try:a,new:l}})();(()=>{const e={MAIN:"main",VISIBLE:"visible",HIDDEN:"hidden"};class i{static DATA_KEY="agn:editable-tile";static SELECTOR="[data-editable-tile]";constructor(e,t){this.$el=e;this.state=t;this.toggle();this.setOverlay();this.$el.data(i.DATA_KEY,this)}static get(e){const t=e.closest(i.SELECTOR);return t.data(i.DATA_KEY)}toggleState(){if(this.state===e.VISIBLE){this.state=e.HIDDEN}else{this.state=e.VISIBLE}this.setOverlay()}toggle(){this.$el.toggleClass("tile--hidden",this.state===e.HIDDEN)}setOverlay(){const e=AGN.Lib.Template.dom("tile-overlay",{state:this.state});if(this.$overlay&&document.body.contains(this.$overlay[0])){this.$overlay.replaceWith(e)}else{this.$el.append(e)}this.$overlay=e}}AGN.Lib.EditableTile=i;class n{static DATA_KEY="agn:editable-view";static SELECTOR="[data-editable-view]";constructor(e,t){this.$el=e;this.name=t;this.inEditMode=false;this.$btn=$(`[data-edit-view="${t}"]`);this.$btnSiblings=this.$btn.closest("li").siblings("li:visible");this.config=AGN.Lib.Storage.get(this.#m())||{};this.tiles=this.#v();this.#b();this.$el.addClass("is-initialized");this.$el.data(n.DATA_KEY,this);this.#y()}static get(e){const t=e.closest(n.SELECTOR);return t.data(n.DATA_KEY)}enableEditMode(){this.inEditMode=true;this.$el.addClass("edit-mode");this.#b();this.#y();this.$btnSiblings.hide()}applyChanges(){this.inEditMode=false;this.$el.removeClass("edit-mode");this.$btnSiblings.show();const t={};this.tiles.forEach((i=>{i.toggle();if(i.state!==e.MAIN){t[i.$el.attr("id")]=i.state}}));this.#b();AGN.Lib.Storage.set(this.#m(),t);AGN.Lib.Messages.success("editableView.saved");this.#y()}#w(){return this.#C(e.HIDDEN).length}#y(){const e=this.$btn.find(".text");if(this.isInEditMode()){e.text(t("editableView.save"))}else{e.text(t("editableView.edit"));const i=this.#w();if(i>0){e.append(` (${i} <i class="icon icon-eye-slash"></i>)`)}}}toggleState(t){const n=this.#C(e.HIDDEN);const r=i.get(t);if(n.length===this.tiles.length-1&&r.state===e.VISIBLE){AGN.Lib.Messages.alert("editableView.tile.error.cantRemove")}else{r.toggleState()}}#C(e){return this.tiles.filter((t=>t.state===e))}isInEditMode(){return this.inEditMode}#v(){const t=this;const n=new Map;this.$el.find(i.SELECTOR).each((function(){const e=$(this);const i=t.getTileState(e);n.set(e,i)}));const r=[...n.values()].every((t=>t===e.HIDDEN));return Array.from(n,(([t,n])=>new i(t,r?e.VISIBLE:n)))}getTileState(t){return t.data("editable-tile")||this.config[t.attr("id")]||e.VISIBLE}#b(){const e=this.tiles.flatMap((e=>{const t=e.$el.parentsUntil(this.$el);return t.toArray().map((e=>$(e)))}));e.forEach((e=>e.toggleClass("tile-container--hidden",this.#_(e))))}#_(t){if(this.inEditMode){return false}return t.find(i.SELECTOR).toArray().every((t=>i.get($(t)).state===e.HIDDEN))}#m(){return`editable-view#${this.name}`}#S(e){const t=i.get(e);return t&&this.tiles.includes(t)}add(e){if(this.#S(e)){i.get(e).setOverlay();return}const t=new i(e,this.getTileState(e));this.tiles.push(t);this.#b();this.#y()}}AGN.Lib.EditableView=n})();(()=>{let e,t,i,n;const r=function(e){const t=this;let i;this.el=$(e);const n=!!this.el.attr("readonly");this.isFullHeight=!!this.el.data("full-height-editor");this.height=parseInt(this.el.attr("rows")||15)*15;const r=this.el.attr("id")+"Editor";let o=$(`#${r}`);if(o.length===1){i=r;const e=o.data("full-height-editor");o.css("height",e?"100%":this.height+"px")}else{i=_.uniqueId("Editor");o=$(`<div id="${i}" class="form-control"></div>`);o.css("height",this.isFullHeight?"100%":this.height+"px");o.insertAfter($(this.el))}this.el.hide();this.editor=ace.edit(i);this.editor.setReadOnly(n);this.editor.getSession().setValue(this.el.val());this.editor.getSession().on("change",(function(e){t.el.val(t.editor.getSession().getValue());t.el.trigger("editor:change")}));this.langTools=ace.require("ace/ext/language_tools");this.decorate();if(this.el.hasClass("js-editor-validate")){this.editor.getSession().setUseWorker(true)}if(this.el.hasClass("js-editor-wrap")){this.editor.getSession().setUseWrapMode(true)}this.el.trigger("editor:create")};r.get=function(r){let o=r.data("_editor");if(o){return o}if(r.hasClass("js-editor")){o=new e(r)}else if(r.hasClass("js-editor-text")){o=new t(r)}else if(r.hasClass("js-editor-eql")){o=new i(r)}else if(r.hasClass("js-editor-css")){o=new n(r)}r.data("_editor",o);return o};r.exists=function(e){return!!e.data("_editor")};r.all=function(e=$(document)){return _.map(e.all(".js-editor, .js-editor-text, .js-editor-eql, .js-editor-css"),(function(e){return r.get($(e))}))};r.prototype.decorate=function(){if(AGN.Lib.Helpers.isDarkTheme()){this.editor.setTheme("ace/theme/idle_fingers")}else{this.editor.setTheme("ace/theme/chrome")}this.editor.session.setUseWrapMode(true);this.editor.session.setWrapLimitRange(null,null);this.editor.setBehavioursEnabled(true);this.editor.setShowPrintMargin(false);this.editor.session.setUseSoftTabs(true);this.editor.getSession().setUseWorker(false);this.editor.setOptions({enableBasicAutocompletion:true,enableSnippets:true,enableLiveAutocompletion:true,minLines:20})};r.prototype.resize=function(){this.editor.resize()};r.prototype.val=function(e,t=false){if(typeof e!=="undefined"){const i=this.editor.getSelection().getCursor();this.editor.getSession().setValue(e);if(t){this.goToLine(i.row+1,i.column)}}else{return this.editor.getSession().getValue()}};r.prototype.goToLine=function(e,t){this.editor.focus();this.editor.gotoLine(e,t)};e=function(e){r.apply(this,e)};e.prototype=Object.create(r.prototype);e.prototype.constructor=e;e.prototype.decorate=function(){r.prototype.decorate.call(this);this.editor.getSession().setMode("ace/mode/html")};t=function(e){r.apply(this,e)};t.prototype=Object.create(r.prototype);t.prototype.constructor=t;t.prototype.decorate=function(){if(AGN.Lib.Helpers.isDarkTheme()){this.editor.setTheme("ace/theme/idle_fingers")}else{this.editor.setTheme("ace/theme/chrome")}this.editor.session.setUseWrapMode(false);this.editor.session.setWrapLimitRange(null,null);this.editor.setBehavioursEnabled(true);this.editor.setShowPrintMargin(false);this.editor.session.setUseSoftTabs(true);this.editor.getSession().setUseWorker(false);this.editor.setOptions({enableBasicAutocompletion:false,enableSnippets:false,enableLiveAutocompletion:false,minLines:20});this.editor.getSession().setMode("ace/mode/text")};i=function(e){r.apply(this,e)};i.prototype=Object.create(r.prototype);i.prototype.constructor=i;i.prototype.decorate=function(){if(AGN.Lib.Helpers.isDarkTheme()){this.editor.setTheme("ace/theme/idle_fingers")}else{this.editor.setTheme("ace/theme/chrome")}this.editor.session.setUseWrapMode(false);this.editor.session.setWrapLimitRange(null,null);this.editor.setBehavioursEnabled(true);this.editor.setShowPrintMargin(false);this.editor.session.setUseSoftTabs(true);this.editor.getSession().setUseWorker(false);this.langTools.setCompleters([this.langTools.keyWordCompleter,this.langTools.snippetCompleter]);this.editor.setOptions({enableBasicAutocompletion:true,enableSnippets:false,enableLiveAutocompletion:true,minLines:20});ace.config.loadModule("ace/ext/eql_constructions_tokens");ace.config.loadModule("ace/ext/eql_constructions_basic");ace.config.loadModule("ace/ext/eql_constructions_extended");this.editor.getSession().setMode("ace/mode/eql")};n=function(e){r.apply(this,e)};n.prototype=Object.create(r.prototype);n.prototype.constructor=n;n.prototype.decorate=function(){r.prototype.decorate.call(this);this.editor.getSession().setMode("ace/mode/css")};AGN.Lib.Editor=r;AGN.Lib.EditorHtml=e;AGN.Lib.EditorText=t;AGN.Lib.EditorEql=i;AGN.Lib.EditorCss=n})();(()=>{class e{static DATA_ATTR_NAME="agn:endless-scroll";constructor(t,i,n={}){this.$el=t;this.url=i;this.options=n;this.currentPage=0;this.allPagesLoaded=false;this.$loader=n.loader?$(n.loader):null;this.$content=t.find("[data-endless-scroll-content]");if(!this.$content.exists()){this.$content=t.find("> div:first")}this.$content.wrap('<div class="endless_scroll_inner_wrap"></div>');t.endlessScroll({fireOnce:true,fireDelay:1e3,loader:"",insertAfter:"",callback:()=>this.loadContent()});this.loadContent();t.data(e.DATA_ATTR_NAME,this)}static get(t){return t.data(e.DATA_ATTR_NAME)}load(e){this.$content.empty();if(e){this.url=e}this.currentPage=0;this.allPagesLoaded=false;this.loadContent()}loadContent(){if(this.allPagesLoaded){return}const e=this.$loader?.exists()&&this.$el.is(":visible");if(e){AGN.Lib.Loader.prevent();this.$loader.removeClass("hidden")}const t=$.get(this.url,{page:this.currentPage+1});t.done((t=>{this.currentPage+=1;const i=$(t);const n=$(t).children();if(t instanceof Array){this.$content.append(JSON.stringify(t))}this.$content.append(n);this.allPagesLoaded=i.is("[data-endless-scroll-stop]");if(e){this.$loader.addClass("hidden")}if(this.options.onLoad){this.options.onLoad(n)}}));return t}}AGN.Lib.EndlessScroll=e})();(()=>{class e{static defaults(){return[{active:false,time:""}]}static create(t,i){t=$.extend(e.defaults()[0],t);return AGN.Lib.Template.dom(i?"schedule-extended-time-wrapper":"schedule-time-wrapper",{scheduleElement:t})}static get(e){return e.closest("[data-schedule-time-wrapper]")}}class i{constructor(e){if(!e.exists()){e=i.create({})}this.$rowWrapper=e}static defaults(){return{weekDay:"",scheduledInterval:{active:false,interval:""},scheduledTime:[{active:false,time:""}]}}static get(e){let t;if(e.is("tr[data-schedule-row]")){t=e}else{t=e.closest("tr[data-schedule-row]")}return new i(t)}static create(e){e=$.extend(i.defaults(),e);const t=AGN.Lib.Template.dom("schedule-day-row",{entry:e});const n=new i(t);t.on("row:add-schedule row:remove-schedule",(()=>{const e=t.find("[data-schedule-time-wrapper]").length;const i=t.find('[data-action="remove-schedule"]');const n=t.find('[data-action="add-schedule"]');i.addClass("hidden");n.addClass("hidden");if(e>1){i.slice(0,-1).removeClass("hidden")}n.last().removeClass("hidden")}));t.find("[data-schedule-interval]").on("change",(function(){const e=n.isIntervalSelection();const i=t.find("[data-schedule-time-wrapper]");i.find(".btn").toggleClass("disabled",e);i.find(":input").prop("disabled",e);if(!e&&!i.exists()){n.addSchedule()}}));return t}static deserialize(e){if(!e.scheduledInterval.active&&!e.scheduledTime.some((e=>e.active))){return null}return i.create(e)}toJson(){const e=this.$rowWrapper.find("[data-schedule-dayOfTheWeek]").val();const t=this.isIntervalSelection();const n=_.map(this.$rowWrapper.find("[data-schedule-time-wrapper]"),(e=>{const i=$(e).find("[data-schedule-time]").val();return{active:!t&&!!i,time:i}}));const r={active:t,interval:this.$rowWrapper.find("[data-schedule-interval]").val()};return $.extend(i.defaults(),{weekDay:e,scheduledTime:n,scheduledInterval:r})}isIntervalSelection(e){return this.$rowWrapper.find("[data-schedule-interval]").val()!=="0"}addSchedule(t){const i=e.create(t,true);this.$rowWrapper.find("[data-schedule-time-container]").append(i);AGN.runAll(i);this.$rowWrapper.trigger("row:add-schedule")}removeSchedule(t){e.get(t).remove();this.$rowWrapper.trigger("row:remove-schedule")}getAllScheduleTimes(){const e=[];this.toJson().scheduledTime.forEach((t=>{if(t.active){e.push(parseInt(t.time.replace(":","")))}}));return e}isValidTimeIntervals(){const e=this.getAllScheduleTimes();return(new o).valid(e)}validateTimeIntervals(){if(this.isValidTimeIntervals()){this.hideTimeScheduleErrors();return true}this.showTimeScheduleErrors(t("error.delay.60"));return false}showTimeScheduleErrors(e){const t=this.$rowWrapper.find("[data-schedule-time-wrapper]");const i=$(`<div class="form-control-feedback-message">${e}</div>`);_.each(t,(e=>{const t=$(e);if(!t.find(".form-control-feedback-message").exists()){t.find("[data-schedule-time]").parent().append(i.clone());t.addClass("has-alert has-feedback")}}))}hideTimeScheduleErrors(){const e=this.$rowWrapper.find("[data-schedule-time-wrapper]");e.find(".form-control-feedback-message").remove();e.removeClass("has-alert has-feedback")}}class n{constructor(e){if(!e.exists()){e=n.create({})}this.$rowWrapper=e}static defaults(){return{type:"1",weekDay:"",monthDay:"",scheduledTime:[{active:false,time:""}]}}static get(e){let t;if(e.is("tr[data-schedule-row]")){t=e}else{t=e.closest("tr[data-schedule-row]")}return new n(t)}static create(e){e=$.extend(n.defaults(),e);const t=AGN.Lib.Template.dom("schedule-period-row",{entry:e});const i=new n(t);t.on("row:add-schedule",(function(){const e=t.find("[data-schedule-time-wrapper]");if(e.length>1){t.find('[data-action="remove-schedule"]').closest(".input-group-addon").removeClass("hidden")}}));t.on("row:remove-schedule",(function(){const e=t.find("[data-schedule-time-wrapper]");if(e.length<2){t.find('[data-action="remove-schedule"]').closest(".input-group-addon").addClass("hidden")}if(e.length===0){i.addSchedule()}}));return t}static deserialize(e,t){const i=$.extend(n.defaults(),e);i.type=n._convertTypeToInt(e.type);i.monthDay=n._convertMonthToInt(e.monthDay);return n.create(i)}static _convertTypeToInt(e){switch(e){case"TYPE_MONTHLY":return 2;case"TYPE_WEEKLY":default:return 1}}static _convertMonthToInt(e){switch(e){case"TYPE_MONTHLY_FIRST":return 1;case"TYPE_MONTHLY_15TH":return 15;case"TYPE_MONTHLY_LAST":return 99;default:return 1}}toJson(){const e=this.$rowWrapper.find("[data-schedule-type]").val();let t=undefined;let i=undefined;if(e=="TYPE_MONTHLY"){i=this.$rowWrapper.find("[data-schedule-day-of-month]").val()}else{t=this.$rowWrapper.find("[data-schedule-day-of-week]").val()}const r=_.map(this.$rowWrapper.find("[data-schedule-time-wrapper]"),(e=>{const t=$(e).find(".time-checkbox");let i=true;if(t.exists()){i=!t.is(":disabled")&&t.is(":checked")}return{active:i,time:$(e).find("[data-schedule-time]").val()}}));return $.extend(n.defaults(),{type:e,weekDay:t,monthDay:i,scheduledTime:r})}addSchedule(t){const i=e.create(t);this.$rowWrapper.find("[data-schedule-time-container]").append(i);AGN.runAll(i);this.$rowWrapper.trigger("row:add-schedule")}removeSchedule(t){e.get(t).remove();this.$rowWrapper.trigger("row:remove-schedule")}}class r{constructor(e){this.$container=e.find("table tbody");this.$container.on("scheduler:add-day scheduler:remove-day",(()=>{const e=this.$container.find("[data-schedule-row]").length;const t=this.$container.find('[data-action="remove-day"]');const i=this.$container.find('[data-action="add-day"]');t.addClass("hidden");i.addClass("hidden");if(e>1){t.slice(0,-1).removeClass("hidden")}i.last().removeClass("hidden")}))}clean(){this.$container.find("tr[data-schedule-row]").remove()}deleteRow(e){this.deleteRowByNeedle(e.$rowWrapper)}deleteRowByNeedle(e){this.$container.find(e).remove();this.$container.trigger("scheduler:remove-day")}addRow(e){if(e){this.$container.append(e);AGN.runAll(e);this.$container.trigger("scheduler:add-day",e);e.trigger("row:add-schedule",e)}}addEmptyDayRow(){this.addRow(i.create())}addEmptyPeriodRow(){this.addRow(n.create())}getAllDayRows(){const e=this.$container.find("tr[data-schedule-row]");return _.map(e,(e=>i.get($(e))))}getAllPeriodRows(){const e=this.$container.find("tr[data-schedule-row]");return _.map(e,(e=>n.get($(e))))}getSubmissionJson(e){let t={};if(e=="day"){t=_.map(this.getAllDayRows(),(e=>e.toJson()))}else if(e=="period"){t=_.map(this.getAllPeriodRows(),(e=>e.toJson()))}return JSON.stringify(t)}}class o{constructor(e){let t=100;if(e){t=Number(e)}this.intervalPad=t}static hasCorrectInterval(e,t,i){const n=this;let r=true;i.splice(t,1);i.forEach((t=>{if(Math.abs(t-e)<n){r=false}}));return r}valid(e){const t=this.intervalPad;return e.every(o.hasCorrectInterval,t)}}AGN.Lib.ScheduleTimeTable=r;AGN.Lib.ScheduleTimeTable.DayRow=i;AGN.Lib.ScheduleTimeTable.PeriodRow=n})();(function(){const e=_.template(`\n      {{ const disabled = isDisabled ? 'disabled' : '';}}\n      <div class="col-12" data-email-list-manager-row data-action="change-trigger">\n        <div class="row g-1">\n            <div class="col">\n                <input type="text" value="{{= value}}" class="form-control" size="42" maxlength="99" {{- disabled }} />\n            </div>\n            {{ if (!isDisabled) { }}\n                <div class="col-auto">\n                     <button type="button" class="btn btn-primary btn-icon" data-action="create-email" data-email-manager-row-add>\n                        <i class="icon icon-plus"></i>\n                    </button>\n                </div>\n            {{ } }}\n        </div>\n      </div>\n  `);const t=_.template(`\n     <button type="button" class="btn btn-danger btn-icon" data-action="delete-email" data-email-manager-row-delete>\n      <i class="icon icon-trash-alt"></i>\n    </button>\n  `);class i{constructor(t,i,n){this.scope=t;this.data=i;this.options=$.extend({rowTemplate:e,rowSelector:"[data-email-list-manager-row]",addBtnSelector:"[data-email-manager-row-add]",deleteBtnSelector:"[data-email-manager-row-delete]",rowDataMapper:e=>({value:e,isDisabled:n.disabled})},n);_.each(this.data,(e=>this.#A(this.scope,e,null,this.options)))}static initialize(e,t,n){return new i(e,t,n)}createRowAfter(e){this.#A(this.scope,"",$(e),this.options)}#A(e,t,i,n){const r=n.rowTemplate(n.rowDataMapper(t));if(i&&i.exists()){i.closest(n.rowSelector).after(r)}else{e.append(r)}this.#x(e,n)}deleteRow(e){$(e).closest(this.options.rowSelector).remove();this.#x(this.scope,this.options)}getJsonData(){const e=[];_.each(this.scope.find(`${this.options.rowSelector} input`),(t=>{const i=t.value;if(i.trim()!==""){e.push(i)}}));return e}#x(e,i){const n=e.find(i.rowSelector);if(n.length===1){n.find(i.deleteBtnSelector).remove()}else{_.each(n,((e,r)=>{const o=$(e);const s=o.find(i.deleteBtnSelector);if(r!=n.length-1&&!s.exists()){o.find(".btn").replaceWith($(t({})))}}))}}}AGN.Lib.EmailsListManager=i})();(()=>{const e=AGN.Lib.Field;const i=AGN.Lib.CSRF;class n{static scrollTo(e){const t=this.#E(e);const i=this.#T(t);if(this.inHiddenTab($(_.last(e)))){this.showTab($(_.last(e)))}t.forEach(((e,t)=>this.scrollToPos($(t),e)));if(AGN.Lib.Helpers.isMobileView()&&!i?.container?.closest(".modal").exists()){const e=$(".tiles-container, .filter-overview");e.animate({scrollTop:i.pos-e.offset().top+e.scrollTop()})}}static scrollToPos(e,t){e.animate({scrollTop:t-e.offset().top+e.scrollTop()})}static inHiddenTab(e){const t=this.#D(e);return t.hasClass("hidden")&&this.#M(e).is(".navbar")}static showTab(e){const t=this.#D(e);AGN.Lib.Tab.show(this.#M(e).find(`[data-toggle-tab="#${t.attr("id")}"]`))}static#E(e){const t=new Map;_.each(e,(e=>{const i=$(e);const n=this.#D(i).get(0);const r=this.#k(i).offset().top;if(t.has(n)){if(t.get(n)>r){t.set(n,r)}}else{t.set(n,r)}}));return t}static#D(e){const t=this.#P(e);return t.exists()?e.closest(".tile-body"):e.closest(".modal-body").first()}static#P(e){return e.closest(".tiles-container > .tile, .filter-overview > .tile, .tiles-block > .tile")}static#M(e){return this.#P(e).find("> .tile-header")}static#k(e){const t=e.data("_editor")?.editor;const i=t?$(t.container):e.closest(".has-feedback");return i.exists()?i:e.parent()}static#T(e){let t;let i=Infinity;e.forEach(((e,n)=>{if(e<i){i=e;t={container:$(n),pos:e}}}));return t}}class r{constructor(e){this.group=e;this.$controls=$()}_collect(e){const t=$("[data-controls-group]");if(e==="*"){return t}if(e){return t.filter((function(){return e===$(this).attr("data-controls-group")}))}else{return $()}}collect(){if(this.group){this.$controls=this._collect(this.group).filter((function(){const e=$(this);return!e.prop("disabled")&&!e.hasClass("disabled")}))}}setDisabled(e){if(e===false){this.$controls.removeClass("disabled");this.$controls.prop("disabled",false)}else{this.$controls.addClass("disabled");this.$controls.prop("disabled",true)}}}class o{constructor(e){this.$form=e;this.form=e[0];this._abort=null;this._data={};this._dataNextRequest={};this.fields=[];this.validatorName=null;this.validatorOptions=null;this.dirtyChecking=e.is("[data-form-dirty-checking]");this.editable=!e.is("[data-editable]")||!!e.data("editable");this.url=e.attr("action");this.urlNextRequest=null;this.methodNextRequest=null;this.method=e.attr("method");this.isMultipart="multipart/form-data"==(e.attr("enctype")||"").toLowerCase();this.isCustomLoader=e.is("[data-custom-loader]");this.controlsToDisable=new r(e.attr("data-disable-controls"));if(e.is("[data-custom-loader]")){this.isCustomLoader=e.attr("data-custom-loader")!=="false"}else{this.isCustomLoader=false}this.initFields();this.initValidator();this.handleFieldsMessages($("body"));if(this.dirtyChecking){this.#R(e)}if(!this.editable){e.find(":input").prop("disabled",true)}}#R(e){e.dirty({preventLeaving:true,leavingMessage:t("grid.layout.leaveQuestion")});window.onbeforeunload=()=>{if(!e.dirty("isDirty")===true){AGN.Lib.Loader.show()}}}static get(e){const t=o.getWrapper(e);let i=t.data("_form");if(!i){const e=t.data("form");const n=AGN.Opt.Forms[e]||AGN.Lib.Form;i=new n(t);t.data("_form",i)}return i}static getWrapper(e){let t=$(e.data("form-target"));if(!t.exists()){if(e.attr("form")){t=$(`#${e.attr("form")}`)}if(!t.exists()){t=e.closest("form")}}return t}valid(e){const t=$.Event("validation");e=_.merge({},this.validatorOptions,e);this.$form.trigger(t,e);if(t.isDefaultPrevented()){return false}const i=_.every(this.fields,(e=>e.valid()));if(this.validatorName){const t=AGN.Lib.Validator.get(this.validatorName);if(t){return t.valid(this,e,i)}}return i}validate(e){if(this.valid(e)){this.cleanFieldFeedback();return true}else{this.handleErrors();return false}}validateField(e){this.cleanFieldFeedback(e);const t=this.fields.find((t=>t.isInitializedFor(e)));if(t&&!t.valid()){this.#I(t.errors())}}get$(){return this.$form}getAction(){if(this.urlNextRequest){const e=this.urlNextRequest;this.urlNextRequest=null;return e}return this.url}setActionOnce(e){this.urlNextRequest=e}setMethodOnce(e){this.methodNextRequest=e}getMethod(){if(this.methodNextRequest){const e=this.methodNextRequest;this.methodNextRequest=null;return e}return this.method}errors(){let e=this.fields.map((e=>e.errors())).flat();if(this.validatorName){const t=AGN.Lib.Validator.get(this.validatorName);if(t){e=e.concat(t.errors(this,this.validatorOptions))}}return e}setValue(e,t){const i=this.form[e];if(typeof i==="object"){const e=$(i);if(e.is("select")){AGN.Lib.Select.get(e).selectValue(t)}else{e.val([t])}e.trigger("change")}else{if(typeof t==="undefined"){delete this._data[e]}else{this._data[e]=t}}}setValueOnce(e,t){if(typeof t==="undefined"){delete this._dataNextRequest[e]}else{this._dataNextRequest[e]=t}}getValue(e){const t=this.form[e];if(typeof t==="object"){return t.value}else{return this._data[e]}}getValues(e){const t=this.form[e];if(t instanceof NodeList){return Array.from(t,(e=>e.value))}return[this.getValue(e)]}data(){if(this.isMultipart){const e=new FormData;const t=this.$form.serializeFormDataObject();$.each(this._data,((e,i)=>{if(!t.hasOwnProperty(e)){t[e]=i}}));$.each(this._dataNextRequest,((e,i)=>{t[e]=i}));$.each(t,((t,i)=>{if($.isArray(i)){$.each(i,((i,n)=>{e.append(t,n)}))}else{e.append(t,i)}}));return e}else{return _.merge({},this._data,this.$form.serializeObject(),this._dataNextRequest)}}params(){return $.param(this.data(),true)}jqxhr(){const e=this;const t=$.ajaxSettings.xhr();const i=$.Deferred();this.$form.trigger("form:submit");const n={url:this.getAction(),method:this.getMethod(),loader:this.loader(),xhr:function(){return t}};if(this.isMultipart){n.data=this.data();n.enctype="multipart/form-data";n.processData=false;n.contentType=false}else{n.data=this.params()}if(this.isCustomLoader){const i=function(t){let i=true;if(t.lengthComputable){i=(t.loaded/t.total*100).toFixed(1)}e.$form.trigger("form:progress",{loaded:t.loaded,total:t.total,progress:i})};if("upload"in t){n.xhr=function(){t.upload.onprogress=i;return t}}else{n.xhrFields={onprogress:i}}}if(typeof t.abort==="function"){this._abort=function(){t.abort()}}const r=$.ajax(n);this._dataNextRequest={};this.setLoaderShown(true);i.always((function(){e.setLoaderShown(false)}));r.done((function(e){const t=$(e).all('[data-form="polling"]');if(t.exists()){const n=o.get(t).jqhxr();n.done((function(){i.resolve.apply(this,arguments);const t=$("<div></div>");t.html(e);t.find('script[data-message][type="text/html"]').appendTo($("body"));t.find('script[data-message][type="text/javascript"]').each((function(){try{eval.call(window,$(this).html())}catch(e){}}));t.remove()}));n.fail((function(){i.reject.apply(this,arguments)}))}else{i.resolve(e)}}));r.fail((function(){i.reject.apply(this,arguments)}));return i.promise()}#O(){this.setLoaderShown(true);const e=this.jqxhr();e.done((e=>{this.setLoaderShown(false);this.updateHtml(e);this.$form.trigger("submitted",e);if(this.dirtyChecking){this.#N(this.$form)}}));e.fail((e=>{if(e.responseText){this.handleFieldsMessages(e.responseText)}}));return e}#N(e){const t=$("body").has(e).length===0;if(t){e.dirty("destroy")}else{e.dirty("setAsClean")}}#L(){const e=this.data();if(i.isProtectionEnabled()){e[i.getParameterName()]=i.readActualToken()}const t=$(`<form method="${this.getMethod()}" action="${this.getAction()}"></form>`);_.each(e,((e,i)=>{if(_.isArray(e)){const n=$(`<select multiple name="${i}"></select>`);_.each(e,(e=>{const t=$('<option selected="selected"></option>');t.val(e);t.appendTo(n)}));n.appendTo(t)}else{const n=$(`<input type="hidden" name="${i}"/>`);n.val(e);n.appendTo(t)}}));t.appendTo($("body"));t.submit();t.remove();this._dataNextRequest={}}#F(){const e=$.Event("submission");this.$form.trigger(e);if(!e.isDefaultPrevented()){this.$form.trigger("submitted");this._dataNextRequest={}}}#$(){const e=this.jqxhr();e.done((e=>this.$form.trigger("submitted",e)));e.fail((e=>{if(e.responseText){this.handleFieldsMessages(e.responseText)}}));return e}submit(e,t={}){_.each(this.fields,(e=>e.onSubmit()));if(this.valid(t)){this.cleanFieldFeedback()}else{this.handleErrors();return false}switch(e){case"static":return this.#L();case"confirm":return this.#$();case"event":return this.#F();default:return this.#O()}}revertAction(){}reset(){this.$form.trigger("reset");AGN.Lib.CoreInitializer.run("select",this.$form)}abort(){this.$form.trigger("form:abort");if(this._abort){this._abort();this._abort=null}}clear(){_.forEach(this.data(),((e,t)=>this.setValue(t,"")))}handleMessages(e){if(!(e instanceof $)){e=$(e)}this.handleFieldsMessages(e);const t=e.all("script[data-message]");_.each(t,(e=>$("body").append(e)))}handleFieldsMessages(e){const t=this;if(!(e instanceof $)){e=$(e)}e.all('script[data-message][type="text/html"]').each((function(){const e=$(this);t.showFieldError(e.data("message"),e.text())}))}initFields(t=$(document)){this.fields.length=0;t.all("[data-field]").each(((t,i)=>{const n=$(i);if(o.getWrapper(n).is(this.$form)){this.fields.push(e.create(n))}}))}initValidator(){this.validatorName=this.$form.data("validator");const e=this.$form.data("validator-options");this.validatorOptions=e?AGN.Lib.Helpers.objFromString(e):null}updateHtml(e){let t;if(this.$form.attr("id")){t=$(e).all(`#${this.$form.attr("id")}`)}else if(this.$form.attr("name")){t=$(e).all(`[name="${this.$form.attr("name")}"]`)}else{t=$(e).all("form")}this.$form.html(t.html());this.handleMessages(e);this.initFields();this.initValidator();AGN.Lib.Controller.init(this.$form);AGN.runAll(this.$form)}loader(){const e=this;return{show:function(){e.controlsToDisable.collect();e.controlsToDisable.setDisabled(true);e.setLoaderShown(true)},hide:function(){e.controlsToDisable.setDisabled(false);e.setLoaderShown(false)}}}setLoaderShown(e){if(this.isCustomLoader){if(e){this.$form.trigger("form:loadershow")}else{this.$form.trigger("form:loaderhide")}}else{if(e){AGN.Lib.Loader.show()}else{AGN.Lib.Loader.hide()}}}cleanFieldFeedback(e){o.cleanFieldFeedback$(e,this.$form);if(!e&&this.$form.attr("id")){const e=$(`:input[form='${this.$form.attr("id")}']`);e.each(((e,t)=>o.cleanFieldFeedback$($(t))))}}static cleanFieldFeedback$(e,t){const i=e?o.#G(e).parent():t.find(".js-form-field-feedback");_.each(i,(e=>{const t=$(e);t.removeClass("has-feedback has-alert has-success has-warning js-form-field-feedback");t.find(".form-control-feedback-message").remove();o.#B(t)}))}static#B(e){e.find(":input[name]").filter((function(){return $.trim($(this).attr("name"))})).each((function(){$(`script[data-message="${$(this).attr("name")}"][type="text/html"]`).remove()}))}static appendFeedbackMessage(e,t,i="alert"){o.#G(e).parent().append(AGN.Lib.Template.text("input-feedback",{type:i,message:t}));e.data("_editor")?.editor?.resize()}handleErrors(){this.cleanFieldFeedback();this.#I(this.errors())}#I(e){e=e.filter((e=>e.field?.exists()));_.each(e,(e=>{const t=e.field;this.markField(t);o.appendFeedbackMessage(t,e.msg)}));const t=e.map((e=>e.field));n.scrollTo(t)}cleanFieldError(e){if(this.form[e]){this.cleanFieldError$($(this.form[e]))}}cleanFieldError$(e){this.cleanFieldFeedback(e)}showFieldError(e,t,i){if(!e||!t){return}if(this.form[e]){this.showFieldError$($(this.form[e]),t,i)}else{console.warn(`Field '${e}' not found inside the form!`);AGN.Lib.Messages.alertText(t)}}showFieldError$(e,t,i){o.showFieldError$(e,t,i)}static showFieldError$(e,t,i){o.markField(e);e.closest(".js-form-field-feedback").find(".form-control-feedback-message").remove();o.appendFeedbackMessage(e,t);if(i!==true){o.scrollToField(e)}}static showFieldError(e,t){const i=Array.from(document.forms).find((t=>t[e]));if(i){this.get($(i)).showFieldError(e,t)}}markField(e,t="alert"){o.markField(e,t)}static markField(e,t="alert"){const i=o.#G(e);i.parent().addClass(`has-${t} has-feedback js-form-field-feedback`)}static#G(e){if(e.is("[data-feedback-anchor]")){return e.closest(e.data("feedback-anchor"))}const t=e.data("_editor")?.editor;if(!t||!t.container){return e}return $(t.container)}static scrollToField(e){n.scrollTo(e)}}AGN.Lib.Form=o})();(()=>{class e{constructor(e){this.$el=e;this.config=null;const t=`help_${window.helpLanguage||"en"}/${e.data("help")}`;$.get(AGN.url(t)).done((e=>{this.config=$(e);this.popover();this.show()}))}show(){this.$el.popover("show")}getConfig(e){return this.config.find(e).text().replace("<![CDATA[","").replace("]]>","")}popover(){if(!this.config){return}this.$el.popover("dispose");const e=AGN.Lib.Popover.create(this.$el,{title:this.getConfig("title"),content:this.getConfig("content"),html:true,trigger:"manual",popperConfig:{placement:"bottom-start"}});const t=$(e.tip);t.attr("tabindex",0);t.css("outline","none");let i=null;const n=()=>{i=setTimeout((()=>e.hide()),100)};const r=()=>clearTimeout(i);t.focusout(n);this.$el.focusout(n);t.focusin(r);this.$el.focusin(r);this.$el.on("shown.bs.popover",(function(){const e=t.children(".popover-content");const i=e.css("min-width");const n=e.outerWidth();e.css("min-width","100%");e.css("min-width",e.outerWidth());if(n>e.outerWidth()){e.css("min-width",i||"0px")}}))}static show(t){const i=t.data("agn:help");if(i){i.show()}else{t.data("agn:help",new e(t))}}}AGN.Lib.Help=e})();(()=>{let mobileViewThreshold=0;AGN.Lib.Helpers={paramsFromUrl:function(e){var t={};var i;if(e){i=e.indexOf("?")}else{return t}if(i==-1)return t;var n=e.substring(i+1);var r=n.split("&");for(var o=0;o<r.length;o++){var s=r[o].split("=");t[s[0]]=s[1]}return t},objFromString:function(optsAsString){var optsArray,optsSplitRegex=/,\s*(?=(?:[^'\\]*(?:\\.|'(?:[^'\\]*\\.)*[^'\\]*'))*[^']*$)/m,tupleSplitRegex=/:\s*(?=(?:[^'\\]*(?:\\.|'(?:[^'\\]*\\.)*[^'\\]*'))*[^']*$)/m,floatRegex=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,arrayRegex=/^\s?\[.*?\]$/i;opts={};if(optsAsString===""||optsAsString===undefined){return opts}optsArray=optsAsString.split(optsSplitRegex);_.forEach(optsArray,(function(opt){var tup=opt.split(tupleSplitRegex),name,value;tup=_.filter(tup);name=tup[0].replace(/^'([^]*?)'$/m,"$1");name=name.replace(/\\/,"");value=tup[1];if(typeof value==="undefined"){value=""}if(value=="true"){value=true}else if(value=="false"){value=false}else if(floatRegex.test(value)){value=parseFloat(value)}else if(arrayRegex.test(value)){value=value.replace(/\[|\]/g,"");value=value.split(/\s+/);value=_.map(value,(function(v){if(/^\'(.*?)\'$/.test(v)){return v.replace(/^\'(.*?)\'$/g,"$1")}else{return eval(v)}}))}else{value=value.replace(/^'(.*?)'$/m,"$1");value=value.replace(/\\/,"")}opts[name]=value}));return opts},disableCSSAnimations:function(){var e=$('<style class="disable-animation">* { -webkit-transition: none !important; -o-transition: none !important; transition: none !important; }</style>');$("body").append(e)},enableCSSAnimations:function(){window.setTimeout((function(){$(".disable-animation").remove()}),10)},clearFormField:function(e){var t=$("<form></form>");var i=$("<div></div>");i.insertAfter(e);t.append(e);t.get(0).reset();e.insertBefore(i);i.remove()},renameFile:function(e,t){Object.defineProperty(e,"name",{writable:true,value:t})},formatBytes:function(e,t){if(e==0)return"0 Bytes";if(e==1)return"1 Byte";if(e==-1)return"-1 Byte";var e=Math.abs(e);if(t&&t.toLowerCase()&&t.toLowerCase()=="iec"){var i=Math.pow(2,10);var n=["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]}else{var i=Math.pow(10,3);var n=["Bytes","kB","MB","GB","TB","PB","EB","ZB","YB"]}var r=Math.floor(Math.log(e)/Math.log(i));var o=e/Math.pow(i,r);if(e<0){o*=-1}if(o>=99.995||r==0){return o.toFixed(0)+" "+n[r]}else{return o.toFixed(2)+" "+n[r]}},pad:function(e,t,i){i=i||"0";var n=e+"";if(n.length<t){return new Array(t-n.length+1).join(i)+n}else{return n}},caching:function(e,t){var i=false;var n;if(arguments.length>1){e=_.bind.apply(null,Array.prototype.slice.call(arguments))}return function(){if(!i){i=true;n=e()}return n}},replaceAgnTags:function(e,t){try{return e.replace(/\[(agn[A-Z0-9_]+)(?:[^'"\]]|'.*?'|".*?")+]/g,(function(e,i){var n=$("<"+e.substring(1,e.length-1)+">")[0];if(n instanceof HTMLElement){var r=n.attributes;var o={};for(var s=0;s<r.length;s++){var a=r[s];o[a.nodeName]=a.nodeValue}return t({name:i,attributes:o},e)}return e}))}catch(e){}return e},escapeAgnTags:function(e){try{if(e){return e.replace(/\[agn[A-Z0-9]+(?:[^'"\]]|'.*?'|".*?")+]/g,(function(e){if(e.includes("'")||e.includes('"')){return _.escape(e)}else{return e}}))}}catch(e){}return e},unescapeAgnTags:function(e){try{if(e){return e.replace(/\[agn[A-Z0-9]+(?:(?!&#39;|&quot;)[^'"\]]|=\s*&#39;.*?&#39;|=\s*&quot;.*?&quot;)*]/g,(function(e){return _.unescape(e)}))}}catch(e){}return e},isDarkTheme:function(e=$("body")){const t=e.data("bs-theme");return t==="dark"||t==="dark-contrast"},isValidEmails:function(e){return e.every((e=>this.isValidEmail(e)))},isValidEmail:function(e){const t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())},isUrl:function(e){const t=/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=!$]*)$/;return t.test(e)},isNumber:e=>typeof e==="number",deepFreeze:function(e){Object.freeze(e);const t=Object.getOwnPropertyNames(e);for(const i of t){const t=e[i];if(typeof t==="object"&&t!==null&&!Object.isFrozen(t)){this.deepFreeze(t)}}return e},isMobileView:function(){if(mobileViewThreshold===0){mobileViewThreshold=parseInt($("html").css("--mobile-view-threshold"))}return $(window).width()<=mobileViewThreshold},openHelpModal:function(e="",t={}){const i=e==="manual"?t.key:$("[data-help-key]").data("help-key");$.get(AGN.url(`/support/help-center.action?helpKey=${i}`)).done((i=>{AGN.Lib.Modal.create(i);if(e){$(`[data-help-tab="${e}"]`).trigger("help-tab:open",t)}}))},getColorLuminance:function(e){if(e===undefined||e===null){return e}e=e.replace("#","");const t=parseInt(e.substring(0,2),16);const i=parseInt(e.substring(2,4),16);const n=parseInt(e.substring(4,6),16);return(.299*t+.587*i+.114*n)/255},isFilledTextNode:function(e){return e.nodeType===3&&e.nodeValue?.trim()?.length>0},containsTruncatedElements:function(e){if($(e).is("select, .select2")){return false}if($(e.parentElement).is(":truncated")){return true}if(e.childNodes&&e.childNodes.length>0){for(let t=0;t<e.childNodes.length;t++){const i=this.containsTruncatedElements(e.childNodes[t]);if(i){return i}}}return false},retrieveTextElement:function(e){if(this.isFilledTextNode(e)){return e.parentElement}if(e.childNodes&&e.childNodes.length>0){for(let t=0;t<e.childNodes.length;t++){const i=this.retrieveTextElement(e.childNodes[t]);if(i){return i}}}return null},getStatColors:function(){const e=getComputedStyle(document.documentElement).getPropertyValue("--stat-colors").trim().split(", ");return _.fromPairs(e.map((e=>e.split(" "))))},getStatColorsNames:function(){return Object.keys(this.getStatColors())},getStatColorsHexValues:function(){return Object.values(this.getStatColors())},imagesLoaded:function(e){const t=$.Deferred();const i=e.filter((function(){return this.complete?null:this}));const n=[];const r=function(){let e=true;for(let t=0;t<i.length;t++){const r=i[t];if(r){if(r.complete){$(r).off("load error");i[t]=null;n.push(r)}else{e=false}}}return e};if(!i.length){t.resolve(n)}else{for(let e=0;e<i.length;e++){$(i[e]).on("load error",(function(){if(r()){t.resolve(n)}}))}}return t}}})();(()=>{class e{constructor(e=6e4){this.cache=new Map;this.cacheDuration=e}set(e,t){const i=Date.now()+this.cacheDuration;this.cache.set(e,{data:t,expiration:i})}get(e){const t=this.cache.get(e);if(!t){return null}if(t.expiration<Date.now()){this.delete(e);return null}return t.data}clear(){this.cache.clear()}delete(e){this.cache.delete(e)}}AGN.Lib.InMemoryCache=e})();(()=>{const e=AGN.Opt.Templates;const i=_.template(e["plus-btn"]);const n=_.template(e["trash-btn"]);class r{constructor(e,t=[],i){const n=e.find("script[data-config]");this.config=n.exists()?n.json():{readonly:i,data:t};this.readonly=this.config.readonly;this.$container=e;this.rowTemplateMustache=_.template(this.rowTemplate);this.renderTable(this.config.data);this.addActions();this.$container.data("table",this);this.$container.css("--column-count",this.$container.find("tr:first").children("td").length)}static get(e){return $(e).data("table")}get rowTemplate(){if(this._rowTemplate?.length){return this._rowTemplate}this._rowTemplate=this.$container.find("[data-row-template]").html();return this._rowTemplate}get headerTemplate(){if(this._headerTemplate?.length){return this._headerTemplate}this._headerTemplate=this.$container.find("[data-input-table-header-template]").html();return this._headerTemplate}get $rowTemplate(){return $(this.rowTemplate)}renderTable(e,t=true){if(t){this.$table=$("<table>").addClass("input-table").append($("<tbody>"));if(this.readonly){this.$table.addClass("input-table--readonly")}if(this.headerTemplate){const e=$(_.template(this.headerTemplate)());if(!this.readonly){e.append("<th></th>")}this.$table.prepend($("<thead>").append(e))}this.$container.prepend(this.$table)}_.each(e,(e=>this.addRow(e)));if(!this.readonly){this.addEmptyRow()}}addActions(){const e=this;this.addAction({click:"[data-add-row]"},this.addEmptyRow.bind(this));this.addAction({enterdown:"input"},(function(){this.event.preventDefault();e.getNextInputToFocus(this.el).focus()}));this.addAction({click:"[data-delete-row]"},(function(){e.removeRow(this.el)}))}removeRow(e){e.closest("tr").remove();this.$container.trigger("input-table:row-removed")}addAction(e,t){AGN.Lib.Action.new(e,t,this.$table)}collect(e=true){let t=this.$table.find("tr").toArray();if(!e){t=t.slice(0,-1)}return t.filter((e=>!this.isEmptyRow$($(e)))).map((e=>this.getRowData($(e))))}getRowData(e){return e.find(":input[data-name]").toArray().reduce(((e,t)=>{e[$(t).data("name")]=this.getInputVal($(t));return e}),{})}getInputVal(e){if(e.is(":checkbox")){return e.is(":checked")}return e.val()?.trim()}addRow(e){if(!this.isUniqueRow(e)){return}const t=$(this.rowTemplateMustache(e));if(!this.readonly){const i=this.generateRowBtn(e);t.append($("<td>").html(i))}this.$table.append(t);AGN.runAll(t);AGN.Lib.Form.get(this.$table).initFields()}getNextInputToFocus(e){const t=e.closest("tr");if(this.isEmptyRow$(t)){return t.find(':input[type="text"]:first')}const i=t.find(':input[type="text"]');const n=i.index(e);let r=i.eq(n+1);if(r.length){return r}r=t.next().find(':input[type="text"]:first');if(r.length){return r}this.addEmptyRow();return this.$table.find('tbody tr:last input[type="text"]:first')}generateRowBtn(e){return this.#H(e)?this.generateAddBtn():this.generateDeleteBtn()}generateAddBtn(){return i({attrs:`data-add-row data-tooltip='${t("defaults.add")}'`})}generateDeleteBtn(){return n({attrs:`data-delete-row data-tooltip='${t("defaults.clear")}'`})}#H(e){return this.getRowEntries(e).every((([,e])=>this.#z(e)))}getNames(){return this.$rowTemplate.find("[data-name]").toArray().map((e=>$(e).data("name")))}getRowEntries(e){const t=this.getNames();return Object.entries(e).filter((([e])=>t.includes(e)))}isEmptyRow$(e){return _.every(e.find(':input:not([type="hidden"])'),(e=>{const t=$(e);return t.prop("disabled")||this.#z(t.val())}))}#z(e){return e===null||e===undefined||String(e).trim()===""}addEmptyRow(){const e=this.$table.find("tbody tr:last");if(!e.length||!this.isEmptyRow$(e)){this.replaceNewButtonWithDeleteButton();this.addRow(this.getNames().reduce(((e,t)=>{e[t]="";return e}),{}))}this.focusOnLastRow()}focusOnLastRow(){this.$table.find("tbody tr:last input:first").focus()}isUniqueRow(e){if(this.#H(e)){return true}const t=this.getRowEntries(e);return!this.$table.find("tbody tr").toArray().some((e=>t.every((([t,i])=>$(e).find(`[data-name="${t}"]`).val()===i))))}replaceNewButtonWithDeleteButton(){const e=this.$table.find("[data-add-row]");const t=$(this.generateDeleteBtn());e.after(t);e.remove();AGN.Lib.CoreInitializer.run("tooltip",t)}#W(){const e=$(this.generateAddBtn());this.$table.find("[data-delete-row]:last").after(e).remove();AGN.Lib.CoreInitializer.run("tooltip",e)}removeLastRow(){if(this.$container.find("tbody tr").length>1){this.$container.find("tbody tr:last").remove();this.#W()}}clean(){this.$table.find("tbody tr").remove();this.addEmptyRow()}update(e){this.$table.find("tbody tr").remove();this.renderTable(e,false)}get readonlyAttr(){return this.readonly?"readonly":""}}AGN.Lib.InputTable=r})();(()=>{class e{static DATA_KEY="agn:load";constructor(t){this.el=t;this.url=t.data("load");this.interval=parseInt(t.data("load-interval"));this.target=t.data("load-target");if(this.interval){this._interval=window.setInterval((()=>this.load()),this.interval)}this.el.removeAttr("data-load");this.el.data(e.DATA_KEY,this)}stop(){window.clearInterval(this._interval)}load(){if(this.loading){return}this.loading=true;$.get(this.url).always((()=>{if(this.interval){this.loading=false}})).done((e=>{const t=$(e);if(t.all("[data-load-stop]").exists()){this.stop()}let i;if(!this.target){i=e}else if(this.target=="body"){i=/<body[^>]*>((.|[\n\r])*)<\/body>/im.exec(e)[1]}else{i=t.all(this.target)}if(this.el.is("[data-load-replace]")){this.el.replaceWith(i);this.el=i}else{this.el.html(i)}AGN.Lib.Controller.init(this.el);AGN.runAll(this.el)})).fail((()=>this.stop))}static load(t){const i=e.get(t);if(i){i.load();return}if(t.is(":hidden")){return}new e(t).load()}static get(t){return t.data(e.DATA_KEY)}}AGN.Lib.Load=e})();(()=>{const e="#main-loader";let t,i=0,n=false;class r{static show(){window.clearTimeout(t);if(!n){i+=1;$(e).removeClass("hidden")}else{n=false}}static hide(){i-=1;if(i<=0){t=window.setTimeout((()=>$(e).addClass("hidden")),5);i=0}}static prevent(){n=true}}AGN.Lib.Loader=r})();(function(){const e=AGN.Lib.Form;class t extends e{constructor(e){super(e);AGN.Lib.Loader.show();this.submit()}jqxhr(){const e=$.Deferred();this.$form.trigger("form:submit");window.setTimeout((()=>{$.ajax({url:this.url,method:this.method,data:this.params(),loader:this.loader()}).done((function(t){e.resolve.apply(this,arguments)}))}),parseInt(this.$form.data("polling-interval")));return e.promise()}submit(){const e=this.jqxhr();e.done((e=>this.updateHtml(e)));return e}updateHtml(e){const t=$(e).all('[data-form="loading"]');if(t.exists()){this.$form.html(t.html());AGN.runAll(this.$form);this.submit()}else{AGN.Lib.Loader.hide();AGN.Lib.Modal.getInstance(this.$form)?.hide();AGN.Lib.Page.render(e)}}}AGN.Lib.LoadingForm=t;AGN.Opt.Forms["loading"]=t})();(()=>{const Messages=function(e,t,i,n,r){const o={timeout:{success:3e3,warning:15e3,alert:6e4}};if(!i){i="info"}const s=o["timeout"][i||"info"]||0;if(findMessagesWithSameContent(e,t).length){return}const a=toastr[i](e,t,{timeOut:s,extendedTimeOut:s,onCloseClick:n,newestOnTop:r});AGN.Lib.Controller.init(a);AGN.runAll(a)};const findMessagesWithSameContent=function(e,t){return $(".popup-tab:not(.arrow)").filter(((i,n)=>{const r=$(n).data("options");return e===r.title&&t===r.message}))};const displayMessages=function(e,t,i){t.forEach((t=>Messages(e,t,i)))};const JsonMessages=function(e,i=false){if(i){_.each($(".popup"),(e=>$(e).remove()))}if(e){if(e.success){displayMessages(t("defaults.success"),e.success,"success")}if(e.warning){displayMessages(t("defaults.warning"),e.warning,"warning")}if(e.alert){displayMessages(t("defaults.error"),e.alert,"alert")}e.fields?.forEach((e=>{AGN.Lib.Form.showFieldError(e.name,e.message)}))}};const RenderMessages=function($resp){$resp.all('script[data-message][type="text/html"]').appendTo($(document.body));$resp.all('script[data-message][type="text/javascript"]').each((function(){try{eval($(this).html())}catch(e){console.debug(e)}}))};Messages.success=function(e,...i){Messages.successText(t(e,...i))};Messages.successText=function(e){Messages(t("defaults.success"),e,"success")};Messages.alert=function(e,...i){Messages.alertText(t(e,...i))};Messages.alertText=function(e){Messages(t("defaults.error"),e,"alert")};Messages.warn=function(e,...i){Messages.warnText(t(e,...i))};Messages.warnText=function(e){Messages(t("defaults.warning"),e,"warning")};Messages.info=function(e,...i){Messages.infoText(t(e,...i))};Messages.infoText=function(e){Messages(t("defaults.info"),e,"info")};Messages.defaultSaved=function(){Messages.success("defaults.saved")};Messages.defaultError=function(){Messages.alert("defaults.error")};AGN.Lib.Messages=Messages;AGN.Lib.JsonMessages=JsonMessages;AGN.Lib.RenderMessages=RenderMessages})();(function(){var e={};function t(t){var i="key#"+t;var n=e[i];var r=Array.prototype.slice.call(arguments,1);if(n){e[i]=n.filter((function(e){return e.apply(this,r)!==false}))}}function i(t,i){var n="key#"+t;if($.isFunction(i)){if(!e[n]){e[n]=[]}e[n].push(i)}else{console.error("Callback must be a function")}}function n(t,i){if(arguments.length){var n="key#"+t;if(arguments.length>1){e[n]=e[n].filter((function(e){return e!==i}))}else{e[n]=[]}}}AGN.Lib.Messaging={send:t,subscribe:i,unsubscribe:n}})();(()=>{class e{static create(e,t){let i=null,n;if(e instanceof $){n=e}else{n=$(e)}const r=n.filter(".modal");const o=n.filter("script");if(r.exists()){i=$(r[0]);i.data("_modal",t);o.each((function(){$(this).appendTo(i)}));new bootstrap.Modal(i,{focus:false}).show();AGN.Lib.RenderMessages(n);AGN.Lib.Controller.init(i);AGN.runAll(i)}else{AGN.Lib.RenderMessages(n)}return i}static fromTemplate(t,i={}){return e.create(AGN.Lib.Template.text(t,i),i)}static get(t){const i=e.getWrapper(t);return i.data("_modal")}static getWrapper(e){return e.closest(".modal")}static getInstance(t){const i=e.getWrapper(t);return bootstrap.Modal.getInstance(i)}}AGN.Lib.Modal=e})();(function(){var e=AGN.Lib.Confirm,t={};function i(e){if(e){e=e.toUpperCase();switch(e){case"CONNECT":case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"POST":case"PUT":return e}}return"GET"}t.render=function(i,n){if(/<\s*\/\s*body\s*>/i.test(i)){var r=new DOMParser;var o=r.parseFromString(i,"text/html");if(n!==false&&o.head){var s=$(o.head).data("origin-uri");if(s){n=s}}if(n){window.history.pushState({},"",n)}var a=$(document).scrollTop();setTimeout((function(){AGN.Lib.Controller.init();AGN.runAll();$(document).scrollTop(a)}),100);document.body=o.body;document.title=o.title;var l=$(document.body);l.find("script").each((function(e,t){var i=$(t);if(i.attr("src")){var n=$("<script><\/script>");$.each(t.attributes,(function(){if(this.specified){n.attr(this.name,this.value)}}));try{n.appendTo(l)}catch(e){console.debug(e)}}else if(i.attr("type")=="text/javascript"){try{eval.call(window,i.html())}catch(e){console.debug(e)}}}))}else{var c=$(i);var d=c.filter(".modal");if(d.exists()){var u=$.Deferred();AGN.Lib.RenderMessages(c);e.create(c);u.resolve(e.get(c));return u.promise()}else{d=c.all("script[data-load]");if(d.exists()){return t.reload(d.data("load"),true).done((function(){AGN.Lib.RenderMessages(c)}))}else{AGN.Lib.RenderMessages(c)}}}};t.reload=function(e,n,r){if(n){e=e||window.location.href;var o=$.Deferred();$.ajax(e,{method:i(r)}).done((function(i){var n=t.render(i,e);if(n){n.done(o.resolve).fail(o.reject)}else{o.resolve()}})).fail((function(){o.reject()}));return o.promise()}else{if(e&&e!=window.location.href){window.location.assign(e)}else{window.location.reload(true)}return null}};AGN.Lib.Page=t})();(function(){class e{static policyMap=new Map;static findPasswordPolicy(t){if(e.policyMap.has(t)){return e.policyMap.get(t)}return["password.error.generic_error"]}static registerPolicy(t,i){e.policyMap.set(t,i)}}e.registerPolicy("LENGTH_8_MIXED",(e=>{const t=[];if(e.length<8){t.push("password.error.too_short_min8")}if(!e.match("[a-z]")){t.push("password.error.no_lower_case")}if(!e.match("[A-Z]")){t.push("password.error.no_upper_case")}if(!e.match("[0-9]")){t.push("password.error.no_digits")}if(!e.match("[^a-zA-Z0-9]")){t.push("password.error.no_special")}return t}));e.registerPolicy("LENGTH_12_SIMPLE",(e=>e.length<12?["password.error.too_short_min12"]:null));e.registerPolicy("WEBSERVICE",(e=>e.length<32?["password.error.too_short_min32"]:null));AGN.Lib.PasswordPolicies=e})();(function(){const e=AGN.Lib.Page;const t=AGN.Lib.Form;class i extends t{constructor(e){super(e)}jqhxr(){var e=this,t=$.Deferred();this.$form.trigger("form:submit");window.setTimeout((function(){var i=$.ajax({url:e.url,method:e.method,data:e.params(),loader:e.loader()});i.done((function(i){var n=$(i);var r=n.all('[data-form="polling"]');if(r.length==1){e.$form.data("polling-interval",r.data("polling-interval"));e.jqhxr().done((function(){t.resolve.apply(this,arguments)}))}else{t.resolve.apply(this,arguments)}}))}),parseInt(this.$form.data("polling-interval")));return t.promise()}submit(){var e,t=this;AGN.Lib.Loader.show();e=this.jqxhr();e.done((function(e){AGN.Lib.Loader.hide();t.updateHtml(e)}));return e}updateHtml(t){var i,n=$(t),r=this.$form.data("render");if(r=="page"){e.render(t)}else{if(this.$form.attr("id")){i=n.all("#"+this.$form.attr("id"))}else if(this.$form.attr("name")){i=n.all('[name="'+this.$form.attr("name")+'"]')}else{i=n.all("form")}setTimeout((function(){AGN.Lib.Controller.init();AGN.runAll()}),100);this.handleMessages(t);this.$form.replaceWith(i)}}}AGN.Lib.PollingForm=i;AGN.Opt.Forms["polling"]=i})();(e=>{const t=function(t,i){const n=e(t.tip);const r=e(i);const o=e(window).scrollTop();const s=e(window).outerHeight();const a=r.outerHeight();const l=r.offset().top-o;const c=l+a;if(n.outerHeight()<=l){return"top"}return s-c>l?"bottom":"top"};const i=(t,i)=>{const n=e(i).outerWidth();if(t.placement==="bottom-end"){return[-n,0]}if(t.placement==="bottom-start"){return[n,0]}return[0,0]};class n{static instances=[];static MARKER_ATTR_NAME="agn-popover";static getOrCreate(e,t){return this.get(e)||this.create(e,t)}static create(r,o){if(r.length!==1){return false}const s={trigger:"hover",container:"body",animation:false,content:r.text(),placement:t,popperConfig:{onFirstUpdate:t=>{const i=e(t.elements.popper);if(i.exists()){new AGN.Lib.Scrollbar(i,{wheelSpeed:.2})}}},offset:i};const a=new bootstrap.Popover(r[0],_.merge(s,o));this.instances.push(a);r.attr(n.MARKER_ATTR_NAME,"");return a}static get(e){if(e.length!==1){return null}const t=bootstrap.Popover.getInstance(e);if(t){return t}const i=e.closest("div.popover");if(i.length){return bootstrap.Popover.getInstance(i)}}static remove(e){this.#V(this.get(e));return true}static hide(e){this.get(e)?.hide()}static validate(){_.each(Array.from(this.instances),(t=>{if(t._element&&!e.contains(document.body,t._element)){this.#V(t)}}))}static#V(t){const i=this.instances.indexOf(t);if(i!==-1){this.instances.splice(i,1)}if(t){e(t._element).removeAttr(n.MARKER_ATTR_NAME);t.dispose()}}static isShown(e){return!!e?.tip}static toggleState(t,i=true){t.all(`[${n.MARKER_ATTR_NAME}]`).each((function(){const t=AGN.Lib.Popover.get(e(this));if(i){t.enable()}else{t.disable()}}))}}AGN.Lib.Popover=n})(jQuery);(()=>{class e{static init(t){const i=AGN.Lib.Storage.get(e.#m(t));if(!i){return}t.find(`input[value="${i.type}"]`).prop("checked",true);e.#j(t)}static toggle(t){e.#j(t);AGN.Lib.Storage.set(e.#m(t),{type:t.find("input:checked").val()})}static#j(e){const t=e.find('input[type="radio"]:checked').val();const i=t==="preview";const n=t==="visual-list";const r=$(e.data("preview-table"));r.toggleClass("table--preview",i);r.toggleClass("table--visual-list",n);AGN.Lib.Popover.toggleState(r,!i&&!n)}static#m(e){return`table-type-${e.data("preview-table")}`}}AGN.Lib.PreviewTable=e})();(()=>{const e=AGN.Lib.Form;const t=AGN.Lib.Page;class i extends e{constructor(e){super(e);this.resourceSelector=e.data("resource-selector")}getResourceSelector(){if(this.resourceSelectorNextRequest){const e=this.resourceSelectorNextRequest;this.resourceSelectorNextRequest=null;return e}return this.resourceSelector}setResourceSelectorOnce(e){this.resourceSelectorNextRequest=e}updateHtml(e){const i=this.getResourceSelector();if(i){const n=$(e);const r=$(i);const o=n.all(i);if(r.length===1&&o.length===1){let e=false;if(r[0]==this.$form[0]||$.contains(r[0],this.$form[0])){e=true}r.html(o.html());this.handleMessages(n);if(e){this.initFields();this.initValidator()}AGN.Lib.Controller.init(r);AGN.runAll(r)}else{t.render(e);this.handleFieldsMessages(e)}}else{t.render(e);this.handleFieldsMessages(e)}}}AGN.Lib.ResourceForm=i;AGN.Opt.Forms["resource"]=i})();(()=>{class e{static DATA_KEY="agn:perfect-scrollbar";static MARKER_ATTR_NAME="agn-scrollbar";static INSTANCES=[];constructor(t,i={}){this.$el=t;this.scrollbar=new PerfectScrollbar(t[0],_.extend(this.options,i));t.attr(e.MARKER_ATTR_NAME,"");t.data(e.DATA_KEY,this);e.INSTANCES.push(this)}get options(){return{wheelSpeed:1,wheelPropagation:false,minScrollbarLength:30}}destroy(){this.scrollbar.destroy();this.$el.data(e.DATA_KEY,null);this.$el.removeAttr(e.MARKER_ATTR_NAME);delete e.INSTANCES[this]}update(){this.scrollbar.update()}static get(t,i=true){const n=t.data(e.DATA_KEY);if(!i){return n}return n||t.closest(`[${e.MARKER_ATTR_NAME}]`).data(e.DATA_KEY)}static updateAll(){e.INSTANCES.forEach((e=>e.update()))}}AGN.Lib.Scrollbar=e})();(function(){const e=AGN.Lib.Form;class t extends e{constructor(e){super(e)}updateHtml(e){const t=$(e).find("[data-form-content]");const i=this.$form.is("[data-form-content]")?this.$form:this.$form.find("[data-form-content]");i.html(t.html());this.handleMessages(e);this.initFields(i);AGN.Lib.Controller.init(i);AGN.runAll(i);i.trigger("scrollTo",i)}}AGN.Lib.SearchForm=t;AGN.Opt.Forms["search"]=t})();(()=>{class e{static DATA_KEY="agn:select";constructor(e){this.$select=e;this.select=e[0];this.api=this.$select.data("select2")}static get(t){const i=t;const n=i.data(e.DATA_KEY)||new e(i);i.data(e.DATA_KEY,n);return n}get $el(){return this.$select}values(){return _.map(this.$select.find("option"),(e=>$(e).val()))}hasOption(e){return this.values().indexOf(e)!==-1}clear(){this.selectValue("");return this}toggleDisabled(e){this.$select.prop("disabled",e)}selectNext(){const e=this.values();const t=this.getSelectedValue();const i=e.indexOf(t)+1;if(i<e.length){this.selectValue(e[i])}}selectValue(e){this.$select.val(e).trigger("change.select2");if(this.isMultiple()){this.#U()}}#U(){this.#Y(this.$select)}#Y(e){AGN.Lib.CoreInitializer.run("select",e)}isMultiple(){return this.$select.is("[multiple]")}unselectValue(e){const t=this.$select.val().filter((t=>t!==e));this.selectValue(t)}getFirstValue(){return this.$select.find("option:not(:disabled):first").val()}selectFirstValue(){this.selectValue(this.getFirstValue())}selectValueOrSelectFirst(e){const t=this.values();if(!_.isArray(e)){e=[e]}const i=_.every(e,(e=>t.indexOf(e+"")!=-1));if(i&&e.length!=0){this.selectValue(e)}else{this.selectFirstValue()}}resetOptions(){this.$select.empty()}setOptions(e){const t=_.reduce(e,((e,t)=>{e+=`<option value="${t.id}">${t.text}</option>`;return e}),"");this.$select.html(t)}addFormattedOption(e){this.$select.append(e)}getSelectedValue(){return this.$select.val()||""}addOption(e,t=e){this.$select.append($("<option>",{value:e,text:t}))}addOptionIfMissing(e,t=e){if(this.hasOption(e)){return}this.addOption(e,t)}selectOptions(e){e.forEach((e=>this.selectOption(e)))}selectOption(e){this.$findOption(e).prop("selected",true);this.$select.trigger("change.select2")}isOptionSelected(e){return this.$findOption(e).prop("selected")}$findOption(e){return this.$select.find(`option[value="${e}"`)}getSelectedText(){return this.$select.find("option:selected").text()}disableOptions(e=[],t){const i=this.$select.val();this.$select.find("option").prop("disabled",false);this.$select.find(`option${t?"":":not(:selected)"}`).filter(((t,i)=>e.includes($(i).val()))).each(((e,t)=>$(t).prop("disabled",true)));if(t&&!this.isMultiple()&&e.includes(i)){this.selectFirstValue()}this.$select.trigger("change.select2")}disableOption(e,t){this.disableOptions([e],t)}setReadonly(e){if(e){this.$select.attr("readonly","readonly")}else{this.$select.removeAttr("readonly")}}remove(){this.$select.next(".select2").remove();this.$select.remove();return this}replaceWith(e){this.$select.before(e);this.remove();if(e.is("select")){this.#Y(e)}return this}get $selectedOption(){return this.$findOption(this.$select.val())}}AGN.Lib.Select=e})();(function(){const e=AGN.Lib.Form;class t extends e{constructor(e){super(e)}jqxhr(){return this.form.submit()}submit(){if(!this.valid()){this.handleErrors();return false}const e=_.merge({},this._data,this._dataNextRequest);this.$form.trigger("form:submit");AGN.Lib.CSRF.updateTokenInDOM(this.$form);_.each(e,((e,t)=>{const i=$(`<input type="hidden" name="${t}"/>`);i.val(e);i.appendTo(this.$form)}));this._dataNextRequest={};this.$form.submit();return $.Deferred().promise()}}AGN.Lib.StaticForm=t;AGN.Opt.Forms["static"]=t})();(function(e){var t,i,n,r,o,s,a,l;l=function(e){function t(e,t,i){var n,r;if(i){n=new Date;n.setTime(n.getTime()+i*24*60*60*1e3);r="; expires="+n.toGMTString()}else{r=""}document.cookie=e+"="+t+r+"; path=/"}function i(i){i=JSON.stringify(i);if(e=="session"){window.name=i}else{t("localStorage",i,365)}}function n(){if(e=="session"){window.name=""}else{t("localStorage","",365)}}function r(){var t=e=="session"?window.name:s("localStorage");try{return JSON.parse(t)}catch(e){console.warn("Could not parse storage data: "+t+" cause: "+e)}return{}}var o=r();return{length:0,clear:function(){o={};this.length=0;n()},getItem:function(e,t){if(t===true){var i=r();return i[e]===undefined?null:i[e]}else{return o[e]===undefined?null:o[e]}},key:function(e){var t=0;for(var i in o){if(t==e)return i;else t++}return null},removeItem:function(e){delete o[e];this.length--;i(o)},setItem:function(e,t){o[e]=t+"";this.length++;i(o)}}};s=function(e){var t=e+"=",i=document.cookie.split(";"),n,r;for(n=0;n<i.length;n++){r=i[n];while(r.charAt(0)==" "){r=r.substring(1,r.length)}if(r.indexOf(t)==0){return r.substring(t.length,r.length)}}return null};try{if(!window.localStorage){a=new l("local")}else{a=window.localStorage}}catch(e){a=new l("local")}t=function(e){try{var t=a.getItem(p(e));if(t){return JSON.parse(t)}}catch(t){console.warn("Could not get Storage key: "+e+" cause: "+t)}return undefined};i=function(e,t){try{t=JSON.stringify(t);a.setItem(p(e),t)}catch(i){console.warn("Could not set Storage key:value "+e+":"+t+" cause: "+i)}};n=function(e){try{a.removeItem(p(e))}catch(t){console.warn("Could not remove Storage key:"+e+" cause: "+t)}};r=function(t){t.each((function(){var t=e(this);if(t.is("[data-stored-field]")&&(t.is("input")||t.is("select"))){c(t)}else{t.find("[data-stored-field]").each((function(){c(e(this))}))}}))};o=function(t){var i=false;t.each((function(){var t=e(this);if(t.is("[data-stored-field]")&&(t.is("input")||t.is("select"))){if(d(t)){i=true}}else{t.find("[data-stored-field]").each((function(){if(d(e(this))){i=true}}))}}));return i};function c(e){var t=e.data("stored-field")|"";var n=e.prop("name");if(n!=undefined){var r=undefined;if(e.prop("type")=="checkbox"){r=e.is(":checked")}else if(e.is("input")||e.is("select")){r=e.val()}if(r!=undefined){i(h(n,t),r)}}}function d(n){var r=n.data("stored-field")|"";var o=false;var s=n.prop("name");if(s!=undefined){var a=n.prop("type")||n.prop("type");var l=t(h(s,r));if(l===undefined){l=t(u(s,r));if(l===undefined){return false}i(h(s,r),l)}if(a=="radio"){if(n.val()!==l&&n.is(":checked")){n.prop("checked",false);return true}else if(n.val()==l&&!n.is(":checked")){n.prop("checked",true);return true}}else if(a=="checkbox"){if(n.prop("checked")!==l){n.prop("checked",l);o=true}}else if(a=="select-one"){var c=false;n.find("option").each((function(){if(e(this).val()==l){c=true;return false}}));if(c&&n.val()!==l){n.val(l).change();o=true}}else if(a=="select-multiple"){var d=[];var p=n.value();n.find("option").each((function(){var t=e(this);e.each(l,(function(e,i){if(t.val()==i){d.push(i)}}))}));d.sort();p.sort();var f=true;if(d.length!=p.length)f=false;for(var g=0;g<d.length;++g){if(d[g]!==p[g])f=false}if(!f){n.val(d).change();o=true}}else if(a=="textarea"||a=="text"){if(n.val()!==l){n.val(l);o=true}}}return o}function u(e,t){var i="stored_field_";if(e){i=i+e}if(t){i=i+"_"+t;return i}return undefined}function h(e,t){var i=u(e,t);if(i){return p(i)}else{return i}}function p(e){if(window.adminId){return window.adminId+"-"+e}return e}AGN.Lib.Storage={get:t,set:i,delete:n,readCookie:s,saveChosenFields:r,restoreChosenFields:o}})(jQuery);(()=>{const e=AGN.Lib.Storage;class t{static init(t){const i=t.data("toggle-tab");const n=e.get(this.#m(t,i))||{};const r=$(i);if(typeof r.data("tab-show")!=="undefined"){n.hidden=false;r.data("tab-show",undefined)}if(typeof r.data("tab-hide")!=="undefined"){n.hidden=true;r.data("tab-hide",undefined)}if(n.hidden===false||n.hidden!==true&&r.is(":visible")){this.show(t)}}static show(e){const t=e.data("toggle-tab");const i=e.parents("ul").find("[data-toggle-tab]").not(e);const n=$(t);const r=e.find(".tab-toggle");const o=$(e.data("extends-tab"));_.each(i,(e=>this.hide($(e))));e.addClass("active");e.closest("nav").find(".btn-header-tab.active > span").text(e.text());r.removeClass("icon-angle-down").addClass("icon-angle-up");n.removeClass("hidden");o.removeClass("hidden");n.trigger("tile:show");this.#q(e,t,false);AGN.Lib.CoreInitializer.run("load",n)}static hide(e){const t=e.data("toggle-tab");const i=e.find(".tab-toggle");e.removeClass("active");i.removeClass("icon-angle-up").addClass("icon-angle-down");$(t).addClass("hidden");$(t).trigger("tile:hide");this.#q(e,t,true)}static toggle(e){const t=$(e.data("toggle-tab"));if(t.is(":visible")){this.hide(e)}else{this.show(e)}}static#q(t,i,n){if(t.attr("data-store-tab-state")==="false"){return}e.set(this.#m(t,i),{hidden:n})}static#m(e,t){const i="toggle_tab";const n=e.data("tab-group");if(n){return`${i}/${n}`}return i+t}}AGN.Lib.Tab=t})();(()=>{class e{static DATA_ATTR_NAME="agn:table-manager-col";constructor(t){this.$th=t;this.$td=this.#K();this._name=t.data("table-column");this.#X();this.#Z();this.$th.data(e.DATA_ATTR_NAME,this)}static get(t){return t.data(e.DATA_ATTR_NAME)}get name(){return this._name}get permanent(){return!this.name}get text(){return this.$th.children().first().text().trim()}toggleMode(){this.$controls.toggleClass("hidden");this.$controls.prev().toggleClass("hidden")}toggle(e=false){this.$th.toggleClass("hidden",e);this.$td.toggleClass("hidden",e)}isHidden(){return this.$th.hasClass("hidden")}#Z(){const e=AGN.Lib.Template.dom("deletable-table-column",{text:this.text,permanent:this.permanent});this.$th.append(e);this.$controls=e}#K(){const e=this.$th.index()+1;return this.$th.closest("table").find(`td:nth-child(${e})`)}#X(){if(this.$th.contents().length===1){$(this.$th.contents()[0]).wrap("<span></span>")}}}class i{static DATA_ATTR_NAME="agn:table-column-manager";static SELECTOR="[data-table-column-manager]";static MAX_SELECTED_COLUMNS=8;constructor(t){this.$el=t;const n=t.find("[data-table-column-manager-config]");this.config=n.exists()?n.json():{};this.$btn=t.find("[data-manage-table-columns]");this.$columnPickerCell=t.find("th.columns-picker");this._editModeEnabled=false;this.columns=t.find("[data-table-column]").map((function(){return new e($(this))})).get();this.#Q();this.#J();if(this.config.editMode){this.toEditMode();this.$columnPicker.find("> .icon-btn").trigger("click")}this.#ee();t.data(i.DATA_ATTR_NAME,this)}static get(e){return e.closest(i.SELECTOR).data(i.DATA_ATTR_NAME)}toEditMode(){this.#te();this._columnsBeforeEdit=this.#ie()}applyChanges(){this.#te();this.$el.trigger($.Event("table-column-manager:apply"),{columns:this.#ne()})}discardChanges(){if(!this.isInEditMode()){return}this.columns.forEach((e=>e.toggle(!this._columnsBeforeEdit.includes(e))));this.#te()}removeColumn(t){const i=e.get(t);this.#re(i);AGN.Lib.CoreInitializer.run(["table-cols-resizer","table"],this.$el)}isInEditMode(){return this._editModeEnabled}#ee(){const e=this.#ie();if(e.length<=i.MAX_SELECTED_COLUMNS){return}const t=e.length-i.MAX_SELECTED_COLUMNS;const n=this.#ne();for(let e=0;e<t;e++){const t=this.#oe(n[e]);this.#re(t)}}#re(e){AGN.Lib.Select.get(this.$columnSelect).unselectValue(e.name);e.toggle(true)}#se(){return this.columns.filter((e=>!e.permanent))}#ne(){return this.#se().filter((e=>!e.isHidden())).map((e=>e.name))}#te(){this.columns.forEach((e=>e.toggleMode()));this._editModeEnabled=!this._editModeEnabled;this.$el.toggleClass("is-edit-mode");this.$columnPicker.toggleClass("hidden");this.#ae();AGN.Lib.CoreInitializer.run(["table-cols-resizer","table"],this.$el)}#Q(){let e=this.config.columns;if(!e){e=this.#se().map((e=>({text:e.text,name:e.name,selected:!e.isHidden()})))}const t=AGN.Lib.Template.dom("table-column-picker",{columns:e});this.$columnPickerCell.append(t);this.$columnPicker=t;this.$columnSelect=t.find("select");AGN.runAll(t)}#J(){let e;this.$columnPicker.on("show.bs.dropdown",(function(){e=$(this).find(".dropdown-menu");$("body").append(e.detach())}));this.$columnPicker.on("hidden.bs.dropdown",(()=>{this.$columnPicker.append(e.detach())}));this.$columnSelect.on("select2:selecting",(e=>{if(!this.#le()){e.preventDefault()}}));this.$columnSelect.on("select2:select",(t=>{const i=t.params.data.id;const n=this.#oe(i);if(n){n.toggle();AGN.Lib.CoreInitializer.run(["table-cols-resizer","table"],this.$el)}else{const t=this.#ne().concat(i);this.$el.trigger($.Event("table-column-manager:add"),{columns:t});e.remove()}}))}#le(){if(this.#ie().length===i.MAX_SELECTED_COLUMNS){AGN.Lib.Messages.warn("defaults.table.maxColumnsSelected");return false}return true}#ie(){return this.columns.filter((e=>!e.isHidden()))}#oe(e){return this.columns.find((t=>t.name===e))}#ae(){const e=this.$btn.find("span");if(this.isInEditMode()){e.text(t("defaults.table.saveColumns"))}else{e.text(t("defaults.table.editColumns"))}}}AGN.Lib.TableColumnManager=i})();(()=>{const e=AGN.Lib.Helpers;const i=AGN.Lib.Popover;const n=AGN.Lib.CoreInitializer;class r{static DATA_KEY="agn:js-table";constructor(t,i,o,s){this.$el=t;this.$el.append(this.#ce);this.$el.data(r.DATA_KEY,this);i.forEach((e=>{if(e.cellRenderer){e.cellRenderer=AGN.Opt.TableCellRenderers[e.cellRenderer]}if(e.filter){e.filter=AGN.Opt.Table["filters"][e.filter]}if(e.comparator){e.comparator=AGN.Opt.Table["comparators"][e.comparator]}if(e.hasOwnProperty("suppressSizeToFit")&&!o.length){e.suppressSizeToFit=false}}));if(i.some((e=>e.type==="colorBadge"))){const t=e.getStatColorsNames();_.each(o,((e,i)=>e.color=t[i%t.length]))}i[i.length-1].resizable=false;this.gridOptions=_.merge(this.#de(i),s||{});const a=this.gridOptions.columnDefs.find((e=>e.type==="tableActionsColumn"));if(!a||a.hide){this.gridOptions.selectionColumnDef.hide=true}this.#ue();this.api=agGrid.createGrid(this.$table.get(0),this.gridOptions);this.#he(o);this.api.setGridOption("rowData",this.gridOptions.singleNameTable?o.map((e=>({name:e}))):o);this.redraw();this.#pe();this.popoverTimer=undefined;window.setTimeout((()=>n.run("scrollable",t)),100)}#de(e){return{autoSizePadding:4,columnDefs:e,accentedSort:true,colResizeDefault:"shift",scrollbarWidth:0,pagination:true,showRecordsCount:true,paginationPageSize:100,rowSelection:{mode:"multiRow",selectAll:"currentPage"},theme:"legacy",loading:false,overlayNoRowsTemplate:`\n          <div class="w-100 align-self-start">\n           ${AGN.Lib.Template.text("notification-info",{message:t("defaults.table.empty")})}\n          </div>\n        `,onCellClicked:e=>{if(e.colDef.colId==="ag-Grid-SelectionColumn"){e.node.setSelected(!e.node.isSelected())}},onColumnResized:e=>{if(e.finished){AGN.Lib.CoreInitializer.run("truncated-text-popover",this.$el)}},onCellMouseOver:_.throttle((e=>this.showCellPopoverIfTruncated(e)),50),onCellMouseOut:_.throttle((e=>this.hideCellPopover(e)),50),onSelectionChanged:()=>this.updateBulkActions(),onRowDataUpdated:()=>{this.api.forEachNode((e=>this.#he([e.data])));this.updateBulkActions();this.#fe()},headerHeight:33,suppressPaginationPanel:true,onPaginationChanged:()=>{if(this.api){this.#ge();this.$el.css("--ag-rows-count",this.#me())}},defaultColDef:{filter:true,sortable:true,resizable:true,autoHeight:true,wrapText:true,unSortIcon:true,suppressMovable:true,sortingOrder:["asc","desc"],suppressHeaderFilterButton:true,suppressHeaderMenuButton:true,suppressHeaderContextMenu:true,headerComponentParams:{template:`\n              <div class="ag-cell-label-container" role="presentation">\n                <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">\n                    <span data-ref="eSortOrder" class="ag-header-icon ag-header-label-icon ag-sort-order" aria-hidden="true"></span>\n                    <span data-ref="eSortAsc" class="ag-header-icon ag-header-label-icon ag-sort-ascending-icon" aria-hidden="true"></span>\n                    <span data-ref="eSortDesc" class="ag-header-icon ag-header-label-icon ag-sort-descending-icon" aria-hidden="true"></span>\n                    <span data-ref="eSortNone" class="ag-header-icon ag-header-label-icon ag-sort-none-icon" aria-hidden="true"></span>\n                    <span data-ref="eText" class="ag-header-cell-text"></span>\n                </div>\n              </div>\n            `},filterParams:{clearButton:true}},selectionColumnDef:{editable:false,resizable:false,sortable:false,suppressSizeToFit:true,cellStyle:{textAlign:"center"}},columnTypes:{numberColumn:{cellDataType:"text",comparator:AGN.Lib.TableNumberComparator},numberRangeColumn:{filter:"agNumberColumnFilter",filterParams:{inRangeInclusive:true}},dateColumn:{filter:DateRangeFilter,cellRenderer:r.dateCellRenderer},dateTimeColumn:{filter:DateRangeFilter,cellRenderer:r.dateTimeCellRenderer},setColumn:{filter:SetFilter},tableActionsColumn:{headerName:"",editable:false,resizable:false,sortable:false,filter:SwitchFilter,cellRenderer:AGN.Opt.TableCellRenderers["TableActionsCellRenderer"],suppressSizeToFit:true},textCaseInsensitiveColumn:{editable:false,comparator:AGN.Lib.TableCaseInsensitiveComparator,filter:WildcardFilter},select:{comparator:AGN.Lib.TableCaseInsensitiveComparator},colorBadge:{cellRenderer:r.colorBadgeCellRenderer}},icons:{menu:'<i class="icon icon-filter"/>',filter:'<i class="icon icon-filter"/>',columns:'<i class="icon icon-handshake-o"/>',sortAscending:'<i class="icon icon-sort-down"/>',sortDescending:'<i class="icon icon-sort-up"/>',checkboxChecked:'<i class="icon icon-check-square"/>',checkboxUnchecked:'<i class="icon icon-square"/>',checkboxIndeterminate:'<i class="icon icon-square-o"/>',checkboxCheckedReadOnly:'<i class="icon icon-check-square-o"/>',checkboxUncheckedReadOnly:'<i class="icon icon-square-o"/>',checkboxIndeterminateReadOnly:'<i class="icon icon-square-o"/>',sortUnSort:'<i class="icon icon-sort"/>'},localeText:window.I18n.tables,onFilterChanged:()=>{this.#fe();this.api.forEachNode((e=>this.#he([e.data])));this.api.deselectAll();this.updateBulkActions()},isRestoreMode:()=>!!this.isRestoreMode,getRowClass:()=>this.isRestoreMode?"ag-row-no-hover":""}}hideCellPopover(e){clearTimeout(this.popoverTimer);const t=this.#ve(e.event.target);i.get(t)?.hide()}showCellPopoverIfTruncated(t){this.popoverTimer=setTimeout((()=>{const n=this.#ve(t.event.target);if(this.#be(n[0])){const t=$(e.retrieveTextElement(n[0])).text();i.getOrCreate(n,{trigger:"manual",content:t}).show()}}),400)}#be(t){return t&&($(t).is(":truncated")||e.containsTruncatedElements(t))}#fe(){const e=this.api.getDisplayedRowCount();if(e===0){this.api.showNoRowsOverlay()}else{this.api.hideOverlay()}}#ve(e){const t=$(e);return t.is(".ag-cell")?t:t.closest(".ag-cell")}static dateCellRenderer(e,t=false){const i=t?window.adminDateTimeFormat:window.adminDateFormat;const n=r.createCellWrapper(e);const o=document.createElement("div");o.classList.add("text-truncate-table");n.appendChild(o);const s=e?.value?.date||e.value;o.innerHTML=s?moment(s).format(i.replaceAll("d","D").replaceAll("y","Y")):"";return n}static dateTimeCellRenderer(e){return r.dateCellRenderer(e,true)}static colorBadgeCellRenderer(e){const t=r.createCellWrapper(e);const i=$("<div>").addClass("text-truncate-table").html(`\n        <div class="d-flex gap-2">\n            <span class="square-badge badge--stat-${e.data.color}"></span>\n            <span class="text-truncate-table">${e.value}</span>\n        </div>`);return $(t).append(i)[0]}static createCellWrapper(e){const t=e?.api;return AGN.Lib.TableCellWrapper(t?.getGridOption("viewLinkTemplate"),t?.getGridOption("viewInModal"),t?.getGridOption("isRestoreMode")(),e?.data)}get theme(){return"bootstrap"}get#ce(){return`<div class="ag-theme-${this.theme}" style="width: 100%; height: 100%"></div>`}get $table(){if(!this._$table){this._$table=this.$el.find(`.ag-theme-${this.theme}`)}return this._$table}#ue(){if(!this.gridOptions.showRecordsCount&&!this.gridOptions.pagination){this.$table.height(this.$el.parent().height())}}#ge(){const e=this.api.paginationGetCurrentPage()+1;const t=this.api.paginationGetTotalPages();const i={pagination:this.gridOptions.pagination,showRecordsCount:this.gridOptions.showRecordsCount,currentPage:e,totalPages:t,pageSize:this.api.paginationGetPageSize(),pageSelects:this.#ye(e,t)};this.#we();const r=AGN.Lib.Template.dom("table-footer",i);const o=this.$el.find(".table-wrapper__footer");if(o.exists()){o.replaceWith(r)}else{this.$el.append(r)}n.run("select",r);this.api.redrawRows()}#ye(e,t){const i=parseInt(this.$el.css("--table-max-pages-count"));let n,r;if(t<=i){n=1;r=t}else{if(e<=Math.ceil(i/2)){n=1;r=i}else if(e+Math.floor(i/2)>t){n=t-i+1;r=t}else{n=e-Math.floor(i/2);r=e+Math.floor(i/2)-1}}const o=[];for(let e=n;e<=r;e++){o.push(e)}return o}#we(){const e=this.api;const t=this.#Ce();const i=this.gridOptions.pagination?e.paginationGetRowCount():e.getDisplayedRowCount();const n=this.$el.find(".table-wrapper__entries-label");const r=n.children().first();if(t>i){r.text(`${i} / ${t}`)}else{r.text(i)}n.removeClass("hidden")}#Ce(){let e=0;this.api.forEachNode((t=>{e++}));return e}#me(){if(!this.gridOptions.pagination){return this.api.getDisplayedRowCount()}const e=this.api.paginationGetRowCount();const t=this.api.paginationGetCurrentPage();const i=this.api.paginationGetPageSize();return Math.min(e-t*i,i)}redraw(){const e=this.api.getAllDisplayedColumns().filter((e=>e.getColDef().suppressSizeToFit===true)).map((e=>e.getColId()));if(e.length){this.api.autoSizeColumns(e)}this.api.sizeColumnsToFit();AGN.Lib.CoreInitializer.run("truncated-text-popover",this.$el);this.$el.trigger("table:redraw")}#pe(){$("#filter-tile").on("enterdown",(e=>{e.preventDefault();this.applyFilter.bind(this)()}));$("#apply-filter").on("click",this.applyFilter.bind(this));$("#reset-filter").on("apply-filter",this.applyFilter.bind(this))}applyFilter(){const e=_.groupBy(this.api.getColumns(),(e=>e.getColDef().type));const t=this.#_e(e["numberColumn"]);const i=this.#Se(e["numberRangeColumn"]);const n=this.#Ae(e["select"]);const r=this.#xe(_.union(e["dateColumn"],e["dateTimeColumn"],e["customColumn"],e["setColumn"],e["tableActionsColumn"],e["textCaseInsensitiveColumn"]));const o=this.#_e(e["undefined"]);this.api.setFilterModel({...i,...t,...n,...o,...r});this.isRestoreMode=$("#deleted-filter").prop("checked")}#Se(e=[]){return e.reduce(((e,t)=>{const i=t.getColId();const n=$(`#${i}-min-filter`).val()||Number.MIN_SAFE_INTEGER;const r=$(`#${i}-max-filter`).val()||Number.MAX_SAFE_INTEGER;e[i]={filterType:"number",type:"inRange",filter:n,filterTo:r};return e}),{})}#_e(e=[]){return e.reduce(((e,t)=>{const i=t.getColId();const n=$(`#${i}-filter`.replaceAll(".","\\.")).val()?.toLowerCase();e[i]={type:"contains",filter:n};return e}),{})}#Ae(e=[]){return e.reduce(((e,t)=>{const i=t.getColId();const n=$(`#${i}-filter`).val()?.toLowerCase();e[i]={type:"equals",filter:n};return e}),{})}#xe(e=[]){return e.reduce(((e,t)=>{e[t.getColId()]={};return e}),{})}findRowByElement(e){return this.api.getRowNode(e.closest(".ag-row").attr("row-id"))}updateBulkActions(){const e=this.api.getSelectedRows();const t=e.flatMap((e=>e.rowActions));this.$el.trigger("table:updateBulkActions",[e.length,t])}#he(e){const t=this.api.getColumnDefs().find((e=>e.type==="tableActionsColumn"))?.buttons;if(!t){return}e.forEach((e=>e.rowActions=t.filter((t=>this.allowedToShowRowAction(t,e))).map((e=>e.name))))}allowedToShowRowAction(e,t){if(this.isRestoreMode){return e.name==="restore"}if(e.hide===true){return false}const i=AGN.Opt.TableActionsConditions[e.name];return!i||i(t)}static get(e){return r.getWrapper(e).data(this.DATA_KEY)}static getWrapper(e){return e.closest(".table-wrapper")}}AGN.Lib.Table=r})();(()=>{const e=AGN.Lib.CSRF;const t=AGN.Opt.Templates;const i=[];class n{static prepare(n){if(!this.exists(n)){throw new Error(`There's no template \`${n}\` registered`)}if(!i[n]){const r=_.template(t[n]);i[n]=function(){const t=r.apply(this,arguments);return e.updateTokenInDOM(t)}}return i[n]}static text(e,t){return this.prepare(e)(t)}static dom(e,t){return $(this.text(e,t))}static exists(e){return e in t}static register(e,t){AGN.Opt.Templates[e]=t;delete i[e]}}AGN.Lib.Template=n})();(()=>{const e=AGN.Lib.Storage;const t="tile--collapsed";class i{constructor(e){this.$el=e.closest(".tile");this.$toggle=this.$el.all("[data-toggle-tile]");this.toggleCollapse(this.initiallyHidden);this.$el.data("tile",this)}get initiallyHidden(){const t=this.$el.attr("id");const i=t?e.get("toggle_tile#"+t):undefined;return i?i.hidden:this.$toggle.data("toggle-tile")===false}get collapsed(){return!this.$el.hasClass(t)}toggleCollapse(i=this.collapsed){this.$el.toggleClass(t,i);this.#Ee(i);if(this.$el.attr("id")){e.set(`toggle_tile#${this.$el.attr("id")}`,{hidden:i})}if(!i){AGN.Lib.CoreInitializer.run("load",this.$el.find(".tile-body"));AGN.Lib.Scrollbar.get(this.$el)?.update()}}#Ee(e){this.$el.find("> .tile-header .tile-title i.icon").toggleClass("icon-caret-down",e).toggleClass("icon-caret-up",!e)}static get(e){const t=e.closest(".tile").data("tile");return!t?new i(e):t}}AGN.Lib.Tile=i})();(()=>{const e=AGN.Lib.Template;const t=AGN.Lib.Helpers;const i={};i.get=function(e){const t=bootstrap.Tooltip.getInstance(e);if(t){return t}return null};const n=function(t,i,n){return e.text("tooltip-template",{tooltipStyle:t,arrowStyle:i,innerStyle:n})};function r(e,t,i){return{title:e,container:"body",template:n(t),...i&&{trigger:i}}}i.options=function(i){let n={};if(i.is("[data-tooltip]")){let t=i.data("tooltip");const o=i.data("tooltip-src");if(o){t=e.text(o,{element:i})}n=r(t,i.data("tooltip-style"))}return $.extend(n,t.objFromString(i.data("tooltip-options")))};i.create=function(e,t){i.remove(e);const n=new bootstrap.Tooltip(e,t);e.on("remove",(function(){i.remove(e)}));if(t.trigger!=="manual"){const t=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){n.hide()}}))}));t.observe(e[0])}return n};i.remove=function(e){i.get(e)?.dispose()};i.setShown=function(e,t){const n=i.get(e);if(!n){return}if(t||t===undefined){n.show()}else{n.hide()}};i.setContent=function(e,t=""){const n=i.get(e);if(!n){return}n.setContent({".tooltip-inner":t})};i.restoreContent=function(e){const t=i.get(e);if(!t){return}i.setContent(e,t._getTitle())};i.createTip=function(e,t,n,o){return i.create(e,r(t,n,o))};i.toggleState=function(e,t=true){const n=i.get(e);if(t){n?.enable()}else{n?.disable()}};AGN.Lib.Tooltip=i})();(()=>{class e{constructor(e,t,i){const n=this;this.multiple=!t.exists()||t.is("[multiple]");this.selection=[];this.$dropzone=e;this.$file=t;if(e.exists()){e.data("agn:upload",this);new Dropzone(e,{classDragOver:"drag-over",onSelectFiles:function(e){const t=i?i:n;t.#Te(e)}})}else{t.data("agn:upload",this);t.on("change",(()=>{const e=i?i:n;e.#Te(t.prop("files"))}))}}static get(e,t){if(e.exists()){return e.data("agn:upload")}return t.data("agn:upload")}reset(){this.selection=[];this.$file.val("")}removeSelection(e){this.selection.splice(e,1)}getSelection(){return this.selection.slice(0)}#Te(e){if(!e||e.length<=0){return}let t=false;if(this.multiple){for(let i=0;i<e.length;i++){const n=e[i];if(this.#De(n,this.selection.length)){this.selection.push(n);t=true}}}else{let i=e[0];if(this.#De(i,0)){this.selection=[i];t=true}}if(t){this.$dropzone.trigger("upload:dropped",[this.selection])}}#De(e,t){const i=$.Event("upload:add");const n=this.$dropzone.exists()?this.$dropzone:this.$file;n.trigger(i,{file:e,index:t});return!i.isDefaultPrevented()}}AGN.Lib.Upload=e})();(function(){var e;e=function(e){if(e.init){e.init();delete e.init}return $.extend(this,e)};e.exists=function(e){return AGN.Opt.Validators.hasOwnProperty(e)};e.get=function(t){return e.exists(t)?AGN.Opt.Validators[t]:null};e.new=function(t,i){if(e.exists(t)){console.debug("Validator with name `"+t+"` was overridden")}var n=new e(i);AGN.Opt.Validators[t]=n;return n};e.prototype.valid=function(){return true};e.prototype.errors=function(){return[]};AGN.Lib.Validator=e})();(()=>{const e=AGN.Lib.Storage;class t{static PREFIX="web-storage#";static get(i){try{return e.get(t.PREFIX+$.trim(i))}catch(e){console.error(e)}return null}static set(i,n){e.set(t.PREFIX+$.trim(i),n)}static extend(e,i){let n=t.get(e);if(n!=null){if(e==="mailing-preview"){n=$.extend(true,{},n,i)}else{n=$.extend(n,i)}}else{n=i}t.set(e,n);return n}}AGN.Lib.WebStorage=t})();AGN.Lib.LB.Definitions={EDITOR:null,IS_BASIC_LB:false,AGN_TAGS_CONFIG:{},EMPTY_ROW_HEIGHT:80,COLLAPSED_BLOCK_SIZE:10,ALL_ENTRIES:-1,ALL_RECIPIENTS:0,DEFAULT_LAYERING_INDEX:-1,TOP_Z:500,UNCOLLAPSIBLE_GUTTER_SIZE:2,AUTOSAVE_INACITVE_INTERVAL:2e3,MAX_UNDO_OPERATIONS_SIZE:100,CONTROLS_STATE:{DISABLED:0,HIDDEN:1,POPOVER:2,INLINE:3},MARKUP_SPAN:{TEXT:"Text",PLACEHOLDER:"Placeholder",TOC_AREA:"TocArea",TOC_PLACEHOLDER:"TocPlaceholder"},PLACEHOLDER:{LABEL:"Label",TEXT:"Text",LINK:"Link",IMAGE:"Image",IMAGE_SRC:"ImageLink",SELECT:"Select",COLOR:"Color",CHECK:"Check",MULTI:"Multi"},TOC_PLACEHOLDER_TYPE_ID:"Id",TOC_PLACEHOLDER_TYPE_NAME:"Name",TOC_ID_PREFIX:"toc_",DIRECTION:{NONE:"",EAST:"e",WEST:"w",NORTH:"n",SOUTH:"s"},CONTAINER_TYPE:{EDITABLE:0,ANCHORED:2,FIXED_AND_ANCHORED:3}};(()=>{function e(e){var t={};if(e){this.data=e.slice();this.data.forEach((function(e){t[e.id]=e.name}))}else{this.data=[]}this.map=t}e.prototype.name=function(e){return this.map[e]};e.prototype.list=function(){return this.data.slice()};AGN.Lib.LB.Categories=e})();(()=>{function e(){this.deferred=$.Deferred();this.callback=null}e.prototype.promise=function(){return this.deferred.promise()};e.prototype.bind=function(e){var t=this;if(e===false){t.callback=null}else{var i=t.callback=function(){if(t.callback===i){t.deferred.notifyWith(this,arguments)}};if($.isArray(e)){e.forEach((function(e){e.progress(i)}))}else{e.progress(i)}}};AGN.Lib.LB.PromiseProgressWatcher=e})();(()=>{const e=AGN.Lib.LB.Definitions;function t(e){var t={};if(e){this.data=e.slice();this.data.forEach((function(e){t[e.id]=e.name}))}else{this.data=[]}this.map=t}t.prototype.name=function(t){return this.map[t==e.ALL_ENTRIES?e.ALL_RECIPIENTS:t]};t.prototype.list=function(){return this.data.slice()};AGN.Lib.LB.Targets=t})();(()=>{const e=AGN.Lib.LB.Definitions;var t={};t.make=function(e,i){t.adjustChildren(e,i);i.forEach((function(t){t.adjustHeight(e.getHeightForSpans(t.getRow(),t.getColumn(),t.getRows(),t.getColumns()))}))};t.getChildrenProjections=function(e,i){var n=[];e.each((function(e){n.push({row:e,projections:[]})}));var r=[];i.forEach((function(e){var t=[];var i={child:e,height:e.getHeight(),spans:t};var o=e.getRow();var s=o+e.getRows()-1;for(var a=o;a<=s;a++){var l={cascade:i,height:0,margin:0,adjusted:false};t.push(l);n[a-1].projections.push(l)}r.push(i)}));$.each(n,(function(t,i){var n=e.getRowMargin(i.row.isGuttered());$.each(i.projections,(function(e,t){t.margin=n}))}));$.each(r,(function(e,i){t.adjustCascade(i)}));return n};t.adjustCascade=function(t){var i=Math.max(t.height,e.COLLAPSED_BLOCK_SIZE);var n=0;var r=t.spans;var o=[];for(var s=0;s<r.length;s++){var a=r[s];if(a.adjusted===false){a.height=e.COLLAPSED_BLOCK_SIZE;o.push(a)}n+=a.height;if(n+a.margin>=i){for(s=s+1;s<r.length;s++){r[s].height=0}break}if(s+1<r.length){n+=a.margin}}var l=i-n;if(l>0&&o.length){var c=l/o.length;$.each(o,(function(e,t){t.height+=c}))}};t.adjustChildren=function(i,n){$.each(t.getChildrenProjections(i,n),(function(i,n){var r=n.projections;if(r.length){var o=0;var s=0;$.each(r,(function(e,t){if(t.height>o){o=t.height;s=e}}));if(o===0){o=e.EMPTY_ROW_HEIGHT}$.each(r,(function(e,i){i.adjusted=true;if(e!==s){i.height=o;t.adjustCascade(i.cascade)}}));n.row.setHeight(o)}else{n.row.setHeight(e.EMPTY_ROW_HEIGHT)}}))};AGN.Lib.LB.Adjustments=t})();(()=>{const e=AGN.Lib.LB.Definitions;function t(t){this.horizontal=e.DIRECTION.NONE;this.vertical=e.DIRECTION.NONE;for(var i=0;i<t.length;i++){var n=t.charAt(i).toLowerCase();switch(n){case e.DIRECTION.EAST:case e.DIRECTION.WEST:if(this.horizontal===e.DIRECTION.NONE){this.horizontal=n}else{console.error("Ambiguous direction code: "+t)}break;case e.DIRECTION.NORTH:case e.DIRECTION.SOUTH:if(this.vertical===e.DIRECTION.NONE){this.vertical=n}else{console.error("Ambiguous direction code: "+t)}break;default:console.error("Unknown direction code: "+n)}}}t.prototype.isHorizontal=function(){return this.horizontal!==e.DIRECTION.NONE};t.prototype.isVertical=function(){return this.vertical!==e.DIRECTION.NONE};t.prototype.isEast=function(){return this.horizontal===e.DIRECTION.EAST};t.prototype.isWest=function(){return this.horizontal===e.DIRECTION.WEST};t.prototype.isNorth=function(){return this.vertical===e.DIRECTION.NORTH};t.prototype.isSouth=function(){return this.vertical===e.DIRECTION.SOUTH};AGN.Lib.LB.ResizingDirection=t})();(()=>{function e(e,t){var i=e.get$();this.child=e;this.$child=i;this.grid=t}e.prototype.setupConstraints=function(){this.setConstraints(this.grid.getConstraints(this.child,this.direction))};e.prototype.setConstraints=function(e){this.$child.resizable({minWidth:e.minWidth,maxWidth:e.maxWidth,minHeight:e.minHeight,maxHeight:e.maxHeight})};e.prototype.getArea=function(e,t){return this.grid.getArea(this.child,this.direction,e,t)};e.prototype.start=function(e){this.direction=e;this.area={row:this.child.getRow(),column:this.child.getColumn(),rows:this.child.getRows(),columns:this.child.getColumns()};this.z=this.child.getZ();this.setupConstraints();this.grid.setAreaHovered(this.area);this.grid.startResizing(this.child);this.child.setZ(AGN.Lib.LB.Definitions.TOP_Z)};e.prototype.resize=function(e,t){var i=this.getArea(e,t);if(i.row!==this.area.row||i.column!==this.area.column||i.rows!==this.area.rows||i.columns!==this.area.columns){this.area=i;this.grid.setAreaHovered(i)}};e.prototype.stop=function(e,t){this.area=this.getArea(e,t);this.child.setZ(this.z);this.child.setRow(this.area.row);this.child.setColumn(this.area.column);this.child.setRows(this.area.rows);this.child.setColumns(this.area.columns);this.grid.setAreaHovered(null);this.grid.stopResizing(this.child);this.child.adjustSize(this.grid);this.child.adjustCoordinates(this.grid)};AGN.Lib.LB.Resizing=e})();(()=>{const UNKNOWN_GENDER=2;const REFERENCE_TABLES_VALUES_CACHE={};let SALUTATIONS_CACHE;let VOUCHER_CODES_CACHE;let RESOLVED_TAGS_CACHE=new AGN.Lib.InMemoryCache(5*1e3*60);class AgnTagsResolver{static resolve(e){return AGN.Lib.Helpers.replaceAgnTags(e,((e,t)=>{if(e.name==="agnIMAGE"){return this.resolveAgnImage(e,t)}if(e.name==="agnEMAIL"){return this.#Me("email")||t}if(e.name==="agnNULL"){return""}if(e.name==="agnPROFILE"){return this.resolveAgnForm("profile")}if(e.name==="agnUNSUBSCRIBE"){return this.resolveAgnForm("unsubscribe")}if(e.name==="agnWEBVIEW"||e.name==="agnFULLVIEW"){return`${this.#ke()}/fullview.action?agnUID=##AGNUID##`}if(e.name==="agnFORM"){return e.attributes["name"]?this.resolveAgnForm(e.attributes["name"]):t}if(e.name==="agnPUBVIEW"){return`${this.#ke()}/v.html?uid=##PUBID:NL##`}if(e.name==="agnTITLE"||e.name==="agnTITLEFIRST"||e.name==="agnTITLEFULL"){return this.resolveAgnTitle(e,t)}if(e.name==="agnDB"){return this.resolveAgnDb(e,t)}if(e.name==="agnAGE"){return this.resolveAgnAge(e,t)}if(e.name==="agnDAYS_UNTIL"){return this.resolveAgnDaysUntil(e,t)}if(e.name==="agnBARCODE"){return this.resolveAgnBarcode(e,t)}if(e.name==="agnQRCODE"){return this.resolveAgnQrCode(e,t)}if(e.name==="agnONEPIXEL"){const e=this.#Pe();return e?`${this.#ke()}/g.html?uid=${e}`:t}if(e.name==="agnUID"){return this.#Pe()||t}if(e.name==="agnREDIRECT"){return this.resolveAgnRedirect(e,t)}if(e.name==="agnVOUCHER"){return this.resolveAgnVoucher(e,t)}if(e.name==="agnIMGLINK"){return""}if(e.name==="agnTXTIMG"){return this.resolveAgnTxtImg(e,t)}if(e.name==="agnDYNIMAGE"){return this.resolveAgnDynImage(e,t)}if(e.name==="agnITEM"){return this.resolveAgnItem(e,t)}return this.#Re(t)||t}))}static resolveAgnImage(e,t){if(e.attributes["name"]){if(!e.attributes["source"]||e.attributes["source"]==="mediapool"||e.attributes["source"]==="mediapoolbg"){return AGN.url(`/mediapool/${encodeURIComponent(e.attributes["name"])}/raw.action`)}}return t}static resolveAgnTxtImg(e,t){const i=this.#Pe();if(!i){return t}const{reftbl:n,key:r,col:o}=e.attributes;if(this.#Ie(n)||this.#Ie(r)||this.#Ie(o)){return t}let s=`${this.#ke()}/dynimg/${i}?reftbl=${n}&key=${r}&col=${o}`;["width","height","fontsize","fontname","fontstyle","fontcolor"].forEach((t=>{const i=e.attributes[t];if(i){s+=`&${t}=${i}`}}));return s}static resolveAgnDynImage(e,t){const{referencetable:i,keycolumn:n,keyvalue:r,imagesource:o}=e.attributes;if(this.#Ie(i)||this.#Ie(n)||this.#Ie(r)){return t}const{licenseId:s}=this.#Oe();if(o==="mediapool"){return`${this.#ke()}/dyn_mediapool_element/${s}/${window.companyId}/${i}.${n}.${r}.jpg`}if(o==="mailing"){const e=this.#Ne();if(e>0){return`${this.#ke()}/dyn_image/${s}/${window.companyId}/${e}/${i}.${n}.${r}.jpg`}return""}return`${this.#ke()}/dyn_extern/${s}/${window.companyId}/${i}.${n}.${r}.jpg`}static resolveAgnItem(e,t){const{table:i,keycolumn:n,keyvalue:r,column:o,keysource:s}=e.attributes;if(this.#Ie(o)){return t}const a=!this.#Ie(s);if((this.#Ie(i)||this.#Ie(n)||this.#Ie(r))&&!a){return t}const{referenceContentSettings:l}=this.#Oe();if(a&&!l){return""}let c=n;let d=r;if(a){const e=/^item([1-9]\d*)$/;const t=s.match(e);if(t){const e=t[1];if(e>l.items.length){return""}c=this.#Oe()["mailingReferenceContentKeyColumn"];d=l.items[e-1]}}return this.#Le(i,o,c,d)}static resolveAgnBarcode(e,t){const i=this.#Pe();if(!i){return t}let n=`${this.#ke()}/barcode?uid=${i}`;const{code:r,column:o,drawtext:s,barheight:a,type:l,voucher:c,default:d}=e.attributes;let u;if(r){u=r}else if(o){u=this.#Me(o)}else if(c){u=this.#Fe(c)||d}if(u){n+="&data="+u}if(s==="true"||s==="false"){n+="&drawText="+s}if(this.#$e(a)&&parseInt(a)>0){n+="&barHeight="+a}if(l){n+="&type="+l}return n}static resolveAgnRedirect(e,t){const{column:i}=e.attributes;if(!i){return t}return`${this.#ke()}/redirect?url=##${i}##`}static resolveAgnVoucher(e,t){const{name:i}=e.attributes;if(!i){return t}const n=this.#Fe(i);if(n){return n}return e.attributes["default"]??""}static resolveAgnQrCode(e,t){const i=this.#Pe();if(!i){return t}let n=`${this.#ke()}/qrcode?uid=${i}`;const{data:r,column:o,drawtext:s,height:a,width:l,voucher:c,default:d}=e.attributes;let u;if(r){u=r}else if(o){u=this.#Me(o)}else if(c){u=this.#Fe(c)||d}if(u){n+="&data="+u}if(s==="true"||s==="false"){n+="&drawText="+s}if(this.#$e(a)&&parseInt(a)>0){n+="&height="+a}if(this.#$e(l)&&parseInt(l)>0){n+="&width="+l}return n}static resolveAgnDb(e,t){const{column:i}=e.attributes;if(!i){return t}const n=this.#Me(i);return this.#Ie(n)?t:n}static resolveAgnForm(e){const{companyToken:t}=this.#Oe();if(t){return`${this.#ke()}/form.action?agnCTOKEN=${t}&agnFN=${e}&agnUID=##AGNUID##`}return`${this.#ke()}/form.action?agnCI=${window.companyId}&agnFN=${e}&agnUID=##AGNUID##`}static resolveAgnTitle(e,t){const{type:i}=e.attributes;if(!i){return t}const n=this.#Ge()[parseInt(i)];if(!n){return t}const r=$.trim(this.#Me("lastname"));const o=$.trim(this.#Me("firstname"));const s=$.trim(this.#Me("title"));let a=r?this.#Me("gender"):UNKNOWN_GENDER;if(!AGN.Lib.Helpers.isNumber(a)){a=UNKNOWN_GENDER}const l=n[a];if(!l){return t}if(l.includes("#<>#")){return this.#Re(t)}if(a===UNKNOWN_GENDER){return l}if(e.name==="agnTITLE"){return`${l} ${s?`${s} `:""}${r}`}if(e.name==="agnTITLEFIRST"){return`${l} ${o}`}if(e.name==="agnTITLEFULL"){return`${l} ${s?`${s} `:""}${o} ${r}`}return l}static resolveAgnDaysUntil(e,t){const{column:i}=e.attributes;if(!i){return t}if(!["Date","DateTime"].includes(this.#Be(i))){return t}const n=this.#Me(i,false);if(this.#Ie(n)){return t}const r=new Date(n);const o=new Date;const s=r-o;return Math.ceil(s/(1e3*60*60*24))}static resolveAgnAge(tag,tagHtml){const{column:column}=tag.attributes;if(!column){return tagHtml}if(!["Date","DateTime"].includes(this.#Be(column))){return tagHtml}const dateMs=this.#Me(column,false);if(this.#Ie(dateMs)){return tagHtml}const{position:positionAttr,length:lengthAttr,modifier:modifierAttr}=tag.attributes;let result=this.#He(new Date(dateMs),new Date);if(modifierAttr!==null&&modifierAttr!==undefined){try{result=eval(`${result}${modifierAttr}`)}catch(e){console.error(`Error when process 'modifier' attribute in [agnAGE] tag!`)}}result=String(result);if(this.#$e(positionAttr)){const e=Math.max(1,parseInt(positionAttr));result=result.substring(e-1)}if(this.#$e(lengthAttr)){const e=Math.max(0,parseInt(lengthAttr));if(e>0){result=result.substring(0,e)}}return result}static#He(e,t){let i=t.getFullYear()-e.getFullYear();const n=t.getMonth()-e.getMonth();const r=t.getDate()-e.getDate();if(n<0||n===0&&r<0){i--}return Math.max(0,i)}static#ke(){return this.#Oe()["redirectDomain"]}static#Pe(){return this.#Oe()["recipientUID"]}static#Ne(){return this.#Oe()["mailingId"]}static#Me(e,t=true){const{previewRecipient:i}=this.#Oe();const n=i?.parameters[e];if(this.#Ie(n)||!t){return n}const r=this.#Be(e);if(r){if(r==="Date"){return AGN.Lib.DateFormat.format(new Date(n),window.adminDateFormat)}if(r==="DateTime"){return AGN.Lib.DateFormat.format(new Date(n),window.adminDateTimeFormat)}}return n}static#Be(e){const{previewRecipient:t}=this.#Oe();return t.columnsTypes[e]}static#$e(e){const t=parseInt(e,10);return!isNaN(t)&&t.toString()===e}static#Ge(){if(!SALUTATIONS_CACHE){$.ajax({url:AGN.url("/salutation/list/json.action"),method:"GET",async:false,success:e=>{SALUTATIONS_CACHE={};e.forEach((e=>SALUTATIONS_CACHE[e.id]=e.titleGender))}})}return SALUTATIONS_CACHE}static#Fe(e){if(!VOUCHER_CODES_CACHE){const e=this.#ze();if(e){$.ajax({url:AGN.url("/administration/table/voucherCodes/json.action"),data:{customerId:e},method:"GET",async:false,success:e=>VOUCHER_CODES_CACHE=e})}else{VOUCHER_CODES_CACHE={}}}return VOUCHER_CODES_CACHE[e]}static#Le(e,t,i,n){const r=`${e}-${t}-${i}-${n}`;if(!REFERENCE_TABLES_VALUES_CACHE[r]){$.ajax({url:AGN.url("/administration/table/valueByKeyCol.action"),data:{table:e,column:t,keyCol:i,keyVal:n},method:"GET",async:false,success:e=>REFERENCE_TABLES_VALUES_CACHE[r]=e})}return REFERENCE_TABLES_VALUES_CACHE[r]}static#ze(){return this.#Me("customer_id",false)||0}static#Re(e){const t=this.#Ne();const i=this.#ze();if(t<=0||i<=0){return e}let n=RESOLVED_TAGS_CACHE.get(e);if(!this.#Ie(n)){return n}$.ajax({url:AGN.url("/layoutbuilder/agn-tag/resolve.action"),data:{tag:e,customerId:i,mailingId:t},method:"POST",async:false,success:e=>n=e});RESOLVED_TAGS_CACHE.set(e,n);return n}static#Oe(){return AGN.Lib.LB.Definitions.AGN_TAGS_CONFIG}static#Ie(e){return e===null||e===undefined}}AGN.Lib.LB.AgnTagsResolver=AgnTagsResolver})();(()=>{class e{constructor(e=AGN.Lib.LB.Definitions.MAX_UNDO_OPERATIONS_SIZE){this.maxLength=e;this._stack=[]}add(e){while(this._stack.length>=this.maxLength){this._stack.shift()}this._stack.push(e)}pop(){return this._stack.pop()}isEmpty(){return _.isEmpty(this._stack)}clear(){this._stack=[]}}class t{constructor(t,i={}){this._editor=t;this._operationHandlers={};this.undoStack=new e;this.redoStack=new e;this.onChange=_.isFunction(i.onChange)?i.onChange:_.noop}registerHandler(e,t){this._operationHandlers[e]=t}undo(){if(!this.canUndo()){return false}const e=this.undoStack.pop();e.args=this._operationHandlers[e.operation]?.apply(this,e.args);this.redoStack.add(e);this.onChange();return true}redo(){if(!this.canRedo()){return false}const e=this.redoStack.pop();e.args=this._operationHandlers[e.operation]?.apply(this,e.args);this.undoStack.add(e);this.onChange();return true}canUndo(){return!this.undoStack.isEmpty()}canRedo(){return!this.redoStack.isEmpty()}operation(e){const t=[].slice.call(arguments);t.shift();this.undoStack.add({operation:e,args:t});this.redoStack.clear();this.onChange()}}AGN.Lib.LB.UndoManager=t})();(()=>{const e=AGN.Lib.LB.Definitions;const i=AGN.Lib.LB.ResizingDirection;AGN.Lib.LB.Ui={setShown:function(e,t){e.toggleClass("hidden",!t)},setUndoOptionEnabled:function(e){$("#undo-option").toggleClass("disabled",!e)},setRedoOptionEnabled:function(e){$("#redo-option").toggleClass("disabled",!e)},setTooltip:function(e,t){e.data("tooltip",t);AGN.Lib.Tooltip.createTip(e,t)},removeTooltip:function(e){AGN.Lib.Tooltip.remove(e)},checkHoverState:function(e){if(e.is(":hover")){e.trigger("mouseleave").trigger("mouseenter")}},setLoading:function(e){$("#lb-editor-progress").toggle(!!e);$("#disabled-save-button").parent().toggleClass("hidden",!e);$("#save-button").parent().toggleClass("hidden",!!e)},setEditable:function(e){$("#save-button").parent().toggleClass("hidden",!e);$("#building-blocks-search").toggleClass("disabled",!e);$("#update-text-version").parent().toggle(!!e);$("#visibleTargets").attr("disabled",!e)},setTargetId:function(e){AGN.Lib.Select.get($("#visibleTargets")).selectValue(e)},getAvailableTargetIds:function(){return $("#visibleTargets").children("option").get().map((function(e){return parseInt($(e).val())}))},setAvailableTargetIds:function(i){var n=this.getAvailableTargetIds();var r=$("#visibleTargets");r.empty();i.push({id:e.ALL_ENTRIES,name:t("filter.reset")});_.sortBy(i,(function(t){if(t.id>e.ALL_RECIPIENTS){return n.indexOf(parseInt(t.id))}else if(t.id==e.ALL_RECIPIENTS){return 1e6}else{return 1000001}})).forEach((function(e){$("<option></option>").val(e.id).text(e.name).appendTo(r)}))},imagesAdjusted:function(e,t){var i=$.Deferred();var n=undefined,r=undefined;if(t===true){n=e.outerWidth();r=e.outerHeight()}var o=function(){var t=e.outerWidth(),o=e.outerHeight();if(n!==t||r!==o){n=t;r=o;i.notify()}};e.imagesLoaded().progress(o).always(o);return i.promise()},getHeightAccurate:function(e){return e[0].getBoundingClientRect().height},getResizeHandleDirection:function(e){if(e.hasClass("ui-resizable-ne")){return new i("ne")}if(e.hasClass("ui-resizable-se")){return new i("se")}if(e.hasClass("ui-resizable-nw")){return new i("nw")}if(e.hasClass("ui-resizable-sw")){return new i("sw")}if(e.hasClass("ui-resizable-e")){return new i("e")}if(e.hasClass("ui-resizable-w")){return new i("w")}if(e.hasClass("ui-resizable-n")){return new i("n")}if(e.hasClass("ui-resizable-s")){return new i("s")}console.error("Invalid resizing direction handle");return new i("")}}})();(()=>{const e=AGN.Lib.LB.Definitions;const t=AGN.Lib.LB.AgnTagsResolver;const i=AGN.Lib.LB.Resizing;const n=AGN.Lib.LB.Ui;function r(t){var i={id:0,name:"",targetId:0,row:0,column:0,rows:1,columns:1,z:0,isTocItem:false,isRecycled:false,interestGroup:"",container:{id:0,name:"",isToc:false,isSortable:false,markup:[],content:{},tocItemPlaceholderId:0,type:"",filter:""},content:undefined};this.data=_.merge(i,t);if(this.data.content===undefined){this.data.content=_.clone(this.data.container.content)}this.capsule=new AGN.Lib.LB.Capsule(this);this.layeringIndex=e.DEFAULT_LAYERING_INDEX;this.callbacks={};var n=t.container.modeEdit;if(this.isContainerDeleted()||n===e.CONTAINER_TYPE.ANCHORED||n===e.CONTAINER_TYPE.FIXED_AND_ANCHORED){this.setDraggable(false);if(!e.IS_BASIC_LB){this.setResizable(false)}}}r.get=function(e){return e.data("agn:child")};r.set=function(e,t){e.data("agn:child",t)};r.render=function(i,n,o){var a="";i.forEach((function(i){switch(i.type){case e.MARKUP_SPAN.TEXT:if(i.value){a+=t.resolve(i.value)}else{a+=i.value}break;case e.MARKUP_SPAN.PLACEHOLDER:var l=n[i.id];if(i.markup&&!(i.placeholderType===e.PLACEHOLDER.MULTI&&l)){if(s(i,l)){a+=r.render(i.markup,n,o)}}else{switch(i.placeholderType){case e.PLACEHOLDER.LABEL:case e.PLACEHOLDER.TEXT:case e.PLACEHOLDER.LINK:case e.PLACEHOLDER.COLOR:case e.PLACEHOLDER.SELECT:case e.PLACEHOLDER.CHECK:case e.PLACEHOLDER.MULTI:if(l){a+=$.trim(t.resolve(l))}break;case e.PLACEHOLDER.IMAGE_SRC:if(l){a+=$.trim(t.resolve(l))}else{a+=o.noImageLink}break;case e.PLACEHOLDER.IMAGE:a+=parseInt(l)>0?o.imageUriPattern.replace("{image-id}",l):o.noImageLink;break;default:console.error("Unknown placeholder type: "+i.placeholderType)}}break;case e.MARKUP_SPAN.TOC_AREA:o.toc.forEach((function(e){a+=r.render(i.markup,n,$.extend({tocItem:e},o))}));break;case e.MARKUP_SPAN.TOC_PLACEHOLDER:switch(i.placeholderType){case e.TOC_PLACEHOLDER_TYPE_ID:a+=e.TOC_ID_PREFIX+o.tocItem.id;break;case e.TOC_PLACEHOLDER_TYPE_NAME:a+=o.tocItem.name;break;default:console.error("Unknown TOC placeholder type: "+i.placeholderType)}break;default:console.error("Unknown span type: "+i.type)}}));return AGN.Lib.Helpers.escapeAgnTags(a)};r.collectPlaceholders=function(t,i,n,o,s){t.forEach((function(t){switch(t.type){case e.MARKUP_SPAN.PLACEHOLDER:if((!s||s.call(s,t))&&!_.has(t.options,"showByValue")){if(o[t.id]===undefined){n.push({id:t.id,type:t.placeholderType,name:t.name,value:i[t.id],options:t.options,help:t.help});o[t.id]=true}}case e.MARKUP_SPAN.TOC_AREA:if(t.markup){r.collectPlaceholders(t.markup,i,n,o,s)}break}}))};r.draggableOptions=function(){return{stack:"#lb-childrens .div-container",revert:"invalid",distance:20,cursor:"move",opacity:.4,refreshPositions:true,start:function(){e.EDITOR.setChildrenControlsEnabled(false)},stop:function(){e.EDITOR.setChildrenControlsEnabled(true);e.EDITOR.clearEmptyAddedOnTheFlyRows()},drag:function(t,i){e.EDITOR.processAddedOnTheFlyRows(t)}}};r.resizableOptions=function(t){let r=false;return{handles:"ne, se, sw, nw, w, n, e, s",autoHide:true,create:function(){r=new i(t,e.EDITOR.getGrid())},start:function(o,s){if(r===false){r=new i(t,e.EDITOR.getGrid())}const a=$(o.originalEvent.target);t.setControlsEnabled(false);t.capsule.setResizingEnabled(true);r.start(n.getResizeHandleDirection(a))},stop:function(i,n){r.stop(n.size.width,n.size.height);t.capsule.setResizingEnabled(false);t.setControlsEnabled(true);t.checkHoverState();e.EDITOR.updateToc(false);e.EDITOR.adjust();e.EDITOR.setChanged(true)},resize:function(e,t){r.resize(t.size.width,t.size.height)}}};r.prototype.asSubmittable=function(){return{id:this.data.id,containerId:this.data.container.id,name:this.data.name,targetId:this.data.targetId,interestGroup:this.data.container.isSortable?this.data.interestGroup||"":"",type:this.data.container.type,filter:this.data.container.filter,row:this.data.row,column:this.data.column,rows:this.data.rows,columns:this.data.columns,content:$.extend({},this.data.content),isTocItem:this.data.isTocItem}};r.prototype.get$=function(){return this.capsule.get$()};r.prototype.getId=function(){return this.data.id};r.prototype.getName=function(){return this.data.name};r.prototype.getContainerName=function(){return this.data.container.name};r.prototype.setName=function(e){this.data.name=e||""};r.prototype.getContainerId=function(){return this.data.container.id};r.prototype.isRecycled=function(){return this.data.isRecycled};r.prototype.setRecycled=function(e){if(e){this.setShown(false);this.setRows(1);this.setColumns(1);this.capsule.recycle();this.data.isRecycled=true}else{this.data.isRecycled=false}};r.prototype.setLayeringIndex=function(e){this.layeringIndex=e;this.capsule.setLayeringIndex(e)};r.prototype.getLayeringIndex=function(e){return this.layeringIndex};r.prototype.setOnLayeringRotate=function(e){if(e){this.callbacks.onLayeringRotate=()=>e.call(this)}else{this.callbacks.onLayeringRotate=undefined}};r.prototype.rotateLayering=function(){if(this.callbacks.onLayeringRotate){this.callbacks.onLayeringRotate()}};r.prototype.isInArea=function(e){return!this.isNotInArea(e)};r.prototype.isNotInArea=function(e){var t=e.column,i=t+e.columns-1;var n=e.row,r=n+e.rows-1;var o=this.data.column;var s=o+this.data.columns-1;var a=this.data.row;var l=a+this.data.rows-1;return Math.max(o,s)<t||Math.min(o,s)>i||Math.max(a,l)<n||Math.min(a,l)>r};r.prototype.isMatching=function(t){if(t===e.ALL_ENTRIES||this.data.targetId===e.ALL_RECIPIENTS){return true}return this.data.targetId===t};r.prototype.isToc=function(){return this.data.container.isToc};r.prototype.modeEdit=function(){return this.data.container.modeEdit};r.prototype.isTocItem=function(){return this.data.isTocItem};r.prototype.setTocItem=function(e){this.data.isTocItem=!!e};r.prototype.isSortable=function(){return this.data.container.isSortable};r.prototype.getInterestGroup=function(){if(this.isSortable()){return this.data.interestGroup||""}else{return""}};r.prototype.setInterestGroup=function(e){if(this.isSortable()){this.data.interestGroup=e||""}else{this.data.interestGroup=""}};r.prototype.getTargetId=function(){return this.data.targetId};r.prototype.setTargetId=function(t){this.data.targetId=t>=0?t:e.ALL_RECIPIENTS;this.capsule.updateControls()};r.prototype.getRow=function(){return this.data.row};r.prototype.setRow=function(e){return this.data.row=e};r.prototype.getColumn=function(){return this.data.column};r.prototype.setColumn=function(e){this.data.column=e};r.prototype.getZ=function(){return this.capsule.getZ()};r.prototype.setZ=function(e){this.capsule.setZ(e)};r.prototype.getRows=function(){return this.data.rows};r.prototype.setRows=function(e){this.data.rows=e};r.prototype.getColumns=function(){return this.data.columns};r.prototype.setColumns=function(e){this.data.columns=e};r.prototype.getArea=function(){return AGN.Lib.LB.Grid.area(this.data.row,this.data.column,this.data.rows,this.data.columns)};r.prototype.setArea=function(e){this.setRow(e.row);this.setColumn(e.column);this.setRows(e.rows);this.setColumns(e.columns)};r.prototype.getHeight=function(){return this.capsule.getHeight()};r.prototype.setShown=function(t){this.capsule.setShown(t);if(!this.isContainerDeleted()){this.setDraggable(t);if(!e.IS_BASIC_LB){this.setResizable(t)}}};r.prototype.setBorderHighlighted=function(e){this.capsule.setBorderHighlighted(e)};r.prototype.setHighlighted=function(e){this.capsule.setHighlighted(e)};r.prototype.setSize=function(e,t){this.capsule.setSize(e,t)};r.prototype.setCoordinates=function(e){this.capsule.setCoordinates(e)};r.prototype.setControlsEnabled=function(e){this.capsule.setControlsEnabled(e)};r.prototype.checkHoverState=function(){n.checkHoverState(this.capsule.get$())};r.prototype.adjustSize=function(t,i){const n=e.IS_BASIC_LB?"100%":t.getWidthForSpans(this.getColumns());this.setSize(n,i||"auto")};r.prototype.adjustHeight=function(e){this.capsule.adjustHeight(e)};r.prototype.adjustCoordinates=function(e){this.setCoordinates(e.getCoordinates(this.getRow(),this.getColumn()))};r.prototype.setDraggable=function(e){var t=this.capsule.get$();if(e){t.draggable(r.draggableOptions())}else{try{t.draggable("destroy")}catch(e){}}};r.prototype.setResizable=function(e){var t=this.capsule.get$();if(e){t.resizable(r.resizableOptions(this))}else{try{t.resizable("destroy")}catch(e){}}};r.prototype.getPlaceholders=function(e){var t=this.data.content;var i=[];var n={};var s=undefined;if(e){s=function(t){return t.placeholderType===e}}r.collectPlaceholders(this.data.container.markup,t,i,n,s);i.sort((function(e,t){return e.name.localeCompare(t.name)}));return o(i)};r.prototype.getPlaceholder=function(e){const t=this.getPlaceholders();return t.find((t=>t.id==e))};r.prototype.containsMultiPh=function(){return!!this.getMultiPh()};r.prototype.getMultiPh=function(){return this.data.container.markup.find((t=>t.placeholderType===e.PLACEHOLDER.MULTI))};r.prototype.setContent=function(e){$.extend(this.data.content,e)};r.prototype.asTocItem=function(){var e=this.data.container.tocItemPlaceholderId;if(e>0){var t=this.data.content;var i=[];var n={};function o(t){return t.id===e}r.collectPlaceholders(this.data.container.markup,t,i,n,o);if(i.length){var s=i[0];return{id:this.data.id,name:t[s.id]||"",placeholderName:s.name,isEnabled:this.data.isTocItem}}}return null};r.prototype.rebuild=function(e){this.capsule.embrace(r.render(this.data.container.markup,this.data.content,e))};r.prototype.pulse=function(){return this.capsule.pulse()};r.prototype.clone=function(){var e=new r(this.data);e.data.id=0;return e};r.prototype.isContainerDeleted=function(){return this.data.container.isDeleted};r.prototype.isRssTemplateChild=function(){return!!(this.data.container.type&&this.data.container.type.startsWith("rss:contentSourceId="))};r.prototype.isRssImportedChild=function(){const e="rss:import";return!!(this.data.container.type&&this.data.container.type.startsWith(e))||!!(this.data.type&&this.data.type.startsWith(e))};function o(t){const i=new Map(t.filter((function(t){return t.type===e.PLACEHOLDER.CHECK})).map((function(e){return[e.id,e.options.split(",").map((function(e){return t.find((function(t){return e==t.id}))}))]})));const n=Array.from(i.values()).flat();const r=[];t.filter((function(e){return!n.includes(e)})).forEach((function(t){r.push(t);if(t.type===e.PLACEHOLDER.CHECK){const e=i.get(t.id);e.forEach((function(e){r.push(e)}))}}));return r}function s(t,i){if(!i){return t.placeholderType===e.PLACEHOLDER.MULTI}if(t.placeholderType!==e.PLACEHOLDER.SELECT){return true}return a(t,i)}function a(e,t){return!_.has(e.options,"showByValue")||l(e.options,t)}function l(e,t){return e?.showByValue===t}AGN.Lib.LB.Child=r})();(()=>{const e=AGN.Lib.LB.Definitions;function t(e){this.data=$.extend({id:0,name:"",isToc:false,markup:[],content:{}},e)}t.draggableOptions=function(){return{stack:"#lb-childrens .div-container",revert:"invalid",distance:20,helper:"clone",appendTo:"body",containment:"window",zIndex:e.TOP_Z,refreshPositions:true,start:function(t,i){i.helper.width($(this).width());e.EDITOR.setChildrenControlsEnabled(false)},stop:function(t,i){i.helper.width("auto");e.EDITOR.setChildrenControlsEnabled(true);e.EDITOR.clearEmptyAddedOnTheFlyRows()},drag:function(t,i){e.EDITOR.processAddedOnTheFlyRows(t)}}};t.prototype.getContainerId=function(){return this.data.id};t.prototype.getRows=function(){return 1};t.prototype.getColumns=function(){return 1};t.prototype.isToc=function(){return this.data.isToc};t.prototype.instantiate=function(){return new AGN.Lib.LB.Child({name:this.data.name,container:this.data})};AGN.Lib.LB.ChildSample=t})();(()=>{const e=AGN.Lib.LB.Definitions;const t=AGN.Lib.LB.Child;function i(e){if(e[0]instanceof t){this.children=e.slice()}else{this.children=e.sort((function(e,t){if(e.z===t.z){if(e.columns===t.columns){return e.column-t.column}return t.columns-e.columns}return e.z-t.z})).map((function(e){return new t(e)}))}}i.make=function(e){return new i(e||[])};i.prototype.get=function(){return this.children.slice()};i.prototype.size=function(){return this.children.length};i.prototype.each=function(e){this.children.forEach(e)};i.prototype.sort=function(e){this.children.sort(e)};i.prototype.contains=function(e){return this.children.indexOf(e)>=0};i.prototype.containsToc=function(){for(var e=0;e<this.children.length;e++){if(this.children[e].isToc()){return true}}return false};i.prototype.matching=function(e){return this.select((function(t){return t.isMatching(e)}))};i.prototype.unmatching=function(e){return this.select((function(t){return!t.isMatching(e)}))};i.prototype.containsRssChildren=function(){return this.active().children.some((function(e){return e.isRssImportedChild()||e.isRssTemplateChild()}))};i.prototype.active=function(){return this.select((function(e){return!e.isRecycled()}))};i.prototype.recycled=function(){return this.select((function(e){return e.isRecycled()}))};i.prototype.select=function(e){return new i(this.children.filter(e))};i.prototype.removeChilds=function(e){this.children=this.children.filter((t=>!e.includes(t)))};i.prototype.add=function(e){e.setZ(this.active().calculateMaxZ()+1);this.children.push(e)};i.prototype.groupsMap=function(){var e={};var t=_.groupBy(this.children,(function(e){return e.getRow()}));$.each(t,(function(t,i){var n={};i.forEach((function(e){var t=e.getColumns();if(t>1){var i=e.getColumn();for(var r=1;r<t;r++){n[i+r]=i}}}));i.forEach((function(i){var r=i.getColumn();while(n[r]){r=n[r]}var o=t+":"+r;if(e[o]===undefined){e[o]=[]}e[o].push(i)}))}));return e};i.prototype.groups=function(){var e=[];var t=this.groupsMap();$.each(t,(function(t,i){if(i.length){e.push(i)}}));return e};i.prototype.collectTargetIds=function(){var e={};this.each((function(t){e[t.getTargetId()]=true}));return Object.keys(e).sort()};i.prototype.calculateMaxZ=function(){return this.children.reduce((function(e,t){return Math.max(t.getZ(),e)}),0)};i.prototype.calculateRowsCount=function(){return this.children.reduce((function(e,t){return Math.max(t.getRow()+t.getRows()-1,e)}),0)};i.prototype.setShown=function(t){this.children.forEach((function(i){i.setShown(t);var n=i.data.container.modeEdit;if(n===e.CONTAINER_TYPE.ANCHORED||n===e.CONTAINER_TYPE.FIXED_AND_ANCHORED){i.setDraggable(false);if(!e.IS_BASIC_LB){i.setResizable(false)}}}))};i.prototype.setBorderHighlighted=function(e){this.children.forEach((function(t){t.setBorderHighlighted(e)}))};i.prototype.setHighlighted=function(e){this.children.forEach((function(t){t.setHighlighted(e)}))};i.prototype.setControlsEnabled=function(t){this.children.forEach((function(i){i.setControlsEnabled(t);if(!i.isContainerDeleted()&&!e.IS_BASIC_LB){i.setResizable(t)}i.checkHoverState()}))};i.prototype.asTocItems=function(e){var t;if(e){t=_.map(this.groupsMap(),(function(e){return _.maxBy(e,(function(e){return e.getZ()}))}))}else{t=this.children.slice()}var i=t.sort((function(e,t){if(e.getRow()===t.getRow()){if(e.getColumn()===t.getColumn()){return t.getZ()-e.getZ()}return e.getColumn()-t.getColumn()}return e.getRow()-t.getRow()})).map((function(e){return e.asTocItem()})).filter((function(e){return!!e}));if(e){return i.filter((function(e){return e.isEnabled}))}return i};i.prototype.pulse=function(){var e=this.children.map((function(e){return e.pulse()}));return e};i.prototype.rebuildStatic=function(e){this.each((function(t){if(!t.isToc()){t.rebuild(e)}}))};i.prototype.rebuildToc=function(e){let t=false;this.each((i=>{if(i.isToc()){i.rebuild($.extend({},e,{toc:this.asTocItems(true)}));t=true}}));return t};i.prototype.rotateLayering=function(){const e=this.children.slice().sort(((e,t)=>e.getZ()-t.getZ()));const t=e.map((e=>e.getZ()));e.forEach(((e,i)=>{e.setShown(i===t.length-2);e.setZ(t[(i+1)%t.length])}))};i.prototype.setLayeringByTargets=function(e){const t=this.children.slice().sort(((e,t)=>t.getZ()-e.getZ()));const i=t.map((e=>e.getZ()));_.sortBy(t,(t=>e.indexOf(t.getTargetId()))).forEach(((e,t)=>{e.setShown(t===0);e.setZ(i[t])}))};i.prototype.stick=function(e){this.children.forEach((function(t){if(t.isInArea(e)){t.setArea(e)}}))};i.prototype.adjustLayering=function(){let e=this.children.length;this.children.forEach((t=>t.setZ(--e)))};i.prototype.adjustSizes=function(e){this.children.forEach((function(t){t.adjustSize(e)}))};i.prototype.adjustCoordinates=function(e){this.children.forEach((function(t){t.adjustCoordinates(e)}))};AGN.Lib.LB.Children=i})();(()=>{const e=AGN.Lib.LB.Definitions;const i="-mobile";function n(e,t,i){this.$el=e;this.child=t;this.options=i;this._displayMediapoolImages();this._controlCheckPhChildrenVisibility();this._updateImageSrcPreview=_.throttle(this._updateImageSrcPreview,300)}n.get=function(){return r().data("agn:child-editor")};n.init=function(e,t){const o=n.get();if(o&&!o.isInitForChild(e)&&!o.applyScheduledChanges()){return}const s=AGN.Lib.Template.dom("div-editing-block",{...t,mobileSuffix:i});const a=AGN.Lib.Template.dom("child-targetgroup-dropdown",{targets:t.targets,targetId:e.getTargetId()});const l=r();l.find(".js-wysiwyg").each((function(){if(window.Jodit){Jodit.instances[$(this).attr("id")].destruct()}else{window.removeEditor($(this).attr("id"))}}));l.find(".tile-title").text(e.getContainerName());l.find(".tile-body").empty().append(s);l.find("> .tile-header .tile-controls").empty().removeClass("hidden").append(a);const c=new n(l,e,t);l.data("agn:child-editor",c);AGN.Lib.Controller.init(s);AGN.runAll(l.find("> *"));AGN.Lib.Form.get(l).initFields();c.setupJsEditorChangeDetection()};n.prototype.updateImageSrc=function(e){const t=e.data("placeholder-id");const i=$.trim(e.val());this._updateImageSrcPreview(t,i)};n.prototype._updateImageSrcPreview=function(e,t){const i=$(`#preview-${e}`);if(i.attr("src")!==t){i.attr("src",$.trim(AGN.Lib.LB.AgnTagsResolver.resolve(t))||this.options.noPreviewImageLink)}};n.prototype.updateImage=function(e,t){const n=e.data("placeholder-id");const r=e.prop("files");const o=$(`#content-${n}`);if(r&&r.length){const o=r[0];if(o.type==="image"||o.type.match("image/.*")){const e=new FileReader;if(t){const e=n.replace(i,"");const t=$(`#image-name-${e}`).text();AGN.Lib.Helpers.renameFile(o,this.options.mobileImagePrefix+t)}else{const e=this._buildMobilePlaceholder(n);this._toggleMobileImageBlockVisibility(e,true);this._updateImagePreview(e)}e.onload=e=>this._updateImagePreview(n,e.target.result,o.name,o.name);e.readAsDataURL(o)}else{AGN.Lib.Helpers.clearFormField(e);this._updateImagePreview(n)}}else{this._updateImagePreview(n)}o.val("")};n.prototype.syncImageCategories=function(e,t){const i=$(`#content-${e}`).val();const n=this._findPlaceholdersWithImage(i);n.forEach((e=>{const i=$(`#image-category-id-${e.id}`);AGN.Lib.Select.get(i).selectValue(t)}))};n.prototype._findPlaceholdersWithImage=function(t){return this.child.getPlaceholders(e.PLACEHOLDER.IMAGE).filter((e=>t==$(`#content-${e.id}`).val()))};n.prototype._updateImagePreview=function(e,t,i,n){const r=$(`#preview-${e}`);const o=$(`#image-name-${e}`);if(r.attr("src")!==t){r.attr("src",t||this.options.noPreviewImageLink)}r.attr("title",n||"");o.text(i||"")};n.prototype._toggleMobileImageBlockVisibility=function(e,t){const i=$(`#image-block-${e}`);AGN.Lib.LB.Ui.setShown(i,t)};n.prototype.chooseImage=function(e){const t=$(`#file-${e}`);if(t.val()||String(e).endsWith(i)){t.trigger("click")}else{this.showMediapoolDialog(e)}};n.prototype.deleteImage=function(e,t){this._clearImageData(e);if(!t){const t=this._buildMobilePlaceholder(e);this._clearImageData(t);this._changeImageControlsState(t,false);this._toggleMobileImageBlockVisibility(t,false);this.savePlaceholder(e)}};n.prototype._clearImageData=function(e){const t=$(`#file-${e}`);const i=$(`#image-name-${e}`);const n=$(`#content-${e}`);const r=$(`#preview-${e}`);AGN.Lib.Helpers.clearFormField(t);i.text("");n.val("");r.attr("src",this.options.noPreviewImageLink)};n.prototype.showMediapoolDialog=function(e){AGN.Lib.Confirm.request(AGN.url("/mediapool/image/pick.action")).done((t=>{this._updateMobileAlternative(t.id,e);let i=t.category.categoryId;const n=this._findPlaceholdersWithImage(t.id);if(n.length>0){i=$(`#image-category-id-${n[0].id}`).val()}$(`#content-${e}`).val(t.id);AGN.Lib.Select.get($(`#image-category-id-${e}`)).selectValue(i);AGN.Lib.Helpers.clearFormField($(`#file-${e}`));this._updateImagePreview(e,t.src,t.fileName,t.title);this.savePlaceholder(e)}))};n.prototype._updateMobileAlternative=function(e,t){const i=this._buildMobilePlaceholder(t);this._loadMobileAlternative(e).then((e=>{$(`#content-${i}`).val(e.id);this._updateImagePreview(i,e.src,e.name,e.title);this._changeImageControlsState(i,true)})).catch((()=>{this._updateImagePreview(i);this._changeImageControlsState(i,false)})).finally((()=>{AGN.Lib.Helpers.clearFormField($(`#file-${i}`));this._toggleMobileImageBlockVisibility(i,true)}))};n.prototype._changeImageControlsState=function(e,t){const i=$(`#preview-${e}`);$(`#image-delete-button-${e}`).prop("disabled",t);$(`#choose-image-btn-${e}`).prop("disabled",t);i.toggleClass("clickable",!t);i.attr("data-action",t?"":"chooseImage")};n.prototype._loadMobileAlternative=function(e){return new Promise(((t,i)=>{$.ajax({url:AGN.url(`/mediapool/${e}/mobile-alternative/json.action`),type:"GET",success:e=>t(e),error:()=>i(),statusCode:{404:()=>i()}})}))};n.prototype._buildMobilePlaceholder=function(e){return e+i};n.prototype.updateChildTarget=function(t){e.EDITOR.setChildTarget(this.child,t)};n.prototype.updateChildInterestGroup=function(){const t=$("#is-interest-sortable").is(":checked")?$("#interest-group").val():"";this.child.setInterestGroup(t);e.EDITOR.setChanged(true)};n.prototype.updateToC=function(){const t={};$("input.js-is-toc-item").each((function(){const e=$(this);t[e.data("child-id")]=e.is(":checked")}));e.EDITOR.updateTocItemsUsage(this.child,t)};n.prototype.setTocItem=function(t){e.EDITOR.setTocItem(this.child,t)};n.prototype._saveIfChanged=function(e){if(this._placeholderWasChanged(e)){return this.savePlaceholder(e)}return true};n.prototype._placeholderWasChanged=function(e){const t=this.child.getPlaceholder(e);if(!t){return false}const i=t.value;const n=this._readPlaceholderValue(e,t.type);return i!==n};n.prototype.savePlaceholder=function(t){const i=this.child.getPlaceholder(t);if(!this._validatePlaceholder(i)){return false}this._prepareDataBeforeSave(i).done((()=>{if(i.type===e.PLACEHOLDER.TEXT){const e=this._findWysiwygEditor(t);if(e.exists()){AGN.Lib.Editor.get(e).val(e.val(),true)}}const n=this._readPlaceholderValue(t,i.type);e.EDITOR.savePlaceholder(this.child,t,n)}));return true};n.prototype.updateCategory=function(t){const i=this.child.getPlaceholder(t);if(this._validatePlaceholder(i)){const i=parseInt($(`#content-${t}`).val());if(i>0){const n=$(`#image-category-id-${t}`).val();this.updateImageCategory(i,n,true).then((t=>{e.EDITOR.getUndoManager().operation("mediapoolImageCategoryChanged",this.child,i,t,n)}))}}};n.prototype._readPlaceholderValue=function(t,i){const n=$(`#content-${t}`);if(i===e.PLACEHOLDER.CHECK){return n.prop("checked")?"checked":""}if(i===e.PLACEHOLDER.TEXT){const e=window.Jodit?Jodit.instances[n.attr("id")]?.value:CKEDITOR.instances[n.attr("id")]?.getData();return e||n.val()}return n.val()};n.prototype._prepareDataBeforeSave=function(t){const i=$.Deferred();if(t.type===e.PLACEHOLDER.IMAGE){this._uploadImage(t).done((()=>i.resolve()))}else{i.resolve()}return i.promise()};n.prototype.updateImageCategory=function(e,t,i=false){const n=$.Deferred();$.ajax(AGN.url(`/mediapool/${e}/category/change.action`),{type:"POST",dataType:"json",async:i,data:{categoryId:t}}).done((e=>n.resolve(e.data))).fail((()=>n.reject()));return n.promise()};n.prototype._uploadImage=function(e){const t=$.Deferred();const i=e.id;const n=this._buildMobilePlaceholder(i);this._collectImagesToUpload(i,n).then((e=>{if(!e.length){t.resolve()}else{const i=new FormData;e.forEach(((e,t)=>{i.append(`uploads[${t}].file`,e.image);i.append(`uploads[${t}].fileName`,e.image.name);i.append(`uploads[${t}].title`,e.image.name);i.append(`uploads[${t}].categoryId`,e.categoryId)}));$.ajax(AGN.url("/mediapool/upload.action?asJson=true"),{type:"POST",dataType:"json",enctype:"multipart/form-data",processData:false,contentType:false,data:i}).done((i=>{AGN.Lib.JsonMessages(i.popups);if(i.data){e.forEach((e=>{const t=i.data[e.image.name];if(t){const i=e.placeholderId;$(`#content-${i}`).val(t);AGN.Lib.Helpers.clearFormField($(`#file-${i}`));if(i==n){this._changeImageControlsState(n,true)}}}))}if(i.success===true){t.resolve()}else{t.reject()}})).fail((()=>t.reject()))}}));return t.promise()};n.prototype._collectImagesToUpload=function(e,t){return new Promise((i=>{const n=[];const r=t=>{const i=$(`#file-${t}`).prop("files");if(i?.length){return this._checkIfCanBeUploaded(i[0].name).then((()=>{n.push({placeholderId:t,image:i[0],categoryId:$(`#image-category-id-${e}`).val()})}))}return Promise.resolve()};Promise.all([e,t].map(r)).then((()=>i(n)))}))};n.prototype._checkIfCanBeUploaded=function(e){return new Promise(((t,i)=>{$.get(AGN.url("/mediapool/findIdByFilename.action"),{fileName:e}).done((e=>{if(e>0){AGN.Lib.Confirm.from("lb-replace-mediapool-image-question-modal",{imageId:e}).done(t).catch(i)}else{t()}}))}))};n.prototype._validatePlaceholder=function(t){if(t.type===e.PLACEHOLDER.CHECK||t.type===e.PLACEHOLDER.COLOR){return true}if(t.type===e.PLACEHOLDER.IMAGE){return this._validateImageCategory(t)&&this._validateImageFormats(t)}if(!window.Jodit&&t.type===e.PLACEHOLDER.TEXT){const e=this._findWysiwygEditor(t.id);if(e.exists()){CKEDITOR.instances[e.attr("id")]?.updateElement()}}return this._validateHtml(t)};n.prototype._validateHtml=function(t){const i=$(`#content-${t.id}`).val();if(!$.trim(i)){return true}let n=false;$.ajax({type:"POST",url:AGN.url(`/layoutbuilder/template/${e.EDITOR.getTemplateId()}/validateHtml.action`),contentType:"application/json",async:false,data:JSON.stringify({htmlPlaceholders:{[t.name]:i}})}).done((e=>{AGN.Lib.JsonMessages(e.popups,true);n=!!e.success}));return n};n.prototype._validateImageCategory=function(e){const i=e.id;const n=$(`#image-category-id-${i}`);AGN.Lib.Form.cleanFieldFeedback$(n);if(n.val()>0){return true}const r=!!$(`#file-${i}`).val();const o=$(`#content-${i}`).val();if(r||parseInt(o)>0){AGN.Lib.Form.showFieldError$(n,t("error.grid.noCategorySelected"))}return false};n.prototype._validateImageFormats=function(e){const i=e=>{const t=e.match(/[^.\\/]\.([^.\\/]+)$/);if(t){const e=["GIF","JPG","JPEG","PNG","SVG","ICO"];return e.includes(t[1].toUpperCase())}return false};const n=e.id;const r=$(`#file-${n}`).val();const o=$(`#content-${n}`);AGN.Lib.Form.cleanFieldFeedback$(o);if(r&&!i(r)){AGN.Lib.Form.showFieldError$(o,t("grid.divchild.format.error"));return false}return true};n.prototype._findWysiwygEditor=function(e){return this.$el.find(`.js-wysiwyg[data-ph-id='${e}']`)};n.prototype._controlCheckPhChildrenVisibility=function(){this.child.getPlaceholders(e.PLACEHOLDER.CHECK).filter((e=>e)).forEach((e=>{const t=$(`\n            <div id="${e.id}-children" class="bordered-box-sm" data-show-by-checkbox="#content-${e.id}">\n                <div class="row g-2"></div>\n            </div>\n        `);t.insertAfter($(`#content-${e.id}`).parent());e.options.split(",").forEach((e=>{t.find("> .row").append($(`.ph-${e}`))}))}));AGN.Lib.CoreInitializer.run("checkbox-hider",this.$el)};n.prototype._displayMediapoolImages=function(){const t=this.child.getPlaceholders(e.PLACEHOLDER.IMAGE);const i=t.map((e=>parseInt(e.value))).filter((e=>e>0));if(i.length<=0){return}$.ajax(AGN.url("/mediapool/elements/json.action"),{type:"POST",dataType:"json",traditional:true,contentType:"application/json",data:JSON.stringify(i)}).done((e=>{t.forEach((t=>{const i=parseInt(t.value);if(i>0){const n=e[i];AGN.Lib.Select.get($(`#image-category-id-${t.id}`)).selectValue(n.categoryId);this._updateImagePreview(t.id,n.src,n.name,n.title);const r=this._buildMobilePlaceholder(t.id);if(n.mobileSrc){this._updateImagePreview(r,n.mobileSrc,n.mobileName,n.mobileTitle);this._changeImageControlsState(r,true)}this._toggleMobileImageBlockVisibility(r,true)}}))}))};n.prototype.setupJsEditorChangeDetection=function(t=this.$el){const i=this;t.find(".js-editor").each((function(){const t=$(this);i._clearAutoSaveTimeout(t);const r=()=>{i._clearAutoSaveTimeout(t);const r=window.setTimeout((()=>{if(i===n.get()){i._saveIfChanged(t.data("ph-id"))}}),e.AUTOSAVE_INACITVE_INTERVAL);t.data("lb:autosave-timeoutId",r)};t.off("editor:change",r);t.on("editor:change",r);if(window.Jodit){t.on("change",r)}else{CKEDITOR.instances[t.attr("id")]?.on("change",r)}}))};n.prototype._clearAutoSaveTimeout=function(e){if(e.data("lb:autosave-timeoutId")!=="none"){clearTimeout(e.data("lb:autosave-timeoutId"));e.data("lb:autosave-timeoutId","none")}};n.prototype.applyScheduledChanges=function(){const e=this;let t=true;this.$el.find(".js-editor").each((function(){const i=$(this);e._clearAutoSaveTimeout(i);const n=e._saveIfChanged(i.data("ph-id"));if(t){t=n}}));return t};n.prototype.notifyTabChanged=function(e){const t=e.closest(".tile");const i=t.find(".js-editor").data("ph-id");this.setupJsEditorChangeDetection(t);this._saveIfChanged(i)};n.prototype.get$=function(){return this.$el};n.prototype.isInitForChild=function(e){return this.child===e};function r(){return $("#div-child-edit-tile")}AGN.Lib.LB.ChildEditor=n})();(()=>{function e(e){this.child=e}e.prototype.getOptions=function(){return{targetName:AGN.Lib.LB.Definitions.EDITOR.getTargetName(this.child.getTargetId()),isToc:this.child.isToc(),containerDeleted:this.child.isContainerDeleted(),containerModeEdit:this.child.modeEdit()}};e.prototype.createControls=function(e){var t=AGN.Lib.Template.dom(e,this.getOptions());AGN.Lib.LB.Child.set(t.find("[data-action]"),this.child);AGN.runAll(t);return t};e.prototype.createInlineControls=function(){return this.createControls("child-controls")};e.prototype.createPopoverControls=function(){return this.createControls("child-popover-controls")};AGN.Lib.LB.ControlsFactory=e})();(()=>{const e=AGN.Lib.LB.Definitions;const t=AGN.Lib.LB.Child;function i(i){this.$capsule=i;this.child=t.get(i);this.factory=new AGN.Lib.LB.ControlsFactory(this.child);this.timeoutId=null;this.state=e.CONTROLS_STATE.HIDDEN;this.update();i.on("mouseenter",(()=>this.show()));i.on("mouseleave",(()=>this.hide()))}i.popoverOptions=function(e){return{trigger:"manual",html:true,content:function(){return e.getPopoverContent()}}};i.prototype.stopHiding=function(){if(this.timeoutId){clearTimeout(this.timeoutId);this.timeoutId=undefined;return true}return false};i.prototype.popoverShow=function(t=true){if(!this.stopHiding()){this.popover.show();if(t){const e=$(this.popover.tip);e.on("mouseenter",(()=>this.popoverShow(false)));e.on("mouseleave",(()=>this.popoverHide()))}}this.state=e.CONTROLS_STATE.POPOVER};i.prototype.popoverHide=function(t){this.stopHiding();if(t===true){this.popover.hide();this.state=e.CONTROLS_STATE.HIDDEN}else{var i=this;this.timeoutId=setTimeout((function(){i.popoverHide(true)}),200)}};i.prototype.inlineShow=function(){this.$inlineControls.css("display","flex");this.state=e.CONTROLS_STATE.INLINE};i.prototype.inlineHide=function(){this.$inlineControls.hide();this.state=e.CONTROLS_STATE.HIDDEN};i.prototype.show=function(){if(this.state===e.CONTROLS_STATE.DISABLED){return}this.$inlineControls.css("bottom","");if(this.$inlineControls.height()<=this.$capsule.height()){this.$inlineControls.css("bottom",0);if(this.state===e.CONTROLS_STATE.POPOVER){this.popoverHide(true)}this.inlineShow()}else{if(this.state===e.CONTROLS_STATE.INLINE){this.inlineHide()}this.popoverShow()}};i.prototype.hide=function(t){switch(this.state){case e.CONTROLS_STATE.INLINE:this.inlineHide();break;case e.CONTROLS_STATE.POPOVER:this.popoverHide(t);break}};i.prototype.setEnabled=function(t){if(t){if(this.state===e.CONTROLS_STATE.DISABLED){this.state=e.CONTROLS_STATE.HIDDEN}}else{this.hide(true);this.state=e.CONTROLS_STATE.DISABLED}};i.prototype.update=function(){if(this.$inlineControls){this.$inlineControls.remove()}this.$inlineControls=this.factory.createInlineControls();this.$capsule.append(this.$inlineControls);if(this.popover){AGN.Lib.Popover.remove(this.$capsule)}if(this.$popoverControls){this.$popoverControls=undefined}this.popover=AGN.Lib.Popover.create(this.$capsule,i.popoverOptions(this));if(this.state===e.CONTROLS_STATE.INLINE||this.state===e.CONTROLS_STATE.POPOVER){this.show()}};i.prototype.getPopoverContent=function(){if(this.$popoverControls===undefined){this.$popoverControls=this.factory.createPopoverControls();var e=this.$popoverControls.find("[data-action]");t.set(e,this.child);var i=this;e.on("click",(function(){i.popoverHide(true)}))}this._updateLayeringBtn(this.child.getLayeringIndex(),this.$popoverControls);var n=this.$popoverControls.clone(true);AGN.runAll(n);return n};i.prototype.updateLayeringBtn=function(e){this._updateLayeringBtn(e,this.$inlineControls);this._updateLayeringBtn(e,this.$popoverControls)};i.prototype._updateLayeringBtn=function(e,t){if(!t){return}const i=t.find(".lb-layering-btn");if(e>0){i.find(".layer-number").text(e);i.off("click");i.on("click",(()=>{this.child.rotateLayering();this.hide()}))}i.toggleClass("hidden",e<=0)};i.prototype.remove=function(){this.state=e.CONTROLS_STATE.DISABLED;this.stopHiding();this.popover.destroy();this.$popoverControls=undefined;this.$inlineControls.remove();this.$inlineControls=undefined};AGN.Lib.LB.Controls=i})();(()=>{const e=AGN.Lib.LB.Definitions;const i=AGN.Lib.LB.Ui;function n(e){var t=this;var r=$.Deferred();var o=AGN.Lib.Template.dom("div-sandbox");this.promise=r.promise();this.watcher=new AGN.Lib.LB.PromiseProgressWatcher;this.$capsule=o;this.$content=n.stub();if(e.isContainerDeleted()){this.showIsDeleted()}o.find("iframe").on("load",(function(){var e=$(this).contents().get(0);$(e.head).append(n.style());$(e.body).append(t.$content);t.watcher.bind(i.imagesAdjusted(t.$content));r.resolveWith(t)}));o.appendTo("#lb-childrens");AGN.Lib.LB.Child.set(o,e);this.controls=new AGN.Lib.LB.Controls(o)}n.stub=function(){return $('<div class="div-container"></div>')};n.css=function(){return $("#template-styles").html()};n.style=function(){return $("<style/>",{html:this.css()})};n.prototype.get$=function(){return this.$capsule};n.prototype.updateControls=function(){this.controls.update()};n.prototype.setControlsEnabled=function(e){this.controls.setEnabled(e)};n.prototype.ready=function(e){if(e!==undefined){this.promise.done(e)}return this.promise.state()==="resolved"};n.prototype.setLayeringIndex=function(e){this.controls.updateLayeringBtn(e)};n.prototype.pulse=function(){return this.watcher.promise()};n.prototype.embrace=function(e){var t=$(e).filter("*");if(this.ready()){this.$content.replaceWith(t);this.$content=t;var n=this.$capsule.outerWidth();if(n>0){this.setSize(n,"auto")}this.watcher.bind(i.imagesAdjusted(t,true))}else{this.$content=t}};n.prototype.recycle=function(){var e=this;this.setShown(false);this.ready((function(){var t=n.stub();e.watcher.bind(false);e.$content.replaceWith(t);e.$content=t}))};n.prototype.getZ=function(){return this.$capsule.css("z-index")};n.prototype.setZ=function(e){this.$capsule.css("z-index",e)};n.prototype.setShown=function(e){i.setShown(this.$capsule,e)};n.prototype.setBorderHighlighted=function(e){this.$capsule.toggleClass("highlight-border",e)};n.prototype.setHighlighted=function(e){this.$capsule.toggleClass("highlighted",e)};n.prototype.setCoordinates=function(e){this.$capsule.offset(e)};n.prototype.setSize=function(t,i){if(!e.IS_BASIC_LB){this.$content.outerWidth(t)}this.$capsule.outerWidth(t);if(this.ready()){this.$content.style("width",(function(e){return e}),"important");this.$content.style("height","auto","important");if(i==="auto"){i=this.$content.outerHeight()}this.$capsule.outerHeight(i)}else{if(i==="auto"){this.$capsule.outerHeight(e.EMPTY_ROW_HEIGHT)}else{this.$capsule.outerHeight(i)}}};n.prototype.adjustHeight=function(e){this.$capsule.outerHeight(e)};n.prototype.getHeight=function(){if(this.ready()){return i.getHeightAccurate(this.$content)}else{return e.EMPTY_ROW_HEIGHT}};n.prototype.setResizingEnabled=function(e){if(e){this.$capsule.css("box-sizing","content-box");this.$capsule.css("opacity",.4);this.$content.style("width","100%","important");this.$content.style("height","100%","important")}else{this.$capsule.css("box-sizing","");this.$capsule.css("opacity","")}};n.prototype.showIsDeleted=function(){const e=this.$capsule.find(".div-sandbox-overlay");e.addClass("div--deleted");const i=$(`\n        <div data-tooltip="${t("grid.container.deleted")}">\n            <button type="button" class="btn btn-icon btn-danger pe-none">\n                <i class="icon icon-trash-alt"></i>\n            </button>\n        </div>\n    `);AGN.Lib.Tooltip.create(i,AGN.Lib.Tooltip.options(i));e.append(i)};AGN.Lib.LB.Capsule=n})();(()=>{const e=AGN.Lib.LB.Child;class t{constructor(e){this.$droppable=AGN.Lib.Template.dom("droppable");this.$droppable.data("agn:droppable",this);this.$droppable.droppable(t.options(this));this.row=e;this.callbacks={}}static get(e){return e.data("agn:droppable")}static options(t){return{accept:"[data-building-block]",tolerance:"pointer",deactivate:function(){t.setHovered(false);if(t.callbacks.onHoverChange){t.callbacks.onHoverChange(false)}},drop:function(i,n){t.setHovered(false);if(t.callbacks.onDrop){t.callbacks.onDrop(e.get(n.draggable))}t.row.isEmptyRowAddedOnTheFly=false},over:function(i,n){if(t.callbacks.onHoverChange){t.callbacks.onHoverChange(e.get(n.draggable),true)}else{t.setHovered(true)}},out:function(i,n){if(t.callbacks.onHoverChange){t.callbacks.onHoverChange(e.get(n.draggable),false)}else{t.setHovered(false)}}}}get$(){return this.$droppable}getCoordinates(){return this.$droppable.offset()}getRow(){return this.row}getHeight(){return AGN.Lib.LB.Ui.getHeightAccurate(this.$droppable)}setHeight(e){this.$droppable.outerHeight(e)}setHovered(e){this.$droppable.toggleClass("container-hover-accept",e)}remove(){this.$droppable.droppable("destroy");this.$droppable.remove();this.callbacks.onDrop=undefined;this.callbacks.onHoverChange=undefined}setOnDrop(e){var t=this;this.callbacks.onDrop=function(i){e.call(t,i)}}setOnHoverChange(e){var t=this;this.callbacks.onHoverChange=function(i,n){e.call(t,i,n)}}}AGN.Lib.LB.Droppable=t})();(()=>{const e=AGN.Lib.LB.Definitions;const i=AGN.Lib.LB.Ui;class n{constructor(e,n){this.$row=AGN.Lib.Template.dom("droppables-row");this.$removeButton=AGN.Lib.Template.dom("remove-row-button");this.$row.data("agn:row",this);this.$removeButton.data("agn:row",this);this.droppables=[];this.callbacks={};for(var r=1;r<=e;r++){var o=this.createDroppable();this.droppables.push(o);this.$row.append(o.get$())}this.setGuttered(n);this.$removeButton.appendTo("#lb-sidebar");i.setTooltip(this.$removeButton,t("grid.row.delete"))}static get(e){return e.data("agn:row")}static isEmpty(t){return!e.EDITOR.children.active().children.some((e=>e.getRow()>=t&&e.getRow()+e.getRows()-1<=t))}animateAppearance(){const e=this.$row;const t=e.clone(true);e.hide().after(t);t.show().addClass("container-row-animated");t.one("animationend",(function(){e.show();t.remove()}))}createDroppable(){var e=new AGN.Lib.LB.Droppable(this);var t=this;e.setOnHoverChange((function(e,i){if(t.callbacks.onHoverChange){var n=this;var r=t.droppables.indexOf(n)+1;if(r>0){t.callbacks.onHoverChange.call(t,n,e,r,i)}}}));e.setOnDrop((function(e){if(t.callbacks.onDrop){var i=this;var n=t.droppables.indexOf(i)+1;if(n>0){t.callbacks.onDrop.call(t,e,i,n)}}}));return e}get$(){return this.$row}each(e){this.droppables.forEach(e)}getDroppables(){return this.droppables.slice()}getDroppable(e){return this.droppables[e-1]||null}setHeight(t){if(t>0){t=Math.max(t,e.COLLAPSED_BLOCK_SIZE)}else{t=e.EMPTY_ROW_HEIGHT}this.droppables.forEach((e=>e.setHeight(t)))}isGuttered(){return this.$row.hasClass("guttered")}setGuttered(e){this.$row.toggleClass("guttered",!!e)}setHovered(e,t,i){if(t===undefined){this.droppables.forEach((t=>t.setHovered(e)))}else{if(i===undefined){i=t}this.droppables.forEach(((n,r)=>{var o=r+1;if(t<=o&&o<=i){n.setHovered(e)}else{n.setHovered(!e)}}))}}remove(){this.droppables.forEach((e=>e.remove()));this.droppables=[];i.removeTooltip(this.$removeButton);this.$removeButton.remove();this.$row.remove();this.callbacks.onDrop=undefined}setRemoveButtonShown(e){this.$removeButton.toggleClass("opacity-0",!e)}setOnHoverChange(e){this.callbacks.onHoverChange=e}setOnDrop(e){this.callbacks.onDrop=e}getRemoveBtn$(){return this.$removeButton}getCoordinates(){const e=this.$row.offset().left;const t=this.$row.offset().top;return{startX:e,endX:e+this.$row.outerWidth(),startY:t,endY:t+this.$row.outerHeight()}}}AGN.Lib.LB.Row=n})();(()=>{const e=AGN.Lib.LB.Definitions;function t(e,t){this.$template=$("#lb-grid-template");this.$sidebar=$("#lb-sidebar");this.columns=e.columns;this.rows=[];this.gap=e.gap;this.columnWidth=e.columnWidth;this.callbacks={};this.hoveredDroppable=null;for(var i=1;i<=t;i++){var n=this.createRow(e.gutters[i-1]);this.$template.append(n.get$());this.rows.push(n)}this.adjustSidebar();this.$template.addClass("is-initialized")}t.area=function(e,t,i,n){return{row:e,column:t,rows:i,columns:n}};t.prototype.createRow=function(e){var i=new AGN.Lib.LB.Row(this.columns,e);var n=this;i.setOnHoverChange((function(e,r,o,s){var a=n.getRowIndex(i)+1;if(a>0){if(s){n.setAreaHovered(t.area(a,o,r.getRows(),r.getColumns()));n.hoveredDroppable=e}else if(n.hoveredDroppable===e){n.setAreaHovered(false)}}else{n.setAreaHovered(false)}}));i.setOnDrop((function(e,r,o){if(n.callbacks.onDrop){var s=n.getRowIndex(i)+1;if(s>0){var a=e.getRows();var l=n.getRows()-s+1;if(a>l){a=l}var c=e.getColumns();var d=n.getColumns()-o+1;if(c>d){c=d}n.callbacks.onDrop.call(n,e,r,t.area(s,o,a,c))}}}));return i};t.prototype.each=function(e){this.rows.forEach(e)};t.prototype.getRows=function(){return this.rows.length};t.prototype.getColumns=function(){return this.columns};t.prototype.getRow=function(e){return this.rows[e-1]||null};t.prototype.getDroppable=function(e,t){var i=this.getRow(e);if(i){return i.getDroppable(t)}return null};t.prototype.getRowMargin=function(t){return e.UNCOLLAPSIBLE_GUTTER_SIZE+(t?this.gap:0)};t.prototype.getCoordinates=function(e,t){return this.getDroppable(e,t).getCoordinates()};t.prototype.getConstraints=function(e,t){return $.extend(this.getWidthConstraints(e,t),this.getHeightConstraints(e,t))};t.prototype.getWidthConstraints=function(e,t){const i=e.getColumn();const n=e.getColumns();const r=this.getWidthForSpans(1);let o;if(t.isHorizontal()){if(t.isEast()){o=this.getWidthForSpans(this.getColumns()-i+1)}else{o=this.getWidthForSpans(i+n-1)}}else{o=r}return{minWidth:r,maxWidth:o}};t.prototype.getHeightConstraints=function(e,t){var i=e.getColumns();var n=e.getColumn();var r=n+i-1;var o=e.getRows();var s=e.getRow();var a=s+o-1;var l,c;if(t.isVertical()){if(t.isSouth()){l=this.getMinHeightConstraint(s,n,1,i);a=this.getRows();if(t.isHorizontal()){if(t.isEast()){r=this.getColumns()}else{n=1}}}else{l=this.getMinHeightConstraint(a,n,1,i);s=1}c=this.getMaxHeightConstraint(s,n,a-s+1,r-n+1)}else{l=c=e.getHeight()}return{minHeight:Math.min(l,e.getHeight()),maxHeight:c}};t.prototype.getWidthForSpans=function(t){if(e.IS_BASIC_LB){return this.$template.width()}return this.columnWidth*t+this.gap*(t-1)};t.prototype.getHeightForSpans=function(e,t,i,n,r){var o=this;if(r===undefined){r=function(e,t){return e.getHeight()>t.getHeight()?e:t}}function s(e){return o.rows[e-1].getDroppables().slice(t-1,t+n-1).reduce(r)}var a=e;var l=e+i-1;if(a===l){return s(a).getHeight()}else{var c=s(a).get$();var d=s(l).get$();return d.position().top-c.position().top+d.outerHeight()}};t.prototype.getMinHeightConstraint=function(e,t,i,n){function r(e,t){return e.getHeight()<t.getHeight()?e:t}return this.getHeightForSpans(e,t,i,n,r)};t.prototype.getMaxHeightConstraint=function(e,t,i,n){function r(e,t){return e.getHeight()>t.getHeight()?e:t}return this.getHeightForSpans(e,t,i,n,r)};t.prototype.getArea=function(i,n,r,o){const s=this;let a,l;if(n.isHorizontal()){l=e.IS_BASIC_LB?1:Math.ceil(r/(this.columnWidth+this.gap));if(n.isEast()){a=i.getColumn()}else{a=i.getColumn()+i.getColumns()-l}}else{a=i.getColumn();l=i.getColumns()}function c(e){const t=s.rows[e-1];if(t){return t.getDroppables().slice(a-1,a+l-1).reduce(((e,t)=>e.getHeight()>t.getHeight()?e:t))}else{return null}}function d(e){return e.get$().position().top}var u,h;if(n.isVertical()){var p,f;h=1;if(n.isSouth()){u=i.getRow();p=c(u);while(f=c(u+h)){if(o>d(f)-d(p)){h++}else{break}}}else{u=i.getRow()+i.getRows()-1;f=c(u);while(p=c(u-1)){if(o>d(f)-d(p)+f.getHeight()-p.getHeight()){u--;h++}else{break}}}}else{u=i.getRow();h=i.getRows()}return t.area(u,a,h,l)};t.prototype.setAreaHovered=function(e){if(e){this.each((function(t,i){if(i>=e.row-1&&i<=e.row-1+e.rows-1){t.setHovered(true,e.column,e.column+e.columns-1)}else{t.setHovered(false)}}))}else{this.each((function(e){e.setHovered(false)}))}if(this.callbacks.onAreaHovered){this.callbacks.onAreaHovered.call(this,e)}};t.prototype.startResizing=function(e){if(this.callbacks.onResizingStarted){this.callbacks.onResizingStarted.call(this,e)}};t.prototype.stopResizing=function(e){if(this.callbacks.onResizingStopped){this.callbacks.onResizingStopped.call(this,e)}};t.prototype.adjustRows=function(e){AGN.Lib.LB.Adjustments.make(this,e.get())};t.prototype.getDroppables=function(){var t=[];var i=this.gap;this.each((function(n,r){var o=(n.isGuttered()?i:0)+e.UNCOLLAPSIBLE_GUTTER_SIZE;n.each((function(e,i){t.push({droppable:e,row:r+1,column:i+1,marginBottom:o})}))}));return t};t.prototype.addRowBefore=function(e){var t=this.getRowIndex(e);if(t>=0){var i=true;if(t>0){i=this.rows[t-1].isGuttered()}var n=this.createRow(i);this.rows[t].get$().before(n.get$());this.rows.splice(t,0,n)}return t+1};t.prototype.addRow=function(){if(this.rows.length>0){this.rows[this.rows.length-1].setGuttered(true)}var e=this.createRow(true);this.$template.append(e.get$());this.rows.push(e);return this.rows.length};t.prototype.removeRow=function(e){var t=this.getRowIndex(e);if(t>=0){this.rows[t].remove();this.rows.splice(t,1)}return t+1};t.prototype.getRowIndex=function(e){return this.rows.indexOf(e)};t.prototype.adjustSidebar=function(){const e=e=>{e.removeClass("btn--small");e.removeClass("btn--detached");e.removeClass("btn--attached");e.css("height","")};const t=(e,t)=>{const i=t.offset().top+t.outerHeight()/2;const n=e.outerHeight()/2;e.offset({top:i-n})};let i=null;this.each((n=>{const r=n.get$();const o=n.getRemoveBtn$();e(o);const s=r.outerHeight();const a=s-o.outerHeight();const l=a>=0;const c=10;if(l){if(a>=c*2){o.css("height",s-c*2)}o.addClass("btn--attached")}else{o.addClass("btn--small");const e=i?.getRemoveBtn$();if(e&&e.hasClass("btn--detached")){o.addClass("btn--attached")}else{o.addClass("btn--detached")}}t(o,r);n.setRemoveButtonShown(true);i=n}));this._updateSidebarWidth()};t.prototype._updateSidebarWidth=function(){const e=this.$sidebar.children().get().reduce(((e,t)=>{const{left:i}=$(t).position();const n=i+$(t).outerWidth(true);return Math.max(e,n)}),0);this.$sidebar.css("width",e)};t.prototype.setOnDrop=function(e){this.callbacks.onDrop=e};t.prototype.setOnAreaHovered=function(e){this.callbacks.onAreaHovered=e};t.prototype.setOnResizingStarted=function(e){this.callbacks.onResizingStarted=e};t.prototype.setOnResizingStopped=function(e){this.callbacks.onResizingStopped=e};AGN.Lib.LB.Grid=t})();(()=>{const e=AGN.Lib.LB.Definitions;function t(){t.prototype.import=function(){const e=this;this.getRssChildrenToReplaceWithNewContent().forEach((function(t){e._importContent(t)}))};t.prototype.getRssChildrenToReplaceWithNewContent=function(){return _.union(this._getRssImportedStartChildren(),this.getRssTemplateChildren())};t.prototype._importContent=function(e){if(e.containsMultiPh()){this._fillChildWithRssContent(e)}else{this._replicateRssChild(e)}};t.prototype._fillChildWithRssContent=function(t){$.get(AGN.url("/layoutbuilder/container/"+t.getContainerId()+"/rss.action")).done((i=>e.EDITOR.savePlaceholder(t,t.getMultiPh().id,i)))};t.prototype._replicateRssChild=function(e){const t=this;$.get(AGN.url("/layoutbuilder/container/"+e.getContainerId()+"/replicateRss.action")).done((function(i){t.insertRssChildren(t.getRssChildrenFromSamples(i),e)}))};t.prototype.insertRssChildren=function(t,i){if(!t.length){return}var n=i.getColumn();var r=i.getRow();e.EDITOR.replaceChildren(i,t[0]);t.slice(1).forEach((function(t){t.setColumn(n);t.setRow(r);const i=e.EDITOR.cloneChild(t);n=i.getColumn();r=i.getRow()}))};t.prototype.getRssChildrenFromSamples=function(e){return e.map((function(e){return new AGN.Lib.LB.ChildSample(e).instantiate()}))};t.prototype.getImportedRssChildren=function(){return _.groupBy(e.EDITOR.children.active().children.filter((function(e){return e.isRssImportedChild()})),(function(e){return e.data.type||e.data.container.type}))};t.prototype.getRssTemplateChildren=function(){return e.EDITOR.children.active().children.filter((function(e){return e.isRssTemplateChild()}))};t.prototype._removeRssChildrenAndGetPlaceholder=function(t){t.slice(1).forEach((function(t){const i=t.getRow();e.EDITOR.removeChild(t);if(AGN.Lib.LB.Row.isEmpty(i)){e.EDITOR.removeRow(e.EDITOR.grid.getRow(i))}}));return t[0]};t.prototype._getRssImportedStartChildren=function(){const e=this;return _.map(this.getImportedRssChildren(),(function(t){return e._removeRssChildrenAndGetPlaceholder(t)}))}}AGN.Lib.LB.RssImporter=t})();(()=>{const e=AGN.Lib.LB.Definitions;const t=AGN.Lib.LB.Children;const i=AGN.Lib.LB.Categories;const n=AGN.Lib.LB.Targets;const r=AGN.Lib.LB.ChildEditor;const o=AGN.Lib.LB.Child;const s=AGN.Lib.LB.ChildSample;const a=AGN.Lib.LB.Row;const l=AGN.Lib.LB.Ui;function c(){this.templateId=0;this.targetId=e.ALL_ENTRIES;this.targets=new n;this.categories=new i;this.children=new t([]);this.imageUriPattern="{image-id}";this.watcher=new AGN.Lib.LB.PromiseProgressWatcher;this.removedChildren=[];this.adjust=_.throttle(this.adjust,200);this.watcher.promise().progress((()=>this.adjust(false)))}c.prototype.setup=function(r){r=$.extend({templateId:0,targetId:e.ALL_ENTRIES,grid:{},children:[],imageUriPattern:"{image-id}",noPreviewImageLink:"#",mobileImagePrefix:"mobile_",isTextVersionGenerationAllowed:false,serverSideUndoAvailable:false,isEmptyTextVersion:false,targets:[],interestGroups:[],categories:[],translations:{},actions:{}},r);$.i18n.load(r.translations);this.changesNotSaved=false;this.templateId=r.templateId;this.targetId=r.targetId;this.imageUriPattern=r.imageUriPattern;this.noPreviewImageLink=r.noPreviewImageLink;this.textVersionGenerationAllowed=r.isTextVersionGenerationAllowed;this.emptyTextVersion=r.isEmptyTextVersion;this.noImageLink=r.noImageLink;this.targets=new n(r.targets);this.interestGroups=r.interestGroups;this.categories=new i(r.categories);this.children=new t(r.children);this.actions=r.actions;this.mailingId=r.mailingId;this.mobileImagePrefix=r.mobileImagePrefix;this.isServerSideUndoAvailable=r.serverSideUndoAvailable;const o=this.children.active();this.grid=new AGN.Lib.LB.Grid(r.grid,Math.max(1,o.calculateRowsCount()));o.rebuildStatic({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink});o.adjustLayering();this.updateAvailableTargets();if(this.mailingId>0){this.editable=AGN.Opt.Components.MailingContentLock.manageLock(this.mailingId,r.isMailingExclusiveLockingAcquired,r.anotherLockingUserName)}else{this.editable=true}l.setTargetId(this.targetId);this.setTargetId(this.targetId);l.setUndoOptionEnabled(this.isServerSideUndoAvailable);if(this.editable){this.setupInteractions();this.updateRecycleBin();this.restoreUpdateTextVersionCheckbox(r.mailingId);this._setupUndoManager();l.setLoading(false)}else{o.each((function(t){t.setDraggable(false);t.setControlsEnabled(false);if(!e.IS_BASIC_LB){t.setResizable(false)}}));l.setLoading(false);l.setEditable(false)}};c.prototype._setupUndoManager=function(){this.undoManager=new AGN.Lib.LB.UndoManager(this,{onChange:()=>{l.setUndoOptionEnabled(this.undoManager.canUndo()||this.isServerSideUndoAvailable);l.setRedoOptionEnabled(this.undoManager.canRedo())}});this.undoManager.registerHandler("placeholderUpdated",((e,t,i)=>{const n=e.getPlaceholder(t).value;this._savePlaceholder(e,t,i);if(r.get().isInitForChild(e)){this.editChild(e)}return[e,t,n]}));this.undoManager.registerHandler("childTargetChanged",((e,t)=>{const i=e.getTargetId();this._setChildTarget(e,t);if(r.get().isInitForChild(e)){this.editChild(e)}return[e,i]}));this.undoManager.registerHandler("tocItemsUsageUpdated",((e,t)=>{const i=this._collectTocItemsUsages();this._updateTocItemsUsage(e,t);if(r.get().isInitForChild(e)){this.editChild(e)}return[e,i]}));this.undoManager.registerHandler("setTocItemChanged",((e,t)=>{const i=e.isTocItem();this._setTocItem(e,t);if(r.get().isInitForChild(e)){this.editChild(e)}return[e,i]}));this.undoManager.registerHandler("mediapoolImageCategoryChanged",((e,t,i,n)=>{r.get().updateImageCategory(t,i);if(r.get().isInitForChild(e)){this.editChild(e)}return[e,t,n,i]}))};c.prototype.getUndoManager=function(){return this.undoManager};c.prototype.restoreUpdateTextVersionCheckbox=function(){$("#update-text-version").attr("checked",this.getMadeChoice())};c.prototype.setupInteractions=function(){var t=this;this.children.recycled().each((function(e){e.setRows(1);e.setColumns(1)}));function i(i,n){t.children.active().matching(t.targetId).each((function(t){if(t!==i){t.setControlsEnabled(n);if(!t.isContainerDeleted()&&!e.IS_BASIC_LB){t.setResizable(n)}if(t.data.container.modeEdit===e.CONTAINER_TYPE.ANCHORED||t.data.container.modeEdit===e.CONTAINER_TYPE.FIXED_AND_ANCHORED){if(!e.IS_BASIC_LB){t.setResizable(false)}}}}))}this.grid.setOnResizingStarted((function(e){i(e,false)}));this.grid.setOnResizingStopped((function(e){i(e,true);t.children.active().stick(e.getArea())}));var n=null;this.grid.setOnAreaHovered((function(e){var i=t.children.active().matching(t.targetId);if(e){i=i.select((function(t){return t.isInArea(e)}));if(n){n.each((function(e){if(!i.contains(e)){e.setHighlighted(false)}}))}i.setHighlighted(true);n=i}else{i.setHighlighted(false);n=null}}));this.grid.setOnDrop((function(i,n,r){var o=t.children.active();var a=false;if(!o.contains(i)){a=true;if(i instanceof s){i=i.instantiate();t.children.add(i)}else if(i.isRecycled()){i.setRecycled(false);t.updateRecycleBin()}else{i=i.clone();t.children.add(i)}if(t.targetId!==e.ALL_ENTRIES){i.setTargetId(t.targetId)}o=t.children.active();if(!i.isToc()){i.rebuild({imageUriPattern:t.imageUriPattern,noImageLink:t.noImageLink})}}i.setArea(r);o.active().stick(r);o.matching(t.targetId).rebuildToc({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink});i.adjustSize(t.grid);i.adjustCoordinates(t.grid);if(a){var l=i.data.container.modeEdit;i.setShown(true);if(l===e.CONTAINER_TYPE.ANCHORED||l===e.CONTAINER_TYPE.FIXED_AND_ANCHORED){i.setDraggable(false);if(!e.IS_BASIC_LB){i.setResizable(false)}}t.adjust();t.watcher.bind(o.matching(t.targetId).pulse())}else{t.adjust()}t.updateAvailableTargets();t.setChanged(true)}));$("#lb-childrens").on("click","[data-building-block]",(function(t){var i=$(t.target);if(i.is("button")||i.is(".ui-resizable-handle")||i.closest("button").exists()){return}var n=$(this);var r=o.get(n);var s=r.data.container.modeEdit;if(r){if(s===e.CONTAINER_TYPE.EDITABLE||s===e.CONTAINER_TYPE.ANCHORED){e.EDITOR.editChild(r)}}}))};c.prototype.updateAvailableTargets=function(){var t=this.children.active();var i=this.targets;var n=t.collectTargetIds();var r=[];t.groups().forEach((function(e){var t={};e.sort((function(e,t){return e.getZ()-t.getZ()})).forEach((function(e,i){t[e.getTargetId()]=i}));r.push(t)}));n.sort((function(e,t){var i=0;r.forEach((function(n){if(e in n&&t in n){var r=n[e]-n[t];if(r<0){i++}else if(r>0){i--}}}));return i}));l.setAvailableTargetIds(n.map((function(e){return{id:e,name:i.name(e)}})));if(n.indexOf(String(this.targetId))<0){this.targetId=e.ALL_ENTRIES}l.setTargetId(this.targetId)};c.prototype.getTemplateId=function(){return this.templateId};c.prototype.isTextVersionGenerationAllowed=function(){return this.textVersionGenerationAllowed};c.prototype.saveMadeChoice=function(e){AGN.Lib.WebStorage.set("updateTextVersion_"+this.mailingId,e)};c.prototype.getMadeChoice=function(){return AGN.Lib.WebStorage.get("updateTextVersion_"+this.mailingId)};c.prototype.isEmptyTextVersion=function(){return this.emptyTextVersion};c.prototype.isChanged=function(){return this.changesNotSaved};c.prototype.isEditable=function(){return this.editable};c.prototype.setChanged=function(e){if(!!e){this.controlRssBtn()}this.changesNotSaved=!!e};c.prototype.getGrid=function(){return this.grid};c.prototype.getTargetName=function(e){return this.targets.name(e)};c.prototype.setTargetId=function(e){var t=this.children.active();this.targetId=e;t.unmatching(this.targetId).setShown(false);t=t.matching(this.targetId);t.rebuildToc({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink});t.setShown(true);this.adjust();this.watcher.bind(t.pulse())};c.prototype.setLayeringByTargets=function(e){let i=false;this.children.active().groups().forEach((n=>{if(n.length>1){t.make(n).setLayeringByTargets(e);i=true}}));if(i){this.updateToc(true)}this.setChanged(true);this.adjust(false)};c.prototype.setChildrenControlsEnabled=function(e){this.children.active().matching(this.targetId).setControlsEnabled(e)};c.prototype.updateToc=function(e){var t=this.children.active().matching(this.targetId);if(t.rebuildToc({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink})&&e){this.adjustSizes(t);this.adjustCoordinates(t)}};c.prototype.adjustSizes=function(e){if(e===undefined){e=this.children.active().matching(this.targetId)}e.adjustSizes(this.grid);this.grid.adjustRows(e)};c.prototype.adjustCoordinates=function(e){if(e===undefined){e=this.children.active().matching(this.targetId)}this.grid.adjustSidebar();e.adjustCoordinates(this.grid)};c.prototype.adjustLayering=function(i){var n=this;if(i===undefined){i=this.children.active().matching(this.targetId)}var r=i.groupsMap();this.grid.each((function(i,o){i.each((function(i,s){var a=o+1+":"+(s+1);var l=t.make(r[a]);if(l.size()>1){l.setBorderHighlighted(true);l.each(((e,t)=>{e.setShown(t===0);e.setLayeringIndex(t+1);e.setOnLayeringRotate((()=>{n.setChanged(true);l.rotateLayering();n.updateToc(true);n.adjust(false)}))}))}else{l.setBorderHighlighted(false);l.each((t=>{t.setShown(true);t.setLayeringIndex(e.DEFAULT_LAYERING_INDEX);t.setOnLayeringRotate(null)}));n.adjust(false)}}))}))};c.prototype.adjust=function(e){const t=this.children.active().matching(this.targetId);if(e!==false){this.adjustLayering(t)}this.adjustSizes(t);this.adjustCoordinates(t)};c.prototype.addRowBefore=function(e,t){var i=this.grid.addRowBefore(e);var n=this.children.active();var r=false;n.each((function(e){var t=e.getRows();var n=e.getRow();var o=n+t-1;if(i<=n){e.setRow(n+1)}else if(i>n&&i<=o){r=true;e.setRows(t+1)}}));if(t!==false){if(r){this.adjust()}else{this.adjustCoordinates(n.matching(this.targetId))}}this.setChanged(true)};c.prototype.addRowAfter=function(e){if(!this.isEditable()){return}if(this.grid.getRowIndex(e)==this.grid.getRows()-1){this.addRow()}else{const t=this.grid.getRowIndex(e);this.addRowBefore(this.grid.rows[t+1])}};c.prototype.addRow=function(e){this.grid.addRow();if(e!==false){this.grid.adjustSidebar()}this.setChanged(true)};c.prototype.removeRow=function(e){var t=this.grid.removeRow(e);var i=this.children.active();var n=false;var r=false;i.each((function(e){var i=e.getRows();var o=e.getRow();var s=o+i-1;if(t>=o&&t<=s){if(i>1){e.setRows(i-1);r=true}else{e.setRecycled(true);n=true}}else if(t<o){e.setRow(o-1)}}));if(n){i=this.children.active().matching(this.targetId);i.rebuildToc({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink});this.adjust();this.watcher.bind(i.pulse());this.updateAvailableTargets();this.updateRecycleBin()}else if(r){this.adjust()}else{this.adjustCoordinates()}this.setChanged(true)};c.prototype.removeChild=function(e,t=false){if(this.children.contains(e)){e.setRecycled(true);this.updateToc(false);this.adjust();this.updateAvailableTargets();this.updateRecycleBin();this.setChanged(true);if(t){this.findEmptyRowsOccupiedByChild(e).forEach((e=>this.removeRow(e)))}}};c.prototype.findEmptyRowsOccupiedByChild=function(e){const t=e.getRow();let i=[];for(let n=t;n<t+e.getRows();n++){if(a.isEmpty(n)){i.push(this.grid.getRow(n))}}return i};c.prototype.cloneChild=function(e){var t=this;var i=this.grid.getColumns();var n=this.children.active();function r(e,t,n){var r=[];var o={};e.each((function(e){var i=e.getColumn();if(t===e.getRow()&&i>=n){r.push(e);var s=e.getColumns();o[i]=Math.min(o[i]||i,i);for(var a=1;a<s;a++){o[i+a]=i}}}));var s=_.groupBy(r,(function(e){var t=e.getColumn();while(o[t]&&o[t]!==t){t=o[t]}return t}));var a=[];for(var l=n;l<=i;l++){if(o[l]){var c=s[l];if(c){a.push(c)}}else{a.push([])}}return a}function o(e){var t=0;e.forEach((function(e){if(e.length===0){t++}}));return t}function s(e,t){function n(e,t){var n=null,r=null;e.forEach((function(e){var t=e.getColumn();var i=t+e.getColumns()-1;n=Math.min(n||t,t);r=Math.max(r||i,i)}));var o=0;if(r+t>i){o=i+1-n-t;t=t+o}e.forEach((function(e){var n=e.getColumn()+t;if(n>i){e.setRow(e.getRow()+1);e.setColumn(n-i)}else{e.setColumn(n)}}));return o}for(var r=0;r<e.length&&t>0;r++){var o=e[r];if(o.length>0){t+=n(o,t)}else{t--}}}function a(e){var i=t.grid.getRow(e);if(i){t.addRowBefore(i,false)}else{t.addRow(false)}}function l(e,t,n){var l=t.getRow();var c=t.getColumns();var d=t.getColumn()+c;var u=r(e,l,d);var h=i-d+1;if(h>=c){if(o(u)>=c){s(u,c)}else{a(l+1);s(u,c)}n.setRow(l);n.setColumn(d)}else{a(l+1);s(u,h+c);n.setRow(l+1);n.setColumn(1)}}var c=e.clone();l(n,e,c);c.rebuild({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink});c.setShown(true);this.children.add(c);this.updateToc(false);this.watcher.bind(this.children.active().matching(this.targetId).pulse());this.adjust();this.setChanged(true);return c};c.prototype.replaceChildren=function(e,t){this.removeChild(e);t.setRow(e.getRow());t.setColumn(e.getColumn());t.rebuild({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink});t.setShown(true);this.children.add(t);this.updateToc(false);this.watcher.bind(this.children.active().matching(this.targetId).pulse());this.adjust();this.setChanged(true)};c.prototype.editChild=function(e){if(this.isEditable()){const t={child:{name:e.getName(),containerName:e.getContainerName(),isToc:e.isToc(),isSortable:e.isSortable(),interestGroup:e.getInterestGroup(),targetId:e.getTargetId(),asTocItem:e.asTocItem(),placeholders:e.getPlaceholders()},targets:this.targets.list(),interestGroups:this.interestGroups.slice(),categories:this.categories.list(),imageUriPattern:this.imageUriPattern,noPreviewImageLink:this.noPreviewImageLink,noImageLink:this.noImageLink,mailingId:this.mailingId,mobileImagePrefix:this.mobileImagePrefix,resolveAgnTags:e=>e?$.trim(AGN.Lib.LB.AgnTagsResolver.resolve(e)):e};if(e.isToc()){t.child.toc=this.children.active().asTocItems(false)}if(e.containsMultiPh()){const i=e.getMultiPh();const n=e.containsMultiPh()&&e.data.content[i.id];if(n){const n=[];o.collectPlaceholders(i.markup,e.data.content,n,{},null);const r=n.map((e=>e.id));t.child.placeholders=t.child.placeholders.filter((e=>!r.includes(e.id)))}}r.init(e,t)}};c.prototype.setChildTarget=function(e,t){this.undoManager.operation("childTargetChanged",e,e.getTargetId());this._setChildTarget(e,t)};c.prototype._setChildTarget=function(e,t){e.setTargetId(t);const i=e.isMatching(this.targetId);e.setShown(i);if(!i){this.watcher.bind(this.children.active().matching(this.targetId).pulse());if(!e.isToc()&&!e.isTocItem()){this.updateToc(false)}}if(e.isTocItem()){this.updateToc(false)}this.adjust();this.setChanged(true);this.updateAvailableTargets()};c.prototype.updateTocItemsUsage=function(e,t){if(e.isToc()){this.undoManager.operation("tocItemsUsageUpdated",e,this._collectTocItemsUsages());this._updateTocItemsUsage(e,t)}};c.prototype._updateTocItemsUsage=function(e,t){this.children.active().each((e=>{const i=t[e.getId()];if(i===true||i===false){e.setTocItem(i)}}));this.updateToc(false);this.adjust();this.setChanged(true)};c.prototype._collectTocItemsUsages=function(){const e={};this.children.active().asTocItems(false).forEach((t=>e[t.id]=t.isEnabled));return e};c.prototype.setTocItem=function(e,t){this.undoManager.operation("setTocItemChanged",e,e.isTocItem());this._setTocItem(e,t)};c.prototype._setTocItem=function(e,t){e.setTocItem(t);this.updateToc(false);this.adjust();this.setChanged(true)};c.prototype.savePlaceholder=function(e,t,i){this.undoManager.operation("placeholderUpdated",e,t,e.getPlaceholder(t).value);this._savePlaceholder(e,t,i)};c.prototype._savePlaceholder=function(e,t,i){e.setContent({[t]:i});if(e.isToc()){this.updateToc(false)}else{e.rebuild({imageUriPattern:this.imageUriPattern,noImageLink:this.noImageLink})}if(!e.isMatching(this.targetId)){this.watcher.bind(this.children.active().matching(this.targetId).pulse())}this.adjust(false);this.setChanged(true)};c.prototype.controlRssBtn=function(){$('[data-action="import-from-content-source"]').parent().toggle(this.children.containsRssChildren())};c.prototype.updateRecycleBin=function(){const e=$("#recyclebin-content");const t=$("#grid-recyclebin-tab").find("[data-no-found-blocks-msg]");const i=$("#recycle-bin-clear-btn");this.children.sort((function(e,t){if(e.isRecycled()===t.isRecycled()){return 0}return e.isRecycled()?1:-1}));var n=this.children.recycled().get();l.setShown(t,n.length===0);l.setShown(i,n.length>0);var r=AGN.Lib.Template.dom("recyclebin-blocks",{children:n.map((function(e){return{name:e.getName()||e.getContainerName(),id:e.getId(),containerId:e.getContainerId()}}))});e.html(r);r.find("[data-building-block]").each((function(e){var t=$(this);t.draggable(s.draggableOptions());o.set(t,n[e])}))};c.prototype.getGuttersAsString=function(){var e=[];this.grid.each((function(t){e.push(t.isGuttered()?"1":"0")}));return e.join("|")};c.prototype.getChildrenAsSubmittable=function(){var e=this.children.active().groups();var t=[];var i=l.getAvailableTargetIds();e.forEach((function(e){e=_.sortBy(e,(function(e){return i.indexOf(e.getTargetId())}));var n=0;e.forEach((function(e){e.setZ(n++);t.push(e.asSubmittable())}))}));return t};c.prototype.validateOverlaps=function(){var e=this.children.active().select((function(e){return e.getRows()>1})).get();for(var t=0;t<e.length;t++){var i=e[t];var n=i.getRow();var r=n+i.getRows()-1;for(var o=t+1;o<e.length;o++){var s=e[o];var a=s.getRow();var l=a+s.getRows()-1;if(a>n&&a<=r&&l>r||a<n&&l>=n&&l<r){var c=i.getColumn();var d=c+i.getColumns()-1;var u=s.getColumn();var h=u+s.getColumns()-1;if(u>d||h<c){return false}}}}return true};c.prototype.save=function(e){const t=r.get();if(t&&!t.applyScheduledChanges()){return}if(this.validateOverlaps()){const t=AGN.Lib.Form.get($("#grid-template-tile"));this.setChanged(false);t.setValue("forceGenerateTextVersion",e===true);t.setValue("rowGutters",this.getGuttersAsString());t.setValue("childrenJson",JSON.stringify(this.getChildrenAsSubmittable()));t.setValue("removedChildren",this.removedChildren);t.submit("resource")}else{AGN.Lib.Messages.alert("error.template.invalidVerticalSpanning")}};c.prototype.checkIfDataRestoreNeeded=function(e){const t=this.getChildrenData();const i=e.children;if(t.length!==i.length){return true}return JSON.stringify(t)!==JSON.stringify(i)};c.prototype.getDataForAutoSave=function(){return{children:this.getChildrenData()}};c.prototype.getChildrenData=function(){return this.children.children.map((function(e){return e.data}))};c.prototype.clearEmptyAddedOnTheFlyRows=function(){this.grid.each((e=>{if(e.isEmptyRowAddedOnTheFly){this.removeRow(e)}}))};c.prototype.processAddedOnTheFlyRows=function(e){if(this.grid.getRows()>0){const{pageX:t,pageY:i}=e;const n=this.grid.rows.find((e=>this.isRowHovered(e,t,i)));if(!n||n.isEmptyRowAddedOnTheFly){return}const r=10;const o=n.getCoordinates();const s=Math.abs(i-o.startY);const a=Math.abs(i-o.endY);const l=s<=a;const c=this.grid.getRowIndex(n);const d=this._findRowByIndex(c-1);const u=this._findRowByIndex(c+1);if(d?.isEmptyRowAddedOnTheFly&&l||u?.isEmptyRowAddedOnTheFly&&!l){return}if(l&&i<o.startY||!l&&i>o.endY||Math.min(s,a)<=r){this.appendRowOnTheFlyFor(n,l)}}else{this.appendRowOnTheFly()}};c.prototype._findRowByIndex=function(e){if(e<0||e>=this.grid.rows.length){return null}return this.grid.rows[e]};c.prototype.isRowHovered=function(e,t,i){const n=e.getCoordinates();const r=(e.isGuttered()?this.grid.gap:1)/2;return t>=n.startX&&t<=n.endX&&(i>n.startY-r&&i<n.endY+r)};c.prototype.appendRowOnTheFlyFor=function(e,t){this.clearEmptyAddedOnTheFlyRows();const i=this.grid.getRowIndex(e);let n;if(t){this.addRowBefore(e);n=this._findRowByIndex(i)}else{this.addRowAfter(e);n=this._findRowByIndex(i+1)}n.isEmptyRowAddedOnTheFly=true;n.animateAppearance()};c.prototype.appendRowOnTheFly=function(){this.addRow(false);const e=this._findRowByIndex(0);e.isEmptyRowAddedOnTheFly=true;e.animateAppearance()};c.prototype.getRecycledChildren=function(){return this.children.recycled().get().map((e=>e.getId())).filter((e=>e>0))};c.prototype.clearRecycleBin=function(){const e=this.children.recycled();e.each((e=>{if(e.getId()>0){this.removedChildren.push(e.getId())}}));this.children.removeChilds(e.get());this.updateRecycleBin()};c.prototype.undo=function(){return this.undoManager.undo()};c.prototype.redo=function(){return this.undoManager.redo()};AGN.Lib.LB.Editor=c})();(function(){var e={actionbased_mailing:{anchors:[[.07,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},mailing_mediatype_sms:{anchors:[[.07,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},mailing_mediatype_post:{anchors:[[.07,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},archive:{anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.8,0,1]]},datebased_mailing:{anchors:[[.07,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},deadline:{anchors:[[.1,.5,-1,0],[.5,.05,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},decision:{anchors:[[.06,.5,-1,0],[.5,.06,0,-1],[.94,.5,1,0],[.5,.94,0,1]]},export:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},followup_mailing:{anchors:[[.04,.5,-1,0],[.5,.2,0,-1],[.96,.5,1,0],[.5,.8,0,1]]},form:{anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},import:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},mailing:{anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},split:{anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},ownWorkflow:{anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},parameter:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},recipient:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},scABTest:{anchors:[[.1,.5,-1,0],[.5,.15,0,-1],[.9,.5,1,0],[.5,.85,0,1]]},scBirthday:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.85,0,1]]},scDOI:{anchors:[[.3,.5,-1,0],[.5,.04,0,-1],[.72,.5,1,0],[.5,.96,0,1]]},welcomeTrack:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},welcomeTrackWithIncentive:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},anniversaryMail:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},birthdayWithCoupon:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},shoppingCartAbandonersSmall:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},shoppingCartAbandonersLarge:{anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},start:{anchors:[[0,.5,-1,0],[.5,.15,0,-1],[1,.5,1,0],[.5,.85,0,1]]},stop:{anchors:[[0,.5,-1,0],[.5,.15,0,-1],[1,.5,1,0],[.5,.85,0,1]]}};var t={"*":{deadline:function(e,t){return!t.connections.incoming.some((function(e){return e.source.getType()==="import"}))},mailing:function(e,t){return t.connections.incoming.length===0},datebased_mailing:function(e,t){return t.connections.incoming.length===0}},start:{recipient:true,form:true,import:true,export:true},stop:false,decision:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,mailing_mediatype_sms:true,mailing_mediatype_post:true,actionbased_mailing:true,datebased_mailing:true,followup_mailing:true,mailing:true,split:true},parameter:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,mailing_mediatype_sms:true,mailing_mediatype_post:true,actionbased_mailing:true,datebased_mailing:true,followup_mailing:true,mailing:true},deadline:{decision:true,parameter:true,recipient:true,archive:true,mailing_mediatype_sms:true,mailing_mediatype_post:true,actionbased_mailing:true,datebased_mailing:true,followup_mailing:true,mailing:true,import:true,export:true,split:true},recipient:{decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,mailing_mediatype_sms:true,mailing_mediatype_post:true,actionbased_mailing:true,datebased_mailing:true,followup_mailing:true,mailing:true,import:true,export:true,split:true},actionbased_mailing:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,import:true,export:true},datebased_mailing:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,import:true,export:true},followup_mailing:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,import:true,export:true},mailing:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,import:true,export:true},split:{parameter:true},mailing_mediatype_sms:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,import:true,export:true},mailing_mediatype_post:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,import:true,export:true},archive:{decision:true,parameter:true,deadline:true,recipient:true,actionbased_mailing:true,mailing_mediatype_sms:true,mailing_mediatype_post:true,datebased_mailing:true,followup_mailing:true,mailing:true,import:true,export:true,split:true},form:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,form:true,archive:true,actionbased_mailing:true,mailing_mediatype_sms:true,mailing_mediatype_post:true,datebased_mailing:true,followup_mailing:true,mailing:true,import:true,export:true},import:{deadline:function(e){return e.connections.outgoing.length===0}},export:{stop:true,decision:true,parameter:true,deadline:true,recipient:true,actionbased_mailing:true,mailing_mediatype_sms:true,mailing_mediatype_post:true,datebased_mailing:true,followup_mailing:true,mailing:true,import:true,export:true,archive:true,form:true,split:true}};AGN.Lib.WM.Definitions={KEY_ENTER:13,KEY_SHIFT:16,KEY_CTRL:17,KEY_SPACE:32,KEY_DELETE:46,MOUSE_BUTTON_LEFT:0,MOUSE_BUTTON_MIDDLE:1,DEFAULT_DRAG_MODE:0,GRID_CELL_DRAG_MODE:1,BOTTOM:"BOTTOM",LEFT:"LEFT",RIGHT:"RIGHT",TOP:"TOP",NODE_ANIMATION_DROPPED:"animate-dropped",NODE_ANIMATION_AUTO_DROPPED:"animate-auto-dropped",Z_INDEX_VIEW_PORT:10,Z_INDEX_ICON_PANEL:50,Z_INDEX_DRAGGABLE_BUTTON:60,Z_INDEX_ICON_TITLES_CONTAINER:5,Z_INDEX_CONNECTION_OVERLAY:9,Z_INDEX_ICON:10,Z_INDEX_CONNECTION_HOVER:11,Z_INDEX_CONNECTION_OVERLAY_HOVER:12,Z_INDEX_ICON_HOVER:13,Z_INDEX_ICON_TITLE_HOVER:19,Z_INDEX_DRAGGED_ICON_NODE:20,Z_INDEX_JSPLUMB_DRAG_OPTIONS:25,Z_INDEX_NAVIGATOR_GLOBE:30,Z_INDEX_NAVIGATOR_ARROWS:31,Z_INDEX_CONTEXT_MENU:40,CANVAS_DEFAULT_GRID_SIZE:20,CANVAS_GRID_SIZE:20,NODE_SIZE:64,NODE_MIN_MARGIN:.1,TITLE_WIDTH:94,MINIMAP_PADDING:2,DEFAULT_AUTO_ALIGN_STEP_X:5,GRID_AUTO_ALIGN_STEP_X:2,AUTO_ALIGN_STEP_X:5,AUTO_ALIGN_EXTRA_STEP_X:.5,DEFAULT_AUTO_ALIGN_STEP_Y:6,GRID_AUTO_ALIGN_STEP_Y:2,AUTO_ALIGN_STEP_Y:6,AUTO_ALIGN_STEP_BETWEEN_GROUPS:2,AUTO_DROP_STEP_X:4,AUTO_DROP_STEP_Y:3,MIN_ZOOM:.5,MAX_ZOOM:1.5,DEFAULT_ZOOM:1,ZOOM_STEP:.1,NAVIGATION_STEP:100,MAX_UNDO_STEPS:17,CONNECTION_COLOR:"var(--workflow-connection-color)",CONNECTION_THICKNESS:3,CONNECTION_OUTLINE_COLOR:"transparent",CONNECTION_OUTLINE_WIDTH:4,CONNECTION_HOVER_COLOR:"var(--workflow-connection-hover-color)",CONNECTION_ARROW_SIZE:10,NODE_TYPE_START:"start",NODE_TYPE_STOP:"stop",NODE_TYPE_DECISION:"decision",NODE_TYPE_DEADLINE:"deadline",NODE_TYPE_PARAMETER:"parameter",NODE_TYPE_RECIPIENT:"recipient",NODE_TYPE_ARCHIVE:"archive",NODE_TYPE_FORM:"form",NODE_TYPE_MAILING:"mailing",NODE_TYPE_OWN_WORKFLOW:"ownWorkflow",NODE_TYPE_SPLIT:"split",NODE_TYPE_SC_BIRTHDAY:"scBirthday",NODE_TYPE_SC_DOI:"scDOI",NODE_TYPE_SC_ABTEST:"scABTest",NODE_TYPE_BIRTHDAY_WITH_COUPON:"birthdayWithCoupon",NODE_TYPE_WELCOME_TRACK:"welcomeTrack",NODE_TYPE_WELCOME_TRACK_WITH_INCENTIVE:"welcomeTrackWithIncentive",NODE_TYPE_SHOPPING_CART_ABANDONERS_SMALL:"shoppingCartAbandonersSmall",NODE_TYPE_SHOPPING_CART_ABANDONERS_LARGE:"shoppingCartAbandonersLarge",NODE_TYPE_ANNIVERSARY_MAIL:"anniversaryMail",NODE_TYPE_ACTION_BASED_MAILING:"actionbased_mailing",NODE_TYPE_MAILING_MEDIATYPE_SMS:"mailing_mediatype_sms",NODE_TYPE_MAILING_MEDIATYPE_POST:"mailing_mediatype_post",NODE_TYPE_DATE_BASED_MAILING:"datebased_mailing",NODE_TYPE_FOLLOWUP_MAILING:"followup_mailing",NODE_TYPE_IMPORT:"import",NODE_TYPE_EXPORT:"export",NODE_TYPES_MAILING:["mailing","followup_mailing","actionbased_mailing","datebased_mailing","mailing_mediatype_sms","mailing_mediatype_post"],NODE_TYPES_IMPORT_EXPORT:["import","export"],NODE_TYPE_START_ID:0,NODE_TYPE_STOP_ID:1,NODE_TYPE_DECISION_ID:2,NODE_TYPE_DEADLINE_ID:3,NODE_TYPE_PARAMETER_ID:4,NODE_TYPE_RECIPIENT_ID:6,NODE_TYPE_ARCHIVE_ID:7,NODE_TYPE_FORM_ID:8,NODE_TYPE_MAILING_ID:9,NODE_TYPE_OWN_WORKFLOW_ID:10,NODE_TYPE_SC_BIRTHDAY_ID:11,NODE_TYPE_SC_DOI_ID:12,NODE_TYPE_SC_ABTEST_ID:13,NODE_TYPE_ACTION_BASED_MAILING_ID:14,NODE_TYPE_DATE_BASED_MAILING_ID:15,NODE_TYPE_FOLLOWUP_MAILING_ID:16,NODE_TYPE_IMPORT_ID:17,NODE_TYPE_EXPORT_ID:18,NODE_TYPE_MAILING_MEDIATYPE_SMS_ID:19,NODE_TYPE_MAILING_MEDIATYPE_POST_ID:20,MAILING_PARAM_MAILING_LIST:1,MAILING_PARAM_TARGET_GROUPS:2,MAILING_PARAM_ARCHIVE:3,MAILING_PARAM_LIST_SPLIT:4,MAILING_PARAM_PLANNED_DATE:5,MAILING_PARAM_SEND_DATE:6,MAILING_PARAM_ALTGS:7,DEPENDENCY_TYPE_ARCHIVE:1,DEPENDENCY_TYPE_AUTO_EXPORT:2,DEPENDENCY_TYPE_AUTO_IMPORT:3,DEPENDENCY_TYPE_MAILING_DELIVERY:4,DEPENDENCY_TYPE_MAILING_LINK:5,DEPENDENCY_TYPE_MAILING_REFERENCE:6,DEPENDENCY_TYPE_MAILINGLIST:7,DEPENDENCY_TYPE_PROFILE_FIELD:8,DEPENDENCY_TYPE_PROFILE_FIELD_HISTORY:9,DEPENDENCY_TYPE_TARGET_GROUP:11,DEPENDENCY_TYPE_USER_FORM:12,GENDER_PROFILE_FIELD:"gender",FIELD_TYPE_DATE:"date",SPLIT_DEFAULT_PARAMETERS:[5,10,15,20,25,30,33,40,50],TITLE_MAX_TARGETS:2,PDF_SIZE:"A4",PDF_ORIENTATION:"landscape",PAGE_DIMENSIONS:{A4:{width:800,height:1360}},ICONS_CONFIG:e,CONNECTION_CONSTRAINTS:t,NODE_POPOVER_TEMPLATE:'<div class="popover popover-wide" role="tooltip" ><div class="arrow"></div><div class="popover-content" style="width: auto; height: auto; max-width: 300px; max-height: 350px; overflow: auto;"></div></div>',EMPTY_OPTION_PLACEHOLDER:"--"}})();(()=>{const e=AGN.Lib.WM.Definitions;const t=AGN.Lib.Helpers;const i=AGN.Lib.DateFormat;AGN.Lib.WM.Utils={checkActivation:function(t){const i=$("#workflow-status").val();if(e.constants.initialWorkflowStatus===e.constants.statusActive&&(i===e.constants.statusActive||i===e.constants.statusTesting)){if(t){AGN.Lib.Messages.warn("error.workflow.saveActivatedWorkflow")}return true}return false},isPausedWorkflow:function(){return $("#workflow-status").val()===e.constants.statusPaused},getConfigData:function(e){return t.objFromString(e.data("config"))},mapAsOptionsHtml:function(e){var t="";Object.keys(e).forEach((function(i){var n='value="'+i+'"';t+="<option "+n+">"+e[i]+"</option>"}));return t},arrayAsOptionsHtml:function(e){var t="";e.forEach((function(e){var i='value="'+e.id+'"';var n=e.data;if(n){Object.keys(n).forEach((function(e){i+=" data-"+e+'="'+n[e].replace('"',"&quot;")+'"'}))}var r=e.text.replace("<","&lt;").replace(">","&gt;");t+="<option "+i+">"+r+"</option>"}));return t}};AGN.Lib.WM.DateTimeUtils={toDateTime:function(e,t,i){var n=null;if(!!e&&e.getMonth){n=new Date(e);if(!!t&&t!==0){n.setHours(t)}if(!!i&&i!==0){n.setMinutes(i)}}return n},getDateTimeValue:function(e,t,i){var n=this.toDateTime(e,t,i);return n!=null?n.getTime():null},getDateTimeStr:function(e,t,n,r){if(!e||!e.getMonth){return""}t=t||e.getHours();n=n||e.getMinutes();var o=this.toDateTime(e,t,n);if(!!o){return i.format(o,r)}else{return""}},getDateStr:function(e,t){return this.getDateTimeStr(e,null,null,t)},getCurrentAdminTime(){return $.ajax({url:AGN.url("/workflow/getCurrentAdminTime.action"),async:false}).responseJSON}}})();(function(){function e(e){this.rules=e}e.prototype.isConstraint=function(e){return _.isBoolean(e)||_.isFunction(e)};e.prototype.evaluate=function(e,t,i){if(e===true||e===false){return e}if(_.isFunction(e)){return e(t,i)}return undefined};e.prototype.getRulesToCheck=function(e,t){return[{from:e.type,to:[t.type,"*"]},{from:"*",to:[t.type,"*"]}]};e.prototype.getRelevantConstraints=function(e,t){var i=this.isConstraint;var n=this.getRulesToCheck(e,t);var r=this.rules;var o=[];n.forEach((function(e){var t=true;if(_.has(r,e.from)){var n=r[e.from];if(i(n)){o.push(n);t=false}else{e.to.forEach((function(s){if(_.has(r[e.from],s)){n=r[e.from][s];if(i(n)){o.push(n);t=false}}}))}}if(t&&e.from!="*"){o.push(false)}}));return o};e.prototype.check=function(e,t){var i=this.getRelevantConstraints(e,t);var n=false;for(var r=0;r<i.length;r++){if(this.evaluate(i[r],e,t)){n=true}else{return false}}return n};AGN.Lib.WM.ConnectionConstraints=e})();(function(){const e=AGN.Lib.Popover;class t{constructor(e){this.node=e;this.getMailingThumbnailWithCache=_.memoize(this.getMailingThumbnail.bind(this));this.#We()}#We(){this.getPopoverContent().then((e=>this.createPopover(e)));this.setEnabled(true)}createPopover(t){if(!t){return}this.popover=e.getOrCreate(this.node.get$(),{trigger:"hover",html:true,content:t})}remove(){if(this.popover){this.popover.hide()}e.remove(this.node.get$());this.popover=null}update(){this.remove();this.#We()}async getPopoverContent(){const e=await this.getThumbnail();const t=this.node.getComment();if(!e&&!t?.trim()){return null}return $("<div>").addClass("d-flex flex-column align-items-center").append(e).append($("<div>").text(t))}async getThumbnail(){const e=this.node.getData().mailingId;if(!this.node.isMailingNode()||!e){return""}return this.getMailingThumbnailWithCache(e)}async getMailingThumbnail(e){const t=await this.getMailingThumbnailSrc(e);if(!t){return""}const i=new Image;i.src=t;i.className="popover__thumbnail";return i}async getMailingThumbnailSrc(e){const t=await $.get(AGN.url(`/workflow/mailing/${e}/thumbnail.action`));return t>0?AGN.url("/sc?compID="+t):""}setEnabled(e){this.isEnabled=e;if(!this.popover){return}if(e){this.popover.enable()}else{this.popover.disable()}}}AGN.Lib.WM.NodePopover=t})();(()=>{const e=AGN.Lib.WM.DateTimeUtils;const t=AGN.Lib.Template;const i=AGN.Lib.WM.Definitions;const n=AGN.Lib.WM.NodePopover;class r{constructor(e,t){this.id=null;this.x=0;this.y=0;this.type=e;this.title="";this.overlayTitle="";this.filled=false;this.editable=true;this.expandable=false;this.dependent=false;this.inRecipientsChain=false;this.anchors=i.ICONS_CONFIG[e].anchors;this.data=t;this.$element=r.create$(e);this.$element.data("agn:node",this);this.$connectionButton=this.$element.find(".node-connect-button");this.$titleDiv=r.createTitleDiv$();this.$titleSpan=this.$titleDiv.find(".icon-title-span");this.$overlayTitle=this.$element.find(".icon-overlay-title");this.nodePopover=new n(this);this.lastTitleAnchor=i.BOTTOM}static restore(e){var t=e.get$().data("agn:node");if(!t){e.get$().data("agn:node",e)}return e}static get(e){if(e instanceof r){return e}if(e instanceof HTMLElement){e=$(e)}if(!e.is(".node")){e=e.closest(".node")}return e.data("agn:node")}static isDecisionNode(e){return e.getType()===i.NODE_TYPE_DECISION}isMailingNode(){return i.NODE_TYPES_MAILING.includes(this.getType())}get isSplitNode(){return this.getType()===i.NODE_TYPE_SPLIT}get isParameterNode(){return this.getType()===i.NODE_TYPE_PARAMETER}static isMailingNode(e){if(!e){return false}return i.NODE_TYPES_MAILING.includes(e.getType())}static isBranchingDecisionNode(e){if(r.isDecisionNode(e)){var t=e.getData();if(t.decisionType===i.constants.decisionTypeDecision){return true}}return false}static isDecisionBranchesOrderFromPositiveToNegative(e,t,i){if(t.y<=e.y&&i.y<=e.y){if(t.y<i.y){return true}else if(i.y<t.y){return false}else{return t.x<i.x}}else if(t.y>e.y&&i.y>e.y){return t.x>i.x}else{return t.y<i.y}}static getDecisionBranches(e){if(e.length===2){var t=r.getPosition(e[0].source.get$());var i=r.getPosition(e[0].target.get$());var n=r.getPosition(e[1].target.get$());if(this.isDecisionBranchesOrderFromPositiveToNegative(t,i,n)){return{positive:e[0],negative:e[1]}}else{return{positive:e[1],negative:e[0]}}}return null}static isCommented(e){return!!_.trim(e.getComment())}static isSelected(e){return e.hasClass("ui-selected")}static setSelected(e,t){return e.toggleClass("ui-selected",!!t)}static isChainSource(e){return e.hasClass("chain-mode-source")}static setChainSource(e,t){e.toggleClass("chain-mode-source",!!t)}static getAnchors(e){var t=r.get(e);if(t){return t.getAnchors()}return i.ICONS_CONFIG[e.data("type")].anchors}static getAnchorsInUse(e){var t={};e.forEach((function(e){var n=e.anchor.getOrientation();if(n[0]>0){t[i.RIGHT]=true}else if(n[0]<0){t[i.LEFT]=true}else if(n[1]>0){t[i.BOTTOM]=true}else if(n[1]<0){t[i.TOP]=true}}));return t}static getPosition(e){var t=e.position();return{x:t.left,y:t.top}}static getBox(e){var t=e.position();var i=e[0].getBoundingClientRect();return{minX:t.left,minY:t.top,maxX:t.left+i.width,maxY:t.top+i.height}}static isInRegion(e,t){var i=r.getBox(e);return(i.minX>=t.minX&&i.minX<=t.maxX||i.maxX>=t.minX&&i.maxX<=t.maxX)&&(i.minY>=t.minY&&i.minY<=t.maxY||i.maxY>=t.minY&&i.maxY<=t.maxY)}static getCollisionBox(e){var t=r.getAnchors(e);var n=e.position();var o=e[0].getBoundingClientRect();var s=(t[0][0]-i.NODE_MIN_MARGIN)*o.width;var a=(t[1][1]-i.NODE_MIN_MARGIN)*o.height;var l=(1-t[2][0]-i.NODE_MIN_MARGIN)*o.width;var c=(1-t[3][1]-i.NODE_MIN_MARGIN)*o.height;return{minX:n.left+s,minY:n.top+a,maxX:n.left+o.width-l,maxY:n.top+o.height-c}}static detectBoxCollision=function(e,t){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)};static create$(e){if(["datebased_mailing","actionbased_mailing"].includes(e)){e="mailing"}return t.dom("workflow-node",{type:e})}static createDraggable$(e){return t.dom("workflow-draggable-node",{type:e})}static createTitleDiv$(){return t.dom("workflow-icon-title")}static create(e){var t={iconComment:""};var n=new r(e,t);switch(e){case i.NODE_TYPE_SC_ABTEST:case i.NODE_TYPE_SC_BIRTHDAY:case i.NODE_TYPE_SC_DOI:case i.NODE_TYPE_BIRTHDAY_WITH_COUPON:case i.NODE_TYPE_WELCOME_TRACK:case i.NODE_TYPE_WELCOME_TRACK_WITH_INCENTIVE:case i.NODE_TYPE_SHOPPING_CART_ABANDONERS_SMALL:case i.NODE_TYPE_SHOPPING_CART_ABANDONERS_LARGE:case i.NODE_TYPE_ANNIVERSARY_MAIL:n.setFilled(true);n.setExpandable(true);t.copyContent=true;t.created=false;break;case"ownWorkflow":n.setExpandable(true);t.ownWorkflowId=0;t.copyContent=true;t.created=false;break;case"start":t.startType=null;t.date=null;t.hour=0;t.minute=0;t.sendReminder=false;t.remindAdminId=0;t.remindAtOnce=false;t.scheduleReminder=false;t.remindSpecificDate=false;t.remindDate=new Date;t.remindHour=0;t.remindMinute=0;t.event=null;t.reaction=null;t.mailingId=0;t.profileField="";t.dateProfileField="";t.dateFieldOperator=1;t.dateFieldValue="";t.useRules=false;t.rules=[];t.executeOnce=true;t.comment="";t.recipients="";t.adminTimezone="";break;case"stop":t.endType=null;t.date=null;t.hour=0;t.minute=0;t.sendReminder=false;t.remindAdminId=0;t.remindAtOnce=false;t.scheduleReminder=false;t.remindSpecificDate=false;t.remindDate=new Date;t.remindHour=0;t.remindMinute=0;t.event=null;t.reaction=null;t.mailingId=0;t.profileField="";t.useRules=false;t.rules=[];t.executeOnce=true;t.comment="";t.recipients="";t.adminTimezone="";break;case"decision":t.decisionType=null;t.decisionCriteria=null;t.reaction=null;t.mailingId=0;t.linkId=0;t.profileField="";t.aoDecisionCriteria=null;t.threshold="";t.decisionDate=new Date;t.rules=[];t.includeVetoed=true;break;case"deadline":t.deadlineType=null;t.date=new Date;t.timeUnit=null;t.delayValue=0;t.hour=0;t.minute=0;t.useTime=false;break;case"parameter":t.value=0;break;case"recipient":n.setDependent(false);t.mailinglistId=0;t.targets=[];t.altgs=[];t.targetsOption=null;break;case"archive":t.campaignId=0;t.archived=false;break;case"form":t.userFormId=0;t.formType="form";break;case"mailing":t.mailingId=0;t.skipEmptyBlocks=true;t.doubleCheck=true;break;case"actionbased_mailing":case"datebased_mailing":case"mailing_mediatype_sms":case"mailing_mediatype_post":t.mailingId=0;break;case"followup_mailing":t.baseMailingId=0;t.mailingId=0;t.decisionCriterion="OPENED";break;case"import":case"export":t.importexportId=0;t.errorTolerant=false;break}return n}static isExpandableType(e){switch(e){case i.NODE_TYPE_SC_ABTEST:case i.NODE_TYPE_SC_BIRTHDAY:case i.NODE_TYPE_SC_DOI:case i.NODE_TYPE_BIRTHDAY_WITH_COUPON:case i.NODE_TYPE_WELCOME_TRACK:case i.NODE_TYPE_WELCOME_TRACK_WITH_INCENTIVE:case i.NODE_TYPE_SHOPPING_CART_ABANDONERS_SMALL:case i.NODE_TYPE_SHOPPING_CART_ABANDONERS_LARGE:case i.NODE_TYPE_ANNIVERSARY_MAIL:case i.NODE_TYPE_OWN_WORKFLOW:case i.NODE_TYPE_SPLIT:return true;default:return false}}static deserialize(e){var t=$.extend({},e);var n=new r(e.type,t);n.setId(e.id);n.setCoordinates(e.x,e.y);n.setComment(e.iconComment);n.setFilled(e.filled);n.setEditable(e.editable);if([i.NODE_TYPE_OWN_WORKFLOW,i.NODE_TYPE_SC_BIRTHDAY,i.NODE_TYPE_SC_DOI,i.NODE_TYPE_SC_ABTEST,i.NODE_TYPE_BIRTHDAY_WITH_COUPON,i.NODE_TYPE_WELCOME_TRACK,i.NODE_TYPE_WELCOME_TRACK_WITH_INCENTIVE,i.NODE_TYPE_SHOPPING_CART_ABANDONERS_SMALL,i.NODE_TYPE_SHOPPING_CART_ABANDONERS_LARGE,i.NODE_TYPE_ANNIVERSARY_MAIL].includes(e.type)){n.setExpandable(true)}if(n.isMailingNode()&&t.mailingId){$.get(AGN.url(`/mailing/${t.mailingId}/name.action`)).done((t=>n.setTitle(t?t:e.iconTitle)))}else{n.setTitle(e.iconTitle)}delete t["id"];delete t["x"];delete t["y"];delete t["type"];delete t["iconTitle"];delete t["filled"];delete t["editable"];["date","remindDate","decisionDate"].forEach((function(e){if(t[e]){var i=t[e].toString();if(i.includes("-")){var n=i.split("-");t[e]=new Date(n[0],n[1]-1,n[2])}else{t[e]=new Date(t[e])}}}));return n}static deserializeConnections(e,t){var i=[];e.forEach((function(e){var n=t[e.id];if(n instanceof r){if(e.connections){e.connections.forEach((function(e){var o=t[e.targetIconId];if(o instanceof r){i.push({source:n,target:o})}}))}}}));return i}static toMap(e){var t={};e.forEach((function(e){t[e.getId()]=e}));return t}appendTo(e,t,i){this.$container=e;this.$titlesContainer=t;if(i){this.$element.addClass(i)}e.append(this.$element);t.append(this.$titleDiv);this.$titleDiv.toggleClass("expandable",this.$titleSpan.height()>this.$titleDiv.height())}isAppended(){return!!this.$container}get $inUseBadge(){return this.$element.find(".node-status-badge")}toggleInUseBadge(){return this.$inUseBadge.toggle(i.sentMailings.includes(parseInt(this.data.mailingId)))}get$(){return this.$element}getId(){return this.id}setId(e){this.id=e;this.$element.prop("id",e)}getX(){return this.x}getY(){return this.y}getCoordinates(){return{x:this.x,y:this.y}}setCoordinates(e,t){this.x=e;this.y=t;this.$element.css("left",e*i.CANVAS_GRID_SIZE);this.$element.css("top",t*i.CANVAS_GRID_SIZE)}updateCoordinates(e){var t=r.getPosition(this.$element);this.x=t.x/e/i.CANVAS_GRID_SIZE;this.y=t.y/e/i.CANVAS_GRID_SIZE}getType(){return this.type}setType(e){this.type=e;this.$element.find(".node-image").replaceWith(t.dom("workflow-node-icon",{type:e}))}getTitle(){return this.title}setTitle(e){this.title=e;if(e){this.$titleSpan.text(e);this.positionTitle(this.lastTitleAnchor);this.$titleDiv.toggleClass("expandable",this.$titleSpan.height()>this.$titleDiv.height())}this.setTitleEnabled(!!e)}setTitleEnabled(e){this.$titleDiv.toggle(!!e&&!!this.title)}setTitleExpanded(e){this.$titleDiv.toggleClass("expanded",!!e);if(this.isAppended()){if(e){this.$titleDiv.appendTo(this.$container)}else{this.$titleDiv.appendTo(this.$titlesContainer)}}}positionTitle(e){this.lastTitleAnchor=e;var t=this.x*i.CANVAS_GRID_SIZE;var n=t+i.NODE_SIZE;var r=this.y*i.CANVAS_GRID_SIZE;var o=r+i.NODE_SIZE;switch(e){case i.BOTTOM:this.$titleDiv.css({top:o,left:t+(i.NODE_SIZE-i.TITLE_WIDTH)/2,transform:"none"});break;case i.LEFT:this.$titleDiv.css({top:(r+o)/2,left:t-i.TITLE_WIDTH,transform:"translateY(-50%)"});break;case i.RIGHT:this.$titleDiv.css({top:(r+o)/2,left:n,transform:"translateY(-50%)"});break;case i.TOP:this.$titleDiv.css({top:r,left:t+(i.NODE_SIZE-i.TITLE_WIDTH)/2,transform:"translateY(-100%)"});break;default:return}}getOverlayTitle(){return this.overlayTitle}setOverlayTitle(e){this.overlayTitle=e;this.$overlayTitle.text(_.trim(e))}getComment(){return this.comment}get $commentBtn(){return this.$element.find(".node-comment-button")}setComment(e){this.comment=this.data.iconComment=e;this.updateCommentLabels()}updateCommentLabels(){const e=!!_.trim(this.comment);this.$element.toggleClass("icon-commented",e);this.$commentBtn.toggle(e)}setFootnote(e){if(e>0){this.$element.attr("comment-footnote",e)}else{this.$element.removeAttr("comment-footnote")}}isFilled(){return this.filled}setFilled(e){this.filled=e;this.$element.toggleClass("active",e);if(e&&this.isMailingNode()){this.toggleInUseBadge()}}isEditable(){return this.editable}setEditable(e){this.editable=e}isExpandable(){return this.expandable}setExpandable(e){this.expandable=e}isDependent(){return this.dependent}setDependent(e){this.dependent=e}isInRecipientsChain(){return this.inRecipientsChain}setInRecipientsChain(e){this.inRecipientsChain=e}getAnchors(){return this.anchors}setAnchors(e){this.anchors=e}getData(){return this.data}setData(e){this.data=e}setInteractionEnabled(e){this.$connectionButton.toggle(!!e)}removePopover(){this.nodePopover.remove()}setPopoverEnabled(e){this.nodePopover.setEnabled(e)}setHovered(e){this.setTitleExpanded(e)}remove(){this.nodePopover.remove();this.$element.remove();this.$titleDiv.remove();this.$container=null;this.$titlesContainer=null}serialize(){var t=$.extend({},this.data,{id:this.id,x:this.x,y:this.y,type:this.type,filled:this.filled,editable:this.editable,iconTitle:this.title});if("date"in t&&"hour"in t&&"minute"in t){t.date=e.getDateTimeValue(t.date,t.hour,t.minute)}if("remindDate"in t&&"remindHour"in t&&"remindMinute"in t){t.remindDate=e.getDateTimeValue(t.remindDate,t.remindHour,t.remindMinute)}if("decisionDate"in t){t.decisionDate=e.getDateTimeValue(t.decisionDate)}return t}}AGN.Lib.WM.Node=r})();(function(){var e=AGN.Lib.WM.Node;function t(t){this.id=t.getId();this.node=t;this.position=e.getPosition(t.get$());this.box=e.getBox(t.get$());this.connections={incoming:[],outgoing:[]}}t.nodesToVertices=function(e){return e.map((function(e){return new t(e)}))};t.verticesToMap=function(e){var t={};e.forEach((function(e){t[e.id]=e}));return t};t.verticesFrom=function(e,i){var n=t.nodesToVertices(e);var r=t.verticesToMap(n);i.forEach((function(e){var t,i;if("sourceId"in e){t=r[e.sourceId];i=r[e.targetId]}else{t=r[e.source.getId()];i=r[e.target.getId()]}t.connections.outgoing.push(i);i.connections.incoming.push(t)}));return n};t.compareByPosition=function(e,t){var i=e.box;var n=t.box;if(i.minX==n.minX){return i.minY-n.minY}return i.minX-n.minX};t.filterUnvisited=function(e,t){return e.filter((function(e){if(t[e.id]){return false}else{t[e.id]=true;return true}}))};t.getDecisionBranches=function(t){var i=t.connections.outgoing.map((function(e){return{source:t.node,target:e.node,targetVertex:e}}));var n=e.getDecisionBranches(i);if(n){return{positive:n.positive.targetVertex,negative:n.negative.targetVertex}}return null};t.getIncomingChains=function(e){var t={};var n=[];i([],e,t,n);return n};t.getOutgoingChains=function(e){var t={};var i=[];n([],e,t,i);return i};t.prototype.getNode=function(){return this.node};t.prototype.siblings=function(){return this.connections.incoming.concat(this.connections.outgoing)};t.prototype.rightSiblingsOrdered=function(){var i=this.connections.outgoing;if(e.isBranchingDecisionNode(this.node)){var n=t.getDecisionBranches(this);if(n){return[n.positive,n.negative]}}return i.sort((function(e,t){return e.node.getY()-t.node.getY()}))};function i(e,t,n,r){if(n[t.id]){r.push(e)}else{e.push(t.node);var o=t.connections.incoming;if(o.length){n[t.id]=true;if(o.length==1){i(e,o[0],n,r)}else{o.forEach((function(t){i(e.slice(),t,n,r)}))}n[t.id]=false}else{r.push(e)}}}function n(e,t,i,r){if(i[t.id]){r.push(e)}else{e.push(t.node);var o=t.connections.outgoing;if(o.length){i[t.id]=true;if(o.length==1){n(e,o[0],i,r)}else{o.forEach((function(t){n(e.slice(),t,i,r)}))}i[t.id]=false}else{r.push(e)}}}AGN.Lib.WM.Vertex=t})();(function(){var e=AGN.Lib.WM.Vertex;function t(e){this.vertices=e;this.box=e.map((function(e){return e.box})).reduce((function(e,t){return{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}}))}t.detectGroups=function(e){var i=[];var n={};e.forEach((function(e){var r=t.detectGroup(e,n);if(r){i.push(r)}}));return i.sort(t.compareByPosition)};t.detectGroup=function(e,i){if(i[e.id]){return null}var n=[];var r=e.siblings();n.push(e);i[e.id]=true;while(r.length){r=_.flatMap(r,(function(e){if(i[e.id]){return[]}else{n.push(e);i[e.id]=true;return e.siblings()}}))}return new t(n)};t.compareByPosition=function(e,t){var i=e.box.minX+e.box.maxX-(t.box.minX+t.box.maxX);if(i==0){return e.box.minY+e.box.maxY-(t.box.minY+t.box.maxY)}return i};t.prototype.getNodes=function(){return this.vertices.map((function(e){return e.getNode()}))};t.prototype.getStartingVertices=function(){var t=this.vertices.filter((function(e){return e.connections.incoming.length==0}));if(t.length){return t.sort(e.compareByPosition)}var i=this.vertices.reduce((function(t,i){var n=t.connections.outgoing.length/t.connections.incoming.length;var r=i.connections.outgoing.length/i.connections.incoming.length;if(n==r){return e.compareByPosition(t,i)>=0?t:i}return n>r?t:i}));return[i]};AGN.Lib.WM.VertexGroup=t})();(function(){var e=AGN.Lib.WM.Definitions,i=AGN.Lib.WM.DateTimeUtils;var n={};var r=function(){};function o(e,t,i){if(t<=0){return""}if(_.isEmpty(n[e])){$.ajax({url:AGN.url(i),async:false}).done((function(t){n[e]=_.extend({},t)}))}var r=n[e][t];return!!r?r:""}r.addArchiveName=function(e,t){s("archive",e,t)};r.addMailingName=function(e,t){s("mailing",e,t)};function s(e,t,i){const r=n[e]||{};r[t]=i;n[e]=r}r.getWebFormName=function(e){return o("form",e,"/workflow/ajax/getWebFormNames.action")};r.getTargetName=function(e){return o("target",e,"/workflow/ajax/getTargetNames.action")};r.getMailingName=function(e){return o("mailing",e,"/workflow/ajax/getMailingNames.action")};r.getArchiveName=function(e){return o("archive",e,"/workflow/ajax/getArchiveNames.action")};r.getAutoExportName=function(e){return o("autoExport",e,"/workflow/ajax/getAutoExportNames.action")};r.getAutoImportName=function(e){return o("autoImport",e,"/workflow/ajax/getAutoImportNames.action")};r.getMailinglistName=function(e){return o("mailinglist",e,"/workflow/ajax/getMailinglistNames.action")};function a(i){switch(i){case e.constants.reactionOpened:return t("workflow.reaction.opened");case e.constants.reactionNotOpened:return t("workflow.reaction.not_opened");case e.constants.reactionClicked:return t("workflow.reaction.clicked");case e.constants.reactionNotClicked:return t("workflow.reaction.not_clicked");case e.constants.reactionBought:return t("workflow.reaction.bought");case e.constants.reactionNotBought:return t("workflow.reaction.not_bought");case e.constants.reactionChangeOfProfile:return t("workflow.reaction.change_of_profile");case e.constants.reactionWaitingForConfirm:return t("workflow.reaction.waiting_for_confirm");case e.constants.reactionOptIn:return t("workflow.reaction.opt_in");case e.constants.reactionOptOut:return t("workflow.reaction.opt_out");case e.constants.reactionClickedLink:return t("workflow.reaction.clicked_on_link");case e.constants.reactionOpenedAndClicked:return t("workflow.reaction.opened_and_clicked");case e.constants.reactionOpenedOrClicked:return t("workflow.reaction.opened_or_clicked")}}function l(i,n){if(i>1){switch(n){case e.constants.deadlineTimeUnitMinute:return t("workflow.deadline.minutes");case e.constants.deadlineTimeUnitHour:return t("workflow.defaults.hours");case e.constants.deadlineTimeUnitDay:return t("workflow.defaults.days");case e.constants.deadlineTimeUnitWeek:return t("workflow.defaults.weeks");case e.constants.deadlineTimeUnitMonth:return t("workflow.defaults.months")}}else{switch(n){case e.constants.deadlineTimeUnitMinute:return t("workflow.deadline.minute");case e.constants.deadlineTimeUnitHour:return t("workflow.defaults.hour");case e.constants.deadlineTimeUnitDay:return t("workflow.defaults.day");case e.constants.deadlineTimeUnitWeek:return t("workflow.defaults.week");case e.constants.deadlineTimeUnitMonth:return t("workflow.defaults.month")}}}function c(i){switch(i){case e.constants.decisionAOCriteriaClickRate:return t("workflow.defaults.ckickrate");case e.constants.decisionAOCriteriaOpenrate:return t("workflow.opening_rate");default:return t("workflow.statistic.revenue")}}function d(e){switch(Number(e)){case 1:return")";case 0:return""}}function u(e){switch(Number(e)){case 1:return"(";case 0:return""}}function h(t,i){if(t&&e.GENDER_PROFILE_FIELD===t.toLowerCase()){return e.constants.genderOptions[!i?0:i]}else{return _.isEmpty(i)?"":i}}function p(i,n){var r="";n.forEach((function(t){r+=(_.isEmpty(r)?"":" "+t.chainOperator+" ")+u(t.parenthesisOpened)+i+" "+e.constants.operatorsMap[t.primaryOperator]+" "+h(i,t.primaryValue)+d(t.parenthesisClosed)}));return t("workflow.start.rule")+(!!r?": "+r:"")}function f(i,n){var o=[];for(var s=0;s<e.TITLE_MAX_TARGETS&&s<i.length;s++){o.push(r.getTargetName(i[s]))}var a=", ";if(e.constants.targetOptions[n]){a=" "+e.constants.targetOptions[n]+" "}if(i.length>e.TITLE_MAX_TARGETS){return o.join(a)+" "+t("defaults.andMore",i.length-e.TITLE_MAX_TARGETS)+"..."}else{return o.join(a)}}function g(t,n,r){if(t){if(arguments.length===1){return i.getDateStr(t,e.constants.localeDateTimePattern)}else{return i.getDateTimeStr(t,n,r,e.constants.localeDateTimePattern)}}else{return""}}function m(e,t){return e+" "+l(e,t)}function v(e,i){return t("workflow.reaction.title")+": "+a(e)+",\n"+t("workflow.defaults.mailing")+": "+r.getMailingName(i)}function b(e,i,n){var r=c(e)+(_.isEmpty(i)?"":": "+i)+"\n";if(!!n){r+=t("workflow.defaults.date")+": "+g(n)}return r}function y(t,i,n){return t+" "+e.constants.operatorsMap[i]+(!n?"":" "+n)}function w(e,t,i){if(e){if(t){return t+" ("+a(i)+") "+e}else{return e}}}function C(e,i,n,o){var s="";if(o){s+=t("workflow.mailinglist.short")+": "+r.getMailinglistName(e)}if(!_.isEmpty(i)){if(!_.isEmpty(s)){s+="\n"}s+=t("workflow.target.short")+": "+f(i,n)}return s}r.positionTitle=function(t,i){if(t.type==="split"){t.positionTitle(e.BOTTOM);return}if(i[e.BOTTOM]){if(i[e.LEFT]){if(i[e.RIGHT]){if(i[e.TOP]){t.positionTitle(e.BOTTOM)}else{t.positionTitle(e.TOP)}}else{t.positionTitle(e.RIGHT)}}else{t.positionTitle(e.LEFT)}}else{t.positionTitle(e.BOTTOM)}};var S=function(i){var n=i.startType;var r="";if(e.constants.startTypeDate===n){r=t("workflow.start.start_date")+":\n"+g(i.date,i.hour,i.minute)}else if(e.constants.startTypeEvent===n){var o=i.event;if(e.constants.startEventReaction===o){r=t("workflow.start.start_event")+":\n"+a(i.reaction)+": ("+g(i.date,i.hour,i.minute)+")"}else if(e.constants.startEventDate===o){r=t("workflow.start.start_event")+":\n"+y(i.dateProfileField,i.dateFieldOperator,i.dateFieldValue)+":\n"+"("+g(i.date,i.hour,i.minute)+")"}}return r};var A=function(i,n,r){var o=i.endType;var s="";if(e.constants.endTypeDate===o){s=t("workflow.stop.end_date")+":\n"+g(i.date,i.hour,i.minute)}else if(e.constants.endTypeAutomatic===o){s=r?t("workflow.stop.automatic_end"):t("workflow.stop.open_end")}return s};var x=function(i){var n=i.deadlineType;var r="";if(e.constants.deadlineTypeFixedDeadline===n){r=t("workflow.deadline.title")+":\n"+g(i.date,i.hour,i.minute)}else if(e.constants.deadlineTypeDelay===n){r=t("workflow.defaults.delay")+":\n"+m(i.delayValue,i.timeUnit)}return r};var E=function(i){var n=i.decisionType;var r="";if(e.constants.decisionTypeAutoOptimization===n){r=t("workflow.mailing.autooptimization")+":\n"+b(i.aoDecisionCriteria,i.threshold,i.decisionDate)}else{if(e.constants.decisionReaction===i.decisionCriteria){r=t("workflow.decision")+",\n"+v(i.reaction,i.mailingId)}else{r=t("workflow.decision")+",\n"+p(i.profileField,i.rules)}}return r};var T=function(e,t){var i,n;var o=t.title;i=r.getMailingName(e.baseMailingId)||"?";n=r.getMailingName(e.mailingId)||"?";var s=w(n,i,e.decisionCriterion);if(s){o=s}return o};var D={title:function(e){return r.getMailingName(e.mailingId)}};const M={"*":{overlayTitle:"",title:""},start:{title:S},stop:{title:A},deadline:{title:x},parameter:{title:"",overlayTitle:e=>e.value},split:{title:e=>t(`split.ratio.${e.splitType}`)},decision:{title:E,branches:{title:()=>({positive:t("workflow.defaults.yes"),negative:t("workflow.defaults.no")})}},recipient:{title:(e,t)=>C(e.mailinglistId,e.targets,e.targetsOption,!t.isInRecipientsChain())},archive:{title:e=>r.getArchiveName(e.campaignId)},form:{title:e=>r.getWebFormName(e.userFormId)},mailing:D,mailing_mediatype_sms:D,mailing_mediatype_post:D,actionbased_mailing:D,datebased_mailing:D,followup_mailing:{title:T},import:{title:e=>r.getAutoImportName(e.importexportId)},export:{title:e=>r.getAutoExportName(e.importexportId)}};function k(t){var i=t.getType();if(e.NODE_TYPES_MAILING.includes(i)||e.NODE_TYPES_IMPORT_EXPORT.includes(i)){return!!t.title}return false}r.getDecisionBranchesLabels=function(){return M.decision.branches.title()};r.updateTitle=function(e,t,i){if(!i&&k(e)){return}if(!e.isFilled()){e.setTitle("");e.setOverlayTitle("");return}e.setTitle(R(e,t));e.setOverlayTitle(P(e))};function P(e){return I(e.getType(),"overlayTitle",e.getData())}function R(e,t){return I(e.getType(),"title",e.getData(),e,t)}function I(e,t){var i=M[e];if(!i.hasOwnProperty(t)){i=M["*"]}var n=i[t];var r=Array.prototype.slice.call(arguments,2);return _.isFunction(n)?n.apply(i,r):n}AGN.Lib.WM.NodeTitleHelper=r})();(function(){const e=AGN.Lib.WM.Node;const t=AGN.Lib.WM.Definitions;const i=50;class n{constructor(e,t){this.minimap=e;this.$element=e.$container.find(t);this.scale=1}setScale(e){this.scale=e}getScale(){return this.scale}getPosition(){var e=this.$element.position();return{x:e.left,y:e.top}}update(){this.reset();var e=this.minimap.getPureIconsBox();var i=t.MINIMAP_PADDING*2;var n=e.maxX-e.minX+i;var r=e.maxY-e.minY+i;var o=(this.minimap.getWidth()-i)/n;var s=(this.minimap.getHeight()-i)/r;this.setScale(Math.min(o,s));var a=-e.minX*this.scale+t.MINIMAP_PADDING;var l=-e.minY*this.scale+t.MINIMAP_PADDING;this.$element.css({transform:"scale("+this.scale+")",width:n,height:r,left:a,top:l});this.renderIcons()}renderIcons(){var e=this;this.minimap.getPureIconsPosition().forEach((function(i){var n=$('<div class="miniview-element"></div>').css({width:t.NODE_SIZE,height:t.NODE_SIZE,left:i.x,top:i.y});e.$element.append(n)}))}reset(){this.scale=1;this.$element.css({transform:"scale(1)",width:0,height:0,left:0,top:0});this.$element.html("")}}class r{constructor(e,t,i){this.minimap=e;this.$element=e.get$().find(t);this.onDrag=_.isFunction(i.onPannerDrag)?i.onPannerDrag:_.noop;this.containment=$.extend({mode:"",padding:0},i.containment);this.containmentBox=null;var n=this;var r=0;var o=0;this.$element.draggable({start:function(e,t){r=t.position.left;o=t.position.top;if(!n.containmentBox){n.containmentBox=n.getContainmentBox(n.containment)}},drag:function(e,t){var i=n.getScale();if(n.containmentBox){var s=t.position.left;var a=t.position.top;if(s<n.containmentBox.minX){t.position.left=n.containmentBox.minX}else if(s>n.containmentBox.maxX){t.position.left=n.containmentBox.maxX}if(a<n.containmentBox.minY){t.position.top=n.containmentBox.minY}else if(a>n.containmentBox.maxY){t.position.top=n.containmentBox.maxY}}var l=(r-t.position.left)/i;var c=(o-t.position.top)/i;r=t.position.left;o=t.position.top;n.onDrag.call(n,l,c)}})}getContainmentBox(e){if(!e.mode||e.mode=="none"){return undefined}var t=this.minimap.get$();var i=this.getScaledWidth();var n=this.getScaledHeight();if(e.mode=="panner-box"){return{minX:-i+e.padding,maxX:t.width()-e.padding,minY:-n+e.padding,maxY:t.height()-e.padding}}else if(e.mode=="minimap-box"){return{minX:e.padding,maxX:Math.max(0,t.width()-i)-e.padding,minY:e.padding,maxY:Math.max(0,t.height()-n)-e.padding}}return undefined}getScale(){return this.minimap.getMiniCanvasScale()/this.minimap.getCanvasZoom()}getScaledWidth(){return this.getWidth()*this.getScale()}getScaledHeight(){return this.getHeight()*this.getScale()}getWidth(){return this.$element.width()}getHeight(){return this.$element.height()}update(){var e=this.minimap.getCanvasParent$();var i=e.width();var n=e.height();var r=i+t.MINIMAP_PADDING*2;var o=n+t.MINIMAP_PADDING*2;this.$element.css({width:r,height:o});this.containmentBox=this.getContainmentBox(this.containment);this.updatePosition()}updatePosition(){var e=this.minimap.getCanvasPosition();var t=this.minimap.getMiniCanvasPosition();var i=this.getScale();var n=-e.x*i+t.x;var r=-e.y*i+t.y;this.$element.css({transform:"scale("+i+")",left:n,top:r})}}class o{constructor(e,t){this.$container=$("#minimap");this.canvas=e;this.miniCanvas=new n(this,".minimap-canvas",t);this.miniPanner=new r(this,".minimap-panner",t);this.enabled=false;const i=this.$container.find(".minimap-collapse");const o=$("#collapsed-navigator");this.$container.on("click",".minimap-panner, .minimap-collapse, .minimap-arrow",(e=>e.preventFocusOnArea=true));i.on("click",(()=>this.toggleMinimap(false)));o.on("click",(()=>this.toggleMinimap(true)));this.$container.on("click",(e=>this.moveToClickPos(e)));this.$container.find(".minimap-arrow").on("click",(e=>{const t=$(e.currentTarget).data("arrow");const i=this.#Ve(t);this.moveCanvasTo(i.x,i.y)}))}#Ve(e){const{x:t,y:n}=this.canvas.getPosition();switch(e){case"up":return{x:t,y:n+i};case"right":return{x:t-i,y:n};case"down":return{x:t,y:n-i};case"left":return{x:t+i,y:n}}}moveToClickPos(e){if(e.preventFocusOnArea){return}const t=this.$container[0].getBoundingClientRect();const i=e.clientX-t.left;const n=e.clientY-t.top;this.focusOnClickedArea(i,n)}get$(){return this.$container}getWidth(){return this.get$().width()}getHeight(){return this.get$().height()}moveCanvasTo(e,t){this.canvas.moveTo(e,t)}getCanvas$(){return this.canvas.get$()}getCanvasParent$(){return this.canvas.get$().parent()}focusOnClickedArea(e,t){var i=this.getMiniCanvasPosition();var n=this.getMiniPannerScale();var r=(e-i.x)/n;var o=(t-i.y)/n;var s=this.getMiniPannerCenter();var a=this.getCanvasZoom();var l=(r-s.x)*a;var c=(o-s.y)*a;this.moveCanvasTo(-l,-c)}toggleMinimap(e){$("#navigator").toggle(e);$("#collapsed-navigator").toggle(!e)}getIcons(){return this.canvas.getIcons()}getPureIconsPosition(){var t=this.getCanvasZoom();return this.getIcons().map((function(i){var n=e.getPosition(i);return{x:n.x/t,y:n.y/t}}))}getPureIconsBox(){return this.canvas.getPureIconsBox()}getMiniCanvasScale(){return this.miniCanvas.getScale()}getMiniCanvasPosition(){return this.miniCanvas.getPosition()}getMiniPannerScale(){return this.miniCanvas.getScale()}getMiniPannerCenter(){return{x:this.miniPanner.getWidth()/2,y:this.miniPanner.getHeight()/2}}getCanvasZoom(){return this.canvas.getZoom()}getCanvasPosition(){return this.canvas.getPosition()}updateMinimap(){if(this.enabled){this.miniCanvas.update();this.miniPanner.update()}}onPanZoom(){if(this.enabled){this.miniPanner.updatePosition()}}setEnabled(e){this.enabled=e;if(e){this.updateMinimap();this.get$().show()}else{this.get$().hide()}}}AGN.Lib.WM.Minimap=o})();(function(){const e=AGN.Lib.WM.Definitions;const t=AGN.Lib.WM.Node;const i=AGN.Lib.WM.Minimap;class n{constructor(t){const n=this;this.$canvas=t;this.mouseWheelZoomEnabled=false;this.panningEnabled=false;this.zoomEventHandler=null;this.moveEventHandler=null;this.ignoreNextZoomEvent=false;this.minimap=new i(this,{containment:{mode:"panner-box",padding:5},onPannerDrag:function(e,t){if(e||t){var i=n.getPosition();n.moveTo(i.x+e,i.y+t)}}});this.panzoom=panzoom(t[0],{minZoom:e.MIN_ZOOM,maxZoom:e.MAX_ZOOM,initialZoom:e.DEFAULT_ZOOM,disableKeyboardInteraction:true,smoothScroll:false,onDoubleClick:()=>false,beforeWheel:()=>!n.mouseWheelZoomEnabled,beforeMouseDown:t=>t.button!==e.MOUSE_BUTTON_MIDDLE});this.panzoom.on("zoom",(function(){if(n.zoomEventHandler){if(n.ignoreNextZoomEvent){n.ignoreNextZoomEvent=false}else{n.zoomEventHandler.call(null,n.getZoom());n.minimap.onPanZoom()}}}));this.panzoom.on("pan",(function(){n.minimap.onPanZoom();if(n.moveEventHandler){n.moveEventHandler.call(null,n.getPosition())}}))}get$(){return this.$canvas}setMinimapEnabled(e){this.minimap.setEnabled(e)}updateMinimap(){this.minimap.updateMinimap()}setPanningEnabled(e){this.panningEnabled=!!e}setMouseWheelZoomEnabled(e){this.mouseWheelZoomEnabled=e}getZoom(){var e=this.panzoom.getTransform();return e.scale}getPosition(){var e=this.panzoom.getTransform();return{x:e.x,y:e.y}}getVisibleArea(){var e=this.$canvas.parent();var t=e.width();var i=e.height();var n=this.panzoom.getTransform();return{minX:-n.x/n.scale,minY:-n.y/n.scale,maxX:(t-n.x)/n.scale,maxY:(i-n.y)/n.scale}}moveTo(e,t){this.panzoom.moveTo(e,t)}setZoom(e){var t=this.panzoom.getTransform();this.ignoreNextZoomEvent=true;this.panzoom.zoomAbs(t.x,t.y,e);this.minimap.onPanZoom()}setOnZoom(e){this.zoomEventHandler=e}setOnMove(e){this.moveEventHandler=e}getCanvasParent$(){return this.get$().parent()}getIcons(){var e=[];this.get$().children(".node").each((function(t,i){e.push($(i))}));return e}getPureIconsBox(){var i=this.getIcons();var n=this.getZoom();if(i.length){var r=i.map((function(e){return t.getBox(e)})).reduce((function(e,t,i){return{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}}));return{minX:r.minX/n-e.CANVAS_GRID_SIZE,minY:r.minY/n-e.CANVAS_GRID_SIZE,maxX:r.maxX/n+e.CANVAS_GRID_SIZE,maxY:r.maxY/n+e.CANVAS_GRID_SIZE}}else{var o=this.getCanvasParent$();return{minX:-e.CANVAS_GRID_SIZE,minY:-e.CANVAS_GRID_SIZE,maxX:o.width()/n+e.CANVAS_GRID_SIZE,maxY:o.height()/n+e.CANVAS_GRID_SIZE}}}fitPdfPage(t,i){var n=this.getPureIconsBox();var r=n.maxX-n.minX+e.NODE_MIN_MARGIN;var o=n.maxY-n.minY+e.NODE_MIN_MARGIN;if(!e.PAGE_DIMENSIONS[t]){return}var s=e.PAGE_DIMENSIONS[t];var a=i=="landscape";var l=a?s.height:s.width;var c=a?s.width:s.height;var d=0;var u=0;var h=1;if(r>l||o>c){if(r/o<l/c){h=c/o}else{h=l/r}}if(n.minX<0){d=-n.minX*h}if(n.minY<0){u=-n.minY*h}var p="matrix("+h+", 0, 0, "+h+", "+d+", "+u+")";var f="left top 0";this.getCanvasParent$().css({transform:p,"-webkit-transform":p,"transform-origin":f,"-webkit-transform-origin":f,"backface-visibility":"hidden","-webkit-backface-visibility":"hidden",overflow:"visible"})}}AGN.Lib.WM.Canvas=n})();(()=>{const e=AGN.Lib.WM.Definitions;const i=AGN.Lib.Confirm;const n={Activation:r,Deactivation:c,confirmTestingStartStop:f,confirmMailingDataTransfer:d,confirmOwnWorkflowExpanding:u,createAutoOpt:h,createSplit:p,confirmCopy:g,connectionNotAllowed:m,mailingInUseDialog:l,simpleDialog:v};function r(e,t){const n=i.from("activate-campaign-dialog",{rows:e.length});if(!t){o(e)}return n}function o(e){const t=s();const i=a();new AGN.Lib.Table($("#activate-modal .table-wrapper"),t,e,i)}function s(){return[{field:"name",headerName:t("defaults.name"),filter:false,suppressMovable:true,sortable:true,sort:"asc",resizable:false,cellRenderer:"NotEscapedStringCellRenderer"}]}function a(){return{pagination:false,singleNameTable:true,showRecordsCount:"simple"}}function l(e){const i=t("workflow.mailing.copyQuestion");const n=`${t("workflow.button.copy")} ${t("workflow.defaults.and")} ${t("workflow.defaults.edit").toLowerCase()}`;return v(e,i,n)}function c(){const e=t("workflow.inactivating.title");const i=t("workflow.inactivating.question");return v(e,i)}function d(t){return i.from("mailing-data-transfer-modal",{Def:e,paramsToAsk:t})}function u(){return i.from("own-workflow-expanding-modal")}function h(){return i.from("create-auto-opt-modal")}function p(){return i.from("create-split-modal")}function f(t){return i.from("testing-modal",{startTesting:t,shortname:e.shortname})}function g(e){return i.from("workflow-copy-modal",{hasContent:e===true})}function m(){const e=t("workflow.dialog.connectionNotAllowedTitle");const i=t("workflow.dialog.connectionNotAllowedMessage");return v(e,i)}function v(e,n,r=t("defaults.ok")){return i.from("workflow-simple-dialog-modal",{title:e,message:n,btnText:r})}AGN.Lib.WM.Dialogs=n})();(()=>{const e=AGN.Lib.WM.Definitions;const t=AGN.Lib.WM.Node;class i{static loadSample(t,i,n){if([e.NODE_TYPE_SC_ABTEST,e.NODE_TYPE_SC_DOI,e.NODE_TYPE_ANNIVERSARY_MAIL,e.NODE_TYPE_SC_BIRTHDAY,e.NODE_TYPE_BIRTHDAY_WITH_COUPON,e.NODE_TYPE_WELCOME_TRACK,e.NODE_TYPE_WELCOME_TRACK_WITH_INCENTIVE,e.NODE_TYPE_SHOPPING_CART_ABANDONERS_SMALL,e.NODE_TYPE_SHOPPING_CART_ABANDONERS_LARGE].includes(t)){$.ajax({url:AGN.url("/workflow/getSampleWorkflowContent.action"),async:false,data:{type:t,gridEnabled:i},success:s(n)})}else{console.error("Unknown sample type: "+t)}}static loadAutoOptSample(e,t,i){$.get(AGN.url("/workflow/autoOptWorkflowSample.action"),{mailingsCount:e,gridEnabled:t}).done(s(i))}static createSplitSample(e,t,i){const r=n(e,t);s(i)(r)}static loadOwnWorkflow(e,t,i){$.ajax({url:AGN.url("/workflow/getWorkflowContent.action"),async:false,data:{workflowId:e,isWithContent:t},success:s(i)})}static removeStartStop(t,i,n,r){if(n||r){var o=[];var s=t.filter((function(t){var i=t.getType();if(n&&i===e.NODE_TYPE_START||r&&i===e.NODE_TYPE_STOP){o.push(t);return false}else{return true}}));if(s.length<t.length){Array.prototype.splice.apply(t,[0,t.length].concat(s));var a=i.filter((function(e){return!(o.includes(e.source)||o.includes(e.target))}));if(a.length<i.length){Array.prototype.splice.apply(i,[0,i.length].concat(a))}}}}static adjustPositions(e,t,i,n){var r=0,o=0;if(n){var s=a(e);r=s.getX();o=s.getY()}else{var l=0,c=0,d=0,u=0;var h=true;e.forEach((function(e){if(h){l=c=e.getX();d=u=e.getY();h=false}else{l=Math.min(l,e.getX());c=Math.max(c,e.getX());d=Math.min(d,e.getY());u=Math.max(u,e.getY())}}));r=Math.round((l+c)/2);o=Math.round((d+u)/2)}e.forEach((function(e){e.setCoordinates(t+e.getX()-r,i+e.getY()-o)}))}}function n(e,t){let i=0;const n=AGN.Lib.WM.SplitNodeEditor.getSplitPortions(e);const s=n.length;const a=t?s-1:(s-1)*3;const l=t?2:4;let c=0;const d=r(i++,l,a,e);const u=n.map((e=>{const n=o(i++,l+(t?2:4),c,e);d.connections.push({targetIconId:n.id});c+=t?2:6;return n}));return[d,...u]}function r(e,t,i,n){return{id:e,x:t,y:i,splitType:n,type:"split",filled:true,iconTitle:null,editable:true,iconComment:null,connections:[]}}function o(e,t,i,n){return{id:e,x:t,y:i,value:n,type:"parameter",filled:true,iconTitle:null,editable:true,iconComment:null}}function s(e){return function(i){var n=i.map(t.deserialize);var r=t.deserializeConnections(i,t.toMap(n));e.call(null,n,r)}}function a(t){var i=t.filter((function(t){return e.NODE_TYPE_START==t.getType()}));if(i.length==0){i=t}if(i.length>1){return i.reduce((function(e,t){if(e.getX()==t.getX()){return e.getY()<t.getY()?e:t}else{return e.getX()<t.getX()?e:t}}))}else{return i[0]}}AGN.Lib.WM.Snippets=i})();(()=>{const e=AGN.Lib.WM.Definitions;const t=AGN.Lib.WM.Node;const i=".js-draggable-button";function n(n){this.enabled=!!n.enabled;this.$buttons=$(i);const r=this;this.$buttons.each((function(){const i=$(this);i.draggable({revert:true,revertDuration:0,zIndex:e.Z_INDEX_DRAGGABLE_BUTTON,disabled:!r.enabled,cursorAt:function(){const e=this.helper[0].getBoundingClientRect();return[e.width/2-1,e.height/2]},appendTo:"#canvas",helper:function(){return t.createDraggable$(i.data("type"))},start:function(){n.onStart.call(r,i.data("type"))},stop:function(){n.onStop.call(r)},drag:function(t,i){const o=n.getZoom.call(r);i.position.left=Math.round(i.position.left/o/e.CANVAS_GRID_SIZE)*e.CANVAS_GRID_SIZE;i.position.top=Math.round(i.position.top/o/e.CANVAS_GRID_SIZE)*e.CANVAS_GRID_SIZE;n.onDrag.call(r,i.helper)}}).on("dblclick",(function(){if(r.enabled){n.onDrop.call(r,null,i.data("type"))}}))}));$("#viewPort").droppable({accept:i,tolerance:"fit",drop:function(t,i){const o=n.getZoom.call(r);const s=$("#canvas").offset();const a=Math.round((i.offset.left-s.left)/o);const l=Math.round((i.offset.top-s.top)/o);n.onDrop.call(r,i.helper,i.helper.data("type"),{x:Math.round(a/e.CANVAS_GRID_SIZE),y:Math.round(l/e.CANVAS_GRID_SIZE)})}})}n.prototype.setEnabled=function(e){this.enabled=!!e;this.$buttons.draggable("option","disabled",!e)};n.prototype.changeType=function(e,t){this.$buttons.filter((function(){return $(this).data("type")===e})).data("type",t)};AGN.Lib.WM.DraggableButtons=n})();(function(){var e=AGN.Lib.WM.Definitions,t=AGN.Lib.WM.Vertex,i=AGN.Lib.WM.VertexGroup;function n(e,t){this.layers=e;this.height=t}n.fromVertexGroup=function(e){var i=[];var r={};var o=t.filterUnvisited(e.getStartingVertices(),r);var s=0;while(o.length){s=Math.max(s,o.length);i.push(o);o=_.flatMap(o,(function(e){return t.filterUnvisited(e.rightSiblingsOrdered(),r)}))}return new n(i,s)};n.prototype.align=function(t,i){var n=null;this.layers.forEach((function(r){var o=Math.max(Math.round(e.AUTO_ALIGN_STEP_Y*(i-r.length)/2),1);if(n){var s=Math.abs(n.length-r.length);if(s>1){t+=Math.round(e.AUTO_ALIGN_EXTRA_STEP_X*s)}}r.forEach((function(i){i.node.setCoordinates(t,o);o+=e.AUTO_ALIGN_STEP_Y}));t+=e.AUTO_ALIGN_STEP_X;n=r}));return t};function r(t){var r=i.detectGroups(t).map((function(e){return n.fromVertexGroup(e)}));var o=0;r.forEach((function(e){o=Math.max(o,e.height)}));var s=1;r.forEach((function(t){s=t.align(s,o);s+=e.AUTO_ALIGN_STEP_BETWEEN_GROUPS}))}AGN.Lib.WM.AutoAlignment={align:r}})();(()=>{const e=AGN.Lib.WM.Definitions;const t=AGN.Lib.WM.Node;class i{constructor(e){this.maxLength=e;this._undoStack=[];this._transactionStack=[];this._transaction=false}add(e){while(this._undoStack.length>=this.maxLength){this._undoStack.shift()}this._undoStack.push(e)}pop(){return this._undoStack.pop().reverse()}addOperation(e){this._transactionStack.push(e)}isEmpty(){return _.isEmpty(this._undoStack)}startTransaction(){this._transaction=true}endTransaction(){this.flush();this._transaction=false}flush(){if(!_.isEmpty(this._transactionStack)){this.add(this._transactionStack)}this._transactionStack=[]}isTransactionStarted(){return this._transaction===true}}class n{constructor(t,n){this.editor=t;this.undoOperations={nodeAdded:this.undoAddNode,nodeDeleted:this.undoDeleteNode,nodeMoved:this.undoMoveNode,nodeDataUpdated:this.undoSaveNodeData,connectionCreated:this.undoCreateConnection,connectionDeleted:this.undoDeleteConnection};this.manualStart=false;this.undoStack=new i(e.MAX_UNDO_STEP);this.onChange=_.isFunction(n.onChange)?n.onChange:_.noop}undoAddNode(e){this.editor.deleteNode(e)}undoDeleteNode(e){if(e instanceof t){this.editor.add(t.restore(e))}else{this.editor.add(t.get(e))}}undoCreateConnection(e){this.editor.deleteConnectionBetween(e.source,e.target)}undoDeleteConnection(e){this.editor.connect(t.get(e.source),t.get(e.target))}undoMoveNode(e){const t=this.editor.getZoom();const i=this;e.forEach((function(e){e.node.setTitleEnabled(false)}));this.editor.batch((function(){e.forEach((function(e){var n=e.coordinates;var r=e.node;if(i.editor.getCurrentDragMode()!==e.dragMode){i.editor.convertCoordinates(n)}r.setCoordinates(n.x,n.y);r.updateCoordinates(t)}));i.editor.updateOverlays();i.editor.positionTitles();i.editor.updateMinimap()}));e.forEach((function(e){e.node.setTitleEnabled(true)}))}undoSaveNodeData(e,i){i=i instanceof t?i:t.get(i);e=e instanceof t?e:t.get(e);e.setTitle(i.title);e.setOverlayTitle(i.getOverlayTitle());e.setComment(i.getComment());e.setDependent(i.isDependent());e.setInRecipientsChain(i.isInRecipientsChain());e.setData(i.getData());e.setFilled(i.isFilled());this.editor.positionTitles();e.nodePopover.update()}canUndo(){return!this.undoStack.isEmpty()}startTransaction(){this.manualStart=true;this.undoStack.startTransaction()}endTransaction(){this.undoStack.endTransaction();this.onChange();this.manualStart=false}transaction(e){if(_.isFunction(e)){if(!this.undoStack.isTransactionStarted()){this.manualStart=false;this.undoStack.startTransaction()}e.call();if(!this.manualStart){this.undoStack.endTransaction()}this.onChange()}}operation(e){if(this.undoStack.isTransactionStarted()){var t=[].slice.call(arguments);t.shift();this.undoStack.addOperation({operation:e,args:t})}}undo(){if(this.canUndo()){const e=this.undoStack.pop().sort(((e,t)=>{const i=e.operation;const n=t.operation;if(i==="nodeDeleted"&&n!=="nodeDeleted"){return-1}if(i!=="nodeDeleted"&&n==="nodeDeleted"){return 1}return 0}));this.editor.batch((()=>{e.forEach((e=>{const t=this.undoOperations[e.operation];t?.apply(this,e.args)}))}));this.onChange()}}}AGN.Lib.WM.UndoManager=n})();(function(){const e=AGN.Lib.WM.Definitions;const t=AGN.Lib.WM.Utils;const i=AGN.Lib.WM.Node;const n=AGN.Lib.Select;var r=function(){var r={};this.editors=[];this.curEditor;this.curEditingNode;this.getCurrentNodeId=function(){return this.curEditingNode.getId()};this.getCurrentNodeAnchorsInUse=function(){if(r.getNodeAnchorsInUse){return r.getNodeAnchorsInUse(this.curEditingNode)}return{}};this.getCurrentEditor=function(){return this.curEditor};this.assignOptions=function(e){$.extend(r,e)};this.registerEditor=function(e,t){return this.editors[e]=t};this._notAllowedToChangeDuringPause=function(i){return t.isPausedWorkflow()&&!_.union(e.NODE_TYPES_MAILING,[e.NODE_TYPE_STOP]).includes(i.getType())};this.hideNodeEditors=function(){$('#node-editor > [id$="-editor"]').hide()};this.activeNodeIcon=function(e){$(".node").removeClass("under-edit");e.$element.addClass("under-edit")};this.toggleSelectNodeInfoMsg=function(e){$("#select-node-notification").toggle(e)};this.exitNodeEditorIfActive=function(e){if(this.curEditingNode!==e){return}this.hideNodeEditors();this.toggleSelectNodeInfoMsg(true)};this.showEditDialog=function(t){const i=t.getType();this.curEditingNode=t;this.curEditor=this.editors[i];this.curEditor.fillEditor(t);this.activeNodeIcon(t);this.toggleSelectNodeInfoMsg(false);this.hideNodeEditors();const n=this.getEditorPanel(i);AGN.runAll(n.find("form"));$("#node-editor").scrollTop(0);n.show();if(i===e.NODE_TYPE_RECIPIENT){n.parent().find(".recipient-editor-select").prop("disabled",t.isDependent()||t.isInRecipientsChain())}if(this.isReadOnlyMode()||this.curEditor.alwaysReadonly(t)){o(n)}if(this.curEditor.saveOnOpen&&!this.isReadOnlyMode()&&!this.curEditor.alwaysReadonly(t)){this.curEditor.save()}};this.isReadOnlyMode=function(){return t.checkActivation(!i.isMailingNode(this.curEditingNode))||this._notAllowedToChangeDuringPause(this.curEditingNode)};this.showIconCommentDialog=function(e){const t=this;this.curEditingNode=e;this.curEditor=this.editors["icon-comment"];this.curEditor.fillEditor(e);this.getEditorPanel("icon-comment").dialog({open:function(){t.getEditorPanel("icon-comment").parent().find(".ui-dialog-titlebar").hide()},width:300,height:"auto",minHeight:"auto",modal:true,resizable:false,fluid:true,position:{my:"left top",at:"left bottom",of:e.get$()}})};this.saveIconComment=function(e){const t=this.curEditingNode;r.getUndoManager().transaction((function(){r.getUndoManager().operation("nodeDataUpdated",t,_.cloneDeep(t));t.setComment(e);r.onChange(t)}));t.nodePopover?.update()};this.saveCurrentEditorWithUndo=function(e){_.defer((()=>{r.getUndoManager().startTransaction();this.saveCurrentEditor(e,(()=>r.getUndoManager().endTransaction()))}))};this.saveCurrentEditor=function(e,t){t=_.isFunction(t)?t:_.noop;var i=this;var n=this.curEditingNode;r.getUndoManager().operation("nodeDataUpdated",n,_.cloneDeep(n),i.curEditor);var o=i.curEditor.saveEditor();if(i.isNodeIsMailing(n)){var s=o.mailingId;if(e){e.checkDifferentMailingLists(s,(function(n){i.mailingSpecificSave(n,o,e);t()}),(function(n){i.curEditor.storedMailingContent=n;i.curEditor.storedMailingId=s;i.curEditor.storedEditorData=o;e.initOneMailinglistWarningDialog(e);t()}))}}else{$.extend(n.getData(),o);if(!n.isFilled()){n.setFilled(true)}if(n.isFilled()&&_.isFunction(i.curEditor.isSetFilledAllowed)){if(!i.curEditor.isSetFilledAllowed()){n.setFilled(false)}}if(r.supplement){r.supplement(n)}if(r.onChange){r.onChange(n)}t()}};this.resave=function(e){var t=this.curEditingNode;var i=this.curEditor;try{this.curEditingNode=e;this.curEditor=this.editors[e.getType()];this.curEditor.fillEditor(e);this.saveCurrentEditor()}finally{this.curEditingNode=t;this.curEditor=i}};this.modify=function(e,t){r.getUndoManager().operation("nodeDataUpdated",e,_.cloneDeep(e));t(e);if(r.onChange){r.onChange(e)}};this.isNodeIsMailing=function(t){return e.NODE_TYPES_MAILING.includes(t.getType())};this.mailingSpecificSave=function(e,t,i){const n=this.curEditingNode;const o=n.getData();$.extend(o,t);if(n.isFilled()&&_.isFunction(this.curEditor.isSetFilledAllowed)){if(!this.curEditor.isSetFilledAllowed()){n.setFilled(false)}}if(r.supplement){r.supplement(n,i,e)}if(r.onChange){r.onChange(n)}n.nodePopover.update();n.toggleInUseBadge()};this.mailingSpecificSaveAfterMailinglistCheckModal=function(e){this.curEditor.storedMailingContent.mailinglistId=e.configuredMailingData.mailinglistId;this.mailingSpecificSave(this.curEditor.storedMailingContent,this.curEditor.storedEditorData,e)};this.getEditorPanel=function(e){const t=e==="stop"?"start":e;return $(`#${t}-editor`)};this.formToObject=function(e){const t=$(`form[name="${e}"]`);const i=_.groupBy(t.serializeArray(),"name");const n=new Set(t.find("select.dynamic-tags").map(((e,t)=>t.name)).get());const r=Object.entries(i).map((([e,t])=>({name:e,value:n.has(e)?t.map((e=>e.value)):t[t.length-1].value})));let o={};$.each(r,(function(){if(this.name.indexOf("[")!=-1){var e=this.name.substring(0,this.name.indexOf("["));if(o[e]==undefined){o[e]=[]}var t=this.name.substring(this.name.indexOf("[")+1,this.name.indexOf("]"));if(o[e][t]==undefined){o[e][t]={}}if(this.name.indexOf(".")!=-1){var i=this.name.substring(this.name.indexOf(".")+1);o[e][t][i]=this.value}else{o[e][t]=this.value}}else{o[this.name]=this.value||""}}));$(`form[name="${e}"] [type="checkbox"]`).each((function(){o[this.name]=$(this).prop("checked")}));$(`form[name="${e}"] select.dynamic-tags`).each((function(){if(!o[this.name]){o[this.name]=[]}}));return o};this.fillFormFromObject=function(e,t,i,n){if(typeof t==="string"){this.fillFormFromObjectItem(e,i,i,t||n)}else{for(var r in t){if(t.hasOwnProperty(r)){var o=t[r];if(!o&&n&&n[r]){o=n[r]}this.fillFormFromObjectItem(e,i,r,o)}}}};this.fillFormFromObjectItem=function(e,t,i,r){const o=$(`form[name="${e}"] [name="${t}${i}"]`);if(Object.prototype.toString.call(r)==="[object Array]"&&!o.is("select.dynamic-tags")){for(let t=0;t<r.length;t++){this.fillFormFromObject(e,r[t],`${i}[${t}].`)}}else{switch(o.attr("type")){case"checkbox":o.prop("checked",Boolean(r));break;case"radio":o.filter(`[value="${r}"]`).prop("checked",true);break;default:switch(o.prop("tagName")){case"SELECT":if(o.hasClass("dynamic-tags")){if(r instanceof Array){const e=n.get(o);r.forEach((t=>{e.addOptionIfMissing(t);e.selectOption(t)}))}}else{o.val(r);this.initSelectWithValueOrChooseFirst(o,r)}break;default:o.val(r)}}}};this.processForward=function(e,t,i,n){var r=[];r.push("nodeId="+this.curEditingNode.getId());r.push("elementId="+encodeURIComponent(t));if(!!n){r.push(n)}const o={forwardName:e,forwardParams:r.join(";")};if(this.curEditor.safeToSave){this.saveCurrentEditor()}i(false,o)};this.getFirstOptionValue=function(e){return n.get(e).getFirstValue()};this.resetSelect=function(e){n.get(e).clear()};this.initSelectWithFirstValue=function(e){n.get(e).selectFirstValue()};this.initSelectWithValueOrChooseFirst=function(e,t){n.get(e).selectValueOrSelectFirst(t)};this.getNodesByTypes=function(e){if(r.getNodesByTypes){return r.getNodesByTypes(e)}return[]};this.getNodesByType=function(e){return this.getNodesByTypes([e])};this.getNodesByIncomingConnections=function(e){if(r.getNodesByIncomingConnections){return r.getNodesByIncomingConnections(e)}return[]};this.getNodesByOutgoingConnections=function(e){if(r.getNodesByOutgoingConnections){return r.getNodesByOutgoingConnections(e)}return[]};this.getFirstIncomingChain=function(){if(this.curEditingNode&&r.getFirstIncomingChain){return r.getFirstIncomingChain(this.curEditingNode)}return[]};this.forEachPreviousNode=function(e){var t=this;if(this.curEditingNode&&r.forEachPreviousNode){return r.forEachPreviousNode(this.curEditingNode,(function(i){return e.call(t,i)}))}return[]};this.deleteNode=function(e){if(r.deleteNodeById){r.deleteNodeById(e)}};this.openNode=function(e,t){if(r.editNode){r.editNode(e,t)}}};function o(e){e.find(".disable-for-active").each(((e,t)=>$(t).attr("disabled",true)));e.find(".hide-for-active").each(((e,t)=>$(t).hide()));e.find(':input:enabled[type!="hidden"]').not(":button, .select2, .js-select, .js-datepicker").each(((e,t)=>{$(t).attr(["radio","checkbox"].includes($(t).prop("type"))?"disabled":"readonly",true)}));e.find(":input:enabled.select2, .select2 .btn, :input:enabled.js-select, select").not(".disabled, :disabled").each((function(e,t){if($(t).prop("type")==="text"||$(t).is("input, select")){$(t).attr("disabled",true)}else{$(t).prop("disabled",true)}}));e.find(".js-datepicker").each((function(e,t){$(t).attr("disabled",true)}))}AGN.Lib.WM.EditorsHelper=new r})();(()=>{const e=AGN.Lib.WM.Definitions;const i=AGN.Lib.WM.Node;const n=AGN.Lib.WM.EditorsHelper;const r=AGN.Lib.WM.NodeTitleHelper;const o=AGN.Lib.WM.Utils;const s=AGN.Lib.Messages;const a=AGN.Lib.WM.Dialogs;const l=AGN.Lib.Select;const c=function(c,d){this.MAILING_TYPE_ACTIONBASED=1;this.MAILING_TYPE_DATEBASED=2;this.MAILING_TYPE_FOLLOWUP=3;this.node={};this.mailingsStatus="all";this.defaultMailingsSort=c.defaultMailingsSort;this.defaultMailingsOrder=c.defaultMailingsOrder;this.mailingsSort=this.defaultMailingsSort;this.mailingsOrder=this.defaultMailingsOrder;this.formNameJId='form[name="'+c.form+'"]';this.containerId=c.container;this.mailingType=parseInt(c.mailingType);this.mediaType=c.mediaType;this.mediatypes=c.mediatypes;this.mailingTypesForLoading=c.mailingTypesForLoading;this.statusName=c.mailingStatus;this.selectName=c.selectName;this.selectNameJId="select[name="+c.selectName+"]";this.mailingId=0;this.prevMailingId=0;this.showCreateEditLinks=c.showCreateEditLinks;this.$dropdown=null;if(c.$dropdown){this.$dropdown=c.$dropdown}this.isChangeDecisionOptions=c.isFollowUpBaseMailing;this.followUpContainer=c.followUpContainer;this.advertisingAdditionalOptions=c.advertisingAdditionalOptions;this.nodesChain=[];this.mailingData={};this.configuredMailingData=null;var u=this;this.fillEditorBase=function(e){this.node=e;if(o.checkActivation()){this.mailingsStatus="all"}else{this.mailingsStatus=$(this.formNameJId).find("input[checked=checked]").val()||"all"}this.mailingsSort=this.defaultMailingsSort;this.mailingsOrder=this.defaultMailingsOrder;this.cleanOptions();this.hideSendSettings();this.changeDecisionOptionsSet($(this.containerId),this.isChangeDecisionOptions)};this.cleanOptions=function(){$(this.containerId+" #"+this.statusName+"_all").attr("checked","checked");this.activateInputs();this.setSelectMailingOptions(this.node.data[this.selectName]);this.getMailingsByWorkStatus(this.mailingsStatus,this.mailingsSort,this.mailingsOrder,this.node.data.mailingId)};this.onMailingsStatusChange=function(e){this.setSelectMailingOptions(0);this.getMailingsByWorkStatus(e,this.mailingsSort,this.mailingsOrder);this.changeDecisionOptionsSet($(this.containerId),this.isChangeDecisionOptions)};this.onMailingSelectChange=function(e){this.setSelectMailingOptions(e);this.changeDecisionOptionsSet($(this.containerId),this.isChangeDecisionOptions)};this.changeDecisionOptionsSet=function(e,t){if(t){var i=this.mailingId;var n=$(e.find(this.followUpContainer));var r=this.advertisingAdditionalOptions;$(n.find(".advertisingOption")).remove();if(i){$.ajax({type:"POST",url:AGN.url("/mailing/ajax/"+i+"/isAdvertisingContentType.action")}).done((function(e){if(e&&e.success){var t=AGN.Lib.Template.text("followupAdvertisingOptions",{items:r});n.append(t)}}))}}};this.setMailingId=function(e){this.prevMailingId=this.mailingId;this.mailingId=e;if(this.$dropdown){if(this.mailingId>0){this.$dropdown.show()}else{this.$dropdown.hide()}}};this.setSelectMailingOptions=function(e){this.setMailingId(e);if(this.showCreateEditLinks){this.setMailingLinks(e)}};this.setMailingLinks=function(e){const t=$(this.getMailingLink(e));t.addClass("btn btn-icon btn-primary");$(this.containerId+" #mailing_create_edit_link").html(t);AGN.Lib.CoreInitializer.run("tooltip",t)};this.getMailingLink=function(e){if(!e||e==="0"){return`<a href="#" data-action="mailing-editor-new" data-tooltip="${t("workflow.mailing.new")}">\n                    <i class="icon icon-plus"></i>\n                </a>`}if(!o.checkActivation()){return`<a href="#" data-action="mailing-editor-edit" data-tooltip="${t("workflow.mailing.edit")}">\n                    <i class="icon icon-pen"></i>\n                </a>`}return`<a href="${AGN.url(`/mailing/${e}/settings.action`)}" data-tooltip="${t("workflow.mailing.edit")}">\n                <i class="icon icon-pen"></i>\n              </a>`};this.showSecurityQuestion=function(){this.setSecurityQuestion();this.setIsUsedInCMAttr();if(this.isSentMailing(this.mailingIsSent)||this.mailingIsUsedInCM){const e=this.getSelectedMailingOption();a.mailingInUseDialog(e.html()).then((()=>n.getCurrentEditor().copyMailing())).fail((()=>{this.mailingId=this.prevMailingId||0;this.mailingSelect().selectValue(this.prevMailingId)}));const t=$(".modal");const i=AGN.Lib.Confirm.get(t);t.on("modal:close",(()=>i.negative()));return false}return true};this.isSentMailing=function(e){return e=="mailing.status.sent"||e=="mailing.status.scheduled"||e=="mailing.status.norecipients"};this.getMailingsByWorkStatus=function(e,i,r,o){const s=this;const a=this.$mailingSelect();const c=l.get(a);c.setReadonly(true);$.ajax({url:AGN.url("/workflow/getMailingsByWorkStatus.action"),data:{mailingTypes:this.mailingTypesForLoading.join(","),mediatypes:this.mediatypes?this.mediatypes.join(","):"",status:e,sort:i,order:r},success:function(i){c.resetOptions();c.addOption(0,t("workflow.defaults.no_mailing"));i.forEach((function(e){const t=$("<option></option>",{value:e.MAILING_ID,text:e.SHORTNAME,selected:o==e.MAILING_ID});if(s.isSentMailing(e.WORK_STATUS)){t.css("color","#808080")}t.attr({status:e.WORK_STATUS,senddate:e.SENDDATE});t.data({status:e.WORK_STATUS,"send-date":e.SENDDATE,"dependent-campaigns":e.USEDINWORKFLOWS||""});a.append(t)}));c.setReadonly(false);s.mailingsStatus=e;n.initSelectWithValueOrChooseFirst(a,s.mailingId)}})};this.disableInputs=function(){$(this.containerId+' [name="'+this.statusName+'"]').attr("disabled","disabled")};this.activateInputs=function(){$(this.containerId+' [name="'+this.statusName+'"]').removeAttr("disabled")};this.setNodeFields=function(){this.node.setFilled(parseInt(this.mailingId,10)>0)};this.setSecurityQuestion=function(){var e=this.getSelectedMailingOption();this.mailingIsSent="";if(parseInt(this.mailingId,10)>0){this.mailingIsSent=e.data("status")}};this.setIsUsedInCMAttr=function(){var t=this.getSelectedMailingOption();var i=t.data("dependent-campaigns");var n=t.val();this.mailingIsUsedInCM=false;if(parseInt(this.mailingId,10)>0&&n==this.mailingId&&i){var r=e.workflowId||0;if(i>0){if(r>0){this.mailingIsUsedInCM=r!==i}else{this.mailingIsUsedInCM=true}}}};this.getSelectedMailingOption=function(){return $(this.formNameJId+" "+this.selectNameJId+" option[value="+this.mailingId+"]")};this.getSelectedDecisionOption=function(){var e="decisionCriterion";var t=$(this.formNameJId+' select[name="'+e+'"]').val();return $(this.formNameJId+' select[name="'+e+'"] option[value='+t+"]")};this.createNewMailing=function(t=_.noop){AGN.Lib.Messaging.unsubscribe("workflow:mailingCreated");if(!h(this.node)){s.warn("error.workflow.notAddedMailingList");return}let i="/mailing/create.action";if(this.node.type===e.NODE_TYPE_MAILING_MEDIATYPE_POST){i="/mailing/new.action"}else if(this.node.type===e.NODE_TYPE_MAILING_MEDIATYPE_SMS){i=e.constants.forwards.MAILING_CREATE_STANDARD.url}this.openSelectTemplateToCreateMailingView(i,{mediaType:this.mediaType||0});AGN.Lib.Messaging.subscribe("workflow:mailingCreated",(({mailingId:e,mailingName:i})=>{t(e,i);this.node.getData().mailingId=e;r.addMailingName(e,i);r.updateTitle(this.node,true,true);n.saveCurrentEditorWithUndo();AGN.Lib.Messages.defaultSaved()}))};this.openSelectTemplateToCreateMailingView=function(t,i={}){return $.get(AGN.url(t),_.extend({workflowId:e.workflowId,workflowForwardParams:this._getCreateMailingForwardParams()},i)).done((e=>AGN.Lib.Page.render(e)))};function h(e){return p(e)>0}function p(t){let i=0;n.curEditingNode=t;n.forEachPreviousNode((function(t){if(t.type===e.NODE_TYPE_RECIPIENT){i=t.data.mailinglistId;return false}}));return i}this._getCreateMailingForwardParams=function(){const e=this.formNameJId+" "+this.selectNameJId;const t={nodeId:n.curEditingNode.getId(),elementId:encodeURIComponent(e),mailingType:this.mailingType,workflowMailinglistId:p(this.node)};if(this.mailingType===this.MAILING_TYPE_FOLLOWUP){t.workflowFollowUpParentMailing=this.node.data.baseMailingId;t.workflowFollowUpDecisionCriterion=this.node.data.decisionCriterion}if(n.curEditor.safeToSave){n.saveCurrentEditor()}return Object.entries(t).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join(";")};this.processCopyAndEditMailingForward=function(e,t,i,r){$("#forwardTargetItemId").val(e);const o=["preventUxUpdateParamsCheck=true","mailingType="+u.mailingType];if(this.mailingType===this.MAILING_TYPE_FOLLOWUP){o.push("workflowFollowUpParentMailing="+this.node.data.baseMailingId);o.push("workflowFollowUpDecisionCriterion="+this.node.data.decisionCriterion)}n.processForward(t,i+" "+r,d,o.join(";"))};this.editMailing=function(e){this.processCopyAndEditMailingForward(this.mailingId,e,this.formNameJId,this.selectNameJId)};this.copyMailing=function(e){this.processCopyAndEditMailingForward(this.mailingId,e,this.formNameJId,this.selectNameJId)};this.trySupplementChain=function(e,t,i){if(e.length>0){this.configuredMailingData=f(e);this.nodesChain=e;this.mailingData=t;var n=g(u,true);if(n.length){a.confirmMailingDataTransfer(n).done((function(e){u.transferMailingData(e);u.supplementChain(i)})).fail((function(){u.transferMailingData();u.supplementChain(i)}))}else{u.supplementChain(i)}}};this.checkDifferentMailingLists=function(t,i,r){$.ajax({url:AGN.url(`/workflow/mailing/${t}/info.action`),method:"GET",async:false,success:t=>{var o=n.getFirstIncomingChain();this.configuredMailingData=f(o);this.nodesChain=o;this.mailingData=t;const s=o.filter((t=>t.getType()===e.NODE_TYPE_MAILING)).length;const a=this.configuredMailingData.mailinglistId;if(s>1&&a!=0&&a!=t.mailinglistId){r(t)}else{i(t)}}})};var f=function(t){var i={parameterValue:0,campaignId:0,mailinglistId:0,targets:[],date:null};for(var n=t.length-1;n>=0;n--){var r=t[n];var o=r.getData();switch(r.getType()){case e.NODE_TYPE_PARAMETER:i.parameterValue=o.value;break;case e.NODE_TYPE_ARCHIVE:i.campaignId=o.campaignId;break;case e.NODE_TYPE_RECIPIENT:if(i.mailinglistId==0){i.mailinglistId=o.mailinglistId}if(o.targets!==null){o.targets.forEach((function(e){if(!i.targets.includes(e)){i.targets.push(parseInt(e))}}))}break;case e.NODE_TYPE_START:if(o.date){i.date=A(o.date);i.date.setHours(o.hour);i.date.setMinutes(o.minute)}else{i.date=null}break;case e.NODE_TYPE_DEADLINE:if(o.deadlineType==e.constants.deadlineTypeFixedDeadline){if(o.date){i.date=A(o.date);i.date.setHours(o.hour);i.date.setMinutes(o.minute)}else{i.date=null}}else if(o.deadlineType==e.constants.deadlineTypeDelay){if(i.date!=null){if(o.timeUnit==e.constants.deadlineTimeUnitMinute){i.date.setMinutes(i.date.getMinutes()+parseInt(o.delayValue))}else if(o.timeUnit==e.constants.deadlineTimeUnitHour){i.date.setHours(i.date.getHours()+parseInt(o.delayValue))}else if(o.timeUnit==e.constants.deadlineTimeUnitDay){i.date.setDate(i.date.getDate()+parseInt(o.delayValue));if(o.useTime||o.useTime=="true"){i.date.setMinutes(i.date.getMinutes()+parseInt(o.minute));i.date.setHours(i.date.getHours()+parseInt(o.hour))}}}}break}}return i};var g=function(t,i){var n=t.configuredMailingData;var r=t.mailingData;var o=[];var s=[];var a=[];if(r.mailinglistId==0){a.push(e.MAILING_PARAM_MAILING_LIST)}else{if(n.mailinglistId==0){o.push(e.MAILING_PARAM_MAILING_LIST)}else{if(n.mailinglistId!=r.mailinglistId){if(i){s.push(e.MAILING_PARAM_MAILING_LIST)}else{o.push(e.MAILING_PARAM_MAILING_LIST)}}}}var l=n.targets;var c=r.targetGroupIds;if(c==null||c.length==0){a.push(e.MAILING_PARAM_TARGET_GROUPS)}else{if(l==null||l.length==0){o.push(e.MAILING_PARAM_TARGET_GROUPS)}else{if(!x(n,r)){if(i){s.push(e.MAILING_PARAM_TARGET_GROUPS)}else{o.push(e.MAILING_PARAM_TARGET_GROUPS)}}}}if(e.constants.isAltgExtended){var d=n.altgs;var u=r.altgIds;if(u==null||u.length==0){a.push(e.MAILING_PARAM_ALTGS)}else{if(d==null||d.length==0){o.push(e.MAILING_PARAM_ALTGS)}else{if(!E(n,r)){if(i){s.push(e.MAILING_PARAM_TARGET_GROUPS)}else{o.push(e.MAILING_PARAM_TARGET_GROUPS)}}}}}var h=t.getParameterValue(r.splitBase,r.splitPart);if(h==null){a.push(e.MAILING_PARAM_LIST_SPLIT)}else{if(n.parameterValue==0){o.push(e.MAILING_PARAM_LIST_SPLIT)}else{if(n.parameterValue!=h){if(i){s.push(e.MAILING_PARAM_LIST_SPLIT)}else{o.push(e.MAILING_PARAM_LIST_SPLIT)}}}}if(r.campaignId==0){a.push(e.MAILING_PARAM_ARCHIVE)}else{if(n.campaignId==0){o.push(e.MAILING_PARAM_ARCHIVE)}else{if(n.campaignId!=r.campaignId){if(i){s.push(e.MAILING_PARAM_ARCHIVE)}else{o.push(e.MAILING_PARAM_ARCHIVE)}}}}var p=n.date;var f=S(r);var g=C(r);if(f==null&&g==null){a.push(e.MAILING_PARAM_PLANNED_DATE)}else{if(p==null){if(f!=null){o.push(e.MAILING_PARAM_PLANNED_DATE)}else{o.push(e.MAILING_PARAM_SEND_DATE)}}else{if(A(f)>A(p)){if(i){s.push(e.MAILING_PARAM_PLANNED_DATE)}else{o.push(e.MAILING_PARAM_PLANNED_DATE)}}else if(f&&A(f)<A(p)){a.push(e.MAILING_PARAM_PLANNED_DATE)}if(g>p){if(i){s.push(e.MAILING_PARAM_SEND_DATE)}else{o.push(e.MAILING_PARAM_SEND_DATE)}}else if(g&&g<p){a.push(e.MAILING_PARAM_SEND_DATE)}}}m(t,a);return i?s:o};var m=function(t,i){var n=t.configuredMailingData;var r=t.mailingData;for(var o=0;o<i.length;o++){switch(i[o]){case e.MAILING_PARAM_MAILING_LIST:r.mailinglistId=n.mailinglistId;break;case e.MAILING_PARAM_TARGET_GROUPS:r.targetGroupIds=n.targets;break;case e.MAILING_PARAM_ALTGS:r.altgIds=n.altgs;break;case e.MAILING_PARAM_ARCHIVE:r.campaignId=n.campaignId;break;case e.MAILING_PARAM_LIST_SPLIT:r.splitBase="";r.splitPart="";break;case e.MAILING_PARAM_PLANNED_DATE:var s=A(n.date);if(s){r.planDate=s.getTime()}else{r.planDate=0}break;case e.MAILING_PARAM_SEND_DATE:r.sendDate=A(n.date);if(n.date){r.sendHour=n.date.getHours();r.sendMinute=n.date.getMinutes()}break}}};this.transferMailingData=function(e){if(e){m(u,e)}else{m(u,g(u,true))}};this.supplementChain=function(t){var i=g(this,false);var r=this.mailingData;var o=this.configuredMailingData;var s=this.nodesChain;var a=false;var l=false;for(var c=1;c<s.length;c++){if(e.NODE_TYPES_MAILING.includes(s[c].getType())){s.splice(c+1);l=true;break}}if(!l){if(i.includes(e.MAILING_PARAM_PLANNED_DATE)||i.includes(e.MAILING_PARAM_SEND_DATE)){if(e.NODE_TYPE_START==s[s.length-1].getType()){a=true}else{var d=n.getNodesByType(e.NODE_TYPE_START);if(d.length==0&&r.mailingType!==this.MAILING_TYPE_ACTIONBASED&&r.mailingType!==this.MAILING_TYPE_DATEBASED){a=true}}if(a){this.supplementSingleNode(e.NODE_TYPE_START,(function(t){var s=t.getData();if(i.includes(e.MAILING_PARAM_PLANNED_DATE)){s.date=S(r);var a=o.date;if(a){s.hour=a.getHours();s.minute=a.getMinutes()}n.resave(t)}else if(i.includes(e.MAILING_PARAM_SEND_DATE)){s.date=C(r);s.hour=s.date.getHours();s.minute=s.date.getMinutes()}}))}}}if(i.includes(e.MAILING_PARAM_LIST_SPLIT)){this.supplementSingleNode(e.NODE_TYPE_PARAMETER,(function(e){var t=e.getData();t.value=u.getParameterValue(r.splitBase,r.splitPart)}))}if(i.includes(e.MAILING_PARAM_ARCHIVE)){this.supplementSingleNode(e.NODE_TYPE_ARCHIVE,(function(e){var t=e.getData();t.campaignId=r.campaignId}))}if(i.includes(e.MAILING_PARAM_MAILING_LIST)||i.includes(e.MAILING_PARAM_TARGET_GROUPS)){this.supplementSingleNode(e.NODE_TYPE_RECIPIENT,(function(t){var n=t.getData();if(i.includes(e.MAILING_PARAM_MAILING_LIST)){n.mailinglistId=r.mailinglistId;t.setDependent(true)}if(i.includes(e.MAILING_PARAM_TARGET_GROUPS)){n.targets=r.targetGroupIds;if(e.constants.isAltgExtended){n.targetsOption="ONE_TARGET_REQUIRED"}else{n.targetsOption=e.constants.accessLimitTargetId>0?"ALL_TARGETS_REQUIRED":"ONE_TARGET_REQUIRED"}}if(e.constants.isAltgExtended){if(i.includes(e.MAILING_PARAM_ALTGS)){n.altgs=r.altgIds}}}))}if(!a&&(i.includes(e.MAILING_PARAM_PLANNED_DATE)||i.includes(e.MAILING_PARAM_SEND_DATE))){this.supplementSingleNode(e.NODE_TYPE_DEADLINE,(function(t){var n=t.getData();if(i.includes(e.MAILING_PARAM_PLANNED_DATE)){n.date=S(r);var s=o.date;if(s){n.date.setHours(s.getHours());n.date.setMinutes(s.getMinutes())}}else if(i.includes(e.MAILING_PARAM_SEND_DATE)){n.date=C(r)}n.deadlineType=e.constants.deadlineTypeFixedDeadline;n.hour=n.date.getHours();n.minute=n.date.getMinutes()}))}t(s)};this.supplementSingleNode=function(t,i){var n;switch(t){case e.NODE_TYPE_START:n=false;break;case e.NODE_TYPE_PARAMETER:n=[];break;case e.NODE_TYPE_ARCHIVE:n=[e.NODE_TYPE_PARAMETER];break;case e.NODE_TYPE_RECIPIENT:n=[e.NODE_TYPE_PARAMETER,e.NODE_TYPE_ARCHIVE];break;case e.NODE_TYPE_DEADLINE:n=[e.NODE_TYPE_PARAMETER,e.NODE_TYPE_ARCHIVE,e.NODE_TYPE_RECIPIENT];break;default:console.error("Unexpected supplement node type: "+t);return}if(!v(t,i)){b(t,n,i)}};var v=function(e,t){var i=u.nodesChain;for(var r=1;r<i.length;r++){var o=i[r];if(e==o.getType()){t(o);n.resave(o);return true}}return false};var b=function(e,t,n){var r=u.nodesChain;var o=i.create(e);n(o);if(t===false){r.push(o)}else{for(var s=1;s<r.length;s++){var a=r[s];if(!t.includes(a.getType())){r.splice(s,0,o);return}}r.push(o)}};this.acceptOneMailinglistPerCampaign=function(){n.mailingSpecificSaveAfterMailinglistCheckModal(u)};this.$mailingSelect=function(){return $(this.formNameJId+" "+this.selectNameJId)};this.mailingSelect=function(){return l.get(this.$mailingSelect())};this.validateEditor=function(e){var t=false;if($(this.containerId+" .delivery-settings").length){var i=$(this.containerId+' [name="maxRecipients"]').val();if(parseInt(i)!=i){s.warn("error.workflow.wrongMaxRecipientsFormat");t=true}else if(parseInt(i)<0){s.warn("error.workflow.maxRecipientsLessThanZero");t=true}else if(parseInt(i)>1e9){s.warn("error.workflow.maxRecipientsTooBig");t=true}}if($(`${this.containerId} .security-notifications-settings`).exists()){if($(`${this.containerId} [name="enableNotifications"]`).is(":checked")){const e=$(`${this.containerId} [name="clearanceEmails"]`).val();const i=$(`${this.containerId} [name="clearanceThreshold"]`);const n=i.val();if(!e.length||e.every((e=>e.trim()===""))){s.warn("error.workflow.emptyEmail");t=true}else if(!AGN.Lib.Helpers.isValidEmails(e)){s.warn("error.workflow.wrongEmail");t=true}if(n!==""&&n<=0){s.warn("error.workflow.notPositiveNumber",i.parent().text().trim());t=true}}}var r=$(this.formNameJId+" "+this.selectNameJId);if(r.val()<=0){s.warn("error.workflow.noMailing");t=true}if(!t){if(e){e()}else{n.saveCurrentEditor()}}};this.toggleSendSettings=function(e){if($("#sendSettings_"+e).css("display")=="none"){$("#sendSettingsToggle_"+e).removeClass("toggle_closed");$("#sendSettingsToggle_"+e).addClass("toggle_open")}else{$("#sendSettingsToggle_"+e).removeClass("toggle_open");$("#sendSettingsToggle_"+e).addClass("toggle_closed")}$("#sendSettings_"+e).toggle("blind",200)};this.hideSendSettings=function(){$(".wm-mailing-send-settings-link").removeClass("toggle_open");$(".wm-mailing-send-settings-link").addClass("toggle_closed");$(".wm-mailing-send-settings").css("display","none")};this.getParameterValue=function(e,t){if(e.length>4){for(var i=0;i<e.length/2;i++){if(i+1==t){return e.substring(i*2,(i+1)*2)}}}else{for(var i=0;i<e.length/2;i++){if(e.substring(i*2,(i+1)*2)==t){return e.substring(i*2,(i+1)*2)}}}return null};this.initOneMailinglistWarningDialog=function(e){a.simpleDialog(e.getSelectedMailingOption().html(),t("workflow.mailinglist.onlyOne")).then((()=>e.acceptOneMailinglistPerCampaign())).fail((()=>{this.mailingId=this.prevMailingId||0;this.mailingSelect().selectValue(this.prevMailingId)}));const i=$(".modal");const n=AGN.Lib.Confirm.get(i);i.on("modal:close",(()=>n.negative()))};var y=function(e){return e.sendDate!=undefined&&e.sendDate!=null&&e.sendHour!=null&&e.sendMinute!=null};var w=function(e){return e.planDate>0};var C=function(e){if(y(e)){return new Date(e.sendDate+"T"+e.sendHour+":"+e.sendMinute+":00")}return null};var S=function(e){if(w(e)){return new Date(e.planDate)}return null};var A=function(e){if(e==null){return null}else{return new Date(e.getFullYear(),e.getMonth(),e.getDate())}};var x=function(e,t){var i=e.targets;var n=t.targetGroupIds;if(i==null&&n==null){return true}if(i.length!=n.length){return false}for(var r=0;r<n.length;r++){if(!T(i,n[r])){return false}}return true};var E=function(e,t){var i=e.altgs;var n=t.altgIds;if(i==null&&n==null){return true}if(i.length!=n.length){return false}for(var r=0;r<n.length;r++){if(!T(i,n[r])){return false}}return true};var T=function(e,t){return e.indexOf(t)!=-1}};AGN.Lib.WM.MailingEditorHelper=c})();(function(){const e=AGN.Lib.WM.EditorsHelper;AGN.Lib.WM.MailingSelector=function(i,n,r){this.formNameJId='form[name="'+i+'"]';this.selectNameJId="select[name="+n+"]";this.defaultSortField="date";this.mailingId=0;this.noMailingOption=r;this.cleanOptions=function(){this.getAllMailingSorted(this.defaultSortField,"asc")};this.onMailingSelectChange=function(e){};this.setMailingId=function(e){this.mailingId=e};this.getAllMailingSorted=function(i,n){var r=this;var o=$(this.formNameJId+" "+this.selectNameJId);var s=o.val();if(s!=null){r.mailingId=s}o.attr("readonly","readonly");$.ajax({type:"GET",url:AGN.url("/workflow/getAllMailingSorted.action"),data:{sortField:i,sortDirection:n},success:function(i){o.html("");if(r.noMailingOption){o.append('<option value="0">'+t("workflow.defaults.no_mailing")+"</option>")}for(var n=0;n<i.length;n++){o.append("<option "+' value="'+i[n].mailingID+'">'+i[n].shortname+"</option>")}o.removeAttr("readonly");if(r.mailingId==0&&r.noMailingOption==false&&i.length>0){o.val(i[0].mailingID)}else{o.val(r.mailingId)}e.initSelectWithValueOrChooseFirst(o,o.val())}})};this.getSelectedMailingOption=function(){return $(this.formNameJId+" "+this.selectNameJId+" option[value="+this.mailingId+"]")}}})();(function(){const e=AGN.Lib.WM.Definitions;class t{constructor(e){this.canvas=e;this.$gridBackground=$("#grid-background");this.scale=1;this.#je();this.canvas.setOnMove((()=>this.move()))}get shown(){return!this.$gridBackground.hasClass("hidden")}setZoom(e){this.scale=e;this.move();this.#je()}toggle(){this.$gridBackground.toggleClass("hidden")}move(){const{x:e,y:t}=this.canvas.getPosition();const i=this.#Ue(e);const n=this.#Ue(t);this.$gridBackground.css({left:"-"+i+"px",top:"-"+n+"px",width:"calc(100% + "+i+"px)",height:"calc(100% + "+n+"px)"})}#je(){const t=e.NODE_SIZE*this.scale;this.$gridBackground.css("background-size",t+"px "+t+"px")}#Ue(t){if(t<=0){return t*-1}const i=e.NODE_SIZE*this.scale;const n=t/i%1;return i-i*n}}AGN.Lib.WM.GridBackground=t})();(()=>{const e=AGN.Lib.WM.Definitions;const i=AGN.Lib.WM.Node;const n=AGN.Lib.WM.Vertex;const r=AGN.Lib.WM.VertexGroup;const o=AGN.Lib.WM.NodeTitleHelper;const s=AGN.Lib.WM.Canvas;const a=AGN.Lib.WM.GridBackground;const l=AGN.Lib.WM.ConnectionConstraints;const c=AGN.Lib.WM.DraggableButtons;const d=AGN.Lib.WM.AutoAlignment;const u=AGN.Lib.WM.UndoManager;const h=AGN.Lib.WM.EditorsHelper;const p=AGN.Lib.WM.Dialogs;const f=AGN.Lib.WM.Snippets;const g=AGN.Lib.ContextMenu;const m=AGN.Lib.Helpers;const v=AGN.Lib.Messages;const b=AGN.Lib.WM.Utils;const y=50;const w={blurInputFields:function(){if(document.activeElement&&$(document.activeElement).is("input, textarea")){document.activeElement.blur()}},setConnectionLabel:function(e,t){if(t){var i=e.origin.getOverlay("label");if(i){i.setLabel(t);i.show()}else{e.origin.addOverlay(["Label",{location:.5,id:"label",cssClass:"connection-label",label:t}])}}else{e.origin.hideOverlay("label")}},setDeleteButtonEnabled:function(e){$("#deleteButton").toggleClass("disabled",!e);$("#deleteItem").prop("disabled",!e)},setUndoButtonEnabled:function(e){$("#undoButton").toggleClass("disabled",!e);$("#undoItem").prop("disabled",!e)}};class C{constructor(t,n,r){this.$viewport=$("#viewPort");this.$container=$("#canvas");this.$titlesContainer=this.$container.find("#icon-titles-container");this.canvas=new s(this.$container);this.canvasZoomHandler=null;this.instance=jsPlumb.getInstance(C.defaults(this.$container));this.editable=!!t;this.lastAllocatedId=0;this.drag=null;this.chainModeEnabled=false;this.multiConnectionEnabled=false;this.scale=1;this.dragMode=e.DEFAULT_DRAG_MODE;this.gridBackground=new a(this.canvas);this.instance.isHoverSuspended=()=>!this.editable;const o=this;this.canvas.setOnZoom((e=>{this.instance.setZoom(e);this.gridBackground.setZoom(e);if(this.canvasZoomHandler){this.canvasZoomHandler.call(null,e)}}));this.draggableButtons=new c({enabled:!!t,getZoom:()=>o.getZoom(),onStart:function(e){this._connections=o.getConnections();this._connectionsHoverAllowed=!i.isExpandableType(e);this._occupiedAreas=o.getNodes$().get().map((e=>i.getCollisionBox($(e))))},onStop:function(){this._connections.forEach((e=>$(e.origin.canvas).removeClass("js-connection-drop-forbidden")));this._connections=null},onDrag:function(e){const t=i.getCollisionBox(e);const n=this._occupiedAreas.some((e=>i.detectBoxCollision(t,e)));e.toggleClass("js-collision-detected",n);this._connections.forEach((e=>{$(e.origin.canvas).toggleClass("js-connection-drop-forbidden",e.origin.isHover()&&!this._connectionsHoverAllowed)}))},onDrop:function(e,t,n){const r=e?.hasClass("js-collision-detected");const s=o.findHoveredConnection(this._connections);if(!s&&r){return}if(s&&!this._connectionsHoverAllowed){return}o.undoManager.transaction((()=>{if(!s||o.canInsertNodeIntoConnection(i.create(t),s)){const e=o.newNode(t,n);if(s){o.insertNodeIntoConnection(e,s,r)}}}))}});this.$viewport.selectable({filter:".node",distance:10,disabled:!this.editable,start:function(){$("#selection-backdrop").show()},stop:function(){$("#selection-backdrop").hide()},selected:function(e,t){o.instance.addToDragSelection(t.selected);o.onSelectionChanged()},unselected:function(e,t){o.instance.removeFromDragSelection(t.unselected);o.onSelectionChanged()}});this.$viewport.on("mousedown",(function(e){if(["canvas","viewPort","icon-titles-container"].includes(e.target.id)||$.contains(o.$titlesContainer[0],e.target)){o.deselectAll()}w.blurInputFields()}));this.$viewport.on("wheel",(e=>{if(this.canvas.mouseWheelZoomEnabled){e.preventDefault();return}const{x:t,y:i}=this.canvas.getPosition();const n=e.originalEvent.wheelDelta>0?1:-1;const r=y*n;const[o,s]=e.shiftKey?[t+r,i]:[t,i+r];this.canvas.moveTo(o,s)}));this.instance.bind("connection",(function(e){o.undoManager.operation("connectionCreated",e);o.autofillStopNodesIfPossible();o.autoConvertMailingNodesTypeIfPossible();o.updateOverlays();o.positionTitles();o.processRecipientsChains()}));this.instance.bind("connectionDetached",(function(e){o.undoManager.operation("connectionDeleted",e);o.autofillStopNodesIfPossible();o.autoConvertMailingNodesTypeIfPossible();o.updateOverlays();o.positionTitles();o.processRecipientsChains()}));this.instance.bind("mousedown",(function(t,i){if(o.editable&&i.button===e.MOUSE_BUTTON_MIDDLE){_.defer((function(){o.undoManager.transaction((function(){o.deleteConnection(t)}))}))}w.blurInputFields()}));this.instance.bind("beforeDrag",(function(){o.undoManager.startTransaction()}));this.instance.bind("connectionDragStop",(function(){o.undoManager.endTransaction()}));this.instance.bind("connectionDrag",(function(e){o.deselectAll();if(e.source){var t=$(e.source);o.setNodeSelected(t,true);if(o.isChainMode()){i.setChainSource(t,true)}}}));this.instance.bind("beforeDrop",(function(e){var t=i.get(document.getElementById(e.sourceId));var n=i.get(document.getElementById(e.targetId));var r=o.connect(t,n,true);if(r){return true}if(r===false){p.connectionNotAllowed()}return false}));this.$footnotesContainer=$("#footnotes-container ol");this.isFootnotesEnabled=r;this.undoManager=new u(this,{onChange:function(){w.setUndoButtonEnabled(this.canUndo());o.processRecipientsChains();o.autofillStopNodesIfPossible();o.autoConvertMailingNodesTypeIfPossible()}});h.assignOptions({getUndoManager:()=>o.getUndoManager(),getNodesByTypes:e=>o.getNodesByTypes(e),getNodesByIncomingConnections:function(e){return o.getNodeIncomingConnections(e).map((function(e){return e.source}))},getNodesByOutgoingConnections:function(e){return o.getNodeOutgoingConnections(e).map((function(e){return e.target}))},getFirstIncomingChain:e=>o.getFirstIncomingChain(e),forEachPreviousNode:(e,t)=>o.forEachPreviousNode(e,t),getNodeAnchorsInUse:e=>o.getAnchorsInUse(e),onChange:function(e){o.updateNodeTitle(e,true);o.updateFootnotes();o.updateMinimap()},supplement:function(e){o.supplement.apply(o,arguments)},editNode:function(e,t){alert("Missing editorsHelper.editNode")},deleteNodeById:function(e){alert("Missing editorsHelper.deleteNodeById")}});if(n){g.create(C.contextMenuOptions(o))}}static defaults(t){return{Container:t,Anchor:[[0,.5,-1,0],[.5,0,0,-1],[1,.5,1,0],[.5,1,0,1]],DragOptions:{cursor:"pointer",zIndex:e.Z_INDEX_JSPLUMB_DRAG_OPTIONS},Endpoint:"Blank",Connector:["FixedBezierConnector"],PaintStyle:{stroke:e.CONNECTION_COLOR,strokeWidth:e.CONNECTION_THICKNESS,outlineStroke:e.CONNECTION_OUTLINE_COLOR,outlineWidth:e.CONNECTION_OUTLINE_WIDTH},HoverPaintStyle:{stroke:e.CONNECTION_HOVER_COLOR,strokeWidth:e.CONNECTION_THICKNESS,outlineStroke:e.CONNECTION_OUTLINE_COLOR,outlineWidth:e.CONNECTION_OUTLINE_WIDTH},ConnectionOverlays:[["PlainArrow",{id:"arrow",visible:true,location:1,width:e.CONNECTION_ARROW_SIZE,length:e.CONNECTION_ARROW_SIZE}]]}}static contextMenuOptions(e){return{".jtk-connector":{shown:()=>e.editable,items:{delete:{name:t("workflow.defaults.delete"),icon:"delete",disabled:function(t){return!e.canDeleteConnection(e.getConnectionByConnector$(t))},clicked:function(t){e.undoManager.transaction((()=>{const i=e.getConnectionByConnector$(t);e.deleteConnection(i.origin)}))}}}},".node":{shown:()=>true,items:{connect:{name:t("workflow.connect"),icon:"connect",shown:()=>e.editable&&e.getSelectionSize()>1,clicked:function(){e.undoManager.transaction((()=>{if(e.getSelectionSize()==2&&e.multiConnectionEnabled){e.connectBetweenSelected()}else{e.connectSelected()}}))}},disconnect:{name:t("workflow.disconnect"),icon:"disconnect",shown:()=>e.editable&&e.getSelectionSize()>1,clicked:function(){e.undoManager.transaction((()=>{e.disconnectSelected()}))}},edit:{name:t("workflow.defaults.edit"),icon:"pen",shown:()=>e.getSelectionSize()<=1,clicked:t=>e.editIcon(i.get(t)),disabled:e=>!i.get(e).isEditable()},delete:{name:t("workflow.defaults.delete"),icon:"trash-alt",clicked:function(){e.undoManager.transaction((()=>e.deleteSelected()))},disabled:()=>!e.editable},comment:{name:t("workflow.defaults.comment"),icon:"comment-dots",clicked:t=>e.editIconComment(i.get(t)),disabled:()=>!e.editable}}}}}updateFootnotes=_.throttle((()=>{this.forEachNode((e=>e.setFootnote(-1)));this.$footnotesContainer.html("");if(this.isFootnotesEnabled){var e=this;var t=1;this.forEachNode((function(n){if(i.isCommented(n)){e.$footnotesContainer.append('<li id="#fn:'+t+'">'+n.getComment()+"</li>");n.setFootnote(t);t++}}))}}),150);isActionBasedWorkflow(){return this.getNodes().some((t=>t.getType()===e.NODE_TYPE_ACTION_BASED_MAILING))}isDateBasedWorkflow(){return this.getNodes().some((t=>t.getType()===e.NODE_TYPE_DATE_BASED_MAILING))}isNormalWorkflow(){return!this.isActionBasedWorkflow()&&!this.isDateBasedWorkflow()}getNodes$(){return this.$container.find(".node")}getNodes(){return this.getNodes$().get().map((e=>i.get(e)))}getVertices(){return n.verticesFrom(this.getNodes(),this.instance.getAllConnections())}getNodesByType(e){return this.getNodesByTypes([e])}getNodesByTypes(e){return this.getNodes().filter((t=>e.includes(t.type)))}forEachNode$(e){const t=this.getNodes$();const i=this;t.each((function(){e.call(i,$(this))}))}forEachNode(e){this.forEachNode$((t=>e.call(this,i.get(t))))}forEachPreviousNode(e,t){var i=this.getConnections();var n=i.filter((function(t){return t.target===e})).map((e=>e.source));var r={};while(n.length){for(var o=0;o<n.length;o++){var s=n[o];var a=s.getId();var l=t.call(this,s);if(l===false){return}r[a]=true}n=i.filter((function(e){if(n.includes(e.target)){var t=e.source.getId();if(r[t]){return false}else{r[t]=true;return true}}else{return false}})).map((e=>e.source))}}getNodeIncomingChains(e){var t=this.getVertices();var i=t.find((t=>t.node==e));var r=[];if(i){return n.getIncomingChains(i)}return r}getNodeOutgoingChains(e){var t=this.getVertices();var i=t.find((t=>t.node==e));var r=[];if(i){return n.getOutgoingChains(i)}return r}getFirstOutgoingChain(e){const t=this.getNodeOutgoingChains(e);if(t.length){return t[0]}return[]}getFirstIncomingChain(e){var t=this.getNodeIncomingChains(e);if(t.length){return t[0]}return[]}getNodeIncomingConnections(e){return this.getConnections((t=>i.get(t.target)===e))}getNodeOutgoingConnections(e){return this.getConnections((t=>i.get(t.source)===e))}getNodeConnections(e){return this.getConnections((t=>i.get(t.source)===e||i.get(t.target)===e))}isNodeConnected(e){return this.getNodeConnections(e).length>0}hasNodeIncomingConnections(e){return this.instance.getAllConnections().some((t=>i.get(t.target)===e))}hasNodeOutgoingConnections(e){return this.instance.getAllConnections().some((t=>i.get(t.source)===e))}hasConnection(e){return this.instance.getAllConnections().some((function(t){return e.call(null,{origin:t,source:i.get(t.source),target:i.get(t.target)})}))}getConnections(e){var t=this.instance.getAllConnections();if(e){t=t.filter(e)}return t.map((function(e){return{origin:e,source:i.get(e.source),target:i.get(e.target)}}))}getConnectionByConnector$(e){return this.getConnections((t=>t.canvas==e[0]))[0]}getConnectionBetween(e,t){return this.getConnections((i=>$(i.source).is(e)&&$(i.target).is(t)))[0]}recycle(){this.instance.reset();this.$container.empty()}batch(){this.instance.batch.apply(this.instance,arguments)}newNode(t,n){var r=this;if(this.editable){if(i.isExpandableType(t)){const i=e.workflowId===0&&r._isInInitialState();switch(t){case e.NODE_TYPE_SC_BIRTHDAY:case e.NODE_TYPE_SC_DOI:case e.NODE_TYPE_BIRTHDAY_WITH_COUPON:case e.NODE_TYPE_WELCOME_TRACK:case e.NODE_TYPE_WELCOME_TRACK_WITH_INCENTIVE:case e.NODE_TYPE_SHOPPING_CART_ABANDONERS_SMALL:case e.NODE_TYPE_SHOPPING_CART_ABANDONERS_LARGE:case e.NODE_TYPE_ANNIVERSARY_MAIL:if(e.workflowId===0&&this._isInInitialState()){this.deleteAllNodes()}this.newSnippetFromSample(t,n);break;case e.NODE_TYPE_SC_ABTEST:p.createAutoOpt().done((e=>{if(i){r.deleteAllNodes()}f.loadAutoOptSample(e,this.gridBackgroundShown,((e,t)=>this.newSnippet(e,t,n)))}));break;case e.NODE_TYPE_OWN_WORKFLOW:p.confirmOwnWorkflowExpanding().done((function(e){if(i){r.deleteAllNodes()}r.newSnippetFromOwnWorkflow(e.workflowId,e.copyContent,n)}));break;case e.NODE_TYPE_SPLIT:p.createSplit().done((e=>{f.createSplitSample(e,this.gridBackgroundShown,((e,t)=>this.newSnippet(e,t,n)))}));break}}else{var o=i.create(t);var s=e.NODE_ANIMATION_DROPPED;if(!n){n=this.pickNewNodePosition();s=e.NODE_ANIMATION_AUTO_DROPPED}o.setCoordinates(n.x,n.y);r.add(o,s);r.supplement(o);return o}}}_isInInitialState(){return e.intialSchema===this.serializeIcons()}newSnippetFromSample(e,t){f.loadSample(e,this.gridBackgroundShown,((e,i)=>this.newSnippet(e,i,t)))}newSnippetFromOwnWorkflow(e,t,i){f.loadOwnWorkflow(e,t,((e,t)=>{if(this.gridBackgroundShown){e.forEach((e=>this.convertNodeCoordinates(e)))}this.newSnippet(e,t,i)}))}newSnippet(t,i,n){var r=this;var o=n?e.NODE_ANIMATION_DROPPED:e.NODE_ANIMATION_AUTO_DROPPED;var s=this.getNodesByTypes([e.NODE_TYPE_START]).length>0;var a=this.getNodesByTypes([e.NODE_TYPE_STOP]).length>0;f.removeStartStop(t,i,s,a);if(n){f.adjustPositions(t,n.x,n.y,true)}else{n=this.getCenterPosition();f.adjustPositions(t,n.x,n.y,false)}this.undoManager.transaction((()=>{r.batch((function(){var e=r.allocateIds(t.length);r.allocateSpaceForSnippet(t);t.forEach((function(t,i){t.setId(e[i]);r.add(t,o);r.updateNodeTitle(t,true)}));i.forEach((function(e){r.connect(e.source,e.target)}))}))}))}allocateId(){return this.allocateIds(1)[0]}allocateIds(e){var t=[];var i={};this.forEachNode((function(e){i[e.getId()]=true}));while(e>0){do{this.lastAllocatedId++}while(i[this.lastAllocatedId]);t.push(this.lastAllocatedId);e--}return t}_findMaxNodeId(){var e=0;this.forEachNode((function(t){if(t.getId()>e){e=t.getId()}}));return e}pickNewNodePosition(){var t=this.canvas.getVisibleArea();var i=Math.ceil(t.minY/e.CANVAS_GRID_SIZE);var n=Math.floor(t.maxY/e.CANVAS_GRID_SIZE)-(e.AUTO_DROP_STEP_Y>>1);var r=[];var o;this.forEachNode((function(t){var i=t.getCoordinates();r.push({minX:i.x-e.AUTO_DROP_STEP_X+1,minY:i.y-e.AUTO_DROP_STEP_Y+1,maxX:i.x+e.AUTO_DROP_STEP_X-1,maxY:i.y+e.AUTO_DROP_STEP_Y-1})}));var s=function(e,t){if(t<i||t>n){return false}var o=!r.some((function(i){return!(e<i.minX||e>i.maxX||t<i.minY||t>i.maxY)}));if(o){return{x:e,y:t}}return false};var a=function(){for(var e=0;e+1<arguments.length;e+=2){var t=s(arguments[e],arguments[e+1]);if(t){return t}}return false};var l=Math.round((t.minX+t.maxX-e.NODE_SIZE)/2/e.CANVAS_GRID_SIZE);var c=Math.round((t.minY+t.maxY-e.NODE_SIZE)/2/e.CANVAS_GRID_SIZE);o=a(l,c);if(o){return o}var d=l;var u=l;var h=c;var p=c;var f=0;while(true){o=a(d-e.AUTO_DROP_STEP_X,c,l,h-e.AUTO_DROP_STEP_Y,l,p+e.AUTO_DROP_STEP_Y,u+e.AUTO_DROP_STEP_X,c);if(o){return o}for(var g=1;g<=f;g++){var m=g*e.AUTO_DROP_STEP_X;var v=g*e.AUTO_DROP_STEP_Y;o=a(d-e.AUTO_DROP_STEP_X,c-v,d-e.AUTO_DROP_STEP_X,c+v,l-m,h-e.AUTO_DROP_STEP_Y,l+m,h-e.AUTO_DROP_STEP_Y,l-m,p+e.AUTO_DROP_STEP_Y,l+m,p+e.AUTO_DROP_STEP_Y,u+e.AUTO_DROP_STEP_X,c-v,u+e.AUTO_DROP_STEP_X,c+v);if(o){return o}}o=a(d-e.AUTO_DROP_STEP_X,h-e.AUTO_DROP_STEP_Y,d-e.AUTO_DROP_STEP_X,p+e.AUTO_DROP_STEP_Y,u+e.AUTO_DROP_STEP_X,h-e.AUTO_DROP_STEP_Y,u+e.AUTO_DROP_STEP_X,p+e.AUTO_DROP_STEP_Y);if(o){return o}d-=e.AUTO_DROP_STEP_X;u+=e.AUTO_DROP_STEP_X;h-=e.AUTO_DROP_STEP_Y;p+=e.AUTO_DROP_STEP_Y;f++}}getCenterPosition(){var t=this.canvas.getVisibleArea();var i=Math.round((t.minX+t.maxX-e.NODE_SIZE)/2/e.CANVAS_GRID_SIZE);var n=Math.round((t.minY+t.maxY-e.NODE_SIZE)/2/e.CANVAS_GRID_SIZE);return{x:i,y:n}}getLinkedFilledStartNodes(t){return _.compact(this.getNodeIncomingChains(t).map((function(t){return _.find(t,(t=>t.getType()===e.NODE_TYPE_START))}))).filter((e=>e.isFilled()))}isAutoOptimizationDecisionAllowed(t){const i=this.getLinkedFilledStartNodes(t);if(i.length===0){return true}return i.every((t=>e.constants.startTypeEvent!==t.data.startType))}isAllLinkedFilledStartsHasDateType(t){const i=this.getLinkedFilledStartNodes(t);return!!i.length&&i.every((function(t){return e.constants.startTypeDate===t.data.startType}))}autofillStopNodesIfPossible(){const t=this;this.getNodesByTypes([e.NODE_TYPE_STOP]).forEach((function(e){t.autofillAutomaticEndIfPossible(e)}))}autofillAutomaticEndIfPossible(t){if(!this.isAllLinkedFilledStartsHasDateType(t)){return}t.data.endType=e.constants.endTypeAutomatic;t.setFilled(true);this.updateNodeTitle(t,true)}_possibleToAutoConvertMailingsTypeToActionBased(t){const i=this.getLinkedFilledStartNodes(t);return!!i.length&&i.every((function(t){return e.constants.startTypeEvent===t.data.startType&&"EVENT_REACTION"===t.data.event}))}_possibleToAutoConvertMailingsTypeToDateBased(t){const i=this.getLinkedFilledStartNodes(t);return!!i.length&&i.every((function(t){return e.constants.startTypeEvent===t.data.startType&&"EVENT_DATE"===t.data.event}))}autoConvertMailingNodesTypeIfPossible(){const t=this;const i=[e.NODE_TYPE_MAILING,e.NODE_TYPE_ACTION_BASED_MAILING,e.NODE_TYPE_DATE_BASED_MAILING];this.getNodesByTypes(i).forEach((function(e){const i=t._getAutoConvertedMailingTypeIfPossible(e);if(e.type===i){return}e.type=i;if(e.isFilled()){e.data.mailingId=0;e.setFilled(false);t.updateNodeTitle(e,true)}v.warn("workflow.mailing.typeChanged")}))}_getAutoConvertedMailingTypeIfPossible(t){if(this.isAllLinkedFilledStartsHasDateType(t)){return e.NODE_TYPE_MAILING}if(this._possibleToAutoConvertMailingsTypeToActionBased(t)){return e.NODE_TYPE_ACTION_BASED_MAILING}if(this._possibleToAutoConvertMailingsTypeToDateBased(t)){return e.NODE_TYPE_DATE_BASED_MAILING}return t.type}allocateSpaceForSnippet(t){const i=this;function n(t,i){const n=t.getCoordinates();const r=i.getCoordinates();return Math.abs(n.x-r.x)<e.AUTO_DROP_STEP_X&&Math.abs(n.y-r.y)<e.AUTO_DROP_STEP_Y}function o(e,t){return e.some((e=>t.some((t=>n(e,t)))))}function s(e){let t=0,i=0,n=0,r=0;e.forEach((e=>{t=Math.min(t,e.getX());i=Math.max(i,e.getX());n=Math.min(n,e.getY());r=Math.max(r,e.getY())}));return{x:(i-t)/2,y:(r-n)/2}}function a(t,i){if(Math.abs(t.x-i.x)>=Math.abs(t.y-i.y)){return t.x<i.x?{x:-e.AUTO_DROP_STEP_X,y:0}:{x:e.AUTO_DROP_STEP_X,y:0}}else{return t.y<i.y?{x:0,y:-e.AUTO_DROP_STEP_Y}:{x:0,y:e.AUTO_DROP_STEP_Y}}}function l(e,t){e.forEach((e=>{const i=e.getCoordinates();e.setCoordinates(i.x+t.x,i.y+t.y)}))}if(t.length){const e=this.getNodes();var c=e.map((e=>({node:e,coordinates:e.getCoordinates(),dragMode:i.getCurrentDragMode()})));const n=s(t);const d=r.detectGroups(this.getVertices()).map((e=>{const t=e.getNodes();return{nodes:t,moveDirection:a(s(t),n)}}));d.forEach((e=>{if(o(e.nodes,t)){const i=e.moveDirection;const n=e.nodes.slice(0);const r=t.slice(0);let s=d.filter((t=>t!==e));do{l(n,i);let e;do{e=false;s=s.filter((t=>{if(o(n,t.nodes)){if(t.moveDirection.x===i.x&&t.moveDirection.y===i.y){l(t.nodes,i);Array.prototype.push.apply(n,t.nodes);e=true}else{Array.prototype.push.apply(r,t.nodes)}return false}else{return true}}))}while(e)}while(o(n,r))}}));c=c.filter((e=>{const t=e.node.getCoordinates();const i=e.coordinates;return t.x!==i.x||t.y!==i.y}));if(c.length){this.undoManager.operation("nodeMoved",c)}}}allocateSpaceForSupplement(t,i,n=this.#Ye()){let r=0;let o=0;switch(i){case e.LEFT:default:r=-1;break;case e.RIGHT:r=+1;break;case e.TOP:o=-1;break;case e.BOTTOM:o=+1;break}let s=t.getX()+e.AUTO_DROP_STEP_X*r;let a=t.getY()+e.AUTO_DROP_STEP_Y*o;while(!this.#qe(s,a,n)){s+=r;a+=o}return{x:s,y:a}}#Ye(t=[]){return this.getNodes().filter((e=>!t.includes(e))).map((t=>{const i=t.getCoordinates();return{minX:i.x-e.AUTO_DROP_STEP_X+1,minY:i.y-e.AUTO_DROP_STEP_Y+1,maxX:i.x+e.AUTO_DROP_STEP_X-1,maxY:i.y+e.AUTO_DROP_STEP_Y-1}}))}#qe(e,t,i){return!i.some((i=>!(e<i.minX||e>i.maxX||t<i.minY||t>i.maxY)))}allocateSpaceForIncomingSupplement(t){const i=this.getAnchorsInUse(t);let n=e.LEFT;if(!i[e.LEFT]&&i[e.TOP]){n=e.TOP}return this.allocateSpaceForSupplement(t,n)}allocateSpaceForOutgoingSupplement(t){const i=this.getAnchorsInUse(t);let n=e.RIGHT;if(!i[e.RIGHT]&&i[e.BOTTOM]){n=e.BOTTOM}return this.allocateSpaceForSupplement(t,n)}add(t,n){var r=this;var o=t.get$();if(!t.getId()){t.setId(this.allocateId())}t.appendTo(this.$container,this.$titlesContainer,n);t.setInteractionEnabled(this.editable);t.updateCommentLabels();this.instance.makeTarget(o,{anchor:t.getAnchors()});this.instance.makeSource(o,{anchor:t.getAnchors(),filter:".node-connect-button svg"});this.initDraggableOptions(o);var s;o.on({mousedown:function(n){if(n.button===e.MOUSE_BUTTON_MIDDLE){if(r.editable){r.undoManager.transaction((()=>r.deleteNode(o)))}}else{t.wasDragging=false;s=i.isSelected(o);if(!s){if(r.isChainMode()){if(!r.isChainSourceSelected()){r.setNodeSelected(o,true);i.setChainSource(o,true)}else{var a=r.getChainSource();_.defer((function(){r.undoManager.transaction((()=>{var e=r.connect(i.get(a),t);if(e){r.deselectAll();r.setNodeSelected(o,true);i.setChainSource(o,true)}else if(e===false){p.connectionNotAllowed()}}))}))}}else if(!n.shiftKey&&!n.ctrlKey){r.deselectAll();r.setNodeSelected(o,true)}else{r.setNodeSelected(o,true)}}}w.blurInputFields()},mouseup:function(e){if(s&&!t.wasDragging){if(r.isChainMode()){r.setNodeSelected(o,false);i.setChainSource(o,false)}else if(e.shiftKey||e.ctrlKey){r.setNodeSelected(o,false)}else{r.deselectAll();r.setNodeSelected(o,true)}}},dblclick:()=>this.editIcon(t),mouseenter:()=>t.setHovered(true),mouseleave:()=>t.setHovered(false)});this.undoManager.operation("nodeAdded",t);this.updateMinimap();this.updateFootnotes();this.updateDraggableButtons()}supplement(t,n,r){var o=this;if(t.isFilled()){if(e.NODE_TYPES_MAILING.includes(t.getType())&&!b.isPausedWorkflow()){const e=this._findFinalParameterNode(t);if(e){this._fillOptimizationFinalMailingIfPossible(e)}n.trySupplementChain(this.getFirstIncomingChain(t),r,(function(e){o.batch((function(){var t=e[0];for(var i=1;i<e.length;i++){var n=e[i];if(n.isAppended()){t=n}else{for(var r=i;r<e.length;r++){var s=e[r];if(s.isAppended()){o.deleteConnectionBetween(s.get$(),t.get$());t=s;i=r;break}}}}for(var i=1;i<e.length;i++){var n=e[i];if(!n.isAppended()){var a=e[i-1];var l=o.allocateSpaceForIncomingSupplement(a);n.setCoordinates(l.x,l.y);o.add(n);o.connect(n,a);if(i+1<e.length&&e[i+1].isAppended()){o.connect(e[i+1],n)}h.resave(n)}}}))}));this.autoConvertMailingNodesTypeIfPossible()}else if(e.NODE_TYPE_RECIPIENT==t.getType()){this.processRecipientsChains()}else if(e.NODE_TYPE_PARAMETER===t.getType()){const e=o._findFinalParameterNode(t);if(e){const i=o._findTestMailingsParamsNodes(e);const n=t.getData().value;o._setParameterNodesValue(i,n);const r=n*i.length;h.modify(e,(function(e){e.setFilled(true);e.setEditable(false);e.getData().value=100-r}))}}else if(e.NODE_TYPE_START==t.getType()){this.autofillStopNodesIfPossible();this.autoConvertMailingNodesTypeIfPossible()}}else{if(e.NODE_TYPE_IMPORT==t.getType()){var s=!this.hasNodeOutgoingConnections(t);if(s){var a=i.create(e.NODE_TYPE_DEADLINE);var l=this.allocateSpaceForOutgoingSupplement(t);a.setCoordinates(l.x,l.y);this.add(a);this.connect(t,a)}}}}isAutoOptimizationWorkflow(t){const i=this._findFinalParameterNode(t);if(!i){return false}const n=this._findOptimizationFinalMailingNode(i);if(!n){return false}const r=this.getFirstIncomingChain(i).find((function(t){return t.getType()===e.NODE_TYPE_DECISION}));return!!r&&r.data.decisionType===e.constants.decisionTypeAutoOptimization}getParametersOptions(t){const i=this._findFinalParameterNode(t);var n=e.SPLIT_DEFAULT_PARAMETERS;if(i){const e=this._findTestMailingsParamsNodes(i);const t=e.length+1;const r=Math.floor(100/t);n=n.filter((function(e){return e<=r}))}return n.map((function(e){return{id:e,text:e}}))}_fillOptimizationFinalMailingIfPossible(e){if(!this._isAllOptimizationTestMailingsFilled(e)){return}const t=this._findOptimizationFinalMailingNode(e);const i=t.title;h.modify(t,(function(e){e.setFilled(true)}));t.setTitle(i)}_findFinalParameterNode(t){const i=this.getNodeOutgoingChains(t);for(var n=0;n<i.length;n++){const t=i[n];const r=t.find((function(t,i){return i>0&&e.NODE_TYPE_PARAMETER===t.getType()}));if(r){return r}}return null}_findTestMailingsParamsNodes(t){const i=[];this.getNodeIncomingChains(t).forEach((function(t){const n=t.find((function(t,i){return i>0&&e.NODE_TYPE_PARAMETER===t.getType()}));if(n){i.push(n)}}));return i}_findOptimizationFinalMailingNode(t){const i=this.getFirstOutgoingChain(t);return i.find((function(t){return t.getType()===e.NODE_TYPE_MAILING&&!t.isEditable()}))}_isAllOptimizationTestMailingsFilled(t){const i=this._findTestMailingsParamsNodes(t);for(var n=0;n<i.length;n++){const t=i[n];const r=this.getFirstOutgoingChain(t);if(r.length<=1){return false}const o=r[1];if(o.getType()!==e.NODE_TYPE_MAILING||!o.isFilled()||!o.isEditable()){return false}}return true}_setParameterNodesValue(e,t){e.forEach((function(e){h.modify(e,(function(e){e.setFilled(true);e.getData().value=t}))}))}processRecipientsChains=_.debounce((()=>{var t=this._findInitialRecipientsNodes();var i=this;t.forEach((function(t){t.setInRecipientsChain(false);i.updateNodeTitle(t);var n=i.getNodeOutgoingChains(t);n.forEach((function(n){var r=1;for(;r<n.length;++r){var o=n[r];if(o.type!=e.NODE_TYPE_RECIPIENT){break}o.data.mailinglistId=t.data.mailinglistId;o.setInRecipientsChain(true);i.updateNodeTitle(o)}}))}))}),150);_findInitialRecipientsNodes(){var t=this.getNodesByTypes([e.NODE_TYPE_RECIPIENT]);var i=this.getConnections();var n=[];i.filter((function(t){return t.target.type==e.NODE_TYPE_RECIPIENT&&t.source.type==e.NODE_TYPE_RECIPIENT})).forEach((function(e){n.push(e.target.id)}));return t.filter((function(e){return!n.includes(e.id)}))}getAnchorsInUse(e){var t=e.get$();return i.getAnchorsInUse(this.instance.getEndpoints(t[0]))}getConnectionDirection(t){const n=i.getAnchorsInUse([t.endpoints[1]]);if(n[e.TOP]){return e.BOTTOM}if(n[e.BOTTOM]){return e.TOP}if(n[e.RIGHT]){return e.LEFT}return e.RIGHT}positionTitle(e){o.positionTitle(e,this.getAnchorsInUse(e))}updateNodeTitle(e,t){var i=this.isNormalWorkflow();o.updateTitle(e,i,t);this.positionTitle(e)}updateNodeTitles=_.throttle((e=>{var t=this;var i=this.isNormalWorkflow();this.forEachNode((function(n){o.updateTitle(n,i,e);t.positionTitle(n)}))}),150);positionTitles=_.throttle((()=>{this.forEachNode((e=>{this.positionTitle(e)}))}),150);setMinimapEnabled(e){this.canvas.setMinimapEnabled(e)}updateMinimap=_.debounce((function(){this.canvas.updateMinimap()}),100);isChainSourceSelected(){return this.$container.find(".node.chain-mode-source").exists()}getChainSource(){return this.$container.find(".node.chain-mode-source")}setNodeSelected(e,t){if(t){this.instance.addToDragSelection(e)}else{this.instance.removeFromDragSelection(e)}i.setSelected(e,!!t);this.onSelectionChanged()}isConnectionPossible(e,t){if(e instanceof i&&t instanceof i){if(e===t){return false}return!this.hasConnection((function(i){return i.source===e&&i.target===t||i.source===t&&i.target===e}))}return false}isConnectionAllowed(t,i,n){var r=new l(e.CONNECTION_CONSTRAINTS);var o=this;var s={node:t,type:t.getType(),connections:{}};var a={node:i,type:i.getType(),connections:{}};Object.defineProperty(s.connections,"incoming",{get:m.caching((e=>o.getNodeIncomingConnections(e).filter((e=>n?.origin!==e.origin))),o,t)});Object.defineProperty(s.connections,"outgoing",{get:m.caching((e=>o.getNodeOutgoingConnections(e).filter((e=>n?.origin!==e.origin))),o,t)});Object.defineProperty(a.connections,"incoming",{get:m.caching((e=>o.getNodeIncomingConnections(e).filter((e=>n?.origin!==e.origin))),o,i)});Object.defineProperty(a.connections,"outgoing",{get:m.caching((e=>o.getNodeOutgoingConnections(e).filter((e=>n?.origin!==e.origin))),o,i)});if(!n){if(s.type===e.NODE_TYPE_STOP&&!this.hasNodeIncomingConnections(t)){s.type=e.NODE_TYPE_START;s.node.setType(e.NODE_TYPE_START);this.updateDraggableButtons()}if(a.type===e.NODE_TYPE_START&&!this.hasNodeOutgoingConnections(i)){a.type=e.NODE_TYPE_STOP;a.node.setType(e.NODE_TYPE_STOP);this.updateDraggableButtons()}}return r.check(s,a)}connect(t,i,n){if(this.isConnectionPossible(t,i)){if(this.#Ke(t,i,n)||!this.isConnectionAllowed(t,i)){return false}if(t.getType()===e.NODE_TYPE_STOP){t.setType(e.NODE_TYPE_START)}if(i.getType()===e.NODE_TYPE_START){i.setType(e.NODE_TYPE_STOP)}if(n!==true){this.instance.connect({source:t.get$(),target:i.get$()})}return true}else{return null}}#Ke(e,t,i){return this.#Xe(e,t,i)||this.#Ze(e,t)}#Ze(e,t){return e.isParameterNode&&this.isSplitParameterNode(t)||t.isParameterNode&&this.isSplitParameterNode(e)}#Xe(e,t,i){return i&&e.isSplitNode&&t.isParameterNode}deselectAll(){this.$container.find(".node.ui-selected").removeClass("ui-selected");this.instance.clearDragSelection();this.clearSelectedSource();this.onSelectionChanged()}clearSelectedSource(){this.$container.find(".node.chain-mode-source").removeClass("chain-mode-source")}alignAll(){this.undoManager.transaction((()=>{if(this.#Qe((()=>d.align(this.getVertices())))){this.positionTitles();this.updateMinimap()}}))}#Qe(e){const t=this.getNodes();const i={};t.forEach((e=>i[e.getId()]=e.getCoordinates()));this.batch((()=>e()));const n=t.filter((e=>{const t=i[e.getId()];return t.x!==e.getX()||t.y!==e.getY()})).map((e=>({node:e,coordinates:i[e.getId()],dragMode:this.getCurrentDragMode()})));if(n.length){this.undoManager.operation("nodeMoved",n);return true}return false}deleteSelected(){this.deleteNodes(this.getSelectedNodes())}deleteNode(t,n){if(!(t instanceof i)){t=i.get(t)}if(t.isAppended()){const i=[t];switch(t.getType()){case e.NODE_TYPE_PARAMETER:if(!n&&this.isSplitParameterNode(t)){v.warn("split.deleteWorkflowParameterIconWarn");return}break;case e.NODE_TYPE_SPLIT:i.push(...this.getSplitParameterNodes(t));break;case e.NODE_TYPE_IMPORT:this.getNodeOutgoingConnections(t).forEach((function(t){if(e.NODE_TYPE_DEADLINE===t.target.getType()){i.push(t.target)}}));break;case e.NODE_TYPE_DEADLINE:this.getNodeIncomingConnections(t).forEach((function(t){if(e.NODE_TYPE_IMPORT===t.source.getType()){i.push(t.source)}}));break}i.forEach((e=>{h.exitNodeEditorIfActive(e);this.undoManager.operation("nodeDeleted",e);this.instance.remove(e.get$());e.remove()}));this.updateDraggableButtons();this.onSelectionChanged();this.positionTitles();this.updateFootnotes();this.updateMinimap()}}getSplitParameterNodes(e){return this.getNodeOutgoingConnections(e).filter((e=>e.target.isParameterNode)).map((e=>e.target))}isSplitParameterNode(e){return this.getNodeIncomingConnections(e).some((e=>e.source.isSplitNode))}deleteAllNodes(){this.deleteNodes(this.getNodes())}deleteNodes(e){this.undoManager.transaction((()=>{this.batch((()=>{e.forEach((e=>this.deleteNode(e)))}))}))}disconnectSelected(){this.disconnectNodes(this.getSelectedNodes())}disconnectNode(e){var t=this;this.getNodeConnections(e).forEach((function(e){t.deleteConnection(e)}))}disconnectNodes(e){var t=this;this.batch((function(){e.forEach((function(e){t.disconnectNode(e)}))}))}canDeleteConnection(e){var t,n;if(e.origin){t=e.source;n=e.target}else{t=i.get(e.source);n=i.get(e.target)}return!this.#Je(t,n)&&!this.#et(t,n)}#et(e,t){return e.isSplitNode&&t.isParameterNode}#Je(t,i){return e.NODE_TYPE_IMPORT===t.getType()&&e.NODE_TYPE_DEADLINE===i.getType()}deleteConnection(e){if(this.canDeleteConnection(e)){if(e.origin){this.instance.deleteConnection(e.origin)}else{this.instance.deleteConnection(e)}return true}return false}deleteConnectionBetween(e,t){const i=this.getConnectionBetween(e,t);if(i){this.deleteConnection(i)}}connectSelected(){return this.connectNodes(this.getSelectedNodes())}connectBetweenSelected(){var e=this.getSelectedNodes$();if(e.length>=2){return this.connectNodes(this.getNodesBetweenSelected(e[0],e[1]))}else{return false}}getNodesBetweenSelected(e,t){var n=i.getBox(e);var r=i.getBox(t);var o={minX:Math.min(n.minX,r.minX),maxX:Math.max(n.maxX,r.maxX),minY:Math.min(n.minY,r.minY),maxY:Math.max(n.maxY,r.maxY)};return this.getNodes().filter((function(e){return i.isInRegion(e.get$(),o)}))}findHoveredConnection(e){return e?.find((e=>e.origin.isHover()))}insertNodeIntoConnection(e,t,i=false){if(!this.canInsertNodeIntoConnection(e,t)){return false}const n=this.getConnectionDirection(t.origin);this.deleteConnection(t);this.connect(t.source,e);this.connect(e,t.target);if(i){this.#Qe((()=>{e.setCoordinates(t.source.getX(),t.source.getY());const i=this.getFirstOutgoingChain(e);let r=t.source;i.forEach((e=>{const t=this.#Ye(i.slice(i.indexOf(e)));if(!this.#qe(e.getX(),e.getY(),t)){const{x:i,y:o}=this.allocateSpaceForSupplement(r,n,t);e.setCoordinates(i,o)}r=e}))}))}return true}canInsertNodeIntoConnection(e,t){const i=this.isConnectionAllowed(t.source,e,t)&&this.isConnectionAllowed(e,t.target,t);if(!i){p.connectionNotAllowed()}return i}connectNodes(e){const t=e.sort(((e,t)=>e.getX()<t.getX()?-1:e.getX()>t.getX()?1:e.getY()<t.getY()?-1:e.getY()>t.getY()?1:0));let i=false;this.undoManager.transaction((()=>{this.batch((()=>{for(let e=0;e<t.length-1;e++){if(this.connect(t[e],t[e+1])){i=true}}}))}));return i}getSelectedNodes$(){var e=[];this.$container.find(".node.ui-selected").each((function(t,i){e.push($(i))}));return e}getSelectedNodes(){return this.getSelectedNodes$().map((function(e){return i.get(e)}))}getSelectionSize(){return this.$container.find(".node.ui-selected").length}updateDraggableButtons(){if(this.getNodesByType(e.NODE_TYPE_START).length){this.draggableButtons.changeType(e.NODE_TYPE_START,e.NODE_TYPE_STOP)}else{this.draggableButtons.changeType(e.NODE_TYPE_STOP,e.NODE_TYPE_START)}}onSelectionChanged(){w.setDeleteButtonEnabled(this.getSelectionSize()>0)}setOnInitialized(e){const t=this;const i=function(){e.apply(this);t.lastAllocatedId=t._findMaxNodeId()};this.instance.ready(i)}setOnZoom(e){this.canvasZoomHandler=e}setEditable(e){e=!!e;if(this.editable!==e){this.editable=e;this.draggableButtons.setEnabled(e);this.$viewport.selectable(e?"enable":"disable");this.forEachNode((function(t){t.setInteractionEnabled(e)}))}}getZoom(){return this.instance.getZoom()}setZoom(e){this.scale=e;this.canvas.setZoom(e);this.instance.setZoom(e);this.gridBackground.setZoom(e)}toggleGrid(){this.gridBackground.toggle();this.dragMode=this.gridBackgroundShown?e.GRID_CELL_DRAG_MODE:e.DEFAULT_DRAG_MODE;this.adaptToNewDragMode()}get gridBackgroundShown(){return this.gridBackground.shown}convertNodeCoordinates(e){const t=e.getCoordinates();this.convertCoordinates(t);e.setCoordinates(t.x,t.y)}convertCoordinates(t){const i=e.NODE_SIZE/e.CANVAS_DEFAULT_GRID_SIZE;if(this.getCurrentDragMode()===e.GRID_CELL_DRAG_MODE){t.x=t.x/i;t.y=t.y/i}else{t.x=t.x*i;t.y=t.y*i}}adaptToNewDragMode(){this.adaptPropertiesToDragMode();const e=this;this.getNodes$().each((function(){e.instance.destroyDraggable(this);e.initDraggableOptions($(this))}));this.forEachNode((function(t){e.convertNodeCoordinates(t)}))}adaptPropertiesToDragMode(){if(this.getCurrentDragMode()===e.GRID_CELL_DRAG_MODE){e.CANVAS_GRID_SIZE=e.NODE_SIZE;e.AUTO_ALIGN_STEP_X=e.GRID_AUTO_ALIGN_STEP_X;e.AUTO_ALIGN_STEP_Y=e.GRID_AUTO_ALIGN_STEP_Y}else{e.CANVAS_GRID_SIZE=e.CANVAS_DEFAULT_GRID_SIZE;e.AUTO_ALIGN_STEP_X=e.DEFAULT_AUTO_ALIGN_STEP_X;e.AUTO_ALIGN_STEP_Y=e.DEFAULT_AUTO_ALIGN_STEP_Y}}initDraggableOptions(t){const n=this;const r=i.get($(t));let o;this.instance.draggable(t,{distance:e.CANVAS_GRID_SIZE/2,grid:[e.CANVAS_GRID_SIZE,e.CANVAS_GRID_SIZE],rightButtonCanDrag:false,canDrag:function(){return n.editable},start:function(){r.wasDragging=true;if(n.drag==null){const e=[];const s=[];r.setPopoverEnabled(false);n.forEachNode$((function(t){if(i.isSelected(t)){e.push(t);i.get(t).setTitleEnabled(false)}else{s.push(i.getCollisionBox(t))}}));o=n.getConnections();n.drag={lead:t,selected:e,unselected:s,connectionsHoverAllowed:e.length===1&&!n.isNodeConnected(r)}}},stop:function(){n.drag.selected.forEach((e=>{i.get(e).setTitleEnabled(true);e.removeClass("js-collision-detected")}));o.forEach((e=>$(e.origin.canvas).removeClass("js-connection-drop-forbidden")));r.setPopoverEnabled(true)},drag:function(){if(n.drag&&t===n.drag.lead){n.drag.selected.forEach((e=>{const t=i.getCollisionBox(e);const r=n.drag.unselected.some((e=>i.detectBoxCollision(e,t)));e.toggleClass("js-collision-detected",r)}));o.forEach((e=>{$(e.origin.canvas).toggleClass("js-connection-drop-forbidden",e.origin.isHover()&&!n.drag.connectionsHoverAllowed)}))}},revert:function(){if(!n.drag){return false}let e=false;n.undoManager.transaction((()=>{const t=n.getZoom();const s=n.drag.selected.some((e=>{const t=i.getCollisionBox(e);return n.drag.unselected.some((e=>i.detectBoxCollision(e,t)))}));const a=n.findHoveredConnection(o);if(!a&&s){e=true}if(a&&!n.drag.connectionsHoverAllowed){e=true}if(!e&&a){e=!n.insertNodeIntoConnection(r,a,s)}if(!e&&!a){n.undoManager.operation("nodeMoved",n.drag.selected.map((e=>{const t=i.get(e);return{node:t,coordinates:t.getCoordinates(),dragMode:n.getCurrentDragMode()}})));n.drag.selected.forEach((e=>{i.get(e).updateCoordinates(t)}))}n.drag=null;n.updateOverlays();n.positionTitles();n.updateMinimap()}));return e}})}getCurrentDragMode(){return this.dragMode}setPanningEnabled(e){this.canvas.setPanningEnabled(e);this.$viewport.toggleClass("js-panning",!!e);if(e){this.$viewport.selectable("disable")}else if(this.editable){this.$viewport.selectable("enable")}}setMouseWheelZoomEnabled(e){this.canvas.setMouseWheelZoomEnabled(e)}setMultiConnectionEnabled(e){this.multiConnectionEnabled=e}setChainModeEnabled(e){this.chainModeEnabled=e;this.clearSelectedSource();if(e){var t=this.getSelectedNodes$().shift();if(t){this.deselectAll();this.setNodeSelected(t,true);i.setChainSource(t,true)}}}isChainMode(){return this.chainModeEnabled===true}updateOverlays=_.debounce((()=>{this.forEachNode((function(e){if(i.isDecisionNode(e)){this.updateDecisionBranchesOverlays(e)}}))}),100);updateDecisionBranchesOverlays(e){var t=this.getNodeOutgoingConnections(e);if(i.isBranchingDecisionNode(e)){var n=i.getDecisionBranches(t);if(n){var r=o.getDecisionBranchesLabels();w.setConnectionLabel(n.positive,r.positive);w.setConnectionLabel(n.negative,r.negative)}else{t.forEach((function(e){w.setConnectionLabel(e,"?")}))}}else{t.forEach((function(e){w.setConnectionLabel(e,false)}))}}editIcon(e){if(this.drag==null){if(e){if(e.editable){this.deselectAll();h.showEditDialog(e)}}else{var t=this.getSelectedNodes$();if(t.length==1){this.deselectAll();const e=i.get(t[0]);h.showEditDialog(e)}}}}editIconComment(e){h.showIconCommentDialog(e)}serializeIcons(){var e=this.getNodes().map((function(e){return e.serialize()}));var t={};this.getConnections().forEach((function(e){var i=t[e.source.id];if(!i){i=[]}i.push(e);t[e.source.id]=i}));e.forEach((function(e){var i=t[e.id];if(i){e.connections=i.map((function(e){return{targetIconId:e.target.id}}))}else{e.connections=[]}}));return JSON.stringify(e)}undo(){this.undoManager.undo()}getUndoManager(){return this.undoManager}hasUnsavedChanges(){return this.getUndoManager().canUndo()}fitPdfPage(){this.canvas.fitPdfPage(e.PDF_SIZE,e.PDF_ORIENTATION)}}AGN.Lib.WM.Editor=C})();(()=>{function e(e,t){if(typeof e==="string"&&typeof t==="string"){return e.toLowerCase().localeCompare(t.toLowerCase())}if(e===null||e===undefined){return 1}return e.localeCompare(t)}AGN.Lib.TableCaseInsensitiveComparator=e})();class SwitchFilter{init(e){this.column=e.column.colId;this.$el=$(`#${this.column}-filter`);this.checked=this.$el.prop("checked")}getGui(){return document.createElement("div")}doesFilterPass(e){return this.checked===e.data[this.column]}isFilterActive(){return true}getModel(){return this.checked}setModel(e){this.checked=this.$el.prop("checked")}}class DateRangeFilter{init(e){this.params=e;this.column=e.column.colId;this.$fromDate=this.#tt(e,"from");this.$toDate=this.#tt(e,"to")}#tt(e,t){let i=$(`${e.colDef[`filter${_.capitalize(t)}Input`]}`);if(!i.length){i=$(`#${e.column.colId}-${t}-filter`)}return i}#it(e){return e.datepicker("getDate")?.toISOString()}isFilterActive(){return this.fromDate||this.toDate}doesFilterPass(e){if(!this.fromDate&&!this.toDate){return true}const t=this.#nt(e);if(!t){return false}if(this.fromDate&&this.toDate){return t>=this.fromDate&&t<=this.toDate}if(this.fromDate){return t>=this.fromDate}if(this.toDate){return t<=this.toDate}}#nt(e){const t=e.data[this.column];if(typeof t==="number"&&t>0){return new Date(t)}return t?.date}getModel(){return{fromDate:this.fromDate,toDate:this.toDate}}setModel(e){if(this.$fromDate?.length){const e=this.#it(this.$fromDate);this.fromDate=e?new Date(e):null}if(this.$toDate?.length){const e=this.#it(this.$toDate);this.toDate=e?new Date(e):null;this.toDate?.setDate(this.toDate?.getDate()+1)}}getGui(){return document.createElement("div")}}class DeliveryDateFilter extends DateRangeFilter{init(e){super.init(e);this.$filterType=$(`#${this.column}-filter`)}doesFilterPass(e){const t=e.data[this.column];return this.doesDateFilterPass(t)&&super.doesFilterPass(e)||this.doesSoftBounceFilterPass(t)||this.doesHardBounceFilterPass(t)||this.doesNoFeedbackFilterPass(t)}doesDateFilterPass(e){return e&&this.types.includes("date")&&!["soft-bounce","hard-bounce"].includes(e)}doesSoftBounceFilterPass(e){return this.types.includes("soft-bounce")&&e==="soft-bounce"}doesHardBounceFilterPass(e){return this.types.includes("hard-bounce")&&e==="hard-bounce"}doesNoFeedbackFilterPass(e){return this.types.includes("no-feedback")&&!e}isFilterActive(){return this.types.length>0}getModel(){return{...super.getModel(),types:this.types}}setModel(e){super.setModel(e);this.types=[...this.$filterType.val()]}}AGN.Opt.Table["filters"]["DeliveryDateFilter"]=DeliveryDateFilter;(()=>{class e{init(e){const t=e.api;this.eGui=AGN.Lib.TableCellWrapper(t.getGridOption("viewLinkTemplate"),t.getGridOption("viewInModal"),t.getGridOption("isRestoreMode")(),e.data);this.eGui.innerHTML=AGN.Lib.Template.text(e.templateName,{value:e.value,entry:e.data});AGN.Lib.CoreInitializer.run("tooltip",$(this.eGui))}getGui(){return this.eGui}refresh(){return false}destroy(){}}AGN.Opt.TableCellRenderers["MustacheTemplateCellRender"]=e})();(()=>{class e{init(e){const t=e.api;this.gui=AGN.Lib.TableCellWrapper(t.getGridOption("viewLinkTemplate"),t.getGridOption("viewInModal"),t.getGridOption("isRestoreMode")(),e.data);const i=document.createElement("div");if(e.value){i.innerHTML=e.value}i.classList.add("text-truncate-table");this.gui.appendChild(i)}getGui(){return this.gui}refresh(){return false}destroy(){}}AGN.Opt.TableCellRenderers["NotEscapedStringCellRenderer"]=e})();(function(){function e(e,t,i,n,r){e=parseFloat(e);t=parseFloat(t);if(isNaN(e)||isNaN(t)){if(!isNaN(e)){return r?+1:-1}if(!isNaN(t)){return r?-1:+1}return 0}return e-t}AGN.Lib.TableNumberComparator=e})();(()=>{var e=AGN.Lib.Confirm,t=AGN.Lib.Page,i=function(){};function n(e){if(e.deliveryHistoryEnabled){return AGN.url("/recipient/"+e.recipientId+"/mailing/"+e.data.mailingId+"/deliveryHistory.action")}else{return""}}i.prototype.init=function(i){this.eGui=document.createElement("div");var r=n(i);if(!r){this.eGui.innerHTML=i.value}else{this.eGui.innerHTML='<button type="button" class="table__btn btn btn-secondary"><i class="icon icon-external-link-alt"></i><span>'+i.value+"</span></button>";this.eButton=this.eGui.querySelector(".btn");this.eButton.setAttribute("href",r);this.eventListener=function(r){var o=n(i);if(o){$.get(o).done((function(i){var n=$(i),r;r=n.all(".modal");if(r.length==1){e.create(i)}else{t.render(i)}}));r.preventDefault();return false}};this.eButton.addEventListener("click",this.eventListener)}};i.prototype.getGui=function(){return this.eGui};i.prototype.refresh=function(e){if(this.eButton){this.eButton.dataset.url=n(e)}return true};i.prototype.destroy=function(){if(this.eButton){this.eButton.removeEventListener("click",this.eventListener)}};AGN.Opt.TableCellRenderers["RecipientDeliveryInfoRenderer"]=i})();(function(){var e=AGN.Lib.Confirm,t=AGN.Lib.Page,i=function(){};function n(e){if(e.deliveryHistoryEnabled){return AGN.url("/recipient/"+e.recipientId+"/mailing/"+e.data.mailingId+"/successfulDeliveryHistory.action")}else{return""}}i.prototype.init=function(i){this.eGui=document.createElement("div");var r=n(i);if(!r){this.eGui.innerHTML=i.value}else{this.eGui.innerHTML='<button type="button" class="table__btn btn btn-secondary"><i class="icon icon-external-link-alt"></i><span>'+i.value+"</span></button>";this.eButton=this.eGui.querySelector(".btn");this.eButton.setAttribute("href",r);this.eventListener=function(r){var o=n(i);if(o){$.get(o).done((function(i){var n=$(i),r;r=n.all(".modal");if(r.length==1){e.create(i)}else{t.render(i)}}));r.preventDefault();return false}};this.eButton.addEventListener("click",this.eventListener)}};i.prototype.getGui=function(){return this.eGui};i.prototype.refresh=function(e){if(this.eButton){this.eButton.dataset.url=n(e)}return true};i.prototype.destroy=function(){if(this.eButton){this.eButton.removeEventListener("click",this.eventListener)}};AGN.Opt.TableCellRenderers["RecipientSuccessDeliveryInfoRenderer"]=i})();class SetFilter{init(e){this.params=e;this.column=e.column.colId;this.$el=$(`#${this.column}-filter`);this.filterValues=this.$el.val()}getGui(){return document.createElement("div")}doesFilterPass(e){if(!this.filterValues.length){return true}let t=e.data[this.column];t=t?.name||t;if(t instanceof Array){return this.filterValues.every((e=>t.includes(e)))}return this.filterValues.includes(t)}isFilterActive(){return this.filterValues.length>0}getModel(){return{values:this.filterValues}}setModel(e){this.filterValues=this.$el.val()}}(()=>{class e{init(e){const t=e.api;this.gui=AGN.Lib.TableCellWrapper(t.getGridOption("viewLinkTemplate"),t.getGridOption("viewInModal"),t.getGridOption("isRestoreMode")(),e.data);const i=document.createElement("div");if(e.value){i.appendChild(document.createTextNode(e.value))}i.classList.add("text-truncate-table");this.gui.appendChild(i)}getGui(){return this.gui}refresh(){return false}destroy(){}}AGN.Opt.TableCellRenderers["StringCellRenderer"]=e})();(()=>{class e{init(e){this.$eGui=$('<div class="d-flex gap-2 justify-content-end"></div>');const t=e.colDef["buttons"];if(!t){return}e.data.rowActions.forEach((i=>{const n=t.find((e=>e.name===i));if(n){this.$eGui.append(AGN.Lib.Template.text(n.template,e.data))}}));AGN.Lib.CoreInitializer.run("tooltip",this.$eGui)}getGui(){return this.$eGui.get(0)}refresh(){return true}}AGN.Opt.TableCellRenderers["TableActionsCellRenderer"]=e})();(()=>{const e=AGN.Lib.Template;AGN.Lib.TableCellWrapper=function(t,i,n,r){if(t&&!n){const n=document.createElement("a");if(!e.exists(t)){e.register(t,t)}n.href=AGN.url(e.text(t,r).trim());n.classList.add("ag-grid-cell-link");if(i){n.setAttribute("data-confirm","")}return n}return document.createElement("div")}})();class WildcardFilter{init(e){this.params=e;this.column=e.column.colId;this.$el=$(`#${this.column}-filter`);this.searchText=this.$el.val()}getGui(){return document.createElement("div")}doesFilterPass(e){if(!this.isFilterActive()){return true}const t=e.data[this.column]||"";const i=this.searchText.replace(/[%*]/g,".*").replace(/[_?]/g,".");const n=new RegExp(`${i}`,"i");return n.test(t)}isFilterActive(){return this.searchText?.trim().length>0}getModel(){return{values:this.searchText}}setModel(e){this.searchText=this.$el.val()}}class WorkflowStartFilter extends DateRangeFilter{init(e){super.init(e);this.$filterType=$(`#${this.column}-filter`)}doesFilterPass(e){const t=e.data[this.column]?.type;return this.doesByDateFilterPass(t)&&super.doesFilterPass(e)||this.doesActionBasedFilterPass(t)||this.doesDateBasedFilterPass(t)}doesByDateFilterPass(e){return this.types.includes("startDate")&&e!=="EVENT_REACTION"&&e!=="EVENT_DATE"}doesActionBasedFilterPass(e){return this.types.includes("actionBased")&&e==="EVENT_REACTION"}doesDateBasedFilterPass(e){return this.types.includes("dateBased")&&e==="EVENT_DATE"}isFilterActive(){return this.types.length>0}getModel(){return{...super.getModel(),types:this.types}}setModel(e){super.setModel(e);this.types=[...this.$filterType.val()]}}AGN.Opt.Table["filters"]["WorkflowStartFilter"]=WorkflowStartFilter;class WorkflowStopFilter extends DateRangeFilter{init(e){super.init(e);this.$filterType=$(`#${this.column}-filter`)}doesFilterPass(e){const t=e.data[this.column]?.type;return this.doesByDateFilterPass(t)&&super.doesFilterPass(e)||this.doesAutomaticEndFilterPass(t)}doesByDateFilterPass(e){return this.types.includes("stopDate")&&e!=="AUTOMATIC"}doesAutomaticEndFilterPass(e){return this.types.includes("automaticEnd")&&e==="AUTOMATIC"}isFilterActive(){return this.types.length>0}getModel(){return{...super.getModel(),types:this.types}}setModel(e){super.setModel(e);this.types=[...this.$filterType.val()]}}AGN.Opt.Table["filters"]["WorkflowStopFilter"]=WorkflowStopFilter;(function(){AGN.Lib.FormBuilder=AGN.Lib.FormBuilder||{};AGN.Lib.FormBuilder.Utils={pushControl:function(e,t){if(!Array.isArray(e)){return}e.push((function(e){var i=function(e){var i=e.prototype.constructor;function n(){return i.apply(this,arguments)}n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:true,configurable:true}});n.__proto__=e;if(t.build){n.prototype.build=t.build}if(t.onRender){n.prototype.onRender=t.onRender}Object.defineProperty(n,"definition",{get:t.definition});return n}(e);e.register(t.newControlName,i);return i}))}}})();(function(){AGN.Lib.FormBuilder=AGN.Lib.FormBuilder||{};AGN.Lib.FormBuilder.EmmControls={mediapool:function(e){return{newControlName:"mediapool",build:function(){return{field:this.markup("img",null,{}),layout:"agnMediapool"}},onRender:function(i){if(this.preview){var n=$(i.target).parents(".form-field").find(".field-label");n.html(t("userform.formBuilder.mediapoolImage")+": "+e.options.mediapoolImages[this.config.image])}var r=$(this.element);r.attr("src",this.config.image).attr("alt",this.config.alt);if(this.config.width){r.attr("width",this.config.width)}if(this.config.height){r.attr("height",this.config.height)}},definition:function(){return{i18n:{default:t("userform.formBuilder.mediapoolImage")}}}}},nextform:function(){return{newControlName:"formName",build:function(){return{field:this.markup("input",null,{name:"agnFN",type:"hidden"}),layout:"hidden"}},onRender:function(e){if(this.preview){var i=$(e.target).parents(".form-field").find(".field-label");i.html(t("userform.formBuilder.nextForm")+": "+this.config.formName)}$(this.element).attr("value",this.config.formName)},definition:function(){return{i18n:{default:t("userform.formBuilder.nextForm")}}}}}}})();(function(){AGN.Lib.FormBuilder=AGN.Lib.FormBuilder||{};var e={agnCTOKEN:t("userform.formBuilder.tooltips.agnCTOKEN"),agnUID:t("userform.formBuilder.tooltips.agnUID")};const i=2;const n={gender:[{selected:true,label:"Gender Male",value:0},{selected:false,label:"Gender Female",value:1}]};var r=["agnCTOKEN","agnUID","agnMAILINGLIST","agnSUBSCRIBE"];AGN.Lib.FormBuilder.Templates={default:function(){return{onRender:o}},hidden:function(){return{onRender:s}},dateForRender:function(e){var t=this;var i=(this.config.className||"")+" js-datepicker";var n=$.extend({},this.config,{"data-datepicker-options":"format: 'yyyy/mm/dd', formatSubmit: 'yyyy/mm/dd'",className:i});return{field:t.markup("input",null,n),onRender:function(t){var i=$(t.target);i.append('<input type="hidden" name="'+e.name+'_format" value="'+"yyyy/MM/dd"+'">')}}}};function o(e){var t=$(e.target).parents(".form-field"),i=this.config.emmField,n=t.data("currentEmmField"),r=!n,o=i!==n;if(r){t.data("currentEmmField",i)}else if(o){t.data("currentEmmField",i);l(t,this.config,i,n)}}function s(e){var t=this.config.id.replace("-preview","");var i=$(e.target);var n=i.parents(".form-field").find(".form-elements");var s=n.find(".emmField-wrap");if(r.includes(t)){s.hide()}else{s.show()}if(!r.includes(t)){o.apply(this,arguments)}var l=i.parents(".form-field").find(".tooltip-element");a(l,t)}function a(t,i){const n=e[i];if(!n){t.hide();return}t.removeAttr("tooltip").show();AGN.Lib.Tooltip.createTip(t,n)}function l(e,t,i,n){const r=e.find(".form-elements"),o=r.find('input[name="value"]'),s=r.find('input[name="name"]'),a=i!=="none";var l=a?"$!customerData."+i:"",d=a?i:"";o.val(l);s.val(d);if(a){s.prop("disabled",true)}else{s.prop("disabled",false)}if(t.type==="select"){c(i,n,e,t)}}function c(e,t,n,r){const o=p(e);if(o.length>=i){const t={values:o,name:e};d(n,r,t)}else if(p(t).length>0){const t={values:[],name:e};d(n,r,t)}}function d(e,t,i){const n=e.parents(".js-form-builder");const r=n.data("formBuilder");r.actions.removeField(e.prop("id"));h((function(){const o=_.mergeWith(t,i,(function(e,t){return _.isArray(t)?t:undefined}));r.actions.addField(o,u(e,n))}));h((function(){r.actions.toggleFieldEdit(r.actions.getCurrentFieldId())}))}function u(e,t){var i=0;_.each(t.find(".form-field"),(function(t,n){if($(t).prop("id")===e.prop("id")){i=n}}));return i}function h(e){window.setTimeout((function(){e()}),0)}function p(e){const t=n[e];return t?t:[]}})();(function(){var e=AGN.Lib.FormBuilder.Utils;var i=AGN.Lib.FormBuilder.EmmControls;var n=AGN.Lib.FormBuilder.Templates;var r="<html>\n"+"    <head>\n"+'        <script type="text/javascript" src="'+AGN.url("/js/lib/jquery/jquery-3.5.1.js",true)+'"><\/script>\n'+'        <script type="text/javascript" src="'+AGN.url("/assets/js/vendor/pickadate-3.5.6.js",true)+'"><\/script>\n'+'        <script type="text/javascript" src="'+AGN.url("/assets/js/vendor/pickadate-3.5.6.date.js",true)+'"><\/script>\n'+'        <script type="text/javascript" src="'+AGN.url("/js/lib/formbuilder/generated-form.js",true)+'"><\/script>\n'+'        <link rel="stylesheet" href="'+AGN.url("/assets/form.css",true)+'">'+"        {{ if (cssUrl) { }}\n"+'        <link rel="stylesheet" href="{{- cssUrl }}">\n'+"        {{ } }}\n"+"    </head>\n"+"    <body>\n"+'        <div class="container" style="margin-top: 50px;">\n'+'            <form action="form.action">\n'+"                {{= generatedHTML}}\n"+"            </form>\n"+"        </div>\n"+"    </body>\n"+"</html>";var o=AGN.Lib.Confirm;var s;var a=["required","label","description","name","className","placeholder","value"];s=function(e,t){this.options=$.extend({},t);var i=this;i.$el=$(e);i.$target=$(this.$el.data("target"));i.initCustomControls();i.builder=i.$el.formBuilder(s.getBuilderDefaultOptions(i));i.defered=$.Deferred();if(i.options.data){i.setJson(i.options.data)}i.builder.promise.then((function(){i.builder=i.$el.data("formBuilder");i.defered.resolve()}))};s.getBuilderDefaultOptions=function(e){return{roles:{},disabledAttrs:["access","description"],disableFields:["file","autocomplete"],defaultFields:s.defaultFields(e),disabledActionButtons:["data","save"],actionButtons:[{id:"downloadHtml",className:"btn btn-info",label:t("workflow.reaction.download"),type:"button",events:{click:function(){e.downloadHtml.bind(e)()}}},{id:"generateHtml",className:"btn btn-success",label:t("userform.formBuilder.generateHtml"),type:"button",events:{click:function(){e.generateHtmlToTarget.bind(e)()}}}],editOnAdd:true,typeUserDisabledAttrs:{formName:a,mediapool:a,text:["subtype"],textarea:["subtype"]},typeUserAttrs:c(e),layoutTemplates:{agnMediapool:function(){return document.createElement("span")}},fields:[{type:"text"},{type:"hidden"},{type:"select"},{type:"radio-group"},{type:"checkbox-group"},{type:"number"},{type:"textarea"},{type:"date"}],templates:{text:n.default,hidden:n.hidden,textarea:n.default,date:n.default,select:n.default,"radio-group":n.default,"checkbox-group":n.default,number:n.default},controls:e.controls,i18n:{locale:window.adminLocale,location:AGN.url("/js/lib/formbuilder/translation/")},controlOrder:["header","paragraph","mediapool","","text","date","textarea","number","","select","radio-group","checkbox-group","","hidden","formName","button"],inputSets:s.getDefaultPresetsConfig(e)}};s.defaultFields=function(e){return[{type:"hidden",name:"agnCTOKEN",value:e.options.companyToken},{type:"hidden",name:"agnUID",value:"$!agnUID"}]};s.getDefaultPresetsConfig=function(e){return[{label:d(t("userform.formBuilder.template.subscribe")),name:"subscribe",fields:[{type:"hidden",name:"agnCTOKEN",value:e.options.companyToken,label:" "},{type:"hidden",name:"agnMAILINGLIST",value:"",label:" "},{type:"hidden",name:"agnSUBSCRIBE",value:"1",label:" "},{type:"hidden",name:"agnUID",value:"$!agnUID",label:" "},{type:"text",name:"firstname",value:"$!customerData.firstname",emmField:"firstname",label:"Firstname:"},{type:"text",name:"lastname",value:"$!customerData.lastname",emmField:"lastname",label:"Lastname:"},{type:"text",name:"email",value:"$!customerData.email",emmField:"email",label:"Email:"},{type:"button",subtype:"submit",style:"primary",label:"Subscribe"},{type:"formName",label:" "}]},{label:d(t("userform.formBuilder.template.unsubscribe")),name:"unsubscribe",fields:[{type:"hidden",name:"agnCTOKEN",value:e.options.companyToken,label:" "},{type:"formName",label:" "},{type:"hidden",name:"agnUID",value:"$!agnUID",label:" "},{type:"button",subtype:"submit",style:"primary",label:"Unsubscribe"}]},{label:d(t("userform.formBuilder.template.profile_change")),name:"profile_change",fields:[{type:"hidden",name:"agnCTOKEN",value:e.options.companyToken,label:" "},{type:"hidden",name:"agnUID",value:"$!agnUID",label:" "},{type:"formName",label:" "},{type:"text",name:"firstname",value:"$!customerData.firstname",emmField:"firstname",label:"Firstname:"},{type:"text",name:"lastname",value:"$!customerData.lastname",emmField:"lastname",label:"Lastname:"},{type:"text",name:"email",value:"$!customerData.email",emmField:"email",label:"Email:"},{type:"button",subtype:"submit",style:"primary",label:"Subscribe"}]},{label:d(t("userform.formBuilder.template.other")),name:"other",fields:[{type:"hidden",name:"agnCTOKEN",value:e.options.companyToken,label:" "},{type:"hidden",name:"agnUID",value:"$!agnUID",label:" "}]}]};s.get=function(e,t){var i=$(e);var n=i.data("_form-builder");if(n){return n}n=new s(e,t);i.data("_form-builder",n);return n};s.isCreated=function(e){return!!$(e).data("_form-builder")};s.prototype.initCustomControls=function(){this.controls=[];e.pushControl(this.controls,i.mediapool(this));e.pushControl(this.controls,i.nextform(this))};s.prototype.generateHtml=function(){var e=this.builder.actions.getData();var t=this.options.cssUrl;var i=$("<form/>");i.formRender({formData:e,controls:this.controls,templates:{date:n.dateForRender}});var o;if(r){o=_.template(r)({generatedHTML:i.html(),cssUrl:t})}else{o=i.html()}i.remove();o=u(o);return o};s.prototype.generateHtmlToTarget=function(){var e=this;var t=this.$target;if(!t){return}var i=AGN.Lib.Editor.get(t);if(!i){return}var n=this.options.confirmationModal;if(!n||!i.val()){l(e,i);return}o.from("warning-html-generation-modal").done((function(){l(e,i)}))};s.prototype.downloadHtml=function(){var e=this.generateHtml();var t=window.btoa(e);var i="Generated form.txt";if(this.options.formName){i=this.options.formName+".txt"}var n=document.createElement("a");n.setAttribute("href","data:application/octet-stream;charset=utf-8;base64,"+t);n.setAttribute("download",i);n.style.display="none";document.body.appendChild(n);n.click();document.body.removeChild(n)};s.prototype.getJson=function(){return this.builder.actions.getData("json",false)};s.prototype.getData=function(){return this.builder.actions.getData()};s.prototype.setJson=function(e){var t=this;t.defered.done((function(){return t.builder.actions.setData(e)}))};s.prototype.promise=function(){return this.defered.promise()};s.prototype.getInitJson=function(){return JSON.stringify(this.options.data)};s.prototype.isChanged=function(){var e=this;if(e.options.data){return e.getInitJson()!==e.getJson()}else{return _.isEqual(e.getData(),s.defaultFields(e))}};function l(e,i){i.val(e.generateHtml());AGN.Lib.Messages(t("defaults.success"),t("userform.formBuilder.success.htmlGenerated"),"success")}function c(e){var i={formName:{formName:{label:t("userform.formBuilder.formName"),options:e.options.namesJson.reduce((function(e,t){e[t]=t;return e}),{})}},mediapool:{image:{label:t("userform.formBuilder.mediapoolImage"),options:e.options.mediapoolImages},alt:{label:t("userform.formBuilder.imageAlt"),value:""},width:{label:t("userform.formBuilder.imageWidth"),value:0},height:{label:t("userform.formBuilder.imageHeight"),value:0}},date:{emmField:{label:t("userform.formBuilder.emmField"),options:e.options.dateProfileFields}},number:{emmField:{label:t("userform.formBuilder.emmField"),options:e.options.numberProfileFields}},select:{emmField:{label:t("userform.formBuilder.emmField"),options:e.options.profileFieldsForSelect}}};var n=["text","hidden","textarea","radio-group","checkbox-group"];n.forEach((function(n){i[n]={emmField:{label:t("userform.formBuilder.emmField"),options:e.options.textProfileFields}}}));return i}function d(e){return t("userform.formBuilder.template.template")+": "+e}function u(e){if(!e||e.length<=0){return e}return e.replace(/<\/.*?>/g,"$&\n")}AGN.Lib.FormBuilder.FormBuilder=s})();AGN.Lib.CoreInitializer.new("ace",["form"],((e=$(document))=>{_.each(e.find(".js-editor, .js-editor-text, .js-editor-eql, .js-editor-css"),(function(e){AGN.Lib.Editor.get($(e))}))}));(()=>{AGN.Lib.CoreInitializer.new("checkbox-hider",(function(r=$(document)){const o=AGN.Lib.Storage;_.each(r.find("[data-show-by-checkbox]"),(i=>{const n=$(i);const r=$(n.data("show-by-checkbox"));if(r.is("[data-stored-field]")){o.restoreChosenFields(r)}t(n,r,true);e(n,r,true)}));_.each(r.find("[data-hide-by-checkbox]"),(i=>{const n=$(i);const r=$(n.data("hide-by-checkbox"));t(n,r,false);e(n,r,false)}));_.each(r.find("[data-show-by-select]"),(e=>{const t=$(e);const r=$(t.data("show-by-select"));const{showBySelectValues:o=""}=t.data();if(r.exists()&&(o!==""||t.is("[data-show-if-no-selection]"))){const e=o.toString().split(",").map((e=>e.trim()));n(t,r,e,true);i(t,r,e,true)}}));_.each(r.find("[data-hide-by-select]"),(e=>{const t=$(e);const r=$(t.data("hide-by-select"));const{hideBySelectValues:o=""}=t.data();if(r.exists()&&o!==""){const e=o.toString().split(",").map((e=>e.trim()));n(t,r,e,false);i(t,r,e,false)}}))}));function e(e,i,n){i.change((()=>{t(e,i,n);if(i.is("[data-stored-field]")){AGN.Lib.Storage.saveChosenFields(i)}}))}function t(e,t,i){const n=i?!t.is(":checked"):t.is(":checked");e.toggleClass("hidden",n);AGN.Lib.CoreInitializer.run("truncated-text-popover",e)}function i(e,t,i,r){t.change((function(){n(e,t,i,r)}))}function n(e,t,i,n){const r=t.val();const o=Array.isArray(r)?r:[r];const s=o.some((e=>i.includes(e)));if(n){e.toggleClass("hidden",!(s||e.is("[data-show-if-no-selection]")&&o.length===0))}else{e.toggleClass("hidden",s)}e.closest("select").trigger("change.select2");AGN.Lib.CoreInitializer.run("truncated-text-popover",e)}})();(()=>{const e=AGN.Lib.AutoSave;function t(e,t){const i=e.attr("id");if(window.Jodit?.instances[i]){Jodit.instances[i].value=t}else if(window.CKEDITOR&&CKEDITOR.instances[i]){CKEDITOR.instances[i].setData(t)}else if(AGN.Lib.Editor.exists(e)){AGN.Lib.Editor.get(e).val(t)}else{e.val(t)}}AGN.Lib.CoreInitializer.new("auto-save",["ace"],(function(i=$(document)){_.each(i.find("[data-autosave-scope]"),(i=>{const n=$(i);const r=n.data("autosave-scope");const o=n.data("autosave-period");let s=n.all("[data-autosave]");if(s.exists()){function a(){s=s.filter((function(e,t){return document.body.contains(t)}));if(s.length>0){const e={};_.each(s,(t=>{const i=$(t);e[`value#${i.data("autosave")}`]=i.val()}));return e}return false}function l(e){const i=$.map(s,(function(i){const n=$(i);const r=`value#${n.data("autosave")}`;if(r in e){const i=n.val();const o=e[r];if(i!=o){if(n.is("[data-autorestore]")){t(n,o)}else{return{target:n,value:o}}}return null}}));if(i.length>0){return i}return false}function c(e){_.each(e,(e=>t(e.target,e.value)))}e.initialize(r,a,l,c,o)}}))}))})();(function(){var e;e=function(){var e=0;var i;var n;var r;var o;var s;var a;var l;var c;var d;var u;var h;var p;var f;var g;var m;var v;var b;var y;var w;var C;var S;var A=-1;var x=t("date.monthsFull");var E=new Date;E.setHours(0,0,0,0);var T=E.getMonth();var D=E.getFullYear();var M=E.getDate();var k=true;var P=false;var R={};var I="MONTH";var O=[];var N=0;var L=false;var F=0;function G(){return k}this.getMonthMode=G;function B(){return e}this.getDayWidth=B;function H(){return T}this.getCurMonth=H;function z(){return D}this.getCurYear=z;function W(){return M}this.getCurDay=W;function V(t){e=t}this.setDayWidth=V;function j(e){i=e.localeDatePattern;n=new Date(e.currentServerTime);r=e.firstDayOfWeek;o=E.getWeek(r);s=e.pushStatusSent;a=e.pushStatusScheduled;c=e.adminName;l=e.secondsBeforeWaitMessage;d=e.urls.CALENDAR_UNSENT_MAILINGS;u=e.urls.CALENDAR_PLANNED_MAILINGS;h=e.urls.CALENDAR_MAILINGS_LIST;p=e.urls.CALENDAR_MAILINGS_MOVE;f=e.urls.CALENDAR_PUSHES_LIST;g=e.urls.CALENDAR_PUSHES_MOVE;m=e.urls.CALENDAR_AUTO_OPTIMIZATION;v=e.urls.CALENDAR_COMMENT_LIST;b=e.urls.CALENDAR_COMMENT_SAVE;y=e.urls.CALENDAR_COMMENT_REMOVE;w=e.urls.MAILING_VIEW;C=e.urls.MAILING_STATISTICS_VIEW;S=e.isStatisticsViewPermitted;A=e.showALlMailingsPerDay?-1:5}this.setUp=j;function U(e){if(e=="SELECT_MONTH"){$("#linkSelectByMonth").toggleClass("active");$("#linkSelectByWeek").toggleClass("active");$("#dateSelectByMonth").css("display","inline");$("#dateSelectByWeek").css("display","none");se(e);I="MONTH"}if(e=="SELECT_WEEK"){$("#linkSelectByMonth").toggleClass("active");$("#linkSelectByWeek").toggleClass("active");$("#dateSelectByMonth").css("display","none");$("#dateSelectByWeek").css("display","inline");Je($("#weeks_list_year")[0]);se(e);I="WEEK"}}this.toggleDateSelectionMode=U;function Y(){if(L){N+=.5;if(N>=l){$("#calendar-wait-notification").show()}}else{N=0}}this.checkProgress=Y;function q(){L=true;F++}this.startProgress=q;function K(){F--;if(F<=0){F=0;L=false;$("#calendar-wait-notification").hide()}}this.stopProgress=K;function X(e,t){R={};var i=new Date(t,e,1);var n=oe(e+1,t);var o=i.getDay()-r;if(o<0){o=7+o}var s=Math.ceil((n+o)/7);var a=new Date(t,e,1-o);var l=new Date(t,e,1+s*7);i=new Date(a);for(var c=0;c<s;c++){var d="row-"+(c+1);$("#calendar-container").append('<tr id="'+d+'">'+'<td class="calendar-week-number-cell">'+i.getWeek(r)+"</td>"+"</tr>");for(var u=0;u<7;u++){var h=i.getMonth()!=e;pe(i,i.getDate(),"",true,d,h);i.setDate(i.getDate()+1)}}$("#calendar-days").html(x[e]+" "+t);ze(a,l);Ie(a,l,A);Ge(a,l);Be(a,l);Ee();rt();Te();Qe(e,t)}this.generateMonthCalendar=X;function Z(e,t,n){var s=6048e5;R={};var a=new Date(t,e,n);var l=a.getDay();a.setDate(n-a.getDay()-1+r);var c=new Date(a.getFullYear(),a.getMonth(),a.getDate());c.setDate(c.getDate()+1);o=c.getWeek(r);if(e==0&&n==1&&c.getWeek(r)!=1){c.setTime(c.getTime()+s);a.setTime(a.getTime()+s)}$("#calendar-container").append('<tr id="week-row"></tr>');$("#week-row").append('<td class="calendar-week-number-cell">'+c.getWeek(r)+"</td>");for(var d=0;d<=6;d++){a.setDate(a.getDate()+1);pe(a,AGN.Lib.DateFormat.format(a,i),"calendar-week-day-container",false,"week-row",false)}$("#calendar-days").html(AGN.Lib.DateFormat.format(c,i)+" - "+AGN.Lib.DateFormat.format(a,i));ze(c,a);Ie(c,a,A);Ge(c,a);Be(c,a);Ee();Te();Ze(e,t,n)}this.generateWeekCalendar=Z;function Q(e,t){var i;e.draggable({stack:t,revert:"invalid",distance:20,start:function(){i=$("#popup-"+e.prop("id"));i.hide();i.detach();re()},stop:function(){$("#calendar-popup-holder").append(i)}})}function J(e){Q(e,".calendar-mail-label")}this.addMailingDragging=J;function ee(e){Q(e,".calendar-comment")}this.addCommentDragging=ee;function te(){$(".calendar-comments-toggle").css("visibility","hidden");$(".calendar-day-container").has(".calendar-comment").each((function(){$(this).find(".calendar-comments-toggle").css("visibility","visible")}));Te()}this.checkHideCommentIconsVisibility=te;function ie(){Ve()}this.generateUnsentMailingsTable=ie;function ne(){je()}this.generatePlannedMailingsTable=ne;function re(){var e;if(document.selection&&document.selection.empty){document.selection.empty()}else if(window.getSelection){e=window.getSelection();if(e&&e.removeAllRanges)e.removeAllRanges()}}this.clearSelection=re;function oe(e,t){return new Date(t,e,0).getDate()}this.daysInMonth=oe;function se(e){var t=e=="SELECT_MONTH";if(t&&k||!t&&!k){if(k){Qe(T,D)}else{Ze(T,D,M)}return}ae();if(t){var i=new Date(D,T,M);i.setDate(i.getDate()+7);if(o==1&&D<i.getFullYear()){T=0;D++;M=1}X(T,D);k=true;P=false}else{Z(T,D,M);k=false;P=true}}this.changeCalendarMode=se;function ae(){$("#calendar-container").empty();$("#calendar-popup-holder").empty();$(".calendar-mail-label").remove()}this.removeCurrentCalendar=ae;function le(){if(k){ue()}else{de(true)}}this.prevEntry=le;function ce(){if(k){he()}else{de(false)}}this.nextEntry=ce;function de(e){var t=e?-7:7;ae();var i=new Date(D,T,M);i.setDate(i.getDate()+t);M=i.getDate();T=i.getMonth();D=i.getFullYear();i.setDate(i.getDate()+t);var n=$("#month_list_year option");var r=Number(n[n.length-1].value);var o=Number(n[0].value);if(i.getFullYear()<r){Ye()}if(i.getFullYear()>o){Ue()}Z(T,D,M)}this.switchWeek=de;function ue(){ae();T--;if(T<0){T=11;D--}var e=$("#month_list_year option");var t=Number(e[e.length-1].value);if(D<t){Ye()}X(T,D)}this.prevMonth=ue;function he(){ae();T++;if(T>11){T=0;D++}var e=$("#month_list_year option");var t=Number(e[0].value);if(D>t){Ue()}X(T,D)}this.nextMonth=he;function pe(e,t,i,n,r,o){var s="";var a="";if(o){s="calendar-another-month-day"}else{var l=new Date(e.getFullYear(),e.getMonth(),e.getDate());if(l.getTime()==E.getTime()){s="calendar-current-day"}if(l.getDay()==0||l.getDay()==6){s+=" calendar-weekend-day";a=" calendar-weekend-day-label"}}var c=tt(new Date(e.getFullYear(),e.getMonth(),e.getDate()));var d="day-"+c;$("#"+r).append('<td id="'+d+'" data-date="'+c+'" class="calendar-day-container '+i+" "+s+'"></td>');$("#"+d).append('<div class="calendar-day-label'+a+'" id="label-'+d+'"></div>');$("#label-"+d).append(t);ge(d);if(n){fe(d)}R[d]=!n}this.addDayToCalendar=pe;function fe(e){$("#label-"+e).append('<button type="button" class="calendar-comments-toggle" title="'+t("calendar.title.show_hide_comment")+'"><i class="icon icon-comments"></i></button>');$("#"+e+" .calendar-comments-toggle").css("visibility","hidden")}this.addCommentsShowButton=fe;function ge(e){$("#"+"label-"+e).append('<button type="button" class="calendar-comments-add" title="'+t("calendar.title.new_comment")+'"><i class="icon icon-plus"></i></button>');$("#"+"label-"+e+" .calendar-comments-add").css("visibility","hidden");$("#"+e).mouseover((function(){if(!$("#"+e).hasClass("calendar-another-month-day")){$("#"+"label-"+e+" .calendar-comments-add").css("visibility","visible")}}));$("#"+e).mouseout((function(){$("#"+"label-"+e+" .calendar-comments-add").css("visibility","hidden")}))}this.addDayPopup=ge;function me(e){if(R["day-"+e]){$("#day-"+e+" .calendar-comment").hide()}else{$("#day-"+e+" .calendar-comment").show()}R["day-"+e]=!R["day-"+e];Te()}this.toggleComment=me;function ve(e){if(e==""){$("#calendar-comment-error").html(t("calendar.error.empty_comment"));return false}if(ot(e)>1e3){$("#calendar-comment-error").html(t("calendar.error.long_comment"));return false}return true}this.validateComment=ve;function be(e){if(e){var t=e.split(/[,; \t\n]+/);var i=[];for(var n=0;n<t.length;n++){if(t[n]){i.push(t[n])}}return i}else{return[]}}this.parseRecipients=be;function ye(e){if(!e||e.length==0){$("#calendar-comment-error").html(t("calendar.error.empty_recipient_list"));return false}var i=e.join(",");if(ot(i)>2e3){$("#calendar-comment-error").html(t("calendar.error.long_recipient_list"));return false}var n=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;for(var r=0;r<e.length;r++){if(!n.test(e[r])){$("#calendar-comment-error").html(t("calendar.error.invalid_email")+" "+e[r]);return false}}return true}this.validateEmails=ye;function we(e){AGN.Lib.Modal.create($("#calendar-dialog-modal-template").html());AGN.Lib.ReminderService.fillCommentDialog(e);$("#calendar-comment-error").html("");AGN.Lib.ReminderService.updateVisibility()}this.showCommentDialog=we;function Ce(e){var i="comment-"+e.id;var n="day-"+e.getDateAsString();var r=e.text.replace(/\n/g,"<br>");var o=$("#"+n);var s=$("#"+i);if(s.exists()||!o.exists()){return}s=$('<div id="'+i+'" data-comment-id="'+e.id+'" class="calendar-mail-label calendar-comment">'+'<span class="calendar-badge comment-badge">'+'<span class="comment-text-content">'+r+"</span>"+"</span>"+"</div>");if(!R[n]){s.css("display","none")}o.append(s);var a=$("#calendar-popup-holder");a.append('<input type="hidden" id="deadline-'+i+'" name="'+i+'" value="'+e.isDeadline+'"/>');a.append('<input type="hidden" id="notified-'+i+'" name="'+i+'" value="'+e.isNotified+'"/>');a.append('<input type="hidden" id="emm-user-type-'+i+'" name="'+i+'" value="'+e.isEmmUserType+'"/>');a.append('<input type="hidden" id="notify-admin-id-'+i+'" name="'+i+'" value="'+e.notifyAdminId+'"/>');a.append('<input type="hidden" id="recipients-'+i+'" name="'+i+'" value="'+e.recipients+'"/>');a.append('<input type="hidden" id="plannedSendDate-'+i+'" name="'+i+'" value="'+e.getPlannedSendDateAsString()+'"/>');s.dblclick((function(){AGN.Lib.CalendarService.showCommentDialog(AGN.Lib.ReminderService.getReminder(i,e.currentAdminName))}));var l=$('<button type="button" id="remove-'+i+'" class="calendar-comments-remove"><i class="icon icon-trash-o"></i></button>');s.find(".comment-badge").append(l);l.attr("title",t("calendar.title.delete_comment"));l.on("click",(function(){$("#deadline-"+i).remove();$("#popup-"+i).remove();s.remove();Re(i);te();Te();return false}));s.mouseover((function(){l.css("display","block")}));s.mouseout((function(){l.css("display","none")}));ee(s);_e(e.id,r)}this.addComment=Ce;function _e(e,i){$("#calendar-popup-holder").append('<div class="calendar-mail-popup" id="popup-comment-'+e+'"></div>');$("#popup-comment-"+e).append('<div class="arrow"></div>');$("#popup-comment-"+e).append('<div class="calendar-mail-popup-header">'+t("calendar.common.comment")+"</div>");$("#popup-comment-"+e).append('<div class="calendar-mail-popup-content"><p class="comment-text-content">'+i+"</p></div>");$("#popup-comment-"+e).css("display","none");$("#popup-comment-"+e).css("word-wrap","break-word");$("#comment-"+e).mouseover((function(){var t=$("#popup-comment-"+e),i=$(this);var n=i.offset().top-$(window).scrollTop(),r=i.outerHeight(),o=t.outerHeight(),s=15,a=i.offset().top+r+s;if(o+s<n){a=i.offset().top-o-s;t.addClass("top");t.removeClass("bottom")}else{t.addClass("bottom");t.removeClass("top")}t.css({top:a,left:i.offset().left+i.outerWidth()/2-t.outerWidth()/2});t.css("z-index","1500");t.css("display","block")}));$("#comment-"+e).mouseout((function(){$("#popup-comment-"+e).css("display","none")}))}function Se(e,t,i){var n=e.data("date");if(!R["day-"+n]&&!$(".js-calendar-toggle-all-comments").prop("checked")){t.hide()}e.append(t);Pe(AGN.Lib.ReminderService.getReminder("comment-"+i,c));Te();te()}function Ae(e,t,i){var r=e.data("date");if(t.attr("sent")!="true"){var o=t.data("time");var s=nt(r,o);if(s>=n){if(t.attr("planned")=="true"){var a=t.find("a");if(a.hasClass("calendar-mailing-status-planned-in-past")){var l="calendar-"+t.attr("workstatus").replace(/\./g,"-");a.addClass(l).removeClass("calendar-mailing-status-planned-in-past")}}var c=new Date(s);c.setHours(c.getHours()-3);if(c<n){o=null;t.data("time",null)}var d=e.find(".calendar-mail-label");var u=false;if(o){$(d.get().reverse()).each((function(){var e=$(this);var i=e.data("time");if(i&&i<o){e.after(t);u=true}}))}if(!u){var h=d.filter("[data-mailing-id]").last();if(h.length){h.after(t);u=true}else{e.append(t)}}Te();De(i,r)}}}function xe(e,t,i){var n=e.data("date");switch(t.data("status")){case s:return;case a:if(nt(n,"00:00")<E){return}break}var r=e.find(".calendar-mail-label").filter("[data-push-id]").last();if(r.length){r.after(t)}else{e.append(t)}Me(i,n)}function Ee(){$(".calendar-day-container").droppable({hoverClass:"calendar-day-hover",drop:function(e,t){var i=$(this);var n="UNKNOWN";var r=t.draggable.data("comment-id");if(r){n="COMMENT"}else{r=t.draggable.data("mailing-id");if(r){n="MAILING"}else{r=t.draggable.data("push-id");if(r){n="PUSH"}}}if(n=="UNKNOWN"){return}t.draggable.css({top:"",left:""});switch(n){case"COMMENT":Se(i,t.draggable,r);break;case"MAILING":Ae(i,t.draggable,r);break;case"PUSH":xe(i,t.draggable,r);break}}})}function Te(){var e=$("#calendar-table").height();$(".calendar-sidebar").css({"max-height":e+"px"})}this.adjustSidebarHeight=Te;function De(e,t){return $.ajax({type:"POST",url:p,data:{mailingId:e,date:t}})}function Me(e,t){return $.ajax({type:"POST",url:g,data:{pushId:e,date:t}})}function ke(e){var t="comment-"+e.id;var i=$("#"+t);$("#deadline-"+t).val(e.isDeadline);$("#emm-user-type-"+t).val(e.isEmmUserType);$("#notify-admin-id-"+t).val(e.notifyAdminId);$("#recipients-"+t).val(e.recipients);var n=e.text.replace(/\n/g,"<br>");ee(i);i.find(".comment-text-content").html(n);$("#popup-"+t+" .comment-text-content").html(n);$("#plannedSendDate-"+t).val(e.getPlannedSendDateAsString())}function Pe(e){$.ajax({type:"POST",url:b,data:{commentId:e.id,date:e.getDateAsString(),comment:e.text,deadline:e.isDeadline,sendNow:e.isSendNow,emmUserType:e.isEmmUserType,notifyAdminId:e.notifyAdminId,recipients:e.recipients,notified:e.isNotified,plannedSendDate:e.getPlannedSendDateAsString()},success:function(t){if(typeof t.commentId=="undefined"){AGN.Lib.Page.render(t)}else{e.isSendNow=false;if(e.id==0){e.id=t.commentId;Ce(e);te()}else{ke(e)}}}})}this.saveCommentDB=Pe;function Re(e){$.ajax({type:"POST",url:y,data:{commentId:AGN.Lib.ReminderService.getReminderIdFromTag(e)}})}this.removeCommentDB=Re;function Ie(e,t,i){e=tt(e);t=tt(t);q();$.ajax({type:"GET",url:h,data:{startDate:e,endDate:t,limit:i+1}}).done((function(e){$.each(e,(function(e,t){Ne(t,i)}));Te()})).always(K)}function Oe(e){var t=e.closest(".calendar-day-container");var i=nt(t.data("date"),"");e.remove();Ie(i,i,-1)}this.updateDayMailings=Oe;this.getMailings=Ie;function Ne(e,i){var n=$("#day-"+e.sendDate);var r=$("#"+e.mailingId);if(i>0&&n.find(".calendar-mail-label").length>=i){if(!n.find(".show-more-mailings").exists()){n.append("<div class='calendar-mail-label'>"+"<button type='button' class='calendar-badge btn-primary show-more-mailings' style='width: 100%;'>"+t("defaults.showMore")+"</button></div>")}return}if(n.exists()&&!r.exists()){var o;var s=Le(e);if(e.plannedInPast){o="calendar-mailing-status-planned-in-past"}else{o="calendar-"+e.workstatus.replace(".","-")}var a={sent:e.sent,planned:e.planned,mailingId:e.mailingId,statusClass:o,mailingLink:s,workstatus:e.workstatus,shortname:e.shortname,sendTime:e.sendTime};r=AGN.Lib.Template.dom("calendar-mail-link",a);n.append(r);a.subject=e.subject;a.mailsSent=e.mailsSent;a.previewImage=Fe(e.preview_component,e.isOnlyPostType);a.popupClass=e.preview_component?"":"calendar-mail-popup-preview-missing";a.emptyWorkstatus=!e.workstatus.trim();a.openers=e.openers;a.clickers=e.clickers;a.workstatusIn=e.workstatusIn;var l=AGN.Lib.Template.dom("calendar-mail-popup",a);$("#calendar-popup-holder").append(l);AGN.Lib.CalendarService.addMailingDragging(r)}}function Le(e){var t;if(e.sent&&e.workstatus!="mailing.status.test"&&S){t=C.replace(":mailingId:",e.mailingId)}else{t=w.replace(":mailingId:",e.mailingId)}return t}function Fe(e,t){var i;if(t){i=AGN.url("/assets/core/images/facelift/post_thumbnail.jpg")}else if(e){i=AGN.url("/sc?compID="+e)}else{i=AGN.url("/assets/core/images/facelift/no_preview.svg")}return i}function $e(e){switch(e.status){case s:return e.sendDate;case a:return e.startDate;default:return tt(it(e.plannedFor))}}function Ge(e,t){q();$.ajax({type:"GET",url:f,data:{startDate:tt(e),endDate:tt(t)}}).done((function(e){var t=AGN.Lib.Template.prepare("calendar-planned-push-notification");$.each(e,(function(e,i){var n=$(t(i));$("#day-"+$e(i)).append(n);J(n)}));Te()})).always(K)}function Be(e,t){q();$.ajax({type:"GET",url:m,data:{startDate:tt(e),endDate:tt(t)},success:function(e){var t=AGN.Lib.Template.prepare("calendar-auto-optimization");$.each(e,(function(e,i){var n=$(t({optimizationId:i.campaignID,shortname:i.shortname,linkUrl:He(i),status:i.autoOptimizationStatus}));$("#day-"+i.sendDate).append(n)}));Te()}}).always(K)}function He(e){if(e.workflowId==0){return"optimization/"+e.id+"/view.action"}else{return"workflow/"+e.workflowId+"/view.action"}}function ze(e,t){$.ajax({type:"GET",url:v,data:{startDate:tt(e),endDate:tt(t)},success:function(e){$.each(e,(function(e,t){We(t)}));AGN.Lib.CalendarService.checkHideCommentIconsVisibility();rt();Te()}})}function We(e){var t=_.cloneDeep(AGN.Lib.ReminderService.reminder);var i=e.recipients.adminId;t.id=e.commentId;t.setDate(e.date);t.text=e.comment;t.notifyAdminId=i;t.isEmmUserType=i!=0;t.currentAdminName=e.adminName;t.isDeadline=e.deadline;t.isNotified=e.notified;t.setPlannedSendDate(e.plannedSendDates);t.recipients=e.recipients.value;AGN.Lib.CalendarService.addComment(t)}function Ve(){$.ajax({type:"GET",url:d,success:function(e){$(".calendar-sidebar-content").html(e);Te();AGN.Lib.CoreInitializer.run(["tooltip","scrollable"],$(".calendar-wrapper"))}})}function je(){$.ajax({type:"GET",url:u,success:function(e){$(".calendar-sidebar-content").html(e);Te();AGN.Lib.CoreInitializer.run(["tooltip","scrollable"],$(".calendar-wrapper"))}})}function Ue(){var e=$("#month_list_year option");var t=$("#weeks_list_year option");var i=Number(e[e.length-1].value);for(var n=0;n<e.length;n++){var r=Number(e[n].value)+1;e[n].text=r;e[n].value=r;t[n].text=r;t[n].value=r}e[e.length]=new Option(i,i);t[t.length]=new Option(i,i)}function Ye(){var e=$("#month_list_year option");var t=$("#weeks_list_year option");var i=Number(e[e.length-1].value)-1;e[e.length]=new Option(i,i);t[t.length]=new Option(i,i)}function qe(){var e;if(I=="MONTH"){var t=$("#month_list option:selected").val();var i=$("#month_list_year option:selected").val();var n=new Date(i,t,1);strDate=AGN.Lib.DateFormat.format(n,getDateFormat());e=$("#month_list_year option:selected").index()}if(I=="WEEK"){var r=$("#weeks_list option:selected").val();for(var o in O){if(!O.hasOwnProperty(o))continue;if(O[o].number==r){strDate=AGN.Lib.DateFormat.format(O[o].firstDay,getDateFormat());break}}e=$("#weeks_list_year option:selected").index()}if(e==0){Ue()}Ke(strDate)}this.showDate=qe;function Ke(e){var t=AGN.Lib.DateFormat.parseFormat(e,getDateFormat());T=t.getMonth();D=t.getFullYear();M=t.getDate();ae();if(k){X(T,D)}else{Z(T,D,M)}}this.jumpToDate=Ke;function Xe(){var e=AGN.Lib.DateFormat.format(new Date,getDateFormat());Ke(e)}this.jumpToday=Xe;function Ze(e,t,i){var n=6048e5;var o=new Date(t,e,i);o.setDate(i-o.getDay()-1+r);var s=new Date(o.getFullYear(),o.getMonth(),o.getDate());s.setDate(s.getDate()+1);if(e==0&&i==1&&s.getWeek(r)!=1){s.setTime(s.getTime()+n)}var a=s.getWeek(r);if(a==1){var l=new Date(s.valueOf()+n);if(s.getFullYear()!=l.getFullYear()){t=l.getFullYear()}}$("#weeks_list_year")[0].selectedIndex=$("#weeks_list_year option[value = "+t+"]")[0].index;Je($("#weeks_list_year")[0]);$("#weeks_list")[0].selectedIndex=$("#weeks_list option[value = "+a+"]")[0].index;$("#weeks_list_year").select2({minimumResultsForSearch:-1});$("#weeks_list").select2({minimumResultsForSearch:-1})}function Qe(e,t){$("#month_list_year")[0].selectedIndex=$("#month_list_year option[value = "+t+"]")[0].index;$("#month_list")[0].selectedIndex=$("#month_list option[value = "+e+"]")[0].index;$("#month_list").select2({minimumResultsForSearch:-1});$("#month_list_year").select2({minimumResultsForSearch:-1})}function Je(e){O=[];var t;var n=6048e5;var o=e.options[e.selectedIndex].value;var s=new Date(o,11,31);var a=new Date(o,0,1);a.setDate(1-a.getDay()-1+r);a.setDate(a.getDate()+1);var l=new Date(a.getFullYear(),a.getMonth(),a.getDate());l.setTime(a.getTime()+n-864e5);if(a.getWeek(r)!=1){a.setTime(a.getTime()+n);l.setTime(l.getTime()+n)}do{t=new Object;t.number=a.getWeek(r);t.firstDay=new Date(a.getFullYear(),a.getMonth(),a.getDate());t.lastDay=new Date(l.getFullYear(),l.getMonth(),l.getDate());O.push(t);a.setTime(a.getTime()+n);l.setTime(l.getTime()+n)}while(a.getWeek(r)!=1&&a.getFullYear()==o);$("#weeks_list option").remove();for(var c in O){if(!O.hasOwnProperty(c))continue;var d=document.createElement("option");var u=AGN.Lib.DateFormat.format(O[c].firstDay,i);var h=AGN.Lib.DateFormat.format(O[c].lastDay,i);d.value=O[c].number;d.innerHTML=O[c].number+" : "+u+" - "+h;$("#weeks_list").append(d)}}this.createWeeksList=Je;function et(e,t){var i=e+"";while(i.length<t)i="0"+i;return i}function tt(e){var t=et(e.getDate(),2);var i=et(e.getMonth()+1,2);var n=e.getFullYear();return t+"-"+i+"-"+n}function it(e){if(e){var t=e[0];var i=e[1]-1;var n=e[2];return new Date(t,i,n)}return null}function nt(e,t){var i=e.match(/^(\d\d)-(\d\d)-(\d{4})$/);if(i){var n=i[1];var r=i[2]-1;var o=i[3];if(t){i=t.match(/^(\d\d):(\d\d)$/);if(i){var s=i[1];var a=i[2];return new Date(o,r,n,s,a)}}return new Date(o,r,n)}return null}function rt(){if($(".js-calendar-toggle-all-comments").prop("checked")){$(".calendar-table .calendar-comment").show()}}this.setAllCommentsCheckState=rt;function ot(e){var t=encodeURI(e);if(t.indexOf("%")!=-1){var i=t.split("%").length-1;if(i==0)i++;var n=t.length-i*3;i=i+n}else{i=t.length}return i}};AGN.Lib.CalendarService=new e;var i={showDiv:function(e){$("div#calendar-dialog-modal div#"+e).css("display","block")},hideDiv:function(e){$("div#calendar-dialog-modal div#"+e).css("display","none")},updateVisibility:function(){this.onScheduleChanged();this.onDeadlineChanged()},onDeadlineChanged:function(){if($("#isDeadline:checked").val()){$("#remindDate").prop("disabled",false);$("#remindTime").prop("disabled",false);$(".js-open-datepicker").prop("disabled",false);$(".js-open-timepicker").prop("disabled",false)}else{$("#remindDate").prop("disabled",true);$("#remindTime").prop("disabled",true);$(".js-open-datepicker").prop("disabled",true);$(".js-open-timepicker").prop("disabled",true)}return false},onUserTypeChanged:function(e){if(e==this.reminder.recipientEmm){$("#emmUsers").show();$("#customRecipients").hide()}else{$("#customRecipients").show();$("#emmUsers").hide()}},onScheduleChanged:function(){if($("#scheduleReminder:checked").val()){$("#admin-for-notify").prop("disabled",false);this.showDiv("reminderDetails")}else{$("#admin-for-notify").prop("disabled",true);this.hideDiv("reminderDetails")}return false},reminder:{isDeadline:false,isSendNow:false,isEmmUserType:true,recipientEmm:1,recipientCustom:2,defaultDate:{date:"",hours:8,minutes:0},plannedSendDate:{date:"",hours:8,minutes:0},getDateAsString:function(){return $.datepicker.formatDate("dd-mm-yy",this.defaultDate.date)},setDate:function(e){this.defaultDate.date=$.datepicker.parseDate("dd-mm-yy",e);this.plannedSendDate.date=$.datepicker.parseDate("dd-mm-yy",e);this.plannedSendDate.hours=this.defaultDate.hours;this.plannedSendDate.minutes=this.defaultDate.minutes},getPlannedSendDateAsString:function(){return $.datepicker.formatDate("dd-mm-yy",this.plannedSendDate.date)+(this.plannedSendDate.hours<10?" 0":" ")+this.plannedSendDate.hours.toString()+(this.plannedSendDate.minutes<10?":0":":")+this.plannedSendDate.minutes.toString()},setPlannedSendDate:function(e){var t=e.split(" ");this.plannedSendDate.date=$.datepicker.parseDate("dd-mm-yy",t[0]);var i=t[1].split(":");this.plannedSendDate.hours=parseInt(i[0]);this.plannedSendDate.minutes=parseInt(i[1])},getScheduleReminder:function(){return this.isDeadline||this.isSendNow},getRemindCalendarDate:function(){if(this.defaultDate.date.toString()==this.plannedSendDate.date.toString()&&this.defaultDate.hours==this.plannedSendDate.hours&&this.defaultDate.minutes==this.plannedSendDate.minutes){return true}else{return false}},onSave:function(){i.saveReminder(i.reminder)}},getNewReminder:function(e,i){this.reminder.id=0;this.reminder.setDate(e);this.reminder.text="";this.reminder.isEmmUserType=true;this.reminder.notifyAdminId=i.adminId;this.reminder.recipients="";this.reminder.currentAdminName=i.adminName;this.reminder.isDeadline=false;this.reminder.isNotified=false;this.reminder.title=t("calendar.common.new_comment");this.reminder.recipientEmm=i.recipientEmm;this.reminder.recipientCustom=i.recipientCustom;return this.reminder},getReminder:function(e,i){var n=$("#"+e+" .comment-text-content").html()+"";this.reminder.id=this.getReminderIdFromTag(e);this.reminder.setDate(this.getDateFromTag($("#"+e).parent().attr("id")));this.reminder.text=n.replace(/<br>/gi,"\n");this.reminder.isEmmUserType=$("#emm-user-type-"+e).val()=="true";this.reminder.notifyAdminId=$("#notify-admin-id-"+e).val();this.reminder.recipients=$("#recipients-"+e).val();this.reminder.currentAdminName=i;this.reminder.isDeadline=$("#deadline-"+e).val()=="true";this.reminder.isNotified=$("#notified-"+e).val()=="true";this.reminder.setPlannedSendDate($("#plannedSendDate-"+e).val());this.reminder.title=t("calendar.common.edit_comment");return this.reminder},fillCommentDialog:function(e){var t=$("#calendar-dialog-modal");t.find(".modal-title").html(e.title);t.find("#comment-text").val(e.text);t.find('#reminderDetails input[name="userType"][value='+(e.isEmmUserType?e.recipientEmm:e.recipientCustom)+"]").prop("checked",true).trigger("change");t.find("#admin-for-notify").val(e.notifyAdminId);AGN.Lib.Select.get(t.find("#admin-for-notify")).selectValueOrSelectFirst(e.notifyAdminId);t.find("#recipients-text").val(e.recipients);t.find("#isDeadline").prop("checked",e.isDeadline);t.find("#isSendNow").prop("checked",e.isSendNow);t.find("#scheduleReminder").prop("checked",e.getScheduleReminder());t.find("#remindDate").pickadate("picker").set("select",e.plannedSendDate.date);t.find("#remindTime").val(e.plannedSendDate.hours+":"+e.plannedSendDate.minutes)},saveReminder:function(e){var t=$("#comment-text").val();if(AGN.Lib.CalendarService.validateComment(t)){var i=$("#isEmmUserType").prop("checked");var n=AGN.Lib.CalendarService.parseRecipients($("#recipients-text").val());if(i||AGN.Lib.CalendarService.validateEmails(n)){$("#calendar-dialog-modal").modal("hide");e.text=t;e.isEmmUserType=i;if(i){e.notifyAdminId=$("#admin-for-notify").val();e.recipients=""}else{e.notifyAdminId=0;e.recipients=n.join(",")}e.isSendNow=$("#isSendNow").prop("checked");e.isDeadline=$("#isDeadline").prop("checked");if($("#isDeadline").prop("checked")&&$("#scheduleReminder").prop("checked")){var r=$("#remindDate").pickadate("picker"),o=$("#remindTime");e.plannedSendDate.date=AGN.Lib.DateFormat.parseFormat(r.get("select","dd-mm-yyyy"),"dd-MM-yyyy");e.plannedSendDate.hours=o.val().substring(0,2);e.plannedSendDate.minutes=o.val().substring(3,5)}else{e.plannedSendDate.date=e.defaultDate.date;e.plannedSendDate.hours=e.defaultDate.hours;e.plannedSendDate.minutes=e.defaultDate.minutes}AGN.Lib.CalendarService.saveCommentDB(e)}}},getDateFromTag:function(e){return e.substr(e.indexOf("-")+1)},getReminderIdFromTag:function(e){return e.substr(e.indexOf("-")+1)}};AGN.Lib.ReminderService=i})();AGN.Lib.CoreInitializer.new("char-counter",["growing-textarea"],(function(e=$(document)){_.each(e.find("[data-show-char-counter]"),(function(e){const t=$(e);if(!t.is("input")&&!t.is("textarea")){return}r(t)}));function i(e,i){e.text(t("fields.content.charactersEntered",i.val()?.length||0))}function n(e,t){let i=e.find(".tile-footer");if(!i.exists()){i=$('<div class="tile-footer text-secondary fs-3 border-top">');e.append(i)}i.prepend(t)}function r(e){const t=$('<span class="text-truncate">');if(e.data("show-char-counter")==="tile-footer"){n(e.closest(".tile"),t)}else{const i=e.is("textarea")?e.parent():e;i.before($(`<div class="char-counter"></div>`).append(t))}i(t,e);e.on("change input editor:create editor:change",_.throttle((()=>i(t,e)),100))}}));AGN.Lib.CoreInitializer.new("colorpicker",(function(e=$(document)){const t=AGN.Lib.Colorpicker;e.find(".js-colorpicker").each((function(){const e=$(this);if(!t.get(e)){new t(e)}}))}));AGN.Lib.CoreInitializer.new("csrf",(function(e=$(document)){e.find('meta[name="_csrf_header"]').each((function(){window.csrfHeaderName=$(this).attr("content");window.csrfCookieName=window.csrfHeaderName}));e.find('meta[name="_csrf_parameter"]').each((function(){window.csrfParameterName=$(this).attr("content")}));if(AGN.Lib.CSRF.isProtectionEnabled()){e.find(`div > input[type="hidden"][name="${window.csrfParameterName}"]:only-child`).parent("div").hide()}}));(()=>{const e=AGN.Lib.Helpers;const i=AGN.Lib.Template;const n="agn:datepicker-opt";AGN.Lib.CoreInitializer.new("datepicker",(function(r=$(document)){_.each(r.find(".js-datepicker"),(i=>{const r=$(i);r.removeClass("hasDatepicker");let l={showWeek:true,changeMonth:true,changeYear:true,selectOtherMonths:true,dateFormat:window.adminDateFormat,showButtonPanel:true,showOtherMonths:true,firstDay:1,weekHeader:t("calendar.common.weekNumber"),monthNamesShort:t("date.monthsFull"),dayNamesMin:t("date.weekdaysShort"),onUpdateDatepicker:function(e){c(r);p(e.dpDiv,r)},beforeShow:function(e,t){if(r.attr("readonly")){return false}t.dpDiv.removeClass("hidden");r.parent().addClass("is-active")},onClose:function(){r.parent().removeClass("is-active")}};l=_.merge({},l,e.objFromString(r.data("datepicker-options")));let d=l.dateFormat?.toLowerCase()?.replace(/d+/,"dd")?.replace(/m+/,"mm")?.replace(/y+/,"yyyy");r.inputmask(d,{placeholder:"_",showMaskOnHover:false});l.dateFormat=s(l.dateFormat);if(l.formatSubmit){l.altFormat=s(l.formatSubmit);l.altField=a(r,l.dateFormat,l.altFormat)}r.data(`${n}-initialMinDate`,l.minDate);r.data(`${n}-initialMaxDate`,l.maxDate);r.datepicker(l);r.datepicker("widget").addClass("hidden");const u=r.closest("[data-date-range]");if(u.exists()){const e=u.find(".js-datepicker");if(r.is(e.get(0))){l.minFor=$(e.get(1))}else{l.maxFor=$(e.get(0))}}if(l.maxFor){r.data(`${n}-maxFor`,l.maxFor);const e=()=>{o(l,r);const e=r.datepicker("getDate");if(e){l.maxFor.datepicker("option","maxDate",e)}else{h(r)}};r.on("change",e);e()}if(l.minFor){r.data(`${n}-minFor`,l.minFor);const e=()=>{o(l,r);const e=r.datepicker("getDate");if(e){l.minFor.datepicker("option","minDate",e)}else{h(r)}};r.on("change",e);window.setTimeout(e,100)}o(l,r)}));function o(e,t){if(e.minDate||e.maxDate){t.datepicker("setDate",$.datepicker.parseDate(e.dateFormat,t.val()))}}function s(e){return e.replace(/M/g,"m").replace(/D/g,"d").replace("YYYY","yyyy").replace("yyyy","yy")}function a(e,t,i){const n=l(e.val(),t,i);const r=$(`<input type="hidden" name="${e.attr("name")}" value="${n}">`);e.attr("name","");r.insertAfter(e);return r}function l(e,t,i){const n=$.datepicker.parseDate(t,e);return $.datepicker.formatDate(i,n)}function c(e){const n=$(".ui-datepicker-buttonpane");n.append(i.text("datepicker-btn",{id:"clear-datepicker-btn",iconClass:"icon-undo-alt",text:t("defaults.reset")}));n.find("#clear-datepicker-btn").on("click",(()=>u(e)));if(n.find(".ui-datepicker-current").exists()){n.append(i.text("datepicker-btn",{id:"today-datepicker-btn",iconClass:"icon-calendar-alt",text:t("defaults.today")}));n.find("#today-datepicker-btn").on("click",(()=>d(e)))}}function d(e){e.datepicker("setDate",new Date);e.datepicker("hide");e.trigger("change");e.blur()}function u(e){e.val("");e.datepicker("setDate",null);e.datepicker("hide");e.blur();h(e)}function h(e){if(e.data(`${n}-minFor`)){const t=$(e.data(`${n}-minFor`));t.datepicker("option","minDate",t.data(`${n}-initialMinDate`))}if(e.data(`${n}-maxFor`)){const t=$(e.data(`${n}-maxFor`));t.datepicker("option","maxDate",t.data(`${n}-initialMaxDate`))}}function p(e,t){f(t,e.find("select.ui-datepicker-month"));f(t,e.find("select.ui-datepicker-year"));AGN.runAll(e)}function f(e,t){t.addClass("form-control has-arrows");t.attr("data-select-options","minimumResultsForSearch: -1, dropdownParent: '#ui-datepicker-div'")}_.each(r.find(".js-timepicker"),(function(t){let i=$(t),n,r,o={mask:"h:halfs",oncomplete:function(){i.trigger("timepicker:complete")},onincomplete:function(){i.trigger("timepicker:incomplete")}};n=_.merge({},o,e.objFromString(i.data("timepicker-options")));r=n.mask;delete n.mask;i.inputmask(r,n);i.attr("placeholder",i.data("_inputmask").opts.placeholder)}))}))})();AGN.Lib.CoreInitializer.new("delegate",(function(e){if(!e){e=$(document)}e.all("[data-delegate]").each((function(){var e=$(this),t=e.data("delegate"),i=e.data("delegate-events")||"click";e.on(i,(function(e){var i=$(t);if(i.length>0){i.trigger($.Event(e))}}))}))}));AGN.Lib.CoreInitializer.new("display-dimensions",(function(e=$(document)){_.each(e.find("[data-display-dimensions]"),(e=>{const t=$(e);const i=AGN.Lib.Helpers.objFromString(t.data("display-dimensions"))["scope"];const n=t.parents(i).find("[data-dimensions]");t.ensureLoad((function(){const t=e.naturalWidth;const i=e.naturalHeight;n.html(`${t} x ${i} px`)}))}))}));AGN.Lib.CoreInitializer.new("dragster",(function(e){if(!e){e=$(document)}e.find(".dropzone").each((function(){new Dragster(this)}))}));AGN.Lib.CoreInitializer.new("dropzone",(function(){Dropzone.autoDiscover=false}));AGN.Lib.CoreInitializer.new("editable-view",(function(e=$(document)){const t=AGN.Lib.EditableView;const i=AGN.Lib.EditableTile;e.all(t.SELECTOR).each((function(){const e=$(this);new t(e,e.data("editable-view"))}));if(e.is(i.SELECTOR)){t.get(e)?.add(e);$(window).trigger("agn:resize")}}));AGN.Lib.CoreInitializer.new("endless-scroll",(function(e=$(document)){e.find("[data-endless-scroll]").each((function(){const e=$(this);let t={};if(e.is("[data-endless-scroll-opts]")){const i=AGN.Lib.Helpers.objFromString(e.data("endless-scroll-opts"));t=_.extend(t,i)}new AGN.Lib.EndlessScroll(e,e.data("endless-scroll"),t)}))}));(()=>{const e=AGN.Lib.Form;AGN.Lib.CoreInitializer.new("form",["select","switchable-input","switchable-tile"],(function(t=$(document)){t.find("form input[type=text], form input[type=password]").on("keyup keypress",(function(e){const t=e.keyCode||e.which;if(t===13){e.preventDefault();return false}}));const i=t.all("form[data-form-focus]").first();if(i.exists()){setTimeout((()=>{const t=i.find(`[name="${i.data("form-focus")}"]`);if(t.exists()&&!t.is(":disabled")&&!t.is(":hidden")){t.trigger("focus");e.scrollToField(t)}}),10)}_.each(t.all("form"),(t=>e.get($(t))))}))})();AGN.Lib.DomInitializer.new("formbuilder",(function(e=$(document)){var i=AGN.Lib.Tooltip;var n=this.config;var r=$("script#"+CSS.escape("config:formbuilderCommon")+'[type="application/json"]');if(r.length===1){n=$.extend(r.json(),n)}_.each(e.find(".js-form-builder"),(function(e){AGN.Lib.FormBuilder.FormBuilder.get(e,n).promise().then((function(){var t=$(e);t.find(".form-actions button").each((function(){var e=$(this);i.create(e,{title:e.text()})}))}))}));_.each(e.find(".modal-js-form-builder"),(function(e){var t=$(e).attr("data-target-formbuilder");if(!t){return}var i=$(t);if(!i){return}var r=AGN.Lib.FormBuilder.FormBuilder.get(i);AGN.Lib.FormBuilder.FormBuilder.get(e,n).setJson(r.getJson())}));document.styleSheets[0].insertRule(`:root { --warn-dialog-title: "${t("defaults.warning")}"; }`,0)}));AGN.Lib.CoreInitializer.new("growing-textarea",(function(e=$(document)){e.all('textarea.form-control:not([class*="js-editor"])').each((function(){const e=$(this);if(!e.closest(".text-area-grow-wrapper").exists()){e.wrap('<div class="text-area-grow-wrapper"></div>')}e.trigger("input")}))}));AGN.Lib.CoreInitializer.new("hover-dropdown-btn",(function(e=$(document)){const t="agn-isActivedDropdownMenu";_.each(e.find(".js-btn-dropdown"),(e=>{const n=$(e);n.removeAttr("data-bs-toggle");const r=n.closest(".dropdown");const o=r.find(".dropdown-menu");n.attr("aria-expanded",false);n.data(t,false);n.on("mouseenter",(()=>{o.css("transform",`translate(0px, ${n.outerHeight()+5}px)`);i(r,n,true)}));o.on("mouseenter",(()=>n.data(t,true)));n.on("mouseleave",(()=>{setTimeout((()=>{if(!n.data(t)&&!n.is(":hover")){i(r,n,false)}}),400)}));o.on("mouseleave",(()=>{n.data(t,false);i(r,n,false)}))}));function i(e,t,i){t.attr("aria-expanded",i);e.toggleClass("open",i)}}));AGN.Lib.CoreInitializer.new("iframe",(function(e=$(document)){e.find("iframe:not(.js-fixed-iframe)").each((function(){const e=this;const t=$(this);if(t.hasClass("js-simple-iframe")){const i=t.parent();const n=i.parent();const r=t.data("max-width");const o=r!=="100%";const s=parseInt(r);const a=t.data("media-query");const l=e=>{const t=e.body;const i=e.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight)};const c=e=>{const t=e.body;const i=e.documentElement;return Math.max(t.scrollWidth,t.offsetWidth,i.clientWidth,i.scrollWidth,i.offsetWidth)};const d=()=>{const r=e.contentDocument||e.contentWindow?.document;if(r){let e=1;if(o){const i=c(r);if(a){if(i>s){e=s/i;$(r.documentElement).css("zoom",`calc(${e})`)}t.width(s)}else{t.width(i)}}t.height(l(r)*e);const i=t.contents().find("body");i.css("overflow-y","hidden");if(a){i.css("overflow-x","hidden")}}if(o){n.width("auto");if(t.width()>s&&s>n.width()){i.width(t.width())}else{i.width(Math.min(s,n.width()))}}};t.off("load.iframe");t.on("load.iframe",(function(){window.setTimeout((()=>{d();const t=$(e.contentDocument.body);if(typeof t.imagesLoaded==="function"){t.imagesLoaded().progress(_.throttle(d,100)).always(d)}$(window).off("viewportChanged.iframe",d);$(window).on("viewportChanged.iframe",d)}),50)}))}else{t.on("load.iframe",(function(){window.setTimeout((()=>{t.iFrameResize({heightCalculationMethod:"grow",enablePublicMethods:true})}),50)}))}}))}));AGN.Lib.CoreInitializer.new("image-editor",(function(e=$(document)){_.each(e.find("#editor-canvas"),(e=>{const t=e.getContext("2d");const i=new Image;i.src=$("#editor-img").attr("src");i.onload=function(){const e=i.width;const n=i.height;t.canvas.width=e;t.canvas.height=n;t.drawImage(i,0,0,e,n)}}))}));(function(){var e=AGN.Lib.Helpers;AGN.Lib.CoreInitializer.new("input-mask",(function(t){if(!t){t=$(document)}_.each(t.find(".js-inputmask"),(function(t){var i=$(t);var n;var r;n=_.merge({},e.objFromString(i.data("inputmask-options")));r=n.mask;delete n.mask;i.inputmask(r,n)}))}))})();AGN.Lib.CoreInitializer.new("input-popover",["popover"],((e=$(document))=>{e.all('input[type="text"]').each((function(){const e=$(this);let t=AGN.Lib.Popover.get(e);if(!t){t=AGN.Lib.Popover.create(e,{content:()=>e.val()});t.inputTruncatedTextPopover=true;if(!e.is(":truncated")){t.disable()}}}))}));AGN.Lib.CoreInitializer.new("input-table",(function(e=$(document)){_.each(e.find("[data-input-table]"),(e=>new AGN.Lib.InputTable($(e))))}));$.fn.queryBuilder.defaults({templates:{group:`\n<dl id="{{= it.group_id }}" class="rules-group-container">\n  <dt class="rules-group-header">\n    <div class="group-conditions switch">\n      {{~ it.conditions: condition }}\n        <input id="qb-codition-btn-{{= condition }}-group-{{= it.group_id }}" type="radio" name="{{= it.group_id }}_cond" value="{{= condition }}">\n        <label for="qb-codition-btn-{{= condition }}-group-{{= it.group_id }}">{{= it.translate("conditions", condition) }}</label>\n      {{~}}\n    </div>\n    \n    <div class="group-actions">\n      <button type="button" class="btn btn-secondary btn-icon" data-add="rule" data-tooltip="{{= it.translate("add_rule") }}">\n        <i class="{{= it.icons.add_rule }}"></i>\n      </button>\n      {{? it.settings.allow_groups===-1 || it.settings.allow_groups>=it.level }}\n        <button type="button" class="btn btn-secondary btn-icon" data-add="group" data-tooltip="{{= it.translate("add_group") }}">\n          <i class="{{= it.icons.add_group }}"></i>\n        </button>\n      {{?}}\n      {{? it.level>1 }}\n        <button type="button" class="btn btn-danger btn-icon" data-delete="group" data-tooltip="{{= it.translate("delete_group") }}">\n          <i class="{{= it.icons.remove_group }}"></i>\n        </button>\n      {{?}}\n    </div>\n    \n    {{? it.settings.display_errors }}\n      <div class="error-container"><i class="{{= it.icons.error }}"></i></div>\n    {{?}}\n  </dt>\n  <dd class=rules-group-body>\n    <ul class=rules-list></ul>\n  </dd>\n</dl>`}});$.fn.queryBuilder.defaults({templates:{rule:`\n<li id="{{= it.rule_id }}" class="rule-container">\n  <div class="rule-header">\n    <div class="rule-actions">\n      <button type="button" class="btn btn-icon btn-danger" data-delete="rule">\n        <i class="{{= it.icons.remove_rule }}"></i>\n      </button>\n    </div>\n    <div class="rule-operator-conditions-container"></div>\n  </div>\n  {{? it.settings.display_errors }}\n    <div class="error-container"><i class="{{= it.icons.error }}"></i></div>\n  {{?}}\n  <div class="rule-filter-container"></div>\n  <div class="rule-operator-container"></div>\n  <div class="rule-value-container"></div>\n</li>`}});$.fn.queryBuilder.defaults({templates:{filterSelect:`\n{{ var optgroup = null; }}\n<select class="form-control" name="{{= it.rule.id }}_filter" data-select-options="dropdownAutoWidth: true">\n  {{? it.settings.display_empty_filter }}\n    <option value="-1">{{= it.settings.select_placeholder }}</option>\n  {{?}}\n  {{~ it.filters: filter }}\n    {{? optgroup !== filter.optgroup }}\n      {{? optgroup !== null }}</optgroup>{{?}}\n      {{? (optgroup = filter.optgroup) !== null }}\n        <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">\n      {{?}}\n    {{?}}\n    <option value="{{= filter.id }}">{{= it.translate(filter.label) }}</option>\n  {{~}}\n  {{? optgroup !== null }}</optgroup>{{?}}\n</select>`}});$.fn.queryBuilder.defaults({templates:{ruleValueSelect:'{{ var optgroup = null; }} <select class="form-control js-select" name="{{= it.name }}" {{? it.rule.filter.multiple }}multiple{{?}}>   {{? it.rule.filter.placeholder }}     <option value="{{= it.rule.filter.placeholder_value }}" disabled selected>{{= it.rule.filter.placeholder }}</option>   {{?}}   {{~ it.rule.filter.values: entry }}     {{? optgroup !== entry.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = entry.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= entry.value }}">{{= entry.label }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>'}});$.fn.queryBuilder.defaults({icons:{add_group:"icon icon-plus-circle",add_rule:"icon icon-plus",remove_group:"icon icon-trash-alt",remove_rule:"icon icon-trash-alt",error:"icon icon-exclamation-triangle"}});AGN.Lib.CoreInitializer.new("js-table",(function(e=$(document)){e.all("[data-js-table]").each((function(){const e=$(this);const t=e.all(".table-wrapper");const i=e.data("js-table");if(!t.exists()||!i){return}const n=$(`script#${CSS.escape(i)}`);if(!n.exists()){console.warn(`Config for JS table (${i}) not found!`);return}const r=n.json();let o;if(t.data("web-storage")){o=_.merge(AGN.Lib.WebStorage.get(t.data("web-storage"))||{},r.options||{})}else{o=r.options||{}}new AGN.Lib.Table(t,r.columns,r.data,o).applyFilter()}))}));(()=>{AGN.Lib.CoreInitializer.new("load",(function(e=$(document)){_.each(e.find("[data-load]"),(e=>{window.setTimeout((()=>AGN.Lib.Load.load($(e))),100)}))}))})();AGN.Lib.DomInitializer.new("logon-complete",(function(e){var t=AGN.Lib.Form.get(e);var i={};window.adminId=this.config.adminId;if(this.config){$.each(this.config.webStorageBundleNames,(function(e,t){try{var n=AGN.Lib.Storage.get("web-storage#"+t);if(n!=null){i[t]=n}}catch(e){console.error(e)}}));var n=AGN.Lib.Storage.get("login-page")||{};n.isFrameShown=!!this.config.isFrameShown;AGN.Lib.Storage.set("login-page",n)}t.setValue("webStorageJson",JSON.stringify(i));t.submit()}));(()=>{const e=45e3;const t=3*60*6e4;AGN.Opt.Components.MailingContentLock={manageLock:function(i,n,r){if(i>0&&n){var o=Date.now();var s;var a=function(){if(o+t>Date.now()){$.ajax({url:AGN.url("/mailing/ajax/"+i+"/lock.action"),type:"POST",success:function(e){if(e.success!==true){clearInterval(s)}},statusCode:{404:function(){clearInterval(s)}}})}else{clearInterval(s);$(document).trigger("ajax:unauthorized");$.ajax({url:AGN.url("/logout.action"),type:"POST",success:function(){$("body").append(AGN.Lib.Template.text("session-expired"))}})}};s=setInterval(a,e);return true}else{AGN.Lib.Modal.fromTemplate("mailing-locked",{username:r});return false}}}})();AGN.Lib.DomInitializer.new("mailing-content-overview",(function(e,t){const i=this.config;const n=$("#myDatePicker");const r=$("#myTimePicker");if(!t){var o=AGN.Lib.Storage.get("mailings-content-dynNameID");if(o){var s=$("tr[data-dyn-name-id='"+o.dynNameID+"']");if(s.exists()){var a=s.position().top;setTimeout((function(){$("body").scrollTop(a)}),1);AGN.Lib.Storage.set("mailings-content-dynNameID",{dynNameID:0})}}}if(n.exists()){n.on("change",(function(){const e=n.datepicker("getDate");$("#startDay").val(e?e.getDate():0);$("#startMonth").val(e?e.getMonth()+1:0);$("#startYear").val(e?e.getFullYear():0)}));r.on("timepicker:complete",(function(){var e=r.val();$("#startHour").val(e.substr(0,2));$("#startMinute").val(e.substring(3,5))}));r.on("timepicker:incomplete",(function(){$("#startHour").val(0);$("#startMinute").val(0)}))}if(!i.isEditableMailing||!AGN.Opt.Components.MailingContentLock.manageLock(i.mailingId,i.isMailingExclusiveLockingAcquired,i.anotherLockingUserName)){var l=$('[data-controls-group="editing"]');l.prop("disabled",true);l.addClass("disabled")}}));AGN.Lib.DomInitializer.new("mailing-content-view",(function(e){AGN.Lib.Storage.set("mailings-content-dynNameID",{dynNameID:e.data("dyn-name-id")})}));AGN.Lib.Controller.new("mailing-followup-options",(function(){var e;var t="";var i=[];this.addDomInitializer("mailing-followup-options",(function(){e=$("#followUpType");t=$("#lightWeightMailingList");i=this.config.additionalOptions;r();t.on("change",(function(){r()}))}));var n=function(){return AGN.Lib.Template.text("followupAdvertisingOptions",{items:i})};var r=function(){var i=AGN.Lib.Select.get(t).getSelectedValue();e.children(".advertisingOption").remove();if(i){$.ajax({type:"POST",url:AGN.url("/mailing/ajax/"+i+"/isAdvertisingContentType.action")}).done((function(t){if(t&&t.success){e.append(n())}}))}}}));AGN.Lib.DomInitializer.new("mediapool-image-pick",(function(e){let t;AGN.Lib.Action.new({click:"tbody tr"},(function(){if(t){n(t,false)}t=this.el;n(t,true)}),e);AGN.Lib.Action.new({dblclick:"tbody tr"},(function(){i(this.el)}),e);this.addAction({click:"mpAcceptImage"},(function(){i(t)}));function i(t){if(t){const i=r(t);if(i){AGN.Lib.Confirm.get(e).positive(i)}}else{AGN.Lib.Messages.alert("messages.error.nothing_selected")}}function n(e,t){const i=e.find("input[type=checkbox]");e.toggleClass("picked",t);i.prop("checked",t)}function r(e){return e.find("[data-mediapool-image-info]").json()}}));AGN.Lib.CoreInitializer.new("multi-editor",(function(e=$(document)){const i=AGN.Lib.Helpers;const n=AGN.Lib.Modal;const r=AGN.Lib.FormBuilder.FormBuilder;const o=AGN.Lib.Editor;class s{constructor(e){const t=e.data("_multi_editor");if(t){return t}this.$el=e;this.$target=e.find("[data-enlarge-target]");if(!this.$target.exists()){this.$target=this.$el}this.$container=this.$target.parent();this._isQbEditor=this.$target.find("#queryBuilderRules").exists();this.#rt()}static defaultOptions(){return{btnText:t("defaults.apply")}}#rt(){this.$resizeBtn.on("click",(()=>this.resize()));this.updateResizeBtn()}resize(){if(this.enlarged){this.apply()}else{this.enlarge()}this.updateResizeBtn();o.get(this.editor$)?.resize()}enlarge(){this.toggleWysiwygIfSelected(false);this.createBackup();this.showModal();this.toggleWysiwygIfSelected(true)}createBackup(){this.backup={};_.each(this.editor$,(e=>this.backup[$(e).attr("id")]=o.get($(e)).val()));_.each(this.$el.find(".js-form-builder"),(e=>this.backup[$(e).attr("id")]=r.get(e).getJson()));_.each(this.$el.find("#queryBuilderRules"),(e=>{const t=$(e).parent().prop("queryBuilder");this.backup["queryBuilderRules"]=t.getRules({allow_invalid:true,skip_empty:false})}))}showModal(){const e=this.$resizeBtn.data("enlarged-modal")||"multi-editor-modal";const t=i.objFromString(this.$resizeBtn.data("modal-set"));this.$modal=n.fromTemplate(e,_.extend(s.defaultOptions(),t));this.$placeholder.replaceWith(this.$target);if(this._isQbEditor){AGN.Lib.CoreInitializer.run("select",this.$target)}this.$applyBtn.on("click",(()=>this.resize()));this.$modal.on("hide.bs.modal",(()=>this.hideModal()));this.$el.trigger("enlarged")}hideModal(){if(!this.applyChanges){this.cancel()}this.applyChanges=false;this.updateResizeBtn()}cancel(){this.toggleWysiwygIfSelected(false);this.restore();this.$container.append(this.$target);if(this._isQbEditor){AGN.Lib.CoreInitializer.run("select",this.$target)}this.toggleWysiwygIfSelected(true)}restore(){Object.entries(this.backup).forEach((([e,t])=>{const i=`#${e}`;if(e==="queryBuilderRules"){$(i).parent().prop("queryBuilder")?.setRules(t)}else if(r.isCreated(i)){r.get(i).setJson(t)}else{this.$el.find(i).data("_editor")?.val(t)}}))}apply(){this.applyChanges=true;this.toggleWysiwygIfSelected(false);n.getInstance(this.$modal).hide();this.$container.append(this.$target);if(this._isQbEditor){AGN.Lib.CoreInitializer.run("select",this.$target)}this.toggleWysiwygIfSelected(true)}toggleWysiwygIfSelected(e){if(this.wysiwygSelected){this.$el.trigger(e?"tile:show":"tile:hide")}}get editor$(){return this.$el.find(".js-editor")}get wysiwygSelected(){return this.$el.find('[data-multi-editor-option="wysiwyg"]').is(".active")}get enlarged(){return this.$target.closest(".modal").length>0}get $resizeBtn(){return this.$el.find("[data-enlarged-modal]")}get $applyBtn(){return this.$modal?.find("[data-apply-enlarged]")}get $placeholder(){return this.$modal?.find(".modal-body [data-placeholder]")}updateResizeBtn(){if(!this.$resizeBtn.exists()){return}this.$resizeBtn.find("i").toggleClass("icon-expand-arrows-alt",!this.enlarged).toggleClass("icon-compress-arrows-alt",this.enlarged);AGN.Lib.Tooltip.remove(this.$resizeBtn);AGN.Lib.Tooltip.createTip(this.$resizeBtn,this.enlarged?"":t("defaults.enlargeEditor"))}}_.each(e.find("[data-multi-editor]"),(e=>new s($(e))))}));AGN.Lib.CoreInitializer.new("number-input",((e=$(document))=>{e.on("keypress",'input[type="number"]',(function(e){if(e.which!==8&&e.which!==0&&(e.which<48||e.which>57)){e.preventDefault()}}))}));AGN.Lib.CoreInitializer.new("polling-form",(function(e){if(!e){e=$(document)}e.find('[data-form="polling"]').each((function(){AGN.Lib.Form.get($(this)).submit()}))}));AGN.Lib.CoreInitializer.new("popout-window",(function(e=$(document)){_.each(e.find("[data-popout-window]"),(e=>{const t=$(e);const i=t.attr("src");if(!i){return}t.parent().append($("<figure>").append(t).append($(`\n          <figcaption>\n            <a class="clickable flex-center overflow-hidden" data-popup="${i}" data-bs-dismiss="modal">\n                <span class="text-truncate">${i}</span>\n                <i class="icon icon-external-link-alt"></i>\n            </a>\n          </figcaption>`)))}))}));AGN.Lib.CoreInitializer.new("popover",["table-row-actions"],(function(e=$(document)){const t=AGN.Lib.Popover;const i="data-popover";t.validate();e.all(`[${i}]`).each((function(){const e=$(this);const r=$.extend({content:$.trim(e.attr(i))},e.data("popover-options"));if(r.templateName){if(r.html){n(e,r)}else{r.content=AGN.Lib.Template.text(r.templateName)}}if(r.content){const i=t.getOrCreate(e,r);if(r.disabled){i.disable()}}}));function n(e,i){let n=null;i.content=()=>{if(n){return n}const r=AGN.Lib.Template.dom(i.templateName);AGN.Lib.Helpers.imagesLoaded(r.all("img")).done((i=>{n=r;if(i.length){const i=t.get(e);if(i){i.setContent();if(e.is(":hover")){e.popover("show")}}}}));return n}}}));AGN.Lib.CoreInitializer.new("preview-table",(function(e=$(document)){e.find("[data-preview-table]").each((function(){AGN.Lib.PreviewTable.init($(this))}))}));(()=>{AGN.Lib.CoreInitializer.new("target-group-query-builder-extend",(function(){if(window.queryBuilderIsExtended){return}window.queryBuilderIsExtended=true;const r=2;let o={};function s(e,t){if(Math.sign(e)===-1){t.push("sub")}else{t.push("add")}}function a(e,t,i){if(i){if(i==="sub"){t="-"+Math.abs(t)}else{t="+"+Math.abs(t)}}e.$el.find("#date-filter").val(t)}const l=$.fn.queryBuilder;const c=l.constructor;const d=c.prototype.init;const u=c.prototype.validate;const h=c.prototype.bindEvents;o=c.utils;const p=c.selectors;Object.assign(p,{rule_include_empty:".rule-include-empty[name*=_include_empty]",rule_operator_conditions_container:".rule-operator-conditions-container",rule_header_inputs:".rule-header :input"});o.defineModelProperties(c.Rule,["includeEmpty"]);l.extend({init:function(e){this.on("afterCreateRuleInput",(function(e,t){var i=e.builder.optionsByType[t.filter.type];if(i){var n=i.postCreate;if(n&&typeof n==="function"){n.call(e.builder,t,i)}}}));this.on("afterUpdateRuleOperator",(function(e,t){var i=e.builder.optionsByType[t.filter.type];if(i){var n=i.postOperatorUpdate;if(n&&typeof n==="function"){n.call(e.builder,t,i)}}}));this.on("getGroupTemplate.filter getRuleTemplate.filter",(function(e,t){const i=$(e.value);i.find(p.drag_handle).replaceWith(`\n                        <button class="btn btn-icon btn-secondary drag-handle" type="button">\n                            <i class="icon icon-arrows-alt"></i>\n                        </button>\n                    `);e.value=i.prop("outerHTML")}));this.on("afterAddGroup",(function(e,t){const i=t.$el.parent().closest(".rules-group-container");if(i.exists()&&!i.hasClass("rules-group-container--nested")){t.$el.addClass("rules-group-container--nested")}AGN.Lib.CoreInitializer.run("tooltip",t.$el)}));this.setupInitialRule(e);return d.call(this,e)},isEmptyOrInitial:function(e){if(!e||!e.rules||!e.rules.length){return true}if(e.rules.length===1&&(e.rules[0].initialRule||e.rules[0].empty)){return true}return false},setupInitialRule:function(e){if(this.isEmptyOrInitial(e)){this.initialRule=true;e.rules=[{initialRule:true,empty:true}]}else{this.initialRule=false}},optionsByType:{date:{availableFormats:function(e){if(e&&e.type&&(e.type=="before"||e.type=="after")){return["YYYYMMDD"]}return["DD.MM.YYYY","YYYYMMDD","DDMMYYYY","MMDD","DDMM","DD","MM","YYYY"]},input:function(i,n){return $(` \n                            <div class="form-check form-switch">\n                                <input id="${i.id}-today" name="today" type="checkbox" role="switch" class="form-check-input">\n                                <label class="form-label form-check-label" for="${i.id}-today">${t("defaults.today")}</label>\n                            </div>\n                            <div class="input-group">\n                                <input class="form-control rounded-2" type="text" id="date-filter"/>\n                                <span id="date-offset-label" class="input-group-text input-group-text--dark hidden">${t("defaults.Days")}</span>\n                            </div>\n                            <div class="qb-dateformat-block">\n                                <label class="form-label">\n                                    <span>${t("date.formats.label")}</span>\n                                    <a href="#" class="icon icon-question-circle" data-help="targets/DateFormat.xml"></a>\n                                </label>\n                                <select class="form-control" id="date-format" data-select-options="dropdownAutoWidth: true">\n                                    ${e(n.availableFormats(n.operator))}\n                                </select>\n                            </div>\n                        `)},postCreate:function(e){const t=e.$el.find("input[name=today]");const n=e.$el.find("#date-offset-label");const r=e.$el.find("#date-filter");const o=e.$el.find("#date-format");var s=function(){const s=t.prop("checked");n.toggleClass("hidden",!s);n.parent().find(".form-control").toggleClass("rounded-2",!s);r.off("change.offset keyup.offset");if(!e._updating_input){e._updating_value=true;if(s){r.val("+0")}else{r.val(i(new Date,o.val()))}e._updating_value=false}if(s){r.on("change.offset keyup.offset",(function(e){var t=r.val();if(t){var i=parseInt(t);if(!isNaN(i)){var n=(i<0?"":"+")+i;if(n!=t){r.val(n)}}}else if(e.type==="change"){r.val("+0")}}))}};t.on("change",s)},postOperatorUpdate:function(t,i){var n=t.$el.find("#date-format");n.html(e(i.availableFormats(t.operator)));n.change();n.trigger("change-date-format")},valueSetter:function(e,t){const i=t.slice(0);const n=e.$el.find("input[name=today]");const o=e.$el.find("#date-offset-label");const s=e.$el.find("#date-format");let l=false,c,d,u;if(t.length>r){if(i.shift()==="today"){l=true}u=i.shift();c=i.shift();d=i.shift()}else{u=i.shift();if(u==="today"){l=true;u="+0"}d=i.shift()}o.toggleClass("hidden",!l);o.parent().find(".form-control").toggleClass("rounded-2",!l);a(e,u,c);s.val(d);n.prop("checked",l).change()},valueGetter:function(e){var t=[],i=e.$el.find("#date-filter").val(),n=e.$el.find("#date-format").val(),r=e.$el.find("input[name=today]").is(":checked");if(r){t.push("today");t.push(i);s(i,t)}else{t.push(i)}t.push(n);return t},validate:function(e){if(e.length==2){var t=e[0];var i=e[1];if(t){if("today"!=t&&i){return n(t,i.toUpperCase())?true:["invalid_format"]}else{return true}}else{return["empty_date"]}}else if(e.length==4){var r=e[1];if(!r||r!=parseInt(r)){return["invalid_expression"]}}return true}}},clearInitialRuleSettings:function(){var e=this;e.initialRule=false;$(".initial-rule").removeClass("initial-rule")},isInitial:function(e){if(e.length===1&&e[0].$el.hasClass("initial-rule")){return true}if(this.initialRule&&e.length===1){e[0].$el.addClass("initial-rule");return true}return false},validate:function(e){var t=this;var i=t.model.root.rules;var n=_.clone(e);n=$.extend({skip_filter_validation:true,skip_empty:false},n);if(n.skip_filter_validation){n.skip_empty=true}if(this.isInitial(i)){t.clearErrors();return true}t.clearInitialRuleSettings();return u.call(this,n)},getRuleInput:function(e,t){var i=e.filter;var n=e.filter.validation||{};var r=e.id+"_value_"+t;var s=i.vertical?" class=block":"";var a="";if(typeof i.input==="function"){a=i.input.call(this,e,r)}else if(typeof e.operator.input==="function"){a=e.operator.input.call(this,e,r)}else if(this.optionsByType[e.filter.type]&&typeof this.optionsByType[e.filter.type].input==="function"){a=this.optionsByType[e.filter.type].input.call(this,e,this.optionsByType[e.filter.type],r)}else{switch(i.input){case"radio":case"checkbox":o.iterateOptions(i.values,(function(e,t){a+="<label"+s+'><input type="'+i.input+'" name="'+r+'" value="'+e+'"> '+t+"</label> "}));break;case"select":a=this.getRuleValueSelect(r,e);break;case"textarea":a+='<textarea class="form-control" name="'+r+'"';if(i.size)a+=' cols="'+i.size+'"';if(i.rows)a+=' rows="'+i.rows+'"';if(n.min!==undefined)a+=' minlength="'+n.min+'"';if(n.max!==undefined)a+=' maxlength="'+n.max+'"';if(i.placeholder)a+=' placeholder="'+i.placeholder+'"';a+="></textarea>";break;case"number":a+='<input class="form-control" type="number" name="'+r+'"';if(n.step!==undefined)a+=' step="'+n.step+'"';if(n.min!==undefined)a+=' min="'+n.min+'"';if(n.max!==undefined)a+=' max="'+n.max+'"';if(i.placeholder)a+=' placeholder="'+i.placeholder+'"';if(i.size)a+=' size="'+i.size+'"';a+=">";break;default:a+='<input class="form-control" type="text" name="'+r+'"';if(i.placeholder)a+=' placeholder="'+i.placeholder+'"';if(i.type==="string"&&n.min!==undefined)a+=' minlength="'+n.min+'"';if(i.type==="string"&&n.max!==undefined)a+=' maxlength="'+n.max+'"';if(i.size)a+=' size="'+i.size+'"';a+=">"}}return this.change("getRuleInput",a,e,r)},getRuleValueSelect:function(e,t){var i=this.templates.ruleValueSelect({builder:this,name:e,rule:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleValueSelect",i,e,t)},updateRuleOperator:function(e,t){var i=e.$el.find(p.value_container);if(!e.operator||e.operator.nb_inputs===0){i.hide();e.__.value=undefined}else{i.css("display","");if(i.is(":empty")||!t||typeof t.input==="function"||typeof e.operator.input==="function"||e.operator.nb_inputs!==t.nb_inputs||e.operator.optgroup!==t.optgroup){this.createRuleInput(e)}}if(e.operator){e.$el.find(p.rule_operator).val(e.operator.type);e.__.value=this.getRuleInputValue(e);this.createExtendedOperatorConditions(e)}this.trigger("afterUpdateRuleOperator",e,t);this.trigger("rulesChanged")},createExtendedOperatorConditions:function(e){var i=this;var n=e.$el.find(p.rule_operator_conditions_container);if(e.operator.type==="not_equal"){e.includeEmpty=true;const r=$(`\n                      <div class="form-check form-switch">\n                        <input id="${e.id}_include_empty" type="checkbox" class="rule-include-empty form-check-input" name="${e.id}_include_empty" role="switch" checked="checked"/>\n                        <label class="form-label form-check-label text-truncate" for="${e.id}_include_empty">${t("querybuilder.common.include_empty")}</label>\n                      </div>`);n.html(r);const o=r.find(p.rule_include_empty);o.on("change",(function(){e.includeEmpty=i.getRuleIncludeEmptyValue(e)}));e.$el.find(p.rule_header_inputs).prop("disabled",e.flags.header_readonly)}else{e.includeEmpty=false;n.html("")}},createRuleOperators:function(e){var t=e.$el.find(p.operator_container).empty();if(!e.filter){return}var i=this.getOperators(e.filter);if(!e.filter.skipOperator){var n=$(this.getRuleOperatorSelect(e,i));t.html(n)}if(e.filter.default_operator){e.__.operator=this.getOperatorByType(e.filter.default_operator)}else{e.__.operator=i[0]}e.$el.find(p.rule_operator).val(e.operator.type);this.trigger("afterCreateRuleOperators",e,i);this.applyRuleFlags(e)},createRuleInput:function(e){var t=e.$el.find(p.value_container).empty();e.__.value=undefined;if(!e.filter||!e.operator||e.operator.nb_inputs===0){return}var i=this;var n=$();var r=e.filter;for(var o=0;o<e.operator.nb_inputs;o++){var s=$(this.getRuleInput(e,o));if(r.canBeNegated){var a=i.getNegateInput();t.prepend(a);n=n.add(a)}if(o>0)t.append(this.settings.inputs_separator);t.append(s);if(typeof r.values==="function"){r.values.call(this,s)}n=n.add(s)}t.css("display","");n.on("change "+(r.input_event||""),(function(){if(!e._updating_input){e._updating_value=true;e.negated=i.getNegateValue(e);e.value=i.getRuleInputValue(e);e._updating_value=false}}));if(r.plugin){n[r.plugin](r.plugin_config||{})}this.trigger("afterCreateRuleInput",e);if(r.default_value!==undefined){e.value=r.default_value}else{e._updating_value=true;e.negated=i.getNegateValue(e);e.value=i.getRuleInputValue(e);e._updating_value=false}this.applyRuleFlags(e)},setRuleInputValue:function(e,t){var i=e.filter;var n=e.operator;if(!i||!n){return}e._updating_input=true;if(i.valueSetter){i.valueSetter.call(this,e,t)}else if(typeof e.operator.valueSetter==="function"){e.operator.valueSetter.call(this,e,t)}else if(this.optionsByType[e.filter.type]&&typeof this.optionsByType[e.filter.type].valueSetter==="function"){this.optionsByType[e.filter.type].valueSetter.call(this,e,t)}else{var r=e.$el.find(p.value_container);if(n.nb_inputs===1){t=[t]}for(var s=0;s<n.nb_inputs;s++){var a=o.escapeElementId(e.id+"_value_"+s);switch(i.input){case"radio":r.find("[name="+a+'][value="'+t[s]+'"]').prop("checked",true).trigger("change");break;case"checkbox":if(!$.isArray(t[s])){t[s]=[t[s]]}t[s].forEach((function(e){r.find("[name="+a+'][value="'+e+'"]').prop("checked",true).trigger("change")}));break;default:if(n.multiple&&i.value_separator&&$.isArray(t[s])){t[s]=t[s].join(i.value_separator)}r.find("[name="+a+"]").val(t[s]).trigger("change");break}}}this.setNegated(e);e._updating_input=false},getRuleInputValue:function(e){var t=e.filter;var i=e.operator;var n=[];if(t.valueGetter){n=t.valueGetter.call(this,e)}else if(typeof e.operator.valueGetter==="function"){n=e.operator.valueGetter.call(this,e)}else if(this.optionsByType[e.filter.type]&&typeof this.optionsByType[e.filter.type].valueGetter==="function"){n=this.optionsByType[e.filter.type].valueGetter.call(this,e)}else{var r=e.$el.find(p.value_container);for(var s=0;s<i.nb_inputs;s++){var a=o.escapeElementId(e.id+"_value_"+s);var l;switch(t.input){case"radio":n.push(r.find("[name="+a+"]:checked").val());break;case"checkbox":l=[];r.find("[name="+a+"]:checked").each((function(){l.push($(this).val())}));n.push(l);break;case"select":if(t.multiple){l=[];r.find("[name="+a+"] option:selected").each((function(){l.push($(this).val())}));n.push(l)}else{n.push(r.find("[name="+a+"] option:selected").val())}break;default:n.push(r.find("[name="+a+"]").val())}}n=n.map((function(e){if(i.multiple&&t.value_separator&&typeof e=="string"){e=e.split(t.value_separator)}if($.isArray(e)){return e.map((function(e){return o.changeType(e,t.type)}))}else{return o.changeType(e,t.type)}}));if(i.nb_inputs===1){n=n[0]}if(t.valueParser){n=t.valueParser.call(this,e,n)}}return this.change("getRuleValue",n,e)},getRuleIncludeEmptyValue:function(e){return e.$el.find(p.rule_include_empty).is(":checked")},validateValue:function(e,t){var i=e.filter.validation||{};var n=true;if(i.callback){n=i.callback.call(this,t,e)}else if(typeof e.operator.validate==="function"){n=e.operator.validate.call(this,t,e)}else if(this.optionsByType[e.filter.type]&&typeof this.optionsByType[e.filter.type].validate==="function"){n=this.optionsByType[e.filter.type].validate.call(this,t,e)}else{n=this._validateValue(e,t)}return this.change("validateValue",n,t,e)},getRules:function(e){e=$.extend({get_flags:false,allow_invalid:false,skip_empty:false},e);var t=this.validate(e);if(!t&&!e.allow_invalid){return null}var i=this;var n=function t(n){var r={condition:n.condition,rules:[]};if(n.data){r.data=$.extendext(true,"replace",{},n.data)}if(e.get_flags){var o=i.getGroupFlags(n.flags,e.get_flags==="all");if(!$.isEmptyObject(o)){r.flags=o}}n.each((function(t){if(!t.filter&&e.skip_empty){return}var n=null;if(!t.operator||t.operator.nb_inputs!==0){n=t.value}var o={id:t.filter?t.filter.id:null,field:t.filter?t.filter.field:null,type:t.filter?t.filter.type:null,input:t.filter?t.filter.input:null,operator:t.operator?t.operator.type:null,value:n,includeEmpty:t.includeEmpty};if(t.filter&&t.filter.data||t.data){o.data=$.extendext(true,"replace",{},t.filter.data,t.data)}if(t.filter&&t.filter.canBeNegated){o.negated=t.negated}if(e.get_flags){var s=i.getRuleFlags(t.flags,e.get_flags==="all");if(!$.isEmptyObject(s)){o.flags=s}}r.rules.push(i.change("ruleToJson",o,t))}),(function(i){var n=t(i);if(n.rules.length!==0||!e.skip_empty){r.rules.push(n)}}),this);return i.change("groupToJson",r,n)}(this.model.root);n.valid=t;return this.change("getRules",n)},setRules:function(e,t){t=$.extend({allow_invalid:false},t);this.setupInitialRule(e);if($.isArray(e)){e={condition:this.settings.default_condition,rules:e}}if(!e||!e.rules||e.rules.length===0&&!this.settings.allow_empty){o.error("RulesParse","Incorrect data object passed")}this.clear();this.setRoot(false,e.data,this.parseGroupFlags(e));this.applyGroupFlags(this.model.root);e=this.change("setRules",e,t);var i=this;(function e(n,r){if(r===null){return}if(n.condition===undefined){n.condition=i.settings.default_condition}else if(i.settings.conditions.indexOf(n.condition)==-1){o.error(!t.allow_invalid,"UndefinedCondition",'Invalid condition "{0}"',n.condition);n.condition=i.settings.default_condition}r.condition=n.condition;n.rules.forEach((function(n){var s;if(n.rules!==undefined){if(i.settings.allow_groups!==-1&&i.settings.allow_groups<r.level){o.error(!t.allow_invalid,"RulesParse","No more than {0} groups are allowed",i.settings.allow_groups);i.reset()}else{s=i.addGroup(r,false,n.data,i.parseGroupFlags(n));if(s===null){return}i.applyGroupFlags(s);e(n,s)}}else{if(!n.empty){if(n.id===undefined){o.error(!t.allow_invalid,"RulesParse","Missing rule field id");n.empty=true}if(n.operator===undefined){n.operator="equal"}}s=i.addRule(r,n.data,i.parseRuleFlags(n));if(s===null){return}if(n.id){if(!n.empty){s.filter=i.getFilterById(n.id,!t.allow_invalid)}if(s.filter){s.operator=i.getOperatorByType(n.operator,!t.allow_invalid);if(!s.operator){s.operator=i.getOperators(s.filter)[0]}}s.negated=n.negated;if(s.operator&&s.operator.nb_inputs!==0){s.includeEmpty=!!n.includeEmpty;if(n.value!==undefined){s.value=n.value}else if(s.filter.default_value!==undefined){s.value=s.filter.default_value}}}if(i.change("jsonToRule",s,n)!=s){o.error("RulesParse","Plugin tried to change rule reference")}}}));if(i.change("jsonToGroup",r,n)!=r){o.error("RulesParse","Plugin tried to change group reference")}})(e,this.model.root);this.validate();this.trigger("afterSetRules")},getNegateValue:function(e){var t=e.$el.find("select.negate"),i;if(t.length!==0){i=t.val()==="true"}return i},getNegateInput:function(){return $(`\n                  <div class="qb-input-negate">\n                    <select class="form-control js-select negate" data-select-options="dropdownAutoWidth: true">\n                      <option value="false">${t("defaults.yes")}</option>\n                      <option value="true">${t("defaults.no")}</option>\n                    </select>\n                  </div>\n                `)},setNegated:function(e){var t=e.$el.find("select.negate");if(t.length!==0){t.val(""+e.negated)}},displayError:function(e){if(this.settings.display_errors){if(e.error===null){e.$el.removeClass("has-error")}else{var t=this.translate("errors",e.error[0]);t=this.constructor.utils.fmt(t,e.error.slice(1));t=this.change("displayError",t,e.error,e);e.$el.addClass("has-error").find(this.constructor.selectors.error_container).eq(0).attr("data-tooltip",t);AGN.Lib.CoreInitializer.run("tooltip",e.$el)}}},bindEvents:function(){h.call(this);var e=this;this.model.on("update",(function(t,i,n){if(i instanceof c.Rule&&n==="includeEmpty"){e.updateRuleIncludeEmpty(i)}}))},findRuleByField:function(e,t,i){var n=function(e){return e.hasOwnProperty("rules")};if(n(e)){var r=this;return e.rules.find((function(e){if(n(e)){return i?r.findRuleByField(e,i):false}else{return e.field&&e.field===t}}))}else{return e.field&&e.field===t}},deleteRuleByField:function(e,t,i){var n=this;if(!e){e=n.model.root;if(!e){return}}var r=false;e.each("reverse",(function(e){if(e&&e.filter&&e.filter.id==t){r&=n.deleteRule(n.getModel(e.$el))}}),(function(e){r&=n.deleteRuleByField(e,t,i)}),n);return!!r},setOrReplaceRule:function(e,t,i){if(!e){e=this.getRules({allow_invalid:true,skip_empty:true})}if(t&&t.id){var n=this.findRuleByField(e,t.id,i);if(n){$.extend(n,t)}else{e.rules.push(t)}this.setRules(e);return true}else{return false}},containsNotEmptyRule:function(e){var t=this;var i=t.getModel(e);if(i.rules&&i.rules.length){return i.rules.every((function(e){if(e.hasOwnProperty("rules")){return t.containsNotEmptyRule(e)}else{return!!e.filter}}))}else{return!!i.filter}}});c.prototype.updateRuleIncludeEmpty=function(e){var t=e.$el.find(p.rule_include_empty);t.prop("checked",e.includeEmpty);this.trigger("rulesChanged")}}));function e(e){var i=[];e.forEach((function(e){var n=$("<option />");n.text(t("date.formats."+e));n.val(e);i.push($("<div/>").append(n).html())}));return i.join("")}function i(e,t){return t.replace("DD",AGN.Lib.Helpers.pad(e.getDate(),2)).replace("MM",AGN.Lib.Helpers.pad(e.getMonth()+1,2)).replace("YYYY",AGN.Lib.Helpers.pad(e.getFullYear(),4))}function n(e,t){if(!e){return false}var i=o(t);if(i){for(var n=0;n<i.length;n++){var r=i[n];if(r.isDigitFragment){if(r.isLenient){var s=e.match("^\\d{1,"+r.lexeme.length+"}");if(s){e=e.substring(s[0].length)}else{return false}}else{if(e.length<r.lexeme.length){return false}if(!e.substr(0,r.lexeme.length).match(/^\d+$/)){return false}e=e.substring(r.lexeme.length)}}else{if(e.startsWith(r.lexeme)){e=e.substring(r.lexeme.length)}else{return false}}}return!e}return false}function r(e){var t=["DD","MM","YYYY",".","-","_"];if(e){for(var i=0;i<t.length;i++){if(e.startsWith(t[i])){return t[i]}}}return false}function o(e){var t=["DD","MM","YYYY"];var i=[];while(e){var n=r(e);if(n){var o=false;var s=false;if(t.includes(n)){o=true;s=true;if(i.length){var a=i[i.length-1];if(a.isDigitFragment){a.isLenient=false;s=false}}}i.push({lexeme:n,isDigitFragment:o,isLenient:s})}else{return false}e=e.substring(n.length)}return i.length?i:false}})();AGN.Lib.DomInitializer.new("recipient-report-initializer",(function(e){if(!$("body").attr("bs-theme")){return}const t=e.find("iframe");t.on("load.iframe",(function(){i(t)}));function i(e){const t=e.contents().find("body");const i=t.find("center");if(i.length){t.css("background-color","var(--bs-body-bg)");i.css("background-color","var(--bs-body-bg)")}else{e.contents().find("body").css("color","#fff")}}}));AGN.Lib.CoreInitializer.new("relative-href",(function(e){if(!e){e=$(document)}e.find("a[data-relative]").each((function(){var e=$(this);e.attr("href",AGN.url(e.attr("href")));e.removeAttr("data-relative")}))}));AGN.Lib.CoreInitializer.new("restore",(function(e=$(document)){const t=AGN.Lib.Storage;_.each(e.find("[data-restore-fields]"),(e=>{t.restoreChosenFields($(e));i($(e))}));function i(e){return e.on("change",(function(){return t.saveChosenFields($(this))}))}}));(()=>{const e=AGN.Lib.Scrollbar;AGN.Lib.CoreInitializer.new("scrollable",["table"],(function(t=$(document)){_.each(t.find(".js-scrollable, .table-wrapper__body, .ag-body-viewport"),(t=>{const i=$(t);const n=e.get(i,false);if(AGN.Lib.Helpers.isMobileView()){n?.destroy();return}if(n){n.update()}else{new e(i)}}))}))})();(()=>{const e=AGN.Lib.Template;const i=AGN.Lib.CoreInitializer;const n="agn:select-scrollbar";i.new("select",["template"],(function(a=$(document)){_.each(a.all("select"),(a=>{const d=$(a);if(d.data("select2")){d.select2("destroy")}let u={placeholder:d.attr("placeholder"),minimumResultsForSearch:d.hasClass("js-select")?10:0,showSearchIcon:true,width:"100%",searchInputPlaceholder:t("tables.searchOoo"),dropdownCssClass:":all:",selectionCssClass:":all:",dropdownParent:l(d),preventPlaceholderClear:false};if(d.is("[data-sort]")){if(d.data("sort")==="alphabetic"){u.sorter=function(e){e.sort(((e,t)=>{if($(e.element).is("[data-no-sort]")){return-1}else if($(t.element).is("[data-no-sort]")){return 1}return e.text.toLowerCase().localeCompare(t.text.toLowerCase())}));return e}}}if(d.prop("multiple")){u.matcher=o}const h=d.data("result-template");u.templateResult=function(t){if(t.loading){return t.text}if($(t.element).hasClass("hidden")){return null}if(!h){return t.text}return e.dom(h,{element:t.element,isDisabled:t.disabled,text:t.text,title:t.title,value:t.id})};const p=d.data("selection-template");u.templateSelection=function(t){return e.dom(p||"select2-result",{element:Array.isArray(t.element)?t.element[0]:t.element,isDisabled:t.disabled,text:t.text,title:t.title,value:t.id})};if(d.hasClass("dynamic-tags")){d.find("option").prop("selected",true);u.tags=true;u.preventPlaceholderClear=true}if(d.is("[data-select-options]")){const e=AGN.Lib.Helpers.objFromString(d.data("select-options"));u=_.extend(u,e)}if(u.alignDropdownRight){$(u.dropdownParent).addClass("align-dropdown-right-container")}if(u.tags&&!u.tokenSeparators){u.tokenSeparators=[","," ",";"]}if(d.is("[data-select-tree]")){r(d);d.select2ToTree(u)}else{d.select2(u)}if(d.is("[data-show-create-btn]")||u.tags){const e=s(d);if(u.tags){AGN.Lib.Tooltip.createTip(e,t("defaults.add"));if(u.selectOnClose){d.on("select2:unselect",(()=>{d.find("option:not(:selected)").remove()}))}else{e.on("click",(()=>{const e=d.data("select2").selection.$search.val();AGN.Lib.Select.get(d).selectOption(e)}))}}}if(d.hasClass("has-arrows")){new c(d)}d.on("select2:open",(e=>{const t="scroll.select2";$(e.target).parents().off(t);$(window).off(t);window.setTimeout((()=>{const e=d.data("select2").$dropdown.find(".select2-results__options");d.data(n,new AGN.Lib.Scrollbar(e,{wheelSpeed:.2}))}),20)}));d.on("select2:closing",(e=>d.data(n)?.destroy()));d.on("change.select2",(e=>i.run("truncated-text-popover",d.next(".select2"))));const f=d.find("option[data-exclusive]");if(f.exists()){const e=()=>{const e=f.filter(":selected");const t=d.find("option");t.prop("disabled",false);if(e.exists()){d.find("option").not(e).prop("disabled",true)}else if(t.filter(":selected").exists()){f.prop("disabled",true)}};e();d.on("select2:select",e);d.on("select2:unselect",e)}}))}));function r(e){const t=e.find("option");const i=t.map((function(){return String($(this).data("parent")||"")})).get();t.each((function(){const e=$(this);if(e.val()&&i.includes(e.val())){e.attr("data-pup","parent")}else{if(e.data("parent")){e.attr("data-pup",e.data("parent"))}}}))}function o(e,t){if(t.selected){return null}if($.trim(e.term)===""){return t}const i=e.term.toLowerCase();const n=t.text.toLowerCase();return n.includes(i)?t:null}function s(e){const t=a(e.data("show-create-btn"));e.next(".select2-container").find(".select2-search").addClass("flex-grow-1").wrap($('<div class="d-flex gap-1"></div>')).parent().append(t);return t}function a(e){return $(`\n        <button type="button" class="btn btn-icon btn-primary" ${e}>\n          <i class="icon icon-plus"></i>\n        </button>\n    `)}function l(e){if(e.closest(".modal").exists()){return e.closest(".modal")}if(e.closest(".dropdown-menu").exists()){return e.closest(".dropdown-menu")}return"body"}class c{constructor(e){this.$select=e;this.#ot();this.#st();this.$select.next(".select2").find(".selection").prepend(this.$prevBtn).append(this.$nextBtn);this.$select.on("change",(()=>this.toggleArrows()));this.toggleArrows();this.$select.data("selectWithArrows",this)}toggleArrows(){const e=this.$select.prop("selectedIndex");this.$prevBtn.prop("disabled",e===0);this.$nextBtn.prop("disabled",e===this.$select.find("option").length-1)}#ot(){this.$prevBtn=this.#at(true);this.$prevBtn.on("click",(()=>this.#lt()))}#st(){this.$nextBtn=this.#at(false);this.$nextBtn.on("click",(()=>this.#ct()))}#at(e){return $(`\n         <button class="btn btn-outline-primary btn-icon btn-select-control">\n           <i class="icon icon-caret-${e?"left":"right"}"></i>\n         </button>\n       `)}#ct(){this.#dt(false)}#lt(){this.#dt(true)}#dt(e){const t=e?this.$prevBtn:this.$nextBtn;if(t.prop("disabled")){return}this.$select.prop("selectedIndex",this.$select.prop("selectedIndex")+(e?-1:1)).trigger("change");this.toggleArrows()}}})();AGN.Lib.DomInitializer.new("session-timer",(function(){const e=10*60*1e3;const t=5*1e3;const i=401;const n=501;const r=this.config;const o=this.config.creationTime;const s=this.config.lastAccessedTime;let a=this.config.maxInactiveInterval;let l;let c=false;let d=true;let u=false;let h;if(r&&o&&s&&a){l=a*1e3+Date.now();p()}function p(){setInterval((function(){const i=Date.now();const n=l>i?l-i:0;if(!h){h=new y}if((!d||n<=e)&&!c&&!u){h.showTimerBlock(n)}if(!u&&!c&&l+t>i&&l<i){h.showLoading()}if(!c&&!u&&l+t<i){f()}}),1e3)}function f(){$.ajax({url:AGN.url("/session/info.action"),global:false,beforeSend:g,success:m,error:v,complete:b})}function g(){u=true}function m(e){if(!!e){a=e.maxInactiveInterval;l=Date.now()+e.maxInactiveInterval*1e3;c=false}else{c=true;h.showSessionExpired()}}function v(e){if(e.status===i){c=true;h.showSessionExpired()}}function b(){u=false;d=false}$(document).ajaxComplete((function(e,t){if(!e.preventSessionTimer&&!c&&!u&&(t.status!==i&&t.status<n)){l=a*1e3+Date.now()}e.preventSessionTimer=true}));class y{constructor(){this.timerBlock=$("#session-timer-block");this.timeLabel=$("#session-time-label");this.isSessionExpiredNotification=false;this.refreshIconClass="icon icon-spinner icon-pulse"}showTimerBlock(e){this.timerBlock.removeClass("hidden");this.printTimerText(e)}showSessionExpired(){this.printTimerText(0);if(!this.isSessionExpiredNotification){const e=AGN.Lib.Modal.fromTemplate("session-expired");e.on("modal:close",(()=>AGN.Lib.Page.reload(AGN.url("/logon.action"))));this.isSessionExpiredNotification=true}}showLoading(){const e=`<i class="${this.refreshIconClass}"></i>`;this.changeTimeFieldContent(e)}printTimerText(e){let t="00:00";if(e>0){const i=new Date(e);const n=this.formatTimeComponent(i.getUTCMinutes());const r=this.formatTimeComponent(i.getUTCSeconds());t=`${n}:${r}`}this.changeTimeFieldContent(t)}formatTimeComponent(e){return e>0?e<10?"0"+e:e:"00"}changeTimeFieldContent(e){this.timeLabel.html(e)}}return false}));AGN.Lib.CoreInitializer.new("slider",(function(e=$(document)){_.each(e.find("[data-toggle-checkboxes]"),(function(e){const r=$(e);n(r);i(r).click((()=>n(r)));r.on("update-toggle-all",(()=>n(r)));t(r);r.closest(".form-switch").toggle(i(r).length>0)}));function t(e){e.on("click",(function(){const e=$(this);_.each(e.closest(".tile").find(".tile-body [type=checkbox]:enabled:visible"),(t=>$(t).prop("checked",e.is(":checked")).trigger("change")))}))}function i(e){return e.closest(".tile").find(".tile-body").find(".form-check-input:visible")}function n(e){const t=i(e);e.prop("checked",r(t));e.prop("disabled",o(t))}function r(e){return _.every(e.filter(":not(:disabled)"),(e=>e.checked))}function o(e){return e.filter(":not(:disabled)").length===0}}));AGN.Lib.CoreInitializer.new("switchable-input",(function(e=$(document)){const t=AGN.Lib.ToggleVisField.STR;t.DATA_SHOW_ON_SWITCH="data-show-on-switch";t.DATA_HIDE_ON_SWITCH="data-hide-on-switch";t.BODY_SELECTOR=".switchable-input__body";class i{constructor(e){const t=e.data("switchableInput");if(t){return t}this.$el=e;this.#rt()}#rt(){this.$el.attr("data-field","toggle-vis");this.$checkbox.attr(t.DATA_FIELD_VIS,"").attr(t.DATA_FIELD_VIS_SHOW,this.#ut()).attr(t.DATA_FIELD_VIS_HIDE,this.#ht());this.$switch.prepend(this.#pt());this.$el.data("switchableInput",this)}#ut(){return this.isSwapMode?`[${t.DATA_SHOW_ON_SWITCH}]`:t.BODY_SELECTOR}#ht(){return this.isSwapMode?`[${t.DATA_HIDE_ON_SWITCH}]`:""}#pt(){return $('<div class="hidden"></div>').attr(t.DATA_FIELD_VIS_DEFAULT,"").attr(t.DATA_FIELD_VIS_HIDE,this.#ut()).attr(t.DATA_FIELD_VIS_SHOW,this.#ht())}get $switch(){return this.$el.find(".switchable-input__switch")}get $checkbox(){return this.$switch.find('[role="switch"]')}get isSwapMode(){return this.$body.find(`[${t.DATA_SHOW_ON_SWITCH}]`).length>0&&this.$body.find(`[${t.DATA_HIDE_ON_SWITCH}]`).length>0}get $body(){return this.$el.find(t.BODY_SELECTOR)}}_.each(e.find(".switchable-input"),(function(e){new i($(e))}))}));AGN.Lib.CoreInitializer.new("switchable-tile",(function(e=$(document)){const t=AGN.Lib.ToggleVisField.STR;t.DATA_SHOW_ON_SWITCH="data-show-on-switch";t.DATA_HIDE_ON_SWITCH="data-hide-on-switch";class i{constructor(e){const t=e.data("switchableTile");if(t){return t}this.$el=e;this.#rt()}#rt(){this.$el.attr("data-field","toggle-vis");this.$checkbox.attr(t.DATA_FIELD_VIS,"").attr(t.DATA_FIELD_VIS_SHOW,this.#ut()).attr(t.DATA_FIELD_VIS_HIDE,this.#ht());this.$switch.prepend(this.#pt());this.$el.data("switchableTile",this)}#ut(){return this.isSwapMode?`[${t.DATA_SHOW_ON_SWITCH}]`:".tile-body"}#ht(){return this.isSwapMode?`[${t.DATA_HIDE_ON_SWITCH}]`:""}#pt(){return $('<div class="hidden"></div>').attr(t.DATA_FIELD_VIS_DEFAULT,"").attr(t.DATA_FIELD_VIS_HIDE,this.#ut()).attr(t.DATA_FIELD_VIS_SHOW,this.#ht())}get $switch(){return this.$el.find(".tile-header .form-switch:first-child").first()}get $checkbox(){return this.$switch.find('[role="switch"]')}get isSwapMode(){return this.$body.find(`[${t.DATA_SHOW_ON_SWITCH}]`).length>0&&this.$body.find(`[${t.DATA_HIDE_ON_SWITCH}]`).length>0}get $body(){return this.$el.find(".tile-body")}}_.each(e.find(".tile--switchable"),(e=>new i($(e))))}));AGN.Lib.CoreInitializer.new("sync",["ace"],(function(e){if(!e){e=$(document)}_.each(e.find("[data-sync]"),(function(e){var t=$(e),i=$(t.data("sync")),n=t.data("_editor");if(n){n.val(i.val())}else if(t?.prop("type")?.trim()==="checkbox"){t.prop("checked",i.val()==="true")}else{t.val(i.val())}}))}));(()=>{AGN.Lib.CoreInitializer.new("tab-related",(function(e=$(document)){_.each(e.find("[data-tab-related]"),(e=>{const t=$(e);const i=$(t.data("tab-related"));i.on("tile:show",(()=>t.removeClass("hidden")));i.on("tile:hide",(()=>t.addClass("hidden")))}))}))})();AGN.Lib.CoreInitializer.new("tab-toggle",(function(e=$(document)){_.each(e.find("[data-toggle-tab]"),(e=>AGN.Lib.Tab.init($(e))))}));(function(){AGN.Lib.CoreInitializer.new("table-column-manager",(function(e=$(document)){const t=AGN.Lib.TableColumnManager;e.all(t.SELECTOR).each((function(){new t($(this))}))}))})();(()=>{class e{static MIN_WIDTH=40;constructor(e){this.el=e;this.$el=$(this.el);this.$siblings=this.$el.siblings().filter((function(){return $(this).is(":visible")}));this.$el.addClass("resizable");this._separatorWidth=parseInt(this.$el.css("--table-separator-width"))}get separatorWidth(){return this._separatorWidth}startResize(t,i){this.$nextSibling=this.$el.nextAll(":visible").filter(((e,t)=>!$(t).css("--table-not-resizable-cell"))).first();this.$prevSibling=this.$el.prevAll(":visible").filter(((e,t)=>!$(t).css("--table-not-resizable-cell"))).first();this.siblingsWidths=this.#ft();const n=this.el.offsetWidth;this._resizeHandler=r=>{const o=Math.max(e.MIN_WIDTH,n+(r.clientX-t));if(o<n){this.#gt(n,o)}else{this.#mt(n,o,i)}};document.addEventListener("mousemove",this._resizeHandler)}stopResize(){document.removeEventListener("mousemove",this._resizeHandler)}destroy(){this.el.style.width="";this.$el.removeClass("resizable")}#gt(e,t){const i=this.$nextSibling.exists()?this.$nextSibling:this.$prevSibling;i.get(0).style.width=`${this.#vt(i)+(e-t)}px`;this.el.style.width=`${t}px`}#mt(t,i,n){if(this.$nextSibling.exists()){let n=this.#vt(this.$nextSibling)-(i-t);if(n<e.MIN_WIDTH){i-=e.MIN_WIDTH-n;n=e.MIN_WIDTH}this.$nextSibling.get(0).style.width=`${n}px`;this.el.style.width=`${i}px`;return}if(this.#bt()+i<=n){this.el.style.width=`${i}px`}}#ft(){const e={};this.$siblings.each(((t,i)=>{e[$(i).index()]=i.clientWidth}));return e}#vt(e){return this.siblingsWidths[e.index()]}#bt(){return Object.values(this.siblingsWidths).reduce(((e,t)=>e+t),0)}}class t{static DATA_KEY="agn:table-cols-resizer";constructor(e){this.table=e.get(0);this.$table=e;this.$cols=e.find("th:visible");this.tableId=e.attr("id");this.$fitContentCols=this.$cols.filter(((e,t)=>$(t).hasClass("fit-content")));this.$nonResizableCols=this.$cols.filter(((e,t)=>$(t).css("--table-not-resizable-cell")==="true"));this.$resizableCols=this.#yt();e.data(t.DATA_KEY,this)}resize(){this._resizableColumns=[];document.fonts.ready.then((()=>{this.$resizableCols.each(((e,t)=>this.#wt(t)));this.#Ct(this.$fitContentCols);this.#Ct(this.$nonResizableCols);this.$table.addClass("table-layout-fixed");this.#_t();AGN.Lib.CoreInitializer.run("truncated-text-popover",this.$table.parent())}))}#yt(){let e=this.$cols.not(this.$nonResizableCols).not(this.$cols.last());const t=e.last();const i=t.next();if(i.exists()&&i.is(this.$nonResizableCols)){e=e.not(t)}return e}#wt(t){const i=new e(t);this._resizableColumns.push(i);$(t).on("mousedown",(e=>{if(e.offsetX>=t.offsetWidth-i.separatorWidth){this.#St();i.startResize(e.clientX,this.table.clientWidth);this._mouseupHandler=()=>this.#At(i);document.addEventListener("mouseup",this._mouseupHandler)}}))}#St(){if(!this._widthsWasSetToStyles){this.#Ct(this.$resizableCols);this._widthsWasSetToStyles=true}}#Ct(e){e.each(((e,t)=>{t.style.width=getComputedStyle(t).width}))}static get(e){return e.data(this.DATA_KEY)}destroy(){this._resizableColumns.forEach((e=>e.destroy()));this.$resizableCols.off("mousedown");this.$nonResizableCols.each(((e,t)=>t.style.width=""));this.$table.removeClass("table-layout-fixed");this.$table.data(t.DATA_KEY,null)}#At(e){e.stopResize();document.removeEventListener("mouseup",this._mouseupHandler);this.#xt();AGN.Lib.CoreInitializer.run("truncated-text-popover",this.$table.parent())}#xt(){if(!this.tableId){return}AGN.Lib.Storage.set(this.#m(),{width:this.table.clientWidth,colsCount:this.$cols.length,widths:this.#Et()})}#_t(){if(!this.tableId){return}const e=AGN.Lib.Storage.get(this.#m());if(!e||this.table.clientWidth!==e.width||this.$cols.length!==e.colsCount){return}if(!_.isEmpty(_.xor(Object.keys(e.widths),this.#Tt()))){return}this.$cols.each((function(){const t=e.widths[$(this).text()];if(t){this.style.width=`${t}px`}}))}#m(){return`table-#${this.tableId}-widths`}#Et(){const e={};this.$resizableCols.each((function(){e[$(this).text()]=this.clientWidth}));return e}#Tt(){return this.$resizableCols.map(((e,t)=>$(t).text())).get()}}AGN.Lib.CoreInitializer.new("table-cols-resizer",(function(e=$(document)){e.all(".table--borderless").each((function(){const e=$(this);t.get(e)?.destroy();if(!e.hasClass("table--preview")&&!AGN.Lib.Helpers.isMobileView()){new t(e).resize()}}))}))})();(()=>{AGN.Lib.CoreInitializer.new("table-row-actions",(function(t=$(document)){t.find(".js-table tr").each((function(){const t=$(this);e(t);i(t)}))}));function e(e){const i=e.find("[data-view-row]");if(!i.exists()){return}e.data("link",i.attr("href"));if(i.data("view-row")==="page"){e.wrap(`<a class="table-row-wrapper" href="${i.attr("href")}"></a>`)}else if(i.data("modal")||i.data("action")){t(i,e)}i.remove()}function t(e,t){const i="data-";$.each(e[0].attributes,((e,n)=>{if(n.name.startsWith(i)&&n.name!=="data-view-row"){const e=n.name.substring(i.length);t.attr(`data-${e}`,n.value)}}))}function i(e){const t=e.find(".js-row-popover");if(!t.exists()){return}const i=_.uniqueId("agn-table-row-popover-");AGN.Lib.Template.register(i,t.html());e.attr("data-popover","");e.attr("data-popover-options",JSON.stringify({html:true,delay:{show:300,hide:100},templateName:i}))}})();(()=>{AGN.Lib.CoreInitializer.new("table",["js-table"],(function(i=$(document)){if(AGN.Lib.Storage.get("truncate-table-text")===false){t(i)}e(i)}));function e(e){e.all("tr.empty").each((function(){const e=$(this);const t=e.closest("table").find("th:visible").length;e.find("td").attr("colspan",t)}))}function t(e){e.all("[data-toggle-table-truncation]").each(((e,t)=>{$(t).closest(".table-wrapper").find("table, .ag-body").toggleClass("no-truncate")}))}})();(()=>{const e={header_readonly:true,filter_readonly:true,condition_readonly:true,operator_readonly:true,value_readonly:true,no_delete:true,no_add_rule:true,no_sortable:true,no_add_group:true};AGN.Lib.DomInitializer.new("target-group-query-builder",(function(i){const n=this.config;const r=AGN.Lib.Form.getWrapper(i);const o="#targetgroup-querybuilder";const s=$(o);const a=n.mailTrackingAvailable;const l=n.isTargetGroupLocked;_.each(s,(e=>{const t=$(e);const i=C();const r=p(n.queryBuilderFilters,{mail_tracking_available:a});const o=w(JSON.parse(n.queryBuilderRules),l);t.queryBuilder({filters:r,allow_empty:true,operators:i,readonly:l,plugins:{sortable:{inherit_no_drop:true,inherit_no_sortable:true}},rules:o});AGN.Lib.CoreInitializer.run("select",t);t.on("afterSetRules.queryBuilder afterUpdateRuleFilter.queryBuilder afterCreateRuleFilters.queryBuilder afterAddRule.querybuilder",(function(e){AGN.Lib.CoreInitializer.run("select",$(this))}));t.on("link-values-set",(function(e){AGN.Lib.CoreInitializer.run("select",$(e.target))}));t.on("mailing-values-set values-set ",(function(e){AGN.Lib.CoreInitializer.run("select",$(e.target))}));t.on("change-date-format",(function(e){AGN.Lib.CoreInitializer.run("select",$(e.target))}));t.on("enterdown","input",(function(e){return false}))}));const c=function(e,t){t=$.extend({ignore_qb_validation:false,skip_empty:false},t);_.each($(o),(function(i){const n=$(i);const r=n.prop("queryBuilder");if(!d(e,r,t,n)){return false}}))};s.on("qb:validation",c);r.off().on("validation",c);function d(e,t,i,n){t.clearInitialRuleSettings();if(i.ignore_qb_validation){return true}else if(t.validate({skip_filter_validation:false,skip_empty:i.skip_empty})){n.find("#queryBuilderRules").val(u(t,i.skip_empty));return true}else{n.trigger("qb:invalidrules");e.preventDefault();return false}}function u(e,t){return JSON.stringify(e.getRules({allow_invalid:true,skip_empty:t}))}function h(e,t){if(e.is("select")){AGN.Lib.Select.get(e).selectValueOrSelectFirst(t)}else{e.val(t)}}function p(e,t){if(e===null){e=[{id:"?",label:"?",type:"string"}]}else{const t={};e=e.filter((function(e){if(t[e.id]){return false}t[e.id]=true;return true}))}g(e,t);return $.extend([],e)}function f(t){if(t){t.flags=e;_.each(t.rules,(function(t){t.flags=e;if(t.hasOwnProperty("condition")){f(t)}}))}return t}function g(e,i){i=$.extend({mail_tracking_available:false},i);const n=function(e){return $(`\n          <div class="qb-select-container">\n            <select id="${e.id}" class="form-control mailings js-select" data-select-options="dropdownAutoWidth: true"></select>\n          </div>\n        `)};const r=function(e){const t=$('<select class="form-control auto-imports js-select"></select>');t.attr("id",e.id);return t};const s=function(e){return e.$el.find(".mailings :selected").val()};const a=function(e){return e.$el.find(".auto-imports :selected").val()};const l=function(e){const t={},i={},n=-1;$(o).on("values-set",e,(function(r){if($.isEmptyObject(i)){h($(r.target),n)}else{const o=$(r.target).attr("id"),s=i[o],a=s?s.$el.find(e):$(r.target);h(a,t[o]||n)}}));return function(n,r){const o=n.$el.find(e);t[n.id]=r;i[n.id]=n;h(o,r)}};const c=l("select.mailings");const d=l("select.auto-imports");const u={"finished auto-import":{type:"string",input_event:"values-setup-finished",input:r,values:function(e){v(e).done((function(){e.trigger("values-setup-finished")}))},valueSetter:d,valueGetter:a,canBeNegated:true,skipOperator:true},"received mailing":{type:"string",input_event:"values-setup-finished",input:n,values:function(e){const t=e.find("select.mailings");m(t).done((()=>t.trigger("values-setup-finished")))},valueSetter:c,valueGetter:s,canBeNegated:true,skipOperator:true},"opened mailing":{type:"string",input_event:"values-setup-finished",input:n,values:function(e){const t=e.find("select.mailings");m(t).done((()=>t.trigger("values-setup-finished")))},valueSetter:c,valueGetter:s,canBeNegated:i.mail_tracking_available,skipOperator:true},"clicked in mailing":{type:"string",input_event:"values-setup-finished",valueSelector:function(e,t){const i=["mailingID","linkID"];return e+"_"+i[t]},input:function(e){return $(`\n             <div class="qb-select-container">\n               <select id="${e.filter.valueSelector(e.id,0)}" class="form-control js-select mailings" data-rule-id="${e.id}" data-select-options="dropdownAutoWidth: true"></select>\n             </div>\n             <label class="form-label d-flex align-items-center">Links</label>\n             <div class="qb-select-container">\n               <select id="${e.filter.valueSelector(e.id,1)}" class="form-control js-select links" data-rule-id="${e.id}" data-select-options="dropdownAutoWidth: true"></select>\n             </div>\n            `)},values:function(e){const i=e.find("select.mailings");const n=AGN.Lib.Select.get(i);i.change((function(){const i=n.getSelectedValue();y(i,(function(i){const n=e.find("select.links");const r=AGN.Lib.Select.get(n);const o=[{id:-1,text:t("querybuilder.common.anyLink")}];$.each(i,(function(e,t){o.push({id:t.id,text:t.url})}));r.setOptions(o);n.trigger("link-values-set")}))}));m(i,(function(e){const t=[];e.forEach((function(e){t.push({id:e.mailingID,text:e.shortname})}));n.setOptions(t);i.trigger("mailing-values-set")}))},valueGetter:function(e){const t=0,i=1,n=[];n[t]=e.$el.find("#"+e.filter.valueSelector(e.id,t)).val();n[i]=e.$el.find("#"+e.filter.valueSelector(e.id,i)).val();return n},valueSetter:function(){const e=0,t=1,i={},n={};const r=function(e,t){i[e.id]=t;n[e.id]=e};$(o).on("mailing-values-set",(function(t){let r=$(t.target),o=r.data("rule-id"),s=n[o],a;if(s){a=s.$el.find("select.mailings");h(a,i[o][e]);a.trigger("change")}else{h(r);r.trigger("change")}}));$(o).on("link-values-set",(function(e){let r=$(e.target).data("rule-id"),o=n[r],s;if(o){s=o.$el.find("select.links");h(s,i[r][t]||-1)}else{s=$(e.target);h(s)}s.trigger("values-setup-finished")}));return r}(),validation:{callback:function(e){return e.every((function(e){return e}))||["string_empty"]}},canBeNegated:i.mail_tracking_available,skipOperator:true},"revenue by mailing":{type:"string",input_event:"values-setup-finished",input:n,values:function(e){const t=e.find("select.mailings");m(t).done((()=>t.trigger("values-setup-finished")))},valueSetter:c,valueGetter:s,canBeNegated:i.mail_tracking_available,skipOperator:true}};if(!i.mail_tracking_available){delete u["received mailing"]}e.forEach((function(e){const t=u[e.id];if(t){$.extend(e,t)}}))}function m(e,t){const i=t||function(t){const i=AGN.Lib.Select.get(e);const n=[];t.forEach((e=>n.push({id:e.mailingID,text:e.shortname})));i.setOptions(n);e.trigger("values-set")};return $.ajax({type:"GET",url:AGN.url("/workflow/getAllMailingSorted.action"),data:{sortField:"date",sortDirection:"desc"},success:i})}function v(e,t){const i=t||function(t){t.forEach((function(t){e.append($("<option>",{text:t.shortname,value:t.autoImportId}))}));e.trigger("values-set")};return $.ajax({type:"POST",url:AGN.url("/autoimport.do"),data:{method:"listJson"},success:i})}function b(e,t){e.forEach((function(e){const i=$("<option>");i.text(e.shortname);i.val(e.mailingID);t.append(i)}))}function y(e,t){$.ajax({url:AGN.url(`/mailing/ajax/${e}/links.action`),success:t})}function w(e,t){if(t){e=f(e)}return $.extend({},e)}function C(){return[{type:"equal",apply_to:["string","number","datetime"]},{type:"not_equal",apply_to:["string","number","datetime"]},{type:"less",apply_to:["string","number"]},{type:"less_or_equal",apply_to:["string","number"]},{type:"greater",apply_to:["string","number"]},{type:"greater_or_equal",apply_to:["string","number"]},{type:"like",nb_inputs:1,apply_to:["string"]},{type:"not_like",nb_inputs:1,apply_to:["string"]},{type:"contains",nb_inputs:1,apply_to:["string"]},{type:"not_contains",nb_inputs:1,apply_to:["string"]},{type:"begins_with",nb_inputs:1,apply_to:["string"]},{type:"not_begins_with",nb_inputs:1,apply_to:["string"]},{type:"mod",nb_inputs:1,apply_to:["number"],valueSelectors:["#first","#operator select","#second"],valueGetter:function(e){const t=[];e.operator.valueSelectors.forEach((function(i){t.push(e.$el.find(i).val())}));return t},valueSetter:function(e,t){e.operator.valueSelectors.forEach((function(i,n){e.$el.find(i).val(t[n])}))},input:function(e){const t=this.operators.filter((function(e){return e.type!=="mod"&&e.apply_to.includes("number")}));const i=this.getRuleOperatorSelect(e,t);return""+"<div class='qb-input-element'>"+"<input class='form-control' id='first' type='number'/>"+"</div>"+"<div class='qb-input-element' id='operator'>"+i+"</div>"+"<div class='qb-input-element'>"+"<input class='form-control' id='second' type='number'/>"+"</div>"},validate:function(e){return e.every((function(e){return e}))||["string_empty"]}},{type:"is_empty",nb_inputs:0,apply_to:["string","number","datetime"]},{type:"is_not_empty",nb_inputs:0,apply_to:["string","number","datetime"]},{type:"before",nb_inputs:1,apply_to:["datetime"]},{type:"after",nb_inputs:1,apply_to:["datetime"]}]}}))})();AGN.Lib.Controller.new("targets-list",(function(){this.addAction({change:"check-favorites"},(function(){AGN.Lib.Loader.prevent();$.ajax({type:"GET",url:AGN.url(e(this.el))})}));function e(e){var t=e.data("target-id");var i=e.is(":checked");return"/target/"+t+"/"+(i?"addToFavorites":"removeFromFavorites")+".action"}this.addAction({change:"check-admin-favorites"},(function(){AGN.Lib.Loader.prevent();const e=this.el.data("target-id");const t=this.el.is(":checked");$.ajax({type:t?"POST":"DELETE",url:AGN.url("/target/"+e+"/favorite.action")})}))}));AGN.Lib.CoreInitializer.new("template",(function(e=$(document)){e.find('script[type="text/x-mustache-template"]').each((function(){const e=$(this);const t=e.attr("id");if(t){AGN.Lib.Template.register(t,e.html())}}))}));AGN.Lib.CoreInitializer.new("tile-toggle",(function(e=$(document)){_.each(e.find("[data-toggle-tile]"),(e=>new AGN.Lib.Tile($(e))))}));AGN.Lib.CoreInitializer.new("tooltip",(function(e=$(document)){const t=AGN.Lib.Tooltip;$(".tooltip").remove();e.all("[data-tooltip]").each((function(){const e=$(this);t.create(e,t.options(e))}))}));AGN.Lib.CoreInitializer.new("trackable-link-extensions",(function(e=$(document)){class i extends AGN.Lib.InputTable{constructor(e){super(e)}get rowTemplate(){return`\n        <tr>\n            <td><input type="text" class="form-control" data-name="name" value="{{- name }}" placeholder="${t("defaults.name")}" ${this.readonly?"disabled":""}></td>\n            <td><input type="text" class="form-control" data-name="value" value="{{- value }}" placeholder="${t("defaults.value")}" ${this.readonly?"disabled":""}></td>\n        </tr>\n      `}get headerTemplate(){return`\n        <tr>\n            <th>${t("defaults.name")}</th>\n            <th>${t("defaults.value")}</th>\n        </tr>\n      `}addActions(){super.addActions();AGN.Lib.Action.new({click:"[data-delete-all-extensions]"},this.clean.bind(this),this.$container);AGN.Lib.Action.new({click:"[data-add-default-extensions]"},this.addDefaultExtensions.bind(this),this.$container)}addDefaultExtensions(){const e=this.$table.find("tbody tr:last");if(this.isEmptyRow$(e)){e.remove()}_.each(this.config.defaultExtensions,(e=>this.addRow(e)));this.addEmptyRow()}}_.each(e.find("[data-trackable-link-extensions]"),(function(e){new i($(e))}))}));AGN.Lib.CoreInitializer.new("truncated-text-popover",(function(e=$(document)){const t=AGN.Lib.Popover;const i=AGN.Lib.Helpers;document.fonts.ready.then((()=>{e.find(`\n      .text-truncate,\n      table:not(.input-table) td,\n      table:not(.input-table) th,\n      .ag-header-cell,\n      .select2-selection__rendered,\n      [data-truncated-text],\n      .dashboard-calendar__label--comment .text-truncate-lines\n      `).each(((e,t)=>n(t)))}));function n(e){const n=r(e);const s=t.get(n);if(o(e)){if(!s){t.create(n,{delay:{show:400,hide:50},content:$(i.retrieveTextElement(n[0])).text()}).forTruncatedText=true}}else if(s?.forTruncatedText){t.remove(n)}}function r(e){const t=$(e);const i=t.closest("td");return i.exists()?i:t}function o(e){let t=$(e);if(t.is(".text-truncate-alt")){return t.is(":truncatedAlt")}if(t.is(".ag-header-cell")){t=t.find(".ag-header-cell-text")}return t.is(":truncated")||t.is("td")&&i.containsTruncatedElements(e)}}));AGN.Lib.CoreInitializer.new("ui-theme",(function(){const e=$("body").data("bs-theme");$("iframe:not(.cke_wysiwyg_frame):not(.default-iframe)").each((function(){const t=$(this);t.on("load.iframe",(function(){t.contents().find("body").attr("data-bs-theme",e)}))}))}));AGN.Lib.DomInitializer.new("upload",(function(e){const t=AGN.Lib.Upload;const i=AGN.Lib.Template;const n=u(e);const r=u(e,true);const o=(n.exists()?n:e).find("[data-upload]");if(!o.exists()&&!n.exists()){return}let s=t.get(n,o);if(!s){s=new t(n,o)}if(r.exists()){new t(r,r.find("[data-upload]"),s)}const a=o.data("upload")||"";const l=a.includes("[]");const c=AGN.Lib.Form.get(e);const d=c.get$();if(d.exists()){if(c instanceof AGN.Lib.StaticForm){o.attr("name",a)}const e=g();const t=e.data("upload-progress-template")||"progress";m();d.on("form:loadershow",(()=>{e.html(i.text(t,{currentProgress:true}));e.show()}));d.on("form:loaderhide",(()=>e.hide()));d.on("form:submit",(()=>p()));d.on("submitted",h);d.on("form:progress",((n,r)=>{e.html(i.text(t,{currentProgress:r.progress}))}));n.on("upload:reset",h);n.on("upload:dropped",((e,t)=>{m();if(n.data("upload-dropzone")==="submit"){n.hide();c.submit(!!d.data("action")?"event":"")}}))}function u(e,t=false){if(t){return e.find('[data-upload-dropzone="extra"]').first()}const i=$(e.data("linked-dropzone"));return i.exists()?i:e.find("[data-upload-dropzone]").first()}function h(){if(l){v().forEach(((e,t)=>{c.setValueOnce(f(t),undefined)}))}else{c.setValueOnce(a,undefined)}s.reset();m();n.show()}function p(){const e=v();if(c instanceof AGN.Lib.StaticForm&&o.exists()&&o[0].files.length===0){const t=new DataTransfer;e.forEach((e=>t.items.add(e)));o[0].files=t.files}else{if(l){e.forEach(((e,t)=>{c.setValueOnce(f(t),e)}))}else{c.setValueOnce(a,e)}}}function f(e){return a.replace("[]",`[${e}]`)}function g(){const t=n.nextAll("[data-upload-progress]").first();return t.length?t:e.find("[data-upload-progress]")}function m(){e.data("upload-selection",v())}function v(){return s?s.getSelection():[]}}));AGN.Lib.DomInitializer.new("web-storage-persist",(function(){if(this.config){$.each(this.config,((e,t)=>{AGN.Lib.WebStorage.extend(e,t)}))}}));(()=>{AGN.Lib.CoreInitializer.new("workflow-driven-input",(function(t=$(document)){if(!AGN.Lib.Template.exists("edit-with-campaign-btn")){return}_.each(t.all(':input[data-workflow-driven="true"]'),(t=>{const r=$(t);if(r.is('input[type="text"]')){e(r)}if(r.is('input[type="checkbox"]')){i(r)}if(r.is("select")){n(r)}r.prop("disabled",true)}))}));function e(e){e.css("border-left","0").wrap('<div class="input-group">').before(r(o()));AGN.Lib.CoreInitializer.run("tooltip",e.parent())}function i(e){e.next().after(o());AGN.Lib.CoreInitializer.run("tooltip",e.parent())}function n(e){const i=e.next(".select2-container");if(e.prop("multiple")){i.find(".select2-selection__rendered").hide();i.find(".select2-search__field").val(t("mailing.default.editWithCampaign"));i.find(".select2-search--inline").prepend(o())}else{i.find(".select2-selection").prepend(o())}AGN.Lib.CoreInitializer.run("tooltip",i)}function r(){return $("<div>",{class:"input-group-text input-group-text--disabled border-end-0 pe-0",html:o()})}function o(){return AGN.Lib.Template.text("edit-with-campaign-btn")}})();AGN.Lib.DomInitializer.new("workflow-pause-timer",(function(){const e=this.config.workflowId;const i=this.config.pauseTime;const n=this.config.defaultExpirationHours;const r=this.config.expirationHours>0?this.config.expirationHours:n;const o=r*60*60*1e3;const s=$("#workflow-pause-timer-text");const a=setInterval((function(){l()}),1e3);l();function l(){s.html(d())}function c(){return o-(Date.now()-i)}function d(){const e=c();if(e<=0){if(a){clearInterval(a)}h();return'<i class="icon icon-refresh icon-spin"></i> '+t("workflow.activating.auto")}const i=new Date(e);return u(i.getUTCHours())+":"+u(i.getUTCMinutes())+":"+u(i.getUTCSeconds())}function u(e){return e>0?e<10?"0"+e:e:"00"}function h(){return $.post(AGN.url("/workflow/"+e+"/autoUnpause.action")).done((function(t){if(t.success===true){AGN.Lib.Page.reload(AGN.url("/workflow/"+e+"/view.action"))}else{AGN.Lib.JsonMessages(t.popups)}})).fail((function(){AGN.Lib.Messages.defaultError()}))}return false}));(()=>{const e=AGN.Lib.Loader,i=AGN.Lib.Page,n=AGN.Lib.CSRF;const r={initialize:function(t){if(t.loader===true||t.loader===undefined){t.loader={show:()=>e.show(),hide:()=>e.hide()}}},show:function(e){const t=e.loader;if(t?.show){try{t.show()}catch(e){console.error(e)}}},hide:function(e){const t=e.loader;if(t?.hide){try{t.hide()}catch(e){console.error(e)}}}};$.ajaxPrefilter((function(e){r.initialize(e)}));$(document).ajaxSend((function(e,t,i){r.show(i);n.setTokenToReqHeader(t,i.type)}));$(document).ajaxComplete((function(e,t,i){r.hide(i);n.updateTokenInDOM()}));$(document).ajaxError((function(e,n,o){r.hide(o);if(n.readyState==0||n.status==0){return}if(o.statusCode&&n.status in o.statusCode){return}if(n.status===401){const e=$.Event("ajax:unauthorized");$(document).trigger(e);if(!e.isDefaultPrevented()&&n.responseText){i.render(n.responseText)}}else if(n.status===403){if(n.responseText){const e=$(n.responseText);const t=e.filter("#csrf-error-message");if(t.exists()){AGN.Lib.Modal.create(_.template(t.html())({}),{});return}}AGN.Lib.Modal.fromTemplate("permission-denied",{title:t("messages.permission.denied.title"),text:t("messages.permission.denied.text"),btn:t("defaults.ok")})}else{let r=true;if(n.responseText){try{const e=$(n.responseText);const t=e.all("[data-message]");if(t.exists()){i.render(n.responseText);r=false}}catch(e){console.debug(e)}}if(r){AGN.Lib.Modal.fromTemplate("error",{headline:t("messages.error.headline"),text:t("messages.error.text"),reload:t("messages.error.reload")})}}}));$(document).on("click","a[data-ajax]",(function(e){const t=$(this);e.preventDefault();i.reload(t.attr("href"),true,t.data("ajax"))}));$(document).on("click","[data-prevent-load]",(function(){e.prevent()}));window.onbeforeunload=function(){e.show()}})();(()=>{const e=AGN.Lib.Form;const t=AGN.Lib.Confirm;const i=AGN.Lib.Page;AGN.Lib.Action.new({click:"[data-confirm], .js-confirm"},(function(){$.get(this.el.attr("href")).done((e=>{const n=$(e).all(".modal");if(n.length!==1){i.render(e);return}t.create(e).done((e=>i.render(e)))}));this.event.preventDefault()}));$(document).on("click","[data-confirm-positive], .js-confirm-positive",(function(){const i=$(this);const n=t.get(i);const r=e.getWrapper(i);if(n){if(r.exists()){const t=e.get(r);if(i.is("[data-url]")){t.setActionOnce(i.data("url"))}t.jqxhr().done((e=>n.positive(e)))}else{const e=n.$modal.find('[name="confirm-choice"]');if(e.exists()){n.positive(e.val())}else{n.positive(i.data("confirm-positive"))}}}}));$(document).on("click","[data-confirm-negative], .js-confirm-negative",(function(){const e=$(this);t.get(e)?.negative(e.data("confirm-negative"))}))})();(()=>{const e=AGN.Lib.Tooltip;AGN.Lib.Action.new({click:"[data-copyable]"},(function(){let i=undefined;let n=this.el;if(this.el.is("[data-copyable-value]")){i=this.el.data("copyable-value")}else{const e=this.el.data("copyable-target");const t=e?$(e):this.el;if(t.exists()){i=t.val()||t.text();n=t}}if(i!==undefined){AGN.Lib.Clipboard.set(i,((i,r)=>{if(r){const i=e.get(n);const r=t("clipboard.copied.tooltip");if(i){e.setContent(n,r)}else{e.create(n,{title:r,trigger:"manual"})}e.setShown(n);const o=this.el.data("tooltip-timeout-id");if(o){clearTimeout(o)}const s=setTimeout((()=>{if(i){e.restoreContent(n);e.setShown(n,false)}else{e.remove(n)}this.el.removeData("tooltip-timeout-id")}),2500);this.el.data("tooltip-timeout-id",s)}}))}}))})();(()=>{const e=AGN.Lib.Table;const t=AGN.Lib.WebStorage;const i=AGN.Lib.Confirm;const n="[data-restore-row]";const r='[data-bulk-action="restore"]';$(document).on("click","[data-js-table-page]",(function(){const t=$(this);const i=t.data("js-table-page");const n=e.get(t).api;if(i==="first"){n.paginationGoToFirstPage()}else if(i==="prev"){n.paginationGoToPreviousPage()}else if(i==="next"){n.paginationGoToNextPage()}else if(i==="last"){n.paginationGoToLastPage()}else{n.paginationGoToPage(i)}n.deselectAll()}));$(document).on("change","[data-js-table] [data-number-of-rows]",(function(){const i=$(this);const n=i.val();e.get(i).api.setGridOption("paginationPageSize",n);const r=i.closest(".table-wrapper").data("web-storage");if(r){t.extend(r,{paginationPageSize:parseInt(n)})}}));$(window).on("viewportChanged",(function(){$(document).all(".table-wrapper").each((function(){AGN.Lib.Table.get($(this))?.redraw()}))}));$(document).on("click",".js-data-table-delete",(function(t){const n=$(this);const r=e.get(n);$.get(n.attr("href")).done((e=>{if($(e).all(".modal").exists()){i.create(e).done((e=>{const t=r?.findRowByElement(n);if(t){t.data.deleted=true;t.data.active="false";r.api?.applyTransaction(c()?{update:[t.data]}:{remove:[t.data]})}if(typeof e==="object"){AGN.Lib.JsonMessages(e.popups,true)}else{AGN.Lib.RenderMessages($(e))}}))}else{AGN.Lib.Page.render(e)}}));t.preventDefault()}));$(document).on("click",".js-data-table-bulk-delete",(e=>o($(e.currentTarget))));$(document).on("click",`${r}, ${n}`,(e=>s($(e.currentTarget))));function o(e){a(e,false)}function s(e){a(e,true)}function a(t,i){const r=e.get(t);const o=r.api;const s=t.is(n)?[r?.findRowByElement(t)?.data]:o.getSelectedRows();const a=s.map((e=>e.id));d(a,t.data("bulk-url"),i?"POST":t.data("method")).done((()=>l(o,s,i)))}function l(e,t,i){t.forEach((e=>{e.active="false";e.deleted=!i}));e.applyTransaction(c()?{update:t}:{remove:t})}function c(){return $(r).exists()}function d(e,t,n="GET"){const r=$.Deferred();if(e&&e.length){const o=$.ajax(t,{method:n,traditional:true,data:{bulkIds:e}}).fail((()=>r.reject()));i.request(o).then(r.resolve,r.reject)}else{r.reject();AGN.Lib.Messages.alert("messages.error.nothing_selected")}return r.promise()}})();$(document).ready((function(){window.AGN.Lib.Controller.init();window.AGN.runAll()}));(function(){$(document).on("dragster:enter",(function(e){var t=$(e.target);if(!t.is("[data-upload-dropzone]")){t.addClass("drag-over")}}));$(document).on("dragster:leave",(function(e){var t=$(e.target);if(!t.is("[data-upload-dropzone]")){t.removeClass("drag-over")}}))})();(()=>{const e=AGN.Lib.EditableView;const t=AGN.Lib.Action;t.new({click:"[data-edit-view]"},(function(){const t=$(`[data-editable-view="${this.el.data("edit-view")}"]`);const i=e.get(t);if(i.isInEditMode()){i.applyChanges()}else{i.enableEditMode()}$(window).trigger("agn:resize")}));t.new({click:"[data-edit-tile-visibility]"},(function(){e.get(this.el).toggleState(this.el)}))})();(()=>{const e=AGN.Lib.Form;$(document).on("click","[data-evaluate-loader]",(function(r){const o=$(this);r.preventDefault();let s;return $.ajax({beforeSend:()=>s=AGN.Lib.Modal.fromTemplate(i(o)),xhr:t,url:o.prop("href"),type:"POST",data:o.is("[data-form-target]")?e.get($(o.data("form-target"))).params():""}).done((e=>{if(typeof e==="object"){if(e.success===false){AGN.Lib.JsonMessages(e.popups)}else{n(e.data,o)}}else{AGN.Lib.Page.render(e)}})).fail((e=>AGN.Lib.Page.render(e))).always((()=>AGN.Lib.Modal.getInstance(s).hide()))}));function t(){const e=new XMLHttpRequest;e.addEventListener("progress",(e=>{if(e.lengthComputable){$("#progress-text").html(`${e.loaded} bytes`)}}));return e}function i(e){return e.data("evaluate-loader")||"evaluate-loader-template"}function n(t,i){const n=e.getWrapper(i);const r=n.dirty("isDirty");n.dirty("setAsClean");const o=window.onbeforeunload;window.onbeforeunload=null;window.location=AGN.url(t);window.onbeforeunload=o;if(r){n.dirty("setAsDirty")}}})();(()=>{const e=AGN.Lib.Action,t=AGN.Lib.Form,i=AGN.Lib.Confirm,n=AGN.Lib.Helpers;e.new({click:"[data-form-change]",change:"select[data-form-change]"},(function(){t.get(this.el).setValueOnce("numberOfRowsChanged",true)}));e.new({click:"a[data-form-set], button[data-form-set]",change:"select[data-form-set], input[data-form-set]"},(function(){const e=n.objFromString(this.el.data("form-set"));const i=t.get(this.el);_.forEach(e,((e,t)=>i.setValueOnce(t,e)))}));e.new({click:"a[data-form-url], button[data-form-url]",change:"select[data-form-url], input[data-form-url]"},(function(){t.get(this.el).setActionOnce(this.el.data("form-url"))}));e.new({click:"a[data-form-method], button[data-form-method]",change:"select[data-form-method], input[data-form-method]"},(function(){t.get(this.el).setMethodOnce(this.el.data("form-method"))}));e.new({click:"a[data-form-resource], button[data-form-resource]",change:"select[data-form-resource], input[data-form-resource]"},(function(){const e=t.get(this.el);if(e instanceof AGN.Lib.ResourceForm){e.setResourceSelectorOnce(this.el.data("form-resource"))}}));e.new({click:"a[data-form-clear], button[data-form-clear]"},(function(){const e=this.el.data("form-clear");if(!e){t.get(this.el).clear();return}r($(e));this.el.trigger("apply-filter")}));function r(e){e.find(":input, select").val("").trigger("change");e.find(":checkbox, :radio").prop("checked",false);AGN.Lib.CoreInitializer.run("select",e)}e.new({click:"a[data-form-persist], button[data-form-persist]",change:"select[data-form-persist], input[data-form-persist]"},(function(){const e=n.objFromString(this.el.data("form-persist"));const i=t.get(this.el);_.forEach(e,((e,t)=>i.setValue(t,e)))}));e.new({click:"a[data-form-reset], button[data-form-reset]"},(function(){t.get(this.el).reset()}));e.new({click:"a[data-form-abort], button[data-form-abort]"},(function(){t.get(this.el).abort()}));e.new({click:"[data-form-confirm]"},(function(){const e=t.get(this.el);e.submit("confirm").done((t=>{const n=$(t).all(".modal");if(!n.exists()){e.updateHtml(t);return}i.create(t).done((t=>e.updateHtml(t))).fail(e.revertAction)}))}));e.new({click:"a[data-form-submit], button[data-form-submit]",change:"select[data-form-submit], input[data-form-submit]"},(function(){setTimeout((()=>t.get(this.el).submit()),5)}));e.new({click:"a[data-form-submit-static], button[data-form-submit-static]",change:"select[data-form-submit-static], input[data-form-submit-static]"},(function(){setTimeout((()=>t.get(this.el).submit("static")),5)}));e.new({click:"a[data-form-submit-event], button[data-form-submit-event]",change:"select[data-form-submit-event], input[data-form-submit-event]"},(function(){setTimeout((()=>t.get(this.el).submit("event")),5)}));e.new({submit:"[data-form]"},(function(){if(this.el.data("form")!=="static"){this.event.preventDefault();setTimeout((()=>t.get(this.el).submit()),5)}}));function o(e){const t=e.keyCode||e.which;if(t===13){return true}if(t===229&&e.originalEvent){const t=e.originalEvent.code;if(t==="Enter"||t==="NumpadEnter"){return true}}return false}e.new({keydown:'input[type="text"], input[type="password"], input[type="number"]'},(function(){if(o(this.event)){const e=$.Event("enterdown");this.el.trigger(e);if(e.isDefaultPrevented()){this.event.preventDefault();return}const i=t.getWrapper(this.el);if(i.exists()){if(i.is("[data-form]")){const e=t.get(i);if(i.is("[data-action]")){e.submit("event")}else{e.submit()}}else{i.submit()}}}}))})();(function(){var e=AGN.Lib.Help;$(document).on("click","[data-help]",(function(t){e.show($(this));t.preventDefault()}))})();(()=>{$(document).on("click","[data-manual]",(function(e){const t=$(this);AGN.Lib.Helpers.openHelpModal("manual",{key:t.data("manual")})}))})();(()=>{const e='input[type="text"]';$(document).on("input change",e,(function(){t($(this))}));$(window).on("viewportChanged",(function(){$(e).each((function(){t($(this))}))}));function t(e){const t=AGN.Lib.Popover;const i=t.get(e);if(i?.inputTruncatedTextPopover){i.setContent({".popover-body":e.val()});if(e.is(":truncated")){i.enable();if(!t.isShown(i)&&e.is(":hover")){i.show()}}else{i.disable()}}}})();(()=>{$(document).on("click","label",(function(e){if($(e.target).is("[data-help]")){return}const t=$(this);const i=$(`#${t.attr("for")}`);const n=i.data("select2");if(i.length===1&&n){setTimeout((()=>{if(!n.isOpen()){n.open()}}),0)}}))})();(()=>{const e=window.history;$(document).on("click",'a[href^="#"]',(function(e){if(e.isDefaultPrevented()){return}e.preventDefault();t($(this).attr("href"))}));function t(t){if(t==="#"){return}var i=window.location.href;var n=i.indexOf("#");if(n>=0){i=i.substring(0,n)}e.replaceState(e.state||{},document.title,i+t)}})();AGN.Lib.Action.new({click:"[data-msg]"},(function(){AGN.Lib.Messages(this.el.data("msg"),this.el.data("msg-content"),this.el.data("msg-type"))}));(()=>{AGN.Lib.Action.new({click:"[data-modal]"},(function(){const e=this.el.data("modal");let t=this.el.data("modal-set");t=typeof t==="object"?t:AGN.Lib.Helpers.objFromString(t);AGN.Lib.Modal.fromTemplate(e,t)}));$(document).on("hidden.bs.modal",".modal",(function(){const e=$(this);e.trigger("modal:close");setTimeout((()=>e.remove()),100)}));$(document).on("shown.bs.modal",".modal",(function(){setTimeout((()=>$(this).trigger("modal:open")),0);const t=$(".modal.show");if(t.length>1){e(t.last())}}));function e(e){$(".modal-backdrop.show").last().css("z-index",e.css("z-index"))}})();(()=>{$(document).on("click",".date-picker-container",(function(){const e=$(this).find(".js-datepicker");if(!e.prop("disabled")&&!e.datepicker("widget").is(":visible")){e.datepicker("show")}}))})();AGN.Lib.Action.new({click:"[data-popup]"},(function(){const e=window.location.href;const t=e.substring(0,e.lastIndexOf("/"));let i=this.el.data("popup");if(!i||i.indexOf("://")<=0){i=`${t}/${i}`}const n={width:800,height:600,url:i};if(this.el.is("[data-popup-options]")){_.merge(n,AGN.Lib.Helpers.objFromString(this.el.data("popup-options")))}const r=window.screen.width;const o=window.screen.height;const s=r>n.width?(r-n.width)/2:0;const a=o>n.height?(o-n.height)/2:0;window.open(n.url,"help",`width=${n.width},height=${n.height},top=${a},left=${s}`)}));(()=>{const e=$(window);const t={DESKTOP:1,MOBILE:2};let i;let n;const r=function(){if(i){clearTimeout(i)}i=setTimeout((function(){AGN.Lib.CoreInitializer.run(["scrollable","truncated-text-popover","table-cols-resizer","table"]);_.each(AGN.Lib.Editor.all(),(e=>e.resize()));e.trigger("viewportChanged")}),500);if(o()){e.trigger("displayTypeChanged",[n===t.MOBILE])}};function o(){const e=n;n=AGN.Lib.Helpers.isMobileView()?t.MOBILE:t.DESKTOP;return e!==n}e.on("resize",r);e.on("agn:resize",r)})();(()=>{$(document).on("agn:rail-mousedown",(function(e,t){$(t).find("iframe").addClass("pe-none")}));$(document).on("agn:rail-mouseup",(function(e,t){$(t).find("iframe").removeClass("pe-none")}));$(window).on("load",(function(){new MutationObserver((()=>AGN.Lib.Scrollbar.updateAll())).observe(document.body,{childList:true,subtree:true})}))})();(()=>{const e=AGN.Lib.Helpers;AGN.Lib.Action.new({click:"[data-support-type]"},(function(){const t=this.el.data("support-type");const i=e.objFromString(this.el.data("support-options"));e.openHelpModal("support",{type:t,opts:i})}))})();(()=>{const e=AGN.Lib.FormBuilder.FormBuilder;const t=AGN.Lib.Editor;AGN.Lib.Action.new({"click change":"[data-sync-from]"},(function(){const i=this.el.data("sync-from").split(/,\s?/);const n=this.el.data("sync-to").split(/,\s?/);_.each(i,((i,r)=>{const o=$(i);const s=$(n[r]);const a=o.val();const l=s.attr("id");if(window.Jodit?.instances[l]){Jodit.instances[l].value=a}else if(window.CKEDITOR&&CKEDITOR.instances[l]){CKEDITOR.instances[l].setData(a)}else if(t.exists(s)){t.get(s).val(a)}else if(s.data("select2")){s.select2("val",a)}else if(e.isCreated(`#${l}`)){e.get(`#${l}`).setJson(e.get(i).getJson())}else if(o?.prop("type")?.trim()==="checkbox"){s.val(o.prop("checked"))}else{s.val(a)}}))}))})();(()=>{const e=AGN.Lib.Form;$(document).on("click","[data-toggle-tab]",(function(t){const i=$(this);if(i.is("[data-form-submit]")){const n=e.getWrapper(i);if(n.exists()&&!e.get(n).valid()){t.preventDefault();return false}}AGN.Lib.Tab.show(i);AGN.Lib.Scrollbar.get(i)?.update();t.preventDefault();return false}))})();(()=>{const e=AGN.Lib.Action;const t=AGN.Lib.TableColumnManager;e.new({click:"[data-manage-table-columns]"},(function(){const e=t.get(this.el);if(e.isInEditMode()){e.applyChanges()}else{e.toEditMode()}}));e.new({click:"[data-remove-table-column]"},(function(){t.get(this.el).removeColumn(this.el.closest("th"))}));$(window).on("displayTypeChanged",((e,i)=>{if(i){t.get($("[data-manage-table-columns]"))?.discardChanges()}}))})();(()=>{const e=AGN.Lib.Helpers;const t=AGN.Lib.Confirm;const i=AGN.Lib.Form;$(document).on("click",'.js-table a, .js-table input, .input-table input[type="checkbox"], .js-table select, .js-table .select2, .js-table button, .js-table td:has(input[type="checkbox"]), .js-table .disabled',(function(e){e.stopPropagation()}));$(document).on("click","[data-table-sort]",(function(t){const n=$(this);if(t.target!==n.get(0)){return}const r=n.attr("href");if(i.getWrapper(n).exists()){const t=i.get(n);const o=e.paramsFromUrl(r);_.each(o,((e,i)=>t.setValue(i,e)));t.submit()}else{$.get(r).done((e=>AGN.Lib.Page.render(e,false)))}t.preventDefault()}));$(document).on("click","[data-paginate]",(function(t){const n=$(this);const r=i.get(n);const o=e.paramsFromUrl(n.attr("href"));_.each(o,((e,t)=>r.setValue(t,e)));r.submit();t.preventDefault();const s=n.closest(".tile");if(s.exists()){const e=s.offset().top;if(window.scrollY>e){window.scrollTo(0,e-150)}}else{window.scrollTo(0,0)}}));$(document).on("click",".js-row-delete",(function(e){const n=$(this);const r=n.is("button")?n.data("url"):n.attr("href");const o=i.get(n);if(r){$.get(r).done((e=>{const i=$(e).all(".modal");if(i.exists()){t.create(e).done((e=>{n.closest("tr").remove();o.updateHtml(e)}))}else{o.updateHtml(e)}}))}e.preventDefault()}));$(document).on("click",".js-table tr:not(.disabled)",(function(e){if(AGN.Lib.Helpers.isMobileView()){return}const t=$(this);const i=t.data("link");if(typeof i!=="undefined"&&i!=="#"&&!t.closest(".table-row-wrapper").exists()){n(t,i)}}));function n(e,n){const r=i.get(e);$.get(n).done((e=>{const i=$(e).all(".modal");if(i.exists()){t.create(e).done((e=>r.updateHtml(e)))}else{r.updateHtml(e)}}))}$(document).on("click",'td:has(input[type="checkbox"])',(function(e){e.preventDefault();const t=$(this).find('input[type="checkbox"]');_.each(t,(e=>{const t=$(e);if(!t.prop("disabled")){t.prop("checked",!t.prop("checked"));t.trigger("change")}}))}));$(document).on("click",".disabled",(function(e){e.preventDefault()}));$(document).on("click","[data-toggle-table-truncation]",(function(){const e=$(this).closest(".table-wrapper");const t=e.find("table, .ag-body");t.toggleClass("no-truncate");AGN.Lib.CoreInitializer.run(["truncated-text-popover","scrollable"],e);AGN.Lib.Storage.set("truncate-table-text",!t.hasClass("no-truncate"))}));AGN.Lib.Action.new({change:"[data-preview-table]"},(function(){AGN.Lib.PreviewTable.toggle(this.el);AGN.Lib.CoreInitializer.run(["scrollable","truncated-text-popover","table","table-cols-resizer"],this.el.closest(".table-wrapper"))}));$(document).on("change","[data-bulk-checkbox]",(function(){const e=$(this).closest(".table-wrapper");const t=e.find("[data-bulk-checkboxes]");const i=e.find("[data-bulk-checkbox]:not(:disabled)");const n=i.filter(":checked").length;const o=i.length;t.prop("indeterminate",n>0&&n<o);t.prop("checked",n===o);r(e)}));$(document).on("change","[data-bulk-checkboxes]",(function(){const e=$(this);const t=e.closest(".table-wrapper").find("[data-bulk-checkbox]:not(:disabled)");t.prop("checked",e.prop("checked")).trigger("change")}));$(document).on("table:updateBulkActions",".table-wrapper",(function(e,t,i){r($(this),t,i)}));function r(e,t,i){const n=a(e);if(!n.exists()){return}if(t===null||t===undefined){const n=e.find("[data-bulk-checkbox]:checked").closest("tr");i=o(n);t=n.length}n.find(".bulk-actions__selected span").text(t);s(n,i||[]);n.toggleClass("hidden",t===0)}function o(e){return e.find("[data-bulk-action]").filter(((e,t)=>!$(t).prop("disabled")&&!$(t).hasClass("disabled"))).map(((e,t)=>$(t).data("bulk-action"))).get()}function s(e,t){if(!t.length){return}const i=new Set(t);e.find("[data-bulk-action]").each((function(){const e=$(this);e.toggleClass("hidden",!i.has(e.data("bulk-action")))}))}function a(e){return e.find(".bulk-actions")}})();$(document).on("input change",".text-area-grow-wrapper > textarea",(function(e){const t=$(this);t.parent().attr("data-replicated-value",t.val())}));(()=>{const e="tile--full-screen";function t(t,o,s){return!r(t,o)&&!t.hasClass(e)&&(o&&!n(s.target)||i(s.target))}$(document).on("click","[data-toggle-tile] > .tile-header",(function(e){const i=$(this).closest(".tile");const n=AGN.Lib.Helpers.isMobileView();if(t(i,n,e)){AGN.Lib.Tile.get(i).toggleCollapse()}}));function i(e){return $(e).closest(".tile-header .tile-title").length}function n(e){return $(e).closest(".tile-header .tile-controls").length}function r(e,t){return!t&&e.find(`\n    .tile-title > i.icon-caret-up.mobile-visible,\n    .tile-title > i.icon-caret-down.mobile-visible`).exists()}$(document).on("click",".tile [data-full-screen]",(function(t){const i=$(this);const n=i.closest(".tile");n.toggleClass(e);_.each(AGN.Lib.Editor.all(n),(e=>e.resize()));const r=n.hasClass(e);i.find("i").toggleClass("icon-compress-arrows-alt",r).toggleClass("icon-expand-arrows-alt",!r);t.preventDefault()}))})();AGN.Lib.Action.new({change:"[data-toggle-usability]"},(e=>{_.each($(e.data("toggle-usability")),(e=>{const t=$(e);t.prop("disabled",!t.prop("disabled"))}))}));AGN.Lib.Action.new({click:"[data-upload-reset]"},(function(){const e=$(this.el.data("linked-dropzone"));if(e.exists()){e.trigger("upload:reset")}}));(()=>{$(document).on("tile:show",(function(t){const i=$(t.target);const n=i.find(".js-wysiwyg");if(n.length===1){const t=n.attr("id");const i=e(n);if(window.Jodit){Jodit.make(`#${t}`,{theme:AGN.Lib.Helpers.isDarkTheme()?"dark":"default",editHTMLDocumentMode:i.isFullHtml,iframe:i.isFullHtml,cleanHTML:{denyTags:`${i.allowExternalScript?"":"script"}`},emmMailingId:i.browseMailingId||-1,emmToolbarType:i.toolbarType,emmShowAiTextGeneration:i.showAiTextGeneration})}else{window.createEditorExt(t,i.width,i.height,i.browseMailingId,i.isFullHtml,false,i.allowExternalScript)}}}));$(document).on("tile:hide modal:close",(function(e){$(e.target).find(".js-wysiwyg").each((function(){const e=$(this);if(window.Jodit){AGN.Lib.Editor.get(e).val(e.val());Jodit.instances[e.attr("id")]?.destruct()}else{CKEDITOR.instances[e.attr("id")]?.updateElement();AGN.Lib.Editor.get(e).val(e.val());window.removeEditor(e.attr("id"))}}))}));$(document).on("form:submit",(function(e){const t=$(e.target).find(".js-wysiwyg");if(t.exists()){if(window.Jodit){Object.values(Jodit.instances).forEach((e=>e.destruct()))}else if(window.removeAllEditors){window.removeAllEditors()}}}));const e=e=>{const i={};if(window.Jodit){i.isFullHtml=false}else{i.isFullHtml=!!e.data("full-tags");i.height=e.height();i.width="100%"}i.allowExternalScript=false;i.browseMailingId=t(e);return _.extend(i,AGN.Lib.Helpers.objFromString(e.data("editor-options")))};function t(e){const t=e.data("form-target");const i=!!t?$(t):null;if(!i||!i.exists()){return null}const n=AGN.Lib.Form.get(i);let r=n.getValue("mailingID");if(!r){r=n.getValue("mailingId")}return r}})();AGN.Lib.Validator.new("action",{valid:function(e,t,i){return i&&!this.errors(e,t).length},errors:function(e,t){const i=[];if($("#serviceMailOperation").length)this.validateSendServiceOperation(i);return i},validateSendServiceOperation:function(e){validateEmailList($("input[id$=toAddress]"),e,"triggerManager.operation.serviceMail.error.recipientAddress");validateEmail($("input[id$=fromAddress]"),e,"triggerManager.operation.serviceMail.error.senderAddress");validateEmail($("input[id$=replyAddress]"),e,"triggerManager.operation.serviceMail.error.replyAddress");validateSubject($("input[id$=subjectLine]"),e)}});function validateEmailList(e,i,n){e.each((function(e,r){const o=$(r);const s=getEmailsFromField(o);if(!s||!isValidEmailList(s)){i.push({field:o,msg:t(n)})}else{o.val(s.join(","))}}))}function validateEmail(e,i,n){e.each((function(e,r){const o=$(r);const s=o.val().trim();if(!AGN.Lib.Helpers.isValidEmail(s)){i.push({field:o,msg:t(n)})}else{o.val(s)}}))}function validateSubject(e,i){e.each((function(e,n){const r=$(n);const o=r.val().trim();if(!o||o.length<3){i.push({field:r,msg:t("triggerManager.operation.serviceMail.error.subjectToShort")})}else if(o&&o.length>200){i.push({field:r,msg:t("triggerManager.operation.serviceMail.error.subjectToLong")})}else{r.val(o)}}))}function getEmailsFromField(e){const t=e.val();let i=t.trim()&&t.trim().split(/[ ,|]+/);_.map(i,_.trim);return i}function isValidEmailList(e){return e.every((e=>AGN.Lib.Helpers.isValidEmail(e)))}(function(){AGN.Lib.Validator.new("client/form",{valid:function(e,t,i){return i&&!this.errors(e,t).length},errors:(e,i)=>{const n=[];$("#technical-contact-block input").each((function(){const e=$(this);const i=e.val();if(!$.trim(i)){n.push({field:e,msg:t("fields.required.errors.missing")})}else if(!AGN.Lib.Helpers.isValidEmail(i)){n.push({field:e,msg:t("import.columnMapping.error.invalidEmail")})}}));return n}})})();AGN.Lib.Validator.new("email-validator",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){const n=e.is("select[multiple]")?e.val():e.val().split(",");if(!n.length&&i.required){return[{field:e,msg:t("fields.required.errors.missing")}]}if(AGN.Lib.Helpers.isValidEmails(n)){return[]}return[{field:e,msg:t("defaults.invalidEmail")}]}});(function(){AGN.Lib.Validator.new("export/form",{valid:function(e,t){return!this.errors(e,t).length},errors:function(t,i){const n=[];e(n);return n}});function e(e){const t=[];_.each($("#custom-column-mappings tbody").find("tr"),(function(o){const s=$(o);const a=s.find('[data-name="dbColumn"]');const l=r(a);i(a,e);n(l,t,e,a);t.push(l.toLowerCase())}))}function i(e,i){const n=r(e);const o=e.is(":last-child");if(!o&&n.length<3||o&&n&&n.length<3){i.push({field:e,msg:t("export.columnMapping.error.nameToShort")});return}if(!o&&!/^[a-zA-Z0-9_]{3,}$/.test(n)||o&&n&&!/^[a-zA-Z0-9_]{3,}$/.test(n)){i.push({field:e,msg:t("export.columnMapping.error.invalidColName")})}}function n(e,i,n,r){if(e&&i.indexOf(e.toLowerCase())>=0){n.push({field:r,msg:t("export.columnMapping.error.duplicate")})}if(o().indexOf(e.toLowerCase())>=0){n.push({field:r,msg:t("export.columnMapping.error.exist")})}}function r(e){return e.val().trim()}function o(){return $.map($('select[name="userColumns"] option'),(function(e){return e.value.toLowerCase()}))}})();(function(){let e;AGN.Lib.Validator.new("import-profile-mappings/form",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,t){const i=[];a(i,t.$mappingsBlock);return i}});function i(e,t){return t.length<=n(e)}function n(e){const t=e.simpleDataType.toLowerCase();if(t==="float"||t==="numeric"){return e.numericPrecision+e.numericScale}return e.characterLength}function r(e){let t=e.val();if(t[0]=="'"&&t[t.length-1]=="'"){t=t.substring(1,t.length-1)}return t}function o(o,a){const h=r(o);if(h&&c(o)!==e.doNotImportValue){const e=l(o);const r=e.simpleDataType.toLowerCase();if(e.columnName==="email"&&!AGN.Lib.Helpers.isValidEmail(h)){a.push({field:o,msg:t("import.columnMapping.error.invalidEmail")})}else if(r==="date"||r==="datetime"){if(u(o.val().trim())){return}s(r,h,a,o)}else if(!d(r,h)){a.push({field:o,msg:t("import.columnMapping.error.type",r)})}else if(!i(e,h)){a.push({field:o,msg:t("import.columnMapping.error.length",n(e))})}}}function s(e,i,n,r){if(!i||!d(e,i)){n.push({field:r,msg:t("import.columnMapping.error.dateFormat",e==="datetime"?window.adminDateFormat+" hh:mm":window.adminDateFormat)})}}function a(t,i){_.each(i.find("[data-mapping-defaultValue]"),(i=>{const n=$(i);const r=n.closest("[data-mapping-row]");if(!r.is("[data-mapping-new]")||c(n)!==e.doNotImportValue&&!m()){o(n,t)}}))}function l(t){return e.columns[c(t)]}function c(e){return e.closest("[data-mapping-row]").find("[data-mapping-db-column]").first().val()}function d(e,t){switch(e){case"numeric":case"float":case"double":return f(t);case"integer":return g(t);case"date":return h(t);case"datetime":return p(t);default:return true}}function u(e){return/^(now|now\(\)|sysdate|sysdate\(\)|current_timestamp|current_timestamp\(\)|today)\s*([+\-]\s*\d+\s*)?$/im.test(e)}function h(e){return moment(e,window.adminDateFormat.toUpperCase(),true).isValid()}function p(e){const t=e.split(" ");return h(t[0])&&/^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/.test(t[1])}function f(e){return!isNaN(parseFloat(e))&&isFinite(e)}function g(e){return/^-?\d+$/.test(e)}function m(){const e=$("[data-action=set-today-date]");return e.exists()&&e.is(":checked")}AGN.Lib.DomInitializer.new("import-profile-mappings-validator",(function(){e=this.config}))})();AGN.Lib.Validator.new("length",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=e.val();var r=[];if(n){if(i.min>=0&&n.length<i.min){r.push({field:e,msg:t("fields.errors.string_exceed_min_length",i.min)})}else if(i.max>=0&&n.length>i.max){r.push({field:e,msg:t("fields.errors.string_exceed_max_length",i.max)})}}else if(i.min>0||i.required===true){r.push({field:e,msg:t("fields.required.errors.missing")})}return r}});AGN.Lib.Validator.new("logon-new-password/form",{valid:function(){return!this.errors().length},errors:function(){var e=[];var i=$("#password");var n=$("#password-repeat");var r=i.val();if(!$.trim(r)){e.push({field:i,msg:t("fields.required.errors.missing")})}else if(r!=n.val()){e.push({field:n,msg:t("fields.password.errors.notMatching")})}return e}});AGN.Lib.Validator.new("mailing-priorities/form",{valid:function(){if($("#priorityCount").val()>0){return true}AGN.Lib.Messages.alert("error.mailing.invalidPriorityCount");return false},errors:function(){return[]}});AGN.Lib.Validator.new("mailinglist-exist",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=e.val();var r=AGN.Lib.Validator.get("required-id").errors(e,i);if(r&&r.length<=0&&i&&n&&i.removedMailinglistId==n.trim()){r.push({field:e,msg:t("fields.mailinglist.errors.removed")})}return r}});AGN.Lib.Validator.new("max-length-validator",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=e.val();var r=[];if(e.hasClass("js-wysiwyg")&&!n){n=$("#cke_"+e.attr("id")).find("iframe").contents().find("body").text()}if(n){if(n.length>i.max){r.push({field:e,msg:t("fields.errors.contentLengthExceedsLimit",i.max)})}}else if(i.required===true){r.push({field:e,msg:t("fields.required.errors.missing")})}return r}});(function(){AGN.Lib.Validator.new("number",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=[];if(i.excludeHidden&&e.is(":hidden")){return[]}var r=e.val();if(r){var o=i.float===true?parseFloat(r):parseInt(r);if(isNaN(o)){n.push({field:e,msg:t("fields.errors.number_nan")})}else{if(o<i.min){n.push({field:e,msg:t("fields.errors.number_exceed_min",i.min-1)})}else if(o>i.max){n.push({field:e,msg:t("fields.errors.number_exceed_max",i.max)})}else if(i.strict===true){if($.trim(r)!==o.toString()){if(i.float===true){n.push({field:e,msg:t("fields.errors.number_not_double")})}else{n.push({field:e,msg:t("fields.errors.number_not_integer")})}}}}}else if(i.required===true){n.push({field:e,msg:t("fields.required.errors.missing")})}return n}})})();AGN.Lib.Validator.new("phone-number",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=$.trim(e.val());var r=[];var o=0;var s=1;var a=3;var l=4;var c=5;var d=6;if(n){var u=o;var h=false;var p=false;var f=0;for(var g=0;g<n.length;g++){var m=n.charAt(g);if(m>="0"&&m<="9"){f++;u=a}else if(m=="."||m=="-"||m=="/"){if(u==a||u==d){u=l}else{h=true;break}}else if(m=="("){if(p){h=true;break}u=c;p=true}else if(m==")"){if(u==a&&p){u=d;p=false}else{h=true;break}}else if(m=="+"){if(u==o){u=s}else{h=true;break}}else if(!/\s/.test(m)){h=true;break}}if(h||p||f<3||f>20){r.push({field:e,msg:t("fields.errors.phone_number_invalid")})}}else if(i.required===true){r.push({field:e,msg:t("fields.required.errors.missing")})}return r}});(function(){AGN.Lib.Validator.new("reference-table/form",{valid:function(e,t){return!this.errors(e,t).length},errors:function(t,i){var n=[];var r=$('[name="shortname"]');var o=$('[name="keyColumn"]');if(r.length)e(r,n,5,i.isVoucher?27:29,new RegExp("^[a-z]*$","i"),"referenceTables.table.error.name");if(o.length)e(o,n,3,30,/^(?![0-9_])[a-z0-9_]*$/,"referenceTables.table.error.keyColumn");return n}});function e(e,t,r,o,s,a){if(!i(e,t,r,o)){return}n(e,t,s,a)}function i(e,t,i,n){var r=AGN.Lib.Validator.get("length").errors(e,{min:i,max:n,required:true});if(r.length){r.forEach((function(e){t.push(e)}));return false}return true}function n(e,i,n,r){if(!e.val().match(n)){i.push({field:e,msg:t(r)})}}})();(()=>{AGN.Lib.Validator.new("reject-not-allowed-chars",{valid:function(e,t){return!this.errors(e,t).length},errors:function(i,n){const r=typeof n.chars==="string"?$(n.chars).json().chars:n.chars;const o=e(i.val(),r);if(!o.length){return[]}return[{field:i,msg:t(n.msgKey,o.map((e=>`'${e}'`)).join(", "))}]}});function e(e,t){const i=[];const n=new Set(t);for(let t of e){if(!n.has(t)&&!i.includes(t)){i.push(t)}}return i}})();AGN.Lib.Validator.new("reject-script-element",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=[];var r=(new DOMParser).parseFromString(e.val(),"text/html").querySelector("script");if(r){n.push({field:e,msg:t("fields.errors.illegal_script_element")})}return n}});AGN.Lib.Validator.new("required-id",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){if(e.data("select2")&&!e.parent().find(".select2-container").is(":visible")){return[]}var n=e.val();var r=parseInt(n);var o=[];if(isNaN(r)||r.toString()!==n.toString().trim()||r<=0&&i.positive!==false){o.push({field:e,msg:t("fields.required.errors.missing")})}return o}});AGN.Lib.Validator.new("unique-mobile-base",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=AGN.Lib.Select.get(e).getSelectedValue();var r=e.attr("id");var o=[];if(!this.isUniqueMobileBase(n,r)){o.push({field:e,msg:t("fields.mediapool.errors.mobile_base_duplicate")})}return o},isUniqueMobileBase:function(e,t){if(e==""){return true}var i=$("[id^=image-mobile-base]:not(#"+t+")").filter((function(){var t=$(this);return AGN.Lib.Select.get(t).getSelectedValue()===e}));return i.length===0}});AGN.Lib.Validator.new("upload-file/form",{valid:function(e,t,i){let n=true;const r=e.get$();if(r.data("upload-selection").length<1){AGN.Lib.Messages.alert("error.upload.file");n=false}return i&&n&&!this.errors(e,t).length},errors:function(e,i){const n="error.workflow.shortName";const r="fields.required.errors.missing";var o=[{field:$("#name"),minLength:{val:3,msgKey:n},maxLength:99},{field:$("#firstName"),minLength:{val:3,msgKey:n},maxLength:99},{field:$("#phone"),minLength:{val:1,msgKey:r},maxLength:99},{field:$("#email"),maxLength:99,regexpRules:[{regexp:/\S+@\S+\.\S{2,}/,message:t("error.upload.email")}]}];var s=[];o.forEach((function(e){var i=e.field;var n=i.val();if(!n||n.length<1){s.push({field:i,msg:t(r)});return}if(e.minLength&&n.length<e.minLength.val){s.push({field:i,msg:t(e.minLength.msgKey)});return}if(e.maxLength&&n.length>e.maxLength){s.push({field:i,msg:t("fields.errors.contentLengthExceedsLimit",e.maxLength)});return}if(e.regexpRules&&e.regexpRules.length>0){for(var o=0;o<e.regexpRules.length;++o){var a=e.regexpRules[o];if(!n.match(a.regexp)){s.push({field:i,msg:a.message});return}}}}));return s}});AGN.Lib.Validator.new("userform-edit/form",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=[];var r=$('[name="formName"]');if(!r.val().match(/^[a-zA-Z0-9-_]+$/gi)){n.push({field:r,msg:t("userform.error.invalid_name")})}this.validateUrlField(n,"success");this.validateUrlField(n,"error");this.validateTemplateField(n,$("#successTemplate"),"SUCCESS");this.validateTemplateField(n,$("#errorTemplate"),"ERROR");return n},validateUrlField(e,i){const n=$(`#${i}URL`);if($(`[name="${i}Settings.useUrl"]`).prop("checked")&&!AGN.Lib.Helpers.isUrl(n.val())){e.push({field:n,msg:t(`userform.error.invalid_${i}Url`)})}},validateTemplateField:function(e,i,n){const r=n.toLowerCase();if(!$(`[name="${r}Settings.useUrl"]`).prop("checked")&&!i.val().trim()){e.push({field:$(`#${r}-form-editor .tile-body`),msg:t(`userform.error.invalid_${r}Html`)})}if(!this.validateDirectives(e,i)){return false}if(!this.validateHrefPattern(e,i,n)){return false}},validateDirectives:function(e,i){var n=i.val().match(/#(?:include|parse)/gi);if(n){e.push({field:i,msg:t("userform.error.illegal_directive",n.join(", "))});return false}return true},validateHrefPattern:function(e,i,n){var r=i.val();var o=r.search(/\shref\s*=\s*(["'])\s/gi);if(o!=-1){var s=r.slice(0,o).match(/\r?\n/g).length+1;e.push({field:i,msg:t("userform.error.invalid_link",n,s)});return false}return true}});AGN.Lib.Dashboard.Def={LAYOUT:{DEFAULT:{COLS_COUNT:3,ROWS_COUNT:2,SCHEMA:[{id:"mailings"},{id:"statistics"},{id:"imports-exports"},{id:"calendar"},{id:"news"}]}},TileSize:{REGULAR:{dimensions:[1,1],name:"regular"},TALL:{dimensions:[2,1],name:"tall"},WIDE:{dimensions:[1,2],name:"wide"},X_WIDE:{dimensions:[1,3],name:"x-wide"},X_LARGE:{dimensions:[2,3],name:"xl"},from:function(e){for(let t in this){if(this[t].name===e){return this[t]}}return null}}};(()=>{const e=AGN.Lib.Dashboard.Def.TileSize;class t{constructor(e,t,i){this.rows=e;this.cols=t;this.swapper=new AGN.Lib.Dashboard.TileSwapper(this);this.$container=$("#dashboard-tiles");this.$container.on("agn:grid-modified",((e,t)=>this.onGridTileModified(t)));this.fillGrid(i)}fillGrid(e){this.#Dt(e);this.removeAllTiles();e.forEach((e=>e.displayIn(this.$container)));this.$container.removeClass(((e,t)=>(t.match(/\bdashboard-grid-cols-\S+/g)||[]).join(" ")));this.$container.addClass(`dashboard-grid-cols-${this.cols}`)}#Dt(e){e.sort(((e,t)=>{const i=e.position.rows[0];const n=e.position.cols[0];const r=t.position.rows[0];const o=t.position.cols[0];if(i!==r){return i-r}return n-o}))}removeAllTiles(){this.$tiles.each(((e,t)=>$(t).data("tile").remove()))}get visibleTiles(){return this.tiles.filter((e=>e.$el.css("visibility")!=="hidden"))}get schema(){return{COLS_COUNT:this.cols,SCHEMA:this.tiles.map((({id:e,position:t})=>({id:e,position:t})))}}isCellFree(e,t){const i=this.getTile(e,t);return!i||i.isEmpty}canPlaceTile(e,t,i){const[n,r]=e.dimensions;for(let e=0;e<n;e++){for(let n=0;n<r;n++){let r=t+e;let o=i+n;if(r>=this.rows||o>=this.cols||!this.isCellFree(r,o)){return false}}}return true}onGridTileModified(e){this.updateTilesPositions();if(e){this.swapper.initDragAndDrop(e)}}placeTileAtPos(e,t,i){if(!this.canPlaceTile(e.size,t,i)){return}const[n,r]=e.size.dimensions;this.getInterferingTiles(n,r,t,i).forEach((e=>e?.remove()));this.insertTile(e,t,i)}getInterferingTiles(e,t,i,n){return _.flatMap(_.range(e),(e=>_.range(t).map((t=>this.getTile(i+e,n+t))).filter(Boolean)))}insertTile(e,t,i){const n=this.getTile(t,i);const r=this.getPreviousTileOf(n);if(r){e.insertAfter(r)}else if(n){e.insertBefore(n)}else{e.displayIn(this.$container)}}getPreviousTileOf(e){if(!e){return null}const t=this.tiles;const i=t.findIndex((t=>t===e));return i>0?t[i-1]:null}get tiles(){return this.$tiles.toArray().map((e=>$(e).data("tile")))}get tallTiles(){return this.tiles.filter((e=>e.isTall))}get xlTiles(){return this.tiles.filter((e=>e.isXl))}get wideTiles(){return this.tiles.filter((e=>e.isWide))}get xWideTiles(){return this.tiles.filter((e=>e.isXWide))}get $tiles(){return $(".draggable-tile")}getTile(e,t){return this.tiles.find((i=>i.position.rows.includes(e)&&i.position.cols.includes(t)))}getPossibleStartPositions(e,t,i){const[n,r]=e.dimensions;const o=[];for(let s=t-n+1;s<=t;s++){for(let t=i-r+1;t<=i;t++){if(s>=0&&t>=0&&this.canPlaceTile(e,s,t)){o.push([s,t])}}}return o}placeTileAroundPos(e,t,i){const n=this.getPossibleStartPositions(e.size,t,i);if(n.length>0){const[t,i]=n[0];this.placeTileAtPos(e,t,i)}}createEmptyTile(){return new AGN.Lib.Dashboard.EmptyTile}removeTile(e){if(!e){return}e.remove();const{rows:t,cols:i}=e.position;t.forEach((e=>i.forEach((t=>this.insertTile(this.createEmptyTile(),e,t)))))}updateTilesPositions(){const e=this.tiles;const t={row:0,col:-1};e.forEach((e=>e.position={rows:[],cols:[]}));e.forEach((i=>i.position=this.calculateTilePositionInGrid(e,i.size,t)))}calculateTilePositionInGrid(t,i,n){n.col=n.col+1;if(n.col>=this.cols){n.row=n.row+1;n.col=0}while(this.isPositionAlreadyTakenByOtherExtendedTile(t,n.row,n.col)){n.col=n.col+1}switch(i){case e.TALL:return{rows:[0,1],cols:[n.col]};case e.WIDE:n.col=n.col+1;return{rows:[n.row],cols:[n.col-1,n.col]};case e.X_WIDE:n.col=n.col+2;return{rows:[n.row],cols:[n.col-2,n.col-1,n.col]};case e.X_LARGE:n.col=n.col+2;return{rows:[0,1],cols:[n.col-2,n.col-1,n.col]};default:return{rows:[n.row],cols:[n.col]}}}isPositionAlreadyTakenByOtherExtendedTile(e,t,i){return e.filter((e=>!e.isRegular)).some((e=>e.position.rows.includes(t)&&e.position.cols.includes(i)))}}AGN.Lib.Dashboard.DashboardGrid=t})();(()=>{const e=AGN.Lib.Dashboard.Def.TileSize;class t{constructor(e){this.grid=e}toggle(e){this.grid.$tiles.draggable("option","disabled",!e)}initDragAndDrop(e){this.setDraggable(e);this.setDroppable(e)}setDraggable(e){const t=this;e.$el.draggable({containment:this.grid.$container,opacity:.7,zIndex:1e3,cursor:"move",scroll:false,appendTo:"body",helper:function(e){const t=$(e.currentTarget);return t.clone(true).css({animation:"none",width:t.width(),height:t.height()})},start(){$(this).css({opacity:0});t.switchNotAllowedDroppables($(this),false)},stop(){$(this).css({opacity:1});t.switchNotAllowedDroppables($(this),true)}})}switchNotAllowedDroppables(e,t){this._getNotAllowedDroppablesToSwitch(AGN.Lib.Dashboard.DraggableTile.get(e)).forEach((e=>e.switchDroppable(t)))}_getNotAllowedDroppablesToSwitch(e){if(e.isRegular){return this.grid.tiles.filter((e=>!e.isRegular))}if(e.isTall){return[...this.getTilesUnderOrAboveWideTiles(),...this.grid.wideTiles,...this.grid.xWideTiles]}if(e.isWide){return[...this.getTilesLockedByTallTiles(),...this.grid.tallTiles,...this.grid.xWideTiles]}if(e.isXWide){return[...this.grid.tallTiles,...this.grid.xlTiles]}return[]}setDroppable(e){const t=this;e.$el.droppable({accept:".draggable-tile",tolerance:"pointer",activeClass:"draggable-accept",over:function(e,i){t.unhighlightAll();const n=AGN.Lib.Dashboard.DraggableTile.get(i.draggable);const r=AGN.Lib.Dashboard.DraggableTile.get($(this));t.getReadyToSwapTiles(n,r).forEach((e=>e.toggleHighlight(true)))},drop:async function(e,i){const n=AGN.Lib.Dashboard.DraggableTile.get(i.draggable);const r=AGN.Lib.Dashboard.DraggableTile.get($(this));await t.swapTiles(n,r);t.grid.updateTilesPositions()},deactivate:()=>t.unhighlightAll()})}getReadyToSwapTiles(t,i){switch(t.size){case e.TALL:case e.X_LARGE:return this.getTilesHoveredByTallTile(i);case e.WIDE:return this.getTilesHoveredByWideTile(t,i);case e.X_WIDE:return this.getTilesHoveredByExtraWideTile(t,i);default:return[i]}}getTilesHoveredByTallTile(e){const{beginCol:t}=e;const i=[this.grid.getTile(0,t)];const n=this.grid.getTile(1,t);if(!i[0].isTall){i.push(n)}return i}getTilesHoveredByWideTile(e,t){return e.beginRow===t.beginRow?this.getTilesHoveredByWideTileAtSameRow(e,t):this.getTilesHoveredByWideTileAtAnotherRow(e,t)}getTilesHoveredByWideTileAtSameRow(e,t){const{beginCol:i,beginRow:n}=e;if(t.beginCol===i-2||t.beginCol===i+3){return[t,this.grid.getTile(n,t.beginCol)]}return[t]}getTilesHoveredByWideTileAtAnotherRow(e,t){const{beginCol:i,beginRow:n}=t;const r=this.grid.getTile(n,i+1);const o=this.grid.getTile(n,i-1);if(!this.isFirstCol(i)&&o.isRegular){return[t,o]}else if(!this.isLastCol(i)&&r.isRegular){return[t,r]}return[]}getTilesHoveredByExtraWideTile(e,t){return e.beginRow===t.beginRow?[t]:this.getTilesHoveredByExtraWideTileAtAnotherRow(e,t)}getTilesHoveredByExtraWideTileAtAnotherRow(e,t){const{beginCol:i,beginRow:n}=t;const r=this.grid.getTile(n,i+1);const o=this.grid.getTile(n,i+2);const s=this.grid.getTile(n,i-1);const a=this.grid.getTile(n,i-2);let l;if(this.isFirstCol(i)){l=[t,r,o]}else if(this.isLastCol(i)){l=[a,s,t]}else{l=e.position.cols.map((e=>this.grid.getTile(n,e)))}l=[...new Set(l)];const c=l.filter((e=>e.isRegular)).length;const d=l.filter((e=>e.isWide)).length;return c===3||c===1&&d===1?l:[]}unhighlightAll(){this.grid.tiles.forEach((e=>e.toggleHighlight(false)))}async swapTiles(t,i){switch(t.size){case e.TALL:this.moveTallTile(t,i);break;case e.WIDE:this.moveWideTile(t,i);break;case e.X_WIDE:this.moveExtraWideTile(t,i);break;case e.X_LARGE:this.moveXlTile(t,i);break;default:t.swap(i);break}}moveTallTile(e,t){const i=e.beginCol;const n=t.beginCol;const r=this.grid.getTile(0,n);const o=this.grid.getTile(1,n);const s=this.getPreviousTileOfTallTileBottomPart(i);if(r.$el.is(s.$el)){s.$el.after(o.$el);e.swap(r)}else{e.swap(r);if(!r.isTall){s.$el.after(o.$el)}}}getPreviousTileOfTallTileBottomPart(e){if(this.isFirstCol(e)){return this.grid.getTile(0,this.grid.cols-1)}if(this.grid.getTile(1,e-1).isTall){return this.getPreviousTileOfTallTileBottomPart(e-1)}return this.grid.getTile(1,e-1)}getTilesUnderOrAboveWideTiles(){return[...this.grid.wideTiles,...this.grid.xWideTiles].map((e=>{const t=e.beginRow===0?1:0;return e.position.cols.map((e=>this.grid.getTile(t,e)))})).flat()}getTilesLockedByTallTiles(){return this.grid.tiles.filter((e=>e.isRegular&&(this.isFirstCol(e.beginCol)&&this.grid.getTile(e.beginRow,1).isTall)||this.isLastCol(e.beginCol)&&this.grid.getTile(e.beginRow,this.grid.cols-2).isTall))}moveWideTile(e,t){if(e.beginRow===t.beginRow){this.moveWideTileAtSameRow(e,t)}else{this.moveWideTileToAnotherRow(e,t)}}moveWideTileAtSameRow(e,t){const{beginCol:i,beginRow:n}=e;if(t.beginCol===i-2){this.grid.getTile(n,i-2).$el.before(e.$el)}else if(t.beginCol===i+3){this.grid.getTile(n,i+3).$el.after(e.$el)}else{e.swap(t)}}moveWideTileToAnotherRow(e,t){const{beginCol:i,beginRow:n}=t;const r=this.grid.getTile(n,i+1);const o=this.grid.getTile(n,i-1);if(!this.isFirstCol(i)&&o.isRegular){this.replaceWideTileWithDroppableAndPrev(e,t,o)}else if(!this.isLastCol(i)&&r.isRegular){this.replaceWideTileWithDroppableAndNext(e,t,r)}}replaceWideTileWithDroppableAndNext(e,t,i){e.swap(t);t.$el.after(i.$el)}replaceWideTileWithDroppableAndPrev(e,t,i){e.swap(i);i.$el.after(t.$el)}moveExtraWideTile(e,t){if(e.beginRow===t.beginRow){e.swap(t)}else{this.moveExtraWideTileToAnotherRow(e,t)}}moveExtraWideTileToAnotherRow(e,t){const[i,n,r]=this.getTilesHoveredByExtraWideTile(e,t);if(i){e.swap(i)}if(n){i.$el.after(n.$el)}if(r){n.$el.after(r.$el)}}moveXlTile(e,t){const i=t.beginCol;const n=this.grid.getTile(0,i);const r=this.grid.getTile(1,i);if(this.isLastCol(i)){e.$el.before(n.$el)}else{e.$el.after(n.$el)}if(!n.isTall){(this.isLastCol(i)?e.$el:n.$el).after(r.$el)}}isFirstCol(e){return e===0}isLastCol(e){return e===this.grid.cols-1}}AGN.Lib.Dashboard.TileSwapper=t})();(()=>{const e=AGN.Lib.Template;const t=AGN.Lib.Popover;class i{static SELECTOR=".xl-calendar-label";constructor(e){this.data=e;if(!this.$day.exists()&&!this.data.inUnsentList){return}this.create$()}get date(){return this.data.date}get $day(){return $(`${this.Calendar.DAY_SELECTOR}[data-date="${this.date}"]`)}get $elText(){return this.$el.find(`${i.SELECTOR}__text`)}create$(){this.$el=e.dom(this.templateName,this.templateParams);this.attachToCalendar();this.createPopover();this.$el.data("label",this);if(this.draggable){this.initDragging()}AGN.Lib.CoreInitializer.run("tooltip",this.$el);return this.$el}attachToCalendar(){if(this.data.inUnsentList){this.attachToUnsentMailings()}else{this.attachToDay()}}attachToDay(){this.$day.find(`${this.Calendar.DAY_SELECTOR}__body`).append(this.$el)}attachToUnsentMailings(){this.unsentMailings$.append(this.$el);AGN.Lib.CoreInitializer.run(["tooltip","scrollable"],this.unsentMailings$)}get unsentMailings$(){return $(this.Calendar.UNSENT_MAILINGS_LIST_SELECTOR)}get draggable(){return true}get templateParams(){return{labelId:this.labelId}}get labelId(){return`xl-calendar-${this.type}-${this.entityId}`}get entityId(){throw new Error("entityId() must be implemented in extended class")}get templateName(){return`xl-calendar-${this.type}-label`}get type(){return this.constructor.TYPE}get popoverOptions(){throw new Error("popoverOptions() must be implemented in extended class")}get Calendar(){return AGN.Lib.Dashboard.XlCalendar}initDragging(){this.$el.draggable({cursor:"move",containment:$("#xl-calendar-tile .tile-body"),distance:20,appendTo:"body",zIndex:2,helper:function(e){const t=$(e.currentTarget);return t.clone(true).css({width:t.width(),height:t.height()})},start:()=>this.onDragStart(),stop:()=>this.onDragStop(),revert:e=>{if(!e){this.show()}return false}})}createPopover(){t.remove(this.$elText);t.create(this.$elText,this.popoverOptions)}#Mt(e){this.$el.css({opacity:e?"1":"0"})}show(){this.#Mt(true)}hide(){this.#Mt(false)}onDragStart(){this.hide();this.#kt();this.#Pt()}onDragStop(){this.#Rt()}#kt(){_.each($(i.SELECTOR),(e=>t.get($(e))?.disable()))}#Rt(){_.each($(i.SELECTOR),(e=>t.get($(e))?.enable()))}#Pt(){let e;if(document.selection&&document.selection.empty){document.selection.empty()}else if(window.getSelection){e=window.getSelection();if(e&&e.removeAllRanges)e.removeAllRanges()}}drop(e){if(!this.canMoveTo(e)){this.show();return}this.moveTo(e)}canMoveTo(e){return!e.is(this.$day)}moveTo(e){const t=this.Calendar.getLastLabelOfType(e,this.type);if(t?.length){t.$el.after(this.$el)}else{e.find(`${this.Calendar.DAY_SELECTOR}__body`).append(this.$el)}this.show()}remove(){this.$el.remove()}static get(e){return e.data("label")}static getByEntityId(e,t){return $(`#xl-calendar #xl-calendar-${t}-${e}`).data("label")}}AGN.Lib.Dashboard.XlCalendarLabel=i})();(()=>{const e=AGN.Lib.Modal;const t=AGN.Lib.Form;const i=AGN.Lib.Dashboard.XlCalendarLabel;class n extends i{static TYPE="comment";static SELECTOR=i.SELECTOR+"--comment";constructor(e){super(e)}attachToDay(){this.$day.find(`${this.Calendar.DAY_SELECTOR}__body`).prepend(this.$el)}get templateParams(){return _.merge(super.templateParams,{comment:this.data.comment})}get entityId(){return this.data.commentId}get form(){return t.get($("#calendar-comment-form"))}get saveUrl(){return AGN.url("/calendar/saveComment.action")}get popoverOptions(){return{trigger:"hover",html:true,text:this.data.comment.replace(/\n/g,"<br>")}}moveTo(e){this.data.date=e.data("date");$.post(this.saveUrl,this.data).done((t=>{if(t.commentId){e.find(`${this.Calendar.DAY_SELECTOR}__body`).prepend(this.$el)}this.show()}))}remove(){$.post(AGN.url("/calendar/removeComment.action"),{commentId:this.entityId}).done((()=>super.remove()))}updateComment(e){this.data=e;this.$elText.text(this.data.comment);this.createPopover()}showModal(){n.showModal(this.data)}static showModal(t){t=_.extend(n.createNewEmptyComment(t.date),t);t.comment=t.comment?.replace(/<br>/gi,"\n");if(!t.recipients){t.recipients=[]}t.recipients=(Array.isArray(t.recipients)?t.recipients:t.recipients.split(",")).map((e=>e.trim())).filter((e=>e!==""));t.isCustomRecipients=!!t.recipients.length;t.sendReminder=!!t.deadline;e.fromTemplate("calendar-comment-modal",t)}static createNewEmptyComment(e){return{commentId:0,comment:"",recipients:[],deadline:false,plannedSendDate:moment(e,"DD-MM-YYYY").format(window.adminDateFormat.toUpperCase())+" 08:00"}}static getOrCreate(e){const t=i.getByEntityId(e.commentId,n.TYPE);if(t){return t}return new n(e)}}AGN.Lib.Dashboard.XlCalendarCommentLabel=n})();(()=>{const e=AGN.Lib.Dashboard.XlCalendarLabel;const t=AGN.Lib.Storage;class i extends e{static TYPE="mailing";constructor(e,t){super(e);this.limit=t}get templateParams(){return _.merge(super.templateParams,{link:this.data.link,mediatype:"mailing.mediatype."+this.data.mediatype?.toLowerCase(),status:this.data.workstatus,shortname:this.data.shortname})}get draggable(){return!(this.data.inUnsentList&&this.data.planned)}get date(){return this.data.sendDate}set date(e){return this.data.sendDate=e}get entityId(){return this.data.mailingId}get isUnsentPlannedListSelected(){return t.get(this.Calendar.UNSENT_MAILINGS_STORAGE_KEY)==="planned"}createPopover(){this.data.$el=this.$elText;AGN.Lib.Dashboard.CalendarBaseUxUpdateRollback.createMailingPopover(this.data)}canMoveTo(e){if(!super.canMoveTo(e)){return false}if(this.data.sent===true){return false}if(e.is(this.unsentMailings$)){return!this.isUnsentPlannedListSelected&&this.data.workstatus!=="mailing.status.scheduled"}const t=e.data("date");return moment(t+this.data.sendTime,"DD-MM-YYYY HH:mm").toDate()>=new Date}moveTo(e){if(e.is(this.unsentMailings$)){this.moveToUnsentList()}else{this.moveToDay(e)}}moveToDay(e){const t=e.data("date");$.post(AGN.url("/calendar/moveMailing.action"),{mailingId:this.entityId,date:t}).done((i=>{if(i.success===true){this.insertLabelInDay(e);this.date=t}this.show()}))}moveToUnsentList(){$.post(AGN.url(`/calendar/mailing/${this.entityId}/clearPlannedDate.action`)).done((e=>{if(e){this.date="";this.unsentMailings$.append(this.$el)}})).always((()=>this.show()))}insertLabelInDay(e){const t=e.data("date");let n=this.data.time;const r=moment(t+n,"DD-MM-YYYY HH:mm").toDate();const o=new Date(r);o.setHours(o.getHours()-3);if(o<new Date){n=null;this.data.time=null}let s=false;if(n){this.Calendar.getLabelsByType(e,i.TYPE).reverse().map((e=>e.data.time<n)).forEach((e=>{e.$el.after(this.$el);s=true}))}if(!s){super.moveTo(e)}}static getOrCreate(t){const n=e.getByEntityId(t.mailingId,i.TYPE);if(n){return n}return new i(t)}}AGN.Lib.Dashboard.XlCalendarMailingLabel=i})();(()=>{const e=AGN.Lib.Dashboard.XlCalendarLabel;class t extends e{static TYPE="auto-opt";constructor(e){super(e)}get templateParams(){return _.merge(super.templateParams,{link:this.link,mediatype:"mailing.mediatype.email",status:"mailing.status."+this.adaptStatus(this.data.autoOptimizationStatus),shortname:this.data.shortname})}get draggable(){return false}get link(){if(!this.data.workflowId){return"#"}return AGN.url("workflow/"+this.data.workflowId+"/view.action")}adaptStatus(e){switch(e){case"NOT_STARTED":return"new";case"FINISHED":return"sent";default:return e.toLowerCase()}}get templateName(){return"xl-calendar-mailing-label"}get date(){return this.data.sendDate}get entityId(){return this.data.id}get popoverOptions(){return{trigger:"hover",text:this.data.shortname}}static getOrCreate(i){const n=e.getByEntityId(i.id,t.TYPE);if(n){return n}return new t(i)}}AGN.Lib.Dashboard.XlCalendarAutoOptLabel=t})();(()=>{const e=AGN.Lib.Dashboard.XlCalendarLabel;class t extends e{static TYPE="push";constructor(e){super(e)}get draggable(){return this.data.status!==t.pushStatusSent}get templateParams(){return _.merge(super.templateParams,{link:AGN.url(`/push/${this.entityId}/view.action`),mediatype:"status.push",status:"mailing.status."+this.data.status.toLowerCase(),shortname:this.data.name})}get templateName(){return"xl-calendar-mailing-label"}get date(){switch(this.data.status){case t.pushStatusSent:return this.data.sendDate;case t.pushStatusScheduled:return this.data.startDate;default:return this.data.plannedFor}}set date(e){switch(this.data.status){case t.pushStatusSent:this.data.sendDate=e;break;case t.pushStatusScheduled:this.data.startDate=e;break;default:this.data.plannedFor=e;break}}get entityId(){return this.data.id}get popoverOptions(){return{trigger:"hover",text:this.data.name}}canMoveTo(e){if(!super.canMoveTo(e)){return false}const i=e.data("date");switch(this.data.status){case t.pushStatusSent:return false;case t.pushStatusScheduled:return moment(i,"DD-MM-YYYY").toDate()>=new Date;default:return true}}moveTo(e){const t=e.data("date");this.$el.hide();$.post(AGN.url("/calendar/movePushNotification.action"),{pushId:this.entityId,date:t}).done((i=>{if(i.success===true){super.moveTo(e);this.date=t}}))}static getOrCreate(i){const n=e.getByEntityId(i.commentId,t.TYPE);if(n){return n}return new t(i)}}AGN.Lib.Dashboard.XlCalendarPushLabel=t})();(()=>{const e=AGN.Lib.Template;const t=AGN.Lib.Popover;class i{static SELECTOR=".dashboard-calendar__label";constructor(e){this.data=e;if(!this.$day.exists()&&!this.data.inUnsentList){return}this.create$()}get date(){return this.data.date}get $day(){return this.calendar.$day(this.date)}toggle(e){this.$el.toggle(e)}get text(){return this.$elText.text()}get $elText(){return this.$el.find(`span:nth-child(2) span`)}create$(){this.$el=e.dom(this.templateName,this.templateParams);this.attachToCalendar();this.createPopover();this.$el.data("label",this);if(this.draggable){this.initDragging()}AGN.Lib.CoreInitializer.run("tooltip",this.$el);return this.$el}attachToCalendar(){if(this.data.inUnsentList){this.attachToUnsentMailings()}else{this.attachToDay()}}attachToDay(){this.calendar.$dayBody(this.$day).append(this.$el)}attachToUnsentMailings(){this.calendar.$unsentList.append(this.$el);AGN.Lib.CoreInitializer.run(["tooltip","scrollable"],this.calendar.$unsentList)}get calendar(){return $("#dashboard-calendar").data("calendar")}get draggable(){return true}get templateParams(){return{labelId:this.labelId}}get labelId(){return`dashboard-calendar-${this.type}-${this.entityId}`}get entityId(){throw new Error("entityId() must be implemented in extended class")}get templateName(){return`dashboard-calendar-${this.type}-label`}get type(){return this.constructor.TYPE}get popoverOptions(){throw new Error("popoverOptions() must be implemented in extended class")}initDragging(){this.$el.draggable({cursor:"move",containment:$("#dashboard-calendar > .tile-body"),distance:10,appendTo:"body",zIndex:2,start:()=>this.onDragStart(),stop:()=>this.onDragStop(),helper:function(e){const t=$(e.currentTarget);return t.clone(true).css({width:t.width(),height:t.height()})},revert:e=>{if(e&&this.canMoveTo(e)){this.moveTo(e).always((()=>this.$el.css("opacity",1)));return false}this.$el.css("opacity",1);return true}})}createPopover(){t.remove(this.$elText);t.create(this.$elText,this.popoverOptions)}onDragStart(){this.$el.css("opacity",.5);this.#kt();this.#Pt()}onDragStop(){this.#Rt()}#kt(){this.calendar.labels.forEach((e=>e.popover?.disable()))}#Rt(){this.calendar.labels.forEach((e=>e.popover?.enable()))}#Pt(){let e;if(document.selection&&document.selection.empty){document.selection.empty()}else if(window.getSelection){e=window.getSelection();if(e&&e.removeAllRanges)e.removeAllRanges()}}canMoveTo(e){return!e.is(this.$day)}moveTo(e){const t=$.Deferred();const i=this.calendar.getLastLabelOfType(e,this.type);if(i?.length){i.$el.after(this.$el)}else{this.calendar.$dayBody(e).append(this.$el)}t.resolve();return t.promise()}remove(){this.$el.remove()}static get(e){return e.data("label")}static getByEntityId(e,t){return $(`#dashboard-calendar #dashboard-calendar-${t}-${e}`).data("label")}}AGN.Lib.Dashboard.DashboardCalendarLabel=i})();(()=>{const e=AGN.Lib.Modal;const t=AGN.Lib.Form;const i=AGN.Lib.Dashboard.DashboardCalendarLabel;class n extends i{static TYPE="comment";static SELECTOR=i.SELECTOR+"--comment";constructor(e){if(_.isNumber(e.date)){e.date=moment(e.date).tz(window.agnTimeZoneId).format("DD-MM-YYYY")}if(_.isNumber(e.plannedSendDate)){e.plannedSendDate=moment(e.plannedSendDate).tz(window.agnTimeZoneId).format(`${window.adminDateFormat.toUpperCase()} HH:mm`)}super(e)}attachToDay(){this.calendar.$dayBody(this.$day).prepend(this.$el)}get templateParams(){return _.merge(super.templateParams,{comment:this.data.comment})}get entityId(){return this.data.commentId}get form(){return t.get($("#calendar-comment-form"))}get saveUrl(){return AGN.url("/calendar/saveComment.action")}createPopover(){}moveTo(e){this.data.date=e.data("date");return $.post(this.saveUrl,this.data).done((t=>{if(t.commentId){this.calendar.$dayBody(e).prepend(this.$el)}}))}remove(){$.post(AGN.url("/calendar/removeComment.action"),{commentId:this.entityId}).done((()=>super.remove()))}updateComment(e){this.data=e;this.$elText.text(this.data.comment);this.createPopover()}showModal(){n.showModal(this.data)}static showModal(t){t=_.extend(n.createNewEmptyComment(t.date),t);t.comment=t.comment?.replace(/<br>/gi,"\n");if(!t.recipients){t.recipients=[]}t.recipients=(Array.isArray(t.recipients)?t.recipients:t.recipients.split(",")).map((e=>e.trim())).filter((e=>e!==""));t.isCustomRecipients=!!t.recipients.length;t.sendReminder=!!t.deadline;e.fromTemplate("calendar-comment-modal",t)}static createNewEmptyComment(e){return{commentId:0,comment:"",recipients:[],deadline:false,plannedSendDate:moment(e,"DD-MM-YYYY").format(window.adminDateFormat.toUpperCase())+" 08:00"}}static getOrCreate(e){const t=i.getByEntityId(e.commentId,n.TYPE);if(t){return t}return new n(e)}}AGN.Lib.Dashboard.DashboardCalendarCommentLabel=n})();(()=>{const e=AGN.Lib.Dashboard.DashboardCalendarLabel;class t extends e{static TYPE="mailing";constructor(e,t){super(e);this.limit=t}get templateParams(){return _.merge(super.templateParams,{link:this.data.link,mediatype:"mailing.mediatype."+this.data.mediatype?.toLowerCase(),status:this.data.status,shortname:this.data.shortname})}get draggable(){return!(this.data.inUnsentList&&this.data.planned)&&!this.data.isSent===true}get date(){return this.data.sendDate}set date(e){return this.data.sendDate=e}get entityId(){return this.data.id}createPopover(){this.data.$el=this.$el;this.popover=new AGN.Lib.Dashboard.MailingPopover(this.data,true)}canMoveTo(e){if(!super.canMoveTo(e)){return false}if(e.is(this.calendar.$unsentList)){return!this.$el.closest("#dashboard-calendar-unsent-tile").exists()&&this.data.status!=="mailing.status.scheduled"}const t=e.data("date");return moment(t+this.data.sendTime,"DD-MM-YYYY HH:mm").toDate()>=new Date}moveTo(e){if(e.is(this.calendar.$unsentList)){return this.moveToUnplannedList()}else{return this.moveToDay(e)}}moveToDay(e){const t=e.data("date");return $.post(AGN.url("/calendar/moveMailing.action"),{mailingId:this.entityId,date:t}).done((i=>{if(i.success===true){this.insertLabelInDay(e);this.date=t}}))}moveToUnplannedList(){return $.post(AGN.url(`/calendar/mailing/${this.entityId}/clearPlannedDate.action`)).done((e=>{if(e){this.date="";this.calendar.$unsentList.append(this.$el)}}))}insertLabelInDay(e){const i=e.data("date");let n=this.data.time;const r=moment(i+n,"DD-MM-YYYY HH:mm").toDate();const o=new Date(r);o.setHours(o.getHours()-3);if(o<new Date){n=null;this.data.time=null}let s=false;if(n){this.calendar.getLabelsByType(e,t.TYPE).reverse().map((e=>e.data.time<n)).forEach((e=>{e.$el.after(this.$el);s=true}))}if(!s){super.moveTo(e)}}static getOrCreate(i){const n=e.getByEntityId(i.id,t.TYPE);if(n&&!n.data.planned){return n}return new t(i)}}AGN.Lib.Dashboard.DashboardCalendarMailingLabel=t})();(()=>{const e=AGN.Lib.Dashboard.DashboardCalendarLabel;class t extends e{static TYPE="auto-opt";constructor(e){if(_.isNumber(e.sendDate)){e.sendDate=moment(e.sendDate).tz(window.agnTimeZoneId).format("DD-MM-YYYY")}super(e)}get templateParams(){return _.merge(super.templateParams,{link:this.link,mediatype:"mailing.mediatype.email",status:"mailing.status."+this.adaptStatusForIcon(this.data.autoOptimizationStatus),tooltip:"mailing.status."+this.adaptStatusForTooltip(this.data.autoOptimizationStatus),shortname:this.data.shortname})}get draggable(){return false}get link(){if(!this.data.workflowId){return"#"}return AGN.url("workflow/"+this.data.workflowId+"/view.action")}adaptStatusForIcon(e){switch(e){case"NOT_STARTED":return"new";case"TEST_SEND":return"ao_test_send";case"EVAL_IN_PROGRESS":return"in-generation";case"FINISHED":return"sent";default:return e.toLowerCase()}}adaptStatusForTooltip(e){switch(e){case"NOT_STARTED":return"new";case"TEST_SEND":return"test";case"EVAL_IN_PROGRESS":return"inGeneration";case"FINISHED":return"sent";default:return e.toLowerCase()}}get date(){return this.data.sendDate}get entityId(){return this.data.id}get popoverOptions(){return{trigger:"hover",text:this.data.shortname}}static getOrCreate(i){const n=e.getByEntityId(i.id,t.TYPE);if(n){return n}return new t(i)}}AGN.Lib.Dashboard.DashboardCalendarAutoOptLabel=t})();(()=>{const e=AGN.Lib.Dashboard.DashboardCalendarLabel;class t extends e{static TYPE="push";constructor(e){if(_.isNumber(e.date)){e.date=moment(e.date).tz(window.agnTimeZoneId).format("DD-MM-YYYY")}super(e)}get pushStatusSent(){return this.calendar.config.pushStatusSent}get pushStatusScheduled(){return this.calendar.config.pushStatusScheduled}get draggable(){return this.data.status!==this.pushStatusSent}get templateParams(){return _.merge(super.templateParams,{link:AGN.url(`/push/${this.entityId}/view.action`),mediatype:"status.push",status:"mailing.status."+this.data.status.toLowerCase(),shortname:this.data.name})}get entityId(){return this.data.id}get popoverOptions(){return{trigger:"hover",text:this.data.name}}canMoveTo(e){if(!super.canMoveTo(e)){return false}const t=e.data("date");switch(this.data.status){case this.pushStatusSent:return false;case this.pushStatusScheduled:return moment(t,"DD-MM-YYYY").toDate()>=new Date;default:return true}}moveTo(e){const t=e.data("date");return $.post(AGN.url("/calendar/movePush.action"),{pushId:this.entityId,date:t}).done((i=>{if(i.success===true){super.moveTo(e);this.sendDate=t}}))}static getOrCreate(i){const n=e.getByEntityId(i.id,t.TYPE);if(n){return n}return new t(i)}}AGN.Lib.Dashboard.DashboardCalendarPushLabel=t})();(()=>{const e=AGN.url("/mailing/:mailingId:/settings.action");const t=AGN.url("/statistics/mailing/:mailingId:/view.action?init=true");class i{constructor(e,t){this.$el=e;this.config=t;this.firstDayOfWeek=t.firstDayOfWeek;this.statisticsViewAllowed=t.statisticsViewAllowed;this.$el.data("calendar",this)}get $year(){}get $month(){}get removeCurrentCalendar(){throw this.notImplementedError("removeCurrentCalendar()")}isToday(e){return moment(e).isSame(moment(),"day")}showMonth(e,t){this.removeCurrentCalendar();const i=this.daysInMonth(e+1,t);let n=new Date(t,e,1);let r=n.getDay()-this.firstDayOfWeek;if(r<0){r=7+r}const o=Math.ceil((i+r)/7);const s=new Date(t,e,1-r);const a=new Date(t,e,1+o*7);n=new Date(s);for(let t=0;t<o;t++){const i="row-"+(t+1);this.addWeekNumber(n,i);for(let t=0;t<7;t++){const t=n.getMonth()!==e;this.addDay(n,t,i);n.setDate(n.getDate()+1)}}const l=this.dateToServiceFormat(s);const c=this.dateToServiceFormat(a);this.fillCalendar(l,c);this.synchronizeMonthsList(e,t)}addWeekNumber(){throw this.notImplementedError("addWeekNumber()")}addDay(){throw this.notImplementedError("addDay()")}fillCalendar(){throw this.notImplementedError("fillCalendar()")}notImplementedError(e){return new Error(`${e} must be implemented in extended class`)}getMailingLink(i){return i.workstatus==="mailing.status.sent"&&i.workstatus!=="mailing.status.test"&&this.statisticsViewAllowed?t.replace(":mailingId:",i.mailingId):e.replace(":mailingId:",i.mailingId)}addYearOption(){const e=$("#month_list_year");const t=parseInt(e.find("option:last").val(),10)+1;e.append($("<option></option>").val(t).text(t))}lastYearSelected(){return $("#month_list_year option:selected").index()===$("#month_list_year option").length-1}daysInMonth(e,t){return new Date(t,e,0).getDate()}synchronizeMonthsList(e,t){this.$year[0].selectedIndex=this.$year.find(`option[value=${t}]`)[0].index;this.$month[0].selectedIndex=this.$month.find(`option[value=${e}]`)[0].index;AGN.runAll(this.$year);AGN.runAll(this.$month)}static pad(e,t){let i=e+"";while(i.length<t)i="0"+i;return i}dateToServiceFormat(e){let t=i.pad(e.getDate(),2);let n=i.pad(e.getMonth()+1,2);let r=e.getFullYear();return t+"-"+n+"-"+r}getWeek(e){var t=new Date(e.valueOf());var i=t.getFullYear();var n=t.getMonth();var r=t.getDate();if(this.firstDayOfWeek===0){r=r+1}n=n+1;var o=Math.floor((14-n)/12);var s=i+4800-o;var a=n+12*o-3;var l=r+Math.floor((153*a+2)/5)+365*s+Math.floor(s/4)-Math.floor(s/100)+Math.floor(s/400)-32045;var c=(l+31741-l%7)%146097%36524%1461;var d=Math.floor(c/1460);var u=(c-d)%365+d;return Math.floor(u/7)+1}static createMailingPopover(e){new AGN.Lib.Dashboard.MailingPopoverUxUpdateRollback(e)}}AGN.Lib.Dashboard.CalendarBaseUxUpdateRollback=i})();(()=>{const e=AGN.url("/mailing/:mailingId:/settings.action");const t=AGN.url("/statistics/mailing/:mailingId:/view.action?init=true");class i{static DATE_FORMAT="DD-MM-YYYY";constructor(e,t){this.$el=e;this.config=t;this.firstDayOfWeek=t.firstDayOfWeek;this.statisticsViewAllowed=t.statisticsViewAllowed;this.$el.data("calendar",this)}get $year(){}get $month(){}get removeCurrentCalendar(){throw this.notImplementedError("removeCurrentCalendar()")}isToday(e){return moment(e).isSame(moment(),"day")}showMonth(e,t){this.removeCurrentCalendar();const i=this.daysInMonth(e+1,t);let n=new Date(t,e,1);let r=n.getDay()-this.firstDayOfWeek;if(r<0){r=7+r}const o=Math.ceil((i+r)/7);const s=new Date(t,e,1-r);const a=new Date(t,e,1+o*7);n=new Date(s);for(let t=0;t<o;t++){const i="row-"+(t+1);this.addWeekNumber(n,i);for(let t=0;t<7;t++){const t=n.getMonth()!==e;this.addDay(n,t,i);n.setDate(n.getDate()+1)}}const l=this.dateToServiceFormat(s);const c=this.dateToServiceFormat(a);this.fillCalendar(l,c);this.synchronizeMonthsList(e,t)}addWeekNumber(){throw this.notImplementedError("addWeekNumber()")}addDay(){throw this.notImplementedError("addDay()")}fillCalendar(){throw this.notImplementedError("fillCalendar()")}notImplementedError(e){return new Error(`${e} must be implemented in extended class`)}getMailingLink(i){return i.status==="mailing.status.sent"&&i.status!=="mailing.status.test"&&this.statisticsViewAllowed?t.replace(":mailingId:",i.id):e.replace(":mailingId:",i.id)}addYearOption(){const e=$("#month_list_year");const t=parseInt(e.find("option:last").val(),10)+1;e.append($("<option></option>").val(t).text(t))}lastYearSelected(){return $("#month_list_year option:selected").index()===$("#month_list_year option").length-1}daysInMonth(e,t){return new Date(t,e,0).getDate()}synchronizeMonthsList(e,t){this.$year[0].selectedIndex=this.$year.find(`option[value=${t}]`)[0].index;this.$month[0].selectedIndex=this.$month.find(`option[value=${e}]`)[0].index;AGN.runAll(this.$year);AGN.runAll(this.$month)}static pad(e,t){let i=e+"";while(i.length<t)i="0"+i;return i}dateToServiceFormat(e){let t=i.pad(e.getDate(),2);let n=i.pad(e.getMonth()+1,2);let r=e.getFullYear();return t+"-"+n+"-"+r}getWeek(e){var t=new Date(e.valueOf());var i=t.getFullYear();var n=t.getMonth();var r=t.getDate();if(this.firstDayOfWeek===0){r=r+1}n=n+1;var o=Math.floor((14-n)/12);var s=i+4800-o;var a=n+12*o-3;var l=r+Math.floor((153*a+2)/5)+365*s+Math.floor(s/4)-Math.floor(s/100)+Math.floor(s/400)-32045;var c=(l+31741-l%7)%146097%36524%1461;var d=Math.floor(c/1460);var u=(c-d)%365+d;return Math.floor(u/7)+1}}AGN.Lib.Dashboard.CalendarBase=i})();(()=>{const e=AGN.Lib.DateFormat;const t=AGN.Lib.Template;const i=AGN.Lib.Dashboard.CalendarBaseUxUpdateRollback;const n=AGN.url("/calendar/mailingsLight.action");const r=AGN.url("/calendar/mailingsPopoverInfo.action");class o extends i{constructor(e,t){super(e,t);this.$el=e;this.firstDayOfWeek=t.firstDayOfWeek;this.statisticsViewAllowed=t.statisticsViewAllowed;this.#rt()}get $month(){return $("#month_list")}get $year(){return $("#month_list_year")}#rt(){const e=new Date;this.#It();this.showMonth(e.getMonth(),e.getFullYear());this.$el.on("change","#month_list, #month_list_year",this.switchMonth.bind(this))}#It(){AGN.Lib.DateFormat.getLocalizedShortWeekdays(window.adminLocale,this.firstDayOfWeek).forEach((e=>{$("#calendar-header").append(`<td><div class="calendar-cell">${e}</div></td>`)}))}addWeekNumber(e,t){const i=this.getWeek(e);$("#calendar-container").append(`<tr id="${t}"><td><div class="calendar-cell">${i}</div></td></tr>`)}addDay(e,t,i){const n=!t&&this.isToday(e);const r=this.dateToServiceFormat(new Date(e.getFullYear(),e.getMonth(),e.getDate()));const o="day-"+r;$("#"+i).append(`<td id="${o}"></td>`);$("#"+o).append(`<div class="calendar-cell calendar-day ${n?"calendar-day--today":""} ${t?"calendar-day--alien":""}" id="label-${o}" data-date="${r}">${e.getDate().toString().padStart(2,"0")}</div>`)}fillCalendar(e,t){$.get(n,{start:e,end:t}).done((e=>this.assignMailingsToCalendarDays(e)))}removeCurrentCalendar(){$("#calendar-container tr:not(:first)").remove()}assignMailingsToCalendarDays(e){e.forEach((e=>e.link=this.getMailingLink(e)));const t=_.groupBy(e,"sendDate");this.makeDaysSelectable(t);this.makeCurrentDayActive(t)}makeCurrentDayActive(e){const t=this.dateToServiceFormat(new Date);$("#day-"+t).click((()=>this.changeSelectedDay(t,e[t])));this.changeSelectedDay(t,e[t])}makeDaysSelectable(e){_.forEach($(".calendar-day"),(t=>{const i=$(t);const n=i.data("date");const r=e[n];if(!_.isEmpty(r)){$("#label-day-"+n).addClass("calendar-day--selectable")}i.click((()=>this.changeSelectedDay(n,_.sortBy(r,"sendTime"))))}))}changeSelectedDay(i,n){$("#calendar-container").find(".calendar-day--selected").removeClass("calendar-day--selected");$("#label-day-"+i).addClass("calendar-day--selected");const r=e.parseFormat(i,"dd-MM-yy");const o=r.toLocaleString(window.adminLocale,{weekday:"long"});i=AGN.Lib.DateFormat.format(r,window.adminDateFormat);$("#calendar-tile-day-mailings").html(t.dom("dashboard-schedule-day",{dayOfWeek:o,dateStr:i,dayMailings:n}));this.createPopovers(n)}createPopovers(e){if(!e?.length){return}const t=e.map((e=>e.mailingId)).join(",");$.get(r,{mailingIds:t}).done((e=>e.map((e=>({...e,$el:$(`.schedule__day-mailing[data-mailing-id="${e.mailingId}"]`)}))).forEach((e=>i.createMailingPopover({...e,sent:e.sentCount,showLoader:false})))))}switchMonth(){const e=parseInt($("#month_list option:selected").val());const t=parseInt($("#month_list_year option:selected").val());this.removeCurrentCalendar();this.showMonth(e,t);if(this.lastYearSelected()){this.addYearOption()}}}AGN.Lib.Dashboard.Calendar=o})();(()=>{const e=AGN.Lib.DateFormat;const t=AGN.Lib.Template;const i=AGN.Lib.Dashboard.CalendarBase;const n=AGN.url("/calendar/light/mailings.action");const r=AGN.url("/calendar/mailingsPopoverInfo.action");class o extends i{constructor(e,t){super(e,t);this.$el=e;this.firstDayOfWeek=t.firstDayOfWeek;this.statisticsViewAllowed=t.statisticsViewAllowed;this.#rt()}get $month(){return $("#month_list")}get $year(){return $("#month_list_year")}#rt(){const e=new Date;this.#It();this.showMonth(e.getMonth(),e.getFullYear());this.$el.on("change","#month_list, #month_list_year",this.switchMonth.bind(this))}#It(){AGN.Lib.DateFormat.getLocalizedShortWeekdays(window.adminLocale,this.firstDayOfWeek).forEach((e=>{$("#calendar-header").append(`<td><div class="calendar-cell">${e}</div></td>`)}))}addWeekNumber(e,t){const i=this.getWeek(e);$("#calendar-container").append(`<tr id="${t}"><td><div class="calendar-cell">${i}</div></td></tr>`)}addDay(e,t,i){const n=!t&&this.isToday(e);const r=this.dateToServiceFormat(new Date(e.getFullYear(),e.getMonth(),e.getDate()));const o="day-"+r;$("#"+i).append(`<td id="${o}"></td>`);$("#"+o).append(`<div class="calendar-cell calendar-day ${n?"calendar-day--today":""} ${t?"calendar-day--alien":""}" id="label-${o}" data-date="${r}">${e.getDate().toString().padStart(2,"0")}</div>`)}fillCalendar(e,t){$.get(n,{start:e,end:t}).done((e=>this.assignMailingsToCalendarDays(e)))}removeCurrentCalendar(){$("#calendar-container tr:not(:first)").remove()}assignMailingsToCalendarDays(e){e.forEach((e=>{const t=moment(e.sendDate).tz(window.agnTimeZoneId);e.sendDate=t.format("DD-MM-YYYY");e.sendTime=t.format("HH:mm");e.link=this.getMailingLink(e)}));const t=_.groupBy(e,"sendDate");this.makeDaysSelectable(t);this.makeCurrentDayActive(t)}makeCurrentDayActive(e){const t=this.dateToServiceFormat(new Date);this.changeSelectedDay(t,e[t])}makeDaysSelectable(e){_.forEach($(".calendar-day"),(t=>{const i=$(t);const n=i.data("date");const r=e[n];if(!_.isEmpty(r)){$("#label-day-"+n).addClass("calendar-day--selectable")}i.off("click").on("click",(()=>this.changeSelectedDay(n,_.sortBy(r,"sendTime"))))}))}changeSelectedDay(i,n){$("#calendar-container").find(".calendar-day--selected").removeClass("calendar-day--selected");$("#label-day-"+i).addClass("calendar-day--selected");const r=e.parseFormat(i,"dd-MM-yy");const o=r.toLocaleString(window.adminLocale,{weekday:"long"});i=AGN.Lib.DateFormat.format(r,window.adminDateFormat);$("#calendar-tile-day-mailings").html(t.dom("dashboard-schedule-day",{dayOfWeek:o,dateStr:i,dayMailings:n}));this.createPopovers(n)}createPopovers(e){if(!e?.length){return}const t=e.map((e=>e.id)).join(",");$.get(r,{mailingIds:t}).done((e=>e.map((e=>({...e,$el:$(`.schedule__day-mailing[data-mailing-id="${e.mailingId}"]`)}))).forEach((e=>new AGN.Lib.Dashboard.MailingPopover({...e,isSent:e.sentCount},false)))))}switchMonth(){const e=parseInt($("#month_list option:selected").val());const t=parseInt($("#month_list_year option:selected").val());this.removeCurrentCalendar();this.showMonth(e,t);if(this.lastYearSelected()){this.addYearOption()}}}AGN.Lib.Dashboard.CalendarLight=o})();(()=>{const e=AGN.Lib.Form;const t=AGN.Lib.Template;const i=AGN.Lib.Modal;const n=AGN.Lib.Storage;const r=AGN.Lib.Select;const o=AGN.Lib.DateFormat;const s=AGN.Lib.Dashboard.XlCalendarLabel;const a=AGN.Lib.Dashboard.XlCalendarCommentLabel;const l=AGN.Lib.Dashboard.XlCalendarMailingLabel;const c=AGN.Lib.Dashboard.XlCalendarAutoOptLabel;const d=AGN.Lib.Dashboard.XlCalendarPushLabel;const u=AGN.Lib.Dashboard.CalendarBaseUxUpdateRollback;class h extends u{static TABLE_SELECTOR="#xl-calendar-table";static UNSENT_MAILINGS_LIST_SELECTOR="#xl-calendar-unsent .tile-body";static DAY_CLASS="xl-calendar-day";static DAY_SELECTOR=`.${h.DAY_CLASS}`;static UNSENT_MAILINGS_STORAGE_KEY="dashboard.xlCalendar.unsentType";static SHOW_COMMENTS_STORAGE_KEY="dashboard.xlCalendar.showComments";static MODE_STORAGE_KEY="dashboard.xlCalendar.mode";constructor(e,t){super(e,t);this.config=t;this.dayMailingsLimit=t.showALlMailingsPerDay?-1:6;this.initCalendarTable();this.initUnsentMailings()}get $table(){return $(h.TABLE_SELECTOR)}get week(){return parseInt(this.$week.val())}get month(){return parseInt(this.$month.val())}get year(){return parseInt(this.$year.val())}get $week(){return $("#xl-calendar-week")}get $year(){return $("#xl-calendar-year")}get $month(){return $("#xl-calendar-month")}get $weeksColumn(){return $("#xl-calendar-weeks")}get weeksSelect(){return r.get(this.$week)}get isCommentsShown(){return n.get(h.SHOW_COMMENTS_STORAGE_KEY)!==false}set isCommentsShown(e){n.set(h.SHOW_COMMENTS_STORAGE_KEY,e)}get isWeekMode(){return this.$el.hasClass("tile-x-wide")||n.get(h.MODE_STORAGE_KEY)==="week"}set mode(e){return n.set(h.MODE_STORAGE_KEY,e)}get unsentType(){return n.get(h.UNSENT_MAILINGS_STORAGE_KEY)||"unplanned"}set unsentType(e){return n.set(h.UNSENT_MAILINGS_STORAGE_KEY,e)}get currentDate(){if(this.isWeekMode){return moment(r.get(this.$week).$findOption(this.week).data("first-day"),"DD-MM-YYYY").toDate()}const e=new Date;const t=new Date(this.year,this.month);if(t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()){return e}return t}get unsentMailings$(){return $(h.UNSENT_MAILINGS_LIST_SELECTOR)}$day(e){return this.$table.find(`${h.DAY_SELECTOR}[data-date="${e}"]`)}initCalendarTable(){const e=new Date;if(this.isWeekMode){this.showWeek(e.getDate(),e.getMonth(),e.getFullYear())}else{this.showMonth(e.getMonth(),e.getFullYear())}}removeCurrentCalendar(){this.$table.empty();this.$weeksColumn.empty()}showWeek(e,t,i){this.removeCurrentCalendar();var n=6048e5;var r=new Date(i,t,e);r.setDate(e-r.getDay()-1+this.firstDayOfWeek);var o=new Date(r.getFullYear(),r.getMonth(),r.getDate());o.setDate(o.getDate()+1);if(t===0&&e===1&&this.getWeek(o)!==1){o.setTime(o.getTime()+n);r.setTime(r.getTime()+n)}for(let e=0;e<7;e++){r.setDate(r.getDate()+1);this.addDay(r,false)}const s=this.dateToServiceFormat(o);const a=this.dateToServiceFormat(r);this.fillCalendar(s,a);this.synchronizeWeeksList(e,t,i)}addWeekNumber(e){this.$weeksColumn.append(`<div>${this.getWeek(e)}</div>`)}addDay(e,i){const n=this.dateToServiceFormat(new Date(e.getFullYear(),e.getMonth(),e.getDate()));const r=t.dom("xl-calendar-day",{day:e.getDate(),date:n}).addClass(this.isToday(e)?`${h.DAY_CLASS}--today`:"").addClass(i?`${h.DAY_CLASS}--alien`:"");this.$table.append(r);AGN.Lib.CoreInitializer.run(["scrollable","tooltip"],r)}fillCalendar(e,t){if(this.isCommentsShown){this.getComments(e,t);this.commentsLoaded=true}this.getMailings(e,t,this.dayMailingsLimit);this.getPushNotifications(e,t);this.getAutoOptimizations(e,t);this.initDroppables()}changeYear(){if(this.isWeekMode){this.updateWeeksSelect()}this.flip()}flip(){this.jumpToDate(this.currentDate);if(this.lastYearSelected()){this.addYearOption()}}toggleMode(e){const t=this.currentDate;if(this.isWeekMode){this.synchronizeMonthsList(t.getMonth(),t.getFullYear())}else{this.synchronizeWeeksList(t.getDate(),t.getMonth(),t.getFullYear())}this.mode=e?"week":"month";this.flip()}jumpToDate(e){if(this.isWeekMode){this.showWeek(e.getDate(),e.getMonth(),e.getFullYear())}else{this.showMonth(e.getMonth(),e.getFullYear())}}jumpToday(){this.jumpToDate(new Date)}initDroppables(){$(h.DAY_SELECTOR).droppable({accept:s.SELECTOR,drop:this.dropLabel});this.unsentMailings$.droppable({accept:'[id^="xl-calendar-mailing-"]',drop:this.dropLabel})}dropLabel(e,t){const i=t.draggable;s.get(i).drop($(this))}getComments(e,t){$.get(AGN.url("/calendar/comments.action"),{startDate:e,endDate:t}).done((e=>_.each(e,(e=>a.getOrCreate(e)))))}initUnsentMailings(){$('[name="not-sent-mailings-list-type"]').on("change",(e=>{this.unsentType=$(e.target).val();this.loadUnsentMailings()}));this.loadUnsentMailings();$(`#${this.unsentType}-mailings-btn`).prop("checked",true)}loadUnsentMailings(){$.get(AGN.url(`/calendar/unsent-mailings/${this.unsentType}.action`)).done((e=>this.displayUnsentMailings(e)))}displayUnsentMailings(e){this.unsentMailings$.empty();e.map((e=>this.asUnsentMailingData(e))).forEach((e=>new l(e)))}asUnsentMailingData(e){return{...e,link:AGN.url(`/mailing/${e.mailingId}/settings.action`),mediatype:e.mediatype?.toLowerCase(),workstatus:"mailing.status."+e.status.toLowerCase(),labelId:`xl-calendar-unsent-${e.mailingId}`,inUnsentList:true,planned:this.unsentType==="planned",sent:false,sendTime:false,sentCount:false}}showMoreMailings(e){const t=e.closest(h.DAY_SELECTOR).data("date");this.getMailings(t,t,-1);e.remove()}getMailings(e,t,i){$.get(AGN.url("/calendar/mailings.action"),{startDate:e,endDate:t,limit:i}).done((e=>_.each(e,(e=>this.addMailingLabel(e,i)))))}addMailingLabel(e,i){const n=this.$day(e.sendDate);if(i>0&&n.find('[id^="xl-calendar-mailing-"]').length>=i-1){if(!n.find('[data-action="load-more-day-mailings"]').exists()){n.find(`${h.DAY_SELECTOR}__body`).append(t.text("xl-calendar-showMore-btn"))}return}e.link=this.getMailingLink(e);e.sentCount=e.mailsSent;e.subject=e.subject||"";e.thumbnailComponentId=e.preview_component;l.getOrCreate(e)}getAutoOptimizations(e,t){$.get(AGN.url("/calendar/autoOptimization.action"),{startDate:e,endDate:t}).done((e=>_.each(e,(e=>c.getOrCreate(e)))))}getPushNotifications(e,t){d.pushStatusSent=this.config.pushStatusSent;d.pushStatusScheduled=this.config.pushStatusScheduled;$.get(AGN.url("/calendar/pushes.action"),{startDate:e,endDate:t}).done((e=>_.each(e,(e=>d.getOrCreate(e)))))}toggleComments(e){this.$table.find(a.SELECTOR).toggle(e);this.isCommentsShown=e;if(e&&!this.commentsLoaded){const e=$(`${h.DAY_SELECTOR}:first`).data("date");const t=$(`${h.DAY_SELECTOR}:last`).data("date");this.getComments(e,t)}}createComment(e){a.showModal({date:e})}saveComment(t){const n=e.get($("#calendar-comment-form"));if(!n.validate()){return}const r=n.data();$.post(AGN.url("/calendar/saveComment.action"),r).done((e=>{if(!e.commentId){AGN.Lib.Page.render(e);return}if(!t){r.commentId=e.commentId;a.getOrCreate(r).$el.toggle(this.isCommentsShown)}else{s.getByEntityId(t,a.TYPE).updateComment(r)}i.getInstance(n.$form).hide()}))}removeComment(e){s.getByEntityId(e,a.TYPE).remove()}updateWeeksSelect(){const e=[];var t;var i=6048e5;var n=new Date(this.year,0,1);n.setDate(1-n.getDay()-1+this.firstDayOfWeek);n.setDate(n.getDate()+1);var r=new Date(n.getFullYear(),n.getMonth(),n.getDate());r.setTime(n.getTime()+i-864e5);if(this.getWeek(n)!=1){n.setTime(n.getTime()+i);r.setTime(r.getTime()+i)}do{t={};t.number=this.getWeek(n);t.firstDay=new Date(n.getFullYear(),n.getMonth(),n.getDate());t.lastDay=new Date(r.getFullYear(),r.getMonth(),r.getDate());e.push(t);n.setTime(n.getTime()+i);r.setTime(r.getTime()+i)}while(this.getWeek(n)!==1&&n.getFullYear()===this.year);this.weeksSelect.resetOptions();for(var s in e){if(!e.hasOwnProperty(s))continue;var a=o.format(e[s].firstDay,window.adminDateFormat);var l=o.format(e[s].lastDay,window.adminDateFormat);this.weeksSelect.addOption(e[s].number,e[s].number+" : "+a+" - "+l);this.weeksSelect.$findOption(e[s].number).data("first-day",this.dateToServiceFormat(e[s].firstDay))}}synchronizeWeeksList(e,t,i){var n=6048e5;var r=new Date(i,t,e);r.setDate(e-r.getDay()-1+this.firstDayOfWeek);var o=new Date(r.getFullYear(),r.getMonth(),r.getDate());o.setDate(o.getDate()+1);if(t==0&&e==1&&this.getWeek(o)!=1){o.setTime(o.getTime()+n)}var s=this.getWeek(o);if(s==1){var a=new Date(o.valueOf()+n);if(o.getFullYear()!=a.getFullYear()){i=a.getFullYear()}}this.$year[0].selectedIndex=this.$year.find(`option[value=${i}]`)[0].index;AGN.runAll(this.$year);this.updateWeeksSelect();this.$week[0].selectedIndex=this.$week.find(`option[value=${s}]`)[0].index;AGN.runAll(this.$week)}static getLabelsByType(e,t){return e.find(s.SELECTOR).map((e=>s.get($(e)))).filter((e=>e.type===t))}static getLastLabelOfType(e,t){return h.getLabelsByType(e,t).slice(-1)[0]}}AGN.Lib.Dashboard.XlCalendar=h})();(()=>{const e=new Intl.DateTimeFormat(window.adminLocale,{month:"long"});const i=new Intl.DateTimeFormat(window.adminLocale,{month:"short"});const n=new Intl.DateTimeFormat(window.adminLocale,{month:"long",year:"numeric"});class r{constructor(e){this.calendar=e;this.initActions()}jumpToDate(e){this.#Ot(e.getFullYear());this.#Nt();this.#Lt(e.getFullYear());this.$findYear(e.getFullYear()).prop("checked",true);this.$findMonth(e.getMonth()).prop("checked",true);this.$findWeek(this.calendar.getWeek(e)).prop("checked",true);this.updateCalendarTitle();if(this.calendar.isWeekMode){this.showWeeks()}else{this.showMonths()}}initActions(){this.$pickerTitleBtn.on("click",(()=>this.widerPeriod()));this.$arrowUp.on("click",(()=>this.prev()));this.$arrowDown.on("click",(()=>this.next()));$("#period-picker").on("click",(()=>this.#Ft()))}widerPeriod(){if(this.$monthsBox.is(":visible")){this.showYears()}if(this.$weeksBox.is(":visible")){this.showMonths()}}selectYear(){this.$months.prop("checked",false);this.#Lt(this.year);this.showMonths()}selectMonth(){if(this.calendar.isWeekMode){this.showWeeks()}else{this.dropdown.hide();this.calendar.flip()}}selectWeek(){this.dropdown.hide();this.calendar.flip(moment().locale(window.adminLocale).isoWeekYear(this.year).isoWeek(this.week).startOf("isoWeek").toDate())}showYears(){this.$yearsBox.show();this.$monthsBox.hide();this.$weeksBox.hide();this.$pickerTitleBtn.text(`${this.$years.first().val()}-${this.$years.last().val()}`)}showMonths(){this.$yearsBox.hide();this.$monthsBox.show();this.$weeksBox.hide();this.$pickerTitleBtn.text(this.year)}showWeeks(){this.$yearsBox.hide();this.$monthsBox.hide();this.$weeksBox.show();this.$pickerTitleBtn.text(e.format(new Date(this.year,this.month)));this.$weeks.map(((e,t)=>$(t).next("label"))).each(((e,t)=>$(t).hide().find("span:not(:first)").removeClass("alien")));this.$getMonthWeeks(this.year,this.month).forEach((e=>{$(e).next("label").show();$(e).find("+ label span:not(:first)").each(((e,t)=>{$(t).toggleClass("alien",parseInt($(t).data("month"))!==this.month)}))}))}$getMonthWeeks(e,t){const i=new Set;const n=moment().year(e).month(t).daysInMonth();for(let r=1;r<=n;r++){const n=this.calendar.getWeek(new Date(e,t,r));if(!(t===11&&n===1)&&!(t===0&&n>50)){i.add(n)}}return[...i].map((e=>this.$findWeek(e)))}updateCalendarTitle(){this.calendar.$el.find(".tile-title > span").text(this.calendar.isWeekMode?this.#$t(this.year,this.week):n.format(new Date(this.year,this.month)))}#Gt(e){return this.#Bt("year",e,e)}#Ht(e){return this.#Bt("month",e,i.format(new Date(2025,e)))}#zt(e,t){return this.#Bt("week",e,t)}#Bt(e,t,i){return`\n        <input type="radio" class="btn-check" name="${e}" value="${t}" id="${e}-${t}" autocomplete="off">\n        <label class="btn" for="${e}-${t}">${i}</label>`}get dropdown(){return bootstrap.Dropdown.getInstance($("#period-picker .dropdown-toggle"))}get year(){return parseInt(this.$yearsBox.find("input:checked").val())}get month(){return parseInt(this.$monthsBox.find("input:checked").val())}get week(){return parseInt(this.$weeksBox.find("input:checked").val())}get $yearsBox(){return this.$tile.find(".period-picker__years")}get $monthsBox(){return this.$tile.find(".period-picker__months")}get $weeksBox(){return this.$tile.find(".period-picker__weeks")}get $years(){return this.$yearsBox.find("input")}get $months(){return this.$monthsBox.find("input")}get $weeks(){return this.$weeksBox.find("input")}get $tile(){return $(".tile--period-picker")}get $pickerTitleBtn(){return this.$tile.find(".period-picker__title-btn")}get $arrowUp(){return this.$tile.find(".icon-caret-up")}get $arrowDown(){return this.$tile.find(".icon-caret-down")}next(){this.#dt(true)}prev(){this.#dt(false)}#dt(e){if(this.$yearsBox.is(":visible")){this.#Wt(e)}if(this.$monthsBox.is(":visible")){this.#Vt(e)}if(this.$weeksBox.is(":visible")){this.#jt(e)}}#Wt(e){this.#Ot(parseInt(this.$years.first().val())+(e?12:-12));this.$pickerTitleBtn.text(`${this.$years.first().val()}-${this.$years.last().val()}`);this.$years.prop("checked",false)}#Vt(e){const t=this.year+(e?1:-1);let i=this.$findYear(t);if(!i.length){this.#Ot(e?t:this.year-12);i=this.$findYear(t)}i.prop("checked",true);this.selectYear()}#jt(e){this.$findMonth(this.month+(e?1:-1)).prop("checked",true);this.selectMonth()}$findYear(e){return this.$yearsBox.find(`[value="${e}"]`)}$findMonth(e){return this.$monthsBox.find(`[value="${e}"]`)}$findWeek(e){return this.$weeksBox.find(`[value="${e}"]`)}#$t(e,i){const n=moment().locale(window.adminLocale).isoWeekYear(e).isoWeek(i).startOf("isoWeek");const r=moment(n).endOf("isoWeek");const o={year:"numeric",month:"2-digit",day:"2-digit"};const s=new Intl.DateTimeFormat(window.adminLocale,o).format(n.toDate());const a=new Intl.DateTimeFormat(window.adminLocale,o).format(r.toDate());const l=n.isoWeekYear();return`${s} - ${a} (${t("workflow.defaults.week")} ${i.toString().padStart(2,"0")}, ${l})`}#Ot(e){e=Math.max(Math.min(e,this.calendar.today.getFullYear()),this.calendar.config.minYear);this.$yearsBox.empty();for(let t=e;t<e+12;t++){this.$yearsBox.append(this.#Gt(t))}this.$years.on("click",(()=>this.selectYear()))}#Nt(){this.$monthsBox.empty();Array.from({length:12},((e,t)=>this.$monthsBox.append(this.#Ht(t))));this.$months.on("click",(()=>this.selectMonth()))}#Lt(e){this.$weeksBox.empty();const t=new Date(e,0,1-new Date(e,0,1).getDay()+this.calendar.firstDayOfWeek);if(this.calendar.getWeek(t)!==1){t.setTime(t.getTime()+6048e5)}do{let e=this.calendar.getWeek(t);const i=$(`<div value="${e}">`);i.append($("<span>").text(e));for(let e=0;e<7;e++){i.append($(`<span data-month="${t.getMonth()}">${t.getDate()}</span>`));t.setDate(t.getDate()+1)}this.$weeksBox.append(this.#zt(e,i.html()))}while(this.calendar.getWeek(t)!==1&&t.getFullYear()===e);this.$weeks.on("click",(()=>this.selectWeek()))}#Ft(){this.$arrowDown.toggle(this.#Ut());this.$arrowUp.toggle(this.#Yt())}#Ut(){if(this.$yearsBox.is(":visible")){return parseInt(this.$years.last().val())<this.calendar.today.getFullYear()+11}if(this.$monthsBox.is(":visible")){return this.year<this.calendar.today.getFullYear()+11}if(this.$weeksBox.is(":visible")){return this.month<11}return false}#Yt(){if(this.$yearsBox.is(":visible")){return parseInt(this.$years.first().val())>this.calendar.config.minYear}if(this.$monthsBox.is(":visible")){return this.year>this.calendar.config.minYear}if(this.$weeksBox.is(":visible")){return this.month>0}return false}}AGN.Lib.Dashboard.DashboardCalendarPeriodPicker=r})();(()=>{const e=AGN.Lib.Form;const t=AGN.Lib.Modal;const i=AGN.Lib.Storage;const n=AGN.Lib.Dashboard.DashboardCalendarLabel;const r=AGN.Lib.Dashboard.DashboardCalendarCommentLabel;class o{constructor(e){this.calendar=e;$("#toggle-calendar-comments").prop("checked",this.isCommentsShown)}get isCommentsShown(){return i.get("dashboard.calendar.comments")}set isCommentsShown(e){return i.set("dashboard.calendar.comments",e)}toggle(e){this.calendar.$grid.find(r.SELECTOR).toggle(e);if(e&&!this.calendar.commentsLoaded){const e=$(`${this.calendar.daySelector}:first`).data("date");const t=$(`${this.calendar.daySelector}:last`).data("date");this.#qt(e,t)}this.isCommentsShown=e}create(e){r.showModal({date:e})}save(i){const o=e.get($("#calendar-comment-form"));if(!o.validate()){return}const s=o.data();$.post(AGN.url("/calendar/saveComment.action"),s).done((e=>{if(!e.commentId){AGN.Lib.Page.render(e);return}if(!i){s.commentId=e.commentId;r.getOrCreate(s).$el.toggle(this.isCommentsShown)}else{n.getByEntityId(i,r.TYPE).updateComment(s)}t.getInstance(o.$form).hide()}))}remove(e){n.getByEntityId(e,r.TYPE).remove()}#qt(e,t){$.get(AGN.url("/calendar/comments.action"),{startDate:e,endDate:t}).done((e=>_.each(e,(e=>r.getOrCreate(e)))))}}AGN.Lib.Dashboard.DashboardCalendarCommentsManager=o})();(()=>{const e=AGN.Lib.Template;const t=AGN.Lib.Storage;const i=AGN.Lib.Dashboard.DashboardCalendarLabel;const n=AGN.Lib.Dashboard.DashboardCalendarCommentLabel;const r=AGN.Lib.Dashboard.DashboardCalendarMailingLabel;const o=AGN.Lib.Dashboard.DashboardCalendarAutoOptLabel;const s=AGN.Lib.Dashboard.DashboardCalendarPushLabel;const a=AGN.Lib.Dashboard.CalendarBase;const l=6048e5;class c extends a{static DAY_CLASS="dashboard-calendar-day";static MODE_STORAGE_KEY="dashboard.calendar.mode";static SCROLL_STORAGE_KEY="dashboard.calendar.scroll";constructor(e,t){super(e,t);this.today=new Date;this.dayMailingsLimit=t.showALlMailingsPerDay?-1:6;this.commentsManager=new AGN.Lib.Dashboard.DashboardCalendarCommentsManager(this);this.periodPicker=new AGN.Lib.Dashboard.DashboardCalendarPeriodPicker(this);this.#Kt();this.flip(this.today);this.$grid.css("background-color","var(--xl-calendar-cell-border-color)")}get daySelector(){return`.${c.DAY_CLASS}`}get $days(){return $(this.daySelector)}get $grid(){return $("#dashboard-calendar-grid")}get isScrollShown(){return t.get(c.SCROLL_STORAGE_KEY)}set isScrollShown(e){return t.set(c.SCROLL_STORAGE_KEY,e)}get isWeekMode(){return t.get(c.MODE_STORAGE_KEY)==="week"}set mode(e){return t.set(c.MODE_STORAGE_KEY,e)}get selectedDate(){const e=new Date(this.periodPicker.year,this.periodPicker.month);if(e.getMonth()===this.today.getMonth()&&e.getFullYear()===this.today.getFullYear()){return this.today}return e}get $unsentList(){return $("#dashboard-calendar-unsent-tile").find(".tile-body")}get labels(){return this.$el.find(i.SELECTOR).map(((e,t)=>i.get($(t)))).toArray()}#Kt(){$('[data-action="switch-mode"]').prop("checked",this.isWeekMode).parent().show();$("#toggle-calendar-scroll").prop("checked",this.isScrollShown)}$day(e){return this.$grid.find(`${this.daySelector}[data-date="${e}"]`)}removeCurrentCalendar(){this.$grid.empty()}showWeek(e,t,i){this.removeCurrentCalendar();const n=new Date(i,t,e);n.setDate(e-n.getDay()-1+this.firstDayOfWeek);const r=new Date(n.getFullYear(),n.getMonth(),n.getDate());r.setDate(r.getDate()+1);if(t===0&&e===1&&this.getWeek(r)!==1){r.setTime(r.getTime()+l);n.setTime(n.getTime()+l)}for(let e=0;e<7;e++){n.setDate(n.getDate()+1);this.addDay(n,false)}this.fillCalendar(this.dateToServiceFormat(r),this.dateToServiceFormat(n))}addWeekNumber(e){}addDay(t,i){const n=this.dateToServiceFormat(new Date(t.getFullYear(),t.getMonth(),t.getDate()));const r=e.dom("dashboard-calendar-day",{day:t.getDate(),date:n});r.find(".dashboard-calendar-day").toggleClass(`${c.DAY_CLASS}--today`,this.isToday(t)).toggleClass(`${c.DAY_CLASS}--alien`,i);this.$grid.append(r);if(!this.isWeekMode&&r.is(":nth-child(7n+1)")){r.append(`<div class="dashboard-calendar__week-number">${this.getWeek(t)}</div>`)}}fillCalendar(e,t){this.#Xt(e,t);this.toggleScroll(this.isScrollShown);this.$days.droppable({accept:i.SELECTOR})}#Xt(e,t){const i=this.dayMailingsLimit;const r=this.commentsManager.isCommentsShown;$.get(AGN.url("/calendar/labels.action"),{start:e,end:t,dayMailingsLimit:i,loadComments:r}).done((e=>{_.each(e.optimizations,(e=>o.getOrCreate(e)));_.each(e.pushes,(e=>s.getOrCreate(e)));_.each(e.mailings,(e=>this.addMailingLabel(e,i)));_.each(e.comments,(e=>n.getOrCreate(e)));this.commentsLoaded=r;AGN.Lib.CoreInitializer.run("truncated-text-popover",this.$grid)}))}flip(e=this.selectedDate){if(this.isWeekMode){this.showWeek(e.getDate(),e.getMonth(),e.getFullYear())}else{this.showMonth(e.getMonth(),e.getFullYear())}this.periodPicker.jumpToDate(e)}toggleMode(e){this.mode=e?"week":"month";this.flip()}synchronizeMonthsList(e,t){}jumpToToday(){this.flip(this.today)}dropLabel(e,t){const n=t.draggable;i.get(n).drop($(this))}initUnsentList(e,t){if(!t){this.$unsentList.droppable({accept:'[id^="dashboard-calendar-mailing-"]'})}e.map((e=>this.asUnsentMailingData(e,t))).forEach((e=>new r(e)))}asUnsentMailingData(e,t){return{...e,link:AGN.url(`/mailing/${e.id}/settings.action`),mediatype:e.mediatype?.toLowerCase(),labelId:`dashboard-calendar-unsent-${e.id}`,inUnsentList:true,planned:t,sent:false,sendTime:false}}showMoreMailings(e){const t=e.closest(this.daySelector).data("date");this.getMailings(t,t,-1);e.remove()}getMailings(e,t,i){$.get(AGN.url("/calendar/mailingsRedesigned.action"),{start:e,end:t,dayMailingsLimit:i}).done((e=>_.each(e,(e=>this.addMailingLabel(e,i)))))}$dayBody(e){return e.find(`${this.daySelector}__body`)}addMailingLabel(t,i){const n=moment(t.sendDate).tz(window.agnTimeZoneId);t.sendDate=n.format("DD-MM-YYYY");t.sendTime=n.format("HH:mm");const o=this.$day(t.sendDate);if(i>0&&o.find('[id^="dashboard-calendar-mailing-"]').length>=i-1){if(!o.find('[data-action="show-more-mailings"]').exists()){this.$dayBody(o).append(e.text("dashboard-calendar-show-more-btn"))}return}t.link=this.getMailingLink(t);r.getOrCreate(t)}toggleScroll(e){this.$days.map(((e,t)=>this.$dayBody($(t)))).each(((t,i)=>{$(i).toggleClass("js-scrollable",!e);if(e){AGN.Lib.Scrollbar.get($(i),false)?.destroy()}}));if(!e){AGN.Lib.Scrollbar.get(this.$grid,false)?.destroy()}AGN.Lib.CoreInitializer.run(["scrollable","tooltip"],$("#dashboard-calendar-table"));this.isScrollShown=e}search(e){this.labels.forEach((t=>t.toggle(t.text?.toLowerCase().includes(e))))}getLabelsByType(e,t){return e.find(i.SELECTOR).map((e=>i.get($(e)))).filter((e=>e.type===t))}getLastLabelOfType(e,t){return this.getLabelsByType(e,t).slice(-1)[0]}}AGN.Lib.Dashboard.DashboardCalendar=c})();(()=>{const e=AGN.Lib.Field;AGN.Lib.Validator.new("calendar-comment",{valid:function(e,t){return!this.errors(e,t).length},errors:function(){const e=i();if($('[name="isCustomRecipients"]').val()==="true"){e.push(...n())}if($('[name="deadline"]').is(":checked")){e.push(...r())}return e}});function i(){const e=[];const i=$("#comment-text");const n=i.val();if(_.isEmpty(_.trim(n))){e.push({field:i,msg:t("calendar.error.empty_comment")})}if(o(n)>1e3){e.push({field:i,msg:t("calendar.error.long_comment")})}return e}function n(){const e=[];const i=$('[name="recipients"]');const n=i.val().filter((e=>e?.trim()!==""));if(!n?.length){e.push({field:i,msg:t("calendar.error.empty_recipient_list")})}const r=n.join(",");if(o(r)>2e3){e.push({field:i,msg:t("calendar.error.long_recipient_list")})}_.each(n,(n=>{if(!AGN.Lib.Helpers.isValidEmail(n)){e.push({field:i,msg:t("calendar.error.invalid_email")+" "+n})}}));return e}function r(){const i=$("#remind-date");return e.create(i).dateValue<new Date?[{field:i,msg:t("calendar.error.reminderInPast")}]:[]}function o(e){var t=encodeURI(e);if(t.indexOf("%")!=-1){var i=t.split("%").length-1;if(i==0)i++;var n=t.length-i*3;i=i+n}else{i=t.length}return i}})();(()=>{const e=AGN.Lib.Dashboard.Def;const i=e.TileSize;class n{constructor(e){if(new.target===n){throw new TypeError("Cannot construct Abstract Tile instances directly!")}this._controller=e;this.variants=[i.REGULAR];this.size=this.variants[0]}displayIn(e){if(e?.is(".draggable-tile")){e.replaceWith(this.$el)}else{e.append(this.$el)}this.afterTileAdded()}afterTileAdded(){this._$el.data("tile",this);this.$el.trigger("agn:grid-modified",[this]);AGN.runAll(this.$el)}insertAfter(e){e.$el.after(this.$el);this.afterTileAdded()}insertBefore(e){e.$el.before(this.$el);this.afterTileAdded()}remove(){const e=this.$container;this.$el.remove();e.trigger("agn:grid-modified")}switchDroppable(e){this.$el.droppable("option","disabled",!e)}swap(e){const t=$("<span>").hide();this.$el.before(t);e.$el.before(this.$el);t.replaceWith(e.$el)}get $container(){return this.$el.parent()}get id(){return this.constructor.ID}get name(){return t(`dashboard.tile.${this.id}`)}thumbnail(){return AGN.url(`/assets/core/images/dashboard/dashboard-tile-sprite.svg#${this.id}`)}allowed(){return AGN.Lib.Template.exists(this.templateName)}get $el(){if(!this._$el){this._$el=AGN.Lib.Template.dom(this.templateName,this.templateOptions)}return this._$el}get templateOptions(){return{tileName:this.name,tileSize:this.size.name,overlay:this.getOverlay()}}set $el(e){this._$el=e}get position(){if(!this._position){return{rows:[],cols:[]}}return this._position}set position(e){this._position=e}get beginCol(){return this.position.cols[0]}get beginRow(){return this.position.rows[0]}get endCol(){return this.position.cols[1]}get endRow(){return this.position.rows[1]}get isEmpty(){return this.id===AGN.Lib.Dashboard.EmptyTile.ID}get isRegular(){return this.size===i.REGULAR}get isTall(){return this.size===i.TALL}get isXl(){return this.size===i.X_LARGE}get isWide(){return this.size===i.WIDE}get isXWide(){return this.size===i.X_WIDE}get templateName(){return`dashboard-tile-${this.id}`}get shown(){return this._$el?.is(":visible")}toggleHighlight(e){this.$el.toggleClass("draggable-accept--hovered",e)}getOverlay(){return AGN.Lib.Template.text("dashboard-tile-overlay")}static get(e){return e.data("tile")}}AGN.Lib.Dashboard.DraggableTile=n})();(()=>{class e extends AGN.Lib.Dashboard.DraggableTile{static FETCHED_DATA_CACHE=new AGN.Lib.InMemoryCache;constructor(){if(new.target===e){throw new TypeError("Cannot construct Abstract BaseMailingStatisticsTile instances directly!")}super();if(this.needsRedrawOnMobile()){this._isMobileView=false;this.#Zt()}this._chart=null;this._chartData={names:[],values:[],mailingId:0}}#Zt(){$(window).on("displayTypeChanged",((e,t)=>{this._isMobileView=t;if(this._chart){this.updateChart(true)}}))}displayIn(e){super.displayIn(e);this.updateChartIfCanvasExists()}insertAfter(e){super.insertAfter(e);this.updateChartIfCanvasExists()}insertBefore(e){super.insertBefore(e);this.updateChartIfCanvasExists()}updateChartIfCanvasExists(){if(this.findCanvas$().exists()){this.updateChart()}}async updateChart(e=false){const t=this._chartData.mailingId;this._chartData.mailingId=this.$el.find("[data-statistics-mailing]").val();const i=this._chartData.mailingId!==t;if(!i&&!e){return}if(i){const e=await this.#Qt();this.initChartData(this.extractStatisticsData(e))}this.drawChart()}#Qt(){const t=this._chartData.mailingId;const i=e.FETCHED_DATA_CACHE.get(t);if(i){return i}const n=new Promise(((e,i)=>{$.ajax({type:"GET",url:AGN.url("/dashboard/statistics.action"),data:{mailingId:t},success:t=>e(t),error:e=>i(e)})}));e.FETCHED_DATA_CACHE.set(t,n);return n}extractStatisticsData(e){throw new Error("Extract statistics function not implemented for statistics tile!")}initChartData(e){this._chartData.names=e.names;this._chartData.values=e.values}drawChart(){this._chart?.destroy();const e=this.findCanvas$()[0].getContext("2d");this._chart=new Chart(e,this.getChartOptions())}findCanvas$(){return this.$el.find("canvas")}getChartOptions(){throw new Error("Chart options not defined for statistics tile!")}needsRedrawOnMobile(){return false}}AGN.Lib.Dashboard.BaseMailingStatisticsTile=e})();(()=>{class e extends AGN.Lib.Dashboard.BaseMailingStatisticsTile{constructor(){if(new.target===e){throw new TypeError("Cannot construct Abstract BaseMailingDeviceStatisticsTile instances directly!")}super()}extractStatisticsData(e){return{percent:this.extractPercent(e)}}extractPercent(e){}initChartData(e){super.initChartData(e);this._chartData.percent=e.percent}getChartOptions(){if(!this._chartData.colors){this._chartData.colors=[this.$el.css("--chart-darkest-blue-color"),this.$el.css("--chart-dark-blue-color"),this.$el.css("--chart-blue-color"),this.$el.css("--chart-light-blue-color"),this.$el.css("--chart-light-cyan-color")]}return{type:"agnDoughnut",data:{labels:this._chartData.names,datasets:[{data:this._chartData.values,backgroundColor:this._chartData.colors,borderWidth:0}]}}}}AGN.Lib.Dashboard.BaseMailingDeviceStatisticsTile=e})();(()=>{class e extends AGN.Lib.Dashboard.DraggableTile{static ID="empty";getOverlay(){return AGN.Lib.Template.text("dashboard-tile-empty-overlay")}}AGN.Lib.Dashboard.EmptyTile=e})();(()=>{class e extends AGN.Lib.Dashboard.DraggableTile{static ID="add-ons"}AGN.Lib.Dashboard.AddOnsTile=e})();(()=>{class e extends AGN.Lib.Dashboard.DraggableTile{static ID="analysis"}AGN.Lib.Dashboard.AnalysisTile=e})();(()=>{const e=AGN.Lib.Dashboard.Def;const t=e.TileSize;class i extends AGN.Lib.Dashboard.DraggableTile{static ID="calendar";constructor(e){super(e);this._controller.addDomInitializer("dashboard-calendar-tile",this.#Jt);this.variants=[t.WIDE,t.TALL];this.size=this.variants[0]}#Jt(){if(this.config.isUxUpdateRollback){new AGN.Lib.Dashboard.Calendar(this.el,this.config)}else{new AGN.Lib.Dashboard.CalendarLight(this.el,this.config)}}remove(){super.remove();this.$el=undefined}thumbnail(e){return super.thumbnail()+(e===t.TALL?"-tall":"")}}AGN.Lib.Dashboard.CalendarTile=i})();(()=>{const e=AGN.Lib.Storage;const t=AGN.Lib.Dashboard.Def.TileSize;const i=AGN.Lib.Dashboard.XlCalendarLabel;const n=AGN.Lib.Dashboard.XlCalendar;class r extends AGN.Lib.Dashboard.DraggableTile{static ID="xl-calendar";constructor(e){super(e);const i=this;this.variants=[t.X_LARGE];this.size=this.variants[0];this.#ei(i)}#ei(e){this._controller.addDomInitializer(`dashboard-xl-calendar`,(function(){const t=e.calendar=new n(this.el,this.config);this.addAction({change:"toggle-xl-calendar-comments"},(e=>t.toggleComments(!e.prop("checked"))));this.addAction({change:"toggle-xl-calendar-mode"},(e=>t.toggleMode(e.prop("checked"))));this.addAction({dblclick:"show-xl-calendar-comment"},(e=>i.get(e).showModal()));this.addAction({click:"create-xl-calendar-comment"},(e=>t.createComment(e.data("date"))));this.addAction({click:"load-more-day-mailings"},(e=>t.showMoreMailings(e)));this.addAction({change:"flip-xl-calendar"},(()=>t.flip()));this.addAction({change:"xl-calendar-change-year"},(()=>t.changeYear()));this.addAction({click:"xl-calendar-today"},(()=>t.jumpToday()))}));this._controller.addDomInitializer("xl-calendar-comment-modal",(function(){const t=e.calendar;this.addAction({click:"save-xl-calendar-comment"},(e=>t.saveComment(e.data("comment-id"))));this.addAction({click:"delete-xl-calendar-comment"},(e=>t.removeComment(e.data("comment-id"))))}))}get templateOptions(){return{...super.templateOptions,isWeekMode:this.isWeekMode,isUnsentMailingsPlannedType:this.isUnsentMailingsPlannedType,isCommentsShown:this.isCommentsShown}}get isWeekMode(){return e.get(n.MODE_STORAGE_KEY)==="week"}get isUnsentMailingsPlannedType(){return e.get(n.UNSENT_MAILINGS_STORAGE_KEY)==="planned"}get isCommentsShown(){return e.get(n.SHOW_COMMENTS_STORAGE_KEY)!==false}get templateName(){return`dashboard-tile-${r.ID}`}remove(){super.remove();this.$el=undefined}}AGN.Lib.Dashboard.XlCalendarTile=r})();(()=>{const e=AGN.Lib.Dashboard.Def.TileSize;class t extends AGN.Lib.Dashboard.XlCalendarTile{static ID="week-calendar";constructor(t){super(t);this.variants=[e.X_WIDE];this.size=this.variants[0]}get isWeekMode(){return true}}AGN.Lib.Dashboard.WeekCalendarTile=t})();(()=>{class e extends AGN.Lib.Dashboard.DraggableTile{static ID="imports-exports"}AGN.Lib.Dashboard.ImportExportTile=e})();(()=>{class e extends AGN.Lib.Dashboard.BaseMailingStatisticsTile{static ID="statistics";extractStatisticsData(e){const t=[];const i=[];for(let n=0;n<e["common"].length;n++){t.push(e["common"][n][0]);i.push(parseInt(e["common"][n][1]))}return{names:t,values:i}}getChartOptions(){const e=this._isMobileView;const t=this.$el.css("--chart-blue-color");return{type:"bar",data:{labels:this._chartData.names,datasets:[{data:this._chartData.values,backgroundColor:t,categoryPercentage:e?.7:.9,minBarLength:2}]},options:{indexAxis:e?"y":"x",layout:{padding:{top:e?0:20,right:e?25:0}},scales:{x:{display:!e,ticks:{autoSkip:false,maxRotation:90,minRotation:0}},y:{display:e,ticks:{mirror:true,labelOffset:-37.5}}},plugins:{legend:{display:false},datalabels:{anchor:"end",align:"end",offset:e?0:-5}}}}}needsRedrawOnMobile(){return true}}AGN.Lib.Dashboard.StatisticsTile=e})();(()=>{class e extends AGN.Lib.Dashboard.BaseMailingDeviceStatisticsTile{static ID="clickers";extractStatisticsData(e){const t=[];const i=[];const n=e["clickers"];for(let e=0;e<n.length;e++){const r=parseFloat(n[e][1]);t.push(n[e][0]);i.push(r)}return _.extend(super.extractStatisticsData(e),{names:t,values:i})}drawChart(){const e=AGN.Lib.ChartUtils.getTotal(this._chartData.values);const t=this.findCanvas$();t.toggleClass("hidden",e===0);t.next().toggleClass("hidden",e>0);if(e>0){super.drawChart()}}}AGN.Lib.Dashboard.ClickersTile=e})();(()=>{class e extends AGN.Lib.Dashboard.BaseMailingDeviceStatisticsTile{static ID="openers";extractStatisticsData(e){const t=[];const i=[];const n=e["openers"];for(let e=0;e<n.length;e++){const r=parseFloat(n[e][1]);t.push(n[e][0]);i.push(r)}return _.extend(super.extractStatisticsData(e),{names:t,values:i})}extractPercent(e){return e["openersPercent"][0]}drawChart(){const e=AGN.Lib.ChartUtils.getTotal(this._chartData.values);const t=this.findCanvas$().parent();t.toggleClass("hidden",e===0);t.next().toggleClass("hidden",e===0);t.next().next().toggleClass("hidden",e>0);if(e>0){super.drawChart();this.#ti(this._chartData.percent)}}#ti(e){e=this.#ii(e*100,1);this.$el.find("#statistics-openers-percent").text(`${e}%`)}#ii(e,t){return parseFloat(e).toFixed(t)*1}}AGN.Lib.Dashboard.OpenersTile=e})();(()=>{const e=".mailing-card";class t extends AGN.Lib.Dashboard.DraggableTile{static ID="mailings";constructor(e){super(e);const t=this;e.addAction({click:"delete-recent-mailing"},(function(){t.deleteAction(this)}));e.addAction({click:"copy-recent-mailing"},(function(){t.copyAction(this)}));e.addAction({change:"change-mailings-preview"},(function(){const e=this.el.closest(".tile");const t=!this.el.is(":checked");AGN.Lib.Storage.set("dashboard-mailings-preview",t);AGN.Lib.CoreInitializer.run("truncated-text-popover");AGN.Lib.Scrollbar.get(e.find(".tile-body")).update();AGN.Lib.Popover.toggleState(e,!t)}))}copyAction(e){e.event.preventDefault();const t=this.getRecentMailingId($(e.el));AGN.Lib.Page.reload(AGN.url(`/mailing/${t}/copy.action`))}deleteAction(t){t.event.preventDefault();const i=$(t.el);$.get({url:AGN.url("/mailing/deleteMailings.action"),data:{bulkIds:this.getRecentMailingId(i),toPage:"dashboard"}}).done((t=>{AGN.Lib.Confirm.create(t).done((t=>{AGN.Lib.RenderMessages($(t));i.closest(e).remove()}))}))}getRecentMailingId(t){return t.closest(e).data("mailing-id")}get templateOptions(){return{...super.templateOptions,isPreviewEnabled:AGN.Lib.Storage.get("dashboard-mailings-preview")||false}}}AGN.Lib.Dashboard.MailingsTile=t})();(()=>{class e extends AGN.Lib.Dashboard.DraggableTile{static ID="news";constructor(e){super(e);this.dashboardNews=new AGN.Lib.Dashboard.News}afterTileAdded(){super.afterTileAdded();this.dashboardNews.showNews(this.$el.find("> .tile-body"));this.dashboardNews.$sidebarNewsBtn.hide()}remove(){super.remove();this.dashboardNews.$sidebarNewsBtn.show(this.shown)}}AGN.Lib.Dashboard.NewsTile=e})();(()=>{const e=AGN.Lib.Dashboard.Def;const i=e.TileSize;class n extends AGN.Lib.Dashboard.DraggableTile{static ID="planning";constructor(e){super(e);const t=this;this._controller.addDomInitializer("dashboard-planning",(function(){$.i18n.load(this.config.translations);t.#ni();t.#ri(new Date,new Date)}));this.variants=[i.TALL];this.size=this.variants[0]}#ni(){const e=this.$el.find("#schedule-start-date");const t=this.$el.find("#schedule-end-date");this.#oi(e,e,t);this.#oi(t,e,t)}#oi(e,t,i){const n=this;e.on("change",(function(){const e=t.datepicker("getDate");const r=i.datepicker("getDate");if(e&&r){n.#ri(e,r)}}));e.datepicker("option","onChangeMonthYear",(function(e,n,r){const o=$(this);const[s,a]=o.datepicker("option","yearRange").split(":");if(parseInt(e)===parseInt(a)){const e=`${s}:${parseInt(a)+1}`;const n=o.is(t)?i:t;r.settings.yearRange=e;n.datepicker("option","yearRange",e)}}))}#ri(e,i){this.#si(e,i,window.adminDateFormat).then((e=>{let i="";if(e.length){i=`<div class="grid w-100" style="--bs-columns: 1">${this.#ai(e)}</div>`}else{i=AGN.Lib.Template.text("notification-info",{message:t("dashboard.schedule.noMailings")})}const n=this.$el.find("#schedule-data-container");n.html(i);AGN.runAll(n)}))}#si(e,t,i){return new Promise(((n,r)=>{$.get(AGN.url("/dashboard/scheduledMailings.action"),{startDate:AGN.Lib.DateFormat.format(e,i),endDate:AGN.Lib.DateFormat.format(t,i)}).done((e=>n(e))).fail((e=>r(e)))}))}#ai(e){_.each(e,(e=>e.link=AGN.url(`/mailing/send/${e.id}/view.action`)));const t=_.groupBy(e,"sendDate");const i=_.sortBy(t,(e=>e[0].maildropSendDate)).map((e=>_.sortBy(e,"sendTime")));return i.reduce(((e,t)=>{const i=new Date(t[0].maildropSendDate);const n=i.toLocaleString(window.adminLocale,{weekday:"long"});const r=t[0].sendDate;const o=AGN.Lib.Template.text("dashboard-schedule-day",{dayOfWeek:n,dateStr:r,dayMailings:t});return e+o}),"")}}AGN.Lib.Dashboard.PlanningTile=n})();(()=>{class e extends AGN.Lib.Dashboard.DraggableTile{static ID="workflows"}AGN.Lib.Dashboard.WorkflowsTile=e})();AGN.Lib.Controller.new("dashboard",(function(){const e=AGN.Lib.Modal;const t=AGN.Lib.Dashboard.Def;const i=t.TileSize;const n=AGN.Lib.Dashboard.EmptyTile;const r=AGN.Lib.Dashboard.DraggableTile;let o=[new AGN.Lib.Dashboard.MailingsTile(this),new AGN.Lib.Dashboard.PlanningTile(this),new AGN.Lib.Dashboard.StatisticsTile(this),new AGN.Lib.Dashboard.ClickersTile(this),new AGN.Lib.Dashboard.OpenersTile(this),new AGN.Lib.Dashboard.WorkflowsTile(this),new AGN.Lib.Dashboard.ImportExportTile(this),new AGN.Lib.Dashboard.AddOnsTile(this),new AGN.Lib.Dashboard.NewsTile(this),new AGN.Lib.Dashboard.XlCalendarTile(this),new AGN.Lib.Dashboard.CalendarTile(this),new AGN.Lib.Dashboard.WeekCalendarTile(this),new AGN.Lib.Dashboard.AnalysisTile(this)];let s;let a;this.addDomInitializer("dashboard-view",(function(){o=o.filter((e=>e.allowed()));const e=JSON.parse(this.config.layout)||_.clone(t.LAYOUT.DEFAULT);u(d(e.SCHEMA),e.COLS_COUNT);l();$(window).on("displayTypeChanged",((e,t)=>{if(t){m(false)}}));m(false);new AGN.Lib.Dashboard.News}));function l(){if(!a.visibleTiles.length){AGN.Lib.Messages.info("dashboard.empty")}}function c(e,t){const n=e.position?.rows?.length;const r=e.position?.cols?.length;if(n===2&&r===1){return i.TALL}if(n===1&&r===2){return i.WIDE}if(n===2&&r===3){return i.X_LARGE}return t}function d(e){return e.map((e=>{const t=p(e.id);t.size=c(e,t.size);return t}))}function u(e,t){a=new AGN.Lib.Dashboard.DashboardGrid(2,t,e)}this.addAction({click:"delete-tile"},(function(){const e=this.el.closest(".draggable-tile");const t=r.get(e);a.removeTile(t)}));this.addAction({click:"select-tile"},(function(){s=r.get(this.el.closest(".draggable-tile"));e.fromTemplate("dashboard-tiles-selection-modal",{tiles:h()})}));function h(){const e=a.visibleTiles.map((e=>e.id));return o.filter((t=>t.id!==n.ID&&!e.includes(t.id))).map((e=>{e.variants.forEach((e=>e.disabled=a.getPossibleStartPositions(e,s.beginRow,s.beginCol).length<=0));return e}))}this.addAction({click:"add-tile"},(function(){const e=p(this.el.data("tile-id"));const t=i.from(this.el.data("type"));if(t){e.size=t}a.placeTileAroundPos(e,s.beginRow,s.beginCol)}));this.addAction({change:"redraw-mailing-statistics"},(function(){const e=this.el.closest(".draggable-tile");const t=r.get(e);t.updateChart()}));this.addAction({click:"open-mailing-statistics"},(function(){const e=this.el.closest(".draggable-tile").find("[data-statistics-mailing]").val();AGN.Lib.Page.reload(AGN.url(`/statistics/mailing/${e}/view.action`))}));function p(e){return o[o.findIndex((t=>t.id===e))]||new n}function f(e){if(!e.length){return}$(":focus",e).blur();toastr.clear(e)}this.addAction({click:"edit-dashboard"},(function(){m(true);const e=this.el.closest(".popup");f(e)}));this.addAction({click:"stop-editing"},(function(){m(false);l();g()}));function g(){$.ajax({type:"POST",url:AGN.url("/dashboard/layout/save.action"),data:{layout:JSON.stringify(a.schema)},async:false}).done((()=>AGN.Lib.Messages.defaultSaved())).fail((()=>AGN.Lib.Messages.defaultError()))}function m(e){$("#dashboard-start-edit-btn").closest("li").toggle(!e);$("body").toggleClass("edit-mode",!!e);a.swapper.toggle(e)}this.addAction({click:"select-layout"},(function(){e.fromTemplate("dashboard-layout-selection-modal")}));function v(e,t){switch(t){case 3:return e.position.cols.includes(3);case 2:return e.position.cols.includes(2)||e.position.cols.includes(3);default:return false}}function b(e){a.tiles.filter((t=>(t.isXl||t.isXWide)&&v(t,e))).forEach((e=>a.removeTile(e)));const t=a.tiles.map((t=>{if(t.isWide&&v(t,e)){const e=new n;e.position={cols:[t.beginCol],rows:[t.beginRow]};return e}return t}));return t.filter((t=>!v(t,e)))}function y(e,t){for(let i=0;i<a.rows;i++){const r=new n;r.position={rows:[i],cols:[t]};e.push(r)}}function w(e){const t=a.tiles;for(let i=0;i<e-a.cols;i++){y(t,a.cols+i)}return t}function C(e){if(e<a.cols){return b(e)}return w(e)}this.addAction({click:"change-layout"},(function(){const e=this.el.data("cols-count");if(e===a.cols){return}const t=C(e);u(t,e)}))}));(()=>{const e=AGN.Lib.Popover;const t=AGN.Lib.Template;class i extends e{constructor(t){super();this.mailing=t;this.mailing.thumbnailUrl=AGN.url(this.mailingThumbnailSrc);e.getOrCreate(t.$el,{...this.options,content:this.content})}get content(){return t.dom("calendar-mailing-popover-content",this.mailing)}get options(){return{trigger:"hover",html:true,customClass:"dashboard-mailing-popover",popperConfig:{placement:"bottom"}}}get mailingThumbnailSrc(){if(this.mailing.post){return"/assets/core/images/facelift/post_thumbnail.jpg"}if(this.mailing.thumbnailComponentId){return"/sc?compID="+this.mailing.thumbnailComponentId}return"/assets/core/images/facelift/no_preview.svg"}}AGN.Lib.Dashboard.MailingPopoverUxUpdateRollback=i})(jQuery);(()=>{const e=AGN.Lib.Popover;const t=AGN.Lib.Template;const i="/assets/core/images/facelift/no_preview.svg";const n="---";const r=200;class o extends e{constructor(t,i){super();this.showLoader=i;this.mailing=t;const n=AGN.url(this.mailingThumbnailSrc(t));const o=this.content(this.showLoader?this.loaderInfo:this.loadedInfo(t,n));this.popover=e.getOrCreate(this.mailing.$el,this.options(o));function s(e=0,t=0){return()=>({width:0,height:0,top:t,right:e,bottom:t,left:e})}const a=({clientX:e,clientY:t})=>{if(this.popover?._popper?.state?.elements?.reference){this.popover._popper.state.elements.reference=l}l.getBoundingClientRect=s(e,t);this.popover?._popper?.update()};const l={getBoundingClientRect:s()};this.mailing.$el.off("mouseenter").on("mouseenter",(e=>{if(this.disabled){return}const t=setTimeout((()=>{this.popover.show();if(this.showLoader){AGN.Lib.Loader.prevent();$.get(AGN.url("/calendar/mailingsPopoverInfo.action"),{mailingIds:this.mailing.id}).done((e=>{const t=AGN.url(this.mailingThumbnailSrc(e[0]));let i=new Image;i.src=t;i.onload=()=>{this.$loadedContent=this.content(this.loadedInfo(e[0],t));o.replaceWith(this.$loadedContent);this.showLoader=false}}))}}),r);this.mailing.$el.on("mousemove",a);this.mailing.$el.on("mouseleave",(()=>{this.mailing.$el.off("mousemove",a);this.popover.hide();clearTimeout(t);if(this.$loadedContent?.length){this.popover.setContent({".popover-body":this.$loadedContent})}}))}))}loadedInfo(e,t){return{...e,isSent:this.mailing.isSent,thumbnailUrl:t,showLoader:false}}disable(){this.disabled=true}enable(){this.disabled=false}content(e){const i=t.dom("calendar-mailing-popover-content",e);AGN.runAll(i);return i}get loaderInfo(){return{shortname:this.mailing.shortname,thumbnailUrl:AGN.url(i),subject:n,description:n,mailinglist:n,sendDate:n,sentCount:n,isSent:this.mailing.isSent,openers:n,clickers:n,showLoader:true}}options(e){return{content:e,html:true,trigger:"manual",customClass:"dashboard-mailing-popover",popperConfig:e=>({...e,placement:"bottom-start",modifiers:[...e.modifiers||[],{name:"offset",options:{offset:({placement:e,reference:t,popper:i})=>["bottom-end","top-end"].includes(e)?[-15,15]:[15,15]}},{name:"flip",options:{enabled:true,fallbackPlacements:["bottom-end","top-start","top-end"]}}]})}}mailingThumbnailSrc(e){if(e.post){return"/assets/core/images/facelift/post_thumbnail.jpg"}if(e.thumbnailComponentId){return"/sc?compID="+e.thumbnailComponentId}return i}}AGN.Lib.Dashboard.MailingPopover=o})(jQuery);AGN.Lib.Controller.new("dashboard-grid",(function(){const e=["xl-calendar"];const t=AGN.Lib.Dashboard;const i=AGN.Lib.Modal;const n=t.Def;const r=n.TileSize;const o=t.EmptyTile;const s=t.DraggableTile;const a=this;let l;let c;let d;this.addDomInitializer("dashboard-grid",(function(){l=u().filter((e=>e.allowed()));const e=JSON.parse(this.config.layout)||_.clone(n.LAYOUT.DEFAULT);h(e);m(g(e.SCHEMA),e.COLS_COUNT);p();$(window).on("displayTypeChanged",((e,t)=>{if(t){C(false)}}));C(false)}));function u(){return[new t.MailingsTile(a),new t.PlanningTile(a),new t.StatisticsTile(a),new t.ClickersTile(a),new t.OpenersTile(a),new t.WorkflowsTile(a),new t.ImportExportTile(a),new t.AddOnsTile(a),new t.NewsTile(a),new t.CalendarTile(a),new t.WeekCalendarTile(a),new t.AnalysisTile(a)]}function h(i){i.SCHEMA.filter((t=>e.includes(t.id))).map((e=>e.position)).forEach((e=>{e.rows.forEach((n=>{e.cols.forEach((e=>{i.SCHEMA.push({id:t.EmptyTile.ID,positions:{rows:[n],cols:[e]}})}))}))}));i.SCHEMA=i.SCHEMA.filter((t=>!e.includes(t.id)))}function p(){if(!d.visibleTiles.length){AGN.Lib.Messages.info("dashboard.empty")}}function f(e,t){const i=e.position?.rows?.length;const n=e.position?.cols?.length;if(i===2&&n===1){return r.TALL}if(i===1&&n===2){return r.WIDE}if(i===2&&n===3){return r.X_LARGE}return t}function g(e){return e.map((e=>{const t=b(e.id);t.size=f(e,t.size);return t}))}function m(e,i){d=new t.DashboardGrid(2,i,e)}this.addAction({click:"delete-tile"},(function(){const e=this.el.closest(".draggable-tile");const t=s.get(e);d.removeTile(t)}));this.addAction({click:"select-tile"},(function(){c=s.get(this.el.closest(".draggable-tile"));i.fromTemplate("dashboard-tiles-selection-modal",{tiles:v()})}));function v(){const e=d.visibleTiles.map((e=>e.id));return l.filter((t=>t.id!==o.ID&&!e.includes(t.id))).map((e=>{e.variants.forEach((e=>e.disabled=d.getPossibleStartPositions(e,c.beginRow,c.beginCol).length<=0));return e}))}this.addAction({click:"add-tile"},(function(){const e=b(this.el.data("tile-id"));const t=r.from(this.el.data("type"));if(t){e.size=t}d.placeTileAroundPos(e,c.beginRow,c.beginCol)}));this.addAction({change:"redraw-mailing-statistics"},(function(){const e=this.el.closest(".draggable-tile");const t=s.get(e);t.updateChart()}));this.addAction({click:"open-mailing-statistics"},(function(){const e=this.el.closest(".draggable-tile").find("[data-statistics-mailing]").val();AGN.Lib.Page.reload(AGN.url(`/statistics/mailing/${e}/view.action`))}));function b(e){return l[l.findIndex((t=>t.id===e))]||new o}function y(e){if(!e.length){return}$(":focus",e).blur();toastr.clear(e)}this.addAction({click:"edit-dashboard"},(function(){C(true);const e=this.el.closest(".popup");y(e)}));this.addAction({click:"stop-editing"},(function(){C(false);p();w()}));function w(){$.ajax({type:"POST",url:AGN.url("/dashboard/layout/save.action"),data:{layout:JSON.stringify(d.schema)},async:false}).done((()=>AGN.Lib.Messages.defaultSaved())).fail((()=>AGN.Lib.Messages.defaultError()))}function C(e){$("#dashboard-start-edit-btn").closest("li").toggle(!e);$("body").toggleClass("edit-mode",!!e);d.swapper.toggle(e)}this.addAction({click:"select-layout"},(function(){i.fromTemplate("dashboard-layout-selection-modal")}));function S(e,t){switch(t){case 3:return e.position.cols.includes(3);case 2:return e.position.cols.includes(2)||e.position.cols.includes(3);default:return false}}function A(e){d.tiles.filter((t=>(t.isXl||t.isXWide)&&S(t,e))).forEach((e=>d.removeTile(e)));const t=d.tiles.map((t=>{if(t.isWide&&S(t,e)){const e=new o;e.position={cols:[t.beginCol],rows:[t.beginRow]};return e}return t}));return t.filter((t=>!S(t,e)))}function x(e,t){for(let i=0;i<d.rows;i++){const n=new o;n.position={rows:[i],cols:[t]};e.push(n)}}function E(e){const t=d.tiles;for(let i=0;i<e-d.cols;i++){x(t,d.cols+i)}return t}function T(e){if(e<d.cols){return A(e)}return E(e)}this.addAction({click:"change-layout"},(function(){const e=this.el.data("cols-count");if(e===d.cols){return}const t=T(e);m(t,e)}))}));AGN.Lib.Controller.new("dashboard-calendar",(function(){const e=AGN.Lib.Dashboard.DashboardCalendarLabel;const t=AGN.Lib.Dashboard.DashboardCalendar;let i;this.addDomInitializer("dashboard-calendar",(function(){i=new t($("#dashboard-calendar"),this.config);new AGN.Lib.Dashboard.News}));this.addDomInitializer("unsent-list",(function(){i.initUnsentList(this.config.mailings,this.config.planned)}));this.addAction({change:"toggle-scroll"},(e=>i.toggleScroll(e.prop("checked"))));this.addAction({change:"switch-mode"},(e=>i.toggleMode(e.prop("checked"))));this.addAction({click:"show-more-mailings"},(e=>i.showMoreMailings(e)));this.addAction({click:"jump-to-today"},(()=>i.jumpToToday()));this.addAction({keyup:"search"},(e=>i.search(e.val().toLowerCase())));this.addAction({dblclick:"show-comment"},(t=>e.get(t).showModal()));this.addAction({change:"toggle-comments"},(e=>i.commentsManager.toggle(e.prop("checked"))));this.addAction({click:"create-comment"},(e=>i.commentsManager.create(e.data("date"))));this.addAction({click:"delete-comment"},(e=>i.commentsManager.remove(e.data("comment-id"))));this.addAction({click:"save-comment"},(e=>i.commentsManager.save(e.data("comment-id"))))}));(()=>{const e=AGN.Lib.Template;const t=AGN.Lib.Modal;let i=[];class n{constructor(){this.$sidebarNewsBtn.off("click").on("click",(()=>this.showNewsModal()))}get $sidebarNewsBtn(){return $("#sidebar-news-btn")}get $sidebarNewsCounter(){return this.$sidebarNewsBtn.find("span:nth-child(2)")}get unreadNewsCount(){return parseInt(this.$sidebarNewsCounter?.text())}showNewsModal(){const e=t.fromTemplate("news-modal-template");this.showNews(e.find(".modal-body"));if(this.unreadNewsCount<1){return}this.$sidebarNewsCounter.hide();$.post(AGN.url("/administration/popupnews/reset-news-unread-count.action"))}showNews(t){this.fetchNews().then((i=>i.forEach((i=>t.append(e.dom("news-item-template",i))))))}async fetchNews(){return i.length?i:(i=await $.get(AGN.url("/administration/popupnews/news.action")))||[]}}AGN.Lib.Dashboard.News=n})();(function(){const e=AGN.Lib.WM.EditorsHelper;class t{constructor(){this.formName="iconCommentForm";this.safeToSave=true}fillEditor(e){$("#iconComment").val(e.getComment())}saveEditor(){e.saveIconComment($("#iconComment").val());this.cancelEditor()}cancelEditor(){$("#icon-comment-editor").dialog("close");return false}}AGN.Lib.WM.CommentEditor=t})();(function(){const e=AGN.Lib.WM.Definitions;class t extends AGN.Lib.InputTable{constructor(t,i=[],n,r){t.empty();const o=i.map((t=>({...t,chainOperator:t.chainOperator===parseInt(e.constants.chainOperatorOr)})));super(t,o,n);this.profileFieldsTypes=r;this.#li();this.updateOperatorsAvailability()}get $form(){return this.$container.closest("form")}get $profileFieldSelect(){return this.$form.find('[name="profileField"]')}get currentProfileField(){return this.$profileFieldSelect.val()}get currentProfileFieldIsGender(){return this.currentProfileField?.toLowerCase()===e.GENDER_PROFILE_FIELD}addActions(){super.addActions();this.addAction({click:"[data-add-row]"},(()=>this.onRowAddedManually()));this.addAction({click:"[data-delete-row]"},(()=>this.onRowsChangedManually()))}addRow(e){const t=this;super.addRow(e);this.$container.find('tr:last [data-name="primaryOperator"]').on("change",(function(){t.updateValueInput($(this))}))}renderTable(t){super.renderTable(t);this.$container.find('[data-name="primaryOperator"]').toArray().filter((t=>$(t).val()===e.constants.operatorIs)).forEach((t=>$(t).data("previous-value",e.constants.operatorIs)));if(this.currentProfileFieldIsGender){this.$profileFieldSelect.data("previous-value",e.GENDER_PROFILE_FIELD)}this.removeLastRow()}onRowAddedManually(){this.updateOperatorsAvailability();this.onRowsChangedManually()}onRowsChangedManually(){this.#li();this.$container.trigger("change")}#li(){this.$container.find('[data-name="chainOperator"]:first').closest(".switch").prop("checked",false).closest("td").hide();this.$container.find('[data-name="chainOperator"]:not(:first)').closest(".switch").show()}collect(){const t=super.collect();t.forEach((t=>{t.chainOperator=parseInt(t.chainOperator?e.constants.chainOperatorOr:e.constants.chainOperatorAnd);t.parenthesisOpened=parseInt(t.parenthesisOpened);t.parenthesisClosed=parseInt(t.parenthesisClosed);t.primaryOperator=parseInt(t.primaryOperator)}));return t}get rowTemplate(){const e=this.$primaryOperatorOptions();const t=this.ruleValueInput();return`\n          <tr>\n              <td style="max-width: 70px">\n                  <label class="switch">\n                      <input type="checkbox" data-name="chainOperator" value="true" {{- chainOperator ? 'checked' : ''}} ${this.readonlyAttr}>\n                      <span>AND</span>\n                      <span class="flex-center flex-grow-1">OR</span>\n                  </label>\n              </td>\n              <td style="max-width: 45px">\n                  <select data-name="parenthesisOpened" class="form-control js-select rule-field" ${this.readonlyAttr}>\n                      <option value="0" {{- parenthesisOpened === 0 ? 'selected' : ''}}>&nbsp</option>\n                      <option value="1" {{- parenthesisOpened === 1 ? 'selected' : ''}}>(</option>\n                  </select>\n              </td>\n              <td>\n                  <select data-name="primaryOperator" class="form-control js-select" data-action="start-rule-operator-change" ${this.readonlyAttr} data-select-options="dropdownAutoWidth: true">\n                      ${e}\n                  </select>\n              </td>\n              <td>\n                  ${t}\n              </td>            \n              <td style="max-width: 45px">\n                  <select data-name="parenthesisClosed" class="form-control js-select rule-field" ${this.readonlyAttr}>\n                      <option value="0" {{- parenthesisClosed === 0 ? 'selected' : ''}}>&nbsp</option>\n                      <option value="1" {{- parenthesisClosed === 1 ? 'selected' : ''}}>)</option>\n                  </select>\n              </td>                        \n          </tr>`}emptyRuleValueInput(){return`<input type="text" data-name="primaryValue" value="" class="form-control rule-field" ${this.readonlyAttr}/>`}ruleValueInput(){return`\n        {{ if (${this.currentProfileField===e.GENDER_PROFILE_FIELD}) { }}\n            ${this.genderSelect(true)}\n        {{ } else if (primaryOperator == ${e.constants.operatorIs}) { }}\n            ${this.operatorIsSelect(true)}\n        {{ } else { }}\n            ${this.emptyRuleValueInput().replace('value=""','value="{{- primaryValue }}"')}\n        {{ } }}`}$primaryOperatorOptions(){let t="";e.constants.operators.forEach((function(e){let i='value="'+e.id+'"';let n=e.data;if(n){Object.keys(n).forEach((function(e){i+=" data-"+e+'="'+n[e].replace('"',"&quot;")+'"'}))}t+=`<option ${i} {{- primaryOperator === ${e.id} ? 'selected' : '' }}>${e.text.replace("<","&lt;").replace(">","&gt;")}</option>`}));return t}genderSelect(t){const i=Object.entries(e.constants.genderOptions).map((([e,i])=>this.genderOption(e,i,t))).join("");return`<select data-name="primaryValue" class="form-control js-select">${i}</select>`}genderOption(e,t,i){const n=i?`{{- primaryValue == ${e} ? "selected" : "" }}`:"";return`<option value="${e}" ${n}>${t}</option>`}operatorIsSelect(e){const t=`\n        <select data-name="primaryValue" class="form-control js-select">\n            <option value="NULL">NULL</option>\n            <option value="NOT_NULL">NOT NULL</option>\n        </select>`;if(e){return t.replace('value="NULL"','value="NULL" {{- primaryValue === "NULL" ? "selected" : "" }}').replace('value="NOT_NULL"','value="NOT_NULL" {{- primaryValue === "NOT_NULL" ? "selected" : "" }}')}return t}updateOperatorsAvailability(){const e=this.$container.find('select[data-name="primaryOperator"]');_.forEach(e.toArray(),(e=>this.updateSelectOperatorsAvailability($(e))));e.trigger("change.select2")}updateSelectOperatorsAvailability(e){const t=this.currentProfileField;const i=this.profileFieldsTypes[t];const n=e.children("option").toArray().filter((e=>this.isAllowedOperatorsOption(e,i))).map((e=>e.value));AGN.Lib.Select.get(e).disableOptions(n,true)}isAllowedOperatorsOption(e,t){if(this.currentProfileFieldIsGender){return e.text!=="="&&e.text!=="<>"}const i=$(e).data("types");if(i==="*"||!i){return false}return!i.split(/[\s,]+/).includes(t)}updateValueInput(t){const i=t.closest("tr").find('[data-name="primaryValue"]');if(t.val()===e.constants.operatorIs){const n=$(this.operatorIsSelect());i.closest("td").html(n);t.data("previous-value",e.constants.operatorIs);this.#U(n)}else if(t.data("previous-value")===e.constants.operatorIs){i.closest("td").html(this.emptyRuleValueInput());t.removeData("previous-value")}}onProfileFieldChanged(){this.updateOperatorsAvailability();if(this.currentProfileFieldIsGender){this.changeValueInputsToGenderSelect();this.$profileFieldSelect.data("previous-value",e.GENDER_PROFILE_FIELD)}else if(this.$profileFieldSelect.data("previous-value")===e.GENDER_PROFILE_FIELD){this.changeValueInputsToTextInput();this.$profileFieldSelect.removeData("previous-value")}}changeValueInputsToGenderSelect(){_.each(this.$container.find('[data-name="primaryValue"]'),(e=>{const t=$(this.genderSelect());$(e).closest("td").html(t);this.#U(t)}))}changeValueInputsToTextInput(){_.each(this.$container.find('[data-name="primaryValue"]'),(e=>{$(e).closest("td").html(this.emptyRuleValueInput())}))}#U(e){AGN.Lib.CoreInitializer.run("select",e)}}AGN.Lib.WM.FieldRulesTable=t})();(function(){const e=AGN.Lib.WM.EditorsHelper;class t{constructor(){if(this.constructor===t){throw new Error("Cannot instantiate abstract class")}}get saveOnOpen(){return false}get $form(){return $(`form[name="${this.formName}"]`)}get form(){return AGN.Lib.Form.get(this.$form)}get formName(){throw new Error("formName() must be implemented")}$find(e){return $(`form[name="${this.formName}"] ${e}`)}toggle(e,t){this.$find(e).toggle(t)}hide(e){this.toggle(e,false)}show(e){this.toggle(e,true)}dateAsUTC(e){return e?new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())):null}getForwardParams(t){return{nodeId:e.curEditingNode.getId(),elementId:encodeURIComponent(t)}}getForwardParamsStr(){return Object.entries(this.getForwardParams()).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join(";")}isValid(){return this.form.validate()}save(){if(this.isValid()){e.saveCurrentEditorWithUndo()}}alwaysReadonly(e){return false}}AGN.Lib.WM.NodeEditor=t})();(function(){const e=AGN.Lib.WM.EditorsHelper;const t=AGN.Lib.Messages;const i=AGN.Lib.WM.Definitions;class n extends AGN.Lib.WM.NodeEditor{constructor(e){super();this.conf=e;this.safeToSave=true}get formName(){throw new Error("formName() must be implemented")}get $idSelect(){return this.$find("select[name=importexportId]")}get selectedId(){return this.$idSelect.val()}get type(){throw new Error("type() must be implemented")}get $editor(){throw new Error("$editor() must be implemented")}fillEditor(i){const n=i.getData();this.$form.submit(false);this.$form.get(0).reset();e.fillFormFromObject(this.formName,n,"");this.addLinks();if(this.conf.isDisabled==="true"){t.warn(this.missingPermissionMsgCode)}this.isValid()}get missingPermissionMsgCode(){throw new Error("missingPermissionMsgCode() must be implemented")}get dependencyType(){throw new Error("dependencyType() must be implemented")}get inUseMsgCode(){throw new Error("inUseMsgCode() must be implemented")}get notSelectedMsgCode(){throw new Error("notSelectedMsgCode() must be implemented")}isValidDependency(){let e=false;$.ajax({url:AGN.url("/workflow/validateDependency.action"),async:false,data:{workflowId:i.workflowId||0,type:this.dependencyType,entityId:this.selectedId}}).done((i=>{if(i.valid===true){e=true}else{t.warn(this.inUseMsgCode)}})).fail((()=>{t.warn("Error")}));return e}isValid(){return super.isValid()&&this.isValidDependency()}save(){if(this.conf.isDisabled==="true"){return}super.save()}onChange(){this.addLinks()}addLinks(){throw new Error("addLinks() must be implemented")}saveEditor(){return e.formToObject(this.formName)}isSetFilledAllowed(){const e=this.$idSelect.find(":selected");return!(this.selectedId==0||e.data("is-available")!=true)}}AGN.Lib.WM.RecipientTransferEditor=n})();(()=>{const e=AGN.Lib.WM.MailingSelector;const i=AGN.Lib.WM.FieldRulesTable;const n=AGN.Lib.WM.EditorsHelper;const r=AGN.Lib.WM.DateTimeUtils;const o=AGN.Lib.Template;const s=AGN.Lib.Messages;const a=AGN.Lib.Select;const l=AGN.Lib.WM.Definitions;class c extends AGN.Lib.WM.NodeEditor{constructor(t,i,n){super();this.editor=t;this.config=i;this.submitWorkflowForm=n;this.startMailingSelector=new e(i.form,i.selectedName,i.noMailingOption);this.isStartEditor=false;this.timePattern=/^(\d{2}):(\d{2})$/}get saveOnOpen(){return true}get formName(){return"startForm"}get title(){return this.isStartEditor?t("workflow.start.title"):t("workflow.stop.title")}get $endTypeSelect(){return this.$find('[name="endType"]')}get endTypeSelect(){return a.get(this.$endTypeSelect)}get $rulesContainer(){return this.$find("#profileFieldRules")}get requiredMsg(){return t("fields.required.errors.missing")}getStartStopDate(e){e=e||n.formToObject(this.formName);if(this.isStartEditor){switch(e.startType){case l.constants.startTypeDate:return this.$find("#startDate").datepicker("getDate");case l.constants.startTypeEvent:return this.$find("#executionDate").datepicker("getDate")}}else if(e.endType==l.constants.endTypeDate){return this.$find("#startDate").datepicker("getDate")}return null}generateReminderComment(){const e=$('#workflowForm input[name="shortname"]').val();const i=r.getDateStr(this.getStartStopDate(),window.adminDateFormat);return(this.isStartEditor?t("workflow.start.reminder_text"):t("workflow.stop.reminder_text")).replace(/:campaignName/g,e).replace(/:startDate/g,i).replace(/:endDate/g,i)}fillEditor(e){var o=e.getData();this.isStartEditor=e.getType()==="start";const s=this.isStartEditor&&(e.data.startType===l.constants.startTypeEvent||!this.editor.isAutoOptimizationWorkflow(e));this.updateEditorType(this.isStartEditor,s);this.$form.submit(false);this.$find("#remindCalendarDateTitle").text(t(this.isStartEditor?"workflow.start.start_date":"workflow.stop.end_date"));o.adminTimezone=this.config.adminTimezone;o.sendReminder=o.scheduleReminder;n.fillFormFromObject(this.formName,o,"");this.startMailingSelector.setMailingId(o.mailingId);this.startMailingSelector.cleanOptions();this.#ci(o.mailingId);const c=new Date;this.$find("#startDate").datepicker("setDate",this.dateAsUTC(o.date??c));this.$find("#executionDate").datepicker("setDate",this.dateAsUTC(o.date??c));this.$find("#remindDate").datepicker("setDate",this.dateAsUTC(o.remindDate??c));const d=o.date?o:r.getCurrentAdminTime();this.$find("#startTime").val(this.formatTime(d.hour,d.minute));this.$find("#remindTime").val(this.formatTime(d.remindHour,d.remindMinute));this.updateVisibility();if(o.startType==l.constants.startTypeEvent&&o.event==l.constants.startEventReaction&&o.reaction==l.constants.reactionClickedLink&&o.mailingId!=0&&o.mailingId!=null){this.onMailingSelectChange(o.mailingId,o.linkId)}if(!o.comment){this.$find("#reminderComment").val(this.generateReminderComment())}a.get($('#start-editor [name="userType"]')).selectOption(o.recipients!=""?2:1);this.form.cleanFieldFeedback();const u=!this.isStartEditor&&this.editor.isAllLinkedFilledStartsHasDateType(e);if(u){this.endTypeSelect.selectOption(l.constants.endTypeAutomatic)}this.endTypeSelect.setReadonly(u);this.rulesTable=new i(this.$rulesContainer,o.rules,n.isReadOnlyMode(),this.config.profileFields)}#ci(e){const t=$("#edit-start-editor-mailing-btn");t.toggleClass("hidden",!e);if(e){t.attr("href",AGN.url(`/mailing/${e}/settings.action`))}}editMailing(){const e=`form[name="${this.formName}"] select[name=mailingId]`;$("#forwardTargetItemId").val($(e).val());n.processForward(l.constants.forwards.MAILING_EDIT.name,e,this.submitWorkflowForm)}saveEditor(){const e=n.formToObject(this.formName);e.date=this.getStartStopDate(e);if(e.date==null){e.date=new Date;e.date.setHours(0);e.date.setMinutes(0);e.date.setSeconds(0);e.date.setMilliseconds(0)}var t;var i=this.$find("#startTime").val();if(t=this.timePattern.exec(i)){e.hour=t[1];e.minute=t[2]}else{e.hour=0;e.minute=0}e.scheduleReminder=e.sendReminder;var r=this.$find("#remindTime").val();if(t=this.timePattern.exec(r)){e.remindHour=t[1];e.remindMinute=t[2]}else{e.remindHour=0;e.remindMinute=0}if(this.$find('[name="remindSpecificDate"]').val()==="true"){e.remindDate=this.$find("#remindDate").datepicker("getDate")}else{e.remindDate=e.date;e.remindHour=0;e.remindMinute=0}if(e.rules==undefined){e.rules=[]}if(e.linkId==undefined||e.linkId==null){e.linkId=0}if(e.dateFieldOperator!=this.config.equelsOperatorCode){e.dateFieldOperator=this.config.equelsOperatorCode}if(e.userType==2){e.remindAdminId=0;e.recipients=$.trim(e.recipients).toLowerCase().split(/[,;\s\n\r]+/).filter((function(e){return!!e})).join(", ")}else{e.recipients=""}delete e.userType;e.rules=this.rulesTable.collect();return e}validateEditorInternal(e){const t=this;let i=true;const n=this.isStartEditor?this.$find('select[name="startType"]').val():this.$find('select[name="endType"]').val();if(this.isStartEditor&&n===l.constants.startTypeEvent){r();o()}if(this.isStartEditor&&n===l.constants.startTypeDate||!this.isStartEditor&&n===l.constants.endTypeDate){o()}if(i&&this.$find("#sendReminder").is(":checked")){if(this.$find('[name="userType"]').val()=="2"){a()}}if(i){this.form.cleanFieldFeedback()}return i;function r(){var n=t.$find('select[name="event"]').val();switch(n){case l.constants.startEventDate:var r=t.$find("#executionDate").datepicker("getDate");if(r){var o=t.$find("#startTime").val();if(!t.timePattern.test(o)){i=false}}else{i=false}var a=t.$find("#dateFieldValue");if(!$.trim(a.val())){i=false;if(e){s.warn("error.workflow.startDateOmitted")}}const n=t.$find("#dateProfileField");if(!$.trim(n.val())){i=false;if(e){t.form.showFieldError("dateProfileField",t.requiredMsg)}}break;case l.constants.startEventReaction:var c=t.$find('select[name="reaction"]').val();switch(c){case l.constants.reactionClickedLink:const n=t.$find('select[name="linkId"]').val();if(!n||parseInt(n,10)<=0){i=false;if(e){s.warn("error.workflow.noLinkSelected")}}case l.constants.reactionOpened:case l.constants.reactionClicked:const r=t.$find('select[name="mailingId"]').val();if(parseInt(r,10)<=0){i=false;if(e){s.warn("error.workflow.noMailing")}}break;case l.constants.reactionChangeOfProfile:if(typeof t.config.isBigData!="undefined"&&t.config.isBigData==true){var d=t.$find('select[name="profileField"]').val();if(!d){i=false}}const o=t.$find("#startProfileField");if(!$.trim(o.val())){i=false;if(e){t.form.showFieldError("profileField",t.requiredMsg)}}break;case l.constants.reactionWaitingForConfirm:case l.constants.reactionOptIn:case l.constants.reactionOptOut:break;default:i=false;break}break}}function o(){var e=t.$find("#startDate").datepicker("getDate");if(e){var n=t.$find("#startTime").val();if(!t.timePattern.test(n)){i=false}}else{i=false}}function a(){var n=$.trim(t.$find('textarea[name="recipients"]').val()).split(/[,;\s\n\r]+/).filter((function(e){return!!e}));if(!n.length){if(e){i=false;s.warn("error.workflow.emptyRecipientList")}}}}isValid(){return this.validateEditorInternal(true)&&super.isValid()}isSetFilledAllowed(){return this.validateEditorInternal(false)}updateEditorType(e,i){const n=$("#startStopType");n.empty();if(e){n.append(o.text("start-types",{showStartEventTab:i}));$("#eventReaction").html(t("workflow.start.reaction_based"));$("#eventDate").html(t("workflow.start.date_based"))}else{n.append(o.text("stop-types"));if(this.checkPresentNodeOfType([l.NODE_TYPE_ACTION_BASED_MAILING,l.NODE_TYPE_DATE_BASED_MAILING])){$("#endTypeAutomaticLabel").html(t("workflow.stop.open_end"))}else{$("#endTypeAutomaticLabel").html(t("workflow.stop.automatic_end"))}}}onStartTypeChanged(){const e=this.$find("#startIconTime");const t=this.isStartEditor?this.$find('select[name="startType"]').val():this.$find('select[name="endType"]').val();if(this.isStartEditor&&t==l.constants.startTypeDate||!this.isStartEditor&&t==l.constants.endTypeDate){this.toggleFormat();this.hide("#startEventPanel");this.show("#startDatePanel");this.show("#startIconTime");this.$find("#startDatePanel .date-time-container").append(e);this.show("#startRemindAdmin")}else if(this.isStartEditor&&t==l.constants.startTypeEvent){this.hide("#startDatePanel");this.$find("#executionDatePanel .date-time-container").append(e);this.show("#startEventPanel");this.show("#startIconTime");this.show("#startRemindAdmin");this.onStartEventChanged()}else if(this.isStartEditor&&t==l.constants.startTypeOpen||!this.isStartEditor&&t==l.constants.endTypeAutomatic){this.hide("#startDatePanel");this.$find("#executionDatePanel .date-time-container").append(e);this.hide("#startEventPanel");this.hide("#startIconTime");this.hide("#startRemindAdmin")}}onStartEventChanged(){var e=$("#startEvent").val();if(e==l.constants.startEventReaction){this.toggleFormat();this.hide("#dateStartPanel");this.show("#reactionStartPanel");this.onExecutionChanged();this.onProfileFieldChanged()}else if(e==l.constants.startEventDate){this.toggleFormat();this.hide("#reactionStartPanel");this.show("#dateStartPanel");this.hide("#executionDateLabel");this.show("#firstExecutionDateLabel");$("#startIconDateFormat").insertAfter("#startIconDateFieldOperator");this.show("#startIconDateFormat")}}toggleFormat(){this.$find("input#startTime").inputmask(this.isDateBasedStart?"h:00":"h:s")}get isDateBasedStart(){return this.$find("#start-type").val()===l.constants.startTypeEvent&&this.$find("select#startEvent").val()===l.constants.startEventDate}onRuleModeChanged(){this.toggle("#profileFieldRules",$('select[name="useRules"]').val()!=="false")}onProfileFieldChanged(){this.updateDateFormatVisibility();this.rulesTable?.onProfileFieldChanged()}updateDateFormatVisibility(){const e=this.$find('select[name="profileField"]').val();const t=this.config.profileFields[e];if(t&&t.toLowerCase()==l.FIELD_TYPE_DATE){$("#startIconDateFormat").insertAfter("#reactionProfileField");this.show("#startIconDateFormat")}else{this.hide("#startIconDateFormat")}}onExecutionChanged(){const e=this.$find('[name="executeOnce"]').val();this.toggle("#executionDateLabel",e!=="false");this.toggle("#firstExecutionDateLabel",e==="false")}onReactionChanged(){const e=this.$find("#startReaction").val();if(e==l.constants.reactionOpened||e==l.constants.reactionNotOpened||e==l.constants.reactionClicked||e==l.constants.reactionNotClicked||e==l.constants.reactionBought||e==l.constants.reactionNotBought||e==l.constants.reactionClickedLink){this.hide("#reactionStartProfile");this.show("#reactionStartMailing")}else if(e==l.constants.reactionChangeOfProfile){this.hide("#reactionStartMailing");this.show("#reactionStartProfile")}else{this.hide("#reactionStartMailing");this.hide("#reactionStartProfile")}this.toggle("#reactionStartMailingLink",e===l.constants.reactionClickedLink)}onReminderChanged(){if(this.$find('input[name="sendReminder"]').is(":checked")){this.$find("#reminderComment").val(this.generateReminderComment());this.show("#reminderDetails")}else{this.hide("#reminderDetails")}return false}onScheduleReminderDateChanged(){this.toggle("#dateTimePicker",this.$find('select[name="remindSpecificDate"]').val()==="true");return false}onMailingSelectChange(e,t){const i=this.$find('select[name="linkId"]');const r=parseInt(e,10);if(r>0){i.attr("readonly","readonly");$.ajax({url:AGN.url(`/mailing/ajax/${r}/links.action`),success:function(e){i.empty();i.append($("<option></option>",{value:"",text:l.EMPTY_OPTION_PLACEHOLDER}));$.each(e,(function(e,t){i.append($("<option></option>",{value:t.id,text:t.url}))}));i.removeAttr("readonly");if(t!=null&&t!=undefined){i.val(t);n.initSelectWithValueOrChooseFirst(i,t)}else{n.initSelectWithFirstValue(i)}}})}else{i.empty()}this.#ci(r)}updateVisibility(){this.onStartTypeChanged();this.onStartEventChanged();this.onReactionChanged();this.onRuleModeChanged();this.onExecutionChanged();this.onReminderChanged();this.onScheduleReminderDateChanged()}formatTime(e,t){var i=0;var n=0;e=parseInt(e,10);if(e>=0){i=e}t=parseInt(t,10);if(t>=0){n=t}return(i<10?"0"+i:i)+":"+(n<10?"0"+n:n)}checkPresentNodeOfType(e){return n.getNodesByTypes(e).length>0}}AGN.Lib.WM.StartStopNodeEditor=c})();(function(){const e=AGN.Lib.WM.EditorsHelper;const i=AGN.Lib.Select;class n extends AGN.Lib.WM.NodeEditor{constructor(e){super();this.campaignEditor=e}get saveOnOpen(){return true}get formName(){return"parameterForm"}get title(){return t("workflow.parameter")}fillEditor(t){i.get(this.$find("select[name=value]")).setOptions(this.campaignEditor.getParametersOptions(t));const n=t.getData();this.$form.submit(false);this.$form.get(0).reset();e.fillFormFromObject(this.formName,n,"")}saveEditor(){return e.formToObject(this.formName)}alwaysReadonly(e){return this.campaignEditor.isSplitParameterNode(e)}}AGN.Lib.WM.ParameterNodeEditor=n})();(function(){const e=AGN.Lib.WM.EditorsHelper;const i=AGN.Lib.WM.Definitions;class n extends AGN.Lib.WM.RecipientTransferEditor{constructor(e,t){super(e);this.submitWorkflowForm=t}get formName(){return"importForm"}get title(){return t("auto_import")}get $editor(){return $("#import-editor")}get missingPermissionMsgCode(){return"error.workflow.autoImportPermission"}get dependencyType(){return i.DEPENDENCY_TYPE_AUTO_IMPORT}get inUseMsgCode(){return"error.workflow.autoImportInUse"}get notSelectedMsgCode(){return"error.workflow.noImport"}createNewAutoImport(){e.processForward(i.constants.forwards.AUTO_IMPORT_CREATE.name,"#importexportId",this.submitWorkflowForm)}editAutoImport(){$("#forwardTargetItemId").val(this.selectedId);e.processForward(i.constants.forwards.AUTO_IMPORT_EDIT.name,'form[name="'+this.formName+'"] select[name=importexportId]',this.submitWorkflowForm)}addLinks(){if(this.selectedId>0){$("#import-editor #editAutoImportLink").show();$("#import-editor #createAutoImportLink").hide()}else{$("#import-editor #createAutoImportLink").show();$("#import-editor #editAutoImportLink").hide()}}}AGN.Lib.WM.ImportNodeEditor=n})();(function(){const e=AGN.Lib.WM.EditorsHelper;const i=AGN.Lib.WM.Definitions;class n extends AGN.Lib.WM.RecipientTransferEditor{constructor(e,t){super(e);this.submitWorkflowForm=t}get formName(){return"exportForm"}get title(){return t("auto_export")}get $editor(){return $("#export-editor")}get missingPermissionMsgCode(){return"error.workflow.autoExportPermission"}get dependencyType(){return i.DEPENDENCY_TYPE_AUTO_EXPORT}get inUseMsgCode(){return"error.workflow.autoExportInUse"}get notSelectedMsgCode(){return"error.workflow.noExport"}createNewAutoExport(){e.processForward(i.constants.forwards.AUTO_EXPORT_CREATE.name,'form[name="'+this.formName+'"] select[name=importexportId]',this.submitWorkflowForm)}editAutoExport(){$("#forwardTargetItemId").val(this.selectedId);e.processForward(i.constants.forwards.AUTO_EXPORT_EDIT.name,'form[name="'+this.formName+'"] select[name=importexportId]',this.submitWorkflowForm)}addLinks(){if(this.selectedId>0){$("#export-editor #editAutoExportLink").show();$("#export-editor #createAutoExportLink").hide()}else{$("#export-editor #createAutoExportLink").show();$("#export-editor #editAutoExportLink").hide()}}}AGN.Lib.WM.ExportNodeEditor=n})();(()=>{const e=AGN.Lib.WM.Definitions;const i=AGN.Lib.WM.EditorsHelper;const n=AGN.Lib.WM.NodeTitleHelper;class r extends AGN.Lib.WM.NodeEditor{constructor(e){super();this.safeToSave=true;this._submitWorkflowForm=e}get formName(){return"archiveNodeForm"}get title(){return t("workflow.mailing.archive")}get archiveSelectSelector(){return`#${this.formName} #settings_general_campaign`}get archiveSelect(){return AGN.Lib.Select.get(this.$archiveSelect)}get $archiveSelect(){return $(this.archiveSelectSelector)}createNewArchive(){const t=this.#di();AGN.Lib.Confirm.request($.get(AGN.url(e.constants.forwards.ARCHIVE_CREATE.url),{workflowId:e.workflowId,workflowForwardParams:t})).done((({archiveId:n,archiveName:r})=>{this.#ui(n,r);this.archiveSelect.selectOption(n);i.saveCurrentEditorWithUndo();if(e.workflowId===0){_.defer((()=>{this._submitWorkflowForm(false,{forwardParams:t,forwardTargetItemId:n})}))}else{AGN.Lib.Messages.defaultSaved()}}))}#di(){const e={nodeId:i.curEditingNode.getId()};return Object.entries(e).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join(";")}#ui(e,t){this.archiveSelect.addOption(e,t);n.addArchiveName(e,t)}fillEditor(e){const t=e.getData();this.$form.submit(false);this.$form.get(0).reset();i.fillFormFromObject(this.formName,t,"");this.isValid()}saveEditor(){return i.formToObject(this.formName)}}AGN.Lib.WM.ArchiveNodeEditor=r})();(function(){const e=AGN.Lib.WM.EditorsHelper;const i=AGN.Lib.WM.Snippets;class n extends AGN.Lib.WM.NodeEditor{constructor(e){super();this.editor=e;this.safeToSave=true}get formName(){return"splitNodeForm"}get title(){return t("split.mailing")}fillEditor(t){const i=t.getData();this.$form.submit(false);this.$form.get(0).reset();e.fillFormFromObject(this.formName,i,"");this.isValid()}saveEditor(){const t=e.formToObject(this.formName);const i=e.curEditingNode;const r=n.getSplitPortions(i.data.splitType);const o=n.getSplitPortions(t.splitType);if(r.length===o.length){this.#hi(i,o)}else{this.#pi(i,t.splitType)}return t}#pi(t,n){const r={x:t.x,y:t.y};const o=e.getNodesByIncomingConnections(t);this.editor.deleteNode(t);i.createSplitSample(n,this.editor.gridBackgroundShown,((e,t)=>{const i=e.filter((e=>e.isSplitNode))[0];const n=o.map((e=>({source:e,target:i})));this.editor.newSnippet(e,[...t,...n],r)}))}#hi(e,t){this.editor.getSplitParameterNodes(e).forEach(((e,i)=>this.editor._setParameterNodesValue([e],t[i])))}static getSplitPortions(e){return e.match(/.{1,2}/g).map((e=>parseInt(e,10)))}}AGN.Lib.WM.SplitNodeEditor=n})();(()=>{const e=AGN.Lib.WM.Definitions;const i=AGN.Lib.WM.EditorsHelper;class n extends AGN.Lib.WM.NodeEditor{constructor(e){super();this.safeToSave=true;this.mailingEditorBase=e}get formName(){return"mailingForm"}get title(){return t("workflow.defaults.mailing")}get $editor(){return $("#mailing-editor")}fillEditor(e){this.$form.submit(false);this.$form.get(0).reset();i.fillFormFromObject(this.formName,e.getData(),"");this.mailingEditorBase.fillEditorBase(e)}createNewMailing(){this.mailingEditorBase.createNewMailing(((e,t)=>{this.mailingEditorBase.node.setFilled(true);const i=this.mailingEditorBase.mailingSelect();i.addOption(e,t);i.selectOption(e);this.mailingEditorBase.setSelectMailingOptions(e)}))}editMailing(){this.mailingEditorBase.editMailing(e.constants.forwards.MAILING_EDIT.name)}saveEditor(){this.mailingEditorBase.setNodeFields();return i.formToObject(this.formName)}saveWithCheckStatus(){const e=this.mailingEditorBase.showSecurityQuestion();if(e){i.saveCurrentEditorWithUndo(this.mailingEditorBase)}}copyMailing(){this.mailingEditorBase.copyMailing(e.constants.forwards.MAILING_COPY.name)}save(){this.mailingEditorBase.validateEditor((()=>this.saveWithCheckStatus()))}}AGN.Lib.WM.MailingNodeEditor=n})();(function(){class e extends AGN.Lib.WM.MailingNodeEditor{constructor(e){super(e);this.safeToSave=false}get formName(){return"datebasedMailingForm"}get title(){return t("workflow.mailing.date_based")}get $editor(){return $("#datebased_mailing-editor")}}AGN.Lib.WM.DateBasedMailingNodeEditor=e})();(function(){class e extends AGN.Lib.WM.MailingNodeEditor{constructor(e){super(e);this.safeToSave=false}get formName(){return"actionbasedMailingForm"}get title(){return t("workflow.mailing.action_based")}get $editor(){return $("#actionbased_mailing-editor")}}AGN.Lib.WM.ActionBasedMailingNodeEditor=e})();(()=>{const e=AGN.Lib.WM.EditorsHelper;const i=AGN.Lib.Messages;const n=AGN.Lib.WM.Definitions;class r extends AGN.Lib.WM.NodeEditor{constructor(e,t,i){super();this.safeToSave=false;this.disableFollowup=i;this.baseMailingEditorBase=e;this.followupMailingEditorBase=t}get formName(){return"followupMailingForm"}get title(){return t("workflow.mailing.followup")}fillEditor(t){this.followupMailingEditorBase.fillEditorBase(t);this.baseMailingEditorBase.fillEditorBase(t);this.$form.submit(false);this.$form.get(0).reset();e.fillFormFromObject(this.formName,t.getData(),"");if(this.disableFollowup){i.warn("error.workflow.followupPermission");this.baseMailingEditorBase.disableInputs()}}createNewMailing(){this.#fi();this.followupMailingEditorBase.createNewMailing(((e,t)=>{this.baseMailingEditorBase.node.setFilled(true);const i=this.followupMailingEditorBase.mailingSelect();i.addOption(e,t);i.selectOption(e);this.followupMailingEditorBase.setSelectMailingOptions(e)}))}editMailing(){this.#fi();this.followupMailingEditorBase.editMailing(n.constants.forwards.MAILING_EDIT.name)}copyMailing(){this.#fi();this.followupMailingEditorBase.copyMailing(n.constants.forwards.MAILING_COPY.name)}#fi(){const e=this.baseMailingEditorBase.node.getData();e.baseMailingId=this.baseMailingEditorBase.mailingId;e.decisionCriterion=this.followupMailingEditorBase.getSelectedDecisionOption().val()}saveEditor(){this.setNodeFields();return e.formToObject(this.formName)}saveWithCheckStatus(){var t=this.followupMailingEditorBase.showSecurityQuestion();if(t){e.saveCurrentEditorWithUndo(this.followupMailingEditorBase)}}save(){if(this.disableFollowup){return}var e=$(this.baseMailingEditorBase.formNameJId+" "+this.baseMailingEditorBase.selectNameJId);var t=$(this.followupMailingEditorBase.formNameJId+" "+this.followupMailingEditorBase.selectNameJId);if(e.val()>0&&t.val()>0){this.saveWithCheckStatus()}else{i.warn("error.workflow.noMailing")}}setNodeFields(){this.baseMailingEditorBase.node.setFilled(parseInt(this.baseMailingEditorBase.mailingId,10)>0&&parseInt(this.followupMailingEditorBase.mailingId,10)>0)}}AGN.Lib.WM.FollowupMailingNodeEditor=r})();(function(){const e=AGN.Lib.WM.MailingSelector;const i=AGN.Lib.WM.FieldRulesTable;const n=AGN.Lib.WM.EditorsHelper;const r=AGN.Lib.Messages;const o=AGN.Lib.WM.Definitions;class s extends AGN.Lib.WM.NodeEditor{constructor(t,i){super();this.editor=t;this.config=i;this.mailingSelector=new e(i.form,i.selectName,i.noMailingOption)}get saveOnOpen(){return true}get formName(){return"decisionForm"}get title(){return t("workflow.decision")}get $rulesContainer(){return this.$find("#decisionProfileFieldRules")}get $decisionType(){return this.$find('select[name="decisionType"]')}get $decisionCriteria(){return this.$find('select[name="decisionCriteria"]')}fillEditor(e){this.profileFieldMailingId=0;const t=e.getData();this.$form.submit(false);this.possibleToUseAutoOptimization=this.editor.isAutoOptimizationDecisionAllowed(e);if(t.profileField){t.profileField=t.profileField.toLowerCase()}n.fillFormFromObject(this.formName,t,"");this.mailingSelector.setMailingId(t.mailingId);this.mailingSelector.cleanOptions(1);if(!t.decisionDate){t.decisionDate=new Date}const r=$("#decision-date-time-inputs");if(this.checkPresentNodeOfType([o.NODE_TYPE_ACTION_BASED_MAILING,o.NODE_TYPE_DATE_BASED_MAILING])){r.hide()}else{r.show();this.$find("#decisionDate").datepicker("setDate",this.dateAsUTC(t.decisionDate));this.$find("#decisionTime").val(("0"+t.decisionDate.getHours()).slice(-2)+":"+("0"+t.decisionDate.getMinutes()).slice(-2))}this.updateVisibility();this.updateDateFormatVisibility();if(t.decisionType==o.constants.decisionTypeDecision&&t.decisionCriteria==o.constants.decisionReaction&&t.reaction==o.constants.reactionClickedLink&&(t.mailingId!=0&&t.mailingId!=null)){this.onMailingSelectChange(t.mailingId,t.linkId)}else{n.resetSelect(this.$find('select[name="linkId"]'))}this.rulesTable=new i(this.$rulesContainer,t.rules,n.isReadOnlyMode(),this.config.profileFields);this.form.cleanFieldFeedback()}saveEditor(){const e=n.formToObject(this.formName);if(e.decisionCriteria==o.constants.decisionProfileField&&this.profileFieldMailingId!=0){e.mailingId=this.profileFieldMailingId}this.profileFieldMailingId=0;if(e.rules==undefined){e.rules=[]}if(!e.threshold){e.threshold=""}if(this.checkPresentNodeOfType([o.NODE_TYPE_ACTION_BASED_MAILING,o.NODE_TYPE_DATE_BASED_MAILING])){e.decisionDate=null}else{e.decisionDate=this.$find("#decisionDate").datepicker("getDate");const t=this.$find("#decisionTime").val();e.decisionDate.setHours(t.substring(0,2));e.decisionDate.setMinutes(t.substring(3,5))}e.rules=this.rulesTable.collect();return e}save(){var e=this.$decisionType.val();var i=$("#decisionCriteria").val();var s=this.$find('select[name="mailingId"]').val();var a=this.$find('select[name="linkId"]').val();var l=this.$find('select[name="reaction"]').val();var c=this.$find('input[name="threshold"]').val();if(e==o.constants.decisionTypeDecision&&i==o.constants.decisionReaction&&s==0){r.alert("error.workflow.noMailing")}else if(e==o.constants.decisionTypeDecision&&i==o.constants.decisionReaction&&l==o.constants.reactionClickedLink&&(a==0||a==null)){r.alert("error.workflow.noLinkSelected")}else if(e==o.constants.decisionTypeDecision&&i==o.constants.decisionProfileField){if(this.config.isMailtrackingActive=="true"){const e=this.$find("#decisionProfileField");if(!$.trim(e.val())){this.form.showFieldError("profileField",t("fields.required.errors.missing"))}else{this.form.cleanFieldError("profileField");n.saveCurrentEditorWithUndo()}}}else if(e==o.constants.decisionTypeAutoOptimization){if(c){var d=parseInt(c,10);if(d&&d>0){n.saveCurrentEditorWithUndo()}else{r.alert("error.workflow.noValidThreshold")}}else{n.saveCurrentEditorWithUndo()}}else{n.saveCurrentEditorWithUndo()}}onTypeChanged(){const e=this.$decisionType;const t=e.val();if(!this.possibleToUseAutoOptimization&&t===o.constants.decisionTypeAutoOptimization){r.alert("error.workflow.autoOptimizationDecisionForbidden");e.val(o.constants.decisionTypeDecision);return}if(t==o.constants.decisionTypeDecision){this.hide("#autoOptimizationPanel");this.show("#decisionPanel")}else if(t==o.constants.decisionTypeAutoOptimization){this.hide("#decisionPanel");this.show("#autoOptimizationPanel")}this.updateVisibilityOfRuleMailingReceived()}onDecisionReactionChanged(){var e=this.$find('select[name="reaction"]').val();if(e==o.constants.reactionClickedLink){this.show("#reactionLinkPanel");var t=this.$find('select[name="mailingId"]').val();this.onMailingSelectChange(t,0)}else{this.hide("#reactionLinkPanel")}}onCriteriaChanged(){const e=this.$decisionCriteria.val();if(e==o.constants.decisionReaction){this.hide("#decisionProfileFieldPanel");this.show("#decisionReactionPanel")}else if(e==o.constants.decisionProfileField){this.hide("#decisionReactionPanel");this.show("#decisionProfileFieldPanel")}this.updateVisibilityOfRuleMailingReceived()}onMailingSelectChange(e,t){var i=this.$find('select[name="linkId"]');var r=parseInt(e,10);if(r>0){i.attr("readonly","readonly");$.ajax({url:AGN.url(`/mailing/ajax/${r}/links.action`),success:function(e){i.empty();i.append($("<option></option>",{value:"",text:o.EMPTY_OPTION_PLACEHOLDER}));$.each(e,(function(e,t){i.append($("<option></option>",{value:t.id,text:t.url}))}));i.removeAttr("readonly");if(t!=null&&t!=undefined){i.val(t);n.initSelectWithValueOrChooseFirst(i,t)}else{n.initSelectWithFirstValue(i)}}})}else{i.empty()}}onProfileFieldChanged(){this.updateDateFormatVisibility();this.rulesTable?.onProfileFieldChanged()}updateDateFormatVisibility(){const e=this.$find('select[name="profileField"]').val();const t=this.config.profileFields[e];this.toggle("#decisionDateFormat",t&&t.toLowerCase()==o.FIELD_TYPE_DATE)}updateVisibility(){this.onTypeChanged();this.onDecisionReactionChanged();this.onCriteriaChanged()}updateVisibilityOfRuleMailingReceived(){const e=this;const t=this.$decisionType.val();if(t==o.constants.decisionTypeAutoOptimization){this.hide("#ruleMailingReceivedWrapper")}else if(t==o.constants.decisionTypeDecision){var i=this.$decisionCriteria.val();if(i==o.constants.decisionReaction){this.hide("#ruleMailingReceivedWrapper")}else if(i==o.constants.decisionProfileField){this.hide("#ruleMailingReceivedWrapper");n.forEachPreviousNode((function(t){if(o.NODE_TYPES_MAILING.includes(t.getType())){var i=t.getData();this.profileFieldMailingId=i.mailingId;e.show("#ruleMailingReceivedWrapper");return false}}))}}}checkPresentNodeOfType(e){return n.getNodesByTypes(e).length>0}}AGN.Lib.WM.DecisionNodeEditor=s})();(function(){class e extends AGN.Lib.WM.MailingNodeEditor{constructor(e){super(e);this.safeToSave=false}get formName(){return"smsMailingForm"}get title(){return t("workflow.mailing.mediatype_sms")}get $editor(){return $("#mailing_mediatype_sms-editor")}}AGN.Lib.WM.SmsMailingNodeEditor=e})();(function(){class e extends AGN.Lib.WM.MailingNodeEditor{constructor(e){super(e);this.safeToSave=false}get formName(){return"postMailingForm"}get title(){return t("workflow.mailing.mediatype_post")}get $editor(){return $("#mailing_mediatype_post-editor")}}AGN.Lib.WM.PostMailingNodeEditor=e})();(function(){const e=AGN.Lib.WM.Definitions;const i=AGN.Lib.WM.EditorsHelper;const n=AGN.Lib.Messages;class r extends AGN.Lib.WM.NodeEditor{constructor(){super();this.panelIds=["fixedDeadlinePanel","delayDeadlinePanel"];this.timeUnitIds=["deadlineTimeUnitMinute","deadlineTimeUnitHour","deadlineTimeUnitDay","deadlineTimeUnitWeek","deadlineTimeUnitMonth"]}get saveOnOpen(){return true}get formName(){return"deadlineForm"}getDefaultDelayData(t){if(t===e.constants.deadlineTypeDelay&&this.isPrecededByImportIcon){return{timeUnit:e.constants.deadlineTimeUnitHour,delayValue:e.constants.defaultImportDelayLimit}}return{}}get title(){return t("workflow.deadline.title")}get deadlineType(){return this.$find('[name="deadlineType"]').val()}get timeUnit(){return this.$find('select[name="timeUnit"]').val()}fillEditor(e){const t=e.getData();this.isPrecededByImportIcon=this.checkPrecededByImportIcon(e);this.$form.submit(false);this.$find("#deadlineDate").datepicker("setDate",this.dateAsUTC(t.date||new Date));this.fillDelayData(t);this.$find("#time").val(("0"+t.hour).slice(-2)+":"+("0"+t.minute).slice(-2))}fillDelayData(e){this.$form.get(0).reset();const t=this.deadlineType;const n=this.getDefaultDelayData(t);i.fillFormFromObject(this.formName,e,"",n);this.updateVisibility();const r=e.delayValue||n.delayValue;i.initSelectWithValueOrChooseFirst(this.$find('[name="delayValue"]'),r)}saveEditor(){const e=i.formToObject(this.formName);const t=this.$find("#time").val();e.date=this.$find("#deadlineDate").datepicker("getDate");e.hour=t.substring(0,2);e.minute=t.substring(3,5);return e}updateVisibility(){const t=this.$find("#deadline-type-box");let i=this.deadlineType;if(this.checkPresentNodeOfType([e.NODE_TYPE_ACTION_BASED_MAILING,e.NODE_TYPE_DATE_BASED_MAILING])){t.hide();this.$find("#typeDelay").prop("selected",true);i=e.constants.deadlineTypeDelay}else{t.show()}if(i===e.constants.deadlineTypeDelay){this.switchPanelsVisibility("delayDeadlinePanel");this.switchTimeContainerVisibility(false);switch(this.timeUnit){case e.constants.deadlineTimeUnitMinute:this.switchTimeUnitsVisibility("deadlineTimeUnitMinute");break;case e.constants.deadlineTimeUnitHour:this.switchTimeUnitsVisibility("deadlineTimeUnitHour");break;case e.constants.deadlineTimeUnitDay:this.switchTimeUnitsVisibility("deadlineTimeUnitDay");this.switchTimeContainerVisibility(true);$("#deadlineTimeHelp").removeAttr("style");break;case e.constants.deadlineTimeUnitWeek:this.switchTimeUnitsVisibility("deadlineTimeUnitWeek");break;case e.constants.deadlineTimeUnitMonth:this.switchTimeUnitsVisibility("deadlineTimeUnitMonth");break}this.$find('input[name="useTime"]').show()}else if(i===e.constants.deadlineTypeFixedDeadline){this.switchPanelsVisibility("fixedDeadlinePanel");this.switchTimeContainerVisibility(true);this.hide("#deadlineTimeHelp");this.$find('input[name="useTime"]').hide()}}switchPanelsVisibility(e){const t=this;this.panelIds.forEach((function(i){if(i!==e){t.hide(`#${i}`)}}));this.show(`#${e}`)}switchTimeUnitsVisibility(e){const t=this;this.timeUnitIds.forEach((function(i){if(i!==e){t.hide(`#${i}`);$("#"+i+" select").removeAttr("name")}}));this.show(`#${e}`);$(`#${e} select`).attr("name","delayValue")}switchTimeContainerVisibility(e){this.toggle("#deadlineTimeContainer",e)}save(){let t=true;if(this.isPrecededByImportIcon){if(this.deadlineType===e.constants.deadlineTypeDelay){if(this.timeUnit===e.constants.deadlineTimeUnitMinute){t=false}else if(this.timeUnit===e.constants.deadlineTimeUnitHour){if($("#deadlineTimeUnitHour select").val()<e.constants.defaultImportDelayLimit){t=false}}}}if(t){super.save()}else{n.warn("error.workflow.deadlineIsTooShortForImport")}}onTimeChanged(){if(this.deadlineType==e.constants.deadlineTypeDelay&&this.timeUnit==e.constants.deadlineTimeUnitDay){this.$find('input[name="useTime"]').prop("checked",true)}}checkPresentNodeOfType(e){return i.getNodesByTypes(e).length>0}checkPrecededByImportIcon(t){return i.getNodesByIncomingConnections(t).some((t=>e.NODE_TYPE_IMPORT==t.getType()))}}AGN.Lib.WM.DeadlineNodeEditor=r})();(function(){const e=AGN.Lib.WM.Definitions;const i=AGN.Lib.WM.EditorsHelper;const n=AGN.Lib.Select;const r=AGN.Lib.Messages;class o extends AGN.Lib.WM.NodeEditor{constructor(e){super();this.submitWorkflowForm=e;this.targetSelector="#recipientTargetSelect";this.altgSelector="#recipientAltgSelect";this.safeToSave=true}get formName(){return"recipientForm"}get $targetSelect(){return $(this.targetSelector)}get targetSelect(){return n.get(this.$targetSelect)}get altgSelect(){return new n($(this.altgSelector))}createNewTarget(){i.processForward(e.constants.forwards.TARGET_GROUP_CREATE.name,this.targetSelector,this.submitWorkflowForm)}editTarget(t){$("#forwardTargetItemId").val(t);i.processForward(e.constants.forwards.TARGET_GROUP_EDIT.name,this.targetSelector,this.submitWorkflowForm)}get title(){return t("workflow.recipient")}fillEditor(t){var n=t.getData();if(!e.constants.isAltgExtended){if(e.constants.accessLimitTargetId>0){n.targets=_.union([e.constants.accessLimitTargetId],n.targets);n.targetsOption="ALL_TARGETS_REQUIRED"}}this.$form.submit(false);this.$form.get(0).reset();i.fillFormFromObject(this.formName,n,"");this.targetSelect.selectValue(n.targets);if(e.constants.isAltgExtended){this.altgSelect.selectValue(n.altgs)}this.isValid()}saveEditor(){var t=i.formToObject(this.formName);t.targets=this.targetSelect.getSelectedValue();if(e.constants.isAltgExtended){t.altgs=this.altgSelect.getSelectedValue()}return t}}AGN.Lib.WM.RecipientNodeEditor=o})();AGN.Lib.Controller.new("action-view",(function(){const e=AGN.Lib.Form;const i=AGN.Lib.Template;const n=AGN.Lib.Select;let r;let o={};class s{constructor(e){this.$container=e;this.activeModules=[];e.on("remove-module",(()=>{const t=e.find("[data-action-module] [data-module-index]");$.each(t,((e,t)=>$(t).html(e+1+".")))}));e.on("add-new-module",(()=>{const t=e.find("[data-action-module]");t.last().find("[data-module-index]").html(t.length+".")}))}clean(){this.$container.empty()}addModule(e){if(e&&e.type){e.index=this._getNextIndex();const n=i.dom("common-module-data",{moduleName:t(`triggerManager.operation.${e.type}`)});const r=i.text(`module-${e.type}`,e.getParameters());n.find(".tile").append(r);this.$container.append(n);AGN.runAll(n);this.$container.trigger("add-new-module");this.activeModules.push(e)}}deleteModule(e){if(e>=0){const t=this.$container.find(`[data-module-content="${e}"]`);t.closest("[data-action-module]").remove();this.$container.trigger("remove-module");this.activeModules=this.activeModules.filter((t=>t.index!==e))}}toJson(){const e=[];this.$container.find("[data-module-content]").each((function(t,i){e.push(a.toJson($(i),t))}));return e}getSubmissionJson(){return JSON.stringify(this.toJson())}getModulesByType(e){return this.activeModules.filter((t=>t.type===e))}_getNextIndex(){const e=this.$container.find("[data-module-content]");let t=0;if(e.length>0){const i=e.last().data("module-content");t=i+1}return t}}class a{constructor(e,t,i){this.type=e;this.index=i||0;this.id=t.id||0;this.data=$.extend(a.defaults(e),t)}static defaults(e){const t={};switch(e){case"ActivateDoubleOptIn":t.forAllLists=false;t.mediaTypeCode=0;break;case"ContentView":t.tagName="";break;case"ExecuteScript":t.script="";break;case"GetArchiveList":t.campaignID=0;t.limitType=null;t.limitValue=null;break;case"GetArchiveMailing":t.expireDate=null;break;case"GetCustomer":t.loadAlways=false;break;case"IdentifyCustomer":t.keyColumn="";t.passColumn="";break;case"SendMailing":t.mailingID=0;t.delayMinutes=0;t.bcc="";t.userStatusesOption=1;break;case"ServiceMail":t.toAddress="";t.fromAddress="";t.replyAddress="";t.subjectLine="";t.mailtype=0;t.textMail="";t.htmlMail="";break;case"SubscribeCustomer":t.doubleCheck=false;t.keyColumn="";t.doubleOptIn=false;break;case"UnsubscribeCustomer":t.mailinglistIds=[];t.allMailinglistsSelected=false;t.additionalMailinglists=false;break;case"UpdateCustomer":t.useTrack=false;t.columnName="";t.updateValue="";t.updateType=1;t.trackingPointId=-1;break}t.readonly=false;return t}static create(e){return new a(e,{})}static deserialize(e,t){const i=o[e.operationType];return new a(i,e,t)}static toJson(e,t){const i={};i.index=t;e.find('[name^="modules[]"]:not(:disabled)').each((function(e,t){const r=$(t);const o=r.prop("name")||"";const s=o.replace("modules[].","");let a="";if(r.is("select")){a=n.get(r).getSelectedValue()}else if(r.is("input")&&r.prop("type")==="checkbox"){a=r.prop("checked")}else{a=r.val()}i[s]=a}));return $.extend(a.defaults(i.type),i)}getParameters(){const e={type:this.type,index:this.index,id:this.id};return _.merge({},this.data,e)}}this.addDomInitializer("action-view",(function(){const t=e.get(this.el);o=this.config.operationTypes;r=new s($("#module-list"));r.clean();let i=[];if(this.config.modules){i=JSON.parse(this.config.modules).map(((e,t)=>a.deserialize(e,t)))}i.forEach((e=>r.addModule(e)));t.initFields()}));this.addAction({click:"add-new-module"},(function(){const t=$("#moduleName").val();const i=a.create(t);if(i.type==="SendMailing"){if(r.getModulesByType("ActivateDoubleOptIn").length>0){i.data.userStatusesOption=0}}r.addModule(i);e.get(this.el).initFields();if(i.type==="ActivateDoubleOptIn"){const e=r.getModulesByType("SendMailing");e.forEach((function(e){const t=$(`#module-${e.index}-userStatusesOption`);n.get(t).selectFirstValue()}))}}));this.addAction({click:"action-delete-module"},(function(){const e=this.el.closest(".tile").find("[data-module-content]").data("module-content");r.deleteModule(e)}));this.addAction({submission:"save-action-data"},(function(){const t=e.get(this.el);t.setValueOnce("modulesSchema",r.getSubmissionJson());t.submit()}));this.addDomInitializer("update-customer-module",(function(){const e=$(this.el);const t=e.find('[data-action="toggle-if-first"]:checked');l(e,t.exists())}));this.addAction({click:"toggle-if-first"},(function(){const e=$(this.el);l(e,e.prop("checked"))}));function l(e,t){const i=e.closest("[data-action-module]");const n=i.find("[data-useTrack-trackingPointId]");const r=i.find("[data-useTrack-updateValue]");if(!n.exists()){r.removeClass("hidden");return}if(i.index()===0){n.toggleClass("hidden",!t);r.toggleClass("hidden",t)}}}));AGN.Lib.Controller.new("activeness-overview",(function(){const e=AGN.Lib.Table;let t;this.addDomInitializer("activeness-overview",(function(){t=this.config.url}));this.addAction({click:"deactivate-js"},(function(){i([a(this.el)],false,this.el)}));this.addAction({click:"activate-js"},(function(){i([a(this.el)],true,this.el)}));this.addAction({click:"bulk-deactivate-js"},(function(){i(l(true),false,this.el)}));this.addAction({click:"bulk-activate-js"},(function(){i(l(true),true,this.el)}));function i(i,r,o){if(!s(i)){return}c(o);$.ajax(t,{method:"POST",traditional:true,data:{ids:i,activate:r,fromOverview:true}}).done((t=>{if(t.success){const i=e.get(o);const s=t.data.map((e=>{const t=typeof e==="object";const o=t?e.id:e;const s=n(i,o);if(t){return _.merge(s,e)}return _.merge(s,{active:String(r)})}));i.api.applyTransaction({update:s})}AGN.Lib.JsonMessages(t.popups)})).always((()=>c(o)))}function n(e,t){const i=[];e.api.forEachNodeAfterFilterAndSort((e=>{if(t===e.data.id){i.push(e.data)}}));return i[0]}this.addAction({click:"activate"},(function(){r(this.el,true)}));this.addAction({click:"deactivate"},(function(){r(this.el,false)}));this.addAction({click:"bulk-activate"},(function(){o(l(),true)}));this.addAction({click:"bulk-deactivate"},(function(){o(l(),false)}));function r(e,t=true){o([a(e)],t)}function o(e,i){if(!s(e)){return}const n=$(".table-wrapper__body").scrollTop();$.ajax(t,{method:"POST",traditional:true,data:{ids:e,activate:i,fromOverview:true}}).done((e=>{AGN.Lib.Form.get($("#table-tile")).updateHtml(e);d(n)}))}function s(e){if(e.length>0){return true}AGN.Lib.Messages.alert("messages.error.nothing_selected");return false}function a(e){if(e.closest("table").exists()){return e.closest("tr").find("[data-bulk-checkbox]").val()}return e.data("item-id")}function l(t=false){if(t){return e.get($(".table-wrapper")).api.getSelectedRows().map((e=>e.id))}return $(`[data-bulk-checkbox]:checked`).map((function(){return $(this).val()})).get()}function c(e){if(e.is("a")){e.toggleClass("disabled");e.toggleClass("pe-none")}else{e.prop("disabled",!e.prop("disabled"))}}function d(e){$(".table-wrapper__body").scrollTop(e)}}));AGN.Lib.Controller.new("address-management",(function(){const e=AGN.Lib.Table;const i=AGN.Lib.Messages;const n=AGN.Lib.Confirm;const r="data-entry-category";let o;this.addDomInitializer("address-management",(function(){o=this.config.email}));this.addAction({click:"delete-all"},(function(){const e=s();n.from("confirm-delete-all-modal",{affectedCategories:e}).done((()=>{$.post(AGN.url(`/address-management/entries/deleteAll.action?email=${o}`)).done((e=>AGN.Lib.Form.get(this.el).updateHtml(e)))}))}));function s(){return $(".btn-category:not([disabled])").map((function(){return $(this).data("entry-category-tab")})).get()}this.addAction({click:"update-all"},(function(){c((e=>{$.post(AGN.url(`/address-management/entries/replaceAll.action?email=${o}&newEmail=${e}`)).done((e=>AGN.Lib.Form.get(this.el).updateHtml(e)))}))}));this.addAction({click:"delete-entry"},(function(){const t=g(this.el);const i=e.get(this.el).findRowByElement(this.el);n.from("confirm-single-delete-modal",{category:t,data:i.data}).done((()=>{a([h(this.el)],(()=>u(this.el)))}))}));this.addAction({click:"bulk-delete"},(function(){const t=e.get(this.el);const i=t.api.getSelectedRows();const r=g(this.el);const o=p(i,r);n.from("confirm-bulk-delete-modal",{category:r}).done((()=>{a(o,(e=>{const n=i.filter((t=>e.find((e=>e.id===t.id&&e.companyId===t.companyId))));l(n,t)}))}))}));function a(e,t){$.ajax({url:AGN.url(`/address-management/entries/delete.action?email=${o}`),type:"POST",contentType:"application/json",data:JSON.stringify(e),dataType:"json",success:e=>{if(e.success){t(e.data)}AGN.Lib.JsonMessages(e.popups,true)},error:i.defaultError})}this.addAction({click:"replace-email"},(function(){const e=$("#new-email-address");const i=e.val();if(AGN.Lib.Helpers.isValidEmail(i)){n.get(this.el).positive(i)}else{AGN.Lib.Form.showFieldError$(e,t("import.columnMapping.error.invalidEmail"))}}));this.addAction({click:"single-replace"},(function(){c((e=>{d(e,[h(this.el)],(()=>u(this.el)))}))}));this.addAction({click:"bulk-replace"},(function(){c((t=>{const i=e.get(this.el);const n=i.api.getSelectedRows();const r=p(n,g(this.el));d(t,r,(e=>{const t=n.filter((t=>e.find((e=>e.id===t.id&&e.companyId===t.companyId))));l(t,i)}))}))}));function l(e,t){const i=g(t.$el);t.api.applyTransaction({remove:e});f(i,e.length)}function c(e){n.from("replace-email-modal").done(e)}function d(e,t,n){$.ajax({url:AGN.url(`/address-management/entries/replace.action?oldEmail=${o}&email=${e}`),type:"POST",contentType:"application/json",data:JSON.stringify(t),dataType:"json",success:t=>{if(t.success){if(!e.toLowerCase().includes(o.toLowerCase())){n(t.data)}}AGN.Lib.JsonMessages(t.popups,true)},error:i.defaultError})}function u(t){const i=e.get(t);const n=i?.findRowByElement(t);if(n){const e=g(t);i.api?.applyTransaction({remove:[n.data]});f(e)}}function h(e){return{id:e.data("entry-id"),companyId:e.data("entry-cid"),category:g(e)}}function p(e,t){return e.map((e=>({id:e.id,companyId:e.companyId,category:t})))}function f(e,t=1){const i=$(`[data-entry-category-tab=${e}]`);const n=i.find("span");const r=parseInt(n.text())-t;n.text(r);i.prop("disabled",r===0)}function g(e){return e.closest(`[${r}]`).attr(r)}}));AGN.Lib.Controller.new("admin-enabling",(function(){this.addAction({click:"save-approved-mailing-lists"},(function(){var t=this.el;var i=AGN.Lib.Form.getWrapper(t);e(i);var n=AGN.Lib.Form.get(i);n.submit().done((function(e){if(e.success===true){AGN.Lib.JsonMessages(e.popups,true);AGN.Lib.Modal.getWrapper(t).modal("hide")}else{AGN.Lib.JsonMessages(e.popups,true)}}))}));function e(e){$("input[name*='disabledMailinglistsIds']").remove();t("mailinglist").each((function(){$("<input>").attr({type:"hidden",name:"disabledMailinglistsIds",value:$(this).data("mailinglist")}).appendTo(e)}))}function t(e){if(e){return $("input:checkbox:not(:checked)[data-enabling="+e+"]")}else{return $("input:checkbox:not(:checked)[data-enabling]")}}}));AGN.Lib.Controller.new("ai-image-generation",(function(){let e;let i;let n;let r;let o;let s;this.addDomInitializer("ai-image-generation",(function(){e=$("#ai-generated-image");i=$("#remaining-generations-text");n=$("#generate-btn");r=$("#save-btn");o=$("#important-objects-table");s=$("#filters-table");l(this.config.remainingGenerations)}));this.addAction({click:"generate"},(function(){const e=AGN.Lib.Form.get(this.el);d(e);u(e);e.jqxhr().done((e=>{if(e.success){l(e.data.remainingGenerationsCount);a(e.data.url);r.removeClass("hidden")}else{AGN.Lib.JsonMessages(e.popups)}}))}));function a(t){e.attr("src",t);e.parent().removeClass("hidden");e.parent().prev().addClass("hidden")}function l(e){if(e<=0){i.text(t(`mediapool.imageGeneration.limitExceeded`));n.parent().remove()}else{i.text(t(`mediapool.imageGeneration.remainingGenerations`,e))}}this.addAction({click:"save"},(function(){const e=$("#ai-generated-image").attr("src");$.post(AGN.url("/mediapool/generated-image/save.action"),{url:e}).done((e=>AGN.Lib.Page.render(e)))}));this.addAction({change:"use-important-objects"},(function(){c(o,!this.el.is(":checked"))}));this.addAction({change:"use-filters"},(function(){c(s,!this.el.is(":checked"))}));function c(e,t){const i=e.find(":input");i.prop("disabled",t);i.prev().toggleClass("input-group-text--disabled",t);e.find(".btn").toggleClass("disabled",t);i.filter(".js-colorpicker").spectrum(t?"disable":"enable")}function d(e){const t=AGN.Lib.InputTable.get(o);t.collect().forEach((function(t,i){Object.keys(t).forEach((n=>{e.setValueOnce(`importantObjects[${i}].${n}`,t[n])}))}))}function u(e){const t=AGN.Lib.InputTable.get(s);const i=_.groupBy(t.collect(),"name");_.forEach(i,(function(t,i){const n=_.map(t,"value");e.setValueOnce(`filters[${i}]`,n)}))}}));AGN.Lib.Controller.new("ai-text-generation",(function(){const e=AGN.Lib.Form;let i;this.addDomInitializer("ai-text-generation",(function(){const e=AGN.Lib.Select.get(this.el.find("[data-ai-language]"));if(e.hasOption(window.adminLocale)){e.selectValue(window.adminLocale)}}));this.addAction({enterdown:"skip-form-submit"},(function(){this.event.preventDefault()}));this.addAction({click:"generateText"},(function(){const e=c(this.el);if(n(e)){const n=s(e);$.post(AGN.url("/mailing/content/generateText.action"),n).done((n=>{i=n.data;a(n.data,e);this.el.find(".text").text(t("ai.regenerateText"))})).fail((()=>AGN.Lib.Messages.defaultError()))}}));function n(i){let n=true;const r=i.find("[data-ai-numberOfWords]");const o=i.find("[data-ai-contentDescription]");const s=AGN.Lib.Validator.get("number").errors(r,{min:1,required:true});if(s.length>0){n=false;s.forEach((t=>e.showFieldError$(r,t.msg)))}else{e.cleanFieldFeedback$(r)}if(!$.trim(o.val())){n=false;e.showFieldError$(o,t("fields.required.errors.missing"))}else{e.cleanFieldFeedback$(o)}return n}this.addAction({click:"applyGeneratedText"},(function(){const e=c(this.el);const t=l(e).val();if(e.is(".tile")){const i=this.el.closest("[data-tab-id]").data("tab-id");r(i);o(t,e,i)}else{AGN.Lib.Confirm.get(this.el).positive(t)}}));function r(e){const t=$(`[data-toggle-tab*="wysiwyg${e}"]`);if(t.exists()){t.trigger("click");return}const i=$(`[data-toggle-tab*="html${e}"]`);if(i.exists()){i.trigger("click")}}function o(e,t,i){const n=t.find(".js-wysiwyg");if($("#tab-content-wysiwyg").is(":visible")||$(`[id^='tab-grid-wysiwyg${i}']`).is(":visible")){if(window.Jodit){Jodit.instances[n.attr("id")].value=e}else{const t=CKEDITOR.instances[n.attr("id")];if(t.status==="ready"){t.setData(e)}else{t.on("instanceReady",(t=>t.editor.setData(e)))}}}if($("#contentEditor").is(":visible")||$(`[id^='tab-grid-html${i}']`).is(":visible")){ace.edit(`${n.attr("name")}Editor`).setValue(e)}}function s(e){return{language:e.find("[data-ai-language]").val(),numberOfWords:e.find("[data-ai-numberOfWords]").val(),tonality:e.find("[data-ai-tonality]").val(),contentDescription:e.find("[data-ai-contentDescription]").val()}}function a(e,t){l(t).val(e).trigger("change");t.find("#ai-apply-text-btn").removeClass("hidden")}function l(e){return e.find("[data-ai-result]")}function c(e){return e.closest(".tile, .modal")}}));AGN.Lib.Controller.newExtended("auto-export","auto-import-export-base",(function(){let e;this.addDomInitializer("auto-export",(function(){t()}));this.addDomInitializer("mailing-options-attribute-resolver",(function(){e=new n(this.config)}));this.addAction({click:"evaluate"},(function(){$.post(this.el.attr("href")).done((e=>AGN.Lib.Page.render(e)))}));this.addAction({change:"select-export-profile"},(function(){t()}));this.addAction({change:"change-mailing-type"},(function(){const t=AGN.Lib.Select.get(this.el).getSelectedValue();const i=AGN.Lib.Select.get($("select#exportType")).getSelectedValue();e.resolve(i,t)}));this.addAction({change:"export-type-resolver"},(function(){const t=AGN.Lib.Select.get($("select#exportType")).getSelectedValue();const i=AGN.Lib.Select.get($("select#exportMailing")).getSelectedValue();e.resolve(t,i)}));this.addAction({submission:"save-scheduler-data"},(function(){const e=i(this.el);const t=e.getAllDayRows().every((e=>e.validateTimeIntervals()));if(t){const t=AGN.Lib.Form.get($(this.el));t.setValueOnce("intervalAsJson",e.getSubmissionJson("day"));t.submit()}}));function t(){const e=$("select#export-profile").val();const t=parseInt(e)>0;$("#add-profile-btn").toggle(!t);$("#edit-profile-btn").toggle(t).attr("href",AGN.url(`/export/${e}/view.action`))}function i(e){return e.closest("[data-controller]").data("_schedule_table")}class n{constructor(e){this.exportType=e.exportType||"";this.mailingType=e.mailingType||-1;this.$oneTimeCheckbox=$('input[name="autoExport.oneTime"]');this.initialOneTimeValues={checked:this.$oneTimeCheckbox.is(":checked"),disabled:this.$oneTimeCheckbox.is(":disabled")};this.toggleOneTimeSwitch()}resolve(e,t){this.exportType=e||"";this.mailingType=t||-1;this.toggleOneTimeSwitch()}toggleOneTimeSwitch(){const e=this.exportType=="Mailing"&&this.mailingType==0;this.$oneTimeCheckbox.prop("checked",e||this.initialOneTimeValues.checked);this.$oneTimeCheckbox.prop("disabled",e||this.initialOneTimeValues.disabled)}}}));AGN.Lib.Controller.new("auto-import-export-base",(function(){const e=AGN.Lib.ScheduleTimeTable;const t=AGN.Lib.ScheduleTimeTable.DayRow;let i;this.addDomInitializer("auto-import-export-scheduler",(function(){const r=this.el;const o=this.config;const s=o.intervalAsJson||[];i=new e(r);n(r,i);let a=[];if(!_.isEmpty(s)){a=JSON.parse(s).map((e=>t.deserialize(e))).filter((e=>e))}a.forEach((e=>i.addRow(e)));if(a.length===0){i.addEmptyDayRow()}const l=AGN.Lib.Form.get(r);l.initFields();if(!l.editable){r.find(":input").prop("disabled",true);r.find("a").addClass("disabled")}}));this.addAction({click:"add-day"},(function(){i.addEmptyDayRow()}));this.addAction({click:"remove-day"},(function(){i.deleteRow(t.get(this.el))}));this.addAction({click:"add-schedule"},(function(){t.get(this.el).addSchedule()}));this.addAction({click:"remove-schedule"},(function(){t.get(this.el).removeSchedule(this.el)}));this.addAction({click:"time-checkbox-toggle"},(function(){t.get(this.el).timeCheckboxToggle(this.el)}));this.addAction({click:"hour-checkbox-toggle"},(function(){t.get(this.el).hourCheckboxToggle(this.el)}));this.addAction({change:"validate-changes"},(function(){t.get(this.el).validateTimeIntervals()}));function n(e,t){e.closest("[data-controller]").data("_schedule_table",t)}this.addAction({click:"check-connection"},(function(){const e=AGN.Lib.Form.get(this.el);$.ajax(this.el.attr("href"),{type:"POST",dataType:"html",enctype:"multipart/form-data",processData:false,contentType:false,data:e.data()}).done((e=>AGN.Lib.Page.render(e)))}))}));AGN.Lib.Controller.newExtended("auto-import","auto-import-export-base",(function(){let e;let t={};let i=false;this.addDomInitializer("auto-import",(function(){e=this.config.isWorkflowDriven;if(a()){o(this.config.contentSourceIdentifier)}n()}));this.addAction({click:"save-auto-import"},(function(){const t=$("#auto-import-form");const i=l(t);const n=i.getAllDayRows().every((e=>e.validateTimeIntervals()));if(n){const n=AGN.Lib.Form.get(t);const r=i.getSubmissionJson("day");const o=s();if(e){n.setValue("intervalAsJson",r);if(o.length){n.setValue("contentSourceID",o[0]);n.setValue("contentSourceType",o[1])}}else{n.setValueOnce("intervalAsJson",r);if(o.length){n.setValueOnce("contentSourceID",o[0]);n.setValueOnce("contentSourceType",o[1])}}n.submit()}}));this.addAction({click:"import"},(function(){$.post(this.el.attr("href")).done((e=>AGN.Lib.Page.render(e)))}));this.addDomInitializer("import-profile-mailing-lists",(function(){i=this.config.isAutoImportNew;t=this.config.profileMailinglists;const e=$('[name="importProfileId"]').val();r(e,i)}));this.addAction({change:"change-import-profile"},(function(){const e=AGN.Lib.Select.get($(this.el)).getSelectedValue();r(e,i);n()}));function n(){const e=$("select#auto-import-profile").val();const t=parseInt(e)>0;$("#add-profile-btn").toggle(!t);$("#edit-profile-btn").toggle(t).attr("href",AGN.url(`/import-profile/${e}/view.action`))}const r=function(e,i){if(i){const i=t[e];$('input[type=checkbox][name^="mailinglists"]').prop("checked",false);_.each(i,(e=>{$(`input[type=checkbox][name="mailinglists[${e}]"]`).prop("checked",true)}))}};function o(e){const t=AGN.Lib.Select.get($("#contentSourceId"));if(t.hasOption(e)){t.selectValue(e)}}function s(){return $("#contentSourceId").val()?.split("/")||[]}function a(){return $("#contentSourceId").exists()}function l(e){return e.closest("[data-controller]").data("_schedule_table")}}));AGN.Lib.Controller.new("available-building-blocks",(function(){let e;let t;let i;function n(){e={};t={}}this.addDomInitializer("available-building-blocks",(function(){n();i=AGN.Lib.Form.get(this.el);if(this.config.changedBlockStatus){e=JSON.parse(this.config.changedBlockStatus)}}));this.addDomInitializer("available-building-blocks-table",(function(){const i=this.config.divContainerList;_.each(i,(function(i){const n=i.id;const r=i.active;if(n in t){if(n in e){$(`input:checkbox[data-block-id='${n}']`).prop("checked",!!e[n])}}else{t[n]=r}}))}));this.addAction({click:"search"},(function(){const e=this.el;r();i.setActionOnce(e.data("form-url"));i.setResourceSelectorOnce(e.data("form-resource"));i.submit()}));this.addAction({click:"save-changed-data"},(function(){const e=this.el;r();i.setActionOnce(e.data("form-url"));i.jqxhr().done((t=>{AGN.Lib.JsonMessages(t.popups);if(t.success){AGN.Lib.Confirm.get(e).positive()}}))}));this.addAction({change:"change-activation"},(function(){const i=this.el;const n=i.data("block-id");if(i.is(":checked")==t[n]){if(n in e){delete e[n]}}else{e[n]=i.is(":checked")}}));this.addAction({change:"activate-all"},(function(){const e=$("input:checkbox[data-block-id]");e.prop("checked",this.el.is(":checked")).change()}));function r(){if(!!i){const t=JSON.stringify(e,((e,t)=>t!==null?t:undefined));i.setValue("changedBlockStatusJson",t)}}}));AGN.Lib.Controller.new("birt-reports",(function(){let e={},t=0,i=[],n=[],r=[],o,s,a;const l=".form-check-input";this.addDomInitializer("birt-reports",(function(){e=this.config;s=e.constant.MAILING_ID;o=e.constant.AFTER_MAILING_TYPE_ID;i=e.filtered.FILTER_ARCHIVE;n=e.filtered.FILTER_MAILINGLIST;r=e.filtered.FILTER_TARGET;t=e.reportType;a=this.el}));this.addDomInitializer("report-settings",(function(){$("#extended-settings-tile").find("[data-toggle-tab]").on("click",(function(e){if(!$(e.target).is(l)){const e=$(this).find(l).is(":checked");c().prop("checked",e)}}));d();new p(this.el,this.config)}));this.addAction({click:"confirm-deactivate-deliveries"},(function(){AGN.Lib.Confirm.from("report-deactivate-deliveries")}));this.addAction({click:"activate-delivery"},(function(){const e=this.el.is(":checked");this.event.stopPropagation();window.setTimeout((()=>this.el.prop("checked",e)),0);const t=this.el.closest(".btn").is(".active");if(t){c().prop("checked",e)}}));function c(){return $('[data-action="activate-delivery-for-active-tab"]')}this.addAction({click:"activate-delivery-for-active-tab"},(function(){const e=this.el.is(":checked");this.event.stopPropagation();window.setTimeout((()=>this.el.prop("checked",e)),0);$("#extended-settings-tile").find("[data-toggle-tab].active").find(l).prop("checked",e)}));this.addAction({change:"interval-change"},(function(){d()}));function d(){const e=$("#interval").val();if(e==o){u()}else if(t==o){h()}t=e}function u(){$("#extended-settings-tile").find("[data-toggle-tab]").each((function(){const e=$(this);const t=e.data("toggle-tab");if(t.endsWith(s)){e.trigger("click");return}e.addClass("disabled");AGN.Lib.Tab.hide($(t))}))}function h(){$("#extended-settings-tile").find("[data-toggle-tab]").each((function(){$(this).removeClass("disabled")}))}class p{constructor(e,t){this.$container=e;this.config=t;this.settingsType=t.settingsType;this.select=AGN.Lib.Select.get(e.find(t.selectors.filterBlockId));this.mailingSelect=AGN.Lib.Select.get(e.find(t.selectors.normalMailing));this.init(t);e.find(t.selectors.mailingType).on("change",(e=>{this.handleMailingTypeChanges($(e.target))}));e.find(t.selectors.mailingFilter).on("change",(e=>{this.handleMailingFilterChanges($(e.target))}));e.find(t.selectors.filterBlockId).on("change",(e=>{this.handleMailingFilterValueChanges($(e.target))}))}init(e){const t=e.data.mailingType;const i=e.data.mailingFilter;const n=e.data.predefineMailing;const r=e.data.selectedMailings;const o=this.updateAllComparisonDependentFields(t,i,n,r);o.done((()=>a.dirty("setAsClean")))}handleMailingTypeChanges(e){const t=this.getMailingFilter();const i=this.getMailingFilterValue();this.updateNormalMailingField(e.val(),t,i)}handleMailingFilterChanges(e){this.updateAllComparisonDependentFields(this.mailingType,e.val())}handleMailingFilterValueChanges(e){const t=this.getMailingFilter();this.updateNormalMailingField(this.mailingType,t,e.val())}updateAllComparisonDependentFields(e,t,o,s){this.select.resetOptions();if(t>0){let e=[];if(t==1){e=i}else if(t==2){e=n}else if(t==4){e=r}_.each(e,(e=>this.select.addFormattedOption(`<option value="${e.id}">${e.shortname}</option>`)));this.select.selectValueOrSelectFirst(o);o=this.select.getSelectedValue()}return this.updateNormalMailingField(e,t,o,s)}updateNormalMailingField(t,i,n,r){const o=$.Deferred();this.mailingSelect.resetOptions();if(this.settingsType==e.constant.COMPARISON_SETTINGS&&t==2||this.settingsType==e.constant.MAILING_SETTINGS&&t==3){$.ajax({type:"GET",url:AGN.url("/statistics/report/getFilteredMailing.action"),data:{type:i,value:n?n:0,mailingType:e.constant.NORMAL_MAILING_TYPE}}).done((e=>{_.each(e,(e=>this.mailingSelect.addFormattedOption(`<option value="${e.id}">${e.shortname}</option>`)));this.mailingSelect.selectValue(r?r:"");o.resolve()}))}return o.promise()}getMailingFilter(){const e=this.$container.find(this.config.selectors.mailingFilter);return parseInt(e.val())|0}getMailingFilterValue(){return parseInt(this.select.getSelectedValue())|0}get $mailingType(){return this.$container.find(`${this.config.selectors.mailingType}`)}get mailingType(){return parseInt(this.$mailingType.val())||0}}}));AGN.Lib.Controller.new("blacklist-list",(function(){this.addAction({click:"save"},(function(){$.ajax(this.el.data("url"),{type:"POST",data:{email:$("#new-entry-email").val(),reason:$("#new-entry-reason").val()},success:t=>e(t)})}));this.addAction({click:"save-edit"},(function(){const t=this.el;AGN.Lib.Form.get(t).submit().done((i=>{e(i,(()=>AGN.Lib.Modal.getInstance(t).hide()))}))}));function e(e,t){if(e.success===true){AGN.Lib.Form.get($("#blacklist-overview")).submit().done((()=>AGN.Lib.JsonMessages(e.popups,true)));if(t){t()}}else if(e.popups){AGN.Lib.JsonMessages(e.popups,true)}else{AGN.Lib.RenderMessages($(e))}}}));AGN.Lib.Controller.new("company-insights",(function(){const e=AGN.Lib.ChartUtils;const t=50;const i=t+10;let n;let r;let o;let s;let a;let l=[];this.addAction({change:"load-dynamic-statistic"},(function(){w()}));this.addDomInitializer("company-insights",(function(){l=this.config.revenueImages;n=$("#type-of-reactor-chart");r=$("#rebuy-rate-chart");o=$("#revenue-chart");s=$("#reaction-devices-chart");a=$("#devices-progress-chart");w();const e=this.config.chartData;if(this.config.chartData){c(e["reactorType"]);d(e["rebuyRate"]);u(e["revenue"]);h(e)}else{E(n,true);E(r,true);E(o,true)}}));function c(e){if(Object.values(e).some((e=>e<=0))){E(n,true);return}const t=[n.css("--chart-darkest-blue-color"),n.css("--chart-blue-color"),n.css("--chart-light-cyan-color")];new Chart(n[0].getContext("2d"),{type:"agnDoughnut",data:{labels:Object.keys(e),datasets:[{data:Object.values(e),backgroundColor:t,borderWidth:0}]},options:{plugins:{"half-doughnut-label":false,revenueIcon:false,hideXAxisIfLabelsOverlaps:false}}})}function d(e){if(e<=0){E(r,true);return}e=A(e);const t=[r.css("--chart-blue-color"),r.css("--chart-light-grey-color")];const i=r.css("--chart-half-doughnut-label-color");Chart.register({id:"half-doughnut-label",beforeDraw:(t,n)=>{const r=t.getDatasetMeta(0).data[0].y;const o=Math.floor(t.height*.1);t.ctx.textBaseline="middle";t.ctx.textAlign="center";t.ctx.font=`600 ${o}px ${Chart.defaults.font.family}`;t.ctx.fillStyle=i;t.ctx.fillText(`${e}%`,t.width/2,r-o/3)}});new Chart(r[0].getContext("2d"),{type:"doughnut",data:{datasets:[{data:[e,100-e],backgroundColor:t,borderWidth:0}]},options:{rotation:-90,circumference:180,plugins:{legend:{display:false},datalabels:{display:false},tooltip:{external:null},revenueIcon:false,hideXAxisIfLabelsOverlaps:false}}})}function u(n){const r=e.getTotal(Object.values(n));if(r<=0){E(o,true);return}const s=[o.css("--chart-darkest-blue-color"),o.css("--chart-dark-blue-color"),o.css("--chart-blue-color"),o.css("--chart-light-blue-color")];const a=l.map((e=>{const t=new Image;t.src=e;return t}));Chart.register({id:"revenueIcon",afterDraw:e=>{const n=e.getDatasetMeta(0).data;_.each(Object.keys(n),((r,o)=>{const s=a[o];if(s.complete){const o=n[r];const a=o.x-o.width/2;const l=o.y+o.height;const c=s.width/s.height;const d=40*o.width/100;let u=Math.min(d,c*t);let h=u/c;if(h>t){h=t;u=h*c}const p=a+(o.width-u)/2;const f=l-(i-h)/2-h;e.ctx.drawImage(s,p,f,u,h)}else{s.onload=()=>e.draw()}}))}});Chart.register({id:"hideXAxisIfLabelsOverlaps",afterRender:e=>{const t=e.getDatasetMeta(0).data;e.options.scales.x.display=!x(e.data.labels,t,e.ctx);e.update()}});new Chart(o[0].getContext("2d"),{type:"bar",data:{labels:Object.keys(n),datasets:[{data:Object.values(n),backgroundColor:s,categoryPercentage:.9,minBarLength:i}]},options:{indexAxis:"x",layout:{padding:{top:20,right:0}},scales:{x:{ticks:{autoSkip:false,maxRotation:0}},y:{display:false}},plugins:{"half-doughnut-label":false,legend:{display:false},datalabels:{anchor:"end",align:"end",offset:-5,formatter:(e,t)=>{const i=(e*100/r).toFixed(1);return`${i}%`}}}}})}function h(e){p(e["favoriteOpeningDays"]);f(e["favoriteOpeningHours"]);g(e["ctr"]);m(e["conversion"]);v(e["pageImpressions"]);b(e["pageImpressionsPerVisit"]);y(e["pageImpressionsPerBuy"])}function p(e){const t=$("#fav-days-stat-block");if(Object.keys(e).length>0){t.empty()}$.each(e,((e,i)=>{t.append(AGN.Lib.Template.dom("company-insights-fav-day-record",{day:e,value:i}))}))}function f(e){const t=$("#fav-time-stat-block");if(Object.keys(e).length>0){t.empty()}$.each(e,((e,i)=>{t.append(AGN.Lib.Template.dom("company-insights-fav-time-record",{time:e,value:i}))}))}function g(e){$("#ctr-val").text(e.toString().replace(".",",")+" %")}function m(e){if(e!=0){$("#conversion-val").text(e.toString().replace(".",",")+" %")}}function v(e){if(e!=0){$("#pi-val").text(e.toString().replace(",",".")+" Ø")}}function b(e){if(e!=0){$("#pi-visit-val").text(e.toString().replace(",",".")+" Ø")}}function y(e){if(e!=0){$("#pi-buy-val").text(e.toString().replace(",",".")+" Ø")}}function w(){const e=$("#progressOfUsedPeriod").val();const t={};if(e==="MONTH"){t["byMonth"]=true}else if(e=="PERIOD"){t["from"]=$("#progressOfUsedFrom").val();t["till"]=$("#progressOfUsedTill").val()}$.get(AGN.url("/recipient/chart/progressOfUsedDevices.action"),t).done((e=>{C(e);S(e)}))}function C(t){const i=t["usedDevices"];const n=[{title:t["windowsTitle"],count:i["windows"]},{title:t["macTitle"],count:i["mac"]},{title:t["androidTitle"],count:i["android"]},{title:t["iosTitle"],count:i["ios"]}];n.sort(((e,t)=>t.count-e.count));const r=n.map((e=>e.title));const o=n.map((e=>e.count));r.push(t["otherTitle"]);o.push(i["other"]);if(e.getTotal(o)===0){E(s,true);return}E(s,false);const a=[s.css("--chart-darkest-blue-color"),s.css("--chart-dark-blue-color"),s.css("--chart-blue-color"),s.css("--chart-light-blue-color"),s.css("--chart-light-cyan-color")];Chart.getChart(s)?.destroy();new Chart(s[0].getContext("2d"),{type:"agnDoughnut",data:{labels:r,datasets:[{data:o,backgroundColor:a,borderWidth:0}]},options:{plugins:{"half-doughnut-label":false,revenueIcon:false,hideXAxisIfLabelsOverlaps:false}}})}function S(e){const t=a.css("--chart-black-color");const i=[];const n=[];const r=[];const o=[];const s=[];const l=[];const c=[];for(let t=0;t<e["usedDevicesByPeriods"].length;t++){const a=e["usedDevicesByPeriods"][t];const{windows:d,mac:u,android:h,ios:p,other:f}=a;const g=d+u+h+p+f;n.push(A(d/g));r.push(A(u/g));o.push(A(h/g));s.push(A(p/g));l.push(A(f/g));c.push(g);i.push(a["date"])}const d=Math.max(...c);if(d===0){E(a,true);return}else{E(a,false)}Chart.getChart(a)?.destroy();new Chart(a[0].getContext("2d"),{type:"bar",data:{labels:i,datasets:[{label:e["numberOfReactions"],data:c,borderColor:t,backgroundColor:t,type:"line",yAxisID:"reactions-y"},{label:e["otherTitle"],backgroundColor:a.css("--chart-light-cyan-color"),data:l},{label:e["iosTitle"],backgroundColor:a.css("--chart-light-blue-color"),data:s},{label:e["androidTitle"],backgroundColor:a.css("--chart-blue-color"),data:o},{label:e["macTitle"],backgroundColor:a.css("--chart-dark-blue-color"),data:r},{label:e["windowsTitle"],backgroundColor:a.css("--chart-darkest-blue-color"),data:n}]},options:{interaction:{mode:"index"},plugins:{"half-doughnut-label":false,revenueIcon:false,hideXAxisIfLabelsOverlaps:false,datalabels:{display:false},legend:{position:"bottom",reverse:true},tooltip:{callbacks:{label:function(e){let t=e.raw;if(e.datasetIndex>0){t+="%"}return`${e.dataset.label}: ${t}`}},itemSort:(e,t)=>t.datasetIndex-e.datasetIndex}},scales:{x:{stacked:true,ticks:{maxRotation:0}},y:{stacked:true,min:0,max:100,ticks:{callback:(e,t,i)=>`${e}%`}},"reactions-y":{type:"linear",position:"right",min:0,max:d}}}})}function A(e){return Math.round(1e3*e)/10}function x(e,t,i){if(e.length<2){return false}const n=2;const r=e.map((e=>i.measureText(e).width));for(let i=1;i<e.length;i++){const e=t[i].x-r[i]/2;const o=t[i-1].x+r[i-1]/2;if(e-n<=o){return true}}return false}function E(e,t){e.toggleClass("hidden",t);e.next().toggleClass("hidden",!t)}}));AGN.Lib.Controller.new("email-list-controller",(function(){let e="";let t=" ";let i;const n=()=>{let i=[""];const n=$(`input[name="${e}"]`).val();if(n){i=n.split(t)}return i};const r=()=>{const n=i.getJsonData();$(`input[name="${e}"]`).val(n.join(t))};this.addDomInitializer("email-list-initializer",(function(){const r=$(this.el);const o=this.config?.disabled;e=r.data("target-field")||"";t=r.data("data-emails-separator")||t;i=AGN.Lib.EmailsListManager.initialize(r,n(),{disabled:o})}));this.addAction({click:"delete-email"},(function(){i.deleteRow($(this.el));r()}));this.addAction({click:"create-email"},(function(){i.createRowAfter($(this.el));r()}));this.addAction({change:"change-trigger"},(function(){r()}))}));AGN.Lib.Controller.new("company-view",(function(){this.addDomInitializer("company-view",(function(){e()}));this.addAction({click:"create-postal-field"},(function(){const e=this.el.attr("href");const t=AGN.Lib.Form.get(this.el);t.jqxhr().done((()=>AGN.Lib.Page.reload(e)))}));this.addAction({change:"update-policy"},(function(){e()}));function e(){const e=$("#passwordPolicy").val();$("#password").attr("data-rule",e)}this.addAction({change:"change-password-expire"},(function(){this.el.find('[data-default-password-expire-option="false"]').remove()}))}));AGN.Lib.Controller.new("content-source-list",(function(){this.addAction({click:"bulk-delete"},(function(){const t=$("[data-bulk-checkbox]:checked").map((function(){const e=$(this);return{id:e.val(),type:e.data("content-source-type")}})).get();e(this.el.attr("href"),t,(i=>{AGN.Lib.Confirm.create(i).done((()=>{e(AGN.url("/administration/content-source/bulkDelete.action"),t,(e=>{AGN.Lib.Form.get(this.el).updateHtml(e)}))}))}))}));function e(e,t,i){$.ajax({url:e,type:"POST",contentType:"application/json",data:JSON.stringify(t),success:e=>i(e)})}}));AGN.Lib.Controller.new("content-source-view",(function(){const e=AGN.Lib.Select;const i=AGN.Lib.InputTable;const n=AGN.Lib.Helpers;let r;let o;let s=[];let a;let l;let c;let d;let u;this.addDomInitializer("content-source-view",(function(){r=AGN.Lib.Form.get($("#content-source-form"));a=$("#resource-type").val();u=$("#urls-table");l=$("#url-settings");c=e.get($("#content-block-name"));d=e.get($("#target-group-select"));o=this.config.htmlSourcesAllowed;s=this.config.availableMailings;h();p()}));function h(){const e=u.find('[data-name="url"]');if(a==="HTML"&&o){e.each(((e,t)=>g($(t))));$("[data-add-row]").closest("td").show();$('[data-action="configure-url"]').closest("td").show()}else if(a==="XML"){$("[data-add-row]").closest("td").hide();$('[data-action="configure-url"]').closest("td").hide();e.first().attr("data-field","required");r.initFields()}}this.addAction({change:"change-resource-type"},(function(){a=this.el.val();h()}));function p(){$("#mailing-name").on("change",f);b(u.find("tr:first"))}function f(){const e=s.find((e=>e.name===$(this).val())).blocks.map((e=>({id:e,text:e})));c.setOptions(e)}function g(e){e.closest("td").next().toggleClass("hidden",!$(e).val())}this.addAction({change:"url-input",keyup:"url-input",paste:"url-input"},(function(){g(this.el)}));this.addAction({click:"configure-url"},(function(){if(!r.validate()){return}y();b(this.el.closest("tr"))}));function m(e){d.selectValueOrSelectFirst(e.targetGroup)}function v(e){return a!=="XML"&&e.find('[data-name="url"]')?.val()?.trim()?.length>0}function b(e){const n=i.get(u).getRowData(e);l.toggle(v(e));l.data("urlRow",e);$("#url-ph").text(n.url);const r=n.contentBlockName?{id:n.contentBlockName,text:n.contentBlockName}:{id:"",text:t("contentSource.mailingContentSelect")};c.setOptions([r]);m(n)}function y(){const e=l.data("urlRow");e.find('[data-name="contentBlockName"]').val($("#content-block-name").val());e.find('[data-name="targetGroup"]').val($("#target-group-select").val())}function w(e){if(a==="HTML"){for(let t=0;t<e.length;t++){if(e[t].contentBlockName.trim()?.length<=0){b(u.find("tr").eq(t));return r.validate()}}}return true}this.addAction({submission:"content-source-save"},(function(){y();const e=i.get(u).collect();if(!w(e)){return}_.each(e,(function(e,t){r.setValue("urls["+t+"].url",e.url);r.setValue("urls["+t+"].contentBlockName",e.contentBlockName);r.setValue("urls["+t+"].targetGroup",e.targetGroup||0)}));r.submit()}));AGN.Lib.Validator.new("content-source-url",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e){if(!e.val()||n.isUrl(e.val())){return[]}return[{field:e,msg:t("url.invalid")}]}})}));AGN.Lib.Controller.new("custom-thumbnail-view",(function(){this.addAction({change:"use-custom-thumbnail"},(function(){$("#customThumbnailFile").prop("name",this.el.is(":checked")?"customThumbnailFile":"")}));this.addAction({change:"custom-thumbnail-image"},(function(){const t=this.el;const i=t.prop("files");if(i?.length){const n=i[0];if(n.type=="image"||n.type.match("image/.*")){const i=new FileReader;i.onload=i=>{e(t,n.name,i.target.result)};i.readAsDataURL(n)}else{AGN.Lib.Helpers.clearFormField(t);e(t)}}else{e(t)}}));this.addAction({click:"delete-custom-thumbnail-image"},(function(){const t=this.el.parent().parent().find('input[type="file"]');if(t.prop("files")?.length){AGN.Lib.Helpers.clearFormField(t);e(t)}}));function e(e,t="",i=""){let n=e.data("preview-name");if(n){$(n).text(t)}n=e.data("preview-image");if(n){if(i){$(n).prop("src",i)}else{$(n).each((function(){const e=$(this);e.prop("src",e.data("no-preview-src")||"")}))}}}}));AGN.Lib.Controller.new("dynamic-report",(function(){const e=AGN.Lib.DateFormat;let i;let n;this.addDomInitializer("dynamic-report",(function(){i=this.config.mailings;n=this.config.clickersGroupsCount;$.i18n.load(this.config.translations);c();l();r();s()}));function r(){$("#avg-sent-opened").text(o().toFixed(2)+"%");const e=i.length?_.sumBy(i,"revenue")/i.length:0;$("#avg-revenue").text(e.toFixed(2)+" €");const t=_.sortBy(i,["ordersCount"]).reverse();if(t.length){$("#best-performing-mailing").text(a(t[0]))}if(t.length>1){$("#worst-performing-mailing").text(a(t[t.length-1]))}}function o(){const e=i.filter((e=>e.sendCount>0));const t=e.filter((e=>e.openingsCount>0));return e.length?t.length*100/e.length:0}function s(){const e=["ordersCount","revenue","clickers","openers"];const t=e.map((e=>_.sortBy(i,[e]).reverse()));const n=_.sortBy(i,(i=>e.reduce(((e,n,r)=>e+_.findIndex(t[r],{id:i.id})),0)));$("[data-performance-mailing-info]").each(((e,t)=>{if(e<n.length){$(t).text(a(n[e]))}}))}function a(t){let i=`${t.shortname} (ID: ${t.id})`;if(t.sendTime){const n=e.format(new Date(t.sendTime),window.adminDateTimeFormat);i+=` (${n})`}return i}function l(){const e=$("#clickers-chart");const r=[e.css("--chart-darkest-blue-color"),e.css("--chart-dark-blue-color"),e.css("--chart-blue-color"),e.css("--chart-light-blue-color"),e.css("--chart-light-cyan-color"),e.css("--chart-cyan-color")];const o=[`> ${n} ${t("clicks")}`];const s=[_.sumBy(i,"clickersWithMoreThenXClicksCount")];for(let e=n;e>0;e--){o.push(`${e} ${t("clicks")}`);s.push(_.sumBy(i,`clickersByClicksCountMap.${e}`))}new Chart(e[0].getContext("2d"),{type:"agnDoughnut",data:{labels:o,datasets:[{data:s,backgroundColor:r,borderWidth:0}]}})}function c(){const n=d($("#filter-send-date-from").val(),$("#filter-send-date-to").val());const r=_.groupBy(i,(t=>{if(t.sendTime){return e.format(new Date(t.sendTime),window.adminDateFormat)}else{return null}}));const o=e=>n.map((t=>_.sumBy(r[t]||[],e)));const s=$("#mailing-statistics-chart");new Chart(s[0].getContext("2d"),{type:"line",data:{labels:n,datasets:[{label:t("sentMailings"),data:o("sendCount"),borderColor:s.css("--chart-darkest-blue-color"),backgroundColor:s.css("--chart-darkest-blue-color"),pointRadius:1},{label:t("openers"),data:o("openersCount"),borderColor:s.css("--chart-light-blue-color"),backgroundColor:s.css("--chart-light-blue-color"),pointRadius:1},{label:t("clickers"),data:o("clickersCount"),borderColor:s.css("--chart-lime-color"),backgroundColor:s.css("--chart-lime-color"),pointRadius:1}]},options:{scales:{x:{ticks:{maxRotation:0}},y:{display:false}},interaction:{mode:"index",intersect:false},stacked:false,plugins:{legend:{position:"bottom"},datalabels:{display:false}}}})}function d(t,i){const n=[];const r=e.parse(t,window.adminDateFormat);const o=i?e.parse(i,window.adminDateFormat):new Date;while(r<=o){n.push(e.format(r,window.adminDateFormat));r.setDate(r.getDate()+1)}return n}}));AGN.Lib.Controller.new("edit-field-content",(function(){this.addAction({click:"calculateRecipients"},(function(){const e=$("#recipients-count");const t=AGN.Lib.Form.get(this.el);$.ajax({url:AGN.url("/recipient/calculate.action"),data:{targetId:t.getValue("targetId"),mailinglistId:t.getValue("mailinglistId")}}).always((t=>{e.val(t.count||0)})).fail((()=>{e.val("?");AGN.Lib.Messages.defaultError()}))}))}));AGN.Lib.Controller.new("evaluate-fields",(function(){const e=AGN.Lib.Helpers;this.addDomInitializer("evaluate-fields",(function(){const t=$("#evaluate-fields-chart");const i=this.config.stat;const n=e.getStatColorsHexValues();new Chart(t[0].getContext("2d"),{type:"agnDoughnut",data:{labels:i.map((({value:e})=>e)),datasets:[{data:i.map((({count:e})=>e)),backgroundColor:n,borderWidth:0}]}})}))}));AGN.Lib.Controller.new("export-view",(function(){let e;let t;let i;this.addDomInitializer("export-view",(function(){e=this.config.bounceUserStatusCode;r();i=AGN.Lib.Form.get($("#exportForm"));t=new a($("#custom-column-mappings"));n()}));function n(){const e=$("#user-columns").val();const t=e.includes("lastopen_date")||e.includes("lastclick_date");$("#24h-col-info").toggle(t)}this.addAction({click:"save"},s);this.addAction({click:"evaluate"},s);this.addAction({change:"add-bounce-col-to-choose"},r);this.addAction({change:"user-columns-update"},n);function r(){const t=$("#mailing-bounce-column-option");const i=$("#recipient-export-recipientstatus").find(":selected").val();if(i==e){t.removeAttr("disabled")}else{const e=AGN.Lib.Select.get($("#user-columns"));e.unselectValue("mailing_bounce");t.attr("disabled","disabled")}}function o(e){_.each(t.collect(),(function(t,i){e.setValue("customColumns["+i+"].dbColumn",t.dbColumn);e.setValue("customColumns["+i+"].defaultValue",t.defaultValue)}))}function s(){if(i.valid({})){o(i);i.submit()}else{i.handleErrors()}}class a extends AGN.Lib.InputTable{addEmptyRow(){if(i.valid({})){i.cleanFieldFeedback();super.addEmptyRow()}else{i.handleErrors()}}}}));AGN.Lib.Controller.new("facebook-leadads",(function(){var e=AGN_FACEBOOK.Login,i=AGN_FACEBOOK.LeadAds,n=AGN_FACEBOOK.SDK,r=AGN.Lib.Select;var o={};this.addDomInitializer("facebook-leadads",(function(){o=this.config;AGN.Lib.Storage.delete("fblst_"+o.FACEBOOK_LEADADS_APP_ID);n.load_sdk(o.FACEBOOK_LEADADS_APP_ID,c)}));var s=function(e){$("#mailinglistId").prop("disabled",!e)};var a=function(e){$("#doiMailingId").prop("disabled",!e)};var l=function(e){$('[data-action="connect-page"]').prop("disabled",!e)};var c=function(){var t=function(e){var t=function(){AGN.Lib.Messages.alert("messages.error.reload")};d();i.list_manageable_pages(e,o.URL.LIST_FACEBOOK_PAGE_BINDINGS_AJAX_URL,"#facebook-pages-table",t)};e.attach_login_function(".facebook-login-btn",t,"pages_read_engagement, leads_retrieval");d()};var d=function(){e.doByLoginStatus(h,u)};var u=function(){r.get($("#mailinglistId")).selectFirstValue();s(false);a(false);l(false);$(".facebook-login-btn").removeClass("hidden")};var h=function(e){$(".facebook-login-btn").addClass("hidden");s(true);i.list_manageable_pages(e,o.URL.LIST_FACEBOOK_PAGE_BINDINGS_AJAX_URL,"#facebook-pages-table");$('[data-action="connect-page"]').data("fbAccessToken",e);i.renew_page_access_tokens(e,o.URL.RENEW_FACEBOOK_PAGE_ACCESS_TOKENS_AJAX_URL,(function(e){var i=JSON.parse(e);if(i.count>0){AGN.Lib.Messages(t("defaults.success"),t("facebook.leadAds.renewedPageAccessTokens",i.count),"success")}}))};this.addAction({change:"mailinglist-change"},(function(){l(false);a(false);var e=$(this.el);var t=r.get(e).getSelectedValue();p(t);a(t!==0)}));var p=function(e){var t=r.get($('[data-action="doi-mailing-change"]'));t.resetOptions();t.setOptions([{id:0,text:"---"}]);t.selectFirstValue();if(e!==0){a(false);$.ajax({url:o.URL.LIST_ACTIONBASED_AJAX_URL,type:"GET",data:{mailinglist:e},success:function(e){if(e){var i=_.map(e.mailings,(function(e){console.log("mailing "+e.id+": "+e.shortname);return{id:e.id,text:e.shortname}}));i.unshift({id:0,text:"---"});t.setOptions(i);t.selectFirstValue()}},error:function(e,t,i){console.log("status = "+t+", error = "+i);AGN.Lib.Messages.alert("messages.error.reload")},statusCode:{500:function(){if(!!onError){onError()}}}})}};this.addAction({change:"doi-mailing-change"},(function(){var e=$(this.el);var t=r.get(e).getSelectedValue();l(t>0)}));this.addAction({click:"connect-page"},(function(){var e=$(this.el);var n=e.data("fbAccessToken");var s=function(){i.list_manageable_pages(n,o.URL.LIST_FACEBOOK_PAGE_BINDINGS_AJAX_URL,"#facebook-pages-table");AGN.Lib.Messages(t("defaults.success"),t("defaults.saved"),"success")};var a=r.get($('[data-action="mailinglist-change"]')).getSelectedValue();var l=r.get($('[data-action="doi-mailing-change"]')).getSelectedValue();i.connect_pages(n,o.URL.CONNECT_FACEBOOK_PAGE_BINDINGS_AJAX_URL,"#facebook-pages-table",a,l,s,null,(function(e){if(!!e){e.page_names.forEach((function(e){AGN.Lib.Messages(t("facebook.leadAds.error.already_bound_to_other_company"),e,"alert")}))}}))}))}));AGN.Lib.Controller.new("form-trackable-links",(function(){this.addAction({submission:"save-all"},(function(){const t=AGN.Lib.Form.get($("#userFormTrackableLinksForm"));e(t,"commonExtensions",$("#links-common-extensions"));t.submit()}));this.addAction({submission:"save-individual"},(function(){const t=AGN.Lib.Form.get($("#userFormTrackableLinkForm"));e(t,"extensions",$("#link-extensions"));t.submit()}));function e(e,t,i){const n=i.data("table").collect();_.each(n,(function(i,n){e.setValueOnce(t+"["+n+"].name",i.name);e.setValueOnce(t+"["+n+"].value",i.value)}))}}));AGN.Lib.Controller.newExtended("grid-building-block-defaults","building-block-view",(function(){const e=AGN.Lib.Helpers;const i=AGN.Lib.Confirm;const n=AGN.Lib.Form;let r;this.addDomInitializer("grid-building-block-defaults",(function(){r=this.config;$("img[id^=preview]").each((function(){const e=$(this);const t=e.attr("src");if(t){const i=o(t);if(i!==t){e.attr("src",$.trim(i))}}e.parent().removeClass("hidden")}));s()}));this.addAction({click:"chooseImage"},(function(){const e=a(this.el);if(e>0){if(l(e)){$(`#file-${e}`).trigger("click")}else{c(e)}}}));this.addAction({change:"chooseImageFile"},(function(){const e=a(this.el);if(e>0){d(this.el,e)}}));this.addAction({click:"deleteImage"},(function(){const e=a(this.el);if(e>0){p(e)}}));this.addAction({click:"showMediapoolDialog"},(function(){const e=a(this.el);if(e>0){c(e)}}));this.addAction({click:"chooseImageLink"},(function(){const e=a(this.el);if(e>0){$(`#content-${e}`).trigger("focus")}}));this.addAction({change:"previewImageLink",keyup:"previewImageLink",mouseup:"previewImageLink"},(function(){const e=a(this.el);if(e>0){h(e,$.trim(this.el.val()))}}));this.addAction({click:"save"},(function(){f().done((()=>n.get($("#default-content-tile")).submit()))}));function o(t){return e.replaceAgnTags(t,((e,t)=>{if(e.name==="agnIMAGE"&&e.attributes["name"]){if(!e.attributes["source"]||e.attributes["source"]==="mediapool"||e.attributes["source"]==="mediapoolbg"){return AGN.url(`/mediapool/${encodeURIComponent(e.attributes["name"])}/raw.action`)}}return t}))}function s(){r.placeholders.filter((e=>e.placeholderType===r.CHECK_PLACEHOLDER_TYPE)).forEach((e=>{const t=$(`\n            <div id="${e.placeholderId}-children" class="bordered-box-sm" data-show-by-checkbox="#content-${e.placeholderId}">\n                <div class="row g-2"></div>\n            </div>\n        `);t.insertAfter($(`#content-${e.placeholderId}`).parent());e.options.split(",").forEach((e=>{t.find("> .row").append($(`.ph-${e}`))}))}));AGN.Lib.CoreInitializer.run("checkbox-hider",$("#default-content-tile"))}function a(e){var t=e.closest("[data-ph-id]");return t.exists()?parseInt(t.data("ph-id")):0}function l(e){const t=$(`#file-${e}`);return t.exists()?!!t.val():false}function c(t){i.request(AGN.url("/mediapool/image/pick.action")).done((i=>{$(`#content-${t}`).val(i.id);e.clearFormField($(`#file-${t}`));u(t,i.src,i.name,i.title)}))}function d(t,i){const n=t.prop("files");const r=$(`#content-${i}`);const o=$(`#image-category-${i}`).parent();if(n?.length){const r=n[0];if(r.type==="image"||r.type.match("image/.*")){const e=new FileReader;e.onload=e=>{o.removeClass("hidden");u(i,e.target.result,r.name,r.name)};e.readAsDataURL(r)}else{o.addClass("hidden");e.clearFormField(t);u(i)}}else{o.addClass("hidden");u(i)}r.val("")}function u(e,t,i,n){const o=$(`#preview-${e}`);const s=$(`#image-name-${e}`);if(o.attr("src")!==t){o.attr("src",t||r.noPreviewImageLink)}o.attr("title",n||"");s.text(i||"")}const h=_.throttle(((e,t)=>{const i=$(`#preview-${e}`);if(i.attr("src")!==t){if(t){i.attr("src",$.trim(o(t)))}else{i.attr("src",t||r.noPreviewImageLink)}}}),300);function p(t){e.clearFormField($(`#file-${t}`));$(`#image-name-${t}`).text("");$(`#content-${t}`).val("");$(`#preview-${t}`).attr("src",r.noPreviewImageLink)}function f(){const i=$.Deferred();const r=[];const o=n.get($("#default-content-tile"));let s=true;o.get$().find("input[type=file]").each((function(){const e=$(this);const i=a(e);const n=$(`#image-category-${i}`);const l=e.prop("files");if(l?.length){const e=n.val();if(e>0){r.push({placeholderId:i,image:l[0],categoryId:e});o.cleanFieldFeedback(n)}else{s=false;o.showFieldError$(n,t("error.grid.noCategorySelected"))}}else{o.cleanFieldFeedback(n)}}));if(s){if(r.length){const t=new FormData;r.forEach(((e,i)=>{t.append(`uploads[${i}].file`,e.image);t.append(`uploads[${i}].fileName`,e.image.name);t.append(`uploads[${i}].title`,e.image.name);t.append(`uploads[${i}].categoryId`,e.categoryId)}));$.ajax(AGN.url("/mediapool/upload.action?asJson=true"),{type:"POST",dataType:"json",enctype:"multipart/form-data",processData:false,contentType:false,data:t}).done((t=>{if(t.success===true){r.forEach((i=>{const n=t.data[i.image.name]||0;const r=i.placeholderId;$(`#content-${r}`).val(n);e.clearFormField($(`#file-${r}`))}));i.resolve()}else{AGN.Lib.JsonMessages(t.popups);i.reject()}})).fail((()=>i.reject()))}else{i.resolve()}}else{i.reject()}return i.promise()}}));AGN.Lib.Controller.new("building-block-view",(function(){this.addAction({click:"activate"},(function(){e(true,this.el)}));this.addAction({click:"deactivate"},(function(){e(false,this.el)}));function e(e,i){const n=$("[data-building-block-activeness-toggle]");n.addClass("disabled");$.post(i.data("url")).done((r=>{if(r.success){i.toggleClass("hidden",true);n.not(i).toggleClass("hidden",false);t(e);$("#building-block-delete-option").toggleClass("hidden",e)}AGN.Lib.JsonMessages(r.popups);n.removeClass("disabled")}))}function t(e){const t=$("[data-building-block-activeness-indicator]");t.addClass("hidden");t.not($(`[data-building-block-activeness-indicator="${!e}"]`)).removeClass("hidden")}}));AGN.Lib.Controller.newExtended("building-blocks-overview","activeness-overview",(function(){this.addDomInitializer("building-blocks-overview",(function(){if(location.hash){const t=parseInt(location.hash.substr(1));if(t>0){const i=$(`[data-bulk-checkbox][value="${t}"]`).closest("tr");e(i.position().top-i.height())}}}));function e(e){$(".table-wrapper__body").scrollTop(e)}}));AGN.Lib.Controller.new("grid-edit",(function(){const e=AGN.Lib.Template;let t;let i;this.addDomInitializer("grid-edit",(function(){t=this.config;i=AGN.Lib.Form.get($("#gridForm"));r()}));this.addAction({submission:"createTemplate"},(function(){$("#templateCreationForm").submit()}));this.addAction({submission:"saveGrid"},(function(){i.submit()}));this.addAction({change:"updateColnum"},(function(){n(this.el,1,t.maxColumnsCount);h("columnWidth").val(o());r()}));this.addAction({change:"updateTemplateWidth"},(function(){n(this.el,50,2e3);h("columnWidth").val(o());r()}));this.addAction({change:"updateColumnWidth"},(function(){n(this.el,10,2e3);h("templateWidth").val(s());r()}));this.addAction({change:"updateGutterWidth"},(function(){n(this.el,0,500);h("columnWidth").val(o());r()}));this.addAction({click:"enableEditing"},(function(){$(this.el).prop("disabled",true);h("gridName").prop("disabled",false);if(!t.isGridInUse){$.each(["columnNum","columnWidth","gutter","templateWidth"],((e,t)=>{h(t).prop("disabled",false)}))}$("#createTemplateButton").addClass("hidden");$("#saveAndCreateTemplateButton").removeClass("hidden");i.get$().attr("data-action","saveGrid")}));function n(e,t,i){const n=parseInt(e.val());if(n!=e.val()||n<t){e.val(t)}if(n>i){e.val(i)}}function r(){const t=l();const i=a();const n=c();const r=$("#grid-preview-block");r.html(e.text("lb-grid-columns-preview",{columnsCount:i,columnWidth:t,gutter:n}));for(let o=0;o<i;o++){const s=o+1;r.append(e.text("lb-grid-row-preview",{columnsCount:i,firstBlockWidth:s,columnWidth:t,gutter:n,percent:Math.floor(s*100/i)}))}}function o(){return Math.floor(d()/a()-c())}function s(){return Math.ceil((l()+c())*a())}function a(){return u("columnNum")}function l(){return u("columnWidth")}function c(){return u("gutter")}function d(){return u("templateWidth")}function u(e){return parseInt(h(e).val())}function h(e){return i.get$().find(`[name='${e}']`)}}));AGN.Lib.Controller.newExtended("grid-outer-template","grid-template-base",(function(){this.addAction({click:"update-preview"},(function(){const e=AGN.Lib.Form.get(this.el);e.setValue("outerHtml",$("#templateOuterHTML").val());e.submit()}))}));AGN.Lib.Controller.new("grid-overview",(function(){this.addAction({submission:"createNewGrid"},(function(){const e=AGN.Lib.Form.get(this.el);const i=e.getValue("newGridName");$.get(AGN.url("/layoutbuilder/grid/checkName.action"),{name:i}).done((i=>{if(i.used){e.showFieldError("newGridName",t("fields.name.errors.name_in_use"))}else{e.submit().done((()=>{AGN.Lib.Modal.getInstance(e.get$()).hide()}))}}))}))}));AGN.Lib.Controller.newExtended("grid-template-css","grid-template-base",(function(){let e=[];let t=[];let i;let n;this.addDomInitializer("grid-template-css",(function(){e=this.config.previewWidths;t=this.config.previewMediaQueries;n=AGN.Lib.Form.get($("#layoutPreviewForm"));i=$('[name="previewSize"]');AGN.Lib.Storage.restoreChosenFields(i);r()}));this.addAction({change:"update-css-preview",click:"refresh-preview"},(function(){AGN.Lib.Storage.saveChosenFields(i);n.setValue("css",$("#cssContents").val());r()}));function r(){const e=parseInt(i.val());o(e);s(e);n.submit()}function o(n){const r=AGN.Lib.Template.dom("template-css-iframe",{previewWidth:e[n],mediaQuery:t[n]});i.closest(".tile").find(".tile-body").html(r);AGN.Lib.CoreInitializer.run("iframe")}function s(e){if(n.getValue("previewSize")===undefined){n.setValueOnce("previewSize",e)}else{n.setValue("previewSize",e)}}}));AGN.Lib.Controller.newExtended("grid-template-settings","grid-template-base",(function(){const e=AGN.Lib.Messages;const t={11:"mailing.default.sender_and_reply_emails_changed",10:"mailing.default.sender_email_changed","01":"mailing.default.reply_email_changed"};let i=[];let n=[];this.addDomInitializer("grid-template-settings",(function(){i=$("#targetGroupSelect").val()||[];o(i.length>1);n=this.config.mailinglists}));this.addAction({submission:"save"},(function(){const e=AGN.Lib.Form.get(this.el);r(e);e.submit()}));function r(e){const t=$("#mailingParamsTable");if(!t.exists()){return}_.each(t.data("table").collect(),((t,i)=>{e.setValueOnce(`settings.parameters[${i}].name`,t.name);e.setValueOnce(`settings.parameters[${i}].value`,t.value);e.setValueOnce(`settings.parameters[${i}].description`,t.description)}))}this.addAction({change:"selectTargetGroups"},(function(){const e=this.el.val()||[];if(e.length>1&&i.length<=1){$("#recipientHasToBeInAllTargets").prop("checked",true)}o(e.length>1);i=e}));function o(e){const t=$("#target-mode-box");t.toggle(e);$("#regular-targets-box").toggleClass("border rounded p-2",e&&t.is(":visible"))}this.addAction({change:"select-mailinglist"},(function(){const i=n.find((e=>e.id===parseInt(this.el.val())));if(!i){return}const r=$("#sender-email");const o=$("#reply-email");const s=i.senderEmail&&r.val()!==i.senderEmail;const a=i.replyEmail&&o.val()!==i.replyEmail;if(s){r.val(i.senderEmail).trigger("change")}if(a){o.val(i.replyEmail)}const l=_.result(t,`${+!!s}${+!!a}`);if(l){e.info(l)}}))}));AGN.Lib.Controller.newExtended("grid-template-styles","grid-template-base",(function(){this.addAction({click:"update-preview"},(function(){const e=AGN.Lib.Form.get(this.el);$("#styles-tile").find('input[name^="styles["]').each((function(){const t=$(this);e.setValue(t.attr("name"),t.val())}));e.submit()}))}));AGN.Lib.Controller.new("grid-template-base",(function(){const e=AGN.Lib.LB.Definitions;const t=AGN.Lib.LB.Ui;this.addAction({click:"toggle-released"},(function(){if(e.EDITOR&&!e.EDITOR.isEditable()){return}const i=$("[data-template-released-toggle]");i.addClass("disabled");$.post(this.el.data("url")).done((e=>{if(e.success){t.setShown(this.el,false);t.setShown(i.not(this.el),true)}AGN.Lib.JsonMessages(e.popups);i.removeClass("disabled")}))}))}));AGN.Lib.Controller.new("iframe-progress",(function(){this.addDomInitializer("iframe-progress",(function(){const e=$("#preview-progress");const t=setTimeout((()=>{e.show()}),100);$(".default-iframe").on("load",(()=>{clearTimeout(t);e.hide()}))}))}));AGN.Lib.Controller.new("img-editor",(function(){const e=AGN.Lib.Modal;let t,i;let n=0,r=0;let o;let s;let a;let l;let c;let d;let u;this.addDomInitializer("img-editor",(function(){c=this.el.data().saveUrl;a=document.getElementById("editor-canvas");l=a.getContext("2d");h((()=>{d=a.toDataURL();u=X().$form.serializeArray()}))}));function h(e){let t=z().attr("src");if(!t.startsWith("data:")){t+=`&t=${(new Date).getTime()}`}s=new Image;s.src=t;s.onload=function(){a.width=s.width;a.height=s.height;l.drawImage(s,0,0);F();p();f();q();if(e){e()}}}function p(e,t){const i=t?.size?.width||a.width;const n=t?.size?.height||a.height;D().val(Math.round(i));T().val(Math.round(n))}function f(){$("#img-percent").val(100)}this.addAction({click:"crop"},(async function(){E("crop");if(!O()){L();return}await g()}));async function g(){if(n<=1||r<=1){return}const e=function(e,o){e.width=n;e.height=r;o.drawImage(s,t,i,n,r,0,0,n,r)};await v(e);L()}this.addAction({click:"resize"},(async function(){await g();E("resize");H()}));async function m(e,t){const i=function(e,i){e.width=t.size.width;e.height=t.size.height;i.drawImage(s,0,0,t.size.width,t.size.height)};await v(i)}async function v(e){await b();const t=document.createElement("canvas");const i=t.getContext("2d");e(t,i);a.width=t.width;a.height=t.height;l.clearRect(0,0,a.width,a.height);l.drawImage(t,0,0);await b();f()}async function b(){await new Promise((e=>{s.src=a.toDataURL();s.onload=e}))}this.addAction({click:"rotate-clockwise"},y);async function y(){await C(false)}this.addAction({click:"rotate-counterclockwise"},w);async function w(){await C(true)}async function C(e){E();const t=function(t,i){t.width=a.height;t.height=a.width;i.translate(t.width/2,t.height/2);i.rotate((e?-1:1)*Math.PI/2);i.drawImage(s,-s.width/2,-s.height/2)};await v(t);q()}this.addAction({click:"flip-horizontally"},S);async function S(){await x(false)}this.addAction({click:"flip-vertically"},A);async function A(){await x(true)}async function x(e){await b();E();l.clearRect(0,0,a.width,a.height);l.save();if(e){l.scale(1,-1);l.drawImage(s,0,-a.height)}else{l.scale(-1,1);l.drawImage(s,-a.width,0)}l.restore();f();await b()}function E(e){if(e!=="crop"){I()}if(e!=="resize"){G()}}this.addAction({input:"change-size"},(()=>M()));this.addAction({input:"change-size-via-percentage"},(()=>M(true)));function T(){return $("#img-height")}function D(){return $("#img-width")}function M(e){E();let{newWidth:t,newHeight:i}=e?P():k();a.width=t;a.height=i;l.save();l.drawImage(s,0,0,t,i);l.restore();T().val(i);D().val(t);q()}function k(){const e=s.width;const t=s.height;let i=D().val();let n=T().val();if(B()){if($("#img-width").is(":focus")){const r=i/e;n=Math.round(r*t)}else if($("#img-height").is(":focus")){const r=n/t;i=Math.round(r*e)}}return{newWidth:i,newHeight:n}}function P(){const e=$("#img-percent").val();const t=s.width;const i=s.height;const n=Math.round(t*(e/100));const r=Math.round(i*(e/100));return{newWidth:n,newHeight:r}}function R(e,t){$(`[data-action="${e}"]`).toggleClass("active",t)}function I(){L(false)}function O(){return!!N()}function N(){return $("#editor-canvas").data("Jcrop")}function L(e){if(e===undefined){e=!O()}if(!e){j()}else{U()}R("crop",e)}function F(){if(W().resizable("instance")){W().resizable("destroy")}W().resizable({handles:"ne, se, sw, nw, w, n, e, s",stop:m,resize:p,disabled:true})}function G(){H(false)}this.addAction({change:"lock-proportions"},(async function(){let e=B();R("lock-proportions",e);W().resizable("option","aspectRatio",e)}));function B(){return $('[data-action="lock-proportions"]').prop("checked")}function H(e){if(e===undefined){e=V()}W().resizable(e?"enable":"disable");R("resize",e)}function z(){return $("#editor-img")}function W(){return $("#editor-canvas")}function V(){const e=W();return e.resizable("instance")&&e.resizable("option","disabled")}function j(){const e=N();if(typeof e!="undefined"){e.destroy();F();q()}n=0;r=0}function U(){W().Jcrop({onChange:Y,onSelect:Y,setSelect:[0,0,a.width,a.height]})}function Y(e){t=e.x;i=e.y;n=e.w;r=e.h}function q(){const e=W();const t=$(".ui-wrapper");e.css("width",a.width);e.css("height",a.height);t.css("width",a.width);t.css("height",a.height);p()}function K(e){const t=X();const i=$("<input/>").attr({type:"file",name:"image"}).css("display","none");const n=new DataTransfer;n.items.add(new File([e],$("#filename")));i[0].files=n.files;t.get$().append(i);t.submit()}this.addAction({click:"save"},(async function(){await g();await b();if(Z()){e.getWrapper(z()).data("closedOnUnchangedSave",true);e.getInstance(z()).hide();AGN.Lib.Messages.defaultSaved();return}a.toBlob(K)}));function X(){return AGN.Lib.Form.get(z())}function Z(){const e=X().$form.serializeArray();return _.isEqual(u,e)&&d===a.toDataURL()}this.addAction({"upload:add":"replace"},(function(){E();const e=new FileReader;e.readAsDataURL(this.data.file);e.onload=function(e){z().attr("src",e.target.result);h()}}));this.addAction({click:"reset"},(function(){E();z().attr("src",o);h()}))}));AGN.Lib.Controller.new("import-modal",(function(){this.addAction({submission:"import-for-workflow"},(function(){const e=AGN.Lib.Form.get(this.el);if(!e.validate()){return}e.jqxhr().done((e=>{if(e.success){AGN.Lib.Messaging.send("workflow:mailingCreated",e.data);AGN.Lib.Modal.getInstance(this.el).hide()}else{AGN.Lib.JsonMessages(e.popups,true)}}))}))}));AGN.Lib.Controller.new("import-profile",(function(){const e=AGN.Lib.Template;const i=AGN.Lib.Modal;const n=AGN.Lib.Messages;const r=AGN.Lib.Form;const o=AGN.Lib.Select;const s=AGN.Lib.CoreInitializer;const a="agn:db-column";let l;let c;let d;let u;let h;let p;let f;let g;let m;this.addDomInitializer("import-profile-view",(function(){l=b().prop("disabled");d=this.config.availableGenderIntValues;m=this.config.isClientForceSendingActive;k(M(this.config.genderMappings));v()}));this.addAction({click:"save"},(function(){if(x(E(A()))){const e=r.get(this.el);y(e);I(e);e.submit()}}));this.addAction({change:"change-new-recipients-action"},(function(){v()}));this.addAction({change:"allMailinglists-toggle"},(function(){v()}));this.addAction({change:"change-mode"},(function(){const e=$("#allMalinglistsCheckbox");if(!e.exists()){return}if(!e.parent().is(":visible")){e.prop("checked",false).trigger("change")}}));function v(){const e=$("#import_actionnewrecipients");const t=$("#allMalinglistsCheckbox");const i=e.exists()&&e.val()>0;const n=t.exists()&&t.is(":checked");const r=i&&!m||l||n;const s=o.get(b());s.toggleDisabled(r);if(r){s.clear()}if(t.exists()){const e=i&&!m||l;t.prop("disabled",e);t.parent().toggleClass("hidden",e)}}function b(){return $("#recipient-mailinglists")}function y(e){_.each(w(),((t,i)=>{e.setValue(`genderMapping[${i}]`,t)}))}function w(){const e={};_.each(c.find("[data-gender-settings-row]"),(t=>{const i=$(t);const n=T(i);const r=C(i);if(n.length){e[r]=!e.hasOwnProperty(r)?n:e[r]+", "+n}}));return e}function C(e){const t=e.find("[data-gender-int-value]");return t.is("select")?t.val():t.text()[0]}this.addAction({click:"delete-gender-mapping"},(function(){const e=this.el.closest("[data-gender-settings-row]");if(e.is(":first-child")){const t=e.next("[data-gender-settings-row]");t.find(".form-label").removeClass("hidden")}e.remove()}));this.addAction({click:"add-gender-mapping",enterdown:"gender-enterdown"},(function(){this.event.preventDefault();if(S()){D();P("","");A().find("[data-gender-text-value]").focus()}}));function S(){const e=E(A());if(e.size<1){n.alert("import.gender.error.empty");return false}return x(e)}function A(){return c.find("[data-gender-settings-row]:last-child")}function x(e){const t=c.find("[data-gender-settings-row]").toArray();for(let i=0;i<t.length-1;i++){if(_.intersection(Array.from(e),Array.from(E($(t[i])))).length){n.alert("import.gender.error.duplicate");return false}}return true}function E(e){const t=T(e);const i=t.length?t.split(","):[];return new Set(_.without(_.map(i,_.trim),""))}function T(e){const t=e.find("[data-gender-text-value]");if(t.is("input")){return t.val().trim()}return t.text().trim()}function D(){const e=c.find('[data-action="add-gender-mapping"]');e.after(`\n        <a href='#' class='btn btn-danger btn-icon' data-action='delete-gender-mapping'>\n            <i class='icon icon-trash-alt'></i>\n        </a>\n    `);e.remove()}const M=e=>{if(!e){e=""}const t=Object.keys(e).map((t=>[t,e[t]]));t.sort(((e,t)=>e[1]-t[1]));return t};function k(e){c=$("#gender-mappings-block");_.each(e,(e=>{P(e[0],e[1])}));P("","")}function P(i,n){const r=c.find("[data-gender-settings-row]").length;const o=_.map(d,(e=>({value:e,selected:n==e,title:t(`import.gender.short.${e}`)})));c.append(e.text("gender-settings-table-row",{intValue:n,textValues:i,mappingsCount:r,genders:o}));s.run("select",c.find("[data-gender-int-value]:last-child"))}let R;function I(e){if(N()){return}_.each(V(true),((t,i)=>{e.setValueOnce("columnsMappings["+i+"].id",t.id);e.setValueOnce("columnsMappings["+i+"].fileColumn",t.fileColumn);e.setValueOnce("columnsMappings["+i+"].databaseColumn",t.databaseColumn);e.setValueOnce("columnsMappings["+i+"].mandatory",t.mandatory);e.setValueOnce("columnsMappings["+i+"].encrypted",t.encrypted);e.setValueOnce("columnsMappings["+i+"].defaultValue",t.defaultValue)}))}this.addAction({change:"change-auto-mapping"},(function(){O()}));this.addDomInitializer("import-profile-mappings",(function(){R=this.config;if(R){h=R.columnMappings;u=R.doNotImportValue;p=R.columns;g=$("#column-mappings-block");Q(h);O()}}));function O(){const e=$("#manage-fields-tile");const t=N();e.find(".tile-controls").toggleClass("hidden",t);$("[data-mapping-db-column]").prop("disabled",t);$("[data-mappings-actions]").toggleClass("hidden",t);$("#upload-mappings-btn").prop("disabled",t);$("#uploadFile").prop("disabled",t)}function N(){return $("#import_automapping").is(":checked")}this.addAction({click:"upload-column-mappings"},(function(){const e=r.get(this.el);$.ajax(AGN.url("/import-profile/mappings/read.action"),{type:"POST",dataType:"json",enctype:"multipart/form-data",processData:false,contentType:false,data:e.data()}).done((e=>{if(e.success===true){Q(L(e.data))}else{AGN.Lib.JsonMessages(e.popups)}}))}));function L(e){const t=V();const i=t.filter((e=>!e.fileColumn));const n=e.map((e=>{const i=t.find((t=>t.fileColumn===e.fileColumn));return i!==undefined?i:e}));return[].concat(n,i)}this.addAction({click:"bulk-mappings-delete"},(function(){_.each($("[data-mapping-checkbox]:checked"),(e=>q($(e))));Y()}));this.addAction({change:"change-database-column"},(function(){const e=this.el.data(a);const t=this.el.val();K(e);te(t);this.el.data(a,t);if(this.el.closest("[data-mapping-row]").is("[data-mapping-new]")){F(t)}}));this.addAction({change:"set-today-date"},(function(){$("#dateInput").toggleClass("hidden",this.el.is(":checked"));$("#daysInput").toggleClass("hidden",!this.el.is(":checked"));const e=$("#daysCount");e.on("change.offset keyup.offset",(function(t){const i=e.val();if(i){const t=parseInt(i);if(!isNaN(t)){const n=(t<0?"":"+")+t;if(n!=i){e.val(n)}}else{e.val(i.replace(/[^\d+-]/g,""))}}else if(t.type==="change"){e.val("+0")}}))}));function F(e){if(!g.parents("table").exists()){return}const t=H(e);const i=g.find("[data-mapping-defaultValue]").last();const n=i.val();const r=i.closest("td");if(r.children().first().data("type")!==t){r.empty();r.append(B(t,n));G(r,t)}}function G(e,t){if(t==="date"){AGN.runAll(e)}else if(t==="datetime"){_.each(e.find("[data-field]"),(function(e){AGN.Lib.Field.create($(e))}))}}function B(t,i){switch(t){case"date":case"datetime":return e.text("date-def-val-input",{withTime:t==="datetime",val:i});default:return e.text("text-def-val-input")}}function H(e){const t=p[e].simpleDataType.toLowerCase();switch(t){case"date":case"datetime":return t;default:return"text"}}this.addAction({click:"show-column-mappings"},(function(){const t=V();const n=i.fromTemplate("column-mappings-modal");n.on("modal:close",(()=>{g=$("#column-mappings-block");f=e.prepare("column-mapping-row")}));g=$("#extended-column-mappings-block");Q(t,true);s.run("table-cols-resizer",g.closest("table"))}));this.addAction({click:"save-extended-mappings"},(function(){if(!z(this.el)){return}const e=V(true);g=$("#column-mappings-block");Q(e);i.getInstance(this.el).hide()}));this.addAction({click:"add-column-mapping"},(function(){if(this.el.closest("table").exists()&&!z(this.el)){return}const e=this.el.closest("[data-mapping-row]");const i=j(e);if(W(i)){n.alert(t("export.columnMapping.error.duplicate"));return}e.remove();i.index=ie()+1;ne(i);J();ee()}));function z(e){const t=r.get(e);t.validatorOptions={$mappingsBlock:g};if(!t.valid()){t.handleErrors();return false}t.cleanFieldFeedback();return true}function W(e){if(e.databaseColumn===u){return false}const t=V();return t.some((t=>t.fileColumn===e.databaseColumn||t.databaseColumn===e.databaseColumn))}function V(e=false){if(!g||!g.exists()){return[]}const t=_.map(g.find("[data-mapping-row]"),(function(e){const t=$(e);return{id:Z(t,"id"),fileColumn:Z(t,"fileColumn"),databaseColumn:Z(t,"db-column"),mandatory:Z(t,"mandatory"),encrypted:Z(t,"encrypted"),defaultValue:Z(t,"defaultValue")}}));const i=t[t.length-1];if(!e||u===i.databaseColumn){t.pop()}return t}function j(e){const t=e.find("[data-mapping-mandatory]");const i=e.find("[data-mapping-encrypted]");return{id:0,fileColumn:"",databaseColumn:e.find("[data-mapping-db-column]").val(),mandatory:t.exists()?t.is(":checked"):false,encrypted:i.exists()?i.is(":checked"):false,defaultValue:U(e)}}function U(e){if(e.find("[data-action=set-today-date]").is(":checked")){const e=parseInt($("#daysCount").val()||0);const t=e===0?"":e>0?`+${e}`:e;return`CURRENT_TIMESTAMP${t}`}return e.find("[data-mapping-defaultValue]").val()}this.addAction({click:"delete-column-mapping"},(function(){q(this.el);Y()}));function Y(){$(".table-wrapper").trigger("table:updateBulkActions")}function q(e){const t=e.closest("[data-mapping-row]");const i=Z(t,"db-column");if(t.is(":first-child")){const e=t.next("[data-mapping-row]");e.find(".form-label").removeClass("hidden")}t.remove();K(i)}function K(e){if(e&&e!==u){_.each(g.find("[data-mapping-db-column]"),(t=>{X($(t),e)}))}}function X(e,t){if(e.val()!==t){o.get(e).addOption(t)}}function Z(e,t){const i=e.find(`[data-mapping-${t}]`);if(i.is(":checkbox")){return i.is(":checked")}return i.val()}function Q(t,i=false){if(!g.exists()){return}g.empty();f=e.prepare(i?"column-mapping-row-extended":"column-mapping-row");for(let e=0;e<t.length;e++){const i=t[e];i.index=e;ne(i)}J();ee();g.find("[data-mapping-db-column]").each((function(){const e=$(this);e.data(a,e.val())}))}function J(){ne({index:-1,id:0,fileColumn:"",databaseColumn:"",mandatory:false,encrypted:false,defaultValue:""})}function ee(){g.find("[data-mapping-db-column]").each((function(){te($(this).val())}))}function te(e){g.find("[data-mapping-db-column]").each((function(){const t=$(this);if(t.val()!==e&&e!==u){t.find(`[value="${e}"]`).remove()}}))}function ie(){return $("[data-mapping-row]").last().data("mapping-row")}function ne(e){e.isFirstMapping=g.find("[data-mapping-row]").length==0;const t=$(f(e));g.append(t);AGN.runAll(t)}}));AGN.Lib.Controller.newExtended("layout-builder","grid-template-base",(function(){const e=AGN.Lib.Action;const i=AGN.Lib.EndlessScroll;const n=AGN.Lib.LB.Definitions;const r=AGN.Lib.LB.ChildEditor;const o=AGN.Lib.LB.Child;const s=AGN.Lib.LB.ChildSample;const a=AGN.Lib.LB.Ui;let l;let c;let d="";window.onbeforeunload=function(e){const i=t("grid.layout.leaveQuestion");e=e||window.event;if(c&&c.isChanged()){if(e){e.returnValue=i}return i}AGN.Lib.Loader.show()};this.addDomInitializer("agn-tags-resolver",(function(){n.AGN_TAGS_CONFIG=this.config}));this.addDomInitializer("layout-builder",(function(){l=$("#grid-components-tab");if(!c){c=new AGN.Lib.LB.Editor;n.EDITOR=c}const e=this.config;e.serverSideUndoAvailable=p().exists();n.IS_BASIC_LB=e.IS_BASIC_LB;const t=function(t){const i=$.extend(e,{children:t.children});u(i);c.setChanged(true)};const i=AGN.Lib.AutoSave.initialize(`template-components/${e.templateId}`,_.bind(c.getDataForAutoSave,c),_.bind(c.checkIfDataRestoreNeeded,c),t,0);i.fail((()=>u(e)));c.controlRssBtn();$(document).on("tile:show",(function(e){const t=r.get();if(!t){return}const i=$(e.target);if(t.get$().find(i).exists()){t.notifyTabChanged(i)}}))}));function u(e){c.setup(e);new AGN.Lib.EndlessScroll(l,AGN.url(`/layoutbuilder/template/${c.getTemplateId()}/activeBuildingBlocks.action`),{loader:"#building-blocks-loader",onLoad:e=>{h(e);m()}})}function h(e,t=true){e.each((function(){const e=$(this);const i=e.find("[data-div-cache]");if(t){o.set(e,new s(i.json()))}else{o.set(e,new o(i.json()))}if(c.isEditable()){e.draggable(s.draggableOptions())}i.remove()}))}this.addAction({click:"update-available-blocks"},(function(){const e=this.el.attr("href");$.get(e).done((e=>{AGN.Lib.Confirm.create(e).done((()=>{i.get(l).load()}))}))}));this.addAction({click:"undo"},(()=>{if(!c.undo()){p().trigger("click")}}));this.addAction({click:"redo"},(()=>c.redo()));function p(){return $("#server-undo-option")}this.addAction({change:"visibleTargets"},(function(){if(c.isEditable()){c.setTargetId(parseInt(this.el.val()))}}));this.addAction({"select2:open":"visibleTargets"},(function(){if(!c.isEditable()){return}setTimeout((()=>f(this.el)),0)}));function f(e){const t=e.data("select2");const i=t.dropdown.$dropdown;const r=i.find(".select2-results__options");const o=i.css("min-width");const s=i.outerWidth();i.find(".select2-results__option").each((function(){const e=$(this);if(t.dataAdapter.item(e).id>n.ALL_RECIPIENTS){e.addClass("sortable")}}));r.sortable({items:".select2-results__option.sortable",containment:"parent",tolerance:"pointer",distance:5,opacity:.4,cursor:"move",start:function(e,t){i.css("min-width",s);t.item.removeClass("select2-results__option--selectable")},stop:function(e,t){i.css("min-width",o);t.item.addClass("select2-results__option--selectable")},update:function(e,i){const n=g(t,i.item);const r=i.item.prev();const o=i.item.next();if(r.exists()){g(t,r).after(n)}else if(o.exists()){g(t,o).before(n)}c.setLayeringByTargets(a.getAvailableTargetIds())}})}function g(e,t){return $(e.dataAdapter.item(t).element)}this.addAction({"select2-close":"visibleTargets"},(function(){if(!c.isEditable()){return}this.el.data("select2").dropdown.$dropdown.find(".select2-results__options").sortable("destroy")}));this.addAction({click:"clear-recycle-bin"},(function(){if(!c.isEditable()){return}const e=c.getRecycledChildren();if(e.length){$.ajax(this.el.attr("href"),{method:"POST",traditional:true,data:{children:e}}).done((e=>{if(e.success){c.clearRecycleBin()}}))}else{c.clearRecycleBin()}}));this.addAction({click:"deleteRow"},(function(){if(c.isEditable()){c.removeRow(AGN.Lib.LB.Row.get(this.el));m()}}));this.addAction({click:"clone"},(function(){if(c.isEditable()){const e=o.get(this.el);if(e){c.cloneChild(e)}}}));this.addAction({click:"remove"},(function(){if(c.isEditable()){const e=o.get(this.el);if(e){c.removeChild(e,true);m()}}}));this.addAction({change:"previewImageSrc",keyup:"previewImageSrc",mouseup:"previewImageSrc"},(function(){if(c.isEditable()){r.get().updateImageSrc(this.el)}}));this.addAction({change:"chooseImageFile"},(function(){if(c.isEditable()){r.get().updateImage(this.el,false)}}));this.addAction({change:"changeImageCategory"},(function(){if(c.isEditable()){const e=this.el.data("placeholder-id");r.get().syncImageCategories(e,this.el.val());r.get().updateCategory(e)}}));this.addAction({change:"chooseMobileImageFile"},(function(){if(c.isEditable()){r.get().updateImage(this.el,true)}}));this.addAction({click:"chooseImage"},(function(){if(c.isEditable()){const e=this.el.data("placeholder-id");r.get().chooseImage(e)}}));this.addAction({click:"deleteImage"},(function(){if(c.isEditable()){const e=this.el.data("placeholder-id");r.get().deleteImage(e,false)}}));this.addAction({click:"deleteMobileImage"},(function(){if(c.isEditable()){const e=this.el.data("placeholder-id");r.get().deleteImage(e,true)}}));this.addAction({click:"showMediapoolDialog"},(function(){if(c.isEditable()){const e=this.el.data("placeholder-id");r.get().showMediapoolDialog(e)}}));this.addAction({change:"set-toc-item"},(function(){if(c.isEditable()){r.get().setTocItem(this.el.is(":checked"))}}));this.addAction({change:"use-toc-item"},(function(){if(c.isEditable()){r.get().updateToC()}}));this.addAction({change:"child-target-change"},(function(){if(c.isEditable()){r.get().updateChildTarget(parseInt(this.el.val()))}}));this.addAction({change:"change-interest-group"},(function(){if(c.isEditable()){r.get().updateChildInterestGroup()}}));this.addAction({change:"savePlaceholder",enterdown:"savePlaceholder"},(function(){if(c.isEditable()){r.get().savePlaceholder(this.el.data("ph-id"))}if(this.event.type==="enterdown"){this.event.preventDefault()}}));this.addAction({submission:"child-save"},(function(){this.event.preventDefault()}));if(!window.Jodit){this.addAction({"ckeditor-save":"save-text-ph"},(function(){if(c.isEditable()){r.get().savePlaceholder(this.el.data("ph-id"))}}))}this.addAction({change:"changeContentPool"},(function(){const e=$("#grid-contentpool-tab");const t=e.find("[data-no-found-blocks-msg]");const n=parseInt(this.el.val());if(n>0){const t=i.get(e);const r=AGN.url(`/mailing/${n}/buildingBlocks.action`);if(t){t.load(r)}else{new i(e,r,{loader:"#building-blocks-loader",onLoad:e=>{h(e,false);m()}})}}else{e.find(".lb-building-blocks").empty()}a.setShown(t,n===0)}));this.addAction({keyup:"search-building-blocks"},(function(){d=this.el.val().toLowerCase();m()}));function m(){const e=$("#building-blocks-tile");e.find("[data-building-block]").each((function(){const e=$(this);const t=e.find("[data-building-block-name]").text();e.toggleClass("hidden",!t.toLowerCase().includes(d))}));e.find(".tile-body").each((function(){const e=$(this);const t=e.find("[data-building-block]:not(.hidden)").length>0;e.find("[data-no-found-blocks-msg]").toggleClass("hidden",t);if(d.length>0){e.scrollTop(0)}}))}this.addAction({submission:"save-content"},(function(){if(c.isEditable()){let e=false;if(c.isTextVersionGenerationAllowed()){const t=$("#update-text-version:checked");e=t.length>0}c.saveMadeChoice(e);c.save(e);window.removeAllEditors()}}));this.addAction({click:"import-from-content-source"},(function(){(new AGN.Lib.LB.RssImporter).import()}));e.new({"form:loadershow":"form"},(function(){a.setLoading(true)}));e.new({"form:loaderhide":"form"},(function(){a.setLoading(false)}))}));AGN.Lib.Controller.newExtended("lb-template-list","activeness-overview",(function(){this.addAction({submission:"grid-template-validation"},(function(){const e=AGN.Lib.Form.get(this.el);const i=$("#newTemplateName").val();if(i===""){e.showFieldError("newTemplateName",t("fields.required.errors.missing"));return}$.get(AGN.url("/layoutbuilder/template/validateTemplateName.action"),{newTemplateName:i}).done((i=>{if(i===true){e.submit("static")}else{e.showFieldError("newTemplateName",t("fields.name.errors.name_in_use"))}}))}))}));AGN.Lib.Controller.new("login",(function(){const e=30;const i="login-page";const n=AGN.Lib.Storage;const r=AGN.Lib.Messages;const o=AGN.Lib.Form;this.addDomInitializer("login",(function(){if(this.config.SHOW_TAB_HINT===true&&l()){r(t("defaults.info"),t("logon.info.multiple_tabs"),"info",c,false)}if(this.config.logoutMsg){r.infoText(this.config.logoutMsg)}}));function s(){return n.get(i)||{}}function a(e){n.set(i,e)}function l(){const t=s();if(t?.notificationDismissExpiration){return t.notificationDismissExpiration<=Date.now()}const i=localStorage.getItem("closedDate");if(i){const t=new Date;const n=new Date(i);n.setDate(n.getDate()+e);return t-n>0}return true}function c(){const t=s();const i=new Date;i.setDate(i.getDate()+e);t.notificationDismissExpiration=i.getTime();a(t)}function d(){return s().isFrameShown==false}this.addAction({keydown:"password-change"},(function(){if(u(this.event)){o.showFieldError$(this.el,t("login.error.capslock"))}}));this.addAction({keyup:"password-change"},(function(){if(!u(this.event)){o.get(this.el).cleanFieldFeedback(this.el)}}));function u(e){const t=e.originalEvent;return t.getModifierState&&t.getModifierState("CapsLock")}this.addAction({click:"showPasswordChangeForm"},(function(){$("#suggestion-view").addClass("hidden");$("#submission-view").removeClass("hidden")}))}));AGN.Lib.Controller.new("mailing-upload-attachment",(function(){this.addAction({change:"change-attachment-file"},(function(){e(false)}));this.addAction({change:"change-upload-file"},(function(){e(true)}));this.addAction({change:"use-pdf"},(function(){e(this.el.is(":checked"))}));function e(e){let t="";if(e){t=AGN.Lib.Select.get($("#pdfUploadId")).getSelectedText()}else{const e=$("#attachmentFile").prop("files");if(e&&e.length){t=e[0].name}}$("#attachmentName").val(t)}}));AGN.Lib.Controller.new("mailing-content-controller-new-ux",(function(){const e=t("defaults.leaveQuestion");const i=AGN.Lib.Template;const n=AGN.Lib.Messages;const r=AGN.Lib.AutoSave;const o=AGN.Lib.Storage;const s=AGN.Lib.Select;const a=AGN.Lib.Form;let l;let c;let d;let u;let h;this.addDomInitializer("mailing-content-initializer-new-ux",(function(){c=this.config;u=$("#dyn-tag-settings");d=`toggleFullScreenEditor:mailing:${c.mailingId}`;l=new D(c.dynTags,c.targetGroupList,c.interestGroupList);T();r.initialize(`mailing/${c.mailingId}/content-blocks`,p,g,f);S(parseInt($(".dyn-tag:first").val()))}));this.addDomInitializer("gridTemplate-textContent-initializer-new-ux",(function(){c=this.config;u=$("#dyn-tag-settings");c.isEditableMailing=true;l=new D(this.config.dynTags,this.config.targetGroupList,[],[]);S(parseInt($(".dyn-tag:first").val()))}));this.addInitializer("frame-content-tab",(function(){const e=o.get(d);if(e){$(`#${e}`).addClass("tile--full-screen");o.delete(d)}}));this.addAction({keyup:"search-content-blocks"},(function(){const e=this.el.val().toLowerCase();const t=$("#dyn-tag-list .list-group");t.find(".dyn-tag").each((function(){const t=$(this);const i=t.find("small").text();t.toggle(i.toLowerCase().includes(e))}));$("[data-blocks-not-found-msg]").toggle(!t.find(".dyn-tag:visible").exists());if(e.length>0){t.scrollTop(0)}}));function p(){C();return l.dynTags.filter((e=>e.modified)).map((e=>e.lightWeight))}function f(e){e.forEach((e=>{const t=l.getDynTagById(e.id);t.interestGroup=e.interestGroup;t.contentBlocks=e.contentBlocks.map((e=>new k(e)))}));h.trigger("tile:hide");S(e[0].id)}function g(e){return e.some((t=>{const i=l.getDynTagById(t.id);return m(i,e)}))}function m(e,t){return t.interestGroup!==e.interestGroup||e.contentBlocks.length!==t.contentBlocks.length||e.contentBlocks.some((e=>{const i=t.getContentBlockByTargetId(e.targetId);return!i||i.content!==e.content}))}function v(e){e.find(".dyn-tag").each(((e,t)=>y($(t))))}function b(){v($("#dyn-tag-list"));const e=$("#mobile-dyn-tags-list");e.on("select2:open",(function(){const t=$("#select2-mobile-dyn-tags-list-results")[0];const i=new MutationObserver((()=>$(t).children().each(((e,t)=>v($(t))))));i.observe(t,{childList:true});e.on("select2:close",(()=>i.disconnect()))}))}function y(e){const t=parseInt(e.val());const i=l.getDynTagById(t).isEmpty;e.find(".icon-file-alt").toggleClass("text-primary",!i)}this.addAction({"editor:change":"validate-on-change"},(function(){a.get(this.el).validateField(this.el)}));this.addAction({"editor:change":"validate-sms-content"},(function(){a.cleanFieldFeedback$(this.el);const e=AGN.Lib.Validator.get("reject-not-allowed-chars").errors(this.el,{msgKey:"error.mailing.smsSymbolsProhibited",chars:"#gsm-7-bit-chars"});_.each(e,(e=>{a.markField(this.el);a.appendFeedbackMessage(this.el,e.msg)}))}));this.addAction({click:"switch-dyn-tag",change:"switch-dyn-tag"},(function(){const e=parseInt(this.el.val());const t=u.data("conf")?.dynTag;if(w(t,e)){this.event.preventDefault();return}$(".dyn-tag").removeClass("active");this.el.addClass("active");C();S(e)}));function w(e,t){return!e?.isValid||e.id===t}function C(e){h?.trigger("dynTags:modify",e)}function S(e){const t=l.getDynTagById(e);const n=A(t);h=i.dom("content-editor-template",n);u.html(h);u.data("conf",n);AGN.Lib.Controller.init(u);AGN.runAll(u);b()}function A(e){return{dynTag:e,targetGroups:_.cloneDeep(l.targetGroups),isFullHtmlTags:e.name==="HTML-Version",showHTMLEditor:e.isHtmlDynTag,usedInSmsContent:c.smsDynNames?.length&&c.smsDynNames.includes(e.name),isEditableMailing:c.isEditableMailing,isContentGenerationAllowed:c.isContentGenerationAllowed}}function x(){return $('[data-toggle-tab="#frame-content-tab"]').hasClass("active")}this.addAction({click:"save"},(function(){if(x()){const e=this.el.closest(".tile");if(e.hasClass("tile--full-screen")){o.set(d,e.attr("id"))}h.trigger("tile:hide");AGN.Lib.Loader.prevent();return a.get($("#frame-content-tab")).submit()}if(l.dynTags.some((e=>!e.isValid))){return}C();E(this.el.data("url"))}));function E(e){const t=l.dynTags.filter((e=>e.modified));$.post({url:e,contentType:"application/json",data:JSON.stringify(t)}).done((e=>{h.trigger("tile:show");AGN.Lib.Page.render(e)}))}$(window).on("beforeunload",(function(){C({preventEditorHide:true});if(l.modified){AGN.Lib.Loader.hide();return e}}));const T=function(){const e=$("#content-source-select");if(!e){return}const t="web-storage#last-content-source";const i=o.get(t);if(i){if(s.get(e).hasOption(i.id)){e.val(i.id);e.change()}else{o.delete(t)}}};this.addAction({click:"save-content"},(function(){let e=$("#content-form");if(!a.get(e).validate()){return}a.get($("#frame-content-form")).submit().done((e=>AGN.Lib.Page.render(e)))}));class D{constructor(e,i,n){this.dynTags=Object.entries(e).map((function(e){return new M(e[1])}),[]);this.interestGroups=_.cloneDeep(n);this.interestGroups.unshift({column:"",shortname:t("mailing.default.interest_group_name")});this.targetGroups=_.cloneDeep(i);this.targetGroups.unshift({id:0,targetName:t("mailing.default.target_group_name")});this.targetGroupsMap=i.reduce((function(e,t){e[t.id]=t;return e}),{})}get modified(){return this.dynTags.some((e=>e.modified))}getDynTagById(e){return this.dynTags.filter((t=>t.id===e))[0]}setDynTag(e){const t=this.getDynTagById(e.id);const i=this.dynTags.indexOf(t);if(i>-1){this.dynTags[i]=e.clone()}}getTargetGroupById(e){return this.targetGroupsMap[e]||{id:0,targetName:t("mailing.default.target_group_name")}}}class M{constructor(e){this.id=e.id||0;this.name=e.dynName===undefined?e.name:e.dynName;this.mailingId=e.mailingID===undefined?e.mailingId:e.mailingID;this.interestGroup=this.interestGroup||"";this.interestGroup=e.interestValue===undefined?e.interestGroup:e.dynInterestGroup;if(e.contentBlocks){this.contentBlocks=e.contentBlocks.map((function(e){return new k(e)}))}else{this.contentBlocks=Object.entries(e.dynContent).map((function(e){return new k(e[1])}))}this.initState=_.cloneDeep(this.lightWeight)}get defaultContentBlock(){return{id:0,index:0,targetId:0,content:""}}get modified(){const e=!this.initState.contentBlocks.length;if(e&&this.isEmpty&&this.contentBlocks.length===1&&this.contentBlocks[0].targetId===0){return false}return!_.isEqual(this.initState,this.lightWeight)}getContentBlockByTargetId(e){return this.contentBlocks.filter((t=>t.targetId===e))[0]}getContentBlockById(e){return this.contentBlocks.filter((t=>t.uniqueId===e))[0]}createNewContentBlock(e=0){const t=new k(this.defaultContentBlock);t.index=this.contentBlocks.length;t.targetId=e;this.contentBlocks.push(t);this.recalculateIndexes();return t}changeTargetGroup(e,t){const i=this.getContentBlockById(e);i.targetId=t;return i}changeContent(e,t){const i=this.getContentBlockById(e);i.content=t||"";return i}changeOrder(e){const t=function(e){return function(t){return e.getContentBlockById(parseInt(t))}};this.contentBlocks=e.map(t(this));this.recalculateIndexes()}remove(e){const t=this.getContentBlockById(e);const i=this.contentBlocks.indexOf(t);if(i>-1){this.contentBlocks.splice(i,1);this.recalculateIndexes()}}clone(){return new M(this)}get isEmpty(){return this.contentBlocks.every((e=>!e.content))}recalculateIndexes(){this.contentBlocks.forEach(((e,t)=>e.index=t+1))}get isValid(){const e=this.collectDynTagErrors();e?.forEach((e=>n.alert(e)));return!e?.length}collectDynTagErrors(){const e=[];const t=this.contentBlocks.map((e=>e.targetId));if(new Set(t).size!==t.length){e.push("mailing.validation.target_group_duplicated")}if(t.includes(0)&&_.last(t)!==0){e.push("mailing.validation.all_recipients_not_last")}if(this.isHtmlDynTag&&this.contentBlocks.find((e=>this.#gi(e)))){e.push("fields.error.illegal_script_element")}return e}get isHtmlDynTag(){return c.htmlDynTagNames?.includes(this.name)}#gi(e){return(new DOMParser).parseFromString(e,"text/html").querySelector("script")}get lightWeight(){return{id:this.id,interestGroup:this.interestGroup,contentBlocks:this.contentBlocks.map((e=>e.lightWeight))}}}class k{constructor(e){if(typeof k.uniqueIdCounter==="undefined"){k.uniqueIdCounter=0}this.uniqueId=++k.uniqueIdCounter;this.id=e.id;this.index=e.dynOrder===undefined?e.index:e.dynOrder;this.content=e.dynContent===undefined?e.content:e.dynContent;this.targetId=e.targetID===undefined?e.targetId:e.targetID}get lightWeight(){const{id:e,content:t,targetId:i}=this;return{id:e,content:t,targetId:i}}}}));AGN.Lib.Controller.new("mailing-content-controller",(function(){const e=t("defaults.leaveQuestion");const i=AGN.Lib.Template;const n=AGN.Lib.Messages;const r=AGN.Lib.AutoSave;const o=AGN.Lib.Storage;const s=AGN.Lib.Select;const a=AGN.Lib.Form;let l;let c;let d;let u;let h;this.addDomInitializer("mailing-content-initializer",(function(){c=this.config;h=[];d=$("#dyn-tag-settings");l=new P(c.dynTags,c.targetGroupList,c.interestGroupList);k();r.initialize(`mailing/${c.mailingId}/content-blocks`,p,g,f);A($(".dyn-tag:first").data("dyn-tag-id"))}));this.addDomInitializer("gridTemplate-textContent-initializer",(function(){c=this.config;h=[];d=$("#dyn-tag-settings");c.isEditableMailing=true;l=new P(this.config.dynTags,this.config.targetGroupList,[],[]);A($(".dyn-tag:first").data("dyn-tag-id"))}));function p(){y();return l.dynTags.filter((e=>e.modified)).map((e=>e.lightWeight))}function f(e){e.forEach((e=>{const t=l.getDynTagById(e.id);t.interestGroup=e.interestGroup;t.contentBlocks=e.contentBlocks.map((e=>new I(e)))}));u.trigger("tile:hide");A(e[0].id)}function g(e){return e.some((t=>{const i=l.getDynTagById(t.id);return m(i,e)}))}function m(e,t){return t.interestGroup!==e.interestGroup||e.contentBlocks.length!==t.contentBlocks.length||e.contentBlocks.some((e=>{const i=t.getContentBlockByTargetId(e.targetId);return!i||i.content!==e.content}))}function v(){$("#dyn-tag-list .dyn-tag").each(((e,t)=>b($(t))))}function b(e){const t=e.data("dyn-tag-id");const i=l.getDynTagById(t).isEmpty;e.find(".status-badge").toggleClass("mailing.status.has-content",!i).toggleClass("mailing.status.no-content",i)}this.addAction({"editor:change":"validate-on-change"},(function(){a.get(this.el).validateField(this.el)}));this.addAction({"editor:change":"validate-sms-content"},(function(){a.cleanFieldFeedback$(this.el);const e=AGN.Lib.Validator.get("reject-not-allowed-chars").errors(this.el,{msgKey:"error.mailing.smsSymbolsProhibited",chars:"#gsm-7-bit-chars"});_.each(e,(e=>{a.markField(this.el);a.appendFeedbackMessage(this.el,e.msg)}))}));this.addAction({click:"switch-dyn-tag"},(function(){let e=d.data("conf")?.dynTag;if(e&&!e.isValid){this.event.preventDefault();return}y();A(this.el.data("dyn-tag-id"))}));function y(e){u?.trigger("dynTags:modify",e)}function w(e,t){return e.isFullHtmlTags&&$("#tab-content-wysiwyg").is(":visible")&&!h.includes(t.id)}function C(e,t){if(w(e,t)){y({preventEditorHide:true});t.markAsClean()}h.push(t.id)}function S(e,t){if(window.Jodit){C(e,t)}else{CKEDITOR.instances["content"]?.on("instanceReady",(()=>{setTimeout((()=>{C(e,t)}),0)}))}}function A(e){const t=l.getDynTagById(e);const n=x(t);u=i.dom("content-editor-template",n);d.html(u);d.data("conf",n);AGN.Lib.Controller.init(d);AGN.runAll(d);v();S(n,t)}function x(e){return{dynTag:e,targetGroups:_.cloneDeep(l.targetGroups),isFullHtmlTags:e.name==="HTML-Version",showHTMLEditor:e.isHtmlDynTag,usedInSmsContent:c.smsDynNames?.length&&c.smsDynNames.includes(e.name),isEditableMailing:c.isEditableMailing,isContentGenerationAllowed:c.isContentGenerationAllowed}}this.addAction({click:"save"},(function(){if(l.dynTags.some((e=>!e.isValid))){return}if(T()){AGN.Lib.Confirm.from("mailing-ai-text-generation-apply-question",{dynTagName:d.data("conf")?.dynTag?.name}).then(D);return}y();M(this.el.data("url"))}));function E(){return $("[data-ai-result]").val()?.trim()}function T(){const e=$("#tab-content-ai-text-generation");return e.is(":visible")&&E()}function D(){u.trigger("apply-ai-text-on-save",[E()]);M($('[data-action="save"]').data("url"))}function M(e){const t=_.cloneDeep(l.dynTags.filter((e=>e.modified)));t.forEach((e=>e.contentBlocks.forEach((t=>{if(!t.content){e.remove(t.uniqueId)}}))));$.post({url:e,contentType:"application/json",data:JSON.stringify(t)}).done((e=>{u.trigger("tile:show");AGN.Lib.Page.render(e)}))}this.addAction({click:"edit-content-modal"},(function(){y();if(l.modified&&!window.confirm(e)){return}const t=c.isEmailMediaTypeActive||c.isMailingGrid;AGN.Lib.Modal.fromTemplate("modal-editor",{showText:t,showHtml:t&&c.mailFormat!==0&&!c.isMailingGrid,showSms:c.isSmsMediaTypeActive})}));$(window).on("beforeunload",(function(){y({preventEditorHide:true});if(l.modified){AGN.Lib.Loader.hide();return e}}));const k=function(){const e=$("#content-source-select");if(!e){return}const t="web-storage#last-content-source";const i=o.get(t);if(i){if(s.get(e).hasOption(i.id)){e.val(i.id);e.change()}else{o.delete(t)}}};this.addAction({click:"save-content"},(function(){let e=$("#content-form");if(!a.get(e).validate()){return}a.get($("#frame-content-form")).submit().done((e=>AGN.Lib.Page.render(e)))}));class P{constructor(e,i,n){this.dynTags=Object.entries(e).map((function(e){return new R(e[1])}),[]);this.interestGroups=_.cloneDeep(n);this.interestGroups.unshift({column:"",shortname:t("mailing.default.interest_group_name")});this.targetGroups=_.cloneDeep(i);this.targetGroups.unshift({id:0,targetName:t("mailing.default.target_group_name")});this.targetGroupsMap=i.reduce((function(e,t){e[t.id]=t;return e}),{})}get modified(){return this.dynTags.some((e=>e.modified))}markAsClean(){this.dynTags.forEach((e=>e.markAsClean()))}getDynTagById(e){return this.dynTags.filter((t=>t.id===e))[0]}setDynTag(e){const t=this.getDynTagById(e.id);const i=this.dynTags.indexOf(t);if(i>-1){this.dynTags[i]=e.clone()}}getTargetGroupById(e){return this.targetGroupsMap[e]||{id:0,targetName:t("mailing.default.target_group_name")}}}class R{constructor(e){this.id=e.id||0;this.name=e.dynName===undefined?e.name:e.dynName;this.mailingId=e.mailingID===undefined?e.mailingId:e.mailingID;this.interestGroup=this.interestGroup||"";this.interestGroup=e.interestValue===undefined?e.interestGroup:e.dynInterestGroup;if(e.contentBlocks){this.contentBlocks=e.contentBlocks.map((function(e){return new I(e)}))}else{this.contentBlocks=Object.entries(e.dynContent).map((function(e){return new I(e[1])}))}this.markAsClean()}get defaultContentBlock(){return{id:0,index:0,targetId:0,content:""}}get modified(){const e=!this.initState.contentBlocks.length;if(e&&this.isEmpty&&this.contentBlocks.length===1&&this.contentBlocks[0].targetId===0){return false}return!_.isEqual(this.initState,this.lightWeight)}markAsClean(){this.initState=_.cloneDeep(this.lightWeight)}getContentBlockByTargetId(e){return this.contentBlocks.filter((t=>t.targetId===e))[0]}getContentBlockById(e){return this.contentBlocks.filter((t=>t.uniqueId===e))[0]}createNewContentBlock(e=0){const t=new I(this.defaultContentBlock);t.index=this.contentBlocks.length;t.targetId=e;this.contentBlocks.push(t);this.recalculateIndexes();return t}changeTargetGroup(e,t){const i=this.getContentBlockById(e);i.targetId=t;return i}changeContent(e,t){const i=this.getContentBlockById(e);i.content=t||"";return i}changeOrder(e){const t=function(e){return function(t){return e.getContentBlockById(parseInt(t))}};this.contentBlocks=e.map(t(this));this.recalculateIndexes()}remove(e){const t=this.getContentBlockById(e);const i=this.contentBlocks.indexOf(t);if(i>-1){this.contentBlocks.splice(i,1);this.recalculateIndexes()}}clone(){return new R(this)}get isEmpty(){return this.contentBlocks.every((e=>!e.content))}recalculateIndexes(){this.contentBlocks.forEach(((e,t)=>e.index=t+1))}get isValid(){const e=this.collectDynTagErrors();e?.forEach((e=>n.alert(e)));return!e?.length}collectDynTagErrors(){const e=[];const t=this.contentBlocks.map((e=>e.targetId));if(new Set(t).size!==t.length){e.push("mailing.validation.target_group_duplicated")}if(t.includes(0)&&_.last(t)!==0){e.push("mailing.validation.all_recipients_not_last")}if(this.isHtmlDynTag&&this.contentBlocks.find((e=>this.#gi(e)))){e.push("fields.error.illegal_script_element")}return e}get isHtmlDynTag(){return c.htmlDynTagNames?.includes(this.name)}#gi(e){return(new DOMParser).parseFromString(e,"text/html").querySelector("script")}get lightWeight(){return{id:this.id,interestGroup:this.interestGroup,contentBlocks:this.contentBlocks.map((e=>e.lightWeight))}}}class I{constructor(e){if(typeof I.uniqueIdCounter==="undefined"){I.uniqueIdCounter=0}this.uniqueId=++I.uniqueIdCounter;this.id=e.id;this.index=e.dynOrder===undefined?e.index:e.dynOrder;this.content=e.dynContent===undefined?e.content:e.dynContent;this.targetId=e.targetID===undefined?e.targetId:e.targetID}get lightWeight(){const{id:e,content:t,targetId:i}=this;return{id:e,content:t,targetId:i}}}}));AGN.Lib.Controller.new("mailing-content-editor-controller-new-ux",(function(){const e=AGN.Lib.Template;const t=AGN.Lib.Select;let i;let n;this.addDomInitializer("mailing-content-editor-initializer-new-ux",(function(e){const t=$("#dyn-tag-settings");const a=t.data("conf");i=a.dynTag;n=undefined;s(i.contentBlocks[0]||i.createNewContentBlock());r();o(e)}));this.addAction({change:"switch-content-block"},(function(){if(!i.isValid){return}const e=i.getContentBlockById(parseInt(this.el.val()));s(e)}));this.addAction({change:"change-interest-group"},(e=>i.interestGroup=$(e).val()));function r(){AGN.Lib.CoreInitializer.run("select",$('[data-action="change-interest-group"]').val(i.interestGroup))}function o(e){e.on("dynTags:modify",(function(t,i){h();if(!i?.preventEditorHide){e.trigger("tile:hide")}}))}function s(e){h();l(e===undefined?"":e.content);n=e;a()}function a(){const r=e.dom("mailing-content-select-template",{dynTag:i});t.get($('[data-action="switch-content-block"]')).replaceWith(r);$("#content-block-index").text(n.index);if(n){t.get(r).selectValue(n.uniqueId)}}function l(e){if($("#editor-switch").prop("checked")===true){d(e)}else{c(e)}}function c(e){if(window.Jodit){Jodit.instances["content"].value=e}else{const t=CKEDITOR.instances["content"];if(t.status==="ready"){t.setData(e)}else{t.on("instanceReady",(function(t){t.editor.setData(e)}))}}}function d(e){const t=ace.edit("contentEditor");if(AGN.Lib.Helpers.isDarkTheme()){t.setTheme("ace/theme/idle_fingers")}t.setValue(e,1)}function u(){const e=$("#tab-content-wysiwyg");const t=$("#contentEditor");if(e.is(":visible")){if(window.Jodit){return Jodit.instances["content"].value}else{return CKEDITOR.instances["content"].getData()}}if(t.is(":visible")){return ace.edit("contentEditor").getValue()}}function h(){if(!n){return}const e=u();if(e!==undefined){i.changeContent(n.uniqueId,e)}}const p=".target-row";const f={scroll:false,handle:".target-row-handle",cursor:"move",items:`${p}:not(:has(option[value="0"][selected]))`,stop:w};let g;this.addDomInitializer("manage-targets-modal-initializer",(function(){g=$("#targets-order").sortable(f);i.contentBlocks.forEach((e=>b(e)));w()}));this.addAction({click:"delete-content-block"},(function(){const e=$(this.el).closest(p);const t=x(e);if(v(t)){n=undefined;s(m(e))}i.remove(t);e.remove();w()}));this.addAction({click:"add-content-block"},T);function m(e){const t=e.next(p).length?e.next(p):e.prev(p);t.find(".input-group-text").addClass("active").removeClass("disabled");return i.getContentBlockById(x(t))}function v(e){return n.uniqueId===e}function b(t){const i=e.dom("mailing-content-target-template",{...t,isCurrent:v(t.uniqueId)});g.append(i);y(i);AGN.Lib.CoreInitializer.run("select",i);return i}function y(e){e.find("select").on("change, change.select2",(function(){const e=$(this).val();$(this).find("option").each(((t,i)=>$(i).attr("selected",$(i).val()===e?"selected":null)))}))}function w(){S();a();E();A()}function C(e){const t=i.getContentBlockById(parseInt(e.attr("id"))).index;e.find(".input-group-text").text(t)}function S(){const e=g.find(p).toArray().map((e=>$(e).attr("id")));i.changeOrder(e);g.find(p).each(((e,t)=>C($(t))))}function A(){g.find('select option[value="0"]:selected').closest(p).appendTo(g);S()}function x(e){return parseInt(e.closest(p).attr("id"))}this.addAction({change:"change-target"},(function(){i.changeTargetGroup(x(this.el),parseInt(this.el.val()));E();A();a()}));function E(){const e=g.find("select");const i=e.map(((e,t)=>$(t).val()))?.toArray();_.each(e,(e=>t.get($(e)).disableOptions(i)));return i}function T(){const e=i.createNewContentBlock();const n=E();const r=b(e).find("select");t.get(r).disableOptions(n,true);e.targetId=parseInt(r.val());A();a();return e}}));AGN.Lib.Controller.new("mailing-content-editor-controller",(function(){const e=AGN.Lib.Template;const t=AGN.Lib.Select;const i=".mailingContentNamespace";const n=".target-row";const r="content_entry_";const o='[data-action="edit-content-for-target"]';let s;let a;let l;let c;this.addDomInitializer("mailing-content-editor-initializer",(function(e){const t=$("#dyn-tag-settings").data("conf");s=t.dynTag;a=$("#targets-order");l=$("#target_groups");c=$("#interest_groups");f();y(s);w(s.interestGroup);d();u(e)}));function d(){$("#enlargeable-settings").on("enlarged",(function(e){$(e.target).closest(".modal-body").css("overflow","hidden")}))}function u(e){e.on("dynTags:modify",(function(t,i){v();if(!i?.preventEditorHide){e.trigger("tile:hide")}}));e.on("apply-ai-text-on-save",(function(e,t){const i=_();if(i>0){s.changeContent(i,t)}}))}function h(){a.find(o).removeClass("disabled");let e=$(`${n}.selected`);e=e.exists()?e:$(`${n}:first`);e.find(o).addClass("disabled")}this.addAction({click:"edit-content-for-target"},(function(){if(!s.isValid){return}const e=$(this.el);const t=x(e);const i=s.getContentBlockById(t);E(i)}));this.addAction({click:"deleteContentEntry"},(function(){this.event.stopPropagation();var e=$(this.el).parent();var t=x(e);var i=e.next(n);i=i.length>0?i:e.prev(n);s.remove(t);e.remove();if(s.contentBlocks.length>0){var r=x(i);var o=s.getContentBlockById(r);E(o)}else{E()}D()}));this.addAction({click:"addDynContent"},P);function p(e){const t=e.sortable("toArray");const i=t.map((function(e){return e.replace(r,"")}));s.changeOrder(i)}function f(){a.sortable({delay:10,scroll:true,scrollSensitivity:30,scrollSpeed:5,handle:".target-row-handle",cursor:"move",items:n,stop:e=>p($(e.target))})}var g=function(e,t){const i=$("#tab-content-wysiwyg");const n=$("#contentEditor");const r=$("#tab-content-ai-text-generation");if(i.is(":visible")){if(window.Jodit){Jodit.instances["content"].value=e}else{var o=CKEDITOR.instances["content"];if(o.status==="ready"){o.setData(e)}else{o.on("instanceReady",(function(t){t.editor.setData(e)}))}}}if(n.is(":visible")){var s;if(t===false){s=1}else{s=null}var a=ace.edit("contentEditor");if(AGN.Lib.Helpers.isDarkTheme()){a.setTheme("ace/theme/idle_fingers")}a.setValue(e,s)}if(r.is(":visible")){$("#multi-editor").find(".js-wysiwyg").val(e)}};function m(){const e=$("#tab-content-wysiwyg");const t=$("#contentEditor");const i=$("#tab-content-ai-text-generation");if(i.is(":visible")){return e.exists()?$("#content").val():ace.edit("contentEditor").getValue()}if(e.is(":visible")){if(window.Jodit){return Jodit.instances["content"].value}else{return CKEDITOR.instances["content"].getData()}}if(t.is(":visible")){return ace.edit("contentEditor").getValue()}}var v=function(){const e=_();if(e>0){const t=m();if(t!==undefined){s.changeContent(e,t)}}};function b(t,i){const n=e.dom("mailing-target-content-template",{targetId:t,id:r+i.uniqueId});AGN.Lib.CoreInitializer.run("select",n);return n}function y(e){e.contentBlocks.reverse().forEach((function(e){a.prepend(b(e.targetId,e))}));if(s.contentBlocks.length>0){E(s.contentBlocks[0],false)}else{P()}D();k();M()}function w(e){c.val(e).trigger("change");c.off("change"+i);c.on("change"+i,(e=>s.interestGroup=$(e.target).val()))}var C=function(){return a.find(n+".selected")};var _=function(){var e=C();if(e.length>0){return x(e)}};var S=function(e){a.children().removeClass("selected");const t=A(e,a);t.addClass("selected")};var A=function(e,t){t=t?t:$(document);return t.find("#"+r+e)};function x(e){return parseInt(e.closest(n).attr("id").replace(r,""))}this.addAction({change:"change-target"},(function(){s.changeTargetGroup(x(this.el),parseInt(this.el.val()));D()}));function E(e,t){v();if(e!==undefined){S(e.uniqueId);g(e.content,t)}else{g("")}h();k()}function T(){return $("#targets-order").find("select").map(((e,t)=>$(t).val()))?.toArray()}function D(){const e=T();$("#targets-order-box").find("select").each((function(i,n){t.get($(n)).disableOptions(e)}));t.get(l).disableOptions(e,true);t.get(l).selectFirstValue()}function M(){a.find('select option[value="0"]:selected').closest(n).appendTo(a);p(a)}function k(){a.animate({scrollTop:a[0].scrollHeight},100)}function P(){const e=parseInt(l.val());const t=s.createNewContentBlock(e);if(!a.find(n).exists()){t.content=m()}a.append(b(e,t));E(t);k();M();D()}}));AGN.Lib.Controller.new("mailing-images",(function(){const e=AGN.Lib.Modal;const t=AGN.Lib.Template;const i=AGN.Lib.Form;this.addAction({"upload:add":"image-upload"},(function(){const i=this.data.file;const s=this.data.index;let a=$("#components-upload-modal");if(!a.exists()){a=e.fromTemplate("userform-images-upload-modal-template");a.on("modal:close",o)}const l=a.find("#components-uploads-container");const c=t.dom("mailing-upload-image",{index:s,fileName:i.name,previewUrl:r(i),isArchive:n(i)==="zip"});l.append(c);AGN.runAll(c)}));function n(e){if(e.name&&e.name.includes(".")){return e.name.substring(e.name.lastIndexOf(".")+1).toLowerCase()}return""}function r(e){if(/^image/.test(e.type)){return URL.createObjectURL(e)}return""}function o(){$("#upload-files").val("");$("#dropzone").trigger("upload:reset")}this.addAction({click:"upload-images"},(function(){const t=i.get(this.el);const n=e.getWrapper(this.el);t.$form.on("submitted",(()=>{if(document.contains(n[0])){n.css("opacity",1)}}));t.submit();n.css("opacity",0)}))}));AGN.Lib.Controller.new("mailing-overview",(function(){const e=AGN.Lib.Form;const i=AGN.Lib.DateFormat;const n=[{key:"isgrid",text:t("mailing.default.grid"),class:"mailing.status.emc"},{key:"isCampaignManager",text:t("workflow.campaign"),class:"mailing.status.cm"}];this.addDomInitializer("mailing-overview",(function(){o(e.getWrapper(this.el));r(this.config.badgesFilters)}));function r(t){if(!t){t=[]}const i=$("#status-filter");const r=AGN.Lib.Select.get(i);_.each(n,(e=>{i.append(`<option value="${e.key}" data-badge-class="${e.class}">${e.text}</option>`);if(t.includes(e.key)){r.selectOption(e.key)}}));const o=e.get(i);o.get$().on("form:submit",(()=>{let e=0;_.each(n,(t=>{if(r.isOptionSelected(t.key)){o.setValueOnce(`filterBadges[${e++}]`,t.key);r.$findOption(t.key).attr("disabled",true)}}))}));o.get$().on("submitted",(()=>{n.forEach((e=>{r.$findOption(e.key).attr("disabled",false)}))}))}function o(e){e.off("form:submit");e.off("submitted")}this.addAction({"table-column-manager:add":"update-columns"},(function(){const t=e.get(this.el);t.setValueOnce("selectedFields",this.data.columns);t.setValueOnce("inEditColumnsMode",true);t.submit()}));this.addAction({"table-column-manager:apply":"update-columns"},(function(){const e=this.data.columns;$.ajax({type:"POST",url:AGN.url("/mailing/setSelectedFields.action"),traditional:true,data:{selectedFields:e}}).done((t=>{if(t.success){AGN.Lib.WebStorage.extend("mailing-overview",{fields:e})}AGN.Lib.JsonMessages(t.popups)}))}));this.addAction({click:"send-date-filter-period"},(function(){d(this.el);s(l(),c());a($("input[name='sendDatePeriod']:checked").length>0)}));this.addAction({click:"reset-send-date-filter"},(function(){s("","");$('input[name="sendDatePeriod"]:checked').removeAttr("checked");a(false)}));function s(e,t){$("#filterSendDateBegin").val(e).trigger("change");$("#filterSendDateEnd").val(t).trigger("change")}function a(e){$("#filterSendDateBegin").get(0).toggleAttribute("readonly",e);$("#filterSendDateEnd").get(0).toggleAttribute("readonly",e)}function l(){const e=$("input[name='sendDatePeriod']:checked").val();if(!e){return""}const t=new Date;t.setDate(t.getDate()-e);return i.format(t,window.adminDateFormat)}function c(){return $("input[name='sendDatePeriod']:checked").length?i.format(new Date,window.adminDateFormat):""}function d(e){if(e.is(":checked")){const t=`input:checkbox[name="${e.attr("name")}"]`;$(t).prop("checked",false);e.prop("checked",true)}else{e.prop("checked",false)}}}));AGN.Lib.Controller.new("mailing-params",(function(){let e=$("#mailingSettingsForm");let t;let i=$("#mailingParamsTable");this.addDomInitializer("mailing-params",(function(){t=this.config.params;e=$("#mailingSettingsForm");e.dirty("setAsClean");e.dirty("refreshEvents");i.on("input-table:row-removed",n)}));function n(){if(o()&&!r()){e.dirty("setAsClean")}}function r(){const e=t.map((function(e){const t=_.omit(e,"mailingID","mailingInfoID","changeDate");Object.keys(t).forEach((function(e){if(t[e]===null){t[e]=""}}));return t}));return JSON.stringify(e)!==JSON.stringify(i.data("table").collect())}function o(){return e.dirty("showDirtyFields").filter(((e,t)=>!$(t).closest("#mailingParamsTable").length)).length===0}}));AGN.Lib.Controller.new("mailing-predelivery",(function(){var e={aol:"aolonelinespam",yahoo:"yahoospam",gmailnew:"gmailnewspam",ol2003:"ol2003spam"};this.addAction({change:"adjustSpamProvider"},(function(){var t=$(this.el);var i=e[t.attr("name")];if(!i){return}var n=$('[name="'+i+'"]');if(t.prop("checked")){n.prop("disabled",false)}else{n.prop("disabled",true);n.prop("checked",false)}}));this.addInitializer("readjustSpamProviders",(function(){_.each(e,(function(e,t){var i=$("[name="+t+"]");if(i.length===0){return}var n=$('[name="'+e+'"]');if(i.prop("checked")){n.prop("disabled",false)}else{n.prop("disabled",true);n.prop("checked",false)}}))}));function t(e,t){var i=e.closest(".list-group").find('input[type="checkbox"]:enabled');i.prop("checked",t);i.trigger("change")}this.addAction({click:"toggle-checkboxes-on"},(function(){t($(this.el),true)}));this.addAction({click:"toggle-checkboxes-off"},(function(){t($(this.el),false)}))}));AGN.Lib.Controller.new("mailing-preview",(function(){const e=AGN.Lib.Form;const t=AGN.Lib.Messages;const i=AGN.Lib.Helpers;const n=AGN.Lib.Select;let r;this.addDomInitializer("mailing-preview",(function(){r=this.config.MAILING_ID;const t=e.get(this.el);t.initFields();t.initValidator();c();if(a(this.config,t)){o()}}));function o(){$('[name="previewFrame"]').hide().on("load",s).show()}function s(){$(this.contentDocument||this.contentWindow.document).find("img").filter(((e,t)=>$(t).attr("src")?.includes("mediapool_element"))).each((function(){const e=$(this).attr("src");$(this).attr("src",`${e}${e.includes("?")?"&":"?"}forMobile=true`)}))}function a(e,t){return e.MOBILE_SIZES.includes(parseInt(t.getValue("size")))}this.addAction({change:"refresh-preview",click:"update-preview"},(function(){l()}));this.addAction({change:"change-stored-header-data"},(function(){l()}));this.addAction({change:"change-header-data"},(function(){l()}));function l(){const t=e.get($("#preview-form"));t.submit()}function c(){d();h()}this.addAction({click:"change-preview-customer-options"},(function(){h()}));function d(){const e=u();if(!e.exists()){return}const t=e.val().length<=0;$("#personalized-test-run-container").toggleClass("hidden",t)}function u(){return $("#personalized-test-recipients")}function h(){const e=!v()&&p();$('[data-action="add-to-personalized-test-run"]').toggle(!!e)}function p(){const e=f();return n.get(u()).getSelectedValue().indexOf(e)===-1}function f(){if(m()){return $("#customerEmail").val()}return $('[name="customerATID"]').find(":selected").data("email")}function g(){return $('[name="modeType"]').val()}function m(){return g()==="MANUAL"}function v(){return g()==="TARGET_GROUP"}function b(){return new Promise((function(e,n){const o=f();if(!i.isValidEmail(o)){t.alert("defaults.invalidEmail");return}$.get(AGN.url(`/mailing/preview/${r}/isRecipient.action`),{email:o}).done((t=>{if(t.success){e(o)}else{AGN.Lib.JsonMessages(t.popups,true);n()}}))}))}this.addAction({input:"change-personalized-test-recipients",change:"change-personalized-test-recipients"},(function(){c()}));this.addAction({click:"add-to-personalized-test-run"},(function(){b().then((e=>{const t=u();const i=n.get(t);if(!i.hasOption(e)){i.addOption(e)}i.selectOptions(_.union(t.val(),[e]));c()}))}));this.addAction({click:"personalized-test-run"},(function(){const e=u();const t=e.val();$.post(AGN.url(`/mailing/send/${r}/personalized-test.action`),{mailingTestRecipients:t}).done((t=>{if(t&&t.success===true){e.val([]);AGN.Lib.CoreInitializer.run("select",e);d()}AGN.Lib.JsonMessages(t.popups,true)}))}));this.addAction({click:"download-attachment"},(function(){const e=$("<a>").attr("href",$("#attachments").val());$("body").append(e);e[0].click();e.remove()}))}));AGN.Lib.Controller.new("mailing-priorities",(function(){const e=AGN.Lib.Template;const t=AGN.Lib.Helpers;const i=AGN.Lib.DateFormat;const n=".mailing-priority";const r=".mailing-priority-container";let o;let s;let a;let l;let c;let d;let u;const h=()=>{o=$("#ordered-area");s=$("#unordered-area");l=$("#priorityCount");a=$("#save-btn")};function p(){return _.reduce(_.keys(u.mailingsMap),(function(e,t){return e<t?e:t}))}const f=()=>{const e=$("#date-picker");const t=_.keys(u.mailingsMap).sort();if(t.length){if(!e.datepicker("getDate")){e.datepicker("setDate",i.parse(p()))}}e.trigger("change")};this.addDomInitializer("mailing-priorities",(function(){u=this.config;h();const e=$(".tiles-container");$(r).sortable({handle:".mailing-priority__drag-btn",opacity:.4,connectWith:r,items:n,helper:"clone",containment:e,appendTo:document.body,update:function(){if(this.id===o.attr("id")){m();S()}},out:function(){g($(this),false)},over:function(e,t){g($(e.target),false);g($(this),true)},start:function(){g($(this),true)},stop:function(){g($(this),false)}});f()}));this.addAction({change:"priorityCount"},S);this.addAction({input:"priorityCount"},(function(){const e=parseFloat(this.el.val());const t=!isNaN(e)&&e>=0?e:0;this.el.val(t)}));this.addAction({change:"change-date"},(function(){const e=this.el.datepicker("getDate");if(e){v(C([e.getFullYear(),e.getMonth(),e.getDate()]))}else{v()}}));this.addAction({click:"save"},(function(){const e=AGN.Lib.Form.get(this.el);e.setValueOnce("prioritizedIds",A());e.submit()}));const g=(e,t)=>{e.closest(r).toggleClass("highlighted",t)};function m(){let e=1;let t=10;o.children(n).each((function(){const i=$(this);let n=0;if(i.data("type")==u.DATE_BASED_TYPE){n=t;e=t;t+=10}else{n=e;if(e>t){t=Math.round(e/10)*10}}e++;i.find(".mailing-priority__order").text(`${n}.`)}))}function v(e){const t=b(e);$(n).remove();w(t);S(true)}function b(e){let t=(u.mailingsMap[e]||[]).filter((e=>e.mailingType!==u.DATE_BASED_TYPE||e.priority>0));const i=t.map((e=>e.id));const n=y(i);return _.union(t,n,"id").sort(((e,t)=>e.priority>t.priority?1:-1))}const y=e=>{const t=[];const i=_.clone(e);_.keys(u.mailingsMap).forEach((e=>{u.mailingsMap[e].forEach((e=>{if(e.mailingType==u.DATE_BASED_TYPE&&!i.includes(e.id)){i.push(_.clone(e).id);t.push(e)}}))}));return t};function w(t){if(t&&t.length){t.forEach((function(t){if(t.thumbnailId){t.thumbnailUrl=u.thumbnailLinkPattern.replace("__thumbnailId__",t.thumbnailId)}else{t.thumbnailUrl=u.noPreviewUrl}const i=e.dom("draggable-mailing-priority-entry",t);if(t.priority){o.append(i)}else{s.append(i)}AGN.runAll(i)}))}}function C(e){return`${t.pad(e[0],4)}-${t.pad(parseInt(e[1])+1,2)}-${t.pad(e[2],2)}`}function S(e){const t=A(";");const i=l.val();if(c==null&&d==null||e){c=t;d=i;if(i>0){a.prop("disabled",true)}else{const e=x();l.val(e);a.prop("disabled",!e)}}else{a.prop("disabled",t==c&&i==d)}}function A(e){const t=[];o.children(n).each((function(){const e=$(this).data("id");if(e>0){t.push(e)}}));return e?t.join(e):t}function x(){return o.children(n).filter((function(){return $(this).data("id")>0})).length}}));AGN.Lib.Controller.new("mailing-recipients",(function(){const e=AGN.Lib.Form;this.addAction({"table-column-manager:add":"update-columns"},(function(){const t=e.get(this.el);t.setValueOnce("selectedFields",this.data.columns);t.setValueOnce("inEditColumnsMode",true);t.submit()}));this.addAction({"table-column-manager:apply":"update-columns"},(function(){const e=this.data.columns;$.ajax({type:"POST",url:AGN.url("/mailing/recipients/setSelectedFields.action"),traditional:true,data:{selectedFields:e}}).done((t=>{if(t.success){AGN.Lib.WebStorage.extend("mailing-recipient-overview",{fields:e})}AGN.Lib.JsonMessages(t.popups)}))}))}));AGN.Lib.Controller.new("reference-content-settings",(function(){let e;let t=false;let i=false;let n=[];let r;function o(){const e=$("#referenceTableSelect");const t=e.children("option:selected");$("#keyColumnText").val(t.exists()?t.data("key-column"):"")}function s(e,t){return AGN.Lib.Template.dom("mailing-reference-content-item",{name:a(e),value:t,disabled:!i})}function a(e){return"Item"+e}function l(t){const i=s(d().length+1,t);e.append(i)}function c(e){if(!i){l("");return}_.each(e,(e=>l(e)))}function d(){return $("#reference-content-items .row")}this.addDomInitializer("reference-content-settings",(function(){e=$("#reference-content-items");r=$("#mailingSettingsForm");o();t=this.config.isAvailable;i=this.config.isEnabled;c(this.config.items);n=d();u();r.dirty("setAsClean");r.dirty("refreshEvents")}));function u(){$("#referenceContentEnabled").on("change",(function(){$("#referenceTableSelect").prop("disabled",!$(this).prop("checked"))}))}this.addAction({change:"select-reference-table"},(function(){o()}));this.addAction({click:"add-reference-content-item"},(function(){h();l("");r.dirty("setAsDirty")}));function h(){const t=e.find('[data-action="add-reference-content-item"]');t.after(_.template(AGN.Opt.Templates["mailing-reference-content-delete-btn"])({disabled:!i}));t.remove()}function p(){return n.length!==d().length||n.some((e=>!d().includes(e)))}function f(){d().each(((e,t)=>{$(t).find(".input-group-text").text(a(e+1))}))}this.addAction({click:"delete-reference-content-item"},(function(){this.el.closest(".row").remove();f();if(!p()){r.dirty("setAsDirty")}}))}));AGN.Lib.Controller.new("mailing-send",(function(){const e=AGN.Lib.Form,t=AGN.Lib.Modal,i=AGN.Lib.Confirm,n=AGN.Lib.Page,r=AGN.Lib.Template,o=AGN.Lib.Messages;const s="RECIPIENT";const a="TARGET";const l="SEND_TO_SELF";let c;let d;let u;const h={hideGreenMarks:function(){const e=$(".transmission-mark");e.parent().find("button").removeClass("hidden");e.remove()},updateWorkStatus:function(e,t){const i=$(r.text("mailing-workstatus-icon",{workstatus:e,tooltip:t}));$("#workstatus-icon").replaceWith(i);AGN.Lib.CoreInitializer.run("tooltip",i)}};this.addDomInitializer("test-mailing",(function(){c=$("#test-recipients-table");g(this.config.testRecipients);d=JSON.parse(this.config?this.config.approvalOptions:"[]");p();$("#get-approval-switch").on("change",(function(){p()}));f();$("#test-run-options").on("change",(function(){f()}))}));function p(){const e=$("#get-approval-switch").prop("checked");const t=$("#test-run-options");t.find("option:not([value='"+d.join("']):not([value='")+"']").attr("disabled",e);if(e&&d.indexOf(t.val())===-1){t.val(t.find("option:not(:disabled):first").val()).trigger("change")}}function f(){const e=$("#test-run-options");if(!e.length){return}const t=e.val()==s;const i=e.val()==a;const n=e.val()==l;const r=!t||!$("#save-target-toggle").prop("checked");c.parent().toggleClass("hidden",!t);$("#adminSendButton").parent().toggleClass("hidden",t||i||n);$("#testTargetSaveButton").parent().toggleClass("hidden",r);$("#test-run-target-name-input").toggleClass("hidden",r);$("#testRunOptionSelect").prop("disabled",!i);c.find("input").prop("disabled",!t)}this.addDomInitializer("send-mailing",(function(){u=this.config;const e=window.adminLocale==="en-US"?",":".";_.each($(".commaSplitInput"),(t=>{const i=$(t);const n=i.val().replace(/\B(?=(\d{3})+(?!\d))/g,e);i.val(n)}));A();if(u.approximateMaxDeliverySize>u.errorSizeThreshold){o.warnText(r.text("delivery-size-error-msg"))}}));this.addAction({enterdown:"send-mailing"},(function(){this.event.preventDefault();$("#send-btn").trigger("click")}));this.addAction({click:"check-links"},(function(){$.post(u.urls.CHECK_LINKS).done((e=>AGN.Lib.RenderMessages($(e))))}));this.addAction({click:"send-world"},(function(){if(u.approximateMaxDeliverySize>u.errorSizeThreshold){o.alertText(r.text("delivery-size-error-msg"));return}const t=()=>{const t=e.get($("#delivery-settings-tile"));t.setActionOnce(AGN.url("/mailing/send/confirm-send-world.action"));t.submit("confirm").done((e=>{i.create(e).done((e=>t.updateHtml(e)))}))};if(u.approximateMaxDeliverySize>u.warningSizeThreshold){i.from("warning-mailing-size-modal").done(t);return}t()}));const g=function(e){if(!e.length){const e=r.dom("test-recipient-row",{value:"",newRow:true,sent:false});c.append(e);AGN.runAll(e);return}for(let t=0;t<e.length;t++){const i=t===e.length-1;const n=r.dom("test-recipient-row",{value:e[t],newRow:i,sent:true});c.append(n);AGN.runAll(n)}};this.addAction({change:"save-interval-settings"},(function(){const t=e.get(this.el);t.setActionOnce(AGN.url("/mailing/send/interval.action"));t.submit()}));this.addAction({click:"resume-sending"},(function(){const e=this.el;const t=e.data("link");$.post(t).done((t=>{n.render(t);e.parent().remove()}))}));this.addDomInitializer("status-mail-recipients",(function(){const e=this.config.recipients||"";const t=$("#status-emails-block");e.split(" ").filter((e=>e)).forEach((e=>t.append(r.text("status-mail-recipient-row",{email:e,newRow:false}))));t.append(r.text("status-mail-recipient-row",{email:"",newRow:true}))}));this.addAction({click:"status-mail-recipient-row-delete"},(function(){const e=this.el.closest("[data-status-mail-recipient-row]");const t=e.data("mailing-id");e.remove();v(t,m())}));this.addAction({click:"status-mail-recipient-row-add",enterdown:"status-mail-recipient-change"},(function(){this.event.preventDefault();const e=this.el.closest("[data-status-mail-recipient-row]");const t=e.find("input");const i=t.val();if(i){v(e.data("mailing-id"),m(true),(()=>{e.before(r.text("status-mail-recipient-row",{email:i,newRow:false}));t.val("")}))}}));const m=(e=false)=>{let t=$("[data-status-mail-recipient-row]").find("input");if(!e){t=t.not(":last")}return t.map((function(){return $(this).val().trim()})).get().join(" ")};const v=(e,t,i)=>{$.post(AGN.url(`/mailing/send/${e}/save-statusmail-recipients.action`),{emails:t}).done((e=>{if(e.success&&i){i()}AGN.Lib.JsonMessages(e.popups)})).fail((()=>o.defaultError()))};this.addDomInitializer("delivery-status-view",(function(){if(!this.config.isTransmissionRunning){h.hideGreenMarks()}const e=this.config.workStatus;const t=this.config.workStatusTooltip;if(e&&t){h.updateWorkStatus(e,t)}if(this.config.deliveryStat){const e=_.extend(this.config.deliveryStat,this.config.deliveryStatExtraInfo);b(e)}}));function b(e){const t=r.dom("delivery-status-buttons",e);$(".delivery-status-action").remove();$(".header__actions").append(t)}this.addAction({click:"start-delivery"},(function(){if($("#test-run-options").val()==s){const e=$('input[name="mailingTestRecipients"]').get().some((e=>$(e).val().trim()));if(!e){o.alert("error.enterEmailAddresses");return}}$("#adminSendButton").addClass("disabled");$("#testSendButton").addClass("disabled");const t=e.get(this.el);t.setActionOnce(this.el.data("url"));t.submit()}));this.addAction({click:"add-test-recipient",enterdown:"new-test-recipient"},(function(){this.event.preventDefault();const e=this.el.closest("[data-test-recipient-row]");const t=this.el.is("input")?this.el:e.find("input");const i=r.dom("test-recipient-row",{value:t.val()||"",newRow:false,sent:false});e.before(i);t.val("");AGN.runAll(i);t.focus();y(false)}));this.addAction({click:"remove-test-recipient"},(function(){const e=this.el.closest("[data-test-recipient-row]");e.remove();y(false)}));this.addAction({input:"new-test-recipient"},(function(){y(false)}));this.addAction({input:"edit-test-recipient",enterdown:"edit-test-recipient"},(function(){this.event.preventDefault();y(false)}));this.addAction({input:"edit-test-run-target-name"},(function(){y(false)}));this.addAction({enterdown:"edit-test-run-target-name"},(function(){this.event.preventDefault()}));function y(e){const t=$("#testTargetSaveButton");const i=t.find("i");if(e){i.hide()}t.toggleClass("btn-primary",!e,500);t.toggleClass("btn-success",e,500);if(e){t.css({cursor:"not-allowed","pointer-events":"none"})}else{t.css({cursor:"","pointer-events":""})}i.toggleClass("icon-save",!e);i.toggleClass("icon-check",e);i.show(500)}this.addAction({click:"save-target-for-test-run"},(function(){if(!w()){return}C()}));function w(){const t=$('input[name="targetName"]');const i=e.get(t);const n=AGN.Lib.Validator.get("length").errors(t,{min:3,required:true});if(!n.length){i.cleanFieldFeedback();return true}n.forEach((e=>i.showFieldError$(t,e.msg)));return false}function C(){$.ajax({type:"POST",url:AGN.url("/mailing/send/test/saveTarget.action"),data:{mailingTestRecipients:S(),targetName:$('input[name="targetName"]').val().trim()}}).done((e=>{if(e.success===true){y(true)}else{AGN.Lib.JsonMessages(e.popups)}}))}function S(){return $('input[name="mailingTestRecipients"]').map((function(){return this.value.trim()})).get().filter((e=>e))}this.addAction({focusout:"max-recipients-change"},(function(){A()}));function A(){const e=$("#maxRecipients");if(e.exists()&&e.val()==="0"){e.val("")}}this.addAction({change:"prioritization-toggle"},(function(){x($(this.el),"isPrioritizationDisallowed")}));this.addAction({change:"encrypted-send-toggle"},(function(){x($(this.el),"isEncryptedSend")}));this.addAction({change:"sendStatusOnErrorOnly-toggle"},(function(){x($(this.el),"statusOnErrorEnabled")}));function x(e,t){const i=e.prop("checked");e.prop("disabled",true);const n=()=>{e.prop("checked",!i);o.defaultError()};const r={};r[t]=e.is(":checked");$.ajax({type:"POST",url:e.data("url"),data:r}).done((e=>{if(e&&e.success){o.success("defaults.saved")}else{n()}})).fail(n).always((()=>e.prop("disabled",false)))}}));AGN.Lib.Controller.new("mailing-separate-statistics",(function(){this.addAction({"table-column-manager:add":"update-columns"},(function(){const e=AGN.Lib.Form.get(this.el);e.setValueOnce("additionalFields",this.data.columns);e.setValueOnce("inEditColumnsMode",true);e.submit()}));this.addAction({"table-column-manager:apply":"update-columns"},(function(){const e=this.data.columns;$.ajax({type:"POST",url:AGN.url("/statistics/mailing/setSelectedFields.action"),traditional:true,data:{selectedFields:e}}).done((t=>{if(t.success){AGN.Lib.WebStorage.extend("mailing-separate-stats-overview",{fields:e})}AGN.Lib.JsonMessages(t.popups)}))}))}));AGN.Lib.Controller.new("mailing-settings-base-view",(function(){const e=AGN.Lib.Messaging;const i=AGN.Lib.Messages;const n=AGN.Lib.Form;const r={11:"mailing.default.sender_and_reply_emails_changed",10:"mailing.default.sender_email_changed","01":"mailing.default.reply_email_changed"};let o;let s=[];e.subscribe("mailing-settings:updateMailinglistForFollowUp",(()=>{c()}));this.addDomInitializer("mailing-settings-base-view",(function(){o=this.config.selectedRemovedMailinglistId;s=this.config.mailinglists;if(o){a(this.el)}l();if(this.config.isFollowUpMailing){c()}}));function a(e){n.get(e).showFieldError("mailinglistId",t("fields.mailinglist.errors.removed"),true)}this.addAction({change:"save-mailing-list-id"},(function(){const t=this.el.select2("val");e.send("mailing-settings:mailinglistChanged",t);if(o){AGN.Lib.Select.get(this.el).$findOption(o).remove();n.get($(this.el)).cleanFieldError("mailinglistId");o=null}const a=s.find((e=>e.id==t));if(a){const e=$("#emailSenderMail");const t=$("#emailReplyEmail");if(!e.exists()&&!t.exists()){return}const n=a.senderEmail&&e.val()!==a.senderEmail;const o=a.replyEmail&&t.val()!==a.replyEmail;if(n){e.val(a.senderEmail).trigger("change")}if(o){t.val(a.replyEmail)}const s=_.result(r,`${+!!n}${+!!o}`);if(s){i.info(s)}}}));this.addAction({"change input":"change-mailing-base-info"},(function(){l()}));function l(){const e=$("#generateBtn");if(!e.exists()){return}const t=n.get(e).valid();e.toggleClass("btn-grey-out",!t);AGN.Lib.Tooltip.toggleState(e,!t)}this.addAction({change:"set-parent-mail-mailinglist"},(function(){c()}));function c(){const e=$("#lightWeightMailingList").val();const t=$(`#parentmailing-${e}-mailinglist`).attr("data-mailing-list-id");const i=AGN.Lib.Select.get($("#settingsGeneralMailingList"));i.selectOption(t);i.setReadonly(true)}this.addAction({click:"generate-mailing-for-workflow"},(function(){const t=n.get(this.el);if(!t.validate()){return}t.jqxhr().done((t=>{if(t.success){e.send("workflow:mailingCreated",t.data);AGN.Lib.Modal.getInstance(this.el).hide()}else{AGN.Lib.JsonMessages(t.popups,true)}}))}))}));AGN.Lib.Controller.newExtended("mailing-settings-view","mailing-settings-base-view",(function(){const e=AGN.Lib.Form;const i=AGN.Lib.Select;const n=AGN.Lib.Modal;const r=AGN.Lib.Messages;const o=AGN.Lib.Messaging;const s=["#settingsGeneralMailingList","#lightWeightMailingList","#assignTargetGroups","#targetGroupIds","#altgIds","#followUpType"];let a;let l=false;let c=[];let d;let u=0;let h;let p=false;let f;o.subscribe("mailing-settings:mailinglistChanged",(e=>{if(!T($("#settingsGeneralMailType").val())){u=e}}));this.addDomInitializer("mailing-settings-view",(function(){a=this.config;v();f=$("#mailingSettingsForm");c=$("#targetGroupIds").val()||[];S(c.length>1);d=i.get($("#settingsGeneralMailingList"));d.setReadonly(false);if(u>0){u=d.selectOption(u);d.$el.trigger("change")}k(a.mailingType);C();b();G();if(a.isNewUx){g()}}));function g(){m().sortable({delay:10,scroll:true,scrollSensitivity:30,scrollSpeed:5,handle:".mediatype-order-handle",cursor:"move",items:".mediatype-item",stop:()=>_.each($(".mediatype-item .input-group span:first-child"),((e,t)=>$(e).text(t+1)))})}function m(){return $("#mediatypes-list")}function v(){$(s.join(",")).on("change",(function(){l=true;if(!h){return}const e=x();if(!_.isEqual(e,h)){h=null;E("?")}}))}function b(){const e=y()===a.TARGET_MODE_OR;$("#target-mode-description").text(t(`mailing.default.targetmode_${e?"or":"and"}`))}function y(){return $("[name='targetMode']:checked").val()}function w(){const e=f.dirty("showDirtyFields");if(e.length>0){const t=e.filter((function(e,t){const i=$(t);return!(i.prop("readonly")===true||i.is(":disabled")||i.prop("type")==="hidden")}));return t.length===0}else{return false}}function C(){f.dirty("destroy");f.dirty({preventLeaving:true,leavingMessage:t("grid.layout.leaveQuestion"),onDirty:function(){if(w()&&!p){f.dirty("setAsClean")}}});if(w()&&!p){f.dirty("setAsClean")}p=false}window.onbeforeunload=function(){if(!f.dirty("isDirty")===true){AGN.Lib.Loader.show()}};function S(e){$("#target-mode-box").toggle(e);$("#regular-targets-box").toggleClass("border rounded p-2",e)}this.addAction({change:"selectTargetGroups"},(function(){const e=this.el.val()||[];if(e.length>1&&c.length<=1){$("#target-mode-and-btn").prop("checked",true)}S(e.length>1);c=e}));function A(e){const t={};e.forEach((e=>{const i=$(e);if(i.exists()&&i.is(":visible")&&!i.prop("disabled")){const e=i.prop("name");if(e){t[e]=i.val()}}}));return t}this.addAction({click:"calculateRecipients"},(function(){if(a){h=x();$.ajax({type:"POST",url:AGN.url("/mailing/ajax/"+a.mailingId+"/calculateRecipients.action"),traditional:true,data:h}).always((function(e){if(e&&e.success===true){E(e.count)}else{E("?");r.defaultError()}}))}}));function x(){return $.extend(A(s),{changeMailing:l,targetMode:y(),isWmSplit:a.wmSplit})}function E(e){$("#number-of-recipients").val(e)}this.addAction({change:"change-general-mailing-type"},(function(){const e=this;const t=e.el.val();d.setReadonly(false);if(u>0){d.selectOption(u)}k(t)}));this.addAction({change:"change-target-mode"},b);function T(e){return a.FOLLOWUP_MAILING_TYPE==e}function D(e){return a.ACTIONBASED_MAILING_TYPE==e}function M(e){return a.DATEBASED_MAILING_TYPE==e}function k(e){let t=false;if(a.followUpAllowed){if(T(e)){o.send("mailing-settings:updateMailinglistForFollowUp");t=true}P(t,"#followUpControls");$("#followUpControls").all(":input").each(((e,i)=>$(i).prop("disabled",!t)))}const i=M(e);P(i,"#mailing-bcc-recipients");$("#mailing-bcc-recipients").prop("disabled",!i);const n=D(e)?a.campaignEnableTargetGroups:true;P(n,"#regular-targets-box, #calculate-recipients-box")}function P(e,t){const i=$(t);if(i){if(e){i.removeClass("hidden");i.show()}else{i.hide()}}}this.addAction({change:"change-mediatype"},(function(){const e=$(this.el);const t=R(e);N(e,t);const i=$("#email-mediatype-switch, #sms-mediatype-switch").is(":checked");$("#edit-frame-content-btn").toggle(i)}));function R(e){return e.find("input:checkbox:first").is(":checked")}function I(){const e=m();const t=O();e.empty();t.forEach((function(t){e.append(t)}))}function O(){return $("#mediatypes-list li").toArray().sort((function(e,t){const i=$(e);const n=$(t);if(!R(i)&&R(n))return 1;if(R(i)&&!R(n))return-1;return i.data("priority")-n.data("priority")}))}function N(e,t){I();L(e,t)}function L(e,t){if(t){e.find(".form-switch").after(H())}else{e.find(".list-group-item-controls").remove()}G()}function F(){const e=m();e.find("a").css("opacity","1");e.find(".icon-angle-up:first, .icon-angle-down:last").css("opacity","0")}function G(){F();if(a.isNewUx){B();U()}e.get(m()).initFields()}function B(){const e=m().find(".form-check-input").toArray().every((e=>e.checked));m().find(".mediatype-order-handle").toggle(e)}function H(){return`\n          <div class='list-group-item-controls'>\n              <a href='#' class='icon icon-angle-down fs-2' data-action='prioritise-mediatype-down'></a>\n              <a href='#' class='icon icon-angle-up fs-2' data-action='prioritise-mediatype-up'></a>\n          </div>`}this.addAction({click:"prioritise-mediatype-up"},(function(){j($(this.el).closest("li"),true)}));this.addAction({click:"prioritise-mediatype-down"},(function(){j($(this.el).closest("li"),false)}));function z(e){const t=e.prev();const i=e.attr("data-priority");e.attr("data-priority",t.attr("data-priority"));t.attr("data-priority",i);t.before(e)}function W(e){const t=e.next();const i=e.attr("data-priority");e.attr("data-priority",t.attr("data-priority"));t.attr("data-priority",i);t.after(e)}function V(e,t){return t&&e.prev().length||!t&&e.next().length&&R(e.next())}function j(e,t){p=true;if(V(e,t)){if(t){if(a.isNewUx){e.prev().before(e)}else{z(e)}}else{if(a.isNewUx){e.next().after(e)}else{W(e)}}f.dirty("setAsDirty");G()}}function U(){_.each($(".mediatype-item .input-group span:first-child"),((e,t)=>$(e).text(t+1)))}this.addAction({submission:"save"},Y);function Y(){const t=e.get(f);q(t);K(t);t.submit()}function q(e){if(a.isNewUx){_.each($("#mediatypes-list li"),(function(t,i){e.setValueOnce($(t).data("mediatype")+"Mediatype.priority",i)}))}else{$("#mediatypes-list li").toArray().forEach((function(t){const i=$(t);const n=i.data("mediatype");e.setValueOnce(n+"Mediatype.priority",i.data("priority"))}))}}function K(e){const t=$("#mailingParamsTable");if(!t.exists()){return}_.each(t.data("table").collect(),(function(t,i){e.setValueOnce("params["+i+"].name",t.name);e.setValueOnce("params["+i+"].value",t.value);e.setValueOnce("params["+i+"].description",t.description)}))}this.addAction({click:"edit-content-modal"},(function(){const e=$("#email-mediatype-switch").prop("checked")||a.isMailingGrid;const t=e&&!$("#emailMailFormat").val()==0&&!a.isMailingGrid;const i=$("#sms-mediatype-switch").prop("checked");AGN.Lib.Modal.fromTemplate("modal-editor",{showText:e,showHtml:t,showSms:i})}));this.addAction({click:"save-content"},(function(){let t=$("#content-form");if(!e.get(t).validate()){return}n.getInstance(t).hide();Y()}));this.addAction({"editor:change":"validate-on-change"},(function(){e.get(this.el).validateField(this.el)}))}));AGN.Lib.Controller.new("mailing-stat",(function(){let e;this.addDomInitializer("mailing-stat",(function(){e=this.config}));this.addAction({change:"change-mailing"},(t=>{const i=AGN.Lib.Form.get(t);const n=parseInt(t.val());i.setActionOnce(AGN.url(n?`/statistics/mailing/${n}/view.action?statWorkflowId=${e.statWorkflowId}`:`/workflow/${e.statWorkflowId}/statistic.action`));i.submit()}))}));AGN.Lib.Controller.new("mailing-styles",(function(){const e=AGN.Lib.Form;this.addAction({click:"update-preview",submission:"updatePreview"},(function(){const t=e.get($("#layoutPreviewForm"));e.get(this.el).get$().find('input[name^="styles["]').each((function(){const e=$(this);t.setValue(e.attr("name"),e.val())}));t.submit()}))}));AGN.Lib.Controller.new("mailinglist-list",(function(){this.addAction({click:"bulk-delete"},(function(){const i=t(this.el);if(!i){return}const n=i.getSelectedRows();const r=n.map((e=>e.id));e(r,AGN.url("/mailinglist/confirmBulkDelete.action")).done((e=>{if(typeof e=="object"){const t=e.data;const r=n.filter((e=>t.includes(e.id)));i.applyTransaction({remove:r});AGN.Lib.JsonMessages(e.popups,true)}else{AGN.Lib.RenderMessages($(e))}}))}));function e(e,t){const i=$.Deferred();if(e&&e.length){const n=$.ajax(t,{method:"GET",traditional:true,data:{bulkIds:e}}).done((e=>{if(e){AGN.Lib.RenderMessages($(e))}})).fail((()=>i.reject()));AGN.Lib.Confirm.request(n).then(i.resolve,i.reject)}else{i.reject();AGN.Lib.Messages.alert("messages.error.nothing_selected")}return i.promise()}function t(e){return AGN.Lib.Table.get(e)?.api}}));AGN.Lib.Controller.new("mailloop-reply-view",(function(){this.addDomInitializer("mailloop-reply-view",(function(){const e=AGN.Lib.Template.dom("mailoop-reply-new-status-badge");$(`[data-reply-status-badge="${this.config.id}"]`).replaceWith(e);AGN.Lib.CoreInitializer.run("tooltip",e)}))}));AGN.Lib.Controller.new("reference-table-import",(function(){const e=AGN.Lib.Form;this.addDomInitializer("ref-table-import-mapping",(function(){new n(this.el)}));this.addAction({click:"create-mapping"},(function(){const t=e.get(this.el);$.ajax(this.el.attr("href"),{type:"POST",dataType:"json",enctype:"multipart/form-data",processData:false,contentType:false,data:t.data()}).done((e=>{if(e.success===true){i().update(e.data)}AGN.Lib.JsonMessages(e.popups)}))}));this.addAction({click:"import-data"},(function(){const i=e.get(this.el);i.setActionOnce(this.el.attr("href"));t(i)}));this.addAction({click:"add-contant-value"},(function(){$.post(this.el.attr("href")).done((e=>{if(e.success){const e=i();const t=e.collect(false);t.push({sourceColumn:null,targetColumn:"",mandatory:false,format:"",defaultValue:"",encrypted:false});e.update(t)}AGN.Lib.JsonMessages(e.popups,true)}))}));this.addAction({submission:"save"},(function(){t(e.get(this.el))}));function t(e){_.each(i().collect(false),((t,i)=>{e.setValueOnce(`mappings[${i}].sourceColumn`,t.sourceColumn);e.setValueOnce(`mappings[${i}].targetColumn`,t.targetColumn);e.setValueOnce(`mappings[${i}].mandatory`,t.mandatory);e.setValueOnce(`mappings[${i}].encrypted`,t.encrypted);e.setValueOnce(`mappings[${i}].defaultValue`,t.defaultValue);e.setValueOnce(`mappings[${i}].format`,t.format)}));e.submit()}function i(){return $("#mappingsTable").data("table")}class n extends AGN.Lib.InputTable{generateRowBtn(e){if(e?.sourceColumn){return""}return super.generateRowBtn(e)}}}));AGN.Lib.Controller.new("manage-tables-viewfield",(function(){var e="true";this.addAction({change:"typeFieldChangeAction"},(function(){var t=$("#nullable");if(this.el.val()==="DATE"||this.el.val()==="DATETIME"){e=t.val();t.val("true")}else{t.val(e)}}))}));AGN.Lib.Controller.new("mediapool-overview",(function(){this.addDomInitializer("mediapool-edit",(function(){$('[id$="-editor-modal"]').on("modal:close",(e=>{if(!$(e.target).data("closedOnUnchangedSave")){AGN.Lib.Messages.warn("defaults.changesNotSaved")}$(e.target).removeData("closedOnUnchangedSave")}))}));this.addAction({click:"change-category-bulk"},(function(){const e=[...$('input[name="bulkIds"]:checked')].map((e=>e.value));if(!e?.length){AGN.Lib.Messages.alert("messages.error.nothing_selected");return}AGN.Lib.Modal.fromTemplate("category-select-modal",{bulkIds:e})}));this.addAction({"upload:add":"replace-file"},(function(){const e=new FileReader;e.readAsDataURL(this.data.file);e.onload=function(e){$("#mediapool-img-preview").attr("src",e.target.result)}}));this.addAction({click:"edit-webp"},(function(){const t=this.el.data("modal-set");$.ajax({url:t.link,method:"GET",xhrFields:{responseType:"arraybuffer"},success:i=>{if(e(new Uint8Array(i))){AGN.Lib.Modal.fromTemplate("file-editor-modal",t)}else{AGN.Lib.Modal.fromTemplate("image-editor-modal",t)}},error:()=>AGN.Lib.Modal.fromTemplate("file-editor-modal",t)})}));function e(e){const t=e[0]===82&&e[1]===73&&e[2]===70&&e[3]===70&&e[8]===87&&e[9]===69&&e[10]===66&&e[11]===80;if(!t){return false}const i=e.findIndex(((t,i)=>e[i]===65&&e[i+1]===78&&e[i+2]===73&&e[i+3]===77));return i>-1}}));AGN.Lib.Controller.new("mediapool-upload",(function(){const e=AGN.Lib.Template;const t=AGN.Lib.Form;const i="data-mediapool-upload";const n=`[${i}]`;const r={};let o={};let s;let a;let l;this.addDomInitializer("mediapool-upload",(function(){o=this.config.fileExtensions;s=$("#components-uploads-container");a=$("#upload-reset-btn");l=$("#dropzone");l.on("upload:reset",(function(){s.empty();v(true);b(false)}))}));this.addAction({"upload:add":"mediapool-upload"},(function(){const i=this.data.file;const n=this.data.index;v(false);b(true);p(i.name,(r=>{const o=c(i);const a=e.dom("mediapool-upload-item",{index:n,itemId:r.data?r.data.id:0,fileName:i.name,previewUrl:d(i),typeCode:u(o),isArchive:o==="zip"});s.append(a);t.get(s).initFields();AGN.runAll(a)}),true)}));function c(e){if(e.name&&e.name.includes(".")){return e.name.substring(e.name.lastIndexOf(".")+1).toLowerCase()}return""}function d(e){if(/^image/.test(e.type)){return URL.createObjectURL(e)}return""}function u(e){if(e){for(const t in o){if(o[t].includes(e)){return t}}}return null}this.addAction({click:"upload-files"},(function(){const e=t.get(this.el);let i=e.validate();g().each((function(){const e=$(this);const t=e.find('[data-action="overwrite-data"]');const n=e.find('[name$=".fileName"]').val();const r=t.is(":checked");p(n,(o=>{if(o.data&&!r){i=false;t.data("item-id",o.data.id);$(`[name='uploads[${m(e)}].id']`).val(o.data.id);y(e,true);AGN.Lib.Messages.warn("fields.mediapool.warnings.overwrite_inactive",n)}else if(!r){y(e,false)}}))}));if(i){e.submit()}}));function h(){AGN.Lib.CoreInitializer.run("slider",$("#upload-files-tile"))}function p(e,t,i=false){const n=e=>{if(e.data){r[e.data.id]=e.data}t(e);h()};$.ajax(AGN.url("/mediapool/findElementWithName.action"),{data:{fileName:e},async:i,type:"GET",success:n})}this.addAction({change:"overwrite-data"},(function(){const e=$(this.el);const t=e.closest(".tile");const i=e.data("item-id");let n="";let o="";if(e.is(":checked")&&r[i]){const e=r[i];n=e.title;o=String(e.category.categoryId)}t.find('[name$=".title"]').val(n);t.find('[name$=".categoryId"]').val(o).trigger("change")}));this.addAction({change:"change-mobile-base"},(function(){const e=this.el;const t=AGN.Lib.Helpers.objFromString(e.data("config"));const i=AGN.Lib.Select.get(e).getSelectedValue();const n=i&&i.length>0;const r=n?t.mobilePrefix+i:t.initialValue;const o=e.closest(".tile").find('[name$=".fileName"]');o.val(r).prop("readonly",n)}));this.addAction({click:"remove-upload"},(function(){const e=m(this.el);const i=t.get(this.el);AGN.Lib.Upload.get(l).removeSelection(e);this.el.closest(".tile").remove();f(e);i.initFields();if(!g().exists()){v(true);b(false)}h()}));function f(e){const t=g().filter((function(){const t=m($(this));return parseInt(t)>parseInt(e)}));t.each((function(){const e=$(this);const t=m(e)-1;e.find('[name*="uploads["]').each((function(){const e=$(this);e.attr("name",e.attr("name").replace(/uploads\[\d+]/g,`uploads[${t}]`))}));e.attr(i,t)}))}function g(){return $(n)}function m(e){const t=e.is(n)?e:e.closest(n);return t.attr(i)}function v(e){s.prev().toggleClass("hidden",!e)}function b(e){a.parent().toggleClass("hidden",!e)}function y(e,t){e.find("[data-duplication-error-block]").toggleClass("hidden",!t);e.find("[data-overwrite-block]").toggleClass("hidden",!t)}}));AGN.Lib.Controller.new("navbar",(function(){this.addAction({mouseenter:"expand-navbar-tab",mouseleave:"expand-navbar-tab"},(function(){this.el.toggleClass("hovered")}))}));AGN.Lib.Controller.new("news-editor",(function(){var e=AGN.Lib.Template;var t=["de","en"];var i;this.addDomInitializer("news-editor-init",(function(){i=0;var e=$('input[name="newsId"]').val();var t=$(".existent-news");if(t&&t.length>0&&e==0){$(t).each((function(){var e=$(this).find(".existent-news-language").val();var t=$(this).find(".existent-news-title").val();var i=$(this).find(".existent-news-content").val();n(e,t,i);o();r();$(this).remove()}))}else if(e==0){n(c(),"","");o();r()}}));this.addAction({click:"addNewsContent"},(function(){n(c(),"","");o();r()}));this.addAction({click:"removeNewsContent"},(function(){var e=$(this.el).closest(".l-news-content-block");$(e).remove();o();r();s()}));this.addAction({change:"changeLanguage"},(function(){s()}));function n(t,n,r){if(t!=""){var o=e.dom("news-content-template-row",{lang:t,index:i,title:n,content:r});o.appendTo("#news-content-editor");AGN.runAll(o);s();i++}}function r(){const e=l();const i=$("#news-content-editor > .l-news-content-block").last().data("index");$("#add-news-"+i).toggle(t.length!=e.length)}function o(){const e=$("#news-content-editor > .l-news-content-block");$("button[id^='add-news-']").hide();const t=$(e).first().data("index");$("#delete-news-"+t).toggle(e.length!=1)}function s(){var e=a();$("#news-content-editor > .l-news-content-block").find("select.news-language").each((function(){$("option",this).not(":selected").remove();var t=$(this);$.each(e,(function(e,i){$(t).append($("<option>",{value:i,text:i}))}))}))}function a(){var e=[];var i=l();$.each(t,(function(t,n){if($.inArray(n,i)==-1){e.push(n)}}));return e}function l(){var e=$("#news-content-editor > .l-news-content-block").find("select.news-language").find("option:selected");return e.map((function(){return $(this).val()})).toArray()}function c(){var e=l();var i="";if(e.length==0){i=t[0]}else{$.each(t,(function(t,n){if(e.indexOf(n)<0){i=n;return false}}))}return i}}));AGN.Lib.Controller.new("notification-global-stat",(function(){let e;let t;let i;this.addDomInitializer("notification-global-stat",(function(){e=$("#global-status-chart");t=$("#global-browser-chart");i=$("#global-progress-chart");n();r();o()}));this.addAction({change:"update-progress-chart"},(function(){o()}));function n(){$.get(AGN.url("/push/ajaxGetGlobalStatusStatistic.action")).done((t=>{if(t&&t.warning&&t.warning.length>0){AGN.Lib.JsonMessages(t,true)}else{new Chart(e[0].getContext("2d"),{type:"bar",data:{labels:Object.keys(t),datasets:[{data:Object.values(t),backgroundColor:e.css("--chart-blue-color"),categoryPercentage:1.08,minBarLength:2}]},options:{indexAxis:"x",layout:{padding:{top:20,right:0}},scales:{x:{ticks:{autoSkip:false,maxRotation:90}},y:{display:false}},plugins:{legend:{display:false},datalabels:{anchor:"end",align:"end",offset:-5}}}})}}))}function r(){$.get(AGN.url("/push/ajaxGetGlobalBrowserStatistic.action")).done((e=>{if(e&&(e.warning&&e.warning.length>0)){AGN.Lib.JsonMessages(e,true)}else{const i=[];const n=[];for(const t in e){i.push(t);n.push(c(e[t]*100,1))}const r=[t.css("--chart-darkest-blue-color"),t.css("--chart-dark-blue-color"),t.css("--chart-blue-color"),t.css("--chart-light-blue-color"),t.css("--chart-light-cyan-color")];new Chart(t[0].getContext("2d"),{type:"agnDoughnut",data:{labels:i,datasets:[{data:n,backgroundColor:r,borderWidth:0}]}})}}))}function o(){if(!i.exists()||!s()){return}Chart.getChart(i)?.destroy();const e=[];const t=[];const n=[];const r=[];$.get(AGN.url("/push/ajaxGetGlobalProgressStatistic.action"),{dateMode:$("#periodType").val(),selectMonth:$("#selectMonth").val(),selectYear:$("#selectYear").val(),startDay:$("#startDay").val(),endDay:$("#endDay").val()}).done((o=>{if(o&&o.warning&&o.warning.length>0){AGN.Lib.JsonMessages(o,true)}else{for(const i in o){const s=o[i];for(const o in s){if(i==0&&o!="time"){if(t.length==0){t.push(o)}else if(n.length==0){n.push(o)}else if(r.length==0){r.push(o)}}const a=s[o];if(o=="time"){e.push(a)}else if(o==t[0]){t.push(a)}else if(o==n[0]){n.push(a)}else if(o==r[0]){r.push(a)}}}const s=l(e.length);new Chart(i[0].getContext("2d"),{type:"line",data:{labels:e,datasets:[{label:t[0],data:t.slice(1),borderColor:i.css("--chart-darkest-blue-color"),backgroundColor:i.css("--chart-darkest-blue-color"),pointRadius:s},{label:n[0],data:n.slice(1),borderColor:i.css("--chart-blue-color"),backgroundColor:i.css("--chart-blue-color"),pointRadius:s},{label:r[0],data:r.slice(1),borderColor:i.css("--chart-light-cyan-color"),backgroundColor:i.css("--chart-light-cyan-color"),pointRadius:s}]},options:{scales:{x:{ticks:{maxRotation:0}},y:{min:0}},interaction:{mode:"index",intersect:false},stacked:false,plugins:{legend:{position:"bottom"},datalabels:{display:false}}}})}}))}function s(){if($("#periodType").val()!=="RANGE"){return true}const e=$("#startDay");const t=$("#endDay");if(!e.val()||!t.val()||a(e).getTime()>a(t).getTime()){AGN.Lib.Messages.alert("error.statistic.period_format");return false}return true}function a(e){const t=e.datepicker("option","dateFormat");return $.datepicker.parseDate(t,e.val())}function l(e){if(e<60){return 5}if(e<100){return 4}return 3}function c(e,t){return parseFloat(e).toFixed(t)*1}}));AGN.Lib.Controller.new("notification-list",(function(){this.addAction({click:"send-update-notification"},(function(){$.post(this.el.attr("href")).done((e=>AGN.Lib.JsonMessages(e.popups,true)))}))}));AGN.Lib.Controller.new("notification-schedule",(function(){let e;let t;let i;let n;this.addDomInitializer("notification-schedule",(function(){const o=this.el.closest(".tile");e=o.find("#startDate");t=o.find("#endDate");i=o.find("#startTime");n=o.find("#endTime");e.on("change",r);i.on("change",r);t.on("change",u);n.on("change",u)}));function r(){const e=s();t.unbind("change");if(e){const t=d(e);l(e,t);a(t);c(i.val())}else{l(0,null);a(null);c(null)}t.on("change",u)}function o(){const e=s();if(e){l(e,d(e))}else{l(0,null)}}function s(){return e.datepicker("getDate")}function a(e){t.datepicker("setDate",e)}function l(e,i){t.datepicker("option",{minDate:e,maxDate:i})}function c(e){n.val(e)}function d(e){const t=new Date(e);t.setDate(t.getDate()+28);return t}function u(){t.unbind("change");n.unbind("change");e.unbind("change");e.on("change",o);i.unbind("change");i.on("change",o)}}));AGN.Lib.Controller.new("notification-settings",(function(){let e;let t;this.addDomInitializer("notification-settings",(function(){t=this.config.previewDisabledMsg;if(Notification.permission=="denied"){n()}}));this.addAction({click:"preview"},(function(){if(Notification.permission!="granted"){Notification.requestPermission((e=>{if(e=="granted"){i()}else if(e=="denied"){n()}}))}else{i()}}));function i(){const e=new Notification($("#pushTitle").val(),{body:$("#pushContent").val(),icon:$("#pushIcon").val()});e.onclick=e=>{e.preventDefault();window.open($("#pushLink").val(),"_blank")}}function n(){const e=$("#preview-option");e.parent().attr("data-tooltip",t);e.addClass("disabled");AGN.runAll(e.parent())}this.addDomInitializer("notification-stats",(function(){e=$(".chart-timeline__handle");$.get(AGN.url(`/push/${this.config.pushId}/ajaxStatistic.action`)).done((e=>{r(e["common"]);o(e["viewsclicks"])}))}));function r(e){const t=$("#common-stat-chart");new Chart(t[0].getContext("2d"),{type:"bar",data:{labels:Object.keys(e),datasets:[{data:Object.values(e),backgroundColor:t.css("--chart-blue-color"),categoryPercentage:.9,minBarLength:2}]},options:{indexAxis:"x",layout:{padding:{top:20,right:0}},scales:{x:{ticks:{autoSkip:false,maxRotation:90}},y:{display:false}},plugins:{legend:{display:false},datalabels:{anchor:"end",align:"end",offset:-5}}}})}function o(e){if(!e.length){$("#progress-chart-block").addClass("hidden");return}const t=[];const i=[];const n=[];for(const r in e){const o=e[r];for(const e in o){if(o.hasOwnProperty(e)){if(r==0&&e!="time"){if(i.length==0){i.push(e)}else if(n.length==0){n.push(e)}}if(e=="time"){t.push(o[e])}else if(i[0]==e){i.push(o[e])}else if(n[0]==e){n.push(o[e])}}}}const r=l(t.length);const o=$("#progress-chart");const a=$("#progress-chart-minimap");const c=[{label:i[0],data:i.slice(1),borderColor:o.css("--chart-darkest-blue-color"),backgroundColor:o.css("--chart-darkest-blue-color"),pointRadius:r},{label:n[0],data:n.slice(1),borderColor:o.css("--chart-violet-color"),backgroundColor:o.css("--chart-violet-color"),pointRadius:r}];new Chart(o[0].getContext("2d"),{type:"line",data:{labels:t,datasets:c},options:{scales:{x:{type:"time",min:t[0],max:t[t.length-1],time:{unit:"day",displayFormats:{day:"yyyy-MM-dd hh:mm"},tooltipFormat:"yyyy-MM-dd hh:mm"},ticks:{autoSkip:true,maxRotation:0}},y:{min:0}},interaction:{mode:"index"},plugins:{legend:{position:"bottom"},datalabels:{display:false},zoom:{pan:{enabled:true,onPan:s,mode:"x"},limits:{x:{min:new Date(t[0]).getTime(),max:new Date(t[t.length-1]).getTime(),minRange:1}},zoom:{enabled:true,wheel:{enabled:true},pinch:{enabled:true},mode:"x",onZoom:s}}}}});new Chart(a[0].getContext("2d"),{type:"line",data:{labels:t,datasets:c.map((e=>({...e,pointRadius:0,borderWidth:.8})))},options:{scales:{x:{display:false},y:{display:false}},plugins:{legend:{display:false},datalabels:{display:false},tooltip:{external:null}}}})}function s({chart:t}){if(!t.timelineInitialized){t.timelineInitialized=true;a(t)}const{labels:i}=t.config.data;const{min:n,max:r}=t.scales["x"];const o=new Date(i[0]).getTime();const s=new Date(i[i.length-1]).getTime();const l=(n-o)/(s-o)*100;const c=(r-o)/(s-o)*100;const d=l>0?Math.min(l,98):0;const u=c<100?Math.max(c,2):100;e.prev().css("width",`${d}%`);e.css("left",`${d}%`);e.css("width",`${u-d}%`);e.next().css("width",`${100-u}%`)}function a(t){const i=new Hammer.Manager(e[0]);i.add(new Hammer.Pinch);i.add(new Hammer.Pan({threshold:10}));let n=0;let r=0;const o=i=>{const o=i.deltaX-n;const s=i.deltaY-r;n=i.deltaX;r=i.deltaY;const a=Math.max(parseFloat(e[0].style.width)/100,.1);t.pan({x:-o/a})};i.on("panstart",(e=>{n=0;r=0;o(e)}));i.on("panmove",o)}function l(e){if(e<60){return 5}if(e<100){return 4}return 3}}));AGN.Lib.Controller.new("profile-field-view",(function(){let e;let t;this.addDomInitializer("profile-field-view",(function(){t=$("#fixed-values-container");e=this.config.fieldType;i(this.config.fixedValues??[])}));this.addAction({click:"delete-fixed-value"},(function(){this.el.closest("[data-fixed-value-row]").remove()}));this.addAction({click:"add-fixed-value"},(function(){const e=this.el.closest("[data-fixed-value-row]");const t=e.find('[name="allowedValues"]').val();e.remove();n(false,t);n(true)}));this.addAction({change:"change-field-type"},(function(){e=this.el.val();const t=AGN.Lib.Form.get(this.el).getValues("allowedValues");i(t)}));function i(e){t.empty();_.each(e,(e=>{if(e.trim()!==""){n(false,e)}}));n(true)}function n(i,n=""){const r=AGN.Lib.Template.dom("fixed-value-row",{isLastRow:i,value:n,fieldType:e});t.append(r);AGN.Lib.Form.get(t).initFields();AGN.runAll(r)}}));AGN.Lib.Controller.new("recipient-duplicates-list",(function(){this.addAction({"table-column-manager:apply":"save-selected-columns"},(function(){const e=this.data.columns;$.ajax({type:"POST",url:AGN.url("/recipient/duplicate/setSelectedFields.action"),traditional:true,data:{selectedFields:e}}).done((t=>{if(t.success){AGN.Lib.WebStorage.extend("recipient-duplicate-overview",{fields:e})}AGN.Lib.JsonMessages(t.popups)}))}))}));AGN.Lib.Controller.new("recipient-import-errors-edit",(function(){this.addDomInitializer("recipient-import-errors-edit",(function(){if(e()){AGN.Lib.Page.reload(AGN.url("/recipient/import/chooseMethod.action?cancelImport=true"))}else{window.onbeforeunload=function(){return"If you leave the page, the import will be canceled automatically!"}}}));function e(){if(typeof performance==="undefined"||typeof performance.getEntriesByType!=="function"){return false}const e=performance.getEntriesByType("navigation");if(e.length>0){return e[0].type==="reload"&&e[0].name===window.location.href}return false}this.addAction({submitted:"save-errors"},(function(){t()}));this.addAction({click:"ignore-errors"},(function(){t();AGN.Lib.Confirm.request(AGN.url("/recipient/import/errors/ignore.action"))}));function t(){window.onbeforeunload=null}}));AGN.Lib.Controller.new("recipient-import-view",(function(){this.addAction({click:"delete-file"},(function(){$.post(AGN.url("/recipient/import/file/delete.action")).done((()=>{this.el.parent().remove();$("#import-file").prop("disabled",false).parent().removeClass("hidden")}))}));this.addDomInitializer("recipient-import-view",(function(){const e=this.config.attachmentCsvFileID;if(e>0){$("#useCsvUpload").prop("checked",true).trigger("change")}}))}));AGN.Lib.Controller.new("recipient-insights",(function(){const e=.01;const i="< 1";const n=.001;const r={HIGH_PERFORMER:"#4FB102",OPPORTUNITY:"#0ACD70",LEAD:"#C2C2C2",SLEEPER:"#E12E59"};let o;let s;this.addDomInitializer("recipient-insights",(function(){o=this.config.manualPeriodType;const e=this.config.insightsData;$.i18n.load(this.config.translations);c(e.weekdayReactionRankData);u(e.hourReactionRankData);p(e.reactionDeviceRankData);f(e.reactionsInProgressData);g(e.mailingReactionPercentageData);v(e.pageImpressionsData);b(e.customerRevenueData);y(e.customerPerformanceData)}));this.addAction({change:"update-period-chart"},(function(){if($("#reactionProgressPeriod").val()===o&&!l()){return}const e=AGN.Lib.Form.get(this.el);e.jqxhr().done((t=>{f(t);a(e)}))}));function a(e){const t=e.data();const i=new URL(window.location.href);Object.keys(t).forEach((e=>{i.searchParams.set(e,t[e])}));window.history.replaceState({},"",i)}function l(){return!!$("#reactionProgressMinDate").val()&&!!$("#reactionProgressMaxDate").val()}function c(e){e=h(e);d(e.values);d(e.percentages);const i=Math.max(...e.values);const n=$("#days-reaction-chart");new Chart(n[0].getContext("2d"),{type:"bar",data:{labels:d(t("date.weekdaysShort")),datasets:[{data:e.values,backgroundColor:t=>{const r=e.values[t.dataIndex]===i;return n.css(r?"--chart-darkest-blue-color":"--chart-blue-color")},categoryPercentage:.9,minBarLength:2}]},options:{indexAxis:"x",layout:{padding:{top:20,right:0}},scales:{x:{ticks:{autoSkip:false,maxRotation:90}},y:{display:false}},plugins:{legend:{display:false},datalabels:{anchor:"end",align:"end",offset:-5,formatter:(t,i)=>e.percentages[i.dataIndex]+"%"},tooltip:{position:"nearest",callbacks:{label:e=>t("daysWithReactions")+": "+e.formattedValue}}}}})}function d(e){const t=e.slice(1).concat(e[0]);for(let i=0;i<e.length;i++){e[i]=t[i]}return e}function u(e){e=h(e);const i=Math.max(...e.values);const n=$("#reaction-hour-chart");new Chart(n[0].getContext("2d"),{type:"bar",data:{labels:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],datasets:[{data:e.values,backgroundColor:t=>{const r=e.values[t.dataIndex]===i;return n.css(r?"--chart-darkest-blue-color":"--chart-blue-color")},categoryPercentage:.5,minBarLength:2}]},options:{indexAxis:"x",layout:{padding:{top:20,right:0}},scales:{x:{ticks:{autoSkip:true,maxRotation:0}},y:{display:false}},plugins:{legend:{display:false},datalabels:{anchor:"end",align:"end",offset:-5,display:"auto",formatter:(t,i)=>e.percentages[i.dataIndex]+"%"},tooltip:{callbacks:{label:e=>t("reactionTimes")+": "+e.formattedValue}}}}})}function h(e){const t=Object.values(e.values);const i=Object.entries(e.percentages).map((([e,t])=>t));return{values:t,percentages:i}}function p(e){const i=$("#reaction-device-chart");const n=[i.css("--chart-darkest-blue-color"),i.css("--chart-dark-blue-color"),i.css("--chart-blue-color"),i.css("--chart-light-blue-color"),i.css("--chart-light-cyan-color")];const r=[];const o=[];$.each(e,(function(e,i){r.push(i.value);o.push(t(i.deviceClass))}));new Chart(i[0].getContext("2d"),{type:"agnDoughnut",data:{labels:o,datasets:[{data:r,backgroundColor:n,borderWidth:0}]}})}function f(e){s?.destroy();const i=$("#reaction-progress-chart");const n=[];const r=[];const o=[];const a=[];let l=false;let c=false;$.each(e.values,((e,t)=>{n.push(e);r.push(t.reactions);o.push(t.impressions);a.push(t.revenues);if(t.impressions>0){l=true}if(t.revenues>0){c=true}}));const d=n.length;let u=3;if(d<60){u=5}else if(d<100){u=4}const h={type:"line",data:{labels:n,datasets:[{label:t("statistic.reactions"),data:r,borderColor:i.css("--chart-darkest-blue-color"),backgroundColor:i.css("--chart-darkest-blue-color"),pointRadius:u}]},options:{scales:{x:{ticks:{maxRotation:0}},y:{display:false}},interaction:{mode:"index",intersect:false},stacked:false,plugins:{legend:{position:"bottom"},datalabels:{display:false},tooltip:{callbacks:{title:function(t){const i=t[0].label;const n=e.values[i].mailingIds;if(n.length){return e.mailingNames[n[0]]+" "+i}return i}}}}}};if(l){h.data.datasets.push({label:t("statistic.impressions"),data:o,borderColor:i.css("--chart-blue-color"),backgroundColor:i.css("--chart-blue-color"),pointRadius:u})}if(c){h.data.datasets.push({label:t("statistic.revenue"),data:a,borderColor:i.css("--chart-dark-blue-color"),backgroundColor:i.css("--chart-dark-blue-color"),pointRadius:u})}s=new Chart(i[0].getContext("2d"),h)}function g(e){w("#reactionTypeKpi",e.percentage.percentage);$("#reactionGradeIcon").css("color",m(e.grade))}function m(e){return r[e]||"inherit"}function v(e){w("#impressionsByClickKpi",e.perClick);w("#impressionsByVisitKpi",e.perVisit);w("#impressionsByBuyKpi",e.perBuy)}function b(e){w("#revenueSumKpi",e.value);w("#revenueAvgKpi",e.average)}function y(e){if(e.clicks.percentage>0){w("#performanceClicksKpi",e.clicks.percentage)}else{w("#performanceClicksKpi",e.clicks.value>0?n:0)}w("#performanceRevenueKpi",e.revenue)}function w(t,n){const r=$(t);const o=r.find("[data-kpi-value]");if(n>0){if(n<e){o.text(i)}else{let e="";if(o.is("[data-kpi-sign]")){e=" "+o.data("kpi-sign")}o.text(`${n.toFixed(2)}${e}`)}}}}));AGN.Lib.Controller.new("recipient-list",(function(){const e=AGN.Lib.Action,t=AGN.Lib.Messages,i=AGN.Lib.Form,n=AGN.Lib.Storage;const r="-1";const o="#targetgroup-querybuilder";const s=["firstname","lastname","email","gender"];let a;let l={};let c=false;e.new({"qb:invalidrules":o},(function(){t.alert("querybuilder.errors.invalid_definition")}));this.addDomInitializer("recipient-list",(function(){a=$(o);l=$.extend({},JSON.parse(this.config.initialRules));if(!this.config.forceShowAdvancedSearchTab){n.restoreChosenFields(p())}d();g();a.on("afterClear.queryBuilder",(()=>u(true)));a.on("change afterReset.queryBuilder afterDeleteGroup.queryBuilder afterDeleteRule.queryBuilder afterSetRules.queryBuilder afterUpdateRuleFilter.queryBuilder",(()=>u()))}));this.addAction({change:"toggle-filter"},(function(){d();n.saveChosenFields(this.el)}));this.addAction({"table-column-manager:apply":"save-selected-columns"},(function(){const e=this.data.columns;$.ajax({type:"POST",url:AGN.url("/recipient/setSelectedFields.action"),traditional:true,data:{selectedFields:e}}).done((t=>{if(t.success){AGN.Lib.WebStorage.extend("recipient-overview",{fields:e})}AGN.Lib.JsonMessages(t.popups)}))}));function d(){const e=h();$("#basic-filters-block").toggleClass("hidden",e);$("#filter-query-builder-block").toggleClass("hidden",!e);u()}function u(e=false){$("#target-group-save-button").toggleClass("hidden",e||!h()||!x())}function h(){return p().is(":checked")}function p(){return $("#use-advanced-filter")}this.addAction({click:"create-new-target"},(function(){T()?.clearErrors();if(f()){AGN.Lib.Confirm.from("new-targetgroup-modal",{rules:$("#queryBuilderRules").val()}).done((e=>b().updateHtml(e)))}}));function f(e=false){const t=$.Event("qb:validation");a.trigger(t,{ignore_qb_validation:false,skip_empty:e});return!t.isDefaultPrevented()}this.addAction({change:"change-mailinglist-id"},g);function g(){const e=E("mailinglist").val();const t=e===r;E("type").prop("disabled",t);E("status").prop("disabled",t)}this.addAction({enterdown:"search-recipient"},(function(){c=true}));this.addAction({validation:"search-recipient"},(function(){if(c){const e=this.data;this.data=_.merge({},e,{ignore_qb_validation:false,skip_empty:false})}else if(this.data&&this.data.ignore_qb_validation){m()}}));function m(){const e=T();if(e){e.clearErrors();e.setRules(l);S()}}this.addAction({submission:"search-recipient"},(function(){if(c){y();v({ignore_qb_validation:false})}}));this.addAction({click:"search"},(function(){if(!h()){y()}v({ignore_qb_validation:false})}));function v(e){const t=b();t.setActionOnce(AGN.url("/recipient/search.action"));t.submit("",_.merge({ignore_qb_validation:true,skip_empty:true},t.validatorOptions,e))}function b(){return i.get($("#recipients-overview"))}function y(){const e=s.map((e=>{const t=w(e);const i=t==="string"?"like":"equal";let n=E(e).val().trim();if(t==="number"&&n!==""){n=Number(n)}else{n=n?`%${n}%`:""}return{id:e,value:n,operator:i}}));return C(e,true)}function w(e){const t=T().getFilterById(e).type;return $.fn.queryBuilder.constructor.types[t]}function C(e,t){const i=T();if(!i){return false}return e.reduce(((e,n)=>{const r=i.getRules({allow_invalid:true,skip_empty:true});if(!n.id){return e}if(typeof n.value==="number"||n.value){return i.setOrReplaceRule(r,n,t)===true||e}return i.deleteRuleByField(null,n.id,t)===true||e}),false)}function S(){const e=A();_.each(s,(t=>E(t).val(e[t])))}function A(e=s){const t=T();const i={};if(t){const n=t.getRules({allow_invalid:true,skip_empty:true});e.forEach((e=>{const r=t.findRuleByField(n,e,true);i[e]=r?.value||""}))}return i}function x(){const e=T();return e?e.containsNotEmptyRule():false}function E(e){return $(`#filter-${e}`)}function T(){return a.prop("queryBuilder")}}));AGN.Lib.Controller.new("recipient-statistics-view",(function(){this.addAction({change:"type-change"},(function(){const e=this.el;const t=e.find("option:selected");const i=$("#mailinglist-select");if(t.is("[data-mailinglist-required]")&&i.val()==="0"){AGN.Lib.Select.get(i).selectNext()}AGN.Lib.Form.get(e).submit()}))}));AGN.Lib.Controller.new("recipient-view",(function(){const e="OK";const i="USED";const n="BLACKLISTED";const r=AGN.Lib.Form;let o;this.addDomInitializer("recipient-view",(function(){const a=r.get(this.el);o=new l(AGN.url(`/recipient/${this.config.id}/checkAddress.action`),(r=>{switch(r.status){case e:a.cleanFieldError("email");break;case i:a.showFieldError("email",AGN.Lib.Template.text("duplicated-email-block",r),true);break;case n:a.showFieldError("email",t("error.isBlacklisted"),true);break}}));$("#recipient-email").on("change input",_.debounce((function(){o.check($(this).val())}),300));s()}));function s(){$(".not-allowed-usertype").each((function(){const e=$(this);if(e.prop("selected")){e.parent("select").prop("disabled",true)}else{e.prop("disabled",true)}}))}this.addAction({submission:"recipient-save"},(function(){const e=r.get(this.el);const i=$("#recipient-email").val();this.event.preventDefault();const n=()=>{$.post(AGN.url("/recipient/checkAltgMatch.action"),e.params()).done((i=>{if(i.popups&&i.popups.alert&&i.popups.alert.length>0){AGN.Lib.JsonMessages(i.popups)}else if(!i.success||i.success.length===0){a(t("recipient.hide.question"),(()=>{e.setActionOnce(AGN.url("/recipient/saveAndBackToList.action"));e.submit()}))}else{e.submit()}})).fail((()=>e.submit()))};if(o&&i&&i.trim()){o.jqxhr(i.trim()).done((e=>{if(e.isBlacklisted===true){a(t("recipient.blacklisted.question"),(()=>{if(e.inUse===true){a(t("recipient.duplicate.question"),n)}else{n()}}))}else if(e.inUse===true){a(t("recipient.duplicate.question"),n)}else{n()}})).fail(n)}else{n()}}));function a(e,t){return AGN.Lib.Confirm.from("recipient-confirmation-modal",{question:e}).done(t)}this.addAction({change:"activate-mediatype"},(function(){const e=this.el.data("mediatype");const t=this.el.is(":checked");this.el.closest("[data-mailinglist-tile]").find(`.icon-mediatype-${e}`).toggleClass("icon-mediatype--active",t);this.el.closest(".tile").find("[data-binding-usertype]").prop("disabled",!t)}));this.addAction({focusout:"hide-datasource-popover"},(function(){AGN.Lib.Popover.hide(this.el)}));class l{constructor(e,t){this.url=e;this.running=false;this.callback=$.isFunction(t)?t:$.noop;this.lastAddress=null;this.lastResult=null;this.scheduledCheck=null}jqxhr(e){return $.get(this.url,{email:e})}scheduleCheck(t){if(this.scheduledCheck){clearTimeout(this.scheduledCheck)}if(this.running){this.scheduledCheck=setTimeout((()=>this.scheduleCheck(t)),300)}else{this.running=true;this.lastAddress=null;this.lastResult=null;try{this.jqxhr(t).always((()=>this.running=false)).done((r=>{this.lastAddress=t;this.lastResult={status:r.isBlacklisted===true?n:r.inUse===true?i:e,recipientID:r.existingRecipientId||0};this.report()}))}catch(e){this.running=false}}}check(t){t=t?.trim()||"";if(!t){this.report(e)}else if(this.lastAddress===t){this.report()}else{this.scheduleCheck(t)}}report(e){if(arguments.length){this.callback.call(null,e)}else{if(this.lastAddress){this.report(this.lastResult)}}}}}));AGN.Lib.Controller.new("reference-table-export",(function(){let e;let t;this.addDomInitializer("reference-table-export",(function(){e=$("#export-time-period-block");t=$("#period-type");i(true)}));this.addAction({change:"update-period-type"},(function(){i()}));function i(i=false){e.html(AGN.Lib.Template.text("referente-table-export-time-period",{type:t.val(),initial:i}))}}));AGN.Lib.Controller.new("reference-table-list",(function(){this.addAction({click:"bulk-delete"},(function(){const t=AGN.Lib.Table.get(this.el)?.api;const i=t.getSelectedRows();const n=i.map((e=>e.id));e(n,this.el.attr("href")).done((e=>{if(n.length>1){const n=e.data;const r=i.filter((e=>n.includes(e.id)));t.applyTransaction({remove:r});AGN.Lib.JsonMessages(e.popups,true)}else{t.applyTransaction({remove:i});AGN.Lib.RenderMessages($(e))}}))}));function e(e,t,i=true){const n=$.Deferred();if(e&&e.length){const i=$.ajax(t,{method:"GET",traditional:true,data:{ids:e}}).done((e=>{if(e){AGN.Lib.RenderMessages($(e))}})).fail((()=>n.reject()));AGN.Lib.Confirm.request(i).then(n.resolve,n.reject)}else{n.reject();AGN.Lib.Messages.alert("messages.error.nothing_selected")}return n.promise()}}));AGN.Lib.Controller.new("salutation-view",(function(){const e=AGN.Lib.Select;let t;let i;let n;let r;let o;let s;this.addDomInitializer("salutation-view",(function(){t=$("#recipient");i=$("#tagType");s=this.config.id;n=this.config.AGN_TAG_TITLE;r=this.config.AGN_TAG_TITLE_FIRST;o=this.config.AGN_TAG_TITLE_FULL;l()}));this.addAction({change:"switch-salutation",input:"switch-salutation"},(()=>l()));function a(){return`[${c()} type='${s}']`}function l(){u().then((e=>$("#salutation-preview").text(e+",")));$("#copy-salutation").data("copyable-value",a())}function c(){return i.val()}async function d(){const n=a();try{return await $.get(AGN.url(`/salutation/${s}/resolve.action`),{recipientId:t.val(),type:e.get(i).$selectedOption.data("id")})}catch(e){console.error("Error resolving salutation agnTag:",e);return n}}async function u(){const{title:i,firstname:s,lastname:a,gender:l}=e.get(t).$selectedOption.data();const u=$(`[name="genderMapping[${l}]"]`).val();if(u.includes("#<>#")){return await d()}switch(c()){case n:return`${u} ${i?`${i} `:""}${a}`;case r:return`${u} ${s}`;case o:return`${u} ${i?`${i} `:""}${s} ${a}`;default:return""}}}));AGN.Lib.Controller.new("side-menu",(function(){const e=!!window.matchMedia("(pointer: fine)").matches;const t=e?400:0;this.addAction({click:"switch-to-classic-design"},(function(){const e=this.el;i(e.parent().parent(),this.event,(()=>{$.post(AGN.url("/ui-design/switch.action")).done((()=>{e.prop("disabled",true);window.setTimeout((()=>AGN.Lib.Page.reload(e.data("switch-url"))),500)})).fail((()=>e.prop("checked",!e.prop("checked"))))}))}));this.addAction({click:"logout"},(function(){i(this.el,this.event,(()=>AGN.Lib.Form.get($("#logoutForm")).submit("static")))}));this.addAction({click:"open-help"},(function(){i(this.el,this.event,AGN.Lib.Helpers.openHelpModal)}));function i(t,i,r){const o=t.find(".sidebar__tooltip");if(!e&&!o.hasClass("open")){n(o);i.preventDefault()}else{r()}}if(e){this.addAction({mouseenter:"display-tooltip"},(function(){const e=this.el.find(".sidebar__tooltip");n(e)}));this.addAction({mouseleave:"display-tooltip"},(function(){const e=this.el.find(".sidebar__tooltip");e.data("closeTimerId",setTimeout((()=>s(e)),t))}));this.addAction({mouseenter:"activateSubmenu"},(function(){r(this.el)}));this.addAction({mouseleave:"activateSubmenu"},(function(){const e=$(this.el).find(".menu-item");const i=e.next(".submenu");e.data("closeTimerId",setTimeout((()=>a(i)),t))}))}else{this.addAction({click:"activateSubmenu"},(function(){const e=this.el.find(".menu-item").next(".submenu");if(e.hasClass("open")){const e=$(this.event.target).closest("a");if(e.exists()&&!e.is("[data-confirm]")){AGN.Lib.Page.reload(e.attr("href"))}}else{r(this.el)}}));this.addAction({click:"open-account-data"},(function(){i(this.el,this.event,(()=>AGN.Lib.Page.reload(AGN.url(this.el.data("url")))))}))}function n(e){o(e);clearTimeout(e.data("closeTimerId"));e.addClass("open")}function r(e){const t=e.find(".menu-item");const i=t.next(".submenu");const n=i.find(".submenu-items-container");o(i);clearTimeout(t.data("closeTimerId"));i.addClass("open");l(i,t);n.addClass("open")}function o(e){$(".sidebar__tooltip.open").not(e).each((function(){s($(this))}));$(".submenu.open").not(e).each((function(){a($(this))}))}function s(e){e.removeClass("open")}function a(e){e.removeClass("open");e.find(".submenu-items-container").removeClass("open")}function l(e,t){const i=$(window);const n=e.find(".submenu-header");const r=parseInt(t.parent().parent().css("gap"));let o=t.scrollTop()+t.offset().top+t.outerHeight()/2-n.outerHeight()/2-r;const s=e.outerHeight();if(o+s>i.height()+i.scrollTop()){o=i.height()+i.scrollTop()-s-r}if(o-i.scrollTop()<0){o=i.scrollTop()}e.offset({top:o,left:e.offset().left})}}));AGN.Lib.Controller.new("help-center",(function(){const e=AGN.Lib.Form;const t=AGN.Lib.JsonMessages;const i=AGN.Lib.Template;const n=()=>{window.hmNavigationFrame=true;window.lazysync=e=>{const t=document.getElementById("manual-iframe").contentWindow;if(t.hmForceRedirect&&t.location&&t.location.href){t.location.href="index.html?"+e}}};n();this.addDomInitializer("help-center",(function(){$("[data-help-tab]").on("help-tab:open",(function(e,t){const i=$(this);const n=i.data("help-tab");if(n==="support"){a(t.type,t.opts)}if(!i.is(".active")){i.trigger("click")}}))}));this.addDomInitializer("support-chat",(function(){const e=$("#support-chat-tab");o(this.config.initialMessage,true);let t;e.on("form:loadershow",(()=>{if(!t){t=r()}}));e.on("form:loaderhide",(()=>{t.remove();t=null}))}));this.addAction({submission:"send-message"},(function(){const i=$("#support-message");const n=i.val();if(n.length){o(n);e.get(this.el).jqxhr().done((e=>{t(e.popups);if(e.success){o(e.data,true)}}));i.val("")}}));function r(){const e=i.dom("support-chart-typing-msg");return s(e)}function o(e,t=false){const n=i.dom(t?"support-chart-incoming-message":"support-chart-outgoing-message",{text:e});return s(n)}function s(e){const t=$("#support-chat-tab").find(".chat-content");const i=t.prop("scrollHeight");t.append(e).scrollTop(i);return e}this.addDomInitializer("support",(function(){a()}));this.addDomInitializer("help-center-docs",(function(){const e=this.config.manuals;const t=this.config.translations;e.flatMap((e=>e.files)).forEach((e=>{e.link=AGN.url(`/manual/${e.lang}/pdf/${e.name}`,true);e.btnMsgKey=t.download+" "+e.lang.toUpperCase()}));$("#help-center-docs-tab").html(i.dom("help-center-docs",{manuals:e}))}));this.addAction({submission:"send-support-request"},(function(){this.event.preventDefault();e.get(this.el).submit()}));this.addAction({submitted:"send-support-request"},(function(){t(this.data.popups);if(this.data.success){AGN.Lib.Modal.getInstance(this.el).hide()}}));function a(e,t){const n=$("#help-center-support-tab");const r={supportType:e||"",subject:"",subjectChangeable:true,page:l()};n.html(i.text("help-center-support",_.merge({},r,t)));AGN.Lib.CoreInitializer.run(["select","growing-textarea","char-counter"],n)}function l(){const e=window.location;const t=[".action",".do"];if(e.origin&&e.pathname){let i=c(e.pathname);for(let e=0;e<t.length;e++){let n=t[e];let r=i.indexOf(n);if(r>0){i=i.substring(0,r+n.length)}}return e.origin+i+e.search+e.hash}let i=c(e.href);for(let e=0;e<t.length;e++){let n=t[e];let r=i.indexOf(n);if(r>0){const e=r+n.length;let t=i.indexOf("?",e);if(t<0){t=i.indexOf("#",e)}if(t>0){return i.substring(0,e)+i.substring(t)}else{return i.substring(0,e)}}}return i}function c(e){return(e+"").replace(/;jsessionid=[a-z0-9]+/i,"")}}));AGN.Lib.Controller.new("system-status",(function(){this.addAction({click:"cancel-imports"},(function(){AGN.Lib.Confirm.from("cancel-running-imports-modal").done((()=>{$.post(AGN.url("/serverstatus/killRunningImports.action")).fail((()=>AGN.Lib.Messages.defaultError()))}))}))}));AGN.Lib.Controller.new("target-create-mailinglist",(function(){this.addAction({click:"select-mediatype"},(function(){var e=this.el.closest("form");var t=e.find("#createMailinglistOkBtn");if(!e.find('input:checked[name="mediatypes"]').length){t.attr("disabled","disabled")}else{t.removeAttr("disabled")}}))}));AGN.Lib.Controller.new("target-group-stat",(function(){this.addDomInitializer("chart",(function(){const e=this.config.statistics;if(!e?.length){return}const t=$("#target-statistic-chart");const i=[t.css("--chart-dark-blue-color"),t.css("--chart-blue-color"),t.css("--chart-light-blue-color"),t.css("--chart-cyan-color"),t.css("--chart-light-cyan-color"),t.css("--chart-light-lime-color")].splice(0,e.length);new Chart(t[0].getContext("2d"),{type:"bar",data:{labels:e.map((e=>e.status)),datasets:[{data:e.map((e=>e.recipientsCount)),backgroundColor:i,categoryPercentage:.9,minBarLength:2}]},options:{indexAxis:"x",layout:{padding:{top:20,right:0}},scales:{x:{ticks:{autoSkip:false,maxRotation:90}},y:{display:false}},plugins:{legend:{display:false},datalabels:{anchor:"end",align:"end",offset:-5}}}})}))}));AGN.Lib.Controller.new("target-group-view",(function(){const e=AGN.Lib.Form;const t=AGN.Lib.ScheduleTimeTable;const i=AGN.Lib.ScheduleTimeTable.PeriodRow;let n;AGN.Lib.Action.new({"qb:invalidrules":"#targetgroup-querybuilder"},(function(){AGN.Lib.Messages.alert("querybuilder.errors.general")}));this.addDomInitializer("target-group-view",(function(){if(this.config.errorPositionDetails){r(this.config.errorPositionDetails)}}));this.addAction({change:"toggle-editor-tab"},(function(){const t=this.el;const i=t.is(":checked");t.prop("checked",!i);const n=e.get(t);if(!n.validate({skip_empty:true})){return}n.setValueOnce("viewFormat",i?"EQL":"QUERY_BUILDER");n.submit("",{skip_empty:true})}));this.addAction({submission:"save-target"},(function(){e.get(this.el).submit(this.el.data("submit-type")).done((e=>{if(typeof e=="object"&&!e.success){r(e.data);AGN.Lib.JsonMessages(e.popups)}}))}));function r(e){AGN.Lib.Editor.get($("#eql")).goToLine(e.line,e.column)}this.addDomInitializer("target-scheduler-init",(function(){n?.clean();n=new t($("#target-scheduler-block"));let r=[];if(this.config.intervalAsJson){r=JSON.parse(this.config.intervalAsJson).map((e=>i.deserialize(e)))}if(r.length===0){n.addEmptyPeriodRow()}else{r.forEach((e=>n.addRow(e)))}e.get(this.el).initFields()}));this.addAction({click:"activate-schedule"},(function(){const e=this.el.attr("href");const t=n.getSubmissionJson("period");$.post(e,{intervalAsJson:t}).done((e=>AGN.Lib.Page.render(e)))}))}));AGN.Lib.Controller.new("temp-file",(function(){const e=AGN.Lib.Form;let i;this.addAction({"upload:add":"show-upload-file-form"},(function(){if(i){return}i=true;$.ajax({url:AGN.url("/upload/new.action"),type:"GET",async:false,success:e=>{AGN.Lib.Page.render(e);$(".modal").on("modal:close",r)}})}));this.addAction({"upload:dropped":"addFilesToModal"},(function(){n(this.data);i=false}));function n(e){if(e.length>1){a(e);return}const t=$("#file-names");t.append(e[0].name)}function r(){$("#files").val("");$("#dropzone").trigger("upload:reset")}this.addAction({click:"save-file"},(function(){const t=e.get(this.el);const i=t.submit();if(i){i.done((e=>{AGN.Lib.Modal.getWrapper(t.get$()).modal("hide");AGN.Lib.JsonMessages(e.popups)}));$(".modal").hide()}}));function o(){return[{field:"name",headerName:t("defaults.name"),filter:false,suppressMovable:true,cellRenderer:"NotEscapedStringCellRenderer"},{field:"size",headerName:t("defaults.size"),filter:false,suppressMovable:true,width:50,cellRenderer:"NotEscapedStringCellRenderer"}]}function s(e){return e.map((({name:e,size:t})=>({name:e,size:AGN.Lib.Helpers.formatBytes(t)})))}function a(e){const t=new AGN.Lib.Table(AGN.Lib.Template.dom("js-table-wrapper"),o(),s(e),{pagination:false});const i=$('<div class="col-12">').append(t.$el);t.$el.css({"--ag-rows-count":e.length,"max-height":"235px"});l().find(".row:first").prepend(i)}function l(){return $("#upload-form")}}));AGN.Lib.Controller.new("template-css",(function(){const e=AGN.Lib.Form;this.addAction({click:"saveCss"},(function(){const t=e.get($("#gridTemplateForm"));const i=this.el.closest(".modal").find(`[name="templatesToUpdate"]`).val();const n=t.getValue("templateId");if(n){i.push(n)}t.setValueOnce("bulkIds",i);t.submit()}))}));AGN.Lib.Controller.new("mailing-trackable-links",(function(){const e=this;const t=AGN.Lib.Form;var i;var n;var r;this.addDomInitializer("mailing-trackable-links",(function(){n=this.config.KEEP_UNCHANGED;r=this.config.SAVE_ALL_URL;if(this.config.scrollToLinkId){o($(`#link-${this.config.scrollToLinkId}`))}}));AGN.Lib.Action.new({change:"[id^=link-], #tile-trackableLinkEditAll"},(function(){i=this.el.attr("id")}));this.addAction({click:"save-bulk-actions"},(function(){const e=t.get($("#trackableLinksForm"));const i=$("#bulkActionsForm").serializeFormDataObject();e._data={};$.each(i,(function(t,i){e.setValue(t,i)}));e.setValue("modifyAllLinksExtensions",false);s(AGN.Lib.InputTable.get("#bulkActionExtensions").collect(),e);e.setActionOnce(r);e.submit();AGN.Lib.Modal.getWrapper(this.el).modal("hide")}));this.addAction({click:"save-all"},(function(){this.event.preventDefault();const e=t.get($("#trackableLinksForm"));e._data={};e.setValue("modifyBulkLinksExtensions",false);a(e);s(AGN.Lib.InputTable.get("#link-common-extensions").collect(),e);e.setActionOnce(r);e.submit()}));this.addAction({scrollTo:"scroll-to"},(function(){if(i){o($(this.el).find("#"+i))}}));function o(e){if(e&&e.length>0){const t=e.closest(".table-wrapper__body");if(t.exists()){const i=t.find(":first-child").offset().top;const n=e.offset().top;t.scrollTop(0);t.scrollTop(n-i)}}}this.addAction({click:"save-individual"},(function(){this.event.preventDefault();const e=t.get($("#trackableLinkForm"));const i=AGN.Lib.InputTable.get("#individual-extensions").collect();s(i,e);e.submit()}));this.addAction({change:"link-details-trackable"},(function(){e.runInitializer("trackableAction")}));this.addInitializer("trackableAction",(function(e){const t=$('[data-action="link-details-trackable"] :selected');const i=$("#linkAction");i.prop("disabled",i.prop("disabled")||t.val()==0)}));function s(e,t){_.each(e,(function(e,i){t.setValue("extensions["+i+"].name",e.name);t.setValue("extensions["+i+"].value",e.value)}))}function a(e){e.setValue("bulkUsage",n);e.setValue("bulkAction",n);e.setValue("bulkDeepTracking",n);e.setValue("bulkStatic",n)}}));AGN.Lib.Controller.new("trackable-link",(function(){var e=this;var t=new AGN.Lib.TrackableLinkExtensions;this.addDomInitializer("trackable-link-extensions",(function(){t.load(this.config.extensions,$("#extensions tbody"))}));this.addAction({click:"save"},(function(){this.event.preventDefault();var e=AGN.Lib.Form.get($("#trackableLinkForm"));i(e);e.submit("static")}));function i(e){_.each(t.collect(),(function(t,i){e.setValue("extensions["+i+"].name",t.name);e.setValue("extensions["+i+"].value",t.value)}))}this.addAction({change:"link-details-trackable"},(function(){e.runInitializer("trackableAction")}));this.addInitializer("trackableAction",(function(e){var t=$('[data-action="link-details-trackable"] :selected');var i=$("#linkAction");i.prop("disabled",i.prop("disabled")||t.val()==0)}))}));AGN.Lib.Controller.new("userform-images",(function(){const e=AGN.Lib.Modal;const t=AGN.Lib.Template;const i=AGN.Lib.Form;this.addAction({"upload:add":"image-upload"},(function(){const s=this.data.file;const a=this.data.index;let l=$("#components-upload-modal");if(!l.exists()){l=e.fromTemplate("userform-images-upload-modal-template");l.on("modal:close",n)}const c=l.find("#components-uploads-container");const d=t.dom("userform-upload-image",{index:a,fileName:s.name,previewUrl:o(s),isArchive:r(s)==="zip"});c.append(d);i.get(l).initFields();AGN.runAll(d)}));function n(){$("#upload-files").val("");$("#dropzone").trigger("upload:reset")}function r(e){if(e.name&&e.name.includes(".")){return e.name.substring(e.name.lastIndexOf(".")+1).toLowerCase()}return""}function o(e){if(/^image/.test(e.type)){return URL.createObjectURL(e)}return""}this.addAction({click:"upload-images"},(function(){const t=i.get(this.el);const n=e.getWrapper(this.el);t.$form.on("submitted",(()=>{if(document.contains(n[0])){n.css("opacity",1)}}));t.submit();n.css("opacity",0)}))}));AGN.Lib.Controller.new("userform-view",(function(){var e=AGN.Lib.FormBuilder.FormBuilder;var t=AGN.Lib.Editor;var i=AGN.Lib.Confirm;var n;let r=0;this.addDomInitializer("userform-view",(function(){var e=this.config;n=e.actionURLPattern;r=e.formId;$("#userFormForm").dirty()}));this.addAction({click:"activate-and-test"},(function(){const e=this.el;const t=e.attr("href");i.from("userform-activate-and-test").done((()=>{$.post(AGN.url(`/webform/${r}/activate.action`)).done((i=>{AGN.Lib.JsonMessages(i.popups,true);if(i.success){$("#is-active-switch").prop("checked",true);e.removeAttr("data-action");window.open(t,"_blank")}}))}))}));this.addAction({change:"change-intro-action"},(function(){var e=$("#startActionLink");var t=this.el.val();c(e,t)}));this.addAction({change:"change-final-action"},(function(){var e=$("#finalActionLink");var t=this.el.val();c(e,t)}));this.addAction({change:"check-velocity-script"},(function(){if(this.el.val()!=="wysiwyg"){return}l(this.el)}));this.addAction({submission:"saveUserForm"},(function(){var e=s("successFormBuilder");var t=s("errorFormBuilder");var n=e&&o("successTemplate");var r=t&&o("errorTemplate");if(n||r){i.from("warning-save-different-tabs",{needSuccessCodeChoose:n,needErrorCodeChoose:r})}else{var l=e?"FORM_BUILDER":"HTML";var c=t?"FORM_BUILDER":"HTML";a(l,c)}}));this.addAction({click:"save-specific-code-mode"},(function(){const e=$("#choose-code-format-modal-form");const t=e.find('[name="success_template_mode"]').val();const i=e.find('[name="error_template_mode"]').val();a(t,i)}));this.addAction({change:"formTestRecipient"},(function(){var e=$("#formTestLink");var t=$("#formTestRecipient");e.attr("href",t.val())}));function o(e){if(!window.Jodit){CKEDITOR.instances[e]?.updateElement()}return $("#userFormForm").dirty("isFieldDirty",$(`#${e}`))}function s(t){if(e.isCreated("#"+t)){return e.get("#"+t).isChanged()}return false}function a(i,n){var r=AGN.Lib.Form.get($("form#userFormForm"));if(e.isCreated("#successFormBuilder")){var o=e.get("#successFormBuilder");if(i==="FORM_BUILDER"){t.get($("#successTemplate")).val(o.generateHtml())}var s=o.getJson();r.setValueOnce("successSettings.formBuilderJson",s);var a=$("#successFormBuilder").find("input:enabled,select:enabled");a.prop("disabled",true)}if(e.isCreated("#errorFormBuilder")){var l=e.get("#errorFormBuilder");if(n==="FORM_BUILDER"){t.get($("#errorTemplate")).val(l.generateHtml())}var c=l.getJson();r.setValueOnce("errorSettings.formBuilderJson",c);var d=$("#errorFormBuilder").find("input:enabled,select:enabled");d.prop("disabled",true)}r.submit();if(a){a.prop("disabled",false)}if(d){d.prop("disabled",false)}}function l(e){const t=AGN.Lib.Helpers.objFromString(e.data("action-options"));const i=AGN.Lib.Editor.get($("#"+t.type+"Template")).val();if(i.match(/#(?:set|include|macro|parse|if|foreach)/gi)){AGN.Lib.Messages.alert("userform.error.velocity_not_allowed");e.val("html").trigger("change")}}function c(e,t){if(e.exists()){if(t>0){e.attr("href",n.replace(":action-ID:",t));e.removeClass("hidden")}else{e.attr("href","#");e.addClass("hidden")}}}}));AGN.Lib.Controller.new("user|groups-permissions",(function(){let e;this.addDomInitializer("user|groups-permissions",(function(){e=t(this.config);c(+a().first().attr("id").match(/\d+/)[0]);s()}));function t(e){if(e.isSoapUser){return i(e)}return n(e)}function i(e){const t=e.permissions.map((e=>({...e,name:e.endpointName})));return[...t,...e.permissionGroups]}function n(e){return e.permissionCategories.map((function(e){return e.subCategories})).flatMap((function(e){return Object.values(e)})).flatMap((function(e){return e.permissions}))}function r(e){return $(`#${e}-category-permissions`).find(".permission:not(.hidden)")}function o(){return $(".permission-categories__btn")}function s(){_.each(o(),(function(e){const t=$(e);const i=t.data("category-index");const n=r(i);const o=n.length;const s=n.find('[role="switch"]:checked').length;$(`label[for="${i}-category-btn"] .permissions-counter`).text(`(${s}/${o})`);t.toggleClass("disabled",o<=0)}))}function a(){return $('[id$="-category-permissions"]:visible')}function l(){$(`[id$="-category-permissions"]:visible .tile-body`).scrollTop(0)}function c(e){d(e);l(e);$('[id$="-category-btn"]').prop("checked",false);$(`#${e}-category-btn`).prop("checked",true);A()}function d(e){$('[id$="-category-permissions"]').hide();$(`#${e}-category-permissions`).show();C()}this.addAction({click:"change-category"},(function(){c(this.el.data("category-index"))}));function u(){e.filter((e=>m(e))).map((e=>$('[id="'+e.name+'"]').closest(".permission"))).forEach((e=>e.removeClass("hidden")))}function h(){const e=o().not(".disabled");if(y().length>0||e.length<=0){return}c(+e.first().data("category-index"))}this.addAction({click:"apply-filter",enterdown:"handle-filter-enterdown"},(function(){this.event.preventDefault();S();u();C();s();h();l();A()}));function p(e){const t=$("#type-filter").val();if(!t?.length){return true}return t.some((t=>v(t)(e)))}function f(e){const t=$("#name-filter").val().trim().toLowerCase();const i=$(`#${e.name.replaceAll(".","\\.")}`).parent().find("label").text().toLowerCase().trim();return!t||i.includes(t)}function g(e){const t=$("#right-filter").val()?.trim()?.toLowerCase();return!t||e.name.includes(t)}function m(e){return f(e)&&g(e)&&p(e)}function v(e){switch(e){case"granted":return function(e){return e.granted};case"grantedForUser":return function(e){return e.granted&&!e.showInfoTooltip};case"grantedByGroup":return function(e){return e.showInfoTooltip};case"grantable":return function(e){return!e.granted&&e.changeable};case"notGrantable":return function(e){return!e.granted&&!e.changeable};case"new":return function(e){return e.recent};default:return function(){return true}}}function b(){$(".permission_category-subcategory").show()}function y(){return a().find(".permission:visible")}function w(){const e=y().length<=0;$(".no-results-found").toggle(e)}function C(){b();$(".permission_category-subcategory").each((function(){return $(this).toggle($(this).find("li:visible").length>0)}));w()}function S(){$(".permission").addClass("hidden")}function A(){a().find("[data-toggle-checkboxes]").trigger("update-toggle-all")}}));AGN.Lib.Controller.new("widget-creation",(function(){let e;this.addDomInitializer("widget-creation",(function(){e=this.config.rdirDomain}));this.addAction({click:"generate-widget"},(function(){const e=AGN.Lib.Form.get($("#settings-tile form:visible"));if(!e.validate()){return}e.jqxhr().done((e=>{if(e.success){t(e.data)}AGN.Lib.JsonMessages(e.popups)}))}));function t(t){const i=`\n      <div class="emm-widget" data-emm-widget="${_.escape(t)}"></div> <script async src="${e}/assets/widgets.js" type="application/javascript"><\/script>\n    `.trim();const n=$("#preview-tile .tile-body");n.html(AGN.Lib.Template.text("widget-preview-block",{widgetCode:i}));AGN.Lib.CoreInitializer.run("tooltip",n)}}));AGN.Lib.Controller.newExtended("workflow-list","activeness-overview",(function(){this.addAction({click:"bulk-delete"},(function(){const e=AGN.Lib.Table.get(this.el).api;const t=e.getSelectedRows();const i=t.map((e=>e.id));if(!i.length){AGN.Lib.Messages.alert("messages.error.nothing_selected");return}$.ajax(AGN.url("/workflow/bulkDelete.action"),{method:"GET",traditional:true,data:{bulkIds:i}}).done((n=>{AGN.Lib.Confirm.create(n).done((n=>{if(i.length>1){const i=n.data;const r=t.filter((e=>i.includes(e.id)));e.applyTransaction({remove:r});AGN.Lib.JsonMessages(n.popups,true)}else{e.applyTransaction({remove:t});AGN.Lib.RenderMessages($(n))}}))}))}))}));AGN.Lib.Controller.new("workflow-view",(function(){const e=AGN.Lib.WM.Definitions;const i=AGN.Lib.WM.Editor;const n=AGN.Lib.WM.Node;const r=AGN.Lib.WM.EditorsHelper;const o=AGN.Lib.WM.MailingEditorHelper;const s=AGN.Lib.WM.Dialogs;const a=AGN.Lib.Confirm;const l=AGN.Lib.WM.Utils;const c=AGN.Lib.WM.DateTimeUtils;const d=AGN.Lib.Modal;let u;if(!jsPlumb.Connectors["FixedBezierConnector"]){jsPlumbUtil.extend(AGN.Opt.Components.JsPlumbFixedBezierConnector,jsPlumb.Connectors.AbstractConnector);jsPlumb.Connectors["FixedBezierConnector"]=AGN.Opt.Components.JsPlumbFixedBezierConnector}$(window).on("wheel mousewheel DOMMouseScroll",(e=>e.ctrlKey&&e.preventDefault()));$(window).on("resize viewportChanged",(()=>u?.updateMinimap()));$(document).on("keydown",f);$(document).on("keyup",g);$(document).on("mousedown",h);$(document).on("mouseup",p);function h(t){if(t.button===e.MOUSE_BUTTON_MIDDLE){u.setPanningEnabled(true)}}function p(t){if(t.button===e.MOUSE_BUTTON_MIDDLE){u.setPanningEnabled(false)}}function f(t){if($(t?.target).is("input, textarea")){return}switch(t.keyCode){case e.KEY_SHIFT:u.setMultiConnectionEnabled(true);break;case e.KEY_CTRL:u.setMouseWheelZoomEnabled(true);break}}function g(t){if($(t?.target).is("input, textarea")){return}switch(t.keyCode){case e.KEY_DELETE:u.deleteSelected();break;case e.KEY_SHIFT:u.setMultiConnectionEnabled(false);break;case e.KEY_ENTER:u.editIcon();break;case e.KEY_CTRL:u.setMouseWheelZoomEnabled(false);break}}this.addDomInitializer("workflow-view",(function(){const t=this.config;e.constants=t.constants;e.workflowId=t.workflowId;e.shortname=t.shortname;e.statisticUrl=t.statisticUrl;e.sentMailings=t.sentMailings||[];r.hideNodeEditors();const o=t.icons.map(n.deserialize);const s=n.deserializeConnections(t.icons,n.toMap(o));if(u){u.recycle()}u=new i(t.isEditable!==false,t.isContextMenuEnabled!==false,t.isFootnotesEnabled===true);u.setOnInitialized((function(){u.batch((function(){o.forEach((function(e){u.add(e)}));s.forEach((function(e){u.connect(e.source,e.target)}))}));u.updateNodeTitles();u.updateFootnotes();if(e.workflowId===0){e.intialSchema=u.serializeIcons()}}));u.setMinimapEnabled(t.isMinimapEnabled!==false);var a=$("#slider");if(a.exists()){a.slider({min:e.MIN_ZOOM,max:e.MAX_ZOOM,value:e.DEFAULT_ZOOM,step:e.ZOOM_STEP,create:function(){var t=$(this).slider("instance");u.setZoom(e.DEFAULT_ZOOM);u.setOnZoom((function(e){t.value(e)}))},slide:function(e,t){u.setZoom(t.value)}})}if(t.fitPdfPage===true){u.fitPdfPage()}window.waitStatus=t.initializerFinishStatus||"";m(t.showStatisticWithoutSave)}));function m(e){$(".navbar-nav a[href*='statistic.action']").on("click",(t=>{if(e){return}t.preventDefault();S(true,{showStatistic:true})}))}this.addDomInitializer("mailing-data-transfer-modal",(function(e){var t=e.find("input[data-mailing-param]");var i=e.find("#transferAllSettings");var n={};var r=[];t.on("change",(function(){var e=$(this);var o=e.data("mailing-param");if(e.prop("checked")){n[o]=true}else{delete n[o]}r=Object.keys(n);i.prop("checked",r.length==t.length)}));i.on("change",(function(){var e=i.prop("checked");t.prop("checked",e);if(e){t.each((function(){n[$(this).data("mailing-param")]=true}));r=Object.keys(n)}else{n={};r=[]}}));this.addAction({click:"transfer-mailing-data"},(function(){a.get(e).positive(r)}))}));this.addDomInitializer("own-workflow-expanding-modal",(function(e){this.addAction({click:"expand-own-workflow"},(function(){a.get(e).positive({workflowId:e.find("#workflow-select").val(),copyContent:e.find('[name="copyContent"]').val()==="true"})}))}));this.addDomInitializer("icon-comment-editor-initializer",(function(){const e=r.registerEditor("icon-comment",new AGN.Lib.WM.CommentEditor);this.addAction({click:"icon-comment-editor-save"},(()=>e.saveEditor()));this.addAction({click:"icon-comment-editor-cancel"},(()=>e.cancelEditor()))}));this.addDomInitializer("parameter-editor-initializer",(function(){r.registerEditor("parameter",new AGN.Lib.WM.ParameterNodeEditor(u))}));this.addDomInitializer("split-editor-initializer",(function(){r.registerEditor("split",new AGN.Lib.WM.SplitNodeEditor(u))}));this.addDomInitializer("deadline-editor-initializer",(function(){const e=r.registerEditor("deadline",new AGN.Lib.WM.DeadlineNodeEditor);this.addAction({change:"deadline-editor-update"},(()=>e.updateVisibility()));this.addAction({change:"deadline-editor-time-change"},(()=>e.onTimeChanged()))}));this.addDomInitializer("archive-editor-initializer",(function(){const e=r.registerEditor("archive",new AGN.Lib.WM.ArchiveNodeEditor(S));this.addAction({click:"archive-editor-new"},(()=>e.createNewArchive()))}));this.addDomInitializer("recipient-editor-initializer",(function(){const e=r.registerEditor("recipient",new AGN.Lib.WM.RecipientNodeEditor(S));this.addAction({click:"recipient-editor-create-new-target"},(()=>e.createNewTarget()));this.addAction({click:"recipient-editor-target-edit"},(function(){e.editTarget(this.el.data("target-id"))}))}));this.addDomInitializer("export-editor-initializer",(function(){const e=r.registerEditor("export",new AGN.Lib.WM.ExportNodeEditor(this.config,S));this.addAction({change:"export-editor-change"},(()=>e.onChange()));this.addAction({click:"export-editor-new"},(()=>e.createNewAutoExport()));this.addAction({click:"export-editor-autoexport"},(()=>e.editAutoExport()))}));this.addDomInitializer("import-editor-initializer",(function(){const e=r.registerEditor("import",new AGN.Lib.WM.ImportNodeEditor(this.config,S));this.addAction({change:"import-editor-change"},(()=>e.onChange()));this.addAction({click:"import-editor-new"},(()=>e.createNewAutoImport()));this.addAction({click:"import-editor-update"},(()=>e.editAutoImport()))}));this.addDomInitializer("start-editor-initializer",(function(){const e=new AGN.Lib.WM.StartStopNodeEditor(u,this.config,S);r.registerEditor("start",e);r.registerEditor("stop",e);this.addAction({change:"start-editor-execution-changed"},(()=>e.onExecutionChanged()));this.addAction({change:"start-editor-event-changed"},(()=>e.onStartEventChanged()));this.addAction({change:"start-editor-type-changed"},(()=>e.onStartTypeChanged()));this.addAction({change:"start-editor-rule-changed"},(()=>e.onRuleModeChanged()));this.addAction({change:"start-editor-reaction-changed"},(()=>e.onReactionChanged()));this.addAction({change:"start-editor-profile-field-changed"},(()=>e.onProfileFieldChanged()));this.addAction({click:"start-editor-add-rule"},(()=>e.addRule()));this.addAction({click:"start-editor-reminder-changed"},(()=>e.onReminderChanged()));this.addAction({change:"start-editor-schedule-reminder-date-changed"},(()=>e.onScheduleReminderDateChanged()));this.addAction({change:"start-editor-mailing-select"},(function(){e.onMailingSelectChange(this.el.val())}));this.addAction({click:"start-editor-rule-remove"},(function(){e.removeRuleRow(this.el.data("rule-index"))}))}));this.addDomInitializer("decision-editor-initializer",(function(){const e=r.registerEditor("decision",new AGN.Lib.WM.DecisionNodeEditor(u,this.config));this.addAction({change:"decision-editor-mailing-select"},(function(){e.onMailingSelectChange(this.el.val())}));this.addAction({click:"decision-editor-rule-remove"},(function(){e.removeRuleRow(this.el.data("rule-index"))}));this.addAction({click:"decision-editor-rule-add"},(()=>e.addRule()));this.addAction({change:"decision-editor-type-change"},(()=>e.onTypeChanged()));this.addAction({change:"decision-editor-criteria-change"},(()=>e.onCriteriaChanged()));this.addAction({change:"decision-editor-reaction-change"},(()=>e.onDecisionReactionChanged()));this.addAction({change:"decision-editor-profile-field-change"},(()=>e.onProfileFieldChanged()))}));this.addDomInitializer("mailing-editor-initializer",(function(){const e=new o(this.config,S);r.registerEditor("mailing",new AGN.Lib.WM.MailingNodeEditor(e));this.addAction({change:"mailing-editor-base-status-change"},(function(){e.onMailingsStatusChange(this.el.val())}));this.addAction({change:"mailing-editor-base-select-change"},(function(){e.onMailingSelectChange(this.el.val())}));this.addAction({click:"mailing-editor-base-toggle-settings"},(function(){const t=l.getConfigData(this.el);e.toggleSendSettings(t.editorId)}))}));this.addDomInitializer("followup-mailing-editor-initializer",(function(){const i=this.config.baseMailingData;const n=this.config.followupMailingData;i.$dropdown=$("#followup-m-editor");const s=new o(i,S);const a=new o(n,S);s.selectedFollowUpMailingId=0;s.findPreviousMailingIds=function(){const t=[];r.forEachPreviousNode((function(i){const n=i.getType();if(e.NODE_TYPES_MAILING.includes(n)&&e.NODE_TYPE_FOLLOWUP_MAILING!=n){t.push(i.getId())}}));return t};s.getMailingsByWorkStatus=function(e,i,n,o){var s=this;var a=$(this.formNameJId+" "+this.selectNameJId);var l=_.uniq(this.findPreviousMailingIds()).toString();a.attr("readonly","readonly");$.ajax({url:AGN.url("/workflow/getMailingsByWorkStatus.action"),data:{mailingTypes:this.mailingTypesForLoading.join(","),status:e,sort:i,order:n,mailingId:this.selectedFollowUpMailingId,parentMailingId:$(this.formNameJId+" "+this.selectNameJId).val(),mailingStatus:"W",takeMailsForPeriod:true,mailingsInCampaign:l},success:function(l){a.html("");a.append('<option value="0">'+t("workflow.defaults.no_mailing")+"</option>");for(var c=0;c<l.length;c++){var d=l[c];var u="";var h="";if(d.WORK_STATUS=="mailing.status.sent"||d.WORK_STATUS=="mailing.status.norecipients"){u="style='color: #808080;'"}if(o==d.MAILING_ID){h="selected"}a.append("<option "+u+" value='"+d.MAILING_ID+"' status='"+d.WORK_STATUS+"' senddate='"+d.SENDDATE+"' "+h+">"+d.SHORTNAME+"</option>")}a.removeAttr("readonly");s.mailingsStatus=e;s.mailingsSort=i;s.mailingsOrder=n;a.val(s.mailingId);r.initSelectWithValueOrChooseFirst(a,s.mailingId)}})};a.onMailingSelectChange=function(e){s.selectedFollowUpMailingId=e;this.setSelectMailingOptions(e)};r.registerEditor("followup_mailing",new AGN.Lib.WM.FollowupMailingNodeEditor(s,a,n.disableFollowup==="true"));this.addAction({change:"followup-mailing-editor-base-status-change"},(function(){a.onMailingsStatusChange(this.el.val())}));this.addAction({change:"followup-mailing-editor-base-select-change"},(function(){a.onMailingSelectChange(this.el.val())}));this.addAction({change:"followup-base-mailing-editor-base-status-change"},(function(){s.onMailingsStatusChange(this.el.val())}));this.addAction({change:"followup-base-mailing-editor-base-select-change"},(function(){s.onMailingSelectChange(this.el.val())}))}));this.addDomInitializer("sms-mailing-editor-initializer",(function(){const e=new o(this.config,S);r.registerEditor("mailing_mediatype_sms",new AGN.Lib.WM.SmsMailingNodeEditor(e));this.addAction({change:"sms-mailing-editor-base-status-change"},(function(){e.onMailingsStatusChange(this.el.val())}));this.addAction({change:"sms-mailing-editor-base-select-change"},(function(){e.onMailingSelectChange(this.el.val())}))}));this.addDomInitializer("post-mailing-editor-initializer",(function(){const e=new o(this.config,S);r.registerEditor("mailing_mediatype_post",new AGN.Lib.WM.PostMailingNodeEditor(e));this.addAction({change:"post-mailing-editor-base-status-change"},(function(){e.onMailingsStatusChange(this.el.val())}));this.addAction({change:"post-mailing-editor-base-select-change"},(function(){e.onMailingSelectChange(this.el.val())}))}));this.addDomInitializer("action-mailing-editor-initializer",(function(){const e=new o(this.config,S);r.registerEditor("actionbased_mailing",new AGN.Lib.WM.ActionBasedMailingNodeEditor(e));this.addAction({change:"action-mailing-editor-base-status-change"},(function(){e.onMailingsStatusChange(this.el.val())}));this.addAction({change:"action-mailing-editor-base-select-change"},(function(){e.onMailingSelectChange(this.el.val())}))}));this.addDomInitializer("date-based-mailing-editor-initializer",(function(){const e=new o(this.config,S);r.registerEditor("datebased_mailing",new AGN.Lib.WM.DateBasedMailingNodeEditor(e));this.addAction({change:"date-mailing-editor-base-status-change"},(function(){e.onMailingsStatusChange(this.el.val())}));this.addAction({change:"date-mailing-editor-base-select-change"},(function(){e.onMailingSelectChange(this.el.val())}))}));this.addAction({change:"save-node"},(function(){if(!r.isReadOnlyMode()){r.getCurrentEditor().save()}}));this.addAction({click:"mailing-editor-edit"},(()=>r.getCurrentEditor().editMailing()));this.addAction({click:"mailing-editor-new"},(()=>r.getCurrentEditor().createNewMailing()));this.addAction({click:"chain-mode"},(function(){u.setChainModeEnabled(!(u.isChainMode()||u.connectSelected()));$(this.el).toggleClass("active",u.isChainMode())}));this.addAction({click:"delete-selected"},(()=>u.deleteSelected()));this.addAction({click:"show-grid"},(()=>u.toggleGrid()));this.addAction({submission:"workflow-save"},(()=>S(true,{})));this.addAction({click:"align-all"},(()=>u.alignAll()));this.addAction({click:"undo"},(()=>u.undo()));this.addAction({click:"zoom-in"},(function(){const t=$("#slider").slider("instance");t.value(t.value()+e.ZOOM_STEP);u.setZoom(t.value())}));this.addAction({click:"zoom-out"},(function(){const t=$("#slider").slider("instance");t.value(t.value()-e.ZOOM_STEP);u.setZoom(t.value())}));this.addAction({click:"workflow-copy"},(function(){const t=e.workflowId;const i=u.getNodes().some((e=>e.isFilled()));s.confirmCopy(i).done((function(e){window.location.href=AGN.url(`/workflow/copy.action?workflowId=${t}&isWithContent=${e}`);return false}))}));this.addAction({click:"workflow-generate-pdf"},(function(){const t=e.workflowId<=0||!e.shortname;const i=u.hasUnsavedChanges();if(t||i){d.fromTemplate("save-before-pdf-modal")}else{window.location.href=AGN.url("/workflow/"+e.workflowId+"/generatePDF.action");AGN.Lib.Loader.hide()}}));this.addAction({click:"workflow-activate"},(()=>s.Activation(x()).done(v)));this.addAction({click:"workflow-deactivate"},(()=>C(true,{status:e.constants.statusInactive})));this.addAction({click:"workflow-pause"},(()=>S(true,{status:e.constants.statusPaused})));this.addAction({click:"workflow-unpause"},(()=>w({status:e.constants.statusActive})));this.addAction({click:"workflow-dry-run"},(function(){let t=false;let i=e.constants.statusOpen;if(e.constants.initialWorkflowStatus!=e.constants.statusTesting){t=true;i=e.constants.statusTesting}s.confirmTestingStartStop(t).done((()=>S(true,{status:i})))}));function v(){u.getNodesByType(e.NODE_TYPE_START).filter(b).forEach(y);S(true,{status:e.constants.statusActive})}function b(e){const t=_.clone(e.data.date);if(!t){return false}t.setHours(e.data.hour);t.setMinutes(e.data.minute);t.setSeconds(0);return t<=new Date}function y(e){const{hour:t,minute:i}=c.getCurrentAdminTime()||{};if(!t||!i){return}e.data.date=new Date;const n=e.data.date;n.setHours(parseInt(t,10));n.setMinutes(parseInt(i,10));n.setSeconds(n.getSeconds()>55?n.getSeconds()+120:n.getSeconds()+60);e.data.hour=n.getHours();e.data.minute=n.getMinutes();u.updateNodeTitle(e,true);A().setValueOnce("startTimeAdjusted",true)}function w(e){s.Activation([],true).done((()=>S(true,e)))}function C(e,t){s.Deactivation().done((()=>S(e,t)))}function S(e,t){if(e&&!E()){return}const i=A();t=$.extend({},t);Object.keys(t).forEach((function(e){i.setValueOnce(e,t[e])}));if(u.gridBackgroundShown){u.toggleGrid()}i.setValueOnce("workflowSchema",u.serializeIcons());i.setValueOnce("editorPositionLeft",-1);i.setValueOnce("editorPositionTop",-1);i.submit("static")}function A(){return AGN.Lib.Form.get($("form#workflowForm"))}function x(){return u.getNodesByTypes(e.NODE_TYPES_MAILING).map((e=>e.title)).filter((e=>e.trim()))}function E(){if($("#name").val().length<3){A().showFieldError("shortname",t("error.workflow.shortName"));return false}return true}this.addDomInitializer("open-edit-icon-initializer",(function(e){const t=e.json();const i=t.nodeId;const r=t.elementValue;if(!i||!r){return}const o=n.get($("#"+i));if(!o){return}T(o,r);u.editIcon(o);u.updateNodeTitle(o,true)}));function T(t,i){switch(t.type){case e.NODE_TYPE_MAILING:case e.NODE_TYPE_ACTION_BASED_MAILING:case e.NODE_TYPE_MAILING_MEDIATYPE_SMS:case e.NODE_TYPE_MAILING_MEDIATYPE_POST:case e.NODE_TYPE_DATE_BASED_MAILING:case e.NODE_TYPE_FOLLOWUP_MAILING:t.data.mailingId=i;break;case e.NODE_TYPE_RECIPIENT:if(i!="0"&&$.inArray(i,t.data.targets)==-1){t.data.targets.push(i)}break;case e.NODE_TYPE_ARCHIVE:t.data.campaignId=i;break;case e.NODE_TYPE_IMPORT:case e.NODE_TYPE_EXPORT:t.data.importexportId=i;break;default:console.debug("Unknown node type")}}}));AGN.Lib.Controller.new("wysiwyg-agn-tags",(function(){const e=AGN.Lib.Template;const t=AGN.Lib.Select;const i=AGN.Lib.Confirm;const n={};const r={};let o;n["agnFULLVIEW"]=()=>{const e=o.children("option:selected");const t=e.val();if(!t){return}if(!$("#createLinkToggle").prop("checked")){return`[${t}]`}let i=$("#tagLinkText").val();if(!i){i="fullview"}return`<a href="[${t}]">${i}</a>`};n["agnWEBVIEW"]=n["agnFULLVIEW"];n["agnFORM"]=function(){const e=o.children("option:selected");const t=e.val();const i=e.data("attributes");if(!t){return}if($("#createLinkToggle").prop("checked")===true){let e=$("#tagLinkText").val();if(!e){const t=i.findIndex((function(e){return e.name==="name"}));if(t>-1){e=$(`#agn-tag-attribute-${t}`).val()}}if(e){return`<a href="[${t+l(i)}]">${e}</a>`}}return`[${t+l(i)}]`};r["agnFORM"]=function(){const e=$("#createLinkToggle");if(e.prop("checked")!==true){$("#tagLinkText").hide()}e.on("change",(function(){$("#tagLinkText").toggle($(this).prop("checked"))}))};r["agnFULLVIEW"]=r["agnFORM"];r["agnWEBVIEW"]=r["agnFULLVIEW"];function s(t,i){const n=$("#agn-tag-attributes");n.empty();if(i&&i.length>0){i.forEach((function(t,i){switch(t.type){case"SELECT":n.append(e.text("agn-tag-select-attribute",{index:i,name:t.name,options:t.options}));break;case"TEXT":n.append(e.text("agn-tag-text-attribute",{index:i,name:t.name}));break}}))}const r=`${t}-extended-attributes`;if(e.exists(r)){const t=e.dom(r);if(t){n.append(t)}}AGN.runAll(n)}function a(){const e=o.children("option:selected");const t=e.val();if(t){return"["+t+l(e.data("attributes"))+"]"}return null}function l(e){var t="";if(e&&e.length>0){e.forEach((function(e,i){var n=$(`#agn-tag-attribute-${i}`);t+=" "+e.name+'="'+_.escape(n.val())+'"'}))}return t}this.addDomInitializer("wysiwyg-agn-tags",(function(){o=$("#agn-tag-name");this.config.forEach((function(e){var t=$("<option>",{value:e.name,text:e.name});o.append(t);t.data("attributes",e.attributes)}));t.get(o).selectFirstValue();o.trigger("change")}));this.addAction({change:"select-agn-tag"},(function(){const e=this.el.children("option:selected");const t=e.val();s(t,e.data("attributes"));const i=r[t];if(i){i()}}));this.addAction({click:"insert-agn-tag"},(function(){const e=o.val();const t=n[e];let r;if(t){r=t()}else{r=a()}if(r){i.get(this.el).positive(r)}}))}));AGN.Lib.Controller.new("wysiwyg-image-browser",(function(){let e;const t=i("mailingID");function i(e){const t=new RegExp("(?:[?&]|&amp;)"+e+"=([^&]+)","i");const i=window.location.search.match(t);return i&&i.length>1?i[1]:""}this.addDomInitializer("wysiwyg-image-browser",(function(){e=this.config;n()}));this.addAction({change:"update-image"},(function(){n()}));function n(){const e=l();const t=$("#image-preview");const i=$("#no-image-message");const n=!!(e&&e.length);i.toggleClass("hidden",n);t.parent().toggleClass("hidden",!n);if(n){t.attr("src",a(e))}}this.addAction({click:"submit-image"},(function(){const e=$(".navbar li .active").data("image-tab-name");if(e==="mediapool"){o()}else{r()}}));this.addAction({click:"close-window"},(function(){window.close()}));function r(){const e=a(l());s(e)}function o(){const e=$("tr.picked");if(e.exists()){const t=e.find("img").attr("src");s(t)}else{AGN.Lib.Messages.alert("messages.error.nothing_selected")}}function s(e){if(window.opener.Jodit){const t=i("editorId");window.opener.AGN.Lib.Messaging.send(`image-browser:selectedLink:${t}`,e)}else{window.opener.CKEDITOR.tools.callFunction(i("CKEditorFuncNum"),e)}window.close()}function a(i){if(i.substr(0,4).toLowerCase()!=="http"){return`${e.rdirDomain}/image?ci=${e.companyId}&mi=${t}&name=${encodeURIComponent(i)}`}return encodeURI(i)}function l(){return $("#image-dropdown").val()}}));(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.interact=e()}})((function(){var e,t,i;return function e(t,i,n){function r(s,a){if(!i[s]){if(!t[s]){var l=typeof require=="function"&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[s]={exports:{}};t[s][0].call(d.exports,(function(e){var i=t[s][1][e];return r(i?i:e)}),d,d.exports,e,t,i,n)}return i[s].exports}var o=typeof require=="function"&&require;for(var s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,i){"use strict";if(typeof window==="undefined"){t.exports=function(t){e("./src/utils/window").init(t);return e("./src/index")}}else{t.exports=e("./src/index")}},{"./src/index":19,"./src/utils/window":52}],2:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=e("./utils/extend.js");function o(e,t){for(var i=0;i<t.length;i++){var n;n=t[i];var r=n;if(e.immediatePropagationStopped){break}r(e)}}var s=function(){function e(t){n(this,e);this.options=r({},t||{})}e.prototype.fire=function e(t){var i=void 0;var n="on"+t.type;var r=this.global;if(i=this[t.type]){o(t,i)}if(this[n]){this[n](t)}if(!t.propagationStopped&&r&&(i=r[t.type])){o(t,i)}};e.prototype.on=function e(t,i){if(this[t]){this[t].push(i)}else{this[t]=[i]}};e.prototype.off=function e(t,i){var n=this[t];var r=n?n.indexOf(i):-1;if(r!==-1){n.splice(r,1)}if(n&&n.length===0||!i){this[t]=undefined}};return e}();t.exports=s},{"./utils/extend.js":41}],3:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=e("./utils/extend");var o=e("./utils/getOriginXY");var s=e("./defaultOptions");var a=e("./utils/Signals").new();var l=function(){function e(t,i,l,c,d,u){var h=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;n(this,e);var p=t.target;var f=(p&&p.options||s).deltaSource;var g=o(p,d,l);var m=c==="start";var v=c==="end";var b=m?t.startCoords:t.curCoords;var y=t.prevEvent;d=d||t.element;var w=r({},b.page);var C=r({},b.client);w.x-=g.x;w.y-=g.y;C.x-=g.x;C.y-=g.y;this.ctrlKey=i.ctrlKey;this.altKey=i.altKey;this.shiftKey=i.shiftKey;this.metaKey=i.metaKey;this.button=i.button;this.buttons=i.buttons;this.target=d;this.currentTarget=d;this.relatedTarget=u||null;this.preEnd=h;this.type=l+(c||"");this.interaction=t;this.interactable=p;this.t0=m?t.downTimes[t.downTimes.length-1]:y.t0;var _={interaction:t,event:i,action:l,phase:c,element:d,related:u,page:w,client:C,coords:b,starting:m,ending:v,deltaSource:f,iEvent:this};a.fire("set-xy",_);if(v){this.pageX=y.pageX;this.pageY=y.pageY;this.clientX=y.clientX;this.clientY=y.clientY}else{this.pageX=w.x;this.pageY=w.y;this.clientX=C.x;this.clientY=C.y}this.x0=t.startCoords.page.x-g.x;this.y0=t.startCoords.page.y-g.y;this.clientX0=t.startCoords.client.x-g.x;this.clientY0=t.startCoords.client.y-g.y;a.fire("set-delta",_);this.timeStamp=b.timeStamp;this.dt=t.pointerDelta.timeStamp;this.duration=this.timeStamp-this.t0;this.speed=t.pointerDelta[f].speed;this.velocityX=t.pointerDelta[f].vx;this.velocityY=t.pointerDelta[f].vy;this.swipe=v||c==="inertiastart"?this.getSwipe():null;a.fire("new",_)}e.prototype.getSwipe=function e(){var t=this.interaction;if(t.prevEvent.speed<600||this.timeStamp-t.prevEvent.timeStamp>150){return null}var i=180*Math.atan2(t.prevEvent.velocityY,t.prevEvent.velocityX)/Math.PI;var n=22.5;if(i<0){i+=360}var r=135-n<=i&&i<225+n;var o=225-n<=i&&i<315+n;var s=!r&&(315-n<=i||i<45+n);var a=!o&&45-n<=i&&i<135+n;return{up:o,down:a,left:r,right:s,angle:i,speed:t.prevEvent.speed,velocity:{x:t.prevEvent.velocityX,y:t.prevEvent.velocityY}}};e.prototype.preventDefault=function e(){};e.prototype.stopImmediatePropagation=function e(){this.immediatePropagationStopped=this.propagationStopped=true};e.prototype.stopPropagation=function e(){this.propagationStopped=true};return e}();a.on("set-delta",(function(e){var t=e.iEvent,i=e.interaction,n=e.starting,r=e.deltaSource;var o=n?t:i.prevEvent;if(r==="client"){t.dx=t.clientX-o.clientX;t.dy=t.clientY-o.clientY}else{t.dx=t.pageX-o.pageX;t.dy=t.pageY-o.pageY}}));l.signals=a;t.exports=l},{"./defaultOptions":18,"./utils/Signals":34,"./utils/extend":41,"./utils/getOriginXY":42}],4:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=e("./utils/clone");var o=e("./utils/is");var s=e("./utils/events");var a=e("./utils/extend");var l=e("./actions/base");var c=e("./scope");var d=e("./Eventable");var u=e("./defaultOptions");var h=e("./utils/Signals").new();var p=e("./utils/domUtils"),f=p.getElementRect,g=p.nodeContains,m=p.trySelector,v=p.matchesSelector;var b=e("./utils/window"),y=b.getWindow;var w=e("./utils/arr"),C=w.contains;var _=e("./utils/browser"),S=_.wheelEvent;c.interactables=[];var A=function(){function e(t,i){n(this,e);i=i||{};this.target=t;this.events=new d;this._context=i.context||c.document;this._win=y(m(t)?this._context:t);this._doc=this._win.document;h.fire("new",{target:t,options:i,interactable:this,win:this._win});c.addDocument(this._doc,this._win);c.interactables.push(this);this.set(i)}e.prototype.setOnEvents=function e(t,i){var n="on"+t;if(o.function(i.onstart)){this.events[n+"start"]=i.onstart}if(o.function(i.onmove)){this.events[n+"move"]=i.onmove}if(o.function(i.onend)){this.events[n+"end"]=i.onend}if(o.function(i.oninertiastart)){this.events[n+"inertiastart"]=i.oninertiastart}return this};e.prototype.setPerAction=function e(t,i){for(var n in i){if(n in u[t]){if(o.object(i[n])){this.options[t][n]=r(this.options[t][n]||{});a(this.options[t][n],i[n]);if(o.object(u.perAction[n])&&"enabled"in u.perAction[n]){this.options[t][n].enabled=i[n].enabled===false?false:true}}else if(o.bool(i[n])&&o.object(u.perAction[n])){this.options[t][n].enabled=i[n]}else if(i[n]!==undefined){this.options[t][n]=i[n]}}}};e.prototype.getRect=function e(t){t=t||this.target;if(o.string(this.target)&&!o.element(t)){t=this._context.querySelector(this.target)}return f(t)};e.prototype.rectChecker=function e(t){if(o.function(t)){this.getRect=t;return this}if(t===null){delete this.options.getRect;return this}return this.getRect};e.prototype._backCompatOption=function e(t,i){if(m(i)||o.object(i)){this.options[t]=i;for(var n=0;n<l.names.length;n++){var r;r=l.names[n];var s=r;this.options[s][t]=i}return this}return this.options[t]};e.prototype.origin=function e(t){return this._backCompatOption("origin",t)};e.prototype.deltaSource=function e(t){if(t==="page"||t==="client"){this.options.deltaSource=t;return this}return this.options.deltaSource};e.prototype.context=function e(){return this._context};e.prototype.inContext=function e(t){return this._context===t.ownerDocument||g(this._context,t)};e.prototype.fire=function e(t){this.events.fire(t);return this};e.prototype._onOffMultiple=function e(t,i,n,r){if(o.string(i)&&i.search(" ")!==-1){i=i.trim().split(/ +/)}if(o.array(i)){for(var s=0;s<i.length;s++){var a;a=i[s];var l=a;this[t](l,n,r)}return true}if(o.object(i)){for(var c in i){this[t](c,i[c],n)}return true}};e.prototype.on=function t(i,n,r){if(this._onOffMultiple("on",i,n,r)){return this}if(i==="wheel"){i=S}if(C(e.eventTypes,i)){this.events.on(i,n)}else if(o.string(this.target)){s.addDelegate(this.target,this._context,i,n,r)}else{s.add(this.target,i,n,r)}return this};e.prototype.off=function t(i,n,r){if(this._onOffMultiple("off",i,n,r)){return this}if(i==="wheel"){i=S}if(C(e.eventTypes,i)){this.events.off(i,n)}else if(o.string(this.target)){s.removeDelegate(this.target,this._context,i,n,r)}else{s.remove(this.target,i,n,r)}return this};e.prototype.set=function t(i){if(!o.object(i)){i={}}this.options=r(u.base);var n=r(u.perAction);for(var s in l.methodDict){var a=l.methodDict[s];this.options[s]=r(u[s]);this.setPerAction(s,n);this[a](i[s])}for(var c=0;c<e.settingsMethods.length;c++){var d;d=e.settingsMethods[c];var p=d;this.options[p]=u.base[p];if(p in i){this[p](i[p])}}h.fire("set",{options:i,interactable:this});return this};e.prototype.unset=function e(){s.remove(this.target,"all");if(o.string(this.target)){for(var t in s.delegatedEvents){var i=s.delegatedEvents[t];if(i.selectors[0]===this.target&&i.contexts[0]===this._context){i.selectors.splice(0,1);i.contexts.splice(0,1);i.listeners.splice(0,1);if(!i.selectors.length){i[t]=null}}s.remove(this._context,t,s.delegateListener);s.remove(this._context,t,s.delegateUseCapture,true)}}else{s.remove(this,"all")}h.fire("unset",{interactable:this});c.interactables.splice(c.interactables.indexOf(this),1);for(var n=0;n<(c.interactions||[]).length;n++){var r;r=(c.interactions||[])[n];var a=r;if(a.target===this&&a.interacting()&&!a._ending){a.stop()}}return c.interact};return e}();c.interactables.indexOfElement=function e(t,i){i=i||c.document;for(var n=0;n<this.length;n++){var r=this[n];if(r.target===t&&r._context===i){return n}}return-1};c.interactables.get=function e(t,i,n){var r=this[this.indexOfElement(t,i&&i.context)];return r&&(o.string(t)||n||r.inContext(t))?r:null};c.interactables.forEachMatch=function(e,t){for(var i=0;i<this.length;i++){var n;n=this[i];var r=n;var s=void 0;if((o.string(r.target)?o.element(e)&&v(e,r.target):e===r.target)&&r.inContext(e)){s=t(r)}if(s!==undefined){return s}}};A.eventTypes=c.eventTypes=[];A.signals=h;A.settingsMethods=["deltaSource","origin","preventDefault","rectChecker"];t.exports=A},{"./Eventable":2,"./actions/base":6,"./defaultOptions":18,"./scope":33,"./utils/Signals":34,"./utils/arr":35,"./utils/browser":36,"./utils/clone":37,"./utils/domUtils":39,"./utils/events":40,"./utils/extend":41,"./utils/is":46,"./utils/window":52}],5:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=e("./scope");var o=e("./utils");var s=e("./utils/events");var a=e("./utils/browser");var l=e("./utils/domObjects");var c=e("./utils/interactionFinder");var d=e("./utils/Signals").new();var u={};var h=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer"];var p=0;r.interactions=[];var f=function(){function e(t){var i=t.pointerType;n(this,e);this.target=null;this.element=null;this.prepared={name:null,axis:null,edges:null};this.pointers=[];this.pointerIds=[];this.downTargets=[];this.downTimes=[];this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0};this.downEvent=null;this.downPointer={};this._eventTarget=null;this._curEventTarget=null;this.prevEvent=null;this.pointerIsDown=false;this.pointerWasMoved=false;this._interacting=false;this._ending=false;this.pointerType=i;d.fire("new",this);r.interactions.push(this)}e.prototype.pointerDown=function e(t,i,n){var r=this.updatePointer(t,i,true);d.fire("down",{pointer:t,event:i,eventTarget:n,pointerIndex:r,interaction:this})};e.prototype.start=function e(t,i,n){if(this.interacting()||!this.pointerIsDown||this.pointerIds.length<(t.name==="gesture"?2:1)){return}if(r.interactions.indexOf(this)===-1){r.interactions.push(this)}o.copyAction(this.prepared,t);this.target=i;this.element=n;d.fire("action-start",{interaction:this,event:this.downEvent})};e.prototype.pointerMove=function t(i,n,r){if(!this.simulation){this.updatePointer(i);o.setCoords(this.curCoords,this.pointers)}var s=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y;var a=void 0;var l=void 0;if(this.pointerIsDown&&!this.pointerWasMoved){a=this.curCoords.client.x-this.startCoords.client.x;l=this.curCoords.client.y-this.startCoords.client.y;this.pointerWasMoved=o.hypot(a,l)>e.pointerMoveTolerance}var c={pointer:i,pointerIndex:this.getPointerIndex(i),event:n,eventTarget:r,dx:a,dy:l,duplicate:s,interaction:this,interactingBeforeMove:this.interacting()};if(!s){o.setCoordDeltas(this.pointerDelta,this.prevCoords,this.curCoords)}d.fire("move",c);if(!s){if(this.interacting()){this.doMove(c)}if(this.pointerWasMoved){o.copyCoords(this.prevCoords,this.curCoords)}}};e.prototype.doMove=function e(t){t=o.extend({pointer:this.pointers[0],event:this.prevEvent,eventTarget:this._eventTarget,interaction:this},t||{});d.fire("before-action-move",t);if(!this._dontFireMove){d.fire("action-move",t)}this._dontFireMove=false};e.prototype.pointerUp=function e(t,i,n,r){var o=this.getPointerIndex(t);d.fire(/cancel$/i.test(i.type)?"cancel":"up",{pointer:t,pointerIndex:o,event:i,eventTarget:n,curEventTarget:r,interaction:this});if(!this.simulation){this.end(i)}this.pointerIsDown=false;this.removePointer(t,i)};e.prototype.end=function e(t){this._ending=true;t=t||this.prevEvent;if(this.interacting()){d.fire("action-end",{event:t,interaction:this})}this.stop();this._ending=false};e.prototype.currentAction=function e(){return this._interacting?this.prepared.name:null};e.prototype.interacting=function e(){return this._interacting};e.prototype.stop=function e(){d.fire("stop",{interaction:this});if(this._interacting){d.fire("stop-active",{interaction:this});d.fire("stop-"+this.prepared.name,{interaction:this})}this.target=this.element=null;this._interacting=false;this.prepared.name=this.prevEvent=null};e.prototype.getPointerIndex=function e(t){if(this.pointerType==="mouse"||this.pointerType==="pen"){return 0}return this.pointerIds.indexOf(o.getPointerId(t))};e.prototype.updatePointer=function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:i&&/(down|start)$/i.test(i.type);var r=o.getPointerId(t);var s=this.getPointerIndex(t);if(s===-1){s=this.pointerIds.length;this.pointerIds[s]=r}if(n){d.fire("update-pointer-down",{pointer:t,event:i,down:n,pointerId:r,pointerIndex:s,interaction:this})}this.pointers[s]=t;return s};e.prototype.removePointer=function e(t,i){var n=this.getPointerIndex(t);if(n===-1){return}d.fire("remove-pointer",{pointer:t,event:i,pointerIndex:n,interaction:this});this.pointers.splice(n,1);this.pointerIds.splice(n,1);this.downTargets.splice(n,1);this.downTimes.splice(n,1)};e.prototype._updateEventTargets=function e(t,i){this._eventTarget=t;this._curEventTarget=i};return e}();for(var g=0;g<h.length;g++){var m=h[g];u[m]=v(m)}function v(e){return function(t){var i=o.getPointerType(t);var n=o.getEventTargets(t),s=n[0],l=n[1];var d=[];if(a.supportsTouch&&/touch/.test(t.type)){p=(new Date).getTime();for(var u=0;u<t.changedTouches.length;u++){var h;h=t.changedTouches[u];var g=h;var m=g;var v=c.search(m,t.type,s);d.push([m,v||new f({pointerType:i})])}}else{var b=false;if(!a.supportsPointerEvent&&/mouse/.test(t.type)){for(var y=0;y<r.interactions.length&&!b;y++){b=r.interactions[y].pointerType!=="mouse"&&r.interactions[y].pointerIsDown}b=b||(new Date).getTime()-p<500||t.timeStamp===0}if(!b){var w=c.search(t,t.type,s);if(!w){w=new f({pointerType:i})}d.push([t,w])}}for(var C=0;C<d.length;C++){var _=d[C];var S=_[0];var A=_[1];A._updateEventTargets(s,l);A[e](S,t,s,l)}}}function b(e){for(var t=0;t<r.interactions.length;t++){var i;i=r.interactions[t];var n=i;n.end(e);d.fire("endall",{event:e,interaction:n})}}var y={};var w=a.pEventTypes;if(l.PointerEvent){y[w.down]=u.pointerDown;y[w.move]=u.pointerMove;y[w.up]=u.pointerUp;y[w.cancel]=u.pointerUp}else{y.mousedown=u.pointerDown;y.mousemove=u.pointerMove;y.mouseup=u.pointerUp;y.touchstart=u.pointerDown;y.touchmove=u.pointerMove;y.touchend=u.pointerUp;y.touchcancel=u.pointerUp}y.blur=b;function C(e,t){var i=e.doc;var n=t.indexOf("add")===0?s.add:s.remove;for(var o in r.delegatedEvents){n(i,o,s.delegateListener);n(i,o,s.delegateUseCapture,true)}for(var l in y){n(i,l,y[l],a.isIOS?{passive:false}:undefined)}}d.on("update-pointer-down",(function(e){var t=e.interaction,i=e.pointer,n=e.pointerId,r=e.pointerIndex,s=e.event,a=e.eventTarget,l=e.down;t.pointerIds[r]=n;t.pointers[r]=i;if(l){t.pointerIsDown=true}if(!t.interacting()){o.setCoords(t.startCoords,t.pointers);o.copyCoords(t.curCoords,t.startCoords);o.copyCoords(t.prevCoords,t.startCoords);t.downEvent=s;t.downTimes[r]=t.curCoords.timeStamp;t.downTargets[r]=a||s&&o.getEventTargets(s)[0];t.pointerWasMoved=false;o.pointerExtend(t.downPointer,i)}}));r.signals.on("add-document",C);r.signals.on("remove-document",C);f.pointerMoveTolerance=1;f.doOnInteractions=v;f.endAll=b;f.signals=d;f.docEvents=y;r.endAllInteractions=b;t.exports=f},{"./scope":33,"./utils":44,"./utils/Signals":34,"./utils/browser":36,"./utils/domObjects":38,"./utils/events":40,"./utils/interactionFinder":45}],6:[function(e,t,i){"use strict";var n=e("../Interaction");var r=e("../InteractEvent");var o={firePrepared:s,names:[],methodDict:{}};n.signals.on("action-start",(function(e){var t=e.interaction,i=e.event;t._interacting=true;s(t,i,"start")}));n.signals.on("action-move",(function(e){var t=e.interaction,i=e.event,n=e.preEnd;s(t,i,"move",n);if(!t.interacting()){return false}}));n.signals.on("action-end",(function(e){var t=e.interaction,i=e.event;s(t,i,"end")}));function s(e,t,i,n){var o=e.prepared.name;var s=new r(e,t,o,i,e.element,null,n);e.target.fire(s);e.prevEvent=s}t.exports=o},{"../InteractEvent":3,"../Interaction":5}],7:[function(e,t,i){"use strict";var n=e("./base");var r=e("../utils");var o=e("../InteractEvent");var s=e("../Interactable");var a=e("../Interaction");var l=e("../defaultOptions");var c={defaults:{enabled:false,mouseButtons:null,origin:null,snap:null,restrict:null,inertia:null,autoScroll:null,startAxis:"xy",lockAxis:"xy"},checker:function e(t,i,n){var r=n.options.drag;return r.enabled?{name:"drag",axis:r.lockAxis==="start"?r.startAxis:r.lockAxis}:null},getCursor:function e(){return"move"}};a.signals.on("before-action-move",(function(e){var t=e.interaction;if(t.prepared.name!=="drag"){return}var i=t.prepared.axis;if(i==="x"){t.curCoords.page.y=t.startCoords.page.y;t.curCoords.client.y=t.startCoords.client.y;t.pointerDelta.page.speed=Math.abs(t.pointerDelta.page.vx);t.pointerDelta.client.speed=Math.abs(t.pointerDelta.client.vx);t.pointerDelta.client.vy=0;t.pointerDelta.page.vy=0}else if(i==="y"){t.curCoords.page.x=t.startCoords.page.x;t.curCoords.client.x=t.startCoords.client.x;t.pointerDelta.page.speed=Math.abs(t.pointerDelta.page.vy);t.pointerDelta.client.speed=Math.abs(t.pointerDelta.client.vy);t.pointerDelta.client.vx=0;t.pointerDelta.page.vx=0}}));o.signals.on("new",(function(e){var t=e.iEvent,i=e.interaction;if(t.type!=="dragmove"){return}var n=i.prepared.axis;if(n==="x"){t.pageY=i.startCoords.page.y;t.clientY=i.startCoords.client.y;t.dy=0}else if(n==="y"){t.pageX=i.startCoords.page.x;t.clientX=i.startCoords.client.x;t.dx=0}}));s.prototype.draggable=function(e){if(r.is.object(e)){this.options.drag.enabled=e.enabled===false?false:true;this.setPerAction("drag",e);this.setOnEvents("drag",e);if(/^(xy|x|y|start)$/.test(e.lockAxis)){this.options.drag.lockAxis=e.lockAxis}if(/^(xy|x|y)$/.test(e.startAxis)){this.options.drag.startAxis=e.startAxis}return this}if(r.is.bool(e)){this.options.drag.enabled=e;if(!e){this.ondragstart=this.ondragstart=this.ondragend=null}return this}return this.options.drag};n.drag=c;n.names.push("drag");r.merge(s.eventTypes,["dragstart","dragmove","draginertiastart","draginertiaresume","dragend"]);n.methodDict.drag="draggable";l.drag=c.defaults;t.exports=c},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":44,"./base":6}],8:[function(e,t,i){"use strict";var n=e("./base");var r=e("../utils");var o=e("../scope");var s=e("../interact");var a=e("../InteractEvent");var l=e("../Interactable");var c=e("../Interaction");var d=e("../defaultOptions");var u={defaults:{enabled:false,accept:null,overlap:"pointer"}};var h=false;c.signals.on("action-start",(function(e){var t=e.interaction,i=e.event;if(t.prepared.name!=="drag"){return}t.activeDrops.dropzones=[];t.activeDrops.elements=[];t.activeDrops.rects=[];t.dropEvents=null;if(!t.dynamicDrop){g(t.activeDrops,t.element)}var n=t.prevEvent;var r=v(t,i,n);if(r.activate){f(t.activeDrops,r.activate)}}));a.signals.on("new",(function(e){var t=e.interaction,i=e.iEvent,n=e.event;if(i.type!=="dragmove"&&i.type!=="dragend"){return}var r=t.element;var o=i;var s=m(o,n,r);t.dropTarget=s.dropzone;t.dropElement=s.element;t.dropEvents=v(t,n,o)}));c.signals.on("action-move",(function(e){var t=e.interaction;if(t.prepared.name!=="drag"){return}b(t,t.dropEvents)}));c.signals.on("action-end",(function(e){var t=e.interaction;if(t.prepared.name==="drag"){b(t,t.dropEvents)}}));c.signals.on("stop-drag",(function(e){var t=e.interaction;t.activeDrops={dropzones:null,elements:null,rects:null};t.dropEvents=null}));function p(e,t){var i=[];var n=[];for(var s=0;s<o.interactables.length;s++){var a;a=o.interactables[s];var l=a;if(!l.options.drop.enabled){continue}var c=l.options.drop.accept;if(r.is.element(c)&&c!==t||r.is.string(c)&&!r.matchesSelector(t,c)){continue}var d=r.is.string(l.target)?l._context.querySelectorAll(l.target):[l.target];for(var u=0;u<d.length;u++){var h;h=d[u];var p=h;if(p!==t){i.push(l);n.push(p)}}}return{elements:n,dropzones:i}}function f(e,t){var i=void 0;for(var n=0;n<e.dropzones.length;n++){var r=e.dropzones[n];var o=e.elements[n];if(o!==i){t.target=o;r.fire(t)}i=o}}function g(e,t){var i=p(e,t);e.dropzones=i.dropzones;e.elements=i.elements;e.rects=[];for(var n=0;n<e.dropzones.length;n++){e.rects[n]=e.dropzones[n].getRect(e.elements[n])}}function m(e,t,i){var n=e.interaction;var o=[];if(h){g(n.activeDrops,i)}for(var s=0;s<n.activeDrops.dropzones.length;s++){var a=n.activeDrops.dropzones[s];var l=n.activeDrops.elements[s];var c=n.activeDrops.rects[s];o.push(a.dropCheck(e,t,n.target,i,l,c)?l:null)}var d=r.indexOfDeepestElement(o);return{dropzone:n.activeDrops.dropzones[d]||null,element:n.activeDrops.elements[d]||null}}function v(e,t,i){var n={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};var o={dragEvent:i,interaction:e,target:e.dropElement,dropzone:e.dropTarget,relatedTarget:i.target,draggable:i.interactable,timeStamp:i.timeStamp};if(e.dropElement!==e.prevDropElement){if(e.prevDropTarget){n.leave=r.extend({type:"dragleave"},o);i.dragLeave=n.leave.target=e.prevDropElement;i.prevDropzone=n.leave.dropzone=e.prevDropTarget}if(e.dropTarget){n.enter={dragEvent:i,interaction:e,target:e.dropElement,dropzone:e.dropTarget,relatedTarget:i.target,draggable:i.interactable,timeStamp:i.timeStamp,type:"dragenter"};i.dragEnter=e.dropElement;i.dropzone=e.dropTarget}}if(i.type==="dragend"&&e.dropTarget){n.drop=r.extend({type:"drop"},o);i.dropzone=e.dropTarget;i.relatedTarget=e.dropElement}if(i.type==="dragstart"){n.activate=r.extend({type:"dropactivate"},o);n.activate.target=null;n.activate.dropzone=null}if(i.type==="dragend"){n.deactivate=r.extend({type:"dropdeactivate"},o);n.deactivate.target=null;n.deactivate.dropzone=null}if(i.type==="dragmove"&&e.dropTarget){n.move=r.extend({dragmove:i,type:"dropmove"},o);i.dropzone=e.dropTarget}return n}function b(e,t){var i=e.activeDrops,n=e.prevDropTarget,r=e.dropTarget,o=e.dropElement;if(t.leave){n.fire(t.leave)}if(t.move){r.fire(t.move)}if(t.enter){r.fire(t.enter)}if(t.drop){r.fire(t.drop)}if(t.deactivate){f(i,t.deactivate)}e.prevDropTarget=r;e.prevDropElement=o}l.prototype.dropzone=function(e){if(r.is.object(e)){this.options.drop.enabled=e.enabled===false?false:true;if(r.is.function(e.ondrop)){this.events.ondrop=e.ondrop}if(r.is.function(e.ondropactivate)){this.events.ondropactivate=e.ondropactivate}if(r.is.function(e.ondropdeactivate)){this.events.ondropdeactivate=e.ondropdeactivate}if(r.is.function(e.ondragenter)){this.events.ondragenter=e.ondragenter}if(r.is.function(e.ondragleave)){this.events.ondragleave=e.ondragleave}if(r.is.function(e.ondropmove)){this.events.ondropmove=e.ondropmove}if(/^(pointer|center)$/.test(e.overlap)){this.options.drop.overlap=e.overlap}else if(r.is.number(e.overlap)){this.options.drop.overlap=Math.max(Math.min(1,e.overlap),0)}if("accept"in e){this.options.drop.accept=e.accept}if("checker"in e){this.options.drop.checker=e.checker}return this}if(r.is.bool(e)){this.options.drop.enabled=e;if(!e){this.ondragenter=this.ondragleave=this.ondrop=this.ondropactivate=this.ondropdeactivate=null}return this}return this.options.drop};l.prototype.dropCheck=function(e,t,i,n,o,s){var a=false;if(!(s=s||this.getRect(o))){return this.options.drop.checker?this.options.drop.checker(e,t,a,this,o,i,n):false}var l=this.options.drop.overlap;if(l==="pointer"){var c=r.getOriginXY(i,n,"drag");var d=r.getPageXY(e);d.x+=c.x;d.y+=c.y;var u=d.x>s.left&&d.x<s.right;var h=d.y>s.top&&d.y<s.bottom;a=u&&h}var p=i.getRect(n);if(p&&l==="center"){var f=p.left+p.width/2;var g=p.top+p.height/2;a=f>=s.left&&f<=s.right&&g>=s.top&&g<=s.bottom}if(p&&r.is.number(l)){var m=Math.max(0,Math.min(s.right,p.right)-Math.max(s.left,p.left))*Math.max(0,Math.min(s.bottom,p.bottom)-Math.max(s.top,p.top));var v=m/(p.width*p.height);a=v>=l}if(this.options.drop.checker){a=this.options.drop.checker(e,t,a,this,o,i,n)}return a};l.signals.on("unset",(function(e){var t=e.interactable;t.dropzone(false)}));l.settingsMethods.push("dropChecker");c.signals.on("new",(function(e){e.dropTarget=null;e.dropElement=null;e.prevDropTarget=null;e.prevDropElement=null;e.dropEvents=null;e.activeDrops={dropzones:[],elements:[],rects:[]}}));c.signals.on("stop",(function(e){var t=e.interaction;t.dropTarget=t.dropElement=t.prevDropTarget=t.prevDropElement=null}));s.dynamicDrop=function(e){if(r.is.bool(e)){h=e;return s}return h};r.merge(l.eventTypes,["dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop"]);n.methodDict.drop="dropzone";d.drop=u.defaults;t.exports=u},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../interact":21,"../scope":33,"../utils":44,"./base":6}],9:[function(e,t,i){"use strict";var n=e("./base");var r=e("../utils");var o=e("../InteractEvent");var s=e("../Interactable");var a=e("../Interaction");var l=e("../defaultOptions");var c={defaults:{enabled:false,origin:null,restrict:null},checker:function e(t,i,n,r,o){if(o.pointerIds.length>=2){return{name:"gesture"}}return null},getCursor:function e(){return""}};o.signals.on("new",(function(e){var t=e.iEvent,i=e.interaction;if(t.type!=="gesturestart"){return}t.ds=0;i.gesture.startDistance=i.gesture.prevDistance=t.distance;i.gesture.startAngle=i.gesture.prevAngle=t.angle;i.gesture.scale=1}));o.signals.on("new",(function(e){var t=e.iEvent,i=e.interaction;if(t.type!=="gesturemove"){return}t.ds=t.scale-i.gesture.scale;i.target.fire(t);i.gesture.prevAngle=t.angle;i.gesture.prevDistance=t.distance;if(t.scale!==Infinity&&t.scale!==null&&t.scale!==undefined&&!isNaN(t.scale)){i.gesture.scale=t.scale}}));s.prototype.gesturable=function(e){if(r.is.object(e)){this.options.gesture.enabled=e.enabled===false?false:true;this.setPerAction("gesture",e);this.setOnEvents("gesture",e);return this}if(r.is.bool(e)){this.options.gesture.enabled=e;if(!e){this.ongesturestart=this.ongesturestart=this.ongestureend=null}return this}return this.options.gesture};o.signals.on("set-delta",(function(e){var t=e.interaction,i=e.iEvent,n=e.action,s=e.event,a=e.starting,l=e.ending,c=e.deltaSource;if(n!=="gesture"){return}var d=t.pointers;i.touches=[d[0],d[1]];if(a){i.distance=r.touchDistance(d,c);i.box=r.touchBBox(d);i.scale=1;i.ds=0;i.angle=r.touchAngle(d,undefined,c);i.da=0}else if(l||s instanceof o){i.distance=t.prevEvent.distance;i.box=t.prevEvent.box;i.scale=t.prevEvent.scale;i.ds=i.scale-1;i.angle=t.prevEvent.angle;i.da=i.angle-t.gesture.startAngle}else{i.distance=r.touchDistance(d,c);i.box=r.touchBBox(d);i.scale=i.distance/t.gesture.startDistance;i.angle=r.touchAngle(d,t.gesture.prevAngle,c);i.ds=i.scale-t.gesture.prevScale;i.da=i.angle-t.gesture.prevAngle}}));a.signals.on("new",(function(e){e.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0}}));n.gesture=c;n.names.push("gesture");r.merge(s.eventTypes,["gesturestart","gesturemove","gestureend"]);n.methodDict.gesture="gesturable";l.gesture=c.defaults;t.exports=c},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":44,"./base":6}],10:[function(e,t,i){"use strict";var n=e("./base");var r=e("../utils");var o=e("../utils/browser");var s=e("../InteractEvent");var a=e("../Interactable");var l=e("../Interaction");var c=e("../defaultOptions");var d=o.supportsTouch||o.supportsPointerEvent?20:10;var u={defaults:{enabled:false,mouseButtons:null,origin:null,snap:null,restrict:null,inertia:null,autoScroll:null,square:false,preserveAspectRatio:false,axis:"xy",margin:NaN,edges:null,invert:"none"},checker:function e(t,i,n,o,s,a){if(!a){return null}var l=r.extend({},s.curCoords.page);var c=n.options;if(c.resize.enabled){var u=c.resize;var p={left:false,right:false,top:false,bottom:false};if(r.is.object(u.edges)){for(var f in p){p[f]=h(f,u.edges[f],l,s._eventTarget,o,a,u.margin||d)}p.left=p.left&&!p.right;p.top=p.top&&!p.bottom;if(p.left||p.right||p.top||p.bottom){return{name:"resize",edges:p}}}else{var g=c.resize.axis!=="y"&&l.x>a.right-d;var m=c.resize.axis!=="x"&&l.y>a.bottom-d;if(g||m){return{name:"resize",axes:(g?"x":"")+(m?"y":"")}}}}return null},cursors:o.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"},getCursor:function e(t){if(t.axis){return u.cursors[t.name+t.axis]}else if(t.edges){var i="";var n=["top","bottom","left","right"];for(var r=0;r<4;r++){if(t.edges[n[r]]){i+=n[r]}}return u.cursors[i]}}};s.signals.on("new",(function(e){var t=e.iEvent,i=e.interaction;if(t.type!=="resizestart"||!i.prepared.edges){return}var n=i.target.getRect(i.element);var o=i.target.options.resize;if(o.square||o.preserveAspectRatio){var s=r.extend({},i.prepared.edges);s.top=s.top||s.left&&!s.bottom;s.left=s.left||s.top&&!s.right;s.bottom=s.bottom||s.right&&!s.top;s.right=s.right||s.bottom&&!s.left;i.prepared._linkedEdges=s}else{i.prepared._linkedEdges=null}if(o.preserveAspectRatio){i.resizeStartAspectRatio=n.width/n.height}i.resizeRects={start:n,current:r.extend({},n),inverted:r.extend({},n),previous:r.extend({},n),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}};t.rect=i.resizeRects.inverted;t.deltaRect=i.resizeRects.delta}));s.signals.on("new",(function(e){var t=e.iEvent,i=e.phase,n=e.interaction;if(i!=="move"||!n.prepared.edges){return}var o=n.target.options.resize;var s=o.invert;var a=s==="reposition"||s==="negate";var l=n.prepared.edges;var c=n.resizeRects.start;var d=n.resizeRects.current;var u=n.resizeRects.inverted;var h=n.resizeRects.delta;var p=r.extend(n.resizeRects.previous,u);var f=l;var g=t.dx;var m=t.dy;if(o.preserveAspectRatio||o.square){var v=o.preserveAspectRatio?n.resizeStartAspectRatio:1;l=n.prepared._linkedEdges;if(f.left&&f.bottom||f.right&&f.top){m=-g/v}else if(f.left||f.right){m=g/v}else if(f.top||f.bottom){g=m*v}}if(l.top){d.top+=m}if(l.bottom){d.bottom+=m}if(l.left){d.left+=g}if(l.right){d.right+=g}if(a){r.extend(u,d);if(s==="reposition"){var b=void 0;if(u.top>u.bottom){b=u.top;u.top=u.bottom;u.bottom=b}if(u.left>u.right){b=u.left;u.left=u.right;u.right=b}}}else{u.top=Math.min(d.top,c.bottom);u.bottom=Math.max(d.bottom,c.top);u.left=Math.min(d.left,c.right);u.right=Math.max(d.right,c.left)}u.width=u.right-u.left;u.height=u.bottom-u.top;for(var y in u){h[y]=u[y]-p[y]}t.edges=n.prepared.edges;t.rect=u;t.deltaRect=h}));a.prototype.resizable=function(e){if(r.is.object(e)){this.options.resize.enabled=e.enabled===false?false:true;this.setPerAction("resize",e);this.setOnEvents("resize",e);if(/^x$|^y$|^xy$/.test(e.axis)){this.options.resize.axis=e.axis}else if(e.axis===null){this.options.resize.axis=c.resize.axis}if(r.is.bool(e.preserveAspectRatio)){this.options.resize.preserveAspectRatio=e.preserveAspectRatio}else if(r.is.bool(e.square)){this.options.resize.square=e.square}return this}if(r.is.bool(e)){this.options.resize.enabled=e;if(!e){this.onresizestart=this.onresizestart=this.onresizeend=null}return this}return this.options.resize};function h(e,t,i,n,o,s,a){if(!t){return false}if(t===true){var l=r.is.number(s.width)?s.width:s.right-s.left;var c=r.is.number(s.height)?s.height:s.bottom-s.top;if(l<0){if(e==="left"){e="right"}else if(e==="right"){e="left"}}if(c<0){if(e==="top"){e="bottom"}else if(e==="bottom"){e="top"}}if(e==="left"){return i.x<(l>=0?s.left:s.right)+a}if(e==="top"){return i.y<(c>=0?s.top:s.bottom)+a}if(e==="right"){return i.x>(l>=0?s.right:s.left)-a}if(e==="bottom"){return i.y>(c>=0?s.bottom:s.top)-a}}if(!r.is.element(n)){return false}return r.is.element(t)?t===n:r.matchesUpTo(n,t,o)}l.signals.on("new",(function(e){e.resizeAxes="xy"}));s.signals.on("set-delta",(function(e){var t=e.interaction,i=e.iEvent,n=e.action;if(n!=="resize"||!t.resizeAxes){return}var r=t.target.options;if(r.resize.square){if(t.resizeAxes==="y"){i.dx=i.dy}else{i.dy=i.dx}i.axes="xy"}else{i.axes=t.resizeAxes;if(t.resizeAxes==="x"){i.dy=0}else if(t.resizeAxes==="y"){i.dx=0}}}));n.resize=u;n.names.push("resize");r.merge(a.eventTypes,["resizestart","resizemove","resizeinertiastart","resizeinertiaresume","resizeend"]);n.methodDict.resize="resizable";c.resize=u.defaults;t.exports=u},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":44,"../utils/browser":36,"./base":6}],11:[function(e,t,i){"use strict";var n=e("./utils/raf");var r=e("./utils/window").getWindow;var o=e("./utils/is");var s=e("./utils/domUtils");var a=e("./Interaction");var l=e("./defaultOptions");var c={defaults:{enabled:false,container:null,margin:60,speed:300},interaction:null,i:null,x:0,y:0,isScrolling:false,prevTime:0,start:function e(t){c.isScrolling=true;n.cancel(c.i);c.interaction=t;c.prevTime=(new Date).getTime();c.i=n.request(c.scroll)},stop:function e(){c.isScrolling=false;n.cancel(c.i)},scroll:function e(){var t=c.interaction.target.options[c.interaction.prepared.name].autoScroll;var i=t.container||r(c.interaction.element);var s=(new Date).getTime();var a=(s-c.prevTime)/1e3;var l=t.speed*a;if(l>=1){if(o.window(i)){i.scrollBy(c.x*l,c.y*l)}else if(i){i.scrollLeft+=c.x*l;i.scrollTop+=c.y*l}c.prevTime=s}if(c.isScrolling){n.cancel(c.i);c.i=n.request(c.scroll)}},check:function e(t,i){var n=t.options;return n[i].autoScroll&&n[i].autoScroll.enabled},onInteractionMove:function e(t){var i=t.interaction,n=t.pointer;if(!(i.interacting()&&c.check(i.target,i.prepared.name))){return}if(i.simulation){c.x=c.y=0;return}var a=void 0;var l=void 0;var d=void 0;var u=void 0;var h=i.target.options[i.prepared.name].autoScroll;var p=h.container||r(i.element);if(o.window(p)){u=n.clientX<c.margin;a=n.clientY<c.margin;l=n.clientX>p.innerWidth-c.margin;d=n.clientY>p.innerHeight-c.margin}else{var f=s.getElementClientRect(p);u=n.clientX<f.left+c.margin;a=n.clientY<f.top+c.margin;l=n.clientX>f.right-c.margin;d=n.clientY>f.bottom-c.margin}c.x=l?1:u?-1:0;c.y=d?1:a?-1:0;if(!c.isScrolling){c.margin=h.margin;c.speed=h.speed;c.start(i)}}};a.signals.on("stop-active",(function(){c.stop()}));a.signals.on("action-move",c.onInteractionMove);l.perAction.autoScroll=c.defaults;t.exports=c},{"./Interaction":5,"./defaultOptions":18,"./utils/domUtils":39,"./utils/is":46,"./utils/raf":50,"./utils/window":52}],12:[function(e,t,i){"use strict";var n=e("../Interactable");var r=e("../actions/base");var o=e("../utils/is");var s=e("../utils/domUtils");var a=e("../utils"),l=a.warnOnce;n.prototype.getAction=function(e,t,i,n){var r=this.defaultActionChecker(e,t,i,n);if(this.options.actionChecker){return this.options.actionChecker(e,t,r,this,n,i)}return r};n.prototype.ignoreFrom=l((function(e){return this._backCompatOption("ignoreFrom",e)}),"Interactable.ignoreForm() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue}).");n.prototype.allowFrom=l((function(e){return this._backCompatOption("allowFrom",e)}),"Interactable.allowForm() has been deprecated. Use Interactble.draggable({allowFrom: newValue}).");n.prototype.testIgnore=function(e,t,i){if(!e||!o.element(i)){return false}if(o.string(e)){return s.matchesUpTo(i,e,t)}else if(o.element(e)){return s.nodeContains(e,i)}return false};n.prototype.testAllow=function(e,t,i){if(!e){return true}if(!o.element(i)){return false}if(o.string(e)){return s.matchesUpTo(i,e,t)}else if(o.element(e)){return s.nodeContains(e,i)}return false};n.prototype.testIgnoreAllow=function(e,t,i){return!this.testIgnore(e.ignoreFrom,t,i)&&this.testAllow(e.allowFrom,t,i)};n.prototype.actionChecker=function(e){if(o.function(e)){this.options.actionChecker=e;return this}if(e===null){delete this.options.actionChecker;return this}return this.options.actionChecker};n.prototype.styleCursor=function(e){if(o.bool(e)){this.options.styleCursor=e;return this}if(e===null){delete this.options.styleCursor;return this}return this.options.styleCursor};n.prototype.defaultActionChecker=function(e,t,i,n){var o=this.getRect(n);var s=t.buttons||{0:1,1:4,3:8,4:16}[t.button];var a=null;for(var l=0;l<r.names.length;l++){var c;c=r.names[l];var d=c;if(i.pointerIsDown&&/mouse|pointer/.test(i.pointerType)&&(s&this.options[d].mouseButtons)===0){continue}a=r[d].checker(e,t,this,n,i,o);if(a){return a}}}},{"../Interactable":4,"../actions/base":6,"../utils":44,"../utils/domUtils":39,"../utils/is":46}],13:[function(e,t,i){"use strict";var n=e("../interact");var r=e("../Interactable");var o=e("../Interaction");var s=e("../actions/base");var a=e("../defaultOptions");var l=e("../scope");var c=e("../utils");var d=e("../utils/Signals").new();e("./InteractableMethods");var u={signals:d,withinInteractionLimit:m,maxInteractions:Infinity,defaults:{perAction:{manualStart:false,max:Infinity,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}},setActionDefaults:function e(t){c.extend(t.defaults,u.defaults.perAction)},validateAction:h};o.signals.on("down",(function(e){var t=e.interaction,i=e.pointer,n=e.event,r=e.eventTarget;if(t.interacting()){return}var o=f(t,i,n,r);g(t,o)}));o.signals.on("move",(function(e){var t=e.interaction,i=e.pointer,n=e.event,r=e.eventTarget;if(t.pointerType!=="mouse"||t.pointerIsDown||t.interacting()){return}var o=f(t,i,n,r);g(t,o)}));o.signals.on("move",(function(e){var t=e.interaction,i=e.event;if(!t.pointerIsDown||t.interacting()||!t.pointerWasMoved||!t.prepared.name){return}d.fire("before-start",e);var n=t.target;if(t.prepared.name&&n){if(n.options[t.prepared.name].manualStart||!m(n,t.element,t.prepared)){t.stop(i)}else{t.start(t.prepared,n,t.element)}}}));function h(e,t,i,n){if(c.is.object(e)&&t.testIgnoreAllow(t.options[e.name],i,n)&&t.options[e.name].enabled&&m(t,i,e)){return e}return null}function p(e,t,i,n,r,o){for(var s=0,a=n.length;s<a;s++){var l=n[s];var c=r[s];var d=h(l.getAction(t,i,e,c),l,c,o);if(d){return{action:d,target:l,element:c}}}return{}}function f(e,t,i,n){var r=[];var o=[];var s=n;function a(e){r.push(e);o.push(s)}while(c.is.element(s)){r=[];o=[];l.interactables.forEachMatch(s,a);var d=p(e,t,i,r,o,n);if(d.action&&!d.target.options[d.action.name].manualStart){return d}s=c.parentNode(s)}return{}}function g(e,t){var i=t.action,n=t.target,r=t.element;i=i||{};if(e.target&&e.target.options.styleCursor){e.target._doc.documentElement.style.cursor=""}e.target=n;e.element=r;c.copyAction(e.prepared,i);if(n&&n.options.styleCursor){var o=i?s[i.name].getCursor(i):"";e.target._doc.documentElement.style.cursor=o}d.fire("prepared",{interaction:e})}o.signals.on("stop",(function(e){var t=e.interaction;var i=t.target;if(i&&i.options.styleCursor){i._doc.documentElement.style.cursor=""}}));function m(e,t,i){var n=e.options;var r=n[i.name].max;var o=n[i.name].maxPerElement;var s=0;var a=0;var c=0;if(!(r&&o&&u.maxInteractions)){return}for(var d=0;d<l.interactions.length;d++){var h;h=l.interactions[d];var p=h;var f=p.prepared.name;if(!p.interacting()){continue}s++;if(s>=u.maxInteractions){return false}if(p.target!==e){continue}a+=f===i.name|0;if(a>=r){return false}if(p.element===t){c++;if(f!==i.name||c>=o){return false}}}return u.maxInteractions>0}n.maxInteractions=function(e){if(c.is.number(e)){u.maxInteractions=e;return n}return u.maxInteractions};r.settingsMethods.push("styleCursor");r.settingsMethods.push("actionChecker");r.settingsMethods.push("ignoreFrom");r.settingsMethods.push("allowFrom");a.base.actionChecker=null;a.base.styleCursor=true;c.extend(a.perAction,u.defaults.perAction);t.exports=u},{"../Interactable":4,"../Interaction":5,"../actions/base":6,"../defaultOptions":18,"../interact":21,"../scope":33,"../utils":44,"../utils/Signals":34,"./InteractableMethods":12}],14:[function(e,t,i){"use strict";var n=e("./base");var r=e("../scope");var o=e("../utils/is");var s=e("../utils/domUtils"),a=s.parentNode;n.setActionDefaults(e("../actions/drag"));n.signals.on("before-start",(function(e){var t=e.interaction,i=e.eventTarget,s=e.dx,c=e.dy;if(t.prepared.name!=="drag"){return}var d=Math.abs(s);var u=Math.abs(c);var h=t.target.options.drag;var p=h.startAxis;var f=d>u?"x":d<u?"y":"xy";t.prepared.axis=h.lockAxis==="start"?f[0]:h.lockAxis;if(f!=="xy"&&p!=="xy"&&p!==f){t.prepared.name=null;var g=i;var m=function e(r){if(r===t.target){return}var o=t.target.options.drag;if(!o.manualStart&&r.testIgnoreAllow(o,g,i)){var s=r.getAction(t.downPointer,t.downEvent,t,g);if(s&&s.name==="drag"&&l(f,r)&&n.validateAction(s,r,g,i)){return r}}};while(o.element(g)){var v=r.interactables.forEachMatch(g,m);if(v){t.prepared.name="drag";t.target=v;t.element=g;break}g=a(g)}}}));function l(e,t){if(!t){return false}var i=t.options.drag.startAxis;return e==="xy"||i==="xy"||i===e}},{"../actions/drag":7,"../scope":33,"../utils/domUtils":39,"../utils/is":46,"./base":13}],15:[function(e,t,i){"use strict";e("./base").setActionDefaults(e("../actions/gesture"))},{"../actions/gesture":9,"./base":13}],16:[function(e,t,i){"use strict";var n=e("./base");var r=e("../Interaction");n.defaults.perAction.hold=0;n.defaults.perAction.delay=0;r.signals.on("new",(function(e){e.autoStartHoldTimer=null}));n.signals.on("prepared",(function(e){var t=e.interaction;var i=o(t);if(i>0){t.autoStartHoldTimer=setTimeout((function(){t.start(t.prepared,t.target,t.element)}),i)}}));r.signals.on("move",(function(e){var t=e.interaction,i=e.duplicate;if(t.pointerWasMoved&&!i){clearTimeout(t.autoStartHoldTimer)}}));n.signals.on("before-start",(function(e){var t=e.interaction;var i=o(t);if(i>0){t.prepared.name=null}}));function o(e){var t=e.prepared&&e.prepared.name;if(!t){return null}var i=e.target.options;return i[t].hold||i[t].delay}t.exports={getHoldDuration:o}},{"../Interaction":5,"./base":13}],17:[function(e,t,i){"use strict";e("./base").setActionDefaults(e("../actions/resize"))},{"../actions/resize":10,"./base":13}],18:[function(e,t,i){"use strict";t.exports={base:{accept:null,preventDefault:"auto",deltaSource:"page"},perAction:{origin:{x:0,y:0},inertia:{enabled:false,resistance:10,minSpeed:100,endSpeed:10,allowResume:true,smoothEndDuration:300}}}},{}],19:[function(e,t,i){"use strict";e("./inertia");e("./modifiers/snap");e("./modifiers/restrict");e("./pointerEvents/base");e("./pointerEvents/holdRepeat");e("./pointerEvents/interactableTargets");e("./autoStart/hold");e("./actions/gesture");e("./actions/resize");e("./actions/drag");e("./actions/drop");e("./modifiers/snapSize");e("./modifiers/restrictEdges");e("./modifiers/restrictSize");e("./autoStart/gesture");e("./autoStart/resize");e("./autoStart/drag");e("./interactablePreventDefault.js");e("./autoScroll");t.exports=e("./interact")},{"./actions/drag":7,"./actions/drop":8,"./actions/gesture":9,"./actions/resize":10,"./autoScroll":11,"./autoStart/drag":14,"./autoStart/gesture":15,"./autoStart/hold":16,"./autoStart/resize":17,"./inertia":20,"./interact":21,"./interactablePreventDefault.js":22,"./modifiers/restrict":24,"./modifiers/restrictEdges":25,"./modifiers/restrictSize":26,"./modifiers/snap":27,"./modifiers/snapSize":28,"./pointerEvents/base":30,"./pointerEvents/holdRepeat":31,"./pointerEvents/interactableTargets":32}],20:[function(e,t,i){"use strict";var n=e("./InteractEvent");var r=e("./Interaction");var o=e("./modifiers/base");var s=e("./utils");var a=e("./utils/raf");r.signals.on("new",(function(e){e.inertiaStatus={active:false,smoothEnd:false,allowResume:false,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,lambda_v0:0,one_ve_v0:0,i:null};e.boundInertiaFrame=function(){return c.apply(e)};e.boundSmoothEndFrame=function(){return d.apply(e)}}));r.signals.on("down",(function(e){var t=e.interaction,i=e.event,l=e.pointer,c=e.eventTarget;var d=t.inertiaStatus;if(d.active){var u=c;while(s.is.element(u)){if(u===t.element){a.cancel(d.i);d.active=false;t.simulation=null;t.updatePointer(l);s.setCoords(t.curCoords,t.pointers);var h={interaction:t};r.signals.fire("before-action-move",h);r.signals.fire("action-resume",h);var p=new n(t,i,t.prepared.name,"inertiaresume",t.element);t.target.fire(p);t.prevEvent=p;o.resetStatuses(t.modifierStatuses);s.copyCoords(t.prevCoords,t.curCoords);break}u=s.parentNode(u)}}}));r.signals.on("up",(function(e){var t=e.interaction,i=e.event;var r=t.inertiaStatus;if(!t.interacting()||r.active){return}var c=t.target;var d=c&&c.options;var u=d&&t.prepared.name&&d[t.prepared.name].inertia;var h=(new Date).getTime();var p={};var f=s.extend({},t.curCoords.page);var g=t.pointerDelta.client.speed;var m=false;var v=void 0;var b=u&&u.enabled&&t.prepared.name!=="gesture"&&i!==r.startEvent;var y=b&&h-t.curCoords.timeStamp<50&&g>u.minSpeed&&g>u.endSpeed;var w={interaction:t,pageCoords:f,statuses:p,preEnd:true,requireEndOnly:true};if(b&&!y){o.resetStatuses(p);v=o.setAll(w);if(v.shouldMove&&v.locked){m=true}}if(!(y||m)){return}s.copyCoords(r.upCoords,t.curCoords);t.pointers[0]=r.startEvent=new n(t,i,t.prepared.name,"inertiastart",t.element);r.t0=h;r.active=true;r.allowResume=u.allowResume;t.simulation=r;c.fire(r.startEvent);if(y){r.vx0=t.pointerDelta.client.vx;r.vy0=t.pointerDelta.client.vy;r.v0=g;l(t,r);s.extend(f,t.curCoords.page);f.x+=r.xe;f.y+=r.ye;o.resetStatuses(p);v=o.setAll(w);r.modifiedXe+=v.dx;r.modifiedYe+=v.dy;r.i=a.request(t.boundInertiaFrame)}else{r.smoothEnd=true;r.xe=v.dx;r.ye=v.dy;r.sx=r.sy=0;r.i=a.request(t.boundSmoothEndFrame)}}));r.signals.on("stop-active",(function(e){var t=e.interaction;var i=t.inertiaStatus;if(i.active){a.cancel(i.i);i.active=false;t.simulation=null}}));function l(e,t){var i=e.target.options[e.prepared.name].inertia;var n=i.resistance;var r=-Math.log(i.endSpeed/t.v0)/n;t.x0=e.prevEvent.pageX;t.y0=e.prevEvent.pageY;t.t0=t.startEvent.timeStamp/1e3;t.sx=t.sy=0;t.modifiedXe=t.xe=(t.vx0-r)/n;t.modifiedYe=t.ye=(t.vy0-r)/n;t.te=r;t.lambda_v0=n/t.v0;t.one_ve_v0=1-i.endSpeed/t.v0}function c(){u(this);s.setCoordDeltas(this.pointerDelta,this.prevCoords,this.curCoords);var e=this.inertiaStatus;var t=this.target.options[this.prepared.name].inertia;var i=t.resistance;var n=(new Date).getTime()/1e3-e.t0;if(n<e.te){var r=1-(Math.exp(-i*n)-e.lambda_v0)/e.one_ve_v0;if(e.modifiedXe===e.xe&&e.modifiedYe===e.ye){e.sx=e.xe*r;e.sy=e.ye*r}else{var o=s.getQuadraticCurvePoint(0,0,e.xe,e.ye,e.modifiedXe,e.modifiedYe,r);e.sx=o.x;e.sy=o.y}this.doMove();e.i=a.request(this.boundInertiaFrame)}else{e.sx=e.modifiedXe;e.sy=e.modifiedYe;this.doMove();this.end(e.startEvent);e.active=false;this.simulation=null}s.copyCoords(this.prevCoords,this.curCoords)}function d(){u(this);var e=this.inertiaStatus;var t=(new Date).getTime()-e.t0;var i=this.target.options[this.prepared.name].inertia.smoothEndDuration;if(t<i){e.sx=s.easeOutQuad(t,0,e.xe,i);e.sy=s.easeOutQuad(t,0,e.ye,i);this.pointerMove(e.startEvent,e.startEvent);e.i=a.request(this.boundSmoothEndFrame)}else{e.sx=e.xe;e.sy=e.ye;this.pointerMove(e.startEvent,e.startEvent);this.end(e.startEvent);e.smoothEnd=e.active=false;this.simulation=null}}function u(e){var t=e.inertiaStatus;if(!t.active){return}var i=t.upCoords.page;var n=t.upCoords.client;s.setCoords(e.curCoords,[{pageX:i.x+t.sx,pageY:i.y+t.sy,clientX:n.x+t.sx,clientY:n.y+t.sy}])}},{"./InteractEvent":3,"./Interaction":5,"./modifiers/base":23,"./utils":44,"./utils/raf":50}],21:[function(e,t,i){"use strict";var n=e("./utils/browser");var r=e("./utils/events");var o=e("./utils");var s=e("./scope");var a=e("./Interactable");var l=e("./Interaction");var c={};function d(e,t){var i=s.interactables.get(e,t);if(!i){i=new a(e,t);i.events.global=c}return i}d.isSet=function(e,t){return s.interactables.indexOfElement(e,t&&t.context)!==-1};d.on=function(e,t,i){if(o.is.string(e)&&e.search(" ")!==-1){e=e.trim().split(/ +/)}if(o.is.array(e)){for(var n=0;n<e.length;n++){var l;l=e[n];var u=l;d.on(u,t,i)}return d}if(o.is.object(e)){for(var h in e){d.on(h,e[h],t)}return d}if(o.contains(a.eventTypes,e)){if(!c[e]){c[e]=[t]}else{c[e].push(t)}}else{r.add(s.document,e,t,{options:i})}return d};d.off=function(e,t,i){if(o.is.string(e)&&e.search(" ")!==-1){e=e.trim().split(/ +/)}if(o.is.array(e)){for(var n=0;n<e.length;n++){var l;l=e[n];var u=l;d.off(u,t,i)}return d}if(o.is.object(e)){for(var h in e){d.off(h,e[h],t)}return d}if(!o.contains(a.eventTypes,e)){r.remove(s.document,e,t,i)}else{var p=void 0;if(e in c&&(p=c[e].indexOf(t))!==-1){c[e].splice(p,1)}}return d};d.debug=function(){return s};d.getPointerAverage=o.pointerAverage;d.getTouchBBox=o.touchBBox;d.getTouchDistance=o.touchDistance;d.getTouchAngle=o.touchAngle;d.getElementRect=o.getElementRect;d.getElementClientRect=o.getElementClientRect;d.matchesSelector=o.matchesSelector;d.closest=o.closest;d.supportsTouch=function(){return n.supportsTouch};d.supportsPointerEvent=function(){return n.supportsPointerEvent};d.stop=function(e){for(var t=s.interactions.length-1;t>=0;t--){s.interactions[t].stop(e)}return d};d.pointerMoveTolerance=function(e){if(o.is.number(e)){l.pointerMoveTolerance=e;return d}return l.pointerMoveTolerance};d.addDocument=s.addDocument;d.removeDocument=s.removeDocument;s.interact=d;t.exports=d},{"./Interactable":4,"./Interaction":5,"./scope":33,"./utils":44,"./utils/browser":36,"./utils/events":40}],22:[function(e,t,i){"use strict";var n=e("./Interactable");var r=e("./Interaction");var o=e("./scope");var s=e("./utils/is");var a=e("./utils/events");var l=e("./utils/browser");var c=e("./utils/domUtils"),d=c.nodeContains,u=c.matchesSelector;n.prototype.preventDefault=function(e){if(/^(always|never|auto)$/.test(e)){this.options.preventDefault=e;return this}if(s.bool(e)){this.options.preventDefault=e?"always":"never";return this}return this.options.preventDefault};n.prototype.checkAndPreventDefault=function(e){var t=this.options.preventDefault;if(t==="never"){return}if(t==="always"){e.preventDefault();return}if(a.supportsPassive&&/^touch(start|move)$/.test(e.type)&&!l.isIOS){return}if(/^(mouse|pointer|touch)*(down|start)/i.test(e.type)){return}if(s.element(e.target)&&u(e.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")){return}e.preventDefault()};function h(e){var t=e.interaction,i=e.event;if(t.target){t.target.checkAndPreventDefault(i)}}var p=["down","move","up","cancel"];for(var f=0;f<p.length;f++){var g=p[f];r.signals.on(g,h)}r.docEvents.dragstart=function e(t){for(var i=0;i<o.interactions.length;i++){var n;n=o.interactions[i];var r=n;if(r.element&&(r.element===t.target||d(r.element,t.target))){r.target.checkAndPreventDefault(t);return}}}},{"./Interactable":4,"./Interaction":5,"./scope":33,"./utils/browser":36,"./utils/domUtils":39,"./utils/events":40,"./utils/is":46}],23:[function(e,t,i){"use strict";var n=e("../InteractEvent");var r=e("../Interaction");var o=e("../utils/extend");var s={names:[],setOffsets:function e(t){var i=t.interaction,n=t.pageCoords;var r=i.target,o=i.element,a=i.startOffset;var l=r.getRect(o);if(l){a.left=n.x-l.left;a.top=n.y-l.top;a.right=l.right-n.x;a.bottom=l.bottom-n.y;if(!("width"in l)){l.width=l.right-l.left}if(!("height"in l)){l.height=l.bottom-l.top}}else{a.left=a.top=a.right=a.bottom=0}t.rect=l;t.interactable=r;t.element=o;for(var c=0;c<s.names.length;c++){var d;d=s.names[c];var u=d;t.options=r.options[i.prepared.name][u];if(!t.options){continue}i.modifierOffsets[u]=s[u].setOffset(t)}},setAll:function e(t){var i=t.interaction,n=t.statuses,r=t.preEnd,l=t.requireEndOnly;var c={dx:0,dy:0,changed:false,locked:false,shouldMove:true};t.modifiedCoords=o({},t.pageCoords);for(var d=0;d<s.names.length;d++){var u;u=s.names[d];var h=u;var p=s[h];var f=i.target.options[i.prepared.name][h];if(!a(f,r,l)){continue}t.status=t.status=n[h];t.options=f;t.offset=t.interaction.modifierOffsets[h];p.set(t);if(t.status.locked){t.modifiedCoords.x+=t.status.dx;t.modifiedCoords.y+=t.status.dy;c.dx+=t.status.dx;c.dy+=t.status.dy;c.locked=true}}c.shouldMove=!t.status||!c.locked||t.status.changed;return c},resetStatuses:function e(t){for(var i=0;i<s.names.length;i++){var n;n=s.names[i];var r=n;var o=t[r]||{};o.dx=o.dy=0;o.modifiedX=o.modifiedY=NaN;o.locked=false;o.changed=true;t[r]=o}return t},start:function e(t,i){var n=t.interaction;var r={interaction:n,pageCoords:(i==="action-resume"?n.curCoords:n.startCoords).page,startOffset:n.startOffset,statuses:n.modifierStatuses,preEnd:false,requireEndOnly:false};s.setOffsets(r);s.resetStatuses(r.statuses);r.pageCoords=o({},n.startCoords.page);n.modifierResult=s.setAll(r)},beforeMove:function e(t){var i=t.interaction,n=t.preEnd,r=t.interactingBeforeMove;var o=s.setAll({interaction:i,preEnd:n,pageCoords:i.curCoords.page,statuses:i.modifierStatuses,requireEndOnly:false});if(!o.shouldMove&&r){i._dontFireMove=true}i.modifierResult=o},end:function e(t){var i=t.interaction,n=t.event;for(var r=0;r<s.names.length;r++){var o;o=s.names[r];var l=o;var c=i.target.options[i.prepared.name][l];if(a(c,true,true)){i.doMove({event:n,preEnd:true});break}}},setXY:function e(t){var i=t.iEvent,n=t.interaction;var r=o({},t);for(var a=0;a<s.names.length;a++){var l=s.names[a];r.options=n.target.options[n.prepared.name][l];if(!r.options){continue}var c=s[l];r.status=n.modifierStatuses[l];i[l]=c.modifyCoords(r)}}};r.signals.on("new",(function(e){e.startOffset={left:0,right:0,top:0,bottom:0};e.modifierOffsets={};e.modifierStatuses=s.resetStatuses({});e.modifierResult=null}));r.signals.on("action-start",s.start);r.signals.on("action-resume",s.start);r.signals.on("before-action-move",s.beforeMove);r.signals.on("action-end",s.end);n.signals.on("set-xy",s.setXY);function a(e,t,i){return e&&e.enabled&&(t||!e.endOnly)&&(!i||e.endOnly)}t.exports=s},{"../InteractEvent":3,"../Interaction":5,"../utils/extend":41}],24:[function(e,t,i){"use strict";var n=e("./base");var r=e("../utils");var o=e("../defaultOptions");var s={defaults:{enabled:false,endOnly:false,restriction:null,elementRect:null},setOffset:function e(t){var i=t.rect,n=t.startOffset,r=t.options;var o=r&&r.elementRect;var s={};if(i&&o){s.left=n.left-i.width*o.left;s.top=n.top-i.height*o.top;s.right=n.right-i.width*(1-o.right);s.bottom=n.bottom-i.height*(1-o.bottom)}else{s.left=s.top=s.right=s.bottom=0}return s},set:function e(t){var i=t.modifiedCoords,n=t.interaction,o=t.status,s=t.options;if(!s){return o}var l=o.useStatusXY?{x:o.x,y:o.y}:r.extend({},i);var c=a(s.restriction,n,l);if(!c){return o}o.dx=0;o.dy=0;o.locked=false;var d=c;var u=l.x;var h=l.y;var p=n.modifierOffsets.restrict;if("x"in c&&"y"in c){u=Math.max(Math.min(d.x+d.width-p.right,l.x),d.x+p.left);h=Math.max(Math.min(d.y+d.height-p.bottom,l.y),d.y+p.top)}else{u=Math.max(Math.min(d.right-p.right,l.x),d.left+p.left);h=Math.max(Math.min(d.bottom-p.bottom,l.y),d.top+p.top)}o.dx=u-l.x;o.dy=h-l.y;o.changed=o.modifiedX!==u||o.modifiedY!==h;o.locked=!!(o.dx||o.dy);o.modifiedX=u;o.modifiedY=h},modifyCoords:function e(t){var i=t.page,n=t.client,r=t.status,o=t.phase,s=t.options;var a=s&&s.elementRect;if(s&&s.enabled&&!(o==="start"&&a&&r.locked)){if(r.locked){i.x+=r.dx;i.y+=r.dy;n.x+=r.dx;n.y+=r.dy;return{dx:r.dx,dy:r.dy}}}},getRestrictionRect:a};function a(e,t,i){if(r.is.function(e)){return r.resolveRectLike(e,t.target,t.element,[i.x,i.y,t])}else{return r.resolveRectLike(e,t.target,t.element)}}n.restrict=s;n.names.push("restrict");o.perAction.restrict=s.defaults;t.exports=s},{"../defaultOptions":18,"../utils":44,"./base":23}],25:[function(e,t,i){"use strict";var n=e("./base");var r=e("../utils");var o=e("../utils/rect");var s=e("../defaultOptions");var a=e("../actions/resize");var l=e("./restrict"),c=l.getRestrictionRect;var d={top:+Infinity,left:+Infinity,bottom:-Infinity,right:-Infinity};var u={top:-Infinity,left:-Infinity,bottom:+Infinity,right:+Infinity};var h={defaults:{enabled:false,endOnly:false,min:null,max:null,offset:null},setOffset:function e(t){var i=t.interaction,n=t.startOffset,o=t.options;if(!o){return r.extend({},n)}var s=c(o.offset,i,i.startCoords.page);if(s){return{top:n.top+s.y,left:n.left+s.x,bottom:n.bottom+s.y,right:n.right+s.x}}return n},set:function e(t){var i=t.modifiedCoords,n=t.interaction,s=t.status,a=t.offset,l=t.options;var h=n.prepared.linkedEdges||n.prepared.edges;if(!n.interacting()||!h){return}var p=s.useStatusXY?{x:s.x,y:s.y}:r.extend({},i);var f=o.xywhToTlbr(c(l.inner,n,p))||d;var g=o.xywhToTlbr(c(l.outer,n,p))||u;var m=p.x;var v=p.y;s.dx=0;s.dy=0;s.locked=false;if(h.top){v=Math.min(Math.max(g.top+a.top,p.y),f.top+a.top)}else if(h.bottom){v=Math.max(Math.min(g.bottom-a.bottom,p.y),f.bottom-a.bottom)}if(h.left){m=Math.min(Math.max(g.left+a.left,p.x),f.left+a.left)}else if(h.right){m=Math.max(Math.min(g.right-a.right,p.x),f.right-a.right)}s.dx=m-p.x;s.dy=v-p.y;s.changed=s.modifiedX!==m||s.modifiedY!==v;s.locked=!!(s.dx||s.dy);s.modifiedX=m;s.modifiedY=v},modifyCoords:function e(t){var i=t.page,n=t.client,r=t.status,o=t.phase,s=t.options;if(s&&s.enabled&&!(o==="start"&&r.locked)){if(r.locked){i.x+=r.dx;i.y+=r.dy;n.x+=r.dx;n.y+=r.dy;return{dx:r.dx,dy:r.dy}}}},noInner:d,noOuter:u,getRestrictionRect:c};n.restrictEdges=h;n.names.push("restrictEdges");s.perAction.restrictEdges=h.defaults;a.defaults.restrictEdges=h.defaults;t.exports=h},{"../actions/resize":10,"../defaultOptions":18,"../utils":44,"../utils/rect":51,"./base":23,"./restrict":24}],26:[function(e,t,i){"use strict";var n=e("./base");var r=e("./restrictEdges");var o=e("../utils");var s=e("../utils/rect");var a=e("../defaultOptions");var l=e("../actions/resize");var c={width:-Infinity,height:-Infinity};var d={width:+Infinity,height:+Infinity};var u={defaults:{enabled:false,endOnly:false,min:null,max:null},setOffset:function e(t){var i=t.interaction;return i.startOffset},set:function e(t){var i=t.interaction,n=t.options;var a=i.prepared.linkedEdges||i.prepared.edges;if(!i.interacting()||!a){return}var l=s.xywhToTlbr(i.resizeRects.inverted);var u=s.tlbrToXywh(r.getRestrictionRect(n.min,i))||c;var h=s.tlbrToXywh(r.getRestrictionRect(n.max,i))||d;t.options={enabled:n.enabled,endOnly:n.endOnly,inner:o.extend({},r.noInner),outer:o.extend({},r.noOuter)};if(a.top){t.options.inner.top=l.bottom-u.height;t.options.outer.top=l.bottom-h.height}else if(a.bottom){t.options.inner.bottom=l.top+u.height;t.options.outer.bottom=l.top+h.height}if(a.left){t.options.inner.left=l.right-u.width;t.options.outer.left=l.right-h.width}else if(a.right){t.options.inner.right=l.left+u.width;t.options.outer.right=l.left+h.width}r.set(t)},modifyCoords:r.modifyCoords};n.restrictSize=u;n.names.push("restrictSize");a.perAction.restrictSize=u.defaults;l.defaults.restrictSize=u.defaults;t.exports=u},{"../actions/resize":10,"../defaultOptions":18,"../utils":44,"../utils/rect":51,"./base":23,"./restrictEdges":25}],27:[function(e,t,i){"use strict";var n=e("./base");var r=e("../interact");var o=e("../utils");var s=e("../defaultOptions");var a={defaults:{enabled:false,endOnly:false,range:Infinity,targets:null,offsets:null,relativePoints:null},setOffset:function e(t){var i=t.interaction,n=t.interactable,r=t.element,s=t.rect,a=t.startOffset,l=t.options;var c=[];var d=o.rectToXY(o.resolveRectLike(l.origin));var u=d||o.getOriginXY(n,r,i.prepared.name);l=l||n.options[i.prepared.name].snap||{};var h=void 0;if(l.offset==="startCoords"){h={x:i.startCoords.page.x-u.x,y:i.startCoords.page.y-u.y}}else{var p=o.resolveRectLike(l.offset,n,r,[i]);h=o.rectToXY(p)||{x:0,y:0}}if(s&&l.relativePoints&&l.relativePoints.length){for(var f=0;f<l.relativePoints.length;f++){var g;g=l.relativePoints[f];var m=g;var v=m.x;var b=m.y;c.push({x:a.left-s.width*v+h.x,y:a.top-s.height*b+h.y})}}else{c.push(h)}return c},set:function e(t){var i=t.interaction,n=t.modifiedCoords,r=t.status,s=t.options,a=t.offset;var l=[];var c=void 0;var d=void 0;var u=void 0;if(r.useStatusXY){d={x:r.x,y:r.y}}else{var h=o.getOriginXY(i.target,i.element,i.prepared.name);d=o.extend({},n);d.x-=h.x;d.y-=h.y}r.realX=d.x;r.realY=d.y;var p=s.targets?s.targets.length:0;for(var f=0;f<a.length;f++){var g;g=a[f];var m=g;var v=m.x;var b=m.y;var y=d.x-v;var w=d.y-b;for(var C=0;C<(s.targets||[]).length;C++){var _;_=(s.targets||[])[C];var S=_;if(o.is.function(S)){c=S(y,w,i)}else{c=S}if(!c){continue}l.push({x:o.is.number(c.x)?c.x+v:y,y:o.is.number(c.y)?c.y+b:w,range:o.is.number(c.range)?c.range:s.range})}}var A={target:null,inRange:false,distance:0,range:0,dx:0,dy:0};for(u=0,p=l.length;u<p;u++){c=l[u];var x=c.range;var E=c.x-d.x;var T=c.y-d.y;var D=o.hypot(E,T);var M=D<=x;if(x===Infinity&&A.inRange&&A.range!==Infinity){M=false}if(!A.target||(M?A.inRange&&x!==Infinity?D/x<A.distance/A.range:x===Infinity&&A.range!==Infinity||D<A.distance:!A.inRange&&D<A.distance)){A.target=c;A.distance=D;A.range=x;A.inRange=M;A.dx=E;A.dy=T;r.range=x}}var k=void 0;if(A.target){k=r.modifiedX!==A.target.x||r.modifiedY!==A.target.y;r.modifiedX=A.target.x;r.modifiedY=A.target.y}else{k=true;r.modifiedX=NaN;r.modifiedY=NaN}r.dx=A.dx;r.dy=A.dy;r.changed=k||A.inRange&&!r.locked;r.locked=A.inRange},modifyCoords:function e(t){var i=t.page,n=t.client,r=t.status,o=t.phase,s=t.options;var a=s&&s.relativePoints;if(s&&s.enabled&&!(o==="start"&&a&&a.length)){if(r.locked){i.x+=r.dx;i.y+=r.dy;n.x+=r.dx;n.y+=r.dy}return{range:r.range,locked:r.locked,x:r.modifiedX,y:r.modifiedY,realX:r.realX,realY:r.realY,dx:r.dx,dy:r.dy}}}};r.createSnapGrid=function(e){return function(t,i){var n=e.limits||{left:-Infinity,right:Infinity,top:-Infinity,bottom:Infinity};var r=0;var s=0;if(o.is.object(e.offset)){r=e.offset.x;s=e.offset.y}var a=Math.round((t-r)/e.x);var l=Math.round((i-s)/e.y);var c=Math.max(n.left,Math.min(n.right,a*e.x+r));var d=Math.max(n.top,Math.min(n.bottom,l*e.y+s));return{x:c,y:d,range:e.range}}};n.snap=a;n.names.push("snap");s.perAction.snap=a.defaults;t.exports=a},{"../defaultOptions":18,"../interact":21,"../utils":44,"./base":23}],28:[function(e,t,i){"use strict";var n=e("./base");var r=e("./snap");var o=e("../defaultOptions");var s=e("../actions/resize");var a=e("../utils/");var l={defaults:{enabled:false,endOnly:false,range:Infinity,targets:null,offsets:null},setOffset:function e(t){var i=t.interaction,n=t.options;var o=i.prepared.edges;if(!o){return}t.options={relativePoints:[{x:o.left?0:1,y:o.top?0:1}],origin:{x:0,y:0},offset:"self",range:n.range};var s=r.setOffset(t);t.options=n;return s},set:function e(t){var i=t.interaction,n=t.options,o=t.offset,s=t.modifiedCoords;var l=a.extend({},s);var c=l.x-o[0].x;var d=l.y-o[0].y;t.options=a.extend({},n);t.options.targets=[];for(var u=0;u<(n.targets||[]).length;u++){var h;h=(n.targets||[])[u];var p=h;var f=void 0;if(a.is.function(p)){f=p(c,d,i)}else{f=p}if(!f){continue}if("width"in f&&"height"in f){f.x=f.width;f.y=f.height}t.options.targets.push(f)}r.set(t)},modifyCoords:function e(t){var i=t.options;t.options=a.extend({},i);t.options.enabled=i.enabled;t.options.relativePoints=[null];r.modifyCoords(t)}};n.snapSize=l;n.names.push("snapSize");o.perAction.snapSize=l.defaults;s.defaults.snapSize=l.defaults;t.exports=l},{"../actions/resize":10,"../defaultOptions":18,"../utils/":44,"./base":23,"./snap":27}],29:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=e("../utils/pointerUtils");t.exports=function(){function e(t,i,o,s,a){n(this,e);r.pointerExtend(this,o);if(o!==i){r.pointerExtend(this,i)}this.interaction=a;this.timeStamp=(new Date).getTime();this.originalEvent=o;this.type=t;this.pointerId=r.getPointerId(i);this.pointerType=r.getPointerType(i);this.target=s;this.currentTarget=null;if(t==="tap"){var l=a.getPointerIndex(i);this.dt=this.timeStamp-a.downTimes[l];var c=this.timeStamp-a.tapTime;this.double=!!(a.prevTap&&a.prevTap.type!=="doubletap"&&a.prevTap.target===this.target&&c<500)}else if(t==="doubletap"){this.dt=i.timeStamp-a.tapTime}}e.prototype.subtractOrigin=function e(t){var i=t.x,n=t.y;this.pageX-=i;this.pageY-=n;this.clientX-=i;this.clientY-=n;return this};e.prototype.addOrigin=function e(t){var i=t.x,n=t.y;this.pageX+=i;this.pageY+=n;this.clientX+=i;this.clientY+=n;return this};e.prototype.preventDefault=function e(){this.originalEvent.preventDefault()};e.prototype.stopPropagation=function e(){this.propagationStopped=true};e.prototype.stopImmediatePropagation=function e(){this.immediatePropagationStopped=this.propagationStopped=true};return e}()},{"../utils/pointerUtils":49}],30:[function(e,t,i){"use strict";var n=e("./PointerEvent");var r=e("../Interaction");var o=e("../utils");var s=e("../defaultOptions");var a=e("../utils/Signals").new();var l=["down","up","cancel"];var c=["down","up","cancel"];var d={PointerEvent:n,fire:u,collectEventTargets:h,signals:a,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:["down","move","up","cancel","tap","doubletap","hold"]};function u(e){var t=e.interaction,i=e.pointer,r=e.event,s=e.eventTarget,l=e.type,c=l===undefined?e.pointerEvent.type:l,d=e.targets,p=d===undefined?h(e):d,f=e.pointerEvent,g=f===undefined?new n(c,i,r,s,t):f;var m={interaction:t,pointer:i,event:r,eventTarget:s,targets:p,type:c,pointerEvent:g};for(var v=0;v<p.length;v++){var b=p[v];for(var y in b.props||{}){g[y]=b.props[y]}var w=o.getOriginXY(b.eventable,b.element);g.subtractOrigin(w);g.eventable=b.eventable;g.currentTarget=b.element;b.eventable.fire(g);g.addOrigin(w);if(g.immediatePropagationStopped||g.propagationStopped&&v+1<p.length&&p[v+1].element!==g.currentTarget){break}}a.fire("fired",m);if(c==="tap"){var C=g.double?u({interaction:t,pointer:i,event:r,eventTarget:s,type:"doubletap"}):g;t.prevTap=C;t.tapTime=C.timeStamp}return g}function h(e){var t=e.interaction,i=e.pointer,n=e.event,r=e.eventTarget,s=e.type;var l=t.getPointerIndex(i);if(s==="tap"&&(t.pointerWasMoved||!(t.downTargets[l]&&t.downTargets[l]===r))){return[]}var c=o.getPath(r);var d={interaction:t,pointer:i,event:n,eventTarget:r,type:s,path:c,targets:[],element:null};for(var u=0;u<c.length;u++){var h;h=c[u];var p=h;d.element=p;a.fire("collect-targets",d)}if(s==="hold"){d.targets=d.targets.filter((function(e){return e.eventable.options.holdDuration===t.holdTimers[l].duration}))}return d.targets}r.signals.on("update-pointer-down",(function(e){var t=e.interaction,i=e.pointerIndex;t.holdTimers[i]={duration:Infinity,timeout:null}}));r.signals.on("remove-pointer",(function(e){var t=e.interaction,i=e.pointerIndex;t.holdTimers.splice(i,1)}));r.signals.on("move",(function(e){var t=e.interaction,i=e.pointer,n=e.event,r=e.eventTarget,o=e.duplicateMove;var s=t.getPointerIndex(i);if(!o&&(!t.pointerIsDown||t.pointerWasMoved)){if(t.pointerIsDown){clearTimeout(t.holdTimers[s].timeout)}u({interaction:t,pointer:i,event:n,eventTarget:r,type:"move"})}}));r.signals.on("down",(function(e){var t=e.interaction,i=e.pointer,n=e.event,r=e.eventTarget,s=e.pointerIndex;var l=t.holdTimers[s];var c=o.getPath(r);var d={interaction:t,pointer:i,event:n,eventTarget:r,type:"hold",targets:[],path:c,element:null};for(var h=0;h<c.length;h++){var p;p=c[h];var f=p;d.element=f;a.fire("collect-targets",d)}if(!d.targets.length){return}var g=Infinity;for(var m=0;m<d.targets.length;m++){var v;v=d.targets[m];var b=v;var y=b.eventable.options.holdDuration;if(y<g){g=y}}l.duration=g;l.timeout=setTimeout((function(){u({interaction:t,eventTarget:r,pointer:i,event:n,type:"hold"})}),g)}));r.signals.on("up",(function(e){var t=e.interaction,i=e.pointer,n=e.event,r=e.eventTarget;if(!t.pointerWasMoved){u({interaction:t,eventTarget:r,pointer:i,event:n,type:"tap"})}}));var p=["up","cancel"];for(var f=0;f<p.length;f++){var g=p[f];r.signals.on(g,(function(e){var t=e.interaction,i=e.pointerIndex;if(t.holdTimers[i]){clearTimeout(t.holdTimers[i].timeout)}}))}function m(e){return function(t){var i=t.interaction,n=t.pointer,r=t.event,o=t.eventTarget;u({interaction:i,eventTarget:o,pointer:n,event:r,type:e})}}for(var v=0;v<l.length;v++){r.signals.on(l[v],m(c[v]))}r.signals.on("new",(function(e){e.prevTap=null;e.tapTime=0;e.holdTimers=[]}));s.pointerEvents=d.defaults;t.exports=d},{"../Interaction":5,"../defaultOptions":18,"../utils":44,"../utils/Signals":34,"./PointerEvent":29}],31:[function(e,t,i){"use strict";var n=e("./base");var r=e("../Interaction");n.signals.on("new",l);n.signals.on("fired",c);var o=["move","up","cancel","endall"];for(var s=0;s<o.length;s++){var a=o[s];r.signals.on(a,d)}function l(e){var t=e.pointerEvent;if(t.type!=="hold"){return}t.count=(t.count||0)+1}function c(e){var t=e.interaction,i=e.pointerEvent,r=e.eventTarget,o=e.targets;if(i.type!=="hold"||!o.length){return}var s=o[0].eventable.options.holdRepeatInterval;if(s<=0){return}t.holdIntervalHandle=setTimeout((function(){n.fire({interaction:t,eventTarget:r,type:"hold",pointer:i,event:i})}),s)}function d(e){var t=e.interaction;if(t.holdIntervalHandle){clearInterval(t.holdIntervalHandle);t.holdIntervalHandle=null}}n.defaults.holdRepeatInterval=0;n.types.push("holdrepeat");t.exports={onNew:l,onFired:c,endHoldRepeat:d}},{"../Interaction":5,"./base":30}],32:[function(e,t,i){"use strict";var n=e("./base");var r=e("../Interactable");var o=e("../utils/is");var s=e("../scope");var a=e("../utils/extend");var l=e("../utils/arr"),c=l.merge;n.signals.on("collect-targets",(function(e){var t=e.targets,i=e.element,n=e.type,r=e.eventTarget;s.interactables.forEachMatch(i,(function(e){var s=e.events;var a=s.options;if(s[n]&&o.element(i)&&e.testIgnoreAllow(a,i,r)){t.push({element:i,eventable:s,props:{interactable:e}})}}))}));r.signals.on("new",(function(e){var t=e.interactable;t.events.getRect=function(e){return t.getRect(e)}}));r.signals.on("set",(function(e){var t=e.interactable,i=e.options;a(t.events.options,n.defaults);a(t.events.options,i)}));c(r.eventTypes,n.types);r.prototype.pointerEvents=function(e){a(this.events.options,e);return this};var d=r.prototype._backCompatOption;r.prototype._backCompatOption=function(e,t){var i=d.call(this,e,t);if(i===this){this.events.options[e]=t}return i};r.settingsMethods.push("pointerEvents")},{"../Interactable":4,"../scope":33,"../utils/arr":35,"../utils/extend":41,"../utils/is":46,"./base":30}],33:[function(e,t,i){"use strict";var n=e("./utils");var r=e("./utils/events");var o=e("./utils/Signals").new();var s=e("./utils/window"),a=s.getWindow;var l={signals:o,events:r,utils:n,document:e("./utils/domObjects").document,documents:[],addDocument:function e(t,i){if(n.contains(l.documents,t)){return false}i=i||a(t);l.documents.push(t);r.documents.push(t);if(t!==l.document){r.add(i,"unload",l.onWindowUnload)}o.fire("add-document",{doc:t,win:i})},removeDocument:function e(t,i){var n=l.documents.indexOf(t);i=i||a(t);r.remove(i,"unload",l.onWindowUnload);l.documents.splice(n,1);r.documents.splice(n,1);o.fire("remove-document",{win:i,doc:t})},onWindowUnload:function e(){l.removeDocument(this.document,this)}};t.exports=l},{"./utils":44,"./utils/Signals":34,"./utils/domObjects":38,"./utils/events":40,"./utils/window":52}],34:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=function(){function e(){n(this,e);this.listeners={}}e.prototype.on=function e(t,i){if(!this.listeners[t]){this.listeners[t]=[i];return}this.listeners[t].push(i)};e.prototype.off=function e(t,i){if(!this.listeners[t]){return}var n=this.listeners[t].indexOf(i);if(n!==-1){this.listeners[t].splice(n,1)}};e.prototype.fire=function e(t,i){var n=this.listeners[t];if(!n){return}for(var r=0;r<n.length;r++){var o;o=n[r];var s=o;if(s(i,t)===false){return}}};return e}();r.new=function(){return new r};t.exports=r},{}],35:[function(e,t,i){"use strict";function n(e,t){return e.indexOf(t)!==-1}function r(e,t){for(var i=0;i<t.length;i++){var n;n=t[i];var r=n;e.push(r)}return e}t.exports={contains:n,merge:r}},{}],36:[function(e,t,i){"use strict";var n=e("./window"),r=n.window;var o=e("./is");var s=e("./domObjects");var a=s.Element;var l=r.navigator;var c={supportsTouch:!!("ontouchstart"in r||o.function(r.DocumentTouch)&&s.document instanceof r.DocumentTouch),supportsPointerEvent:!!s.PointerEvent,isIOS:/iP(hone|od|ad)/.test(l.platform),isIOS7:/iP(hone|od|ad)/.test(l.platform)&&/OS 7[^\d]/.test(l.appVersion),isIe9:/MSIE 9/.test(l.userAgent),prefixedMatchesSelector:"matches"in a.prototype?"matches":"webkitMatchesSelector"in a.prototype?"webkitMatchesSelector":"mozMatchesSelector"in a.prototype?"mozMatchesSelector":"oMatchesSelector"in a.prototype?"oMatchesSelector":"msMatchesSelector",pEventTypes:s.PointerEvent?s.PointerEvent===r.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,wheelEvent:"onmousewheel"in s.document?"mousewheel":"wheel"};c.isOperaMobile=l.appName==="Opera"&&c.supportsTouch&&l.userAgent.match("Presto");t.exports=c},{"./domObjects":38,"./is":46,"./window":52}],37:[function(e,t,i){"use strict";var n=e("./is");t.exports=function e(t){var i={};for(var r in t){if(n.plainObject(t[r])){i[r]=e(t[r])}else{i[r]=t[r]}}return i}},{"./is":46}],38:[function(e,t,i){"use strict";var n={};var r=e("./window").window;function o(){}n.document=r.document;n.DocumentFragment=r.DocumentFragment||o;n.SVGElement=r.SVGElement||o;n.SVGSVGElement=r.SVGSVGElement||o;n.SVGElementInstance=r.SVGElementInstance||o;n.Element=r.Element||o;n.HTMLElement=r.HTMLElement||n.Element;n.Event=r.Event;n.Touch=r.Touch||o;n.PointerEvent=r.PointerEvent||r.MSPointerEvent;t.exports=n},{"./window":52}],39:[function(e,t,i){"use strict";var n=e("./window");var r=e("./browser");var o=e("./is");var s=e("./domObjects");var a={nodeContains:function e(t,i){while(i){if(i===t){return true}i=i.parentNode}return false},closest:function e(t,i){while(o.element(t)){if(a.matchesSelector(t,i)){return t}t=a.parentNode(t)}return null},parentNode:function e(t){var i=t.parentNode;if(o.docFrag(i)){while((i=i.host)&&o.docFrag(i)){continue}return i}return i},matchesSelector:function e(t,i){if(n.window!==n.realWindow){i=i.replace(/\/deep\//g," ")}return t[r.prefixedMatchesSelector](i)},indexOfDeepestElement:function e(t){var i=[];var n=[];var r=void 0;var o=t[0];var a=o?0:-1;var l=void 0;var c=void 0;var d=void 0;var u=void 0;for(d=1;d<t.length;d++){r=t[d];if(!r||r===o){continue}if(!o){o=r;a=d;continue}if(r.parentNode===r.ownerDocument){continue}else if(o.parentNode===r.ownerDocument){o=r;a=d;continue}if(!i.length){l=o;while(l.parentNode&&l.parentNode!==l.ownerDocument){i.unshift(l);l=l.parentNode}}if(o instanceof s.HTMLElement&&r instanceof s.SVGElement&&!(r instanceof s.SVGSVGElement)){if(r===o.parentNode){continue}l=r.ownerSVGElement}else{l=r}n=[];while(l.parentNode!==l.ownerDocument){n.unshift(l);l=l.parentNode}u=0;while(n[u]&&n[u]===i[u]){u++}var h=[n[u-1],n[u],i[u]];c=h[0].lastChild;while(c){if(c===h[1]){o=r;a=d;i=[];break}else if(c===h[2]){break}c=c.previousSibling}}return a},matchesUpTo:function e(t,i,n){while(o.element(t)){if(a.matchesSelector(t,i)){return true}t=a.parentNode(t);if(t===n){return a.matchesSelector(t,i)}}return false},getActualElement:function e(t){return t instanceof s.SVGElementInstance?t.correspondingUseElement:t},getScrollXY:function e(t){t=t||n.window;return{x:t.scrollX||t.document.documentElement.scrollLeft,y:t.scrollY||t.document.documentElement.scrollTop}},getElementClientRect:function e(t){var i=t instanceof s.SVGElement?t.getBoundingClientRect():t.getClientRects()[0];return i&&{left:i.left,right:i.right,top:i.top,bottom:i.bottom,width:i.width||i.right-i.left,height:i.height||i.bottom-i.top}},getElementRect:function e(t){var i=a.getElementClientRect(t);if(!r.isIOS7&&i){var o=a.getScrollXY(n.getWindow(t));i.left+=o.x;i.right+=o.x;i.top+=o.y;i.bottom+=o.y}return i},getPath:function e(t){var i=[];while(t){i.push(t);t=a.parentNode(t)}return i},trySelector:function e(t){if(!o.string(t)){return false}s.document.querySelector(t);return true}};t.exports=a},{"./browser":36,"./domObjects":38,"./is":46,"./window":52}],40:[function(e,t,i){"use strict";var n=e("./is");var r=e("./domUtils");var o=e("./pointerUtils");var s=e("./pointerExtend");var a=e("./window"),l=a.window;var c=e("./arr"),d=c.contains;var u=[];var h=[];var p={};var f=[];var g=function(){var e=false;l.document.createElement("div").addEventListener("test",null,{get capture(){e=true}});return e}();function m(e,t,i,n){var r=S(n);var o=u.indexOf(e);var s=h[o];if(!s){s={events:{},typeCount:0};o=u.push(e)-1;h.push(s)}if(!s.events[t]){s.events[t]=[];s.typeCount++}if(!d(s.events[t],i)){e.addEventListener(t,i,g?r:!!r.capture);s.events[t].push(i)}}function v(e,t,i,n){var r=S(n);var o=u.indexOf(e);var s=h[o];if(!s||!s.events){return}if(t==="all"){for(t in s.events){if(s.events.hasOwnProperty(t)){v(e,t,"all")}}return}if(s.events[t]){var a=s.events[t].length;if(i==="all"){for(var l=0;l<a;l++){v(e,t,s.events[t][l],r)}return}else{for(var c=0;c<a;c++){if(s.events[t][c]===i){e.removeEventListener("on"+t,i,g?r:!!r.capture);s.events[t].splice(c,1);break}}}if(s.events[t]&&s.events[t].length===0){s.events[t]=null;s.typeCount--}}if(!s.typeCount){h.splice(o,1);u.splice(o,1)}}function b(e,t,i,n,r){var o=S(r);if(!p[i]){p[i]={selectors:[],contexts:[],listeners:[]};for(var s=0;s<f.length;s++){var a=f[s];m(a,i,w);m(a,i,C,true)}}var l=p[i];var c=void 0;for(c=l.selectors.length-1;c>=0;c--){if(l.selectors[c]===e&&l.contexts[c]===t){break}}if(c===-1){c=l.selectors.length;l.selectors.push(e);l.contexts.push(t);l.listeners.push([])}l.listeners[c].push([n,!!o.capture,o.passive])}function y(e,t,i,n,r){var o=S(r);var s=p[i];var a=false;var l=void 0;if(!s){return}for(l=s.selectors.length-1;l>=0;l--){if(s.selectors[l]===e&&s.contexts[l]===t){var c=s.listeners[l];for(var d=c.length-1;d>=0;d--){var u=c[d],h=u[0],f=u[1],g=u[2];if(h===n&&f===!!o.capture&&g===o.passive){c.splice(d,1);if(!c.length){s.selectors.splice(l,1);s.contexts.splice(l,1);s.listeners.splice(l,1);v(t,i,w);v(t,i,C,true);if(!s.selectors.length){p[i]=null}}a=true;break}}if(a){break}}}}function w(e,t){var i=S(t);var a={};var l=p[e.type];var c=o.getEventTargets(e),d=c[0];var u=d;s(a,e);a.originalEvent=e;a.preventDefault=_;while(n.element(u)){for(var h=0;h<l.selectors.length;h++){var f=l.selectors[h];var g=l.contexts[h];if(r.matchesSelector(u,f)&&r.nodeContains(g,d)&&r.nodeContains(g,u)){var m=l.listeners[h];a.currentTarget=u;for(var v=0;v<m.length;v++){var b=m[v],y=b[0],w=b[1],C=b[2];if(w===!!i.capture&&C===i.passive){y(a)}}}}u=r.parentNode(u)}}function C(e){return w.call(this,e,true)}function _(){this.originalEvent.preventDefault()}function S(e){return n.object(e)?e:{capture:e}}t.exports={add:m,remove:v,addDelegate:b,removeDelegate:y,delegateListener:w,delegateUseCapture:C,delegatedEvents:p,documents:f,supportsOptions:g,_elements:u,_targets:h}},{"./arr":35,"./domUtils":39,"./is":46,"./pointerExtend":48,"./pointerUtils":49,"./window":52}],41:[function(e,t,i){"use strict";t.exports=function e(t,i){for(var n in i){t[n]=i[n]}return t}},{}],42:[function(e,t,i){"use strict";var n=e("./rect"),r=n.resolveRectLike,o=n.rectToXY;t.exports=function(e,t,i){var n=e.options[i];var s=n&&n.origin;var a=s||e.options.origin;var l=r(a,e,t,[e&&t]);return o(l)||{x:0,y:0}}},{"./rect":51}],43:[function(e,t,i){"use strict";t.exports=function(e,t){return Math.sqrt(e*e+t*t)}},{}],44:[function(e,t,i){"use strict";var n=e("./extend");var r=e("./window");var o={warnOnce:function e(t,i){var n=false;return function(){if(!n){r.window.console.warn(i);n=true}return t.apply(this,arguments)}},_getQBezierValue:function e(t,i,n,r){var o=1-t;return o*o*i+2*o*t*n+t*t*r},getQuadraticCurvePoint:function e(t,i,n,r,s,a,l){return{x:o._getQBezierValue(l,t,n,s),y:o._getQBezierValue(l,i,r,a)}},easeOutQuad:function e(t,i,n,r){t/=r;return-n*t*(t-2)+i},copyAction:function e(t,i){t.name=i.name;t.axis=i.axis;t.edges=i.edges;return t},is:e("./is"),extend:n,hypot:e("./hypot"),getOriginXY:e("./getOriginXY")};n(o,e("./arr"));n(o,e("./domUtils"));n(o,e("./pointerUtils"));n(o,e("./rect"));t.exports=o},{"./arr":35,"./domUtils":39,"./extend":41,"./getOriginXY":42,"./hypot":43,"./is":46,"./pointerUtils":49,"./rect":51,"./window":52}],45:[function(e,t,i){"use strict";var n=e("../scope");var r=e("./index");var o={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function e(t,i,n){var s=r.getPointerType(t);var a=r.getPointerId(t);var l={pointer:t,pointerId:a,pointerType:s,eventType:i,eventTarget:n};for(var c=0;c<o.methodOrder.length;c++){var d;d=o.methodOrder[c];var u=d;var h=o[u](l);if(h){return h}}},simulationResume:function e(t){var i=t.pointerType,o=t.eventType,s=t.eventTarget;if(!/down|start/i.test(o)){return null}for(var a=0;a<n.interactions.length;a++){var l;l=n.interactions[a];var c=l;var d=s;if(c.simulation&&c.simulation.allowResume&&c.pointerType===i){while(d){if(d===c.element){return c}d=r.parentNode(d)}}}return null},mouseOrPen:function e(t){var i=t.pointerId,o=t.pointerType,s=t.eventType;if(o!=="mouse"&&o!=="pen"){return null}var a=void 0;for(var l=0;l<n.interactions.length;l++){var c;c=n.interactions[l];var d=c;if(d.pointerType===o){if(d.simulation&&!r.contains(d.pointerIds,i)){continue}if(d.interacting()){return d}else if(!a){a=d}}}if(a){return a}for(var u=0;u<n.interactions.length;u++){var h;h=n.interactions[u];var p=h;if(p.pointerType===o&&!(/down/i.test(s)&&p.simulation)){return p}}return null},hasPointer:function e(t){var i=t.pointerId;for(var o=0;o<n.interactions.length;o++){var s;s=n.interactions[o];var a=s;if(r.contains(a.pointerIds,i)){return a}}},idle:function e(t){var i=t.pointerType;for(var r=0;r<n.interactions.length;r++){var o;o=n.interactions[r];var s=o;if(s.pointerIds.length===1){var a=s.target;if(a&&!a.options.gesture.enabled){continue}}else if(s.pointerIds.length>=2){continue}if(!s.interacting()&&i===s.pointerType){return s}}return null}};t.exports=o},{"../scope":33,"./index":44}],46:[function(e,t,i){"use strict";var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var r=e("./window");var o=e("./isWindow");var s={array:function e(){},window:function e(t){return t===r.window||o(t)},docFrag:function e(t){return s.object(t)&&t.nodeType===11},object:function e(t){return!!t&&(typeof t==="undefined"?"undefined":n(t))==="object"},function:function e(t){return typeof t==="function"},number:function e(t){return typeof t==="number"},bool:function e(t){return typeof t==="boolean"},string:function e(t){return typeof t==="string"},element:function e(t){if(!t||(typeof t==="undefined"?"undefined":n(t))!=="object"){return false}var i=r.getWindow(t)||r.window;return/object|function/.test(n(i.Element))?t instanceof i.Element:t.nodeType===1&&typeof t.nodeName==="string"},plainObject:function e(t){return s.object(t)&&t.constructor.name==="Object"}};s.array=function(e){return s.object(e)&&typeof e.length!=="undefined"&&s.function(e.splice)};t.exports=s},{"./isWindow":47,"./window":52}],47:[function(e,t,i){"use strict";t.exports=function(e){return!!(e&&e.Window)&&e instanceof e.Window}},{}],48:[function(e,t,i){"use strict";function n(e,i){for(var n in i){var r=t.exports.prefixedPropREs;var o=false;for(var s in r){if(n.indexOf(s)===0&&r[s].test(n)){o=true;break}}if(!o&&typeof i[n]!=="function"){e[n]=i[n]}}return e}n.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/};t.exports=n},{}],49:[function(e,t,i){"use strict";var n=e("./hypot");var r=e("./browser");var o=e("./domObjects");var s=e("./domUtils");var a=e("./domObjects");var l=e("./is");var c=e("./pointerExtend");var d={copyCoords:function e(t,i){t.page=t.page||{};t.page.x=i.page.x;t.page.y=i.page.y;t.client=t.client||{};t.client.x=i.client.x;t.client.y=i.client.y;t.timeStamp=i.timeStamp},setCoordDeltas:function e(t,i,r){t.page.x=r.page.x-i.page.x;t.page.y=r.page.y-i.page.y;t.client.x=r.client.x-i.client.x;t.client.y=r.client.y-i.client.y;t.timeStamp=r.timeStamp-i.timeStamp;var o=Math.max(t.timeStamp/1e3,.001);t.page.speed=n(t.page.x,t.page.y)/o;t.page.vx=t.page.x/o;t.page.vy=t.page.y/o;t.client.speed=n(t.client.x,t.page.y)/o;t.client.vx=t.client.x/o;t.client.vy=t.client.y/o},isNativePointer:function e(t){return t instanceof o.Event||t instanceof o.Touch},getXY:function e(t,i,n){n=n||{};t=t||"page";n.x=i[t+"X"];n.y=i[t+"Y"];return n},getPageXY:function e(t,i){i=i||{};if(r.isOperaMobile&&d.isNativePointer(t)){d.getXY("screen",t,i);i.x+=window.scrollX;i.y+=window.scrollY}else{d.getXY("page",t,i)}return i},getClientXY:function e(t,i){i=i||{};if(r.isOperaMobile&&d.isNativePointer(t)){d.getXY("screen",t,i)}else{d.getXY("client",t,i)}return i},getPointerId:function e(t){return l.number(t.pointerId)?t.pointerId:t.identifier},setCoords:function e(t,i,n){var r=i.length>1?d.pointerAverage(i):i[0];var o={};d.getPageXY(r,o);t.page.x=o.x;t.page.y=o.y;d.getClientXY(r,o);t.client.x=o.x;t.client.y=o.y;t.timeStamp=l.number(n)?n:(new Date).getTime()},pointerExtend:c,getTouchPair:function e(t){var i=[];if(l.array(t)){i[0]=t[0];i[1]=t[1]}else{if(t.type==="touchend"){if(t.touches.length===1){i[0]=t.touches[0];i[1]=t.changedTouches[0]}else if(t.touches.length===0){i[0]=t.changedTouches[0];i[1]=t.changedTouches[1]}}else{i[0]=t.touches[0];i[1]=t.touches[1]}}return i},pointerAverage:function e(t){var i={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0};for(var n=0;n<t.length;n++){var r;r=t[n];var o=r;for(var s in i){i[s]+=o[s]}}for(var a in i){i[a]/=t.length}return i},touchBBox:function e(t){if(!t.length&&!(t.touches&&t.touches.length>1)){return}var i=d.getTouchPair(t);var n=Math.min(i[0].pageX,i[1].pageX);var r=Math.min(i[0].pageY,i[1].pageY);var o=Math.max(i[0].pageX,i[1].pageX);var s=Math.max(i[0].pageY,i[1].pageY);return{x:n,y:r,left:n,top:r,width:o-n,height:s-r}},touchDistance:function e(t,i){var r=i+"X";var o=i+"Y";var s=d.getTouchPair(t);var a=s[0][r]-s[1][r];var l=s[0][o]-s[1][o];return n(a,l)},touchAngle:function e(t,i,n){var r=n+"X";var o=n+"Y";var s=d.getTouchPair(t);var a=s[1][r]-s[0][r];var l=s[1][o]-s[0][o];var c=180*Math.atan2(l,a)/Math.PI;return c},getPointerType:function e(t){return l.string(t.pointerType)?t.pointerType:l.number(t.pointerType)?[undefined,undefined,"touch","pen","mouse"][t.pointerType]:/touch/.test(t.type)||t instanceof a.Touch?"touch":"mouse"},getEventTargets:function e(t){var i=l.function(t.composedPath)?t.composedPath():t.path;return[s.getActualElement(i?i[0]:t.target),s.getActualElement(t.currentTarget)]}};t.exports=d},{"./browser":36,"./domObjects":38,"./domUtils":39,"./hypot":43,"./is":46,"./pointerExtend":48}],50:[function(e,t,i){"use strict";var n=e("./window"),r=n.window;var o=["ms","moz","webkit","o"];var s=0;var a=void 0;var l=void 0;for(var c=0;c<o.length&&!r.requestAnimationFrame;c++){a=r[o[c]+"RequestAnimationFrame"];l=r[o[c]+"CancelAnimationFrame"]||r[o[c]+"CancelRequestAnimationFrame"]}if(!a){a=function e(t){var i=(new Date).getTime();var n=Math.max(0,16-(i-s));var r=setTimeout((function(){t(i+n)}),n);s=i+n;return r}}if(!l){l=function e(t){clearTimeout(t)}}t.exports={request:a,cancel:l}},{"./window":52}],51:[function(e,t,i){"use strict";var n=e("./extend");var r=e("./is");var o=e("./domUtils"),s=o.closest,a=o.parentNode,l=o.getElementRect;var c={getStringOptionResult:function e(t,i,n){if(!r.string(t)){return null}if(t==="parent"){t=a(n)}else if(t==="self"){t=i.getRect(n)}else{t=s(n,t)}return t},resolveRectLike:function e(t,i,n,o){t=c.getStringOptionResult(t,i,n)||t;if(r.function(t)){t=t.apply(null,o)}if(r.element(t)){t=l(t)}return t},rectToXY:function e(t){return t&&{x:"x"in t?t.x:t.left,y:"y"in t?t.y:t.top}},xywhToTlbr:function e(t){if(t&&!("left"in t&&"top"in t)){t=n({},t);t.left=t.x||0;t.top=t.y||0;t.right=t.right||t.left+t.width;t.bottom=t.bottom||t.top+t.height}return t},tlbrToXywh:function e(t){if(t&&!("x"in t&&"y"in t)){t=n({},t);t.x=t.left||0;t.top=t.top||0;t.width=t.width||t.right-t.x;t.height=t.height||t.bottom-t.y}return t}};t.exports=c},{"./domUtils":39,"./extend":41,"./is":46}],52:[function(e,t,i){"use strict";var n=t.exports;var r=e("./isWindow");function o(e){n.realWindow=e;var t=e.document.createTextNode("");if(t.ownerDocument!==e.document&&typeof e.wrap==="function"&&e.wrap(t)===t){e=e.wrap(e)}n.window=e}if(typeof window==="undefined"){n.window=undefined;n.realWindow=undefined}else{o(window)}n.getWindow=function e(t){if(r(t)){return t}var i=t.ownerDocument||t;return i.defaultView||i.parentWindow||n.window};n.init=o},{"./isWindow":47}]},{},[1])(1)}));"undefined"==typeof jQuery.migrateMute&&(jQuery.migrateMute=!0),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],(function(t){return e(t,window)})):"object"==typeof module&&module.exports?module.exports=e(require("jquery"),window):e(jQuery,window)}((function(e,t){"use strict";function i(t){return 0<=function(e,t){for(var i=/^(\d+)\.(\d+)\.(\d+)/,n=i.exec(e)||[],r=i.exec(t)||[],o=1;o<=3;o++){if(+r[o]<+n[o])return 1;if(+n[o]<+r[o])return-1}return 0}(e.fn.jquery,t)}e.migrateVersion="3.3.2",t.console&&t.console.log&&(e&&i("3.0.0")||t.console.log("JQMIGRATE: jQuery 3.0.0+ REQUIRED"),e.migrateWarnings&&t.console.log("JQMIGRATE: Migrate plugin loaded multiple times"),t.console.log("JQMIGRATE: Migrate is installed"+(e.migrateMute?"":" with logging active")+", version "+e.migrateVersion));var n={};function r(i){var r=t.console;e.migrateDeduplicateWarnings&&n[i]||(n[i]=!0,e.migrateWarnings.push(i),r&&r.warn&&!e.migrateMute&&(r.warn("JQMIGRATE: "+i),e.migrateTrace&&r.trace&&r.trace()))}function o(e,t,i,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return r(n),i},set:function(e){r(n),i=e}})}function s(e,t,i,n){e[t]=function(){return r(n),i.apply(this,arguments)}}e.migrateDeduplicateWarnings=!0,e.migrateWarnings=[],void 0===e.migrateTrace&&(e.migrateTrace=!0),e.migrateReset=function(){n={},e.migrateWarnings.length=0},"BackCompat"===t.document.compatMode&&r("jQuery is not compatible with Quirks Mode");var a,l,c,d={},u=e.fn.init,h=e.find,p=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,f=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,g=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;for(a in e.fn.init=function(e){var t=Array.prototype.slice.call(arguments);return"string"==typeof e&&"#"===e&&(r("jQuery( '#' ) is not a valid selector"),t[0]=[]),u.apply(this,t)},e.fn.init.prototype=e.fn,e.find=function(e){var i=Array.prototype.slice.call(arguments);if("string"==typeof e&&p.test(e))try{t.document.querySelector(e)}catch(n){e=e.replace(f,(function(e,t,i,n){return"["+t+i+'"'+n+'"]'}));try{t.document.querySelector(e),r("Attribute selector with '#' must be quoted: "+i[0]),i[0]=e}catch(e){r("Attribute selector with '#' was not fixed: "+i[0])}}return h.apply(this,i)},h)Object.prototype.hasOwnProperty.call(h,a)&&(e.find[a]=h[a]);s(e.fn,"size",(function(){return this.length}),"jQuery.fn.size() is deprecated and removed; use the .length property"),s(e,"parseJSON",(function(){return JSON.parse.apply(null,arguments)}),"jQuery.parseJSON is deprecated; use JSON.parse"),s(e,"holdReady",e.holdReady,"jQuery.holdReady is deprecated"),s(e,"unique",e.uniqueSort,"jQuery.unique is deprecated; use jQuery.uniqueSort"),o(e.expr,"filters",e.expr.pseudos,"jQuery.expr.filters is deprecated; use jQuery.expr.pseudos"),o(e.expr,":",e.expr.pseudos,"jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos"),i("3.1.1")&&s(e,"trim",(function(e){return null==e?"":(e+"").replace(g,"")}),"jQuery.trim is deprecated; use String.prototype.trim"),i("3.2.0")&&(s(e,"nodeName",(function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}),"jQuery.nodeName is deprecated"),s(e,"isArray",Array.isArray,"jQuery.isArray is deprecated; use Array.isArray")),i("3.3.0")&&(s(e,"isNumeric",(function(e){var t=typeof e;return("number"==t||"string"==t)&&!isNaN(e-parseFloat(e))}),"jQuery.isNumeric() is deprecated"),e.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()})),s(e,"type",(function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[Object.prototype.toString.call(e)]||"object":typeof e}),"jQuery.type is deprecated"),s(e,"isFunction",(function(e){return"function"==typeof e}),"jQuery.isFunction() is deprecated"),s(e,"isWindow",(function(e){return null!=e&&e===e.window}),"jQuery.isWindow() is deprecated")),e.ajax&&(l=e.ajax,c=/(=)\?(?=&|$)|\?\?/,e.ajax=function(){var e=l.apply(this,arguments);return e.promise&&(s(e,"success",e.done,"jQXHR.success is deprecated and removed"),s(e,"error",e.fail,"jQXHR.error is deprecated and removed"),s(e,"complete",e.always,"jQXHR.complete is deprecated and removed")),e},i("4.0.0")||e.ajaxPrefilter("+json",(function(e){!1!==e.jsonp&&(c.test(e.url)||"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&c.test(e.data))&&r("JSON-to-JSONP auto-promotion is deprecated")})));var m=e.fn.removeAttr,v=e.fn.toggleClass,b=/\S+/g;function y(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))}e.fn.removeAttr=function(t){var i=this;return e.each(t.match(b),(function(t,n){e.expr.match.bool.test(n)&&(r("jQuery.fn.removeAttr no longer sets boolean properties: "+n),i.prop(n,!1))})),m.apply(this,arguments)};var w,C=!(e.fn.toggleClass=function(t){return void 0!==t&&"boolean"!=typeof t?v.apply(this,arguments):(r("jQuery.fn.toggleClass( boolean ) is deprecated"),this.each((function(){var i=this.getAttribute&&this.getAttribute("class")||"";i&&e.data(this,"__className__",i),this.setAttribute&&this.setAttribute("class",!i&&!1!==t&&e.data(this,"__className__")||"")})))}),_=/^[a-z]/,S=/^(?:Border(?:Top|Right|Bottom|Left)?(?:Width|)|(?:Margin|Padding)?(?:Top|Right|Bottom|Left)?|(?:Min|Max)?(?:Width|Height))$/;e.swap&&e.each(["height","width","reliableMarginRight"],(function(t,i){var n=e.cssHooks[i]&&e.cssHooks[i].get;n&&(e.cssHooks[i].get=function(){var e;return C=!0,e=n.apply(this,arguments),C=!1,e})})),e.swap=function(e,t,i,n){var o,s,a={};for(s in C||r("jQuery.swap() is undocumented and deprecated"),t)a[s]=e.style[s],e.style[s]=t[s];for(s in o=i.apply(e,n||[]),t)e.style[s]=a[s];return o},i("3.4.0")&&"undefined"!=typeof Proxy&&(e.cssProps=new Proxy(e.cssProps||{},{set:function(){return r("JQMIGRATE: jQuery.cssProps is deprecated"),Reflect.set.apply(this,arguments)}})),e.cssNumber||(e.cssNumber={}),w=e.fn.css,e.fn.css=function(t,i){var n,o,s=this;return t&&"object"==typeof t&&!Array.isArray(t)?(e.each(t,(function(t,i){e.fn.css.call(s,t,i)})),this):("number"==typeof i&&(n=y(t),o=n,_.test(o)&&S.test(o[0].toUpperCase()+o.slice(1))||e.cssNumber[n]||r('Number-typed values are deprecated for jQuery.fn.css( "'+t+'", value )')),w.apply(this,arguments))};var A,x,E,T,D=e.data;e.data=function(t,i,n){var o,s,a;if(i&&"object"==typeof i&&2===arguments.length){for(a in o=e.hasData(t)&&D.call(this,t),s={},i)a!==y(a)?(r("jQuery.data() always sets/gets camelCased names: "+a),o[a]=i[a]):s[a]=i[a];return D.call(this,t,s),i}return i&&"string"==typeof i&&i!==y(i)&&(o=e.hasData(t)&&D.call(this,t))&&i in o?(r("jQuery.data() always sets/gets camelCased names: "+i),2<arguments.length&&(o[i]=n),o[i]):D.apply(this,arguments)},e.fx&&(E=e.Tween.prototype.run,T=function(e){return e},e.Tween.prototype.run=function(){1<e.easing[this.easing].length&&(r("'jQuery.easing."+this.easing.toString()+"' should use only one argument"),e.easing[this.easing]=T),E.apply(this,arguments)},A=e.fx.interval||13,x="jQuery.fx.interval is deprecated",t.requestAnimationFrame&&Object.defineProperty(e.fx,"interval",{configurable:!0,enumerable:!0,get:function(){return t.document.hidden||r(x),A},set:function(e){r(x),A=e}}));var M=e.fn.load,k=e.event.add,P=e.event.fix;e.event.props=[],e.event.fixHooks={},o(e.event.props,"concat",e.event.props.concat,"jQuery.event.props.concat() is deprecated and removed"),e.event.fix=function(t){var i,n=t.type,o=this.fixHooks[n],s=e.event.props;if(s.length){r("jQuery.event.props are deprecated and removed: "+s.join());while(s.length)e.event.addProp(s.pop())}if(o&&!o._migrated_&&(o._migrated_=!0,r("jQuery.event.fixHooks are deprecated and removed: "+n),(s=o.props)&&s.length))while(s.length)e.event.addProp(s.pop());return i=P.call(this,t),o&&o.filter?o.filter(i,t):i},e.event.add=function(e,i){return e===t&&"load"===i&&"complete"===t.document.readyState&&r("jQuery(window).on('load'...) called after load event occurred"),k.apply(this,arguments)},e.each(["load","unload","error"],(function(t,i){e.fn[i]=function(){var e=Array.prototype.slice.call(arguments,0);return"load"===i&&"string"==typeof e[0]?M.apply(this,e):(r("jQuery.fn."+i+"() is deprecated"),e.splice(0,0,i),arguments.length?this.on.apply(this,e):(this.triggerHandler.apply(this,e),this))}})),e.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,i){e.fn[i]=function(e,t){return r("jQuery.fn."+i+"() event shorthand is deprecated"),0<arguments.length?this.on(i,null,e,t):this.trigger(i)}})),e((function(){e(t.document).triggerHandler("ready")})),e.event.special.ready={setup:function(){this===t.document&&r("'ready' event is deprecated")}},e.fn.extend({bind:function(e,t,i){return r("jQuery.fn.bind() is deprecated"),this.on(e,null,t,i)},unbind:function(e,t){return r("jQuery.fn.unbind() is deprecated"),this.off(e,null,t)},delegate:function(e,t,i,n){return r("jQuery.fn.delegate() is deprecated"),this.on(t,e,i,n)},undelegate:function(e,t,i){return r("jQuery.fn.undelegate() is deprecated"),1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return r("jQuery.fn.hover() is deprecated"),this.on("mouseenter",e).on("mouseleave",t||e)}});function R(e){var i=t.document.implementation.createHTMLDocument("");return i.body.innerHTML=e,i.body&&i.body.innerHTML}function I(e){var t=e.replace(O,"<$1></$2>");t!==e&&R(e)!==R(t)&&r("HTML tags must be properly nested and closed: "+e)}var O=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,N=e.htmlPrefilter;e.UNSAFE_restoreLegacyHtmlPrefilter=function(){e.htmlPrefilter=function(e){return I(e),e.replace(O,"<$1></$2>")}},e.htmlPrefilter=function(e){return I(e),N(e)};var L,F=e.fn.offset;e.fn.offset=function(){var e=this[0];return!e||e.nodeType&&e.getBoundingClientRect?F.apply(this,arguments):(r("jQuery.fn.offset() requires a valid DOM element"),arguments.length?this:void 0)},e.ajax&&(L=e.param,e.param=function(t,i){var n=e.ajaxSettings&&e.ajaxSettings.traditional;return void 0===i&&n&&(r("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),i=n),L.call(this,t,i)});var $,G,B=e.fn.andSelf||e.fn.addBack;return e.fn.andSelf=function(){return r("jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()"),B.apply(this,arguments)},e.Deferred&&($=e.Deferred,G=[["resolve","done",e.Callbacks("once memory"),e.Callbacks("once memory"),"resolved"],["reject","fail",e.Callbacks("once memory"),e.Callbacks("once memory"),"rejected"],["notify","progress",e.Callbacks("memory"),e.Callbacks("memory")]],e.Deferred=function(t){var i=$(),n=i.promise();return i.pipe=n.pipe=function(){var t=arguments;return r("deferred.pipe() is deprecated"),e.Deferred((function(r){e.each(G,(function(e,o){var s="function"==typeof t[e]&&t[e];i[o[1]]((function(){var e=s&&s.apply(this,arguments);e&&"function"==typeof e.promise?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o[0]+"With"](this===n?r.promise():this,s?[e]:arguments)}))})),t=null})).promise()},t&&t.call(i,i),i},e.Deferred.exceptionHook=$.exceptionHook),e}));