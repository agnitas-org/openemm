
//TODO: check if comment lines are redundant and remove them

@mixin form-control-validation($color: $light-grey, $border-color: $color) {
  //// Color the label and help text
  //.help-block,
  .form-label,
  //.radio,
  //.checkbox,
  //.radio-inline,
  //.checkbox-inline
  {
    color: #{$color};
  }
  // Set the border and box shadow on specific inputs to match
  .form-control, .select2-container .select2-selection.form-control {
    border-color: #{$border-color};
    @include border-bottom-radius(0);
    
  //  @include box-shadow(inset 0 1px 1px rgba(0,0,0,.075)); // Redeclare so transitions work
  //  &:focus {
  //    border-color: darken($border-color, 10%);
  //    $shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 6px lighten($border-color, 20%);
  //    @include box-shadow($shadow);
  //  }
  }

  // //Optional feedback icon
  //.form-control-feedback {
  //  color: $text-color;
  //}
}

.has-feedback {
  @include form-control-validation("var(--label-color)", $border-color);

  .form-control-feedback-message {
    color: var(--validation-feedback-color);
    background-color: var(--validation-feedback-bg-color);
    border: $border-default;
    border-top: none;
  }
}

@each $conf in $states {
  $state: nth($conf, 1);
  $color: nth($conf, 2);

  .has-#{$state} {
    @include form-control-validation($color);

    .form-control-feedback-message { 
      background-color: $color;
      color: $white;
      border-color: $color;
    }
  }
}

.form-control-feedback-message {
  display: flex;
  align-items: center;
  gap: $gap-x-sm;
  padding: $gap-x-sm $gap-sm;
  color: $white;

  &:last-child {
    @include border-bottom-radius;
  }
}
